# StackOverflow 问答 12726000-12726999

# java - 在java中设置文件位置而不进行硬编码

> ID：12726002
> 
> 赞同：2
> 
> 时间：2012-10-04T11:11:32.103
> 
> 标签：java, file

有没有办法可以使用一些函数来动态设置文件的位置（目录）？

每次我用这样的硬编码文件位置

```
 String folder = "/Users/...../Desktop/sample";
    File dir = new File(folder);
    File[] files = dir.listFiles(); 
```

有什么方法可以避免硬编码吗？我使用的位置不是我当前的目录。

在这方面的建议或帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:29:15.377

在我看来，一些相当简单的方法是可行的，但可能并不完全是你想要的：

**从类路径导航**

```
ClassLoader cl = Thread.currentThread().getContextClassLoader();
URL url = cl.getResource("relative/path/from/classpath"); 
```

或者

```
String path = getClass().getClassLoader().getResource(".").getPath(); 
```

* * *

**使用包含路径条目的属性文件**

```
Properties properties = new Properties();
properties.load(new FileInputStream("filename.properties"));
properties.getProperty("PATH") 
```

在你的属性文件中，你会有这样的一行

```
PATH = the/absolute/path 
```

* * *

**使用环境变量**

```
System.getenv("THE_PATH_ENV") 
```

您将路径存储在环境变量中的位置（如果适用于您的操作系统）。

* * *

**将路径作为参数给出** 嗯，那个很简单......只需访问 main 中的字符串数组......

```
public static void main(String[] args){
    String path = args[0]; //Or at whatever position it is in your parameter list
    .. 
```

* * *

或者，我认为可以使用 Java 文件系统命令手动遍历目录结构并在其中搜索内容。但是，我不建议这样做，因为这不是他们的目的。如果我想我会求助于一些第 3 方 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:17:50.553

[如何获取我的 android 项目中文件夹的相对路径？](https://stackoverflow.com/questions/2698002/how-can-i-get-relative-path-of-the-folders-in-my-project-java)

在项目层次结构中放置一个文件夹，获取项目的相对路径，附加/硬编码文件夹名称和您的文件名。最后你只会硬编码文件名或最后一个文件夹名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:36:28.947

首先，您可以创建一个属性文件，其中存储了您的路径（您可以运行一次并稍后在您的程序中使用该文件）：

```
/* Create/save properties once */

Properties prop = new Properties();

prop.setProperty("filePath", "/myPath/");

FileOutputStream fos = new FileOutputStream("sampleprops.xml");
prop.storeToXML(fos, "File configuration");
fos.close(); 
```

其次，您可以在代码中加载所需的属性：

```
Properties prop = new Properties();
FileInputStream fis = new FileInputStream("sampleprops.xml");
prop.loadFromXML(fis);

File dir = new File(prop.getProperty("filePath"));
File[] files = dir.listFiles(); 
```

您只需确保您可以访问 sampleprops.xml 文件（应该在应用程序的类路径中）。这样，您可以从外部配置文件配置要使用的路径。

# android - Android 服务在 ZXing 的 onActivityResults 中的 stopService 之后运行

> ID：12726003
> 
> 赞同：0
> 
> 时间：2012-10-04T11:11:51.353
> 
> 标签：android, service, zxing

我有一个使用 ZXing 库扫描 qrcode 以获取客户端数据的应用程序。二维码保存经度和纬度数据。当扫描发生时，我可以从扫描结果中获取信息。这是 ZXing 扫描的 onActivityResult 内部。在 onActivityResult 中，我启动了一个服务来查找用户位置，然后将来自服务的结果与保存在 qrcode 上的结果进行比较。扫描结果以及来自服务的 lon 和 lat 值然后存储在手机上的 sqlite DB 中，这称为事务。如果数据库为空，则事务将存储到数据库中。如果数据库中已经有事务，那么服务会运行两次，即使我已经调用了 stopService。任何人都可以告诉我为什么。

我已经注销了服务被破坏了，服务被破坏后有什么理由可以运行吗？谢谢。

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        Log.e(TAG, "in onActivityResult from ZXing");
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                Log.e(TAG, "result ok");
                ///////////////////////////////
                tagScanTime  = new DateTime();
                thirtySecsAgo = tagScanTime.minus(30000);
                DateTimeFormatter df = DateTimeFormat.forPattern("dd/MMM/yy h:mmaa");
                String formattedScanTime = df.print(tagScanTime);
                Log.e(TAG, "formatted tag scan time = " + formattedScanTime);
                String formattedthirtysecsAgoTime = df.print(thirtySecsAgo);
                Log.e(TAG, "formatted thity secs ago time = " + formattedthirtysecsAgoTime);

                 contents = intent.getStringExtra("SCAN_RESULT");
                Toast.makeText(this, "scanner has found " + contents,
                        Toast.LENGTH_LONG).show();

                 locationChangereceiver = new BroadcastReceiver() {

                        @Override
                        public void onReceive(Context context, Intent intent) {

                            LocationChangeIntent myIntent = (LocationChangeIntent) intent;
                            lon = myIntent.getLongitude();
                            lat = myIntent.getLaltitude();

                            Log.e( TAG, "values from service =========="+lon+" "+ lat);
                            // stop the service.
                            stopService(new Intent(context, LocationService.class));
                            Log.e( TAG, "just called stopService in nfcscsnActivity");
                            String[] splitPayload = contents.split("@");

                            tagType = splitPayload[0];
                            tagCompany = splitPayload[1];
                            tagPerson = splitPayload[2];
                            tagUserName = splitPayload[3];
                            ////////////////////////////////following values currently not stored to DB
                            tagLongitude = splitPayload[4];
                            tagLatitude = splitPayload[5];

                            Log.e(TAG, "about to compare lon/lat of tag to lon/lat of service");
                            if(tagLongitude.toString().trim().equalsIgnoreCase(String.valueOf(lon))
                                    && tagLatitude.toString().trim().equalsIgnoreCase(String.valueOf(lat))){

                                showToast("carer not in exact position");
                                Log.e(TAG, "carer not in exact position");
                            }else{

                                showToast("carer is in exact position");
                                Log.e(TAG, "carer is in exact position");
                            }

                            processinfo();
                        }
                    };
                    LocalBroadcastManager.getInstance(getApplicationContext()).registerReceiver(locationChangereceiver,
                            new IntentFilter(LocationChangeIntent.ACTION_LOCATION_CHAHGE));
                    startService(new Intent(this, LocationService.class));

            } else if (resultCode == RESULT_CANCELED) {
                // Handle cancel
                Log.e(TAG, "There's a problem with the scan. Scan result failed");
                Toast.makeText(this, "There's a problem with the scan. Scan result failed",
                        Toast.LENGTH_LONG).show();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:57:40.707

解决了。我只在服务停止后才处理信息。为此，我检查了服务是否已停止使用

```
if(stopService(new Intent(context, LocationService.class))){

processInfo()
} 
```

因为 stopservice 返回一个布尔值。

# html - 如何在所有浏览器中使网站分辨率相同

> ID：12726006
> 
> 赞同：-2
> 
> 时间：2012-10-04T11:12:05.370
> 
> 标签：html, css

我已经建立了一个网站，但是我在测试时注意到的是，它在其他系统中以不同的分辨率出现。我想让网页看起来完全适合任何分辨率。如何做到这一点谁能帮助我？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:13:02.533

在 1000 像素以下或使用 960 网格布局创建您的网站。它将适合所有版本。

对于移动设备 - 使用 CSS 媒体查询或使用百分比（目标/上下文=结果）创建您的网站，并将 ems 用于字体和边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:29:10.650

为了使您的网站具有响应性，您可以使用 css 媒体查询。

[参考这个链接](http://kyleschaeffer.com/best-practices/responsive-layouts-using-css-media-queries/)

# android - 如何在 MotionEvent.ACTION_DOWN 时重复音效

> ID：12726010
> 
> 赞同：0
> 
> 时间：2012-10-04T11:12:08.237
> 
> 标签：android, android-mediaplayer

我试图将其设置`setLooping`为 true，但没有任何结果。我希望在检测到事件时重复声音效果，并在释放时停止重复。

```
public class MainActivity extends Activity implements SurfaceHolder.Callback {
  MediaPlayer player;
  public void onCreate(Bundle savedInstanceState) {
    player = MediaPlayer.create(this, R.raw.rifle);
    player.setLooping(true);
  }
  @Override
  public boolean onTouchEvent(MotionEvent event) {
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int height = metrics.heightPixels;
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
      int ey = (int) event.getY();
      if (ey > height / 2) {
        player.start();
      }
    }
    return super.onTouchEvent(event);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:16:14.353

```
if (event.getAction() == MotionEvent.ACTION_DOWN) {
  // start music
}
else if (event.getAction() == MotionEvent.ACTION_UP) {
  // stop music
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:19:54.227

您没有准备播放器。

你不能在一个没有准备好的玩家上调用 start。

# javascript - 具有动态数据的 Highcharts

> ID：12726012
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:12:17.703
> 
> 标签：javascript, charts, highcharts

> **可能重复：**
> [如何在javascript中动态地将项目添加到数组中](https://stackoverflow.com/questions/10632180/how-to-add-items-to-an-array-dynamically-in-javascript)

我正在向 highchart 动态添加数据，但加载后仅显示空图表

这是我尝试过的链接， [http://jsfiddle.net/XjzFH/30/](http://jsfiddle.net/XjzFH/30/)和 [http://jsfiddle.net/XjzFH/31/](http://jsfiddle.net/XjzFH/31/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:51:58.637

您不能只是将数据推送到系列对象中并期望它显示出来
您将需要使用该[`Series.addPoint()`](http://api.highcharts.com/highcharts#Series.addPoint%28%29)方法。仅当您要设置单个点或点的子集时，才真正推荐使用此方法。

```
chart.series[0].addPoint(d1); 
```

如果您希望动态设置所有点（如您的情况），那么您应该使用该[`Series.setData()`](http://api.highcharts.com/highcharts#Series.setData%28%29)方法

```
chart.series[0].setData([d1,d2,d3,d3]); 
```

[动态加分 | Highchart & Highstock @ jsFiddle](http://jsfiddle.net/jugal/Ghp68/)

# php - 在这种情况下 eval 的目的

> ID：12726014
> 
> 赞同：0
> 
> 时间：2012-10-04T11:12:29.753
> 
> 标签：php, javascript, eval

我正在研究一个自定义框架。我找到了一个类似的代码

```
<script type="text/javascript"> 
<?php
    echo "ABC.Variables.Objects = eval('(" . $Objects . ")');";
?>
</script> 
```

在查看源代码中我看到了类似的代码

```
ABC.Variables.Objects = eval('({"success":true,"results":11})'); 
```

在这种情况下使用 EVAL 的主要目的是什么？正在服务器端的客户端工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:13:56.610

`eval`这里用于将 json 格式字符串转换为 javascript 对象。正确的做法是`JSON.parse(str)`为旧浏览器使用或一些 json 解析函数。

**但是你不需要`eval`在这种情况下使用，甚至`JSON.parse()`没有必要。**

你只需要这样做：

```
<script type="text/javascript">
  // of course $Objects needs to be a valid json string, eg the result of json_encode 
  ABC.Variables.Objects = <?php echo $Objects ?>;
</script> 
```

在源代码中，您应该看到：

```
ABC.Variables.Objects =　{"success":true,"results":11}; 
```

不需要评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:14:26.247

PHP 已输出 JavaScript 代码以供客户端浏览器执行。在 JavaScript（*而不是 PHP*）中，`eval()` 调用它来将最初存储在 PHP 变量中的 JSON 字符串解析`$Objects`为 JavaScript 对象。

而不是`eval()`，它真的应该打电话`JSON.parse()`。

本来会更好：

```
echo "ABC.Variables.Objects = JSON.parse('" . $Objects . "');"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:19:30.763

在这里，eval 函数将 json 字符串转换为 json 对象。

# linux - linux搜索模式并打印其计数

> ID：12726015
> 
> 赞同：0
> 
> 时间：2012-10-04T11:12:31.290
> 
> 标签：linux, shell, count, grep, command

在下面我试图grep所有geoIs的模式。我的问题是我如何列出geoIs的不同值及其计数

前任：

```
GeoIs:"Paramount","sumthing else"
GeoIs:"undefined","sumthing else"
GeoIs:"undefined","sumthing else"
GeoIs:"178","sumthing else"
GeoIs:"178","sumthing else"
and many more
...
... 
```

预期结果：

```
GeoIs:"Paramount" 1
GeoIs:"undefined" 2
GeoIs:"178" 2 
```

命令

`zcat file.gz | grep -P '"geoIs":".*?.undefined*?"' | sort -u -T.|wc -l`

编辑1：

在以下字符串中找到 GEOIS

```
 012-10-02 09:32:45{"e":{"ec":100001,"st":1349170352455,"bd":"Mozilla%2F5.0%20(Windows%20NT%206.1)%20AppleWebKit%2F537.4%20(KHTMf01f02008592~rt%2366.657~rv%2366.228~as%2317~st%231349170293955~cat%231349170352431~sp%23as~c%2334~pat%231349128562942","smplCookie":"undefined","geoIPAddress":"122.107.154.58","geoCountry":"australia","geoCity":"Vermont","geoRegion":"Victoria","geoPostalCode":"undefined","geoLatitude":"undefined","geoLongitude":"undefined","geoMetro":"0","geoArea":"0","geoIs"}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:14:39.817

要返回频率表，请使用

```
sort | uniq -c | sort -n 
```

对于您提供的示例数据，我会使用

```
zcat file.gz | cut -f1 -d, | sort | uniq -c | sort -n

zcat file.gz | grep -o '"searchstring":"[^"]*"'| sort | uniq -c | sort -n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:28:45.043

一个 awk 替代方案：

```
awk -F, '{a[$1]++;}END{for(x in a)if(x)print x,a[x]}' file

kent$  echo 'GeoIsp:"Paramount","sumthing else"
GeoIsp:"undefined","sumthing else"
GeoIsp:"undefined","sumthing else"
GeoIsp:"178","sumthing else"
GeoIsp:"178","sumthing else"
'|awk -F, '{a[$1]++;}END{for(x in a)if(x)print x,a[x]}'
GeoIsp:"Paramount" 1
GeoIsp:"undefined" 2
GeoIsp:"178" 2 
```

# jquery - Jquery中的即时信使，如何将完整的div附加到#container div

> ID：12726022
> 
> 赞同：0
> 
> 时间：2012-10-04T11:13:00.413
> 
> 标签：jquery, append, expand, instant-messaging

*我试图在位于屏幕底部的 facebook 风格的栏中构建一个即时通讯工具，经过多次尝试，我有了一个基本的设置，但我坚持如何解决这个问题。*我希望我的问题足够具体。想想我试图以简单形式复制的 Facebook IM。

我的代码有 2 个相关问题，1 个问题：

1.  如果你点击绿色的朋友 div 它向下扩展，如何使它向上扩展？

2.  当您单击任何朋友时，将额外的 div 附加到#container 的好方法是什么？

    问题：。我可以使用像 jquery UI 这样的组件，还是有一些很好的例子可以借鉴和学习？我相对 jquery 新手，并尝试了几个小时来找到如何做到这一点:(

**的HTML：**

```
<div id="container">
  <div id="friends">
    Friends: (2) Online
      <ul>
          <li id="person">Doutzen</li>
          <li id="person">Alexandra</li>
      </ul>
  </div>
    container, new chat boxes appear here
</div> 
```

**的CSS：**

```
body {
    padding-top: 400px;
}

#container {
    background-color: grey;
    width: 100%;
    height: 30px;
}

#friends {
    position: relative;
    height: 10px;
    color: white;
    width: 150px;
    background-color: green;
    padding: 10px;
    float: right;
    overflow: hidden;
}

#friends ul li {
    padding: 10px;
    margin: 10px;
    background-color: darkgreen;
}
​ 
```

**jQuery：**

```
$('#friends').toggle(function(){
    $(this).animate({'height': '100px'}, 10);
}, function(){
    $(this).animate({'height': '10px'}, 10);
});

$(".person").click(function () {
      $('#container').append("<div class='chat'>chat with ...</div>");
}); 
```

**工作示例：http:** [//jsfiddle.net/qJCmF/5/](http://jsfiddle.net/qJCmF/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:20:25.857

1) 对于向上和向下扩展，看一下[Slide](http://docs.jquery.com/UI/Effects/Slide) jQuery UI 效果。您可以将其与 和 结合使用`$('#my-element').show('slide');`，`$('#my-element').hide('slide');`如图所示。此外，您还可以以同样的方式使用许多其他效果，这些效果可能更符合您的需求；您甚至可以提供额外的参数来控制效果呈现的方式。

2) 要将额外的 DOM 元素附加到您的容器，您可以继续调用`append()`或`prepend()`jQuery 函数，它们会继续将您的元素添加到容器子元素的末尾或开头。

# java - android - 移动和旋转 ImageView 的问题

> ID：12726025
> 
> 赞同：0
> 
> 时间：2012-10-04T11:13:08.490
> 
> 标签：java, android, android-imageview

我正在研究如何使用一个简单的应用程序与屏幕上的对象进行交互：

我有一个`ImageView`可以用一个指针移动并使用第二个指针旋转。当视图被触摸时，它的大小会略微增加，并在释放时恢复到原始大小。我对这个应用程序有 2 个问题：

*   旋转时，它在 0° 和 180° 之间的行为不正确；
*   发布后，图像被裁剪。

我不知道这是否可以轻松解决，或者我需要完全改变我的方法，但非常感谢任何帮助/提示。

这是我的代码：

main.xml 是一个空的 RelativeLayout。

```
public class MainActivity extends Activity{

ImageView image;
ViewGroup group;
int oldX, oldY;
static float x1,y1, degrees, width,height;
RelativeLayout.LayoutParams startLayoutParams;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    group = (ViewGroup)findViewById(R.id.root);
    image = new ImageView(this);
    image.setImageResource(R.drawable.androids);//set image(80x80px)
    image.setOnTouchListener(touch);
    startLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        startLayoutParams.leftMargin = 50;
        startLayoutParams.topMargin = 50;
        startLayoutParams.bottomMargin = -250;
        startLayoutParams.rightMargin = -250;

    image.setLayoutParams(startLayoutParams);
    group.addView(image);   

}//end onCreate

public OnTouchListener touch = new OnTouchListener() {

    RelativeLayout.LayoutParams downParams, upParams, moveParams;

    @Override
    public boolean onTouch(View view, MotionEvent event) {

        final int X = (int) event.getRawX();
        final int Y = (int) event.getRawY();

        switch (event.getAction() & MotionEvent.ACTION_MASK) {

            case MotionEvent.ACTION_DOWN:

                ((ImageView)view).setImageResource(R.drawable.android);//set slightly larger image(100x100px)

                downParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
                    downParams.leftMargin = downParams.leftMargin-10;//adjust margin to compensate for larger image
                    downParams.topMargin = downParams.topMargin-10;
                    downParams.bottomMargin = -250;
                    downParams.rightMargin = -250;

                view.setLayoutParams(downParams);

                oldX = X - downParams.leftMargin;//get starting position
                oldY = Y - downParams.topMargin;

                break;

            case MotionEvent.ACTION_UP:

                ((ImageView)view).setImageResource(R.drawable.androids);//Reset smaller image

                upParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
                    upParams.leftMargin += 10;//re-adjust margin
                    upParams.topMargin += 10;
                    upParams.bottomMargin = -250;
                    upParams.rightMargin = -250;

                view.setLayoutParams(upParams);

                break;

            case MotionEvent.ACTION_POINTER_2_DOWN:

                x1=event.getX(1);// get starting coordinates for calculating degrees to rotate
                y1=event.getY(1);

                break;

            case MotionEvent.ACTION_MOVE:

                int pointer         = event.getPointerId(0);
                int pointerCount    = event.getPointerCount();

                moveParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
                    moveParams.leftMargin = X - oldX;//get new position
                    moveParams.topMargin = Y - oldY;
                    moveParams.rightMargin = -250;
                    moveParams.bottomMargin = -250;

            if (pointerCount == 1) {//move image

                view.setLayoutParams(moveParams);

            }else if(pointerCount == 2){//move and rotate image

                for(int i = 0 ; i<pointerCount;i++){

                    if(event.getPointerId(i)==pointer){

                        view.setLayoutParams(moveParams);//move

                    }//end if

                }//end for

                degrees = getDegrees(event);
                width = ((ImageView)view).getDrawable().getBounds().width();
                height = ((ImageView)view).getDrawable().getBounds().height();

                Matrix matrix=new Matrix();
                ((ImageView)view).setScaleType(ScaleType.MATRIX);   //required
                matrix.postRotate(degrees, width/2, height/2);//rotate
                ((ImageView)view).setImageMatrix(matrix);

            }//end if-else if

            break;

        }//end switch-case

        group.invalidate();

        return true;

    }//end onTouch

};//end OnTouchListener touch

public static float getDegrees(MotionEvent event){

    float x0,y0, x2,y2, A,B,C, angle,cosa;

    x0 = event.getX(0);
    y0 = event.getY(0);
    x2 = event.getX(1);
    y2 = event.getY(1);

    A =  FloatMath.sqrt(sq(x0-x1) + sq(y0-y1));
    B =  FloatMath.sqrt(sq(x0-x2) + sq(y0-y2));
    C =  FloatMath.sqrt(sq(x2-x1) + sq(y2-y1));

    cosa = (sq(A)+sq(B)-sq(C))/(2*A*B);
    angle = (float) Math.toDegrees(Math.acos(cosa));

    return  (x0<=x2) ? angle : opposite(angle);

}//end getDegrees

private static float sq(float input){

    return (float) Math.pow(input, 2);

}//end square

private static float opposite(float value){

    return value-(2*value);

}//end opposite
}//end MainActivity 
```

我意识到关于这个主题有很多问题，我已经阅读了几十个并尝试了其中几个，但问题仍然存在或出现了其他问题，因此我决定发布这个问题。

getDegrees() 的信息：

我不能发布图片所以检查：http: [//i50.tinypic.com/vsjl28.jpg](http://i50.tinypic.com/vsjl28.jpg)

*   *p0 =(x0,y0) =第一个指针*的当前位置
**   p1 =(x1,y1) =*第二个指针*首先被放下的地方*   *p2 =(x2,y2) =第二个指针*的当前位置*

 **如果第二个指针位于第一个指针的右侧，getDegrees() 返回*角度 c* ，当位于其左侧时*c 的负值。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:28:21.520

您正在寻找 CA 和 CB 之间的角度。当角度经过 180 度时，三角形 ABC 将位于线 CA 的另一侧。因此，角度将再次开始减小，直到您回到角度再次为零的 CA=CB。

恐怕我不能真正建议另一种方法，因为我不完全了解您希望三角形如何相对于触摸输入旋转。**

# java - 将“&”运算符从 Java 移植到 Javascript：溢出问题

> ID：12726028
> 
> 赞同：0
> 
> 时间：2012-10-04T11:13:15.437
> 
> 标签：java, javascript, numbers, long-integer

考虑以下**JAVA**语句：

```
System.out.println(3232235776l & 0xFFFFFFFE); 
```

输出为：**3232235776**

* * *

**当我用JavaScript**重写语句时：

```
console.log(3232235776 & 0xFFFFFFFE); 
```

输出为：**-1062731520**

**问：有没有办法解决 JavaScript 中的这种溢出问题并获得*正确*的输出？**

* * *

为了简单起见，我没有发布我从 Java 转换的函数。这里是。请假设`ipToLong`并`longToIp`作为 Java 和 JavaScript 中的工作黑盒（即，它们在 Java 和 JS 中正确地进行 ip 到 long int 的转换，反之亦然，经过 linted 和单元测试）。

**取自这里：[https ://stackoverflow.com/a/5032908/504674](https://stackoverflow.com/a/5032908/504674)**

现在，有人可以帮我将下面的 Java 行正确转换为 JavaScript 吗？
具体来说：`long maskedBase = start & mask;`。

**要转换的完整功能：**

```
public static List<String> range2cidrlist( String startIp, String endIp ) {
    int[] CIDR2MASK = new int[] { 0x00000000, 0x80000000,
        0xC0000000, 0xE0000000, 0xF0000000, 0xF8000000, 0xFC000000,
        0xFE000000, 0xFF000000, 0xFF800000, 0xFFC00000, 0xFFE00000,
        0xFFF00000, 0xFFF80000, 0xFFFC0000, 0xFFFE0000, 0xFFFF0000,
        0xFFFF8000, 0xFFFFC000, 0xFFFFE000, 0xFFFFF000, 0xFFFFF800,
        0xFFFFFC00, 0xFFFFFE00, 0xFFFFFF00, 0xFFFFFF80, 0xFFFFFFC0,
        0xFFFFFFE0, 0xFFFFFFF0, 0xFFFFFFF8, 0xFFFFFFFC, 0xFFFFFFFE,
        0xFFFFFFFF
    };

    long start = ipToLong(startIp);
    long end = ipToLong(endIp);

    ArrayList<String> pairs = new ArrayList<String>();
    while ( end >= start ) {
        byte maxsize = 32;
        while ( maxsize > 0) {
            long mask = CIDR2MASK[maxsize -1];
            long maskedBase = start & mask;

            if ( maskedBase != start ) {
                break;
            }

            maxsize--;
        }
        double x = Math.log( end - start + 1) / Math.log( 2 );
        byte maxdiff = (byte)( 32 - Math.floor( x ) );
        if ( maxsize < maxdiff) {
            maxsize = maxdiff;
        }
        String ip = longToIp(start);
        pairs.add( ip + "/" + maxsize);
        start += Math.pow( 2, (32 - maxsize) );
    }
    return pairs;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:23:20.553

而不是`&`用来删除你想要的位，你可以减去它。

```
long n = 3232235776L;
System.out.println(n - (n & 1)); // instead of 1 you can use ~0xFFFFFFFE 
```

在您的情况下，这不应该受到溢出的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:31:38.867

> 按位运算符将其操作数视为 32 位（零和一）的序列

[Mozilla 文档说。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)

您从浮点值开始，它被转换为 32 位值。但是因为太大，会溢出。

我建议您尝试以下方法：

```
var number = 3232235776;
if (number % 2 == 1) {
    number = number - 1;
} 
```

当然，你可以写得更简洁，但也更神秘：

```
var number = 3232235776;
number = number - (number % 2); 
```

对于正数和负数，这在语义上应该是等效的。

## 标志扩展

在 Java 中，`0xFFFFFFFE`是一个 32 位整数，表示`-2`当与 long 进行与运算时，它会转换为 64 位整数：`0xFFFF_FFFF_FFFF_FFFE`，因此所有这一切实际上都是清除最后一位，即向下舍入（向下，而不是向零）。

我不确定这是否是你想要的。如果它是有意的，它可能**不是***我*想要的代码库中的东西。

## 无符号扩展

这是等效的 JavaScript 代码，如果您希望在没有符号扩展的情况下发生这种情况：

```
var number = 3232235776;
if (number % 2 == 1) {
    number = number - 1;
}
number = number % 0x100000000; // That's 8 zeroes, i.e. keep the last 4 bytes 
```

# umbraco - 如何遍历选项卡中的属性并使用 Razor 显示它们？

> ID：12726032
> 
> 赞同：0
> 
> 时间：2012-10-04T11:13:31.587
> 
> 标签：umbraco

我有一个文档类型，它有一个带有一些属性的选项卡。

属性是上传类型和简单编辑器类型。

（用户应该上传带有一些图像文本的图像）。

我没有对“上传”和“简单编辑器”属性进行分组，我该怎么做呢？

下一个问题，

我想遍历每个组（目前应该有 3 个）并将它们显示在我的网站上。

标记应如下所示：

```
<div>
 <img src="PATH-TO-UPLOAD-TYPE" />
 <div>"TEXT FROM SIMPLE EDTIOR TYPE"</div>
</div>
..
<div>
 <img src="PATH-TO-UPLOAD-TYPE" />
 <div>"TEXT FROM SIMPLE EDTIOR TYPE"</div>
</div>
... 
```

我想为此使用 Razor。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:34:32.247

对于第二部分，您可以通过`@Model.property`. 例如：

```
<div>
  <div>@Model.simpleProperty</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:18:28.373

对于第一部分，您不能使用 Razor 模型。您在前端获得的内容对象仅包含属性，不包括选项卡，因为它们仅用于在后台组织事物。

您可以使用 Umbraco API 获取该信息，但它是数据库密集型的，如果您有很多属性/选项卡，可能会非常慢。

你最好自己在 Razor 宏中将它们分组。

# drupal-7 - 如何允许匿名用户在 drupal 7 中提交网络表单？

> ID：12726035
> 
> 赞同：1
> 
> 时间：2012-10-04T11:13:39.860
> 
> 标签：drupal-7

我创建了网络表单，授予它“由匿名用户提交”的权限，但只有表单的标题和提交按钮可见，而网络表单的字段对匿名用户不可见。我正在使用drupal 7，如何解决这个问题？

Drupalgardens 支持已经为他们的客户解决了这个问题，很可能这是一个错误。链接：[http ://www.drupalgardens.com/content/anonymous-users-cant-complete-webforms](http://www.drupalgardens.com/content/anonymous-users-cant-complete-webforms)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T12:27:57.127

我没有意识到在创建字段的过程中，我使字段对其他用户不可见，从而使其在结果表单中不可见。

现在它工作得很好。

# php - 无法使用 PHP 向 phpMyAdmin 插入正确的手机号码

> ID：12726037
> 
> 赞同：0
> 
> 时间：2012-10-04T11:13:48.223
> 
> 标签：php

如果手机号码 1234567890，下面的代码工作正常。

如果手机号码是 2134567890 或其他不以 1 开头的号码，则下面的代码将插入此号码“2147483647”并且代码没有给出正确的输出。

使用 FORM 的 POST 方法我得到的值和 ACTION 是 $_SERVER['PHP_SELF']

使用 isset($_POST['submit'])，写在代码下面。

这是代码：

```
$sql=mysql_query("insert into registration (regname,regmobile) values ('$_POST[regname]','$_POST[regmobile]')");
$sql1=mysql_query("select * from registration where regmobile='$_POST[regmobile]'");
if(mysql_num_rows($sql1)>0)
{
    while($row=mysql_fetch_array($sql1))
    {
        $regname=$row['regname'];
        $regmobile=$row['regmobile'];
        $regid=$row['regid'];
        $reguserid=substr($regname,1,2).substr($regmobile,-4).substr($regid,-2);
        $sql2=mysql_query("update registration set reguserid='$reguserid' where regmobile='$regmobile'");

    }
} 
```

感谢和问候

斯韦莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:17:06.897

考虑不同的数据类型：

```
bigint
-2^63 (-9,223,372,036,854,775,808) to 2^63-1 (9,223,372,036,854,775,807)

int
-2^31 (-2,147,483,648) to 2^31-1 (2,147,483,647)

smallint
-2^15 (-32,768) to 2^15-1 (32,767)

tinyint
0 to 255 
```

或者如 blue112 所述，尝试使用 VARCHAR

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:15:33.993

那是因为你已经达到了 Mysql Int 的极限。

考虑使用 Varchar(10)，它会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:27:49.077

这是因为你已经达到了极限`int`

你应该使用`BIGINT`.

像这样的东西 ![大整数](../Images/8614d0fc2caba994668fcbdfc760fca7.png)

# jquery-ui-datepicker - 删除 jQuery UI Datepicker 中的 minDate/maxDate 限制

> ID：12726042
> 
> 赞同：8
> 
> 时间：2012-10-04T11:14:11.143
> 
> 标签：jquery-ui-datepicker, date-range, limits, maxdate, mindate

一个简单的问题，但我似乎找不到答案。

我在 jQuery Datepicker 中限制了日期范围：

```
$( "#MyDatepicker" ).datepicker( "option", "minDate", new Date()) 
```

有没有办法消除日期范围的所有限制？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-04T11:25:49.227

试试这个`$( "#MyDatepicker" ).datepicker( "option", "minDate", null)`。

来自关于 datepicker minDate 选项的 JQuery 文档

> 通过 Date 对象或当前 dateFormat 中的字符串设置最小可选日期，或从今天开始的天数（例如 +7）或一串值和句点（'y' 表示年份，'m' 表示月份， 'w' 表示几周，'d' 表示几天，例如 '-1y -1m'），或者 null 表示没有限制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T11:17:05.087

使用[这个](http://keith-wood.name/datepick.html)jQuery datepick，怎么样

```
$(selector).datepick(); 
```

# actionscript-3 - 在动作脚本 3 中检测到对象的最近线

> ID：12726056
> 
> 赞同：1
> 
> 时间：2012-10-04T11:15:20.190
> 
> 标签：actionscript-3, geometry

![在此处输入图像描述](../Images/f4d89d815db82522d00597ab99c26a35.png)我创建了一个形状。这将是一个房间。

这是代码：

```
 room = new Sprite();
        room.graphics.beginFill(0xFFFF00, 1);
        room.graphics.moveTo(0, 0);
        room.graphics.lineTo(0, 500);
        room.graphics.lineTo(500, 500);
        room.graphics.lineTo(500, 250);
        room.graphics.lineTo(300, 250);
        room.graphics.lineTo(300, 0);
        room.graphics.endFill();
        addChild(room); 
```

我在中间有一个红色矩形。我想知道哪个墙和两个点靠近这个矩形。例如：在此屏幕截图中，左墙是最近的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:29:53.483

这根本不是一个动作脚本问题。你只需要一个算法。

简单的解决方案：找到对象的中心，然后使用任何你能找到的线距离算法来检查这个中心点到所有房间边缘的距离。

例如：[点和线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

# javascript - 元素的绝对位置问题

> ID：12726059
> 
> 赞同：0
> 
> 时间：2012-10-04T11:15:38.123
> 
> 标签：javascript, jquery, css

我正在创建一个用户可以在其中使用的照片板`drag-drop photos, resize it, drag it and rotate it`。每当用户在板上拖放一个新图像时，`div`就会创建一个新元素，并将一个 img 标签附加到 div 元素。每个 div 都设置为向左浮动，因此每当创建新图像时，它都会自动放置在正确的位置。jquery-ui 插件（可调整大小和可拖动）应用于 div。

当用户调整任何图像的大小时会出现问题。jquery-ui 设置`position: absolute`和所有图像位置都会失真。之后，当我们添加新图像时，它将插入到前一个图像上。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:42:59.860

如果没有看到您的代码，很难确切地知道问题是什么。我确实对问题所在有所了解。使用拖动/调整大小时，`div`将始终为`position:absolute`. 原则上您需要做的是将`.mouseup()`事件绑定到任何选定/拖动/放置的 div，该 div 将`.addClass()`应用于`div`应用新位置以及其他样式或 jQuery dom 操作。这是我会采取的方法。这也允许自由地用一些漂亮的动画来增加图像的下降。

# sql - SQL 语句错误

> ID：12726067
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:06.010
> 
> 标签：sql, sql-server

```
with [BlockedQueries] as 
(
   select 
      der.session_id, der.blocking_session_id, der.start_time, 
      der.total_elapsed_time,
      SUBSTRING(text, (statement_start_offset/2)+1,
      ((CASE statement_end_offset
             WHEN -1 THEN DATALENGTH(text)
             ELSE statement_end_offset
         END - statement_start_offset)/2) + 1) AS sqltext
   from 
      sys.dm_exec_requests as der
   cross apply 
      sys.dm_exec_sql_text (der.sql_handle) as dest
   where 
      blocking_session_id <> 0

   union all

   select 
       c.session_id, c.blocking_session_id, c.start_time, c.total_elapsed_time, 
       dest.text 
   from
       [BlockedQueries] p, sys.dm_exec_requests as c
   cross apply 
       sys.dm_exec_sql_text (c.sql_handle) as dest
   where 
       p.[blocking_session_id] = c.[session_id]
) 
```

在 SQL Server 2008 上运行此程序时，我收到以下错误。

> *消息 102，级别 15，状态 1，第 31 行
> ')' 附近的语法不正确。*

我正在尝试 在 Blocked Queries Agent 下运行[此链接中的那个。](https://cotega.com/docs/faq)

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:18:47.583

在 with 子句之后需要一些东西（通常是`;`在它之前）

```
 ;with blockedqueries as
   (
       ....
   )
   Select * from blockedqueries 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:23:12.103

通过选择从`Common Table Expression(CTE)`

```
with [BlockedQueries] as (

select der.session_id, der.blocking_session_id, der.start_time, der.total_elapsed_time,

SUBSTRING(text, (statement_start_offset/2)+1,

((CASE statement_end_offset

WHEN -1 THEN DATALENGTH(text)

ELSE statement_end_offset

END - statement_start_offset)/2) + 1) AS sqltext

from sys.dm_exec_requests as der

cross apply sys.dm_exec_sql_text (der.sql_handle) as dest

where blocking_session_id <> 0

union all

select c.session_id, c.blocking_session_id, c.start_time, c.total_elapsed_time, dest.text from

[BlockedQueries] p, sys.dm_exec_requests as c

cross apply sys.dm_exec_sql_text (c.sql_handle) as dest

where p.[blocking_session_id] = c.[session_id]

)
SELECT * FROM [BlockedQueries]; 
```

# wso2 - 如何针对 wsdl 验证代理服务中的输入和输出消息

> ID：12726069
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:10.313
> 
> 标签：wso2, wso2esb

有没有办法针对特定的 wsdl 验证代理服务中的输入和输出消息？

有一种情况，当代理生成无效的输出消息时，所以我想在响应客户端之前在我的代理中捕获它。

我还想检查输入消息是否有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:52:24.430

您可以使用像 SoapUI 这样的工具来验证这样的场景。您可以使用特定的 wsdl 生成测试。您可以使用 tcpmon 之类的工具来验证在代理和特定端点之间传递的消息。

例如，使用一个 tcpmon 侦听代理的输出端口并将其重定向到实际端口。

您可以从 [1] 找到 soapui，如果您使用 wso2 ESB，则 tcpmon 在 /bin 目录中可用，您可以使用

```
sh wso2esb-4.5.0/bin/tcpmon.sh 
```

通过查看通过 tcpmon 传递的消息，您可以验证从代理发出的消息。

[1]。[http://sourceforge.net/projects/loadui/files/latest/download?source=files](http://sourceforge.net/projects/loadui/files/latest/download?source=files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-05T15:31:02.817

您可以使用验证中介验证 wso2 esb 代理的负载。

例子，

```
 <validate source="//xpath_of_element_to_validate">
    <schema key="local_entry_name_of_your_schema_file"/>
    <on-fail>
      *This part contains the code to handle validation failure*
    </on-fail>
  </validate> 
```

这个 Validate 调解器可以在代理中的任何地方使用。要验证请求，请将其用作第一行；要验证响应，请在响应调解器之前使用它

您可以参考以下链接了解更多详情，

[https://docs.wso2.com/display/ESB490/Validate+Mediator](https://docs.wso2.com/display/ESB490/Validate+Mediator)

希望这可以帮助！！谢谢！！

# iphone - IOS：地址簿 UI 框架

> ID：12726072
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:16:29.457
> 
> 标签：iphone, objective-c, cocoa-touch, abaddressbook, addressbookui

我想从通讯录中选择多个联系人，并且我想将所选人员的图像存储在一个可变数组中。我已经完全搜索了互联网，但我无法获得任何样品。任何人请帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:57:31.323

首先，您必须添加
“AddressBook.framework”框架并添加头文件：

# 进口。

```
// this method 
  #pragma mark- find all contacts email id
   -(void)getFilterEmailid{

NSUInteger i;
NSUInteger k;

ABAddressBookRef addressBook = ABAddressBookCreate();
NSArray *people = (NSArray *) ABAddressBookCopyArrayOfAllPeople(addressBook);

if ( people==nil )
{
    NSLog(@"NO ADDRESS BOOK ENTRIES TO SCAN");
    CFRelease(addressBook);
    return;
}

for ( i=0; i<[people count]; i++ )
{
    ABRecordRef person = (ABRecordRef)[people objectAtIndex:i];
    NSString *home=@"";
    NSString *work=@"";
    //
    // Phone Numbers
    //
    ABMutableMultiValueRef phoneNumbers = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex phoneNumberCount = ABMultiValueGetCount( phoneNumbers );

    // Here we can get the Image ref 

    CFDataRef imageData = ABPersonCopyImageData(person);
    // This is the Image Data you can use as you want to.
    NSData *data = (NSData *)imageData;

    for ( k=0; k<phoneNumberCount; k++ )
    {
        CFStringRef phoneNumberLabel = ABMultiValueCopyLabelAtIndex( phoneNumbers, k );
        CFStringRef phoneNumberValue = ABMultiValueCopyValueAtIndex( phoneNumbers, k );
        CFStringRef phoneNumberLocalizedLabel = ABAddressBookCopyLocalizedLabel( phoneNumberLabel );    // converts "_$!<Work>!$_" to "work" and "_$!<Mobile>!$_" to "mobile"

        // Find the ones you want here
        //
        NSLog(@"-----PHONE ENTRY -> %@ : %@", phoneNumberLocalizedLabel, phoneNumberValue );
        home=[(NSString*)phoneNumberLocalizedLabel copy ];
        work=[(NSString *)phoneNumberValue copy];
        NSLog(@"home=%@  work=%@",home,work);
        CFRelease(phoneNumberLocalizedLabel);
        CFRelease(phoneNumberLabel);
        CFRelease(phoneNumberValue);

        // This is my array i save only the Email id. You can save what value you want
        [emailIdArray addObject:work];
    }

}

[people release];
CFRelease(addressBook);

} 
```

# objective-c - 如何通过popoverview控制器显示imagepickercontroller？

> ID：12726073
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:43.093
> 
> 标签：objective-c, ios, ipad, uiimagepickercontroller

我使用以下代码从 iphone 的相册中获取照片，但显示错误“UIImagePickerController must be present via UIPopoverController”

```
- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType
{

    if ([UIImagePickerController isSourceTypeAvailable:sourceType])
    {
        [self setupImagePicker:sourceType];

        [self presentModalViewController:imagePickerController animated:YES];

    }
}

- (void)setupImagePicker:(UIImagePickerControllerSourceType)sourceType
{
    imagePickerController.sourceType = sourceType;

    if (sourceType == UIImagePickerControllerSourceTypeCamera)
    {
        // user wants to use the camera interface
        //
        imagePickerController.showsCameraControls = NO;

        if (imagePickerController.cameraOverlayView != self.view)
        {
            // setup our custom overlay view for the camera
            //
            // ensure that our custom view's frame fits within the parent frame
            CGRect overlayViewFrame = imagePickerController.cameraOverlayView.frame;
            CGRect newFrame = CGRectMake(0.0,
                                         CGRectGetHeight(overlayViewFrame) -
                                         self.view.frame.size.height - 9.0,
                                         CGRectGetWidth(overlayViewFrame),
                                         self.view.frame.size.height + 9.0);
            self.view.frame = newFrame;
            imagePickerController.cameraOverlayView = self.view;
        }
    }
}

-(IBAction)getPhoto:(id)sender {
        imagePickerController = [[UIImagePickerController alloc] init];
        [self showImagePicker:UIImagePickerControllerSourceTypePhotoLibrary];
} 
```

任何人都可以更改我的代码以在 iPad 上工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:28:47.837

-（IBAction）Click_event {

```
UIImagePickerController *imagePickerController_=[[UIImagePickerController alloc] init];
    UIPopoverController *popover_=[[UIPopoverController alloc] initWithContentViewController:imagePickerController_];
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
        imagePickerController_.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[popover_ presentPopoverFromRect:CGRectMake(400, 400, 0, 0) inView:self.Mybutton
                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

   }

 } 
```

# c# - 当我以编程方式创建按钮时，事件不会触发

> ID：12726074
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:49.130
> 
> 标签：c#, asp.net, c#-4.0

我正在使用事件处理程序动态创建一个按钮。但是该事件没有被触发。请帮助我做到这一点。我的部分代码在这里。

```
 Button btn = new Button();
 btn.ID = "btn" + i;
 btn.Text = "Add New";
 Panel1.Controls.Add(btn);
 btn.Click += new EventHandler(this.GreetingBtn_Click);
 Panel1.Controls.Add(new LiteralControl("<br /><br />"));

  void GreetingBtn_Click(Object sender, EventArgs e)
  {
     create();
  } 
```

单击按钮时，我想访问 create() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T20:54:32.843

```
List<string> myControls = new List<string>();

protected void Page_Load(object sender, EventArgs e)
{
     if(!IsPostBack)
     {
          myControls = new List<string>();
          ViewState["myControls"] = myControls;
     }
}

protected void override void LoadViewState(object savedState)
{
     base.LoadViewState(savedState);
     myControls = (List<string>)ViewState["myControls"];

     foreach(string controlID in myControls){
          //method to create your buttons goes here.
          createButtons(controlID);
     }
}

public void createButtons(string btnID){
     Button btn = new Button();
     btn.ID = btnID;
     btn.Text = "Add New";
     btn.Click += new RoutedEventHandler(this.GreetingBtn_Click);
     Panel1.Controls.Add(btn);
     Panel1.Controls.Add(new LiteralControl("<br /><br />"));
}

void GreetingBtn_Click(Object sender, RoutedEventArgs e){
     create();
} 
```

试试这个代码。在 asp.net 中动态添加控件时，您必须**在 postback 中重新创建控件**。最简单的方法是使用上面显示的**视图**状态。

未正确执行此操作的常见迹象是：**单击时控件消失**或事件**根本不触发**。希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:21:33.360

如果您在页面加载时添加此动态按钮，请确保其在

```
if (!IsPostBack)
{
//add button here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T15:03:01.023

总是让你的代码创建一次控制应该放在一边`!ispostback`，因为它们不需要一次又一次地创建

```
if (!IsPostBack)
{
   //Your code should be their enter code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:25:00.503

在不了解您的代码的情况下，我猜您没有在ASP.NET[页面生命周期的适当阶段创建控件](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

您需要的是 PreInit，如此处所述：

> 在启动阶段完成后和初始化阶段开始之前引发。将此事件用于以下情况：
> 
> 创建或重新创建动态控件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-04T11:25:58.370

将`btn.Click += new EventHandler(this.GreetingBtn_Click);`行向上移动一级，即在添加到父级之前并尝试路由事件。

```
Button btn = new Button();
 btn.ID = "btn" + i;
 btn.Text = "Add New";
btn.Click += new RoutedEventHandler(this.GreetingBtn_Click);
 Panel1.Controls.Add(btn);
 Panel1.Controls.Add(new LiteralControl("<br /><br />"));

  void GreetingBtn_Click(Object sender, RoutedEventArgs e)
  {
     create();
  } 
```

# android - 为什么 SQLite 在包含 _id 列时抱怨它没有找到

> ID：12726075
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:51.490
> 
> 标签：android, sqlite, listview, simplecursoradapter

我正在为我的课程开发一个 Android 应用程序（不幸的是）。我需要使用 SimpleCursorAdapter 来显示约会的自定义 ListView。SimpleCursorAdapter 的构造函数以一个游标为参数，这个游标需要选择所有需要在 listView 中显示的列。

我的问题是每次我运行应用程序时，它都会抱怨：'column '_id' does not exist' 但是有一个名为 id 的列！我哪里错了？

下面是相关代码：

```
public class AppointmentsDB {

    public static final String DATABASE_NAME = "appointment_db";
    public static final String DATABASE_TABLE = "appointment_table";
    private static final int DATABASE_VERSION = 1;

    public static final String KEY_ID = "_id";
    public static final String KEY_TITLE = "title";
    public static final String KEY_DESCRIPTION = "description";
    public static final String KEY_PRIORITY = "priority";
    public static final String KEY_DATE_TIME = "date_time";
    public static final String KEY_DURATION = "duration";
    public static final String KEY_ALARM_TIME = "alarm_time";

    private DatabaseHelper appointmentsDBHelper;
    private SQLiteDatabase appointmentsDB;
    private final Context context;

    public AppointmentsDB(Context context) {
        this.context = context;
        appointmentsDBHelper = new DatabaseHelper(context);
    }

    public SQLiteDatabase openReadableDatabase()
    {
        return appointmentsDBHelper.getReadableDatabase();
    }

    public SQLiteDatabase openWritableDatabase()
    {
        return appointmentsDBHelper.getWritableDatabase();
    }

    public long addAppointment(Appointment appointment)
    {
        //
    }

    public void close()
    {
        //
    }

    static class DatabaseHelper extends SQLiteOpenHelper {

        Context context;

        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

            this.context = context;

        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            StringBuilder query = new StringBuilder();
            query.append("CREATE TABLE "+DATABASE_TABLE+" ");
            query.append("(");
            query.append(KEY_ID+" INTEGER PRIMARY KEY AUTOINCREMENT, ");
            query.append(KEY_TITLE+" TEXT NOT NULL, ");
            query.append(KEY_DESCRIPTION+" TEXT, ");
            query.append(KEY_PRIORITY+" INTEGER, ");
            query.append(KEY_DATE_TIME+" INTEGER, ");
            query.append(KEY_DURATION+" INTEGER, ");
            query.append(KEY_ALARM_TIME+" INTEGER");
            query.append(");");

            ContentValues test = new ContentValues();

            db.execSQL(query.toString());
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS "+DATABASE_TABLE);
            onCreate(db);
        }

    }
} 
```

**MainActivity.java** 公共类 MainActivity 扩展 ListActivity {

```
private Cursor cursor;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AppointmentsDB dbHelper = new AppointmentsDB(this);

    // Execute query that selects all appointments.
    // Store cursor from that query in local variable 'cursor'.
    // Pass 'cursor' to SimpleCursorAdapter.
    // SimpleCursorAdapter uses 'cursor' to display all appointments in
    // listview.

    StringBuilder selectQuery = new StringBuilder();
    selectQuery.append("SELECT "+AppointmentsDB.KEY_ID+" ,");
    selectQuery.append(AppointmentsDB.KEY_TITLE + ", ");
    selectQuery.append(AppointmentsDB.KEY_DESCRIPTION + ", ");
    selectQuery.append(AppointmentsDB.KEY_PRIORITY + ", ");
    selectQuery.append(AppointmentsDB.KEY_DATE_TIME + ", ");
    selectQuery.append(AppointmentsDB.KEY_DURATION + ", ");
    selectQuery.append(AppointmentsDB.KEY_ALARM_TIME + " FROM "
            + AppointmentsDB.DATABASE_TABLE /*+ " "*/);
    selectQuery.append("ORDER BY " + AppointmentsDB.KEY_DATE_TIME
            + " ASC");

    cursor = dbHelper.openReadableDatabase().rawQuery(
            selectQuery.toString(), null);

    String[] columnNames = new String[]{""};
    int[] ids = new int[]{};

    AppointmentsCursorAdapter adapter = new AppointmentsCursorAdapter(this,R.layout.row,cursor,columnNames,ids);
    this.setListAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// This class sets our customised layout for the ListView

class AppointmentsCursorAdapter extends SimpleCursorAdapter
{

    private Context context;
    private int layout;
    private int[] colours;

    public AppointmentsCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to) 
    {
        super(context, layout, c, from, to);

        this.context = context;
        this.layout = layout;
        //...
    }

    public View newView(Context context, Cursor cursor, ViewGroup parent)
    {
        LayoutInflater inflater = LayoutInflater.from(context);
        View view = inflater.inflate(layout, parent, false);

        TextView titleText = (TextView) view.findViewById(R.id.titleText);
        TextView priorityView = (TextView) view.findViewById(R.id.priorityView);
        TextView dateText = (TextView) view.findViewById(R.id.dateText);
        TextView monthText = (TextView) view.findViewById(R.id.monthText);
        TextView timeText = (TextView) view.findViewById(R.id.timeText);

        //...

        return view;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor)
    {
        super.bindView(view, context, cursor);

        TextView titleText = (TextView) view.findViewById(R.id.titleText);
        TextView priorityView = (TextView) view.findViewById(R.id.priorityView);
        TextView dateText = (TextView) view.findViewById(R.id.dateText);
        TextView monthText = (TextView) view.findViewById(R.id.monthText);
        TextView timeText = (TextView) view.findViewById(R.id.timeText);

        //...

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:59:35.853

将该列重命名为 id 并将 select 语句更改为：“SELECT "+AppointmentsDB.KEY_ID+" AS _id ，”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:31:50.760

试试这个：

```
String[] columnNames = new String[]{AppointmentsDB.KEY_ID};
int[] ids = new int[]{R.id.the_id_of_the_edittext_textview_or_wahtever_you_use_in_row_layout}; 
```

此外，除非您想做一些花哨的事情，否则您可以像这样简单地使用 SimpleCursorAdapter：

```
ListAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, columnNames, ids, CursorAdapter.NO_SELECTION);
setListAdapter(adapter); 
```

我还建议使用 ListFragment 而不是 ListActivity，以便您可以在需要时在其他活动或情况（平板电脑......）中重用该列表。

# python - Python新手；拆分一个字符串

> ID：12726076
> 
> 赞同：1
> 
> 时间：2012-10-04T11:16:54.643
> 
> 标签：python

我正在尝试为一些开源软件编写补丁，因为它并不能*完全*满足我的要求——除了我根本不懂 Python！我希望这很简单，但它打败了我。

**背景：**我正在编写的补丁是针对我用来管理 KVM 虚拟机集群的 Ganeti，但它不支持 KVM 和 Qemu 的所有可能的命令行选项，例如 USB 直通，所以我正在尝试修改它以允许这样做。

`kvm_cmd.extend()`用于添加在启动 VM 时将传递的 KVM CLI 参数数组。如果参数是空格分隔的，每个参数都变成一个单独的字符串，例如`-usb -device usb-host,hostbus=1,hostdev=14`变成`"-usb", "-device", "usb-host,hostbus=1,hostdev=14"`.

编译代码后我正在运行以下命令：

```
gnt-instance modify -H usb_pass="1;14" 
```

我希望将其添加到现有的命令行参数列表中`"-usb -device usb-host,hostbus=1,hostdev=14"`。这是我添加的代码（以及在其他地方声明变量；`HV_USBPASSTHROUGH`是一个字符串，但这是魔法发生的地方）

```
usb_pass = instance.hvparams[constants.HV_USBPASSTHROUGH]
if usb_pass:
    usb_pass_arr = []
    usb_pass_arr = usb_pass.split(";")
    kvm_cmd.extend(["-usb", "-device", "usb-host,hostbus=%s,hostaddr=%s" %
                    usb_pass_arr]) 
```

使用上述代码运行上述命令时出现以下错误： `Could not start instance: Error while executing backend function: not enough arguments for format string`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:18:39.893

你有两个``%s`，`"usb-host,hostbus=%s,hostaddr=%s"`但只提供一个参数，一个列表，其中需要一个元组。

采用

`"usb-host,hostbus=%s,hostaddr=%s" % tuple(usb_pass_arr)`

[tuple()](http://docs.python.org/library/functions.html#tuple)内置将可迭代对象转换为元组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:22:56.970

改变

```
"usb-host,hostbus=%s,hostaddr=%s" % usb_pass_arr 
```

到

```
"usb-host,hostbus=%s,hostaddr=%s" % tuple(usb_pass_arr) 
```

`usb_pass_arr`也不需要预初始化，因为`split()`返回一个新列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T11:49:40.173

您已经得到了[“旧”样式格式](http://docs.python.org/library/stdtypes.html#string-formatting)的答案；使用[新样式格式](http://docs.python.org/library/string.html#formatstrings)，`.format()`您可以使用[可变长度参数语法](http://docs.python.org/reference/expressions.html#calls)执行以下操作，以自动解压缩`usb_pass`到函数参数中`format()`：

```
'usb-host,hostbus={},hostaddr={}'.format(*usb_pass) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T11:25:15.813

您需要做的就是`usb_pass_arr`作为元组传递，这是[字符串格式化](http://docs.python.org/library/stdtypes.html#string-formatting)所期望的。

```
usb_pass = instance.hvparams[constants.HV_USBPASSTHROUGH]
if usb_pass:
    usb_pass_arr = [] #you can remove this line
    usb_pass_arr = tuple(usb_pass.split(";")) #a tuple is an immutable list
    kvm_cmd.extend(["-usb", "-device", "usb-host,hostbus=%s,hostaddr=%s" %
                    usb_pass_arr]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T11:27:11.070

正如人们已经写过的那样，您需要使用 . 将列表转换为元组`tuple(usb_pass_arr)`。请参阅python 文档中的[此](http://docs.python.org/library/stdtypes.html#string-formatting-operations)段落：

> 如果格式需要单个参数，则值可以是单个非元组对象。否则，值必须是具有格式字符串指定的项目数的元组，或者是单个映射对象（例如，字典）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T11:24:08.030

粗略的猜测——你需要改用这个：

```
"usb-host,hostbus=%s,hostaddr=%s" % (usb_pass_arr[0], usb_pass_arr[1]) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-04T12:48:37.797

嗨，David Morton 和其他任何感兴趣的人，这是针对每个实例单个 USB 设备的 Ganeti 2.6.0 USB 直通；

```
 diff -r -c ganeti-2.6.0_original/lib/constants.py ganeti-2.6.0_changed/lib/constants.py
*** ganeti-2.6.0_original/lib/constants.py  2012-07-27 12:31:48.000000000 +0100
--- ganeti-2.6.0_changed/lib/constants.py   2012-10-04 13:46:15.881572099 +0100
***************
*** 770,775 ****
--- 770,776 ----
  HV_KVM_USE_CHROOT = "use_chroot"
  HV_CPU_MASK = "cpu_mask"
  HV_MEM_PATH = "mem_path"
+ HV_USBPASSTHROUGH = "usb_pass"
  HV_BLOCKDEV_PREFIX = "blockdev_prefix"
  HV_REBOOT_BEHAVIOR = "reboot_behavior"

***************
*** 824,829 ****
--- 825,831 ----
    HV_KVM_USE_CHROOT: VTYPE_BOOL,
    HV_CPU_MASK: VTYPE_STRING,
    HV_MEM_PATH: VTYPE_STRING,
+   HV_USBPASSTHROUGH: VTYPE_STRING,
    HV_BLOCKDEV_PREFIX: VTYPE_STRING,
    HV_REBOOT_BEHAVIOR: VTYPE_STRING,
    }
***************
*** 1809,1814 ****
--- 1811,1817 ----
      HV_MEM_PATH: "",
      HV_REBOOT_BEHAVIOR: INSTANCE_REBOOT_ALLOWED,
      HV_CPU_MASK: CPU_PINNING_ALL,
+     HV_USBPASSTHROUGH: "",
      },
    HT_FAKE: {
      },
Only in ganeti-2.6.0_changed/lib/: .dir
Only in ganeti-2.6.0_changed/lib/: _generated_rpc.py
Only in ganeti-2.6.0_changed/lib/http: .dir
Only in ganeti-2.6.0_changed/lib/hypervisor: .dir
diff -r -c ganeti-2.6.0_original/lib/hypervisor/hv_kvm.py ganeti-2.6.0_changed/lib/hypervisor/hv_kvm.py
*** ganeti-2.6.0_original/lib/hypervisor/hv_kvm.py  2012-07-27 13:27:41.000000000 +0100
--- ganeti-2.6.0_changed/lib/hypervisor/hv_kvm.py   2012-10-04 13:46:54.993572107 +0100
***************
*** 490,495 ****
--- 490,496 ----
      constants.HV_VHOST_NET: hv_base.NO_CHECK,
      constants.HV_KVM_USE_CHROOT: hv_base.NO_CHECK,
      constants.HV_MEM_PATH: hv_base.OPT_DIR_CHECK,
+     constants.HV_USBPASSTHROUGH:  hv_base.NO_CHECK,
      constants.HV_REBOOT_BEHAVIOR:
        hv_base.ParamInSet(True, constants.REBOOT_BEHAVIORS),
      constants.HV_CPU_MASK: hv_base.OPT_MULTI_CPU_MASK_CHECK,
***************
*** 1257,1262 ****
--- 1258,1268 ----
      kvm_nics = instance.nics
      hvparams = hvp

+     usb_pass = instance.hvparams[constants.HV_USBPASSTHROUGH]
+     if usb_pass:
+         usb_pass_arr = usb_pass.split(";")
+         kvm_cmd.extend(["-usb", "-device", "usb-host,hostbus=%s,hostaddr=%s" % tuple(usb_pass_arr)])
+ 
      return (kvm_cmd, kvm_nics, hvparams)

    def _WriteKVMRuntime(self, instance_name, data):
Only in ganeti-2.6.0_changed/lib/impexpd: .dir
Only in ganeti-2.6.0_changed/lib/masterd: .dir
diff -r -c ganeti-2.6.0_original/lib/query.py ganeti-2.6.0_changed/lib/query.py
*** ganeti-2.6.0_original/lib/query.py  2012-07-27 12:31:48.000000000 +0100
--- ganeti-2.6.0_changed/lib/query.py   2012-10-04 13:46:26.625572103 +0100
***************
*** 1745,1750 ****
--- 1745,1751 ----
      constants.HV_NIC_TYPE: "NIC_type",
      constants.HV_PAE: "PAE",
      constants.HV_VNC_BIND_ADDRESS: "VNC_bind_address",
+     constants.HV_USBPASSTHROUGH: "usb_pass",
      }

    fields = [
Only in ganeti-2.6.0_changed/lib/rapi: .dir
Only in ganeti-2.6.0_changed/lib/server: .dir
Only in ganeti-2.6.0_changed/lib/tools: .dir
Only in ganeti-2.6.0_changed/lib/utils: .dir
Only in ganeti-2.6.0_changed/lib/: _vcsversion.py
Only in ganeti-2.6.0_changed/lib/watcher: .dir 
```

# c# - 文件路径作为从控制器到视图的参数

> ID：12726077
> 
> 赞同：0
> 
> 时间：2012-10-04T11:16:54.840
> 
> 标签：c#, jquery, asp.net-mvc, view, controller

我有一个问题，我需要从我的控制器传递一个文件路径以从网格中查看。通常这没问题，我只是这样做：

```
new GridColumnSettings { Member = "Name", Width = "100px", Title = "Title",
  ClientTemplate = "<a onclick='Function(\"<#=Parameter#>\")'><#=Name#></a>" }, 
```

但是现在我需要传递从数据库中获取的文件路径。路径当然是这样的：`\\folder\file.txt`

问题是在 Jquery/javascript 中，单个反斜杠不起作用。因此，当我现在检查参数的值时，它会说`\\folderfile.txt`

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:37:59.400

`\\`通过使用而不是转义斜线`\`

[查看json 规范](http://www.json.org/)的右侧栏

您可能会查看[json.net](http://james.newtonking.com/projects/json-net.aspx)的所有序列化信息。

# java - Java 2D 数组列

> ID：12726082
> 
> 赞同：1
> 
> 时间：2012-10-04T11:17:09.970
> 
> 标签：java, arrays

您好，这只是一个简单的二维数组问题，我想在 2 列中显示我的 2 个数组元素，如下所示：

国家 城市
菲尔斯 马尼拉
SK 首尔
日本 东京
以色列 耶路撒冷

这是我尝试过的代码：

```
public class ArrayExercise {
    public static void main(String[] args){

        String[][] myArray = {
            {"Philippines", "South Korea", "Japan", "Israel"}, // Countries
            {"Manila", "Seoul", "Tokyo", "Jerusalem" } // capital cities
        };

        System.out.print( "Countries\tCities\n" );

        for( int row = 0; row < myArray.length; ++row ){
            System.out.print( "" );
            for( int col = 0; col < myArray[row].length; ++col ){

                System.out.print( "" + myArray[row][col] + "\t" );

            }
        }
        System.out.println( "" );
    }

} 
```

但我无法让它显示在 2 列中。任何帮助肯定会受到赞赏。多谢你们 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:19:41.070

循环后您不会添加换行符`myArray[row]`。您需要在循环之后添加它以打印新行：

```
System.out.println(); 
```

一般来说，如果你想要一个换行符，不要调用`System.out.print("\n")`，而是调用`System.out.println()`。 `System.out.println()`使用系统行尾，不一定是换行符 ( `\n`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:20:06.037

**更新**：-**这是在 2 列中打印它们的方法：** -

```
 String[][] myArray = {
            {"Philippines", "South Korea", "Japan", "Israel"}, // Countries
            {"Manila", "Seoul", "Tokyo", "Jerusalem" } // capital cities
    };

    int j = 0;

    while (j < myArray[0].length) {
        System.out.printf("%-15s - %-15s", myArray[0][j], myArray[1][j++]);
        System.out.println();
    } 
```

由于您想为每列并行打印两行的值。
您可以遍历列，并为相应列打印两行的值。

**注意**：-我使用了值`15`进行格式化。一般来说，当字符串（国家或城市）的长度大于该长度时，这可能会给您错误的结果。

**对于更多改进**，您可以从两行替换`15`为最长`country string`和最长的长度。`city string`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:34:05.410

如何先迭代 col 然后 row ..

```
for( int col = 0; col < myArray[0].length; ++col ){
            for( int row = 0; row < myArray.length; ++row ){
                System.out.print(myArray[row][col]);
                System.out.print("\t");
            }
            System.out.println();
        } 
```

**解释：**

你的二维数组是这样的

*   菲律宾[0,0] 韩国[0,1] 日本[0,2] 以色列[0,3]

*   马尼拉[1,0] 首尔[1,1] 东京[1,2] 耶路撒冷[1,3]

但是你想要的是这里[row, col] 是以前的索引。

*   菲律宾[0,0] 马尼拉[1,0]
*   韩国[0,1] 首尔[1,1]
*   日本[0,2] 东京[1,2]
*   以色列[0,3] 耶路撒冷[1,3]

所以用列迭代外循环。在内部循环中，使用 row 迭代并使用 "\t" 分隔。在内循环之后，我打印一个新行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T11:43:52.787

如果您确定您正在处理两个等长的列表，请执行以下操作：

```
public class ArrayExercise {
    public static void main(String[] args){
        String[][] data = {
            {"Philippines", "South Korea", "Japan", "Israel"}, // Countries                                                                                                                                                 
            {"Manila", "Seoul", "Tokyo", "Jerusalem" } // capital cities                                                                                                                                                    
        };

        System.out.print("Countries\tCities\n");
        int colLength = data[0].length;
        for (int i = 0; i < colLength; ++i) {
            System.out.printf("%s\t%s\n", data[0][i], data[1][i]);
        }
    }
} 
```

这将给出（选项卡式）输出：
国家 城市
菲律宾 马尼拉
韩国 首尔
日本 东京
以色列 耶路撒冷

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T11:28:46.140

首先，您需要找出第一列（国家）的最长元素的长度，例如最大长度为 5，并且您希望在每一行都有一个前导空格。而且您还需要找到第二列的最大长度，例如这里是 8。完成此操作后，您可以使用 a 打印元素`String.format`：

```
outputString = String.format("%1$6s %2$8s\n",country, city);
System.out.println(outputString); 
```

格式化程序将第一个参数的宽度设置为`X`，因此您将获得正确的缩进。这将适用于任何长度的字符串。

# tsql - 不能使用 LIKE 但需要在 SQL Server 中查找相关记录

> ID：12726090
> 
> 赞同：1
> 
> 时间：2012-10-04T11:17:42.910
> 
> 标签：tsql, sql-server-2005

我有一个用于问题跟踪的表（有点像 stackoverflow :) 以记录 PC 相关问题），为简单起见，我将其缩小到几个字段，如下所示：

```
Site               Category          Issue
MI Office          Software          My MS word does not run macros.
CL Office          Hardware          PC memory needs to be upgraded
MX Office          Printer           Printer is out of memory.
MI Office          Software          Office product prompts for allowing macro to run 
```

例如，当我查看一个问题时，我想找到相关问题。`LIKE`例如，如果我这样做，我就不能真正使用运算符：

`SELECT...FROM...WHERE Issue LIKE '%My MS word does not run macros.%'`

只会返回第一条记录。我是否必须弄清楚如何提取“宏”之类的关键词？我将如何找到相关记录，以便我的查询可以返回记录 1 和 4。或者一起返回 2 和 3？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:41:55.057

那么这里有3种方法来解决它..

**1\. 最佳情况：** 我们让用户为每个问题添加“标签”。这样，用户可以使用标签搜索问题并找到相关问题。（就像[http://stackoverflow.com](http://stackoverflow.com) ;) ）

这可以通过创建两个新表来实现：

*   tag_metadata (tag#, name, description, ...)
*   tag_issue_relationship(tag#, issue#)

> 我们可以更进一步，为每个问题条目添加权重，这将确定其在类似问题搜索/查找排名中的位置。

**2\. 平均案例：** 我们对子类别有更多级别，以帮助进一步分类问题。现在考虑变更控制，您的系统是否支持随着时间的推移轻松添加/删除/重新排列类别层次结构......？

**3\. 最坏** 的情况：假设用户非常懒惰，不想花几秒钟标记他们的问题 :).. 然后你必须实现一个索引算法，为问题描述挑选关键字（名词）并建立索引以方便查找“类似”问题。现在很多时候我们可能在描述中包含可能不重要并且会导致误报的关键字。

* * *

**[更新]**

基本上，您正在寻找的解决方案可以分为以下模块：

1.  解析器：将从问题描述中提取重要的关键字。关键字的自定义字典列表将用作查找表。
2.  索引器：将对这些关键字进行索引以使其可搜索。这涉及维护正向和[反向索引](http://en.wikipedia.org/wiki/Index_%28search_engine%29#Inverted_indices)！
3.  搜索：将使用索引来定位“类似”问题。

可能有一个现有的商业/开源产品可以做到这一点。

# javascript - 选项卡和子选项卡

> ID：12726095
> 
> 赞同：1
> 
> 时间：2012-10-04T11:18:10.617
> 
> 标签：javascript, jquery, html, css

我设计了一个包含 ParentTabs 和 ChildTabs 的页面，现在在 ParentTabs 上显示 childTabs 和其他内容。如何执行该操作按钮（继续）以转到下一个子选项卡以显示其他内容选项卡。

```
<div id="content">
        <div class="tineUl">
            <ul class="mainUl">
                <li class="selected"><a><span>TabOne</span></a></li>
                <li><a><span>TabTwo</span></a></li>
                <li><a><span>ThirdTab</span></a></li>
                <li><a><span>FourthTab </span></a></li>
            </ul>
        </div>
        <div id="subContent">
            <div class="tineUl">
                <ul class="subMainUl">
                    <li class="selected"><a><span>TabOne</span></a></li>
                    <li><a><span>TabTwo</span></a></li>
                    <li><a><span>ThirdTab</span></a></li>
                    <li><a><span>FourthTab </span></a></li>
                </ul>
            </div>
            <div id="subContentChild">
                <p>
                   SubContent Menu Zone.
                </p>
         <input type="submit" class="button" value="Cancel"></input>
         <input type="submit" class="button" value="Continue"></input>
            </div>
        </div>
    </div> 
```

**小提琴：http: [//jsfiddle.net/Ksb2W/138/](http://jsfiddle.net/Ksb2W/138/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:19:27.623

[http://os.alfajango.com/easytabs/#twitter-contact](http://os.alfajango.com/easytabs/#twitter-contact)选择你的标签。

# c# - for循环格式化mvc3

> ID：12726096
> 
> 赞同：0
> 
> 时间：2012-10-04T11:18:10.860
> 
> 标签：c#, for-loop

> **可能重复：**
> [.NET String.Format() 为数字添加千位逗号](https://stackoverflow.com/questions/105770/net-string-format-to-add-commas-in-thousands-place-for-a-number)

我有一个`int`传递给视图的，它需要格式化，所以它不是一大块数字。例如

```
0
00
000
000,0
000,000
000,000,000 
```

我如何使用 for 循环来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:35:56.563

您可能希望将整数输出为`i.ToString("###,###,###");`

但是，如果 int 为 0，则不会显示值。

您可以尝试使用 System.Drawing.Color 来表示颜色值而不是 int。这有一个方法 ToArgb()

# sql - 使用 exec 时增加计数器

> ID：12726098
> 
> 赞同：0
> 
> 时间：2012-10-04T11:18:37.860
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想以如下方式使用计数器：

```
exec
('begin insert into ' + @temp07 + ' (FileID,FileName)
Select aof_id,aof_fileName from PaFi07(' + @partId + ');

sp_executesql @sqlCounter, N'@intCount int output, @intConst int,  @intCount = @intCount output,  @intConst = @intConst 
end') 
```

那么我怎样才能让柜台工作呢？

任何关于计数器在此 EXEC 命令中工作的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:26:22.080

您不能将`EXEC`它们作为`EXEC`在其自己的范围内运行，因此变量标识符没有意义。

您可以改为将它们声明为`int`s，将它们`sp_executesql`与语句字符串一起传递并返回结果作为输出；

```
declare @sql nvarchar(256) = 'SET @intCount = @intCount + @intConst'
EXEC sp_executesql @sql, 
    N'@intCount int output, @intConst int', 
    @intCount = @intCount output, 
    @intConst = @intConst

select @intCount 

>6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:24:17.197

你不需要这样做`exec`：

```
set @inCount = @intCount + @intConst 
```

如果要使用`exec`，您将使用字符串中的变量名称，而不是值：

```
exec('set @inCount = @intCount + @intConst') 
```

### 编辑：

对于新问题；您可以将这些值连接到字符串中：

```
exec
('begin insert into ' + @temp07 + ' (FileID,FileName)
Select aof_id,aof_fileName from PaFi07(' + @partId + ');

sp_executesql @sqlCounter, N'@intCount int output, @intConst int,  @intCount = ' + @intCount + ' output,  @intConst = ' + @intConst + ' end') 
```

如果它们是数值，则需要转换它们：

```
... + cast(@intCount as varchar) + ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:34:19.470

您的代码段中有几个错误：首先，您将变量声明为 varchar(10)，而您打算将它们用作数字。它们应该被声明为 smallint、int 或 bigint。

然后，您将使用这些 varchar 变量组成一个字符串，并尝试将 1 添加到存储在 @inCount 中的值并加上数字 1。

由于您的变量是字符串而不是数字，因此 + 符号会尝试连接它们。

要了解您的错误，首先，您应该将数字 1 转换为字符串，这样编写 EXEC：

```
exec ('SET ' + @intCount + ' = ' + @intCount + '1') 
```

完成此操作后，只需删除 EXEC 并将要连接的字符串分配给新的字符串变量。所以：

```
DECLARE @composedQuery varchar(1000)

SET @composedQuery = 'SET ' + @intCount + ' = ' + @intCount + '1'
SELECT @composedQuery 
```

你会看到这样的结果：

```
SET 5 = 51 
```

当然，这不是您打算用 EXEC 执行的，不是吗？:)

其他答案中已为您提供了正确的解决方案。我重写了完整的片段：

```
declare @intCount int
declare @intConst int

set @intCount = 5
set @intConst = 1

SET @intCount = @intCount + 1
--OR
SET @intCount = @intCount + @intConst 
```

# browser-cache - NancyFX 是否支持通过 ETag 和 Last-Modified 标头进行静态内容缓存？

> ID：12726113
> 
> 赞同：10
> 
> 时间：2012-10-04T11:19:40.150
> 
> 标签：browser-cache, nancy, static-content

我希望我的静态内容（图像、javascript 文件、css 文件等）仅在文件更新后才能完整提供。

如果文件自上次请求以来没有更改（由`ETag`和`Last-Modified`响应标头值确定），那么我希望客户端浏览器使用文件的缓存版本。

Nancy 是否支持此功能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T10:41:54.733

Nancy 确实部分支持`ETag`和`Last-Modified`标头。它为所有静态文件设置它们，但从**0.13**版开始，它对这些值没有任何作用。这是南希代码：

**[Nancy.Responses.GenericFileResponse.cs](https://github.com/NancyFx/Nancy/blob/master/src/Nancy/Responses/GenericFileResponse.cs)**

```
if (IsSafeFilePath(rootPath, fullPath))
{
    Filename = Path.GetFileName(fullPath);

    var fi = new FileInfo(fullPath);
    // TODO - set a standard caching time and/or public?
    Headers["ETag"] = fi.LastWriteTimeUtc.Ticks.ToString("x");
    Headers["Last-Modified"] = fi.LastWriteTimeUtc.ToString("R");
    Contents = GetFileContent(fullPath);
    ContentType = contentType;
    StatusCode = HttpStatusCode.OK;
    return;
} 
```

要*使用*和标头值`ETag`，`Last-Modified`您需要添加几个修改后的扩展方法。我直接从 GitHub 中的 Nancy 源代码中借用了这些（因为此功能计划在未来发布），但最初的想法来自 Simon Cropp - NancyFX 的[条件响应](http://simoncropp.com/conditionalresponseswithnancyfx)

**扩展方法**

```
public static void CheckForIfNonMatch(this NancyContext context)
{
    var request = context.Request;
    var response = context.Response;

    string responseETag;
    if (!response.Headers.TryGetValue("ETag", out responseETag)) return;
    if (request.Headers.IfNoneMatch.Contains(responseETag))
    {
        context.Response = HttpStatusCode.NotModified;
    }
}

public static void CheckForIfModifiedSince(this NancyContext context)
{
    var request = context.Request;
    var response = context.Response;

    string responseLastModified;
    if (!response.Headers.TryGetValue("Last-Modified", out responseLastModified)) return;
    DateTime lastModified;

    if (!request.Headers.IfModifiedSince.HasValue || !DateTime.TryParseExact(responseLastModified, "R", CultureInfo.InvariantCulture, DateTimeStyles.None, out lastModified)) return;
    if (lastModified <= request.Headers.IfModifiedSince.Value)
    {
        context.Response = HttpStatusCode.NotModified;
    }
} 
```

最后，您需要使用`AfterRequest`Nancy BootStrapper 中的钩子调用这些方法。

**引导程序**

```
public class MyBootstrapper :DefaultNancyBootstrapper
{
    protected override void ApplicationStartup(TinyIoCContainer container, IPipelines pipelines)
    {
        pipelines.AfterRequest += ctx =>
        {
            ctx.CheckForIfNoneMatch();
            ctx.CheckForIfModifiedSince();
        };
        base.ApplicationStartup(container, pipelines);
    }
    //more stuff
} 
```

[使用Fiddler](http://www.fiddler2.com/fiddler2/)观看响应，您将看到静态文件的第一次点击会使用`200 - OK`状态代码下载它们。

此后每个请求都返回一个`304 - Not Modified`状态码。文件更新后，再次请求它会使用`200 - OK`状态代码下载它......等等。

# c++ - OpenCV：我是否超出了矩阵大小？

> ID：12726125
> 
> 赞同：1
> 
> 时间：2012-10-04T11:20:07.283
> 
> 标签：c++, opencv, for-loop, matrix, size

我有以下代码：

```
cv::Mat data ( HEIGHT,WIDTH, CV_32SC1 );
cv::Mat means = cv::Mat::zeros (HEIGHT, WIDTH, CV_64FC1 );
int *dPtr = new int [HEIGHT*WIDTH];
dPtr =  data.ptr<int>();
double *mPtr = new double [HEIGHT*WIDTH];
mPtr =  means.ptr < double>();

for ( int i = 0; i < N; i ++)
{
    for ( int j = 0; j < M; j ++ ) 
    {
         mPtr[ WIDTH * (i-1) + j ] += dPtr[ WIDTH * (i-1) + j ];
    }
} 
```

但是程序在 for 循环中崩溃了，我怀疑我是否超出了矩阵大小。但我无法弄清楚。有人可以帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:22:35.303

由于您的索引 i,j 以 0 开头，因此您应该在数组表达式 (i-1) 中省略 -1。

# ios - ios创建模态自定义segue

> ID：12726133
> 
> 赞同：1
> 
> 时间：2012-10-04T11:20:45.417
> 
> 标签：ios, segue

嗨，我正在尝试创建一个自定义模式 segue，将 src 视图控制器向右滑动，从而显示其后面的目标视图控制器。关于我如何实现它的任何想法

到目前为止，我已经尝试过了，但它不起作用。

```
#import "CustomMenuSegue.h"

@implementation CustomMenuSegue

- (void) perform {

    UIViewController *src = (UIViewController *) self.sourceViewController;
    UIViewController *dst = (UIViewController *) self.destinationViewController;

    [UIView transitionWithView:src.navigationController.view duration:0.2 options:UIUserInterfaceLayoutDirectionRightToLeft
                    animations:^{
                        [src.navigationController modalTransitionStyle:dst animated:YES];
                    }
                    completion:NULL];

}

@end 
```

# zend-framework2 - Zend Framework 2：无法附加到“调度”事件

> ID：12726134
> 
> 赞同：2
> 
> 时间：2012-10-04T11:20:45.647
> 
> 标签：zend-framework2

我目前正在学习/试验 ZF2 的稳定版本。最近几天一直在尝试找到解决我的问题的方法，即：我希望能够为一组控制器编写一些通用的设置逻辑。在采埃孚！然后，我将编写一个通用控制器并从中派生，使用 init() 方法作为我的设置逻辑。经过一番搜索，我发现 init() 方法已在 ZF2 中删除，并且有其他方法可以获得相同的功能。

我试图遵循 MW O'Phinney 的指南：http: [//mwop.net/blog/2012-07-30-the-new-init.html](http://mwop.net/blog/2012-07-30-the-new-init.html)

在我的情况下，我必须能够检索和检查我的设置逻辑的路由参数，因此覆盖替代方法的方法不起作用，因为此时无法访问 MvcEvent。所以，我尝试了 Update: serviceManager 解决方案，这就是我卡住的地方。首先，我只是尝试将指南中的代码复制到我的 Module 类中并回显一些文本以查看是否调用了回调。它不是。

在网上进行了更多搜索后，我找到了一个可能的解决方案；在通用控制器的构造函数中附加回调。同样的问题似乎也在这里。构造函数当然会被调用，但回调要么未附加或未正确触发（或根本没有）。

我将附上来自两种不同解决方案的一些代码：

在 Module.php 中：

```
public function getControllerConfig() {
    return array(
        'factories' => array(
            'Game\Controller\Mapsquare' => function($controllers) {
                $serviceManager = $controllers->getServiceLocator();
                $eventManager = $serviceManager->get('EventManager');
                $controller = new Controller\MapsquareController();

                echo "this text is echoed";

                $eventManager->attach('dispatch', function ($e) use ($controller) {
                    echo "this text is NOT echoed";
                    $request = $e->getRequest();
                    $method  = $request->getMethod();
                    if (!in_array($method, array('PUT', 'DELETE', 'PATCH'))) {
                        // nothing to do
                        return;
                    }

                    if ($controller->params()->fromRoute('id', false)) {
                        // nothing to do
                        return;
                    }

                    // Missing identifier! Redirect.
                    return $controller->redirect()->toRoute(/* ... */);
                }, 100); // execute before executing action logic

                $controller->setEventManager($eventManager);

                return $controller;
            }
        )
    );
} 
```

在 MapsquareController.php（通用控制器）中：

```
public function __construct() {
    $this->getEventManager()->attach('dispatch', array($this, 'preDispatch'), 1000);
    echo "construct";
}

public function preDispatch() {
    echo "This is preDispatch()!";
} 
```

有没有人可以帮助我解决这个问题，最终告诉我在这里误解了什么？任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:45:33.990

Evan Coury 关于 Zend Framework 2 中特定于模块的布局的帖子似乎提供了一个解决方案，它对我有用。

[http://web.archive.org/web/20140623024023/http://blog.evan.pro/module-specific-layouts-in-zend-framework-2](http://web.archive.org/web/20140623024023/http://blog.evan.pro/module-specific-layouts-in-zend-framework-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:48:09.940

您不能从工厂附加到调度，因为在处理调度后很长时间调用工厂。

为了让它工作，打开你的 Module.php 并编辑 onBootstrap()，这样你就可以附加到那里。例如：

```
public function onBootstrap($e)
{
    ...
    $eventManager = $e->getApplication()->getEventManager();
    $eventManager->attach("dispatch", function($e) {
        echo "Dispatch!";
    });
} 
```

或者，您也可以从特定控制器执行此操作。不在构造函数中，而是通过覆盖 setEventManager：

```
public function setEventManager(EventManagerInterface $events) {
    parent::setEventManager($events);
    $controller = $this;
    $events->attach("dispatch", function($e) use ($controller) {
        echo "Dispatch!";
    });
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T21:48:20.523

请注意，接受的**不正确**。OP发布的代码根本不起作用。永远不要用横切关注点污染你的 onBootstrap。原因如下：

```
public function __construct() {
    $this->getEventManager()->attach('dispatch', array($this, 'preDispatch'), 1000);
    echo "construct";
} 
```

没有工作是因为事件管理器在构造后被附加，并在调度时触发。

关于“工厂在发货后很长一段时间内被调用”的评论也没有意义。你知道工厂是做什么的吗？

“O'phinney 先生”的建议是正确的方法，下次您可能会更好地阅读手册，然后再决定让像 Matthew 这样的人让您失望。

解决方案在这里： http: [//mwop.net/blog/2012-07-30-the-new-init.html](http://mwop.net/blog/2012-07-30-the-new-init.html)

# php - symfony 登录事件

> ID：12726136
> 
> 赞同：2
> 
> 时间：2012-10-04T11:20:57.510
> 
> 标签：php, symfony, login

我尝试为用户进入系统记录时创建一个事件，

我有这个代码：

```
services:
    login_listener:
        class: mio\mioBundle\LoginListener
        tags:
            - { name: kernel.event_listener, event: security.interactive_login, method: onSecurityInteractiveLogin } 
```

```
<?php

namespace mio\mioBundle;
use Symfony\Component\Security\Http\Event\InteractiveLoginEvent;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\EventDispatcher\Event;

class LoginListener
{

    public function onSecurityInteractiveLogin(InteractiveLoginEvent $event)
    {

    }
}
?> 
```

但是在探查器中没有所谓的监听器是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:40:36.030

创建一个服务实现[`AuthenticationSuccessHandlerInterface`](http://api.symfony.com/master/Symfony/Component/Security/Http/Authentication/AuthenticationSuccessHandlerInterface.html)并将其设置为防火墙中的成功处理程序——`success_handler`在[安全配置参考](http://symfony.com/doc/master/reference/configuration/security.html)页面上搜索。您可以在该`onAuthenticationSuccess()`方法中实现您需要的任何逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T14:36:46.000

您的代码是正确的方法。探查器显示未调用事件可能是登录后重定向的原因。探查器向您显示最新请求 - 重定向后的请求。如果您检查最后一个 POST 请求（到 login_check）的分析器信息，您会发现该事件实际上已被调用。

工作示例：[http ://www.metod.si/login-event-listener-in-symfony2/](http://www.metod.si/login-event-listener-in-symfony2/)

# visual-studio-2008 - 一个解决方案多项目调试文件夹

> ID：12726141
> 
> 赞同：1
> 
> 时间：2012-10-04T11:21:12.230
> 
> 标签：visual-studio-2008, mfc

我最近了解了一个解决方案与多个项目的好处。假设我有 3 个项目 A、B 和 C，它们都创建了一个 .exe 应用程序文件。我首先创建了一个空白解决方案，添加了所有三个现有项目并构建了解决方案。现在，在解决方案文件夹下创建了一个调试文件夹。此调试文件夹包含通过构建三个项目创建的所有文件。这三个项目已经每个都有一个调试文件夹。我不想要解决方案文件夹下的调试文件夹。谁能向我解释如何做到这一点？可能吗？谢谢！我用VS2008

# if-statement - 在批处理脚本中将 `grep "string"|wc -l` 赋值给变量

> ID：12726143
> 
> 赞同：0
> 
> 时间：2012-10-04T11:21:17.823
> 
> 标签：if-statement, grep, batch-file, wc

我正在尝试开发以下unix脚本的批处理等效（Windows）代码：-

```
i=`grep "ora-error" *.txt|wc -l`
if [ i -gt 0 ]; then
echo "true"
else
echo "false"
fi 
```

尝试使用 "find /c "ora-error" *.txt" 但无法将 o/p 放入变量并将其重定向到 if 条件...

IE。当我使用 "find /c "ora-error" *.txt" 下面是输出

---------- xx.TXT: 0

---------- yy.TXT: 0

---------- zz.TXT: 0

我想计数并将 valur 重定向到 IF 条件。

我需要一个窗口脚本来解决这个问题。

任何机构都可以帮助解决这个问题...

提前致谢..

带着敬意

sree

大佬们想出了一个办法......

```
find /c "ora-error" *.txt>TEST1.txt
find /c "0" TEST1.TXT>TEST2.TXT
FOR /F "TOKENS=1* DELIMS=:" %%A IN (TEST2.TXT) DO SET a=%%B
set _count=%a%
IF %_count% EQU 4 goto matched
IF not %_count% EQU 4 goto notmatched

:matched
echo we are in equal to 4 loop
pause
exit

:notmatched
echo we are in not equal to 4 loop
pause
exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:18:27.593

```
grep "ora-error" *.txt>/dev/null
if [ $? -eq 0 ]; then
echo "true"
else
echo "false"
fi 
```

# jquery-ui - 包含 flowplayer 时，jQuery UI 拖放不起作用

> ID：12726145
> 
> 赞同：0
> 
> 时间：2012-10-04T11:21:22.480
> 
> 标签：jquery-ui, flowplayer

请参阅此处的示例：http: [//jsfiddle.net/KK36F/2/](http://jsfiddle.net/KK36F/2/)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:56:56.923

我的旧答案：

> [http://jsfiddle.net/KK36F/5/](http://jsfiddle.net/KK36F/5/)
> 
> 我使用 jQuery noConflict 来解决 flowPlayer。因为我无法重现您的问题（flowPlayer 在我的网站 rrrrrr 上被阻止），所以这是我能做的最好的。

没用...我设法重现了问题并将其追踪到 flowplayer 代码中的一行：

```
// skip IE policies
document.ondragstart = function () { return false; }; 
```

如果你让它更安全（因为它是 JScript 唯一的 IE 东西），可拖动的东西会再次起作用。

```
if(document.ondragstart) {
    document.ondragstart = function () { return false; };
} 
```

# sql - 从字符数据中拆分数字

> ID：12726148
> 
> 赞同：1
> 
> 时间：2012-10-04T11:21:29.210
> 
> 标签：sql, sql-server, sql-server-2008

可以拆分这些数据吗？

```
DATA
----------
FORD3000
MILLER1300 
```

我想让它像这样：

```
ENAME | SAL
------------
FORD    3000
MILLER  1300 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:24:38.533

是的。

```
 select 
    substring(data, 1, PATINDEX('%[0-9]%',data)-1) as ename,
    substring(data, PATINDEX('%[0-9]%',data), len(data)) as sal
 from 
     table 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T11:28:04.500

```
SELECT SUBSTRING(@ourName, 1, CHARINDEX(' ', @ourName)) AS [First],
SUBSTRING(@ourName, CHARINDEX(' ', @ourName) + 2, LEN(@ourName)) AS[Last] 
```

# eclipse - 从eclipse cdt运行时如何在windows命令提示符下执行c程序

> ID：12726149
> 
> 赞同：1
> 
> 时间：2012-10-04T11:21:29.797
> 
> 标签：eclipse, mingw, eclipse-cdt

我下载并配置了 eclipse cdt 和 MinGW 并能够编译 c 程序。

我的问题是，当从 Eclipse 中单击“运行”选项时，如何在命令提示符下开始执行程序。目前它总是在 Eclipse 控制台中执行程序。

使用命令提示符执行 c 程序的原因是接受用户输入。我还想知道当 c 程序在 Eclipse 控制台中运行时有没有办法接受用户输入。

提前致谢，-Manju

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T06:22:40.377

我想我已经很晚了，但你仍然可以试试这个。您可以通过 Eclipse cdt 执行 c 程序，方法是编写批处理文件并通过单击按钮或任何其他事件处理程序调用它们。在尝试编译和执行文件之前，请确保您位于正确的目录中。

您可以在线找到各种资源来创建一个批处理文件，该文件可以帮助您通过控制台执行程序。

在编译文件时（如果您没有指定输出文件），将创建一个.exe 文件。要使用命令行输入执行此文件，只需在 cmd 中键入以下内容（只要您在同一目录中）

> a.exe“命令行输入”

其中“命令行输入”是您要提供给程序的输入。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-12T02:47:37.557

我知道 8 年已经很晚了，但也许像我这样的其他人看到了这个，所以我的回答是：你应该使用：

```
setvbuf(stdout, NULL, _IONBF, 0);
setvbuf(stderr, NULL, _IONBF, 0); 
```

在每个 printf 语句能够在 Eclipse IDE 控制台选项卡中输入数据之后，据我了解：“”I/O 问题的根本原因是我们使用 Windows 管道与底层进程进行通信。管道被缓冲”，您可以参考此链接了解更多信息；

[http://wiki.eclipse.org/CDT/User/FAQ#Eclipse_console_does_not_show_output_on_Windows](http://wiki.eclipse.org/CDT/User/FAQ#Eclipse_console_does_not_show_output_on_Windows)

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732](https://bugs.eclipse.org/bugs/show_bug.cgi?id=173732)

# actionscript-3 - StageText 不调度键盘事件

> ID：12726150
> 
> 赞同：0
> 
> 时间：2012-10-04T11:21:35.110
> 
> 标签：actionscript-3

我的 StageText 字段没有调度键盘事件有问题。StageText 在仅限 AS3 的项目上实现。一切正常，除了当我按回车键时，什么都没有发生......

下面遵循我的代码：

```
_input                      = new StageText(new StageTextInitOptions(true));
_input.text                 = _trackerData.trackerComment;
_input.maxChars             = Globals.TRACKER_INPUT_CHARS;
_input.fontFamily           = "Antenna Regular"; 
_input.softKeyboardType     = SoftKeyboardType.DEFAULT;
_input.returnKeyLabel       = ReturnKeyLabel.DONE;
_input.autoCorrect          = true;
_input.fontSize             = ScreenUtils.cmToPt(.25);
_input.color                = 0x000000;
_input.fontWeight           = "normal";
_input.stage                = this.stage;
_input.viewPort             = new Rectangle(    ScreenUtils.cmToPx(.35), 
                                                ScreenUtils.cmToPx(1.5), 
                                                stage.stageWidth - ScreenUtils.cmToPx(.7), 
                                                ScreenUtils.cmToPx(3)
                                            );
_input.addEventListener(KeyboardEvent.KEY_UP, keyUpEventHandler);

private function keyUpEventHandler(evt:KeyboardEvent):void
{
    trace("keyCode", evt.keyCode);
} 
```

但是该函数永远不会被调用！任何人都知道问题可能是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:46:55.050

我找不到原因，但如果您使用 ReturnKeyLabel.DONE，它就不起作用！试试另一个，比如 ReturnKeyLabel.GO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T11:53:30.260

您需要在设置视口属性之前添加事件侦听器

# php - 结合许多 JSON 对象？- PHP

> ID：12726161
> 
> 赞同：1
> 
> 时间：2012-10-04T11:22:07.367
> 
> 标签：php, json, parsing, loops, associative-array

我目前正在尝试处理一个以 JSON 格式存储游戏信息的相对较大的日志文件。任何日志文件的平均范围为 2000-5000 行。

来自日志文件的示例输出（保留格式...），注意：为了他自己的隐私，我删除了玩家姓名、SteamID 和 IP 地址：

```
{"timestamp": "2012-09-16 14:10:36", "event": "log_start", "unixTime": 1347768636}
{"timestamp": "2012-09-16 14:10:36", "event": "player_status", "player": {"name": "PLAYER NICKNAME", "userId": 15, "uniqueId": "STEAM_X:X:XXXXXXX (STEAMID)", "team": 1}, "address": "xxx.xxx.xxx.xxx (IP)", "country": "AU"}
{"timestamp": "2012-09-16 14:10:36", "event": "live_on_3", "map": "de_mirage_csgo", "teams": [{"name": "Terrorists", "team": 2}, {"name": "Counter-Terrorists", "team": 3}], "status": 5, "version": "1.0.0 Beta"} 
```

这就是问题的开始。日志文件的每一行都有效地定义了一个新的 JSON 对象？我正在尝试逐行解码所有这些对象（将它们存储为关联数组），`(json_decode($string,TRUE)`然后我尝试通过循环将它们合并到一个 PHP 数组中。这确实“有效”（在某种意义上没有视觉错误），但 array_merge 不会产生任何接近我预期结果的东西。这是我的代码：

```
/* parse the logfile into array */
for ($i = 0; $i < $lineCount; $i++) {
    if ($i === 0) { // first iteration
        $arrLog = json_decode($line[$i],true);     
    } else {
        $arrTempLog = json_decode($line[$i],true); // create temp array to store each line
        $arrLog = array_merge($arrLog, $arrTempLog); // merge temp array w/ main array    
    }
} 
```

任何能引导我朝着正确方向实现我需要的建议或意见将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:25:55.793

如果这不是您要找的，请澄清您的问题。

如果你想要一个包含该 Json 数据的数组，你可以这样做

```
$decodedJsonData = array_map(
    function($jsonString) {
        return json_decode($jsonString, true);
    },
    file('/path/to/logfile')
); 
```

这会将整个文件逐行读入一个数组并应用于`json_decode`每个行/元素，从而生成该 Json 数据的数组数组。

对于您上面的 Json，结果将是 ( [demo](http://codepad.viper-7.com/9gltJ6) )

```
Array
(
    [0] => Array
        (
            [timestamp] => 2012-09-16 14:10:36
            [event] => log_start
            [unixTime] => 1347768636
        )

    [1] => Array
        (
            [timestamp] => 2012-09-16 14:10:36
            [event] => player_status
            [player] => Array
                (
                    [name] => PLAYER NICKNAME
                    [userId] => 15
                    [uniqueId] => STEAM_X:X:XXXXXXX (STEAMID)
                    [team] => 1
                )

            [address] => xxx.xxx.xxx.xxx (IP)
            [country] => AU
        )
    [2] => Array
        (
            [timestamp] => 2012-09-16 14:10:36
            [event] => live_on_3
            [map] => de_mirage_csgo
            [teams] => Array
                (
                    [0] => Array
                        (
                            [name] => Terrorists
                            [team] => 2
                        )

                    [1] => Array
                        (
                            [name] => Counter-Terrorists
                            [team] => 3
                        )

                )
            [status] => 5
            [version] => 1.0.0 Beta
        )
) 
```

更多的信息：

*   [`file`— 将整个文件读入数组](http://php.net/file)
*   [`array_map`— 将回调应用于给定数组的元素](http://php.net/array_map)
*   [回调章节](http://php.net/manual/en/language.types.callable.php)

# javascript - 如何从用户输入构建和启动 URL？

> ID：12726165
> 
> 赞同：1
> 
> 时间：2012-10-04T11:22:22.143
> 
> 标签：javascript, html, batch-file, webpage

好的，所以编写了一个非常简单的批处理文件：

```
@echo off
set input=
set /P input=Enter Number Code: %=% 
start http://myanimelist.net/anime/%input% 
```

这会将他们带到带有他们输入的代码号的网站。

比如我输入：111

它转到[http://myanimelist.net/anime/111](http://myanimelist.net/anime/111)

基本上通过网页，如何在 PHP、JavaScript、HTML 中完成同样的事情？

它在哪里要求输入数字代码，然后将它们发送到 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:28:19.240

在 JavaScript 中：

```
<script type="text/javascript">
code = prompt("Enter your desired code");
if (code != null && code != '') {
   window.location.href = 'http://myanimelist.net/anime/'+code;
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:30:57.540

使用 JavaScript 非常简单，我什至建议使用 jQuery ......

您的网页（html 文件）需要一个文本输入字段，用户可以在其中键入代码：

```
<label for="numberInput">Enter Number Code:</label><input type="text" id="numberInput" />
<input type="button" value="Enter" id="enter"/> 
```

​然后你将一个 javascript 事件附加到构建 URL 并转到它的按钮上：

```
$(document).ready(function() {

    $("#enter").click(function() {
        window.location = "http://myanimelist.net/anime/" + $("#numberInput").val();
    });                          

});​ 
```

这是一个包括标记的工作小提琴。

[http://jsfiddle.net/czX7R/1/](http://jsfiddle.net/czX7R/1/)

# c# - 如何通过某些列在 linq 和 linq 中使用 Distinct to NHibernate

> ID：12726166
> 
> 赞同：4
> 
> 时间：2012-10-04T11:22:26.223
> 
> 标签：c#, linq, distinct, linq-to-nhibernate

我有一个地址类。

```
public class Address : RootEntityBase
{
    virtual public string Province { set; get; }
    virtual public string City { set; get; }        
    virtual public string PostalCode { set; get; }
} 
```

通过这个默认值：

```
var myList = new List<Address>
             {
               new Address {Province = "P1", City = "C1", PostalCode = "A"},
               new Address {Province = "P1", City = "C1", PostalCode = "B"},
               new Address {Province = "P1", City = "C1", PostalCode = "C"},

               new Address {Province = "P1", City = "C2", PostalCode = "D"},
               new Address {Province = "P1", City = "C2", PostalCode = "E"},

               new Address {Province = "P2", City = "C3", PostalCode = "F"},
               new Address {Province = "P2", City = "C3", PostalCode = "G"},
               new Address {Province = "P2", City = "C3", PostalCode = "H"},

               new Address {Province = "P2", City = "C4", PostalCode = "I"}
             }; 
```

我需要通过两列从这个 myList 中提取不同的内容：Province & City

即类似于`myExpertResult`：

```
var myExpertResult = new List<Address>
                        {
                           new Address {Province = "P1", City = "C1"},
                           new Address {Province = "P1", City = "C2"},
                           new Address {Province = "P2", City = "C3"},
                           new Address {Province = "P2", City = "C4"}
                        }; 
```

所以我使用这段代码：

```
var list = myList.Select(x => new Address {City = x.City, Province = x.Province}).Distinct().ToList(); 
```

但我的结果无效，因为结果计数为 9，即所有地址。

SQL中的等效查询是：`select distinct Province , City from tblAddress`

我还通过 linq to NHibernate 测试了这个查询。

```
var q = SessionInstance.Query<Address>();
        .Select(x => new Address { Province = x.Province, City = x.City }).Distinct().ToList(); 
```

但它不支持此查询。异常消息是：`Expression type 'NhDistinctExpression' is not supported by this SelectClauseVisitor.`

我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T11:26:46.167

您可以使用`GroupBy`：

```
var result = myList.GroupBy(a => new { a.Province, a.City })
      .Select(g => new Address { 
                  Province = g.Key.Province, 
                  City = g.Key.City 
              }); 
```

或者使用匿名类型：

```
 myList.Select(a => new { 
            Province = a.Province,
            City = a.City
        })
      .Distinct(); 
```

默认情况下，匿名类型使用*值质量*来比较，当所有属性都等价时，它是等价的。

另一种方法是在[这里](http://msdn.microsoft.com/en-us/library/bb338049.aspx)`EqualityComparer`使用另一个重载的客户`Province`和`City`方法`Equal``GetHashCode``Distinct`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:41:47.547

也许这可以帮助：

**一个简单的继电器比较器**

```
public class RelayComparer<T> : IEqualityComparer<T>
{
private Func<T, T, bool> equals;
private Func<T, int> getHashCode;  

public RelayComparer(Func<T, T, bool> equals, Func<T,int> getHashCode)
{
  this.equals = equals;
  this.getHashCode = getHashCode;
}

public bool Equals(T x, T y)
{
  return equals(x, y);
}

public int GetHashCode(T obj)
{
  return getHashCode(obj);
}
}

var comparer = new RelayComparer<Address>(
(lhs, rhs) => lhs.Province == rhs.Province && lhs.City == rhs.City, 
      t => t.Province.GetHashCode() + t.City.GetHashCode());

myList.Distinct(comparer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T13:55:46.730

如果您想要一种通过单个特定属性区分的通用方法，您可以使用以下方法：

```
using System;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.Linq.Dynamic.Core;
using System.Linq.Expressions;

  /// <summary> Gets property information.</summary>
  /// <exception cref="ArgumentException">
  ///   Thrown when one or more arguments have unsupported or illegal values.
  /// </exception>
  /// <typeparam name="TSource">   Type of the source. </typeparam>
  /// <typeparam name="TProperty"> Type of the property. </typeparam>
  /// <param name="source">         Source for the. </param>
  /// <param name="propertyLambda"> The property lambda. </param>
  /// <returns> The property information.</returns>
  public static PropertyInfo GetPropertyInfo<TSource, TProperty>(
      TSource source,
      Expression<Func<TSource, TProperty>> propertyLambda)
  {
     Type type = typeof(TSource);

     MemberExpression member = propertyLambda.Body as MemberExpression;
     if (member == null)
        throw new ArgumentException(string.Format(
            "Expression '{0}' refers to a method, not a property.",
            propertyLambda.ToString()));
 PropertyInfo propInfo = member.Member as PropertyInfo;
 if (propInfo == null)
    throw new ArgumentException(string.Format(
        "Expression '{0}' refers to a field, not a property.",
        propertyLambda.ToString()));

 if (propInfo.ReflectedType != null && (type != propInfo.ReflectedType &&
                                        !type.IsSubclassOf(propInfo.ReflectedType)))
    throw new ArgumentException(string.Format(
        "Expresion '{0}' refers to a property that is not from type {1}.",
        propertyLambda.ToString(),
        type));

 return propInfo;
  }

      /// <summary> An IQueryable&lt;T&gt; extension method that distinct by a certain property.</summary>
      /// <exception cref="NullReferenceException"> Thrown when the underlying Session value was unexpectedly null. </exception>
      /// <typeparam name="T">  The result type of the IQueryable. </typeparam>
      /// <typeparam name="T1"> The property type. </typeparam>
      /// <param name="query">      The query to act on. </param>
      /// <param name="expression"> The expression, that references the property. </param>
      /// <returns> An IQueryable&lt;T&gt;</returns>
      public static IQueryable<T> DistinctBy<T, T1>(this IQueryable<T> query, Expression<Func<T, T1>> expression)
      {
         var distinctSelection = query.Select(expression);
         var info = GetPropertyInfo(default(T), expression);
         var propertyInfo = query.Provider.GetType().GetProperty("Session", BindingFlags.NonPublic | BindingFlags.Instance);
         if (propertyInfo == null)
         {
            throw new NullReferenceException("The underliying Session is not defined!");
         }
         ISession session = propertyInfo.GetValue(query.Provider, null) as ISession;
         var result = session.Query<T>().Where("x => @0.Contains( x." + info.Name + ")", distinctSelection);
         return result;
      }
   }

      /// <summary> An IQueryable&lt;T&gt; extension method that distinct by two properties (composite key).</summary>
      /// <exception cref="ArgumentNullException">  Thrown when one or more required arguments are null. </exception>
      /// <exception cref="NullReferenceException"> Thrown when a value was unexpectedly null. </exception>
      /// <typeparam name="T">  The resulting type. </typeparam>
      /// <typeparam name="T1"> The type of the first property. </typeparam>
      /// <typeparam name="T2"> The type of the second property. </typeparam>
      /// <param name="query">          The query to act on. </param>
      /// <param name="expressionKey1"> The first expression key (property 1 or key 1). </param>
      /// <param name="expressionKey2"> The second expression key (property 2 or key 2). </param>
      /// <returns> An IQueryable&lt;T&gt;</returns>
      public static IQueryable<T> DistinctBy<T, T1, T2>(this IQueryable<T> query, Expression<Func<T, T1>> expressionKey1, Expression<Func<T, T2>> expressionKey2)
      {
         if (expressionKey1 == null)
         {
            throw new ArgumentNullException("expressionKey1");
         }
         if (expressionKey2 == null)
         {
            return query.DistinctBy(expressionKey1);
         }
         var propertyInfo = query.Provider.GetType().GetProperty("Session", BindingFlags.NonPublic | BindingFlags.Instance);
         if (propertyInfo == null)
         {
            throw new NullReferenceException("The underliying Session is not defined!");
         }
         ISession session = propertyInfo.GetValue(query.Provider, null) as ISession;
         var info1 = GetPropertyInfo(default(T), expressionKey1);
         var info2 = GetPropertyInfo(default(T), expressionKey2);

         var result = session.Query<T>().Where("k => @0.Any(k1 => k1." + info1.Name + " == k." + info1.Name + " && k1." + info2.Name + " == k." + info2.Name + ")", query);

         return result;
      } 
```

你可以这样称呼它：

```
var query = Session.Query<Person>().DistinctBy(p => p.FirstName); 
```

# java - 编辑时动态增加JTable行高，完成编辑时减少

> ID：12726167
> 
> 赞同：2
> 
> 时间：2012-10-04T11:22:34.237
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我正在编写一个小型 POS 应用程序，它显示了一个 JTable，其单元格内包含票证信息。CellRenderer 是一个扩展 JPanel 并实现 TableCellRenderer 的类，并包含一些显示基本信息（数量、描述、价格）的 JTextField。此外，我还有另一个类扩展 JPanel 并实现 TableCellEditor，它用作 CellEditor。这个类包含更多的 JTextFields 和一些 jButtons。

我需要的很简单：当我通过单击鼠标（或触摸屏幕，据我所知，这是同一个事件）编辑任何单元格时，动态增加我要编辑的单元格的高度，因此它可以显示编辑器内的所有组件。当我完成编辑时，将单元格高度返回到之前的值。

有什么想法吗？

提前致谢。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:45:51.050

> CellRenderer 是一个扩展 JPanel 并实现 TableCellRenderer 的类，并包含一些显示基本信息（数量、描述、价格）的 JTextField。此外，我还有另一个类扩展 JPanel 并实现 TableCellEditor，它用作 CellEditor。这个类包含更多的 JTextFields 和一些 jButtons。

更好的方法是`JDialog`根据来自的事件创建弹出窗口 () `JPopupMenu`，

> 编辑时动态增加JTable行高，完成编辑时减少

不要混淆用户和错误的概念可能是由于`JTables row`在屏幕上跳跃引起的

> 我需要的很简单：当我通过单击鼠标（或触摸屏幕，据我所知，这是同一个事件）编辑任何单元格时，动态增加我要编辑的单元格的高度，因此它可以显示编辑器内的所有组件。当我完成编辑时，将单元格高度返回到之前的值。

不要那样做，但必须覆盖，可以通过

*   `DefaultCellEditor#setClickCountToStart(int)`为了`TableCellEditor`

*   `start`，`stop`并且`cancelEdit`对于`CellEditor`

*   必须`notify`或，和`re_Layout` `JTable`上相同`stop``cancelEdit`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:31:48.107

不是如何调整rowHeights的答案，而是我的评论中提到的替代方案：“超大”编辑器组件，而不是更新完整的rowHeight（我认为这对用户来说太刺激了，但由你决定， 当然 ：）

```
// fake a bigger editing component
JTextField oversized = new JTextField() {

    @Override
    public Dimension getPreferredSize() {
        Dimension dim = super.getPreferredSize();
        dim.height *= 5;
        return dim;
    }

};

TableCellEditor editor = new DefaultCellEditor(oversized);
JTable table = new JTable(new AncientSwingTeam()) {

    @Override
    public boolean editCellAt(int row, int column, EventObject e) {
        boolean result = super.editCellAt(row, column, e);
        if (result) {
            // adjust cell bounds of the editing component
            Rectangle bounds = getEditorComponent().getBounds();
            bounds.height = getEditorComponent().getPreferredSize().height;
            getEditorComponent().setBounds(bounds);
        }
        return result;
    }

    @Override
    public void removeEditor() {
        int editingColumn = getEditingColumn();
        super.removeEditor();
        if (editingColumn >= 0) {
            // cleanup
            repaint();
        }
    }

};
table.getColumnModel().getColumn(0).setCellEditor(editor); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:31:45.580

没有尝试过，但我会说实现[MouseListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)的`mouseClicked()`方法是要走的路。跟踪单元格高度是否已经增加，并相应地更改高度。

由于`MouseListener`是一个接口，`CellRenderer`因此也可以实现这个接口，将所有单元格行为保持在一个类中。

# operating-system - 调度算法的类型

> ID：12726169
> 
> 赞同：1
> 
> 时间：2012-10-04T11:22:37.347
> 
> 标签：operating-system, scheduling

我了解CPU调度算法分为

1.  交互式 - 循环，优先调度
2.  批处理调度 - FCFS,SJF

但我无法理解命名 Interactive 和 Batch Scheduling 背后的原因..?? 为什么像 RR 这样的算法叫做交互式，而像 FCFS 这样的算法叫做批量调度？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:25:55.340

Batch Scheduling 的思想是在运行期间调度不会发生变化：一个进程被调度对数据进行操作，并一直运行到该进程完成。在“交互式”调度中，可以在另一个进程运行时启动一个新进程，因此将为该进程以及另一个进程分配时间。在批处理调度中，调度是在操作开始时确定的。

优先级（交互式）调度示例：

进程 A 具有高优先级，进程 B 具有低优先级。进程 A 一直运行，直到它需要用户的一些输入。当 A 等待时，CPU 给了一些时间来处理 B。一旦收集到 A 的输入，进程 B 就会被换出，并且由于进程 A 的优先级更高，它会被分配给 CPU。

批处理 (FCFS) 调度示例：

进程 A 和进程 B 是要调度的进程。进程 A 首先被分配给 CPU，因此在 A 完成运行之前，B 不会收到任何时间。即使 A 暂停用户输入，B 也不会运行（实际上浪费了等待输入时的 CPU 时间）。

当然，就像所有这些低级的东西一样，它并不完全那么简单：为了获得多任务的错觉，时间通常在进程之间分配，即使没有任何东西在等待 I/O。在优先级调度中，这可能意味着在两者都运行时给予 A 比 B 更多的时间片，以便 A 执行得更快。交互式调度和批处理调度都有其优点和缺点：虽然交互式调度为用户提供了更快的响应时间并且更“公平”地划分时间，但由于“上下文切换”需要多长时间（即时间）而产生开销处理器从处理进程 A 切换到进程 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:33:20.103

交互式调度策略为每个进程分配一个时间片。一旦时间片结束，即使尚未终止，进程也会被交换。也可以说这种调度是抢占式的。相反，批处理调度策略是非抢占式的。一旦进程处于运行状态，它在终止之前不会改变状态。

# c# - 在 PInvoke DLL“coredll.dll”中找不到入口点“GetDeviceUniqueID”

> ID：12726170
> 
> 赞同：2
> 
> 时间：2012-10-04T11:22:38.533
> 
> 标签：c#

对 Porgramming 来说是新手，我有一个项目，它需要每个移动设备的唯一设备 ID，用 C# 完成。

Windows Mobile 5.0 SDK R2

这是我正在使用的代码片段：

```
 [DllImport("coredll.dll")]
    private extern static int GetDeviceUniqueID([In, Out] byte[] appdata,
                                                int cbApplictionData,
                                                int dwDeviceIDVersion,
                                                [In, Out] byte[] deviceIDOuput,
                                                out uint pcbDeviceIDOutput);

    public static string GetDeviceID()
    {
        string appString = "MyApplication";
        byte[] appData = new byte[appString.Length];
        for (int count = 0; count < appString.Length; count++)
        {
            appData[count] = (byte)appString[count];
        }

        int appDataSize = appData.Length;
        byte[] DeviceOutput = new byte[20];
        uint SizeOut = 20;
        GetDeviceUniqueID(appData, appDataSize, 1, DeviceOutput, out SizeOut);

        string idString = "";
        for (int i = 0; i < DeviceOutput.Length; i++)
        {
            if (i == 4 || i == 6 || i == 8 || i == 10)
                idString = String.Format("{0}-{1}", idString, DeviceOutput[i].ToString("x2"));
            else
                idString = String.Format("{0}{1}", idString, DeviceOutput[i].ToString("x2"));
        }
        return idString;

    } 
```

但是当我尝试部署和运行时，我得到：在 PInvoke DLL 'coredll.dll' 中找不到入口点'GetDeviceUniqueID'。

谁能告诉我我做错了什么或没有做我应该做的事情？

# javascript - 如何为 iFrame 按钮调用窗口 onunload 事件单击父页面和 iFrame 位于不同域中的位置

> ID：12726171
> 
> 赞同：3
> 
> 时间：2012-10-04T11:22:37.690
> 
> 标签：javascript, jquery, iframe, postmessage

我有打开 iFrame 的按钮*（位于域中，例如“xyz”）*，iFrame 加载位于另一个域中的页面*（例如“lmn”）*

```
$("#templateSelectionFrame").get(0).contentWindow.location.href = url; 
```

url 来自另一个域*（我在不同的域中使用 Jquery 'POSTMESSAGE' 进行通信）*

当用户从 iFrame 中单击取消按钮时，我需要关闭 iFrame，但在此之前有必要显示页面留下消息（即留在页面/离开页面 - 这已经被调用`window.onbeforeunload`）。

```
var warnNavigateAway = true;

window.onbeforeunload = confirmBrowseAway;

// Called then user leave window without saving content.
function confirmBrowseAway() {
    if (warnNavigateAway) {
        return "If you leave this page, your work will be lost ...";
    }
}

function documentSaved() {
   warnNavigateAway = false;
}

function documentDirty() {
   warnNavigateAway = true;
}

<div id="bottomBar">
   <button class="cancelBtn" onclick="GoBack()">Cancel</button>
</div> 
```

我如何调用相同的页面留言，以便在用户单击留言页消息时关闭 iFrame。

```
function GoBack() 
{
   var operationType = '<%: (Model.OperationType)%>';
   if (operationType == "Create")
   {
      window.history.back();
   }
   else {     
      $.postMessage(
         'closeIFrame',
         parentUrl,
         parent
      );
   }
} 
```

（导航：取消按钮 -> 页面留言 -> 如果（留在页面然后“无事可做”）如果（离开页面然后） -> 关闭 iFrame）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:16:47.390

## 纯 JavaScript

看起来您可以控制两个域中的代码 - 尽管它们位于不同的主机上 - 您应该能够在 iframe 中使用以下内容：

```
var warnNavigateAway = true;

var confirmBrowseAway = function(){
  /// if warn is enabled, then ask the user. otherwise assume "browse away"
  var v = ( 
    warnNavigateAway
    ? 
    /// use the built-in confirm dialog to notify the user, this will also 
    /// halt execution - meaning the page close is prevented until an 
    /// answer is given.
    confirm('If you leave this page, your work will be lost ...')
    :
    true
  );
  if ( v ) {
    /// disable the warn just in case our deleting of the 
    /// iframe triggers the onunload
    warnNavigateAway = false;
  }
  return v;
}

/// i've kept the use of "onevent" handlers as in your example, but you 
/// should use addEventListener and attachEvent in the same way as I have  
/// for the second part of the code in the outer frame.

/// apply as a listener in case the user navigates without using the button
window.onbeforeunload = confirmBrowseAway;
/// apply the same method for the onclick of the button
document.getElementById('cancelButton').onclick = function(){
  if ( confirmBrowseAway() ) {
    window.parent.postMessage('close_iframe', 'http://xyz/');
  }
} 
```

以及主机框架中的以下内容：

```
var messageListener = function(e){
  if ( e.origin !== "http://lmn/" ) {
    return;
  }
  if ( e.data == 'close_iframe' ) {
    /// however you prefer to close your iframe
    document.getElementById('myIframe').style.display = 'none';
    /// or removal...
    document.getElementById('myIframe').parentNode.removeChild(
      document.getElementById('myIframe')
    );
  }
};

if ( window.addEventListener ) {
  window.addEventListener("message", messageListener, false);
}
else if( window.attachEvent ) {
  window.attachEvent("onmessage", messageListener);
} 
```

*（以上代码为手动输入，可能有错误，仅供参考）*

使用上述内容，您需要稍微修改 iframe 和按钮的标记。

```
<button id="cancelButton" class="cancelBtn">Cancel</button> 
```

和

```
<iframe id="myIframe" ... /> 
```

## jQuery

因为我没有发现您使用的是 jQuery，所以这里是 jQuery 版本:)

框架：

```
var warnNavigateAway = true;

var confirmBrowseAway = function(){
  /// if warn is enabled, then ask the user. otherwise assume "browse away"
  var v = ( 
    warnNavigateAway
    ? 
    /// use the built-in confirm dialog to notify the user, this will also 
    /// halt execution - meaning the page close is prevented until an 
    /// answer is given.
    confirm('If you leave this page, your work will be lost ...')
    :
    true
  );
  if ( v ) {
    /// disable the warn just in case our deleting of the 
    /// iframe triggers the onunload
    warnNavigateAway = false;
  }
  return v;
}

$(window).bind('beforeunload', confirmBrowseAway);
$('.cancelBtn').bind('click', function(){
  if ( confirmBrowseAway() ) {
    $.postMessage( 'close_iframe', 'http://xyz/' ) 
  }
}); 
```

在主机：

```
$.receiveMessage(
  function(e){
    if ( e.data == 'close_iframe' ) {
      /// however you prefer to close your iframe
      $('.myIframe').hide();
      /// or removal...
      $('.myIframe').remove();
    }
  },
  "http://lmn/"
); 
```

# c# - 如何使用 AJAX 将文件上传到 ASP.NET？

> ID：12726172
> 
> 赞同：2
> 
> 时间：2012-10-04T11:22:41.310
> 
> 标签：c#, xmlhttprequest

我正在尝试使用 AJAX 将文件上传到 ASP.NET。我有这个 Javascript：

```
var xhr = new XMLHttpRequest();

for (var i = 0; i < files.length; i++) {
   xhr.open('post', '/File/Upload', true);
   xhr.setRequestHeader("Content-Type", "multipart/form-data");
   var formData = new FormData();
   formData.append("_file", files[i]);
   xhr.send(files[i]);
} 
```

`files`是一个`Array()`

然后我尝试用 C# 代码访问 post 文件，但值始终是`null`. 我该如何解决这个问题？

```
// Method 1, Result: file = null
HttpPostedFileBase file = Request.Files["_file"];

// Method 2, Result: postedFile.Count = 0
HttpFileCollectionBase postedFile = Request.Files; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:52:32.417

假设您有以下包含文件输入字段的表单：

```
<form action="/home/index" method="post" enctype="multipart/form-data" onsubmit="return handleSubmit(this);">
    <input type="file" id="_file" name="_file" multiple="multiple" />
    <button type="submit">OK</button>
</form> 
```

您可以尝试以下功能：

```
function handleSubmit(form) {
    if (!FormData) {
        alert('Sorry, your browser doesn\'t support the File API => falling back to normal form submit');
        return true;
    }

    var fd = new FormData();
    var file = document.getElementById('_file');
    for (var i = 0; i < file.files.length; i++) {
        fd.append('_file', file.files[i]);
    }

    var xhr = new XMLHttpRequest();
    xhr.open(form.method, form.action, true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
            alert(xhr.responseText);
        }
    };
    xhr.send(fd);

    return false;
} 
```

现在在服务器上，您应该能够使用`Request.Files`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:53:32.973

你也可以使用 jQuery

你有 2 个函数
Ajax：[http](http://api.jquery.com/jQuery.ajax/)
://api.jquery.com/jQuery.ajax/ 加载（快捷方式，调用 ajax）：[http](http://api.jquery.com/load/)
://api.jquery.com/load/ 示例：[http://www.w3schools。 com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

**编辑**时间：2012-10-04 16:31
**原因**：得到以下评论：
*嗯，除非我不明白，我不想加载服务器的信息，我想获取信息我的服务器上有我的 JS 代码。我已经有了要在文件 Array() 中发送的信息。– 埃尔法耶*

您所做的是对服务器进行 AJAX 调用，就像对 Web 服务一样。这是一个例子

```
var value = 1;
var handlerUrl = [YOUR WEBSERVICE URL];

//Do the Ajax Call
jQuery.ajax({
  url: handlerUrl,
  data: { "params[]": [value] },
  type: 'POST',
  success: function (data)
  {
     alert("succes");
  },
  error: function (jxhr, msg, err)
  {
     alert("error");
  }
}); 
```

在 data 参数中，您提供数据。
我以数组的形式在这里发送它，但您也可以像 1 参数一样发送它。在我的情况下，您如何访问它是一个通用处理程序。

```
//Split the parameters and set in Array of Strings
var param = context.Request.Form[0].Split(',');
var value = param[0]; 
```

就像我说的那样，我以数组的形式给出它，所以我只有一个参数
，然后我将它拆分。但是如果你给它一个单一的属性，那么你
可以得到它：

```
context.Request.Form[0]
context.Request.Form[1]
context.Request.Form[2]
context.Request.Form[3]
context.Request.Form[4] 
```

# python - django-celery 管理命令给出 AttributeError: '_multiprocessing.SemLock' 对象没有属性 'name'

> ID：12726176
> 
> 赞同：0
> 
> 时间：2012-10-04T11:22:59.880
> 
> 标签：python, django, django-celery, kombu

我想向管理员发送通知电子邮件，例如，如果帖子是垃圾邮件，那么管理员应该收到电子邮件。我正在使用 django-celery templated_email 和 kombu。但是当我运行 djcelery 的任何管理命令时出现错误

D:\test\testapp>python manage.py celeryd -l info C:\Python27\lib\site-packages\django_celery-3.0.4-py2.7.egg\djcelery\loaders.py:116:
UserWarning: Using settings .DEBUG 导致内存泄漏，n warnings.warn("Using settings.DEBUG 导致内存泄漏，never "

```
 -------------- celery@Siddhatech_A-PC v3.0.4 (Chiastic Slide)
  ---- **** -----
 --- * ***  * -- [Configuration]
 -- * - **** --- . broker:      djkombu.transport.DatabaseTransport://localhost//
 - ** ---------- . app:         default:0x28c3390 (djcelery.loaders.DjangoLoader)
 - ** ---------- . concurrency: 4 (processes)
 - ** ---------- . events:      OFF (enable -E to monitor this worker)
 - ** ----------
 - *** --- * --- [Queues]
 -- ******* ---- . celery:      exchange:celery(direct) binding:celery
 --- ***** ----- . email:       exchange:celery(direct) binding:email

  [Tasks]
    . djcelery_email_send
    . testapp.tasks.add

Traceback (most recent call last):
    File "<string>", line 1, in <module>
    File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-billiard\forking.py", line 496, in main
     self = load(from_parent)
    File "C:\Python27\lib\pickle.py", line 1378, in load
    return Unpickler(file).load()
    File "C:\Python27\lib\pickle.py", line 858, in load
   [2012-10-04 14:45:25,960: ERROR/MainProcess]Unrecoverable error:AttributeError("'_multiprocessing.SemLock' object has no attribute 'name'",)
   Traceback (most recent call last):
   File "C:\Python27\lib\site-packages\celery-3.0.4-py2.7.egg\celery\worker\__init__.py", line 348, in start
   component.start()
   File "C:\Python27\lib\site-packages\celery-3.0.4-py2.7.egg\celery\concurrency\base.py", line 109, in start
   self.on_start()
   File "C:\Python27\lib\site-packages\celery-3.0.4-py2.7.egg\celery\concurrency\processes\__init__.py", line 84, in on_start
   **self.options)
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\pool.py", line 799, in __init__
   self._create_worker_process()
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\pool.py", line 867, in _create_worker_process
   w.start()
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\process.py", line 138, in start
   self._popen = Popen(self)
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\forking.py", line 350, in __init__
   dump(process_obj, to_child, HIGHEST_PROTOCOL)
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\forking.py", line 143, in dump
   ForkingPickler(file, protocol).dump(obj)
   File "C:\Python27\lib\pickle.py", line 224, in dump
   self.save(obj)
   File "C:\Python27\lib\pickle.py", line 331, in save
   self.save_reduce(obj=obj, *rv)
   File "C:\Python27\lib\pickle.py", line 419, in save_reduce
   save(state)
   File "C:\Python27\lib\pickle.py", line 286, in savef(self, obj) # Call unbound method with explicit self
   File "C:\Python27\lib\pickle.py", line 649, in save_dict
   self._batch_setitems(obj.iteritems())
   File "C:\Python27\lib\pickle.py", line 681, in _batch_setitems
   save(v)
   File "C:\Python27\lib\pickle.py", line 286, in save
   f(self, obj) # Call unbound method with explicit self
   File "C:\Python27\lib\pickle.py", line 562, in save_tuple
   save(element)
   File "C:\Python27\lib\pickle.py", line 331, in save
   self.save_reduce(obj=obj, *rv)
   File "C:\Python27\lib\pickle.py", line 419, in save_reduce
   save(state)
   File "C:\Python27\lib\pickle.py", line 286, in save if(self, obj) # Call unbound method with explicit self
   File "C:\Python27\lib\pickle.py", line 562, in save_tuple
   save(element)
   File "C:\Python27\lib\pickle.py", line 306, in save
    rv = reduce(self.proto)
   File "C:\Python27\lib\site-packages\billiard-2.7.3.10-py2.7-win32.egg\billiard\synchronize.py", line 122, in __getstate__
   sl.name)
   AttributeError: '_multiprocessing.SemLock' object has no attribute 'name'
   dispatch[key](self)
   File "C:\Python27\lib\pickle.py", line 880, in load_eof
   raise EOFError
   EOFError
   [2012-10-04 14:45:26,299: INFO/MainProcess] process shutting down 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:19:13.590

请升级到 celery 3.0.11，特别是最新的台球版本，因为这个 Windows 特定的错误最近已修复

# c# - 如何在 WPF App 中动态生成标签、按钮、复选框和文本框

> ID：12726178
> 
> 赞同：2
> 
> 时间：2012-10-04T11:23:01.793
> 
> 标签：c#, wpf, mvvm, dynamically-generated

我是WPF的新手。我正在遵循 MVVM 模式。我的主窗口中有列表框，其中包含项目列表。我还有一个在启动时为空的网格。现在这里是查询，在从列表框中选择项目时，我想动态生成标签、按钮、复选框和文本框，而不是使用工具箱。

**主窗口中的列表框和网格：**

```
<ListBox Name="ButtonPanel" ItemsSource="{Binding BoardTabs}" SelectedItem="{Binding SelectedTab, Mode=TwoWay}" >
        <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Button Margin="0,27,0,0" Content="{Binding TabName}" />
            </StackPanel>
        </DataTemplate>
        </ListBox.ItemTemplate>
</ListBox>

<Grid Height="461" HorizontalAlignment="Left" Margin="139,0,0,0" Name="grid1" VerticalAlignment="Top" Width="339" >

</Grid> 
```

**TabName**是字符串，它是我的模型类的一部分。

**视图模型类：**

```
public List<Product> m_BoardTabs; 
public ProductViewModel()
{       
    m_BoardTabs = new List<Product>()
    {
        new Product() {TabName = "A"}, 
        new Product() {TabName = "B"},
        new Product() {TabName = "C"},               
    };
}                      

public List<Product> BoardTabs
{
    get
    {
        return m_BoardTabs;
    }

    set
    {
        m_BoardTabs = value;
    }
}

private Product m_SelectedItem;
public Product SelectedTab
{
    get
    {
        return m_SelectedItem;
    }

    set
    {
        m_SelectedItem = value;                
        NotifyPropertyChanged("SelectedTab");
    }
} 
```

**示范：**

ListBox 有 3 个项目。甲、乙、丙

在我的网格中选择 A 时，我想按堆栈顺序显示 L1、L2、L3。B1、B2、B3 按堆栈顺序，C1、C2、C3 和 T1、T2、T3 依此类推，其中 L 是标签，B 是按钮，T 是文本框，C 是复选框。

在选择 B 时，在我的网格中，我想按堆栈顺序显示 L5、L6、L7。B5、B6、B7 按堆栈顺序，C5、C6、C7 和 T5、T6、T7 依此类推，其中 L 是标签，B 是按钮，T 是文本框，C 是复选框。

与选择 C ​​相同。虽然借助工具箱在应用程序中创建标签很容易。

有没有办法可以根据列表框中的选定项目在网格内生成它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:11:45.893

是的。

`DataTemplates`对于每种情况，您需要的是不同的，您可以定义所需控件的结构并`DataTemplateSelector`为您的`Grid`.

[在这里](http://msdn.microsoft.com/en-us/library/ms742521.aspx)找到更多

# linux - 在linux脚本中运行java应用程序后返回控制台

> ID：12726180
> 
> 赞同：0
> 
> 时间：2012-10-04T11:23:08.920
> 
> 标签：linux

有一个 linux 脚本，其中包含用于运行 java 应用程序的语句。脚本（runServer.sh）如下：

```
java ServerApp & 
```

由于 java 应用程序是一个服务器，它会一直运行直到停止。因此运行 runServer.sh 后它不会自动返回控制台，而是一直等待按返回键。

同样的问题会导致通过运行时 api 的远程脚本调用永远等待。

```
proc = rt.exec(runScript);
exitVal = proc.waitFor(); 
```

即使通过 ssh 从 machine1 运行远程脚本，也必须使用 crtl+c 退出远程脚本执行。

当我将以下语句插入 runServer.sh 时，问题就解决了。但在那种情况下，我无法通过“echo $？>pid”将进程 ID 写入文件

```
exec > "\tmp\outlog.txt" 2>&1 
```

有没有办法通过修改 linux 脚本自动返回控制台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:20:38.280

将脚本更改为：

`nohup java ServerApp &`

# .net - Web 场服务器使用的 WCF。错误：套接字连接被中止

> ID：12726182
> 
> 赞同：2
> 
> 时间：2012-10-04T11:23:16.677
> 
> 标签：.net, wcf, sockets, binding, tcp

我在 ServerA 上部署了 WCF 服务。我正在使用 tcp 绑定。

我还有一个由 ServerB 和 ServerC 组成的网络农场。

当我在任何服务器 ServerB 或 ServerC 上部署使用 WCF 服务的应用程序时，尝试调用我的服务时出现错误。我添加了跟踪，这是我得到的错误：

> 套接字连接被中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或者是潜在的网络资源问题造成的。本地套接字超时为“10675199.02:48:05.4775807”。

我试图从我的电脑上使用相同的服务，它工作正常。我还尝试将应用程序部署在不在网络场上但位于同一网络上的其他服务器上，并且我也能够使用我的服务。

所以我发现问题与服务器 B 和 C 位于网络场有关。这只是一个猜测，但我找不到这种行为的任何其他原因。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:35:30.020

如果服务器位于负载均衡器后面，您可能必须执行以下操作（useRequestHeadersForMetadataAddress）：

```
<serviceBehaviors>
  <behavior name="YourServiceBehavior">
    <useRequestHeadersForMetadataAddress />
  </behavior>
</serviceBehaviors> 
```

# maven-2 - 如何使用来自 maven build 的 url 打开浏览器

> ID：12726184
> 
> 赞同：6
> 
> 时间：2012-10-04T11:23:22.057
> 
> 标签：maven-2, maven-3

我正在使用 Maven3 构建一个 Web 应用程序并通过`mvn jetty:run-war`. 现在我想在系统浏览器中从我的 maven 构建中打开网络应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:35:30.060

我在 os windows 上解决了我的问题，这是我目前唯一的构建系统。启动码头服务器并托管我的网络应用程序后，构建通过 antrun 进行启动调用：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
      <execution>
        <id>Run URL in system browser.</id>
        <phase>install</phase>
        <configuration>
          <target>
            <exec executable="start" vmlauncher="false">
              <arg line="http://localhost:8080/rap?startup=entrypoint"/>
            </exec>
          </target>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-20T07:02:03.980

[作为我的bck2brwsr VM](http://github.com/jtulach/bck2brwsr)工作的一部分，我编写了一个 Maven 插件，可以在每个平台/JDK 上打开浏览器。它可用于显示项目中的任何静态页面。以下示例打开带有`pom.xml`文件内容的浏览器：

```
<plugin>
    <groupId>org.apidesign.bck2brwsr</groupId>
    <artifactId>bck2brwsr-maven-plugin</artifactId>
    <version>0.22</version>
    <executions>
        <execution>
            <id>show-a-file</id>
            <phase>verify</phase>
            <goals>
                <goal>show</goal>
            </goals>
            <configuration>
                <directory>${basedir}</directory>
                <startpage>pom.xml</startpage>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我知道打开静态页面并不完美，但它可以包含适当的重定向，对吧？此外，如果有兴趣，可以轻松改进插件以打开任何 URL。[欢迎拉取请求](https://github.com/jtulach/bck2brwsr/pulls)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T11:52:31.420

1.  使用码头服务器。`build`在 pom.xml 中的标记下添加 Jetty 插件，如下所示：

    ```
     <plugins>
        <plugin>
          <groupId>org.mortbay.jetty</groupId>
          <artifactId>jetty-maven-plugin</artifactId>
          <configuration>
            <scanIntervalSeconds>10</scanIntervalSeconds>
            <webApp>
              <contextPath>/shinchan</contextPath>
            </webApp>
          </configuration>
        </plugin>
    <!-- more plugin tags if any -->
    <plugins> 
    ```

2.  现在使用

    ```
     mvn clean install jetty:run 
    ```

3.  这将在端口 8080 启动 Jetty 服务器，您可以`http://localhost:8080/shinchan`在执行 mvn 命令的机器上使用 URL 访问。

**PS：**
有关更多详细信息，请在此处阅读 Jetty wiki：http: [//wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)
您可能需要考虑[`jetty:deploy-war`](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin#jetty%3adeploy-war__%3a__Running_a_pre-assembled_war)，但我认为这是一种矫枉过正。

# jquery - 通过jquery ajax函数更改url查询字符串

> ID：12726185
> 
> 赞同：0
> 
> 时间：2012-10-04T11:23:24.867
> 
> 标签：jquery, ajax, url, parameters, get

我在一个页面[http://www.sample.com/index.php](http://www.sample.com/index.php)

如何添加 URL 查询字符串。例如，当我单击按钮时 URL 变为[http://www.sample.com/index.php?value=10](http://www.sample.com/index.php?value=10)而无需重新加载页面。通过使用 jquery ajax 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:28:16.813

我认为您正在寻找 History API，请查看此[`history.js`](https://github.com/browserstate/history.js)库， [https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

**演示：** [http ://browserstate.github.com/history.js/demo/](http://browserstate.github.com/history.js/demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:34:58.160

新的 HTML 5 浏览器支持 History API（[浏览器支持](http://caniuse.com/#feat=history)，[W3C 规范](http://www.w3.org/TR/html5/history.html)）：

```
window.history.pushState(stateObj, title, url); 
```

在 HTML 5 之前的浏览器中，您可以设置哈希标记（[浏览器支持](http://caniuse.com/#feat=hashchange)，[W3C 示例](http://www.w3schools.com/jsref/prop_loc_hash.asp)）

```
window.location.hash = "state"; 
```

不支持更改哈希标签的旧浏览器无法使用此功能。

# algorithm - 通过主定理找到递归方程的闭端公式

> ID：12726189
> 
> 赞同：2
> 
> 时间：2012-10-04T11:23:54.177
> 
> 标签：algorithm, recurrence, asymptotic-complexity, master-theorem

我们能解决这个 **`T(n) = 2T( n/2 ) + n lg n`**递归方程主定理吗？我来自一个链接，他说我们不能在这里应用主定理，因为它不满足任何 3ree 案例条件。另一方面，他采取了另一个例子 **`T(n) = 27T(n/3) + Θ(n^3 lg n)`** 并找到了封闭的解决方案**`theta(n^3logn)`** 为了解决这个问题，他使用了主定理的第二种情况**`If f(n) = Θ(nlogba (lg n)k ) then T(n) ∈ Θ(nlogba (lg n)k+1) for some k >= 0`** 在这里我产生了困惑，为什么我们不能在这里应用第二种情况，而它完全适合第二种情况。 **我的想法：** a = 2 , b =2; let k =1 then f(n) = theta(n^log_2 2 logn) for k= 1 so T(n) = theta(nlogn) 但是正如上面提到的我们不能应用主定理我很困惑为什么不.

注意：这是由于 f(n) bcz in和 in * * 如果我在这里错了，请纠正我。**`T(n) = 2T( n/2 ) + n lg n`** `f(n) = nlog n`**`T(n) = 27T(n/3) + Θ(n^3 lg n)`***`f(n) = theta(n^3log n)`*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:43:40.027

使用主定理的案例 2 我发现

```
 T(n) = Theta( n log^2 (n)) 
```

您的链接指出，theroem 的案例 2 是：

```
 f(n) = Theta( n log_b(a)) 
```

而从其他几个链接，比如[来自 mit](http://people.csail.mit.edu/thies/6.046-web/master.pdf)的链接，情况是：

```
 f(n) = Theta( n log_b(a) log_k(n)) for k >= 0 
```

# fosuserbundle - 身份验证失败后 FOSUserBundle 重定向 | 注销后重定向

> ID：12726190
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:24:01.817
> 
> 标签：fosuserbundle

我为 Symfony2 使用 FOSUserBundle。身份验证失败和注销后如何更改页面重定向？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T18:59:17.283

您可以在 security.yml 中自定义表单登录：

例子：

```
 firewalls:
        main:
            form_login:
                failure_path: /login_failure_redirect
            logout:
                target: /logout_redirect 
```

# c# - 在 WPF 中触发继承？

> ID：12726191
> 
> 赞同：2
> 
> 时间：2012-10-04T11:24:02.380
> 
> 标签：c#, wpf, xaml

我有 2 个用于 WPF TabItem 控件的触发器，除了这一行之外，两者都是相同的：

```
 <Setter Property="Opacity" Value="0.8" /> 
```

有什么方法可以让 IsMouseOver 的触发器继承自 IsSelected 并简单地添加额外的设置器？如果可能的话，您能否提供一个示例

**完整的 XAML：**

```
<ControlTemplate.Triggers>
    <Trigger Property="IsSelected" Value="True">
        <Setter Property="Panel.ZIndex" Value="100" />
        <Setter TargetName="Border" Property="BorderThickness" Value="1" />
    </Trigger>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Panel.ZIndex" Value="100" />
        <Setter TargetName="Border" Property="BorderThickness" Value="1" />
        <Setter Property="Opacity" Value="0.8" />
    </Trigger>
</ControlTemplate.Triggers>
</ControlTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:49:58.270

触发器不会相互继承。你试图做的事情是不可能的。

您可以让样式相互继承，但不能让触发器继承。

# temp-tables - 从临时表中删除一行

> ID：12726193
> 
> 赞同：2
> 
> 时间：2012-10-04T11:24:07.020
> 
> 标签：temp-tables, progress-4gl, openedge

我有两个网格，在一个按钮上单击项目从网格 1 移动到网格 2。另一个按钮从网格 2 中删除选定的项目。

使用以下命令从屏幕中删除该行：

```
THIS-OBJECT:ultraGrid2:ActiveRow:Delete(). 
```

然而，这被保存并重新出现，因为它没有从临时表中删除，所以该行仍然出现。临时表称为 selectedFormula。我试过了：

```
DELETE FROM selectedFormula WHERE ultraGrid2 = ultraGrid2:ActiveRow. 
```

但是我收到错误消息“在“ultraGrid2 = ultraGrid2”之后无法理解。”。有没有人知道如何使用 ABL 从正在进行的临时表中删除项目？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:25:58.580

您将需要从 UltraGrid2 中的活动行中获取唯一键。使用该键，您可以在临时表中找到记录，然后像这样删除它。

```
FIND selectedFormula 
    WHERE selectedFormula.[key field] = [key from UltraGrid2]
    NO-ERROR.
IF AVAIL selectedFormula THEN
  DELETE selectedFormula. 
```

注意：键可以是多个字段，取决于您的表临时表定义和数据。

# microsoft-metro - Metro 应用程序中的 Dapper

> ID：12726197
> 
> 赞同：4
> 
> 时间：2012-10-04T11:24:20.420
> 
> 标签：microsoft-metro, windows-runtime, dapper

有没有办法将 Dapper 包含在 Metro 应用程序中？它依赖于 WinRT 中遗漏的 System.Data。如果没有，是否有任何类似的框架可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:42:13.950

> 有没有办法将 Dapper 包含在 Metro 应用程序中？

不。正如您所观察到的，缺少`System.Data`几乎是一个阻碍，但除此之外，WinRT 还省略了元编程支持，因此需要重新编写整个核心以使用常规（即慢速）反射。您可以通过一些精心制作的箍来解决这个问题，但没有`System.Data`它似乎是一个失败的原因。

基本上，WinRT 的目的（据我了解）是从 Web 服务之类的东西中使用您的数据，这是经典的“智能客户端”而不是“富客户端”模型。

所以你可能会考虑：

*   服务器（完整的 .NET）
    *   使用“dapper”进行数据访问
    *   暴露一些调用/序列化协议
*   客户端（用于 Windows 应用商店应用程序的 .NET，或今天的任何术语）
    *   消耗一些调用/序列化协议

*严格来说*，您*可以通过*IIRC 打破所有规则并仅引用 .NET，但这不会通过任何 MS 验证，也不会是合适的~~Metro~~ Windows Store 应用程序。

# java - 编译 XPath 表达式问题

> ID：12726199
> 
> 赞同：1
> 
> 时间：2012-10-04T11:24:25.643
> 
> 标签：java, xml, xpath

> **可能重复：**
> [从 Java 发送 XPath 变量](https://stackoverflow.com/questions/3170887/sending-xpath-a-variable-from-java)

当我运行这个表达式时：

```
 XPathExpression xpe = xpath.compile("//bb[name/text()='k2']/value"); 
```

它工作正常。

但是当我尝试像这样种植自己的变量（而不是'k2'）时：

```
 XPathExpression xpe = xpath.compile("//bb[name/text()=" + c_name +"]/value"); 
```

tt 不工作。

我认为问题在于工作表达式语法包含“k2”，而第二个不以这种方式出现。

任何想法如何正确种植变量？我尝试将 String 和 Character[] 都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:25:19.773

```
"//bb[name/text()='" + c_name +"']/value" 
```

请注意对 . 的引用周围的单引号`c_name`。

你可以争辩说，替代使用`String.format()`

```
 "//bb[name/text()='%s']/value".format(c_name) 
```

更具可读性。

正如 dogbane 所指出的，如果变量值本身包含引号，这将不起作用。有关更复杂但更安全的解决方案，请参阅[此 SO 答案](https://stackoverflow.com/questions/3170887/sending-xpath-a-variable-from-java)。

# objective-c - 锁定 Cocoa 中的嵌入式资源

> ID：12726205
> 
> 赞同：0
> 
> 时间：2012-10-04T11:24:46.890
> 
> 标签：objective-c, xcode, cocoa, embedded-resource, resourcebundle

我正在使用 Xcode 在 Cocoa 上进行开发。我想知道是否有一种方法可以锁定我的应用程序的嵌入式资源，例如徽标、图像、声音……所以没有人可以更改它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:30:09.513

可能最简单的方法是检查资源的时间戳，但这也很容易绕过。更好的方法是在启动时计算应用程序资源目录的哈希值，并与已知值进行比较。

如果任何资源已被修改，则哈希值会有所不同，您可以显示一条消息并退出。您可以在 Xcode 中使用自定义构建脚本步骤来计算哈希并使其在编译时可用，以便该过程全部自动化。

# linqpad - LinqPad 中的规范 Console.WriteLine

> ID：12726207
> 
> 赞同：20
> 
> 时间：2012-10-04T11:24:58.843
> 
> 标签：linqpad

Linqpad 的加强版 Console.WriteLine 很棒。但是，我怎样才能做一个标准的 Console.WriteLine 对象？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-06T14:09:13.070

`Debug.WriteLine`也会成功的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-04T11:26:07.700

嗯，现在很明显 - 放入一个明确的 ToString

```
Console.WriteLine(x.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-29T10:43:14.563

您还可以将这些方法添加到“我的查询”窗格中的“我的扩展”文件中。这样您就可以使用 .DumpToString 而不是 .Dump。也许它们应该重命名为 DumpDebug ...

```
// Write custom extension methods here. They will be available to all queries.
public static void DumpToString<T>(this IEnumerable<T> list)
{
    list.ToList().ForEach(x => Debug.WriteLine(x));
}

public static void DumpToString(this object o)
{
    Debug.WriteLine(o);
}

public static void DumpToString(this string o)
{
    Debug.WriteLine(o);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-10T13:15:20.423

你也可以做

```
x.Dump(); 
```

它将使用 LinqPad API 来漂亮地格式化输出。

# java - 在 PreferencesActivity 中选择时 CheckBoxPreference 不打勾

> ID：12726212
> 
> 赞同：0
> 
> 时间：2012-10-04T11:25:14.617
> 
> 标签：java, android, checkbox, sharedpreferences

当我单击“设置”页面时，我的 CheckBoxPreference 会在此阶段准确显示我想要的方式，但是当我选择它时，状态不会改变（即从未选中到选中）。

它似乎保留了 false （默认）的值，并且仍然以 false 作为传递的值运行 onPreferenceChanged。我在我的 onPreferenceChangedListener 中运行代码，该代码取决于更改的首选项的值。就目前而言，我在这里只有一个偏好。

activity_preferences.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceScreen>
        <CheckBoxPreference 
            android:summaryOn="true"
            android:summaryOff="false"
            android:key="isReg"
            android:title="Receive Push Messages"
            android:selectable="true"
            android:enabled="true"
            android:persistent="true" />
    </PreferenceScreen>
</PreferenceScreen> 
```

PrefsActivity.java：

```
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.Preference;
import android.preference.Preference.OnPreferenceChangeListener;
import android.preference.PreferenceActivity;

import com.google.android.gcm.GCMRegistrar;

public class PrefsActivity extends PreferenceActivity{

@Override
public void onCreate(Bundle savedInstanceState) {       
    super.onCreate(savedInstanceState);       
    addPreferencesFromResource(R.xml.activity_preferences);

    Preference isReg = (Preference) findPreference("isReg");
    isReg.setOnPreferenceChangeListener(new OnPreferenceChangeListener(){

        public boolean onPreferenceChange(Preference pref, Object arg1) {
            boolean isReg = getSharedPreferences("PREFERENCE", MODE_PRIVATE).getBoolean("isReg", false);
            if (isReg){
                ServerUtilities.register(getApplicationContext(), GCMRegistrar.getRegistrationId(getApplicationContext()));
            }
            else {
                ServerUtilities.unregister(getApplicationContext(), GCMRegistrar.getRegistrationId(getApplicationContext()));
            }
            return isReg;
        }

    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:53:34.833

根据代码示例，您使用了错误的首选项小部件，

```
Preference isReg = (Preference) findPreference("isReg"); 
```

它应该`CheckBoxPreference`像

```
CheckBoxPreference isReg = (CheckBoxPreference) findPreference("isReg"); 
```

**编辑** 我注意到的一件事，您没有正确处理首选项活动......请考虑此代码，始终调用首选项的`commit`方法以保存它！

```
public class PrefsActivity extends PreferenceActivity implements
                                   OnSharedPreferenceChangeListener{
CheckBoxPreference isReg;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.activity_preferences);
    PreferenceManager.setDefaultValues(this,R.xml.activity_preferences, false);
    isReg = (CheckBoxPreference)findPreference("isReg");
    if (isReg != null){
            isReg.setOnPreferenceChangeListener(new OnPreferenceChangeListener(){
                @Override
                public boolean onPreferenceChange(Preference preference,
                        Object newValue) {
                    boolean blnIsReg = Boolean.getBoolean(newValue.toString());
                    Editor e = _prefs.edit();
                    e.putBoolean("isReg", blnIsReg);
                    e.commit();
                    return true;
                }
            });
        }
    }
}

@Override
public void onStart(){
    super.onStart();
    _prefs = PreferenceManager.getDefaultSharedPreferences(this);
} 
```

实现的侦听器必须采用这种方式，这就是更改生效的方式：

```
@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
     Log.d(TAG, "onSharedPreferenceChanged; key = " + key);
} 
```

通过合并侦听器，logcat 将显示首选项的键确实正在更改，即“isReg”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:28:34.930

`onResume()` 从方法中的共享首选项更新值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:34:09.167

```
SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(PrefsActivity.this);
boolean isReg = prefs.getBoolean("isReg", false); 
```

希望试试这个它会帮助你

# php - 将 DIV 保存为图像

> ID：12726216
> 
> 赞同：4
> 
> 时间：2012-10-04T11:25:26.993
> 
> 标签：php, html, gd

我有：

```
echo"
<div id=IwantToSaveThisWholeDivAsAnImage)>
  <div id=OneOfMultipleDivs>
    <table>multiple tables rendered here
    </table>
  </div>
</div>"; 
```

我已经尝试过（其中之一）：

```
$html_code = " 
<html> 
  <head> 
   <title>Image</title> 
   <style> 
     body { 
     font-family:verdana; 
     font-size:11px; 
     color:black 
   } 
   </style> 
  </head> 
  <body> 
   my tables here
  </body> 
</html>";
$img = imagecreate("300", "600"); 
$c = imagecolorallocate($img, 0, 0, 0);
$c2 = imagecolorallocate($img, 255, 255, 255);
imageline($img,0,0,300,600,$c);
imageline($img,300,0,0,600,$c2);

$white = imagecolorallocate($img, 255, 255, 255); 
imagettftext($img, 9, 0, 1, 1, $white, "arial.tff", '$html_code'); 
header("Content-type: image/jpeg");
imagejpeg($img); 
```

我不允许使用外部库。读到它可以用 GD 完成，但到目前为止我一直没有成功。任何想法和帮助将不胜感激！UB

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:12:08.360

比我的评论更进一步解释：HTML 的呈现是由您的浏览器完成的。PHP 是服务器端的，所以它不知道如何呈现 HTML，也永远不会。这意味着您将需要可以渲染 HTML 并将渲染结果保存到图像的“东西”，而 PHP 可以与之“对话”。为此，[wkhtmltoimage](http://code.google.com/p/wkhtmltopdf/)有效（给它一个 URL，你最终会得到一个 JPG，然后你可以裁剪它）。我也听说过有关[phantomjs](http://phantomjs.org/)的好消息，它可能更适合您的目标，因为您可以“选择”某个 div。

如果您完全拒绝使用任何外部工具，那么您基本上没有选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:14:33.100

您可以使用[wkhtmltoimage 之类的工具进行渲染](http://code.google.com/p/wkhtmltopdf/)

由于它不是用 php 编写的，这意味着您可以将它安装在您的服务器上并从 php 运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:16:49.360

当然，您可以在 GD 中构建表格并编写文本，但不能使用 HTML - 您必须自己构建这些表格（有效地逐行绘制表格然后填写它们）

正如其他一些用户已经解释的那样，HTML 是在客户端呈现的，而不是在服务器端呈现的，您的 php 不知道这会是什么样子，因此您的 GD 也不知道。

# python - 窗口中进程打开的文件的名称？

> ID：12726218
> 
> 赞同：11
> 
> 时间：2012-10-04T11:25:28.383
> 
> 标签：python, c, windows, filesystems, windows-api-code-pack

如何在窗口中打印由某个进程（PID）打开的文件名？或所有进程 (PID) 当前打开一个文件。
**Process Explorer**是一个同样适用的实用程序。**但是没有提到它是如何工作的？**Windows 中存在 任何*/proc 文件系统之类的东西吗？*

```
Can we read any Window's Registry?  
I wants to write a programming code And I rarely work on windows. 
```

在 Python 中得到了两个解决方案：
1\. import psutil
2\. import win32api, win32con, win32process

但这对我来说仍然是一个问题！
1\. 这些库是如何工作的？
2\. 是否有任何寄存器、内存或虚拟文件系统保存这些信息？

> 如果它可能在窗口中，**为什么此信息不存在于任务管理器中？**

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-04T11:37:40.243

这是python中的平台独立解决方案。

```
 import psutil
   p = psutil.Process(os.getpid()) # or PID of process
   p.open_files() 
```

所以我推荐你[psutil](http://code.google.com/p/psutil/)包它有很好的功能来获取有关正在运行的进程的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:42:10.620

这是一种使用 Win32 API 从 pid 获取文件名的方法：

```
import win32api, win32con, win32process

handle = win32api.OpenProcess(win32con.PROCESS_ALL_ACCESS, False, pid) #get handle for the pid
filename = win32process.GetModuleFileNameEx(handle, 0) #get exe path & filename for handle 
```

这仅适用于 Windows（显然）。

# salesforce - Salesforce：我们可以使用 .Net 进行自定义吗？

> ID：12726219
> 
> 赞同：0
> 
> 时间：2012-10-04T11:25:44.903
> 
> 标签：salesforce, apex-code

我被要求对销售人员进行一些发展。无论如何使用.Net而不是Apex来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:10:31.047

这完全取决于您要做什么，您可以从 .NET 调用 Web 服务 API，但您不能在 salesforce 服务器上运行本机 .NET 代码。

# jboss - 使用 apache2 的 Jboss：在端口 8080 上调用的任何内容都应重定向到 80

> ID：12726221
> 
> 赞同：1
> 
> 时间：2012-10-04T11:25:45.457
> 
> 标签：jboss, port

在我的环境中，Jboss5 在同一物理服务器上配置了 apache2。所以

1.  http://my.domain.com:80/user/login -> 应用登录页面
2.  http://my.domain.com:8080/user/login -> 应用登录页面
3.  http://my.domain.com:8080/ -> Jboss 管理控制台。

现在，我的实际要求是将端口 8080 上的任何调用都重定向到 80。

1.  http://my.domain.com:80/user/login -> http://my.domain.com/user/login -> 应用程序登录页面 [目前工作正常]
2.  http://my.domain.com:8080/user/login -> http://my.domain.com/user/login -> 应用登录页面
3.  http://my.domain.com:8080/ -> http://my.domain.com/user/login -> 应用程序登录页面。

到目前为止我所做的是，通过元转发到应用程序登录页面更新了 ROOT.war/index.html，我几乎以某种方式固定了点＃3；但不正确！！我们有什么想法吗！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:33:32.520

您可以编写一个 servlet 过滤器来检查应用程序正在运行的端口。如果它在端口 8080 上运行，则将 response.sendDirect() 发送到正确的端口。

您需要在 web.xml 文件中配置 servlet 过滤器。

编辑：如果您没有更改 web.xml 文件的自由，我建议您采用最佳实践，即只让一种方式公开应用程序，即通过端口 80。您可以阻止从防火墙的外部网络访问端口 8080，以便所有流量都通过端口 80。最好让 apache2 完成其工作，始终作为反向代理服务器。如果您想稍后进行负载平衡，它也很有用。

# c# - 在服务器上将框架从 3.5 更改为 4.0

> ID：12726225
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:25:54.503
> 
> 标签：c#, web-config, .net-framework-version

我知道我的问题有点基本，但必须问这个：

我在 Visual Studio 2008 中使用 .Net 框架 3.5 构建了我的网站，该网站托管在我的服务器上。

现在由于某些特定原因，我必须将框架 4.0 安装到服务器。我只想知道我的网站是否可以接受。

我的意思是，如果我将我的框架从 3.5 更改为 4.0，那么我应该对我的站点进行一些更改，否则该站点将像以前一样运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:32:51.563

您还应该在您的网站的应用程序池中更改框架版本。 ![水池](../Images/acf30567f99b0c1ac0ca73e5cf83d215.png)

基本上，请记住框架版本！= CLR 版本。

在您的情况下，.NET Framework 3.5 = CLR 2.0 + (C# 3.0 | VB9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:33:01.800

.NET Framework 3.5 和 4.0 具有不同的 CLR 版本，可以并排安装在同一台机器上。

这意味着您的网站不会出现任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:33:47.750

在服务器上安装框架 4 没有问题。只要您不更改 IIS appPool 上的目标框架，您的站点就应该没问题。您可以在同一台机器上安装所有框架。

# plone - Plone 3.2 KUPU Image Caption 不可能

> ID：12726229
> 
> 赞同：0
> 
> 时间：2012-10-04T11:26:00.490
> 
> 标签：plone, wysiwyg, caption

我在 Plone 3.2 中使用 KUPU 为图像添加字幕时遇到了困难

我在 mysite.com/plone_control_panel 的“可视化编辑器”下启用了以下功能：

*   使用 UID 链接
*   允许带字幕的图像

浏览 KUPU 的“插入图片”框时，我可以选择一张图片。输入“文本等效”文本并勾选“标题”框。单击此框后，我的“文本等效”框就会消失，但不会出现任何其他内容，从而阻止我输入任何标题文本。

如果我勾选“标题”框并保存我的页面，我可以在我的 HTML 中看到以下内容：

```
<dl class="image-left captioned">
 <dt>
   <img width="400" height="299" title="PTA" alt="PTA" src="image.JPG">
 </dt>
 <dd style="width:400px" class="image-caption"></dd>
</dl> 
```

如您所见，它创建了必要的 HTML 我只是无法更改包含在

```
 <dd style="width:400px" class="image-caption"></dd> 
```

标签。

我的 Firebug 控制台中看不到任何与字幕相关的任何 JavaScript 错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:20:47.350

标题标签获取图像项的描述，因此要更改标题，您需要编辑图像本身并更改描述。

请注意，此值已缓存，因此您需要清除浏览器缓存以查看插入图像的页面重新加载时的变化。

# uibutton - 如何在 iPhone 上为按钮提供多个操作

> ID：12726230
> 
> 赞同：0
> 
> 时间：2012-10-04T11:26:02.313
> 
> 标签：uibutton

我有两个按钮，如果单击第一个按钮，则会出现两个文本字段，第二个按钮尺寸将更改为文本字段旁边。现在，如果我单击第二个按钮，则会出现一个文本字段。我做了所有这些事情。现在我的问题是如果我们单击第二个按钮，文本字段将显示我们给定的尺寸，但是如果我们在单击第一个按钮后单击第二个按钮，尺寸也应该改变。任何人都可以帮助做到这一点。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:04:44.763

您可以在一个按钮上为不同的控制状态添加多个选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T19:54:09.107

你的问题措辞含糊。如果我理解正确，当按下第二个按钮时，您需要根据之前是否按下第一个按钮来完成两个不同的操作。如果是这种情况，解决方案是定义一个布尔标志，当第一个按钮被按下时将设置为 YES，并在第二个按钮的操作完成后设置为 NO（如果需要）。

在你的头文件中：

```
@interface yourViewController: UIViewController {
    BOOL firstButtonFlag;
} 
```

在 yourViewController.m 文件中：

```
-(void)viewDidLoad {
     firstButtonFlag = NO; // technically redundant line, just to show the concept
}

-(IBAction)firstButtonPressed {
     firstButtonFlag = YES;
     // whatever action you want done
}

-(IBAction)secondButtonPressed {
     if (firstButtonFlag) {
          // whatever action if first button had been pressed before
          firstButtonFlag = NO;  // resetting the flag for next round
     }
     else {
          // whatever action if first button had NOT been pressed before
     }
} 
```

# jquery - 我的 jQuery 代码有任何语法错误吗

> ID：12726236
> 
> 赞同：-4
> 
> 时间：2012-10-04T11:26:21.027
> 
> 标签：jquery

是否有任何语法错误，因为它目前不工作？但是，如果评论 .click(check(seats[i])); 并取消注释 .click(deleteBooking); & .toggle(appendBooking, deleteBooking); .

提前致谢。干杯。

```
$(document).ready(function() {
function Seat(seat_xcoord, seat_ycoord, row_name, row_label, column_name, column_label){
this.seat_xcoord = seat_xcoord;
this.seat_ycoord = seat_ycoord;
this.row_name = row_name;
this.row_label = row_label;
this.column_name = column_name;
this.column_label = column_label;
this.state = false;

this.getState = function(){
return this.state;
}

this.setFstate = function(){
this.state = true;
}

this.setTstate = function(){
this.state = false;
}
}

function check(Seat){
if(Seat.getState==false){
appendBooking();
Seat.setTstate();
}else{
deleteBooking();
Seat.setFstate();
}
} 

var seats = new Array();    

var i =0;   
var price = 0;

$.get('seating_plan.xml', function(d){
$(d).find('seat').each(function(){
    var $seat = $(this);
    var seat_xcoord = $seat.attr("seat_xcoord");
    var seat_ycoord = $seat.attr("seat_ycoord");
    var row_name = $seat.attr("row_name");
    var row_label = $seat.attr("row_label");
    var column_name = $seat.attr("column_name");
    var column_label = $seat.attr("column_label");          
    var leftValue = seat_xcoord*20;
    var bottomValue = seat_ycoord*20;

    seats[i]= new Seat(seat_xcoord, seat_ycoord, row_name, row_label, column_name,   column_label);

    var $ticketRowDiv = $('<div id="ticket'+i+'"></div>'); //One row of ticket details
    var $ticketInfoDiv = $('<div class="ticket-item">'+row_name+column_name+'</div><div class="ticket-item">$15.50</div>');

    function deleteBooking(){
        $seatdiv.css("background-color","#42de18"); //change seat color back to green
        $ticketRowDiv.hide(); //hide the ticket details
        price = price-15.50; 
        $('#price h1').html('$'+price); //display total price
    }

    function appendBooking(){
        $seatdiv.css("background-color","#f64848"); //change seat color to red
        $('#details').append($ticketRowDiv); //add ticket details to sidebar
        $ticketRowDiv.show(); 
        price =price+15.50; 
        $('#price h1').html('$'+price);//display total price
        check(seats[i]);
    }

    function seatHover(){
        $(this).addClass("seat-hover");
    }

    function seatUnHover(){
        $(this).removeClass("seat-hover");
    }

    var $dltDiv = $('<div id="dlt_seat'+i+'" class="ticket-item"><a href="#">delete</a></div>')
                //.click(deleteBooking);
                .click(check(seats[i]));

    $ticketRowDiv.append($ticketInfoDiv); //append "seat No." and "sub Total" to a ticket details row
    $ticketRowDiv.append($dltDiv); //append "delete" link to a ticket details row

    var $seatdiv = $('<div id = "seat'+i+'" class="seat"></div>')
                .css({left: leftValue + 'px', bottom: bottomValue + 'px'})   //define seat location in seating map
                .hover(seatHover,seatUnHover)
                .click(check(seats[i]));
                //.toggle(appendBooking, deleteBooking); 

    $('#canvas').append($seatdiv); //add a seat to seating map
    i++;
});
}); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:34:35.803

您正在绑定函数的返回值`check`，而不是函数，因为函数不返回任何内容。

绑定一个调用该函数的匿名`check`函数：

```
.click(function(){ check(seats[i]); }); 
```

但是，您需要在代码周围创建一个闭包来捕获值`i`而不是变量本身，因为变量在事件发生之前会发生变化：

```
var $dltDiv = (function(i) {
  return $('<div id="dlt_seat'+i+'" class="ticket-item"><a href="#">delete</a></div>').click(function(){ check(seats[i]); });
})(i); 
```

# php - 为 mysql 会话设置 time_zone 不粘

> ID：12726240
> 
> 赞同：0
> 
> 时间：2012-10-04T11:26:41.210
> 
> 标签：php, mysql, timezone

在我的代码中，我将 MySQL 时区设置为 US/Pacific，结果如下：

```
Array ( [0] => SYSTEM [@@global.time_zone] => SYSTEM [1] => US/Pacific [@@session.time_zone] => US/Pacific ) 
```

但是，当我多次运行查询时，它有时会发生变化，例如

```
Array ( [0] => SYSTEM [@@global.time_zone] => SYSTEM [1] => US/Arizona [@@session.time_zone] => US/Arizona ) 
```

然后有时即使我设置了它，我在查询时也会看到这个

```
Array ( [0] => SYSTEM [@@global.time_zone] => SYSTEM [1] => SYSTEM [@@session.time_zone] => SYSTEM ) 
```

会话如何失去其 time_zone 设置？大多数时候它返回正确的值/时区，但第 4 次或第 5 次查询它是错误的时区。这是一个大问题，因为日期时间字段在返回时会考虑到这一点，从而弄乱了我对日期时间的进一步使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:30:15.873

`default_date_timezone_set`函数集仅更改脚本执行的时区。您可以将时区存储在会话变量中，并在每个页面的顶部设置时区。

# vb6 - 无法编辑现有项目中的模块

> ID：12726242
> 
> 赞同：1
> 
> 时间：2012-10-04T11:26:55.627
> 
> 标签：vb6, editor

我在 Visual Basic 6.0 中有一个现有项目。

当我尝试以项目的形式编辑任何代码块时，它会给出一个错误提示；

> 无法编辑模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:05:47.680

确保您没有以只读方式打开项目。转到项目属性并取消选中“只读”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T19:44:08.023

当我需要从 Visual Source Safe 取消绑定 VB6 项目时，我也遇到了这个错误。

正如本文所讨论的[，](http://support.microsoft.com/kb/282816)我需要删除 Vssver.scc 和 Mssccprj.scc 文件，然后如 Alex 所说，取消选中我的每个文件的只读属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T14:10:17.817

我也遇到了这个错误，解决方案是关闭所有文件，然后重新启动 Visual Studio 6 的实例。

# java - 使用 JDBC 的简单 Java 插入

> ID：12726244
> 
> 赞同：0
> 
> 时间：2012-10-04T11:26:56.873
> 
> 标签：java, sql, jdbc

我的数据库表架构类似于

```
DocumentID: Name1: Name2: Name3: Name4: Location1: Location2: Location3....:Organization1:.. 
```

现在我有 3 个具有上述值的 Hashset 可用（即，一个用于名称，一个用于位置，一个用于组织）

在循环的每次单次迭代中，这些哈希集都填充有上述值。

在每次迭代结束时，这些哈希集中的数据被删除并创建新的。

现在我的问题是在每次迭代中我必须从这些哈希集值中填充 sql 表行（每次迭代只有 1 行）。

我无法理解的是，如果我有硬编码字符串而不是简单地使用类似的东西：

```
String sql = "INSERT INTO Table " +
               "VALUES ('100', 'Zara', 'Akli', '18','100', 'Zara', 'Ali', '18')"; 
```

但是，我需要遍历每个哈希集并将所有 3 个哈希集的数据插入（类似于上面）一行中。我对如何写这样的陈述感到困惑。请记住，我的表最初是完全空的，所以我不能使用 where 子句（类似于“插入...... where documentID="23423"）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:36:49.197

假设您以这些方式创建了这些集合：

```
long DocumentId
names {"A", "B", "C"}
location {"1", "2", "3"}
and so on... 
```

我认为最简单的方法是动态构建要执行的 SQL：

```
{
...
    StringBuilder sb = new StringBuilder("insert into mytable (");
    List<Object> params = new ArrayList<Object>();

    addColumnAndValue(sb, "DocumentID", docIdYouHaveSomewhere, params);
    int i = 0;
    for (String name: names)
       addColumnAndValue(sb, ",name" + i, name, params);
    i = 0;
    for (String location: locations)
       addColumnAndValue(sb, ",location" + i, location, params);
    // now close the thing
    sb.append(") values (?");
    for (i = 1; i<params.size(); i++)
       sb.append(",?");
    sb.append("=");

    // and now sb.toString() will contain valid SQL and the param values for a PreparedStatement will be in params array-list:

    PreparedStatement ps = conn.prepareStatement(sb.toString());
    for (i=0; i<params.size(); i++)
       ps.setObject(i+1, params.get(i));

    ps.executeUpdate(); // voi là!
    ...

}

private void add addColumnAndValue(StringBuilder sb, String columnName, Object value, List<Object> params) {
   sb.append(columnName);
   params.add(value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:38:09.167

我想你需要先对你的 3 个“HashSet”做一些工作。

既然您说 3 Sets 中的数据最终将进入数据库中的单行。所以我建议将你的 3 hashset 转换为一个 Map，或者至少是一个 List，其顺序与 insert 语句中的字段相同。以便稍后您可以按名称或索引将这些值设置为 PS 的参数。

而且我从未见过像`"Insert into table values (....) where id=123"`你确定它会起作用的插入语句吗？

# java - 数组的结果为空？

> ID：12726247
> 
> 赞同：1
> 
> 时间：2012-10-04T11:27:14.187
> 
> 标签：java, arrays, methods

不久前我发布了一个问题，该问题得到了回答并帮助了我很多。抱歉这么快又发帖了。=/

我已经检查过了，不确定我做错了什么，打印的结果是几个“空”字。我正在尝试使用一种方法用文本文件中的数据填充二维数组。然后在主类中运行该方法以打印出填充的数组。

任何帮助将不胜感激，在此先感谢您。=)

主类：

```
public static void main(String[] args) throws IOException {

    ScoreProcessor scores = new ScoreProcessor();

    String[][] table = scores.readFile();

    for (int row = 0; row < table.length; row++) {
        for (int col = 0; col < table[row].length; col++) {
            System.out.print(table[row][col] + "\t");
        }
    }
} 
```

另一个类，包括方法：

```
 public class ScoreProcessor {

    static public String[][] readFile() throws IOException {

        File filedata = new File("src/JavaApp2/Data.txt");
        Scanner file = new Scanner(filedata);

        int row = 0, col = 0;

        String[][] scores = new String[8][5];

        while (file.hasNext()) {

            Scanner readfile = new Scanner(filedata);
            readfile.nextLine();
            readfile.useDelimiter(",");

            while (readfile.hasNext(",")) {
              String line =  readfile.next();

             line = scores[row][col] ;
                col++;
            } // end innerloop
            row++;
            col = 0;

        } // end outerloop

        return scores;
    } // end method
} // end class 
```

数据文件

```
Student,Q1,Q2,Q3,Q4
abcd0001,50,55,59,72
efgh0002,82,78,84,86
ijkl0003,42,45,46,52
mnop0004,66,74,72,78
qrst0005,82,86,89,88
uvwx0006,77,83,87,82
yzab0007,62,64,70,68 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:43:09.497

线

`while (file.hasNextInt())`

将返回`false`。因此，您的数组将不会用数据初始化并返回`null`打印。

我建议您检查是否 `readfile.nextLine()`退货`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:02:50.323

正如其他人指出的那样， file.hasNextInt() 返回 false，因为您正在阅读的行不是 int。由于它为空，因此您的代码永远不会进入循环，并且不会提供数据。

```
 Scanner readfile = new Scanner(filedata);
   String line1 = readfile.nextLine();
   readfile = readfile.useDelimiter(","); 
```

不要再次打开文件，只需读取每一行并用'，'分割它

```
String line = file.nextLine();

for (String each: line.split(",")) {
   scores[row][col] = each;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:32:36.423

试试这个：

```
 public class ScoreProcessor {

        public static String[][] readFile() throws IOException {

            File filedata = new File("src/JavaApp2/Data.txt");
            Scanner file = new Scanner(filedata);

            int row = 0;

            String[][] scores = new String[8][5];

            while(file.hasNextLine()){
                String line=file.nextLine();
                scores[row]=line.split(",");
                row++;
            }

            return scores;
        } 

        public static void main(String[] args) throws IOException {

            String[][] table = readFile();

            for (int row = 0; row < table.length; row++) {
                for (int col = 0; col < table[row].length; col++) {
                    System.out.print(table[row][col] + "\t");
                }
                System.out.print("\n");
            }
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:43:27.343

查看[hasNextInt()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextInt%28%29)的定义。如果下一个标记不可解释为 int，它将返回 false。

在我看来，您的文件以“Student”开头，或者如果您跳过标题行，则以“abcd0001”开头，但不是int。所以`hasNextInt()`会立即返回 false ，并且你的内部循环永远不会被执行。

除此之外，我不清楚为什么要实例化 second `Scanner`。

使用调试器可以很容易地跟踪这样的问题，我建议您熟悉这种方法:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T11:46:16.880

使用 file.hasNext() insted of file.hasNextInt() 它应该可以解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T12:40:20.260

这不也是问题的核心（除了 HasNextInt()）吗：

```
line = scores[row][col] ; 
```

应该是其他方式。这样你的数组将永远不会被填充，当然总是只包含空值。

```
scores[row][col] = line; 
```

# css - 将 div 元素与垂直居中的内容对齐，而不考虑分辨率

> ID：12726248
> 
> 赞同：1
> 
> 时间：2012-10-04T11:27:26.127
> 
> 标签：css, asp.net-mvc-3, visual-studio-2010, html, c#-4.0

我有一个应用程序，其中我对 div 元素感到困扰。

我有包含内容的 div，其中包含许多 div、span 和一些 img 标签。

无论屏幕分辨率和浏览器如何，我都需要将 div 元素的内容垂直居中。

我试过这样：

```
<div style="padding-top: 4%;position:fixed;height:2%;>
my content
</div> 
```

这在我所有的浏览器（FF、IE、CHROME、SAFARI）中都能完美运行。

但是，这不适用于我朋友的电脑，他的显示器不是宽屏显示器。

请建议我使用理想的 css 来处理任何类型的分辨率。

编辑：`my content`包含一些水平对齐的 div，其中一些彼此相邻。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:06:51.727

以像素为单位设置分割高度，并添加：

```
div
{
    height:100px; // your height
    width:100px; 
    top:50%;
    margin-top:-50px; // half of your height
    position:fixed;
} 
```

不需要填充或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:57:19.170

尝试：

```
<div style="margin:auto;">
    my content
</div> 
```

# c# - 使用隧道而不是冒泡的 RoutedCommands

> ID：12726266
> 
> 赞同：3
> 
> 时间：2012-10-04T11:28:34.913
> 
> 标签：c#, wpf, command, routed-commands, tunneling

我有一个自定义控件 ( `MyControl`)，它公开了一个自定义命令。我希望父母`Window`能够调用这个命令，并且所有人都`MyControls`应该对它做出反应。

我已将该命令添加到`MyControl`的`CommandBindings`集合中，该集合还提供了一个`CanExecute`始终返回 true 的回调。

我的问题是调用此命令的菜单项永远不会启用。我假设这是因为菜单`MyControls`在可视树的上方，但老实说，我对`RoutedUICommand`' 范围的确切工作方式有点模糊。

有人可以澄清我做错了什么，或者这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:16:11.910

是的，关键是您的自定义命令的 CommandBinding 低于可视树中的菜单项。来自[msdn](http://msdn.microsoft.com/en-us/library/system.windows.input.commandbinding.canexecute.aspx)

> 当调用 RoutedCommand 上的 CanExecute 方法时，会在命令目标上引发 PreviewCanExecute 事件。如果未处理该事件，则会引发 CanExecute 事件。如果命令目标具有该命令的 CommandBinding，则调用该 CommandBinding 的 CanExecute 处理程序。**如果命令目标没有命令的 CommandBinding，CanExecute 事件会在元素树中冒泡，搜索具有与命令关联的 CommandBinding 的元素。**

[此链接](http://msdn.microsoft.com/en-us/magazine/cc785480.aspx#id0190118)中有关命令的非常好的文章。

无论如何，您可以使用 CommandTarget 菜单项中的命令，例如

```
<MenuItem Header="Click me"  Command="local:CommandClass.MyCustomCommand" CommandTarget="{Binding ElementName=myCustomCtrl}" /> 
```

以这种方式，特定的命令源（菜单项）将命令定向到特定的目标（自定义控件的实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:07:56.723

我猜命令在这里是错误的意思。

命令用于将不同的命令触发源捆绑到一个命令处理程序。所以命令是从不同的控件、菜单等触发的，但调用的是相同的命令处理程序。

事件有点相反。一个源可以触发多个事件处理程序。

在您的特殊情况下，我更喜欢一个事件，并且您的 UI 树下的控件将比听隧道事件或冒泡事件。

# android - 适用于 Android 的日历/时间线控件

> ID：12726268
> 
> 赞同：0
> 
> 时间：2012-10-04T11:28:42.247
> 
> 标签：android, xamarin

我正在寻找适用于 android 的日期/时间线控件。类似于以下内容：

![iOS 中的日视图](../Images/56076ee9f1f77a593d4aa6aee71dd3d6.png)

有人可以指出我正确的方向吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:33:11.333

我基本上对以下代码示例进行了一些更改并使其正常工作：

[http://w2davids.wordpress.com/android-simple-calendar/](http://w2davids.wordpress.com/android-simple-calendar/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:30:26.543

[Google IO 会议应用程序](http://code.google.com/p/iosched/)具有类似的 UI 。检查那个。

# java - java basic：为什么Template只能接受一维变化？

> ID：12726275
> 
> 赞同：0
> 
> 时间：2012-10-04T11:28:48.837
> 
> 标签：java, c++, templates

我将私有变量声明为

```
private List<MultipartFile> files; 
```

当我想初始化它时，我这样做：

```
files=new ArrayList<CommonsMultipartFile>(); 
```

你可以看到 CommonsMultipartFile 扩展了 MultipartFile 接口编译给我的错误是：

```
Type mismatch: cannot convert from ArrayList<CommonsMultipartFile> to List<MultipartFile> 
```

有谁知道原因吗？如果我真的想稳定集合和内部类类型，我该怎么做？我可以在 C++ 中做类似的工作人员吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:46:45.517

继承原则不适用于类型参数。

```
List<MultipartFile> files=new ArrayList<MultipartFile>(); 
```

=> 完全有效。

```
List<MultipartFile> files=new ArrayList<CommonsMultipartFile>(); 
```

=> 完全错误。

**为什么编译器不允许这样做？**

假设您创建一个`ArrayList<CommonsMultipartFile>`，您希望只有`CommonsMultipartFile`元素。没有惊喜，直到那里。

如果编译器允许您将其分配`ArrayList`给`List<MultipartFile>`作为引用类型，则没有什么可以阻止您`ArrayList`使用一些扩展`MultipartFile`甚至不同于`CommonsMultipartFile`!

问题是您最初期望只有`CommonsMultipartFile`元素。

所以java语法不会让这样的惊喜出现……

此外，这样做`private List<? extends MultipartFiles> files`是可行的，**但在逻辑上会阻止您将某些对象添加到其中，原因与我解释的相同！**对此要小心，因为它经常被误解。

如果您想在之后使用此引用类型在其中添加对象`? extends`，您将更愿意使用通配符而不是通配符。`private List<? super CommonsMultipartFile>``CommonsMultipartFile`

无论如何，由于您仅分配`ArrayList`with`CommonMultipartFile`对象，因此层次结构中没有更高的对象，因此在这种情况下最合适的语法是：

```
List<MultipartFile> files=new ArrayList<MultipartFile>(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T11:43:26.130

如果我没记错的话，在java泛型中：

如果你有两个类`A`，一个类`B extends A`和一个泛型`class Generic<T>`，那么`Generic<B>`就不用extends `Generic<A>`。这就是为什么你的演员不起作用。

您可以声明`files`为：

```
private List<? extends MultipartFiles> files; 
```

有了这个，你应该能够完成你的任务。

编辑：正如在其他回复中所说，此声明将阻止添加除`null`. 确实是兴趣有限...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:50:57.883

如果您希望能够将列表与 MultipartFile 的任何子类型一起使用，请将两个通用参数设为 MultipartFile。如果您只想将它​​与 CommonsMultipartFile 一起使用，请将两个参数都设为 CommonsMultipartFile。在极少数情况下，您从未通过此引用将任何内容放入此列表，您可以改为：

```
List<? extends MultipartFile> files = ... 
```

您可以从列表中获取项目，它们始终是 MultipartFile 的子类型，但您只能添加 null。

# c# - 使用 TimeZone 更改转换时间

> ID：12726278
> 
> 赞同：1
> 
> 时间：2012-10-04T11:28:58.343
> 
> 标签：c#

我对日期时间转换有疑问，代码如下

```
DateTime indianStd = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "India Standard Time");
DateTime MyanmarStd = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "Myanmar Standard Time");
DateTime SEAsia = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "SE Asia Standard Time");
DateTime dtConvertedDT = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(MyanmarStd, "India Standard Time"); 
```

当我在标签上打印这些时间时

indianStd 显示时间 4:30:45；

ConvertedDt 在哪里显示 5:30:45 为什么这个一小时的差异
可以任何人告诉我原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:07:50.670

```
 DateTime indianStd = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "India Standard Time");

   DateTime MyanmarStd = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "Myanmar Standard Time");

DateTime SEAsia = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(DateTime.UtcNow, "SE Asia Standard Time");

 DateTime ConvertedDt = TimeZoneInfo.ConvertTimeBySystemTimeZoneId(MyanmarStd, "Myanmar Standard Time", "India Standard Time"); 
```

这将返回当前的日期时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:33:32.530

因为他们是不同的时区？ [http://www.happyzebra.com/timezones-worldclock/India-and-Myanmar.php](http://www.happyzebra.com/timezones-worldclock/India-and-Myanmar.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:33:52.543

IST与缅甸时差为1小时。

IST 是 UTC + 5.30 小时
缅甸（仰光）是 UTC + 6.30 小时

要确认这一点，只需检查您的计算机日期和时间 -> 时区设置。

![在此处输入图像描述](../Images/f09423f00825e240da2d58ab91230a63.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:34:11.430

检查`Kind`缅甸对象的属性。将其设置为本地。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:31:18.000

尝试这个：

```
public DateTime ConvertToIndianDateTime()
{

var myanMarDateTime = your myanmar date time
myanMarDateTime.Kind = DateTimeKind.Local; 
var indianTimeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById("India Standard Time");

return TimeZoneInfo.ConvertTime(myanMarDateTime, indianTimeZoneInfo, TimeZoneInfo.Local);
} 
```

# java - 在特定位置向 JFrame 添加 2 个对象

> ID：12726284
> 
> 赞同：0
> 
> 时间：2012-10-04T11:29:16.953
> 
> 标签：java, multithreading, swing, concurrency, event-dispatch-thread

这是我的课程，它创建具有特定 x 和 y 坐标的圆形。同样，我有另一个相同的类，但 x 和 y 坐标位置不同。我为每个类创建 1 个对象，并希望在 JFrame 上的特定位置显示它们。当我将第二个对象添加到 JFrmae 时，它​​会覆盖第一个对象。我尝试了不同的 JFrmae 布局，但没有奏效。

```
 class Ballbewegung2 extends JPanel implements Runnable {  
    int x_pos = 10; int y_pos = 100; int radius = 20; 
    public void init() { 
    setBackground (Color.blue); } 
    public void start () { 
    Thread th = new Thread (this); 
    th.start (); } 
    public void run () { 
    Thread.currentThread().setPriority(Thread.MIN_PRIORITY); 
    while (true) { 
       x_pos ++; if(x_pos >= 400) x_pos = 10; 
       repaint();
       try { Thread.sleep (20); } 
       catch (InterruptedException ex) {}       thread.currentThread().setPriority(Thread.MAX_
PRIORITY); } } public void paint (Graphics g) { g.setColor (Color.red); g.fillOval (x_pos - radius, y_pos - radius, 2 * radius, 2 * radius); } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:40:25.827

如果您将 JFrame 的布局设为 null，您将能够显式控制您添加的任何组件的位置。还要确保您正在添加到 JFrame 的内容窗格中。

# windows-services - 无法在本地计算机上启动 sphinx 搜索服务？

> ID：12726285
> 
> 赞同：1
> 
> 时间：2012-10-04T11:29:17.317
> 
> 标签：windows-services, sphinx

我得到这个

> Windows 无法在本地计算机上启动 SphinxSearch 服务。
> 
> 错误 1067：进程意外终止。

我从这里得到了安装说明。

[http://blog.robbsnet.com/2011/07/how-to-install-and-implement-sphinx.html](http://blog.robbsnet.com/2011/07/how-to-install-and-implement-sphinx.html)

构建过程已完成，但是当我启动 sphinx 搜索服务时出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:56:05.153

尝试从命令提示符手动运行 searchd。也许它会给你一个有用的错误信息。

也尝试查看 searchd.log

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-13T16:06:17.957

对于仍然遇到 Windows 服务问题的任何人：

1.  确保您的配置对于数据库和路径都是正确的，并且创建了所需的文件夹和文件。

2.  确保服务“命令”匹配正确的路径和文件，为此您必须：

运行管理工具，点击本地服务，然后找到 SphinxSearch。单击其属性并阅读服务尝试执行的行。如果配置路径与 service start 命令不匹配，则启动失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T14:14:23.090

仅供参考，这也可能发生，因为您的搜索数据文件已损坏。简单的解决方法是核对文件并重新填充它们。

# android - 在 Android 上自定义切换按钮

> ID：12726289
> 
> 赞同：4
> 
> 时间：2012-10-04T11:29:41.297
> 
> 标签：android, togglebutton

我使用选择器定义的可绘制对象自定义了切换按钮。我使用这个drawable作为切换按钮的背景。

```
<ToggleButton
    android:id="@+id/mailbox:toggle_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:layout_weight="1"
    android:background="@drawable/toggle_background"
    android:gravity="center_horizontal|center_vertical" /> 
```

toggle_background 在这里定义：

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item
            android:drawable="@drawable/img1"
            android:state_checked="true" />
        <item
            android:drawable="@drawable/img2"
            android:state_checked="false" />    
    </selector> 
```

问题是图像总是被拉伸。有没有办法为未拉伸的两种状态定义图像？

我需要的是一个可以拉伸的背景，并且在按钮的中心有一个不能拉伸的图标。

可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T09:22:05.473

这是我的最终解决方案。

在布局中：

```
<ToggleButton
    android:id="@+id/mailbox:toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"     
    android:background="@drawable/toggle_drawable_layers"/> 
```

在 toggle_drawable_layers.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/toggle_drawable_bkg"></item>
    <item android:left="10dp" android:drawable="@drawable/toggle_drawable_left"
          android:gravity="center_vertical|center_horizontal" />
</layer-list> 
```

在 toggle_drawable_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="true">
        <bitmap android:src="@drawable/bitmap_checked"
          android:gravity="center_vertical|center_horizontal" />
    </item>
    <item android:state_checked="false">
        <bitmap android:src="@drawable/bitmap_unchecked"
          android:gravity="center_vertical|center_horizontal" />
    </item>        
</selector> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T11:41:48.110

我以这种方式完成了相同的任务，按钮：

```
 <ToggleButton  android:id="@+id/mlAbout"
            android:textOn="@string/about"
            android:textOff="@string/about"
            android:background="@drawable/ml_about" /> 
```

@drawable/ml_about：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:drawable="@drawable/list_bg_top"></item>
    <item android:left="10dp">
        <bitmap android:src="@drawable/waiting_status_btn"
          android:gravity="center_vertical|left" />
    </item>
</layer-list> 
```

@drawable/list_bg_top 将被拉伸的背景图像，@drawable/waiting_status_btn 是不会被小部件拉伸的图标

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-11T13:23:58.967

只需在选择器中使用位图而不是可绘制对象（无需使用图层）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:drawable="@drawable/img1"
        android:state_checked="true" />
    <item
        android:drawable="@drawable/img2"
        android:state_checked="false" />    
</selector> 
```

另外，不要忘记在 ToggleButton 声明中声明 android:textOff="" android:textOn=""

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T11:40:37.487

[这](http://www.coderzheaven.com/2012/05/20/create-custom-toggle-button-android/)和[这](http://www.mokasocial.com/2011/07/sexily-styled-toggle-buttons-for-android/)肯定会帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T20:29:50.663

还有另一种克服拉伸问题的方法：

只需将图像转换为[九补丁图像](http://developer.android.com/tools/help/draw9patch.html)，其中可拉伸区域就在图像的所有侧面。

然后Android只会在不可见区域拉伸图像，并保持可见图像不变。

# php - PHP - 按标题名称获取 CSV 块

> ID：12726290
> 
> 赞同：0
> 
> 时间：2012-10-04T11:29:47.480
> 
> 标签：php, arrays

我有一些不同的 CSV 文件，其中包含由 WR 分隔的输入块

我想用数据制作四个单独的数组。

例如。

```
Datum;Uhrzeit;WR;Status;SolIrr;TmpMod;TmpAmb;Wind;DaySumIrr;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac 
```

将是四个阵列。

```
WR;Status;SolIrr;TmpMod;TmpAmb;Wind;DaySumIrr;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac; 
```

然后将这四个数组插入到四个不同的 MySQL 表中。

我已经成功地将标题正确拆分为四个数组，但是我不知道如何将 csv 中的每一行数据拆分为单独的数组。

我希望我说得通。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:32:35.773

如果我正确理解您的需求，您可以使用 php 中的[explode](http://php.net/manual/en/function.explode.php)方法将您的字符串从 csv 文件拆分为一个数组。使用 ; 作为分隔符:)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:08:40.360

根据我从您的问题中了解到的情况，这是我提出的解决方案。首先，根据 headers 获取 WR 的排序方式，然后生成偏移长度键值对。使用该键值对对从每个 csv 行分解的数据数组进行切片。

```
<?php

  $headers = "Datum;Uhrzeit;WR;Status;SolIrr;TmpMod;TmpAmb;Wind;DaySumIrr;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac";
  $headers_arr = explode(";", $headers);

  // track where WR is positioned in the array
  $WR_offset = array();
  foreach ($headers_arr as $i => $value) {
    if ($value == "WR") { $WR_offset[] = $i; }
  }
  $WR_offset[] = count($headers_arr); // assume imaginary WR as last header

  // loop through the WR_offset array,
  // to get the WR position, and the number of fields before the next WR position
  // to be used in array_slice
  for ($i = 0; $i < count($WR_offset) - 1; $i++) {
    $offset = $WR_offset[$i] + 1; // 
    $length = $WR_offset[$i+1] - $WR_offset[$i] - 1;
    // store the offset and length as key-value pair
    $slice_params[$offset] = $length;
  }

  // assuming $lines contains the CSV data rows, and $line is a single CSV data row
  foreach ($lines as $line) {
    $row_array = explode(";", $line);
    // loop through the generated offset-length value pair
    foreach ($slice_params as $offset => $length) {
      $array_chunks = array_slice($row_array, $offset, $length);
      // do what you want to do with the chunk here
    }
  }

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:37:08.343

使用这样的内置`explode`函数：

```
<?php

$string = 'WR;Status;SolIrr;TmpMod;TmpAmb;Wind;DaySumIrr;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;
WR;Pac;DaySum;Status;Pdc1;Pdc2;Pdc3;Udc1;Udc2;Udc3;Temp;Uac;';

# convert into lines
$lines = explode( PHP_EOL, $string );

# convert into items
$items = array();
foreach ( $lines as $line ) {
    $items[] = explode( ';', $line );
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:37:58.307

你可以通过`exploding`数组来做到这一点

```
$filename=explode(";",$string); 
```

# objective-c - 添加启用 Voice Over 的手势识别器

> ID：12726293
> 
> 赞同：3
> 
> 时间：2012-10-04T11:30:09.693
> 
> 标签：objective-c, ios, gesture, gesture-recognition, voiceover

我正在测试启用 VoiceOver 的手势。我有一个包含 UITableView 实例的视图，其中设置了属性 allowMultipleSelection=YES。我添加了 UITapGestureRecognizer 的实例来查看：

```
UITapGestureRecognizer *doubleTapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(onDoubleTap)];
doubleTapRecognizer.numberOfTapsRequired = 2;
doubleTapRecognizer.numberOfTouchesRequired = 1;
doubleTapRecognizer.cancelsTouchesInView = YES;
doubleTapRecognizer.delaysTouchesBegan = YES;
[mainView addGestureRecognizer:tapRecognizer]; 
```

当我点击 3 次（再点击 1 次）时，这适用于启用的 VoiceOver。但是，如果我选择单元格（在 VoiceOver 模式下双击）而不是单元格被选中，但我有没有选择单元格信息的语音消息（当我点击一次已经选择的单元格时 - 我有正确的信息）。当我设置 doubleTapRecognizer.delaysTouchesBegan = NO 时，选择和语音消息在 VoiceOver 模式下是可以的，但是当我进行 3 次点击时，我的方法 onDoubleTap 被调用，但最后一个焦点单元格也被选择/取消选择（如 2 次点击）。所以这个解决方案对我来说不能正常工作。

我在 Iphone 用户指南中发现，在 VoiceOver 模式下，定义了 3 次点击：“三次点击：双击一个项目。” - 所以它是保留的。我尝试将水龙头更改为 numberOfTapsRequired = 3; - 但它在 VoiceOver 模式下不起作用 - 我测试了当我将一根手指放在屏幕上并用第二根手指轻敲 3 次时它可以工作。这应该如何以适当的方式完成？以及在哪里可以找到更多信息如何在 VoiceOver 模式下处理手势以做出正确的解决方案（例如，如果我添加其他手势，如长按，它应该如何在画外音模式下触发）。

——
问候
亚当

# java - 在 JComboBoxes 数组中选择一个会触发所有操作

> ID：12726294
> 
> 赞同：2
> 
> 时间：2012-10-04T11:30:11.260
> 
> 标签：java, arrays, swing, actionlistener, jcombobox

我在 for 循环中创建了一个组合框数组，如下所示：

```
for(int i = 0; i < 5; i++) {
  ...
  comboStudy[i] = new JComboBox(studyModel);
  comboStudy[i].addActionListener(new studyListener());
  comboStudy[i].setActionCommand("" + i);
  ...
} 
```

监听器是一个实例内部类：

```
public class studyListener implements ActionListener {
  public void actionPerformed(ActionEvent evt) {  
    int i = Integer.parseInt(evt.getActionCommand());

    // do some stuff that requires i and also access 
    // to the instance members of the containing class
  }
} 
```

我现在面临的问题是，每当我在运行时在 comboStudy[0] 中进行选择时，动作事件都会被触发 5 次。第一次 i 为 4，每次递减，直到变为 0。

我也尝试过使用 ItemListener，但它也有同样的问题。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:59:45.387

这是因为您在所有 JComboBoxes 中都使用**相同的。** `ComboBoxModel`

每个`JComboBox`都是 的侦听器，`ComboxBoxModel`并且`ComboBoxModel`每当数据模型发生更改时，都会通知每个侦听器。当您在 a 中选择一个项目时`JComboBox`，这些`ComboBoxModel`更改又会触发每个`JComboBox`. 这就是为什么您会看到每个`JComboBox`.

# java - 如何使用java从arraylist中获取5条记录

> ID：12726295
> 
> 赞同：0
> 
> 时间：2012-10-04T11:30:14.233
> 
> 标签：java, for-loop, arraylist

有人可以帮我完成这项工作。

我有 3 个数组列表

```
ArrayList alDeposits = new ArrayList(); 
ArrayList alWithDrawals = new ArrayList(); 
ArrayList alChecks = new ArrayList(); 
```

假设所有这三个数组列表都具有 n 长度。现在我的问题是如何使用 for Loop 从这三个 arrayList 中读取 5 条记录，直到最后一个索引。
例如

```
alDeposits.length = 8; 
alWithDrawals.length = 7; 
alChecks = 13; 
```

对于第一个 for 循环运行，我将从 alDeposits 获得 5 条记录，并且与 alWithDrawals、alChecks 相同

我将第二次从 alDeposits 获得 3 条记录，从 alWithDrawals 获得 2 条记录，从 alChecks 获得 5 条记录

对于第三次循环运行，我将从 alDeposits、alWithDrawals 获得 0 条记录，从 alChecks 获得剩余的 3 条记录

我不确定我的解释是否清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:40:26.853

只需维护 3 个柜台即可浏览您的清单

```
 int i1 = 0;
    int i2 = 0;
    int i3 = 0;
    ArrayList alDeposits = new ArrayList();
    ArrayList alWithDrawals = new ArrayList();
    ArrayList alChecks = new ArrayList();

    do {
        ArrayList<Object> result = new ArrayList<Object>();
        for (int i = 0; i1 < alDeposits.size() && i < 5; i1++) {
            result.add(alDeposits.get(i1));
            i++;
        }
        for (int i = 0; i2 < alWithDrawals.size() && i < 5; i2++) {
            result.add(alWithDrawals.get(i2));
            i++;
        }
        for (int i = 0; i3 < alChecks.size() && i < 5; i3++) {
            result.add(alChecks.get(i3));
            i++;
        }
        //now do something with result
    } while (i1 != alDeposits.size() || i2 != alWithDrawals.size() || i3 != alChecks.size()); 
```

关键观察是不要在连续读取之间重置您的计数器`i1`（`i2`和）。`i3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:11:57.387

```
//You will need to create a 'max(a, b, c)' method, this is pseudo-code
maxSize = max(alDeposits.size(),alWithDrawals.size(),alChecks.size());

//increment index with step=5
for(int index = 0;index < maxSize;index += 5){

    //get 5 records or less
    for(int i=index; i<(index+5) && i<alDeposits.size(); i++)
        alDeposits.get(i);
    for(int j=index; j<(index+5) && j<alWithDrawals.size(); j++)
        alWithDrawals.get(j);
    for(int k=index; k<(index+5) && k<alChecks.size(); k++)
        alChecks.get(k);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:38:23.097

在某种程度上你已经回答了你自己的问题，这正是你得到它的方式！！！

首先，您应该使用堆栈或队列而不是数组列表，您可以在其中使用 pop() 和 push()。

然后简单地检查堆栈/队列的大小，如果它大于 = 到 5 pop() 5 次，否则 pop() 0 - stack.size() 次。

如果 stack.size() 已经为零，则移动到下一个堆栈。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T11:42:31.603

如果我很好地理解了您的问题，那么对您的问题的一种回答是：

```
 ArrayList alDeposits = new ArrayList(); 
      ArrayList alWithDrawals = new ArrayList(); 
      ArrayList alChecks = new ArrayList();  
      while (!alDeposits.isEmpty() || !alWithDrawals.isEmpty() || !alChecks.isEmpty()) {
      //get record 5 times until list is empty
        for (int i=0 ; i<5; i++) {
          if (!alDeposits.isEmpty()) {
            alDeposits.remove(0);//get record
          }
          if (!alWithDrawals.isEmpty()) {
            alWithDrawals.remove(0);//get record
          }
          if (!alChecks.isEmpty()) {
            alChecks.remove(0);//get record
          }
        }
      } 
```

# jquery - 事件 'change' 未在 'selectedIndex' 更改时触发 当我在我的用户界面上手动更改 <select>值时正确触发了 changeevent，但是像这样设置所选索引... this.selectedIndex = 0; ...不会触发附加的事件。我应该将更改绑定到哪个事件？除了手动触发更改事件之外，还有其他解决方法吗？（即： $(this).change(); 设置所选索引后。）您可以尝试通过代码触发它： $(this).trigger('change'); ID：12726297 赞同：4 时间：2012-10-04T11:30:23.863 标签：jquery, events, html-select 回答 #1 赞同：6 时间：2012-10-04T11:32:44.360 您可以尝试通过代码触发它： $(this).trigger('change'); 回答 #2 赞同：1 时间：2012-10-04T11:33:08.567 设置好后.selectedIndex，执行以下操作触发 onchange 事件： $('#yourselect').trigger('change');</select>

# c# - MonoTouch/Objective-C - 检测当前可见的 UIImageView 有多少

> ID：12726298
> 
> 赞同：0
> 
> 时间：2012-10-04T11:30:23.513
> 
> 标签：c#, objective-c, ios, xamarin.ios, uiimageview

我有一个 UIImageView 作为 UIScrollView 的子视图，图像视图使用 CGBitmapContext 填充，该 CGBitmapContext 使用 DrawTileAtIndex 方法绘制。

为了提高性能，我只想绘制那些可见的图块，有什么方法可以检测到我的 UIImageView 有多少当前对用户可见？IE 什么区域、像素等 如果是这样，我该如何检测以绘制正确的图块？

*   CATiledLayer 不是一个选项。

提前致谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:55:14.487

假设您有一个大于任何时候都可以查看的图像，然后创建一个 UIView 子类，并将图像作为属性。当您收到 drawRect: 时，您可以使用传入的 rect 来测试您的图块，并且只有那些与该 rect 重叠的图块需要被绘制。

您可以使用“CGRectIntersectsRect”函数进行测试。

# solr - 在 Solr 响应中返回行号

> ID：12726307
> 
> 赞同：0
> 
> 时间：2012-10-04T11:30:58.820
> 
> 标签：solr

在 Solr 查询的响应中，是否有可能在结果出现的位置也返回文档中的行号？那会是格式化程序之一的角色吗？如果是这样，您如何启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:15:07.457

您正在寻找的是[突出显示](http://wiki.apache.org/solr/HighlightingParameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T12:31:51.150

我最终使用的解决方案是将行号（因为它是我正在索引的源代码）导出到索引过程；换句话说，我在每个导出的行前面加上行号，我在阅读用于索引的源代码时应用它。

# .net - 服务不可用管理中心 SharePoint 2010

> ID：12726317
> 
> 赞同：2
> 
> 时间：2012-10-04T11:31:21.800
> 
> 标签：.net, sharepoint, sharepoint-2010

我的 SharePoint Administration 2010 遇到问题，当我尝试打开它时，它给我“服务不可用”

但创建的其他网站工作正常。我搜索了网络，但我没有找到解决这个问题的好网站

请有任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:55:25.973

我通过将**应用程序池标识更改为 Network-Service**解决了这个问题，我重新启动了 IIS 并且它工作了

# c# - 当多个事件可能导致计算时使用的正确模式是什么？

> ID：12726326
> 
> 赞同：0
> 
> 时间：2012-10-04T11:31:56.213
> 
> 标签：c#, design-patterns, thread-safety

最近我在访问位图方面遇到了很多[烦人的](https://stackoverflow.com/q/12709270/50151) [问题](https://stackoverflow.com/q/12693276/50151)，我开始认为我需要重新评估我的应用程序的设计。

目前，我有一个对象可以创建另外两个对象。其中一个提供一系列位图（例如来自网络摄像头），另一个提供一系列坐标对（例如来自鼠标或触摸板）。父对象具有子对象生成的事件的侦听器。这些事件具有自定义参数，它们将新信息（位图或坐标）作为有效负载携带。例如：

```
public class NewImageEventArgs : EventArgs
{
    public NewImageEventArgs(Bitmap image)
    {
        Image = image;
    }
    public Bitmap Image { get; private set; }
} 
```

父对象中的侦听器方法将有效负载复制到对象级表示。当任一侦听器（位图或坐标）被触发时，它们随后会调用一个共享方法，该方法同时使用位图和坐标进行一些计算。

```
private void PointerModule_NewPosition(object sender, NewPositionEventArgs e)
{
    this.p = e.Position;
    this.Invalidated();
} 
```

在我看来，OutOfMemory 和 InvalidOperation（“对象当前在别处使用”）异常中反复出现的问题源于每个新事件可能位于不同线程上的事实。在一个线程上使用位图时，当另一个线程尝试同时访问它时会引发异常。

我需要从根本上改变程序的形状吗？我可以采取任何预防措施来消除此类问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:44:36.577

编辑：我重读了您的问题，我可能回答的问题与您提出的问题略有不同。然而，我用“对象在其他地方使用”例外解决了同样的问题，我学到的教训总结在底部的链接中。bitmap.Clone() 和 new Bitmap(source) 都不会创建深层图像副本。这导致了异常。

在我的应用程序中，我使用模式：

```
public class ImageProvider()
{
public event EventHandler LiveImageUpdated;
private object _currentImageLock = new object();

private Bitmap _currentImage;
public Bitmap CurrentImage
{ 
    get    
      {
       lock (_currentImageLock)
         {
            return DeepImageCopy(_currentImage)
         }
       }
     private set
     {
       lock(_currentImageLock)
       {
            _currentImage = value
       }
        if (LiveImageUpdated != null)
        {
          foreach (Delegate del in LiveImageUpdated.GetInvocationList())
          {
              EventHandler handler = (EventHandler)del;
              handler.BeginInvoke(this, EventArgs.Empty, null, null);
           }
        }
     }
} 
```

}

我问了这个问题： [How to create a Bitmap deep copy](https://stackoverflow.com/questions/5882815/how-to-create-a-bitmap-deep-copy)

应用程序没有问题。所以基本上我跳过了将新图像作为参数推送的部分，听众要求图像的深层副本，他们没有共享图像。在性能方面，它可以毫无问题地工作。

# iphone - UIButton Rounded Rect 不需要的 3D 效果

> ID：12726335
> 
> 赞同：1
> 
> 时间：2012-10-04T11:32:36.793
> 
> 标签：iphone, ios, uibutton

我在一个 RoundedRect 类型的笔尖上有几个 UIButton，在 iOS 6 之前它看起来又漂亮又扁平。在 iOS 6 中，虽然他们获得了我无法摆脱的 3D 效果边框（我会提供一张图片，但我的名声太小了）。任何人都可以建议如何让漂亮的公寓看起来回来吗？

我敢肯定，这将是我问过的最愚蠢的问题，而且答案很简单，我会踢自己一个星期。但我找不到它，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:05:25.213

我不知道为什么会出现这种效果，但一种方法是避免圆角矩形。我总是使用自定义按钮。您可以以任何您想要的方式在代码中自定义它们。

例如：

```
button.layer.cornerRadius = 8;  //this gives it rounded corners
button.layer.borderColor = [[UIColor redColor] CGColor] ; // this is how you set a border
button.layer.borderWidth = 2; //this is how you set the width of the border 
```

UIButton 的图层成员是一个 CALayer，您可以为其设置阴影。[这](http://nachbaur.com/blog/fun-shadow-effects-using-custom-calayer-shadowpaths)是一个很好的教程。

您还可以添加渐变背景以使按钮更美观，如下所示：

```
CAGradientLayer *layer = [CAGradientLayer layer];

layer.colors = [NSArray arrayWithObjects:
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.9] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.8] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.7] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.6] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.5] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.4] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.3] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.2] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.1] CGColor],
                (id)[[UIColor colorWithRed:skinRed green:skinGreen blue:skinBlue alpha:0.0] CGColor],
                nil];

layer.locations = [NSArray arrayWithObjects:
                   [NSNumber numberWithFloat:0.1],
                   [NSNumber numberWithFloat:0.2],
                   [NSNumber numberWithFloat:0.3],
                   [NSNumber numberWithFloat:0.4],
                   [NSNumber numberWithFloat:0.5],
                   [NSNumber numberWithFloat:0.6],
                   [NSNumber numberWithFloat:0.7],
                   [NSNumber numberWithFloat:0.8],
                   [NSNumber numberWithFloat:0.9],
                   [NSNumber numberWithFloat:1.0],
                   nil];

layer.startPoint        = CGPointMake(0, 0);
layer.frame             = button.layer.bounds;

layer.endPoint          = CGPointMake(0, 1);
layer.contentsGravity   = kCAGravityResize;
[button.layer insertSublayer:layer below:button.titleLabel.layer];

button.layer.masksToBounds = TRUE; 
```

如您所见，一个不错的方法是使用一些全局 int 变量来定义应用程序皮肤的 RGB。这样你可以在几秒钟内修改它。

因此，通过使用这种方式，您可以不受 Apple 对 SDK 版本所做的更改的影响。而且您可以以任何您想要的方式对其进行自定义，获得比您在 IB 中获得的更多的成就。

希望这可以帮助。

干杯!

# css - 多背景图像不适用于位置

> ID：12726343
> 
> 赞同：0
> 
> 时间：2012-10-04T11:33:06.107
> 
> 标签：css

```
#example1 {width: 500px;
height: 250px;
background-image: url(http://www.css3.info/wp-content/themes/new_css3/img/sheep.png), 
url(http://www.css3.info/wp-content/themes/new_css3/img/sheep.png);
background-position: 20px 10px, 100px 250px;
background-repeat: no-repeat;
}​ 
```

具有固定背景位置的背景图像不起作用[演示](http://jsfiddle.net/JGVHG/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:38:32.590

您在背景位置的高度和最后一个数字具有相同的值。换成这个看看。

```
background-position: 20px 10px, 100px 100px; 
```

**[演示](http://jsfiddle.net/JGVHG/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:38:17.730

写成——

```
#example1 {
  width: 500px;
  height: 250px;
  background: url(http://www.css3.info/wp-content/themes/new_css3/img/sheep.png) no-repeat 20px 10px, url(http://www.css3.info/wp-content/themes/new_css3/img/sheep.png) no-repeat 200px 50px;
} 
```

[**演示**](http://jsfiddle.net/JGVHG/2/)

您的代码也可以工作，但您的代码的问题是您将第二张图片的顶部位置设置为 250 像素；你的容器的高度是 250px；这就是为什么它不可见:)

# asp.net - ASP.NET 和 MySQL 连接器网络

> ID：12726348
> 
> 赞同：0
> 
> 时间：2012-10-04T11:33:19.377
> 
> 标签：asp.net, mysql

我正在使用最新版本的**MySQL 连接器 Net**从 ASP.NET 表单连接到 MySQL 数据库。我已将文件*MySql.Data.dll*、*MySql.Data.Entity.dll*和*MySql.Web.dll*复制到我的 ASP.NET 应用程序的**Bin文件夹中。**我还使用这些行导入了所需的库：

```
Imports MySql.Data
Imports MySql.Data.MySqlClient 
```

下图显示了我得到的代码和错误： ![在此处输入图像描述](../Images/dd8a89096dd302e7cee8d6472daf33ee.png)

请问代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:41:03.627

我找到了一个样本，这可能会有所帮助。[单击此处](http://support.godaddy.com/help/article/7331/connecting-to-a-mysql-database-using-aspnet)例如描述使用 ASP.NET/MySql.Data 连接到 MySQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:02:36.197

不知道数据集来自哪里，应该是 database=dbherpes。

# codeigniter - 我可以将 pyroCMS 用于多语言和多用户项目吗？

> ID：12726350
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:33:23.933
> 
> 标签：codeigniter, pyrocms

我需要 1 条建议，这是解决我问题的最佳平台，所以我在这里发帖。

我想我会在我的新项目中使用 PyroCMS。

项目具有以下特点：

1.  前端多语言
2.  用户管理
3.  超级管理员、国家管理员、广告管理员
4.  在前端用户 export_type 和 import_type。

我可以在这个项目中使用 PyroCMS 吗？我需要快速开发这个。或者我可以用核心做吗？你的建议。

我更擅长 PyroCMS，但我擅长 Codeigniter。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:17:35.277

查看您的项目功能：

1.  前端多语言 - PyroCMS 内置了多语言支持。
2.  用户管理 - 是的，您可以根据需要扩展用户模块
3.  并使用组模块创建各自的（超级管理员、国家管理员、广告管理员）身份验证层次结构。
4.  在前端用户 export_type 和 import_type - 你能进一步澄清吗？如果是关于用户类型（我在 3 中提到的组模块） - 这是可行的。

我可以在这个项目中使用 PyroCMS 吗？

*   确实。PyroCMS 将是您项目的完美基础，将帮助您快速构建项目。我对 PyroCMS 的研究越多，我就越觉得它的 Codeigniter 变得更容易了。此外，Pyro 社区非常支持。

检查这些链接：

1.  了解 PyroCMS 基础知识、模块结构和模块开发：[http ://bhu1st.blogspot.com/2010/09/hello-world-pyrocms-module.html](http://bhu1st.blogspot.com/2010/09/hello-world-pyrocms-module.html)

2.  Pyro - 主题、模块和小部件创建指南和示例代码：[http ://echo.semicolondev.com/](http://echo.semicolondev.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:33:26.630

此外，pyro 的多语言解决方案是您为每种语言创建多个子域并创建多个站点。如果要共享用户数据库，这是个问题。一个域多语言站点有点困难，但也是可能的。您可以在这篇文章中了解更多信息：[https ://www.pyrocms.com/forums/topics/view/16237](https://www.pyrocms.com/forums/topics/view/16237)

尽管如此，我也建议 Pyro 用于该项目和其他项目:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T17:34:46.657

在 pyro 模块中，您可以拥有设置权限的角色，将其与用户助手一起使用，然后您可以在模块中拥有

```
if(user_has_role('super_user')){ 
    // do stuff 
} 
```

示例模块：[https ://github.com/pyrocms/sample](https://github.com/pyrocms/sample) [http://docs.pyrocms.com/2.1/manual/developers/addons/modules/basic-structure](http://docs.pyrocms.com/2.1/manual/developers/addons/modules/basic-structure)

# policy - 如何使用自定义属性编写 XACML 策略

> ID：12726352
> 
> 赞同：2
> 
> 时间：2012-10-04T11:33:29.483
> 
> 标签：policy, xacml, fedora-commons

我正在尝试编写将利用自定义属性的 XACML 策略。我在想类似的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<Policy xmlns="urn:oasis:names:tc:xacml:1.0:policy"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PolicyId="deny-demo100"
  RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable">
  <Description> </Description>
  <Target>
    <Subjects>
      <AnySubject/>
    </Subjects>
    <Resources>
  <AnyResource/>
</Resources>
<Actions>
  <AnyAction/>
</Actions>
  </Target>

  <Rule Effect="Deny" RuleId="rule-deny-demo100">
    <Target>
      <Subjects>
        <AnySubject/>
      </Subjects>
      <Resources>
        <Resource>
           <AnyResource/>
        </Resource>
      </Resources>
      <Actions>
        <Action>
          <ActionMatch MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
            <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">customAttribute</AttributeValue>
            <ActionAttributeDesignator AttributeId="urn:oasis:names:tc:xacml:1.0:action:action-    id" MustBePresent="false" DataType="http://www.w3.org/2001/XMLSchema#string"/>
          </ActionMatch>
        </Action>
      </Actions>
    </Target>    
  </Rule>

  <Rule RuleId="deny-demo100-catch-all" Effect="Permit" />

</Policy> 
```

（我们使用 Fedora 的 XACML 实现）。

我确定我在这里遗漏了一些非常简单和基本的东西，但无法弄清楚是什么。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T01:57:10.447

自定义属性是什么意思？你想用“简单的古英语”表达什么？

在 XACML 中，您可以使用任何您喜欢的属性，例如角色、公民身份、许可、资源分类、一天中的时间……当然，该属性的可用性取决于您要保护的应用程序的类型。你是如何使用 Fedora 实现的？是用于 Fedora Linux 操作系统中的访问控制吗？

如果要将属性与值进行比较，例如公民身份 == 加拿大，则使用`<Target/>`. 如果您想比较 2 个属性，例如间隙 > 分类，请使用`<Condition>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T05:30:49.980

我不确定你真正在寻找什么，但我想你需要做一些基于属性的访问控制。

在 XACML 中有一个称为 PIP（策略信息点）的组件，您可以在其中从外部来源检索属性并检查授权。

这可能会对您有所帮助：[了解 PIP（策略信息点）](http://xacmlinfo.com/2011/12/18/understanding-pip/)。

如果您需要以更简单的方式创建 XACML 策略，您可以按照以下步骤操作：[WSO2 Identity Server 中的 XACML 策略编辑器](http://xacmlinfo.com/2012/05/02/xacml-policy-editor-in-wso2-identity-server/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T14:30:35.190

我不得不承认我对 XACML 和 Fedora 的实现有点陌生，但我的理解是你应该能够查询在检查用户对象时出现的任何值。默认 Fedora Commons 安装上的 URL 应该是“localhost:8080/fedora/user”，并在登录之前创建的名为“Joe User”的 LDAP 用户后在我的服务器上生成以下对象：

```
<user id="Joe User">
  <attribute name="uid">
    <value>userj</value>
  </attribute>
  <attribute name="mail">
    <value>UserJ@ldap.test.user.uconn.edu</value>
  </attribute>
  <attribute name="sn">
    <value>User</value>
  </attribute>
  <attribute name="ou">
    <value>DPT</value>
  </attribute>
  <attribute name="cn">
    <value>Joe User</value>
  </attribute>
  <attribute name="description">
    <value>sample user</value>
  </attribute>
  <attribute name="role"/>
  <attribute name="fedoraRole"/>
  <attribute name="objectClass">
    <value>organizationalPerson</value>
    <value>person</value>
    <value>inetOrgPerson</value>
    <value>top</value>
  </attribute>
  <attribute name="displayName">
    <value>Joe User (LDAP)</value>
  </attribute>
</user> 
```

一旦通过一些 JAAS 身份验证模块（如上面使用 LDAP 模块的情况）或什至环境变量将值注入到用户对象中，您应该能够查询它。在下面的示例策略中，如果用户的 OU 设置为“DPT”，我将 Fedora 设置为授予 fedoraAdmin 访问 API-M 调用的权限：

```
<?xml version="1.0" encoding="UTF-8"?>
<Policy xmlns="urn:oasis:names:tc:xacml:1.0:policy"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        PolicyId="permit-apim-to-ldap-ou"
        RuleCombiningAlgId="urn:oasis:names:tc:xacml:1.0:rule-combining-algorithm:first-applicable"
>
  <!-- test policy to approve API-M operations if a specific LDAP OU exists -->
  <!-- make sure access to API-M in premitted from the current client IP address first (check "deny-apim-if-not-in-list.xml" or "deny-apim-if-not-localhost.xml" ) -->
  <Description>note that other policies may provide exceptions to this broad policy. This policy assumes api-m users have to be authenticated</Description>
  <Target>
    <Subjects>
      <Subject> 
        <!-- specific OU - need to get this working with a range of values -->
        <SubjectMatch MatchId="urn:oasis:names:tc:xacml:1.0:function:string-equal">
          <AttributeValue DataType="http://www.w3.org/2001/XMLSchema#string">DPT</AttributeValue>
          <SubjectAttributeDesignator AttributeId="ou" MustBePresent="false" DataType="http://www.w3.org/2001/XMLSchema#string"/>
        </SubjectMatch>
      </Subject>
    </Subjects>
    <Resources>
      <AnyResource/>
    </Resources>    
    <Actions>
        <AnyAction/>
    </Actions>
  </Target>
  <Rule RuleId="1" Effect="Permit"/>
</Policy> 
```

自定义属性甚至可以添加到 Fedora XML 用户文件（不是 Tomcat 用户文件），而不是使用 LDAP。可能有更好的方法来做到这一点，但正如我之前所说，我对 XACML 相当陌生，并不完全理解它。此规则适用于我的本地主机测试服务器，基于其他规则。你的旅费可能会改变。

此外，如示例策略文件中所述，确保您正在测试的客户端既可以被允许，又可以在稍后拒绝 API-M 访问，然后再设置这样的规则，因为在 Fedora 中调试 XACML 策略似乎非常即使在调试模式下也很难将少量数据写入日志文件（您会看到操作通过或失败，但永远不会看到导致通过/失败结果发生的规则名称）。

# iphone - 自定义 UITableViewCell On Autorelease 导致应用程序崩溃

> ID：12726359
> 
> 赞同：0
> 
> 时间：2012-10-04T11:33:47.117
> 
> 标签：iphone, ios, uitableview, autorelease

我有一个使用界面生成器设计的表格视图的自定义单元格。在它的 .m 文件中，我有一些类似这样的代码来从包中获取自定义单元格的 xib。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        NSArray *nibArray = [[NSBundle mainBundle] loadNibNamed:@"SubItemsCustomCell" owner:self options:nil];
        self = [nibArray objectAtIndex:0];    }
    return self;
} 
```

然后当我在我的 cellForRowAtIndexPath 方法中使用这个单元格并传递一个自动释放消息时

```
if (!cellForSubItems) {
    cellForSubItems = [[[SubItemsCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"SubItemCell"] autorelease];
} 
```

当我滚动 tableView 时它崩溃了，

```
-[SubItemsCustomCell release]: message sent to deallocated instance 0xed198b0 
```

当我使用代码制作自定义单元格时，它从未崩溃过，但在这里却发生了，为什么会这样？此外，当我不自动释放它时，它运行得非常好，但显然它会有内存泄漏。请帮我解决这个问题。提前致谢。

编辑：我没有使用 ARC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:59:07.907

您的 init 方法看起来非常错误。

在调用它时，已经分配了一个对象。然后，你用你从笔尖加载的东西替换那个对象。在这里，您已经泄漏了应该首先释放的旧实例。来自 nib 的新对象是自动释放的（请参阅命名约定），因此您应该在此处保留它。

我强烈建议完全删除该虚假代码。您不想手动调用 alloc/init，只是用那里的 nib 替换它。直接从笔尖加载。

所以是的，您的代码可能会泄漏，但可能不是您想的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:51:29.400

尝试我的以下代码以添加单元格`UITableView`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        SubItemsCustomCell *cell = (SubItemsCustomCell *) [tableView      dequeueReusableCellWithIdentifier:nil];

        if (cell == nil) 
        {

            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"SubItemsCustomCell" owner:self options:nil];

            for (id currentObject in topLevelObjects){
                if ([currentObject isKindOfClass:[UITableViewCell class]]){
                    cell =  (SubItemsCustomCell *) currentObject;
                    break;
                }
            }
             ///do something here
        }

        return cell;
    } 
```

我希望这可以帮助你...

:)

# python - 拆分字符串并保存逗号 int python

> ID：12726373
> 
> 赞同：6
> 
> 时间：2012-10-04T11:34:23.537
> 
> 标签：python, string, split

我有以下字符串

```
c='a,b,c,"d,e",f,g' 
```

我想得到

```
b=['a','b','c','d,e','f','g'] 
```

所以

```
b[3]=='d,e' 
```

有任何想法吗？问题`c.split(',')`是它也会分裂`'d,e'`

[我在这里看到了 C++ 的答案，这当然对我没有帮助]

非常感谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-04T11:37:32.533

`c`如果确实应该是以下内容，您可以使用 CSV 模块...

```
import csv
c = 'a,b,c,"d,e",f,g'
print next(csv.reader([c]))
# ['a', 'b', 'c', 'd,e', 'f', 'g'] 
```

# java - Java PrintWriter 不发送字节数组

> ID：12726377
> 
> 赞同：1
> 
> 时间：2012-10-04T11:34:32.473
> 
> 标签：java, sockets

需要通过套接字发送一个未知大小的字节数组。当我尝试将字节数组写入 printwriter 时

```
 writeServer = new PrintWriter(socketconnection.getOutputStream());
        writeServer.flush();
        writeServer.println("Hello World");
        writeServer.println(byteArray.toString()); 
```

它是在服务器上接收的，但只有 5-6 个字符的字符串，总是从 [B@..... 但是当我通过输出流发送它时

```
 writeServer.println("Hello World");
        socketconnection.getOutputStream().write(byteArray); 
```

它在服务器上正确接收。但问题在于第二个选项“Hello World”字符串没有通过服务器。我希望将这两件事都交付给服务器。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:40:44.990

您正在尝试混合二进制和文本，这必然会令人困惑。我建议您使用其中一种。

```
// as text
PrintWriter pw = new PrintWriter(socketconnection.getOutputStream());
pw.println("Hello World");
pw.println(new String(byteArray, charSet);
pw.flush(); 
```

或者

```
// as binary
BufferedOutputStream out = socketconnection.getOutputStream();
out.write("Hello World\n".getBytes(charSet));
out.write(byteArray);
out.write(`\n`);
out.flush(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:57:58.010

`byteArray.toString()`将返回您人类可读的`byteArray`. 即使对于数组，它也永远不是人类可读的。

如果你想转移`byteArray`，`String`那么你应该使用

```
String str = new String(bytes, Charset.defaultCharset());//Specify different charset value if required. 
```

# java - 如何在我的 Web 应用程序中使用“bigbluebutton”？

> ID：12726379
> 
> 赞同：1
> 
> 时间：2012-10-04T11:34:35.690
> 
> 标签：java, jsf

我想`Web Conference`在我的应用程序中添加一个功能。

1.  我们可以将`bigbluebutton`网络会议系统结合到我的应用程序中吗？
2.  哪个API用于Java Web应用程序的Web Conference？

目前，我的 Web 应用程序使用的是 JSF 2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:19:14.157

循环演示，

我是 BigBlueButton 的开发者之一。在您的应用程序中“嵌入” BigBlueButton 的方法不是考虑将服务器嵌入到您的服务器中；相反，考虑运行第二个 BigBlueButton 服务器并使用 BigBlueButton API 创建房间，将用户启动到房间，然后查询 BigBlueButton 服务器以获取录音。

[您可以在我们的API 文档](http://code.google.com/p/bigbluebutton/wiki/API)中查看如何执行此操作。

此外，请查看 API 示例 (.jsp)，了解如何调用 BigBlueButton API。请参阅[API 演示的源代码](https://github.com/bigbluebutton/bigbluebutton/tree/master/bbb-api-demo/src/main/webapp)。

## 问候，.. 弗雷德

BigBlueButton 开发人员

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:02:41.370

好吧，我不知道它是否可以，但是您可以使用[BigBlueButton](http://www.bigbluebutton.org/) (LGPL) 或[OpenMeetings](http://incubator.apache.org/openmeetings/) (ASL)，它们都有用于连接外部应用程序的 API。

# shared-ptr - 将 shared_ptr 作为成员正确的想法吗？

> ID：12726386
> 
> 赞同：0
> 
> 时间：2012-10-04T11:34:59.497
> 
> 标签：shared-ptr

我想将成员指针设为 shared_ptr，但我不确定 shared_ptr 本身在包含类被销毁后是否还活着。我测试了下面的代码，但我不确定它在运行时是否正确？

```
using std::cout;
using std::cin;
using std::endl;

class Widget
{
public:
    Widget()
    {
        cout<<__FUNCTION__<<"()"<<endl;
    }

    ~Widget()
    {
        cout<<__FUNCTION__<<"()"<<endl;
    }
    void display()
    {
        cout<<"the smart pointers are really smart"<<endl;
    }
private:
};

class Window
{
public:
    Window()
        :widget_(new Widget())
    {

    }

    Widget* widget()
    {
        return widget_.get();
    }

private:
    std::shared_ptr<Widget> widget_;
};

int main()
{

    Widget* outer = nullptr;
    {
        Window wind;
        outer = wind.widget();
    }

    outer->display();

    cout<<"enter"<<endl;
    cin.get();
    return 0;
} 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:50:37.713

> 我不确定在包含类被销毁后 shared_ptr 本身是否还活着。

是一个成员，所以当`shared_ptr`包含的类被销毁时也会被销毁。

解决方案是复制`shared_ptr`ie make `widget()`return`shared_ptr<Widget>`而不是`Widget*`. 然后你可以这样做：

```
shared_ptr<Widget> outer;
{
    Window wind;
    outer = wind.widget();
}
outer->display(); 
```

当您调用时，小部件仍然存在`display()`

（为什么你希望一个小部件的寿命比它的包含窗口长？）

# html - 使用溢出在 chrome 中弄乱布局：隐藏

> ID：12726387
> 
> 赞同：0
> 
> 时间：2012-10-04T11:35:10.447
> 
> 标签：html, css, alignment, overflow

我有一个包含缩略图列表的页面。正如您在[http://www.ariangroup.net/Album/Item/25](http://www.ariangroup.net/Album/Item/25)中看到的那样，每个图像都被一个框架包围。在 FF 和 IE 上，一切看起来都不错。但是在 chrome 中，当该行中的图像的高度大于 200px 时（尽管溢出被隐藏），它会弄乱该行中的对齐方式（例如，左侧第一个图像的第 2 行高度为 301px，这会导致该行不排队）。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:41:21.290

尝试设置`vertical-align: top;`类`.albumImage`。那应该可以解决您的问题！

![在此处输入图像描述](../Images/4d078d115444aef5811b6a33265ee704.png)

# ruby-on-rails - Rails <%= hidden_ field %> 错误的参数数量（1 比 2）

> ID：12726388
> 
> 赞同：0
> 
> 时间：2012-10-04T11:35:15.273
> 
> 标签：ruby-on-rails, ruby

我有两种形式。其中一个有两个字段，名称字段和一个名为 original_number 的字段。当表单发布时，它会导致另一个表单，我想做的一件事是将 name 字段和 original_number 字段存储为第二个表单中的隐藏值。

但是，我不确定如何实现，以便对于第二种形式的 value 字段，rails 接收来自 POST 方法的信息。

我将如何使隐藏字段的值使用来自第一个表单的 POST 的信息？

这是我的第一个表格

```
 <%= form_tag("/find_numbers", :method => "post", :id => "new_user" ) do %>
    <%= render 'shared/error_messages' %>    

    <%= label_tag(:name, "What Are You Tracking?") %>
     <%= text_field_tag(:name) %>

    <%= label_tag(:original_number, "Your Original Number") %>
    <%= text_field_tag(:original_number) %>
    <hr class="faded" />
    <h4>Choose One Of The Methods Below To Find Your Tracking Number</h4>
    <hr class="faded" />
    <%= label_tag(:in_postal_code, "Enter Your Postal Code (e.g. 94117):") %>
    <%= text_field_tag(:in_postal_code) %>

    <%= label_tag(:near_number, "Near this other number (e.g. 4156562345)") %>
    <%= text_field_tag(:near_number) %>

    <%= label_tag(:contains, "Matching this pattern (e.g. 415***EPIC):") %>
    <%= text_field_tag(:contains) %>  

    <%= submit_tag("Search", :class => "btn btn-large btn-primary") %>

  <% end %> 
```

这是我的第二种形式，它从第一种形式接收信息：

```
<%= @numbers.each do |number| %>

    <%= form_tag(:controller => "phones", :action => "create" ) do %>
        <%= hidden_field(:original_number) %>
        <%= hidden_field(:name) %>
        <%= hidden_field(:twilio_number, :value => number.phone_number) %>

        <div class="found_list">
            <div class="found_phone_number">
                <%= label_tag(:number, number.friendly_name) %>
            </div>
            <div class="choose_found_number">
             <%= submit_tag("Choose This Number", :class => "btn btn-large btn-success") %>
            </div>
        </div>
            <hr>
    <% end %>
<% end %> 
```

注意

```
 <%= hidden_field(:original_number) %>
        <%= hidden_field(:name) %> 
```

注意第一个表单发送的请求参数，

```
 Request

Parameters:

{"utf8"=>"✓",
 "authenticity_token"=>"RMvjP9PQt9hVEJE449pMqgqnFcreqvXtmZFEyU+641g=",
 "name"=>"Stepan Parunashvili",
 "original_number"=>"1231231234",
 "in_postal_code"=>"",
 "near_number"=>"",
 "contains"=>"415"} 
```

我如何获得“名称”=>“Stepan Parunashvili”来填充：name 的隐藏字段，以及“original_number”=>“1231231234”来填充隐藏字段：original_number 的字段？

感谢您对我的包容直到现在，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:41:01.760

尝试这个

```
 <%= hidden_field :original_number, params[:original_number] %>
          <%= hidden_field :name, params[:name] %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:04:24.253

方法有两种版本`hidden_field`：一种是[ActionView::Helpers::FormBuilder](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-hidden_field)类的实例方法，它接受一个参数，一种是[ActionView::Helpers::FormHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-hidden_field)中的辅助方法，它有两个强制参数。由于您没有使用表单助手，因此您正在调用第二个版本，这会给您带来参数错误。

简单修复：改用[hidden_​​field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-hidden_field_tag)方法：

```
hidden_field_tag(:original_number) 
```

或者如果您还想提供值：

```
hidden_field(:original_number, params[:original_number) 
```

Aayush 的回答也有效，但这样您的表单是一致的，因为您使用`*_tag`其他表单字段的方法。

# mysql - 从具有给定条件的一个表中选择多个不同类型的行，如果未找到，则选择下一个可能的行

> ID：12726389
> 
> 赞同：2
> 
> 时间：2012-10-04T11:35:14.947
> 
> 标签：mysql, select, join, settings

我有一种设置表，其中有类型、值、公司、组等列。根据我的用户信息是否与其他列匹配，我只需要从该表中选择每种不同类型的一行。

示例我在公司 1 和组 1 中，我的设置表包含以下行：

```
+--+-----+-------+---------+-------+
|id|type | value | company | group |
+--+-----+-------+---------+-------+
|1 |1    | 50    | 1       | 1     |
|2 |1    | 70    | NULL    | NULL  |
|3 |2    | 1     | NULL    | NULL  |
|4 |2    | 99    | 1       | 1     |
|5 |2    | 999   | NULL    | 1     |
|6 |3    | 500   | NULL    | NULL  |
+--+-----+-------+---------+-------+ 
```

如果有公司或集团的设置使用它，否则使用默认行（公司和集团为NULL）。还有更多的列，例如公司和组。

我需要从该表中选择 id:s 1,4 和 6，因为在这种情况下它们是我需要的设置。id 1 和 id 4 与我的用户信息匹配，id 5 也匹配，但 id 4 是完全匹配的。Id 6 匹配，因为没有更接近类型 3 的设置。

可能有数百家公司和团体，所以我不想创建一个 PHP 算法来获得正确的设置值。这将是灾难性的。

我尝试选择行并使用公司 DESC 对它们进行排序，但是在分组类型时它不起作用。我还尝试加入 max(company) ，其中公司不为空，但我被卡住了，现在试图寻求帮助。

如果有人可以帮助我解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:49:21.333

```
SELECT * FROM my_table WHERE id IN (
  SELECT (
    SELECT   b.id
    FROM     my_table b
    WHERE    b.type = a.type
         AND IFNULL(b.company = 1, TRUE)
         AND IFNULL(b.group   = 1, TRUE)
    ORDER BY b.company DESC, b.group DESC
    LIMIT    1
  ) FROM (
    SELECT DISTINCT type FROM my_table
  ) a
) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ce9aa/1/0)上查看。

* * *

在 a 中重写`JOIN`，这应该会提供更好的性能：

```
SELECT my_table.*
FROM   my_table
JOIN (
  SELECT DISTINCT type FROM my_table
) a ON my_table.id = (
  SELECT   b.id
  FROM     my_table b
  WHERE    b.type = a.type
       AND IFNULL(b.company = 1, TRUE)
       AND IFNULL(b.group   = 1, TRUE)
  ORDER BY b.company DESC, b.group DESC
  LIMIT    1
) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ce9aa/2/0)上查看。

# c# - 按钮单击导致子窗体不被处理 C#

> ID：12726390
> 
> 赞同：2
> 
> 时间：2012-10-04T11:35:20.110
> 
> 标签：c#, .net, garbage-collection

我有一个子表单，其中包含一个`RichTextBox`加载了 RichText 资源文件的子表单。

当单击关闭子窗体的按钮时（使用`Close()`），窗体将关闭并返回到父窗体。但是，资源并没有被处置。事实上，在几乎把我的鼠标按钮用完之后，内存真的升级了。

作为测试资源是否最终会被释放，我在父表单上设置了一个表单计时器来加载子表单，在子表单中设置另一个来调用`Close()`. 这次资源在大约 5 或 6 个打开/关闭周期后被释放。

嗯..我想。所以我改变了设置来模拟现实。这次我将子窗体计时器触发事件​​更改为包含`button1.PerformClick()`，它触发包含语句`button1`的按下事件。`Close()`这次没有释放资源，在我中止测试之前内存使用量上升到 1 GB！

为什么包含的按钮事件与包含`Close()`的计时器事件不同`Close()`？

好的..这是打开子窗体的父窗体上的代码：-

```
private void showSplashScreen()
{
    // Instantiating SplashScreen
    SplashScreen splash = new SplashScreen();
    // Displaying SplashScreen
    splash.ShowDialog();
} 
```

这是关闭表单的子表单上的代码：-

```
private void button1_Click( object sender, EventArgs e )
{
    Close();
}

private void timer1_Tick( object sender, EventArgs e )
{
    button1.PerformClick();
//    Close();
} 
```

当以这种方式运行时，内存使用量会增加。但是如果`button1.PerformClick()`被注释掉并且`Close()`未被注释的资源会定期释放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:33:17.353

根据[Form.Close MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close%28v=vs.100%29.aspx)，如果您使用 ShowDialog，您需要手动处理您的资源。我会在[FormClosing](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing%28v=vs.100%29.aspx)事件中这样做。至于为什么当您使用计时器时它会起作用，我不确定。但通常当我使用 a`ShowDialog`并且我正在检查 DialogResult，然后从父级关闭表单。虽然`Using`像你一样使用它会更干净。

```
SplashScreen splash = new SplashScreen(); 
DialogResult dr == splash.ShowDialog(); 

if (dr == System.Windows.Forms.DialogResult.OK)
{
    //Do something
}
else
{
    //do something else
}

splash.Close();
splash.Dispose(); 
```

> 表单未在 Close 上处理的两种情况是： (1) 它是多文档界面 (MDI) 应用程序的一部分，并且表单不可见；(2) 您已经使用 ShowDialog 显示了表单。在这些情况下，您将需要手动调用 Dispose 以将表单的所有控件标记为垃圾回收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:10:41.647

好的伙计们，根据Cyborgx37的想法，我在父窗体上更改了调用方法如下：-

```
private void showSplashScreen()
{
    // Instantiating SplashScreen.  'using' to allow proper release of resources
    using ( SplashScreen splash = new SplashScreen() ) {
        // Displaying SplashScreen
        splash.ShowDialog();
    }
} 
```

这现在可以正确释放资源。但是，我不明白为什么关闭子表单的计时器允许正确处理资源，而按钮单击关闭则不允许。我什至查看了 IL 代码，这两种方法使用相同的代码。有任何想法吗？

# abap - FD02 - dynpro 不存在

> ID：12726393
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:35:39.183
> 
> 标签：abap, sap-erp

我正在运行事务 FD02，当我输入特定的客户编号时，它会触发转储（`DYNPRO_NOT_FOUND`参见图片）。

我尝试使用下面给出的术语搜索笔记，但我无法获得任何相关信息。

```
"DYNPRO_NOT_FOUND" " "
"SAPLSZA1" or " "
"SYSTEM-EXIT" 
```

需要做些什么来避免转储？其他客户端工作正常，只有一个没有。 ![倾倒](../Images/4f5d48ca345aed16edbc79b4c7923b45.png) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:50:35.617

如果您说其他客户端工作，但特别是一个不工作，那么问题可能出在定制表中。我假设屏幕编号是从某种配置表中读取的，并且对于您正在测试的客户端，这些条目尚未提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:51:44.137

必须在您的系统中调查此问题。如果您自己没有这方面的知识，您应该通过 SAPnet 进行报告。SYSTEM-EXIT 表明这是某种附加编程的问题，但根据您提供的信息，无法准确确定出了什么问题。

# asp.net-mvc-3 - ajax的替代方法？

> ID：12726394
> 
> 赞同：1
> 
> 时间：2012-10-04T11:35:46.017
> 
> 标签：asp.net-mvc-3, razor

我正在使用 MVC 3。在选择下拉列表时，我有一个返回部分视图的 jquery ajax 方法。

```
$.ajax({
    url: '/Date/GetNextData',
    type: 'GET',
    async: false,
    data: { ID: dataID },
    success: function (result) {
        $('followup').html(result);
    }
}); 
```

有没有其他方法可以在不使用 ajax 的情况下做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:27:32.223

如果您不想使用 AJAX，则必须更新整个页面。您不能只刷新 DOM 的一部分。因此，您可以订阅下拉列表的更改事件并手动触发包含表单的提交。例如：

```
@using (Html.BeginForm())
{
    @Html.DropDownListFor(x => x.ItemId, Model.Items, new { id = "myDdl" })
    <button type="submit">OK</button>
} 
```

然后你可以有一个函数，当值改变时提交表单：

```
$('#myDdl').change(function() {
    $(this).closest('form').submit();
}); 
```

由于您不再使用 AJAX，因此您的控制器操作现在必须返回完整视图而不是部分视图。

# ios - 来自 AVFoundation 的 iPhone 5 视网膜显示纵横比

> ID：12726397
> 
> 赞同：2
> 
> 时间：2012-10-04T11:35:58.433
> 
> 标签：ios, objective-c, avfoundation, avcapturesession, aspect-ratio

AVFoundation 提供了在显示视频时可以使用的不同图像纵横比。

例如：

```
- NSString *const AVCaptureSessionPreset320x240;
- NSString *const AVCaptureSessionPreset352x288;
- NSString *const AVCaptureSessionPreset640x480; 
```

[http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVCaptureSessionPresetHigh](http://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVCaptureSessionPresetHigh)

在 iPhone4 和 iPad 上，这些分辨率设计为全屏。但在配备 Retina 显示屏的 iPhone 5 上，iPhone 显示屏更高。

应该如何处理显示来自 AvFoundation 的视频源？除了必须选择更大的纵横比并对其进行裁剪、缩放视频（弄乱其纵横比）或在我们的应用程序中留下一些空白屏幕空间之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T16:13:05.627

您可以`AVCaptureSessionPreset1920x1080`在 iPhone 5 上使用预设。请参阅**iOS的**[AVCaptureSession 类参考](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureSession_Class/Reference/Reference.html#//apple_ref/doc/c_ref/AVCaptureSessionPreset1920x1080) 。

 **编辑：

`AVCaptureSessionPresetiFrame960x540`预设与 具有相同的比率`AVCaptureSessionPreset1920x1080`。如果您想提高性能并保持纵横比，这应该是最佳选择。**

# ruby - rub 程序读取用户接受的数字

> ID：12726400
> 
> 赞同：0
> 
> 时间：2012-10-04T11:36:13.130
> 
> 标签：ruby

我刚开始学习 ruby​​，我正在尝试一个简单的程序来接受来自用户的两个数字并相乘。

这是我的代码：

```
def mult(i1,i2)
        res = i1.to_i * i2.to_i
        puts res
end

puts "enter 1st no to multiply"

i1 = gets

puts "enter 2nd no to multiply"

i2 = gets

mult(i1,i2) 
```

在这里，我通过**get**读取两个数字，它们接受字符串，然后我将转换为整数，如代码所示。

但是有没有办法直接接受数字数据类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:44:46.517

你可以这样做：

```
i1 = gets.to_i
i2 = gets.to_i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:02:10.993

只有当字符串中包含数字时，您才能使用 scan 方法返回一些内容。这是一种方法：

```
gets.scan(/[0-9]/).join.to_i 
```

如果没有输入数字，代码将返回 0。否则，它将返回数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:47:54.370

看一下[scanf](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/scanf/rdoc/Scanf.html)模块。它类似于 c 功能。我认为它应该比你做的更有效率。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:50:10.467

如果您了解 C，您可能会喜欢 scanf。它不是核心语言。在 IRB 中试试这个：

```
?> require 'scanf'
=> true

?> numberX = scanf("%d")
?> 345
=> [345]
#scanf return an array    

?> numberX
=> [345]

?> numberX.at(0)
=> 345 
```

# sql - 日期图片格式错误

> ID：12726403
> 
> 赞同：0
> 
> 时间：2012-10-04T11:36:26.937
> 
> 标签：sql, datetime, oracle10g

谁能建议这种日期格式有什么问题？

```
select to_date('04-Oct-2012 10:22:54,dd-Mon-YYYY hh24:mi:ss') from dual 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:38:56.793

您必须添加`''` 如下：

```
select to_date('04-Oct-2012 10:22:54','dd-Mon-YYYY hh24:mi:ss') 
from dual 
```

## [SQL 小提琴](http://sqlfiddle.com/#!4/8edae/1/0)演示

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:40:00.623

它应该是：

```
select to_date('04-Oct-2012 10:22:54','dd-Mon-YYYY hh24:mi:ss') from dual 
```

输出：`October, 04 2012 10:22:54+0000`

演示：

## [SQL小提琴](http://sqlfiddle.com/#!4/d41d8/3025/0)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T11:38:51.993

您似乎缺少一组`''`周围的`,`

试试这个：

```
select to_date('04-Oct-2012 10:22:54','dd-Mon-YYYY hh24:mi:ss') from dual 
```

# php - 我需要检查当前用户是否是自定义帖子类型的作者

> ID：12726405
> 
> 赞同：1
> 
> 时间：2012-10-04T11:36:28.883
> 
> 标签：php, wordpress, custom-post-type

我想写一个条件语句（下面用伪来解释）

```
IF current logged in user is 'Author' to a custom-post-type called 'farmers' {
// Do something
} else {
// Do something else
} 
```

到目前为止，我的代码工作是

```
<?php
// Global variable for current user ID
$user_ID;

// Create a new WP query object           
$my_query = new WP_Query( array(
'post_type' => 'farmers',
'author' => $user_ID
));

// Get all the current user posts from the query object
$posts = $my_query->posts;

IF $posts = 0 {
// Do something
} else {
// Do Something else
} ?> 
```

用户可以在系统中拥有“作者”角色，但不一定有任何帖子。所以我需要检查这个作者实际上有一个帖子的条件。我只是不确定如何在代码末尾编写该 IF 语句并寻求帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:44:59.543

你可以试试这个方法...

```
 if($user_session_id == $author_id) {
    // Do something
    } else {
    // Do something else
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-21T00:25:14.170

对于任何想要查看特定帖子的人，您可以检查是否

```
get_current_user_id() == get_post($your_post_id)->post_author 
```

或者在 WordPress 循环中，您可以检查是否

```
get_current_user_id() == $post->post_author 
```

为了完整起见，以下回答了原始问题。这将检查当前用户是否是属于自定义帖子类型的任何帖子的作者；在这种情况下`farmers`

```
$my_query = new WP_Query( array(
  'post_type' => 'farmers',
  'author' => get_current_user_id()
));

if ( $my_query->have_posts() ) {
  // Do something
} else {
  // Do Something else
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T11:42:37.867

使用这样的东西

```
$query="select * from posts where type='farmers'";
$result=mysql_query($query);
$valid=false;
if(mysql_num_rows($result)>0){
$valid=true;
}

if($_SESSION["id"]==$posts["id"]){
//your code
}else{
//your code
} 
```

或者

```
if(mysql_num_rows($posts)>0){
// user have post
 } 
```

# java - Android 中的 XML 解析问题

> ID：12726411
> 
> 赞同：0
> 
> 时间：2012-10-04T11:37:00.320
> 
> 标签：java, xml, dom, xml-parsing

这是我的 XML。

```
 <results keywords="ipod" limit="25">
   <products count="30">
     <product merchant_price="179.99" 
       network_id="2" 
       name = "ipod" 
       retail_price="179.99" />
     <product merchant_price="189.99" 
       network_id="3"
       name="ipod16gb" 
       retail_price="189.99" />
   </products>
</results> 
```

由此我需要单独获取产品属性。为此，我已经这样做了，我编写了一个解析器。

```
String xml = parser.getXmlFromUrl(url); // getting XML from the given URL
Document doc = parser.getDomElement(xml); // getting DOM element
NodeList nl = doc.getElementsByTagName("product");
// looping through all item nodes 
for (int i = 0; i < 10; i++) {
    Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
    Log.v("test",e.getAttribute("name"));
    } 
```

但是我无法正确获得价值并获得 `NullPointerException` 任何人都可以指出我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:43:27.357

尝试一下

```
 Element e = (Element) nl.item(i);
     NamedNodeMap attributes = e.getAttributes();
            for (int a = 0; a < attributes.getLength(); a++) 
       {
            Node theAttribute = attributes.item(a);
          System.out.println(theAttribute.getNodeName() + "=" + theAttribute.getNodeValue());
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:52:55.263

循环运行 10 次，比 xml 中存在的节点多，这就是为什么你得到空指针异常。尝试`nl.length`（使用将返回列表长度的函数）获取您通过的元素列表中的元素数量`doc.getElementsByTagName("product");.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:08:35.673

问题出在 Xml 解析器上。在解析时对此进行了更正。

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpGet request = new HttpGet();
request.setURI(new URI(url));
HttpResponse httpResponse = httpClient.execute(request);
HttpEntity httpEntity = httpResponse.getEntity();
xml = EntityUtils.toString(httpEntity); 
```

# asp.net-mvc-2 - 如何在视图之间传递数据到另一个视图模型？

> ID：12726412
> 
> 赞同：2
> 
> 时间：2012-10-04T11:37:03.990
> 
> 标签：asp.net-mvc-2, asp.net-ajax, jquery-ui-autocomplete, boilerplatejs

我在我的一个项目中使用 Boilerplatejs 和 asp.net mvc2。我在其中一个样板视图中有一个自动完成搜索框。我想将选定的“userId”（来自搜索框的建议）发送到另一个模块的视图模型，并使用该“userId”作为参数对我的控制器的操作方法进行 ajax 调用，然后获取一些特定信息该用户并最终在该特定模块的视图中显示它。

这是我的自动完成脚本

```
$(document).ready(function () {
    $('#name-list').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: "/Home/Searchuser",
                data: { searchText: request.term, maxResults: 10 },
                dataType: "json",
                success: function (data) {

                    response($.map(data, function (item) {
                        return {
                            value: item.DisplayName,
                            avatar: item.PicLocation,
                            rep: item.Reputation,
                            selectedId: item.UserUniqueid
                        };
                    }))
                }
            })
        },
        select: function (event, ui) {

            return selectedId; // **here im returning the required userId**
        }
    }).data("autocomplete")._renderItem = function (ul, item) {
        var inner_html = '<a><div class="list_item_container"><div class="image"><img src="' + item.avatar + '"></div><div class="label"><h3> Reputation:  ' + item.rep + '</h3></div><div class="description">' + item.label + '</div></div></a><hr/>';
        return $("<li></li>")
                .data("item.autocomplete", item)
                .append(inner_html)
                .appendTo(ul);
    };

}); 
```

我的问题是如何从另一个模块的视图模型中捕获这个返回的 userId？因此，我可以对 Actionmethod 进行 ajax 调用并检索必要的信息。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T08:27:27.083

我认为你应该在这里使用 URL 控制器。一旦用户从搜索框中选择了特定的用户配置文件，您就可以让应用程序导航到用户的配置文件页面。就像是：

```
Boiler.UrlController.goTo("user/"+ user.id); 
```

现在您的用户配置文件组件应该收听

```
controller.addRoutes({
    'user/{id}' : new UserComponent(context),
}); 
```

能够通过 URL 寻址您的业务对象总是好的。这增强了书签和保留浏览器历史记录的能力。

# nhibernate - 为什么 OnPostUpdate 中的 Session.Evict 会导致“可能的非线程安全访问会话”异常？

> ID：12726413
> 
> 赞同：8
> 
> 时间：2012-10-04T11:37:07.667
> 
> 标签：nhibernate

我有一个具有多个角色的用户。用户使用链接实体表链接到角色。我已将配置文件设置为在删除用户时级联删除用户角色链接实体。

我们目前正在使用软删除来删除实体。我们添加了一个由删除触发的软删除事件侦听器。当一个实体被删除时，它会触发将该`DeleteEntity`实体标记为已删除的事件。

我们还通过`OnPostUpdate`在实体上调用 Evict 来覆盖事件以从缓存中删除实体。

如果我创建一个没有任何角色的用户，然后将其删除，一切正常（如果级联禁用它也可以）。但是，如果我有一个分配了至少一个角色的用户并且我删除了该用户，那么在调用 Evict in 之后`OnPostUpdate`，我会收到一个 NHibernate 异常“NHibernate.AssertionFailure：可能的非线程安全访问会话”。

我已经尝试在`OnPostUpdate`中使用子会话来驱逐实体，但不会引发异常，但是实体不会被驱逐。

```
public void UserDelete(.....)
{
    var user = repository.Fetch<User>(id);

    repository.Remove(user);
    repository.Connection.Commit();
}

// soft delete event listener
protected override void DeleteEntity(NHibernate.Event.IEventSource session, object entity, ..)
{               
    var repositoryEntity = entity as deletableentity;
    if (repositoryEntity != null)
    {
        if (!repositoryEntity.IsDeleted)
        {
            // this marks the entity as deleted
            repositoryEntity.isDeleted = true;

            // cascade delete
            this.CascadeBeforeDelete(session, persister, repositoryEntity, entityEntry, transientEntities);
            this.CascadeAfterDelete(session, persister, repositoryEntity, transientEntities);          
        }
    }
}

public void OnPostUpdate(PostUpdateEvent @event)
{
    if (@event == null) throw new ArgumentNullException("event");

    var entity = @event.Entity as deletableentity;

    // Evict any entities that have been set as deleted from first level cache.
    if (entity != null && entity.IsDeleted)
    {
        @event.Session.Evict(entity);
    }
} 
```

关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T00:55:35.190

根据[https://forum.hibernate.org/viewtopic.php?p=2424890](https://forum.hibernate.org/viewtopic.php?p=2424890)另一种避免这种情况的方法是基本上调用

```
 session.save(s);
          session.flush(); // allow evict to work
          session.evict(s); 
```

并且问题的根源是“如果我已经从缓存中逐出实体，则 commit() 将不会在那里找到它”（即，这根本不是线程安全问题，而是缓存被修改的问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T09:47:39.433

发现了问题所在。使用软删除实际上会触发更新以设置 isDeleted 标志。因为映射中的这条线

```
 cascade="all" 
```

级联适用于**Update 和 Evict**操作。我的 postUpdate 将被触发 2 次，但同时 Evict 将尝试驱逐子实体。

解决方案是从映射文件中的级联中删除 Evict。现在它是：

```
 cascade="persist, merge, save-update, delete, lock, refresh" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:32:55.997

我遇到了同样的问题，但由于我使用的是 Fluent 映射，因此无法`Evict`从级联中排除。我的解决方案是避免调用`Evict`并从会话缓存中删除实体：

```
public void OnPostUpdate(PostUpdateEvent @event)
{
    var entity = @event.Entity as ISoftDeletable;
    if (entity != null && entity.Deleted)
    {
        IEventSource session = @event.Session;
        IEntityPersister persister = @event.Persister;

        var key = new EntityKey(@event.Id, persister, session.EntityMode);
        session.PersistenceContext.RemoveEntity(key);
        session.PersistenceContext.RemoveProxy(key);
    }
} 
```

# loops - 一万次cron作业还是循环一万次？

> ID：12726415
> 
> 赞同：3
> 
> 时间：2012-10-04T11:37:13.323
> 
> 标签：loops, cron

我有一个网络应用程序，可以在一天中向我的用户发送定制的电子邮件，有时是他们选择的。因此，在一天中的任何特定时间，我可能什么都不做，或者发送多达一万封电子邮件。

以前我通过一个 cron 作业解决了这个问题，每分钟触发一次。它会调用一个脚本来查找接下来需要发送的一千封电子邮件。该脚本会将它们全部标记为“进行中”，然后遍历它们，尝试发送它们。循环很重 - 调用远程 API 发送电子邮件，将记录更新为“已发送”，记录操作。我发现的问题是，有时循环会中断、失败、服务器会闪烁，并且数百封电子邮件会卡住并标记为“进行中”。

我现在重写了循环以获取需要发送的单个电子邮件，将其标记为“进行中”，将其发送，将其标记为“已发送”，记录它，然后获取下一封。我运行它一分钟，想多少循环就多少。但这确实是 cpu 密集型的，而且似乎效率很低，有很多 db 调用。

我现在在想，每封每日电子邮件都应该有自己的 cron 工作。然后我最终得到了一万个或更多的工作，调用一个特定的 URL，比如[http://mydomain.com/email/123/send](http://mydomain.com/email/123/send)。我在这里担心的是，我需要更新 cron 作业，例如时区和用户偏好更新（“在下午 6 点而不是上午 10 点向我发送电子邮件”）。所以我正在以编程方式重写我的 crontab，而且可能经常重写。

你将如何解决这个问题？顺便说一句，您知道任何旨在解决此问题的 Web 服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:38:54.513

10,000 个 cron 作业将导致 10,000 个可执行文件运行。我怀疑这将是您可用的可扩展性*最低*的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:46:48.127

这取决于您的确切需求，尽管 10k cron 作业看起来非常糟糕，无论如何。也许你可以有几个 cronjobs，每个选择一批邮件发送，以实现并行性并避免延迟发送底部的邮件？

此外，对于“以编程方式重写我的 cron”的部分，有可用的 cron 库。我通常使用[Quartz 来做](http://www.quartz-scheduler.org/)这种事情，但它可能对你的需求来说太臃肿了，所以也许你想使用一个更轻的库。

# java - 使用 java 中的 telnet 编辑远程文件

> ID：12726422
> 
> 赞同：0
> 
> 时间：2012-10-04T11:38:00.907
> 
> 标签：java, telnet, apache-commons-net

我已经使用 apache.commons.net 创建了一个 telnet 客户端。使用它我可以发送远程命令并将终端输出作为字符串。但是现在我也想编辑远程文件。我在远程系统上有`vi`和`ed`编辑器。如何我这样做。我正在使用输入和输出流来执行其他命令并获得如下结果：

```
in = telnet.getInputStream();
out = new PrintStream(telnet.getOutputStream()); 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T00:15:38.057

为此，您的 Java 程序需要完全模拟主机系统识别的终端类型。这意味着要跟踪服务器发送的所有转义序列，并跟踪虚拟屏幕上的内容和光标的位置。然后您需要发送适当的字符序列来控制光标移动，并处理（*和验证*）来自 vi 的反馈以完成编辑操作。

这将涉及对终端仿真机制的深入研究。

尝试在 Google 上搜索“Java vt100 模拟器”以帮助您入门。有几个项目可以提供一个起点。

# objective-c - 将 NSString 转换为 NSAttribtuedString 以进行绘图

> ID：12726423
> 
> 赞同：2
> 
> 时间：2012-10-04T11:38:06.387
> 
> 标签：objective-c, ios, nsstring, nsattributedstring

我有一个用代码绘制的字符串

`[@"-" drawInRect: r withFont: f2 lineBreakMode: UILineBreakModeWordWrap alignment: UITextAlignmentCenter];`

但是我想更改此字符串中的颜色，因为 NSString 无法做到这一点，我希望将其修改为 NSAttributedString。

但是这不起作用，这是我修改后的代码，我也找不到其他参数的属性

```
NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:f2,NSFontAttributeName,
                                        nil];

    NSAttributedString *drawingString = [[NSAttributedString alloc]  initWithString:@"-" attributes:attrsDictionary];

    [drawingString drawInRect:r]; 
```

任何帮助表示赞赏这是否是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:31:57.337

谢谢！这是我最终编辑的代码

```
 NSMutableParagraphStyle *paraAttr = [[NSMutableParagraphStyle defaultParagraphStyle ] mutableCopy];
    [paraAttr setAlignment:UITextAlignmentCenter];
    [paraAttr setLineBreakMode:UILineBreakModeWordWrap];

    NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:f2,NSFontAttributeName,
                                        [UIColor grayColor],NSForegroundColorAttributeName,
                                        paraAttr,NSParagraphStyleAttributeName,
                                         nil];

    NSAttributedString *drawingString = [[NSAttributedString alloc]  initWithString:@"•" attributes:attrsDictionary];

    [drawingString drawInRect:r]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:53:00.243

您还需要设置`NSForegroundColorAttributeName`属性。

这是一个[完整的列表](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688)- 在常量部分：

```
NSString *const NSFontAttributeName;
NSString *const NSParagraphStyleAttributeName;
NSString *const NSForegroundColorAttributeName;
NSString *const NSBackgroundColorAttributeName;
NSString *const NSLigatureAttributeName;
NSString *const NSKernAttributeName;
NSString *const NSStrikethroughStyleAttributeName;
NSString *const NSUnderlineStyleAttributeName;
NSString *const NSStrokeColorAttributeName;
NSString *const NSStrokeWidthAttributeName;
NSString *const NSShadowAttributeName;
NSString *const NSVerticalGlyphFormAttributeName; 
```

# sql-server - TSQL for xml 将模式属性添加到根节点

> ID：12726426
> 
> 赞同：3
> 
> 时间：2012-10-04T11:38:10.183
> 
> 标签：sql-server, xml, tsql, root

我的情况是这样的（简化）：

```
DECLARE @period XML = (
SELECT
'2012' 'period'
FOR XML PATH(''), ROOT ('survey'))

DECLARE @persons XML = (
SELECT
Person.Name 'users/person'
FROM Person
FOR XML PATH(''), ROOT ('company'))

SET @persons.modify('insert sql:variable("@period") as first into (/company)[1]')
SELECT @persons 
```

这给了我这样的 XML：

```
<company>
  <survey>
    <period>2012</period>
  </survey>
  <users>
    <person>Dubach</person>
  </users>
  <users>
    <person>Pletscher</person>
  </users>
  ... 
```

现在我需要向根节点添加一个 XML 模式，如下所示：

```
<company xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mydomain.com/xmlns/bla/blabla/myschema.xsd" xmlns="http://www.mydomain.com/xmlns/bla/blabla">
  <survey>
    <period>2012</period>
  </survey>
  <users>
    <person>Dubach</person>
  </users>
  <users>
    <person>Pletscher</person>
  </users>
  ... 
```

[微软说我必须在 SELECT 语句之前使用**WITH XMLNAMESPACES**](http://msdn.microsoft.com/en-us/library/ms177400%28v=sql.100%29.aspx)，但这在我的情况下不起作用。

如何添加这些 xmlnamespaces？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:46:54.997

从选择中拆分声明，然后`with xmlnamespaces`按照[描述](http://msdn.microsoft.com/en-us/library/ms177400%28v=sql.100%29.aspx)使用。

```
DECLARE @persons XML 

;with xmlnamespaces (
    'http://www.mydomain.com/xmlns/bla/blabla' as ns,
    'http://www.w3.org/2001/XMLSchema-instance' as xsi
)
select @persons = (
    select
        Person.Name as 'ns:users/person' 
        FROM Person 
    FOR XML PATH(''), ROOT ('company')
)

set @persons.modify('insert ( attribute xsi:schemaLocation {"http://www.mydomain.com/xmlns/bla/blabla/myschema.xsd"}) into (/company)[1]') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:53:57.757

我在这里找到了添加所有命名空间的解决方案：

[https://stackoverflow.com/a/536781/1306012](https://stackoverflow.com/a/536781/1306012)

显然这不是很“好”的风格，但在我的情况下它有效，我还没有找到另一个有效的解决方案。

**解决方案**

```
DECLARE @period XML = (
SELECT
'2012' 'period'
FOR XML PATH(''), ROOT ('survey'))

DECLARE @persons XML = (
SELECT
Person.Name 'users/person'
FROM Person
FOR XML PATH(''), ROOT ('company'))

SET @persons.modify('insert sql:variable("@period") as first into (/company)[1]')

-- SOLUTION
SET @persons = replace(cast(@persons as varchar(max)), '<company>', '<company xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mydomain.com/xmlns/bla/blabla/myschema.xsd" xmlns="">')

SELECT @persons 
```

# python - python时间序列分析包

> ID：12726432
> 
> 赞同：17
> 
> 时间：2012-10-04T11:38:28.377
> 
> 标签：python, pandas, time-series, forecasting, statsmodels

我正在研究python中的时间序列。我发现有用和有希望的图书馆是

*   熊猫；
*   statsmodel（用于 ARIMA）；
*   pandas 提供了简单的指数平滑。

也用于可视化：matplotlib

有谁知道指数平滑库？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-04T13:04:01.953

Pandas 具有指数加权的移动矩函数

[http://pandas.pydata.org/pandas-docs/dev/computation.html?highlight=exponential#exponentially-weighted-moment-functions](http://pandas.pydata.org/pandas-docs/dev/computation.html?highlight=exponential#exponentially-weighted-moment-functions)

顺便说一句，scikits.timeseries 包中不应该有任何功能在 pandas 中也不存在。

**编辑**：由于这仍然是一个流行的问题，现在有一个正在进行的拉取请求，以[在此处向 statsmodels 添加更多功能齐全的指数平滑](https://github.com/statsmodels/statsmodels/pull/1489)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T14:05:14.860

不知何故，有些问题被合并或删除了，所以我会在这里发布我的答案。

Python 原生的 Exp 平滑。

```
'''
simple exponential smoothing
go back to last N values
y_t = a * y_t + a * (1-a)^1 * y_t-1 + a * (1-a)^2 * y_t-2 + ... + a*(1-a)^n * y_t-n
'''
from random import random,randint

def gen_weights(a,N):
    ws = list()
    for i in range(N):
        w = a * ((1-a)**i)
        ws.append(w)
    return ws

def weighted(data,ws):
    wt = list()
    for i,x in enumerate(data):
        wt.append(x*ws[i])
    return wt

N = 10
a = 0.5
ws = gen_weights(a,N)
data = [randint(0,100) for r in xrange(N)]
weighted_data = weighted(data,ws)
print 'data: ',data
print 'weights: ',ws
print 'weighted data: ',weighted_data
print 'weighted avg: ',sum(weighted_data) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-13T10:29:15.343

您可以使用 Pandas 指数加权移动平均线[http://pandas.pydata.org/pandas-docs/stable/generated/pandas.stats.moments.ewma.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.stats.moments.ewma.html)预测未来值

```
from pandas.stats.moments import ewma
import numpy as np

pred_period = 12

def predict(x,span,periods = pred_period):     
    x_predict = np.zeros((span+periods,))
    x_predict[:span] = x[-span:]
    pred =  ewma(x_predict,span)[span:]

    return pred 
```

# java - 在 SecureRandom 类中使用“SHA1PRNG”

> ID：12726434
> 
> 赞同：6
> 
> 时间：2012-10-04T11:38:32.433
> 
> 标签：java, cryptography

我有一个基本问题。为什么在 SecureRandom 类中使用“SHA1PRNG”。如果有人解释它会很有帮助。提前致谢。

例如： SecureRandom.getInstance("SHA1PRNG");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-01T11:21:58.620

## 警告

在我看来，直接依赖这个算法是不好的。请[在 SO 上查看此答案，](https://stackoverflow.com/a/27638413/589259)其中我*说明了为什么*依赖特定`SecureRandom`算法是不好的。

请注意，尽管大多数运行时都会有一个带有`"SHA1PRNG"`实现的提供程序，但 Java 规范不需要**算法**的实现，因此`NoSuchAlgorithmException`如果您简单地假设它始终存在，它可能会失败。

## 简短的介绍

`"SHA1PRNG"` 是伪随机数生成器的名称（名称中的 PRNG）。这意味着它使用 SHA1 哈希函数来生成随机数流。SHA1PRNG 是 Sun 在当时推出的专有机制。

该实现的优点是 PRNG 独立于操作系统运行，它不依赖于例如`/dev/random`或`/dev/urandom`. 这可以带来性能优势，还可以帮助防止操作系统熵池（系统随机性所依赖的数据）耗尽。

## 算法的属性

SHA1 散列函数是创建 RNG 的输出，并在种子信息用于 PRNG 之前对其进行散列。SHA1PRNG 输出与内部状态分离（因此攻击者无法仅使用 RNG 的输出重新创建内部状态）。

内部状态相对较大（当前限制为 160 位，哈希大小，用于 Java 1.7 中的 SHA1PRNG）。这意味着几乎不可能创建循环。如果多次遇到相同的内部状态，则会创建一个循环 - 以下状态也将相同（除非使用 添加额外的熵[`setSeed()`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html#setSeed(byte[]))）。

不幸的是，没有对可用算法的明确描述，并且不同的提供者可能会以不同的方式实现它，通常试图模仿 Java 的实现（有时很糟糕甚至不安全）。

## 确定性操作

PRNG 是确定性的。这意味着它们将始终从相同的输入材料（“种子”）生成相同的随机数流。然而，当首次访问随机池时，SUN SHA1PRNG 将根据从操作系统检索到的熵为自己播种。在这种情况下，随机值将无法与真正的随机数生成器区分开来。

SUN SHA1PRNG 的一个特殊属性是，如果在使用其中一种检索随机值的方法访问随机池*之前*调用它，它*只会*使用给定的种子。在这种情况下，流将仅取决于给定的种子和实现的算法；在这种情况下，PRNG 是完全确定的；如果调用相同的方法，它将始终返回相同的“随机”值。`setSeed()`*`nextXxx()`*

 *这在测试期间很有用，但请*不要在生产代码中依赖此属性*。甚至 SUN SHA1PRNG 实现也发生了变化，因此您不能依赖输出在不同版本中保持不变。

## 笔记

请注意，SHA1PRNG 的实现可能因 JCA 提供者/不同的运行时而异。与 SUN SHA1PRNG 相比，Android 上的代码尤其不同且稳定性较差。**请仅用`SecureRandom`于其预期目的：生成安全随机值**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:41:17.997

请参阅有关该主题的[IBM 文档](http://www.ibm.com/support/knowledgecenter/SSYKE2_7.1.0/com.ibm.java.security.component.71.doc/security-component/ibmsecurerandom/ibmsecurerandom.html)。它只是确保生成的随机数尽可能接近“真正随机”。容易猜到的随机数会破坏加密。*

# linqpad - 如何从 LINQPad 脚本文件中获取连接密码？

> ID：12726436
> 
> 赞同：4
> 
> 时间：2012-10-04T11:38:43.103
> 
> 标签：linqpad, password-recovery

我有一个 LINQPad 脚本文件`*.linq`，并且有一个用于数据库连接的密码。如何提取密码？（看起来像是 Base64 编码的二进制数据。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T13:40:19.383

LINQPad 使用 DPAPI 加密密码。因此，只有将 .LINQ 文件与同一用户保存在同一台计算机上时，才能提取它。

如果是这种情况，您可以通过打开 .LINQ 文件并将查询更改为以下方式来提取它：

```
Connection.ConnectionString 
```

# latex - RStudio 中 \section 的快捷方式

> ID：12726440
> 
> 赞同：1
> 
> 时间：2012-10-04T11:38:56.357
> 
> 标签：latex, rstudio

是否可以在 RStudio 的 Tex 部分中为部分、小节等创建“快捷方式”？类似于 R 部分，其中在##### Title ##### 中包装“标题”会在控制台窗口正上方创建一个下拉窗帘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T04:30:24.260

您可以使用空代码块。它将创建跳转菜单条目的生成，允许快速跳转并启用折叠而不改变输出。

![跳转菜单](../Images/0a343d84269084f9669614a38ab7d573.png)

这是玩具内容...

```
\documentclass{article}
\usepackage{Sweave}
\SweaveOpts{concordance=TRUE}

\title{Sample Sweave Document}
\author{Thell Fowler}

\begin{document}

\maketitle

\section*{Introduction}
<<\section*{Introduction}>>=
@
Some actual content.

\section{Concept}
<<\section{Concept}>>=
@
Some other content.

\subsection*{Algorithm}
<<\subsection*{Algorithm}>>=
@
<<HelperFunctions>>=
HelperFunction1 <- function() {
  print( "That helped!")
}
HelperFunction2 <- function() {
  print( "Oh, that helped too!")
}
@

<<MainFunction>>=
main <- function() {
  print( "I need some help!")
  HelperFunction1()
  cat( "\tbut not enough!  Let's get more help...\n")
  HelperFunction2()
  cat( "That's much better!\n")
}
@

\subsection*{Example}
<<\subsection*{Example}>>=
@

<<Example>>=
# We can get help.
main()
@

\subsubsection*{Pros}
<<\subsubsection*{Pros}>>=
@

\subsubsection*{Cons}
<<\subsubsection*{Cons}>>=
@

\end{document} 
```

它可能看起来很痛苦，但它非常直接和简单。
[后跟 VIM 模式键]

1.  使用格式下拉菜单创建部分，或者只需键入它以将手放在键盘上。
2.  复制该行或您想要的任何部分。
    `0``y``E`
3.  创建/插入代码块。
    `CTRL`+ `Alt`+`I`
4.  粘贴内部 <> 之间的文本。
    `P`
5.  删除函数中的空白行，或在定义中添加 echo=FALSE。
    `j``d``d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:26:38.867

抱歉，不，这在 RStudio for Sweave/TeX 文档中没有实现。

# jquery - jQuery clone() 和 append()

> ID：12726443
> 
> 赞同：0
> 
> 时间：2012-10-04T11:39:02.523
> 
> 标签：jquery, html, dom, clone

我有一个简单的表：

```
<table id='table_actions'">
    <tbody class='actions_body'>
        <tr>
            <td colspan=2 class="taskname"><strong>1\. </strong><span name='taskname'>name</span></td>
        </tr>
        <tr>
            <td>Действие: </td>
            <td>
                <select name='action_action'>
                    <option value="1">Consult</option>
                    <option value="2">Activate</option>
                    <option value="3">Connect</option>
                </select>
            </td>
        </tr>
        <tr>
            <td><button id='addaction' class="btn">Добавить действие</button></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

和jQuery代码：

```
$('#addaction').click(function() {
    $('.actions_body tr:not(:last)').clone()
      .insertBefore($('#table_actions tr:last'));
});

$('select[name=action_action]').change(function() {
    alert();
}); 
```

我的问题：通过更改表的**克隆部分**中的选择，没有警报。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:40:06.917

使用`withDataAndEvents`布尔参数：

```
$('.actions_body tr:not(:last)').clone(true) 
```

> **.clone( [withDataAndEvents] )**
> 
> withDataAndEvents 一个布尔值，指示是否应将事件处理程序与元素一起复制。

[文档](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:41:43.193

问题是因为更改事件是在页面加载时绑定的，而克隆的元素当时显然不存在。您需要将事件处理程序委托给父级。试试这个：

```
$('#table_action').delegate('select[name=action_action]', 'change', function() {
    alert();
}); 
```

或者，您可以传递一个布尔参数来`clone()`克隆带有附加事件的元素。

# css - 删除 div 之间的空白空间

> ID：12726444
> 
> 赞同：1
> 
> 时间：2012-10-04T11:39:13.073
> 
> 标签：css, html, whitespace, removing-whitespace

这似乎是一个常见问题，我尝试了几种解决方案，但似乎没有一个对我有用。每个 div 之间应该有 10px 的空间，但在最上面的 div 上应该有 20px 的空间。

我更改了行高、填充、边距、定位和块。确实有一个空的

标签（这是另一个问题！），但即使该标签被删除/边距重置，问题也不会消失。有任何想法吗？

在这张图片中，您可以看到我已经使用我的 CSS 编辑器选择了 div。顶部没有可见的填充（用虚线表示，没有边距。但是，内部灰色 div 和外部白色 div 之间有空间 [。http://www.ims4u.net/settlements/](http://www.ims4u.net/settlements/)

[http://i.stack.imgur.com/uWJeC.png](http://i.stack.imgur.com/uWJeC.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:46:53.880

........**演示** [http://jsfiddle.net/46wGt/2/](http://jsfiddle.net/46wGt/2/) ...................... ...

将此**css**写入 您的 css 文件

```
#content.hfeed.content{
padding-top:0;
} 
```

***[现场演示](http://jsfiddle.net/46wGt/2/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:44:58.170

你的容器和你的内容一样有一个 10px 的填充顶部。删除一个或另一个，你会很高兴的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:01:29.747

这个问题说明了将 CSS 重置作为样式的一部分的原因。大多数浏览器都有默认样式，可以改变用户体验的外观和感觉。

您可以包含一个完整的重置，该重置考虑了许多功能/错误，例如[http://necolas.github.com/normalize.css/2.0.1/normalize.css](http://necolas.github.com/normalize.css/2.0.1/normalize.css) ，或者您可以包含一些更轻量级的东西，例如[http ://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)。

这将帮助您解决诸如“为什么 Firefox 看起来像……，但 IE 看​​起来像……？”这样的问题。

如果您使用其中之一，它将删除许多浏览器添加到`html`标签的默认 10px 边距（或者它是`body`标签？不记得了......）

# c# - 打开另一个窗体后关闭一个窗体

> ID：12726448
> 
> 赞同：2
> 
> 时间：2012-10-04T11:39:34.227
> 
> 标签：c#, winforms, c#-4.0, button

在我的应用程序中，我使用了两种形式`mainform`和`subForm`. 有简单的`mainForm`登录应用程序。单击中的按钮 ( `btnClick`) `mainForm`（如果登录凭据匹配），它应该被定向到`subForm`. 这我可以轻松做到。但问题是`mainForm`仍然可见，每当我关闭`mainForm`它时，它也会关闭`subForm`. 我不想发生这种情况。如果我`this.Close()`在功能发生后给出同样的问题。“打开后
如何关闭。”`mainForm``subForm`

我试过下面的代码：

**btnClick 事件**：

```
 subForm newSubForm = new subForm();
            newSubForm.Show();
            newSubForm.RegisterMainForm(this);
            this.Close(); 
```

RegisterMainForm 只是一个考虑实际的内部方法`subForm`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:49:55.817

一旦关闭主窗体，应用程序的消息循环就会终止，这会导致整个应用程序退出。Windows 消息循环与您的主窗体相关联，因为那是您启动 Application.Run(new mainform()) 的那个。

在 Program.cs 中尝试其他方法

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        MainForm mf  = new MainForm();
        if (mf.ShowDialog() == DialogResult.OK) 
        {  
           subForm newSubForm = new subForm();   
           newSubForm.RegisterMainForm(this);                        
           Application.Run(newSubForm); 
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:46:09.703

尝试以下

```
 subForm newSubForm = new subForm();
        newSubForm.Parent = this;
        newSubForm.ShowDialog();
        this.Hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T18:58:58.037

我不知道你为什么要关闭你的`mainForm`. 在这种情况下，`mainForm`是应用程序可执行形式。如果您关闭`mainForm`，所有其他表单也将关闭。

你真正想做的是什么？我认为您的表格命名有点令人烦恼。`mainForm`对我来说意味着你的应用程序的主要部分将以这种形式执行，是吗？

您为什么不构建一个`LoginForm`在您的应用程序启动并且当前未验证用户后将显示的内容？我认为这不应避免您的目的，并且将是一个干净的解决方案。

**一些代码示例：**

```
public partial class MainForm : Form
{
    private bool isVerified = false;

    public MainForm()
    {
        InitializeComponent();
        InitializeLogin();
    }

    private void MainForm_Load(object sender, EventArgs e)
    {

    }

    private void InitializeLogin()
    {
        if (!isVerified)
        {
            using (LoginForm login = new LoginForm())
            {
                if (login.ShowDialog() == DialogResult.OK)
                {
                    MessageBox.Show("Login successful!");
                    isVerified = true;
                }
            }
        }
        else
        { }
    } 
```

这是`LoginForm`, 将在 Mainform 初始化并且当前没有经过验证的用户后调用。请注意，这只是演示代码，但可能是一种可能的实现。

```
public partial class LoginForm : Form
{

    public LoginForm()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (IsUser())
        {
            // the DialogResult of the Form must be set 
            this.DialogResult = System.Windows.Forms.DialogResult.OK;    
        }
    }

    private bool IsUser()
    {
        return true;
    } 
```

另一个想法是构建一个引导程序，`Application.Run()`在加载任何表单之前管理您的方法，如 Sathish Raja S 解决方案。

**一些额外的想法：**

*   避免用户在用户名/密码文本框填充凭据之前单击登录按钮。
*   您可以更灵活地构建它并扩展 LoginForm 以验证应用程序的特殊密码保护部分的用户，但是第一个“版本”可以在应用程序范围内重用。

# java - 带有不同消息的 java swing 工具提示

> ID：12726449
> 
> 赞同：3
> 
> 时间：2012-10-04T11:39:36.737
> 
> 标签：java, swing, tooltip, system-tray

java swing中有什么方法可以显示带有不同消息的工具提示，实际上我正在开发一个应用程序，我必须在系统任务托盘中的工具提示上更新应用程序的当前状态。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:25:05.470

+1 丹和纪尧姆·波莱特。只需`setToolTipText()`在`trayIcon`组件上使用。

我为你做了一个简短的例子。

它将创建一个`TrayIcon`并将其添加到`SystemTray`. 之后`ToolTip`将`TrayIcon`每 5 秒更新一次：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;
import java.net.URL;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class SystemTrayExample {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new SystemTrayExample().createAndAddTrayIcon();
            }
        });
    }

    private void createAndAddTrayIcon() {
        try {
            initComponents();
        } catch (MalformedURLException ex) {
            ex.printStackTrace();
        }
    }

    private void initComponents() throws MalformedURLException {

        //Check the SystemTray is supported
        if (!SystemTray.isSupported()) {
            System.out.println("SystemTray is not supported");
            return;
        }
        final PopupMenu popup = new PopupMenu();
        final TrayIcon trayIcon = new TrayIcon(Toolkit.getDefaultToolkit().createImage(new URL("http://docs.oracle.com/javase/tutorial/uiswing/examples/misc/TrayIconDemoProject/src/misc/images/bulb.gif")));
        trayIcon.setToolTip("I am the initial message");

        final SystemTray tray = SystemTray.getSystemTray();

        // Create a pop-up menu components
        MenuItem exitItem = new MenuItem("Exit");
        exitItem.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });

        //Add components to pop-up menu
        popup.add(exitItem);

        //set popmenu
        trayIcon.setPopupMenu(popup);

        try {
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.out.println("TrayIcon could not be added.");
        }

        int delay = 5000; //milliseconds
        final Timer timer = new Timer(delay, new ActionListener() {

            int count = 1;

            @Override
            public void actionPerformed(ActionEvent evt) {

                System.out.println("Updating on EDT " + (SwingUtilities.isEventDispatchThread() ? "Yes" : "No"));

                if (count == 3) {
                    trayIcon.setToolTip("I am the last message");
                    ((Timer) evt.getSource()).stop();//stop timer
                }
                if (count == 2) {//check if we should change tooltip
                    trayIcon.setToolTip("I am the second message");
                }
                if (count == 1) {
                    trayIcon.setToolTip("I am the  first message");
                }

                count++;

            }
        });

        timer.start();//start timer to change tooltip
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:15:21.213

因为`TrayIcon`，你有方法`trayIcon.setToolTip`。您可以随时调用它，它会立即更新，即使在将托盘图标添加到系统托盘之后也是如此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T11:55:17.363

`JComponent`您可以通过调用该`setToolTipText()`方法在运行时更改 any 的工具提示。

# regex - Oracle REGEXP_REPLACE 大写替换字符串

> ID：12726450
> 
> 赞同：5
> 
> 时间：2012-10-04T11:39:37.887
> 
> 标签：regex, oracle, replace

我试图将我的 reg 表达式中的替换字符串大写但没有成功：

```
SELECT regexp_replace('src=/i/uie_v2/js','(/uie_v2/)',upper('\1')) from dual 
```

返回`'src=/i/uie_v2/js'`

我知道不能使用鞋面..仅作为示例。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:10:53.350

AFAIK，你不能直接这样做，但你可以把字符串拆开并重建它：

```
SELECT regexp_replace('src=/i/uie_v2/js','(.*)(/uie_v2/)(.*)', '\1') ||
  upper(regexp_substr('src=/i/uie_v2/js','(/uie_v2/)')) || 
  regexp_replace('src=/i/uie_v2/js','(.*)(/uie_v2/)(.*)', '\3')
from dual 
```

我从[REGEXP 上的 OTN 论坛帖子中](https://forums.oracle.com/forums/thread.jspa?threadID=623330)得到了这个想法。

# joomla - 如何在 joomla 2.5 中使用参数

> ID：12726451
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:39:38.737
> 
> 标签：joomla

我是 joomla 的新手，我想开发一个模块，我想在其中使用菜单项中的参数值到我的模块中。所以我想知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:47:52.753

```
<?php
    //lets take article param for example

    $articleId = JRequest::getInt('id');
    $params = new JParameter( $articleId );

    //supose you want fetch image

    $image  = $params->get( 'image' );
    ?> 
```

欲了解更多信息，请访问此[链接](http://api.joomla.org/11.4/Joomla-Platform/Parameter/JParameter.html)

# solr - 是否可以使 Solr 查询跨越按公共字段值分组的多个文档？

> ID：12726452
> 
> 赞同：0
> 
> 时间：2012-10-04T11:39:48.157
> 
> 标签：solr

是否可以在 Solr 索引中的多个文档中进行搜索，这些文档共享一个公共字段值并让 Solr 将其视为一个文档？

假设我将一本书的每一章作为单独的文档上传到 Solr，但它们共享一个公共字段，`book`即书名。

```
<doc>
  <field name="id">book1_chap01</field>
  <field name="book">book1</field>
  <field name="text">The proof is in the pudding.</field>
</doc>
<doc>
  <field name="id">book1_chap02</field>
  <field name="book">book1</field>
  <field name="text">The concept is different than the reality.</field>
</doc> 
```

如果您现在搜索`proof AND concept`它不会返回任何内容，因为这些词出现在单独的文档中。

我希望`proof AND concept`对所有共享共同账面价值“book1”的文档进行搜索，就好像它们是一个文档一样。

在 Solr 中这样的事情是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:55:49.970

我相信 Solr 4.0 中可用的[Join](http://wiki.apache.org/solr/Join)操作可能会对此有所帮助。

以下查询适用于上述情况：

```
http://localhost:8080/solr4b/collection1/select?q={!join%20from=title%20to=title}text:proof%20AND%20pudding 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:54:23.077

您可以过滤 book1 的结果，然后调用 OR 查询。这将等同于您要查找的内容。查询应如下所示：

```
q=proof OR concept&fq=book:book1 
```

# c# - 当我尝试读取 .aspx 文件时，StreamReader 文件路径错误

> ID：12726453
> 
> 赞同：0
> 
> 时间：2012-10-04T11:39:58.093
> 
> 标签：c#, asp.net, webforms

我需要根据模板 NewsletterTemplate.aspx 文件发送电子邮件通讯。

我需要将 ArticleID 和 Language 传递给文件夹“_admin”下的 NewsletterTemplate.aspx 文件。

出于某种原因，它给了我以下错误 `System.ArgumentException: Illegal characters in path.`，如果我从中删除 QueryString 部分，`URL`那么它不会产生任何错误，但我无法提取文章

下面是代码示例。我将不胜感激这方面的帮助

```
String to, subject, message;
bool isHtml;
isHtml = true;
to = txtEmail.Text;
subject = txtEmailSubject.Text;

ListDictionary replacements = new ListDictionary();
string MessageBody = String.Empty;
string filePath = System.Web.HttpContext.Current.Request.PhysicalApplicationPath;

//String TemplatePath = "\_admin\NewsletterTemplate.aspx?ArticleID=" + ddArticleList.SelectedItem.Value.ToString() + "&Language=1";

using (StreamReader sr = new StreamReader(filePath + @"\_admin\NewsletterTemplate.aspx?ArticleID=" + ddArticleList.SelectedItem.Value.ToString() + "&Language=1"))
{
    MessageBody = sr.ReadToEnd();
}
MailDefinition mailDef = new MailDefinition();
MailMessage msgHtml = mailDef.CreateMailMessage(to, replacements, MessageBody, new System.Web.UI.Control());
message = msgHtml.Body.ToString();
//send Email
Helper.SendEmailNewsletter(to, subject, message, isHtml); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:42:23.160

StreamReader 构造函数需要传递一个文件名，而不是 URL 地址。文件名中不能有查询字符串参数。

如果要传递查询字符串参数，可以使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类向 Web 表单发送 HTTP 请求：

```
using (var client = new WebClient())
{
    MessageBody = client.DownloadString("http://example.com/NewsletterTemplate.aspx?ArticleID=" + HttpUtility.UrlEncode(ddArticleList.SelectedItem.Value.ToString()) + "&Language=1");
} 
```

# c# - 在 RichTextBox 中设置文本

> ID：12726460
> 
> 赞同：1
> 
> 时间：2012-10-04T11:40:20.653
> 
> 标签：c#, wpf, richtextbox

> **可能重复：**
> [RichTextBox (WPF) 没有字符串属性“Text”](https://stackoverflow.com/questions/957441/richtextbox-wpf-does-not-have-string-property-text)

这太荒谬了，我的 RichTextBox 没有文档或段落属性。我应该如何通过 C# 向它添加文本？

```
<ScrollViewer Margin="16,56,16,16">
                <RichTextBox x:Name="PREVIEWTEMP"
                             HorizontalContentAlignment="Stretch"
                             VerticalContentAlignment="Top"
                             Padding="0,6,0,0"
                             Height="528"
                             Width="400"
                             IsReadOnly="True">
                    <Paragraph>
                        <Run Text="RichTextBox" />
                    </Paragraph>
                </RichTextBox>
            </ScrollViewer> 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:16:03.100

您可以创建一个继承自 RichTextBox 的 RichTextViewer，如此处所示[（](https://stackoverflow.com/questions/2361219/bind-the-text-of-richtextbox-from-xaml) e-rock 发布）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:42:50.773

段落需要位于元素内。

看看这个网站，它有一些很好的例子[http://www.c-sharpcorner.com/UploadFile/mahesh/wpf-richtextbox/](http://www.c-sharpcorner.com/UploadFile/mahesh/wpf-richtextbox/)

# c++ - 获取迭代器范围的每个第 n 个元素

> ID：12726466
> 
> 赞同：7
> 
> 时间：2012-10-04T11:40:55.147
> 
> 标签：c++, boost, iterator, std

是否有一个迭代器的标准实现（意味着 stdlib 或 boost），它包装了另一个迭代器并只给出它的每个第 n 个元素？

我首先认为这可以通过合适的谓词和 boost::filter_iterator 来实现，但是谓词只获取值而不是基迭代器，因此它无法判断到开始的距离。

**编辑**
以提供更多信息：迭代器应与`std::transform`或之类的函数兼容`std::copy`。所以它应该像 stdlib 迭代器一样使用。

类似的问题：
[C++/STL: std::transform with given stride?](https://stackoverflow.com/questions/2476425/c-stl-stdtransform-with-given-stride)
[具有非随机访问迭代器的非单元迭代器步幅](https://stackoverflow.com/questions/9387569/non-unit-iterator-stride-with-non-random-access-iterators)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T11:51:16.607

Boost.Range 提供[了一个跨步适配器](http://www.boost.org/doc/libs/1_51_0/libs/range/doc/html/range/reference/adaptors/reference/strided.html)。使用`boost::begin`/`boost::end`将使您获得关联的迭代器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T11:52:34.407

您可以使用`boost::filter_iterator`如下谓词：

```
 template< typename T, int N >
 struct EveryNth {
    bool operator()(const T&) { return m_count++ % N == 0; }
    EveryNth() : m_count(0) {}
    private:
      int m_count;
 }; 
```

# php - PHP 和 MySQL 中的自动化 SMS

> ID：12726470
> 
> 赞同：-2
> 
> 时间：2012-10-04T11:41:01.517
> 
> 标签：php, sms

我有 MySQL 数据库，其中一列包含用户手机号码。

每位用户每 6 个月将获得一次考试成绩

当我将这些结果上传到数据库时，它们各自的结果应该使用 PHP 自动发送到各自的用户手机号码

任何人都可以建议我应该得到什么要求以及完成这项工作的脚本

并且 SMS 服务应该在印度

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:42:50.463

调查 SMS 提供商。我以前曾与 esendex 合作过，它们看起来很简单： [http ://www.esendex.co.uk/](http://www.esendex.co.uk/)

周围的供应商很少，只是谷歌它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:44:14.300

看看这些家伙的 API（英国） - [http://www.textlocal.com/](http://www.textlocal.com/)

您需要为每条消息支付一点费用，但他们的 API 非常简单，可以连接到您现有的应用程序。

谷歌它为其他人 - 像[Merca](https://stackoverflow.com/users/551451/merca) [建议](https://stackoverflow.com/a/12726502/1169669)！

# c# - 我们可以对文件 I/O 操作进行单元测试吗

> ID：12726472
> 
> 赞同：2
> 
> 时间：2012-10-04T11:41:05.323
> 
> 标签：c#, visual-studio-2010, unit-testing, file-io

我们可以使用 VS2010 对 C# 中的文件 I/O 操作进行单元测试吗？由于单元测试访问数据层效率不高，我们是否需要对操作进行单元测试，或者是否有任何模拟或假操作来这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:47:05.677

当您需要实际访问文件系统或另一个系统时，您在这里谈论的更多是集成测试。

在进行单元测试时，您需要模拟这样的事情，您需要使用依赖注入，例如使用统一和“模拟”文件系统。

以下是寻找模拟文件系统的代码的好地方。

[http://systemwrapper.codeplex.com/](http://systemwrapper.codeplex.com/)

[http://systemwrapper.codeplex.com/](http://systemwrapper.codeplex.com/)

[http://jolt.codeplex.com/](http://jolt.codeplex.com/)

[http://www.typemock.com/](http://www.typemock.com/)

关于嘲笑的一般信息......

[http://martinfowler.com/articles/mocksArentStubs.html#ClassicalAndMockistTesting](http://martinfowler.com/articles/mocksArentStubs.html#ClassicalAndMockistTesting)

以下链接显示了如何将依赖注入与统一使用...

[http://www.codeproject.com/Articles/254091/Implementing-Microsoft-Unity-Design-Pattern](http://www.codeproject.com/Articles/254091/Implementing-Microsoft-Unity-Design-Pattern)

亲切的问候

马修·齐隆卡

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:48:44.080

你能写一些看起来像单元测试的东西来验证文件 I/O 吗？绝对地。

但你可能不应该。

您希望您的单元测试非常快并且具有尽可能少的外部依赖项。文件 IO 非常慢（相对而言），并且将取决于有关文件系统的大量细节。

在您的单元测试中 - 您可能只关心您的代码是否成功调用了 Write 操作或调用了 .Close() 方法。您可以对该行为进行单元测试。

如果您真的想测试您的应用程序是否与文件系统正确交互 - 您的问题将变成关于集成测试或端到端测试；但不是单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:46:25.550

这是什么意思？您能否详细说明您要完成的工作？单元测试应该只测试明确定义的单元，其职责清晰简洁，依赖尽可能少。它不应该测试任何需要引用文件系统、数据库等的操作。在这种情况下使用模拟/存根。

这是一组模拟： [https ://stackoverflow.com/questions/37359/what-c​​-sharp-mocking-framework-to-use](https://stackoverflow.com/questions/37359/what-c-sharp-mocking-framework-to-use)

# cakephp - 在 cakephp 2.0 中抛出异常总是会导致 500 内部错误

> ID：12726473
> 
> 赞同：0
> 
> 时间：2012-10-04T11:41:10.950
> 
> 标签：cakephp, exception-handling, http-status-code-404

我的 AppController 中有以下代码，我用它来拦截 404 并预先运行一些代码。现在，我在调试时将其全部还原为基础。

```
public function appError($error) {
  throw new NotFoundException();
} 
```

异常名称此时无关紧要，我的问题是无论我抛出什么异常都会导致 500 错误。

我想要做的就是抛出一个 404 并显示我的 404 页面，如果我在我的应用程序中输入一个不存在的 URL，它可以正常工作。

有什么我遗漏的东西导致了这个 500 吗？我无法收到任何有意义的错误消息，因为它只是显示异常错误 500。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:46:48.910

好的，修复了，这就是我所做的：

由于 ADmad 友好地指出我正在创建一个无限循环，因此我执行了以下操作：

```
/**********************************
/Lib/Error/AppExceptionRenderer.php
***********************************/

App::uses('ExceptionRenderer', 'Error');

class AppExceptionRenderer extends ExceptionRenderer {

    public function error400($error) {
        /***********************
        INSERT MY OWN MAGIC HERE
        ***********************/
        $message = $error->getMessage();
        if (Configure::read('debug') == 0 && $error instanceof CakeException) {
            $message = __d('cake', 'Not Found');
        }
        $url = $this->controller->request->here();
        $this->controller->response->statusCode($error->getCode());
        $this->controller->set(array(
            'name' => $message,
            'url' => h($url),
            'error' => $error,
            '_serialize' => array('name', 'url')
        ));
        $this->_outputMessage('error400');
    }
} 
```

而且我还发现我必须将其添加到 /Config/core.php

```
Configure::write('Exception', array(
        'handler' => 'ErrorHandler::handleException',
        'renderer' => 'AppExceptionRenderer',
        'log' => true
)); 
```

如果要包含组件，请引用 ADmad：

“异常渲染器引用了控制器，它是 CakeErrorController 的一个实例。使用**$this->controller->Components->load()**来加载您的组件。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:45:22.803

在 appError() 本身中抛出异常只会导致循环，并且 cake 会以 500 错误退出

# java - Spring MVC 控制器请求 url 映射

> ID：12726474
> 
> 赞同：0
> 
> 时间：2012-10-04T11:41:12.567
> 
> 标签：java, spring, controller

> **可能重复：**
> [Tiles 2 And No mapping found for HTTP request with URI - Spring-MVC](https://stackoverflow.com/questions/2977446/tiles-2-and-no-mapping-found-for-http-request-with-uri-spring-mvc)

我不明白我的代码有什么问题。请你帮助我好吗。这里的代码：

springapp-servlet.xml 包含：

```
 <mvc:annotation-driven/>

    <context:component-scan base-package="controllers"/>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean> 
```

控制器类：

```
package controllers;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import java.util.HashMap;
import java.util.Map;

@Controller
@RequestMapping(value = "/views")
public class TestController {

    @RequestMapping(value = "/index", method = RequestMethod.GET)
    public ModelAndView viewEvents() {
        Map model = new HashMap();
        model.put("result", "TestResult");
        return new ModelAndView ("page1", model);
    }
} 
```

我认为当我打开 url localhost:8080/myapp/views/index.jsp 时，控制器必须调度此请求并将我重定向到 page1，其中变量结果将可用。但相反，我在我的 jBoss 控制台中收到警告，但没有发生任何事情：

```
WARN  [org.springframework.web.servlet.PageNotFound] (http--127.0.0.1-8080-1) No mapping found for HTTP request with URI [/jammies-1.0/WEB-INF/views/views/page1.jsp] in DispatcherServlet with name 'myapp' 
```

我的代码和配置文件有什么问题？提前致谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:21:51.477

正如肯特所提到的，你在views/views 文件夹下有page1.jsp 吗？您可能在视图中没有 page1.jsp 在视图/视图中

# c# - 尝试添加一对多关系时出现 NullReferenceException

> ID：12726480
> 
> 赞同：4
> 
> 时间：2012-10-04T11:41:40.560
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, asp.net-mvc-4

`Item`可以包含多个`Sizes`. 当我尝试为我的项目添加新尺寸时，它会引发`NullReference`错误。当我尝试将图像添加到我的项目时，也会发生同样的事情。

> 你调用的对象是空的。

## 代码

```
var size = new Size(){
    BasePrice = currentBasePrice, // not null, checked in debugger
    DiscountPrice = currentDiscountPrice // not null, checked in debugger
};

// item is not null, checked in debugger
item.Sizes.Add(size); // nothing here is null, however it throws null reference error here 
```

## 项目型号

```
public class Item
{
    public int ID { get; set; }
    public int CategoryID { get; set; }
    virtual public Category Category { get; set; }
    virtual public ICollection<Size> Sizes { get; set; }
    virtual public ICollection<Image> Images { get; set; }
} 
```

## 尺寸型号

```
public class Size
{
    public int ID { get; set; }
    public int ItemID { get; set; }
    virtual public Item Item { get; set; } // tried to delete this, did not help
    public decimal BasePrice { get; set; }
    public decimal? DiscountPrice { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T11:43:35.067

您需要向 Item 添加一个初始化 Sizes 集合的构造函数。自动属性简化了后备变量，但不对其进行初始化。

```
public Item() 
{
    this.Sizes = new List<Size>();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:43:43.820

我认为那`Item.Sizes`是空的。您尚未初始化集合，因此`item.Sizes.Add`抛出`NullReferenceException`.

```
public class Item
{
    public int ID { get; set; }
    public int CategoryID { get; set; }
    virtual public Category Category { get; set; }
    virtual public ICollection<Size> Sizes { get; set; }
    virtual public ICollection<Image> Images { get; set; }

    public Item()
    {
        Sizes = new List<Size>();
    }
} 
```

# wordpress - 在 woocommerce 中的类别下添加子类别

> ID：12726487
> 
> 赞同：1
> 
> 时间：2012-10-04T11:42:08.127
> 
> 标签：wordpress

我正在使用 woocommerce 插件来开发电子商务网站。使用此插件一切正常。但是当涉及到类别和子类别时，它就有点问题了。实际上我希望在类别下会有子类别的列表。但在 woocommerce 中，只有类别出现在列表中。那么有人可以告诉我该怎么做吗？任何帮助和建议都是非常值得赞赏的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:29:18.613

您有子类别中的项目吗？

请参阅下面的代码，其中显示了每个链接到其类别存档的产品类别列表。重要的一点是“hide_empty-0”，它告诉 WordPress 显示空类别

```
<?php $tax_terms = get_terms('product_cat', 'hide_empty=0' ); ?>
<ul>
  <?php foreach ($tax_terms as $tax_term) {
    echo '<li>' . '<a href="' . esc_attr(get_term_link($tax_term, $taxonomy)) . '" title="' . sprintf( __( "%s" ), $tax_term->name ) . '" ' . '>' . $tax_term->name.'</a></li>'; 
```

} ?>

# vb.net - 如何将 WinRT 中的图像绑定到列表框

> ID：12726496
> 
> 赞同：0
> 
> 时间：2012-10-04T11:42:33.703
> 
> 标签：vb.net, xaml, windows-8, windows-runtime

我是 xaml 编程的新手。我一直在尝试将多个图像绑定到列表框，但没有成功。我可以在 winrt 应用程序中看到文本，但看不到图像。下面是代码：

```
Imports Windows.Storage.Pickers
Imports Windows.Storage

Public NotInheritable Class MainPage
    Inherits Page

    Dim p As System.Uri

    ''' <summary>
    ''' Invoked when this page is about to be displayed in a Frame.
    ''' </summary>
    ''' <param name="e">Event data that describes how this page was reached.  The Parameter
    ''' property is typically used to configure the page.</param>
    Protected Overrides Sub OnNavigatedTo(e As Navigation.NavigationEventArgs)

    End Sub

Private Async Sub SelectFileName_Click(sender As Object, e As RoutedEventArgs) Handles _SelectFileName.Click

        Dim SelectedFileNameObject As New FileOpenPicker
        SelectedFileNameObject.FileTypeFilter.Add("*")

Dim SelectedFileName As IReadOnlyList(Of StorageFile) = Await SelectedFileNameObject.PickMultipleFilesAsync

        Dim a As New ObservableCollection(Of ImageLoc)
        For i As Integer = 0 To SelectedFileName.Count - 1

            p = New Uri(SelectedFileName.Item(i).Path.ToString, UriKind.RelativeOrAbsolute)

            a.Add(New ImageLoc() With {.ImageLocation = _SelectedFileName.Item(i).Path.ToString, .LineFour = p})

        Next
        ListName.ItemsSource = a

    End Sub

End class

Public Class ImageLoc
    Public location As String

    Property ImageLocation() As String
        Get
            Return location
        End Get
        Set(ByVal value As String)
            location = value
        End Set
    End Property
    Public b As Uri
    Public Property LineFour() As Uri
        Get
            Return b

        End Get
        Set(ByVal value As Uri)
            b = value
        End Set
    End Property
End Class 
```

Xaml 是：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <StackPanel Height="auto" Width="auto" Orientation="Horizontal">
        <Button x:Name="SelectFileName" Width="100" Height="50" Content="Browse Files" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,40,0"/>
        <ListBox x:Name="ListName" Width="700" Height="auto">
            <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                      <TextBlock Text="{Binding ImageLocation}" Height="auto" Width="auto"/>
                        <Image Height="100" Width="100">
                            <Image.Source>
                                <BitmapImage UriSource="{Binding Path=LineFour}"/>
                            </Image.Source>
                        </Image>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
        </ListBox>
    </StackPanel>
</Grid> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:59:28.647

查看[以编程方式更改图像源](https://stackoverflow.com/questions/12323864/change-image-source-programmatically/12323937#12323937)

基本上：

```
<Image Margin="5" Source="{Binding BMImage}" Height="100"/>

BitmapImage bmImage;
public BitmapImage BMImage
{
    get
    {
        return bmImage;
    }
}

bmImage = new BitmapImage();
bmImage.UriSource = new Uri(new Uri(
     *your file path*, 
     *your image name*); 
```

有关更多示例，请参见我的[博客](http://windows8applicationdevelopment.blogspot.com/2012/09/loading-resources.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:57:11.597

一方面，您实际上不必编写手写`BitmapImage`代码。`Image`控制 spy 端口将 an 或 a 直接绑定到`ImageSource`其`URI`属性`Source`。另外，您确定您传递的 Uris 格式正确吗？有时他们需要在前面加上包名前缀才能正常工作。

# android - android asynctask将多个文件上传到Dropbox

> ID：12726498
> 
> 赞同：2
> 
> 时间：2012-10-04T11:42:43.133
> 
> 标签：android, upload, android-asynctask

我想从我的 SD 上传几个文件到一个保管箱文件夹。但问题不在于保管箱问题：

我有一个文件数组，我想一个一个地上传文件，而不是同时上传。

上传工作正常，因为我对文件数组进行了 for 循环，但它们是同时执行的。

我想在进度对话框中提供有关文件总大小和数量的信息

有什么建议么？

谢谢，

我从 myClass 传递过来：

```
 Log.i("toBeUploaded",
                                " " + Arrays.toString(toBeUploaded));

                        for (int i = 0; i < toBeUploaded.length; i++) {

                            Upload upload = new Upload(CalcDBActivity.this,
                                    mDBApi, getIntent().getExtras()
                                            .getString("project")
                                            + File.separatorChar,
                                    toBeUploaded[i]);
                            upload.execute();

                            if (upload.getStatus() == Upload.Status.PENDING) {
                                // My AsyncTask has not started yet
                                Log.i("Status pend",
                                        " " + upload.getStatus());
                            }

                            if (upload.getStatus() == Upload.Status.RUNNING) {
                                // My AsyncTask is currently doing work in
                                // doInBackground()
                                Log.i("Status run ",
                                        " " + upload.getStatus());
                            }

                            if (upload.getStatus() == Upload.Status.FINISHED) {
                                Log.i("Status Finished",
                                        " " + upload.getStatus());
                                // My AsyncTask is done and onPostExecute
                                // was called
                            }

                        } 
```

其中“toBeUploaded”是文件数组。

上传类：

```
public class Upload extends AsyncTask<Void, Long, Boolean> {

private DropboxAPI<?> mApi;
private String mPath;
private File mFile;

private long mFileLen;
private UploadRequest mRequest;
private Context mContext;
private final ProgressDialog mDialog;

private String mErrorMsg;

public Upload(Context context, DropboxAPI<?> api, String dropboxPath,
        File file) {
    // We set the context this way so we don't accidentally leak activities
    mContext = context.getApplicationContext();

    mFileLen = file.length();
    mApi = api;
    mPath = dropboxPath;
    mFile = file;

    mDialog = new ProgressDialog(context);
    mDialog.setMax(100);
    mDialog.setMessage("Uploading " + file.getName());
    mDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mDialog.setProgress(0);
    mDialog.setButton("Cancel", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            // This will cancel the putFile operation
            mRequest.abort();
        }
    });
    mDialog.show();
}

@Override
protected Boolean doInBackground(Void... params) {
    try {
        // By creating a request, we get a handle to the putFile operation,
        // so we can cancel it later if we want to
        FileInputStream fis = new FileInputStream(mFile);
        String path = mPath + mFile.getName();
        mRequest = mApi.putFileOverwriteRequest(path, fis, mFile.length(),
                new ProgressListener() {
            @Override
            public long progressInterval() {
                // Update the progress bar every half-second or so
                return 500;
            }

            @Override
            public void onProgress(long bytes, long total) {
                publishProgress(bytes);
            }
        });

        if (mRequest != null) {
            mRequest.upload();
            return true;
        }

    } catch (DropboxUnlinkedException e) {
        // This session wasn't authenticated properly or user unlinked
        mErrorMsg = "This app wasn't authenticated properly.";
    } catch (DropboxFileSizeException e) {
        // File size too big to upload via the API
        mErrorMsg = "This file is too big to upload";
    } catch (DropboxPartialFileException e) {
        // We canceled the operation
        mErrorMsg = "Upload canceled";
    } catch (DropboxServerException e) {
        // Server-side exception.  These are examples of what could happen,
        // but we don't do anything special with them here.
        if (e.error == DropboxServerException._401_UNAUTHORIZED) {
            // Unauthorized, so we should unlink them.  You may want to
            // automatically log the user out in this case.
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
            // Not allowed to access this
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {
            // path not found (or if it was the thumbnail, can't be
            // thumbnailed)
        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {
        // Happens all the time, probably want to retry automatically.
        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        // Probably due to Dropbox server restarting, should retry
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        // Unknown error
        mErrorMsg = "Unknown error.  Try again.";
    } catch (FileNotFoundException e) {
    }
    return false;
}

@Override
protected void onProgressUpdate(Long... progress) {
    int percent = (int)(100.0*(double)progress[0]/mFileLen + 0.5);
    mDialog.setProgress(percent);
}

@Override
protected void onPostExecute(Boolean result) {
    mDialog.dismiss();
    if (result) {
        showToast("Image successfully uploaded");
    } else {
        showToast(mErrorMsg);
    }
}

private void showToast(String msg) {
    Toast error = Toast.makeText(mContext, msg, Toast.LENGTH_LONG);
    error.show();
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:18:54.837

在主类中移动 for 循环：

```
Log.i("toBeUploaded", " " + Arrays.toString(toBeUploaded));

Upload upload = new Upload(CalcDBActivity.this,
    mDBApi,
    getIntent().getExtras().getString("project") + File.separatorChar,
    toBeUploaded);
upload.execute(); 
```

进入上传类：

```
 public class Upload extends AsyncTask<Void, Long, Boolean> {

    private DropboxAPI<?> mApi;
    private String mPath;

    private UploadRequest mRequest;
    private Context mContext;
    private ProgressDialog mDialog;

    private String mErrorMsg;

    //new class variables:
    private int mFilesUploaded;
    private File[] mFilesToUpload;
    private int mCurrentFileIndex;

    public Upload(Context context, DropboxAPI<?> api, String dropboxPath, File[] filesToUpload) {
        // We set the context this way so we don't accidentally leak activities
        mContext = context.getApplicationContext();
        mApi = api;
        mPath = dropboxPath;

        //set number of files uploaded to zero.
        mFilesUploaded = 0;
        mFilesToUpload = filesToUpload;
        mCurrentFileIndex = 0;

        mDialog = new ProgressDialog(context);
        mDialog.setMax(100);
        mDialog.setMessage("Uploading file 1 / " + filesToUpload.length);
        mDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mDialog.setProgress(0);
        mDialog.setButton("Cancel", new OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                cancel(true);
            }
        });
        mDialog.show();
    }

    @Override
    protected Boolean doInBackground(Void... params) {
        try {
            for (int i = 0; i < mToBeUploaded.length; i++) {
                mCurrentFileIndex = i;
                File file = mToBeUploaded[i];

                // By creating a request, we get a handle to the putFile operation,
                // so we can cancel it later if we want to
                FileInputStream fis = new FileInputStream(file);
                String path = mPath + file.getName();
                mRequest = mApi.putFileOverwriteRequest(path, fis, file.length(),
                        new ProgressListener() {
                    @Override
                    public long progressInterval() {
                         // Update the progress bar every half-second or so
                         return 500;
                    }

                    @Override
                    public void onProgress(long bytes, long total) {
                        if(isCancelled()) {
                            // This will cancel the putFile operation
                            mRequest.abort();
                        }
                        else {
                            publishProgress(bytes);
                        }
                    }
                });

                mRequest.upload();

                if(!isCancelled) {
                    mFilesUploaded++;
                }
                else {
                    return false;
                }
            }
            return true;
        } catch (DropboxUnlinkedException e) {
            // This session wasn't authenticated properly or user unlinked
            mErrorMsg = "This app wasn't authenticated properly.";
        } catch (DropboxFileSizeException e) {
            // File size too big to upload via the API
            mErrorMsg = "This file is too big to upload";
        } catch (DropboxPartialFileException e) {
            // We canceled the operation
            mErrorMsg = "Upload canceled";
        } catch (DropboxServerException e) {
            // Server-side exception.  These are examples of what could happen,
            // but we don't do anything special with them here.
            if (e.error == DropboxServerException._401_UNAUTHORIZED) {
                // Unauthorized, so we should unlink them.  You may want to
                // automatically log the user out in this case.
            } else if (e.error == DropboxServerException._403_FORBIDDEN) {
                // Not allowed to access this
            } else if (e.error == DropboxServerException._404_NOT_FOUND) {
                // path not found (or if it was the thumbnail, can't be
                // thumbnailed)
            } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
                // user is over quota
            } else {
                // Something else
            }
            // This gets the Dropbox error, translated into the user's language
            mErrorMsg = e.body.userError;
            if (mErrorMsg == null) {
                mErrorMsg = e.body.error;
            }
        } catch (DropboxIOException e) {
            // Happens all the time, probably want to retry automatically.
            mErrorMsg = "Network error.  Try again.";
        } catch (DropboxParseException e) {
            // Probably due to Dropbox server restarting, should retry
            mErrorMsg = "Dropbox error.  Try again.";
        } catch (DropboxException e) {
            // Unknown error
            mErrorMsg = "Unknown error.  Try again.";
        } catch (FileNotFoundException e) {
        }
        return false;
    }

    @Override
    protected void onProgressUpdate(Long... progress) {
        Long totalBytes = 0;
        Long bytesUploaded = 0;
        for(int i=0;i<mFilesToUpload.length;i++) {
            Long bytes = mFilesToUpload[i].length()
            totalBytes += bytes;

            if(i < mCurrentFileIndex) {
                bytesUploaded += bytes;
            }
        }
        bytesUploaded += progress[0];

        mDialog.setMessage("Uploading file " + (mCurrentFileIndex+1) + " / " + filesToUpload.length);
        mDialog.setProgress((bytesUploaded / totalBytes) * 100);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        mDialog.dismiss();
        if (result) {
            showToast("Image successfully uploaded");
        } else {
            showToast(mErrorMsg);
        }
    }

    private void showToast(String msg) {
        Toast error = Toast.makeText(mContext, msg, Toast.LENGTH_LONG);
        error.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:24:40.300

在 Daverix 的帮助下，我设法找到了一个解决方案，我在下面发布了代码，以防万一有人对进度条有同样的问题。

与早期版本相比，我更改了一些变量的名称：

```
public class Upload extends AsyncTask<Void, Long, Boolean> {

private DropboxAPI<?> mApi;
private String mPath;

private UploadRequest mRequest;
private Context mContext;
private ProgressDialog mDialog;

private String mErrorMsg,filename;

// new class variables:
private int mFilesUploaded;
private File[] mFilesToUpload;
private int mCurrentFileIndex;

int totalBytes = 0, indBytes = 0;

public Upload(Context context, DropboxAPI<?> api, String dropboxPath,
        File[] filesToUpload) {
    // We set the context this way so we don't accidentally leak activities
    mContext = context.getApplicationContext();
    mApi = api;
    mPath = dropboxPath;

    // set number of files uploaded to zero.
    mFilesUploaded = 0;
    mFilesToUpload = filesToUpload;
    mCurrentFileIndex = 0;

    for (int i = 0; i < mFilesToUpload.length; i++) {
        Long bytes = mFilesToUpload[i].length();
        totalBytes += bytes;
    }

    mDialog = new ProgressDialog(context);
    mDialog.setMax(100);
    mDialog.setMessage("Uploading file 1 / " + filesToUpload.length);
    mDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mDialog.setProgress(0);
    mDialog.setButton("Cancel", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            cancel(true);
        }
    });
    mDialog.show();
}

@Override
protected Boolean doInBackground(Void... params) {
    try {
        for (int i = 0; i < mFilesToUpload.length; i++) {
            mCurrentFileIndex = i;
            File file = mFilesToUpload[i];

            int bytes = (int) mFilesToUpload[i].length();
            indBytes = bytes;

            filename= mFilesToUpload[i].getName();

            // By creating a request, we get a handle to the putFile
            // operation,
            // so we can cancel it later if we want to
            FileInputStream fis = new FileInputStream(file);
            String path = mPath + file.getName();
            mRequest = mApi.putFileOverwriteRequest(path, fis,
                    file.length(), new ProgressListener() {
                        @Override
                        public long progressInterval() {
                            // Update the progress bar every half-second or
                            // so
                            return 100;
                        }

                        @Override
                        public void onProgress(long bytes, long total) {
                            if (isCancelled()) {
                                // This will cancel the putFile operation
                                mRequest.abort();
                            } else {
                                publishProgress(bytes);
                            }
                        }
                    });

            mRequest.upload();

            if (!isCancelled()) {
                mFilesUploaded++;
            } else {
                return false;
            }
        }
        return true;
    } catch (DropboxUnlinkedException e) {
        // This session wasn't authenticated properly or user unlinked
        mErrorMsg = "This app wasn't authenticated properly.";
    } catch (DropboxFileSizeException e) {
        // File size too big to upload via the API
        mErrorMsg = "This file is too big to upload";
    } catch (DropboxPartialFileException e) {
        // We canceled the operation
        mErrorMsg = "Upload canceled";
    } catch (DropboxServerException e) {
        // Server-side exception. These are examples of what could happen,
        // but we don't do anything special with them here.
        if (e.error == DropboxServerException._401_UNAUTHORIZED) {
            // Unauthorized, so we should unlink them. You may want to
            // automatically log the user out in this case.
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
            // Not allowed to access this
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {
            // path not found (or if it was the thumbnail, can't be
            // thumbnailed)
        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {
        // Happens all the time, probably want to retry automatically.
        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        // Probably due to Dropbox server restarting, should retry
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        // Unknown error
        mErrorMsg = "Unknown error.  Try again.";
    } catch (FileNotFoundException e) {
    }
    return false;
}

@Override
protected void onProgressUpdate(Long... progress) {

    mDialog.setMessage("Uploading file " + (mCurrentFileIndex + 1) + " / "
            + mFilesToUpload.length+"\n"+filename);
    int percent = (int) (100.0 * (double) progress[0] / indBytes + 0.5);
    Log.i("pro", percent + "    " + progress[0] + "/" + indBytes);
    mDialog.setProgress(percent);
}

@Override
protected void onPostExecute(Boolean result) {
    mDialog.dismiss();
    if (result) {
        showToast("Upload finished");
    } else {
        showToast(mErrorMsg);
    }
}

private void showToast(String msg) {
    Toast error = Toast.makeText(mContext, msg, Toast.LENGTH_LONG);
    error.show();
}
} 
```

# jquery - 将页面滚动上的固定 THEAD 限制为 TABLE 或特定 DIV 高度

> ID：12726500
> 
> 赞同：1
> 
> 时间：2012-10-04T11:42:46.517
> 
> 标签：jquery

我正在设置一个比较表并希望在用户向下滚动时修复 THEAD，因为它的文本很长。

我在这里找到了解决方案[https://stackoverflow.com/a/9669008/1463443](https://stackoverflow.com/a/9669008/1463443)。它可以按需要工作。

但是，由于我的页面页脚很庞大 - 进一步向下滚动仍然会显示表格内容之外的固定 THEAD。

我想将这个固定的 THEAD 限制在这个桌子高度，或者最好限制在 #CONTENT div id （不应该在 #Footer 上看到）

这是我正在使用的代码

**CSS**

```
table.entries {width: 100%;border-spacing: 0px;margin:0;}
table.entries thead.fixed {position:fixed;top:0;} 
```

**Javascript**

```
TableThing = function(params) {
settings = {
    table: $('#table'),
    thead: []
};

this.fixThead = function() {
    // empty our array to begin with
    settings.thead = [];
    // loop over the first row of td's in &lt;tbody> and get the widths of individual &lt;td>'s
    $('tbody tr:eq(1) td', settings.table).each( function(i,v){
        settings.thead.push($(v).width());
    });

    // now loop over our array setting the widths we've got to the &lt;th>'s
    for(i=0;i<settings.thead.length;i++) {
        $('thead th:eq('+i+')', settings.table).width(settings.thead[i]);
    }

    // here we attach to the scroll, adding the class 'fixed' to the &lt;thead> 
    $(window).scroll(function() {
        var windowTop = $(window).scrollTop();

        if (windowTop > settings.table.offset().top) {
            $("thead", settings.table).addClass("fixed");
        }
        else {
            $("thead", settings.table).removeClass("fixed");
        }
    });
}
}
$(function(){
var table = new TableThing();
table.fixThead();
$(window).resize(function(){
    table.fixThead();
});
}); 
```

# validation - dijit/form/numberspinner 不工作

> ID：12726501
> 
> 赞同：0
> 
> 时间：2012-10-04T11:42:46.923
> 
> 标签：validation, dojo, dijit.form

[http://jsfiddle.net/sMRP9/](http://jsfiddle.net/sMRP9/)

在上面的链接中，您可以检查.. 使用版本 dojo 1.8 但我无法制作数字微调器。仍然出现一个文本框，而不是带有微调器的文本框。

```
<input data-dojo-type="dijit/form/NumberSpinner"
    id="strokewidth"
   value=100
    data-dojo-props="smallDelta:10,
constraints:{min:9,max:155,places:0},
largeDelta:10 "

    />​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:14:30.023

我注意到 jsfiddle 存在一些问题，我使用以下内容[对其进行了更新](http://jsfiddle.net/sMRP9/1/)

1.  `<body class="claro">`用标签包裹小部件
2.  添加 claro.css 资源
3.  在 dojo/parser 中需要并调用 parse

标记：

```
<body class="claro">
    <input data-dojo-type="dijit.form.NumberSpinner"
    id="strokewidth"
   value="1000"
    data-dojo-props="smallDelta:10,
constraints:{min:9,max:155,places:0},
largeDelta:10 "

    />
</body>​ 
```

js：

```
require(['dijit/form/NumberSpinner','dojo/parser'],function(NumberSpinner,parser){
    parser.parse();
});​ 
```

# database - 将数据保存在配置文件中

> ID：12726506
> 
> 赞同：0
> 
> 时间：2012-10-04T11:43:01.393
> 
> 标签：database, facebook, user-profile

我正在尝试在我的主页上处理 Facebook 登录。现在我有一个问题，我需要从我的网站为每个使用 Facebook 登录的用户保存一个可选择的选项。

是否可以将此选项保存在用户配置文件中，还是必须将其保存在我自己的数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:54:20.547

> 是否可以将此选项保存在用户配置文件中，还是必须将其保存在我自己的数据库中？

不，Facebook 不提供任何东西来在其服务器上存储与应用程序相关的用户数据。

您必须使用自己的数据库。

# javascript - 如何通过javascript删除css显示属性？

> ID：12726512
> 
> 赞同：-4
> 
> 时间：2012-10-04T11:43:21.590
> 
> 标签：javascript, jquery

我有一个 CSS id #cross-reference-section-value 设置为`display: none`. 它隐藏了 HTML 中的标签字段。我有 JavaScript 代码来选择值并将其存储到隐藏元素中，如下所示：

```
var generic_lookup_Enr_Rds_Section2009_selected = function(id, to_s) {
      $("#cross-reference-section-value").text(id + " " + to_s);
      $("#modal_popup").dialog("destroy");
  }; 
```

现在我想启用或删除`display: none`使用 JavaScript 的属性以使其可见以显示值。还有一件事是我选择了 id 和 string 值。是否可以只显示字符串而不显示 id？但是id应该被隐藏。因为我是通过这个id来计算其他字段的。所以，我只想隐藏这个 id 并显示字符串。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:56:18.430

您可以通过语法 $('#elementID').attr('display','block'); 简单地使用 jquery

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:52:11.543

要删除 display: none 您要创建一个名为“hide”的类，其中包含 display: none 属性，因此从 id 中删除该属性并进入新类。然后，您可以在要显示该类时将其删除。

```
$('#cross-reference-section-value').removeClass('hide'); 
```

这将同时显示 id 和字符串，但如果您想显示一个但隐藏另一个，则需要将它们放在主元素内的单独元素中，这样您可以定位一个而不是另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:53:12.873

你可以试试`$("#cross-reference-section-value").show()`或类似的东西`$("#cross-reference-section-value").css('display', 'block')`。

我认为您不能只显示字符串，这似乎是需要在 js 代码中添加的额外逻辑。

# utf-8 - 如何在只有一些编码错误的编码之间转换文件？

> ID：12726517
> 
> 赞同：1
> 
> 时间：2012-10-04T11:43:27.170
> 
> 标签：utf-8, character-encoding, iconv

我有大量嵌套目录，其中包含 PHP、HTML 和 Javascript 文件，这些文件都*应该*编码为 UTF-8。但是，有人编辑了几个文件并使用 ISO-8859-1 编码保存了它们。不幸的是，它们都与 UTF-8 文件混在一起。

我想使用该`iconv`工具将错误编码的文件转换为 UTF-8（如此[处](https://stackoverflow.com/questions/4544669/batch-convert-latin-1-files-to-utf-8-using-iconv)所述）。主要是，有效的 ISO-8859-1 但无效的 UTF-8 字符会出现问题。

我认为一个合适的起点是找到所有包含无效 UTF-8 的文件。有什么好方法可以做到这一点？

我意识到这不会捕获所有可能显示错误字符的情况。关于如何解决这个烂摊子的任何进一步提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:34:26.757

这将是一个黑客攻击，但由于它是一次性发生的，所以它可能是值得的。如果 iconv 无法使用您提供的编码读取文件，它将抱怨无效编码。因此，您可以编写一个包装脚本来遍历所有文件，尝试将它们从 UTF-8 转换为其他文件，而那些无法转换的文件具有无效的 UTF-8。

# rewrite - 如何在 Page_Load 或 Page_Init 事件中实现 HTTPContext.RewritePath()

> ID：12726526
> 
> 赞同：3
> 
> 时间：2012-10-04T11:43:55.527
> 
> 标签：rewrite, httpcontext

我目前正在做一个 URL 重写项目。我见过大多数在 HTTPModule 或 Global.asax 中使用 context.RewritePath() 的示例。我只需要知道这是否可以在任何页面级事件中实现，例如 PreInit、Init 或 Load ？

我在上述所有事件中都尝试过，但似乎没有用。

有人可以请教。

# optimization - OpenCL 和 CUDA 寄存器使用优化

> ID：12726527
> 
> 赞同：1
> 
> 时间：2012-10-04T11:43:57.830
> 
> 标签：optimization, cuda, opencl

我目前正在编写一个 OpenCL 内核（但我想在 CUDA 中会是一样的），目前我正在尝试针对 NVidia GPU 进行优化。

我目前在我的内核中使用 63 个寄存器，这个内核非常大，所以它使用了所有的 GPU 寄存器。我正在寻找一些方法来：

1）查看哪些变量在寄存器中，哪些在全局内存中（因为如果我没有足够的寄存器，编译器似乎将变量保存在全局内存中）。

2）有没有办法指定哪个变量更重要（或者哪个应该在寄存器中）。因为我使用了一些存在但较少使用的变量。一种给予优先权的方法？

当我们已经使用所有寄存器时，还有其他优化策略吗？

顺便说一句：我也尝试阅读 PTX 代码并搜索所有“.reg”关键字，但问题是 PTX 不可读，我不知道哪个寄存器用于我的代码中的哪个变量。我还没有找到任何联系方式！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:12:49.450

(1) 称为寄存器溢出。除了检查 SASS 程序集外，我认为没有办法找出哪些变量会溢出。OpenCL 首先被编译为 PTX，这是一个具有无限数量的寄存器（无溢出）的虚拟机。有关详细信息，请参阅 NVIDIA 演示[本地内存和寄存器溢出](http://developer.download.nvidia.com/CUDA/training/register_spilling.pdf)。

`volatile`(2)在声明不想保留在寄存器中的变量时，可以尝试使用关键字。`volatile`将强制编译器将变量推送到内存中，而不是在操作之间将其放入寄存器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T15:43:10.733

> 查看哪些变量在寄存器中，哪些在全局内存中

为此，我不知道如何检查它，但是

> 有没有办法指定哪个变量更重要

当我看到我已经溢出寄存器时（由于缺少它们或者当我需要在本地变量中使用动态索引，这很糟糕）时，我使用的一个技巧是显式存储我认为不是那么重要的寄存器到本地内存（在 CUDA 中称为“共享”）

例如之前：

```
uint16 somedata; 
```

后：

```
__local uint16 somedata[WG_SIZE]; // or __local uint someadata[16]; 
```

但请注意，如果您的本地内存使用量将大大增加，您可能会受到惩罚，因为飞行波前的数量会减少（即您的占用率可能较低）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T07:18:35.593

在没有看到代码的情况下，尝试“强制”使用寄存器的一种方法是在有限范围内使用本地副本。也许在代码的给定部分中只能访问您的一些变量。然后，您可以在范围内声明新变量并集中使用这些变量。不能保证，但我知道它有时会有所帮助。

```
int a, b, d;
double x,y;

...

{
     int ra = a;     // copy into new variables more likely to be kept in registers
     double rx = x;

     ... use rx and ra ...

     a = ra;
     b = rx;       // copy back.
}

... 
```

# asp.net - ASP.NET：如何从服务器端更新客户端？

> ID：12726531
> 
> 赞同：0
> 
> 时间：2012-10-04T11:44:10.843
> 
> 标签：asp.net

我想从服务器端更新客户端的标签，而该功能仍在服务器端执行。我怎样才能做到这一点？

这是代码片段：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string Result = "Success";
            if (Result == "Success")
            {
                Label1.Text = "Plan mst Completed";
                Thread.Sleep(2000);     //Some functionality here
                Label1.Text = "Packing date mst Started";
            }
            if (Result == "Success")
            {
                Label1.Text = "Packing date mst Completed";
                Thread.Sleep(2000);     //Some functionality here
                Label1.Text = "Etd mst Started";
            }

            if (Result == "Success")
            {

                Label1.Text = "Etd mst Completed";
                Thread.Sleep(2000);     //Some functionality here
                Label1.Text = "Inner box mst Started";

            }
        } 
```

我希望 label1.text 中的所有更改都反映在客户端，而函数仍在执行中。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:36:36.210

从该方法内部与前端直接通信将很困难。这就是我的做法。

1) 将“Plan mst”、“Packing date mst”、“Etd mst”和“Inner box mst”拆分为4个独立的功能。

2) 让页面上的按钮单击事件触发一个 JavaScript 函数，通过 AJAX 依次点击 4 种方法中的每一种。为每个函数创建一个新的 ASPX 页面（“InnerBox.aspx”等）。如果你有 jquery，它看起来像这样：

```
 $("#SubmitButton").click(function () {
            DoPlanMst();
        });

        function DoPlanMst(argumentObj) {
            SetLabel("Plan MST Started");
            $.ajax({
                url: "PlanMst.aspx",
                type: "POST",
                data: argumentObj, // your post params
                success: function () {
                    SetLabel("Plan MST Completed");
                    DoPackingDateMst();
                }
            });
        }

        function DoPackingDateMst(argumentObj) {
            SetLabel("Packing Date MST Started");
            $.ajax({
                url: "PackingDate.aspx",
                type: "POST",
                data: argumentObj, // your post params
                success: function () {
                    SetLabel("Packing Date MST Completed");
                    DoEtdMst();
                }
            });
        }

        function DoEtdMst(argumentObj) {
            SetLabel("ETD MST Started");
            $.ajax({
                url: "EtdMst.aspx",
                type: "POST",
                data: argumentObj, // your post params
                success: function () {
                    SetLabel("ETD MST Completed");
                    DoInnerBoxMst();
                }
            });
        }

        function DoInnerBoxMst(argumentObj) {
            SetLabel("Inner Box MST Started");
            $.ajax({
                url: "InnerBoxMst.aspx",
                type: "POST",
                data: argumentObj, // your post params
                success: function () {
                    SetLabel("Inner Box MST Completed");
                }
            });
        }

        function SetLabel(message) {
            $("#Label1").val(message);
        } 
```

如果您不想要 4 sep ASPX 页面，那很好。您可以将它们滚动到一个名为“ProcessMSTs.aspx”的文件中，该文件查找查询字符串参数以确定其代码中要调用的方法，同时仍传递 POST 参数。 *编辑：修复了 AJAX 调用成功函数中函数名称中的拼写错误。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:46:51.290

你是如何从浏览器调用这个函数的。它是一个异步调用，那么你可以在客户端自己管理它。如果它是同步的，那么它将不可能，因为您对您的请求的响应仍在等待中。

[在 ajax 过程中](https://stackoverflow.com/questions/12108937/jquery-ajax-post-animation-during-ajax-process)使用这个 Jquery Ajax 后动画？

# iphone - 从iphone sdk中的数组中复制所有元素？

> ID：12726537
> 
> 赞同：0
> 
> 时间：2012-10-04T11:44:33.523
> 
> 标签：iphone, arrays, nsmutablearray

当 Web 服务响应时，我从服务器收到了一系列元素。我对如何处理它感到困惑。我需要将这些项目放在一个数组中。

```
(
    (
            (
        10,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        5,
        10,
        5,
        5,
        10,
        10,
        50
    )
)
 ) 
```

我需要一个数组中的所有对象。所以它应该看起来像

```
 (
    10,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    10,
    5,
    5,
    10,
    10,
    50
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:47:29.713

假设**yourArray**是从服务器获得的数组，如上所示，请执行此操作

```
NSArray *singleArray=[[NSArray alloc] initWithArray:[[yourArray objectAtIndex:0]objectAtIndex:0]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:49:50.233

这是为了让您了解您在 Array 中获得的格式：在第一个索引，即 0 处，您有一个数组。再次在索引 0 的那个数组中，你得到了你的深度数组。

**只需像这样访问它：**

```
NSMutableArray *finalArray = [[yourArray objectAtIndex:0]objectAtIndex:0];
NSLog(@"final Array %@",finalArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:52:46.627

如果结果为您提供了一个包含多个数组的数组，则更好的方法是实现 for 循环

```
NSArray *aryContents; // Your Input array
NSMutableArray *aryEditable = [[NSMutableArray alloc] init];
for (NSArray *adult in aryContents) {
    for (NSArray *child in adult) {
        [aryEditable addObjectsFromArray:child];
    }
}
NSArray *aryFullList = [[NSArray alloc] initWithArray:aryEditable];
[aryEditable release]; 
```

# php - W3Validator 转义 URL 的奇怪输出

> ID：12726540
> 
> 赞同：0
> 
> 时间：2012-10-04T11:44:40.483
> 
> 标签：php, html, url, w3c, w3c-validation

大家早，

我正在修复网站中的错误并使用灯箱参数转义 URL 被证明是一项艰巨的任务......已经尝试了所有但似乎无法抓住这个......

W3 验证器给了我这个（验证器感知 &、[ 和 ] 字符）：

```
 Error Line 130, Column 222: Bad value processa-watermark.php?id=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d015NXFjR2M9&lightbox[iframe]=true&lightbox[force]=image for attribute href on element a: Illegal character in query component.

 …e&amp;lightbox&lsqb;force&rsqb;=image"><img src="processa-imagem.php?src=TDJod…

  Syntax of IRI reference:
Any URL. For example: /hello, #canvas, or http://example.org/. Characters should be represented in NFC and spaces should be escaped as %20\. 
```

但是在我的代码中，我已经逃脱了这些字符：

```
<div class="imagem imagemEsq">
<a class="lightbox" href="processa-watermark.php?id=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d01pNXFjR2M9&amp;lightbox&lsqb;iframe&rsqb;=true&amp;lightbox&lsqb;force&rsqb;=image"><img src="processa-imagem.php?src=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d01pNXFjR2M9&amp;zc=1&amp;w=350&amp;q=90" width="350" height="263" alt="Arquivos do Herbário" /></a>
</div> 
```

问题也很可能出在这段代码中（这是另一张图片）

```
<div class="imagem imagemDir">
<a class="lightbox" href="processa-watermark.php?id=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d015NXFjR2M9&amp;lightbox&lsqb;iframe&rsqb;=true&amp;lightbox&lsqb;force&rsqb;=image"><img src="processa-imagem.php?src=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d015NXFjR2M9&amp;zc=1&amp;w=250&amp;q=90" width="250" height="333" alt="Um livro de registos do Herbário" /></a>
</div> 
```

谁能启发我：/

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:47:49.987

它应该是：

```
<div class="imagem imagemDir">
<a class="lightbox" href="processa-watermark.php?id=TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d015NXFjR2M9&amp;lightbox%5Biframe%5D=true&amp;lightbox%5Bforce%5D=image" width="250" height="333" alt="Um livro de registos do Herbário" /></a>
</div> 
```

参考： http: [//www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

# mysql - 根据其他列的顺序从组中选择一个值

> ID：12726549
> 
> 赞同：13
> 
> 时间：2012-10-04T11:45:03.803
> 
> 标签：mysql, sql, mariadb

# 问题

假设我有这张桌子`tab`（[小提琴](http://www.sqlfiddle.com/#!2/ad3987/2)可用）。

```
| g | a | b |     v |
---------------------
| 1 | 3 | 5 |   foo |
| 1 | 4 | 7 |   bar |
| 1 | 2 | 9 |   baz |
| 2 | 1 | 1 |   dog |
| 2 | 5 | 2 |   cat |
| 2 | 5 | 3 | horse |
| 2 | 3 | 8 |   pig | 
```

我按 对行进行分组`g`，并且对于每个组，我想要一个来自 column 的值`v`。但是，我不想要*任何*值，但我想要来自带有 maximal 的行的值`a`，以及来自所有这些的带有 maximal 的行的值`b`。换句话说，我的结果应该是

```
| 1 |   bar |
| 2 | horse | 
```

# 当前解决方案

我知道一个查询来实现这一点：

```
SELECT grps.g,
(SELECT v FROM tab
 WHERE g = grps.g
 ORDER BY a DESC, b DESC
 LIMIT 1) AS r
FROM (SELECT DISTINCT g FROM tab) grps 
```

# 问题

但我认为这个查询相当**难看**。主要是因为它使用了一个**依赖子查询**，这感觉就像一个真正的性能杀手。所以我想知道这个问题是否有更简单的解决方案。

# 预期答案

我对这个问题最有可能的答案是 MySQL（或 MariaDB）的某种附加组件或补丁，它确实为此提供了一个功能。但我也欢迎其他有用的灵感。任何没有依赖子查询的工作都可以作为答案。

如果您的解决方案仅适用于单个排序列，即无法区分`cat`and `horse`，请随意提出该答案，因为我希望它对大多数用例仍然有用。例如，`100*a+b`一种可能的方法是按两列对上述数据进行排序，同时仍然只使用一个表达式。

我有一些非常老套的解决方案，可能会在一段时间后添加它们，但我会先看看是否有一些不错的新解决方案会先出现。

* * *

# 基准测试结果

由于仅通过查看它们很难比较各种答案，因此我对它们进行了一些基准测试。这是在我自己的桌面上运行的，使用 MySQL 5.1。这些数字不会与任何其他系统进行比较，只能相互比较。如果性能对您的应用程序至关重要，您可能应该使用您的真实数据进行自己的测试。当有新的答案出现时，我可能会将它们添加到我的脚本中，然后重新运行所有测试。

*   100,000 个项目，1,000 个组可供选择，InnoDb：
    1.  MvG [0.166s（来自问题）](https://stackoverflow.com/q/12726549)
    2.  RichardTheKiwi 为[0.520 秒](https://stackoverflow.com/a/12728212)
    3.  xdazz [2.199s](https://stackoverflow.com/a/12726666)
    4.  Dems 19.24s [（](https://stackoverflow.com/a/12727443)顺序子查询）
    5.  48.72s for [acatt](https://stackoverflow.com/a/12726837)
*   100,000 个项目，50,000 个组可供选择，InnoDb：
    1.  xdazz 为[0.356 秒](https://stackoverflow.com/a/12726666)
    2.  0.640s for [RichardTheKiwi](https://stackoverflow.com/a/12728212)
    3.  MvG [0.764s（来自问题）](https://stackoverflow.com/q/12726549)
    4.  51.50s for [acatt](https://stackoverflow.com/a/12726837)
    5.  *对[Dems](https://stackoverflow.com/a/12727443)*来说太长*（顺序子查询）*

**   100,000 个项目，100 个组可供选择，InnoDb：
    1.  MvG [0.163s（来自问题）](https://stackoverflow.com/q/12726549)
    2.  RichardTheKiwi 为[0.523 秒](https://stackoverflow.com/a/12728212)
    3.  Dems 2.072s [（](https://stackoverflow.com/a/12727443)顺序子查询）
    4.  xdazz 为[17.78 秒](https://stackoverflow.com/a/12726666)
    5.  49.85s for [acatt](https://stackoverflow.com/a/12726837)*

 *因此，到目前为止，我自己的解决方案似乎并不是那么糟糕，即使使用依赖子查询也是如此。令人惊讶的是，acatt 的解决方案也使用了依赖子查询，因此我认为它的性能要差得多。可能是 MySQL 优化器无法处理的问题。RichardTheKiwi 提出的解决方案似乎也具有良好的整体性能。其他两种解决方案在很大程度上取决于数据的结构。对于许多小团体，xdazz 的方法优于所有其他方法，而 Dems 的解决方案在少数大型团体中表现最好（尽管仍然不是特别好）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T11:52:14.127

这种方式不使用子查询。

```
SELECT t1.g, t1.v
FROM tab t1
LEFT JOIN tab t2 ON t1.g = t2.g AND (t1.a < t2.a OR (t1.a = t2.a AND t1.b < t2.b))
WHERE t2.g IS NULL 
```

***解释：***

LEFT JOIN 的工作原理是，当 t1.a 处于最大值时，没有 s2.a 具有更大的值，并且 s2 行的值将为 NULL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T13:19:32.193

```
SELECT g, a, b, v
  FROM (
            SELECT *, 
                   @rn := IF(g = @g, @rn + 1, 1) rn, 
                   @g := g
              FROM (select @g := null, @rn := 0) x, 
                   tab
          ORDER BY g, a desc, b desc, v
       ) X
 WHERE rn = 1; 
```

单程。所有其他解决方案在我看来都是 O(n^2)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:35:37.303

许多 RDBMS 具有特别适合此问题的结构。MySQL***不是***其中之一。

这将引导您使用三种基本方法。

*   使用 EXISTS 和 EXISTS 子句中的相关子查询检查每条记录以查看它是否是您想要的。 *（@acatt 的回答，但我知道 MySQL 并不总是很好地优化这一点。`(g,a,b)`在假设 MySQL 不能很好地做到这一点之前，请确保您有一个复合索引。）*

*   做一个半笛卡尔积来填满同一张支票。任何不加入的记录都是目标记录。如果每个组 ('g') 很大，这会很快降低性能*（如果每个唯一值有 10 条记录`g`，这将产生约 50 条记录并丢弃 49 条。对于 100 的组大小，它会产生约 5000 条记录和丢弃 4999)*，但它**非常**适合小团体。*（@xdazz 的回答。）*

*   或者使用多个子查询来确定 MAX(a)，然后是 MAX(b)...

多个顺序子查询...

```
SELECT
  yourTable.*
FROM
  (SELECT g,    MAX(a) AS a FROM yourTable GROUP BY g   ) AS searchA
INNER JOIN
  (SELECT g, a, MAX(b) AS b FROM yourTable GROUP BY g, a) AS searchB
    ON  searchA.g = searchB.g
    AND searchA.a = searchB.a
INNER JOIN
  yourTable
    ON  yourTable.g = searchB.g
    AND yourTable.a = searchB.a
    AND yourTable.b = searchB.b 
```

根据 MySQL 优化第二个子查询的方式，这可能比其他选项更高效，也可能不会。然而，对于给定任务，它是最长的*（并且可能是最难维护的）*代码。

假设所有三个搜索字段都有一个复合索引`(g, a, b)`，我认为它最适合`g`. 但这应该进行测试。

对于 的小团体`g`，我会选择@xdazz 的答案。

**编辑**

还有一种蛮力方法。

*   创建一个相同的表，但使用 AUTO_INCREMENT 列作为 id。
*   将您的表插入到这个克隆中，按 g、a、b 排序。
*   然后可以使用 找到 id `SELECT g, MAX(id)`。
*   然后可以使用此结果来查找`v`您需要的值。

这不太可能是最好的方法。如果是这样，这实际上是对 MySQL 优化器处理此类问题的能力的一种否定。

也就是说，每个引擎都有它的弱点。所以，就我个人而言，我会尝试一切，直到我*认为*我了解 RDBMS 的行为方式并可以做出选择 :)

**编辑**

使用`ROW_NUMBER()`. *（Oracle、SQL Server、PostGreSQL 等）*

```
SELECT
  *
FROM
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY g ORDER BY a DESC, b DESC) AS sequence_id,
    *
  FROM
    yourTable
)
  AS data
WHERE
  sequence_id = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:01:42.760

这可以使用相关查询来解决：

```
SELECT g, v
FROM tab t
WHERE NOT EXISTS (
    SELECT 1
    FROM tab
    WHERE g = t.g
        AND a > t.a
        OR (a = t.a AND b > t.b)
    ) 
```*

# html - CSS/HTML 中是否有任何类似于“line-height”的属性可以应用于 div 标签？

> ID：12726552
> 
> 赞同：1
> 
> 时间：2012-10-04T11:45:11.747
> 
> 标签：html, css

我尝试使用“line-height”属性来增加两个文本框之间的空间，但它仅适用于文本。

那么，是否有任何其他 CSS 属性可用于增加两个分区（“div”）之间的垂直间距？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:48:22.500

查看 CSS 边距

[http://www.w3schools.com/css/css_margin.asp](http://www.w3schools.com/css/css_margin.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:49:58.653

您可以使用边距来定义分区之间的空间：

CSS：

```
.myDiv { margin: 5px 0; } 
```

HTML

```
<div class="myDiv">first</div>
<div class="myDiv">second</div> 
```

这将为它们提供`5px`顶部和底部边距。分区之间的距离将是其中任何一个的最大边距值，`5px`在这种情况下。

如果您想要更多控制权，您可以单独指定`margin-top`和。`margin-bottom`例如零上边距和`5px`下边距：

```
.myDiv { margin: 0 0 5px 0; } 
```

这与以下内容相同：

```
.myDiv {
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 5px;
  margin-left: 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:48:46.147

```
classname
{
margin-top:10px; // as you wish
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T11:52:58.120

框外定义的空间是`margin`.

花一些时间来理解速记符号是值得的：

```
.box {margin: 5px;} /* 5px all sides */
.box {margin: 5px 10px;} /* 5px top and bottom, 10px left and right */
.box {margin: 5px 10px 15px;} /* 5px top, 10px left and right, 15px bottom */
.box {margin: 5px 10px 15px 20px;} /* 5px top, 10px right, 15px bottom, 20px left */ 
```

# azure - 如何备份 azure cloudapp？

> ID：12726557
> 
> 赞同：0
> 
> 时间：2012-10-04T11:45:20.733
> 
> 标签：azure, c1-cms

我创建了一个云应用程序，它带有一个分布式打包，可以让天蓝色从 weburl 下载内容。(复合 c1)

现在我想备份我的应用程序，可能对源代码进行一些更改并再次上传。

如何获取 cloudapp 上文件的备份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:02:48.677

您不是很清楚是否需要备份应用程序代码或正在下载的文件（尽管我认为您在后续评论中有所澄清）。

当您部署云服务应用程序时，代码会打包到 cspkg 文件中并发送出去进行部署。一些部署工具（如 Visual Studio、PowerShell Cmdlet 等）将使用存储帐户将包文件上传到 BLOB 存储。这意味着您将拥有已部署的软件包的副本。如果您不使用使用存储帐户进行部署的工具，我强烈建议您还保留一份您部署的包的副本，以防万一您需要回滚到一个。

现在，如果您正在更改应用程序中的代码，那么您可以在本地进行更改，对其进行测试，然后您可以重新部署。为此，您有多种选择。您可以删除以前的部署并重新部署新的部署（这将导致您的应用程序停机）。另一种选择是进行就地升级，一次用几台机器更新您的部署（如果您正在运行多个实例）。其他选项也是 VIP 交换，您可以在暂存槽中加载新代码，然后在暂存和生产之间交换位。我建议[研究这些选项](http://msdn.microsoft.com/en-us/library/windowsazure/gg433027.aspx)以在 MSDN 上部署新代码以了解它们（它们都有优点和缺点，其中一些无法完成，具体取决于您对代码所做的更改）。

在您的评论中，您似乎对在应用程序将 BLOB 存储帐户中的文件拉下后备份它们更感兴趣。您在这里也有几个选择：

*   使用 Cerebrata Cloud Storage Studio、AzureXplorer 等 Azure 存储资源管理器工具手动下载它们。（我使用 Cerebrata 工具）
*   创建一些下拉数据的代码。您可以使用任何[客户端库](http://www.windowsazure.com/en-us/develop/overview/)（.NET、PHP 等）、[PowerShell cmdlet](https://www.windowsazure.com/en-us/manage/downloads/)来执行此操作，甚至可以使用 Red Gate 等供应商提供的工具，该供应商拥有[专为备份/恢复设计的 Cmdlet](http://cerebrata.com/Products/AzureManagementCmdlets/Details.aspx?t1=0&t2=1)。

# django - 包含过滤器中不区分大小写的搜索

> ID：12726565
> 
> 赞同：2
> 
> 时间：2012-10-04T11:46:05.080
> 
> 标签：django, filter

我需要在包含过滤器中执行不区分大小写的搜索，而不是使用完全区分大小写的匹配。

```
def filter(request, fname, fvalue):

    list = HmsPatient.objects.filter(**{fname:fvalue})
    c = {'list' : list}
    return render_to_response('patient/list.html', c, context_instance=RequestContext(request))

def search(request):
    if request.method == 'POST':
        fname = request.POST.get('filter_name')
    fvalue = request.POST.get('filter_value')
        return filter(request, fname, fvalue);
    else:
        action = HmsPatient().get_search_url()
        form = HmsPatientForm()
        c = {'form': form, 'action' : action}
        c.update(csrf(request))
        return render_to_response('search.html', c, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:55:42.493

Django 允许您使用[`iexact`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std%3afieldlookup-iexact). 例如：

```
Blog.objects.get(name__iexact="beatles blog") 
```

在您的情况下，因为`fname`是一个变量，您必须附加`__iexact`到字典中的键。

```
key = fname + '__iexact'
list = HmsPatient.objects.filter(**{key: fvalue}) 
```

Django 还支持[`contains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#contains)and [`icontains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#icontains)，您可以以相同的方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:24:10.150

使用双引号 n "icontains" 进行不区分大小写的搜索。

```
def filter(request, fname, fvalue):

    key = fname + '__icontains'
    list = HmsPatient.objects.filter(**{key: fvalue})
    c = {'list' : list}
    return render_to_response('patient/list.html', c, context_instance=RequestContext(request)) 
```

使用双引号 n“包含”进行区分大小写的搜索。

```
def filter(request, fname, fvalue):
    key = fname + '__contains'
    list = HmsPatient.objects.filter(**{key: fvalue})
    c = {'list' : list}
    return render_to_response('patient/list.html', c, context_instance=RequestContext(request)) 
```

在 MySQL 中选择排序规则使数据值区分大小写，如果您不选择任何排序规则，您的数据库将不区分大小写，即 AbC =abc

# html - Windows 8 输入[type="range"] 样式

> ID：12726569
> 
> 赞同：4
> 
> 时间：2012-10-04T11:46:13.727
> 
> 标签：html, css, windows-8

我正在尝试在 Windows 8（IE 10）上设置我的滑块样式，它们具有一些标准样式，但我无法在文档中找到它们的样式，任何其他必须设置滑块样式的人（我只想更改颜色）

请参阅下图以查看 Windows 8 标准样式（IE 10）：

![滑块图像win8设计](../Images/942f91782dade5464a46a990e52e1d29.png)

例如，我想将滑块的紫色元素更改为红色。我没有发布代码，因为我找不到在哪里寻找它，即使在我的 Visual Studio 调试屏幕中的检查模式下也是如此。

* * *

除了这个问题，我想问你是否知道如何设置选择控件的样式，我可以管理所有其他控件，但下图中的蓝色控件除外

![选择和选项](../Images/60011e1401d42e2ca0082786c0fe059b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:26:24.003

解决方案已找到！控件中的填充由这个新的 -ms- (IE) 属性设置

FX 这会使它变黑

```
input[type="range"]::-ms-fill-lower{background-color:#000;} 
```

编辑*（

```
input[type="range"]:hover::-ms-fill-lower{background-color:#fff;} 
```

)

通过在 Windows 8 和 Visual Studio 2012 版上构建以下链接内容[可以](http://code.msdn.microsoft.com/windowsapps/Common-HTML-controls-and-09a72a24/sourcecode?fileId=50872&pathId=1927408783)找到更多控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T00:43:41.420

除非您在其前面放置一个选择器，否则西蒙的答案不起作用：

```
#sliderId::-ms-fill-lower { background-color: #ff0000; }
#sliderId::-ms-fill-upper { background-color: #0000ff; } 
```

[参考](http://msdn.microsoft.com/en-us/library/windows/apps/hh465745.aspx)

# c++ - C 链接程序并在主函数上使用其他程序的方法（数独

> ID：12726572
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:46:16.570
> 
> 标签：c++, arrays, function, methods

注意：真正的问题跳到底部

嘿，伙计们，现在我正处于一个常规中，我知道如何解决我的数独程序的基本知识，但如果我这样做，我知道它会是多么丑陋、冗长和大量不必要的代码。

对，我有 sudoku.cc、sudokuboard.cc、sudokuboard.h、stack.cc 和 stack.h，所以到目前为止，我的 stack.cc 和我的 stack.h 是什么并不重要，因为它们相当通用并且任何人都可以找到他们的程序，坦率地说，我不明白为什么我什至需要包括 stack.cc/h 到期。

我现在的 sudoku.cc 是：

```
#include <iostream>
#include <cassert>
#include <fstream>
#include "sudokuboard.h"
#include "stack.h"

using namespace std;
    int main (void)
    {
        FILE *fp = fopen("test.txt","r");
        char sudoku_grid[9][9];
        char ch;

        if(fp != NULL)
        {
            for(int i = 0; i < 9; i++)
            {            
                for(int j = 0; j < 9; j++)
                {
                    ch = fgetc(fp);
                    sudoku_grid[i][j] = ch;   
                }
                ch = fgetc(fp);
            }
            for(int i = 0; i< 9;i++)
            {
                for(int j= 0; j<9;j++)
                    cout<<sudoku_grid[i][j];
                cout<<endl;
            }
        }  
     return 0; 
    } 
```

到目前为止，除了打印出我给它的文件并将其存储在二维数组中之外，它什么也没做。

我的数独板.h 是

```
#include <iostream>

#define SDIM 9

class SudokuBoard {
 public:
  //------------------------------------------------------------------------
  SudokuBoard();
  // Construct a blank sudoku board
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void print(std::ostream & ostr) const;
  // display it.  duh.
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void place(size_t r, size_t c, char digit);
  // PRE: safe(r,c,digit)
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  void remove(size_t r, size_t c, char digit); 
  // PRE: get(r,c) == digit
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  char get(size_t r, size_t c) const;
  // Return the digit at (r,c) on the board.  or ' ' if blank.
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  bool safe(size_t r, size_t c, char digit) const;
  // 
  //------------------------------------------------------------------------

  //------------------------------------------------------------------------
  bool done() const; 
  // Return true iff every cell has a number
  //------------------------------------------------------------------------
 private:
  std::string rows[SDIM];
}; 
```

和我的数独板.cc：

```
#include <iostream>
#include <cassert>
#include "sudokuboard.h"

#define ASSERTBOUNDS assert(0 <= r and r < SDIM and 0 <= c and c < SDIM)

SudokuBoard::SudokuBoard()
{
  for (size_t i = 0;i<SDIM;i++) {
    rows[i] = "";
    for (size_t j=0;j<SDIM;j++)
      rows[i] += ' ';
  }
}

void SudokuBoard::place(size_t r, size_t c, char digit)
{
  ASSERTBOUNDS;
  assert(safe(r,c,digit));
}

void SudokuBoard::remove(size_t r, size_t c, char digit)
{
  ASSERTBOUNDS;
  assert(get(r,c)==digit);
  rows[r][c] = ' ';
}

char SudokuBoard::get(size_t r, size_t c) const
{
  ASSERTBOUNDS;
  return rows[r][c];
}

void SudokuBoard::print(std::ostream & ostr) const
{
  for (size_t i=0;i<SDIM;i++)
    ostr << rows[i] << std::endl;
}
bool SudokuBoard::safe(size_t r, size_t c, char digit) const
{
 for(size_t r=0; r<SDIM; r++)
    for(size_t c=0; c<SDIM; c++)
       if (get(r,c) == digit)
           return false;

 for(size_t c=0; c<SDIM; c++)
    for(size_t r=0; r<SDIM; r++)
       if (get(r,c) == digit)
           return false;
  return true;
}
bool SudokuBoard::done() const
{
  for (size_t r=0;r<SDIM;r++)
    for (size_t c=0;c<SDIM;c++)
      if (rows[r][c]==' ')
    return false;
  return true;
} 
```

所以到目前为止，我想使用 sudokuboard.cc 方法并在我的 sudoku.cc 中使用 SudokuBoard() 因为我知道如果我这样做，我将能够使用 Sudokuboard.cc 提供的有用方法，从而使我的代码看起来更干净，因为它并没有在一个程序上杂乱无章。

所以到目前为止，我认为将这两个程序链接在一起以最大化我的空间的网关我必须设置我当前的 2D 数组，即**sudoku_grid**以某种方式成为 Sudokuboard() 的一部分。

问题是我真的不知道如何把这只小狗挂起来。我知道我不能做**sudoku_grid = Sudokuboard()**因为即使它确实有效，它也可能会将所有数组设置为只是空格。

任何人都有从哪里开始的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:52:46.673

放在主文件的顶部，`#include "sudokuboard.h"`以便编译器知道它在那里。接下来，在您的顶部，您`int main()`需要创建一个`SudokuBoard`类的实例，使用`SudokuBoard mainBoard;`，然后您可以通过`mainBoard.doSomething();`主目录中的其他地方访问它的方法。我建议在 SudokuBoard 类中创建一个新方法，该方法从文件中读取数据并将其`std::string rows[SDIM];`从内部直接放入 SB 的私有数组中（基本上将大部分代码从 main 移动到类中）。使用原样的代码，假设我没有破坏任何名称，这应该可以工作：

```
#include "sudokuboard.h"

int main (void) {
  SudokuBoard mainBoard;
  FILE *fp = fopen("test.txt","r");
  char sudoku_grid[9][9];
  char ch;

  if(fp != NULL) {
    for(int i = 0; i < 9; i++) {            
      for(int j = 0; j < 9; j++ ) {
        ch = fgetc(fp);
        //sudoku_grid[i][j] = ch;  
        //set mainBoard's internal state, etc here
        mainBoard.place(i,j,ch);
      }
      ch = fgetc(fp);
    }
    for(int i = 0; i< 9;i++) {
      for(int j= 0; j<9;j++) cout<<sudoku_grid[i][j];
      cout<<endl;
    }
  }  
  return 0; 
} 
```

# sql-server - Show Html entities like & in report parameter as &

> ID：12726580
> 
> 赞同：-1
> 
> 时间：2012-10-04T11:46:48.647
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008

Is there an effective and/or fast way to show `Html entities` like `&amp;` or `&euml;` as `&` and `ë` in an report viewer's parameter drop down list?

I have `html` encoded values in the database and now I need to show the original value in parameter drop down list

Or does `MSSQL` have an equivalent for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:52:22.213

SQL Server doesn't have a built-in HTML decode function. Your options as I see it are

1.  A series of REPLACEs as long as Earth to Mars
2.  A CLR module as a SQL Function (I would use this)
3.  Programming change to store another column with the un-encoded html string when inserting

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:45:56.120

To not loose any performance on the reporting, the users must change these characters in the GUI in order not to see them anymore...

No other suitable solution found for this situation. An mass update on all text columns was an other solution as well, but not really necessary.

# visual-studio - VS2012 中缺少 Edmx 设计器和项目模板

> ID：12726586
> 
> 赞同：2
> 
> 时间：2012-10-04T11:47:04.457
> 
> 标签：visual-studio, entity-framework, visual-studio-2012, edmx

我几乎可以肯定这是可用的并且以前可以工作，但是在这个站点上，我最近从 VS2010 升级到了 VS2012。我发现如果我双击一个 .edmx 文件，默认情况下它会在 XML 编辑器中打开。另外，缺少企业数据模型项模板，所以我必须在 VS2010 中打开项目才能添加新的数据模型。是否有任何已知问题可能导致此问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T08:19:46.727

您必须在 VS2012 设置中选择**Microsoft Web 开发人员工具**才能恢复 EF。现在我有了设计师。

*// 编辑* 选择**Microsoft SQL Server Data Tools**也会安装 EF 设计器：

![在此处输入图像描述](../Images/5e62ac53a70de22b1c3ae1f74ea75fe3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:50:25.283

我可以打开 EF 项目。请注意，我之前使用 Nuget 包管理器安装了实体框架。我可以在 'C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplates\CSharp\Data' 目录中看到很多项目模板。

是否存在于您遇到问题的系统上？

# java - 致命异常：Timer-0

> ID：12726588
> 
> 赞同：0
> 
> 时间：2012-10-04T11:47:16.390
> 
> 标签：java, android, gps

您好，我想获得准确的位置，以便我使用以下链接

[在 Android 中获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a?lq=1)

以下是该站点的代码：

```
 LocationResult locationResult = new LocationResult(){
    @Override
    public void gotLocation(Location location){
        //Got the location!
    }
   };

MyLocation myLocation = new MyLocation();
myLocation.getLocation(this, locationResult); 
```

现在在`LocationResult`课堂上我已经修改了它并想在文本视图中显示位置所以我写了下面的代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LocationResult locationResult = new LocationResult(){
        @Override
        public void gotLocation(Location location){
            TextView txtValue = (TextView)findViewById(R.id.txtValue);
            txtValue.setText("LATITUDE : - "+location.getLatitude()+"\n\n LONGITUDE :- "+location.getLongitude()+"\n\n ALTITUDE :- "+location.getAltitude());
        }
    };
    myLocation = new MyLocation();
    myLocation.getLocation(this, locationResult);

} 
```

但在那我得到了例外

下面是我的日志

```
 10-04 17:06:35.699: E/AndroidRuntime(5733): FATAL EXCEPTION: Timer-0
 10-04 17:06:35.699: E/AndroidRuntime(5733): java.lang.NullPointerException
 10-04 17:06:35.699: E/AndroidRuntime(5733):    at    com.example.gps_accurate_data.MainActivity$1.gotLocation(MainActivity.java:22)
 10-04 17:06:35.699: E/AndroidRuntime(5733):    at com.example.gps_accurate_data.MyLocation$GetLastLocation.run(MyLocation.java:119)
 10-04 17:06:35.699: E/AndroidRuntime(5733):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:56:18.400

如果您查看您提供的链接，当设备尝试获取位置时，它将运行代码；

```
if(gps_loc!=null){
    locationResult.gotLocation(gps_loc);
    return;
}

if(net_loc!=null){
    locationResult.gotLocation(net_loc);
    return;
}

locationResult.gotLocation(null); 
```

`null`这意味着如果它无法获取位置，它很可能会使用设置为的位置给您打电话。你需要检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T11:50:33.347

在顶部声明您的活动：`TextView txtValue;`

然后在你的`onCreate()`：`txtValue = (TextView)findViewById(R.id.txtValue);`

```
if(location != null){
    txtValue.setText("LATITUDE : - "+location.getLatitude()+"\n\n LONGITUDE :-    "+location.getLongitude()+"\n\n ALTITUDE :- "+location.getAltitude());
} 
```

# php - mysql_fetch_assoc() 给出错误

> ID：12726603
> 
> 赞同：0
> 
> 时间：2012-10-04T11:48:25.720
> 
> 标签：php, mysql, sql, associative-array

这是我在 php 中查询的代码：

```
$query3 = mysql_query("SELECT * FROM area_of_work") or die('Invalid query:'. mysql_error());

while($query3 = mysql_fetch_assoc($query3)){
    $flag = true;
    foreach($listOfUserAreas as $obj){
        if($obj->areaId == $query3['id']){
            $flag = false;
            break;
        }  
    }
    if($flag){
        $areaObj = new AreaInfo();
        $areaObj->areaId = $query3['id'];
        $areaObj->areaName = $query3['areaOfWork'];
        $areaObj->areaTableName = $query3['tableName'];
        array_push($listOfUnusedAreas, $areaObj);
    }
} 
```

我收到了这个错误：

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，数组在 C:\xampp\htdocs\job-skills\php\functions\user_unused_area_list.php 第 30 行 []

看不出有什么不对。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:51:37.550

将变量重命名`$query3`为`$query`或不同于`while loop`.

您在线执行的操作`while($query3 = mysql_fetch_assoc($query3))`是：在第一次迭代时将结果分配`mysql_fetch_assoc`给`$query3`（此时是资源），在第二次迭代时将`$query3`（已经是一个数组）传递给`mysql_fetch_assoc`.

**注意：** `mysql_*`函数已弃用。使用[`PDO`](http://www.php.net/manual/en/book.pdo.php)或[`mysqli_*`](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T11:51:52.917

在这一行：

```
while($query3 = mysql_fetch_assoc($query3)) 
```

您正在重新分配`$query3`结果`mysql_fetch_assoc`

应该是这样的：

```
while($queryRes = mysql_fetch_assoc($query3)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T11:52:00.623

不要使用相同的变量..尝试这样

```
$query3 = mysql_query("SELECT * FROM area_of_work") or die('Invalid query:'. mysql_error());

while($result = mysql_fetch_assoc($query3)){
.....//Your code
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T11:52:02.417

你的问题在这里：

```
$query3 = mysql_query("SELECT * FROM area_of_work") or die('Invalid query:'. mysql_error());
while ($query3 = mysql_fetch_assoc($query3)) { 
```

它应该是这样的：

```
$q = mysql_query("SELECT * FROM area_of_work") or die('Invalid query:'. mysql_error());
while ($query3 = mysql_fetch_assoc($q)) { 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T11:51:05.203

您的第一个循环可以正常工作，但您的第二个循环将失败：

```
while($query3 = mysql_fetch_assoc($query3)){ 
```

在第一个循环执行后，您将结果数组分配给资源，从而有效地覆盖资源。

像这样替换你的行：

```
while($listOfUserAreas = mysql_fetch_assoc($query3)){ 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-04T11:51:46.107

这是错误的：

```
while($query3 = mysql_fetch_assoc($query3)){ 
```

您正在使用相同的变量来读取，分配给。

对于这一行，您可以通过替换上述行来修复它：

```
$result = &$query3;
while($query3 = mysql_fetch_assoc($result)){ 
```

只需更改这些行，其余代码就可以工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-04T11:52:27.423

您正在尝试将关联数组分配给资源

```
while($query3 = mysql_fetch_assoc($query3)) 
```

这是错误的...尝试使用不同的变量 while($Result = mysql_fetch_assoc($query3))

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-04T11:55:31.370

```
while($query4 = mysql_fetch_assoc($query3)){ 
```

更改获取变量的名称

# perforce - 避开 P4V 中的高级协调

> ID：12726608
> 
> 赞同：0
> 
> 时间：2012-10-04T11:48:49.717
> 
> 标签：perforce, p4v

当我试图和解时，我有时会被这个警报打断。我怎样才能进行正常的协调？

![http://i.imgur.com/cVLHh.png](../Images/0a0a3a92dacde97156d4e97e6e0c221b.png)

有时，当我尝试*取消*协调时，我也会看到同样的警报。为什么 P4V 不直接带我回到主窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T01:43:54.020

Direct Answer: Normally you can ignore that popup by clicking on cancel. It will do an "un-Advanced" reconcile. But behavior may depend on your client/server versions...

This page [http://www.perforce.com/perforce/doc.current/manuals/p4v/Managing_lost_connection.html](http://www.perforce.com/perforce/doc.current/manuals/p4v/Managing_lost_connection.html) describes "Advanced Reconcile" as an "optional" step, but does not explain wtf (why the f) they had to add it.

I never had a problem with the reconcile before they introduced Advanced, but now it seems that a reconcile can fail to actually reconcile everything and you need to do an advanced reconcile to get the files it missed.

Lesson learned... After a "normal" reconcile (by click on "Cancel" the first time), do the reconcile again and select advanced (which does a folder diff), it shouldn't produce anything, but if it does, then you need to review those files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T14:10:44.247

您能否发布一个示例，说明“高级协调”对话框在您打开时的样子？这将有助于诊断基本协调不起作用的原因。例如，如果您告诉 P4V 您要添加一个文件，然后将其从磁盘中删除，则基本的协调不起作用。

FWIW，我通常会进入命令行并`p4 reconcile`作为更快的选项运行。

# php - flash (actionscript3) Socket 使用 $_GET 参数连接到 php 页面

> ID：12726612
> 
> 赞同：0
> 
> 时间：2012-10-04T11:49:00.667
> 
> 标签：php, actionscript-3, actionscript, get

您好，我正在尝试制作一个简单的游戏，但我需要服务器，所以我开始在 flash 上学习套接字，但是当我使用 get 参数将会话发送到 php 页面时，它就像页面没有 get 参数一样，就像我刚刚进入只是普通页面（例如：index.php?something=something2 并且它连接到 index.php 没有什么东西）

这就是我的意思：

[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)

我发送的portocol：

```
mysocket.writeUTF(" GET /index.php?act=getip HTTP/1.1\r\n Host: 192.168.1.100\r\n\r\n"); 
```

我的 php 页面：

```
<?
include 'all.php';//mysql connect, escaping all get/post params
if($_GET["act"] == 'getip'){
die($_SERVER["REMOTE_ADDR"]);//this must be printed on the screen
}
print 'asd';//<-------------------- i get this on connecting
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:33:55.230

如果您想进行基于 HTTP 的通信，只需使用`flash.net.URLLoader`.

```
var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.TEXT;
loader.addEventListener(Event.COMPLETE, completeHandler);
loader.load(new URLRequest("http://192.168.1.100/index.php?act=ip");

function completeHandler(event:Event):void
{
    var ip:String = loader.data;
} 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)

# iphone - 保留日期格式以修复 iPhone SDK

> ID：12726614
> 
> 赞同：0
> 
> 时间：2012-10-04T11:49:16.440
> 
> 标签：iphone, ios, localization, datepicker, nsdateformatter

如何保持从 UIDatePickerView 获取的日期格式修复，它不应该受到国家（地区格式）的影响。目前在我的应用程序中，如果我将区域格式设置为“中国”，它将以本地中国格式显示 UIDatePickerView。我想保持原样，但我想以我的固定标准格式访问日期。无论是澳大利亚、中国还是英国，都不应受到国家/地区的影响。请举个例子。

我不想更改 Picker View 中的日期格式，只想更改日期格式访问。这是我正在使用的代码：

```
NSDateFormatter *datef = [[NSDateFormatter alloc]init];

        NSCalendar *usersCalendar =
        [[NSLocale currentLocale] objectForKey:NSLocaleCalendar];
        [datef setLocale:[NSLocale currentLocale]];
        [datef setTimeZone:[NSTimeZone localTimeZone]];
         [datef setCalendar:usersCalendar];

        tempFDate = [datef dateFromString:[NSString stringWithFormat:@"%@ %@",txtDate.text,txtTime.text]];

        NSLog(@"%@",tempFDate); 
```

我在控制台中不断得到空值。我需要一种适用于所有区域格式的日期格式。请为我提出紧急建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:26:06.117

`NSDateformatter` 是最好的选择。看，如果未指定时区，它将使用设置设备的时区并相应地显示内容

有一些选项可以让设备设置时区也可以使用它

```
+ localTimeZone
+ defaultTimeZone
+ setDefaultTimeZone:
+ resetSystemTimeZone
+ systemTimeZone 
```

检查这个[类](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSTimeZone_Class/Reference/Reference.html)

在这里，您需要响应某个时区，例如 GMT 0000 然后

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]]; 
```

会为你做这项工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:09:57.100

使用 NSDateFormatter。

您可以使用 NSDateFormatter 转换任何日期格式，如 dd/MM/yyyy 等。

# android - TableView 的自动滚动

> ID：12726617
> 
> 赞同：0
> 
> 时间：2012-10-04T11:49:29.420
> 
> 标签：android, android-tablelayout

我有一个要求，我必须自动滚动我的 tableView .. 也就是说，行是动态添加的，我必须在添加行时启用 autoScroll 功能。

帮帮我。提前致谢。

**日志猫：**

```
10-05 11:26:39.474: E/AndroidRuntime(373): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.view.ViewGroup.addViewInner(ViewGroup.java:1970) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.view.ViewGroup.addView(ViewGroup.java:1865) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.widget.ScrollView.addView(ScrollView.java:231) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.view.ViewGroup.addView(ViewGroup.java:1822) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.widget.ScrollView.addView(ScrollView.java:213) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.view.ViewGroup.addView(ViewGroup.java:1802) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.widget.ScrollView.addView(ScrollView.java:204) 
10-05 11:26:39.474: E/AndroidRuntime(373): at com.example.animation_linear.Animation$LongOperation$1.run(Animation.java:89) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.os.Handler.handleCallback(Handler.java:587) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.os.Handler.dispatchMessage(Handler.java:92) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.os.Looper.loop(Looper.java:123) 
10-05 11:26:39.474: E/AndroidRuntime(373): at android.app.ActivityThread.main(ActivityThread.java:4627)
10-05 11:26:39.474: E/AndroidRuntime(373): at java.lang.reflect.Method.invokeNative(Native Method) 
10-05 11:26:39.474: E/AndroidRuntime(373): at java.lang.reflect.Method.invoke(Method.java:521)
10-05 11:26:39.474: E/AndroidRuntime(373): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 
```

我认为问题在于像这样在 asyncTask 中启动它，因为我的要求是对图像进行动画处理

```
protected Void doInBackground(Void... params) {

            runOnUiThread(new Runnable() {
                @Override
                public void run() {             
                    int a =0;
                    for (int row = 0; row < rows; row++) {

                        tableRow = new TableRow(getApplicationContext());
                        for (int col = 0; col < layout; col++) {

                            image = new ImageView(getApplicationContext());
                            iv[a]   =   image;
                            image.setPadding(20, 20, 20, 20);
                            android.view.animation.Animation animation =    animate(a);
                            image.setAnimation(animation);
                            image.setImageResource(R.drawable.images);

                            tableRow.addView(image);

                            a++;

                            VSC.post(new Runnable() {
                                @Override
                                public void run() {
                                   VSC.fullScroll(tableLayout.FOCUS_DOWN);
                                }

                            });
                        }
                        tableLayout.addView(tableRow);
                    }
                    //VSC.addView(tableLayout);
                    HSC.addView(VSC);
                    setContentView(HSC);

                }
            });

            return null;
        }
        @Override
        protected void onPostExecute(Void result) {  
            super.onPostExecute(result);
        }
    } 
```

[在调试模式下添加视图时，](https://stackoverflow.com/questions/6170181/java-lang-illegalstateexception-when-adding-a-view-in-debug-mode)请参阅链接java.lang.IllegalStateException 。如何调试问题？请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:57:09.687

在称为 TableLayout 的 android tableView 中，[这里](http://technotzz.wordpress.com/2011/11/04/android-dynamically-add-rows-to-table-layout/)是教程，将向您展示如何动态地将行添加到 TableLayout。
对于滚动功能，您始终可以使用旧答案中提到的 ScrollView。
祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T11:54:57.017

在你的xml中尝试这样

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android" 
     android:scrollbars="vertical" 
     android:layout_height="fill_parent" 
     android:layout_width="fill_parent">

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/tLayout"
        android:scrollbars="vertical"
        >   
</TableLayout>
</Scrollview> 
```

在您的 .java 类中，使用 id of`TableLayout`动态添加行，当行数超过屏幕高度时，将显示滚动条。

或者

只需添加：

**安卓：isScrollContainer="真"**

如下表所示

```
<TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:id="@+id/tLayout"
            android:isScrollContainer="true"
            >   
    </TableLayout> 
```

**编辑**

如你所说

> *行正在动态添加*

为此，您可以使用

```
TableLayout tl=(TableLayout)findViewById(R.id.tLayout);    
TableRow tr1 = new TableRow(this);
//to add row on table ,you can use loops to add multiple rows on table
tl.addView(tr1); 
```

参考这个[网址](https://stackoverflow.com/questions/5183968/how-to-add-rows-dynamically-into-table-layout)

并删除异常试试这个

```
if(tl !=null)
tl.removeAllViews(); 
```

如果您不想每次都删除所有视图并添加新视图

您可以像这样使用索引添加行

```
tl.addView(child, index); //where child is row 
```

看到这个答案[Android TableRow - 如何动态地将视图添加到某个位置？](https://stackoverflow.com/questions/3345189/android-tablerow-how-to-add-view-dynamically-to-certain-postion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:55:15.177

将表格布局放入 ScrollView 布局中

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TableLayout android:id="@+id/score_table"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"> 
        <TableRow android:id="@+id/header"/>                    
    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T11:57:05.723

自动滚动到最后（假设您的 TableView 包含在 ScrollView 中）：

```
scrollView.post(new Runnable() {            
    @Override
    public void run() {
           scroll.fullScroll(View.FOCUS_DOWN);              
    }
}); 
```

编辑：确保您的滚动视图只有一个孩子。

假设你有这样的布局：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="5dip" >

        <TextView
            android:id="@+id/textView1"
            android:text="Column 1"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <Button
            android:id="@+id/button1"
            android:text="Column 2" />
    </TableRow>

</TableLayout> 
```

并且您想使用滚动视图。它不应该是这样的：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/settingsContactInformationScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="5dip" >

            <TextView
                android:id="@+id/textView1"
                android:text="Column 1"
                android:textAppearance="?android:attr/textAppearanceLarge" />

            <Button
                android:id="@+id/button1"
                android:text="Column 2" />
        </TableRow>

    </TableLayout>

    <Button
        android:id="@+id/myButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />
</ScrollView> 
```

相反，您应该将要包含在 scrollView 中的所有内容分组到一个布局中，并将其用作 scrollView 的子项，如下所示：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myScrollView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:gravity="center"
        android:orientation="vertical" >

        <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="5dip" >

                <TextView
                    android:id="@+id/textView1"
                    android:text="Column 1"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <Button
                    android:id="@+id/button1"
                    android:text="Column 2" />
            </TableRow>

        </TableLayout>

        <Button
            android:id="@+id/myButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
        />

    </LinearLayout>
</ScrollView> 
```

# ruby-on-rails-3 - Savon 和 SoapUI

> ID：12726624
> 
> 赞同：0
> 
> 时间：2012-10-04T11:50:01.647
> 
> 标签：ruby-on-rails-3, soap, soapui, savon

在继续使用 Savon 之前，我总是使用 SoapUI 来查看我的 URL 是否正确。现在这一次我得到了一个 URL（可能来自一个在 Windows 机器上开发和托管的项目），假设它是这个：

> www.myservice.com/login/eeu.aspx?WSDL

现在当我尝试这个时，我得到了这个：

```
Error loading [www.myservice.com/login/eeu.aspx?WSDL]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Unexpected character encountered (lex state 3): '&' 
```

SoapUI 也会做 HTTP 请求，对吧？不仅是 SOAP（或者我在这里混淆了什么？）为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:20:42.107

问题不在于 HTTP 请求（尽管在您的情况下 SoapUI 确实执行它以获取 WSDL 文件）。错误消息表明解析响应存在问题——它不是格式良好的 XML 文档。手动下载服务的 WSDL 并使用 XML Validator 进行检查。如果它显示 XML 是正确的，那么它仍然可能与一些临时问题（连接限制、资源短缺）有关，导致基于 ASP 的服务在出现此问题时回复未通过验证的错误页面。

# scala - 从查询返回时未设置 scala 类中的字段

> ID：12726629
> 
> 赞同：2
> 
> 时间：2012-10-04T11:50:18.763
> 
> 标签：scala, orientdb

我有一个 Scala 类，用户：

```
class User {
   @OId var id: String = _

   var email: String = _

   var password_hash: String = _
   var password_salt: String = _

   var admin : Boolean = _

   @OVersion var version: String = _
} 
```

我可以成功地在数据库中创建和存储用户对象，但是当我查询用户时，例如 db.queryBySql[User]("select * from User where email = ?", username)

我得到了一个用户对象，但所有字段都是空的。

单步执行代码时，我可以从数据库中看到正确的结果，POJO 转换是失败的。

我正在使用 scala 2.9.2 和 Orient DB 1.1.0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:44:21.360

我做了例子解释：[http](http://code.google.com/p/orient/wiki/ScalaLanguage) ://code.google.com/p/orient/wiki/ScalaLanguage 这个例子使用本地连接

```
var db: ODatabaseObjectTx = new ODatabaseObjectTx("local:/tmp/dbtmp") 
```

我改变了一点主应用程序。我更改导入以匹配 OrientDb 包的组织。

```
import com.orientechnologies.orient.core.id.ORecordId
import com.orientechnologies.orient.core.sql.query.OSQLSynchQuery
import scala.collection.JavaConverters._
import scala.collection.JavaConversions._
import com.orientechnologies.orient.core.db.`object`.ODatabaseObject
import com.orientechnologies.orient.`object`.db.ODatabaseObjectTx 
```

而且，我改变了打开连接的方式。小心 ODatabaseObjectTx 已被弃用。在这段代码之后，我使用 db2 而不是 db。

```
var db2:ODatabaseObject =
if (!db.exists) {
  db.create()
} else {
  db.open("admin", "admin")
} 
```

我导入这些包：

```
orient-commons:1.1.0
orientdb-core:1.1.0
orientdb-object:1.1.0
hibernate-jpa-2.0-api:1.0.0.Final
scala-library:2.9.2 
```

# mysql - 如何在 mysql 中创建作业或事件

> ID：12726636
> 
> 赞同：3
> 
> 时间：2012-10-04T11:50:31.667
> 
> 标签：mysql

我想创建一个在`mysql`一天结束时运行的作业，在该作业中我想更新我的表中的一些列值。假设我有 2 个表，其中有一个`Status`名为`Pending or Accepted`. 为此，我想创建一个工作，我想在其中搜索两个表并将`Pending`状态设置为`Accepted`.

有没有可能

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T11:59:52.273

使用 MySQL 的[事件调度器](https://dev.mysql.com/doc/refman/8.0/en/event-scheduler.html)：

```
DELIMITER ;;

CREATE EVENT foo ON SCHEDULE EVERY DAY STARTS '2012-10-05 00:00:00' DO BEGIN
  UPDATE table1 SET Status = 'Accepted' WHERE Status = 'Pending';
  UPDATE table2 SET Status = 'Accepted' WHERE Status = 'Pending';
END;;

DELIMITER ; 
```

# c# - 文件从一个域上传到另一个域

> ID：12726639
> 
> 赞同：2
> 
> 时间：2012-10-04T11:50:42.510
> 
> 标签：c#, asp.net

我创建了一个有两个模块的网站，

1.  行政
2.  用户

它们托管在不同的域上。现在，当用户打开其域时，假设它的**abc.com**可以注册他们的公司并从那里上传照片，上传的照片将进入**Company_Logo FOLDER**。现在假设 ADMIN 的域是**xyz.com**。现在我希望管理员打开它的 xyz.com 并可以看到从 abc.com 上传的照片现在我想像管理员一样从 xyz.com 可以将上传的照片更改为位于 Company_Logo 文件夹中的 abc.com。

**简而言之，照片是从 abc.com 上的用户端上传的，并从 xyz.com 上的 ADMIN 端替换，所以我该怎么做**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:08:16.800

因此，您有两个不同的站点，托管在不同的域甚至不同的服务器上，并且您希望站点 A 在某些文件已上传时通知站点 B。然后，您希望能够从站点 B 更改站点 A 上的该文件。

在我看来，您需要在站点 A 上创建某种 API，让站点 B 的用户（管理员）检查最近上传的文件，并让他们覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:19:05.790

好的，这可以完成，但您需要使用`HttpHandler`. [你可以在这里](http://support.microsoft.com/kb/308001)找到一个很好的例子，但我会详细说明重要的部分。我不能在这里为您编写整个处理程序。

首先，让我们在 web 项目中构建一个类并调用它`ImageHandler`...

```
public class ImageHandler : IHttpHandler
{
} 
```

...接下来让我们实现接口...

```
public bool IsReusable
{
    get { return false; }
}

public void ProcessRequest(HttpContext context)
{
    // find out what we're trying to do first
    string method = context.Request.HttpMethod;

    switch (method)
    {
        case "GET":
            // read the query string for the document name or ID

            // read the file in from the shared folder

            // write those bytes to the response, ensuring to set the Reponse.ContentType
            // and also remember to issue Reponse.Clear()

            break;
        case "PUT":
            // read the Headers from the Request to get the byte[] of the file to CREATE

            // write those bytes to disk

            // construct a 200 response

            break;
        case "POST":
            // read the Headers from the Request to get the byte[] of the file to UPDATE

            // write those bytes to disk

            // construct a 200 response

            break;
        case "DELETE":
            // read the Headers from the Request to get the byte[] of the file to DELETE

            // write those bytes to disk

            // construct a 200 response

            break;
    }
} 
```

...最后我们需要在`web.config`...中设置处理程序

```
<configuration>
   <system.web>
      <httpHandlers>
         <!-- remember that you need to replace the {YourNamespace} with your fully qualified -->
         <!-- namespace and you need to replace {YourAssemblyName} with your assembly name    -->
         <!-- EXCLUDING the .dll                                                              -->
         <add verb="*" path="*/images/*" type="{YourNamespace}.ImageHandler, {YourAssemblyName}" />
      </httpHandlers>
   </system.web>
</configuration> 
```

***最后***，您还要做的事情是传递某种会话密钥，当您进入处理程序时可以验证该会话密钥，否则这对所有人都是开放的。如果你不需要`PUT`,`POST`和`DELETE`动词也没关系，但你需要。

`GET`从技术上讲，如果您不关心每个人都可以访问，则不需要检查会话密钥`GET`，但您必须检查其他人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T11:58:10.420

你有两个选择。

*   如果您的两个站点都托管在同一台计算机或共享托管环境中，则您的站点很可能可以访问其他目录。在这种情况下，您将可以轻松地将图像放置在所需的文件夹中。

*   现在是第二种情况，您的一个站点无权访问另一个站点的文件夹，这相当复杂。您必须创建一个代理，管理站点将在其中接受图像，然后将其放入主站点文件夹中。我不推荐这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:13:23.497

您可以通过 2 个步骤执行此操作：

1) 使用标准文件上传机制将图像上传到您的服务器

2）使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=VS.100%29.aspx)类在原始上传后立即将图像上传到服务器端的不同服务器。请参考这篇文章：[使用 HTTPWebrequest (multipart/form-data) 上传文件](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

请参阅此参考： [http ://forums.asp.net/t/1726911.aspx/1](http://forums.asp.net/t/1726911.aspx/1)

# ios - 在 iOS 应用中添加 revmob 广告时生成错误

> ID：12726640
> 
> 赞同：16
> 
> 时间：2012-10-04T11:50:43.207
> 
> 标签：ios, xcode, revmob

我想在我的应用程序中添加 RevMob 添加，但有一些错误

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
  objc-class-ref in RevMobAds(RevMobStoreController.o)
"_SKStoreProductParameterITunesItemIdentifier", referenced from:
  -[RevMobStoreController openStoreWithITunesItemId:] in RevMobAds(RevMobStoreController.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我已经添加了`StoreKit`和`SystemConfiguration`框架`RevMob`。我正在使用 Xcode4.3 和 ios4.2 请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-25T15:11:39.740

您需要添加 StoreKit 框架

编辑：我现在明白你的意思了，旧版本存在问题，我正在添加指向已编辑框架的链接以解决该问题：[已编辑 Revmob 框架](http://www.4shared.com/zip/PQwHzEiyba/RevMobAdsframework.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T20:38:17.650

您必须链接到 StoreKit.framework

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T17:53:27.353

看起来您现在拥有的广告 sdk 不支持与模拟器一起使用。

-[RevMobStoreController openStoreWithITunesItemId:] 在 RevMobAds(RevMobStoreController.o) ld 中：***未找到架构 i386 的符号***

如果您收到任何提及“未找到架构”的内容，则意味着 revmob 不包含在模拟器上运行的类。你有2个选择。查找缺少的库“.a 文件”或仅编译用于在设备上进行测试。

我遇到了新的 ios6 的问题，revmob 不支持新的 iphone 5 armv7s 架构。

仔细检查您的revmob安装或尝试编译到您的手机而不是模拟器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:56:04.297

当您在 xcode 中手动删除文件时，文件不会复制到 Bundle。所以“SKStoreProductViewController.m”是未在包中复制的文件，因此发生了错误。解决错误。`Copy Bundle Resource`如镜像所显示，仅将文件拖动到 .m 文件![在此处输入图像描述](../Images/0a641f2f082c2e9fbbb173e72be344d1.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T17:39:11.810

他们发布了一个新的 SDK 版本（4.6.0），可以在旧的 Xcode 版本上完美运行！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T07:38:42.140

如果您从项目中删除文件并随后重新创建它，也会发生此错误。有时 Xcode 不会自动将其重新包含在“编译源”框中（当您单击目标时）。选中该框并查看是否包含所有源文件，如果没有，则将它们拖入并重建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-22T14:09:06.947

Appirater 也会发生这种情况。我收到这条消息：

`Undefined symbols for architecture x86_64: "_OBJC_CLASS_$_SKStoreProductViewController", referenced from: objc-class-ref in Appirater.o "_SKStoreProductParameterITunesItemIdentifier", referenced from: +[Appirater rateApp] in Appirater.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation)`

- -修理 - -

1.  在 --> BuildPhases 中添加 StoreKit.framwork
2.  ---Under-> Link Libraries with Libraries
3.  如果您有多个目标，您可能需要将 StoreKit.framwork 添加到两个目标。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-15T21:31:53.733

我遇到了类似的问题，经过长时间的搜索和检查示例 RevMob 代码，我找到了这个解决方案，可能对其他人有帮助：

在 project target 下，选择**Build Settings**，在**Deployment**下，选中**iOS Deployment Target**，将值更改为 ' **iOS 9.0** ' 或更高版本。

我希望这会有所帮助。

# r - 时间序列数据操作

> ID：12726651
> 
> 赞同：1
> 
> 时间：2012-10-04T11:51:36.937
> 
> 标签：r, time-series, data-manipulation

我之前也遇到过这个问题，但是我没有写下解决方法，所以现在又遇到麻烦了！

我有一个如下的数据框：

```
Date    Product    Qty    Income
201001  0001       1000   2000
201002  0001       1500   3000
201003  0001       1200   2400
.
.
201001  0002       3500   2000
201002  0002       3200   1900
201003  0002       3100   1850 
```

换句话说，日期/产品的每个组合都有一行，每个组合的数量和收入信息。

我想重新排列此数据框，使其如下所示：

```
Date    Qty.0001    Income.0001   Qty.0002    Income.0002
201001  1000        2000          3500        2000
201002  1500        3000          3200        1900
201003  1200        2400          3100        1850 
```

换句话说，我希望每个日期都有一行，产品/信息（数量，收入）的每个组合都有一列。

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:15:55.660

使用`reshape`：

```
reshape(x,idvar="Date",timevar="Product",direction="wide")
    Date Qty.0001 Income.0001 Qty.0002 Income.0002
1 201001     1000        2000     3500        2000
2 201002     1500        3000     3200        1900
3 201003     1200        2400     3100        1850 
```

# php - Nginx cloudflare 502 网关错误

> ID：12726652
> 
> 赞同：0
> 
> 时间：2012-10-04T11:51:42.683
> 
> 标签：php, nginx, cloudflare

我正在使用cloudflare。我的网站运行良好，但没有加载任何图像、css 文件和 js 文件。

![看那个](../Images/0733ed43d58b5ddf141402aea493f717.png)

我的服务器详细信息；

> Ubuntu 12.04
> 
> nginx/1.1.19
> 
> php5-fpm
> 
> mysql

你可以[在这里查看](http://www.sorbakalim.co)

检查有 www 和没有 www。

我认为这个问题与代理（cloudflare）有关

> /etc/nginx.conf

```
user www-data;                                                                  
worker_processes 4;                                                             
pid /var/run/nginx.pid;                                                         

events {                                                                        
    worker_connections 768;                                                     
    # multi_accept on;                                                          
}                                                                               

http {                                                                          

    ##                                                                          
    # Basic Settings                                                            
    ##                                                                          

    sendfile on;                                                                
    tcp_nopush on;                                                              
    tcp_nodelay on;                                                             
    keepalive_timeout 65;                                                       
    types_hash_max_size 2048;                                                   
    # server_tokens off;                                                        

    # server_names_hash_bucket_size 64;                                         
    # server_name_in_redirect off;                                              

    include /etc/nginx/mime.types;                                              
    default_type application/octet-stream;                                      

    ##                                                                          
    # Logging Settings                                                          
    ##                                                                          

    access_log /var/log/nginx/access.log;                                       
    error_log /var/log/nginx/error.log;                                         

    ##                                                                          
    # Gzip Settings                                                             
    ##                                                                          

    gzip on;                                                                    
    gzip_disable "msie6";                                                       

    # gzip_vary on;                                                             
    # gzip_proxied any;                                                         
    # gzip_comp_level 6;                                                        
    # gzip_buffers 16 8k;                                                       
    # gzip_http_version 1.1;                                                    
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##                                                                          
    # nginx-naxsi config                                                        
    ##                                                                          
    # Uncomment it if you installed nginx-naxsi                                 
    ##                                                                          

    #include /etc/nginx/naxsi_core.rules;                                       

    ##                                                                          
    # nginx-passenger config                                                    
    ##                                                                          
    # Uncomment it if you installed nginx-passenger                             
    ##                                                                          

    #passenger_root /usr;                                                       
    #passenger_ruby /usr/bin/ruby;                                              

    ##                                                                          
    # Virtual Host Configs                                                      
    ##                                                                          

    include /etc/nginx/conf.d/*.conf;                                           
    include /etc/nginx/sites-enabled/*;                                         
} 
```

服务器配置

```
server {                                                                        
    #listen   80; ## listen for ipv4; this line is default and implied          
    #listen   [::]:80 default ipv6only=on; ## listen for ipv6                   

    root /usr/share/nginx/www/sorbakalim.co;                                    
    index index.html index.htm index.php;                                       

    # Make site accessible from http://localhost/                               
    server_name sorbakalim.co;                                                  

    location / {                                                                
        # First attempt to serve request as file, then                          
        # as directory, then fall back to index.html                            
        try_files $uri $uri/ /index.php;                                        
        # Uncomment to enable naxsi on this location                            
        # include /etc/nginx/naxsi.rules                                        
    }                                                                           

    location /doc/ {                                                            
        alias /usr/share/doc/;                                                  
        autoindex on;                                                           
        allow 127.0.0.1;                                                        
        deny all;                                                               
    }                                                                           

    # Only for nginx-naxsi : process denied requests                            
    #location /RequestDenied {                                                  
        # For example, return an error code                                     
        #return 418;                                                            
    #}                                                                          

    #error_page 404 /404.html;                                                  

    # redirect server error pages to the static page /50x.html                  
    #                                                                           
    #error_page 500 502 503 504 /50x.html;                                      
    #location = /50x.html {                                                     
    #   root /usr/share/nginx/www;                                              
    #}                                                                          

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000        
    #                                                                           
    location ~ \.php$ {                                                         
        fastcgi_split_path_info ^(.+\.php)(/.+)$;                               
        # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini              

        # With php5-cgi alone:                                                  
        fastcgi_pass 127.0.0.1:9000;                                            
    #   # With php5-fpm:                                                        
    #   fastcgi_pass unix:/var/run/php5-fpm.sock;                               
        fastcgi_index index.php;                                                
        include fastcgi_params;                                                 
    }                                                                           

    # deny access to .htaccess files, if Apache's document root                 
    # concurs with nginx's one                                                  
    #                                                                           
    #location ~ /\.ht {                                                         
    #   deny all;                                                               
    #}                                                                          
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:44:43.720

502 网关通常表示数据中心存在临时问题，如果您看到此问题，请[联系我们。](https://support.cloudflare.com/home)

报告中有用的内容： [Traceroute to the domain](https://support.cloudflare.com/entries/22050846-how-do-i-run-a-traceroute)

以及来自：http: [//yourdomain.com/cdn-cgi/trace](http://yourdomain.com/cdn-cgi/trace)的输出（将 yourdomain.com 替换为您的实际域）。

# javascript - 三星智能电视弹出列表输入

> ID：12726659
> 
> 赞同：2
> 
> 时间：2012-10-04T11:51:59.027
> 
> 标签：javascript, samsung-smart-tv

我想像三星在他们的文档中一样制作一个列表输入弹出窗口：http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/User_Experience_Guideline_1.5/Extra_Features/Policy_on_popup_windows/Action_Window](http://www.samsungdforum.com/Guide/View/Developer_Documentation/User_Experience_Guideline_1.5/Extra_Features/Policy_on_popup_windows/Action_Window)

像这样：

![描述图片](../Images/cbc8cc6d201e9f8e75c4d053a9b34213.png)

但没有关于如何实现这一点的信息。

**这是我找到的示例代码：**

```
 $('#newName_popup').sfPopup({
      text: 'Enter your name',
      buttons: ['Ok', 'Cancel'],
      timeout: 0,
      defaultFocus: 0, 
      callback: function newNameCallback(selectedIndex){
           alert('popup_callback');
           if(selectedIndex == 0){
                alert();
           }
      }
 }); 
```

如何找到所有属性（文本、按钮等）的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:54:18.483

我放弃了尝试更改三星提供的输入，而是制作了一个带有透明黑色背景的小场景：

**开始场景：**

```
sf.scene.show('CityPopup');
sf.scene.focus('CityPopup'); 
```

**隐藏场景：**

```
sf.scene.show('Scene1');
sf.scene.hide('CityPopup');
sf.scene.focus('Scene1'); 
```

**场景背景：**

```
background : rgba(0, 0, 0, 0.6); 
```

# android - Android动画减少口吃/断断续续/滞后

> ID：12726660
> 
> 赞同：26
> 
> 时间：2012-10-04T11:51:59.447
> 
> 标签：android, multithreading, caching, animation

所以我一直遇到动画问题，特别是当两个动画同时发生或在活动加载时发生。我知道这可能是一个资源问题，并且主线程中发生了很多事情，导致动画卡顿。

我发现了一些有趣的建议：
1\. Threads (ThreadPoolExecutor)
**此处：** [如何使我的动画更流畅 Android](https://stackoverflow.com/questions/8976039/how-do-i-make-my-animation-smoother-android)
2\. setDrawingCacheEnabled(true)
**此处：** [Android 的 setDrawingCacheEnabled() 是如何工作的？](https://stackoverflow.com/questions/7763532/how-does-androids-setdrawingcacheenabled-work)
3\. ViewGroup：animationCache = true
**这里**：[http ://www.curious-creature.org/2010/12/02/android-graphics-animations-and-tips-tricks/](http://www.curious-creature.org/2010/12/02/android-graphics-animations-and-tips-tricks/)

但是我还没有找到任何类型的例子来实现这些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T18:39:33.753

在减少口吃时，遵循按重要性顺序列出的这些规则，我已经减少了动画的口吃量：

1.  不要在`onCreate`,`onStart`或中启动动画`onResume`。
2.  在用户事件上启动动画，例如`onClick`并禁用触摸事件，直到动画完成。
3.  不要同时启动超过 2 个动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-21T15:11:33.273

如果您使用动画，则应遵循 android[文档](https://developer.android.com/training/basics/fragments/animate)；事实上，在某些情况下，您可能需要将片段转换推迟一小段时间。例如，在我的情况下，我需要推迟我的动画，直到我的视图模型返回一些数据：

`postponeEnterTransition()`在进入片段`onViewCreated()`方法中使用：

```
public class A extends Fragment {

    @Override
    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
        ...
        postponeEnterTransition();
    }
} 
```

一旦数据准备好开始转换，调用`startPostponedEnterTransition()`

```
public class A extends Fragment {

    @Override
    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {
        postponeEnterTransition();

        final ViewGroup parentView = (ViewGroup) view.getParent();
        // Wait for the data to load
        viewModel.getData()
            .observe(getViewLifecycleOwner(), new Observer<List<String>>() {
                @Override
                public void onChanged(List<String> list) {
                    // Set the data on the RecyclerView adapter
                    adapter.setData(list);
                    // Start the transition once all views have been
                    // measured and laid out
                    parentView.getViewTreeObserver()
                        .addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
                            parentView.getViewTreeObserver()
                                .removeOnPreDrawListener(this);
                            startPostponedEnterTransition();
                            return true;
                        });
                }
        });
    }
} 
```

# java - java.sql.SQLException：超过锁定等待超时；尝试在 MYSQL 中出现重启事务异常

> ID：12726665
> 
> 赞同：1
> 
> 时间：2012-10-04T11:52:13.167
> 
> 标签：java, mysql, sql, struts

我在**MYSQL**中使用表名“test”，该表名在事务 T1 期间被锁定，该事务将在 20 分钟内完成。当我在这 20 分钟内通过另一个事务 T2 更新此表时。我遇到了一个例外：-

```
11:58:38,584 ERROR [STDERR] java.sql.SQLException: Lock wait timeout exceeded; try restarting transaction
11:58:38,584 ERROR [STDERR]     at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2928)
11:58:38,584 ERROR [STDERR]     at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1571)
11:58:38,584 ERROR [STDERR]     at com.mysql.jdbc.ServerPreparedStatement.serverExecute(ServerPreparedStatement.java:1124)
11:58:38,584 ERROR [STDERR]     at com.mysql.jdbc.ServerPreparedStatement.executeInternal(ServerPreparedStatement.java:676) 
```

请为我提供解决方案，如何在不出现此异常的情况下执行此交易 T2？

更新mysql数据库中**innodb_lock_wait_timeout**的值来解决这个异常是否正确。我期待为这个问题找到任何有用的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:57:41.573

更新 innodb_lock_wait_timeout 的值*并不是*解决这个问题的正确方法。对于初学者来说，听起来您需要将其更新为 20 分钟，这太荒谬了。

innodb_lock_wait_timeout 的默认值为 50 秒 - 这是 T2 在放弃之前等待访问被 T1 锁定的表的时间长度（并导致您看到的异常）。

您的 T2 交易在做什么？如果它正在执行只读（即不写入您的表“测试”），那么您*可以*将数据库的隔离级别更改为“读取未提交”，以便 T2 可以读取未提交的数据。但是，IMO 这是您应该避免的黑客行为。

相反，您应该考虑您的设计/实现。在多线程环境（如 webapp）中，让一个打开的事务并持有一个行锁 20 分钟是自找麻烦。

您的归档活动（需要 20 分钟）是否必须在一个事务中进行？解决此问题的一个明显方法是在每个语句之后提交或将其分解为更合理大小的事务。

* * *

## 回答 #2

> 赞同：-10
> 
> 时间：2013-04-20T05:54:37.127

重新启动本地 mysql 以避免此类问题

# jquery - 在本地复制 jquery-ui 手风琴默认示例

> ID：12726671
> 
> 赞同：0
> 
> 时间：2012-10-04T11:52:27.277
> 
> 标签：jquery, html, css, jquery-ui

我正在尝试复制 jquery-ui 手风琴的默认[示例](http://jqueryui.com/demos/accordion/#default)，因此我在下面创建了此文档，但它没有显示使用 jquery-ui css 样式格式化的内容..有什么想法吗？

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.8.24/themes/base/jquery-ui.css" />
</head>
<body>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.8.24/jquery-ui.min.js"></script>

<div class="demo">

<div id="accordion">
    <h3><a href="#">Section 1</a></h3>
    <div>
        <p>
        Mauris mauris ante, blandit et, ultrices a, suscipit eget, quam. Integer
        ut neque. Vivamus nisi metus, molestie vel, gravida in, condimentum sit
        amet, nunc. Nam a nibh. Donec suscipit eros. Nam mi. Proin viverra leo ut
        odio. Curabitur malesuada. Vestibulum a velit eu ante scelerisque vulputate.
        </p>
    </div>
    <h3><a href="#">Section 2</a></h3>
    <div>
        <p>
        Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet
        purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor
        velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In
        suscipit faucibus urna.
        </p>
    </div>
    <h3><a href="#">Section 3</a></h3>
    <div>
        <p>
        Nam enim risus, molestie et, porta ac, aliquam ac, risus. Quisque lobortis.
        Phasellus pellentesque purus in massa. Aenean in pede. Phasellus ac libero
        ac tellus pellentesque semper. Sed ac felis. Sed commodo, magna quis
        lacinia ornare, quam ante aliquam nisi, eu iaculis leo purus venenatis dui.
        </p>
        <ul>
            <li>List item one</li>
            <li>List item two</li>
            <li>List item three</li>
        </ul>
    </div>
    <h3><a href="#">Section 4</a></h3>
    <div>
        <p>
        Cras dictum. Pellentesque habitant morbi tristique senectus et netus
        et malesuada fames ac turpis egestas. Vestibulum ante ipsum primis in
        faucibus orci luctus et ultrices posuere cubilia Curae; Aenean lacinia
        mauris vel est.
        </p>
        <p>
        Suspendisse eu nisl. Nullam ut libero. Integer dignissim consequat lectus.
        Class aptent taciti sociosqu ad litora torquent per conubia nostra, per
        inceptos himenaeos.
        </p>
    </div>
</div>

</div><!-- End demo -->

<div class="demo-description">
<p>
Click headers to expand/collapse content that is broken into logical sections, much like tabs.
Optionally, toggle sections open/closed on mouseover.
</p>
<p>
The underlying HTML markup is a series of headers (H3 tags) and content divs so the content is
usable without JavaScript.
</p>
</div><!-- End demo-description -->
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:56:12.917

你不见了

```
$(function() {
        $( "#accordion" ).accordion();
    }); 
```

工作示例[http://jsfiddle.net/7LH3p/](http://jsfiddle.net/7LH3p/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:42:37.133

您的问题似乎不受任何地方的语法错误的影响，并且当您复制粘贴它时，它肯定没有我能找到的任何语法错误

，唯一缺少的是插入 .js 文件后，您还必须调用 jquery 函数

这是语法

```
<script type="text/javascript">
    $(function() {
        $( "#divElementId" ).accordion();
    });
</script> 
```

现在这将手风琴功能应用于这个特定的 div。

看，.js 库只是函数体的集合，因此仅插入它们无济于事，您需要在脚本标记中调用该函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T11:59:38.530

正如@AntonWestberg 提到的，您忘记了脚本：

```
<script type="text/javascript">
    $(function() {
        $( "#accordion" ).accordion();
    });
</script> 
```

# php - 从数组保存数据而不提交任何表单php

> ID：12726677
> 
> 赞同：0
> 
> 时间：2012-10-04T11:52:44.510
> 
> 标签：php, mysql, arrays, while-loop, save

我正在尝试保存一个数组，所以我有以下代码：

```
<?php

$sql = "SELECT * FROM scenarii where code_s='".mysql_real_escape_string($_POST['code_s'])."'";
$qry = mysql_query($sql) or die(__LINE__.mysql_error().$sql);

$i = -1; // index des enregistrements
?>
<table cellpadding="5" cellspacing="5">
   <tr>
      <td><strong>CODE SCENARIO</strong></td>
      <td><strong>LIBELLE</strong></td>
      <td><strong>ACTION</strong></td>
      <td><strong>DESCRIPTION</strong></td>
      <td><strong>DATE</strong></td>
   </tr>
   <form action="<?php echo (isset($_POST['go'])) ? 'go.php' : '#'; ?>" method="post">
      <input type="hidden" name="liasse" value="<?php echo $_POST['liasse']; ?>"/>
      <input type="hidden" name="n_doss" value="<?php echo $_POST['n_doss']; ?>"/>
      <input type="hidden" name="qualite" value="<?php echo $_POST['qualite']; ?>"/>
      <?php while($row = mysql_fetch_assoc($qry)): ?>
      <tr>
         <td><input name="data[<?php echo ++$i; ?>][code_s]" type="text" value="<?php echo $row['code_s'];?>" size="10"></td>
         <td><input name="data[<?php echo $i; ?>][titre]" type="text" value="<?php echo $row['titre']; ?>" size="45"></td>
         <td><input name="data[<?php echo $i; ?>][action]" type="text" value="<?php echo $row['action']; ?>" size="15"></td>
         <td><input name="data[<?php echo $i; ?>][libelle]" type="text" value="<?php echo $row['libelle']; ?>" size="55"></td>
         <td><input type="text" name="data[<?php echo $i; ?>][date]" value="<?php echo $get_date($row['jour']) ; ?>" size="12"></td>
      </tr>
      <?php endwhile; ?> 
```

为了保存这个我有这个代码：

```
if (isset($_POST['liasse']))  {
$value = $_POST['data'] ; 

foreach($value as $key => $array)
{

        $sql = 'INSERT INTO agenda SET
        liasse = "'.mysql_real_escape_string($_POST['liasse']).'",
        code_s = "'.mysql_real_escape_string($array['code_s']).'",
        date_action = "'.date('Y-m-d',strtotime($array['date'])).'", 
        libelle = "'.mysql_real_escape_string($array['titre']).'",
        action = "'.mysql_real_escape_string($array['action']).'",
        description = "'.mysql_real_escape_string($array['libelle']).'",
        n_doss = "'.mysql_real_escape_string($_POST['n_doss']).'",
        qualite = "'.mysql_real_escape_string($_POST['qualite']).'"
        ';
mysql_query($sql) or die(__LINE__.mysql_error().$sql);

} 
```

但我真的迷路了

实际上我为此使用了一个表格，现在我想提交所有这些数据但没有任何表格，当我有第一个时我想保存它。

问题是我迷路了，因为我不能调用任何像 data[][code_s] 这样的 var。

所以我不知道如何保存这个。我想将它保存在后台，而不是显示已保存的内容。

接受我最崇高的敬意

亲切的问候，

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:24:51.357

将下部代码块的代码包装成一个函数，并将值数组作为参数传递：

```
function storeValues ($data) {
    foreach($data as $key => $val) 
    {
        $catalog=sprintf("%s='%s'",$key,$val);
        $sql = sprintf('INSERT INTO agenda SET %s', implode(',',$catalog));
        mysql_query($sql) or die(__LINE__.mysql_error().$sql);
    } // foreach 
} // function storeValues 
```

当您要保存值时调用此函数。所以在从数据库中检索它们之后。您为检索到的每一行调用它并交出如下值：

```
storeValues ($row); 
```

这将一次存储一行值。显然，这可以优化为使用多重插入。但是，让我们一步一步来……

# bean-validation - Jsr303 在关联验证上指定组

> ID：12726680
> 
> 赞同：0
> 
> 时间：2012-10-04T11:52:53.573
> 
> 标签：bean-validation, hibernate-validator

在验证与特定类型的 bean 具有多个关系但每个关系必须以不同方式验证的对象时，我遇到了一个问题。复合类：

```
public class Composite{
  @Valid
  private Person insurer;
  @Valid
  private Person insured;
  ...(other properties)
  private String foo;
} 
```

人物类：

```
public class Person{
@NotNull(groups={Insurer.class,Insured.class})
private String name;
@NotNull(groups={Insurer.class,Insured.class})
private String surname;
...
@NotNull(groups={Insurer.class})
private String ssn;
} 
```

所以我们有一个单一类型的 Person 可以代表保险人和被保险人。问题是，在验证 Composite 时，我希望让保险公司的财产与 Insurer 集团一起验证并由 Insured 投保。无论如何它可以完成还是我需要等待[https://hibernate.onjira.com/browse/BVAL-208](https://hibernate.onjira.com/browse/BVAL-208)解决...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:33:54.023

要以标准化的方式解决您的问题，您确实必须等待 Bean Validation 1.1，它将解决 BVAL-208（组翻译）。

如果您的*Person*类还有一个标志或其他一些标准，您可以使用它来确定此人是保险公司还是被保险人，您还可以使用自定义类级别约束。缺点是您失去了注释的一些表现力，因为您必须在自定义约束验证器实现中自己进行所有验证。

另一种选择（同样您需要一种区分保险公司和被保险人的方法）是使用 Hibernate Validator 特定的[*GroupSequenceProvider*](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#section-default-group-class)。这样，您可以保留当前配置，并且您只需根据*Person*的类型返回正确的组。

# emacs - Emacs 自动格式化 php 代码（缩进）

> ID：12726685
> 
> 赞同：1
> 
> 时间：2012-10-04T11:53:02.370
> 
> 标签：emacs, indentation, code-formatting, autoformatting

**我正在寻找一种方法来格式化emacs中符号和关键字之间的空格。**

例如，我想更改以下 php 代码：

```
foreach($a as $b) {
} 
```

进入

```
foreach ($a as $b) {
} 
```

到目前为止，我所能找到的只是从 emacs 运行的外部工具。

相关：[在 emacs 中自动格式化 PHP 文件](https://stackoverflow.com/questions/4544703/auto-formatting-a-php-file-in-emacs)。

我更喜欢它对缩进进行格式化，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:03:32.737

事实上，我不知道 Emacs 中有任何这样的工具。我很乐意接受即时执行类似操作的包的提交。也许它可以工作有点像`electric-layout-mode`？

# apache - .htaccess 目录限制是否足够？

> ID：12726686
> 
> 赞同：1
> 
> 时间：2012-10-04T11:53:10.577
> 
> 标签：apache, drupal, e-commerce, security, ubercart

我正在用 Drupal 和 Ubercart 建立一个 Mp3 商店。我想实施最好的安全措施来保护内容免受黑客等攻击。我有一个带有 .htaccess 文件的文件目录

.htaccess 文件的内容

```
SetHandler Drupal_Security_Do_Not_Remove_See_SA_2006_006
Deny from all
Options None
Options +FollowSymLinks 
```

这是否足够，还是应该将 mp3 文件存储在 webroot 之外？

VPS 主机是否提供比共享主机更好的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:31:54.143

看来您已将文件系统设置为私有，并且文件将通过 Drupal 传输。根据我的经验，它可以工作并且几乎是安全的，除非：

1.  第三方可以通过 FTP 或更高的协议访问您的服务器。
2.  用户可以获得执行 PHP 的权限。
3.  确保如果您启用了 IMCE 或其他文件浏览器模块，则不允许访问这些受保护的文件夹。
4.  无论您有什么计划，托管公司都可以访问您的文件。但通常，**正确配置**的主机比共享主机更安全，因为您可以使用私人临时文件夹，并且您可以更好地控制谁可以访问您的服务器并禁止坏人。

# php - Yii CListView 与 MVC 原则冲突

> ID：12726688
> 
> 赞同：0
> 
> 时间：2012-10-04T11:53:14.743
> 
> 标签：php, yii

伊大师！

我们有一个博客。博客有一个包含作者列表的页面。作者存储在 AUTHOR 表中。我使用了基本的 Yii-widget CListView 来展示它：

```
public function actionIndex() {
    $dataProvider = new CActiveDataProvider('Author');
    $this->render('index', array(
        'dataProvider' => $dataProvider,
    ));
} 
```

比views/author/view.php：

```
$this->widget('zii.widgets.CListView', array(
    'dataProvider' => $dataProvider,
    'itemView' => '_view',
)); 
```

但除了关于作者的信息之外，这个列表还必须包含每个作者的五篇随机相关文章的 URL。文章标题存储在 ARTICLE 表中。现在我使用一个丑陋的解决方案（views/authors/_view.php）：

```
<ul class="experts-node-articles-list">
    <?php $authorArticles = Article::model()->findAllByAttributes(
        array('author_id' => $data->id), 
        array('limit' => '5'
    )); ?>
    <?php foreach ($authorArticles as $item) : ?>
    <li><a href="#"><?php echo CHtml::encode($item->title); ?></a></li>
    <?php endforeach; ?>
</ul> 
```

这很丑，因为在视图中调用模型。这是与 MVC 原则恕我直言的冲突。我可以以真正的 MVC 方式做到这一点吗？我怀疑它可以通过模型关系和范围来完成......但不幸的是我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:11:50.863

**1）在作者**模型中创建一个关系。（您可以像这样添加/更新`relations()`方法）

```
public function relations()
{
    return array(
        .....
        'randomArticles' => array(
            self::HAS_MANY, 
            'Article', 
            'author_id',
            'limit' => 5,
            'order' => 'RAND()',
        ),
        .....
    );
} 
```

2）您的数据提供者必须是这样的。

```
$dataProvider = new CActiveDataProvider('Author', array(
    'criteria'=>array(
        'with'=>array('randomArticles'),
    ),
)); 
```

3) 在你的视图中 (views/authors/_view.php)，你可以做这样的事情。

```
foreach($data->randomArticles as $article ) {
    // display $article info, something like below
    $this->renderPartial('_artical_info', array('article' => $article));
} 
```

这可以节省大量的 sql 查询。

# c# - mscorwks 中的非托管内存泄漏帮助分析

> ID：12726689
> 
> 赞同：6
> 
> 时间：2012-10-04T11:53:27.673
> 
> 标签：c#, memory-leaks, windbg

故事：

我们在 .NET 2.0 应用程序中面临非托管内存泄漏。启动后的进程消耗大约 150MB（其中大部分是 .NET 托管、对象状态等）。运行大约 12 小时后，进程消耗了 800MB，接下来的 12 小时后，进程有大约 1.8GB 的​​ RAM。我刚刚尝试了 JetBrains .NET Memory Profiler、ANTS、.NET Memory Profiler（以及市场上可能有的 2 个下一个 mem 配置文件），这些都没有帮助我，因为我后来检测到我们的进程在未管理的非托管区域中消耗了那么多内存。为了检测到这一点，我使用了带计数器的 Perf 监视器：私有字节（进程）和所有堆中的#字节（.NET CLR 内存），其中私有字节消耗进程分配的所有内存的大约 90%。这就是我切换到非托管调试的原因。

DebugDiag：所以我在进程上运行 debugdiag 并获得完整转储，这是它的快照：

*   mscorwks.dll（一个已知的 Windows 内存管理器）负责 781,73 MB 的未完成分配。这些分配似乎源自以下模块和功能：

*   ntdll.dll（一个已知的 Windows 内存管理器）负责 98,24 MB 的未完成分配。这些分配似乎源自以下模块和功能：

按分配计数排名前 4 位的函数

*   mscorwks!EEHeapAlloc+15b -- 80 957 个分配
*   mscorwks!CLRMapViewOfFileEx+4a -- 4 171 个分配

按分配大小排列的前 4 个函数

*   mscorwks!EEVirtualAlloc+15b -- 117,50 MB
*   mscorwks!EEHeapAlloc+15b -- 15,03 MB

**发现有趣的日志：**

功能详情

`Function mscorwks!EEVirtualAlloc+15b`

*   分配类型 虚拟内存分配
*   分配计数 1471 个分配
*   分配大小 117,50 MB
*   泄漏概率 73%

`Function mscorwks!EEHeapAlloc+15b`

*   分配类型 堆分配
*   分配计数 80957 个分配
*   分配大小 15,03 MB
*   泄漏概率 72%

`Function mscorwks!CExecutionEngine::CheckThreadState+fe`

*   分配类型 堆分配
*   堆句柄 0x00000000`00000000
*   分配计数 2 个分配
*   分配大小 304 字节
*   泄漏概率 98%

`Function mscorwks!CLRMapViewOfFileEx+4a`

*   分配类型 虚拟内存分配
*   分配计数 4171 个分配
*   分配大小 0 字节
*   泄漏概率 73%

我希望有人把我推向正确的方向我怎么能从这个转储中找到内存泄漏？我能够将转储加载到 windbg 并运行标准的 windbg 命令集，但我不知道哪个是能够隔离泄漏的正确命令。

如果有人想提供帮助，我可以提供完整的转储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:56:25.240

查看转储文件，它似乎确实是一个托管泄漏，只是不在托管堆上。转储显示托管堆非常小，但加载器堆为 1 GB。该流程有超过 35000 个动态程序集。我查看了其中一些，它们似乎是序列化（XML 和二进制）。看看这篇[博文](http://blogs.msdn.com/b/tess/archive/2006/02/15/532804.aspx)。它描述了一个类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:11:29.290

我最喜欢的调试 .NET 和 Silverlight 内存泄漏的方法是使用 SOS 扩展。请参阅此处进行快速演练：http: [//blogs.msdn.com/b/ricom/archive/2004/12/10/279612.aspx](http://blogs.msdn.com/b/ricom/archive/2004/12/10/279612.aspx)

我一般做的是：

1.  !DumpHeap -stat 获取内存中存在哪些对象的列表；这通常会表明问题的根源（例如，如果我看到一百万只应该使用一次并丢弃的小物体）。
2.  一旦我知道是什么类型的对象导致它，我使用！DumpHeap 转储这些对象的列表并随机获取其中一些对象的根（！GCRoot）。这通常表明哪个对象意外地持有对泄漏对象的引用。

这假设您正在处理托管内存泄漏（引用被保存在您不期望的地方）。如果您正在处理非托管内存泄漏，这将无济于事，但除非您的应用程序执行大量手动非托管内存管理（例如 P/Invoke 的对象编组），否则这种情况不太可能发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:00:18.670

使用弱引用可能会减少内存使用[http://en.wikipedia.org/wiki/Weak_reference](http://en.wikipedia.org/wiki/Weak_reference) .. 这很一般，但是一旦它为我节省了几乎几 GB 秒

# python - 获取文件的绝对路径为什么要遍历另一个目录

> ID：12726690
> 
> 赞同：1
> 
> 时间：2012-10-04T11:53:28.970
> 
> 标签：python

我在 python 中有一个小片段，它打算遍历所有目录、子目录并维护所有文件的绝对路径列表。

代码：

```
import os , pickle
root="/home/me/programs/"
l = [] #Will have list of all the files parsed through
for dname,subdirlist,flist in os.walk(root):
 for fname in flist:
  l.append(os.path.abspath(fname)) 
```

即使我正在解析所有文件，但`/home/me/programs/`无论实际绝对路径如何，我的输出都是前缀。

例如，
`'/home/me/programs/cpp/sample/test.c'`
我将拥有而不是拥有`'/home/me/programs/test.c'`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T11:56:27.440

如[`os.walk`文档](http://docs.python.org/library/os.html#os.walk)中所述，您必须将根路径加入您的 fname 以获得绝对路径：

```
import os , pickle
root="/home/me/programs/"
l = [] #Will have list of all the files parsed through
for dname,subdirlist,flist in os.walk(root):
    for fname in flist:
        l.append(os.path.join(dname, fname)) 
```

# ios - 保存登录会话凭据并在整个应用程序中加载

> ID：12726693
> 
> 赞同：1
> 
> 时间：2012-10-04T11:53:42.777
> 
> 标签：ios, json, web-services, authentication, login

我是 iOS 开发的新手。我正在开发照片共享应用程序。在此，首先我需要为登录页面使用 Web 服务。Web 服务使用 PHP 并以 JSON 格式返回响应。我想在整个应用程序中保存登录会话。当用户启动应用程序时，它总是检查用户是否登录。如果我不及早这样做，请尽快给我合适的解决方案，因为我的工作有最后期限。这是我的代码。

> ```
> **<HomeKiddoAppDelegate.h file>**
> 
> #import <UIKit/UIKit.h>
> 
>     @class HomeKiddoViewController;
> 
>     @interface HomeKiddoAppDelegate : UIResponder <UIApplicationDelegate>
> 
>     @property (strong, nonatomic) UIWindow *window;
> 
>     @property (strong, nonatomic) HomeKiddoViewController *viewController;
> 
> @end
> 
> **<HomeKiddoAppDelegate.m  file>**
> 
> #import "HomeKiddoAppDelegate.h"
> 
> #import "HomeKiddoViewController.h"
> 
> @implementation HomeKiddoAppDelegate
> 
>      - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:    (NSDictionary *)launchOptions
>         {
>             self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
>             // Override point for customization after application launch.
>            self.viewController = [[HomeKiddoViewController alloc]     initWithNibName:@"HomeKiddoViewController" bundle:nil];
>            self.window.rootViewController = self.viewController;
>            [self.window makeKeyAndVisible];
> 
>         //Register defaults
>             NSMutableDictionary *defaultsDictionary = [[NSMutableDictionary alloc] init];
>           [[NSUserDefaults standardUserDefaults] registerDefaults: defaultsDictionary];
> 
>         return YES;
>     }
> 
>     - (void)applicationWillResignActive:(UIApplication *)application
>     {
> 
>     }
> 
>     - (void)applicationDidEnterBackground:(UIApplication *)application
>     {
> 
>     }
> 
>     - (void)applicationWillEnterForeground:(UIApplication *)application
>     {
> 
>     }
> 
>     - (void)applicationDidBecomeActive:(UIApplication *)application
>     {
> 
>     }
> 
>     - (void)applicationWillTerminate:(UIApplication *)application
>     {
> 
>     }
> 
> @end 
> ```

 **```
 > #import <UIKit/UIKit.h>
    > #import "SignInViewController.h"
    > 
    > @interface HomeKiddoViewController : UIViewController{
    >     SignInViewController *signInViewController;
    >     }
    > 
    > -(IBAction)signInClicked:(id)sender;
    > 
    > @end 
```

```
**<HomekiddoViewController.m>**
> #import "HomeKiddoViewController.h"
> 
> @interface HomeKiddoViewController ()
> 
> @end
> 
> @implementation HomeKiddoViewController
> 
>      - (void)viewDidLoad
>     {
>         [super viewDidLoad];
>     }
> 
>     - (void)viewDidUnload    {
>        [super viewDidUnload];    }
> 
>     - (BOOL)shouldAutorotateToInterfaceOrientation:      (UIInterfaceOrientation)interfaceOrientation    {
>         return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);    }
> 
>    -(IBAction)signInClicked:(id)sender{
>         if(signInViewController==nil){
>             signInViewController=[[SignInViewController alloc]initWithNibName:@"SignInViewController" bundle:nil];
>         }
>        [self.view addSubview:signInViewController.view];
>     } @end
> 
> 

    **<SignInFormViewController.h>**
    > #import <UIKit/UIKit.h>
    > #import "SBJson.h"

    > 
    > @interface SignInFormViewController : UIViewController
    > <NSURLConnectionDelegate>

        {
        >     IBOutlet UITextField *email1;
        >     IBOutlet UITextField *password1;
        >     NSURLConnection *conn;
        >     NSMutableData *webData;
        >     IBOutlet UITextView *textView;
        >    }

     @

        property (nonatomic, retain) IBOutlet UITextField *email1; @property
        > (nonatomic, retain) IBOutlet UITextField *password1;

    > 
    > 

        -(IBAction)btnSignInClicked:(id)sender;
        > -(IBAction)backClicked:(id)sender;

    > 
    > @end
    > 
```

> **# 导入“SignInFormViewController.h”
> 
> @interface SignInFormViewController ()
> 
> @结尾
> 
> @implementation SignInFormViewController @synthesize email1; @合成密码1；
> 
> ```
> - (void)viewDidLoad
> 
>     {
>         [super viewDidLoad];
>     }
> 
> - (void)viewDidUnload
> 
> {
>     [super viewDidUnload];
> }
> 
> - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
> {
>     return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
> }
> 
> -(IBAction)btnSignInClicked:(id)sender{
>         NSString *queryUrl=[NSString stringWithFormat:@"Url of the web service with   parameters",email1.text,password1.text];
>         NSURL *url=[NSURL URLWithString:queryUrl];
>         NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:url];
>         conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];
>         if(conn)
>         {
>             webData=[NSMutableData data];
>             NSLog(@"in Connection if statement");
>         }
> }
> 
> -(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *) response{
> 
>         [webData setLength: 0];
>         NSLog(@" inside didReceiveZResponse");
> }
> 
> -(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *) data {
>     [webData appendData:data];
>     NSLog(@"inside did receive data");
> 
> }
> 
> -(void) connection:(NSURLConnection *)connection didFailWithError:(NSError *) error {
> 
>     NSLog(@"in fail with error");
> 
> }
> 
> -(void) connectionDidFinishLoading:(NSURLConnection *)connection{
> 
>     [email1 resignFirstResponder];
>     [password1 resignFirstResponder];
> 
>     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
>     [defaults setObject:email1.text forKey:@"email"];
>     [defaults setObject:password1.text forKey:@"password"];
>     [defaults synchronize];   
> }
> 
> -(IBAction)backClicked:(id)sender{
>     [self.view removeFromSuperview];
> } 
> ```
> 
> @结尾**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-06-16T22:29:47.260

我会给你一个全面的答案。

## 不要使用 NSUserDefaults 并且不要存储密码，这是一个糟糕的解决方案

## 让我们创建一个结构化的用户类

当用户登录时，您需要确保您可以访问整个应用程序中的用户数据，以便您可以在需要时在任何屏幕上获取数据。

为了实现这一点，我们需要建立一个很好的结构来适当地组织它。请记住，当前用户和其他用户都是“用户”，因此我们将使用相同的类。

创建一个类并将其命名为“EDUser”（如果需要，您可以选择其他名称）。
此类将包含用户信息（当前用户或其他用户）。
不仅如此，这个类将有能力让用户登录。

这是该类可能的样子的图片：

```
class EDUser {
    var firstName: String
    var lastName: String?
    var birthDate: NSDate?

    init(firstName: String, lastName: String?, birthDate: NSDate?) {
        self.firstName = firstName
        self.lastName = lastName
        self.birthDate = birthDate
    }
}

// MARK: - Accessor

extension EDUser {
    class var currentUser: EDUser? {
        get {
            return loadCurrentUserFromDisk()
        }
        set {
            saveCurrentUserToDiskWithUser(newValue)
        }
    }
}

// MARK: - Log in and out

extension EDUser {
    class func loginWithUsername(username: String,
                           andPassword password: String,
                           callback: (EDUser?, NSError) -> Void) {
        // Access the web API
        var parameters = [
            "username": username,
            "password": password
        ]
        YourNetworkingLibrary.request(.POST,
                          "https://api.yourwebsite.com/login",
                          parameters: parameters).responseJSON { 
            response in

            if response.statusCode == .Success {
                let user = EDUser(firstName: response["firstName"],
                       lastName: response["lastName"],
                       birthDate: NSDate.dateFromString(response["birthDate"]))
                currentUser = user
                callback(currentUser, nil)
            } else {
                callback(nil, yourError)
            }
        }
    }

    class func logout() {
        deleteCurrentUserFromDisk()
    }
}

// MARK: - Data

extension EDUser {
    class private func saveCurrentUserToDiskWithUser(user: EDUser) {
        // In this process, you encode the user to file and store it
    }

    class private func loadCurrentUserFromDisk() -> EDUser? {
        // In this process, you get the file and decode that to EDUser object
        // This function will return nil if the file is not exist
    }

    class private func deleteCurrentUserFromDisk() {
        // This will delete the current user file from disk
    }
}

// MARK: - Helper

extension NSDate {
    class func dateFromString(string: String) -> NSDate {
        // convert string into NSDate
    }
} 
```

## 用例

现在一切就绪，我们可以像这样使用它

### 非阻塞登录进程

```
EDUser.loginWithUsername(username: "edward@domain.com",
                         password: "1234") {
    user, error in

    if error == nil {
        // Login succeeded
    } else {
        // Login failed
    }
} 
```

### 注销

```
EDUser.logout() 
```

### 检查用户是否登录

```
if EDUser.currentUser != nil {
    // The user is logged in
} else {
    // No user logged in
    // Show the login screen here
} 
```

### 在任何屏幕上获取当前用户数据

```
if let currentUser = EDUser.currentUser {
    // do something with current user data
} 
```

### 将其他用户存储为对象

```
let user = EDUser(firstName: "Edward",
                  lastName: "Anthony",
                  birthDate: NSDate()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:50:01.740

最简单的解决方案是使用钥匙串。

另一种简单的方法是将登录凭据保存在语言环境文件（txt、xml 甚至 sqldb）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:14:21.887

您可以像这样将登录数据保存在 NSUserDefaults 中。

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults setObject:cookieString forKey:@"Cookie"];
[userDefaults setObject:pwString forKey:@"Password"];
[userDefaults synchronize]; 
```

然后，您可以从应用程序中您喜欢的任何位置加载用户默认值

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *myString = [defaults objectForKey:@"Cookie"]; 
```****

# c# - 如何绑定到 Button BorderThickness？

> ID：12726694
> 
> 赞同：0
> 
> 时间：2012-10-04T11:53:50.237
> 
> 标签：c#, xaml, data-binding, windows-8, microsoft-metro

我在 xaml 中为`Button`该类创建了一个自定义样式。以下是相关部分：

```
<Rectangle
    Stroke="{TemplateBinding BorderBrush}"
    StrokeThickness="{TemplateBinding BorderThickness}"/> 
```

显然这是行不通的，因为 while`StrokeThickness`是 a `double`，`BorderThickness`是 a `Thickness`。

我怎样才能绑定到厚度的实际值（这将始终是统一的），而不会弄乱转换器？

在您标记为完全重复之前，[这个问题](https://stackoverflow.com/questions/1935416/how-bind-borderthickness-in-template)是不同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T23:28:11.950

试试这个：

```
<Rectangle
    Stroke="{TemplateBinding BorderBrush}"
    StrokeThickness="{Binding RelativeSource={RelativeSource TemplatedParent}, 
        Path=BorderThickness.Left}"/> 
```

**笔记**

以下绑定

```
{Binding RelativeSource={RelativeSource TemplatedParent}, Path=MyProperty} 
```

是相同的

```
{TemplateBinding MyProperty} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:21:50.977

怎么样

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:Con x:Key="abc" />
    </Window.Resources>
    <Grid>
        <Rectangle StrokeThickness="{Binding abc, Converter={StaticResource abc}}"/>
    </Grid>
</Window>

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = new { abc = new Thickness(4) };
        }
    }    

    public class Con : IValueConverter
    {
        public object Convert(object value, Type targetType, 
                              object parameter, 
                              System.Globalization.CultureInfo culture)
        {
            return ((Thickness)value).Left;
        }

        public object ConvertBack(object value, 
                                  Type targetType, 
                                  object parameter, 
                                  System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# java - ArrayList 的排序副本构造

> ID：12726696
> 
> 赞同：4
> 
> 时间：2012-10-04T11:53:58.380
> 
> 标签：java, list, sorting, collections, arraylist

我有一个`ArrayList`.
如何`List`用相同的数据实例化一个新的但**排序**的？
我想到了以下几点：

1.  使用`ArrayList`复制构造函数，然后使用`Collections.sort`
2.  用一个`TreeSet`

对于选项 (1)，复制元素*然后*排序会产生额外的开销。
对于选项 (2)，将删除重复项。
最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T15:50:14.853

如果您可以使用第三方库，那么使用[Guava](https://code.google.com/p/guava-libraries/)这只是

```
List<Foo> sortedCopy = Ordering.from(comparator).sortedCopy(list); 
```

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T11:57:57.097

“最佳方式”取决于您的要求：您要删除重复项吗？使用`TreeSet`; 你想保留重复项吗？复制，然后排序。试图从两者中获得最快的一个是过早的优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-05-17T15:31:29.103

在 Java 8 中，您可以使用流式传输：

```
ArrayList<Integer> myArrayList = new ArrayList();
myArrayList.add(4);
myArrayList.add(6);

List<Integer> myNewSortedList = myArrayList.stream().sorted().collect(Collectors.asList()); 
```

但是，上面的列表不能改变。如果您愿意，您可以改为收集为`ArrayList`：

```
myArrayList<Integer> myNewSortedList = myArrayList.stream().sorted().collect(Collectors.toCollection(ArrayList::new)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T12:24:33.153

不要使用 a`Treeset`来获取 a 的排序副本`List`。它将删除重复项。（除非这是所需要的，但这与创建新的排序副本 a 是不同的问题`List`）。

使用选项 1 - 创建一个新的`List`并调用`Collections.sort()`它，如果需要，可以使用你自己的`Comparator`。

# jquery - jQuery - 一个元素有两个类的悬停功能，每个类都有一个悬停

> ID：12726697
> 
> 赞同：0
> 
> 时间：2012-10-04T11:54:01.480
> 
> 标签：jquery

我不确定这是嵌入在我的代码中某处的不同问题，还是我不知道的悬停功能问题 -

简而言之，我有一个包含两个类的元素

```
<input type="image" class="classA classB" ... /> 
```

我有这样的jQuery代码：

```
$('classA').hover(){
    function1,
    function2
}

$('classB').hover(){
    function3,
    function4
} 
```

我想要的是，当您将鼠标悬停在输入上时，两个悬停函数（function1，function3）都会被触发。当你离开它时，两个函数（function2，function4）也会被触发。似乎正在发生的事情是classB悬停完全覆盖或阴影，或者你有什么classA悬停功能。

这是预期的行为（或者这是否表明我的更大的代码库有问题？），如果是这样，普遍的共识是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:57:53.650

在标签同时具有两个类的情况下， `classB`' 悬停会覆盖`classA`' 悬停，因为它们的写入顺序（在`classB`' 悬停之后`classA`的悬停）。

一个解决方案可能是：

```
$('.classA, .classB').hover(
// mouseover
function() {
    var $this = $(this);
    if($this.hasClass('classA')) {
        function1();
    }
    if($this.hasClass('classB')) {
        function3();
    }

},
// mouseout
function() {
    var $this = $(this);
    if($this.hasClass('classA')) {
        function2();
    }
    if($this.hasClass('classB')) {
        function4();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:19:31.500

啊哈！

好的，所以 sp00m 的回答很好而且正确——但这并不*完全*符合我的目的。因为我有相当多的代码在运行，我希望保持“干净”（干净？）。我可能应该在最初的问题中更清楚......

看，我已经有了需要第一次悬停的元素和需要第二次悬停的元素，所以当我有需要*这两种*元素的元素时，目标是不为该场景进行*第三次悬停。*代码不可重用和复杂性！嘘！

我没有意识到最后的悬停会覆盖第一个悬停。这可能与它针对一个班级的事实有关，而第一个班级针对的是另一个班级。

解决方案是这样的：

```
$('.classB, .classA').hover(){
    function3,
    function4
} 
```

令人高兴的是，当我使用多重选择器定位 classA 时，它*不会*覆盖原始悬停。

也就是说，我从输入的类属性中删除了 classB，并将 classA 添加到悬停选择器！

# android - 一个屏幕上的两个相对布局

> ID：12726698
> 
> 赞同：2
> 
> 时间：2012-10-04T11:54:01.750
> 
> 标签：android, android-layout

我想在我的屏幕上有 2 个相对布局。一个低于另一个。我制作了这段代码，但它不起作用。在这种情况下，我只能看到两者的上部相对布局，尽管我设置了 wrap_content，但这个布局占用了整个空间。

编辑！：我把第二个代码放在下面，它也失败了。

编辑2！：我发现问题......这有点......伤心。问题在于我的主题。我将背景设置为太大的 png 文件，当我通过清单应用默认主题时，这发生了。当我删除它一切都很好。

这个版本也失败了。

新代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout 
        android:id="@+id/some_id" 
        android:layout_above="@+id/some_id2"
        android:layout_alignParentTop="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button 
            android:id="@+id/main_button_localize" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:text="@string/main_localize" />

    </RelativeLayout>

    <RelativeLayout 
        android:id="@id/some_id2" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true"  >

        <ToggleButton 
            android:id="@+id/main_help" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"  />

    </RelativeLayout>

</RelativeLayout> 
```

旧代码：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/maps_manager_menu"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_alignParentTop="true" >

        <!-- Top -->
        <Button 
            android:id="@+id/maps_manager_top_left" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" 
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_top_middle" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_top_left"
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_top_right" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_top_middle"
            android:contentDescription="@string/empty" />

        <!-- Middle -->
        <Button 
            android:id="@+id/maps_manager_middle_left" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/maps_manager_top_left"
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_middle_middle" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_middle_left"
            android:layout_below="@id/maps_manager_top_middle"
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_middle_right" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_middle_middle"
            android:layout_below="@id/maps_manager_top_right"
            android:contentDescription="@string/empty" />

        <!-- Bottom -->
        <Button 
            android:id="@+id/maps_manager_bottom_left" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/maps_manager_middle_left"
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_bottom_middle" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_bottom_left"
            android:layout_below="@id/maps_manager_middle_middle"
            android:contentDescription="@string/empty" />

        <Button 
            android:id="@+id/maps_manager_bottom_right" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/maps_manager_bottom_middle"
            android:layout_below="@id/maps_manager_middle_right"
            android:contentDescription="@string/empty" />

    </RelativeLayout>

    <RelativeLayout
           android:id="@+id/maps_manager_controls"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="true"
            android:layout_below="@id/maps_manager_menu" >

            <ToggleButton 
                android:id="@+id/maps_manager_help" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />

        </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:14:06.970

最好将具有垂直方向的 LinearLayout 作为两个子 RelativeLayouts 的父级。如果您可以为 RelativeLayouts 放置 80:20 的高度权重，那么它将适合整个屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:17:23.117

```
<ScrollView 
         xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content">

<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
             <RelativeLayout
            android:id="@+id/maps_manager_menu"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentTop="true" >

            <!-- Top -->
            <Button 
                android:id="@+id/maps_manager_top_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_top_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_top_left"
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_top_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_top_middle"
                android:contentDescription="@string/empty" />

            <!-- Middle -->
            <Button 
                android:id="@+id/maps_manager_middle_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/maps_manager_top_left"
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_middle_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_middle_left"
                android:layout_below="@id/maps_manager_top_middle"
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_middle_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_middle_middle"
                android:layout_below="@id/maps_manager_top_right"
                android:contentDescription="@string/empty" />

            <!-- Bottom -->
            <Button 
                android:id="@+id/maps_manager_bottom_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/maps_manager_middle_left"
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_bottom_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_bottom_left"
                android:layout_below="@id/maps_manager_middle_middle"
                android:contentDescription="@string/empty" />

            <Button 
                android:id="@+id/maps_manager_bottom_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_bottom_middle"
                android:layout_below="@id/maps_manager_middle_right"
                android:contentDescription="@string/empty" />

        </RelativeLayout>

        <RelativeLayout
               android:id="@+id/maps_manager_controls"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_alignBottom="true"
                android:layout_below="@id/maps_manager_menu" >

                <ToggleButton 
                    android:id="@+id/maps_manager_help" 
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            </RelativeLayout>
    </RelativeLayout>
 </ScrollView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:35:27.720

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
        <RelativeLayout
            android:id="@+id/maps_manager_menu"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentTop="true" >

            <!-- Top -->
            <Button 
                android:id="@+id/maps_manager_top_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_top_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_top_left"
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_top_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_top_middle"
                android:contentDescription="@string/hello_world" />

            <!-- Middle -->
            <Button 
                android:id="@+id/maps_manager_middle_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/maps_manager_top_left"
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_middle_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_middle_left"
                android:layout_below="@id/maps_manager_top_middle"
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_middle_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_middle_middle"
                android:layout_below="@id/maps_manager_top_right"
                android:contentDescription="@string/hello_world" />

            <!-- Bottom -->
            <Button 
                android:id="@+id/maps_manager_bottom_left" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@id/maps_manager_middle_left"
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_bottom_middle" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_bottom_left"
                android:layout_below="@id/maps_manager_middle_middle"
                android:contentDescription="@string/hello_world" />

            <Button 
                android:id="@+id/maps_manager_bottom_right" 
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@id/maps_manager_bottom_middle"
                android:layout_below="@id/maps_manager_middle_right"
                android:contentDescription="@string/hello_world" />

        </RelativeLayout>

        <RelativeLayout
               android:id="@+id/maps_manager_controls"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_below="@id/maps_manager_menu" >

                <ToggleButton 
                    android:id="@+id/maps_manager_help" 
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

            </RelativeLayout>
    </RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:05:49.270

请按照以下步骤操作：

1.  将 ID 添加到最顶层的相对布局中说： android:id="@+id/rtvlt_first"
2.  在第二个 RelativeLayout 中删除 alignparenttop 属性。
3.  添加 android:tobottomof="@id/rtvlt_first"...

    试试这个....
    祝你好运！

# php - 数组取消设置键

> ID：12726707
> 
> 赞同：7
> 
> 时间：2012-10-04T11:54:22.980
> 
> 标签：php, arrays

开门见山...

我有一个如下所示的数组 ( `$is_anonymous_ary`)：

```
array (
  [80] => 1
  [57] => 1
  [66] =>
  [60] => 
  [90] => 1
) 
```

`$user_id_ary`还有另一个像这样的数组 ( )：

```
array (
  [0] => 80
  [1] => 30
  [2] => 57
  [3] => 89
  [4] => 66
  [5] => 60
  [6] => 90
) 
```

我需要`$user_id_ary`根据第一个数组取消设置值。因此，如果 from 的`$is_anonymous_ary`值为 1（真），则从该数组中获取键，检查`$user_id_ary`并取消设置具有`$user_id_ary`来自键的值的键`$is_anonymous_ary`。

我稍微复杂了描述，这就是我需要的最终结果：

```
user_id_ary = array(
  [0] => 30
  [1] => 89
  [2] => 66
  [3] => 60
) 
```

如您所见，所有`$is_anonymous_ary`具有`TRUE`值的键都在第二个数组中消失了。它将第一个数组中的键作为第二个数组中的值。

希望我说清楚了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T11:58:43.500

尝试**[array_filter](http://php.net/manual/en/function.array-filter.php)**：

```
$user_id_ary = array_filter($user_id_ary, function($var) use ($is_anonymous_ary) {
  return !(isset($is_anonymous_ary[$var]) && $is_anonymous_ary[$var] === 1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T21:48:25.750

```
$user_id_ary = array_diff($user_id_ary, array_keys(array_filter($is_anonymous_ary))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:01:45.410

多么容易:)

```
$new_array =NULL;
foreach($is_anonymous_ary as $key=>$value){

  $new_array[] = array_search($key, $user_id_ary);
  unset($is_anonymous_ary[$key]);
}
$user_id_ary =  $new_array; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:03:55.807

```
foreach($user_id_ary as $id){
   if($is_anonymous_ary[$id] == '1'){
      unset($d);
   }       
} 
```

如果这不起作用，请尝试遍历 user_id_array 中的每个元素

# objective-c - 在 iOS 应用程序中使用自动释放的对象

> ID：12726708
> 
> 赞同：0
> 
> 时间：2012-10-04T11:54:25.020
> 
> 标签：objective-c, nsautoreleasepool

要返回 NSArray 或 NSDictionary，我看到大多数人使用以下实现，这也是一些书籍所建议的。（iOS 开发实用方法 - ）

**选项1**

```
 -(NSArray*)listOfStudents{

    NSMutableArray *temp = [[NSMUtableArray alloc] init];

    //Add elements to the array
    //
    //
    //
    NSArray *students =  [NSArray arrayWithArray:temp];

    return students;
    }

 -(void)viewWillAppear{

    self.studentsList = [self listOfStudents];
    } 
```

但是同样可以通过以下方式完成吗？

选项 2

```
 -(NSArray*)newListOfStudents{

    NSMutableArray *temp = [[NSMUtableArray alloc] init];
    NSArray *students = [[NSArray alloc]initWithArray:temp];
    [temp release];
    //Add elements to the array
    //
    //
    //

    return students;
    }

-(void)viewWillAppear{

  NSArray *array = [self newListOfStudents];
    self.studentsList = array;
    [array release];

    } 
```

假设这些方法在主线程本身中被调用。

内存使用方面，我认为第二个选项很好，因为它不会创建自动释放对象，因为它们仅在自动释放池耗尽时才被释放。

我假设只有当应用程序退出时，主自动释放池才会被耗尽。因此，如果 OPTION 1 中的方法被多次使用（因为它们在 ViewWillAppear 中被调用），我认为只有在应用退出时才会释放自动释放池中的许多列表。

那么选项 2 方法是更好的方法吗？

更新：

为了更清晰，我更新了 viewWillAppear 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:13:33.933

我*认为*在第二个例子中你打算打电话

```
self.studentsList = [self newListOfStudents]; 
```

如果这`studentsList`是一个`retain`ed 属性，那么现在会泄漏。

此外，这两个示例中的临时数组只是无用的开销。在第二个例子中，这完全是胡说八道。

最干净的解决方案是

```
-(NSArray *)listOfStudents {
   NSMutableArray *list = [NSMutableArray array];
   // Add things to array
   return list;
} 
```

还有两个建议：

1）您可能会在您的代码上运行静态分析器，这将指向内存问题。
2) 如果您对内存管理更有信心，请切换到 ARC。

# jquery - 中断 MJPG 流

> ID：12726710
> 
> 赞同：2
> 
> 时间：2012-10-04T11:54:35.193
> 
> 标签：jquery, mjpeg

我有一个可通过 AXIS P1347 相机上的 CGI 获得的 MJPEG 流。但是出于表演的原因，我不想在不应该显示的时候检索它。有没有办法中断流？

实际上，我正在使用 Page Visibility API 来检查页面当前是否可见。当页面不可见时（例如最小化），我将标签源设置为“#”。它似乎用 FF 中断了流，尽管有 30 秒的延迟。但是对于 Chrome 或 Safari，图像不再显示，但仍会检索流。我正在使用另一个 CGI 来获取一个连接列表，该列表显示流是否已交付。

有人知道如何中断 Webkit 浏览器上的流吗？有人知道如何摆脱这个烦人的 30 秒延迟吗？

感谢您的出色解决方案！

# mysql - 如何将 my.large.ini 更改为 my.ini

> ID：12726714
> 
> 赞同：0
> 
> 时间：2012-10-04T11:55:00.793
> 
> 标签：mysql, mysqli

我想提高我的mysql性能。所以我尝试使用 my-large.ini。

首先，我将该文件重命名为 my.ini。然后我在 [mysqld] 下添加了以下几行

```
port=3306
basedir="C:/Program Files/MySQL/MySQL Server 5.1/"
datadir="C:/Documents and Settings/All Users/Application Data/MySQL/MySQL Server 5.1/Data/" 
```

之后我尝试启动我的mysql服务。它没有开始。

我需要做更多的改变来配置它。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:10:17.797

我认为你的 datadir 应该是

```
datadir="C:\Program Files\MySQL\MySQL Server 5.1\data\" 
```

# ruby-on-rails - Rails Devise：根据控制器自定义登录视图

> ID：12726719
> 
> 赞同：0
> 
> 时间：2012-10-04T11:55:30.613
> 
> 标签：ruby-on-rails, devise

我正在使用带有 Rails 的 Devise 进行用户身份验证。在我的控制器中，我在过滤器之前：

```
class MyController < ApplicationController  
before_filter :authenticate_user! 
```

现在，当用户尝试在 MyController 中打开一个名为 :new 的方法时，将显示登录视图。我需要一种专门针对该 :new 方法调用自定义此登录视图的方法。

我已经生成了设计视图模板。

那么，是否有一些方法可以根据以前的 url 自定义会话/新视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:00:52.180

尝试这个

```
before_filter :authenticate_user!, :except => [:new] 
```

authenticate_user 方法调用所有方法没有新的

# android - 链接文本框

> ID：12726721
> 
> 赞同：0
> 
> 时间：2012-10-04T11:55:31.233
> 
> 标签：android, spinner, textview

我得到了包含 4 个类别的下拉列表。在同一活动上，类别的内容每个有 4-8 段。如果我从下拉列表中选择一个类别，是否可以跳转到活动中的相应类别？类似于 HTML 中的那个

# ios - ios: [tableView reloadData]

> ID：12726725
> 
> 赞同：5
> 
> 时间：2012-10-04T11:55:48.743
> 
> 标签：ios

`[tableView reloadData]`会影响ios的性能吗？是什么`[tableView reloadData]`？它是如何重新加载表格视图的？有没有其他方法可以重新加载 tableview？

我想在表格视图的末尾添加一些行。我怎样才能做到这一点？

和有什么区别

```
[self.tableView reloadData] 
```

和

```
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:insertIndexPathswithRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView endUpdates]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:00:56.643

reloadData 就是这样做的——对表视图（可见部分）的完整更新。

如果您只需要更新某些单元格，即更新、插入、删除或移动，请改用适当的更新方法。这甚至会为更改设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:01:21.773

AFAIK，[self.tableView reloadData] 更多用于如果您的数据已完全更改并且您想要显示最新版本（或者过滤器已更改等...）

ie 想象一下，您有一张显示足球运动员的桌子，您“轻弹开关”以显示来自不同球队的足球运动员。在这种情况下，您倾向于使用 reloadData。这将刷新整个表。

```
[self.tableView beginUpdates];
[self.tableView insertRowsAtIndexPaths:insertIndexPathswithRowAnimation:UITableViewRowAnimationAutomatic];
[self.tableView endUpdates]; 
```

用于将新数据添加到显示的当前数据集中。这不会刷新整个，但会将新行动画化到当前表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:15:22.097

如果您想重新加载一个部分或几行，也有执行此操作的方法。

对于行：

```
[self.tableView reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation]; 
```

对于部分：

```
[self.tableView reloadSections:(NSIndexSet *)sections withRowAnimation:(UITableViewRowAnimation)animation]; 
```

# ios - 为什么我在通过蜂窝网络下载图像时总是遇到 NSURLConnection 超时？

> ID：12726727
> 
> 赞同：5
> 
> 时间：2012-10-04T11:55:49.893
> 
> 标签：ios, nsurlconnection, 3g

我的应用程序似乎在蜂窝网络上运行得非常糟糕——用户界面通常有微调器而不是图像，但并非总是如此。它使用由并发 NSOperations 驱动的 NSURLConnections。它在 WIFI 上运行良好 - 完全没有问题。

我发现我收到很多 NSURLConnection 超时，但不知道为什么。我怎样才能找到这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T11:55:49.893

为了追查这个问题，我首先测量了最大并发连接数，发现它始终在 55 左右。

*   将最大值减少到 10（通过设置操作队列最大值，减少超时，但仍然不完美

*   将最大值减少到 4 - 甚至更少的超时，但仍然有一些

*   将最大值设置为 1 - 这必须工作，对吧？没有！

有时应用程序可以在完全没有并发的情况下正常工作（最大值 == 1），但它仍然有一半的时间失败。

所以我烧毁了苹果的支持事件，并让其中一位最有经验的工程师提供建议。根据他的建议，我尝试了以下方法：

*   在不同运营商的蜂窝网络 (Verizon) 上运行该应用程序，并且运行良好。所以问题不是蜂窝本身（或 iOS），而是 AT&T 的蜂窝网络（纽约和新泽西都失败了）

*   从 http 切换到 https，现在它可以在 AT&T 上完美运行，完全并发

*   调查了 Web 端点以确定它的功能，结果证明它很差（稍后会详细介绍）。我尝试了一个具有更多功能的不同 Web 端点，并且使用 http 解决了最初的问题。

我从中学到的如下：

*   使用iOS5.1或iOS6没有区别

*   如果您在 AT&T 3G 上遇到此问题并且正在使用 http，请尝试切换到 https

*   如果端点使用 HTTP1.0 并且不支持“连接：保持活动”，则每个 http 请求都在建立和断开 TCP 连接。我相信蜂窝网络的这种“颠簸”是 AT&T 断开我的一些会话的原因，但当然无法确定这一点。

*   使用支持持久连接的 HTTP1.1 服务，问题就消失了。在这种情况下，没有 TCP 连接抖动。

*   一些 HTTP1.1 服务支持“管道”，iOS 也是如此（使用 NSURLRequest 设置，HTTPShouldUsePipelining），如果我可以切换到这个，那么我的性能应该会大大提高

*   有一个 WWDC 2012 视频讨论如何提高网络性能：Session 706 "Networking Best Practices"

编辑

所以当我剥洋葱的时候，这变得更加奇怪了！经过进一步讨论，一些网络人用 CloudFront 做了一个测试，它确实接受了 'Connection: keep-alive'。我昨天一遍又一遍地尝试让它工作，但不能。

网络专家建议我在使用 https 和 low 时尝试一下，结果确实如此！出于某种原因，在 AT&T 3G 上使用“http”时，该标头标签要么被删除，要么被忽略。我也用 Wifi 测试了我的应用程序。在除 AT&T/3G 之外的所有情况下，响应中都返回了“连接”。

# tagging - 用于自动主题标记的 MALLET - 带有训练数据

> ID：12726728
> 
> 赞同：1
> 
> 时间：2012-10-04T11:55:53.907
> 
> 标签：tagging, mallet, training-data, topic-modeling

我有一个已标记的文档语料库。我有大约 400 个标签的固定列表 - 与不同的主题相关。每个文档都被标记了一个或多个标签和一个简短的标题。（我还有一个更大的标题列表——如果文档包含非常相似的内容，我经常会重复使用它）

我想创建一个界面，根据我标记现有文档的方式，为我添加到语料库的新文档建议标签/标题（来自我现有的列表）。

我已阅读有关概率主题模型 LDA 类的信息，当您没有任何现有的标记数据时，它看起来非常适合分析文本。但我看不出有任何方法可以整合我现有的工作。

任何建议，将不胜感激。

亲切的问候

斯瓦米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:30:04.277

对于标签建议，我们的经验只是使用搜索引擎，不需要主题建模。

尝试以下步骤：

*   为所有文档的标题和摘要设置索引
*   使用新文档的标题或摘要作为查询在索引上进行搜索，可以得到相似文档的列表。
*   使用列表中前几个最相似的文档，我们将它们上的所有标签聚合为一个标签包
*   按每个标签的频率对标签束进行排序，第一个最频繁的标签是最终结果

这个解决方案是可行的。

# php - icalendar 和 phpmailer.php

> ID：12726735
> 
> 赞同：2
> 
> 时间：2012-10-04T11:56:17.627
> 
> 标签：php, phpmailer, icalendar

我正在尝试将 icalendar 发送给用户，以便他们可以在 Outlook 中打开这些 ics 文件并保存约会。我正在使用的邮件程序是“phpmailer.php”。

问题是它在消息正文中以 html 格式发送 ical 格式。这是我的代码

```
 $text="
BEGIN:VCALENDAR
VERSION:1.0
BEGIN:VEVENT
CATEGORIES:MEETING
STATUS:TENTATIVE
DTSTART:".$startDateTime."
DTEND:".$endDateTime."
SUMMARY:Interview for the candidate".$cname."
DESCRIPTION:".$message."
CLASS:PRIVATE
END:VEVENT
END:VCALENDAR";

$mail->SetFrom('xxxxxx@yahoo.com', 'xxxx');
$mail->IsSMTP();
$mail->Host = "smtp.mail.yahoo.com";

$mail->SMTPAuth = true;
$mail->Username = 'xxxxxxxx@yahoo.com';
$mail->Password = 'xxxxx';

$mail->AddAddress($addresses[$i]);
$mail->Subject    = "Interview schedule of Candidate";

    $headers = "From: Sender\n";
        $headers .= "Reply-To: xxxxxx@yahoo.com\n";
        $headers .= "MIME-Version: 1.0\n";
        $headers .= "Content-Type: text/calendar; method=REQUEST; charset=utf-8\n";
        $headers .= "Content-Transfer-Encoding: 8bit\n";
        $headers .= "Content-class: urn:content-classes:calendarmessage\n";
$mail->Body=$body;

if(!$mail->Send($headers,$body)) 
{
        echo "Mailer Error: " . $mail->ErrorInfo;
} 
else 
{
    echo "Message sent!";
} 
```

请让我知道我的代码有什么问题。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-01T14:51:23.153

以下解决方案对我有用：

```
$mail->Subject = $name;
$mail->Body = $description; 
$mail->AltBody = $body; // in your case once more the $text string
$mail->Ical = $message; // ical format, in your case $text string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:39:40.197

您也可以尝试：

```
$mail->IsHTML(FALSE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T06:35:38.967

这个解决方案对我有用。无附件

```
$mail->AddStringAttachment("my_content_here", "meeting.ics", "7bit", "text/calendar; charset=utf-8; method=REQUEST"); 
```

# bash - atoi() 类似于 bash 中的函数？

> ID：12726741
> 
> 赞同：3
> 
> 时间：2012-10-04T11:56:28.410
> 
> 标签：bash

想象一下，我使用一个状态文件来存储一个数字，我这样读取数字：

`COUNT=$(< /tmp/state_file)`

但由于文件可能被破坏，$COUNT 可能不包含“数字”，而是任何字符。

除了使用正则表达式，即`if [[ $COUNT ~ ^[0-9]+$ ]]; then blabla; fi`，是否有“atoi”函数将其转换为数字（如果无效，则为 0）？

**编辑**

最后我决定使用这样的东西：

`let a=$(($a+0))`

或者

`declare -i a; a="abcd123"; echo $a # got 0`

感谢 J20 的提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T11:59:55.690

您不需要`atoi`等效的 Bash 变量是无类型的。尝试在算术中使用设置为随机字符的变量只会默默地忽略它们。例如

```
foo1=1
foo2=bar
let foo3=foo1+foo2
echo $foo3 
```

给出结果`1`。

请参阅[此参考](http://www.tldp.org/LDP/abs/html/untyped.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:06:01.197

`echo $COUNT | bc`应该能够投一个数字，根据法官的评论容易出错......

`echo ${COUNT/[a-Z]*} | bc`这类似于您的正则表达式方法，但不容易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-13T16:21:08.437

```
case "$c" in
[0-9])... 
```

你应该按字符吃掉输入字符串。

# c# - 我们可以在 asp.net 的字符串变量中使用 OR 运算符吗？

> ID：12726743
> 
> 赞同：-5
> 
> 时间：2012-10-04T11:56:32.313
> 
> 标签：c#, asp.net

> **可能重复：**
> [使用 C# 检查字符串是否包含字符串数组中的字符串](https://stackoverflow.com/questions/2912476/using-c-sharp-to-check-if-string-contains-a-string-in-string-array)

我们可以在 asp.net 中使用逻辑 OR 运算符（|）在单个字符串变量中包含多个字符串吗？

```
string _Text = "";
string _str = "abc" | "xyz" | "123";
if(_Text.Contains(_str))
{
    foo("_str");
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T11:58:47.440

使用正则表达式`Regex.IsMatch(_Text, @"^(abc)|(xyz)|(123)$")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T11:58:58.430

不，你不能，但你可以解决：

```
string _Text = "abc"
var _str = new[] {"abc", "xyz", "123"};

if(_str.Any(s => _Text.Contains(s))
{
     foo(_Text);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:01:56.177

我不完全清楚你想做什么。或 (|) 无论如何都不起作用。你需要这样的东西吗？

```
string haystack = "The quick brown fox jumps over the lazy dog";
string[] needles = {"fox", "the", "dog"};

foreach (var n in needles)
{
    if (haystack.Contains(n))
    {
        Console.WriteLine("'{0}' found in '{1}'", n, haystack);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T11:58:32.890

不，您应该为此使用任何类型的容器（数组/列表/等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T11:58:43.267

不，它不能按照你的方式完成。但是如何使用数组

```
string _Text = "";
string[] _str = {"abc" , "xyz" , "123"};
if(_str.Contains(_Text))
{
    foo(_Text);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T11:58:55.677

两个操作数都必须是布尔值：

[逻辑或运算符：||](http://msdn.microsoft.com/en-us/library/f355wky8.aspx)

“逻辑或运算符 (||) 如果其中一个或两个操作数为真，则返回布尔值真，否则返回假。操作数在计算之前被隐式转换为 bool 类型，结果为 bool 类型。逻辑 OR 已离开——右关联性。”

# iphone - Facebook 链接 fb://page/(fbid) 不工作

> ID：12726745
> 
> 赞同：1
> 
> 时间：2012-10-04T11:56:49.577
> 
> 标签：iphone, facebook

我正在尝试创建一个链接以在 iPhone 上打开 Facebook 应用程序并转到粉丝专页

到目前为止我所做的是使用 facebook graph 获取 fanpage id

然后创建了链接

fb://page/(fbid) 打开应用程序但发送到页面 fb://place/(fbid) 打开应用程序但发送到页面

我在 iPhone 4 上使用最新的 facebook 应用程序 5.0.1 运行 iOS 6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T12:31:55.270

fb://profile/344100992276033 似乎正在工作（使用页面 ID）。

# eclipse - slf4j 与 GWT 冲突

> ID：12726749
> 
> 赞同：0
> 
> 时间：2012-10-04T11:56:59.780
> 
> 标签：eclipse, gwt, hive

我正在 Eclipse 中开发一个 GWT 项目，该项目从网页调用 Apache Hive。架构是这样的。

在 GWT 项目中。使用在网页上放置一个蜂巢查询。网页使用 GWT RPC 将此查询发送到服务器类。服务器调用另一个 Eclipse 项目中的另一个 java 类。这个项目有 hive jdbc 驱动程序，它调用在 VM (CDH3) 上运行的 hive。

我编写了一个调用 GWT 服务器类并发送 Hive 查询的单元测试，它执行得很好，但是当我运行他的项目并尝试从网页发送查询时。它会引发运行时错误。它似乎与包含在具有 Hive JDBC 驱动程序的第二个 eclipse 项目中的 slf4j 类有一些冲突。我猜，在运行时调用的 GWT 服务器类与其他项目中包含的 slf4j 类之间存在一些冲突。顺便说一句，第二个项目包含在第一个项目的构建路径中，但不是其他方式。

这是错误：

```
[WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract java.lang.String com.unitest.client.GreetingService.greetServer(java.lang.String) throws java.lang.IllegalArgumentException' threw an unexpected exception: java.lang.NoClassDefFoundError: Could not initialize class org.apache.thrift.transport.TSocket
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.apache.thrift.transport.TSocket
    at org.apache.hadoop.hive.jdbc.HiveConnection.<init>(HiveConnection.java:92)
    at org.apache.hadoop.hive.jdbc.HiveDriver.connect(HiveDriver.java:104)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:20:45.727

您的服务器端依赖项必须存在于`WEB-INF/lib`GWT 项目中（就像任何其他 WAR 一样）。

# delphi - 如何将多个文件扩展名传递给 TDirectory.GetFiles？

> ID：12726756
> 
> 赞同：9
> 
> 时间：2012-10-04T11:57:25.863
> 
> 标签：delphi, delphi-xe

`TDirectory.GetFiles`有一个名为 的参数[`SearchPattern`](http://docwiki.embarcadero.com/Libraries/en/System.IOUtils.TDirectory.GetFiles)。Embarcadero 的文件说

> 匹配文件名时使用的掩码（例如，“*.exe”匹配所有可执行文件）。

但是，我想传递多种文件类型。我从`FilterComboBox.Mask`. 所以，它是一个看起来像`'*.txt;*.rtf;*.doc'`.

我试图将该字符串直接传递给`GetFiles`它，但它不起作用。我是否必须解析它，将其分成几块并将每一块都喂给`GetFiles`?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T12:08:45.380

`GetFiles`调用背后的 RTL 代码[`Masks.MatchesMask`](http://docwiki.embarcadero.com/Libraries/en/System.Masks.MatchesMask)来测试是否与您的搜索模式匹配。此函数仅支持对单个掩码进行掩码。

另一种方法是使用`GetFiles`允许 a 的重载`TFilterPredicate`。您提供一个谓词来测试名称是否与您的模式匹配。

```
uses
  StrUtils, Types, Masks, IOUtils;

function MyGetFiles(const Path, Masks: string): TStringDynArray;
var
  MaskArray: TStringDynArray;
  Predicate: TDirectory.TFilterPredicate;
begin
  MaskArray := SplitString(Masks, ';');
  Predicate :=
    function(const Path: string; const SearchRec: TSearchRec): Boolean
    var
      Mask: string;
    begin
      for Mask in MaskArray do
        if MatchesMask(SearchRec.Name, Mask) then
          exit(True);
      exit(False);
    end;
  Result := TDirectory.GetFiles(Path, Predicate);
end; 
```

请注意，每次调用时都会`MatchesMask`创建和销毁分配的堆。[`TMask`](http://docwiki.embarcadero.com/Libraries/en/System.Masks.TMask)我可以想象这是长时间搜索的性能瓶颈。在这种情况下，您可以`TMask`从`MaskArray`. 并使用谓词中的那些来测试。我不知道这是否是一个有效的问题，只是我在阅读代码时发生的事情。

# iphone - 在iOS中设置相机曝光点的正确方法

> ID：12726757
> 
> 赞同：0
> 
> 时间：2012-10-04T11:57:27.377
> 
> 标签：iphone, ios5, camera, iphone-4

我正在尝试在 iOS 5（iPhone 4s 测试设备）中设置相机曝光点：

```
if ([_videoDevice lockForConfiguration:nil])
{
    if ([_videoDevice isExposurePointOfInterestSupported])
    {
        [_videoDevice setExposurePointOfInterest:CGPointMake(0.2,0.2)];

        if ([_videoDevice isExposureModeSupported:AVCaptureExposureModeAutoExpose])
        {
            [_videoDevice setExposureMode:AVCaptureExposureModeAutoExpose];
            NSLog(@"Adjusting exposure: %d", [_videoDevice isAdjustingExposure]);
        }
    }
    [_videoDevice unlockForConfiguration];
} 
```

根据文档“AVCaptureExposureModeAutoExpose”应该设置曝光然后锁定。我的问题是“isAdjustingExposure”总是返回false。我什至尝试设置一些睡眠，但它仍然处于错误状态。

如何正确设置曝光点？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:00:08.227

诀窍是设置“AVCaptureExposureModeContinuousAutoExposure”并使用键/值观察。

# javascript - 将纯 JavaScript 转换为 jQuery

> ID：12726758
> 
> 赞同：1
> 
> 时间：2012-10-04T11:57:29.640
> 
> 标签：javascript, jquery

非常简单的问题，只是很难真正让它发挥作用。我有一段代码是 javascript，我试图用 jquery 编写，但无法完全理解。

```
effects_of_yoga_2010_INFO.style.setProperty('-webkit-transform',   
'rotateZ('+effects_of_yoga_2010_DEG+'deg)'); 
```

我试过了

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transform", 
"rotateZ('+effects_of_yoga_2010_DEG+'deg)"); 
```

但是 jquery 片段不起作用，我非常感谢我能得到的任何帮助，我相信这对某人来说会很容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T11:59:28.007

它应该是：

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transform",
"rotateZ("+effects_of_yoga_2010_DEG+"deg)"); 
```

您将单引号与双引号混合在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:00:07.610

假设`effects_of_yoga_2010_DEG`是具有值的元素的另一个 id，请尝试：

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transform", 
"rotateZ('" + $("#effects_of_yoga_2010_DEG").val() +"'deg)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:00:28.763

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transform", "rotateZ('+effects_of_yoga_2010_DEG+'deg)"); 
```

那看起来不对。除非这是一个复制粘贴错误，否则您应该像 JavaScript 版本那样将变量值从其余字符串中拆分出来。

```
$("#effects_of_yoga_2010_INFO").css("-webkit-transform", "rotateZ(" + effects_of_yoga_2010_DEG + "deg)"); 
```

当然，这是基于不知道是什么`effects_of_yoga_2010_DEG`。我假设它只包含您正在寻找的值，并且可以像 JavaScript 版本一样使用。

# ruby-on-rails - 在 Rails 中预编译/预加载缓存的片段

> ID：12726764
> 
> 赞同：4
> 
> 时间：2012-10-04T11:57:47.923
> 
> 标签：ruby-on-rails, caching

使用 Rails 3.1.1 和 Herkou

我的应用中有 1.000 种产品。它们都有一个非常慢的控制器，可以通过片段缓存有效地解决。尽管数据不会经常更改，但它仍然需要定期过期（我通过扫描来完成），在我的情况下是每周一次。

现在，在扫描缓存视图之后，我不希望我的用户通过尝试一个接一个地访问产品来创建新片段（第一次加载大约需要 6-8 秒，缓存加载需要 2-3 秒）。我假设我可以使用某种脚本来执行此操作，该脚本将一个一个地加载每个产品页面，从而使服务器创建这些片段。

我可以想象这可以通过三种方式处理：

1.  在我的本地机器上运行一个脚本，该脚本将尝试使用某种 get 命令访问每个 url - 缺点：不是很漂亮，并且会以我不喜欢的方式影响访问者统计信息。

2.  在清扫器之后在服务器上运行相同类型的脚本，这将加载每个产品。在这种情况下，我该怎么做？

3.  使用智能 Rails 命令自动执行此操作。有这么优雅的命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T19:28:26.623

创建一个作为 rake 任务运行的脚本，或者更好的是一个 worker，它运行并卷曲页面。当您可以调用 curl 时，无需包含 gem

```
`curl -A "CacheRefresher" #{ENV['HOSTNAME']}/api/v1/#{klass.name.underscore.pluralize}/#{id} >/dev/null 2>&1` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:52:32.303

我制作了这个脚本，它可以工作。“product.slug”是因为我安装了friendly_id。它将生成名称为 www.mydomain.com/productabc-123/ 的 url 变量，Nokogiri 将读取这些变量（此解决方案需要 Nokogiri gem）。

请注意，我在此解决方案中从片段缓存切换到动作缓存（与我使用片段缓存的问题相反）。重要的区别是当我检查缓存时`if Rails.cache.exist?('views/www.mydomain.com/' + product.slug)`。对于 fragment_caching，它应该是那里的片段名称。

```
require 'nokogiri'
require 'open-uri'

Product.all.each do |product|
  url = 'http://www.mydomain.com/' + product.slug  
  begin      
    if Rails.cache.exist?('views/www.mydomain.com/' + product.slug)     
      puts url + " is already in cache"
    else
      doc = Nokogiri::HTML(open(url))
      puts "Reads " + url
# Verifies if the caching worked. Only for trouble shooting
      if Rails.cache.exist?('views/www.mydomain.com/' + product.slug)     
        puts "--->" + url + " is NOW in the cache"
      else
        puts "--->" + url + " is still not in the cache!"
      end
      sleep 1
    end
  rescue
    puts 'Normal rescue of ' + url
  rescue Timeout::Error
    puts 'Timeout rescue of ' + url
    puts 'Sleep for 5 sec'
    sleep 5
    retry
  end
end 
```

# c# - 文本框上的火灾事件失去焦点

> ID：12726765
> 
> 赞同：10
> 
> 时间：2012-10-04T11:57:52.387
> 
> 标签：c#, windows-phone-7, events, textbox

我试图在屏幕上的文本框“不聚焦”时立即调用一个方法，如果这有任何意义吗？用户输入用户名，一旦该文本框失去焦点，我想触发一个事件来检查该用户名是否确实可用。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T12:05:25.673

C# 中有一个`Control.Leave`，我认为它非常适合您的目的。

你可以去visual studio中文本框的事件，找到`Leave`事件。

生成的代码如下：

```
private void txtbox_Leave(object sender, EventArgs e)
{
            //Check for available operation Code
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T12:16:26.207

请`LostFocus`在`textbox`. 希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-19T09:59:23.800

选择您的对象并选择属性面板并单击事件。展开直到离开并双击上方。这将为您提供：

```
private void  object_Leave( object  sender,  EventArgs  e)
{
  ////put your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-18T22:24:08.443

在 WPF 中试试这个： **TextBox.LostFocus**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-24T18:14:55.710

这将起作用：

转到文本框的“属性”。您将在第一行选项卡中看到一个黄色闪电。在那里，您将找到所有可能触发的事件。搜索“离开”条目，双击它。在那里你可以放任何你想要的东西。

# c# - Exchange Web Service, move an item from Inbox it gets removed from Inbox but doesn't show up in the destination Folder

> ID：12726774
> 
> 赞同：6
> 
> 时间：2012-10-04T11:58:20.530
> 
> 标签：c#, .net, exchange-server, exchangewebservices

I am working on a client that access an Exchange Web Service via a web reference. (not the Managed API). This is the first time I'm worked with EWS so I hope its just a simple mistake that I overlooked.

I have a method called MoveItem that is supposed to take email message and move it from the Inbox to destinationFolder. When I run this code, the item does disappear from the Inbox however it never shows up in the destination folder. I've spent a couple of days looking at examples online and I've also not been able to find anyone else that has had a similar issue. Can anyone tell me what I am doing wrong? Thanks in advance

Scott

```
static void MoveItem(ExchangeServiceBinding esb, BaseFolderType destinationFolder, MessageType msg)
{
ItemIdType[] items = new ItemIdType[1] { (ItemIdType)msg.ItemId };
BaseFolderIdType destFolder = destinationFolder.FolderId;
MoveItemType request = new MoveItemType();
request.ItemIds = items;
request.ToFolderId = new TargetFolderIdType();
request.ToFolderId.Item = destFolder;

try
{
     MoveItemResponseType response = esb.MoveItem(request);
     ArrayOfResponseMessagesType aormt = response.ResponseMessages;
     ResponseMessageType[] rmta = aormt.Items;

    foreach (ResponseMessageType rmt in rmta)
    {
        if (rmt.ResponseClass == ResponseClassType.Error)
        {
              throw new Exception("Item move failed.");
        }
    }
}
catch (Exception e)
{
Console.WriteLine(e.Message);
}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T19:16:39.810

Definitely not an expert here, but this is the following code I used to grab an item and move it into a folder:

```
 Folder rootfolder = Folder.Bind(service, WellKnownFolderName.MsgFolderRoot);
        rootfolder.Load();

        foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
        {
            // Finds the emails in a certain folder, in this case the Junk Email
            FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.JunkEmail, new ItemView(10));

            // Enter your destination folder name below this:
            if (folder.DisplayName == "Example")
            {
                // Stores the Folder ID in a variable
                var fid = folder.Id;
                Console.WriteLine(fid);
                foreach (Item item in findResults.Items)
                {
                    // Load the email, move it to the specified folder
                    item.Load();
                    item.Move(fid);
                }

            }
        } 
```

One thing about the EWS is that when moving to a folder, the ID of the folder is key. In this example, I first find the folders in the inbox, then access the messages. Therefore, any code regarding the individual message would go after the folders have been found.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-16T10:39:00.753

I have same problem. The moved message doesn't exists in folder (outlook.com) but can be retrieved via APIs with new assigned id.

Outlook.com can find it in search with an error while loading message body: `Error: Your request can't be completed right now. Please try again later.`

# php - 用 < 替换所有标签 标签？

> ID：12726775
> 
> 赞同：0
> 
> 时间：2012-10-04T11:58:23.867
> 
> 标签：php, syntax-highlighting

我有一个脚本，它使用[http://alexgorbatchev.com/SyntaxHighlighter/](http://alexgorbatchev.com/SyntaxHighlighter/)突出显示 XML 代码示例。Highlighter 中有一个错误，导致所有 XML 标记变为小写。当标签以格式写入时，它不会发生`&lt;TAG> instead of <TAG>.`

我需要一种方法来替换`<pre> and </pre>`这种方式之间的所有标签。

有任何想法吗？

# java - 用于抛出客户端特定异常的 JAX RS CXF 拦截器

> ID：12726776
> 
> 赞同：0
> 
> 时间：2012-10-04T11:58:28.327
> 
> 标签：java, exception, cxf, jax-rs, interceptor

我有一个服务器将一组类公开为 RESTful 服务。我知道我们可以使用[ExceptionMapper](https://stackoverflow.com/questions/11691815/jax-rs-cxf-exception-wrapping)将异常传递给客户端。客户端和服务器之间共享的检查异常很少。但是，在我的一些服务中，我几乎没有在客户端 JVM 中不可用的检查异常。

我了解更改端点以确保正确处理检查的异常可以解决问题。

但是，我想在拦截器层这样做有两个原因：

*   这将是一个我可以处理导致检查异常的所有调用的地方。
*   由于当前的发布日期，这将是一项重大的重构工作。

查看[CXF 文档](http://cxf.apache.org/docs/interceptors.html)，我知道我必须扩展`AbstractPhaseInterceptor`和覆盖`handleMessage()`

```
public class MyOutExceptionInterceptor extends AbstractPhaseInterceptor<Message> {

    public AttachmentInInterceptor() {
        //Which phase to call here ??
        super(Phase.POST_INVOKE);
    }

    public void handleMessage(Message message) {

        //Check from message that it contains an exception of MyCheckedException.class
        //Create an exception that client can understand

    }
} 
```

我该怎么做呢 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:57:40.067

我知道我迟到了，但我也遇到了这个问题并想出了这个解决方案。因此，以供将来参考：

改写handleFault，在里面：

```
Exception fault = message.getContent(Exception.class);
Exception exception = fault.getCause();
YourOwnFault newFault = new YourOwnFault("bla bla bla");
message.setContent(Exception.class, newFault); 
```

换句话说：提取故障，获取异常作为原因，创建新故障并插入 int。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:18:16.633

尝试类似：

```
public void handleMessage(Message message) {
 // Map exception
    Exception exception = message.getContent(Exception.class);
    Exception mappedException = mapper.map(exception);

    Fault fault = exception instanceof Fault ? (Fault) exception : null;
    if (fault == null)
    {
        fault = new Fault(exception);
        message.setContent(Exception.class, fault);
     }
    fillInFaultDetails(fault, exception);
} 
```

这实际上是我们代码的一个片段（为简洁起见，我省略了映射/填充细节；关键是替换消息内容。）。至于阶段 - 我们在 POST_LOGICAL 运行它；POST_INVOKE 也可以工作。

顺便说一句-不确定您的用例是什么，但我不喜欢使用故障来传达业务异常（在我看来，故障表示一般消息处理错误而不是业务逻辑异常。

# java - Netbeans 输出是否存储在文件中？

> ID：12726791
> 
> 赞同：3
> 
> 时间：2012-10-04T11:59:14.710
> 
> 标签：java, netbeans

我刚刚在 NetBeans 中运行了一次大规模模拟，然后计算机在我将输出窗口的输出复制到文件之前就崩溃了。

有人知道此输出是否已存储在任何临时文件中，还是永远丢失？

它可以存储在哪里？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:05:26.127

你是说 System.out 吗？

这样做：

```
PrintStream out = new PrintStream(new FileOutputStream("output.txt"));
System.setOut(out); 
```

# python - django模板循环

> ID：12726799
> 
> 赞同：3
> 
> 时间：2012-10-04T11:59:41.970
> 
> 标签：python, django

我可以同时遍历 django 模板中的两个数组/列表吗？

像这样的东西：

```
# views.py

a = [{'a':'apple','b':'banana','c':'clementine'},
     {'a':'aunt','b':'brother','c':'cousin'},
     {'a':'ant','b':'bat','c':'cat'}]
b = [{'d':'dave','f':'fred'},
     {'d':'dason','f':'ford'},
     {'d':'dance','f':'flamenco']

# something.html

{% for x, y in a and b %}
    {{ x.a }},{{ x.c }}<br>
    {{ y.f }}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T12:03:09.810

您可以[`zip`](http://docs.python.org/library/functions.html#zip)在视图中查看两个列表，然后遍历模板中的结果列表。

```
# views.py
ab = zip(a,b)

# template
{% for x,y in ab %}
    {{ x.a }},{{ x.c }}<br>
    {{ y.f }}
{% endfor %} 
```

# java - avahi 无法找到由 JmDNS 创建的服务

> ID：12726801
> 
> 赞同：1
> 
> 时间：2012-10-04T11:59:45.817
> 
> 标签：java, linux, ubuntu-12.04, jmdns, avahi

我正在从其他运行 windows-xp 的机器创建 JmDNS 服务

```
JmDNS dns = JmDNS.create("localhost"); 
dns.regesterService("_sreviceTest._tcp.local.", "Test-Service", 8765, "Description"); 
```

如果我运行其他将解析服务的客户端，则由`JmDNS`它创建，无论机器如何。但如果我尝试通过`avahi-browse`. 它找不到它。并给出以下输出。

```
avahi-browse -rv _sreviceTest._tcp
Server version: avahi 0.6.30; Host name: ubuntu.local
E Ifce Prot Name                                          Type                 Domain
+   eth0 IPv4 Test-Service                                _sreviceTest._tcp local
Failed to resolve service 'Test-Service' of type '_serviceTest._tcp' in domain 'local': Timeout reached 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:04:47.070

这是`JmDNS version 3.4.1`图书馆的一个错误。详见[BUG](http://sourceforge.net/tracker/?func=detail&aid=3435220&group_id=93852&atid=605791)

```
this.service_type = "_ros-master._tcp.local.";
this.service_name = "RosMaster";
this.service_port = 8888;
String service_key = "description"; // Max 9 chars
String service_text = "Hypothetical ros master";
HashMap<String, byte[]> properties = new HashMap<String, byte[]>();
properties.put(service_key, text.getBytes());
// service_info = ServiceInfo.create(service_type, service_name, service_port); // case 1, no text
// service_info = ServiceInfo.create(service_type, service_name, service_port, 0, 0, true, service_text); // case 2, textual description
service_info = ServiceInfo.create(service_type, service_name, service_port, 0, 0, true, properties); // case 3, properties assigned textual description
jmdns.registerService(service_info);

Case 1 and case 2 create services detectable by avahi, but they fail to resolve.
Case 3 works fine. 
```

# c++ - 使用指针而不是引用时访问指向结构的指针数组时出现段错误

> ID：12726803
> 
> 赞同：0
> 
> 时间：2012-10-04T11:59:46.877
> 
> 标签：c++, c, arrays, pointers

下面的函数接受一个指向结构指针数组的指针，`API_AddParType`并列出每个数组元素的一些字段。使用以下命令访问每个元素时，一切都按预期工作`(*ppParams)[ii]`：

```
void ParamsListWrapper::ListParams2(API_AddParType** ppParams)
{
    unsigned long ii, nParams;
    nParams = BMGetHandleSize( (GSHandle)ppParams ) / sizeof(API_AddParType);

    // list params
    for ( ii = 0; ii < nParams; ii++ ) {
        WriteReport( "Param name = \"%s\", double = %f", (*ppParams)[ii].name, (*ppParams)[ii].value.real );
    }
} 
```

好吧，让我们使用一些参考变量，例如`API_AddParType& param`：

```
void ParamsListWrapper::ListParams1(API_AddParType** ppParams)
{
    unsigned long ii, nParams;
    nParams = BMGetHandleSize( (GSHandle)ppParams ) / sizeof(API_AddParType);

    // list params
    for ( ii = 0; ii < nParams; ii++ ) {
        API_AddParType& param = (*ppParams)[ii];
        WriteReport( "Param name = \"%s\", double = %f", param.name, param.value.real );
    }
} 
```

现在尝试使用指向相同的代码`API_AddParType`：

```
void ParamsListWrapper::ListParams3(API_AddParType** ppParams)
{
    unsigned long ii, nParams;
    nParams = BMGetHandleSize( (GSHandle)ppParams ) / sizeof(API_AddParType);

    // list params
    for ( ii = 0; ii < nParams; ii++ ) {
        API_AddParType* pParam = ppParams[ii];
        if (pParam != NULL) {
            WriteReport( "Param name = \"%s\", double = %f", pParam->name, pParam->value.real );
        } else {
            WriteReport( "Param is NULL" );
        }
    }
} 
```

出现分段错误。怎么会这样？为什么通过指针访问数据时它会失败，而引用工作没有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:24:52.003

尝试像这样`API_AddParType* pParam = ppParams[ii];`更改`API_AddParType* pParam = *ppParams;`和访问。`pParam->name``pParam[ii].name`

通过访问`(*ppParams)[ii]`您正在操作单个`API_AddParType`，但访问`pParam[ii]`您正在操作一个 . 数组`API_AddParType`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:32:26.673

换行试试

```
API_AddParType* pParam = ppParams[ii]; 
```

到

```
API_AddParType* pParam = (*ppParams) + ii; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:05:09.640

在最后一种情况下，您将`ppParams`其视为指针数组，而不是指向数组的指针。

数组的`ii`:th 元素`(*ppParams)[ii]`在指针的情况下以及在其他情况下。
您正在寻找它的地址，即

```
API_AddParType* pParam = &(*ppParams)[ii]; 
```

或者

```
API_AddParType* pParam = (*ppParams) + ii; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T14:05:59.657

> `API_AddParType`下面的函数接受一个指向结构指针数组的指针

```
void ParamsListWrapper::ListParams2(API_AddParType** ppParams) 
```

该函数的参数是一个指向指针的指针`API_AddParType`，它可以是指向指针数组的第一个元素的指针`API_AddParType`，

```
ppParams
   |
   v
pParam0|pParam1|pParam2|...
   |       |       |    ...
   v       v       v
  xyz     abc     mno   ... 
```

或者它可以是指向（指向数组的第一个元素的指针）的指针`API_AddParType`，

```
ppParams
   |
   v
 pParams
   |
   v
param0|param1|param2|... 
```

我将匿名内存位置命名为`ppParams`指向`pParams`（指向参数的指针），函数接收指向`pParams`而不是`pParams`自身的指针的原因可能是指针`pParams`本身可能被函数更改。

现在，在第一种情况下，`(*ppParams)[ii] = pParam0[ii] = the object ii units after the start of xyz`, 所以你永远不会看`pParam1`, `pParam2`etc. 指向什么（除非这些指针被设置为指向第一个元素`pParam1`指向的数组内部）。

在第二种情况下`(*ppParams)[ii] = pParams[ii] = the object ii units after the start of param0`， 和你看所有的排列整齐`paramN`。看起来挺好的。

和

```
API_AddParType* pParam = ppParams[ii] 
```

在第一种情况下，您会按顺序查看`xyz`, `abc`, , ... ，这看起来不错。`mno`

但是在第二种情况下，`pParam`将成为`ii`之后的指针单元，但这不是大小大于 1`pParams`的指针数组的第一个元素，因此访问对于 来说是未定义的行为，并且由于不太可能发生有效指向后面的指针，访问相应的。可能会导致段错误。`API_AddParType``ppParams[ii]``ii > 0``API_AddParType``pParams``pParam->name``pParam->value.real`

您遇到分段错误的事实`ppParams[ii]`，但没有`(*ppParams)[ii]`强烈暗示这种情况实际上是第二个，而不是第一个。

# rally - 有没有办法找出我的服务器上安装的 SDK 版本？

> ID：12726807
> 
> 赞同：1
> 
> 时间：2012-10-04T11:59:58.780
> 
> 标签：rally

如何找出我的 Rally 服务器上正在使用哪个 SDK？我正在尝试使用 2.0p4，但我收到一个脚本错误，提示`Rally`对象未定义。

我检查了之前关于 SO 的帖子，发现 SDK 1.0 中的 App 语法不同，其中`Rally`未提及对象。

会不会是我的 Rally 服务器不支持 SDK 2.0p4 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:45:40.410

目前 rally1.rallydev.com 正在运行最新的预览版 2.0p4。
所有 SDK 版本都位于 [server]/apps/[version]。

对于 SDK 1，最新版本在这里：
[server]/apps/1.32/sdk.js（或 sdk.js?debug=true）

SDK 2 预览版的最新版本在这里：
[server]/apps/2.0p4/sdk.js（或 sdk-debug.js）

如果您正在运行 Rally 的本地版本，则必须进行试验并查看您拥有的最新版本。

# symfony - Symfony2 中的服务

> ID：12726817
> 
> 赞同：1
> 
> 时间：2012-10-04T12:00:28.330
> 
> 标签：symfony, symfony-2.1

我想创建一个容器服务，所以我使用带有构造函数的类：

服务.xml：

```
<container xmlns="http://symfony.com/schema/dic/services"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

<parameters>
    <parameter key="myapp_mybundle.locationmanager.class">My_app\MyBundle\Manager\LocationManager</parameter>
    <parameter key="myapp_mybundle.rootLocation">rootLocation</parameter>
</parameters>

<services>
    <service id="myapp_mybundle.locationmanager" class="%myapp_mybundle.locationmanager.class%">
    <argument>%myapp_mybundle.rootLocation%</argument>

    </service>
</services> 
```

MyappMyBundleExtension.php

```
$container->set('myapp_mybundle.locationmanager', $manager); 
```

类位置管理器：

```
class LocationManager
{
     /**
     * @var Location
     */
protected $rootLocation;

public function __construct(Location $rootLocation)
{
    $this->rootLocation = $rootLocation;
}
   ..... 
```

以及控制器中的一些操作：

```
 $locationManager =  $this->container->get("myapp_mybundle.locationmanager"); 
```

我收到此错误：

```
 You have requested a non-existent service "myapp_mybundle.locationmanager". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:39:20.487

你真的加载了 services.xml 文件吗？

像这样：

```
use Symfony\Component\DependencyInjection\Loader\XmlFileLoader;
use Symfony\Component\Config\FileLocator;

public function load(array $configs, ContainerBuilder $container)
{
    $loader = new XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
    $loader->load('services.xml');
} 
```

如果你不这样做，你的服务就不会注入到容器中，你将无法加载它们。

可以在[此处](http://symfony.com/doc/current/cookbook/bundles/extension.html)和[此处](http://symfony.com/doc/current/book/service_container.html)找到有关此的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:41:42.787

您的服务没有大写的“b”...应该是

`$locationManager = $this->container->get("myapp_mybundle.locationmanager");`

# codeigniter - Codeigniter 5 连接过于规范化？

> ID：12726818
> 
> 赞同：1
> 
> 时间：2012-10-04T12:00:40.843
> 
> 标签：codeigniter, join, many-to-many

我正在构建一个相当大的 CodeIgniter 应用程序，并从尽可能好地规范化数据库开始。

让我开始，该网站没有响应缓慢或出现任何问题。只是想知道您对许多联接有何看法？

```
$this -> db -> join('A', 'B.user_id = A.id', 'left');
$this -> db -> join('C', 'A.id = C.user_id', 'left');
$this -> db -> join('D', 'B.project_id = D.id', 'left');
$this -> db -> join('E', 'E.client_id = C.id', 'left'); 
```

如您所见，这将仅在连接查询中调用 5 个表。非常需要获取应用程序数据的每个细节，并且 3 个表只是链接表。

我可以在这样的连接上吃些诚实的洋葱吗？

注意：我需要区分表，但我正在等待，直到其他所有内容都经过代码优化

问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:16:39.270

我目前正在重新开发 codeigniter 应用程序/站点。为了提供更高的灵活性并限制提取冗余数据，我将许多单个大表拆分为多个小表。这导致我的一些管理查询最多有 8 个连接（我认为管理查询不是问题。）

在前端，许多查询已从无连接更改为最多 5 个，这实际上提高了站点的速度，因为与旧的大表布局相比，我提取的数据仍然更少。

简而言之 - 我认为多个连接用于减少被提取的数据量并没有任何问题，并且在任何大型应用程序中都是可以预期的。

但这就像您得到的任何其他答案一样是一种意见，并且都取决于您的表结构和您使用的索引，而不是连接数。

# jquery - IE中表格行之间的垂直空间太大

> ID：12726822
> 
> 赞同：-2
> 
> 时间：2012-10-04T12:00:53.507
> 
> 标签：jquery, html-table

我正在用 HTML 和 jQuery 制作订单。*客户在按下“添加到购物清单”*按钮之前必须指定一些参数。当按下按钮时，我有一个函数`AddToBasket`可以提取客户选择的参数，然后在购物清单中添加一行。

这在 Chrome、Opera 和 Firefox 中运行良好，但出于某种原因，IE 在每一行周围添加了很多垂直空间。每行包含一个描述性文本，通常包含两个换行符/换行符。如前所述，在大多数浏览器中，这些显示在彼此下方，但在 IE 中，每一行周围的垂直空间非常大，所以我无法同时完全看到列表中的两行。

我的购物清单是一个 220 像素高、450 像素宽的 HTML 表格。这是表格的代码（我已将其包装在 div 中）：

```
<div style="height:220px;width:450px;font:16px Courier New, Garamond, Serif;overflow:auto;border:2px solid #7AB800">
  <table width="100%" height=30px cellpadding="0" cellspacing="0" border="0" id="orderlist">
    <thead>
      <tr style="color:#FFFFFF" bgcolor="#7AB800">
        <th align="left" width="80">
          DELETE
        </th>
        <th align="left" width="80">
          NUMBER
        </th>
        <th align="left">
          DESCRIPTION
        </th>
        <th class="colMeterType">
           Meter type
        </th>
        <th class="colModuleType">
           Module type
        </th>
        <th class="colOrderOrQuote"></th>
      </tr>
    </thead>
    <tbody id="shoppingListBody" style="height:200px;">
    </tbody>
  </table>
</div> 
```

只有前三列是可见的，colMeterType、colModuleType 和 colOrderOrQuote 在 css 样式中设置为不可见。我在这里存储用户不需要看到的信息。当用户按下添加到购物篮按钮时，我调用一个函数，首先提取用户选择的变量，然后将其附加到购物清单：

```
 $('#orderlist').append('<tr>'+
    '<td align="center" class="rm"><input type="checkbox"/></td>'+
    '<td><input class="numberOfItems" value="1" width="75px" size="3" pattern="[0-9]+" onkeyup="verifyQuantity()" type="text"/></td>'+
    '<td>'+bodyContent +"</td>"+
    '<td class="colMeterType">'+txtMeterType +"</td>"+
    '<td class="colModuleType">'+txtModuleType+ "</td>"+
    '<td class="colOrderOrQuote">'+ txtOrderOrQuote + "</td></tr>"); 
```

描述性文本存储在变量 中`bodyContent`。

CSS 根本不包含太多内容，但它是：

```
<style type="text/css">
   .HMalternatives{margin-left:20px;}
   .COMalternatives{margin-left:20px;}
   .colMeterType{display:none;}
   .colModuleType{display:none;}
   .colBestEllerForesp{display:none;}
   .warning{background-color:red;}
   .clear{ cleear:both; line-height: 0; overflow:hidden;}
   hr { border:0; border-top: 2px solid #7AB800 !important; height:0; width:100%; }
</style> 
```

我已经在 Stack Overflow 和其他地方搜索过这个问题的解决方案。我找不到任何有我确切问题的人，但我尝试了不同`tr { padding-bottom:0px}`的东西，比如设置样式，但我发现的东西都没有解决我的问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T12:15:20.023

如果不亲自测试确切的 HTML/CSS，很难说。

但是，我建议检查表格单元格中任何和所有元素的填充和边距设置 - 输入元素等。单元格内文本的行高也会影响行高，以及在高度属性顶部有填充。如果您有最终 HTML 和 CSS 的示例，则可能更容易测试。

# python - 缓存查询集

> ID：12726823
> 
> 赞同：1
> 
> 时间：2012-10-04T12:00:54.900
> 
> 标签：python, django

我正在开发一个需要我过滤大量记录的应用程序。我一直在阅读有关缓存`QuerySets`和相关内容的信息，并找到了一些很好的材料。

```
qs = MyModel.objects.filter(Q(<initial_filter_to_narrow_down_size>)) 
```

在此之后，我希望将此 qs 放入缓存中以备后用。我想在不访问数据库的情况下应用所有其他过滤器。就像是

```
cache.set('qs', qs) 
```

但是当我会做什么时会发生什么`qs = qs.filter(q_object)`？缓存会被修改吗？我不想要那个。我想`qs`保持不变，直到我更新它。在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:12:37.047

.filter() 在应用过滤器之前克隆查询集。缓存不会受到影响。

顺便说一句，您可能想查看[JohnnyCache](http://packages.python.org/johnny-cache/) ......一个关于查询集缓存的很棒的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:08:49.567

我从您的问题中了解到，您只需要从缓存中获取查询集，如下所示。

```
your_cached_qs = cache.get('qs') 
```

然后，应用您想要的任何过滤器。

```
your_new_qs = your_cached_qs.filter(further_filter) 
```

这不会影响缓存中的查询集。因此，您的缓存将保持不变，直到您再次自己更新它并达到您想要的结果。

# html - 这部分字体标签有什么作用？(CSS)

> ID：12726824
> 
> 赞同：2
> 
> 时间：2012-10-04T12:00:54.870
> 
> 标签：html, css, fonts

```
font: 400 48px/1.2 'Oswald', sans-serif; 
```

谁能告诉我 48px/1.2 是什么意思？特别是**1.2**。

这个值的作用和含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:02:54.273

这设置了两个属性，相当于：

```
font-size: 48px;
line-height: 1.2; 
```

1.2 设置行高值。

**以下是完整的解释：**

![字体](../Images/36ac1527bba191deb03b2a23e9d61b67.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T12:56:59.930

**字体**的完整解释如下图所示：

![字体](../Images/36ac1527bba191deb03b2a23e9d61b67.png)

# android - 将普通的 Android 活动应用程序转换为选项卡式活动应用程序

> ID：12726826
> 
> 赞同：0
> 
> 时间：2012-10-04T12:01:06.563
> 
> 标签：android, android-layout, dictionary

我开发了一本字典，当应用程序启动时我将在其中启动“MainActivity”。因此，用户将在 Searchview 中添加提示，单词列表将加载到此活动中。当我们点击一​​个单词时，会启动一个“DefinitionActivity”，我们可以在其中定义所点击单词的定义和详细信息。那么如何将同一个应用程序转换为主列表和详细信息页面将以相同布局加载的应用程序，以便单词列表（MainActivity）将出现在左侧，“DefinitionActivity”将在页面右侧加载. 我需要使用现有代码和布局进行此转换的最佳方法。所以手机上加载的同一个app会出现我之前开发的，在平板上打开的：单词列表和详情页在同一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:33:51.857

您将需要使用 API 级别 11 中引入的 Fragments API。要开始使用，请查看 Android 博客上的此示例。（[http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html)）

# asp.net - html中的视频标签

> ID：12726831
> 
> 赞同：4
> 
> 时间：2012-10-04T12:01:28.863
> 
> 标签：asp.net, html, video, html5-video

我正在尝试用不同的浏览器播放视频

```
<video Controls>
      <source src="Videos/2.ogv" type="video/ogv">
      <source src="Videos/2.mp4" type="video/mp4">
      </video> 
```

但`google chrome`播放视频但`firefox`不播放。它显示一个错误，`perticuler MIME type is missing`在 IIS 中注册后`ogv extension`仍然显示错误。有没有所有浏览器都支持的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:04:36.460

尝试更新 firefox 也许它不支持 HTML 5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:05:40.977

`video/ogg`内容类型不 应该是`video/ogv`-

```
<source src="Videos/2.ogv" type="video/ogg"> 
```

将这些添加`MIME types`到您的 .htaccess 文件中

声音的

```
AddType audio/aac .aac
AddType audio/mp4 .mp4 .m4a
AddType audio/mpeg .mp1 .mp2 .mp3 .mpg .mpeg
AddType audio/ogg .oga .ogg
AddType audio/wav .wav
AddType audio/webm .webm 
```

视频

```
AddType video/mp4 .mp4 .m4v
AddType video/ogg .ogv
AddType video/webm .webm 
```

[**HTML5 音频和视频 MIME 类型**](http://voice.firefallpro.com/2012/03/html5-audio-video-mime-types.html)

# javascript - 根据 AJAX 请求使用动画更新表格行

> ID：12726847
> 
> 赞同：1
> 
> 时间：2012-10-04T12:02:20.277
> 
> 标签：javascript, jquery, ajax

我正在创建一个“实时”排行榜。每 X 秒，向服务器发送一个 AJAX 请求以加载最新的排行榜数据。

如果数据发生变化，排行榜将根据 AJAX 请求立即更新。

**但是 - 如果有变化，而不是立即显示新数据，我想将表格行动画到它的新位置，而不是立即重新加载它。实现这样的目标的最佳方法是什么？**

我现在正在更新排行榜，如下所示：

```
$(document).ready(function() {

    showLeaderboard();

    if (autoUpdate != false) {
        window.setInterval(function(){  
            $('#wrapper h2, #leaderboard tbody tr').remove(updateLeaderboard());
        }, reloadInterval);
    }

});

function updateLeaderboard() {

    leaderBoardType;
    numRecords;
    quizIDs;    
    topListTitle;
    latestTitle;

    $.webMethod({
        url: 'xxx',
        data: '{quizIDs:"'+quizIDs+'",numRecords:"'+numRecords+'"}',
        type: 'POST',
        cache: false,
        beforeSend: function () { 
            $('body').append('<div class="loading"></div>');
        },
        success: function (ret)
        {
            $('.loading').remove();
            $('#wrapper').prepend(topListTitle);

            $.each(ret.leaderboard,function(i){
                pos = i + 1;
                str = '<td class="position">' + pos + '</td>';
                str += '<td class="name">' + ret.leaderboard[i].first_name + '&nbsp;' + ret.leaderboard[i].last_name + '</td>';
                str += '<td class="time">' + getTime(ret.leaderboard[i].time_taken) + '</td>';
                str += '<td class="points">' + ret.leaderboard[i].points + '</td>';
                //str += '<td>' + ret.leaderboard[i].last_name + '</td>';               
                //str += '<td>' + ret.leaderboard[i].incorrect_attempts + '</td>';
                //str += '<td>' + ret.leaderboard[i].user_id + '</td>';
                $('#leaderboard tbody').append('<tr>'+str+'</tr>');
            });
        },
        error: function (response) { alert(response.responseText); }
    });
} 
```

HTML

```
 <table id="leaderboard">
        <thead>
            <tr>
                <th class="position">Position</th>
                <th class="name">Name</th>
                <th class="time">Time Taken</th>
                <th class="points">Points</th>
            </tr>
        </thead>
        <tbody> 
        </tbody>
    </table> 
```

# android - 带有值的 Android Spinner 下拉菜单

> ID：12726848
> 
> 赞同：0
> 
> 时间：2012-10-04T12:02:22.410
> 
> 标签：android

我一直在寻找一个关于微调器的示例/演示，它显示与值/ID 相关的显示文本。例如。
AB ItemAB BC ItemBC CD ItemCD 屏幕将显示 ItemAB、ItemBC 的下拉列表...但是当我得到值时，它应该给出代码 AB、BC 或 CD。我展示的大部分示例都是 simple_spinner_dropdown_item。我不确定要搜索此示例的哪些单词，我尝试了微调器自定义布局但没有成功。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:05:35.360

看看这个..它绝对可以帮助你实现你想要实现的目标。

[http://android-er.blogspot.in/2010/12/custom-spinner-with-icon.html](http://android-er.blogspot.in/2010/12/custom-spinner-with-icon.html)

# xml - XML 中的 Youtube 数据 API

> ID：12726854
> 
> 赞同：0
> 
> 时间：2012-10-04T12:02:39.177
> 
> 标签：xml, json, api, youtube, qjson

我正在使用数据 api。我想从特定视频中检索数据。这适用于 PHP 中的 JSON。但是我需要在 Qt 中做到这一点，这就是 XML 更容易的原因，因为我之前已经做过它并且它已经在 Qt 本身中实现了。另一方面，QJson 是第三方“插件”。

所以我想知道是否有一种方法可以让我以 XML 而不是 JSON 格式获取数据？

如果不是，我正在考虑在 PHP 中将 JSON 转换为 XML，然后在 Qt 中请求该链接。

（我想在 XML 中检索[的 json 数据）](https://gdata.youtube.com/feeds/api/videos/xyF6s6F2tbg?v=2&alt=json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:04:04.393

只需从查询字符串中删除 alt=json

[https://gdata.youtube.com/feeds/api/videos/xyF6s6F2tbg?v=2](https://gdata.youtube.com/feeds/api/videos/xyF6s6F2tbg?v=2)

# android - 使用 iScroll 时键盘不消失

> ID：12726855
> 
> 赞同：4
> 
> 时间：2012-10-04T12:02:39.743
> 
> 标签：android, keyboard, iscroll4

我们将 iscroll4 用于 android 应用程序。如果不使用 iScroll，当我触摸输入字段时，键盘会自动打开，当我触摸输入字段之外的任何位置时它会消失。如果使用 iScroll，则不会发生相同的情况。当我触摸启用 iScroll 的外部时，div 键盘会自动关闭。怎样才能避免这个问题？我想在使用 iScroll 时正常键盘操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:03:13.113

我相信`scroll`是被触发而不是`focus`，你只需要防止表单元素发生这种情况。

```
myScroll = new iScroll('scroller-parent', {
    // All our params are set

    // Allow form elements to be clickable/selected
    onBeforeScrollStart: function (e) {
        var target = e.target;
        while (target.nodeType != 1) target = target.parentNode;

        if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA')
            e.preventDefault();
    }
}); 
```

# c++ - 我可以本地化 AFX_IDP_ASK_TO_SAVE 吗？

> ID：12726858
> 
> 赞同：1
> 
> 时间：2012-10-04T12:02:51.090
> 
> 标签：c++, mfc, localization

在我的应用程序中，我有一个“您要保存更改吗？” 消息框。我正在从 MFC 获取要显示的文本：

```
CString prompt;
AfxFormatString1(prompt, AFX_IDP_ASK_TO_SAVE, strFileName);
UINT nResult = AfxMessageBox(prompt, MB_YESNOCANCEL, AFX_IDP_ASK_TO_SAVE) 
```

现在我正在将应用程序本地化为日语。我猜像这样的标准文本已经被翻译成大多数主要语言。但我不知道如何设置 MFC 以使用这些标准文本的日文版本的资源标识符。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:44:21.690

原来我需要更改 .rc 文件中的一些包含文件：

```
#include "afxres.rc"         // Standard components
#include "afxprint.rc"               // printing/print preview resources
#include "afxribbon.rc"              // MFC ribbon and control bar resources 
```

需要成为：

```
#include "l.jpn/afxres.rc"         // Standard components
#include "l.jpn/afxprint.rc"               // printing/print preview resources
#include "l.jpn/afxribbon.rc"              // MFC ribbon and control bar resources 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T09:02:09.850

在 VS2008 中，AFX_IDP_ASK_TO_SAVE 和其他 AFX_... 字符串保存在 MFC 本地化 DLL 中：MFC90CHS.dll、MFC90JPN.dll。MFC90KOR.dll 等。要在 Windows Vista 和更高版本上使用它们，您应该调用：

```
SetThreadUILanguage (MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US)); 
```

或者

```
SetThreadUILanguage (MAKELANGID(LANG_JAPANESE,SUBLANG_JAPANESE_JAPAN)); 
```

在 Windows XP 上调用：

```
SetThreadLocale(lcid) 
```

有关常量，请参阅[https://msdn.microsoft.com/en-us/library/windows/desktop/dd318693%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/dd318693%28v=vs.85%29.aspx)

使用 GetSystemDefaultLangID 检索正确的语言环境，即在中文操作系统上。

**重要提示：**不要使用 GetUserDefaultLangID() 或 GetSystemDefaultUILanguage()，它们会返回不同的东西，即如果您有英文操作系统，则选择了中文区域设置。

```
lcid = MAKELCID(GetSystemDefaultLangID(), SORT_DEFAULT);//With Chinese locale, returns 0x804, zh-CN 
```

# android - Android：如何在设置图像视图时检测从图库中选择的图像方向（纵向或横向）？

> ID：12726860
> 
> 赞同：39
> 
> 时间：2012-10-04T12:02:51.273
> 
> 标签：android, android-imageview, android-gallery

我正在从画廊（相册）挑选的图像视图上设置图像。如果选择的图像是横向的，它会完美显示，但如果图像是纵向模式（即图像是在纵向模式下单击的），它会以 90 度旋转显示图像。现在我试图在设置 imageview 之前找出方向，但所有图像都给出相同的方向和相同的宽度高度。这是我的代码：

```
Uri selectedImage = intent.getData();
if (selectedImage != null) {
    Bitmap bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(), selectedImage);

    int str = new ExifInterface(selectedImage.getPath()).getAttributeInt("Orientation", 1000);
    Toast.makeText(this, "value:" + str, Toast.LENGTH_LONG).show();
    Toast.makeText(this, "width:" + bitmap.getWidth() + "height:" + bitmap.getHeight(), Toast.LENGTH_LONG).show(); 
```

![人像模式](../Images/f4e50e62e8a4bcd1cecc7ec0cf175a2b.png) ![横向模式](../Images/585efcca5e774409198cc429e402cf32.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-04T12:13:58.783

用于`ExifInterface`旋转图像。使用此方法获取正确的值以旋转从相机捕获的图像。

```
public int getCameraPhotoOrientation(Context context, Uri imageUri, String imagePath){
    int rotate = 0;
    try {
        context.getContentResolver().notifyChange(imageUri, null);
        File imageFile = new File(imagePath);

        ExifInterface exif = new ExifInterface(imageFile.getAbsolutePath());
        int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);

        switch (orientation) {
        case ExifInterface.ORIENTATION_ROTATE_270:
            rotate = 270;
            break;
        case ExifInterface.ORIENTATION_ROTATE_180:
            rotate = 180;
            break;
        case ExifInterface.ORIENTATION_ROTATE_90:
            rotate = 90;
            break;
        }

        Log.i("RotateImage", "Exif orientation: " + orientation);
        Log.i("RotateImage", "Rotate value: " + rotate);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return rotate;
} 
```

并将此代码放入 Activity 结果方法中并获取旋转图像的值...

```
String selectedImage = data.getData();
String[] filePathColumn = {MediaStore.Images.Media.DATA};

Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
cursor.moveToFirst();

int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
filePath = cursor.getString(columnIndex);
cursor.close();

int rotateImage = getCameraPhotoOrientation(MyActivity.this, selectedImage, filePath); 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T07:27:44.863

这也对我有用：

```
String[] orientationColumn = {MediaStore.Images.Media.ORIENTATION};
Cursor cur = getContentResolver().query(imageUri, orientationColumn, null, null, null);
int orientation = -1;
if (cur != null && cur.moveToFirst()) {
    orientation = cur.getInt(cur.getColumnIndex(orientationColumn[0]));
}
Matrix matrix = new Matrix();
matrix.postRotate(orientation); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-08T10:17:47.883

```
 if(bm.getWidth() > bm.getHeight())
                        {
                            Bitmap bMapRotate=null;
                            Matrix mat=new Matrix();
                            mat.postRotate(90);
                        bMapRotate = Bitmap.createBitmap(bm, 0, 0,bm.getWidth(),bm.getHeight(), mat, true);
                        bm.recycle();
                        bm=null;
                        imageDisplayView.setImageBitmap(bMapRotate);
                        }else
                        imageDisplayView.setImageBitmap(bm); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-05-28T03:35:58.510

这是我遇到的一个很好的解决方案：> [https://stackoverflow.com/a/34241250/8033090](https://stackoverflow.com/a/34241250/8033090)

一线解决方案：

```
Picasso.with(context).load("http://i.imgur.com/DvpvklR.png").into(imageView); 
```

或者

```
Picasso.with(context).load("file:" + photoPath).into(imageView); 
```

这将自动检测旋转并将图像放置在正确的方向

Picasso 是一个非常强大的库，用于处理应用程序中的图像，包括： 使用最少内存的复杂图像转换。加载可能需要一秒钟，但我只是在图像视图后面放了一些文本，上面写着“正在加载图像”，并且当图像加载时它会覆盖文本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-07T08:04:35.147

使用 kotlin 并考虑新 android 版本中 uri 和 exif 的变化：

```
 var exif: ExifInterface? = null;
 try {
    when (Build.VERSION.SDK_INT) {
        in Int.MIN_VALUE..24 -> exif = ExifInterface(imageUri.path)
        else -> exif = ExifInterface(getContentResolver().openInputStream(data.extras.get("data")))
     }
 } catch (e: IOException) {
     e.printStackTrace();
 }
 val orientation = exif?.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL)
 bmp = rotateBitmap(bmp, orientation ?: ExifInterface.ORIENTATION_NORMAL) 
```

而rotateBitmap函数是：

```
un rotateBitmap(bitmap: Bitmap, orientation: Int): Bitmap {
val matrix = Matrix()
when (orientation) {
    ExifInterface.ORIENTATION_NORMAL -> return bitmap
    ExifInterface.ORIENTATION_FLIP_HORIZONTAL -> matrix.setScale(-1f, 1f)
    ExifInterface.ORIENTATION_ROTATE_180 -> matrix.setRotate(180f)
    ExifInterface.ORIENTATION_FLIP_VERTICAL -> {
        matrix.setRotate(180f)
        matrix.postScale(-1f, 1f)
    }
    ExifInterface.ORIENTATION_TRANSPOSE -> {
        matrix.setRotate(90f)
        matrix.postScale(-1f, 1f)
    }
    ExifInterface.ORIENTATION_ROTATE_90 -> matrix.setRotate(90f)
    ExifInterface.ORIENTATION_TRANSVERSE -> {
        matrix.setRotate(-90f)
        matrix.postScale(-1f, 1f)
    }
    ExifInterface.ORIENTATION_ROTATE_270 -> matrix.setRotate(-90f)
    else -> return bitmap
}
try {
    val bmRotated = Bitmap.createBitmap(bitmap, 0, 0, bitmap.width, bitmap.height, matrix, true)
    bitmap.recycle()
    return bmRotated
} catch (e: OutOfMemoryError) {
    e.printStackTrace()
    return null
} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-18T07:04:58.930

在某些安卓设备上使用 EXIF 信息并不可靠。（ExifInterface 方向总是返回 0）

这对我有用：

**旋转位图**

```
public static Bitmap rotateBitmap(Context context, Uri photoUri, Bitmap bitmap) 
{
    int orientation = getOrientation(context, photoUri);
    if (orientation <= 0) {
        return bitmap;
    }

    Matrix matrix = new Matrix();
    matrix.postRotate(orientation);
    bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, false);
    return bitmap;
} 
```

**从 MediaStore 获取方向**

```
private static int getOrientation(Context context, Uri photoUri) 
{
    Cursor cursor = context.getContentResolver().query(photoUri,
            new String[]{MediaStore.Images.ImageColumns.ORIENTATION}, null, null, null);

    if (cursor.getCount() != 1) {
        cursor.close();
        return -1;
    }

    cursor.moveToFirst();
    int orientation = cursor.getInt(0);
    cursor.close();
    cursor = null;
    return orientation;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-10T18:19:22.203

另一种解决方案是使用支持库中的 ExifInterface： [ExifInterface from support library](https://android-developers.googleblog.com/2016/12/introducing-the-exifinterface-support-library.html)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-12-22T08:02:05.260

这对我有用：

```
private String getOrientation(Uri uri){
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    String orientation = "landscape";
    try{
        String image = new File(uri.getPath()).getAbsolutePath();
        BitmapFactory.decodeFile(image, options);
        int imageHeight = options.outHeight;
        int imageWidth = options.outWidth;
        if (imageHeight > imageWidth){
            orientation = "portrait";
        }
    }catch (Exception e){
        //Do nothing
    }
    return orientation;
} 
```

# java - 删除引用/OneToMany 关系而不是“清空”列

> ID：12726862
> 
> 赞同：0
> 
> 时间：2012-10-04T12:02:55.000
> 
> 标签：java, jpa, one-to-many, openjpa

我们有两个实体：

```
public class User {
  @OneToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
  @JoinColumn(name = "user_id", insertable = true, updatable = true)
  @ElementList(name = "tabledata")
  public List<MyUserTableData> tableData = new ArrayList<MyUserTableData>();
}

public class MyUserTableData {
  public Long user_id;
} 
```

我所做的操作是从 u.tableData 中删除一个条目，然后调用 EntityManager 来合并（u）。

OpenJPA 将通过在 MyUserTableData 中使用 user_id = "null" 设置相应记录来从 User 对象中删除条目。

但我想要的是，如果从用户中删除条目，它还应该从 MyUserTableData 中删除记录，而不仅仅是将 user_id 列设为 NULL。

如何强制 OpenJPA 删除 OneToMany 相关条目，而不是在列中放置空值？

我不会接受假设我的数据库架构不好的答案:) MyUserTableData 表基本上是一个外键表，它将用户连接到另一个实体，但包含更多信息，然后只是一个外键，它将一些元数据添加到既不属于用户也不属于其他实体的外键。

谢谢！

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:30:08.273

我能够解决我的问题：

[http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/manual.html#dependent](http://openjpa.apache.org/builds/1.0.4/apache-openjpa-1.0.4/docs/manual/manual.html#dependent)

@ElementDependent => 完全符合我的要求。

# active-directory - 为什么服务器需要访问 Kerberos？

> ID：12726864
> 
> 赞同：2
> 
> 时间：2012-10-04T12:03:04.473
> 
> 标签：active-directory, kerberos, spnego

我正在尝试找出如何向远程服务器验证 Active Directory 用户。

目标是使用 SPNEGO 接收 Kerberos 票证。然后可以解密 Kerberos 票证并确定用户的身份。

我不明白的是，为什么需要服务器和 Kerberos 之间的访问。由于服务票证包含客户端身份并由 TGS 私钥加密，因此服务器不需要访问 Kerberos TGS。它可以只解密票证并知道用户身份。有人可以向我解释为什么有必要吗？

[http://www.adopenstatic.com/cs/blogs/ken/archive/2007/01/16/1054.aspx](http://www.adopenstatic.com/cs/blogs/ken/archive/2007/01/16/1054.aspx)

如果我想要的只是客户身份，那么任何像身份提供者或 WIF 这样的方案对我来说似乎都没有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:24:04.093

事实证明这个问题有很多答案......我什至不会尝试在这里涵盖所有答案（部分原因是简洁，部分原因是细节变得模糊而且我不记得全部了:) ）。我将介绍我想到的两大类，但同样，还有更多。

首先，您说的是到 DC 的往返行程，就好像这完全是关于 Curb 的，因为 DC 是 KDC。我想这是看待它的一种方式，但整个 Windows 身份验证堆栈不仅仅是验证 Curb 票证。例如，需要 SID 解析之类的东西，以便在做出 authz 决策时对进来的票进行正面或反面。因此，出于多种原因并使用许多协议，通信发生回到 DC（这是一个 KDC 等等），其中一些支持 authz 堆栈，这对大多数人来说通常是有趣的。

其次，对于 Curb，特别是……协议的某些特性使返回 KDC 具有安全价值。PAC 验证是首先想到的。我建议阅读此内容...这是涵盖它的无数帖子之一：http: [//blogs.msdn.com/b/openspecification/archive/2009/04/24/understanding-microsoft-kerberos-pac -validation.aspx](http://blogs.msdn.com/b/openspecification/archive/2009/04/24/understanding-microsoft-kerberos-pac-validation.aspx) 我会注意到，在这种情况下，您可以做一些事情来实际禁用此下游-> KDC 流（例如提供主体 TCB）。但是，这些事情不能轻易完成......即，它不仅仅是要考虑的“性能修复”。:)

# android - 将断言堆栈跟踪保存到文件

> ID：12726866
> 
> 赞同：1
> 
> 时间：2012-10-04T12:03:12.653
> 
> 标签：android, logging, junit, assert

我有一个运行多个测试的 Android 测试应用程序。我使用各种断言调用，例如 assertEquals、assertTrue、assertNull 等。当这样的断言失败时，我希望将堆栈跟踪保存到设备上的文件中。这样的事情是否已经存在，或者您对我如何实施它有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:12:09.747

你可以抓住`AssertionError`

```
try {
    assertEquals(true, true);

} catch (AssertionError ex) {
    // code that write exception to file
} 
```

或者更高级，您可以使用[acra](http://code.google.com/p/acra/)并实现自己的`ReportSender`.

# ios - 如何在 iPhone 上渲染斜角多边形？

> ID：12726870
> 
> 赞同：0
> 
> 时间：2012-10-04T12:03:43.693
> 
> 标签：ios, opengl-es, cocos2d-iphone, quartz-2d

我从 App Store 查看了 Tangram。如何在不同的形状上制作这种斜角效果？我需要什么技术来创建这样的布局？

我需要 OpenGL ES 还是 cocos2D 或者 Quartz2D？

![在此处输入图像描述](../Images/58c44e6d4f279e59ad54527f125f91e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T19:12:29.740

其实我已经记录了七巧板的开发过程！，在这里找到它：http: [//gotoandplay.freeblog.hu/categories/compactTangram/](http://gotoandplay.freeblog.hu/categories/compactTangram/)

那时没有使用抗锯齿渲染 OpenGL 多边形的选项，所以我做了一个苛刻的解决方法来实现结果（我也想添加凹凸效果，但后来我跳过了）。重点在这篇文章中：http: [//gotoandplay.freeblog.hu/archives/2010/02/04/compactTangram_074_-_organizing_textures_performance_preservingincreasing_plan/](http://gotoandplay.freeblog.hu/archives/2010/02/04/compactTangram_074_-_organizing_textures_performance_preservingincreasing_plan/) 有趣。

从那以后，您可以轻松地使用抗锯齿进行渲染，而视网膜也可以解决这种痛苦，所以一些多边形网格，一些用于镜面反射的着色器，然后就可以了，或者使用 Cocos2D，正如您所提到的，它的 3D 正在增长支持。

# jquery - jQuery检查元素是否没有应用特定的类

> ID：12726871
> 
> 赞同：1
> 
> 时间：2012-10-04T12:03:49.323
> 
> 标签：jquery

我想检查一个元素是否没有应用特定的类。这个对吗？

```
if($('#tabs_wrapper li').hasClass:not('enabled')){
$('.inner_tabs div').css('display', 'none');
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:07:11.583

只是一个选择

```
if ($('#tabs_wrapper li:not(".enabled")').length) {
   /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:05:00.060

你可以这样做：

```
 if (!$('#tabs_wrapper li').is('.enabled')){
    $('.inner_tabs div').css('display', 'none');
 } 
```

[参考](http://api.jquery.com/is/)

# c# - 使用 LINQ 如何检查一个数组和另一个数组中的数字实例？

> ID：12726876
> 
> 赞同：2
> 
> 时间：2012-10-04T12:04:02.593
> 
> 标签：c#, arrays, linq, contains

我有一个这样的`MyItem`对象列表`myItems`：

```
public class MyItem{
    public int[] category_ids;
    public string name;
}

List<MyItem> myItems; 
```

我想使用选定类别列表过滤对象列表，以便过滤后的列表包含任何过滤器类别 ID：

```
int[] filter = { 1, 5, 6, 9 }; 
```

我将如何在一行中使用 LINQ 来做到这一点？（如果它甚至可能的话，我不能绕着它转！）我想像这样的事情：

```
IEnumerable<MyItem> filtered = myItems.Where(item => item.category_ids.Contains(xxx)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:10:26.877

需要一个方法调用：

```
IEnumerable<MyItem> filtered = myItems.Where(item => item.category_ids.Any(x=>filter.Contains(x)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:10:40.370

已经提出的另一种选择：

```
var filtered = myItems.Where( item => item.category_ids.Intersect( filter ).Count() > 0 ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T12:12:02.090

```
var filtered = myItems.Where(x => x.category_ids.Intersect(filter)
                                          .Any()); 
```

# c# - AsNoTracking() 的全局设置？

> ID：12726878
> 
> 赞同：64
> 
> 时间：2012-10-04T12:04:04.770
> 
> 标签：c#, .net, entity-framework, change-tracking

原本我相信

```
context.Configuration.AutoDetectChangesEnabled = false; 
```

将禁用更改跟踪。但不是。目前我需要`AsNoTracking()`在我所有的 LINQ 查询上使用（对于我的只读层）。是否有禁用 DbContext 跟踪的全局设置？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-10-01T17:15:21.520

由于这个问题没有用特定的 EF 版本标记，我想提一下，在*EF Core*中，可以[在上下文级别配置](https://docs.microsoft.com/en-us/ef/core/querying/tracking)行为。

> 您还可以在上下文实例级别更改默认跟踪行为：

```
using (var context = new BloggingContext())
{
    context.ChangeTracker.QueryTrackingBehavior = QueryTrackingBehavior.NoTracking;

    var blogs = context.Blogs.ToList();
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-04T12:29:35.290

在派生的上下文中简单地公开这样的方法并将其用于查询怎么样：

```
public IQueryable<T> GetQuery<T>() where T : class {
    return this.Set<T>().AsNoTracking();
} 
```

`AsNoTracking`无法进行全局设置。您必须为每个查询或每个`ObjectSet`（不是`DbSet`）设置它。后一种方法需要使用`ObjectContext`API。

```
var objectContext = ((IObjectContextAdapter)dbContext).ObjectContext;
var set = objectContext.CreateObjectSet<T>();
set.MergeOption = MergeOption.NoTracking;
// And use set for queries 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-05-29T21:11:58.523

在**EntityFramework.Core 中**这很容易。

为此，您可以使用[UseQueryTrackingBehavior](https://docs.microsoft.com/en-us/dotnet/api/microsoft.entityframeworkcore.dbcontextoptionsbuilder.usequerytrackingbehavior?view=efcore-3.0)方法。

代码片段在这里：

```
services.AddDbContext<DatabaseContext>(options =>
{
    options.UseQueryTrackingBehavior(QueryTrackingBehavior.NoTracking);
    options.UseSqlServer(databaseSettings.DefaultConnection);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-16T14:47:37.753

你可以在你的 DbContext 中做这样的事情：

```
public void ObjectContext_OnObjectMaterialized(Object objSender, ObjectMaterializedEventArgs e)
{
    Entry(e.Entity).State = EntityState.Detached;
} 
```

每当一个对象被你的上下文具体化时，它就会被分离并且不再被跟踪。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T21:05:31.263

更新：这并没有真正起作用。看评论！

当我在 StackOverflow 上搜索时，我讨厌它，答案是：“你不能！” 或“你可以，但前提是你完全改变你曾经打过的每一个电话。”

反思任何人？我希望这将是一个 DbContext 设置。但既然不是，我用反射做了一个。

这个方便的小方法将在 DbSet 类型的所有属性上设置 AsNoTracking。

```
 private void GloballySetAsNoTracking()
    {
        var dbSetProperties = GetType().GetProperties();
        foreach (PropertyInfo pi in dbSetProperties)
        {
            var obj = pi.GetValue(this, null);
            if (obj.GetType().IsGenericType && obj.GetType().GetGenericTypeDefinition() == typeof(DbSet<>))
            {
                var mi = obj.GetType().GetMethod("AsNoTracking");
                mi.Invoke(obj, null);
            }
        }
    } 
```

将其添加到重载的 DbContext 构造函数中。

```
 public ActivationDbContext(bool proxyCreationEnabled, bool lazyLoadingEnabled = true, bool asNoTracking = true)
    {
        Configuration.ProxyCreationEnabled = proxyCreationEnabled;
        Configuration.LazyLoadingEnabled = lazyLoadingEnabled;
        if (asNoTracking)
            GloballySetAsNoTracking();
    } 
```

它使用反射，这意味着有人会很快评论这是对性能的影响。但它真的那么受欢迎吗？取决于您的用例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T18:24:57.483

如果使用实体框架核心，您还可以在继承 DbContext 的类的构造函数中添加以下代码。

```
public NPCContext()
        : base()
{
     base.ChangeTracker.AutoDetectChangesEnabled = false;
} 
```

或以下

```
 public NPCContext(DbContextOptions<NPCContext> options)
        : base(options)
    {
        base.ChangeTracker.AutoDetectChangesEnabled = false;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-05T00:43:21.350

在我的情况下，因为我需要整个上下文是只读的而不是读/写。

因此，我对 tt 文件进行了更改，并将所有 DbContext 属性更改为返回 DbQuery 而不是 DbSet，从所有属性中删除了集合，对于获取，我返回了 Model.AsNoTracking()

例如：

```
public virtual DbQuery<Campaign> Campaigns { get{ return Set<Campaign>().AsNoTracking();} }
```

我在 tt 模板中这样做的方式是：

```
public string DbQuery(EntitySet entitySet)
    {
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} virtual DbQuery<{1}> {2} {{ get{{ return Set<{1}>().AsNoTracking();}} }}",
            Accessibility.ForReadOnlyProperty(entitySet),
            _typeMapper.GetTypeName(entitySet.ElementType),
            _code.Escape(entitySet));
    }
```

# c# - 从网络摄像头获取图像

> ID：12726880
> 
> 赞同：2
> 
> 时间：2012-10-04T12:04:07.290
> 
> 标签：c#, webcam

我正在尝试找到从托管 C# 中的网络摄像头获取图像（仅图像，而不是视频流）的方法。通常人们建议图书馆，但它们是旧的或商业的或在 gpl 下。

如何在没有第三方库的情况下从网络摄像头获取图像？

**更新：**感谢媒体基金会，我将使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:15:45.857

网络摄像头应该提供视频馈送，而不是静止图像。因此，您可能感兴趣的原生 API 是用于视频捕获的 API，即 DirectShow 和 Media Foundation。

您最可能想要的是 DirectShow，但它不太适合与托管代码接口，因此您需要一个[DirectShow.NET](http://directshownet.sourceforge.net/)，它是开源包装器。您通常会在此处开始视频流，一旦您拥有良好的图像，您就会停止活动。

或者相反，您可能会继续寻找可以为您执行上述操作的现成库。

DirectShow.NET 示例之一可以满足您的需求。

> DxSnap – 使用 DirectShow 从捕获设备的 Still 引脚拍摄快照。请注意，MS 鼓励您为此使用 WIA，但如果您想使用 DirectShow 和 C#，请参考以下方法。

它提到了 WIA，但是 WIA API 不适用于所有（或最近的操作系统中的任何？）网络摄像头，WIA 更多地针对扫描仪等设备。

其他 API 可能不太适合。

*   VFW（“avicap32.dll”）将您限制为设备子集，简单但不能很好地与托管代码接口
*   Media Foundation 在早期操作系统版本中不可用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:07:37.380

avicap32.dll 是不可能的吗？

否则我认为这是一种简单直接的方法：

[http://www.creativecodedesign.com/node/66](http://www.creativecodedesign.com/node/66)

[http://www.c-sharpcorner.com/uploadfile/yougerthen/integrate-the-web-webcam-functionality-using-C-Sharp-net-and-com-part-viii/](http://www.c-sharpcorner.com/uploadfile/yougerthen/integrate-the-web-webcam-functionality-using-C-Sharp-net-and-com-part-viii/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:06:45.227

这是我多年前写的

[http://www.vbforums.com/showthread.php?344471-Vb.Net-WebCam-Class-(ICam](http://www.vbforums.com/showthread.php?344471-Vb.Net-WebCam-Class-(ICam) )) 在 VB.net

您可以轻松地将其移植到 c# 吗？

# python - 使用计数重命名重复文件（python）

> ID：12726883
> 
> 赞同：0
> 
> 时间：2012-10-04T12:04:25.220
> 
> 标签：python, count

```
#!/usr/bin/python
import os, datetime
import os.path
import sys
import time
import shutil
import re
import itertools

today = datetime.date.today()
todaystr = today.isoformat()

if os.path.exists('/var/log/brd/' + todaystr) is False and os.path.isfile('/var/log/brd/brd.log') is True:
    os.mkdir('/var/log/brd/' + todaystr) 
    shutil.move('/var/log/brd/brd.log', '/var/log/brd/' + todaystr)
    print "Directory Created, Moved Log File" 
    sys.exit()

elif os.path.isfile('/var/log/brd/brd.log') is True and os.path.exists('/var/log/brd/'+todaystr) is True: 
    num_files = sum(1 for file in os.listdir('/var/log/brd/') if os.path.isfile('/var/log/brd/{}/brd.log'.format(todaystr,)))
    next_num = num_files + 1
    os.rename('/var/log/brd/brd.log', '/var/log/brd/' + todaystr + '/blackbird.log_{}'.format(next_num))
    print "Renaming Duplicate"
    sys.exit() 

else:
    print "No Duplicate Found"
    sys.exit() 
```

我的情况：每天都有一个新目录。被建造。它将 days .log 文件移动到 daily 目录中。现在，如果它移动相同的 .log 文件，我需要在文件名的末尾添加一个计数（1、2、3 ...）。我可以很容易地使用日期/分钟/秒在 bash 中执行此操作，但我需要弄清楚如何最终使用计数。

我对 python 脚本很陌生，因此感谢您的帮助。

好的...这是更新的代码。我只是想在开始清理之前让所有东西都运行起来......

现在......它运行良好......移动文件。如果再次运行，它将计数添加到末尾（最终为 18 ????），然后当它再次移动/重命名时，它只是用较新的日志替换 _18 文件......请记住，这是我的我写过的第一个 python 脚本。

```
e.@IT-105-WS4:~$ touch /var/log/brd/brd.log
e@IT-1~$ python BBdirectory.py 
Renaming Duplicate
e@IT1:~$ ls /var/log/blackbird/2012-10-05
brd.log  brd.log_19
e@IT-1:~$ 
```

它重复上述过程，永远不会产生 20 21 ......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:26:26.217

我的回答可能并不特别有问题，如果您查看 linux 中的 logrotate 实用程序可能会很有价值。这将自动轮换您的日志文件，重命名不是问题。这是[logrotate的一个很好的例子](http://www.cyberciti.biz/faq/how-do-i-rotate-log-files/)

如果对您没有建设性，请通过它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:07:02.650

只需计算目录中的文件数：

```
count = len(os.listdir(path)) 
```

假设目录中已经有一个文件，那么这将产生一串名称1：

```
new_name= "name%s.log" % count 
```

如果您想写入新文件（似乎并非如此）：

```
with open (outfile, 'w') as of:
    ... 
```

如果您只想重命名文件，请使用[`os.rename`](http://docs.python.org/library/os.html#os.rename)：

```
os.rename(source/old_name,destination/new_name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:18:05.777

一个非常简单的方法（但最终不是那么健壮）是：

```
import os
import os.path
import shutil

num_files = sum(1 for fname in os.listdir('/path/to/log/dir/') if os.path.isfile(fname))
next_num = num_files + 1
shutil.move('/path/to/your/file/log.txt', '/path/to/log/dir/log.{}'.format(next_num) 
```

# javascript - 启用文本区域值更改按钮

> ID：12726885
> 
> 赞同：1
> 
> 时间：2012-10-04T12:04:31.487
> 
> 标签：javascript, jsp

我的表单中有一个文本区域。现在我想在 textarea 的文本发生变化时启用一个按钮。

我尝试`onchange`在 textarea 上使用事件，但是在使用它时，浏览器希望我在 textarea 外部单击以启用按钮，即使我更改了 textarea 中的一些文本。

我的要求是在更改文本的那一刻启用按钮。

我已经写`onclick`了textarea的这个功能：

```
function enableUpdateButton() {

    document.getElementById("button").disabled = false;

} 
```

我应该做什么改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:07:13.217

```
function enableUpdateButton() {

    document.getElementById("button").disabled = false;

} 
document.getElementById('textareaId').onkeypress=enableUpdateButton(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:06:10.217

在您的 textarea 上使用`onkeypress`,`onkeyup`或`onkeydown`属性而不是`onchange`. **当焦点**从*textarea*更改为另一个元素时调用该`onchange`属性。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:08:35.033

我使用 keyListeners 来满足这样的要求：

```
this.jt_Auftragsnummer.addKeyListener(new KeyAdapter() {

     @Override
     public void keyReleased(KeyEvent arg0) {
     // Do some stuff
     }
} 
```

这对我来说非常好。***

# android - 我的带有 Checkboxes 和 imageViews 的自定义 listView 奇怪的行为

> ID：12726890
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:04:37.510
> 
> 标签：android, listview

我有一个`ListView`通过使用（框架）加载的图像和每个图像的复选框。我有一个为此`ImageLoader`扩展的适配器，当我选中一个复选框并滚动它时，我会看到自动选中的其他复选框. 有什么办法可以解决我的问题。请有人给我一个线索或例子。`BaseAdapter``ListView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:10:30.403

这是因为这些行正在被重复使用，因此您需要为每一行设置一些属性，告诉它是否检查了该行。然后在你的“if and else”语句中`getView()`查看该行是否被选中，如果它只是检查它，否则不选中它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T12:43:18.197

我建议您使用一个布尔数组，在其中为列表中的每个位置保持选中状态。ListView 在滚动时重新创建列表元素，因此您的检查可能会搞砸。这意味着您必须检查要实例化的元素位置的布尔值是否为真，然后使用 checkBox.setChecked(true) 或 checkBox.setChecked(false)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:06:01.433

简单的，

```
Set<String> bs = new HashSet(String);

String[] bid; 
```

并将这个写在你的getView方法中，作为模板。不作为解决方案

```
public View getView(final int position, View convertView, ViewGroup arg2) {
            row = convertView;
            if (row == null)
            {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = vi.inflate(R.layout.your_listview,null);
            }

            check = (CheckBox) row.findViewById(R.id.your_checkboxid);
            check.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                    if(isChecked)
                    {
                        bs.add(bid[position]);
                    }
                    else
                    {
                        if(bs.contains(bid[position]))
                        {
                            bs.remove(bid[position]);
                        }
                    }

                }
            });

            if(bs.contains(bid[position]))
            {
                check.setChecked(true);
            }
            else
            {
                check.setChecked(false);
            }   
            return row;
        } 
```

# mysql - mySQL - 使用自动增量 ID 将行从一个数据库复制到另一个数据库

> ID：12726893
> 
> 赞同：15
> 
> 时间：2012-10-04T12:04:47.313
> 
> 标签：mysql

注意：抱歉，如果这是重复的，但我找不到解决方案。

我有两个具有完全相同架构的数据库（一个开发数据库和一个实时数据库）。

为了让事情更容易解释，假设我有一个“客户”表和一个“报价”表。两个表都有自动增量 ID，报价表有一个“customerid”列，用作客户表的外键。

我的问题是我的开发数据库中有一些行要复制到实时数据库中。当我复制客户行时，我可以轻松获得一个新 ID，但是如何将新 ID 分配给“子”报价表行？

我知道我可以手动编写 INSERTS 脚本来解决这个问题，但有没有更简单的方法可以做到这一点？

编辑：这是一个简化的例子，我有大约 15 个表，所有这些表都使用自动增量和外键形成层次结构。实时数据库中有更多的数据，因此新的 id 会更大（例如 dev.customer.id = 4，live.customer.id = 54）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-08-27T16:18:17.350

最简单的方法，无需更改任何 ID。

1.  确保您当前位于要复制的记录所在的表中（源数据库）。

2.  运行以下命令：

```
INSERT INTO to_database.to_table 
  SELECT * FROM from_table WHERE some_id = 123; 
```

如果不需要重新映射任何内容，则无需指定列。

希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-30T11:26:12.750

我最终设法做到了（根据我的评论），但为了做到这一点，我必须编写一些代码。最后，我创建了一些虚拟表来跟踪旧 id 和新 id 所以。当复制带有 FK 约束的记录时，我只是根据旧的 id 查找新的 id。有点啰嗦，但它奏效了。

这篇文章现在有点进展，所以我把它标记为答案。如果那里有人有更好的想法/解决方案，我会很乐意将其“取消标记”为已接受的答案。

编辑：这里要求的是一些伪代码，我希望能解释我是如何做到的。

我有两个相关的表如下：

```
CREATE TABLE tblCustomers (
  Id int NOT NULL AUTO_INCREMENT,
  Name varchar(50) DEFAULT NULL,
  Address varchar(255) DEFAULT NULL,
  PRIMARY KEY (Id)
)
ENGINE = MYISAM
ROW_FORMAT = fixed;

CREATE TABLE tblQuotes (
  Id int NOT NULL AUTO_INCREMENT,
  CustomerId int(11) DEFAULT NULL,
  QuoteReference varchar(50) DEFAULT NULL,
  PRIMARY KEY (Id)
)
ENGINE = MYISAM
ROW_FORMAT = fixed; 
```

我创建了一个额外的表，用于跟踪旧 id 和新 id

```
CREATE TABLE tblLookupId (
  Id int NOT NULL AUTO_INCREMENT,
  TableName varchar(50) DEFAULT NULL,
  OldId int DEFAULT NULL,
  NewId int DEFAULT NULL,
  PRIMARY KEY (Id)
)
ENGINE = MYISAM
ROW_FORMAT = fixed; 
```

这个想法是我一次复制一个 tblCustomer 行并在我去的时候跟踪 id，如下所示：

```
// copy each customer row from dev to live and track each old and new id
//
foreach (customer in tblCustomers)
{
    // track the old id
    var oldid = customer.id; // e.g. 1

    // insert the new record into the target database   
    INSERT newdb.tblCustomers (...) VALUES (...);

    // get the new id
    var newid = SELECT LAST_INSERT_ID() // e.g. 245

    // insert the old id and the new id in the id lookup table
    INSERT idlookup (TableName, OldId, NewId) VALUES ('tblCustomers', oldid, newid); // this maps 1->245 for tblCustomers
} 
```

当我使用外键复制表（tblQuote）时，我必须首先根据旧的 id 查找新的 id。

```
// copy each quote row from dev to live and lookup the foreign key (customer) from the lookup table
//
foreach(quote in tblQuotes)
{
    // get the old foreign key value
    var oldcustomerid = quote.CustomerId; // e.g 1

    // lookup the new value
    var newcustomerid = SELECT newid FROM tblIdLookup WHERE TableName='tblCustomers' AND oldid=oldcustomerid; // returns 245

    // insert the quote record
    INSERT tblQuotes (CustomerId, ...) VALUES (newcustomerid, ...);
} 
```

我试图保持简短和重点（并且与语言无关），以便可以看到该技术。在我的真实场景中，我有大约 15 个“级联”表，所以我必须跟踪每个表的新 ID，而不仅仅是 tblCustomer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:11:31.183

使用`INSERT`... `SELECT`：

```
insert into your_table (c1, c2, ...)
select c1, c2, ...
from your_table 
```

其中*c1, c2, ...*是除 之外的所有列`id`。

# swt - 如何使用 swt styledText 获取文本的 CaretLocation

> ID：12726894
> 
> 赞同：0
> 
> 时间：2012-10-04T12:04:56.980
> 
> 标签：swt

我需要使用 SWT Styledtext 对文本进行 CaretLocation。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:29:34.070

不做[`getCaretOffset()`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/StyledText.html#getCaretOffset%28%29)你想做的事？

```
StyledText text = ...
int position = text.getCaretOffset(); 
```

# django - Django模型：同一模型类的对象之间的一对一关系

> ID：12726897
> 
> 赞同：6
> 
> 时间：2012-10-04T12:05:00.407
> 
> 标签：django, django-models, python-2.7

> **可能重复：**
> [我可以拥有一个对其自身具有外键引用的 Django 模型吗？](https://stackoverflow.com/questions/534700/can-i-have-a-django-model-that-has-a-foreign-key-reference-to-itself)

我想在我的 Django 应用程序中实现一个简单的文件夹文件结构。所以我有一个存储文件夹的模型，但我也想存储这个文件夹和父文件夹之间的关系。模型的简化版本如下所示：

```
class mFolder(models.Model):
    name = models.CharField(max_length=50)
    parentFolder = models.ForeignKey(mFolder, unique=False, related_name="childrenFolders") 
```

但是这是不可能的，因为 mFolder 尚未声明。

这个问题有什么简单的解决方案吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:06:46.007

应该是“自我”：

```
parentFolder = models.ForeignKey('self', unique=False, related_name="childrenFolders") 
```

# php - php+iis7 不能发邮件？

> ID：12726899
> 
> 赞同：0
> 
> 时间：2012-10-04T12:05:03.260
> 
> 标签：php, iis-7, amazon-ec2

我无法使用 iis7 服务器通过 php 代码发送电子邮件。这是我从服务器收到的警告。

```
Warning: mail(): SMTP server response: 550-(ip-0AD2EFB5) [ip]:50942 is currently not permitted to relay 550 through this server. in C:\inetpub\wwwroot\email\sendemail.php on line 17

and the 17th line is mail($to, $subject, $message, $headers) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:07:16.343

此问题与 PHP 或 IIS7 无关，而与 SMTP 策略有关。

您网络（或 ISP/主机）中的 SMTP 服务器不允许从其网络外部注入邮件。您必须从 ISP 的网络内部连接到您的 SMTP，或者您必须进行某种允许访问 SMTP 服务器的身份验证。

制定此策略是为了防止恶意用户使用 SMTP 来注入垃圾邮件（称为“开放中继”）。

编辑：刚刚注意到您的 amazon-ec2 标签，您好像在 Amazon AWS 云中运行？您可能需要的是[Amazon Simple Email Service](http://aws.amazon.com/ses/faqs/)

# php - PHP自定义数据服务缓存

> ID：12726901
> 
> 赞同：0
> 
> 时间：2012-10-04T12:05:04.767
> 
> 标签：php, json, caching, service

我需要为 PHP 应用程序实现一种快速缓存机制。它的工作原理是这样的：多个节点服务器正在从中央服务器（VIA JSON 服务）请求数据。节点服务器应该以某种快速有效的方式缓存文件系统上的响应。这就是问题 - 存储部分的最佳解决方案是什么。我有一些类型 - XML（听说它对于许多记录可能效率低下），将数组定义与内容一起存储在 PHP 文件中，或者只是将记录数组转储到文件中。对于这种情况，哪一个最有效？或者也许是别的什么？我需要注意的是，它必须在干净的 PHP >=5.2 上实现，无需任何额外的库或 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:35:56.960

鉴于您提供的信息，我建议简单地将 JSON 字符串转储到文件中。这意味着不需要外部库或 SQL 引擎。

如果您也想要“人类可读”的东西，您可以使用 XML，但是 XML 没有那么快，您当然必须花费额外的时间来生成 XML，然后才能存储数据缓存。

读取只是从文件中获取字符串并通过 json_decode 运行的情况。如果您只需要部分数据而不是全部数据，则可以通过将 json 对象拆分为块并写入单个文件来提高读取性能，这会牺牲一些写入速度（不是太多），但会提高读取速度更好的。

通过写入配置有 ext2 文件系统的分区，可以提高写入速度。

但是，除非您使用大型数据集和多个缓存文件，否则没有真正的理由去进行那种优化程度，将 json 作为字符串写入文件，然后将其读回对您来说应该已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:43:13.193

您不应该只为一个应用程序缓存内容而生成 XML 文件。它是生成和解析 XML 的开销，并且需要更多的字节。

生成 PHP 文件是有效的，但它存在一些问题： - 可能的解析错误 - 可以缓存数据两次（OS 的文件系统缓存 + PHP-操作码缓存）

我更喜欢将缓存文件写为简单的序列化 PHP 数据，因为它具有低解析语义并且非常有效。您还可以通过使用 igbinary 或 mgspack 等二进制序列化程序来加速它。

Btw: If you cache data from a remote service on different web-node I would recommend you to use a caching server like memcached ;)

# dynamics-crm-2011 - CRM 2011 异步服务崩溃

> ID：12726902
> 
> 赞同：0
> 
> 时间：2012-10-04T12:05:07.927
> 
> 标签：dynamics-crm-2011

我们有一个 crm 2011 本地安装，我们使用自定义插件运行良好，这些插件可以发送短信等......但是在几周前部署之后......我们遇到了一个问题。我已经删除了所有等待或挂起的工作流，并创建了一个临时工作流，它只更改实体的名称并在实体上按需运行。用于测试目的的非常基本的工作流程。然而，它现在完全崩溃了异步服务。没有其他工作流程等待运行，我对这个问题感到困惑。这是事件日志应用程序错误。任何帮助将尽快不胜感激

> 主机 SERERNAME：监视异步操作队列时失败。异常：System.MissingMethodException：找不到方法：'无效 Microsoft.Crm.BusinessEntities.BusinessEntityMoniker..ctor（System.Guid，System.String，Microsoft.Crm.IOrganizationContext）'。在 Microsoft.Crm.Caching.StepDescriptionLoader.LoadCacheData（Guid 键，ExecutionContext 上下文） 在 Microsoft.Crm.Caching.ObjectModelCacheLoader`2.LoadCacheData(TKey key, IOrganizationContext context) at Microsoft.Crm.Caching.CrmMultiOrgCache`2.CreateEntry(TKey key, IOrganizationContext context) 在 Microsoft.Crm.Caching.CrmSharedMultiOrgCache`2.LookupEntry(TKey key, IOrganizationContext context) 在 Microsoft.Crm.Asynchronous.EventOperation.GetPluginAssembly(AsyncExecutionContext context) 在 Microsoft.Crm.Asynchronous。 Microsoft.Crm.Asynchronous.QueueManager.PoolHandler.ProcessAsyncEvent(AsyncEvent asyncEvent) 在 Microsoft.Crm.Asynchronous.QueueManager.PoolHandler.InvokeHandlerInPool(对象状态）在 System.Threading.ExecutionContext.runTryCode(Object userData) 在 System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode 代码，CleanupCode backoutCode，对象 userData) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.QueueUserWorkItemCallback.System.Threading.IThreadPoolWorkItem.ExecuteWorkItem() 在 System.Threading.ThreadPoolWorkQueue.Dispatch()在 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:28:33.843

一个快速的谷歌建议这可能是应用汇总后的一个错误。看起来它正在尝试引用您没有的 dll 上的函数。

我会建议。

*   应用最新的 CRM 汇总。
*   执行 CRM 的修复安装。
*   尝试按照这些链接中的说明进行操作：[安装 CRM 2011 汇总 4 后出现问题](http://social.microsoft.com/Forums/en-US/crmdeployment/thread/fec8ca29-25c1-4332-bff5-85c40da2ac8a)，[CRM 2011 更新汇总 10 后无法访问组织？](http://www.powerobjects.com/blog/2012/09/24/crm-2011-update-rollup-10-error-fix/)

# playframework - 在 play framework 2 中从数据库生成实体类

> ID：12726907
> 
> 赞同：4
> 
> 时间：2012-10-04T12:05:21.647
> 
> 标签：playframework, playframework-2.0

我是玩框架 2.0.3 的新手，试图为数据库表生成实体类。我阅读了 play 2.0 文档，他们提到了 Ebean 来创建实体类。我没明白。我也研究了本教程。[https://github.com/playframework/Play20/wiki/JavaEbean](https://github.com/playframework/Play20/wiki/JavaEbean)

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:27:23.983

据我了解，您有现有的数据库结构，您想为它们生成模型？

不幸的是，这恰好在第二个方向上起作用：您需要创建这些类，然后如果您启用了自动更新，Ebean 将基于这些类创建新的 DDL 作为新的进化，然后会要求您确认进化的应用在下一个页面刷新。

当然，如果没有对 DB 进行更改，则不需要执行进化，只需添加所需的类。

将它们放入`/app/models`包中，查看文档（您指出）以及 Java 示例它的行为方式，即：`app/models/SomeModel.java`将创建`some_model`表（如果您不使用注释覆盖它）

而且...要小心，**具有自动生成进化的 Ebean 插件会破坏整个数据库**并从头开始重建它，因此在生产中使用它很危险，在这种情况下，您必须切换到手动编写的进化。

# ruby-on-rails - 获取要存储在 table / Rails 中的 HTML 元素的 ID

> ID：12726911
> 
> 赞同：0
> 
> 时间：2012-10-04T12:05:25.440
> 
> 标签：ruby-on-rails, ruby

我正在 Rails 中构建一个应用程序，允许用户上传照片，然后选择最终将使用 Paperclip 合成到其上的四个叠加层之一。

我是 Rails 的新手，我无法弄清楚如何提取 HTML 元素的 ID 并将其存储在我的数据库中 - 我有以下代码：

```
<div>  
 <span id="overlay"></span>
</div>

<div id="overlay-select">
  <ul>
    <li><a href="#"><img id="overlay1" src="<%= asset_path '/assets/overlays/pink1.png' %>" /></a></li>
    <li><a href="#"><img id="overlay2" src="<%= asset_path '/assets/overlays/green1.png' %>" /></a></li>
    <li><a href="#"><img id="overlay3" src="<%= asset_path '/assets/overlays/blue1.png' %>" /></a></li>
    <li><a href="#"><img id="overlay4" src="<%= asset_path '/assets/overlays/orange1.png' %>" /></a></li>
  </ul>
</div> 
```

发生的情况是用户单击#overlay1 - 4，然后将 img 克隆并插入到 #overlay 跨度中。当用户保存条目时，我需要能够获取 #overlay 中存在的任何 img 的 ID，我一直在寻找解决方案，因为我不知道从哪里开始，但到目前为止还不够——任何帮助都会不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:26:47.000

在这里，您面临两个问题。您不能只克隆图像，因为您在这些图像上使用了 id。ID 必须是唯一的。如果你只是克隆图像，你可能会遇到各种 js 问题，元素定位失败等等。话虽如此，您可以通过使用数据属性来解决这个问题。示例如下。

**除了 id 之外，您的 html 将保持相似。**

```
<div>  
 <span id="overlay"></span>
</div>

<div id="overlay-select">
  <ul>
    <li><a href="#"><img data-overlayid="overlay1" src="<%= asset_path '/assets/overlays/pink1.png' %>" /></a></li>
    <li><a href="#"><img data-overlayid="overlay2" src="<%= asset_path '/assets/overlays/green1.png' %>" /></a></li>
    <li><a href="#"><img data-overlayid="overlay3" src="<%= asset_path '/assets/overlays/blue1.png' %>" /></a></li>
    <li><a href="#"><img data-overlayid="overlay4" src="<%= asset_path '/assets/overlays/orange1.png' %>" /></a></li>
  </ul>
</div> 
```

你的js会。建议为此使用javascript。此外，您将需要使用 ajax 将其实际发送到服务器，除非您打算使用 post 或 get 方法来执行此操作。

```
function getImgId(){

    //Data for span
    var overlaySpan = document.getElementById('overlay'),
        imgs = overlaySpan.getElementsByTagName('img'),
        imgsLn = imgs.length,
        relevantSrc,//filled with relevant image source
        relevantID;//filled with id of elem

    if(imgLn > 0){//If there are any images
        relevantSrc = imgs[0].src;

        //Data for imagelist.
        var overlaySelector = document.getElementById('overlay-select'),
            overlayImgItems = overlaySelector.getElementsByTagName('img');//Would be most efficient to use query selector but then browser support would be sacrificed

        for(var i=0;i<overlayImgItems.length;i++){
            var imgItem = overlayImgItems[i];
            if(imgItem.src === relevantSrc){
            relevantID = imgItem.getAttribute('data-overlayid');
            break;
        }
    }
    return relevantID;
} 
```

# objective-c - 没有在目标 C 中正确绘制我的网格

> ID：12726915
> 
> 赞同：0
> 
> 时间：2012-10-04T12:05:41.427
> 
> 标签：objective-c, ios, core-data, grid

我在计算模块时遇到问题。我正在做以下事情。

```
- (void)makeGrid:withData:(NSDictionary * )data
{
    NSLog(@"aantal is: %d",[data count]);

    int xStart = 0;
    int yStart = 0;
    int xCurrent = xStart;
    int yCurrent = yStart;

    int xStepSize = 165;
    int yStepSize = 251;

    int xCnt =  3  ;
    int yCnt = [data count] % 3;

    int cellCounter = 0;

    UIView * gridContainerView = [[UIView alloc] init];
    [keeperView addSubview:gridContainerView];

    for (int y = 0; y < yCnt; y++) {
        for (int x = 0; x < xCnt; x++) {
            printf("xCurrent %d  yCurrent %d \n", xCurrent, yCurrent);
            NSString *url1 = @"player_imgUrl";
            NSString *url2 = [NSString stringWithFormat:@"%i", x];

            NSString *url3 = [url1 stringByAppendingString:url2];
            NSData* imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[data objectForKey:url3]]];
            UIImage* myImage = [[UIImage alloc] initWithData:imageData];

            UIImageView * myView = [[UIImageView  alloc] initWithImage:myImage];
            CGRect rect = myView.frame;
            rect.origin.x = xCurrent;
            rect.origin.y = yCurrent;
            myView.frame = rect;
            myView.tag = cellCounter;
            [gridContainerView addSubview:myView];

            //just label stuff
            UILabel * myLabel = [[UILabel alloc] init];

            [gridContainerView addSubview:myLabel];
            //--------------------------------

            xCurrent += xStepSize;
            cellCounter++;
        }

        xCurrent = xStart;
        yCurrent += yStepSize;
    }

    CGRect repositionRect = gridContainerView.frame;
    repositionRect.origin.y = 100;
    gridContainerView.frame = repositionRect;

} 
```

我的 NSLog 说在我的数据对象中有 16 个值。当我运行它时，它只显示 3 个图像视图。有人知道我做错了什么吗？

请帮忙，

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:42:35.953

阅读您的代码后，图像视图的数量应为 (xCnt * yCnt)。

你的问题在这里：

int yCnt = [数据计数] % 3;

当您的数据为 16 时，yCnt 为 1，这就是为什么您的结果仅为 3 个图像视图。

要克服此问题，您应该执行以下操作：

```
yCnt = (data.count / xCnt) + 1;

for (int y = 0 ; y < yCnt; y++)
{
    for (int x = 0; x < xCnt; x++)
    {
        if ((y == (yCnt - 1)) && (x > (data.count % xCnt)))
        {
            break;
        }
        else {
            // Your Grid code here
        }
    }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:43:48.530

```
int yCnt = [data count] % 3; 
```

当 [data count] == 16 时给出 1；

# mysql - 从表a中选择，其中a的值在表b mysql上

> ID：12726919
> 
> 赞同：0
> 
> 时间：2012-10-04T12:06:08.473
> 
> 标签：mysql, select, join

表一：

```
field1 field2
x1     x1 
```

表 b：

```
field 1
x1 
```

如何在表 b 上选择字段 1 = 表 a 的字段 1？

如果表 b 的名称是表 a 的 field1，当所选表为 a.field1 时执行连接的语法是什么

这是我正在使用的实际查询：

```
mysql_query("SELECT * FROM tags WHERE id3='$value' AND flag!='w' AND visibility='t' JOIN tags.albumid WHERE photoid=tags.photoid AND visibility!='d' ORDER BY datetimep DESC LIMIT 200"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T12:11:42.807

根据您的任务的复杂程度，您可以简单地连接具有相同值的行：

```
Select * from a, b where a.field1 = b.field2 
```

或使用连接：

```
select a.* 
from Tableb b
join Tablea a
on a.field1=b.field1 
```

在第一种情况下，如果要避免包含相同数据的多行，则可能必须再次使用`Distinct`关键字进行过滤

至于连接，有不同的类型。请参阅 eggyal 的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:07:39.100

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

```
SELECT * FROM tablea JOIN tableb USING (field1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:08:09.490

```
select a.* 
from Tableb b
join Tablea a
on a.field1=b.field1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T12:08:17.567

假设要加入的字段名在两个表中相同：

```
SELECT fieldx, fieldy FROM table_1 NATURAL JOIN table_b 
```

如果要加入的字段名不相同 - 或者您想要明确，因为您可能有其他同名的字段名 - 您必须通过`JOIN .. ON`or`JOIN .. USING`指令指定这些。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T12:08:32.363

```
select a.field1, a.field2 from table a, table b
where a.field1=b.field1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T12:09:14.403

```
select * from table_a join table_b
USING (field1) 
```

参考这个：**[MySql Join](http://dev.mysql.com/doc/refman/5.0/en/join.html)**

# c# - 无论如何，如果我通过 C# 中的表单设计器编辑表单，是否禁止删除我在 Form1.Designer.cs 中所做的更改？

> ID：12726923
> 
> 赞同：3
> 
> 时间：2012-10-04T12:06:20.210
> 
> 标签：c#, visual-studio-2010, express, windows-forms-designer

这是一个可悲的问题......
我在那里添加了很多检查，例如：

```
System.Windows.Forms.TreeNode treeNode1 = new System.Windows.Forms.TreeNode("Profiles"); 
```

替换为：

```
#if DEMO
   System.Windows.Forms.TreeNode treeNode1 = new System.Windows.Forms.TreeNode("Lines");
#else
   System.Windows.Forms.TreeNode treeNode1 = new System.Windows.Forms.TreeNode("Profiles");
#endif 
```

但是，一旦我将事件处理程序添加到表单事件之一，我的所有检查都消失了 -_-
我能做些什么来保留这些但能够通过设计器更改表单？

我使用 VC# Express 2010

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:11:09.337

该`.designer.cs`文件的重点是*每次*您进行设计器更改时都会重新生成它。

如您所见，不应编辑生成的文件，因为它们会重新生成，并且您所做的任何更改都将丢失。

在类构造函数中进行这些更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:16:05.510

您正在修改设计器中的代码。为了能够生成预览，禁止在自动生成的部分编写任何圈复杂度高于 1 的代码。这意味着没有 if、循环或方法调用。

相反，您应该在 InitializeComponents() 之后的其他地方进行这些更改！当用控制元素填充数组时（以便稍后访问它们），我通常会创建一个单独的方法 InitializeDynamic()。

注意：您可以在设计器部分更改代码，只有那些可以直接在设计中修改的代码（因此您可以在设计器本身中完成）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T12:12:57.020

不，Desinger 文件是为 VS 设计器准备的，可以随意重新生成...

您可以通过向类构造函数添加代码来实现您想要的：

```
 public Form1()
    {
        InitializeComponent();
        #if DEMO
           var changeNodes = treeView1.Nodes.Find("Profiles", true);
           if (changeNodes.Length>0)
           {
               foreach(TreeNode node in changeNodes)
               {
                    node.Name = "Lines";
                    node.Text = "Lines text";
                    // add/set whatever else you need in demo mode
               }
           }
           // or remove all nodes and add new ones
        #endif 
    } 
```

# c++ - Mac OS X 上的 iconv 库：奇怪的行为

> ID：12726924
> 
> 赞同：0
> 
> 时间：2012-10-04T12:06:30.543
> 
> 标签：c++, xcode, macos, iconv

我正在将应用程序从 CentOS 6 移植到 Mac OS X。它依赖于 iconv 并在 CentOS 中正常工作。但是，在 Mac OS X 上却没有。我看到以下行为：

```
const char *codePages[] = { "MAC", "LATIN1", "ISO_8859-1", "WINDOWS-1252", "ASCII" };
int codePagesCount = 5;
iconv_t converter1 = iconv_open("UTF-32", codePages[0]);// Works
if(converter1 != (iconv_t)-1)
   iconv_close(converter1);
iconv_t converter2 = iconv_open("UTF−32", "MAC");// Fails, returns -1
if(converter2 != (iconv_t)-1)
   iconv_close(converter2); 
```

这段代码看起来很简单：第一个 iconv_open 创建转换器并从 codePages 数组获取代码页名称，它的零元素是 MAC，所以对我来说 Mac OS X 必须支持从它自己的代码页到 Unicode 的转换是合乎逻辑的。第一次调用 iconv_open 有效。但是，对 iconv_open 的第二次调用也是如此。它还创建了从 Mac 编码到 Unicode 的转换器。并且由于任何原因它失败并返回-1。当调用具有相同参数的相同函数（一个是硬编码数组的元素，另一个是硬编码字符串）导致第一次调用正常功能而第二次调用失败时，这种情况的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:11:39.560

第二个“UTF-32”与第一个不同：第一个使用普通减号，而第二个使用 endash 我猜。

# java - 使用 httpclient 4.2.1 进行 NTLM 身份验证

> ID：12726929
> 
> 赞同：3
> 
> 时间：2012-10-04T12:07:02.023
> 
> 标签：java, ntlm, apache-httpclient-4.x

我需要对需要 NTLM 身份验证的 URL 执行 HTTP GET。我可以在 MacBook Pro 上使用 Firefox 或 Chrome 访问该 URL。浏览器要求输入用户名/密码组合并且它可以工作。我现在正在尝试使用 HttpClient 从 Groovy 做同样的事情。我遵循了[NTLM 支持指南](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)，但我总是得到`401 Unauthorized`回报。回复中还有这句话：

> 您无权使用您提供的凭据查看此目录或页面，因为您的 Web 浏览器正在发送 Web 服务器未配置为接受的 WWW-Authenticate 标头字段。

我在这段代码中尝试了服务器名和域的各种组合（远程 windows pc 不在域上），但我总是得到相同的响应。

```
httpclient.getCredentialsProvider().setCredentials(
new AuthScope("myserver", -1), 
new NTCredentials("username", "password", "MYSERVER", "MYDOMAIN")); 
```

有人遇到同样的问题并设法解决了吗？请注意，这是一个在后台使用 IIS 的外部程序，所以我认为我不能在那里更改任何设置。

编辑：

与我所说的不同，我设法将 IIS 中的安全设置更改为接受 BASIC 身份验证，所以我不再遇到问题了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:22:55.900

编辑：

根据我设置 Kerberos 或 NTLM（两者都是单点登录）的经验，当您已经登录到系统时，您根本不必输入用户名/密码。

我很确定当浏览器询问用户名/密码组合时，这根本不是 NTLM 身份验证。服务器端应用程序很可能具有 HTTP Basic Digest 的后备方案（这就是它显示用户名/密码组合的原因）。使用 NTLM，您根本无需输入用户名/密码（主体/凭据），因为服务器将通过浏览器、操作系统、服务器和 Active Directory 服务器之间的协商机制识别您的身份。

如果您的 MacBook Pro 在 OS/X 上运行，您还需要将您的 OS/X 添加到域中。您的服务器还需要位于添加客户端 OS/X 的同一域中。这可能不是一件小事。可能需要一些外部工具/驱动程序。[这个](http://4sysops.com/archives/how-to-join-a-mac-os-x-computer-to-active-directory/)可能是一个很好的候选人（但我没有尝试过）。

NTLM 需要两个客户端都是与服务器相同的域的成员，因此两者都需要在 Active Directory 域中注册。如果您的服务器不在域中，那将是另一组问题。

为了让您的浏览器与 NTLM 一起工作，您需要安装插件 (ntlmauth-plugin?)。但我还没有在 MacOS/X 上尝试过。即使在 Windows 中，您仍然需要一个插件才能使用 NTLM 成功运行 Firefox。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T21:05:16.943

HttpClient 对我不起作用，但最后下面的代码起作用了。参考 - [http://docs.oracle.com/javase/7/docs/technotes/guides/net/http-auth.html](http://docs.oracle.com/javase/7/docs/technotes/guides/net/http-auth.html)

快速参考 -

```
public static String getResponse(String url, String userName, String password) throws IOException {
Authenticator.setDefault(new Authenticator() {
  @Override
  public PasswordAuthentication getPasswordAuthentication() {
    System.out.println(getRequestingScheme() + " authentication");
    return new PasswordAuthentication(userName, password.toCharArray());
  }
});

URL urlRequest = new URL(url);
HttpURLConnection conn = (HttpURLConnection) urlRequest.openConnection();
conn.setDoOutput(true);
conn.setDoInput(true);
conn.setRequestMethod("GET");

StringBuilder response = new StringBuilder();
InputStream stream = conn.getInputStream();
BufferedReader in = new BufferedReader(new InputStreamReader(stream));
String str = "";
while ((str = in.readLine()) != null) {
  response.append(str);
}
in.close();

return response.toString(); 
```

}

# facebook - Facebook Graph Api - 向页面添加新标签不起作用

> ID：12726931
> 
> 赞同：0
> 
> 时间：2012-10-04T12:07:03.730
> 
> 标签：facebook, facebook-graph-api

在 Facebook graph api explorer 中，我正在尝试根据[文档](http://developers.facebook.com/docs/reference/api/page/)向粉丝页面添加一个新选项卡。

因此，我使用查询时获得的页面访问令牌对字段和我的应用程序 ID 作为值进行**POST**。访问令牌包括 manage_pages 权限。`/pageId/tabs``app_id``userId/accounts`

我得到了`true`应该意味着创建成功的结果。但是，如果我在新创建的选项卡上运行**GET**`pageId/tabs` ，则无处可寻。

我错过了什么吗？如果它说“真”，它不应该创建标签吗？有没有人这样做，可以告诉我它是如何为你工作的？

谢谢！

* * *

我创建了一个[特定的错误报告](http://developers.facebook.com/bugs/112072492280752?browse=search_50751b165758d1233391458)

而[这个](http://developers.facebook.com/bugs/194192344040832?browse=search_50751aa36f8507706673949)似乎是相关的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:33:42.403

哇，这是一个完美的例子，说明有意义的错误消息或在这种情况下任何错误消息是多么重要。亲爱的 Facebook API 开发人员，请采取行动，这只是许多不一致的例子之一！

错误消息应该告诉我的是“**此应用程序并非旨在添加为选项卡**”（顺便说一句，尝试添加它时出现错误消息

```
http://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL 
```

因为当我将应用设置设置为“标签”而不是“Facebook 上的应用”时，一切正常！叹！诚然，我最初本可以做到这一点，但谁是万无一失的？！

`true`如果请求失败，Graph API 调用根本不应该返回！

# javascript - 使用 javascript 重置单选按钮列表

> ID：12726933
> 
> 赞同：1
> 
> 时间：2012-10-04T12:07:08.030
> 
> 标签：javascript, jquery, .net

我创建了一个自定义控件，它具有多种类型的控件，例如单选按钮列表、下拉列表、文本框等。我正在使用控件状态来保存值。我正在使用 jQuery 重置自定义控件中所有控件的值，但新值不会传输到控件。

我正在调用以下函数来重置自定义控件中的控件，但是当我在单击按钮时保存内容时，控件的值没有得到更新。

```
function ResetControls() {
    $('div[id$=test]').each(function () {
        $(this).find('table').each(function () {
            if ($(this).attr("id").indexOf("_ph_Test1") > 0) {
                $(this).find('tr').each(function () {
                    $(this).find('input[type=radio]').each(function () {
                        $(this).removeAttr('checked');
                        $(this).change();
                    });
                    $(this).find('textarea').each(function () {
                        $(this).val('');
                        $(this).change();
                    });
                    $(this).find('select').each(function () {
                        $(this).val('');
                        $(this).change();
                    });
                    if (!$(this).is(':first-child')) {
                        $(this).hide();
                    }
                });
            }
        });
    });
} 
```

我们如何使用 javascript 或 jQuery 更新控件的控件状态？

# java - 如何通过 stAX 或 SAX 从 xml 字符串中获取特定事件/属性内容

> ID：12726941
> 
> 赞同：1
> 
> 时间：2012-10-04T12:07:17.730
> 
> 标签：java, xml, parsing, sax, stax

我有一个作为字符串接收的 xml POST 响应。我需要特定“pnr”的内容（参见 xml）将其传递给另一个 GET 请求。我正在尝试 sax 和 stAX 来实现这一点，但失败得很惨。我使用了 getElementsByTagName 和 getAttribute，但不行……这是我的代码，后来是我收到的 xml 字符串。

任何形式的帮助都将是一份礼物

```
package rest;
import javax.xml.parsers.*;
import org.xml.sax.InputSource;
import org.w3c.dom.*;
import java.io.*;

public class ParseXMLString {

  public static void main(String arg[]) {
    String outputString =  RESTClient.postConfirm(); // this is the xml string response I am getting

    try {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(outputString));

        Document doc = db.parse(is);
        String Parentnode = doc.getDocumentElement().getAttribute("pnr");       
//           Element element = (Element) Parentnode.;
//           NodeList name = element.getElementsByTagName("pnr");
//           Element line = (Element) name.item(0);
           //String IDList = getCharacterDataFromElement(line);   
           System.out.println(Parentnode);
    }
    catch (Exception e) {
        e.printStackTrace();
    }
  }

  public static String getCharacterDataFromElement(Element e) {
    Node child = e.getFirstChild();
    if (child instanceof CharacterData) {
       CharacterData cd = (CharacterData) child;
       return cd.getData();
    }
    return "?";
  }
} 
```

这是我收到的 XML 字符串：

```
<?xml version="1.0" encoding="UTF-8"?><Ticket><bookedSeats>3</bookedSeats><bpAddress>Anand Rao Circle</bpAddress><bpLandMark>ganesha temple</bpLandMark><bpLocation> Ghousia College</bpLocation><bpPhoneNo>98798679769</bpPhoneNo><bpTime>1200</bpTime><busServiceName>efdf</busServiceName><busType>Volvo A/C Semi Sleeper (2+2)</busType><commission>66.19</commission><dateOfJourney>2012-10-05</dateOfJourney><destination>Chennai</destination><fare>600.0</fare><issueTime>2012-10-04T15:46:45.073+05:30</issueTime><noOfSeats>1</noOfSeats><passengerMobile>1234567890</passengerMobile><passengerName>Test</passengerName><pnr>RATPKES44974756</pnr><seatDetails><seatDetail><commission>66.19</commission><fare>600.0</fare><gender>MALE</gender><passengerAge>0</passengerAge><passengerMobile>1234567890</passengerMobile><passengerName>Test</passengerName><prime>false</prime><seatName>3</seatName></seatDetail></seatDetails><source>Bangalore</source><status>BOOKED</status><travelsName>Rajratan Travels</travelsName></Ticket> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:47:56.257

这段代码将为您提供 pnr ：

```
 NodeList nodeLst = doc.getElementsByTagName("Ticket");
                 Node ticket = nodeLst.item(0);
                 NodeList attr = ticket.getChildNodes();
                 for (int i = 0; i < attr.getLength(); i++){
                     if (attr.item(i).getNodeName().equals("pnr"))
                         System.out.println(attr.item(i).getTextContent());
                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:02:06.340

如果我要解决这个问题，我可能会使用 XPath。但是由于您特别要求使用 StAX，所以这里有一个示例解析器（请注意，这只是帮助您入门的框架代码）。

```
import java.io.StringReader;
import java.util.Iterator;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;
import javax.xml.stream.XMLStreamReader;
import javax.xml.stream.events.Attribute;
import javax.xml.stream.events.Characters;
import javax.xml.stream.events.EndElement;
import javax.xml.stream.events.StartElement;
import javax.xml.stream.events.XMLEvent;

public class ParseXMLStringStAX {

    private static final String PNR = "pnr";

    private String characters;

    public String parse(String xmlString) throws XMLStreamException, Exception {
        XMLEventReader reader = null;
        try {
            if (xmlString == null || xmlString.isEmpty()) {
                throw new IllegalArgumentException("Illegal initializiation (xmlString is null or empty)");
            }
            StringReader stringReader = new StringReader(xmlString);
            XMLInputFactory inputFact = XMLInputFactory.newInstance();
            XMLStreamReader streamReader = inputFact.createXMLStreamReader(stringReader);
            reader = inputFact.createXMLEventReader(streamReader);

            while (reader.hasNext()) {
                XMLEvent event = reader.nextEvent();

                if (event.isCharacters()) {
                    characters(event);
                }
                if (event.isStartElement()) {
                    startElement(event);
                    // handle attributes
                    Iterator<Attribute> attributes = event.asStartElement().getAttributes();
                    while(attributes.hasNext()) {
                        attribute(attributes.next());
                    }
                }
                if (event.isEndElement()) {
                    // found what we want?
                    if (endElement(event)) {
                        endDocument(null);
                        break;
                    }
                }
                if (event.isStartDocument()) {
                    startDocument(event);
                }
                if (event.isEndDocument()) {
                    endDocument(event);
                }

            }
        } catch (XMLStreamException ex) {
            throw ex;
        } finally {
            try {
                if (reader != null) {
                    reader.close();
                }
            } catch (XMLStreamException ex) {
            }
        }
        return characters;
    }

    private void attribute(XMLEvent event) throws Exception {

    }

    private void characters(XMLEvent event) throws Exception {
        Characters asCharacters = event.asCharacters();
        if (asCharacters.isWhiteSpace())
            return;
        if (characters == null) {
            characters = asCharacters.getData();
        } else {
            characters += asCharacters.getData();
        }
    }

    private void startElement(XMLEvent event) throws Exception {
        StartElement startElement = event.asStartElement();
        String name = startElement.getName().getLocalPart();
        characters = null;
    }

    private boolean endElement(XMLEvent event) throws Exception {
        EndElement endElement = event.asEndElement();
        String name = endElement.getName().getLocalPart();
        if (PNR.equals(name)) {
            return true;
        }
        return false;
    }

    private void startDocument(XMLEvent event) {
        System.out.println("Parsing started");
    }

    private void endDocument(XMLEvent event) {
        System.out.println("Parsing ended");
    }

    public static void main(String[] argv) throws XMLStreamException, Exception {
        String xml = "";

        xml += "<Ticket>";
        xml += "    <bookedSeats>3</bookedSeats>";
        xml += "    <bpAddress>Anand Rao Circle</bpAddress>";
        xml += "    <bpLandMark>ganesha temple</bpLandMark>";
        xml += "    <bpLocation> Ghousia College</bpLocation>";
        xml += "    <bpPhoneNo>98798679769</bpPhoneNo>";
        xml += "    <bpTime>1200</bpTime>";
        xml += "    <busServiceName>efdf</busServiceName>";
        xml += "    <busType>Volvo A/C Semi Sleeper (2+2)</busType>";
        xml += "    <commission>66.19</commission>";
        xml += "    <dateOfJourney>2012-10-05</dateOfJourney>";
        xml += "    <destination>Chennai</destination>";
        xml += "    <fare>600.0</fare>";
        xml += "    <issueTime>2012-10-04T15:46:45.073+05:30</issueTime>";
        xml += "    <noOfSeats>1</noOfSeats>";
        xml += "    <passengerMobile>1234567890</passengerMobile>";
        xml += "    <passengerName>Test</passengerName>";
        xml += "    <pnr>RATPKES44974756</pnr>";
        xml += "    <seatDetails>";
        xml += "        <seatDetail>";
        xml += "            <commission>66.19</commission>";
        xml += "            <fare>600.0</fare>";
        xml += "            <gender>MALE</gender>";
        xml += "            <passengerAge>0</passengerAge>";
        xml += "            <passengerMobile>1234567890</passengerMobile>";
        xml += "            <passengerName>Test</passengerName>";
        xml += "            <prime>false</prime>";
        xml += "            <seatName>3</seatName>";
        xml += "        </seatDetail>";
        xml += "    </seatDetails>";
        xml += "    <source>Bangalore</source>";
        xml += "    <status>BOOKED</status>";
        xml += "    <travelsName>Rajratan Travels</travelsName>";
        xml += "</Ticket>";

        ParseXMLStringStAX parser = new ParseXMLStringStAX();
        String pnr = parser.parse(xml);
        System.out.println("--> Result: " + String.valueOf(pnr));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:16:08.110

`javax.xml.xpath`从 Java SE 5 开始，您可以使用 JDK/JRE 中的 API 来代替 SAX 或 StAX ：

**演示**

```
import java.io.StringReader;
import javax.xml.xpath.*;
import org.xml.sax.InputSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        String xml = "<?xml version='1.0' encoding='UTF-8'?><Ticket><bookedSeats>3</bookedSeats><bpAddress>Anand Rao Circle</bpAddress><bpLandMark>ganesha temple</bpLandMark><bpLocation> Ghousia College</bpLocation><bpPhoneNo>98798679769</bpPhoneNo><bpTime>1200</bpTime><busServiceName>efdf</busServiceName><busType>Volvo A/C Semi Sleeper (2+2)</busType><commission>66.19</commission><dateOfJourney>2012-10-05</dateOfJourney><destination>Chennai</destination><fare>600.0</fare><issueTime>2012-10-04T15:46:45.073+05:30</issueTime><noOfSeats>1</noOfSeats><passengerMobile>1234567890</passengerMobile><passengerName>Test</passengerName><pnr>RATPKES44974756</pnr><seatDetails><seatDetail><commission>66.19</commission><fare>600.0</fare><gender>MALE</gender><passengerAge>0</passengerAge><passengerMobile>1234567890</passengerMobile><passengerName>Test</passengerName><prime>false</prime><seatName>3</seatName></seatDetail></seatDetails><source>Bangalore</source><status>BOOKED</status><travelsName>Rajratan Travels</travelsName></Ticket>";

        XPathFactory xpf = XPathFactory.newInstance();
        XPath xpath = xpf.newXPath();

        InputSource inputSource = new InputSource(new StringReader(xml));
        String pnr = (String) xpath.evaluate("/Ticket/pnr", inputSource, XPathConstants.STRING);
        System.out.println(pnr);
    }

} 
```

**输出**

```
RATPKES44974756 
```

# c# - WinRT 多播套接字绑定到单个适配器

> ID：12726948
> 
> 赞同：1
> 
> 时间：2012-10-04T12:07:45.313
> 
> 标签：c#, .net, windows-runtime

我有一个用于发送和接收多播数据包的数据报套接字。使用时，它会在物理设备上的所有适配器上发送和接收数据。有没有办法指定使用哪个适配器而不是全部使用它们？

如果我绑定

```
await _datagramSocket.BindServiceNameAsync(ServicePort); 
```

然后使用所有适配器。如果我绑定

```
await _datagramSocket.BindEndpointAsync(new HostName(AdapterHostname), ServicePort); 
```

然后它抛出以下错误：“每个套接字地址（协议/网络地址/端口）通常只允许使用一次。（来自 HRESULT 的异常：0x80072740）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:22:29.647

通常套接字绑定在 IPADDRESS 和端口号上。当您尝试使用相同的端口号再次绑定它时，它将通过错误。您可以处理第一个连接（这可能需要一段时间，在两次调用之间使用一些睡眠），然后尝试再次绑定或使用不同的端口号。

# c# - 从 C# 调用的 TiffCP

> ID：12726950
> 
> 赞同：1
> 
> 时间：2012-10-04T12:07:48.313
> 
> 标签：c#, libtiff.net

我想使用 TiffCP 实用程序将多页 TIFF 拆分为单页 TIFF。

我通过循环浏览页面并调用以下代码来实现这一点：

```
 string[] Spltarguments =
     {
         @"c:\multipagetif.tif," + PageToProcess,
         @"c:\singlepage.tif"         
     };
 BitMiracle.TiffCP.Program.Main(Spltarguments); 
```

这行得通！

但是压缩是错误的。我需要它是LZW。

所以我注意到 TiffCP 有压缩选项。这让我觉得我可以简单地在单个 TIFF 上运行这个实用程序并传递 LZW 压缩。

使用以下命令从命令行对其进行了测试：

```
tiffcp -c lzw singlepage.tif compressed.tif 
```

这也有效！

但是我不能让它在我的 C# 应用程序中运行:-(

我尝试了以下代码的许多变体：

```
 string[] CompressArgs = 
     {
      "c lzw",
      singlepage.tif,
      compressed.tif
     };
 BitMiracle.TiffCP.Program.Main(CompressArgs); 
```

有没有人有任何想法 - 这让我发疯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T18:29:46.793

请尝试更改

```
string[] CompressArgs = 
{
    "c lzw",
    singlepage.tif,
    compressed.tif
};
BitMiracle.TiffCP.Program.Main(CompressArgs); 
```

至

```
string[] CompressArgs = 
{
    "-c",
    "lzw",
    "singlepage.tif",
    "compressed.tif"
};
BitMiracle.TiffCP.Program.Main(CompressArgs); 
```

这应该会有所帮助。

# java - java中的继续错误

> ID：12726951
> 
> 赞同：1
> 
> 时间：2012-10-04T12:08:01.747
> 
> 标签：java, user-input

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

在我的 Java 应用程序中。要接受挑战，请按 y，但程序不会继续。谁能帮我这个？

这是我的代码：

```
import java.util.Scanner;

    public class MainApp 
    {

        public static void main(String[] args)
        {
            Scanner scanner = new Scanner(System.in);
            System.out.println("Hello User");
            System.out.println("Please Enter your first name");
            String name;
            name =scanner.next();

        System.out.println("\n" + " Hello " + name + "how are you today?");
        String y="";
        y=scanner.next();

        System.out.println("\n" + " Well " +  name + " I am " + y + " Too." +"\n" + " I have a riddle for you " + name + ", wll you Attempt it?" + "\n" + " Type y for yes , or n for no");
        String v;
        v=scanner.next();

        if(v == "y")
            {
            System.out.println("\n" + "How much wood could a wood chuck chuck if a wood chuck could chuck wood? :) " );
            }

        else if(v == "n")
            {
            System.out.println("Ok then " + name + " suit youself, Goodbye! :) ");
            }
        else 
            { 
            System.out.println("Please pick y, or n , and make sure it is in lower case");
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:09:02.077

```
if(v == "y") 
```

您应该使用[`String.equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)来比较字符串。

所以条件的代码应该是这样的：

```
if ("y".equals(v)) //checking "y".equals() prevents null access if v is null 
```

* * *

**说明：**
正在`operator==`检查*身份*- 如果两个操作数是完全相同的对象。这不是您想要的，因为字符串很少出现这种情况。

`equals()`另一方面，该方法 - 检查两个对象是否相等*。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:09:34.793

使用`String.equals`而不是`==`运算符，因为被比较的 2 个对象不太可能`String`具有相同的对象引用（是相同的对象）。

```
if ("y".equals(v)) {
... 
```

或更好

```
if ("y".equalsIgnoreCase(v)) {
... 
```

# android - 如何在 Android 应用程序中显示动画 GIF 图像？

> ID：12726952
> 
> 赞同：32
> 
> 时间：2012-10-04T12:08:01.707
> 
> 标签：android, user-interface

我想在一个 android 应用程序中显示一个动画 GIF 图像，如下图所示。我试过webview，但没有成功。如何在应用程序中显示动画 gif？![在此处输入图像描述](../Images/e4f4fc121b4c53fa4c21228b499eed28.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-05-16T16:15:31.943

您还可以使用此库轻松支持[gifDrawable](https://github.com/koral--/android-gif-drawable)。

只需使用 GifImageView 而不是普通的 ImageView：

```
<pl.droidsonroids.gif.GifImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/your_anim"/> 
```

并在 src attr 下找到您的 gif 文件。就这样！

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-07-30T13:14:15.487

您可以使用[滑翔](https://github.com/bumptech/glide)：

```
ImageView imageView = (ImageView) findViewById(R.id.imageView);
GlideDrawableImageViewTarget imageViewTarget = new GlideDrawableImageViewTarget(imageView);
Glide.with(this).load(R.raw.sample_gif).into(imageViewTarget); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-04T17:30:22.693

经过长时间的谷歌搜索，我知道没有对 GIF 图像的原生支持。在应用程序中显示动画 gif 没有适当的解决方案。您可以查看[此解决方案](https://stackoverflow.com/questions/9494413/play-downloaded-gif-image-in-android)

使动画 gif 在布局中播放。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-02T04:40:16.853

我尝试了很多库来使用 Animated gif 。但是每个图书馆都落后和不堪重负。但是现在，经过一两天的研究，我有了一个使用动画 gif 的想法，并且性能非常好，不滞后不压碎。

解决方案是使用`Glide`

请按照以下步骤操作。

在 xml 文件中。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#62b849"
    tools:context=".MainActivity">

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:id="@+id/splace_image_view"
        android:layout_centerInParent="true"/>

</RelativeLayout> 
```

在你的`java`文件中

```
 ImageView imageView = findViewById(R.id.splace_image_view);

Glide
        .with(this)
        .load(R.drawable.football)
        .into(imageView); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-11T10:05:42.353

在 Android 中显示 GIF 图像的最佳和最简单的解决方案，它将完美运行：

*   打开 build.gradle（模块：app）
*   放入依赖项： compile 'pl.droidsonroids.gif:android-gif-drawable:1.1.+'
*   打开布局文件夹并将此代码放在要显示 GIF 图像的位置：例如 activity_main.xml

    ```
     <pl.droidsonroids.gif.GifImageView
          android:layout_width="150dp"
          android:layout_height="wrap_content"
          android:src="@drawable/your_gif_file_name"/> 
    ```

*   android:src="@drawable/your_gif_file_name", 将 'your_gif_file_name' 替换为你想要的 gif 图像文件

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-12-11T09:53:53.203

您不需要任何库，只需使用以下代码：

**第 1 步：** 创建一个名为 GIFView.java 的文件

```
package com.thigale.testproject;

/**
 * Created by Thigale Sameer on 11-12-16.
 */

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Movie;
import android.util.AttributeSet;
import android.view.View;

import java.io.InputStream;

public class GifView extends View {
public Movie mMovie;
public long movieStart;
private int gifId;

public GifView(Context context) {
    super(context);
}

public GifView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initializeView(attrs.getAttributeResourceValue("http://schemas.android.com/apk/res-auto", "src", 0));
}

public GifView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    initializeView(attrs.getAttributeResourceValue("http://schemas.android.com/apk/res-auto", "src", 0));
}

private void initializeView(final int id) {
    InputStream is = getContext().getResources().openRawResource(id);
    mMovie = Movie.decodeStream(is);
    this.gifId = id;
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(Color.TRANSPARENT);
    super.onDraw(canvas);
    long now = android.os.SystemClock.uptimeMillis();

    if (movieStart == 0) {
        movieStart = now;
    }

    if (mMovie != null) {
        int relTime = (int) ((now - movieStart) % mMovie.duration());
        mMovie.setTime(relTime);
        mMovie.draw(canvas, getWidth() - mMovie.width(), getHeight() - mMovie.height());
        this.invalidate();
    }
}

public void setGIFResource(int resId) {
    this.gifId = resId;
    initializeView(this.gifId);
}

public int getGIFResource() {
    return this.gifId;
}
} 
```

**第 2 步：** 在 res/attrs.xml 中添加以下行

```
<declare-styleable name="GIFView">
  <attr name="src" format="reference" />
</declare-styleable> 
```

**第 3 步：** 将此行添加到您的 AndroidManifest.xml 特定活动中

```
android:hardwareAccelerated="false" 
```

**第 4 步：** 在您的 XML 中创建此视图：

```
<com.thigale.testproject.GifView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    components:src="@drawable/loading" /> 
```

**步骤 5** 在您创建视图的父活动中，添加以下行：

```
xmlns:components="http://schemas.android.com/apk/res-auto" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-04T12:17:57.423

我也尝试过这样做，但 Android 不显示带有动画的 gif 图像。如果你想达到同样的效果，那么你需要拍摄几帧动画图像，然后逐帧使用动画。

您可以在下面的链接中参考。 [http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html](http://developer.android.com/reference/android/graphics/drawable/AnimationDrawable.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-01T08:49:45.910

试试这种方式：

```
 Movie movie,movie1;
    InputStream is=null,is1=null;
    long moviestart;
    long moviestart1;
    public GIFView(Context context) {
        super(context);
        is=context.getResources().openRawResource(R.drawable.hxps);
        is1=context.getResources().openRawResource(R.drawable.cartoon);
        movie=Movie.decodeStream(is);
        movie1=Movie.decodeStream(is1);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFCCCCCC);
        super.onDraw(canvas);
        long now=android.os.SystemClock.uptimeMillis();
        System.out.println("now="+now);
         if (moviestart == 0) {   // first time
             moviestart = now;

         }
         if(moviestart1==0)
         {
             moviestart1=now;
         }
         System.out.println("\tmoviestart="+moviestart);
         int relTime = (int)((now - moviestart) % movie.duration()) ;
         int relTime1=(int)((now - moviestart1)% movie1.duration());
         System.out.println("time="+relTime+"\treltime="+movie.duration());
         movie.setTime(relTime);
         movie1.setTime(relTime1);
         movie.draw(canvas,0,0);
         movie1.draw(canvas,10,300);
         this.invalidate();
    } 
```

![在此处输入图像描述](../Images/2a2d7f07e59c18196334566b27ef8598.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-01T08:59:01.690

你可以试试这个库[GifImageView](https://github.com/felipecsl/GifImageView)。它非常简单易用。以下示例代码来自该项目的 README。

> @Override protected void onCreate(final Bundle savedInstanceState) { super.onCreate(savedInstanceState);
> 
> ```
> gifView = new GifImageView(context);
> gifView.setBytes(bitmapData);
> setContentView(gifView); 
> ```
> 
> }
> 
> @Override protected void onStart() { super.onStart(); gifView.startAnimation(); }
> 
> @Override protected void onStop() { super.onStop(); gifView.stopAnimation(); }

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-16T20:11:08.750

**更新：**

[在android arsenal](https://android-arsenal.com/details/1/4947)和[GIFView](https://github.com/Gavras/GIFView)的 GitHub 页面中有一个最新版本。

这是当有人要求我帮助他展示 GIF 时我所做的一件小事。我在网上找到的大部分东西都是第三方库和解决方案，它们使用 UI 线程来处理在我的手机上运行不佳的 gif，所以我决定在 android 的 Movie API 的帮助下自己做。我特意让它扩展了 ImageView，这样我们就可以使用 scaleType 之类的属性。这支持从 url 或资产目录中检索 gif。我记录了一切。

**如何使用它：**

在 xml 布局文件中使用它的简单示例：

```
<[package].GIFView xmlns:gif_view="http://schemas.android.com/apk/res-auto"
        android:id="@+id/gif_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="center"
        gif_view:gif_src="asset:gif1" /> 
```

编码：

GIF.java：

```
/**
 * Class that represents a gif instance.
 */
public class GIF {

    private static final Bitmap.Config DEF_VAL_CONFIG = Bitmap.Config.RGB_565;

    private static final int DEF_VAL_DELAY_IN_MILLIS = 33;

    // the gif's frames are stored in a movie instance
    private Movie movie;

    // the canvas of this gif
    private Canvas canvas;

    // the bitmap of this gif
    private Bitmap bitmap;

    // the start time of the gif
    private long gifStartTime;

    // the executor of the gif's thread
    private ScheduledExecutorService executor;

    // the main runnable of the gif
    private Runnable mainRunnable;

    // delay in millis between frames
    private int delayInMillis;

    private OnFrameReadyListener onFrameReadyListener;

    private Handler listenerHandler;

    private Runnable listenerRunnable;

    /**
     * Creates Gif instance based on the passed InputStream.
     *
     * @param in the InputStream
     * @throws InputStreamIsNull                        if in is null
     * @throws InputStreamIsEmptyOrUnavailableException if in is empty or unavailable
     */
    public GIF(InputStream in) {
        this(in, DEF_VAL_CONFIG);
    }

    /**
     * Creates Gif instance based on the passed InputStream and the config.
     *
     * @param in     the InputStream
     * @param config the Config
     * @throws NullPointerException                     if config is null
     * @throws InputStreamIsNull                        if in is null
     * @throws InputStreamIsEmptyOrUnavailableException if in is empty or unavailable
     */
    public GIF(InputStream in, Bitmap.Config config) {
        if (in == null)
            throw new InputStreamIsNull("the input stream is null");

        this.movie = Movie.decodeStream(in);

        if (movie == null)
            throw new InputStreamIsEmptyOrUnavailableException("the input steam is empty or unavailable");

        this.bitmap = Bitmap.createBitmap(movie.width(), movie.height(), config);

        // associates the canvas with the bitmap
        this.canvas = new Canvas(bitmap);

        this.mainRunnable = new Runnable() {
            @Override
            public void run() {
                draw();
                invokeListener();
            }
        };

        setDelayInMillis(DEF_VAL_DELAY_IN_MILLIS);
    }

    /**
     * Register a callback to be invoked when the gif changed a frame.
     * Invokes methods from a special thread.
     *
     * @param onFrameReadyListener the listener to attach
     */
    public void setOnFrameReadyListener(OnFrameReadyListener onFrameReadyListener) {
        setOnFrameReadyListener(onFrameReadyListener, null);
    }

    /**
     * Register a callback to be invoked when the gif changed a frame.
     * Invokes methods from the specified handler.
     *
     * @param onFrameReadyListener the listener to attach
     * @param handler              the handler
     */
    public void setOnFrameReadyListener(OnFrameReadyListener onFrameReadyListener, Handler handler) {
        this.onFrameReadyListener = onFrameReadyListener;
        listenerHandler = handler;

        if (listenerHandler != null)
            listenerRunnable = new Runnable() {
                @Override
                public void run() {
                    GIF.this.onFrameReadyListener.onFrameReady(bitmap);
                }
            };

        else
            listenerRunnable = null;
    }

    /**
     * Sets the delay in millis between every calculation of the next frame to be set.
     *
     * @param delayInMillis the delay in millis
     * @throws IllegalArgumentException if delayInMillis is non-positive
     */
    public void setDelayInMillis(int delayInMillis) {
        if (delayInMillis <= 0)
            throw new IllegalArgumentException("delayInMillis must be positive");

        this.delayInMillis = delayInMillis;
    }

    /**
     * Starts the gif.
     * If the gif is already running does nothing.
     */
    public void startGif() {
        if (executor != null)
            return;

        executor = Executors.newSingleThreadScheduledExecutor();

        final int INITIAL_DELAY = 0;
        executor.scheduleWithFixedDelay(mainRunnable, INITIAL_DELAY,
                delayInMillis, TimeUnit.MILLISECONDS);
    }

    /**
     * Stops the gif.
     * If the gif is not running does nothing.
     */
    public void stopGif() {
        if (executor == null)
            return;

        executor.shutdown();

        // waits until the thread is finished
        while (true) {
            try {
                executor.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
                break;
            } catch (InterruptedException ignored) {
            }
        }

        executor = null;
    }

    // calculates the frame and draws it to the bitmap through the canvas
    private void draw() {
        // if gifStartTime == 0 inits it for the first time
        if (gifStartTime == 0)
            gifStartTime = SystemClock.uptimeMillis();

        long timeElapsed = SystemClock.uptimeMillis() - gifStartTime;

        int timeInGif = (int) (timeElapsed % movie.duration());
        movie.setTime(timeInGif);

        movie.draw(canvas, 0, 0);
    }

    // invokes the listener
    private void invokeListener() {
        if (onFrameReadyListener == null)
            return;

        // if handler was given invokes from it, otherwise invokes from this thread
        if (listenerHandler != null)
            listenerHandler.post(listenerRunnable);
        else
            onFrameReadyListener.onFrameReady(bitmap);
    }

    /**
     * Interface definition for a callback to be invoked when the gif changed a frame.
     */
    public interface OnFrameReadyListener {
        /**
         * Called when the gif changed a frame.
         * <p>
         * Note: If a handler was given with the listener this method
         * invokes from the handler, otherwise this method
         * invokes from a special thread.
         * <p>
         * Note: This bitmap is mutable and used by the gif instance
         * thus it is not recommended to mutate it.
         *
         * @param bitmap the new bitmap of the gif
         */
        void onFrameReady(Bitmap bitmap);
    }

    /**
     * Definition of a runtime exception class to throw when the inputStream is null.
     */
    public static class InputStreamIsNull extends NullPointerException {

        /**
         * Creates a new instance.
         */
        public InputStreamIsNull() {
            super();
        }

        /**
         * * Creates a new instance with a message.
         *
         * @param message the message
         */
        public InputStreamIsNull(String message) {
            super(message);
        }
    }

    /**
     * Definition of a runtime exception class to throw when the inputStream is empty or unavailable.
     */
    public static class InputStreamIsEmptyOrUnavailableException extends RuntimeException {

        /**
         * Creates a new instance.
         */
        public InputStreamIsEmptyOrUnavailableException() {
            super();
        }

        /**
         * * Creates a new instance with a message.
         *
         * @param message the message
         */
        public InputStreamIsEmptyOrUnavailableException(String message) {
            super(message);
        }
    }
} 
```

GIFView.java：

```
/**
 * A view that can show gifs.
 * <p>
 * XML Attributes:
 * <p>
 * gif_src:
 * A string that represents the gif's source.
 * <p>
 * - If you want to get the gif from a url
 * concatenate the string "url:" with the full url.
 * <p>
 * - if you want to get the gif from the assets directory
 * concatenate the string "asset:" with the full path of the gif
 * within the assets directory. You can exclude the .gif extension.
 * <p>
 * for example if you have a gif in the path "assets/ex_dir/ex_gif.gif"
 * the string should be: "asset:ex_dir/ex_gif"
 * <p>
 * delay_in_millis:
 * A positive integer that represents how many milliseconds
 * should pass between every calculation of the next frame to be set.
 */
public class GIFView extends ImageView {

    public static final String RESOURCE_PREFIX_URL = "url:";
    public static final String RESOURCE_PREFIX_ASSET = "asset:";

    private static final int DEF_VAL_DELAY_IN_MILLIS = 33;

    // the gif instance
    private GIF gif;

    // keeps track if the view is in the middle of setting the gif
    private boolean settingGif;

    private GIF.OnFrameReadyListener gifOnFrameReadyListener;

    private OnSettingGifListener onSettingGifListener;

    // delay in millis between frames
    private int delayInMillis;

    /**
     * Creates a new instance in the passed context.
     *
     * @param context the context
     */
    public GIFView(Context context) {
        super(context);
        init(null);
    }

    /**
     * Creates a new instance in the passed context with the specified set of attributes.
     *
     * @param context the context
     * @param attrs   the attributes
     */
    public GIFView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(attrs);
    }

    // inits the view
    private void init(AttributeSet attrs) {
        this.gifOnFrameReadyListener = new GIF.OnFrameReadyListener() {
            @Override
            public void onFrameReady(Bitmap bitmap) {
                setImageBitmap(bitmap);
            }
        };

        setDelayInMillis(DEF_VAL_DELAY_IN_MILLIS);

        if (attrs != null)
            initAttrs(attrs);
    }

    // inits the view with the specified attributes
    private void initAttrs(AttributeSet attrs) {
        TypedArray typedArray = getContext().getTheme().obtainStyledAttributes(
                attrs, R.styleable.gif_view,
                0, 0);
        try {
            // gets and sets the delay in millis.
            int delayInMillis = typedArray.getInt(R.styleable.gif_view_delay_in_millis,
                    DEF_VAL_DELAY_IN_MILLIS);
            if (delayInMillis != DEF_VAL_DELAY_IN_MILLIS)
                setDelayInMillis(delayInMillis);

            // gets the source of the gif and sets it
            String string = typedArray.getString(R.styleable.gif_view_gif_src);
            if (string != null)
                setGifResource(typedArray.getString(R.styleable.gif_view_gif_src));

        } finally {
            typedArray.recycle();
        }
    }

    /**
     * Register callbacks to be invoked when the view finished setting a gif.
     *
     * @param onSettingGifListener the listener to attach
     */
    public void setOnSettingGifListener(OnSettingGifListener onSettingGifListener) {
        this.onSettingGifListener = onSettingGifListener;
    }

    /**
     * Sets the delay in millis between every calculation of the next frame to be set.
     *
     * @param delayInMillis the delay in millis
     * @throws IllegalArgumentException if delayInMillis is non-positive
     */
    public void setDelayInMillis(int delayInMillis) {
        if (delayInMillis <= 0)
            throw new IllegalArgumentException("delayInMillis must be positive");

        this.delayInMillis = delayInMillis;

        if (gif != null)
            gif.setDelayInMillis(delayInMillis);
    }

    /**
     * Returns true if the view is in the process of setting the gif, false otherwise.
     *
     * @return true if the view is in the process of setting the gif, false otherwise
     */
    public boolean isSettingGif() {
        return settingGif;
    }

    /**
     * Sets the gif of this view and starts it.
     * <p>
     * Note that every exception while setting the gif is only sent to the
     * OnSettingGifListener instance attached to this view.
     * <p>
     * If the view has already begun setting another gif, does nothing.
     * You can query this state with isSettingGif().
     * <p>
     * The string passed must be in the following format:
     * <p>
     * - If you want to get the gif from a url
     * concatenate the string "url:" with the full url.
     * <p>
     * - if you want to get the gif from the assets directory
     * concatenate the string "asset:" with the full path of the gif
     * within the assets directory. You can exclude the .gif extension.
     * <p>
     * You can use the Constants:
     * <p>
     * GIFView.RESOURCE_PREFIX_URL = "url:"
     * GIFView.RESOURCE_PREFIX_ASSET = "asset:"
     * <p>
     * for example if you have a gif in the path "assets/ex_dir/ex_gif.gif"
     * invoke the method like this: setGifResource(GIFView.RESOURCE_PREFIX_ASSET + "ex_dir/ex_gif");
     *
     * @param string the string
     * @throws IllegalArgumentException if the string format is invalid
     */
    public void setGifResource(String string) {
        if (settingGif)
            return;

        // stops the gif if it is running
        if (gif != null)
            gif.stopGif();

        // defines some finals for readability
        final int URL_START_INDEX = RESOURCE_PREFIX_URL.length();
        final int ASSET_START_INDEX = RESOURCE_PREFIX_ASSET.length();
        final String GIF_EXTENSION = ".gif";

        if (string.startsWith(RESOURCE_PREFIX_URL)) {

            // notifies setting gif has started
            settingGif = true;

            // gets the url
            String url = string.substring(URL_START_INDEX);

            new AsyncSettingOfGif() {
                @Override
                protected InputStream getGifInputStream(String url) throws Exception {
                    // gets the input stream from the url
                    return (InputStream) new URL(url).getContent();
                }
            }.execute(url);

        } else if (string.startsWith(RESOURCE_PREFIX_ASSET)) {

            // notifies setting gif has started
            settingGif = true;

            // gets the asset path
            String assetPath = string.substring(ASSET_START_INDEX)
                    .replaceAll("[\\\\/]", File.separator); // replacing file separators
            if (!assetPath.endsWith(GIF_EXTENSION))
                assetPath += GIF_EXTENSION;

            new AsyncSettingOfGif() {
                @Override
                protected InputStream getGifInputStream(String assetPath) throws Exception {
                    // gets the input stream from the assets directory
                    return GIFView.this.getResources().getAssets().open(assetPath);
                }
            }.execute(assetPath);

            // if string format is invalid
        } else {
            throw new IllegalArgumentException("string format is invalid");
        }
    }

    /**
     * Called when the view finished to set the gif
     * or an exception has occurred.
     * If there are no exceptions e is null.
     * <p>
     * Note that the gif can be initialized properly
     * and one or more exceptions can be caught in the way.
     *
     * @param e the Exception
     */
    protected void onFinishSettingGif(Exception e) {
        // notifies setting the gif has finished
        settingGif = false;

        if (gif != null)
            onSuccess();
        else
            onFailure(e);
    }

    // on finish setting the gif
    private void onSuccess() {
        gif.setOnFrameReadyListener(gifOnFrameReadyListener, getHandler());
        gif.setDelayInMillis(delayInMillis);
        startGif();

        if (onSettingGifListener != null)
            onSettingGifListener.onSuccess(this);
    }

    // when an exception has occurred while trying to set the gif
    private void onFailure(Exception e) {
        if (onSettingGifListener != null)
            onSettingGifListener.onFailure(this, e);
    }

    /**
     * Starts the gif.
     * If the gif is already running does nothing.
     *
     * @throws IllegalStateException if the gif has not been initialized yet
     */
    public void startGif() {
        if (gif == null || settingGif)
            throw new IllegalStateException("the gif has not been initialized yet");

        gif.startGif();
    }

    /**
     * Stops the gif.
     * If the gif is not running does nothing.
     *
     * @throws IllegalStateException if the gif has not been initialized yet
     */
    public void stopGif() {
        if (gif == null || settingGif)
            throw new IllegalStateException("the gif has not been initialized yet");

        gif.stopGif();
    }

    /**
     * Interface definition for callbacks to be invoked when setting a gif.
     */
    public interface OnSettingGifListener {

        /**
         * Called when a gif has successfully set.
         *
         * @param view the GIFView
         */
        void onSuccess(GIFView view);

        /**
         * Called when a gif cannot be set.
         *
         * @param view the GIFView
         * @param e    the Exception
         */
        void onFailure(GIFView view, Exception e);
    }

    /**
     * Definition of an Exception class to throw when the view cannot initialize the gif.
     */
    public static class CannotInitGifException extends Exception {

        /**
         * Creates a new instance.
         */
        public CannotInitGifException() {
            super();
        }

        /**
         * * Creates a new instance with a message.
         *
         * @param message the message
         */
        public CannotInitGifException(String message) {
            super(message);
        }
    }

    /**
     * A sub-class of AsyncTask to easily perform an async task of setting a gif.
     * <p>
     * The default implementation of AsyncSettingOfGif.doInBackground() is to try and init the gif
     * from the input stream returned from AsyncSettingOfGif.getGifInputStream() and notify
     * GIFView.onFinishSettingGif() sending to it the exception, if occurred, or null.
     * <p>
     * Implementations of this class should override AsyncSettingOfGif.getGifInputStream()
     * to return the right input stream for the gif based on the string argument.
     * The string argument can be, for example, a url to retrieve the input stream from.
     */
    protected abstract class AsyncSettingOfGif extends AsyncTask<String, Void, Exception> {

        @Override
        protected Exception doInBackground(String... string) {
            CannotInitGifException exceptionToSend = null;

            try (InputStream in = getGifInputStream(string[0])) {
                // tries to init the gif
                gif = new GIF(in);

            } catch (Exception e) {
                // prepares the message of the exception
                String message = e.getMessage();
                if (e instanceof FileNotFoundException)
                    message = "file not found: " + message;

                // prepares the exception to send back
                exceptionToSend = new CannotInitGifException(message);
            }

            return exceptionToSend;
        }

        /**
         * Override this method to return the right input stream for the gif based on the string argument.
         * The string argument can be, for example, a url to retrieve the input stream from.
         *
         * @param string the string
         * @return an InputStream of a gif
         * @throws Exception if an exception has occurred
         */
        protected abstract InputStream getGifInputStream(String string) throws Exception;

        @Override
        protected void onPostExecute(Exception e) {
            onFinishSettingGif(e);
        }
    }
} 
```

资源/值/attrs.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="gif_view">
        <attr name="gif_src" format="string" />
        <attr name="delay_in_millis" format="integer" />
    </declare-styleable>
</resources> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-03T05:49:52.280

您可以添加一个 webview 并在其中显示一个 gif 图像，例如：

```
webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebViewClient(new WebViewClient());
    webView.loadUrl("https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Rotating_earth_(large).gif/200px-Rotating_earth_(large).gif"); 
```

这将在您的应用程序中显示 gif 图像。

希望能帮助到你！祝你好运！

# c++ - 如何部分专门化所有枚举的类模板？

> ID：12726954
> 
> 赞同：7
> 
> 时间：2012-10-04T12:08:07.683
> 
> 标签：c++, enums, template-specialization

假设我有一些类模板：

```
template<typename T>
class {
// ....
} 
```

**我可以通过以下方式为所有**指针部分专门化这个模板：

```
template<typename T>
class<T *> {
// ....
} 
```

我可以以某种方式专门针对**所有**枚举的模板吗？即，做类似的事情：（虽然这不起作用）

```
template<typename T>
class<enum T> {
// ....
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T12:11:43.653

使用 C++11 和 SFINAE。

```
#include <type_traits>

template<typename T, typename = void>
struct Specialize
{
};

template<typename T>
struct Specialize<T, typename std::enable_if<std::is_enum<T>::value>::type>
{
   void convert() { }
};

enum E
{
};

int main()
{
   Specialize<E> spec;
   spec.convert();
} 
```

没有 C++11 使用`boost::enable_if`和`boost::is_enum`

# c - EXIF 数据类型解释

> ID：12726960
> 
> 赞同：1
> 
> 时间：2012-10-04T12:08:20.227
> 
> 标签：c, types, jpeg, exif, metadatatype

我正在研究 EXIF 格式来编写解析器。标签出现在这里。[http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html#LightSource](http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/EXIF.html#LightSource)

1）某些字段的数据类型为“undef”。您将如何使用这样的字段？我们假设它是什么类型？

2) 有些数据类型是这样的 int16u[2]!。感叹号表示不安全（当光标移到它上面时）。但是，这是什么意思？

3) 另一种数据类型是 N。我不明白这是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:29:46.103

我看到上述文件已在 2012 年 10 月 13 日进行了修订，这是在您提出问题之后。所以我建议再次检查 - 也许它现在有更少的“漏洞”。

# python - 用python比较带有大量正则表达式的文本的最快方法是什么？

> ID：12726961
> 
> 赞同：4
> 
> 时间：2012-10-04T12:08:23.857
> 
> 标签：python, regex, performance

我有一个正则表达式列表，我想匹配它们到达的推文，以便我可以将它们与特定帐户相关联。上面的规则数量很少，它运行得非常快，但是一旦你增加规则的数量，它就会变得越来越慢。

```
import string, re2, datetime, time, array

rules = [
    [[1],["(?!.*ipiranga).*((?=.*posto)(?=.*petrobras).*|(?=.*petrobras)).*"]],
    [[2],["(?!.*brasil).*((?=.*posto)(?=.*petrobras).*|(?=.*petrobras)).*"]],
]

#cache compile
compilled_rules = []
for rule in rules:
    compilled_scopes.append([[rule[0][0]],[re2.compile(rule[1][0])]])

def get_rules(text):
    new_tweet = string.lower(tweet)
    for rule in compilled_rules:
        ok = 1
        if not re2.search(rule[1][0], new_tweet): ok=0
        print ok

def test():
    t0=datetime.datetime.now()
    i=0
    time.sleep(1)
    while i<1000000:
        get_rules("Acabei de ir no posto petrobras. Moro pertinho do posto brasil")
        i+=1
        t1=datetime.datetime.now()-t0
        print "test"
        print i
        print t1
        print i/t1.seconds 
```

当我用 550 条规则进行测试时，我不能超过 50 个请求/秒。有没有更好的方法来做到这一点？我需要至少 200 个请求/秒

编辑：在乔纳森的提示之后，我可以将速度提高 5 倍，但要嵌套一些我的规则。请看下面的代码：

```
scope_rules = {
    "1": {
        "termo 1" : "^(?!.*brasil)(?=.*petrobras).*",
        "termo 2" : "^(?!.*petrobras)(?=.*ipiranga).*",
        "termo 3" : "^(?!.*petrobras)(?=.*ipiranga).*",
        "termo 4" : "^(?!.*petrobras)(?=.*ipiranga).*",
        },
    "2": {
        "termo 1" : "^(?!.*ipiranga)(?=.*petrobras).*",
        "termo 2" : "^(?!.*petrobras)(?=.*ipiranga).*",
        "termo 3" : "^(?!.*brasil)(?=.*ipiranga).*",
        "termo 4" : "^(?!.*petrobras)(?=.*ipiranga).*",
        }
    }
compilled_rules = {}
for scope,rules in scope_rules.iteritems():
    compilled_rules[scope]={}
    for term,rule in rules.iteritems():
        compilled_rules[scope][term] = re.compile(rule)

def get_rules(text):
    new_tweet = string.lower(text)
    for scope,rules in compilled_rules.iteritems():
        ok = 1
        for term,rule in rules.iteritems():
            if ok==1:
                if re.search(rule, new_tweet):
                    ok=0
                    print "found in scope" + scope + " term:"+ term

def test():
    t0=datetime.datetime.now()
    i=0
    time.sleep(1)
    while i<1000000:
        get_rules("Acabei de ir no posto petrobras. Moro pertinho do posto ipiranga da lagoa")
        i+=1
        t1=datetime.datetime.now()-t0
        print "test"
        print i
        print t1
        print i/t1.seconds

cProfile.run('test()', 'testproof') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:17:53.757

您的规则似乎是这里的罪魁祸首：由于这两个`.*`由前瞻分隔，因此必须检查非常多的排列才能成功匹配（或排除匹配）。`re.search()`不使用锚点会进一步加剧这种情况。此外，包括该`posto`部分的交替是多余的 - 正则表达式匹配您的字符串中是否有任何`posto`内容，因此您不妨完全放弃它。

例如，您的第一条规则可以重写为

```
^(?!.*ipiranga)(?=.*petrobras) 
```

结果没有任何变化。如果您正在寻找确切的单词，您可以使用单词边界进一步优化它：

```
^(?!.*\bipiranga\b)(?=.*\petrobras\b) 
```

* * *

一些测量（使用[RegexBuddy](http://www.regexbuddy.com)）：

应用于字符串的第一个正则表达式`Acabei de ir no posto petrobras. Moro pertinho do posto brasil`需要正则表达式引擎大约 4700 步才能找出匹配项。如果我取出`s`in `petrobras`，则需要超过 100.000 步才能确定不匹配。

我的匹配需要 230 步（在 260 步中失败），因此仅通过正确构建正则表达式即可获得 20-400 倍的加速。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:21:27.063

更进一步，我创建了一个 Cython 扩展来评估规则，现在它的速度非常快。我可以使用大约 3000 条正则表达式规则每秒处理大约 70 个请求

# 正则表达式.pyx

```
import re2
import string as pystring

cpdef list match_rules(char *pytext, dict compilled_rules):
    cdef int ok, scope, term
    cdef list response = []
    text = pystring.lower(pytext)
    for scope, rules in compilled_rules.iteritems():
        ok = 1
        for term,rule in rules.iteritems():
            if ok==1:
                if re2.search(rule, text):
                    ok=0
                    response.append([scope,term])
    return response 
```

# 蟒蛇代码

```
import re2 as re
import datetime, time, cProfile

scope_rules = {1: {1 : "^(?!.*brasil)(?=.*petrobras).*", 2: "^(?!.*petrobras)(?=.*ipiranga).*",3 : "^(?!.*petrobras)(?=.*ipiranga).*",4 : "^(?!.*petrobras)(?=.*ipiranga).*",},2: {1 : "^(?!.*brasil)(?=.*petrobras).*", 2: "^(?!.*petrobras)(?=.*ipiranga).*",3 : "^(?!.*petrobras)(?=.*ipiranga).*",4 : "^(?!.*petrobras)(?=.*ipiranga).*",},}

compilled_rules = {}
for scope,rules in scope_rules.iteritems():
    compilled_rules[scope]={}
    for term,rule in rules.iteritems():
        compilled_rules[scope][term] = re.compile(rule)

def test():
    t0=datetime.datetime.now()
    i=0
    time.sleep(1)
    while i<1000000:
        mregex.match_rules("Acabei de ir no posto petrobras. Moro pertinho do posto brasil",compilled_rules)
        i+=1
        t1=datetime.datetime.now()-t0
        print t1
        print i/t1.seconds

cProfile.run('test()', 'testproof') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:24:49.460

除了优化你的正则表达式模式本身（这将产生巨大的影响），你可以试试[谷歌的 RE2——](http://code.google.com/p/re2/)它应该比 Python 的标准正则表达式模块更快。

它是用 C++ 完成的，但是有[PyRE2](https://github.com/facebook/pyre2)，Facebook 的 RE2 的 Python 包装器 :)

PS感谢您的问题，我发现[了有关正则表达式匹配的精彩读物](http://swtch.com/~rsc/regexp/regexp1.html)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:24:32.677

除了@Tim Pietzcker 的推荐

如果您有很多规则，那么尝试基于按共同点分组的较小规则构建的分层方法可能是有意义的。

例如，您上面的两条规则都匹配“posto”和“petrobras”。如果将这些正则表达式组合到一个列表中，然后将调度限定为该列表，则可以避免运行许多永远不会应用的规则。

在伪代码中......

```
# a dict of qualifier rules with list of rules 
rules = {
    "+ petrobras" : [
        "- ipiranga"
        "- brasil"
        "? posto"
    ] ,
}

for rule_qualifier in rules:
   if regex( rule_qualifier , text ):
       for rule in rule_qualifier:
           if regex( rule , text ):
               yay 
```

# iphone - 如何在不受监督的 iPhone 上启用全局 HTTP 代理？

> ID：12726963
> 
> 赞同：3
> 
> 时间：2012-10-04T12:08:28.037
> 
> 标签：iphone, proxy, ios6

有没有办法在运行 iOS 6 的非监督 iPhone 上启用新的“全局 HTTP 代理”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:08:49.783

我记得它是正确的，它只能通过 WiFi 进行：转到设置应用程序，点击 Wi-Fi，找到您连接的网络，然后点击蓝色披露箭头来配置网络。向下滚动到 HTTP 代理设置，点击手动。

# jasper-reports - 使用 jdbc 数据源得到空报告的原因是什么？

> ID：12726965
> 
> 赞同：-1
> 
> 时间：2012-10-04T12:08:32.523
> 
> 标签：jasper-reports, ireport

我正在使用`iReport 4.7.0`. 要获得表格格式的报告，我连接到*`SQL Server 2005`*.

我在设计一个表时创建了一个数据集，该表为我提供了一个位于数据库表中的字段值，但是在完成设计后，当我预览我的*`jrxml`*文件时，它没有向我显示一个带有值的表。

我想知道是什么问题。

我的*`jrxml`*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Test" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="09817b9b-055f-4d9f-b22e-85b7fac3d81e" whenNoDataType="AllSectionsNoDetail">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="35"/>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <subDataset name="New Dataset 1" uuid="9bfe7683-aa43-4113-b4a6-8007d4c7ff5d">
        <queryString language="SQL">
            <![CDATA[select * from employee]]>
        </queryString>
        <field name="id" class="java.lang.Integer"/>
        <field name="first_name" class="java.lang.String"/>
        <field name="last_name" class="java.lang.String"/>
        <field name="salary" class="java.lang.Integer"/>
        <group name="id">
            <groupExpression><![CDATA[$F{id}]]></groupExpression>
        </group>
        <group name="first_name">
            <groupExpression><![CDATA[$F{first_name}]]></groupExpression>
        </group>
        <group name="last_name">
            <groupExpression><![CDATA[$F{last_name}]]></groupExpression>
        </group>
    </subDataset>
    <queryString>
        <![CDATA[]]>
    </queryString>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch">
            <staticText>
                <reportElement uuid="3f6a40c5-cb7c-4237-8635-19aab55cef63" x="205" y="16" width="100" height="20"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[Test Database]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <componentElement>
                <reportElement uuid="6dc5bcfb-b281-4ec4-a611-4e5b602031ed" key="table" style="table" x="16" y="10" width="527" height="115"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="New Dataset 1" uuid="ba8de9b8-6e5b-4178-a62d-380ec6e268c2">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column uuid="8a09f431-ce9d-4c86-bde8-b6eba830a10f" width="90">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="05cb64bd-b18c-4323-9365-ed6fa5d763ae" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12" isBold="true"/>
                                </textElement>
                                <text><![CDATA[id]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter style="table_CH" height="31" rowSpan="1"/>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="2fb15323-2f8b-4234-ae0b-7272676180df" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="db3eb7e3-b13d-4dff-b4cf-c64aa06853f2" width="90">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="d60ed209-0e4f-4e66-8a4b-53a117a4fdf2" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12" isBold="true"/>
                                </textElement>
                                <text><![CDATA[first_name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter style="table_CH" height="31" rowSpan="1"/>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="4dc05d21-5b86-4da2-b64f-9f83666e1948" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{first_name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="1bdd10f7-b718-4fbc-9fca-9f0a7883dc5c" width="90">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="2bdbbd7d-f990-4261-9243-6b0f9f7feb7b" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12" isBold="true"/>
                                </textElement>
                                <text><![CDATA[last_name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter style="table_CH" height="31" rowSpan="1"/>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="d361d452-b63c-47ff-a2de-33b3f6bebe9c" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{last_name}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="da448dd2-72b0-4e70-92f8-0343fa894cc0" width="90">
                        <jr:columnHeader style="table_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="388b140a-53d8-4097-b483-007767ab3494" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font size="12" isBold="true"/>
                                </textElement>
                                <text><![CDATA[salary]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter style="table_CH" height="31" rowSpan="1"/>
                        <jr:detailCell style="table_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="25c5ca88-39e2-4ea2-abd7-d1afe2df4ed9" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center"/>
                                <textFieldExpression><![CDATA[$F{salary}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch">
            <line>
                <reportElement uuid="e22bf754-66e2-4993-9e24-93ef1cfadaaa" x="0" y="44" width="555" height="1"/>
            </line>
        </band>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch">
            <textField>
                <reportElement uuid="94fcb4b3-e6da-4603-a6f1-f10063aee62e" x="409" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
        </band>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:44:42.543

我认为您的*详细信息*带没有打印（***当没有数据*** 具有**所有部分，没有详细信息**值时，您的报告的属性），因为您的主数据集是空的（我没有在您的模板中找到任何其他数据集，除了***新数据集 1***子数据集）。

例如，您可以将您的*表格*组件移动（放置）到*标题*栏。

* * *

[您可以在此处](http://jasperreports.sourceforge.net/sample.reference/table/index.html#table)找到使用*Table*组件的示例。

# android - GCMIntentService + 向死线程上的处理程序发送消息

> ID：12726977
> 
> 赞同：5
> 
> 时间：2012-10-04T12:09:08.543
> 
> 标签：android, google-cloud-messaging

我的应用程序正常工作，但我面临以下错误：

```
10-04 14:04:38.182: W/MessageQueue(8625): Handler (android.media.MediaPlayer$EventHandler){416ad6b0} sending message to a Handler on a dead thread
10-04 14:04:38.182: W/MessageQueue(8625): java.lang.RuntimeException: Handler (android.media.MediaPlayer$EventHandler) {416ad6b0} sending message to a Handler on a dead thread
10-04 14:04:38.182: W/MessageQueue(8625):   at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196)
10-04 14:04:38.182: W/MessageQueue(8625):   at android.os.Handler.sendMessageAtTime(Handler.java:473)
10-04 14:04:38.182: W/MessageQueue(8625):   at android.os.Handler.sendMessageDelayed(Handler.java:446)
10-04 14:04:38.182: W/MessageQueue(8625):   at android.os.Handler.sendMessage    (Handler.java:383)
10-04 14:04:38.182: W/MessageQueue(8625):   at android.media.MediaPlayer.postEventFromNative(MediaPlayer.java:1898)
10-04 14:04:38.182: W/MessageQueue(8625):   at dalvik.system.NativeStart.run(Native Method)
10-04 14:04:38.182: V/MediaPlayer(8625): back from callback 
```

我已经看到了[这个线程](http://code.google.com/p/android/issues/detail?id=20915)和建议的解决方法，但它对我不起作用。

有人有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-31T15:02:41.830

```
 // create a handler to post messages to the main thread
 Handler mHandler = new Handler(getMainLooper());
 mHandler.post(new Runnable() {
     @Override
    public void run() {
        Toast.makeText(getApplicationContext(), "hello", Toast.LENGTH_SHORT).show();
    }
 }); 
```

试试这个代码希望它有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T23:10:05.210

除了`Handler`在[您](https://stackoverflow.com/questions/12902820/update-textview-from-gcmintentservice-in-methods-onregistered-and-onunregistered)`GCMIntentService`的. `BroadcastReceiver`_

# image - Photoshop 或 mac 工具，使图像 8bit (PIXELATE)

> ID：12726980
> 
> 赞同：0
> 
> 时间：2012-10-04T12:09:13.177
> 
> 标签：image, macos, photoshop, pixelate

有没有人知道一些photoshop的技巧或者有链接到一些mac osx工具来渲染这样的图像？

![在此处输入图像描述](../Images/d02f020621b7b808b7160b964e74bdc7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:10:49.077

[这是](http://www.howtogeek.com/howto/29692/create-cool-8-bit-style-pixel-art-from-ordinary-images/)一个关于如何在 Photoshop 中使用酷炫效果对图像进行像素化的非常好的教程。

例子：

![在此处输入图像描述](../Images/f5420ba6162b3b1135b4049cc8dd939a.png)

# sql - Azure SQL 数据库在本地运行时工作，但在发布到 Azure 时不工作

> ID：12726981
> 
> 赞同：3
> 
> 时间：2012-10-04T12:09:13.230
> 
> 标签：sql, asp.net-mvc, azure

这已经让我崩溃了几天，我就是无法解决它。

我按照在线教程向您展示了如何使用实体框架中的模型优先方法连接和使用 Azure 数据库。有了这个，您必须设置数据库迁移，以便在将网站发布到 Azure 时更新 Azure 数据库。

我已经在 Azure 上创建了一个数据库，所以我想我会采用使用数据库优先模型的方法（也不需要设置迁移）并使用实体框架向导来创建我的模型。一切正常，当我在本地运行我的 MVC 网站时，它连接到我的 Azure 数据库并显示数据等。但是，当我将网站发布到 Azure 网站时，由于某种原因，当我单击使用控制器的选项卡时从数据库中获取数据，我得到一个错误：

> 抱歉，处理您的请求时出现了一个错误。

我检查了我的连接字符串，它们看起来都很好，正如我所说，当我在本地运行它时，我可以从 Azure 数据库中获取数据。但是，由于某种原因，一旦发布，我就无法获得数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T12:41:43.850

感谢大家的帮助。

我什至没有想过打开本地副本，但是当我检查它时它设置为true。所以那里没有答案:(

接下来我将 customerrors 模式添加到 off 以尝试获得更详细的描述。我得到的错误是巨大的，真的没有多大意义，所以我做了通常的事情并用谷歌搜索了错误，我发现了这个

[谁能发现为什么我在测试 EF 5 beta 时不断收到此错误](https://stackoverflow.com/questions/9591929/can-anyone-spot-why-i-keep-getting-this-error-testing-the-ef-5-beta)

我一读到它就知道这会解决它。我最初将该项目设置为 .net 4.5 项目，直到我意识到 azure 网站还不能与 4.5 一起使用，所以我在卸载 EF 并重新安装后将其更改为 .net 4 一切正常。

感谢你的帮助。这几天一直阻止我做任何事情：P

# assembly - 有什么区别 - MOV 指令

> ID：12726983
> 
> 赞同：2
> 
> 时间：2012-10-04T12:09:20.327
> 
> 标签：assembly, x86, mov

`MOV`我已经开始学习 asm，我想知道这两种使用指令的不同方式之间有什么区别`AL`：

第一的：

```
MOV AL,5H 
```

第二：

```
MOV SI,5H
MOV AL,[SI] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T12:14:37.767

这两个做不同的事情。

```
; let me use friendlier syntax; IMHO, lower case and 0x5 instead of 5h is more
; readable in case of assembly
mov al, 0x5 ; al = 0x5

mov si, 0x5 ; si = 0x5
mov al, [si] ; al = *si; that is, al is now what was in memory at address 0x5 
```

有一本关于 x86 程序集的简单 wikibook 可以更好地向您解释概念和语法：[x86 程序集](http://en.wikibooks.org/wiki/X86_Assembly)。汇编通常是简单的语言，但最好只遵循关于它的教程/书籍，首先完全理解语法，然后 - 并且只有这样 - 才能进入汇编阅读和写作的狂野世界。

此外，对于其他资源，您可以查看[此处](http://wiki.osdev.org/Learning_80x86_Assembly)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T12:13:50.683

1.  只需将 AL 寄存器的值设置为 5H
2.  首先它将 SI 寄存器设置为 5H 然后将 SI 取消引用的值移动到 AL 中（即内存地址 5H 中的任何内容现在都移动到 AL 中）。

您还可以在使用 SI 等索引寄存器时应用非零基偏移，例如：

```
MOV AL,[BX + SI] 
```

在首先将 BX 设置为适当的基偏移地址之后。

# javascript - 使用 chrome 浏览器双击时如何删除地址元素突出显示？

> ID：12726988
> 
> 赞同：0
> 
> 时间：2012-10-04T12:09:51.283
> 
> 标签：javascript, jquery, html, css

我有以下代码块和 javascript 按预期工作。

```
<li>
  <a id="menuPrev">
    <div class="sprite-blank"></div>
  </a>
</li>

$('#menuPrev')
  .click(function () {
     ...
     return false;
  })
  .doubleClick(function() {
     return false;
  }); 
```

当用户双击地址链接时，`<a>`元素下方会出现一条蓝线`<li>`下方会出现一条蓝线。这只发生在 Chrome 浏览器和双击时。据我所知，当我双击某些东西时，这是 Chrome 中的默认颜色行为。它看起来令人困惑，如果可能的话，我想阻止这种情况发生。

到目前为止，我发现如果我更改代码并将 href="#" 添加到链接中，则不会发生这种情况。但是，当我这样做时，链接地址会出现在页面底部，我不想要这个。

有谁知道我该如何解决这个问题并使浏览器忽略我的双击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:22:17.493

尝试`href="javascript:void(0);"`阻止浏览器在状态栏中显示链接。

也尝试`event.preventDefault();`“顾名思义”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:15:21.330

听起来您已经解决了，您只需要阻止浏览器在状态栏中显示链接即可。您拥有的第一件事是没有href的链接。Chrome 完全不喜欢这样，因为它认为链接格式不正确。所以你应该把你的`href="#"`背部放在适当的位置并将它添加到你的 jQuery 中：

```
$('#menuPrev')
  .click(function () {
     ...
     return false;
  })
  .doubleClick(function() {
     return false;
  })
  .mouseover(function() {
     window.status = '';
  }); 
```

# jquery - 获取数据表中的json数组值

> ID：12726989
> 
> 赞同：1
> 
> 时间：2012-10-04T12:09:54.900
> 
> 标签：jquery, json, datatable

我有如下所示的json

```
{
    "aaData": [
        [
            {
                "displayValue": "Home Page",
                "link": "http://somelink.com"
            },
            "London",
            "1983"
        ],
        [
            {
                "displayValue": "Backlog",
                "link": "http://BacklogApp.com"
            },
            "Paris",
            "1999"
        ]
    ]
} 
```

现在在 js 中，我正在使用 sAjaxSource 填充表。但我希望第一列是一个链接。我正在使用 fnRowCallback 属性来获取数据。在这里，我正在检查该行的第一个元素是否不是字符串（意味着是一个数组），然后将第一个元素作为链接，如下所示

```
"fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                if(typeof aData[0] != 'string'){
                    $('td:eq(0)', nRow).html( '<a href="' + aData[0][1] +'" >'  +
                            aData[0][0] + '</a>');
                }
            } 
```

但问题是我无法获得 aData[0][0] 或 aData[0][1] 值，因为它显示未定义。

有谁知道我怎样才能在这里获得“displayValue”和“link”值？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T12:16:05.713

这是如果您正在使用包含整个 JSON 的对象。你需要什么取决于你的`aData`内容

```
var data = {
   "aaData": [
        [
             {  
                "displayValue":"Home Page",
                "link":"http://somelink.com"
         },
            "London",
            "1983"
        ],
        [
            {   
                "displayValue":"Backlog",
                "link":"http://BacklogApp.com"
         },
            "Paris",
            "1999"
        ]
    ]
} 
```

比访问第一个 displayValue 的显示值：

```
data.aaData[0][0].displayValue
data.aaData[0][0].link 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:20:52.390

我在某人的评论中得到了答案，但只是该评论已被删除。我不知道为什么.. :( 答案是访问值作为 aData[0]['displayValue']

# sql - 更新后刷新 TClientDataset 中的值

> ID：12726992
> 
> 赞同：0
> 
> 时间：2012-10-04T12:10:14.423
> 
> 标签：sql, delphi, delphi-xe2, tclientdataset

我有一个 TClientDataset 包含来自多个表的数据。当我在此数据集上应用更新时，它可能会不同步。

我给你举一个例子：

在要更新的表中，我得到了一个名为“Client_id”的 ID。clientdataset 还包含一个值“Client_name”，该值从“Client”表中获取并显示在 GUI 中。

然后我更改表中的“Client_id”并在表上应用更新，我的数据集中的“Client_name”字段突然不同步。这自然是因为clientdataset还没有被刷新。

现在我可以在 afterpost 事件上执行 clientdataet.refresh，但是数据集上的光标会跳转到第一条记录，并且我失去了指向更新记录的指针。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:15:26.440

你应该`RefreshRecord`试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:51:29.507

为您的提供者设置 poPropogateChanges 并在 AfterUpdateRecord 事件处理程序中分配任何新字段值