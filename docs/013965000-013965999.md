# StackOverflow 问答 13965000-13965999

# asp.net - 如何将超链接列数据拆分为逗号分隔值

> ID：13965002
> 
> 赞同：1
> 
> 时间：2012-12-20T03:48:48.213
> 
> 标签：asp.net, gridview, hyperlink

我正在尝试拆分 gridview 的超链接列中存在的值。我无法得到我需要的东西。

这是我的代码

```
 <asp:TemplateField HeaderText="Budgeted Profit" SortExpression="Budgeted Profit" HeaderStyle-CssClass="StrongText"  HeaderStyle-Font-Bold="true" HeaderStyle-Font-Size="Medium" 
                                  HeaderStyle-ForeColor="Blue" HeaderStyle-Font-Underline="true"  ItemStyle-Width="3%" ItemStyle-HorizontalAlign="Left" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom">
                        <ItemTemplate>
                              <asp:HyperLink runat="server" ID="HyperLink7" NavigateUrl='<%#"PM_Prof_budgetedGraph.aspx?ProjectID="+ Eval("Project ID")%>' Text='<%#Eval("Budgeted Profit").ToString().Split(new string[]{";"},StringSplitOptions.None)[0]%>' ForeColor="BLUE" Target="_blank"></asp:HyperLink>
                              <asp:Label ID="lblProfit" runat="server"></asp:Label>
                        </ItemTemplate>
            </asp:TemplateField> 
```

我试过这个：

```
 Text=<%# Eval("Budgeted Profit").ToString().Split('-')[0] %> /> 
```

你能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:54:49.027

在您的代码中创建受保护的函数，如下所示：

```
 protected string GetProfitText(object o)
    {
        string budget = o.ToString();
        return budget.Split('-')[0];

    } 
```

并在 aspx 文件中：

```
<asp:TemplateField HeaderText="Budgeted Profit" SortExpression="Budgeted Profit" 
                    HeaderStyle-CssClass="StrongText"  HeaderStyle-Font-Bold="true" HeaderStyle-Font-Size="Medium" 
                    HeaderStyle-ForeColor="Blue" HeaderStyle-Font-Underline="true"  ItemStyle-Width="3%" ItemStyle-HorizontalAlign="Left" ItemStyle-VerticalAlign="Bottom" HeaderStyle-HorizontalAlign="Left" HeaderStyle-VerticalAlign="Bottom">
    <ItemTemplate>
        <asp:HyperLink runat="server" ID="HyperLink7" 
                        NavigateUrl='<%#"PM_Prof_budgetedGraph.aspx?ProjectID="+ Eval("Project ID")%>' 
                        Text='<%# GetProfitText(DataBinder.Eval(Container.DataItem,"Budgeted Profit")) %>' 
                        ForeColor="BLUE" Target="_blank"></asp:HyperLink>
        <asp:Label ID="lblProfit" runat="server"></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

# ios - UITableViewCell 有定时器

> ID：13965007
> 
> 赞同：0
> 
> 时间：2012-12-20T03:49:12.937
> 
> 标签：ios, uitableview, nsoperationqueue

我正在开发具有计时器的应用程序`UITableViewCell`。但是我怎么能做到这一点，每个单元都运行不同的计时器及其动态，我从服务器获取它。如何实现这个定时器，在`UITableViewCell`. 我需要创建任何`NSOperationQueue`. 谁能帮我找到解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:26:28.650

您的计时器不能完全在 UITableViewCells 中，因为它们会被回收。您的 tableview 数据源应保留每个单元格的时间。使用 NSTimer

```
+ scheduledTimerWithTimeInterval:target:selector:userInfo:repeats: 
```

定期更新计时器视图/标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:49:25.130

我已经在我的一个应用程序中做到了这一点，所以我会分享并希望它对你有所帮助。
1.实现`+ scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`功能。
2\. 为 UITableViewCell 创建自定义类并在其中创建一个方法，您可以在其中更新计时器标签。
3\. 在计时器函数内部找出tableview 可见行并调用您的自定义 UITableViewCell 类方法，该方法将仅更新您更新的文本，从而优化您的性能。

# python - 查找所有具有正方形尺寸的图像（1:1 比例）

> ID：13965008
> 
> 赞同：3
> 
> 时间：2012-12-20T03:49:15.827
> 
> 标签：python, ruby, bash, find, imagemagick

是否可以使用任何 *nix 程序（如“find”）或脚本语言（如 Python、PHP 或 Ruby）来搜索您的硬盘并找到所有具有相同宽度和高度（即正方形尺寸）的图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T04:21:02.170

下面的代码将递归列出指定路径上的文件，因此它可以查看您提到的特定硬盘上的所有子文件夹。它还将根据您可以指定的一组文件扩展名检查文件是否为图像。然后它将打印具有匹配宽度和高度的任何图像的文件名和宽度、高度。当您调用脚本时，您指定要在其下搜索的路径。下面显示了一个示例用法。

**列表图像.py**

```
import PIL.Image, fnmatch, os, sys

EXTENSIONS = ['.jpg', '.bmp']

def list_files(path, extensions):
    for root, dirnames, filenames in os.walk(path):
      for file in filenames:
          if os.path.splitext(file)[1].lower() in extensions:
              yield os.path.join(root, file)

for file in list_files(sys.argv[1], EXTENSIONS):
    width, height = PIL.Image.open(file).size
    if width == height:
        print "found %s %sx%s" % (file, width, height) 
```

**用法**

```
# listimages.py /home/user/myimages/
found ./b.jpg 50x50
found ./a.jpg 340x340
found ./c.bmp 50x50
found ./d.BMP 50x50 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T04:09:19.563

使用 Python 肯定是可能的。

您可以使用 os.walk 来遍历文件系统，并使用 PIL 来检查图像在两个方向上是否具有相同的尺寸。

```
import os, Image

for root, dir, file in os.walk('/'):
    filename = os.path.join(root, file)
    try:
        im = Image.open(filename)
    except IOError:
        continue

    if im.size[0] == im.size[1]:
        print filename 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T14:12:07.183

这可以在单个 shell 行中完成，但我不建议这样做。分两步进行。首先，在一个文件中收集所有图像文件和所需属性：

```
find . -type f -print0 | xargs -J fname -0 -P 4 identify \
    -format "%w,%h,%m,\"%i\"\n" fname 2>|/dev/null | sed '/^$/d' > image_list 
```

`sed`只是为了删除产生的空白行。您可能需要为您的系统调整参数`-P 4`。`xargs`这里使用了 ImageMagick `identify`，因为它可以识别很多格式。这将创建一个名为的文件，该文件`image_list`采用典型的 CSV 格式。

现在只需`image_list`根据您的需要进行过滤即可。为此，我更喜欢使用 Python，如下所示：

```
import sys
import csv

EXT = ['JPEG', 'PNG']

for width, height, fformat, name in csv.reader(open(sys.argv[1])):
    if int(width) == int(height) and width:
        # Show images with square dimensions, and discard
        # those with width 0
        if fformat in EXT:
            print name 
```

这个答案的第一部分可以很容易地用 Python 重写，但由于它要么涉及使用 Python 的 ImageMagick 绑定或通过 调用它`subprocess`，所以我将其保留为 shell 命令的组合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T04:32:34.480

在`bash`你可以通过使用这样的东西来获得图像大小：

```
identify -verbose jpg.jpg | awk '/Geometry/{print($2)}' 
```

还阅读`man find`和`man identify`

# linux - 如何打印目录中所有文件的特定行？

> ID：13965011
> 
> 赞同：2
> 
> 时间：2012-12-20T03:49:30.937
> 
> 标签：linux, bash, shell

我遇到了一个错误，说我的 Makefile 的第 235 行有错误：

```
make[4]: Leaving directory `/opt/home/root/native-upstream/native_client/tools/SRC/glibc/wctype'
make  subdir=manual -C manual ..=../ subdir_lib
make[4]: Entering directory `/opt/home/root/native-upstream/native_client/tools/SRC/glibc/manual'
Makefile:235: *** mixed implicit and normal rules.  Stop.
make[4]: Leaving directory `/opt/home/root/native-upstream/native_client/tools/SRC/glibc/manual'
make[3]: *** [manual/subdir_lib] Error 2
make[3]: Leaving directory `/opt/home/root/native-upstream/native_client/tools/SRC/glibc'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/opt/home/root/native-upstream/native_client/tools/BUILD/build-glibc32'
make[1]: *** [BUILD/stamp-glibc32] Error 2
make[1]: Leaving directory `/opt/home/root/native-upstream/native_client/tools'
make: *** [build-with-glibc] Error 2 
```

但是我不知道哪个 Makefile 有这个错误，我的项目中有很多 Makefile：

```
#  find . -name Makefile
./tools/Makefile
./tools/BUILD/.gcc-extra-build-cloog-ppl/doc/Makefile
./tools/BUILD/.gcc-extra-build-cloog-ppl/Makefile
./tools/BUILD/.gcc-extra-build-cloog-ppl/test/Makefile
./tools/BUILD/.gcc-extra-build-gmp/printf/Makefile
./tools/BUILD/.gcc-extra-build-gmp/doc/Makefile
./tools/BUILD/.gcc-extra-build-gmp/tests/Makefile
./tools/BUILD/.gcc-extra-build-gmp/tests/devel/Makefile
... 
```

所以我想打印每个 Makefile 的第 235 行，以找出谁是罪魁祸首，例如：

```
./tools/Makefile: 235: $(objpfx)c++-types-check.out: $(check-data) scripts/check-c++-types.sh
./tools/BUILD/.gcc-extra-build-cloog-ppl/doc/Makefile: 235: ifneq (,$(check-data))
./tools/BUILD/.gcc-extra-build-cloog-ppl/Makefile: 235: $(objpfx)c++-types-check.out:
./tools/BUILD/.gcc-extra-build-cloog-ppl/test/Makefile: 235: endif
./tools/BUILD/.gcc-extra-build-gmp/printf/Makefile: 235:
./tools/BUILD/.gcc-extra-build-gmp/doc/Makefile: 235:
./tools/BUILD/.gcc-extra-build-gmp/tests/Makefile: 235: #   Master Makefile for the GNU C library
./tools/BUILD/.gcc-extra-build-gmp/tests/devel/Makefile: 235: 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:25:52.603

看起来问题出在 中`/opt/home/root/native-upstream/native_client/tools/SRC/glibc/manual/Makefile`，因为错误之前的那一行表示它正在进入该目录：

```
make[4]: Entering directory `/opt/home/root/native-upstream/native_client/tools/SRC/glibc/manual'
Makefile:235: *** mixed implicit and normal rules.  Stop. 
```

也就是说，有几种方法可以找到每个 Makefile 的第 235 行。人们已经指出了 awk 和 sed 解决方案。如果您还想要文件名，一个快速简便的解决方案是使用`grep`：

```
find . -name Makefile -print0 | xargs -0 grep -nH $ | grep :235: 
```

find 命令查找所有名为 Makefile 的文件，并以空分隔符将它们打印出来（这样，如果文件名中有空格，您就不会遇到问题）。`xargs`将这些文件名传递给`grep`. `grep -nH`打印每个匹配行的文件名和行号；`$`as 模式确保每一行都匹配（它匹配每一行的结尾）。然后你在其中寻找你正在寻找的行号。

它并不完美；您可能会发现其中几行恰好包含“：235：”，但对于快速一次性应该没问题（如果您真的在意，可以使用`grep'^ [^：] *：235： ' 以确保您只匹配行号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:54:00.457

我想最直接的方法是

```
sed -n '235p' * 
```

这将打印当前目录中所有文件的第 235 行。如果您想通过目录递归，或排除某些文件，您将不得不使用更明确的 glob 或`find`with `-exec`.

所以最后，你可能想要的是：

```
find . -type f -name Makefile -print -exec sed -n '235p' {} \; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:21:57.417

这是一个解决方案`find`和`awk`

```
find -type f -name "Makefile" -exec awk 'FNR==235 {print FILENAME; print}' {} + 
```

这打印：

*   生成文件的名称
*   该 Makefile 的第 235 行

**解释：**

*   `find -type f -name "Makefile"`- 递归查找当前工作目录中所有命名的文件`Makefile`
*   `-exec awk 'FNR==235 {print FILENAME; print}' {} +`- 对于找到的每个此类文件，使用`awk`打印其名称，然后在第 235 行打印其内容。

# vb.net - 如何将多个 VB 函数/SQL 查找组合成一个 vb.net 函数

> ID：13965014
> 
> 赞同：0
> 
> 时间：2012-12-20T03:49:41.540
> 
> 标签：vb.net, sql-server-2008, return-value

我有两个检查同一张表的函数，一个接一个。这种设置似乎效率低下。有没有办法将这些结合起来？

```
getCustomerName(customerID)
getCustomerEmail(customerID)

'GET CUSTOMER NAME 
Public Shared function getCustomerName(myArg) as String
Dim objConnection As New SqlConnection(System.Configuration.ConfigurationSettings.AppSettings("connectionString"))
Dim finalCustomerName as string
objConnection.Open()
    Dim objCommand As New SqlCommand("SELECT customerName FROM customers WHERE customerID = '" + MyArg + "'", objConnection)
    Dim objDataReader as SqlDataReader = objCommand.ExecuteReader(CommandBehavior.CloseConnection)
    While objDataReader.Read()
        finalCustomerName = objDataReader("customerName")
    End While
objConnection.Close()
Return finalCustomerName
End function

'GET CUSTOMER EMAIL
Public Shared function getCustomerEmail(myArg) as String
Dim objConnection As New SqlConnection(System.Configuration.ConfigurationSettings.AppSettings("connectionString"))
Dim finalCustomerEmail as string
objConnection.Open()
    Dim objCommand As New SqlCommand("SELECT customerEmail FROM customers WHERE customerID = '" + MyArg + "'", objConnection)
    Dim objDataReader as SqlDataReader = objCommand.ExecuteReader(CommandBehavior.CloseConnection)
    While objDataReader.Read()
        finalCustomerEmail = objDataReader("customerEmail")
    End While
objConnection.Close()
Return finalCustomerEmail
End function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:02:47.313

尝试这个

新客户类（您可以添加更多与客户相关的属性并从下面的函数中返回它们）：

```
Public Class Customer

    Public Property CustomerName() As String
        Get
            Return m_CustomerName
        End Get
        Set
            m_CustomerName = Value
        End Set
    End Property
    Private m_CustomerName As String
    Public Property CustomerEmail() As String
        Get
            Return m_CustomerEmail
        End Get
        Set
            m_CustomerEmail = Value
        End Set
    End Property
    Private m_CustomerEmail As String
End Class 
```

你的功能应该是

```
// your function to get customer details
Public function getCustomer(myArg) as Customer
Dim custobj as New Customer()

Dim objCommand As New SqlCommand("SELECT customerEmail,CustomerName FROM customers WHERE customerID = @custid", objConnection)

objCommand.Parameters.AddWithValue("@custid",myArg) //use parameters to avoid sql injections

Dim objDataReader as SqlDataReader = objCommand.ExecuteReader(CommandBehavior.CloseConnection)
While objDataReader.Read()
    custobj.CustomerName = objDataReader("customerName")
    custobj.CustomerEmail = objDataReader("customerEmail")
End While
objDataReader.Close()
objConnection.Close()

Return custObj
End function 
```

# wordpress - 如何修改 Taxonomy.php 以显示自定义帖子类型和自定义分类的所有帖子？

> ID：13965018
> 
> 赞同：0
> 
> 时间：2012-12-20T03:49:52.567
> 
> 标签：wordpress, archive, taxonomy, custom-post-type, custom-taxonomy

我正在构建一个 Wordpress 网站，我试图弄清楚如何修改`taxonomy.php`以显示自定义类别和自定义分类中的所有帖子，但我被卡住了。情况如下：

我有一个名为“工作”的自定义帖子类型。在该自定义帖子类型中，我有一个称为“项目类型”的自定义分类法，我在其中创建了几个类别，称为摄影、视频、印刷设计等。我设置了一个名为的模板`taxonomy.php`，它管理 mydomain.com/work 和 mydomain。 com/项目类型/打印设计/。问题是这些页面只显示 5 个最近的帖子。我需要它们显示正确类别中的所有帖子（或者在 mydomain.com/work 的情况下，自定义帖子类型中的所有帖子，无论类别如何）。

我发现[这个关于 query_posts](http://codex.wordpress.org/Function_Reference/query_posts)的页面帮助我意识到我需要添加`<?php query_posts( array ( 'post_type' => 'work', 'posts_per_page' => -1 ) ); ?>`. 现在工作页面正在正确加载，但所有类别页面都在加载所有工作帖子（因为我已将 post_type 定义为我添加的那个片段中的工作）。

**如何概括代码，使其工作页面显示所有工作帖子，而类别页面仅显示相关类别帖子？**这是完整的代码：

```
<?php

/**
 * Project Type Taxonomy Archive
 */

$term = get_term_by( 'slug', get_query_var( 'term' ), get_query_var( 'taxonomy' ) );
?>

<h3 style="color:#EEEEEE"><?php echo apply_filters( 'the_title', $term->name ); ?> PROJECTS</h3>

<ul class="thumbnails">
    <div id="work">

    <?php if ( !empty( $term->description ) ): ?>
        <div class="archive-description">
        <?php echo esc_html($term->description); ?>
        </div>
    <?php endif; ?>
    <?php query_posts( array ( 'post_type' => 'work', 'posts_per_page' => -1 ) ); ?>
    <?php if ( have_posts() ): while ( have_posts() ): the_post(); ?>

    <div class="post">
        <li class="span4">
            <div class="thumbnail">
            <a href="<?php the_permalink() ?>"><div class="tint"><?php the_post_thumbnail( 'featured-thumb' ); ?></div></a>
            <br />
            <div class="thumbcaption">
                <a href="<?php the_permalink() ?>"><h3><?php the_title() ?></h3></a>
                <p> <?php the_excerpt(); ?></p>
                <p><i><?php the_terms( $post->ID, 'work_project_type' ,  ' ' ); ?></i></p>
            </div>  
            </div>
        </li>
    </div>

    <?php endwhile; ?>

    <div class="navigation clearfix">
        <div class="alignleft"><?php next_posts_link('« Previous Entries') ?></div>
        <div class="alignright"><?php previous_posts_link('Next Entries »') ?></div>
    </div>

    <?php else: ?>

    <h2 class="post-title">No Projects in <?php echo apply_filters( 'the_title', $term->name ); ?></h2>
    <div class="content clearfix">
        <div class="entry">
            <p>It seems there aren't any projects in <strong><?php echo apply_filters( 'the_title', $term->name ); ?></strong> right now. Check back later, I try to add new projects regularly.</p>
        </div>
    </div>

    <?php endif; ?>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T13:49:35.947

处理此问题的一种方法是不添加自定义模板。

当您访问与分类档案相关的 url 时，wordpress 已经从数据库中获取了所有帖子。通过创建一个单独的模板，尽管您可以更轻松地控制诸如“posts_per_page”之类的查询参数，但不必自己进行查询会更好。

而是考虑做一个 pre_get_posts 过滤器。像这样的东西。

```
// if on a certain taxonomy archive page, do not limit the posts
add_action('pre_get_posts', function($query){
    if (isset($query->query_vars['name_of_your_taxonomy'])) {
        add_filter('post_limits', function($limit){
            /*
            default will be something like this 'LIMIT 0, 10'
            but we don't want a limit so return empty string
            */
            return '';
        });
    }
}); 
```

# ios - UITableView 每节选择一行

> ID：13965020
> 
> 赞同：1
> 
> 时间：2012-12-20T03:50:02.330
> 
> 标签：ios, objective-c, uitableview

我想做这样的选择 ![在此处输入图像描述](../Images/0b8167cb7dd7882d0c32879aabafd129.png)

我怎样才能改变我的

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

委托方法按照我的要求工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-16T03:42:30.373

为什么这么复杂？在用户选择一个新单元之前，只需取消选择同一部分的所有单元格。

首先允许您的 UITableView 进行多项选择。然后实现这个委托方法：

**斯威夫特 3 版本：**

```
func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath?
{
    for vcip in tableView.indexPathsForSelectedRows ?? [] {
        if vcip.section == indexPath.section && vcip.item != indexPath.item {
            tableView.deselectRow(at: vcip, animated: false)
        }
    }
    return indexPath
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T03:59:51.877

1.  在视图控制器中保留一个名为 的属性`selectedRow`，它表示 tableview 的 indexPath，表示 table 部分中的选中项。

2.  在您的视图控制器的`-tableView:cellForRowAtIndexPath:`委托方法中，如果单元格等于indexpath 值，则将 的 设置`accessoryType`为。否则，将其设置为。`cell``UITableViewCellAccessoryCheckmark``indexPath``selectedRow``UITableViewCellAccessoryNone`

3.  在视图控制器的`-tableView:didSelectRowAtIndexPath:`委托方法中，将`selectedRow`值设置`indexPath.row`为选定的值，例如：`self.selectedRow = indexPath.row`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T04:41:10.353

这不会是一个好的解决方案。使用 a`NSMutableArray`存储选定的部分。

```
NSMutableArray *selectedSections; //instance variable

selectedSections= [[NSMutableArray alloc] init];   //in viewDidLoad

- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   NSNumber *section = [NSNumber numberWithInt:indexPath.section];
   if([selectedSections containsObject:section]
      return nil;
   else
   {
      [selectedSections addObject:section];
      return indexPath;
   }
} 
```

当您取消选择一行时，请在此处写入以下代码：

```
[selectedSections removeObject:[NSNumber numberWithInt:indexPath.section]]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-06-20T05:03:13.853

LimeRed 在此线程的其他地方有一个很好的答案，但它并不完整。关键问题是 OP 需要删除附件复选标记。简单地调用`deselectRow`不会删除复选标记。根据文档，`deselectRow`不调用`tableView(_ tableView: UITableView, didDeselectRowAt indexPath: IndexPath)`可能位于删除复选标记代码的委托方法。因此，您需要将此删除作为 LimeRed 编写的代码的一部分进行处理。

这是一个更完整的实现，它基于 LimeRed 的解决方案再次删除了附件复选标记：

```
 func tableView(_ tableView: UITableView, willSelectRowAt indexPath: IndexPath) -> IndexPath?
    {
        for path in tableView.indexPathsForSelectedRows ?? []
        {
            if path.section == indexPath.section && path.item != indexPath.item
            {
                let cell = tableView.cellForRow(at: path)
                cell?.accessoryType = UITableViewCellAccessoryType.none
                tableView.deselectRow(at: path, animated: false)
            }
        }

        return indexPath
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T04:16:37.357

试试这样

在.h

```
@property (nonatomic, retain) NSIndexPath *checkedIndexPath; 
```

在.m

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 

    if(indexPath.section==0)
    {

        // to check and Uncheck the row
        if(self.checkedIndexPath)
        {
            UITableViewCell* uncheckCell = [tableView1
                                            cellForRowAtIndexPath:self.checkedIndexPath];
            uncheckCell.accessoryType = UITableViewCellAccessoryNone;
        }
        if([self.checkedIndexPath isEqual:indexPath])
        {
            self.checkedIndexPath = nil;
        }
        else
        {
            UITableViewCell* cell = [tableView1 cellForRowAtIndexPath:indexPath];
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
            self.checkedIndexPath = indexPath;
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T06:12:01.427

经过大量修改后，我得到了这个

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
    UITableViewCell *cell = [aTableView cellForRowAtIndexPath:indexPath];

if(indexPath.section == 0)
{
    if([section1Rows count] == 0)
    {
        [section1Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    else
    {
        [section1Rows removeObjectAtIndex:0];

        for (UITableViewCell *cell in [tabview visibleCells]) {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

        [section1Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        NSLog(@"%@",section1Rows);
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
}

if(indexPath.section == 1)
{
    if([section2Rows count] == 0)
    {
        [section2Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    else
    {
        [section2Rows removeObjectAtIndex:0];

        for (UITableViewCell *cell in [tabview visibleCells]) {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

        [section2Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        NSLog(@"%@",section2Rows);
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
}

if(indexPath.section == 2)
{
    if([section3Rows count] == 0)
    {
        [section3Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }

    else
    {
        [section3Rows removeObjectAtIndex:0];

        for (UITableViewCell *cell in [tabview visibleCells]) {
            cell.accessoryType = UITableViewCellAccessoryNone;
        }

        [section3Rows addObject:[NSNumber numberWithInt:indexPath.row]];
        NSLog(@"%@",section3Rows);
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    }
}

} 
```

我将逐步解释问题，我在 3 个部分中选择了一行，如果我在任何部分中再次选择一行......那么一切都会变得混乱。如何取消选择先前选择的行并突出显示然后选择的行？

谢谢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-04T10:38:00.140

这将是 ViewController.h

```
@interface ViewController : UITableViewController
{
    NSMutableArray *list;
    NSMutableArray *sectionList;

    NSIndexPath *oldIndexPath0;
    int row0;
    NSIndexPath *oldIndexPath1;
    int row1;
    NSIndexPath *oldIndexPath2;
    int row2;
    NSIndexPath *oldIndexPath3;
    int row3;

    NSString *othersString;
    NSString *timeString;
    NSString *pRoomString;
    NSString *parkingString;
    NSString *smokingString;

    NSString *select0;
    NSString *select1;
    NSString *select2;
    NSString *select3;
}
@end 
```

这个是 ViewController.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewWillAppear:(BOOL)animated
{
    // initial row by 100;
    row0 = 100;
    row1 = 100;
    row2 = 100;
    row3 = 100;

    // initial strings by @”"
    othersString = [NSString stringWithFormat:@""];
    timeString = [NSString stringWithFormat:@""];
    pRoomString = [NSString stringWithFormat:@""];
    parkingString = [NSString stringWithFormat:@""];
    smokingString = [NSString stringWithFormat:@""];

    select0 = @"";
    select1 = @"";
    select2 = @"";
    select3 = @"";

    // Get row index
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *fileName = [NSHomeDirectory() stringByAppendingPathComponent:@"tmp/rowString.txt"];
    NSData *rowData = [fileManager  contentsAtPath:fileName];
    // From NSData to NSString
    NSString *rowString = [[NSString alloc] initWithData:rowData encoding:NSUTF8StringEncoding];
    if (rowString) {
        // spit row string
        NSArray *rowArray = [rowString componentsSeparatedByString:@":"];
        for (int i=0; i<[rowArray count]; i++) {
            NSString *indexVal = [rowArray objectAtIndex:i];
            if ([indexVal length] != 0) {
                // set row value
                if (i == 0) {
                    NSString *row0Str = [rowArray objectAtIndex:0];
                    row0 = [row0Str intValue];
                }
                if (i == 1) {
                    NSString *row1Str = [rowArray objectAtIndex:1];
                    row1 = [row1Str intValue];
                }
                if (i == 2) {
                    NSString *row2Str = [rowArray objectAtIndex:2];
                    row2 = [row2Str intValue];
                }
                if (i == 3) {
                    NSString *row3Str = [rowArray objectAtIndex:3];
                    row3 = [row3Str intValue];
                }
            }
        }
    }
    // Update the view with current data before it is displayed.
    [super viewWillAppear:animated];

    //Initialize the array.
    list = [[NSMutableArray alloc] initWithCapacity:0];
    sectionList = [[NSMutableArray alloc] initWithCapacity:0];

    // section header
    NSArray *sectionHeaderArray = [NSArray arrayWithObjects:@"01",@"02",@"03",@"04", nil];
    NSDictionary *sectionHeaderDic = [NSDictionary dictionaryWithObject:sectionHeaderArray forKey:@"section"];
    [sectionList addObject:sectionHeaderDic];
    // time list
    NSArray *timeArray = [NSArray arrayWithObjects:@"time 01",@"time 01",@"time 01", nil];
    NSDictionary *timeDic = [NSDictionary dictionaryWithObject:timeArray forKey:@"time"];
    // private room
    NSArray *pRoomArray = [NSArray arrayWithObjects:@"room 01",@"room 02", nil];
    NSDictionary *pRoomDic = [NSDictionary dictionaryWithObject:pRoomArray forKey:@"pRoom"];
    // parking
    NSArray *parkingArray = [NSArray arrayWithObjects:@"park 01",@"park 02",@"park 03", nil];
    NSDictionary *parkingDic = [NSDictionary dictionaryWithObject:parkingArray forKey:@"parking"];
    // smoking
    NSArray *smokingArray = [NSArray arrayWithObjects:@"smoke 01",@"smoke 02",@"smoke 03", nil];
    NSDictionary *smokingDic = [NSDictionary dictionaryWithObject:smokingArray forKey:@"smoking"];
    // add all dictionary to list
    [list addObject:timeDic];
    [list addObject:pRoomDic];
    [list addObject:parkingDic];
    [list addObject:smokingDic];
    // Scroll the table view to the top before it appears
    [self.tableView reloadData];
}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    //Number of section
    return [list count];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    //Get the dictionary object
    NSDictionary *dictionary = [list objectAtIndex:section];
    NSArray *array;
    switch (section) {
        case 0:
            // time array
            array = [dictionary objectForKey:@"time"];
            break;
        case 1:
            // pRoom array
            array = [dictionary objectForKey:@"pRoom"];
            break;
        case 2:
            // parking array
            array = [dictionary objectForKey:@"parking"];
            break;
        case 3:
            // smoking array
            array = [dictionary objectForKey:@"smoking"];
            break;
        default:
            break;
    }
    //Number of rows
    return [array count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Budget";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
        UITableViewCellStyleSubtitle;
    }
    //Get the dictionary object
    NSDictionary *dictionary = [list objectAtIndex:indexPath.section];
    NSArray *array;
    switch (indexPath.section) {
        case 0:
            // time array
            array = [dictionary objectForKey:@"time"];
            if (indexPath.row == row0 ) {
                cell.accessoryType=UITableViewCellAccessoryCheckmark;
            }else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
            break;
        case 1:
            // pRoom array
            array = [dictionary objectForKey:@"pRoom"];
            if (indexPath.row == row1) {
                cell.accessoryType=UITableViewCellAccessoryCheckmark;
            }else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
            break;
        case 2:
            // parking array
            array = [dictionary objectForKey:@"parking"];
            if (indexPath.row == row2) {
                cell.accessoryType=UITableViewCellAccessoryCheckmark;
            }else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
            break;
        case 3:
            // smoking array
            array = [dictionary objectForKey:@"smoking"];
            if (indexPath.row == row3) {
                cell.accessoryType=UITableViewCellAccessoryCheckmark;
            }else{
                cell.accessoryType = UITableViewCellAccessoryNone;
            }
            break;
        default:
            break;
    }
    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    NSLog(@"index cell");
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSString *title = nil;
    //Get the dictionary object
    NSDictionary *dictionary = [sectionList objectAtIndex:0];
    NSArray *array = [dictionary objectForKey:@"section"];
    title = [array objectAtIndex:section];
    return title;
}

#pragma mark -
#pragma mark Table view selection
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
    switch(indexPath.section)
    {
        case 0:
        {
            UITableViewCell *cell1 = [tableView cellForRowAtIndexPath:indexPath];
            if ([[tableView cellForRowAtIndexPath:indexPath ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                cell1.accessoryType = UITableViewCellAccessoryNone;
                row0 = 100;
                timeString = @"";
            }else {
                NSIndexPath *SIndexPath0 = [NSIndexPath indexPathForRow:row0 inSection:0];
                if ([[tableView cellForRowAtIndexPath:SIndexPath0 ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                    [[tableView cellForRowAtIndexPath:SIndexPath0] setAccessoryType:UITableViewCellAccessoryNone];
                }
                if (oldIndexPath0 == nil) {
                    oldIndexPath0 = indexPath;
                }
                UITableViewCell *cell2 = nil;
                if (oldIndexPath0 != indexPath) {
                    cell2 = [tableView cellForRowAtIndexPath:oldIndexPath0];
                }
                cell1.accessoryType = UITableViewCellAccessoryCheckmark;
                if (cell2) {
                    cell2.accessoryType = UITableViewCellAccessoryNone;
                }
                //Get the dictionary object
                NSDictionary *dictionary = [list objectAtIndex:indexPath.section];
                NSArray *array = [dictionary objectForKey:@"time"];
                timeString = [array objectAtIndex:indexPath.row];
                row0 = indexPath.row;
                oldIndexPath0 = nil;
            }
            select0 = @"marked";
            break;
        }
        case 1:
        {
            UITableViewCell *cell1 = [tableView cellForRowAtIndexPath:indexPath];
            if ([[tableView cellForRowAtIndexPath:indexPath ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                cell1.accessoryType = UITableViewCellAccessoryNone;
                row1 = 100;
                pRoomString = @"";
            }else {
                NSIndexPath *SIndexPath1 = [NSIndexPath indexPathForRow:row1 inSection:1];
                if ([[tableView cellForRowAtIndexPath:SIndexPath1 ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                    [[tableView cellForRowAtIndexPath:SIndexPath1] setAccessoryType:UITableViewCellAccessoryNone];
                }
                if (oldIndexPath1 == nil) {
                    oldIndexPath1 = indexPath;
                }
                UITableViewCell *cell2 = nil;
                if (oldIndexPath1 != indexPath) {
                    cell2 = [tableView cellForRowAtIndexPath:oldIndexPath1];
                }
                cell1.accessoryType = UITableViewCellAccessoryCheckmark;
                if (cell2) {
                    cell2.accessoryType = UITableViewCellAccessoryNone;
                }
                //Get the dictionary object
                NSDictionary *dictionary = [list objectAtIndex:indexPath.section];
                NSArray *array = [dictionary objectForKey:@"pRoom"];
                pRoomString = [array objectAtIndex:indexPath.row];
                row1 = indexPath.row;
                oldIndexPath1 = nil;
            }
            select1 = @"marked";
            break;
        }
        case 2:
        {
            UITableViewCell *cell1 = [tableView cellForRowAtIndexPath:indexPath];
            if ([[tableView cellForRowAtIndexPath:indexPath ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                cell1.accessoryType = UITableViewCellAccessoryNone;
                row2 = 100;
                parkingString = @"";
            }else {
                NSIndexPath *SIndexPath2 = [NSIndexPath indexPathForRow:row2 inSection:2];
                if ([[tableView cellForRowAtIndexPath:SIndexPath2 ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                    [[tableView cellForRowAtIndexPath:SIndexPath2] setAccessoryType:UITableViewCellAccessoryNone];
                }
                if (oldIndexPath2 == nil) {
                    oldIndexPath2 = indexPath;
                }
                UITableViewCell *cell2 = nil;
                if (oldIndexPath2 != indexPath) {
                    cell2 = [tableView cellForRowAtIndexPath:oldIndexPath2];
                }
                cell1.accessoryType = UITableViewCellAccessoryCheckmark;
                if (cell2) {
                    cell2.accessoryType = UITableViewCellAccessoryNone;
                }
                //Get the dictionary object
                NSDictionary *dictionary = [list objectAtIndex:indexPath.section];
                NSArray *array = [dictionary objectForKey:@"parking"];
                parkingString = [array objectAtIndex:indexPath.row];
                row2 = indexPath.row;
                oldIndexPath2 = nil;
            }
            select2 = @"marked";
            break;
        }
        case 3:
        {
            UITableViewCell *cell1 = [tableView cellForRowAtIndexPath:indexPath];
            if ([[tableView cellForRowAtIndexPath:indexPath ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                cell1.accessoryType = UITableViewCellAccessoryNone;
                row3 = 100;
                smokingString = @"";
            }else {
                NSIndexPath *SIndexPath3 = [NSIndexPath indexPathForRow:row3 inSection:3];
                if ([[tableView cellForRowAtIndexPath:SIndexPath3 ] accessoryType] == UITableViewCellAccessoryCheckmark) {
                    [[tableView cellForRowAtIndexPath:SIndexPath3] setAccessoryType:UITableViewCellAccessoryNone];
                }
                if (oldIndexPath3 == nil) {
                    oldIndexPath3 = indexPath;
                }
                UITableViewCell *cell2 = nil;
                if (oldIndexPath3 != indexPath) {
                    cell2 = [tableView cellForRowAtIndexPath:oldIndexPath3];
                }
                cell1.accessoryType = UITableViewCellAccessoryCheckmark;
                if (cell2) {
                    cell2.accessoryType = UITableViewCellAccessoryNone;
                }
                //Get the dictionary object
                NSDictionary *dictionary = [list objectAtIndex:indexPath.section];
                NSArray *array = [dictionary objectForKey:@"smoking"];
                smokingString = [array objectAtIndex:indexPath.row];
                row3 = indexPath.row;
                oldIndexPath3 = nil;
            }
            select3 = @"marked";
            break;
        }
        default:
            break;
    }
}
// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];
    // Cancle button and add an event handler
    self.navigationItem.leftBarButtonItem =
    [[UIBarButtonItem alloc] initWithTitle:@"Cancle"
                                     style:UIBarButtonSystemItemCancel
                                    target:self
                                    action:@selector(handleCancle:)];
    // Cancle button and add an event handler
    self.navigationItem.rightBarButtonItem =
    [[UIBarButtonItem alloc] initWithTitle:@"Use"
                                     style:UIBarButtonItemStyleBordered
                                    target:self
                                    action:@selector(handleUse:)];
}
- (void) handleCancle:(id)sender
{
    // pop the controller
    [self.navigationController popViewControllerAnimated:YES];
}
- (void) handleUse:(id)sender{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSString *fileName;
    // Get row index value
    fileName = [NSHomeDirectory() stringByAppendingPathComponent:@"tmp/othersString.txt"];
    NSData *rowValData = [fileManager   contentsAtPath:fileName];
    // From NSData to NSString
    NSString *rowValString = [[NSString alloc] initWithData:rowValData encoding:NSUTF8StringEncoding];
    NSString *oldTimeString = @"";
    NSString *oldpRoomString = @"";
    NSString *oldParkingString = @"";
    NSString *oldSmokingString = @"";
    if (rowValString) {
        // spit row string
        NSArray *rowValArray = [rowValString componentsSeparatedByString:@":"];
        for (int i=0; i<[rowValArray count]; i++) {
            if ([rowValArray objectAtIndex:i] != @"") {
                // set row value
                if (i == 0 ) {
                    oldTimeString = [rowValArray objectAtIndex:0];
                }
                if (i == 1 ) {
                    oldpRoomString = [rowValArray objectAtIndex:1];
                }
                if (i == 2 ) {
                    oldParkingString = [rowValArray objectAtIndex:2];
                }
                if (i == 3) {
                    oldSmokingString = [rowValArray objectAtIndex:3];
                }
            }
        }
    }
    if (select0 == @"") {
        timeString = oldTimeString;
    }
    if (select1 == @"") {
        pRoomString = oldpRoomString;
    }
    if (select2 == @"") {
        parkingString = oldParkingString;
    }
    if (select3 == @"") {
        smokingString = oldSmokingString;
    }
    // make othersString string
    othersString = [NSString stringWithFormat:@"%@:%@:%@:%@", timeString, pRoomString, parkingString, smokingString];
    // write othersString to othersString.txt file
    fileName= [NSHomeDirectory() stringByAppendingPathComponent:@"tmp/othersString.txt"];
    NSData *othersData = [othersString dataUsingEncoding:NSUTF8StringEncoding];
    [fileManager createFileAtPath:fileName contents:othersData attributes:nil];
    // make row data in string
    NSString *rowString = [NSString stringWithFormat:@"%i:%i:%i:%i", row0,row1,row2,row3];
    // write othersString to othersString.txt file
    fileName = [NSHomeDirectory() stringByAppendingPathComponent:@"tmp/rowString.txt"];
    NSData *rowData = [rowString dataUsingEncoding:NSUTF8StringEncoding];
    [fileManager createFileAtPath:fileName contents:rowData attributes:nil];
    // pop the controller
    [self.navigationController popViewControllerAnimated:YES];
}
- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc. that aren't in use.
}
- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}
- (void)dealloc {
    [super dealloc];
    [list release];
}
@end 
```

从这篇[文章](http://g-bleu.co.jp/blog/media/iphone/from-every-section-of-uitableview-can-select-only-one-cell)中得到了这些东西，因为这是日文的，所以我改变了它。感谢作者。

# jquery - 如果存在滚动条，则将类添加到 $(this) div

> ID：13965021
> 
> 赞同：0
> 
> 时间：2012-12-20T03:50:11.150
> 
> 标签：jquery

我已经阅读了有关检查 div 是否有滚动条以及我的代码是否有效的各种帖子。如果滚动条存在，我需要做的是向 div 添加一个类，但不必为每个有问题的 div 编写代码。如果我使用类或 ID 专门命名 div，则代码可以工作，但我需要一种使用“this”使其工作的方法。

这是我的代码：

```
(function($) {
    $.fn.hasScrollBar = function() {
        return this.get(0).scrollHeight > this.innerHeight();
    }
})(jQuery);

$(function(){

if ($('div').hasScrollBar()){
    var scrollObj = $(this);
    scrollObj.addClass('scrollable');
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:51:09.390

使用 an`each`循环遍历`div`s，这将为您提供正确的`this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T03:52:51.690

你可以这样做：

```
$("div").each(function() {
   if( $(this).hasScrollBar() ) {
      $(this).addClass('scrollable');
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:02:16.300

## 选项1

我想你只想要这个`each`方法：

```
$("div").each(function() {
    if($(this).hasScrollBar()) {
        $(this).addClass('scrollable');
    }
}); 
```

## 选项 2

但如果你想聪明一点，你也可以这样做`filter`：

```
$('div').filter(function() { 
    return $(this).hasScrollBar(); 
}).addClass('scrollable'); 
```

jsFiddle 上的演示：http: [//jsfiddle.net/Cg3bv/](http://jsfiddle.net/Cg3bv/)

## 选项 3

如果你想更聪明，你可以使用`hasScrollBar`它自己作为过滤器回调：

```
$('div').filter($.fn.hasScrollBar).addClass('scrollable'); 
```

不过，这需要`hasScrollbar`稍微改变：

```
$.fn.hasScrollBar = function() {
    return $(this).get(0).scrollHeight > $(this).innerHeight();
} 
```

我认为你应该这样做。制作`this`原始 DOM 元素和`$(this)`包装的 jQuery 对象是通常的模式，而不是假设`this`总是`$`已经被 -wrapped。此外，如果您将其包装两次（即不小心调用`$`了已经是 JQ 对象的东西），将会有一些性能开销，但不会完全中断。尝试在原始 DOM 对象上调用 JQ 方法只会失败。

jsFiddle 上的演示：http: [//jsfiddle.net/Qd2ZC/](http://jsfiddle.net/Qd2ZC/)

# html - 在另一个 div 中添加一个 div 的内容，不起作用

> ID：13965026
> 
> 赞同：0
> 
> 时间：2012-12-20T03:50:35.947
> 
> 标签：html, add

我有多个 div，我想在其中获取它们的内容并将其放置在具有相同 ID 的其他 div 中。这是我的示例 HTML

```
<!-- Div to get content from -->
<div id="sharedContent">
    <div id="testContent">
        <p>Here is some content</p>
    </div>

    <div id="testContent2">
        <p>Here is some second content</p>
    </div>
</div>

<!-- Divs to put content in -->
<div id="testContent" class="shared">
   test content
</div>​

<div id="testContent2" class="shared">
   test content2
</div>​ 
```

这是我的 Jquery：

```
var contentID = ('#' + $(this).attr('id'));
var sharedContent = $('#sharedContent' + ' ' + contentID).html();

$('div.shared').each(function(){
    $(contentID).html(sharedContent);
}); 
```

但是，这是行不通的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:57:24.077

一个ID只能使用一次，所以我认为这就是问题所在。看到这个[小提琴](http://jsfiddle.net/licson0729/LatM3/)，它解决了你的问题。

这是HTML：

```
<!-- Div to get content from -->
<div id="sharedContent">
    <div id="testContent">
        <p>Here is some content</p>
    </div>

    <div id="testContent2">
        <p>Here is some second content</p>
    </div>
</div>

<!-- Divs to put content in -->
<div data-id="testContent" class="shared">
</div>

<div data-id="testContent2" class="shared">
</div>​ 
```

这是JQuery代码：

```
$('div.shared').each(function() {
    var sharedContent = $('#'+$(this).attr('data-id')).html();
    $(this).html(sharedContent);
});​ 
```

# mysql - 选择 DIFFTIME 的问题

> ID：13965028
> 
> 赞同：0
> 
> 时间：2012-12-20T03:50:58.140
> 
> 标签：mysql, select, time, nested, datediff

我想知道两个日期之间的时差。例如：

```
 SELECT TIMEDIFF('2012-12-19 22:00:00','2012-12-10 19:00:00');
+-------------------------------------------------------+
| TIMEDIFF('2012-12-19 22:00:00','2012-12-10 19:00:00') |
+-------------------------------------------------------+
| 219:00:00                                             |
+-------------------------------------------------------+
1 row in set (0.00 sec) 
```

现在我想提取时间。

```
mysql> SELECT HOUR(SELECT TIMEDIFF('2012-12-19 22:00:00','2012-12-10 19:00:00'));
ERROR 1064 (42000): 
```

为什么不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T03:54:00.970

尝试：

```
SELECT HOUR(TIMEDIFF('2012-12-19 22:00:00','2012-12-10 19:00:00')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T08:47:09.353

这可以解决您的问题：

```
SELECT TIME_FORMAT(TIMEDIFF('2012-12-19 22:00:00','2012-12-10 19:00:00'),'%H'); 
```

# mysql - 从不同的 MySQL 数据库表和不同的列名复制数据

> ID：13965029
> 
> 赞同：0
> 
> 时间：2012-12-20T03:50:58.327
> 
> 标签：mysql, joomla

我需要将故事从 Geeklog 数据库导入 Joomla 数据库。两个数据库都在同一台服务器上。MySQL 版本为 5.1.65

我将调用 Geeklog 数据库**`mysite_gklg`**和 Joomla 数据库**`mysite_joom`**。Geeklog 中的故事表是**`gl_stories`**，而 Joomla 中的表是**`jos_content`**。

我需要`INSERT`从 Geeklog gl_stories 中获取以下列：

```
 date, title, introtext, hits, meta_description, meta_keywords. 
```

这些将被插入到 Joomla jos_content 以下列中：

```
created, title, introtext, hits, metadesc, metakey. 
```

我正在寻找正确的语法来运行 MySQL 查询。对不起，我没有太多的编程技能。并提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:06:33.953

```
INSERT INTO Geeklog.gl_stories (date, title, introrext, hits, meta_description, meta_keywords)    
   SELECT created, title, introtext, hits, metadesc, metakey
   FROM Joomla.jos_content; 
```

没有理由这应该如此难以理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:56:37.217

INSERT INTO Geeklog.gl_stories(date,title,introrext,hits,meta_description,meta_keywords) select created,title,introtext,hits,metadesc,metakey FROM Joomla.jos_content;

# jquery - jquery - 拖动有序列表项时，后续项目的编号始终增加 1

> ID：13965032
> 
> 赞同：10
> 
> 时间：2012-12-20T03:51:16.720
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-sortable

虽然`jQuery sortable widget`在大多数情况下工作正常，但`ordered list`在`numbering gets botched up when we drag an element`. 下面是一个示例程序来说明这一点：

```
<!DOCTYPE html>
<html>

    <head>
        <script src="jquery-1.6.2.min.js"></script>
        <script src="jquery-ui-1.8.16.custom.min.js"></script>
        <script>
            $(document).ready(function () {
                $('ol').sortable();
            });
        </script>
    </head>

    <body>
        <ol>
            <li>
                <label for="name">Name</label>
                <input type="text" id="name" />
            </li>
            <li>
                <label for="class">Class</label>
                <input type="text" id="class" />
            </li>
        </ol>
    </body>

</html> 
```

拖动前：

![在此处输入图像描述](../Images/ba68c8d34be3e11601026aaf56906ca0.png)

在拖动过程中：

![在此处输入图像描述](../Images/a5dacef169b02660053a44e50ea16cf5.png)

拖动完成后，排序将恢复。此错误之前已注意到但未修复。有没有人找到治疗这个的？

[这](http://jsfiddle.net/Rf7jw/)是它的小提琴

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T05:57:53.793

这是由`placeholder`jquery UI 引起的，它会在可排序开始时自动添加到您的列表中。实际上，您可以简单地在开始事件上隐藏占位符或创建自己的不显示的类。

这里的想法：

```
$(document).ready(function () {
    $('ol').sortable({
        start: function( event, ui ){
            $(ui.item).parent().find('.ui-sortable-placeholder').hide();
        },
    });
}); 
```

或者：

```
<script>
    $(document).ready(function () {
        $('ol').sortable({placeholder: "sortable-placeholder"});
    });
</script>

<style>
    .sortable-placeholder {display: none;}
</style> 
```

**编辑：**

您还可以实际将占位符显示设置为阻止，以便不将其假定为列表子项：

```
.sortable-placeholder {
    height: 20px;
    display: block;
} 
```

这里修改[了 FIDDLE](http://jsfiddle.net/Rf7jw/7/)。

# jquery - 使用 jQuery (window).scroll 淡化 HTML5 音频（调整音量）

> ID：13965034
> 
> 赞同：2
> 
> 时间：2012-12-20T03:51:20.077
> 
> 标签：jquery, html, scroll, html5-audio

我正在尝试制作一个使用 html5 音频在后台循环声音文件并在用户向下滚动时淡出的页面。理想情况下，它也会随着用户向上滚动而淡入。我知道我很遥远，但这是我正在使用的：

html:

```
 <html lang="en-US">
<head>
    <style>article {height:1000px; background:yellow;}</style>
</head>
<body>

<article>
    <audio loop id="soundTour" src="longdong.wav"></audio>
</article>

<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>

</body>
</html> 
```

jQuery：

```
$(document).ready(function() {

var audioElm = $('#soundTour').get(0);
audioElm.play();
audioElm.volume=1;

$(window).scroll(function () { 
        //audioElm.volume=.1;
        var value = $(window).scroll("value");
        audioElm.volume = (value / 100);
});  
}); 
```

[http://jsfiddle.net/8X6Wn/](http://jsfiddle.net/8X6Wn/)

有没有人想对这个进行一番尝试？谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:10:58.650

您可以使用`.scrollTop()`来确定用户滚动了多远：

```
$(document).ready(function() {
    var audioElm = $('#soundTour').get(0);
    audioElm.play();

    var height = $(document).height() - $(window).height();

    $(window).scroll(function() {
        audioElm.volume = 1 - $(window).scrollTop() / height;
        console.log(audioElm.volume);
    });
});​ 
```

**演示：http: [//jsfiddle.net/8X6Wn/3/](http://jsfiddle.net/8X6Wn/3/)**

# merge - 数据框合并在熊猫（0.7.3）中创建重复记录

> ID：13965036
> 
> 赞同：1
> 
> 时间：2012-12-20T03:51:52.167
> 
> 标签：merge, duplicates, pandas

当我合并两个格式为 (date, someValue) 的 CSV 文件时，我看到一些重复的记录。

*如果我将记录减少到一半，问题就会消失。但是，如果我将两个文件的大小加倍，它会变得更糟。感谢任何帮助！*

### 我的代码：

```
i = pd.DataFrame.from_csv('i.csv')
i = i.reset_index()
e = pd.DataFrame.from_csv('e.csv')
e = e.reset_index()

total_df = pd.merge(i, e, right_index=False, left_index=False,
                    right_on=['date'], left_on=['date'], how='left')
total_df = total_df.sort(column='date') 
```

（注：11/15、11/16、12/17、12/18 的重复记录。）

```
In [7]: total_df
Out[7]:
                  date  Cost  netCost
25 2012-11-15 00:00:00     1        2
26 2012-11-15 00:00:00     1        2
31 2012-11-16 00:00:00     1        2
32 2012-11-16 00:00:00     1        2
37 2012-11-17 00:00:00     1        2
2  2012-11-18 00:00:00     1        2
5  2012-11-19 00:00:00     1        2
8  2012-11-20 00:00:00     1        2
11 2012-11-21 00:00:00     1        2
14 2012-11-22 00:00:00     1        2
17 2012-11-23 00:00:00     1        2
20 2012-11-24 00:00:00     1        2
23 2012-11-25 00:00:00     1        2
29 2012-11-26 00:00:00     1        2
35 2012-11-27 00:00:00     1        2
0  2012-11-28 00:00:00     1        2
3  2012-11-29 00:00:00     1        2
6  2012-11-30 00:00:00     1        2
9  2012-12-01 00:00:00     1        2
12 2012-12-02 00:00:00     1        2
15 2012-12-03 00:00:00     1        2
18 2012-12-04 00:00:00     1        2
21 2012-12-05 00:00:00     1        2
24 2012-12-06 00:00:00     1        2
30 2012-12-07 00:00:00     1        2
36 2012-12-08 00:00:00     1        2
1  2012-12-09 00:00:00     2        2
4  2012-12-10 00:00:00     2        2
7  2012-12-11 00:00:00     2        2
10 2012-12-12 00:00:00     2        2
13 2012-12-13 00:00:00     1        2
16 2012-12-14 00:00:00     2        2
19 2012-12-15 00:00:00     2        2
22 2012-12-16 00:00:00     2        2
27 2012-12-17 00:00:00     1        2
28 2012-12-17 00:00:00     1        2
33 2012-12-18 00:00:00     1        2
34 2012-12-18 00:00:00     1        2 
```

### i.csv

```
date,Cost
2012-11-15 00:00:00,1
2012-11-16 00:00:00,1
2012-11-17 00:00:00,1
2012-11-18 00:00:00,1
2012-11-19 00:00:00,1
2012-11-20 00:00:00,1
2012-11-21 00:00:00,1
2012-11-22 00:00:00,1
2012-11-23 00:00:00,1
2012-11-24 00:00:00,1
2012-11-25 00:00:00,1
2012-11-26 00:00:00,1
2012-11-27 00:00:00,1
2012-11-28 00:00:00,1
2012-11-29 00:00:00,1
2012-11-30 00:00:00,1
2012-12-01 00:00:00,1
2012-12-02 00:00:00,1
2012-12-03 00:00:00,1
2012-12-04 00:00:00,1
2012-12-05 00:00:00,1
2012-12-06 00:00:00,1
2012-12-07 00:00:00,1
2012-12-08 00:00:00,1
2012-12-09 00:00:00,2
2012-12-10 00:00:00,2
2012-12-11 00:00:00,2
2012-12-12 00:00:00,2
2012-12-13 00:00:00,1
2012-12-14 00:00:00,2
2012-12-15 00:00:00,2
2012-12-16 00:00:00,2
2012-12-17 00:00:00,1
2012-12-18 00:00:00,1 
```

### e.csv

```
date,netCost
2012-11-15 00:00:00,2
2012-11-16 00:00:00,2
2012-11-17 00:00:00,2
2012-11-18 00:00:00,2
2012-11-19 00:00:00,2
2012-11-20 00:00:00,2
2012-11-21 00:00:00,2
2012-11-22 00:00:00,2
2012-11-23 00:00:00,2
2012-11-24 00:00:00,2
2012-11-25 00:00:00,2
2012-11-26 00:00:00,2
2012-11-27 00:00:00,2
2012-11-28 00:00:00,2
2012-11-29 00:00:00,2
2012-11-30 00:00:00,2
2012-12-01 00:00:00,2
2012-12-02 00:00:00,2
2012-12-03 00:00:00,2
2012-12-04 00:00:00,2
2012-12-05 00:00:00,2
2012-12-06 00:00:00,2
2012-12-07 00:00:00,2
2012-12-08 00:00:00,2
2012-12-09 00:00:00,2
2012-12-10 00:00:00,2
2012-12-11 00:00:00,2
2012-12-12 00:00:00,2
2012-12-13 00:00:00,2
2012-12-14 00:00:00,2
2012-12-15 00:00:00,2
2012-12-16 00:00:00,2
2012-12-17 00:00:00,2
2012-12-18 00:00:00,2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:13:55.283

这看起来确实像 pandas 0.7.3 或 numpy 1.6 的错误。仅当合并的列是日期（内部转换为 numpy.datetime64）时才会发生这种情况。我的解决方案是将日期转换为字符串-

```
def _DatetimeToString(datetime64):
  timestamp = datetime64.astype(long)/1000000000
  return datetime.fromtimestamp(timestamp).strftime('%Y-%m-%d')

i = pd.DataFrame.from_csv('i.csv')
i = i.reset_index()
i['date'] = i['date'].map(_DatetimeToString)
e = pd.DataFrame.from_csv('e.csv')
e = e.reset_index()
i['date'] = i['date'].map(_DatetimeToString)

total_df = pd.merge(i, e, right_index=False, left_index=False,
                    right_on=['date'], left_on=['date'], how='left')
total_df = total_df.sort(column='date') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-05T18:26:13.503

这个问题/错误也出现在我身上。我没有合并日期时间序列，但是，我在左侧数据框中确实有一个日期时间序列。我的解决方案是去重复：

```
len(pophist) 
```

2347

```
pop_merged = pd.merge(left=pophist, right=df_labels, how='left', 
             left_on ='candidate', right_on ='Slug', indicator = True)

pop_merged.shape 
```

3303

```
pop_merged2 = pop_merged.drop_duplicates() #note dedupping is required due to issue in how pandas handles datetime dtypes on merge.  

len(pop_merged2) 
```

2347

# java - Android 中的 Java，帮助连接到 wifi 网络，如果不成功则尝试重新连接

> ID：13965039
> 
> 赞同：1
> 
> 时间：2012-12-20T03:52:14.930
> 
> 标签：java, android, networking, network-programming, wifi

我正在实现一种方法，如果连接到 wifi 网络失败，它会尝试使用警报对话框重新连接，这是我到目前为止的代码

```
public boolean autoConnect() {
      String networkSSID = "xxxxx";
      boolean connected = false;
      WifiConfiguration conf = new WifiConfiguration();

      conf.SSID = "\"" + networkSSID + "\"";
      conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
      WifiManager wifiManager = (WifiManager)getSystemService(Context.WIFI_SERVICE); 
      wifiManager.addNetwork(conf);
      wifiManager.startScan();
      List<ScanResult> list = wifiManager.getScanResults();
      AlertDialog alertDialog = new AlertDialog.Builder(CarNannyv3Activity.this).create();
      alertDialog.setTitle("xxxxxxxx Not Available");  
      alertDialog.setMessage("Please make sure xxxxxx is turned on ");  
      alertDialog.setButton("Reconnect", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                autoConnect();
                dialog.dismiss();

            } });
      for( ScanResult i : list ) {
          if(i.SSID.equals("\"" + networkSSID + "\"")) {

               //wifiManager.enableNetwork(i.networkId, true);
               wifiManager.reconnect();               
               return connected = true;

          }else{

                alertDialog.show();
          }
       } 
      return connected;
  } 
```

我得到两件事之一，它要么无限循环重新连接对话框，要么根本不显示，请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:32:45.930

尝试使用它，它在我的情况下工作::

```
 WifiManager notif_manager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
        List<ScanResult> scan_list = notif_manager.getScanResults();
        for (ScanResult scan_ap : scan_list) 
        {
            if (scan_ap.SSID.equals("\"" + networkSSID + "\"")) 
            {

            /* Create a WifiConfig */
                WifiConfiguration eliteAp = new WifiConfiguration();

                /* AP Name */
                eliteAp.SSID = "\"" + ssidString + "\"";

                /* Priority */
                eliteAp.priority = 40;

                /* Enable Hidden SSID */
                eliteAp.hiddenSSID = false;
                .
                .
                .
                .
                .
                .       
                eliteAp.status = WifiConfiguration.Status.ENABLED;
                int res = wifi_manager.addNetwork(eliteAp);
                boolean d = wifi_manager.enableNetwork(res, true);
                break;

            }
        } 
```

# c# - 如何在 C# 中从 mdi 容器表单的可用空间设置子表单库的大小？

> ID：13965040
> 
> 赞同：2
> 
> 时间：2012-12-20T03:52:16.727
> 
> 标签：c#, winforms, mdi, mdichild, mdiparent

我的问题是我想让子窗体占用MDI容器的空闲空间

这是我尝试过的代码

在我的 MDI 容器表单加载事件中，我有这行代码调用子表单

```
childform = new ppt.MyChildForm();
            childform.MdiParent = this;
            childform.Size = childform.MdiParent.ClientSize;
            childform.Show(); 
```

但是我认为子窗体比它的父窗体大，因为它包含一个滚动条，我该如何解决这个问题呢？

![在此处输入图像描述](../Images/72b7e91e09e111581b116b690489e803.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:59:38.133

如果`AutoSize`property 设置为 true，则更改 of`Size`无效。
更好的做法是将`Dock`子窗体的属性设置为`DockStyle.Fill`. 它将始终填充其父级的整个客户端大小，因此您不必担心父级调整大小。

# php - 直接调用时，mejs_media_shortcode 输出两个播放器

> ID：13965044
> 
> 赞同：0
> 
> 时间：2012-12-20T03:52:28.343
> 
> 标签：php, wordpress, function, mediaelement.js

我正在从另一个文件中调用 MediaElement.js 插件的 mejs_media_shortcode PHP 函数（[此处](https://plugins.svn.wordpress.org/media-element-html5-video-and-audio-player/tags/2.9.1/mediaelement-js-wp.php)），它正在写出普通的 HTML5 和 Flash 播放器。页面上的其他人工作正常。删除不需要的播放器时我缺少什么东西吗？

# qt - Qt 主窗口中的多个页面

> ID：13965045
> 
> 赞同：0
> 
> 时间：2012-12-20T03:52:35.600
> 
> 标签：qt

我是 Qt 的新手。

我有一个 Qt 主窗口，里面有一些信息。

我只能在窗口中填写有限的信息。如果我有更多信息，那么我应该有一个“NEXT”选项卡/按钮，可以在同一窗口内转到下一页，还有一个后退按钮。

此外，还有一些静态信息在所有页面/选项卡中保持不变。

所以，我想问的是..我如何限制信息让我们说..在一页中只有 10 行，如果更多，它应该转到下一页，在同一个窗口内，并且能够切换它们之间？以及如何在所有页面中保留永久内容。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:54:12.990

类似巫师的东西？见[http://qt-project.org/doc/qt-4.8/dialogs-classwizard.html](http://qt-project.org/doc/qt-4.8/dialogs-classwizard.html)

Mainwindows 部分的示例非常好

# css - IE 中的 Div 高度不同 与 Firefox 和 Chrome 比较

> ID：13965047
> 
> 赞同：0
> 
> 时间：2012-12-20T03:52:47.587
> 
> 标签：css, html, xhtml

当我将高度添加到 div 标签时，高度不同，即和 firefox。我不能把 100% 放在 div 标签上。你能帮我解决这个问题吗？我已在此处附加 Css 代码，请[单击此处](http://www.excelproperty.lk/property/newspaper-advertising/)查看该站点。

```
#payment{
    width: 265px;
    border: 1px solid #cecece;
    border-radius: 8px;
    -webkit-box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    -moz-box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    box-shadow: 0 2px 7px rgba(50,50,50,0.46);
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    display: block;
    position: absolute;
    float: right;
    height: 230px;
    padding: 10px;
    left: 549px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:42:28.600

这可能是填充的问题。IE 和 firefox 以不同的方式解析填充。Firefox 使用 div 的高度/宽度添加填充（因此总高度/宽度将定义为高度/宽度+填充），其中 IE 没有添加。旧版本 (< IE9) 会出现这种情况。

您可以尝试关注旧版本的 IE。

```
<!--[if lt IE 9]>
#payment{
    width: 285px; /* original width + padding on left and right */
    height: 250px;/* original height + padding on top and bottom */
    padding: 10px;
}
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T04:22:15.250

看起来您在页面上使用了 Quirk 模式文档类型。

切换

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

到

```
<!DOCTYPE> 
```

或者比怪癖模式更合适的东西。

# python - 将 C/C++ 库与 Python 连接

> ID：13965051
> 
> 赞同：3
> 
> 时间：2012-12-20T03:53:21.140
> 
> 标签：python, boost, swig, cython, boost-python

我有一个需要能够与 python 交互的 C++ 库。我阅读[了这个问题](https://stackoverflow.com/questions/456884/extending-python-to-swig-not-to-swig-or-cython)以了解我需要适应的选择。

我看到了 SWIG 和 Cython 并想选择 SWIG，主要是因为我的 python 编程经验非常少。但是，我意识到使用 Swig 我必须为每个类编写一个接口（.i 扩展）。现在，我的 C++ 项目很大，我觉得我需要很多时间才能将包装器到位（或者我可能错了）。

所以现在，由于我的应用程序很大，我需要做出选择。在引用的线程中，我遇到了 Boost Python。现在，我无法再决定并希望得到可以告诉我其中一种优缺点的人的意见。请注意，我的偏好是易于使用以及可以多快完成。我愿意为此牺牲系统性能。如果有人可以为我提供一个 SWIG 实现的项目或 Boost Python 实现的项目链接，我将不胜感激（一个完整的模块而不是示例教程会更好！）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:26:06.183

Boost::python 在 C++ 和 Python 之间提供了一个几乎没有包装的接口。它还允许您编写自定义转换器和其他使 Python 接口更好的整洁的东西。接口是纯 C++ 的，但它们依赖于模板和巧妙的设计模式，使其看起来非常漂亮和声明性。您还可以从编译器直接检查您的连接器代码中受益。

使用 Swig，您可以在 Swig 自己的 DSL 中编写接口声明，这需要几天时间才能掌握。此外，它总是插入一个包装层，所以它可能会慢一些。然而，它确实有一个很好的特性，可以自动为你转换很多东西，而不必声明任何额外的东西。它生成的包装器很难调试。

恕我直言 boost::python 是更好的选择，因为您可以直接使用 CPython 的本机 C 接口。我使用 Swig 进行 Java 和 C++ 交互，因为 JNI 是一个熊，Python 的 C 接口实际上完全可以自己使用。

如果你已经有一堆 Swig 包装器，我会保留它们，因为你必须重做所有这些工作。但是，开始一个新项目，或者如果您需要最大的性能，boost::python 一路走好！

# java - Primefaces 中不呈现特定的错误消息？

> ID：13965052
> 
> 赞同：1
> 
> 时间：2012-12-20T03:53:48.903
> 
> 标签：java, jsf, primefaces

我想显示特定的错误消息。这是我的表格。

```
<h:form id="userEntryForm">
    <p:message for="email" styleClass="error-message"/>
    <p:inputText value="#{UserActionBean.user.email}" required="true" id="email" />                                         
</h:form> 
```

当我如下使用一个参数 FacesMessage 构造函数时，

```
 public boolean isValid() {
    if(...) {
        FacesMessage facesMessage = new FacesMessage("Error : Email does not match.")
        FacesContext.getCurrentInstance().addMessage("entryForm:newPassword", facesMessage);
    }
 } 
```

错误消息以信息样式 css 正确显示。我想显示错误样式，因此我使用了三个参数 FacesMessage 构造函数，

```
FacesMessage facesMessage = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Error : Email does not match.", "") 
```

出现错误标志但不呈现如下错误消息。![在此处输入图像描述](../Images/65909843d95fc8fd9a475f04aeb3bc89.png)

出了什么问题？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:31:12.700

两者都`h:message`显示`p:message`默认的详细信息。您可以将您的消息作为您的第三个参数，`FacesMessage`也可以添加`showSummary="true"`到`showDetail="false"`您的`p:message`标签中。

# xml - Groovy Node.depthFirst() 返回节点和字符串列表？

> ID：13965056
> 
> 赞同：6
> 
> 时间：2012-12-20T03:54:12.417
> 
> 标签：xml, groovy, xml-parsing, xmlnode, xmlslurper

我希望有人会指出我在这里遗漏的一些明显的东西。我觉得我已经这样做了一百次了，今晚出于某种原因，由此产生的行为让我陷入了困境。

我正在从公共 API 中读取一些 XML。我想从某个节点（“body”中的所有内容）中提取所有文本，其中还包括各种子节点。简单的例子：

```
<xml>
    <metadata>
        <article>
            <body>
                <sec>
                    <title>A Title</title>
                    <p>
                        This contains 
                        <italic>italics</italic> 
                        and
                        <xref ref-type="bibr">xref's</xref>
                        .
                    </p>
                </sec>
                <sec>
                    <title>Second Title</title>
                </sec>
            </body>
        </article>
    </metadata>
</xml> 
```

所以最终我想遍历所需节点内的树（再次，'body'）并提取其自然顺序中包含的所有文本。很简单，所以我只写了这个 Groovy 小脚本……

```
def xmlParser = new XmlParser()
def xml = xmlParser.parseText(rawXml)
xml.metadata.article.body[0].depthFirst().each { node ->
    if(node.children().size() == 1) {
        println node.text()
    }   
} 
```

...继续以“没有方法签名：java.lang.String.children()”而爆炸。所以我在想自己“等等，什么？我要疯了吗？” Node.depthFirst() 应该只返回一个节点列表。我添加了一点“instanceof”检查，果然，我得到了 Node 对象和 String 对象的组合。具体来说，不在同一行的实体内的行将作为字符串返回，即“This contains”和“and”。其他一切都是节点（如预期的那样）。

我可以轻松解决这个问题。但是，这似乎不是正确的行为，我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T05:40:09.727

我很确定这是正确的行为（尽管我一直发现 XmlSlurper 和 XmlParser 有古怪的 API）。你可以迭代的所有东西都应该实现一个节点接口 IMO 并且可能有一个`type`你`TEXT`可以用来知道从它们那里获取文本的东西。

这些文本节点是有效的节点，在许多情况下您会想要点击它们，因为它在 XML 中进行了深度优先遍历。如果它们没有被返回，那么您用于检查子大小是否为 1 的算法将不起作用，因为某些节点（如`<p>`标签）在其下方同时具有混合文本和元素。

此外，为什么`depthFirst`不始终如一地返回文本是唯一子节点的所有文本节点，例如`italic`上面的，让事情变得更糟。

我倾向于使用 groovy 方法的签名来让运行时找出处理每个节点的正确方法（而不是使用类似的方法`instanceof`），如下所示：

```
def rawXml = """<xml>
    <metadata>
        <article>
            <body>
                <sec>
                    <title>A Title</title>
                    <p>
                        This contains 
                        <italic>italics</italic> 
                        and
                        <xref ref-type="bibr">xref's</xref>
                        .
                    </p>
                </sec>
                <sec>
                    <title>Second Title</title>
                </sec>
            </body>
        </article>
    </metadata>
</xml>"""

def processNode(String nodeText) {
    return nodeText
}

def processNode(Object node) {
   if(node.children().size() == 1) {
       return node.text()
   }
}

def xmlParser = new XmlParser()
def xml = xmlParser.parseText(rawXml)
def xmlText = xml.metadata.article.body[0].'**'.findResults { node ->
    processNode(node)
}

println xmlText.join(" ") 
```

印刷

```
A Title This contains italics and xref's .  Second Title 
```

或者，`XmlSlurper`该类可能会执行您想要/期望的更多操作，并且该`text()`方法具有更合理的输出集。如果您真的不需要对结果进行任何类型的 DOM 遍历（什么`XmlParser`是“更好”的），我建议`XmlSlurper`：

```
def xmlParser = new XmlSlurper()
def xml = xmlParser.parseText(rawXml)
def bodyText = xml.metadata.article.body[0].text()
println bodyText 
```

印刷：

```
A Title
                    This contains 
                    italics 
                    and
                    xref's
                    .
                Second Title 
```

# ruby-on-rails - 如何在 Rails Gem 中使用 LinkedIn 的 Share API

> ID：13965063
> 
> 赞同：1
> 
> 时间：2012-12-20T03:55:10.693
> 
> 标签：ruby-on-rails, xml, ruby-on-rails-3, api, linkedin

我正在使用 LinkedIn API gem 运行 Rails 3：[这里](https://github.com/pengwynn/linkedin)

我一直无法让 Share API 像[这里描述的那样工作](https://developer.linkedin.com/documents/share-api#toggleview%3aid=ruby)

这工作正常：

```
response = client.add_share(:comment => 'new share API') 
```

这失败了：

```
 response = client.add_share(:comment => 'new share API', :title => 'Linkedin Share API', :url => 'http://developer.linkedin.com/docs/DOC-1212', :image_url => 'http://images.bizjournals.com/travel/cityscapes/thumbs/sm_sanfrancisco.jpg') 
```

错误：

```
LinkedIn::Errors::GeneralError ((400): Invalid xml {Expected elements 'post-network-update@http://api.linkedin.com/v1 id@http://api.linkedin.com/v1 visibility@http://api.linkedin.com/v1 comment@http://api.linkedin.com/v1 attribution@http://api.linkedin.com/v1 content@http://api.linkedin.com/v1 private-message@http://api.linkedin.com/v1 share-target-reach@http://api.linkedin.com/v1' instead of 'image-url@http://api.linkedin.com/v1' here in element share@http://api.linkedin.com/v1, Expected elements 'post-network-update@http://api.linkedin.com/v1 id@http://api.linkedin.com/v1 attribution@http://api.linkedin.com/v1 content@http://api.linkedin.com/v1 private-message@http://api.linkedin.com/v1 share-target-reach@http://api.linkedin.com/v1' instead of 'url@http://api.linkedin.com/v1' here in element share@http://api.linkedin.com/v1}): 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T17:19:58.237

你这样做是错的。这是[https://developer.linkedin.com/documents/share-api#toggleview:id=xml中示例请求的 XML](https://developer.linkedin.com/documents/share-api#toggleview:id=xml)

```
 <share>
  <comment>Check out the LinkedIn Share API!</comment>
  <content>
    <title>LinkedIn Developers Documentation On Using the Share API</title>
    <description>Leverage the Share API to maximize engagement on user-generated content on LinkedIn</description>
    <submitted-url>https://developer.linkedin.com/documents/share-api</submitted-url>
    <submitted-image-url>http://m3.licdn.com/media/p/3/000/124/1a6/089a29a.png</submitted-image-url> 
  </content>
  <visibility> 
    <code>anyone</code> 
  </visibility>
</share> 
```

因此，根据示例请求，请求应该看起来像这样：

```
response = client.add_share(:comment => 'Sample Job',
                            :content => { :title => 'LinkedIn Developers Documentation On Using the Share API', :description => 'Leverage the Share API to maximize engagement on user-generated content on LinkedIn', :'submitted-url' => 'https://developer.linkedin.com/documents/share-api', :'submitted-image-url' => 'http://m3.licdn.com/media/p/3/000/124/1a6/089a29a.png' } ) 
```

# html - 无法强制小图像继承父元素的透明度

> ID：13965068
> 
> 赞同：0
> 
> 时间：2012-12-20T03:55:54.427
> 
> 标签：html, css, inheritance, transparency

我正处于为客户开发网站的最后阶段，并且很难弄清楚如何防止小花图像继承其父元素的透明度。

我首先尝试使用 css 中的绝对定位使图像独立。这行得通；但是，它引入了对齐问题，具体取决于浏览器窗口的大小、显示器的大小以及操作系统。我能够通过添加浏览器选择 javascript 并添加必要的 css 代码来检查每个浏览器来消除（某种程度上）浏览器问题，但我仍然遇到对齐问题，具体取决于浏览器窗口的大小和大小监控荧幕。

要查看独立浮动（花图）的页面，请查看以下网址：

[mauisunsetb122.com/index5.html](http://www.mauisunsetb122.com/index5.html)

然后我决定将图像与相邻的文本联系起来，这样无论浏览器窗口或监视器的大小如何，图像都将始终锚定在文本上。这就是发生透明度问题的地方。要查看此示例，请参阅以下网址：

[mauisunsetb122.com/index5_8.html](http://www.mauisunsetb122.com/index5_8.html)

我尝试按照以下 url 中的示例解决此问题，但没有成功：

[http://blog.ninanet.com/2010/04/27/css-transparency-inheritance-hack](http://blog.ninanet.com/2010/04/27/css-transparency-inheritance-hack)

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:43:52.687

如果您希望使背景透明并且不让子元素继承它，那么您有几个选择：

1.  使用透明的小 PNG 作为背景图像。
2.  使用 rgba 'background-color: rgba(255,255,255,0.5);' 设置背景颜色
3.  使用可怕的 CSS hack

Generaly 1 似乎是最常用和受支持的。

# c# - 将遗留代码库从 VB 转换为 C# 有何价值？

> ID：13965073
> 
> 赞同：2
> 
> 时间：2012-12-20T03:57:10.400
> 
> 标签：c#, vb.net, performance, migration, legacy-code

对该主题的快速搜索会产生以下文章：

*   [Visual Basic 优于 C# 的 10 个理由](http://www.simple-talk.com/dotnet/.net-framework/10-reasons-why-visual-basic-is-better-than-c/)
*   [VB.NET 优于 C# 的 10 大理由](http://www.vbrad.com/article.aspx?id=65)（旧文章）

[程序员堆栈交流中的这个线程](https://softwareengineering.stackexchange.com/questions/1180/vb-net-vs-c-debate)甚至提出了一些有趣和幽默的论点，但大多数集中在文化、语法和学习能力上。[这篇文章为他们为什么进行转换提出了“技术债务”的论点。](http://geekswithblogs.net/GruffCode/archive/2012/12/13/converting-vb-.net-to-c-a-post-mortem.aspx)基本上，每个人都想停止使用 VB.NET。

由于上述任何原因，我不希望彻底改变遗留系统的代码库。然而，当前系统存在主要问题：性能差和大量逻辑错误。但这本身并不值得转换，不是吗？还应该注意的是，开发人员在每种语言方面都同样强大，因此这与问题无关。

**将 65K 行代码从 VB 转换为 C# 是否有任何实质性好处，例如性能提升？**

经过我的研究，我不相信转换会是有益的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T02:35:42.267

作为您在问题中链接的“技术债务”帖子的作者，我想说，在您的情况下，将项目从 VB .NET 转换为 C# 可能不值得。

在我们的案例中，整个团队已经决定放弃 Visual Basic，并且已经开始使用 C# 编写系统的许多更新部分。我们都能够使用任何一种语言，但更喜欢 C#，并且讨厌在需要深入到代码的 VB 部分时必须记住将每行末尾的分号切掉。;-)

正如我在帖子中所指出的，我曾经在以前的工作中决定不转换 VB .NET 项目，因为我觉得这对整个项目来说是一个合理的成本。在那种情况下，代码一开始就不是很好，如果我们进行转换，我们就会产生“垃圾进，垃圾出”的效果。相反，我们专注于解决 VB .NET 的问题，结果证明这是我们花费时间和精力的更好方式。通过阅读您的问题，听起来您在同一条船上。您最好花时间解决现有代码库中的问题，而不是尝试转换它。

# c++ - 使用 STL 集时应该重载 == 运算符吗？

> ID：13965082
> 
> 赞同：3
> 
> 时间：2012-12-20T03:58:52.317
> 
> 标签：c++, stl

当我想用 STL 集合在 C++ 中存储自定义对象时，有很多人说：你应该重载 < 运算符，但如果我想使用 find() 方法，我认为它可以使用 == 运算符来实现。谁能给我一些指示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T04:04:35.830

*标准库* `set::find`使用*等价*而不是*等价*来查找值。您不需要提供`operator ==`, 只是`operator <`（或您为 指定的任何比较运算符`set`，`std::less`作为默认值）。

如果您想知道如何找到您的元素，那么假设默认排序`find(x)`将返回以下元素`e`：

```
!( x < e || e < x ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:06:30.153

由于`std::set`s 需要指定*严格弱排序*的东西。`operator==`不足以完成这项任务。

`operator<`只有当它对类有意义时，你才应该重载。如果没有，最好利用`std::set`具有作为第二个模板参数的事实`Compare`。因此，定义一个比较结构/函数并将其作为集合的第二个参数传递是另一个通常更可取的选项。

最后的选择是专门`std::less`针对您的类型。例如：

```
namespace std
{ 
    template <>
    struct less<CustomClass>
    { ... };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:07:02.360

大多数标准库算法和容器使用 operator<（或您提供的比较函数，如果 lhs 元素较小，则返回 true）进行排序和搜索。用于无序容器的算法将使用 operator==。

例如，std::lower_bound() 将返回与排序容器中的搜索条件匹配的第一个元素，如果未找到确切的项，则最大元素仍小于搜索项，或者返回容器末尾的迭代器如果没有元素大于您搜索的内容。它使用 operator< 执行此操作，不需要其他运算符。它需要 log(n) 顺序的许多操作。

除了 != 和 == 之外，所有其他比较运算符（>、>=、<=）都可以从 operator< 派生。

然而，std::find 要求使用的类型是 Equality Comparable。您可以在此处找到参考：http: [//en.cppreference.com/w/cpp/algorithm/find](http://en.cppreference.com/w/cpp/algorithm/find)

因此，如果您正在使用有序元素，则需要 operator<。如果您使用无序元素，则需要 operator==。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:05:33.167

`set`, `map`,`multiset`并且`multimap`只使用你给他们的比较函数，默认为`std::less`，一般为`operator<`。C++11 中的无序版本有更复杂的协议；它们不需要顺序比较（它们是*无序*的），但它们需要相等和散列。

这也适用于所有涉及排序的标准算法（`sort`、`nth_element`、`lower_bound`、`binary_search`等）。但是，该`find` *算法*（以及其他类似的算法，例如`count`、`search`、`mismatch`等）确实需要一个相等函数，默认为`operator==`。没有标准库算法需要两者。

由于您特别询问了`find`成员函数，答案将是`set`所有成员函数只需进行顺序比较即可正常工作。

不过，如果您要定义`operator<`.

# gtk - 如何允许单击树视图中的 pixbuf（图像）？

> ID：13965090
> 
> 赞同：2
> 
> 时间：2012-12-20T04:00:05.977
> 
> 标签：gtk, pygtk, clickable, gtk2

我想让我`gtk.CellRendererPixbuf`在树视图中可点击，这样当用户点击它时我可以调用一个函数。这可能吗？如何做到这一点？

我正在使用 PyGTK，但 C 或 PHP 或其他任何东西的答案都是可以接受的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:29:44.603

The C documentation of [GtkCellRenderer](http://developer.gnome.org/gtk2/stable/GtkCellRenderer.html#GtkCellRenderer.description) states that:

> Beyond merely rendering a cell, cell renderers can optionally provide active user interface elements. A cell renderer can be activatable like GtkCellRendererToggle, which toggles when it gets activated by a mouse click, or it can be editable like GtkCellRendererText, which allows the user to edit the text using a GtkEntry. To make a cell renderer activatable or editable, you have to implement the activate or start_editing virtual functions, respectively.

What is unfortunate is that this information is missing from the [pyGTK documentation](http://developer.gnome.org/pygtk/stable/class-gtkcellrenderer.html), but the information is available in the [`activate`](http://developer.gnome.org/pygtk/stable/class-gtkcellrenderer.html#method-gtkcellrenderer--activate) signal documentation.

# c# - 为什么这种迭代会失败？

> ID：13965091
> 
> 赞同：2
> 
> 时间：2012-12-20T04:00:11.500
> 
> 标签：c#, debugging

![在此处输入图像描述](../Images/98d9b8c6b87cd8f5dd85be6265ed6192.png)

在调试器中很清楚字典中填充了值；那么为什么它甚至根本不进入循环呢？我已经尝试过，但我什么也没得到。它只是跳过循环。时期。我在其他地方使用了类似的技术，没有任何问题。这都在同一个线程上，所以我不明白。

你可以在这里看到一些沮丧的视频：http: [//youtu.be/XernyY5-BAo](http://youtu.be/XernyY5-BAo)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:04:18.650

我希望这`name == e.Name`是错误的

在这种情况下，编译器可能优化了步进。

或者可能`name`是 null 并且它有一个例外？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:41:37.660

我讨厌成为**那**个人并回答我自己的问题，但我觉得其他人可以从我的错误中学到一些东西。

事实证明，在这种情况下，基类中的 EntityManager 是由基类单独实现的，它被**new**关键字覆盖。这导致列表分离并导致各种丑陋的问题。大家不要隐藏你的继承树！始终仔细检查您的实现！谢谢各位的帮助; 我仍然不知道为什么 Visual Studio 显示的值与它应该显示的值不同，所以如果有人有任何关于为什么会出现这种情况的信息 - 我会为你标记最佳答案！

# ruby - 为什么我得到的哈希值不是我预期的？

> ID：13965092
> 
> 赞同：2
> 
> 时间：2012-12-20T04:00:14.233
> 
> 标签：ruby, openssl, sha1

[当我从http://ruby.about.com/od/advancedruby/ss/Cryptographic-Hashes-In-Ruby.htm](http://ruby.about.com/od/advancedruby/ss/Cryptographic-Hashes-In-Ruby.htm)输入此代码时

```
#!/usr/bin/env ruby
require 'digest'

password = "A user's password"
hash = Digest::SHA1.hexdigest(password)
puts hash

# This will produce the hash
# 62018390552aaba3d344e3b43bfa14e49e535dfc 
```

我得到了他们说我会的答案。

但是当我输入这个 shell 命令时

```
echo "A user's password" | openssl dgst -sha1 -hex 
```

我得到 95f33732bafc1744bf24e0cae4e014ab2e5f1580

告诉我为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T04:03:04.613

您的命令行示例包含一个换行符，该换行符未在 Ruby 字符串中指定。尝试使用`-n`so`echo`跳过换行符：

```
$ echo "A user's password" | openssl dgst -sha1 -hex
95f33732bafc1744bf24e0cae4e014ab2e5f1580
$ echo -n "A user's password" | openssl dgst -sha1 -hex
62018390552aaba3d344e3b43bfa14e49e535dfc 
```

# android - 删除 arrayList 中的项目，java.lang.UnsupportedOperationException

> ID：13965094
> 
> 赞同：4
> 
> 时间：2012-12-20T04:00:22.720
> 
> 标签：android, arraylist

我想删除数组列表中的项目选择位置

我的代码是

```
 List<String> historylist = Arrays.asList(history);
    if (historylist.size()>=3){
        System.out.print("*************************************************");
        Log.i(MyContants.StoredHistory_TAG,"StoredHistory size========="+ String.valueOf(historylist.size()));
        String removePosition=historylist.get(2);
        historylist.remove(removePosition);
    } 
```

但我得到了一个异常 UnsupportedOperationException

错误

```
 12-20 09:16:27.680: I/StoredHistory Class(5715): StoredHistory size=========3
    12-20 09:16:27.680: D/AndroidRuntime(5715): Shutting down VM
    12-20 09:16:27.684: W/dalvikvm(5715): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
    12-20 09:16:27.688: E/AndroidRuntime(5715): FATAL EXCEPTION: main
    12-20 09:16:27.688: E/AndroidRuntime(5715): java.lang.RuntimeException: Unable to start activity ComponentInfo{****PACKAGE NAME*****}: java.lang.UnsupportedOperationException
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.os.Handler.dispatchMessage(Handler.java:99)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.os.Looper.loop(Looper.java:123)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at java.lang.reflect.Method.invokeNative(Native Method)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at java.lang.reflect.Method.invoke(Method.java:521)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at dalvik.system.NativeStart.main(Native Method)
    12-20 09:16:27.688: E/AndroidRuntime(5715): Caused by: java.lang.UnsupportedOperationException
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at java.util.AbstractList.remove(AbstractList.java:645)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at java.util.AbstractList$SimpleListIterator.remove(AbstractList.java:77)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at java.util.AbstractCollection.remove(AbstractCollection.java:230)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at ******.utills.StoredHistory.storedHistorylist(StoredHistory.java:24)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at *******.ScanResult.onCreate(ScanResult.java:53)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    12-20 09:16:27.688: E/AndroidRuntime(5715):     ... 11 more 
```

如何解决这个问题..提前谢谢老兄

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T04:04:49.153

改变

```
List<String> historylist = Arrays.asList(history); 
```

至

```
 List<String> historylist = new LinkedList (Arrays.asList(history)); 
```

并查看这篇文章为什么在 List 的情况下会发生此错误：

[尝试从列表中删除元素时，为什么会收到 UnsupportedOperationException？](https://stackoverflow.com/questions/2965747/why-i-get-unsupportedoperationexception-when-trying-to-remove-from-the-list)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T04:05:07.247

您不能从返回的列表中添加或删除元素，`Arrays.asList`因为该列表由原始数组支持。要创建可以修改的列表，您可以执行以下操作：

```
List<String> historylist = new ArrayList<String>(Arrays.asList(history)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:05:15.630

我相信 Arrays.asList() 创建是固定长度的，因此不支持删除。

尝试使用支持像 ArrayList 之类的删除的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-27T17:52:43.523

尝试这个

```
 list.set(position,obj); 
```

# java - 通过 URLCassloader 加载加密的 JarFile

> ID：13965095
> 
> 赞同：1
> 
> 时间：2012-12-20T04:00:45.390
> 
> 标签：java, aes, classloader, encryption

我一直在编写一个小系统来动态加载 AES 加密的 jar 文件。我的代码：

```
public static void main(String args[]) throws Exception {

String jar = "http://site.com/api/rsc/test.jar";
List<URL> urls = new ArrayList<URL>();
urls.add(getURL(jar));
URL jarurl = urls.get(0);

ObjectInputStream ois = new ObjectInputStream((new URL("http://site.com/api/rsc/key_1.txt").openStream()));
Object o = ois.readObject();
DESKeySpec ks = new DESKeySpec((byte[])o);
SecretKeyFactory skf = SecretKeyFactory.getInstance("DES");
SecretKey key = skf.generateSecret(ks);

Cipher c = Cipher.getInstance("DES/CFB8/NoPadding");
c.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec((byte[]) ois.readObject()));
CipherInputStream cis = new CipherInputStream((jarurl.openStream()), c);

JarInputStream jis = new JarInputStream(cis);
String main = jis.getManifest().getMainAttributes().getValue("Main-Class");
String classpaths[] = jis.getManifest().getMainAttributes().getValue("Class-Path").split(" ");

for (String classpath: classpaths) {
    urls.add(getURL(classpath));
}

URLClassLoader loader = new URLClassLoader(urls.toArray(new URL[0]));
Class<?> cls = loader.loadClass(main);
Thread.currentThread().setContextClassLoader(loader);
Method m = cls.getMethod("main", new Class[]{new String[0].getClass()});
m.invoke(null, new Object[]{args}); 
```

}

只需一个普通的 InputStream 就可以正常工作，而且我之前已经能够使用密码代码解密文件和读取内容。当我尝试运行一个简单的 hello world 应用程序时，这是它抛出的错误：

```
Exception in thread "main" java.lang.ClassNotFoundException: helloworld.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at jarloader.JarLoader.main(JarLoader.java:63) 
```

我错过了什么吗？谢谢你的时间。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:22:13.987

您正在将加密 jar 的 url 添加到 URLClassLoader。您如何期望 URLClassLoader 在加载 jar 时对其进行解密？

你最好的选择是实现一个自定义类加载器。扩展 SecureClassLoader 并实现相关方法。[ClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html) javadocs中有一个基本示例。

# ios - xCode, iOS, cocoa - 实现带登录页面的应用

> ID：13965097
> 
> 赞同：0
> 
> 时间：2012-12-20T04:01:01.740
> 
> 标签：ios, xcode, cocoa, uiviewcontroller, authorization

我想用登录页面实现应用程序。

我有基于 UIViewController 和 xib 文件的单独授权页面，用户应该在加载应用程序时首先看到该页面，并且我在 MainStoryboard.storyboard 中有基于 UITabBarController 的主应用程序，用户应该在成功登录后重定向。

要使用我在 AppDelegate.m 中执行的登录页面启动应用程序

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

        NewUserViewController *controller = [[NewUserViewController alloc] init];
        self.window.rootViewController = controller;

        [self.window makeKeyAndVisible]; 
```

登录成功后如何从 NewUserViewController 切换到 UITabBarController？

我尝试（在 NewUserViewController.m 中）

```
MainTabBarViewController *myViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"MainTabBarViewController"];

[self.navigationController pushViewController:myViewController animated:YES]; 
```

如果你能提供这个应用程序的另一种结构，我会很高兴！

对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:08:09.467

您无法推送到标签栏控制器，因为它没有嵌入导航控制器中。我认为更好的结构是使标签栏控制器成为窗口的根控制器，然后在第一个标签中从控制器的 viewDidAppear 方法模态显示您的登录控制器。如果登录成功，只需关闭登录控制器，就可以开始了。如果登录失败，则显示另一个视图，向用户解释发生了什么，然后返回登录控制器再次尝试。

# r - 较长的对象长度不是较短对象长度的倍数

> ID：13965099
> 
> 赞同：4
> 
> 时间：2012-12-20T04:01:10.647
> 
> 标签：r, ubuntu

一个真正的 R 环境新手，我正在阅读“R 简介”一书。

在一个例子中，作者建议“

> 表达式中较短的向量会根据需要（可能是部分地）循环使用，直到它们与最长向量的长度相匹配。

紧接着，有这个例子......其中它表明一个向量将被重复 2.2 次......

但是，当我在我的系统（ubuntu 64b，R - v2.4.11）上复制相同的示例时，我收到了此错误消息

```
x
[1]  2  5  8  6 11
> y
[1] 23 11
> v=2*x+y+1
Warning message:
In 2 * x + y :
  longer object length is not a multiple of shorter object length
> v
[1] 28 22 40 24 46 
```

尝试在内部搜索谷歌，stackoverflow，但找不到任何令人满意的东西......我在这里错过了什么吗？使用的 RI 版本有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T04:10:26.183

当一个向量被回收时，如果它在完成之前必须被“切断”，它将显示一条警告消息。（如下所述，这不是错误消息。`Error`= R 无法完成您想要的功能，因此退出。`Warning`= R 发现您要求它执行的操作有些奇怪，但仍然可以执行。 *)

例如：

```
c(1,2) * c(1,2,3,4) 
```

相当于：

```
c(1,2,1,2) * c(1,2,3,4) 
```

并且不显示警告信息。但：

```
c(1,2) * c(1,2,3,4,5) 
```

相当于：

```
c(1,2,1,2,1) * c(1,2,3,4,5) 
```

并显示警告消息，因为强制向量的最后一个元素不是原始向量中的最后一个元素。它仍然会完成工作并给你一个答案。警告只是警告。见`?warning`。

* 见[本文第 2 节](http://www.biostat.jhsph.edu/~rpeng/docs/R-debug-tools.pdf "这张纸")

# iphone - 特定时间后的图像变化

> ID：13965101
> 
> 赞同：0
> 
> 时间：2012-12-20T04:01:22.333
> 
> 标签：iphone, ios, uiimageview, nstimer

我有三个图像和 1 个图像视图，我想一张一张地显示每个图像，并在 3 秒后在图像视图中重复。任何人都可以给我一些建议或链接吗？在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:03:04.770

您可以使用 NStimer 方法来控制一段时间后的更改。努力工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:08:50.520

`UIImageView`为此，您可以使用 的动画功能。

```
 // create the view that will execute our animation
 UIImageView *campFireView = [[UIImageView alloc] initWithFrame:self.view.frame];

 // load all the frames of our animation
 campFireView.animationImages = [NSArray arrayWithObjects:   
                             [UIImage imageNamed:@"yourImage01.png"],
                             [UIImage imageNamed:@"yourImage02.png"],
                             [UIImage imageNamed:@"yourImage03.png"],
                             nil];

 // all frames will execute in 3 seconds
 campFireView.animationDuration = 3;
 // repeat the annimation forever
 campFireView.animationRepeatCount = 0;
 // start animating
 [campFireView startAnimating];
 //Add imageView to view
 [self.view addSubview:campFireView]; 
```

检查本[教程](http://appsamuck.com/day2.html)

# c# - 使用 C# 检测扫描图像的区域

> ID：13965106
> 
> 赞同：-2
> 
> 时间：2012-12-20T04:01:45.997
> 
> 标签：c#, winforms

我正在开发一个 C# 应用程序来处理扫描的图像。扫描的图像包含 12 个矩形子区域，如下所示。

是否有任何库或代码示例可以帮助我识别每个区域的位置和尺寸？

![样本扫描图像](../Images/1acf4c8addff5ec3ed4e6560708066bd.png)

帮我。我在 codeproject 中搜索了一篇文章（[http://www.codeproject.com/Articles/265354/Playing-Card-Recognition-Using-AForge-Net-Framewor](http://www.codeproject.com/Articles/265354/Playing-Card-Recognition-Using-AForge-Net-Framewor)）有我想要的解决方案。它有2个项目。第一个项目 PlayingCardRecognition，我创建了文件

> 测试卡.cs

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Drawing;

namespace PlayingCardRecognition
{
    public class TestCard
    {
        public string name { get; set; }
        public Bitmap bitmap { get; set; }
        public Point[] point { get; set; }
    }
} 
```

> 测试卡集合.cs

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;

namespace PlayingCardRecognition
{
    public class TestCardCollection : CollectionBase
    {
        public void Add(TestCard card)
        {
            this.List.Add(card);
        }
    }
} 
```

> 我更改了文件**CardRecognizer.cs**，我添加了一个从**识别**方法更改的方法**ExtractImages**

 **```
public TestCardCollection ExtractImages(Bitmap source)
    {
        TestCardCollection col = new TestCardCollection();
        Bitmap temp = source.Clone() as Bitmap; //Clone image to keep original image

        FiltersSequence seq = new FiltersSequence();
        seq.Add(Grayscale.CommonAlgorithms.BT709);  //First add  grayScaling filter
        seq.Add(new OtsuThreshold()); //Then add binarization(thresholding) filter
        temp = seq.Apply(source); // Apply filters on source image

        //Extract blobs from image whose size width and height larger than 150
        BlobCounter extractor = new BlobCounter();
        extractor.FilterBlobs = true;
        extractor.MinWidth = extractor.MinHeight = 150;
        extractor.MaxWidth = extractor.MaxHeight = 350;
        extractor.ProcessImage(temp);

        //Will be used transform(extract) cards on source image 
        QuadrilateralTransformation quadTransformer = new QuadrilateralTransformation();

        //Will be used resize(scaling) cards 
        ResizeBilinear resizer = new ResizeBilinear(CardWidth, CardHeight);

        Blob[] blobs = extractor.GetObjectsInformation();

        for (int i = 0; i < blobs.Length; i++)
        {
            Blob blob = blobs[i];
            TestCard card = new TestCard();
            card.name = "" + i;

            List<IntPoint> edgePoints = extractor.GetBlobsEdgePoints(blob);
            //Calculate/Find corners of card on source image from edge points
            List<IntPoint> corners = PointsCloud.FindQuadrilateralCorners(edgePoints);
            if (corners.Count < 4)
                quadTransformer.SourceQuadrilateral = new List<IntPoint>(edgePoints);
            else
                quadTransformer.SourceQuadrilateral = corners; //Set corners for transforming card 
            quadTransformer.AutomaticSizeCalculaton = true;

            Bitmap cardImg = quadTransformer.Apply(source); //Extract(transform) card image

            if (cardImg.Width > cardImg.Height) //If card is positioned horizontally
                cardImg.RotateFlip(RotateFlipType.Rotate90FlipNone); //Rotate
            card.bitmap = resizer.Apply(cardImg); //Normalize card size

            IntPoint[] cornerIntPoints = corners.ToArray();

            Point[] corner = new Point[cornerIntPoints.Length];
            for (int z = 0; z < cornerIntPoints.Length; z++)
            {
                corner[z].X = cornerIntPoints[z].X;
                corner[z].Y = cornerIntPoints[z].Y;
            }
            card.point = corner;
            col.Add(card);
        }

        return col;
    } 
```

> 第二个项目 PlayingCardRecognition_SampleImages 我有**test.cs**文件

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using AForge.Imaging.Filters;
using PlayingCardRecognition;

namespace PlayingCardRecognition_SampleImages
{
    public partial class test : Form
    {
        public test()
        {
            InitializeComponent();
            ResizeBilinear resizer = new ResizeBilinear(pictureBox1.Width, pictureBox1.Height);
            Bitmap bm = Properties.Resources.testtrip;
            pictureBox1.Image = resizer.Apply(bm);

        }
        private CardRecognizer recognizer = new CardRecognizer();

        private void button1_Click(object sender, EventArgs e)
        {
            int w = 0;
            TestCardCollection col =  recognizer.ExtractImages(Properties.Resources.testtrip);
            foreach (TestCard card in col)
            {
                PictureBox pic = new PictureBox();
                pic.Image = card.bitmap;
                pic.Width = card.bitmap.Width;
                pic.Height = card.bitmap.Height;
                pic.Location = new Point(w, 0);
                pnMain.Controls.Add(pic);
                w += card.bitmap.Width + 10;
            }
        }
    }
} 
```

我调用**了 ExtractImages**方法，我得到了 12 张图像但区域错误它如下图所示。[显示图像返回](https://lh6.googleusercontent.com/-fxoaERStDvE/UNPfbreQPhI/AAAAAAAAACQ/V-m2v0Zhs88/s912/test8.png) 为什么？我的项目在[这里](http://www.mediafire.com/?m9a9nj7pr8z8ikf)

感谢和抱歉我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:59:07.423

查看 OpenCV，我认为它有一个 .Net 版本。

基本上，您需要定义什么是区域。然后使用边缘来分割它们，因为它们是矩形的。通常，您可以使用图像处理工具（即 Matlab 图像处理工具箱）来测试您的算法并确保它有效，然后编写 C#。**

# yii - 如何在 yii 框架中使用带有模块的 gii 生成器？

> ID：13965107
> 
> 赞同：2
> 
> 时间：2012-12-20T04:01:49.150
> 
> 标签：yii, yii-extensions, yii-components, gii, form-generator

我正在使用 gii 生成器来创建一个模块。

问题是当我尝试为该模块创建表单或某个模型时...我无法告诉它在该模块中生成这些文件...它只在主应用程序文件夹中执行。

有任何想法吗？

谢谢。![在此处输入图像描述](../Images/94203e1ed7327836abc60b2b06e330fe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:23:25.887

要在 yii 中为特定模块创建模型，您可以向**模型路径**文本字段输入输入，例如“ **application.modules..models** ”。

# javascript - 社交分享 - 将结果发布到 Twitter/Facebook/Google

> ID：13965110
> 
> 赞同：1
> 
> 时间：2012-12-20T04:02:19.790
> 
> 标签：javascript, html, facebook, twitter, google-plus

我正在开发其中一个网络应用程序，您可以在其中进行测试或投票，然后将您的具体结果发布到 Twitter、Facebook 或 Google Plus。不过，我想知道的是：最好的方法是什么？我不想在这里重新发明轮子，特别是因为用户可以再次进行投票/测试，并且按钮必须根据结果更新为新的文本/标题。

任何人都知道什么可能是一个好的解决方案，除了每次都用新结果刷新 facebook/twitter/g+ 按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:29:03.740

您可以使用适当的 API 编写 FB/G+/Twitter 应用程序来执行此操作。

# wicket - 尝试在组件的空模型上设置模型对象：form:checkgroup

> ID：13965112
> 
> 赞同：0
> 
> 时间：2012-12-20T04:02:53.803
> 
> 标签：wicket

我正在尝试创建一个 HIT（对象）列表，其中每个旁边都有一个复选框，以便我可以选择它们并一次删除它们。我为表格中的每一行制作了一个带有复选框的表格：

```
 final HashSet<HIT> selectedValues = new HashSet<HIT>(); 

 final CheckGroup checkgroup = new CheckGroup("checkgroup");

 final Form form = new Form("form"){
        @Override
        public void onSubmit() {
            super.onSubmit(); 
        }
    };

    checkgroup.add(new CheckGroupSelector("checkboxSelectAll"));

    UserHitDataProvider userHitDataProvider = new UserHitDataProvider(selectedIsReal, keyId, secretId);

    final DataView<HIT> dataView = new DataView<HIT>("pageable", userHitDataProvider) {
        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final Item<HIT> item) {
            HIT hit = item.getModelObject();
            item.add(new CheckBox("checkbox", new SelectItemUsingCheckboxModel(hit,selectedValues))); 

            item.add(new Label("hitName", String.valueOf(hit.getTitle())));
            item.add(new Label("hitId", String.valueOf(hit.getHITId())));
        }
    };

//add checkgroup to form, form to page, etc. 
```

我还添加了一个新类来处理选择/删除：

```
public class SelectItemUsingCheckboxModel extends AbstractCheckBoxModel {

private HIT hit; 
private Set selection; 

public SelectItemUsingCheckboxModel(HIT h, Set selection) { 
    this.hit = h; 
    this.selection = selection; 
 } 

@Override 
public boolean isSelected() { 
    return selection.contains(hit); 
} 

@Override 
public void select() { 
    selection.add(hit); 
} 

@Override 
public void unselect() { 
    selection.remove(hit); 
}

} 
```

一切都很好，但是在尝试提交时出现错误：

```
Caused by: java.lang.IllegalStateException: Attempt to set model object on null model of component: form:checkgroup
at org.apache.wicket.Component.setDefaultModelObject(Component.java:3042)
at org.apache.wicket.markup.html.form.FormComponent.updateCollectionModel(FormComponent.java:1572)
at org.apache.wicket.markup.html.form.CheckGroup.updateModel(CheckGroup.java:160)
at org.apache.wicket.markup.html.form.Form$FormModelUpdateVisitor.component(Form.java:228)
at org.apache.wicket.markup.html.form.Form$FormModelUpdateVisitor.component(Form.java:198)
at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:274)
at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:262)
at org.apache.wicket.util.visit.Visits.visitPostOrder(Visits.java:245)
at org.apache.wicket.markup.html.form.FormComponent.visitComponentsPostOrder(FormComponent.java:422)
at org.apache.wicket.markup.html.form.Form.internalUpdateFormComponentModels(Form.java:1793)
at org.apache.wicket.markup.html.form.Form.updateFormComponentModels(Form.java:1757)
at org.apache.wicket.markup.html.form.Form.process(Form.java:913)
at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:770)
at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:703)
... 27 more 
```

我认为它的一些 Ajax 代码破坏，因为我的 SelectAllCheckBox 按钮也失败了。任何想法为什么？这甚至是处理此类用例的最佳方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:27:09.357

您`Checkgroup`没有`Model`，因此 Wicket 无法将 的当前状态复制`Model`到 null `object`。您应该使用带有附加参数的构造函数，该参数表示`Model`您要在其中存储值。

# php - 只让某一组显示页面

> ID：13965115
> 
> 赞同：-2
> 
> 时间：2012-12-20T04:03:16.393
> 
> 标签：php, mysql

我想让某个页面只能对某个数据库组可见。我的 SQL 表设置为：

表：DD_users 列：id | 集团 | 用户名 | 释义 | 公会 | 水平 | 盐

这是我尝试使用的代码：

```
// First we execute our common code to connection to the database and start the session
require("common.php");

// At the top of the page we check to see whether the user is logged in or not
if(empty($_SESSION['user']))
{
    // If they are not, we redirect them to the login page.
    header("Location: /DD/index.php");

    // Remember that this die statement is absolutely critical.  Without it,
    // people can view your members-only content without logging in.
    die("Redirecting to /DD/index.php");
}

if($_SESSION['user']['group'] == '0')
{
    // Destroy the session to make them log in again.
    unset($_SESSION['user']);

    // If they are not, we redirect them to the login page.
    header("Location: /DD/index.php");

    // Remember that this die statement is absolutely critical.  Without it,
    // people can view your members-only content without logging in.
    die("Redirecting to /DD/index.php");
}

// Everything below this point in the file is secured by the login system 
```

当我尝试这个时，当我只希望组 1 和 2 访问该页面时，将允许任何用户组（0、1 和 2）访问该页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:09:36.213

您没有任何代码来检查它们是否在第 1 组或第 2 组中。只需将代码包装在`if`.

```
if($_SESSION['group'] == '1' || $_SESSION['group'] == '2') 
```

还要确保 $_SESSION['group'] 使用`isset`. 如果未设置，则最后一个`if`将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T14:28:38.240

让它以另一种方式工作：

```
require('common.php');
$charname = $_SESSION['user']['username'];
$query = "SELECT adminaccess, guild, username, class, level, active, canRegister, canNews, canActive 
      FROM DD_users 
      WHERE username = ?";
try
{
// These two statements run the query against your database table.
$stmt = $db->prepare($query);
$stmt->execute(array($charname));
}
catch(PDOException $ex)
{
// Note: On a production website, you should not output $ex->getMessage().
// It may provide an attacker with helpful information about your code. 
die("Failed to run query: " . $ex->getMessage());
}

// Finally, we can retrieve all of the found rows into an array using fetchAll
$rows = $stmt->fetchAll();

//print_r($rows);
$group = $rows['0']['adminaccess'];
$guild = $rows['0']['guild'];
$username = $rows['0']['username'];
$class = $rows['0']['class'];
$level = $rows['0']['level'];
$accessAdmin = $rows['0']['adminaccess'];
$canRegister = $rows['0']['canRegister'];
$canNews = $rows['0']['canNews'];
$canActive = $rows['0']['canActive']; 
```

# compare - SAS proc 比较中的 BY 语句

> ID：13965119
> 
> 赞同：4
> 
> 时间：2012-12-20T04:04:01.387
> 
> 标签：compare, sas, proc

在 proc 比较中使用 ID 语句与 BY 语句有什么区别。

我理解 ID 语句——当添加的观察结果是根据 ID 进行比较时。但是 BY 语句到底是做什么的。

我确实阅读了 SAS 文档并搜索了我无法理解的网络，任何人都可以详细说明它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T13:30:54.020

按照我的理解，“by”语句使 proc compare 对比较数据集中的每个按组进行单独比较。这基本上就像为每个“by”组运行一个单独的“proc compare”。

另一方面，“id”语句通过键关联要比较的两个数据集之间的记录，并报告公共元素的数量以及一个数据集中有多少，而另一个数据集中没有。如果您的数据集有一个共同的主键，即唯一标识每条记录的变量组合，并且您希望“prooc compare”获取每个匹配对并比较它们，您将使用它。

# sql - 从多个表中选择最近的记录

> ID：13965122
> 
> 赞同：2
> 
> 时间：2012-12-20T04:04:30.620
> 
> 标签：sql

SQL 新手，刚刚走出我的舒适区。我在 WPF 应用程序中使用 MySQL。

我的数据库中有三个表。

耐心：

```
ID | Name | ... 
```

推荐人：

```
ID | FK_Patient_ID | ... 
```

访问：

```
ID | FK_Referral_ID | Date | FollowUpDate | FollowUpInterval | ... 
```

“FK”字段是其他表的外键。因此，访问属于转诊，转诊属于患者。

我希望获得每位患者的*最近*一次访问（或转诊，因为没有转诊就无法访问）并获得以下信息：

```
patients.ID | patients.Name | visits.FollowUpDate | visits.FollowUpInterval 
```

我要做的是获取错过随访的患者名单。

希望这对您那里的 SQL 人员来说是一个明智的选择......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:40:22.940

```
SELECT   p1.ID
        ,p1.Name
        ,v1.FollowUpDate
        ,v1.FollowUpInterval
FROM    Patients p1
        INNER JOIN
        Referals r1 ON p1.ID=r1.FK_Patient_ID
        INNER JOIN
        Visits v1 ON r1.ID=v1.FK_Referral_ID
        INNER JOIN (
        SELECT  MAX(v.ID) AS ID
        FROM    Patients p
                INNER JOIN
                Referals r ON p.ID=r.FK_Patient_ID
                INNER JOIN
                Visits v ON r.ID=v.FK_Referral_ID
        GROUP BY p.ID) v2 ON v1.ID=v2.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:37:44.030

我不能 100% 确定这是否适用于 MySQL，但这是您可以在 SQL Server 中执行此操作的一种方法，我认为它是可移植的：

```
SELECT p.ID, p.NAME, v.FollowUpDate, v.FollowUpInterval
FROM Patients p
    JOIN Referrals r ON p.ID = r.FK_PatientID
    JOIN Visits v ON ON r.ID = v.FK_Referral_ID
    JOIN (SELECT r.FK_Patient_ID, MAX(v.Date) AS [Date]
            FROM Referrals r 
                JOIN Visits v ON r.ID = v.FK_Referral_ID
            GROUP BY r.FK_Patient_ID
         ) x ON p.ID = x.FK_Patient_ID
                AND v.Date = x.Date 
```

基本上，您使用子查询来查找患者最近的访问，然后将其连接回原始表以拉回与该值匹配的行。这仅适用于该日期有一行的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-08T13:28:01.840

我在 PostgeSQL 上使用了如下脚本，它有效！

```
SELECT p.ID, p.NAME, v.FollowUpDate, v.FollowUpInterval
FROM Patients p
    INNER JOIN Referrals r ON p.ID = r.FK_PatientID
    INNER JOIN Visits v ON ON r.ID = v.FK_Referral_ID
    INNER JOIN (SELECT r.FK_Patient_ID, MAX(v.Date) AS "Date"
                FROM Referrals r 
                INNER JOIN Visits v ON r.ID = v.FK_Referral_ID
                GROUP BY 
                r.FK_Patient_ID
                ) x ON p.ID = x.FK_Patient_ID AND v.Date = x.Date 
```

# perl - 如何在 Ubuntu 上安装 XML::LibXML

> ID：13965140
> 
> 赞同：20
> 
> 时间：2012-12-20T04:05:42.183
> 
> 标签：perl, ubuntu, libxml2

这是安装的标准输出：

```
$sudo cpanm XML::LibXML
--> Working on XML::LibXML
Fetching http://www.cpan.org/authors/id/S/SH/SHLOMIF/XML-LibXML-2.0014.tar.gz ... OK
Configuring XML-LibXML-2.0014 ... N/A
! Configure failed for XML-LibXML-2.0014\. See /home/kahmed/.cpanm/build.log for details. 
```

细节：

```
Unpacking XML-LibXML-2.0014.tar.gz
Entering XML-LibXML-2.0014
Checking configure dependencies from META.yml
Checking if you have ExtUtils::MakeMaker 0 ... Yes (6.55_02)
Configuring XML-LibXML-2.0014
Running Makefile.PL
enable native perl UTF8
running xml2-config...ok (2.9.0)
Checking for ability to link against xml2...no
Checking for ability to link against libxml2...libxml2, zlib, and/or the Math library (-lm) have not been found.
Try setting LIBS and INC values on the command line
Or get libxml2 from
  http://xmlsoft.org/
If you install via RPMs, make sure you also install the -devel
RPMs, as this is where the headers (.h files) are.

Also, you may try to run perl Makefile.PL with the DEBUG=1 parameter
to see the exact reason why the detection of libxml2 installation
failed or why Makefile.PL was not able to compile a test program.
-> N/A
-> FAIL Configure failed for XML-LibXML-2.0014\. See /home/kahmed/.cpanm/build.log for details. 
```

我尝试手动安装 libxml2，但仍然遇到同样的问题。

另外，我检查了 libxml2-dev：

```
 sudo apt-get install libxml2-dev
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libxml2-dev is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 78 not upgraded. 
```

这是系统信息：

```
 lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 11.04
Release:    11.04
Codename:   natty 
```

uname -a Linux autobot 2.6.38-8-server #42-Ubuntu SMP Mon Apr 11 03:49:04 UTC 2011 x86_64 x86_64 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-20T04:34:21.663

我认为相关的行是：

```
Checking for ability to link against libxml2...libxml2, zlib, and/or the Math library (-lm) have not been found. 
```

因此，您已经了解了 libxml。你是否安装了合适的 zlib 包？尝试：

```
sudo apt-get install zlib1g-dev 
```

然后再次尝试安装 XML::LibXML。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-12-20T05:12:18.740

你为什么要为此使用 CPAN？如果您有标准操作系统安装程序提供的本机软件包，那么安装 CPAN 软件包通常是非常糟糕的主意。

Ubuntu 原生提供了很多 Perl 包，命名约定如下：包名总是以 开头`lib`，然后 Perl 包名 like`XML::LibXML`转换为小写`::`替换为破折号`-`（`XML::LibXML`=> `xml-libxml`），最后`-perl`加上后缀。换句话说，本机包名称`XML::LibXML`为`libxml-libxml-perl`.

因此，在您的情况下，您只需运行此命令，它将自动提取所有必要的依赖项：

```
sudo apt-get install libxml-libxml-perl 
```

如果您出于任何原因不喜欢此软件包，您可以使用`sudo apt-get remove`. 如果您使用 CPAN，则很难可靠地卸载它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T04:33:44.487

忽略了明显的：

```
sudo apt-get install --reinstall zlibc zlib1g zlib1g-dev 
```

然后：

```
sudo cpanm XML::LibXML 
```

作品！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-31T12:22:58.377

也许这是新版本。我做了：

```
sudo apt-get install libxml2-dev 
```

此模块构建并安装成功后

# magento - 为什么我在 Magento 的子目录存储中收到“未找到”错误？

> ID：13965142
> 
> 赞同：0
> 
> 时间：2012-12-20T04:05:57.737
> 
> 标签：magento, magento-1.7

我正在运行 Magento CE 1.7.0.2 并尝试使用此处描述的“子目录方法”设置第二个商店：[http ://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/](http://www.crucialwebhost.com/blog/how-to-setup-multiple-magento-stores/)

当我尝试导航到我的新店面时，它给了我这个错误：

“[我的根目录]/[我的新商店的子目录]/app/Mage.php 没有找到”

Magento 后端的其他一切似乎都设置得很好——有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:02:54.060

将 index.php 复制到子目录后，您需要更改子目录中的 index.php 以将其指向 app/Mage.php。

在子目录 index.php 中找到以下内容

`$mageFilename = 'app/Mage.php';`

并将其替换为

`$mageFilename = '../app/Mage.php';`

为了完整起见，您应该对 $compilerConfig 变量做同样的事情

`$compilerConfig = '../includes/config.php';`

# apache - 仅将 mod_rewrite 规则应用于第一级文件夹

> ID：13965143
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:06:23.280
> 
> 标签：apache, mod-rewrite

我正在尝试进行简单的重写...：

[http://www.domain.com/folder](http://www.domain.com/folder) >> [http://www.domain.com/folder/](http://www.domain.com/folder/)

（我需要添加一个斜杠）。事情是......我需要避免以下重定向：

[http://www.domain.com/folder/subfolder](http://www.domain.com/folder/subfolder) >>> [http://www.domain.com/folder/subfolder/](http://www.domain.com/folder/subfolder/)

换句话说，我只需要在第一级子目录中添加一个斜杠。有谁知道如何做到这一点？

添加尾部斜杠非常容易。最大的问题是......阻止 mod_rewrite 向子文件夹添加斜杠！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:32:51.193

尝试这个：

```
DirectorySlash Off
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^([^/]+/.*[^/]) $1/
RewriteRule ^([^/]+)$ /$1/ [R] 
```

如果您访问目录，mod_dir 会通过 HTTP 重定向自动补充尾部斜杠，该重定向优先于 mod_rewrite。`DirectorySlash Off`关闭此功能。

# asp.net - 网格视图行更新没有得到新的输入值

> ID：13965149
> 
> 赞同：0
> 
> 时间：2012-12-20T04:06:47.137
> 
> 标签：asp.net, linq

我已经使用了下面的代码`GridViewRowUpdating`，但是单击更新按钮后，它采用旧值。我通过断点检查`GridViewRowIpdating`，所有文本框都有旧值。并且新输入的值不会抓取。

我在谷歌尝试了很多，但我无法解决问题。

```
protected void GridViewDocuments_Search_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
        _DataContext = new EDMSDataContext();

        int _Docid = (int)GridViewDocuments_Search.DataKeys[e.RowIndex].Value;

        TextBox DocumentNo = (TextBox)GridViewDocuments_Search.Rows[e.RowIndex].FindControl("DocumentNo");

        TextBox title = (TextBox)GridViewDocuments_Search.Rows[e.RowIndex].FindControl("title");
        TextBox unit = (TextBox)GridViewDocuments_Search.Rows[e.RowIndex].FindControl("unit");

        TextBox originator = (TextBox)GridViewDocuments_Search.Rows[e.RowIndex].FindControl("originator");

        _DataContext.updateDoc(_Docid, DocumentNo.Text, title.Text, unit.Text, originator.Text);
        _DataContext.SubmitChanges();
        GridViewDocuments_Search.EditIndex = -1;

        var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);

         GridViewDocuments_Search.DataSource = query;
        GridViewDocuments_Search.DataBind();
    }

protected void GridViewDocuments_Search_RowEditing(object sender, GridViewEditEventArgs e)
{
    //var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);
   // GridViewDocuments_Search.DataSource = query;
    GridViewDocuments_Search.EditIndex = e.NewEditIndex;
    GridViewDocuments_Search.DataBind();
}

protected void btnSearch_Click(object sender, EventArgs e)
{

        _DataContext = new EDMSDataContext();
        var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);
        GridViewDocuments.Visible = false;
        GridViewDocuments_Search.Visible = true;
        GridViewDocuments_Search.DataSource = query;
        GridViewDocuments_Search.DataBind();

} 
```

网格视图标记：

```
<asp:GridView ID="GridViewDocuments_Search" runat="server" AutoGenerateColumns=False 
          Visible="False" onrowcommand="GridViewDocuments_Search_RowCommand" OnRowDeleting="GridViewDocuments_Search_RowDeleting" 
  DataKeyNames="DocID" PageSize="100" 
          onrowcancelingedit="GridViewDocuments_Search_RowCancelingEdit" 
          onrowediting="GridViewDocuments_Search_RowEditing" 
          onrowupdating="GridViewDocuments_Search_RowUpdating"  >
    <Columns>
    <asp:TemplateField HeaderText = "Details">
           <ItemTemplate>
      <asp:Button ID ="btn_Show" Text="Details" runat= "server" CommandName= "Details" CommandArgument='<%#
        Container.DataItemIndex%>' />
        </ItemTemplate>
            </asp:TemplateField>

        <asp:TemplateField HeaderText="DocNo">
            <EditItemTemplate>
                <asp:TextBox ID="DocumentNo" runat="server" Text='<%# Eval("DocumentNo") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("DocumentNo") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Title" SortExpression="title">
            <EditItemTemplate>
                <asp:TextBox ID="title" runat="server" Text='<%# Eval("title") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Eval("title") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="DocID">
            <EditItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Eval("DocID") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# Eval("DocID") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Originator">
            <EditItemTemplate>
                <asp:TextBox ID="Originator" runat="server" Text='<%# Eval("Originator") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label4" runat="server" Text='<%# Eval("Originator") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Unit">
            <EditItemTemplate>
                <asp:TextBox ID="Unit" runat="server" Text='<%# Eval("Unit") %>'></asp:TextBox>
            </EditItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label5" runat="server" Text='<%# Eval("Unit") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:CommandField ShowEditButton="True" />
        <asp:CommandField ShowDeleteButton="True" />
    </Columns>
</asp:GridView> 
```

GridViewDocuments_Search_RowCommand

```
protected void GridViewDocuments_Search_RowCommand(object sender, GridViewCommandEventArgs e)
{
    int rowindex = Convert.ToInt32(e.CommandArgument.ToString());
    _DataContext = new EDMSDataContext();

    int _Docid = (int)GridViewDocuments_Search.DataKeys[rowindex].Value;

    switch (e.CommandName)
    {
        case "Details":
            Response.Redirect("~/Documentfortest.aspx?DocID=" + _Docid);
            break;
        case "Delete":
            _DataContext.DeleteDoc(_Docid);
            _DataContext.SubmitChanges();

            break;

    }

    var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);

    GridViewDocuments_Search.DataSource = query;
    GridViewDocuments_Search.DataBind();
    //UpdatePanel1.Update();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:49:01.387

[RowUpdating](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdating.aspx)事件**在**您的数据在网格中更新之前触发。这允许您在数据更新之前对数据进行任何更改。

[新输入的值在集合NewValues](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs.newvalues.aspx)中可供您使用。

这就是你可以使用它的方式。

```
protected void GridViewDocuments_Search_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
        _DataContext = new EDMSDataContext();

        int _Docid = (int)GridViewDocuments_Search.DataKeys[e.RowIndex].Value;

        _DataContext.updateDoc(_Docid, 
                        e.NewValues["DocumentNo"].ToString(), 
                        e.NewValues["title"].ToString(),
                        e.NewValues["unit"].ToString(),
                        e.NewValues["originator"].ToString());
        _DataContext.SubmitChanges();
        GridViewDocuments_Search.EditIndex = -1;

        var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);

         GridViewDocuments_Search.DataSource = query;
        GridViewDocuments_Search.DataBind();
} 
```

注意：还有一个在行更新后触发的 RowUpdated 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:44:36.257

我认为您需要在中断前将数据绑定代码移动到 Case“Delete”下的 rowcommand 中；对于每个触发的命令（编辑/更新），您将在 rowcommand 中重新绑定您的 gridview。

例如：

```
protected void GridViewDocuments_Search_RowCommand
(object sender, GridViewCommandEventArgs e)
{
    int rowindex = Convert.ToInt32(e.CommandArgument.ToString());
    _DataContext = new EDMSDataContext();

    int _Docid = (int)GridViewDocuments_Search.DataKeys[rowindex].Value;

    switch (e.CommandName)
    {
        case "Details":
            Response.Redirect("~/Documentfortest.aspx?DocID=" + _Docid);
            break;
        case "Delete":
            _DataContext.DeleteDoc(_Docid);
            _DataContext.SubmitChanges();
             //rebind only if row is deleted
             var query = _DataContext.spQuickSearchDoc(txtSearchKeywords.Text);

             GridViewDocuments_Search.DataSource = query;
             GridViewDocuments_Search.DataBind();
             break;

    }

} 
```

# vb.net - 查找给定范围内的缺失数字

> ID：13965151
> 
> 赞同：2
> 
> 时间：2012-12-20T04:07:01.323
> 
> 标签：vb.net, sql-server-2008

所以我的编码有问题，想知道是否有人可以帮助我。

基本上我正在使用 VB.NET 和 MSSQL 制作一个程序来查找用户设置的给定范围之间的缺失数字。该程序将从表格中读取并在文本框上给出输出。到目前为止，上述代码是我能想到的。但问题是，我得到了错误的输出，而不是我想要的。这是输出的[图像](http://i.minus.com/iBKd9wKbGEl1q.png)。

```
Function FindingMissingNumber() As String

    Dim intX As Integer = Nothing
    Dim intY As Integer = Nothing
    Dim strSting As String = Nothing
    Dim strSqlQUery As String = Nothing
    Dim cmdSqlCommand As Data.SqlClient.SqlCommand = Nothing
    Dim rdrDataReader As Data.SqlClient.SqlDataReader = Nothing

    '------------------------------------------------------------------------------------------------------------------------
    '-> Process
    '------------------------------------------------------------------------------------------------------------------------
    strSqlQUery = "Select ExReportPolicyNo From DBReport Order by ExReportPolicyNo"
    Dim msSqlConnection As New Data.SqlClient.SqlConnection()
    'NOTE - You may need to CHECK your connection string!!! in the line below
    msSqlConnection.ConnectionString = "Data Source=SISBSQL\SISBSQL;Initial Catalog=ExceptionReport;User ID=sa;Password=123;"
    cmdSqlCommand = New Data.SqlClient.SqlCommand(strSqlQUery, msSqlConnection)
    If cmdSqlCommand.Connection.State = Data.ConnectionState.Closed Then cmdSqlCommand.Connection.Open()
    rdrDataReader = cmdSqlCommand.ExecuteReader()
    If rdrDataReader.HasRows Then
        Do While rdrDataReader.Read()
            intX = txtRangeLeft.Text
            intY = txtRangeRight.Text
            'intY = rdrDataReader.GetValue(rdrDataReader.GetOrdinal("ExReportPolicyNo"))

            Do While intX <> intY
                intX = intX + 1
                If intX <> intY Then
                    strSting = strSting & intX & ", "    'if it is not, then record the non sequential number into the string
                Else
                    Exit Do
                End If
            Loop
        Loop
    End If
    If cmdSqlCommand.Connection.State = Data.ConnectionState.Open Then cmdSqlCommand.Connection.Close()
    'return string
    Return strSting
    'tidy up
    intX = Nothing
    intY = Nothing
    strSting = Nothing
    strSqlQUery = Nothing
    cmdSqlCommand = Nothing
    rdrDataReader = Nothing

End Function 
```

如您所见，程序将其循环多次，并给出错误的输出。输出应该只读“286118, 286120, 286121”。问题是我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:51:04.933

试试这个（使用 linq）

更改查询以返回开始值和结束值之间的行

```
Select distinct ExReportPolicyNo From DBReport 
Where ExReportPolicyNo between @start and @end  
Order by ExReportPolicyNo 
```

从您的查询创建列表：

```
Dim originalList as List(Of Integer)
If rdrDataReader.HasRows Then
Do While rdrDataReader.Read()
originalList.Add(rdrDataReader.GetInt(0))
Loop
End If 
```

从您的开始和结束编号创建范围列表

```
//Dim rangeList = Enumerable.Range(286117, 286121 - 286117 + 1).ToList()
Dim starti = Int32.Parse(txtRangeLeft.Text)
Dim endi = Int32.Parse(txtRangeRight.Text)
Dim rangeList = Enumerable.Range(starti, endi - starti + 1).ToList() 
```

查找所有丢失的数字

```
Dim missingList = originalList.Except(rangelist) 
```

从上面的列表中创建 CSV 字符串

```
strString = String.Join(",", missingList.Select(x => x.ToString()).ToArray()) 
```

# gwt - GWT：com.google.gwt.user.client.rpc.SerializationException 类型“java.util.HashMap$KeySet”

> ID：13965155
> 
> 赞同：0
> 
> 时间：2012-12-20T04:07:34.123
> 
> 标签：gwt

我收到 com.google.gwt.user.client.rpc.SerializationException 的 HashSet 异常。
最初我认为不支持 Long 的 HashSet。
但是[https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation](https://developers.google.com/web-toolkit/doc/latest/RefJreEmulation)包含这两者。

会有什么问题？

我在这里发布服务方法：

```
public Set<Long> getNamesFromIDs(Set<Long> ids) {
    return manager.getNamesFromIDs(ids);
} 
```

这里，manager 是对包含在库中的 Manager 类的引用。我也发布了经理方法：

```
public Set<Long> getNamesFromIDs(Set<Long> styleIds) {
    List<Long> listIDs = new ArrayList<Long>(styleIds);
    Map<Long, Discount> personMap = personDAO.getStyleIdToDiscountMap(listIDs, 0);
    return personMap.keySet();
} 
```

详细的异常消息：

```
com.google.gwt.user.client.rpc.SerializationException: Type 'java.util.HashMap$KeySet'   
was not included in the set of types which can be serialized by this 
SerializationPolicy or its Class object could not be loaded. 
For security purposes, this type will not be serialized.: instance = [30002, 30001] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:07:03.350

![在此处输入图像描述](../Images/20f8e0c6ac3e5843233fc8ded71a2b2f.png)

java.util 中的上述类由自定义字段序列化器序列化。

**GWT 不支持 KeySet 的**序列化。**它没有实现 Serializable 接口（因此它在 Java 世界中也不是可序列化的）**

# javascript - 确认浏览器后退按钮

> ID：13965156
> 
> 赞同：-2
> 
> 时间：2012-12-20T04:07:41.777
> 
> 标签：javascript, ajax

我需要控制后退按钮。我检查了类似的帖子，它不会像我预期的那样工作。

我需要在单击后退按钮时显示自定义确认消息。如果用户点击“取消”，那么他们应该留在同一页面上。

任何人都可以准备好示例代码吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:12:59.657

由于后退按钮是浏览器功能的一部分，而不是网页功能的一部分，因此您能做的最好的事情就是处理[beforeunload](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/beforeunload)事件。这使您可以在用户出于任何原因离开页面之前提供自定义取消消息。关于如何设置处理程序和添加额外的处理程序以在获取链接之前删除 beforeunload 处理程序等的一些智能应该合法地将用户带到不同的页面可以近似您正在寻找的行为。请参阅参考文档中的示例：

```
window.addEventListener("beforeunload", function( event ) {
  event.returnValue = "a non-empty string";
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:15:09.097

使用

> 卸载前

而是事件。它会在用户离开页面之前触发。

代码示例：

```
window.addEventListener('beforeunload',function(e){
    !confirm('Do you want to leave?') && e.preventDefault();
},false); 
```

# android - adb.exe 不可执行。ANDROID_HOME 未设置

> ID：13965160
> 
> 赞同：2
> 
> 时间：2012-12-20T04:08:02.610
> 
> 标签：android, monkeyrunner

我成功地拍摄了快照并使用 monkeyrunner 打开了一项活动。但我想要的是按下一个按钮。所以我正在使用 ViewClient，但是每当我运行我的 jython 脚本时，都会出现错误：

```
File "F:\Example\AndroidViewClient\src\com\dtmilano\android\viewclient.py", line 870, in _init_()
File "F:\Example\AndroidViewClient\src\com\dtmilano\android\viewclient.py", line 986 in _ViewClient_obtainAdbPath 
```

引发异常

```
('adb="%s" is not executable. Did you forget to set ANDROID_HOME in the environment?' %adb)
Exception: adb="%s" is not executable. Did you forget to set ANDROID_HOME in the environment? 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:54:29.277

您使用的是什么操作系统？好吧，根据您的操作系统，您需要告诉它您的 Android SDK 位于何处。例如，在 Ubuntu 机器中，我的 .bashrc 中有以下行：

```
ANDROID_HOME=/home/roberto/android-sdk-linux/tools:/home/roberto/android-sdk-linux/platform-tools
export ANDROID_HOME
PATH=$PATH:$ANDROID_HOME
export PATH 
```

如果您在 Windows 机器上，那么您需要将此路径添加到您的 Windows 环境的 PATH 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-02T08:57:19.507

```
set ANDROID_HOME=c:\Users\Administrator\AppData\Local\Android\android-sdk 
```

或者您在安装中放置 Android SDK 的任何其他位置。

将“管理员”替换为您的本地 Windows 用户名（基于区域设置）。

在 MS Windows 7 x64 Ultimate 上使用俄语语言环境和 JAVA/JRuby 版本进行测试：

```
java version "1.8.0_51"
Java(TM) SE Runtime Environment (build 1.8.0_51-b16)
Java HotSpot(TM) 64-Bit Server VM (build 25.51-b03, mixed mode) 
```

和

```
jruby 9.0.0.0 (2.2.2) 2015-07-21 e10ec96 Java HotSpot(TM) 64-Bit Server VM 25.51
-b03 on 1.8.0_51-b16 +jit [Windows 7-amd64]
io/console not supported; tty will not be manipulated
NameError: undefined local variable or method `rsion' for main:Object
<top> at -e:1 
```

# shell - 无法在 shell 脚本中创建/覆盖文件？

> ID：13965162
> 
> 赞同：0
> 
> 时间：2012-12-20T04:08:20.810
> 
> 标签：shell, applescript

我尝试使用下面的脚本来创建 congif 文件，如果它已经存在以覆盖相同的文件，但即使没有收到任何错误，也没有得到任何结果，请建议。我希望在applescript中与下面的相同。

```
property usr : "abce"
property pswd : "pwd"
do shell script "echo 'hello world' > /users/usernamr/desktop/mms.cfg" user name usr password pswd with administrator privileges 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:10:47.410

我看到一个拼写错误：

```
/users/usernamr/desktop/mms.cfg 
```

尝试将其更改为：

```
/users/username/desktop/mms.cfg 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:32:15.867

试试这个...

```
property usr : "abce"
property pswd : "pwd"

set filePath to (path to desktop as text) & "mms.cfg"
set theText to "hello world"
do shell script "echo " & quoted form of theText & " > " & quoted form of POSIX path of filePath user name usr password pswd with administrator privileges 
```

注意：我在您的另一篇文章中看到该文件位于您的应用程序支持文件夹中。如果您想要那里的文件，请使用此行...

```
set filePath to (path to application support folder from user domain as text) & "mms.cfg" 
```

# jquery - 如何在jquery中显示选定div上的所有消息

> ID：13965167
> 
> 赞同：1
> 
> 时间：2012-12-20T04:09:08.563
> 
> 标签：jquery

我创建了一个聊天功能。在这里，如果我写了一些东西，它就会显示在聊天 div 上。但我的问题是，如果我再写一次，那么第二条消息会替换为第一条消息。我想在聊天 div 上显示所有消息。喜欢聊天

测试.php

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Dhuronto</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
 $('#message').keydown(function (e){
    if(e.keyCode == 13 ){
if($(this).val()!=0)
    {
    e.preventDefault();//use this to prevent default behavior
    calculate();
    }
   }
   });
});

function calculate()
{
$.post(
"test_1.php",
$('#message').serialize(),
function(response)
{
$("#chat").html(response);
});
$('#message').val("");
}

</script>
</head>
    <body>
    <div id="chat" style=" width: 300px; height: 500px; border: 1px solid black; overflow: auto">

        </div>
        <textarea id="message" name="chat_message"></textarea>
    </body>
</html> 
```

test_1.php

```
<?php

$message=$_POST['chat_message'];

echo "$message";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:11:55.177

改为使用`append`。`html`替换所有内容。

```
$.post("test_1.php", $('#message').serialize(), function(response) {
    $("#chat").append($message.val() + '<br/>')
              .scrollTop($('#chat')[0].scrollHeight);
}); 
```

您可以在每条消息后添加换行符，这将在新行中。
并用于`scrollTop`在输入新消息后向下滚动。

[**演示**](http://jsfiddle.net/YNy9m/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:11:40.157

`html`替换内容，你想要`append`. 改变：

```
$("#chat").html(response); 
```

到：

```
$("#chat").append(response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:13:00.877

代替

```
$("#chat").html(response); 
```

您可以使用

```
$("#chat").append(response); 
```

jquery html 是替换整个 html 和 jquery append 是添加其他 html 标记或 html 值

# wicket - 表单提交后检票不更新页面

> ID：13965171
> 
> 赞同：1
> 
> 时间：2012-12-20T04:09:24.180
> 
> 标签：wicket

我的页面构造函数中有这段代码：

```
 private String selectedAwsId;
    private String selectedIsReal;
    //these two are actually outside the constructor, and getters and setters for these two strings not shown

    List<AwsCredentials> awsCredentials = (List<AwsCredentials>)getAwsCredentials();
    List<String> awsIds = new ArrayList<String>();
    for (AwsCredentials cred : awsCredentials){
        awsIds.add(cred.getAwsId());
    }
    selectedAwsId = awsIds.get(0);

    List<String> yesOrNo = Arrays.asList(new String[] { "sandbox", "real"});
    selectedIsReal = "sandbox";

    Form selectAwsCredentialsForm = new Form("selectAwsCredentialsForm"){
        @Override
        public void onSubmit() {
            super.onSubmit(); 
            //TODO: why isn't this updating the form?
        }
    };
    add(selectAwsCredentialsForm);
    selectAwsCredentialsForm.add(new DropDownChoice("selectAwsCredentialsDropdown", new PropertyModel(this, "selectedAwsId"), awsIds));
    selectAwsCredentialsForm.add(new DropDownChoice("selectRealOrSandboxHitsDropdown", new PropertyModel(this, "selectedIsReal"), yesOrNo)); 
```

我第一次渲染页面时，效果很好。但是，当我更改任一 DropDownChoices 中的选择并提交表单时，页面不会更改（ selectedAwsId 和 selectedIsReal 中的值不会相应更改）。在我对表单如何工作的理解中，我是否遗漏了什么？提交表单时是否刷新整个页面（构造函数是否再次运行？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:29:28.950

您可能想要构建一个模型并将其设置为表单的模型。（这就是我所做的。）提交表单（如果所有代码都正确编码）将导致表单的模型被更新。

# javascript - 哪个是编写回调的更好方法？

> ID：13965174
> 
> 赞同：7
> 
> 时间：2012-12-20T04:09:52.153
> 
> 标签：javascript, asynchronous, callback

单看我现在写的，我可以看到一个小得多，所以在[代码方面高尔夫](http://en.wikipedia.org/wiki/Code_golf) `Option 2`是更好的选择，但至于哪个更干净，我更喜欢`Option 1`。我真的很喜欢社区对此的意见。

**选项1**

```
something_async({
    success: function(data) {
        console.log(data);
    },
    error: function(error) {
        console.log(error);
    }
}); 
```

**选项 2**

```
something_async(function(error,data){
    if(error){
        console.log(error);
    }else{
        console.log(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T04:14:58.797

它们并不完全相同。选项 2 仍将记录（数据），而选项 1 只会记录成功的数据。（编辑：至少在您更改代码之前是这样的）

也就是说，选项 1 更具可读性。编程不是/不应该是一场比赛，看谁能写出最少的代码来完成最多的事情。目标应该始终是创建可维护、可扩展（如有必要）的代码——以我的拙见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T04:43:12.353

许多人会发现选项#1 更易于阅读和维护——两个不同的回调函数用于两个不同的目的。[它被所有Promise Libraries](http://wiki.commonjs.org/wiki/Promises)常用，其中将传递两个参数。当然，[Multiple arguments vs. options object](https://stackoverflow.com/q/12826977/1048572)的问题是独立的（虽然该对象在 中有用`jQuery.ajax`，但对 没有意义`promise.then`）。

但是，选项#2 是[Node.js 约定](http://nodemanual.org/latest/nodejs_dev_guide/working_with_callbacks.html)（另请参见[NodeGuide](http://nodeguide.com/style.html#callbacks)）并在许多受其影响的库中使用，例如著名的[async.js](https://github.com/caolan/async)。然而，这个约定是可以讨论的，我发现的顶级谷歌结果是[WekeRoad：NodeJS*回调约定*](http://wekeroad.com/2012/02/25/nodejs-callback-conventions-and-your-app)和[Stackoverflow：*Node.js 库的建议回调样式是什么？*](https://stackoverflow.com/q/7116722/1048572).

单个回调函数带有错误参数的原因是它总是提醒开发人员处理错误，这在服务器端应用程序中尤为重要。许多客户端ajax函数的初学者~~并不关心~~错误处理，例如，问自己为什么没有调用成功回调。另一方面，带有`then`-chaining 的 Promise 是基于错误回调的可选性，将它们传播到下一个级别——当然它仍然需要在那里被捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:40:20.437

老实说，我更喜欢让它们更进一步，进入 Promises/Futures/Deferreds/etc... 或者（/和）进入“自定义事件”队列，使用主持人（或观察者/子发布如果有充分的理由让某个特定对象成为数据***源***）。

这不是 100% 的时间。有时，您只需要一个回调。但是，如果您有多个视图需要对更改做出反应（在模型数据中，或可视化用户交互），那么带有一堆硬编码结果的单个回调是不合适的。

```
moderator.listen("my-model:timeline_update", myView.update);
moderator.listen("ui:data_request", myModel.request);
button.onclick = function () { moderator.notify("ui:data_request", button.value); } 
```

现在事情不再依赖于一个大回调，您可以混合、匹配和重用代码。

如果要隐藏版主，可以将其作为对象的一部分：

```
var A = function () {
        var sys = null,
            notify = function (msg, data) {
                if (sys && sys.notify) { sys.notify(msg, data); }
            },
            listen = function (msg, callback) {
                if (sys && sys.listen) { sys.listen(msg, callback); }
            },
            attach = function (messenger) { sys = messenger; };

        return {
            attach : attach
            /* ... */
        };
    },
    B = function () { /* ... */ },

    shell = Moderator(),
    a = A(),
    b = B();

    a.attach(shell);
    b.attach(shell);

    a.listen("do something", a.method.bind(a));
    b.notify("do something", b.property); 
```

如果这看起来有点熟悉，它类似于 Backbone.js 的行为（除了它们`extend()`是对象上的行为，其他对象会绑定，我的示例简化了包装器以显示正在发生的事情）。

Promise 将是可用性、可维护性和易于阅读代码的另一个大赢家（只要人们知道“promise”是什么——基本上它传递一个具有回调订阅的对象）。

```
// using jQuery's "Deferred"

var ImageLoader = function () {
    var cache = {},

        public_function = function (url) {
            if (cache[url]) { return cache[url].promise(); }
            var img = new Image(),
                loading = $.Deferred(),
                promise = loading.promise();

            img.onload  = function () { loading.resolve(img); };
            img.onerror = function () { loading.reject("error"); };
            img.src = url;
            cache[url] = loading;
            return promise;
        };

    return public_function;
};

// returns promises
var loadImage = ImageLoader(),

    myImg = loadImage("//site.com/img.jpg");

myImg.done( lightbox.showImg );
myImg.done( function (img) { console.log(img.width); } ); 
```

或者 var blog_comments = [ /* ... */ ]，

```
 comments = BlogComments();

blog_comments.forEach(function (comment) {
    var el = makeComment(comment.author, comment.text),
        img = loadImage(comment.img);

    img.done(el.showAvatar);
    comments.add(el);
}); 
```

那里的所有内容都表明***了***承诺的强大。
看看`.forEach`那里的电话。我使用的是图像加载而不是 AJAX，因为在这种情况下它可能看起来更明显：

我可以加载数百条博客评论，如果同一个用户发了多个帖子，则图像被缓存，如果没有，我不必等待图像加载，或者编写嵌套回调。图像以任何顺序加载，但仍出现在正确的位置。

这也 100% 适用于 AJAX 调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-08T01:53:49.857

`Promises`已被证明是实现异步和库之类的方法，例如`bluebird`采用节点样式回调（使用`(err, value)`签名）。因此，利用节点式回调似乎是有益的。

但是问题中的示例可以使用以下功能轻松转换为任何一种格式。（未经测试）

```
function mapToNodeStyleCallback(callback) {
  return {
    success: function(data) {
      return callback(null, data)
    },
    error: function(error) {
      return callback(error)
    }
  }
}

function alterNodeStyleCallback(propertyFuncs) {
  return function () {
    var args = Array.prototype.slice.call(arguments)
    var err = args.shift()
    if (err) return propertyFuncs.err.apply(null, [err])
    return propertyFuncs.success.apply(null, args)
  }
} 
```

# linux - 如何在 linux 计算机上禁用 avx 指令？

> ID：13965178
> 
> 赞同：9
> 
> 时间：2012-12-20T04:10:03.090
> 
> 标签：linux, linux-kernel, avx

或者更具体地说，如何确保 /proc/cpuinfo 和 CPUID 操作码不显示 AVX 已启用？

（就上下文而言，某些 Amazon EC2 实例存在一个错误，其中 AVX 被错误地报告为活动状态，这会导致动态使用 AVX 指令的程序因 SIGILL 而崩溃）。

我看过这个内核补丁：[https](https://patchwork.kernel.org/patch/1521191/) ://patchwork.kernel.org/patch/1521191/ ，但我不确定这是否只影响内核的 avx 使用，或者也修补 CPUID 和 /proc/cpuinfo。无论如何，我希望找到适用于 linux 2.6.x 内核系列的解决方案。

# magento-1.7 - 使用 magento 中的脚本导入时，类别不活动

> ID：13965179
> 
> 赞同：0
> 
> 时间：2012-12-20T04:10:02.827
> 
> 标签：magento-1.7

我正在尝试使用脚本导入类别

```
 $cat = Mage::getModel('catalog/category')
                            ->setPath('1/2')
                            ->setName($name)
                            ->setIsActive(1)
                            ->setIsAnchor(1)
                            ->setIsParent(1)
                            ->setIncludeInMenu(1)
                            ->save();
               echo $catId = $cat->getId(); 
```

使用此代码类别被导入，但它们不是活动的，也不是锚定的。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T16:18:02.920

Amit 的回答有效，同样的基本思想是方法是 setIsActive()。

所以：

```
$category
    ->setStoreId(0)
    ->setPath("1/{$root_category_id}" . ($parents ? "/{$parents}" : ''))
    ->setStoreId(0)
    ->setName($category_name)
    ->setIsActive(1)
    ->save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:15:28.690

试试这个。。

require_once 'app/Mage.php'; 法师::app('默认'); /* 默认或您的商店视图名称。*/

```
/* get a new category object */
$category = Mage::getModel('catalog/category');
$category->setStoreId(0); /* 0 = default/all store view. If you want to save data for a specific store view, replace 0 by Mage::app()->getStore()->getId(). */

$general['name'] = "My Category";
$general['path'] = "1/2/23"; /* catalog path */
$general['description'] = "Great My Category";
$general['meta_title'] = "My Category"; /* Page title */
$general['meta_keywords'] = "My , Category";
$general['meta_description'] = "Some description to be found by meta search robots. 2";
$general['landing_page'] = ""; /* has to be created in advance, here comes id */
$general['display_mode'] = "PRODUCTS_AND_PAGE"; /* static block and the products are shown on the page */
$general['is_active'] = 1;
$general['is_anchor'] = 0;
$general['page_layout'] = 'two_columns_left';

/* $general['url_key'] = "cars";//url to be used for this category's page by magento. */
/* $general['image'] = "cars.jpg"; */

$category->addData($general);

try {
    $category->save();
    echo "Success! Id: " . $category->getId();
} catch (Exception $e) {
        echo $e->getMessage();
} 
```

# android - 如何设置 onClick 侦听器以处理自定义通知视图的按钮点击

> ID：13965180
> 
> 赞同：2
> 
> 时间：2012-12-20T04:10:05.540
> 
> 标签：android, notifications, custom-controls, media-player

我有一个通知，其中有一个自定义 xml 视图。它由 3 个按钮组成，播放暂停和停止

![在此处输入图像描述](../Images/e6bb48afa30dead9ac1d093a7c863b5c.png)

如何设置 onClick 侦听器以响应这三个按钮中的每一个的按钮单击？

我知道您只能在每个活动中调用 setContentView() 一次，因此在这种情况下，我想需要为此自定义 xml 布局创建一个新活动并在该新活动中设置 onclick 侦听器。我不知道该怎么做

扩展 xml 布局的方法位于 Service 类内部，该 Service 类还具有音频播放器（Android MediaPlayer）和嵌套在其中的广播接收器。

这是我的服务类中的代码的一部分

```
 RemoteViews remoteviews = new RemoteViews("com.test.example", R.layout.custom_notifications);

     NotificationCompat.Builder mBuilder = new NotificationCompat.Builder(AudioService.this)
               .setContent(remoteviews)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("My notification")
                .setContentText("Hello World!")
                .setOngoing(true); 
```

# c# - 连接 mysql 与 mysql 企业 dll 消息无法加载文件或程序集 'mysql.data version=6.4.4.0

> ID：13965181
> 
> 赞同：0
> 
> 时间：2012-12-20T04:10:05.760
> 
> 标签：c#, mysql

我使用 Enterprise Library Data 5 for mysql 创建了一个 DataAccess 层以将任何应用程序与 mysql 数据库连接起来，我使用了 dll：

-EntLibContrib.Data.MySql.dll。`enter code here` -Microsoft.Practices.EnterpriseLibrary.Common.dll。-Microsoft.Practices.EnterpriseLibrary.Data.dll。

每个dll的版本都是5.505.0。

我安装了完整版的mysql server 5.5，所有的期货都作为开发机器。在我的数据访问层中，我有一个调用存储过程的方法：

```
 public DataSet ExecuteDataSet(string sp_name, object[] parameters)
    {
        try
        {
            Database BD = new MySqlDatabase(_strCon);

            DbCommand cmd = BD.GetStoredProcCommand(sp_name, parameters);

            using (DataSet ds = BD.ExecuteDataSet(cmd))
                return ds;
        }
        catch (Exception e)
        {
            throw new Exception(e.Message);
        }
    } 
```

我在这一行得到一个错误：

```
 Database BD = new MySqlDatabase(_strCon); 
```

在我的应用程序配置中，我有连接字符串：

异常（FileNotFoundException）说：

无法加载文件或程序集 'MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d' 或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:33:25.883

尝试从网站 [http://dev.mysql.com/doc/refman/5.1/en/connector-net-ref.html下载 MySql.Data.dll](http://dev.mysql.com/doc/refman/5.1/en/connector-net-ref.html)

或从 Nuget 打开 nuget 控制台并键入 Install-Package MySql.Data

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:38:14.670

Assemply 参考缺失（MYSQL.data dll 缺失）

我们之前也遇到过类似的问题。要检查：

*   您应该在 web.config 中检查您为 DLL 提供的版本
*   MYsql.data dll 版本应该与 DLL 中给出的版本匹配

如果您还没有完成，则需要将引用（Dll）添加到项目中。

您也可以检查此[无法加载文件或程序集'MySql.Data，版本 = 6.2.2.0](https://stackoverflow.com/questions/2041051/could-not-load-file-or-assembly-mysql-data-version-6-2-2-0)

检查这些并再次重建。

谢谢

# android - 在 Eclipse 中恢复缺失的项目内容

> ID：13965184
> 
> 赞同：1
> 
> 时间：2012-12-20T04:10:26.837
> 
> 标签：android, eclipse, restore

我已经使用 Eclipse Juno 创建了一个 Android 项目很长时间了。意外地，当我将该项目导入我的工作区时，我检查了“将项目复制到工作区”，而它已经在工作区中。令人惊讶的是，项目内部的所有文件，例如类，资源，清单都变成了空！

我仍然想知道这实际上是什么主要原因。这里有人遇到过同样的问题吗？我需要一些解决方法，因为该项目对我来说非常重要，而且我没有备份。

# jquery - Rails 3 中的 jQuery 新贴纸

> ID：13965187
> 
> 赞同：1
> 
> 时间：2012-12-20T04:10:57.510
> 
> 标签：jquery, ruby-on-rails-3, news-ticker

我对 Rails 很陌生，我正在尝试使用 codecanyon 中的 jQuery newsticker 来显示已输入数据库的最新事件标题。此处示例：http: [//codecanyon.net/item/jnewsticker-jquery-news-ticker/full_screen_preview/2137525](http://codecanyon.net/item/jnewsticker-jquery-news-ticker/full_screen_preview/2137525)

现在，它显示了数据库中的每个条目，以及事件表中的所有行，而不仅仅是标题，我认为脚本对此感到窒息。

我希望它只显示最近的 10 个事件。

在我的**events_helper.rb**助手中，我有：

```
module EventsHelper

    def populate_event
      @events.each do |event|
        content_tag(:li, link_to(event.title, '#'))
      end
    end

end 
```

在我的**events_controller.rb**控制器中，我有：

```
class EventsController < ApplicationController
  before_filter :signed_in_user

  def create
    @event = current_user.events.build(params[:event])
    if @event.save
      flash[:success] = "Event created!"
      redirect_to root_url
    else
      render 'static_pages/home'
    end
  end

  def destroy
  end

  def show
    @event = Event.find(params[:id])
    @events = Event.recent
  end
end 
```

在我的**event.rb**模型中，我有：

```
scope :recent, order(updated_at: 'DESC') 
```

在我的**_ticker.html.erb**部分中，我有

```
<ul id="newsticker_1" class="newsticker">
   <%= populate_event %>
</ul> 
```

当我在浏览器中查看源代码时，`<li>`列表中没有任何标签。

它看起来像这样：

```
<ul id="newsticker_1" class="newsticker" style="position: absolute; left: 10px;">
   [#&lt;Event id: 29196, title: "This is a title", tag: nil, privacy_level: 1, group: nil, image_url: nil, start_date: nil, end_date: nil, start_location: nil, end_location: nil, start_geolocation: nil, end_geolocation: nil, content: "Quia officiis voluptatum doloribus cum ut ea sed ve...", user_id: 2, created_at: "2012-12-09 03:51:26", updated_at: "2012-12-09 03:51:26"&gt;, #&lt;Event id: 29190, title: "This is a title", tag: nil, privacy_level: 1, group: nil, image_url: nil, start_date: nil, end_date: nil, start_location: nil, end_location: nil, start_geolocation: nil, end_geolocation: nil, content: "Dolor consequatur sed enim omnis asperiores fugit r...", user_id: 2, created_at: "2012-12-09 03:51:26", updated_at: "2012-12-09 03:51:26"&gt;
</ul> 
```

它应该看起来像这样：

```
<ul id="newsticker_1" class="newsticker">
    <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</li>
    <li>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip...</li>
    <li>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum...</li>
    <li>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia...</li>
    <li>Bubble bubble ipsum dolor sit amet, consectetur adipisicing elit...</ li>
</ul> 
```

**更新：**

遵循以下 Dimuch 的建议

这是代码在浏览器中的样子： ![在此处输入图像描述](../Images/36796142711d384019aae8a9e2919c6f.png)

这就是 HTML 源代码正在做的事情：

![在此处输入图像描述](../Images/975ed8d245eac836bcf2e72e8f43837c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:42:09.860

您误解了助手的用法。它不会将内容输出到生成的页面，而是返回一个插入到页面的值。

因此，您的辅助方法返回事件集合。尝试`map`与代替结合使用`join`。

```
def populate_event
  @events.map do |event|
    content_tag(:li, link_to(event.title, '#'))
  end.join
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T01:50:09.923

按照 dimuch 的回答修复辅助方法后，使用 html_safe 调用该方法：

```
<ul id="newsticker_1" class="newsticker">
  <%= populate_event.html_safe %>
</ul> 
```

# android - 对话框微调器不返回值

> ID：13965190
> 
> 赞同：0
> 
> 时间：2012-12-20T04:11:07.007
> 
> 标签：android, dialog, spinner

我有一个对话框设置，其中有两个连接到光标的微调器。在这个网站的帮助下，我已经解决了几个问题，但我似乎无法超越这一点。我发现的一切都是我已经尝试过的。问题是当我单击微调器选择或单击提交退出对话框时，微调器值不是应有的值。我正在使用一些代码获取包名称。我正在尝试从微调器中获取字符串，`.getSelectedItem().toString();` 我目前已将代码设置为使用`onItemSelected`，但在此之前我尝试使用`getItemSelected`一次单击提交。两者似乎都不起作用。

这是本节的代码。最后，这些值将进入一个文本视图。显示的值为“android.database.sqlite.sqliteCursor@414175e0”

有任何想法吗？

```
 private void transfer() {
     dialog = new Dialog(this, android.R.style.Theme_Holo_Light_Dialog_MinWidth);
     dialog.setContentView(R.layout.transfer_dialog);
     dialog.setTitle(R.string.transfer_accounts);
     Button btnCancel = (Button)dialog.findViewById(R.id.btnCancel);
     Button btnSubmit = (Button)dialog.findViewById(R.id.btnSubmit);

     Cursor load_spinner = mDbHelper.spinnerAccounts();
     startManagingCursor(load_spinner);

     String[] columns = new String[] { RegisterDbAdapter.ACCOUNTS_ACCOUNT };
     int[] to = new int[] { android.R.id.text1 };

     SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, load_spinner, columns, to);
     mAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     spinnerFrom = (Spinner)dialog.findViewById(R.id.spinnerFrom);
     spinnerTo = (Spinner)dialog.findViewById(R.id.spinnerTo);
     spinnerFrom.setAdapter(mAdapter);
     spinnerTo.setAdapter(mAdapter);
     dialog.show();

     spinnerFrom.setOnItemSelectedListener(new OnItemSelectedListener(){
         public void onItemSelected(AdapterView<?> parent, View arg1, int arg2, long arg3) {
             fromAccount = parent.getSelectedItem().toString();
         }
         public void onNothingSelected(AdapterView<?> arg0) {
             // TODO Auto-generated method stub
         }
        }); 
     spinnerTo.setOnItemSelectedListener(new OnItemSelectedListener(){
         public void onItemSelected(AdapterView<?> parent, View arg1, int arg2, long arg3) {
             toAccount = parent.getSelectedItem().toString();
         }
         public void onNothingSelected(AdapterView<?> arg0) {
             // TODO Auto-generated method stub
         }
        });
     btnCancel.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 dialog.dismiss(); 
            }
          });

     btnSubmit.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 tvFrom.setText(fromAccount);
                 tvTo.setText(toAccount);
                 dialog.dismiss();
            }
          });

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:11:38.573

所以我终于让它工作了。谢谢你的建议，我真的很感激他们，但他们对我没有用。我不确定为什么代码不会返回该值，因为我尝试的方式应该适用于其他人。无论如何，我找到了一种通过使用“Long arg3”来获取我的价值观的方法。因为它保存了表中值的 rowId，所以我用它来返回微调器中的选择。我在下面发布了此代码。再次感谢。

所选微调器的代码：

```
 spinnerFrom.setOnItemSelectedListener(new OnItemSelectedListener(){
         public void onItemSelected(AdapterView<?> parent, View arg1, int arg2, long arg3) {
             getAccountName(arg3);
             fromAccount = returnAccount;
             }

        public void onNothingSelected(AdapterView<?> arg0) {
             // TODO Auto-generated method stub
         }
        }); 
```

这是我写的返回我想要的值的方法。我把它放在一个单独的方法中，因为它被多个微调器使用。编码：

```
 private void getAccountName(long arg3) {
     if (returnAccount != null){
         returnAccount = null;
     }
        RegisterDbAdapter tAdaptor = new RegisterDbAdapter(this);
        tAdaptor.open();
        Cursor tCursor = tAdaptor.fetchAccount(arg3);
        startManagingCursor(tCursor);
        returnAccount = tCursor.getString(1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:26:53.310

您需要两个单独的适配器用于两个微调器。

您只使用一个...每次进行选择时，适配器都会将您的选择设置为您的选择（对于两个微调器，因为每个微调器都有相同的适配器支持）。

创建第二个适配器，事情应该更像你期望的那样工作。

另外，在您的方法中尝试此`onItemSelected`操作（使用您显示的参数名称）：

```
String fromAccount = parent.getItemAtPosition(arg2).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:57:09.390

我认为您必须使用光标来获取所需的字符串。Arg2 应该是选定的位置。使用它将光标放在正确的数据行，并使用光标的 getstring 方法从数据库列中获取字符串。

# javascript - 设置背景 - 浏览器不会调用图像

> ID：13965192
> 
> 赞同：1
> 
> 时间：2012-12-20T04:11:39.077
> 
> 标签：javascript

我有一个简单的创建 div 脚本，但没有创建背景图像，这让我很烦恼。

我尝试了几种方法，但都没有奏效：

```
var d = document.createElement('div');
d.id = 'content';
d.className = 'inner';
d.background = "url=('images/h.png')";
document.getElementById('menu').appendChild(d); 
```

我还尝试了这些替代方法：

```
d.style.background = "url=('images/h.png')"; 
d.backgroundImage = "url=('images/h.png')";
d.style.backgroundImage = "url=('images/h.png')"; 
```

所有 3 都不起作用，但 div 确实加载并且高度肯定不是 0px，因为那里有一段文本...... div 的 CSS 是：

```
.inner{
    text-align:center;
    background-repeat: no-repeat;
    background-position: top center;
    width:100%;
    padding-top:30px;
    min-height:300px;

} 
```

根据我的 Chrome 调试工具，图像没有加载到资源中，甚至没有请求加载。如果 ii 的 url 错误，我会找不到资源，所以我想知道是否有特定的方法可以在 JS 中编写它来完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:13:19.683

为什么那里有等号？把它拿出来，你的代码应该可以工作：

```
d.style.backgroundImage = "url('images/h.png')"; 
```

# arrays - 哈希值中的数组 perl

> ID：13965196
> 
> 赞同：14
> 
> 时间：2012-12-20T04:12:18.550
> 
> 标签：arrays, perl, hash, reference

是否可以将数组的引用分配为`key : value`perl 中哈希表对中的值？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-20T04:15:54.243

是的。使用反斜杠创建对数组的引用：

```
$hash{key} = \@array; 
```

请注意，这将链接到实际数组，因此如果您执行以下更改：

```
$array[0] = "foo"; 
```

这也意味着`$hash{key}[0]`设置为`"foo"`。

如果这不是您想要的，您可以使用匿名数组引用来复制这些值`[ ... ]`：

```
$hash{key} = [ @array ]; 
```

此外，您不必通过数组来执行此操作。您可以简单地直接分配：

```
$hash{key} = [ qw(foo bar baz) ]; 
```

阅读有关在[perldoc perlref中进行引用的更多信息](http://perldoc.perl.org/perlref.html#Making-References)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T04:16:02.270

是的。有关访问此类数据结构的一些基本规则，请参阅[http://perlmonks.org/?node=References+quick+reference ，但要创建它，只需执行以下操作之一：](http://perlmonks.org/?node=References+quick+reference)

```
%hash = ( 'somekey' => \@arrayvalue );
$hash{'somekey'} = \@arrayvalue;
%hash = ( 'somekey' => [ ... ] ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-07-13T18:21:26.730

```
 %hash = ( 'somekey' => \@arrayvalue );
    $hash{'somekey'} = \@arrayvalue;

It is right. We can assign either hash or hash reference format. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-06T16:53:17.600

```
use Data::Dumper; @name=('5/17',
    '5/17','5/17','5/17','5/17','5/17','5/17','5/17'); @status_flags=('U
    H L','U C','U H L','U C','U C','U H L','U C', 'U H L');
    @ip_address=('192.168.0.11','192.168.0.2','192.168.0.13','192.168.0.0','192.168.0.3','192.168.0.12','192.168.0.4','192.168.0.14'); @dp_id=('0','0','0','0','0','0','0','0');
    @ip_prefix_length=('32','32','32','24', '32', '32','32','32');

    for ($value=0;$value<=5;$value++) {

    $keyvals{'Response'}{'brocade-extension-ip-route'}{'extension-ip-route'}={'name'=>"$name[$value]"};
           $keyvals{'Response'}{'brocade-extension-ip-route'}{'extension-ip-route'}={'dp-id'=>"$dp_id[$value]"};
          $keyvals{'Response'}{'brocade-extension-ip-route'}{'extension-ip-route'}={'ip-address'=>"$ip_address[$value]"};
           $keyvals{'Response'}{'brocade-extension-ip-route'}{'extension-ip-route'}={'ip-prefix-length'=>"$ip_prefix_length[$value]"};

    $keyvals{'Response'}{'brocade-extension-ip-route'}{'extension-ip-route'}={'ip-gateway'=>'*'};

    }
        print Dumper \%keyvals;

    Each array value assign into hash value. $var1= {
              'Response' => {
                            'extension-ip-route' => {
                                                    'status-flags' =>  'U H L '
                                                                    ,
                                                    'ip-gateway' => '*',
                                                    'name' => '0/2',
                                                    'ip-address' =>  '192.168.20.11',
                                                    'dp-id' => '0',
                                                    'ip-prefix-length'=>'32'

                                                  }
                          }
            }; 
```

# php - 究竟什么时候调用自动加载器？

> ID：13965205
> 
> 赞同：8
> 
> 时间：2012-12-20T04:13:11.420
> 
> 标签：php, autoloader

我有一个使用以下方法注册的自动加载器`spl_autoload_register()`：

```
class MyAutoLoader{
   public function __construct(){
       spl_autoload_register(array($this, 'loader'));
   }

   public function loader($className){
       var_dump($className);
   }
}

$al = new MyAutoLoader(); //Register the autoloader 
```

从 开始`var_dump()`，自动加载器似乎在很多事情上被调用，比如要插入数据库的数据、参数化的 SQL 查询等等：

```
string 'name' (length=4)

string 'a:2:{s:5:"label";s:4:"Name";s:8:"required";b:1;}' (length=48)

string 'en_US' (length=5)

string 'object' (length=6)

string 'name = ?' (length=8) 
```

这些东西永远不会是类，所以永远不应该使用`new`or`class_exists()`等​​加载。

**在什么情况下/函数调用会调用自动加载器？**我想停止自动加载不是类的“classNames”被调用，因为每个`$className`都使用 进行检查`file_exist()`，并且检查这些数据字符串的效率非常低。

* * *

**问题已解决。**我首先按照 Brad 的建议进行了回溯并将跟踪转储到文件中（只需添加一个打开文件并附加到文件的小片段）。

显然，痕迹很大，但我选择了我能找到的最简单的一个。顺便说一句，该跟踪恰好是一个称为数据库 (ORM) 包装器的跟踪器，我编写该包装器是为了包装出色的[RedBean](http://www.redbeanphp.com) ORM 库。我转储的结果`$className`也验证了这一点，因为这些字符串是数据进入或离开数据库。

话虽如此，我有一个`__call()`拦截数据库包装器的方法，进行一些处理，将其传递给 RedBean，处理结果，然后将其发送回调用者。

**问题：在处理过程中，我正在调用[is_subclass_of()](http://php.net/manual/en/function.is-subclass-of.php)和[instanceof](http://php.net/manual/en/language.operators.type.php)，这显然会要求自动加载器尝试加载类（因为我们没有任何称为`name =?`加载的类，也不存在）。**

解决方案是实际上确保我们`object`在调用之前`is_subclass_of()`有一个`instanceof`: `if(is_object($someproperty) && is_subclass_of($someproperty))`。

如果`$someproperty`不是对象，则`if`立即短路`instanceof`并且`is_subclass_of()`永远不会调用，这意味着永远不会调用自动加载器。

正如布拉德所提到的，使用自动加载器包含各种东西`require_once`可能会带来巨大的安全风险，同时，多次使用文件系统`file_exists()`也是非常低效的。

因此，总而言之，每次使用`instanceof`, `is_subclass_of`、其他类类型函数、类存在函数和反射方法时都会调用自动加载器，正如 Charles 在他的回答中所暗示的那样。

**所以，这个故事的寓意是，如果你打算使用一个类类型函数，或者上面提到的任何一个混合类型变量的函数，在将它传递给类类型函数之前先检查它。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:07:18.130

> 在什么情况下/函数调用会调用自动加载器？

我意识到，鉴于评论中提到的问题，这基本上是一个*次要*问题，但仍然值得回答。

自动加载函数，即[`__autoload()`](http://php.net/function.autoload)代码中的一个函数或通过 注册的回调函数，[`spl_autoload_register`](http://php.net/spl_autoload_register)在——且仅当——PHP 需要访问尚未定义的类时才被调用。这在*任何地方都*可以完成，很少有例外，例如[`class_exists`](http://php.net/class_exists)，它的参数告诉 PHP 不要调用任何自动加载器。

PHP 手册有[一个专门用于自动加载的页面](http://php.net/language.oop5.autoload)。如果有任何混淆，我建议对其进行审查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:16:58.787

您可以使用`debug_backtrace`或`debug_print_backtrace`找出调用自动加载器函数的确切位置。

从技术上讲，它应该只在脚本引用不存在的类名时由 PHP 调用。

# css - CSS：阻止无序列表中的文本在 ipad 上换行

> ID：13965208
> 
> 赞同：1
> 
> 时间：2012-12-20T04:13:18.530
> 
> 标签：css, ipad

我有以下无序列表：

```
<ul>
<li>some text</li>
<li style="overflow:hidden;white-space: nowrap;">some long text</li>
<li>other text</li>
<li>more text</li>
</ul> 
```

在普通浏览器中显示如下

```
some text | some long text | other text | more text 
```

但是在 ipad 中显示如下：

```
some text | some long | other text | more text
                 text 
```

如何防止 li 元素包裹在 ipad 上？

**编辑：**如果我在“一些长文本”的样式中添加一个大宽度，它会显示如下：

```
some text              | some long | other text | more text
                              text 
```

如果我将文本更改为 some_long_text （将其全部变为一个单词），我会看到以下内容：

```
some text | some_long_text | other text | more text 
```

所以看起来它只是忽略了空白：nowrap; 财产。

# php - 解析错误：语法错误，第 74 行 /home/u231382487/public_html/templates/sleek_silver/index.php 中的意外 T_OBJECT_OPERATOR

> ID：13965216
> 
> 赞同：0
> 
> 时间：2012-12-20T04:14:15.130
> 
> 标签：php

这是第 74 行

```
$thumbnailUrl = $entry->medx-MoBiLeroup->thumbnail[0]->url; 
```

为什么我不断收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:16:17.273

你错过了一个`>`

```
$entry->medx-MoBiLeroup->thumbnail[0]->url; //medx-MoBiLeroup 
```

应该

```
$entry->medx->MoBiLeroup->thumbnail[0]->url; //medx->MoBiLeroup 
```

# javascript - 当文本出现在屏幕上时自动向下滚动

> ID：13965220
> 
> 赞同：2
> 
> 时间：2012-12-20T04:15:08.403
> 
> 标签：javascript, jquery

我正在逐字显示一首诗（使用 lettering.js 和 jQuery。这很好用。现在我想添加一个附加功能：我希望页面在文本出现在屏幕上时向下滚动。我正在尝试：

```
div.lettering('words');
div.find('span').hide();
div.show().find('span').each(function(i) {
    $(this).delay(delay * i).fadeIn(fadeIn);
    var _this = $(this);
    $('html, body').scrollTop(
        _this.offset().top - $('html, body').offset().top + $('html, body').scrollTop()
    );
}); 
```

也试过：

```
div.lettering('words');
div.find('span').hide();
div.show().find('span').each(function(i) {
    $(this).delay(delay * i).fadeIn(fadeIn);
    var _this = $(this);
    $('html, body').animate({
        scrollTop: _this.offset().top
    }; 500);
}); 
```

但是页面在页面加载时滚动到某个位置，就是这样。我觉得我使用的 _this 变量不正确。

知道如何实现我的目标吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:24:58.697

如果您将内容直接添加到您的身体，并且您的身体高度随着元素的添加而动态变化，那么您需要这样做。

```
div.show().find('span').each(function(i) {
    $(this).delay(delay * i).fadeIn(fadeIn,function(){
    var _body = $("body");
      _body.animate({
         scrollTop: document.body.scrollHeight;
      }; 500);
    });
}); 
```

在您的情况下发生的情况是向下滚动的动画立即发生，这是不需要的，这样做可以确保仅在淡入动画完成时才发生向下滑动动画。

否则，如果您不直接将内容添加到您的身体，您仍然可以使用应用于外部和内部的相同技术来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:15:38.730

正如@Abhishek 在他的回答中指出的那样，我必须使用回调才能使滚动正常工作。但是，滚动仍然无法正常工作。所以我最终使用了 Abhishek 的代码和[scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)插件：

```
div.lettering('words');
div.find('span').hide();
$.scrollTo('h3', {duration:500});
div.show().find('span').each(function(i) {
    var _this = $(this);
    $(this).delay(delay * i).fadeIn(fadeIn,function(){
        $.scrollTo(_this, {duration:100} );
    });
}); 
```

动画没有我想要的那么流畅，因为`duration: 100`有点太快了。但是如果我设置一个更高的值，滚动会在所有文本都显示后发生，感觉有点奇怪。

# css - 如何保持页眉、页脚和外部 div 固定并使内部 div 可滚动

> ID：13965222
> 
> 赞同：1
> 
> 时间：2012-12-20T04:15:12.497
> 
> 标签：css, html, scrollable

请看这个[http://jsfiddle.net/jaseem/sS7HN/](http://jsfiddle.net/jaseem/sS7HN/)。我想要实现的不是那个内部滚动条，而是使用主窗口滚动条；这样我就可以使用 windows 垂直滚动条来浏览“innerContent”内的内容，但同时我希望外部 div 被修复。那可能吗 ？

CSS：

```
header {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 50px; 
}

footer {
    position: fixed;
    left: 0;
    bottom:0;
    width: 100%; 
}

content {
    background-color:#656565;
    width: 940px;
    margin:0 auto;
    padding-top:10px;
    border-radius:5px; 
}

mainContent {
    margin:0px auto;
    background-color:#515151;
    width:660px;
    border-radius:5px;
    padding-top:20px; 
}   

contentHolder {
    margin:0 auto;
    width:616px;
    background-color:#000000;
    border-radius:10px;
    overflow:auto; 
} 
```

HTML：

```
<div id="header"></div>
<div id="content">
    <div id="mainContent">
        <div id="contentHolder"></div>
    </div>
</div>
<div id="footer"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:30:07.993

有点不清楚您要完成什么，但我确实注意到您在 CSS 中缺少哈希标记。如果您指的是属性，则需要`#`在标识符前面。`ID`

示例：http: [//jsfiddle.net/hgcax/](http://jsfiddle.net/hgcax/)

CSS

```
#header {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 50px; 
}

#footer {
    position: fixed;
    left: 0;
    bottom:0;
    width: 100%; 
}

#content {
    background-color:#656565;
    width: 940px;
    margin:0 auto;
    padding-top:10px;
    border-radius:5px; 
}

#mainContent {
    margin:0px auto;
    background-color:#515151;
    width:660px;
    border-radius:5px;
    padding-top:20px; 
}   

#contentHolder {
    color:#fff;
    margin:0 auto;
    width:600px;
    height: 400px;
    background-color:#000000;
    border-radius:10px;
    overflow:auto; 
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:35:43.127

对于 div 元素，您必须在此处提供#div 名称，您的 div 名称是 contentHolder，因此它的 #contentHolder

试试这样：

```
#contentHolder {
 overflow:auto; 
} 
```

或者

```
#contentHolder {
 overflow:scroll; 
} 
```

# android - 在画布上适当地绘制文本

> ID：13965224
> 
> 赞同：1
> 
> 时间：2012-12-20T04:15:27.847
> 
> 标签：android

我正在尝试在我的应用程序中绘制文本和位图图像。我希望将文本绘制在位图图标上方，但难以实现。

如何修改或更改我的代码，使其显示在每个图标的顶部![应用程序的屏幕截图注意文本在图标后面](../Images/c010d0243d76d4846631f7f243647439.png)

我的代码：

```
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    xCanvas = canvas.getWidth();
    yCanvas = canvas.getHeight();

    Paint textPaint2 = new Paint();
    textPaint2.setStyle(Paint.Style.FILL_AND_STROKE);
    textPaint2.setAntiAlias(true);
    textPaint2.setColor(Color.WHITE);
    textPaint2.setTextSize(30);
    textPaint2.setTextAlign(Align.CENTER);

    destination = new Location("manual");

    for (int j = 0; j < placesListItems.size(); j++){
        song = placesListItems.get(j);

        this.lat = myLat.get(j);
        this.lng = myLng.get(j);
        this.name=song.get(KEY_NAME);

        try {
            this.icon = ICON.get(j);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        //  Log.d("the latitude",(String.valueOf(this.lat)));
        //  Log.d("the longitude",(String.valueOf(this.lng)));
        // Double.parseDouble(song.get(KEY_LNG));

        destination.setLatitude(this.lat);
        destination.setLongitude(this.lng);

        //Log.d("Place name",name );

        this.location.distanceTo(destination);

        // compute rotation matrix
        float rotation[] = new float[9];
        float identity[] = new float[9];
        if (lastAccelerometer != null && lastCompass != null) {
            boolean gotRotation = SensorManager.getRotationMatrix(rotation,
                    identity, lastAccelerometer, lastCompass);
            if (gotRotation) {
                float cameraRotation[] = new float[9];
                // remap such that the camera is pointing straight down the
                // Y
                // axis
                SensorManager.remapCoordinateSystem(rotation,
                        SensorManager.AXIS_X, SensorManager.AXIS_Z,
                        cameraRotation);

                // orientation vector
                orientation = new float[3];
                SensorManager.getOrientation(cameraRotation, orientation);

                canvas.save();

                // Translate, but normalize for the FOV of the camera --
                // basically, pixels per degree, times degrees == pixels
                float dx = (float) ((canvas.getWidth() / horizontalFOV) * (Math
                        .toDegrees(orientation[0]) - this.location
                        .bearingTo(destination)));
                float dy = (float) ((canvas.getHeight() / verticalFOV) * Math
                        .toDegrees(orientation[1]));

                // wait to translate the dx so the horizon doesn't get
                // pushed off
                canvas.translate(0.0f, 0.0f - dy);

                // now translate the dx
                canvas.translate(0.0f - dx, 0.0f);

                canvas.drawText((truncate(this.name,10).concat("...")), canvas.getWidth()/2 - 50, canvas.getHeight() / 2 - 100,
                        textPaint2);

                canvas.drawBitmap(icon, canvas.getWidth()/2 - icon.getWidth()/2, canvas.getHeight()/2 - icon.getHeight()/2, null);

                canvas.restore();
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:24:53.770

诀窍是掌握您正在使用的字体的指标。您可以使用

```
Paint.FontMetrics fm = textPaint2.getFontMetrics();
int fontHeight = fm.bottom - fm.top; 
```

（调整为使用底部和顶部似乎更准确）

然后，您可以根据实际文本大小调整垂直位置（而不是使用任意数字）

假设您有一个要在其上方用两行文本（标签和坐标）绘制的图标，并且您希望该图标以 x、y 为中心。下面的示例演示了这一点。

注意：您在 draw 方法中分配 Paint 对象——这确实是个坏主意，因为对象总是相同的，最终会启动垃圾收集器。很多。分配一次并重用。我也证明了这一点。

我绘制交叉线以指向目标 x,y 值；您不需要它们，但它有助于准确显示目标相对于图标和文本的位置。

```
package com.javadude.sample;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Paint.Align;
import android.graphics.Paint.FontMetrics;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {

    @Override protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new MyView(this));
    }

    public static class MyView extends View {    
        public MyView(Context context) {
            super(context);
        }

        private Paint textPaint;
        private Paint linePaint;
        private Drawable drawable;
        private float textHeight;
        private float baselineOffset;

        private void drawIconAndText(Canvas canvas, int centerX, int centerY, Drawable drawable, String text) {

            // draw the drawable centered on (targetXcenter, targetYcenter)
            int w = drawable.getIntrinsicWidth();            
            int h = drawable.getIntrinsicHeight();

            // determine upper-left corner of drawable location
            int x = centerX - w/2;
            int y = centerY - h/2;

            // draw the icon
            drawable.setBounds(x, y, x+w, y+h);
            drawable.draw(canvas);

            float textY = y - baselineOffset;

            // note that drawText centers the text at the given location due to Align.CENTER
            canvas.drawText(text, centerX, textY, textPaint);

            // if you had used Align.LEFT, you would need to offset the start of the text as follows:
            //     float textWidth = textPaint.measureText(text);
            //     canvas.drawText(text, centerX - textWidth/2, textY, textPaint);

            // draw the coordinates above it
            textY = textY - textHeight; // move up a line
            canvas.drawText("(" + centerX + "," + centerY + ")", centerX, textY, textPaint);
        }

        private void initPaint() {
            linePaint = new Paint();
            linePaint.setStyle(Paint.Style.STROKE);
            linePaint.setColor(Color.BLUE);
            textPaint = new Paint();
            textPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            textPaint.setAntiAlias(true);
            textPaint.setColor(Color.WHITE);
            textPaint.setTextSize(30);
            textPaint.setTextAlign(Align.CENTER);
            FontMetrics fontMetrics = textPaint.getFontMetrics();
            baselineOffset = fontMetrics.bottom; 
                // bottom is the maximum amount that the text descends
                // I'm not sure why this is different from descent...  
            textHeight = fontMetrics.bottom - fontMetrics.top;
            drawable = getResources().getDrawable(R.drawable.ic_launcher);
        }

        @Override protected void onDraw(Canvas canvas) {
            super.onDraw(canvas);

            int width = canvas.getWidth();
            int height = canvas.getHeight();

            int targetXcenter = width/2;
            int targetYcenter = height/2;

            // only allocate objects once it at all possible!
            if (textPaint == null)
                initPaint();

            canvas.drawColor(Color.BLACK); // draw background

            // draw lines to show where the target is
            canvas.drawLine(0, targetYcenter, width-1, targetYcenter, linePaint);
            canvas.drawLine(targetXcenter, 0, targetXcenter, height-1, linePaint);

            drawIconAndText(canvas, targetXcenter, targetYcenter, drawable, "Sample Text");

            // draw lines to show where the target is
            canvas.drawLine(0, 200, width-1, 200, linePaint);
            canvas.drawLine(100, 0, 100, height-1, linePaint);

            drawIconAndText(canvas, 100, 200, drawable, "More Text");
        }
    }
} 
```

# django - Flatpages 中的 Django 应用程序数据

> ID：13965236
> 
> 赞同：0
> 
> 时间：2012-12-20T04:16:33.823
> 
> 标签：django, django-apps, django-flatpages

我有一个名为 blogengine 的 Django 应用程序，它的功能正如其名称所暗示的那样。当平面页面调用模板时，我似乎无法从博客引擎（帖子）中获取数据以显示在模板中。我是 Django 新手，但我认为这是 urls.py 问题。

我的 urls.py：

```
from django.conf.urls.defaults import patterns, include, url
from blogengine.views import PostsFeed

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),

    # Home page
    url(r'^$', 'blogengine.views.getPosts'),
    url(r'^(\d+)/?$', 'blogengine.views.getPosts'),

    # tinyMCE
    (r'^tinymce/', include('tinymce.urls')),

    # Blog posts
    url(r'^\d{4}/\d{1,2}/([-a-zA-Z0-9]+)/?$', 'blogengine.views.getPost'),

    # Categories
    url(r'^categories/(\w+)/?$', 'blogengine.views.getCategory'),
    url(r'^categories/(\w+)/(\d+)/?$', 'blogengine.views.getCategory'),

    # Comments
    #url(r'^comments/', include('django.contrib.comments.urls')),

    # RSS feeds
    url(r'^feeds/posts/$', PostsFeed()),

    # Flat pages
    #url(r'', include('django.contrib.flatpages.urls')),
    #not needed since '...middleware.FlatpageFallbackMiddleware' is installed in settings.py 
```

)

模板-sidebar_b.html：

```
<div class="grid_4 omega">
{% if posts %}
    {% for post in posts %}
            {% if post.featured %}
            <h3>Featured</h3>       

            <div class="featured-post">

                <h4><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h4>
                <p class="post-info">Posted by <a href="index.html">{{ post.author.first_name }} {{ post.author.last_name }}</a> on {{ post.pub_date|date:"m.d.y"  }} </p>
                <p>
                <a href="http://getfirefox.com/"><img src="static/images/image.gif" width="160" height="100" alt="firefox" class="float-left" /></a>

                {{ post.text|safe|truncatechars:200 }}

                </p>    

                <p><a class="more-link" href="{{ post.get_absolute_url }}">continue reading</a></p>

            </div>
            {% endif %}
    {% endfor %}
    {% else %}
    <h3>Featured</h3>
    <div class="featured-post">
        <h4>Nothing to show...</h4>
    </div>
{% endif %}
</div> 
```

视图.py：

```
from django.shortcuts import render_to_response
from django.core.paginator import Paginator, EmptyPage
from blogengine.models import Post, Category
from django.template import RequestContext
from django.contrib.syndication.views import Feed

from django.template.loader import add_to_builtins
add_to_builtins('blogengine.templatetags.tags')

def getPosts(request, selected_page=1):
    # Get all blog posts
    posts = Post.objects.all().order_by('-pub_date')
    # Add pagination
    pages = Paginator(posts, 5)
    # Get the specified page
    try:
        returned_page = pages.page(selected_page)
    except EmptyPage:
        returned_page = pages.page(pages.num_pages)

    # Display all the posts
    return render_to_response('posts.html', { 'posts':returned_page.object_list, 'page':returned_page}, RequestContext(request))

def getPost(request, postSlug):
    # Get specified post
    post = Post.objects.filter(slug=postSlug)
    # Display specified post
    return render_to_response('single.html', { 'posts':post}, RequestContext(request))

def getCategory(request, categorySlug, selected_page=1):
    # Get specified category
    posts = Post.objects.all().order_by('-pub_date')
    category_posts = []
    for post in posts:
        if post.categories.filter(slug=categorySlug):
            category_posts.append(post)
    # Add pagination
    pages = Paginator(category_posts, 5)
    # Get the category
    category = Category.objects.filter(slug=categorySlug)[0]
    # Get the specified page
    try:
        returned_page = pages.page(selected_page)
    except EmptyPage:
        returned_page = pages.page(pages.num_pages)
    # Display all the posts
    return render_to_response('category.html', { 'posts': returned_page.object_list, 'page': returned_page, 'category': category}, RequestContext(request)) 
```

创建一个标签会更好吗？这样我就可以在`{% load posts %}`需要的时间和地点调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:20:44.107

我对问题的理解如下：

```
flatpages/default.html <= default flatpages template overwrite
   |_ incudes somehow template-sidebar_b.html <= your template 
```

template-sidebar_b.html 被 flatpages-template 包含（“调用”），但是因为 flatpage 不知道模板变量“posts”，所以没有呈现任何内容。

可能的解决方案是：

*   如你所说创建一个模板标签=> {% load posts %} => 可能是最好的解决方案，但只有在你的模板标签中不需要任何过滤器或东西时你才能在模板中访问，因为那样你又遇到了同样的问题.

*   用您自己的 => easy as [this](http://www.finalconcept.com.au/article/view/django-creating-a-custom-middleware-component)替换默认的**FlatpageFallbackMiddleware**和/或查看**django.contrib.flatpages.middleware.FlatpageFallbackMiddleware**的代码。我认为这是最好的解决方案，因为您可以访问请求和响应对象。

***   将您的帖子数据添加到默认上下文处理器，平面页面使用 RequestContext ( [docs](https://docs.djangoproject.com/en/dev/ref/contrib/flatpages/?from=olddocs#using-the-middleware) ) => 我不推荐这样做** 

 **问候**

# postgresql - 我正在使用 postgres 数据库。我想用 mysql 数据库创建 dblink。我应该怎么办？

> ID：13965241
> 
> 赞同：3
> 
> 时间：2012-12-20T04:16:59.280
> 
> 标签：postgresql

```
sudo PATH=/usr/lib/postgresql/9.1/bin/:$PATH make USE_PGXS=1 clean

sudo ln -s /usr/lib/jvm/jdk1.7.0/jre/lib/i386/server/libjvm.so /usr/lib/libjvm.so

CREATE EXTENSION jdbc_fdw;

– MySQL JDBC

sudo -u postgres psql postgres;

CREATE SERVER jdbc_mysql FOREIGN DATA WRAPPER jdbc_fdw OPTIONS(
    drivername 'com.mysql.jdbc.Driver',
    url 'jdbc:mysql://192.168.1.2:3306/bookshoputem',
    querytimeout '15',
    jarfile '/home/user2010/Documents/DBLINK/lib/mysql-connector-java-5.1.22-bin.jar',
    maxheapsize '600'
    );

CREATE USER MAPPING FOR postgres SERVER jdbc_mysql OPTIONS(username 'root',password 'abc123');

CREATE FOREIGN TABLE Inventory_mysql
(int_inventoryid VARCHAR(10) ,
int_stockin int ,
int_stockout int ,
int_balancequantity int ,
int_reorderlevel int ,
bk_isbn VARCHAR(20)) 
SERVER jdbc_mysql
OPTIONS (table 'Inventory');
---------------------- 
```

当我运行这个命令时，我只是从 mysql 中获取数据，但它不会从 mysql 数据库中删除或更新。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:49:23.280

[文档](http://www.postgresql.org/docs/9.1/static/ddl-foreign-data.html)说：

```
Currently, foreign tables are read-only. 
This limitation may be fixed in a future release. 
```

尝试使用[dblink](http://www.postgresql.org/docs/current/static/dblink.html)。一些有用的信息在[这里](https://stackoverflow.com/questions/3862648/how-to-use-install-dblink-in-postgresql)。

# antlr - 在 antlr 中用“* +”重写 AST 规则

> ID：13965243
> 
> 赞同：2
> 
> 时间：2012-12-20T04:17:20.457
> 
> 标签：antlr

我在重写规则以将解析树转换为 antlr 中的 AST 树时遇到问题。

这是我的antlr代码：

```
grammar MyGrammar;

options {
  output= AST;
  ASTLabelType=CommonTree;
  backtrack = true;
}

tokens {
    NP;
    NOUN;
    ADJ;
}

//NOUN PHRASE
np  :    ( (adj)*  n+ (adj)*  -> ^(ADJ adj)*  ^(NOUN n)+ ^(ADJ adj)* )
    ;

adj : 'adj1'|'adj2';
n   : 'noun1'; 
```

当我输入 "adj1 noun1 adj2" 时，**解析树**的结果如下：

![解析树](../Images/3603dda563ddc13450dd9994aba97667.png)

但是重写规则后的**AST 树**似乎与解析树不完全一样，adj 是双精度的，并且不是按顺序排列的，像这样：

![AST树](../Images/af376b3c3d0cf1ee3a456a1c5bccf40f.png)

所以我的问题是如何重写规则以获得像上面的解析树一样的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:12:37.003

您的名词短语规则收集所有形容词并将它们复制到名词的两侧，因为 ANTLR 无法自动区分一组匹配`adj`的 s 和另一组。

以下是规则的分解`np`：

```
np  :    ( 
           (adj)*  //collect some adjectives
             n+ 
           (adj)*  //collect some more adjectives 
               -> ^(ADJ adj)*  //all adjectives written
                  ^(NOUN n)+   //all nouns written
                  ^(ADJ adj)*  //all adjectives written again
         )
    ; 
```

将这两组分开的一种方法是将它们收集到各自的列表中。这是一个应用于 rule 的示例`np`：

```
np  :    ( 
           (before+=adj)*  //collect some adjectives into "before"
             n+ 
           (after+=adj)*  //collect some adjectives into "after"
               -> ^(ADJ $before)*  //"before" adjectives written
                  ^(NOUN n)+   //all nouns copied
                  ^(ADJ $after)*  //"after" adjectives written
         )
    ; 
```

这样 ANTLR 就知道在`adj`s 之前和之后写出哪些`n`s。

# mysql - Rails SQL 查询与组

> ID：13965244
> 
> 赞同：0
> 
> 时间：2012-12-20T04:17:52.173
> 
> 标签：mysql, ruby-on-rails, group-by, sum, find

我在 MySQL 中的表 ORDER 和类顺序：has_many :product

```
id     +     name    +     price  +   amount   +  product_id
1      |     orde    |    100     |     5      |    1
2      |     orde    |    50      |     2      |    2
3      |     orde    |    -100    |     -2     |    1 
```

我想找到这样的答案：

```
**"Right Answer"**
id     +    name    +    price   +   amount   +   product_id
1      |    orde    |    100     |     3      |     1
2      |    orde    |    50      |     2      |     2 
```

“amount”列加上“product_id”列具有相同的product_id，例如amount = (id:1)amount + (id:3)amount = 3。

当我使用：

```
@order.group(:product_id).sum(:amount) 
```

MySQL的答案是：

```
 amount   +    product_id
  3       |      1
  2       |      2 
```

当我使用：

```
@order.group(:product_id) 
```

MySQL的答案是：

```
id     +     name    +   price   +   amount   +  product_id
1      |     orde    |   -100    |     -2     |    1
2      |     orde    |    50     |      2     |    2 
```

我将如何设计“Active Record Query Interface”来像第一个表一样找到“正确答案”？我正在使用 Rails 框架和 MySQL。

# php - 保存并显示 Twitter 和 Facebook 等状态更新？

> ID：13965246
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:18:13.890
> 
> 标签：php, html, mysql

只是一个简单的问题，如何设置我的 MySQL 数据库以进行状态更新？

因此，我已经为每个用户在水平方向有一列，为每个存储的信息（例如他们的“电子邮件”和“用户名”等）竖直设置一列。现在我如何设置一个东西来让人们发布状态更新，然后存储他们发布的每一个，但只显示他们通过 PHP 发布的最新一个到他们的页面上？我的意思是我是否为所有说“状态”或什么的用户创建一个垂直列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:20:34.783

您应该在数据库中为状态创建一个新表，并创建一个引用作者 ID 的字段（在此表中）。这是这样做的“常见方式”。

然后对查询结果进行排序只是`ORDER BY status_time DESC`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:21:06.287

像这样编写 sql 查询以获取最新的状态更新。

```
select * from table_name where user = your_user desc limit 1 
```

# android - 在三星 Galaxy s3 中打开 SMS/MMS 时 caAndroid+applicaiton 崩溃

> ID：13965252
> 
> 赞同：0
> 
> 时间：2012-12-20T04:19:30.947
> 
> 标签：android, android-intent

当我尝试打开 SMS/MMS 时应用程序崩溃

此代码适用于所有设备。但只会导致三星 galxy s3 版本 4.2 **代码崩溃：-**

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
  sendIntent.setType("audio/mp3");
  sendIntent.setClassName("com.android.mms",
    "com.android.mms.ui.ComposeMessageActivity");

  sendIntent.putExtra("subject", "subject");
  sendIntent
    .putExtra(
      "sms_body",
      "body");
  sendIntent.putExtra(Intent.EXTRA_STREAM, musicURI);
  sendIntent.putExtra("exit_on_sent", true);
  startActivity(sendIntent); 
```

Carsh Trak：-

```
Log Collector version: 1.2.0
Device model: GT-I9300
Firmware version: 4.0.4
Kernel version: 3.0.15-928452
se.infra@SEP-70 )
#1 SMP PREEMPT Tue Aug 21 17:04:13 KST 2012
Build number: IMM76D.I9300XXBLH3

12-20 01:42:25.120 D/CustomFrequencyManagerService( 2095): releaseGPU -> count of GPU locks :0
12-20 01:42:25.120 D/CustomFrequencyManagerService( 2095): ### revertGPUToDefault : 0
12-20 01:42:25.255 D/dalvikvm( 4153): GC_CONCURRENT freed 235K, 9% free 14771K/16199K, paused 1ms+2ms
12-20 01:42:25.490 I/InputReader( 2095): Touch event's action is 0x0 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=0.6392 ]
12-20 01:42:25.490 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x0
12-20 01:42:25.490 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x0
12-20 01:42:25.490 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x0
12-20 01:42:25.555 I/InputReader( 2095): Touch event's action is 0x1 (deviceType=0) [pCnt=1, pending(waiting finished signal)=0, s=]
12-20 01:42:25.555 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x1
12-20 01:42:25.555 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x1
12-20 01:42:25.555 I/InputDispatcher( 2095): Delivering touch to current input target: action: 0x1
12-20 01:42:25.705 V/Mms/ConversationListFragment( 3863): onSweepActionCanceled(),itemIndex=0
12-20 01:42:25.705 D/Mms/ConversationListFragment( 3863): onListItemClick(),position=0, id=154
12-20 01:42:25.705 D/Mms/Conversation( 3863): get(Context,long,boolean),threadId=154,allowQueryfalse
12-20 01:42:25.705 D/Mms/ConversationListFragment( 3863): isSearchMode() : false
12-20 01:42:25.705 D/Mms/Conversation( 3863): get(Context,long,boolean),threadId=154,allowQueryfalse
12-20 01:42:25.705 D/Mms/ConversationListFragment( 3863): openThread startActivity for threadId 154 , CMAS= false , isPresidential = false
12-20 01:42:25.705 E/Mms/Conversa from my HTC 
```

提前致谢。

# html - 单击时 CSS 菜单会跳转

> ID：13965253
> 
> 赞同：1
> 
> 时间：2012-12-20T04:19:33.127
> 
> 标签：html, css, wordpress

我正在从事以下项目，当页面内容超过一定长度时，我的整个页面移动约 5-10 像素时遇到了一个小问题。

[http://www.thewaymultimedia.com/IML/](http://www.thewaymultimedia.com/IML/)

我不确定我错过了什么，过去几个小时我一直在查看我的 CSS 以查看是否有额外的填充或边距，但我无法缩小范围。任何熟悉这个问题的 CSS 专业人士.

如果你进入关于菜单，然后点击“董事会”菜单，你会明白我的意思。如果我减少内容，它会停止，但是这个页面需要相当多的垂直真实状态。

有什么建议么。顺便说一下，该网站正在使用 WordPress

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:21:31.287

是否可能是因为它超出了窗口的长度，因此需要滚动条？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:23:01.927

那是由于滚动条...

# c# - 事件计时器在 .NET 中而不是在 Mono 中延迟。它是一个错误吗？

> ID：13965254
> 
> 赞同：4
> 
> 时间：2012-12-20T04:19:32.757
> 
> 标签：c#, timer, mono, stopwatch

DotNet 替代方案（MONO- [http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)）正确处理短计时器条件（低至约 12 ms 触发时间）然而，DotNet 似乎需要比预期更长的时间，并且“错过”。那么，哪种行为是正确的呢？单声道是否正确跟踪其事件触发？它是否用不正确的秒表捏造了它的数字？还是 DotNet 有一个“惰性”事件计时器？通过我的测试，很明显，这不是一个潜在的 Windows 问题。

```
.NET 200ms+ Interval minimum

Mono 12ms+ Interval minimum 
```

此查询与此类似：[Timer take 10 ms more than interval](https://stackoverflow.com/questions/2989350/timer-takes-10-ms-more-than-interval)。

但是考虑代码：

在 .NET 中，错过的事件会慢慢增加：

```
Total Runtime/Interval - Actual Events = Missed Events 
```

代码：

```
class Program
{
    const int Interval = 60; //ms Event fireing

    Stopwatch TotalRunTime = new Stopwatch();//Full runtime.
    Stopwatch Calctime = new Stopwatch(); //Used to load up the Event to 66 percent

    System.Timers.Timer TIMER; //Fireing Event handler.
    int TotalCycles = 0; //Number of times the event is fired.
    int Calcs_per_cycle = 100; // Number of calcs per Event.

    static void Main(string[] args)
    {
        Program P = new Program();
        P.MainLoop();
    }

    void MainLoop()
    {
        Thread.CurrentThread.Priority = ThreadPriority.Highest;

        TIMER = new Timers.Timer();
        TIMER.Interval = Interval;
        TIMER.Elapsed += new ElapsedEventHandler(MS_Calc);
        TIMER.AutoReset = true;
        TIMER.Enabled = true; //Start Event Timer
        TotalRunTime.Start(); //Start Total Time Stopwatch;

        while (true)
        {
            Thread.Sleep(Interval * 5);
            Console.Clear();
            PrintAtPos(2, "Missed Events " + (((TotalRunTime.ElapsedMilliseconds / Interval) - TotalCycles).ToString()));

        }

    }
    public void MS_Calc(object source, System.Timers.ElapsedEventArgs E)// public void MS_Calc(object source, ElapsedEventArgs E)
    {
        TotalCycles++;
        Calctime.Start();
        for (int i = 0; i < Calcs_per_cycle; i++)
        {
            int A = 2;
            int B = 2;
            int c = A + B;
        }
        PrintAtPos(1, "Garbge Collections G1: " + GC.CollectionCount(0) + "  G2: " + GC.CollectionCount(1) + "  G3: " + GC.CollectionCount(2) + " ");
        Calctime.Stop();
        if (Interval * 0.667 > Calctime.ElapsedMilliseconds) //only fill the even timer 2/3s 
        //full to make sure we finish before the next event
        {
            Calcs_per_cycle = (int)(Calcs_per_cycle * 1.035);
        }
        Calctime.Reset();
        PrintAtPos(0, "Calc Time : " + (DateTime.Now - E.SignalTime).Milliseconds + "  Calcs/Cycle: " + Calcs_per_cycle);
    }

    private static void PrintAtPos(int Vertical_Pos, string Entry)
    {
        Console.SetCursorPosition(0, Vertical_Pos);
        Console.Write(Entry);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T06:11:43.787

问题是 Windows 系统时钟在您使用的时间尺度上并不精确，我相信微软的实现`Timer`是使用系统时钟来确定何时触发`Elapsed`事件。我假设这是因为当您考虑系统时钟的（不）准确性时，您可以获得对观察到的行为的相当准确的描述。

系统时钟只能精确到 15.6 毫秒（原因是为了保持电池寿命，请参阅[此](https://stackoverflow.com/q/3744032/517852)问题）。因此，`Elapsed`事件并不是每 60 毫秒触发一次，而是每 62.4 毫秒触发一次。那 2.4 毫秒的差异聚合起来，你有“错过”的事件。我运行你的程序 33009 毫秒，报告了 22 个错过的事件。我会期待不同的`33009 * (1/60 - 1/62.4) = 21.2`事件。鉴于我们没有 15.6 毫秒的数字来达到更高的准确度，这与您将获得的差不多。（例如，如果经过的时间是 62.5 毫秒，您会得到 22.0 次预期未命中）。

您的示例肯定表明框架实现`Timer` *可能*更准确。我不知道为什么 Mono 的实现更准确，但通常计时器不是精确的毫秒计时。还有其他比系统时钟更准确的计时方法，`Stopwatch`可用时由班级使用。

# sql - 如何处理2个几乎相同的表

> ID：13965255
> 
> 赞同：1
> 
> 时间：2012-12-20T04:19:43.630
> 
> 标签：sql, sqlite

我有一个棒球统计表，如下所示：

```
CREATE TABLE batting_stats(
    ab                INTEGER,
    pa                INTEGER,
    r                 INTEGER,
    h                 INTEGER,
    hr                INTEGER,
    rbi               INTEGER,
    playerID          INTEGER,
    FOREIGN KEY(playerID) REFERENCES player(playerID)
); 
```

但是我有一个基本完全相同的统计数据表，但是对于一个团队：

```
CREATE TABLE team_batting_stats(
    ab                INTEGER,
    pa                INTEGER,
    r                 INTEGER,
    h                 INTEGER,
    hr                INTEGER,
    rbi               INTEGER,
    teamID            INTEGER,
    FOREIGN KEY(teamID) REFERENCES team(teamID)
); 
```

我的第一直觉是废弃外键并概括 ID，但我仍然有一个问题，我有这 2 个表，它们不能有重叠的 ID：

```
CREATE TABLE player(
    playerID    INTEGER PRIMARY KEY,
    firstname   TEXT,
    lastname    TEXT,
    number      INTEGER,
    teamID      INTEGER,
    FOREIGN KEY(teamID) REFERENCES team(teamID)
);

CREATE TABLE team(
    teamID      INTEGER PRIMARY KEY,
    name        TEXT,
    city        TEXT,
); 
```

我觉得我忽略了一些明显可以解决这个问题并将统计信息减少到单个表的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:02:05.563

您需要重新审视数据的结构以及您尝试捕获数据的内容（以及方式）。球队是像大联盟俱乐部那样“永久”还是像小联盟球队那样临时是有区别的。前者比后者更容易，但后者的解决方案也适用于前者。

您还需要确定要保留数据的标准化程度 - 如果您知道哪个击球手面对哪个投手而不是投手统计数据可以从击球统计数据中得出，但这可能比它的价值更复杂。

原子项目是玩家、团队和游戏。交易会发生，但我猜它们不会在第 6 局和第 7 局之间发生。所以比赛是球队和球员之间的纽带。

所以你会得到如下表格：

```
PlayerID   Name    Dog's Name
   1       Fred     Fluffy
   2       Joe      Spike

TeamID    Name      Mascot
   1      Chicago   Comets
   2      Timbuktu  Pussy Cats

GameID    Date        Location     Season
   1      2012-18-12  Over there    2012
   2      2011-20-4   The Park      2011

GameID    PlayerID   TeamID     AllTheStatsFromThisPlayerAtThisGame
   1         1          1
   1         2          2 
```

玩家统计数据是他玩过的所有游戏的集合。球队统计数据是球队中所有球员在所有比赛中的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:21:06.490

如果您想将统计数据减少到单个表，您可以添加几个关系表以将击球手或团队链接到统计数据表。

实体表：

```
CREATE TABLE stats(
    statsID          INTEGER primary key,
    ab                INTEGER,
    pa                INTEGER,
    r                 INTEGER,
    h                 INTEGER,
    hr                INTEGER,
    rbi               INTEGER
);

CREATE TABLE player(
    playerID    INTEGER PRIMARY KEY,
    firstname   TEXT,
    lastname    TEXT,
    number      INTEGER,
    teamID      INTEGER,
    FOREIGN KEY(teamID) REFERENCES team(teamID)
);

CREATE TABLE team(
    teamID      INTEGER PRIMARY KEY,
    name        TEXT,
    city        TEXT,
); 
```

将击球手/球队与统计数据联系起来的关系表：

```
CREATE TABLE batting_stats(
    playerID integer not null REFERENCES player(playerID),
    statsID integer not null REFERENCES stats(statsID),
    primary key (playerID, statsID)
);

CREATE TABLE team_batting_stats(
    teamID integer not null REFERENCES team(teamID),
    statsID integer not null REFERENCES stats(statsID),
    primary key (teamID, statsID)
); 
```

# sql-server - SQL Server：比较 VARCHAR 值

> ID：13965257
> 
> 赞同：0
> 
> 时间：2012-12-20T04:20:09.380
> 
> 标签：sql-server, compare

我试图只比较月份和年份。所以我将它转换为varchar。这个对吗？

```
(case 
    when s."AccMonth" >= 1 and s."AccMonth" <= 12 
        then cast(rtrim(s.accmonth) + s.accyear AS varchar) end)
>=  
cast(month(s.InitialChargeDate) as varchar) + cast(year(s.InitialChargeDate) as varchar) 
```

*   `accmonth`&`accyear`是类型`INT`
*   `InitialChargeDate`是类型`DATE`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:25:25.560

也许更好的方法是：

```
s.AccMonth = MONTH(s.InitialChargeDate)
AND s.accyear = YEAR(s.InitialChargeDate) 
```

注意：当转换为没有长度规范的 varchar 时，默认长度为 1。这可能会影响您的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:24:02.117

您应该使用内置函数而不是强制转换为 varchar：

[月份](http://msdn.microsoft.com/en-us/library/ms187813.aspx)：

```
SELECT MONTH('2007-04-30T01:01:01.1234567 -07:00'); 
```

返回 4

[年份](http://msdn.microsoft.com/en-us/library/ms186313.aspx):

```
SELECT YEAR('2007-04-30T01:01:01.1234567-07:00'); 
```

2007 年回归

# matlab - 如何加快代码计算图像上的“每像素”对比度（局部对比度）？

> ID：13965259
> 
> 赞同：1
> 
> 时间：2012-12-20T04:20:22.423
> 
> 标签：matlab, image-processing

我编写了一个 Matlab 函数来计算每个像素的对比度（即窗口的中心像素 (3x3) 与窗口中所有像素的平均值之间的差异，以及窗口中所有像素的标准偏差的差异窗户）。

对于 1024x1024 灰度图像，代码运行速度非常慢。有什么方法可以加快代码速度吗？谢谢！

```
function [ imContrast ] = LocalContrast( im )
% [ imContrast ] = LocalContrast( im )
%   Compute the contrast between a center contrast and its neighbors.
%
%   Equation:   window_size = 3x3
%               x_contrast = (x_center - mu) / std(pixels_in_window)
%               mu: mean of the pixels' gray values in the window
%
%   Input:
%       im - original image in gray scale
%
%   Output:
%       imContrast - feature matrix of contrast, same size of im

[rows, cols] = size(im);
imContrast = double(zeros(size(im)));

% Boundary - keep the gray values of those in im
imContrast(1,:) = im(1,:) / 255;
imContrast(rows,:) = im(rows,:) / 255;
imContrast(:,1) = im(:,1) / 255;
imContrast(:,cols) = im(:,cols) / 255;

% Compute contrast for each pixel
for x = 2:(rows-1)
    for y = 2:(cols-1)

        winPixels = [ im(x-1,y-1), im(x-1,y), im(x-1,y+1),...
                      im(x,y-1), im(x,y), im(x,y+1),...
                      im(x+1,y-1), im(x+1,y), im(x+1,y+1)];

        winPixels = double(winPixels);

        mu = mean(winPixels);
        stdWin = std(winPixels);
        imContrast(x,y) = (double(im(x,y)) - mu) / stdWin;
    end
end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:39:38.230

这是使用图像处理工具箱的一种解决方法。鉴于您的图像被称为`im`，

平均差（MD）：

```
 MD = im - imfilter(im,fspecial('average',[3 3]),'same'); 
```

标准差（SDD）：

```
 SDD = im - stdfilt(im, ones(3)); 
```

# android - 带有 NAVIGATION_MODE_TABS 的操作栏

> ID：13965260
> 
> 赞同：0
> 
> 时间：2012-12-20T04:20:23.457
> 
> 标签：android, tabs, android-actionbar

当我单击其中一个选项卡时，我只想在当前视图顶部显示一个对话框而不切换选项卡。

当我使用 TabHost 和 TabSpec 时，我可以通过覆盖 onTabChanged 来实现此行为。
但是现在我切换到使用操作栏的选项卡，并且很难找到解决方案。

# r - 使用 rmongodb 加速大型结果集处理

> ID：13965261
> 
> 赞同：6
> 
> 时间：2012-12-20T04:20:24.763
> 
> 标签：r, mongodb, dataframe, rmongodb, bigdata

我正在使用 rmongodb 来获取特定集合中的每个文档。它可以工作，但我正在处理数百万个小文档，可能是 100M 或更多。我正在使用作者在网站上建议的方法：cnub.org/rmongodb.ashx

```
count <- mongo.count(mongo, ns, query)
cursor <- mongo.find(mongo, query)
name <- vector("character", count)
age <- vector("numeric", count)
i <- 1
while (mongo.cursor.next(cursor)) {
    b <- mongo.cursor.value(cursor)
    name[i] <- mongo.bson.value(b, "name")
    age[i] <- mongo.bson.value(b, "age")
    i <- i + 1
}
df <- as.data.frame(list(name=name, age=age)) 
```

这适用于数百或数千个结果，但 while 循环非常非常慢。有什么方法可以加快速度吗？也许是多处理的机会？任何建议，将不胜感激。我平均每小时 100 万，按照这个速度，我需要一周的时间来构建数据框。

编辑：我注意到while循环中的向量越多，它变得越慢。我现在尝试为每个向量分别循环。虽然仍然看起来像一个黑客，但必须有更好的方法。

编辑 2：我对 data.table 很幸运。它仍在运行，但看起来它将在 4 小时内完成 12M（这是我当前的测试集），这是一个进步，但远非理想

```
dt <- data.table(uri=rep("NA",count),
                 time=rep(0,count),
                 action=rep("NA",count),
                 bytes=rep(0,count),
                 dur=rep(0,count))

while (mongo.cursor.next(cursor)) {
  b <- mongo.cursor.value(cursor)
  set(dt, i, 1L,  mongo.bson.value(b, "cache"))
  set(dt, i, 2L,  mongo.bson.value(b, "path"))
  set(dt, i, 3L,  mongo.bson.value(b, "time"))
  set(dt, i, 4L,  mongo.bson.value(b, "bytes"))
  set(dt, i, 5L,  mongo.bson.value(b, "elaps")) 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:08:12.420

您可能想尝试该`mongo.find.exhaust`选项

```
cursor <- mongo.find(mongo, query, options=[mongo.find.exhaust]) 
```

如果确实适用于您的用例，这将是最简单的解决方法。

但是 rmongodb 驱动程序似乎缺少其他驱动程序上可用的一些额外功能。例如，JavaScript 驱动程序有一个`Cursor.toArray`方法。它直接将所有查找结果转储到数组中。R驱动程序有一个`mongo.bson.to.list`功能，但a`mongo.cursor.to.list`可能是你想要的。可能值得向驱动程序开发人员寻求建议。

一个 hacky 解决方案可能是创建一个新集合，其文档是每个 100000 个原始文档的数据“块”。然后这些中的每一个都可以用`mongo.bson.to.list`. 可以使用 mongo 服务器 MapReduce 功能构建分块集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:46:52.797

我不知道以一般方式执行此操作的更快方法。您正在从外部应用程序导入数据并使用解释语言，rmongodb 无法预测集合中文档的结构。当您处理数以千计的文档时，这个过程本身就很慢。

# c# - 在 MVC 应用程序中缓存图像的正确方法

> ID：13965263
> 
> 赞同：3
> 
> 时间：2012-12-20T04:20:49.900
> 
> 标签：c#, asp.net-mvc, imageresizer

我正在使用[ImageResizing](http://imageresizing.net)库，在我的 C# Mvc 应用程序中调整和传递我的图像。

但是没有发生的一件事是我的图像没有被缓存。

我正在努力理解为每个图像适当添加缓存所需的内容。

我只需要知道我是否在写轨道上？这会正确缓存我的图像吗？

我想我需要做的是在我的 ImageResizer_OnPostAuthorizeRequestStart 中设置 FinalContentType 和 FinalContentType（我不知道从哪里获得这些值）

然后，我希望在 Application_PreSendRequestHeaders 中我可以使用下面的代码正确设置缓存标头。

我使用了[此处](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)描述的方法的修改版本。

这是我的代码：

```
 private static void ImageResizer_OnPostAuthorizeRequestStart(IHttpModule sender2, HttpContext context)
        {
            string path = Config.Current.Pipeline.PreRewritePath;
            if (!path.StartsWith(PathUtils.ResolveAppRelative("~/s3"), StringComparison.OrdinalIgnoreCase)) return;
        Config.Current.Pipeline.SkipFileTypeCheck = true;
        Config.Current.Pipeline.ModifiedQueryString["cache"] = ServerCacheMode.Always.ToString();
    }

    protected void Application_PreSendRequestHeaders(Object source, EventArgs e)
    {
        var app = source as HttpApplication;

        HttpContext context = (app != null) ? app.Context : null;

        if (context != null && context.Items != null && context.Items["FinalContentType"] != null && context.Items["LastModifiedDate"] != null)
        {
            //Clear previous output 
            //context.Response.Clear(); 
            context.Response.ContentType = context.Items["FinalContentType"].ToString();

            //FinalContentType is set to image/jpeg or whatever the image mime-type is earlier in code. 
            //Add caching headers 
            int mins = 1; //Or Configuration.AppSettings['whatever'] 

            if (mins > 0)
            {
                context.Response.Expires = 1;
            }

            var lastModified = (DateTime?)context.Items["LastModifiedDate"]; //Set earlier in code. 

            if (lastModified != DateTime.MinValue)
            {
                Response.Cache.SetLastModified(lastModified.Value);
            }

            Response.Cache.SetCacheability(context.Request.IsAuthenticated ? HttpCacheability.Private : HttpCacheability.Public);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:18:35.520

使用 DiskCache 和 ClientCache 插件分别处理磁盘缓存和缓存头。

ASP.NET 输出缓存在这里没用。

# php - htaccess 正则表达式 vs php 手动参数解析

> ID：13965267
> 
> 赞同：0
> 
> 时间：2012-12-20T04:21:09.070
> 
> 标签：php, regex, .htaccess, mod-rewrite, seo

我的查询是关于创建一个正则表达式来捕获：

1.  0 个或更多子类别
2.  0 或 1 分页索引
3.  0 或 1 个产品 ID

这可以通过将所有内容作为单个参数读取并将此参数传递给 php 来轻松完成，但是这将意味着大量代码和性能损失，而 htaccess+regex 将使用一行代码完成此操作。

例子：

catalog/
显示从第 0 页开始的所有产品

catalog/dolls/barbie/malibu/
显示从第 0 页开始的所有 malibu 芭比娃娃

catalog/dolls/gijoe/p_5/id_99
显示产品 id_99。然而，页面和类别被维护为显示为导航链接。

目录/娃娃/p_3
目录/娃娃/芭比娃娃/id_456

```
RewriteRule ^catalog/(([^/:*?"<>|\r\n]*/)*)(id-([0-9]{1,4}+))*$ catalog.php?category=$1&id=$3 
```

我试过像这样的目录/娃娃/芭比娃娃/id-1234/这样的网址；但是捕获 1 美元会产生 doll/barbie/id-1234/ 和 id-1234/id-345/id-145/ 之类的东西将是“有效”返回 145，因此会损害 seo 放置重复页面，这个正则表达式甚至不处理分页...我使用 RegexBuddy3（非常有用，必须购买），但 apache+httacess 在处理超长表达式时的行为并非 100% 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:29:41.013

最简单的方法是在 URL 中传递类别和产品的 id 您可以使 URL 看起来像这样
catalog/dolls-12/ - 您现在在目录中查找类别 id 12
catalog/dolls/barbie /malibu-33/ - 您现在在目录中查找类别 id 33
目录/dolls/barbie/malibu-33/barbie-450 - 您现在正在目录中查找类别 id 33 和产品 450

这应该通过 htaccess 中的 3 条规则来完成。如果您收到一个看起来像
catalogue/(.*)-number/(.*)-number 的链接，那么您正在查看某个类别中的产品。
catalogue/(.*)-number 那么你正在查看一个分类
目录/ - 你正在查看整个目录。

You do not need to capture everything, just the numbers, those will already tell you where you are.

# c++ - 在 C++ 中创建对象，如果已经构造了怎么办？

> ID：13965273
> 
> 赞同：0
> 
> 时间：2012-12-20T04:21:40.960
> 
> 标签：c++, object, constructor, exists

我还是 C++ 的新手。我想阅读来自多个来源的消息。每个源将以 4 字符 ID 开始数据消息。每个也将有几个数据消息。没有一条消息包含我想要从设备获得的所有信息。那么如果我创建一个ID为对象名的对象，下次收到消息时，该对象会更新还是完全重构呢？有没有办法在代码中调用它之前检查对象是否已经构造？

```
 class Channels{
public:
    INT8U systemID;    //0x01 Glonass, 0x02 GPS
    INT8U satID;
    INT8U GlonassNumber;
    INT8U SNR;         //signal to noise ratio
    FP64 carrierPhase; //cylces
    FP64 psuedoRange;  //milliseconds
    FP64 doppler;      //HZ cycles
    float tropDelay; //meters
    float ionoDelay; //meters
};
class BaseStation{
public:
    Channels channel[32];   //each channel object has all channel class variables in it
    int numberSatelitesTracked;
    FP64 timeUTC;
    INT16U week;
    FP64 GPStoUTCoffset;
    FP64 GLOtoUTCoffset;
    INT8S recieverTimeOffset;
    FP64 posX;   //geocentric coordinates in meters
    FP64 posY;
    FP64 posZ;
    FP64 rmsX;   //expected root mean square error of coordinates
    FP64 rmsY;
    FP64 rmsZ;
};
 if( check == SOCKET_ERROR){
            if( WSAGetLastError() != WSAEWOULDBLOCK){
                printf("base station client recieve failed with error %d \n",         WSAGetLastError());
                FreeSocketInformation(i); //shuts down client socket if no data
            }
            continue;
        }
        else{
            //recieve bytes into array
            memcpy(recvArray, SocketInfo->DataBuf.buf, SocketInfo->RecvBytes +1);
            //print recieved bytes on screen
            printf("%s \n", SocketInfo->DataBuf.buf);

        //first 4 bytes in message are base ID
            cBuffer[0] = recvArray[0];
            cBuffer[1] = recvArray[1];
            cBuffer[2] = recvArray[2];
            cBuffer[3] = recvArray[3];
            baseID = cBuffer;
        //create object with 4 char name
            BaseStation baseID;

        //test message identity and sort data
            if(recvArray[4] == 0x10 && recvArray[5] == 0xF5){
                baseID.timeUTC = combine64(recvArray[6]);
                baseID.week = combine16u(recvArray[14]);
                baseID.GPStoUTCoffset = combine64(recvArray[16]);
                baseID.GLOtoUTCoffset = combine64(recvArray[24]);
                baseID.recieverTimeOffset = recvArray[32];
                int noChannels = (check-30) /30 ;
                if (noChannels >= 32){
                    noChannels = 32;
                }
                int x = 33;
                for(int m = 0; m < noChannels; m++){   //advance reading for channel m

                    baseID.channel[m].systemID = recvArray[x];
                    x++;
                    baseID.channel[m].satID = recvArray[x];
                    x++;
                    baseID.channel[m].GlonassNumber = recvArray[x];
                    x++;
                    baseID.channel[m].SNR = recvArray[x];
                    x++;
                    baseID.channel[m].carrierPhase = combine64(recvArray[x]);
                    x = x+8;
                    baseID.channel[m].psuedoRange = combine64(recvArray[x]);
                    x = x+8;
                    baseID.channel[m].doppler = combine64(recvArray[x]);
                    x = x+10;
                }  //end of for loop to gather F5 sat data
            }  //end F5 message data

            if(recvArray[4] == 0x10 && recvArray[5] == 0xF6){
                baseID.posX = combine64(recvArray[6]);
                baseID.posY = combine64(recvArray[14]);
                baseID.posZ = combine64(recvArray[22]);
                baseID.rmsX = combine64(recvArray[30]);
                baseID.rmsY = combine64(recvArray[38]);
                baseID.rmsZ = combine64(recvArray[46]);
            } //end F6 message data 
```

好的，所以看起来数组可能是我最好使用的。因此，如果我设置 100 个基础对象，然后使用第二个布尔数组跟踪活动数组元素，这看起来应该有效吗？（baseID 添加到基础对象）

```
BaseStation base[100];
boolean baseActive[100];
int baseNumber;
//begin message processing------------------------------------------------------------
        //first 4 bytes in message are base ID
            cBuffer[0] = recvArray[0];
            cBuffer[1] = recvArray[1];
            cBuffer[2] = recvArray[2];
            cBuffer[3] = recvArray[3];
            string name = cBuffer;
//check for existing baseID------------------------------------------------------------
// 100 array positions
//find if base is already in use, create new if not in use
        for(baseNumber = 0; base[baseNumber].baseID != name; baseNumber++){
            //for statement increases untill it finds baseID == name
            if( baseNumber >= 100){ //baseID not currently in use
                for(int n=0; baseActive[n] == true; n++){
                    //for statement increases untill finds a false baseActive
                    baseNumber = n; //assign baseNumber to the array position
                    base[baseNumber].baseID = name; //create new baseID
                    continue;
                }
            }
        }
//check and process message data--------------------------------------------------------
        if( base[baseNumber].baseID == name){
            baseActive[baseNumber] = true;
            //test message identity and sort data
           }//end of for loop

//test connection, if no bytes recieved then connection is closed.----------------------
            if( SocketInfo->RecvBytes == 0){
                FreeSocketInformation(i); //shuts down client socket if no data
                continue;
            }
        }
    } //end of read data from socket
}

//need to add a timer to remove non sending bases from the baseActive[] array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:24:56.907

C++ 是一种静态类型语言，您需要在编译时提供对象名称。
您不能在运行时创建对象名称并使用该名称创建对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:33:21.640

正如已经回答的那样，您不能在 C++ 中这样做。但是，您可以通过其他方式解决您的问题。首先，您需要将一些 ID 绑定到结构 BaseStation 的一些具体对象。您可以通过两种方式提供此链接 - 通过将 BaseStation 对象保存在关联容器中，其中键是 ID，或者通过保存 BaseStation 对象数组（据我所知，您正在编写某种微控制器代码，因此 std 容器不能可供您使用）。

第一种方法代码示例：

```
//id is 4 char so it can be thought as int on most systems
std::map<int, BaseStation *> baseStations;
int * id = (int*)recvArray; //this hack is for showing how you can convert 4 char to int
    //may be in your code (int id = combine32(recvArray[0])) is equvivalent
if(baseStations.find(*id) != baseStations.end()) //checking existance of object with such id
{
    //ok, exists, do nothing
}
else
    baseStations[*id] = new BaseStation(); //create new

baseStations[*id].timeUTC = combine64(recvArray[6]); //starting copying values
//other values copying 
```

在第二种情况下，如果您不能使用关联容器或由于微控制器内存不足而买不起它们的库\代码，您可以只使用数组，但它根本不灵活并且消耗更多操作。例子：

```
//BaseConnection also holds field names id;
BaseConnection baseConnections[N];
int FindId(int id); //return index of element in baseConnections array with this id

BaseConnection * workingConnection = &baseConnections[FindId(combine32(recvArray[0]))];
workingConnection->timeUTC = combine64(recvArray[6]); //starting copying values
//other values copying 
```

# asp.net-mvc - ASP.NET MVC Web 应用程序连接到带有大数据的 WCF Web 服务错误

> ID：13965278
> 
> 赞同：0
> 
> 时间：2012-12-20T04:22:18.290
> 
> 标签：asp.net-mvc, wcf, xml-deserialization

**编辑**

我正在使用 MVC 3 尝试调用 MVC 服务已使用的 WCF 服务中的方法，并在调用该方法时收到以下错误。

格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数[http://tempuri.org/:emailData](http://tempuri.org/:emailData)时出错。InnerException 消息是“反序列化 EmailPO 类型的对象时出错。读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额。第 89 行，位置 1075。'。有关更多详细信息，请参阅 InnerException。

正如我所想，这不仅仅与 ASP.NET 有关。我有一个 WPF 应用程序，它也使用在本地与 Cassini 一起使用的此服务。当我使用相同的 WPF 应用程序并在发布相同的 WCF 服务后使用该服务时，运行相同的方法时也会出现上述错误。

**ASP.NET MVC 客户端 Web.config 不起作用：**

```
 <configSections>    
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
          <section name="UserInterface.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
      </configSections>
      <!--<location path="~/Content/images" allowOverride="false">
        <system.web>
          <authorization>
            <allow users="*"/>
          </authorization>      
        </system.web>
      </location>-->
      <system.serviceModel>
        <bindings>
          <basicHttpBinding>
            <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" 
                     allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="1073741824" maxBufferPoolSize="1073741824" 
                     maxReceivedMessageSize="1073741824" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
              <readerQuotas maxDepth="32" maxStringContentLength="65536" maxArrayLength="102400" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
              <security mode="None">
                <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                <message clientCredentialType="UserName" algorithmSuite="Default" />
              </security>
            </binding>
        </basicHttpBinding>
        </bindings>
        <client>

          <endpoint address="http://server1/WebServices/MasterEngine/MasterEngineService.svc?wsdl" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Configuration" contract="MasterEngineFarEnd.IMasterEngineService" name="BasicHttpBinding_IMasterEngineService" />
         --- Later on after company specific stuff --
<system.web>    
    <httpRuntime requestValidationMode="2.0" maxRequestLength="5120" executionTimeout="1200" />    
    <customErrors mode="Off" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />        
      </assemblies>
    </compilation>
    <authentication mode="Windows"></authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear />
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>        
  </system.web>
  <system.webServer>
    <!--<httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" subStatusCode="-1" />
      <remove statusCode="500" subStatusCode="-1" />
      <error statusCode="404" path="/Error/NotFound" responseMode="ExecuteURL" />
      <error statusCode="500" path="/Error/Error" responseMode="ExecuteURL" />
    </httpErrors>-->
    <validation validateIntegratedModeConfiguration="false" />
      <modules runAllManagedModulesForAllRequests="true"></modules>
    <handlers>
      <remove name="UrlRoutingHandler"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Routing" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

**WCF 服务 (MasterEngine) Web.config**

```
<system.serviceModel>
    <bindings>
      <basicHttpBinding>

        <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="1073741824" maxBufferPoolSize="1073741824" maxReceivedMessageSize="1073741824"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="1073741824" maxArrayLength="102400"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>

        <!-- OLD CONFIG 
        <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00"
         openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
         allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
         maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
         messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
         useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        -->
      </basicHttpBinding>
    </bindings>
    <client>

           <endpoint address="http://server2/WebServices/InternalService/InternalService.svc"
             binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Configuration"
             contract="InternalFarEnd.IInternalService" name="BasicHttpBinding_IInternalHubService" />

    </client>
  </system.serviceModel>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

**不工作的 WPF 应用程序**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>

      <diagnostics>
        <endToEndTracing propagateActivity="true" activityTracing="true"
          messageFlowTracing="true" />
      </diagnostics>
      <behaviors>
        <endpointBehaviors>
          <behavior>
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
          <behavior>
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
            <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
            <serviceMetadata httpGetEnabled="true"/>
            <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
            <serviceDebug includeExceptionDetailInFaults="true"/>
          </behavior>
        </serviceBehaviors>
      </behaviors>

        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="1073741824"
                    maxReceivedMessageSize="1073741824" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="1073741824" maxStringContentLength="1073741824"
                        maxArrayLength="1073741824" maxBytesPerRead="1073741824" maxNameTableCharCount="1073741824" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://server01-dev/WebServices/MasterEngine/MasterEngineService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Configuration"
                contract="MasterEngineFarEnd.IMasterEngineService" name="BasicHttpBinding_IMasterEngineService" />
        </client>
    </system.serviceModel>
</configuration> 
```

**可以工作的 WPF 应用程序**

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>

      <diagnostics>
        <endToEndTracing propagateActivity="true" activityTracing="true"
          messageFlowTracing="true" />
      </diagnostics>
      <behaviors>
        <endpointBehaviors>
          <behavior>
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          </behavior>
        </endpointBehaviors>
        <serviceBehaviors>
          <behavior>
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
            <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
            <serviceMetadata httpGetEnabled="true"/>
            <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
            <serviceDebug includeExceptionDetailInFaults="true"/>
          </behavior>
        </serviceBehaviors>
      </behaviors>

        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_Configuration" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="1073741824"
                    maxReceivedMessageSize="1073741824" useDefaultWebProxy="true">
                    <readerQuotas maxDepth="1073741824" maxStringContentLength="1073741824"
                        maxArrayLength="1073741824" maxBytesPerRead="1073741824" maxNameTableCharCount="1073741824" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://server01-dev/WebServices/MasterEngine/MasterEngineService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Configuration"
                contract="MasterEngineFarEnd.IMasterEngineService" name="BasicHttpBinding_IMasterEngineService" />
        </client>
    </system.serviceModel>
</configuration> 
```

正如其他线程所说的那样，我已经添加了 max-everything 以及错误的实际状态，但是我看不到此时 8192 甚至适用于什么地方或它可能指的是什么。如果有人能指出我正确的方向，我将不胜感激。如果需要，它所指的我的类看起来像这样.. 设置了 DataMembers / DataContracts

**电子邮件 PO 类**

```
[DataContract]
    public class EmailPO
    {
        [DataMember]
        public string FromEmail { get; set; }

        [DataMember]
        public List<String> ToEmail { get; set; }

        [DataMember]
        public List<String> CcEmail { get; set; }

        [DataMember]
        public string FullHTML { get; set; }

        [DataMember]
        public string Subject { get; set; }

        [DataMember]
        public List<EmailClassLibrary.AttachmentItem> Attachments { get; set; }

        [DataMember]
        public string TableHeader { get; set; }

    } 
```

**编辑 - 更新**

```
<system.serviceModel>

    <behaviors>
    <endpointBehaviors>
      <behavior>
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
      </behavior>
    </endpointBehaviors>
    </behaviors>

<endpoint address="http://server1/WebServices/MasterEngine/MasterEngineService.svc?wsdl"
                binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_Configuration"
                contract="MasterEngineFarEnd.IMasterEngineService"
                name="BasicHttpBinding_IMasterEngineService"/> 
```

还尝试给它一个名称并更新端点以使用相同的名称进行 behaviorConfiguration

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:56:16.320

这是我们对象的序列化图超出默认最大限制的问题。所以在服务配置中添加这一行。

```
 <system.serviceModel>
   ...
  <behaviors>
      <endpointBehaviors>
        <behavior name="Behaviors.EndpointBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    ...
  </system.serviceModel> 
```

它在 WCF 服务配置中对我有用。

编辑：你可以参考这个链接[点击这里](http://devlicio.us/blogs/derik_whittaker/archive/2010/05/04/setting-maxitemsinobjectgraph-for-wcf-there-has-to-be-a-better-way.aspx)

# java - 斯坦福 CS106a：一些不允许运行程序的 java 小程序错误

> ID：13965280
> 
> 赞同：3
> 
> 时间：2012-12-20T04:22:21.087
> 
> 标签：java

无法解决此屏幕中的问题。

[http://s8.postimage.org/n5osf76ed/qestions.jpg](http://s8.postimage.org/n5osf76ed/qestions.jpg)

所有代码都在一个月前工作。我改变了什么：我有一个不同版本的 eclipse（现在：Eclipse IDE for Java Developers 1.5.1.20120920-0737，不知道前一个是什么）。

与环境变量混淆。由于这不会影响 ot

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T04:36:41.537

[试试这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/see-cs106a/3vhSBSKFU84)中提到的解决方案。

> 我刚刚使用标准（不是斯坦福）Eclipse 遇到了这个问题。到目前为止，这对您来说可能没有实际意义，但我会为未来的旅行者发布我的解决方案。
> 
> 分配 1 的启动配置默认为 Applet，因此不会启动包含的 Karel 应用程序。要解决此问题，请为每个文件创建和使用新的应用程序启动配置。
> 
> 如果您已经尝试运行某些文件，请删除创建的 Applet 配置，以便您可以重用名称：
> 
> 1.  打开项目属性（例如，右键单击Assignment 1 并选择Properties）。
> 2.  选择运行/调试配置。
> 3.  选择并删除每个配置。
> 4.  单击确定。
> 
> 愿原力与你同在。
> 
> 创建应用程序配置：
> 
> 1.  右键单击 java 文件（例如 CollectNewspaperKarel.java）并选择 Run As > Run Configurations...
>     
>     
> 2.  在左侧窗格中选择 Java 应用程序。
>     
>     
> 3.  单击新建启动配置（带有 + 的文档图标）。
>     
>     
> 4.  输入配置的名称并将其 Main 类设置为相关文件（例如 CollectNewspaperKarel）。
>     
>     
> 5.  单击应用，然后单击运行。（这应该可以正确运行并在运行历史记录中创建一个有用的条目。）
>     
>     
> 
> Eclipse 仍将尝试默认为 Applet，因此您将需要从运行历史记录（从运行菜单或运行按钮的下拉菜单）启动这些配置。如果您不小心按默认启动，它会将无用的 Applet 配置添加到运行历史记录（例如 CollectNewspaperKarel (1) ）。您可以从“运行配置”对话框中删除它以保持运行历史记录整洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:24:34.330

中使用的 eclipse`CS106A`是为 stanford 和“karel the robot”定制的 :) 只需下载并再次安装它，一切就可以正常工作了。

# java - 启动 Android 应用程序时的初始延迟

> ID：13965281
> 
> 赞同：0
> 
> 时间：2012-12-20T04:22:48.680
> 
> 标签：java, android, xml, imageview, lag

我正在为 Android 平台开发一个国际象棋类型的应用程序（使用 Eclipse 和标准 Java/XML 连接）。这不是为了学校或任何东西，只是在学习了一些“让我的脚湿透”的基础知识之后的个人项目。

无论如何，我的问题不是直接的问题，更多的是我打开模拟器时看到的内容以及我在 logcat 中看到的内容。

通常，当我为任何应用程序运行时，模拟器会按照标准时间加载它，但是当它运行时，主要活动会立即加载。但是，对于这个应用程序，我在应用程序加载后遇到了延迟，当我快速浏览到 logcat 时，它显示正在生成大量橙色消息......然后它显示我的板（应用程序 atm 是只是显示一个板）。

这是巨大的 logcat 活动（对 pastebin 感到抱歉，但我是这个网站的新手，很难正确格式化）： http: [//pastebin.com/skc8SXqN](http://pastebin.com/skc8SXqN)

这是我的 xml 和 java 文件： http: [//pastebin.com/8ByBQ0TA](http://pastebin.com/8ByBQ0TA)

我的问题是......为什么在应用程序加载和显示板之间出现约 5 秒的延迟有什么明显的原因吗？令人难以置信的大 logcat 输出都被定向到 imageview ......所以我在那里做了一些非常低效的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:31:20.220

问题是你应该为你提供一个drawable，`squareView.setImageResource()`而你提供`R.id.square_background`的似乎并不对应于一个drawable资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:58:40.380

因为在这里我看到您在项目中引用了大量图像，这对于 android 模拟器来说是正常的，以减慢您的应用程序的加载时间。您可以在设备上运行它，它会比模拟器更快..并将您的图像资源放在`drawable`文件夹中并参考他们正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:23:06.757

正如你所说，它与我处理图像数组的方式大致相同......也就是说，我根本不需要它。

getCount() 方法，如果我将它设置为返回我想要的正方形的总数，只会导致创建正方形 X 次而不使用图像数组。

改变了这一点，瞧，没有滞后。

这完全解决了！

# python - 使用 mechanize 提交没有控件名称的表单

> ID：13965285
> 
> 赞同：4
> 
> 时间：2012-12-20T04:23:14.597
> 
> 标签：python, mechanize

我正在尝试使用 mechanize for python 来提交表单，但是我需要填写的表单控件没有分配给它的名称。

```
<POST https://sample.com/anExample multipart/form-data
  <HiddenControl(post_authenticity_token=) (readonly)>
  <HiddenControl(iframe_callback=) (readonly)>
  <TextareaControl(<None>=)>> 
```

我要编辑的控件是上述对象中的最后一个控件，`<TextareaControl(<None>=)>`.

我查看了文档，似乎找不到一种方法来为该控件分配值，因为它没有与之关联的名称。

```
 forms = [f for f in br.forms()]
  print forms[2].controls[5].name 
```

输出“无”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T06:14:35.057

所以，我承认，这个很难弄清楚。必须从字面上看一下[`mechanize`代码本身](https://github.com/jjlee/mechanize/blob/master/mechanize/_form.py#L2587)才能弄清楚。不幸的是，我无法在没有`name`属性的实际表单项上确定测试它，但如果您提供要拉取的站点，我可以这样做，或者您可以自己做。

实际上，表单对象在可用性方面并没有很好地实现。我可以看到为您编辑无名表单控件值的唯一方法是使用*表单*的[`set_value`方法](https://github.com/jjlee/mechanize/blob/master/mechanize/_form.py#L2587)：

```
class HTMLForm:

    # <...>

    set_value(value,
          name=None, type=None, kind=None, id=None, nr=None,
          by_label=False,  # by_label is deprecated
          label=None) 
```

因此，您在此处设置您要查找的控件的方法是使用`nr`参数来抓取它，使用表单中控件的索引。不幸的是，您不能使用负整数从后面抓取控件，因此要抓取最后一个表单，您必须按照`nr=len(myform.controls)-1`.

无论如何，您可以在这里做的是使用该`set_value`方法，并且您应该设置如下：

```
forms[2].set_value("LOOK!!!! I SET THE VALUE OF THIS UNNAMED CONTROL!", 
                       nr=5) 
```

这应该对你有用。让我知道事情的后续。

# unit-testing - “委托”类的单元测试

> ID：13965287
> 
> 赞同：0
> 
> 时间：2012-12-20T04:23:32.540
> 
> 标签：unit-testing, delegates

在某些情况下，我必须使用一个委托类，它将传入的请求委托给另一个类。

例如，

```
public class ServiceDelegate 
{            
    private EmployeeService service;           

    public List fetchEmployees()
    {
        service.fetchEmployees();
    } 
} 
```

虽然这个类除了调用服务类之外没有做任何逻辑，但我仍然在想，我们应该通过单元测试来验证委托是否正确发生，可能通过一个积极的测试用例。这是正确的方法吗？

我的一些朋友说，不做任何逻辑的单元测试代码，比如委托，是浪费时间。请指教。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:34:07.893

单元测试之所以有价值，有两个原因：它告诉您要编写什么代码，并确保代码不会意外更改。

@RustyTheBoyRobot 在他的评论中提出了一个很好的观点。我会扩展它：如果您觉得您不需要对某段代码进行单元测试，这可能意味着您不需要那段代码。

但是，我经常编写非常薄的代理或适配器。缓存代理尤其需要在委托发生时进行一些测试。在这种情况下，单元测试是完全合适的。

无耻的插件：[这](https://gist.github.com/4039017)是一个使委托测试更容易的实用程序类。

# php - 无法让 $(this) 在 JQuery 中工作

> ID：13965289
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:23:54.863
> 
> 标签：php, jquery, wordpress

嘿伙计们，所以我正在尝试为 wordpress 中所有查询的帖子概述产品功能。这是我的设置：

```
<?php $i = 0; $j = 1;?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php get_template_part( 'content', get_post_format() ); 
      $postid[$i] = get_the_ID();
      echo "<input type='hidden' value='".$postid[$i]."' id='hiddenpostitle".$j."' name='hiddenpostitle'/> ";
      echo "<input type='hidden' value='".$j."' id='hiddenpostnumfield'/> ";
?>
 <script type="text/javascript">
      $(function() {
           $('.item-post a').click(function() {
                 var num;
             $(this).num = $('#hiddenpostnumfield').val();
                 var prodname ;
             $(this).prodname = $('#hiddenpostitle' + num).val();

                 $.post('overviewcheck-515adfzx8522', { 
                      'ProdName': prodname
                 },
                 function( response ) {
                 },
                 'json'
            );
         });
         $('.item-post a').colorbox({
                 opacity:0.3, 
                 href:"../overviewa512454dzdtfa"
         });
    });
 </script>              
<?php 
         $i++;
     $j++;
    ?>
    <?php endwhile; endif; ?> 
```

所以这将从wordpress获取一堆帖子并将它们粘贴到页面，然后假设JQuery代码根据从哪个帖子点击获取指定的prodid`.item-post a`

当我运行它时，我得到了最后一个帖子，然后什么也没有发生——例如`1,2,3,4,5`它总是选择 5。

让我知道这是否有意义，我认为我没有正确使用 $(this)。但不确定，如果你能帮我一把，我将不胜感激:)

更新：

```
<?php /*query_posts('test');uncategorized*/ $i = 0; $j = 1;?>
                <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', get_post_format() ); 
                    $postid[$i] = get_the_ID();
                    echo "<input type='hidden' value='".$postid[$i]."' id='hiddenpostitle".$j."' name='hiddenpostitle'/> ";
                    echo "<input type='hidden' value='".$j."' id='hiddenpostnumfield'/> ";
                ?>

                <?php 
                $i++;
                $j++;
                ?>
                <?php endwhile; endif; ?>
            <script type="text/javascript">
                                $(function()
                                {

                                   $('.item-post a').each("click" ,function(e) {
                                         $(this).click(function(e) {

                                        var num;
                                        num = $('#hiddenpostnumfield').val();
                                    var prodname ;
                                    prodname = $('#hiddenpostitle' + num).val();

                                       $.post('overviewcheck-515adfzx8522', 
                                        { 
                                            'ProdName': prodname

                                        },
                                        function(response) {
                                        },
                                        'json'
                                    );
                                    });
                                   });
                                    $('.item-post a').colorbox({opacity:0.3, href:"../overviewa512454dzdtfa"});
                                });

                            </script> 
```

我收到一条错误消息，提示单击没有“应用”方法

好的，所以 Wordpress 查询发布 -

```
<?php /*query_posts('test');uncategorized*/ $i = 0; $j = 1;?>
                    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                    <?php get_template_part( 'content', get_post_format() ); 
                        $postid[$i] = get_the_ID();
                        echo "<input type='hidden' value='".$postid[$i]."' id='hiddenpostitle".$j."' name='hiddenpostitle'/> ";
                        echo "<input type='hidden' value='".$j."' id='hiddenpostnumfield'/> ";
                    ?>

                    <?php 
                    $i++;
                    $j++;
                    ?>
                    <?php endwhile; endif; ?> 
```

这将创建一个输入字段 - 2 个具有递增值的隐藏字段，因此 hiddenpostitle1、hiddenpostitle2 等......并且 hiddenpostnumfield 值将增加 1、2、3 等。随着帖子的发布。与 JQuery 代码相比，JQuery 代码将获取选择了哪个图像 (image-post a )，然后发送到文件，该文件根据传递的数据创建会话，并且颜色框在概览中打开它。

我的问题：

我无法根据他们选择的产品传递正确的数据。无论如何，它始终是在网站上发布的最后一篇文章。

好的，现在我们到了某个地方！！！

前往 prodjsoundlighting.com 进行检查，然后单击图像，但仍然有问题，不知道为什么。

这是更新的代码：

```
<?php /*query_posts('test');uncategorized*/ $i = 0; $j = 1;?>
                <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', get_post_format() ); 
                    $postid[$i] = get_the_ID();
                    echo "<input type='hidden' value='".$postid[$i]."' id='hiddenpostitle".$j."' name='hiddenpostitle'/> ";
                    echo "<input type='hidden' value='".$j."' id='hiddenpostnumfield".$j."'/> ";
                ?>

                <?php 
                $i++;
                $j++;
                ?>
                <?php endwhile; endif; ?>
                <script type="text/javascript">
                                $(function()
                                {

                                   $('.item-post a').each(function(i) {
                                         $(this).on("click", function(e) {

                                        var num;
                                        num = $('#hiddenpostnumfield' +(i+1)).val();
                                    var prodname ;
                                    prodname = $('#hiddenpostitle' + (i+1)).val();

                                       $.post('overviewcheck-515adfzx8522', 
                                        { 
                                            'ProdName': prodname

                                        },
                                        function(response) {
                                        },
                                        'json'
                                    );
                                    });
                                   });
                                    $('.item-post a').colorbox({opacity:0.3, href:"../overviewa512454dzdtfa"});
                                });

                            </script>   

So now it is putting up, but it is taking like 3 above what it is suppose...best way is to see it so check it out and let me know. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:27:22.257

您使用`$(this)`不正确。`$(this)`指向触发该功能的元素，因此在您的情况下是 clicked `$('.item-post a')`。

此外，与 无关`$(this)`，您的代码通过循环运行，但会创建大量具有相同`id`-的输入`hiddenpostnumfield`。`id`'s 在一个页面中应该是唯一的。

# subdomain - 当网站在子域上托管文件时，它叫什么？

> ID：13965293
> 
> 赞同：1
> 
> 时间：2012-12-20T04:24:25.000
> 
> 标签：subdomain

例如，像 imgur 或 youtube。
两者都有 url blahblahblah.com/filename.(something) 并且您可以看到该特定文件，因为它位于那里。

子域可能是此类名称的错误名称。

我想创建一个网站，用户可以在其中创建这些扩展。
因此用户可以在服务器上创建文件。

这会叫什么。

我只是在寻找谷歌搜索的关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:44:42.093

子域看起来像这个 subdomain.example.com。域名之后的任何内容都称为 URI（统一资源标识符）。ei，example.com/news/headline 或 example.com?news=headline

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T04:50:35.057

它通常被称为内容交付网络或 CDN。有很多第三方 CDN 的示例，例如 Akamai 或 Cachefly。像谷歌这样的大公司拥有创建自己的资源并且仍然获得同样的效率优势。

使用 CDN 的优势在于 Web 服务器已针对静态内容（如图像、CSS、JavaScript 或可下载内容）的交付进行了优化。他们利用强大的缓存方案来避免浏览器在每次访问时下载文件。一些第三方解决方案，尤其是 Akamai，还具有额外的优势，即在地球上几乎每个人的一跳内拥有服务器。

YouTube 示例如下所示...

> http://s.ytimg.com/yts/img/feed/promo-home-icon-vflGvCgAU.png **_** _

有关[内容交付网络](http://en.wikipedia.org/wiki/Content_delivery_network)的更多信息。

# android - 如何检查下载图像的过程是否完成？

> ID：13965294
> 
> 赞同：2
> 
> 时间：2012-12-20T04:24:26.720
> 
> 标签：android, download, save, store

在我的应用程序中，系统将从 url 下载图像并将其保存到手机内存中。*（我没有在问题中包含 url 地址）*最重要的是，它还将数据保存到 sqlite 数据库中。保存的数据是文件名、文件路径和文件大小。但是目前一旦我完成下载过程，无论下载完成还是在过程中失败，它也会插入数据库。
有什么方法可以检查下载过程是否完成？

```
 GalleryScreen.this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                boolean isDownloadResult = false;

                        int NumIncrease = 0;
                        Log.i(TAG, "NumberIncrease:" +NumIncrease);
                        Toast.makeText(getApplicationContext(), "Downloading.............>>>>>>>>>>>", Toast.LENGTH_SHORT).show();
                        Bitmap bm;
                        InputStream in;

                        try{

                            in = new java.net.URL(URL).openStream();
                            bm = BitmapFactory.decodeStream(new PatchInputStream(in));

                            File storage = new File(Environment.getExternalStorageDirectory() + File.separator + "/Images/");
                            Log.i(TAG,"storage:" +storage);
                            Log.i(TAG,"storage:" +storage.getAbsolutePath());
                            if(!storage.exists()){
                                storage.mkdirs();

                            }

                                String FileName = "/"+CONTENT_ID+".jpg"; 
                                FileOutputStream fos = new FileOutputStream(storage + FileName);
                                bm.compress(Bitmap.CompressFormat.JPEG, 85, fos);

                                String filepath = storage + FileName;
                                File filecheck = new File (filepath);
                                long fileSize = filecheck.length();
                                fos.flush();
                                fos.close();

                                Log.i(TAG, "bm:" +bm);
                                Log.i(TAG, "fos:" +fos);
                                Log.i(TAG, "filesize:" +fileSize);
                                Log.i(TAG, "filepath:" +filepath);
                                helper.insert_content(filepath, fileSize, requestTime);

                            isDownload = false;
                        }
                        catch(IOException e1){
                                e1.printStackTrace();
                                }   
            }

        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:43:49.417

请使用异步任务。AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。理想情况下，AsyncTasks 应该用于短操作（最多几秒钟。）

您可以将匿名类用于异步任务。这会是这样的：

```
ImageView mChart = (ImageView) findViewById(R.id.imageview);
String URL = "http://www...anything ...";

mChart.setTag(URL);
new DownloadImageTask.execute(mChart); 
```

任务类：

```
public class DownloadImagesTask extends AsyncTask<ImageView, Void, Bitmap> {

ImageView imageView = null;

@Override
protected Bitmap doInBackground(ImageView... imageViews) {
    this.imageView = imageViews[0];
    return download_Image((String)imageView.getTag());
}

@Override
protected void onPostExecute(Bitmap result) {
    imageView.setImageBitmap(result);
}

private Bitmap download_Image(String url) {
   ...
} 
```

在这里，**onPostExecute**，您可以轻松检查下载图像的过程是否完成。

**进一步阅读**

*   [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)
*   [使用 AsyncTask 加载图像](https://stackoverflow.com/questions/8224993/loading-image-using-asynctask)
*   [Android：使用 Asynctask 从 Web 加载图像](https://stackoverflow.com/questions/3090650/android-loading-an-image-from-the-web-with-asynctask)
*   [Android帮助在图像加载时添加进度对话框？](https://stackoverflow.com/questions/7177847/android-help-with-adding-a-progress-dialog-while-image-loading)

**编辑：**

*   如果您尝试下载更大的文件，您可能会考虑将您的应用程序放入某种类型的[服务](http://developer.android.com/reference/android/app/Service.html)中，因为这可能需要几个小时。
*   您可以考虑将[下载](http://developer.android.com/reference/android/app/DownloadManager.html)管理器用于较新的设备（Android 2.3+）
*   也是一个不错的资源 -> [使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog)

# c++ - 如果功能永不终止，则重新分配内存

> ID：13965295
> 
> 赞同：-2
> 
> 时间：2012-12-20T04:24:32.363
> 
> 标签：c++

我已经使用 NEW 动态分配内存，并且实现它的功能将始终保持运行，当我将强制终止时它将退出。我也想释放内存。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:29:41.107

如果您分配内存的块被多次执行，那么您应该考虑在这些对象超出范围时使用[智能指针来释放内存，而无需显式调用 delete。](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)

如果该块仅执行一次并且您想在程序退出时释放内存，则不需要这样做，因为操作系统将回收分配给您的进程的所有内存，无论内存是否在进程中显式释放。

# sql - 如何使用可能采用不同格式的名称填充数据库表？

> ID：13965301
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:25:01.253
> 
> 标签：sql, sql-server, string, ms-access

其中`Table1`有一`Input`列正在填充用户输入的客户名称，无论是`<Surname>, <First Name>`格式还是`<First Name> <Surname>`格式。还有一个`CustomerNo`专栏。

在表`Customers`中有`Surname`和`FirstName`列填充客户姓名。每个客户还有一个自动生成的`CustomerNo`列。

什么查询将填充`Table1.CustomerNo`正确`CustomerNo`的`Customers`基于`Table1.Input`，同时满足两种可能的格式`Input`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:56:00.543

这是将名称拆分为组件的一种 hacky 方法（SQL-Server 方言）：

```
create table InputNames (InputName nvarchar(50));

insert into InputNames (InputName) values ('Smith, John');
insert into InputNames (InputName) values ('Mary Smith');
insert into InputNames (InputName) values ('Mark Jones');
insert into InputNames (InputName) values ('White, Barry');
insert into InputNames (InputName) values ('Damien Drybread, Esquire');

select 
InputName, 
case when charindex(',', inputname, 1) = 0 then 
substring (inputname, 1, charindex (' ', inputname, 1) - 1) 
else 
substring (inputname, charindex (',', inputname, 1) + 2, 99) 
end
as firstname,
case when charindex(',', inputname, 1) = 0 then 
substring (inputname, charindex (' ', inputname, 1) + 1, 99) 
else 
substring (inputname, 1, charindex (',', inputname, 1) - 1) 
end
as lastname

from inputnames 
```

这是输出

```
InputName   firstname   lastname
Smith, John John    Smith
Mary Smith  Mary    Smith
Mark Jones  Mark    Jones
White, Barry    Barry   White
Damien Drybread, Esquire    Esquire Damien Drybread 
```

...并且您可以看到，如果您的姓名中可以包含逗号而不是名字和姓氏之间的分隔符，则您需要处理一些极端情况。

类似的方法适用于 MS Access，但您必须使用“Iif”而不是 case 语句，以及“InStr”而不是 charindex。

# heroku - Shapado：在 Heroku 上部署失败，系统包丢失错误

> ID：13965302
> 
> 赞同：2
> 
> 时间：2012-12-20T04:25:02.220
> 
> 标签：heroku, shapado

我已经在我的本地系统上成功运行了 shapado rails 应用程序（我正在使用 ubuntu）。但是在运行捆绑安装时，它失败并出现以下错误

> 配置：错误：未找到 uuid/uuid.h 和 uuid.h - 黄铜、燧石和燧石需要（您可能需要安装 uuid-dev、libuuid-devel 或 e2fsprogs-devel 包）

然后我使用

> sudo apt-get install uuid-dev
> sudo apt-get install libqt4-dev

在运行 rake 任务时

> rake bootstrap RAILS_ENV=development

得到一些零错误并通过应用以下补丁修复了相同的错误

> [为 nil 调用 id](https://stackoverflow.com/questions/13107509/called-id-for-nil)

之后，我可以在本地成功运行该应用程序。

当我尝试在 Heroku 上部署时，它失败了

> 配置：错误：未找到 uuid/uuid.h 和 uuid.h - 黄铜、燧石和燧石需要（您可能需要安装 uuid-dev、libuuid-devel 或 e2fsprogs-devel 包）

它尝试安装 gem 'xapian-ruby', '1.2.7.1' 并且由于包不可用而失败。

有没有人面临同样的问题。建议我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:21:57.310

将 shapado 部署到 heroku 需要您制作一个自定义 buildpack，其中包含 shapado 需要内置的二进制依赖项。有关如何执行此操作的说明可在此处找到[https://blog.heroku.com/archives/2012/11/13 /hacking-buildpacks](https://blog.heroku.com/archives/2012/11/13/hacking-buildpacks)。这是可能的。

# gwt - GWT（GXT 2.2.2）+码头=好的。玻璃鱼 = 404

> ID：13965305
> 
> 赞同：2
> 
> 时间：2012-12-20T04:25:21.627
> 
> 标签：gwt, glassfish, http-status-code-404

我安装了：JDK 1.7.0_10、GWT 2.4、GXT 2.2.5、App Engine 1.7.0、Eclipse Indigo Service Release 2、Glassfish-3.1.2.2-windows-ml、WinXP SP3。

我创建了一个新的“Web 应用程序项目”。运行-> 运行方式... -> Web 应用程序：

```
http://127.0.0.1:8888/Exp.html?gwt.codesvr=127.0.0.1:9997 
```

在那种情况下，我有：

向服务器发送名称：

```
GWT User

Server replies:
Hello, GWT User!

I am running Google App Engine Development/1.7.0.
It looks like you are using:
Mozilla/5.0 (Windows NT 5.1; rv:17.0) Gecko/20100101 Firefox/17.0 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee                http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

  <!-- Servlets -->
  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>ru.sample.Exp.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/exp/greet</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>Exp.html</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>SystemServiceServlet</servlet-name>
    <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
    <init-param>
      <param-name>services</param-name>
      <param-value/>
    </init-param>
  </servlet>

  <servlet-mapping>
    <servlet-name>SystemServiceServlet</servlet-name>
    <url-pattern>/_ah/spi/*</url-pattern>
  </servlet-mapping>

</web-app> 
```

当我编译我的应用程序并将“war”文件夹复制到 glassfish docroot 中时：E:\glassfish3\glassfish\domains\domain1\docroot\exp\

如果我尝试打开链接：`http://localhost:8080/exp/Exp.html` 我有错误：

```
Sending name to the server:
GWT User

Server replies:
An error occurred while attempting to contact the server. 
Please check your network connection and try again. 
```

错误是：

> com.google.gwt.user.client.rpc.StatusCodeException: 404 GlassFish v3 - 错误报告
> 
> # HTTP 状态 404 -
> 
> * * *
> 
> **类型**状态报告
> 
> **信息**
> 
> **描述**请求的资源 () 不可用。
> 
> * * *
> 
> ### GlassFish Server 开源版 3.1.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:57:52.907

仅将内容复制到根目录是行不通的。尝试构建**war**文件（不确定，但应用程序的根目录也可以）并将其放置到**自动部署**文件夹中。这是部署过程的详细[描述](http://glassfish.java.net/javaee5/deployment/index.html#0.0.0.0.Deploying%20Applications%7Coutline)。还请检查*Glassfish*日志，以确保成功部署应用程序。

# objective-c - 当我设置 AttributedString 占位符时，NSTextField 不显示

> ID：13965307
> 
> 赞同：0
> 
> 时间：2012-12-20T04:25:40.963
> 
> 标签：objective-c, macos, customization, nstextfield, nsattributedstring

我正在尝试自定义一点 my `NSTextFields`，第一步是自定义`placeholder`.

我想更改占位符颜色，我正在尝试通过这种方式：

```
- (void)awakeFromNib {

    // Color for placeholder in NSTextField - Color: #cdc9c1
    NSColor *placeholderColor = [NSColor colorWithCalibratedRed:0.80f green:0.78f blue:0.75f alpha:1.0f];

    NSDictionary *placeholderAttributeDict = [NSDictionary dictionaryWithObject:placeholderColor forKey:NSForegroundColorAttributeName];

    NSAttributedString *emailPlaceholderString = [[NSAttributedString alloc] initWithString:@"Email" attributes:placeholderAttributeDict];
    // NSAttributedString *passPlaceholderString = [[NSAttributedString alloc] initWithString:@"Password" attributes:placeholderAttributeDict];

   // NSTextField Email attributes
   [[self emailTextField] setDrawsBackground:NO];
   [[self emailTextField] setBordered:NO];
   [[[self emailTextField] cell] setPlaceholderAttributedString:emailPlaceholderString];

   // NSTextField Password attributes
   [[self passTextField] setDrawsBackground:NO];
   [[self passTextField] setBordered:NO];
   [[[self emailTextField] cell] setPlaceholderString:@"Password"];
} 
```

如您所见，第一个占位符`NSTextField`是由`NSAttributedString`我尝试指定颜色的位置建立的。第二个占位符`NSTextField`只是一个`NSString`.

当我运行应用程序时，它只显示第二个`NSTextField`. 第一个没有出现在任何地方。

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:29:09.967

您正在设置相同的 emailTextField 两次...

```
[[[self emailTextField] cell] setPlaceholderAttributedString:emailPlaceholderString];

[[[self emailTextField] cell] setPlaceholderString:@"Password"]; 
```

（这能解决问题还是只是问题中的一个错误？）

# iphone - 通过 App Store 分发 iPad 内部应用程序

> ID：13965308
> 
> 赞同：2
> 
> 时间：2012-12-20T04:25:41.693
> 
> 标签：iphone, ios, xcode, distribution

我开发了 3 个 iPad 单窗口应用程序，我的应用程序在应用商店中被拒绝，因为它们属于一个组织。我一直在寻找在应用商店中发布这些应用程序的解决方案，而不是通过临时分发来分发它们。我遇到了一些解决方案，例如企业应用程序开发以及应用程序的用户名和密码。我决定选择第二个选项，但我找不到任何解决方案来为这个单窗口应用程序设置用户名和密码，这样我就可以将应用程序提交到应用商店，我们的组织人员可以随时下载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:56:55.700

为用户名和密码创建一个条目。当用户提交它时，您可以根据 PHP 或其他在线方法检查输入。将用户名和密码保存到钥匙串，并在每次应用启动时重复此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:35:30.247

看看[`iOS Developer Enterprise Program`](https://developer.apple.com/programs/ios/enterprise/)。

它的开发者订阅专门用于内部应用程序分发。注册非常简单。截至目前，它的成本为 299 美元/年。

通过**Ad-Hoc 分发**，您被限制为 100 台设备，并且在添加设备后，您需要重新生成配置文件并重新打包应用程序。

使用**Enterprise 发行版**，您不受任何限制。这些应用程序可以通过简单的点击您网站上的 URL 或通过电子邮件安装。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-20T04:29:32.933

使用[Cydia](http://en.wikipedia.org/wiki/Cydia)。App Store 的要求和延迟太多！

编辑：

如果您必须使用 App Store，请使用[KeyChain](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797)

请注意，钥匙串是在 App Store 中验证用户名和密码的机制。

```
/*
 <codex>
 <abstract>Localized strings for GenericKeychain</abstract>
 </codex>
*/

"Username" = "Username";
"Password" = "Password";
"Account Number" = "Account Number";
"Show Cleartext" = "Show Cleartext";
"AccountNumberShared" = "The account number is shared between all apps from this developer."; 
```

# java - 如何从jsp页面打开文件？

> ID：13965309
> 
> 赞同：4
> 
> 时间：2012-12-20T04:25:40.057
> 
> 标签：java, javascript, file, jsp

我有一些pdf文件保存在某个本地磁盘中.. D:/filesDir/ ，我想将该文件夹中的所有文件显示到我的jsp页面中&单击特定的pdf文件时，它应该打开位于D中的pdf文件:/filesDir/ 用户点击了..目前我的代码如下所示。

```
<% 
String sourceDirectory = "D:\\filesDir\\";
File f = new File(sourceDirectory);
String [] fileNames = f.list();
File [] fileObjects= f.listFiles();
%>
<UL>
<%
for (int i = 0; i < fileObjects.length; i++) {
if(!fileObjects[i].isDirectory()){
%>
<LI>
<A HREF="<%="D:/filesDir/"+fileNames[i] %>"><%= fileNames[i]%></A> 
&nbsp;&nbsp;&nbsp;&nbsp;
(<%= Long.toString(fileObjects[i].length()) %> bytes long)
<%
}
}
%>
</UL> 
```

从上面的代码中，我可以将 filesDir 文件夹中的所有 pdf 文件显示到我的 jsp 页面中，但是单击特定的 pdf 文件（例如 abc.pdf），而不是将控件转到 D:/filesDir/abc .pdf，控件将转到 localhost:8080/myapp/D:/filesDir/abc.pdf...

如何消除应用程序特定路径（即 locahlhost:8080/myapp/）并从链接中打开我的 pdf 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:31:52.527

解决您的问题将链接行重写为

```
<A HREF="<%="file://D:/filesDir/"+fileNames[i] %>"><%= fileNames[i]%></A> 
```

**但是**，如果您确实希望在服务器本身以外的其他系统上访问文件，则应将文件移动到 Web 目录中，然后使用相对路径进行访问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T04:36:22.120

除非这是家庭作业或练习，否则我会研究现有的解决方案。我已经将 CKEditor 的 FileManager 插件用作浏览服务器中文件的独立解决方案，它的工作原理就像一个魅力：

这是主页： http: [//labs.corefive.com/projects/filemanager/](http://labs.corefive.com/projects/filemanager/)

这是源代码的链接： [https ://github.com/simogeo/Filemanager/tree/master/connectors/jsp](https://github.com/simogeo/Filemanager/tree/master/connectors/jsp)

适应现有应用程序非常简单。只需下载并调整 filemanager.config.js 文件即可：

![在此处输入图像描述](../Images/04fe4bfd37f484e9582590a85fc71053.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:16:23.290

```
<%@ page import="java.io.*"%>
<%
FileOutputStream out; 
try{
out = new FileOutputStream("C://Hello.txt");
new PrintStream(out).println ("All glitters are not gold");
out.close(); 
}
catch (IOException e){
out.println ("Unable to write to file");
}
%> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:52:48.687

试试下面的代码。它适用于 chrome 和 IE。

```
<%@page import="java.io.File"%>
<html>
<body>
    <%
        String sourceDirectory = "D:\\books";
        File f = new File(sourceDirectory);     
        File[] fileObjects = f.listFiles();
    %>
    <UL>
        <%
            for (int i = 0; i < fileObjects.length; i++)
            {
                if (!fileObjects[i].isDirectory())
                {%>
                    <LI><A HREF="file:\\\<%=fileObjects[i].getAbsolutePath()%>"><%=fileObjects[i].getName()%></A>
                        &nbsp;&nbsp;&nbsp;&nbsp; 
                        (<%=Long.toString(fileObjects[i].length())%>    bytes long) 
                <%}
            }%>
    </UL>
</body>
</html> 
```

# php - 根据类型获取 Yii 模型类

> ID：13965321
> 
> 赞同：0
> 
> 时间：2012-12-20T04:27:34.527
> 
> 标签：php, yii

Yii 中是否有对类型化模型的内置支持？例如，如果我有一个名为 Flashlight、Lock 和 Folder 的类，它们都扩展了我的 Product active Record 模型，并且我想通过 Yii 关系确保它是类型化类而不是泛型，我该怎么做？

目前我正在覆盖 __call ，我对此并不满意。我觉得这可能是一个普遍的需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:57:13.627

这称为[单表继承](http://www.yiiframework.com/wiki/198/single-table-inheritance/)。

基本上你覆盖模型的[实例化](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#instantiate-detail)方法来返回你需要的类：

```
// protected/models/Product.php
protected function instantiate($attributes){
    switch($attributes['type']){
        case 'flashlight':
            $class='Flashlight';
        break;
        case 'lock':
            $class='Lock';
        break;
        case 'folder':
            $class='Folder';
        break;
        default:
            $class=get_class($this);
    }
    $model=new $class(null);
    return $model;
} 
```

# python - 在 Linux 系统上未连接到网络时难以在 python 中执行特定命令

> ID：13965324
> 
> 赞同：0
> 
> 时间：2012-12-20T04:27:56.150
> 
> 标签：python, linux, networking

我对这个感到困惑。如果我在 linux 系统上连接到网络，一切正常。如果断开连接，我将无法执行以下任一命令集：

设置#1：

```
cmd = 'cat /sys/class/rtc/rtc0/wakealarm' 
args = shlex.split(cmd)
curr_alarm_sse,error = subprocess.Popen(args,stdout = subprocess.PIPE, stderr= subprocess.PIPE).communicate() 
```

设置#2：

```
curr_alarm_sse = commands.getoutput("cat /sys/class/rtc/rtc0/wakealarm") 
```

它也不是 cat 命令，我尝试对我的主目录执行一个简单的 ls ，并且在所有情况下，python 脚本都会锁定，直到我再次连接到网络。我已经验证它完全锁定在这些命令集中的任何一个。我很困惑，因为这些命令集似乎都不应该依赖于网络连接。我错了吗？谢谢。

# networking - 具有 LAN Fail-Safe 的网络架构

> ID：13965327
> 
> 赞同：0
> 
> 时间：2012-12-20T04:28:13.937
> 
> 标签：networking, mobile, lan

我正在尝试设计一个系统的网络组件，该系统包含服务器、LAN 打印机和 LAN 上的各种移动设备。

这将是一个客户端-服务器模型，其中设备位于 LAN 上，但不断将其数据发送到服务器。我正在尝试在互联网连接中断的情况下制定备份计划。我在想我会将一个移动设备表示为“队长”并将所有数据发送给它（如果互联网出现故障），然后一旦重新建立与互联网的连接，从队长设备到服务器。

这种模式有先例/名称吗？有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:45:25.873

根据数据的内容/重要性以及您对客户端设备的信任程度，更好的方法（我认为）是将数据存储在移动设备上，直到设备可以验证它在服务器上的全部存在，无论互联网连接。这样你就不会把所有的鸡蛋都放在“船长”篮子里。我以前见过这种做法，它工作得相当好，虽然我不能给你一个模式的名字。

# javascript - Supersized.js 背景未在母版页中呈现

> ID：13965330
> 
> 赞同：1
> 
> 时间：2012-12-20T04:28:40.527
> 
> 标签：javascript, asp.net, supersized

我在母版页中使用 Supersized.js 来呈现背景。不幸的是，它没有正确渲染。我的脚本如下：

```
<script type="text/javascript" src="<%=ResolveClientUrl("~/js/jquery.js")%>"></script>
        <script type="text/javascript" src="<%=ResolveClientUrl("~/js/jquery.easing.js")%>">
        </script>
        <script type="text/javascript" src="<%=ResolveClientUrl("~/js/supersized.js")%>">
        </script>

        <script type="text/javascript">
            var i360DealerSite = i360DealerSite || {};
            $(function () {

                    i360DealerSite.BG.init();
                });
                i360DealerSite.BG = {
                    init: function () {
                $.supersized({
                    // Functionality
                    slideshow: 1,           // Slideshow on/off
                    autoplay: 1,            // Slideshow starts playing 
                                                            automatically
                    start_slide: 1,         // Start slide (0 is random)
                    stop_loop: 0,           // Pauses slideshow on last slide
                    random: 0,          // Randomize slide order (Ignores start 
                                                            slide)
                    slide_interval: 3000,       // Length between transitions
                    transition: 6,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide 
                                                            Right, 4-Slide Bottom, 5-Slide Left, 
                                                            6-Carousel Right, 7-Carousel Left
                    transition_speed: 1000,     // Speed of transition
                    new_window: 1,          // Image links open in new window/tab
                    pause_hover: 0,         // Pause slideshow on hover
                    keyboard_nav: 1,            // Keyboard navigation on/off
                    performance: 1,         // 0-Normal, 1-Hybrid speed/quality, 2-
                                                           Optimizes image quality, 3-Optimizes  
                                                           transition speed 
                                                        // (Only works for Firefox/IE, not 
                                                           Webkit)
                    image_protect: 0,       // Disables image dragging and right 
                                                           click with Javascript

                    // Size & Position                         
                    min_width: 0,           // Min width allowed (in pixels)
                    min_height: 0,          // Min height allowed (in pixels)
                    vertical_center: 1,     // Vertically center background
                    horizontal_center: 1,       // Horizontally center background
                    fit_always: 0,          // Image will never exceed browser 
                                                            width or height (Ignores min. 
                                                            dimensions)
                    fit_portrait: 1,            // Portrait images will not exceed 
                                                            browser height
                    fit_landscape: 0,       // Landscape images will not exceed 
                                                            browser width

                    // Components                           
                    slide_links: 'blank',   // Individual links for each slide (Options: 
                                                 false, 'number', 'name', 'blank')
                    thumb_links: 1,         // Individual thumb links for each slide
                    thumbnail_navigation: 0,        // Thumbnail navigation
                    slides: [
                        //ADD OR REMOVE IMAGES HERE!!!
                        { image: '<%=ResolveClientUrl("~/images/banner/banner01.jpg")%>' },
                        { image: '<%=ResolveClientUrl("~/images/banner/banner02.jpg")%>' }
                    ]
                });
            }
            };
        </script> 
```

jsfiddle 位于[此处](http://jsfiddle.net/3VxrL/)

必须在上面的脚本中修改什么以确保背景呈现？

尽管下面引用了几个，但相关站点并未旋转横幅图像[。](http://www.permiancadillac.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:35:20.343

仔细检查您的文件扩展名尝试使用 .JPG 而不是 .jpg

# java - 一些代码的问题

> ID：13965332
> 
> 赞同：0
> 
> 时间：2012-12-20T04:29:08.210
> 
> 标签：java, eclipse

我现在正在学习 Java，我似乎无法弄清楚这些错误......

```
public class Input {

    Setter access = new Setter();
//                              ^ Error here: Syntax error on token ";", { expected 
//                                after this token.

    if (commandExc == fly) {
        access.flySetter();
    }
    else if (commandExc == xray) {
        access.xraySetter();
    }
} // < Error here: Syntax error, insert "}" to complete ClassBody 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:30:43.963

代码应该包装在方法中，不应该直接在类体内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T04:30:45.803

您不能创建这样的课程。您的内部代码必须在方法内。

像这样：

```
public class Input { // start of class

  public Input() {  // start of constructor
    Setter access = new Setter(); // this could be outside the method

    // commandExc, fly and xray should be initialized somewhere
    if (commandExc == fly) {
        access.flySetter();
    }
    else if (commandExc == xray) {
        access.xraySetter();
    }
  } // end of constructor

} // end of class 
```

构造函数是一种特殊的方法，您可以在其中放置代码来初始化类的实例。在这种情况下，我将代码放在类的构造函数中。但它可以在任何其他方法中。您必须检查在您的程序中什么更有意义。

在您学习 Java 时，我建议您查看此链接，特别是“Trails Covering the Basics”： [http ://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T04:33:21.400

```
public class Input {

    Setter access = new Setter();

    public static void main(String args[]) {   //or any method
        if (commandExc == fly) {
            access.flySetter();
        }
        else if (commandExc == xray) {
            access.xraySetter();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:16:42.127

您应该将代码包装在一个方法中。就像下面这样：

```
public class Input {

  Setter access = new Setter();

  public static void main(String args[]){   //or any method
      if (commandExc == fly) {
          access.flySetter();
      }
      else if (commandExc == xray) {
          access.xraySetter();
      }
  }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T04:33:32.560

看起来您没有在方法中工作。尝试将代码放在`main`. `Input`例如：

```
public class Input {
  public static void main(String[] args) {
    Setter access = new Setter();

    if (commandExc == fly) {
        access.flySetter();
    }
    else if (commandExc == xray) {
        access.xraySetter();
    }
  }
} 
```

如果这是一个对象，请将初始化部分`access`放入构造函数方法中。`if`/的位置`else`取决于所需的实现。

# java - 使用哪个断言？

> ID：13965335
> 
> 赞同：0
> 
> 时间：2012-12-20T04:29:12.633
> 
> 标签：java

AFAIK，人们在 Java 中使用三种常见的断言类型，即

*   [http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/assert.html)
*   [http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/util/Assert.html](http://static.springsource.org/spring/docs/1.2.x/api/org/springframework/util/Assert.html)
*   [http://junit.sourceforge.net/javadoc/org/junit/Assert.html](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)

你能告诉我每个范式的正确用法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:40:22.710

选项 1 和 2 是*运行时*断言。它们通常用于确保您只获得您期望获得的值。

选项 1 更常见，因为它是 Java 语言功能。如果您`assert`在 IDE 中键入代码，它将突出显示它，因为它是 Java 关键字（不是 Jakarta 库的一部分）。

选项 2 是特定于 Spring 的；查看您链接到的文档，它说以下内容：

> 主要供框架内部使用；考虑 Jakarta 的 Commons Lang >= 2.0 以获得更全面的断言实用程序套件。

选项 3 几乎专门用于 jUnit 测试。它们确保您的测试输出您期望代码产生的值。

最有可能的是，您将在编写的代码中使用选项 1。正如文档所说，您可能永远不会使用选项 2。如果您编写 jUnit 测试，您只会使用选项 3。

# java - Primefaces数据表延迟加载分页行数显示错误

> ID：13965336
> 
> 赞同：0
> 
> 时间：2012-12-20T04:29:17.163
> 
> 标签：java, hibernate, jsf-2, primefaces, pagination

我正在尝试为 Primefaces 数据表实现延迟加载。我有一个过滤条件，我已经实现了

```
public List<Request> getRequest(int startingAt, int maxPerPage,
            String sortField, SortOrder sortOrder, Map<String, 
String> filters) {
        Criteria criteria = sessionFactory.getCurrentSession().
            createCriteria(Request.class);          
        for (Map.Entry<String, String> entry : filters.entrySet()) {            
            if(entry.getValue()!=null){             
                criteria.add(Restrictions.ilike("prNo",
                "%"+entry.getValue()+"%"));             
            }
        }
        criteria.setMaxResults(maxPerPage);
        criteria.setFirstResult(startingAt);
        return criteria.list();
    } 
```

并在 jsf 页面中

```
<p:column id="prNo" filterBy="#{req.prNo}"   
                headerText="PR No">                 
                <h:outputText value="#{req.prNo}" />
            </p:column> 
```

我面临的问题是，当过滤的行显示 n 数据表分页数根本没有变化时，它显示为实际记录数。例如，如果过滤器匹配条件并且过滤条件的行数为 12，则分页应显示为**1 of 3**，页面应显示为**1 2 3**。请参阅随附的屏幕截图。![在此处输入图像描述](../Images/215ce6ee71bf3507788571524b22dbef.png)

Lazymodel rowCount 设置为

```
lazyModel.setRowCount(getRequestService().getRequestCount()); 
```

这是实施

```
int count = ((Long) sessionFactory.getCurrentSession()
                .createQuery("select count(*) from Request").uniqueResult())
                .intValue(); 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:50:25.743

INMO，你最好使用`LazyDataModel`（[就像在陈列柜中一样扩展它-DataTable-Lazy Loading](http://www.primefaces.org/showcase/ui/datatableLazy.jsf)）

在您覆盖的加载方法中，您应该执行过滤逻辑并获得结果，而不是获取它的大小并使用它......

# android - QVGA 模拟器使用错误的布局资源

> ID：13965347
> 
> 赞同：0
> 
> 时间：2012-12-20T04:30:12.587
> 
> 标签：android, android-emulator, android-screen-support

我正在尝试为我的应用程序支持尽可能多的 android 设备。我们可以使用的测试设备数量有限，因此我使用模拟器来测试不同的屏幕分辨率。但尝试这样做发现了一个问题QVGA 模拟器使用 layout-normal 和 drawable-hdpi 文件夹而不是正确的文件夹。我有每个屏幕尺寸和密度组合的可绘制文件夹（例如 drawable-mdpi、drawable-ldpi 等）。我使用了密度为 120 和 API 级别为 15 的模拟器。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:53:40.260

您需要将以下行添加到您的`AndroidManifest.xml`-

```
<supports-screens       
 android:smallScreens="true" 
 android:normalScreens="true" 
 android:largeScreens="true" 
 android:xlargeScreens="true"
 /> 
```

`android:smallScreens`在 QVGA 模拟器中支持小屏幕是必需的，如果没有这些，则只有支持的屏幕尺寸或分辨率可用，在您的情况下为 hdpi。

**编辑：**

尝试放入`android:anyDensity="true"`相同的标签。

# java - 在 PreparedStatement.close() 中获取空指针

> ID：13965358
> 
> 赞同：1
> 
> 时间：2012-12-20T04:31:36.957
> 
> 标签：java

我试图使用 jdbc 将值从文本字段插入到 mySql，但我的问题是我在关闭准备好的语句时出现空指针错误。这是我的代码

```
 private Connection con;
 private Statement stm;
 private ResultSet rs;
 private PreparedStatement ps ;

public void dbConnect(){
    try{
        Class.forName("com.mysql.jdbc.Driver");
        this.con = DriverManager.getConnection("jdbc:mysql://localhost:3306/dbTestDrive"
                + "", "root", "password");

    }
    catch(ClassNotFoundException ex){}
    catch(SQLException ex){}
}

 public boolean insert(Member member)throws SQLException{
    this.dbConnect();
    boolean success = false;
    String query = "INSERT INTO try VALUES(?, ?)";
            try {
        this.ps = this.con.prepareStatement(query);
        this.ps.setString(1, member.getMemberId());
        this.ps.setString(2, member.getFirstName());

       int rows = this.ps.executeUpdate();
        if(rows>0){
            success = true;
        }

    } catch (SQLException ex) {
        ex.printStackTrace();
        throw ex;
    } finally{
        this.ps.close(); // this is my line: 56 (im getting null pointer here)
        this.con.close();
    }

    return success;
} 
```

这是堆栈跟踪：

```
 Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at rtu.tomis.dao.MemberDao.insert(MemberDao.java:56)
at rtu.tomis.gui.AddMemberView.btnSaveActionPerformed(AddMemberView.java:993)
at rtu.tomis.gui.AddMemberView.access$800(AddMemberView.java:21)
at rtu.tomis.gui.AddMemberView$9.actionPerformed(AddMemberView.java:476) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:39:23.857

`try`在该行执行之前或期间，您在块内遇到异常：

```
this.ps = this.con.prepareStatement(query); 
```

`catch`块重新抛出异常后，块`finally`执行。不幸的是，因为`ps`is `null`，您会得到另一个异常，然后抛出该异常，隐藏原始异常。

您需要更具防御性地编写代码，仅在它们不是时才关闭`ps`，`con`并捕获调用本身可能引发`null`的任何异常。`close()`这将允许您传播`try`.

您也不应该默默地`try`忽略`dbConnect()`. 我怀疑有一个例外是你问题的根源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T04:35:10.927

你应该这样写你的代码：

```
finally{
  if(ps != null)
        try{
            this.ps.close(); 
        }catch(Exception e){
            System.out.println("PreparedStatement close problem");
        }
  if(con != null)
        try{
            this.con.close();
        }catch(Exception e){
            System.out.println("Database Connection close problem");
        }
} 
```

如果由于某些错误而未初始化任何`con`or ，这将避免空指针异常。`ps`

您也可以`this`从所有代码中删除关键字，因为您的方法中没有任何与类变量同名的局部变量，因此不会有任何歧义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:40:31.430

您需要在 finally 子句中检查 null

```
finally{
  if(ps != null)
        this.ps.close();
   //
} 
```

但潜在的问题可能是当您打开连接时，它失败**后将不会初始化**您准备好的语句：

```
this.ps = this.con.prepareStatement(query); 
```

换句话说，在调用之前`prepareStatement`确保`con`不为空。您应该更改方法`dbConnect`并打印异常，这将帮助您解决问题的原因。

```
 try{
        Class.forName("com.mysql.jdbc.Driver");
        this.con = DriverManager.getConnection("jdbc:mysql://localhost:3306/dbTestDrive"
                + "", "root", "password");

    }
    catch(ClassNotFoundException ex){
     ex.printStackTrace();
    }
    catch(SQLException ex){
     ex.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T07:14:15.823

您没有在插入方法中获得 Prepared Statement 对象，并且在 null 上调用任何内容都会给您带来 Null 指针异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T04:42:19.357

我确实认为您的 dbConnect() 方法中抛出了一个异常，这就是为什么 jvm 在读取准备好的语句的实例化之前直接读取 finally 的原因。

# testing - 在 Grails 集成测试中覆盖服务方法

> ID：13965363
> 
> 赞同：3
> 
> 时间：2012-12-20T04:32:05.577
> 
> 标签：testing, grails, groovy, metaprogramming, integration-testing

我正在尝试在集成测试中测试控制器的操作。这是一个简单的场景，我尝试测试的操作是调用服务的方法。我正在尝试使用元类覆盖该方法，但看起来它不起作用，即服务的真实方法总是被调用，而不是我使用元类覆盖的方法。我在这里做错了什么？

这是控制器的方法：

```
class MyController {
  MyService myService

  def methodA() {
    def u = myService.find(params.paramA)
    render view: "profile", model:  [viewed: u]
  } 
```

这是我实现集成测试的方式：

```
class MyControllerTests extends GroovyTestCase {

 MyController controller

 void testMethodA() {
    controller = new MyController()

    // Mock the service
    MyService mockService = new MyService()
    mockService.getMetaClass().find = { String s ->
      []
    }

    controller = new MyController()
    controller.myService = myService

    controller.methodA()
  } 
```

PS 我在 STS 2.9.2 中使用 grails 2.0.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:28:00.017

首先，我推荐使用[Spock Framework](http://code.google.com/p/spock/)，它是一个非常好的测试库，除了[与 Grails 集成得很好](http://grails.org/plugin/spock)。您的测试将如下所示：

```
@TestFor(MyController) // TestFor is builtin Grails annotation
class MyControllerSpec extends Specification {

    // thanks to TestFor annotation you already have 'controller' variable in scope

    MyService mockService = Mock(MyService)

    // setup method is executed before each test method (known as feature method)
    def setup() {
        controller.myService = mockService
    }

    def 'short description of feature being tested'() {
        given:
        mockService.find(_) >> [] // this tells mock to return empty list for any parameter passed

        when:
        controller.methodA()

        then:
        // here goes boolean statements (asserts), example:
        controller.response.text.contains 'Found no results'
    }
} 
```

如果您更喜欢不使用 Spock，对于 mock，您需要最简单的方法是使用*Groovy coercion*。看一下这个：

```
MyService mockService = [find: { String s -> [] }] as MyService 
```

这是*地图强制*。在您模拟单个方法的情况下，甚至不需要 Map ，因此您可以更简单地编写它。

```
MyService mockService = { String s -> [] } as MyService 
```

这就是*闭包强制*。好吧，指定参数也不是必需的，因为您没有处理它。

```
MyService mockService = { [] } as MyService 
```

*最后一条语句基本上意味着在mockService*上调用的任何方法都将执行指定的闭包，因此结果中将返回空列表。

越简单越好，加油！

顺便说一句，在使用 Spock 时，您仍然可以使用强制模拟。Spock 模拟（使用 Mock() 方法创建）对于测试更高级的案例很有用，例如交互。

更新：对于集成测试，您将扩展 IntegrationSpec 并且不需要使用 @TestFor。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:08:56.243

我建议您使用 Grails 注释来模拟您的服务，以下示例取自文档[10.1 Unit Testing](http://grails.org/doc/latest/guide/testing.html)：

```
@Mock([Book, Author, BookService]) 
```

然后测试控制器如下所示：

```
void testSearch() {
      def control = mockFor(SearchService)
      control.demand.searchWeb { String q -> ['mock results'] }
      control.demand.static.logResults { List results ->  }
      controller.searchService = control.createMock()
      controller.search()      assert controller.response.text.contains "Found 1 results"
} 
```

# bash - 在 bash 中通过管道或其他方式获取和重命名创建的文件

> ID：13965370
> 
> 赞同：2
> 
> 时间：2012-12-20T04:33:11.917
> 
> 标签：bash, ubuntu, mv, youtube-dl

第一个问题：

我对这个脚本业务很陌生，但我一直在尝试使用 youtube-dl 自动下载和重命名 youtube 视频。我真的只是将其作为一项技术练习来学习更多关于 bash 脚本的知识。

我正在使用的命令是：

```
youtube-dl -il "<Youtube URL>" --extract-audio --audio-format "mp3" --audio-quality "192k" 
```

（它将下载单个视频或获取播放列表并下载所有文件），这将创建一个具有以下格式的文件（示例）：

```
Zedd - Spectrum (feat. Matthew Koma) (Culture_Code_Remix)-LCNwQVRN34.mp3 
```

youtube URL 的最后一个参考部分位于末尾。

我编写了一个脚本来批量重命名所有有效的文件，如下所示：

```
#!/bin/bash
for i in *.mp3 ; do
   j=`echo $i | awk -F"-" '{print $1 "-" $2}'`
   mv "$i" "$j"
done 
```

基本上它只是截断了最后一段，我的问题是我怎么能把它放在不同的格式中，这样我就可以把它放在最后，或者将它和第一个命令合并到一个脚本中，这样我就可以自动化整个过程?

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:46:18.750

您可以使用以下`-o`选项将另一个文件名模板传递给 youtube-dl：

```
youtube-dl -i "<Youtube URL>" -o "%(title)s.%(ext)s" \
            --extract-audio --audio-format "mp3" --audio-quality "192k" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:38:04.067

我建议您在播放列表文件上运行 for 循环并使用迭代变量作为 youtube-dl 的输入，然后进行 mv 处理。

# windows-phone-7 - Windows Phone 7 和 8 TextBlock 查询

> ID：13965371
> 
> 赞同：2
> 
> 时间：2012-12-20T04:33:13.940
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我试图在文本块中拆分文本，使其看起来像段落，我什至可以使用 Microsoft Word 中的项目符号，但我无法......任何有想法的人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T06:28:24.730

看看[RichTextBox](http://www.windowsphonegeek.com/articles/Windows-Phone-7-Mango-First-look-at-RichTextBox-control)，它为您提供段落、运行和样式。但是，它不包括要点列表。为此，您需要在 WebClient 中使用 HTML。

# xcode - 如何关闭所有这些 xcode 构建或链接信息行？

> ID：13965373
> 
> 赞同：1
> 
> 时间：2012-12-20T04:33:17.767
> 
> 标签：xcode, build

我正在使用 Xcode 4.5.2。当我构建和调试时，我在 Xcode 调试面板中看到很多行，例如以下示例行：

```
dyld: loaded: /Developer/Library/PrivateFrameworks/GPUTools.framework/libglInterpose.dylib
dyld: loaded: /Developer/usr/lib/libXcodeDebuggerSupport.dylib
dyld: loaded: /System/Library/Frameworks/CoreText.framework/CoreText 
```

还有这个：

```
dladdr(0x33a1f000, 0x1e54d318)
dlopen(/System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/ViceroyTrace.framework/ViceroyTrace, 0x00000010)
dladdr(0x339f2000, 0x1e54d348)
dlopen(/System/Library/PrivateFrameworks/BluetoothManager.framework/BluetoothManager, 0x00000010)
dladdr(0x33608000, 0x1e54d378)
dlopen(/System/Library/PrivateFrameworks/GameKitServices.framework/Frameworks/AVConference.framework/AVConference, 0x00000010)
dladdr(0x358e4000, 0x1e54d3a8) 
```

还有这个：

```
_dyld_image_count()
_dyld_get_image_header(0)
_dyld_get_image_header(1)
_dyld_get_image_header(2)
_dyld_get_image_header(3) 
```

还有这个：

```
dlsym(0x1e578f90, gldGetVersion)
dlsym(0x1e578f90, gldGetVersion)
dlsym(0x1e578f90, gldCreateDevice)
dlsym(0x1e578f90, gldDestroyDevice)
dlsym(0x1e578f90, gldPopulateRendererInfo)
dlsym(0x1e578f90, gldChoosePixelFormat) 
```

以上每一个都只是相似线组的一小部分。总之，我看到了数百行这样的行。我想他们是在告诉我一些关于正在进行的链接的事情，但我不知道具体是什么。我一定是在某个时候打开了导致它们出现的构建设置。现在我想再次关闭它。谁能说出控制这些线条外观的设置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:06:42.173

在 Xcode 中的项目方案下，导航到 Diagnostics 选项卡并取消选中“Log Dyld API Usage”和“Log Library Loads”。前者更为冗长。

# android - 将 DeviceAdminReceiver 的结果传递回调用活动

> ID：13965380
> 
> 赞同：0
> 
> 时间：2012-12-20T04:34:05.293
> 
> 标签：android, android-activity, receiver, device-admin

我的活动`(MyActivity.class)`执行设置屏幕锁定的方法如下：

```
startActivityForResult(Security.setLockscreen(getBaseContext()), 1001); 
```

然后我的接收器类将更改记录到屏幕锁定，如下所示：

```
public class MyDeviceAdminReceiver extends DeviceAdminReceiver {
   @Override
   public void onPasswordChanged(Context context, Intent intent) {
        super.onPasswordChanged(context, intent);
        // pass result back to calling activity
        intent = new Intent(context, MyActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        intent.putExtra("pwdChange", true);
        context.startActivity(intent);
    }
} 
```

然后我在类的`onActivityResult`方法中处理结果`MyActivity`。

以上是将结果传递回活动的最佳方式吗？我注意到上面创建了 MyActivity 类的另一个实例，而不是重用 MyActivity 类的现有实例。

是否有另一种更有效的方式将数据传回调用活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:06:34.150

我发现的一种解决方案是用于`SharedPreferences`将数据从一个`DeviceAdminReceiver`类传递到一个`Activity`类。

我确信其他有经验的开发人员可以在此线程中发布其他可行的解决方案与大家分享。

# spring - 使用 unitils、dbunit 和 spring 进行单元测试

> ID：13965383
> 
> 赞同：1
> 
> 时间：2012-12-20T04:34:25.497
> 
> 标签：spring, junit, unitils

我是unitils（内置dbunit）和spring的新手。在我工作的新地方，我可以看到一些测试是使用 spring 的，而其他测试则使用不带 spring 的 unitils/dbunit。

有一个使用弹簧的推动力，所以我一直在尝试合并以下功能。

弹簧测试使用：

```
@RunWith(SpringJUnit4ClassRunner.class )
@ContextConfiguration(locations = { "classpath:spring-dev.xml" })
public class x(){
@Autowired
private ProfileDao profileDao;

@Test
@Rollback
@Transactional
public void shouldRetrieveProfileByUserNumber() {
    Profile profile = profileDao.retrieveProfile("u1", "0000003861", null);
    assertThat(profile.getUserNumber(), is("0000003861"));
} 
```

此类具有@Autowired ProfileDao，它在使用@RunWith(SpringJUnit4ClassRunner.class) 时有效。

Unitils 测试使用：

```
@RunWith(UnitilsJUnit4TestClassRunner.class)
@DataSet("WEB_SERVICE_DATASET.xml")
public class ServiceExceptionTest {} 
```

运行时正确加载数据库等。

我想要实现的是将这些结合起来，以便我可以使用 @RunWith(UnitilsJUnit4TestClassRunner.class) 注释“Unitil'ise”我的课程，但也可以像上一个课程一样以正常方式使用 spring。

问题是我在使用 spring 版本时似乎无法统一我的课程，因为它们都是 JUnit4ClassRunner 扩展。

我尝试了各种变体，但都无法正常工作。

任何人都可以建议一种体面的方式吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T21:32:19.183

Unitils 并没有真正提供适当的 Spring 集成支持。

看看[spring-test-dbunit](https://github.com/springtestdbunit/spring-test-dbunit)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T14:14:16.163

Unitils 有一个 Spring 集成包：

```
org.unitils:unitils-spring:3.3 
```

我们不必从 Spring 测试迁移，而是一起使用 Spring 和 Unitils。我们不使用@RunWith 注解，而是子类化：

```
import org.unitils.UnitilsJUnit4;
import org.unitils.dbunit.annotation.DataSet;
import org.unitils.spring.annotation.SpringBean;
import org.unitils.spring.annotation.SpringApplicationContext;

@SpringApplicationContext({"main-context.xml", "test-context.xml"})
@DataSet
public class ServiceTest extends UnitilsJUnit4 {

  @SpringBean("ourServiceBean")
  OurService ourService;

  @Test
  public void someTest() throws Exception {
  }
} 
```

我们最近遇到了一个问题，即我们的测试数据第一次没有正确加载。这可能是 Unitils 和 Spring 事务处理之间的冲突。我不太确定，但通过设置此属性来关闭 Unitils 中的事务：

```
DatabaseModule.Transactional.value.default=disabled 
```

在 unitils.properties 文件中解决了这个问题。

# java - 数据库插入未发生

> ID：13965385
> 
> 赞同：0
> 
> 时间：2012-12-20T04:35:08.537
> 
> 标签：java, android, android-sqlite

```
int i=0;
ContentValues values = null;

for ( SortedMap.Entry<Integer, String> entry : mapDefect.entrySet() ) {
    if( i++ < count )
        continue;
        if( i < arrlst.size() ) {
            values = new ContentValues();
            Log.d("MAP", "Id :"+entry.getKey()+"Des :"+entry.getValue()+"Co :"+ arrlst.get(i));
            values.put( MARKER_COORD, arrlst.get( i ) );
            values.put( MARKER_ID, entry.getKey() ); 
            values.put( DEFECT_DESCRIPTION, entry.getValue() );
            values.put( IMAGE_ID_F, imageID + 1 );
            Log.d( "Err", "in insertNewDefectsDescription" );
            long rowId = db.insert( TABLE_DEFECTS, null, values );
            long rowId1 = rowId;
            i++;
        }
    } 
```

所以，我只想在 count 变量之后访问数组列表，这就是为什么： -

```
if(i++<count)
    continue; 
```

但是，当我在“插入”行插入断点时，它不起作用。该行根本没有执行，因此数据没有被插入到数据库中。出了什么问题？？

“值”为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:01:13.563

您的代码很难理解以下是我的建议

**1.为什么不在 for 循环之前执行 i=count 。它会节省很多迭代**

**2\. 例如，您的 i 可能会增加两次**

```
if( i++ < count ) //suppose this condition is false 
```

即使条件为假 i++ 发生任何你的 i 增加然后在里面

```
if( i < arrlst.size() ) {
...
i++;// It increments i again
} 
```

这里的逻辑错了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:20:27.637

问题解决了。我使用了 if 和 else。在 else 区域中，我增加了 i 变量，它工作正常。

```
if(i<count)
{
    ..
}
else
    i++; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:54:34.080

没有看到`count`很难知道问题的解决方案。我的猜测是 i++ 总是小于计数，因此导致循环体的其余部分被跳过并检查下一个元素。你很可能想要。`if(i++>count)...`

`{ }`此外，对单行`if`块使用花括号是一种很好的做法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:49:22.543

为什么在 if 条件下你的 i 也有增量？将会发生的是，每次迭代你的 i 都会增加 2。也许您想要做的是在循环之前首先将您的 i 初始化为 1，然后您可以在 if 条件中删除 i 中的 ++，或者您可以在循环结束时删除 i 中的 ++。

# git - 如何查看 git 中分支之间的提交差异？

> ID：13965391
> 
> 赞同：431
> 
> 时间：2012-12-20T04:36:25.560
> 
> 标签：git, branch, git-log

我在 branch-X 上，并在其上添加了几个提交。我想看看 MASTER 和我所在的分支在提交方面的所有差异。我可以做一个

```
git checkout master
git log 
```

然后一个

```
git checkout branch-X
git log 
```

并在视觉上区分这些，但我希望有一种更简单、更不容易出错的方法。

* * *

## 回答 #1

> 赞同：836
> 
> 时间：2012-12-20T04:42:39.467

你可以很容易地做到这一点

```
git log master..branch-X 
```

这将向您显示 branch-X 具有但 master 没有的提交。

* * *

## 回答 #2

> 赞同：387
> 
> 时间：2012-12-20T04:43:48.377

您可以获得一个非常好的视觉输出，说明您的分支与此有何不同

```
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset' --abbrev-commit --date=relative master..branch-X 
```

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2015-11-02T23:49:55.043

我认为这是选择和上下文的问题。我更喜欢使用

```
git log origin/master..origin/develop --oneline --no-merges 
```

它将在开发中显示不在 master 分支中的提交。

如果您想查看实际修改了哪些文件，请使用

```
git diff --stat origin/master..origin/develop --no-merges 
```

如果您不指定参数，它将显示完整的差异。如果您想查看视觉差异，请安装`meld`在 linux 或`WinMerge`windows 上。确保它们是默认的 difftools 。然后使用类似的东西

```
git difftool -y origin/master..origin/develop --no-merges 
```

如果您想将其与当前分支进行比较。使用 HEAD 而不是使用分支名称更方便：

```
git fetch
git log origin/master..HEAD --oneline --no-merges 
```

它将向您显示即将合并的所有提交

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2015-11-17T00:36:29.000

我建议以下内容来查看“提交”中的差异。对于对称差异，使用反转的 args 重复命令：

```
git cherry -v master [your branch, or HEAD as default] 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-12-20T04:55:09.613

如果您使用的是 Linux，`gitg`则可以非常快速地以图形方式进行操作。

如果您坚持使用命令行，则可以使用：

```
git log --oneline --decorate 
```

为了`git log`更好地默认设置，我通常设置这些全局首选项：

```
git config --global log.decorate true
git config --global log.abbrevCommit true 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-08-26T08:37:43.973

如果你想使用 gitk：

```
gitk master..branch-X 
```

它有一个不错的老式 GUI

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-09-28T08:15:43.270

不是完美的答案，但**对使用 Github 的人来说效果更好：**

[![在此处输入图像描述](../Images/50e0ce40a7edea9960b55b6e0c9ab410.png)](https://i.stack.imgur.com/eCxXC.png)

转到您的仓库：`Insights -> Network`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-06-24T17:53:02.447

我使用了一些答案并找到了一个适合我的情况（确保所有任务都在发布分支中）。

其他方法也可以，但我发现它们可能会添加我不需要的行，例如没有任何价值的合并提交。

```
git fetch
git log origin/master..origin/release-1.1 --oneline --no-merges 
```

或者你可以将你的电流与主人进行比较

```
git fetch
git log origin/master..HEAD --oneline --no-merges 
```

`git fetch`是否可以确保您使用的是更新的信息。

这样，每个提交都将在一行中，您可以将其复制/粘贴到文本编辑器中，然后开始将任务与将要合并的提交进行比较。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-08-21T05:24:12.200

如果要根据提交消息进行比较，可以执行以下操作：

```
git fetch
git log --oneline origin/master | cut -d' ' -f2- > master_log
git log --oneline origin/branch-X | cut -d' ' -f2- > branchx_log
diff <(sort master_log) <(sort branchx_log) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-10-08T13:32:06.950

```
#! /bin/bash
if ((2==$#)); then
  a=$1
  b=$2
  alog=$(echo $a | tr '/' '-').log
  blog=$(echo $b | tr '/' '-').log
  git log --oneline $a > $alog
  git log --oneline $b > $blog
  diff $alog $blog
fi 
```

做出贡献是因为它允许 a 和 b 日志在视觉上并排地进行比较，如果你有一个视觉差异工具的话。将末尾的 diff 命令替换为启动可视差异工具的命令。

# java - Java 中的选项和验证

> ID：13965398
> 
> 赞同：0
> 
> 时间：2012-12-20T04:37:06.620
> 
> 标签：java

我想在我的系统上添加一个新选项，我想在其中添加两个文本文件，rental.txt 和 customer.txt。每个文本中都有客户的 ID 号、他们需要的录像带和价格。

我想把它作为我的代码的一个选项。现在我有：

1.  添加客户
2.  租金回报
3.  查看列表
4.  搜索
5.  出口

我想将此添加为我的第六个选项。例如，我订购了一个视频，它会显示价格并让我确认价格以及我是否要购买它。

这是我当前的代码：

```
 import java.io.*;
    import java.util.ArrayList;
    import static java.lang.System.out;

    public class RentalSystem{
    static BufferedReader input = new BufferedReader(new InputStreamReader(System.in));
    static File file = new File("file.txt");
    static ArrayList<String> list = new ArrayList<String>();
    static int rows;

    public static void main(String[] args) throws Exception{
        introduction();
        System.out.print("\n\n");
        login();
        System.out.print("\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n");
        introduction();
        String repeat;
        do{
            loadFile();
            System.out.print("\nWhat do you want to do?\n\n");
            System.out.print("\n                    - - - - - - - - - - - - - - - - - - - - - - -");
            System.out.print("\n\n                    |     1\. Add customer    |   2\. Rent Return |\n");
            System.out.print("\n                    - - - - - - - - - - - - - - - - - - - - - - -");
            System.out.print("\n\n                    |     3\. View List       |   4\. Search      |\n");
            System.out.print("\n                    - - - - - - - - - - - - - - - - - - - - - - -");
            System.out.print("\n\n                                             |   5\. Exit        |\n");
            System.out.print("\n                                              - - - - - - - - - -");
            System.out.print("\n\nChoice:");
            int choice = Integer.parseInt(input.readLine());
            switch(choice){
                case 1:
                    writeData();
                    break;
                case 2:
                    rentData();
                    break;
                case 3:
                    viewList();
                    break;
                case 4:
                    search();
                    break;
                case 5:
                    System.out.println("Goodbye!");
                    System.exit(0);
                default:
                    System.out.print("Invalid choice: ");
                    break;
            }
            System.out.print("\nDo another Task? [y/n] ");
            repeat = input.readLine();
        }while(repeat.equals("y"));

        if(repeat!="y") System.out.println("\nGoodbye!");

    }

    public static void writeData() throws Exception{
        System.out.print("\nName: ");
        String cname = input.readLine();
        System.out.print("Address: ");
        String add = input.readLine();
        System.out.print("Phone no.: ");
        String pno = input.readLine();
        System.out.print("Rental amount: ");
        String ramount = input.readLine();
        System.out.print("TapeNumber: ");
        String tno = input.readLine();
        System.out.print("Title: ");
        String title = input.readLine();
        System.out.print("Date Borrowed: ");
        String dborrowed = input.readLine();
        System.out.print("Due Date: ");
        String ddate = input.readLine();
        createLine(cname, add, pno, ramount,tno, title, dborrowed, ddate);
        rentData();
    }

    public static void createLine(String name, String address, String phone , String rental, String tapenumber, String title, String borrowed, String due) throws Exception{
        FileWriter fw = new FileWriter(file, true);
        fw.write("\nName: "+name + "\nAddress: " + address +"\nPhone no.: "+ phone+"\nRentalamount: "+rental+"\nTape no.: "+ tapenumber+"\nTitle: "+ title+"\nDate borrowed: "+borrowed +"\nDue date: "+ due+":\r\n");
        fw.close();
    }

    public static void loadFile() throws Exception{
        try{
            list.clear();
            FileInputStream fStream = new FileInputStream(file);
            BufferedReader br = new BufferedReader(new InputStreamReader(fStream));
            rows = 0;
            while( br.ready())
            {
                list.add(br.readLine());
                rows++;
            }
            br.close();
        } catch(Exception e){
            System.out.println("List not yet loaded.");
        }
    }

    public static void viewList(){
        System.out.print("\n~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        System.out.print(" |List of all Costumers|");
        System.out.print("~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        for(int i = 0; i <rows; i++){
            System.out.println(list.get(i));
        }
    }
        public static void rentData()throws Exception
    {   System.out.print("\n~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        System.out.print(" |Rent Data List|");
        System.out.print("~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        System.out.print("\nEnter Customer Name: ");
        String cname = input.readLine();
        System.out.print("Date Borrowed: ");
        String dborrowed = input.readLine();
        System.out.print("Due Date: ");
        String ddate = input.readLine();
        System.out.print("Return Date: ");
        String rdate = input.readLine();
        System.out.print("Rent Amount: ");
        String ramount = input.readLine();

        System.out.print("You pay:"+ramount);

    }
    public static void search()throws Exception
    {   System.out.print("\n~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        System.out.print(" |Search Costumers|");
        System.out.print("~ ~ ~ ~ ~ ~ ~ ~ ~ ~ ~");
        System.out.print("\nEnter Costumer Name: ");
        String cname = input.readLine();
        boolean found = false;

        for(int i=0; i < rows; i++){
            String temp[] = list.get(i).split(",");

            if(cname.equals(temp[0])){
            System.out.println("Search Result:\nYou are " + temp[0] + " from " + temp[1] + "."+ temp[2] + "."+ temp[3] + "."+ temp[4] + "."+ temp[5] + " is " + temp[6] + "."+ temp[7] + " is " + temp[8] + ".");
                found = true;
            }
        }

        if(!found){
            System.out.print("No results.");
        }

    }

        public static boolean evaluate(String uname, String pass){
        if (uname.equals("admin")&&pass.equals("12345")) return true;
        else return false;
    }

    public static String login()throws Exception{
        BufferedReader input=new BufferedReader(new InputStreamReader(System.in));
        int counter=0;
        do{
            System.out.print("Username:");
            String uname =input.readLine();
            System.out.print("Password:");
            String pass =input.readLine();

            boolean accept= evaluate(uname,pass);

            if(accept){
                break;
                }else{
                    System.out.println("Incorrect username or password!");
                    counter ++;
                    }
        }while(counter<3);

            if(counter !=3) return "Login Successful";
            else return "Login Failed";
            }
        public static void introduction() throws Exception{

        System.out.println("                  - - - - - - - - - - - - - - - - - - - - - - - - -");
        System.out.println("                  !                  R E N T A L                  !");
        System.out.println("                   ! ~ ~ ~ ~ ~ !  =================  ! ~ ~ ~ ~ ~ !");
        System.out.println("                  !                  S Y S T E M                  !");
        System.out.println("                  - - - - - - - - - - - - - - - - - - - - - - - - -");
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:40:05.433

我建议做一个枚举：

```
public enum ActionEnum{
    AddCustomer(1) { 
              public void action(){
                 RentalSystem.writeData();
               }
     },
    RentReturn(2){ 
              public void action(){
                 RentalSystem.rentData();
               }
     },
    ViewList(3){ 
              public void action(){
                 RentalSystem.viewList();
               }
     },
    Search(4){ 
              public void action(){
                 RentalSystem.search();
               }
     },
    Exit(5){ 
              public void action(){
                 RentalSystem.exit();
               }
     };
     private final int index;
     private ActionEnum(int index){
         this.index = index;
     }

    public abstract void action();

    public static ActionEnum fromIndex(int ix){
            for(ActionEnum action:values()){
                            if(action.index==ix) {
                                            return action;
                            }
           }
       return null;
     }

    }; 
```

在您的代码中，您调用而不是 switch：

```
int choice = Integer.parseInt(input.readLine());

ActionEnum actionEnum = ActionEnum.fromIndex(choice);

if(actionEnum==null){

 System.out.print("Invalid choice: ");

}else{

  actionEnum.action();

} 
```

现在您只能扩展 ActionEnum 类 - 您只修改一处代码。查看“有效的 Java：编程语言指南”Joshua Bloch。

# function - 如何将文本输入中的字符串转换为Scala中的函数

> ID：13965400
> 
> 赞同：1
> 
> 时间：2012-12-20T04:37:39.867
> 
> 标签：function, scala, converter, textfield

我正在使用 Scala 创建一个 GUI，它应该播放一个依赖于算法但进入 textField 的信号，例如。罪（2*Pi*400*t）。播放功能完美运行，但问题是 GUI 的输入。textField 接受函数并将其转换为字符串，现在我想知道是否有一种简单的方法可以将字符串转换回函数。我正在考虑将输入与各种有效功能相匹配，但是我不想限制可能的功能，因为我希望用户更有创造力

我对 Scala 还是比较陌生，希望你们中的一个人有更好的主意。这是我到目前为止的代码，它是一个专注于功能的基本设置。

```
object PlayApp extends SimpleGUIApplication {
  def top = new MainFrame {
    title = "Play Function App"
    val label = new Label("Type in function to be played")

    object Function extends TextField ( columns = 10)
    val label2 = new Label("Type in length of time to play")
    object Time extends TextField { columns = 10}  
    val button = new Button("Play")

    contents = new BoxPanel(Orientation.Vertical) {
      contents += label
      contents += Function
      contents += label2
      contents += Time
      contents += button
      border = Swing.EmptyBorder(50, 50, 20, 50)
    }

    var f = "sin(t)"
    var x = 0

    listenTo(Function, Time, button) 
    reactions += {
      case EditDone(Function) =>
        f = Function.text.toString
      case EditDone(Time)     =>
        x = Time.text.toInt
      case ButtonClicked(b)   =>
        play(t => f.toDouble,0,x)
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:55:52.880

您想编译用户输入的代码行，并带有一些有用的序言。

我没有这样做，所以我没有方便的片段（但尝试搜索），但您可以嵌入 REPL，让它编译代码行，然后提取结果。

这是一个使用 ILoop 获取一些输出的片段，但是您想使用 IMain 来获取结果类的结果，该结果类包装了用户函数。

```
import scala.tools.nsc.interpreter.ILoop
import java.io.StringReader
import java.io.StringWriter
import java.io.PrintWriter
import java.io.BufferedReader
import scala.tools.nsc.Settings

object FuncRunner extends App {

  val line = "sin(2 * Pi * 400 * t)"

  val lines = """import scala.math._
    |var t = 1""".stripMargin

  val in = new StringReader(lines + "\n" + line + "\nval f = (t: Int) => " + line)
  val out = new StringWriter

  val settings = new Settings

  val looper = new ILoop(new BufferedReader(in), new PrintWriter(out))
  val res = looper process settings
  Console println s"[$res] $out"
} 
```

# c# - 访问从 C# 到 F# 库的传递 Worksheet 对象

> ID：13965401
> 
> 赞同：1
> 
> 时间：2012-12-20T04:37:42.933
> 
> 标签：c#, f#, c#-to-f#

我正在尝试处理从 C# 类传递到 F# 类库的 Excel 工作表中的数据。C# 项目是一个 Excel AddIn 项目，F# 类是这个。

```
namespace DataLib
open System
open System.Reflection
open System.Collections.Generic
open FSharpx.TypeProviders.Excel
open Microsoft.FSharp.Core.CompilerServices
open System.IO
open System.Linq
open System.Text
open System.Windows.Forms
open Microsoft.Office.Core
open Microsoft.Office.Interop.Excel
open Microsoft.Office.Tools.Excel
type sheet = Microsoft.Office.Interop.Excel.Worksheet
type Class1() = 
    member this.X = "F#"
    member this.Readsheet (sh:obj)=
        let sht = sh:?>Worksheet// exception here
        let v=sh.Cells.[1,1] // Exception COM object does not have Cells property etc...
        sh.Range.Item(1,1).ToString() //error here ca 
```

所以如果我像这样从 C# 调用类

```
using DataLib;

public void useExcel(sh as Excel.Worksheet) //Excel.Worksheet is Excel Interop object
{
      Class1 one = new Class1()
      one.Readsheet(sh) //Exception thrown here in F# class
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:16:23.533

F# 和 C# 之间的互操作不是问题。您的 F# 类中有各种错误：

1.  您将 Object`sh`转换为 Worksheet `sht`，但错误地使用`sh`而不是`sht`稍后使用。

2.  `Range`没有`Item`财产。

3.  您几乎可以将与 Excel 编程相关的所有内容添加到项目中。你只需要`Microsoft.Office.Interop.Excel`在这个例子中。最好删除不必要的`open`命令，尤其`Microsoft.Office.Tools.Excel`是在`Interop.Excel`可能具有相同名称的对象但具有不兼容的字段/接口之后打开的命令。

4.  您应该通过 a`Worksheet`而不是 a`obj`以避免向下转换。

一个有效的最小 F# 示例：

```
namespace DataLib

open Microsoft.Office.Interop.Excel

type Class1() = 
    member this.X = "F#"
    member this.Readsheet (sh: Worksheet) =
        let v = sh.Cells.[1, 1]
        sh.Range(1, 1).ToString() 
```

此外，您的 C# 语法有点偏离，您需要类似以下内容：

```
// Add "using Microsoft.Office.Interop.Excel;" 
// and "using DataLib;" to namespace declarations
public void useExcel(Worksheet sh) // Worksheet is Excel Interop object
{
    Class1 one = new Class1();
    one.Readsheet(sh);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:39:19.427

我想这个问题有点复杂。我在 F# Library 项目中添加了对 Microsoft.Office.Tools.Excel 框架的引用。那是不行！它会给出编译器错误。在 F# 中，如果您正在编写作为 VSTO C# 项目一部分的 F# 库，请避免在 F# 库中引用 Microsoft.Tools.Office.Excel 命名空间。否则你会有问题！因此，只需将 Microsoft.Office.Interop.Excel 程序集的引用添加到您的项目并在 F# 文件中打开 Microsoft.Office.Interop.Excel。

# python - 我可以使用 python、selenium 和 lxml 解析 xpath 吗？

> ID：13965403
> 
> 赞同：1
> 
> 时间：2012-12-20T04:37:42.657
> 
> 标签：python, parsing, selenium, lxml, xpath

所以我一直在试图弄清楚我们如何使用 BeautifulSoup 并进行了快速搜索，发现 lxml 可以解析 html 页面的 xpath。如果我能做到这一点，我会很高兴，但教程不是那么直观。

我知道如何使用 Firebug 来获取 xpath，并且很好奇是否有人使用过 lxml，并且可以解释我如何使用它来解析特定的 xpath，并打印它们.. 说每行 5 个..或者是否有可能？！

Selenium 正在使用 Chrome 并正确加载页面，只需要帮助继续前进。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:29:38.243

`lxml`的 ElementTree 有一个 .xpath() 方法（注意`xml`Python 分发包中的 ElementTree 有那个！）

例如

```
# see http://lxml.de/xpathxslt.html

from lxml import etree

# root = etree.parse('/tmp/stack-overflow-questions.xml')
root = etree.XML('''
        <answers>
            <answer author="dlam" question-id="13965403">AAA</answer>
        </answers>
''')

all_answers = root.xpath('.//answer')

for i, answer in enumerate(all_answers):
    who_answered = answer.attrib['author']
    question_id = answer.attrib['question-id']
    answer_text = answer.text
    print 'Answer #{0} by {1}: {2}'.format(i, who_answered, answer_text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T05:26:09.133

我更喜欢使用`lxml`. 因为效率`lxml`比`selenium`大元素提取要高。您可以`selenium`用来获取网页的源代码并使用`lxml`'s xpath 而不是本机`find_elements_with_xpath`in解析源代码`selenium`。

# scala - Play 2 Scala：向该模型添加描述属性

> ID：13965406
> 
> 赞同：2
> 
> 时间：2012-12-20T04:38:12.347
> 
> 标签：scala, playframework-2.0

以下代码来自[Play 2 ScalaTodoList 教程](http://www.playframework.org/documentation/2.0.4/ScalaTodoList)：

**楷模：**

```
case class Task(id: Long, label: String)

object Task {

  val task = {
    get[Long]("id")~
    get[String]("label") map {
      case id~label => Task(id, label)
    }
  } 

  def all(): List[Task] = DB.withConnection { implicit c =>
    SQL("select * from task").as(task *)
  }

  def create(label: String) {
    DB.withConnection { implicit c =>
      SQL("insert into task (label) values ({label})").on(
        'label -> label
      ).executeUpdate()
    }
  } 
```

现在，我正在尝试添加名为**Description**的第三个属性：

```
case class Task(id: Long, label: String, description: String)

object Task {

  val task = {
    get[Long]("id")~
    get[String]("label")~
    get[String]("description") map {
      case id~label~description => Task(id, label, description)
    }
  } 
```

（我是 Scala 初学者，不确定我是否做得对）

但我被困在`def create`方法中。如何包含`description`到 SQL 查询中？

**编辑：**

我也不确定如何在`description`此处包含：

```
 def newTask = Action { implicit request =>
    taskForm.bindFromRequest.fold(
      errors => BadRequest(views.html.index(Task.all(), errors)),
      label => {
        Task.create(label)
        Redirect(routes.Application.tasks)
      }
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:47:47.910

目前，newTask 是一个`Form[String]`：封装**单个**数据的表单，一个字符串。

您需要使用更复杂的表单来处理标签和描述。您可以`case class`为这两个值定义 a ，或者简单地使用`Tuple`

```
case class TaskForm(label: String, description: Form) 
```

在这两种情况下，您至少需要进行修改：

** 更改模板中的表单类型：

```
taskForm: Form[String] => taskForm: Form[(String, String)] // with a tuple 
```

或者

```
taskForm: Form[String] => taskForm: Form[TaskForm] // with the case class defined above 
```

** 现在，您可以在控制器中检索这些值

```
// with tuple
taskForm.bindFromRequest.fold(
  errors => BadRequest(views.html.index(Task.all(), errors)),
  values => { Task.create(values._1, values._2) .... } 
```

或者

```
// with case class
taskForm.bindFromRequest.fold(
  errors => BadRequest(views.html.index(Task.all(), errors)),
  form => { Task.Create(form.label, form.description) } 
```

当然，您必须向 Create 添加第二个参数（或传递 caseclass/tuple 对象）

```
def create(label: String, description: String) {
   DB.withConnection { implicit c =>
     SQL("insert into task (label, description) values ({label}, {description})").on(
       'label -> label,
       'description -> description
     ).executeUpdate()
   }
 } 
```

仅供参考，`values`和`form`是`errors`任意变量名。你可以选择你想要的。

ps：您也需要调整您的 Form(...)

# android - 为什么 onMenuItemSelected 没有响应？？？带操作栏

> ID：13965414
> 
> 赞同：0
> 
> 时间：2012-12-20T04:39:35.203
> 
> 标签：android, actionbarsherlock

我试图在我的活动中通过 onMenuItemSelected 和 ActionBarSherlock 制作 Intent / Toast。但是我已经在网络中插入了示例代码，但它没有响应。请告诉我错误的代码在哪里？？？

这是我的代码

```
public boolean onCreateOptionsMenu(Menu menu) { 
    SubMenu sub = menu.addSubMenu("more");
    MenuItem ShareButton = sub.getItem();
    ShareButton.setIcon(R.drawable.more);
    ShareButton.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS| MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_home, sub);

    return true;

}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {

    case R.id.menu_item_account:
            Toast.makeText(myContext, "You Choosed Account",Toast.LENGTH_SHORT).show();

            return true;
        case R.id.menu_item_setting:
            Toast.makeText(myContext, "You Choosed Setting", Toast.LENGTH_SHORT).show();

            return true;
        case R.id.menu_item_exit:
            Toast.makeText(myContext, "You Choosed Exit", Toast.LENGTH_SHORT).show();
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

**解决方案**

这是我的新代码。只需删除 OnOptionMenuSelected 方法，然后使用 onMenuItemSelected ：

@Override public boolean onMenuItemSelected(int featureId, MenuItem item) {

```
 int itemId = item.getItemId();
    switch (itemId) {
    case android.R.id.home:
        finish();
        break;
    case R.id.menu_item_account:
        Toast.makeText(myContext, "Anda memilih Account",
                Toast.LENGTH_SHORT).show();
        setContentView(R.layout.account_contoh_layout);
        return true;
    case R.id.menu_item_setting:
        Toast.makeText(myContext, "Anda memilih Setting",
                Toast.LENGTH_SHORT).show();
        setContentView(R.layout.settings_contoh_layout);
        return true;

    }

    return true;
} 
```

@Override public boolean onCreateOptionsMenu(Menu menu) {

```
 // Used to put dark icons on light action bar
    SubMenu sub = menu.addSubMenu("");

    MenuItem ShareButton = sub.getItem();
    ShareButton.setIcon(R.drawable.ic_more);
    ShareButton.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS
            | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.activity_home, sub);

    return true;

} 
```

# google-drive-api - Google Drive API IOS 更改 mime 类型

> ID：13965417
> 
> 赞同：1
> 
> 时间：2012-12-20T04:39:46.570
> 
> 标签：google-drive-api

如何将 mime 类型更改为 google 电子表格？出于某种原因，@“application/vnd.google-apps.spreadsheet”不会将我的“csv”转换为真正的谷歌电子表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:03:56.447

要将您的 csv 转换为 Google 电子表格，您不必指定电子表格的 MIME 类型，而是正常上传并将`?convert=true`查询参数添加到您的请求 URL：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# iphone - 随时随地在 iOS 应用程序中更改字体

> ID：13965420
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:39:54.603
> 
> 标签：iphone, objective-c, ios, ipad, fonts

我正在为我公司的客户制作应用程序。整个应用程序已完成，并且已经在应用程序商店中。但是现在他希望我将标签/文本视图的字体或任何有文本的地方更改为自定义文本。有什么方法可以在一个地方更改字体，以便在应用程序的任何地方都可以更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T04:47:17.770

据我所知，没有神奇的解决方案可以全局更改字体。你可以做小班来做到这一点。例如，您可以`UILabel`通过创建自定义`UILabel`类并在 和 更改`initWithFrame`字体来更改所有字体`awakeFromNib`。所以看起来你可能必须为应用程序中的所有 ui 元素执行此操作。

但是，嘿，优点是。下次更改字体将是一件轻而易举的事。我们都知道客户公司如何改变主意...

source -[如何为整个应用程序设置自定义字体？](https://stackoverflow.com/questions/7607108/how-do-i-set-a-custom-font-for-the-whole-application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T14:45:10.050

我刚刚发现`[[UILabel appearance] setFont:[UIFont fontWithName:@"Open Sans" size:20.0]];`效果很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:07:54.000

您可以在项目的 .pch 文件中为字体编写宏（它将仅替换字体名称或 UIFont 对象）。

```
#define TextFont [UIFont fontWithName:@"Helvetica" size:13] 
```

并在所有课程中使用它。但是您使用 IB 或故事板放置的所有文本，您必须通过 IB 或故事板手动更改所有字体。您现在可以为所有 UI 元素创建 IBOutelets，以便下次使用宏以编程方式轻松更改字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T04:50:44.163

在您的应用程序委托中创建一个可供所有应用程序类访问的 NSString。这个 NSString 将是你的字体的名称。现在浏览您的应用程序并将所有文本的字体更改为 NSString 中的名称。

```
label.font = [UIFont fontWithName:appDelegate.fontName size:12]; 
```

只需将 NSString 设置为您在应用程序委托中选择的任何字体，其他所有内容都会更新为该字体。这应该比创建和实现 UILabel 子类更容易，因为您只想更改一个属性的一部分。

# javascript - JS 正则表达式 - 如何捕获以下数据集？

> ID：13965426
> 
> 赞同：-3
> 
> 时间：2012-12-20T04:40:25.510
> 
> 标签：javascript, regex

我尝试在引号之间匹配的 3 个数据示例：

```
"http://server1.hostname.com/N3234/top=1;level=10;now?"
"http://server133.hostname.com/N34/top=13;level=4;now?"
"http://server99.hostname.com/N112/top=6;level=2;now?" 
```

我希望正则表达式匹配：

```
"top=1;level=10;now?"
"top=13;level=4;now?"
"top=6;level=2;now?" 
```

我的想法，我可以说类似

```
/http:\/\/server\d]\.[\w+]\.com/N\d+\/(.*);now?/ 
```

一些额外的问题..

假设我想要匹配或排除的文本应该被排除，`[^http://]`或者正确的方法是什么，这是正确的吗？

`(.*)`捕获我正在寻找的数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:42:52.277

如果您只对最后的数据感兴趣，则无需匹配整个内容。

```
/top=(\d+);level=(\d+);now/ 
```

这就是你所需要的。生成的匹配数组将在索引 0 中具有相关部分，在索引 1 和 2 中具有两个数字中的每一个。

# c++ - 具有相同签名的模板函数重载，为什么会这样？

> ID：13965428
> 
> 赞同：14
> 
> 时间：2012-12-20T04:40:37.000
> 
> 标签：c++, templates, overloading

最小程序：

```
#include <stdio.h>

#include <type_traits>

template<typename S, typename T>
int foo(typename T::type s) {
    return 1;
}

template<typename S, typename T>
int foo(S s) {
    return 2;
}

int main(int argc, char* argv[]) {
    int x = 3;
    printf("%d\n", foo<int, std::enable_if<true, int>>(x));

    return 0;
} 
```

输出：

```
 1 
```

为什么这不会产生编译错误？生成模板代码时，函数`int foo(typename T::type search)`和`int foo(S& search)`签名不一样吗？

如果您稍微更改模板函数签名，它仍然可以工作（正如我在上面的示例中所期望的那样）：

```
template<typename S, typename T>
void foo(typename T::type s) {
    printf("a\n");
}

template<typename S, typename T>
void foo(S s) {
    printf("b\n");
} 
```

然而这并没有，唯一的区别是一个有一个 int 签名，另一个是由第一个模板参数定义的。

```
template<typename S, typename T>
void foo(typename T::type s) {
    printf("a\n");
}

template<typename S, typename T>
void foo(int s) {
    printf("b\n");
} 
```

编译器错误（Clang）：

```
test.cpp:26:2: error: call to 'foo' is ambiguous
foo<std::enable_if<true, int>>(3);
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
test.cpp:16:6: note: candidate function [with T = std::__1::enable_if<true, int>]
void foo(typename T::type s) {
        ^
test.cpp:21:6: note: candidate function [with T = std::__1::enable_if<true, int>]
void foo(int s) {
        ^
1 error generated. 
```

我正在为我正在处理的项目使用与此类似的代码，我担心在某些情况下我不理解的语言会导致一些未定义的行为。我还应该提到它确实可以在 Clang 和 VS11 上编译，所以我不认为这只是一个编译器错误。

* * *

编辑：更正了第二种情况（错字）；添加了来自 Clang 的错误消息。

编辑#2：对于那些询问 T::type 是什么意思的人。

来自[http://en.cppreference.com/w/cpp/types/enable_if](http://en.cppreference.com/w/cpp/types/enable_if)：

> 模板< bool B，类 T = void > struct enable_if；
> 
> 如果 B 为真，std::enable_if 有一个公共成员 typedef 类型，等于 T；否则，没有成员 typedef。

enable_if 是一个结构。基本上，如果在 enable_if 的第一个模板参数中评估的表达式为真（在我上面的示例中，它是），那么将有一个`type`与第二个模板参数具有相同类型的公共成员。

在 的情况下`enable_if<true, int>`， enable_if::type 的类型为 int。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T06:17:40.363

第一个功能被认为比第一个更专业。

功能

```
int foo(typename T::type) 
```

可以匹配

```
template <typename S,typename T> int foo(S s) 
```

通过使用 T::type 作为参数 S 的值，但是

```
int foo(S s) 
```

不匹配

```
template <typename S,typename T> int foo(typename T::type) 
```

因为 T 不能推导出来。

逻辑在第 14.5.5.2 节的 C++03 标准和第 14.5.6.2 节的 C++11 标准中进行了布局。

这里的想法是：要查看一个函数是否比另一个函数更专业，您为第一个函数的每个模板参数发明值，然后查看第二个函数是否可以匹配结果签名。您还为第二个函数的模板参数发明值，并查看第一个函数是否与生成的签名匹配。如果第二个函数可以匹配第一个函数，那么第二个函数不能比第一个函数更专业。如果除此之外，第一个函数不能匹配第二个，那么第一个必须比第二个更专业。这就是你的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T06:41:51.760

这是对该现象的进一步简化：

```
#include <stdio.h>

template<typename T>
void foo(int arg) {
    printf("a\n");
}

template<typename T>
void foo(T arg) {
    printf("b\n");
}

int main(int argc, char* argv[]) {
    foo<int>(3);   // prints "a"
    foo(3);        // prints "b"

    return 0;
} 
```

模板参数可以通过尖括号显式传递，也可以通过推导解析。如果未明确指定参数，则必须可以使用函数的参数进行推导。

因此，在 的情况下`foo(3)`，模板 'a' 将不起作用，因为参数 T 没有明确指定并且无法推断。在 的情况下`foo<int>(3)`，两个模板都可以工作。事实上，如果你注释掉模板'a'，调用`foo<int>(3)`将打印“b”。所以问题是，为什么首选模板'a'？这里的关键是“部分排序”：

[http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fpartial_ordering_funct_templ.htm](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fpartial_ordering_funct_templ.htm)

I see now that someone else has already answered (I'm bad at answering questions quickly), so I'm going to just wrap this up now and say that template 'a' is more specialized like Vaughn said.

# java - 如何从文本字符串中删除字符

> ID：13965431
> 
> 赞同：1
> 
> 时间：2012-12-20T04:41:04.520
> 
> 标签：java, processing

如何通过按退格键从文本字符串中删除字符。这就是我到目前为止所得到的。它只删除最后一个字符。

```
if (keyPressed) {
    if (key != '\n' && key != CODED) {
        if (typing.length() < 5){
            typing = typing + key;
        }
    }
    if (key == BACKSPACE) {
        if (typing.length() > 0) {
            typing = typing.substring(0, typing.length()-1);
        }
    }
}

text(typing, 345, 372); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:37:13.180

那是因为`BACKSPACE` [is not`CODED`](http://processing.org/reference/key.html)，所以 while`typing.length()`小于`5`并且你按下`BACKSPACE`你满足两个条件破坏的东西。当它达到`5`它时，它只满足第二个条件：`if (key == BACKSPACE)`所以它可以工作，将它恢复到小于`5`所以它不会再次工作......

作为测试尝试：`if (key != '\n' && key != CODED && key != BACKSPACE)` 但我认为您可能想要`switch (key)`完成这项工作。

此外，您最好在 draw() 中使用`void keyPressed()`or`keyReleased()`或`keyTyped()` 而不是字段。`keyPressed`或者你需要自己处理重复键......

# ios - MKMapView 会在 iOS6 中自动使用谷歌地图，因为谷歌地图在 iOS6 中恢复了吗？

> ID：13965437
> 
> 赞同：1
> 
> 时间：2012-12-20T04:41:32.060
> 
> 标签：ios, google-maps, mkmapview, mapkit

由于苹果已经在 iOS6 中恢复了谷歌地图，如果我`MKMapView`在我的 iPhone 应用程序中使用，它会自动使用谷歌地图吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T04:50:47.257

不，它是 Apple API，因此将使用 Apple 的默认地图。

苹果尚未恢复谷歌地图。谷歌发布了一款 iPhone 应用程序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T04:56:56.883

如果你想在你的应用中使用谷歌地图，你应该使用谷歌地图 SDK for iOS

[https://developers.google.com/maps/documentation/ios](https://developers.google.com/maps/documentation/ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T22:28:17.783

也许混乱的根源（至少对我来说）是来自[Apple 的 MKMapView 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html)的以下文本片段：

> 重要提示：在 iOS 5.1 及更早版本中，Map Kit 框架使用 Google 移动地图 (GMM) 服务来提供地图数据。使用此框架的特定类（及其相关接口）受 Google Mobile Maps 服务条款的约束。[您可以在http://code.google.com/apis/maps/iphone/terms.html](http://code.google.com/apis/maps/iphone/terms.html)找到这些服务条款。

因此，虽然我同意`"If you want to use Google Maps in your app, you should use Google Maps SDK for iOS"`，但通过阅读 Apple 的文档，似乎 MKMapView 以某种方式绑定到 GMM。

# drupal - Drupal 7 - 通过智能查询检索某些记录

> ID：13965439
> 
> 赞同：0
> 
> 时间：2012-12-20T04:41:45.680
> 
> 标签：drupal, drupal-7, business-intelligence

我开发了一个网站，提供了 10-12 个不同类别的数千种产品。每个类别都提供通过分类定义的选择数量。

我已经配置了 [Profile 2]：[http](http://drupal.org/project/profile2) ://drupal.org/project/profile2模块，它使成员能够通过选择每个类别中的选项数量来设置他们的偏好。

现在我需要每天给每个会员发一封信，根据他们的喜好只提供数千种产品中的 5 种。我还想记录发送给每个成员的产品，以便每天提供的产品应该是前一天的下五个。当产品周期完成时，它将从头开始重新启动。

我的问题是：完成这项工作的最佳选择是什么？如何？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:03:16.737

您可以编写自定义模块并使用 cron 运行它。您可以使用[taxonomy_select_nodes](http://api.drupal.org/api/drupal/modules!taxonomy!taxonomy.module/function/taxonomy_select_nodes/6)模块来选择节点。它还带有一个寻呼机，您可以使用它来维护订单，或者您还可以维护一个包含 uid 和每天发送的产品列表的数据库。

# .net - 使用 VB.net 隐藏 Excel 功能区

> ID：13965440
> 
> 赞同：1
> 
> 时间：2012-12-20T04:41:52.100
> 
> 标签：.net, vb.net, excel, ribbon

我想知道是否可以删除除最小化按钮之外的所有菜单项。我想将 Excel 用作用户仅查看和最小化的帮助屏幕，仅此而已。我只希望我的一个 excel 文件有新的功能区。

我尝试使用隐藏 Excel 功能区

```
xlapp.ExecuteExcel4Macro("SHOW.TOOLBAR(""Ribbon"",False)")
xlapp.Application.CommandBars("Worksheet Menu Bar").Enabled = False 
```

以及[此处](https://stackoverflow.com/questions/13735595/remove-ribbon-from-excel)描述的 sendkeys 。

[功能区编辑器](http://www.andypope.info/vba/ribboneditor.htm)可以做到这一点吗？我无法删除菜单项。此外，完成后，功能区是工作表独有的，还是 Excel 应用程序始终使用新功能区？

# java - 从不同的类调用方法到另一个类和方法

> ID：13965441
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:41:58.763
> 
> 标签：java, class, methods, compiler-errors, bluej

我有两个类，一个叫 Driver，另一个叫 BankAccount。在 Driver 中有一个称为 Driver 的方法，在 BankAccount 中有一个称为 Deposit 的方法。当我尝试从 Driver 方法调用 BankAccount.Deposit 时，我收到一条错误消息，提示“无法从静态上下文引用非静态方法 Deposit()”。

关于我应该对这些代码行做什么以使其运行的任何建议。

```
 import javax.swing.JOptionPane;
public class Driver
{
    int choice;
    String number;
    //public Driver()
    public Driver()
    {
         String number = JOptionPane.showInputDialog("1\. Deposit 2\. Withdraw 3\. Balance 4\. Change name 5\. Exit");
         int choice = Integer.parseInt(number);
         do
         {
         if( choice == 1)
         {
             BankAccount.Deposit() = new Deposit();
             Driver.Driver = new Driver();
            }else if(choice == 2)
          {
              BankAccount.Withdrawl = new Withdrawl();
              Driver.Driver = new Driver();
            }else if(choice == 3)
            {
               BankAccount.getBalance = new getBalance();
               JOptionPane.showDialog(balance);
               Driver.Driver = new Driver();
            }else if(choice == 4)
            {
                name = JOptionPane.showInputDialog(" Please enter a name");
                Driver.Driver = new Driver();
            }else if(choice ==5)
            {
                JOptionPane.showDialog("Goodbye" + name);
            }
        }while( choice >= 1 && choice <= 5);
}
} 
```

这是银行帐户方法

```
 import javax.swing.JOptionPane;
public class BankAccount
{
double balance = 400;
double deposit;
double withdraw;
double Interest = 1.05;
String name;
String accountNumber;

public BankAccount()
{
name = null;
accountNumber = null;
balance = 0;
}

public double Deposit()
{
    String input = JOptionPane.showInputDialog("How much would you like to deposit?");
    deposit = Integer.parseInt(input);
    if (deposit < 10000)
    {
        balance = (deposit + balance);

    }
    return balance;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:46:25.147

我不明白您为什么要这样编写代码。

java 中的方法名应该以小写字母 like`deposit`和 not开头`Deposit`。

`BankAccount`是一个类，并且`Deposit`是其中的一个非静态方法。

因此，对于使用`Deposit`方法，您必须首先创建一个`BankAccount`类的对象/实例，如下所示：

```
BankAccount b =new BankAccount(); 
```

然后使用使用该对象引用的任何方法：

```
b.Deposit();
b.Withdraw(); 
```

你应该这样写：

```
if( choice == 1)
{
     BankAccount b = new BankAccount();
     b.Deposit();
} 
```

你需要为提款和其他做同样的事情

```
else if(choice == 2)
{
     BankAccount b = new BankAccount();
     b.Withdrawl();
     Driver.Driver = new Driver();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:11:34.030

您的“意图”的工作版本：

```
import javax.swing.JOptionPane;
public class Driver
{
    int choice;
    String number;
    BankAccount myAccount=null;

    public Driver()
    {
    myAccount=new BankAccount();
    }

    public void drive()
    {
    String number = "";
        int choice = 0;
        String name = "?";
         do
         {
             number = JOptionPane.showInputDialog("1\. Deposit 2\. Withdraw 3\. Balance 4\. Change name 5\. Exit");
             choice = Integer.parseInt(number);
         if( choice == 1)
         {
             myAccount.Deposit();
            }else if(choice == 2)
          {
          // mAccount.Withdrawl();
          // missing method Withdraw1()
            }else if(choice == 3)
            {
        // BankAccount.getBalance = new getBalance();
        // missing method getBalance()
        // JOptionPane.showDialog(balance);
            }else if(choice == 4)
            {
                JOptionPane.showInputDialog(" Please enter a name");
        // todo i guess name should be used somewhere in bankaccount... like myAccount.setName(name)
            }else if(choice ==5)
            {
                // JOptionPane.showDialog("Goodbye" + name);
        // no showDialog method in JOptionPane
        return;
            }
        }while( choice >= 1 && choice <= 5);
    }

    public static void main(String pArgs[])
    {
    Driver driver=new Driver();
    driver.drive();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:47:04.700

这个说法：

```
BankAccount.Deposit() = new Deposit(); 
```

没有意义。首先，`Deposit()`是一个*实例*方法`BankAccount`。仅对 . 的特定实例调用它才有意义`BankAccount`。这就是编译器所抱怨的。

除此之外，还有一个`Deposit()`返回`int`值的问题，它不能出现在赋值语句的左侧。另外，您没有提到任何名为 的类`Deposit`，所以我不知道`new Deposit()`应该是什么。

您的代码中似乎还有类似的问题。例如，下一条语句：

```
Driver.Driver = new Driver(); 
```

完全是胡说八道——没有领域`Driver.Driver`。

我建议您阅读教程[了解实例和类成员](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

# html - 为什么链接的 href 和脚本的 src

> ID：13965446
> 
> 赞同：9
> 
> 时间：2012-12-20T04:42:33.430
> 
> 标签：html

> 再次在打字时我读到了这个[问题](https://stackoverflow.com/questions/7122492/why-script-src-min-js-script-but-link-rel-stylesheet-href-min-why-no)，但这是一个不同的问题......这也没有解决，因为答案被标记为正确的人最后说
> 
> **我不知道​​你的问题的直接答案，但是我也对标签很好奇。寻找答案可能包括挖掘一些网络档案。**

所以问题很简单，为什么我们对标签使用`src`属性而不是标签，现在当我包含样式表和脚本时，这让我很多次感到困惑......为什么它不能相同？有什么具体原因吗？`<script>``href``<link>`

例如

```
<script href="#"></script>
<link href="#" /> 
```

或者

```
<script src="#"></script>
<link src="#" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T04:44:23.120

链接通过超文本引用指向某处（因此`href`）。这也是我们使用的原因`<a href`。

脚本从其他地方获取源并嵌入到当前页面中，因此`src`. 比较`<img src`

编辑：当然，另一个同样有效的答案是“它就是这样！” :p

# regex - 在 Visual Studio 中查找和替换事件处理程序

> ID：13965447
> 
> 赞同：0
> 
> 时间：2012-12-20T04:42:34.723
> 
> 标签：regex, visual-studio-2010, replace

如何使用查找和替换正则表达式在 Visual Studio 中查找和替换以相同名称结尾的事件处理程序。

例如

```
GridView1_DataBound
CheckBoxList1_DataBound 
```

格式为 [ **some text** ]_[ **event name** ]

我尝试使用 *_DataBound 并*显示模式中的语法错误*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:57:34.757

用这个

```
[^_\\"]+_[^\\"]+ 
```

或使用它并获得第一组（**group1**）。

```
[^\\"]+\\"([^_\\"]+_[^\\"]+)\\" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:26:01.047

```
(\w[^_]+_\w+) 
```

这应该适用于给定的上下文。（我们不尝试验证文本；我们知道目标文本是带有 sometext_sometext 的事件处理程序名称）

# sql - 计算最近 4 周滚动的平均值

> ID：13965450
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:42:40.810
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要你的帮助。

数据库：SQL SERVER 2008R2

我想计算一年零一周的最后一周的平均值。

我有这样的表格数据：

```
YEAR    WEEKS   VALUE 
2012    1   3000
2012    2   5000
2012    3   6000
2012    4   7000
2012    5   8000
2012    6   9000
2012    7   1000
2012    8   6000
2012    9   9000
2012    10  4000 
```

我想要那个：

```
YEAR       WEEKS      VALUE
2012        1           ( Average value for week 49, 50, 51, 52 for the year 2011)
2012        2         ( Average value for week 50, 51, 52 for the year 2011 and week 1                    for the year 2012)
2012        3           ( Average value for week 51, 52 for the year 2011 and week 1, 2 for the year 2012)
2012        4           ( Average value for week 52 for the year 2011 and week 1, 2, 3 for the year 2012)
2012        5          5250 -> (  Average value for  week 1, 2, 3 , 4 for the year 2012)
2012        6          6500 -> (  Average value for  week 2, 3 , 4, 5 for the year 2012) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:22:11.733

如果年份总是有 52 周，那么这里有一个简单的方法：

```
SELECT
   DataYear = N.Serial / 52,
   DataWeek = N.Serial % 52 + 1,
   Avg(T.Value)
FROM
   dbo.DataTable T
   CROSS JOIN (VALUES (0), (1), (2), (3)) W (Offset)
   CROSS APPLY (SELECT T.Year * 52 + Week + W.Offset) N (Serial)
GROUP BY
   N.Serial / 52,
   N.Serial % 52 + 1
HAVING
   Count(*) = 4 -- if you don't want smaller sets
ORDER BY
   DataYear,
   DataWeek; 
```

[在 SQLFiddle 中查看此操作](http://sqlfiddle.com/#!3/a35df/4)。我不得不添加 2011 年底的假数据以匹配您的示例输出。我从 Alexander Fedorenko 那里借用了 2011 年的数据，以便于比较。

注意：如果年份的周数是可变的，那就不会那么简单了。为了获得更好的答案，您需要提供有关如何计算周数的非常具体的说明，足够详细，以便我们可以确定一年中每个星期的实际开始日期。

最终，将数据拆分为数年和数周存储可能不是最佳选择。我认为最好简单地存储每周收集的数据的开始日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:11:48.433

使用递归[**CTE**](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

```
;WITH cte AS
 (
  SELECT [YEAR], WEEKS, VALUE,
         ROW_NUMBER() OVER (ORDER BY [YEAR], WEEKS) AS id
  FROM your_table
  --WHERE your condition range of dates
  ), cte2 AS
 (
  SELECT id,
         CASE WHEN id = 5 THEN [YEAR] END AS [YEAR],
         CASE WHEN id = 5 THEN WEEKS END AS WEEKS,
         CASE WHEN id != 5 THEN VALUE END AS VALUE, 1 AS [Level]
  FROM cte
  UNION ALL
  SELECT c.id,
         CASE WHEN ct.id - ct.[Level] = 4 THEN c.[YEAR] END,
         CASE WHEN ct.id - ct.[Level] = 4 THEN c.WEEKS END,
         CASE WHEN ct.id - ct.[Level] != 4 THEN c.VALUE END, ct.[Level] + 1
  FROM cte c JOIN cte2 ct ON c.id = ct.id + 1
  WHERE ct.id < 5 + [Level]
  )
  SELECT MAX([YEAR]) AS [YEAR], MAX(WEEKS) AS WEEKS, AVG(VALUE) AS avgVALUE
  FROM cte2
  WHERE id = CASE WHEN [Level] = 1 AND id > 5 THEN NULL ELSE id END 
  GROUP BY [level]
  HAVING MAX([YEAR]) IS NOT NULL 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d6db6/2)上的演示[](http://sqlfiddle.com/#!3/d6db6/2)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:29:15.050

首先，不要跨多个字段拆分日期信息，这意味着必须重新组合它们会减慢查询速度，最好将其存储为日期时间变量。

其次，答案是

```
WITH  Data
AS
(
    SELECT   CAST(CAST(Year AS VARCHAR) + CAST(Weeks AS VARCHAR) AS INTEGER) AS WeekNum
            ,Year
            ,Weeks
            ,Value
            ,1 AS Depth
    FROM    WeekData
    UNION ALL
    SELECT   d.WeekNum
            ,d.Year
            ,d.Weeks
            ,wd.Value
            ,d.Depth + 1
    FROM    WeekData wd
            INNER JOIN
            Data d  ON d.WeekNum=CAST(CAST(wd.Year AS VARCHAR) + CAST(wd.Weeks AS VARCHAR) AS INTEGER)-d.Depth
                    AND
                    d.Depth<4
)
SELECT   Year
        ,Weeks
        ,AVG(Value) AS AverageValue
FROM    Data
GROUP BY Year
        ,Weeks 
```**

# amazon-web-services - Cloudwatch 上微实例的 CPU 利用率

> ID：13965452
> 
> 赞同：2
> 
> 时间：2012-12-20T04:42:48.607
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudwatch, rds

CloudWatch 为微型实例显示的数据让我有些困惑。因为一个微型实例在短时间内最多可以使用两个 CPU 实例，那么 Cloudwatch 中显示的 cpuutilization 是一个 CPU 还是两个？例如，如果我看到 Cloudwatch 在短时间内显示我的微实例 cpuutilization 为 100%，这是否意味着它正在使用两个 CPU 并且两个 CPU 都是 100% 或者它只显示一个 CPU 为 100%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:52:34.767

我一直理解利用率指标来指示您的实例中所有核心的百分比使用率。这个百分比反映了您的实例类中的总使用量与最大容量的关系，这对您来说是微量的。

因为 micro 是免费层，所以您可以期望节流在任何微实例上都会很快发挥作用，所以不要将它用于任何艰苦的工作（如果有的话）。如果您要在您的微型实例上看到常规 100% 的使用率，那么至少升级到一个小型实例将有益于您，这样当您的峰值持续时间过长时，节流不会破坏您的服务。

我已经使用 micro 一年左右了，我绝对建议不要使用免费/微型层来进行任何繁重的工作。“几个”峰值达到 100% 利用率是可以的，但听起来这对您来说比偶尔发生的事情更常见。

# eclipse - 在 Tomcat 7.XX 中使用 EJB 3.1 @Startup 注释

> ID：13965454
> 
> 赞同：2
> 
> 时间：2012-12-20T04:43:10.120
> 
> 标签：eclipse, tomcat7, java-ee-6, startup, ejb-3.1

```
@Startup
@Singleton
public class TestTimer {
    private static int count = 0;
    @Schedule(second="*/10", minute="*", hour="*", info="MyTimer")
    public void execute() {
       System.out.println("its running count..."+count);
       count++;
    }
} 
```

我希望这段代码在 Tomcat 7.xx 上运行，请让我知道在 web.xml 或 ejb-jar.xml 中需要什么配置才能在启动时运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:31:05.787

Tomcat 是servlet 容器，即它并不意味着处理Enterprise Java Bean，Singleton bean 肯定是。有很多方法可以实现它，但你不想这样做。一个建议 - 使用应用程序服务器，它既是 servlet 容器又是 EJB 容器。

建议：

*   [Glassfish](http://glassfish.java.net/)（Java EE 参考实现）
*   [TomEE](http://tomee.apache.org/apache-tomee.html)（源于 OpenEJB，您可能会发现它最熟悉）
*   [老板](http://www.jboss.org/)

# iphone - 如何从 iPhone 相机胶卷中获取专辑列表

> ID：13965457
> 
> 赞同：1
> 
> 时间：2012-12-20T04:43:38.857
> 
> 标签：iphone, ios, ios4

> **可能重复：**
> [ipad 照片库中的相册属性](https://stackoverflow.com/questions/5854456/properties-of-albums-in-ipad-photo-library)

我想在我的应用程序中获取专辑列表和详细信息。iphone相机胶卷中的任何专辑及其图像。我想在我的应用程序中显示相同的专辑屏幕。请帮忙。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:53:10.197

您可以使用 ALAsset Library 来获取 photolibrary 相册和图像。

用于获取 photoliray 组详细信息的示例代码。

```
void (^assetEnumerator)(struct ALAsset *, NSUInteger, BOOL *) = ^(ALAsset *result, NSUInteger index, BOOL *stop)
{
    if(result != NULL)
    {
        NSLog(@"See Asset: %@", result);
    }
};

void (^assetGroupEnumerator)(struct ALAssetsGroup *, BOOL *) =  ^(ALAssetsGroup *group, BOOL *stop)
{
    if(group != nil)
    {
            [group enumerateAssetsUsingBlock:assetEnumerator];
    }
};

    library = [[ALAssetsLibrary alloc] init];
    [library enumerateGroupsWithTypes:ALAssetsGroupAlbum
                       usingBlock:assetGroupEnumerator
                     failureBlock: ^(NSError *error)
                     {
                         NSLog(@"Failure");
                     }]; 
```

检查[AssetsLibrary 框架](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)以获取更多选项。

您还可以使用[UIImagePicker](http://codezone4.wordpress.com/2012/05/14/ios-uiimagepicker-tutorial/)显示专辑列表并从中选择图像。

图片`UIImagePicker`：

![UIImagePicker 图像](../Images/cc3a02cc9d6947267731a0242277ad4f.png)

# java - Java util 日志级别映射到 Jboss 日志级别

> ID：13965464
> 
> 赞同：0
> 
> 时间：2012-12-20T04:44:30.247
> 
> 标签：java, logging, jboss, log4j

我的 MBean 部署在 jboss 上。jboss 日志记录级别设置为“信息”。现在，当我将包的日志记录级别（java util logger）更改为“FINE”（通过设置日志级别以编程方式运行时）时，它不会附加任何 logger.fine("....") 消息。消息被过滤掉。

有没有办法将 java util logger 的日志级别的更改传播到 jboss 日志级别？(java util -> SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST jboss -> FATAL, ERROR, WARN, INFO, DEBUG, TRACE 有不同的级别)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:46:58.947

请尝试更改 jboss 记录器设置。我感觉实际上是 JBoss 控制了您的日志记录配置

如果您对多个日志库感到困惑，请考虑跨库日志框架，例如 slf4j 或 commons logging，这样您的代码就可以与客户端使用的任何日志框架兼容

# java - IBM WebSphere MQ 2042 错误

> ID：13965468
> 
> 赞同：2
> 
> 时间：2012-12-20T04:44:48.097
> 
> 标签：java, ibm-mq

我有以下代码：

```
int openOptions = MQC.MQOO_INQUIRE 
    + MQC.MQOO_FAIL_IF_QUIESCING
    + MQC.MQOO_INPUT_SHARED; 
```

执行时，我收到一个错误：

> com.ibm.mq.MQException：MQJE001：完成代码 2，原因 2042 MQJE001：完成代码 2，原因 2042

在将我的 Java 程序与 WebSphere MQ 连接时会发生这种情况。请注意，队列属性设置为输入共享。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T04:56:14.147

尽管队列可能设置为`DEFSOPT(SHARED)`，但这只是默认设置。它不会阻止程序以独占方式打开它。尤其是非集群通道的传输队列、命令队列和MQ系统组件使用的其他队列都是以独占方式打开的，而不管队列的默认设置如何。类似地，监控程序经常打开事件队列以独占使用，以确保其他程序不会竞争消息并导致错过关键事件。

它是事件队列还是 XMit 队列之一？如果是这样，您可能无法在不停止通道或监视代理的情况下消除错误。如果它是用户定义的队列，请使用[DISPLAY QSTATUS](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaj.doc/sc12260_.htm)命令查看哪个进程将其打开以进行独占输入，然后断开该进程。

这是一个例子：

```
C:\Users\T.Rob>runmqsc QM75
5724-H72 (C) Copyright IBM Corp. 1994, 2011\.  ALL RIGHTS RESERVED.
Starting MQSC for queue manager QM75.

dis qs(system.admin.command.queue) all
     1 : dis qs(system.admin.command.queue) type(handle) all
AMQ8450: Display queue status details.
   QUEUE(SYSTEM.ADMIN.COMMAND.QUEUE)       TYPE(HANDLE)
   APPLDESC(WebSphere MQ Command Server)
   APPLTAG(here MQ 7.5\bin\amqpcsea.exe)
   APPLTYPE(SYSTEM)                        BROWSE(NO)
   CHANNEL( )                              CONNAME( )
   ASTATE(NONE)                            HSTATE(ACTIVE)
   INPUT(EXCL)                             INQUIRE(YES)
   OUTPUT(NO)                              PID(5220)
   QMURID(0.0)                             SET(NO)
   TID(1)
   URID(XA_FORMATID[] XA_GTRID[] XA_BQUAL[])
   URTYPE(QMGR) 
```

该命令的输出将针对附加到队列的每个进程重复。它显示可执行文件名称（在本例`amqpcsea`中为命令服务器）、打开类型、进程 ID 和线程 ID。请注意，这里显示`INPUT(EXCL)`没有其他东西可以打开命令队列以浏览或获取消息。

# c# - 每 0.1 毫秒和 0.3 毫秒重复两个任务（Systems.Timer.Timer 不够精确）

> ID：13965470
> 
> 赞同：4
> 
> 时间：2012-12-20T04:44:56.883
> 
> 标签：c#, .net, timer

1.  有没有办法在 C# 中以高分辨率频率执行方法，例如每 100 微秒？

2.  那么两种不同频率的不同方法呢，例如 Method1 每 0.1 ms 和 Method2 0.3 ms？

MSDN 有关于将事件处理程序附加到`Systems.Timers.Timer`类的文档，如下所示：

```
public static void Main()
{

    System.Timers.Timer aTimer = new System.Timers.Timer();
    aTimer.Elapsed += new ElapsedEventHandler(Method);
    aTimer.Interval = 2000;
    aTimer.Enabled = true;
    GC.KeepAlive(aTimer);
} 
```

但是`System.Timers.Timer`当我对它进行基准测试时，它的精度只有 15~16 毫秒。我的 CPU 性能计数器的精度为 0.1 毫秒及以下，但我找不到将事件处理程序附加到`Stopwatch`类的方法。

另外，当我以不同的频率执行这两种方法时，是否需要注意一些线程问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:59:10.070

它很难看，但您可能有机会使用秒表 ElapsedTicks。

```
Stopwatch w = new Stopwatch()
long nextTick = 0;
long ticksPerMicroSecond = 1000000L / Stopwatch.Frequency; // Number of ticks per microsec.
long periodInTicks = ticksPerMicroSecond / 100; // Ticks per 0.1ms

while(true)
{
  long currentTick = w.ElapsedTicks.
  if (currentTick  > nextTick)
  {
    nextTick = currentTick + periodInTicks;
    // Do something here.
  }
} 
```

它尽可能丑陋，并且您会得到一个 while(true) 循环，这可能会免费使用 100% cpu（那么最好在多核上运行它）。

您可能想对这件事进行一些基准测试（查看 Stopwatch.Frequency msdn doc 中的示例），以了解您的计时器有多精确，并了解您因内部功能迟到而导致的漂移。您可能还希望启用后台 gc 以避免 GC 阻塞您的线程。虽然这表明它在代码中是可行的，但我真的不确定你能否让你的函数在不到 0.1 毫秒的时间内运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:06:56.200

这是不可能的。Windows 不是实时操作系统。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-20T05:30:33.457

不可能。您低于 MS 开发人员认为合理的水平。

假设现代硬件，你能做的最好的事情是 TImerQueue、HPET。可以在bios中禁用，因此可能需要进行调整。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686796(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686796(v=vs.85).aspx)

没有可用的 .NET API，但通过 Interop 进行映射很简单。

那说：那里的时间参数有一个int周期，以毫秒为单位，所以我们只讨论1ms的分辨率。硬件是否能做到这一点主要取决于年龄。

所以，对不起，这是你能得到的最好的。

# android - 如何在android中自定义autocompletetextview

> ID：13965472
> 
> 赞同：0
> 
> 时间：2012-12-20T04:45:19.297
> 
> 标签：android, autocomplete, customization

我正在使用android2.2。

我想在 android 中自定义 Autocompletetextview。我使用以下链接进行自定义[http://techdroid.kbeanie.com/2010/04/custom-autocomplete-for-android.html](http://techdroid.kbeanie.com/2010/04/custom-autocomplete-for-android.html)

![在此处输入图像描述](../Images/973c79453dfefe7fb5baa0cae35bc88b.png)

这是我自定义的 autocompletetextview 控件。我正在写多个文本，当我按下 # 时，它会进行过滤。

**#aaaa# 和 #abaa# 都是从列表中选择的文本。****我想成为这个词作为链接或显示粗体**。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:28:15.647

请检查[此](http://www.androidengineer.com/2010/08/easy-method-for-formatting-android.html) 链接，并根据您的[链接](http://techdroid.kbeanie.com/2010/04/custom-autocomplete-for-android.html) **对 repeatText 函数进行更改**

喜欢

```
@Override
    protected void replaceText(final CharSequence text) {
        String textData = previous + text + getSeperator();     
        super.replaceText(setSpanBetweenTokens(textData, "#", new StyleSpan(Typeface.BOLD_ITALIC)));
} 
```

您将获得过滤后的粗体文本**

# php - 如何知道 var_dump 函数在哪里使用？

> ID：13965482
> 
> 赞同：1
> 
> 时间：2012-12-20T04:46:44.840
> 
> 标签：php, orm, laravel, eloquent

我正在尝试 Laravel 4。当使用 ORM 创建新用户帐户时，页面会回显：

```
array(1) {
    [0]=>
    object(stdClass)#103 (1) {
        ["id"]=>
        int(98)
    }
} 
```

我完全不知道 var_dump 语句在哪里。我已经浏览了整个源代码，试图找出回显的位置，但找不到任何东西。

什么可能导致这种情况？我怎么知道 var_dump 语句在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:48:06.337

由于它显示数据类型，您将需要搜索：`var_dump`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T04:48:10.773

那不是一个`print_r`，那是一个`var_dump`。尝试搜索您的源文件。

但它应该在源中与其周围的内容相同的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T04:55:46.567

在 Netbeans 上打开项目，右键单击 Source 文件夹并单击 find... 搜索 var_dump(

你会得到的。

简单的？

# ruby - 如何使用 readline 支持重新安装 ruby ？

> ID：13965491
> 
> 赞同：6
> 
> 时间：2012-12-20T04:48:09.307
> 
> 标签：ruby, rvm, ubuntu-11.10

[我已经按照https://github.com/wayneeseguin/rvm#installation](https://github.com/wayneeseguin/rvm#installation)上的说明通过 RVM 安装了 Ruby 。

有关信息，我有所有档案（*readline-5.2.tar.gz、readline-6.2.tar.gz、ruby-1.9.3-p327.tar.bz2、rubygems-1.8.24.tgz、wayneeseguin-rvm-stable。 tgz 和 yaml-0.1.4.tar.gz*）在`~/.rvm/archives`目录中，我不想以任何方式重新下载它们。

当我做：

```
sudo /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config 
```

我得到：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Note, selecting 'libxslt1-dev' instead of 'libxslt-dev'
Note, selecting 'libncurses5-dev' instead of 'ncurses-dev'
libtool is already the newest version.
sqlite3 is already the newest version.
libxslt1-dev is already the newest version.
libc6-dev is already the newest version.
openssl is already the newest version.
git-core is already the newest version.
subversion is already the newest version.
zlib1g is already the newest version.
libncurses5-dev is already the newest version.
curl is already the newest version.
libreadline6 is already the newest version.
libyaml-dev is already the newest version.
autoconf is already the newest version.
pkg-config is already the newest version.
libxml2-dev is already the newest version.
build-essential is already the newest version.
libssl-dev is already the newest version.
libreadline6-dev is already the newest version.
automake is already the newest version.
zlib1g-dev is already the newest version.
bison is already the newest version.
libsqlite3-dev is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

我什至做过：

```
$ rvm pkg install readline
$ rvm reinstall 1.9.2 --with-readline-dir=$rvm_path/usr 
```

但我仍然得到这个`irb`：

```
Readline was unable to be required, if you need completion or history install readline then reinstall the ruby. You may follow 'rvm notes' for dependencies and/or read the docs page https://rvm.io/packages/readline/ . Be sure you 'rvm remove X ; rvm install X' to re-compile your ruby with readline support after obtaining the readline libraries. 
```

我已经完成了 4-5 次重新安装过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T09:59:35.403

关于什么

```
rvm reinstall 1.9.3 
```

一旦安装了基本依赖项（如构建要素等），您就可以这样做。我遇到了类似的问题，我不得不安装一些依赖项并重新安装 ruby​​ 就可以了。

下面的依赖项列表

```
sudo apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core \
zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev \
autoconf libc6-dev libncurses5-dev automake libtool bison subversion pkg-config 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T04:49:45.277

考虑到您有 RVM，您应该利用有用的命令`rvm requirements`，因为这将为您提供为特定环境/操作系统运行所需的命令。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:19:27.440

如果您安装了软件包，那么您的 ruby​​ 很可能安装了 readline 支持`rvm requirements`。

您可以通过运行以下命令来验证是否安装了 readline：

```
rvm use 1.9.3
find $MY_RUBY_HOME -name readline.so | xargs ldd 
```

根据我在回复中看到的，必须重复正确的流程：

```
rm -rf $rvm_path/usr/
rvm get head
rvm remove 1.9.3
rvm install 1.9.3 --debug 
```

如果您仍然无法使其正常工作 - 请确保重复上述步骤，不要添加额外的标志或开关，确保清理`/etc/rvmrc`并清除`~/.rvmrc`额外的编译标志。如果一切都失败，则提供`rvm install 1.9.3 --debug`命令的输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T04:53:35.643

您可能只是用老式的 configure / make 方式重建 ruby​​ 可执行文件。不应该花那么长时间。优点是它将利用它找到的依赖项，例如 readline。

# objective-c - 如何使用 Monotouch 设置IsAccessibilityElement？

> ID：13965493
> 
> 赞同：0
> 
> 时间：2012-12-20T04:48:29.860
> 
> 标签：objective-c, xamarin.ios

里面有个方法`setIsAccessibilityElement`。中的等价物是什么？`UIView``Obj-C``Monotouch`

除了 之外，我没有看到任何类似`AccessibilityDecrement/AccessibilityIncrement`的方法/属性，但这可能有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:02:10.537

您可以使用此[UIResponder 助手类](https://gist.github.com/3599186)来访问 isAccessibilityElement。

# java - 如何安装 ActiveAndroid 以与 Eclipse 一起使用？

> ID：13965494
> 
> 赞同：2
> 
> 时间：2012-12-20T04:48:33.560
> 
> 标签：java, android, eclipse, activeandroid

我正在同时学习 Android 和 Java，所以有时我会迷恋 Java 方面的事情。

我正在尝试使用 ORM 库 ActiveAndroid，但我下载的存档不包含 .jar 文件，仅包含 libs 文件夹和 src 文件夹。如何将其导入/安装/合并到我的 Eclipse Android 项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:58:23.823

你有几个选择：

*   从源代码编译jar，将库添加到构建路径
*   或者，从这里下载一个 jar： [https ://github.com/pardom/ActiveAndroid/downloads](https://github.com/pardom/ActiveAndroid/downloads)

以下资源可能会对您有所帮助

*   [https://github.com/pardom/ActiveAndroid/issues/5](https://github.com/pardom/ActiveAndroid/issues/5)
*   [https://www.activeandroid.com/](https://www.activeandroid.com/)
*   [https://github.com/pardom/ActiveAndroid/wiki/Getting-started](https://github.com/pardom/ActiveAndroid/wiki/Getting-started)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T22:01:06.080

`ant`我通过在 ActiveAndroid 根目录中运行来构建 jar 。ActiveAndroid.jar 然后位于该`dist`目录中。（build.xml 文件是一个 ant 构建脚本）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-25T11:00:16.863

更简单的解决方案对我有用（只有“普通”Eclipse，Indigo SR2）：

1.  文件->新建->项目...
2.  来自现有 Ant Buildfile 的 Java 项目
3.  选择 build.xml

# c# - 如何找到结束标记行号？

> ID：13965498
> 
> 赞同：0
> 
> 时间：2012-12-20T04:49:01.617
> 
> 标签：c#, html

我需要帮助才能找到结束标记行号。例如：

```
<tr>
  <td>...</td>
  <td>...</td>
</tr>

<tr>
  <td>...</td>
  <td>...</td>

<tr>
  <td>...</td>
  <td>...</td>
</tr> 
```

在上述行中，第一个`<tr>`标签相应地打开和关闭。在第二个`<tr>`中，它打开但未关闭。没有关闭`<tr>`它打开第三个`<tr>`。在这种情况下，我需要将行号显示为错误。我可以找到行号打开标记。我需要找到结束标记行号。我在 WPF C# 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:05:01.210

You need to put them on "stack" while parsing. Push to your stack when having an open tag, remove in reverse order when a closing tag happen. If close-tag <> open tag type you have an error.

Count lines while parsing and when a mismatch occur print the line-number you're at. Count line numbers by counting line-feeds (char 10 for Windows/Linux, use 13 for Mac).

Compare closing tags with `"/" + opening-tag`

Stack (pesudo-representation to show the "mechanics"):

```
Parser res   Current stack
----------   -------------
Found TR  -> TR
Found TD  -> TR-TD
Found /TD -> TR (it matched last tag on stack) 
Found TD  -> TR-TD
Found /TD -> TR (it matched last tag on stack) 
Found /TR ->  (it matched last tag on stack - stack is empty, all ok) 

Found TR  -> TR
Found TD  -> TR-TD
Found /TD -> TR (it matched last tag on stack) 
Found TD  -> TR-TD
Found /TD -> TR (it matched last tag on stack) 
Found TR  -> TR (mismatch! /+TR <> TR as expected), print error + line number 
```

# c# - C#：如何解析来自设备 FM4100 的 AVL 数据包，将输出作为十六进制值

> ID：13965501
> 
> 赞同：-4
> 
> 时间：2012-12-20T04:49:05.740
> 
> 标签：c#, avl-tree

我的解析方法是否磨损了？

我得到了这样的 avl 数据格式：`08010013ba7695698059a9f580eb76a140280048b045021f0101c70005e`

```
Codec ID :08
Count:01
strTimeStamp:0013ba7695698
Longitude:59a9f580
Latitude :eb76a140
Altitude:280
Angle:048
Speed:045 
```

我将数据转换为十进制格式。但是我的经度和纬度是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:42:30.977

您的时间戳似乎缺少一些数据（它必须是 8 个字节）。

# pyqt - 如何在pyQT中保存来自QGraphicsScene的图形图像

> ID：13965505
> 
> 赞同：0
> 
> 时间：2012-12-20T04:49:36.133
> 
> 标签：pyqt, qgraphicsscene, qpixmap

如何`QGraphicsScene`在 pyQT中渲染图形图像

我有一个图像`QGraphicsScene`，它是由多个`QGraphicsPixMapItem`项目创建的。

我需要将其渲染为磁盘上的单个图像。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:25:01.620

您只需获取您希望捕获的组合边界矩形，然后将其渲染到`QPixmap`. 您可以`QPixmap`在那时保存。

未经测试，但应该符合...

```
import operator

items = get_target_items() # just get all the items you want
# combine all the scene rects for the items
# equiv:   totalRect = rect1 | rect2 | ...
totalRect = reduce(operator.or_, (i.sceneBoundingRect() for i in items))

pix = QtGui.QPixmap(totalRect.width(), totalRect.height())
painter = QtGui.QPainter(pix)
scene.render(painter, totalRect)
pix.save("capture.jpg", "JPG") 
```

# google-app-engine - 一个账户中多个实例的 GAE 计费聚合

> ID：13965510
> 
> 赞同：-1
> 
> 时间：2012-12-20T04:50:05.770
> 
> 标签：google-app-engine, android-pay

我有一个简单的问题。

现在我正在尝试为一个帐户的 10 个 GAE 实例付款，但我不确定是否有办法每周只收到这些实例的一张收据。

谢谢你的好心

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:56:37.383

这是不可能的，关于它有一个[未解决](http://code.google.com/p/googleappengine/issues/detail?id=1999&q=billing&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)的问题。

# c - Windows 控制台像素

> ID：13965511
> 
> 赞同：0
> 
> 时间：2012-12-20T04:50:13.010
> 
> 标签：c, windows, console, pixel

我见过运行 Windows 控制台并在控制台窗口中绘制彩色像素以生成低级图形界面的旧程序。[1] 如何将像素打印到控制台而不是文本，以及 [2] 如何根据控制台上的像素获取鼠标位置？[3] 另外，如何确定是否按下了特定键？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:56:06.843

似乎您想要在 Windows 系统上的“ncurses”（Linux 上的一个库）中使用一些功能。你可以看看这个： http: [//pdcurses.sourceforge.net/](http://pdcurses.sourceforge.net/)

# linux - Linux下COM口截取和修改数据

> ID：13965513
> 
> 赞同：2
> 
> 时间：2012-12-20T04:50:17.893
> 
> 标签：linux, printing, serial-port, serial-communication, receipt

我有一台收据打印机连接到我的 COM 端口，每次有人打印到我的收据打印机时，我都想在从 COM 端口输出的数据中添加一些额外的数据。我在 Linux 上。如何拦截输出的数据并对其进行修改，以便将额外的数据添加到收据打印中？

我基本上想写一个程序，我们称之为A，它在我的正常程序之间工作，我们称之为B，它通过连接到com端口来打印收据和打印机。

我无法修改程序B，这就是为什么我想通过编写程序A来截取和更改输出的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:38:49.753

您可以尝试重命名`/dev/ttyS0`（或任何 COM 端口号），并创建一个新`/dev/ttyS0`的作为您程序的管道。然后你的程序将打开重命名的`/dev/ttyS0`.

# php - PHP 数组从 XML 文件中获取每个键/值

> ID：13965514
> 
> 赞同：2
> 
> 时间：2012-12-20T04:50:19.190
> 
> 标签：php, xml, simplexml

我只是试图在我从 XML 文件创建的数组中获取某个层的键/值而感到困惑。Print_R() 中的数组部分是：

```
SimpleXMLElement Object
(
Array
    (
        [category] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [settings] => maximum
                    )

                [cat_1] => 5.21
                [cat_2] => 5.05
                [cat_3] => 19.36
                [cat_4] => 21.97
                [cat_5] => 12.17
            )

    )

) 
```

我正在尝试获取“cat_1，cat_2，cat_3 ..”键，以便我可以将它们放在自己的数组中并将它们用于其他事情。我可以做 print_r($array) 并且它有效，但是当我尝试这样做时：

```
foreach ($array->category as $key => $val) {
$new_array[$key]= "$val"; 
```

}

$array->category 似乎没有针对该列表。XML 文件中的“SimpleXMLElement 对象”似乎妨碍了我通常使用数组的方式。有谁知道我怎样才能到达那些 cat_1 ets。清单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:57:44.973

请注意，这`$array->category`是一个对象，而不是数组，并且`cat_*`是*属性*。由于它们都是公共的，因此请使用：

```
$new_array = get_object_vars($array->category); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:08:01.090

您应该使用将 simpleXML 对象转换为数组

```
$array = json_decode(json_encode((array) $simplexmlob)), 1); 
```

然后`$array['category']`用于其他事情。无需使用 foreach 循环。

# objective-c - NSURLConnection 后查看控制器 Segue 延迟

> ID：13965518
> 
> 赞同：2
> 
> 时间：2012-12-20T04:50:46.503
> 
> 标签：objective-c, ios, xcode, nsurlconnection, segue

所以这是我的第一篇文章，在我的 Objective C 和 iOS 编程简史中，我发现这个网站提供了令人难以置信的信息。无论如何，我遇到了各种各样的问题。快速总结：我正在尝试编写一个登录表单，它使用调用一个自定义类，该类使用 NSURLConnection 访问网络服务器以进行身份​​验证。一旦身份验证完成，我正在使用协议和委托将委托回调用类以执行对主菜单视图控制器的 segue。

问题是我试图进入的菜单需要 6 到 75 秒才能显示。如果我删除 API 调用，它会立即加载。但是，我在整个过程中都在进行日志记录，并且一切似乎都以正常的速度进行。我什至在加载菜单视图控制器时记录，并且所有记录都正常进行。但是菜单的实际显示是延迟的！

以下是一些代码细节：

视图控制器方法：

```
- (void) userLogin:(NSString *)userName password:(NSString *)password {
    NSLog(@"VC login method");
    api = [theAPI getSelf];
    [api setDelegate:self];
    [api userLogin:userName password:password];
}

- (void) userLoginDone:(BOOL)successful {
    [self performSegueWithIdentifier:@"sgLoginToMainMenu" sender:self];
    NSLog(@"Login Done");
} 
```

API方法：

```
- (void) userLogin:(NSString *)userName password:(NSString *)password {
    NSURL *url = [NSURL URLWithString:(NSString *) [API_PATH stringByAppendingString:@"test.html"]];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
        NSDictionary *json = [[JSON new] parseJSON:data];

        self.usrID = [json objectForKey:@"usrID"];
        self.sessionID = [json objectForKey:@"sessionID"];
        self.userName = [json objectForKey:@"Username"];

        NSLog(@"Username: %@", [json objectForKey:@"Username"]);

        [[self delegate] userLoginDone:YES];
    }];
} 
```

所有 NSLog 都在正常的时间跨度（几毫秒）内执行。然而主菜单视图控制器需要很长时间才能出现！我对 iOS 编程很陌生，所以我希望我只是忽略了谷歌搜索无法解决的问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:02:49.510

您需要在主线程上更新 UI，但 userLoginDone: 在 NSOperationQueue 上被调用，它创建自己的单独线程。这可以解释显示的延迟。您是否尝试过使用 [NSOperationQueue mainQueue] （返回与主线程关联的队列）来传递给 sendAsynchronousRequest: 代替？

# c - Libapr .so 文件没有源代码的功能

> ID：13965527
> 
> 赞同：0
> 
> 时间：2012-12-20T04:51:40.520
> 
> 标签：c, epoll, shared-libraries, apr

我编译了 libAPR 源代码并成功运行了 Apache 提供的所有测试。

但是，当我将程序链接到 libapr.so 时，不存在相同的功能。

例如，**apr_pollset_add**原语不起作用。它总是返回 1（当它应该返回 0 时）并且不起作用（在源测试中就像一个魅力）。

我修改了与该原语相关的所有 APRlib 代码，因此它只会返回 -1。当我运行 Apache 测试时，它们呈现出预期的行为（返回 -1），但是当我再次从 .so 库调用原语时，它总是返回 1。

我几乎可以肯定，lib 对该函数只有一个包装器，它总是返回 1。

关于发生了什么的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:29:18.423

所以最后我发现了问题。

我的系统中已经安装了 libapr，所以每当我使用 -libapr-1 时，它都会将我的程序链接到之前安装的 libapr 版本。这就是它没有响应我的代码修改的原因。

关于**apr_pollset_add** primitve，它运行良好。当 apr 调用**poll_ctl**时，系统会返回错误，因为我添加了一个不被接受的常规文件描述符。

# iphone - CollectionView iOS 6 问题

> ID：13965529
> 
> 赞同：6
> 
> 时间：2012-12-20T04:52:04.967
> 
> 标签：iphone, objective-c, xcode, ios6

我正在开发一个项目，它在网络数据的集合视图中显示了许多图像。

我已经实现了 WaterFlowLayout 集合视图 开源 Github 项目 [https://github.com/aceisScope/WaterflowView](https://github.com/aceisScope/WaterflowView)

图像动态分配给集合视图图像数组。

如果集合视图源的图像数量为 3 或更多，则工作正常。

但是，如果要显示的图像计数小于 3，则它不会显示在集合视图中。在演示项目中，它的发生也是一样的。

我还实现了拉刷新的另一件事，但在单页中可以显示近 12 个图像，如果图像计数超过 13 个，则集合默认滚动工作正常，我能够拉刷新，但如果图像计数较少比 12 比我无法访问拉刷新集合视图。

如果 numberOfItemsInSection 是 3 并且 numberOfColumnsInFlowLayout 也是 3 意味着它完成一整行而不是代码可以正常工作。

```
 - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
    {
        return 3;
    }

#pragma mark- UICollectionViewDatasourceFlowLayout
    - (NSInteger)numberOfColumnsInFlowLayout:(WaterFlowLayout*)flowlayout
    {
        return 3;
    } 
```

但是如果 numberOfItemsInSection 是 2 并且 numberOfColumnsInFlowLayout 也是 3 意味着它没有完成一整行我无法显示图像。

```
 - (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
    {
        return 2;
    }

#pragma mark- UICollectionViewDatasourceFlowLayout
    - (NSInteger)numberOfColumnsInFlowLayout:(WaterFlowLayout*)flowlayout
    {
        return 3;
    } 
```

即使排序视图默认滚动未激活，任何人也可以提出一些技巧来启用拉动刷新..

提前致谢 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:35:41.253

您可能会考虑跳过 WaterFlowLayout 存储库，而只使用 UICollectionView ：

1.  要开始使用 UICollectionView，请查看 Bryan Hansen 的[这篇优秀教程](http://skeuo.com/uicollectionview-custom-layout-tutorial)。它会让你熟悉 UICollectionView。

2.  如果您使用的是 UICollectionView，您可以在您`UICollectionViewController`的`viewDidLoad`方法中添加一个下拉刷新控件，只需几行代码：

    ```
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(startRefresh:) forControlEvents:UIControlEventValueChanged];
    [self.collectionView addSubview:refreshControl]; 
    ```

3.  要实现 Pinterest 风格的瀑布布局，您可以使用这个 UICollectionViewLayout github 存储库，或任何数量的其他存储库：[https ://github.com/jayslu/JSPintDemo](https://github.com/jayslu/JSPintDemo)

# jquery - 隐藏和显示 - slideToggle 与淡入

> ID：13965530
> 
> 赞同：2
> 
> 时间：2012-12-20T04:52:04.973
> 
> 标签：jquery, fadein, fadeout, slidetoggle

我有一个包含三个链接的菜单，linkOne、LinkTwo、linkThree。

linkOne：我放了一个 slideToggle。它就像我想要的那样工作，当我按下它打开它时，当我再次按下它关闭时，这就是我所追求的。

```
$(document).ready(function(){

   $('.linkOne').click(function(e) {
    e.preventDefault();
    $('.linkTwo-content').hide();  
    $('.linkThree-content').hide();  
    $('.linkOne-content').slideToggle(500);      
    return false;  
  }); 
```

linkTwo：在这里我放了一个淡入淡出，它也适用于这个效果。

```
$('.linkTwo').click(function(e) {
    e.preventDefault();
    $('.linkThree-content').hide();      
    $('.linkOne-content').hide();      
    $('.linkTwo-content').fadeIn(500);         
    return false;
  }); 
```

linkThree：我在这里和在 linkTwo 中做的一样。

```
 $('.linkThree').click(function(e) {
    e.preventDefault();
    $('.linkOne-content').hide();      
    $('.linkTwo-content').hide();      
    $('.linkThree-content').fadeIn(500);         
    return false;
  });

}); 
```

我想要做的是将我在linkTwo 和linkThreer 中使用的FadeIn 效果添加到LinkOne，这样它就变成了一个slideToggle，当它打开时fadeIn 和当它关闭时fadeOuts 与slideToggle。然后我希望所有三个链接都这样做并具有此效果，slideToggleFadeIn。

我不希望您对代码进行太多更改，因为我想了解其中发生了什么。因此，如果您可以提供帮助，请不要只是为其添加新代码。

这是小提琴[http://jsfiddle.net/lamberta/Pkdj5/](http://jsfiddle.net/lamberta/Pkdj5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:42:00.627

试试这个[http://jsfiddle.net/Pkdj5/11/](http://jsfiddle.net/Pkdj5/11/)

JavaScript：

```
if(!$('.linkOne-content').is(":visible")){
     $('.linkOne-content').fadeIn(500);
     $('.linkOne-content p').slideDown(500);
}
else{
     $('.linkOne-content').fadeOut(500);
     $('.linkOne-content p').slideUp(500);
} 
```

CSS：

```
p {display: block} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:55:38.457

我会更新你的代码，所以没有那么多冗余；使用绑定到每个适当显示/隐藏的链接的函数应该很容易。我让你从这里开始：

[http://jsfiddle.net/Pkdj5/2/](http://jsfiddle.net/Pkdj5/2/)

`.slideToggle`更改为`.css('opacity' 0).animate({'opacity': 1, 'height', 'show'})`以创建同时淡入淡出/滑动效果。`'toggle'`如果您只想使用一个，也可以使用不透明度和高度的值`animate`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T21:12:24.150

我知道这很旧，但是在您的元素上单击事件的事件侦听器回调中，您可以编写：

```
$('.yourels').on('click', function(e){
    $(e.target).slideToggle({
        progress : function(ani, now){
            $(e.target).css('opacity', now);
        }
    });
}) 
```

整洁的部分是 now 道具从 0 变为 1 就像不透明度一样

# ruby-on-rails - 设置最大 Actionmailer 发送速率

> ID：13965535
> 
> 赞同：0
> 
> 时间：2012-12-20T04:53:02.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer, amazon-ses

有没有一种简单的方法来设置 Actionmailer 发送电子邮件的最大速率？我正在使用 Amazon SES，它会丢弃每秒超过 5 条发送的消息，我想避免碰到这种情况......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T04:59:35.840

对此没有简单的解决方案。当你调用一个`deliver`方法时，ActionMailer 会同步发送消息：它立即发送消息，调用者等待它完成发送。

因此，由于 ActionMailer 没有在后台运行以处理消息队列，因此它无法真正跟踪其速率或推迟传递。

但！看起来[Rails 4 将支持异步 ActionMailer](http://reefpoints.dockyard.com/ruby/2012/06/26/rails-4-sneak-peek-async-actionmailer.html)，基于今天可用的[resque-mailer gem（有一些额外的设置）。](https://github.com/zapnap/resque_mailer)从那里，您可能可以查看限制 Resque 处理排队作业的速率。

# amazon-web-services - AWS IP 地址 - 如果 EC2 实例位于 ELB 后面，是否需要它们？

> ID：13965543
> 
> 赞同：2
> 
> 时间：2012-12-20T04:53:54.967
> 
> 标签：amazon-web-services

我有一个由 1 个 ELB（负载均衡器）和 2 个 EC2 实例（Web 服务器）组成的 AWS 配置。这 2 个 EC2 实例当前有一个与每个实例关联的 IP (EIP)。如果 Web 服务器位于 ELB 后面，我真的需要这些 IP 地址吗？对于 SSH 连接（Putty 等），我需要 IP 地址吗？我只是感兴趣，因为我可以看到删除 IP 地址的好处 - 可以更轻松地进行水平扩展等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:20:35.847

实际上，您的实例不需要弹性 IP 地址。我建议您为您的应用程序配置[Auto Scaling](http://aws.amazon.com/autoscaling/)，以获得持久性、稳定性和更快的响应时间。

实例的数量将是动态的，具体取决于 CPU 利用率。这就是你的做法：[使用 Amazon Web Services (AWS) 自动扩展您的网站 – 第 2 部分](http://www.cardinalpath.com/autoscaling-your-website-with-amazon-web-services-part-2/)

至于对您的实例进行 SSH 连接，您必须首先弄清楚您的实例的公共 DNS，但使用 EC2 API 工具或 AWS 控制台很容易完成。

# android - 使用 GCM 时出现 IOException

> ID：13965545
> 
> 赞同：0
> 
> 时间：2012-12-20T04:53:59.103
> 
> 标签：android, google-cloud-messaging

我正在尝试向 Android 设备发送推送通知，但在以下情况下出现错误。

```
String msg = "push message";
String to1 = "123456";
String from1 = "098776655"; 
```

这工作正常：

```
Message message = new Message.Builder()
    .collapseKey("1")
    .addData("message", msg)
    .addData("to1", to1)
    .addData("to2", to1)
    .build(); 
```

但是使用以下内容时出现错误：

```
Message message = new Message.Builder()
    .collapseKey("1")
    .addData("message", msg)
    .addData("to", to1)
    .addData("from", from1)
    .build(); 
```

我什至也使用了其他变量来代替`from1`，但仍然出现错误：

```
java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send 
```

堆栈跟踪：

```
java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
  [run]     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
  [run]     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
  [run]     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
  [run]     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
  [run]     at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1298)
  [run]     at java.security.AccessController.doPrivileged(Native Method)
  [run]     at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1292)
  [run]     at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:948)
  [run]     at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
  [run]     at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:363)
  [run]     at com.google.android.gcm.server.Sender.send(Sender.java:261)
  [run]     at example.HelloServlet.sendToSingleDevice(HelloServlet.java:173)
  [run]     at example.HelloServlet.doGet(HelloServlet.java:36)
  [run]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
  [run]     at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
  [run]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  [run]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
  [run]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
  [run]     at java.lang.reflect.Method.invoke(Method.java:597)
  [run]     at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
  [run]     at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
  [run]     at java.security.AccessController.doPrivileged(Native Method)
  [run]     at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
  [run]     at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
  [run]     at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163)
  [run]     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:283)
  [run]     at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:56)
  [run]     at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:189)
  [run]     at java.security.AccessController.doPrivileged(Native Method)
  [run]     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:185)
  [run]     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
  [run]     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
  [run]     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
  [run]     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
  [run]     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
  [run]     at net.stax.appserver.webapp.RequestMonitorValve.invoke(RequestMonitorValve.java:35)
  [run]     at net.stax.appserver.webapp.RequestSetupValve.invoke(RequestSetupValve.java:31)
  [run]     at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:647)
  [run]     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
  [run]     at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
  [run]     at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
  [run]     at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
  [run]     at java.lang.Thread.run(Thread.java:619)
  [run] Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send
  [run]     at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1245)
  [run]     at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:373)
  [run]     at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:318)
  [run]     at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:362)
  [run]     ... 33 more
  [run] Exception Message : Server returned HTTP response code: 400 for URL: https://android.googleapis.com/gcm/send 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:13:51.173

这可能是你没有访问url的权限，或者你需要安装新的证书，服务器提供的证书，需要跟服务器端联系！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:35:53.883

谢谢，我已经修复了每个身体...

问题不是我只是改变

```
.addData("from", from1) 
```

到

```
.addData("from1", from1) 
```

它有效......

可能`from`是 GCM 服务器端的关键字...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T09:53:06.617

如果您查看从服务器获得的响应（响应正文），它会告诉您这`from`确实是一个保留字（因为`Intent`据我所知，它在 Android 的 s 中使用）。

# php - 使用 PDO 在两个数据库之间传输 mysql 表

> ID：13965551
> 
> 赞同：1
> 
> 时间：2012-12-20T04:54:31.070
> 
> 标签：php, mysql, pdo

在过去的一个小时里，我一直在研究这个问题，但还没有想出一个不涉及一些奇怪的导出/导入的简单解决方案。

我要做的就是打开与两个数据库的 PDO 连接，以便我可以在查询中使用它们。

Stack Overflow 中似乎对此存在分歧。

一个答案：

> ...如果您想在运行时同时使用这两个 PDO 对象，则需要为单独的连接创建两个 PDO 对象。

但其他人似乎建议您可以在查询中“使用”两个数据库：

```
$sql = "SELECT * FROM dbname.tablename";

$sql = "SELECT * FROM anotherdbname.anothertablename" 
```

除了在我的 PDO 连接函数中明确定义的数据库之外，我尝试在另一个数据库上执行 SELECT 命令。我懂了：

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1142 SELECT 命令拒绝用户 'dbusername'@'localhost' 用于表 'table_name'

我确保将用户添加到两个数据库并授予完全权限。

是否可以在同一连接中使用两个数据库的查询？还是您必须设置两个不同的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:57:30.357

“与两个数据库的 PDO 连接”（单数形式）是用词不当，因为根据定义，PDO 连接是到单个数据存储的单个连接。如果需要两个连接，则需要实例化两个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:02:25.843

事实证明，使用单个 PDO 连接可以*跨两个数据库执行查询。*即使在我的 PDO 启动中定义了**一个**数据库，我仍然可以访问另一个数据库。

解决方案是使两个数据库具有相同的凭据。

```
function db_connect(){
$host = 'localhost';
$port = 3306; // This is the default port for MySQL
$database = 'db1';
$username = 'user';
$password = 'pass';

$dsn = "mysql:host=$host;port=$port;dbname=$database";

$db = new PDO($dsn, $username, $password);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
return $db;
}

$db=db_connect();
$statement = $db->prepare("SELECT * FROM db2.table LIMIT 1");
$statement->execute();
$x=$statement->fetchObject();
var_dump($x); //A full row from the table was the output. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:00:05.783

> 我确保将用户添加到两个数据库并授予完全权限。

错误信息非常明确。读到这里，我不会那么肯定。

无论如何，要回答标题问题：为什么不从控制台运行这个简单的查询呢？

```
INSERT INTO db2.table SELECT * FROM db1.table; 
```

它不仅会传输您的数据，还会证明您的用户是否拥有足够的权限。
如果不是 - 你必须真正确保这一点。

# django - 在 pip 安装 uWSGI 后没有 /etc/uwsgi/ 目录 - 我如何使用启用应用程序？

> ID：13965555
> 
> 赞同：10
> 
> 时间：2012-12-20T04:54:48.130
> 
> 标签：django, ubuntu, pip, uwsgi, apt-get

我一直在`apt-get install uwsgi`为我的 Django 应用程序安装 uWSGI。今天，我意识到我需要一个直到 uWSGI 1.1 才可用的功能，而 Ubuntu 12.04.1 在 1.0.x 之后没有任何东西，至少根据我的`apt-get install uwsgi=1.1`尝试。所以，我用：

```
pip install http://projects.unbit.it/downloads/uwsgi-lts.tar.gz 
```

这样做后，我收到一条消息，说明使用`/usr/local/bin/uwsgi`启动程序。在从源代码编译方面，我不是专家，但我的理解是，当您这样做时，`/etc/`目录中的任何内容都不会改变。它是否正确？如果没有，为什么我没有`/etc/uwsgi/`目录，更具体地说，没有`/etc/uwsgi/apps-enabled/`目录？从源代码安装uWSGI时我应该简单地创建目录吗？考虑到文档中没有提到这一点（我不想要一些意外工作的东西等），我对此犹豫不决。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-12T11:53:08.500

很抱歉这个很晚的回复，但也许这会对将来找到这个答案的人有所帮助：

要获取`/etc/uwsgi`等，您需要从 Debian 或 Ubuntu（无论您使用什么）通过运行`aptitutde install uwsgi`. 然而，默认情况下这可能会安装一个古老版本的 uwsgi！`/usr/bin/uwsgi`以这种方式安装 uwsgi 时会放入 uwsgi 二进制文件。

要获得最新版本，*还可以*使用 pip using 安装 uwsgi `pip install -U uwsgi`，它（至少在我的 Ubuntu 系统上）将放入 uwsgi 二进制文件，`/usr/local/bin/uwsgi`然后执行以下操作：

`cd /usr/bin/`

`mv uwsgi uwsgi-old`

`ln -s /usr/local/bin/uwsgi uwsgi`

或者：编辑 uwsgi 初始化脚本并`DAEMON="/usr/bin/uwsgi"`适当地编辑。

瞧：“debianism”（完整的初始化脚本等）*和*最新的 uwsgi 二进制文件！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T10:00:07.247

/etc/uwsgi 和朋友是“debianism”。uWSGI 项目完全是系统管理员的口味，所以如果你喜欢 /etc/uwsgi 方法，只需创建目录，将配置文件放入其中并启动 uWSGI Emperor 来管理实例。

# html - 添加指向 iframe 的链接

> ID：13965560
> 
> 赞同：3
> 
> 时间：2012-12-20T04:55:32.227
> 
> 标签：html, iframe, hyperlink

如何添加指向外部 iframe 的链接？

```
<iframe id='abcdef' name='abcdef' src='http://externaldomain.com?id=99' framespacing='0' frameborder='no' scrolling='no' width='960' height='60'>
    <a href='http://anotherexternaldomain.com' target='_blank'>
        <img src='http://externaldomain.com?pic=99' border='0' alt='' />
    </a>
</iframe> 
```

这是放置在我的网站内的外部广告。我想添加一个指向此 iframe 的链接，以跟踪展示次数和点击次数

有没有办法与 jQuery 一起使用？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:57:32.200

你不能。

的`iframe`内容就是它`src`告诉它的任何内容。您也许可以代理广告并跟踪点击次数，但通常广告提供商会为您跟踪点击次数。

边注：

> 也许用 jQuery？

没有 jQuery 能做的事情是纯 JavaScript 做不到的。如果 JS 做不到，jQuery 也做不到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T08:23:41.317

无论如何，我已经想到了一种添加链接的方法。我正在使用具有绝对位置的覆盖 div 来完全覆盖 iframe，因此 iframe 位于 div 后面。感谢任何帮助过我的人:)

# ruby-on-rails - Rails 3：如何比较日期时间。

> ID：13965563
> 
> 赞同：0
> 
> 时间：2012-12-20T04:56:06.323
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

在我的 Rails 应用程序中，我有一个用户模型、部门模型、组模型和一个注册模型。用户模型有基本的用户信息，

用户模型：

```
id , name
has_and_belongs_to_many :departments , :groups 
```

部门型号：

```
id,name
has_and_belongs_to_many :users
has_many :registers 
```

团体模型：

```
id,name
has_and_belongs_to_many :users
has_many :registers 
```

注册型号：

```
date ,department_id , group_id , one , two , three
belongs_to :department ,:group 
```

注册模式中的“一”、“二”、“三”是时间段，比如：9-12、12-3、3-6。每天每个用户都要标记考勤，这样他们的考勤就必须对时间进行标记寄存器表中的插槽。如何使用时隙根据当前时间标记出勤率。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:29:08.263

试试这个

```
current_time = Time.now
if (9..12).include?(current_time.hour)
# 9-12
elsif (12..15).include?(current_time.hour)
# 12-3
elsif (15..18).include?(current_time.hour)
# 3-6
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:53:42.370

你可能需要做

```
current_time = Time.now
if (9..11).include?(current_time.hour)
# Do A
elsif (12..14).include?(current_time.hour)
# Do B
elsif (15..18).include?(current_time.hour)
# Do C
end 
```

（或者）

```
current_time = Time.now
if (9...12).include?(current_time.hour)
# Do A
elsif (12...15).include?(current_time.hour)
# Do B
elsif (15...18).include?(current_time.hour)
# Do C
end
# I think of the extra "." as 'eating' the last value so you don't have it. 
```

处理重叠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:20:38.063

可能会考虑创建一个位图。一个 32 位整数是轻量级的，给你 0-24，每小时一个。编写一些可以比较、设置、...小时范围的函数。

# telerik - 如何在 Telerik rad 编辑器中禁用 xhtml 验证？

> ID：13965565
> 
> 赞同：1
> 
> 时间：2012-12-20T04:56:13.017
> 
> 标签：telerik

如何在 Telerik rad 编辑器中禁用 XHTML 验证？

我知道为了禁用脚本，我使用了以下内容：

在`page_load`我有以下代码：

```
radEditor.AllowScripts = true; 
radEditor.DisableFilter(Telerik.Web.UI.EditorFilters.RemoveScripts); 
```

但是如何禁用 XHTML 验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T08:59:59.047

您可以使用以下代码禁用 XHTML 验证：

```
radEditor.DisableFilter(Telerik.Web.UI.EditorFilters.ConvertToXhtml); 
```

# c# - 是否可以在 asp.net 的详细信息视图中隐藏列名？

> ID：13965577
> 
> 赞同：-3
> 
> 时间：2012-12-20T04:57:28.010
> 
> 标签：c#, asp.net, sql-server

我在 C#.net 中为一个简单的网站创建了一个用户个人资料页面。我正在使用 detailsview 来显示用户信息，但我想隐藏存储在数据库中的列名，而不是我想将它们写在 html 表中。详细信息视图提供两列，第一列用于数据库中的列名，第二列用于这些列的值。我想删除第一个并手动定义它。有什么方法可以隐藏所有列名并仅显示详细信息视图的值，如果没有，请建议我也检索个人资料页面和编辑功能的信息？

详情查看代码：

```
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" 
                BorderWidth="0px" DataSourceID="UserDetails" Height="287px" 
                style="text-align: left" Width="394px">
                <Fields>
                    <asp:BoundField DataField="Login" HeaderText="Login" SortExpression="Login" />
                    <asp:BoundField DataField="Uname" HeaderText="Uname" SortExpression="Uname" />
                    <asp:BoundField DataField="Email" HeaderText="Email" SortExpression="Email" />
                    <asp:BoundField DataField="DOB" HeaderText="DOB" SortExpression="DOB" />
                    <asp:BoundField DataField="Hometown" HeaderText="Hometown" 
                        SortExpression="Hometown" />
                    <asp:BoundField DataField="Interests" HeaderText="Interests" 
                        SortExpression="Interests" />
                </Fields>
            </asp:DetailsView> 
```

数据库代码：

```
 <asp:SqlDataSource ID="UserDetails" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConString %>" 
                SelectCommand="SELECT [Login], [Uname], [Email], [DOB], [Hometown], [Interests] FROM [Profile] WHERE ([Login] LIKE '%' + @Login + '%')">
                <SelectParameters>
                    <asp:SessionParameter Name="Login" SessionField="usr" Type="String" />
                </SelectParameters>
            </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:12:07.987

您可以在不使用 html 表格的情况下隐藏或重命名详细视图的列，请查看此链接

[http://www.devmanuals.com/tutorials/ms/aspdotnet/detailsview.html](http://www.devmanuals.com/tutorials/ms/aspdotnet/detailsview.html)

# javascript - 如何让子窗口保持在顶部？

> ID：13965584
> 
> 赞同：11
> 
> 时间：2012-12-20T04:58:04.277
> 
> 标签：javascript, firefox, always-on-top

我正在使用`window.open`从父窗口打开一个子窗口。我希望子窗口保持在顶部，以便用户在父窗口中进行输入时可以参考它。这可以做到吗？我目前正在使用 Firefox，但如果它适用于所有浏览器，那将是一个额外的好处。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:09:52.787

这个弹出层也不错：[DOMWindowDemo](http://swip.codylindley.com/DOMWindowDemo.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T05:46:50.053

如何使用[弹出 div](http://jqueryui.com/dialog/#default)而不是打开新窗口？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:14:58.913

是的，您可以通过在正文中为子窗口提供 onBlur="self.focus()" 的代码来执行此操作

```
 //Parent page...
    <html>
      <body>
      <a href="#" onClick="window.open('two.html','sdvwsv','width=200,height=200');">here...</a>
         </body>
     </html>

   //Child page...
         <html>
          <body onBlur="self.focus();">
               here...
              </body>
          </html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:18:18.483

```
<html>
    <script language="JavaScript">
    <!--
    function openWin(){
      var myBars = 'directories=no,location=no,menubar=no,status=no';

      myBars += ',titlebar=no,toolbar=no';
      var myOptions = 'scrollbars=no,width=400,height=200,resizeable=no,top=10, left=10,';
      var myFeatures = myBars + ',' + myOptions;
      var myReadme = 'This is a test.'

      var newWin = open('', 'myDoc', myFeatures);

      newWin.document.writeln('<form>');
      newWin.document.writeln('<table>');
      newWin.document.writeln('<tr valign=TOP><td>');
      newWin.document.writeln('<textarea cols=45 rows=7 wrap=SOFT>');
      newWin.document.writeln(myReadme + '</textarea>');
      newWin.document.writeln('</td></tr>');
      newWin.document.writeln('<tr><td>');
      newWin.document.writeln('<input type=BUTTON value="Close"');
      newWin.document.writeln(' onClick="window.close()">');
      newWin.document.writeln('</td></tr>');
      newWin.document.writeln('</table></form>');
      newWin.document.close();
      newWin.focus();
    }
    -->
    </script>
    <body>
    <form>
      <b>Click the following button to open a new window: </b>
      <input type=BUTTON value="Open" onClick='openWin()'>
    </form>
    </body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-13T18:40:07.583

我为此挣扎了很长时间。这似乎是FF中的一个错误，但我注意到在新窗口打开后，如果我单击它，它确实会获得焦点并到达顶部。但是在它上面调用 window.focus() 没有用，所以我猜它发生得太早了。

所以在新窗口代码中，在我添加的页面底部

```
setTimeout(function(){window.focus()},100); 
```

这感觉不像是扎实的练习，但如果你需要它来工作...... 100mSec 似乎是我系统上工作的最低速度。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-20T05:24:05.930

```
<html>
    <script language="JavaScript">
    <!--
    function openWin(){
      var myBars = 'directories=no,location=no,menubar=no,status=no';
      myBars += ',titlebar=no,toolbar=no';
      var myOptions = 'scrollbars=no,width=600,height=400,resizeable=no,top=10, left=10';
      var myFeatures = myBars + ',' + myOptions;
      var newWin = open('test.html', '', myFeatures);
      newWin.document.close();
      newWin.focus();
    }
    -->
    </script>
    <body>
    <form>
      <b>Click the following button to open a new window: </b>
      <input type=BUTTON value="Open" onClick='openWin()'>
    </form>
    </body>
</html>
    </html> 
```

# ios - 如何将 vCard 的 base 64 字符串添加到 vCalendar

> ID：13965585
> 
> 赞同：1
> 
> 时间：2012-12-20T04:58:06.533
> 
> 标签：ios, google-app-engine, contact, icalendar, vcf-vcard

根据以下文章： [iPhone：如何让 safari 识别 vcard？](https://stackoverflow.com/questions/1892373/iphone-how-to-get-safari-to-recognize-a-vcard) [http://mobicontact.info/iphone/download-contact-from-web-page/](http://mobicontact.info/iphone/download-contact-from-web-page/)

我生成了带有 vcf 文件 (vCard) 内容的 ics 文件 (vCalendar)。这意味着：我将 vcf 文件的内容编码为 Base64，然后将其放入 ics 文件中，在“X-APPLE-FILENAME=iphonecontact.vcf:”之后。但 iPod 无法识别 vCard 文件中的联系人。但是，如果我将 base 64 字符串（硬代码，不是由 vcf 文件的内容生成）放在 ics 文件中，那么一切正常，例如：http: [//iphone.mobicontact.info/](http://iphone.mobicontact.info/)（选择将联系人下载到 Iphone）请帮我解决这个问题。谢谢大家！请注意：我使用 Java 环境在 Google App Engine 上开发。

# jquery - 如何使用 jQuery/CSS 用动画剪刀 gif 制作逼真的切割效果？

> ID：13965588
> 
> 赞同：0
> 
> 时间：2012-12-20T04:58:24.353
> 
> 标签：jquery, animation, 3d, jquery-animate, animated-gif

我正在寻找制作剪刀剪出 div 动画的最佳/最佳方式？

[我在想，如果像这样http://img.photobucket.com/albums/v29/wormholes201/animated-scissors.gif](http://img.photobucket.com/albums/v29/wormholes201/animated-scissors.gif)这样的动画 .gif以某种方式在 div 的 4 个角上移动，拥有它会很酷在拐角处旋转和改变方向？或者可能是带有精灵的东西？还是带有 3D CSS 的东西？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:17:12.400

您可以使用`.offset()`,`.height()`和`.width()`来计算元素边框的度量，并使用这些度量来移动图像...

HTML：​</p>

```
<div id="paperTrail"></div>
<img src="http://img.photobucket.com/albums/v29/wormholes201/animated-scissors.gif" id="ToBeAnimated"> 
```

CSS：

```
#paperTrail{
    position:relative;
    left:100px;
    top:100px;
    height:200px;
    width:300px;
    border:1px black solid;
}
#ToBeAnimated{
 position:absolute;
    transition:all 1s;
}​ 
```

JS：

```
function animationLoop() {
    $("#ToBeAnimated").css({
        top: ($("#paperTrail").offset().top - parseInt($("#ToBeAnimated").height()) / 2),
        left: ($("#paperTrail").offset().left - parseInt($("#ToBeAnimated").width()) / 2)
    }).rotate(270);
    $("#ToBeAnimated").animate({
        top: $("#paperTrail").offset().top + $("#paperTrail").height() - $("#ToBeAnimated").height() / 2
    }, 2000, function() {
        $(this).animate({
            rotate: "180deg"
        }, function() {
            $("#ToBeAnimated").animate({
                left: $("#paperTrail").offset().left + $("#paperTrail").width() - $("#ToBeAnimated").width() / 2
            }, 2000, function() {
                $(this).animate({
                    rotate: "90deg"
                }, function() {
                    $("#ToBeAnimated").animate({
                        top: $("#paperTrail").offset().top - $("#ToBeAnimated").height() / 2
                    }, 2000, function() {
                        $(this).animate({
                            rotate: "0deg"
                        }, function() {
                            $("#ToBeAnimated").animate({
                                left: $("#ToBeAnimated").width() / 2
                            }, 2000, function() {
                                setTimeout(animationLoop, 2000);
                            });
                        });
                    });
                });

            });
        });
    });
}
animationLoop();​ 
```

JsFiddle：http: [//jsfiddle.net/djb3T/](http://jsfiddle.net/djb3T/)

# iphone - 插入行到 UITableView 崩溃

> ID：13965591
> 
> 赞同：2
> 
> 时间：2012-12-20T04:59:05.897
> 
> 标签：iphone, objective-c, ios, uitableview, insert

我正在开发一个应用程序，需要在后台加载一些数据，然后使用 UITableView 显示数据。这是一些代码，
在后台加载数据：

```
- (void)loadRelatedItems 
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    for (NSString *mediaType in allMediaTypes) 
    {
        [self performSelector:@selector(loadRelatedItems:) withObject:mediaType];
    }

    NSString *notificationName = [CommonFunction allRelatedItemsLoadedNotificationName];
    [[NSNotificationCenter defaultCenter] postNotificationName:notificationName object:self userInfo:nil];

    [pool release];
}

- (void)loadRelatedItems:(NSString *)mediaType 
{
   NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

   for (NSString *keyword in _keywords) 
   {
      NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"%@&mediaType=%@&keyword=%@", API, mediaType, keyword]];
      NSMutableArray *items = [CommonFunctions arrayFromURL:URL];

      if ([items count] == 0) continue;

      NSString *notificationName = [CommonFunction partialRelatedItemsLoadedNotificationName];
      NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:items, @"items", mediaType, @"mediaType", nil];
      [[NSNotificationCenter defaultCenter] postNotificationName:notificationName object:self userInfo:dic];   
   }

   [pool release];
} 
```

在 UITableView 中显示数据：

```
- (void)didFinishLoadPartialRelatedItems:(id)sender 
{
  NSDictionary *dic = [sender userInfo];
  NSString *mediaTypeString = [dic objectForKey:@"mediaType"];
  NSMutableArray *items = [dic objectForKey:@"items"];

  dispatch_async(dispatch_get_main_queue(), ^{

    if ([_relatedItems count] == 0) 
    {
        [_relatedItems setObject:items forKey:mediaTypeString];
        [_tableView reloadData];
    } 
    else 
    {
        NSMutableArray *mediaTypeItems = [_relatedItems objectForKey:mediaTypeString];

        if (mediaTypeItems) 
        { 
           // section exist
           NSInteger section =[[[_relatedItems allKeys] sortedArrayUsingSelector:@selector(mediaTypeCompare:)] indexOfObject:mediaTypeString];
           NSMutableArray *indexPaths = [NSMutableArray array];

           for (NSMutableDictionary *item in items) 
           {
               [mediaTypeItems addObject:item];
               NSInteger newRow = [mediaTypeItems indexOfObject:item];
               NSIndexPath *newIndexPath = [NSIndexPath indexPathForRow:newRow inSection:section];
               [indexPaths addObject:newIndexPath];
           }

           [_tableView beginUpdates];
           [_tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationNone];
           [_tableView endUpdates]; 
        }
        else 
        { 
            // new section

            [_relatedItems setObject:items forKey:mediaTypeString];
            NSInteger section =[[[_relatedItems allKeys] sortedArrayUsingSelector:@selector(mediaTypeCompare:)] indexOfObject:mediaTypeString];
            NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:section];
            [_tableView beginUpdates];
            [_tableView insertSections:indexSet withRowAnimation:UITableViewRowAnimationNone];
            [_tableView endUpdates];

        }

    }
});
}

#pragma mark -
#pragma mark Table Data Source Methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
if ([_relatedItems count] == 0) {
    return 1;
} else {

    return [_relatedItems count];
}
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{

NSArray *allTitles = [[_relatedItems allKeys] sortedArrayUsingSelector:@selector(mediaTypeCompare:)];
NSString *title = [allTitles objectAtIndex:section];
NSDictionary *allMediaTypeDisplayNames = [CommonFunction allMediaTypeDisplayNames];

return [allMediaTypeDisplayNames objectForKey:title];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if ([_relatedItems count] == 0) {
    return 0;
}
NSArray *allTitles = [[_relatedItems allKeys] sortedArrayUsingSelector:@selector(mediaTypeCompare:)];

NSString *title = [allTitles objectAtIndex:section];
NSInteger rowsCount = [[_relatedItems objectForKey:title] count];

return rowsCount;
} 
```

我很困惑它有时可以正常工作，但有时它会因消息而崩溃：

```
*** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-1912.3/UITableView.m:1030
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of sections.  The number of sections contained in the table view after the update (0) must be equal to the number of sections contained in the table view before the update (2), plus or minus the number of sections inserted or deleted (0 inserted, 0 deleted). 
```

有什么问题？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:12:07.910

请确保更新后，您的节数应等于更新前的节数。

根据您的代码：

部分的数量定义如下：

```
if ([_relatedItems count] == 0) {
    return 1;
} else {

    return [_relatedItems count];
} 
```

在这种情况下，您正在创建新部分，对吗？

```
else { // new section

            [_relatedItems setObject:items forKey:mediaTypeString];
            NSInteger section =[[[_relatedItems allKeys] sortedArrayUsingSelector:@selector(mediaTypeCompare:)] indexOfObject:mediaTypeString];
            NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:section];
            [_tableView beginUpdates];
            [_tableView insertSections:indexSet withRowAnimation:UITableViewRowAnimationNone];
            [_tableView endUpdates];

        } 
```

如果您正在创建新部分，那么您`[_relatedItems count]`正在增加。因此，请确保在插入后您的计数也应该相同。

正确的 ？

**尝试这个 ：**

```
if ([_relatedItems count] == 0) {
        return 1;
    } else {
        if([_relatedItems count]>previousCount)
            return [_relatedItems count];
        return previousCount;
    } 
```

当您对 then 进行任何更新时，`[_relatedItems];`也更新您的 previousCount .. 这将得到解决

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:11:27.323

我认为您的问题在于数据源中的行数方法只需做一件事，在您的 .h 文件中定义 int noOfRows 。使用 noOfRows 分配您的表视图数组计数。 `noOfRows=[yourtableArray count];` 然后从表视图 numberOfRowsInSection 方法返回 noOfRows。如果在表中插入行，则向 noOfRows 添加 1。制作 noOfRows——当你从表中删除行时你不会得到这个异常。根据你的要求更新你的数组。

# php - 动态网页小部件

> ID：13965601
> 
> 赞同：-2
> 
> 时间：2012-12-20T04:59:45.407
> 
> 标签：php, jquery, ajax, curl

我的供应商提供了一个小部件创建服务，我可以登录到他们的页面，设置搜索表单的初始值，单击保存按钮后，我可以在我的网站上复制并粘贴脚本代码以显示产品搜索结果小部件。

我正在考虑将此静态小部件更改为动态小部件。由于我的编程知识有限，专家能否告诉我是否可以远程登录https（使用cURL）并将搜索表单值设置为等于我页面上的值（每次我的页面内容更改时，它都会更改表单值），然后保存表格。因此，我粘贴在页面上的小部件脚本将始终刷新为新的搜索结果。

所以这个问题将涉及跨域、表单提交和服务器/浏览器通信。我知道一点 jQuery、PHP、Ajax、cURL，但到目前为止，我只是有一个想法，但不确定如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:04:55.453

我认为你想多了这个问题，但如果我错了，你可以纠正我......

听起来这些小部件是使用各种不同的值创建的，您可以从他们网站上的信息中自己编译这些值。通过使用这些值，您可能可以将它们直接插入到您第一次获得的代码中，而无需再次使用它们的服务。通过这种方式，您可以通过以您选择的任何时间间隔（每次、每小时、每天......无论如何）替换小部件中的值来构建它们提供的动态版本。

即使他们拥有的数据量很大，您也可以从一个子集开始作为概念证明。

我也会调查他们的服务，看看他们是否有 API。您描述的服务可能是他们的基本产品。可能有一个 API 可以提供您所需要的，甚至更多。

# ado.net - 实体数据模型向导不在 EDMX 文件中创建表

> ID：13965605
> 
> 赞同：6
> 
> 时间：2012-12-20T05:00:27.543
> 
> 标签：ado.net, entity-framework-4.1

我正在尝试通过使用带有 Adventureworks2012 DB 的向导创建 ADO.NET 实体数据模型来尝试数据库优先方法。

测试数据库连接有效，连接字符串被添加到 App.Config。

我正在选择除标记为 (dbo) `AWBuildVersion`、`DatabaseLog`和`ErrorLog`.

当向导完成时，`.edmx`文件为空，如果我在 XML 视图中查看文件，`EntityContainer`则为空。

创建模型后，它会在输出窗口中返回此错误：

> *由于以下异常，无法生成模型：'表 AdventureWorks2012.Production.Document 被关系引用，但找不到。*

我正在使用 VS 2010 和 .NET Framework 4.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:28:38.857

Entity Framework 似乎不知道如何处理在表字段上设置的 hierarchyid 等数据类型。我删除了实体列表的 Production.Document 表以​​包括解决我的问题。

另请注意，下面的此参考适用于来自 Code Plex SQL Sever 的带有 EF 版本 1.0 的 Adventureworks 2008R2，而我正在使用来自使用 EF 版本 4.4 的同一 CodePlex 站点的 Adventureworks 2012。

参考： http://msftdbprodsamples.codeplex.com/wikipage?title= [AW2008Details](http://msftdbprodsamples.codeplex.com/wikipage?title=AW2008Details)

注意：EF 1.0 兼容性问题

Entity Framework 团队希望我们让您知道 AdventureWorks2008 在它使用的 Katmai 功能方面有点领先。AdventureWorks2008 中的某些数据类型（例如hierarchyid 和geometry）在实体框架中不受支持。解决方法是尽可能从模型中排除 Production.Document 之类的表，因为目前在 Entity Framework 1.0 中不支持 hierarchyid 数据类型。不幸的是，从数据库更新模型的实体框架工具将拉入像 Production.Document 这样的表，即使它们在创建模型时被明确排除，因此目前不支持在 AdventureWorks2008R2 上使用该功能。我们期待后续版本的实体框架具有完整的 SQL Server 2008 类型支持。最后编辑于 5 月 25 日，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T04:48:01.557

*如果*你试图从这个例子中学习而不做任何有意义的事情，有一种方法可以解决这个问题。我删除了有问题的表的外键并将其删除，并且能够成功获取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T12:26:58.247

对于未创建的表（未转换为模型的表）的所有外键，取消选中 [允许 Nulls] 复选框（在表设计中）。

![在此处输入图像描述](../Images/dbbfc01ea059f80ec005f847d720e5ff.png)

然后，您可以通过执行以下步骤更新您的模型以检索这些表：-

第 1 步 - 右键单击​​ .EDMX 文件设计中的某个位置（即 Model1.EDMX [Diagram1]。第 2 步 - 然后从上下文菜单中选择/从数据库中更新模型...。第 3 步 - 然后选择“添加”第 4 步- 然后展开“表格”复选框并选择您想要的表格（表格不是第一次创建的）。第 5 步 - 然后单击“完成”按钮。第 6 步 - 保存解决方案，希望一切都会好起来。

![在此处输入图像描述](../Images/80b64e67b0a1104d6c2590eca705822b.png)

注意：我使用的是 Visual Studio 2013。

祝你好运。

# hadoop - 无法使用亚马逊 ec2 从 hbase 访问数据

> ID：13965606
> 
> 赞同：0
> 
> 时间：2012-12-20T05:00:32.550
> 
> 标签：hadoop, amazon-ec2, tomcat7, hbase

我有一台单节点 hadoop 机器，其中 hbase 在亚马逊 ec2 实例中运行。由于某种原因，服务器重新启动。所以我需要再次启动hadoop和hbase。然后它工作正常，但无法通过网络服务访问 hbase 中的旧数据。

虽然我使用 shell 命令它工作正常，但我正在获取数据。

所以我在我的本地服务器机器上创建了这个场景，但它工作正常。

版本详情如下。亚马逊 ec2 中型实例中的 hadoop-0.20.2 hbase-0.90.5 apache-tomcat-7.0.30

我使用带有 Orm-hbase 的 restful web 服务来访问数据。

# excel - 如何加载每个用户窗体而无需单独调用 .Show？

> ID：13965608
> 
> 赞同：3
> 
> 时间：2012-12-20T05:00:42.223
> 
> 标签：excel, userform, vba

我想弄清楚如何在无需调用`Userform1.Show` `UserForm2.Show`等的情况下加载每个 UserForm。这是受到对此答案的评论的启发：[Excel VBA UserForm_Initialize() in Module](https://stackoverflow.com/a/13964853/1316573)。

我在几个地方发现了这种方法：

```
Sub OpenAllUserForms()
    Dim uf As UserForm
    For Each uf In UserForms
        uf.Show
    Next
End Sub 
```

但是，无论有多少用户窗体附加到工作簿，都不会显示。当我单步执行代码时，我确定 UserForms 集合是空的！

如何加载每个用户表单而不必显式显示每个用户表单？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T05:00:42.223

根据这个页面：[UserForm Object](http://msdn.microsoft.com/en-us/library/office/gg264663.aspx)

> UserForms 集合是一个集合，其元素代表应用程序中每个加载的 UserForm。

由于您的用户表单未加载，因此它们不会出现在集合中。这意味着您需要以不同的方式加载表单。为了获得每个用户窗体的名称，您需要允许代码访问 Visual Basic 项目的权限。否则，您需要提供用户表单的名称。

以下将打开当前 VBProject 中的每个 UserForm。

```
Sub OpenAllUserForms()
    Dim VBComp As Object
    For Each VBComp In Application.VBE.ActiveVBProject.VBComponents
        If VBComp.Type = 3 Then '3 = vbext_ct_MSForm
            VBA.UserForms.Add(VBComp.Name).Show
        End If
    Next
End Sub 
```

这是因为每个用户窗体都在 VBProject 中作为 VBComponent 列出。一旦代码确定了哪些组件是用户窗体，它会将用户窗体添加到集合中并显示它。如果您省略该表单，`.Show`该表单仍将运行 Initialize 事件，但随后会立即超出范围并消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:19:04.367

我已经通过应用下面的行解决了现有的问题

在模块中：
**UserForms(Name).Userform_Initialize**

说明：
**这将初始化当前的用户窗体。**

示例：
**如果结果 = True Then
UserForms(Name).Userform_Initialize**

这意味着当结果为真时，表单将变为初始状态。

PS请原谅我的英语不好

# python - BeautifulSoup HTMLParseError。这有什么问题？

> ID：13965612
> 
> 赞同：4
> 
> 时间：2012-12-20T05:00:55.787
> 
> 标签：python, beautifulsoup

这是我的代码：

```
from bs4 import BeautifulSoup as BS
import urllib2
url = "http://services.runescape.com/m=news/recruit-a-friend-for-free-membership-and-xp"
res = urllib2.urlopen(url)
soup = BS(res.read())
other_content = soup.find_all('div',{'class':'Content'})[0]
print other_content 
```

然而出现了一个错误：

```
/Library/Python/2.7/site-packages/bs4/builder/_htmlparser.py:149: RuntimeWarning: Python's built-in HTMLParser cannot parse the given document. This is not a bug in Beautiful Soup. The best solution is to install an external parser (lxml or html5lib), and use Beautiful Soup with that parser. See http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser for help.
  "Python's built-in HTMLParser cannot parse the given document. This is not a bug in Beautiful Soup. The best solution is to install an external parser (lxml or html5lib), and use Beautiful Soup with that parser. See http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser for help."))
Traceback (most recent call last):
  File "web.py", line 5, in <module>
    soup = BS(res.read())
  File "/Library/Python/2.7/site-packages/bs4/__init__.py", line 172, in __init__
    self._feed()
  File "/Library/Python/2.7/site-packages/bs4/__init__.py", line 185, in _feed
    self.builder.feed(self.markup)
  File "/Library/Python/2.7/site-packages/bs4/builder/_htmlparser.py", line 150, in feed
    raise e 
```

我已经让另外两个人使用了这段代码，它对他们来说非常好。为什么它不适合我？我已经安装了bs4...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T05:19:03.973

根据错误消息，您可能需要做的一件事是 install `lxml`，它将为 BeautifulSoup 使用提供更强大的解析引擎。请参阅文档中的[此](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-a-parser)部分以获得更好的概述，但它适用于其他两个人的可能原因是他们安装了`lxml`（或另一个正确处理 HTML 的解析器），这意味着 BeautifulSoup 使用它而不是标准的内置（**旁注**：您的示例在已安装的系统上也适用于我`lxml`，但在没有它的系统上失败）。

另外，请参阅文档中的此注释：

> 如果您使用的是早于 2.7.3 的 Python 2 版本，或早于 3.2.2 的 Python 3 版本，则必须安装 lxml 或 html5lib——Python 的内置 HTML 解析器在旧版本中不是很好版本。

我建议运行`sudo apt-get install python-lxml`并查看问题是否仍然存在。

# java - 在 Axis2 中使用非合并解析器

> ID：13965613
> 
> 赞同：0
> 
> 时间：2012-12-20T05:01:03.710
> 
> 标签：java, axis2, axiom

有谁知道如何让 Axis2 在解析 SOAP 消息时使用非合并 XMLStreamReader？

我正在编写读取大型 base64 二进制文本元素的代码。合并是默认行为，这会导致默认 XMLStreamReader 将整个文本加载到内存中，而不是返回多个 CHARACTERS 事件。这样做的结果是运行以下代码时堆空间不足：

```
reader = element.getTextAsStream( true ); 
```

OutOfMemory 错误发生在`com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next`：

```
java.lang.OutOfMemoryError: Java heap space
    at com.sun.org.apache.xerces.internal.util.XMLStringBuffer.append(XMLStringBuffer.java:208)
    at com.sun.org.apache.xerces.internal.util.XMLStringBuffer.append(XMLStringBuffer.java:226)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanContent(XMLDocumentFragmentScannerImpl.java:1552)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2864)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:558)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.util.stax.dialect.DisallowDoctypeDeclStreamReaderWrapper.next(DisallowDoctypeDeclStreamReaderWrapper.java:34)
    at org.apache.axiom.util.stax.wrapper.XMLStreamReaderWrapper.next(XMLStreamReaderWrapper.java:225)
    at org.apache.axiom.util.stax.dialect.SJSXPStreamReaderWrapper.next(SJSXPStreamReaderWrapper.java:138)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.parserNext(StAXOMBuilder.java:668)
    at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:214)
    at org.apache.axiom.om.impl.llom.SwitchingWrapper.updateNextNode(SwitchingWrapper.java:1098)
    at org.apache.axiom.om.impl.llom.SwitchingWrapper.<init>(SwitchingWrapper.java:198)
    at org.apache.axiom.om.impl.llom.OMStAXWrapper.<init>(OMStAXWrapper.java:73)
    at org.apache.axiom.om.impl.llom.OMContainerHelper.getXMLStreamReader(OMContainerHelper.java:67)
    at org.apache.axiom.om.impl.llom.OMContainerHelper.getXMLStreamReader(OMContainerHelper.java:40)
    at org.apache.axiom.om.impl.llom.OMElementImpl.getXMLStreamReader(OMElementImpl.java:790)
    at org.apache.axiom.om.impl.llom.OMElementImplUtil.getTextAsStream(OMElementImplUtil.java:114)
    at org.apache.axiom.om.impl.llom.OMElementImpl.getTextAsStream(OMElementImpl.java:826)
    at org.example.UploadFileParser.invokeBusinessLogic(UploadFileParser.java:160) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:27:41.780

这很容易做到。请参阅 Axiom 用户指南的以下部分：

[http://ws.apache.org/axiom/userguide/ch04.html#factory.properties](http://ws.apache.org/axiom/userguide/ch04.html#factory.properties)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:21:19.793

试试[http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP5.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP5.html)，它也可以从 Maven 的中央存储库中获得

```
 <groupId>com.sun.xml.stream</groupId>
    <artifactId>sjsxp</artifactId>
    <version>1.0.2</version> 
```

如果你把它放在类路径上，它将覆盖默认的 impl

**更新**还有另一种方法。创建自己的 XMLInputFactory

```
public class XMLInputFactory extends
        com.sun.xml.internal.stream.XMLInputFactoryImpl {

    @Override
    public XMLStreamReader createXMLStreamReader(Reader reader)
            throws XMLStreamException {
        return super.createXMLStreamReader(reader);
    }
} 
```

创建文件

```
META-INF/services/javax.xml.stream.XMLInputFactory 
```

请注意，javax.xml.stream.XMLInputFactory 是文件名。将您的班级完全限定名称放在该文件中`test.XMLInputFactory`。请参阅[http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html)（服务提供商）中的详细信息

它将使 Axis2 加载您的 XMLInputFactory。现在您可以拦截任何方法调用并更改解析行为。

# c++-cli - 如何在 system::thread 中编辑控件。

> ID：13965617
> 
> 赞同：0
> 
> 时间：2012-12-20T05:01:53.363
> 
> 标签：c++-cli

我需要能够将项目添加到线程内的列表框中。代码如下：

```
1\. ref class Work
2\. {
3\. public:
4\.  static void RecieveThread()
5\.      {
6\.      while (true)
7\.      {
8\.          ZeroMemory(cID, 64);
9\.          ZeroMemory(message, 256);
10\.         if(recv(sConnect, message, 256, NULL) != SOCKET_ERROR && recv(sConnect, cID, 64, NULL) != SOCKET_ERROR)
11\.         {
12\.             ID = atoi(cID);
13\.             String^ meep = gcnew String(message);
14\.             lbxMessages->Items->Add(meep);
15\.             check = 1;
16\.         }
17\.     }
18\. }
19\. }; 
```

`Error: a nonstatic member reference must be relative to a specific object`我在线收到错误`14.`
有没有办法让它让我这样做？因为如果我尝试`String^ meep;` 在该线程之外使用它不包含任何内容。当我在线程内但不在线程外使用它时，它可以完美运行。我需要能够将该消息添加到列表框中。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:58:03.397

您没有展示如何定义 lbxMessages，但我将假设它是同一类中的非静态数据成员。如果是这种情况，那么您需要指定要访问`lbxMessages`的对象。最简单的方法是将 RecieveThread 方法切换为非静态方法，然后您可以访问`this->lbxMessages`.

您没有说您正在使用哪个窗口工具包，但您可能需要 Invoke 回到 UI 线程才能编辑控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:01:06.607

一种方法是将 System::Thread 与 ParameterizedThreadStart 委托一起使用，它允许您传递对象，在本例中为 lbxMessages。

```
ParameterizedThreadStart^ threadCallback;
threadCallback = gcnew ParameterizedThreadStart(&Work::ReceiveThread);
Thread^ recvThread = gcnew Thread( threadCallback );
recvThread->Start( lbxMessages ); 
```

您运行线程的静态方法：

```
static void RecieveThread(Object^ state)
{
    ListBox^ lbxMessages = (ListBox^)state;
    //...code
} 
```

但.. 。还有一个问题。假设 ListBox 是一个 Win32 控件，您只能从创建它的线程对控件进行更改。因此，每次插入 ListBox 项时，都必须从 UI 的线程中完成。一种方法是使用[SynchronizationContext](http://msdn.microsoft.com/es-es/library/system.threading.synchronizationcontext.aspx)对象。

```
 // Start the thread
 array<Object^>^ args = gcnew array<Object^>(2){
    lbxMessages,
    SynchronizationContext::Current
 }
 recvThread->Start( args); 
```

线程方法应该是这样的：

```
static void RecieveThread(Object^ state)
{
  array<Object^>^ args = (array<Object^>^)state;
  ListBox^ lbxMessages = (ListBox^)args[0];
  SynchronizationContext^ ctx = (SynchronizationContext^)args[1];
  //...code
     String^ meep = gcnew String(message);
     ctx->Send(gcnew SendOrPostCallback(&Work::SafeListBoxInsert),
               gcnew array<Object^>(2){lbxMessages, meep}
     );
} 
```

您将需要从 UI 的线程调用另一种方法并进行更改。

```
ref class Work{
  //...other methods
  static void SafeListBoxInsert(Object^ state)
  {
    array<Object^>^ args = (array<Object^>^)state;
    ListBox^ lst = (ListBox^) args[0];
    String^ item = (String^) args[1];
    lst->Items->Add(item);
  }
} 
```

# magento - Magento - 使用观察者将quote_address保存在购物车addAction上

> ID：13965620
> 
> 赞同：1
> 
> 时间：2012-12-20T05:02:17.743
> 
> 标签：magento, magento-1.7

我正在编写一个自定义 Magento 模块，该模块在产品页面上提供费率报价（基于外部 API）。在我在产品页面上获得响应后，它会将响应中的一些信息添加到产品视图的表单中。

目标是保存地址（以及其他一些东西，但现在可以在会话中）。需要将地址保存到报价单中，以便结帐（onestepcheckout，免费版）会自动填写（城市，州，邮编，国家，运输方式[其中3个]）中的这些值并加载费率报价通过ajax（它已经在做）。

我已经通过使用观察者来解决这个问题，并观察购物车事件。我填写地址并保存。当我最终进入购物车页面或结帐页面时，数据丢失了约 4/5 次，并且 sql 表显示 quote_address 正在保存而没有地址信息，即使有明确的保存也是如此。

我使用的观察者方法是：

```
checkout_cart_update_item_complete
checkout_cart_product_add_after 
```

代码保存是：（我已经用地址、报价和购物车试过了，都没有调用 save() 的结果相同，也没有调用 setQuote()

```
// $params = Mage::app()->getRequest()->getParams()
// $quote = Mage::getSingleton('checkout/cart')->getQuote()
// or
// $quote = observer->getProduct()->getQuoteItem()->getQuote();
// where applicable, but both methods seemed to === each other
$quote->getShippingAddress()
    ->setCountryId($params['estimate_to_country'])
    ->setCity($params['estimate_to_city'])
    ->setPostcode($params['estimate_to_zip_code'])
    ->setRegionId($params['estimate_to_state_code'])
    ->setRegion($params['estimate_to_state'])
    ->setCollectShippingRates(true)
    ->setShippingMethod($params['carrier_method'])
    ->setQuote($quote)
    ->save();

$quote->getBillingAddress()
    ->setCountryId($params['estimate_to_country'])
    ->setCity($params['estimate_to_city'])
    ->setPostcode($params['estimate_to_zip_code'])
    ->setRegionId($params['estimate_to_state_code'])
    ->setRegion($params['estimate_to_state'])
    ->setCollectShippingRates(true)
    ->setShippingMethod($params['carrier_method'])
    ->setQuote($quote)
    ->save();

$quote->save();
$cart->save();
// I also tried:
Mage::getSingleton('checkout/session')->setQuote($quote); 
```

我想这很有可能不是保存此信息的最佳位置，但我不太确定。我想知道是否有一个好地方可以做到这一点，而无需覆盖整个控制器来保存添加到购物车操作中的地址。

非常感谢，如果我需要澄清，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:59:37.717

在 Magento 中，您可以在任何需要的地方创建自己的事件，但在这种情况下，您可以使用`checkout_cart_product_add_after`事件来更新 quore 地址详细信息。

所以这是相同的代码

```
$quote = Mage::getSingleton('checkout/session')->getQuote();

$billingAddress = Mage::getModel('sales/quote_address')
        ->setStoreId($storeId)
        ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_BILLING)
        ->setCustomerId(('Your_Value_Here'))
        ->setCustomerAddressIpd(('Your_Value_Here'))
        ->setCustomer_address_id(('Your_Value_Here'))
        ->setPrefix(('Your_Value_Here'))
        ->setFirstname(('Your_Value_Here'))
        ->setMiddlename(('Your_Value_Here'))
        ->setLastname(('Your_Value_Here'))
        ->setSuffix(('Your_Value_Here'))
        ->setCompany(('Your_Value_Here'))
        ->setStreet(('Your_Value_Here'))
        ->setCity(('Your_Value_Here'))
        ->setCountry_id(('Your_Value_Here'))
        ->setRegion(('Your_Value_Here'))
        ->setRegion_id(('Your_Value_Here'))
        ->setPostcode(('Your_Value_Here'))
        ->setTelephone(('Your_Value_Here'))
        ->setFax(('Your_Value_Here'));
$quote->setBillingAddress($billingAddress);

$shippingAddress = Mage::getModel('sales/quote_address')
        ->setStoreId($storeId)
        ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_SHIPPING)
        ->setCustomerId(('Your_Value_Here'))
        ->setCustomerAddressId(('Your_Value_Here'))
        ->setCustomer_address_id(('Your_Value_Here'))
        ->setPrefix(('Your_Value_Here'))
        ->setFirstname(('Your_Value_Here'))
        ->setMiddlename(('Your_Value_Here'))
        ->setLastname(('Your_Value_Here'))
        ->setSuffix(('Your_Value_Here'))
        ->setCompany(('Your_Value_Here'))
        ->setStreet(('Your_Value_Here'))
        ->setCity(('Your_Value_Here'))
        ->setCountry_id(('Your_Value_Here'))
        ->setRegion(('Your_Value_Here'))
        ->setRegion_id(('Your_Value_Here'))
        ->setPostcode(('Your_Value_Here'))
        ->setTelephone(('Your_Value_Here'))
        ->setFax(('Your_Value_Here'));

$quote->setShippingAddress($shippingAddress)
        ->setShipping_method('flatrate_flatrate')
        ->setShippingDescription($this->getCarrierName('flatrate'));

$quote->save(); 
```

# ruby-on-rails - 无法推送到 git hub

> ID：13965622
> 
> 赞同：2
> 
> 时间：2012-12-20T05:02:34.190
> 
> 标签：ruby-on-rails, railstutorial.org

我刚刚完成了 Hartl 的 Ruby on Rails 教程的第一章。之前发布了一个小问题。现在我开始第二章。我发誓我是按照书本做的，但现在当我尝试时：

```
git push -u origin master 
```

输入密码后，我收到以下消息：

> 错误：找不到存储库致命：无法从远程存储库读取请确保您具有正确的访问权限并且存储库存在。

当我下载 heroku 工具时，我认为它在我的机器上安装了第二个版本的 Ruby。无论如何，我现在在`All Programs`. 这能把事情搞砸吗？这两个版本是`Ruby 1.9.2-p290`和`1.9.3-p327`。此外，当我使用 1.9.2 打开命令提示符时，在我做任何事情之前顶部有一个奇怪的东西：

> 'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。

然后是下一行的正常提示。我想知道我的公钥的使用是否有些搞砸了。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:01:36.513

所以我也遇到了 Windows 和多个版本的 ruby​​ 的问题。我建议卸载所有版本，只安装一个 ruby​​ 版本。但我猜这与你的 Github 问题无关。

通过命令行切换到您的应用程序文件夹并结帐：

```
git remote -v 
```

它向您显示您的应用程序的远程位置是什么。5块钱，它搞砸了。您可以通过以下方式删除路径：

```
git remote rm origin 
```

或者如果它只在heroku上：

```
git remote rm heroku 
```

然后再次添加正确的远程路径。例子：

```
git remote add origin git@github.com:foo/bar.git 
```

那希望能解决它。

如果你想推动 heroku 使用，请记住：

```
git push heroku master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:35:15.367

您应该添加一个新的 git 遥控器。

检查[https://help.github.com/articles/adding-a-remote](https://help.github.com/articles/adding-a-remote)

# codeigniter - 如何在 codeigniter 中使用 xamp 和 windows7 向本地系统发送电子邮件？

> ID：13965625
> 
> 赞同：-1
> 
> 时间：2012-12-20T05:02:49.090
> 
> 标签：codeigniter, codeigniter-2, sendmail, codeigniter-url

我正在尝试运行此代码：

```
 $this->load->library('email');

    $this->email->from('anu1488@gmail.com', 'Anudeep');

    $this->email->to('anu1488@gmail.com');

    $this->email->subject('Email Test');
    $this->email->message('Testing the email class.');

    $this->email->send();

    echo $this->email->print_debugger(); 
```

当我尝试发送时，我收到了这个错误：

```
A PHP Error was encountered
Severity: Warning
Message: mail() [function.mail]: Failed to connect to mailserver at "localhost" port 25, verify your "SMTP" and "smtp_port" setting in php.ini or use ini_set()    
Filename: libraries/Email.php
Line Number: 1553 
```

这是什么原因造成的？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:05:14.203

It sounds like you do not have an SMTP server (mail server) set up on your local machine to send out email. It sounds like the `libraries/Email.php` file is referencing a hostname/port where a valid mail server does not live.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:11:57.187

```
**I guess you need to setup email configuration and port number in  config/email  .**

 $config['protocol']='smtp';
 $config['smtp_host']='ssl://smtp.googlemail.com';
 $config['smtp_port']='465';
 $config['smtp_timeout']='30';
 $config['smtp_user']='abhi.abc@gmail.com';
 $config['smtp_pass']='password';
 $config['charset']='utf-8';
 $config['newline']="\r\n";
 $config['mailtype'] = "html";

**if every thing is correct from your side then you can just change 'smtp_port' number and then check it definitely it will work`enter code here`.** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T07:28:15.383

试试这个，它对我有用....

```
$config = Array(
                    'protocol' => 'smtp',
                    'smtp_host' => 'ssl://smtp.googlemail.com',
                    'smtp_port' => 465,
                    'smtp_user' => 'user@gmail.com',
                    'smtp_pass' => 'user password',
                );

                $this->load->library('email', $config);
                $this->email->set_newline("\r\n");

                $this->email->from('user@gmail.com', 'User');
                $this->email->to(sample@gmail.com);

                $this->email->subject('Email Test');
                $this->email->message('Testing the email class.');

                if ($this->email->send()) {
                    $data['error'] = "Your email was sent";
                } else {
                    show_error($this->email->print_debugger());
                } 
```

然后打开您的 php.ini 并转到`extension=php_openssl.dll`并取消注释此行。之后重新启动你的 wamp 服务器。

# jquery - 如何在选择器中获取一系列对象

> ID：13965626
> 
> 赞同：2
> 
> 时间：2012-12-20T05:02:51.463
> 
> 标签：jquery

如果我有 10 个链接的列表，并且我想选择前 4 个之后的所有链接，如何？

我正在查看，[`:eq()`](http://api.jquery.com/eq/)但这似乎并没有解决我的问题，因为它是特定的，而不是一个范围。

寻找类似的`$("a:eq(>4)")`东西，希望它有意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:04:56.980

您可以使用`:gt`选择器：

```
$('a:gt(3)'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:05:04.547

使用`slice`. 它[更快](http://jsperf.com/select-all-but-first-42)。

```
$('a').slice(4); 
```

# angularjs - Angular ng-click 事件委托

> ID：13965627
> 
> 赞同：28
> 
> 时间：2012-12-20T05:03:02.380
> 
> 标签：angularjs, angularjs-ng-repeat, angularjs-ng-click

因此，如果我有一个 100 li 的 ul，每个 li 中是否应该有 ng-clicks，或者有没有办法将事件绑定到 ul 并将其委托给 li 的那种 jquery 做什么？这会更好还是更糟？我们有 100 个事件，还是最终只是一个事件？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T07:14:11.800

似乎 Angular 不使用中继器进行事件委托。有人[在 github 上打开了一个关于它的问题](https://github.com/angular/angular.js/issues/1568)。争论的焦点是它是否真的能带来更好的性能。

可能有一种解决方法，但它需要 jQuery。它包括创建一个用于父元素的特殊指令，并在其 dom 节点上注册监听器。

这是一个示例，它传递了一个函数名称，当单击子节点时要调用它，还传递了一个选择器以帮助识别要侦听的子节点。由于 Angular 的 jquery 实现只为我们提供了`bind`方法 - 仅限于将事件侦听器注册到实际元素 - 我们需要加载 jQuery 才能访问`on`or`delegate`方法。

HTML

```
<ul click-children='fun' selector='li'>
    <li ng-repeat="s in ss" data-index="{{$index}}">{{s}}</li>
</ul> 
```

定义的函数在控制器中定义，它期望传递一个索引

```
$scope.fun = function(index){
    console.log('hi from controller', index, $scope.ss[index]);      
}; 
```

该指令用于`$parse`将表达式转换为将从事件侦听器调用的函数。

```
app.directive('clickChildren', function($parse){
  return {
    restrict: 'A',
    link: function(scope, element, attrs){       
      var selector = attrs.selector;
      var fun = $parse(attrs.clickChildren);   
      element.on('click', selector, function(e){       
        // no need to create a jQuery object to get the attribute 
        var idx = e.target.getAttribute('data-index');        
        fun(scope)(idx);        
      });
    }
  };
}); 
```

Plunker：[http ://plnkr.co/edit/yWCLvRSLCeshuw4j58JV?p=preview](http://plnkr.co/edit/yWCLvRSLCeshuw4j58JV?p=preview)

* * *

注意：可以使用隔离作用域将函数委托给指令`{fun: '&'}`，这值得一看，但这会增加复杂性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T23:33:24.047

根据 jm- 的示例，我编写了该指令的更简洁和灵活的版本。以为我会分享。归功于 jm- ;)

我的版本尝试将函数名称称为 $scope[ fn ]( e, data )，或者优雅地失败。

它从被点击的元素传递一个可选的 json 对象。这允许您使用 Angular 表达式并将大量属性传递给被调用的方法。

HTML

```
<ul delegate-clicks="handleMenu" delegate-selector="a">
  <li ng-repeat="link in links">
    <a href="#" data-ng-json='{ "linkId": {{link.id}} }'>{{link.title}}</a>
  </li>
</ul> 
```

Javascript

控制器方法

```
$scope.handleMenu = function($event, data) {
  $event.preventDefault();
  $scope.activeLinkId = data.linkId;
  console.log('handleMenu', data, $scope);
} 
```

指令构造函数

```
// The delegateClicks directive delegates click events to the selector provided in the delegate-selector attribute.
// It will try to call the function provided in the delegate-clicks attribute.
// Optionally, the target element can assign a data-ng-json attribute which represents a json object to pass into the function being called. 
// Example json attribute: <li data-ng-json='{"key":"{{scopeValue}}" }'></li>
// Use case: Delegate click events within ng-repeater directives.

app.directive('delegateClicks', function(){
  return function($scope, element, attrs) {
    var fn = attrs.delegateClicks;
    element.on('click', attrs.delegateSelector, function(e){
      var data = angular.fromJson( angular.element( e.target ).data('ngJson') || undefined );
      if( typeof $scope[ fn ] == "function" ) $scope[ fn ]( e, data );
    });
  };
}); 
```

如果有人愿意贡献，我很想听听反馈。

我没有测试 handleMenu 方法，因为我从更复杂的应用程序中提取了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-26T13:53:07.677

从上面的 BradGreens 的 delegateClicks 开始，我改编[了一些来自 georg 的代码，](https://stackoverflow.com/a/14375828/237913)它允许我将 handleMenu 函数更深地放置在 $scope 中（例如 $scope.tomato.handleMenu）。

```
app.directive('delegateClicks', function () {
    return function ($scope, element, attrs) {
        var fn = attrs.delegateClicks.split('.').reduce(function ($scope, p) { return $scope[p] }, $scope); 
        element.on('click', attrs.delegateSelector, function (e) {
            var data = angular.fromJson(angular.element(e.target).data('ngJson') || undefined);
            if (typeof fn == "function") fn(e, data);
        });
    };
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-15T23:32:52.213

根据[GitHub 上的问题](https://github.com/angular/angular.js/issues/1568)，委派事件处理没有性能优势。

只需将`ng-click`指令与项目、`$index`和一起使用`$event`：

```
<ul>
   <li ng-repeat="item in collection"
       ng-click="lineClicked(item, $index, $event)">
      {{item}}
   </li>
</ul> 
```

```
$scope.lineClicked = function(item, index, event) {
    console.log("line clicked", item, index);
    console.log(event.target)
}); 
```

有关详细信息，请参阅

*   [AngularJS 开发者指南 - $event](https://docs.angularjs.org/guide/expression#-event-)
*   [AngularJS`ng-repeat`指令 API 参考 - 特殊属性](https://docs.angularjs.org/api/ng/directive/ngRepeat#overview)

# http - 通过 url 关闭码头服务器

> ID：13965628
> 
> 赞同：0
> 
> 时间：2012-12-20T05:03:14.693
> 
> 标签：http, url, webserver, jetty, shutdown

有没有办法通过 url（HTTP 请求）关闭 Jetty 服务器？问题是我需要关闭已由另一个项目启动的服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:45:23.180

使用 jetty-server 包中的 ShutdownHandler。示例设置在 javadoc 中。

[http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/handler/ShutdownHandler.html](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/server/handler/ShutdownHandler.html)

# jquery - 在通过 ajax 加载的输入字段上绑定 jquery 函数

> ID：13965631
> 
> 赞同：2
> 
> 时间：2012-12-20T05:03:22.397
> 
> 标签：jquery

我正在使用 jquery ui datepicker。在测试页面上它工作正常。

```
<div><input type="text" name="basic_example_1" id="basic_example_1" value="" />                     </div>      

<script>
$('#basic_example_1').datetimepicker();
</script> 
```

但是如果输入字段是通过 ajax 加载的，我应该如何放置脚本？我试过这个

```
$("#basic_example_1").live("click", function(){
  $(this).datetimepicker();
}); 
```

不工作。感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:07:59.940

在ajax`datetimepicker()` 的函数之后和输入附加之后调用...`success`

```
$.ajax({
  ....
  success:function(){ 
      //do ur stuff..  append your input which is already done i guess
      $('#appendedInputID').datetimepicker(); //id of appened input 
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:18:27.693

试试这个：

```
$('#basic_example_1').click(function(){
    $('#basic_example_1').datepicker('show');
}); 
```

或者，如果您的输入字段将是动态的，请创建一个“日期”类并为每个需要日期选择器的输入字段分配此类并添加此脚本：

```
 $('.date').click(function(){
        $('.date').datepicker();
        $(this).datepicker('show');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:06:34.440

```
$(document).on('click', '#basic_example_1', function(){
    ...etc...
}); 
```

这样，它将绑定到文档而不是#basic_example_1，因此任何通过 ajax 到达且符合条件的内容都将被拾取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:24:44.953

这是一个简单的示例，它没有通过 ajax 获取输入，而是正在`dynamically`创建它，并且由于对`Qoop`使用它的引用`focus`现在效果更好，当我尝试使用`click`它时会产生奇怪的结果。这应该可以帮助您：

jQuery：

```
$(document).on('focus', '#basic_example_1', function () {
    $(this).datepicker();
}); 
```

示例请访问：http: [//jsfiddle.net/a3zWv/](http://jsfiddle.net/a3zWv/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T05:57:08.597

Ajax调用后，在success函数中可以这样写：

```
 jQuery.ajax({
      url: //url
      type: //post/get
      ...
      ...
      success: function(..){
                //Display/load text field
                jQuery("#basic_example_1").datetimepicker();
               },
      failure: function(..){
                   //code for failure
                 }

 }); 
```

我想它有效。

# android - How do I scroll a WebView to a top of screen point by findNext(true) on Android

> ID：13965632
> 
> 赞同：1
> 
> 时间：2012-12-20T05:03:23.350
> 
> 标签：android, android-webview

I am using the `findAll` method for the first occurrence, then `findNext(true)` for the following markers. The view will automatically scroll to the requested text. But it scrolls to the requested text at the bottom of the device. I want to scroll until the requested text is at top of the screen. Any solution for this?

Do you have any ideas how I could implement this? I'd really appreciate your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T17:11:29.383

那么首先你尝试使用`webView.findNext (true)`，然后使用`webView.findAll(TEXT);`然后`webView.scrollTo (0, webView.getScrollY () +5000)`；（5000 是向下滚动）然后再次使用`webView.findAll(TEXT);`.

祝你好运！

# unity3d - Unity TCP Server Hang Unity scene

> ID：13965633
> 
> 赞同：3
> 
> 时间：2012-12-20T05:03:25.103
> 
> 标签：unity3d, crash, tcplistener

I am trying to implement a TCP server in unity. I am using `unity pro 3.5` and when I run this code in a scene, then unity hang, no response at all untill I kill it with Task Manager.

```
using UnityEngine;
using System.Collections;
using System.Net.Sockets;
using System.Net;
using System.Text;

public class Server : MonoBehaviour {

    private IPAddress ipAd;
    public string IP="127.0.0.1";
    public int port = 8001;
    private Socket s;

    void Update ()
    {   

    }

    // Use this for initialization
    void Awake () {
            port = 8001;
            ipAd = IPAddress.Parse(IP);
            msg = "Listening at " + IP + ":" + port.ToString();
            this.s = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            this.s.Bind(new IPEndPoint(ipAd,port));
            this.s.Listen(200);
            while (true)
              this.ReceiveMessage(this.s.Accept()); //hang if this line activated
    }
    private void ReceiveMessage(Socket socket)
        {
            byte[] tempbuffer = new byte[10000];
            socket.Receive(tempbuffer);
            rec.AssignFromByteArray(tempbuffer);                
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:42:32.097

服务器应该在它自己的线程中运行，因此即使`tcp_Listener.AcceptSocket()`是阻塞调用，GameLoop 也可以继续。

```
using UnityEngine;
using System.Collections;
using System.Threading;
using System.Net;
using System.Net.Sockets;
using System.IO;

public class Server : MonoBehaviour {
    private bool mRunning;
    public static string msg = "";

    public Thread mThread;
    public TcpListener tcp_Listener = null;

    void Awake() {
        mRunning = true;
        ThreadStart ts = new ThreadStart(Receive);
        mThread = new Thread(ts);
        mThread.Start();
        print("Thread done...");
    }

    public void stopListening() {
        mRunning = false;
    }

    void Receive() {
        tcp_Listener = new TcpListener(IPAddress.Parse("127.0.0.1"), 8001);
        tcp_Listener.Start();
        print("Server Start");
        while (mRunning)
        {
            // check if new connections are pending, if not, be nice and sleep 100ms
            if (!tcp_Listener.Pending()){
                Thread.Sleep(100);
            }
            else {
                Socket ss = tcp_Listener.AcceptSocket();
                BonePos rec = new BonePos();
                byte[] tempbuffer = new byte[10000];
                ss.Receive(tempbuffer); // received byte array from client
                rec.AssignFromByteArray(tempbuffer); // my own datatype
            }
        }
    }

    void Update() {

    }

    void OnApplicationQuit() { // stop listening thread
        stopListening();// wait for listening thread to terminate (max. 500ms)
        mThread.Join(500);
    }
} 
```

请参阅[answers.unity3d.com 的相关答案](http://answers.unity3d.com/questions/12329/server-tcp-network-problem.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-25T12:26:37.610

因为这个，你会被挂起：

```
while (true)
          this.ReceiveMessage(this.s.Accept()); //hang if this line activated 
```

整个过程都停留在这个循环中，因此没有其他任何处理。

您可以做的（尽管我不推荐）是在 update() 中执行操作，而不是无限循环。

我的建议是使用其他东西来运行您的服务器而不是统一。

如果您正在创建游戏服务器，您可以使用 PUN（Photon Unity Networking）或使用 C# 编写独立服务器，甚至可以使用 Python 编写符合您需求的开源服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-28T14:01:05.620

你必须摆脱这个声明：

```
while (true)
    this.ReceiveMessage(this.s.Accept()); 
```

而且您的服务器必须在他自己的线程中运行。

# dynamics-crm-2011 - Integrating Octopus Deploy and Dynamics CRM

> ID：13965635
> 
> 赞同：5
> 
> 时间：2012-12-20T05:03:42.063
> 
> 标签：dynamics-crm-2011, octopus-deploy

I'm using an on premises version of CRM 2011, which I'm about to begin developing against.

We're using Octopus Deploy with some other sites.

It would be great if there was a way to import CRM Solutions using a powershell script or wcf service, rather then someone manually navigating to the site and go through the motions.(we have dev,test and prod environments)

I can't seem to find a non UI method of doing this online. Can anyone suggest a better solution then using the UI?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T08:12:21.643

您可以使用 ImportSolutionRequest 类以编程方式导入解决方案。检查[此链接](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.importsolutionrequest.aspx)

# xcode - Event triggered on entering a textbox.

> ID：13965639
> 
> 赞同：-2
> 
> 时间：2012-12-20T05:04:07.413
> 
> 标签：xcode

Is there any way of knowing when a text-box has been clicked on so that this can trigger an event? This may not be the best way to do it but I want to animate the text-box to a different part of the screen when it is clicked and then return to its original position when finished.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:18:24.297

如果您的问题与 iOS 有关，请为 UITextField 设置委托，并在下面的 delegaqte 方法中添加您的代码。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

设置委托![在此处输入图像描述](../Images/694f366552e179129f2f303b4381ce4e.png)

# jetty - Auto-reloading WAR in Jetty standalone

> ID：13965643
> 
> 赞同：2
> 
> 时间：2012-12-20T05:04:56.223
> 
> 标签：jetty

I have a WAR deployed to Jetty 9.0.0.M3\. I am trying to figure out what I need to set in my context in order to be able to have it reloaded every time I upload an updated war file (without having to restart Jetty).

I had a look at the docs, but I'm afraid I couldn't find what I was looking for. I only know how to do this with the embedded Jetty Maven plugin, but not with the standalone.

Any help would be appreciated! Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:41:45.630

关键在于部署程序。您需要连接部署管理器功能并让它管理 web 应用程序的启动。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/main/java/org/eclipse/jetty/deploy/providers/WebAppProvider.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/main/java/org/eclipse/jetty/deploy/providers/WebAppProvider.java)

jetty xml 文件实际上是 java 的一层薄薄的皮肤，所以请看下面的 xml 文件，它是 jetty 用于我们发行版的传统 webapp 启动的文件。

[http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/main/config/etc/jetty-deploy.xml](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-deploy/src/main/config/etc/jetty-deploy.xml)

这应该可以让你解决问题。

# java - Which Java security framework to use?

> ID：13965646
> 
> 赞同：8
> 
> 时间：2012-12-20T05:05:01.467
> 
> 标签：java, security, spring-security

We are building an O&M framework in Java, which will support both web based GUI and console based CLI. Later, it will also be supported with GUI that can be accessed using handhelds (Andriod app etc). I need to decide on which open source java security framework to use for this product.

**My requirements are as follows:**

1.  The security framework should be container agnostic: I should be able to access it from Java EE servers, Tomcat web containers, POJO in Java SE etc

2.  The security framework must provide authentication & role based authorization (RBAC) services

3.  In some deployments, our operators may ask us to point to their LDAP servers for user credentials and roles, so LDAP support is required

4.  Password strength control, Password ageing, Automatic lockout of account if not logged in for N days, Automatic password change enforcement every N days, Strong encryption support, Channel security, Single Sign On etc are all required features

5.  The open source project must be active & well supported in forums and must adhere to latest security standards in practice

6.  The security related data will be stored in various data stores namely HBase, Cassandra etc. So the security framework must be extensible to read data from different data stores (or be based on JPA etc)

7.  I started looking at Spring Security. Not sure if it can meet requirement (1) and also I read some feedback that its very heavy and tough to use and also it can be used easily only with Spring Based apps. Our application is not Spring based

8.  How about Apache Shiro? Does it meet all that I need above?

# javascript - Mootools snow fall script, trying to make it smoother

> ID：13965651
> 
> 赞同：0
> 
> 时间：2012-12-20T05:05:32.067
> 
> 标签：javascript, mootools

I am trying to create a snow falling, and I have it working. But it is not smooth at all. I'm not sure if there is a better way to do it then Fx.Morph. I have a timer running every 50 milliseconds, but my snowflakes don't seem to move until the Fx.Morph is finished, so sometimes they sit there and wait.

Source is at [http://jsfiddle.net/yQCza/4/](http://jsfiddle.net/yQCza/4/)

```
move = new Fx.Morph(ele, {
    transition: randomTransition,
    duration: randomDuration
  }); 
```

Any ideas as to what I could do to make it smoother?

# ios - 我正在使用 GPUImage 框架在 iOS 中编辑静态电影，在以下方法中获取 Null 值，这是我的代码片段

> ID：13965654
> 
> 赞同：3
> 
> 时间：2012-12-20T05:05:53.737
> 
> 标签：ios

我想从以下方法返回 CMsampleBuffer

```
-(CMSampleBufferRef )readMovieFrames{

    AVURLAsset *mAsset = [[AVURLAsset alloc] initWithURL:sampleURL options:NULL];
    tracks = [mAsset tracksWithMediaType:AVMediaTypeVideo];

//here getting one index

    AVAssetTrack *mTrack = [tracks objectAtIndex:0];

    NSString* key = (NSString*)kCVPixelBufferPixelFormatTypeKey;
    NSNumber* value = [NSNumber numberWithUnsignedInt:kCVPixelFormatType_32BGRA];
    NSDictionary * settings = [[NSDictionary alloc] initWithObjectsAndKeys:value, key, nil];

    AVAssetReaderTrackOutput *mOutput = [[AVAssetReaderTrackOutput alloc]
                                         initWithTrack:mTrack outputSettings:settings];

    AVAssetReader *mReader = [[AVAssetReader alloc] initWithAsset:mAsset error:nil];

    [movieFile readNextVideoFrameFromOutput:mOutput];

    [mReader addOutput:mOutput];
    [mReader startReading];

    CMSampleBufferRef sampleBuffer=[mOutput copyNextSampleBuffer];

    CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress( pixelBuffer, 0 );

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 600, 400, 0, GL_BGRA_EXT, GL_UNSIGNED_BYTE, CVPixelBufferGetBaseAddress( pixelBuffer ));
    CVPixelBufferUnlockBaseAddress( pixelBuffer, 0 );

    return sampleBuffer;
} 
```

这里确实加载了

```
[super viewDidLoad];
NSMutableArray *arrImages=[[NSMutableArray alloc] init];

//    filter = [[GPUImagePixellateFilter alloc] init];
//    filter = [[GPUImageUnsharpMaskFilter alloc] init];

filter = [[GPUImageDissolveBlendFilter alloc] init];
[(GPUImageDissolveBlendFilter *)filter setMix:0.5];

sampleURL = [[NSBundle mainBundle] URLForResource:@"Sydney" withExtension:@"m4v"];
movieFile = [[GPUImageMovie alloc] initWithURL:sampleURL];
movieFile.runBenchmark = YES;
movieFile.playAtActualSpeed = YES;
[movieFile addTarget:filter];
[movieFile prepareForImageCapture];

[movieFile processMovieFrame:[self readMovieFrames]];

MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL: sampleURL];
[player prepareToPlay];
[player.view setFrame: CGRectMake(0, 100, 320, 240)];  // player's frame must match parent's
[self.view addSubview: player.view];

AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:sampleURL];
CMTime duration = playerItem.duration;
float seconds = CMTimeGetSeconds(duration);
NSLog(@"duration: %.2f", seconds);

[player play];

GPUImagePicture *overlayPicture;

for (int i=0; i<seconds; i++) {

    UIImage *image = [player thumbnailImageAtTime:i timeOption:MPMovieTimeOptionNearestKeyFrame];

    [arrImages addObject:image];

    overlayPicture= [[GPUImagePicture alloc] initWithImage:[arrImages objectAtIndex:i]];

    [overlayPicture addTarget:filter];

    [overlayPicture processImage];

    NSLog(@"Image  -0-0-0-0- %@",image);
    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
}

// Only rotate the video for display, leave orientation the same for recrding
GPUImageView *filterView = (GPUImageView *)self.view;
[filter addTarget:filterView];

// In addition to displaying to the screen, write out a processed version of the movie to disk
NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/EditedMovie.m4v"];
unlink([pathToMovie UTF8String]); // If a file already exists, AVAssetWriter won't let you record new frames, so delete the old movie
NSURL *movieURL = [NSURL fileURLWithPath:pathToMovie];

movieWriter = [[GPUImageMovieWriter alloc] initWithMovieURL:movieURL size:CGSizeMake(640.0, 480.0)];
[filter addTarget:movieWriter];

// Configure this for video from the movie file, where we want to preserve all video frames and audio samples
movieWriter.shouldPassthroughAudio = YES;
movieFile.audioEncodingTarget = movieWriter;
[movieFile enableSynchronizedEncodingUsingMovieWriter:movieWriter];

[movieWriter startRecording];
[movieFile startProcessing];

[movieWriter setCompletionBlock:^{
    [filter removeTarget:movieWriter];
    [movieWriter finishRecording];
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:18:29.233

检查此网址。希望这能回答你的问题

[http://www.7twenty7.com/blog/2010/11/video-processing-with-av-foundation](http://www.7twenty7.com/blog/2010/11/video-processing-with-av-foundation)

# ios - How do you fit a large png image into a smaller custom Round Rect Button on XCode without losing image quality?

> ID：13965657
> 
> 赞同：1
> 
> 时间：2012-12-20T05:05:57.007
> 
> 标签：ios, xcode, button, adobe-illustrator

I am creating a button for my application that, when pressed shows an indention looking effect to make it appear that the user is clicking a real button. It is very simple, using only an image for the default state and the depressed one for the highlighted state. I'm having a few problems. The quality is terrible. I have uploaded the images to XCode in the exact pixels they will be presented in my application but when I export it from Illustrator it gets really pixelated. So I was wondering if there was a way for me to upload an image a few times bigger than my button and have it shrink to fit the button size. I've tried to do that but when I run my app it gets really messed up and weird looking. I would just put text inside the button but then it ruins the pressed effect. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:25:37.130

如果您以与按钮相同的纵横比导出图像，则图像将重新缩放以适合您的按钮。不要忘记使用自定义样式，这样您就不会得到椭圆形的按钮。

但是，应该可以生成按钮的精确像素版本，并且看起来不错 - 特别是如果您指定 2x 大小的 @2x 版本的图像供视网膜使用。您确定您的 Illustrator 导出设置正确吗？需要考虑的一件事是，可能需要在导出时启用抗锯齿功能。

此页面有一个有用的快速清单，了解如何从 Illustrator 中为 iPhone 保存（向下滚动到“**如何在 Illustrator 中为 iPhone 保存艺术**”标题）

[http://www.vickiwenderlich.com/2011/11/faq-how-do-i-save-art-for-the-iphoneipad/](http://www.vickiwenderlich.com/2011/11/faq-how-do-i-save-art-for-the-iphoneipad/)

# sql - Display zero by using count(*) if no result returned for a particular case

> ID：13965658
> 
> 赞同：6
> 
> 时间：2012-12-20T05:05:59.517
> 
> 标签：sql, sql-server, tsql

I have a query like this that returns number of rows for each case in city .

```
select 
    case edition_id 
        when 6 then 'DELHI' 
        when 50 then 'AHMEDABAD' 
        when 4 then 'HYDERABAD' 
        when 25 then 'KOLKATA' 
        when 51 then 'BANGALORE' 
        when 5 then 'MUMBAI' 
        when 24 then 'CHENNAI' 
    end as CITY,
    count(*) as Total 
from #tmptab1
group by edition_id

drop table #tmptab1 
```

The result comes out to be like

```
CITY    Total
MUMBAI  1
DELHI   28
CHENNAI 1
KOLKATA 35
AHMEDABAD 3 
```

So if there is no rows returned from a city , that city is omitted in final result

I want result as

```
CITY    Total
MUMBAI  1
DELHI   28
CHENNAI 1
KOLKATA 35
AHMEDABAD 3
BANGALORE 0 -- if no result from bangalore display zero. 
```

How to do this ?

I tried

```
case count(*)>0 then count(*) else 0 end as Total 
```

but it does not work

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T05:14:41.300

我会将城市插入到临时表中，然后使用分组查询执行 LEFT JOIN，如下所示：

```
CREATE TABLE #cities (edition_id INT, city VARCHAR(16))
INSERT INTO #cities VALUES(6, 'DELHI')
INSERT INTO #cities VALUES(50, 'AHMEDABAD')
INSERT INTO #cities VALUES(4, 'HYDERABAD')
INSERT INTO #cities VALUES(25, 'KOLKATA')
INSERT INTO #cities VALUES(51, 'BANGALORE')
INSERT INTO #cities VALUES(5, 'MUMBAI')
INSERT INTO #cities VALUES(24, 'CHENNAI')

select 
    c.city 'City', 
    ISNULL(t.Total, 0) 'Total'
from 
    #cities c
    LEFT JOIN (
        SELECT 
            edition_id, count(*) as Total 
        #tmptab1 
        GROUP BY edition_id
    ) AS t
    ON c.edition_id = t.edition_id

drop table #tmptab1
drop table #cities 
```

顺便说一句，将其作为普通表是有意义的，`#cities`这样您就不需要在每次查询运行时都创建它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T05:17:51.073

问题是您按 edition_id 分组。如果您的结果中没有 edition_id，则无法计算。

您可以做的是选择所有带有版本 ID 的城市，将其加入计数，然后执行 isnull：

```
WITH CITIES AS
(
        SELECT 6 AS edition_id, 'DELHI' As CityName
        UNION
        SELECT 50, 'AHMEDABAD'
        UNION
        ....
)
SELECT c.cityname, isnull(counts.total,0) as total
FROM CITIES
LEFT JOIN (SELECT edition_id, count(*) as Total #tmptab1 group by edition_id) counts ON counts.edition_id = CITIES.edition_id 
```

# c# - How to pass model data from view to partial view in loop in MVC

> ID：13965667
> 
> 赞同：0
> 
> 时间：2012-12-20T05:07:13.343
> 
> 标签：c#, asp.net-mvc, razor

I have a view with strongly typed model view and i need to pass this data to a partial view, in loop. (the partial view is sorta playing role of template for data)

Model:

public class Foo {

```
public int Id { get; set; }
public string Title { get; set; }
public string Content { get; set; } 
```

}

Controller:

```
public ActionResult Index()
    {
        var foo = new List<Foo>();

        for (var i = 1; i < 3; i++)
        {
            foo.Add(new Foo{Content = "test content " + i, Title = "test title " + i, Id = i});
        }
        return View(foo);
    } 
```

View (Index):

```
@model List<Project.Models.Foo>
 @foreach (var foo in Model)
    {
        Html.RenderPartial("OneFoo", foo);
    } 
```

View (OneFoo):

```
@using Project.Models
<div>
    Title:
        @Html.LabelFor(f => f.Title)
        Content:
        @Html.LabelFor(f => f.Content)
    }
</div> 
```

The output I'm getting is: Title: Title, Content: Content - it's not getting the actual values.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:11:42.593

您使用了错误的助手，请使用：

```
@Html.DisplayFor(f => f.Content) 
```

或者

```
@Model.Content 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:14:08.057

```
@Html.LabelFor(f => f.Title) 
```

这正是它所说的，打印出标签。正如 Eric 所说，您需要使用 DisplayFor 来显示实际内容。

# java - 使用 TomCat 处理文件时，新行命令 (\n) 不起作用

> ID：13965676
> 
> 赞同：5
> 
> 时间：2012-12-20T05:08:11.400
> 
> 标签：java, file, jakarta-mail, readfile

我正在尝试通过从文本文件中读取内容来发送邮件。

我正在尝试阅读的文件

```
Line 1
Line 2
Line 3 
```

我已经使用 JUnit 测试了代码，并且收到了与文本文件格式相同的邮件。

使用 Junit 输出邮件

```
Line 1
Line 2
Line 3 
```

但是当部署在 Tomcat 中时，我收到一封带有文本的邮件，但新行没有被识别。

使用tomcat服务器时输出邮件

```
Line 1Line 2Line 3 
```

我用来读取文件内容的代码。

```
private String readFile(String pathname) throws IOException {
        File file = new File(pathname);
        StringBuilder fileContents = new StringBuilder((int) file.length());
        Scanner scanner = new Scanner(file);
        String lineSeparator = System.getProperty("line.separator");

        try {
            while (scanner.hasNextLine()) {
                fileContents.append(scanner.nextLine() + lineSeparator);
            }
            return fileContents.toString();
        } finally {
            scanner.close();
        }
    } 
```

我已将服务器置于调试模式，我可以看到新行正在附加`fileContents.toString()`

我不确定我错过了什么。有什么和字符集有关的吗？我不确定....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:15:01.643

它与 Perception 和 nullix 的线索有关。如何阅读邮件和 HTML。

就我而言，我是通过从邮件客户端发送邮件进行测试的，该邮件客户端向我的应用程序发送**“text/html”**类型的消息。所以当我回复那封邮件时，回复邮件也是“text/html”格式。因此，我使用的**/n**或任何换行类型都被省略了。

因此，在阅读邮件时，我只阅读**“文本/普通”** mime 类型。所以在回复这封邮件时，我可以打印新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:20:57.090

也许您阅读邮件输出的方式让您认为换行符不存在。例如，如果您将 '\n' 写为换行符，并在 Windows 记事本上打开文件，那么它会看起来好像换行符不存在。

使用更复杂的文本查看器，如 Notepad++，您可以在其中看到空格字符可能会有所帮助

# javascript - 从ajax加载页面时如何避免js函数被覆盖。

> ID：13965677
> 
> 赞同：2
> 
> 时间：2012-12-20T05:08:10.877
> 
> 标签：javascript, ajax, jquery

例如：

```
--- a.php ---
<script>
function fun() {
   console.log('this is fun() from a.php');
}
function loadb() {
   $("#loadb").load("b.php");
}
function removeb() {
   $("#loadb").remove();
}
</script>
This is a.php
<input type="button" onclick="fun()" value="echo fun">
<input type="button" onclick="loadb()" value="load b.php">
<input type="button" onclick="removeb()" value="remove b.php">
<div id="loadb"></div>

--- b.php ---
<script>
function fun() {
   console.log('this is fun() from b.php');
}
</script>
This is b.php 
```

在我从 Ajax 加载 b.php 后，a.php 中的“fun()”将被覆盖，即使我通过删除 b.php 来删除 b.php 中的 fun() 仍然保留在页面中。

确保ajax页面调用它自己的js函数的实用方法是什么？

因为 a.php 会加载很多其他不同开发者开发的页面，他们可能会在页面内部编写自己的 js 函数，有时它们的函数会有共同的命名，如：remove()、add()...等。

我想知道，是否有任何有效的方法来避免这种情况？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:13:27.790

答案很简单，不。

由于在将脚本标记附加到 DOM 时浏览器会执行什么操作，因此无法保护函数不被脚本所做的某些分配覆盖。

除了正确解决每个模块中的问题之外，您真的没有其他现实的解决方案：

1.  在每个模块中正确命名您的公共函数
2.  [使用自执行功能](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)模式在每个模块中限定您的私有功能

# ios - UIimagepicker 控制器动态选择图像

> ID：13965679
> 
> 赞同：-3
> 
> 时间：2012-12-20T05:08:23.887
> 
> 标签：ios, xcode

如何从 iphone 库中选择图像？我想将它们存储在一个数组中并稍后使用..请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:59:14.087

我建议永远不要将图像添加到数组中以备将来使用，当图像数量增加或图像大小很高时，应用程序将崩溃。

1.  将其保存在 doc 目录中并保留路径作为参考
2.  将资产 url 添加到数组而不是图像

这是一个很好的[教程](http://mobileorchard.com/ios-advanced-programming-the-image-picker/)给你。

如果您需要将图像存储在数组中，请在`UIImagePicker`的`didFinishPickingMediaWithInfo`委托方法中添加以下代码：

```
[yourImageArray addObject:[info objectForKey:UIImagePickerControllerOriginalImage]]; 
```

# c# - 内购成功后的正确步骤

> ID：13965682
> 
> 赞同：5
> 
> 时间：2012-12-20T05:09:01.957
> 
> 标签：c#, windows-8, microsoft-metro

我尝试了以下代码进行应用内购买。我`CurrentAppSimulator`用于测试目的。

```
private async void history_Click(object sender, RoutedEventArgs e)
{
    bool OK = true;

    // Get the license info
    // The next line is commented out for testing.
    // licenseInformation = CurrentApp.LicenseInformation;

    // The next line is commented out for production/release.       
    LicenseInformation licenseInformation = CurrentAppSimulator.LicenseInformation;
    if (!licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
    {
        try
        {
            // The customer doesn't own this feature, so 
            // show the purchase dialog.

            await CurrentAppSimulator.RequestProductPurchaseAsync("PremiumFeatures", false);
            // the in-app purchase was successful
            OK = true;
        }
        catch (Exception)
        {
            // The in-app purchase was not completed because 
            // an error occurred.
            OK = false;
        }
    }
    else
    {
        // The customer already owns this feature.
        OK = true;
    }

    if (OK)
    {
        Frame.Navigate(typeof(HistoryPage));
    }
} 
```

但是，每次执行时都会弹出对话框`history_Click`，即使我选择了S_OK。我希望`licenseInformation.ProductLicenses["PremiumFeatures"].IsActive`在我购买`PremiumFeatures`.

![在此处输入图像描述](../Images/a3dd5eb69c981a3b4a298a966f786270.png)

我想，也许当应用内购买成功时，我需要打开`IsActive`标志，这样它就不会再次显示购买对话框。

```
 // the in-app purchase was successful
        OK = true;
        // Compile error!!!
        licenseInformation.ProductLicenses["PremiumFeatures"].IsActive = true; 
```

好的。似乎`IsActive`是一个只读字段。那么，**请问，处理采购成功案例的正确方法是什么？**

## 更新 ：

在查看[试用应用程序和应用内购买示例](http://code.msdn.microsoft.com/windowsapps/Licensing-API-Sample-19712f1a/view/SourceCode)后，我意识到购买成功后可以**自动**`IsActive`更改为以下代码。**（但为什么它有效？）**`false``true`

 ****```
 private async Task LoadInAppPurchaseProxyFileAsync()
    {
        StorageFolder proxyDataFolder = await Package.Current.InstalledLocation.GetFolderAsync("data");
        StorageFile proxyFile = await proxyDataFolder.GetFileAsync("in-app-purchase.xml");
        licenseChangeHandler = new LicenseChangedEventHandler(InAppPurchaseRefreshScenario);
        CurrentAppSimulator.LicenseInformation.LicenseChanged += licenseChangeHandler;
        await CurrentAppSimulator.ReloadSimulatorAsync(proxyFile);

        // setup application upsell message
        ListingInformation listing = await CurrentAppSimulator.LoadListingInformationAsync();
        var product1 = listing.ProductListings["product1"];
        var product2 = listing.ProductListings["product2"];
        Product1SellMessage.Text = "You can buy " + product1.Name + " for: " + product1.FormattedPrice + ".";
        Product2SellMessage.Text = "You can buy " + product2.Name + " for: " + product2.FormattedPrice + ".";
    } 
```

但是，“已购买”的状态**并不是坚持**。如果我关闭应用程序并重新启动它，它会认为我的“高级功能”为“尚未购买”。

**我怎么想使这种行为持久化？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T05:45:53.567

请阅读

根据您的经验，我会假设 App.IsTrial 设置为 true。当应用程序处于试用模式或（出于任何其他原因）未激活时，您无法提交购买。请注意，我指的是应用程序，而不是功能/产品。一旦应用程序处于活动状态，您的购买将成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:31:22.960

据我所知，单击“确定”时它不会自动更新。它只返回正确的状态，就像在 Windows 应用商店中应该做的那样。

我认为是一种选择，但我自己没有实现它是使用`ReloadSimulatorAsync(proxyFile)`方法。在调用此方法之前，您必须自己更新 in-app-purchase.xml 并将其保存并将文件传递给 ReloadSimulatorAsync 方法。

我个人会使用 xml 文件的手动更新。但我无法判断您的申请/申请流程。

自动化此过程的良好开端是示例“应用内购买”应用程序，您可以在[此处](http://code.msdn.microsoft.com/windowsapps/Licensing-API-Sample-19712f1a/view/SourceCode)找到。如果您查看代码文件 InAppPurchase.xaml.cs，您将看到已经有一些代码用于您自己的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:51:38.930

我只是要清除这一点。执行时

```
 try {

        await CurrentAppSimulator.RequestProductPurchaseAsync("PremiumFeatures", false);
        OK = true

    }
    catch (Exception)
    {

        OK = false;
    } 
```

OK 不仅在用户购买该功能时是真的，如果他取消购买或者他无法被识别或他禁用他的网络连接也是如此。所以这是检查购买是否成功的错误方法。基本上 Anobik 是对的，您必须事后检查是否购买了许可证，因此正确的代码是：

```
if (!licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
{
    try
    {
        // The customer doesn't own this feature, so 
        // show the purchase dialog.

        await CurrentAppSimulator.RequestProductPurchaseAsync("PremiumFeatures", false);
                if (licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
                {
                    // the in-app purchase was successful
                     OK = true;
                    //Success in purchase use ur own code block
                }
                else
                {
                     OK = false;
                    //error in purchase use your own code block
                }

    }
    catch (Exception)
    {
        // The in-app purchase was not completed because 
        // an error occurred.
        OK = false;
    }
}
else
{
    // The customer already owns this feature.
    OK = true;
}

if (OK)
{
    Frame.Navigate(typeof(HistoryPage));
} 
```

但是，如果你编译你会发现它不起作用。我认为，这是因为 CurrentAppSimulator 不会对许可证进行永久性更改。我希望这是真的 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T21:31:14.793

购买后无需`IsActive`立即检查许可证。相反，您可以（最好）存储 的结果`RequestProductPurchaseAsync`，它是类型`PurchaseResults`并且具有`Status`属性。后者又是一个`ProductPurchaseStatus`枚举值，如果是`Succeeded`，您可以在不检查许可证的情况下继续。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T12:20:38.343

您只缺少一个 if else 条件来处理应用内购买

这是代码

```
private async void history_Click(object sender, RoutedEventArgs e)
{
bool OK = true;

// Get the license info
// The next line is commented out for testing.
// licenseInformation = CurrentApp.LicenseInformation;

// The next line is commented out for production/release.       
LicenseInformation licenseInformation = CurrentAppSimulator.LicenseInformation;
if (!licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
{
    try
    {
        // The customer doesn't own this feature, so 
        // show the purchase dialog.

        await CurrentAppSimulator.RequestProductPurchaseAsync("PremiumFeatures", false);
                if (licenseInformation.ProductLicenses["PremiumFeatures"].IsActive)
                {
                    // the in-app purchase was successful
                     OK = true;
                    //Success in purchase use ur own code block
                }
                else
                {
                     OK = false;
                    //error in purchase use your own code block
                }

    }
    catch (Exception)
    {
        // The in-app purchase was not completed because 
        // an error occurred.
        OK = false;
    }
}
else
{
    // The customer already owns this feature.
    OK = true;
}

if (OK)
{
    Frame.Navigate(typeof(HistoryPage));
} 
```

}****

# java - Org.apache.jasper.JasperException: /root/web/report/read_monthly_scheme.jsp(322,20) 预期等号。

> ID：13965683
> 
> 赞同：0
> 
> 时间：2012-12-20T05:09:09.133
> 
> 标签：java, jsp, tomcat

我面临上述问题..详细描述是：HTTP Status 500 -

类型异常报告

信息：

说明 服务器遇到一个内部错误 () 阻止它完成此请求。

例外：

```
org.apache.jasper.JasperException: /root/web/report/read_monthly_scheme.jsp(322,20) equal symbol expected
    org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:88)
    org.apache.jasper.compiler.Parser.parseAttribute(Parser.java:199)
    org.apache.jasper.compiler.Parser.parseAttributes(Parser.java:154)
    org.apache.jasper.compiler.Parser.parseIncludeDirective(Parser.java:372)
    org.apache.jasper.compiler.Parser.parseDirective(Parser.java:484)
    org.apache.jasper.compiler.Parser.parseTagFileDirectives(Parser.java:1784)
    org.apache.jasper.compiler.Parser.parse(Parser.java:127)
    org.apache.jasper.compiler.ParserController.doParse(ParserController.java:255)
    org.apache.jasper.compiler.ParserController.parseDirectives(ParserController.java:120)
    org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:165)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:332)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:586)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:317)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.20 logs. 
```

Apache Tomcat/6.0.20

我试图找出答案，但我不明白问题出在哪里。我在下面输入了部分代码。代码是：

```
<%--
    Document   : rpt_monthly_schemewise
    Created on : Nov 1, 2012, 12:22:00 PM
    Author     : app.support
--%>

<%@page import="java.util.ArrayList"%>
<%@page import="java.sql.*"%>
<%@page import="Conn.GEN_Utility"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <%
                //   String FromScheme = GEN_Utility.getAllListValues(request.getParameterValues("FromScheme"));
                //  String FromAsset = GEN_Utility.getAllListValues(request.getParameterValues("FromAsset"));

                String ToScheme = GEN_Utility.getAllListValues(request.getParameterValues("ToScheme"));
                String ToAsset = GEN_Utility.getAllListValues(request.getParameterValues("ToAsset"));

                String FromDt = request.getParameter("dtFrom");
                String ToDate = request.getParameter("dtTo");

                String AMC_Branch = GEN_Utility.getAllListValues(request.getParameterValues("lstBranch"));
                String ISC_Branch = GEN_Utility.getAllListValues(request.getParameterValues("lstBranchKarvy"));
                String Zone_Branch = GEN_Utility.getAllListValues(request.getParameterValues("lstZone"));
              //  out.println(" AMCBranch " + AMC_Branch + " ISC_Branch " + ISC_Branch + " Zone " + Zone_Branch);
                String query_s_FD = null;
                String sql_Total_net = null;
                String Show_ISC=request.getParameter("chkBranch");
                if(Show_ISC==null){
                    Show_ISC="OFF";
                    }

           //    out.println(" Show_ISC "+Show_ISC);

                //   out.println(" FromScheme " + FromScheme);
                //  out.println(" FromAsset " + FromAsset);
                //  out.println(" ToScheme " + ToScheme);
                //   out.println(" ToAsset " + ToAsset);
                //  out.println(" From Date " + FromDt + " To Date " + ToDate);
                String STRcon = "jdbc/mis";
///////////find date before 4 days of fromdate
                String StartDay = FromDt.substring(0, 2).trim();
                String StartMon = FromDt.substring(3, 6).trim();
                String StartYear = FromDt.substring(7, FromDt.length()).trim();

//logic for findning next 4 days fromcurrent Fromdt
                String[] months = {"Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"};

                int[] TotalDayS = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
                ///find index of StartMon
                int indexOfMonth = 0;
                for (int i = 0; i < months.length; i++) {

                    if (StartMon.equals(months[i])) {
                        indexOfMonth = i;
                    }
                }
                int TotalDaysOFStartMonth = TotalDayS[indexOfMonth];
                int DecrementalVar = 4;
                int Previous_dt = 0;
                String Previous_month = "";
                int Previous_year = 0;
                String Pre_Date = "";
                //  System.out.print(" StartDAte "+StartDay+" deccemental "+DecrementalVar+" indexOfMonth "+indexOfMonth);

                if (DecrementalVar > Integer.parseInt(StartDay)) {
                    // System.out.print(" Inside 1st condition ");
                    if (Integer.parseInt(StartDay) == 01 && !StartMon.equals(months[11]) && !StartMon.equals(months[0])) {
                        ////// date is 1 and month is not dec
                        Previous_dt = 26;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear);
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date " + Pre_Date + " dtFrom " + FromDt);
                        //  System.out.print(" Inside 1st of 1st condition ");

                    } else if (Integer.parseInt(StartDay) == 1 && StartMon.equals(months[11])) {
                        ////// date is 1 and month is dec
                        Previous_dt = 26;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 1 && StartMon.equals(months[0])) {
                        ////// date is 1 and month is dec
                        Previous_dt = 26;
                        Previous_month = months[11];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    }
                    ////////////now for date 2////////////////

                    if (Integer.parseInt(StartDay) == 2 && !StartMon.equals(months[11]) && !StartMon.equals(months[0])) {
                        ////// date is 2 and month is not dec
                        Previous_dt = 27;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear);
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 2 && StartMon.equals(months[11])) {
                        ////// date is 2 and month is dec
                        Previous_dt = 27;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //   System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 2 && StartMon.equals(months[0])) {
                        ////// date is 1 and month is dec
                        Previous_dt = 27;
                        Previous_month = months[11];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    }
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                    if (Integer.parseInt(StartDay) == 3 && !StartMon.equals(months[11]) && !StartMon.equals(months[0])) {
                        ////// date is 3 and month is not dec
                        Previous_dt = 28;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear);
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        // System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 3 && StartMon.equals(months[11])) {
                        ////// date is 3 and month is dec
                        Previous_dt = 28;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //   System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 3 && StartMon.equals(months[0])) {
                        ////// date is 1 and month is dec
                        Previous_dt = 28;
                        Previous_month = months[11];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        //  System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    }

                } else if (DecrementalVar == Integer.parseInt(StartDay)) {

                    if (Integer.parseInt(StartDay) == 4 && !StartMon.equals(months[11]) && !StartMon.equals(months[0])) {
                        ////// date is 3 and month is not dec
                        Previous_dt = 28;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear);
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        // System.out.println(" Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                    } else if (Integer.parseInt(StartDay) == 4 && StartMon.equals(months[11])) {
                        ////// date is 3 and month is dec
                        Previous_dt = 28;
                        Previous_month = months[indexOfMonth - 1];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                     //   System.out.println(" Pre_Date " + Pre_Date + " dtFrom " + FromDt);

                    } else if (Integer.parseInt(StartDay) == 4 && StartMon.equals(months[0])) {
                        ////// date is 3 and month is dec
                        Previous_dt = 28;
                        Previous_month = months[11];
                        Previous_year = Integer.parseInt(StartYear) - 1;
                        Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                        System.out.println(" Pre_Date " + Pre_Date + " dtFrom " + FromDt);

                    }

                } else if (DecrementalVar < Integer.parseInt(StartDay)) {

                    Previous_dt = Integer.parseInt(StartDay) - DecrementalVar;
                    Previous_month = months[indexOfMonth];
                    Previous_year = Integer.parseInt(StartYear);
                    Pre_Date = String.valueOf(Previous_dt) + "-" + Previous_month + "-" + String.valueOf(Previous_year);
                    // System.out.println("DecrementalVar< Integer.parseInt(StartDay)  Pre_Date "+Pre_Date+" dtFrom "+FromDt);

                }
///////////////////////////////////////////////////////
                // String Todate="25-Dec-2012";
                String To_StartDay = ToDate.substring(0, 2).trim();
                String To_StartMon = ToDate.substring(3, 6).trim();
                String To_StartYear = ToDate.substring(7, FromDt.length()).trim();

                int incrementVar = 4;
                int indexOfToDateMonth = 0;
                for (int i = 0; i < months.length; i++) {

                    if (To_StartMon.equals(months[i])) {
                        indexOfToDateMonth = i;
                    }
                }
                int LastDate = Integer.parseInt(To_StartDay) + incrementVar;
                String LastMon = "";
                String LastYear = "";
                int DiffOfDays = TotalDayS[indexOfToDateMonth] - LastDate;
                String Last_Day = "";
                if (TotalDayS[indexOfToDateMonth] > LastDate) {

                    LastMon = To_StartMon;
                    LastYear = To_StartYear;
                    Last_Day = String.valueOf(LastDate) + "-" + LastMon + "-" + LastYear;
                } else if (DiffOfDays == 0) {
                    LastDate = TotalDayS[indexOfToDateMonth];
                    LastMon = To_StartMon;
                    LastYear = To_StartYear;
                    Last_Day = String.valueOf(LastDate) + "-" + LastMon + "-" + LastYear;

                } else if (0 > DiffOfDays) {
                    if (To_StartMon.equals("Dec")) {
                        LastDate = DiffOfDays * -1;
                        LastMon = months[0];
                        LastYear = String.valueOf(Integer.parseInt(To_StartYear) + 1);
                        Last_Day = String.valueOf(LastDate) + "-" + LastMon + "-" + LastYear;

                    } else {
                        LastDate = DiffOfDays * -1;
                        LastMon = months[indexOfToDateMonth + 1];
                        LastYear = To_StartYear;
                        Last_Day = String.valueOf(LastDate) + "-" + LastMon + "-" + LastYear;

                    }

                }
///////////////logic for gettting next 10 days from Todate///////////////////////////////////////////////////////////////
                ////////logic for getting next 10th day from search date///////////////////////////////////////////////////
                int incrementVarBy10 = 10;
                //  String  Last_Day10="";
                int LastDate10 = Integer.parseInt(To_StartDay) + incrementVarBy10;
                String LastMon10 = "";
                String LastYear10;
                int DiffOfDays10 = TotalDayS[indexOfToDateMonth] - LastDate10;
                String Last_Day10 = "";

                if (TotalDayS[indexOfToDateMonth] > LastDate10) {

                    LastMon10 = To_StartMon;
                    LastYear10 = To_StartYear;
                    Last_Day10 = String.valueOf(LastDate10) + "-" + LastMon10 + "-" + LastYear10;
                } else if (DiffOfDays10 == 0) {
                    LastDate10 = TotalDayS[indexOfToDateMonth];
                    LastMon10 = To_StartMon;
                    LastYear10 = To_StartYear;
                    Last_Day10 = String.valueOf(LastDate10) + "-" + LastMon10 + "-" + LastYear10;

                } else if (0 > DiffOfDays10) {
                    if (StartMon.equals("Dec")) {
                        LastDate10 = DiffOfDays10 * -1;
                        LastMon10 = months[0];
                        LastYear10 = String.valueOf(Integer.parseInt(To_StartYear) + 1);
                        Last_Day10 = String.valueOf(LastDate10) + "-" + LastMon10 + "-" + LastYear10;

                    } else {
                        LastDate10 = DiffOfDays10 * -1;
                        LastMon10 = months[indexOfToDateMonth + 1];
                        LastYear10 = To_StartYear;
                        Last_Day10 = String.valueOf(LastDate10) + "-" + LastMon10 + "-" + LastYear;

                    }

                }

                //   out.println(" pre date  " + Pre_Date + " Last DAy " + Last_Day + " Last_day10 " + Last_Day10);
%>
    <%
///////////////////delete from Temp_MonthlyReport///////////////////////////////////////////////////////////////////////////////
                String query_del_temp = "delete from Ekarvy.Temp_monthlyReport";
                Connection conn_del_temp = GEN_Utility.getConnection(STRcon);
                PreparedStatement ps_del_temp = conn_del_temp.prepareStatement(query_del_temp);
                ps_del_temp.executeUpdate();
                //   out.println("From Scheme " + FromScheme + " To Scheme " + ToScheme);
                conn_del_temp.close();
                ps_del_temp.close();
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
                ///////////////////////////////////////insert data into temp_DailyReport/////////////////////////////////////////////////////////////////////////
                String sql = "insert into Ekarvy.Temp_monthlyReport(REFNO,FUND,SCHEME,SCHPLAN,ACNO,BRANCH,TRNO,RECDT,TRDT,PROCESSDT,BATCHCLOSEDT,AMT,UNITS,NAV,POP,TRTYPE,BROKER,"
                        + "SUBBROKER,REMARKS,BACKDATEDREASON,APPLNO,CHQNO,CHQDT,CHQBANK,CHQTYPE,CHQCLEAREDDT,"
                        + "LOADAMT,LOADPER,INWARDNO,PURRED,ATMCARDNO,USER_ID,DT_UPDATE,OLD_BRANCH)"
                        + "select a.REFNO,a.FUND,a.SCHEME,a.SCHPLAN,a.ACNO,a.BRANCH,a.TRNO,a.RECDT,a.TRDT,a.PROCESSDT,a.BATCHCLOSEDT,a.AMT,a.UNITS,a.NAV,a.POP,a.TRTYPE,a.BROKER,"
                        + "a.SUBBROKER,a.REMARKS,a.BACKDATEDREASON,a.APPLNO,a.CHQNO,a.CHQDT,a.CHQBANK,a.CHQTYPE,a.CHQCLEAREDDT,"
                        + "a.LOADAMT,a.LOADPER,a.INWARDNO,a.PURRED,a.ATMCARDNO,a.USER_ID,a.DT_UPDATE,a.BRANCH from EKARVY.VW_DATA_TRAN a where a.trdt between '" + Pre_Date + "' and '" + Last_Day10 + "'";

                Connection con = null;

                PreparedStatement ps = null;
                ////remove this STRconwhere import <%@ include file="/vw_chksession.jsp"

                try {
                    con = GEN_Utility.getConnection(STRcon);
                    ps = con.prepareStatement(sql);

                    //   out.println(sql);

                    ps.executeQuery();
                    con.close();
                    ps.close();
                } catch (Exception e) {

                    out.println(" Error at Inserting values in Temp_monthlyReport " + e);
                }
                ///////////////////////////////////////////////////////////////////////////////UPDATE  FOR 
```

# python - 在scrapy爬行中获取服务不可用错误

> ID：13965684
> 
> 赞同：4
> 
> 时间：2012-12-20T05:09:29.243
> 
> 标签：python, scrapy

我正在尝试用scrapy抓取一个论坛网站。如果我有，爬虫工作正常

CONCURRENT_REQUESTS = 1

但是，如果我增加该数字，那么我会收到此错误

> 2012-12-21 05:04:36+0800 [工作] 调试：重试 http://www.example.com/profile.php?id=1580>（失败 1 次）：503 服务不可用

我想知道论坛是否阻止了请求或存在一些设置问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T07:20:08.283

HTTP 状态码 503，“服务不可用”，表示（出于某种原因）服务器无法处理您的请求。这通常是一个暂时的错误。我你想知道你是否被屏蔽了，过一会儿再试，看看会发生什么。

这也可能意味着您获取页面的速度太快了。解决方法不是通过将并发请求保持在 1（并可能增加延迟）来做到这一点。要有礼貌。

如果你刮得够多，你*会遇到各种错误。*只要确保你的爬虫可以处理它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-01T22:08:47.403

这个答案可能有点晚了，但对我有用的是这个。我在指定 Mozilla/5.0 用户代理的地方添加了一个标题。然后我停止收到“HTTP 状态代码 503”错误。

代码如下，刚刚通过亚马逊运行没有问题。这段代码基本上收集了亚马逊主页的所有链接。代码是一种 Python 编程语言代码。

```
 import urllib2
    from bs4 import BeautifulSoup, SoupStrainer

    url = "http://www.amazon.com"
    opener = urllib2.build_opener()
    opener.addheaders = [('User-Agent', 'Mozilla/5.0')]
    website = opener.open(url)

    html = website.read()
    soup = BeautifulSoup(html, "html.parser")

    for element in soup.find_all(['a','link']):
        link = element.get('href')
        print link 
```

# jquery - 精确布局div

> ID：13965685
> 
> 赞同：-7
> 
> 时间：2012-12-20T05:09:33.243
> 
> 标签：jquery

我发现有时我无法精确地布局元素。你可以在[这里](https://stackoverflow.com/questions/13964891/how-to-precisely-layout-div-in-html)看到问题。检查文档就绪事件的脚本。你会看到，即使我已经计算了元素高度，但它不能很好地工作。所以我想知道是不是单位问题。谁能告诉我为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:10:37.810

jQuery 在 中返回值`px`，它在文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:11:26.750

取决于功能。您需要查看文档才能看到。在这个原因它只是整数。

设置 CSS 值时，如果不指定单位，则假定为像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:12:35.307

> 返回无单位像素

来源：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

# ios - 如何在 iPhone 应用程序中集成 SIRI？

> ID：13965686
> 
> 赞同：6
> 
> 时间：2012-12-20T05:09:44.190
> 
> 标签：ios, ipad, ios6, siri

我正在开发一个 iPad 应用程序。我想在其中集成 SIRI 功能。

所以，请指导我做这件事。其实我不知道如何开始。

谢谢，

CP

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T05:15:12.503

到目前为止，苹果还没有为第三方应用程序发布 siri 的 api。

如果您正在寻找文本到语音、语音到文本的功能。有很多外部 api 之类的：

1.  [细微差别 - 龙](http://www.nuance.com/index.htm)
2.  [演讲](http://www.ispeech.org/)
3.  [开耳](http://www.politepix.com/openears/)

还有很多其他的api。

OpenEars是一个开源的离线api，另外两个是付费和在线的。

# javascript - 使用 Javascript/greasemonkey 来“堆叠”网站

> ID：13965689
> 
> 赞同：1
> 
> 时间：2012-12-20T05:09:51.023
> 
> 标签：javascript, greasemonkey

我想在 url 中输入 www.aaa.com，然后有一个油脂猴脚本，它会加载 www.aaa.com，但也会在 www.aaa.com 的下方加载 www.bbb.com。您应该能够定义 www.bbb.com 的 url。

我的概念代码：

```
// ==UserScript==
// @name        google-wired
// @namespace   test
// @include     www.google.com
// ==/UserScript==

var secondURL = 'http://www.wired.com';

document.body.appendChild(HTML of second URL) 
```

输出将是有线启动页面顶部的谷歌启动页面。

# wpf - 每个对 ResourceDictionary 的引用是否创建一个新实例，或者 ResourceDictionaries 是否具有缓存机制

> ID：13965694
> 
> 赞同：10
> 
> 时间：2012-12-20T05:10:28.920
> 
> 标签：wpf, xaml, optimization, resourcedictionary

我有一些这样的代码

```
 _images = new ResourceDictionary
        {
            Source = new Uri(@"pack://application:,,,/Trilogy.T1TY2012.Transmission;component/Resources/Images.xaml")
        }; 
```

它在我的应用程序中多次出现（有时作为 C#，有时作为等效的 XAML）。每个实例是否包含其每个资源的单独实例，或者是否存在在所有资源字典中共享这些资源的幕后缓存机制？

我正在尝试确定是否需要有效利用资源字典（即：共享特定实例），或者 WPF 是否已经处理了这种优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T05:40:22.087

如果我理解您的问题，那么答案是，它们不会在不同`ResourceDictionary`实例之间“缓存”*：ResourceDictionary 的实例*不会*使用可能已经在另一个 ResourceDictionary 中实例化的相同类型/键的任何资源。*当然，这要与单个 ResourceDictionary*中的键进行对比；这些条目中的每一个都确实是“缓存的”，因为它们被创建一次并共享（值类型资源例外，每次使用时都会复制）。

因此，如果它们是内存密集型的，您必须管理资源的范围。您始终可以将每个资源放入主`App.xaml`字典中，这样可以确保每个条目都会被实例化一次，并为其所有使用者共享。请注意，[资源是延迟加载的](http://msdn.microsoft.com/en-us/library/system.windows.resourcedictionary.aspx)：

> 当 XAML 加载程序加载应用程序代码时，不会立即处理 ResourceDictionary 中的项目。相反，ResourceDictionary 作为一个对象持续存在，并且只有在特别请求它们时才会处理各个值。

因此，您不必担心应用程序在启动时会加载App.xaml 中的*所有*资源；它仅根据需要加载它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-19T12:21:53.797

拥有一个不会为每次使用实例化的字典

```
/// <summary>
    /// The shared resource dictionary is a specialized resource dictionary
    /// that loads it content only once. If a second instance with the same source
    /// is created, it only merges the resources from the cache.
    /// </summary>
    public class SharedResourceDictionary : ResourceDictionary
    {
        /// <summary>
        /// Internal cache of loaded dictionaries 
        /// </summary>
        public static Dictionary<Uri, ResourceDictionary> _sharedDictionaries =
            new Dictionary<Uri, ResourceDictionary>();

        /// <summary>
        /// Local member of the source uri
        /// </summary>
        private Uri _sourceUri;

        /// <summary>
        /// Gets or sets the uniform resource identifier (URI) to load resources from.
        /// </summary>
        public new Uri Source
        {
            get { return _sourceUri; }
            set
            {
                _sourceUri = value;

                if (!_sharedDictionaries.ContainsKey(value))
                {
                    // If the dictionary is not yet loaded, load it by setting
                    // the source of the base class
                    base.Source = value;

                    // add it to the cache
                    _sharedDictionaries.Add(value, this);
                }
                else
                {
                    // If the dictionary is already loaded, get it from the cache
                    MergedDictionaries.Add(_sharedDictionaries[value]);
                }
            }
        }
    } 
```

对于资源本身，您可以使用 x:shared 属性

# linux - XMonad：dmenu 在启动时未启动/生成

> ID：13965699
> 
> 赞同：6
> 
> 时间：2012-12-20T05:10:52.883
> 
> 标签：linux, haskell, ubuntu-12.04, xmonad

XMonad 的新手，到目前为止很喜欢它。我有一个相当普通/常规的 XMonad 设置，并且遇到了**dmenu**问题。当我登录并点击时，`mod+p`什么也没有发生。如果我然后打开一个终端并点击`xmonad --restart`then `mod+p`，`dmenu`将会工作。

我的一定有什么问题`xmonad.hs`？我尝试了 XMonad 的非自定义设置，一切正常（即`dmenu`登录后工作）。

我的问题：

1.  我的有什么问题`xmonad.hs`吗？
2.  为什么不`dmenu`工作，除非我`xmonad --restart`？
3.  在启动 xmonad 时，是否会出现某些故障`xmonad.start`会阻止 dmenu 正确加载？

这是我的文件（从[overthink](https://github.com/overthink/dotfiles)借来的）。：

**xmonad.hs**

```
import System.IO
import XMonad
import XMonad.Hooks.DynamicLog
import XMonad.Hooks.ManageDocks
import XMonad.Hooks.SetWMName
import XMonad.Util.EZConfig(additionalKeys)
import XMonad.Util.Run(spawnPipe)
import XMonad.Hooks.ICCCMFocus

myWorkspaces = ["1", "2", "3", "4", "5", "6"] 

myManageHook = composeAll
  [ className =? "Gimp" --> doFloat
  , className =? "Vncviewer" --> doFloat
  ]

main = do
  xmproc <- spawnPipe "/usr/bin/xmobar /home/aaron/.xmobarrc"
  xmonad $ defaultConfig { terminal = "urxvt" }
      { manageHook = manageDocks <+> manageHook defaultConfig
      , startupHook = takeTopFocus >> setWMName "LG3D" -- fix for Java apps
      , layoutHook = avoidStruts  $  layoutHook defaultConfig
      , logHook = dynamicLogWithPP xmobarPP
                      { ppOutput = hPutStrLn xmproc
                      , ppTitle = xmobarColor "green" "" . shorten 50
                      }
      , modMask = mod4Mask     -- Rebind Mod to the Windows key
      , workspaces = myWorkspaces
      } `additionalKeys`
      [ ((mod4Mask .|. shiftMask, xK_l), spawn "gnome-screensaver-command --lock") ] 
```

**xmonad.desktop**

```
[Desktop Entry]
Encoding=UTF-8
Name=Xmonad-****
Comment=Ligthweight, pretentious tiling window manager
Exec=xmonad.start
Icon=xmonad.png
Type=XSession 
```

**xmonad.start**

```
#!/bin/bash

xrdb -merge .Xresources

trayer --edge top --align right --SetDockType true --SetPartialStrut true --expand true --widthtype percent --width 10 --heighttype pixel --height 20 --transparent true --alpha 0 --tint 0x333333 &

# settings daemon is a prereq for some other gnome apps
gnome-settings-daemon &

# Network monitor (connections, vpns) applet in tray
if [ -x /usr/bin/nm-applet ] ; then
    nm-applet --sm-disable &
fi

# volume indicator in tray
if [ -x /usr/bin/gnome-sound-applet ] ; then
  gnome-sound-applet &
fi

eval $(gnome-keyring-daemon --start)
export GNOME_KEYRING_SOCKET
export GNOME_KEYRING_PID

#exec xmonad
dbus-launch --exit-with-session xmonad 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:37:25.387

更新：

似乎已经解决问题的修复正在改变：

```
exec xmonad 
```

至：

```
touch ~/.xmonad/xmonad.hs
exec xmonad 
```

在

```
/usr/local/bin/xmonad.start (or .xinitrc/.xsession if xmonad is started using startx) 
```

* * *

老的：

怎么改：

```
} `additionalKeys`
 [ ((mod4Mask .|. shiftMask, xK_l), spawn "gnome-screensaver-command --lock") ] 
```

至：

```
} `additionalKeys`
  [ ((mod4Mask .|. shiftMask, xK_l), spawn "gnome-screensaver-command --lock") 
  , ((mod4Mask, xK_p), spawn "dmenu_run -b -nb black") ] 
```

我和你有同样的问题，这是因为我使用了类似的东西：

```
((mod4Mask, xK_p), spawn "exe=`dmenu_path | dmenu` && eval \"exec $exe\"") 
```

出于某种原因，它仅在“xmonad --restart”之后才能正常工作。将绑定更改为简单的“dmenu-run”解决了这个问题。但是，在您的情况下，您似乎根本没有绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:45:30.777

我有一种模糊的感觉，当你第一次启动 xmonad 时，它使用一个可执行文件+配置，然后当你重新编译时，它会找到“正确”的那个。在 xmonad.desktop 中，尝试更改该`Exec=`行以包含 xmonad.start 的完整路径。

```
Exec=/full/path/to/xmonad.start 
```

或者您可以尝试更改 xmonad.start 中的最后一行以包含 xmonad 可执行文件的完整路径。

```
dbus-launch --exit-with-session /full/path/to/xmonad 
```

要尝试的另一件事是将最后两行更改为：

```
exec xmonad
#dbus-launch --exit-with-session xmonad 
```

如果这些选项中的任何一个改变了您所看到的行为，那可能会给我们一个线索。

* * *

编辑：让我们尝试一种不同的启动方式，看看我们是否可以学到任何东西。不要启动任何窗口管理器，而是登录到普通终端。键入命令`xinit -- xmonad`或`xinit -- /full/path/to/xmonad`。

或者，创建`.xinitrc`包含一行的文件：

```
xmonad 
```

然后键入命令`startx`。

我还在 Xmonad FAQ 上找到了这个，这可能会有所帮助：

> 2.6 not found 错误或对 xmonad.hs 的更改不会生效
> 
> 确保 ghc 和 xmonad 可执行文件都在您启动 X 的环境 PATH 中。或者将它们符号链接到 PATH 中已经存在的位置。ghc-pkg 列表应该显示没有括号的 ghc、xmonad、X11 等，例如 {xmonad} 是错误的。ghc-pkg check 会告诉你是否有不一致的依赖关系或其他注册问题。
> 
> mod-q 操作调用 xmonad 二进制文件以重新编译自身，因此如果您的显示管理器使用 /path/to/xmonad 启动它，您还必须编辑 xmonad.hs mod-q 绑定以使用完整路径并重新启动X（或在较新的版本中使用'xmonad --restart'）使用新的 mod-q 完整路径绑定重新启动 xmonad。

# http - HTTP 和会话

> ID：13965701
> 
> 赞同：0
> 
> 时间：2012-12-20T05:11:02.487
> 
> 标签：http, session, web, session-state, stateful

我刚刚在[http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)浏览了 http 1.1 的规范，并遇到了关于连接的部分[http://www.w3.org/Protocols/rfc2616/rfc2616- sec8.html#sec8](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8)说

" HTTP/1.1 和早期版本的 HTTP 之间的一个显着区别是持久连接是任何 HTTP 连接的默认行为。也就是说，除非另有说明，客户端应该假设服务器将保持持久连接，即使在错误响应之后从服务器。

持久连接提供了一种机制，通过该机制客户端和服务器可以发出 TCP 连接关闭的信号。该信令使用连接头字段（第 14.10 节）进行。一旦发出关闭信号，客户端就不能再在该连接上发送任何请求。"

然后我还浏览了[https://www.rfc-editor.org/rfc/rfc2965](https://www.rfc-editor.org/rfc/rfc2965)上关于 http 状态管理的部分，该部分在其第 2 部分中说

“目前，HTTP 服务器响应每个客户端请求，而不将该请求与先前或后续请求相关联；”

RFC 2616 中关于需要持久连接的部分还说，在每次客户端希望获取 url 时，在持久连接之前，它必须为每个新请求建立一个新的 TCP 连接。

现在我的问题是，如果我们在 http/1.1 中有持久连接，那么如上所述，客户端不需要为每个新请求建立新连接。它可以通过同一个连接发送多个请求。因此，如果服务器知道每个后续请求都来自同一个连接，那么该请求是否来自同一个客户端不是很明显吗？因此这是否不足以维持状态，这是否足以让服务器了解请求来自同一个客户端？在这种情况下，为什么需要一个单独的状态管理机制呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:13:26.163

基本上，是的，这是有道理的，但 HTTP 持久连接用于消除连接处理的管理 TCP/IP 开销（例如连接/断开连接/重新连接等）。这并不是要说明通过连接移动的数据的状态，这就是您所说的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:56:41.603

不会。例如，请求路径中可能有一个中间（例如代理或反向代理），它聚合来自多个 TCP 连接的请求。

请参阅[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-21.html#intermediaries](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-21.html#intermediaries)。

# javascript - JS： 和 有什么区别！闭包和 () 闭包？

> ID：13965702
> 
> 赞同：1
> 
> 时间：2012-12-20T05:11:18.050
> 
> 标签：javascript, scope, closures, anonymous-function

> **可能重复：**
> [函数前的感叹号有什么作用？](https://stackoverflow.com/questions/3755606/what-does-the-exclamation-mark-do-before-the-function)

所以我回过头来查看我自己的一些代码以及其他一些 javascript 代码，我意识到不久前当我开始编写 javascript 库时，我正在使用看起来像这样的闭包：

```
(function( window, document, undefined ) {
    // code
})( window, document ); 
```

但后来我看到了一些引导代码，我改成了这样的语法：

```
! function (window, document, undefined) {
    // code
}(window, document); 
```

现在，如果我没有错（如果我错了，请纠正我），放置“！” 在我的匿名函数前面只是导致它被视为'（）'然后返回（到无处？）函数返回的值是否不是未定义、null或空的布尔值。

我想知道的是，使用'！（）'语法而不是'（）（）'之间真的有区别吗？是否有某些浏览器会抱怨？

任何想法表示赞赏，谢谢！XD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:39:35.603

您要问的是自调用函数，也称为 IIFE（[立即调用函数表达式](http://www.google.com.my/search?q=IIFE)）。这与闭包不同。尽管它确实创建了一个闭包（实际上，javascript 中的所有函数都创建了闭包，而不仅仅是 IIFE）。

不过，您可能会混淆这两个问题是可以理解的，因为 IIFE 通常是在解释闭包的上下文中引入的。但请注意，它们是不同的东西。闭包是私有的、共享的“类全局”变量。IIFE 是在定义后立即调用的函数。

现在，IIFE 是如何工作的？线索就在名字里。这是“FE”IIFE - 函数表达式。

如您所知，在 javascript 中，有两种创建函数的方法 - 使用函数声明：

```
function foo () {} 
```

并使用函数表达式：

```
foo = function () {} 
```

函数表达式只是在表达式的上下文*中声明的函数。javascript中的表达式是什么？只是任何评估某事的陈述。

传统上，人们将表达式识别为：

1.  `=`标志右侧的任何东西

    ```
     a = /* expression */ 
    ```

2.  大括号里的任何东西

    ```
    (/* expression */) 
    ```

所以传统上这是声明函数表达式的两种“标准”方式：

```
foo = function(){} 
```

和

```
(function(){}) 
```

第二种语法使执行表达式返回的函数对象变得容易。但是，实际上，表达式是 js 进行数学（或逻辑，无论如何都是数学）的任何地方。因此，在函数声明中添加运算符也会将其转换为表达式。以下是有效的，因为它们是一元运算符（意​​思是，它们在左侧没有任何东西是合法的）：

```
!function(){}()

+function(){}()

-function(){}()  // I especially like this one because it
                 // looks like a command line switch

typeof function(){}() 
```

但是，如果您使用一些一次性值或变量，您也可以使用二元运算符。以下也有效：

```
x=function(){}()
0==function(){}()
1*function(){}()
2/function(){}() 
```

哎呀，你甚至可以滥用三元运算符：

```
0?0:function(){}() // valid and works! 
```

它没有什么神奇之处。它不是嵌入到 javascript 中的特定语法。就像`(function(){}())`不是 IIFE 的特定语法。只是当在表达式中声明时，函数将自身作为可以立即调用的对象返回。

但我建议不要使用上述任何非标准形式。出于同样的原因，您问了这个问题 - 大多数 javascript 程序员不习惯看到它们，这可能会导致混淆。直到你问这个问题，我自己才意识到你可以做到这一点。尽管如此，了解何时需要编写诸如缩小器、代码生成器等内容还是很有用的。

* * *

* 我在这里使用的是传统定义中的“上下文”，而不是规范中定义的“上下文”的 javascript 特定含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:23:05.397

没什么，它们只是实现同一件事的两种不同方式。不过，它的`()`可读性略高。

# eclipse - 如何使用 eclipse 启动配置字符串提示两个值？

> ID：13965705
> 
> 赞同：9
> 
> 时间：2012-12-20T05:11:25.637
> 
> 标签：eclipse, launching-application

在 Eclipse 外部工具运行配置中提示用户很简单：

```
${string_prompt:"Enter a string":"DefaultString"} 
```

但是，有没有办法让我配置我的运行配置以将其用作我的外部工具的两个单独的参数？会导致：

```
my.exe --arg1=${string_prompt1} --arg2=${string_prompt1} 
```

我绝对不想将这个逻辑推入应用程序本身。我只想简化本地测试构建配置。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T21:18:00.957

您只能有**一个**提示，您可以在其中传递任意数量的参数，并用空格分隔。您随提示提供的字符串将分配给您的类`args`的方法变量。`public static void main`

要为多个参数提供默认值，您可以使用以下内容：

```
${string_prompt:"Enter two values separated by space":firstDefault secondDefault} 
```

如果您需要使用相同的参数多次重复测试，您可以考虑使用保存的运行配置来修复参数（只需将它们列在“参数”选项卡的“程序参数”中）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-22T23:07:07.147

您可以在运行配置中使用多个 string_prompt 条目。这是我目前在我的程序参数中用于用户/密码组合的内容。

```
${string_prompt:Username:DefaultUsername} ${string_prompt:Password} 
```

第一个 string_prompt 显示一个对话框，说“请为用户名输入一个值”，填写默认值 DefaultUsername。第二个显示“请为密码输入一个值”，没有默认值。每次我运行时，这两个参数都会传入。效果很好！

# jquery - JQuery .load - 在表单标签中调用按钮时不起作用

> ID：13965707
> 
> 赞同：3
> 
> 时间：2012-12-20T05:11:28.233
> 
> 标签：jquery, forms, load

我在函数中有一个简单的 JQuery 加载语句[忽略命名]。正如它所呈现的那样，它不起作用。当表单标签被删除时，它会这样做。感谢您对为什么会发生这种情况的建议..

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>HTML 5 Document</title>

<script type="text/javascript"  src="../js/jquery-1.8.3.js"></script>

<script type="text/javascript" >

$("document").ready(function() {

$('#getCalc').bind('click' , getPlainHTMLfromServer );
}); // end ready

function getPlainHTMLfromServer() {
$('#content').load("plainHTML.html");

}// end getPlainHTMLfromServer()

</script>
</head>

<body>
<div id="content"></div>
<form>
<button id="getCalc">Double</button>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:15:48.710

您应该防止*提交事件*的默认操作，默认情况下按钮的类型属性是提交：

```
function getPlainHTMLfromServer(event) {
   event.preventDefault();
   $('#content').load("plainHTML.html");
} 
```

或者`type='button'`为按钮元素添加属性：

```
<button id="getCalc" type="button">Double</button> 
```

# concurrency - 从独立删除的 BindingSource 或 DataTable 中分离行

> ID：13965709
> 
> 赞同：0
> 
> 时间：2012-12-20T05:11:33.300
> 
> 标签：concurrency, strongly-typed-dataset

在 winforms 应用程序中，我通过设计器创建了 myBindingSource、myTableAdapter 等，方法是将数据表拖放到表单中。在表单中，我有按钮保存和删除。要求是单击删除按钮时应立即从数据库中删除记录，而不是单击保存按钮时。所以我通过设计器将 DeleteMyRecord 查询添加到 MyDataSet 并使用该删除查询进行删除。问题是删除的记录仍在 myDataSet 实例中，所以我需要将它从它的数据表中分离出来。如果我只是执行以下操作：

```
myBindingSource.DeleteCurrent(); 
```

它仍然会使 myDataSet 变脏，因此，当我单击 Save 按钮时，它会导致并发冲突。在我删除该记录之前，我想要的只是分离已删除的行，但不影响其他更改（如果有的话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:27:40.153

您可以使用 DataRowCollection 对象的 Remove 方法来完成此操作。这是否是一个好的设计是另一回事。

# android - AutoCompleteTextView 建议剪辑文本视图

> ID：13965712
> 
> 赞同：0
> 
> 时间：2012-12-20T05:11:51.247
> 
> 标签：android, textview, autocompletetextview, clipping

我已经为我实现了一个自定义适配器`AutoCompleteTextView`以及一个用于建议的自定义列表项视图。一切正常，除了建议对话框剪辑建议。这很可能是由于 textview 是多行的，但我不知道如何告诉建议弹出窗口展开以填充整个视图。这是我的视图代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:ellipsize="none"
        android:textColor="@android:color/black"
        android:textSize="15dp"
        android:padding="10dp" />
</RelativeLayout> 
```

这是它的样子： ![图片](../Images/6295ede888bc0b7bcf9027611d41b114.png)

**我还注意到，如果 android 版本更高，它不会剪辑，我正在 2.3.5 上进行测试，它会剪辑（我的手机），但在 4.1（模拟器）上看起来不错。**

有人知道怎么修这个东西吗？

# jsp - 如何通过标签“a”将值从查看器传递到控制器

> ID：13965713
> 
> 赞同：0
> 
> 时间：2012-12-20T05:11:59.607
> 
> 标签：jsp, jakarta-ee, spring-mvc

我想通过标签“a”将值从查看器发送到控制器，而不使用“form”标签。

在我的查看器中，我编码：

```
 <input type="text" id="stuid"/>
           <input type="text" id="stuname"/>

           <a href="student.html? //something here that I don't know... 
```

在控制器中我应该如何处理它。

我不知道是否可以使用标签将值从查看器传递给控制器​​。请帮助我...谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:48:45.203

您可以从如下链接传递参数`<a>`：

```
<a href="student.html?name=John&age=21">Student</a> 
```

在控制器中，您可以映射请求参数，例如：

```
@RequestMapping("student")
public String student(@RequestParam("name") String name, 
                 @RequestParam("age") Integer age) {
  //...use name and age
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:21:24.507

你可以试试这个

```
<HTML> 
<HEAD> 
<SCRIPT language="JavaScript"> function test() 
{ var p=document.getElementById("stuid").value;
    window.open("sample.html?val="+p,'_self'); 
} 
</SCRIPT> 
</HEAD> 
<BODY>
<input type="text" id="stuid" name="stuid"/> 
<input type="text" id="stuname" name="stuname"/> 
<A HREF="javascript:test()">Test</a>
</BODY> 
</HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T04:53:01.993

我建议你使用 ajax 和 JQUERY，例如我认为你必须将 3 个参数从 JSP 传递给 SERVLET，而不使用表单标签

索引.jsp

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Index Page</title>

<script src="http://code.jquery.com/jquery-1.10.2.js" type="text/javascript"></script>
<script src="js/app-ajax.js" type="text/javascript"></script>
</head>
<body>

        Enter Your Name: <input type="text" id="name" /><br>
        Enter our user name :<input type="text" id="userName"><br>
        Enter your Password :<input type="password" id="password"><br>
        <input type="button" value="Submit" onclick="ajaxCall();">        
    <br>

    <strong> Response</strong>:
    <div id="ajaxGetUserServletResponse"></div><br>
    <div id="ajaxGetUserServletResponseusername"></div><br>
    <div id="ajaxGetUserServletResponsepassword"></div><br>
</body>
</html> 
```

应用程序-ajax.js

```
 function ajaxCall(){
    var name = jQuery("#name").val(); 
    var userName = jQuery("#userName").val();
    var password= jQuery("#password").val();
    alert(name);
    alert(userName);
    alert(password);

    jQuery.ajax({
        url : "GetUserServlet", 
        method: "GET", 
        type : "JSON", 
        data : "name="+name+"&userName="+userName+"&password="+password,// query parameters 1st 
        success : function(response){
            $('#ajaxGetUserServletResponse').text(response);

        }
    });

} 
```

GetUserServlet.java

```
package com.logic;

import java.io.IOException;

import java.util.ArrayList;

import javax.management.relation.RelationSupportMBean;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class GetUserServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        userBean ub = new userBean();
        String name = request.getParameter("name").trim();
        String userName = request.getParameter("userName").trim();
        String password = request.getParameter("password").trim();

        System.out.println("name catched "+name);
        System.out.println("username catched"+userName);
        System.out.println("Password catched"+password);

        ArrayList<userBean> list = new ArrayList<userBean>();
         ub=new userBean();
         ub.setName(name);
         ub.setUserName(userName);
         ub.setPassword(password);
         list.add(ub);  

         response.setContentType("text/plain");
         response.getWriter().print(list);

    }

} 
```

用户Bean.java

```
package com.logic;

public class userBean 
{
    private String name;
    private String userName;
    private String password;
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>AjaxJspServlet</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

<servlet>
<servlet-name>one</servlet-name>
<servlet-class>com.logic.GetUserServlet</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>one</servlet-name>
<url-pattern>/GetUserServlet</url-pattern>
</servlet-mapping>

</web-app> 
```

# php - 登录会话问题

> ID：13965718
> 
> 赞同：0
> 
> 时间：2012-12-20T05:12:24.853
> 
> 标签：php, html, mysql, sql

出于某种原因，这是我的代码，它总是返回密码不正确。我不确定我是否只是在某个地方忘记了一个支架，我怎样才能使它更安全，因为现在我正在使用该`_post`功能。

```
<?php
  include 'config.php';

  session_start();
  session_destroy();
  session_start();

  $UserName = $_POST['UserName'];
  $PassWord = $_POST['PassWord'];

  if ($UserName&&$PassWord)
  {
    mysql_select_db("SegmentMath") or die ("Couldn't find database sorry.");   
    $query = mysql_query("SELECT * FROM Users WHERE UserName='$UserName'");    
    $numrows = mysql_num_rows($query);

    if ($numrows!=0)
    {
      // code to login
      while ($row = mysql_fetch_assoc($query))
      {
        $dbUserName = $row['UserName'];
        $dbPassWord = $row['PassWord'];
      }

      //check to see if they match!
      if ($UserName==$dbUsername&&$PassWord==$dbPassWord)
      {
        $_SESSION['UserName']=$dbUsername;
        $_SESSION['PassWord']=$dbPassWord;

        echo "<p>Finished Software</p>";
      }
      else
      {
        echo "Incorrect Password";
      }
    }
    else die("Sorry username not found!");
  }
  else die("Please Enter A Valid Username And Password!");
?> 
```

所以我几乎可以肯定我在做一些愚蠢的错误，它让我难倒了近 30 分钟。这个文件就是`login.php`这样，如果用户在`login.html`页面上输入用户名和密码，它就会将该数据推送到这个页面`Login.Php`。

我很困惑为什么它说密码不正确，即使登录正确并且在数据库中也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:20:10.653

我会说，最好使用这个，我的意思是创建查询来查找`username`和`password`

```
$login = mysql_query("SELECT * FROM users WHERE ID='". $UserName ."' AND PASSWORD='". md5($PassWord) ."');
$row=mysql_fetch_array($login); // fetch row
if($row!=null)   // if found row 
{
$_SESSION['UserName'] = $row['UserName']; // store in session
$_SESSION['PassWord'] = $row['PassWord']; 
} %> 
```

代替

```
if (($UserName==$dbUsername)&&($PassWord==$dbPassWord))
{

$_SESSION['UserName']=$dbUsername;
$_SESSION['PassWord']=$dbPassWord;

echo "<p>Finished Software</p>";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:30:18.157

您的代码中有错字。PHP 中的变量区分大小写...

```
19\.     while ($row = mysql_fetch_assoc($query))
20\.           {
21\.             $dbUserName = $row['UserName'];
22\.             $dbPassWord = $row['PassWord'];
23\.           }
24\.     
25\.           //check to see if they match!
26\.           if ($UserName==$dbUsername&&$PassWord==$dbPassWord) 
```

**第21**行的变量与第**26**行的变量不匹配。

`$dbUserName`不一样`$dbUsername`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:18:47.170

存储密码时，您可能正在使用某种加密。例如，如果你正在使用`md5()`（只是一个例子，md5 不是最好的密码）你应该这样检查：

```
if ($UserName == $dbUsername && md5($PassWord) == $dbPassWord)
{ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:30:42.103

```
if ($UserName==$dbUsername <= capitalize $dbUserName)
{
    //YOUR LOGIC
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T05:34:15.037

```
if ($UserName==$dbUsername&&$PassWord==$dbPassWord)
      {
        $_SESSION['UserName']=$dbUsername;
        $_SESSION['PassWord']=$dbPassWord;

        echo "<p>Finished Software</p>";
      }
      else
      {
        echo "Incorrect Password";
      } 
```

1).它处于其他条件..所以你能把这四个**$variables**回显给我吗？

2). 用 str_replace 从 $_post 中删除空格

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T14:07:38.963

我认为你编码它错误的方式。您不应该在会话开始后将会话销毁。首先，让我们通过 session_start() 开始会话；

```
session_start();

$username = $_POST['username'];
$password = $_POST['password'];

$query = "SELECT * FROM table_name WHERE username = '$username'";
$result = mysql_query($query);
$count = mysql_num_rows($query);
$row = mysql_fetch_assoc($result);

if($count == 0)
{
//if there is no result
}
$dbpassword = $row['password'];
if($dbpassword == $password)
{
//put some session here
}
else
{
//if the password is not match
} 
```

我希望这可能会有所帮助

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-20T05:18:28.047

您需要先连接到数据库。使用[mysql_connect()](http://php.net/manual/en/function.mysql-connect.php)

另请注意，此功能正在贬值，建议使用 mysqli is 或 PDO。上面的链接中有这些链接。

# jquery - jQuery Mobile ajax 加载的链接在刷新时中断

> ID：13965719
> 
> 赞同：0
> 
> 时间：2012-12-20T05:12:25.540
> 
> 标签：jquery, ajax, jquery-mobile

默认情况下，当您在 jQuery mobile 中单击链接时，会拦截单击并通过 Ajax 加载页面。但是，浏览器位置指向该链接。

通常 jQuery mobile 中的链接页面只包含移动页面 DOM 而没有其他内容，因为它是要注入到父页面中的。这意味着如果您在选择一个 ajax 加载的链接后刷新页面，则该站点已损坏。

有没有办法解决？也许在浏览器位置使用主题标签而不是指向实际页面本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:16:42.897

有几种方法可以解决这个问题，两种最简单的方法是：

*   有一个多页文件，并使用主题标签通过 jquery mobile 在其中导航
*   如果要保留单独的文件，则必须确保所有页面都具有脚本的所有链接、标题中的 css 以及任何初始化。这样，即使您刷新页面，也可以使用适当的资源

# android - 如何在Android中gridView的滚动监听器上使按钮可见/消失

> ID：13965720
> 
> 赞同：2
> 
> 时间：2012-12-20T05:12:30.400
> 
> 标签：android, listview, scroll, android-gridview

我在框架布局中有一个自定义 gridView 和一个按钮。代码如下

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">
     <GridView
        android:id="@+id/gridview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_below="@+id/Rel_Spinner"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth" >
    </GridView>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true" >

        <Button
            android:id="@+id/btnLoadMore"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Load More" />

    </FrameLayout>

</RelativeLayout> 
```

它从适配器加载图像和文本。如图

![在此处输入图像描述](../Images/4737c9d2d5accd08c0fe82036e8d28d0.png)

现在我想要的是当 GridView Scroll 的最终位置到达时 Button 应该出现，否则它应该再次消失。如图所示。

![在此处输入图像描述](../Images/33f470a5dbf474a0fbe4ea328c4d341e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:20:54.157

您可以通过使用GridView 的[setOnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html#SCROLL_STATE_IDLE)来做到这一点：

```
gridview.setOnScrollListener(new OnScrollListener() {

   @Override
    public void onScroll(AbsListView view, int firstVisibleItem,
              int visibleItemCount, int totalItemCount) {

      }

    @Override
    public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub
      switch(scrollState) {
        case 2: // SCROLL_STATE_FLING 
        //hide button here
        break;

        case 1: // SCROLL_STATE_TOUCH_SCROLL 
        //hide button here
        break;

        case 0: // SCROLL_STATE_IDLE 
        //show button here
        break;

            default:
             //show button here
        break;
           }
        }
     }); 
```

# linux - RedHat 中 sleep() 函数调用的可加载内核模块问题

> ID：13965724
> 
> 赞同：0
> 
> 时间：2012-12-20T05:12:46.260
> 
> 标签：linux, redhat, kernel-module

我在尝试使用 insmod 将 LKM 加载到 RedHat 内核时遇到问题，但它返回以下错误：-

> insmod –f tmdq.o
> 
> tmdq.o：未解析的符号睡眠

为什么 LKM 中的 sleep() 系统调用会导致问题？我想检查 Red Hat Linux 3.2.2-5，Linux 版本 2.4.20-8 中是否有其他名称给 sleep()。

还有，有没有办法不用下载就可以在线浏览RedHat的源代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:37:56.723

内核 2.4.20 中不包含 msleep 和其他变体的定义。必须使用内核的 schedule_timeout() 函数自己实现它。

此外，在这里可以浏览内核代码：[lxr.linux.no](http://lxr.linux.no/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:09:16.800

首先，sleep() 不是系统调用，它是在 libc 中使用 sys_nanosleep 系统调用实现的。

所以内核中没有睡眠，使用 msleep、mdelay 或 usleep_range (include/linux/delay.h) 或者可能是 wait_event_ 函数之一 (include/linux/wait.h)

# azure - ACS 规则组：如果另一个声明具有给定值，则添加一个声明

> ID：13965726
> 
> 赞同：0
> 
> 时间：2012-12-20T05:12:49.473
> 
> 标签：azure, acs

是否可以配置 ACS，以便如果它接收到具有特定值的输入声明，它会输出该输入声明及其原始值以及另一个全新的声明？

我正在尝试将我的应用程序的一些用户配置文件属性推送到从 ACS 收到的声明中，但到目前为止，我似乎只能转换声明，这具有删除原始声明及其价值的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:13:00.797

这是完全可能的。

您可以通过首先生成默认的传递规则来实现。这将有效地创建您的第一条规则 - 输入声明到输出声明而无需修改。

现在您只需添加一个新规则并定义您想要的内容 - 检查输入声明类型及其值，最后确定输出声明类型及其值。您可以根据需要为单个输入声明定义任意数量的规则。这个过程没有限制。

# mootools - Mootools：如何手动显示提示

> ID：13965734
> 
> 赞同：0
> 
> 时间：2012-12-20T05:13:35.967
> 
> 标签：mootools, tooltip

我想通过从代码中调用它来显示一个工具提示。就像是：

```
tips.fireEvent('show', el); 
```

或者

```
label.fireEvent('mouseover'); 
```

提示已经设置并存储在 domready 上，并且可以在鼠标悬停时完美运行。MooTools 1.4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:49:52.720

有效的是创建一个新提示：

```
var tip_title = el.retrieve('tip:title');
var tip_text = el.retrieve('tip:text');
var tips = new Tips(el, {fixed: true, offset: {x: 0, y: size.y}});
var tip = tips.toElement();
tip.getFirst('div.tip').set('html', '<b>' + tip_title + '</b><br />' + tip_text);
var pos = el.getPosition();
var size = el.getSize();
tip.setStyles({left: pos.x, top: pos.y + size.y});
tips.show(el); 
```

然后，只需添加一些额外的代码来分离鼠标悬停时的附加提示。

# mysql - MySQL if 条件为空

> ID：13965735
> 
> 赞同：0
> 
> 时间：2012-12-20T05:13:44.300
> 
> 标签：mysql, select, if-statement

我有数据库列

* * *

表名：

*   销售量
*   trans_details

最初，当发送的数量**trans_details**表更新时，数据将插入到**销售中**

 *** * *

销售栏目

*   总数（量
*   ETC

trans_details 中的列

*   订购数量
*   调度数量
*   待定数量
*   ETC

* * *

我想显示所有值：-ordered_quantity-dispatched_quantity-pending_quantity

```
SELECT 
    IF(trans.ordered_quantity!='',trans.ordered_quantity,(sorder.total_quantity)) AS quantity,
    IF(trans.dispatched!='',trans.dispatched,0) AS today_dispatched_qty,
    IF(trans.dispatched!='',trans.dispatched,0) AS dis_qty, 
    IF(trans.Pending_quantity!='',trans.Pending_quantity,sorder.total_quantity) AS pending_qty 
FROM 
    sales as sorder 
    LEFT OUTER JOIN trans_details as trans 
```

* * *

查询工作正常，但是当数量完全调度时，它应该是“0”，但现在它显示的是 total_quantity……当我`sorder.total_quantity`在这种情况下替换为“0”时`IF(trans.Pending_quantity='0',trans.Pending_quantity,sorder.total_quantity) AS pending_qty`……最初它显示的是“0”，但它应该显示总数量...

* * *

## 样本输出：

total_quantity........dispatched_quantity.......pending_quantity

```
50                    45                    5
 5                     5                    0
 5                     0                    5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:58:12.550

我的猜测是您的数据中有 NULL 值。如果问题是 NULL 并且数据类型是数字，那么试试这个：

```
SELECT coalesce(trans.ordered_quantity,sorder.total_quantity) AS quantity,
       coalesce(trans.dispatched,0) AS today_dispatched_qty,
       coalesce(trans.dispatched,0) AS dis_qty, 
       coalesce(trans.Pending_quantity,sorder.total_quantity) AS pending_qty 
```

如果这些确实是字符串，那么您需要添加一个 NULL 检查。我鼓励您使用`case`标准 SQL，而不是`if`：

```
select (case when trans.ordered_quantity is not null and trans.ordered_quantity <> ''
             then trans.ordered_quantity
             else sorder.total_quantity
       end) as quantity,
       . . . 
```

最后，我假设您只是`on`偶然离开了该条款。在 MySQL 以外的任何数据库中，都会出现解析错误。但是，作为一个好习惯，`on`在指定内连接或外连接时，您应该始终有一个子句。**

# css - sencha touch 2 中的滚动条指示器可见性

> ID：13965736
> 
> 赞同：3
> 
> 时间：2012-12-20T05:13:48.677
> 
> 标签：css, sencha-touch, sencha-touch-2

我正在开发 Sencha touch 2。我有一个标签面板，里面有许多水平放置的标签。我想始终显示水平滚动条，以便用户知道还有更多选项卡。这是我的带有 tabBar 配置的标签面板。如何使滚动条指示器始终可见？：

```
Ext.define('Project.view.Result', {
extend: 'Ext.tab.Panel',
id:'searchTab',
    tabBar: {

         scrollable:'horizontal',
         scrollBar:'true',
         docked:'top',
         layout: {
                    pack: 'center',
                 },

    },
items:[
                               {  
                        title: 'A Result',
                        xtype:'AList'
                    },
                    { 
                        title: 'B Result',
                        xtype:'BList' 
                    },

                                ......
                                ......
                               { 
                        title: 'Z Result',
                        xtype:'ZList' 
                    }
                ]
        }); 
```

我用css试过这个：

```
#searchTab .x-scroll-indicator[style] {
opacity: 0.5 !important;
} 
```

但是随后滚动条对于每个选项卡下的列表项变得可见。但不适用于标签栏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T13:02:09.830

你几乎明白了，只需将你的 css 更改为：

```
.x-tabpanel .x-scroll-indicator {
    opacity: 0.5 !important;
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T17:37:04.607

> “Touch 2.3.0 中的新功能，每个指标都有一个自动隐藏配置，允许您控制它。将 autoHide 设置为 false 将告诉该指标不自动隐藏。您可以在容器或子类的可滚动配置中使用指标配置。”
> 
> [http://www.sencha.com/blog/top-support-tips-march-2014](http://www.sencha.com/blog/top-support-tips-march-2014)

```
Ext.application({
    name: 'Fiddle',

    launch : function() {
        Ext.Viewport.add({
            xtype: 'container',
            html: 'The y scroll indicator will always show, x will hide as autoHide defaults to true',
            scrollable: {
                direction: 'both',
                indicators: {
                    y: {
                        autoHide: false
                    }
                }
            }
        });
    }
}); 
```

[https://fiddle.sencha.com/#fiddle/1u9](https://fiddle.sencha.com/#fiddle/1u9)

# php - PHP - MYSQL 日期时间排序

> ID：13965738
> 
> 赞同：-3
> 
> 时间：2012-12-20T05:13:53.020
> 
> 标签：php, mysql, datetime, select

我以以下方式将日期存储在 mysql datetime 中：

```
$current_date = date('Y-m-d H:i:s'); 
```

它像这样存储日期时间： `2012-12-19 14:36:42`

现在我想使用 mysql 查询获取以下数据：

```
1) all the data 12 hours old

2) all the data 24 hours old 
```

我怎么能得到那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:26:53.143

```
SELECT * FROM `table` WHERE `date`>(DATE_SUB(now(), INTERVAL 12 HOUR)) 
```

`now()`返回当前日期时间。 `DATE_SUB`从第一个参数中减去给定的第二个参数（可以是分钟、小时、天……）。

我们只是检查日期是否大于 12 小时前的日期。

更多关于 Mysql 日期时间函数[的信息](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:17:42.913

用这个

```
SELECT * FROM table WHERE TIMESTAMPDIFF(HOUR, start_time, end_time) =24  
SELECT * FROM table WHERE TIMESTAMPDIFF(HOUR, start_time, end_time) =12 
```

阅读[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_timestampdiff) _

# python - 将 Matlab 的 datenum 格式转换为 Python

> ID：13965740
> 
> 赞同：19
> 
> 时间：2012-12-20T05:14:24.080
> 
> 标签：python, matlab

我刚开始从 Matlab 迁移到 Python 2.7，但在阅读我的 .mat 文件时遇到了一些麻烦。时间信息以 Matlab 的 datenum 格式存储。对于那些不熟悉它的人：

> 序列日期编号将日历日期表示为自固定基准日期以来经过的天数。在 MATLAB 中，序列号 1 是 0000 年 1 月 1 日。
> 
> MATLAB 还使用串行时间来表示从午夜开始的天数；例如，下午 6 点等于 0.75 个连续日。所以 MATLAB 中的字符串 '31-Oct-2003, 6:00 PM' 是日期编号 731885.75。
> 
> （取自 Matlab 文档）

我想把它转换成 Python 的时间格式，我找到[了这个教程](http://sociograph.blogspot.de/2011/04/how-to-avoid-gotcha-when-converting.html)。简而言之，作者指出

> 如果您使用 python 解析它，`datetime.fromordinal(731965.04835648148)`那么结果可能看起来很合理 [...]

（在任何进一步的转换之前），这对我不起作用，因为 datetime.fromordinal 需要一个整数：

```
>>> datetime.fromordinal(731965.04835648148) 
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: integer argument expected, got float 
```

虽然我可以将它们四舍五入以获得每日数据，但我实际上需要导入每分钟的时间序列。有没有人有这个问题的解决方案？我想避免重新格式化我的 .mat 文件，因为它们很多，我的同事也需要使用它们。

如果有帮助，[其他人要求反过来](https://stackoverflow.com/questions/8776414/python-datetime-to-matlab-datenum)。可悲的是，我对 Python 太陌生，无法真正理解那里发生的事情。

/edit (2012-11-01)：这已在上面发布的教程中修复。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-20T05:25:14.823

您链接到解决方案，它有一个小问题。它是这个：

```
python_datetime = datetime.fromordinal(int(matlab_datenum)) + timedelta(days=matlab_datenum%1) - timedelta(days = 366) 
```

可以在[这里找到更长的解释](http://sociograph.blogspot.com/2011/04/how-to-avoid-gotcha-when-converting.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-03-06T15:55:54.700

使用 pandas，您可以使用小数部分转换整个 datenum 值数组：

```
import numpy as np
import pandas as pd
datenums = np.array([737125, 737124.8, 737124.6, 737124.4, 737124.2, 737124])
timestamps = pd.to_datetime(datenums-719529, unit='D') 
```

值 719529 是 Unix 纪元开始 (1970-01-01) 的 datenum 值，这`origin`是[`pd.to_datetime()`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Timestamp.html).

我使用以下 Matlab 代码进行设置：

```
datenum('1970-01-01')  % gives 719529
datenums = datenum('06-Mar-2018') - linspace(0,1,6)  % test data
datestr(datenums)  % human readable format 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-08-16T15:32:25.373

以防万一它对其他人有用，这里是从 Matlab mat 文件加载时间序列数据的完整示例，使用 carlosdc 的答案（定义为函数）将 Matlab datenums 向量转换为 datetime 对象列表，然后绘制为熊猫的时间序列：

```
from scipy.io import loadmat
import pandas as pd
import datetime as dt
import urllib

# In Matlab, I created this sample 20-day time series:
# t = datenum(2013,8,15,17,11,31) + [0:0.1:20];
# x = sin(t)
# y = cos(t)
# plot(t,x)
# datetick
# save sine.mat

urllib.urlretrieve('http://geoport.whoi.edu/data/sine.mat','sine.mat');

# If you don't use squeeze_me = True, then Pandas doesn't like 
# the arrays in the dictionary, because they look like an arrays
# of 1-element arrays.  squeeze_me=True fixes that.

mat_dict = loadmat('sine.mat',squeeze_me=True)

# make a new dictionary with just dependent variables we want
# (we handle the time variable separately, below)
my_dict = { k: mat_dict[k] for k in ['x','y']}

def matlab2datetime(matlab_datenum):
    day = dt.datetime.fromordinal(int(matlab_datenum))
    dayfrac = dt.timedelta(days=matlab_datenum%1) - dt.timedelta(days = 366)
    return day + dayfrac

# convert Matlab variable "t" into list of python datetime objects
my_dict['date_time'] = [matlab2datetime(tval) for tval in mat_dict['t']]

# print df
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 201 entries, 2013-08-15 17:11:30.999997 to 2013-09-04 17:11:30.999997
Data columns (total 2 columns):
x    201  non-null values
y    201  non-null values
dtypes: float64(2)

# plot with Pandas
df = pd.DataFrame(my_dict)
df = df.set_index('date_time')
df.plot() 
```

![在此处输入图像描述](../Images/ab73527d3e29156e405647b52fc974aa.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-10T15:09:29.047

这是一种使用`numpy.datetime64`, 而不是`datetime`.

```
origin = np.datetime64('0000-01-01', 'D') - np.timedelta64(1, 'D')
date = serdate * np.timedelta64(1, 'D') + origin 
```

这适用于`serdate`单个整数或整数数组。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-27T16:09:18.663

只是建立并添加到以前的评论。关键是由类和相关子类中的方法`toordinal`和构造函数执行的日期计数。例如，从[Python Library Reference for 2.7](https://docs.python.org/2.7/library/datetime.html#date-objects)中可以看到`fromordinal``datetime``fromordinal`

> 返回对应于预测公历序数的日期，其中**第 1 年的 1 月 1 日有序数 1**。除非 1 <= ordinal <= date.max.toordinal()，否则会引发 ValueError。

但是，公元 0 年仍然是一个（闰）年，因此仍然需要考虑 366 天。（闰年，就像 2016 年一样，正好是四年前的 504 个周期。）

这是我一直用于类似目的的两个函数：

```
import datetime 

def datetime_pytom(d,t):
'''
Input
    d   Date as an instance of type datetime.date
    t   Time as an instance of type datetime.time
Output
    The fractional day count since 0-Jan-0000 (proleptic ISO calendar)
    This is the 'datenum' datatype in matlab
Notes on day counting
    matlab: day one is 1 Jan 0000 
    python: day one is 1 Jan 0001
    hence an increase of 366 days, for year 0 AD was a leap year
'''
dd = d.toordinal() + 366
tt = datetime.timedelta(hours=t.hour,minutes=t.minute,
                       seconds=t.second)
tt = datetime.timedelta.total_seconds(tt) / 86400
return dd + tt

def datetime_mtopy(datenum):
'''
Input
    The fractional day count according to datenum datatype in matlab
Output
    The date and time as a instance of type datetime in python
Notes on day counting
    matlab: day one is 1 Jan 0000 
    python: day one is 1 Jan 0001
    hence a reduction of 366 days, for year 0 AD was a leap year
'''
ii = datetime.datetime.fromordinal(int(datenum) - 366)
ff = datetime.timedelta(days=datenum%1)
return ii + ff 
```

希望这有助于并很高兴得到纠正。

# breeze - Breeze js 非 EF hasServerMetadata

> ID：13965741
> 
> 赞同：0
> 
> 时间：2012-12-20T05:14:28.947
> 
> 标签：breeze

我正在使用带有 Asp.Net WebAPI 的 Breeze.js 运行以下命令。我可以使用 OData 协议查询我的服务，并且可以在响应中看到 JSON 数据，但是 .then() 和 .fail() 回调没有触发，因此视图模型永远不会获取数据。那是因为我缺少元数据吗？

```
/// <reference path="..\breeze.debug.js" />

(function (root) {
    var dataService = new breeze.DataService({
        serviceName: 'api/breezesample',
        hasServerMetadata: false
    });

    var altMs = new breeze.MetadataStore({
        namingConvention: breeze.NamingConvention.camelCase
    });

    var manager = new breeze.EntityManager({
        dataService: dataService,
        metadataStore: altMs
    });

    // define the viewmodel
    var vm = {
        todos: ko.observableArray(),
        includeDone: ko.observable(false),
        show: ko.observable(false)
    };

    // start fetching Todos
    getTodos();

    // re-query when "includeDone" checkbox changes
    //vm.includeDone.subscribe(getTodos);

    // bind view to the viewmodel
    ko.applyBindings(vm);

    /* Private functions */

    // get Todos asynchronously
    // returning a promise to wait for     
    function getTodos() {

        var query = breeze.entityModel.EntityQuery.from("todos");

        if (!vm.includeDone()) {
            query = query.where("IsDone", "==", false);
        }

        return manager
            .executeQuery(query)
            .then(querySucceeded)
            .fail(queryFailed);
    };

    function querySucceeded(data) {
        vm.todos.removeAll();

        var todos = data.results;
        todos.forEach(function (todo) {
            vm.todos.push(todo);
        });

        vm.show(true); // show the view
    }

    function queryFailed(error) {
        alert("Query failed: " + error.message);
    }

}(window)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:53:36.773

试试这个代码。您还需要通过 addEntityType 方法调用将元数据添加到“altMs”。确保您也获得了最新版本的微风，v.0.78.x。不再需要代码中的“breeze.entityModel”。

```
var DataService   = breeze.DataService;
var MetadataStore = breeze.MetadataStore;
var EntityManager = breeze.EntityManager;

var dataService = new DataService({
    serviceName: altServiceName,
    hasServerMetadata: false
});

var altMs = new MetadataStore({
    namingConvention: NamingConvention.camelCase
});

return new EntityManager({
    dataService: dataService,
    metadataStore: altMs
}); 
```

# css - Twitter Bootstrap - 收音机/复选框的帮助内联或帮助块

> ID：13965747
> 
> 赞同：2
> 
> 时间：2012-12-20T05:14:57.280
> 
> 标签：css, twitter-bootstrap

`help-inline`标记或标记`help-block`收音机或复选框字段的正确方法是什么？

这没有像我期望的那样显示：

```
<div class="control-group">
    <div class="controls">
            <label class="radio" for="foo">
                <input type="radio" name="foobar" value="foo" id="foo">
                Foo label
            </label>
            <span class="help-inline">Foo inline help</span>
    </div>
</div> 
```

**编辑1：**

后续问题：如何标记第二个单选选项？包裹在另一个`div.controls`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T17:22:18.870

最好也写下你真正期望的东西。我将不得不在这里猜测您的期望并提出以下解决方案：

```
<div class="control-group">
    <div class="controls">
        <label class="radio" for="foo">
            <input id="IsActivated" name="IsActivated" type="radio" value="true">
            Is Activated
            <span class="help-inline">Foo inline help</span>
       </label>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T16:42:06.427

请参阅[辛比尔斯克的回答](https://stackoverflow.com/a/12212196/1242785)- 帮助了我：

```
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="inputType">Type</label>
        <div class="controls">
            <input type="text" id="inputType" placeholder="Type">
        </div>
    </div>
    <div class="control-group">
        <span class="control-label">Metadata</span>
        <div class="controls form-inline">
            <label for="inputKey">Key</label>
            <input type="text" class="input-small" placeholder="Key" id="inputKey">
            <label for="inputValue">Value</label>
            <input type="password" class="input-small" placeholder="Value" id="inputValue">
        </div>
    </div>
</form> 
```

请注意，我`.form-inline`用于在`.controls`.
你可以在[这个](http://jsfiddle.net/simbirsk/nbwNf/)jsfiddle上测试它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T06:17:14.490

我们实现如下：

```
<div class="control-group">
   <label class="control-label" for="foo">Foo label</label>

   <div class="controls">
      <label class="checkbox">
         <input id="foo" name="foo" type="radio">
         Foo message
      </label>
   </div>
</div> 
```

# java - 避免在 servlet 中使用 html

> ID：13965749
> 
> 赞同：0
> 
> 时间：2012-12-20T05:15:05.510
> 
> 标签：java, html, ajax, jsp, servlets

我在一个jsp页面上，我正在对一个servlet进行ajax调用，作为回报，它提供了要在页面上显示的完整html代码。它工作正常，但在 servlet 文件中看起来杂乱无章，其中包含多`printWriter.write(...)`行带有 html 代码的行。由于我必须通过 servlet 创建大型 html 代码，因此很难维护。有没有其他合适/更好的方法来做到这一点？我在 servlet 中结合了编写 html 行和逻辑，很难将它们分开。

jsp页面中的ajax调用：

```
$.ajax({
    type: 'POST',
    url: 'myServlet',
    data: requestData,
    dataType: "text",
}).done(function(responseData) {
    $(divId).html(responseData);
}); 
```

来自 servlet 类的一些代码：

```
.....
String username = user.getName();
if (username != null && !username.trim().isEmpty())
    username = username.substring(0, username.indexOf(" "));
else
    username = "";
printWriter.write("<span id=\"username_"+i+"\" style=\"display: none;\">"+ username +"</span>");
printWriter.write("<form action=\"\" method=\"post\" name=\"userClickForm_"+i +"\" id=\"userClickForm_"+i +"\">");
printWriter.write(" <input type=\"hidden\" name=\"userId\" value=\""+userId +"\"/>");
printWriter.write("</form>");
...... 
```

混合html代码和业务逻辑的主要原因是我必须根据条件和循环结构提供div id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:43:24.033

您应该使用某种形式的模板或转换技术。由于您使用的是 jQuery 和 JSP，这可以是服务器端 JSP 或客户端 jQuery 模板插件。

早期的 JSP MVC 模式采用这种形式：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response)
     throws ServletException, IOException {
    // read inputs
    String foo = request.getParameter("foo");
    // perform business logic
    SomeResults results = new SomeDataSource().lookupDatabase(foo);
    // place results into scope
    request.setAttribute("results", results);
    // dispatch to JSP to render results
    request.getRequestDispatcher("result.jsp")
           .forward(request, response);
} 
```

这种方法可以与 AJAX 调用一起使用。

或者，您可以使用 JSON 或 XML 数据进行响应并在 JavaScript 中对其进行解析，然后使用 JavaScript 模板引擎执行类似于 JSP 中执行的逻辑的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:18:10.127

您可以通过使用诸如 STRUTS 或 SPRING 之类的 MVC 框架来避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T07:05:57.283

在 servlet 和 jsp 上使用 xml 而不是 html 使用 jquery 的 ajax 调用的成功属性......在我的情况下，它的工作，bt 我使用类型作为'GET'。

```
 $.ajax({
            url: ,
            data: ,
            type: ,
            dataType: 'xml',
            async: true,
            success:function(xmlDoc) 
            {   
                var message = xmlDoc.getElementsByTagName("message");
                message = message[0].firstChild.data;

            }
    }); 
```

在 Servlet 中使用::

```
 res.getWriter().write("<response><message>abcdefg</message></response>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:27:02.270

您应该使用 JSP。它将针对不同的 servlet/jsp 请求，而不是发起 ajax 调用的请求。

# shell - 文本文件搜索并将数据批量收集到文本文件中

> ID：13965750
> 
> 赞同：0
> 
> 时间：2012-12-20T05:15:05.300
> 
> 标签：shell, command-line, batch-file, cmd

我想搜索一些具有相同起始字符的文件

然后我在搜索中收集文件中的所有信息并将其收集到将其重定向到 1 个 txt 文件中。

我该怎么做。

这是我的尝试：

> (dir /s unixinv*.csv 输入 unixinv*) > summary2.txt

就像 ：

> 如果是，则查找 xxx*
> 收集​​数据 >> summary2.txt 否则继续查找此文件夹和每个子文件夹中的每个文件

谢谢，我正在努力了解它。

也许有时我的尝试结果很糟糕:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:52:41.320

像这样的东西？

```
for /r C:\folder %%a in (*.csv) do type %%a >>summary2.txt && echo. >>summary2.txt 
```

如果这不是您想要的，请提供更多详细信息。

# html - 如何使用单个锚标记打开多个链接

> ID：13965753
> 
> 赞同：32
> 
> 时间：2012-12-20T05:15:32.407
> 
> 标签：html, anchor

所以这是一个简单但有趣的问题，如何使用单个`<a>`元素打开多个链接？

使用它只会打开第一个`href`

```
<a href="http://www.google.com" href="http://www.yahoo.com" target="_blank">Click Here</a> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-20T05:16:50.660

你当然可以试试这个

[**演示**](http://jsfiddle.net/HGy3f/)

```
<a href="http://www.microsoft.com" target="_blank" onclick="window.open('http://www.google.com'); window.open('http://www.yahoo.com');">Click Here</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-14T07:24:34.977

我搜索了它，但不幸的是我发现的所有方法都不起作用。我有一种使用 JS 的方法（但会在当前选项卡中打开一个链接）：

HTML 代码：

```
<a id="myId">go</a> 
```

JS代码：

```
myId.onclick = function(){
   open('https://www.example1.com');
   location.href = ('https://www.example2.com');
} 
```

所以在这里它将在另一个选项卡中打开 example1.com。

然后在当前选项卡中，将打开 example2.com

注意：JS Lines 的顺序是必需的，否则将不起作用。

# jquery - Ajax调用执行错误函数，甚至黑莓isuue中的服务器调用成功

> ID：13965754
> 
> 赞同：1
> 
> 时间：2012-12-20T05:15:44.383
> 
> 标签：jquery, blackberry

以下代码在 android、ios 中运行良好。但在黑莓请求中，请求将发送到服务器并且服务器正在响应。但是 Ajax 会触发 status=0,readystate=0 和 Network err:XMLHttpRequestException 101 的错误函数。
如何解决这个问题？

```
 $.ajax({
    url : "http://192.168.1.190:8181/Asf/User/myService",                                     
    type : "POST",
    //cache : false,
    crossDomain:true,
    data : pjsonstring,
    //contentType: "application/json",
    dataType : 'json',
    timeout : 50000,
    success : function (json1) {
    alert("in success");
        fnsetjson(json1);
    },
    error : function (xhr , textStatus , errorThrown) {
        alert("Error- Status: " + textStatus + " xhr Status: " + xhr.status + " xhr Response Text:" + xhr.responseText);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:20:19.743

`Ajax``jQuery`使用OS 5.0 的任何 Black Berry 手机都无法使用通话。

`XmlHTTPRequest object (XHR)`如果您`AJAX calls`的目标 BB OS 是 5.0 ，请尝试使用 plain 。

# mysql - Mysql - 如何获取varchar列的最大值

> ID：13965756
> 
> 赞同：1
> 
> 时间：2012-12-20T05:15:53.080
> 
> 标签：mysql, sql

我有一个如下表 ID 是一个数字列，总计是 Varchar(20) - 表名是订单：

```
ID       Total

1        $10

2        $1,000

3        $1500.50

4        300

5        20.50

6        -80 
```

通过一个

```
SELECT statement I would like to get the Id of the highest total i.e 3\. 

SELECT ID, MAX(CONVERT(Total, SIGNED INTEGER)) AS total FROM orders 
```

给了我最高但不正确的 ID。

我想忽略美元符号`($)`和逗号`(,)`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:20:35.373

只需使用 `MAX(CONVERT(replace(replace(total,',',''),'$',''), SIGNED INTEGER)) AS total`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-13T09:16:41.403

您的查询应该是这样的。好用，我也用过。

尝试这个：

```
SELECT MAX(CONVERT({column_name}, SIGNED INTEGER)) AS {column_name or xyz_name} from {table_name} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:24:20.707

在 VARCHAR 字段中存储金额听起来像是自找麻烦。

您可以尝试在转换为数字之前删除前导`$`使用`REPLACE`，但这仍然是错误的做法。

请重新设计您的模式并将金额存储在适当类型的列中，这样就不会出现这些问题。

# java - 抽象数据类型（ADT）和数据结构有什么区别？

> ID：13965757
> 
> 赞同：18
> 
> 时间：2012-12-20T05:16:01.347
> 
> 标签：java, c++, algorithm, data-structures, abstract-data-type

我发现书籍和在线资源可以互换使用这两个术语，但没有显示出明显的区别。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T05:20:16.723

这可能会有所帮助：

> 简单来说，ADT是一种逻辑描述，数据结构是具体的。ADT 是数据的逻辑图和操作数据组成元素的操作。数据结构是实现过程中数据的实际表示和操作数据元素的算法。ADT在逻辑层，数据结构在实现层。

[ADT 与 DS](http://abrickshort.wordpress.com/2005/03/06/abstract-data-types-vs-data-structures/)

# android - Facebook Api 获取电话或手机号码？

> ID：13965760
> 
> 赞同：0
> 
> 时间：2012-12-20T05:16:22.720
> 
> 标签：android, facebook, facebook-graph-api

> **可能重复：**
> [Facebook API - 如何获取用户的地址、电话号码？](https://stackoverflow.com/questions/3402270/facebook-api-how-to-get-users-address-phone)

是否仍然可以使用 Graph Api 获取用户电话或手机号码？我已经阅读了很多关于这个问题的论坛，另一个说 Facebook 删除了获取手机或电话号码的权限。

所以我只是问是否有人可以告诉是否还有办法得到它？

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:21:33.350

一个非常可怕的功能。
出于隐私考虑，Facebook 似乎已经撤回了 API 的这些功能。有关更多详细信息，请阅读[此](http://www.guardian.co.uk/technology/2011/jan/18/facebook-privacy-data)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:29:31.293

实际上，当我尝试使用 facebook 时，我遇到了同样的问题。我阅读了很多论坛，但没有用。我开始知道不可能获得`"Phone no"`。但是我采取了`"mail id"`并且`"user name"`我设法做到了..

# sql - CLOB 字段的日期格式的 SQL 查询不起作用

> ID：13965761
> 
> 赞同：-1
> 
> 时间：2012-12-20T05:16:30.007
> 
> 标签：sql, oracle

您好，我正在使用以下查询从 ORACLE Toad 的 CLOB 字段中获取格式为“DD-MM-YYYY”的日期。

```
 Select ID, NVL(TO_CHAR(xmltype(XML_RAW).extract('//ROWSET//ROW//MJR_V//MJR_V_ROW//EARLIEST_ACCEPT_DATE/text()').getStringVal(), 'DD-MM-YYYY'),'') 
 AS Dateformat from table1 where ID = 102 
```

它抛出错误：

```
ORA:01722: Invalid number 
```

但是如果我使用上面的查询直接 DB 列（不是 CLOB FIELDS），那么它执行得很好。

```
 Select ID, NVL(TO_CHAR(Start_Date, 'DD-MM-YYYY'),'') 
 AS Dateformat from table1 where   ID = 102 
```

请让我解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:51:17.867

你不应该[`to_char`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions180.htm)在 varchar2 上运行

[`to_char`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions180.htm)函数获取日期（或数字）作为参数并将其转换为 varchar2。
如果您在 varchar2 上使用它，则 oracle 会根据以下条件将字符串隐式转换为日期[`NLS_DATE_FORMAT`](http://docs.oracle.com/cd/B19306_01/server.102/b14237/initparams122.htm)

所以你可能会做这样的事情[：](https://stackoverflow.com/questions/8366522/how-to-convert-a-string-date-to-date-format-in-oracle10g)

# python - 如何在 Python GUI 的文本框中添加用户可调整大小的图像

> ID：13965766
> 
> 赞同：2
> 
> 时间：2012-12-20T05:16:50.833
> 
> 标签：python, image, user-interface, textbox, resize

我正在尝试在 python 中制作一个文字处理器类型的程序。我希望用户能够像在 MS Word 中一样在文本区域中打开可调整大小的图像。我研究了 wxpython 和 tkinter。我的理解是 wxpython 没有文本框中的图像功能，我不确定 tkinter 是否有办法让用户调整图像大小。有没有办法让我使用流行的 GUI 工具包之一添加此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:12:53.530

使用[PyQt](http://en.wikipedia.org/wiki/PyQt)。您可以通过他们提供的功能强大的库来实现很多事情。

另一种选择是使用[PyGTK](http://www.pygtk.org/)。

这两个工具包还提供了易于创建的 GUI 构建工具。

# javascript - 我需要使用 javascript 限制退格键的四个输入值

> ID：13965767
> 
> 赞同：3
> 
> 时间：2012-12-20T05:16:51.157
> 
> 标签：javascript, jquery, html

我需要使用 javascript 限制退格键的四个输入值。但我不知道如何将四个输入值存储在单个变量中。我的代码如下，

```
jQuery(function ($) {
         var input = $('#test1');
         input.on('keydown', function () {
             var key = event.keyCode || event.charCode;

             if (key == 8)
                 return false;
         }); // $('#test1'), $('#test2'), $('#test3'), $('#test4') my four text input
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:18:44.657

您可以添加多个选择器`,`

`var $inputs = $('#test1, #test2, #test3, ...');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:20:34.690

您可以为所有四个输入重复代码，或者创建一个函数，您可以将输入传递给并为每个输入调用它，或者将公共类应用于相关输入并传递类选择器而不是 ID。

我个人会这样做：

```
function disallowBackspace(input) {
    var elem = document.getElementById(input),
        evt = function(e) {
            e = e || window.event;
            if( (e.keyCode || e.which) == 8) {
                if( e.preventDefault) e.preventDefault();
                return false;
            }
            return true;
        };
    if( elem.addEventListener) elem.addEventListener('keydown',evt);
    else elem.attachEvent('onkeydown',evt);
}
disallowBackspace("test1");
disallowBackspace("test2");
disallowBackspace("test3");
disallowBackspace("test4"); 
```

没有 jQuery FTW！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:21:04.033

另一种解决方案是为所有输入字段添加一个特殊的类`no-backspace`，然后将其用作选择器

```
$('.no-backspace').on('keydown', function () { .... } 
```

# node.js - socket.io websocket 连接无效（最新的 chrome）

> ID：13965768
> 
> 赞同：4
> 
> 时间：2012-12-20T05:16:55.063
> 
> 标签：node.js, websocket, socket.io

安装 node.js 后，我按照本[教程](http://psitsmike.com/2011/09/node-js-and-socket-io-chat-tutorial/)启动了一个简单的聊天服务器。它很容易设置并且可以正常工作，但是我注意到两个问题：

1.) 我从 socket.io 收到这个警告

```
info  - socket.io started
debug - served static /socket.io.js
debug - client authorized
info  - handshake authorized 1385647068766475337
debug - setting request GET /socket.io/1/websocket/1385647068766475337
debug - set heartbeat interval for client 1385647068766475337
warn  - websocket connection invalid 
```

这对我来说没有意义，因为我没有使用 socket.io 接触任何东西，而且我使用的是我知道支持 websockets 的最新 chrome 版本（23）（我能够使用 PHP-Websockets 成功连接到它们）。它继续使用 XHR，但我真的对让 Websocket 功能正常工作很感兴趣。

2.) 当我去 localhost:8080 连接到聊天服务器时，它需要大约 7-8 秒来提示我输入我的名字并实际连接到服务器。我有一种感觉，这可能是因为它正在恢复为 XHR，但我对此知之甚少，所以我不能说。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T11:44:46.213

当使用旧版本的 socket.io 和更高版本的 chrome 构建（以及其他浏览器）时，我看到了这种行为。它会超时然后回退到 xhr 轮询。要检查您正在使用的 socket.io 库的版本，请在您的 shell (linux/unix) 中键入：

```
npm ls| grep socket.io 
```

它应该告诉你版本。此时的最新版本是 0.9.13，可以正常工作。

如果您从[http://psitsmike.com](http://psitsmike.com)运行教程，请注意 package.json 文件硬编码了旧版本的 socket.io，它不适用于最新的浏览器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T10:57:59.343

我有完全相同的问题。这可能是旧的。但我的设置是在 digitalocean 上。发生的情况是，通常在一台服务器上运行节点应用程序的人使用 nginx 进行端口侦听，并在其自己的专用端口下使用节点。nginx 没有将 websocket 端口转发到节点，只有端口 80 没有初始化 nodejs。

[http://nginx.org/en/docs/http/websocket.html](http://nginx.org/en/docs/http/websocket.html)

您需要确保为此正确配置了 nginx。

我只是将端口添加到 io.connect 直接连接到节点服务器并避免使用 nginx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T11:03:09.923

我也面临类似的问题。

你的情况——

*   尝试删除您的 cookie，有时成功连接后的 xhr-polling 选项会保存到 cookie 并在下次重复使用。[类似的问题在这里回答](https://stackoverflow.com/a/4453873/2103202)
*   有时也会出现在`debug - served static /socket.io.js`html 或 jam 模板文件中错误地引用 socket.io 文件时。尝试更正脚本 src 链接以防出错。它应该类似于 -`var socket = io.connect('http://localhost:3000');`或者您也可以尝试像这样一起删除链接 -`var socket = io.connect();`

希望能帮助到你。

# magento-1.7 - Magento 管理面板无法加载

> ID：13965772
> 
> 赞同：0
> 
> 时间：2012-12-20T05:17:22.860
> 
> 标签：magento-1.7, magento-1.6, magento

我的magento管理员有一个问题，当我在显示“已处理您的请求并且它显示错误日志号”之前给出我的IP时......然后我按照链接中的建议做了

[http://support.hostgator.com/articles/specialized-help/technical/magento-install-error-exception-printing-is-disabled](http://support.hostgator.com/articles/specialized-help/technical/magento-install-error-exception-printing-is-disabled)

但现在它显示一个空白屏幕..

如何取回我的管理面板..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:56:54.623

Magento 安装错误 - 异常打印被禁用

这是安装 Magento 时可能发生的已知错误： 处理您的请求时出错 出于安全原因，默认情况下禁用异常打印。错误日志记录号：XXXXXXXXXXXXXXX

这是解决方案：

1.  导航到“错误”文件夹。
2.  更改`local.xml.sample`为`local.xml`。您现在应该在 Magento 页面上看到一个新的疯狂错误列表 - 这没关系。
3.  打开`magento/lib/Zend/Cache/Backend/File.php`并寻找：

    protected $_options = array('cache_dir' => 'null',

将其更改为：

```
protected $_options = array(
'cache_dir' => 'tmp/', 
```

并**保存**它。

现在最后一步是在根 Magento 文件夹中创建一个 tmp 文件夹。就是这样。

# android - 带有 GCM 的应用程序可以在 Kindle Fire 中运行还是需要删除 GCM Jar？

> ID：13965779
> 
> 赞同：2
> 
> 时间：2012-12-20T05:18:06.923
> 
> 标签：android, android-c2dm, google-cloud-messaging, kindle, kindle-fire

到目前为止，我正在将相同的二进制文件上传到没有 GCM 的 Amazon 和 Google Play 商店，并且两者都运行良好。

现在我要在同一个应用程序上实现 GCM。我是否必须维护单独的代码或相同的代码？据我所知，Kindle 不支持 GCM。所有其他功能都将按原样工作吗？因为带有 Google Map API 的应用程序不适用于 Kindle。

如果我想使用 GCM for Amazon 和 Google PlayStore 维护应用程序的单一版本怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:40:47.883

我认为您将能够摆脱一个二进制文件。您必须围绕缺少的功能进行一些编码，但这应该是可能的。问题不在于 GCM.jar，而在于缺少的 Google 服务。

我无法使用 Kindle Fire，但我想它的问题类似于您在没有 Google API 的情况下在模拟器上运行 GCM 应用程序时遇到的问题。

如果那是真的，我认为您将不得不捕获以下异常：

```
java.lang.UnsupportedOperationException: Device does not have package com.google.android.gsf 
```

这是由：

```
// Make sure the device has the proper dependencies.
GCMRegistrar.checkDevice(this); 
```

如果发生这种情况，则不再调用与 GCM 相关的代码。

同样，我无法使用 Kindle Fire，但我认为这会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:45:29.710

您需要进行特定于平台的检测以将 GCM 用于“常规”android 和 Kindle，您需要了解它们的风格 - 亚马逊设备消息：[http ://www.amazonappstoredev.com/2012/12 /amazon-device-messaging-beta-now-available.html](http://www.amazonappstoredev.com/2012/12/amazon-device-messaging-beta-now-available.html)

# jquery - Gamebanana 访问 api

> ID：13965782
> 
> 赞同：0
> 
> 时间：2012-12-20T05:18:19.143
> 
> 标签：jquery, api

我想使用 jquery访问[gamebanana api 。](http://gamebanana.com/wikis?page=direct_api_access)我的代码如下所示：

```
var url = 'http://www.gamebanana.com/api?request=Member.1382.["user_title"]';
$.get(url, function(data) { console.log(data);
}); 
```

直接访问该 url 会显示一条有关其格式错误的消息。问题可能出在网址中的引号或大括号上吗？有人可以给我一个如何正确执行的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-10T13:31:33.817

我（[RazerKat](http://gamebanana.com/members/143274 "雷蛇猫")）用 JavaScript 编写了这个包装器。它工作得很好，但有时你可能需要额外的东西才能让它工作。尤其是在 GameBanana 中，然而这是一个好的开始。它还与跨浏览器兼容，这使得它可以在 Internet Explorer 和 Mozilla Firefox 中运行。在这种情况下，GameBanana 似乎正在使用 GET 请求从服务器端获取信息，因此您只需将 POST 更改为 GET 并删除发送变量并将删除的变量放入打开请求中以使其获取数据正确。另请注意，它只能在他们的网站上运行良好，您需要调整代码以达到预期的效果。

```
 var DataObject;function AJAX_JSON_Request(p,d,u){var Request;if(window.XMLHttpRequest){Request=new XMLHttpRequest();}else{Request=new ActiveXObject("Microsoft.XMLHTTP");}
    Request.onreadystatechange=function(){if(Request.readyState==4&&Request.status==200){DataObject=JSON.parse(Request.responseText),DataObject.XML=Request,DataObject.JSON=Request.responseText;}}
    Request.open("POST",u,true);
    Request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    Request.send(p+"="+d);} 
```

# android - 来自 Ubuntu 的模拟器中 JellyBean 的多用户功能

> ID：13965786
> 
> 赞同：4
> 
> 时间：2012-12-20T05:18:34.490
> 
> 标签：android, eclipse, sdk, emulation, android-4.2-jelly-bean

我知道 Android 4.2 JellyBean 中提供了多用户功能：

我有**`My Nexus 7 Emulator with Jellybean 4.2`**

我正在使用 Ubuntu 11.10。

我经历过[这里](https://developer.android.com/about/versions/jelly-bean.html#42-multiuser "Android 4.2 功能@Google 的 Android 开发者网站")和[这里](https://www.android.com/whatsnew/ "Android 4.2：新功能@Google 的 Android 网站")。

但我想在我的模拟器上测试这个功能，而不是在实际设备上。

**我的问题：**

1.  是否可以在模拟器上测试多用户功能？

2.  如果是，怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:45:22.380

是的。使用 device = 创建一个 AVD `Nexus 7`。启动 AVD，然后按照[此处](https://stackoverflow.com/questions/13376607/how-to-enable-multiuser-support-in-avd-4-2)给出的说明进行操作。

# mp3 - 如何从 http 播放 mp3 或 wav | https | 星号 11 中的 ftp

> ID：13965796
> 
> 赞同：2
> 
> 时间：2012-12-20T05:19:35.037
> 
> 标签：mp3, wav, asterisk

我在播放 mp3 或 wav 文件时遇到困难，删除星号中的 remore url。

我已经尝试过 Mp3player，它可以正常播放，但无法接受输入。

请有人告诉我播放远程文件和接受用户输入的任何替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T05:37:20.013

我想你读过一些关于星号拨号方案的书。

您需要将文件（例如 test.mp3）放入 /var/lib/asterisk/sounds/

之后你可以做这样的事情

```
exten => _X.,1,Read(temp,test,,,5)
exten => _X.,2,Set(CDR(userfield)=${temp}) 
```

现在您将拥有变量 temp 和 cdr 数据库用户输出。

如果您需要播放 REMOTE 文件，请先下载该文件。你可以使用这样的东西来做到这一点：

```
exten => _X.,1,Set(/var/lib/asterisk/sounds/temp/${CDR(uniqueid)}.mp3)
exten => _X.,2,System(wget http://myurl/myfile.mp3 -o /dev/null -O $file)
exten => _X.,n,Read(temp,${CDR(uniqueid)},,,5)
exten => _X.,n,Set(CDR(userfield)=${temp}) 
```

当然，您已经删除了旧文件，并且还对预缓存/部分文件下载等做了一些事情。

其他选项是将用户放入会议，强制会议收集输入并使用 mp3player/streamer 播放到会议中。

对此没有简单的解决方案，您必须编写大量代码或聘请专家。

作为优秀的选择，您可以使用 c/c++ 创建自己的应用程序来为您的场景工作。

# php - Apache 在加载 xdebug 时在 yaf 框架下崩溃。

> ID：13965799
> 
> 赞同：2
> 
> 时间：2012-12-20T05:19:49.073
> 
> 标签：php, xdebug

所以我的 php.ini 是这样的：

```
[XDebug]
zend_extension="D:\xampp\php\ext\php_xdebug-2.2.1-5.4-vc9.dll"
xdebug.remote_enable=true
xdebug.remote_host=localhost
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.profiler_enable=1
xdebug.profiler_output_dir="D:\xampp\tmp"

[yaf]
extension=php_yaf-2.2.7-x86-5.4.x-zts-nodebug.dll
;extension=php_yaf.dll
yaf.action_prefer=on
extension=php_mongo-1.3.2RC1-5.4-vc9.dll
extension=php_igbinary.dll
extension=php_redis.dll 
```

[我从http://code.google.com/p/yafphp/downloads/list](http://code.google.com/p/yafphp/downloads/list)下载 yaf_sample_1.1.0 Featured

所以我访问网址：

```
http://localhost/sample/index.php 
```

当我的断点进入 index.php 第 21 行（->run();）时，Apache 崩溃了，为什么？

索引.php

```
$response = $application
    ->bootstrap()/*bootstrap是可选的调用*/
    ->run()/*执行*/;     //this place   apache crached ... 
```

有没有人可以帮助我？谢谢！

# lisp - 使用 QuickLisp 时无法启动 ECL

> ID：13965802
> 
> 赞同：1
> 
> 时间：2012-12-20T05:20:18.253
> 
> 标签：lisp, common-lisp, quicklisp, ecl

```
$ecl
;;; Loading "/home/***/quicklisp/setup.lisp"
;;; Loading #P"/usr/local/lib/ecl-12.7.1/cmp.fas"
;;; Loading #P"/usr/local/lib/ecl-12.7.1/asdf.fas"
ASDF could not load sockets because
An error occurred during initialization:
Error while trying to load definition for system sockets from pathname
/usr/local/lib/ecl-12.7.1/sockets.asd:
No applicable method for SOURCE-FILE-TYPE with arguments of types COMPILED-FILE PREBUILT-SYSTEM.

$cat ~/.eclrc 
;;; The following lines added by ql:add-to-init-file:
#-quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                   (user-homedir-pathname))))
(when (probe-file quicklisp-init)
    (load quicklisp-init))) 
```

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:27:21.870

您没有提供有关您正在使用的 quicklisp 版本或 ECL 版本的任何信息，这使您难以回答您的问题。

我假设您使用的是 ECL 12.7.1，它太旧了，无法与最新版本的 ASDF+quicklisp 一起使用。此外，最近的 quicklisp 发布了一个不完整的 ASDF 版本，它存在一个问题：它不加载 ASDF 捆绑包并支持加载预编译库。

所有这些问题都已在 CVS/git 源中得到解决，我将很快发布一个新版本。

胡安乔

# blackberry-playbook - 导入黑莓 10 示例项目时，Configuration Default 中需要错误入口点资产？

> ID：13965812
> 
> 赞同：2
> 
> 时间：2012-12-20T05:20:46.703
> 
> 标签：blackberry-playbook, blackberry-10

`Entry-point asset is required in Configuration Default`导入 Blackberry 10 示例应用程序时出现错误。我可以在资产选项卡的 bar-descriptor.xml 中看到错误，并且没有配置。我该如何解决？

![在此处输入图像描述](../Images/17031fece3c3a3a232bd488969fe6292.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-05T13:24:29.330

我认为这不是一个好的答案。导入项目时不要选择 Blackberry。在 General 文件夹下，单击 Existing Projects into Workspace，然后单击 Next。这必须有效。

导入样本

```
1 Download a sample app from https://github.com/blackberry/NDK-Samples
2 Extract the sample zip file to a location on your hard drive.
3 In the IDE, on the File menu, click Import.
4 Under the General folder, click Existing Projects into Workspace, then click Next.
5 Click Finish. 
```

该示例现在应该出现在 Project Explorer 中。

[http://developer.blackberry.com/native/documentation/bb10/com.qnx.doc.native_sdk.quickstart/topic/running_sample_apps.html](http://developer.blackberry.com/native/documentation/bb10/com.qnx.doc.native_sdk.quickstart/topic/running_sample_apps.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T14:12:22.100

通过屏幕截图中的下拉 SDK 选择器，您似乎正在运行 10.0.9.1101，这是 SDK 的旧版本。当前的 Gold SDK 是 10.0.9.1673。

确保您已下载新的：[https ://developer.blackberry.com/cascades/download/](https://developer.blackberry.com/cascades/download/)

完成后，您可以从下拉列表中更改 SDK。该设置以每个工作区为基础保存，并且在您安装新 SDK 时不会自动更新。

# php - 是否可以在 PHP 中的一个数组中组合两个数组？

> ID：13965815
> 
> 赞同：5
> 
> 时间：2012-12-20T05:20:52.623
> 
> 标签：php, arrays

我有一个数组，其中包含一些看起来像这样的数据

```
$valueOptions = array(
                       'order_shipping_data_firstname' => Mage::helper('orders2csv')->__('order shipping firstname'), 
                       'order_shipping_data_lastname' => Mage::helper('orders2csv')->__('order shipping lastname'),
                       'order_shipping_data_region' => Mage::helper('orders2csv')->__('order shipping region'),
                       'order_shipping_data_street' => Mage::helper('orders2csv')->__('order shipping street'),
                       'order_shipping_data_city' => Mage::helper('orders2csv')->__('order shipping city')
                ); 
```

我需要结合名字和姓氏字段，但无法找到解决方案。这是模块中唯一引用任何姓氏/名字/名字的文件，因此它从magento框架内从外部调用它。理想情况下，它们将存储在变量中，我可以将它们组合起来 $fullname = $first 。$last 等，但这在数组中不起作用。

我不太了解 的用法，`=>`但我知道是否编辑右侧并进行此操作：`=> Mage::helper('orders2csv')->__('order shipping fullname')`该选项将出现在我想要的位置（在下拉列表中），所以我想我正在尝试将其合并`'order_shipping_data_firstname'&'order_shipping_data_lastname'`并放在之前这个，但在数组内？

我还尝试在变量中启动另一个数组并将变量插入 valueOptions 数组中，但这坏了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:28:50.527

```
$foo = array(
    'bar' => array(
        "hello",
        "world"
    ),
);
var_dump($foo); 
```

数组嵌套在数组中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:29:24.680

试试这个：

```
$orders = Mage::helper('orders2csv');
$valueOptions = array(
        'order_shipping_data_firstname' => $orders->__('order shipping firstname'), 
        'order_shipping_data_lastname' => $orders->__('order shipping lastname'),
        'order_shipping_data_fullname' => $orders->__('order shipping firstname').' '.$orders->__('order shipping lastname'),
        'order_shipping_data_region' => $orders->__('order shipping region'),
        'order_shipping_data_street' => $orders->__('order shipping street'),
        'order_shipping_data_city' => $orders->__('order shipping city')
); 
```

或这个：

```
$orders = Mage::helper('orders2csv');
$valueOptions = array(
        'order_shipping_data_firstname' => $orders->__('order shipping firstname'), 
        'order_shipping_data_lastname' => $orders->__('order shipping lastname'),
        'order_shipping_data_fullname' => $orders->__('order shipping fullname'),
        'order_shipping_data_region' => $orders->__('order shipping region'),
        'order_shipping_data_street' => $orders->__('order shipping street'),
        'order_shipping_data_city' => $orders->__('order shipping city')
); 
```

# joomla - 不同的表单域，不同的用户组选择

> ID：13965819
> 
> 赞同：0
> 
> 时间：2012-12-20T05:20:57.423
> 
> 标签：joomla, joomla2.5

在 joomal 2.5 中，我在用户注册字段中添加了一个字段来选择用户组。在选择每个用户组时，我需要具有不同字段的注册表单。我不能为此购买任何商业模块或组件。有人可以为此提出一个好的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:49:23.513

我想你正在寻找这样的东西

[http://docs.joomla.org/Creating_a_profile_plugin](http://docs.joomla.org/Creating_a_profile_plugin)

它很耗时，但符合 joomla 标准。

# python - 在 Heroku 上找不到资源“语料库/wordnet”

> ID：13965823
> 
> 赞同：24
> 
> 时间：2012-12-20T05:21:21.990
> 
> 标签：python, django, heroku, nltk, wordnet

我正在尝试让 NLTK 和 wordnet 在 Heroku 上工作。我已经完成了

```
heroku run python
nltk.download()
  wordnet
pip install -r requirements.txt 
```

但我得到这个错误：

```
Resource 'corpora/wordnet' not found.  Please use the NLTK
  Downloader to obtain the resource:  >>> nltk.download()
  Searched in:
    - '/app/nltk_data'
    - '/usr/share/nltk_data'
    - '/usr/local/share/nltk_data'
    - '/usr/lib/nltk_data'
    - '/usr/local/lib/nltk_data' 
```

然而，我查看了 /app/nltk_data 并且它就在那里，所以我不确定发生了什么。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-14T07:02:50.543

我刚遇到同样的问题。最终为我工作的是在应用程序的文件夹本身中创建一个“nltk_data”目录，将语料库下载到该目录并在我的代码中添加一行，让 nltk 知道在该目录中查找。您可以在本地完成这一切，然后将更改推送到 Heroku。

因此，假设我的 python 应用程序位于一个名为“myapp/”的目录中

**第一步：创建目录**

```
cd myapp/
mkdir nltk_data 
```

**第 2 步：将语料库下载到新目录**

```
python -m nltk.downloader 
```

这将弹出`nltk`下载器。将您的*下载目录*设置为`whatever_the_absolute_path_to_myapp_is/nltk_data/`. 如果您使用的是 GUI 下载器，下载目录是通过 UI 底部的文本字段设置的。如果您使用的是命令行一，则在配置菜单中进行设置。

一旦下载器知道指向您新创建的`nltk_data`目录，下载您的语料库。

或者从 Python 代码一步：

```
nltk.download("wordnet", "whatever_the_absolute_path_to_myapp_is/nltk_data/") 
```

**第 3 步：让 nltk 知道去哪里找**

`ntlk`寻找数据、资源等。在`nltk.data.path`变量中指定的位置。您需要做的就是添加`nltk.data.path.append('./nltk_data/')`到实际使用 nltk 的 python 文件中，除了默认路径之外，它还会在其中查找语料库、标记器等。

**第 4 步：将其发送到 Heroku**

```
git add nltk_data/
git commit -m 'super useful commit message'
git push heroku master 
```

那应该工作！无论如何，它对我有用。值得注意的一件事是，从执行 nltk 内容的 python 文件到 nltk_data 目录的路径可能会有所不同，具体取决于您构建应用程序的方式，因此请在执行时考虑这一点`nltk.data.path.append('path_to_nltk_data')`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-01T02:26:45.447

### 更新

[正如 Kenneth Reitz 指出的那样](https://github.com/heroku/heroku-buildpack-python/blob/master/bin/steps/hooks/post_compile)，heroku-python-buildpack 中添加了一个更简单的解决方案。将`nltk.txt`文件添加到您的根目录并在其中列出您的语料库。有关详细信息，请参阅[https://devcenter.heroku.com/articles/python-nltk](http://textblob.readthedocs.io/en/dev/install.html)。

* * *

### 原始答案

这是一个更简洁的解决方案，它允许您直接在 Heroku 上安装 NLTK 数据，而无需将其添加到您的 git 存储库中。

我使用类似的步骤在 Heroku 上安装[Textblob](http://textblob.readthedocs.io/en/dev/install.html)，它使用 NLTK 作为依赖项。我在第 3 步和第 4 步中对我的原始代码进行了一些小的调整，这些调整应该适用于仅 NLTK 的安装。

默认的 heroku buildpack 包含一个在所有默认构建[`post_compile`步骤](https://github.com/heroku/heroku-buildpack-python/blob/master/bin/steps/hooks/post_compile)完成后运行的步骤：

```
# post_compile
#!/usr/bin/env bash

if [ -f bin/post_compile ]; then
    echo "-----> Running post-compile hook"
    chmod +x bin/post_compile
    sub-env bin/post_compile
fi 
```

如您所见，它在您的项目目录中查找您自己的`post_compile`文件，`bin`如果存在则运行它。您可以使用此挂钩来安装 nltk 数据。

1.  `bin`在本地项目的根目录中创建目录。

2.  将您自己的`post_compile`文件添加到`bin`目录中。

    ```
    # bin/post_compile
    #!/usr/bin/env bash

    if [ -f bin/install_nltk_data ]; then
        echo "-----> Running install_nltk_data"
        chmod +x bin/install_nltk_data
        bin/install_nltk_data
    fi

    echo "-----> Post-compile done" 
    ```

3.  将您自己的`install_nltk_data`文件添加到`bin`目录中。

    ```
    # bin/install_nltk_data
    #!/usr/bin/env bash

    source $BIN_DIR/utils

    echo "-----> Starting nltk data installation"

    # Assumes NLTK_DATA environment variable is already set
    # $ heroku config:set NLTK_DATA='/app/nltk_data'

    # Install the nltk data
    # NOTE: The following command installs the wordnet corpora, 
    # so you may want to change for your specific needs.  
    # See http://www.nltk.org/data.html
    python -m nltk.downloader wordnet

    # If using Textblob, use this instead:
    # python -m textblob.download_corpora lite

    # Open the NLTK_DATA directory
    cd ${NLTK_DATA}

    # Delete all of the zip files
    find . -name "*.zip" -type f -delete

    echo "-----> Finished nltk data installation" 
    ```

4.  添加`nltk`到您的`requirements.txt`文件中（或者`textblob`，如果您使用的是 Textblob）。

5.  将所有这些更改提交到您的存储库。

6.  在您的 heroku 应用程序上设置 NLTK_DATA 环境变量。

    ```
    $ heroku config:set NLTK_DATA='/app/nltk_data' 
    ```

7.  部署到 Heroku。您将`post_compile`在部署结束时看到 step trigger，然后是 nltk 下载。

我希望你觉得这很有帮助！享受！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-26T03:26:48.723

仅适用于 Mac OS 用户。

`python -m nltk.downloader -d /usr/share/nltk_data wordnet`

语料库数据不能直接下载到`/usr/share/nltk_data`文件夹中。报错“无权限”，两种解决方法：

1.  为 Mac 系统添加额外的权限更改，详情请参阅[在 root El capitan (rootless disabled) 上时不允许操作](https://stackoverflow.com/questions/32659348/operation-not-permitted-when-on-root-el-capitan-rootless-disabled)。但是，我不想仅为这个语料库更改为 mac 默认设置。我选择第二种解决方案。

2.  *   将语料库下载到您有权访问的任何目录。`python -m nltk.downloader -d some_user_accessable_directory wordnet'。请注意，您只下载所需的语料库，例如 wordnet、reuters，而不是从 nltk 下载整个语料库。
    *   将路径添加到 nltk 路径。在 py 文件中，添加以下行：

        `import nltk nltk.data.path.append('nltk_data')`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-13T20:28:02.063

我遇到了这个问题。对于那些不在虚拟环境中工作的人，需要下载到 ubuntu 中的以下目录：

```
/usr/share/nltk_data/corpora/wordnet 
```

而不是 wordnet，它可能是棕色的或其他。如果要下载语料库，可以直接在终端中运行此命令。

```
$ sudo python -m nltk.downloader -d /usr/share/nltk_data wordnet 
```

再次而不是 wordnet 它可能是棕色的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-13T03:09:23.473

这个有效：

对于 Mac OS 用户。

```
python -m nltk.downloader -d /usr/local/share/nltk_data wordnet 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-17T19:05:39.337

Heroku 现在正式支持 NLTK 数据，内置！

[https://devcenter.heroku.com/articles/python-nltk](https://devcenter.heroku.com/articles/python-nltk)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-02T12:46:21.790

我只能用这个解决方案解决我的问题：

[https://github.com/gunthercox/ChatterBot/issues/930#issuecomment-322111087](https://github.com/gunthercox/ChatterBot/issues/930#issuecomment-322111087)

这是与 SSL 相关的解决方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-14T07:54:06.980

我知道这是一个老问题，但由于 Heroku 提供对 的支持，“正确”答案已经改变`nltk`，我认为可能值得回答。

Heroku 现在支持`nltk`. 如果你需要下载一些东西`nltk`（在这个例子中是 wordnet，或者可能是停用词或语料库），你可以通过简单地`nltk.txt`在你拥有`Procfile`和`requirements.txt`. 在您的`nltk.txt`文件中，您列出要下载的每个项目。对于我刚刚部署的项目，我需要停用词和 wordnet，所以我`nltk.txt`看起来像这样：

```
stopwords

wordnet 
```

很简单。而且，当然，请确保您的or中`nltk`指定了适当的版本。有关基本事实，请访问[https://devcenter.heroku.com/articles/python-nltk](https://devcenter.heroku.com/articles/python-nltk)。`Pipfile``requirements.txt`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-14T05:19:44.890

在 Heroku 平台上部署聊天机器人时，我遇到了完全相同的问题。尽管来自 follyroof 的答案是一个万无一失的解决方案，但在许多情况下，存储库的大小会急剧增加。

所以，我在 app.py 文件中使用了 nltk.download('PACKAGE') 。这样，每当运行 app.py 时，都会自动下载依赖项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-20T14:12:58.587

我遇到了同样的错误。*Fred Foo*的这个解决方法帮助我解决了这个问题以下对我有用：

```
# 1) execute the below written code 
# 2) a NLTK Download window will open
# 3) select "Corpora" tab and scroll down until "wordnet"
# 4) doubleclick to install

nltk.download()
from nltk.corpus import wordnet 
```

[在 NLTK 中导入 WordNet](https://stackoverflow.com/questions/6661108/import-wordnet-in-nltk)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-29T19:13:35.793

我遇到了同样的**问题**，我尝试了这个解决方案，它是有效的。我刚刚放了这些：

```
import nltk
nltk.download('wordnet') 
```

在上面的代码中，它运行没有问题。所以试试吧，也许对你有帮助。

# xml - Spring STS servlet-context.xml 文件中的错误

> ID：13965824
> 
> 赞同：2
> 
> 时间：2012-12-20T05:21:22.863
> 
> 标签：xml, spring, spring-mvc

我是 java 和 spring 的新手。STS 版本是 3.1.0.RELEASE。

我在“servlet-context.xml”文件中出现以下错误。

```
Multiple annotations found at this line:
- Cannot locate BeanDefinitionParser for element [bean]
- cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'bean'.
- Configuration problem: Cannot locate BeanDefinitionParser for element [bean] Offending resource: file [D:/springy/roo/t03/src/main/
 webapp/WEB-INF/spring/appServlet/servlet-context.xml] 
```

xml 文件中的这些条目出现错误：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" />

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" p:definitions="/WEB-INF/tiles-defs.xml" /> 
```

以下是 servlet-context.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" />

    <context:component-scan base-package="org.foo.bar" />

    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" p:definitions="/WEB-INF/tiles-defs.xml" />       
</beans:beans> 
```

有人可以指导我做错了什么以及如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:40:17.600

您必须在`bean`元素前面加上`beans:`

前任：

```
<beans:bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" p:basename="views" /> 
```

[这是因为您已经使用namespace](http://www.w3schools.com/xml/xml_namespaces.asp)导入了`bean`元素。 `beans`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-27T07:52:13.580

```
<beans:bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <beans:property  name="viewClass" value= "org.springframework.web.servlet.view.tiles2.TilesView" />
</beans:bean>
<beans:bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions" >
        <beans:list>
            <beans:value>/WEB-INF/tiles.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean> 
```

# facebook - 使用 jquery 显示 json 结果时，url 变得混乱

> ID：13965826
> 
> 赞同：1
> 
> 时间：2012-12-20T05:21:25.437
> 
> 标签：facebook, json, url, rss

HTML 代码：

```
<a id="" onmouseover="LinkshimAsyncLink.swap(this, "http:\/\/www.tbogard.com\/2008\/05\/31\/tutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax\/");" rel="nofollow" style="" onclick="LinkshimAsyncLink.swap(this, "http:\/\/www.facebook.com\/l.php?u=http\u00253A\u00252F\u00252Fwww.tbogard.com\u00252F2008\u00252F05\u00252F31\u00252Ftutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax\u00252F&h=CAQFB81hM&s=1");" target="" title="" href="http://www.facebook.com/l.php?u=http%3A%2F%2Fwww.tbogard.com%2F2008%2F05%2F31%2Ftutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax%2F&h=CAQFB81hM&s=1">
    <img class="img" alt="" src="https://fbexternal-a.akamaihd.net/safe_image.php?d=AQDDROkII35SUCO7&w=90&h=90&url=http%3A%2F%2Fi2.wp.com%2Fwww.tbogard.com%2Fwp-content%2Fuploads%2F2010%2F10%2Frjson.jpg%3Ffit%3D400%2C400">
    </a>
    <br>
    <a id="" onmouseover="LinkshimAsyncLink.swap(this, "http:\/\/www.tbogard.com\/2008\/05\/31\/tutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax\/");" rel="nofollow" style="" onclick="LinkshimAsyncLink.swap(this, "http:\/\/www.facebook.com\/l.php?u=http\u00253A\u00252F\u00252Fwww.tbogard.com\u00252F2008\u00252F05\u00252F31\u00252Ftutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax\u00252F&h=wAQFEyL2-&s=1");" target="_blank" href="http://www.facebook.com/l.php?u=http%3A%2F%2Fwww.tbogard.com%2F2008%2F05%2F31%2Ftutorial-how-to-jsonp-with-jquery-using-getjson-or-ajax%2F&h=wAQFEyL2-&s=1">Tutorial : How to JSONP with jQuery using $.getJSON or $.ajax</a>
    <br>
    www.tbogard.com
    <br>
    Remote Services is a now-a-day need, and sadly few documented in detail. Here you can learn how to use Remote JSON (JSONP) In your web-applications with jQuery, PHP and 
```

![在此处输入图像描述](../Images/787ed7a092d4a8eb26be495b6969621f.png)

我使用萤火虫得到了上面的源代码。这是我的[页面](http://www.doers.lk/)，当我单击站点中的某个 URL 时，它会在 facebook 中显示以下错误消息。 ![在此处输入图像描述](../Images/adfc5ef5e12f8027b7496147d6f7ec0a.png)

我通过带有 yql api 支持的 json 获取 facebook 页面提要。但我想要的是当我像这样点击我网站中的一些网址时

```
www.tbogard.com 
```

它将链接到给定的 url 而无需访问 facebook。有没有办法做到这一点？

# java - struts2 如何运行它的 validate 方法？

> ID：13965830
> 
> 赞同：3
> 
> 时间：2012-12-20T05:21:53.893
> 
> 标签：java, ajax, validation, struts2, xml-validation

我正在使用`validate()`方法进行 XML 表单验证和表单验证。XML验证是检查他们是否填写了必填字段，字段长度是否合适等，而验证方法执行数据库查找，如果输入的值存在于数据库中。如果它确实存在，它将添加一个字段错误。

现在我的问题。当我提交表单并且我没有填写`requiredstrings` 它时，它会在页面中添加一个错误，但是当我输入一个有效值时，它仍然会提示相同的错误（同时它不会调用 validate 方法）。

这是我的表格。

```
<!DOCTYPE HTML>
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
<head>

<sj:head/>  
</head>
<body>
    <h3>Register for a prize by completing this form.</h3>
    <div id="divErrors">
    </div>

    <s:form action="register" id ="result">
            <label>UserName</label>
            <s:textfield name="userBean.username" />
            <s:fielderror/>
        <sj:submit 
                    targets="result" 
                    value="AJAX Submit" 
                    indicator="indicator"
                    button="true"
                    />

    </s:form>
</body>
</html> 
```

注册验证.xml

```
<!DOCTYPE validators PUBLIC "-//Apache Struts//XWork Validator 1.0.3//EN"
    "http://struts.apache.org/dtds/xwork-validator-1.0.3.dtd">
<validators>
    <field name="userBean.username">
        <field-validator type="requiredstring">
            <message>User name is required.</message>
        </field-validator>
    </field>
</validators> 
```

还有我`validate`的`RegisterAction`班级。

```
public void validate(){

        if(userBean != null && userBean.getUsername().equals("foo")){
            this.addFieldError("userBean.username", "That Username already exist");

        }

    } 
```

我在做什么的情景。

我将提交表单而不填写所需的字符串，然后我将输入一个有效值，提交表单后仍然存在相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:38:17.833

实际上问题在于，`input`如果验证失败，Struts2 中的验证框架默认返回结果。如果`input`是 JSP 页面，即里面的表单，那么当您进行 ajax 调用时，整个页面将被替换。

第二次您进行了*有效*调用，因此在验证后该`execute`方法应返回结果。而这个结果应该是在目标页面上替换的JSP片段`"result"`，也就是表单元素。但是 div`"divErrors"`不会被您的代码替换。如果它在第一次请求时呈现错误，那么它将在那里。

好的，我认为理解 ajax 和验证是值得的。现在您了解如何解决返回非预期结果的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T12:16:50.193

很多事情都可能发生。例如，“userbean”可能没有初始化。

您还使用了两种验证：XML 中的一种，如果您配置了 Validator 拦截器（请参阅[http://struts.apache.org/2.2.3/docs/interceptors.html](http://struts.apache.org/2.2.3/docs/interceptors.html)），它应该可以工作，而 validate （） 方法。

*   检查您是否有 userbean 的 getter 和 setter
*   validate() 方法处的断点以检查那里的 userbean 的内容

# java - env->FindClass 函数返回 null

> ID：13965832
> 
> 赞同：5
> 
> 时间：2012-12-20T05:22:18.340
> 
> 标签：java, android, c++, java-native-interface, cocos2d-x

我试图从我的 cpp 类调用我的 java 类中的一些函数。我成功地进行了三次这些调用，直到我第四次调用函数。我正在使用 cocos2dx 引擎。

我从 MiscManagerJni.cpp 调用 MiscManager.java 中的函数

当我尝试获取 classID 和游戏崩溃时，我收到以下错误：

> 12-20 12:06:09.328: W/System.err(26651): java.lang.NoClassDefFoundError: [通用] 12-20 12:06:09.328: W/System.err(26651): 在 dalvik.system。 NativeStart.main(Native Method) 12-20 08:56:35.402: D/libMiscManager(25952): 找不到 com/games/Game/MiscManager 的类

我已经从 MiscManagerJni.cpp 类中成功调用了 MiscManager.java 类中的函数 3 次。但是当我调用时，第四次返回 null

> jclass ret = pEnv->FindClass(CLASS_NAME);

谁能告诉我是什么导致了这个错误。

这些是我用来获取方法 id 和类 id 的函数

```
#define  LOG_TAG    "libMiscManager"
#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)
#define  CLASS_NAME "com/games/Game/MiscManager"

typedef struct JniMethodInfo_
{
    JNIEnv *    env;
    jclass      classID;
    jmethodID   methodID;
}   JniMethodInfo;

extern "C"

{
    // get env and cache it
    static JNIEnv* getJNIEnv(void)
    {

    JavaVM* jvm = cocos2d::JniHelper::getJavaVM();
    if (NULL == jvm) {
        LOGD("Failed to get JNIEnv. JniHelper::getJavaVM() is NULL");
        return NULL;
    }

    JNIEnv *env = NULL;
    // get jni environment
    jint ret = jvm->GetEnv((void**)&env, JNI_VERSION_1_4);

    switch (ret) {
        case JNI_OK :
            // Success!

            return env;

        case JNI_EDETACHED :
            // Thread not attached
            if (jvm->AttachCurrentThread(&env, NULL) < 0)
            {
                LOGD("Failed to get the environment using AttachCurrentThread()");
                return NULL;
            } else {
                // Success : Attached and obtained JNIEnv!
                return env;
            }

        case JNI_EVERSION :

            // Cannot recover from this error
            LOGD("JNI interface version 1.4 not supported");
        default :

            LOGD("Failed to get the environment using GetEnv()");
            return NULL;
    }
}

// get class and make it a global reference, release it at endJni().
static jclass getClassID(JNIEnv *pEnv)
{
    jclass ret = pEnv->FindClass(CLASS_NAME);
    if (! ret)
    {
        LOGD("Failed to find class of %s", CLASS_NAME);
    }
    return ret;
}

static bool getStaticMethodInfo(cocos2d::JniMethodInfo &methodinfo, const char *methodName, const char *paramCode)
{
    jmethodID methodID = 0;
    JNIEnv *pEnv = 0;
    bool bRet = false;

    do 
    {
        pEnv = getJNIEnv();
        if (! pEnv)
        {
            break;
        }

        jclass classID = getClassID(pEnv);

        methodID = pEnv->GetStaticMethodID(classID, methodName, paramCode);

        if (! methodID)
        {
            LOGD("Failed to find static method id of %s", methodName);
            break;
        }
        methodinfo.classID = classID;
        methodinfo.env = pEnv;
        methodinfo.methodID = methodID;

        bRet = true;
    } while (0);
    return bRet;

   }

 void InitJni()
      {
        cocos2d::JniMethodInfo methodInfo;
        if (! getStaticMethodInfo(methodInfo, "Init", "()V"))
        {
            return ;
        }

    methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);
}

void SaveBooleanJni(const char *key, bool value)
    {
         cocos2d::JniMethodInfo methodInfo;
        if (! getStaticMethodInfo(methodInfo, "SaveBoolean", "(Ljava/lang/String;Z)V"))
        {
        return;
    }

    jstring stringArg = methodInfo.env->NewStringUTF(key);
    methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, stringArg, value);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);
}

void SaveIntegerJni(const char *key, int value)
{
    cocos2d::JniMethodInfo methodInfo;
    if (! getStaticMethodInfo(methodInfo, "SaveInteger", "(Ljava/lang/String;I)V"))
    {
        return;
    }

    jstring stringArg = methodInfo.env->NewStringUTF(key);
    methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, stringArg, value);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);
}

void SaveLongJni(const char *key, long value)
{
    cocos2d::JniMethodInfo methodInfo;
    if (! getStaticMethodInfo(methodInfo, "SaveLong", "(Ljava/lang/String;J)V"))
    {
        return;
    }
    jstring stringArg = methodInfo.env->NewStringUTF(key);
    methodInfo.env->CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, stringArg, value);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);
}

long GetLongJni(const char *key, long defaultValue)
{
     cocos2d::JniMethodInfo methodInfo;
    long ret = 0;
    if (! getStaticMethodInfo(methodInfo, "GetInteger", "(Ljava/lang/String;J)J"))
    {
        return ret;
    }

    jstring stringArg = methodInfo.env->NewStringUTF(key);
    ret = methodInfo.env->CallStaticLongMethod(methodInfo.classID, methodInfo.methodID, stringArg, defaultValue);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);

    return (long)ret;
}

bool GetBooleanJni(const char *key, bool defaultValue)
{
     cocos2d::JniMethodInfo methodInfo;
    jboolean ret = false;
    if (! getStaticMethodInfo(methodInfo, "GetBoolean", "(Ljava/lang/String;Z)Z"))
    {
        return ret;
    }
     jstring stringArg = methodInfo.env->NewStringUTF(key);
    ret = methodInfo.env->CallStaticIntMethod(methodInfo.classID, methodInfo.methodID, stringArg, defaultValue);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);

    return ret;
}

int GetIntegerJni(const char *key, int defaultValue)
{
    cocos2d::JniMethodInfo methodInfo;
    int ret = 0;
    if (! getStaticMethodInfo(methodInfo, "GetInteger", "(Ljava/lang/String;I)I"))
    {
        return ret;
    }

    jstring stringArg = methodInfo.env->NewStringUTF(key);
    ret = methodInfo.env->CallStaticIntMethod(methodInfo.classID, methodInfo.methodID, stringArg, defaultValue);
    methodInfo.env->DeleteLocalRef(stringArg);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);

    return (unsigned int)ret;
}

bool IsConnectedToNetworkJni()
{
    cocos2d::JniMethodInfo methodInfo;
    jboolean ret = false;
    if (! getStaticMethodInfo(methodInfo, "IsConnectedToNetwork", "()Z"))
    {
        return ret;
    }

    ret = methodInfo.env->CallStaticBooleanMethod(methodInfo.classID, methodInfo.methodID);
    methodInfo.env->DeleteLocalRef(methodInfo.classID);

    return ret;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:07:09.727

我通过在 cocos2dx 引擎中使用 JNIHelper 类解决了这个问题。我在 JNIHelper 类中使用 getStaticMethodInfo 而不是在我自己的类中编写。

# javascript - 为什么 eval() 不安全，现代浏览器上的用户无论如何都不会运行对其进行评估的任何内容？

> ID：13965833
> 
> 赞同：2
> 
> 时间：2012-12-20T05:22:32.917
> 
> 标签：javascript, eval

我读到了 eval() 的安全含义，但是有些东西我不明白。想象一个最坏的情况，其中 eval() 正在编译一个输入框。黑客可以在上面输入任何内容，它会运行，但在现代浏览器中，例如：Chrome 不能在控制台上做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:30:33.210

当然可以，但用户的目标不是窃取自己的数据。

危险是其他人成功地将恶意代码带到他知道将在用户页面上发生评估的地方。

利用此类问题的攻击称为[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)

另一个类似的安全问题是直接附加可能包含脚本标记的 HTML。例如，如果您在实现论坛时这样做，并且允许用户编写 HTML 而没有任何限制，那么他们可以在其他用户的页面中执行脚本标记。

# javascript - 使用 Greasemonkey 脚本在网页底部添加一个框架（并设置其大小）？

> ID：13965834
> 
> 赞同：1
> 
> 时间：2012-12-20T05:22:47.180
> 
> 标签：javascript, jquery, iframe, cross-domain, greasemonkey

有没有办法使用 Greasemonkey 脚本在网页底部添加框架？

我想编写一个脚本，`http://www.google.com`在每个网页的底部添加一个框架。
我还希望框架的宽度和高度与其中的页面高度相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:08:23.000

这是3题合一。

1.  添加 an`<iframe>`本身很容易：

    ```
    $(document.body).append (
        '<iframe src="http://{SOME_PAGE_BESIDES_GOOGLE!}.com/">'
    ); 
    ```

2.  **但是，**谷歌[不会](https://stackoverflow.com/a/8808761/331508)   [让你](https://stackoverflow.com/q/8524449/331508)   [加载它`<iframe>`](http://tech.slashdot.org/story/11/10/23/1949227/google-not-reciprocating-on-iframe-usage)——用各种技巧和*服务条款*阻止它。
    许多其他站点（包括 Stack Exchange 站点）也阻止了`iframe`.

3.  当且仅**当目标页面服务器已将****[跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)***设置***为允许时**`<object>`，您可能会加载框架阻止页面。

    可以肯定的是，您的目标页面*没有*以这种方式设置 CORS。;-) 但是，如果他们这样做了，那么代码将如下所示：

    ```
    $(document.body).append ( '                                     \
        <object type="text/html" data="http://www.google.com/">     \
        </object>                                                   \
    ' ); 
    ```

4.  最后，对于那些实际可以加载`<iframe>`（或`<object>`）的情况，您需要从加载的 iframe 将页面大小传回容器/主/目标页面。

    为此，请参阅[*用户脚本的两个实例如何在框架之间进行通信？*](https://stackoverflow.com/a/11774184/331508).

* * *

* * *

对于每个页面上的 Google，最好的选择是使用[Google *Custom Search API*](https://developers.google.com/custom-search/v1/overview)。

# excel - Excel VBA：SQL查询以随机顺序返回n行

> ID：13965836
> 
> 赞同：2
> 
> 时间：2012-12-20T05:23:09.163
> 
> 标签：excel, vba, random

我正在对 Excel 中的范围进行查询以提取记录。我需要从 15 条记录中随机选择 5 条记录。我做了一些研究，可以在 MySQL 和 T-SQL 中找到随机排序的语法。这是来自 SO 的一个问题，总结了这些示例：[Return rows in random order](https://stackoverflow.com/questions/1117761/sql-query-to-return-rows-in-random-order)

`SELECT * FROM table ORDER BY NEWID()`- 来自 T-SQL

Excel VBA 中是否有类似的`NEWID()`或`UUID()`可用的语法，如果没有，实现此目的的优雅解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:56:11.637

我想你正在寻找这个：[http ://www.tushar-mehta.com/excel/newsgroups/rand_selection/index.html#rand_and_rank](http://www.tushar-mehta.com/excel/newsgroups/rand_selection/index.html#rand_and_rank)

# sql - SQL查询将日期格式转换为另一种格式

> ID：13965837
> 
> 赞同：1
> 
> 时间：2012-12-20T05:23:10.097
> 
> 标签：sql, sql-server-2008

如何在 SQL Server中转换`02/03/2012`为格式`2/3/2012`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:26:00.207

[http://www.sql-server-helper.com/tips/date-formats.aspx](http://www.sql-server-helper.com/tips/date-formats.aspx)

我想，这会有所帮助...

**编辑：（**同样的问题）

[在 SQL Server 中，如何将日期转换为 M/D/YYYY 格式的字符串？（没有前导零，不是 MM/DD/YYYY）](https://stackoverflow.com/questions/6128558/in-sql-server-how-to-convert-a-date-to-a-string-in-format-m-d-yyyy-no-leading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:32:22.880

如果你运行的是 SQL Server 2012，你可以这样做：

```
SELECT FORMAT ( @your_date_value, 'd', 'en-US' ) 
```

请参阅[http://msdn.microsoft.com/en-us/library/hh213505.aspx](http://msdn.microsoft.com/en-us/library/hh213505.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:32:23.867

对于你的问题答案

```
SELECT Convert(varchar, GETDATE(),1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T06:23:54.420

这将得到你的确切结果..

```
Declare @test datetime 

Set @test = '02/03/2012'

Print  Convert(VARCHAR(10) , @test,101 )

Print  REPLACE(LEFT(Convert(VARCHAR(10) , @test,101 ),5),0,'') + RIGHT(Convert(VARCHAR(10) , @test,101),5) 
```

结果：

```
02/03/2012
2/3/2012 
```

# parsing - 维基百科关于 LR(1) 中 FOLLOW() 集的示例是否解析错误？

> ID：13965846
> 
> 赞同：2
> 
> 时间：2012-12-20T05:24:04.170
> 
> 标签：parsing, language-agnostic, lr

我不知道我是否误解了正在发生的事情，或者维基百科的解释是否不正确。

[维基百科说](http://en.wikipedia.org/wiki/Canonical_LR_parser#FIRST_and_FOLLOW_sets)：

> `FOLLOW(k,B)`一个项目集`k`和一个非终结符`B`的集合是所有项目的后续集合的并集，`K`其中`'•'`后面是`B`。

他们的示例语法如下所示：

```
S → E
E → T
E → ( E )
T → n
T → + T
T → T + n 
```

他们发现 LR(0) 项集 0 为：

```
[S → • E]
[E → • T]
[E → • ( E )]
[T → • n]
[T → • + T]
[T → • T + n] 
```

这意味着，那*`FOLLOW(0,T)`是项目集 0 中所有项目的后续集的并集，其中 '•' 后跟`T`。*

应用他们的逻辑，我们得到*“项目集 0 中的项目，其中 '•' 后跟`T`”*实际上是这两个项目：

*   `[E → • T]`
*   `[T → • T + n]`

但是，这就是我卡住的地方：
第二个的后续集合包含符号`)`，因为该项目`[E → • ( E )]`可以生产`[E → • ( T )]`，这意味着 a`)`必须在后续集合中。

但是，维基百科说`FOLLOW(0,T) = { $, '+' }`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:37:47.880

我在这本书中找到了“Warshall's Closure Algorithm”的描述

[Bornat : 理解和编写编译器](http://www.amazon.co.uk/Understanding-Writing-Compilers-Do---Yourself/dp/0333217322/ref=sr_1_1?ie=UTF8&qid=1356010204&sr=8-1)

在这里有所帮助。（总的来说，我发现这本书比更著名的编译器设计书籍更具可读性和实用性！）

周围可能还有其他很好的算法描述。

编辑：我生疏了，但我相信维基百科的文章在这方面是正确的：

记住这是`Follow(0,T)`.
现在您显然是对的，')' 在某些情况下可以跟随 T。

然而，不是从 0 的起点......这意味着一个表达式`n)`or `n+n)`or `n+n+n)`，像这样明确地写出来，是明显的语法错误。

（让这些事情变得明确而不是用数学符号隐藏是我*真正*喜欢那本书的地方！）

# php - php数组在第一次加载时没有返回

> ID：13965848
> 
> 赞同：0
> 
> 时间：2012-12-20T05:24:06.790
> 
> 标签：php, ajax, facebook, json

我正在尝试调试一个 facebook 脚本，该脚本将用户个人资料加载到您可以编辑的表单中。

`$user_profile`问题是第一次加载页面时脚本不返回数组。但是，页面的后续刷新会很好地返回数组。

我怎样才能让这个数组在第一次加载页面时返回，从而让脚本的其余部分运行？这是一个`AJAX`解决方案，还是`JSON`？如果是这样，我会怎么做？

提前致谢。

```
<?php
  $is_fb = false;
  $is_linkedin = false;
  $reg_method = $_GET['conn_social'];

  if (isset($_GET['in_uid'])){
    $cur_in_uid = $_GET['in_uid'];
  }

  if ($reg_method == "facebook"){
    $is_fb = true;
  }
  else if ($reg_method == "linkedin"){
    $is_linkedin = true;
  }

  if($is_fb) {
    global $fbconfig;
    $facebook = new Facebook(array( 'appId'  => $fbconfig['appid'],
                                    'secret' => $fbconfig['secret'],
                                    'cookie' => true ));

    $user = $facebook->getUser();

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');

        //the below line is for debugging only - THIS PRINTS ON SCREEN REFRESH ONLY
        print_r($user_profile); 
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    $is_fb_uid_exist = hl_check_fb_uid_exist($user_profile['id']);

    if($is_fb_uid_exist){
      $is_fb = false;
    }

    try{
      $fql = "select name, first_name, last_name, birthday_date, sex, profile_url, hometown_location, current_location, work, activities, interests, music, tv, movies, books, quotes, about_me, website, education, sports, inspirational_people, languages, pic_square from user where uid=" . $user;

      $param = array( 'method'    => 'fql.query',
                      'query'     => $fql,
                      'callback'  => '' );

      $fqlResult = $facebook->api($param);
    }

 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:37:29.220

也许第一行有问题..

```
 $is_fb=false; 
```

当页面重定向时，这是否评估为假？

如果是，那么这没有执行。

```
 if($is_fb) {
     //Your Code
     //Your Code   
    } 
```

# scala - Sbt 程序集挂在我的 Mac 上

> ID：13965858
> 
> 赞同：1
> 
> 时间：2012-12-20T05:26:07.513
> 
> 标签：scala, sbt, sbt-assembly

从我开始使用 assembly 的那一天起，我就遇到了这个问题。sbt 程序集（对于任何项目）永远不会在我的 Mac 上完成。它只是挂在最后一步。为此原因之一。我将我的代码转移到一个 Linux 机器上并在那里构建。其他人有过这种经历吗？. 关于如何进行调试的任何想法？. 我有使用 Java 1.6.0_37 的 Lion。现在升级为山狮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:20:16.493

前段时间我遇到了同样的问题。您是否安装了防病毒软件？就我而言，是 Sophos 试图检查 jar，而 sbt 仍在构建它，这不知何故导致了 100% 的 CPU 使用率和组装任务永远耗时。检查您的活动监视器是否有使用大量 cpu 时间的 java 以外的任务，并尝试停用它们。我不知道是否有办法阻止 Sophos 检查罐子，不过会很有趣。

# scala - Scala 模式匹配与元组

> ID：13965864
> 
> 赞同：1
> 
> 时间：2012-12-20T05:26:35.943
> 
> 标签：scala, pattern-matching

我正在处理 Coursera 课程的第一个作业。

对于以下代码，我陷入了编译时错误。

```
 object pascal {
        def main(c: Int, r: Int) = {
                pascal(c, r)
            }
            def pascal(c: Int, r: Int) = {
                (c, r) match {
                    case ((r < 0) || (c < 0)) => throw new Exception
                                                 ("r and c must be > 0")
                    case r == 0 => 1
                    case r == 1 => 1
                    case c == 0 => 1
                    case r == c => 1
                    case _ => pascal(r-1,c-1) + pascal(r-1,c-1)
            }
        }
     }

vagrant@precise64:/vagrant/Workspace/Scala/hw1$ scalac pascal.scala
pascal.scala:7: error: not found: value ||
                        case ((r < 0) || (c < 0)) => throw ...
                                      ^
pascal.scala:8: error: value == is not a case class constructor, nor 
does it have an unapply/unapplySeq method
                        case r == 0 => 1 
```

请指教。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T05:53:54.817

这是 scala 中的无效语法：您需要使用所谓的*[警卫](https://stackoverflow.com/questions/2266915/does-scala-have-guards)*来检查布尔属性：

```
def pascal(c: Int, r: Int) = {
   (c, r) match {
     case (c,r) if ((r < 0) || (c < 0)) => throw new Exception
                                                 ("r and c must be > 0")
     ...
} 
```

顺便说一句，这样写代码更习惯：

```
def pascal(c: Int, r: Int) = {
   require((r >= 0) && (c >= 0), "r and c must be >= 0")
   (c, r) match {
     case (_, 1) => 1
     ...
} 
```

并且您必须将错误消息更改为“r 和 c 必须 >= 0”

# validation - xml 文件中用于验证的确切 dtd URI

> ID：13965865
> 
> 赞同：0
> 
> 时间：2012-12-20T05:26:36.753
> 
> 标签：validation, jar, dtd, xml

我有与 xml 验证相关的查询。当我们编写下面的 xml 验证代码时

```
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"> 
```

这里的dtd文件路径是一个准确的URI，如果我们断开网络，同样的验证仍然存在。我还认为当我们下载jar时，jar文件中可能存在dtd。如果jar文件中存在而不是我们为什么要写这种URI。

等待背后的一些坚实的原因..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:52:49.397

在许多情况下，URI 主要用于为资源提供唯一名称。与其他分配唯一名称的机制一样，URI 通过委托实现唯一性：只有域 www.hibernate.org 的所有者才能使用该主机名在 URI 空间中分配名称，因此他们的名称不会与其他人的名称冲突（谁将使用具有不同主机名的 URI）。与许多其他分配唯一名称的机制不同，URI 的优点是原则上可以使用简单的广泛可用的技术取消引用。

如果您使用的软件是从 JAR 文件中获取 DTD，而不是通过咨询 URI 中命名的主机（这似乎是合理的，但您没有说涉及到什么软件，我也不会以任何方式提出任何声明关于这个问题），那么它并没有做任何与任何 HTTP 代理完全不同的事情：使用本地缓存副本而不是通过网络再次获取相同的数据。

问题“我们为什么要编写这种 URI？” 如果您花一点时间考虑在系统标识符中使用 URI 的替代方法，那么最容易回答（而不是为 DTD 使用其他标识符）。很容易想到替代方案，但不仅很难想到比 URI 更好的替代方案，而且实际上很难想到不明显劣于 URI 的替代方案。（至少，这是我从该领域过去 25 年的经验中得出的推论。）

# iphone - CCAnimation 不工作

> ID：13965866
> 
> 赞同：0
> 
> 时间：2012-12-20T05:26:44.190
> 
> 标签：iphone, cocos2d-iphone, ccaction

在我的 init 方法中，我为这样的动画初始化帧。

```
 walkingFrames = [NSMutableArray array];
    for(int i =2; i<34; i = i+2){
        if(i<10){
            [walkingFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"Frame-00%d.tif", i]]];
        }
        else{
            [walkingFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"Frame-0%d.tif", i]]];
        }
    }

 where walkingFrames is defined in the header file. 
```

当我尝试在我的更新方法中创建这样的动画时，我得到一个 bad_access。

```
 CCAnimation *walkingAnimation = [CCAnimation animationWithSpriteFrames:walkingFrames delay:animationWalkingSpeed];
                    self.walkAction = [CCRepeatForever actionWithAction:
                                       [CCAnimate actionWithAnimation:walkingAnimation]];
                    [_guy runAction:_walkAction];

where walkAction is a CCAction property. 
```

我很难解决问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:32:54.730

试试这个代码..

```
[_guy runAction:[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation: walkingAnimation restoreOriginalFrame:NO]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:50:11.923

首先，没有必要这样做：

```
if(i<10){
            [walkingFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"Frame-00%d.tif", i]]];
        }
        else{
            [walkingFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"Frame-0%d.tif", i]]];
        } 
```

相反，你可以这样写：

```
[walkingFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"Frame-%03i.tif", i]]]; 
```

说了这么多，你能更具体地描述一下这个错误吗？错误消息到底是什么，你在哪一行得到它？如果你在这条线上得到它：

```
CCAnimation *walkingAnimation = [CCAnimation animationWithSpriteFrames:walkingFrames delay:animationWalkingSpeed]; 
```

我建议你应该先打印出 CCSpriteFrameCache 中的帧，看看这些帧是否出现在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:15:41.870

我发现了两个导致崩溃的问题，然后动画没有运行。首先，我应该像这样初始化我的 NSMutableArray，因为我在我的更新方法中使用它：

```
 walkingFrames = [[NSMutableArray alloc] init]; 
```

而不是我以前的做法是这样的：

```
 walkingFrames = [NSMutableArray array]; 
```

然后我发现我的动画没有运行，但也没有崩溃。

这是我的 CCSpriteFrameCache 的问题。

我是这样设置的：

```
 CCSpriteFrameCache *frames = [[CCSpriteFrameCache sharedSpriteFrameCacher] addSpriteFramesWithFile:@"images.plist"]; 
```

我应该这样做：

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"images.plist"]; 
```

当我想停止动画时，要恢复动画的原始帧，我需要这样做：

```
 [_guy stopAction:_walkAction];
    [_guy setDisplayFrame:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"Frame-008.tif"]]; 
```

# wpf - WPF 按钮内边框

> ID：13965867
> 
> 赞同：3
> 
> 时间：2012-12-20T05:26:46.270
> 
> 标签：wpf, wpf-controls

我是 WPF 开发的新手，我正在根据我的设计师提供的按钮样式创建它。 ![在此处输入图像描述](../Images/ae49fe2f75ca80e4bab4bc45df4e2fbb.png)

在创建按钮时，我遇到了一个奇怪的问题。我没有找到方法删除按钮半径。我试过“圆角=假”，但它只删除右侧圆角。此外，我没有找到如何删除按钮中的内部银色边框的方法。我认为这个问题是因为按钮应用了默认样式（在我的例子中是 chrome 样式）。

![在此处输入图像描述](../Images/f5a5a165b6668cc1c0f352291a975282.png)

有什么办法可以删除所有圆角和内边框。

感谢期待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T05:57:13.343

请参阅此链接[http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx)
和
`<ControlTemplate TargetType="Button">`
部分并找到此行
`<Border x:Name="Background" CornerRadius="3" ...`
，正如您猜测的那样，这就是原因。要更改，您应该使用自定义样式。
此链接也可能对您有所帮助：http: [//msdn.microsoft.com/en-us/magazine/cc163421.aspx](http://msdn.microsoft.com/en-us/magazine/cc163421.aspx)

# mysql - Mysql 查询：获取每周日期信息的数据？

> ID：13965869
> 
> 赞同：-1
> 
> 时间：2012-12-20T05:26:56.803
> 
> 标签：mysql

![在此处输入图像描述](../Images/5ea34dd955a352c16e1e1af1a5a8ffbe.png)

这是我的数据库表数据，{我只维护一个表}

我将只获取当前一周的信息。

从每个 start_date 获取最多 3 个数据

给我任何开发查询的想法，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:02:48.540

尝试这个：

```
SELECT eventid, fkUserid, event_tags, event_title, event_description, start_date, end_date 
FROM (SELECT eventid, fkUserid, event_tags, event_title, event_description, start_date, end_date, 
            IF(start_date = @last, @auto:=@auto+1, @auto:=0) cnt, IF(start_date != @last, @last:=start_date, TRUE) test
        FROM (SELECT eventid, fkUserid, event_tags, event_title, event_description, DATE(start_date) start_date, end_date 
            FROM event WHERE DATE(start_date) BETWEEN '2012-12-14' AND '2012-12-20' ORDER BY start_date) AS A, 
          (SELECT @auto:=0, @last:='0001-01-01') AS B
        ) AS A
WHERE cnt < 3; 
```

# delphi - Delphi VirtualTreeView在需要重绘时获取绘图画布

> ID：13965873
> 
> 赞同：1
> 
> 时间：2012-12-20T05:27:17.580
> 
> 标签：delphi, virtualtreeview

考虑到我以前从未使用过它，我想要一些代码来使用 VirtualTreeView 执行以下操作：

*   添加 x 数量的项目
*   定义静态项目大小 (x,y)
*   项目必须像 ListView 图标模式一样工作，以便在调整 TreeView 大小时根据需要自动水平和垂直跨越，以容纳当前边界内的所有可能项目
*   当需要绘制一个项目时，我需要触发一个事件，它为我提供一个特定的矩形边界和画布，我可以在其中简单地粘贴/绘制位图，因此只有在要显示项目时才会触发
*   单击一个项目后，它必须触发一个事件，给我项目索引，并在它周围绘制适当的选择框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:30:44.007

简而言之：你不能。虚拟树视图垂直跨越其项目，您唯一能做的就是使用 VTV 的列显示假项目。这就像用火箭筒射击麻雀一样。为什么不使用列表视图控件？

# apache-camel - 在不使用 Spring 的 Web 应用程序中使用 Apache Camel？

> ID：13965874
> 
> 赞同：2
> 
> 时间：2012-12-20T05:27:29.363
> 
> 标签：apache-camel

我正在探索在 Web 应用程序中使用 Apache Camel 来执行一些集成模式。

我发现的唯一例子是使用 Spring。

是否有不使用 Spring 的可用示例？

感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-03-19T16:49:50.790

聚会迟到了，但想发布更新的回复。我最近创建了一个名为**Harness**的轻量级框架，它可以非常容易地在 Camel 中创建 Web 服务，*而无需*任何 Spring 依赖项。它具有几个漂亮的功能，包括：

*   将 Camel 对象即插即用插入到“线束”中，该线束提供路由创建、注册表管理和测试所需的样板代码。

*   用很少的代码快速创建新业务逻辑的能力。这是因为在 Camel 和 Harness 之间已经提供了您可能需要的大部分内容。

*   实施像 Guice 这样的 IoC 框架的好处，没有使用像 Guice 这样的 IoC 框架的臃肿。通过使用 *.properties 文件，应用程序可以注入模拟、不同的处理器，甚至重新连接业务逻辑。

*   一种在不关闭应用程序或影响应用程序可能正在执行的任何其他操作的情况下重新配置、删除甚至添加业务逻辑的方法。

可以在[此处](https://github.com/davidholiday/camel-harness-lib)找到框架核心库。这是 Harness 文件以及一些辅助工具所在的位置。

参考实现可以在[这里](https://github.com/davidholiday/camel-harness)找到。这是一个功能齐全的 Camel 微服务，可以作为一个模板，让你的 Camel 骑行到达它需要去的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:47:17.990

一段时间以来，我一直想为此添加支持。但从来没有解决过它，或记录一张票。所以今天我记录了一张票[https://issues.apache.org/jira/browse/CAMEL-5906](https://issues.apache.org/jira/browse/CAMEL-5906)所以最终在未来我们有一种使用 serlvet 监听器来引导 Camel 的方法。门票的更多细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T14:58:05.107

非常简单，只需执行以下操作：

```
<display-name>My Web Application</display-name>

<!-- you can configure any of the properties on CamelContext, eg setName will be configured as below -->

    <context-param>
        <param-name>name</param-name>
        <param-value>MyCamel</param-value>
      </context-param>

  <!-- location of Camel route xml files -->
  <context-param>
    <param-name>routeBuilder-MyRoute</param-name>
    <!-- define the routes as a resource from the classpath by prefixing the value with classpath: -->
    <!-- note: instead of using a XML file we can also define the routes in Java code in a RouteBuilder class -->
    <param-value>classpath:camel-config.xml</param-value>
  </context-param>

  <!-- the listener that kick-starts Camel -->
  <listener>
    <listener-class>org.apache.camel.component.servletlistener.CamelServletContextListener</listener-class>
  </listener>

  <!-- Camel servlet used in the Camel application -->
  <servlet>
    <servlet-name>CamelServlet</servlet-name>
    <servlet-class>org.apache.camel.component.servlet.CamelHttpTransportServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T13:22:01.123

为此，您应该创建一个`MyCamelContextInitialisingListener`实现的侦听器类`javax.servlet.ServletContextListener`- 这将包含 Camel 初始化逻辑。

您在您的`WEB-INF/web.xml`

```
<web-app>
    <listener>
        <listener-class>com.cheese.MyCamelContextInitialisingListener</listener-class>
    </listener>
<web-app> 
```

侦听器将包含以下内容：

```
private CamelContext camelContext;

@Override 
public void contextInitialized(ServletContextEvent sce) {
    camelContext = new DefaultCamelContext();
    camelContext.addRouteBuilder(new MyRouteBuilder());
    camelContext.start();
}

@Override 
public void contextDestroyed(ServletContextEvent sce) {
    camelContext.stop()
} 
```

该类`MyRouteBuilder`将是`RouteBuilder`您定义的实现，它使用 Camel Java DSL 来定义路由逻辑。

不需要弹簧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T11:32:39.327

Spring 通常用于将 Camel 上下文作为 bean 来保存。

随意使用 Camel，就像在托管 bean 的任何其他成员中一样。根据您的 web 应用程序中的架构，它可能比使用 spring 更棘手。

通常，您在 webapp 中创建或重用一些单例 bean（有不同的方法可以做到这一点，例如`@Singleton`EJB，或一些 DI 框架，例如 GUICE（和 spring..）。然后只需使用骆驼上下文创建一个实例变量，例如CamelContext ctx; 然后在构造函数/单例构造函数中， ctx = new DefaultCamelContext();

您现在已经运行了骆驼，只需使用 Java DSL 继续向其添加组件和路由。无论如何，Camel 有几个组件是半依赖于 Spring 的。如JMS组件、Spring-WS等。此外，您可能很难在没有弹簧的情况下将 Camel 插入 servlet 容器。但这取决于您的用例。

在此处阅读有关上下文生命周期的信息 [http://camel.apache.org/lifecycle.html](http://camel.apache.org/lifecycle.html)

# tfs - 延迟发布并继续开发的 TFS 分支策略。

> ID：13965876
> 
> 赞同：0
> 
> 时间：2012-12-20T05:27:49.623
> 
> 标签：tfs, branching-and-merging, team-project

我有一个道德困境，在我的公司内，我们的整个产品套件都在主分支中，项目将从主（主干）分支分支出来。我有一个问题，即要交付的 sprint（长达 8 周）已被延迟，无法部署 2 周，但开发需要继续到下一个 sprint。

问题是，如果 sprint 1 存在需要修复的 bug，并且在现有分支上继续开发，那么 bug 修复和 sprint 2 的部分内容将混合在一起，使得发布 sprint 1 变得非常困难。

另一方面，如果我们从现有分支创建一个新分支，我们会丢失所有任务和错误，等等。

有没有办法让代码分支共享一个团队项目或者这很傻？

你会如何处理这种情况？有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:17:20.530

如果您在每个 sprint 中都分支到一个新的团队项目，那么您做错了。一个产品的所有分支都应该存在于同一个团队项目中。

冲刺应该与迭代而不是团队项目保持一致，这样您就可以自由地将任何工作项从一个冲刺重新分配到另一个冲刺，而不会出现问题。

如果错误很严重，则在 sprint 1 分支中修复它们并将它们合并到 sprint 2 中。这样您就可以在没有 sprint 2 代码的情况下发布它们。无论这是您最初的 sprint 1 版本的一部分还是将来的版本。

如果错误不是很严重，那么您可以在 sprint 2 分支中修复它并发布带有错误的 sprint 1。

没有理由 sprint 和分支需要 1 对 1 排列，如果你只每 3 个 sprint 发布一次，那么你也可以很容易地摆脱每 3 个 sprint 的分支。哎呀，如果您擅长发布管理并且确切地知道发布了哪些变更集，如果您需要修改 sprint 的结果，您甚至可以在发布几周后进行分支。

如果你想认真对待持续部署，那么你需要开始考虑拥有一个主干分支和特性分支，特性只有在它们完成后才会合并回主干。每个 sprint 可能有多个功能分支。或者查看功能切换，这意味着您可以部署新代码，但将其关闭，这样用户就不会注意到任何事情。

# sublimetext2 - Sublime Text 2 中打开控制台的快捷键不起作用

> ID：13965877
> 
> 赞同：50
> 
> 时间：2012-12-20T05:27:49.207
> 
> 标签：sublimetext2

我在 Windows 7 上使用 Sublime Text 2（版本 2.0.1），我还没有为这个软件安装任何插件。我可以使用菜单打开控制台，但我无法通过`ctrl`+```快捷方式打开控制台。如何解决这个问题？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-26T18:12:13.933

# 妙控键盘 - 美国英语 - Apple

标题本身会导致此答案出现在任何操作系统的 Google 搜索结果中。因此，即使详细信息询问有关 Windows 7，我也包括 Mac 快捷方式的图片，因为它会为一些人节省很多时间。
![在此处输入图像描述](../Images/1241c6491480daf42b48801427e2e4be.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-01-22T15:58:43.263

## 英国键盘

使用`Ctrl`+`'`打开控制台。

当按下`Ctrl`+时```，Sublime Text 不会收到任何东西。因此，不可能将此组合键用于任何事情。

当按下`Ctrl`+时`'`，Sublime Text 实际上会接收`Ctrl`+ ```。

## 调试键盘快捷键

要查看 Sublime Text 接收的内容，请`sublime.log_input(True)`在控制台输入。显然更改`True`为`False`将其关闭。

其他程序可以接收物理`Ctrl`+```组合，因此问题似乎出在 Sublime Text 中。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-02-09T09:07:13.053

如果一切都失败了，请尝试查看 > 显示控制台。

当我当时运行[conemu](https://code.google.com/p/conemu-maximus5/)时，它似乎抓住了 ctrl-` 并将其用于最小化\还原。所以我确实得到了一个控制台，而不是 Sublime Text ......

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-25T09:44:59.487

解决方案/解决方法：使用首选项选项，您可以更改键绑定。我已将我的更改为 ctrl+f1

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-21T22:13:44.907

芬兰语/瑞典语/德语/匈牙利语布局：

`ctrl`+`ö`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-23T09:42:53.317

这个问题很老，但我只是注意到在 Windows 7 上对我来说， ctrl + ' （撇号）打开控制台而不是 ctrl + ` （反引号），因为似乎到处都有记录。

我使用的是 sublime text 3 而不是 2。也是一个英国键盘。

希望这能让每个人的事情变得简单一点。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-09-30T15:15:37.740

在土耳其语键盘上，这可以通过按来实现

`Ctrl`+ `Alt Gr`+`,`

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-01-19T14:26:14.340

巴西葡萄牙语 (ABNT2) 快捷键是`Control`+ `Shift`+ `Alt Gr (right)` + ```。它非常复杂，值得将快捷方式重新分配给更直观的东西，例如`Control`+ `'`（Tab 键顶部的键）。

[![在此处输入图像描述](../Images/9a19ae16b7bcea42c7704b82a0beded8.png)](https://i.stack.imgur.com/m0aav.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-01-06T11:55:15.200

在法语 KB (Azerty) 中，请使用 'ctrl'+ 'ù' 组合

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-12-21T13:42:16.077

控制台的快捷方式是

`ctrl`+```

不是

`ctrl`+`'`

注意到区别了吗？

另见此处：[http ://sublimetext.info/docs/en/basic_concepts.html](http://sublimetext.info/docs/en/basic_concepts.html)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-04-24T19:08:56.790

对于 Windows 机器上的 Sublime Text 3 并使用 azerty 键盘，CTRL+！是适合我的捷径。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-04-07T11:54:22.220

西班牙语键盘（Sublime 2，Mac）

`ctrl`+`<`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-03-26T12:25:29.597

葡萄牙语键盘（Mac 中的 Sublime Text 3）：

CTRL + <

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-11-21T16:11:40.497

适用于英国键盘 `Ctrl`+`~`
适用于匈牙利语键盘 `Ctrl`+`ö`
适用于芬兰语键盘 `Ctrl`+`ö`
适用于瑞典语键盘 `Ctrl`+`ö`
适用于德语键盘 `Ctrl`+`ö`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-01-02T12:40:20.683

我在 Windows 8.1 系统上使用 Sublime Text 3 build 3156。我的键盘布局是我们的键盘样式。启用后`sublime.log_input(True)`，我发现在 sublime 文本控制台中按`Ctrl`+没有任何显示。```

最后，我只是使用`Ctrl`+`'`来调出控制台。转到`Preferences -> Key Bindings`，将以下内容添加到用户键绑定设置：

```
{ "keys": ["ctrl+'"], "command": "show_panel", "args": {"panel": "console", "toggle": true} }, 
```

然后一切正常。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-03-23T12:17:34.587

使用西班牙语布局（Qwerty），打开控制台的快捷键（用Sublime Text 3确认）为：

CTRL + ñ

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-02-26T10:34:04.217

挪威语键盘：

`Ctrl`+ `alt`+ `´`（这是和之间的`+`关键`Delete`）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-03-18T16:34:47.620

像我这样的用户在 AZERTY 和 Mac 上的最佳方式也是更改链接以打开它。

为此，请转到 Preferences > Key Bindings - Default 不要修改它是没用的，它会在您午餐 Sublime Text 时刷新。

有一个简单的 cmd+f 并寻找“控制台”一旦你得到它，复制过去并进入 Key Bindings - User 就在前面的 Key Bindings 下。

在那里，您可以根据需要对其进行修改。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-04T09:59:48.467

在sublime右上角的ubuntu中会有一个搜索栏去那里搜索控制台和booom控制台将在你面前没有任何快捷键:)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-02-01T12:03:23.827

丹麦语键盘（Mac）：

`Ctrl`+ `Shift`+ `´`（撇号？口音 aigu？ - 和之间的`+`关键`Backspace`）

# android - 重力和 layout_gravity 之间的确切区别是什么

> ID：13965883
> 
> 赞同：16
> 
> 时间：2012-12-20T05:29:03.633
> 
> 标签：android, xml, gravity, layout-gravity

> **可能重复：**
> [Android - 重力和 layout_gravity](https://stackoverflow.com/questions/3482742/android-gravity-and-layout-gravity)

我一直在研究android xml。我曾经`android:layout_gravity="center"`在特定位置对齐组件。

现在有一天，当我在**Activity 之类的 Dialog**上工作时，我遇到了`android:gravity="center"`. 我在那里发现的是，`gravity`用于将其`child`与特定位置对齐。

我会分享一个例子，它是什么，

## 机器人：重力=“中心”

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center_vertical"
    android:orientation="vertical" >
            <EditText
                android:id="@+id/enterNumberEdit"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_margin="10dp"
                android:hint="Enter No." >

                <requestFocus />
            </EditText>
            </LinearLayout> 
```

它使中心的孩子对齐`LinearLayout`。

## 安卓：layout_gravity="center"

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical"
    android:background="@drawable/dialog_background" >
</LinearLayout> 
```

它将自身对齐`LinearLayout`在中心。

**现在我的问题是：**

1.  如果我在这些假设中是正确的，那是否`gravity`适用于子组件和`layout_gravity`父组件。
2.  何时选择`gravity`结束`layout_gravity`。

到目前为止，我已经找到了很多关于 xml 的解释。我想听听更好的解释。让我知道，如果我在某个地方错了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T05:33:55.427

1.  是的，你的理解是正确的。任何`layout_`属性都向父视图提供指令。
2.  通常，如果视图占据了其父级的全部宽度/高度，那么您无需指定`layout_gravity`，您可能会发现它`gravity`更有用。如果您的视图没有占据其父视图的整个维度，您可能需要根据您想要的外观对齐它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T06:07:14.083

他们的名字应该可以帮助你：
`android:gravity`设置其使用的内容的重力`View`。设置或在其父
`android:layout_gravity`级中的重力。`View``Layout`

欲了解更多信息，请访问[此网站](http://sandipchitale.blogspot.in/2010/05/linearlayout-gravity-and-layoutgravity.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T05:40:09.090

android:gravity 设置其使用的 View 内容的重力。

android:layout_gravity 设置视图或布局在其父级中的重力。

# objective-c - 集成了 BUMP API 的 iOS 项目中的 SIGPIPE 异常

> ID：13965890
> 
> 赞同：7
> 
> 时间：2012-12-20T05:29:30.293
> 
> 标签：objective-c, ios6, bump, sigpipe

我`SIGPIPE`在 Xcode 项目中遇到错误。从一周前开始显示此错误。如果我评论了这个方法调用：`[self configureBump];`一切正常。我在我的项目中集成了[BUMP API 。](http://bu.mp/company/api)这个 API 一直工作到一周前没有任何问题。我不确定这个错误的原因。谁能帮我解决这个错误？有的朋友也报这个错误。

Xcode 版本：4.5 iOS 版本：iOS 6.0/iOS 5.0

请参阅下面的堆栈跟踪：

```
* thread #1: tid = 0x1c03, 0x95a887d2 libsystem_kernel.dylib`mach_msg_trap + 10, stop reason = signal SIGPIPE
    frame #0: 0x95a887d2 libsystem_kernel.dylib`mach_msg_trap + 10
    frame #1: 0x95a87cb0 libsystem_kernel.dylib`mach_msg + 68
    frame #2: 0x029ef13a CoreFoundation`__CFRunLoopServiceMachPort + 186
    frame #3: 0x02952580 CoreFoundation`__CFRunLoopRun + 1312
    frame #4: 0x02951db4 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #5: 0x02951ccb CoreFoundation`CFRunLoopRunInMode + 123
    frame #6: 0x03093879 GraphicsServices`GSEventRunModal + 207
    frame #7: 0x0309393e GraphicsServices`GSEventRun + 114
    frame #8: 0x017a0a9b UIKit`UIApplicationMain + 1175
    frame #9: 0x00002dd7 iCard`main + 199 at main.m:17
    frame #10: 0x00002185 iCard`start + 53 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-08T14:30:47.247

有可能`SIGPIPE`在该库内发生套接字超时或没有/丢失的连接。他们身边可能有一些服务器故障或其他什么。

您可以通过忽略 SIGPIPE 来解决：

```
signal(SIGPIPE, SIG_IGN); 
```

或者

```
signal(SIGPIPE, SO_NOSIGPIPE); 
```

检查[此链接](http://www.badrit.com/blog/2010/11/30/ignore-sigpipe-signal-on-ios)以获取详细信息。

另一方面，您可以通过设置处理程序函数来进一步调试

`signal(SIGPIPE, yourHandlerFunc);`

并检查其中的 sockets/ivars/etc 的状态。

# jquery - jQuery在隐藏的父级中显示子级，设置显示属性不正确

> ID：13965891
> 
> 赞同：2
> 
> 时间：2012-12-20T05:29:30.203
> 
> 标签：jquery, css, dom, show-hide

请参阅以下 jsfiddle 进行演示：

[http://jsfiddle.net/Drb8s/](http://jsfiddle.net/Drb8s/)

当您在隐藏父级中的元素上使用 jQuery show() 时，似乎会出现问题。（然后随后显示父母）。如果子元素最初是 display: table，当您调用 show() 时，它会将其切换回 display: 块，这是不正确的。

我只能使用小提琴中的控制台来复制它，但是在我的应用程序中，我通过代码遇到了这个问题。

HTML：

```
<div class="outer">
    <div class="inner">Inner</div>
</div> 
```

CSS：

```
.outer {
    display: none;
}
.inner {
    display: table;
}​ 
```

JS：

```
$('.inner').hide();
// $('.inner').show();​​​  // this works in jsfiddle (but not in my app, or run through console) 
```

**编辑：**作为我正在使用的解决方法，`.css('display', 'table')`但我只是想知道是否有人知道这个的实际原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:38:02.950

`.show`并且`.hide`在他们的显示/隐藏方法上是残酷的；如果您想要特定的非传统样式，则不能使用它们：

```
$(".inner").data('oldstyle', $(".inner").css('display')).css('display', 'none');
...
$(".inner").css('display', $(".inner").data('oldstyle')); 
```

# excel - 如何在 Excel 中编辑图表的标签？

> ID：13965894
> 
> 赞同：2
> 
> 时间：2012-12-20T05:30:06.007
> 
> 标签：excel, charts

如下图所示，横轴由Excel自动生成，标注为1,2,...,n。我想做的是将这些标签更改为案例A，案例B，...等形式。

我试图编辑图表，但都失败了。

![在此处输入图像描述](../Images/7411b981f2a0ba856e7434810a9f3bd3.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T07:42:48.063

有两种方法可以设置图表的 x 轴类别标签。

**一种方法**是将标签放入工作表的范围内，然后将它们包含在图表的数据源中。这通常在您创建图表时完成。如果在图表数据上方的行中输入了标签，Excel 会将它们识别为 x 轴标签。下图显示了设置示例。

![在此处输入图像描述](../Images/8de1f4bfadff60c81cb9107753a90829.png)

然后，您将选择带有标签和数据的整个范围——在这种情况下，单元格 C8:E11——并插入图表，结果如图所示。此方法适用于所有版本的 Excel。

![在此处输入图像描述](../Images/78892270aa2a8bb3bb4afccb2d3e4f7a.png)

**第二种方法**涉及在创建图表后编辑图表的设置。一步一步，这是所涉及的（这可能适用于旧版本，但我在 Excel 2010 中做到了）。

1.  选择您的图表，然后选择功能区上的图表工具/设计选项。
2.  然后从选项中选择选择数据（仍在功能区上）。
3.  图表数据范围显示在出现的对话框的顶部，左下方的框用于更改数据系列的图表设置，右下方的框用于更改 x 轴标签。后一个框将列出您要更改的“1”、“2”等数字。
4.  点击右侧框（水平类别（轴）标签）的编辑按钮，系统将提示您输入轴标签范围。
5.  但是，无需选择范围，只需输入您想在 x 轴上看到的标签，用逗号分隔，如下所示：

![在此处输入图像描述](../Images/8300f15c6b4885889dcd56be54d01e5c.png)

6.  按 OK，然后在 Select Data Source 对话框再次出现时再次按，就完成了。

![在此处输入图像描述](../Images/b27462048977e01588f4f51bb0cff5a3.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T05:44:01.410

我假设您的图表由 1 个或多个其他工作表中的数据支持？

转到这些工作表并确定数据的哪一部分生成 x 轴。在那里进行更改（或添加），它应该立即反映在图表中。

对您的问题进行更多解释会有所帮助。

# jquery - 无法使用匹配（）；在 jquery 中检查字符串的内容

> ID：13965895
> 
> 赞同：2
> 
> 时间：2012-12-20T05:30:08.393
> 
> 标签：jquery, match, traversal

我有一个链接列表，我希望 jquery 浏览这些链接并找到具有 href 属性且值以字符串“.pdf”结尾的链接。

如果特定链接上 src 属性的值以“.pdf”结尾，我希望 jquery 在该特定链接之后插入一个图像图标（pdf）图标。这有助于用户在视觉上区分常规链接和 pdf 文件链接。

这是标记

```
<ul class="navlist" id="navlinks">
    <li><a href="someurl.html">Link #1</a></li>
    <li><a name="#anchor1">Named Anchor Link</a></li>
    <li><a href="someurl.html">Link #2</a></li>
    <li><a href="someurl.pdf">Link #3</a></li>
    <li><a href="someurl.html">Link #4</a></li>
    <li><a href="someurl.html">Link #5</a></li>
    <li><a href="someurl.pdf">Link #6</a></li>
    <li><a href="someurl.html">Link #7</a></li>
    <li><a href="mailto:joe@joe.com">Email Link</a></li>
    <li><a href="someurl.pdf">Link #6</a></li>
    <li><a href="someurl.pdf">Link #6</a></li>
    <li><a href="someurl.pdf">Link #6</a></li>
</ul> 
```

这是我写的js

```
var links = $('#navlinks li a');

links.each(function() {
    var hrefVal = $(this).attr("href");
    if (hrefVal.match(/.pdf$/)) {
        //We can now append the icon to this particular link.
    }
}); 
```

我在控制台上出现错误：

**未捕获的类型错误：无法调用未定义的方法“匹配”**

我不明白为什么会这样。我找到了另一种解决方案来实现这一点：

我找到了另一种用更少的代码行来实现这一点的方法

```
$('#navlinks li a[href$=".pdf"]').after('<img src="images/small_pdf_icon.gif" alt="PDF Icon" title="PDF File download" />'); 
```

我只需要帮助弄清楚为什么 match 方法不起作用？任何帮助是极大的赞赏。**多谢你们 ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:34:53.117

你有一个`a`没有`href`属性的，所以`.attr`返回`undefined`。更好的选择器是`"#navlinks li a[href]"`，它只选择那些`a`具有`href`属性的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:49:33.707

一个较短的班轮是这样的：

```
$('li a[href$=".pdf"]').after("<img src='small_pdf_icon.gif' align='absbottom' />"); 
```

# javascript - 为什么我的 parseInt 函数没有将我的字符串转换为整数？

> ID：13965896
> 
> 赞同：3
> 
> 时间：2012-12-20T05:30:13.673
> 
> 标签：javascript, string, integer, addition, parseint

我在这里出了什么问题？我正在尝试将字符串转换为整数以供另外使用。

我有一个类的图像`portfolio`和一个 src`images/portfolio-images/gbn1.jpg`

第一个警报说 is 的值`imageInt`，`1`但第二个警报说当我尝试获取时的值`newImg`is 。`gbn11.jpg``gbn2.jpg`

我在下面发布我的代码：

```
var mainImg = $('.active-more').closest(".container").find("img.portfolio:first").attr("src");
var nofilename = mainImg.replace("images/portfolio-images/",""); 
nofilename = nofilename.replace(".jpg",""); 
var imageString = nofilename.replace(/[A-Za-z$-]/g, "");
var imageInt = parseInt(imageString, 10);   
var imageProject = nofilename.replace(/\d+/g, '');  
alert(imageInt);
var newImg= imageProject + imageInt + 1 + ".jpg";
alert(newImg); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T05:34:22.980

由于`+`- 添加大括号以修复的顺序，您正在执行字符串连接：

```
 var newImg= imageProject + (imageInt + 1) + ".jpg"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T05:35:14.977

尝试这个 ：

```
var newImg= imageProject + (imageInt + 1) + ".jpg"; 
```

+ 运算符用于添加数字和连接字符串。如果左边的操作数是一个字符串，那么右边的操作数被转换为一个字符串。

在上面，通过将`imageInt + 1`括号括起来，我们确保在连接为字符串之前将其评估为整数。

见小提琴：http: [//jsfiddle.net/VQG5j](http://jsfiddle.net/VQG5j)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:34:01.823

您尝试单独添加内容并将其连接到图像名称，`parseInt`也可以用于添加。

尝试下面给出的代码结构：

```
var mainImg = $('.active-more').closest(".container").find("img.portfolio:first").attr("src");
var nofilename = mainImg.replace("images/portfolio-images/",""); 
nofilename = nofilename.replace(".jpg",""); 
var imageString = nofilename.replace(/[A-Za-z$-]/g, "");
var imageInt = parseInt(imageString, 10);   
var imageProject = nofilename.replace(/\d+/g, '');  
alert(imageInt);
imgIntNew = imageInt + parseInt(1);
alert(imageIntNew);
var newImg= imageProject + imgIntNew + ".jpg";
alert(newImg); 
```

# ios - 将 NSDictionaries 的 NSArray 发布到 Ruby Web 服务

> ID：13965903
> 
> 赞同：0
> 
> 时间：2012-12-20T05:30:43.317
> 
> 标签：ios, web-services, nsjsonserialization

我一直在尝试为包含其他对象`POST`的`REST`服务 a提供. 我一直在为其他服务执行此操作，但奇怪的是它们都没有包含of ，因此对于其他情况，创建所需的 s 非常简单，但是对于这个新服务，我认为这只是添加of 的问题但显然不是。这就是我创建原始对象以准备发送它的方式：`JSON object``NSArray``NSDictionaries``NSArray``NSDictionaries``JSON``NSArray``NSDictionaries`

```
myDict = [NSDictionary dictionaryWithObjectsAndKeys:@"NFS", @"ticket[serie]",@"123",@"ticket[someID]",[NSArray arrayWithObject:[NSDictionary dictionaryWithObjectsAndKeys:@"99SKU1", @"product_id",@"1",@"quantity",nil]],@"lineItems",nil]; 
```

然后，我将该字典转换为 NSData 对象，以准备将其发送过来`URLConnection`：

```
if ([NSJSONSerialization isValidJSONObject:myDict])
{
    myData = [NSJSONSerialization dataWithJSONObject:myDict options:0 error:&theErrorIfAny];
    // Send to webservice (myData)
} 
```

我无权访问 Ruby 代码，但我可以访问服务器吐出到文件的日志文件，这就是我得到的：

```
{"ticket[serie]"=>"NFS"
    "ticket[someID]"=>"123"
    "lineItems"=>[{"product_id"=>"99SKU1","quantity"=>"1"}]
    "ticket"=>{}} 
```

除了那条额外的行之外，一切似乎都很好：`"ticket"=>{}`就像我用一个额外的空字典填充请求一样。我已经通过删除 myDict 中除一项以外的所有项目，甚至删除其中的嵌套`NSArray`with`NSDictionaries`来尝试此请求，并且我仍然`"ticket"=>{}`在请求末尾看到该行。

顺便说一句，网络服务是在 Ruby 中完成的，我无法直接访问它。我可以对这样做的人发表评论，但他们只是耸耸肩并争辩说，如果我使用 curl -d 从终端进行相同的调用...我将从服务器获得正确的响应。所以也许是`JSONSerialization`对象或我创建呼叫的方式？：

```
+ (NSURLConnection *)postRequest:(NSData *)dataRequest toServerURL:(NSString *)serverURL onPort:(int)port withTimeOut:(NSTimeInterval)timeOut charSet:(char *)charset withDelegate:(id<NSURLConnectionDelegate>)myDelegate toServiceNamed:(NSString *)serviceName {

    NSString *postDataLength = [NSString stringWithFormat:@"%d", [dataRequest length]];
    DebugLog(@"bytes to send:%@", postDataLength);
    NSMutableURLRequest *postRequest;

    if (port == 0) 
    {
        postRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@/%@", serverURL, serviceName]] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:timeOut];
    } 
    else
    {
        postRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@:%d/%@", serverURL, port, serviceName]] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:timeOut];
    }
    [postRequest setHTTPMethod:@"POST"];
    [postRequest setValue:postDataLength forHTTPHeaderField:@"Content-Length"];

    if (charset == nil || strcmp(charset, "")) 
    {
        charset = "utf-8";
    }
    [postRequest setValue:[NSString stringWithFormat:@"application/json; charset=%s", charset] forHTTPHeaderField:@"Content-Type"];
    [postRequest setHTTPBody:dataRequest];

    return [[NSURLConnection alloc] initWithRequest:postRequest delegate:myDelegate];
} 
```

任何评论或指向一些经过验证的知识源都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:19:11.687

显然，那条额外的行 (ticket=>{}) 是 Ruby 生成的输出，它显示了它作为ticket key 的字典接收到的内容。因此，我不得不将请求更改为对象字典，其中该字典只有两个键，一个用于票证，另一个用于 lineItems。这么说吧，这就像 Ruby 一开始就期望这个结构一样。

澄清一下，这是请求的预期方式（JSON 格式）：

```
{
    ticket:{serie:NFS, someID:123},
    lineItems:[{product_id:99SKU1, quantity:1}]
} 
```

# ios - 如何在两个不同的数组中获得响应？

> ID：13965908
> 
> 赞同：0
> 
> 时间：2012-12-20T05:30:53.257
> 
> 标签：ios, xml, parsing

我正在做一个天气预报应用程序。所以我要获得雅虎服务API。以下代码是

```
<yweather:forecast day="Thu" date="20 Dec 2012" low="70" high="89" text="Partly Cloudy" code="30"/>
<yweather:forecast day="Fri" date="21 Dec 2012" low="71" high="90" text="Partly Cloudy" code="30"/> 
```

我需要在两个不同的数组中获取这两个标签属性值...

第一个是一个数组，第二个是另一个数组

我该怎么做才能帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:03:15.517

试试这个：

```
- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"forecast"])
    {
        if(firstarray.count == 0)
        {
            firstarray = [attributeDict allValues];
        }
        else
        {
            secondarray = [attributeDict allValues]
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:04:42.203

您可以使用事件驱动的解析器[NSXMLParser](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。

而且，这里是如何在解析时[处理元素。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-BCIJFGJI)`attributes`委托方法的字典参数`parser:didStartElement:namespaceURI:qualifiedName:attributes:`将为您提供可以根据需要处理的元素属性，即。添加到数组中。

# c# - 超时不适用于 WebRequest

> ID：13965911
> 
> 赞同：2
> 
> 时间：2012-12-20T05:31:30.520
> 
> 标签：c#, .net, webclient

**如果我使用以下代码：**

```
using System;
using System.Net;

namespace ConsoleApplication1
{
    public class TimeoutWebClient : WebClient
    {
        protected override WebRequest GetWebRequest(Uri address)
        {
            WebRequest webRequest = base.GetWebRequest(address);
            webRequest.Timeout = 600000;
            return webRequest;
        }
    }

    class Program
    {
        static void Main()
        {
            WebClient webClient = new TimeoutWebClient();
            webClient.Headers.Add("Referer", @"http://www.finam.ru/analysis/export/default.asp");
            string csv =
                webClient.DownloadString(
                    "http://195.128.78.52/RIZ1.csv?d=d&market=17&em=75118&p=1&df=23&mf=8&yf=2011&dt=23&mt=8&yt=2011&f=RIZ1&e=.csv&datf=11&cn=RIZ1&dtf=1&tmf=1&MSOR=0&sep=3&sep2=1&at=1");
            Console.WriteLine(csv);
        }
    }
} 
```

**然后如果服务器很长时间没有应答，我会得到一个异常**

```
System.Net.WebException was unhandled
  HResult=-2146233079
  Message=The underlying connection was closed: An unexpected error occurred on a receive.
  Source=System
  StackTrace:
       at System.Net.WebClient.DownloadDataInternal(Uri address, WebRequest& request)
       at System.Net.WebClient.DownloadString(Uri address)
       at System.Net.WebClient.DownloadString(String address)
       at ConsoleApplication1.Program.Main() in c:\bot\test\webrequest_timeout\ConsoleApplication1\ConsoleApplication1\Program.cs:line 22
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.IO.IOException
       HResult=-2146232800
       Message=Unable to read data from the transport connection: Удаленный хост принудительно разорвал существующее подключение.
       Source=System
       StackTrace:
            at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)
       InnerException: System.Net.Sockets.SocketException
            HResult=-2147467259
            Message=Удаленный хост принудительно разорвал существующее подключение
            Source=System
            ErrorCode=10054
            NativeErrorCode=10054
            StackTrace:
                 at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
                 at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
            InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:07:00.797

我的理解是这不是由于超时

错误代码表示 **远程主机强行关闭了现有连接**

[http://ipswitchft.force.com/kb/articles/FAQ/Why-do-clients-receive-Error-10054-writing-to-web-client-1307565967668](http://ipswitchft.force.com/kb/articles/FAQ/Why-do-clients-receive-Error-10054-writing-to-web-client-1307565967668)

[http://support.microsoft.com/kb/2668751](http://support.microsoft.com/kb/2668751)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:44:33.350

看起来它在阅读响应时超时？然后，您还想通过使用派生类 HttpWebRequest 的 ReadWriteTimeout 属性来设置读/写超时。

请参阅[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.readwritetimeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.readwritetimeout.aspx)

# extjs4.1 - 如何在extjs 4（mvc）中过滤静态treeStore

> ID：13965913
> 
> 赞同：2
> 
> 时间：2012-12-20T05:31:37.103
> 
> 标签：extjs4.1

我有一个静态树存储，我想过滤我的树。为此，我添加了一个 tbar。如何从这个 tbar 的文本字段中过滤我的树？

这是我的静态数据商店

```
Ext.define('TestApplication.store.TreeStoree', {
    extend: 'Ext.data.TreeStore',
    root: {
        expanded: false, 
        children: [{
            text: "Project",
            expanded: false,
            children:[
                { id: '1', text: "Transaction", leaf: true },
                { id: '2', text: "Query", leaf: true },
                { id: '3', text: "Report", leaf: true },
                { id: '4', text: "Initialization", leaf: true },
                { id: '5', text: "Sequence", leaf: true },
                { id: '6', text: "Batch", leaf: true }
            ]
        }, {
            text: "Records Display",
            expanded: false, 
            children: [
                { id: '7', text: "Previous", leaf: true },
                { id: '8', text: "Running", leaf: true }
            ]
        }, {
            text: "Photo",
            expanded: false, 
            children: [
                { id: '9', text: "Specimen", leaf: true }
            ]
        }, {
            text: "Signature",
            expanded: false, 
            children: [
                { id: '10', text: "Carbon Copy", leaf: true }
            ]
        }, {
            text: "D N A",
            expanded: false, 
            children: [
                { id: '11', text: "Plastrain", leaf: true },
                { id: '12', text: "Generic", leaf: true }
            ]
        }]
    }
}); 
```

在本节中，我添加了一个带有文本字段的 tbar 并希望从中进行搜索

```
Ext.define('TestApplication.view.display.TreeView' ,{
    extend: 'Ext.tree.Panel',
    alias : 'widget.treeView',
    rootVisible: false,
    useArrows: true,
    border:true,
    initComponent: function() {
        var me = this;
        me.tbar = [
        {
            xtype: 'treefilter', 
            emptyText: 'Search', 
            store: 'TreeStoree', 
            flex: 1 
        }
        ];
        me.callParent(arguments);
    }
}); 
```

我的自定义 treeFilter

```
Ext.define('TestApplication.view.display.CustomFilter', {
    extend: 'Ext.form.field.Trigger',
    alias: 'widget.customfilter',
    trigger1Cls: Ext.baseCSSPrefix + 'form-clear-trigger',
    trigger2Cls: Ext.baseCSSPrefix + 'form-search-trigger',

    initComponent: function() {
        var me = this;    
        me.callParent(arguments);
        me.on('change', function(){
            me.onFilterStore();
        });      

    },
    onFilterStore : function(){
                // what will be my codes here..........???????????????????
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:00:56.050

一方面，TreeStore 没有过滤器操作，正如您在[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.TreeStore)中看到的那样。

在任何情况下，正确使用[trigger](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Trigger)是定义每个触发器被单击时要执行的操作。对于每一个`triggerXCls`，定义一个对应`onTriggerXClick`的来处理要做什么。[在这里](http://jsfiddle.net/Litote0707/nGQLv/)看到一个小小提琴。

```
Ext.define('TestApplication.view.display.CustomFilter', {
    extend: 'Ext.form.field.Trigger',
    alias: 'widget.customfilter',
    trigger1Cls: Ext.baseCSSPrefix + 'form-clear-trigger',
    trigger2Cls: Ext.baseCSSPrefix + 'form-search-trigger',

    initComponent: function() {
        var me = this;
        me.callParent(arguments);
        me.on({
            change: me.onFilterStore,
            scope: me,
         });

    },
    onTriggerClick: function() {
        var me = this;
        console.log('You clicked my clear trigger!');
        me.setValue('');
    },
    onTrigger2Click: function() {
         var me = this;
         console.log('You clicked my search trigger!');
    },
    onFilterStore: function(){
        console.log('change is-a happening');
    }

}); 
```

我能想到的最好的办法是在启动搜索时，通过树的根节点级联并填充一个全新的根节点对象，其中包含与搜索文本匹配的节点。然后在treePanel 的存储上设置RootNode。清除搜索需要恢复原始根节点。

更好的是，我会通过根节点级联并更改与搜索不匹配的项目类别，使它们显示为灰色。这将使与搜索“pop”匹配的节点。

**编辑**：更好的是，这里有一些与树过滤有关的[答案。](https://stackoverflow.com/a/7370898/640030)试一试这些解决方案。

# bdd - Jbehave的差异化特征

> ID：13965915
> 
> 赞同：1
> 
> 时间：2012-12-20T05:32:14.670
> 
> 标签：bdd

我刚开始了解jbehave。谁能告诉我 jbehave 与 Cucumber、FiTNesse、Concordion 等其他 BDD 工具的区别特征是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T21:22:33.970

[JBehave](http://www.jbehave.org)在操作和语法上与 Cucumber 最相似。JBehave 是最初的 BDD 工具，用本机 Java 编写。Cucumber 受到 JBehave 的启发并用 Ruby 编写。

[Cucumber-JVM](https://github.com/cucumber/cucumber-jvm)是 Cucumber 的原生 Java 实现，它使用注释（如 JBehave）和正则表达式来识别参数（如 Ruby Cucumber）实现“步骤定义”。JBehave 和 Cucumber 都使用基于文本的功能文件。JBehave 和 Cucumber 之间确实没有显着差异，只是 Cucumber 比 JBehave 更广泛地采用（这要归功于它的跨平台特性和开发人员的努力）。

[FitNesse](http://fitnesse.org/)使用具有特殊语法的 Wiki 来定义测试规范和 Java“夹具”来解释它们。它既笨拙又丑陋，但已经存在了一段时间，所以仍然有一些用户。

[Concordion](http://www.concordion.org)使用 HTML 来定义测试规范，并使用 Java (JUnit) 夹具来运行它们。FitNesse 和 Concordion 之间的主要区别（除了 FitNesse 使用 Wiki）是 FitNesse 固定装置是可重复使用的，而 Concordion 是针对特定场景定制的。这倾向于使 Concordion 固定装置更简单，并减少测试规范中的重复和不相关的值。

假设您正在使用 Java，我会推荐 Cucumber（如果受众只是开发人员）或 Concordion（如果规范的受众也可能包括非开发人员）。Concordion 规范采用 HTML 格式，这意味着它们可以超链接在一起，并作为格式良好的文档进行双重处理。

# d3.js - nvD3 的新手 - 如何让我的 unix 时间戳在 x 轴上显示为日期？

> ID：13965916
> 
> 赞同：8
> 
> 时间：2012-12-20T05:32:15.813
> 
> 标签：d3.js, nvd3.js

适当的披露 - 我在 javascript 方面很糟糕，但正在努力学习！

我有一个数组，其中包含一些类似的条目：

[1349013600] => 232

键是 unix 时间戳，值是当天的销售额。我目前正在将这些绘制在多条形图上，效果很好。

问题是我的 x 轴，目前定义如下：

```
chart.xAxis
.tickFormat(d3.format(',f')); 
```

它将 unix 时间戳输出为针对 x 轴标签和悬停工具提示的直接 int。我想尝试让它输出为 DMY 或类似的人类可读的日期指示器。

我发现的最接近的是这段代码：

```
chart.xAxis.tickFormat(function(d) {
       var dx = testdata[0].values[d] && testdata[0].values[d].x || 0;
   return d3.time.format('%x')(new Date(dx))
 }); 
```

但是我很难理解它在做什么并且无法在我的特定图表上实现。当前代码如下所示：

```
nv.addGraph(function() {
var chart = nv.models.multiBarChart()
            .stacked(true)

chart.xAxis
    .tickFormat(d3.format(',f'));

chart.yAxis
    .tickFormat(function(d) { return '$' + d3.format(',f')(d) });

d3.select('#chart1 svg')
    .datum(test_data2)
  .transition().duration(500).call(chart);

nv.utils.windowResize(chart.update);

return chart;
}); 
```

有人能解释一下如何让它发挥作用吗？更重要的是——为什么？感谢任何指导！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-22T22:55:40.723

我一打开赏金就解决了问题（d'oh！）

这对我有用

`.tickFormat(function(d){return d3.time.format('%d-%b')(new Date(d));})`

诀窍是在创建此轴后重新格式化 nvd3 的数据

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T05:37:57.423

JavaScript 时间戳是毫秒，所以你应该在使用它之前将 Unix 时间戳乘以 1000。

# validation - Spring mvc：对象作为另一个类验证 JSR 300 的属性

> ID：13965917
> 
> 赞同：0
> 
> 时间：2012-12-20T05:32:21.383
> 
> 标签：validation, spring-mvc

我有一张桌子`employee`，它的属性是`department`和。`address`我想`address`用 JSR 300 验证类的属性。但是我在验证地址和部门类的属性时遇到了问题。到目前为止，只`Employee`验证了类的属性。我错过了什么吗？

```
public class Employee {

    private Integer id;
    @NotEmpty(message = "First Name must not be blank.")
    @Size(min = 1, max = 50)
    private String firstName;

    @NotEmpty(message = "Last Name must not be blank.")
    @Size(min = 1, max = 50)
    private String lastName;

    @Digits(message = "Salary field must not be blank.", integer=32767, fraction = 2)
    @NumberFormat(style = Style.NUMBER)
    @NotNull(message = "Salary field must not be blank.")
    private Double salary;

    @Digits(message = "Select department", integer=100, fraction = 0)
    @NumberFormat(style = Style.NUMBER)
    @NotNull(message = "Select department")
    private Integer dept_id;

    @NotEmpty(message = "Select gender")
    private String gender;
    private boolean employeeStatus;
    private Address address;
    private Department department;
}

public class Address {

    private Integer id;

    @NotEmpty(message = "Country must not be blank.")
    @Size(min = 1, max = 50)
    private String country;

    @NotEmpty(message = "City must not be blank.")
    @Size(min = 1, max = 50)
    private String city;

    @NotEmpty(message = "Street must not be blank.")
    @Size(min = 1, max = 50)
    private String street;
    private Integer emp_id;

    }

public class Department {

    private String name;
    private Integer id;

} 
```

**jsp**

```
<form:form commandName="employee" action="addEmployee.htm"
            name="employeeForm">
            <form:errors path="*" cssClass="errorblock" element="div" />
            <fieldset>
                <form:label path="firstName">First Name</form:label>
                <form:input path="firstName" />
                <form:errors path="firstName" cssClass="error" />
                <br>

                <form:label path="lastName">Last Name</form:label>
                <form:input path="lastName" />
                <form:errors path="lastName" cssClass="error" />
                <br>

                <form:label path="address.country">Country</form:label>
                <form:input path="address.country" />
                <form:errors path="address.country" cssClass="error" />
                <br>

                <form:label path="address.city">City</form:label>
                <form:input path="address.city" />
                <form:errors path="address.city" cssClass="error" />
                <br>

                <form:label path="address.street">Street</form:label>
                <form:input path="address.street" />
                <form:errors path="address.street" cssClass="error" />
                <br>

                <form:label path="salary">Salary</form:label>
                <form:input path="salary" />
                <form:errors path="salary" cssClass="error" />
                <br>

                <form:label path="gender">Gender</form:label>
                <form:radiobutton path="gender" value="Male" />
                Male
                <form:radiobutton path="gender" value="Female" />
                Female
                <form:errors path="gender" cssClass="error" />

                <form:label path="dept_id">Department</form:label>

                <form:select path="dept_id">
                    <form:option value="" label="Please Select"></form:option>
                    <form:options items="${departmentList}" itemValue="id"
                        itemLabel="name" />
                </form:select>
                <form:errors path="dept_id" cssClass="error" />

                <label></label><input type="submit" value="Add Employee"><br>
            </fieldset>

        </form:form> 
```

此外，当我在薪水字段中尝试随机字符串时，我得到了一个例外。

```
Failed to convert property value of type java.lang.String to required type java.lang.Double for property salary; nested exception is java.lang.NumberFormatException: 
```

如何摆脱这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:54:07.167

尝试`@Valid`为约束组合添加属性。这样，`Address`将评估所有约束：

```
@Valid
 private Address address; 
```

至于格式化异常，我不清楚您是如何或在哪里收到该错误的，但除了验证控制器中的模型（使用`@Valid`控制器方法参数之前的属性）之外，我建议使用`CURRENCY`金钱（薪水）：

```
@NumberFormat(style=Style.CURRENCY) 
```

# iphone - IOS GPS 缓存，没有互联网的 GPS

> ID：13965920
> 
> 赞同：2
> 
> 时间：2012-12-20T05:32:32.977
> 
> 标签：iphone, objective-c, ios6

我正在尝试在 ios 中实现基于 GPS 的应用程序，它应该在离线模式下工作，这意味着如果互联网连接不可用，我们的 GPS 应该可以显示路线或地图。

我使用过 Map 但是，但无法获得它。

我该怎么做？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:55:36.707

定位服务不需要互联网连接。只要可用，准确性就会提高，但它们也可以离线工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T07:38:36.923

只是想补充一下——如果您在没有蜂窝网络（即 GSM 数据连接）的 Apple 设备上进行测试，那么它可能没有专用的 GPS 芯片组。

我发现iOS iPad 7th Gen 关闭wifi 时，位置更新（即位置服务）也将停止更新。

苹果参考： [https ://discussions.apple.com/thread/250902909](https://discussions.apple.com/thread/250902909)

# ios - ios-检查当前时间是否在两次之间

> ID：13965921
> 
> 赞同：6
> 
> 时间：2012-12-20T05:32:36.540
> 
> 标签：ios, nsdate

我想检查当前时间是否在两个时间之间。

例如，我想检查当前时间是在今天早上 10AM 到 12PM 之间还是明天早上 10AM 到 12PM 之间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T05:36:55.913

尝试这个

```
NSDateComponents *components = [[NSCalendar currentCalendar] components:NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit fromDate:[NSDate date]];
NSInteger currentHour = [components hour];
NSInteger currentMinute = [components minute];
NSInteger currentSecond = [components second];

if (currentHour < 7 || (currentHour > 21 || currentHour == 21 && (currentMinute > 0 || currentSecond > 0))) {
    // Do Something
} 
```

用你的时间替换 7, 21

我从[如何比较时间中得到这个](https://stackoverflow.com/questions/5388551/how-to-compare-time)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-03-13T10:04:13.320

此解决方案适用于 swift 4

从系统中获取当前时间，然后检查它是否存在该范围。在这种情况下，时间范围是上午 10:00 到下午 6:00

* * *

```
func CheckTimeExist()->Bool{

var timeExist:Bool
let calendar = Calendar.current
let startTimeComponent = DateComponents(calendar: calendar, hour:10)
let endTimeComponent   = DateComponents(calendar: calendar, hour: 18, minute: 00)

let now = Date()
let startOfToday = calendar.startOfDay(for: now)
let startTime    = calendar.date(byAdding: startTimeComponent, to: 
startOfToday)!
let endTime      = calendar.date(byAdding: endTimeComponent, to: 
startOfToday)!

 if startTime <= now && now <= endTime {
    print("between 10 AM and 6:00 PM")
    timeExist = true
 } else {
    print("not between 10 AM and 6:00 PM")
    timeExist = false
 }
   return timeExist
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T11:13:58.760

这就是为我做的：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSCalendarUnitHour | NSCalendarUnitMinute) fromDate:[NSDate date]];
NSInteger currentHour = [components hour];
NSInteger currentMinutes = [components minute];
NSInteger currentSeconds = [components second];
NSInteger day = [[NSDate date] dayOfTheWeek];

if (((currentHour > openHours) && (currentHour < closeHours)) ||
    ((currentHour == openHours) && (currentMinutes >= openMinutes)) ||
    ((currentHour == closeHours)&&(currentMinutes<=closeMinutes))) {

    //..do something

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-27T00:03:10.077

在斯威夫特：

```
let componets = Calendar.current.dateComponents([.hour, .minute, .second], from: Date())
let currentHour = componets.hour
let currentMinute = componets.minute
let currentSecond = componets.second

if currentHour! < 7 || currentHour! > 21 {
    print ("do something")
} else {
    print ("do nothing")
} 
```

# mysql - 在 mysql 中查找子报告员工

> ID：13965922
> 
> 赞同：3
> 
> 时间：2012-12-20T05:32:44.373
> 
> 标签：mysql, sql

```
employee id reporting_head_id
----------------------------------
1           0
2           1
3           1
4           2
5           2   
6           3
7           4
8           5
9           6 
```

假设我希望所有员工在`emp_id=1`.

所以我可以从

```
select * from employee where reporting_head_id=1 
```

它将返回 2 和 3。

但我也想搜索那些向他们汇报的**员工**`2`等等`3`。以及向 2 和 3 报告的员工，假设那些报告员工也有一些员工报告，所以我也想要他们的信息等等。

我想要给定的所有员工`reporting_head_id` **以及**向.`employees reporting``given id`

现在如果我搜索下属的员工`reporting_head_id 1`，`employees 2,3,4,5,6,7,8,9`应该会被**退回**。

请你能给我解决方案。我是新手`SQL`。

我试过这个查询

```
SELECT * 
FROM employee 
WHERE reporting_head_id = 1 
   or reporting_head_id = any (select id from employee where reporting_head_id = 1) 
```

所以它返回 2,3,4,5,6

但是如何找到向 4、5、6 等报告的人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:46:23.117

这将为递归函数提供一些想法。一旦我们有了这个想法，我们就可以让代码变得更简单。

```
$qry = "SELECT * FROM employee WHERE reporting_head_id=1";
$rec = mysql_query($qry);
while($row = mysql_fetch_array($rec)){
    $id = $row['empid'];
    $arr[] = $id;
    foreach(rec($id) as $key=>$val){
        $arr[] = $val;
        $arr[] = rec($val);
        rec($val); 
    }
}

function rec($id){
    $qry = "SELECT * FROM emp WHERE reporting_head_id=$id";
    $rec = mysql_query($qry);
    while($row = mysql_fetch_array($rec)){
        $arec[] = $row['empid']; 
    }
    return $arec;

}
print_r($arr); //This array will contain the  reporting_head_id plus those employees who report to the employees reporting to the given id. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:10:37.293

我没有尝试过，但我相信这是您正在寻找的一个例子：http: [//blog.sqlauthority.com/2012/04/24/sql-server-introduction-to-hierarchical-query-using-a -recursive-cte-a-primer/](http://blog.sqlauthority.com/2012/04/24/sql-server-introduction-to-hierarchical-query-using-a-recursive-cte-a-primer/)

不幸的是，我认为这在 mySQL 中不可用。但是，我发现以下两个我认为相似的问题会给您一个起点：

[使用查询（如递归函数）选择祖先](https://stackoverflow.com/questions/5215646/select-ancestors-using-query-like-a-recursive-function)

[递归 MySQL 查询](https://stackoverflow.com/questions/3647371/recursive-mysql-query)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:39:34.340

除了一个 foreach 循环，它会查询你的添加结果，我不确定。

尝试：

```
"SELECT * FROM employee WHERE reporting_head_id=1" 
```

然后取结果并：

```
foreach($employees as $employee)
{
    "SELECT * FROM employee WHERE reporting_head_id=".$employee;
} 
```

# android - 广播接收器、待定意图和服务混淆选择哪个

> ID：13965925
> 
> 赞同：0
> 
> 时间：2012-12-20T05:33:16.027
> 
> 标签：android, android-intent

嗨，我必须创建一个应用程序，用户可以在其中标记位置，以便有一个与该位置相对应的警报。我从广播接收器开始，我向广播接收器注册，一切正常，但对于一个位置，待定意图一次又一次地触发相同本文中描述的问题

[在这里](http://www.techrepublic.com/blog/app-builder/mobile-developer-tips-on-location-requests-and-android-proximity-alerts/220)。

并且有很多疑问很多人都面临着同样的[问题](https://stackoverflow.com/questions/9462165/pendingintent-is-fire-again-again-in-given-radius)

第一篇文章中有一个解决方案，当我在 activty onCreate 方法中注册广播接收器时，它仅在我按下回退然后自动注册取消注册时该活动处于焦点时才起作用。我希望广播接收器一直工作。实际上，当我单击保存时会出现一个警报，然后为该位置保存一个接近警报这里是用于注册与我的应用程序相关的接近警报的相关代码

```
String s=System.currentTimeMillis()+"";

Intent intent = new Intent(PROX_ALERT_INTENT+s);
intent.putExtra("longitude", longitude);
intent.putExtra("latitude", latitude);

       PendingIntent proximityIntent = PendingIntent.getBroadcast(getApplicationContext(), i, intent, PendingIntent.FLAG_UPDATE_CURRENT);

locationManager.addProximityAlert(

           latitude, // the latitude of the central point of the alert region

           longitude, // the longitude of the central point of the alert region

           1000, // the radius of the central point of the alert region, in meters

           -1, // time for this proximity alert, in milliseconds, or -1 to indicate no expiration

           proximityIntent // will be used to generate an Intent to fire when entry to or exit from the alert region is detected

      );

IntentFilter filter = new IntentFilter(PROX_ALERT_INTENT+s); 

     registerReceiver(new ProximityAlertReceiver(), filter); 
```

我正在使用包含常量和时间戳的操作字符串创建意图。然后我正在注册具有相同常量 + 时间戳的广播接收器。警报工作正常，但仅在活动处于前台时才有效，否则警报将不起作用。任何人都可以告诉如何添加接近警报，以便它只会触发一次或任何替代解决方案来完成此任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:28:01.960

因为 ProximityAlert 触发意图的次数更多，并且我在带有注释的 Activty 中显示警报，所以我使用了 Activity 的 onNewIntent 方法，因此生成的应用程序实例不超过一个。

# database - 为什么查询在wordpress中触发两次？

> ID：13965926
> 
> 赞同：0
> 
> 时间：2012-12-20T05:33:37.620
> 
> 标签：database, wordpress

我已经编写了一个代码，它将在提交时将表单数据保存在数据库中......

```
if(isset($_POST['submitted']) && ($_SERVER['REQUEST_METHOD'] == 'POST')) {

    global $wpdb;
    $company_name = $wpdb->prefix . "company";
    $single_table = $wpdb->prefix . "single";
    $emp_table = $wpdb->prefix . "employee";
    $idea_table = $wpdb->prefix . "idea";

    if($_POST['team-type'] == "Freelancer"){
        $wpdb->query( $wpdb->prepare("INSERT INTO $company_name (name, team_size) VALUES(%s, %d)", $_POST['cname'],1));  

        $company_id = $wpdb->get_var( "SELECT MAX(id) FROM wp_company" );
        echo "<h2>1</h2>";

        $wpdb->query( $wpdb->prepare("INSERT INTO $single_table (company_id, name, bio,linkedin_url) VALUES (%d, %s, %s, %s)", $company_id, $_POST['freelancer-name'] ,$_POST['free-bio'], $_POST['free-url'] ) );

    }else{
        $query = "INSERT INTO $table_name (name, team_size) VALUES('" . $_POST['cname'] . "'," . $_POST['team'] .")";
        $wpdb->query($query);
        echo "<h2>2</h2>";
    }
    echo "<h2>3</h2>";
} 
```

问题是，在数据库中，数据被存储了两次。

但是我放在页面上的 h2 标签只显示一次。

代码有什么问题，或者我应该怎么做才能只保存一次数据？

顺便说一句，如果条件也可以正常工作，bcz我可以根据我选择的内容检查h2标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:40:31.457

起初，我建议使用

```
$lastid = $wpdb->insert_id; 
```

代替

```
$company_id = $wpdb->get_var( "SELECT MAX(id) FROM wp_company" ); 
```

但这不是我想的重点。

除此之外，我建议您使用 $wpdb->insert() 进行查询。因为您正在运行简单的查询。[http://codex.wordpress.org/Class_Reference/wpdb#INSERT_rows](http://codex.wordpress.org/Class_Reference/wpdb#INSERT_rows)

如果这不能让你到任何地方：问题将出在客户端。您发送请求两次。所以尝试安装 Fiddler 并嗅探你发送了多少请求。

# c++ - OpenGL/C++ 复杂性。解构器/构造器 Var 错误

> ID：13965927
> 
> 赞同：-2
> 
> 时间：2012-12-20T05:33:51.573
> 
> 标签：c++, opengl, constructor, destructor, glut

我正在创建一个名为 Square 的类和函数来计算 x、y、z 位置以创建 4 个顶点以在 OpenGL 中渲染一个正方形。

错误

```
8       [Error] expected constructor, destructor, or type conversion before '.' token
8       [Error] expected `,' or `;' before '.' token
9       [Error] expected constructor, destructor, or type conversion before '.' token
9       [Error] expected `,' or `;' before '.' token 
```

这是main.cpp

```
#include <GL/glut.h>
#include <stdarg.h>
#include <stdio.h>
#include <stdlib.h>
#include "Square2D.h"
SquareD Love;
Love.SetOrigin(0.0f,0.0f,0.0f);
Love.CalcVert(2.0f);

void Display(void)
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_MODELVIEW); //Switch to the drawing perspective
glLoadIdentity(); //Reset the drawing perspective
Love.RenderSquare();
glTranslatef(0.0f,0.0f,-5.0f);
glutSwapBuffers();
};

void reshape(int w, int h) 
{
glViewport(0, 0, w, h);
glMatrixMode(GL_PROJECTION);
glLoadIdentity(); //Reset the camera
gluPerspective(45.0,(double)w/(double)h,1.0,200.0);
}
int main(int argc, char** argv)
{
//Init
glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
//Create Window
glutInitWindowSize(640,480);
    glutInitWindowPosition(40,40);
    glutCreateWindow("OpenGLUT Shapes");
//OpenGL Enables for effects
glEnable(GL_DEPTH_TEST);
    glEnable(GL_COLOR_MATERIAL);
//Functions
glutDisplayFunc(Display);
glutReshapeFunc(reshape);
//Main OpenGL loop
glutMainLoop();
//Return success//C++ requirement
return 0;
} 
```

这是 SquareD 类的头文件

```
#ifndef XYZSQUARE_H
#define XYZSQUARE_H
// No description
class SquareD
{
public:
    // class constructor
    SquareD();
    // class destructor
    ~SquareD();

    void SetOrigin(float X,float Y,float Z);
    void RenderSquare();
    void CalcVert(float lenght);

    private:
    float TL_X,TL_Y,TL_Z;
    float TR_X,TR_Y,TR_Z;
    float BL_X,BL_Y,BL_Z;
    float BR_X,BR_Y,BR_Z;
    float Lenght;
    float OriginX,OriginY,OriginZ;
    };
    #endif // SQUARE_H 
```

SquareD 类的 .cpp 文件

```
#include <GL/glut.h>
#include "Square2D.h" // class's header file
// class constructor
SquareD::SquareD()
{
// insert your code here
}
// class destructor
SquareD::~SquareD()
{
// insert your code here
}
void SquareD::SetOrigin(float X,float Y,float Z)
{
    OriginX=X;//X
    OriginY=Y;//Y
    OriginZ=Z;//Z
};
void SquareD::CalcVert(float lenght)
{
 Lenght=lenght/2;
 //Left Front
 TL_X =OriginX-Lenght;//X
 TL_Y =OriginY;       //Y
 TL_Z =OriginZ+Lenght;//Z
 //Right Front
 TR_X =OriginX+Lenght;//X
 TR_Y =OriginY;       //Y
 TR_Z =OriginZ+Lenght;//Z
 //Left Back
 BL_X =OriginX-Lenght;//X
 BL_Y =OriginY;       //Y
 BL_Z =OriginZ-Lenght;//Z
 //Right Back
 BR_X =OriginX+Lenght;//X
 BR_Y=OriginY;       //Y
 BR_Z=OriginZ-Lenght;//Z
};
void SquareD::RenderSquare()
{
     glVertex3f(TL_X,TL_Y,TL_Z);
 glVertex3f(TR_X,TR_Y,TR_Z);
 glVertex3f(BL_X,BL_Y,BL_Z);
 glVertex3f(BR_X,BR_Y,BR_Z);
}; 
```

是什么导致了错误，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:13:27.587

您的代码中有几个问题。

首先，你不能调用这样的函数（断章取义）。如果您在 main 中调用函数，那么它将起作用：

```
int main()
{
  Love.SetOrigin(0.0f,0.0f,0.0f);
  Love.CalcVert(2.0f);
  // rest of code
  // ...
} 
```

其次，您需要在渲染时调用`glBegin`/ ：`glEnd`

```
void SquareD::RenderSquare()
{
  glBegin( GL_QUADS );
     glVertex3f(TL_X,TL_Y,TL_Z);
     glVertex3f(TR_X,TR_Y,TR_Z);
     glVertex3f(BL_X,BL_Y,BL_Z);
     glVertex3f(BR_X,BR_Y,BR_Z);
  glEnd();
}; 
```

如果您正确计算了顶点，并且正确设置了视口，并且正确设置了休息，您应该会看到一个正方形。

# android - getSupportedColorEfffects() 方法返回空数据

> ID：13965930
> 
> 赞同：0
> 
> 时间：2012-12-20T05:33:56.377
> 
> 标签：android, camera, android-camera

我正在做一个安卓相机应用程序。当我尝试设置颜色效果时它不起作用。顺便说一句，我在这里发布了另一个关于此的问题： [Android Camera Effects Not Working](https://stackoverflow.com/questions/13902101/android-camera-effects-not-working/13913098#comment19205383_13913098) 我正在使用此代码查看效果并查看我的设备支持的效果。

```
List<String> colorEffects = parameters.getSupportedColorEffects();
Iterator<String> cei = colorEffects.iterator();
while (cei.hasNext())
{
    String currentEffect = cei.next();
    if (currentEffect.equals(Camera.Parameters.EFFECT_NEGATIVE))
    {
        parameters.setColorEffect(Camera.Parameters.EFFECT_NEGATIVE);
        break;
    }
} 
```

但这给了我一个空指针异常。所以我检查了是否`getSupportedColorEffects()`返回任何东西。

```
if (colorEffects == null){
    editText.setText("Null");
} 
```

它确实回来了`null`。为什么？下载的 Android SDK 有问题吗？我应该下载一个新版本。我已经下载了 Android 2.2，我应该下载 Android 2.3 看看会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:52:01.363

相机模块并不总是支持此功能。[根据Android查看函数的定义。](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedColorEffects%28%29)

基本上，这仅取决于特定手机的相机硬件和设置，并且您使用的手机看起来不支持色彩效果。

# iphone - 在 iTunes 中上传时二进制文件无效

> ID：13965940
> 
> 赞同：1
> 
> 时间：2012-12-20T05:34:44.850
> 
> 标签：iphone, ios, app-store, itunes

这是我第三次将我的应用程序上传到 iTunes。我的应用程序的当前版本是 1.1，已经发布。在提交 1.2 的新版本之前，我提供了之前提供的所有必需信息，但是当我提交新的二进制文件时，我错误地在 info.plist 中提到了 2.0。所以我有点困惑，因为苹果因为版本控制或其他原因而显示无效的二进制消息。请帮助我，因为这是我第一次遇到此类问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:37:16.450

狩猎后，找到解决方案，我的目标是 ios6.0 的应用程序，但在 xcode4.2 中制作。我在 xcode 4.5 中制作了二进制文件并成功上传，状态更改为 Waiting For Review。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:42:28.317

您确实需要升级到 Xcode 4.5 以支持 iphone 5 分辨率。如果您使用旧版本构建项目，当文件 Default-568h@2x.png 存在时，您将收到错误*。

所以..**升级你的 Xcode** ......或者只是简单**地删除 Default-568h@2x.png**（应用程序将以信箱模式运行）。更多细节在这里[http://forum.unity3d.com/threads/153862-Good-to-know-iOS-4-5-6-and-invalid-binary](http://forum.unity3d.com/threads/153862-Good-to-know-iOS-4-5-6-and-invalid-binary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:38:26.917

不，2.0 不是解决方案...您可以尝试使用 1.2 这不是问题，但您可以检查其他

重要的事情，比如在 xcode 中选择了正确的配置文件，正确的配置文件

下载等

# asp.net - 如果使用 301 重定向执行，SE 机器人会在我的 URL 中看到关键字吗？

> ID：13965949
> 
> 赞同：2
> 
> 时间：2012-12-20T05:35:37.550
> 
> 标签：asp.net, redirect, seo, http-status-code-301, googlebot

我刚刚注意到我网站上的一些页面就像... **controlpanelbuild.aspx**。

出于 SEO 的目的，我知道在基于 URL 的关键字之间最好使用连字符。

所以我只是将文件重命名为**control-panel-build.aspx**并在我的 global.asax 文件中设置了 301 重定向，一切正常。如果您单击显示 controlpanelbuild.aspx 的链接，它将重定向到 control-panel-build.aspx。

我的问题是我应该浏览我的 5 个母版页以及所有 12 个资源文件（12 种不同的语言）并更改其中的内部链接（菜单链接、站点地图链接等）吗？SE bot 会看到没有 301 的 URL 吗？或者 googlebot、bingbot 等所有 SE 机器人会看到带有连字符的更正 URL 吗？感谢任何人都可以提供的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:38:35.180

301 重定向本质上告诉搜索引擎旧 URL 不再存在，现在位于新 URL 处。与旧 URL 相关的所有链接和其他好东西都与新 URL 相关联（具有轻微的抑制因素），但就搜索引擎而言，新 URL 将影响这些页面的排名，而不是旧 URL。

# java - 休眠对象不分离

> ID：13965951
> 
> 赞同：0
> 
> 时间：2012-12-20T05:35:58.210
> 
> 标签：java, json, hibernate, parsing, hibernate-mapping

我有一个从休眠会话中提取的用户对象。User 对象有一组 Car 对象，我正在检索这些对象并将其转换为 JSON。问题是，当我返回要转换为 JSON 的 Set 时，它会进入一个无限循环的解析，这似乎是因为休眠会话仍然处于活动状态。

代码如下所示：

```
 public Set<Car> getUserCurrentCar(User user) {
                user = (User) session.get(User.class, user.getId());
            Set<Car> retrievedCars = (Set<Car>) user.getCars();
            session.close();
            return retrievedCars;
        } 
```

但是，当我将对象值移动到没有会话的对象中时，一切都可以正常解析而不会出现错误：

```
public Set<Car> getUserCurrentCar(User user) {
            user = (User) session.get(User.class, user.getId());
        Set<Car> Cars = new HashSet<Car>();
        Set<Car> retrievedCars = (Set<Car>) user.getCars();

        for(Car Car :retrievedCars){
        Car newCar = new Car();
        newCar.setTitle(car.getTitle());
        cars.add(newCar);
        }
        session.close();
        return cars;
    } 
```

虽然这可行，但我想在将来修改我的对象并避免所有这些看似重复的对象转移。

此外，我的 Car 对象在休眠映射中具有对 User 的多对一反向引用：

```
<many-to-one name="user" 
    column="userId"
    not-null="true"/> 
```

如何避免这种情况，并使用真正分离的对象解析为 JSON？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:11:35.163

您遇到的问题与 Hibernate 会话无关。相反，您的 JSON 框架在序列化循环引用时遇到问题，从而导致堆栈溢出。一种解决方案是在您的 Restlet 框架中启用[Jackson 扩展](http://wiki.restlet.org/docs_2.0/13-restlet/28-restlet/299-restlet.html)，然后使用[JacksonRepresentation](http://www.restlet.org/documentation/2.0/jee/ext/org/restlet/ext/jackson/JacksonRepresentation.html)序列化您的对象。启用 Jackson 后，您可以按如下所示的方式注释您的对象，然后将更优雅地处理循环引用：

```
public class User implements Serializable {
    public static final String REFERENCE_CARS = "user.cars";

    private Set<Car> cars;

    // constructors, etc

    @JsonManagedReference(REFERENCE_CARS)
    public Set<Car> getCars() {
        return cars;
    }
}

public class Car implements Serializable {
    private User user;

    // constructors, etc

    @JsonBackReference(User.REFERENCE_CARS)
    public User getUser() {
        return user;
    }
} 
```

请注意，这`User`是这种关系的拥有方，因此它包含的任何汽车都将在其 JSON 中序列化。另一方面，`Car`是关系的拥有方，因此`User`对象*不会** 出现在其 JSON 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T22:17:32.523

正如我的问题中提到的，我想简单地从休眠中提取一个对象并将其转换为 JSON。由于 Car 对象在其嵌套对象中具有对 User 对象的反向引用，因此 Restlets 和 google GSON 等 JSON 框架进入了无限循环。

我想避免它，但我必须从休眠中拉出对象，然后手动循环遍历对象并用我需要的内容填充新创建的对象。

当这些对象的值发生变化时，这将导致未来的维护工作，但它最终确实有效。

**答案**：从休眠中拉出对象。创建单独的 java 对象。循环遍历对象并使用休眠对象值填充新创建的对象。

# bash - awk 脚本和反斜杠

> ID：13965952
> 
> 赞同：1
> 
> 时间：2012-12-20T05:36:04.120
> 
> 标签：bash, unix, awk, cygwin, backslash

我是 Unix 的新手。

```
${AWK} '\!/^ / && \!/^-/ && \!/^＜/ && \!/^$/ {printf "%s,,N,N,N,,,,\n", $1}' ~/ozserver.txt 
```

当我像以前一样运行命令时，`errorInfo`Cygwin 窗口中打印如下：

```
awk: commandline:1: ^ backslash not last character on line 
```

实际上，我的角色是`csh`为了`bash`学习而翻译。我没有写那个代码。所以，我知道的是：

```
"\!/regex/" : is a model unit."\" is belong to the awk synax for cut down the long sentence
"!"means logical NOT,"/regex/" means one model.btw,"&&" means logical AND. 
```

我只是不知道哪里错了。任何人都可以给我一个标志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:52:51.820

“`csh`元语法动物园”意味着`!`即使在单引号或类似的东西内也是历史运算符。在从 Bourne shell 派生的 sane^H^H^H^H shell 中，这`!`不是什么大问题，您可以简单地写：

```
${AWK} '!/^ / && !/^-/ && !/^＜/ && !/^$/ {printf "%s,,N,N,N,,,,\n", $1}' ~/ozserver.txt 
```

当然，这还可以进一步简化：

```
${AWK} '!/^[- <]/ && !/^$/ {printf "%s,,N,N,N,,,,\n", $1}' ~/ozserver.txt 
```

它查找行首，后跟空白、破折号或小于（不是空行）以外的内容。这也可以通过使用否定字符类来简化：

```
${AWK} '/^[^- <]/ {printf "%s,,N,N,N,,,,\n", $1}' ~/ozserver.txt 
```

它会查找以除空白、破折号或小于以外的字符开头的行（但它必须至少包含一个字符，因此会自动排除空行）。最后一个版本甚至可能也可以正常工作，`csh`因为它根本不使用任何东西`!`。

# ruby-on-rails - Rails has_many 错误：nil:NilClass 的未定义方法`'

> ID：13965953
> 
> 赞同：0
> 
> 时间：2012-12-20T05:36:04.903
> 
> 标签：ruby-on-rails, has-many

我不断收到上述错误，并花了几天时间在帖子和文档中寻找原因。

我正在建造的应用程序记录燃料使用情况。维修者一词是指其自己模型中的供应商，其属性包括 Rep_Name（名称）地址、电话等。最初用于脚手架目的，仅使用了 repairer_id 并且一切正常。尝试从修复模型调用 rep_name 时出现问题。（我什至尝试将字段重命名为 rep_name 而不是 name 来解决问题）

```
 undefined method `rep_name' for nil:NilClass 
```

提取的源代码（大约第 38 行）：

```
35:             <td><%= f.litres %></td>
36:             <td><%= f.cost %></td>
37:             <td><%= f.tax %></td>
38:             <td><%= f.repairer.rep_name%></td>
39:             <td><%= f.fuel_type %></td>
40:             <td class= "actions">
41:                 <%= link_to("Show", {:action => 'show', :id =>  f.id}, :class => 'btn btn-info') %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:04:41.290

将 <%= f.repairer.rep_name%> 替换为

```
<%= f.repairer.blank? ? "" : f.repairer.rep_name %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T05:37:33.323

造成这种情况的原因实际上是数据库中的脏数据。我有几个燃料记录，其中 repairer_id 为空。

我删除了这些记录，问题解决了。

# java - J2ME 图像旋转

> ID：13965956
> 
> 赞同：0
> 
> 时间：2012-12-20T05:36:33.107
> 
> 标签：java, java-me

在 j2me 中，没有任何方法可以将图像旋转任意角度（25、30 等）。我参考并尝试了以下链接。它在模拟器上运行良好，但在设备中响应时间非常慢..

[J2me 图像旋转](http://www.developer.nokia.com/Community/Discussion/showthread.php?206189-J2me-Image-Rotation&p=764607&viewfull=1#post764607)

如何解决这个问题？或者有没有其他方法可以平滑地旋转图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:49:50.567

refer this link.I hope it may help you [http://code.google.com/p/j2me-imageviewer/downloads/detail?name=J2MEImageViewer-autorotate.jad](http://code.google.com/p/j2me-imageviewer/downloads/detail?name=J2MEImageViewer-autorotate.jad)

# java - 如何用jdbc在swing中用另一个字段替换外键？

> ID：13965961
> 
> 赞同：0
> 
> 时间：2012-12-20T05:37:11.640
> 
> 标签：java, sql, swing, jdbc, foreign-keys

这是一个初学者问题，也许我遗漏了一些明显的东西，但是我应该如何使用`TableModel`with`jdbc`来显示引用表中另一个字段的值而不是外键的值？

我想到了两种可能的解决方案，但我对它们不太满意。（他们来了，但请注意，如果有更好的解决方案，我并不是坚持我的想法应该在答案中得到解决。）

一种是对引用的表进行查询，以获取 中每个外键字段值的替代值`getValueAt`。这似乎不太有效（即使已缓存），我想知道如何将其与编辑和将更改的数据写回表同步。

另一种是用 SQL 查询替换字段的值。这不会使更新/插入过于简单，但可以进一步推进以使用视图。似乎是一个可行的解决方案，但我真的需要改变我的数据库只是为了将它与一个简单的 java 应用程序一起使用吗？

有没有更好的解决方案/这些有什么问题/我完全错了吗？:)

应该支持读取、更新、插入、删除。我正在使用 mysql（和/或 sqlite）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:48:03.933

您需要将用户数据转换回您的数据库模型。由于您使用的是 jdbc，这意味着构建 SQL。您应该查看 PreparedStatement，请参阅[Java 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)以了解用法。我希望您将此操作基于某些事件，例如保存按钮或值更改。

# html - 制作按钮链接

> ID：13965962
> 
> 赞同：1
> 
> 时间：2012-12-20T05:37:28.800
> 
> 标签：html

我有兴趣使我的网站上的悬停按钮可点击，但不知道如何。我的网站在这里： http: [//mathisbeauty.org/](http://mathisbeauty.org/)

页面本身的相关代码看起来像

> ```
> <div id="bar">
>     <div class="menuLink"><a href="index.html">Home</a></div>
>     <div class="menuLink"><a href="videos.html">Videos</a></div>
>     <div class="menuLink"><a href="articles.html">Articles</a></div>
>     <div class="menuLink"><a href="links.html">Links</a></div>
>     <div class="menuLink"><a href="aboutme.html">About me</a></div>
> </div> 
> ```

CCS 是（我相信！）

```
.menuLink
{
    height:36px;
    width: 120px;
    text-align:center;
    float:left;
    font-family:Geneva, Arial, Helvetica, sans-serif;
    font-size:14px;
    font-weight:bold;
    color:#252F33;
    padding-top:19px;
}
menuLink:hover
{
background: url(bar2.png) repeat-x;
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:43:29.540

您的代码是正确的，但这就是您要找的吗？

[http://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/](http://designshack.net/articles/css/four-simple-and-fun-css-button-hover-effects-for-beginners/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T05:42:43.563

您的链接是可点击的，问题是它只是当前链接的文本。您只需要使锚点与它们所在的容器大小相同`.menuLink`。

添加以下css，它应该可以工作..

```
.menuLink a {
    height: 36px;
    width: 120px;
    display: block;
} 
```

**编辑**：

改用这个，应该给你完整的盒子。老实说，我没有注意到上半部分不包括在内。

```
.menuLink a {
    height: 57px;
    width: 120px;
    display: block;
    top: 0;
    left: 0;
    position: absolute;
    padding-top: 18px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T05:46:37.783

我想你想让整个悬停区域成为一个链接元素。

您必须将 `<div class="menuLink">`元素包装为`<a>`标记：

这也有效：

```
<a class="menuLink" href="index.html"><span>Home</span></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:48:01.850

```
 .menuLink a {display: block;padding: 21px 0; }
.menuLink {padding:0;} 
```

这将设置 div 的宽度`a`以匹配父 div `.menuLink`。

# emacs - 在 emacs 中取消设置键绑定

> ID：13965966
> 
> 赞同：28
> 
> 时间：2012-12-20T05:37:43.993
> 
> 标签：emacs, elisp, emmet

例如，在 zen-coding 的代码中，“Cj”隐藏了“Cj”的正常行为 ( `newline-and-indent`)

```
(define-key zencoding-mode-keymap (kbd "C-j") 'zencoding-expand-line) 
```

那么我怎样才能取消设置这个键绑定并再次使用`C-j`呢`newline-and-indent`？

我试过这个，但它不起作用：

```
(add-hook 'html-mode-hook
          (lambda ()
            (progn
              (zencoding-mode)
              (local-set-key (kbd "C-j") 'newline-and-indent)))) 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-20T06:08:38.613

取消绑定键（对于任何键映射）的一般方法是定义以下绑定`nil`：

```
(define-key KEYMAP KEY nil) 
```

为方便起见，还有两个标准函数用于从全局键映射和本地键映射（*通常*是主模式的键映射）解绑。

*   `(global-unset-key KEY)`
*   `(local-unset-key KEY)`

这些是交互式命令，根据它们各自的补充`global-set-key`和`local-set-key`.

至于你的具体例子，你可能想要这样的东西：

```
(with-eval-after-load "zencoding-mode"
  (define-key zencoding-mode-keymap (kbd "C-j") nil)) 
```

* * *

为了其他尝试做类似事情的读者的利益，这些参数是`"zencoding-mode"`因为正在加载的库名为 zencoding-mode.el（请注意，您应该省略“.el”后缀）；而`zencoding-mode-keymap`不是典型的/预期的`zencoding-mode-map`，因为 zencoding-mode.el 在显式声明其键盘映射而不使用标准名称方面是不寻常的。

用于`C-h``k`检查有问题的键绑定到什么，Emacs 会告诉你键映射的名称和库的名称，这建立了两个参数。

# objective-c - Objective-C Ceil() 没有返回正确的值

> ID：13965977
> 
> 赞同：0
> 
> 时间：2012-12-20T05:39:24.870
> 
> 标签：objective-c, ios, ceil

以下代码返回意外（和错误的值）。

```
x1 = ceil(ceil(ceil(100*1.0f)*1.0f)*1.1f); 
```

它返回 111 而不是 110。我知道将数字乘以 1 是没有意义的，但那些 1 并不总是 1。当它们是其他值时，函数按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:45:13.970

这是浮点错误的问题。1.1f 可能真的类似于 1.100056778。

这意味着 100 * 1.100056778 = 110.0056778。这个`ceil`数字是111。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:47:34.740

使用`ceilf`运算符为我修复了它：

```
float x1 = ceilf(ceilf(ceilf(100*1.0f)*1.0f)*1.1f);
NSLog(@"%f",x1); // 110 
```

# facebook - 错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移

> ID：13965983
> 
> 赞同：2
> 
> 时间：2012-12-20T05:39:45.213
> 
> 标签：facebook, ios5, xcode4.3

我正在我的项目中做 facebook 集成部分。*我从rey wenderlich*下载了 facebook 集成示例项目，然后更改`appkey`了`appsecretkey`. 当我运行这个应用程序时，登录验证工作正常，然后显示错误。

> 错误：此端点已被弃用。要暂时重新启用它，您可以禁用“august_2012”平台迁移。它将在 2012 年 8 月 1 日永久禁用。

是否有解决方法，或者您是否知道问题并正在解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:43:22.837

信息很明确：您复制的示例使用的是自 2012 年 8 月以来已弃用和禁用的一些 Facebook api。因此，您需要相应地更新您的代码。

[已完成更改页面的这一部分](https://developers.facebook.com/roadmap/completed-changes/#august-2012)列出了在提到的日期生效的弃用。我猜你正在使用`prompt_permissions.php`or `prompt_feed.php`; 按照页面中的说明进行升级。

# c++ - 删除 C++ 映射中的指针

> ID：13965988
> 
> 赞同：1
> 
> 时间：2012-12-20T05:40:45.773
> 
> 标签：c++, stl, map

我有一张地图

```
std::map<std::string, my_class*> name2ptr; 
```

我尝试通过首先遍历地图以删除 my_class 指针然后清除地图来删除地图的内容。现在，当地图中只有一对时，我遇到了问题。地图现在只有一个条目

```
<"ajay", 0xabcd> 
```

它在 delete((*itr).second) 处崩溃。for循环如下。

```
name_map_type::iterator itr;
    for( itr= name2ptr.begin();itr!=name2ptr.end();itr++){
        if((*itr).second){
            delete ((*itr).second);
        }
    }
name2ptr.clear(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T05:49:44.503

你在地图上放了一个错误的指针吗？首先，不需要检查`nullptr`on `(*itr).second`；`delete`ing a`nullptr`完全没问题，它不会做任何事情。

您应该将存储`std::shared_ptr<my_class>`视为地图的值类型，而不是原始指针。这样，您只需调用`name2ptr.clear()`，只要没有其他东西持有对该对象的引用，它将被删除。

看看[这个参考](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

# iphone - iPhone：- 从标签文本链接识别

> ID：13965989
> 
> 赞同：3
> 
> 时间：2012-12-20T05:41:01.077
> 
> 标签：iphone, objective-c, uilabel

在我的 iPhone 应用程序中，我想以不同颜色显示标签内的链接（如超链接）。

当有人点击链接时，它应该在 Safari 浏览器中打开该链接。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T05:50:53.713

听到的是两个示例示例代码链接，希望对您有所帮助：-

[https://github.com/twotoasters/TTTAttributedLabel](https://github.com/twotoasters/TTTAttributedLabel)

[http://furbo.org/stuff/FancyLabel_1.0.zip](http://furbo.org/stuff/FancyLabel_1.0.zip)

**或者你也可以这样做**

将标签的 userInteractionEnabled 设置为 YES 并为其添加手势识别器：

```
myLabel.userInteractionEnabled = YES;

    UITapGestureRecognizer *gestureRec = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(openUrl:)];
    gestureRec.numberOfTouchesRequired = 1;
    gestureRec.numberOfTapsRequired = 1;
    [myLabel addGestureRecognizer:gestureRec];
    [gestureRec release];

Then implement the action method:

    - (void)openUrl:(id)sender
    {
        UIGestureRecognizer *rec = (UIGestureRecognizer *)sender;

        id hitLabel = [self.view hitTest:[rec locationInView:self.view] withEvent:UIEventTypeTouches];

        if ([hitLabel isKindOfClass:[UILabel class]]) {
            [[UIApplication sharedApplication] openURL:[NSURL URLWithString:((UILabel *)hitLabel).text]];
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T05:50:50.477

我们使用正则表达式来检查链接

```
NSString *urlRegEx =@"((http|https)://)?((\\w)*|([0-9]*)|([-|_])*)+([\\.|/]((\\w)*|([0-9]*)|([-|_])*))+";
NSPredicate *urlTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", urlRegEx];
if ([urlTest evaluateWithObject:lbl.text])
{
       //set color of lbl
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:44:28.483

您无法在标签中识别任何内容来了解​​超链接。

制作一个看起来像标签的自定义按钮（仅文本和背景为 clearColor），以产生效果。

# spring - 如何使用 testng 通过会话读写测试服务？

> ID：13965992
> 
> 赞同：0
> 
> 时间：2012-12-20T05:41:27.210
> 
> 标签：spring, session, testng

我的服务需要从会话中获取对象，如下所示：

```
 @Service("UsageService")
  @Scope(value="session")  
  public class UsageServiceImpl implements UsageService
  {
    @Override
    public void doAnalysis()
    {
       // get data from session
       ServletRequestAttributes attr = (ServletRequestAttributes) RequestContextHolder.currentRequestAttributes();
       HttpSession session = attr.getRequest().getSession();
             ......
    }
  } 
```

像这样测试代码

```
@ContextConfiguration(locations = { "test-context.xml" })
@Transactional
public class UsageServiceImplTest extends AbstractTestNGSpringContextTests
{
        @Autowired
        private UsageService service;

        @Test
        public void testAnalysis()
        {
       service.doAnalysis(null);
        }
} 
```

我已经按照[http://tarunsapra.wordpress.com/2011/06/28/junit-spring-session-and-request-scope-beans/](http://tarunsapra.wordpress.com/2011/06/28/junit-spring-session-and-request-scope-beans/)的建议将此添加到 test-context.xml

```
 <bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
    <property name="scopes">
        <map>
            <entry key="session">
                <bean class="org.springframework.context.support.SimpleThreadScope" />
            </entry>
        </map>
    </property>
 </bean> 
```

当我运行文本时，我收到了这个错误：

```
java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside   of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request. 
```

正如错误消息所说：由于我通过 testng 而不是 http 请求启动服务，所以我在实际 Web 请求之外引用请求属性，如何使会话读写可测试的服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:11:01.677

您可以在单元测试中使用 mockito 来模拟 RequestAttributes 对象以返回您想要的内容，然后在开始测试之前使用您的模拟/存根调用 RequestContextHolder.setRequestAttributes(RequestAttributes)。

# java - Struts2 xml-validation 调用方法

> ID：13965993
> 
> 赞同：1
> 
> 时间：2012-12-20T05:41:28.510
> 
> 标签：java, xml, validation, struts2, struts

xxx-validation.xml 是否可以调用方法？因为我的计划是我会检查它从表单接收到的某个值并将其作为方法中的参数传递（检查用户名是否存在于数据库中）

或 ActionSupport 类将调用 validation.xml 然后执行某个方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:36:17.430

正如我[在两天前的一个问题中回答的](https://stackoverflow.com/questions/13927830/combining-validate-method-and-xml-validation-in-struts2)（！！），它是：

```
<validators>
    <field name="username">
        <field-validator type="fieldexpression">
            <param name="expression">
                <![CDATA[
                    isUserAlreadyInDatabase(username)
                ]]>
            </param>
            <message>function call message here</message>
        </field-validator>
    </field>
</validators> 
```

请考虑投票:)

# powershell - Powershell：将计划任务设置为在用户未登录时运行

> ID：13965997
> 
> 赞同：52
> 
> 时间：2012-12-20T05:41:53.933
> 
> 标签：powershell, scheduled-tasks, powershell-3.0, windows-server-2012

我一直在使用[Powershell 计划任务 Cmdlet](http://technet.microsoft.com/en-us/library/jj649816.aspx)在我们的服务器上创建计划任务。

如何选择“无论用户是否使用此 API 登录都运行”？

我创建了`action`、和对象`trigger`，并将它们传递给，如下所示：`principal``settings``Register-ScheduledTask`

```
$action = New-ScheduledTaskAction -Execute foo.exe -Argument "bar baz"
$trigger = New-ScheduledTaskTrigger -Once -At $startTime -RepetitionInterval (New-TimeSpan -Minutes 1) -RepetitionDuration ([Timespan]::MaxValue)
$principal = New-ScheduledTaskPrincipal -UserId "$($env:USERDOMAIN)\$($env:USERNAME)" -LogonType ServiceAccount
$settings = New-ScheduledTaskSettingsSet -MultipleInstances Parallel

Register-ScheduledTask -TaskName $taskName -TaskPath "\my\path" -Action $action -Trigger $trigger -Settings $settings -Principal $principal 
```

当我创建这样的计划任务时，它默认为“仅在用户登录时运行”。

[这个问题](https://stackoverflow.com/questions/12770293/how-to-set-schedule-service-run-whether-user-is-logged-on-or-not-in-powershell)展示了如何使用 COM 对象来做到这一点，而[这个](https://stackoverflow.com/questions/11190405/how-to-schedule-a-task-wether-the-user-is-logged-on-or-not-in-powershell)使用 schtasks.exe，但是我如何使用`*-ScheduledTask*`cmdlet 来做到这一点？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2016-10-05T13:50:29.923

我不喜欢或不赞成当前评分最高的答案，因为你必须知道你的凭据到一个脚本中才能做到这一点，并且不能通过像 Packer 或其他一些系统/配置自动化这样的东西来做到这一点。Aeyoun 提到了一种更好/正确的方法来做到这一点，但没有详细说明哪种方法是正确设置主体以作为系统用户运行。

```
$action = New-ScheduledTaskAction -Execute foo.exe -Argument "bar baz"
$trigger = New-ScheduledTaskTrigger -Once -At (Get-Date) -RepetitionInterval (New-TimeSpan -Minutes 1) -RepetitionDuration ([Timespan]::MaxValue)
$principal = New-ScheduledTaskPrincipal -UserID "NT AUTHORITY\SYSTEM" -LogonType ServiceAccount -RunLevel Highest
$settings = New-ScheduledTaskSettingsSet -MultipleInstances Parallel

Register-ScheduledTask -TaskName "tasknamehere" -TaskPath "\my\path" -Action $action -Trigger $trigger -Settings $settings -Principal $principal 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-20T07:53:21.573

您需要删除 $principal 并使用用户和密码注册任务：

```
Register-ScheduledTask -TaskName $taskname `
                       -TaskPath "\my\path" `
                       -Action $action `
                       -Trigger $trigger `
                       -User "$env:USERDOMAIN\$env:USERNAME" `
                       -Password 'P@ssw0rd' `
                       -Settings $settings 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-03-28T15:45:13.730

任务计划程序 GUI 中的“无论用户是否登录都运行”选项等效于`New-ScheduledTaskPrincipal -LogonType S4U`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-06T17:24:38.673

一旦你在 gui 中设置了任务，运行这个

```
$task = Get-ScheduledTask "test task for notepad"
$task.Principal.LogonType = "Password"
Set-ScheduledTask $task 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-20T21:39:41.133

# 通过 PowerShell 创建计划任务的入门

我也曾尝试使用 PowerShell 在 Windows Server 2019 上创建计划任务。没有一个答案奏效。似乎所有的答案都确实有一些正确的解决方案，但没有一个有完整的解决方案。虽然有些答案可能对某些人有用，但我敢肯定，这完全取决于他们现有的系统、安全设置和其他因素。在通过 PowerShell 创建一个非常简单的计划任务以收集一些应用程序遥测数据的过程中，我学到了很多东西。

因此，我将完全修改我的原始答案，并逐步引导您（在最热心的情况下）创建计划任务，尤其是在服务器上。如果它像`cron`.

# 为运行无人值守任务的用户分配*登录作为批处理作业*

当大多数人想要创建计划任务时，特别是为了服务器/应用程序维护，或者只是为了定期运行某些东西，第一站是 Windows 任务计划程序。提供了一个不错的 GUI（好吧，它*可能*会更好/更现代化，但是嘿，至少它是一个 GUI），您可以在其中指定所有必要的细节来让您继续前进。问题是，您不能自动化 GUI。正如我发现的那样，GUI 正在幕后做一些微软在告诉你它是*如何*做的（或者它是如何不做的，就此而言）并不完全坦率的事情。这可能会导致*很多*问题——包括任务没有运行，甚至任务运行的用户帐户被锁定。

在 Microsoft 的文档中，[在组策略标题下的“](https://docs.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/log-on-as-a-batch-job#group-policy)作为[*批处理作业登录*( `SeBatchLogonRight`](https://docs.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/log-on-as-a-batch-job#group-policy)好吧，这种说法并不总是正确的。

当您使用任务计划程序 GUI 创建计划任务时，是的，如果计划任务配置为*运行，无论用户是否登录*并且用户没有*作为批处理作业的登录*权限，那么任务计划程序将分配用户的该权利（除非更改默认设置 - 请参阅上面的引用链接）。

但是，当使用 PowerShell ScheduledTask 模块的 cmdlet 创建计划任务时，**不会**发生这种自动用户权限分配。因此，您必须手动执行此操作。执行此操作的 GUI 方法是使用本地安全策略 MMC（Microsoft 管理控制台）。当然，在自动化场景中，GUI 已经出来了，所以你的朋友会是`secedit.exe`. （我自己，我写了 PowerShell 包装器`secedit.exe`。）

因此，假设我们有一个计划任务，该任务将为在您的服务器上运行的应用程序收集遥测数据，然后将该遥测数据发送到您的遥测收集服务，例如 New Relic 或 Data Dog。该任务将在用户帐户下运行`CONTOSO\AppTelemetry`。鉴于我们将在蓝/绿部署期间以自动方式通过 PowerShell 创建计划任务，我们需要为该用户分配*作为批处理作业登录*用户权限。

## 用于`secedit`分配用户权限

这里的步骤非常简单：

1.  将现有服务器的安全策略导出到安全策略模板（可选，仅包含您关心的部分）
2.  创建新的安全策略模板
3.  在新的安全策略模板中将运行计划任务的用户的安全标识符（SID）添加到相应的用户权限
4.  将包含安全策略更改的安全策略模板导入新数据库
5.  配置系统的安全策略以合并在步骤 4 中创建的安全策略数据库中包含的更改。

让我们看一下实现这一点的代码。

### 将现有服务器的安全策略导出到安全策略模板

您可以从 CMD 或 PowerShell（桌面版或核心版，没关系）执行此操作。除非另有说明，否则所有示例都将在 PowerShell 中。

```
secedit.exe /export /cfg secpol.inf /areas USER_RIGHTS 
```

上述命令导出系统的安全策略，但仅导出包含用户权限分配信息的部分。如果您需要添加其他设置，例如注册表项，也可以通过安全策略来完成。一般情况下，请阅读 Microsoft 文档`secedit.exe`或安全策略。

### 创建新的安全策略模板并将我们的计划任务用户的 SID 添加到`SeBatchLogonRight`值

现在我们需要创建一个新的安全策略模板，其中包含我们想要的新安全策略与当前安全策略的增量。我建议新的安全策略模板包含尽可能少的信息——只包含那些需要更改的设置。

有人会认为您需要做的就是指定`SeBatchLogonRight`必须包含用户的 SID，就是这样。但如果你这么想，那你就错了。默认情况下，`SeBatchLogonRight`有一些用户分配给它（请参阅上面引用的 Microsoft 文档链接）。如果我们只是将用户的 SID 分配给新策略模板中的此权限，它将有效地*替换*系统安全策略中的现有值，而不是*更新*它。因此，由于我们正在进行*附加*更改，因此我们需要使用我们上面导出的系统安全策略中的现有值将此用户权限添加到我们的模板中，然后将我们的用户 SID 添加到列表中。

默认情况下，`SeBatchLogonRight`为它分配了以下 SID：

```
SeBatchLogonRight = *S-1-5-32-544,*S-1-5-32-551,*S-1-5-32-559,*S-1-5-32-568 
```

这些是一些标准 Windows 安全组的一些“众所周知的”SID，其用户应该拥有此权限。假设 SID`CONTOSO\AppTelemetry`为`S-1-5-21-0000000000-1111111111-2222222222-3333`。但是等等——你是怎么知道的？

```
function ConvertTo-SecurityIdentifier {
    Param (
        [Parameter(Position = 0, Mandatory, ValueFromPipeline)]
        [string[]] $UsernameOrGroup
    )

    Process {
        foreach ($Name in $UsernameOrGroup) {
            $Account = New-Object -Type System.Security.Principal.NTAccount `
                                  -Argument $Name
            $Account.Translate([System.Security.Principal.SecurityIdentifier]).Value
        }
    }
}
Set-Alias -Name ConvertTo-SID -Value ConvertTo-SecurityIdentifier

function ConvertFrom-SecurityIdentifier {
    Param (
        [Parameter(Position = 0, Mandatory, ValueFromPipeline)]
        [string[]] $SecurityIdentifier
    )

    Process {
        foreach ($SID in $SecurityIdentifier) {
            $Account = New-Object -Type System.Security.Principal.SecurityIdentifier `
                                  -ArgumentList $SID
            $Account.Translate([System.Security.Principal.NTAccount]).Value
        }
    }
}
Set-Alias -Name ConvertFrom-SID -Value ConvertFrom-SecurityIdentifier 
```

（为什么我不简单地使用`Get-ADUser`来获取用户帐户的 SID？有两个原因。首先，使用`Get-ADUser`. 从 SID 中获取用户帐户名称并不那么简单。可以做到，但上面的代码更清晰。其次,*最重要的是*, 并非所有用户都会`Get-ADUser`在他们的机器上安装。我以前的笔记本电脑安装了 Windows 远程服务器管理工​​具 (RSAT), 所以我`Get-ADUser`可以使用。没有安装 RSAT 或安装 Active Directory PowerShell 模块,`Get-ADUser`不可用. 上面的 cmdlet 不依赖于除 Windows 和 .NET 框架之外的任何东西，如果您尝试获取用户帐户 SID 并使用 PowerShell 来执行此操作，根据定义，您很可能具有两个先决条件。）

然后你可以简单地运行：

```
$SID = 'CONTOSO\AppTelemtry' | ConvertTo-SecurityIdentifier 
```

现在我们有了 SID，我们可以创建一个安全策略模板（注意，有更好的方法可以做到这一点——我创建了 PowerShell cmdlet，让我以编程方式与这些 INF 文件进行交互，但我只是要使用这里的文档） . 请注意，在您导出的安全策略中，所有 SID 都以 为前缀`*`，并且多个值以逗号分隔：

```
$NewPolicy = @'
[Unicode]
Unicode=yes
[Version]
signature="$CHICAGO$"
Revision=1
[Privilege Rights]
SeBatchLogonRight = *S-1-5-32-544,*S-1-5-32-551,*S-1-5-32-559,*S-1-5-32-568,*S-1-5-21-0000000000-1111111111-2222222222-3333
'@

$NewPolicy | Set-Content batchlogon.inf 
```

### 将新的安全策略模板导入新的安全策略数据库

标题说明了一切：

```
secedit.exe /import /db batchlogon.sdb /cfg batchlogon.inf 
```

### 使用新安全策略数据库中包含的更改配置系统安全策略

标题再次说明了一切：

```
secedit.exe /configure /db batchlogon.sdb 
```

这就是直接从 CLI为用户分配*登录作为批处理作业的全部内容。*

## 通过 PowerShell 创建计划任务

现在用户有权运行计划任务，无论他们是否登录，我们需要创建一个计划任务，无论用户是否登录都将运行。您将看到许多 Q&A 答案的链接，上面写着你需要这个或那个 LogonType（特别是，`S4U`或`ServiceAccount`）或以最高权限运行它，等等。不要听这些。它（大部分）是*错误*的。本节将概述创建计划任务所需的最少步骤，无论用户是否登录，该任务都会运行。

### 创建计划任务操作

首先是创建任务动作。计划任务由几个部分组成：

*   行动
*   触发器
*   设置
*   校长
*   登记

这些名称是不言自明的。我们将创建一个执行程序的计划任务操作。（还有其他操作类型。请参阅有关[任务操作](https://docs.microsoft.com/en-us/windows/win32/taskschd/task-actions)的文档。）

关于 Exec 操作，重要的一点是任务计划程序服务将生成一个实例`cmd.exe`来运行提供的程序。这意味着如果您需要为程序指定参数，则需要确保遵循 CMD 命令的困难引用规则。（根据您的论点，这些引用规则可能需要*进行大量*测试以确保命令按预期运行。即使在我的简单情况下，我也弄错了，并且任务似乎正确运行 -`0`退出代码 - 但什么也没做完全没有！）查看`cmd.exe /?`所有血腥细节。此外，您可以通过网络搜索找到很多信息。

让我们创建任务操作：

```
$TaskAction = New-ScheduledTaskAction -Execute 'powershell.exe' `
    -Argument ('-NoLogo -ExecutionPolicy Bypass -NoProfile -NonInteractive' + `
     '-File "C:\Telemetry\Send-ApplicationTelemetry.ps1"') 
```

同样，请注意引用规则（即，如果您的文件路径中有空格，或者，如果您将一些 powershell 脚本传递给`-Command`参数，而不是`-File`像我在这里所做的那样使用）。这里有几点需要指出：

*   我本来可以用来`pwsh.exe`运行 PowerShell Core
*   `-NoLogo`避免打印启动 PowerShell 时出现的“横幅”。如果您这样做，它可以使重定向输出到日志文件更好。
*   `-ExecutionPolicy Bypass`指定此脚本将绕过系统上的任何当前执行策略。默认执行策略是`Restricted`，除非指定完整路径，否则禁止运行任何脚本，并禁止来自远程源的任何脚本。此开关基本上确保脚本将运行。它可能并不总是必要的，但如果您信任您正在安排的脚本，这也不应该受到伤害。
*   `-NoProfile`用于不加载用户的 PowerShell 配置文件（这与`bash`Linux 操作系统上的用户配置文件类似）。但是，也可以有全局配置文件脚本。除非您知道在 PowerShell 启动时需要运行配置文件脚本，否则添加此开关并没有什么坏处，而且很可能会防止错误。
*   `-NonInteractive`是一个*非常重要的*开关。基本上，这可以防止 powershell 提示用户输入（例如，对于需要确认或用户输入的 cmdlet）。这也意味着如果您的脚本确实需要确认/用户输入，它不会以非交互方式工作（即当用户未登录时）。
*   `-File`告诉 PowerShell 执行指定的文件。您也可以`-Command`改用并传入一些“字符串化”的 PowerShell 代码。

### 创建计划任务主体

这是正确创建计划任务的最重要步骤之一，无论用户是否登录，该任务都将运行。实际上，这一步是配置一个定时任务*运行无论用户是否登录都是***必需**的。

 *```
$TaskPrincipal = New-ScheduledTaskPrincipal -Id 'Author' `
                                            -UserId 'CONTOSO\AppTelemetry' `
                                            -LogonType Password `
                                            -RunLevel Limited 
```

让我们更详细地了解这些设置。

#### `-Id`

据我所知，这是一个自由格式的文本字段。任务计划程序 GUI 始终使用术语“作者”，但通常，您可以在此处使用任何您想要的东西。需要注意的是，计划任务可以包含许多不同的操作（最多 32 个）。并且 Actions 也有一个与之关联的“上下文”。任务调度程序自动将上下文分配给“作者”（对于简单的单动作任务）。该文档似乎表明您可以为计划任务提供多个主体，并且主体的 Id 与操作的上下文相关，将确定操作将在哪个主体下执行。对于我们的单动作任务，我们将只使用“作者”。

#### `-UserId`或者`-GroupId`

任务可以在用户帐户或属于指定组的任何用户下运行。请注意，使用组时，只有当组的用户登录时，计划任务才会运行。这是因为使用组 ID，您无法为任务指定密码。

在 99% 的情况下，你会想要`-UserId`像我上面那样使用。它不需要是完全合格的用户 ID。请注意，我们不会将密码与主体一起存储。那是后来的。

#### `-LogonType`

这可能是这个 cmdlet 最容易被误解的参数之一。[*LogonType*](https://docs.microsoft.com/en-us/windows/win32/taskschd/principal-logontype)的文档非常好。太糟糕了，PowerShell 帮助`New-ScheduledTaskPrincipal`没有链接到它（我对此提出了反馈）。

基本上，您可能永远不需要关心`S4U`登录类型。它在某些情况下可能是相关的（这就是它存在的原因），但对于您想要做的大多数事情，它可能不会。

`ServiceAccount`例如，如果计划任务将在用户帐户下运行`NT AUTHORITY\LOCALSYSTEM`，您将只使用登录类型。`NT AUTHORITY\SYSTEM`（还有第三个，但这个名字我现在没有想到。）由于我们的任务不是在系统帐户下运行的，所以这不是我们想要的值。

正如您可能猜到的，`Interactive`这意味着任务将在登录用户的上下文中运行。当任务需要启动 GUI 应用程序或任务操作是消息框以在系统上显示对话框时，这可能很有用。显然，这在我们的案例中没有用。还有`InteractiveOrPassword`一种将这种登录类型与我们想要的登录类型相结合的类型`Password`。所以我不会进一步讨论它。

现在，当然`Password`是我们想要的登录类型。这表示密码将与计划任务一起存储，该密码将用于登录用户（作为批处理作业），因此无论用户是否登录，任务都可以运行。是的，*这*是在任务计划程序 UI中检查*用户是否登录时运行复选框的值。*

#### `-RunLevel`

将此选项视为指定任务是否需要以提升的权限运行。当您运行命令（例如安装某些软件）时，用户访问控制 (UAC) 会启动并显示一个对话框，询问您是否要允许程序对您的计算机进行更改。您可能会点击`Yes`一半时间甚至没有阅读它。将此参数设置`Highest`为就像单击`Yes`UAC 对话框（或只是以提升的权限启动进程，即*以管理员身份运行*）。这是一件坏事，*除非*你知道你*需要*它。你应该总是从`Limited`，如果您发现计划任务不会在这些权限下运行，请提升。这就是我所做的。我从最小特权原则和使用`Limited`运行级别开始。

### 创建计划任务触发器

您可以有一个或多个触发器来触发计划任务。有不同的触发器类型。请参阅这些不同类型[的文档](https://docs.microsoft.com/en-us/windows/win32/taskschd/task-triggers)。我只做一个非常简单的：

```
$TaskTrigger = New-ScheduledTaskTrigger -Once -At ([DateTime]::Now.AddMinutes(5)) `
                                        -RepetitionInterval ( `
                                            [TimeSpan]::FromMinutes(5) `
                                        ) 
```

我只想要一个运行一次的任务，从现在开始 5 分钟，然后每 5 分钟运行一次。

### 任务设置集

如果我需要自定义其他一些任务设置，我可以使用`New-ScheduledTaskSettingsSet`. 我对默认值很好，所以我会跳过这个。但是任务计划程序文档详细说明了这一切，实际上，这些设置在大多数情况下都是不言自明的（除了*RunOnlyIfNetworkIsAvailable*，但它并不太难理解）。

### 创建计划任务

现在您可能会认为这是我们创建任务的地方，我们将在任务计划程序中看到它。错误的。但我们将创建一个计划任务对象。您**必须执行此步骤，否则您的任务将无法正确注册 - 最重要***的是，无论用户是否登录*，它都不会设置为Run 。

```
$Task = New-ScheduledTask -Description 'Collects application telemetry' `
                          -Action $TaskAction `
                          -Principal $TaskPrincipal `
                          -Trigger $TaskTrigger 
```

这里发生的只是我们正在创建一个计划任务实例。但它并没有被添加到任务调度器的任务列表中。这称为*注册*，我们接下来会这样做。如果你只是`$Task`在执行上述命令后输入你的 shell，你会注意到任务名称和路径将是空白的。您甚至不能将其指定为 call 的一部分`New-ScheduledTask`。同样，奇怪的是，这发生在注册期间。那么让我们谈谈*最重要的部分*，**注册**。

### 注册计划任务

*确实*，我可以简单地：

```
$Task = Register-ScheduledTask -TaskName 'Foo' -TaskPath `\` `
                               -Action $TaskAction -Trigger $TaskTrigger `
                               -User 'SomeUser' -Password '$uper53cr37' 
```

但这会导致任务以交互方式*运行（仅在用户登录时运行*）。这*不是*我们想要的。这就是我们在上面创建任务主体以及包含任务主体的任务实例的原因。

所以让我们注册我们的任务：

```
$Task = $Task | Register-ScheduledTask -TaskName 'Collect Telemetry' `
                                       -TaskPath '\Awesome App' `
                                       -User 'CONTOSO\AppTelemetry' `
                                       -Password 'ShhD0ntT3ll4ny0n3!' 
```

如您所见，是的，您**必须**提供密码。有多种方法可以以自动化的方式安全可靠地执行此操作 - 但可惜，对于演示目的来说并不那么容易。这里重要的部分是提供给`Register-ScheduledTask`. 指定的用户**必须**与我们创建的主体中指定的用户相同。显然，该用户的密码必须正确。**如果**您使用其他用户注册计划任务，则任务主体**将**更新为使用注册任务时指定的用户帐户运行任务。（这[在此处](https://docs.microsoft.com/en-us/windows/win32/taskschd/security-contexts-for-running-tasks)记录。）

这就是调度任务以运行无论用户是否使用 PowerShell 登录的全部内容。但在我结束之前还有一个话题要讨论：更新计划任务。

## 更新计划任务

信不信由你，这并不像它应该的那样直截了当。的语法`Set-ScheduledTask`没有正确记录。我忘记为上面的任务操作设置工作目录。（假设我需要在某处写入文件，但写入文件的代码不使用绝对路径。）让我们修复操作并更新任务。

这是正确执行此操作的方法。您可以使用不同的方法`Set-ScheduledTask`，但我发现其他方法可以锁定用户帐户或根本不起作用（即给您一个错误）。这并不是说那些其他方式是错误的，而只是对于这种特殊的变化，这就是*每次都*对我有用的方法：

```
$Task = Get-ScheduledTask -TaskName 'Collect Telemetry' -TaskPath '\Awesome App'
$Task.Actions[0].WorkingDirectory = 'C:\AwesomeApp'
$Task | Set-ScheduledTask -User 'CONTOSO\AppTelemetry' -Password 'ShhD0ntT3ll4ny0n3!' 
```

同样，重要的是使用注册任务时使用的相同用户和密码。如果您使用不同的用户名/密码，那么任务主体也**将**被更新。这*可能*不是你想要的。

这就是在 Powershell 中使用计划任务的全部内容。

## 用于`schtasks`调试帮助

当您在通过 PowerShell 创建计划任务时遇到问题时，一种帮助自己的方法是通过 GUI 在本地计算机上创建类似的计划任务。然后，您可以使用该`schtasks`命令查询您通过 GUI 创建的计划任务，并将其与您通过 PowerShell 创建的计划任务进行比较。要使用`schtasks`，例如：

```
# To get the XML for the task:
schtasks /query /tn '\My Task Path\MyTask' /xml ONE

# To get a nice formatted list of the task properties:
schtasks /query /tn '\My Task Path\MyTask' /v /fo LIST 
```

您还可以通过 PowerShell 使用`Export-ScheduledTask`. [您可以在此处](https://docs.microsoft.com/en-us/powershell/module/scheduledtasks/?view=windowsserver2022-ps)找到所有 PowerShell 计划任务 cmdlet 的文档。文档没问题。其中一些是误导性的，大部分是不完整的（即它假设您除了 PowerShell cmdlet 本身之外还了解任务计划程序）。有关任务计划程序的文档，它的 COM 接口、XML 模式等，可以在[这里](https://docs.microsoft.com/en-us/windows/win32/taskschd/task-scheduler-start-page)找到。

# 结论

我希望这对某人有所帮助，因为我花了很长时间才弄清楚这一切。主要是，很多，“为什么即使它说它成功了，这个任务也没有做*任何事情？”* 或“为什么帐户一直被锁定？” （错误的登录类型、密码或用户权限分配，或全部 3 个！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-14T06:28:06.760

尝试在 Powershell 上创建计划任务以将文件复制到映射驱动器时，我遇到了类似的挑战。

**这是我解决它的方法**：

首先，我必须使用 UNC 路径来指定映射驱动器的路径：

```
Get-ChildItem -Path "C:\MyFiles\*" -Include *.jpg -Recurse | Copy-Item -Destination "\\192.168.54.20\CopiedFiles" 
```

接下来，我使用以下命令设置计划作业：

```
$TaskName = "FileSync"
$Description = "This task will run periodically to sync .fin files from a specified source directory to a specified destination directory"
$ScriptPath = "C:\Users\my_userDesktop\file_sync.ps1"
$UserAccount = "COMP1\my_user"
$Action = New-ScheduledTaskAction -Execute "PowerShell.exe" -Argument "-ExecutionPolicy Bypass -File $ScriptPath"
$Principal = New-ScheduledTaskPrincipal -UserID $UserAccount -LogonType ServiceAccount
$Trigger = New-ScheduledTaskTrigger -Once -At (Get-Date) -RepetitionInterval (New-TimeSpan -Minutes 1) -RepetitionDuration ([System.TimeSpan]::MaxValue)
Register-ScheduledTask -TaskName $TaskName -Action $Action -Description $Description -Trigger $Trigger -Principal $Principal 
```

**注意**：`$Principal`无论用户是否登录，都允许任务运行对于要同步到映射驱动器的计划作业非常重要。

就这样。

**我希望这有帮助**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-15T20:32:05.813

还控制运行级别检查：

**运行级别**

> 指定运行与主体关联的任务所需的特权级别。

例如：“最高”或“有限”*

# java - 静态分析从java中的根目录中找出所有引用的类

> ID：13965998
> 
> 赞同：3
> 
> 时间：2012-12-20T05:41:55.110
> 
> 标签：java, static-analysis, object-graph

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:55:00.470

depfind 工具有助于跟踪依赖关系并采取一些措施。它可以找到出站依赖项。

> 仅显示出站依赖项
> 
> 出站依赖关系向您显示给定的编程元素依赖于谁。在划分编程元素并确定给定类需要哪些其他类才能运行时，它们非常有用。Dependency Finder 使用文本符号来显示它们：
> 
> ```
> programming element
>     --> dependable 1
>     --> dependable 2
>         ... 
> ```
> 
> 当存在大量依赖项时，无论是因为图非常大还是元素高度连接，都可以过滤掉其他依赖项，使出站的依赖项突出并更易于阅读。

[http://depfind.sourceforge.net/Manual.html#ShowingOnlyOutboundDependencies](http://depfind.sourceforge.net/Manual.html#ShowingOnlyOutboundDependencies)