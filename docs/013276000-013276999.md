# StackOverflow 问答 13276000-13276999

# ruby-on-rails-3 - 来自 URL 参数的 Rails 时区

> ID：13276001
> 
> 赞同：0
> 
> 时间：2012-11-07T18:37:47.457
> 
> 标签：ruby-on-rails-3, timezone, params

我正在尝试允许未登录的用户更改一天中的时间显示，似乎最好的方法是通过 url 中的参数。我有：

```
class ApplicationController < ActionController::Base
  around_filter :use_time_zone

  private
    def use_time_zone(&block)
      Time.use_zone((params[:time] || Time.zone), &block)
    end
end 
```

这适用于“www.mysite.com?time=Hawaii”之类的内容

但是，它无法处理一些更复杂的问题（例如“东部时间（美国和加拿大）”），而且在地址栏中看起来很糟糕。

有没有办法简单地将UTC偏移与DST（或任何其他缩写形式，如'PDT'）和参数一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:20:07.760

我通过解决方法解决了这个问题，希望其他人可能会发现它有用。

我创建了一个助手来根据时区名称的前 2 个字母生成键/值对：

```
# helpers/application_helper.rb
(...)
def tz_mapping
  tzs = Hash.new
  ActiveSupport::TimeZone.us_zones.reverse.each do |tz|
    tzs[tz.name.to_s.first(2).downcase] = tz
  end
  tzs
end 
```

然后我可以通过参数传递这些缩写并在控制器中获取它：

```
# controllers/application_controller.rb
(...)
around_filter :use_time_zone

private

def use_time_zone(&block)
  zones = { 'ha' => 'Hawaii',
            'al' => 'Alaska',
            'pa' => 'Pacific Time (US & Canada)',
            'ar' => 'Arizona',
            'mo' => 'Mountain Time (US & Canada)',
            'ce' => 'Central Time (US & Canada)',
            'ea' => 'Eastern Time (US & Canada)',
            'in' => 'Indiana (East)' }

  Time.use_zone((zones[params[:tz]] || Time.zone), &block)
end 
```

所以一个简单的视图可能看起来像

```
<% tz_mapping.each do |k,v| %>
  <%= link_to v, root_path + "?tz=#{k}" %><br />
<% end %> 
```

它提供了每个场景的链接，并且可以根据需要使用。

# c# - 在线角点上的拇指不会重新定位点

> ID：13276003
> 
> 赞同：5
> 
> 时间：2012-11-07T18:37:53.553
> 
> 标签：c#, wpf

我正在开发一个绘图应用程序，可以在其中绘制各种类型的线条。在线角点上，我使用 itemsControl 放置了一个拇指。当用户左键单击并拖动鼠标时，拇指应该移动该角点。现在发生的情况是，当我这样做时，点和拇指移动了一点，但随后它立即失去了鼠标捕获并且不再移动。当我调试第一个正确触发的 dragdelta 事件时，有一个完整的可视树从发送拇指到 itemscontrol 及其他位置，但有时当它下次触发时，拇指的位置尚未更新，并且包含内容呈现器在可视化树中有 null 父级。

这是与线拇指点相关的 xaml 部分：

```
<ItemsControl x:Name="PART_LineRelocate" ItemsSource="{Binding pointsObservableCollection}"  Visibility="Collapsed" >
    <ItemsControl.ItemTemplate>
        <DataTemplate DataType="{x:Type s:LineCornerPoint}" >
           <Grid>
              <c:PointRelocateThumb VerticalAlignment="Center" HorizontalAlignment="Center" Focusable="True"  x:Name="PART_PointRelocateThumb" Cursor="Hand"/>
           </Grid>
        </DataTemplate>
     </ItemsControl.ItemTemplate>
     <ItemsControl.ItemsPanel>
         <ItemsPanelTemplate>
            <Canvas IsItemsHost="True" />
         </ItemsPanelTemplate>
     </ItemsControl.ItemsPanel>
     <ItemsControl.ItemContainerStyle >
         <Style > 
            <Style.Triggers>
                  <DataTrigger Value="BrokenLinkLine" Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type s:ToolLine}}, Path=indicator}" >
                      <Setter  Property="Canvas.Left" Value="{Binding Corner.X}" />
                      <Setter Property="Canvas.Top" Value="{Binding Corner.Y}"   />
                  </DataTrigger>

                     ....More of these datatriggers for the different types of lines
              </Style.Triggers>
         </Style>
   </ItemsControl.ItemContainerStyle> 
```

PointRelocateThumb 的代码：

```
 public PointRelocateThumb()
    {

        base.DragDelta += new DragDeltaEventHandler(this.PointRelocateThumb_DragDelta);

    }
    void PointRelocateThumb_DragDelta(object sender, System.Windows.Controls.Primitives.DragDeltaEventArgs e)
    {
        PointRelocateThumb prt = (PointRelocateThumb)sender;
        LineCornerPoint lcp = (LineCornerPoint)prt.DataContext;
        Point thumbPoint = new Point(Canvas.GetLeft((ContentPresenter)prt.TemplatedParent), Canvas.GetTop((ContentPresenter)prt.TemplatedParent));
        ToolLine toolLine = null;
        DrawingCanvas designer = null;
        ItemsControl itemsControl = ItemsControl.ItemsControlFromItemContainer(prt.TemplatedParent);
        if (itemsControl != null)
            toolLine = itemsControl.DataContext as ToolLine;
        if (toolLine != null)
            designer = VisualTreeHelper.GetParent(toolLine) as DrawingCanvas;
        if (toolLine != null && designer != null && toolLine.IsSelected)
        {
            thumbPoint = new Point(thumbPoint.X + Canvas.GetLeft(toolLine) + 3.5, thumbPoint.Y + Canvas.GetTop(toolLine) + 3.5);

            toolLine.undoBounding();
            if (System.String.Compare(toolLine.indicator, "BrokenLinkLine") == 0
                || System.String.Compare(toolLine.indicator, "LinkLine") == 0
                || System.String.Compare(toolLine.indicator, "OrthogonalLinkLine") == 0
                || System.String.Compare(toolLine.indicator, "BrokenLine") == 0
                || System.String.Compare(toolLine.indicator, "Line") == 0
                || System.String.Compare(toolLine.indicator, "Polygon") == 0)
            {
                if (toolLine.pathFigure.StartPoint.Equals(thumbPoint))
                {
                    toolLine.pathFigure.StartPoint = new Point(modifyingToolLine.pathFigure.StartPoint.X + e.HorizontalChange, modifyingToolLine.pathFigure.StartPoint.Y + e.VerticalChange);                    }
                else
                {
                    foreach (LineSegment ls in toolLine.pathSegmentCollection)

                    {
                        if (ls.Point.Equals(thumbPoint))
                        {
                            ls.Point = new Point(ls.Point.X + e.HorizontalChange, ls.Point.Y + e.VerticalChange);
                            break;
                        }

                    }
                }
            }
           toolLine.regenerateBoundingItem();
        }
        e.Handled = true;
    } 
 } 
```

}

Tooline 是线类。撤消绑定的作用是它使 toolLine 将 Canvas.Left 和 Canvas.Top 设置为 0，但缩放这些点以使它们仍然位于同一点 - 即通过添加旧的 Canvas.Left 和 Canvas。工具线的最高值到线中的每个点。

重新生成边界项的代码如下：

```
public void regenerateBoundingItem()
{
     //Following line of code just regenerates the underlying path for the toolLine from the 
     //new pathsegmentCollection and pathFigure start point.  
    regenerateThisLine();
    double leftMostPoint = double.MaxValue, topMostPoint = double.MaxValue, bottomMostPoint = double.MinValue, rightMostPoint = double.MinValue;
    getBoundingPoints(ref leftMostPoint, ref topMostPoint, ref bottomMostPoint, ref rightMostPoint);

     //subtracts leftMost point and topMostPoint from each point in the line
     scaleLinePoints(leftMostPoint, topMostPoint); 
     Canvas.SetLeft(this, leftMostPoint);
     Canvas.SetTop(this, topMostPoint);
     this.Width = rightMostPoint - leftMostPoint;
     this.Height = bottomMostPoint-topMostPoint;
      regenerateObservableCollection();
      regenerateThisLine();
}
private void regenerateObservableCollection()
{
    if (this.pointsObservableCollection == null)
        this.pointsObservableCollection = new ObservableCollection<LineCornerPoint>();
    this.pointsObservableCollection.Clear();
    LineCornerPoint startPt = new LineCornerPoint(new Point(this.pathFigure.StartPoint.X - 3.5, this.pathFigure.StartPoint.Y - 3.5));
    this.pointsObservableCollection.Add(startPt);
    if (System.String.Compare(indicator, "BrokenLine") == 0
        || System.String.Compare(indicator, "BrokenLinkLine") == 0
        || System.String.Compare(indicator, "LinkLine") == 0
        || System.String.Compare(indicator, "Polygon") == 0
       || System.String.Compare(indicator, "Line") == 0)
    {
        foreach (LineSegment ls in pathSegmentCollection)
        {
            LineCornerPoint pt = new LineCornerPoint(new Point(ls.Point.X - 3.5, ls.Point.Y - 3.5));
            this.pointsObservableCollection.Add(pt);
         }
     }
} 
```

PointRelocateThumb 的模板是一个宽度和高度为 7 的椭圆 - 这解释了为什么我必须将所有拇指位置偏移 3.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:25:49.360

问题在于 regenerateObserableCollection

我不得不修改包含在 observable 集合中的 LineCornerPoints，而不是清除和销毁所有 LineCornerObjects。

# algorithm - 图论：集团概念

> ID：13276005
> 
> 赞同：0
> 
> 时间：2012-11-07T18:38:07.287
> 
> 标签：algorithm, graph-algorithm, clique, clique-problem

我试图解决一个基本的集团问题，但我坚持以下几点：

*   `what is is the minimum size of the largest clique in any graph with N nodes and M edges`

*   `To Find the largest clique in a graph`

请告诉我以上两种说法的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:39:44.230

第一个问题是关于所有带有`N`节点和`M`边的图的集合。第二个问题似乎与特定图表有关（尽管它似乎与上下文无关）。

最好在[https://math.stackexchange.com/上问这个问题](https://math.stackexchange.com/)

# asp.net - 使用 .Net 访问 Adyen Web 服务

> ID：13276006
> 
> 赞同：1
> 
> 时间：2012-11-07T18:38:08.213
> 
> 标签：asp.net, web-services, soap, wsdl

我正在尝试对我的 Web 应用程序（C# .Net 4）实施 Adyen 定期付款，但对 Web 服务相对较新，我不确定我是否以正确的方式进行操作。

简而言之，支付提供商为此目的公开了一个 WSDL url (https://pal-test.adyen.com/pal/Recurring.wsdl)，我在 Visual Studio 2010 中将其添加为服务参考（即添加服务参考>高级> 添加网页参考）

然后我继续创建了一个测试页面，以确保连接正常运行（参见下面的代码）并检索我之前创建的测试订阅的详细信息。但是，在执行“listRecurringDetails”操作时出现异常，错误消息是“对象引用未设置为对象的实例。”我不知道哪里出错了。

欢迎任何反馈。

#

```
public partial class Store_ServiceTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Recurring proxy = new Recurring();
        ICredentials usrCreds = new NetworkCredential("[username]", "[password]");
        proxy.Credentials = usrCreds;

        try
        {
            RecurringDetailsRequest thisUserDetail = new RecurringDetailsRequest();
            thisUserDetail.merchantAccount = "[some reference]";
            thisUserDetail.shopperReference = "[some reference]";
            thisUserDetail.recurring.contract = "RECURRING";

            RecurringDetailsResult recContractDetails = proxy.listRecurringDetails(thisUserDetail);
            string createDate = recContractDetails.creationDate.ToString();
        }
        catch (Exception ex)
        {
            string err = ex.Message;
        }
        finally
        {
            proxy.Dispose();
        }        
    }
} 
```

调用堆栈

> App_Web_4h0noljo.dll!Store_ServiceTest.Page_Load(object sender, System.EventArgs e) 第 38 行 C#

输出窗口

mscorlib.dll 中发生“System.Threading.ThreadAbortException”类型的第一次机会异常 mscorlib.dll 中发生“System.Threading.ThreadAbortException”类型的异常但未在用户代码中处理 类型“System.在 App_Web_4h0noljo.dll 中发生 NullReferenceException' 线程 '' (0x15d0) 已退出，代码为 0 (0x0)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:10:40.317

你的代码看起来不错。关键是将循环服务添加为服务引用而不是 Web 引用。如果应用程序配置文件包含以下内容，它应该可以工作：

```
<system.serviceModel>
 <bindings>
     <basicHttpBinding>
         <binding name="AdyenHttpBinding">
           <security mode="Transport">
             <message clientCredentialType="UserName"/>
             <transport clientCredentialType="Basic" realm="Adyen PAL Service Authentication"> <!--Adyen PAL Service Authentication-->
               <extendedProtectionPolicy policyEnforcement="Never"/>
             </transport>
           </security>
         </binding>
     </basicHttpBinding>
 </bindings>
 <client>
   <endpoint address="https://pal-test.adyen.com/pal/servlet/soap/Payment" binding="basicHttpBinding" bindingConfiguration="AdyenHttpBinding" contract="Adyen.Payment.PaymentPortType" name="PaymentHttpPort"/>
   <endpoint address="https://pal-test.adyen.com/pal/servlet/soap/Recurring" binding="basicHttpBinding" bindingConfiguration="AdyenHttpBinding" contract="Adyen.Recurring.RecurringPortType" name="RecurringHttpPort"/>
 </client>
</system.serviceModel> 
```

亲切的问候， Sander Rasker (Adyen)

# matlab - 如何将两个图形文件合并为一个文件

> ID：13276009
> 
> 赞同：6
> 
> 时间：2012-11-07T18:38:20.507
> 
> 标签：matlab, matlab-figure

这应该是一个简单的解决方案的问题，但我仍然无法找到一个。

假设我有 2 个 matlab 图形`fig1.fig`，`fig2.fig`我想在同一个绘图窗口中加载并显示它们。

我应该怎么办？

我的意思是，我很确定我可以使用一些低（er）级图形命令来完成任务，该命令从一个图像中提取内容并将它们放在第二个图像中，但是我不能相信没有任何高级功能（`load fig2 on top of fig1`）这样做...比较 2 个地块（不幸的是已经保存）是一项非常常见的任务，我会说。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T18:54:02.793

不清楚是要从图中提取数据并比较数据，还是要将两个图的图合并为一个图。

这是您将两个数字合二为一的方法（如果那是您想要做的）..

首先加载数字：

```
fig1 = open('FigureFile1.fig');
fig2 = open('FigureFile2.fig'); 
```

从图中获取坐标区对象

```
ax1 = get(fig1, 'Children');
ax2 = get(fig2, 'Children'); 
```

现在将 hangle 图形对象从 复制`ax2`到`ax1`。*如果您的图形只有一个轴，则不需要循环*

```
for i = 1 : numel(ax2) 
   ax2Children = get(ax2(i),'Children');
   copyobj(ax2Children, ax1(i));
end 
```

**注意**此示例假定您的图形具有相同的轴数，并且您希望将对象从第二个图形的第一个轴复制到第一个图形的第一个轴。如果轴索引未对齐，则由您决定正确的索引。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T19:11:52.093

斯莱顿给出的答案很好。这是另一个提示：如果您在两个单独的 Matlab 图形窗口中打开了两个绘图，请不要忘记您可以点击复制正确的绘图。通过单击 Matlab 图形窗口中的箭头指针，然后单击绘制的线来执行此操作。复制（绘制线、文本框等）对象。然后，同样在另一个 Matlab 图形窗口中选择轴并粘贴。

我给出了这个“愚蠢”的解决方案，因为它已被证明在协作会议中很有用。在某人（例如您的顾问）面前点击复制可以准确传达正在比较的曲线，并且它可以防止您不得不在其他人面前启动代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-01T21:40:13.807

对于每个绘图，您还可以转到菜单中的文件生成代码。然后将两者复制并粘贴到同一个 mfile 中，中间有一个“保留”，并更改与外观相关的细节。然后运行新的 m 文件。

# javascript - Parse.com 框架（基于 Backbone）model.set 在遍历集合时不起作用

> ID：13276010
> 
> 赞同：1
> 
> 时间：2012-11-07T18:38:22.707
> 
> 标签：javascript, backbone.js, parse-platform

当循环遍历集合中的结果时，当我立即尝试使用 get 检查值时，设置模型属性似乎并没有坚持下去。我错过了什么？

```
collection.each(function(model){

    var objectId = model.id.toString();

    model.set({'objectId':objectId}, {silent:true});                    

    console.log('model.id = ' + model.id + ' and model.get("objectId")' + model.get('objectId'));

    // model.get('objectId') returns 'undefined' but model.id returns proper id

}); 
```

如代码中所述， model.get('objectId') 返回 'undefined' 但 model.id 返回正确的 id ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:42:55.017

以下代码

```
var TestCollection = Backbone.Collection.extend({
    model: Backbone.Model
});

var collection = new TestCollection;
collection.reset([{id: 1}, {id: 2}, {id: 3}]);

collection.each(function(model) {
  var objectId = model.id.toString();
  model.set({'objectId': objectId}, {silent: true});                    
  console.log('model.id %s  and model.get("objectId") %s', model.id, model.get('objectId'));
}) 
```

输出

```
model.id 1  and model.get("objectId") 1 
model.id 2  and model.get("objectId") 2 
model.id 3  and model.get("objectId") 3 
```

因此，我假设实际问题隐藏在您的其余代码中。您是否覆盖了标准的 Backbone 行为？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:45:46.120

我发现 Parse 框架不允许您设置“objectId”的属性。

# java - 从具有一定概率的字符串列表中生成随机字符串

> ID：13276014
> 
> 赞同：0
> 
> 时间：2012-11-07T18:38:48.533
> 
> 标签：java

我正在尝试从 java 中具有所需概率的数组字符串列表生成随机字符串。我能够生成随机字符串但不知道如何处理概率。我必须运行程序几乎 25-30 次

```
Probability for abc is 10%
           for def  is 60%
           for ghi is  20%
           for danny is 10% 
```

但我无法做到这一点。

```
 import java.util.*;

public class newyork
{
public static void main(String[]args) throws Exception
{ 
  // othr fun
    public static  void abc()
    {
    //Strings to display
        String [] random = {"abc","def", "ghi","danny"};
   //Pick one by one
        String no1= random[(int) (Math.random()*(random.length))];
        String no2 = random[(int) (Math.random()*(random.length))];
        String no3 = random[(int) (Math.random()*(random.length))];

  //print randomly generated strings
       System.out.println("Here you go : " +  no1 + " " +  no2 + " " + no3 + ");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:48:42.763

基本上，要使用概率，您会生成一个介于 0 和 100 之间的随机数，不包括 100。

然后，依次测试每个字符串，添加概率：

```
String s;
if (number < 10) {s = "abc";}
else if (number < 70) { s = "def";}
else if (number < 90) {s = "ghi";}
else {s = "danny";} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:49:08.447

伪代码：

```
Generate a random integer n between 0 and 9
if (n==0)        return "abc"
else if (n <= 6) return "def"
else if (n <= 8) return "ghi"
else             return "danny" 
```

有很多方法可以做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:49:01.117

这可能不是最好的解决方案：

```
int number = (int) Math.random() * 100;
String myString;
if(number <= 10)
     myString = "abc";
else if(number <= 20)
     myString = "danny";
else if(number <= 40)
     myString = "ghi";
else
     myString = "def"; 
```

所以从 0:10 返回 abc，10:20 返回 danny，20:40 返回 ghi，40:100 返回 def。这个解决方案对于多个字符串/百分比来说会很糟糕，我相信有更好的方法可以做到这一点，但不记得了（它在我的舌尖上。）

# git - 取消暂存所有文件并放弃合并

> ID：13276018
> 
> 赞同：29
> 
> 时间：2012-11-07T18:38:57.070
> 
> 标签：git

我正在运行一个简单的合并并期望没有冲突，然后我跑了`git merge my_dev_branch`

但是，我遇到了一个看起来很难解决的合并冲突，这让我觉得我不清楚我的分支历史。我不想解决冲突，而是想放弃合并并回到以前的位置。

两个问题：

1.  我是否认为我可以通过根据[这个问题](https://stackoverflow.com/questions/4225363/how-to-unstage-and-discard-in-a-single-command-in-git)`git checkout HEAD <filename>`在每个文件上运行来清理我的暂存区域，这相当于放弃合并？
2.  有没有办法可以在一个命令中做到这一点？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-11-07T18:47:00.407

试试`git merge --abort`。好用，嗯？

# ipad - 为更大的 iPad 设计的应用程序在 iPad mini 上的外观如何

> ID：13276019
> 
> 赞同：2
> 
> 时间：2012-11-07T18:38:57.990
> 
> 标签：ipad, compatibility, ipad-mini

我正在为 9.7 英寸 iPad 设计一个应用程序。我想知道是否有人对为更大的 iPad 设计的应用程序在 iPad mini 上的外观有任何经验？它是否会自动缩小，以某种方式在较小的屏幕上完全可用？还是我应该考虑任何因素？我还没有下载最新的 Xcode，所以我不知道它是否有 iPad mini 模拟器。但我担心的是物理设备，即使 Xcode 有 iPad mini 模拟器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T04:06:04.103

从应用程序的角度来看，iPad mini 与 iPad 1 和 iPad 2 相同。屏幕具有相同数量的像素 - 1024x768。

当然，iPad mini 上的屏幕体积更小。如果您需要绘制具有特定物理尺寸的东西，这通常只是一个问题。例如，如果您需要以英寸或厘米为单位显示标尺。否则不是问题。

Xcode 中没有单独的 iPad mini 模拟器。没有必要一个。屏幕以 1024x768 呈现。这适用于所有非视网膜 iPad，包括 mini。

从可用性的角度来看，与其他 iPad 相比，在 iPad mini 上运行的 iPad 应用程序、按钮和文本会因为屏幕更小而略小。有些人可能会争辩说，某些应用程序会受益于使用更大的字体或更大的触控区域。但实际上这应该不是问题。iPad mini 具有与 iPhone 和 iPod touch 相同的 DPI。如果人们可以正常使用这些设备，那么他们可以使用 iPad mini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:36:16.010

在 iPad 上测试您的设计将如何在 iPad Mini 上呈现的调试提示：在应用程序的某处创建一个按钮并将目标添加到以下方法：

```
#ifdef SIMULATE_MINI
-(void)toggleMini{
  static BOOL isMini = NO;
  static float fl = 7/9.7f;
  isMini = !isMini;

  [myWindow setTransform:
   isMini?CGAffineTransformMakeScale(fl,fl):
   CGAffineTransformMakeScale(1,1)
   ];
}
#endif 
```

# html - 绝对 URL 的行为类似于相对 URL

> ID：13276021
> 
> 赞同：4
> 
> 时间：2012-11-07T18:39:02.657
> 
> 标签：html, url, href

当我有一个像[http://site.com](http://site.com)这样的链接时，点击它就可以转到那个 URL。

但是当链接只是 时`www.site.com`，它会将此 URL 添加到父网站，因此不会转到该 URL。

因此，单击`<a href='www.site.com'>site</a>`会在浏览器任务栏中创建：`www.parentsite.com/www.site.com`.

如何在不使用的情况下解决此问题`preg_replace`？我对这个游戏相当陌生。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T18:41:01.853

Because `www.parentsite.com` is interpreted as a *relative address*, like for example `index.htm`, as opposed to an absolute URL which consists of protocol, hostname, and path.

When I'm on `example.com`'s front page....

*   `contact.html` is a relative address, the absolute end result will be `http://example.com/contact.html` (the browser does this as an internal calculation)

*   `images/` is a relative address, resulting in `http://example.com/images/`

*   `www.xyz.com` results in `http://example.com/www.xyz.com`

You need to prefix the protocol (eg. `http://`) to make the browser understand that you mean a full URL, and treat it accordingly.

[Here's](http://msdn.microsoft.com/en-us/library/bb208688%28v=office.12%29.aspx) a background info article on the issue on MSDN.

# c# - 带有日期的复杂 LINQ to SQL 查询

> ID：13276024
> 
> 赞同：3
> 
> 时间：2012-11-07T18:39:10.747
> 
> 标签：c#, sql, linq

我在我的 C# 项目中使用 LINQ to SQL 构建查询，但我遇到了一些问题......

我想要做的是选择像今天一样的最后 4 天（例如，星期五），所以如果我们在 28 日星期五，我想查询：星期五 21、14、7... 最后四个星期五，但不是今天。

**这很简单，我已经做到了，但这是复杂的部分，我**不想查询我设置的异常，例如月末，每个月的第 28 天到第 1 天，所以假设我想查询这个（十月，星期五）：

今天是26号星期五，我想查询：

19、12、5 和 9 月 28 日（从现在起的第四个星期五），但正如我所说，28 日是月底，所以我需要返回 9 月 21 日，这是最后一个星期五，而且不是月底……我假期也有同样的问题，但我想如果我能处理好月底，我可以处理它们......

我希望我已经解释了好让你理解我想要什么......这是我的查询，它正在工作但无法处理异常。（字段 b.day 是每天的 Id，8 表示月末，7 表示假期）

```
var values =
    from b in dc.MyTable
    where // This means end of month
    b.day != 8

    // This triggers to query last 4 days
    && b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-28)
    || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-21)
    || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-14)
    || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-7)
    orderby b.id descending
    group b.valor by b.hora_id into hg
    orderby hg.Key descending

    select new
    {
        Key = hg.Key,
        Max avg = System.Convert.ToInt32(hg.Average() + ((hg.Average() * intOkMas) / 100)),
        Min avg = System.Convert.ToInt32(hg.Average() - ((hg.Average() * intOkMenos) / 100))
    }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:01:29.480

在尝试查询之前，您应该准备好要检索的日期列表：

```
// Get the last four days excluding today on the same weekday
var days = Enumerable.Range(1, 4).Select(i => DateTime.Today.AddDays(i * -7)); 
```

然后删除您不想要的任何日子：

```
// Remove those pesky end-of-month days
days = days.Where(d => d.Day < 28 && d.Day > 1); 
```

当您准备好要检索的日期列表后，您才应该执行查询：

```
from b in dc.MyTable
where days.Contains(b.date)  // Translated to SQL: date IN (...)
... 
```

**编辑：**正如您在评论中提到的，即使在您执行任何过滤之后，您也需要总共四天。因此，只需生成更多天数并取前四天：

```
var days = Enumerable.Range(1, int.MaxValue - 1)
                     .Select(i => DateTime.Today.AddDays(i * -7))
                     .Where(d => d.Day < 28 && d.Day > 1)
                     .Take(4); 
```

由于 LINQ（通常是枚举器）的工作方式，只会计算四天加上任何跳过的天数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:43:00.843

我强烈建议在检索您的行之后编写您的异常代码（本月的最后一个星期五），因为这种逻辑对于 LINQ 语句来说似乎太复杂了。不是检索最后 4 天，而是检索最后 5 天。删除每个相应月份的最后一个星期五。如果仍有 5 行，请删除最后一行。

**更新**

```
var values1 =
  from b in dc.MyTable
  where // This means end of month
  b.day != 8

  // This triggers to query last 4 days
  && b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-28)
  || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-21)
  || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-14)
  || b.date == Convert.ToDateTime(last.ToString("dd/MM/yyy")).AddDays(-7)
  orderby b.id descending
  select b;

//Do stuff with values

var values2 = from b in values2
  group b.valor by b.hora_id into hg
  orderby hg.Key descending

  select new
  {
    Key = hg.Key,
    Max avg = System.Convert.ToInt32(hg.Average() + ((hg.Average() * intOkMas) / 100)),
    Min avg = System.Convert.ToInt32(hg.Average() - ((hg.Average() * intOkMenos) / 100))
  }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T20:04:20.060

基于 Allon Guralnek 的回答，我会稍微修改一下：

首先，构建一个无限日期生成器：

```
public IEnumerable<DateTime> GetDaysLikeMe(DateTime currentDate)
{
    DateTime temp = currentDate;
    while(true)
    {
        temp = temp.AddDays(-7);
        yield return temp;
    }
} 
```

然后，您可以通过限制仅满足您的附加条件的日期来利用延迟执行：

```
GetDaysLikeMe(DateTime.Now).Where(dt => /* dt meets my criteria */).Take(4) 
```

然后，您可以使用生成的此列表在您的 LINQ to SQL 中查询，如上面建议的 Allon Guralnek：

```
from b in dc.MyTable
where days.Contains(b.date)  // Translated to SQL: date IN (...)
... 
```

这样做的好处是您可以为可接受的日期指定额外的谓词，并且仍然可以返回至少 4 个日期。只要确保对无限日期生成器进行一些边界检查，以防您的谓词之一由于某种原因总是返回 false（这意味着生成器永远不会退出）。

IE：`while(temp > currentDate.AddYears(-1))`

# c++ - 使用 THIS 或成员范围从对象本身访问成员

> ID：13276029
> 
> 赞同：3
> 
> 时间：2012-11-07T18:39:22.383
> 
> 标签：c++, class

访问作为方法类的一部分的成员数据/函数的正确方法是什么？似乎有3种手段：

```
class test{
    private:
        int variable;
    public:
        void setVariable(int value) {
            variable = value;        // method 1, using the variable name directly
            this->variable = value;  // method 2, via pointer dereference of 'this'
            test::variable = value;  // method 3, via scope operator
        }
}; 
```

据我所知，它们似乎都有效。它们是等价的吗？除了样式/一致性之外，是否有理由使用另一种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:43:36.837

正如您所提到的，除了样式和一致性之外，有时您还必须使用特定的语法来消除歧义。

“方法 2”可用于消除局部变量和类成员之间的歧义。

“方法 3”可用于消除类层次结构中不同位置的同名字段之间的歧义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T19:15:19.247

一般来说，这并不重要，因此更简单的选项`member = value;`是首选。在某些情况下，局部变量可能存在歧义，您可以使用`this->`前缀进行限定，但更好的方法是完全避免歧义。

然而，在某些极端情况下它确实很重要。在处理虚函数时，使用限定名称 ( `type::member`)**禁用运行时调度**并确保`type`调用该级别的最终覆盖器：

```
struct base {
   virtual int f() { return 1; }
};
struct derived : base {
   virtual int f() { return 2; }
   void g() {
      std::cout << f() << "\n";
      std::cout << derived::f() << "\n";
   }
};
struct mostderived : derived {
   virtual int f() { return 3; }
};
int main() {
   mostderived d;
   d.g();            // 3 2
} 
```

在处理模板类和继承时，查找分两个阶段执行。在第一阶段，必须解析非依赖名称。非限定名称是非依赖名称，因此在某些情况下，您需要使用`this->`or来限定`type::`，并且上述区别仍然适用。额外的资格用于**使名称依赖**：

```
template <typename T>
struct derived : T {
   void g() {
      // std::cout << f() << "\n";    // Error, cannot resolve f() [*]
      this->f();                      // Ok, pick final overrider at runtime 
      derived::f();                   // Ok, pick overrider here: base::f()
   }
};
struct base {
   virtual int f() { return 1; }
};
struct mostderived : derived<base> {
   virtual int f() { return 3; }
};
int main() {
   mostderived d;
   d.g();                             // 3, 1
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:43:30.127

*   **方法一：**这是常见的做法。
*   **方法2**：这是最好和最一致的方法。它使阅读和理解正在发生的事情变得非常清楚。
*   **方法3：**我从未见过在现实世界的代码中完成过。

**附带说明**：当使用**方法 1**时，如果函数参数和成员变量存在命名冲突，则函数参数将用于成员变量。

如果我们有：

```
void setVariable(int variable) {
    variable = variable;        // method 1, this does not change the member variable.
    this->variable = variable;  // method 2, via pointer dereference of 'this'
    test::variable = variable;  // method 3, via scope operator
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:45:06.517

对于对象内部的代码，它通常没有区别，因此使用它`variable = value;`并完成它通常是最干净的。

有时在模板中，您可能会遇到仅使用变量名本身就模棱两可的情况，并`this->variable`消除了这种模棱两可的情况——但这非常罕见，我绝对不会*定期*`this->everything`使用，因为它可能有用一次在很长一段时间内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T18:44:03.273

指针 this 通常用于在类的重载运算符中进行比较。如果在函数中传递的参数与对象本身相同，则它的用途之一可能是：

```
class CDummy {
  public:
    int isitme (CDummy& param);
};

int CDummy::isitme (CDummy& param)
{
  if (&param == this) return true;
  else return false;
} 
```

*这*也用于返回指向对象本身的指针

```
ClassEx ClassEx::Func(//params)
{
    //code
    return *this;
} 
```

至于正常比较，除非您正在检查值，否则使用会更有效，`value`而不是更有效。`this->value``this->`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T19:45:49.003

并添加到上述答案中：一些代码样式喜欢使用固定前缀来识别成员变量，例如`_`or `m`。使用“方法 2”是在代码中实现这种清晰度的另一种（而且是更好的方法）。

Prefering `this->value`over`value`也有点像使用`std::cin`instead`cin`和`using namespace std`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T18:46:55.147

性能上没有区别。用于避免歧义，例如当`::`您有一个与字段同名的局部变量时，或者在派生类中声明一个与字段同名的字段的基类。支持 是因为的`->`类型`this`是指向对象的指针，因此编译器必须接受`this->something`，这也可用于避免歧义或只是让代码更清晰。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-07T18:42:50.707

使用方法一

```
variable = value; 
```

节省您购买新键盘的频率！

（话虽如此，我应该停止在我的咖啡上加咖啡！）

# android - 如何使 ActionBar 选项卡始终在平板电脑上显示窄模式（纵向模式）？

> ID：13276031
> 
> 赞同：1
> 
> 时间：2012-11-07T18:39:32.007
> 
> 标签：android

我有一个应用程序支持平板电脑和移动设备，它们都使用选项卡式设计（使用 ActionBar 选项卡）。在我的移动设备上，标签可以正常工作，但在我的平板电脑上，标签会自动放入 ActionBar。这些设备仅处于纵向模式，我不支持横向。

无论如何，我不能让标签进入平板电脑上的 ActionBar 并使它们看起来像普通标签吗？

# haskell - Error:Malformed head of type or class declaration

> ID：13276035
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:39:44.977
> 
> 标签：haskell

I tried the following code in ghci in ubuntu.

```
data Btree a=Ebt|Node a (Btree a)(Btree a)
t=Node 10( Node 20 Ebt Ebt) (Node 30 Ebt Ebt) 
```

The compiler shows the error: `Malformed head of type or class declaration`

The compiler compiles others code well. Can you please help me to find out the problem?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-07T19:21:04.970

由于我显然回答了这个问题，所以我把它写在这里作为一个答案，我希望你能点击“接受”按钮。

*   您不能在函数声明之后放置派生子句——它必须位于要为其派生实例的数据类型上。
*   “Show”类是大写的，大小写很重要。
*   “bTree”也需要以大写字母开头，因为它是一个类型名称。

# iphone - 使用自动布局进行编辑时在表格视图中调整子视图的大小

> ID：13276041
> 
> 赞同：5
> 
> 时间：2012-11-07T18:40:02.713
> 
> 标签：iphone, uitableview, autolayout

我有一个带有原型单元格的表格视图。目前我只在单元格中添加了一个标签。启用编辑模式时，将出现一个删除按钮，使单元格变小，但标签不会重新定位。过去，自动调整大小的蒙版没有问题，但现在我似乎无法让它工作。

有谁知道我应该如何配置自动布局以在编辑模式下将标签定位在单元格内？

![在此处输入图像描述](../Images/515bf056de42967ac5b1bcad6f89f3c3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:52:17.633

我搜索了一些，发现有必要删除 Interface Builder 添加的水平间距约束，因为这是相对于`UITableViewCell`而不是`contentView`然后添加一个相对于内容视图的约束。

您可以在此对类似问题的[回答](https://stackoverflow.com/a/12657891/486845)中了解更多相关信息。

# asp.net-mvc - Creating JSON key, value in VB.NET

> ID：13276044
> 
> 赞同：2
> 
> 时间：2012-11-07T18:40:09.643
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

I have the following code:

```
 Dim result = New Dictionary(Of String, String)

    For Each item In food

        result.Add(StrConv(item.Shrt_Desc.Replace(",", ", "), VbStrConv.ProperCase), item.Shrt_Desc)

    Next

    Return Json(result, JsonRequestBehavior.AllowGet) 
```

I need to make it into the following key and value in JSON:

> An array of objects with label and value properties: [ { label: "Choice1", value: "value1" }, ... ]

How can I do this? Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:05:00.017

字典有利于查找，我不知道 VB 语法，但会解释你将能够在 VB 中实现相同的 c#

创建一个模型类

```
public class SomeClass{
 public string label{get;set;}
 public string value{get;set;}
} 
```

填充`List`

```
 IList<SomeClass> result = New List<SomeClass>();

    foreach(var item in food){
           result.Add(new SomeClass{
                  label=StrConv(item.Shrt_Desc.Replace(",", ", "),
                  value= VbStrConv.ProperCase
            });
}
 Return Json(result, JsonRequestBehavior.AllowGet) 
```

希望有帮助

# android - ContentProvider getWriteableDatabase returns NullPointerException

> ID：13276045
> 
> 赞同：2
> 
> 时间：2012-11-07T18:40:12.573
> 
> 标签：android, android-contentprovider

I know this is a common problem, but nothing I've found solves my issue. I've created a ContentProvider, closely following the tutorial [here](http://mobile.tutsplus.com/tutorials/android/android-sdk_content-providers/). My Activity, in its onCreate method immediately after super.onCreate does this:

```
StitchProvider stitchProvider = new StitchProvider();
stitchProvider.delete(STITCHES_URI, null, null); 
```

StitchProvider is my ContentProvider. I've followed this code through the debugger and depending on where I put breakpoints, one of two things happen, but both lead to a NullPointerException in LogCat. The first option is I put a breakpoint here:

```
public SQLData(Context c) {
    super(c, DATABASENAME, null, DATABASEVERSION);
} 
```

SQLData is my database class. If I put the breakpoint here, I see that c, the Context, is equal to android.app.Application@412a9b80\. The code then returns to the onCreate method of StitchProvider:

```
public boolean onCreate() {
    mDB = new SQLData(getContext()); 
    return true;
} 
```

and mDB becomes com.MyKnitCards.project.SQLData@412ab668\. So far so good I think, but when I try to go past the return statement I get the NullPointerException. If I move the breakpoint to within the delete method of StitchProvider everything goes fine until I get to the getWriteableDatabase line, at which point I get a NullPointerException. Here's the delete method of StitchProvider:

```
public int delete(Uri uri, String selection, String[] selectionArgs) {
    int uriType = sURIMatcher.match(uri);
    int rowsAffected = 0;
    switch (uriType)
    {
    case STITCHES:
        SQLiteDatabase sqlDB = mDB.getWritableDatabase();
        rowsAffected = sqlDB.delete(STITCHTABLE_BASEPATH, selection, selectionArgs);
        break;
    case STITCHES_ID:
        SQLiteDatabase sqlDBwithID = mDB.getWritableDatabase();
        String id = uri.getLastPathSegment();
        if (TextUtils.isEmpty(selection))
        {
            rowsAffected = sqlDBwithID.delete(STITCHTABLE_BASEPATH, SQLData.KEY_ROWID + "=" + id, null);
        }
        else
        {
            rowsAffected = sqlDBwithID.delete(STITCHTABLE_BASEPATH, selection + " and " + SQLData.KEY_ROWID + "=" + id, selectionArgs);
        }
        break;
    default:
        throw new IllegalArgumentException("Unknown or Invalid URI " + uri);
    }
    getContext().getContentResolver().notifyChange(uri, null);
    return rowsAffected;
} 
```

One thing I have noticed, is that if I set a breakpoint at SQLData's onCreate method, I never get there. I think part of the problem is that the database is not getting created, but I don't know why. I'll post as much code or LogCat as people want, put I don't want to overwhelm folks with code either. Anyway, as always, if you have any suggestions, that'd be great, and thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T20:56:12.020

我看到您在代码中实例化了您的提供程序，这是您不应该做的事情，因为它`ContentProvider`是由 Android 系统管理的。使用 a 的正确方法`ContentProvider`是通过 a `ContentResolver`which 可以在 an `Activity`with中获得`getContentResolver()`。

您可以在 android 开发者网站上的[官方教程](http://developer.android.com/guide/topics/providers/content-provider-basics.html)中找到更多关于`ContentProviders`它们以及如何使用它们的信息。

# ruby-on-rails - Purpose of model variable in respond_with

> ID：13276046
> 
> 赞同：0
> 
> 时间：2012-11-07T18:40:18.127
> 
> 标签：ruby-on-rails, controller, instance-variables

In Rails 3, using the new respond_to and respond_with constructs, I do this:

```
class SurveysController < ApplicationController
  respond_to :html

  def survey
    @program_id = params[:program_id]
    @participant_id = params[:participant_id]
    respond_with [@program_id, @participant_id]
  end
end 
```

When the view is displayed (survey.html.erb) the variables program_id, @participant_id are both properly set up. However, if I omit them from the respond_with, as follows:

```
class SurveysController < ApplicationController
  respond_to :html

  def survey
    @program_id = params[:program_id]
    @participant_id = params[:participant_id]
    @foo = "foo"
    respond_with @foo
  end
end 
```

The same two instance variables are still visible in the view. In other words, all instance variables from the action are made available from within the view.

**Question: why should I put instance variables on the respond_to line?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:51:34.607

您是正确的，您在操作方法中设置的任何实例变量都可以在相应的视图中访问。在您的情况下，您只是将 id 设置为实例变量，而不是实际资源（即`@survey = Survey.find_by_program_id(params[:program_id])`）

respond_with 将为您提供的资源发送具有适当格式的响应......因此您不会将 respond_with 用于所有实例变量，而是将其用于资源。如果您添加了其他格式，例如`:json`，那么如果请求是 for `survey.json`，`respond_with`则会将您的`@survey`资源转换为适当的 json 格式。

```
respond_to :html, :json
def survey
  @program_id = params[:program_id]
  @participant_id = params[:participant_id]
  @survey = Survey.find_by_program_id(params[:program_id])
  respond_with @survey
end 
```

不确定这对您是否完全有意义，但[这篇文章](http://wiki.summercode.com/cleaner_restful_controllers_with_respond_with)可能会有所帮助。

# ruby-on-rails - What should be in the controller to update records from this params hash

> ID：13276050
> 
> 赞同：0
> 
> 时间：2012-11-07T18:40:23.973
> 
> 标签：ruby-on-rails

This is probably a simple question. I'm reading the form helpers guide on rubyonrails.org ( [http://guides.rubyonrails.org/form_helpers.html](http://guides.rubyonrails.org/form_helpers.html) ). In section 7.3 it shows how to make a form that returns a hash of params like the following:

```
 {'person' => {'name' => 'Bob', 'address' => {'23' => {'city' => 'Paris'}, '45' => {'city' => 'London'}}}} 
```

Bob has 2 addresses in the hash. So what goes in the controller in order to update both addresses for Bob at the same time?

Thanks.

Update:

Here's what I assume the models would look like, but I still don't know what the controller should look like to update both of Bob's addresses simultaneously.

person.rb

```
attr_accessible :name, :addresses_attributes 

has_many :addresses
accepts_nested_attributes_for :addresses 
```

address.rb

```
attr_accessible :city

belongs_to :person 
```

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:36:34.327

按照惯例，我可以建议尝试以下方法：

```
def update
  @person = Person.find(params[:id])
  if @person.update_attributes(parmas[:person])
    #update successful, now do what you wanna do
  else 
    #update was unsuccessful 
  end
end 
```

试试这个，如果你有任何错误就回来。但这可能不是学习事物的正确方法。您应该遵循[入门](http://guides.rubyonrails.org/getting_started.html)和后续教程。

# objective-c - 如何将值是 NSDictionary 转换为 NSString？

> ID：13276052
> 
> 赞同：2
> 
> 时间：2012-11-07T18:40:35.133
> 
> 标签：objective-c, ios, cocoa, nsstring, nsdictionary

我在*Objective-c*中有一个方法，它接受`NSDictionary`并以空格分隔的形式返回值`NSString`。这个应用程序是跨平台的，因此我不能使用快速枚举。这是我到目前为止所拥有的，然后是输出（这表明从未创建过字符串）：

```
-(NSString *)stringValuesFromDict:(NSDictionary *map)
{
    NSArray *values = [map allValues];
    NSString *params = [NSString string];
    NSLog(@"values length: %d", [values count]);
    NSLog(@"values = %@", [values description]);
    for (int i = 0; i < [values count]; i++)
    {
        [params stringByAppendingString:[values objectAtIndex:i]];
        [params stringByAppendingString:@" "];
    }
    NSLog(@"params = %@", params);
    return params;
} 
```

`NSDictionary`：_

```
{"arg1"="monkey"} 
```

输出：

```
values length: 1
values = (
    monkey
)
params = 
```

我究竟做错了什么？我怎样才能`params`被设置为`monkey`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:45:48.233

如果我正确阅读了这个问题，那么您只需要

```
[[dict allValues] componentsJoinedByString:@" "] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:44:15.477

你需要一个可变字符串。改变这个：

```
NSString *params = [NSString string]; 
```

对此：

```
NSMutableString *params = [NSMutableString string]; 
```

然后改变这些：

```
[params stringByAppendingString:[values objectAtIndex:i]];
[params stringByAppendingString:@" "]; 
```

对这些：

```
[params appendString:[values objectAtIndex:i]];
[params appendString:@" "]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:46:09.347

stringByAppendingString：返回一个新字符串。所以你必须做这样的事情：

```
params = [params stringByAppendingString:[values objectAtIndex:i]]; 
```

但缺点是，每次创建新字符串时都会浪费内存，您应该适当地使用 NSMutableString 代替。然后你可以打电话

```
[params appendString:[values objectAtIndex:i]]; 
```

# jquery - JQuery Drop Down Menu list

> ID：13276053
> 
> 赞同：0
> 
> 时间：2012-11-07T18:40:36.537
> 
> 标签：jquery, html, css, drop-down-menu, nav

Thanks for your help in advance as this is driving me crazy. What I'm trying to do is have a sub list slide down once user has clicked on a < li class="subMenu" > and then have it slide back up onClick (it's going on a mobile site). I can't figure out why this isn't working.

HTML:

```
 <ul class="dropdown">
<li class="subMenu">
    Menu item
    <ul><li>sub 1</li><li>sub 2</li><li>sub 3</li></ul>        
</li>
<li class="subMenu">
    Menu item 2        
    <ul><li>sub 1</li><li>sub 2</li><li>sub 3</li></ul>
</li>
<li class="subMenu">
    Menu item 3
    <ul><li>sub 1</li><li>sub 2</li><li>sub 3</li></ul>
</li>
<li class="subMenu">
    Menu item 4        
    <ul><li>sub 1</li><li>sub 2</li><li>sub 3</li></ul>        
</li> 
```

CSS:

```
 ul li {list-style-type: none;}
    ul {overflow:hidden;}
    ul li {cursor:pointer;float:left;padding: 3px;margin:0 5px;width:80px;background:#ccc;}
    ul ul {display:none}
    ul ul li {clear:both;} 
```

JS:

```
 $(function(){
$(document).mousedown(function(){
    $('.dropdown .active').removeClass('active').children('ul').hide();
})
$('.dropdown').on('mousedown','.subMenu', function(e){
    e.stopPropagation();
    var elem = $(this);
    if(elem.is('.active')) {
        elem.children('ul').slideUp(150);
        elem.removeClass('active');
    } else {
       $('.dropdown .active').removeClass('active').children('ul').hide();
        elem.addClass('active').children('ul').slideDown(150);
    }
});
$('.subMenu').on('mousedown','ul', function(e){
    e.stopPropagation();
    alert('menu item clicked');
});       
    }) 
```

Please help!

Mat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:53:27.163

试试这个替代方案：http: [//jsfiddle.net/wFy4t/2/](http://jsfiddle.net/wFy4t/2/)

```
$("ul li.subMenu").click(function(){
$(this).find("ul").toggle();
}); 
```

# regex - Removing first SELECT... FROM using regex

> ID：13276054
> 
> 赞同：0
> 
> 时间：2012-11-07T18:40:39.570
> 
> 标签：regex, coldfusion

I'm surprised I didn't find a duplicate of this question. I'm trying to parse out some sql strings and replace the first "SELECT... FROM " string with a different string. I would think it wouldn't be too difficult but haven't hit on the solution yet. If my test string is:

```
' SELECT something, something_else FROM (SELECT somebody FROM some_table)' 
```

and I want to replace it with:

```
' SELECT count(*) as total FROM (SELECT somebody FROM some_table)' 
```

I've tried the following regex expressions using REReplaceNoCase():

```
<cfset SQL = #REReplaceNoCase(test, "^\s*(SELECT.*\s+FROM\s)??", "SELECT count(*) as total FROM ")# />

<cfset SQL = #REReplaceNoCase(test, "^\s*SELECT.*(\s+FROM\s)??", "SELECT count(*) as total FROM ")# />
<cfset SQL = #REReplaceNoCase(test, "^\s*SELECT.*\s+(FROM)??\s", "SELECT count(*) as total FROM ")# /> 
```

as well as some other variations. Suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:54:13.607

我不会在这里使用替换 - 更容易（也更有效）只需找到第一个 FROM 并将字符串[分成](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)两部分，然后将新字符串放在前面：

```
<cfsavecontent variable="Sql">
    SELECT something, something_else 
    FROM (SELECT somebody FROM some_table)
</cfsavecontent>

<cfset Sql = Sql.split( '(?=\bFROM\b)' , 2 ) />

<cfset Sql = 'SELECT count(*) as total ' & Sql[2] />

<cfdump var=#Sql# /> 
```

正则表达式使用前瞻，因此它匹配 FROM 之前的位置，您无需重新添加它。

如有必要，您当然可以更改用于拆分的正则表达式。

例如，使其不区分大小写并使用空格而不是单词边界：

```
.split( '(?i)(?=\sFROM\s)' , 2 ) 
```

第二个参数 (2) 告诉 split 在它有两个字符串后停止（因此第二个数组项包含字符串的其余部分，即使其中可能有更多 FROM）。

另请注意，这是 Java 拆分方法，并将 java.util.regex 用于正则表达式（与 CF 的 Apache ORO 正则表达式有一些差异/改进）。

# android - Calendar.WEEK_OF_MONTH gives different results on two different devices

> ID：13276061
> 
> 赞同：7
> 
> 时间：2012-11-07T18:41:04.103
> 
> 标签：android, calendar

I have two devices HTC with android 2.3.5 and Samsung with 2.3.6 now the problem i am facing is i need the date's week of month.

So i've written this code and installed on both the phones. and set the system date as

> 27th Jan 2013

```
 Calendar calendar = Calendar.getInstance();
  int weekOfMonth =  calendar.get(Calendar.WEEK_OF_MONTH);
  Log.i(TAG,"weekOfMonth = "+weekOfMonth); 
```

now on HTC the output is

```
 weekOfMonth = 5 
```

while on samsung running the same code produces

```
 weekOfMonth = 4 
```

this really is screwing my logic n calculations ahead.

am i doing something wrong ?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T20:37:10.257

这可能是由于语言环境。在 Java 中

```
 Calendar calFr = Calendar.getInstance(TimeZone.getTimeZone("Europe/Paris"), Locale.FRANCE);
        Calendar calUs = Calendar.getInstance(TimeZone.getTimeZone("US/Eastern"), Locale.US);
        Calendar calUk = Calendar.getInstance(TimeZone.getTimeZone("GMT"), Locale.UK);
        calFr.set(2013, Calendar.JANUARY, 27);
        calUs.set(2013, Calendar.JANUARY, 27);
        calUk.set(2013, Calendar.JANUARY, 27);

        int weekOfMonthFr = calFr.get(Calendar.WEEK_OF_MONTH);
        int weekOfMonthUs = calUs.get(Calendar.WEEK_OF_MONTH);
        int weekOfMonthUk = calUk.get(Calendar.WEEK_OF_MONTH);
        System.out.println("France week of month is " + weekOfMonthFr);
        System.out.println("USA week of month is " + weekOfMonthUs);
        System.out.println("UK week of month is " + weekOfMonthUk); 
```

会给你

```
France week of month is 4
USA week of month is 5
UK week of month is 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:58:27.547

仔细检查它设置的年份，如果一个设置为 2012 年，另一个设置为 2013 年，这将解释差异。

您能否让应用程序记录日历对象中保存的日期并将其发布在这里，以确保它们具有正确的信息。

# javascript - 如何使用 .closest 切换段落？

> ID：13276067
> 
> 赞同：1
> 
> 时间：2012-11-07T18:41:53.850
> 
> 标签：javascript, jquery, slidedown, closest

我正在尝试使用最接近的方式向下滑动段落。这就是我到目前为止所拥有的。

JS

```
$(".info_btn").css("-webkit-transition", "-webkit-transform 0.25s ease-in-out");

var info_btn_DEG = 0;

$(".info_btn").toggle(function() {
$(this).closest('p').slideDown("250");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("250", 0.65);
}, function() {

$(this).closest('p').slideDown("250");
info_btn_DEG += 45;
$(this).css("-webkit-transform", "rotateZ(" + info_btn_DEG + "deg)");
$(this).fadeTo("250", 0.3);
}); 
```

我也在 JSbin 中设置了这个，以便完整查看：

[http://jsbin.com/atinap/7/edit](http://jsbin.com/atinap/7/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:35:28.040

您可以到达“article_total”级别（将其更改为一个类，一个页面上不应有多个相同的 ID）然后您可以从那里定位您需要的 p

下面的代码假设您将 id 更改为 class

```
$(this).closest('.article_wrapper').find('YOUR_ELEMENT_HERE'); 
```

# android - 有没有人成功静态链接opencv for android？

> ID：13276068
> 
> 赞同：2
> 
> 时间：2012-11-07T18:41:58.517
> 
> 标签：android

我必须解决android静态链接opencv库的问题。我们有一个使用 opencv 管理器使用动态链接的应用程序。我已经检查了 opencv.org 上的官方文档，但没有找到为 android 配置静态链接的步骤的详细信息。

问题：如何将 OpenCV 库静态链接到 android 项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:59:54.450

这应该是评论，但没有评论链接——我在 opencv 和 android 上取得了一些成功——看看[链接](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#native-c)

```
OPENCV_LIB_TYPE:=STATIC 
```

# database - 弹簧安全动态角色从数据库加载

> ID：13276071
> 
> 赞同：0
> 
> 时间：2012-11-07T18:42:21.543
> 
> 标签：database, dynamic, spring-security, role

我的问题类似于帖子 [问题]：[Dynamic Spring Security using SQL Query](https://stackoverflow.com/questions/8381776/dynamic-spring-security-using-sql-query)

我已经尝试过 Rob Winch 给出的解决方案，但 spring security 抱怨如此。所以不确定这是由于春季最新版本 3.1 还是我错过的其他东西。非常感谢任何指导。

```
Caused by: java.lang.ClassCastException: com.xx.web.security.filter.JdbcFilterInvocationSecurityMetadataSource cannot be cast to org.springframework.security.web.access.intercept.DefaultFilterInvocationSecurityMetadataSource 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:40:59.847

由于 spring 抱怨 DefaultFilterInvocationSecurityMetadataSource，解决方案是扩展该类，如 jbbarquero 在这里回答的那样： [如何在 Spring Security 中动态决定 <intercept-url> 访问属性值？](https://stackoverflow.com/questions/6893061/how-to-dynamically-decide-intercept-url-access-attribute-value-in-spring-secur)

# node.js - 使用 Tomcat 和 NodeJS 进行单点登录

> ID：13276075
> 
> 赞同：3
> 
> 时间：2012-11-07T18:42:27.723
> 
> 标签：node.js, tomcat, spring-security, single-sign-on, passport.js

我在同一台服务器上运行了两个不同的应用程序，一个是在 Tomcat 中使用 spring-social 和 spring-security 运行的基于 Java 的应用程序，另一个是使用 PassportJS 作为安全框架的 NodeJS 应用程序。

这两个应用程序都配置为使用具有相同 clientId/secret 的 Google OAuth2 进行访问，因此我可以在每个应用程序中使用我的 google 帐户登录。但是，如果我从其中一个更改为另一个，我需要再次登录，因为该会话在另一个应用程序上不存在。

我正在查看会话 cookie，Java 应用程序创建 JSESSIONID cookie，而 Node 应用程序创建一个“connect.sid”cookie。也许每次用户登录时我都可以在每个应用程序中创建一个会话？或者我必须处理 OAuth 令牌？

拜托，你能指出我正确的方向吗？我应该使用另一个库/框架吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:53:15.477

[这](https://gist.github.com/1491756)可能会有所帮助；看起来更改 Express/Connect 的 cookie 名称相对容易。那么问题就变成了`JSESSIONID`和的内容`connect.sid`实际上是否相同。

# c# - 将多行文本框中的换行符替换为

> ID：13276077
> 
> 赞同：1
> 
> 时间：2012-11-07T18:42:33.703
> 
> 标签：c#, asp.net

我正在尝试使用多行文本框将文本插入显示为 html 的表格中。我想使用 javascript 获取文本框内的文本并找到用户按下 Enter 的位置并将“ `<br/>`”放置在该位置，以便在显示文本时显示换行符。关于我如何做到这一点的任何想法？

我尝试过这样的事情，但没有奏效。

```
var text = document.getElementById("announcementid").value;

            var newtext = text.replace("\n", "<br/>");

            text = newtext; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:44:55.333

该`newtext`变量最终成为元素中原始字符串的*副本。*`announcementid`因此，您需要*重新*`value`设置原始文档元素的属性：

```
 var text = document.getElementById("announcementid").value;
  var newtext = text.replace(/\n/g, "<br />");
  document.getElementById("announcementid").value = newtext; 
```

此外，正如 Konstantin 所指出的，`replace()`除非您传入全局正则表达式，否则 Javascript 中的函数只会替换第一个实例。

[小提琴示例](http://jsfiddle.net/UjwHJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:44:27.367

文本是一个原语，因此它不会替换该值。使用正则表达式进行全局替换，而不是仅替换第一个实例：

```
var text = document.getElementById("announcementid").value;
var newtext = text.replace(/\n/g, "<br />");
document.getElementById("announcementid").value = newtext; 
```

# iphone - Archieve NSMutable 数组包含 UIImage

> ID：13276079
> 
> 赞同：0
> 
> 时间：2012-11-07T18:42:40.827
> 
> 标签：iphone, ios, nsmutablearray, archive, encode

我正在尝试用图像归档 ns mustable 数组，我的代码如下所示：

```
//in my .h file I have
#define kName @"name"
#define kEmail  @"email"
#define kPhone  @"phone"
#define kDetail @"detail"
#define kImages @"images"
#define kRequestDate  @"requestDate"
#define kRequestSent @"status"

@interface BAPRequest : NSObject
@property (nonatomic) NSString *name;
@property (nonatomic) NSString *email;
@property (nonatomic) NSString *phone;
@property (nonatomic) NSString *detail;
@property (nonatomic) NSMutableArray *images;
@property (nonatomic) NSDate *requestDate;
@property (nonatomic) BOOL requestSent;
@end

//in my .m file I have
#import "BAPRequest.h"

@implementation BAPRequest

@synthesize name, email, phone, detail;
@synthesize images;
@synthesize requestDate;
@synthesize requestSent;

- (void)encodeWithCoder:(NSCoder *)encoder{
  [encoder encodeObject:name forKey:kName];
  [encoder encodeObject:email forKey:kEmail];
  [encoder encodeObject:phone forKey:kPhone];
  [encoder encodeObject:detail forKey:kDetail];
  [encoder encodeObject:images forKey:kImages];
  [encoder encodeObject:requestDate forKey:kRequestDate];
  [encoder encodeBool:requestSent forKey:kRequestSent];
}

- (id)initWithCoder:(NSCoder *)decoder{
  name = [decoder decodeObjectForKey:kName];
  email = [decoder decodeObjectForKey:kEmail];
  phone = [decoder decodeObjectForKey:kPhone];
  detail = [decoder decodeObjectForKey:kDetail];
  images = [decoder decodeObjectForKey:kImages];
  requestDate = [decoder decodeObjectForKey:kRequestDate];
  requestSent = [decoder decodeBoolForKey:kRequestSent];
  return self;
}
@end 
```

当然，我也有 NSKeyedArchiver 代码，就像其他人一样。

其他所有内容都正确存档，当我保存然后加载它们时，似乎一切正常。

但存档图像似乎不是。

我确实有一个 MutableArray 在存档之前存档每个 BAPObjects，想知道是因为 ios 不支持在 MutableArray 中存档 MutableArray 还是仅仅因为我无法轻松存档图像？

干杯菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:47:33.280

存档图像不要使用

而是使用 by 或将 转换`UIImage`为表示。`NSData``UIImageJPEGRepresentation``UIImagePNGRepresentation`

然后存档`NSMutableArray`

编辑：您必须将要保存的项目替换`NSMutableArray`为`NSData`

```
NSData *imageData = UIImagePNGRepresentation([your_array objectAtIndex:0]); 
```

将 UIImage 替换为`imageData`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:44:20.130

`UIImage`Apple在 iOS 5.1 中添加了归档支持。因此，解决问题的一种方法是将部署目标提升到 iOS 5.1。

如果您不能这样做，请查看[UIImage 和 NSCoding iOS 5.1](https://stackoverflow.com/questions/9614171/uiimage-and-nscoding-ios-5-1)的第一个答案。请注意，给定的实现与 Apple 的归档支持**不**兼容。`UIImage`

# javascript - Javascript 使用 HTMLEditorExtender 设置 TextBox 的值

> ID：13276083
> 
> 赞同：1
> 
> 时间：2012-11-07T18:42:57.710
> 
> 标签：javascript, textbox, htmleditorextender

我有一个带有 HTMLEditorExtender 的 asp.net 文本框（ID = "HTMLTextBox_Comments"）：

```
<asp:TextBox ID="HTMLTextBox_Comments" runat="server" Height="200px" Rows="5" 
        TextMode="MultiLine" Width="469px"></asp:TextBox>
<ajaxToolkit:HtmlEditorExtender ID="HTMLTextBox_Comments_HtmlEditorExtender" 
        runat="server" Enabled="True" TargetControlID="HTMLTextBox_Comments">
</ajaxToolkit:HtmlEditorExtender> 
```

我正在使用 javascript 设置文本框的值，如下所示：

```
var MyControl = document.getElementById("MainContent_HTMLTextBox_Comments"); //this gets the control just fine
MyControl.value = "Here's some text"; 
```

如果我有一个警报显示我的值，那么它会显示“这是一些文本”，但该文本不会显示在 TextBox 本身中。

我也尝试过设置`MyControl.innerHTML`，`MyControl.text`但这些似乎都不起作用。

如何在 TextBox 中显示 TextBox 的值？

提前致谢！

**编辑** 我发现[这篇文章](https://stackoverflow.com/questions/12076421/get-the-value-of-an-asp-textbox-element-with-an-htmleditorextendor-attached-usi)似乎表明 .value 是我应该用来设置此 TextBox 的文本的，但它只是没有显示出来。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:55:39.823

WebForms 为您的服务器端元素添加了一个疯狂的 id。尝试 document.querySelector()

[http://jsfiddle.net/ZhGX7/](http://jsfiddle.net/ZhGX7/)

```
<input type="text" id="abc_123_MyDiv" value="firstValue" />

<script>

var input = document.querySelector("input[id*=MyDiv]");

input.value="Updated Value"
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:26:11.633

我在[这里](https://stackoverflow.com/questions/9827279/how-to-set-htmleditorextender-html-from-client-side)找到了解决方案。

诀窍是在*HTMLEditorExtender*中设置 ExtenderContentEditable div 的 innerHTML，而不是尝试直接设置文本框的值。值得注意的是，设置 innerHTML 也会设置值，因此您可以读取 TextBox.value 并获取您输入的内容。

谢谢您的帮助。

# spring - 如何在路由器上实现 Restlet 基本 HTTP 身份验证？

> ID：13276084
> 
> 赞同：2
> 
> 时间：2012-11-07T18:42:58.093
> 
> 标签：spring, restlet, applicationcontext, restlet-2.0

我阅读了有关如何实现基本 HTTP 身份验证的 Restlet 文档，但是当我向资源发出请求时，我的文档不起作用。我的不工作的任何原因？

应用环境：

```
<!-- Used to map routes to Restlet resources -->
    <bean id="router" class="org.restlet.ext.spring.SpringRouter">
        <property name="attachments">
            <map>
                <!-- I removed the actual values because it references a company -->
                <entry key="/getCompanies" value="ClassResource" />
                <entry key="/getList" value="ClassResource" />
                <entry key="/getFile" value="ClassResource" />
                <entry key="/archiveFile" value="ClassResource" />
            </map>
        </property>
    </bean>

    <!-- Used to have login authentication for requests -->
    <bean id="challengeAuthenticator" class="org.restlet.security.ChallengeAuthenticator">
        <constructor-arg><null /></constructor-arg>
        <!-- Sets the Challenge scheme parameter to the static class member -->
        <constructor-arg value="#{ T(org.restlet.data.ChallengeScheme).HTTP_BASIC }" />
        <constructor-arg value="WSRealm" />
        <property name="next" ref="router" />
    </bean>

    <!-- Creates a restlet component that contains the server and attachs the application -->
    <bean id="restletComponent" class="org.restlet.ext.spring.SpringComponent">
        <!-- Sets the server in the Restlet component -->
        <property name="server" ref="server" />
        <!-- Attachs the application to the virtual host -->
        <property name="defaultTarget" ref="application" />
    </bean> 
```

我假设因为我在发出请求时将挑战 Authenticator next 方法设置为路由器，所以它会在访问资源之前命中路由器并命中身份验证器。

Java 代码：

```
ApplicationContext springContext = new GenericXmlApplicationContext("applicationContext.xml");
Component restletComponent = (Component) springContext.getBean("restletComponent");
GetFilesApplication application = (GetFilesApplication) springContext.getBean("application");
ChallengeAuthenticator challengeAuthenticator =
            (ChallengeAuthenticator) springContext.getBean("challengeAuthenticator");
Config config = application.getConfig();
MapVerifier mapVerifier = new MapVerifier();

// Puts the user name and password (encrypted) in the map verifier
mapVerifier.getLocalSecrets().put(config.getUsername(), StringCipher.encrypt(
            config.getPassword()).toCharArray());
challengeAuthenticator.setVerifier(mapVerifier);
restletComponent.getDefaultHost().attachDefault(challengeAuthenticator);

// Start the component
restletComponent.start(); 
```

就像我之前说的，我唯一能看到的错误是，我不确定是否将挑战身份验证器的下一个方法值设置为路由器。

还为客户端添加：

```
clientResource.setChallengeResponse(ChallengeScheme.HTTP_BASIC, "correctUser", StringCipher.encrypt("password")); 
```

忘了提到我正在我的本地机器上测试这个客户端和网络服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:17:21.713

解决了。花了很长时间才弄清楚，但这是我如何让它工作的。

服务器端的 Java 代码：

```
// Removed and added to Application Context
restletComponent.getDefaultHost().attachDefault(challengeAuthenticator); 
```

应用环境：

```
<bean id="propertyConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>configuration.properties</value>
                <value>log4j.properties</value>
            </list>
        </property>
    </bean>

    <bean id="config" class="Config class path location">
        <property name="filePath" value="${Properties entry value}"/>
        <property name="archivePath" value="${Properties entry value}"/>
        <property name="username" value="${Properties entry value}"/>
        <property name="password" value="${Properties entry value}"/>
    </bean>

    <!-- Restlet application -->
    <bean id="application" class="Application class path location" scope="singleton">
        <!-- Sets the router for the application -->
        <property name="root" ref="router" />
        <property name="config" ref="config" />
    </bean>

    <!-- Sets up the server -->
    <bean id="server" class="org.restlet.ext.spring.SpringServer">
        <constructor-arg value="${Properties entry value}" />
        <constructor-arg value="${Properties entry value}" />
    </bean>

    <!-- Used to map routes to Restlet resources -->
    <bean id="router" class="org.restlet.ext.spring.SpringRouter">
        <property name="attachments">
            <map>
                <entry key="/getCompanies" value="Resource class path location" />
                <entry key="/getList" value="Resource class path location" />
                <entry key="/getFile" value="Resource class path location" />
                <entry key="/archiveFile" value="Resource class path location" />
            </map>
        </property>
    </bean>

    <!-- Creates a restlet component that contains the server and attachs the application -->
    <bean id="restletComponent" class="org.restlet.ext.spring.SpringComponent">
        <!-- Sets the server in the Restlet component -->
        <property name="server" ref="server" />
        <!-- Attachs the application to the virtual host -->
        <property name="defaultTarget" ref="application" />
        <property name="defaultHost" ref="defaultHost" />
    </bean>

    <!-- Used to have login authentication for requests -->
    <bean id="challengeAuthenticator" class="org.restlet.security.ChallengeAuthenticator">
        <constructor-arg><null /></constructor-arg>
        <!-- Sets the Challenge scheme parameter to the static class member -->
        <constructor-arg value="#{ T(org.restlet.data.ChallengeScheme).HTTP_BASIC }" />
        <constructor-arg value="GetWSRealm" />
        <property name="next" ref="application" />
    </bean>

    <bean id="defaultHost" class="org.restlet.ext.spring.SpringHost">
        <constructor-arg ref="restletComponent" />
        <property name="defaultAttachment" ref="challengeAuthenticator" />
    </bean> 
```

希望这可以帮助其他试图让他们的应用程序正常工作的人。我花了一段时间才让它工作。:)

# javascript - Django Python 中的文本文档、电子表格、演示文稿编辑器

> ID：13276086
> 
> 赞同：1
> 
> 时间：2012-11-07T18:43:08.153
> 
> 标签：javascript, python, django

我一直在尝试研究一段时间，但我没有得到任何结果，所以我决定在这里问。我的项目是用 Django 制作的，我想向其中添加文本文档、电子表格、演示文稿编辑器（如 google 文档）。我不知道如何解决这个问题。我什至愿意从头开始创建这些。但我不知道从哪里开始。我可以从任何书籍、链接、API 开始吗？

我想要一些能让人们在我的网站上创建和编辑这些文档的东西。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T23:57:06.737

这都是不同的应用程序。对于文本编辑器，我建议看看[这里](http://www.djangopackages.com/grids/g/wysiwyg/)

其他好的编辑器列表在此[链接](http://www.webdesignerdepot.com/2008/12/20-excellent-free-rich-text-editors/) 中，其中一些同时支持文本和电子表格。此链接中的大多数应用程序已经连接到 django，其他应用程序需要您自己连接。

# ubuntu-12.04 - 无法在 Ubuntu 12.04 上启动 MySQL5.5 - “dpkg：依赖问题”

> ID：13276088
> 
> 赞同：22
> 
> 时间：2012-11-07T18:43:19.907
> 
> 标签：ubuntu-12.04, mysql-5.5

这似乎是 12.04 上的一个常见问题。我已经尝试了[这个线程](http://ubuntuforums.org/showthread.php?t=1998260&page=3)中的所有内容，包括：

```
sudo apt-get clean

sudo apt-get autoclean

sudo apt-get remove --purge mysql-client-5.5 mysql-client-core-5.5 mysql-common mysql-server mysql-server-5.5 mysql-server-core-5.5

sudo apt-get install mysql-server 
```

我仍然遇到同样的错误。安装/启动 MySql5.5 如下所示：

```
apt-get install -f mysql-server
Reading package lists... Done
Building dependency tree
Reading state information... Done
mysql-server is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
2 not fully installed or removed.
After this operation, 0 B of additional disk space will be used.
Do you want to continue [Y/n]? Y
Setting up mysql-server-5.5 (5.5.24-0ubuntu0.12.04.1) ...
120907 21:37:15 [Note] Plugin 'FEDERATED' is disabled.
120907 21:37:15 InnoDB: The InnoDB memory heap is disabled
120907 21:37:15 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120907 21:37:15 InnoDB: Compressed tables use zlib 1.2.3.4
120907 21:37:15 InnoDB: Initializing buffer pool, size = 128.0M
120907 21:37:15 InnoDB: Completed initialization of buffer pool
120907 21:37:15 InnoDB: highest supported file format is Barracuda.
120907 21:37:15  InnoDB: Waiting for the background threads to start
120907 21:37:16 InnoDB: 1.1.8 started; log sequence number 154164236
120907 21:37:16  InnoDB: Starting shutdown...
120907 21:37:16  InnoDB: Shutdown completed; log sequence number 154164236
start: Job failed to start
invoke-rc.d: initscript mysql, action "start" failed.
dpkg: error processing mysql-server-5.5 (--configure):
 subprocess installed post-installation script returned error exit status 1
dpkg: dependency problems prevent configuration of mysql-server:
 mysql-server depends on mysql-server-5.5; however:
  Package mysql-server-5.5 is not configured yet.
dpkg: error processing mysql-server (--configure):
 dependency problems - leaving unconfigured
No apport report written because the error message indicates its a followup error from a previous failure.

Errors were encountered while processing:
 mysql-server-5.5
 mysql-server 
```

此外，`dpkg-reconfigure mysql-server-5.5`退货`/usr/sbin/dpkg-reconfigure: mysql-server-5.5 is broken or not fully installed`

这里的最终目标是安装和配置 Gitorious 以与 Redmine 一起使用，但我相信问题与 Ubuntu 12.04 和 MySql5.5 无关

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-08-27T03:44:11.210

我找到了这一步的解决方案：

> **警告：以下步骤将删除您现有的数据！请先备份！！！**

```
$ sudo apt-get --yes autoremove --purge mysql-server-5.5

$ sudo apt-get --yes autoremove --purge mysql-client-5.5

$ sudo apt-get --yes autoremove --purge mysql-common

$ sudo rm -rf /var/lib/mysql /etc/mysql ~/.mysql

$ sudo deluser mysql

$ sudo apt-get autoclean

$ sudo apt-get update && sudo apt-get upgrade

$ sudo apt-get install mysql-server-5.5 mysql-client-5.5 
```

> 注意：当您收到“dpkg：错误...”时，请运行以下步骤：

```
$ sudo dpkg --configure -a 
```

祝你好运！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-22T17:09:11.170

来自 Ubuntu 论坛的修复：

> 这对我有用，虽然我是在安装而不是升级，所以我不关心现有的数据库。
> 
> 我再次删除了所有 mysql 应用程序，然后我去删除了我的 /var/lib/mysql 目录。请记住，如果您在那里有一个现有的数据库，您将丢失它。您可能希望将其移动到另一个位置。
> 
> 删除该目录后，我再次安装，它运行完美。所以 /var/lib/mysql 目录中的某些东西是我的问题。看看这是否适合你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-09T15:56:29.800

有同样的问题，尝试使用 aptitude 安装并发现该错误

```
Setting up mysql-server-5.5 (5.5.41-0ubuntu0.14.04.1) ...
/var/lib/dpkg/info/mysql-server-5.5.postinst: line 146: logger: command not found
ATTENTION: An error has occured. More info is in the syslog!
/var/lib/dpkg/info/mysql-server-5.5.postinst: line 236: logger: command not found
dpkg: error processing package mysql-server-5.5 (--configure):
 subprocess installed post-installation script returned error exit status 127 
```

安装 bsdutils 后，

```
apt-get install bsdutils 
```

mysql安装正常通过

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-02T17:01:31.593

确保

```
auto lo                          
iface lo inet loopback 
```

仍然存在于你的`/etc/network/interfaces`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-03T11:54:56.407

只想加我的 5 美分。它可能会帮助其他人。

在寻找并尝试了各种解决方案之后，没有大刀阔斧的卸载和清除，我的解决方案非常简单。

我的磁盘已满！我不敢相信我没有先检查。清除它，嘿presto！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-14T19:07:39.637

我尝试了上面的所有方法，但仍然无法安装。我终于得到了这篇文章：[http ://www.randomhacks.co.uk/mysql-job-failed-to-start-unable-to-set-root-password-cant-find-file-mysql/](http://www.randomhacks.co.uk/mysql-job-failed-to-start-unable-to-set-root-password-cant-find-file-mysql/)

它建议删除类似于上述内容的文件夹，并运行

```
dpkg --get-selections | grep mysql
sudo apt-get remove --purge [everything that came up]
sudo apt-get autoremove && sudo apt-get autoclean
sudo apt-get install mysql-server 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-13T19:15:03.333

我多次遇到这个问题。我可以为这个拼图添加另一个解决方案......

> **警告：以下步骤将删除您的数据！先做好备份！**

你必须：

**rm -rf /var/lib/mysql rm -rf /etc/mysql**

和

验证**接口“lo”是否已启动**，并且**“lo”**（iptables）上允许流量。

希望能帮助别人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-03T20:49:12.380

wget [http://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-apt-config_0.2.1-1ubuntu14.04_all.deb](http://dev.mysql.com/get/Downloads/MySQL-5.6/mysql-apt-config_0.2.1-1ubuntu14.04_all.deb)

```
dpkg -i mysql-apt-config_0.2.1-1ubuntu14.04_all.deb

apt-get update

apt-get install mysql-server 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-24T14:42:44.403

我无法通过清除/手动删除/mysql / ubuntu 论坛建议我做的任何事情来解决这个问题

相反，我的解决方案是：

1) 增加运行 Ubuntu 的虚拟机的内存

2）检查 /var/log/mysql/error.log 后，我发现无法在 /tmp 创建特定文件：

无法创建/写入文件“/tmp/ibeDIRhT”（错误代码：13）InnoDB：错误：无法创建临时文件；错误号：13

我只是 chmod(ed) /tmp 允许这样做。

瞧，下一次安装 mysql 的尝试成功了。

万一有人遇到这个问题，清除并不总是解决方案，您应该检查日志以查看您有什么错误消息。这可能会有所帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-20T00:10:02.333

我浪费了很多时间试图解决这个问题，最后结果证明它只需要对`/tmp`目录的完全权限（我尝试了 755 和 766 但没有用，只有 777 有效），所以我跑了：

```
sudo chmod 1777 /tmp 
```

“777 之前的数字 1 被称为`sticky bit`，它为文件夹增加了额外的安全性，请查看[此](https://unix.stackexchange.com/questions/79395/how-does-the-sticky-bit-work)以获取有关粘性位的更多详细信息”。

并重新配置：

```
sudo dpkg --configure mysql-server-5.5 
```

和mysql服务器成功启动。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-06T16:57:10.187

从 MySQL 切换到 MariaDB 时也会发生此错误 ( [https://bugs.launchpad.net/ubuntu/+source/mysql-5.7/+bug/1490071](https://bugs.launchpad.net/ubuntu/+source/mysql-5.7/+bug/1490071) )。

MySQL 二进制数据文件与 MariaDB 不兼容，所以我切换回 MySQL，因为我没有时间弄乱 mysqldump。

首先，我必须将 MariaDB数据`/var/lib/mysql`从.`/var/lib/mysql-5.7``/var/lib/mysql`

# jquery - 如何在两个基于 Jquery 的布局之间切换（使用桌面和移动设备时）

> ID：13276098
> 
> 赞同：10
> 
> 时间：2012-11-07T18:43:43.540
> 
> 标签：jquery, layout, jquery-mobile, responsive-design, enquire.js

我想创建一个响应式网站。如果浏览器是移动设备大小的，内容应该以 iPhone 样式列表视图显示如果浏览器是桌面大小的，内容应该用标签显示：

![在此处输入图像描述](../Images/2c002c0c47487a86a19bc1a5d614633e.png)

**这样做的最佳方法是什么？** 我不想为移动/桌面使用单独的文件。我希望它反应灵敏。

* * *

* * *

* * *

这是我所做的一些研究。

**尝试 1：纯 CSS 解决方案。**

纯 CSS 解决方案将是最好的，因为 CSS 提供媒体查询，可以轻松在布局之间切换。[CSS 提供了创建标签的方法](http://css-tricks.com/css3-tabs/)。但它似乎没有为 iPhone 样式列表提供方法。（您几乎可以使用[手风琴列表](http://www.mdawson.net/csstips/purecssaccordian.php)来伪造它，但这不会像在真正的 iPhone 应用程序上那样将用户带到单独的页面）。

**尝试 2：Jquery 解决方案**（[见 Fiddle](http://jsfiddle.net/big_smile/mfB5a/3/)）

*   [Jquery Mobile](http://jquerymobile.com/)提供了一种创建[iPhone 样式列表视图的简单方法](http://jquerymobile.com/demos/1.2.0/docs/lists/index.html)
*   [Jquery UI](http://jqueryui.com/)提供了一种创建[选项卡](http://jqueryui.com/tabs/)的简单方法。
*   [Enquire.js](http://wickynilliams.github.com/enquire.js/)为媒体查询提供了等效的 Javascript。

[在这个小提琴](http://jsfiddle.net/big_smile/mfB5a/3/)中，我尝试将 Jquery Mobile 和 Jquery Ui 结合起来。Enquire.Js 用于根据屏幕调用必要的库。

当一个库被调用时，它会改变 dom 结构。所以必须删除不需要的库，否则如果用户重新调整浏览器的大小（即在移动桌面之间切换），未使用的库将中断，导致调用库发生冲突。

在我的小提琴中，我试图这样做，但它似乎不起作用：

```
$(document).ready(function() {

        enquire.register("screen and (max-width: 600px)", function() {
    $('script[src~="jquery-ui.js"]').remove();
    $('link[rel=stylesheet][href~="jquery-ui.css"]').remove();    
     $('head').append('<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a3/jquery.mobile-1.0a3.min.css" />');    
     $('head').append('<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"><\/script>');   
        $("#tabs").tabs("destroy");            
    }).listen();

       enquire.register("screen and (min-width: 601px)", function() {
    $('script[src~="jquery.mobile-1.0a3.min.js"]').remove();
    $('link[rel=stylesheet][href~="jquery.mobile-1.0a3.min.css"]').remove();    
    $('head').append('<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />');        
     $('head').append('<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"><\/script>');    
    $("#tabs").tabs();

    }).listen();

}); 
```

即使删除了未使用的库，也会导致新库发生冲突。此外，您必须在调用任何布局之前重新调整浏览器的大小。如果用户不重新调整浏览器的大小，则内容将没有样式。

**尝试 3：Dom 克隆**（[参见 Fiddle](http://jsfiddle.net/big_smile/H4vaK/5/)）

此尝试类似于尝试 2，除了在页面加载时它将 DOM 存储在一个变量中。然后当用户重新调整浏览器的大小时，现有的 DOM 会被存储的 DOM 替换。我已经按照[这里](https://stackoverflow.com/a/5557728)的方法大纲进行了操作，但它似乎不起作用。dom 只是被删除而不是被替换。

我将不胜感激，因为我一直在努力寻找解决方案！（我知道我问过一个与此类似的问题，但我觉得这个新问题与此不同，足以保证发布新帖子。）

**尝试 4：动态分配数据属性**

Jquery mobile 使用标记中的数据属性来使脚本工作。我尝试过动态应用这些，因此它们仅在浏览器处于移动大小时才写入文档。但是，当重新调整浏览器大小时，桌面选项卡仍然损坏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:29:24.150

我认为这里没有必要重新发明轮子。响应式设计已经存在了很长一段时间，并且已经席卷了 Web 开发。也就是说，我建议你可以使用任何一个没有。你喜欢的响应式框架作品在那里工作。我个人最喜欢和建议使用的是 Twitter Bootstrap 框架。当您了解它们的工作原理时，它非常聪明，重量轻且易于使用。您无需担心 iPhone 和 Desktop。Twitter Bootstrap 迎合其他设备以及表格等。

现在直接回答您的问题，因为您想在移动设备和桌面设备上显示相同的选项卡式内容，而不需要两个单独的 html 文件。以下是我为您提供的示例演示。

我有一个包含所有内容的简单 html 文件，它使用 twitter bootstrap 作为响应式框架。

**HTML**

请看小提琴，它太大（内容）无法粘贴在这里:)

**CSS**

除了加载 bootstrap.css 和 bootstrap-responsive.css，我需要我的自定义 CSS 来适应我的页面布局。

CSS 中真正发挥作用的最重要部分是媒体查询。我指定设备宽度并要求 CSS 在达到此设备宽度时以这种方式显示。媒体查询语法如下：

```
@media  (max-width:480px) {
   // Custom for device that has width 480px;

} 
```

现在 iPhone 的布局宽度为 480 像素，当正在查看我的页面的设备时，我想设置元素的样式以适应 480 像素的屏幕。

这是页面的自定义 CSS：

```
.container {
    margin-top: 10px;
}
.ora, .ban, .man{display:none;}
.fruit-content{width:100%;}
li{display:inline-block;width:24%;text-align:center;border-bottom:1px solid #fff;background: #C0C;}
ul.upperul{margin:0 0 0 0px;width:103%;}
.custom-row{border:1px solid green;}
.selected{background: #c0c0c0;}
@media  (max-width:480px) {
    li{display: block;width: 100%;text-align: left;}
    .custom-row{border:1px solid #000000;}
    ul.upperul{margin-left: 0px;width:100%;}

} 
```

**JS**

现在是关于切换选项卡式内容的功能部分。我使用 jQuery 和几行代码以选项卡式的方式设置内容：

```
$(function() {
    $("li").live("click" , function() {
     $(this).css("background","#c0c0c0").siblings().css("background","#C0C");
     $(".des").hide().eq($(this).index()).show();
    })
    .eq(0).addClass('selected');
}); 
```

最后，这些部分的整个构建块都在这里：

[**演示**](http://jsfiddle.net/refhat/aT5dE/24/)

全屏结果在[**此处**](http://jsfiddle.net/refhat/aT5dE/24/embedded/result/)，调整浏览器大小并查看内容的行为方式和响应速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:05:23.343

我肯定会选择 Attemp 1 并尝试模拟“单独的页面”。在这种情况下，它更加轻巧和灵活。

在我看来，尝试 2 和 3 的开销太大。

### 关于 UX 的一些想法

从用户体验的角度来看，我会说以您上面显示的方式更改导航的概念并不好。用户在调整浏览器窗口大小时可能会感到困惑。

# node.js - nodejs集群 - 将客户端会话保持在一个工作人员上

> ID：13276104
> 
> 赞同：3
> 
> 时间：2012-11-07T18:44:18.507
> 
> 标签：node.js, caching, cluster-computing, worker

是否可以更改在 nodejs 集群上分配 worker 请求的策略？我的意思是在第一个客户端访问时选择工作人员，然后通过会话 ID 将客户端保留在该工作人员上。

我正在使用内存缓存作为大型对象结构的存储。每个客户端（会话）在此存储中都有自己的数据。所有存储的对象都被配置和引用（使用循环）。这是对 redis/memcached 进行复杂序列化的解决方案。

现在在集群上，每个请求都可以由不同的工作人员处理，因此在最坏的情况下，将在每个工作人员下创建同一会话的数据。

是关于集群的一些设置，还是可以编写方法？这有助于为客户端会话选择工作人员。当worker死亡时，它将选择新的并且会话数据将从永久存储（mysql）中重新创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:26:23.160

试试氨基簇，它支持通过氨基网关进行粘性会话。 [https://npmjs.org/package/amino](https://npmjs.org/package/amino)

[https://npmjs.org/package/amino-gateway](https://npmjs.org/package/amino-gateway)

# batch-file - 批处理文件在“gem install”之后不运行下一个命令

> ID：13276109
> 
> 赞同：13
> 
> 时间：2012-11-07T18:44:28.183
> 
> 标签：batch-file, gem

我制作了一个批处理文件，试图在 Windows 上设置 rake/albacore 环境：

```
@echo off

echo Setting up rake environment for building

echo Installing Bundler
gem install bundler

echo Bundle Installing gems
bundle install 
```

当我运行这个批处理文件（双击或在 cmd 窗口中运行）时，只执行第一个 gem 命令。永远不会调用“捆绑安装”。这是输出：

```
C:\>InstallGems.bat
Setting up rake environment for building
Installing Bundler
Successfully installed bundler-1.2.1
1 gem installed
Installing ri documentation for bundler-1.2.1...
Installing RDoc documentation for bundler-1.2.1...

C:\> 
```

我在第一个“gem install”命令之后添加了“暂停”，似乎也从未执行过“暂停”。

任何想法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T18:48:09.940

啊，我想通了：只需在每个命令之前添加“调用”即可。

```
@echo off

echo Setting up rake environment for building

echo Installing Bundler
call gem install bundler

echo Bundle Installing gems
call bundle install 
```

# nuget - 在网络文件夹/共享上托管 Nuget 包

> ID：13276110
> 
> 赞同：1
> 
> 时间：2012-11-07T18:44:30.423
> 
> 标签：nuget

我有一个网络共享，我将创建的 nuget 包放入其中。我在 VS2010 中配置 Nuget 以将共享添加为包源。但是，当我选择它时，它没有显示任何包。

如果我将包放在本地文件夹中，它可以正常工作。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:52:44.047

很容易测试。使用与 VS2010 相同的凭据打开 Windows 资源管理器并指向 nuget 共享。如果您可以在那里看到包，那么您应该也可以在 VS2010 中看到它们。如果您在 Windows 资源管理器中看不到文件 - 请按照@PHeiberg 的建议检查权限，并确保您已列出并已阅读。由于组可能正在使用中，因此从有效权限中搜索您的登录名，如下图所示： ![在此处输入图像描述](../Images/d314f34fdd8be660cb9b83a7de6b3534.png)

# ibm-mq - 许多 WMQ amqrmppa 进程

> ID：13276113
> 
> 赞同：2
> 
> 时间：2012-11-07T18:44:58.687
> 
> 标签：ibm-mq

我在 Linux 下运行 WebSphere MQ v7.1.0.1。对于同一个队列管理器，看到太多 amqrmppa 进程是否正常？

```
mqm       3504  1745  2 Nov01 ?        03:40:23 /opt/mqm/bin/amqrmppa -m TEST
mqm       4804  1745  0 08:56 ?        00:01:21 /opt/mqm/bin/amqrmppa -m TEST
mqm       5022  1745 27 08:56 ?        01:17:32 /opt/mqm/bin/amqrmppa -m TEST
mqm       5944  1745 27 09:30 ?        01:07:45 /opt/mqm/bin/amqrmppa -m TEST 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:53:52.040

这个是正常的。 `amqrrmpa`是通道池化过程。当使用 WMQ 时`inetd`，您会看到每个通道实例一个进程。然后它被更改为独立的侦听器，每个侦听器只能运行这么多的子进程。新模型用于`amqrrmpa`池化通道，它会根据负载动态生成或终止进程。但是，如果您关闭所有频道，请不要指望它会迅速杀死他们。如果资源不足，它将杀死未​​使用`amqrrmpa`的实例，否则它会假设“您以前需要这么多，您可能会再次需要这么多”并让它们闲逛一段时间。

# ruby-on-rails - 如何为 Rails 应用程序指定网址？

> ID：13276118
> 
> 赞同：0
> 
> 时间：2012-11-07T18:45:12.103
> 
> 标签：ruby-on-rails

我正在使用 Ubuntu 12.04，并且我有一个 Rails 应用程序，我想在启动时启动它。另外，如果我从控制台启动服务器，例如

```
cd <path of the application>
rails s -p 3000 
```

我必须保持控制台打开，否则应用程序将在我结束终端后立即结束。

其次要访问应用程序，我必须访问**localhost:3000**。我宁愿在浏览器中使用正确的名称（例如**localhost/myapp**或仅**myapp ）访问它。**

首先，可能吗？我怎么做？

PS：我已经有一些在 Apache 上运行的 PHP 应用程序。我不想弄乱默认的 80 / 8080 端口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:57:43.730

编辑`/etc/hosts`以添加

`127.0.0.1 myapp`

另外，`rails s -p 80`如果您不想在浏览器中指定 3000 端口，请从这里开始。这可能会干扰已经在监听 80 端口的 Apache 进程。

编辑：为了使它与 Apache 一起工作：

让 Rails 应用程序在 3000 端口上启用`mod proxy`Apache，以便将`ProxyPass`请求传入`myapp`主机。

这里有几个例子：httpd.apache.org/docs/2.0/mod/mod_proxy.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:55:02.177

您可以为此使用[pow 。](http://pow.cx/)它是 Mac OS X 的零配置机架服务器。

** 编辑 **

[Prax](https://github.com/ysbaddaden/prax)是 Linux 操作系统的替代品

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T02:08:18.013

如果您不想编辑主机文件，也可以使用[localtest.me](http://readme.localtest.me/)。只需使用任何子域（如`example.localtest.me:3000`或）访问您的网站`www.localtest.me:3000`。

# python - 检查父线程是否正在运行

> ID：13276124
> 
> 赞同：2
> 
> 时间：2012-11-07T18:46:03.997
> 
> 标签：python, multithreading

我想知道如何检查父线程是否仍然存在/卡住。基本上我有一个父线程向孩子发送命令。如果父线程死亡或遇到死锁条件，我不希望孩子继续生存。以下是迄今为止我实现的基本框架。

```
from Queue import Queue
from threading import Thread

    class myClass:

        def __init__(self):

            self.currentCommand = Queue()           
            t = Thread(target=self._run)
            t.start()            

        def close(self):
            self._sendCommand("close")

        def _run(self):
            while True:
                if self.currentCommand.empty():
                    pass
                    #do some task
                else:
                    command = self.currentCommand.get()
                    if command == "close":
                        #clean up
                        self.currentCommand.task_done()
                        break
                    else:
                        #do command task
                        self.currentCommand.task_done()

        def _sendCommand(self, command):
            self.currentCommand.put(command)
            self.currentCommand.join() 
```

我的一个想法是定期从父母那里向孩子发送计算机时间。如果时间大于设定值，孩子就会死亡。有没有更简单或更有效的方法？同样在 python 文档中，线程类中有一个 isAlive 方法，但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:06:12.253

您可以将一个[`Event`](http://docs.python.org/2/library/threading.html#event-objects)对象向下传递给子线程，它可以检查父线程是否指示退出。然后，您只需将关键部分包装在父线程中，`finally`无论如何都会设置该位：

```
import time
from threading import Thread, Event

def child(quit):
    for _ in xrange(10):
        if quit.isSet():
            print "Parent is dead. Leaving child."
            return

        print "Child alive"
        time.sleep(.5)

def parent():
    quitEvent = Event()
    t = Thread(target=child, args=(quitEvent,))
    t.start()

    try:
        time.sleep(2)
        raise Exception("Parent thread raises exception")
    finally:
        quitEvent.set()

    t.join()

if __name__ == "__main__":
    t = Thread(target=parent, args=())
    t.start()
    t.join() 
```

尽管父线程在它自己的工作期间死锁的问题可能需要像您建议的那样采用“心跳”方法，它会定期指示它处于活动状态。您可以使用传递给子级的队列来执行此操作，也可以继续使用 Event 对象。父母会定期设置事件，孩子会期望它以一定的间隔设置，然后会立即清除它。

下面是一个使用`Event`心跳的例子，在父节点可能死锁并且没有签入的情况下：

```
def child(heartbeat):
    for _ in xrange(10):
        if not heartbeat.isSet():
            print "Parent is dead. Leaving child."
            return

        heartbeat.clear()

        print "Child alive"
        time.sleep(1)

def parent():
    heartbeat = Event()
    heartbeat.set()

    t = Thread(target=child, args=(heartbeat,))
    t.start()

    i = 0
    while i < 20:
        print "Parent alive"
        i += 1
        heartbeat.set()
        time.sleep(.1)

    print "Parent done looping...pretending to be deadlocked"
    time.sleep(5)

    t.join() 
```

由于父母正在做自己的工作，它正在设置心跳位。孩子定期检查这个位。如果它发现父节点未设置，则假定它已死并退出。您需要建立一个合适的心跳间隔。父母需要比孩子更频繁地检查，否则孩子可能很快就会检查并认为父母已经离开了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:33:13.530

`isAlife`如果您以某种方式与孩子共享父线程对象，则可以使用：

```
parent_thread = None

def child():
   while True:
       time.sleep(1)
       if not parent_thread.isAlive():
           break
       print('child alife')

def parent():
    t = threading.Thread(target=child)
    t.start()
    for i in range(10):
        print('parent alife')
        time.sleep(1)

parent_thread = threading.Thread(target=parent)
parent_thread.start() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-22T13:55:36.877

您可以使用以下行：

```
threading.main_thread().is_alive() 
```

# .net-4.0 - msbuild ASPNETCOMPILER ASPNETRUNTIME startIndex 错误

> ID：13276125
> 
> 赞同：7
> 
> 时间：2012-11-07T18:46:04.203
> 
> 标签：.net-4.0, msbuild, windows-8, compiler-errors, aspnet-compiler

我有一个在 Windows 7 上构建良好且没有错误的 Web 项目。当我升级到 Windows 8 时，将项目编译成已编译的网站会引发错误。从 csproj 文件编译（不创建网站）可以正常工作。这是 msbuild 引发的实际错误

> ASPNETCOMPILER : 错误 ASPRUNTIME: startIndex 不能大于字符串的长度。[mycsproj.file.here]

msbuild 正在运行的引发错误的行是

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_compiler.exe -v / -p my.physical.project.path -u my.physical.project.path\buildartifacts\CompiledWebsite

我也可以通过运行带有 -errorstack 标记的 aspnet_compiler 来获得堆栈跟踪，这就是它生成的

```
[ArgumentOutOfRangeException]: startIndex cannot be larger than length of string.
Parameter name: startIndex
    at System.String.InternalSubStringWithChecks(Int32 startIndex, Int32 length, Boolean fAlwaysCopy)
    at System.Web.Compilation.DiskBuildResultCache.MarkAssemblyAndRelatedFilesForDeletion(String assemblyName)
    at System.Web.Compilation.DiskBuildResultCache.CacheBuildResult(String cacheKey, BuildResult result, Int64 hashCode, DateTime utcStart)
    at System.Web.Compilation.BuildManager.CacheBuildResultInternal(String cacheKey, BuildResult result, Int64 hashCode, DateTime utcStart)
    at System.Web.Compilation.WebDirectoryBatchCompiler.CacheAssemblyResults(AssemblyBuilder assemblyBuilder, CompilerResults results)
    at System.Web.Compilation.WebDirectoryBatchCompiler.CompileAssemblyBuilder(AssemblyBuilder builder)
    at System.Web.Compilation.WebDirectoryBatchCompiler.<CompileNonDependentBuildProviders>b__0(AssemblyBuilder assemblyBuilder)
    at System.Web.Compilation.CompilationUtil.CompileParallel(ICollection assemblyBuilders, Action`1 action)
    at System.Web.Compilation.WebDirectoryBatchCompiler.CompileNonDependentBuildProviders(ICollection buildProviders)
    at System.Web.Compilation.WebDirectoryBatchCompiler.Process()
    at System.Web.Compilation.BuildManager.BatchCompileWebDirectoryInternal(VirtualDirectory vdir, Boolean ignoreErrors)
    at System.Web.Compilation.BuildManager.BatchCompileWebDirectory(VirtualDirectory vdir, VirtualPath virtualDir, Boolean ignoreErrors)
    at System.Web.Compilation.BuildManager.PrecompileWebDirectoriesRecursive(VirtualDirectory vdir, Boolean topLevel)
    at System.Web.Compilation.BuildManager.PrecompileAppInternal(VirtualPath startingVirtualDir, IEnumerable`1 excludedVirtualPaths)
    at System.Web.Compilation.BuildManager.PrecompileApp(VirtualPath startingVirtualDir, IEnumerable`1 excludedVirtualPaths)
    at System.Web.Compilation.BuildManager.PrecompileApp(ClientBuildManagerCallback callback, IEnumerable`1 excludedVirtualPaths)
    at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback, List`1 excludedVirtualPaths)
    at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback, List`1 excludedVirtualPaths)
    at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback, Boolean forceCleanBuild)
    at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback)
    at System.Web.Compilation.Precompiler.Main(String[] args) 
```

我该如何解决？由于堆栈跟踪，我认为它与程序集名称有关，但我无法终生弄清楚如何修复它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T17:24:15.023

使用 Visual Studio运行“ **Clean** ”，然后运行“ **Rebuild ”。**这解决了我的问题。

# c++ - 2d FFT 后的图像结果错误

> ID：13276127
> 
> 赞同：-3
> 
> 时间：2012-11-07T18:46:09.503
> 
> 标签：c++, image, fft, pgm

我在图像上尝试 FFT 过滤器时遇到问题。输入是 pgm 文件格式 (b&w)。结果图像不正确。[**正确的应该是这个**](http://www.academictutorials.com/images/graphics/spectrum2d1.jpg)样子 。不要介意颜色:)

更多细节请看[**代码**](http://pastebin.com/c8FJEnae)。它不干净；对不起 ; 我在做这个工作。我的程序中的几个步骤。我最怀疑第 3 步和第 5 步。Paul Bourke 的 FFT 函数（第 4 步）应该没问题

1-将 pgm 文件读入“图像”结构

2-创建一个“复杂”结构的二维数组

3-将图像中的值传递给 Complex.Real （可能是关于将整数转换为双精度的问题；但我认为这不是问题）

4-调用2dFFT函数

5- 从“复杂”数组读取数据并将值传递给“图像”结构以显示（问题可能是我过滤结果以适应 pgm 格式——将双精度转换为整数；然后将它们放入 0 到 255 的范围内）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:57:31.930

好的 ; 我找到了这个链接，它确实很有帮助。这应该是第 6 步。之后 ; 输出图像非常好

[http://sci.tech-archive.net/Archive/sci.image.processing/2006-08/msg00165.html](http://sci.tech-archive.net/Archive/sci.image.processing/2006-08/msg00165.html)

# php - 在mysql简化示例中查找重复行

> ID：13276128
> 
> 赞同：1
> 
> 时间：2012-11-07T18:46:13.157
> 
> 标签：php, mysql

忏悔：一个 mysql newb 需要简单的例子来定位有点大的表中的重复行。我已经搜索并阅读了许多具有类似标题的其他主题，但是这些示例非常复杂，以至于我无法将它们应用于我的基本情况。

一个 MySQL 表只有 5 个字段，但有数百行。我希望找到重复的行——我知道肯定有一个，想知道是否还有其他行。

示例行：（rel_id 是自动递增的，主键字段）

```
'rel_id' => 1
'host' => 17
'host_type' => 'client'
'rep' => 7
'rep_type => 'cli_mgr' 
```

我的方法是：
1\. 将整个表读入 mysql 查询
2\. 逐行比较 4 个数据字段与之前（“完成”）行的那些
3\. 比较“新”行后，将其附加到数组“完成”行

这是我尝试过的。我确信必须有一个更简单的解决方案。您会看到我在尝试将“新”行附加到“完成”行数组时陷入困境：

```
$rRels = mysql_query("SELECT * FROM `rels`");
$a = array();
$e = array();
$c1 = 0;
$c2 = 0;
While ($r = mysql_fetch_assoc($rRels)) {
    $i = $r['rel_id'];
    $h = $r['host'];
    $ht = $r['host_type'];
    $r = $r['rep'];
    $rt = $r['rep_type'];

    foreach($a as $row) {
        $xh = $row['host'];
        $xht = $row['host_type'];
        $xr = $row['rel'];
        $xrt = $row['rel_type'];

        if (($h==$xh) && ($ht==$xht) && ($r==$xr) && ($rt==$xrt)) {
            echo 'Found one<br>';
            $e[] = $r;
        }
        $c2++;
    }
    $a = array_merge(array('rel_id'=>$i, 'host'=>$h, 'host_type'=>$ht, 'rep'=>$r, 'rep_type'=>$rt), $a);
    $c1++;
}

echo '<h3>Duplicate Rows:</h3>';
foreach ($e as $row) {
    print_r($row);
    echo '<br>';
}
echo '<br><br>';
echo 'Counter 1: ' . $c1 . '<br>';
echo 'Counter 2: ' . $c2 . '<br>'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:54:56.037

这应该可以解决问题：

```
SELECT COUNT(*) as cnt, GROUP_CONCAT(rel_id) AS ids
FROM rels
GROUP BY host, host_type, rep, rep_type
HAVING cnt > 1 
```

任何“重复”记录的 cnt > 1，group_concat 将为您提供重复记录的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:01:00.627

纯no-php解决方案：制作旧表（名为oldTable）的副本，没有数据

```
create table newTable like oldTable; 
```

修改结构以防止重复并在所有 5 列上添加唯一键。

```
alter table newTable add unique index(rel_id,host,host_type,rep,rep_type ); 
```

然后用 sql 查询从 oldTable 复制行

```
insert IGNORE into newTable select * from oldTable 
```

在 newTable 中，您只有唯一数据。

另一个选项是 group by，如果您将获得使用的重复行数

```
select  concat_ws('_',rel_id,host,host_type,rep,rep_type) as str, count(*) 
from oldTable 
group by str 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:53:02.973

您可以通过此查询查找所有重复的行。希望它应该很容易集成到您的 PHP 代码中。

```
// This will give you all the duplicates
// Self join where all the columns have the same values but different primary keys

SELECT * 
FROM   rels t1, rels t2
WHERE  t1.rel_id != t2.rel_id
AND    t1.host = t2.host
AND    t1.host_type = t2.host_type
AND    t1.rep = t2.rep
AND    t1.rep_type = t2.rep_type 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:58:34.423

在 SQL 中查找重复项比在 PHP 中更容易。

```
SELECT GROUP_CONCAT(rel_id)
FROM rels
GROUP BY host, host_type, rep, rep_type HAVING COUNT(rel_id)>1; 
```

这将显示指向相同记录的 rel_id 组。该`HAVING COUNT(rel_id)>1`子句允许我们跳过不重复的记录。

# c# - 从 Excel 填充组合框和文本字段

> ID：13276130
> 
> 赞同：3
> 
> 时间：2012-11-07T18:46:15.623
> 
> 标签：c#, excel

我有一个包含客户信息的 Excel 电子表格。我想用 A 列的唯一值填充一个组合框 (comboBox1)。然后我想要第二个组合框 (comboBox2) 列出 B 列中存在的 ComboBox1=A 列的值。最后，我想用列的 C、D、E 等填充文本字段......

我已经模拟了我想要的结果的快速屏幕：

![在此处输入图像描述](../Images/23514b8e747a8ee025d0d1ee231228db.png)

这将来自以下电子表格：

![在此处输入图像描述](../Images/5ccffd1ed38e87165c0c93c3e563a8af.png)

电子表格中的数据会不时更改，这就是为什么我无法对信息进行硬编码。

我不知道从哪里开始。我是将数据加载到二维数组中还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:50:39.883

你至少有几个选择。

**OOXml SDK**

如果 excel 文件是 2007 格式 (xlsx) 或更高版本，那么您可以通过 Microsoft 提供的[OOXml SDK](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)以编程方式使用它。

请查看以下操作方法：

[如何：检索电子表格文档中单元格的值](http://msdn.microsoft.com/en-us/library/office/hh298534.aspx)

对于电子表格的其他操作方法：

[http://msdn.microsoft.com/en-us/library/office/cc850837.aspx](http://msdn.microsoft.com/en-us/library/office/cc850837.aspx)

**互操作**

您可以自动化 excel 并以编程方式与之交互。这需要在运行程序的计算机上安装 excel。Microsoft 还警告说，这在服务器环境中不受支持。

SO上有很多关于通过C#进行excel互操作的问题。

[https://stackoverflow.com/search?q=C%23+and+Excel+interop](https://stackoverflow.com/search?q=C%23+and+Excel+interop)

**Excel 驱动程序**

MS 提供 excel [ODBC](https://stackoverflow.com/search?q=Excel++ODBC&submit=search)和[OLEDB](https://stackoverflow.com/search?q=Excel++OLEDB&submit=search)驱动程序。

# java - 如何从 eclipse git 存储库中签出和应用 java 补丁？

> ID：13276131
> 
> 赞同：0
> 
> 时间：2012-11-07T18:46:16.553
> 
> 标签：java, eclipse, git, patch, tortoisegit

我找到了一个补丁，它解决了我遇到的一个问题。此补丁托管在[GIT 存储库中](https://git.eclipse.org/r/#/c/8163/)

在 Windows 上，我尝试使用 MsGit、TortoiseGit 检查补丁

```
git fetch git://git.eclipse.org/gitroot/tycho/org.eclipse.tycho refs/changes/63/8163/2 && git checkout FETCH_HEAD 
```

但 Git 抱怨缺少存储库。

**问题**：

*   是否有关于检查这些 Eclipse 存储库的教程？
*   当我检查它时，我将如何应用这个 Eclip 补丁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:51:00.960

您需要先克隆存储库。从 git clone url_to_repository 开始

您可以在此处找到更多信息：http: [//git-scm.com/documentation](http://git-scm.com/documentation)

我建议在将 git 与现有代码一起使用之前先阅读此内容。

这也是一个很好的起点： http: [//gitref.org/creating/](http://gitref.org/creating/)

# javascript - 多行 JavaScript 数组

> ID：13276133
> 
> 赞同：7
> 
> 时间：2012-11-07T18:46:39.410
> 
> 标签：javascript

我创建了一个包含几个字符串作为值的数组，因此它变成了一条非常长的行，需要一段时间才能滚动。为了把它放在多行上，我搜索并发现我可以使用 + 号来链接这些行，但我遇到了问题。这是一个小例子：

```
<script type="text/javascript">
var x;
var colorArr=["Red","Orange","Yellow",+
"Green","Blue","Purple"];
for(x=0;x<6;x++)
document.write(colorArr[x]+"<br/>");
</script> 
```

这输出：

```
Red
Orange
Yellow
NaN
Blue
Purple 
```

基本上，由于某种原因，该行的第一个元素变得未定义。我该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T18:47:58.650

您不需要`+`，只需流到下一行。Javascript 并不将行尾等同于语句的结尾。

```
var colorArr=["Red","Orange","Yellow",
    "Green","Blue","Purple"]; 
```

* * *

要了解您看到的行为，请注意：

```
var test = -"test";
alert(test); 
```

输出`NaN`您看到的（不是数字）。解析器正在尝试将“Green”转换为数字——以便它可以评估它假定的数学表达式（因为它以 开头`+`）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T18:48:50.317

`+ "Green"`不是 **一个**数字。

因此`NaN`

尝试这样做：

```
var colorArr=["Red","Orange","Yellow",
              "Green","Blue","Purple"]; 
```

* * *

### 侧边栏：

`NaN`并不意味着**未定义**：

```
NaN === undefined; // false 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:50:41.443

您只需按 Enter 键并转到下一行，语法上不需要任何内容​​。

它出现的原因`NaN`是它试图添加 a`number`和 a `string`。

如果你有：`arr = ['whatever', 5 + 10];`它会输出`['whatever', 15]`

# php - PHP 执行 header:location 无论 IF 语句参数

> ID：13276134
> 
> 赞同：0
> 
> 时间：2012-11-07T18:46:42.827
> 
> 标签：php

> **可能重复：**
> [3 个不同的等于](https://stackoverflow.com/questions/2063480/the-3-different-equals)

谁能告诉我为什么，在使用下面的代码时，我被重定向到了大象.com，而不是看到“长颈鹿！

```
<?php
$foo="giraffe";
if($foo="elephant"){
header("location:http://www.elephant.com");
exit();
}else{
 echo $foo;}
?> 
```

感谢您的关注

Ĵ

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T18:47:27.310

```
if($foo="elephant") 
```

你在`$foo`这里分配，而不是比较它；你应该这样做：

```
if($foo=="elephant") 
```

赋值操作的结果是刚刚赋值的值；在这种情况下，“大象”的评估结果为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:50:11.583

您的`if()`语句有一个等号。这不会在 PHP 中进行比较；它设置值并返回true。

为了进行比较，您需要使用双等号或三等号：

```
if($foo == "elephant") { .... } 
```

或者

```
if($foo === "elephant") { .... } 
```

两者的区别在于 double-equal 不关心变量的数据类型，而 Triple-equal 关心。在这种情况下，它们之间没有太大区别，但值得学习和理解它们的区别，因为如果你不了解它们，它们可能会咬你。更多信息在这里： http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# c# - ProgressRing 控制在哪里？

> ID：13276136
> 
> 赞同：0
> 
> 时间：2012-11-07T18:46:54.193
> 
> 标签：c#, xaml, windows-phone-8

我正在尝试编写基于 Windows Phone 8 SDK 的应用程序。我不断看到提到 ProgressRing 控件，但在工具箱或 xaml 设计器中没有看到它。

我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:29:20.877

ProgressRing 是 Win8 UI 控件的一部分，而不是 WP8。在 WP8 中，您应该使用 SystemTray.ProgressIndicator 代替它是 windows phone UI shell 的一部分。有关示例，请参见[此处](http://blogs.msdn.com/b/jaimer/archive/2011/06/04/system-tray-progress-indicator.aspx)和[此处](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.progressindicator%28VS.92%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T08:28:30.440

请参阅下面的博客链接，了解简单的复制和粘贴代码以准确复制 Windows ProgressRing（使用实际样式代码）。完美运行，只需将其添加到我的 WP8 项目中：

[http://briandunnington.github.io/progressring-wp8.html](http://briandunnington.github.io/progressring-wp8.html)

在此问题的答案中有更多关于将其调整为 WP8 的信息：

[如何在 Windows Phone 8 中使用 ProgressRing](https://stackoverflow.com/questions/19171930/how-to-use-progressring-in-windows-phone-8)

[为您的手机](http://www.windowsphone.com/s?appid=d8955478-5a18-47e2-b173-e381fe70e47a)下载此应用程序以查看它的实际效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:34:15.500

ProgressRing 不适用于 Windows Phone 7 或 8，您必须使用 ProgressBar 或者 PerformanceProgressBar： http:
[//www.windowsphonegeek.com/articles/WP7-PerformanceProgressBar-in-depth](http://www.windowsphonegeek.com/articles/WP7-PerformanceProgressBar-in-depth)

# php - 使 Codeigniter 2.1.3 允许 Facebook 反向链接

> ID：13276140
> 
> 赞同：1
> 
> 时间：2012-11-07T18:47:20.167
> 
> 标签：php, codeigniter

碰巧我需要紧急修复 Codeigniter 问题，而我并不熟悉该工具。

简单的问题：我如何允许**从 Facebook 回来的链接，**如[http://www.xxx.de/?fb_action_ids=4811819099741&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%224811819099741%22%3A447766801925104%7D&%22181909974 %3A%22og.likes%22%7D&action_ref_map=%5B%5D](http://www.xxx.de/?fb_action_ids=4811819099741&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%224811819099741%22%3A447766801925104%7D&action_type_map=%7B%224811819099741%22%3A%22og.likes%22%7D&action_ref_map=%5B%5D)

没有创建臭名昭著*的您提交的 URI 包含不允许的字符*-我可以通过设置 $config['permitted_uri_chars'] 来修复它-并且由于 CI 的内部重定向而没有 404。

我很想了解该问题的快速解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:40:41.790

如果可以使用`.htaccess`，您可以重定向到任何地方。这避免了任何 CI 的复杂性。

```
RewriteCond %{QUERY_STRING} .
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule ^ /index.php/? [L] 
```

[https://stackoverflow.com/a/4227616/183254](https://stackoverflow.com/a/4227616/183254)

* * *

更新：nginx 可能的工作重写

```
if ($args ~ fb_action_ids=(\d+)){
    rewrite ^ http://example.com/ permanent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:47:20.117

在 application/config/config.php 中设置这些变量：

```
$config['allow_get_array']      = TRUE;
$config['enable_query_strings'] = TRUE; // This is normally FALSE 
```

`$config['permitted_uri_chars']`必要时进行调整。我`a-z 0-9~%.:_\-#!`的几乎适用于所有东西。

我不确定您需要对 fb 数据做什么，所以我只能说，通过设置这些选项，理论上您应该能够访问 facebook 提供的 get var。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T21:01:52.587

codeigniter 期望 URI 的第一部分是它加载的控制器，然后第二部分是方法，之后的每个段都是被加载的方法的参数。一个快速的解决方案是像在 MVC3 中一样使用正则表达式设置路由，并将其指向控制器和方法。然后，您可以从那里解析 uri。

匹配 ?fb_action_ids 并将其更改为 /controller/method/?fb_action_ids 并从那里开始。也许有了更多信息，我可以为您提供更多帮助，但如果这对您有用，这应该是无需重新配置一堆东西即可重新启动和运行的最快方法。

[http://ellislab.com/codeigniter/user_guide/general/routing.html](http://ellislab.com/codeigniter/user_guide/general/routing.html)

# iphone - 从块内返回一个变量

> ID：13276141
> 
> 赞同：1
> 
> 时间：2012-11-07T18:47:25.563
> 
> 标签：iphone, objective-c, asynchronous, nsarray, objective-c-blocks

下面我有一些代码应该返回一个数组，来自服务器的响应发生在一个块中：

```
- (NSMutableArray *)getArray
{
    NSMutableDictionary* params =[NSMutableDictionary dictionaryWithObjectsAndKeys:
                                  @"pending", @"command",
                                  @"2" , @"userID",
                                  nil];

    [[API sharedInstance] commandWithParams:params
                               onCompletion:^(NSDictionary *json) {
                                   //result returned

                                   if ([json objectForKey:@"error"]==nil) {
                                       NSMutableArray *res = [[NSMutableArray alloc] init];
                                       [res addObject:@"1234"];

                                       RETURN HERE

                                   } else {
                                       //error
                                       [UIAlertView title:@"Error" withMessage:[json objectForKey:@"error"]];
                                   }

                               }];
} 
```

解析数据并创建一个数组后，我想返回我为`getArray`方法调用创建的数组。到目前为止，经过数小时的尝试，我没有任何运气，即使尝试了之前关于 stackoverflow 问题的一些建议。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:50:24.657

将块作为参数传递给函数

```
- (NSMutableArray *)getArray:(void (^)(NSArray *))block {} 
```

然后将 RETURN HERE 替换为`block(res);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:56:48.850

我会在类的某个地方创建一个方法，比如说`- (void)arrayFetched:(NSArray *)fetchedArray`。

然后你像这样修改你的代码：

```
//...
if ([json objectForKey:@"error"]==nil) {
    __weak NSMutableArray *res = [[NSMutableArray alloc] init];
    [res addObject:@"1234"];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self arrayFetched:[res copy]];
    });
    //... 
```

然后确实想要你想要的`arrayFetched:`方法中的数组。

# java - 在 Stanford Parser 上设置非折叠依赖项

> ID：13276143
> 
> 赞同：1
> 
> 时间：2012-11-07T18:47:30.213
> 
> 标签：java, stanford-nlp

我正在使用 Stanford Parser Java API 来执行句法分析，并且我想选择“不保留树结构的非折叠依赖项”模式。在手册中，它说明了如何使用控制台完成此操作，而不是使用 Java 代码。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:48:14.640

```
Tree parseTree;
GrammaticalStructure gs = gsf.newGrammaticalStructure(parseTree);
Collection tdl = gs.typedDependencies(); 
```

# python - Python C 扩展 - 接收字典作为参数

> ID：13276145
> 
> 赞同：4
> 
> 时间：2012-11-07T18:47:42.723
> 
> 标签：python, c, python-c-api, python-c-extension

我正在编写一个 C 扩展，我对如何接收一个 dict 作为参数感到很困惑。由于文档没有关于如何实现这一点的任何细节，我尝试将参数解析为 Python 对象，然后将其作为字典进行操作：

```
PyTypeObject *dict;

if(!PyArg_ParseTuple(args, "o", &dict))
    return NULL; 
```

但是代码解析失败：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import plotting
>>> plotting.plot({'wff':0})
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: must be impossible<bad format char>, not dict 
```

据我从错误消息中可以理解，格式 char 是错误的（我认为“o”应该代表任何 Python 对象）。

将 Python dict 解析为 C 指针的最佳方法是什么？我正在浏览文档，但我没有找到与此类似的任何内容。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T19:12:06.643

你这里有几个问题。首先，`PyTypeObject`类型专门用于定义类型的结构。您可以在此处阅读有关类型对象的更多信息：http: [//docs.python.org/2/c-api/typeobj.html](http://docs.python.org/2/c-api/typeobj.html) 这不是您想要的。对于指向要使用的任意 Python 对象的指针`PyObject*`。

其次，任意 Python 对象的类型代码是`"O"`（大写） not `"o"`。如果你想做一个类型检查它是一个字典，你也可以使用`"O!"`这需要你传递一个类型对象的地址，然后是`PyObject*`你想要存储返回的地址`PyObject*`。例如：

```
PyObject* dict;
PyArg_ParseTuple(args, "O!", &PyDict_Type, &dict); 
```

这会将对象返回到 *dict 指针中，`TypeError`如果它不是 dict 则引发 a。但是，除非您绝对需要它是一个 dict，否则我建议您不要这样做，以检查对象是否实现了映射接口。但这是一个不同的问题。

# java - 为什么使用 onclick 从 commandlink 调用的 Ajax 函数 XMLHttpRequest 不起作用？

> ID：13276146
> 
> 赞同：1
> 
> 时间：2012-11-07T18:47:43.580
> 
> 标签：java, jsf, xmlhttprequest, commandlink

我的问题是当我调用某个函数而不是在一个明确的 div 中渲染时，而不是发送我的请求。这是我的功能。

```
<script type="text/javascript">
//<![CDATA[
function ajaxFunction() {
var xmlHttp;
try {
// Firefox, Opera 8.0+, Safari
xmlHttp=new XMLHttpRequest();
return xmlHttp;
} catch (e) {
// Internet Explorer
try {
xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
return xmlHttp;
} catch (e) {
try {
xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
return xmlHttp;
} catch (e) {
alert("Tu navegador no soporta AJAX!");
return false;
}}}
}

function CargarDatos(_pagina,capa) {

var ajax;
ajax = ajaxFunction();
ajax.open("POST", _pagina, true);
ajax.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded");
ajax.onreadystatechange = function()
{

if (ajax.readyState==1){
document.getElementById(capa).innerHTML = " Aguarde por favor...";
}

if (ajax.readyState == 4)
{
document.getElementById(capa).innerHTML =
ajax.responseText;

}}
ajax.send();

} 
```

这是我调用这个函数的行

```
<li><h:commandLink  action="#{personal.cargarEvento}" onclick="CargarDatos('pages/Politica/nacional/inicio.html','content'); " value="Nacional" > 
```

如果我使用这条线，渲染工作

```
<li><h:commandLink  action="#{personal.cargarEvento}" onclick="mojarra.jsfcljs (CargarDatos('pages/Politica/nacional/inicio.html','content')); " value="Nacional" > 
```

但是会生成一个 JavaScript 错误，而不是调用我的 Bean。

目标是当我单击某个元素在 div 中呈现其他页面并同时在一个 bean 中执行某些方法时。

怎么了？

我怎样才能让它工作？

# c# - 以安全模式以编程方式重新启动，然后执行程序

> ID：13276147
> 
> 赞同：8
> 
> 时间：2012-11-07T18:47:44.767
> 
> 标签：c#, vb.net, reboot

我有一个程序，单击 is 按钮后，我希望出现一条消息，告诉用户计算机正在重新启动（使用 ok/cancel 选项），然后计算机将重新启动。然而，更重要的是，我希望它重新启动到安全模式。然后当用户登录到安全模式时，它会在启动时自动启动一个程序。

现在我意识到这可以通过使用 /safemode 以编程方式编辑 boot.ini 来实现，计算机登录后启动程序的任务，然后告诉计算机重新启动。但是，假设最终用户没有足够的 Windows 知识来扭转这些手动设置。

我想要的是，在最终用户在 Windows 安全模式下完成程序后，他们可以简单地重新启动计算机并继续使用 Windows，而无需手动将任何设置更改为启动进入安全模式之前的方式。

注意* 将在安全模式下运行的程序已经过测试，可以在安全模式下运行。我只需要知道如何让最终用户进入安全模式并自动运行程序，而最终用户并不知道如何反转这些设置。

任何人都可以提出一种方法来执行所有这些疯狂的事情吗？C# 或 vb.net 中的示例会很棒！

先感谢您！

本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:18:29.303

您可以调用运行此命令的进程

```
bcdedit /set {current} safeboot Minimal 
```

然后使您的应用程序成为 Windows 服务并添加一个带有服务名称的注册表项

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SafeBoot\Minimal\您的服务名称

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T15:36:22.053

您可以通过在注册表中输入一个值来重置安全启动参数，`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce` 一旦用户重新启动进入安全模式，它将运行

我不确定这部分，但我在批处理文件中使用它来重置 bcdedit 值，因此它可能适用于您的程序，也可能不适用于您的程序。

```
/v "*UndoSB" /t REG_SZ /d "bcdedit /deletevalue {current} safeboot"` 
```

原始bat命令：

```
bcdedit /set {current} safeboot network
REG ADD HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\RunOnce /v "*UndoSB" /t REG_SZ /d "bcdedit /deletevalue {current} safeboot"
SHUTDOWN -r -f -t 07 
```

# android - 均衡器 - 未加载效果库

> ID：13276155
> 
> 赞同：10
> 
> 时间：2012-11-07T18:48:20.350
> 
> 标签：android, media-player, equalizer

[我遇到了与此处](https://stackoverflow.com/questions/10536170/equalizer-not-always-supported-even-when-api-9)描述的几乎相同的问题，这篇文章中的回答对我没有帮助，我在设置频段级别后立即释放均衡器。它在我的 4.0.4 设备上完美运行，在朋友的 2.3.5 设备上运行良好，它在一小部分设备上崩溃，并且在这些设备上运行的 android 版本无关紧要。

所以有错误

`Equalizer mEqualizer = new Equalizer(0, mediaPlayer.getAudioSessionId());`

```
java.lang.UnsupportedOperationException: Effect library not loaded
        at android.media.audiofx.AudioEffect.<init>(AudioEffect.java:355)
        at android.media.audiofx.Equalizer.<init>(Equalizer.java:149) 
```

我不知道如何解决这个问题，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T12:02:37.167

确保在使用均衡器后重新启动设备并使用 release() 再次对其进行测试，在寻找线索 2 天后它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T06:54:28.450

从文档中，您必须在 Equalizer、MediaPlayer、Visualizer 等上调用 release() 才能正常退出，否则在重新启动应用程序时会看到此错误。唯一的补救措施是重新启动，如本线程前面所述。

这是 Android 应用程序生命周期使事情变得有点困难的地方，因为应用程序永远不应该退出（只是暂停和恢复），除非操作系统出于内存原因绝对需要，或者发生重新启动。在这两种情况下都会调用您的应用程序 onDestroy() 方法。

您可以将 release() 放在 onDestroy() 中，这将满足已部署应用程序的 Android 生命周期。您的用户不会看到此错误。

然而，在开发中存在一个问题：像 Eclipse 之类的 IDE（它实际上是一个用于构建 IDE 的框架，并不意味着它本身就是一个 IDE……）将终止应用程序进程，而不是向其发送销毁消息。这违反了生命周期并且 release() 没有被调用。

这也是你永远不应该调用 System.exit() 的原因。它违反了生命周期，冒着不正常退出的风险，就像这样。

所以你的进程不正常地退出了。只发生在开发中，而不是部署中。一种补救措施是不使用 eclipse 中的设备窗口来停止进程。这不是停止，而是杀戮。

当您在已经有一个实例运行的情况下运行应用程序项目时，Eclipse 也会不优雅地终止（违反生命周期）该进程。

正如医生所说，如果很疼，请不要这样做：而是使用将实际生命周期消息发送到应用程序的调试器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T12:45:31.060

这取决于设备上加载的 Android 版本。

此日志意味着没有库来实现 AudioEffect 功能。

恐怕没有解决方案，而是将一些第三方音频效果库导入您的项目

# ios - iOS Mapkit - 如何将用户的位置偏移指定数量

> ID：13276160
> 
> 赞同：0
> 
> 时间：2012-11-07T18:48:40.753
> 
> 标签：ios, location, mapkit, offset

我正在开发一个应用程序，它使用用户的位置与其他用户一起显示在地图上。

我想确保所有用户在向其他用户公开显示他们的位置时都有一点隐私，所以我希望只用指定的偏移量（比如说 1 英里）设置他们的位置并显示“已编辑”位置给所有其他用户，同时仍向当前用户显示“确切”位置。

示例 - 如果我正在查看地图，我希望我的“用户位置”（蓝点）稍微准确，而所有其他玩家会看到我的位置与真实位置略有偏移。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:22:21.447

我认为您*真正*想要回答的问题是：

### 如何以保护用户隐私的方式将用户的位置转换为“近似位置”？

这不是一个简单的问题：

*   偏移特定距离不起作用：
    *   如果方向是固定的，那么攻击是微不足道的。
    *   如果方向变化不够频繁，那么攻击者只需等待识别看起来像道路的东西。
    *   如果方向变化太频繁，那么他们往往会围绕目标的房屋/工作形成一个 1 英里的圆圈。
*   随机距离/方向偏移不起作用；攻击者只需要收集足够的样本；集群可能以目标的家庭/工作为中心。
*   天真地量化到网格（例如“X 在这个网格正方形内”）会告诉你目标何时穿过网格边界。如果目标位于网格边界上，这尤其糟糕。

这里有一些效果更好的东西，但仍然（最终）会泄露用户的位置：

*   选择一个（大约）1 英里的网格。对于“方形”网格，您可以使用[Pierce 梅花形投影](http://en.wikipedia.org/wiki/Peirce_quincuncial_projection)（有四个无限变形点，但您可以将它们全部制作在海上——看起来您可以将陆地上的变形限制为 2 倍）。[立方体](http://www.progonos.com/furuti/MapProj/Normal/ProjPoly/projPoly2.html)上也有投影，对于三角形网格，还有[二十面体](http://www.progonos.com/furuti/MapProj/Normal/ProjPoly/projPoly3.html#IcosahedralMaps)。
*   当您第一次需要报告用户的位置时，请给出网格上最近的点。还要选择 1 到 2 个网格“正方形”之间的阈值距离，左右。
    *   当用户在网格正方形中心的阈值距离内时，继续报告相同的网格正方形。否则，重复。

如果用户碰巧生活在网格边界上，最终仍然会很明显。有多种方法可以*尝试*解决此问题（例如，偏向于报告您之前报告过的网格方块），但这些方法最终都会失败。

这似乎很像尝试通过使用有损压缩（近似过程）来删除数字水印（用户的实际位置），同时产生听起来/看起来像原始的输出图像/音频（近似位置）。（如果您将“水印”视为用户的日常习惯，则该类比会更好一些，除非您确切知道这些习惯是什么并且可以删除它们，否则它将在输出中可见。）

或者在信号处理方面：低 SNR 仅仅意味着您必须听更长时间才能提取信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:32:04.397

您是否将其他所有人都显示为图钉？如果您在确切位置显示图钉但其他用户不在那里，这可能会很奇怪。例如，如果某人在北一英里处，而您将他们的 pin 显示在与当前用户相同的位置。也许你应该用 MKOVerlay 圆圈显示其他用户，然后根据用户 ID 使用一些计算将其稍微偏离中心，这样人们就不会发现它总是向东移动 500m，从而很容易看到这里有人。

无论您是否更改显示，您寻求的代码都在这里：[获取当前位置、方位和距离的 GPS 坐标](https://stackoverflow.com/questions/10522751/get-the-gps-coordinate-given-the-current-location-bearing-and-distance)

# javascript - 如何创建 HTML+jScript 滚动触发框

> ID：13276165
> 
> 赞同：3
> 
> 时间：2012-11-07T18:48:53.743
> 
> 标签：javascript, html, blogger

我在 Blogger.com 上有一个博客，我想添加一个滚动触发框，例如 Dreamgrow 或 Wordpress 的 Qoate 滚动触发框。[我用 jQuery](http://dannyvankooten.com/189/scroll-triggered-box-with-jquery/)提到了滚动触发框。我已经创建了一个 HTML 文件并对其进行了测试，但这对我不起作用。可能是我在某个地方弄错了。我的编码是

```
<html>

<head>

<title>Scroll Triggered Box With jQuery</title>

<style type="text/css">
.Comments
{
font:georgia;
display:none;
}

</style>

</head>

<body>

<script type="text/javascript">
    $(document).ready(function () {
        $(window).scroll(function () {
            var y = $(window).scrollTop();
            var c = $('#comments').offset();
            if (y > (c.top - $(window).height())) {
                $('#the_box').fadeIn("slow");
            } else {
                $('#the_box').fadeOut('slow');
            }
        });
    });
</script>

<div>
<!--My long post here-->
</div>

<div class="Comments" id="the_box">
This is the DIV that triggers I scroll down to Comments</br>
This is the DIV that triggers I scroll down to Comments</br>
This is the DIV that triggers I scroll down to Comments</br>
This is the DIV that triggers I scroll down to Comments</br>
This is the DIV that triggers I scroll down to Comments</br>
This is the DIV that triggers I scroll down to Comments
</div>

</body>

</html> 
```

我在 jScript 方面有点弱。我不知道 jScript 是如何工作的。

**如何解决我的问题并使其在我的 Blogger.com 博客中正常工作？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T03:39:20.810

我可以告诉你的代码是乱码。

```
 var a =$(window).height();
  var num = c-y;
 if (y > num){
   do your function
    }else{
  do whatever
    } 
```

# android - Android：仅加载大图像的细节

> ID：13276166
> 
> 赞同：2
> 
> 时间：2012-11-07T18:48:57.810
> 
> 标签：android, out-of-memory, large-files, imagemap

我正在做一个需要使用大图像作为地图的项目。该图像约为 95MB，分辨率为 12100 x 8000 像素。

我不需要一次完整的图像，我只需要 1000 x 1000 像素的细节（它并不总是相同的细节，只是抓住相同的部分不是我可以使用的解决方案）。所以我不能只用`BitmapOptions`.

我环顾四周，发现了创建一个`FileInputStream`（图像在 SD 卡上）的想法，然后我可以使用`decodeStream(InputStream is, Rect outPadding, BitmapFactory.Options opts)`. 这样我就不会将整个内容加载到内存中。我试过了，但是当我尝试加载图像时它只是崩溃了。这是我的代码：

```
FileInputStream stream = null;
try {
    stream = new FileInputStream(path);
} catch(Exception e) {
    Log.e("inputstream",e.toString());
}
Rect rect = new Rect(a,b,c,d);
return BitmapFactory.decodeStream(stream, rect, null); 
```

当我尝试加载图像时，活动关闭并且 LogCat 告诉我`java.lang.outOfMemoryError`。为什么会崩溃？我认为使用流它应该“即时”处理图像，但我对错误的唯一解释是它试图将孔图像加载到内存中。有谁知道我如何从图像中加载细节，或者为什么这个想法不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:17:16.897

它崩溃了，因为所有这些 95M 都被吸入内存进行处理。此调用不会忽略流的某些部分 - 它会将整个内容放入内存，然后尝试对其进行操作。您可以拥有的唯一解决方案是拥有某种执行相同操作的服务器端代码，或者如果您不想在服务器上执行此操作 - 提供大图像的缩略图。而且我强烈建议不要在任何时候拉整个 95M

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:28:18.157

BitmapRegionDecoder 没有帮助吗（我意识到它的级别 10）？

# c# - SQL 命令返回无效的对象名称 database.table

> ID：13276173
> 
> 赞同：1
> 
> 时间：2012-11-07T18:49:36.617
> 
> 标签：c#, sql-server, sqlcommand

我运行这段代码：

```
 SqlConnection polaczenie;
                    polaczenie = new SqlConnection(dane_polaczenia);
                    SqlCommand cmd = new SqlCommand();
                    cmd.Connection = polaczenie;
                    polaczenie.Open();
                    cmd.CommandText = @"SELECT * FROM test.test";
                    cmd.ExecuteNonQuery(); 
```

执行后我得到了异常`Invalid object name 'test.test'.`

数据库和表值正确。

如何正确指定`database.table`？`CommandText`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:51:14.173

```
 cmd.CommandText = @"SELECT * FROM test.dbo.test"; 
```

或者

```
 cmd.CommandText = @"SELECT * FROM test..test"; 
```

# c# - 如何为模型上可用于 Silverlight DataGrid 列排序的特定属性指定 IComparer

> ID：13276175
> 
> 赞同：0
> 
> 时间：2012-11-07T18:49:40.927
> 
> 标签：c#, silverlight, datagrid, icomparer

我有一个 Silverlight 数据网格，其中的一列绑定设置为模型上的字符串属性。这些字符串是字母数字的，所以我创建了一个自定义 IComparer 来对它们进行适当的排序。我的问题是如何在按此列排序时强制网格使用此自定义比较器？

我的一个想法是可能有一些属性可以应用于我绑定到的模型的字符串属性，它会明确指定在将此值与另一个字符串进行比较时要使用的比较器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:54:18.927

如果将网格绑定到 ViewModel，则在获取绑定到 View 的属性中使用 ICompare。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:59:12.333

就像下面的属性一样，但在您的情况下，您应该使用您的 ICompare 返回。

```
private ObservableCollection<ListOfMyClassType> myGridItemSource;
public ObservableCollection<ListOfMyClassType> MyGridItemSource
{
      get { return myGridItemSource; }
      set { myGridItemSource = value; OnPropertyChanged("MyGridItemSource");}
} 
```

# dynamics-crm-2011 - 如何连接到 CRM Dynamics Online Odata 端点 LinqPad？

> ID：13276178
> 
> 赞同：3
> 
> 时间：2012-11-07T18:49:56.010
> 
> 标签：dynamics-crm-2011, odata, linqpad

我可以使用 LinqPad 中的默认 Odata 驱动程序连接到自托管的 CRM 站点。我在“WCF 数据服务 (OData) 连接”对话框中使用的自托管 URI 格式为[http://MyServer.com/MyOrgName/xrmservices/2011/OrganizationData.svc](http://MyServer.com/MyOrgName/xrmservices/2011/OrganizationData.svc)。用户名的格式为“域\用户名”。

当我尝试为 CRM Online 实例遵循相同的格式时，它不起作用。 ![CRM 在线连接](../Images/f53f07bce1e0849c496c23106d3fa167.png)

我猜这要么是因为 https，要么是因为 windows live 凭据，但不知道要采取什么步骤来解决问题......

请注意，我想使用 odata 提供程序，而不是 CRM 2011 提供程序。odata 提供程序为我提供了检索数据的 URL，这对 javascript 非常有用。CRM 2011 提供程序提供了 fetch XML，这不是我想在这种情况下使用的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:13:15.273

我联系了 LinqPad，他们说他们目前不支持 Windows Live 身份验证。我猜想必须编写一个插件并使用[此](http://blogs.msdn.com/b/girishr/archive/2011/02/04/connecting-to-crm-online-2011-web-services-using-soap-requests-only.aspx)页面中的逻辑来处理身份验证问题。

# xcode - xcode - 使用命令行构建应用程序会导致配置文件错误

> ID：13276181
> 
> 赞同：0
> 
> 时间：2012-11-07T18:50:04.890
> 
> 标签：xcode, code-signing, ios-provisioning, provisioning-profile

我正在尝试从命令行存档应用程序，但它给出了以下错误：

```
Code Sign error: The identity 'iPhone Distribution: XXX' doesn't match any valid, non-expired certificate/private key pair in your keychains 
```

我正在使用以下几行来构建和存档应用程序：

```
export DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer

xcodebuild -target TestAppLogicTests \
-sdk iphonesimulator \
-configuration Debug \
TEST_AFTER_BUILD=YES \
clean build | /usr/local/bin/ocunit2junit.rb

# tests passed archive app

export DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer

/usr/bin/xcrun xcodebuild -scheme TestApp clean archive \
CODE_SIGN_IDENTITY="iPhone Distribution: XXX" 
```

我确定我的 CODE_SIGN_IDENTITY 是正确的（我已经在 .pbxproj 文件中检查过它）。我已经尝试重新下载我的分发证书，但也没有用。它在 xCode 本身中运行良好。

有人知道我可以尝试什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:45:06.913

打开钥匙串。你看到你的开发者（或发行版）证书了吗？

如果是，您可以单击它以打开下拉列表吗？在它下面，您是否看到一个名为 private key 的文本以及其他内容？

如果您没有看到任何下拉列表和私钥，您必须：

*   从钥匙串启动“向权威机构请求证书”
*   将证书导出到您的硬盘上。
*   将此证书上传到您的 Apple 开发者帐户的配置文件部分（撤销旧证书）
*   使用更新的证书更新您的配置文件（进入每个文件并检查您的证书）
*   通过打开和刷新 XCode 下载新的配置文件
*   关闭 XCode。
*   使用命令行构建。

如果这令人困惑，那么有很多问题可以更详细地解释这一点，比如[这个](https://stackoverflow.com/questions/2108503/code-sign-error-the-identity-iphone-developer-doesnt-match-any-valid-certifi?lq=1)。

# objective-c - 在 ios6 下横向启动应用程序同时支持所有方向

> ID：13276188
> 
> 赞同：2
> 
> 时间：2012-11-07T18:50:31.570
> 
> 标签：objective-c, ipad, ios6, autorotate

我已经进行了大量研究，但仍然无法找到解决方案......

我有一个支持所有方向的应用程序。当应用程序在 iPad 上运行时，我希望它以横向模式启动。然后，如果他们选择，用户可以旋转到纵向。在 ios5 下，我通过在 info.plist 文件中将 iPad 支持的方向设置为 lansdcape left 来实现这一点。然后，我在每个视图控制器中使用 shouldAutorotateToInterfaceOrientation 方法来允许应用程序运行时的所有方向。

然后我更改了我的代码以支持 iOS6 的新定向方法，但是当我在 iPad 上运行应用程序时，它根本没有旋转。然后我更改了 info.plist 文件以支持 iPad 的所有方向。这解决了 iPad 不自动旋转的问题，但现在我不知道如何强制应用程序最初以横向模式打开。有任何想法吗？

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:19:34.623

我最近遇到了类似的事情，虽然我的问题是我想在 iPhone 应用程序中强制纵向，但允许电影以横向播放。这是我所做的：

向我的应用程序委托添加一个属性来存储我想要允许的方向：

```
@property (nonatomic, assign) NSUInteger supportedOrientations; 
```

然后在 app 委托中，实现了新的 iOS 6 方法：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {

    return supportedOrientations;
} 
```

在应用程序启动时，我强制肖像：

```
self.supportedOrientations = UIInterfaceOrientationMaskPortrait; 
```

然后，一旦应用程序完成启动并且我展示了我的根视图控制器，我将它设置为支持两个方向：

```
self.supportedOrientations = UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscape; 
```

我必须添加子类化 UINavigationController 的附加步骤以防止之后旋转，因为我想允许横向视频但不允许旋转：

```
- (BOOL)shouldAutorotate {

    return FALSE;
} 
```

但这只是为了提供信息。你不需要那个

# objective-c - Mac OSX - 如何使用 Cocoa 甚至纯 C 函数获取代理配置？

> ID：13276195
> 
> 赞同：5
> 
> 时间：2012-11-07T18:50:50.763
> 
> 标签：objective-c, macos, cocoa, networking, nsurlconnection

我注意到我的应用程序没有使用机器可用的代理设置（我正在使用[Charles 代理](http://www.charlesproxy.com/)来测试代理配置）。使用 NSURLConnection 进行调用的应用程序的一部分正确使用代理并使用代理发出请求，应用程序的另一部分（显然是在 Mono 上运行的 MonoMac 应用程序）没有。

它不断发出请求，就好像没有配置代理一样。是否有一个函数或对象可以用来获取 NSURLConnection 正在使用的相同代理配置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T22:04:07.697

为您提供所有代理信息的函数是[SCDynamicStoreCopyProxies()](http://developer.apple.com/library/mac/#documentation/Networking/Reference/SCDynamicStoreCopySpecific/Reference/reference.html)，可以如下例所示调用它（完成后，您还必须访问`CFRelease`所有这些对象，因为它们都来自 CF 而不是直接 Cocoa 对象):

```
#import <Foundation/Foundation.h>
#import <SystemConfiguration/SystemConfiguration.h>

int main(int argc, const char * argv[])
{

  @autoreleasepool {

    CFDictionaryRef proxies = SCDynamicStoreCopyProxies(NULL);

    CFIndex count = CFDictionaryGetCount(proxies);

    NSLog(@"Number of keys is %ld", count);

    NSDictionary * proxyConfiguration = (NSDictionary*) proxies;

    for ( id key in proxyConfiguration.keyEnumerator ) {
      NSLog(@"Pair is %@ -> %@", key, [proxyConfiguration valueForKey: key]);
    }

  }
    return 0;
} 
```

输出将类似于：

```
2012-11-07 16:33:57.844 network-test[6501:403] Number of keys is 12
2012-11-07 16:33:57.847 network-test[6501:403] Pair is HTTPEnable -> 1
2012-11-07 16:33:57.848 network-test[6501:403] Pair is HTTPSProxy -> 127.0.0.1
2012-11-07 16:33:57.848 network-test[6501:403] Pair is ExceptionsList -> (
    "www.google.com"
)
2012-11-07 16:33:57.849 network-test[6501:403] Pair is HTTPSPort -> 8888
2012-11-07 16:33:57.850 network-test[6501:403] Pair is __SCOPED__ -> {
    en1 =     {
        ExceptionsList =         (
            "www.google.com"
        );
        FTPPassive = 1;
        HTTPEnable = 1;
        HTTPPort = 8888;
        HTTPProxy = "127.0.0.1";
        HTTPSEnable = 1;
        HTTPSPort = 8888;
        HTTPSProxy = "127.0.0.1";
        SOCKSEnable = 1;
        SOCKSPort = 8889;
        SOCKSProxy = "127.0.0.1";
    };
}
2012-11-07 16:33:57.850 network-test[6501:403] Pair is HTTPProxy -> 127.0.0.1
2012-11-07 16:33:57.851 network-test[6501:403] Pair is SOCKSPort -> 8889
2012-11-07 16:33:57.852 network-test[6501:403] Pair is SOCKSProxy -> 127.0.0.1
2012-11-07 16:33:57.852 network-test[6501:403] Pair is HTTPSEnable -> 1
2012-11-07 16:33:57.853 network-test[6501:403] Pair is SOCKSEnable -> 1
2012-11-07 16:33:57.853 network-test[6501:403] Pair is HTTPPort -> 8888
2012-11-07 16:33:57.854 network-test[6501:403] Pair is FTPPassive -> 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:00:16.123

[SystemConfiguration](http://developer.apple.com/documentation/Networking/Conceptual/SystemConfigFrameworks/SC_Intro/SC_Intro.html)框架中的[代理](http://developer.apple.com/documentation/Networking/Conceptual/SystemConfigFrameworks/SC_UnderstandSchema/SC_UnderstandSchema.html#//apple_ref/doc/uid/TP40001065-CH203-CHDIHDCG)字典将包含此信息

# php - 如何使用 php 按字母顺序对该数组进行排序并使用 foreach 循环遍历它

> ID：13276197
> 
> 赞同：1
> 
> 时间：2012-11-07T18:50:59.320
> 
> 标签：php, arrays, foreach, ksort

我将这些数据存储在一个数组中`$eventTitles`。我正在尝试按字母顺序对其进行排序。

```
Array (
    [Customer Challenge - Sustainability] => Customer Challenge - Sustainability
    [Manifesto Stores] => Manifesto Stores
    [Helpful Heroes] => Helpful Heroes
    [Ben 5 places left test] => Ben 5 places left test
    [Ben sold out test] => Ben sold out test
    [Ben 1 space left test] => Ben 1 space left test
    [Follow the Product] => Follow the Product
    [Living the Operating Model] => Living the Operating Model
    [Leaders Unplugged] => Leaders Unplugged
    [Market Trends] => Market Trends
    [FINAL MASTER EVENT CONFIG - DO NOT AMEND] => FINAL MASTER EVENT CONFIG - DO NOT AMEND
    [You Can Do It] => You Can Do It
    [Customer Challenge - Communicating EDLP] => Customer Challenge - Communicating EDLP
) 
```

使用：

```
$eventTitles = ksort($eventTitles);

foreach($eventTitles as $title) {
    $t = urlencode($title);
    //if statement to check if the title is in the url param 
    //and if it is we can put selected in the left hand nav as a class
    if($_GET["title"] == $title ) {
        $selected = ' class="selected"';
    } else {
        $selected = ' ';
    }
    $rtnStr .= '<li><a'.$selected.'href="list.php?title='.urlencode($title).
                       '" data-value="'.$title.'">'.$title.'</a></li>';
} 
```

当我尝试遍历标题并将它们逐个呈现时会产生以下错误：

> 警告：在第 281 行的 model.php 中为 foreach() 提供的参数无效

任何关于出了什么问题的线索我都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:54:49.987

`ksort`接受一个数组引用并返回一个**[布尔值](http://php.net/manual/en/language.types.boolean.php)**（`true`或`false`）。

当你这样做时，`$eventTitles = ksort($eventTitles);`你正在覆盖`$eventTitles`一个替换数组的布尔值。

做就是了：

```
ksort($eventTitles); 
```

[上的文档`ksort(...)`](http://php.net/manual/en/function.ksort.php)

# c# - PDB 文件和错误处理？

> ID：13276201
> 
> 赞同：1
> 
> 时间：2012-11-07T18:51:07.950
> 
> 标签：c#, .net, vb.net, winforms, exception

我们有一个跨不同客户运行的 Windows 窗体应用程序，当他们遇到错误时，我们登录到数据库并使用记录的堆栈信息，我们纠正了问题。

但是，有些问题仅在生产中出现，例如堆栈显示

> CalculateTotals（方法名称）：NullReferenceException：对象引用未设置为对象的实例。

CalculateTotals 是一个方法名称，它有很多子方法调用和更多行，我无法获得它失败的代码的确切行号。

我的应用程序的 PDB 文件没有发送给客户（当他们安装时），

我如何保留该 .PDB 文件的副本（可能位于远程位置，而不是使其成为安装的一部分）并使用它来调试错误并获取确切的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:11:08.360

如果需要，可以在发布中包含 pdb 文件，但也可以使用**IntelliTrace**在 Visual Studio 中调试生产数据。

简而言之，IntelliTrace：

> IntelliTrace 的作用类似于飞机中的黑匣子。它跟踪程序执行中的重要点，并允许您稍后回放在这些点发生的事情。

看看这些博客文章：

*   [在生产中的应用程序上运行 IntelliTrace](http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/16/running-intellitrace-on-applications-in-production.aspx)
*   [IntelliTrace - 什么和如何](http://dotnet.dzone.com/articles/intellitrace-%E2%80%93-what-and-how)。

当然，您可以搜索网络并找到有关 IntelliTrace 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:29:11.037

只有当 CLR 可以在运行时找到 PDB 文件时，您才会在异常的堆栈跟踪中获得行号信息。您想从远程位置执行此操作使这变得困难，但这并非不可能。CLR 使用的底层 API 是 DIA（调试接口访问），它反过来使用调试 API。

您必须以与设置调试会话相同的方式设置机器，以使调试器使用符号服务器。要求是您首先设置一个可以通过 Internet 访问的符号服务器，类似于 Microsoft 符号服务器。然后设置 _NT_SYMBOL_PATH 环境以引用该服务器。描述此内容的核心 MSDN 库页面[位于此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681416%28v=vs.85%29.aspx)。请注意，如果它不起作用，*则不容易进行故障排除。*

一种完全不同的方法是从崩溃的进程创建一个小型转储。您需要调用 MiniDumpWriteDump()。请注意，.NET 进程的良好小型转储不是非常小型，您需要管道来拥有足够的存储空间并以某种方式将其传输到您的计算机上。

# jquery - 字符串截断动态设置

> ID：13276203
> 
> 赞同：1
> 
> 时间：2012-11-07T18:51:18.417
> 
> 标签：jquery, html, css, symfony, twig

我正在使用 Symfony2、Twig 和 Twitter Bootstrap。我还没有找到以下问题的任何解决方案。

在我的 Web 应用程序的某些部分，我使用相对显示的表格（使用百分比）。

对于那些太长而无法容纳在“保留”空间中的字段值，我正在使用 Twig 或 Javascript 函数来截断字符串，以便它们能够正确适应。问题是：

有没有办法根据显示的宽度动态设置截断的长度？请注意，由于表格是在调整窗口大小时动态显示和重置的，因此这些宽度会随时更改。

有什么方法可以动态截断字符串？

我正在使用的一些代码：

枝条：

```
<td>{{ p.name|truncate(50) }}</td> 
```

JAVASCRIPT：

```
// Truncates a string and adds "..."
function truncate_string(str, len){
    if (str.length > len)
        return str.substring(0, len) + "...";
    else
        return str;
} 
```

`len`解决方案是根据 TD 的宽度和要显示的字符串的结果宽度动态设置该参数。

我们是否通过 jQuery、CSS 或其他方式知道根据字体大小和类型的字符串的确切宽度？或者，换句话说，我们如何知道一个字符串的最大数量将能够具有以像素为单位的特定宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:08:26.107

您可以[扩展 twig 过滤器](http://twig.sensiolabs.org/doc/advanced.html)以创建自己的过滤器或像这样编辑您的 CSS 样式/HTML

CSS：

```
table td{
    position:relative;
    overflow:hidden;
}
table td > span{
    display: inline-block;
    position:relative;
    height: 18px;
    min-width: 200px;
} 
```

HTML：

```
<table>
<tr>
    <td><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc imperdiet ante magna, non pretium sem. </span></td>
    <td><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc imperdiet ante magna, non pretium sem. </span></td> 
</tr>
<tr>
    <td><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc imperdiet ante magna, non pretium sem. </span></td>
    <td><span>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc imperdiet ante magna, non pretium sem. </span></td> 
</tr> 
```

因此，您的 TD 内容会自动调整大小，无需截断文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:37:17.693

有一个[jQuery 插件可以满足](http://polarblau.github.com/smarttruncation/)您的要求。除了javascript之外，这将无法实现。也许 CSS 向导可以通过使用`overflow`和`after`属性来构建解决方案。根据我的判断，只有在元素中的每个字符串都附加了一个固定字符串时才会起作用（永远不会显示完整的字符串）。

另请查看相关[的较旧的 SO 答案](https://stackoverflow.com/questions/802175/truncating-long-strings-with-css-feasible-yet)。

# android - 从网格视图单击时如何显示特定图像

> ID：13276207
> 
> 赞同：2
> 
> 时间：2012-11-07T18:51:39.287
> 
> 标签：android

我正在使用网格视图在我的应用程序中显示一些图像

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:columnWidth="90dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

这是处理图像的以下代码

```
public class Gallery extends Activity {
    Integer[] imageIDs = {
            R.drawable.a,
            R.drawable.b,
            R.drawable.c,
            R.drawable.d,
            R.drawable.e,
            R.drawable.f,
            R.drawable.g,
            R.drawable.k,
            R.drawable.j,
            R.drawable.i,
            R.drawable.h,

    };
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ImageAdapter(this));

        gridView.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView<?> parent, 
            View v, int position, long id) 
            {                
                Toast.makeText(getBaseContext(), 
                        "pic" + (position + 1) + " selected", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    public class ImageAdapter extends BaseAdapter 
    {
        private Context context;

        public ImageAdapter(Context c) 
        {
            context = c;
        }

        //---returns the number of images---
        public int getCount() {
            return imageIDs.length;
        }

        //---returns the ID of an item--- 
        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        //---returns an ImageView view---
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            ImageView imageView;
            if (convertView == null) {
                imageView = new ImageView(context);
                imageView.setLayoutParams(new GridView.LayoutParams(185, 185));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(5, 5, 5, 5);
            } else {
                imageView = (ImageView) convertView;
            }
            imageView.setImageResource(imageIDs[position]);
            return imageView;
        }
    }    
} 
```

我想在从屏幕上单击时以全尺寸显示特定图像。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T21:16:42.760

在您的 OnItemClickListener 中，您应该添加您想要开始一个新活动并通过 putExtra 将图像的位置传递给它：

```
 gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {                
            Toast.makeText(getBaseContext(), 
                    "pic" + (position + 1) + " selected", 
                    Toast.LENGTH_SHORT).show();

            Intent intent = new Intent(Gallery.this,FullImage.class);
            intent.putExtra("imgPos",position);
            Gallery.this.startActivity(intent);
        }
    }); 
```

正如您在意图中看到的那样，您调用了一个 FullImage 类，您应该创建它：

```
 public class FullImage extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.full_image);
    int position = getIntent().getExtras().getInt("imgPos");
    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(Gallery.imageIDs[position]);

} 
```

}

这就是 full_image 布局的样子，注意它有一个 ID 为 full_image_view 的 ImageView，在 FullImage 类中被尊崇

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" > 
<ImageView android:id="@+id/full_image_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/> 
```

您应该将 ImageID 设为静态 Integer，以便可以在 FullImage 类中引用它。

最后，别忘了在 AndroidManifest 中添加 FullImage 活动。

这应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:43:30.860

由于您想在新活动中显示您的图像，我会做这样的事情：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id) {                
    Intent intent = new Intent(Gallery.this, DisplayActivity.class);
    intent.putExtra("Image Int", imageIDs[position]);
    startActivity(intent);
} 
```

在您显示的活动中使用：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);

    int imageInt = getIntent().getIntExtra("Image Int", R.drawable.oops); // oops should be a fallback if an error happens
    ImageView imageView = (ImageView) findViewById(R.id.imageView);
    imageView.setImageResource(imageInt);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:04:33.780

根据位置从 imageIds 获取图像并显示它 - 启动新活动并传递图像 ID 或您希望的方式。

```
gridView.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, 
        View v, int position, long id) 
        {                
            int imageId = imageIDs[position];
            //now you have clicked imageId so display it where you want
        }
    }); 
```

# vim - 如何使用 VIM 有效地浏览 SASS/CSS 文件？

> ID：13276209
> 
> 赞同：5
> 
> 时间：2012-11-07T18:51:41.207
> 
> 标签：vim, sass

互联网这个领域最聪明的人！请告诉我如何使用 VIM 有效地浏览 SASS 中的代码库。标签栏没有显示 SASS 树，我也不能分层折叠样式声明。所以，问题是 - 如何使用标签栏和/或折叠 SASS/SCSS/CSS 文件？也许您可以建议我其他有效浏览 SASS 的方式？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:09:30.747

**折叠式的**

使用`set foldenable`和`set foldmethod=indent`在您的 中`~/.vimrc`，您可以使用 折叠所有定义`zM`并使用 恢复正常`zR`。使用`zj`and`zk`从一个折叠跳到另一个折叠。有关我现在要使用的非常酷的提示*以及*有关折叠的更多信息，请参阅[此答案。](https://stackoverflow.com/a/2132691/546861)*`:help fold`*

 ***标签**

有关有限的基于[ctags](http://ctags.sourceforge.net/)的解决方案，请参阅[此 q/a](https://stackoverflow.com/a/12924218/546861)。[这个要点](https://gist.github.com/1527856)是使用TagBar的[方法](http://majutsushi.github.com/tagbar/)。如果您想要一个包含类、ID 和标记名的层次结构树，这就是您需要首先尝试的。

**示波器**

你不会得到层次结构树或大纲，但[cscope](http://cscope.sourceforge.net/)是一个很棒的代码索引器，可能对直接跳转到已知选择器很有用。执行`$ cscope -R *.scss`并搜索类、ID 和标记名。点击`<CR>`匹配以`$EDITOR`在正确的线路打开您的。

* * *

我个人使用上面的“基于 ctags 的有限解决方案”和CtrlP[并](http://kien.github.com/ctrlp.vim/)`:CtrlPBufTag`取得`:CtrlpTag`了巨大的成功。但我只做基本的 CSS。*

# c# - 执行cmd提示命令出错的方法

> ID：13276210
> 
> 赞同：-3
> 
> 时间：2012-11-07T18:51:46.247
> 
> 标签：c#, string

我有这个方法

```
private void _executeCommand(string commandStr, int timeout)
         {

            try
            {
               System.Diagnostics.ProcessStartInfo procStartInfo =
                   new System.Diagnostics.ProcessStartInfo("cmd", "/c " + commandStr);
               procStartInfo.RedirectStandardOutput = true;
               procStartInfo.UseShellExecute = false;
               // Do not create the black window.
               procStartInfo.CreateNoWindow = true;
               // Now we create a process, assign its ProcessStartInfo and start it
               System.Diagnostics.Process proc = new System.Diagnostics.Process();
               proc.StartInfo = procStartInfo;
               proc.Start();
               Thread.Sleep(timeout);

            }
            catch (ExecutionEngineException e)
            {

               throw e;

            }} 
```

不知何故，如果我传递一个名为`myCmd`,的字符串`_executeCommand(myCmd, timeout)`，它什么也不做。但是，如果我传递 , 的确切字符串值`myCmd`，`_executeCommand("copy //data//file \"C://Program Files/myApp\"", timeout)`它就能够执行。谁能看到问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:25:35.613

如果您的命令有自己的参数，您想使用 /c 执行，则需要将整个命令及其参数括在 /c 之后用引号引起来。此外，如果您使用的路径包含空格作为命令的参数之一，您也必须引用它，即`@"/c ""copy ""C:\My Folder\Ny File.txt"" ""C:\My Other Folder"""""`

此外，如果您希望它执行多个命令，则必须将命令放在批处理文件中并执行该命令，或者将它们括在引号中并用 && 分隔它们，即`@"/c ""cd \ && dir"""`.

请注意，我的示例中的双引号是在 C# 中使用字符串文字时如何转义引号。前面`@`的字符串告诉编译器按字面意思获取字符串，而不是将`\`字符解释为特殊字符。

看看我对[在 C# 中将命令发送到 cmd 提示符的](https://stackoverflow.com/a/11768260/1015164)回答可能也是一个好主意，因为它解释了很多关于这些东西是如何工作的。

# python - 在 python 中，下面的 AutoVivification 类是如何工作的？

> ID：13276218
> 
> 赞同：13
> 
> 时间：2012-11-07T18:52:10.090
> 
> 标签：python, dictionary, autovivification

在寻找使用嵌套字典的方法时，我发现了[nosklo](https://stackoverflow.com/users/17160/nosklo)发布的以下代码，我想解释一下。

```
class AutoVivification(dict):
    """Implementation of perl's autovivification feature."""
    def __getitem__(self, item):
        try:
            return dict.__getitem__(self, item)
        except KeyError:
            value = self[item] = type(self)()
            return value 
```

测试：

```
a = AutoVivification()

a[1][2][3] = 4
a[1][3][3] = 5
a[1][2]['test'] = 6

print a 
```

输出：

```
{1: {2: {'test': 6, 3: 4}, 3: {3: 5}}} 
```

我是一个相当新手的程序员。我在业余时间学到了大部分我所知道的东西，我唯一的正式培训是在高中时的 Turbo Pascal。我理解并且能够以简单的方式使用类，例如使用`__init__`、类方法，以及使用`foo.man = 'choo'`.

我不知道方括号系列是如何通过类正确定向的（我认为它们是以`__getitem__`某种方式调用的），并且不明白它们是如何被如此简洁地处理而不必单独调用该方法三次的。

我的印象是`(dict)`类声明中的`__init__`.

我以前用过`try: except:`，不过，还是用非常简单的方式。在我看来`try`，当它运行时，它正在调用一系列函数`__getitem__`。我收集到，如果当前级别的字典存在，则尝试将通过并转到下一个字典。我认为`except`，当有 a 时运行，`KeyError`但我以前从未见过`self`这样使用过。 `Self`被当作​​字典对待，而我认为`self`是`class AutoVivification`……的一个实例，两者兼而有之吗？我从来没有像这样连续分配两次，`foo = man = choo`但怀疑它`value`指向`self[item]`while`self[item]`指向的结果`type(self)`。但`type(self)`会返回如下内容：`<class '__main__.AutoVivification'>`不会吗？我不知道末尾多余的圆括号是做什么用的。因为我不知道函数是如何被调用的，所以我不明白在哪里`value`返回。

抱歉有这些问题！这里面有很多我不明白的地方，而且我不知道在哪里可以找到它，除非我花了几个小时阅读文档，而在这些文档中我保留的很少。这段代码看起来可以满足我的目的，但我想在使用它之前理解它。

如果您想知道我在使用嵌套字典的程序中要做什么：我正在尝试以天文比例保存地图数据。虽然我无法创建嵌套 4 次的 10^6 项的字典/列表（即 10^24 项！），但空间大部分是空的，因此我可以将空值完全排除在外，只有在有东西时才分配。困扰我的是处理字典的有效方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-07T19:07:02.400

逐行：

```
class AutoVivification(dict): 
```

我们制作了 的子类`dict`，`AutoVivification`一种 的`dict`，带有一些局部变化。

```
def __getitem__(self, item): 
```

每当有人尝试通过索引查找访问实例上的项目时，都会调用该[`__getitem()__`钩子。](http://docs.python.org/2/reference/datamodel.html#object.__getitem__)`[...]`因此，每当有人这样做时`object[somekey]`，`type(object).__getitem__(object, somekey)`都会被调用。

我们将跳过`try`一会儿，下一行是：

```
 return dict.__getitem__(self, item) 
```

这将调用*未绑定*的方法`__getitem__()`，并将我们自己的实例与键一起传递给它。换句话说，我们将*原始* `__getitem__`类称为父类定义的`dict`。

现在，我们都知道如果`item`字典中没有键会发生什么，`KeyError`会引发 a。这就是`try:`,`except KeyError`组合的用武之地：

```
 try:
        return dict.__getitem__(self, item)
    except KeyError:
        value = self[item] = type(self)()
        return value 
```

因此，如果当前实例（它是 的子类型`dict`）没有给定键，它将捕获`KeyError`原始`dict.__getitem__()`方法抛出的异常，相反我们创建一个*新*值，将其存储`self[item]`并返回该值。

现在，记住它`self`是 的（子类）`dict`，所以它是字典。因此，它可以分配新值（顺便说一下，它会为此使用[`__setitem__`hook](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)），并且在这种情况下，它会创建*一个*与`self`. 那是另一个`dict`子类。

那么当我们调用时会发生什么细节`a[1][2][3] = 4`呢？Python 一步一步地经历这一步：

1.  `a[1]`导致`type(a).__getitem__(a, 1)`. 的自定义`__getitem__`方法`AutoVivification`捕获`KeyError`，创建 的*新*实例`AutoVivification`，将其存储在键下`1`并返回它。

2.  `a[1]`返回一个空`AutoVivification`实例。在该对象上调用下一个项目访问`[2]`，我们重复步骤 1 中发生的事情；有一个`KeyError`，一个新的实例`AutoVivification`被创建，存储在`2`键下，并且这个新实例被返回给调用者。

3.  `a[1][2]`返回一个空`AutoVivification`实例。在该对象上调用下一个项目访问`[3]`，我们重复步骤 1（和步骤 2）中发生的事情。有一个`KeyError`，一个新的实例`AutoVivification`被创建，存储在`3`键下，并且这个新实例被返回给调用者。

4.  `a[1][2][3]`返回一个空`AutoVivification`实例。现在我们在该实例中存储一个新值，`4`.

转到下一行代码后`a[1][3][3] = 5`，顶级`AutoVivification`实例已经有一个`1`键，并且该`return dict.__getitem__(self, item)`行将返回相应的值，该值恰好是`AutoVivification`在上面的步骤中创建的实例。

从那里，`[3]`项目访问调用将再次创建一个新`AutoVivification`实例（因为对象`a[1]`只有一个`2`键），我们再次执行所有相同的步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:05:31.503

请参阅[`object.__getitem__`](http://docs.python.org/2.7/reference/datamodel.html#object.__getitem__)文档作为开始。

该`class AutoVivification(dict)`声明创建`AutoVivification`了 的子类`dict`，因此它的行为与原样相同，`dict`除非它显式覆盖某些行为 - 就像这个类在覆盖 时所做的那样`__getitem__`。

调用`dict.__getitem__(self, item)`通常会改为：

```
super(AutoVivification, self).__getitem__(item) 
```

（至少在 Python 2.x 中；Python 3 具有更好的语法。）无论哪种方式，它所做的都是尝试让默认`dict`行为运行，但在不起作用的情况下实现回退。

`type(self)()`先查找`self`实例对应的类对象，然后调用类对象——在这种情况下和写一样`AutoVivification()`，看起来应该熟悉得多。

希望能为您解决问题！

# javascript - 根据输入的变化计算一个变量

> ID：13276221
> 
> 赞同：-3
> 
> 时间：2012-11-07T18:52:22.203
> 
> 标签：javascript, html, input, onchange

我有以下功能：

```
function updateInput(ish){
    document.getElementById("BetAmount").value = ish;
} 
```

我有以下 HTML 输入：

```
<input class="defaultText" type="number" name="BetAmount" id="BetAmount" onchange="updateInput(this.value)">

<input type="number" name="PotentialGain" id="PotentialGain" /> 
```

当用户输入下注金额数字（`BetAmount`）时，我想立即显示一个计算出来的数字`PotentialGain`，例如，可以通过将一个常数乘以用户输入的指定下注金额来找到。

我对 JavaScript 不是很熟悉，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:11:53.383

您的代码几乎是正确的 - 您在`BetAmount`字段中显示结果，因此看不到任何更改。

将您的代码更改为：

```
document.getElementById("PotentialGain").value = ish; 
```

这是一个[工作演示。](http://jsfiddle.net/nF72t/)我将事件更改`onkeyup`为`onchange`仅在模糊时发生 - 即当字段失去焦点时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:03:02.160

这是我使用的最后一个 JQuery 函数。

```
function changeBet(bet) {
var moneyline = <?php echo json_encode($win) ?>;
var gain = moneyline * bet;
document.getElementById("PotentialGain").value = gain;
} 
```

除了这些输入：

```
<input type="text" name="BetAmount[]" id="BetAmount" onkeyup="changeBet(this.value);" >
<input type="number" name="PotentialGain" id="PotentialGain" /> 
```

# mysql - 如果下一行是不同的值，MySQL SELECT 行？

> ID：13276222
> 
> 赞同：3
> 
> 时间：2012-11-07T18:52:24.173
> 
> 标签：mysql

我用谷歌搜索了很多，但我不太明白这一点。如果这是一个微不足道的问题，我深表歉意。

如果“击球手”列等于某个值并且下一行不是同一个击球手，我想选择一行。我试图获得代表击球最终音高的行。如果是最后一个投球，那么下一行将是一个新的击球手。如果有帮助，我将使用自动递增的 id 列。

编辑：

以下是数据的组织方式。现在，如果我想知道击球手“276055”被击出多少次，我会这样做：

```
SELECT * FROM `mlb2012` WHERE batter = "276055" AND atbat_event = "strikeout" AND atbat_pitch = "1" 
```

但如果我想知道他三振出局的次数，我需要知道 atbat 的最后一个音高的 pitch_des。

```
ID | Batter | atbat_pitch | atbat_event | pitch_des      | 
----------------------------------------------------------
1  | 457477 | 1           | Double      | Called Strike
2  | 457477 | 2           | Double      | In play, no out
3  | 452121 | 1           | Strikeout   | Foul
4  | 452121 | 2           | Strikeout   | Foul
5  | 452121 | 3           | Strikeout   | Called Strike
6  | 543569 | 1           | Walk        | Ball 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:16:09.273

伪代码（90% 的可能性）：

```
set @last_batter_id = NULL;

select batter_id, @last_batter_id,
  case when batter = "certain value" and batter_id != @last_batter_id then 'use me' else 'skip me' end as my_action,
  @last_batter_id := batter_id
from my_table 
```

如果您只想要想要使用的击球手，请包装最后一个查询：

```
select *
from (
   [ query from above ]
) foo
where foo.my_action = 'use me' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:34:10.957

有趣的问题。

看起来您想根据当前行上的 rowid 加入前一行的 rowid 并检查“batter”字段不相等，将该表连接到自身。使用左外连接处理最后一行（即如果没有后续行要连接，则返回）。不知道 mysql 语法，但尝试类似：

```
SELECT fr.* 
FROM mytable fr 
LEFT OUTER JOIN mytable nr 
ON fr.@rowid = nr.@rowid+1 
WHERE fr.batter <> nr.batter 
```

（你可以用 where 条件和 += 参数替换左外连接和 on 子句——我假设你已经掌握了基本的 MySQL 语法）。

# security - 我可以限制对特定计算机的网站访问吗？

> ID：13276225
> 
> 赞同：1
> 
> 时间：2012-11-07T18:52:45.993
> 
> 标签：security

我意识到 mac 地址或机器 ID 不会通过 Internet 传输，但是，我想锁定我们基于订阅的网站安全性，以便只有特定的计算机可以注册并访问其资源。

大型组织将订阅我们的服务，毫无疑问，他们的组织将拥有多个 ip。同样，我们希望他们的合格员工能够在其实体组织之外的设备上访问该网站（用于公路旅行演示等）。

是否有可靠的方法来实现这一目标（除了分配给每个帐户的用户名/密码）？如果没有，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:59:42.523

您不想通过 IP 限制访问，而是想使用实际上安全的东西。

HTTPS 连接上的用户名和密码至少应该是不可嗅探的，但您可能需要查看客户端 SSL 证书。它们可以[在 Apache](http://httpd.apache.org/docs/2.2/ssl/ssl_howto.html#accesscontrol)或其他 Web 服务器软件中进行配置。如果用户名/密码验证还不够，这是下一步（也许是最后一步）。

**更新：**

也就是说，许多应用程序提供商会做的是为订阅者提供一种为其帐户实施 ACL 的方法。您甚至可以强制人们在允许他们访问您的服务之前考虑他们的 ACL。这样想：

*   在您的系统中设置了一个帐户，允许从任何地方登录。创建后，ACL 为 UNSET。
*   用户登录并立即被定向到 ACL 设置页面，他们必须在其中提供与其帐户关联的 IP 地址或范围或子网。您可以很聪明地使用他们现有的 IP 地址或子网预先填充内容，甚至可以在 ARIN 上查找内容以查看他们的 IP 是否在分配给他们帐户上的公司名称的网络中。
*   一旦设置了 ACL（或者尽管您发出警告，他们已经确认他们希望保持 ACL 处于打开状态），他们就可以访问您的服务。
*   如果他们尝试从其他地方登录，他们（和您）会通过电子邮件（或 SMS 或其他方式）收到有关企图入侵的通知。
*   如果他们不再能够访问其 ACL 列出的 IP（即，由于新的上游 Internet 提供商和糟糕的计划，IP 重新编号），他们可以致电您的电话支持，他们将通过其他方式对其进行验证。可能是传真确认，因为那太安全了……

用户管理的 ACL 不是“万无一失”的方式，但它可能对您的需求足够有效，而且它肯定会向您的客户灌输一种感觉，即您将他们的最大利益放在心上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:57:22.560

没有万无一失的方法。这是网络的本质。您接受来自远程机器的数据，并且您必须至少在某种程度上信任它。

采用简单的用户名/密码方法。如果用户名和密码匹配，您必须相信它们是由用户名和密码所针对的人输入的。如果您需要客户端发送更多数据，这不会从根本上改变。

# php - 使用数组中的参数生成 URL

> ID：13276226
> 
> 赞同：72
> 
> 时间：2012-11-07T18:52:47.400
> 
> 标签：php, arrays

我需要像下面这样的数组：

```
$subids = Array
    (
        [s1] => one
        [s2] => two
        [s3] => three
        [s4] => four
        [s5] => five
        [s6] => six
    ) 
```

并生成一个 URL，例如[http://example.com?s1=one&s2=two&s3=three=&s4=four&s5=five&s6=six](http://example.com?s1=one&s2=two&s3=three=&s4=four&s5=five&s6=six)

并非总是定义所有子 ID，因此有时 s3 可能未定义，因此不应将其附加到 URL。此外，无论第一个 subid 是什么，它都必须有 ? 在它之前而不是与号 (&)

所以如果数组只是：

```
$subids = Array
    (
        [s2] => two
        [s6] => six
    ) 
```

那么 URL 需要是[http://example.com?s2=two&s6=six](http://example.com?s2=two&s6=six)

到目前为止，我有以下内容：

$url = ' [http://example.com](http://example.com) '

```
 foreach ($subids AS $key => $value) {
        $result[$id]['url'] .= '&' . $key . '=' . $value;
    } 
```

但是，我不确定附加 ? 在第一个键/值对的开头。

我觉得有一个 PHP 函数可以帮助解决这个问题，但我没有找到太多。如果 CI 提供了我可以使用的任何东西，我正在使用 Codeigniter。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-11-07T18:57:51.747

您只需要[http_build_query](http://php.net/manual/en/function.http-build-query.php)：

```
$final = $url . "?" . http_build_query($subids); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T18:59:43.203

您可以使用 with`http_build_query()`功能。来自 php.net 的示例：

```
<?php
$data = array(
    'foo' => 'bar',
    'baz' => 'boom',
    'cow' => 'milk',
    'php' => 'hypertext processor',
);

echo http_build_query( $data ) . "\n";
echo http_build_query( $data, '', '&amp;' );
?> 
```

并输出以下行：

```
foo=bar&baz=boom&cow=milk&php=hypertext+processor
foo=bar&amp;baz=boom&amp;cow=milk&amp;php=hypertext+processor 
```

您可以从源代码中阅读：[http ://www.php.net/manual/en/function.http-build-query.php](http://www.php.net/manual/en/function.http-build-query.php)

顺便说一句，如果您使用 WordPress，您可以使用此功能：[http ://codex.wordpress.org/Function_Reference/add_query_arg](http://codex.wordpress.org/Function_Reference/add_query_arg)

玩得开心。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-01T03:41:18.057

您可以使用[http_build_query()](https://www.php.net/manual/en/function.http-build-query)函数，但如果 url 来自外部函数，请务必进行一些验证。

```
$url = getUrlSomewhere();
$params = ['param' => 'value', 'param2' => 'value2'];
$queryParams = http_build_query($params);
if (strpos($url, '?') !== FALSE) {
    $url .= '&'. $queryParams;
} else {
    $url .= '?'. $queryParams;
} 
```

如果你有 PECL 扩展，你可以使用[http_build_url()](http://php.adamharvey.name/manual/en/function.http-build-url.php)，它已经考虑到如果你向预先存在的 URL 添加更多参数，或者没有其他验证。

# iphone - 在 UIScrollview 上停止动画

> ID：13276227
> 
> 赞同：0
> 
> 时间：2012-11-07T18:52:48.843
> 
> 标签：iphone, objective-c, ios, uiscrollview

我已经设置了一些代码来在 TimeInterval 之后自动滚动（分页）滚动视图。现在我想在 4 次后停止滚动视图动画。有人可以教我怎么做吗？

这是我的代码。

```
[NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(onTimer) userInfo:nil repeats:YES];

- (void) onTimer {

    // Updates the variable h, adding 320
    abc += 320;

    //This makes the scrollView scroll to the desired position
    [UIView animateWithDuration:1.5f animations:^{
      [scrollView setContentOffset:CGPointMake(abc, 0) animated:NO];
        }];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:56:01.360

首先将 ivar 添加到 NSTimer

```
{
    NSTimer *timer;
}

timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self selector:@selector(onTimer) userInfo:nil repeats:YES]; 
```

然后在`onTimer`

```
- (void) onTimer {
    //Create a static int
    static int repetition = 0;
    repetition ++;
    if(repetition == 4)
    {
       repetition = 0;
       //Stop the timer
       [timer invalidate];
    }

    // Updates the variable h, adding 320
    abc += 320;

    //This makes the scrollView scroll to the desired position
    [UIView animateWithDuration:1.5f animations:^{
        [scrollView setContentOffset:CGPointMake(abc, 0)animated:NO];

    }];
} 
```

# python - 验证算术序列python

> ID：13276235
> 
> 赞同：4
> 
> 时间：2012-11-07T18:53:16.360
> 
> 标签：python, math, sequence, verify

我只是想知道如何使用 python 检查以验证数字列表是否是算术的，因此列表中的每个项目之间是否有一个公共数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:56:59.100

这就是我要写的：

```
all((i - j) == (j - k) for i, j, k in zip(l[:-2], l[1:-1], l[2:])) 
```

您可以通过只计算一次差异来提高效率，但是如果您担心效率，您可以使用 numpy 并编写：

```
np.all((a[:-2] - a[1:-1]) == (a[1:-1] - a[2:])) 
```

甚至（保存切片）：

```
np.all(a[:-2] + a[2:] == 2 * a[1:-1]) 
```

可能最简洁的方法是使用 numpy.diff，因为它会自动将列表转换为 numpy 数组：

```
np.all(np.diff(l, 2) == 0) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T19:02:31.957

[`numpy.diff`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)如果您有权访问，则可以使用`numpy`：

```
>>> a = numpy.array(range(1, 15, 2))
>>> numpy.diff(a)
array([2, 2, 2, 2, 2, 2]) 
```

所以你可以做

```
>>> d = numpy.diff(a)
>>> not numpy.any(d-d[0])
True 
```

甚至更好

```
>>> not numpy.any(numpy.diff(a, 2))
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:06:48.880

如果您的意思是一个等差数列，例如一系列数字，使得每个数字都等于前一个数字加上一些常数（例如`[1, 3, 5, 7]`或`[8, 18, 28, 38]`但不是`[1, 2, 4, 8]`或`[1, 3, 1, 5, 1, 7]`），那么您可能不应该过度考虑它。列表推导不太可能胜过这个：

```
def is_arithmetic(l):
    delta = l[1] - l[0]
    for index in range(len(l) - 1):
        if not (l[index + 1] - l[index] == delta):
             return False
    return True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T19:07:48.783

这是一个只计算一次差异的解决方案：

```
from itertools import izip

def is_arithmetic(seq):
    gen = (i - j for i, j in izip(seq[:-1], seq[1:]))
    diff = next(gen, None)  # get the first element in the generator
    return all(d == diff for d in gen) # check all the others are equal to it 
```

或者更神秘的是：

```
def is_arithmetic(seq):
    gen = (i - j for i, j in izip(seq[:-1], seq[1:]))
    return all(d == d0 for d in gen for d0 in gen)  # wat 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-07T19:59:31.203

检查列表中所有差异的集合的长度怎么样？

```
>>> alist = [3,9,15,21,27,33,39,45,51,57]
>>> blist = [-7, -2, 3, 8, 13, 18, 23, 29]
>>> 1 == len(set([alist[x + 1] - alist[x] for x in range(len(alist) - 1)]))
True
>>> 1 == len(set([blist[x + 1] - blist[x] for x in range(len(blist) - 1)]))
False
>>> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-05T01:36:01.210

```
def check_arith(lst):

    l1 = len(lst) - 1
    n= 2

    dif = lst[1] - lst[0]

    while(n<l1):

        if (lst[n+1] - lst[n]) != dif: 
            return False
        else:
            n = n + 1
    return True

print(check_arith([5,10,15, 20, 25])) 
```

# c# - C# 自定义粘贴功能

> ID：13276236
> 
> 赞同：1
> 
> 时间：2012-11-07T18:53:22.637
> 
> 标签：c#

我正在尝试创建一种方式或在 Windows 系统的任何位置插入文本，就像剪贴板一样。例如，按 ctrl+shift+1 会将我的应用程序中设置的文本“粘贴”到用户当前指向光标的位置。

例如，如果我的应用程序将其设置为“local.network”，并且用户在浏览器地址栏中按 ctrl+shift+1，它将粘贴到“local.network”中。然后我想设置不同的值，具体取决于用户按下的数字。这是可能的还是我不能创建这样的系统范围的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:56:30.830

您正在寻找的是如何注册热键。

[使用 RegisterHotKey 注册多个热键](https://stackoverflow.com/questions/4704134/register-more-than-one-hotkey-with-registerhotkey)

[使用 C# 设置全局热键](https://stackoverflow.com/questions/2450373/set-global-hotkeys-using-c-sharp)

**作为对您的后续评论的回应，**对不起，我的问题更多是关于捕获按键事件。如果您需要将文本粘贴到您不拥有的窗口，那么[这个问题](https://stackoverflow.com/questions/4539187/insert-text-into-the-textbox-of-another-application)几乎是重复的。该问题使用`WM_SETTEXT`但您可以轻松使用`WM_PASTE`。

# sql - SQL 查询 - 执行此操作的最佳方法是什么

> ID：13276240
> 
> 赞同：1
> 
> 时间：2012-11-07T18:53:31.037
> 
> 标签：sql

我有这个查询...

```
select * from selection_value where id = 14702
14702
14704
14724
14710
14738
14717
14719
14719
14738
14722
14721
14724
14725
14706
14730
14708
14731
14715
14708
14749
14752
14754
14755
14757
14795
14753
14760
14761
14759
14762
14763
14785
14764
14765
14785
14766
14768
14796
14771
14772
14774
14776
14764
14780
14781
14767
14784
14785
14786
14788
14789
14790
14791
14785
14772
14792
14796
14785
14797
14798
14799
14800
14802
14778
14803
14758
14765
14762
14781
14785
14786
14808
14793
14805
14807
14808 
```

现在我知道这行不通，我只是想知道按此顺序获取所有这些 id 的数据的最佳方法是什么？

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:56:15.247

您可以创建一个派生表，其中包含要在一个列*中匹配的值*以及它们在另一列中的排序 - 将其连接到您的表并按排序列排序。

```
 select *
    from (
         select 1 ord, 14702 value union all
         select 2, 14704 union all
         select 3, 14724 union all
         select 4, 14710 union all
         select 5, 14738
         ) x
    join selection_value t on t.id = x.value
order by ord; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T18:55:54.827

使用`IN`：

```
SELECT * FROM selection_value WHERE id IN (14702, 14702, 14704, etc.) ORDER BY id 
```

**编辑：**

要保留您拥有的特定订单，请创建一个新表：

```
CREATE TABLE2 (id INT IDENTITY(1,1), id_number int) 
```

在此表中，按您需要对它们进行排序的顺序添加数字。然后，您可以使用类似以下查询的内容按您的特定顺序提取 ID：

```
SELECT selection_Value.* FROM selection_value JOIN Table2 ON selection_Value.id = table2.id_number ORDER BY Table2.id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T18:57:32.433

使用`IN`逗号分隔值的子句。

```
select * from selection_value where id IN (14702,14703, so on) ORDER BY ID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:57:25.427

你的问题不是很清楚，但也许：

```
SELECT * FROM selection_value 
WHERE id IN
      (SELECT id FROM table ORDER BY id ASC) 
```

刚刚指出您的订单（您的查询是否需要从另一个表中提取数据？）：

```
select * from selection_value where id IN (14702,14702,14704,14724,14710,14738,14717,14719,14719,14738,14722,14721,14724,14725,14706,14730,14708,14731,14715,14708,14749,14752,14754,14755,14757,14795,14753,14760,14761,14759,14762,14763,14785,14764,14765,14785,14766,14768,14796,14771,14772,14774,14776,14764,14780,14781,14767,14784,14785,14786,14788,14789,14790,14791,14785,14772,14792,14796,14785,14797,14798,14799,14800,14802,14778,14803,14758,14765,14762,14781,14785,14786,14808,14793,14805,14807,14808) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T19:21:17.010

只需将您的问题粘贴到记事本++中，在正则表达式模式下执行以下搜索和替换：

*   \r -> ''
*   \n -> \nunion all\nselect * from selection_value where id =

瞧！

```
select * from selection_value where id = 14702
union all
select * from selection_value where id =14702
union all
select * from selection_value where id =14704
union all
select * from selection_value where id =14724
union all
select * from selection_value where id =14710
union all
select * from selection_value where id =14738
union all
select * from selection_value where id =14717
union all
select * from selection_value where id =14719
union all
select * from selection_value where id =14719
union all
select * from selection_value where id =14738
union all
select * from selection_value where id =14722
union all
select * from selection_value where id =14721
union all
select * from selection_value where id =14724
union all
select * from selection_value where id =14725
union all
select * from selection_value where id =14706
union all
select * from selection_value where id =14730
union all
select * from selection_value where id =14708
union all
select * from selection_value where id =14731
union all
select * from selection_value where id =14715
union all
select * from selection_value where id =14708
union all
select * from selection_value where id =14749
union all
select * from selection_value where id =14752
union all
select * from selection_value where id =14754
union all
select * from selection_value where id =14755
union all
select * from selection_value where id =14757
union all
select * from selection_value where id =14795
union all
select * from selection_value where id =14753
union all
select * from selection_value where id =14760
union all
select * from selection_value where id =14761
union all
select * from selection_value where id =14759
union all
select * from selection_value where id =14762
union all
select * from selection_value where id =14763
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14764
union all
select * from selection_value where id =14765
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14766
union all
select * from selection_value where id =14768
union all
select * from selection_value where id =14796
union all
select * from selection_value where id =14771
union all
select * from selection_value where id =14772
union all
select * from selection_value where id =14774
union all
select * from selection_value where id =14776
union all
select * from selection_value where id =14764
union all
select * from selection_value where id =14780
union all
select * from selection_value where id =14781
union all
select * from selection_value where id =14767
union all
select * from selection_value where id =14784
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14786
union all
select * from selection_value where id =14788
union all
select * from selection_value where id =14789
union all
select * from selection_value where id =14790
union all
select * from selection_value where id =14791
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14772
union all
select * from selection_value where id =14792
union all
select * from selection_value where id =14796
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14797
union all
select * from selection_value where id =14798
union all
select * from selection_value where id =14799
union all
select * from selection_value where id =14800
union all
select * from selection_value where id =14802
union all
select * from selection_value where id =14778
union all
select * from selection_value where id =14803
union all
select * from selection_value where id =14758
union all
select * from selection_value where id =14765
union all
select * from selection_value where id =14762
union all
select * from selection_value where id =14781
union all
select * from selection_value where id =14785
union all
select * from selection_value where id =14786
union all
select * from selection_value where id =14808
union all
select * from selection_value where id =14793
union all
select * from selection_value where id =14805
union all
select * from selection_value where id =14807
union all
select * from selection_value where id =14808 
```

# ruby-on-rails - Rails 与 group by 相加并包含

> ID：13276241
> 
> 赞同：2
> 
> 时间：2012-11-07T18:53:38.587
> 
> 标签：ruby-on-rails, activerecord

我正在尝试对我的模型进行一些计算，但生成的 sql 无法正常工作。

我有这个模型：

```
class Order < ActiveRecord::Base
  attr_accessible :order_date
  has_many :order_products, dependent: :destroy

class OrderProduct < ActiveRecord::Base
  attr_accessible :amount
  belongs_to :tariff
  belongs_to :order_product_format
  belongs_to :product

class OrderProductFormat < ActiveRecord::Base
  attr_accessible :amount

class Tariff < ActiveRecord::Base
  attr_accessible :price 
```

所以我在我的订单控制器中创建了一个函数来获取所有订单的总额，如下所示

```
def self.global_total_amount
  OrderProduct.joins(:order_product_format, :tariff).sum '((order_products.amount * order_product_formats.amount ) * tariffs.price)'
end 
```

这可以按预期工作，但现在我想按一年中的月份对总金额进行分组，所以我正在尝试做这样的事情

```
def self.month_total_amount
  OrderProduct.includes(:order).joins(:order_product_format, :tariff, :order).group('"order"."order_date"').sum('((order_products.amount * order_product_formats.amount ) * tariffs.price)')
end 
```

我收到以下错误：

```
SELECT SUM(((order_products.amount * order_product_formats.amount ) * tariffs.price)) AS                     sum_order_products_amount_all_order_product_formats_amount_all_, "order"."order_date" AS order_order_date FROM "order_products" INNER JOIN "order_product_formats" ON "order_product_formats"."id" = "order_products"."order_product_format_id" INNER JOIN "tariffs" ON "tariffs"."id" = "order_products"."tariff_id" INNER JOIN "orders" ON "orders"."id" = "order_products"."order_id" GROUP BY "order"."order_date"

ActiveRecord::StatementInvalid: PG::Error: ERROR:  missing FROM-clause entry for table "order"
LINE 1: ...cts_amount_all_order_product_formats_amount_all_, "order"."o... 
```

我究竟做错了什么？有没有更好的方法来做到这一点？非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T19:46:50.213

```
def self.month_total_amount
  OrderProduct.includes(:order).joins(:order_product_format, :tariff, :order).group('orders.order_date').sum('((order_products.amount * order_product_formats.amount ) * tariffs.price)')
end 
```

你似乎把你的订单表命名错了。您不要用引号将表格和字段括起来。

所以像这样=`group('orders.order_date')`

不是这样=`group('"order"."order_date"')`

# web-applications - 在 PHP、Python、Ruby 应用程序之间进行单点登录的方法

> ID：13276242
> 
> 赞同：5
> 
> 时间：2012-11-07T18:53:39.687
> 
> 标签：web-applications, web, single-sign-on

有一个项目使用 Python Django，另一个独立项目使用 PHP。两者都有自己的用户身份验证。模块。将用户管理合并在一起的简单方法是什么？

我们开始检查开源解决方案，如[CAS](http://www.jasig.org/cas)、[cosign](http://weblogin.org/overview.shtml)。在校园/大学中都使用它是一个真正的问题，并且不确定它是否适用于 Web 应用程序。

在遗留应用程序之间启动单点登录 (SSO)，未来将使用 Ruby 开发一些应用程序。谁能建议对 SSO 解决方案进行良好的投资？一个清晰的 API，为 Web 应用程序做好准备并且对硬件要求不高是很好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:48:33.050

我建议使用[ruby​​cas 服务器](http://code.google.com/p/rubycas-server/)——它是 Jasig 在 Ruby 中的 CAS 的实现（一个 sinatra 应用程序）。根据我的经验，它比 Jasig 更容易设置，而且我发现 CAS 的客户端比 SAML 更好（尽管两者都是很好的解决方案）。它集成了开箱即用的 ldap 目录（包括 AD），当然还有来自数据库的用户记录。

[使用phpCAS](https://wiki.jasig.org/display/CASC/phpCAS)让 PHP 应用程序对 CAS 服务器进行身份验证很容易，ruby/rails 应用程序可以使用[ruby​​Cas 客户端](http://code.google.com/p/rubycas-client/)，虽然我没有使用它，但[django-cas](https://bitbucket.org/cpcc/django-cas/overview)看起来很有希望。

对于遗留应用程序，甚至只是由 Apache 共享的受保护文件夹，您还可以使用 Apache 模块[mod_auth_cas](https://wiki.jasig.org/display/CASC/mod_auth_cas)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:02:33.150

您是否考虑过部署基于[SAML](http://en.wikipedia.org/wiki/SAML_2.0)的联合身份基础设施？有构建它的开源解决方案。

您需要做的第一件事是部署身份提供者 (IdP)。[将 simpleSAMLphp 安装和配置为 IdP](http://simplesamlphp.org/docs/stable/simplesamlphp-idp)，并将其连接到您想要的身份验证源（ldap、数据库等）

然后，您可以通过服务提供商 (SP) 将您的应用程序连接到 IdP。根据您要连接的软件的语言，有不同的 SP 解决方案。

PHP 软件可以使用[作为 SP 部署的](http://simplesamlphp.org/docs/stable/simplesamlphp-sp)simpleSAMLphp 的本机集成，并[使用其 API进行连接](http://simplesamlphp.org/docs/stable/simplesamlphp-sp-api)

可以使用[pysaml](http://pypi.python.org/pypi/pysaml2)和[djangosaml2连接 Python/django 应用程序](http://pypi.python.org/pypi/djangosaml2/)

由于[ruby​​-saml ，Ruby 软件支持 SAML](http://rubydoc.info/gems/ruby-saml/)

# java - 池化 JAXWS wsimport 服务对象 - 可能吗？

> ID：13276261
> 
> 赞同：0
> 
> 时间：2012-11-07T18:54:37.300
> 
> 标签：java, web-services, jax-ws, object-pooling

我们正在使用 JAXWS Metro 客户端与第 3 方 .Net Web 服务进行交互。我们需要维护 Web 服务的状态。所以，这就是场景。有几个用户应用程序会调用 Metro 客户端，而 Metro 客户端又会调用 .Net Web 服务。

我已经运行了 wsimport 工具并生成了必要的类。但既然我们必须维护状态，我正在考虑实现服务类的对象池。这样，每个用户应用程序总是与它正在使用的特定服务对象结合。因此，流程将是：

COSServiceImpl -> COSServiceFactory 实例化/维护 COSService（wsimport 生成的服务类将被池化） -> .Net Web 服务。

所以，实现如下。有人有更好的建议吗？想法？

用户应用程序.java

```
COSServiceImpl impl = new COSServiceImpl();
ClaimantAccount claimantAccount = impl.getClaimantAccount(String claimantID) 
```

COSServiceImpl.java

```
public ClaimantAccount getClaimantAccount(String claimantID) {
ICOSService port = COSServiceFactory.getCOSServicePort();
ClaimantInfo info = port.retrieveClaimantInfo(claimantID);
ClaimantAccount account = new ClaimantAccount();
account.setXXX(info.getXXX);
return account;
} 
```

COSServiceFactory.java

```
public class COSServiceFactory extends BasePoolableObjectFactory<COSService> {

private static GenericObjectPool<COSService> servicePool = null;

static {
try { 
init();
} catch(Exception e) {
throw new ExceptionInInitializerError(e);
}
}

public static void init() {
servicePool = new GenericObjectPool<COSService>(new COSServiceFactory());
for (int i=0; i < poolSize; i++) {
servicePool.addObject();
}

public COSService makeObject() throws Exception {
URL wsdlURL = null;
service = new COSService(wsdlURL, new QName(nameSpace,localPart) );
return service;
}

private static COSService getCOSService() {
    COSService service = null;
    try {
        service = (COSService) servicePool.borrowObject();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return service;
    }

 public static ICOSService getWebServicePort() {
    ICOSService port = getCOSService().getWSHttpBindingICOSService();
    BindingProvider bindingProvider = (BindingProvider) port;
// Is there any other place to set the request timeout, may be a handler???
    bindingProvider.getRequestContext().put("com.sun.xml.internal.ws.request.timeout", Config.getIntProperty("request.timeout")); 
    return port;
    } 
```

另外，还有其他地方可以设置请求超时吗？这样做可以吗？使用上面的代码，我不认为我们正在修改端口对象。我还没有对此进行测试，但是请求超时属性会起作用吗？

感谢并感谢您的评论。

维杰·加纳帕蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:02:18.780

如果它对任何人有帮助，这就是我的理解：

尽管可以，但我们不需要池化服务实例。根据我的测试，它似乎工作正常。我们不需要将服务对象池化的原因是，当我们调用服务类的 Service.getPort() 方法来创建 ICOSService Web 服务端口对象时，getPort() 方法每次使用都会返回一个新的 ICOSService 对象java.lang.reflect.Proxy 的 newProxyInstance 方法。

# ruby-on-rails - Rails - Ransack - 自定义属性选择

> ID：13276263
> 
> 赞同：1
> 
> 时间：2012-11-07T18:54:42.080
> 
> 标签：ruby-on-rails, ransack

我在`ransack`Rails 应用程序中使用 gem 进行高级搜索。如何过滤该`attribute_select`方法以不显示某些字段，例如`id`and`created_at`等。

```
= f.attribute_fields do |a|
  = a.attribute_select 
```

我上面的当前方法只是列出了所有属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:36:33.333

根据[为什么你的 Ruby 类宏（可能）很烂（我的）](http://erniemiller.org/2012/05/11/why-your-ruby-class-macros-might-suck-mine-did/)：

```
def self.ransackable_attributes(auth_object = nil)
  super - ['id', 'created_at']
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:12:55.420

您还可以定义可搜索属性而不是指定不可搜索属性，如下所示：

```
def self.ransackable_attributes(auth_object = nil)
    %w( searchable_attribute_goes_here another_one_goes_here ... ) + _ransackers.keys
end 
```

# html - GWT - 在画布周围放置黑色边框

> ID：13276264
> 
> 赞同：1
> 
> 时间：2012-11-07T18:54:44.790
> 
> 标签：html, gwt

我正在寻找一种在 GWT 中添加带有黑色边框的画布的方法，这样如果画布背景颜色为白色，我将看到它的边界。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:29:59.947

获取元素，设置样式：

[http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/canvas/client/Canvas.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/canvas/client/Canvas.html)

```
Canvas canvas  = Canvas.createIfSupported();
canvas.getElement().getStyle().setBorderColor('black');
canvas.getElement().getStyle().setBorderStyle(BorderStyle.SOLID);
canvas.getElement().getStyle().setBorderWidth(1,Unit.PX); 
```

# javascript - 使用 Arc.Centroid 定位形状，但由于某种原因 X & Y 不会影响它

> ID：13276269
> 
> 赞同：0
> 
> 时间：2012-11-07T18:55:01.140
> 
> 标签：javascript, d3.js

我已经在 svg:image 上成功使用了 Arc.Centroid。但是，当我尝试将质心与 svg.symbol 一起使用时， attr X & Y 不会影响它 -

```
var q = svg.append("g")
 .attr("transform", function(d,i) {return "translate ("+ arc[i].centroid() +")";})
 .attr("x",100)
 .attr("y",-40)
  ; 

    q.append("path")
    .attr("d", d3.svg.symbol().type("circle").size(50))
    .attr("transform", "translate(-10, -5)")
    .style("fill", "black");

    q.append("text")
    .text("Hello"); 
```

据我所知，这应该可行。我还应用了另一个变换属性，例如

```
var q = svg.append("g")
 .attr("transform", function(d,i) {return "translate ("+ arc[i].centroid() +")";})
 .attr("transform", "translate(-150,-150)") 
```

但我相信它不会从弧的中心转换形状。这是我的小提琴 -

[http://jsfiddle.net/xwZjN/29/](http://jsfiddle.net/xwZjN/29/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:46:46.363

该`g`元素没有`x`和`y`属性。您可以在 SVG 规范中找到此类信息：http: [//www.w3.org/TR/SVG/struct.html#GElement](http://www.w3.org/TR/SVG/struct.html#GElement)

您可以使用以下方法移动`g`元素：http `translate` `transform`: [//www.w3.org/TR/SVG/coords.html#TransformAttribute](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)

例如，`text`元素确实具有`x`和`y`属性：[http ://www.w3.org/TR/SVG/text.html#TextElement](http://www.w3.org/TR/SVG/text.html#TextElement)

在上一个代码片段中，您将两个不同的值写入 transform 属性。后一个值 ,`"translate(-150,-150)"`将覆盖前一个值。

```
var q = svg.append("g")
 .attr("transform", function(d,i) {return "translate ("+ arc[i].centroid() +")";})
 .attr("transform", "translate(-150,-150)") 
```

SVG 变换属性接受变换定义列表：[http ://www.w3.org/TR/SVG/coords.html#TransformAttribute](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)

所以最后一段代码应该写成：

```
 var q = svg.append("g")
     .attr("transform", function(d,i) {
         return "translate ("+ arc[i].centroid() +")" + "translate(100,-40)";
     }); 
```

如果您`g`在浏览器的开发者工具中检查该元素（在 Chrome 中右键单击，选择`inspect element`），您将看到：

```
<g transform="translate (-124.42599471897063,11.965443501796923)translate(100,-40)">
  <path d="M0,3.989422804014327A3.989422804014327,3.989422804014327 0 1,1 0,-3.989422804014327A3.989422804014327,3.989422804014327 0 1,1 0,3.989422804014327Z" transform="translate(-10, -5)" style="fill: #000000; "></path>
  <text>Hello</text>
</g> 
```

您会在容器上看到两个翻译操作。[http://jsfiddle.net/xwZjN/30/](http://jsfiddle.net/xwZjN/30/)

另一种选择是将路径和文本分组到另一个 g 容器中。像这样的东西：

```
<g transform="translate (-124.42599471897063,11.965443501796923)">
  <g transform="translate(100,-40)">
    <path d="M0,3.989422804014327A3.989422804014327,3.989422804014327 0 1,1 0,-3.989422804014327A3.989422804014327,3.989422804014327 0 1,1 0,3.989422804014327Z" transform="translate(-10, -5)" style="fill: #000000; "></path>
    <text>Hello</text>
  </g>
</g> 
```

# jquery - Margin-top:0 从屏幕顶部开始，但不断将位置更改为未指定的值

> ID：13276272
> 
> 赞同：2
> 
> 时间：2012-11-07T18:55:04.657
> 
> 标签：jquery, css, jquery-animate, margin

编辑：我继续研究这个问题并缩小这个 JS Fiddle 中的问题。

[http://jsfiddle.net/r7ab4/4/](http://jsfiddle.net/r7ab4/4/)

单击“按钮 - 向下滚动”以`.col`向下移动。然后单击“按钮 - 返回到 0”，`.col`通过返回 回到原来的位置`marginTop:0`。除非它没有。它最终会达到一些未指定的值。任何想法为什么会发生这种情况？

下面的原始问题。

* * *

请参阅此测试页面以查看我的问题：

[http://joinersart.co.uk/test](http://joinersart.co.uk/test)

如果单击页脚中的内容按钮，“col-aboutus” div 将从 height:0 扩展到 height:100% 以显示“内容页面”。点击右上角的主页返回。

问题：“col-aboutus” div 及其所有子 div 应设置为 margin-top:0。这意味着您在内容页面中看到的第一个 div 是“SECTION ONE”。当您单击红色链接“NEXT - SECTION TWO”时，margin-top 应动画为“-200px”，这会使内容向上滑动到下一部分。问题是，一旦您单击红色链接，“col-aboutus”div 的 margin-top 似乎会变为某个未指定的负值，从而放弃“-200px”命令。而且它不会恢复到正确的位置“margin-top:0”。即使我在 Firebug 中手动输入“0”，它在编辑控制台中也会显示“margin-top:0”，但它仍保持未指定的负值。当您单击“主页”返回起始页时，代码应重置为 margin-top：0 但是一旦按下红色链接，这将不起作用。恢复它的唯一方法是重新加载页面。

也许我错过了一些东西，但请看一看，让我知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T22:48:41.080

好的，所以看起来实际问题被伪装成它不是的东西。所有问题的原因都`marginTop`与 href 链接本身有关。他们似乎具有这种默认行为，可以在单击时将自己的位置（以及任何连接的 div）移动到屏幕/窗口的顶部。这引起了冲突。为了解决，从另一位成员那里看到了这个答案。只需将其添加到您的 href 链接：

```
<a href="#" onClick="return false;">The question?</a> 
```

或者，如果您通过 JQuery 进行操作：

```
$('a[href="#"]').click(function(event){

    event.preventDefault();

}); 
```

此处的原始文章：[单击链接时页面意外向上滚动](https://stackoverflow.com/questions/9019144/unexpected-page-scroll-up-when-clicking-a-link)

# java - Grails / Spring：如何在 spring.xml 中使用具有 placeHolder 属性的 importBeans？

> ID：13276276
> 
> 赞同：0
> 
> 时间：2012-11-07T18:55:16.423
> 
> 标签：java, spring, grails, groovy

在我的`Config.groovy`中，我定义了一个变量：

```
 bbws.baseUrl = "http://localhost:8080/ballot-builder-ws/" 
```

在我的`spring/resources.groovy`我有以下内容：

```
importBeans "classpath:ballot-builder-client.spring.xml" 
```

包含以下`ballot-builder-client.spring.xml`属性占位符：

```
<jaxrs:client
    id="ballotBuilderWebService"
    address="${bbws.baseUrl}"
    serviceClass="com.xx.xx.xx.BallotBuilderWebService"
    inheritHeaders="true">
.....
</jaxrs:client> 
```

我似乎无法让它工作。Grails 文档说这是可能的，除此之外不是很有帮助。有人可以确认/否认这是可能的吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:57:51.013

我想通了。它*确实*有效！解决方案是专有配置问题。感谢所有看过的人。

# python - Python建表

> ID：13276284
> 
> 赞同：0
> 
> 时间：2012-11-07T18:55:55.107
> 
> 标签：python

我将以下数据从 excel 表复制到 xml 文件中，我需要从这些数据中创建一个表并将表输出到 Microsoft Outlook，最初我想创建每个列的列表，从中构造 HTMl 代码和输出到excel...如何拆分每一行，因为标题数据可以是任何东西，空格混合等...任何人以前都这样做过，感谢好的建议，等待反馈

```
CR  FA  CL  TITLE
12345   Dta 656885  Age out SRR values from buffer in Beacon miss scenario
16534   fta 656886  To Record stack Event Logging
76849   cta 654661  To Record HAL and FLM SW Event Logging
45678   CT  656928  CR1234: BT doesn’t work that Riva neither sends HCI Evt for HID ACL data nor response to CI after entering into real sniffer rat mode. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:10:31.863

用于[`csv.DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader)将数据放入字典：

```
>>> import csv
>>> with open('t.txt') as f:
...    reader = csv.DictReader(f,dialect='excel-tab')
...    rows = list(reader)
... 
>>> rows[0]
{'TITLE': 'Age out SRR values from buffer in Beacon miss scenario',
 'CR': '12345', 'CL': '656885', 'FA': 'Dta'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:32:55.357

如果只有最后一列更复杂，您可以使用 re.split ->

```
import re
input="""CR FA  CL  TITLE
12345   Dta 656885  Age out SRR values from buffer in Beacon miss scenario
16534   fta 656886  To Record stack Event Logging
76849   cta 654661  To Record HAL and FLM SW Event Logging
45678   CT  656928  CR1234: BT doesn’t work that Riva neither sends HCI Evt for HID ACL data nor response to CI after entering into real sniffer rat mode."""

[re.split(r'\W+',i,3) for i in input.splitlines()] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:58:52.123

确保为您的 csv 使用正确的分隔符 ...（请参阅附件调整后的数据文件，使用制表符分隔）[https://dl.dropbox.com/u/18004504/data.csv](https://dl.dropbox.com/u/18004504/data.csv)

```
import pandas as pd
df=pd.DataFrame.from_csv("data.csv",sep="\t",parse_dates=False)

print df
for row in df.iterrows(): 
    print row
    print "-------" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:59:42.803

如果您可以找到每行内容的模式，那么您可以更轻松地解析该行。每行1记录吗？如果是这样，请参见下文。

```
for line in open('myfile','r').readlines():
    # Do whatever you need to the line variable. 
```

# windows - 如何使自定义 SettingsPane 看起来像 Settings Charm Windows 8 中的权限

> ID：13276286
> 
> 赞同：1
> 
> 时间：2012-11-07T18:56:00.570
> 
> 标签：windows, windows-8, microsoft-metro

我在我的 win8 应用程序中为“关于”创建了一个自定义设置魅力选项。我希望样式看起来像权限窗格。是对这些值进行硬编码的最佳方法，还是有办法将其设置为默认值。

当前外观： ![在此处输入图像描述](../Images/0dea54bca05fc1edf1139973cf5b767e.png)

所需外观： ![在此处输入图像描述](../Images/026d44be1605f9eb4f6558f9043161d3.png)

这是我获得示例代码的地方： http: [//code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:09:33.270

在 App.xaml.cs 中，创建颜色变量

```
private SolidColorBrush _background = new SolidColorBrush(Color.FromArgb(0xFF, 0x00, 0x3E, 0x00));
 // FF003E00
private SolidColorBrush _Hbackground = new SolidColorBrush(Color.FromArgb(0xEE, 0x00, 0x8A, 0X00)); 
```

现在，当您为权限创建设置菜单时，

```
private void OnCommandsRequested(SettingsPane sender, SettingsPaneCommandsRequestedEventArgs args)
    {
        var Permissions= new SettingsCommand("Permissions", "Permissions", (handler) =>
            {
                var settings = new SettingsFlyout();
                settings.Content = new AboutUserControl();
                //settings.HeaderBrush = new SolidColorBrush(_background);
                //settings.Background = new SolidColorBrush(_background);
                settings.HeaderBrush = _Hbackground;
                settings.Background = _background;
                settings.HeaderText = "Permissions";
                settings.IsOpen = true;
            });

        args.Request.ApplicationCommands.Add(Permissions);

        UICommandInvokedHandler handler1 = new UICommandInvokedHandler(onSettingsCommand);

        //  throw new NotImplementedException();
    } 
```

如您所见，您可以设置标题背景颜色以及正文背景颜色。使用此代码，您可以为设置菜单设置您选择的颜色

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-07T19:01:38.620

如果您正在考虑背景颜色，则可以在 StandardStyles.xaml 或 App.xaml 中定义全局背景颜色以在任何地方使用它。您无权访问系统主题颜色信息，因此您必须对其进行硬编码。

# jquery - 禁用，启用（'点击'）

> ID：13276291
> 
> 赞同：7
> 
> 时间：2012-11-07T18:56:26.993
> 
> 标签：jquery

如何禁用和启用点击事件。

我试过：

```
$('#web').on('click', function web_function(event){
    event.stopPropagation();
    // execute a bunch of action to preform
});
$('#web').off('click'); // click is succesfully removed
$('#web').on('click'); // doesnt work, i need to redefine the actions to perform 
```

我也尝试禁用：

```
$('#web').unbind('click'); // click is succesfully removed
$('#web').bind('click'); // nok 
```

但这也行不通...

所以，我想禁用/启用点击事件，而不需要重新定义要执行的操作。某种切换...（点击开/关）

以及如何实现事件以停止传播？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T18:57:47.113

每当您`bind`（或`rebind`）时，您都需要将处理程序函数作为参数传递。

在您的情况下，您可以命名函数，您可以在任何时候再次重新绑定时使用它来传递它。见下文，

```
var myFunc = function(event){
     event.stopPropagation();
     // execute a bunch of action to preform
}

$('#web').on('click', myFunc); //bind myFunc
$('#web').off('click'); // click is succesfully removed
$('#web').on('click', myFunc); //rebind again 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-11T09:01:49.153

首先使用jQuery的方法禁用元素`prop()`，即

```
$("selector").prop("disabled",true); 
```

并且当您要启用单击时，只需使用

```
$("selector").prop("disabled",false); 
```

# c++ - 带有 gmp 的代码块、带有 << 运算符和 mp*_class 的段错误

> ID：13276292
> 
> 赞同：1
> 
> 时间：2012-11-07T18:56:26.853
> 
> 标签：c++, io, codeblocks, gmp

我在 Win 7 64 机器上使用带有 gcc 4.7.2 和 gmp 5.0.5 的 CodeBlocks。在开始使用 gmpxx 后，我看到一个奇怪的段错误，它不会出现在 +、- 等运算符中，但在尝试计算 mp*_class 变量时会出现 <<。我不得不说 gmpxx 到目前为止工作得很好，除了这个。

例如：

```
#include <iostream>
#include <gmpxx.h>

using namespace std;

int main()
{
    mpz_class c = 21;
    cout << c << endl;
} 
```

在与 cout 的行上给出一个段错误，而下面的代码工作正常：

```
#include <iostream>
#include <gmpxx.h>

using namespace std;

int main()
{
    mpz_class a = 3, b = 8, c;
    c = a + b;
    cout << c.get_str() << endl;
} 
```

更奇怪的是这段代码：

```
#include <iostream>
#include <gmpxx.h>

using namespace std;

int main()
{
    mpz_class a = 3, b = 8, c, d = 21;
    c = a + b;
    cout << c.get_str() << endl;
    cout << d << endl;
} 
```

*运行时不会*出现段错误，但只显示第一个结果（11）然后正常退出。另一方面，在调试时，它会出现段错误：cout << d << endl。

在过去的几天里，我在谷歌上搜索并没有发现任何类似于只有*一些*重载的运算符不工作的情况。

我会很感激解释。

我在代码块中链接了两个 gmp 库，如下所示： Settings->Compiler and Debugger->Global Compiler Settings->Linker Settings 我添加了：C:\mingw\lib\libgmpxx.dll.a 和 C:\mingw \lib\libgmp.dll.a（按此顺序）。

使用 gmpxx 编译 c++ 代码不需要其他任何东西。

最后，我的 CodeBlocks 构建日志如下所示：

> g++.exe -pg -g -pg -g -c "C:\Temp\test.cpp" -o .objs\test.o
> 
> g++.exe -o test.exe .objs\test.o -pg -lgmon -pg -lgmon C:\mingw\lib\libgmpxx.dll.a C:\mingw\lib\libgmp.dll.a

老实说，我不知道为什么每个开关都有两个。

如果您需要更多信息，我很乐意提供。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:35:20.607

好的，是时候将其标记为已回答了。事实是我通过 mingw-get 安装了 gmp，而在 googleland 的几乎所有地方，它都声明自己为自己的系统构建它。一个愚蠢的错误，感谢@Lol4t0 的评论，它现在可以正常工作了。所以对于像我这样的新人：

> 1) 使用 MSYS 安装 MinGW
> 
> 2) 下载 gmp 源码并解压到 mingw\msys\1.0\home\ 中的某个文件夹
> 
> 3）打开mingw shell并导航到gmp文件夹
> 
> 4) ./configure --enable-cxx --prefix=/home/newgmpinstall
> 
> 5) 制作
> 
> 6) 进行安装
> 
> 7) 进行检查

如果检查正常，那么在 newgmpinstall 中，您将找到适用于您的系统的头文件 gmp.h 和 gmpxx.h 以及库 libgmp.a 和 libgmpxx.a。

如果您愿意，可以将它们移动到新文件夹。然后在您的 IDE 项目属性中将 *.a 文件添加到您的链接库，并将带有 *.h 文件的文件夹添加到编译器搜索目录。

编写代码

注意：起初 ./configure 退出时出现关于缺少 M4 的错误，因为我缺少 M4 包。只需下载 M4 的源代码并首先为 M4 执行上述步骤，然后安装 gmp。

# javascript - 使用 Knockout.js foreach 创建引导选项卡

> ID：13276295
> 
> 赞同：2
> 
> 时间：2012-11-07T18:56:31.393
> 
> 标签：javascript, data-binding, twitter-bootstrap, knockout.js

我正在尝试创建一些选项卡，每个用户选择保存的配置文件一个。每个配置文件都是一个 ViewModel。所以我想我应该创建另一个 ViewModel，它包含一个 observableArray 类型的对象：{name: profile_name, model: model_converted_to_json}。

我按照[这个例子](http://jsfiddle.net/rniemeyer/xVxKD/)创建了我的代码——但由于某种原因，我没有得到任何约束。

这是我的代码：
-ViewModel（我使用 Requirejs，它解释了外部包装器）：

```
"use strict";
// profiles viewmodel class
define(["knockout"], function(ko) {
    return function() {
        var self = this;
        this.profilesArray = ko.observableArray();
        this.selected = ko.observable();
        this.addProfile = function(profile) {
            var found = -1;
            for(var i = 0; i < self.profilesArray().length; i++) {
                if(self.profilesArray()[i].name == profile.name) {
                    self.profilesArray()[i].model = profile.model; 
                    found = i;
                }
            }
            if(found == -1) {
                self.profilesArray().push(profile);
            }
        };
    };
}); 
```

-JS代码（大文件的摘录）：

```
var profiles = new profilesViewMode();
ko.applyBindings(profiles, $("#profileTabs")[0]); 
$("#keepProfile").on("click", function() {
    var profile = {
        name: $("#firstName").text(),
        model: ko.toJSON(model)
    };
    profiles.addProfile(profile);
    profiles.selected(profile);
    console.log(profile);
    $("#profileTabs").show();
}); 
```

-HTML（**感谢 Sara 更正了我的 HTML 标记**）

```
<section id="profileTabs">
    <div>
        <ul class="nav nav-tabs" data-bind="foreach: profilesArray">
            <li data-bind="css: { active: $root.selected() === $data }">
                <a href="#" data-bind="{ text: name, click: $root.selected }"></a>
            </li>
        </ul>
    </div>
</section> 
```

我已经验证 observableArray 在按钮单击时确实获得了新的、正确的值——它只是没有被渲染。我希望这是我的 Knockout 数据绑定语法中缺少的一件小事。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:32:33.787

您将希望`push`直接调用 observableArray，它会推送到底层数组并通知任何订阅者。所以：

```
self.profilesArray.push(profile); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T20:43:06.810

您正在使用`name: $('#firstName').text()`;设置名称 `.val()`如果这是引用输入字段（我在这里假设），您可能需要将其更改为。

您正在使用`.push()`绕过 ko 订阅者的底层数组（本例中的绑定）

这是一个基于您的代码[的工作 jsfiddle 。](http://jsfiddle.net/katowulf/4TEbn/2/)我采取了一些自由，`model`因为这不包括在内。

# php - 无法安装 laravel 包

> ID：13276298
> 
> 赞同：3
> 
> 时间：2012-11-07T18:56:34.980
> 
> 标签：php, wamp, laravel

如果我输入：

```
PS C:\wamp\www\laravel-master> php artisan bundle:install bootstrapper 
```

我正进入（状态：

```
PHP Warning:  file_get_contents(http://github.com/patricktalmadge/bootstrapper/zipball
/master): failed to open stream: Unable to find the socket transport "ssl" -
did you forget to enable it when you configured PHP? in C:\wamp\www\laravel-m
aster\laravel\cli\tasks\bundle\providers\provider.php on line 69 
```

我正在运行 WAMP 服务器，并且已启用`php_openssl`in`php.ini`和`ssl_module`. `httpd.conf`我认为这是由 localhost 配置问题引起的，而不是 Laravel 特有的问题。我还可以检查什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-03T04:23:02.497

Wamp 中 phpinfo() 的输出与从命令行运行的 PHP 使用的配置不同。

要在 CMD 中查找 PHP 正在运行的 .ini 文件，请键入`php --ini`.

请务必`extension=php_openssl.dll`在该文件中启用。（只需删除前面的分号）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T02:18:19.923

这也发生在我身上。您需要在以下两个 php.ini 文件中启用扩展：

1.  C:\wamp\bin\php\php5.3.13\php.ini
2.  C:\wamp\bin\apache\apache2.2.22\bin\php.ini

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T05:13:55.567

您需要确保`openssl`启用了 PHP 扩展。

打开您的`php.ini`并搜索`php_openssl`. 你应该有这样的东西。

```
;extension=php_openssl.dll 
```

从一开始就删除`;`，然后重新启动 Apache。您现在应该可以安装捆绑软件了。

* * *

糟糕，抱歉，刚刚注意到您确实启用`openssl`并重新启动了服务器。据我所知，应该可以解决这个问题。对不起，我不能再帮忙了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T19:09:18.220

我有这个问题，你确定“bundles”文件夹的权限，我的解决方案是更改权限。

# windows - 映射驱动器 / Windows2008 / CIFS 的奇怪行为

> ID：13276299
> 
> 赞同：1
> 
> 时间：2012-11-07T18:56:44.587
> 
> 标签：windows, share, cifs

我这里有一个奇怪的情况...

上下文：Unix 下的 NAS 文件系统 15 个计算单元的农场 该农场一直在工作，并处理从一个 nas 路径到另一个路径的流缓冲区。

映射驱动器通过 cifs 协议连接到我所有的计算单元上。

发生了什么 ：

我在客户端（Windows 2k8R2）随机失去了连接，并且：

*   净使用 => 没有。没有活动连接。
*   netstat => 端口 445 上的套接字始终建立。

然后 ：

*   如果我尝试重新安装映射驱动器 => 失败...
*   如果我尝试使用 UNC 路径访问共享 => 失败...

崩溃后，Windows 尝试在端口 80 上连接（UNC 或映射驱动器）代替 445。当我重新启动机器时，我恢复了我的共享。

所以我的问题是：怎么回事？为什么在失败时 Windows 不释放端口 445 上的网络连接？

有任何想法吗 ？

# css - 如果输入了表单信息，则无法单击提交按钮

> ID：13276302
> 
> 赞同：1
> 
> 时间：2012-11-07T18:56:57.820
> 
> 标签：css, ruby, watir

我正在使用 Ruby 和 Watir，尝试在填写表单后自动化页面以单击提交按钮。

这是按钮的 HTML 代码。

```
<div class="btns_wr">
<span class="small_green_btn input" title="Submit">
<span class="link_left"></span>
<span class="link_middle">
<input id="submitEnrollmentCmdButtonId" type="submit" value="SUBMIT"     name="submitEnrollmentCmdButtonId">
</span>
<span class="link_right"></span>
</span>
</div> 
```

我已经尝试了类、文本、标题等的多种变体，但是如果我不填写表单字段，它会单击按钮，但是当我填写表单字段时，它不会单击按钮，而是在下一步出现错误当然，因为预期的结果是错误的。

我尝试了以下方法：

```
browser.span(:class => 'link_middle').button(:id => 'submitEnrollmentCmdButtonId').click
browser.span(:class => 'link_middle').button(:title => 'Submit').click 
```

有了这个，至少我收到了一条错误消息：

> 无法定位元素，使用 {:tag_name=>"button", :id=>"submitEnrollmentCmdButtonId"}

```
browser.span(:class => 'link_middle').span(:title => 'Submit').click 
```

> 无法定位元素，使用 {:tag_name=>"span", :title => "Submit"}

我正在使用火狐；在我单击页面上的按钮后，也会打开此表单页面，并打开这个新的浏览器窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:15:18.113

尝试这个：

```
button(:id => 'submitEnrollmentCmdButtonId').click 
```

# eclipse - Eclipse TCP/IP Monitor 有两个端口

> ID：13276305
> 
> 赞同：2
> 
> 时间：2012-11-07T18:57:18.643
> 
> 标签：eclipse, http, servlets, eclipse-plugin, tcp-ip

我试图使用 TCP/IP Monitor 来监控请求。

但是，我看到有两个端口正在使用中。一种是应用程序端口[8080]和其他监控端口[9833]。

谁能告诉，为什么有两个不同的端口？

当我启动应用程序时，它会在 9833 而不是 8080 启动。为什么会发生这种变化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T19:39:17.767

Eclipse 监控是通过捕获发送到应用程序（主机和端口）的所有请求，为您将其转储到 Monitor 控制台，然后将原始请求转发到应用程序来完成的。受监控的应用程序本身会将其响应返回给 eclipse（从它的预期来看它是客户端），其中 eclipse 也将其转储到监控控制台上。

现在，eclipse如何首先捕获发送到被监控应用程序的请求？它只是运行一个接受这些请求的服务（代表应用程序）并转发它，该服务还将应用程序响应返回给原始请求者。

综上所述，在 eclipse TCP/IP Monitor 画面中，一个`Local monitoring port`是**eclipse 服务**的端口（可以使用任何可用的端口号），另一个`Port`是被监控的**应用程序**端口号。

因此，在您的情况下，**您正在监视的应用程序在端口 8080 上运行，**而**Eclipse 服务正在使用端口 9833**（这只是一个您可以更改的随机端口）。

您的应用程序端口没有更改，它仍然在 8080 上运行，您可以尝试这样做，但除非您使用端口 9833，否则 eclipse TCP/IP 监视器不会捕获任何数据。

# java - 一组中所有可能的组合与替换选项

> ID：13276310
> 
> 赞同：1
> 
> 时间：2012-11-07T18:57:29.640
> 
> 标签：java, replace, set, combinations

我需要一个用java编写的算法来计算以下内容：

给定一个集合 S = {s1,s2,...,sn}，其中 n 个元素表示类型和集合 s1_alternatives ={s1a,s1b,...,s1z} , s2_alternatives ={s2a,s2b,...,s2z} ,..., sn_alternatives = {sna,snb,...,snz},

通过将集合 S 的元素替换为集合 s1_alternatives、s2_alternatives、...、sn_alternatives 的替代元素来计算集合 S 集合的所有可能组合。

示例：给定 S = {a,b,c} 和一组备选方案 a_alternatives = {a1,a2,a3}，b_alternatives = {b1,b2}，c_alternatives = {c1,c2}。S 的元素及其替代项的一些可能组合是 S_ALTERNATIVES = {{a1,b1,c1},{a2,b1,c1},{a3,b1,c2},...}。

我正在寻找一种用 java 编写的解决方案，该解决方案可以应用于任意大小的任何集合（任何对象类型且不限于字符串）。

我已经尝试过这段代码，但我需要适当的停止条件才能在适当的地方进行递归。12 套组合我只得到 5 套！：

组合：必须从中构建所有组合的集合

type2Words：所有替换选项

getType：给出给定元素的类型

结果：所有组合的可能集合

```
void calculateAllCombinations(Set<String> combination,
Map<String, Set<String>> type2Words, Map<String,String> getType,
Set<Set<String>>result)
{   
  Set<String> wordOfStartCombination = new HashSet<String>(combination);

  for(String wordPlaceHolder:wordOfStartCombination)
  {
     String type = getType.get(wordPlaceHolder);
     Set<String> allWithThisType = type2Words.get(type);

     for(String thisType:allWithThisType)
     {
        Set<String> wordTemp = new HashSet<String>(combination);
        wordTemp.remove(wordPlaceHolder);
        wordTemp.add(thisType);
        result.add(wordTemp);
        if(!result.contains(wordTemp))
           calculateAllCombinations(wordTemp,type2Words,getType,result);
     }          
   }
 }

public static void main(String args[])
{
    Set<String> startCombination = new HashSet<String>();
    startCombination.add("a1");startCombination.add("b1"); startCombination.add("c1");

    Map<String,String> getType = new HashMap<String, String>();
    getType.put("a1", "type_a");
    getType.put("a2", "type_a");
    getType.put("a3", "type_a");
    getType.put("b1", "type_b");
    getType.put("b2", "type_b");
    getType.put("c1", "type_c");
    getType.put("c2", "type_c");
    Map<String,Set<String>> type2Word = new HashMap<String, Set<String>>();

    Set<String> typedSet1 = new HashSet<String>();
    typedSet1.add("a1");typedSet1.add("a2");typedSet1.add("a3");type2Word.put("type_a", typedSet1);

    Set<String> typedSet2 = new HashSet<String>();
    typedSet2.add("b1");typedSet2.add("b2");type2Word.put("type_b", typedSet2);

    Set<String> typedSet3 = new HashSet<String>();
    typedSet3.add("c1");typedSet3.add("c2");type2Word.put("type_c", typedSet3);

    Set<Set<String>> result = new HashSet<Set<String>>();
    result.add(startCombination);   

    calculateAllCombinations(startCombination,type2Word,getType,result);
    for(Set<String> word:result)
        System.out.println(word);
} 
```

# javascript - 如何在不点击javascript的情况下执行mailto？

> ID：13276312
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:57:31.097
> 
> 标签：javascript

我想从 javascript 发送一封电子邮件而不点击任何东西。

我想要这样的东西：

```
<script>var x="mailto:xyz@xyz.com";</script> 
```

然后在没有任何用户输入的情况下发送邮件。寻找原生 javascript 解决方案，而不是任何基于框架的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:00:31.190

不能——谢天谢地，我不想访问可以在我不知情的情况下代表我发送电子邮件的*网站*。

除此之外，JavaScript 所能做的就是启动一个“撰写”（告诉安装在客户端上的任何电子邮件应用程序他们想要发送电子邮件）。代理本身无法发送电子邮件，因为这需要由客户端或服务器本身的应用程序完成。

您也许可以执行以下操作：

```
window.location = 'mailto:john.smith@example.com'; 
```

但所有要做的就是撰写一封新的电子邮件，`john.smith@example.com`然后由访问者继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:30:17.500

你绝对可以，但不是你认为的那样。您不能从客户端执行此操作。这将需要单击（您无法伪造——客户端无法触发 DOM 事件）。但是...只要您实际控制服务器，您就可以在服务器上执行此操作。基本上，您是通过在 UI 上触发的 AJAX 请求来完成的，该请求向服务器发送请求。服务器实际发送电子邮件。服务器代码在很大程度上取决于您的技术堆栈。

# php - PHP Mysqli 扩展警告

> ID：13276315
> 
> 赞同：0
> 
> 时间：2012-11-07T18:57:38.067
> 
> 标签：php, oop

我有以下代码，我无法解释为什么它会输出错误。

```
class User extends mysqli{

    // property declaration
    private $server;
    private $user;
    private $pass;
    private $database;
    private $conn;

    function __construct($server, $user, $pass, $database){

        $mysqli = new mysqli($server, $user, $pass, $database);
        if ($mysqli->connect_errno) {
            echo "Connect failed: ". $mysqli->connect_error;
            exit();
        }

        $this->conn = $mysqli;

        return 0;

    }

    function __destruct(){

        $conn = $this->conn;
        $conn->close();

    }
} 
```

和主要代码

```
include("global_config.php");

require "User.php";

$u = new User($con['server'],$con['user'],$con['pass'],$con['db']);

$u->query("SELECT * FROM users"); 
```

返回此错误

```
Warning: mysqli::query() [mysqli.query]: Couldn't fetch User in E:\Xampp\htdocs\testphp\testMysql.php on line 9 
```

通常，它应该表现得像这里的[PHP 继承，使用子变量的父函数](https://stackoverflow.com/questions/9727062/php-inheritance-parent-functions-using-child-variables)

但它没有

我已经用尽了我的想象力来思考我可以用于谷歌搜索的最可能的关键字

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:25:55.473

您做错的第一件事是您的 User 对象扩展了 mysqli 对象并且它们没有类似的东西。继承是“IS A”关系。为了让您的 User 对象使用 Mysqli 对象，您需要“HAS A”关系。这也称为合成。

如果您使用继承，则不要使用组合，因为您不需要同时使用两者。在这种情况下，继承是错误的选择。

如果您想通过 Mysqli 授予 User 对象访问数据库的权限，您需要在 User 对象中包含 Mysqli 对象。

实现这一目标的最佳方法是拥有两个对象，一个代表 Mysqli，另一个代表 User。

您的 User 类可能如下所示：

```
class User 
{
    private $user;
    private $pass;
    private $db;

    function __construct($db)
    {
        $this->db = $db;
    }
} 
```

你会像这样使用它：

```
$db = new mysqli($server, $user, $pass, $database);
$user = new User($db); 
```

现在用户可以访问 Mysqli 对象并且可以与数据库交互。

现在更进一步，您可以创建自己的小型数据库抽象层，该层将包含 mysqli 和 mysqli stmt 对象，并且您可以拥有执行 CRUD 的函数。然后，您可以将该数据库抽象层对象传递给您的 User 对象，这样您将更加强大。

并且不要使用 exit() 函数，只需使用 return 来停止函数。我确切地知道你现在正在经历什么 :) 阅读这篇文章： http: [//phpmaster.com/liskov-substitution-principle/](http://phpmaster.com/liskov-substitution-principle/) 并通过示例了解为什么组合比继承更好。

祝你好运！

# sql - 在查询中返回未找到的值

> ID：13276318
> 
> 赞同：5
> 
> 时间：2012-11-07T18:57:42.967
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在做一个项目，我有一个需要检查的数千条记录的列表。我需要提供未找到的列表，并提供我用来定位它们的查询，以便我的上级可以检查他们的工作。

我承认我对 SQL 比较陌生。我无权创建临时表，这是我想到的一种方法。

我在做什么的基本想法：

```
select t.column1, t.column2
from table1 t
where t.column1 in ('value1','value2','value3') 
```

如果 value1 和 value3 在数据库中，但 value2 不在，我需要显示 value2 而不是其他的。

我已经尝试过`ISNULL`，嵌入查询，并尝试`NOT`从查询中选择值。

我搜索了在 Google 和此站点上的查询中未找到的返回记录，但仍然一无所获。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:14:12.010

我试过类似的东西：

首先创建一个包含您需要的所有此类值的表。

让我们说

```
create table table_values(values varchar2(30)); 
```

然后尝试下面的 in 子句：

```
select * from table_values tv where tv.value not in (select t.column1
from table1 t); 
```

这将返回所需的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:29:54.377

在 SQL Server 2008 中，您可以使用语法创建派生表`VALUES(...)(...)(...)`，例如

```
 select v.value
      from (
           values ('value1'),('value2'),('value3')
           ) v(value)
 left join table1 t on t.column1 = v.value
     where t1.column1 is null 
```

笔记：

1.  VALUES 之后的每个 (...) 都是单行，您可以有多个列。
2.  派生表`v(value)`之后是表的别名和列名。
3.  LEFT JOIN 保留派生表中的值，`v`即使 table1 中不存在该记录
4.  然后，我们只保留无法匹配的记录，即`t1.column1 is null`
5.  我已将您选择的第一列切换到从`v`. column2 被删除，因为它始终为空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:06:25.763

解决方案可能适用于其中 dual 是单行单列表的 Oracle。您需要一张表，您可以在其中虚拟选择所需的值！

**警告因为我无权访问 db 我从未在下面测试过查询。**

```
SELECT tab_all.col_search, t.column1, t.column2
FROM
(
   Select value1 AS col_search from dual
   union all
   Select value2 from dual
   union all
   Select value3 from dual
) tab_all left join  table1 t
on col_search = t.column1
WHERE t.column1 is null; 
```

我相信 sqlserver 相当于 Oracle 的 SELECT value1 FROM dual 是 SELECT value1 OR SELECT 'value1'。

所以试试

```
SELECT tab_all.col_search, t.column1, t.column2
FROM
(
   Select value1 AS col_search
   union all
   Select value2 AS col_search
   union all
   Select value3 AS col_search
) tab_all left join  table1 t
on col_search = t.column1
WHERE t.column1 is null; 
```

由于我不是 sqlserver 人，可能是 RichardTheKiwi 版本的 Oracle 的 select from dual 更好。

# swing - 使用 Scala 的 Swing 包装器，如何通过 foreach 使用集合更新面板的内容？

> ID：13276320
> 
> 赞同：0
> 
> 时间：2012-11-07T18:57:44.307
> 
> 标签：swing, scala, foreach

我有一个面板和一个包含引用 .png 文件的文件名的列表。
我可以使用以下方法将该列表的任何单个索引中的字符串转换为图像：

```
val label = new Label {
  icon = new ImageIcon(myList(0))
} 
```

然后我可以将该标签添加到面板中：

```
object myGUI extends SimpleGUIApplication {
  def top = new MainFrame {
    title = "My simple GUI"
    contents += label
  }
} 
```

但是如果我想为列表中的每个条目构建一个标签，并将这些标签中的每一个添加到 myGUI 怎么办？

我想使用 foreach 或其他一些惯用的 scala 概念来做到这一点。如果不同的集合类型更有意义，我不需要使用列表。然而，据我了解，数组或映射的集合处理功能与列表的集合处理功能相同，因此集合类型无关紧要（无论如何，在这个特定的 GUI 相关问题的范围内）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:09:56.660

我不确定我是否正确理解了您的问题，但这不起作用吗？：

```
object myGUI extends SimpleGUIApplication {
  def top = new MainFrame {
    title = "My simple GUI"
      val list = ... //your list of filepaths
      list foreach { filepath =>
        contents += new Label { icon = new ImageIcon(filepath) }
      }    
  }
} 
```

# php - 本地主机上的 PHP 严格标准错误

> ID：13276324
> 
> 赞同：1
> 
> 时间：2012-11-07T18:57:48.250
> 
> 标签：php, apache

当我尝试安装 RoundCube 时，我的本地机器（mac os 10.8）上不断收到严格的标准错误。

我尝试通过将 php.ini 行编辑为此来关闭它们

```
error_reporting = E_ALL & ~E_NOTICE & ~E_STRICT 
```

重新启动 Apache 后，仍然显示所有错误消息

我正在使用位于[http://php-osx.liip.ch/的 php 安装程序](http://php-osx.liip.ch/)

当我运行 phpinfo() 时，php.ini 位置设置为 /usr/local/php5/lib/php.ini

这是我一直在编辑的文件，但似乎没有发生任何更改。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:12:09.497

Roundcube 中的安装程序脚本会覆盖 php.ini 中的设置。

我在 Roundcube 文件夹中搜索了使用“error_reporting”php 函数的文件，实际上您可以在 .\installer\index.php 中看到 php 错误级别是如何更改的（第 42 行）：

```
ini_set('error_reporting', E_ALL&~E_NOTICE);
ini_set('display_errors', 1); 
```

尝试在此处更改错误级别！

# javascript - MongoDB安全问题

> ID：13276329
> 
> 赞同：1
> 
> 时间：2012-11-07T18:58:08.807
> 
> 标签：javascript, java, mongodb, security, database

我对 MongoDB 安全性的信心动摇了，我希望它会恢复并解释我做错了什么......

我已经像这样创建了 MongoDB 的 Windows 服务：

> mongod --logpath "C:\mongoDB\logs" --logappend --dbpath "C:\mongoDB\data\db" --serviceName MongoDB --serviceDisplayName "Mongo DB" --port 27017 **--auth** --install

然后我创建了一个数据库并将管理用户添加到该数据库的 system.users 集合中。

然后我将一些随机信息填充到我创建的测试集合中。

到目前为止，一切都很好，只有拥有管理员凭据才能访问数据库......

现在重要的部分...

我删除了这样的服务：

> mongod --remove --serviceName "MongoDB"

然后我重新创建了服务，但没有像这样的身份验证：

> mongod --logpath "C:\mongoDB\logs" --logappend --dbpath "C:\mongoDB\data\db" --serviceName MongoDB --serviceDisplayName "Mongo DB" --port 27017 **--noauth** --install

令我惊讶的是，我现在能够访问我现在使用身份验证创建的数据库......

请告诉我我应该做些不同的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:02:25.317

身份验证发生在守护程序级别，而不是数据库级别。数据本身没有加密或其他访问控制。如果您在不需要凭据的情况下运行该服务，那么正如预期的那样，连接和使用它不需要凭据。

这通常不被认为是有问题的，就像您可以访问服务器并且可以修改守护程序一样，根据定义，您无论如何都可以访问数据文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:59:57.867

没有身份验证意味着您不必提供凭据：

> 无认证
> 
> ```
> Default: true
> 
> Disable authentication. Currently the default. Exists for future compatibility and clarity.
> 
> For consistency use the auth option. 
> ```

[资源](http://docs.mongodb.org/manual/reference/configuration-options/)

您犯的配置错误是您禁用了数据库中的任何身份验证措施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:06:41.927

出色地...

因为如果我们用文本编辑器编辑数据库文件，我们可以看到存储的信息，你是对的，信息没有加密。

在我看来，按照这种想法顺序，在安全数据库上执行 mongodump 或 mongorestore 命令时指定用户和密码是多余的。让我们面对现实吧，如果一个恶意的管理员对导出数据感兴趣，他可以自己编辑数据库文件，当然还有更多的工作：P

我知道身份验证是在数据库级别而不是实例本身（通过管理数据库），但我认为对于一个恶意的用户来说很容易再次获取数据库信息，因为他不需要指定身份验证来删除 Windows服务...

感谢您的意见！

# logging - Foursquare 登录 [使用 Flash]

> ID：13276331
> 
> 赞同：0
> 
> 时间：2012-11-07T18:58:27.063
> 
> 标签：logging, login, flash, foursquare

是否可以在广告单元/swf/flash 中实现 Foursquare 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:04:46.070

不可以。您需要能够使用 StageWebView 之类的东西，它只在 AIR 中可用。

# ruby-on-rails - 启动 Ruby on Rails 应用程序时无法通过 AWS Elastic Beanstalk“恭喜”屏幕

> ID：13276335
> 
> 赞同：1
> 
> 时间：2012-11-07T18:58:35.450
> 
> 标签：ruby-on-rails, ruby, amazon-web-services, amazon-elastic-beanstalk

我遵循了所有[的指示](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html)，[这](http://passagebank-env-ky692euhv5.elasticbeanstalk.com)就是[结果](http://snapplr.com/pph8)。

我正在我的应用程序根路径中创建 .rvmrc 文件，以及[此处](http://blog.ninjahideout.com/posts/the-path-to-better-rvm-and-passenger-integration)`setup_load_paths.rb`所述的 文件`/config`夹中的文件。我做了所有这些，然后我意识到我的电脑正在使用 ruby​​ 1.9.3p194。EC 实例使用 1.9.3p286。所以我正在匹配它们并重新创建 .rvmrc 文件。

这样做时，我注意到 beanstalk ec2 服务器甚至没有安装 rails。我应该能够输入`rails --version`我假设并在我的计算机`ruby --version`上和服务器上看到的版本。所以我在我的新 beanstalk ec2 服务器上安装 RVM，带有和 rails（[就像我过去所做的那样）。](https://rvm.io/rvm/install)但总的来说，这一切似乎都违背了目的。它应该是有点自动的。安装rails 肯定听起来不对。它是否以另一种方式安装在服务器上？

关于如何获得对 ROR 工作的新 beanstalk 支持的任何建议？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T23:21:47.707

从您的乘客异常中的错误来看，Bundler 似乎无法`Ascii85`在您的远程源中找到 gem。您的远程源应在您的 Gemfile 中以如下形式列出：

```
source :rubygems 
```

如果这不起作用，请尝试在表单中明确指定源：

```
source 'http://rubygems.org' 
```

请注意，您不应该为部署中的 RVM/Passenger 集成做任何特殊的事情。事实上，如果任何平台细节发生变化，任何额外的专业集成实际上都可能导致 Elastic Beanstalk 出现问题。您应该使用标准 Rails 约定来构建您的应用程序。

至于`rails -v`失败：Rails 是通过 Gemfile 引入的，它依赖于`bundle install`成功。您的乘客错误表明 Bundler 无法解决您对远程源的依赖关系，这可能意味着 Rails 也没有安装。换句话说，Rails 只有在 bundle 安装成功时才可用。

# mysql - 在 sql 中导入 Schema 时出错

> ID：13276337
> 
> 赞同：0
> 
> 时间：2012-11-07T18:58:40.590
> 
> 标签：mysql, sql, exception-handling

大家好，我正在尝试将模式从 mysql vesion 5.0 导入到 5.1。每次我尝试导入架构时，我都会收到此错误：

Drop Proceduer service_tt_yes' MySql.Data.MySqlClient.MySqlException 附近出错：mysql.proc 的列数错误。预期 20，发现 16。该表可能已损坏。

我尝试跳过该过程，但在下一个过程中发生错误。

任何解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:17:09.460

您可能可以在 MySQL 客户端中使用以下命令

> **使用数据库名称；源 [QUALIFIED-LOCATION]IMPORTED_SCHEMA.sql**

就像您在 D: 驱动器中有 IMPORTED_SCHEMA.sql 一样，然后触发以下命令。**注意最后没有分号**

> **源 D:\IMPORTED_SCHEMA.sql**

# javascript - 使用 AngularJS，我如何绑定一个元素到通过服务更新的属性我有一个显示控制器和一个管理控制器。在我的显示控制器中，我有一个下拉选择器，其中包含已选择的项目列表。我可以获得显示区域下拉列表来更新列表，在管理控制器中添加项目时添加项目，但我无法弄清楚如何在下拉列表中选择最新项目。<select ng-model="item" ng-options="i.name for i in items" &gt<="" h1="">ID：13276339 赞同：23 时间：2012-11-07T18:58:44.490 标签：javascript, angularjs 回答 #1 赞同：15 时间：2012-11-07T20:56:53.517 好吧，看起来我已经找到了一个非常令人满意的答案。 我通过控制器暴露了存储对象本身 function MyDisplayCtrl($scope, ItemStore) { $scope.items = ItemStore.items; $scope.item = ItemStore.currentItem; // expose the itemstore service to the dom $scope.store = ItemStore $scope.getItem = function(){ return(ItemStore.currentItem); } } 然后直接寻址currentItem <div ng-controller="MyDisplayCtrl"> <select ng-model="store.currentItem" ng-options="i.name for i in items"> </select> </div> http://jsfiddle.net/whtevn/Cp2RJ/3/ 回答 #2 赞同：4 时间：2012-11-08T06:15:17.563 尝试使用ng-options： <div ng-controller="MyDisplayCtrl"> <select ng-options="i.name for i in items"></select> </div> 请参阅：http ://docs.angularjs.org/api/ng.directive:select</select>

# javascript - 我可以在 CoffeeScript 文件中使用普通的 JavaScript 吗？

> ID：13276340
> 
> 赞同：17
> 
> 时间：2012-11-07T18:58:48.193
> 
> 标签：javascript, ruby-on-rails, coffeescript

我正在尝试在我的 Ruby on Rails 应用程序中添加一些 JavaScript 代码。我已经为我的资产中的每个视图创建了一些 js.coffee 文件。因为，我不熟悉 CoffeeScript，所以我只是在文件中传递了一些普通的 JavaScript/jQuery 行，例如：

```
if ($('#cart').length == 1) { $('#cart').hide("blind", {direction: "vertical" }, 1000); }

$('#cart tr').not('.total_line').remove(); 
```

但引发了以下错误：

> 错误：第 1 行的解析错误：意外的“POST_IF”（在 /home/gotqn/Aptana Projects/depot/app/assets/javascripts/carts.js.coffee 中）

来源指向

> 显示 /home/gotqn/Aptana Projects/depot/app/views/layouts/application.html.erb 其中第 6 行提出：

在第 6 行的这个文件中，我得到：

```
<%= javascript_include_tag "application" %> 
```

我是 Ruby on Rails 的新手，但我想正在发生的事情是我无法在 CoffeeScript 中编写简单的 JavaScript。如果这是真的，我可以只删除 .coffe 扩展名并确保 Rails 魔法能够工作并加载文件吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-07T19:05:21.800

来自[coffeescript.org](http://coffeescript.org/)上的文档：

> 希望您永远不需要使用它，但是如果您需要在 CoffeeScript 中散布 JavaScript 片段，您可以使用反引号直接传递它。

所以是的，你可以在 CoffeeScript 中使用 JavaScript -[只需用反引号括起来](https://coffeescript-cookbook.github.io/chapters/syntax/embedding_javascript)：

```
`function greet(name) {
return "Hello "+name;
}`

# Back to CoffeeScript
greet "Coffee"
# => "Hello Coffee"

hello = `function (name) {
return "Hello "+name
}`
hello "Coffee"
# => "Hello Coffee" 
```

不过，强烈建议您将代码转换为 CoffeeScript。

# vim - 只是想知道在 vim 中使用 xdebug 的变量的值

> ID：13276348
> 
> 赞同：0
> 
> 时间：2012-11-07T18:59:22.463
> 
> 标签：vim, xdebug

我是使用 xdebug（或任何其他软件）调试的新手，所以我安装了这个[插件](https://github.com/ludovicPelle/vim-xdebug)，我按照这些[说明](http://2bits.com/articles/using-vim-and-xdebug-dbgp-for-debugging-drupal-or-any-php-application.html#comment-1490)只是为了知道变量的值。因此，为了检查变量的值，我认为这些是步骤：

*   创建断点
*   在vim中按F5
*   在浏览器中按 F5
*   vim中按F4
*   将光标移动到变量
*   按 F12 检查变量的值

它工作正常，但对我来说，这些步骤太多，只是为了避免典型的`var_dump($variable);die;`线路。

我有什么做错了吗？还有其他更快的方法来检查变量的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:24:20.763

Vim 首先是一个文本编辑器。不过，由于它的通用性和可扩展性，您可以让它更像 IDE。

如果您是初学者（需要调试）并且想要舒适、轻松的体验，我建议您改用成熟的 IDE。（您仍然可以将 Vim 集成到您的工作流程中以进行文本编辑；例如，我从我的 IDE 中使用一个简单的快捷方式在 Vim 中打开文件。）

如果您真的想避免使用 IDE（无论出于何种原因）并坚持使用简单的、面向命令行的工具，我建议您先独立学习*xdebug*，然后再尝试将其与 Vim 集成。

# css - css font-face 代码在 IE7 / 8 上不起作用

> ID：13276350
> 
> 赞同：0
> 
> 时间：2012-11-07T18:59:41.500
> 
> 标签：css, internet-explorer, fonts, internet-explorer-7, font-family

我使用 font-squirrel 生成网络字体并为字体指定 CSS 声明，但当我使用 IE7 或 IE8 浏览器和文档模式在 IE9 中查看页面时，它仍然使用备用字体。知道发生了什么吗？这是我的代码（和屏幕截图）：

```
@font-face {
    font-family: 'cubanoregular';
    src: url('../fonts/cubano/cubano/../fonts/cubano/cubano-regular-webfont.woff-webfont.eot');
    src: url('../fonts/cubano/cubano-regular-webfont.woff-webfont.eot?#iefix') format('embedded-opentype'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.woff') format('woff'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.ttf') format('truetype'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.svg#../fonts/cubano/cubanoregular') format('svg');
    font-weight: normal;
    font-style: normal;
}

.cubano { font-family: 'cubanoregular' } 
```

![在此处输入图像描述](../Images/2ea8b96560aaf0505fba4367962ef8f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:21:39.817

如果您在上面输入的代码是准确的，那么唯一的问题是您的`eot`文件路径不正确：

```
src: url('../fonts/cubano/cubano/../fonts/cubano/cubano-regular-webfont.woff-webfont.eot');... 
```

修复它，它应该可以正常工作。我相信IE`@font-face`从版本 5 开始就支持，但在 9 之前的版本中，仅支持[eot](http://en.wikipedia.org/wiki/Embedded_OpenType)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:02:11.053

您的代码没有问题，问题似乎出在字体上。但如果你愿意，它在[Typekit上。](https://typekit.com/fonts/cubano)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:21:14.463

检查您的`src`路径是否正确

```
src: url('../fonts/cubano/cubano/../fonts/cubano/cubano-regular-webfont.woff-webfont.eot');
    src: url('../fonts/cubano/cubano-regular-webfont.woff-webfont.eot?#iefix') format('embedded-opentype'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.woff') format('woff'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.ttf') format('truetype'),
        url('../fonts/cubano/cubano-regular-webfont.woff-webfont.svg#../fonts/cubano/cubanoregular') format('svg'); 
```

可能需要

```
src: url('../fonts/cubano/cubano-regular-webfont.woff-webfont.eot');
src: url('../fonts/cubano/cubano-regular-webfont.woff-webfont.eot?#iefix') format('embedded-opentype'),
    url('../fonts/cubano/cubano-regular-webfont.woff-webfont.woff') format('woff'),
    url('../fonts/cubano/cubano-regular-webfont.woff-webfont.ttf') format('truetype'),
    url('../fonts/cubano/cubano-regular-webfont.woff-webfont.svg#../fonts/cubano/cubanoregular') format('svg'); 
```

# c# - 如何在 Windows Phone 7 的 UserControl 中设置与祖先属性的双向绑定？

> ID：13276352
> 
> 赞同：0
> 
> 时间：2012-11-07T18:59:40.940
> 
> 标签：c#, wpf, windows-phone-7, xaml, user-controls

这是我的用户控件的 XAML：

```
<UserControl x:Name="titledTextBox" x:Class="VitalStats.View.Controls.TitledTextBox"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="480" d:DesignWidth="480"
    >

    <Grid x:Name="LayoutRoot">
        <StackPanel Orientation="Vertical">
            <TextBlock x:Name="titleTextBlock" 
                       TextWrapping="Wrap" 
                       Margin="12,5,0,-5" 
                       Text="{Binding Title, ElementName=titledTextBox, FallbackValue=Title Here}" 
                       FontSize="20" 
                       Foreground="{StaticResource PhoneSubtleBrush}"/>
            <TextBox x:Name="inputTextBox" Text="{Binding Text, ElementName=titledTextBox, Mode=TwoWay}"/>   
        </StackPanel>
    </Grid>

</UserControl> 
```

这就是我的代码隐藏的样子，

```
// Usings here

namespace VitalStats.View.Controls
{
    public partial class TitledTextBox : UserControl
    {

        [Description("A TextBox with built in title")]
        public TitledTextBox()
        {
            InitializeComponent();

            if (DesignerProperties.GetIsInDesignMode(this)  )
            {
                this.Title = "Title Here";  
            }
        }

        public string Title
        {
            get { return this.GetValue(TitleProperty) as string; }
            set { this.SetValue(TitleProperty, value); }
        }
        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.Register("Title", typeof(string), typeof(TitledTextBox), null);

        public string Text
        {
            get { return this.GetValue(TextProperty) as string; }
            set { this.SetValue(TextProperty, value); }
        }
        public static readonly DependencyProperty TextProperty = 
            DependencyProperty.Register("Text", typeof(string), typeof(TitledTextBox), null);

    }
} 
```

将数据读入 UI 时绑​​定工作（因此该`Title`属性可以正常工作）但是当从 UI 读取（即尝试`Text`从代码访问）时，该属性始终为空，这意味着绑定只是单向的（尽管有该`Mode=TwoWay`属性） .

我知道（感谢 XamlZealot 的回答）`FindAncestor`绑定，但`AncestorType`在 Windows Phone 7（或 Silverlight）XAML 命名空间中不存在。

`UserControl`那么如何设置从内部到属性的双向绑定`UserControl`？

这是在 Windows Phone 7（7.1 项目）上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:15:36.140

尝试使用`RelativeSource`Binding 代替`ElementName`：

```
Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, Path=Title, FallbackValue=Title Here}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:57:48.373

所以以下可能不是我问的，而是我用来解决问题的。由于我想要做的只是将标题的文本链接到`TextBlock`输入中`Title`的`UserControl`文本和相同的文本，因此后面的代码可能如下所示，

```
public string Title
{
    get { return this.titleTextBlock.Text; }
    set { this.titleTextBlock.Text = value; }
}

public string Text
{
    get { return this.inputTextBox.Text; }
    set { this.inputTextBox.Text = value; }
} 
```

不需要之类的`DependencyProperties`。

# html - 高度显示不正确

> ID：13276360
> 
> 赞同：2
> 
> 时间：2012-11-07T19:00:03.863
> 
> 标签：html, html-table, tablerow

最近一段时间，我一直在努力解决一个非常愚蠢的问题。为什么我不能让分隔两个框的单元格以 9px 正确显示？我已经做了几次数学运算，结果很好，但是在带有指向它的箭头的单元格中，它增加了额外的高度：

![在此处输入图像描述](../Images/6b71af85ab63b6fa6c6d4f9a797f323a.png)

实际上，我似乎将为其设置的 9 像素高度加倍（大约 18 像素）。为什么？？这是没有意义的。

```
<!-- BIG WRAPPER TABLE FOR CENTRAL CONTENT -->
<table width="700px" border="0" cellspacing="0" cellpadding="0" class="homepage">
  <tr align="center">
    <td>

      <table width="681" height="451" border="0" cellspacing="0" cellpadding="0" align="center">
        <tr>
          <td rowspan="3" bgcolor="#FF66CC">Image will go here</td>
          <td rowspan="3" width="9">&nbsp;</td>
          <td height="221" width="221" bgcolor="#3f7583">Text will go here</td>
        </tr>
        <tr height="9">
          <td height="9" width="221" bgcolor="#FFFFFF">&nbsp;</td>
        </tr>
        <tr>
          <td height="221" width="221" bgcolor="#CC0000">Image will go here</td>
        </tr>
    </table>

    </td>
  </tr>
</table>
<!-- END BIG WRAPPER TABLE --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:07:07.103

这是因为你的 td

```
 <td height="9" width="221" bgcolor="#FFFFFF">&nbsp;</td> 
```

`&nbsp;`当以正常字体大小呈现时，它会占用您的高度，只需将其删除即可。

这是[**工作小提琴**](http://jsfiddle.net/nVXAA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:07:01.147

与其为您的间距创建 TD，不如直接使用 CellSpacing 来完成您需要做的事情：

```
<table width="700px" border="0" cellspacing="0" cellpadding="0" class="homepage" style="font-size: 7pt;">
  <tr align="center">
    <td>

      <table width="681" height="451" border="0" cellspacing="9" cellpadding="0" align="center">
        <tr>
          <td rowspan="2" bgcolor="#FF66CC">Image will go here</td>

          <td height="221" width="221" bgcolor="#3f7583">Text will go here</td>
        </tr>
        <tr>
          <td height="221" width="221" bgcolor="#CC0000">Image will go here</td>
        </tr>
    </table>

    </td>
  </tr>
</table>
<!-- END BIG WRAPPER TABLE --> 
```

# python - 如何在 Django 中指定关系的唯一性

> ID：13276361
> 
> 赞同：4
> 
> 时间：2012-11-07T19:00:05.370
> 
> 标签：python, django, database-design

我试图在 Django 中表示一些电影收视率数据。这是我的模型的简化版本，它说明了我的问题：

```
class RatingSystem(models.Model):
    """This denotes a rating authority and territory in which they operate"""
    name = models.CharField(max_length=16)
    territory = models.CharField(max_length=32)

class Rating(models.Model):
    """This represents a rating designation used by a rating system."""
    code = models.CharField(max_length=16)
    description = models.TextField()
    system = models.ForeignKey(RatingSystem)

class FilmRating(models.Model):
    """This is a rating for a film and the reason why it received the rating.

    Each film can have many ratings, but only one per rating system.
    """
    rating = models.ForeignKey(Rating)
    film = models.ForeignKey('Film')
    reason = models.TextField()

class Film(models.Model):
    """Data for a film."""
    title = models.CharField(max_length=64)
    synopsis = models.TextField()
    ratings = models.ManyToManyField(Rating, through=FilmRating) 
```

正如评论所指出的，每部电影可以有多个评级，但每个评级系统只有一个评级。例如，一部电影不能同时被 MPAA 评为“R”和“PG”。然而，它可以被 MPAA 评为“R”，被 BBFC 评为“15”。

我正在努力在 Django 中正式化这个约束。我想做：

```
unique_together = ('film', 'rating__system') 
```

但`FilmRating`似乎不允许遵循这样的关系。如果我使用纯 SQL，我会在`code`中创建`system`一个复合主键，然后在和in`Rating`上创建一个唯一约束。不幸的是，Django 不支持复合键。我考虑过覆盖 的方法，但如果可能的话，我更愿意在数据库级别设置约束。`system``film``FilmRatings``save()``FilmRating`

任何人都知道如何做到这一点？如果有帮助的话，重组表格也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:13:04.337

我认为你应该看看`validate_unique`

[几年前在stackoverflow中同样的问题](https://stackoverflow.com/questions/4440010/django-unique-together-with-foreign-keys)

[Django 文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.validate_unique)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T03:03:26.350

**编辑：**根据@JoshSmeaton 和@MSaavedra 的评论更新答案

使用 Django 的[syncdb hook](https://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-sql-data)，您可以`ALTER TABLE`直接在数据库上运行语句。如果违反了唯一约束， Django 将引发一个`IntegrityError`，即使该约束不是由 django 定义的。

然后，添加约束[`validate_unique`](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.validate_unique)将减少开发人员的困惑，并在 Django 中安全地执行约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:23:44.663

您可以使用模型字段验证。

[https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects](https://docs.djangoproject.com/en/dev/ref/models/instances/#validating-objects)

# c++ - 如何在 C++ 中故意跳过 cin？

> ID：13276363
> 
> 赞同：1
> 
> 时间：2012-11-07T19:00:28.633
> 
> 标签：c++, cin

我需要运行一个while循环并在有输入时接受输入。我对 C++ 并不陌生，但这个障碍非常困难。由于 NDA（这个学校项目显然是一些秘密的东西），我只能向您展示测试用例。

我一直在寻找解决问题的稻草；尝试捕捉、cin.get、cin.peek、if(cin.peek){}。如果有人能指出我正确的方向，我将不胜感激！

该程序不是时间关键的，但需要以固定间隔调用函数。代码的可移植性、while-cin-combination 或类似的东西并不重要；该代码只能在至少具有双核处理器的 Windows 7 或 Windows 8 PC 上运行。

```
#include <iostream>
#include <ctime>

using namespace std;

int main()
{
    int input = 0;
    int pastTime, nowTime;
    pastTime = nowTime = time(0);

    cin >> input;
    while(input != -1)
    {
        if(input == 1)
        {
            cout << "Entered 1" << endl;
            //To be done instead of the two 'elses', 
            //bypassing interval-dependant code
        }
        else if(input == 2)
        {
            cout << "Entered 2" << endl;
            //To be done instead of the interval-dependant code
        }
        else if(pastTime == (nowTime - 5))
        {
            cout << "Nothing entered." << endl;
            //Needs to be done with a fixed interval.
        }
        nowTime = time(0);
        cin >> input;
    }
return 0;
} 
```

解决方案是，基于 om James Beilby 的链接：

```
// This program is based on counter.cpp from Boost\lib\thread\tutorial

#include <boost/thread/thread.hpp>
#include <iostream>
#include <ctime>

int timeNow = time(0);
int timePast = time(0);

void fct_one()
{
    while(1) //keeps running all the time
    {
        if(timePast == (timeNow - 3)) // only executed once every three seconds
        {
            //do some stuff
            timePast = time(0);
        }
        timeNow = time(0); // time is continuously updated 
    }
}

void fct_two()
{
    int input = 0;
    int timeTemp = time(0);
    while(1) //keeps running all the time
    {
        std::cin >> input; // cin blocking for input
        if(input == 1)
        {
            //do some stuff
        }
        if(input == 2)
        {
            //do some stuff
        }
        if(input == -1)
        {
            std::cout << "Program is done. ";
            system("pause");
            exit(1);
        }
    }
}

int main()
{
    boost::thread_group threads;
    threads.create_thread(&fct_one)
    threads.create_thread(&fct_two);
    threads.join_all();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:23:06.867

我会将读取输入`cin`与执行默认超时功能完全分开。您将需要一个后台线程之类的东西，它根据时间间隔执行默认功能。要处理前两种情况，您需要通知线程跳过下一次执行（如果确实有必要），只需调用您想要的任何函数或什么都不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:42:29.987

简单的答案是将在某个时间间隔运行的代码放在另一个线程上。由于您已经注意到这是 Windows，您可以使用[Timer Queue](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686796%28v=vs.85%29.aspx)：

从例行程序开始，以开始和停止依赖时间的工作：

```
HANDLE Start(HANDLE hTimerQueue)
{
    DWORD timerMS = 5000; /* every 5 seconds */
    HANDLE hTimer;
    if (!CreateTimerQueueTimer(&hTimer, 
          hTimerQueue,
          (WAITORTIMERCALLBACK)timerWork,
          /*lpParam*/NULL,
          /*start in ___ ms:*/0,
          /*run every __ ms:*/timerMS,
          /*flags*/0))
    {
        return NULL;
    }

    return hTimer;
}

BOOLEAN Stop(HANDLE hTimerQueue, HANDLE hTimer)
{
    if (!DeleteTimerQueueTimer(hTimerQueue,
        hTimer,
        /*wait for our timer to complete*/INVALID_HANDLE_VALUE))
    {
        return FALSE;
    }

    return TRUE;
} 
```

然后将依赖时间的工作放入它自己的回调中：

```
VOID CALLBACK timerWork(PVOID lpParam, BOOLEAN TimerOrWaitFired /*ignored*/)
{
    for (int ii = 0; ii < 10; ++ii) {
        std::cout << "timer work: " << ii << std::endl;
        Sleep(250);
    }
} 
```

最后，将这些集成到您的工作流程中：

```
int main(int argc, char* argv[])
{
    HANDLE hTimerQueue = CreateTimerQueue(hTimerQueue);
    if (NULL == hTimerQueue) return -1;
    HANDLE hTimer = Start(hTimerQueue);
    if (NULL == hTimer) return -1;

    /* our timed callback is now running in the background */
    int input = 0;
    std::cin >> input;
    while(input != -1)
    {
        if(input == 1)
        {
            if (Stop(hTimerQueue, hTimer)) {
                std::cout << "Entered 1" << std::endl;
                if (NULL == (hTimer = Start(hTimerQueue))) return -2;
            }
        }
        else if(input == 2)
        {
            if (Stop(hTimerQueue, hTimer)) {
                std::cout << "Entered 2" << std::endl;
                if (NULL == (hTimer = Start(hTimerQueue))) return -2;
            }
        }

        std::cin >> input;
    }

    DeleteTimerQueue(hTimerQueue);
    return 0;
} 
```

# asp.net-mvc - ASP.Net MVC 4 自定义授权票重定向问题

> ID：13276368
> 
> 赞同：1
> 
> 时间：2012-11-07T19:00:34.237
> 
> 标签：asp.net-mvc, forms-authentication, formsauthenticationticket

我在设置自定义表单身份验证票证后重定向到安全操作时遇到问题。这是正在发生的事情：

1.  我导航到站点/主页/索引
2.  我被自动重定向到站点/帐户/登录
3.  我使用有效的用户/密码登录
4.  RedirecToUrl() 函数尝试将我重定向回站点/主页/索引，但我会自动返回到站点/帐户/登录
5.  该请求已通过身份验证。如果我手动导航到站点/主页/索引，则允许我进入。

任何人都可以解释一下吗？

我的家庭控制器：

```
[Authorize]
public ActionResult Index()
{
    return View();
} 
```

我的帐户控制器：

```
 [HttpGet]
    [AllowAnonymous]
    public ActionResult Login(string returnUrl)
    {
        ViewBag.ReturnUrl = returnUrl;
        return View();
    }

    [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Login(LoginModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            bool bLogin = MyAuthentication.Login(model.UserName, model.Password);

            if (bLogin)
            {
                Response.Cookies.Add(MyAuthentication.GetAuthenticationCookie(model.UserName.ToLower(), model.RememberMe));
                RedirectToUrl(returnUrl);
            }
            else
                ModelState.AddModelError("", "That is not a valid Username/Password combination");

        }

        return View(model);
    }

    private ActionResult RedirectToUrl(string returnUrl)
    {
        if (Url.IsLocalUrl(returnUrl))
            return Redirect(returnUrl);
        else
            return RedirectToAction("Index", "Home");
    } 
```

这是我创建自定义票证的方式（仅添加用户数据）：

```
 public static HttpCookie GetAuthenticationCookie(string UserName, bool persistLogin)
    {
        var userData = null; // Code removed for brevity

        FormsAuthenticationTicket authTicket = new FormsAuthenticationTicket(
                 1,
                 UserName,
                 DateTime.Now,
                 DateTime.Now.AddMinutes(20),
                 persistLogin,
                 userData);

        string encTicket = FormsAuthentication.Encrypt(authTicket);
        return new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:16:07.103

啊！！！

```
 RedirectToUrl(returnUrl); 
```

需要是

```
 return RedirectToUrl(returnUrl); 
```

# c++ - Visual Studio C++中的静态和动态库链接

> ID：13276373
> 
> 赞同：3
> 
> 时间：2012-11-07T19:00:49.027
> 
> 标签：c++, visual-studio-2010, dll, static-libraries

在visual studio 2010中，我将项目构建为一个动态库（比如dyn1.dll），它使用另一个dll（比如dyn2.lib、dyn2.dll、dyn2.h是各自的文件）。我将 dyn2.h 和 dyn2.lib 直接包含在我的项目中。并将“路径”变量设置为指向 dyn2.dll 所在的位置。这是我遵循使 dyn1.dll 工作的过程。

现在说我将我的项目构建为静态库（比如 sta1.lib），同时仍然使用 dyn2.dll、dyn2.h 和 dyn2.lib。是dyn2.lib中包含的所有代码，dyn2.dll并入sta1.lib中。

意思是 sta.lib 独立。我不需要指向路径变量中的 dyn2.dll 目录来使 sta1.lib 工作吗？我对这些不熟悉，所以一个澄清的答案会很有帮助

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:08:25.760

简单的答案是**否定**的。来自 dyn2.dll 的代码**不**包含在您的静态 dyn1.lib (sta1.lib) 中。事实上，您必须将 dyn2.lib 与现在使用您的静态 sta1.lib 的任何项目链接，否则您将遇到未解决的链接器错误。

这并不是说您的静态库没有*引用*dyn2.dll 中的代码；这是。但是作为一个静态库，没有PE模块。它只是带有外部引用的 .obj 代码模块的集合。这些外部引用（对 dyn2.dll）仍然需要由使用静态库中代码的人解析，而静态库中的代码又使用对 dyn2.dll 的代码引用。静态库没有“链接时间”解决方案。这只发生在您链接最终的 PE（无论是 DLL 还是 EXE）时。事情仍然需要在最后一个环节解决。

因此，回答你的第二个问题。*无论哪种*情况（静态或动态），您的最终可执行文件仍然需要对 dyn2.dll 进行加载访问，无论它在哪里。此外，它现在还必须与 dyn2.dll 导入库 (dyn2.lib) 链接，就像之前的 dyn1.dll 一样。

# javascript - 替换所有 javascript

> ID：13276374
> 
> 赞同：2
> 
> 时间：2012-11-07T19:00:52.170
> 
> 标签：javascript, replace

我有这个问题我正在尝试用 à ecc 替换所有像 àòùèì 这样的字符......

我有这个可以工作的原型：

```
String.prototype.ReplaceAll = function(stringToFind,stringToReplace){
    var temp = this;
    var index = temp.indexOf(stringToFind);
        while(index != -1){
            temp = temp.replace(stringToFind,stringToReplace);
            index = temp.indexOf(stringToFind);
        }
        return temp;
    }; 
```

现在我想将此原型与我的名为 Clean 的函数一起使用：

```
function Clean(temp){
temp.ReplaceAll("è","&egrave;");
temp.ReplaceAll("à","&agrave;");
temp.ReplaceAll("ì","&igrave;");
temp.ReplaceAll("ò","&ograve;");
temp.ReplaceAll("ù","&ugrave;");
temp.ReplaceAll("é","&eacuta;");
return temp;
} 
```

现在我想像这样使用我的功能：

```
var name= document.getElementById("name").value;
var nomePul=Clean(name); 
```

为什么这不起作用？怎么了？

在这种情况下它可以工作（没有我的功能干净，所以我认为问题就在那里）

```
var nomePul=nome.ReplaceAll("è","&egrave;"); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:04:10.807

使用以下内容：

```
function Clean(temp){
temp=temp.ReplaceAll("è","&egrave;");
temp=temp.ReplaceAll("à","&agrave;");
temp=temp.ReplaceAll("ì","&igrave;");
temp=temp.ReplaceAll("ò","&ograve;");
temp=temp.ReplaceAll("ù","&ugrave;");
temp=temp.ReplaceAll("é","&eacuta;");
return temp;
} 
```

您没有分配值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T10:32:48.333

这是replaceAll的另一个实现。希望它可以帮助某人。

```
 String.prototype.replaceAll = function (stringToFind, stringToReplace) {
        if (stringToFind === stringToReplace) return this;
        var temp = this;
        var index = temp.indexOf(stringToFind);
        while (index != -1) {
            temp = temp.replace(stringToFind, stringToReplace);
            index = temp.indexOf(stringToFind);
        }
        return temp;
    }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:05:06.977

ReplaceAll() 返回一个字符串。所以你应该做

```
temp = temp.ReplaceAll("è","&egrave;"); 
```

在您的 Clean() 函数中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T19:06:15.710

该`ReplaceAll`函数不会改变字符串。它返回一个新字符串。这意味着您需要分配它，如下所示：

```
function Clean(temp){
    temp = temp.ReplaceAll("è","&egrave;");
    temp = temp.ReplaceAll("à","&agrave;");
    temp = temp.ReplaceAll("ì","&igrave;");
    temp = temp.ReplaceAll("ò","&ograve;");
    temp = temp.ReplaceAll("ù","&ugrave;");
    temp = temp.ReplaceAll("é","&eacuta;");
    return temp;
} 
```

请注意，原型方法可以链接起来，因此如果您这样做，您的重复性可能会稍微降低：

```
function Clean(temp){
    return temp.ReplaceAll("è","&egrave;")
        .ReplaceAll("à","&agrave;")
        .ReplaceAll("ì","&igrave;")
        .ReplaceAll("ò","&ograve;")
        .ReplaceAll("ù","&ugrave;")
        .ReplaceAll("é","&eacuta;");
} 
```

如果您愿意，您可以改用 Javascript 中完成全局替换的典型方式，因此您不需要使用自定义`ReplaceAll`原型函数。

```
 return temp.replace(/è/g,"&egrave;")
        .replace(/à/g,"&agrave;")
        .replace(/ì/g,"&igrave;")
        .replace(/ò/g,"&ograve;")
        .replace(/ù/g,"&ugrave;")
        .replace(/é/g,"&eacuta;"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-18T12:55:31.033

你可以在 javascript 中以 2 种方式应用它。

1）使用替换的字符串拆分和连接字符串数组：

```
 return temp.split("è").join("&egrave;")
        .split("à").join("&agrave;")
        .split("ì").join("&igrave;")
        .split("ò").join("&ograve;")
        .split("ù").join("&ugrave;")
        .split("é").join("&eacuta;"); 
```

2) 使用内置于 javascript 本身的全局替换（如[Peter](https://stackoverflow.com/a/13276452/1334561)上面指定的）

```
return temp.replace(/è/g,"&egrave;")
        .replace(/à/g,"&agrave;")
        .replace(/ì/g,"&igrave;")
        .replace(/ò/g,"&ograve;")
        .replace(/ù/g,"&ugrave;")
        .replace(/é/g,"&eacuta;"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-10T15:28:32.770

尝试以下代码替换所有。您可以使用此代码实现功能。

```
var str = "Test abc test test abc test test test abc test test abc";
str = str.split('abc').join('');
alert(str); 
```

# ruby-on-rails - ActiveRecord 包含在订单中

> ID：13276375
> 
> 赞同：1
> 
> 时间：2012-11-07T19:00:54.760
> 
> 标签：ruby-on-rails, activerecord

我有模型：

```
 class FirstModel < AR::B
   belongs_to :second_model
 end

 class SecondModel < AR::B
   #name
   has_many :first_model
 end 
```

我有代码：

```
 @a = FirstModel.where(#some query)
 @a.include([:second_model]) 
```

如何按名称包含 SecondModel？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:26:33.610

`order`您可能在 has_many 方法中要求选项。例如。：

`has_many :first_models, order: 'name'`

但是您的代码片段并不完美，因为`FirstModel`只有一个`SecondModel`（属于）并且您可能要求`SecondModel.where(...).include(:first_models)`.

# expression - BNF 重复字符序列

> ID：13276379
> 
> 赞同：1
> 
> 时间：2012-11-07T19:01:09.137
> 
> 标签：expression, bnf, repeat

如何使用 BNF 表达式找到由 3 个或更多“a”组成的序列，后跟相同数量的“b”？

我知道

```
{<letter>} or {<letter> | <digit>} 
```

用于出现零次或多次的重复项目，但我不知道如何获取“a”重复的次数以确保“b”重复相同的次数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:10:54.857

像这样的东西：

```
<valid-string> ::= "aaa" <ab> "bbb"
<ab>           ::= "a" <ab> "b" | "" 
```

这从三个`a`和三个开始`b`，以照顾最低要求。然后它允许插入`a`和`b`同时（保持数量相同），同时在字符串中间重复。

# ruby-on-rails - Shopify API - 向产品页面添加表单字段

> ID：13276382
> 
> 赞同：0
> 
> 时间：2012-11-07T19:01:25.980
> 
> 标签：ruby-on-rails, shopify

我正在使用带有shopify API的rails开发一个应用程序，并且想知道是否有任何方法可以在管理员的产品页面中添加一个自定义字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:04:04.583

您不能在管理员的产品页面中添加额外的内容。您可以做的是添加指向该页面的链接，该链接将您带到外部页面（您的应用程序）以进行任何更改。

# c - Select() 监控 3 个或更多文件描述符

> ID：13276387
> 
> 赞同：2
> 
> 时间：2012-11-07T19:01:58.043
> 
> 标签：c, linux

我知道如何监控两个文件描述符，但是 4 或 5 个文件描述符呢？

这是我使用 2 个文件描述符的方法。

```
fd_mon = (fd1 > fd2 ? fd1 : fd2) + 1;

select(fd_mon, &readfds, NULL, NULL, NULL); 
```

如何监控 3 个或更多文件描述符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:12:46.370

使用`FD_SET`宏将文件描述符添加到您要传递到的集合中`select`。你也需要它的`FD_ZERO`伙伴。在上述情况下，只需为每个文件描述符和相同的集合继续调用 FD_SET 。`FD_ISSET``FD_CLR`

谷歌——“ [man select](http://linux.die.net/man/2/select) ”，它甚至有一个例子！我不知道你对*NIX 有多熟悉，但是`man`（manual 的缩写）是内置在操作系统中的帮助系统。它会经常回答这些关于系统调用的问题。您可能必须在某些发行版中安装它，例如，我认为 Ubuntu 并没有默认安装*所有*开发手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:14:41.897

您可以在打开每个描述符后进行测试：

```
max_fd = 0;

fd = open(...);
if (fd > max_fd) {
  max_fd = fd;
}
....
select(max_fd+1, &readfds, NULL, NULL, NULL); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:15:56.983

`(fd1 < fd2 ? fd1 : fd2) < fd3 ? (fd1 < fd2 ? fd1 : fd2) : fd3;`

它适用于 3 个变量，您可以将其用于尽可能多的变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T21:41:52.150

您可以将描述符粘贴在数组中：

```
for(i = maxfd = 0; i < nfds; i++) {
     if(maxfd < fd[i]) maxfd = fd[i];
     FD_SET(...);
 }
 select(maxfd+1, ...); 
```

# requirejs - 使用 RequireJS 的骨干关系子模型

> ID：13276388
> 
> 赞同：4
> 
> 时间：2012-11-07T19:02:00.287
> 
> 标签：requirejs, backbone-relational

我正在尝试找到一种将骨干关系子模型与 RequireJS 一起使用的方法，其中子模型与超模位于不同的文件中。

例如：

```
// app.js
define(function() {
  var app = {};
  var app.ns = {};
  Backbone.Relational.store.addModelScope(app.ns);
});

// Classroom/Person.js
define(["app", "./Student", "./Professor"], function(app) {
  app.ns.Classroom.Person = Backbone.RelationalModel.extend({
    subModelTypes: {
      'Student': 'Classroom.Student'
      'Professor': 'Classroom.Professor'
    },

    alertHello: function() {}
  });

  return app.ns.Classroom.Person;
});

// Classroom/Student.js
define(["require", "app", "./Person"], function(require, app) {
  app.ns.Classroom.Student = require("./Person").extend({
    alertHello: function() {
      alert("Hello, I am student " + this.get("name"));
    }
  });

  return app.ns.Classroom.Student;
});

// Classroom/PersonCollection.js
define(["app", "./Person"], function (app, Person) {
  app.ns.Classroom.PersonCollection = Backbone.Collection.extend({
    model: Person
  });
});

// alertPeople.js
define(["Classroom/PersonCollection"], function(PersonCollection) {
  var people = PersonCollection([{"name": "Bob", "type": "Person"}]);
  people.each(function(person) {
    person.alertHello();
  });
}); 
```

当我执行 alertPeople.js 时，我期待“你好，我是学生 Bob”的警报，但我收到了这个错误：`Uncaught Error: Module name "Classroom/Person" has not been loaded yet for context: _`由于我的循环依赖。解决这个问题的可能解决方案是什么？

我的下一个问题可能与 Backbone-relational 的范围有关。在我的 app.js 文件中，我添加了 app.ns 范围的一部分，并确保我的所有模型都在 app.ns 对象中定义。我这样做是因为当我定义我的 subModelTypes 时，它实际上可以引用子模型，但我不确定这是否可行，因为我无法解决循环依赖问题。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:47:21.370

我最终解决了这个问题，我希望这对未来的其他人有所帮助。

首先，我将代码修改为以下内容：

```
// app.js
define(function() {
  var app = {};
  var app.ns = {};
  Backbone.Relational.store.addModelScope(app.ns);
});

// Classroom/Person.js
define(["app"], function(app) {
  app.ns.Classroom.Person = Backbone.RelationalModel.extend({
    subModelTypes: {
      'Student': 'Classroom.Student'
      'Professor': 'Classroom.Professor'
    },

    alertHello: function() {}
  });

  return app.ns.Classroom.Person;
});

// Classroom/Student.js
define(["app", "./Person"], function(app, Person) {
  app.ns.Classroom.Student = Person.extend({
    alertHello: function() {
      alert("Hello, I am student " + this.get("name"));
    }
  });

  return app.ns.Classroom.Student;
});

// Classroom/PersonCollection.js
define(["app", "./Person", "./Student", "./Professor"], function (app, Person) {
  app.ns.Classroom.PersonCollection = Backbone.Collection.extend({
    model: Person
  });
});

// alertPeople.js
define(["Classroom/PersonCollection"], function(PersonCollection) {
  var people = PersonCollection([{"name": "Bob", "type": "Person"}]);
  people.each(function(person) {
    person.alertHello();
  });
}); 
```

我的更改包括删除 Classroom/Person.js 文件中的 Student 和 Professor 依赖项，并将它们移动到 Classroom/PersonCollection.js 文件中。

在此之后，我遇到了 Backbone-relational 的错误，其中 addModelScope 有子模型和命名空间的错误，但我修复了它并提出了拉取请求：[https](https://github.com/PaulUithol/Backbone-relational/pull/211) ://github.com/PaulUithol/Backbone-relational/pull/211 ，已被接受。

可以在[https://github.com/andrewferk/backbone-relational-submodels](https://github.com/andrewferk/backbone-relational-submodels)找到更完整的示例。

# java - Spring 3 MVC：在 MVC 控制器方法参数中公开会话范围的 bean

> ID：13276391
> 
> 赞同：3
> 
> 时间：2012-11-07T19:02:08.227
> 
> 标签：java, spring, model-view-controller, controller, session-bean

为了一致性和简单性，我想在我的控制器周围传递一个会话范围的域 bean - 但这似乎不可能 OOTB。希望有人可以建议。

问题：**会话范围的 bean 是否可以作为 MVC 控制器参数公开**

* * *

似乎有一个注释：@SessionAttributes("myBean") 但是这只维护一个控制器级别的范围。

我希望避免与 HttpSession 交互，而是通过我的控制器一致地传递我的域对象图。这似乎是一个相当标准的要求。

这有以下好处：

*   可测试性 - 只需注入 bean 进行测试，不必模拟 HttpSession
*   抽象 - 避免 Servlet 模型问题和业务问题

这是当前的配置：

```
@Controller
@SessionAttributes("customer")
public class LoginController {

   @Inject Customer customer;

   @RequestMapping(value = "/login", method = RequestMethod.GET)
   public String welcome(Customer customer) {
         ...
         return "loginDetailsView";
   }

   public String processLogin(@Valid Customer customer, BindingResult bindingResult) {
         ...
         if (bindResult.hasErrors()) {
             return "loginDetailsView";
         else {
             return "homePageView";
         }
   } 
```

“客户”会话 bean 是使用 XML 配置的 aop-proxy (CGLIB) 的常规 POJO，以允许将会话范围的 bean 注入到单例（控制器和服务类）中：

```
<beans:bean id="customer" class="com.mypackage.domain.Customer" scope="session">
            <aop:scoped-proxy proxy-target-class="true"/>
</beans:bean> 
```

以下问题几乎相同，但没有不涉及扩展 Spring 3 核心框架的答案。

*Spring的设计者是否有意省略了这一点*？我的意图是使用域模型来支持表单，而不使用“表单bean”和一层映射器。

任何人都可以建议一种方法/或指出这是否是不好的做法吗？

定制解决方案的先前问题：

[如何使用 Spring MVC 将会话属性作为方法参数（参数）传递](https://stackoverflow.com/questions/3621266/how-to-pass-a-session-attribute-as-method-argument-parameter-with-spring-mvc)

请注意：尝试最小化对 Spring 框架的依赖并使用 Annotation 支持 esp JSR-303 等。将采用任何 OOTB 解决方案 - 请不要建议自定义扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T06:11:12.293

如果您希望这样做，Spring-MVC 可以将应用程序上下文的 bean 暴露给视图层。

例如，可以指示 InternalResourceViewResolver 公开上下文中的每个 bean，或者只公开指定的 bean。看一下[exposeContextBeansAsAttributes](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/view/InternalResourceViewResolver.html#setExposeContextBeansAsAttributes%28boolean%29)和[exposedContextBeanNames](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/servlet/view/InternalResourceViewResolver.html#setExposedContextBeanNames%28java.lang.String%5B%5D%29)属性。

例如，假设您想将 bean beanA 和 beanB 公开给您的 JSP。您将在您的上下文中声明视图解析器：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
   <property name="exposedContextBeanNames">
      <list>
         <value>beanA</value>
         <value>beanB</value>
      </list>
   </property>
</bean> 
```

或者，只公开每个 bean：

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
   <property name="exposeContextBeansAsAttributes" value="true"/>
</bean> 
```

# maven - 使用maven，如何在包本身中包含jar依赖？

> ID：13276396
> 
> 赞同：0
> 
> 时间：2012-11-07T19:02:16.840
> 
> 标签：maven

在我的项目中，我的大部分依赖项都是通过 maven 拉下来的。但是，在短期内，我需要依赖 SNAPSHOT jar。有没有合适的地方把它放在 maven 的目录层次结构中，我如何在 pom 中依赖它？最终，这个 jar 的正确版本将在一个 maven 存储库中，但在短期内，我只想将它包含在我的项目中，以便与我一起开发它的任何人都有相同的 jar。所以基本上我想要的效果就像我依赖 maven 存储库中的这个 jar 一样，除了它将包含在我的项目中。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:04:25.820

您可以将它放在项目中您喜欢的任何目录中，然后使用系统依赖项。创建一个 lib 目录来保存项目中的依赖项。

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>com.foo</groupId>
      <artifactId>foo</artifactId>
      <version>2.0</version>
      <scope>system</scope>
      <systemPath>${basedir}/foo/bar</systemPath>
    </dependency>
  </dependencies>
  ...
</project> 
```

# html - 如何将没有标签#的链接重定向到带有标签的正确页面

> ID：13276402
> 
> 赞同：1
> 
> 时间：2012-11-07T19:03:03.200
> 
> 标签：html, ajax, .htaccess, rewrite, hashtag

在我的网站上，我使用 Ajax 动态加载内容，因此 URL 类似于 www.internet.com/#/contact.php 或 www.internet.com/#/home.php。

我的网站上有很多链接/页面，所以我想用 .htaccess 来做。

如何检查URL 中是否**没有主题**标签并直接添加在域名之后，或者主题标签而不删除 URL 的其余部分？

因此，例如 www.internet.com/home.php 应该被重定向到 www.internet.com/#/home.php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:17:45.843

hashtag 之后的值不会发送到服务器，因此您无法检查它是否存在于服务器端代码中（例如`.htaccess`）。您需要一个在浏览器中运行的脚本来检测主题标签的存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:08:44.217

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule (?!^#/)^(.+)$ #/$1 [L,R=301,NE] 
```

# mysql - mysql根据第一个查询的id的时间戳运行第二个查询

> ID：13276404
> 
> 赞同：0
> 
> 时间：2012-11-07T19:03:11.833
> 
> 标签：mysql

我有一个表“测试”。每次更新表时都会更新标记。

```
id  |  text    |   stamp  
__________________________ 
1   |  textA   |   2012-11-06 01:06:34
2   |  textB   |   2012-11-06 01:01:34
3   |  textC   |   2012-11-06 01:03:34
4   |  textD   |   2012-11-06 01:05:34
5   |  textE   |   2012-11-06 01:02:34
6   |  textF   |   2012-11-06 01:08:34
7   |  textG   |   2012-11-06 01:09:34
8   |  textH   |   2012-11-06 01:04:34 
```

我运行查询“SELECT * from test ORDER BY stamp DESC LIMIT 3”（这将返回 id 为 7,6 和 1 的行）

现在我返回了最后一行的 id（即 1）。如何使用该 id 运行第二个查询以获取时间戳 < id 的时间戳的下 3 行？

预期结果是第 4、8、3 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:07:48.107

```
SELECT id, text, stamp
FROM test 
WHERE stamp < (SELECT stamp FROM test WHERE id=1); 
```

# java - 说一个方法读取一个字节的数据是什么意思？

> ID：13276408
> 
> 赞同：2
> 
> 时间：2012-11-07T19:03:31.080
> 
> 标签：java, api, byte, java-io

我正在通过 oracle API[`java.io.RandomAccessFile`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)上课。

类中有一个名为 read() 的方法，它从传递给构造函数的文件中读取数据字节：-

> public int read() 抛出 IOException
> 
> 从此文件中读取一个字节的数据。该字节以 0 到 255 (0x00-0x0ff) 范围内的整数形式返回。如果还没有输入可用，则此方法会阻塞。
> 
> 尽管 RandomAccessFile 不是 InputStream 的子类，但此方法的行为方式与 InputStream 的 InputStream.read() 方法完全相同。
> 
> 返回： 数据的下一个字节，如果已到达文件末尾，则返回 -1。抛出： IOException - 如果发生 I/O 错误。如果已到达文件结尾，则不抛出。

我很困惑，是不是说它从传递给构造函数的文件中读取8位数据并将读取的内容转换为int。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:13:27.423

究竟是什么让你感到困惑？

是的，它读取一个字节的数据，即 8 位，并将其作为包含范围 0..255 的整数值返回。因此，如果有问题的文件恰好是文本文件，并且第一个字符是大写字母“A”，`read()`则将返回 65。

它返回 an`int`而不是 a`byte`以便它可以将整个范围 0..255 作为正数返回，并且仍然有 -1 可用作文件结尾的标记值（尽管可以说例外是更好的方法要做到这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:16:07.030

Java 没有无符号类型。一个字节，当通常被解释为无符号时，是一个在 [0..255] 范围内的整数。`read()`还使用 -1 表示错误。所以你需要一个至少有 257 个不同值的类型。Java`int`类型是一个 32 位有符号整数。所以文档说它正在传递字节读取的 8 位无符号值或错误指示符，并将 32 位有符号返回类型作为容器传递。

# python - 如何在 Python 中将图像添加到 PDF 文件？

> ID：13276409
> 
> 赞同：6
> 
> 时间：2012-11-07T19:03:33.720
> 
> 标签：python, pdf

我有一个 PDF 文档，但我必须在上面放上我自己的图像。这是一份官方文件，我必须将带有“示例”文本的图像应用于整个页面。

有没有办法在python中解决这个问题？

（文档中的文字是曲线）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-07-15T21:29:05.787

如果您来自 Google，PyPDF 已被[PyPDF2](https://github.com/mstamy2/PyPDF2/)取代。语法发生了一些变化。

```
import PyPDF2 as pypdf

with open("original.pdf", "rb") as inFile, open("overlay.pdf", "rb") as overlay:
    original = pypdf.PdfFileReader(inFile)
    background = original.getPage(0)
    foreground = pypdf.PdfFileReader(overlay).getPage(0)

    # merge the first two pages
    background.mergePage(foreground)

    # add all pages to a writer
    writer = pypdf.PdfFileWriter()
    for i in range(original.getNumPages()):
        page = original.getPage(i)
        writer.addPage(page)

    # write everything in the writer to a file
    with open("modified.pdf", "wb") as outFile:
        writer.write(outFile) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T19:11:43.247

查看[PyPDF](http://pybrary.net/pyPdf/)。您可以使用类似以下代码的代码来应用叠加层：

```
page = PdfFileReader(file("document.pdf", "rb")).getPage(0)
overlay = PdfFileReader(file("overlay.pdf", "rb")).getPage(0)
page.mergePage(overlay) 
```

将您想要的任何叠加层（包括“示例”）放入`overlay.pdf`. 就个人而言，我更喜欢 PDFTK，虽然它不是严格意义上的 Python，但可以从带有`os.system(command)`.

# soap - 发生 SOAP 故障时会发生什么？

> ID：13276410
> 
> 赞同：0
> 
> 时间：2012-11-07T19:03:36.297
> 
> 标签：soap, error-handling

如果有这样的网络服务方法：

```
object MyMethod()
{

  ..fault happens here.. 

  return someObject;
} 
```

我想知道从这个方法返回给客户端的是什么（如果有的话）。我知道会生成 SOAP 错误 XML，但是**someObject**呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:35:09.883

错误将被视为异常并抛出异常，在这种情况下，someObject 将不会交付给客户端。客户端将收到异常，您必须处理它。如果您在 Web 服务级别处理这些异常，您仍然可以返回 someObject

# javascript - jquery函数不适用于重复分区

> ID：13276411
> 
> 赞同：0
> 
> 时间：2012-11-07T19:03:51.503
> 
> 标签：javascript, jquery, html

我有一个使用自定义元素来反转滚动条功能的功能。现在，当我复制 div 时，我无法让它工作。有人可以帮助我使其适用于多个部门吗？

小提琴在这里： [JS Fiddle here](http://jsfiddle.net/daneuchar/zHyA9/)

任何形式的帮助都会很棒。

HTML：

```
<div id="textarea">
    <div id="test">

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eget nisi ipsum. Donec semper, justo at fringilla condimentum, felis tellus ultricies dolor, id convallis metus nulla quis est. Vivamus facilisis orci vel lectus blandit commodo blandit sem tempor. Curabitur condimentum, diam quis pretium feugiat, sem ante pretium tortor, in lobortis massa eros vitae dui. Nullam nisi mauris, condimentum a feugiat in, euismod quis augue. Maecenas euismod adipiscing tellus. Aliquam elementum egestas dolor, vel aliquam nulla tincidunt eget. Etiam risus elit, scelerisque eu volutpat sed, faucibus non ante. Donec sed nunc erat, eget facilisis risus. Etiam id odio tortor. Sed aliquam viverra volutpat. Sed gravida lectus eu mi ornare in feugiat magna elementum. Pellentesque in dolor ligula.

Maecenas condimentum nisl eget arcu elementum nec imperdiet risus lobortis. Suspendisse id placerat turpis. Etiam dolor quam, placerat et volutpat nec, ultricies sed lorem. Fusce volutpat lobortis est ut pellentesque. Donec enim mauris, pretium quis gravida vitae, pellentesque ac nibh. Proin condimentum aliquam scelerisque. Vestibulum aliquet pharetra dapibus. Donec id nisi non nibh fringilla auctor et eget erat. Morbi pretium mauris sed orci pretium aliquam. Nulla pharetra venenatis nunc, in venenatis purus tempor vitae. Vivamus tincidunt dui non eros gravida sit amet consectetur nibh lacinia. 

Maecenas semper ligula et urna tincidunt placerat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Suspendisse arcu urna, facilisis at tempus id, posuere sed lacus. Vestibulum in feugiat tellus. Nullam suscipit, velit nec tincidunt pellentesque, enim odio ornare mauris, quis faucibus sem sapien sed turpis. Nulla sit amet risus in magna iaculis scelerisque sit amet vel erat. Morbi eu vestibulum nulla. Etiam auctor auctor felis, nec sodales velit condimentum non. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis eu massa diam, eu porttitor eros. Etiam blandit, turpis ac volutpat gravida, massa lorem congue orci, eget fringilla eros felis quis elit. Suspendisse quam tellus, pretium non mattis ut, laoreet in diam. Suspendisse ante odio, venenatis vel condimentum vitae, varius id sapien. Quisque ac nunc ipsum. Mauris porttitor blandit magna, id rutrum ipsum pellentesque non. In suscipit diam ligula, non tristique diam.

Aliquam interdum ante at nisl sagittis vel luctus eros fringilla. Vestibulum purus orci, ultrices at tristique et, malesuada eget enim. Praesent commodo erat vel massa auctor id elementum elit elementum. Duis diam urna, mollis ut imperdiet aliquam, commodo id dui. Etiam vulputate facilisis dui id convall

Aliquam interdum ante at nisl sagittis vel luctus eros fringilla. Vestibulum purus orci, ultrices at tristique et, malesuada eget enim. Praesent commodo erat vel massa auctor id elementum elit elementum. Duis diam urna, mollis ut imperdiet aliquam, commodo id dui. Etiam vulputate facilisis dui id convall Daniel 
        asdasdas dasd asd asldnalsdsvlkarau idhlkjansdfnl inaldnflkanlsdfh ]sdf oasdfj ihjaiodfhkajdsnoviaehu234 kn 87r 23n sf8yr 1238u ndkfn9 48yj wodifn2937rh e0o94tjo nug-2jnfio 203nf273rhefn 2893hr0 284f jnf j0nm ;onf9o8h sdjfi9 w8rho jubnr9ygv7gh wionuf2983h iurbgfi9 48hr jfna sdf asdf alsdfn a;sdf kasdfkjasdfnasdfjakjdf asdfioundvklasdvkia
    </div>
</div>
<div id="track">
    <div id="rocket">    
    </div>
</div>
<div id="xpos" style="clear:both">
</div>
<hr>

<div id="textarea">
    <div id="test">

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas eget nisi ipsum. Donec semper, justo at fringilla condimentum, felis tellus ultricies dolor, id convallis metus nulla quis est. Vivamus facilisis orci vel lectus blandit commodo blandit sem tempor. Curabitur condimentum, diam quis pretium feugiat, sem ante pretium tortor, in lobortis massa eros vitae dui. Nullam nisi mauris, condimentum a feugiat in, euismod quis augue. Maecenas euismod adipiscing tellus. Aliquam elementum egestas dolor, vel aliquam nulla tincidunt eget. Etiam risus elit, scelerisque eu volutpat sed, faucibus non ante. Donec sed nunc erat, eget facilisis risus. Etiam id odio tortor. Sed aliquam viverra volutpat. Sed gravida lectus eu mi ornare in feugiat magna elementum. Pellentesque in dolor ligula.

Maecenas condimentum nisl eget arcu elementum nec imperdiet risus lobortis. Suspendisse id placerat turpis. Etiam dolor quam, placerat et volutpat nec, ultricies sed lorem. Fusce volutpat lobortis est ut pellentesque. Donec enim mauris, pretium quis gravida vitae, pellentesque ac nibh. Proin condimentum aliquam scelerisque. Vestibulum aliquet pharetra dapibus. Donec id nisi non nibh fringilla auctor et eget erat. Morbi pretium mauris sed orci pretium aliquam. Nulla pharetra venenatis nunc, in venenatis purus tempor vitae. Vivamus tincidunt dui non eros gravida sit amet consectetur nibh lacinia. 

Maecenas semper ligula et urna tincidunt placerat. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Suspendisse arcu urna, facilisis at tempus id, posuere sed lacus. Vestibulum in feugiat tellus. Nullam suscipit, velit nec tincidunt pellentesque, enim odio ornare mauris, quis faucibus sem sapien sed turpis. Nulla sit amet risus in magna iaculis scelerisque sit amet vel erat. Morbi eu vestibulum nulla. Etiam auctor auctor felis, nec sodales velit condimentum non. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis eu massa diam, eu porttitor eros. Etiam blandit, turpis ac volutpat gravida, massa lorem congue orci, eget fringilla eros felis quis elit. Suspendisse quam tellus, pretium non mattis ut, laoreet in diam. Suspendisse ante odio, venenatis vel condimentum vitae, varius id sapien. Quisque ac nunc ipsum. Mauris porttitor blandit magna, id rutrum ipsum pellentesque non. In suscipit diam ligula, non tristique diam.

Aliquam interdum ante at nisl sagittis vel luctus eros fringilla. Vestibulum purus orci, ultrices at tristique et, malesuada eget enim. Praesent commodo erat vel massa auctor id elementum elit elementum. Duis diam urna, mollis ut imperdiet aliquam, commodo id dui. Etiam vulputate facilisis dui id convall

Aliquam interdum ante at nisl sagittis vel luctus eros fringilla. Vestibulum purus orci, ultrices at tristique et, malesuada eget enim. Praesent commodo erat vel massa auctor id elementum elit elementum. Duis diam urna, mollis ut imperdiet aliquam, commodo id dui. Etiam vulputate facilisis dui id convall Daniel 
        asdasdas dasd asd asldnalsdsvlkarau idhlkjansdfnl inaldnflkanlsdfh ]sdf oasdfj ihjaiodfhkajdsnoviaehu234 kn 87r 23n sf8yr 1238u ndkfn9 48yj wodifn2937rh e0o94tjo nug-2jnfio 203nf273rhefn 2893hr0 284f jnf j0nm ;onf9o8h sdjfi9 w8rho jubnr9ygv7gh wionuf2983h iurbgfi9 48hr jfna sdf asdf alsdfn a;sdf kasdfkjasdfnasdfjakjdf asdfioundvklasdvkia
    </div>
</div>
<div id="track">
    <div id="rocket">    
    </div>
</div>
<div id="xpos" style="clear:both">
</div>

​ 
```

CSS：

```
#textarea{
    height: 400px;
    width: 400px;
    overflow: hidden;
    margin: 10px 0 0 10px;
    border:1px solid #ccc;
    float:left;
}
#test{
    height: 400px;
    width: 400px;
    overflow: auto;
}

#track {
    height: 400px;
    width: 48px;
    overflow: hidden;
    margin: 10px 0 0 10px;

    float:left;
}
#rocket{
    height:48px;
    width:48px;
    background: url('http://cdn1.iconfinder.com/data/icons/Symbolicons_Transportation/48/Rocket.png');

}
​ 
```

Jquery + Jquery 用户界面：

```
$(document).ready(function() {
    var lastScrollTop = 0;
    var iHeight = $("#test").height() - 48;
    var iScrollHeight = $("#test").prop("scrollHeight");
    var left = parseInt($('#track').css('margin-left'), 10);
    var top = parseInt($('#track').css('margin-top'), 10);

    var textareaWidth = document.getElementById("test").scrollWidth;

    // width of our wrapper equals width of the inner part of the textarea
    document.getElementById("textarea").style.width = textareaWidth + 'px';

    //common ratio
    var cr = (iScrollHeight / iHeight) - 1.135;
    $("#rocket").css("top", iHeight);

    var draggingRocket = false;
    $("#test").scroll(function(event) {
        if (!draggingRocket) {
            var st = $(this).scrollTop();
            var pos = iHeight - (st / cr);
            $("#rocket").css("top", pos);
        }
    });

    //rocket drag
    $("#rocket").draggable({
        containment: $('#track'),
        axis: "y",
        scroll: false,
        start: function(event, ui) {
            draggingRocket = true;
        },
        drag: function(event, ui) {
            // Show the current dragged position of image
            var currentPos = $(this).position();
            var top = parseInt($('#rocket').css('top'), 10);
            var mst = (iHeight - top) * cr;
            $("#test").scrollTop(mst);

        },
        stop: function(event, ui) {
            draggingRocket = false;
        }
    });

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:20:00.987

属性 id 仅对整个页面上的一个元素有效。您有两个元素定义为“火箭”，因此您的代码将无法正常工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:21:47.580

第一个错误是，每个文档的 ID 只能出现一次。您需要使用类属性作为选择器来实现该功能。

然后我会通过 JS 创建`#track`/`#rocket`而不是在 HTML 中硬编码它。如果你做对了，你只需要为任何 HTML 元素分配一个特定的类，并启用滚动效果，并通过 JS 事件处理程序插入它的所有元素。

例子：

```
<div class="my-scroller">
    Content Box 1
</div>

<div class="my-scroller">
    Content Box 2
</div> 
```

JS：

```
jQuery( document ).ready( function( $ ) {
    $( '.my-scroller' ).each( function() {

        /* create the scroll handle element (the rocket) */
        var scrollHandle = $( '<div class="scroll-handle rocket" />' );

        /* assign the drag event to the current scroll handle */
        scrollHandle.draggable( /* … */ );

        /* append the scroll handle to the current .my-scroller */
        $( this ).append( scrollHandle );

        /* assign the scroll event to the current .my-scroller */
        $( this ).scroll( /* … */ );

    } );
} ); 
```

# ios5 - 在两个地方实现的类

> ID：13276413
> 
> 赞同：0
> 
> 时间：2012-11-07T19:04:03.627
> 
> 标签：ios5, xcode4.5

在 iOS5 模拟器上运行我的应用程序时，我有以下日志输出。两个位置都是一样的。对于属于 JSONKit 的几乎每个类，我都会收到以下错误。

```
Class JKSerializer is implemented in both /Users/myHomeDir/Library/Application Support/iPhone Simulator/5.0/Applications/33E6C55B-4883-48FF-BEFF-3FBA9C071CAB/MyApp.app/MyApp and /Users/myHomeDir/Library/Application Support/iPhone Simulator/5.0/Applications/33E6C55B-4883-48FF-BEFF-3FBA9C071CAB/MyApp.app/MyApp. One of the two will be used. Which one is undefined. 
```

如果这是合适的，我刚刚运行了一个复杂的合并，我宁愿不必恢复到以前的版本。

关于此错误如何发生、如何预防以及如何解决的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:08:35.987

这是因为`JSONKit.m`实现文件是多个目标的成员，并且其中一个目标已作为对另一个目标的依赖被包含在内。

因此，例如，检查目标成员资格：

![在此处输入图像描述](../Images/99c8b6c23fed3e2fe99fc5f008fcb890.png)

在这里您可以看到该文件是`Pods-UnitTests`and的成员`Pods`。

这反映了每个目标的 Build Phases -> Compile Sources 中的设置。

成为两个目标的成员本身并不是问题。相反，问题是这些目标之一依赖于另一个。所以`Pods-UnitTests`对`Pods`. 因此，当您检查单元测试的构建记录时，如果您搜索`JSONKit.m`，您会找到两次。一次用于 libPods.a，再次用于单元测试目标。

如果您不使用 CocoaPods，那么解决方案就是删除该`JSONKit.m`文件，使其只编译一次。

如果您使用的是 CocoaPods，那么我不确定解决方案是什么，因为虽然您不想编译文件两次，但毫无疑问，您需要在单元测试代码中的某处导入头文件。到目前为止，我不确定该怎么做。

以下是一些参考资料：

[https://github.com/CocoaPods/CocoaPods/issues/115](https://github.com/CocoaPods/CocoaPods/issues/115)

[Foo 类在 MyApp 和 MyAppTestCase 中都实现了。将使用两者之一。哪个是未定义的](https://stackoverflow.com/questions/6149673/class-foo-is-implemented-in-both-myapp-and-myapptestcase-one-of-the-two-will-be)

[http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/](http://sealedabstract.com/code/tired-of-getting-mach-o-linker-errors-when-unit-testing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T11:03:25.367

检查 JSONKit 是否在您链接的第三方库中。

有一篇详细的帖子描述[了如何调试](http://qnoid.com/2013/02/12/How-to-debug-a-Class-JKSerializer-is-implemented-in-both-case-(Part-1).html#main)这个问题。

# c# - string.Format 如何处理空值？

> ID：13276418
> 
> 赞同：70
> 
> 时间：2012-11-07T19:04:09.157
> 
> 标签：c#, .net, string.format

在下面的代码中，为什么两个`string.Format`调用的行为方式不同？在第一个中，没有抛出异常，但在第二个`ArgumentNullException`中抛出 an。

```
static void Main(string[] args)
{
    Exception e = null;
    string msgOne = string.Format("An exception occurred: {0}", e);
    string msgTwo = string.Format("Another exception occurred: {0}", null);
} 
```

有人可以帮我理解两者之间的区别吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-07T19:11:54.540

我在这里猜测，但这看起来是您正在打哪个重载呼叫的区别； [`String.Format`](http://msdn.microsoft.com/en-us/library/xh1dzhdx.aspx)有多个。

在第一个示例中，您击中[`String.Format(string,object)`](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx).

在第二个示例中，通过提供`null`您最有可能达到[`String.Format(string,params object[])`](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)哪个，根据文档，会引发一个`ArgumentNullException`何时：

> 格式或参数为空。

如果您正在运行 .NET4，请尝试使用命名参数：

```
String.Format("Another exception occured: {0}", arg0: null); 
```

为什么会遇到`params object[]`超载？可能是因为`null`它不是一个对象，并且`params`工作方式是您可以在调用中将每个值作为新对象传递*，或者**将*其传递给一个值数组。也就是说，以下是[同一个](http://ideone.com/M9Hl7C)：

 *```
String.Format("Hello, {0}! Today is {1}.", "World", "Sunny");
String.Format("Hello, {0}! Today is {1}.", new Object[]{ "World", "Sunny" }) 
```

因此，它将您的声明调用转换为以下内容：

```
String format = "Another exception occured: {0}";
Object[] args = null;
String.Format(format, args); // throw new ArgumentNullException(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-07T19:12:10.380

在您的第一个示例中，您正在点击`Format(String, Object)`，反汇编时看起来像这样：

```
 public static string Format(string format, object arg0)
 {
    return Format(null, format, new object[] { arg0 });
 } 
```

注意`new object[]`周围。

第二个，您显然正在`Format(string, object[])`使用，至少这是我执行相同测试时调用的那个。拆开看是这样的：

```
 public static string Format(string format, params object[] args)
 {
     return Format(null, format, args);
 } 
```

所以所有这些实际上都被汇集到`Format(IFormatProvider, string, object[])`. 很酷，让我们看看那里的前几行：

```
public static string Format(IFormatProvider provider, string format, params object[] args)
{
    if ((format == null) || (args == null))
    {
        throw new ArgumentNullException((format == null) ? "format" : "args");
    }
...
} 
```

...welp，这就是你的问题，就在那里！第一次调用是将其包装在一个新数组中，因此它不为空。`Format()`由于调用的特定实例，显式传入 null 并不能使其做到这一点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-22T07:13:34.663

如果您使用插值字符串（$""，另一种格式化方式），则忽略 null 并跳过。所以

```
string nullString = null;
Console.WriteLine($"This is a '{nullString}' in a string"); 
```

将产生：“这是一个字符串中的''”。当然，您可以在 null 的情况下使用 null 合并运算符来生成所需的输出：

```
string nullString = null;
Console.WriteLine($"This is a '{nullString ?? "nothing"}' in a string"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T19:14:37.153

第一个调用被解析为对 Format(object) 的调用，而第二个调用被解析为对 Format(object[]) 的调用。这些不同的重载以不同的方式处理空参数。

[此处](https://stackoverflow.com/questions/5173339/how-does-the-method-overload-resolution-system-decide-which-method-to-call-when)描述了重载解决方案。相关部分是对于 Format 的第二次调用，Format(params object[]) 的重载被扩展为 Format(object[])，它比 Format(object) 更受欢迎。文字 null 既是 object[] 又是 object，但 object[] 更具体，因此被选中。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-08T18:40:54.563

有以下两个区别：

1.  这里，分配了 Null 值。

    ```
    Exception e = null;
    string msgOne = string.Format("An exception occurred: {0}", e); 
    ```

2.  这里，空值不能以字符串格式读取，这意味着类型转换错误。

    ```
    string msgTwo = string.Format("Another exception occurred: {0}", null); 
    ```

我给你一个简单的例子：在这里，你不能将 NULL 值读取为字符串格式。

```
string str = null.toString(); 
```*

# javascript - jQuery 表单验证 - 一次报告所有错误

> ID：13276419
> 
> 赞同：2
> 
> 时间：2012-11-07T19:04:16.093
> 
> 标签：javascript, jquery, validation

大约一年来，我一直在搞乱这样的验证：

```
$(document).ready(function(){

    $('#contact-form').submit(function(){
        var name = $('#inputnimi').val(),
            email = $('#inputemail').val(),
            message = $('#inputmessage').val();

            var nameerror = "<h4>Puuttuva kenttä</h4>",
            emailerror = "<h4>Puuttuva kenttä</h4>",
            messageerror= "<h4>Puuttuva kenttä</h4>";

            if(name == ""){
                $('.message-console').html(nameerror);
                return false;
            }

            if(email == ""){
                $('.message-console').html(emailerror);
                return false;
            }

            if(message == ""){
                $('.message-console').html(messageerror);
                return false;
            }
            $.ajax({
            type: "POST",
            url: "contact.php",
            data:  form-data,
            dataType: "text",
            error: function(){alert("ERROR");

            },
            success: function() {
                alert("success");
            }

            });
            return false;

    });
}); 
```

但是，我不喜欢这样，因为：

*   它一一检查错误，这在长表格上很烦人
*   我知道有更好的方法来做到这一点

而且我想知道如何一键验证所有字段，而我所能想到的就是这样的事情，这显然永远不会起作用：

```
if(name||email||message == ""){
$('.message-console').html(errors);
return false;
} 
```

所以我想在**没有**任何插件的情况下验证表单，并立即显示所有错误，如果有的话。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:47:22.433

好吧，不要让它每次都返回 false。然后你可以有类似的东西：

```
$('.message-console').html('');

if(name == ""){
  $('.message-console').append(nameerror);
 }
 /*others*/ 
```

虽然我会按照 dnagirl 的建议去做并使用[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) - 就额外的插件而言，它并没有那么糟糕，而且它很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:13:57.203

你可以尝试这样的事情：

```
if(!(name&&email&&message))
{
    //error logic
} 
```

但是，如果任何值等于**0**，验证将再次触发，因此您最好使用

```
if((name&&email&&message)=="")
{
    //error logic
} 
```

# web-applications - Spring没有加载控制器并且没有控制台错误

> ID：13276420
> 
> 赞同：0
> 
> 时间：2012-11-07T19:04:17.610
> 
> 标签：web-applications, spring-mvc, spring-3

我有一个用 Struts 1.2 编写的现有 webapp，我正在尝试使用 Spring 3-Rest 将功能公开为 web 服务。

我遇到了一个我无法解决的基本问题

这是我的 web.xml 剥离了所有 struts 的东西。

```
 <?xml version="1.0" encoding="UTF-8"?>
   <display-name>Test</display-name>
   <servlet>
    <servlet-name>app</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
   </servlet>
   <servlet-mapping>
     <servlet-name>app</servlet-name>
     <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

我的 app-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/mvc 
http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <mvc:annotation-driven/>
    <context:component-scan base-package="com.base.rest">
        <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
    </context:component-scan>

    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/JSP/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

</beans:beans> 
```

我在 com.base.rest 中有一个基本控制器

```
package com.base.rest;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class DummyController {

    @RequestMapping(value="/dummy",method=RequestMethod.GET)
    public String doSomething(){
        System.out.println("Dummy");
        return "hello";
    }
} 
```

我在 WebRoot/JSP 文件夹中有 hello.jsp，它只打印 Dummy

当部署在 tomcat 7 上时，我得到了这个

信息：初始化 Spring FrameworkServlet 'app'

控制台上没有任何错误。

我已经从构建路径中删除了所有有冲突的 jar，只有 spring dist 和 commons-logging-1.1

访问 server/Test/dummy 时出现 404

谁能指出我在做什么愚蠢的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:47:01.860

将您的调度程序 servlet 映射更改为此并试一试。

```
<servlet-mapping>
 <servlet-name>app</servlet-name>
 <url-pattern>/</url-pattern>
</servlet-mapping> 
```

此外，在 InternalResourceViewResolver 声明中

```
<beans:property name="prefix" value="/JSP/" /> 
```

该值应指向 WEB-INF/JSP 位置。

# ios - 两个长时间运行的任务，一个使用 GCD 的更新线程

> ID：13276425
> 
> 赞同：1
> 
> 时间：2012-11-07T19:04:30.963
> 
> 标签：ios, grand-central-dispatch

我正在尝试更新分组的表格视图。有一个过滤器，因此有时数据不会显示在第二部分中。数据始终显示在第一部分。因为查询需要一段时间，所以我试图将事情放在后台，然后在主线程上更新 UI。然而，我似乎无法让它工作，并且想知道我做错了什么。基本上第一部分将正确显示数据，但第二部分根本不会显示其数据。这是一些伪代码来说明我目前正在尝试的内容

```
dispatch_queue_t lowQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0);
dispatch_queue_t mainQueue = dispatch_get_main_queue();

dispatch_async(lowQueue, ^{
    // long running task for section 1

    if (filter == SHOW_SECTION_2) {
         // long running task for section 2

          dispatch_async(mainQueue, ^{
          // update main thread UI for long running task 2
          [self.tableView reloadData]; 
          });
    }

    dispatch_async(mainQueue, ^{
         // update main thread UI for long running task 1
          [self.tableView reloadData];
    }); 
```

如果我只为一个表格部分执行此操作，它会起作用。事实上，我需要更新两件我找不到正确方法的事情。谢谢。

编辑：我只是想更新一个表格视图。所以在我得到我的数据后，我只是调用重新加载数据。

# ruby-on-rails - 带有 Ubuntu 的 pg gem

> ID：13276428
> 
> 赞同：4
> 
> 时间：2012-11-07T19:04:34.743
> 
> 标签：ruby-on-rails, gem

我正在尝试使用新的 rails 应用程序安装 pg gem，但我一直收到相同的错误：

```
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /home/arthur/.rvm/rubies/ruby-1.9.2-p320/bin/ruby extconf.rb --with-pg-lib=/usr/lib
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... no
checking for PQconnectdb() in -llibpq... no
checking for PQconnectdb() in -lms/libpq... no
Can't find the PostgreSQL client library (libpq)
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我已经尝试了这个问题的所有内容：[如何在 Ubuntu 上安装 PostgreSQL 的 pg gem？](https://stackoverflow.com/questions/3116015/how-to-install-gem-pg-on-ubuntu) 但没有什么对我真正有用。

顺便说一下，那是 ruby​​ 1.9.2 和 Rails 3.2。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:36:07.090

安装 postgresql 9，然后安装你的 gem。

```
sudo apt-get install postgresql libpq-dev 
```

现在，运行

```
gem install pg 
```

接着

捆绑安装

# outlook - Outlook ICS / iCalendar：设置组织者后，没有其他与会者的字段（“收件人：”）？

> ID：13276429
> 
> 赞同：2
> 
> 时间：2012-11-07T19:04:34.680
> 
> 标签：outlook, icalendar, appointment

**我的目标：**

*   **（步骤 1）**在 Outlook 中打开 ICS 文件，以便用户可以将生成的会议/约会发送给他或她选择的收件人。因此我使用 PUBLISH 方法。这几乎是这里解释的内容：[https ://www.rfc-editor.org/rfc/rfc2446#section-4.1.1](https://www.rfc-editor.org/rfc/rfc2446#section-4.1.1)
*   **（第 2 步）**让用户通过 ICS 更新预定会议（这应该是 RFC 中的 4.1.2）。

**需求互相死锁：**

*   为了更新已安排的会议，我需要设置一个 ORGANIZER。
*   但是，如果设置了 ORGANIZER，则不会有输入收件人的字段（步骤 1）。

**这是我的 ICS 在首次发布时的样子：**

```
BEGIN:VCALENDAR
PRODID:MyProg
METHOD:PUBLISH
BEGIN:VEVENT
UID:{9D3C6B93-D935-44EA-A4CD-498900BCFEFD}
SEQUENCE:1
PRIORITY:5
ATTENDEE;RSVP=TRUE:mailto: 
DTSTAMP:20121107T183153Z
DTSTART:20121107T190000Z
DTEND:20121107T193000Z
SUMMARY:This is the Subjectline
LOCATION:Room 1
DESCRIPTION:Hello, please join my presentation.
ORGANIZER:mailto:abc@bcd.com
END:VEVENT
END:VCALENDAR 
```

以 ATTENDEE 开头的行的目的是显示“收件人：”字段。
如果省略了包含 ORGANIZER 的行，则第 2 步（更新）将不起作用。
如果设置了 ORGANIZER，将没有字段可以填写收件人...

**这是我的 ICS 在第二次发布以更新第一次发布时的样子：**

```
BEGIN:VCALENDAR
PRODID:MyProg
METHOD:PUBLISH
BEGIN:VEVENT
UID:{9D3C6B93-D935-44EA-A4CD-498900BCFEFD}
SEQUENCE:0
PRIORITY:5
ATTENDEE;RSVP=TRUE:mailto: 
DTSTAMP:20121107T184400Z
DTSTART:20121107T190000Z
DTEND:20121107T193000Z
SUMMARY:This is the MODIFIED SUBJECT
LOCATION:Room 1
DESCRIPTION:Hello, please join my presentation.
ORGANIZER:mailto:abc@bcd.com
END:VEVENT
END:VCALENDAR 
```

具有相等的 UID 并根据需要增加 SEQUENCE 和 DTSTAMP！如果省略了 ORGANIZER 将不起作用。

* * *

有什么建议可以帮助我实现我的目标第 1 步和第 2 步，具有更新功能并且不会丢失收件人字段“收件人：”？

非常感谢您！

* * *

# javascript - Guardian API, JSON 解析 jquery/javascript

> ID：13276430
> 
> 赞同：0
> 
> 时间：2012-11-07T19:04:37.170
> 
> 标签：javascript, jquery, json

所以我有来自 Guardian API 的开放平台的 JSON 格式的数据，我想在 jquery 中解析它，我目前一直试图在我的 HTML div 上显示结果。

数据格式如下：[Guardian JSON 结果](http://content.guardianapis.com/search?q=world%20news&format=json&api-key=ky5zy8mds5r25syu36t9kmzj)

我正在尝试使用的代码如下

```
 function processFootballData(footballData){
    footyStuff = footballData;
    var thisContainer = document.getElementById( "results" );
    var listTmp = document.createElement( "ul" );
    var tmpList = "";
    for( var i=0; (i<footyStuff.results[0].length) && (i<100); i++ ) {
            if( tmpList.length <= 0 ) {
                tmpList = footyStuff.results[0][ i ];
            }
            else {
                tmpList = tmpList + "," + footyStuff.results[0][ i ];
        }
    }

    var footballURL = "http://content.guardianapis.com/search?q=football&format=json&api-key=ky5zy8mds5r25syu36t9kmzj";
    $.getJSON( footballURL,
            function( thisData ) {
            var data = thisData;

            for( var key in data ) {
                    var thisSublist = document.createElement( "ul" );
                    thisSublist.setAttribute('style', "border-bottom: 1px solid #000; width: 80%;");
                    var thisItem = document.createElement( "li" );
                    var footyResults = data[key].results[0];

                    if( data.hasOwnProperty( key ) ) {
                        var duyList = document.createElement("li");
                        duyList.setAttribute('style', "padding-bottom: 10px;margin-top:-15px;margin-left:53px;font-size:12px;");
                        duyFooty = document.createTextNode(footyResults);
                        duyList.appendChild(duyFooty);
                        thisItem.appendChild(duyList);
                    }

                    thisItem.appendChild( thisSublist );
                }
                listTmp.appendChild( thisItem );
        }
        thisContainer.appendChild( listTmp );
});

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:17:15.690

您需要使用`jsonp`请求，因为 Guardian API 正在阻止跨域请求。将 JQuery[`.ajax`](http://api.jquery.com/jQuery.ajax/)用于`dataType: jsonp`：

```
$.ajax({
    url: footballURL,
    dataType: 'jsonp',
    success: function( thisData ) {
        var data = thisData;
        // etc ...
    }
}); 
```

您的 DOM 生成 Javascript 有点乱……但是编写这种代码很容易迷失方向。我强烈建议使用某种微模板引擎来处理数据到 HTML 的转换。

* * *

[这是一个](http://jsfiddle.net/UTBd6/5/)如何使用[Mustache.js](https://github.com/janl/mustache.js)执行此操作的示例。

```
// create HTML template with data tags
var template = "<ul>{{#results}}<li><ul><li><a href='{{webUrl}}'>{{webTitle}}</a></li></ul></li>{{/results}}";

// render output
var output = Mustache.render(template, thisData.response);

// add to the DOM
$("#results").html(output); 
```

* * *

这是使用[Underscore.js](http://documentcloud.github.com/underscore/)[的相同示例](http://jsfiddle.net/6rc6a/1/)。相同的想法，但不同的实现可以让您将模板编写为标记：

```
<script type='text/template' id='article-template'>
    <% _.each(results, function(article) { %>
    <ul>
        <li style="border-bottom: 1px solid #000; width: 80%;">
            <a href='<%= article.webUrl %>'><%= article.webTitle %></a>
        </li>
    </ul>
    <% }); %>
</script> 
```

​ 以及要渲染的脚本：

```
var template = _.template($("#article-template").html());
var output = template(thisData.response);
$("#results").html(output); 
```

# matlab - 手动更改绘图

> ID：13276431
> 
> 赞同：0
> 
> 时间：2012-11-07T19:04:44.337
> 
> 标签：matlab, user-interface, plot, mouseevent

我正在尝试从这个链接实现一些东西-

[http://blogs.mathworks.com/pick/2008/05/27/advanced-matlab-capture-mouse-movement/](http://blogs.mathworks.com/pick/2008/05/27/advanced-matlab-capture-mouse-movement/)

在更复杂的 gui 中.. 我绘制了一条曲线，并使用寻峰器功能找到了图中的所有最大值，并用 X 标记它们（使用另一个绘图功能）但我希望用户有能力如果它们是错误的，则纠正最大值的位置，或者如果它们是不必要的，则删除一些 X。

我不明白我应该更改或添加什么以使其每一步仅拖动某个 X。

在这段代码中它不是一个 gui，但我仍然有同样的问题

我的代码-

```
function main

global data_file

x=0:0.1:100
data_file=sin(x)*5+(rand(100*10+1,1)’-0.5)

starting_sample= 1;
sampling_rate=1;

len = length(data_file);

f = figure('NumberTitle','off','color','w','Menubar','none');

[picks1,locs1] = findpeaks(data_file(starting_sample:sampling_rate:len),'MINPEAKDISTANCE',10);
a = axes('xlim',[0 100], 'ylim',[-5 5]);

plot( 1:sampling_rate:len, data_file( starting_sample:sampling_rate:len ) );
hold on
p=plot(locs1,picks1,'x','linewidth',2,'color','r','ButtonDownFcn',@start_drag1);
hold off

set(f,'WindowButtonUpFcn',@stop_drag1)

    function start_drag1(varargin)
        set(f,'WindowButtonMotionFcn',@draging)
    end

    function draging(varargin)
        pt= get(a,'currentpoint')
        set(p,'XData',pt(1)*[1 1])
    end

    function stop_drag1(varargin)
        set(f,'WindowButtonMotionFcn','')
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:34:08.773

如果要指定可以拖动的最小/最大步长，则需要编辑函数以在超过某些拖动阈值后`draging`增量更新。`XData`

像这样的东西可能会起作用

```
function draging(varargin)

   dragDist = 1;
   pt = get(a,'currentpoint')
   curX = get(p,'XData')

   if ( curX(1) - pt(1) > dragDist) %drag to the left
      set(p,'XData',curX - dragDist)
   elseif (pt(1) - curX(1) > dragDist) % drag to the right
      set(p, 'XData', curX + dragDist)
   end

end 
```

# android - 没有找到处理意图的活动？

> ID：13276441
> 
> 赞同：3
> 
> 时间：2012-11-07T19:05:29.673
> 
> 标签：android, android-intent, broadcastreceiver, android-activity

我正在编写一个程序，当特定的短信到达手机时，应该调用我的应用程序中的主要活动。我已经注册了一个`BroadcastReceiver`并且调用该活动的意图在`onReceive()`方法中。问题是，每次我发送这个特定的短信时，我都会收到强制关闭。阅读 logcat，我看到以下 NullPoint 异常：

```
10- 20 02:07:16.558: E/AndroidRuntime(1200): java.lang.RuntimeException: Unable to    start receiver edu.example.prankssms3.SMSReceiverActivity3: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=edu.example.prankssms3.action.STARTMUSIC flg=0x10000000 } 
```

但就我而言，一切都是正确的。谁能告诉我问题出在哪里？先感谢您。

**这是清单文件：**

```
<activity
        android:name=".MainActivity3"
        android:label="@string/title_activity_main_activity3" >
        <intent-filter>                
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="edu.example.prankssms3.action.STARTMUSIC" />
        </intent-filter>
    </activity>

    <receiver android:name="SMSReceiverActivity3">
        <intent-filter >
            <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </receiver> 
```

**这是广播接收器**

```
public void onReceive(Context context, Intent intent) {
        // get the message passed in
        Bundle bdl = intent.getExtras();
        SmsMessage[] msgs = null;
        String str = "";
        if(bdl != null){
            // retrieve the sms message received
            Object[] pdus = (Object[]) bdl.get("pdus");         
            msgs = new SmsMessage[pdus.length];
            for(int i=0; i<msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                str += msgs[i].getMessageBody().toString();
            }
            if(str.equals("FIRE_THE_MISSILES")){
                // The pranking comes here
                // start the activity to play the music and send sms    message
                Intent launchActivity = new Intent();
                launchActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                launchActivity.setAction("edu.example.prankssms3.action.STARTMUSIC");
                context.startActivity(launchActivity);
            }
        }
    } 
```

**这是主类，也是意图调用的类：**

```
public class MainActivity3 extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main3);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main3, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:55:47.287

试着改变你的`<intent-filter>`样子：

```
<intent-filter>
    <action android:name="edu.example.prankssms3.action.STARTMUSIC" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:33:17.670

从广播接收器启动活动是不常见的操作。尝试将 FLAG_ACTIVITY_NEW_TASK 添加到用于 startActivity() 的 Intent。

`startActivity()`从 Activity 上下文外部调用需要该`FLAG_ACTIVITY_NEW_TASK`标志。希望这能解决您的问题。

# c# - 当 NumericUpDown 控件中的值大于某个数字时，如何禁用按钮？

> ID：13276444
> 
> 赞同：3
> 
> 时间：2012-11-07T19:05:46.983
> 
> 标签：c#, button, numericupdown

该按钮仅在我单击它后才会禁用。一旦 NumericUpDown 控件中的值增加到特定点以上，我希望它在没有任何交互的情况下禁用。我已经护目镜，但没有找到答案，这是我的代码：

```
 private void mybtn_Click(object sender, EventArgs e)
    {            
        if (numericud.Value > myArray[r, c] || myArray[r, c] == 0)
            DisableButton(mybtn);            
        myArray[r, c] = CalcNewMax(myArray[r, c]);
        OpenNewForm();
    }

    private void DisableButton(Button selectedbtn)
    {
        selectedbtn.Enabled = false;
    } 
```

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:48:20.450

这是一些适用于特定示例的代码。

我没有看到您的代码有任何具体问题，所以如果我是您，我会设置一些断点以确保您的条件得到满足，并且一切都按照您的想法进行。

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void numericUpDown1_ValueChanged(object sender, EventArgs e)
        {
            if (numericUpDown1.Value > 5)
                button1.Enabled = false;
        }
    }
} 
```

作为附加说明，`numericUpDown1_ValueChanged`当您在设计器中双击 UpDown 控件时，Visual Studio 将自动生成处理程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T20:07:51.440

我认为您在单击按钮时调用方法“mybtn_Click()”，而不是在数字上下变化时调用该方法。在按钮属性的“事件”部分中，检查“MouseClick”事件是否设置为调用“mybtn_Click()”。

然后转到数值上下属性的“事件”部分，并将“ValueChanged”事件设置为调用“mybtn_Click()”。我还建议您在此之前将方法名称更改为更合适的名称。

最后，您不需要创建一个全新的方法来简单地更改按钮的 Enabled 值：只需替换该行

`DisableButton(mybtn);`

和

```
mybtn.Enabled = false; 
```

# android - 使用浏览器当前 URL 填充微调器

> ID：13276446
> 
> 赞同：1
> 
> 时间：2012-11-07T19:05:49.117
> 
> 标签：android, sqlite, url, android-webview

我对 Android 开发（和 stackoverflow）非常陌生。

我正在尝试制作一个应用程序，将您当前浏览的网站的 URL 添加到微调器中。问题只是我不知道该怎么做。即使我已经寻找了很长时间，我似乎也找不到任何方法或解决方案。

我的代码如下所示：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_browse);
        WebView myWebView = (WebView) findViewById(R.id.webView1); 
        myWebView.setWebViewClient(new WebViewClient());
        myWebView.loadUrl("no.wikipedia.org/wiki/Spesial:Tilfeldig");
    }

    [...]

    btnAdd.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            String label = inputLabel.getText().toString();

            if (label.trim().length() > 0) {
                // database handler
                DatabaseHandler db = new DatabaseHandler(
                        getApplicationContext());

                // inserting new label into database
                db.insertLabel(label);

                // making input filed text to blank
                inputLabel.setText("");

                // Hiding the keyboard
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(inputLabel.getWindowToken(), 0);

                // loading spinner with newly added data
                loadSpinnerData();
            } else {
                Toast.makeText(getApplicationContext(), "Please enter label name",
                        Toast.LENGTH_SHORT).show();
            }

        }
    } 
```

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:42:00.887

Android 的`WebView`类有一个`getUrl()`可以使用的方法。它返回一个`String`您可以添加到适配器的`Spinner`.

[这里](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)有一个`Spinner`教程可以详细介绍。

# c# - 创建类型“MyClass：OtherClass {}”在运行时？

> ID：13276447
> 
> 赞同：9
> 
> 时间：2012-11-07T19:05:52.533
> 
> 标签：c#, generics, reflection, runtime

在 C# 中是否可以在运行时创建一个从泛型类继承的类型，其中基类的模板参数是当前正在构造的类？这将编译得很好：

```
// I have this class:
public class OtherClass<T>
    where T : OtherClass<T>
{ }

// I want to create this at runtime:
public class MyClass : OtherClass<MyClass>
{ } 
```

但我不确定如何创建`MyClass`using `System.Reflection.Emit.ModuleBuilder.TypeBuilder`：

```
AssemblyName asn = new AssemblyName("test.dll");
AssemblyBuilder asb = AppDomain.CurrentDomain.DefineDynamicAssembly(
    asn, AssemblyBuilderAccess.RunAndSave, @"D:\test_assemblies");

ModuleBuilder = modb = asb.DefineDynamicModule("test", "test.dll");

TypeBuilder tb = modb.DefineType(
    "test",
    TypeAttributes.Public | TypeAttributes.Class,
    typeof(MyClass)); // How to specify inheritance?

// populate properties, fields, methods, etc., emit...

tb.CreateType(); 
```

这可能吗？

编辑 - 根据到目前为止的回复，我已经尝试过：

```
public class OtherClass<T>
    where T : OtherClass<T>
{ }

public static void CreateSimple()
{
    AssemblyName asn = new AssemblyName("test");
    AssemblyBuilder asb = AppDomain.CurrentDomain.DefineDynamicAssembly(
        asn, AssemblyBuilderAccess.RunAndSave, @"D:\test_asms");
    ModuleBuilder modb = asb.DefineDynamicModule("test", "test.dll");

    try
    {
        TypeBuilder tb = modb.DefineType(
            "MyClass",
            TypeAttributes.Public | TypeAttributes.Class);

        Type my = tb.CreateType();
        tb.SetParent(typeof(OtherClass<>).MakeGenericType(my));

        my = tb.CreateType();
    }
    catch (Exception e)
    {
        throw;
    }
} 
```

但得到这个例外：

```
GenericArguments[0], 'MyClass', on 'MyProject.Factory+OtherClass`1[T]'
violates the constraint of type 'T'. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T19:16:20.317

编辑：这是我的最终工作答案：

```
 AssemblyName asn = new AssemblyName("test.dll");
        AssemblyBuilder asb = AppDomain.CurrentDomain.DefineDynamicAssembly(
            asn, AssemblyBuilderAccess.RunAndSave, @"D:\test_assemblies");

        ModuleBuilder modb = asb.DefineDynamicModule("test", "test.dll");

        TypeBuilder tb = modb.DefineType(
            "test",
            TypeAttributes.Public | TypeAttributes.Class);
        // Typebuilder is a sub class of Type
        tb.SetParent(typeof(OtherClass<>).MakeGenericType(tb));
        var t2 = tb.CreateType();
        var i = Activator.CreateInstance(t2); 
```

诀窍是使用参数化的泛型类型调用 SetParent，参数是正在构造的类型本身的类型构建器。

* * *

使用[TypeBuilder.SetParent(Type parent)](http://msdn.microsoft.com/en-us/LIbrary/system.reflection.emit.typebuilder.setparent%28v=vs.100%29)方法。

使用时要小心，异常抛出推迟到`CreateType`调用：

> 如果 parent 为 null，则 Object 用作​​基本类型。
> 
> 在 .NET Framework 1.0 和 1.1 版本中，如果 parent 是接口类型，则不会引发异常，但在调用 CreateType 方法时会引发 TypeLoadException。
> 
> SetParent 方法不检查大多数无效的父类型。例如，当当前类型有默认构造函数时，不拒绝没有默认构造函数的父类型，不拒绝密封类型，也不拒绝 Delegate 类型。在所有这些情况下，CreateType 方法都会引发异常。

要构建您的泛型类型`OtherClass<T>`，请使用[MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype%28v=vs.100%29.aspx)方法：

```
var genericType = typeof(OtherClass<>).MakeGenericType(typeof(MyClass)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:08:10.920

您可以在之后设置基本类型。

[TypeBuilder.SetParent(类型)](http://msdn2.microsoft.com/en-us/library/system.reflection.emit.typebuilder.setparent)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:09:25.163

是的。这是可能的。请参阅[Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)命名空间和 TypeBuilder 的方法。

# java - Java KeyListener 更改 JFrame 标签值

> ID：13276450
> 
> 赞同：4
> 
> 时间：2012-11-07T19:06:13.660
> 
> 标签：java, swing, jframe, jlabel, keylistener

我有以下代码：

```
package testOpdracht1;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.io.InputStream;

public class MainMenu extends JFrame implements KeyListener {

    public MainMenu() {
        initUI();
    }

    public final void initUI() {

        JLabel label1 = new JLabel("text1");
        add(label1);

        addKeyListener(this);

        setTitle("Bla");
        setPreferredSize(new Dimension(400,250));
        setMinimumSize(getPreferredSize());
        setResizable(true);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void keyPressed(KeyEvent e) {

    }
    public void keyReleased(KeyEvent e) {

    }
    public void keyTyped(KeyEvent e) {

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                MainMenu ex = new MainMenu();
                ex.setVisible(true);
            }
        });
    }    
} 
```

我想在按下任何按钮时更改标签中的文本。我怎样才能做到这一点？我知道我可以从 JFrame 类调用方法，因为我的 MainMenu 类扩展了它，但是我找不到引用标签元素以更改值的方法。

真挚地，

卢克索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:11:15.610

将 JLabel 声明为全局变量，并在 initUI() 中将其实例化。现在，在您处理事件时的 ActionListener 方法中，您可以在那里更改标签的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:19:48.163

修改您的代码如下所示：

```
package testOpdracht1;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.Date;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.io.InputStream;

public class MainMenu extends JFrame implements KeyListener {
    final JLabel label1 = new JLabel("text1");
    public MainMenu() {
        initUI();
    }

    public final void initUI() {
        add(label1);

        addKeyListener(this);

        setTitle("Bla");
        setPreferredSize(new Dimension(400,250));
        setMinimumSize(getPreferredSize());
        setResizable(true);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void keyPressed(KeyEvent e) {
          label1.setText("foo");
    }

    public void keyReleased(KeyEvent e) {

    }
    public void keyTyped(KeyEvent e) {

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                MainMenu ex = new MainMenu();
                ex.setVisible(true);
            }
        });
    }    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:12:36.037

您必须将 JLabel 声明为全局变量，然后在任何方法中，您都可以使用类的方法`keyXXX()`更改其文本。`setText()``JLabel`

# ruby - Rufus Scheduler - 捕获异常并执行条件语句

> ID：13276453
> 
> 赞同：0
> 
> 时间：2012-11-07T19:06:18.147
> 
> 标签：ruby, exception, dropbox, conditional-statements, rufus-scheduler

我有一个 rufus 调度程序，它向 Dropbox 执行一个请求，以检查访问密钥和秘密是否每 10 分钟被授权一次。

如果是未授权的，会报如下异常：

```
DropboxAuthError in GalleryController#index

#<Net::HTTPUnauthorized:0x7ef04c8> 
```

我在调度程序中检测到这一点的代码来自 rufus-scheduler 文档：

```
def scheduler.on_exception(job, exception)
  puts "job #{job.job_id} caught exception '#{exception}'"
end 
```

因为我只想捕获上面的那个异常，所以我希望能够执行一个条件语句，将异常与一个值进行比较，例如：

```
 def scheduler.on_exception(job, exception)
  if exception == "DropboxAuthError"
    puts "job #{job.job_id} caught exception '#{exception}'"
  end
 end 
```

但是因为异常是一个对象，所以我不能做那个比较。

有没有人知道我该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T06:25:36.183

给猫剥皮的多种方法

```
if exception.message.match(/DropboxAuthError/)
  # ...
end

if exception.is_a?(Net::HTTPUnauthorized)
  # ...
end 
```

不要害怕你的 Ruby 对象。

请注意，您可以避免从 rufus-scheduler 文档中选择的全局错误处理，并执行以下操作：

```
scheduler.every '10m' do
  begin
    # do the API call...
  rescue Net::HTTPUnauthorized => ne
    puts "not authorized"
  rescue => e
    puts "something wrong happened " + e.inspect
  end  
end 
```

救援在哪里为您进行类型检查。

干杯。

# objective-c - UICollectionView 从右下角开始流动

> ID：13276463
> 
> 赞同：3
> 
> 时间：2012-11-07T19:06:53.450
> 
> 标签：objective-c, ios6, uicollectionview

当我正在探索相当新的 UICollectionView 时，我想知道如何将项目的流程转过来，以便它们从右下角而不是左上角填充。

很高兴在这里得到一些反馈。

再次感谢！

# ruby-on-rails-3 - 使用 client_side_validations 和 formtastict 看不到自定义错误输出

> ID：13276467
> 
> 赞同：0
> 
> 时间：2012-11-07T19:07:03.393
> 
> 标签：ruby-on-rails-3, formtastic, client-side-validation

我似乎无法获得我想要的自定义错误显示，我已取消注释 config/initializers/client_side_validations.rb 中的文本并按照文档中的描述创建了 rails.validations.actionView.js 但是在调试表单时我似乎无法使用自定义文件（我还在 rails.validations.js 文件上放置了一些断点，它没有在那里添加或删除，所以这可能是问题所在。所有文件都已加载通过资产管道和据我所知。

```
gem 'rails', '3.2.8'
gem 'formtastic'
gem 'client_side_validations' , '3.2.0'
gem 'client_side_validations-formtastic' 
```

动作视图.js

```
window.ClientSideValidations.formBuilders['ActionView::Helpers::FormBuilder'] = {
add: function(element, settings, message) {
// custom add code here
console.log('added')
 },
remove: function(element, settings) {
console.log('removed');}} 
```

_form.html.erb

```
<%= semantic_form_for @sponsorship, :validate => true do |f| %>
  <%= f.inputs do %>
    <%= f.input :title, :hint => "Give us a title" %>
     <%= f.input :bio %>
    <%= f.input :blurb %>
    <%= f.input :category_id, :as => :select, :collection => Category.all, :label_method => :title %>
    <%= f.input :event_id, :as => :select, :collection => Event.all, :label_method => :title %>
    <%= f.input :date_end, :start_year => 2012, :as => :date_picker %>
    <%= f.input :funds_needed %>
    <%= f.input :user_id, :as => :hidden, :input_html => { :value => current_user.id } %>
    <%= f.input :agree_to_terms %>
    <%= f.validate %>
  <% end %>

  <%= f.actions do %>
    <%= f.action :submit, :as => :input %>
  <% end %>
<% end %> 
```

头部中的 HTML 输出

```
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.validations.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.validations.formtastic.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.validations.customValidators.js?body=1" type="text/javascript"></script>
<script src="/assets/rails.validations.actionView.js?body=1" type="text/javascript"></script> 
```

client_side_validation.rb

```
require 'client_side_validations/simple_form' if defined?(::SimpleForm)
require 'client_side_validations/formtastic'  if defined?(::Formtastic)

 ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   unless html_tag =~ /^<label/
     %{<div class="toto"><div class="field_with_errors">#{html_tag}</div><label for="#{instance.send(:tag_id)}" class="message" style="float:right;">#{instance.error_message.first}</label></div>}.html_safe
   else
     %{<div class="toto">#{html_tag}</div>}.html_safe
   end
 end 
```

我是rails新手，所以我可能在某个地方失态了。有任何问题请告诉我！谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:01:00.410

一切看起来都很好。如果您在其中一个单独的字段上抛出一个验证选项会发生什么？那有什么火吗？

另外，控制台中的任何错误？我通过 client_side_validations 发现您需要确保在控制台（特别是 Chrome）中打开持久性消息，以便它们在表单提交后保持不变。

# javascript - 正则表达式空格字符会导致注入吗？

> ID：13276474
> 
> 赞同：3
> 
> 时间：2012-11-07T19:07:35.993
> 
> 标签：javascript, regex, security, code-injection

如果我想验证 a 的输入`<textarea>`，并希望它只包含例如数值，但甚至想让用户能够插入新行，我可以使用包含空格的 javascript 正则表达式来选择想要的字符人物。

```
/[0-9\s]/ 
```

问题是：即使我认为最后一个选项是不可能的，或者任何其他类型的攻击，是否可以使用白色字符来执行注入、XSS？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:10:33.937

`/[0-9\s]/`我相信应该是一个安全的白名单。但是，您确实需要确保它检查整个输入；我想你的意思是`/^[0-9\s]*$/`。

当然，还要记住，您必须在服务器端验证它，而不仅仅是在浏览器中。攻击者可以轻松绕过 JavaScript 验证代码。

# javascript - Javascript：“顶级 'this' 表达式”

> ID：13276475
> 
> 赞同：5
> 
> 时间：2012-11-07T19:07:36.853
> 
> 标签：javascript, this

当我有这样的对象时，我收到以下警告/提示/错误：

```
(
    function global(){...};
    function moreFunctions(){...};
)(this); 
```

> “顶级 'this' 表达式。此检查报告在对象字面量或构造函数体之外发生的 Javascript 'this' 表达式的实例。这样的 this 表达式是合法的 Javascript，并引用顶级“全局”Javascript 对象，但主要是无用。” （由检查JS）

顺便说一句，jQuery 有相同的 with`(window)`而不是`(this)`.

我不明白这是什么意思。我所知道的是第一个`(`和第二个之间的一切`)`都是一个对象，但是那个添加是什么？

我进入这个是因为我刚刚发现了一个 JS 库^([源](http://code.google.com/p/mutation-summary/source/browse/mutation_summary.js))，当它包含在我现有的脚本中时，一切都停止了工作。当我删除该`(this);`部分时，它并没有使页面崩溃；但图书馆只是没有工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:16:14.097

我不能 100% 确定您遇到的问题，但让我解释一下我从 Paul Irish 的 JQuery 源课程视频中学到了什么。

```
(function(window, undefined) {
})(this); 
```

这被称为自执行功能。函数定义放在括号中。（几乎所有时间都可以将任何东西放在 Javascript 中的括号中）。然后，第二个`()`立即调用该函数。

所以就像做以下事情

```
function my_func(window, undefined){...}
my_func(this); 
```

现在来解释一下`this.`通常，我们将整个程序包装在这样一个自执行函数中。while 调用，`this`window 和 undefined 几乎只是在共享代码空间时修复了边缘情况。例如，有人可以把类似的东西

```
window = 0;
//or
undefined = 1; 
```

突然间，我们所依赖的这些非常重要的全局变量中断了。在顶层使用 this 将 window 变量返回给内部函数。而且由于我们没有将任何第二个变量传递给函数，因此 undefined 将返回其正确值。

希望这一切都有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T19:12:03.293

它抱怨您在`this`任何功能之外使用。

在函数内部，使用`this`（通常）意味着程序员打算将函数作为方法（`this`调用该方法的对象在哪里），但在函数外部，这只是一件奇怪的事情。

最好`window`改为显式地引用全局对象，而不是依赖于`this`在方法调用中未使用全局对象时隐式引用全局对象这一事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:09:31.580

这会将整个代码块放入具有自己作用域的立即执行函数中。

例如：

```
(function(w){
    var apple = 'apple';
})(window);

alert(apple); //undefined 
```

# mysql - 更新另一个表等于某个值的位置

> ID：13276480
> 
> 赞同：1
> 
> 时间：2012-11-07T19:08:16.867
> 
> 标签：mysql, sql, sql-update

如何在 MySQL 中执行以下操作：

```
UPDATE PartTbl SET aFlag = 0 
WHERE PartId = (SELECT PartId FROM CategoryTbl WHERE cat = 100) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:10:44.587

```
UPDATE PartTbl SET aFlag = 0 
WHERE PartId IN (SELECT PartId FROM CategoryTbl WHERE cat = 100) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:10:46.863

只需在 WHERE 子句中使用`"IN"`而不是运算符或使用以下代码：`"="`

```
UPDATE A
    SET aFlag = 0
    From    PartTbl     As  A
    Inner   Join
        CategoryTbl As  B
    On  A.PartId    =   B.PartId
    WHERE B.cat = 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:11:48.550

```
UPDATE PartTbl pt SET aFlag = 0 
WHERE exists (
   SELECT PartId FROM CategoryTbl ct 
    WHERE cat = 100 and pt.partId = ct.partId) 
```

# c# - 在 .NET v4+ 程序集上嵌入\合并 .NET v1 程序集

> ID：13276481
> 
> 赞同：2
> 
> 时间：2012-11-07T19:08:18.207
> 
> 标签：c#, ilmerge

我有一个 C# 库，其中包含我们开发的一些程序集和一些第三方 o 我需要将所有内容放在一个程序集文件中。

当我尝试使用 ILMerge**合并**所有内容时，出现以下错误：

> 合并时发生异常：
> 
> ILMerge.Merge：程序集“TestLibrary”未标记为仅包含托管代码。（考虑使用 /zeroPeKind 选项——但请先阅读文档！） em ILMerging.ILMerge.Merge() em ILMerging.ILMerge.Main(String[] args)

当我从合并中删除 TestLibrary 时，它工作正常。但是为了让我的项目正常工作，我已经单独引用了 TestLibrary 并启用了 useLegacyV2RuntimeActivationPolicy="true"。

因此，经过更多研究后，我决定尝试使用[Jeffrey Richter](http://blogs.msdn.com/b/microsoft_press/archive/2010/02/03/jeffrey-richter-excerpt-2-from-clr-via-c-third-edition.aspx "杰弗里·里希特")使用 Embedded Resources ：

```
AppDomain.CurrentDomain.AssemblyResolve += (sender, args) => {
   String resourceName = "AssemblyLoadingAndReflection." +
      new AssemblyName(args.Name).Name + ".dll";
   using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName)) {
      Byte[] assemblyData = new Byte[stream.Length];
      stream.Read(assemblyData, 0, assemblyData.Length);
      return Assembly.Load(assemblyData);
   }
}; 
```

它加载资源字节但在 Assembly.Load 上失败，说程序格式不正确。

TestLibrary 是一个 C++ .Net v1.0 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:35:20.253

ILMerge 根本无法处理包含本机代码的程序集。您必须在使用前在运行时提取 dll，或者发送 dll。这也在[ILMerge 使用 2 个第三方 dll 的 C++ 进行了解释](https://stackoverflow.com/questions/3910356/ilmerge-using-2-third-party-dlls-c)

# php - 对 html/PHP 报告具有挑战性的 MySQL 查询

> ID：13276482
> 
> 赞同：0
> 
> 时间：2012-11-07T19:08:23.287
> 
> 标签：php, html, mysql

对于优秀的 MySQL 编码器来说，这是一个挑战。我们将非常感谢有关创建在 html/PHP 页面中显示的 MySQL 报告的查询的帮助。

我们知道如何收集和存储数据，并拥有 PHP 报表布局，但不知道如何构建查询。

我们有两个 MySQL 表——“visitors”和“buyers”。

1.  访问者表 - 用于通过特定 URL 进入我们网站的访问者，该 URL 标识了 sales_rep 和他们自己创建的许多营销代码之一。
2.  买家桌——为那些买东西的人准备的。

访问者可以通过以下链接访问我们的网站，例如：

```
www.sales_rep.website.com/index.php?marketing=code1/code2/code3 
```

在“访问者”表中，我们包括三个字段：

*   销售代表
*   日期
*   Marketing_CODE –（在本例中为字符串中的“code1/code2/code3”，但每个 sales_rep 可以根据其广告活动有多个 marketing_CODES；例如“code1a/codeTX/codeM2”和“market-z/ad” -123")

当访客购买商品时，我们会将其添加到“买家”表中，其中包括：

*   销售代表
*   日期
*   Marketing_TYPE –（可以是“URL”、“推荐”或其他类型）
*   Marketing_VALUE –（如果marketing_TYPE 是URL，它将是marketing_CODE）

我们需要查看每个特定销售代表的报告，对于任何指定的月份，按营销代码排序，仅针对 marketing_TYPE == "URL"。

此报告需要显示每个 marketing_CODE 的访客和买家活动的逐周细分，如下所示：

![表格示例](../Images/e4a00fadf7b9f1422f9b657b91f39d29.png)

为清楚起见，在上表中，在第 1 周，有 8 位访问者通过“code1/code2/”的链接进入网站，其中 5 位购买了东西。

我们尝试从以下内容开始查询，但不知道该去哪里：

1.  `$chosen_month = $_POST['chosen_month'];`
2.  `SELECT * FROM visitors INNER JOIN buyers ON sales_rep WHERE marketing_type = "URL" AND sales_rep = '$sales_rep' AND date('Y-m') = $'chosen_month' ;`
3.  使用 while 语句，我们将为找到的每个记录生成表格单元格。使用它，我们知道如何列出每条记录，但我们无法弄清楚如何显示一次非不同的记录，显示它们的计数，然后显示不同的记录。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:52:44.523

这是我对您查询的建议。

首先，我需要根据日期字段找出周数，所以我在[这个问题](https://stackoverflow.com/questions/785206/function-for-week-of-the-month-in-mysql)中使用了答案：

```
SELECT  WEEK(dateField, 5) -
        WEEK(DATE_SUB(dateField, INTERVAL DAYOFMONTH(dateField) - 1 DAY), 5) + 1 
```

从现在开始，我会将上述结果称为@week，以使内容更具可读性:)

然后，我从一张表开始，试图查看销售代表每个月有多少访客：

```
select rep, 
  , SUM(CASE @week WHEN 1 THEN 1 ELSE 0 END) as Week1
  , SUM(CASE @week WHEN 2 THEN 1 ELSE 0 END) as Week2
  , SUM(CASE @week WHEN 3 THEN 1 ELSE 0 END) as Week3
  , SUM(CASE @week WHEN 4 THEN 1 ELSE 0 END) as Week4
  , COUNT(*) as Total
from visitors
group by rep 
```

既然我们得到了这个信息，我们将对买家使用相同的信息，然后加入这两个子查询的结果，如下所示：

```
select v.rep
, v.Week1 , b.Week1
, v.Week2 , b.Week2
, v.Week3 , b.Week3
, v.Week4 , b.Week4
, v.Total, b.Total
from (
     select rep, 
        , SUM(CASE @week WHEN 1 THEN 1 ELSE 0 END) as Week1
        , SUM(CASE @week WHEN 2 THEN 1 ELSE 0 END) as Week2
        , SUM(CASE @week WHEN 3 THEN 1 ELSE 0 END) as Week3
        , SUM(CASE @week WHEN 4 THEN 1 ELSE 0 END) as Week4
        , COUNT(*) as Total
     from visitors
     group by rep) as v
     left join (select rep, 
                 , SUM(CASE @week WHEN 1 THEN 1 ELSE 0 END) as Week1
                 , SUM(CASE @week WHEN 2 THEN 1 ELSE 0 END) as Week2
                 , SUM(CASE @week WHEN 3 THEN 1 ELSE 0 END) as Week3
                 , SUM(CASE @week WHEN 4 THEN 1 ELSE 0 END) as Week4
                 , COUNT(*) as Total
                from visitors
                group by rep) as b on v.rep = b.rep 
```

这应该是你要找的！

这是根据您的情况更新的与上面相同的代码：

```
select v.rep
    , v.Week1 , b.Week1
    , v.Week2 , b.Week2
    , v.Week3 , b.Week3
    , v.Week4 , b.Week4
    , v.Total, b.Total
from (
        select rep
          , SUM(CASE WEEK(the_date, 5) -
            WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 1 THEN 1 ELSE 0 END) as Week1
      , SUM(CASE WEEK(the_date, 5) -
            WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 2 THEN 1 ELSE 0 END) as Week2
      , SUM(CASE WEEK(the_date, 5) -
        WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 3 THEN 1 ELSE 0 END) as Week3
      , SUM(CASE WEEK(the_date, 5) -
        WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 4 THEN 1 ELSE 0 END) as Week4
      , COUNT(*) as Total
        from visitors
        where sales_rep = '$sales_rep' AND date('Y-m') = $'chosen_month'
        group by rep ) as v
  left join (
        select rep
          , SUM(CASE WEEK(the_date, 5) -
            WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 1 THEN 1 ELSE 0 END) as Week1
      , SUM(CASE WEEK(the_date, 5) -
            WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 2 THEN 1 ELSE 0 END) as Week2
      , SUM(CASE WEEK(the_date, 5) -
        WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 3 THEN 1 ELSE 0 END) as Week3
      , SUM(CASE WEEK(the_date, 5) -
        WEEK(DATE_SUB(the_date, INTERVAL DAYOFMONTH(the_date) - 1 DAY), 5) + 1
            WHEN 4 THEN 1 ELSE 0 END) as Week4
      , COUNT(*) as Total
        from buyers
        where marketing_type = "URL" AND sales_rep = '$sales_rep' AND date('Y-m') = $'chosen_month'
        group by rep) as b on v.rep = b.rep 
```

# objective-c - 推送 viewController 动画时 UINavigationController 上的子视图看起来不正确

> ID：13276485
> 
> 赞同：0
> 
> 时间：2012-11-07T19:08:41.847
> 
> 标签：objective-c, ios, xcode

在我的 UIViewController viewDidLoad 我有：

```
myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
...
myButton.frame = CGRectMake(0, 2, 40, 40);
[self.navigationController.navigationBar addSubview:myButton]; 
```

按钮显示就好了。不，我将另一个视图控制器推入堆栈：

```
 [self.navigationController pushViewController:vc animated:YES]; 
```

当然 Button 仍在显示，所以我尝试将其隐藏在 viewWillDisappear 中并将其显示在 viewWillAppear 中，但过渡看起来不正确。即使将超级调用的顺序与隐藏调用交换也不正确。

```
- (void)viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    myButton.hidden = YES;
}

- (void)viewWillAppear:(BOOL)animated {
    myButton.hidden = NO;
    [super viewWillAppear:animated];
} 
```

我该怎么做才能让这个过渡看起来正确？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:16:14.017

不要将按钮添加为子视图，而是使用以下内容

```
UIBarButtonItem *barButton = [[UIBarButtonItem alloc] initWithCustomView:YourCustomView];
self.navigationItem.rightBarButtonItem = barButton; 
```

# mysql - mysql找到值不匹配的匹配键

> ID：13276490
> 
> 赞同：0
> 
> 时间：2012-11-07T19:09:09.677
> 
> 标签：mysql

我正在使用一个包含一些重复数据的数据库，并试图编写一个查询来提取问题数据。该表如下所示：

```
lpID, pID, pName, etc... 
```

其中 lpID 是该表的唯一 ID，pID 是整个数据库的共享 ID。我有这个来提取匹配的 pID 值（16k）：

```
SELECT lp.pID, group_concat(lp.lpID) as lpIDs, group_concat(lp.pName) as names
FROM lp
INNER JOIN (
  SELECT pID
  FROM lp
  GROUP BY pID
  HAVING count(pID) > 1
) dup ON lp.pID = dup.pID
group by lp.pID 
```

哪个有效，但现在我正在尝试扩展它，使其仅提取 pName 值不匹配的 938。我尝试的任何方法似乎都不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:25:39.693

你有没有尝试过

```
SELECT lp.pID, group_concat(lp.lpID) as lpIDs, group_concat(lp.pName) as names
FROM lp
INNER JOIN (
  SELECT pID, COUNT(distinct pName) AS Names
  FROM lp
  GROUP BY pID
  HAVING count(pID) > 1 AND Names > 1
) dup ON lp.pID = dup.pID
group by lp.pID 
```

# javascript - 从按键事件的日期输入中获取值

> ID：13276496
> 
> 赞同：0
> 
> 时间：2012-11-07T19:09:59.750
> 
> 标签：javascript

有没有办法从按键事件中的日期输入字段中获取当前值？我在按键事件中的文本输入字段上使用了 jQuery .val() 函数或直接的 javascript .value，但是当我在日期输入字段上尝试其中任何一个时（在支持它的浏览器中，例如 chrome )，我只得到一个空字符串 - 显然在输入有效日期之前不会设置该值。

我正在使用此功能允许用户仅输入六位数的日期，例如 110712，并在键入时自动添加斜杠以生成 11/07/12。当然，我可以只使用纯文本输入，但我喜欢日期类型字段在支持它的浏览器上为我提供的弹出日期选择器。

编辑：也许我不清楚我想要做什么。从附加到日期输入字段的按键处理程序中，我想获取用户当前在该字段中键入的内容。例如，如果用户已经输入了“11”，然后输入了“0”，我希望能够看到该字段的当前值为“11”。使用基本文本输入（或不支持日期输入字段的浏览器），我可以从按键事件处理程序中调用 .val() 或 .value ，它会给我一个“11”的结果。然而，在支持日期输入字段的浏览器中，调用 val() 或 .value 时我得到的只是“”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:17:59.163

```
$("#clickme").keypress(function(event){
    alert(event.timeStamp);
  alert(new Date(event.timeStamp));

    var fullDate = new Date()
console.log(fullDate);
//Thu May 19 2011 17:25:38 GMT+1000 {}

//convert month to 2 digits
//  var twoDigitMonth = ((fullDate.getMonth().length+1) === 1)? (fullDate.getMonth()+1) : '0' + (fullDate.getMonth()+1);

 //  var currentDate = fullDate.getDate() + "/" + twoDigitMonth + "/" + fullDate.getFullYear();
 // console.log(currentDate);
    // $("#clickme").val(currentDate);
//08/11/2012
}); 
```

[jsfiddle 工作示例](http://jsfiddle.net/SyRtx/14/)

上面的例子显示**`current date on keypress event`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:20:06.250

**更新：**

不幸的是，这似乎无法做到。考虑 input[type="date"] 一个选择，其中选项是历史中的每个日期，而不是文本框。 [http://www.html5tutorial.info/html5-date.php](http://www.html5tutorial.info/html5-date.php) 上面的链接显示了其他浏览器正是以这种方式实现的。请注意，一旦您的文本框具有有效日期， .val() 就会获取该值。

您可以同时使用 input[type="text"] 和旁边的一个小的 input[type="date"] 来完成混合，以便在更改时将其值转储到文本框中。

工作示例： http: [//jsfiddle.net/WaAcU/](http://jsfiddle.net/WaAcU/)（这不会进行您的验证，只是将选择器转储到文本框中）

**原答案：**

使用 JQuery 按键处理程序。

```
$(dateField).keypress(function(){
    ...your validation code...
});​ 
```

简单的例子：http: [//jsfiddle.net/zUMHr/](http://jsfiddle.net/zUMHr/)

# jquery - 更新 jquery datepicker 字段后进行实时总更新

> ID：13276502
> 
> 赞同：0
> 
> 时间：2012-11-07T19:10:36.497
> 
> 标签：jquery

我的网站上有五个字段。一个是 jquery datepicker 签入日期，第二个是结帐日期。接下来的两个是“总夜数”字段（即计算日期字段之间的总天数），第四个字段是一个名为“房价”的下拉菜单，提供所选房间每晚的房价。我的脚本（如下）通过将“总夜数”字段中的数字乘以“费率”字段来计算正确的 TOTAL，在 TOTAL price 字段（这是我的第 5 个字段）中给出答案，但我遇到了一个问题。

当我返回并将结帐日期更改为较晚的日期时，“总晚数”字段会相应更新，但我的 TOTAL 输入字段不会改变，除非我更改下拉菜单中的选择，否则它会保持不变。有什么办法可以使结帐日期（jquery datepicker）字段的更改重置“率”字段或正确更新总字段？

这是我的代码，用于正确计算总价（总晚数 * 费率）。

```
//Now let's calculat the total price
$('#publishForm').bind('keypress keydown keyup change',function(){
    var value = $('input[name=totaldays]').attr("value");
        value2 = $('#select option:selected').attr("title");

    total_suite = parseInt(value2);
    total_days = parseInt(value);

    var total = '';
    total = total_suite * total_days;

/* output */

    $(".pTotal").replaceWith('<span class="pTotal">' + total + '</span>');
    $(".pTotal").formatCurrency();
    $("#price").replaceWith('<input type="hidden" id="price" value="' + total +'" name="price" style="border:none;font-size:14px;margin-top:10px;" readonly="readonly" />');
});
}); 
```

如有必要，这是我的 datepicker 脚本（链接如下）。感谢另一个 stackoverflow 用户的帮助，我昨晚让它工作了。不确定它是否相关，但无论如何都想包含它。

编辑：这是执行我所有日期选择器魔术并相应更新总夜数字段的脚本。

```
// Calendar Dates
/* create an array of days which need to be disabled */
var disabledDays = ["11-13-2012","11-14-2012","11-15-2012","11-29-2012","11-30-2012"];

/* utility functions */
function nationalDays(date) {
  var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
  //console.log('Checking (raw): ' + m + '-' + d + '-' + y);
  for (i = 0; i < disabledDays.length; i++) {
    if($.inArray((m+1) + '-' + d + '-' + y,disabledDays) != -1 || new Date() > date) {
      return [false];
    }
  }
  return [true];
}

//Block the Weekends
function noWeekendsOrHolidays(date) {
   var noWeekend = $.datepicker.noWeekends(date);
    if (noWeekend[0]) {
        return nationalDays(date);
    } else {
        return noWeekend;
    }
}

function days() {
            var a = $("#datepicker_start").datepicker('getDate').getTime(),
                b = $("#datepicker_end").datepicker('getDate').getTime(),
                c = 24*60*60*1000,
                diffDays = Math.round(Math.abs((a - b)/(c)));
            $("#totaldays").val(diffDays)
}

$(document).ready(function () {
$.datepicker.setDefaults({dateFormat: 'mm/dd/yy',minDate: +1,changeMonth: true,changeYear: true,numberOfMonths: 2,constrainInput:true,beforeShowDay:nationalDays,});
        var selector = function (dateStr) {
            var d1 = $('#datepicker_start').datepicker('getDate');
            var d2 = $('#datepicker_end').datepicker('getDate');
            var diff = 0;
            if (d1 && d2) {
                diff = Math.floor((d2.getTime() - d1.getTime()) / 86400000); // ms per day
            }
            $('#totaldays').val(diff);
        }
$('#datepicker_start').datepicker({
            onSelect: function(selectedDate) {
    var minDate = $(this).datepicker('getDate');
    if (minDate) {minDate.setDate(minDate.getDate() + 3);}//min days requires
    $('#datepicker_end').datepicker('option', 'minDate', minDate || 1); // Date + 1 or tomorrow by default
    days();
}});
$('#datepicker_end').datepicker({minDate: 1, onSelect: function(selectedDate) {
    var maxDate = $(this).datepicker('getDate');    
    if (maxDate) {maxDate.setDate(maxDate.getDate() - 1);}
    $('#datepicker_start').datepicker('option', 'maxDate', maxDate); // Date - 1    
    days();
}});
    $('#datepicker_start,#datepicker_end').change(selector)
        }); 
```

# c++ - 将 Objective-C 实例转换为 C++ 类

> ID：13276504
> 
> 赞同：0
> 
> 时间：2012-11-07T19:10:45.683
> 
> 标签：c++, objective-c, instance, objective-c++, pimpl-idiom

如何将 Objective-c 类实例化为 CPP 类？

例如我的 CPP 课程：

```
class Foo{
public:
    Foo();
private:
    MyObjcClass* myObjcClass; //it does not work
} 
```

我怎么能这样做？

请注意，我将 .m 用于 Objective-C，将 .cpp 用于 C++。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:17:57.627

任何一个

*   编译为 Objective-C++
*   或将其声明为`id`.

如果你使用`id`，你应该在你的定义中引入类型，例如：

```
// Foo.mm
Foo::~Foo() {
  MyObjcClass * a = this->myObjcClass;
  [a release];
} 
```

通常，您应该保留类型 ( `MyObjcClass`) 并*避免*使用`id`，但将变量声明为`id`与 C 和 C++ 兼容，这样您就`id`可以避免将包含 Foo.hpp 的所有内容编译为 ObjC++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:19:30.247

有两种方法可以做到这一点。理智的方法是使用 Objective-C++。您可以使用具有`.mm`扩展名的文件执行此操作，也可以更改构建设置。默认是基于文件扩展名编译，但你可以强制它在一个`.cpp`或`.m`文件上使用Objective-C++。

疯狂的方法是在 objc.h 中使用原始的 Objective-C 接口。

# c# - 长时间保持 C# Filestream 打开是否安全？

> ID：13276506
> 
> 赞同：12
> 
> 时间：2012-11-07T19:10:48.113
> 
> 标签：c#, file-io, filestream

在我的 Web 服务中，我打开一个指向本地磁盘上文件的文件流。我会在服务的整个生命周期内保留它。对于传入的每个查询，我使用文件流来读取磁盘。我这样做是为了避免在每次查询时都必须重新打开文件流。这条路径的延迟很关键（应该少于几毫秒）。我使用 SSD 将磁盘 IO 时间保持在 0.1 毫秒或更短。

文件流能否在很长一段时间（几天）内“变坏”（变得无效）。在每个查询中重新打开文件流是否更安全？如果我必须重新打开，那么每秒多次重新打开文件流的开销是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:14:59.290

只要您需要，就可以安全地保持文件打开。

这对你的案子有好处吗 - 你需要自己决定。重新打开文件不应该很慢（即使在普通驱动器上），但您需要尝试衡量自己，但您知道自己的确切性能目标。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T19:21:14.637

让文件保持打开状态的唯一问题是应用程序是否因任何原因而失败，并且无法从当前位置恢复以关闭流；用于打开文件的[`CreateFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)入口点执行以下语句：`KERNEL32`

> 当应用程序使用完 CreateFile 返回的对象句柄时，使用 CloseHandle 函数关闭句柄。这不仅可以释放系统资源，而且可以对共享文件或设备以及将数据提交到磁盘等事情产生更广泛的影响。本主题中会酌情注明具体细节。

`FileStream`所以我认为每次都打开和关闭更合适。

# knockout.js - 从 ViewModel 渲染 Json，反之亦然

> ID：13276508
> 
> 赞同：1
> 
> 时间：2012-11-07T19:10:53.523
> 
> 标签：knockout.js, knockout-mapping-plugin

我是淘汰 js 的新手，我有一个类似于这个 jsfiddle [http://jsfiddle.net/daedalus28/vpjhZ/](http://jsfiddle.net/daedalus28/vpjhZ/)的要求，从 viewmodel 渲染 json 非常棒，但是我无法做到反之亦然，因为 json 来自服务器需要渲染相同的视图。如何在映射创建函数中映射 observablearray？

```
var FilterGroup = function(parent) {

    this.join = ko.observable('All');
    this.filters = ko.observableArray([new Filter(this)]);

    this.addFilter = function() {
        var filter = new Filter(this);
        this.filters.push(filter);
        this.filters.valueHasMutated();
    };
    this.addGroup = function() {
        var group = new FilterGroup(this);
        this.filters.push(group);
        this.filters.valueHasMutated();
    };
    this.remove = (function(parent) {
        return function() {
            parent.filters.remove(this);
        }
    })(parent);

     this.isRoot = (function(parent) { 
        return function() {
            return parent ? false : true;
        }
    })(parent);

    var mappingOptions = {
        filters: {
            create: function(args) {
                   return new function () {

                   filters = ko.observableArray([new Filter(args.data)]);

      };

            }
        }
    };

    ko.mapping.fromJS(parent, mappingOptions, this);

};

var data = {filters:{join:'All',filters:[{field:{name:'IsDeleted',label:'Deleted'},modifier:'contains',criteria:'50'},{join:'All',filters:[{field:{name:'IsDeleted',label:'Deleted'},modifier:'equals',criteria:'20'}]},{field:{name:'Email',label:'Email'},modifier:'equals',criteria:'30'}]}};

var viewModel = {
    filters: new FilterGroup(data.filters),
    options:  {
        joins: ['All', 'Any'],
        modifiers: [
            'equals',
            'not equal to',
            'less than',
            'greater than',
            'contains',
            'does not contain',
            'starts with'
        ],
        fields: [{"name":"Id","label":"ContactID"},{"name":"IsDeleted","label":"Deleted"}],
    },

    toJSON: function() {
        return {
             filters: this.filters
        }
    }
  };

$(function() {

    ko.applyBindings(viewModel);
}) 
```

;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:09:19.693

我不确定我是否理解正确，但您想从 ViewModel 呈现 JSON 字符串？如果是这样，你将不得不做这样的事情：

```
var result = JSON.stringify(unwrapObservable(myViewModel)); 
```

或使用[映射插件](http://jsfiddle.net/gurkavcu/P7KUC/)

# java - 非常简单的for循环错误Java

> ID：13276512
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:00.050
> 
> 标签：java, loops, methods, for-loop, arraylist

我不知道为什么这不起作用。

```
public static int getMaxPosition(ArrayList<Integer>list)
{
    int max=list.get(0);
    int maxPos=0;
    int curr;
    int c;
    for (c=0; c<list.size(); c++);
    {
        curr=list.get(c);
        if (curr>max);
        {
            maxPos=curr;
            max=curr;
        }
    }

    return maxPos;
} 
```

这段代码在该行给出了一个运行时错误（IndexOutOfBoundsException）`curr=list.get(c);`，我找不到任何好的理由。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:12:45.737

`for`循环后有一个分号。因此，它将执行 until `c < list.size()`，然后在您`c`变为时退出`list.size()`。现在，您`list.get(c)`将为此执行`c = listsize`，这是超出范围的。

```
for (c=0; c<list.size(); c++); <-- //Remove Semi-colon 
```

此外，如果你的内部有一个分号： -

```
if (curr>max);  <-- // Remove this also. 
```

**注意：-**如果您迭代使用，它对其他人来说更*易读，对您来说**更容易*：-`list``enhanced for-loop`

```
for (int curr: list) {
   if (curr>max) {
       maxPos=curr;
       max=curr;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:13:24.503

```
for (c=0; c<list.size(); c++); 
```

 如果（当前>最大值）；

去掉分号。分号结束语句。

您的代码应如下所示：

```
for (c=0; c<list.size(); c++)
{
curr=list.get(c);
        if (curr>max)
        {
            maxPos=curr;
            max=curr;
        }
... 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:17:10.193

在 for 循环之后有一个分号，然后是方括号。分号使循环执行，然后它落入块中。for 循环将 c 递增到 c == list.size()，然后进入执行块。

这是工作代码：

```
public static int getMaxPosition(ArrayList<Integer>list)
{
    int max=list.get(0);
    int maxPos=0;
    int curr;
    int c;
    for (c=0; c<list.size(); c++)
    {
        curr=list.get(c);
        if (curr>max)
        {
            maxPos=curr;
            max=curr;
        }
    }

    return maxPos;
} 
```

# c# - 在 Visual Studio 中不使用 webtest 加载测试的最佳方法

> ID：13276513
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:00.593
> 
> 标签：c#, visual-studio-2010, performance-testing

我一直在运行负载测试来测试我们正在构建的系统的整体性能，但我遇到了一个问题，我不确定解决它的最佳方法。我想要做的是运行其他一些不是 Web 请求的命令，但我仍想使用所有负载测试功能（计数器监控、并发用户等......）。我还没有找到一种方法来做到这一点而不必进行实际的网络测试。我显然可以欺骗 webtest 并让它返回一个虚拟的 web 请求。但我很好奇是否有更好的方法来做到这一点。这似乎至少有点普遍，但我找不到任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T08:44:24.577

看看[WebTestPlugin 类](http://msdn.microsoft.com/en-us/library/Microsoft.VisualStudio.TestTools.WebTesting.WebTestPlugin.aspx)

如果这些其他命令是为实际测试做准备，只需为 Pre... 事件之一实现事件处理程序，例如 PreWebTest 或 PreRequest。

如果这些命令是为了在系统上创建额外的负载，比如批处理，我不知道这些是否是专门的测试类型，但你可以做一个虚拟的 webtest，发出一些不相关的请求，然后开始实际的PreRequest 事件处理程序中的命令。然后，将此 Webtest 混合到您的负载测试中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-24T14:25:56.697

如果可以通过 API 触发这些额外的非 Web 命令，您可以创建一个触发 API 的单元测试。

# jquery - 多个 jquery 效果在特定时间多次

> ID：13276516
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:16.027
> 
> 标签：jquery, jquery-ui, animation, delay, jquery-effects

我有这段代码：

```
$("#au").click(function(){
    $("#sca").delay(18625).effect("bounce","highlight",2000);
    $("#scb").delay(26520).effect("bounce","highlight",2000);
    $("#scc").delay(30884).effect("bounce","highlight",2000);
    $("#scd").delay(34901).effect("bounce","highlight",2000);
    $("#sce").delay(39000).effect("bounce","highlight",2000);
    $("#scf").delay(44000).effect("bounce","highlight",2000);
    $("#scg").delay(45000).effect("bounce","highlight",2000);
    $("#sca").delay(51000).effect("bounce","highlight",2000);
    $("#scb").delay(52000).effect("bounce","highlight",2000);
    $("#scc").delay(53000).effect("bounce","highlight",2000);
    $("#scd").delay(55000).effect("bounce","highlight",2000);
    $("#sce").delay(56000).effect("bounce","highlight",2000);
    $("#scf").delay(57300).effect("bounce","highlight",2000);
    $("#scg").delay(61403).effect("bounce","highlight",2000);
    $("#sca").delay(67500).effect("bounce","highlight",2000);
    $("#scb").delay(68200).effect("bounce","highlight",2000);
    $("#scc").delay(69200).effect("bounce","highlight",2000);
    $("#scd").delay(71400).effect("bounce","highlight",2000);
    $("#sce").delay(72300).effect("bounce","highlight",2000);
    $("#scf").delay(73000).effect("bounce","highlight",2000);
    $("#scg").delay(77500).effect("bounce","highlight",2000);
    $("#au-sca").get(0).play();
}); 
```

问题是，只有`bounce`在工作，而不是`highlight`（这不是很遗憾，这只是一个愿望）。第二个和第三个“循环”不是在正确的时间触发，而是在一分钟左右之后触发。是否有任何已知的行之有效的方法来克服这两个障碍并同时使代码不那么突兀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:14:16.923

据我所知，jQuery UI 效果函数一次只产生一个效果 - 因此您指定的第二个参数实际上被解释为（显然）不存在的选项。

您的问题与[此](https://stackoverflow.com/questions/2344804/how-can-i-execute-multiple-simultaneous-jquery-effects)问题类似，其中答案实际上结合了您尝试结合的两种效果。我相信这个问题的答案正是你所需要的。

# asp.net - VS 2010 --- DropDownList：如何获取 ID 但显示不同的选项列

> ID：13276517
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:33.763
> 
> 标签：asp.net, sql, visual-studio-2010

我有一个快速的问题（希望很快）。我还在学习中，请多多包涵。

我正在尝试使 DDL 正常工作，其中我的下拉菜单向用户显示一列选项，但实际上，他们选择的选项将使用另一列中该特定选项的 DeviceID。这是我的数据源：

```
 <asp:SqlDataSource ID="RetrieveComputerSQL" runat="server" 
        ConnectionString="<%$ ConnectionStrings:SynInventory %>" 
        SelectCommand="SELECT DeviceID + ' ' + Computer as Combo,Computer as Computer,DeviceID AS DeviceID from Hardware"> 
```

现在硬件表有 2 个列。

DeviceID = 表中项目的 ID Computer = 连接到该 DeviceID 的机器类型

例如，Hardware 表如下所示：

```
>Computer (Column)        DeviceID (Column)
>------------------       ----------------------   
> Thin Client                      0
> Desktop                          1
> Laptop                           2 
```

现在，这是我的 DDL：

```
 <asp:DropDownList ID="ddlComputer" runat="server" AutoPostBack="true"
                    DataSourceID="RetrieveComputerSQL" DataTextField="Combo" DataValueField="Computer"                      
                    SelectedValue='<%# Bind("Computer") %>' AppendDataBoundItems="true"> 
```

我想要做的仍然是显示对象的“友好”名称，但实际上，在下拉框中获取所选对象的 DeviceID，然后将该值报告回我的主数据源（即：UPDATE MainAsset SET [site] = @Site,[os] = @os,[device] = @Computer WHERE [pk] = @pk") 其中 [device] 是我的硬件表。

我已经尝试了所有我能想到的方法，并以多种方式操纵了我的 RetrieveComputerSQL DS。我决定以“组合”选项结束，但我尝试过的任何方法似乎都不起作用。

任何建设性的想法或意见肯定会受到赞赏。希望这一切都有意义。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:22:02.877

除非我非常想念一些东西：

将您的设置`DataValueField`为“DeviceID”并将您的设置`DataTextField`为“计算机”。这应该如你所愿显示。

如果您希望在 DDL 顶部有一个虚拟条目（如果该列对于网格源中的值具有 null 值，这很有帮助），您可以这样做：

```
<asp:DropDownList ID="ddlComputer" runat="server" AutoPostBack="true"
                DataSourceID="RetrieveComputerSQL" DataTextField="Combo" DataValueField="Computer"                      
                SelectedValue='<%# Bind("Computer") %>' AppendDataBoundItems="true">
   <asp:ListItem Text="-- Select --" Value=""/>
</asp:DropDownList> 
```

# xpages - 多次部分刷新的运行时错误

> ID：13276521
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:48.160
> 
> 标签：xpages

每个帮助我让一个 XSP.partialRefreshGet 工作。这对我来说很好用。谢谢你。现在我需要多次刷新才能工作：

```
XSP.partialRefreshGet("#{txtRateType}", {
   onComplete: function() {
    XSP.partialRefreshGet("#{CurrentBalancesSection}", {
        onComplete: function() {
            XSP.partialRefreshGet("#{PricingSection}}", {});
        }
    });
 }
}); 
```

我收到运行时错误。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:29:10.737

你又错过了 id 部分（而且你有一个额外的花括号），布鲁斯:-)

```
XSP.partialRefreshGet("#{id:txtRateType}", {
   onComplete: function() {
    XSP.partialRefreshGet("#{id:CurrentBalancesSection}", {
        onComplete: function() {
            XSP.partialRefreshGet("#{id:PricingSection}", {});
        }
    });
 }
}); 
```

这是客户端 JS，功能需要客户端 ID。您使用 {id: 告诉 XPages 返回服务器端组件的客户端 ID。

# jsf - javax.el.PropertyNotFoundException 使用 jsf、jpa、Java EE

> ID：13276526
> 
> 赞同：0
> 
> 时间：2012-11-07T19:11:57.770
> 
> 标签：jsf, jakarta-ee, javabeans, el

我正在做一个小项目，在一切正常工作后突然我开始得到一个`javax.el.PropertyNotFoundException:`，但我仍然不知道是什么导致了问题，我对上一个工作版本之间的代码所做的唯一更改是一个新的 xhtml，文档，称为 categoryController。我真的不知道发生了什么，也不知道如何解决。有谁知道如何解决这个问题？

我做了一些研究，发现添加 beans.xml，但是，在问题发生之前我确实有 beans.xml。这是 beans.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

这是 categoryController bean：

```
@Named
@RequestScoped
public class CategoryController {

    @EJB
    private CategoryEJB categoryEjb;

    private Category category = new Category();
    private List<Category> categories = new ArrayList<Category>();

    // ------------------------------------------------------------- Constructor

    public CategoryController() {
    }

    // -------------------------------------------------------- Business Methods

    public String doCreateCategory()
    {
        category = categoryEjb.createCategory(category);
        categories = categoryEjb.findAllCategory();
        return "listCategory?faces-redirect=true";
    } 
```

这是被调用的形式：

```
 <h:form>
                <h1><h:outputText value="Create New Catergory"/></h1>
                <h:panelGrid columns="2">                    
                    <h:outputLabel value="Name:" for="name" />
                    <h:inputText id="name" value="#{categoryController.category.name}" title="Name" />
                    <h:outputLabel value="Description:" for="description" />
                    <h:inputText id="description" value="#{categoryController.category.description}" title="Description" />                    
                </h:panelGrid>
                <h:commandButton value="Create Category" action="#{categoryController.doCreateCategory()}"/>                
            </h:form> 
```

这是我得到的完整堆栈：

```
javax.el.PropertyNotFoundException: /product/createCategory.xhtml @15,103 value="#{categoryController.category.name}": Target Unreachable, identifier 'categoryController' resolved to null
    at com.sun.faces.facelets.el.TagValueExpression.getType(TagValueExpression.java:100)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:95)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIForm.processValidators(UIForm.java:253)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

编辑：

```
@Entity
@NamedQueries({
    @NamedQuery(name= "findAllCategory", query="SELECT c FROM Category c")   
})
public class Category implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int category_id;
    private String name;
    private String description;
    @OneToMany(mappedBy = "category_fk")
    private List<Product> product_fk;

    // ------------------------------------------------------------- Constructor

    public Category() {
    }

    public Category(String name, String description, List<Product> product_fk) {
        this.name = name;
        this.description = description;
        this.product_fk = product_fk;
    }    

    // ---------------------------------------------------- Getters and Setters

    public int getCategory_id() {
        return category_id;
    }

    public void setCategory_id(int category_id) {
        this.category_id = category_id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public List<Product> getProduct_fk() {
        return product_fk;
    }

    public void setProduct_fk(List<Product> product_fk) {
        this.product_fk = product_fk;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:28:21.777

例外情况是，找不到您的 bean 的属性。您的 bean 中的类别和类别对象中的字段名称是否具有正确且可见的 getter/setter 方法？

编辑：

我刚刚看到，PropertyNotFoundException 确实引用了 bean 本身，而不是 bean 中的字段。你的豆子有名字吗？您的 @Named 应该类似于在上下文中找到的 @Named("categoryController") 。

# php - 反转数字拼图

> ID：13276537
> 
> 赞同：0
> 
> 时间：2012-11-07T19:12:32.053
> 
> 标签：php, logic, puzzle

我正在努力自学更好地编程。其中一部分我一直在研究我在报纸和杂志上找到的谜题，并试图找到编程解决方案

今天我看到一个关于数字乘以 2-9 的数字时反转的谜题。给出的示例是 1089 * 9 = 9801。

我已经开始在 php 中编写一个程序来查找适用的数字并将它们添加到数组中。

首先，我创建了一个循环来循环遍历可能的数字。然后我反转每个数字并创建一个函数来比较编号和反转的数字。然后该函数返回符合条件的数字并将它们添加到数组中。

这是我目前所拥有的......

```
<?php

        function mul(){ // multiply number from loop

            for($i=2;$i<=9;$i++){

                $new = $num * $i;

                    if($new == $re){
                    return $new;    
                    }
                    else{
                    return;
                    }
            }
        }

        $arr =  array();

        for ($num = 1000; $num <10000; $num++) { //loop through possible numbers

                      $re =  strrev($num); // get reverse of number
                      func($re,$num); //multiply number and return correct numbers
                      $arr.push($new); //add to array??
         }
 ?> 
```

我对 php 还是很陌生，我发现理解编程，任何关于更合乎逻辑的方式来解决这个难题的指针将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:18:11.107

这是我的嵌套循环解决方案。又快又脏。

```
$result = array();
for ($i = 1000; $i < 5000; $i++) {
    for ($m = 2; $m < 10; $m++) {
        if ($i*$m == (int)strrev($i)) {
            $result[] = array($i, $m);
        }
    }
}
var_dump($result); 
```

我想扩展这一行：

```
if ($i*$m == (int) strrev($i)) { 
```

一方面是`$i*$m`，容易，乘法。

另一方面，我们有`(int)strrev($i)`，这意味着“接受`$i`，将其转换为字符串，然后将其反转。然后将其转换回`int`.

如果计算结果为真，则包含一个数组`$i`并将`m`其插入到`$result`数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T11:42:46.857

我也在寻找逻辑问题来解决为我的面试做准备。感谢分享这个问题。我已经解决了这个问题，但是使用了 Java。我使用了非常基本的概念。我希望你能理解并将其转换为 php。

```
public static boolean processNumber(int number)
{
    for(int i=2;i<=9;i++)
    {
        int reverseNumber=number*i;
        boolean status=checkReverse(reverseNumber,number);
        if(status)
        {
            return true;
        }
    }

    return false;
}

public static boolean checkReverse(int reverseNumber,int numberOriginal)
{
    int number=reverseNumber;
    int reverse=0,digit;
    do
    {
        digit=number%10;
        number=number/10;
        reverse=reverse*10+digit;
    }while(number>0);

    if(reverse==numberOriginal)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T18:51:39.450

```
//This is my little effort towards programming check if it satisfy your requirements 

$n = 1089;
$temp = $n;
$sum =0;
//reversing given number
while($n>1){
  $rem = $n%10;
  $sum = $sum*10 + $rem;
  $n = $n/10;
}
//checking for digit that satisfy criteria
for($i=0; $i<=9; $i++){
  if($i*$temp == $sum){
    echo "$temp * $i = $sum";
  }
} 
```

# c# - llblgen 更新表？

> ID：13276538
> 
> 赞同：0
> 
> 时间：2012-11-07T19:12:32.277
> 
> 标签：c#, .net-3.5, llblgenpro

只是我想知道

**更新表集（姓名，姓氏）值（'John'，'Locke'），其中 Id=1** llblgen 中等效的 sql 语句，我尝试了下面的代码，但它没有用。

```
 Entity e = new Entity();
            entity.Id = 1;
            entity.name = "John";
            entity.surname = "Locke";
            entity.Save(); 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:56:27.107

基本上你在上面所做的是创建一个全新的实体。要更新现有的，请使用：

```
Entity e = new Entity(1);
entity.name = "John";
entity.surname = "Locke";
entity.Save(); 
```

关键是第一行。当您使用[SelfServicing](http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Concepts/concepts_templatesets.htm)时，在该行中 LLBLGen 框架将尝试获取实体，如果它存在于 DB 中，则将数据检索到实体中，否则将实体视为新实体。由于实体存在于数据库中，实际更改的值（即获取的字段值与您实际设置的值不同）将用于 UPDATE sql 查询。

这在[文档](http://llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/hh_goto.htm#Using%20the%20generated%20code/SelfServicing/gencode_usingentityclasses.htm#Modifyinganentity)中进行了解释。

# asp.net-mvc-3 - ASP.Net MVC 远程验证提交不正确的 URL

> ID：13276540
> 
> 赞同：0
> 
> 时间：2012-11-07T19:12:43.160
> 
> 标签：asp.net-mvc-3

我正在关注如何实施远程验证的演练[。](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)远程验证方法按预期触发，但它请求的 url 错误。它正在请求

```
/Validator/IsUID_Available 
```

代替

```
http://localhost:23615/Validator/IsUID_Available. 
```

这会导致 404 not found 错误。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:47:22.037

对不起这是我的错！我错误地注册了 Remote 属性，如下所示：

```
[Remote("IsUID_Available", "ValidationController")] 
```

而不是像这样的正确方法

```
[Remote("IsUID_Available", "Validation")] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:20:46.840

我敢说你的网址是正确的。它只是给出一个应该正确解析的相对 url。我猜你的控制器有问题，或者你没有在路由表中正确注册你的控制器。

# c# - Outlook vsto 执行自定义发送消息

> ID：13276546
> 
> 赞同：1
> 
> 时间：2012-11-07T19:13:13.867
> 
> 标签：c#, outlook, add-in

我有一个 Outlook 加载项，可将自定义发送按钮添加到撰写检查器窗口中的 NewMailMessage 选项卡。单击此自定义按钮时，我想在实际发送之前对正在发送的电子邮件进行一些修改。如何从按钮单击事件中获取电子邮件？在 Outlook 2010 之前的旧版本中，我知道您可以通过编程方式获取“发送”`CommandBar`按钮并调用`Execute`它来模拟发送消息。但是，在 2010 及更高版本中，此方法已被弃用。MSDN 建议为功能区自定义实现 IRibbonExtensibility，但我是否需要为我的目的这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:44:35.827

我找到了答案：

```
if (this.Context is Outlook.Inspector)
{
    Outlook.Inspector oInsp = this.Context as Outlook.Inspector;
    if (oInsp.CurrentItem is Outlook.MailItem)
    {
        Outlook.MailItem oMail = oInsp.CurrentItem as Outlook.MailItem;
        ((Outlook._MailItem)oMail).Send();
    }
} 
```

# php - 自定义 PHP 会话类

> ID：13276556
> 
> 赞同：0
> 
> 时间：2012-11-07T19:13:54.997
> 
> 标签：php, database, oop, class, session

我想要做的是编写一个自定义 PHP 会话类，将会话存储在数据库中，而不使用`session_set_save_handler()`.

这样做的目的是让我可以轻松地使用存储数据`serialize()`并使用`unserialize()`.

我一直在寻找一整天，找不到关于这个主题的任何东西。任何人都可以帮助我入门或将我链接到有用的教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:22:31.533

你不需要内置的 PHP 会话，你可以自己设置 cookie，读取它并再次验证它，从那时起你就有了一个功能齐全的会话！

```
function createCookieString($id, $user, $created)
{
    $cookieData = array();
    $hash = $this->hashSession($id, $user, $created);

    $cookieData[] = $id;
    $cookieData[] = $user;
    $cookieData[] = $created;
    $cookieData[] = $hash;

    return implode(':', $cookieData);
}

function hashSession($id, $user, $created)
{
    $cookieSalt = 'Your Cookie Salt'; //google what a salt is in hashing if neccecary
    return md5($id.$user.$created.$cookieSalt);
}

function parseCookieString($string)
{
    return explode(':', $string);

} 
```

要设置 cookie，只需使用 php 的 setcookie 函数即可。

您只需将会话存储在数据库中。它通常非常简单，只是创建了一个带有 ID、用户 ID 的表（作为时间戳），你不需要哈希在你的数据库中，因为它是一个可重用的秘密。

随时问更多问题！

# java - Java 拆分分隔符

> ID：13276563
> 
> 赞同：3
> 
> 时间：2012-11-07T19:14:18.153
> 
> 标签：java, string, split

如果我想要一个可以用分隔符 // 分隔的分隔符，我该如何实现呢？

例如：

```
String str="i have a ball // do i /g f y" 
```

我希望分隔符为`"//"`，因此结果将是：

```
"do i /g f y" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T19:21:50.017

字符串`"//"`可以直接用作分隔符，不需要转义：

```
String[] data = str.split("//"); 
```

发生了不同的情况`"\\"`，该`'\'`字符在正则表达式中用作转义字符，反过来需要通过`'\'`在其前面放置另一个字符来对其进行转义：

```
String[] data = str.split("\\\\"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T19:25:06.417

如果您只需要尾巴，正如您在问题中指定的那样，那么您不需要拆分，而是：

```
result = str.substring(str.indexOf("//") + 2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T19:21:05.360

代码：

```
 String testString = "dog//cat//meow/ok";

    String[] tokens = testString.split("//");
    for(String token: tokens){
        System.out.println(token);
    } 
```

输出：

```
dog
cat
meow/ok 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T19:17:56.230

```
theString.split( "//" ); 
```

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String) )

由于 arg 是一个正则表达式，它可能需要一些转义，但这应该可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-19T16:47:56.507

这里不需要转义，因为代码的字符串带有“//”反斜杠而不是“\”正斜杠。

**这里的代码工作正常：**

```
String str="i have a ball // do i /g f y";
    String ss[]=str.split("//");
    System.out.println(ss[0]);
    System.out.println(ss[1]); 
```

**输出：**

> 我有一个球
> 
> 我/gfy

# c++ - 无符号和有符号类型的相等操作数行为

> ID：13276568
> 
> 赞同：4
> 
> 时间：2012-11-07T19:14:42.693
> 
> 标签：c++, c

> **可能重复：**
> [有符号/无符号比较](https://stackoverflow.com/questions/5416414/signed-unsigned-comparisons)

所以我有下面的代码，它将 unsigned int 设置为负数，然后将 unsigned int 与相同的负数进行比较。我得到的输出是“不等于”。我知道当将 unsigned int 设置为 -1 时，在这种情况下 unsigned int 的值设置为 255。

```
#include <stdint.h>
#include <iostream>

int main(int argc, char **argv)
{
  uint8_t test = 0;
  int8_t set = -1;

  test = set;

  if (test == set) {
    std::cout << "Equal";
  } else {
    std::cout << "Not Equal";
  }
} 
```

但是，是什么导致相等操作数返回 false？这似乎与类似问题有[符号/无符号比较](https://stackoverflow.com/questions/5416414/signed-unsigned-comparisons)的答案直接对比

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为通常的算术转换，其定义如下：
> 
> 如果任一操作数是 long double 类型，则另一个应转换为 long double。
> 
> 否则，如果任一操作数为双精度，则另一个应转换为双精度。
> 
> 否则，如果任一操作数为浮点数，则另一个应转换为浮点数。
> 
> 否则，应在两个操作数上执行积分提升 (4.5)。54)
> 
> 然后，如果其中一个操作数是 unsigned long，则另一个操作数应转换为 unsigned long。
> 
> 否则，如果一个操作数是 long int 而另一个是 unsigned int，则如果 long int 可以表示 unsigned int 的所有值，则 unsigned int 应转换为 long int；否则，两个操作数都应转换为 unsigned long int。
> 
> 否则，如果任一操作数为 long，则另一个应转换为 long。
> 
> 否则，如果任一操作数是无符号的，则另一个应转换为无符号。

因此，根据这个答案，由于两个操作数都是无符号的，另一个应该被转换为无符号，并且相等应该通过。但它显然没有通过，正如在这个问题中已经回答的那样，它们都被提升为有符号整数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T19:20:42.063

这确实是标准行为。与和大多数其他运算符一起使用时，小于`int`提升到的类型。所以被提升为，值为 255。并被提升为，但它是一个负数，所以它的值，无论是在提升之前还是之后，都是 -1。由于 255 不等于 -1，因此比较得出.`int``==``test``int``set``int``false`

寓意是：在比较中混合有符号和无符号类型时要小心。

# c# - ReferenceError：视图中未定义模型

> ID：13276570
> 
> 赞同：1
> 
> 时间：2012-11-07T19:14:45.363
> 
> 标签：c#, jquery, asp.net-mvc

在尝试传递模型以使用 JavaScript 查看和打印它的文本值时，我收到以下错误“ReferenceError: Cat is not defined”。为什么会出现参考错误以及如何解决？

模型：

```
public class Animal
{
    public List<SelectListItem> AnimalList { get; set; }

    public Animal()
    {
        SelectListItem animalItem = new SelectListItem();
        animalItem.Text = "Cat";
        animalItem.Value = "1";

        AnimalList = new List<SelectListItem>();
        AnimalList.Add(animalItem);
    }
} 
```

控制器：

```
 public ActionResult Index()
    {
        var model = new Animal();

        return View(model);
    } 
```

看法：

```
<script type="text/javascript">
$(document).ready(function () {
    @foreach (var item in Model.AnimalList)
    {
        <text>
            console.log(@item.Text);
        </text>
    }
});
</script> 
```

顺便一提。如果我将文本设置为一个数字，例如 0，它就可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:18:19.937

```
<text>
    console.log("@item.Text");
</text> 
```

需要在@item.Text 周围加上引号。

`cat`当你想要一个字符串时，JS 认为你想要一个变量`"cat"`

# java - 如何从 ArrayList 中获取每个字符串

> ID：13276574
> 
> 赞同：-4
> 
> 时间：2012-11-07T19:14:53.457
> 
> 标签：java, loops, arraylist

我想从我的 ArrayList 中获取一个字符串，但它包含来自我的输入文件的行。如何正确拆分它们以拥有所有元素？

我的程序如下所示：

```
private static ArrayList<String> lista;

static void fileReading() {
    inp = new LineNumberReader(new BufferedReader(new InputStreamReader(new FileInputStream(inFileNev), "ISO8859-1")));

    String sor;
    while ((sor = inp.readLine()) != null) {

    lista.add(sor);
    lista.add(System.getProperty("line.separator"));   
} 
```

在另一种方法中，我如何让这个列表只列出一个字符串而不是行？

编辑：

Vineet Verma 你的代码很棒，但它给了我一个很棒的字符串，我需要知道其中字符串的索引，稍后替换它们，我不能只用一个字符串完成它。

如果我使用它，它仍然无法正常工作：

> ```
>  String[] temp=null;
> for(String s : lista) {
>    temp = s.split("\\W+"); 
> } 
> ```
> 
> System.out.println(temp);

我得到：[Ljava.lang.String;@6ef53890

我得到了很多：[Ljava.lang.String;@6ef53890

如果我使用这个：

> ```
>  String str ="" ;
>     for(int i=0; i<lista.size(); i++){
>      str+=lista.get(i)+" ";
> 
>   String[] temp = new String[str.length()];
>   for(int i=0; i < str.length(); i++) {
>        temp[i]=str.valueOf(i);
>        System.out.println(temp[i]);         
>   } 
> ```

我只得到数字，无法弄清楚如何从 str 获取字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:22:19.100

您需要的是**在单词边界处拆分**。您可以将以下示例代码用于简单案例（这只是一个示例，可能并不准确。阅读[本教程](http://docs.oracle.com/javase/tutorial/essential/regex/bounds.html)以获取满足您需求的更具体的正则表达式）。

```
String [] words = line.split("\\W+"); 
```

注意：字边界是特定于语言的，如果您确实需要 i18n 安全拆分，则需要使用 i18n 库。

在 google 中搜索“在单词边界处分割”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:56:51.267

使用此代码解决您的问题：

在另一种方法

```
public String convertToString(ArrayList<String> al)
{
String str ="" ;
for(int i=0; i<al.size;i++){str+=al.get(i)+" ";}
return str;
} 
```

如果我正确理解您的查询，那么这就是解决方案

# c# - 如何获取登录页面后面的网页内容？

> ID：13276576
> 
> 赞同：0
> 
> 时间：2012-11-07T19:15:02.043
> 
> 标签：c#, https

这有效，期待，我正在下载登录页面的字符串，而不是实际页面（url 变量）。

如何获取登录后页面的内容？

```
var credentials = new NetworkCredential { UserName = "xxxxxx", Password = "yyyyyy" };
using (var client = new WebClient())
{
    client.Credentials = credentials;

    string page = client.DownloadString(url);

    if (page.Contains("cheetah"))
    {
         MessageBox.Show("cheetah exists");
    }
    else
    {
         MessageBox.Show("NOPE");
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:23:11.997

尝试

```
string page = client.DownloadData(url); 
```

# mono - Reflexil 反混淆错误

> ID：13276578
> 
> 赞同：1
> 
> 时间：2012-11-07T19:15:15.647
> 
> 标签：mono, reflector, deobfuscation, reflexil

我正在尝试修改 .net 应用程序，但我对此并不陌生。第一步是尝试使用 reflexil 对代码进行反混淆，我收到以下错误：

*Reflexil 无法清理此程序集：成员 'System.RuntimeTypeHandle "bunch of obfustatcated jibberish"(System.Int32)' 在另一个模块中声明，需要导入*

该应用程序附带了一堆它肯定使用的 dll，所以我假设声明在其中一个文件中。如何导入此模块？

如果它有用，reflexil 说它被 .NET Reactor 4.1 混淆了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:51:46.397

我决定尝试 de4not 去混淆，它没有这个问题。

# backbone.js - 骨干 _.bind 不起作用

> ID：13276582
> 
> 赞同：1
> 
> 时间：2012-11-07T19:15:28.510
> 
> 标签：backbone.js, underscore.js

在我看来，类初始化函数`_.bind(this.appendSection, this)`不起作用，但`_.bindAll(this, 'appendSection')`有效。我很迷茫...

这是代码：

```
TemplateBuilder.Views.TemplateView = Backbone.View.extend({
        el: $('div#evalTemplate'),

        initialize: function(){
            this.collection.on('reset', this.render, this);
            //_.bind(this.appendSection, this);
            _.bindAll(this, 'appendSection');                
        },

        events: {
            'click button#addSection': 'addSection'
        },

        render: function(){
            this.collection.each(this.appendSection);
            return this;
        },

        appendSection: function(section){                
            var view = new TemplateBuilder.Views.InstructionView({model: section});
            this.$el.append(view.render().el);
        },

        addSection: function(){
            var newSection = new TemplateBuilder.Models.Section();                
            this.collection.add(newSection);
            this.appendSection(newSection);
        },
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T19:59:37.443

来自[精美手册](http://underscorejs.org/#bind)：

> **绑定** `_.bind(function, object, [*arguments])`
> 
> 将函数绑定到对象，这意味着无论何时调用该函数，*this*的值都将是**object**。[...]
> 
> ```
> var func = function(greeting){ return greeting + ': ' + this.name };
> func = _.bind(func, {name : 'moe'}, 'hi');
> func();
> => 'hi: moe' 
> ```

不幸的是，手册不是很好，您必须查看示例代码所暗示的内容：

```
func = _.bind(func, ...); 
```

`_.bind`返回绑定函数，它不会就地修改它。你必须这样说：

```
this.appendSection = _.bind(this.appendSection, this); 
```

如果你想使用`_.bind`. [`_.bindAll`](http://underscorejs.org/#bindAll)另一方面，将方法绑定到位。这里有更多关于这些方法[的](https://stackoverflow.com/a/7087753/479863)讨论。

# wordpress - 致命错误：在 Wordpress 的 index.php 中调用未定义的函数 add_filter()

> ID：13276583
> 
> 赞同：2
> 
> 时间：2012-11-07T19:15:34.270
> 
> 标签：wordpress, wordpress-theming, fatal-error, add-filter

我想通过用户浏览器动态更改我的 wordpress 主题。所以我在网上找到了这段代码并将其添加到我的 index.php 文件中

```
add_filter('template', 'switch_theme_by_browser');
add_filter('stylesheet', 'switch_theme_by_browser');

function switch_theme_by_browser($theme) {

    $browser = $_SERVER['HTTP_USER_AGENT'];

    if(preg_match('/MSIE/i',$browser) && !preg_match('/Opera/i',$browser))
    {
        $theme = "twentyeleven";
    }
    elseif(preg_match('/Firefox/i',$browser))
    {
        $theme = "twentyten";
    }
    elseif(preg_match('/Chrome/i',$browser))
    {
        $theme = "Boxoffice";
    }

    return $theme;
} 
```

之后它向我显示“致命错误：在第 17 行的 /home/xxx/public_html/domain.com/index.php 中调用未定义函数 add_filter()”

据我了解，“add_filter()”应该是一个内置于 wordpress 的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T03:07:30.593

在 wordpress 根目录中，放在wp-settings.php 文件`require( ABSPATH . WPINC . '/plugin.php' );`之前`require( ABSPATH . WPINC . '/functions.php' );`。[我在http://wordpress.org/support/topic/fatal-error-call-to-undefined-function-add_filter](http://wordpress.org/support/topic/fatal-error-call-to-undefined-function-add_filter)验证了这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T21:50:47.730

正如道森所说，这需要放入您的`/wp-content/themes/[theme]/functions.php`文件中。

# oledb - 插入值时损坏 Access 数据库

> ID：13276586
> 
> 赞同：2
> 
> 时间：2012-11-07T19:15:37.167
> 
> 标签：oledb, ms-access-2010, adox

最近，一个程序创建了一个Access db（我们下游合作伙伴的要求），添加了一个包含所有备忘录列的表，然后插入了一堆停止工作的记录。奇怪的是，我可以看到环境没有任何变化，任何差异中也没有任何可能影响它的变化。此外，这在我尝试过的任何机器上都可以重现，无论它是否有 Office，是否有 Office，无论是 32 位还是 64 位。

问题是当您在程序运行后打开数据库时，目标表是空的，而是有一个包含一堆行的 MSysCompactError 表。

这是蒸馏代码：

```
var connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=corrupt.mdb;Jet OLEDB:Engine Type=5";

// create the db and make a table
var cat = new ADOX.Catalog();
try
{
    cat.Create(connectionString);

    var tbl = new ADOX.Table();
    try
    {
        tbl.Name = "tbl";
        tbl.Columns.Append("a", ADOX.DataTypeEnum.adLongVarWChar);
        cat.Tables.Append(tbl);
    }
    finally
    {
        Marshal.ReleaseComObject(tbl);
    }
}
finally
{
    cat.ActiveConnection.Close();
    Marshal.ReleaseComObject(cat);
}

using (var connection = new OleDbConnection(connectionString))
{
    connection.Open();

    // insert a value
    using (var cmd = new OleDbCommand("INSERT INTO [tbl] VALUES ( 'x' )", connection))
        cmd.ExecuteNonQuery();
} 
```

以下是我偶然发现的一些解决方法：

1.  如果在创建表和插入值之间插入断点（上面的第 28 行），然后使用 Access 打开 mdb 并再次关闭它，那么当应用程序继续运行时，它不会损坏数据库。
2.  将引擎类型从 5 更改为 4（第 1 行）将创建一个未损坏的 mdb。您最终会得到一个过时的 mdb 版本，但该表有值并且没有 MSysCompactError。请注意，我尝试过以这种方式创建数据库，然后最后以编程方式将其升级到 5，但没有成功。我最终在最新版本中得到了一个损坏的数据库。
3.  `adLongVarWChar`如果您通过将第13 行更改为 将备注更改为文本字段`adVarWChar`，则数据库没有损坏。不过，您最终`text`会得到 db 中的字段而不是`memo`。

最后一点：在我的旅行中，我看到 MSysCompactError 与压缩数据库有关，但我没有做任何明确的事情来使数据库紧凑。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:48:14.117

正如我对 HasUp 的回复：根据 MS 支持，不推荐以编程方式创建 Jet 数据库。我最终签入了一个空的模型数据库，然后在需要新的时候复制它。有关详细信息，请参阅[http://support.microsoft.com/kb/318559](http://support.microsoft.com/kb/318559)。

# c# - DialogResult.Ok 像自定义类

> ID：13276587
> 
> 赞同：1
> 
> 时间：2012-11-07T19:15:47.310
> 
> 标签：c#

我正在尝试开发一个自定义输入对话框。在其构造函数中，我想采用如下参数-

```
PromptType.Question
PromptType.Information
PromptType.Feedback
//etc....

private void buttonTest_Click(object sender, System.EventArgs e) 
{
   InputBoxResult result = InputBox.Show("Some title",PromptType.Question);
} 
```

我该怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:19:13.507

你想要的是一个枚举：

```
public enum PromtType
{
    Question,
    Information,
    Feedback
}

public class InputBox
{
    public static void Show(PromtType type)
    {
        //...
    }
}

InputBox.Show(PromtType.Question); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:28:24.677

您可以使用枚举方法，并在 switch 语句中捕获选定的选项

```
public enum PromtType
{
    Question,
    Information,
    Feedback
}

public class InputBox
{
    public static void Show(PromtType type)
    {
        switch(type)
       {
           case PromtType.Question:
           //do question things here
           break;
           case PromtType.Information:
           //do information things here
           break;
           case PromtType.Feedback:
           //do feedback things here
           break;
       }
    }
}

InputBox.Show(PromtType.Question); 
```

# css - 更改流体图像纵横比 css

> ID：13276588
> 
> 赞同：0
> 
> 时间：2012-11-07T19:15:48.883
> 
> 标签：css, image, fluid-layout, scaletransform

我正在尝试使用 css 将 6 个图像并排放置，整个图像应该能够在大多数显示器中很好地缩放（目前除了移动设备），所以我做了这个： [http://pelloponisos.telesto .gr/galleryTest/test/gallery.php#](http://pelloponisos.telesto.gr/galleryTest/test/gallery.php#) （显然我正在尝试制作另一个轮播）

我的大多数图像的宽度都大于高度，所以当我缩放它们时，我只是将 width:x% 放在 li 容器中，并将 100% 用于图像宽度。

但是第六张图像不同，它会引起很多麻烦我也尝试设置高度，但您只能根据两者之一缩放图像。

到目前为止唯一有效的是在 ul 中放置一个静态高度，然后在宽度和高度上进行缩放，但它不是一个流体网格。

有没有办法让所有 li 元素都具有流动的高度，然后根据它缩放所有图像？或者如果没有，有什么方法可以制作与我在css中指定的比例不同的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:55:33.100

我稍微精简了你的代码，但这似乎更接近这个想法。诀窍是在容器中设置宽度（.upper ul li），然后为图像使用：max-width:100%; 高度：自动。此外，填充现在以 % 为单位。

```
 #carousel{
            position:relative;
            }
            #wrapper{
            margin:0 auto;
            }

            #slides{
            width: 100%;
            }
            .upper ul li{
            width: 200px;
            max-width: 100%;
            list-style:none outside none;
            float:left;
            padding-bottom:5px;
            padding:2%; 
            }
            img.galleryThumbnail{
            max-width:100%;
            height:auto;
            }
            .info{
            display:none;
            }

            #buttons img{
            position:absolute;
            top:90px;
            }
            #buttons #prev img{
            position:absolute;
            left:29px;}
            #buttons #next img{
            position:absolute;
            right:21px;
            } 
```

# java - JDK 中的 Rhino 有什么用？

> ID：13276590
> 
> 赞同：0
> 
> 时间：2012-11-07T19:15:51.990
> 
> 标签：java, javascript, rhino

`Rhino`是`JavaScript`运行在 JVM 之上的解释器。我猜它对`JavaScript`. 现在我们有了`Node.js`. 所以我想知道是否`Rhino`仍然相关以及它对什么有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:19:03.670

它只是提供了一种在 JVM 中运行 Javascript 的方法。因此，它为您提供[了在 JVM 之上的另一种实现选择，而](http://en.wikipedia.org/wiki/List_of_JVM_languages)不是 Java 语言（以类似于 JRuby、Scala、Groovy 等的方式）。您可以使用 Javascript 编写完整的解决方案，或者与 Java（或任何其他 JVM 语言）混合/匹配

请注意，这并不特定于“服务器端”或任何此类部署选择。

根据个人经验，我使用它[在 Ant 部署中提供简单的脚本](http://ant.apache.org/manual/Tasks/script.html)，并为使用我编写的 Java 应用程序/工具集的客户提供开箱即用的简单脚本语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:29:09.917

Rhino 也被[HttpUnit 库](http://httpunit.sourceforge.net/)使用，它可以在单元测试中用于模拟 Web 浏览器，用于测试网站。它为库提供 JavaScript 支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T13:26:07.420

我使用 Javascript 和 Rhino 作为我用 Java 编写的 MMORPG 服务器的脚本语言。它允许我在 Javascript 中实现 NPC 脚本、项目使用脚本、事件触发器和其他服务器端交互功能，而无需接触服务器的 Java 部分。

在 Javascript 中实现这些功能使它们的语法更易于编写和阅读。特别是因为我让服务器的 Java 部分在将它们发送到脚本引擎之前自动将任何琐碎的样板代码添加到脚本源代码中。这进一步简化了 javascript 语法。

它还允许更清晰地分离引擎和内容。

我还添加了一个 Javascript 管理 shell，它允许我在正在运行的服务器上运行任何 Javascript 代码。这已被证明是一个非常有用的测试和调试工具，我希望它以后会成为一个非常强大的管理工具。

当然，我也可以使用任何其他脚本语言，例如在游戏开发中经常用作脚本语言的 Lua。但是 Rhino 是开箱即用的，所以我不需要任何额外的 3rd 方依赖项。另外，我的客户端是一个 HTML5/Javascript 应用程序，所以我在项目中没有另一种编程语言。请注意，虽然客户端和服务端内容都使用 JS，但它们之间并没有共享代码——它们实际上是在系统架构的两端，并且通过多层间接进行交互，因此没有理由共享代码。

# java - 如何在 StdOut.printf (JAVA) 中使用整数 n

> ID：13276595
> 
> 赞同：1
> 
> 时间：2012-11-07T19:16:10.927
> 
> 标签：java, format, printf

如果我想用 n 替换 10（其中 int n=10），我该怎么写：

```
StdOut.printf("%10s","Hello"); 
```

我试着写：

```
int n=10;
StdOut.printf("%ns","Hello"); 
```

但这是错误的.. 解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:19:19.933

你试过这个吗： -

```
System.out.printf("%" + n + "s","Hello"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:19:30.180

尝试使用：-

```
 int n=10;
 StdOut.printf("%" + n + "s","Hello"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:21:28.897

你可以试试这段代码：

```
 int n=10;
    System.out.println("$n$s".replaceAll("$n$", n+"")); 
```

这将简单地替换所有值。

# php - 使用 php 会话在多步表单上存储复选框

> ID：13276598
> 
> 赞同：1
> 
> 时间：2012-11-07T19:16:14.167
> 
> 标签：php, forms

我有一个分三个步骤的表单，从第 1 步到第 2 步有一个复选框，我想将复选框值保留在会话中，并且即使用户转到表单的第 3 步，也要显示它是选中还是未选中然后回到第二步，现在在提交表单时，我在 $_SESSION vars 中拥有所有 $_POST 变量，但我无法使用复选框，这就是我现在得到的：

```
 <input type="checkbox" value="<?php  echo isset($_POST['afficher_ddn'])? "1":"0";  ?>"
   style="margin-left: 20px;" name="afficher_ddn" id="afficher_ddn" 
<?php echo $_SESSION['afficher_ddn']=="1" ? "checked" : ""; ?> /> 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:24:55.670

```
<input type="checkbox" value="1" style="margin-left: 20px;" name="afficher_ddn" id="afficher_ddn" 
<?php echo isset($_SESSION['afficher_ddn']) && $_SESSION['afficher_ddn'] == "1" ? 'checked="checked"' : ''; ?> /> 
```

一方面，您不会更改复选框的值。如果未选中，则不会传递给 post vars。请参见此处：[<input type="checkbox" /> 是否仅在选中后才发布数据？](https://stackoverflow.com/questions/11424037/does-input-type-checkbox-only-post-data-if-its-checked)

现在，检查的当前标准是`checked="checked"`我不知道这个标准在哪里或为什么成为我工作的公司的一个标准，但这是我们所做的，所以我在这里转发。

如果此处提供的代码对您不起作用，我会 var_dump($_SESSION) 以确保它已设置，并在诸如 firebug (firefox) 或 chrome 中的开发人员工具之类的东西中检查实际的 HTML。有时会发生愚蠢的事情，checked="checked" 实际上是在 html 中设置的，但不会显示在浏览器中。在那些时候，我通常会拔出一些头发并清除缓存。然后它通常会清除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:30:50.073

您的代码很好。在会话中传递值时可能存在一些问题，因为我正在手动检查代码，它工作正常：使用 print_r($_SESSION) 进行测试并发布输出；如果可能，请提供所有表格：

```
Try Below Code:

   <input type="checkbox" value="1"
   style="margin-left: 20px;" name="afficher_ddn" id="ddn" 
<?php echo $_SESSION['afficher_ddn']=="1" ? "checked" : ""; ?> /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:22:19.623

单独试试这个例子

**将页面 test.php 设为：**

```
 <?php
    session_start();
    ?>
    <form methos='post' method='post' action='test1.php'>
       <input type="checkbox" value="1"
       style="margin-left: 20px;" name="afficher_ddn" id="ddn"
    <?php echo $_SESSION['afficher_ddn']=="1" ? "checked" : ""; ?> /><br>
Name:<input type='text' name='f1' value='<?php echo $_SESSION['f1'] ?>' ><br>
Select:<select name='s1'>
<option value="" <?php echo $_SESSION['s1']=="" ? "selected" : ""; ?>></option>
<option value="1" <?php echo $_SESSION['s1']=="1" ? "selected" : ""; ?>>1</option>
<option value="2" <?php echo $_SESSION['s1']=="1" ? "selected" : ""; ?>>2</option>
</select><br>
Test:
<textarea name='tex1'><?php echo $_SESSION['tex1']; ?></textarea>

    <input type='submit'  value='submit'>
    </form> 
```

**制作第二页 test1.php 为：**

```
 <?php
    session_start();
    print_r($_POST);
    echo $_SESSION['afficher_ddn']=$_POST['afficher_ddn'];
echo $_SESSION['f1']=$_POST['f1'];
echo $_SESSION['s1']=$_POST['s1'];
echo $_SESSION['tex1']=$_POST['tex1'];
    ?>
    <form methos='post' action='third.php'>

    <a href='test.php'>Step1</a>
    </form> 
```

**并检查**

# ios - 子视图 z 位置高于窗口中的所有视图

> ID：13276599
> 
> 赞同：1
> 
> 时间：2012-11-07T19:16:17.853
> 
> 标签：ios, quartz-core

我认为这是不可能的，但我希望有人找到了解决方法。我有一个我们会调用的视图`VIEW0`和另一个调用的视图`VIEW1`。

`zPositon`of`VIEW0`是is所以它`zPosition = 1;`在下面。`VIEW1``Position = 0``VIEW0`

在`VIEW1`我有一些子视图中，我希望其中一个子视图高于`zPosition`so`VIEW0`的`VIEW0`阴影不会投射到特定的子视图上，但它会投射到所有其他子视图上。

我已经尝试设置子视图`zPosition = 2`，但这似乎并没有将它放在`VIEW0`.

**我有点预料到这是因为它们是子视图，但是有没有人有任何建议从`VIEW1`上面放置子视图`VIEW0`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:18:22.667

不要更改 z 顺序，而是将要位于 VIEW1 上方的子视图移动为 VIEW1 而不是 VIEW0 的子视图

由于 VIEW1 在 VIEW0 之上，那么 VIEW0 的所有子视图都将低于 VIEW1 的任何子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:26:45.883

我有同样的问题。我通过在需要时更改子视图的父级来解决它。子视图对象保持不变，但它获得不同的父级和位置，仅此而已。

```
[subViewObj removeFromSuperview]; 
```

和

```
[superViewObj addSubview:subViewObj]; 
```

然后`subViewObj`像这样设置位置：

```
subViewObj.frame = CGRectMake(xStart, yStart, width, height); 
```

# c# - c# 在 SqlDataAdapter 中使用 Parameters.AddWithValue

> ID：13276602
> 
> 赞同：36
> 
> 时间：2012-11-07T19:16:20.477
> 
> 标签：c#, parameters, ado.net, sqldataadapter

如何将 Parameters.AddWithValue 与 SqlDataAdapter 一起使用。下面搜索代码。

```
var da = new SqlDataAdapter("SELECT * FROM annotations WHERE annotation LIKE '%"+txtSearch.Text+"%'", _mssqlCon.connection);
var dt = new DataTable();
da.Fill(dt); 
```

我重写了这样的代码：

```
SqlDataAdapter da;
da = new SqlDataAdapter("SELECT * FROM annotations WHERE annotation LIKE '%@search%'", _mssqlCon.connection);
da.SelectCommand.Parameters.AddWithValue("@search",txtSearch.Text);
var dt = new DataTable();
da.Fill(dt); 
```

但它失败了。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-07T19:20:11.203

用于初始化**SqlDataAdapter**的字符串成为SqlDataAdapter`CommandText`的[SelectCommand](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.selectcommand(v=vs.110).aspx)属性。
您可以使用此代码向该命令添加参数

```
da = new SqlDataAdapter("SELECT * FROM annotations WHERE annotation LIKE @search",
                        _mssqlCon.connection);
da.SelectCommand.Parameters.AddWithValue("@search","%" + txtSearch.Text + "%"); 
```

*   首先，删除参数占位符周围的单引号。
*   二、直接在AddWithValue的Value参数中添加通配符

您已要求使用**AddWithValue**，但请记住，虽然它是一个有用的快捷方式，但也有许多缺点，而且都有据可查。

*   第一：[我们可以停止使用 AddWithValue() 了吗？](http://blogs.msmvps.com/jcoehoorn/blog/2014/05/12/can-we-stop-using-addwithvalue-already/)作者在哪里讨论*AddWithValue*如何在您的查询中返回错误结果
*   第二：[数据访问代码如何影响数据库性能](http://msdn.microsoft.com/en-us/magazine/ee236412.aspx)，作者提出了 *AddWithValue存在严重性能问题的证据*

因此，没有**AddWithValue**并使用[Object 和 Collection Initializers](http://msdn.microsoft.com/en-us/library/bb384062.aspx)语法的相同代码可以写成

```
da = new SqlDataAdapter("SELECT * FROM annotations WHERE annotation LIKE @search",
                        _mssqlCon.connection);
da.SelectCommand.Parameters.Add(new SqlParameter
{
    ParameterName = "@search",
    Value = "%" + txtSearch.Text + "%",
    SqlDbType = SqlDbType.NVarChar,
    Size = 2000  // Assuming a 2000 char size of the field annotation (-1 for MAX)
}); 
```

并且，上面的一个更加简化和一个衬里版本是：

```
da.SelectCommand.Parameters.Add("@search",SqlDbType.NVarChar,2000).Value = "%" + txtSearch.Text + "%"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-25T08:01:34.007

使用`da.SelectCommand.Parameters.Add()`而不是`cmd.Parameters.Add()`，这是一个处理带有两个参数的存储过程的示例，第二个是一个可为空的 int 参数：

```
public DataTable GetData(int par1, int? par2)
{
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        using (SqlDataAdapter da = new SqlDataAdapter())
        {
            string sql = "StoredProcedure_name";
            da.SelectCommand = new SqlCommand(sql, conn);
            da.SelectCommand.CommandType = CommandType.StoredProcedure;

            da.SelectCommand.Parameters.Add("@Par1", SqlDbType.Int).Value = par1;
            da.SelectCommand.Parameters.Add("@Par2", SqlDbType.Int).Value = (object)par2?? DBNull.Value;

            DataSet ds = new DataSet();
            da.Fill(ds, "SourceTable_Name");

            DataTable dt = ds.Tables["SourceTable_Name"];

            //foreach (DataRow row in dt.Rows)
            //{
            //You can even manipulate your data here
            //}
            return dt;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T06:47:09.577

试试这个：

```
mySearchString = "Select * From test Where ([title] LIKE '%' + @title + '%')";
cmd.Parameters.Add("@title", SqlDbType.VarChar, 120);
cmd.Parameters("@title").Value = TextBox1.Text; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-04T12:23:32.007

我使用中继器来显示数据

```
int queryString =int.Parse(Request.QueryString["Id"]);

SqlConnection conn =new SqlConnection("server=.; Database=Northwind; 
Integrated Security=true;");

try{
conn.Open();

SqlDataAdapter dataAdapter = new SqlDataAdapter("SELECT ProductID, ProductName, UnitPrice, CategoryID FROM Products WHERE CategoryID =@CategoryID", conn);

dataAdapter.SelectCommand.Parameters.Add("@CategoryID", queryString);
                        DataSet dataSet = new DataSet();
                        dataAdapter.Fill(dataSet);
                        QueryStringProductListRepeater.DataSource = dataSet;
                        QueryStringProductListRepeater.DataBind();
}

catch{
Response.Write("QueryStringProductListRepeater");
}

finally{
conn.Close();
} 
```

# css - Rails：样式表/视图问题？尽管在浏览器中查看有源代码，但屏幕上没有显示任何内容

> ID：13276603
> 
> 赞同：0
> 
> 时间：2012-11-07T19:16:36.700
> 
> 标签：css, ruby-on-rails, ruby, views

我有一个带有许多局部视图的 Rails 应用程序，每个局部视图都是视图中的一个部分（一个分页网站）。我已将所有资产放在正确的位置等。下面是实际页面外观（在导轨之外）的屏幕截图（标题，然后是您可以看到的第一部分，下面还有部分等）。

![在此处输入图像描述](../Images/cfc58914500e8ded4e8867972de8b2c8.png)

然而，这是在 Rails 中完成时的显示方式 ![在此处输入图像描述](../Images/8c80ef1bd1286b2d2c935033fe78728d.png)

由于某种原因，没有显示任何图像，也没有显示任何内容。当我不包含样式表时，所有内容（写作）都很好。当我包含样式表时，一切都消失了，全是白色的。但是那里有内容，因为我可以向上/向下滚动。

下面是我的文件结构的截图 ![在此处输入图像描述](../Images/3c1c8da5e0a0b56d657291e8b477b093.png)

我基本上将所有图像都放在图像文件夹中，但图像文件夹中有子文件夹。所以：

```
assets (folder)
 images (folder)
  section_1 (folder)
   image.png (file) 
```

在我的 css 中，因为我的 css 文件位于 stylesheets 文件夹中，所以我按如下方式调用我的 url：

```
background-image:url("../images/section_1/image.png"); 
```

至于我的观点，它基本上是一个渲染每个部分（部分）的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:38:18.190

尝试 `background-image:url("section_1/image.png");`

这适用于我的 Rails 项目。但是，我使用的是指南针，所以可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:19:41.420

我知道问题是什么。但我还有一个问题。解决方案。从任何地方调用图像时，即使您有像我这样的子目录，您也只需按如下方式调用 url：

```
background-image:url("assets/header/header_bg.png") 
```

因此，出于某种原因，您基本上省略了 images 文件夹。

我仍然遇到的问题是路由问题。在我的资产文件夹中，我有一个名为 fonts 的文件夹。在这个文件夹中，我有许多文件夹，每个文件夹中都有不同的字体（.eof，.ttf.svg）通常的字体文件。

当我输入这些文件存储位置的确切 url 时，我得到一个路由错误。

我的样式表文件夹中还有一个名为 fonts.css 的文件。如果我在 url`localhost:3000/assets/fonts`中输入字体文件夹，则会出现路由错误。

无论如何，路由文件中是否有我可以正确路由应用程序？

对于图像和字体？

# android - Android：以编程方式添加多个视图

> ID：13276604
> 
> 赞同：0
> 
> 时间：2012-11-07T19:16:41.363
> 
> 标签：android, arrays, view

我想以编程方式添加一个围绕 TextView 和 Button 的 LinearLayout。我希望它采用一个字符串数组，然后使用字符串数组的长度，添加那么多 TextView，每个都有自己的按钮。

所以首先：

```
String [] s = { .... the values ....}
int sL = s.length;
TextView t1 = new TextView (this);
// then somehow create t2, t3... etc. matching the length of the String array. 
```

这是最好的方法还是有其他方法可以做到这一点？在某些情况下，它是一个测验应用程序，我在资源中创建了一个类别列表作为值，我试图以编程方式让我的应用程序创建与类别一样多的 TextView，然后将每个 TextView 设置为每个类别，然后获取每个按钮将用户带到该类别的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:23:40.267

您正在正确启动它，只需执行一个 for 循环并将文本视图添加到您的线性布局。

```
// You linearlayout in which you want your textview
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.mylayout);
linearLayout.setBackgroundColor(Color.TRANSPARENT);

String [] s = { .... the values ....}
int sL = s.length;
TextView textView = null;

// For later use if you'd like
ArrayList<TextView> tViews = new ArrayList<TextView>();

for (int i = 0; i < sL; i++)
{
    textView = new TextView(this);
    textView.setText(s[i]);
    linearLayout.addView(textView);
    tViews.add(textView);
} 
```

这种做法没有错。如果您想稍后使用这些文本视图（为它们设置文本或其他内容）将它们存储在某种数组中。编辑代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:24:48.590

您可以执行以下操作：

```
for(int i=0;i<s.length;i++){
  TextView t=new TextView(this);
  t.setText(s[i]);
  yourLinearLayout.addView(t);
} 
```

但我真的认为使用 ListView 会更好地提高性能；）

# windows-8 - Windows 应用商店应用程序：我应该使用 ListBox 还是 ListView？

> ID：13276606
> 
> 赞同：7
> 
> 时间：2012-11-07T19:16:45.933
> 
> 标签：windows-8, windows-store-apps

我有一个关于 Windows 应用商店应用的问题：

有什么区别：

*   `ListBox`
*   `ListView`

我想要一个不同的列表`TextBlocks`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T21:39:20.493

更多 Windows-8 App 风格的控件是`ListView`. 它具有滚动等内置功能。`ListBox`除了没有很好的滚动功能外，它的功能基本相同。

请参阅[此处](http://geekswithblogs.net/WinAZ/archive/2012/02/13/windows-8-listbox-2-listview.aspx)以获得更深入的治疗。

# javascript - Javascript SOAP 请求，返回字符串

> ID：13276618
> 
> 赞同：0
> 
> 时间：2012-11-07T19:18:07.870
> 
> 标签：javascript, wcf, soap

我正在尝试的似乎相对简单，但我似乎无法找到如何做到这一点的简单答案。我有一个自托管的 WCF Web 服务。它有一个函数接受零个参数并返回一个字符串。我要做的就是从 javascript 请求该方法并在 javascript 中捕获该字符串响应

这是我的代码，到目前为止它甚至不会返回任何东西。如果我使用 SOAPUI 之类的东西，我可以很容易地收到请求。

**应用程序配置**

```
<?xml version="1.0"?>
<configuration>

  <configSections>
  </configSections>
  <connectionStrings>
    <add name="test.XKORE.MobileDeviceServices.Properties.Settings.ConnectionString"
      connectionString="Data Source=tester;Initial Catalog=test;User ID=testc;Password=testp" />
  </connectionStrings>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="test.XKORE.MobileDeviceServices.XKOREMobileService" behaviorConfiguration="XKOREMobileServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8523/test/XKORE/XKOREMobileService" />
          </baseAddresses>
        </host>
        <endpoint address="" binding="basicHttpBinding" contract="test.XKORE.MobileDeviceServices.IXKOREMobileService" bindingNamespace="http://test.XKORE.MobileDeviceServices" />
        <endpoint address="mex" binding="mexHttpBinding" contract="test.XKORE.MobileDeviceServices.IXKOREMobileService" bindingNamespace="http://test.XKORE.MobileDeviceServices" />

      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="XKOREMobileServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

**界面**

```
[ServiceContract]
    public interface IXKOREMobileService
    {
        [OperationContract]
        string GetChartData();

        // TODO: Add your service operations here
    } 
```

**SOAP 请求**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IXKOREMobileService/GetChartData</Action>
  </s:Header>
  <s:Body>
    <GetChartData xmlns="http://tempuri.org/" />
  </s:Body>
</s:Envelope> 
```

**Javascript（不工作）**

```
var response = BuildSOAPMessage('GetChartData');
alert(response);

function BuildSOAPMessage (func) {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("POST", "http://localhost:8523/test/XKORE/XKOREMobileService", true);

    var msg = '';
    msg += '<?xml version="1.0" encoding="utf-8"?>'
    msg += '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">'
    msg += '<soapenv:Header/>'
    msg += '<soapenv:Body>'
    msg += '<tem:' + func + '/>'
    msg += '</soapenv:Body>'
    msg += '</soapenv:Envelope>'
    alert (msg);

     // Send the POST request
     xmlhttp.setRequestHeader('Content-Type', 'text/xml');
     xmlhttp.setRequestHeader("SOAPAction", "http://tempuri.org/IXKOREMobileService/GetJSONChartData");
     xmlhttp.send(msg);

    return xmlhttp.responseXML;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:46:07.467

您的代码中有几个问题：

*   您指定 XmlHttpRequest 对象将是异步的（将`true`第三个参数传递给`open`调用）。这意味着您在调用后没有得到结果`send`，您需要等待事件访问 responseXML 属性。
*   您很可能遇到了跨域限制。默认情况下，XMLHttpRequest 不能向页面到达的站点以外的站点发送请求。您正在自托管 WCF 服务，并且我假设托管 JavaScript 代码的页面来自其他域。这将被浏览器阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:35:04.583

关闭此线程并打开一个单独的线程，因为该问题与跨域问题更相关。

# cuda - 为什么我的数组没有设置好？

> ID：13276626
> 
> 赞同：1
> 
> 时间：2012-11-07T19:18:38.000
> 
> 标签：cuda, pycuda

我正在尝试自学CUDA。到目前为止这并不容易，但我也不会轻易放弃:)

我创建了一个非常简单的程序。它只是从 GPU 返回一个值。

```
import pycuda.driver as cuda
from pycuda.compiler import SourceModule
import pycuda.autoinit
import numpy as np

returnValue = np.zeros(1)
mod = SourceModule("""
  __global__ void myVeryFirstKernel(float* returnValue) {
    returnValue[0] = 8.0;
  }
""")
func = mod.get_function('myVeryFirstKernel')
func(cuda.InOut(returnValue), block=(1024, 1, 1), grid=(1, 1))
print str(returnValue[0]) 
```

但是，我的程序打印的值是`5.387879938e-315`. 那肯定不像`8.0`。为什么 GPU 会返回错误的值？

我试过改变块大小，我认为这不应该（但谁知道）。我还检查了我发送的数据类型（float64）是否与我的内核匹配。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:12:20.473

您有类型冲突 - 您的内核应为 32 位单精度值，但您正在向其传递 64 位双精度值。如果你重写你的代码是这样的：

```
returnValue = np.zeros(1, dtype=np.float32)
mod = SourceModule("""
  __global__ void myVeryFirstKernel(float* returnValue) {
    returnValue[0] = 8.0f;
  }
""")
func = mod.get_function('myVeryFirstKernel')
func(cuda.InOut(returnValue), block=(1024, 1, 1), grid=(1, 1))
print returnValue[0] 
```

所以一切都以单精度明确指定，你可能会有更多的运气。

# c# - Visual Studio - 保持命令窗口打开

> ID：13276634
> 
> 赞同：0
> 
> 时间：2012-11-07T19:19:19.193
> 
> 标签：c#, debugging, process.start

所以我在 Visual Studio 中调试了一个 C# 程序，它启动了一个用于`Process.Start`.

我想保持这个窗口打开 - 但是我尝试过的方法 -`Console.Readline();`没有奏效。

有没有一种标准方法可以让控制台窗口保持打开状态，以便我可以看到程序执行时会发生什么？对调试很有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:26:40.717

您可以尝试使用 CMD.EXE 并将您的程序作为参数传递

```
Process.Start("cmd.exe", "/K \"dir\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:26:54.733

由于您使用的是 Visual Studio，我不确定`Ctrl`+`F5`是否是您要查找的内容……这会使控制台保持活动状态。

# ios - 从 Apple 推送通知中识别无效令牌

> ID：13276639
> 
> 赞同：4
> 
> 时间：2012-11-07T19:19:30.137
> 
> 标签：ios, push-notification, apple-push-notifications

所以这是我第一次开发使用 APN 的应用程序。我最终混合了开发和生产设备令牌。显然，APNS 在使用产品证书时会忽略包含开发令牌的通知。有谁知道我可以识别哪些令牌无效（开发设备令牌）以便我可以从我的服务器中删除它们的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T14:41:36.073

您可以通过使用增强的消息格式向 Apple 发送通知并尝试从套接字读取以获取错误响应来识别此类无效设备令牌。无效的设备令牌将导致 Apple 在关闭套接字之前将错误响应写入套接字。棘手的部分是在套接字关闭之前设法读取错误响应。

本[技术说明](https://developer.apple.com/library/ios/#technotes/tn2265/_index.html)给出了很好的解释。

# email - 如何在 Windows 8 Metro 应用程序上发送电子邮件？

> ID：13276657
> 
> 赞同：1
> 
> 时间：2012-11-07T19:20:36.323
> 
> 标签：email, windows-8

Windows 8 Metro 应用程序上未使用命名空间 System.Net.Mail 对吗？如何设置应用程序发送电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:26:22.800

你是对的，看看[这个](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/393a123f-674c-4b44-af87-9963053f42fd)和[这个](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3d80b028-96a0-4347-b542-22058dc25b42)。

如果您想从您的应用程序发送电子邮件，我建议您设置一个服务器，该服务器可以接收来自应用程序的请求并从该应用程序发送电子邮件:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-31T17:13:10.750

在 Windows 8 应用程序上，您可以启动以`mailto:`. 您还可以通过向 URI 添加参数来设置电子邮件地址、主题和正文。这是一个例子：

```
var mailto = new Uri("mailto:?to=name@email.com&subject=Here is a subject&body=Message here.");
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

# jquery - 当用户使用 jQuery 单击主导航时，选择标签以更改所选选项

> ID：13276659
> 
> 赞同：0
> 
> 时间：2012-11-07T19:20:38.067
> 
> 标签：jquery, haml

我正在努力做到这一点

当用户点击 Ballasted Roof Mount 链接时，会出现一个下拉菜单，他们点击 REQUEST A QUOTE 并将他们带到 REQUEST A QUOTE PAGE。

我想要它，以便当用户单击压载屋顶安装上的报价链接请求时，产品类型下的选择标签更改为压载屋顶安装，但对于每个页面，它会自动默认为第一个选项，即屋顶安装。

我可以通过传入参数来使用jQuery吗？

这是我的主要导航代码

```
 #ir_main_nav_container
  %ul#ir_main_nav
    %li
      = link_to 'Roof Mount', '/products/roofmounting/overview'
      %span.carrot
      %ul#rm_sub_menu
        %li= link_to 'Overview', '/products/roofmounting/overview'
        %li= link_to '360 View', '/products/roofmounting/360view'
        %li= link_to 'Tech Specs', '/products/roofmounting/techspecs'
        %li= link_to 'Support', '/products/roofmounting/systemsupport'
        %li.configure_btn= link_to raw("#{config_icon} Configure"), '/rm'
        %li.quote_btn= link_to raw("#{config_quote} Get a Quote"), '/support/requestaquote'
    %li
      = link_to 'Ballasted Roof Mount', '/products/ballastedroofmounting/overview'
      %span.carrot
      %ul#brm_sub_menu
        %li= link_to 'Overview', '/products/ballastedroofmounting/overview'
        %li= link_to '360 View', '/products/ballastedroofmounting/360view'
        %li= link_to 'Tech Specs', '/products/ballastedroofmounting/techspecs'
        %li= link_to 'Support', '/products/ballastedroofmounting/systemsupport'
        %li.configure_btn= link_to raw("#{config_icon} Configure"), '/brm'
        %li.quote_btn= link_to raw("#{config_quote} Get a Quote"), '/support/requestaquote'
    %li
      = link_to 'Ground Mount', '/products/groundmounting/overview'
      %span.carrot
      %ul#gm_sub_menu
        %li= link_to 'Overview', '/products/groundmounting/overview'
        %li= link_to '360 View', '/products/groundmounting/360view'
        %li= link_to 'Tech Specs', '/products/groundmounting/techspecs'
        %li= link_to 'Support', '/products/groundmounting/systemsupport'
        %li.configure_btn= link_to raw("#{config_icon} Configure"), '/sga'
        %li.quote_btn= link_to raw("#{config_quote} Get a Quote"), '/support/requestaquote'
    %li
      = link_to 'Pole Mount', '/products/polemounting/overview'
      %span.carrot
      %ul#pm_sub_menu
        %li= link_to 'Overview', '/products/polemounting/overview'
        %li= link_to '360 View', '/products/polemounting/360view'
        %li= link_to 'Tech Specs', '/products/polemounting/techspecs'
        %li= link_to 'Support', '/products/polemounting/systemsupport'
        %li.configure_btn= link_to raw("#{config_icon} Configure"), '/pm'
        %li.quote_btn= link_to raw("#{config_quote} Get a Quote"), '/support/requestaquote' 
```

这是请求报价页面的代码

```
 <!-- container starts here -->
   <div id="container">

<br/>
<h1>GET A QUOTE</h1>
<div class="clear">&nbsp;</div>
<form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" name="form1" id="form1" method="POST" target="_parent">

<input type=hidden name="oid" value="00DU0000000I430">

<input type=hidden name="retURL" value="http://www.ironridge.com">

<div class="clear"></div>
<div id="footer_form" style="float:left">

<label>Product Type</label>
<select  id="00NU0000001hkz3" name="00NU0000001hkz3"  class="txt_field" title="Application Type"><option value="Roof Mount">Roof Mount</option>

<option value="Ballasted Roof Mount">Ballasted Roof Mount</option>

<option value="Ground Mount">Ground Mount</option>

<option value="Pole Mount">Pole Mount</option>

</select> <br/> <br/> 
```

我正在使用 HAML 和 HTML 提前感谢您的输入

这是我正在谈论的图像的链接，也许它会有所帮助 [http://cmclove.org/Google%20Chrome1.png](http://cmclove.org/Google%20Chrome1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:01:04.343

我能想到的最简单的方法是一个非常基本的查询字符串实现。因此，在页面 A 上，当用户单击指向 quotePage.html 的链接时，将它们发送到 quotePage.html?prod=BRM。然后，在 quotePage.html 上，运行以下内容：

```
$(document).ready(function(){
if(document.URL.indexOf("prod=BRM") !== -1){//if our url has our passed value
$('#00NU0000001hkz3 option:eq("Ballasted Roof Mount")').attr('selected', 'selected');
}
else
{
$('#00NU0000001hkz3 option:eq("Pole Mount")').attr('selected', 'selected');
}
}); 
```

（代码未经测试，但有一般逻辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:02:14.730

好的，看来我误解了您在原始答案中想要的内容。更正您的 jsfiddle：http: [//jsfiddle.net/SxFtX/](http://jsfiddle.net/SxFtX/)

HTML：

```
<a class="menuLink" href="">Menu 1</a>
<a class="menuLink" href="">Menu 2</a>
<a class="menuLink" href="">Menu 3</a>
<a class="menuLink" href="">Menu 4</a>

<select id="dd2" name="type1">
   <option value="1">Menu 1</option>
   <option value="2">Menu 2</option>
   <option value="2">Menu 3</option>
   <option value="2">Menu 4</option>
</select> 
```

JS：

```
$('.menuLink').click(function() {
    var that = this;
    $('#dd2 option').each(function() {
        if (this.innerHTML === that.innerHTML) {
            $(this).attr('selected', 'selected')
        }
    });
});​
​ 
```

# html - iOS 邮件链接会显示菜单/操作表，而不是可点击的链接

> ID：13276663
> 
> 赞同：2
> 
> 时间：2012-11-07T19:20:53.160
> 
> 标签：html, ios, email, webkit, mobile-safari

我的应用程序的外发电子邮件有问题。希望这里有人可以阐明。

电子邮件是多部分消息，它在我想要定位的平台上呈现良好。

![带有链接的屏幕](../Images/09b075aacbabb0a913d0cd75345cc2c5.png)

但是，在 iPhone 上的 iOS 6 邮件浏览器上，链接会显示一个操作表来保存图像、分配给联系人等（见下图），而不是将用户带到 Safari 的 URL。在下面的示例代码中，我仍然有开发（本地主机：3000）链接，但这不是问题......与生产网址相同。

![出现的行动表](../Images/053bfe665ba1a18f77bc5aec98f5bc8f.png)

奇怪的是，在我的 iPad (iOS 5) 上，链接可以完美运行。与 Mac 邮件、Outlook、Gmail、Hotmail 相同。我几乎可以肯定这不是标记的错，但我在下面提供了一个片段以供参考。

```
 <td align=3D'center' valign=3D'top' width=3D'140'>
                  <p>
                    <a href=3D'http://localhost:3000/users/confirmation.747dfe1c-28ff-11e2-bd48-013adbe35a70?confirmation_token=3DLypvcYovemp1FBFbYsLX'>
                      <img alt=3D'Confirm your account and learn more' border=3D'0' height=3D'140' src=3D'cid:509a98697b4ca_1cdf3fd38dc35adc517aa@hera.local.mail' width=3D'150'>
                    </a>
                  </p>
                  <h4 style=3D"color:#72654b;font-family:Georgia, Times, 'Times New Roman', serif;font-size:16px;font-style:italic;font-weight:normal;">Confirm your email</h4>
                  <p style=3D'color:#6c6c6c; padding-right: 12px;'>
                    Confirm your email address and other contact information to download an introductory white paper and forms that will get you started using WarGaming techniques.
                  </p>
                  <a href=3D'http://localhost:3000/users/confirmation.747dfe1c-28ff-11e2-bd48-013adbe35a70?confirmation_token=3DLypvcYovemp1FBFbYsLX'>
                    <img alt=3D'click here to confirm your email' border=3D'0' height=3D'30' src=3D'cid:509a9869781e5_1cdf3fd38dc35adc5168f@hera.local.mail' width=3D'60'>
                  </a>
                </td> 
```

这当然会降低我的电子邮件活动的有效性。有任何想法吗？感谢我提前提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T15:27:46.943

看起来您的图像已附加到电子邮件中。对我有用的是链接到图像而不是将其附加到电子邮件中。请参阅[为什么包含图像的锚点标签在 Iphone 的邮件应用程序中不起作用？](https://stackoverflow.com/questions/12305113/why-anchors-tag-containing-an-image-dont-work-in-iphones-mail-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T16:39:02.930

这取决于你的品味，或者你的客户希望，在外部托管你的图像，就像 Robert 建议的那样。在最近的一个客户项目中，我们遇到了同样的问题。客户端不希望图像在外部托管。所以我们的解决方案是仍然嵌入图像并通过“背景图像”声明它们。所以在你的例子中（只有第一部分）：

```
 <td align=3D'center' valign=3D'top' width=3D'140'>
              <p>
                <a href=3D'http://localhost:3000/users/confirmation.747dfe1c-28ff-11e2-bd48-013adbe35a70?confirmation_token=3DLypvcYovemp1FBFbYsLX'><span style="height: 140px; width: 150px; display: inline-block; background-image: url('cid:509a98697b4ca_1cdf3fd38dc35adc517aa@hera.local.mail');"></span></a>
              </p>
              <!-- ... -->
            </td> 
```

我希望它有帮助:)

# android - 您可以在“长按电源按钮”菜单中注册应用程序吗？

> ID：13276664
> 
> 赞同：10
> 
> 时间：2012-11-07T19:20:52.533
> 
> 标签：android

在 Android 手机上，如果您长按电源按钮，则会出现一个菜单。在那里，您可以关闭手机，将其置于静音或飞行模式。

是否可以让您的应用在该菜单中注册一个选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T21:51:26.710

不，你不能。您只能使用自定义 ROM（或修改）对其进行自定义，因为它是您正在使用的实际 ROM 的一部分。

自定义 rom，如 CyanogenMod，在此电源菜单（扩展电源菜单）上添加选项：

> 重新启动
> .Regular .Recovery .Bootloader
> 屏幕截图 配置文件

和更多..

因此，只有在您自己的自定义 ROM/Mod 中安装一个应用程序时，它才有可能，您在电源菜单中为您的应用程序输入一个条目。您可以为此找到可闪烁的 zip，并模仿其操作方式，但考虑到用户不仅必须使用您的应用程序，还必须安装您的 Mod（您必须制作）！

可以在[此处](http://forum.xda-developers.com/showthread.php?t=1169443)找到修改此菜单的教程，但可能会很棘手。

*还有一个 mod（我提到过），是一个可刷写的 zip，可以使用 Recovery 安装，或者需要 root 访问权限的脚本，它会更改 ROM 的特定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T07:59:43.700

是的，它可以做到。虽然可能不是没有根。

1.  Xposed 模块 Advanced Power Menu+ 可以做到。[链接](http://repo.xposed.info/module/hk.kennethso168.xposed.apmplus)。
2.  [ButtonRemaper](http://www.xda-developers.com/buttonremaper-for-android/)可以做到。

# queue - 使用 mq_send 发送 int

> ID：13276666
> 
> 赞同：6
> 
> 时间：2012-11-07T19:20:55.620
> 
> 标签：queue, posix

下面帖子中的解决方案对我不起作用。我收到错误消息“消息太长”。可能是什么问题？ [如何在linux中使用POSIX API发送带有消息队列的整数？](https://stackoverflow.com/questions/5247041/how-to-send-integer-with-message-queue-with-posix-api-in-linux/13275787#13275787)

如果我是正确的 a`pid_t`被定义为`int`. 我做了以下事情：

```
struct mq_attr attr;
attr.mq_flags = 0;
attr.mq_maxmsg = 1000;
attr.mq_msgsize = sizeof(pid_t);

mqd_t queue = mq_open(unique_name, O_RDWR|O_CREAT, 0600, &attr);

mqd_t result = mq_send(queue, &pid, sizeof(pid), 0); 
```

我在编译时收到以下错误`mq_send`：

> “从不兼容的指针类型传递 'mq_send' 的参数 2”
> “初始化使指针从整数而不进行强制转换”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:38:26.447

问题是我从来没有这样做过`mq_unlink`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:27:43.550

您可能希望首先使用 mq_attr 设置最大消息大小和队列大小。有关 POSIX 队列的更多详细信息，请参阅[这篇文章](https://stackoverflow.com/questions/5625845/mq-receive-message-too-long?rq=1)。

# jquery - 正确设置使用 slideToggle

> ID：13276667
> 
> 赞同：2
> 
> 时间：2012-11-07T19:21:00.630
> 
> 标签：jquery, toggle, expressionengine, each

伙计们，我正在尝试获取帖子列表，其内容不会在页面加载时显示，但在每个 div 中都有一个展开按钮，可以仅展开该特定帖子。这是我到目前为止的代码：

```
<div class="postEntry">

    <div class="collapsibleContent">
         <div class="postContent"></div>
    </div>

    <div class="actionDiv">
        <span id="actionWording">Read More</span>
        <a href="#" id="actionLink" class="open"></a>
    </div>

</div>

<div class="postEntry">

    <div class="collapsibleContent">
         <div class="postContent"></div>
    </div>

    <div class="actionDiv">
        <span id="actionWording">Read More</span>
        <a href="#" id="actionLink" class="open"></a>
    </div>

</div> 
```

我想让 actionDiv 可点击，以便显示内容，但如果内容被展开，actionWording 中的措辞也会更改为 COLLAPSE。actionLink 是一个锚标记，具有由 css 设置的背景图像和类打开关闭。

这就是我为 JS 所拥有的：

```
jQuery(function()
{

  $('.collapsibleContent').each(function() {
    $(this).css('display', 'none');
  });

  $('.actionButton').click(function() {
    $(this).next('.collapsibleContent').slideToggle('fast')
    return false;
  });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:22:52.540

应该是这样的（通过使用`parent()`）：

```
$(document).ready(function()
{
  $('.collapsibleContent').css('display', 'none');

  $('.actionButton').click(function() {
    $(this).parent().find('.collapsibleContent').slideToggle('fast');
    if ( $(this).html() == 'COLLAPSE' )
      $(this).html('EXPAND');
    else
      $(this).html('COLLAPSE');
  });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:23:29.563

## *[jsBin 演示](http://jsbin.com/ocajud/8/edit)*

寻找`.prev()`并使用方法，除非您使用*anchors*`.hide()` ，否则您不需要 return false ，但在这种情况下，我建议使用*`event.preventDefault()`*

 *```
$(function(){

  $('.collapsibleContent').hide();

  $('.actionButton').click(function( ev ) {
      ev.preventDefault();

      var visible = $(this).prev('.collapsibleContent').is(':visible'),
         slideTog = visible?'slideUp':'slideDown',
              txt = visible?'EXPAND':'COLLAPSE';

      $('.collapsibleContent').slideUp().next('.actionButton').text('EXPAND');

      $(this).text( txt ).prev('.collapsibleContent')[slideTog]();

  });

}); 
```*

# c# - 在 C# 中获取动态对象的属性类型（即使值为 null）

> ID：13276674
> 
> 赞同：1
> 
> 时间：2012-11-07T19:21:21.547
> 
> 标签：c#, wpf, data-binding, dynamic

我有一个 DynamicObject 包装器，它基本上是从另一个私有对象实例（除其他外）转发属性值。但是有没有办法动态地返回属性类型呢？

我问的原因是因为我在 WPF 中尝试将视图值（在我的情况下为**字符串**，文本框绑定到双属性）转换为**对象**类型的演示者值而不是**双精度**（其中如果对象不是动态的并且该属性的返回类型为双精度，则会出现这种情况）。

如果有像 TryGetMemberType 这样的地方，那就太好了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:30:58.273

不，动态是不可能的：null 没有类型，动态没有元数据。

但是，在大多数 UI 数据绑定代码中（包括 WPF），主要 API 是 System.ComponentModel - 它支持一种动态行为形式（并且从 1.0 开始就已经这样做了）。通常，您将使用 ICustomTypeDescriptor、TypeDescriptionProvider 或 ITypedList 来提供自定义 PropertyDescriptor 实例。这些具有完整的元数据，包括类型信息。

我想知道这是否更适合您的需求。

# node.js - ZeroMQ 推/拉和 nodejs 读取流

> ID：13276680
> 
> 赞同：1
> 
> 时间：2012-11-07T19:21:43.677
> 
> 标签：node.js, sockets, stream, zeromq

我试图通过打开读取流来读取一些文件，并通过 ZMQ 将文件块发送到另一个进程以使用它们。流按应有的方式工作，但是当我启动工作程序时，它看不到已发送的数据。

我尝试每 500 毫秒通过套接字发送数据，而不是在回调中，当我启动 worker 时，它会收集所有以前的数据块：

```
sender = zmq.socket('push')
setInterval(() ->
  console.log('sending work');
  sender.send('some work')
, 500) 
```

* * *

```
receiver = zmq.socket("pull")
receiver.on "message", (msg) ->
  console.log('work is here: %s', msg.toString()) 
```

* * *

输出：

```
sending work
sending work
sending work
sending work
sending work
// here I start the worker
sending work
work is here: some work
work is here: some work
work is here: some work
work is here: some work
work is here: some work
work is here: some work
sending work
work is here: some work
sending work
work is here: some work
sending work
work is here: some work 
```

因此，当工作人员启动时，它首先会提取所有以前的数据，然后每次有新数据进来时都会提取它。这在我这样做时不适用：

```
readStream = fs.createReadStream("./data/pg2701.txt", {'bufferSize': 100 * 1024})
readStream.on "data", (data) ->
  console.log('sending work');
  sender.send('some work'); // I'd send 'data' if it worked.. 
```

在这种情况下，工作人员根本不会提取任何数据。这些套接字是否应该创建队列？我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T05:17:41.287

是的，推送套接字在达到 HWM 之前一直处于阻塞状态，并且没有人可以发送。也许发件人还没有绑定，试试这样的：

```
sender.bind('address', function(err) {
  if (err) throw err;
  console.log('sender bound!');

  // the readStream code.
} 
```

您的代码示例中也缺少 a `connect`，我敢打赌它在那里，但也许您忘记了。

# java - Android - 奇怪的九补丁阴影

> ID：13276683
> 
> 赞同：2
> 
> 时间：2012-11-07T19:22:01.093
> 
> 标签：java, android, xml, eclipse, nine-patch

我不确定究竟是什么导致了以下情况，也许是缓存设置或其他什么？

这是我的 9 补丁：

![在此处输入图像描述](../Images/3d5a2d2ba2e154cedb162a89f3e1f2b2.png)

这是一个PSD截图：

![在此处输入图像描述](../Images/58da84d7945f45ae89867633a33a59e3.png)

这是在 Eclipse 的布局设计器中：

![在此处输入图像描述](../Images/ddc75a2f7a2439d5d1cc89f7f03f64e3.png)

而且，这是由 DDMS 在新 Galaxy S3 上的屏幕截图工具捕获的：

![在此处输入图像描述](../Images/cb4cafbc5ccf1ccc86d3036d74b26254.png)

看到奇怪的水平模糊了吗？它就在顶部。

这是该布局的 XML：

```
 <TextView
        android:id="@+id/temp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bubble16"
        android:padding="10dp"
        android:text="@string/temp_comment_3"
        android:textColor="#282828"
        android:textSize="17sp" 
        android:textStyle="italic" /> 
```

SDK设置：

```
 <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="14" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T20:05:13.503

它正在按比例放大，并且抗锯齿导致中间灰色像素渗入您的内容区域。外线也发生了同样的事情（它是 2 个像素而不是 1 个像素，并且外部区域略亮。）

我猜你只是有这个图像`res/drawable`，而你需要：

1.  `res/drawable-hdpi`为（1.5 倍大）和`res/drawable-xhdpi`（2倍大）制作更大的版本。如果这些文件夹不存在，请创建它们——S3 是 XHDPI 设备。

2.  放置 9-patch`res/drawable-nodpi`将防止它被缩放，但设备之间的大小将不一致。（例如，在更高密度的设备上会更小）

# selenium - Selenium WebDriver 测试因 System.Net.WebException 无法连接而失败

> ID：13276686
> 
> 赞同：4
> 
> 时间：2012-11-07T19:22:30.413
> 
> 标签：selenium, webdriver, mstest

我正在开发一套通过命令行调用 MSTest 执行的 Selenium WebDriver（不是 Selenium RC 并且不使用 Selenium-Server）测试。我已经为我们计划测试的每个浏览器（Chrome、Firefox 和 IE9，目前）将它们分解为测试类，每个测试类都有一个启动方法，该方法登录到被测系统，然后执行请求的测试以及使用 WebDriver.Quit() 关闭浏览器的 TearDown 方法。

在我的开发机器上，一切都是笨拙的，但在我们的构建机器上，类初始化/启动方法执行得很好并登录到站点，但是一旦第一个实际测试开始，测试运行器就会关闭并显示错误消息：

```
OpenQA.Selenium.WebDriverException: Unexpected error. System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: No connection could be made because the target machine actively refused it 127.0.0.1:59982 
```

显然端口会根据正在测试的浏览器而变化；当我运行整个套件时，我在针对 IE、Firefox 和 Chrome 的测试的不同端口上遇到错误 - 每个浏览器都有两个错误（因为该套件目前对每个浏览器都有两个测试）

构建机器的 Windows 防火墙已关闭，并且在运行测试之前检查 netstat 表明该端口未在使用中；如果我在启动代码运行之后但在测试运行之前调试测试并停止，那么端口当然正在使用中。127.0.0.1 和 localhost 也是一样的。

无论我是通过命令行调用测试、使用 VS 测试工具从 Visual Studio 中运行/调试它，还是通过执行我的控制台应用程序（该应用程序通过 Process.Start() 调用 MSTest），我都会收到相同的错误。在第一次 FindElement() 调用时引发异常。

我可以从哪里开始找出为什么这在构建机器上而不是在我的开发盒上失败？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T17:25:13.600

这里的问题是，在尝试在启动期间实现一些更强大的错误处理时，我在包含登录代码的 try/catch 的 finally 块中调用了 Teardown 代码，因此一旦测试工具完成登录我正在关闭并清理 WebDriver 实例，因此当测试运行时，那里没有可与之通信的 WebDriver。

我怀疑当我在我的开发机器上查看“相同”代码时，*实际*运行的库中没有那个块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:26:18.637

当您从 Visual Studio 运行应用程序时，它会启动侦听某个端口的服务器。在你的情况下 59982。

在针对它运行测试之前，您实际上需要让您的 Web 应用程序在测试环境中独立运行。

在您的开发机器上，您的应用程序正在该端口上运行。我猜在您的远程机器上并非如此。

# javascript - 如何在 Javascript 中更改 CustomValidator ValidationGroup？

> ID：13276690
> 
> 赞同：0
> 
> 时间：2012-11-07T19:22:50.917
> 
> 标签：javascript, jquery, asp.net, vb.net, vb.net-2010

如果我有一个具有特定验证组的 asp 控件

```
 <asp:CustomValidator ID="myRequiredValidator" runat="server" ControlToValidate="myDropDown" ClientValidationFunction="myClientSideValidationFunction"  ValidateEmptyText="True" Display="None" ValidationGroup="group A"></asp:CustomValidator> 
```

如何更改 javascript 中的组？

```
<script type="text/javascript" language="javascript">  
    function changeValidationGroup(validator) { validator.ValidationGroup("group B"); } 
```

或类似的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:37:04.513

在 ASP.NET 中，验证控件`<span>`在呈现为 HTML 时成为标记，只需将所需 span 的 validationGroup 属性更改为新值：

```
<head runat="server">
    <title>Validation</title>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
        function ChangeGroupName() {
            var groupName = $("#txtGroupName").val();
            if (groupName != '') {
                $("#validator").attr('validationGroup', groupName);
            }
        };
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <input type="text" id="txtGroupName" />
    <asp:CustomValidator ID="validator" runat="server" ErrorMessage="Error" ValidationGroup="Group1"></asp:CustomValidator>
    <input type="button" value="OK" id="btnChangeGroup" onclick="ChangeGroupName()" />
    </form>
</body> 
```

# visual-studio - g++上的safeseh gs

> ID：13276692
> 
> 赞同：3
> 
> 时间：2012-11-07T19:22:56.560
> 
> 标签：visual-studio, g++, seh

我想编译一个 c++ 文件。我正在关注一个教程，在本教程中，文件是用 Visual Studio 编译的，我没有。我想对 g++ 做同样的事情。在本教程中，使用 VS 中的 /GS 和 /SafeSEH。我想知道如何使用 g++ 编译器使用这些标志编译我的文件。

抱歉，如果我的问题很简单，我以前从未使用过 g++。对不起我的英语。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T08:21:00.277

所以首先要做的事情是：

*   `/GS`实际上执行“缓冲区安全检查”，试图自动检测缓冲区溢出并在此类溢出被利用之前终止您的应用程序。

*   `/SAFESEH`在可执行文件中嵌入所有结构化异常处理程序的列表，以便操作系统可以检测是否安装了未经授权的处理程序以试图劫持执行。

现在回答您的问题：g++ 实现了类似于 /GS 的功能。您可以编译您的代码`-fstack-protector-all`以启用它。如果您好奇，可以查看 gcc 手册页或使用 google 了解更多详细信息。g++ 没有实现结构化异常处理（它是 Microsoft 扩展），因此 g++ 中没有类似于 /SAFESEH 的东西。

好消息是，除非您正在处理的示例旨在演示 /GS 和 /SAFESEH 提供的额外保护，否则在没有它们的情况下编译代码根本不成问题。我敢打赌，您可以忽略这两个选项并在没有它们的情况下进行编译，一切都会好起来的。

如果您有兴趣获得 Visual Studio，您可以从 Microsoft 获得免费的“Express”版本。在这里查看网站：http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

我希望这有帮助。

# javascript - 是否可以在 Rails 模型验证方法中执行一些 Javascript？

> ID：13276698
> 
> 赞同：0
> 
> 时间：2012-11-07T19:23:32.200
> 
> 标签：javascript, ruby-on-rails, html, google-maps, geolocation

我基本上只想让用户注册，如果他们已经进入或已经定位在一个有效的位置。我认为验证位置的方法是使用谷歌的地理定位 API，将用户输入的字符串地址转换为纬度和经度。我很想在我的用户模型中的自定义验证方法中执行此操作，但我需要使用 Javascript 来访问 Google 的 API。

有没有好的方法来做到这一点？有没有更好的方法来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:33:23.170

如果您使用 Google API 的 Geolocation，您可以使用 Javascript 评估数据，然后通过 Ajax 将该数据发送到您的控制器（jQuery 可以做到这一点）。这样，验证成功后，您的控制器就可以注册新用户。您的控制器可以直接与模型交互。

# android - 斯诺克安卓应用

> ID：13276701
> 
> 赞同：4
> 
> 时间：2012-11-07T19:23:40.717
> 
> 标签：android, camera

我目前正在为大学做最后一年的项目/论文，对此我有一个“疯狂”的想法。我正在考虑为斯诺克球员、不同的酒吧或锦标赛设计一个安卓应用程序，该应用程序将使用移动摄像头检测桌上的每一个动作和变化，同时在没有任何人工输入的情况下为球员保留分数. 我想知道这是否是不可能的事情。如果它是合理的，我真的需要一些想法，从哪里开始的建议。

我得说我有一些Android开发经验，我已经开始阅读很多关于形状检测、颜色检测和边缘检测的文章和项目。

谢谢 ！

# javascript - AWEBER javascript 集成

> ID：13276706
> 
> 赞同：1
> 
> 时间：2012-11-07T19:24:10.390
> 
> 标签：javascript, forms, aweber

我有 2 个原始 aweber html 代码，它们位于不同的帐户中。现在我想要这两个原始代码的 1 个注册表单。意味着当有人在我的表单上注册时，电子邮件应该保存在我的两个列表中。但我遇到了如何整合这两个代码的问题。当我删除 1 个表单时，它仅适用于 1 个列表，但是当我将两者整合时，它不会在两个列表中保存任何电子邮件。

这是我的代码，抱歉我的编码不好，我是 javascript 新手，我正在努力解决这个问题，希望有人能帮助我。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<!--1st-->
<script language="javascript">
function copy_fields(){
    <!--document.getElementById('name1').value = document.getElementById('name').value;
    document.getElementById('from1').value = document.getElementById('email').value;
}
function validate(){
    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
    if((document.submail.email.value=='')||(document.submail.email.value=='Email Address'))
    {alert('Please Enter Email Address'); return false;}
    if (!filter.test(document.submail.email.value)) 
    {alert('Please Enter A Valid Email'); return false;}    

    document.getElementById('sub9').className='gray_out';
    document.getElementById('sub9').disabled='true';    

    copy_fields();
    document.form2.submit();
    setTimeout('document.submail.submit()',3000);   
}
</script>
<style type="text/css">
.gray_out {
    filter:alpha(opacity=40);
    -moz-opacity:.40;
    opacity:.40;
}
</style>
<!--END 1st-->

<!--2nd-->
<script language="javascript">
function copy_fields1(){
    <!--document.getElementById('name1').value = document.getElementById('name').value;
    document.getElementById('from1').value = document.getElementById('email').value;
}
function validate1(){
    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/; 
    if((document.submail.email.value=='')||(document.submail.email.value=='Email Address'))
    {alert('Please Enter Email Address'); return false;}
    if (!filter.test(document.submail.email.value)) 
    {alert('Please Enter A Valid Email'); return false;}    

    document.getElementById('sub9').className='gray_out';
    document.getElementById('sub9').disabled='true';    

    copy_fields1();
    document.form1.submit();
    setTimeout('document.submail.submit()',3000);   

}
</script>
<style type="text/css">
.gray_out {
    filter:alpha(opacity=40);
    -moz-opacity:.40;
    opacity:.40;
}
</style>
<!--END 2nd-->

</head>
<body>

<form name="submail" method="post" action="http://empowerauthoritypro.com/commission-loophole-ninja" >
<input type="hidden" name="go" value="now" />
    <!--    First Name:<br />
        <input id="name" type="text" name="name" value="First Name" onclick="if(this.value=='First Name') this.value=''" class="text-field" /><br />-->
        Email:<br />
        <input id="email" type="text" name="email" value="Email Address" onclick="if(this.value=='Email Address') this.value=''" class="text-field" />
        <!--<a href="#" onclick="return validate();" id="sub9">Optin Now</a>-->
        <input type="button" id="sub9" value="Submit" onClick='window.open(validate1())' />
</form>

<!--1st has email requirement only-->
<form name="form2" method="post" action="http://www.aweber.com/scripts/addlead.pl" target="iframe" style="display:none">
<input type="hidden" name="meta_web_form_id" value="1817364894" />
<input type="hidden" name="meta_split_id" value="" />
<input type="hidden" name="listname" value="dummylistshaq" />
<input type="hidden" name="redirect" value="http://www.aweber.com/thankyou.htm?m=default" /><input type="hidden" name="meta_adtracking" value="ninjatest" />
<input type="hidden" name="meta_message" value="1" />
<input type="hidden" name="meta_required" value="email" />
<input type="hidden" name="meta_tooltip" value="" />
<div style="display:none">
<img src="http://forms.aweber.com/form/displays.htm?id=jByM7MxsLBycLA==" alt="" width="1" height="1" />
</div>
<input type="text" name="email" id="from1" value="" size="20">
</form>
<iframe name="iframe" style="display:none"></iframe>
<!--END 1st-->

<!--2nd has name and email requirement but i have compromise the name to be hide-->
<form name="form1" method="post" action="http://www.aweber.com/scripts/addlead.pl" target="iframe" style="display:none">
<input type="hidden" name="meta_web_form_id" value="1376972149" />
<input type="hidden" name="meta_split_id" value="" />
<input type="hidden" name="listname" value="optinninja1" />
<input type="hidden" name="redirect" value="http://www.aweber.com/thankyou.htm?m=default" /><input type="hidden" name="meta_adtracking" value="ninjaoptin" /><input type="hidden" name="meta_message" value="1" />
<input type="hidden" name="meta_required" value="name,email" />
<input type="hidden" name="meta_tooltip" value="" />
<div style="display:none">
<img src="http://forms.aweber.com/form/displays.htm?id=jMzsbJzsTIwsnA==" alt="" width="1" height="1" />
</div>
<input type="hidden" name="name" id="name1" value="" size="20">
<input type="text" name="email" id="from1" value="" size="20">
</form>
<iframe name="iframe" style="display:none"></iframe>
<!--END 2nd-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:33:17.313

将多个服务与您的 AWeber 列表集成的更好（并且 AWeber 支持）方法是使用 AWeber API。

另一种可能是在您自己的网站上设置一个 PHP 页面，将其设置为您的 AWeber 表单的“感谢页面”，然后对您的 PHP 进行编码以利用 Pass Subscriber Data 功能：

[https://help.aweber.com/entries/21775518-how-do-i-pass-form-data-to-my-thank-you-pages](https://help.aweber.com/entries/21775518-how-do-i-pass-form-data-to-my-thank-you-pages)

我对您想要的工作流程有点困惑。您提到提交到两个 AWeber 列表，但在您的代码中还有第三种表单可以发布给第三方。

我强烈建议与 AWeber 客户解决方案联系，他们将能够更全面地满足您的需求。只需发送电子邮件至 help@aweber.com 或访问[https://www.aweber.com/contact-us.htm](https://www.aweber.com/contact-us.htm)，团队成员就会深入了解。

# sublimetext2 - 如何在 Sublime Text 2 中删除完成

> ID：13276707
> 
> 赞同：3
> 
> 时间：2012-11-07T19:24:13.057
> 
> 标签：sublimetext2

如何从 Sublime Text 2 中删除完成？

具体来说，在 Ruby 文件中，在 num 符号 # 之后，点击制表符自动完成到 # =>。

我不需要这个完成，尝试写评论时真的很烦人。如何删除它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:35:13.660

它是默认安装在 Ruby 包中的一个片段。

为了禁用它：

1.  打开崇高文本 2。

2.  选择*首选项-> 浏览包...*

3.  它将打开一个目录，打开目录*Ruby*

4.  将文件重命名`Add-'#-=-'-Marker.sublime-snippet`为`Add-'#-=-'-Marker.sublime-snippet.old`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T19:36:38.077

假设您在 Mac 上运行 SublimeText2，请转到 Preferences > Browse Packages。在文件夹 Packages 中找到文件夹 Ruby。在 Ruby 中找到文件 Add-'#-=-'-Marker.sublime-snippet 并对其进行操作。

但我强烈建议将更改放在用户文件中。我认为这是首选项 > 设置 - 更多 > 特定语法 - 用户

见：[http ://www.sublimetext.com/docs/2/settings.html](http://www.sublimetext.com/docs/2/settings.html)

# javascript - 对象中的条件变量

> ID：13276709
> 
> 赞同：1
> 
> 时间：2012-11-07T19:24:23.197
> 
> 标签：javascript, object, shorthand, conditional

只是试图做这样的事情，它不会工作，想知道是否还有？

```
var obj = {
    intiger:5,
    conditional:(something) ? "something" : "nothing",
    string:"nothing important"
}; 
```

`:`这是因为`conditional`. 无论如何要做到这一点，而不会破坏并保持这种`obj`.

我知道我能做到。

```
obj.conditional = (something) ? "something" : "nothing"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:27:03.393

使用另一组括号？

```
...
conditional:((something)?"something":"nothing"),
... 
```

只需要让解析器知道`:`要注意哪些以及出于什么目的。

```
var foo = {
    bar: (true ? "true" : "false")
};
console.log(foo.bar); // true 
```

`function(){}`如果需要在参考时做出决定，您也可以使用 a 。例如

```
var foo = {
    bar:function(){
        return this.baz == 'Brad' ? 'Me' : 'Not Me';
    },
    baz: 'Brad'
};
console.log(foo.bar()); // 'Me'
foo.baz = 'Thomas'; console.log(foo.bar()); // 'Not Me' 
```

# java - Java Timer 计划任务执行速度

> ID：13276711
> 
> 赞同：-1
> 
> 时间：2012-11-07T19:24:37.307
> 
> 标签：java, timer, scheduled-tasks

假设我有如下所示的一般计划任务 Timer t = new Timer();

```
 TimerTask listenHandover = new TimerTask() {

    public void run() 
    {
              // Some methods that can possibly take more than 1 second to execute
    }
};
t.schedule(listenHandover, 1000 , 1000); 
```

正如评论所说，如果任务执行时间超过 1 秒会发生什么？是否会在安排下一个时重新启动当前正在运行的一个？还是任务有自己的线程？希望很清楚。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:25:58.310

如果任务耗时超过 1 秒，后续任务将排队，直到有问题的任务完成。

根据[javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html)

> 如果一个定时器任务花费了过多的时间来完成，它就会“占用”定时器的任务执行线程。反过来，这可以延迟后续任务的执行，这些任务可能会在（如果）有问题的任务最终完成时“聚集”并快速连续执行。

# iphone - 存折图标上的闪耀效果

> ID：13276714
> 
> 赞同：0
> 
> 时间：2012-11-07T19:24:47.137
> 
> 标签：iphone, ios, passbook

是否可以在 Pass 更新时消除锁屏上显示的 Passbook 图标的光泽？

来自文档：

> 图标.png
> 
> 通行证的图标。这会显示在通知和附有通行证的电子邮件中，以及锁定屏幕上。当它显示时，图标会获得光泽效果和圆角。

只有使用“suppressStripShine”顶级键才能去除条带上的光泽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:05:44.483

没有记录的 API 可以抑制图标闪耀，抱歉。

你应该去 Apple 的[bug 报告员](http://bugreport.apple.com/)并提交一个改进请求，解释它如何为你增加价值来做到这一点。

# c# - 在另一个页面上更新控件 windows 8 metro app c#

> ID：13276715
> 
> 赞同：2
> 
> 时间：2012-11-07T19:24:46.283
> 
> 标签：c#, xaml, controls, microsoft-metro

这是一个基本过程，我在 Google 或 Kindle 帐户上的参考书中找不到任何信息。

在 Windows 8 之前的常规表单应用程序中，如果您使用的是表单 2，并且想要更新表单 1 上的内容，您只需键入：

```
form1.Default.controlOnForm1.text = "updated text"; 
```

这在 Windows 8 中不起作用。

谢谢你。

更新：当数据绑定不能满足我的需要时，我找到了一种简单的方法。我只是创建了我需要访问的控件的静态副本。说 page2 上的 Button1 需要在 page1 上访问。

在顶部声明：

```
public static Button statButton1; 
```

在加载的事件中，我在 XAML 代码中创建了静态副本和按钮之间的关系：

```
statButton1 = Button1; 
```

然后像馅饼一样简单，您可以在任何地方访问该按钮：

```
page2.statButton1.Width = 48; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:53:03.273

Windows 8 应用程序（或任何其他基于 XAML 的应用程序）通常使用 MVVM 模式制作。我**真的**建议你[阅读它](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)并做同样的事情。这种模式导致应用程序中的耦合更少，并且更容易开发和维护。

您在此处讨论的更改类型将通过在 ViewModel (VM) 上设置一个属性来完成，该属性反过来用 a 通知 View (UI)，`PropertyChangedEvent`以便它可以自行刷新。

为了允许 ViewModel 设置彼此的属性，它们都需要彼此了解，这反过来又会导致高度耦合。这通常通过使用`EventAggregator`or来解决，`MessageBus`它基于订阅/发布模式在对象之间发送消息/事件（它们彼此不知道）。

首先，我会看看[An Address Book Application Made in MVVM for Metro](http://www.codeproject.com/Articles/391783/An-Address-Book-Application-Made-in-MVVM-For-Metro)。这是一个基本示例，展示了此模式在没有任何框架的情况下的用法。

一旦您对 MVVM 模式感到满意，我建议您使用像[Caliburn.Micro](https://github.com/Caliburn-Micro/Caliburn.Micro)或[MVVM Light](http://mvvmlight.codeplex.com/)这样的框架。这些框架为使用 MVVM 模式构建应用程序提供了很多很棒的东西。

# c++ - 不完整类型（类）的无效使用

> ID：13276724
> 
> 赞同：2
> 
> 时间：2012-11-07T19:25:14.630
> 
> 标签：c++, inheritance, stack, binary-search-tree

我的二叉搜索树打印代码中有一些错误，我不知道为什么。（底部有错误）

```
#ifndef MYBSTREE_H
#define MYBSTREE_H

#include "abstractbstree.h"
#include "abstractstack.h"
using namespace std;

class LinkedStack *head = NULL;           //LINE 7

template<typename T>
class TreeNode
{
  public:
    T m_data;
    TreeNode* m_right;
    TreeNode* m_left;

};

template<typename T>
class LinkedStack: public AbstractStack<TreeNode<T>*>
{
  public:
    TreeNode<T>* m_data;
    LinkedStack *m_next;

    LinkedStack()
    {
      if(head != NULL)
        head = new LinkedStack;
      m_data = 0;
      m_next = NULL;
    }

    void clear()
    {
      while(head -> m_next != NULL)
      {
        LinkedStack *tmp = head -> m_next;
        head -> m_ldata= tmp -> m_ldata;
        head -> m_next = tmp -> m_next;
        delete tmp;
      }
    }

    void push(TreeNode<T>* x)
    {
      LinkedStack *tmp = new LinkedStack;
      tmp -> m_data = m_data;
      tmp -> m_next = m_next;
      m_data = x;
      m_next = tmp;
    }

    void pop()
    {
      if (isEmpty())
        cout<<"Panic! Nothing to pop"<<endl;
      else
      {
        LinkedStack *tmp;
        tmp = m_next;
        m_data = tmp -> m_data;
        m_next = tmp -> m_next;
        delete tmp;
      }
    }

    int& top()
    {
      if (isEmpty())
        cout<<"Panic! List is Empty"<<endl;

        return m_ldata;
    }

    bool isEmpty()
    {
      bool empty = false;

      if (m_next == NULL)
      {
        empty = true;
      }

      return empty;
    }
};

template<typename T>
class MyBSTree:public AbstractBSTree<T>
{
  private:

    TreeNode<T>* m_root;

  public:

    ~MyBSTree()  
    {
      clear();
    }

    MyBSTree()
    {
      m_root -> m_data = T();
      m_root -> m_right = NULL;
      m_root -> m_left = NULL;
    };

    int size() const
    {
        if(m_root==NULL)
          return 0;
        else
          return (size(m_root->m_left)+1+size(m_root->m_right));
    }

    bool isEmpty() const
    {
      if (m_root== NULL)
        return true;

      else
        return false;
    }

    int height() const
    {
      int lh,rh;
      if(m_root==NULL)
      {
        return 0;
      }
      else
      {
        lh = height(m_root->m_left);
        rh = height(m_root->m_right);

        if(lh > rh)
          return lh + 1;
        else
          return rh + 1;
      }
    }

    const T& findMax() const
    {
      TreeNode<T>* p = m_root;
      while(p -> m_right != NULL)
        p = p -> m_right;
      return p;
    }

    const T& findMin() const
    {
      TreeNode<T>* p = m_root;
      while(p -> m_left != NULL)
        p = p -> m_left;
      return p;
    }
/*
    int contains(const T& x) const;
*/
    void clear()
    {
      delete m_root;
    }

    void insert(const T& x)
    {
      TreeNode<T>* p = m_root;

      do
      {  
        if (x == p -> m_root)
          return;
        else if ( x < p->m_data)
        {
          if(p->m_left == NULL)
          {
              p->m_left = new TreeNode<T>;
              p -> m_left -> m_data = x;
              return;
          }
          else
            p = p -> m_left;
        }
        else if( x > p->m_data)
        {
          if(p->m_right == NULL)
          {
            p->m_right = new TreeNode<T>;
            p-> m_right -> m_data = x;
            return;
          }
          else
            p = p -> m_right;
        } 
      }while(p -> m_right != NULL && p -> m_left != NULL);
    }

    void remove(const T& x)
    {
        if(m_root == NULL)
            return;

        TreeNode<T>* q = m_root;
        TreeNode<T>* p;

        while(q != NULL)
        {
            if(m_root->m_data == x)
            {
                delete q;
                return;
            }
            else if(x > q->m_data)
            {
                p = q; 
                q = q->m_right;
            }
            else
            {
                p = q; 
                q = q->m_left;            
            }
        }

        if(q->m_left == NULL && q->m_right == NULL)
        {
            if(p == q)
                delete p;
            else if(p->m_left == q)
            {
                p->m_left = NULL;
                delete q;
            }
            else 
            {
                p->m_right = NULL;
                delete q;
            }
            return;
        }

        if((q->m_left == NULL && q->m_right != NULL) || (q->m_left != NULL && q->m_right == NULL))
        {
            if(q->m_left == NULL && q->m_right != NULL)
            {
                if(p->m_left == q)
                {
                    p->m_left = q->m_right;
                    delete q;
                }
                else
                {
                    p->m_right = q->m_right;
                    delete q;
                }
            }
            else
            {
                if(p->m_left == q)
                {
                    p->m_left = q->m_left;
                    delete q;
                }
                else
                {
                    p->m_right = q->m_left;
                    delete q;
                }
            }
            return;
        }

        if (q->m_left != NULL && q->m_right != NULL)
        {
            TreeNode<T>* check;
            check = q->m_right;
            if((check->m_left == NULL) && (check->m_right == NULL))
            {
                q = check;
                delete check;
                q->m_right = NULL;
            }
            else
            {
                if((q->m_right)->m_left != NULL)
                {
                    TreeNode<T>* m_leftq;
                    TreeNode<T>* m_leftp;
                    m_leftp = q->m_right;
                    m_leftq = (q->m_right)->m_left;
                    while(m_leftq->m_left != NULL)
                    {
                        m_leftp = m_leftq;
                        m_leftq = m_leftq->m_left;
                    }
                    q->data = m_leftq->data;
                    delete m_leftq;
                    m_leftp->m_left = NULL;
                }
                else
                {
                    TreeNode<T>* tmp;
                    tmp = q->m_right;
                    q->data = tmp->data;
                    q->m_right = tmp->m_right;
                    delete tmp;
                }
            }
            return;
        }
    }

    void printPreOrder() const
    {
      LinkedStack stack;
      stack<T>.push(m_root);                           //THIS LINE
      while(!stack.isEmpty())                          //THIS LINE
        {
          TreeNode<T>* root = stack.push();        //THIS LINE
          stack.pop();                             //THIS LINE
          if(root!= NULL)
          {
            stack.push(root->right);           //THIS LINE
            stack.push(root->m_left);          //THIS LINE
            cout << root->m_data << " ";
          }

        }

    }
/*
    void printPostOrder() const;

    void print() const;
    */
};

#endif 
```

我得到的是错误说：

```
MyBSTree.h: In member function âvoid MyBSTree<T>::printPreOrder() constâ:
MyBSTree.h:362:9: error: invalid use of incomplete type âstruct LinkedStackâ
MyBSTree.h:7:7: error: forward declaration of âstruct LinkedStackâ 
```

对于我在该特定功能中标记的所有行，我都知道这一点。我很确定它与模板语法有关，但我不确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:31:12.880

线`class LinkedStack *head = NULL;`没有意义。如果您想了解自己的`LinkedStack`，您应该：

1.  `class`在这一行中删除
2.  传递正确的类型，因为它是一个模板
3.  在模板类定义之后执行

像这样的东西：`LinkedStack<your type> *head = NULL;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T19:32:51.857

我不明白你的意思

```
class LinkedStack *head = NULL;           //LINE 7 
```

这应该是前向声明吗？在这种情况下，它应该是

```
template<typename T>
class LinkedStack; 
```

如果在那之后你试图初始化一个实例，那么它应该是

```
LinkedStack<int> *head = NULL; //int as a typename T 
```

但是您不能将两者混合在一行中:)

# mysql - 在另一种模式下使用 AES_ENCRYPT

> ID：13276725
> 
> 赞同：2
> 
> 时间：2012-11-07T19:25:19.420
> 
> 标签：mysql, security, encryption, cryptography, aes

是否可以在 ECB 以外的模式（如 CBC）中使用 MySQL 的 AES_ENCRYPT 和 AES_DECRYPT 函数？Stack Overflow 上的各种问题都讨论了 MySQL 如何使用 ECB 模式以及不使用这些功能。我最好用我正在使用的编程语言进行加密/解密吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:14:30.430

不，这对于 SQL 查找来说是有问题的。ECB 模式对数据库很有用，因为它没有 IV，并且存在 1:1 的密文：明文关系。

`select * from users where secret=aes_encrypt("some secret")`

如果您在 CBC 模式下使用 IV，则必须遍历每条记录。这就是选择欧洲央行模式的原因。尽管普遍认为 ECB 模式并不总是一个问题，而且 CBC 模式通常会引入使用解密预言机进行 CBC-R 攻击的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T23:22:54.913

使用 MySQL 5.6，您甚至可以设置会话加密：

```
SET @@session.block_encryption_mode = 'aes-256-cbc'; 
```

然后，您可以将列更新为加密：

```
UPDATE TABLE SET COLUMN = AES_ENCRYPT(MSISDN, 'password', 'encryptionkey'); 
```

解密：

```
SELECT CAST(aes_decrypt(COLUMN,'password','encryptionkey') AS CHAR) AS 'Encrypted COLUMN' FROM TABLE 
```

请记住，对于此加密，您的密钥必须包含 16 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T00:16:21.530

2014 年 4 月 28 日更新：

看起来 MySQL 5.7.4 支持更大的密钥大小和不同的操作模式。这也被向后移植到 5.6.17。密钥大小现在可以是 128、192 或 256。如果底层库是 OpenSSL，则模式可以是 ECB、CBC、CFB1、CFB8、CFB128 或 OFB。yaSSL 只允许 ECB 或 CBC。

见这里[http://mysqlserverteam.com/understand-and-satisfy-your-aes-encryption-needs-with-5-6-17/](http://mysqlserverteam.com/understand-and-satisfy-your-aes-encryption-needs-with-5-6-17/)

这里[http://mysqlserverteam.com/the-mysql-5-7-4-milestone-release-is-available/](http://mysqlserverteam.com/the-mysql-5-7-4-milestone-release-is-available/)

这里[http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_block_encryption_mode](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_block_encryption_mode)

在这里[https://twitter.com/morgo/statuses/459820794731065344](https://twitter.com/morgo/statuses/459820794731065344)（morgo 是 Oracle 的 MySQL 社区经理）

# r - 将数据框拆分为数据框列表，但如何重新合并？

> ID：13276728
> 
> 赞同：4
> 
> 时间：2012-11-07T19:25:23.847
> 
> 标签：r, split

我有一个很大的数据框，其中包含课程和用户的两个 ID 列，我需要将每个课程拆分为一个数据框以进行进一步的分析/子集。在从每个单独的课程数据框中删除了很多行之后，我需要将它们重新组合在一起。

你猜对了，我使用它来拆分它`split`，并且它完全按照我的需要工作。然而，拆分比我想象的要难。R 文档说“`unsplit`反转了 的效果” `split`，但到目前为止，我在网上的阅读表明，当拆分列表的元素本身就是数据框时，情况并非如此。

我该怎么做才能重新加入我修改后的 dfs？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T19:25:23.847

这是一个地方`do.call`。简单地调用`df <- rbind(split.df)`会导致一个奇怪且无用的列表对象，但`do.call("rbind", split.df)`应该会给你你正在寻找的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T19:50:32.453

`unsplit()`在您描述的一般情况下将起作用/似乎确实起作用，但不适用于从因此拆分的数据框中删除行的特定情况。

考虑

```
> spl <- split(mtcars, mtcars$cyl)
> str(spl, max = 1)
List of 3
 $ 4:'data.frame':  11 obs. of  11 variables:
 $ 6:'data.frame':  7 obs. of  11 variables:
 $ 8:'data.frame':  14 obs. of  11 variables:
> str(unsplit(spl, f = mtcars$cyl))
'data.frame':   32 obs. of  11 variables:
 $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
 $ disp: num  160 160 108 258 360 ...
 $ hp  : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec: num  16.5 17 18.6 19.4 17 ...
 $ vs  : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am  : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear: num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb: num  4 4 1 1 2 1 4 2 2 4 ... 
```

正如我们所看到`unsplit()`的，可以撤消拆分。但是，在对拆分数据帧进行进一步处理和更改以删除行的情况下，拆分列表中数据帧的总行数与用于拆分原始数据帧的变量之间会出现不匹配。

如果您知道或可以计算出使用于拆分原始数据框的变量所需的更改，则`unsplit()`可以进行部署。尽管这很可能不是微不足道的。

一般的解决方案是，正如@Andrew Sannier 提到的那样，`do.call(rbind, ...)`成语是：

```
> spl <- split(mtcars, mtcars$cyl)
> str(do.call(rbind, spl))
'data.frame':   32 obs. of  11 variables:
 $ mpg : num  22.8 24.4 22.8 32.4 30.4 33.9 21.5 27.3 26 30.4 ...
 $ cyl : num  4 4 4 4 4 4 4 4 4 4 ...
 $ disp: num  108 146.7 140.8 78.7 75.7 ...
 $ hp  : num  93 62 95 66 52 65 97 66 91 113 ...
 $ drat: num  3.85 3.69 3.92 4.08 4.93 4.22 3.7 4.08 4.43 3.77 ...
 $ wt  : num  2.32 3.19 3.15 2.2 1.61 ...
 $ qsec: num  18.6 20 22.9 19.5 18.5 ...
 $ vs  : num  1 1 1 1 1 1 1 1 0 1 ...
 $ am  : num  1 0 0 1 1 1 0 1 1 1 ...
 $ gear: num  4 4 4 4 4 4 3 4 5 5 ...
 $ carb: num  1 2 2 1 2 1 1 1 2 2 ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-31T11:37:06.807

在基数 R 之外，还要考虑：

*   `data.table::rbindlist()`结果的副作用是`data.table`
*   `dplyr::bind_rows()`尽管名称有些混乱，但它会跨列表绑定行

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-11T23:23:09.307

Andrew Sannier 的答案有效，但副作用是行名被更改。`rbind`将列表名称添加到它们，例如“Datsun 710”变为“4.Datsun 710”。可以`unname`在两者之间使用以避免此问题。

完整示例：

```
mtcars_reorder = mtcars[order(mtcars$cyl), ] #reorder based on cyl first
l1 = split(mtcars_reorder, mtcars_reorder$cyl) #split by cyl
l1 = unname(l1) #remove list names
l2 = do.call(what = "rbind", l1) #unsplit
all(l2 == mtcars_reorder) #check if matches
#> TRUE 
```

# vb.net - 使 VB.NET 应用程序与 Office 2007 兼容

> ID：13276732
> 
> 赞同：1
> 
> 时间：2012-11-07T19:25:37.710
> 
> 标签：vb.net, visual-studio-2010

我刚刚为一个严重依赖通过 Microsoft.Office.Interop.Powerpoint 自动化 Powerpoint 的客户端开发了一个自定义 VB.NET 应用程序。它在我的计算机上运行良好（运行 Windows 8、Office 2010 和 Visual Studio 2010），但无法在运行 Windows 7 和 Office 2007 的客户端计算机上安装。我认为问题是对“Microsoft Office”的引用14.0 对象库”和“Microsoft.Office.Interop.PowerPoint”版本 14.0，但我不知道如何更改对版本 12.0 的引用，这可能与 Office 2007 兼容。

我的 Visual Studio 中“参考”中唯一可用的版本是 14.0 版本。有什么方法可以获取旧版本，或者以其他方式使我的应用程序向后兼容？

我的客户在尝试安装时看到的错误是“应用程序要求首先在全局程序集缓存 (GAC) 中安装程序集 Microsoft.Interop.Powerpoint 版本 14.0.0.0。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T01:38:32.103

我过去为 Word 做过这个，我怀疑它也适用于 PowerPoint。但这可能有点冒险，但这是 VB.Net 真正大放异彩的一个领域 :)

本质上，您使用调试版本进行开发并使用发布版本进行部署，并且对象使用不同的绑定类型。条件编译控制两种绑定方式的切换。

警告：我没有尝试过这个，但它应该非常接近你所追求的。

```
' Code for where you declare you your objects...
#If DEBUG Then
    ' Create the object for the dev environment using early binding
    Protected PowerpointApp As PowerPoint.Application = Nothing
    Protected PowerpointDoc As PowerPoint.Document = Nothing
#Else
    ' Create the object for the compiled application using late binding
    Protected PowerpointApp As Object = Nothing
    Protected PowerpointDoc As Object = Nothing
#End If

' Code for where you create your objects...
#If DEBUG Then
    ' Declare the object for the dev environment using early binding
    PowerpointApp = New PowerPoint.Application
#Else
    ' Declare the object for the compiled application using late binding
    PowerpointApp = CreateObject("POWERPOINT.APPLICATION")
#End If
' Use whichever method you want to open the document
PowerpointDoc = PowerpointApp.Documents.Open(etc, etc, etc, ...) 
```

# matlab - 稳定性（数值分析）

> ID：13276737
> 
> 赞同：1
> 
> 时间：2012-11-07T19:26:02.770
> 
> 标签：matlab

我试图找到满足以下等式的最大机器数 x：x+a=a，其中 a 是给定的整数。（我不允许使用 eps。）

这是我的代码（这不是真正的工作）：

```
function [] = Largest_x()

a=2184;
x=0.0000000001
while (x+a)~=a
    x=2*x;
end
fprintf('The biggest value of x in order that x+a=a \n (where a is equal to %g) is : %g \n',a,x);
end 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T19:41:39.483

答案是`eps(a)/2`。

`eps`是与下一个浮点数的差，所以如果你将一半或更少的值加到浮点数中，它不会改变。例如：

```
100+eps(100)/2==100
ans =
     1

%# divide by less than two
100+eps(100)/1.9==100
ans =
     0

%# what is that number x?
eps(100)/2
ans =
   7.1054e-15 
```

如果您不想依赖`eps`，可以将数字计算为

```
2^(-53+floor(log2(a))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:37:55.007

你这个小算法肯定是不正确的。唯一的条件`A = X + A`是 when`X`等于 0。默认情况下，matlab 数据类型为`doubles`64 位。

让我们假设 matlab 使用的是 8 位整数。满足等式的唯一方法`A = X + A`是`X`具有 的二进制表示`[0 0 0 0 0 0 0 0]`。因此，1 到 0 之间的任何数字都可以作为小数点从整数中截断。因此，如果您将使用整数`A = A + X`的值设置为`X`介于`[0,1)`. 然而这个值是没有意义的，因为 X 不会取这个值，而是取 的值`0`。

听起来您正在尝试查找 matlab 数据类型的分辨率。看到这个： http: [//www.mathworks.com/help/matlab/matlab_prog/floating-point-numbers.html](http://www.mathworks.com/help/matlab/matlab_prog/floating-point-numbers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T17:14:31.643

Jonas 提供的正确答案是：`0.5 * eps(a)`

这是经验和近似解决方案的替代方案：

```
>> a = 2184;
>> e = 2 .^ (-100 : 100); % logarithmic scale
>> idx = find(a + e == a, 1, 'last')

idx =

    59

>> e(idx)

ans =

  2.2737e-013 
```

# ruby-on-rails-3 - Rails 3 Symbol.gte 方法

> ID：13276739
> 
> 赞同：0
> 
> 时间：2012-11-07T19:26:04.403
> 
> 标签：ruby-on-rails-3, mongodb, activerecord

我看到了以下代码示例：

```
Subscription.where(:created_at.gte => t0)` 
```

对我来说，这似乎更像 ruby​​/rails，而不是：

```
Subscription.where("created_at > ?", t0)` 
```

但是，尝试在我自己的代码中重现这一点会导致：

> :created_at:Symbol 的未定义方法“gte”

我不确定，但我相信这是一种 MongoDB 方法。如果是这样，有什么办法可以扩展 ActiveRecord 来使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:27:38.180

你是对的。这是[mongoid 查询 DSL](http://mongoid.org/en/mongoid/docs/querying.html#queries)。

`ActiveRecord`使用[squeel](https://github.com/ernie/squeel) gem可以实现类似的扩展方式。但是，它略有不同。

```
Subscription.where{ created_at.gte => t0 } 
```

注意不同的括号，`created_at`它不是一个符号。

# c# - 防止绕行功能。避免开裂

> ID：13276741
> 
> 赞同：3
> 
> 时间：2012-11-07T19:26:10.570
> 
> 标签：c#, .net, winapi, cracking, detours

`Check`有一个使用 DLL函数检查激活的应用程序。`Check`如果应用程序被激活，则返回 1，否则返回 0。我使用 MS detours lib 进行函数挂钩，创建了简单的应用程序和包含函数（始终返回 1）的简单应用程序和 DLL ，该函数具有与我的版本`MyCheck`相同的签名和迂回函数。`Check`显然它可以工作并且应用程序被成功破解，所以我需要避免它。

1.  我试图`Check`直接调用函数（通过指定确切的地址），甚至不使用`GetProcAddress`，但看起来 detours lib 正在修改函数体本身，而不是导出表。

    ```
    [UnmanagedFunctionPointer(CallingConvention.StdCall)]
    private delegate bool CheckFunctionDelegate();

    static void Main(string[] args)
    {
        ProcessModule module = Process.GetCurrentProcess().Modules
            .Cast<ProcessModule>()
            .First(m => m.ModuleName == "licensing_check.dll");

        IntPtr procedurePtr = IntPtr.Add(module.BaseAddress, 0x00003FF0);

        // Calling validation function by pointer
        CheckFunctionDelegate checkFunction = (CheckFunctionDelegate)
            Marshal.GetDelegateForFunctionPointer(procedurePtr, typeof(CheckFunctionDelegate));

        if (checkFunction())
        {
            // do some stuff
        }
    } 
    ```

    }

2.  然后我尝试读取函数体，我发现绕道后 MD5 校验和与原始校验和不同。所以我试图读取内存中DLL的全部内容并检查它以确认DLL内容没有改变，但它也不起作用。它抛出`AccessViolationException`。

    Process.EnterDebugMode();

    ProcessModule 模块 = Process.GetCurrentProcess().MainModule; 字节[] 数据 = 新字节[module.ModuleMemorySize]; Marshal.Copy(module.BaseAddress, data, 0, module.ModuleMemorySize);

我在这里使用了 MainModule，但它对`Process.GetCurrentProcess().Modules`集合中的每个模块都给出了相同的错误。

我将不胜感激，我不一定希望以我描述的一种方式解决它，任何好的解决方案都是可以接受的。

谢谢。

# c# - 创建没有外键的导航属性？

> ID：13276745
> 
> 赞同：0
> 
> 时间：2012-11-07T19:26:19.067
> 
> 标签：c#, .net, asp.net-mvc-3, linq, entity

我正在尝试使用现有数据库为我的数据模型创建导航属性。数据有一个共享键（如外键），但在数据库中没有以这种方式指定。这是它的样子：

```
 [Table("Alpha")]
    public class Alpha
    {
        public int AlphaID { get; set; }

        public int AlphaGroupID { get; set; }

        public int? ParentAlphaID { get; set; }

        public int? CodeID { get; set; }

        public int? BracketCodeID { get; set; }

        public string Title { get; set; }
    }

[Table("AlphaGroup")]
    public class AlphaGroup
    {
        [Column("AlphaGroupID")]
        public int AlphaGroupID { get; set; }

        public string Title { get; set; }

        public string TitleAddon { get; set; }

    } 
```

AlphaGroupID 需要是 AlphaGroupID 的导航属性，但不是外键。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T05:15:41.397

一种方法是在父类中使用 collection，如您的示例中所示：

```
public virtual ICollection<AlphaGroup> AlphaGroup { get; set; } 
```

# python - 使用 Python 通过 ssh 将文件分类到远程 bash 脚本

> ID：13276755
> 
> 赞同：4
> 
> 时间：2012-11-07T19:26:47.843
> 
> 标签：python, bash, shlex

我正在使用带有 shlex 的 subprocess.popen 来使用 ssh 调用远程 bash 脚本。该命令在 bash 本身上运行良好。但是，一旦我尝试使用 subprocess.popen 将其转换为 python 和 shlex，它就会出错。

远程 bash 脚本：

```
#!/bin/bash
tmp="";     
while read -r line;
do
    tmp="$tmp $line\n";
done;
echo $tmp; 
```

**BASH CMD 结果**（在命令行调用远程 bash 脚本）

```
$> ssh x.x.x.x cat < /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt " | /path/to/bash/script.sh;"
Bar\n
$> 
```

Python代码

```
import shlex
import subprocess

fn = '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt'
s = """                                                                    
ssh x.x.x.x cat < {localfile} '| /path/to/bash/script.sh;'
""".format(localfile=fn)

print s

lexer = shlex.shlex(s)                                                     
lexer.quotes = "'"                                                         
lexer.whitespace_split = True                                              
sbash = list(lexer)                                                        
print sbash                                                                

# print buildCmd                                                           
proc=subprocess.Popen(sbash,stdout=subprocess.PIPE,stderr=subprocess.PIPE) 
out,err=proc.communicate()                                                 

print "Out: " + out                                                        
print "Err: " + err 
```

**Python脚本结果**：

```
$> python rt.py

    ssh x.x.x.x cat < /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt '| /path/to/bash/script.sh'
['ssh', 'x.x.x.x', 'cat', '<', '/tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt', "'| /path/to/bash/script.sh'"]
Out: 
Err: bash: /tmp/bef69a1d-e580-5780-8963-6a9b950e529f.txt: No such file or directory
$> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:51:40.593

问题是您在命令中使用了 shell 重定向，但是在使用子进程时没有生成 shell。

考虑以下（非常简单的）程序：

```
import sys
print sys.argv 
```

现在，如果我们像你一样运行它`ssh`（假设`foofile.txt`存在），我们得到：

```
python argcheck.py ssh cat < foofile.txt " | /path/to/bash/script.sh;"
['argcheck.py', 'ssh', 'cat', ' | /path/to/bash/script.sh;'] 
```

请注意，`< foofile.txt`永远不要使用 python 的命令行参数。这是因为 bash 解析器拦截了`<`和 后面的文件，并将该文件的内容重定向到程序的标准输入。换句话说，`ssh`就是从标准输入读取文件。您还希望将文件传递给`stdin`使用`ssh`python。

```
s = """                                                                    
ssh x.x.x.x cat '| /path/to/bash/script.sh;'
"""

#<snip>

proc=subprocess.Popen(sbash,stdout=subprocess.PIPE,stderr=subprocess.PIPE,
                            stdin=subprocess.PIPE)
out,err=proc.communicate(open(fn).read()) 
```

大概会起作用。

* * *

以下对我有用：

```
import subprocess
from subprocess import PIPE

with open('foo.h') as f:
    p = subprocess.Popen(['ssh','mgilson@XXXXX','cat','| cat'],stdin=f,stdout=PIPE,stderr=PIPE)
    out,err = p.communicate()
    print out
    print '#'*80
    print err 
```

和中的等效命令`bash`：

```
ssh mgilson@XXXXX cat < foo.h '| cat' 
```

`foo.h`我的本地机器上的文件在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:50:57.107

为什么不放弃中间人并使用[Paramiko](http://pypi.python.org/pypi/paramiko)？

# c - 为什么在 'int' 之前出现“错误：预期的 '='、','、';'、'asm' 或 '__attribute__'”？

> ID：13276764
> 
> 赞同：-4
> 
> 时间：2012-11-07T19:27:27.410
> 
> 标签：c, compiler-errors

> processpairs2.c:7：错误：在 'int' 之前需要 '='、','、';'、'asm' 或 '<strong>attribute'</p>

是我每次编译文件时都会遇到的错误，错误将我引向第 7 行，这是我声明`main()`函数的地方。

我的主要功能被声明为

```
int main(int argc, char *argv[]) 
```

有谁知道是什么原因造成的？

任何帮助是极大的赞赏。

第 1-6 行是

```
#include<stdio.h>
#define ROWS 4
#define COLS 10
void checkhighestpair();
int *ptotal, *pval1, *pval2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T19:30:37.557

在后面附加`;`：

```
int *ptotal, *pval1, *pval2 
```

所以它变成：

```
int *ptotal, *pval1, *pval2; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T19:31:35.147

你不只是错过了 ; 在最后一行那里？...

# java - Java - 比较 2 个 int 数组并根据它们的值判断它们

> ID：13276765
> 
> 赞同：4
> 
> 时间：2012-11-07T19:27:27.670
> 
> 标签：java, arrays, compare

我有一组包含相同数量的数字的 2 个 int 数组

例如

```
int[] array1 = {1,3,5,5,2}
int[] array2 = {5,3,4,4,4} 
```

我需要根据 2 个标准来比较它们

1.  有多少元素在同一个索引上有相同的值
2.  有多少元素在不同的索引上具有相同的值

并返回一个表示值的整数数组

我有几个例子，以便您更好地理解：

```
 int[] array0 = {1,3,5,5,2};
   int[] array1 = {5,3,4,4,4};
   int[] array2 = {5,3,4,4,5};
   int[] array3 = {2,3,2,2,4};
   int[] array4 = {5,5,2,1,3};
   int[] array5 = {3,1,5,5,2};
   int[] array6 = {1,3,5,5,2};

   compare(array0,array1); //this would return 1,1
   compare(array0,array2); //this would return 1,2
   compare(array0,array3); //this would return 1,1
   compare(array0,array4); //this would return 0,5
   compare(array0,array5); //this would return 3,2
   compare(array0,array6); //this would return 5,0 
```

对于第一个数字很简单，我只需要检查 array1 的索引 i 上的元素是否与 array2 中的相同。

我在生成第二个数字时遇到问题，因为应该采用其中一个数组中的最小数字。如果我只看 array1 的元素是否在 array2 的某个地方，它在某些情况下会产生错误的结果。

如果你看

```
int[] array1 = {1,3,5,5,2} 
```

和

```
int[] array3 = {2,3,2,2,4}; 
```

并检查 array1 在索引上是否与 array3 具有相同的内容，它会返回 3 个数字相等但在不同的位置，这是错误的，因为它应该从最小的数字判断，结果应该是 1。

如果我切换它来比较 array3 在某个索引上是否与 array1 具有相同的内容，它适用于这种情况，但不适用于其他情况。

关于如何解决这个问题的任何想法，我很无能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:39:31.453

*   克隆两个输入整数数组。

*   检查并查看元素在同一索引上是否具有相同的值。

*   如果是这样，将 1 添加到相同的索引计数器并将输入整数数组中的值更改为 -1（或小于最小有效值的数字）。

*   使用嵌套的 for 循环检查元素是否具有相同的值。换句话说，检查第一个整数数组的第一个元素和第二个整数数组的所有元素。跳过两个数组中具有相同索引的元素，并跳过小于最小有效值的元素。

*   如果是这样，将 1 添加到不同的索引计数器并将输入整数数组中的值更改为 -1（或小于最小有效值的数字）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:46:21.453

您需要将所有数组转置为树状结构，该结构基本上将索引所有数组中的所有唯一值，并存储指向它们在数组中的位置和哪个数组的指针。该树的基本蓝图结构将是：

```
uniqElemVal->arrayIndx->arrayID = true 
```

其中 uniqElemVal 将是 1,3,5,2 代表 1,3,5,5,2，2,3,4 代表 2,3,2,2,4 等，所有工会

arrayIndx 将是第一个数组 0 中的 1，对于 5 将是 2 和 3 等。

数组 ID 是任意的，可让您键入每个数组，例如第一个为 1，第二个为 2，等等。

所以在这种情况下：

```
#1st array
1->0->1
3->1->1
5->2->1
5->3->1
2->4->1

#2nd array
2->0->2    
3->1->2 
3->2->2
2->3->2
2->4->2
4->5->2 
```

然后，当您遍历这棵树时，只要您有一个具有超过 1 个叶子的 2 级节点，这意味着该特定元素值在多个数组的特定位置存在匹配。

我个人将这棵树定义为

```
HashMap<Integer, HashMap<Integer, ArrayList<Integer>>> 
```

因此，只要您有一个具有 >1 个元素的叶数组列表，就意味着您有一个匹配项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:48:00.340

首先，这听起来是一个非常糟糕的主意。不要返回一个数组，其中每个索引都意味着不同的和神秘的东西。制作两个方法：compareSameIndex(array, array) 和 compareDifferentIndex(array, array)。

对于这些方法的实际实现，您可以检查第一个数组中的每个索引以查看它们是否出现在第二个数组中的任何位置并调用它只是 compare()。然后 compareDifferentIndex() 变成 compare()-compareSameIndex()。例如：

```
public int compare (int[] array0, int[] array1) {
  int matches = 0;
  List<Integer> list1 = Arrays.asList(array1);

  for (int curInt : array0) {
    if (list1.contains(curInt)) {
      matches++;
    }
  }
  return matches;
}

public int compareSameIndex(int[] array0, int[] array1) {
  int matches = 0;
  for (int i=0; i < array0.length; i++) {
    if (array0[i] == array1[i]) {
      matches++
    }
  }
  return matches;
}

public int compareDifferentIndex(int[] array0, int[] array1) {
  return compare(array0, array1) - compareSameIndex(array0, array1);
} 
```

当相同的数字出现两次时，要求似乎有点模糊，但您可以将该逻辑构建到 compare() 中以适应。您也可以针对非常大的数组进行优化，在这些数组中您不会两次检查相同的数字，但这将是我将采用的一般方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:39:59.190

也许对于第二种情况，您可以尝试从数组中删除数字并在发现它们匹配后退出循环。您可以将临时数组设置为原始数组的值。然后对照 中的`array1[0]`所有值检查 的值`array3`。找到匹配项后，从两个数组中删除数字并`array1[1]`检查`array3`.

因此，当您检查`array1[4]`时`array3[0]`，您将得到匹配。然后您将删除这两个数字并跳出循环。没有更多数字要签入`array1`，因此结果将为 1。

我认为这将解决两次计算相同值的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T19:43:18.863

你可以有一个已经访问过数字的集合。你会喜欢：（不测试这段代码是否运行，只是给你一个想法）

```
public int[] compare(int[] first, int[] second) {
     Set<Integer> numbersFoundInFirstArray = new LinkedHashSet<Integer>();
     Set<Integer> numbersFoundInSecondArray = new LinkedHashSet<Integer>();
     int inSameIndex = 0;
     int inDifferentIndex = 0;

     for (int i; i < first.length; i++) {
         if (first[i] == second[i]) {
             inSameIndex++;
         }
         if (numbersFoundInFirstArray.contains(second[i])) {
             inDifferentIndex++;
         }
         if (numbersFoundInSecondArray.contains(first[i])) {
             inDifferentIndex++;
         }
         numbersFoundInFirstArray.add(first[i]);
         numbersFoundInSecondArray.add(second[i]);
     }
     return new int[] {inSameIndex, inDifferentIndex};
} 
```

如果我记得清楚，集合中的包含比较有 O(1)。Set 的属性是您将只有一个特定类型的元素。所以，如果你加 1 两次，它将只有一个 1 的引用。这样，你将只测试当前数字是否已经在另一个数组中找到:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T20:40:45.183

This should do the trick:

```
public void compare(int[] arrayA, int[] arrayB) {
    int sameIndex = 0;
    int diffIndex = 0;
    //Made two new empty arrays to save the status of each element in the corresponding array, whether it has been checked our not, if not, it'd be null.
    String[] arrayAstatus = new String[arrayA.length];
    String[] arrayBstatus = new String[arrayB.length];
    for (int i = 0; i < arrayA.length; i++) {            
        if (arrayA[i] == arrayB[i] || arrayAstatus[i] != null) {
            sameIndex++;
            continue;
        }
        for (int a = 0; a < arrayB.length; a++) {
            if (a == i || arrayBstatus[a] != null) {
                continue;
            }
            if (arrayA[i] == arrayB[a]) {
                arrayAstatus[i] = "checked";
                arrayBstatus[a] = "checked";
                diffIndex++;
                break;
            }
        }
    }
    System.out.println(sameIndex + ", " + diffIndex);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T19:52:33.043

检查参数只是一个好习惯。可能有一些小的优化可以在这里完成，但是哈希可以让你存储你已经访问过的位置，以便不再计算它们一次。

```
 private int[] compare(int[] arr1, int[] arr2){
    int same_index = 0;
    Hashtable differences = new Hashtable();
    int diff_count = 0;
    if (arr1.length != arr2.length){
        throw new IllegalArgumentException("Array Size is not identical.");
    } else {
       for(int count = 0; count < arr1.length; count++){
          if (arr1[count] == arr2[count]{
              same_index++;
              differences.put(count, null);
          } else {
              for (int count2 = 0; count2 < arr1.length; count2++){
                  if(!differences.containsKey(count2) && arr1[count] == arr2[count2]){
                      differences.put(count2, null);
                      diff_count++;
                  }

              }                  
          }
       }
    }
    int[] returnArray = new int[2];
    returnArray[0] = same_count;
    returnArray[1] = diff_count;
    return (returnArray);
 } 
```

# android - 在 alertDialog 之外获取 touchEvent

> ID：13276768
> 
> 赞同：3
> 
> 时间：2012-11-07T19:27:31.960
> 
> 标签：android

我有一个主视图（SurfaceView），我在其中打开一个不带按钮的 alertDialog 来显示一些信息。因此，alertDialog 是主视图上方的一个小窗口。

当用户触摸屏幕上的任何位置时，我想关闭 alertDialog 。

到目前为止，我可以使用 alertDialog 中的 touchEvent 关闭 alertDialog。

alterDialog 或surfaceView 上是否有属性？

即使 alertDialog 正在显示，我也可以在 surfaceView 上激活 touchEvent 侦听器吗？

安卓 2.3.3

我在这个问题上找到了有关我的任务的其他信息：[dialog dismiss](https://stackoverflow.com/questions/7214365/tap-outside-android-dialog-to-dismiss-it)。现在我设置了这两个标志（我的对话框不是模态的）：FLAG_NOT_TOUCH_MODAL、FLAG_WATCH_OUTSIDE_TOUCH

不幸的是，在触摸事件的覆盖中，当在对话框外触摸时，我从未收到事件 MotionEvent.ACTION_OUTSIDE。

在我的活动中，我这样做：

```
alertBuilder.setView(mDialogLayout);
alertDialog = alertBuilder.create();
alertDialog.setOwnerActivity(this); 
```

后来在另一堂课上，我这样做了：

```
alertDialog.show();
WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
lp.copyFrom(alertDialog.getWindow().getAttributes());
lp.width = (int)(oJassSurfaceView.oCanvas.getWidth() *Constants.d_FactorResizeDialogWidth);

lp.height = (int)(oJassSurfaceView.oCanvas.getHeight() *Constants.d_FactorResizeDialogHeight);

lp.x=Constants.iX_PositionDialog;

lp.y=Constants.iY_PositionDialog;

alertDialog.getWindow().setAttributes(lp);
alertDialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL, WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL);

alertDialog.getWindow().setFlags(WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH, WindowManager.LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH); 
```

错误在哪里？设置标志时是否需要遵循一定的顺序？

# html - 如何通知用户 HTML5 离线网络应用需要更新？

> ID：13276769
> 
> 赞同：0
> 
> 时间：2012-11-07T19:27:33.553
> 
> 标签：html, offline, notify

我正在创建一个用于 iOS 和 Android 的 HTML5 离线网络应用程序。

是否有通知用户更新可用的机制——例如，应用程序快捷图标上的红点？如果没有，我是否可以通过推送通知或其他方式来实现这一点？

我知道我可以使用清单文件来声明应用程序应尝试从服务器更新哪些文件 - 但我的客户询问该应用程序是否能够直观地通知用户需要更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:30:43.927

不，除非您启动应用程序，否则应用程序的任何代码都不会运行，此时如果您在线，它将根据清单自动更新。如果您处于离线状态，则应用无法检查是否需要更新。

# javascript - 使用jquery在点击时淡入正文背景

> ID：13276770
> 
> 赞同：2
> 
> 时间：2012-11-07T19:27:35.780
> 
> 标签：javascript, jquery, css

现在，我正在使用 switchClass 来更改正文背景。变化是立竿见影的，对眼睛来说并不容易。

```
$('.Click').click(function () {
    var thisClass = $(this).attr('class');
    var st = thisClass.split(' ');
    var firstClass = st[0];

    if (firstClass == "item1") {
        $('.mask').animate({
            marginLeft: "-100%"
        }, 600, function () {
            $("body").switchClass($("body").attr("className"), "bg1");
        });
    } else if (firstClass == "item2") {
        $('.jobsMask').animate({
            marginLeft: "-200%"
        }, 600, function () {
            $("body").switchClass($("body").attr("className"), "bg2");
        });
    }
}); 
```

我如何对此进行动画处理/使其不那么突然？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:37:51.717

**对于`background-color`褪色：**

您可以使用`body`元素上的过渡来动画更改`background`属性，如下所示：

```
body { 
  -ms-transition: background 0.8s ease 0s;
  -moz-transition: background 0.8s ease 0s;
  -o-transition: background 0.8s ease 0s;
  -webkit-transition: background 0.8s ease 0s;
  transition: background 0.8s ease 0s;  
} 
```

测试它：http: [//jsbin.com/odabit/2/edit](http://jsbin.com/odabit/2/edit)

* * *

**对于褪色背景图像：**

转换似乎不起作用`background-image`（编辑：它们在 Chrome 中起作用，但在 Fx16、Opera12.1 或 IE9 中不起作用），所以我的解决方法是将你的 bg 图像放在单独的 div 上，然后淡入淡出，像这样：http: [//jsbin.com/odabit/7/edit](http://jsbin.com/odabit/7/edit)

切换代码如下所示：

```
var cls1 = 'bg1', cls2 = 'bg2',
  body = $('body'),
  bg1 = body.hasClass(cls1) ||  !!body.children('.'+cls1)[0],
  bg = bg1 ? body.children('.'+cls1) : body.children('.'+cls2),
  newBg;

if (!bg[0]) {
bg = $('<div>', {'class': (bg1 ? cls1 : cls2)}).prependTo(body);
}

newBg =  $('<div>', {'class': (bg1 ? cls2 : cls1)}).insertAfter(bg).hide();

body.removeClass(cls1 +' ' +cls2);

bg.fadeOut('slow', function() { bg.remove(); });
newBg.fadeIn('slow'); 
```

以及支持它的 CSS：

```
body > div[class^="bg"] {
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  z-index: -1;
}

.bg1 {
  background: url(/* image 1 */);
}

.bg2 {
 background: url(/* image 2 */); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:31:58.000

将 css 转换添加到类中的所有属性，或者使用这个：

```
$("body").switchClass($("body").attr("className"), "bg2", 1000); 
```

[您可以在此处](http://api.jqueryui.com/switchClass/)找到文档。

我在这里假设您的课程的背景颜色不同。如果它们有不同的背景图像，它们之间的转换就不是那么简单了。

# php - Laravel：嵌套控制器并使父控制器重定向到子控制器？

> ID：13276777
> 
> 赞同：2
> 
> 时间：2012-11-07T19:27:51.970
> 
> 标签：php, model, routes, nested-class, laravel

这是我在 Laravel 的第一个项目，所以和我一起玩吧！

目标是创建一个CMS。每个页面都会有它自己的“slug”，所以如果我命名一个页面`This is a test`，它的 slug 将是`this-is-a-test`。我希望能够通过转到 来查看该页面`example.com/this-is-a-test`。

为此，我猜我将不得不做类似的事情：

```
Route::any('(:any)', 'view@index'); 
```

并使用索引方法创建一个名为 View 的控制器。都很好，对吧？

问题是创建管理区域。我将在该区域内创建几个页面，例如仪表板、页面、设置和工具。由于所有这些都是管理中的子页面，我认为将它们设为嵌套控制器是合适的，对吧？唯一的问题是，当我访问时`/admin`，我想直接显示仪表板（`/admin/dashboard`）。我宁愿只调用仪表板控制器，而不是`/admin/dashboard`从管理控制器重定向。那可能吗？

所以，为了说明我的意思：

```
example.com/admin -> loads admin.dashboard
example.com/admin/dashboard -> also loads admin.dashboard 
```

这是我所有的路线：

```
Route::get('admin', array('as' => 'admin', 'use' => 'admin.dashboard@index'));
Route::get('admin/dashboard', array('as' => 'admin_dashboard', 'use' => 
Route::any('/', 'view@index'); // Also, should this be below or above the admin routes? This route will show the actual cms pages.'admin.dashboard@index')); 
```

这是我的 admin_dashboard 控制器：

```
class Admin_Dashboard_Controller extends Base_Controller {

    public $restful = true;    

    public function get_index()
    {
        return 'in dashboard';
    }

} 
```

视图控制器只显示一个到管理页面的链接，这是有效的。我只是无法弄清楚管理路线有什么问题？当我去`/admin`或`admin/dashboard`我只是得到一个空白页时，没有 404。如果我去`admin/blah`或只是`blabla`我得到一个 404，所以我知道正在发生*某些*事情，它只是没有正确发生。我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:26:46.650

我误解了控制器的命名约定。

事情是这样*的*：

```
controllers
    admin
        admin_dashboard.php   Containing controller Admin_Dashboard_Controller 
```

应该是：

```
controllers
    admin
        dashboard.php         Containing controller Admin_Dashboard_Controller 
```

换句话说，我不应该在控制器文件名的开头添加“admin”。现在一切正常。

我实际上也能够将路由代码缩小到这个：

```
Route::get(array('admin', 'admin/dashboard'), array('as' => 'admin', 'uses' => 'admin.dashboard@index')); 
```

# sql - 更改缺少表的 SQL 数据库的名称

> ID：13276778
> 
> 赞同：0
> 
> 时间：2012-11-07T19:27:52.070
> 
> 标签：sql, sql-server

更改移动 mdf 和 ldf 文件的 SQL Server 2005 数据库的名称时。

首先我在我的程序安装中运行一个脚本：

```
Alter Database [[DBNAME]] MODIFY NAME = [[RENAMEDBNAME]] 

Alter Database [[RENAMEDBNAME]] MODIFY FILE ( NAME =  [[DBNAME]], NEWNAME = [[RENAMEDBNAME]] )

Alter Database [[RENAMEDBNAME]] MODIFY FILE ( NAME =  [[DBNAME]_log], NEWNAME = [[RENAMEDBNAME]_log] )

Alter Database [[RENAMEDBNAME]] MODIFY FILE ( NAME =[[RENAMEDBNAME]]  , FILENAME  ='[DBPATH][RENAMEDBNAME].mdf'  )

Alter Database [[RENAMEDBNAME]] MODIFY FILE ( NAME =[[RENAMEDBNAME]_log]  , FILENAME  ='[DBPATH][RENAMEDBNAME]_log.ldf'  ) 
```

ALTER DATABASE [[RENAMEDBNAME]] 设置离线 GO

然后我在代码中移动文件。

然后在我使用的下一个脚本中

```
ALTER DATABASE  [[RENAMEDBNAME]] SET ONLINE GO 
```

数据库中缺少这些表 - 有什么想法吗？我应该使用备份和恢复吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:55:02.640

到目前为止，备份和恢复是最简单、最可靠的方法。您可以使用以下脚本来完成您想要的内容：

```
/* Detach the database */
USE [master]
GO
ALTER DATABASE [junk] SET  SINGLE_USER WITH ROLLBACK IMMEDIATE
GO
USE [master]
GO
EXEC master.dbo.sp_detach_db @dbname = N'junk'
GO

/* Move your files and reattach using this script */
USE [master]
GO
CREATE DATABASE [junk2] ON 
( FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50\MSSQL\DATA\junk2.mdf' ),
( FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL10_50\MSSQL\DATA\junk2_log.ldf' )
 FOR ATTACH
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:48:53.127

请参阅 Technet 的以下文章。他们是你似乎错了的两件事。

1.  SET OFFLINE 必须在更改之前完成
2.  您一次只能执行一个文件。

参考文章在[这里](http://technet.microsoft.com/en-us/magazine/gg452698.aspx)

# c# - 尝试使用“外部别名”引用具有相同命名空间的两个不同 DLL 时出错 (Visual Studio 2010)

> ID：13276781
> 
> 赞同：2
> 
> 时间：2012-11-07T19:28:07.347
> 
> 标签：c#, visual-studio-2010

我已经阅读了几篇文章，这些文章让我相信可以在同一个项目中引用两个具有相同命名空间的 DLL - 请参阅[http://blogs.msdn.com/b/ansonh/archive/2006/09/ 27/774692.aspx](http://blogs.msdn.com/b/ansonh/archive/2006/09/27/774692.aspx)。

但是，当我尝试这样做时，我遇到了一些我无法解决的问题。

这是我所做的：

1.  为一个名为 V1.Model 的类库创建一个项目，该项目具有类 Model.MyClass。签署此程序集。
2.  为一个名为 Model 的类库创建另一个项目，该项目也有类 Model.MyClass。签署组装。
3.  将上述两个项目创建的 DLL 复制到一个文件夹中，比如 Versions，然后重命名它们（V1.Model -> V1.Model.dll，Model -> V2.Model.dll）。
4.  创建一个名为 Test 的控制台应用程序项目，该项目引用 V1.Model.dll 和 V2.Model.dll。
5.  将对 V1.Model 的引用的“别名”属性更改为“V1”。
6.  将对 V2.Model 的引用的“别名”属性更改为“V2”。
7.  创建以下引用这两个程序集的代码：

    外部别名 V1；
    外部别名 V2；

    static void Main(string[] args)
    {
    var v1 = new V1::Model.MyClass();
    var v2 = new V2::Model.MyClass();
    }

8.  构建并运行测试

当我这样做时，有几个问题。

一、V1.Model.dll没有复制到bin目录下。（事实上​​，如果我包含同一个命名空间的多个版本，似乎只复制了最新版本的 DLL）。当然，我可以通过手动将 dll 复制到 bin 目录来解决这个问题，但我很好奇为什么这是必要的。另外，请注意，我已将两个引用的“复制本地”属性更改为 true。

二，当我运行应用程序时，我收到以下错误：

> 无法加载文件或程序集“模型，版本=1.0.0.0，文化=中性，PublicKeyToken=d89c4561a79dd027”或其依赖项之一。该系统找不到指定的文件。

任何想法我做错了什么？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:49:14.317

当系统试图定位一个名为“Model”的程序集时，它会寻找一个名为“Model.dll”的文件。我*认为*这可以通过对程序集进行 GAC 来解决。

# ruby-on-rails - 获取模型名称和数量

> ID：13276783
> 
> 赞同：0
> 
> 时间：2012-11-07T19:28:11.090
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongoid

我有这个`models_name`：

```
model_names = Object.constants.collect { |sym| Object.const_get(sym) }.select { |constant| constant.class == Class && constant.include?(Mongoid::Document) }.collect { |klass| klass.name } 
```

结果是：

```
["Model_name1","Model_name2","Model_name3"] 
```

我需要类似的东西：

```
[{"Model1":"Count"},{"Model2":"Count"},{"Model3":"Count"}] 
```

我需要在图表中显示每个模型中的所有模型和对象计数器正在使用`morris.js`

你可以看看这个例子：

[http://jsbin.com/uzosiq/2/embed?javascript,live](http://jsbin.com/uzosiq/2/embed?javascript,live)

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:43:16.350

最后一个：

```
collect { |klass| klass.name } 
```

将其重写为

```
collect { |klass| [klass.name, klass.count] } 
```

这应该返回一个包含 2 个元素（类名和计数）的数组的数组。如果分配 this 的变量称为 a，只需执行以下操作：

```
Hash[a] 
```

现在您可以使用哈希值了。现在你可以这样做：

```
Hash[a].map do |k, v|
  {k => v}
end 
```

现在你有一个哈希数组，每个哈希值只有一个键值关联。我认为这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:25:12.580

```
module Foo

end

class Bar
  include Foo
end

1.upto(5) { Bar.new }

model_names = Object.constants.collect { |sym| Object.const_get(sym) }.
  select { |constant| constant.class == Class && constant.include?(Foo) }.
  inject({}) do |m,klass|
    m.update klass.name => ObjectSpace.each_object(klass).to_a.size
  end

p model_names

{"Bar"=>5} 
```

## 仅适用于基于 MRI 的红宝石，因此没有 jRuby 和 Runbinius。

## [这是一个现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=get-models-name-and-count.rb&versions=1.8.7-p370+1.9.2-p320+1.9.3-p286+2.0.0-preview1+ree-1.8.7-2012.02&run=true)

# iphone - 在 iOS 模拟器中重置对联系人的访问权限？

> ID：13276784
> 
> 赞同：26
> 
> 时间：2012-11-07T19:28:15.173
> 
> 标签：iphone, ios6, ios-simulator

我想测试联系授权过程，但模拟器不再要求我许可。我尝试过重置隐私设置，我尝试过完全重置模拟器，我尝试过删除应用程序，但无论如何，它从不征求我的许可。它只是假设我已经同意了。

我正在运行 iOS 6 模拟器。SO上有几个[类似的问题](https://stackoverflow.com/questions/12602984/abaddressbookgetauthorizationstatus-in-simulator-always-returns-kabauthorization)，但令人惊讶的是没有像样的答案。真的没有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-21T22:34:20.173

从 iOS 7 开始，前往“设置”、“通用”、“重置”并点击“重置位置和隐私”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T19:30:21.040

这些说明适用于 Xcode 6。

1.  在 Xcode 的“设备”窗口中找到要重置其访问设置的模拟器的标识符。

2.  删除`~/Library/Developer/CoreSimulator/Devices/<device>/data/Library/TCC/TCC.db`

3.  重新启动模拟器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T23:39:03.550

重置位置/隐私选项仅适用于设备。它在模拟器中不起作用。

编辑：这不再是真的，请参阅 laktak 的回答。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-06T00:07:38.620

您现在可以使用`xcrun simctl privacy`来控制这些设置。

例子：

*   `xcrun simctl privacy booted reset all`将为当前启动的模拟器中安装的所有应用程序重置所有支持的权限。
*   `xcrun simctl privacy booted revoke contacts com.example.my-app`将拒绝对当前启动的模拟器上给定的 Bundle ID 的完全联系人访问权限。

有关`xcrun simctl help privacy`更多详细信息，请参阅。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T13:29:25.363

好像这已经改变了。要重置权限，请访问：

设置 > 隐私 > 通讯录

# bash - 在bash中动态创建数组

> ID：13276788
> 
> 赞同：20
> 
> 时间：2012-11-07T19:28:29.357
> 
> 标签：bash

我想动态创建和填充一个数组，但它不是这样工作的：

```
i=0
while true; do
    read input
    field[$i]=$input
    ((i++))
    echo {$field[$i]}  
done 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T19:37:24.793

尝试这样的事情：

```
#! /bin/bash
field=()
while read -r input ; do
    field+=("$input")
done
echo Num items: ${#field[@]}
echo Data: ${field[@]} 
```

当没有更多输入可用时（文件末尾，`^D`在键盘中），它会停止读取，然后打印读取的元素数和整个数组。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T20:52:30.957

任务很好；查找错误：

```
echo "${field[$i]}" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T19:33:46.120

```
i= field=()
while :; do
    read -r 'field[i++]'
done 
```

是一种方式。`mapfile`是另一个。或其中任何[一个](http://mywiki.wooledge.org/BashFAQ/001)。但是，您发布的内容是有效的。

# python - 将元组打印为参数数量

> ID：13276796
> 
> 赞同：0
> 
> 时间：2012-11-07T19:29:18.603
> 
> 标签：python, python-2.7

我想传递可变数量的参数，然后打印它们（如果某些条件为真）。当我尝试这样做时：

```
def my_print(*args)
    print args 
```

它打印一个元组。如何让 python`my_print(a,b)`充当`print a,b`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:32:28.590

你可以这样做：

```
from __future__ import print_function

print(*args) 
```

这将为您提供 3.x 样式的打印功能，以便您可以解压缩参数。但是请注意，您需要在该模块的任何地方使用 3.x 语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:30:43.177

在 Python 2.x 中，您可以使用`str.join`：

```
def my_print(*args):
    print ' '.join(map(str, args)) 
```

如果您使用的是 Python 3.x，那么它会更容易，因为有一个`print`函数：

```
def my_print(*args):
    print(*args) 
```

其他答案也提到你可以`from __future__ import print_function`，但这有一个缺点，即所有使用该`print`语句的现有代码都会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:33:37.060

使用内置打印功能：

```
from __future__ import print_function

my_print = print 
```

或者

```
my_print = getattr(__builtins__, 'print') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:58:46.600

你可以试试

```
for _ in len(range(args)):
    print a[_], 
```

但看起来其他答案更正确

# sql-server - 函数分隔字符串

> ID：13276798
> 
> 赞同：1
> 
> 时间：2012-11-07T19:29:32.747
> 
> 标签：sql-server, function

我有这个问题要问你。我正在处理一个在一个字段中包含整个地址的函数。我正在尝试将它分开。我已经开始处理下面的问题，当我尝试处理 zip 时遇到了困难，我想先测试一下最后是否有拉链，如果有，我想把它从状态中分离出来。你能看一下吗？像往常一样非常感谢大家我感谢你的支持..

```
 declare @var1 varchar(100)='1234 S.Almeda way,Seattle,WA9810'--just an example
        ,@u int
        ,@r int
        ,@var2 varchar(100)
        ,@var3 varchar(100)
        ,@Zip varchar(25)
        ,@var4 varchar(100)=null
             set @u = charindex(',', @var1)
             set @var2=rtrim(ltrim(substring(@var1, @u+1, 999)))
             set @r=CHARINDEX(',',@var2)
             set @var3=rtrim(ltrim(substring(@var2, @r+1, 999)))

             --set @var4=RIGHT(@var3,5)--not enough
             if (len(@var3)>=5 and ISNUMERIC(@var3)=1 )
             set  @var4=RIGHT(@var3,5)
             set rtrim(substring(@var3,1,len(@var3)-5))
             else set @var4='' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:13:42.320

这是一些您可以合并到您的示例代码

```
declare @var1 varchar(100)='1234 S.Almeda way,Seattle,WA9810'--just an example
declare @lastcomma int = len(@var1) - charindex(',', reverse(@var1)+',')
declare @lastPart varchar(100) = substring(@var1, @lastcomma+2, 100)
select @lastPart 
declare @zipstart int = patindex('%[0-9]%', @lastpart)
declare @zip varchar(5) = ''
if @zipstart > 0
    select @zip = substring(@lastpart, @zipstart, 5), @lastPart = rtrim(substring(@lastpart,1,@zipstart-1))
select @lastpart, @zip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:10:45.647

您显然正在寻找一个不是内置 SQL Server 的拆分函数。

当我看到你给变量起的名字时，我已经停止阅读你的代码了（真的很糟糕的选择，它应该有某种意义）

实现的方法有很多，我会从google搜索中随机选择一种（不，我并不感到羞耻，我不想重新发明轮子）

```
CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (items varchar(8000))       
as       
begin       
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return       
end 
```

以这种方式使用它：

```
select top 10 * from dbo.split('1234 S.Almeda way,Seattle,WA9810',',') 
```

它会给你一列，每行都有一个结果

来源：[http ://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)

您可以通过快速网络搜索找到许多其他示例。;)

# hadoop - 如果目录不存在，Hadoop 属性“mapred.child.tmp”不会创建目录

> ID：13276799
> 
> 赞同：2
> 
> 时间：2012-11-07T19:29:39.390
> 
> 标签：hadoop, directory, tmp

根据以下链接 -

[http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#Directory#Structure](http://hadoop.apache.org/docs/r0.20.2/mapred_tutorial.html#Directory#Structure)

我期待hadoop创建其绝对路径作为值发送到“mapred.child.tmp”属性的目录：

```
<property>
    <name>mapred.child.tmp</name>
    <value>/hadoop/mapred/local/tmp</value>
</property> 
```

我注意到的另一件事是我们无法使用符号@taskid@ 设置此属性，如下所示：

```
<property>
    <name>mapred.child.tmp</name>
    <value>/hadoop/mapred/local/tmp/@taskid@</value>
</property> 
```

最好用类似于“mapred.child.java.opts”的 map/reduce 任务的 taskid 值对其进行插值。不确定是否有其他方法可以解决这个问题......？

感谢您在这件事上的任何帮助！

# c# - 部分类不包含定义

> ID：13276804
> 
> 赞同：1
> 
> 时间：2012-11-07T19:30:17.470
> 
> 标签：c#, class, partial

我遇到了一个奇怪的问题，终于解决了。就像分享这个经验一样，其他人会搜索这个主题并得到答案。我定义了 2 个部分类，并编译时出现“不包含...的定义”的错误。这很奇怪，因为当 2 个班级是单独的班级时它起作用了。

这是代码：

之前：Foo1.cs

```
public class foo1{public void xyz(){}} 
```

Foo2.cs

```
public class foo2{} 
```

之后：Foo1.cs

```
public partial class foo1{  public void xyz(){}} 
```

Foo2.cs

```
public partial class foo1{} 
```

编译说“MyNamespace.foo1 不包含 xyz 的定义”。但是上课不偏的时候xyz还是不错的！这可能是由不同的命名空间引起的。但我对此表示怀疑。因为如果命名空间不同，它将无法编译。

我终于想通了。问题出在 Foo1.cs 中，命名空间未定义，但在 Foo2.cs 中定义。在我定义分部类之前，编译器为 Foo1.cs 提供了一个默认命名空间，这与在 Foo2.cs 中显式定义的命名空间相同。但是对于分部类，编译器不会为分部类提供默认命名空间。这就是为什么当第三方调用 foo1.xyz() 时编译器会抱怨。

我学到了总是为每个单独的 cs 文件显式定义命名空间的教训，除了你没有定义命名空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T06:12:11.253

始终明确定义命名空间。

# c# - 从 IEnumerable 转换 > 到 ICollection

> ID：13276806
> 
> 赞同：5
> 
> 时间：2012-11-07T19:30:26.113
> 
> 标签：c#, linq, entity-framework, casting

我正在尝试将其转换`IEnumerable<IEnumerable<string>>`为`ICollection<Character>`但努力找出正确的方法，因为一个对象的结构与另一个对象的结构不同。

转换的原因是进行 json 反序列化并通过 Entity Framework 将其插入数据库。json 数据未规范化，与数据库的确切结构不匹配。在数据库中，我有一个`movie`和一个`person`具有多对多关系的。他们之间的桥梁表是`characters`。但是 json 中只有一个包含人物对象数组的电影对象，每个人都有他们扮演的角色数组（`IEnumerable<IEnumerable<string>>`）。

基本上，我需要将每部电影的人物及其角色转换为每部电影的角色及其各自的人物。

```
var movie = dataContractMovies.Select(m => new Movie {
    Title = m.Title,
    // not sure how to convert each Person and their characters
    Characters = // Need to take each Person and their Characters in m.Cast and cast to a new Character and a new Person for which the Character belongs to
}); 
```

**转换自**

```
public class MovieDataContract {
    [DataMember(Name = "title")]
    public string Title { get; set; }

    [DataMember(Name = "abridged_cast")]
    public virtual IEnumerable<Person> Cast { get; set; }
}

[DataContract]
public class Person {
    [DataMember(Name = "name")]
    public string Name { get; set; }

    [DataMember(Name = "characters")]
    public IEnumerable<string> Characters { get; set; }
} 
```

**转换成**

```
public partial class Movie {
    public string Title { get; set; }
    public virtual ICollection<Character> Characters { get; set; }

    public Movie() {
        this.Characters = new HashSet<Character>();
    }
}

public partial class Character {
    public string Name { get; set; }
    public virtual Movie Movie { get; set; }
    public virtual Person Person { get; set; }
}

public partial class Person {
    public string Name { get; set; }
    public virtual ICollection<Character> Characters { get; set; }

    public Person() {
        this.Characters = new HashSet<Character>();
    }
} 
```

**更新和进一步的问题**

如果我只是`public IEnumerable<Character> Characters`在`MovieDataContract`? 然后我可以做这样的事情（理论上，没有测试过）......

```
Characters = m.Characters; 
```

所以我的新`MovieDataContract`产品看起来像这样......

```
[DataContract]
public class MovieDataContract {
    [DataMember(Name = "title")]
    public string Title { get; set; }

    [DataMember(Name = "abridged_cast")]
    private IEnumerable<Person> _cast { get; set; }

    public IEnumerable<Character> Characters { 
        get{  
            foreach(var person in _cast) {
                foreach(string name in person.characters) {
                    yield return new Character { Name = name, Person = new Person { Name = person.name }}
                }
            }
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T22:24:59.690

我为我的回答做了一些假设： 1\. 我们只是插入新电影，而不是更新数据库中已经存在的电影。2\. 我们使用实体框架进行插入。3.正在添加的电影中的人尚未在与其他电影关联的数据库中。4\. 每部电影都有演员，每个演员至少有一个角色。

冒着被赶出酷儿童巴士的风险，我的解决方案不使用 LINQ，尽管我确信它可以被修改为这样做。请注意，使用 EF，您无需设置关联的两端即可将其插入数据库。

```
// Lookup is necessary because a person might be in more than one movie.
var personLookup = new Dictionary<string,Person>();

foreach (var contractMovie in dataContractMovies)
{
    var movie = new Movie() { Title = contractMovie.Title };

    foreach (var contractPerson in contractMovie.Cast)
    {
        if (!personLookup.ContainsKey(contractPerson.Name))
        {
            personLookup.Add(contractPerson.Name, new Person() { Name = contractPerson.Name });
        }
        var person = personLookup[contractPerson.Name];

        foreach (var contractCharacter in contractPerson.Characters)
        {
            var character = new Character() { Name = contractCharacter.Name, Person = person, Movie = movie };

            dataContext.Characters.Add(character);
        }
    }
 }
 dataContext.SaveChanges(); 
```

如果 DataContract 将 Movie 映射到 Character 而不是 Person（就像您在评论中建议的那样），您可以摆脱类似这样的事情：

```
var personLookup = new Dictionary<string, Person>();
var movie = dataContractMovies.Select(m => new Movie {
    Title = m.Title,
    Characters = m.Characters.Select(c => new Character() { Name = c.Name, Person = LookupPerson(c.Person, personLookup) }).ToList()
});

public Person LookupPerson(string personName, Dictionary<string, Person> personLookup)
{
        if (!personLookup.ContainsKey(personName))
        {
            personLookup.Add(personName, new Person() { Name = personName });
        }
        return personLookup[personName];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:15:43.050

```
var flattenedShape =
  from movie in dataContractMovies
  from person in movie.Cast
  from characterName in person.Characters
  select new {Movie = movie, Person = person, CharacterName = characterName};

List<Character> characters = new List<Character>();
Dictionary<MovieDataContract, Movie> movieMap =
  new Dictionary<MovieDataContract, Movie>();
Dictionary<PersonDataContract, Person> personMap =
  new Dictionary<PersonDataContract, Person>();

foreach(var row in flattenedShape)
{
  //have I seen this movie yet?
  if (!movieMap.ContainsKey(row.Movie))
  {
    movieMap.Add(row.Movie, new Movie() { Title = row.Movie.Title });
  }

  //have I seen this person yet?
  if (!personMap.ContainsKey(row.Person))
  {
    personMap.Add(row.Person, new Person() { Name = row.Person.Name });
  }

  //every character is unique.
  Character x = new Character() { Name = row.CharacterName };
  movieMap.Characters.Add(x);
  x.Movie = movieMap[row.Movie];
  personMap.Characters.Add(x);
  x.Person = personMap[row.Person];
  characters.Add(x);
}

//at this point, all the characters are in characters...
// all the movies are in the movieMap.Values...
// and all the persons are in the personMap.Values 
```

# java - 在Java中对数组进行降序排序

> ID：13276807
> 
> 赞同：0
> 
> 时间：2012-11-07T19:30:30.353
> 
> 标签：java, arrays, sorting

我正在玩数组和枚举，我想知道创建 Comparator 类以降序对这些日期进行排序的最有效方法是什么。这是我的代码。

```
 public enum Month {JAN(1), FEB(2), MAR(3), APR(4), MAY(5), JUN(6), JUL(7), 
                      AUG(8), SEPT(9), OCT(10), NOV(11), DEC(12);    
       final int monthBoundary;
       Month(int y){
       monthBoundary=y;}
   }

   public enum Date {FIRST(1), SECOND(2), THIRD(3), FORTH(4), 
                     FIFTH(5)... THIRTYFIRST(31);
       final int dateBoundary;
       Date(int z){
       dateBoundary=z;}
   }

   //constructor etc here

   private static final List<Cal> calendar = new ArrayList<Cal>();
   static {
     for (Month month : Month.values()) {
        for (Date date : Date.values()) {
            calendar.add(new Cal(date, month));
        }
     }
  }

  //creates new calendar dates
  public static ArrayList<Cal> newCal() {
    return new ArrayList<Cal>(calendar); 
  } 
```

使用以下语句，我可以按创建的顺序打印数组。

```
 System.out.print(Card.calendar()); 
```

您如何创建一个 Comparator 类来按降序对这些日期进行排序？理想情况下，我希望它对数组进行排序，无论它已经按顺序还是随机顺序。在这个阶段，我不关心不存在的日期（例如 2 月 31 日），因为我只是在练习和自学......只是想了解这个概念：）谢谢。

添加：

```
 public ArrayList<Cal> sortDescending(ArrayList<Cal> calList){
    Comparator<Cal> c = Collections.reverseOrder();
    Collections.sort(calList, c);
    return calList;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:34:24.950

```
Collections.sort(list, new Comparator<Cal>() {
    @Override
    public int compare(Cal cal1, Cal cal2) {
        int result = -cal1.getMonth().compareTo(cal2.getMonth()));
        if (result == 0) {
            result = -cal1.getDate().compareTo(cal2.getDate()));
        }
        return result;
    }
}); 
```

# shell - 安装 QSTK 期间的路径问题

> ID：13276816
> 
> 赞同：0
> 
> 时间：2012-11-07T19:30:51.100
> 
> 标签：shell, ubuntu, path, installation, qstk

我正在尝试安装 QSTK。我已将安装目录从默认主目录更改为另一个。我在 config.sh 中对两个变量 $QS 和 $QSDATA 进行了更改。进一步按照说明，我将 config.sh 复制到 local.sh。然后继续我编辑了 ~/.profile 和 ~/.bashrc 并在最后添加了该行

```
source ~/path/to/install/directory/QSTK/local.sh 
```

然后我注销并登录。我在终端上收到了这条消息：

```
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found
: command not found 
```

但是当我回显 $QS 和 $QSDATA 时，它们会显示正确的路径。

然后，当我尝试从我的 QSTK/Examples 运行任何示例时，它说找不到模块，尽管它在文件夹中非常多。我究竟做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:36:01.823

您必须更改`~/path/to/install/directory/QSTK/local.sh`为安装它的实际目录。对于我的安装，我将其更改为`source ~/QSTK/local.sh`因为我将 QSTK 安装到了我的主目录的根目录。

# c# - ResumableUpload 与 google drive api v2 .net

> ID：13276819
> 
> 赞同：0
> 
> 时间：2012-11-07T19:31:03.660
> 
> 标签：c#, asp.net-mvc, upload, google-drive-api

我正在尝试将文件上传到谷歌驱动器并监控上传进度。我正在使用 .net 和 api v2。

我使用的是 DriveService.Files.Insert 方法，它给了我一个 FilesResource.InsertMediaUpload，然后我使用 ProgressChanged 事件来列出进度。问题是这个事件只被调用了 3 次：“开始”、“上传”、“完成”状态。我想在“上传”状态下打很多电话。

这是我的代码：

```
 private UploadToGoogle(...)
    {
        //Consider I have an populated File and MemoryStream:
        MemoryStream contentStream = /*Populated memoryStream*/;
        File body = /*Populated file*/;

        FilesResource.InsertMediaUpload uploadRequest = null;

        try
        {
            contentStream.Position = 0;

            uploadRequest = driveService.Files.Insert(body, contentStream, body.MimeType);

            uploadRequest.ProgressChanged += new Action<Google.Apis.Upload.IUploadProgress>(UploadProgessEvent);

            Action asyncAction = () =>
            {
                uploadRequest.Upload();
                Console.WriteLine("Completed!");
            };

            var thread = new System.Threading.Thread(new System.Threading.ThreadStart(asyncAction));
            thread.Start();

        }catch(Exception) {}
    } 
```

互联网上有一些关于旧 API 中的 ResumableUpload 类的内容，但不知道如何在 v2 中使用它。我在 Google.Apis.Upload 命名空间中找到了 ResumableUpload 类，但它是抽象的，我不知道如何使用它。

我在文档中没有发现任何关于进度监控的有用信息：[https ://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

而且我真的不想通过WebRequest使用可恢复上传，有没有办法在.net sdk中实现它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:00:32.427

`ProgressChanged`仅在每次将完整的数据块发送到 API 时才会触发该事件。如果您减小块大小或文件远大于默认块大小，您将看到该事件被多次触发。

# c# - 创建 MS Word 文档时如何插入分页符

> ID：13276821
> 
> 赞同：9
> 
> 时间：2012-11-07T19:31:10.657
> 
> 标签：c#, asp.net, ms-word

我试图通过 C# 创建一个 Word 文档。我希望能够在我的代码中的某个点插入分页符，但是我不确定如何执行此操作。我主要使用 StringBuilder 来创建 html。这是在 Visual Studios 2010 中使用 c# 完成的。我查看了一些指南，但其中大多数都使用“Word 变量”之类的代码。所以我不确定“Word”是否来自额外下载的库或不是。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T00:03:41.463

这是一个将一些文本写入 word doc 然后添加分页符的示例。然后将其余的文本写入文档。为了获得更好的答案，您可能需要重写您的问题，因为不清楚何时要插入中断以及如何将信息写入文档。我假设很多，这从来都不是好事。

```
using Word = Microsoft.Office.interop.Word; 

//create a word app
Word._Application  wordApp = new Word.Application();
//add a page
Word.Document doc = wordApp.Documents.Add(Missing.Value, Missing.Value, Missing.Value, Missing.Value);
//show word
wordApp.Visible = true;
//write some tex
doc.Content.Text = "This is some content for the word document.\nI am going to want to place a page break HERE ";
//inster a page break after the last word
doc.Words.Last.InsertBreak(Word.WdBreakType.wdPageBreak);
//add some more text
doc.Content.Text += "This line should be on the next page.";
//clean up
Marshal.FinalReleaseComObject(wordApp);
Marshal.FinalReleaseComObject(doc);
GC.Collect();
GC.WaitForPendingFinalizers();
GC.Collect(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-27T08:49:24.623

如果选择了要插入分页符的位置（通过 Word.Selection）：

最简单的方法是在其中插入以下代码：

```
selection.TypeText("\f"); 
```

# c++ - 如何正确释放 C++ 向量？

> ID：13276823
> 
> 赞同：0
> 
> 时间：2012-11-07T19:31:16.890
> 
> 标签：c++, vector, memory-management

> **可能重复：**
> [如何正确释放或删除 C++ 向量？](https://stackoverflow.com/questions/8546239/how-to-correctly-deallocate-or-delete-a-c-vector)

我在尝试删除在向量中分配的内存时遇到了一些问题。即使我调用 list.clear()，它也不会释放内存。

所以我在一个名为 Set 的基于模板的类中有一些这样的代码

```
template <class T>
class Set {
public:
    // stuff
private:
    int size;
    std::vector<T> list;
}; 
```

在构造函数中，我为向量分配了内存。所以我调用 list = new std::vector;

为了您的兴趣，这里是我的复制构造函数和赋值运算符，我也知道我还为向量分配内存：

```
template <class T>
Set<T>::Set(const Set& aSet)
{
    size = aSet.size;
    list->clear();
    list = new vector<T>;
    for (int i = 0; i < size; ++i) {
        list[i] = aSet.list[i];
    }
}

template <class T>
Set<T>& Set<T>::operator=(const Set& right)
{
    if (this != &right) {
        list->clear();
        size = right.size;
        list = new vector<T>;
        for (int i = 0; i < size; ++i) {
            list[i] = right.list[i];
        }
    }
    return (*this);
} 
```

在析构函数中，我只有 list.clear() 来删除所有元素，然后释放内存。

但问题是，当我在我的 .out 文件上运行 valgrind 时，它告诉我我肯定失去了一些记忆，我不知道为什么它会告诉我这个。我已经在 Stackoverflow 上阅读了一些问题，但我基本上已经尝试了一切。我尝试了 clear() 然后在向量上删除，但这没有用。然后我尝试擦除（list.begin（），list.end（）），但这也没有用。

我的思考过程是我正在使用 Set *aSet = new Set; 在我的主类中，由于 int 不是对象，所以当我调用 list.clear() 时它没有被释放。这是正确的吗？我将如何正确删除内存？

谢谢你的帮助。

Edit1 = 将 list* 更改为 setList

我的新构造函数和赋值运算符：

```
template <class T>
Set<T>::Set(const Set& aSet)
{
    size = aSet.size;
    setList.clear();
    setList = aSet.setList;
}

template <class T>
Set<T>& Set<T>::operator=(const Set& right)
{
    if (this != &right) {
        setList.clear();
        size = right.size;
        setList = right.setList;
    }
    return (*this);
} 
```

Valgrind 仍然报告说我有同样数量的失忆。在我的析构函数中，我仍然有 list.clear()

Valgrind 日志：

```
==11398== 
==11398== HEAP SUMMARY:
==11398==     in use at exit: 62,969 bytes in 352 blocks
==11398==   total heap usage: 540 allocs, 188 frees, 68,046 bytes allocated
==11398== 
==11398== LEAK SUMMARY:
==11398==    definitely lost: 8,624 bytes in 14 blocks
==11398==    indirectly lost: 1,168 bytes in 5 blocks
==11398==      possibly lost: 4,829 bytes in 56 blocks
==11398==    still reachable: 48,348 bytes in 277 blocks
==11398==         suppressed: 0 bytes in 0 blocks
==11398== Rerun with --leak-check=full to see details of leaked memory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:38:51.557

> 我的思考过程是我`Set *aSet = new Set;`在我的主类中使用了一个，因为一个 int 不是一个对象，所以当我调用 list.clear() 时它没有被释放。这是正确的吗？我将如何正确删除内存？

不。要删除您正确分配的内存，您需要调用 delete：

```
Set *aSet = new Set;

delete aSet; 
```

然而，像这样手动管理内存很困难并且容易出错。你应该更喜欢替代品。首先是您根本不应该使用动态分配。您应该简单地使用自动变量：

```
Set aSet;
// no delete required. Variable destroyed/deallocated when it goes out of scope. 
```

如果你真的需要动态分配，你应该使用智能指针。

```
std::unique_ptr<Set> aSet(new aSet); 
```

智能指针为动态分配实现 RAII，因此您不必手动进行。

在极少数情况下，您实际上可能需要手动进行动态分配，但这是一个高级主题。

* * *

`std::vector<T>::clear()`不需要释放向量的内存。您可以使用 C++11 成员函数`shrink_to_fit()`，也可以使用交换技巧：

```
std::vector<int> list;

...

std::vector<int>(list).swap(list); 
```

此外，您真的不应该使用指向向量的指针。向量使用 RAII 为您管理动态内存。当您使用指向向量的指针时，您不再拥有不自己手动管理资源的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:35:38.990

在你做之前`new list`你需要做`delete list`，否则你会发现你发现的内存泄漏。`clear`删除之前也不需要列表，析构函数会自动清除它。*编辑：*您还需要删除`Set`类析构函数中的指针。

一点题外话，不要使用这样的变量名，这样`list`可能会被误认为是内置类型。

一个更切题的提示是`std::vector`用作直接成员变量而不是指针。在这种情况下，您肯定需要使用`clear`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:35:04.400

如果你在 C++11 中工作，你可以使用[shrink_to_fit()](http://en.cppreference.com/w/cpp/container/vector/shrink_to_fit)。据我了解，虽然这不具约束力，但实施可能会阻止它实际缩小。

# xamarin.ios - 旋转由 YouTube 链接自动创建的 MoviePlayer

> ID：13276825
> 
> 赞同：0
> 
> 时间：2012-11-07T19:31:25.187
> 
> 标签：xamarin.ios, youtube, rotation

我正在我的应用中播放 YouTube 视频 - 该应用仅是纵向的，但我想让视频播放横向。我正在使用广为人知的 WebView 方法：

```
 public YouTubeViewer(string url, RectangleF frame)
        {
            string youTubeVideoHTML = @"<object width=""{1}"" height=""{2}""><param name=""movie""
            value=""{0}""></param><embed
            src=""{0}"" type=""application/x-shockwave-flash"" 
            width=""{1}"" height=""{2}""</embed></object>"; 

            string html = string.Format(youTubeVideoHTML, url, frame.Size.Width, frame.Size.Height);
            this.LoadHtmlString(html, null);
            this.Frame = frame;
    } 
```

除了 MoviePlayer 仅处于纵向方向之外，这非常有效。我尝试从支持所有方向的新 ViewController 中调用 WebView，但它没有效果。我试过旋转 WebView，但这不会影响 iOS 神奇调用的 MoviePlayer。

任何帮助将非常感激。

谢谢，瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:01:34.780

应用程序 info.plist 设置为仅允许纵向。改变了这一点，YouTube 控制器正确地旋转了 MoviePlayer！

# javascript - 在完成加载之前使用 DomNodeInserted 重写 HTML

> ID：13276826
> 
> 赞同：5
> 
> 时间：2012-11-07T19:31:28.997
> 
> 标签：javascript, dom, google-chrome-extension, nodes, addeventlistener

我觉得这对于任何非业余爱好者来说可能会立即显而易见，但我已经为此困扰了好几天。

我正在编写一个在文档开始时执行脚本的 Chrome 扩展程序。我想在加载特定 DIV 时重写它们的 HTML，但在它们显示给用户之前（因此用户在它被我的自定义 HTML 毫不客气地替换之前看不到网站的 HTML）。我尝试使用的方法如下所示。

```
addEventListener('DOMNodeInserted', function(event){
    if(event.relatedNode.innerHTML.indexOf("contentArea")>-1){
        writeContentArea();
    }
}, false);

function writeContentArea(){

    var divtowrite = document.getElementById('contentArea');
    include(divtowrite,"contentArea.html"); //my AJAX include function

} 
```

现在，问题是，当页面加载并执行 JS 时，div 在被替换之前仍然会加载。奇怪的是，当我尝试使用不同的 div（例如侧边栏）时，它按预期工作；即，div 在显示给用户之前被替换。我无法弄清楚为什么它适用于某些 div 而不适用于其他 div。

我不知道这是否相关，但在 Chrome 方面我有：

```
chrome.tabs.getSelected(null, function(tab) {

    if(tab.url.indexOf("search.php") > -1){
        chrome.tabs.executeScript(null,
            {file: "fhrun.js", allFrames: false, runAt: "document_start"}
        );
    }

}); 
```

关于为什么这不起作用的任何想法，或者我应该使用的更好方法？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:53:23.017

不确定这是否是您正在寻找的方法，但您是否考虑过注入 CSS 以在初始加载时隐藏内容区域，并在修改内容后将其设置为在 javascript 中可见？

CSS 文件将如下所示：

```
#contentArea { display:none; } 
```

或者

```
#contentArea { visibility:hidden; } 
```

您将使用以下方法注入它：

```
 chrome.tabs.insertCSS(null, 
{file: "youfile.css", allFrames: false, runAt: "document_start"}); 
```

然后将您的内容更改功能修改为：

```
function writeContentArea(){
    var divtowrite = document.getElementById('contentArea');
    include(divtowrite,"contentArea.html"); //my AJAX include function
    divtowrite.style.display = 'block';
} 
```

# html - Html/CSS 固定图片大小，因此浏览器较小时不会调整大小

> ID：13276830
> 
> 赞同：1
> 
> 时间：2012-11-07T19:31:44.530
> 
> 标签：html, css, height, width, fixed

我在两列表格的顶部创建了一个带有横幅的电子邮件模板。一切都很好，除了顶部的横幅。发送电子邮件时，如果窗口小于横幅本身，则图片会调整大小。

如果邮件窗口很小，如何防止图片自动调整大小？

这是我的横幅代码：

```
<img style="width: 710px; height:191px;" alt="" src="banner.png" height="191" width="710" /> 
```

有一个完整的`src`URL 去那里。我只是将其缩短为图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:45:58.020

如果您在 CSS 文件中设置图像的大小，则它不应更改。

```
.image {
    width: 200px;
    height: 200px;
} 
```

然后将此样式应用于您的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T19:54:10.270

取决于电子邮件客户端，这可能/可能不起作用，这取决于是否支持 CSS 指令，如果它是 webmail，它很可能会被支持

另外确保 img 标签的父元素具有正确的宽度样式。如果它作为 colspan2 嵌入到表格中，那么请确保表格也设置了最小宽度。

# android - 递增整数时，我的简单 android 应用程序崩溃

> ID：13276831
> 
> 赞同：2
> 
> 时间：2012-11-07T19:31:48.760
> 
> 标签：android, button

当我按下按钮时，我的应用程序总是崩溃。我是android新手，你能帮帮我吗？

当用户按下按钮时，它应该增加一个 int，然后在 textView 中显示它。

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:onClick="sendMessage"
        android:text="@string/button_send" />

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/text"
        android:textSize="30sp"
        tools:context=".DisplayMessageActivity" />

    <!-- android:visibility="invisible" -->

    <TextView
        android:id="@+id/val"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/text"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="37dp"
        android:text="            " />

</RelativeLayout> 
```

MainActivity.java

```
package com.example.myfirstapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
    public final static String  EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    public int mult = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /** Called when the user clicks on the Send button */
    public void sendMessage(View view)
    {
        //Intent intent = new Intent(this, DisplayMessageActivity.class);
        //TextView text = (TextView) findViewById(R.id.text);

        TextView val = (TextView) findViewById(R.id.val);
        val.setText(mult);
        mult+=1;
        //EditText editText = (EditText) findViewById(R.id.edit_message);
        //String message = editText.getText().toString();
        //intent.putExtra(EXTRA_MESSAGE, message);
        //startActivity(intent);
    }
} 
```

这是崩溃日志

```
11-07 14:23:05.663: I/Choreographer(1126): Skipped 32 frames!  The application may be doing too much work on its main thread.
11-07 14:23:05.898: D/gralloc_goldfish(1126): Emulator without GPU emulation detected.
11-07 14:23:10.543: I/Choreographer(1126): Skipped 51 frames!  The application may be doing too much work on its main thread.
11-07 14:23:11.076: W/ResourceType(1126): No package identifier when getting value for resource number 0x00000001
11-07 14:23:11.083: D/AndroidRuntime(1126): Shutting down VM
11-07 14:23:11.083: W/dalvikvm(1126): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-07 14:23:11.263: E/AndroidRuntime(1126): FATAL EXCEPTION: main
11-07 14:23:11.263: E/AndroidRuntime(1126): java.lang.IllegalStateException: Could not execute method of the activity
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.view.View$1.onClick(View.java:3591)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.view.View.performClick(View.java:4084)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.view.View$PerformClick.run(View.java:16966)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.os.Handler.handleCallback(Handler.java:615)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.os.Looper.loop(Looper.java:137)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at java.lang.reflect.Method.invoke(Method.java:511)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at dalvik.system.NativeStart.main(Native Method)
11-07 14:23:11.263: E/AndroidRuntime(1126): Caused by: java.lang.reflect.InvocationTargetException
11-07 14:23:11.263: E/AndroidRuntime(1126):     at java.lang.reflect.Method.invokeNative(Native Method)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at java.lang.reflect.Method.invoke(Method.java:511)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.view.View$1.onClick(View.java:3586)
11-07 14:23:11.263: E/AndroidRuntime(1126):     ... 11 more
11-07 14:23:11.263: E/AndroidRuntime(1126): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x1
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.content.res.Resources.getText(Resources.java:229)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at android.widget.TextView.setText(TextView.java:3620)
11-07 14:23:11.263: E/AndroidRuntime(1126):     at com.example.myfirstapp.MainActivity.sendMessage(MainActivity.java:34)
11-07 14:23:11.263: E/AndroidRuntime(1126):     ... 14 more
11-07 14:23:15.013: I/Process(1126): Sending signal. PID: 1126 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:35:33.750

您不能将文本视图的内容设置为 int。相反，您必须先将其更改为字符串

换行

```
val.setText(mult); 
```

和

```
val.setText(Integer.toString(mult)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:36:52.897

我相信如果您传入一个 int，setText 方法会查找资源。您需要先将变量 mult 更改为字符串，然后才能使用 setText。以下任一方法都可以：

```
val.setText("" + mult); 
```

或者

```
val.setText(Integer.toString(mult)); 
```

# javascript - JQuery 选择器重写

> ID：13276836
> 
> 赞同：1
> 
> 时间：2012-11-07T19:32:20.847
> 
> 标签：javascript, jquery, underscore.js

我到处都在做这种事情，我正在寻找最有效的（计算+语法）执行方式：

```
ids =[]
$('tr.selectON td').each( function() { 
    var answer_query = $(this).attr('id');
    if ( answer_query !== undefined ) { 
        ids.push( answer_query ) 
    }   
}); 
```

我可以访问 underscore.js，我怀疑这会有所帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T19:35:49.627

```
ids = $("tr.selectON td[id]").map(function() { return this.id; }).get(); 
```

文件：

**`id`获取具有属性** [http://api.jquery.com/attribute-contains-prefix-selector/](http://api.jquery.com/attribute-contains-prefix-selector/)**的元素**

**过滤 id 属性** [http://api.jquery.com/map/](http://api.jquery.com/map/)

**将结果转换为数组** [http://api.jquery.com/get/](http://api.jquery.com/get/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:39:59.813

你可以让它更简单，但不能说 JQuery 性能：

```
ids =[]
$('tr.selectON td[id^=""]').each( function() { 
        ids.push( this.id ) 
}); 
```

函数中的“this”已经是一个dom对象，所以你可以直接访问它的id。

# irc - 尝试加入 freenode 中的频道

> ID：13276844
> 
> 赞同：-1
> 
> 时间：2012-11-07T19:33:08.087
> 
> 标签：irc

我正在尝试使用 xchat 连接到 freenode 中的频道，但我得到了这个：

```
Invalid password for my_nickname. 
```

任何的想法？

**注意**：我在这里问是因为我没有找到一个好地方问.. 如果您认为这不是正确的地方，请推荐我一个询问 freenode 的地方..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:55:26.300

您在所有频道上都收到该错误吗？否则频道​​上可能有密码

也可能是你没有识别到​​ nickserver 并且 freenode 不允许你加入任何东西（不熟悉 freenode）

当您尝试加入出现该错误的频道时，请解释更多或过去的一些 RAW 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T01:46:38.593

这意味着您向 NickServ 提供了错误的密码。如果您将密码保存在 xchat 中，您可能需要检查它是否仍然有效。如果您忘记了密码，请跳入#freenode 并要求重置密码。

# asp.net - 如何从 WSDL 文件中获取绑定地址

> ID：13276846
> 
> 赞同：0
> 
> 时间：2012-11-07T19:33:16.720
> 
> 标签：asp.net, .net, wcf, web-services

在给定 WSDL 的 URL 的情况下，我生成了一个代理类。

我需要让最终用户将服务的 URL 更改为他的特定 URL，如下所示：

```
ServiceProxy.Url = [URL set by end-user]; 
```

问题是这个 URL 不应该指向 WSDL，它应该是在 WSDL 中找到的绑定地址（wsdl:service -> wsdl:port -> wsdl:address）（这是一个 SAP Web 服务，我理解这就是为什么我必须使用绑定地址）。

我正在考虑使用 XDocument 类来获取该值，但我想知道 WCF 或 Web 服务中是否有任何“内置”功能来获取绑定地址。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:14:56.750

[我根据Parse Complex WSDL Parameter Information](https://stackoverflow.com/questions/4452724/parse-complex-wsdl-parameter-information-in-c-sharp)的代码在 VB.NET 中做了一个小功能（对不起！）。希望能帮助到你。

```
Public Function GetURLFromWSDL(ByVal wsdl As String) As String
    Dim request As HttpWebRequest = WebRequest.Create(wsdl)
    request.ContentType = "text/xml;charset=""utf-8"""
    request.Method = "GET"
    request.Accept = "text/xml"

    Using response As WebResponse = request.GetResponse()
        Using stream As Stream = response.GetResponseStream()
            Dim service As ServiceDescription = ServiceDescription.Read(stream)
            Dim binding As SoapAddressBinding = service.Services(0).Ports(0).Extensions(0)
            Return binding.Location
        End Using
    End Using
End Function 
```

# python - 让 django 的人性化在 App Engine 上工作

> ID：13276847
> 
> 赞同：1
> 
> 时间：2012-11-07T19:33:19.113
> 
> 标签：python, django, google-app-engine

我正在尝试在浮动中添加逗号，以便在 GAE 上向我的应用程序的最终用户显示。这些数字来自 json，是 10 项查询的一部分，每个查询 2 次（也就是每次页面查看 20 个数字）。例如。

```
"total_reach": 276160.0, "total_reach": 500160.0 
```

我正在使用 python GAE SDK 1.7.3 模板系统，只是想用逗号向最终用户显示数字，例如：276,160 和 500,160。请注意，我使用的是默认的 webbapp2 和标准模板（来自 google.appengine.ext.webapp 导入模板），据我所知，它们基于 Django。

Django floatformat 可以很好地摆脱小数点，但现在我需要添加逗号。Django 的人性化与它的 intcomma 过滤器看起来很完美。但是，我根本不知道如何启用它。我怀疑它非常简单，而且我很密​​集（而且我对 python 很陌生） - 但我没有想法。

虽然我尝试了一系列事情，但最近和最有希望的是（基于我对[来源](http://code.google.com/p/googleappengine/source/browse/trunk/lib/django/django/contrib/humanize/templatetags/humanize.py?r=41)的理解）：

```
from google.appengine.ext.webapp.template import register_template_library
register_template_library('django.contrib.humanize.templatetags.humanize') 
```

这给了我以下500：

```
No module named django.contrib.humanize.templatetags 
```

但它似乎在源头中。

我很茫然。我四处搜索，发现像[这样](https://stackoverflow.com/questions/901121/how-to-use-inbulit-django-templatetags-in-google-app-engine)的项目不起作用，似乎是针对 webapp（而不是 webapp2）。帮助和感谢！

更新：

无法使用 settings.py 方法进行。最后，我自己解决了。请参阅下文了解我的实用但不理想的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:27:41.597

无法使用 settings.py 方法进行。最后，我使用了[这个答案的变体](https://stackoverflow.com/questions/5091596/how-do-i-register-custom-filter-in-google-app-engine-template-system)。我从这里复制了[源代码](http://code.google.com/p/googleappengine/source/browse/trunk/lib/django/django/contrib/humanize/templatetags/humanize.py?r=34)，并将 humanize.py 文件顶部的各种 Django 导入替换为

```
from google.appengine.ext import webapp

register = webapp.template.create_template_register() 
```

然后我添加到我的 main.py 中：

```
template.register_template_library('tags.humanize') 
```

然后在模板中，我按预期添加了过滤器（例如 item.count|intcomma）。我打赌这不是“最佳实践”，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T14:50:16.580

我猜你没有添加`django.contrib.humanize`到`INSTALLED_APPS`你的`settings.py`文件中。

# java - 从子类返回数据

> ID：13276849
> 
> 赞同：0
> 
> 时间：2012-11-07T19:33:31.160
> 
> 标签：java, inheritance, return, superclass, super

我在“员工”类中有一个子类“shopStaff”。我有一个肉类 getPerson，我需要将工作人员中的数据集和 shopStaff 中的数据集作为单个字符串发送。

这是我的代码

// 在员工中

```
public String getPerson()
{
    return format(name) + format(yearJoined);
} 
```

// 在店员中

```
public String getPerson()
{
    super.getPerson();
    return format(department);
} 
```

但是，当我在子类中调用 getPerson 方法时，它只返回部门信息，而不是名称和加入年份（我只在超类中设置。

我想当我使用超级。肉食它将返回层次结构中上述类的所有内容。不是这样吗？如果没有，谁能告诉我如何访问超类中的信息集？

谢谢

CJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:35:34.513

您当前方法中的语句`super.getPerson()`不会返回您的返回值。它只是丢失在您的代码中。`return``getPerson()`

您需要更改`shopStaff`方法以使用子类返回语句返回超类值：-

```
public String getPerson()
{
    return super.getPerson() + format(department);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:36:03.007

你打电话时：

```
super.getPerson(); 
```

退货被丢弃，因为它没有存储在任何地方。你想这样做：

```
//in shopStaff
public String getPerson() {
  return super.getPerson() + format(department);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:35:28.830

```
public String getPerson()
{
    String fromSuper=super.getPerson();
    return fromSuper + format(department);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:35:14.657

除非您在子类中读取并使用它，否则仅调用 super 不会获取数据。

可能是这样的：

```
public String getPerson()
{
    String person = super.getPerson();
    return person+format(department);
} 
```

# vhdl - 我的程序在 ModelSim 中工作，但在真正的 FPGA 板上不工作

> ID：13276853
> 
> 赞同：1
> 
> 时间：2012-11-07T19:33:52.270
> 
> 标签：vhdl, fpga, modelsim

有我的[VHDL 代码](http://pastebin.com/R5Wv0XJN)，还有[BDF 设计](http://i50.tinypic.com/2yubuh4.jpg)。

当我在 ModelSim 中模拟我的 VHDL 代码时，它工作正常，但是当我在 Quartus 中模拟它或上传到 FPGA Cyclone 板时，LED 没有信号。IDK，我想以什么方式看待。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:54:38.063

我快速浏览了您的代码，虽然它在语法上看起来是正确的，但它看起来并不真正可合成（即使它可能是）。

例如：

```
led_size : process(clk, size)
begin
  if size = '1' then     
    led_size_f <= led_size_f +1;
  end if;
  if  led_size_f > 4 then 
    led_size_f <=1;
  end if;
end process; 
```

它甚至不使用`clk`，它还会生成一个锁存器（通常是一件坏事，除非你完全确定你在做什么），这很可能会给你在 FPGA 中运行它时带来问题。

我可以发布更多示例，但如果我是您，我会尝试查看您最有可能从综合工具中获得的警告列表。

此外，查看您的 IDE 是否带有一些用于同步设计的模板，然后尝试遵守它们，以确保您实际上推断出您想要的硬件。

# python - 安装 PythonMagick

> ID：13276858
> 
> 赞同：0
> 
> 时间：2012-11-07T19:34:12.233
> 
> 标签：python, pythonmagick

我似乎找不到任何关于如何在 Mac 上安装 PythonMagick 的说明。我已经尝试了此链接[https://gist.github.com/2778301](https://gist.github.com/2778301)上给出的说明，但出现以下错误：

“找不到包‘MagickCore’”

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:00:05.877

谷歌搜索了一下，看来您可能需要安装 ImageMagick 包，其中“MagickCore”是一个组件。看起来你可以在这里下载 Mac 的安装程序：http: [//cactuslab.com/imagemagick/](http://cactuslab.com/imagemagick/)。

如果您已经安装了 ImageMagick，您可能需要设置几个环境变量来指向安装。

您需要包含有关错误消息的其他信息（只需发布完整的错误消息）和您的 Python 版本以获得更多帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-28T10:09:43.243

你安装了 boost-python 和 boost-python-devel 吗？如果没有，您可以使用 yum 安装它们。完成后，打开`~/.bash_profile`并添加：

```
PKG_CONFIG_PATH=/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH 
```

关闭它并获取源`.bash_profile`（或开始一个新的`bash`）。

# spring - 抱歉，我们无法找到具有该用户名和密码的用户

> ID：13276860
> 
> 赞同：2
> 
> 时间：2012-11-07T19:34:27.417
> 
> 标签：spring, security, grails-plugin

我`Spring Security core`在上安装了插件1.2.7.3 `Grails 2.1.1`，运行`s2-quickstart`命令，然后在bootstrap.groovy中初始化了初始用户和角色，但还是无法登录。相关部分的文本`BootStrap.groovy`如下：

```
 if (SecRole.count == 0) {
        def fUserRole = SecRole.findByAuthority('ROLE_FlowUser') ?: new SecRole(authority: 'ROLE_FlowUser').save(failOnError: true, flush: true)
        def fAdminRole = SecRole.findByAuthority('ROLE_FlowAdmin') ?: new SecRole(authority: 'ROLE_FlowAdmin').save(failOnError: true, flush: true)

        def bf = SecUser.findByUsername('bill') ?: new SecUser(
                username: 'bill',
                password: 'eagle',
                firstName: 'bill',
                lastName: 'fly',
                email: 'bill.fly@baylorhealth.edu',
                accountExpired: false,
                accountLocked: false,
                passwordExpired: false,
                enabled: true
        ).save(failOnError: true, flush: true)

        if (!bf.authorities.contains(fAdminRole)) {
            SecUserSecRole.create bf, fAdminRole, true
        }
        if (!bf.authorities.contains(fUserRole)) {
            SecUserSecRole.create bf, fUserRole, true
        }
    } 
```

我没有在引导程序中加密密码，这似乎是大多数此类问题的答案。所有四条记录都被写入数据库表，但当然，我无法判断密码是否正确加密。我的初始控制器在类语句之前有以下注释：

```
@Secured(['IS_AUTHENTICATED_FULLY']) 
```

此外，我在 config.groovy 中添加了以下内容：

// 由 Spring Security Core 插件添加：

```
grails.plugins.springsecurity.userLookup.userDomainClassName = 'cocktail.SecUser'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'cocktail.SecUserSecRole'
grails.plugins.springsecurity.authority.className = 'cocktail.SecRole'
grails.plugins.springsecurity.password.algorithm = 'SHA-256' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:47:21.860

您的密码可能会被编码两次（如果您使用多数据源，可能会出现问题）。

尝试这个 ：

```
class User {
    ...
    transient bEncoded = false
    ...
    protected void encodePassword() {
        if (!bEncoded ) { 
            password = springSecurityService.encodePassword(password); 
            bEncoded = true; 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:52:10.673

我的猜测是`authorities.contains`检查失败是因为你的角色类中缺少`hashCode`和`equals`方法。但是，如果没有角色（您的第一次检查），那么用户将不会获得任何授权，因此您可以删除这些检查：

```
SecUserSecRole.create bf, fAdminRole, true
SecUserSecRole.create bf, fUserRole, true 
```

如果这不能解决问题，则很可能是密码编码问题-为 Spring Security 添加调试日志记录，它应该会告诉您失败的原因；`debug 'org.springframework.security'`在 Config.groovy 中添加您的 log4j 块

ps`if (SecRole.count == 0) {`应该是`if (SecRole.count() == 0) {`或只是`if (!SecRole.count()) {`

# c++ - C 和 C++ 中双浮点值的表示法

> ID：13276862
> 
> 赞同：1
> 
> 时间：2012-11-07T19:34:31.187
> 
> 标签：c++, floating-point, numbers, double, literals

C/C++ 中双精度浮点值的表示法是什么？

`.5`代表双精度值还是浮点值？

我很确定`2.0f`被解析为浮点数和`2.0`双精度数，但是 0.5 呢？

[http://c.comsci.us/etymology/literals.html](http://c.comsci.us/etymology/literals.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T19:35:22.457

是双倍的。后缀 f 以获得浮动。

这里是参考文件的链接： http: [//en.cppreference.com/w/cpp/language/floating_literal](http://en.cppreference.com/w/cpp/language/floating_literal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:40:19.943

从技术上讲，使用双精度常量初始化浮点数可能导致与使用浮点常量初始化不同的结果（即累积 2 次舍入误差）。

这是一个例子：

```
#include <stdio.h>
int main() {
    double d=8388609.499999999068677425384521484375;
    float f1=8388609.499999999068677425384521484375f;
    float f2=8388609.499999999068677425384521484375;
    float f3=(float) d;
    printf("f1=%f f2=%f f3=%f\n",f1,f2,f3);
} 
```

使用 gcc 4.2.1 i686 我得到

```
f1=8388609.000000 f2=8388610.000000 f3=8388610.000000 
```

常数正好以 2 为底：

```
100000000000000000000001.011111111111111111111111111111 
```

Base 2 表示需要 54 位，双精度只有 53 位。因此，当转换为双精度时，它会舍入到最接近的双精度，与偶数相等，因此：

```
100000000000000000000001.10000000000000000000000000000 
```

Base 2 表示需要 25 位，浮点数只有 24 位，因此如果将此双精度数转换为浮点数，则会对最近的浮点数进行另一个舍入，与偶数绑定，从而：

```
100000000000000000000010. 
```

如果将第一个数字直接转换为浮点数，则单次舍入是不同的：

```
100000000000000000000001. 
```

如我们所见，在初始化 f2 时，gcc 将十进制表示转换为双精度，然后再转换为浮点（检查行为是否由标准确定会很有趣）。

不过，由于这是一个特制的数字，大多数时候你不应该遇到这种差异。

# php - 带有坐标数据库的谷歌地图。实时更新

> ID：13276864
> 
> 赞同：0
> 
> 时间：2012-11-07T19:34:42.190
> 
> 标签：php, jquery, google-maps-api-3, geolocation

我目前已经部署了一个 web 应用程序，它使用 geoLocation (HTML5) 和 ajax 显示我们现场员工的位置，以发布到将位置存储在数据库中的 PHP 脚本。

如果您完全刷新页面，地图会更新员工的位置，但我不知道如何让页面显示实时移动的标记？

这是JS。

```
navigator.geolocation.getCurrentPosition(
    function(position) {

     //alert("position is: " + position.coords.latitude + ", " + position.coords.longitude);

    $.ajax({  
                type: "POST",  
                url: "/includes/functions/js.locationServices/locationServices.php",  
                data: "latitude="+ position.coords.latitude +"&longitude="+ position.coords.longitude
              });                  
}); 
```

php 代码是一个简单的获取和更新数据库。

谷歌地图代码

```
function parseToXML($htmlStr) 
{ 
    $xmlStr=str_replace('<','&lt;',$htmlStr); 
    $xmlStr=str_replace('>','&gt;',$xmlStr); 
    $xmlStr=str_replace('"','&quot;',$xmlStr); 
    $xmlStr=str_replace("'",'&#39;',$xmlStr); 
    $xmlStr=str_replace("&",'&amp;',$xmlStr); 

return $xmlStr; 
} 

    $sql = $dbh->prepare("SELECT * FROM authUsers JOIN techLocation ON authUsers.username = techLocation.username");
        $sql->execute();

    header("Content-type: text/xml");

    echo '<markers>';

    while ($row = $sql->fetch(PDO::FETCH_ASSOC))
    {
        // ADD TO XML DOCUMENT NODE
        $time = date("g:i a", strtotime($row['lastLocated']));
        $tech = $row['id'];

        if(is_numeric($row['id'])) { $tech = '#'.$row['id']; }

        echo '<marker ';
        echo 'name="' . parseToXML($row['fullname']) . '" ';
        echo 'tech="' . parseToXML($tech) . '" ';
        echo 'phone="' . parseToXML($row['phone']) . '" ';
        echo 'email="' . parseToXML($row['email']) . '" ';
        echo 'time="' . parseToXML($time) . '" ';
        echo 'lat="' . $row['latitude'] . '" ';
        echo 'lng="' . $row['longitude'] . '" ';
        echo 'type="' . $row['dept'] . '" ';
        echo '/>';
    }

    echo '</markers>'; 
```

地图页面

```
 <script src="https://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
    var customIcons = {
      Installs: {
        icon: '/location/images/installs.png',
        shadow: '/location/images/shadow50.png'
      },
      Service: {
        icon: '/location/images/service.png',
        shadow: '/location/images/shadow50.png'
      }
    };

    var markers = new Array();

    function updateMarker(techSelectionList) {      
            var selectedEmail = techSelectionList.options[techSelectionList.selectedIndex].value;
            var selectedText = techSelectionList.options[techSelectionList.selectedIndex].text;

            for (var i = 0; i < markers.length; i++)
            {
                var techEmail = markers[i].getTitle();

                if (techEmail == selectedEmail)
                {
                    google.maps.event.trigger(markers[i], 'click');
                    break;
                }
            }
    }

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(<?php echo $mapCenter; ?>),
        zoom: 12,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("genxml.php", function(data) 
      {
        var xml = data.responseXML;
        var markersXml = xml.documentElement.getElementsByTagName("marker");

        var sidebar = document.getElementById('sidebar');
        sidebar.innerHTML = '';

        for (var i = 0; i < markersXml.length; i++) 
        {          
            var name = markersXml[i].getAttribute("name");
                var phone = markersXml[i].getAttribute("phone");
            var email = markersXml[i].getAttribute("email");
                var tech = markersXml[i].getAttribute("tech");
                var time = markersXml[i].getAttribute("time");
                var type = markersXml[i].getAttribute("type");
                var point = new google.maps.LatLng(
                parseFloat(markersXml[i].getAttribute("lat")),
                parseFloat(markersXml[i].getAttribute("lng"))
            );

            var html = "<h3>" + name + " - "+ tech + " </h3><br/>Phone:<b> <a href='tel:" + phone + "'>" + phone + "</a></b><br/>Email:<b> <a href='mailto:" + email + "'>" + email + "</a></b><br/>Located:<b> " + time + "</b>";
                var icon = customIcons[type] || {};

                var marker = new google.maps.Marker({
                map: map,
                position: point,
                icon: icon.icon,
                shadow: icon.shadow
            });

            marker.setTitle(email);
            markers.push(marker);

            bindInfoWindow(marker, map, infoWindow, html);

            var sidebarEntry = createSidebarEntry(marker, tech, name, email);
            sidebar.appendChild(sidebarEntry);      
        }           

    });

    function createSidebarEntry(marker, tech, name, email) 
    {
        var text =  tech + " - " + name;                
        var div = document.createElement('option');
        div.text = text;
        div.value = email;

        return div;
    }
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
    });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
//]]>

</script> 
```

# liquid - 评估 Liquid 模板中的 If 语句不生成布尔值

> ID：13276869
> 
> 赞同：1
> 
> 时间：2012-11-07T19:35:11.500
> 
> 标签：liquid

我正在使用 Liquid 模板，这些模板可用于自定义desk.com 模板。

在 for 循环中迭代集合时，我试图在集合的中途捕获索引并拆分为另一列。

这是我的代码片段：

```
{% capture half_topics %}{{ topics_count | divided_by:2 }}{% endcapture %}
<div>TEST Topics Count: {{ topics_count }}</div>
<div>TEST Half: {{ half_topics }}</div>

<div class="bt-column">
  {% for topic in topics %}
    <div>TEST Forloop Index: {{ forloop.index }}</div>
    <div>TEST Are we there yet?: {{ this_index }}</div>
    {% if forloop.index == half_topics %}
      <div>TEST This is where a column split should go</div>
      </div><div class="bt-column">
    {% endif %}
    <h4>{{ topic.name }}</h4>
  {% endfor %}
</div> 
```

这是输出的一部分：

```
TEST Topics Count: 7
TEST Half: 3

TEST Forloop: 1
TEST Are we there yet?: 1
Topic 1

TEST Forloop: 2
TEST Are we there yet?: 2
Topic 2

TEST Forloop: 3
TEST Are we there yet?: 3
Topic 3

TEST Forloop: 4
TEST Are we there yet?: 4
Topic 4 
```

请注意，（我认为）的输出应该是布尔值，而不是与 forloop.index 相同的整数。我不知道该比较表达式是否甚至可以在这样的输出值中工作，但无论如何，据我所知，您可以看到它没有计算为正确的布尔值。您还可以看到分栏从未发生过。

谷歌显然对此无话可说，或者我在谷歌上很糟糕。:)

# javascript - 如何让浏览器记住以前的输入？

> ID：13276875
> 
> 赞同：1
> 
> 时间：2012-11-07T19:35:25.697
> 
> 标签：javascript, html, firefox, browser, input

> **可能重复：**
> [防止 Firefox 在使用 Meta 标记刷新时重新记住输入值](https://stackoverflow.com/questions/2486474/preventing-firefox-from-remebering-the-input-value-on-refresh-with-meta-tag)

对于简单的文本输入，浏览器通常会“记住”用户上次在相同字段中输入的内容。

![在此处输入图像描述](../Images/b19e720f3793bc031d5c258eb06e237a.png)

有时，出于安全原因，我认为某些网站会以某种方式阻止输入记住用户输入的内容。所以我每次想登录网站时都需要输入我的用户名（双击输入字段不会给我以前输入的用户名的下拉列表）。

你知道是否有一个 HTML/JS 属性来防止输入被记住（在 firefox 下），所以我可以覆盖它并使浏览器记住我的输入？

# google-spreadsheet-api - 行移动未触发 Google 电子表格 onEdit

> ID：13276876
> 
> 赞同：1
> 
> 时间：2012-11-07T19:35:26.867
> 
> 标签：google-spreadsheet-api

我试图在`onEdit()`移动行时调用自动重新编号行。据我所知，只有在单元格文本而不是位置发生变化时才会调用它。是否有替代方法或监视电子表格活动以包括行重新定位的方法？

# magento - Magento foreach() 命令 getAllItems()

> ID：13276889
> 
> 赞同：0
> 
> 时间：2012-11-07T19:35:59.257
> 
> 标签：magento, foreach

我不确定为什么这个循环不起作用。

```
 $orders = Mage::getSingleton('sales/order')->getCollection()  
        ->addAttributeToSelect('*')  
        ->addFieldToFilter('created_at', array('from'=>$from, 'to'=>$to)) 
        ->addAttributeToSort('increment_id', 'ASC')
        ;

    foreach ($orders as $item) { 
        $order_id = $item->increment_id;
        if (is_numeric($order_id)) $order = Mage::getModel('sales/order')->loadByIncrementId($order_id);
        if (is_object($order)) {
            echo "> O: ". $order_id ."<BR>";
            $items = $order->getAllItems();
            echo ">> O: ". $order_id ."<BR>";
        } else
            die("DIE ". var_dump($order));  
    }
die("<BR> DONE"); 
```

输出：

```
...
...
>> O: 100021819
> O: 100021820
>> O: 100021820
> O: 100021821 
```

循环永远不会结束，也不会在相同的 order_id 处停止。？

它总是在 $order->getAllItems() 失败

这些订单要么待处理，要么正在处理，要么已完成。

有什么我应该用 $order->getAllItems() 检查的东西，因为那是它失败了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:29:45.567

乔恩，我认为您正在谈论的问题是您的脚本意外结束。即，你看到一个输出`>`

```
> O: 100021821 
```

但不是 double 的输出`>>`。

因为 Magento 是如此可定制的，所以不可能用给定的信息准确地诊断您的问题。您的系统中发生了某些事情（PHP 错误、未捕获的异常等），导致您的脚本停止。打开开发者模式并将 PHP ini 设置`display_errors`为 1 ( `ini_set('display_errors', 1);`) 并检查您的错误日志。如果您（或我们）遇到 PHP 错误，帮助您会容易得多。

我的猜测是你遇到了内存问题。PHP 实现对象的方式可能会导致少量内存泄漏——对象不会正确地自行清理。这意味着每次执行循环时，您都会慢慢消耗 PHP 请求所允许的内存总量。对于具有大量订单的系统，如果上述代码能够在内存不足之前完成所有操作，我会感到惊讶。

[如果您的问题是内存问题，此 PDF 中](http://www.magentocommerce.com/images/uploads/PHP_Garbage_Collector_final2.pdf)有关于在 PHP 对象后手动清理的信息。您还应该考虑将您的操作拆分为多个请求。即第一个请求处理订单 1 - 100，接下来的 101 - 200 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:58:58.367

你是什​​么意思它失败了？从输出的外观来看，它不会在那里失败，因为它会在调用 getAllItems() 的任一侧输出文本

改变：

```
$items = $order->getAllItems(); 
```

到：

```
foreach($order->getAllItems() as $orderItem) {
    echo $orderItem->getId() . "<br />";
} 
```

看看会发生什么。

如果您在服务器上设置了较低的内存限制并且脚本在资源耗尽时退出，则该脚本每次可能以不同的订单 ID 结束。

# cakephp - CakePHP：在带有别名的非对象错误上调用成员函数

> ID：13276890
> 
> 赞同：1
> 
> 时间：2012-11-07T19:36:01.883
> 
> 标签：cakephp, alias

我在我的一个控制器的索引函数中不断收到“调用非对象上的成员函数”错误。这是代码：

```
class ModulesController extends AppController {
     public $uses = array('Module', 'User');
     public $scaffold;
     function index() {
     if ($this->request->is('get')) { //Technically unecessary but good practice
       $email = AuthComponent::user('email'); 
       $user = $this->Module->User->findByEmail($email);
      //Code omitted
     }
} 
```

这是我的模块模型：

```
class Module extends AppModel {
public $name = 'Module';
public $hasMany = array(
    'Slide' => array(
        'className'  => 'Slide',
        'foreignKey' => 'module_id',
        'order' => 'Slide.position ASC' //Let's make sure that name is correct
        ));
public $belongsTo = array(
    'Creator' => array(
        'className' => 'User'));    
public $hasAndBelongsToMany = array(
    'OUser' => array(
       'className'              => 'User',
       'joinTable'              => 'modules_users',
       'foreignKey'             => 'module_id',
       'associationForeignKey'  => 'user_id',
       'unique'                 => 'keepExisting',
    ));
       } //Unnecessary code omitted 
```

这是我的用户模型的代码：

```
class User extends AppModel {
public $name = 'User';
public $uses = 'users';
public $hasMany = array(
    'OModule' => array( //Owner of Modules
        'className' => 'Module',
        'foreignKey' => 'user_id',
        'order' => 'Module.created DESC'
        ));
public $hasAndBelongsToMany = array(
    'Module' => array(
       'className'              => 'Module',
               'joinTable'              => 'modules_users',
               'foreignKey'             => 'user_id',
               'associationForeignKey'  => 'module_id',
               'unique'                 => 'keepExisting',
    ));
} //Unnecessary code omitted 
```

值得一提的是，User和Module都有belongsTo和HABTM关系，所以User分别有别名Creator和OUser。在上面的代码中，findByEmail 试图使用 Creator 关系，但这给了我同样的错误。

我的问题是，如何正确调用 findByEmail() 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:05:22.097

改变：

```
$user = $this->Module->User->findByEmail($email); 
```

到：

```
$user = $this->User->findByEmail($email); 
```

瞧！

**原因：**

不知何故，要么 1）Module 和 User 之间没有关系，2）关系中的错误，要么 3）您为它们中的一个或两个使用别名，因此使用 Module->User 是不正确的。

无论如何，您正在加载“用户”模型，因此没有理由通过模块模型来访问它 - 只需直接访问它（如上面的示例）。

# arrays - Excel, VB - 使用 DateAdd() 从日期中减去天数

> ID：13276902
> 
> 赞同：0
> 
> 时间：2012-11-07T19:36:44.637
> 
> 标签：arrays, date, excel, dateadd, vba

# 问题

我希望从工作表中的日期字段中减去存储在数组中的 1 到 3 位数字。我取数字的绝对值，乘以负 1，然后使用 DateAdd 函数执行操作。我没有收到错误消息，但数组值仍然是最初通过该进程发送的确切的 1 到 3 位数字。

# 例子

C列是我目前的结果给我的。

```
 A        B        C
1  1/8/09       54       54
2  3/3/11        1        1
3  8/1/10      132      132 
```

# 代码

```
If delType = "Numeric" Then
    ElseIf delChars = 3 Or delChars = 2 Or delChars = 1 Then
         del(i, 1) = Abs(del(i, 1))
         del(i, 1) = del(i, 1) * -1
         del(i, 1) = DateAdd("d", del(i, 1), Range("E" & i + 1))
         'I did confirm that this case is actually working 
         'by setting the above line to del(i,1) = "Digits" and
         'received "Digits" for all entries with 1 to 3 numeric digits.
    End If
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:39:28.593

Excel 中的日期存储为自固定日期以来的天数。您可以直接在工作表中从 A 列中减去 B 列。不需要 VBA。只需将结果格式化为日期即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:53:34.940

尽管您的代码没有显示它，但我怀疑该数组被视为**integer**，并且您`On Error Resume Next`在代码中。

由于日期对于整数来说太大了，因此信息不会被替换。

试试这个看看效果

```
Sub test()
On Error Resume Next
Dim i As Integer
i = Now()
Debug.Print i
End Sub 
```

错误（非）处理到位后，您会得到`0`. `i=Now()`如果没有错误处理，excel 会在出现溢出错误时停止

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T01:37:54.473

```
Sub Tester()

    Dim arr, x

    arr = Range("A1:A3").Value 'values to be subtracted

    For x = 1 To UBound(arr, 1)
        ' "base" date is in A5
        arr(x, 1) = Range("A5").Value - Abs(arr(x, 1))
    Next x

    With Range("D1:D3")
        .NumberFormat = "m/d/yyyy"
        .Value = arr 'dump values back to sheet
    End With

End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T07:52:57.910

Tim 的代码实际上是基于 A.Webb 的第一条评论的概念。

鉴于，您的日期、DAYS 分别位于 A、B 列中，您可以将答案输出到 C 列。您实际上可以将 A 列和 B 列读入一个二维数组或两个一维数组，使用 1 个命名单元作为指向您需要交互的所有单元格的参考点。这将允许一些细胞独立/动态过程。同样，您的问题似乎很小 - 除非您必须处理某些供应商的 Excel 加载项，这些加载项会对您在 Excel 中的数据/日期格式产生一些奇怪的影响。我不建议您使用 UDF。由于这是 BIG 操作流程的一部分，您可以将其包装在数据操作类/模块下，您可以在其中执行所有小而重要的数据“按摩”。还希望您在大型工作簿中使用 DATES 时注意工作表的性能。

非常小的建议：

```
arr(x, 1) = Abs(arr(x, 1)) - Range("B1").Offset(x - 1, 0).Value 
```

# php - 带括号的正则表达式

> ID：13276903
> 
> 赞同：2
> 
> 时间：2012-11-07T19:36:49.610
> 
> 标签：php, c, regex, preg-match, phalcon

我正在寻找一些关于正则表达式的帮助。

我有这段代码：

```
$router->add( 
    '/activate/{token:[a-zA-Z0-9]+}', 
    array (
        'module' => 'frontend',
        'controller' => 'user',
        'action'     => 'activate'
    )
); 
```

效果很好。但是下面的没有：

```
$router->add( 
    '/activate/{token:[a-zA-Z0-9]{32}}', 
    array (
        'module' => 'frontend',
        'controller' => 'user',
        'action'     => 'activate'
    )
); 
```

我在 C 中的匹配机制是（也适用于 preg_match_all）

```
'#{([a-zA-Z][a-zA-Z0-9\_\-]*)(:([^}]+))*}#' 
```

对于如何使第二个示例起作用，我将不胜感激。

**编辑**

```
preg_match_all(
    '#{([a-zA-Z][a-zA-Z0-9\_\-]*)(:([^}]+))*}#',
    '/manual/{language:[a-z]{2}}/{file:[a-z]+}.html',
    $matches,
    PREG_SET_ORDER
); 
```

我希望它返回如下内容：

```
Array
(
    [0] => Array
        (
            [0] => {language:[a-z]{2}}
            [1] => language
            [2] => :[a-z]{2}
            [3] => [a-z]{2}
        )
    [1] => Array
        (
            [0] => {file:[a-z]+}
            [1] => file
            [2] => :[a-z]+
            [3] => [a-z]+
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:05:01.940

这个正则表达式： '#{([a-zA-Z0-9_-] *)(:(.* )}?)}#' 适用于它们：

```
<?php

preg_match_all(
    '#{([a-zA-Z0-9\_\-]*)(:([^}]+}?))*}#',
    '/activate/{token:[a-zA-Z0-9]{32}}',
    $matches,
    PREG_SET_ORDER
);
print_r($matches);

preg_match_all(
    '#{([a-zA-Z0-9\_\-]*)(:([^}]+}?))*}#',
    '/activate/{token:[a-zA-Z0-9]+}',
    $matches,
    PREG_SET_ORDER
);
print_r($matches); 
```

# asp.net - 向客户端发送 Excel 文件

> ID：13276905
> 
> 赞同：2
> 
> 时间：2012-11-07T19:36:56.663
> 
> 标签：asp.net, vb.net, excel, .net-3.5, asp.net-2.0

我正在尝试将 Excel 文件发送到 ASP.Net 网页的客户端，但它不起作用。

当用户单击按钮时，我们服务器端数据库中的一些数据会被格式化，放入 Excel 文件并发送给用户（作为直接下载）。

一切正常，除了发送部分和任何帮助将不胜感激。

这是我现在正在使用的代码（客户端）：

```
var dataAjax = {};
$.ajax({
    async: false,
    type: "POST",
    url: "Default.aspx/BuildExcelFile",
    contentType: "application/json",
    data: JSON.stringify(dataAjax),
    dataType: "text",
    success: function(html) {
        //alert(html);
    },
    error: function(request, status, error) {
        alert("An error occurred : [" + error + "]");
    }

}); 
```

和服务器端代码：

```
<WebMethod()> _
Public Shared Function BuildExcelFile() As String
    Dim localExcelPath = "C:\temp1111.xlsx"

    'Build the excel file here...
    '...

    'Delete the old version of the Excel file
    System.IO.File.Delete(localExcelPath)
    'Save the Excel File locally
    xWorkSheet.SaveAs(localExcelPath)
    xWorkBook.Close()
    exc.Quit()

    'The generated excel is valid, can be opened on the server just fine

    'Send the excel file to the client
    'This part is not working! :(
    System.Web.HttpContext.Current.Response.Clear()
    System.Web.HttpContext.Current.Response.ContentType = "MS-Excel/xls"
    System.Web.HttpContext.Current.Response.AppendHeader("Content-Disposition", "attachment; filename=" & System.IO.Path.GetFileName(localExcelPath))
    System.Web.HttpContext.Current.Response.TransmitFile(localExcelPath)
    System.Web.HttpContext.Current.Response.End()

    Return "Success"

End Function 
```

当我尝试验证`Current.Response`

```
Response: Cannot refer to an instance member of a class from within a shared method or shared member initializer without an explicit instance of the class. 
```

此外，如果我删除调用，数据将在 ajax`Response.End()`中函数的 html 变量中接收。`success`但是，我希望下载文件，而不是作为文本接收...

如果我保留 Response.End()，我会得到一个`Internal Server Error`.

是否因为我的 Webmethod 是共享的而无法正常工作？任何线索这里发生了什么？我能做些什么来解决这个问题？

**编辑：**

我正在使用 .Net 3.5，如果这很重要

我没有使用 MVC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:59:22.343

我也遇到了从客户端向服务器发送数据的完全相同的问题。您可以通过动态加载 iFrame 来启动下载来解决它 - iFrame 基本上只是填充了一个空白的 aspx 页面，该页面在`Page_Load`. 您还可以将文件保存到服务器并提供在客户端下载文件的链接。这些是我发现有效的解决方法。

我不知道您是否可以按照您尝试的方式进行操作。我检查了所有的例子，但它从来没有奏效。如果您无法弄清楚，这些方法对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T18:47:06.060

```
Public Shared Function BuildExcelFile() As String
    Dim localExcelPath = "C:\temp1111.xlsx"

    'Build the excel file here...
    '...
    xWorkSheet.SaveAs(localExcelPath)
    xWorkBook.Close()
    exc.Quit()

    'The generated excel is valid, can be opened on the server just fine

    'Send the excel file to the client
    'This part is not working! :(
    System.Web.HttpContext.Current.Response.Clear()
    System.Web.HttpContext.Current.Response.ContentType = "MS-Excel/xls"
    System.Web.HttpContext.Current.Response.AppendHeader("Content-Disposition", "attachment; filename=" & System.IO.Path.GetFileName(localExcelPath))
    System.Web.HttpContext.Current.Response.TransmitFile(localExcelPath)
    System.IO.File.Delete(localExcelPath)

    System.Web.HttpContext.Current.Response.End()

    Return "Success"
End Function 
```

1.  如果您使用 Ajax，请在单击按钮时使用 postbacktrigger

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T23:18:58.160

这对我有用：

```
string fileName = "ExampleFileName.xlsx";
Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;  filename=" + fileName);
Response.BinaryWrite(excelPackage.GetAsByteArray());
// Response.End(); Replaced with below 3 lines to avoid ThreadAbortException
Response.Flush(); // Sends all currently buffered output to the client.
Response.SuppressContent = true;  // Gets or sets a value indicating whether to send HTTP content to the client.
ApplicationInstance.CompleteRequest(); // Causes ASP.NET to bypass all events and filtering in the HTTP pipeline chain of execution and directly execute the EndRequest event. 
```

我正在使用一个名为“EPPlus.dll”的 dll 作为我的 Excel 库。不需要 Ajax 调用，因为您可以从 Asp.net 按钮实例化下载，或者在想要开始下载时简单地从服务器端代码调用方法。

# javascript - 表单提交按钮

> ID：13276907
> 
> 赞同：-5
> 
> 时间：2012-11-07T19:37:02.637
> 
> 标签：javascript, html, wordpress

标题

```
<link rel="stylesheet" href="<?php echo get_stylesheet_uri(); ?>" type="text/css" media="all" />
<link rel="stylesheet" type="text/css" href="http://design3web.bugs3.com/wordpress/ficheros/cssmodulobooking.css">
    <link rel="stylesheet" type="text/css" href="http://design3web.bugs3.com/wordpress/ficheros/jquery-ui-1.8.18.custom.css">
<script type="text/javascript" src="http://design3web.bugs3.com/wordpress/ficheros/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://design3web.bugs3.com/wordpress/ficheros/jquery-ui-1.8.18.custom.min.js"></script>
    <script type="text/javascript" src="http://design3web.bugs3.com/wordpress/ficheros/master.js"></script>
    <script type="text/javascript" src="http://design3web.bugs3.com/wordpress/ficheros/misc.js"></script

<link rel="pingback" href="<?php bloginfo( 'pingback_url' ); ?>" /> 
```

这是标题我的 **问题是当我单击或将光标保持在到达字段上时应该显示日历，但它不显示** Wordpress 站点：

[http://design3web.bugs3.com/wordpress](http://design3web.bugs3.com/wordpress)

在普通 html（不是 wordpress）中，它完美显示
这是普通 html [http://design3web.bugs3.com/wordpress/formulario-reservas.htm](http://design3web.bugs3.com/wordpress/formulario-reservas.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:51:00.890

`booking-form`该脚本在附加日期选择器之前检查是否有 ID 为的元素。该表单在您的工作示例中具有该 ID，但在 Wordpress 站点上没有。

# git - 如何在 git 中进行“仅本地提交”？

> ID：13276909
> 
> 赞同：50
> 
> 时间：2012-11-07T19:37:02.880
> 
> 标签：git

我正在使用 git，我希望能够创建一个不与远程存储库同步的提交。这样的提交必须“浮动”在本地存储库中的所有其他提交之上，以避免影响历史记录。我可以使用这样的提交来存储特定于本地的更改（配置更改、调试标志、本地解决方法等）。

目前，我在提交时手动 rebase 以将提交重新排序到顶部，并且我推送 using`HEAD^`以避免推送本地更改。我也考虑过将更改放在存储中，但这不太方便，因为它排除了对存储的正常使用。另一种选择是简单地保留所有这些本地更改，并`git add -p`在每次我想提交时使用。但是，随着大量琐碎的本地更改，这变得很麻烦。

这是我当前工作流程的示例：

我的存储库最初看起来像

```
A---B---C---F master 
```

其中“F”是我的浮动提交。

我做出承诺：

```
A---B---C---F---D master 
```

然后`git rebase -i HEAD~2`重新排序：

```
A---B---C---D---F master 
```

然后`git push remote HEAD~1...`推送除本地`F`提交之外的所有内容。

更改 F 包含对现有版本化文件的更改，并且可能包含任意数量的更改。（如果我可以使多个提交“浮动”，那就更好了，因为我可以分离我的本地更改）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-07T19:47:45.473

将这些更改放入您从主开发分支定期变基/合并的本地分支怎么样？这样就不会有任何将它们提交到上游的危险。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-18T18:34:08.493

所以，听起来你想要两件事：

*   一些提交应该保持私有（例如在本地分支上），并且在拉取时永远不要推送或合并；他们应该在共享提交“之后”保持不变。

*   这对您来说应该是最透明的；您想在 master 上工作，并自动维护本地分支。您只需决定哪些提交应该是本地的，与远程存储库交互的命令将忽略这些。

所以你想写一个脚本（命名`git-something`并把它放在你的路径上，所以这是一个额外的 git 命令）来识别和处理这些提交。您需要一些触发器来让脚本识别本地提交。做到这一点的简单方法是在提交描述中放一个神奇的词——一个你永远不会在真实/共享提交中使用的词——以便脚本识别。（如果这对你来说听起来太不稳定，你也可以在提交的树中使用一个特殊的文件，比如`.THIS_COMMIT_IS_LOCAL_ONLY`；我在示例中没有这样做，因为它有点难。）

您需要一个命令来从当前索引/工作目录进行本地提交；这很容易，它只是调用`git commit $@ -m "__LOCAL_COMMIT_ONLY__"`（这是一个例子；关键是它会做一些事情来将正在创建的提交标记为仅限本地，然后推迟到 git 提交）。您还需要一个命令来临时弹出所有本地提交，执行一些其他 git 命令（拉、推、取、合并等），然后重新应用本地提交。您还将使用此命令来创建您打算共享的本地提交，以便它们始终出现在您的历史记录中仅本地提交的“下方”。

这是一个示例脚本，可将两者合二为一：

```
#!/bin/sh
if [[ $1 eq 'new' ]]; then
  shift
  exec git commit $@ -m "__LOCAL_COMMIT_ONLY__"
elif [[ $1 eq

OLD_HEAD=$(git rev-parse HEAD)
OLD_REAL_HEAD="$(git rev-list HEAD --grep=__LOCAL_COMMIT_ONLY__ | tail -n1)^"
git reset --soft $OLD_REAL_HEAD
git $@
git rebase --onto HEAD $OLD_REAL_HEAD $OLD_HEAD 
```

现在，假设您调用脚本`git-local`，使用`git local new`从索引创建一个新的仅本地提交（或`git local new -a`从工作目录中的修改文件创建），`git local commit`（遗憾的是，名称不完美）创建一个新的“真实”提交，`git local push`推、`git local pull`拉等

这样做的主要缺点是它要求您记住大多数命令现在都以`local`. 如果您忘记执行此操作，您会感到有些不知所措，但也不算太糟——快速`git rebase -i`操作可以让您轻松地将本地提交移回顶部，然后您就可以重新开始运行了。最大的风险是您不小心使用`git push`而不是`git local push`将所有私人更改发送到上游，这会惹恼所有人。为此，您可能想要实际编写一个小包装脚本来调用而不是 git 本身（调用它`~/bin/git`并确保`~/bin`在您的路径上）：

```
#!/bin/sh
if [[ $1 = 'push' ]]; then
  if /usr/bin/git rev-list HEAD --grep=__LOCAL_COMMIT_ONLY__ | grep -q .; then
    echo "Can't push with local changes still active!"
    echo "Try using `git local push' instead."
    exit 1
  fi
fi
exec /usr/bin/git "$@" 
```

您还可以`pre-receive`在服务器上创建一个挂钩，自动拒绝`__LOCAL_COMMIT_ONLY__`其消息中包含的任何提交。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-13T19:21:18.613

您可以使用可以从 Git 生成的补丁文件。

```
# git diff > local.patch 
```

当你想提交时，反向补丁：

```
# git apply -R local.patch 
```

提交后，恢复补丁：

```
# git apply local.patch 
```

在创建补丁文件之前，您只需确保只有您的本地更改在工作树上。创建补丁文件后，您可以将其添加到其中，`.gitignore`这样您就不会提交它。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-11-07T20:01:58.967

在以前的工作中，每个人都有自己的本地`settings`分支，我们在其中提交了我们的个人设置。这个分支是基于`master`; 任何主题分支都从`settings`. 当主题准备好进行集成时，我们将它们重新基于`master`. 这似乎是@koljaTM 的建议。

```
A---B---C  master
         \
          F  settings
           \
            D  topic

rebase --onto master settings topic

A---B---C  master
        |\
        | F  settings
         \
          D  topic 
```

当新的变化发生时`master`，我们会变基`settings`，`master`然后变基我们正在研究的任何主题`settings`。

诚然，这不是一步“让这个永远漂浮”的解决方案，但它足够干净和简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T12:04:47.903

假设您在一个文件中有特定于本地的更改不包含您需要提交的其他更改，您可以通过*git update-index*要求 git 忽略该文件中的更改。特别是，您需要 --assume-unchanged 或 --skip-worktree；虽然它们基本上做同样的事情（在 git index 中将文件标记为未更改），但它们有一些非常微妙的特性，这些特性在[这里](http://fallengamer.livejournal.com/93321.html)得到了很好的描述。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-17T22:21:21.280

如果这是您试图阻止继续进行的实际提交，那么您就在正确的轨道上 - 使用

`git rebase -i`

并将所有“个人提交”重新排序为最新提交，然后

`git push <remotename> <latest commit SHA you want to push>:<remotebranchname>`

这会将所有提交推送到并包括您提供的 SHA，但不会推送它之后的“个人提交”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-07T19:39:27.393

您可以忽略 git 中的某些文件，这样它们就不会被推送到远程存储库。我这样做的方式是将这些文件保存在本地，并且不要通过忽略它们将它们推送到存储库。

下面是对 gitignore 的一些解释。

[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-13T19:05:05.047

我经常遇到这个问题，通常是从共享代码库中拆分 IDE 设置等。这是一个足够常见的用例，您可能认为它现在已经解决了，但还没有。我不相信`git`可以随心所欲地处理这个问题。

归根结底，问题是您希望两个结帐共享一个目录。为了使其工作，需要有一些数据结构，可由用户操作，标记哪些文件属于哪些结帐。这也不是一对一的关系；在多个结帐中包含某些文件部分是完全合理的。在所有情况下，您都需要以某种方式命名不同的结帐以支持消歧。为了基本的理智，您需要一个目录列表器，用它们的签出关联注释文件。

作为一个特定的例子，考虑`.gitignore`. 这是适用于“所有”结帐的单个文件，隐含地表示“唯一结帐”。为了`.gitignore`正常工作，每次结帐都需要一个，这是一种区分每次结帐中不同文件的方法。然而，在`git`.

我解决此类问题的“标准”方法是安排事情，以便每个目录结帐一次。我创建了一个名为“custom”（或类似）的目录。该目录进入`.gitignore`父目录。在自定义目录中，我从不同的存储库和/或不同的位置签出。这意味着两次提交以捕获所有更改；这在实践中很少出现问题。

如果这激发了任何人的攻击`git`，请添加进行“命名结帐”的选项并将现有行为保留为匿名结帐。您可以有 [0..1] 个匿名结帐和 [0..*) 个命名结帐。在此基础上，您可能想要的大多数其他内容都非常自然地遵循。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-05T11:51:39.283

我知道这个问题已经得到解答，但我遇到了类似的问题并最终配置我`~/.gitconfig`添加三个有用的命令。如果其他解决方案不好，它可能会对某些人有所帮助。

```
[alias]
    local-export = "![ ${#} -eq 1 ] && CURRENT_BRANCH=$(git branch --show-current) && git checkout -b \"local/${1}\" && git commit --allow-empty -m ${1} && git checkout \"${CURRENT_BRANCH}\" || echo 'You must provide <local_branch_name>' #"
    local-import = "![ ${#} -eq 1 ] && CURRENT_BRANCH=$(git branch --show-current) && git merge \"local/${1}\" --no-ff --commit --no-edit && git reset HEAD^ || echo 'You must provide <local_branch_name>' #"
    local-delete = "![ ${#} -eq 1 ] && git branch -D \"local/${1}\" || echo 'You must provide <local_branch_name>' #" 
```

### 这些命令允许：

*   `git local-export <name>`将创建一个带有单个提交的分支，其中包含当前暂存的内容。分支将命名为“local/<name>”，提交消息将命名为“<name>”
*   `git local-import <name>`将通过一次提交（无快进、无提示、全部自动）将“local/<name>”合并到当前分支并重置为初始状态。这允许将本地分支修改导入工作目录，而无需对当前分支历史执行任何操作。
*   `git local-delete <name>`如果您想清理本地分支，将强制删除分支“local/<name>”。

我希望这对某人有用。

谢谢你。

# delphi - 为什么我在自定义绘制的列表视图上会出现白色的列分隔符？

> ID：13276910
> 
> 赞同：2
> 
> 时间：2012-11-07T19:37:08.250
> 
> 标签：delphi, listview, colors, brush

基本上，我有以下 Delphi 2007 代码（CustomDrawItem）：

```
procedure TForm1.ListViewCustomDrawItem(Sender: TCustomListView;
  Item: TListItem; State: TCustomDrawState; var DefaultDraw: Boolean);
begin
 if (Item.SubItems[0] = '...') then
  ListView.Canvas.Brush.Color := clSkyBlue;
end; 
```

在我的 Windows XP 上，一切正常：

![在 Windows XP 上](../Images/1b1f1de81eb2890cebb45e8c5337bdfa.png)

但在 Windows 7 上，这就是我所拥有的：

![在 Windows 7 上](../Images/d0a032244226101c9dffe15a33ef0e6a.png)

现在，当然，我想知道填充这些垂直白色条纹的正确代码是什么。但是，我也想知道*为什么*会这样。它来自德尔福吗？Windows 7的？我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T20:45:00.517

这似乎是 Windows 7 绘制行为，作为解决方法，您可以将`ownerdraw`属性设置为 true 并改用该[`OnDrawItem`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomListView.OnDrawItem)事件。

像这样

```
uses
  CommCtrl;

{$R *.dfm}

procedure TForm7.ListView1DrawItem(Sender: TCustomListView; Item: TListItem;
  Rect: TRect; State: TOwnerDrawState);
var
 LIndex : integer;
 ListView :  TListView;
 LRect: TRect;
 LText: string;
begin
  ListView:=TListView(Sender);
  for LIndex := 0 to ListView.Columns.Count-1 do
  begin

    if not ListView_GetSubItemRect(ListView.Handle, Item.Index, LIndex, LVIR_BOUNDS, @LRect) then
       Continue;

    if Item.Selected and (not ListView.IsEditing) then
    begin
      ListView.Canvas.Brush.Color := clHighlight;
      ListView.Canvas.Font.Color  := clHighlightText;
    end
    else
    if (Item.SubItems[0] = '...') then
    begin
      ListView.Canvas.Brush.Color := clSkyBlue;
      ListView.Canvas.Font.Color  := ListView.Font.Color;
    end
    else
    begin
      ListView.Canvas.Brush.Color := ListView.Color;
      ListView.Canvas.Font.Color  := ListView.Font.Color;
    end;

    ListView.Canvas.FillRect(LRect);
    if LIndex = 0 then LText := Item.Caption
    else LText := Item.SubItems[LIndex-1];

    ListView.Canvas.TextRect(LRect, LRect.Left + 2, LRect.Top, LText);
  end;
end; 
```

Windows 7的

![在此处输入图像描述](../Images/c40613b0ebca1011ff01b3926756e974.png)

视窗

![在此处输入图像描述](../Images/249792fa42905f3f409a420c96a1c668.png)

# php - 用于通过 PHP 向 MySQL 发送 JSON POST 的 initWithObjectsAndKeys - 在 DB 中获取空行

> ID：13276911
> 
> 赞同：1
> 
> 时间：2012-11-07T19:37:16.020
> 
> 标签：php, iphone, mysql, ios, json

就像标题说的那样。。

我的 NSDictionary initWithObjectsAndKeys for JSON，使用 POST 方法，通过 PHP 代码进行 MySQL 查询，通过使用 json_encoding 和 json_decoding 在我的 SQL 数据库中创建空数据，只是 ID int 每次我发布时都会自动增加！

我的 Xcode 代码：

```
-(IBAction)setJsonFromData:(id)sender
{
    NSDictionary *jsonDict = [[NSDictionary alloc] initWithObjectsAndKeys: @"Welcome", @"title", @"Hello", @"article", @"123456789", @"timestamp", nil];

    if([NSJSONSerialization isValidJSONObject:jsonDict])
        {
           NSError *error = nil;
           NSData *result = [NSJSONSerialization dataWithJSONObject:jsonDict     options:NSJSONWritingPrettyPrinted error:&error];
           if (error == nil && result != nil) {
           [self postJSONtoURL:result];
        }
    }
}

-(id)postJSONtoURL:(NSData *)requestJSONdata
{
    NSURL *url = [NSURL URLWithString:@"http://test.com/json.php"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestJSONdata length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestJSONdata];

    NSURLResponse *response = nil;
    NSError *error = nil;

    NSData *result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    NSLog(@"RESULT: %@", requestJSONdata);

    if (error == nil)
        return result;
    return nil;
} 
```

我的PHP代码：

```
if (isset($_REQUEST))
{
    $json = $_REQUEST;
    $data = json_decode($json);

    $title = $_REQUEST['title'];
    $article = $_REQUEST['article'];
    $timestamp = $_REQUEST['timestamp'];

    mysql_query("INSERT INTO news (title, article, timestamp) VALUES ('$title->title','$article->article','$timestamp->timestamp')");
}

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:51:39.430

由于您执行 POST 请求，因此您在 http 正文中收到了 json 有效负载。
因此，您需要对其进行解码：

```
$http_body = file_get_contents('php://input');
$data = json_decode($http_body); 
```

之后，您应该能够访问以下数据：

```
$data->title 
```

PHP 不会自动解码传入的 json 数据。

请参阅有关该内容的[文档](http://de3.php.net/manual/de/wrappers.php.php)`php://input`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:59:26.540

你的问题是你没有得到任何数据到你的 php 文件。

当你做一个发布请求时，你需要做

$whatevervar = $_POST['NAME-OF-POST-VARIABLE-FROM-CLIENT'] 这就是您在数据库中发布空内容的原因。当您发布到您的数据库时，不要直接将帖子变量放在那里，首先清理并剥离帖子，然后将第二个 var 放入您的数据库中。您还需要回复回电以了解您的查询发生了什么。

# android - Alpha 不适用于这个简单的示例

> ID：13276915
> 
> 赞同：0
> 
> 时间：2012-11-07T19:37:25.583
> 
> 标签：android, imageview, alpha

我的要求非常简单：我只想有一个相机预览，前面有一个透明的drawable。

最大的问题是 alpha="0" 似乎可以工作（没有图片），但是一旦我设置了一些 alpha 值（甚至是“1”），图片就会显示为不透明！

布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <android.view.SurfaceView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/preview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </android.view.SurfaceView>

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:src="@drawable/test"
        android:alpha="5"/>
</RelativeLayout> 
```

代码：

```
/***
  Copyright (c) 2008-2012 CommonsWare, LLC
  (..)
*/

import android.app.Activity;
import android.hardware.Camera;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.Toast;

public class PreviewDemo extends Activity {
  private SurfaceView preview=null;
  private SurfaceHolder previewHolder=null;
  private Camera camera=null;
  private boolean inPreview=false;
  private boolean cameraConfigured=false;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    preview=(SurfaceView)findViewById(R.id.preview);
    previewHolder=preview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  }

  @Override
  public void onResume() {
    super.onResume();

    camera=Camera.open();
    startPreview();
  }

  @Override
  public void onPause() {
    if (inPreview) {
      camera.stopPreview();
    }

    camera.release();
    camera=null;
    inPreview=false;

    super.onPause();
  }

  private Camera.Size getBestPreviewSize(int width, int height,
                                         Camera.Parameters parameters) {
    Camera.Size result=null;

    for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
      if (size.width<=width && size.height<=height) {
        if (result==null) {
          result=size;
        }
        else {
          int resultArea=result.width*result.height;
          int newArea=size.width*size.height;

          if (newArea>resultArea) {
            result=size;
          }
        }
      }
    }

    return(result);
  }

  private void initPreview(int width, int height) {
    if (camera!=null && previewHolder.getSurface()!=null) {
      try {
        camera.setPreviewDisplay(previewHolder);
      }
      catch (Throwable t) {
        Log.e("PreviewDemo-surfaceCallback",
              "Exception in setPreviewDisplay()", t);
        Toast
          .makeText(PreviewDemo.this, t.getMessage(), Toast.LENGTH_LONG)
          .show();
      }

      if (!cameraConfigured) {
        Camera.Parameters parameters=camera.getParameters();
        Camera.Size size=getBestPreviewSize(width, height,
                                            parameters);

        if (size!=null) {
          parameters.setPreviewSize(size.width, size.height);
          camera.setParameters(parameters);
          cameraConfigured=true;
        }
      }
    }
  }

  private void startPreview() {
    if (cameraConfigured && camera!=null) {
      camera.startPreview();
      inPreview=true;
    }
  }

  SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
      // no-op -- wait until surfaceChanged()
    }

    public void surfaceChanged(SurfaceHolder holder,
                               int format, int width,
                               int height) {
      initPreview(width, height);
      startPreview();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
      // no-op
    }
  };
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:47:14.960

[`android:alpha`](http://developer.android.com/reference/android/view/View.html#attr_android:alpha)是一个从 0 到 1 的浮点值。如：

*   0 是不可见的。
*   0.5 表示 50% 透明。
*   1 完全不透明。

改为使用`android:alpha="0.05"`。

# oauth - 是否可以通过 Google oAuth2 获取电话号码？

> ID：13276919
> 
> 赞同：10
> 
> 时间：2012-11-07T19:37:47.747
> 
> 标签：oauth, oauth-2.0, google-oauth

根据 OpenID 规范，应该可以 [http://openid.net/specs/openid-attribute-properties-list-1_0-01.html](http://openid.net/specs/openid-attribute-properties-list-1_0-01.html)但是在 Google OAuth2 文档中没有提到它。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T23:20:45.650

我们目前不提供电话号码作为我们人员的一部分/获取 Google+ API。

[https://developers.google.com/+/api/latest/people](https://developers.google.com/+/api/latest/people)

此 api 中属性的可见性由用户在 G+ 个人资料设置中控制。

userinfo api 特定于 OpenId，可能不会获取此字段。

[https://developers.google.com/accounts/docs/OAuth2Login#userinfocall](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

它可能在未来发生，我们对请求持开放态度。

达韦普

# mysql - 将表格末尾的条目移动到顶部

> ID：13276922
> 
> 赞同：2
> 
> 时间：2012-11-07T19:38:01.933
> 
> 标签：mysql, sql

我正在使用 mySql，并且在表的末尾有一条记录。我想把它带到桌子的顶端。怎么能动呢？我的意思是表格顶部有条目，我怎样才能将两个条目的 ID 相互替换。

我想这样做是因为我想将最后一项移动到列表的开头，以便它首先出现在我的网站上。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:44:05.373

您可以通过以下方式使用自定义订单：

```
select * from mytable
order by if(id = 1234, -1, id); -- change "1234" to id of row you want first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:39:53.590

假设您不想更改数据库中数据的结构......

获取结果集的数组并在 PHP 中执行此操作。如果您只更改列表中一项的顺序，请不要在 SQL 中执行此操作。

```
 $resultSet = $connection->query("some query");
  if(is_array($resultSet)){

      //pop the last item in array out of array
      $itemToMove = array_pop($resultSet);

      //insert the item at the start of the array
      array_unshift($resultSet, $itemToMove);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:58:28.040

我猜你有类似的东西`SELECT * FROM data ORDER BY id`，你想把 id 设为 50 id 1。以下两条语句应该会有所帮助：

```
UPDATE data SET id = id + 1 ORDER BY id DESC;
UPDATE data SET id = 1 WHERE id = 51; 
```

请注意，您需要在第二个语句中更新 id 51，因为您使用第一个语句为每个 id 添加了 1。

如果您的 SELECT 不包含 ORDER 子句（因为它应该）也这样做：

```
ALTER TABLE data ORDER BY id; 
```

希望这可以帮助。

问候

TC

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T19:58:53.140

如果只需要在表格顶部显示最后一行，您可以使用以下命令：

```
SELECT *
FROM your_table
ORDER BY id = (select id from your_table order by id desc limit 1) DESC, id 
```

子查询总是返回最后一个id（你也可以使用`max(id)`），如果满足条件，它的值是1，否则它是0，因此`DESC`首先移动满足条件的行。

如果您还需要显示交换的 id，这可能是一个想法：

```
SELECT IF(id=1,
          (select max(id) from your_table),
          if(id=(select max(id) from your_table),1,user_id)) as id
FROM your_table
ORDER BY id 
```

（首先`id`总是`1`？如果不是，您必须将两者都替换`1`为`select min(id) from your_table`）

但是你真的想交换值，而不仅仅是以不同的顺序显示行吗？不幸的是，在 MySql 中无法做到这一点：

```
UPDATE your_table SET id = (select max(id) from your_table) + 1 WHERE id = 1
UPDATE your_table SET id = 1 WHERE id = (select max(id) from your_table) - 1
UPDATE your_table SET id = id-1 WHERE id = (select max(id) from your_table) 
```

（顺便说一句，如果最小值与 1 不同，它会丢失）因为如果在子查询中引用它，则无法更新表。我发布了另一个有效的解决方案，只使用连接！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T20:57:22.843

我已经发布了一个仅使用 SELECT 的解决方案，但我不确定是否可以使用 UPDATE，但我找到了方法。

我知道这有点奇怪，但我认为它是唯一始终有效的解决方案，并且总是先使用一个查询`id`与最后一个交换`id`，而不知道它们的值：

```
update
  your_table
  inner join (select max(id) as max from your_table) mx
  inner join (select min(id) as min from your_Table) mn
  on your_table.id = mx.max
  or your_table.id = mn.min
set id=if(id=mx.max,mn.min,mx.max) 
```

或者如果你只需要把最后一个放在顶部，然后每隔一行移动一次，这样的事情可能会起作用：

```
update your_table
  inner join (select max(id) as max from your_table) mx
  inner join (select min(id) as min from your_table) mn
set id=if(your_table.id=mx.max,mn.min,id+1) 
```

但是请注意，如果 id 是主键，这可能不起作用，如果是这种情况，我认为它不能一次性完成。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-07T19:42:09.757

我想选择查询中的简单 ORDER BY 不能满足您的需求，因此这里有一种方法可以将 id = 123 的行物理替换为行 id = 1 假设您的表有超过 123 行

```
update table_name set id=(select max(id)+1) from table_name where id=123;
/* this will move the last record to somewhere temporary */

update table_name set id=123 where id=1 ;
/* this will move the first row to the place of the row that was at the bottom */

update table_name set id=1 where id=(select max(id) from table_name);
/* moving from temporary row to the first of the table */ 
```

# sql-server-2008 - 本地报表服务器未显示“内容和属性”选项卡

> ID：13276923
> 
> 赞同：0
> 
> 时间：2012-11-07T19:38:11.927
> 
> 标签：sql-server-2008, reporting-services, ssrs-2008

我的报表服务器存在严重问题。

我在主页上看不到内容、属性。如果我单击报告，我将看不到视图、属性、历史记录和订阅选项卡。

以下是我在主页上看到的内容。

2012 年 11 月 6 日，星期二 5:25 PM 数据源

2012 年 11 月 6 日，星期二 5:25 PM 报告 有人知道我怎样才能找回标签吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:45:41.567

确保您正在使用服务器管理员帐户进行连接。如果从本地计算机浏览，请使用“以管理员身份运行”以完全权限启动 IE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:50:20.080

谢谢杰米的回复。我看错了方向。我正在查看报表服务器，而不是报表管理器。报表服务器基本上不打算被浏览，如果我们这样做，我们将看不到我们在报表管理器中看到的选项卡。对于以后可能遇到相同问题的人，请确保您使用的是报表管理器链接而不是报表服务器。

希望它可以帮助你们中的一些人。

# hibernate - ireport 与休眠，无法实例化方言类

> ID：13276928
> 
> 赞同：2
> 
> 时间：2012-11-07T19:38:50.170
> 
> 标签：hibernate, ireport

我正在使用 hibernate 和 iReport，很好地配置类路径，但我收到此错误无法实例化方言类，esoty 使用 SQLServer。

这是方言

```
<property name="dialect"> org.hibernate.dialect.SQLServerDialect </property> 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:15:57.027

当您的项目和 ireport 类路径中使用了两个不同版本的 hibernate 时，就会出现此问题。确保您的项目和 ireport 类路径都指向相同版本的 hibernate。

# java - 用户自定义布局的更简单方法

> ID：13276932
> 
> 赞同：1
> 
> 时间：2012-11-07T19:39:00.670
> 
> 标签：java, android, layout, styles, themes

下面我有一个应用程序，它允许用户选择背景颜色和字体。这将应用于其余的活动。然而，这是非常长的，不是很容易阅读。有没有办法简化我的方法？

风格

```
<style name ="redBodyMono">
         <item name="android:textColor">@color/red</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="redTitleMono">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/red</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="blueBodyMono">
         <item name="android:textColor">@color/darkBlue</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="blueTitleMono">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/darkBlue</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="greenBodyMono">
         <item name="android:textColor">@color/green</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="greenTitleMono">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/green</item>
        <item name="android:typeface">monospace</item>
    </style>

    <style name ="redBodySans_Serif">
         <item name="android:textColor">@color/red</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="redTitleSans_Serif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/red</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="blueBodySans_Serif">
         <item name="android:textColor">@color/darkBlue</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="blueTitleSans_Serif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/darkBlue</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="greenBodySans_Serif">
         <item name="android:textColor">@color/green</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="greenTitleSans_Serif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/green</item>
        <item name="android:typeface">sans</item>
    </style>

    <style name ="redBodySerif">
         <item name="android:textColor">@color/red</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name ="redTitleSerif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/red</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name ="blueBodySerif">
         <item name="android:textColor">@color/darkBlue</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name ="blueTitleSerif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/darkBlue</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name ="greenBodySerif">
         <item name="android:textColor">@color/green</item>
        <item name ="android:background">@color/white</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name ="greenTitleSerif">
         <item name="android:textColor">@color/white</item>
        <item name ="android:background">@color/green</item>
        <item name="android:typeface">serif</item>
    </style>

    <style name = "Theme" parent="@android:style/Theme">
        </style>

    <style name = "Theme.RedMono" >
        <item name="textTitle">@style/redTitleMono</item>
        <item name="textBody">@style/redBodyMono</item>

        </style>

    <style name = "Theme.BlueMono" >
        <item name="textTitle">@style/blueTitleMono</item>
        <item name="textBody">@style/blueBodyMono</item>

        </style>

       <style name = "Theme.GreenMono">
        <item name="textTitle">@style/greenTitleMono</item>
        <item name="textBody">@style/greenBodyMono</item>
        </style>

    <style name = "Theme.RedSans" >
        <item name="textTitle">@style/redTitleSans_Serif</item>
        <item name="textBody">@style/redBodySans_Serif</item>

        </style>

    <style name = "Theme.BlueSans" >
        <item name="textTitle">@style/blueTitleSans_Serif</item>
        <item name="textBody">@style/blueBodySans_Serif</item>

        </style>
    <style name = "Theme.GreenSans">
        <item name="textTitle">@style/greenTitleSans_Serif</item>
        <item name="textBody">@style/greenBodySans_Serif</item>

        </style>

    <style name = "Theme.RedSerif" >
        <item name="textTitle">@style/redTitleSerif</item>
        <item name="textBody">@style/redBodySerif</item>

        </style>

    <style name = "Theme.BlueSerif" >
        <item name="textTitle">@style/blueTitleSerif</item>
        <item name="textBody">@style/blueBodySerif</item>

        </style>
    <style name = "Theme.GreenSerif">
        <item name="textTitle">@style/greenTitleSerif</item>
        <item name="textBody">@style/greenBodySerif</item>

        </style> 
```

菜单类

```
public class UserMenu extends Activity implements OnClickListener {
Button preview, apply;
Spinner spinnerColor, spinnerTypeFace;
SharedPreferences preferences;
public static String theme = "Blue";
    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         preferences = getSharedPreferences("StylePref", 0);
         theme = preferences.getString("THEME", "Blue");
        if(theme.equals("RedMonospace"))
        {
            setTheme(R.style.Theme_RedMono);
        }
        if(theme.equals("RedSerif"))
        {
            setTheme(R.style.Theme_RedSans);
        }
        if(theme.equals("RedSans"))
        {
            setTheme(R.style.Theme_RedSerif);
        }

        if(theme.equals("BlueMonospace"))
        {
            setTheme(R.style.Theme_BlueMono);
        }
        if(theme.equals("BlueSerif"))
        {
            setTheme(R.style.Theme_BlueSans);
        }
        if(theme.equals("BlueSans"))
        {
            setTheme(R.style.Theme_BlueSerif);
        }

        if(theme.equals("GreenMonospace"))
        {
            setTheme(R.style.Theme_GreenMono);
        }

        if(theme.equals("GreenSerif"))
        {
            setTheme(R.style.Theme_GreenSans);
        }

        if(theme.equals("GreenSans"))
        {
            setTheme(R.style.Theme_GreenSerif);
        }

        setContentView(R.layout.activity_user_menu);

        System.out.println("tHE THEME " + theme);

        spinnerColor = (Spinner) findViewById(R.id.spinnerColorMenu);
        spinnerTypeFace = (Spinner) findViewById(R.id.spinnerTypeFaceMenu);

        preview = (Button)findViewById(R.id.previewButton);
           preview.setOnClickListener(this);
           apply = (Button)findViewById(R.id.applyButton);
           apply.setOnClickListener(this);

    }

    public void onClick(View v)

    {
        if(v== preview)
        {
        SharedPreferences.Editor preferencesEditor = preferences.edit();
        String bgColor = spinnerColor.getSelectedItem().toString();
        String typeFace = spinnerTypeFace.getSelectedItem().toString();
        System.out.println(typeFace);
        preferencesEditor.putString("THEME", bgColor+typeFace);
        preferencesEditor.commit();

        if(bgColor.equals("Red") && typeFace.equals("Monospace"))
         {
            Intent intent = getIntent();
            //intent.putExtra("Theme", "Red");
          finish();
          startActivity(intent);
         }

        if(bgColor.equals("Red") && typeFace.equals("Sans"))
        {
        Intent intent = getIntent();
        //intent.putExtra("Theme", "Red");
         finish();
         startActivity(intent);
        }

        if(bgColor.equals("Red") && typeFace.equals("Serif"))
        {
        Intent intent = getIntent();
        //intent.putExtra("Theme", "Red");
         finish();
         startActivity(intent);
        }

        else if(bgColor.equals("Blue")&& typeFace.equals("Monospace"))
        {
         Intent intent = getIntent();
            //intent.putExtra("Theme", "Blue");
          finish();
          startActivity(intent);
        }

        else if(bgColor.equals("Blue")&& typeFace.equals("Sans"))
        {
         Intent intent = getIntent();
            //intent.putExtra("Theme", "Blue");
          finish();
          startActivity(intent);
        }
        else if(bgColor.equals("Blue")&& typeFace.equals("Serif"))
        {
         Intent intent = getIntent();
            //intent.putExtra("Theme", "Blue");
          finish();
          startActivity(intent);
        }

         else if(bgColor.equals("Green")&& typeFace.equals("Monospace"))
         {
             Intent intent = getIntent();
             //intent.putExtra("Theme", "Blue");
           finish();
           startActivity(intent);
         }
         else if(bgColor.equals("Green")&& typeFace.equals("Sans"))
         {
             Intent intent = getIntent();
             //intent.putExtra("Theme", "Blue");
           finish();
           startActivity(intent);
         }
         else if(bgColor.equals("Green")&& typeFace.equals("Serif"))
         {
             Intent intent = getIntent();
             //intent.putExtra("Theme", "Blue");
           finish();
           startActivity(intent);
         }
        }
        else if(v == apply)
        {
            SharedPreferences.Editor preferencesEditor = preferences.edit();
            String bgColor = spinnerColor.getSelectedItem().toString();
            String typeFace = spinnerTypeFace.getSelectedItem().toString();
            preferencesEditor.putString("THEME", bgColor+typeFace);
            preferencesEditor.commit();
            Intent applyIntent = new Intent(this,MyCourses.class);
            startActivity(applyIntent);

        }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:44:59.360

不，这是最好的方法。继承可用于使主题和样式更紧凑，但它并不真正适用于您的情况。

您可以通过使用 if/else if 语句在活动中提供更好的代码。即使将所有主题都放在哈希图中，否则，没有什么比这更好的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T20:22:17.043

我可能至少会将它分解为另一个类，例如`ThemeHandler.getThemeId(String)`，设置一些静态最终字符串而不是硬编码，然后返回`R.style.whatever`。最后，将其与`setTheme(ThemeHandler.getThemeId(theme));`. 像这样的东西：

```
class ThemeHandler {
    public static final String RED_MONO = "RedMonospace";
    public static final String RED_SANS = "RedSans";
    public static final String RED_SERIF = "RedSerif";
    //etc...

    public static int getThemeId(String themeString) {
        if(themeString.equals(RED_MONO)) return R.style.Theme_RedMono;
        else if(themeString.equals(RED_SANS)) return R.style.Theme_RedSans;
        else if(themeString.equals(RED_SERIF)) return R.style.Theme_RedSerif;
        //etc...
        else return R.style.Theme_Blue; //or whatever default
    }
}

//Then, in your onCreate()
String theme = preferences.getString("THEME", "Blue");
setTheme(ThemeHandler.getThemeId(theme)); 
```

为了获得额外的功劳，您可以改用枚举而不是字符串来简化一些事情——然后您可以使用 switch 语句而不是这么多 if/else 语句。:)

# css - DIV 中的 CSS 位置困境

> ID：13276933
> 
> 赞同：2
> 
> 时间：2012-11-07T19:39:11.293
> 
> 标签：css, z-index

我正在研究我网站的顶部标题栏样式。我在 Header DIV 中放置了 2 个 DIV。一个 Div 在顶部，而另一个在底部。顶部专用于带有右侧链接的左侧徽标，而底部 Div 专用于水平菜单（我将在稍后完成）。

我的问题出现在徽标的位置上。我的 logo 比顶部 Div 略高，这导致底部 Div 简单地覆盖了我的 logo 底部。如果我裁剪或调整徽标大小，问题就解决了。但我不想那样做。我想在更高的 z-index 上制作徽标。但它不起作用。似乎 z-index 被忽略了。

这是我到目前为止所拥有的：

```
<div id="siteHeader">

   <div id="headernav-top" style="height:50px;">
    <div id="headerlogo" style="height:72px;background-image:url('logo.jpg');background-repeat:no-repeat;">
    </div>
    <span id="headertext">  
        Welcome Back, <b>Whomever you are</b> | 
        <a href="/">My Account</a> | 
        <a href="/logout.php">Log Off</a> <br />
    </span>
  </div>

  <div id="headernav-bottom" style="height:39px;background-color:#0C6;">

    More Nav will go here

  </div>
</div> <!-- end siteHeader --> 
```

**headernav-bottom**肯定覆盖了 72px 高度标志的底部，在headerlogo **div**中。

当我将**z-index**放入两个 div 时，它似乎被忽略了。

是否有另一种方法可以让**headerlogo**在**siteHeader** div 上方稳定下来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:07:18.600

似乎您已经[找到了答案](https://stackoverflow.com/questions/13276933/css-position-dilemma-within-divs#comment-18099202)aaaa，这就是为什么会出现这种情况的原因：对于静态定位的元素（默认）， z-index*会被忽略。*`positon:relative`z-index 仅在应用于、`positon:absolute`或`positon:fixed`元素时才生效。

添加非静态位置属性是强制所需元素堆叠的常用方法。您使用哪一个也很重要：

`position: relative`
这将允许您的元素在文档中保留其流程。使用这个可以防止其他元素塌陷到该元素将作为静态元素占据的区域中。

`position: absolute`
这会使元素脱离流动。与 相反`relative`，这将使其在文档中的有效大小为 0px x 0px。然后其他元素将塌陷到该元素本来会占据的区域中。（请注意，这有时会使这些元素隐藏在您的`absolute`元素后面。）

`positon: fixed`
与 相同`absolute`。不流畅，但是有了这个，元素是相对于窗口而不是第一个非静态父级的。（仅当您使用`top`、`right`、`bottom`和定位时才重要`left`）当您滚动时，它也会“粘”在窗口上。

出于您的目的，`position:relative`没有定位属性可能是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:43:05.313

这行得通吗？我添加了一个**位置：绝对；**属性。

```
<div id="headerlogo" position: absolute; style="height:72px; background-image:url('logo.jpg'); background-repeat:no-repeat;">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:46:02.937

您`#headernav-top`的高度为 50 像素，而内部`#headerlogo`的高度为 72 像素。因此，内部元素流过外部元素的边界。如果您没有定位`#headernav-top`绝对，只需忽略它的`height`属性。该元素现在将根据需要扩展高度（例如，考虑背景图像容器的高度）。

# android - ViewPager — 如何在每个页面上启动不同的计时器？

> ID：13276942
> 
> 赞同：2
> 
> 时间：2012-11-07T19:39:54.057
> 
> 标签：android, timer, handler, runnable

我想要的只是为 ViewPager 中的每个页面创建新的单独计时器。我当前的实现包含所有页面的一个处理程序。我使用 ViewPager.OnPageChangeListener.onPageSelected() 启动新的 TimerTask，但正如我在应用程序工作期间看到的那样，runnables 堆栈和计时器变得越来越快，一次更新所有文本视图，即使我试图删除所有回调处理程序。

它应该如何工作：滑动到第 1 页 - 计时器 1 启动，滑动到第 2 页 - 计时器 1 重置和停止，计时器 2 启动等等。

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {

        public void onPageScrollStateChanged(int page) {

        }

        public void onPageScrolled(int position, float arg1, int arg2) {
        }

        public void onPageSelected(int position) {
            View currentPage = ((QuestionPagerAdapter) viewPager.getAdapter()).get(position);

            timerText = (TextView) currentPage.findViewById(R.id.timerText);
            handler.removeCallbacks(doTick);
            if (timerText != null) startTimer();
        }

    }); 
```

可运行实现：

```
final Runnable doTick = new Runnable() {

    public void run() {
        seconds--;
        if (seconds == -1) {
            minutes--;
            seconds = 59;
        }
        String secText = String.valueOf(seconds);
        if (seconds < 10) secText = "0" + secText;
        timerText.setText("0" + String.valueOf(minutes) + ":" + secText);
        viewPager.getAdapter().notifyDataSetChanged();
    }

};

private void startTimer() {
    for (int i = 1; i <= seconds; i++) {
        TimerTask task = new TimerTask() {
            @Override
            public void run() {
                handler.post(doTick);
            }
        };
        timer.schedule(task, i * 1000); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:51:55.960

你在哪里实例化新的 doTick Runnable？这应该只执行一次，否则，您将无法删除与 doTick 实例关联的所有回调，因为您会丢失它并用新实例替换它。

声明它有一个数据字段并修改你的 startTimer 方法如下：

```
private void startTimer( TextView textView ) {
    if( doTicks != null  ) {
       handler.removeCallbacks(doTick);
       doTicks = new doTicks( textView );
    }
    for (int i = 1; i <= seconds; i++) {
        TimerTask task = new TimerTask() {
            @Override
                public void run() {
                    handler.post(doTick);
                }
            };
        timer.schedule(task, i * 1000); 
    }
} 
```

您还需要为您的 doTicks Runnable 提供一个参数，以便为其必须更新的字段提供参考。把这个参数也传给startTimer，不要把这个字段的引用作为activity的数据成员，只作为doTicks的数据成员（所以你需要创建一个真正的静态内部类）。

# nfc - uicc工具包安装参数返回6A80

> ID：13276947
> 
> 赞同：0
> 
> 时间：2012-11-07T19:40:05.050
> 
> 标签：nfc, toolkit, apdu

我的 uicc 工具包安装参数有问题。长时间尝试，但没有成功。

有简单的uicc工具包代码..不明白我的错误在哪里..这是我的安装参数APDU..变成总是6A80..

```
 80 E6 0C 00 => CLA INS P1(Selectable) P2 
    41 => TOTAL DATA LEN
    //AID's
    0A 51 02 03 04 05 06 07 08 09 00 
    0B 51 02 03 04 05 06 07 08 09 00 00 
    0B 51 02 03 04 05 06 07 08 09 00 00 

    01 00 => Privileges

    => Begin of install pararms
    1A => LEN INSTALL PARAMS
    EF 08 => System specific param Tag + Len
    C7 02 00 00 C8 02 00 00 => volatile and nonvolatile mem quota
    C9 00 => Application specific params (Tag + Len)
    EA 0C
    80 UICC Toolkit Application specific parameters field 
    00 => prio level
    00 => max timer allowed
    10 => max text length
    01 => max menu entry
    00 => pos of the mneu entry
    00 => identifier of the menu entry
    02 => max number of channels
    01 => len of msl
    00 => msl
    00 => len of tar values
    00 => max number of this appl. instances
    => End of install pararms

    00 => Install Token Len
    00 => LE 
```

我的目标是非接触式 + uicc STK 小程序。但我什至无法安装一个简单的 uicc 工具包小程序..

希望，任何人都有一个想法..

此致..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T16:15:58.423

[您可以在此处](http://www.etsi.org/deliver/etsi_ts/102200_102299/102226/09.02.00_60/ts_102226v090200p.pdf)参考 ETSI 的标准规范。

[SIM 联盟](http://www.simalliance.org/)对此也有很好的资源：[铺路石 R7](http://www.simalliance.org/en?t=/documentManager/sfdoc.file.detail&ParentID=1188397757821&fileID=1236162278836&active=SFDOC)文档。有关安装参数，请参阅 (U)SAT 上的第 21.2.3 节。您需要先注册（免费）才能下载。

关于您的安装命令的一些注释：

*   实例 AID 应由 16 个字节组成，并在字节 13-15 处具有 TAR。
*   volatile 和 non-volatile 的顺序不能颠倒
*   UICC 工具包参数首先出现，然后是小程序特定参数
*   优先级不应使用 0x00 值，因为它是保留的
*   不需要 LE 字节，因为令牌的长度已经是 0

因此，安装的 APDU 应该看起来与此类似（需要重新计算长度，由 LL 表示）

```
80 E6 0C 00              -- CLA INS P1(Selectable) P2 
LL                       -- TOTAL DATA LEN 
//AID's
0A 51 02 03 04 05 06 07 08 09 00 
0B 51 02 03 04 05 06 07 08 09 00 00 
10 51 02 03 04 05 06 07 08 09 00 00 XX <3_bytes_TAR> XX 

01 00                   -- Privileges
1B                      -- LEN INSTALL PARAMS
    EF 08               -- System parameters
        C8 02 00 00     -- non volatile memory first
        C7 02 00 00     -- volatile memory
    EA LL               -- UICC system specific param first, tag C9 after this
        80 LL           -- UICC Toolkit Application specific parameters tag+length 
            FF          -- prio level (lowest priority)
            00          -- max timer allowed
            10          -- max text length
            01          -- max menu entry
            00          -- pos of the menu entry
            00          -- identifier of the menu entry
            02          -- max number of BIP channels
            01          -- len of msl
            00          -- msl
            00          -- len of tar values
            01          -- max number of this appl. instances
    C9 00               -- Application specific params
00                      -- Install Token length 
```

# google-apps-script - 谷歌脚本在阅读电子表格时产生意外错误

> ID：13276948
> 
> 赞同：0
> 
> 时间：2012-11-07T19:40:08.893
> 
> 标签：google-apps-script

```
var staffSheet = SpreadsheetApp.openById('0AvHCNzkk36UPdENnQndpZ3VoUmVUUjJmOEZjVTBQNXc');
var staff_active_sheet = staffSheet.getSheetByName("Staff");
var staffs = staff_active_sheet.getRangeByName("A1:C" + staff_active_sheet.getLastRow()).getValues(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:05:31.350

您正在调用不存在`getRangeByName`的[Sheet 。](https://developers.google.com/apps-script/class_sheet)你可能想打电话`getRange`。

# jsp - 表达式语言中不允许Javabean函数为空？

> ID：13276949
> 
> 赞同：0
> 
> 时间：2012-11-07T19:40:11.090
> 
> 标签：jsp, tomcat, el

在添加实际数据之前，我正在尝试编写一个仅用于测试的简单页面。

我有一个接口，它指定了一个返回布尔值的方法 isEmpty()，在 JSP 中使用以下代码：

```
<c:if test="${not empty output}">
    <h2>${output.title}</h2>
    <c:choose>
        <c:when test="${output.empty}">
            <h3>No results found.</h3>
        </c:when>
        <c:otherwise>
            <table title="Unique Users Report">
                <tr>
                    <th>Range</th>
                    <th>Number of Unique Users</th>
                </tr>
                <tr>
                    <td>Monday<br />10/29/2012</td>
                    <td>1990</td>
                </tr>
                <tr>
                    <td>Tuesday<br />10/30/2012</td>
                    <td>1000</td>
                </tr>
                <tr>
                    <td>Wednesday<br />10/31/2012</td>
                    <td>2112</td>
                </tr>
                <tr>
                    <td>Thursday<br />11/01/2012</td>
                    <td>2321</td>
                </tr>
            </table>
        </c:otherwise>
    </c:choose>
</c:if> 
```

由于此时尚未将输出设置到模型中，因此我什至不应该使用这段代码。将测试“${output.empty}”中的行替换为“${not empty output}”允许Tomcat 解析此EL。但是，对于当前的代码，代码失败并出现以下错误（请注意，此时甚至没有实现输出，因此模型中没有任何内容）：

```
org.apache.jasper.JasperException: /WEB-INF/jsp/reports/uniqueUsers.jsp(19,3) "${output.empty}" contains invalid expression(s): javax.el.ELException: Error Parsing: ${output.empty}
at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:198)
at org.apache.jasper.compiler.Validator$ValidateVisitor.checkXmlAttributes(Validator.java:1186)
at org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:846) 
```

那么，EL 中是否不允许使用空属性，或者我缺少什么？我正在使用 Tomcat 6.0.32。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:04:21.907

我能够在这里找到答案：http: [//www.coderanch.com/t/464534/JSP/java/JSTL-empty-keyword](http://www.coderanch.com/t/464534/JSP/java/JSTL-empty-keyword)

显然你可以使用 ${bean['empty']} 来访问这个属性，这看起来很愚蠢，但它确实存在。

# python - 从 Django 模型字段名中获取缩写的列名

> ID：13276955
> 
> 赞同：0
> 
> 时间：2012-11-07T19:41:03.083
> 
> 标签：python, django, django-models

我必须为我的查询编写一个自定义 where 子句。我需要从模型中的字段中获取出现在 Oracle 表中的列名。我正在遍历 MyModel._meta.fields 中的模型字段并获取 name 属性。在任何情况下，模型字段的名称都是列名。在异常中，字段名称对于列来说太长了，所以 Django 的 syncdb 给列取了一个缩写名称。如何获取列名？

我的字段名称：political_contributions_description

列名：political_contributions_de0ec3

我试过 field.get_attname_column()，如

```
for field in MyModel._meta.fields:
    field.get_attname_column() 
```

但这只是为我的领域提供了以下元组：

（'political_contributions_description'，'political_contributions_description'）

顺便说一句，超过 30 个字符的 Oracle 列将被缩写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:53:59.240

尝试...

```
MyModel._meta.get_field('username').column 
```

# python - 用python在html文件中找到body标签的结尾

> ID：13276957
> 
> 赞同：1
> 
> 时间：2012-11-07T19:41:21.473
> 
> 标签：python

嗨，我有以下代码

```
inex = "app/index.html" 
original = open(index,"r")
for line in original:
    if line =='</body>':
        print "here"
original.close() 
```

但它似乎没有找到'. 即使 index.html 文件没有，我是否必须去除潜在的空白？关于如何找到标签的任何线索？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:10:42.453

或者您可以尝试：

```
if '</body>' in line: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:45:17.420

现在你要求该行是完全的`"</body>"`，没有空格。有效的 HTML 也可以在 body 之前有其他内容，因为 html 只是将行尾视为空格，即你可以有`foo</body>`

解决问题的最直接方法是将文件内容读入字符串，然后在该字符串上调用 find

```
allText = original.read()
location = allText.find("</body>") 
```

还有许多 HTML 解析器可以为您完成这项工作。

# c# - 为什么我要禁用 .NET 代码合同

> ID：13276958
> 
> 赞同：0
> 
> 时间：2012-11-07T19:41:28.527
> 
> 标签：c#, code-contracts

> **可能重复：**
> [.net 4.0 代码合同。什么时候使用？他们什么时候浪费时间？](https://stackoverflow.com/questions/3111332/net-4-0-code-contracts-when-to-use-when-are-they-a-waste-of-time)

我开始阅读 .NET 代码合同的完整文档，我注意到您可以指定编译器不发出与您的合同相对应的代码。但我想知道为什么有人要这样做？！我的意思是，从文档来看，代码合同是关于指定代码的前/后/不变量。

查看另一个问题[.net 4.0 Code Contracts。什么时候使用？他们什么时候浪费时间？](https://stackoverflow.com/questions/3111332/net-4-0-code-contracts-when-to-use-when-are-they-a-waste-of-time)，似乎合约应该防止对象的无效状态，但话又说回来，我为什么要禁用它们！这样一来，我岂不是为一大堆问题打开了大门吗？

是否应该将它们用作业务验证，例如确保 a`startDate <= endDate`或者我应该使用旧的 if-then-throw 进行业务？如果我禁用代码合同，我的班级现在可能处于无效状态。

所以我的问题仍然存在，我为什么要禁用代码合同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:45:13.460

我能想到的一种情况是，如果您的条件测试成本很高，您可能希望在发布版本中禁用 then 以提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:50:41.830

出于同样的原因[`Debug.Assert()`](http://msdn.microsoft.com/en-us/library/kssw4w7z.aspx)，没有编译到 Release 版本中。有时您可以检测到非致命的无效条件，并且对于某些应用程序来说，继续执行是期望的行为。在 Release 构建中保持代码契约就像使用[`Trace.Assert()`](http://msdn.microsoft.com/en-us/library/tk4kachs.aspx).

我个人总是遵守合同，因为我什至没有尝试计划我的代码以某种方式在无效状态下生存。

# scala - Scalacheck 道具类型不匹配

> ID：13276961
> 
> 赞同：3
> 
> 时间：2012-11-07T19:41:50.083
> 
> 标签：scala, types, type-mismatch, scalacheck

我遇到过这个错误几次。这很不言自明，不匹配出现在我的 ans var 上，它是一个 Int，我相信它应该是这样，但是它需要类型 prop。我感觉它与语法有关，我构建它的方式，但让我知道你的想法：

![在此处输入图像描述](../Images/dc716c4c62775f85e33d9405ebcff783.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:02:00.757

蕴涵运算符的签名是：

```
def ==>(p: ⇒ Prop): Prop 
```

假设隐式转换在范围内，应该可以`Prop`从 a 构造 a `Boolean`。因此，您只需要在`(ans == n*m)`. 否则， to 的参数`==>`将只是`ans`，即 an `Int`，它不能转换为`Prop`。

所需的隐式转换是：

```
 implicit def propBoolean(b: Boolean): Prop 
```

并且在对象中`Prop`，因此请确保`import org.scalacheck.Prop.propBoolean`。

# ibm-mq - AMQERR01.LOG 中重复 AMQ9209/AMQ9999

> ID：13276963
> 
> 赞同：3
> 
> 时间：2012-11-07T19:41:57.590
> 
> 标签：ibm-mq

我在 mq 服务器上的 AMKERR01.LOG 中看到以下错误消息重复打印

```
AMQ9209: Connection to host 'client-host (...)' for channel
'TEST_CHANNEL' closed.

EXPLANATION:
An error occurred receiving data from 'client-host (...)' over
TCP/IP.  The connection to the remote host has unexpectedly terminated.

The channel name is 'TEST_CHANNEL'; in some cases it cannot be determined and
so is shown as '????'. 
```

其次是：

```
AMQ9999: Channel 'TEST_CHANNEL' to host 'client-host (...)' ended
abnormally.

EXPLANATION:
The channel program running under process ID 5022 for channel 'TEST_CHANNEL'
ended abnormally. The host name is 'client-host (...)'; in some
cases the host name cannot be determined and so is shown as '????'. 
```

在第二条消息的操作中，它显示“请注意，可以通过调整“ExcludeMessage”或“SuppressMessage”来完全排除或抑制此消息”

为什么会出现这种情况？有这些错误是正常的吗？可以按照建议抑制这些错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:51:32.327

该消息通常表明应用程序在没有先关闭通道的情况下终止。有时它表明防火墙或其他有状态的网络检查在一段时间不活动后终止了套接字。

第一种情况的正确答案是更改应用程序以正确管理连接。在第二种情况下，升级到最新的客户端和服务器并使用新的客户端通道调整可以防止空闲通道上的网络超时。

抑制特定错误消息的能力适用于那些无法解决这些问题的根本原因的人。只要您没有丢失 MQ 消息，抑制这些错误就会增加错误日志中的信噪比。但是，这仅被视为一种临时措施，如果您需要调试某些内容，您可能需要重新启用被抑制的错误。

# vba - .find 添加多条评论

> ID：13276968
> 
> 赞同：2
> 
> 时间：2012-11-07T19:42:16.373
> 
> 标签：vba, while-loop, ms-word, find

其目的是在 word 文档中查找 myWord 的所有出现并向它们添加相同的注释。我得到了两个不需要的效果：1）代码在单词的每个实例上添加了超过 1 个注释（它似乎添加了与该单词实例数相同数量的 commens），以及 2）代码跳过了大写的单词字母。

```
Sub CheckWrd()
For Each myWord in wordArray            'wrdArray is a list of words loaded elsewhere
  With Selection.Find
   .Text = "[^13^11 ]" & wrd & "[^13^11 ,-.]"
   .Forward = True
   .Wrap = wdFindContinue
   .MatchCase = False
   .MatchWholeWord = True
  End With
  Do While Selection.Find.Execute = True
    ActiveDocument.Comments.Add Selection.range, myComment
  Loop
Next myWord 
```

此外，如果我将 Do While 构造更改为 and If then，它只会将注释添加到 myWord 的第一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T13:02:59.410

**答案：**

在 While 添加一个 .Execute 以移动事物。我真的不知道这是如何或为什么起作用的，但确实如此（这是巫毒魔法）。

(...) `Do While Selection.Find.Execute = True ActiveDocument.Comments.Add Selection.range, myComment .Execute Loop`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T01:05:33.857

尝试将`execute`循环保持在`with`语句内。此代码适用于我（使用具有多种大小写变化的测试文件）：

```
Sub find_test()
    i = 1
    With ActiveDocument.Content.Find
        .Text = "test"
        .Forward = True
        .Wrap = wdFindStop
        .MatchCase = False
        .MatchWholeWord = True
        While .Execute() = True
            .Parent.Select
            ActiveDocument.Comments.Add Selection.Range, "test" & i
            i = i + 1
        Wend
    End With
End Sub 
```

# ruby-on-rails - 如何在ruby中遍历数组并进行比较

> ID：13276969
> 
> 赞同：0
> 
> 时间：2012-11-07T19:42:21.583
> 
> 标签：ruby-on-rails, ruby, arrays

例如，我有这样的数组：

```
40,42,45,49,50,52,54,55 etc 
```

通过后查询，我从选择一些值中得到：例如 40-50，然后我将此值拆分为两个数字：（`40 and 50`但这不是主要问题，使用拆分，问题在另一个）。我需要比较这两个值，以便数组值必须在`[40...50)`值中。所以我必须为我的其他计算选择这个区间内的所有内容......如何做到这一点？或许有地图，但如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:45:57.290

试试这个：

```
arr = [40,42,45,49,50,52,54,55]
min, max = "40-50".split('-').map {|s| s.to_i }
range = min..max
arr.select {|n| range.include? n }

=> [40, 42, 45, 49, 50] 
```

这将包括 50

用于`range = 40...50`排除 50

谢谢@gregates

### 看到[它在所有版本上同样运行](http://cibox.org/slivu/stackoverflow?lang=ruby&file=how-to-iterate-via-array-in-ruby-and-compare.rb&versions=%2a&run=true)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:50:42.547

由于您使用的是 rails，您可以利用它的`.in?`帮助程序使您的代码更具可读性

```
arr = [40,42,45,49,50,52,54,55]
arr.select{|a| a.in?(40..49)} # => [40, 42, 45, 49] 
```

顺便说一句，如果你用三个点来构造一个范围，它不包括上边界。

```
arr = [40,42,45,49,50,52,54,55]
puts arr.select{|a| a.in?(40...50)} # => [40, 42, 45, 49] 
```

范围和点

```
(1..5).to_a # => [1, 2, 3, 4, 5]
(1...5).to_a # => [1, 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T19:51:54.667

```
orig_arr=[40,42,45,49,50,52,54,55]
range_str='40-50'
min, max = range_str.split("-").map{|num| num.to_i}
orig_arr.select{|x| (min..max) === x} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T19:55:30.543

假设你有一个字符串`'40-50`'

然后你会得到你的范围的数字

```
'40-50'.split('-').map(&:to_i) #=> [40,50] 
```

一种方法是使用交集：

```
(40...50).to_a & [40,42,45,49,50,52,54,55] #=> [40,42,45,49] 
```

# ios - iOS 上的 AdMob：禁用应用内 AdMob 网页广告？

> ID：13276970
> 
> 赞同：0
> 
> 时间：2012-11-07T19:42:23.943
> 
> 标签：ios, admob, iad, ads

我正在使用 AdMob 的中介功能向我的 iPhone 应用程序投放 iAd 和 AdMob 广告。但是，我注意到一些 AdMob 广告真的很烦人......

一些 AdMob 广告直接在我的应用程序内打开网页，位于导航栏和标签栏之间，并且无法正确显示。它们没有像 iAd 那样完全模态化，而是侵入了我的应用程序空间（并且做错了）。

有没有办法挑选出这些 AdMob 广告并仅禁用那些试图在应用网页中打开的广告？我对打开 AppStore 或 Safari 的 AdMob 广告很好。

下面，您可以看到发生的事情之前和之后。

![前](../Images/eebb5b3db88c4a5e89b401a31c0125d7.png)

![后](../Images/f960193863075de8d3302a64d02ef7f4.png)

再一次，这很烦人，因为 iAd 工作得很好，并且表现如预期，模态地占据了整个屏幕。另一方面，AdMob 对其在我的视图层次结构中的位置做出了错误的假设。我可能可以重新设计我的层次结构以“使其工作”，但在我看来，当前的层次结构已经很理想，其他任何东西都会感觉被破解在一起。

如果我无法让 AdMob 正常运行，我的备用计划是简单地禁用 AdMob 广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:16:16.033

您是否正确设置了 BannerView 的 rootViewController？

这是我的一个视图控制器中的 viewDidLoad 方法的摘录...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create a view of the standard size at the bottom of the screen.
    // Available AdSize constants are explained in GADAdSize.h.
    _bannerView = [[DFPBannerView alloc] initWithAdSize:kGADAdSizeBanner];
    _bannerView.delegate = self;

    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    _bannerView.adUnitID = ADMOB_PUBLISHER_ID;

    // Let the runtime know which UIViewController to restore after taking
    // the user wherever the ad goes and add it to the view hierarchy.
    _bannerView.rootViewController = self;

    // SNIP
} 
```

# c# - private void listBox1_SelectedIndexChanged(object sender, EventArgs e) 的第一行总是出错

> ID：13276973
> 
> 赞同：0
> 
> 时间：2012-11-07T19:42:29.840
> 
> 标签：c#, winforms

我正在尝试删除列表框中的项目，但是当我按下按钮将其删除时，私有 void listBox1_SelectedIndexChanged(object sender, EventArgs e) 中的第一行代码出现错误。

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
  {
      textBox1.Text = listBox1.SelectedItem.ToString();   
  } 
```

这是错误对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:45:25.653

要么`textBox1`，`listBox1`要么`listBox1.SelectedItem`是`null`。

当异常出现时，使用屏幕底部的**本地人**和**观察选项卡来查看它是哪一个。**

# jquery - jquery.get() ajax 调用未被调用

> ID：13276975
> 
> 赞同：0
> 
> 时间：2012-11-07T19:42:39.753
> 
> 标签：jquery

我的代码有什么问题？它根本不打任何电话。我什至尝试将错误添加到 php 文件中，但什么也没发生，所以它显然没有调用它。是的，我已经多次检查了路径并且它是正确的。

该按钮确实有效，单击时它会将 h1 标签更改为绿色。

```
$(document).ready(function() {
        $("#search-button").click(function(event) {
            event.preventDefault();
            $("h1").css('background-color', 'green');
            var word = $("#searchbar").val();
            $.get("video/search_videos.php", {searchword:word},
                function(title) 
                {
                    $("h1").html(title);
                    $("h1").css("background-color", "red");
                },
                "json");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:26:23.570

传入的函数`$.get`是AJAX调用成功后的回调函数。这意味着只有当您的 ajax 调用成功时才会执行该函数。

但是，您可能无法进行 AjaxCall

尝试添加`ajaxError()`打印出错误。

```
 $("#log").ajaxError(function(event, jqXHR, ajaxSettings, exception) {
        alert(jqXHR.status);
        }); 
```

查看[文档](http://api.jquery.com/ajaxError/)以获取更多详细信息

# html - 输入宽度 100% 和边距/填充

> ID：13276976
> 
> 赞同：2
> 
> 时间：2012-11-07T19:42:40.063
> 
> 标签：html, css

如何使用具有 100% 宽度和边距/填充的输入？

当输入没有焦点时，宽度比父元素宽 2 像素，但在焦点上宽度是否正确？这个怎么解决？！：-/

# js文件

[http://jsfiddle.net/eHQSR/1/](http://jsfiddle.net/eHQSR/1/)

# 代码

```
input, textarea {
    width:100%;
    -moz-box-sizing:border-box;
    -ms-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}

input, textarea, button {
    display:inline-block;
    font-family:arial;
    margin:1px;
}

input, textarea {
    background-color:#FFFFFF;
    border:1px solid #297296;

    color:#333333;
    font-size:12px;
    padding:4px 4px;
}

input:focus, textarea:focus {
    border-color:#1a4c91;
    box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.07), 0 0 6px #7ab5d3;
    border-width:2px;
    margin:0px;
}

<div style="margin-top:20px; margin-left:20px">
    <div style="width:100px; background:red; float:left; margin:1px">
        <input type="text">
    </div>
    <div style="width:100px; background:red; float:left; margin:1px">
        <input type="text">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:54:03.883

这是因为您在输入上的边距，将它们与父元素隔开（不使用边框框时会更糟，但仍然会发生，因为边距不包括在宽度计算中）。

```
input, textarea, button {
    display:inline-block;
    font-family:arial;
    margin:1px;
} 
```

相反，您可以删除此内边距并在父级上放置 1px 的填充：http: [//jsfiddle.net/eHQSR/3/](http://jsfiddle.net/eHQSR/3/)

### 更新

正如我在下面的评论中所说， :focus 样式的额外边框首先会占用您的边距，这就是高度不变的原因。所以我把边距留在那里，从左边删除边距，然后在父级的左右添加填充。所以宽度现在应该是正确的，高度不会“改变”，因为它仍然会先进入上下边缘（但正如我所指出的，如果你让边框变大，它仍然会改变输入的高度） . 在某处指定高度，所有这些都会简单得多。

[http://jsfiddle.net/eHQSR/5/](http://jsfiddle.net/eHQSR/5/)

# ios - 如何使用静态其他单元格选择性地更改 UITableviewCell 外观

> ID：13276985
> 
> 赞同：0
> 
> 时间：2012-11-07T19:43:29.493
> 
> 标签：ios, uitableview, nsindexpath

我有充分的理由采用静态`UITableViewCell`设计，因为经过长时间的努力，我想出了我想要的表格格式。我`tableView`在故事板中设计了所有行。

现在，仅针对单行-在该行中添加复选标记-我找不到办法。我需要根据我的程序逻辑来做。

如果我实现 datasource 方法`cellForRowAtIndexPath`，我也需要为所有其他单元格做一些事情。在这样做的同时，我将清除我对其他单元格静态执行的所有格式。如果我返回`nil`所有其他单元格，它们将不会出现。

我试图用这段代码挑出这个特定的单元格，在我`UITableViewController`的`viewdidLoad:`

```
NSIndexPath* NotifyRow = [NSIndexPath indexPathForRow:0 inSection:0];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:NotifyRow];

if (MYCONDITION_IS_TRUE)
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
else
    cell.accessoryType = UITableViewCellAccessoryNone; 
```

但上面不起作用，因为我总是得到`cell=nil`. 由于它的内置机制，当它在情节提要中有表格设计时，它不会在`self.tableView`结构上共享它。我尝试在第一个语句中更改行和部分值，但所有单元格都是`nil`.

如何从静态设计中挑选出我要修改的这个单元格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:54:21.980

发布后不久，我意识到我的错误。我太早地调用 cellForRowAtIndexPath 来获取单元格 - 甚至在视图完全放置之前。

刚刚在我的 viewDidLoad 中的所有内容之上添加了一行，它就起作用了：

```
[self.tableView reloadData]; 
```

所以整体看起来像：

```
[self.tableView reloadData];
NSIndexPath* NotifyRow = [NSIndexPath indexPathForRow:0 inSection:0];
UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:NotifyRow];

if (MYCONDITION_IS_TRUE)
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
else
    cell.accessoryType = UITableViewCellAccessoryNone; 
```

# windows - 如何在使用 perl 打开浏览器之前完全关闭当前浏览器窗口

> ID：13276988
> 
> 赞同：-1
> 
> 时间：2012-11-07T19:43:43.397
> 
> 标签：windows, perl

这里@links 数组由各种 URL 组成。根据下面的代码，首先在 Firefox 中打开 www.google.com。然后在进入 forloop 时，firefox 被杀死；@links 数组中的第一个 URL 被打开。第二个 URL 在第二次进入 forloop 时在新选项卡中打开，之后浏览器被杀死。但是我每次进入forloop时都需要先杀死firefox，然后应该在新的浏览器窗口中打开URL。请帮助。

```
system("start https://www.google.com");

for($i=0;$i<@links;$i++)
{
    system("taskkill /im firefox.exe");
    system("start $links[$i]");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:12:53.250

请改用[WWW::Mechanize::Firefox](http://search.cpan.org/perldoc?WWW%3a%3aMechanize%3a%3aFirefox)。

[MozRepl::RemoteObject](http://search.cpan.org/perldoc?MozRepl%3a%3aRemoteObject)提供更低级别的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:51:39.163

尝试这样做：

```
system("start https://www.google.com");

foreach my $link (@links) {
    system("taskkill /im firefox.exe");
    system("start $link");
} 
```

这是错误的：

```
for($i=0;$i<@links;$i++) 
```

如果您想像这样*迭代*，请使用：

```
for ($i=0; $i<$#links; $i++) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:02:29.700

`taskkill`向一个或多个进程发送信号并立即返回。发出信号的进程实际关闭可能需要几毫秒，因此请给您的进程一些时间来响应终止信号：

```
system("taskkill /im firefox.exe");
sleep 1;
system("start $links[$i]"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T20:48:59.887

尝试在命令上使用 open 来获取（然后杀死）pid。

如果你喜欢 for 循环，就把它扔在那里......

```
for(0..$#links) {
    my $item = $links[$_];
} 
```

正如它所说，你应该使用 WWW::Mechanize::Firefox

# objective-c - 使用 UIPinchGestureRecognizer 调整 UIImageView 大小

> ID：13276989
> 
> 赞同：0
> 
> 时间：2012-11-07T19:43:48.010
> 
> 标签：objective-c, ios, uiimageview, uigesturerecognizer

我正在尝试使用 a`UIPinchGestureRecognizer`来调整 a 的大小`UIImageView`。应用一个简单的`CGAffineTransform`作品，但它根据左上角调整它的大小，而我想根据图像的中心调整它的大小。我可以使用以下代码达到预期的结果

```
-(IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer
{
UIImageView *view = [recognizer view];
float scale = recognizer.scale;
view.bounds = CGRectMake(0,  0, view.bounds.size.height*scale, view.bounds.size.width*scale);
recognizer.scale = 1;
} 
```

问题是，当我使用此代码时，图像在调整大小时会出现故障和断断续续。知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T00:27:16.630

你可能会很难做到这一点。建议您考虑将您添加`UIImageView`到 a`UIScrollView`中，并让滚动视图为您完成工作。例如：

标题`UIScrollViewDelegate`：

```
#import <UIKit/UIKit.h>

@interface MyScrollViewController : UIViewController <UIScrollViewDelegate>

@end 
```

显示允许缩放的滚动视图设置的实现：

```
#import "MyScrollViewController.h"

#define MIN_ZOOM_FACTOR 1
#define MAX_ZOOM_FACTOR 5

@interface MyScrollViewController () {
    UIScrollView *scrollView;
    UIImageView *imageView;
}

@end

@implementation MyScrollViewController

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];

    scrollView = [[UIScrollView alloc] initWithFrame:self.view.frame];
    scrollView.backgroundColor = [UIColor clearColor];
    scrollView.delegate = self;
    scrollView.contentSize = CGSizeMake(self.view.bounds.size.width * MAX_ZOOM_FACTOR,
                                    self.view.bounds.size.height * MAX_ZOOM_FACTOR);
    scrollView.minimumZoomScale = MIN_ZOOM_FACTOR;
    scrollView.maximumZoomScale = MAX_ZOOM_FACTOR;

    imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"your_image_name.png"]];
    imageView.frame = scrollView.frame;
    imageView.contentMode = UIViewContentModeScaleAspectFit;

    [scrollView addSubview:imageView];
}

#pragma mark - Scroll view delegate methods

-(UIView *) viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return imageView;
}

@end 
```

如果您想知道何时发生平移和缩放、缩放比例是多少等，请实现其他`UIScrollViewDelegate`方法。例如：

```
-(void)scrollViewDidZoom:(UIScrollView *)zoomedScrollingView{
    float zoomScale = scrollView.zoomScale;
    // Do something with zoomScale...
} 
```

# c# - RegExp 自然排序问题

> ID：13276990
> 
> 赞同：1
> 
> 时间：2012-11-07T19:43:50.527
> 
> 标签：c#, regex, sorting

我正在开发一个需要显示自然排序的不同信息列的应用程序。不久前，我发现[这篇](http://www.codeproject.com/Articles/22517/Natural-Sort-Comparer)文章有很好的描述和代码。我对其进行了一些修改，因为我们的列也显示日期并最终得到以下结果：

```
public class NaturalComparer : Comparer<string>, IDisposable
{
    private Dictionary<string, string[]> table;

    public NaturalComparer()
    {
        table = new Dictionary<string, string[]>();
    }

    public void Dispose()
    {
        table.Clear();
        table = null;
    }

    public override int Compare(string x, string y)
    {
        if (x == y)
        {
            return 0;
        }

            DateTime xValueD, yValueD;
            if (DateTime.TryParse(x, out xValueD) && DateTime.TryParse(y, out yValueD))
                return xValueD.CompareTo(yValueD);

        string[] x1, y1;
        if (!table.TryGetValue(x, out x1))
        {
            x1 = Regex.Split(x.Replace(" ", ""), "([0-9]+)");
            table.Add(x, x1);
        }
        if (!table.TryGetValue(y, out y1))
        {
            y1 = Regex.Split(y.Replace(" ", ""), "([0-9]+)");
            table.Add(y, y1);
        }

        for (int i = 0; i < x1.Length && i < y1.Length; i++)
        {
            if (x1[i] != y1[i])
            {
                return PartCompare(x1[i], y1[i]);
            }
        }
        if (y1.Length > x1.Length)
        {
            return 1;
        }
        else if (x1.Length > y1.Length)
        {
            return -1;
        }
        else
        {
            return 0;
        }
    }

    private static int PartCompare(string left, string right)
    {
        int x, y;
        if (!int.TryParse(left, out x))
        {
            return left.CompareTo(right);
        }

        if (!int.TryParse(right, out y))
        {
            return left.CompareTo(right);
        }

        return x.CompareTo(y);
    }
} 
```

现在它还需要处理一种特殊类型的字符串数据，它没有做我们需要的事情。字符串显示数据范围的信息，它们看起来像这样：

```
string[] list = { "Empty Values","x<0" , "1000.0 < x <=1500.0", "900.0 < x <= 1000.0","3000.0 < x <= 3500.0", "800.0 < x <=900.0" }; 
```

排序后应如下所示：

```
x < 0
800.0 < x <= 900.0
900.0 < x <= 1000.0
1000.0 < x <= 1500.0
3000.0 < x <= 3500.0
Empty Values 
```

然而，它最终是：

```
800.0 < x <= 900.0
900.0 < x <= 1000.0
1000.0 < x <= 1500.0
3000.0 < x <= 3500.0
Empty Values
x < 0 
```

所以，从逻辑上讲，我认为它正在做它设计要做的事情，因为它会根据字母进行排序。我想继续用正则表达式搜索它，因为它很快。但是，我不知道如何设置它们以便正确搜索和排序。任何想法、帮助、阅读或代码将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:45:25.290

使用正则表达式模式

```
^\D*(\d+(?:\.\d*)?) 
```

并且匹配的组 #1 应该是您在第一点用于比较字符串的数字。

如果没有找到数字（不匹配），或者找到相同的数字，将字符串作为文本进行比较...

# r - 合并来自 2 个文件的相同列号

> ID：13276998
> 
> 赞同：1
> 
> 时间：2012-11-07T19:44:12.343
> 
> 标签：r, awk

我有两个大文件。每个文件有 1000 列和 2000 行。我想使用循环（R或linux）合并它们，以便相同的列号聚集在一起：

文件一：

```
[,1] [,2] ... [,1000]
1    3
1    3
1    4
1    3
1    5 
```

文件 b：

```
[,1] [,2] .... [,1000]
2    7
2    8
2    9
2    10
2    11 
```

合并后：

```
[,1] [,1] [,2][,2] .... [,1000][,1000]
1  2  3  7
1  2  3  8
1  2  4  9
1  2  3  10
1  2  5  11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:50:49.870

好的，这是在 Gavin 的帮助下使用循环的另一种方法

```
result<-matrix(0,nrow=5,ncol=2000)
t<-0
for (i in 1:(1000)){
  t<-t+1
  result[,(2*t-1)]<-a[,t]
  result[,(2*t)]<-b[,t]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:56:24.293

一般的解决方案是`cbind()`。考虑：

```
a <- matrix(c(rep(1, 5),
              3,3,4,3,5), ncol = 2)
b <- matrix(c(rep(2, 5),
              7:11), ncol = 2)

cbind(a, b) 
```

这使。

```
> cbind(a, b)
     [,1] [,2] [,3] [,4]
[1,]    1    3    2    7
[2,]    1    3    2    8
[3,]    1    4    2    9
[4,]    1    3    2   10
[5,]    1    5    2   11 
```

您显示的对象是/看起来像矩阵，但您可以使用数据框执行相同的操作。

根据您的示例，在您想要交错列的特殊情况下，子集可能很有​​用

```
ind <- c(rbind(seq_len(ncol(a)), seq_len(ncol(b)) + ncol(a)))
cbind(a, b)[, ind]

> ind <- c(rbind(seq_len(ncol(a)), seq_len(ncol(b)) + ncol(a)))
> cbind(a, b)[, ind]
     [,1] [,2] [,3] [,4]
[1,]    1    2    3    7
[2,]    1    2    3    8
[3,]    1    2    4    9
[4,]    1    2    3   10
[5,]    1    2    5   11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:55:57.560

`awk`这是一个使用and的快速而肮脏的实现`paste`：

```
#!/bin/bash

infile_a=a
infile_b=b
output_file=outfile
temp_a=tempa
temp_b=tempb
temp_out=tempout

if [[ -e $output_file ]]; then
    rm $output_file
fi

touch $output_file

total_col=1000
cur_col=1

while [[ $cur_col -le $total_col ]]
do
    awk -v col=$cur_col '{print $(col)}' $infile_a > $temp_a
    awk -v col=$cur_col '{print $(col)}' $infile_b > $temp_b
    paste $output_file $temp_a $temp_b > $temp_out
    mv $temp_out $output_file
    cur_col=$((cur_col+1))
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T20:46:14.647

paste 和 awk 的另一种快速而肮脏的替代方法：

`paste a b|awk 'BEGIN{cols=1000;} {line = ""; for(i=1; i<=cols; ++i) {line = line $i FS $(i + cols) FS;} print line;}'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T21:22:29.833

```
awk '
  {
    getline line < "fileb"
    split(line, ary)
    for (i=1; i<=NF; i++) {
        printf("%s%s%s%s", $i, OFS, ary[i], OFS)
    }
    print ""
  }
' filea 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-07T21:26:57.873

这在 awk 中非常简单，无需指定限制或创建临时文件或....：

```
$ awk 'NR==FNR{a[NR]=$0;next} {split(a[FNR],b); for (i in b) $i=b[i]" "$i}1' file1 file2
[,1] [,1] [,2] [,2] ... .... [,1000] [,1000]
1 2 3 7
1 2 3 8
1 2 4 9
1 2 3 10
1 2 5 11 
```

# xml - RELAX NG Compact Syntax 正则表达式支持？

> ID：13276999
> 
> 赞同：3
> 
> 时间：2012-11-07T19:44:15.293
> 
> 标签：xml, regex, relaxng

是否可以以定义`text`正则表达式的方式在 RELAX NG Compact Syntax 中定义模式，或者，甚至可能是仅具有“或”和字符类/排序操作的正则语法的更简单变体？

本质上，我想将一个属性声明为仅允许与此 regexp: 匹配的值`0x[0-9A-Fa-f]{6}`。我可以将其限制为`minLength`and `maxLength`，但我不确定是否可以为字符定义规则。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T21:27:53.420

[http://books.xmlschemata.org/relaxng/relax-CHP-9.html](http://books.xmlschemata.org/relaxng/relax-CHP-9.html)描述了 RELAX NG 中的正则表达式支持。

可以在[https://github.com/citation-style-language/schema/blob/master/csl.rnc](https://github.com/citation-style-language/schema/blob/master/csl.rnc)中找到一个紧凑语法的示例：

```
element cs:issn { issn }
issn = xsd:string { pattern = "\d{4}\-\d{3}(\d|x|X)" } 
```