# StackOverflow 问答 15919000-15919999

# c - 访问指针元素时出现分段错误

> ID：15919001
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:56:42.163
> 
> 标签：c, pointers

```
#include <stdio.h>
#include <stdlib.h>
#include "frac_heap.h"

#define ARRAYSIZE 10
#define ENDOFARRAY 999

fraction heap[ARRAYSIZE] = {0};
block freeBlocks[ARRAYSIZE] = {0};
int startingBlock = 0;
int nextFree = 0;
fraction* fracPointers[][ARRAYSIZE] = {0};
block* blockPointers[][ARRAYSIZE] = {0};

void init_Heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){    
        block *currBlock = &freeBlocks[x];
        currBlock->isFree = 1;  
        fraction *fractionPointer = &heap[x];
        if(x<ARRAYSIZE - 1){
            fractionPointer->denominator = x+1;
        }
        else if(x == ARRAYSIZE - 1){
            fractionPointer->denominator = ENDOFARRAY;
        }
    }
}

void dump_heap(){
    int x;
    for(x = 0; x < ARRAYSIZE; x ++){
        fraction* tempFrac = &heap[x];
        printf("%d\t%d\t%d\n",tempFrac->sign, tempFrac->numerator, tempFrac->denominator);
    }   
}

fraction* new_frac(){

    fraction* testFraction = &heap[0];
    if(testFraction->numerator == 0 && testFraction ->denominator==0){
        printf("Before return");        
        return testFraction;
    }
}

int main(){

    init_Heap();
    dump_heap();
    fraction *p1;
    p1 = new_frac();
    p1->sign = -1;
    p1->numerator  = 2;
    p1->denominator = 3;
    dump_heap();
   } 
```

尝试调用 new_frac() 时出现分段错误。此时我只是测试代码，我意识到 testfraction 不会总是 = &heap[0];。但是，我认为我能够访问我用'->'指向的部分结构？

在对其进行更多编辑之后，它似乎只有在达到 testFraction->denominator 时才会出现段错误。如果我只检查分母，它仍然会出现段错误，但它只适用于分子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T06:59:27.390

问题是并非所有通过的代码路径`new_frac()`实际上都返回一个值。然后，您继续通过这个可能未初始化的指针进行分配：

```
p1 = new_frac();
p1->sign = -1;
p1->numerator  = 2;
p1->denominator = 3; 
```

# jar - 玩！：使用与本地存储库不同版本的 jar

> ID：15919007
> 
> 赞同：1
> 
> 时间：2013-04-10T06:57:19.717
> 
> 标签：jar, playframework, classloader

玩！框架带有大量的 jar 库。我正在为我的 Play 使用 1.7 版的 apache commons-codec！应用。但是玩！已经随版本 1.4 和其他一些旧版本一起提供。我已将我的 commons-codec-1.7.jar 放在 lib 文件夹中，并“eclipsified”，因此 jar 文件位于类路径中。但是当我在 Eclipse 中展开 Project Explorer 时，我看到应用程序同时引用了 1.7 和 1.4 版本。我的问题是

1.  如何从引用中删除 1.4 版？
2.  即使 [PLAY_HOME]/repository/local 中存在版本 1.3 和 1.2，为什么应用程序选择版本 1.4
3.  这是一个合作项目。我想确保一旦我在 git 中推送代码并且我的同事拉取它，他们不需要做同样的“hack”，只需“clean”和“compile”。如何做呢？

顺便说一句，我正在使用 Play！2.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:11:55.023

添加`commons-codec`到你的`Build.scala`，你会没事的。依赖关系将是正确的，因为指定的依赖关系将覆盖默认依赖关系。

```
val appDependencies = Seq(
  "commons-codec" % "commons-codec" % "1.7"
) 
```

1.  您不必*删除*1.4 版。1.7 版现在将生效。
2.  这是由它们在类路径中呈现的顺序引起的。
3.  `play compile`会做的。你将不得不再次使项目黯然失色。

不要忘记`commons-codec`从`lib`文件夹中删除。如前所述，它将自动下载并放入类路径中。

# jquery - JQuery 检查 DIV 内容的变化

> ID：15919008
> 
> 赞同：2
> 
> 时间：2013-04-10T06:57:21.083
> 
> 标签：jquery, html

我想检查一个 DIV 内容，当 div 的内容发生变化时，我会发现是否存在表单字段。我正在尝试使用此代码，但没有响应：

```
$.fn.exists = function(){return this.length>0;}
$("div.provider_name").live("change",function(){
    if ($('input[id=checkout_provider_checkout_moneyorder]').exists)
    {
        alert('Input field exist');
    }
}); 
```

输入字段动态显示，这就是为什么我要检查这个特定字段是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:01:14.340

更改事件并非在所有元素上都可用 - 因此即使 a 的内容也不会触发`div`元素的内容发生更改，它也不会触发。

更改事件在表单元素上可用。

看起来您需要确定特定表单元素何时可用，您可以使用间隔进行检查：

```
var checkForInputTimer;
var checkForInput = function () {
    if ($("#checkout_provider_checkout_moneyorder").length > 0) {
        window.clearInterval(checkForInputTimer);
        alert("Do your processing here");
    }
};

checkForInputTimer = window.setInterval(checkForInput, 2000); 
```

在这个例子中，我只是通过 id 检查元素，这是最有效的搜索，因为 id 必须是唯一的。

您也可以创建自定义事件，但您必须记住在用于更新`div`元素的任何代码中触发事件。我为此创建了一个[JS Fiddle](http://jsfiddle.net/dbGYn/)：

```
$('div.provider_name').bind('contentChanged', function(event, data) {
    if ($('#checkout_provider_checkout_moneyorder').length > 0) {
        alert('Do your processing here');
    }
}); 
```

无论您在哪里更新`div`，都会触发此事件：

```
$('div.provider_name').html('<input type="text" name="example" id="checkout_provider_checkout_moneyorder" value="example">')
    .triggerHandler('contentChanged'); 
```

# java - 无法通过eclipse部署到google app engine

> ID：15919016
> 
> 赞同：1
> 
> 时间：2013-04-10T06:58:15.927
> 
> 标签：java, google-app-engine

我正在关注

[https://developers.google.com/appengine/docs/java/gettingstarted/uploading](https://developers.google.com/appengine/docs/java/gettingstarted/uploading)

本教程。

我已经创建了教程中提到的应用程序。但是当我尝试部署时出现以下错误

“无法登录。请确保您输入了正确的验证码。”

在错误日志中，我得到以下信息。

"

```
java.net.SocketTimeoutException: connect timed out
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:564)
at sun.net.NetworkClient.doConnect(NetworkClient.java:158)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:395)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:272)
at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:329)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:180)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:925)
at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:158)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1014)
at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)
at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:991)
at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:299)
at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest.execute(GoogleAuthorizationCodeTokenRequest.java:147)
at com.google.gdt.eclipse.login.GoogleLogin.logIn(GoogleLogin.java:378)
at com.google.appengine.eclipse.core.deploy.ui.DeployProjectHandler.execute(DeployProjectHandler.java:52)
at com.google.appengine.eclipse.core.deploy.ui.DeployProjectAction.run(DeployProjectAction.java:27)
at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4066)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3657)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:574)
at org.eclipse.equinox.launcher.Main.run(Main.java:1407)" 
```

我尝试在eclipse中修改网络设置但仍然无法部署..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T03:59:33.320

如果您使用的是公司网络，那么您可能已经设置了代理参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T18:49:03.727

我遇到了类似的问题——我可以通过 Eclipse 登录 Google，但仍然遇到 SocketTimeout 问题。重启 Eclipse 解决了这个问题。

# c# - LINQ to Entity 连接查询

> ID：15919017
> 
> 赞同：0
> 
> 时间：2013-04-10T06:58:19.033
> 
> 标签：c#, linq-to-entities

我有以下设置：

`ShoeAreas`具有列`ShoeId`和的表`MaterialId`。`Shoes`具有列`ID`和的表`Status`。

我有一个接受一个参数的方法 -`materialId`目标是确定是否有一个记录`ShoeAreas`等于`MaterialId`传递的一个参数。如果存在这样的记录（或最有可能的记录），如果它们与来自`Shoes with`Status` = Production 的鞋子相关。

我试过这个：

```
 return shoeService.All().
                Join(shoeAreaService.All(),
                s => s.ID,
                sa => sa.ShoeId,
                (s, sa) => (sa.MaterialId == matId)).
                Any(s => (s.Status == (byte)EntityStatusProd.Production))); 
```

`Any..`但是我在说这行时遇到错误，`} expected`这也是我编写的第二个 Linq to Entity 查询，所以我怀疑它是语法问题还是查询本身是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:04:41.043

您正在`IEnumerable<bool>`从`Join`方法返回（条件值`sa.MaterialId == matId`）。创建将包含两个连接实体的匿名类型：

```
 return shoeService.All()
           .Join(shoeAreaService.All(),
                 s => s.ID,
                 sa => sa.ShoeId,
                 (s, sa) => new { s, sa }) // here
           .Any(x => (x.sa.MaterialId == matId) && 
                     (x.s.Status == (byte)EntityStatusProd.Production))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:06:15.777

你可以试试这个：（linq）

```
from shoe in Shoes 
join shoeArea in ShoesArea on shoe.ID equals shoeArea.ShoeID
where shoeArea.MeterialID == matID && shoe.Status == (byte)EntityStatusProd.Production
select new {shoe.ID,shoe.Status}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:09:21.080

```
 return shoeService.All().Any(s => shoeAreaService.All()
                                .Any(sa => sa.MaterialId == matId 
                                        && s.Id == sa.ShoeId)
                          && s.Status == (byte)EntityStatusProd.Production); 
```

# java - 打开 java swing 应用程序后退出命令提示符

> ID：15919020
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:58:34.017
> 
> 标签：java, swing, command

我正在从命令程序调用 java swing 程序，执行 java 程序后控制台保持打开状态。我的 bat 文件包含：

```
set Gantt_Generator_v5.0="C:\Program Files\GANTT_GENERATOR_V5.0"
java -jar %Gantt_Generator_v5.0%\GANTT_GENERATOR_V5.0.jar "C:\Program Files\GANTT_GENERATOR_V5.0\test\Parameter_File.csv" FALSE
exit 
```

当我关闭命令提示符时，java 应用程序退出。

**尝试过的选项：**将扩展名从**.bat**更改为**.cmd**但对我不起作用。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:28:22.613

使用“ **START JAVAW...** ”所以最终的脚本是：

```
set Gantt_Generator_v5.0="C:\Program Files (x86)\GANTT_GENERATOR_V5.0" 
start javaw -jar %Gantt_Generator_v5.0%\GANTT_GENERATOR_V5.0.jar "C:\Program Files (x86)\GANTT_GENERATOR_V5.0\test\Parameter_File.csv" FALSE 
```

# dynamics-crm-2011 - MS Dynamics：实体名称列表和字段列表

> ID：15919021
> 
> 赞同：-1
> 
> 时间：2013-04-10T06:58:37.390
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在使用 C#.net 中的 msdynamics 连接器。在连接器中，我想检索实体对象名称的列表，即潜在客户、联系人等。我还想检索相应的字段列表。我正在使用 Vs2010 并使用 Passport 登录.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:49:16.243

我相信您正在寻找[RetrieveAllEntitiesRequest](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.messages.retrieveallentitiesrequest.aspx)，它返回所有实体（逻辑名称、属性等）的元数据。

# c# - 对 WCF 的跨域 AJAX 请求

> ID：15919027
> 
> 赞同：0
> 
> 时间：2013-04-10T06:58:47.533
> 
> 标签：c#, jquery, ajax, wcf, cross-domain

我有一个硬 Microsoft Visual Studio 2008，我想从您的 Web 服务到 WCF 服务进行跨域查询，但它不起作用。

网页上的 Ajax 代码：

```
$.ajax (
    url: "http:/сите.com/ApplicationController.svc/HelloPost/"
    type: "POST",
    dataType: "json",
    contentType: "application/json",
    success: function (data) {
        alert (data);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert (jqXHR textStatus errorThrown);<br/>
    }
}); 
```

但我的 WCF 服务：

```
[OperationContract]
[WebInvoke (Method = "POST", UriTemplate = "HelloPost /", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
[JSONPBehavior (callback = "callback")]
String GetPostHello (Stream data);

public String GetPostHello (Stream data)
{
    HttpContext.Current.Response.AddHeader ("Access-Control-Allow-Origin", "*");

    if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
    {
        HttpContext.Current.Response.AddHeader ("Access-Control-Allow-Methods", "GET, POST");
        HttpContext.Current.Response.AddHeader ("Access-Control-Allow-Headers", "Content-Type, Accept");
        HttpContext.Current.Response.AddHeader ("Access-Control-Max-Age", "1728000");
        HttpContext.Current.Response.End ();
        return null;
    }
    return "Hello";
} 
```

当使用域的 GET 请求时，它可以工作，但尝试发出 POST 请求会返回此标头：

`Content-Type application/json Accept application/json, text/javascript, */*;q=0.01`

**求助，可能是什么问题！谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:05:32.483

对于支持 CORS 的浏览器跨域发出 POST 请求（这是您与*Access-Control*标头一起使用的），在请求之前，浏览器首先发送一个*预检*请求，这是一个 HTTP`OPTIONS`请求，询问服务器是否可以向其发送 POST 请求。[您可以添加另一个响应 OPTIONS 请求的操作，或者您可以实现对 WCF 的完整 CORS 支持 - 这不是太简单，但我已经在http://blogs.msdn.com/b/carlosfigueira/](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)上写过它[archive/2012/05/15/implementing-cors-support-in-wcf.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)以及完成这项工作所需的步骤。

# objective-c - NSArray 和 CCArray 的区别

> ID：15919045
> 
> 赞同：12
> 
> 时间：2013-04-10T06:59:38.213
> 
> 标签：objective-c, cocos2d-iphone, nsarray

NSArray 和 CCArray 有什么区别？此外，在什么情况下，在游戏编程方面，一种会比另一种更受欢迎？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-10T07:59:00.497

CCArray 模拟 NSMutableArray。它是一个 C 数组（内存缓冲区）的包装器。它是由 cocos2d 开发并在内部使用的，因为 NSMutableArray 被认为太慢了。然而，性能改进是微乎其微的。cocos2d 本身不使用的 CCArray 的任何用例（功能）仍然是潜在的问题来源，包括奇怪且难以调试的问题或糟糕的性能特征。

最重要的性能关键方面是顺序读取数组。在[我最近的测试](http://www.learn-cocos2d.com/2013/03/confirmed-arc-slow/)中，这是 CCArray（不再是？）擅长的领域。特别是快速枚举：NSMutableArray 大约快 33 倍！

CCArray 是一个完美的例子，为什么人们不应该重新发明轮子，特别是当涉及到存储类时，已经有一个稳定的、经过验证的、快速的解决方案可用 (NSMutableArray)。它曾经拥有的任何速度优势早已不复存在。剩下的是您不想处理的运行时行为，包括一些极差的性能特征（插入、快速枚举）。

长话短说：**不要在自己的代码中使用 CCArray！**将 CCArray 视为一个内部的私有类，不要在用户代码中使用（除非不可避免，即子数组）。

NSMutableArray 是每个人都应该使用的数组参考实现，因为它经过了非常好的测试、记录和稳定（在运行时行为和速度方面）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:10:14.043

核实....

[http://www.learn-cocos2d.com/2010/09/array-performance-comparison-carray-ccarray-nsarray-nsmutablearray/](http://www.learn-cocos2d.com/2010/09/array-performance-comparison-carray-ccarray-nsarray-nsmutablearray/)

希望这有助于
享受编程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:47:24.497

CCArray [http://www.cocos2d-x.org/embedded/cocos2d-x/d9/d2e/classcocos2d_1_1_c_c_array.html](http://www.cocos2d-x.org/embedded/cocos2d-x/d9/d2e/classcocos2d_1_1_c_c_array.html)

在 cocos2d-x 中，CCArray 是可变的，即你可以给它添加元素。要创建没有容量的 CCArray 实例，可以使用 CCArray::array() 构造函数。CCMutableArray 是基于模板的容器，可以存储相同类型的对象。CCArray 将对象存储为 CCObject 实例，因此您必须在从 CCArray 实例获取对象后强制转换它们

NSArray 类包含许多专门设计用于简化在 Objective-C 程序中创建和操作数组的方法。

# wso2 - 如何在 WSO2 ESB 中跨序列管理事务

> ID：15919051
> 
> 赞同：1
> 
> 时间：2013-04-10T06:59:53.330
> 
> 标签：wso2, wso2esb

我有 2 个`sequences in my ESB`，分别是“seqDeleteEntry”和“seqInsertEntry”。

序列“ `seqDeleteEntry`”将根据收到的输入从表中删除条目。
**代码片段：**

```
<sequence xmlns="http://ws.apache.org/ns/synapse">
   <property xmlns:ns="http://org.apache.synapse/xsd" name="propertyName" expression="//Id/text()" scope="default" type="STRING"/>
   <transaction action="new"/>
   <property name="SET_ROLLBACK_ONLY" value="true" scope="axis2"/>       
         <dbreport useTransaction="true">
            <connection>
               <pool>
                  <password>$pwd</password>
                  <user>$uname</user>
                  <url>connectionURL</url>
                  <driver>$driver</driver>
               </pool>
            </connection>
            <statement>
               <sql>
                  <![CDATA[ delete from tbl_name where column_name = ?]]>
               </sql>
               <parameter expression="$ctx:propertyName" type="VARCHAR"/>
            </statement>
          </dbreport>
          <sequence key="conf:/seqInsertEntry"/>
   </sequence> 
```

序列“ `seqInsertEntry`”将向表中插入条目。
**代码片段：**

```
<sequence xmlns="http://ws.apache.org/ns/synapse">     
             <dbreport useTransaction="true">
                <connection>
                   <pool>
                      <password>$pwd</password>
                      <user>$uname</user>
                      <url>connectionURL</url>
                      <driver>$driver</driver>
                   </pool>
                </connection>
                <statement>
                   <sql>
                      <![CDATA[ insert into tbl_name values('value1', 'value2')]]> 
                   </sql>
                </statement>
              </dbreport>
              <transaction action="commit"/>
              <send/>
       </sequence> 
```

**我的问题是：**当在第二个序列（）中插入条目
时出现错误（比如说） ，我需要以这样一种方式回滚事务，以使使用前一个序列（）删除的记录应该恢复。`Integrity Constraint Violation``seqInsertEntry``seqDeleteEntry`

我需要添加什么配置来实现上述示例中的事务管理？

**注意：**
我尝试设置以下属性，但没有帮助。

```
<transaction action="new"/>
<property name="SET_ROLLBACK_ONLY" value="true" scope="axis2"/> 
```

我在`DBReport`（在两个序列中）添加了以下属性，并在第二个序列（）结束时提交了事务，`seqInsertEntry`但它仍然没有帮助。

```
useTransaction="true" 
```

有人请澄清我错过了什么配置，或者我需要在上述序列中添加。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T11:21:01.593

Vijay，我的理解是事务不跨序列进行，除非在故障序列中（以及当错误同步引发时）。事务似乎附加到序列和客户端。

你是如何实现你的故障序列的？

如果我对跨序列交易有误，我将不胜感激知道如何实现这一点:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:37:41.307

请参考文档 [1] 和 [2]...

[1] [http://docs.wso2.org/wiki/display/ESB460/Transaction+Mediator+Example](http://docs.wso2.org/wiki/display/ESB460/Transaction+Mediator+Example)

[2] [http://docs.wso2.org/wiki/display/ESB460/Transactional+ESB](http://docs.wso2.org/wiki/display/ESB460/Transactional+ESB)

问候，

莫汉

# android-annotations - 使用 AndroidAnnotation 进行 ViewGroup 注入

> ID：15919056
> 
> 赞同：1
> 
> 时间：2013-04-10T07:00:11.790
> 
> 标签：android-annotations

我正在我的活动上实现一个 ActionBar。我正在尝试将其作为 AndroidAnotaions @EViewGroup 组件来执行，但由于某种原因，我在我的活动中看不到该组件。该项目编译得很好。

我的代码基本上如下所示

动作栏.xml

```
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_height="@dimen/action_bar_height"
  android:layout_width="match_parent"
  >

<ImageButton
  android:id="@+id/back"
  android:layout_height="wrap_content"
  android:layout_width="wrap_content"
  android:src="@drawable/back_button"
  />

<!-- Rest of the views omitted -->
</RelativeLayout> 
```

动作条.java

```
@EViewGroup( R.layout.actionbar )
public class ActionBar extends RelativeLayout {

private Context mContext;

public ActionBar( Context aContext, AttributeSet aAttributeSet ) {
  super( aContext );
  mContext = aContext;
}
// @Click listener methods omitted 
```

这就是我在另一个布局 XML 中使用它的方式

```
<jandy.android.ActionBar_
  android:id="@+id/actionbar"
  android:layout_width="match_parent"
  android:layout_height="@dimen/action_bar_height"
  /> 
```

根据 AA 文档，这就是所有需要的。但正如所说，没有什么是可见的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T21:59:53.343

我认为您需要实现具有不同参数的构造函数：

```
public CustomActionbarComponent(Context context) {
    super(context);
}

public CustomActionbarComponent(Context context, AttributeSet attrs) {
    super(context, attrs);  
}

public CustomActionbarComponent(Context context, AttributeSet attrs, int defStyle) {
    super(context);
} 
```

也许从 xml 创建的自定义视图使用另一个构造函数。这是您的代码和我的工作自定义操作栏的唯一区别。

希望能帮助到你！

# android - 如何使网格视图在android中水平滚动而不是垂直滚动？

> ID：15919060
> 
> 赞同：9
> 
> 时间：2013-04-10T07:00:17.173
> 
> 标签：android, grid, horizontal-scrolling

我有一个动态网格视图。表示其内容不同。因此，如果项目数量增加，则会进行垂直滚动。我想把它做成水平滚动。

请为此提出一些解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-21T14:28:50.637

```
 <HorizontalScrollView
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/seatLegendLayout">

        <FrameLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent">

            <LinearLayout
                android:id="@+id/linearLayout_gridtableLayout"
                android:layout_width="900dp"
                android:layout_height="match_parent"
                android:orientation="horizontal">

                <GridView
                    android:id="@+id/gridView1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="4dp"
                    android:columnWidth="100dp"
                    android:gravity="center"
                    android:numColumns="9"
                    android:horizontalSpacing="1dp"
                    android:scrollbarAlwaysDrawHorizontalTrack="true"
                    android:scrollbarAlwaysDrawVerticalTrack="true"
                    android:scrollbars="horizontal"
                    android:stretchMode="none"
                    android:verticalSpacing="1dp">

                </GridView>

            </LinearLayout>
        </FrameLayout>
    </HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-23T12:48:16.380

您可以使用第三方库[双向网格视图](https://github.com/jess-anders/two-way-gridview)。它非常适合水平滚动，或者您可以使用[RecyclerView](https://stackoverflow.com/questions/25047152/recyclerview-horizontal-two-row-grid-second-row-offset)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:11:22.757

您可以尝试将`GridView`. `HorizontalScrollView`您可以尝试将固定高度设置`GridView`为`HorizontalScrollView`.

然后您可以根据您的内容动态计算列数`GridView`并使用`setNumColumns(int)`方法来设置它。

# python - 良好的散列算法，接近原始文本输入，雪崩效应更小？

> ID：15919063
> 
> 赞同：1
> 
> 时间：2013-04-10T07:00:30.590
> 
> 标签：python, mysql, string-matching

我们需要在 MySQL 表中存储一个文本字段（比如 2000 个字符）及其唯一的哈希值（比如 SHA1）。为了测试该文本是否已经存在于 MySQL 表中，我们生成该文本的 SHA1，并查找它是否存在于唯一字段中`hash`。

现在让我们假设有两个文本：

1.  “这是将存储在数据库中的文本，并将生成其哈希”
2.  “这是文本，将存储在数据库中，并将生成其哈希值。”

**注意细微的差别。**

假设 1 已添加到数据库中，则检查 2 将不起作用，因为它们的 SHA1 哈希值将大不相同。

一种明显的解决方案是使用 Leveinstein 距离或 difflib 遍历所有已添加的文本字段，以从 MySQL 表中精确匹配。

但这不是以性能为导向的。是否有与文本内容相关的良好散列算法？即为非常相似的文本生成的两个散列本身将非常相似。

这样，在将它们添加到 MySQL 表中之前，检测可能的重复项会更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:05:30.683

听起来您正在寻找对位置敏感的散列。除了[Wikipedia 文章](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)之外，在此站点上运行搜索以获得一些指示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:03:19.210

我非常怀疑您正在寻找的任何东西是否存在，因此我提出了一个更简单的解决方案：

想出一个简单的算法来规范你的文本，例如：

*   规范化空格
*   删除标点符号

然后，计算其哈希值*并将*其存储在单独的列 ( `normalizedHash`) 中或将 ID 存储到规范化哈希表中。然后，您可以通过标准化内容比较这两个不同的条目。

# asp.net - 更新面板中的gridview pageindex

> ID：15919064
> 
> 赞同：1
> 
> 时间：2013-04-10T07:00:33.750
> 
> 标签：asp.net, gridview, indexing, updatepanel, page-index-changed

我在更新面板中有一个gridview，第一次点击页面索引正在改变，但后来点击页面索引没有改变。但是点击时会触发事件。这就是我绑定数据的方式。

```
protected void gvPurchaseDetails_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    gvPurchaseDetails.PageIndex = e.NewPageIndex;
    DetailsGridBind();
}

public void DetailsGridBind()
{

    DataSet dsInvoice = ObjDetail.GetPurchaseDetails();
    DataTable dtInvoice = dsInvoice.Tables[0];
    gvPurchaseDetails.DataSource = dtInvoice;
    gvPurchaseDetails.DataBind();     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:18:47.420

`EnableSortingAndPagingCallbacks="true"`为您设置`GridView`

默认情况下，其设置为`false`

同样在更新你的代码后面`UpdatePanel`

```
protected void gvPurchaseDetails_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    gvPurchaseDetails.PageIndex = e.NewPageIndex;
    DetailsGridBind();

    yourUpdatePanelId.Update();   // add this line of code was well
} 
```

# c# - 不安全的字符串指针语句

> ID：15919065
> 
> 赞同：9
> 
> 时间：2013-04-10T07:00:35.087
> 
> 标签：c#, .net, unsafe, fixed-statement

据我了解，根据[MSDN](http://msdn.microsoft.com/en-us/library/f58wzh21%28v=vs.71%29.aspx) C# 固定语句应该像这样工作：

```
fixed (char* p = str) ... // equivalent to p = &str[0] 
```

那么，为什么我不能这样做？

```
 const string str = "1234";
    fixed (char* c = &str[0])
    {
/// .....
    } 
```

例如，我如何获得指向`str[1]`的指针？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T07:17:58.873

由于获取指向后面元素的指针直接适用于数组，但不适用于字符串，似乎唯一的原因是 MS 没有实现它。很容易按照数组的语义来设计它。

但是您可以轻松计算另一个指向其他数组元素的指针。所以在实践中这不是一个大问题：

```
fixed (char* p = str)
{
   char* p1 = p+1;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T07:05:55.113

这是因为`[]`字符串上的操作符是一个返回值的方法。当原始值类型没有地址时，方法的返回值。

`[]`C#中的运算符与C中的运算符不同`[]`。在C中，数组和字符串只是指针，将`[]`运算符应用于指针，相当于移动指针并取消引用它。这在 C# 中不成立。

实际上，您链接的 MSDN 文档中有一个错误，该错误已在[最新版本中修复。](http://msdn.microsoft.com/en-us/library/f58wzh21.aspx)

有关此确切问题的更多说明，请参见[此处](https://stackoverflow.com/a/5081216/1174942)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:09:25.860

该`fixed`语句的重点是防止内存分配跨虚拟内存移动。内存分配由它的开始来标识，而不是由任何其他地址。

所以要保持`&str[1]`固定，你真的需要整体`str`固定；然后，您可以根据需要使用指针算法从固定指针派生单个分配中的其他指针`str`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:09:59.187

将您的代码更改为：

```
char[] strC = "1234".ToArray();
fixed (char* c = &strC[0])
{
    /// .....
} 
```

# jquery - Jquery关于方法

> ID：15919066
> 
> 赞同：0
> 
> 时间：2013-04-10T07:00:35.747
> 
> 标签：jquery, jquery-on

我是 jquery 的新手。我有一个名为“xxx”的类，其中添加了一组类名为“YYY”的按钮，并通过ajax调用更改每个按钮的id值。

例如

```
<div class="xxx">
</div> <!-- before ajax call -->

<div class="xxx">
<input type="button" class="YYY" id="1"/>
<input type="button" class="YYY" id="2"/>
<input type="button" class="YYY" id="3"/>
</div> 
```

现在我必须获取“on”单击按钮的 id 值。所以我用

```
$(document).ready(function{

$('.xxx').on('click','.yyy',function({
   var id = $(this).attr('id');
});

}); 
```

但这不起作用。即使我尝试过

```
$(document).ready(function{

$('.xxx').on('click','.yyy',function({
   var id = $('.yyy').attr('id');
});

}); 
```

这是在每次点击时返回第一个按钮的值。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:02:36.507

您需要使用`this`来引用单击的元素：

```
var id = this.id; 
```

您的`.ready()`and`.on()`函数中还有一些语法错误，正确的语法是：

```
$(document).ready(function() {
  $('.xxx').on('click', '.yyy', function() {
    var id = this.id;
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:05:16.043

您的脚本中有一些拼写错误：

```
$(document).ready(function{ //<----misssing '()'

$('.xxx').on('click','.yyy',function({ //<---missing ')' after function 
```

您已经在选择器的上下文中，然后使用`this.id`or `$(this).attr('id')`：

```
$('.xxx').on('click','.yyy',function(){
   var id = $(this).attr('id'); // <---here $(this) is the clicked elem
}); 
```

或者

```
$('.xxx').on('click','.yyy',function(){
   var id = this.id; // <---here 'this' is the clicked elem
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:06:08.343

您在点击功能中有拼写错误

```
$('.xxx').on('click','.yyy',function({
                          ----------^

$('.xxx').on('click','.yyy',function(){ // it should be (){}
   var id = this.id;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:04:37.640

你有一个错误`document.ready`。`()`您在功能和点击事件中错过了括号......

尝试这个;

```
 $(document).ready(function(){
                      //---^^ ---here

 $('.xxx').on('click','.yyy',function(){
                           //--------^^---here 
```

所以应该是

```
$(document).ready(function(){
$('.xxx').on('click','.yyy',function(){
   var id = $(this).attr('id');
});
}); 
```

休息你的第一个代码应该可以工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T07:26:59.673

尝试这个 ：：

```
$(document).ready(function() {
    $(".xxx").on("click", ".YYY", function(event){
        var id = $(this).attr('id');
    });
}); 
```

您使用错误的语法来获取元素的 ID 属性。

# mysql - MySQL - where 子句中的 rank 函数

> ID：15919067
> 
> 赞同：1
> 
> 时间：2013-04-10T07:00:42.527
> 
> 标签：mysql, sql, rank

我想在我的 MySQL 查询中使用 rank 函数。我[在 MySQL 中使用了 Rank 函数的建议](https://stackoverflow.com/questions/3333665/mysql-rank-function)

我只想选择排名最高的一行。我的查询看起来像：

```
SELECT c1, c2, c3, @curRank := @curRank + 1 AS rank 
FROM tab1 t, (SELECT @curRank := 0) r 
WHERE t.c5 = 'asd' AND t.c6 = 'qwe' AND rank = 1 
ORDER BY t.c8 DESC 
```

我收到以下错误：

```
ERROR 1054 (42S22): Unknown column 'rank' in 'where clause' 
```

我究竟做错了什么？如何修复我的查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:03:27.590

您不能使用与子句`ALIAS`在同一级别上生成的`WHERE`，您可以用子查询包装它。例如，

```
SELECT *
FROM
(
   SELECT c1, c2, c3, @curRank := @curRank + 1 AS rank
   FROM tab1 t, (SELECT @curRank := 0) r 
   WHERE t.c5 = 'asd' AND t.c6 = 'qwe' 
   ORDER BY t.c8 DESC
) a
WHERE rank = 1 
```

SQL 操作顺序如下：

*   FROM 子句
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

`ALIAS`是在子句上创建的，因此`SELECT`它还不能在`WHERE`子句上访问。

# php - 如何摆脱 LEFT JOIN SQL 查询中的重复值

> ID：15919076
> 
> 赞同：1
> 
> 时间：2013-04-10T07:00:54.953
> 
> 标签：php, mysql, sql, left-join

我有一个评论表，其中包含具有以下字段的父子评论

```
comments
    comment_id
    parent_id
    thread_id (Foreign Key)
    title
    body
    comment_date
    user_name 
```

我想整理这种形式的评论，首先出现父评论，然后是子评论，然后是下一个父评论，然后是子评论

我正在使用以下查询

```
SELECT c1 . * , c2 . * 
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
AND c1.thread_id =122 
```

它给出以下输出 ![在此处输入图像描述](https://i.stack.imgur.com/xkPy6.jpg)

可以看到第一个表中有很多重复的行

我想要以下输出

![在此处输入图像描述](https://i.stack.imgur.com/j0Mkw.jpg)

你可以看到，在这个输出中，首先是父评论（在 parent_id 中有 NULL），然后是它的子评论，然后是下一个父评论，然后是它的子评论。

我怎样才能形成我的 SQL 查询来获得这个输出。注意：（第二张图不是任何查询的结果，我已经修改了它只是为了澄清我的观点并告诉你我想要什么样的输出。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:08:44.713

没有一行是重复的，只是`c1`评论被反复选择，因为它表面上是许多`c2`评论的父级。听起来您实际上想要两个*单独的*查询。

```
SELECT * FROM comments WHERE parent_id IS NULL AND thread_id = 122
UNION
SELECT c2.* FROM comments c1 JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL AND c1.thread_id =122 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:53:23.010

```
SELECT c1 . * , c2 . * 
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c2.parent_id IS NOT NULL 
AND c1.thread_id = 122 
```

I created table and tested with the above query ,it works fine for me.If the above doesn't work fine for you,then please export the comment table and post here .I'll send the exact query.

Once again ,if it is in cakephp, then use 'threaded' in the find query ,which always works fine for parent-child type table structure in database.

Waiting for the response...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:17:39.540

```
SELECT c1 . *
FROM comments c1
RIGHT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
AND c1.thread_id =122 
```

# c# - 使用 Visual Studio 打开 UHF RFID DevKit 的项目文件

> ID：15919081
> 
> 赞同：0
> 
> 时间：2013-04-10T07:01:10.387
> 
> 标签：c#

我目前在我的 Win7 Pro x64 计算机上安装了 VS2010。然后下载了我要修改的设备的SDK的源代码，我用VS2010打开它，转换后，它显示了ff。错误信息：

> 无法打开项目文件“C:\Users\Vostro 2420\Documents\AMS Files\DL730&DL770_en_V3.5\DL730&DL770_RFID DevKit\DL770\DL770WinCE\DL770WinCE\DL770WinCE.csproj”。此安装不支持项目类型。

在这里找了一些解决方案和其他一些网站，好像VS2010不支持移动开发，所以我安装了XP Mode，在那里安装了Visual C#2005。但无济于事，仍然无法正常工作。它仍然给出相同的“无法加载项目文件”错误。

这是 MS VS 解决方案文件的内容：

```
Microsoft Visual Studio Solution File, Format Version 9.00
# Visual Studio 2005
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "DL770WinCE",       "DL770WinCE\DL770WinCE.csproj", "{E07A0382-8B93-46A3-B389-C6D2C93CD4B8}"
EndProject
Global
        GlobalSection(SolutionConfigurationPlatforms) = preSolution
            Debug|Any CPU = Debug|Any CPU
            Release|Any CPU = Release|Any CPU
        EndGlobalSection
        GlobalSection(ProjectConfigurationPlatforms) = postSolution
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Debug|Any CPU.Build.0 = Debug|Any CPU
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Debug|Any CPU.Deploy.0 = Debug|Any       CPU
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Release|Any CPU.ActiveCfg = Release|Any CPU
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Release|Any CPU.Build.0 = Release|Any CPU
            {E07A0382-8B93-46A3-B389-C6D2C93CD4B8}.Release|Any CPU.Deploy.0 = Release|Any CPU
        EndGlobalSection
        GlobalSection(SolutionProperties) = preSolution
            HideSolutionNode = FALSE
        EndGlobalSection
EndGlobal 
```

以下是在记事本中打开的 Visual C# 项目文件的内容：

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
        <ProductVersion>8.0.50727</ProductVersion>
        <SchemaVersion>2.0</SchemaVersion>
        <ProjectGuid>{E07A0382-8B93-46A3-B389-C6D2C93CD4B8}</ProjectGuid>
        <OutputType>WinExe</OutputType>
        <AppDesignerFolder>Properties</AppDesignerFolder>
        <RootNamespace>DL770WinCE</RootNamespace>
        <AssemblyName>DL770WinCE</AssemblyName>
        <ProjectTypeGuids>{4D628B5B-2FBC-4AA6-8C16-197242AEB884};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
        <PlatformFamilyName>WindowsCE</PlatformFamilyName>
        <PlatformID>E2BECB1F-8C8C-41ba-B736-9BE7D946A398</PlatformID>
        <OSVersion>5.0</OSVersion>
        <DeployDirSuffix>DL770WinCE</DeployDirSuffix>
        <TargetFrameworkVersion>v2.0</TargetFrameworkVersion>
        <FormFactorID>
        </FormFactorID>
    </PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE;$(PlatformFamilyName)</DefineConstants>
    <NoStdLib>true</NoStdLib>
    <NoConfig>true</NoConfig>
    <ErrorReport>prompt</ErrorReport>
    <FileAlignment>512</FileAlignment>
    <WarningLevel>4</WarningLevel>
    <GenerateSerializationAssemblies>Off</GenerateSerializationAssemblies>
</PropertyGroup>
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE;$(PlatformFamilyName)</DefineConstants>
    <NoStdLib>true</NoStdLib>
    <NoConfig>true</NoConfig>
    <ErrorReport>prompt</ErrorReport>
    <FileAlignment>512</FileAlignment>
    <WarningLevel>4</WarningLevel>
    <GenerateSerializationAssemblies>Off</GenerateSerializationAssemblies>
</PropertyGroup>
<ItemGroup>
    <Reference Include="mscorlib" />
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Windows.Forms" />
    <Reference Include="System.Xml" />
</ItemGroup>
<ItemGroup>
    <Compile Include="Form1.cs">
        <SubType>Form</SubType>
    </Compile>
    <Compile Include="Form1.Designer.cs">
        <DependentUpon>Form1.cs</DependentUpon>
    </Compile>
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <EmbeddedResource Include="Form1.resx">
        <SubType>Designer</SubType>
        <DependentUpon>Form1.cs</DependentUpon>
    </EmbeddedResource>
    <EmbeddedResource Include="Properties\Resources.resx">
        <Generator>ResXFileCodeGenerator</Generator>
        <LastGenOutput>Resources.Designer.cs</LastGenOutput>
        <SubType>Designer</SubType>
    </EmbeddedResource>
    <Compile Include="Properties\Resources.Designer.cs">
        <AutoGen>True</AutoGen>
        <DependentUpon>Resources.resx</DependentUpon>
        <DesignTime>True</DesignTime>
    </Compile>
    <Compile Include="RWDev.cs" />
</ItemGroup>
<Import Condition="'$(TargetFrameworkVersion)' == 'v1.0'" Project="$(MSBuildBinPath)\Microsoft.CompactFramework.CSharp.v1.targets" />
<Import Condition="'$(TargetFrameworkVersion)' == 'v2.0'" Project="$(MSBuildBinPath)\Microsoft.CompactFramework.CSharp.targets" />
<ProjectExtensions>
    <VisualStudio>
        <FlavorProperties GUID="{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}">
            <HostingProcess disable="1" />
        </FlavorProperties>
    </VisualStudio>
</ProjectExtensions>
<!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
        Other similar extension points exist, see Microsoft.Common.targets.
    <Target Name="BeforeBuild">
    </Target>
    <Target Name="AfterBuild">
    </Target>
-->
</Project> 
```

提前感谢您的帮助。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T03:52:19.320

用记事本打开解决方案文件后，似乎代码是用VS2005创建的......

所以我安装了VS2005 Professional

便携式设备的应用程序开发仅在 Visual Studio 的 Pro 版本中受支持......但在 VS2010 中，互联网上的一些信息说它不再支持移动设备的开发......

=)

# objective-c - 佳能 EDSDK 在 Mac OS 10.7.5 上的一个非常基本的程序上崩溃并出现 EXC_BAD_ACCESS

> ID：15919086
> 
> 赞同：2
> 
> 时间：2013-04-10T07:01:30.713
> 
> 标签：objective-c, c, edsdk

我正在尝试编写一个基于控制台的应用程序来访问 Mac OS X 10.7.5 上的佳能相机。我正在使用 XCode 4.6 版。这是我正在尝试编写的程序

```
#import <Foundation/Foundation.h>
#include "EDSDK.h"
#include "EDSDKErrors.h"
#include "EDSDKTypes.h"

int main()
{
    @autoreleasepool {
        EdsError error = EDS_ERR_OK;
        EdsCameraListRef cameraList = NULL;
        EdsUInt32 count = 0;
        EdsDeviceInfo deviceInfo;
        bool isSDKLoaded;

        // Initialization of SDK
        error = EdsInitializeSDK();

        //Acquisition of camera list
        if(error == EDS_ERR_OK)
        {
            isSDKLoaded = YES;
            error = EdsGetCameraList(&cameraList);
        }
        if(cameraList != NULL) {
            EdsRelease(cameraList);
            cameraList = NULL;
        }

    }
    return 0;
} 
```

它编译成功，但是当我运行程序时，它会在 EdsGetCameraList 函数返回时崩溃。显示的错误是“dyld misaligned_stack_error”。我知道这与 MacOS X 希望堆栈是 16 字节对齐的事实有关。我使用的 SDK 仅适用于 32 位架构，因此，我已经相应地设置了架构。我尝试在 XCode 的 Build Settings 下设置“Other C flags”以包含标志“-falign-stack=assume-16-byte”。

佳能 EDSDK 附带的示例工作正常。使用的 SDK 版本是佳能在 2006-2007 年开发的版本，更新于 06-03-16。我没有其他版本信息。

以下是日志中的转储： [//pastebin.com/vfDWeZnr](http://pastebin.com/vfDWeZnr)

我可能做错了什么？

我对 Objective-C 非常陌生，因此，C 和 Objective-C 代码的混合。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:06:42.773

你确定你不需要初始化`cameraList`吗？我想该函数想要写入您提供的地址，但指向`NULL`，因此出现错误。在 C 中，我会`malloc()`在这里使用来获取指针，但我不知道 Objective-C 的等价物。

# java - TestNG 组：我们可以包含两个组名并创建一个组来运行测试吗？

> ID：15919091
> 
> 赞同：6
> 
> 时间：2013-04-10T07:01:38.633
> 
> 标签：java, selenium, selenium-webdriver, selenium-rc, testng

我有以下 testng 测试方法。

```
 @Test(groups = {"tsg1.0","smoke"})
public void testLoginWithInvalidCredentials(String usernameValue, String passwordValue){        
    /*Print something*/
}

@Test(groups = {"tsg1.0"})          
public void testLoginWithUserIdOnly(String username) {       
    /*Print something*/
}

@Test(groups = {"tsg1.0"})          
public void testLoginWithPasswordOnly(String password) {         
    /*Print something*/
} 
```

这是用于测试上述方法的testng xml。

```
<suite name="Suite" thread-count="1" verbose="10"> 
  <test name="Test">
  <groups>
<run>  
 <include name="tsg1.0"/>    
</run>
</groups>
<packages>  
<package name="<test package name>"/>       
 </packages> 
</test>  
</suite> 
```

有没有一种方法可以让我创建一个 xml，其中将包含组“TSG1.0”和“SMOKE”的测试。在这种情况下，我只希望运行第一个测试（testLoginWithInvalidCredentials）。

请帮忙。

谢谢，迈克。

PS：以下不起作用，因为它将包括 tsg1.0 或烟雾。我想要一个和条件......

```
<run>
<include name="tsg1.0"/>   
<include name="smoke"/>  
</run> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-19T17:31:51.843

你实际上可以做到这一点“半现成的”： [http ://testng.org/doc/documentation-main.html#beanshell](http://testng.org/doc/documentation-main.html#beanshell)

在您的特定情况下，它将是这样的：

```
<method-selectors>
  <method-selector>
    <script language="beanshell"><![CDATA[
       return groups.containsKey("tsg1.0") && groups.containsKey("smoke");
     ]]></script>
  </method-selector>
</method-selectors> 
```

刚刚在这里更详细地回答了一个类似的问题： [如果 TestNG 是两个组的成员，是否可以给 TestNG 设置一个条件来运行测试？](https://stackoverflow.com/questions/23686636/is-it-possible-to-put-a-condition-to-testng-to-run-the-test-if-that-is-member-of/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T08:08:28.940

在 testng 中没有现成的 AFAIK。您可能要做的是编写您的方法拦截器并仅返回属于这两个组的这些方法的列表..

您还可以从拦截方法的 testcontext 参数中获取包含的组。

您可以参考这里了解更多信息： http: [//testng.org/doc/documentation-main.html#methodinterceptors](http://testng.org/doc/documentation-main.html#methodinterceptors)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T07:08:50.417

您可以拥有[一组组](http://testng.org/doc/documentation-main.html#groups-of-groups)。

```
Groups can also include other groups. These groups are called "MetaGroups".
For example, you might want to define a group "all" that includes "checkintest" 
and "functest"."functest" itself will contain the groups "windows" and "linux" 
while "checkintest will only contain "windows". 
```

属性文件示例：

```
<groups>
    <define name="functest">
      <include name="windows"/>
      <include name="linux"/>
    </define>

    <define name="all">
      <include name="functest"/>
      <include name="checkintest"/>
    </define>

    <run>
      <include name="all"/>
    </run>
  </groups> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T17:57:15.763

对于从 cmd 执行的多个 TestNG 组，您可以在 TestNG.xml 文件中使用以下脚本。

```
<method-selectors>
        <method-selector>
            <script language="beanshell"><![CDATA[
            Boolean runTest = false;
            String groupsName = System.getProperty("GROUPS");

            if (groupsName != null && groupsName != ""){
                StringTokenizer groupsTagList = new StringTokenizer(groupsName, ",");
                while (groupsTagList.hasMoreTokens()) {
                    if(groups.containsKey(groupsTagList.nextToken().trim()){
                        runTest = true;
                        break;
                    }
                }
            }else{
                runTest = true;
            } 
            return runTest;
            ]]>
            </script>
        </method-selector>
    </method-selectors> 
```

从 Maven 执行：

mvn 测试 -DGROUPS=groups1,groups2,groups3

它会正常工作...

# .net - 在不了解目标数据库的情况下部署数据库项目

> ID：15919097
> 
> 赞同：1
> 
> 时间：2013-04-10T07:02:08.627
> 
> 标签：.net, continuous-integration, database-project, continuous-deployment, database-deployment

我有个问题。我习惯使用 Teamcity + Database 项目，该项目能够将数据库部署到所有 DTAP 服务器。我喜欢这种工作方式——它允许我每周在 2 分钟内部署到生产环境。

现在我在一家公司工作，该公司的部署过程涉及 BATCH 脚本和一堆修改脚本。然后有一个表可以跟踪哪些更改脚本应用于数据库并基于该数据库更新。

我建议使用具有特定部署配置的数据库项目，但问题是：我们不允许访问验收和生产服务器。由于我们无法连接到那些，我们无法部署到那些服务器，也不能使用数据库项目生成的 sql 脚本，因为我们无法定义目标数据库。

当然——我们可以得到生产的备份，把它放在某个地方并针对它创建脚本，但这并不方便。

我的问题是：有没有一种优雅的方法来解决这个项目，并使用我不知道的 DB 项目的一些选项创建一个 DB 脚本，而不必知道目标 DB（如果一直存在？），还是说我们无权访问这些服务器只是废话，我们是否应该专注于说服他们允许我们访问？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:59:11.840

您可以生成 dacpac 并将其从 SSMS 或使用 sqlpackage.exe 命令行部署到目标数据库。

[http://msdn.microsoft.com/en-us/library/ee210546.aspx](http://msdn.microsoft.com/en-us/library/ee210546.aspx)

这会在部署时动态生成部署脚本。

出于兴趣，您使用数据库项目部署来支持现有批处理脚本流程的动机是什么？

# database - 使用休眠创建/更新数据库模式

> ID：15919100
> 
> 赞同：0
> 
> 时间：2013-04-10T07:02:20.943
> 
> 标签：database, hibernate, schema

我正在开发使用休眠 (4.2) 和 mysql (Amazon RDS) 的产品。每当进行更改时，架构都会通过 liquibase 进行更新。它还通过同一数据库实例中的不同模式托管许多 tanent。每次注册新客户时，都会构建一个新模式。应该发生两件事：

1）创建架构

2）用静态数据填充模式

目前，模式更新由hibernate（hbm2ddl更新）完成，静态数据的填充由代码完成。我不喜欢这两种解决方案，因为我知道 hbm 是有限的，我不喜欢静态数据更改与代码相关。

关于如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:40:41.923

> 始终建议手动生成模式，最好是通过支持数据库模式修订的工具，例如伟大的[Liquibase](http://liquibase.org/)。从实体生成模式在理论上很好，但在实践中很脆弱，从长远来看会导致很多问题（相信我）。

[Hibernate/JPA DB 模式生成最佳实践](https://stackoverflow.com/questions/2585641/hibernate-jpa-db-schema-generation-best-practices)

*我可以将此链接粘贴为评论，但很可能这将是一个答案。*

# ruby - 为什么这个红宝石每个循环都不会中断？

> ID：15919101
> 
> 赞同：2
> 
> 时间：2013-04-10T07:02:29.330
> 
> 标签：ruby, loops, break

我对使用 Ruby 通过 Proj Euler 进行编程和工作是全新的。为什么这个红宝石循环不会中断？

```
(1..5).each do |a|
  (1..5).each do |b|
    e=(a*a)+(b*b)
    c=Math.sqrt(e)
    puts "a=#{a}, b=#{b}, c=#{c}"
    break if a+b+c == 12
  end
end 
```

请注意，如果我在 if 语句中添加了任何其他内容（如果 a+b+c == 12 则说 puts "found it"），它工作得很好，它不会中断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:05:12.363

这很正常，因为你只能`break`从循环上`b`。（循环继续进行`a`）

* * *

这个问题描述了正确的方法：[How to break outer cycle in ruby](https://stackoverflow.com/questions/1352120/how-to-break-outer-cycle-in-ruby)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:26:24.900

下面的代码可能是你想做的

```
(1..5).each do |a|
  break unless (1..5).each do |b|
    e=(a*a)+(b*b)
    c=Math.sqrt(e)
    puts "a=#{a}, b=#{b}, c=#{c}"
    break if a+b+c == 12
  end
end 
```

当循环中触发了break时，循环的返回值变成了break值，就是`nil`这种情况。在其他情况下，`(1..5)`返回。所以这段代码可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:27:38.740

正如其他人所说，`break`只会结束内部循环。

您可以重写您的代码，例如：

```
[*1..5].product([*1..5]).map{|a, b| [a, b, Math.sqrt(a*a+b*b)]}.each do |a, b, c|
    puts "a=#{a}, b=#{b}, c=#{c}"
    break if a + b + c == 12
end 
```

现在，`break`将按您的预期工作。

# parsing - 解析此 BNF 时如何删除某些术语？

> ID：15919108
> 
> 赞同：0
> 
> 时间：2013-04-10T07:02:48.613
> 
> 标签：parsing, haskell, grammar, bnf, happy

我正在尝试使用 Happy 库解析布尔表达式。问题是当我引入括号时结果不如我想要的那么好。我做了以下语法。

```
Query       : Expr              { $1 }

Expr        : Expr "OR" Term            { ActOp Or $1 $3 }
            | Expr "AND" Term           { ActOp And $1 $3 }
            | Term                      { Term $1 }

Term        : '"' string '"'            { QuotedWord $2 }
            | string                    { Word $1 }
            | '(' Expr ')'              { Brack $2} 
```

下面是要解析的字符串和结果。

```
"(computer AND science) OR cs" -> ActOp Or (Term (Brack (ActOp And (Term (Word "computer")) (Word "science")))) (Word "cs") 
```

如果它是以下内容，我会更喜欢，因为它更容易解释：

```
ActOp Or (ActOp And (Word "computer") (Word "science")) (Word "cs") 
```

**编辑 - 完整代码**

```
{
module BoolAst where
import Data.Char
import Data.List
}

%name translate
%tokentype { Token }

%token 
      string            { TokenString $$ }
      '"'               { TokenQuote}
      "AND"             { TokenAnd }
      "OR"              { TokenOr }
      '('               { TokenOb }
      ')'               { TokenCb }

%%

Query       : Expr                      { $1 }

Expr        : Expr "OR" Term            { ActOp Or $1 $3 }
            | Expr "AND" Term           { ActOp And $1 $3 }
            | Term                      { Term $1 }

Term        : '"' string '"'            { QuotedWord $2 }
            | string                    { Word $1 }
            | '(' Expr ')'              { Brack $2}

{
happyError :: [Token] -> a
happyError _ = error ("Parse error\n")

type Query 
        = Expr

data Expr 
        = ActOp Op Expr Term
        | Term Term
        deriving Show

data Op
        = Or
        | And
        deriving Show

data Term
        = QuotedWord String
        | Word String
        | Brack Expr
        deriving Show

data Token
      = TokenQuote
      | TokenAnd
      | TokenOr
      | TokenString String
      | TokenOb
      | TokenCb
 deriving Show

lexer :: String -> [Token]
lexer [] = []
lexer cs
      | isPrefixOf "AND" cs = TokenAnd : (lexer $ drop 3 cs)
      | isPrefixOf "OR" cs = TokenOr : (lexer $ drop 2 cs)
lexer (c:cs) 
      | isSpace c = lexer cs
      | isAlpha c = lexVar (c:cs)
lexer ('"':cs) = TokenQuote : lexer cs
lexer ('(':cs) = TokenOb : lexer cs
lexer (')':cs) = TokenCb : lexer cs

lexVar cs =
   case span isAlphaNum cs of
    (var,rest)   -> TokenString var : lexer rest

main = print $ translate . lexer $ "computer AND science OR cs" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:42:31.403

您的数据类型不必直接对应于语法规则。让 Term 非终结符产生一个 Expr 值是完全有效的。例如

```
data Expr 
    = ActOp Op Expr Expr
    | QuotedWord String
    | Word String
    deriving Show

...

Expr        : Expr "OR" Term            { ActOp Or $1 $3 }
            | Expr "AND" Term           { ActOp And $1 $3 }
            | Term                      { $1 } -- no need to wrap in a constructor

Term        : '"' string '"'            { QuotedWord $2 }
            | string                    { Word $1 }
            | '(' Expr ')'              { $2 } -- no need to wrap in a constructor 
```

# android - 如何从 sdcard android 加载图像缩略图？

> ID：15919115
> 
> 赞同：1
> 
> 时间：2013-04-10T07:03:03.780
> 
> 标签：android, image, thumbnails

您好，我从 Developer.android.com 获得了一个示例代码，它从具有指定 url 的网页中获取图像，对于缩略图，它还从同一页面获取 url，这是示例代码。

```
public class Images {
public final static String[] imageUrls = new String[] {
           "https://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s1024/A%252520Photographer.jpg",
"https://lh4.googleusercontent.com/--dq8niRp7W4/URquVgmXvgI/AAAAAAAAAbs/-gnuLQfNnBA/s1024/A%252520Song%252520of%252520Ice%252520and%252520Fire.jpg", };

public final static String[] imageThumbUrls = new String[] {
        "https://lh6.googleusercontent.com/-55osAWw3x0Q/URquUtcFr5I/AAAAAAAAAbs/rWlj1RUKrYI/s160-c/A%252520Photographer.jpg",
"https://lh4.googleusercontent.com/--dq8niRp7W4/URquVgmXvgI/AAAAAAAAAbs/-gnuLQfNnBA/s160-c/A%252520Song%252520of%252520Ice%252520and%252520Fire.jpg", }; 
```

在这里，他们使用 url 从网页中获取图像并支付而不是我必须显示来自 sdcard 的图像。

谢谢你我可以编辑SD卡图像的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:07:48.913

您可以将图像从 sdcard 显示到 webview 。

这是代码示例。

```
mWebView = (WebView) findViewById(R.id.webview);
mWebView.getSettings().setAllowFileAccess(true);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(true);
String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();
String imagePath = "file://"+ base + "/test.jpg";
String html = "<html><head></head><body><img src=\""+ imagePath + "\"></body></html>";
mWebView.loadDataWithBaseURL("", html, "text/html","utf-8", ""); 
```

您需要在任何文件之前附加“前缀“file://”，以便在 webview 中显示。

# javascript - AppScript - 可能自定义授权通知？

> ID：15919116
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:03:08.757
> 
> 标签：javascript, google-apps-script

AppScript 通知消息如下：

“您收到这封电子邮件是因为您已访问并授予 Tool 的权限。

什么是工具？工具是使用 Google Apps 脚本编写的第三方应用程序。此应用程序不隶属于 Google.com。它由 developer@domain.com 开发。如果您需要有关此应用程序的任何支持或帮助，请联系此应用程序的所有者 developer@domain.com。

如何卸载工具？您可以单击下面的按钮卸载工具。卸载工具

关于 Google Apps 脚本工具是使用 Google Apps 脚本构建的。使用 Google Apps 脚本开发的所有应用程序均由 script.google.com 提供。Google 不保证第三方开发的任何应用程序的安全性。请单击此处了解有关 Google Apps 脚本的更多信息。请点击此处报告滥用行为。

©2013 Google Inc., 1600 Amphitheatre Parkway, Mountain View, CA 94043, USA。服务条款 | 隐私政策 ”

很明显，脚本 (developer@domain.com) 的作者（或者更确切地说是最后一个修改器）可以更改为仅为维护应用程序脚本代码而创建的一些技术帐户。客户问题如下：

1.  发件人电子邮件地址可以来自自己的域（@domain.com）吗？

2.  消息的实际内容是否可以自定义/修改 - 最终用户认为它们是神秘的并且可能是垃圾邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:37:07.770

虽然您可以在问题跟踪器上提交功能请求，但目前这两个问题的答案是否定的。

# c++ - 在win32中将动态数据写入文件

> ID：15919131
> 
> 赞同：0
> 
> 时间：2013-04-10T07:04:03.480
> 
> 标签：c++, winapi, dynamic

我遇到了win32的问题。我必须使用 c++ 将一些动态数据写入 win32 中的文件。我知道如何将字符串写入文件的基础知识，但是我们如何将整数、浮点数等数据写入文件。

我有一个文件，我正在将数据复制到另一个新创建的文件中。我需要将整数、浮点数等数据写入顶部的这个文件。我知道我们可以通过

```
char buff[] = "hello"; 
```

并将其复制到文件中，我不知道如何使用不同类型的数据类型来做到这一点。有什么帮助吗？

```
char buf[] = "hello";  //Null terminate
LPVOID lpMsgBuf; 
DWORD byteWritten = 0;
HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
BOOL ReadFileReturn;

HANDLE hFile = CreateFile("MYFILE.blo",    // open MYFILE.blo 
            GENERIC_WRITE | GENERIC_READ,              
            FILE_SHARE_READ,               // share for reading 
            NULL,                          // no security 
            OPEN_EXISTING,                   // existing file only 
            FILE_ATTRIBUTE_NORMAL,         // normal file 
            NULL);                         // no attr
ReadFileReturn = ReadFile(hFile,buf,30,&byteWritten,NULL);    
if(ReadFileReturn)
{
    FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM,
                  NULL,
                  GetLastError(),
                  MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), // Default language
                 (LPTSTR) &lpMsgBuf,
                  0,
                  NULL);
    WriteFile(hStdOut,buf,sizeof buf,NULL,NULL);

}
else
{
    WriteFile(hStdOut,"It Failed",sizeof "It Failed",NULL,NULL);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:07:31.370

这取决于您打开文件的方式（实际上是在哪种模式下）。如果您以文本模式打开它们，则无论其类型如何，所有内容都将以字符串/文本的形式写入。否则，您可以选择以二进制模式打开文件。在那种模式下`int`会写成`int`,`float`会写成`float`等等。

这是描述两种文件类型之间差异的链接[http://www.fileinfo.com/help/binary_vs_text_files](http://www.fileinfo.com/help/binary_vs_text_files)

您也许可以尝试以下方法：

```
char str[80] = "";
int a = 1, b = 2;
int n = sprintf(str, "%d", a+b);
DWORD bytesWritten;
WriteFile(fileHandle, str, strlen(str), &bytesWritten, NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:21:46.590

检查这个：

[http://www.cplusplus.com/reference/ostream/ostream/write/](http://www.cplusplus.com/reference/ostream/ostream/write/)

所以基本上你这样做：

```
 .... 
 std::ofstream myfile("filename");
 double my_data = 15;
 myfile.write( static_cast< const char*>(&my_data), sizeof( double ) );
 ... 
```

前面的代码片段有点粗略，您可能需要检查字节序和对齐等问题。

# html - 下拉菜单未正确清除

> ID：15919133
> 
> 赞同：1
> 
> 时间：2013-04-10T07:04:06.810
> 
> 标签：html, css, drop-down-menu, navigation

我正在尝试构建一个非常简单的下拉菜单。我希望所有 li 的高度都为 60 像素。我已经为下拉菜单使用了一些不同的教程，但我一直遇到同样的问题。我无法让“Link 1”完全清除“Drop 1”。它会清除锚点，但不会清除 li 本身。

[http://jsfiddle.net/ZFWBU/12/](http://jsfiddle.net/ZFWBU/12/)

```
 <nav>

    <ul id="nav">

        <li><a href="#">Drop 1</a>

            <ul>
                <li><a href="#">Link 1</a></li>
                <li><a href="#">Link 2</a></li>
                <li><a href="#">Link 3</a></li>
            </ul>

        </li>

        <li><a href="#">Drop 2</a>
            <ul>
                <li><a href="#">Link 1</a></li>
                <li><a href="#">Link 2</a></li>
                <li><a href="#">Link 3</a></li>
            </ul>
        </li>

    </ul>

</nav> 
```

CSS：

```
a {
    color: #333;
}

nav {
    width: 992px;
    height: 50px;
    margin: 0 auto;

    border: 1px solid #ebebeb;
    background: red;
}

#nav {
    width: 992px;
    margin: 0 auto;
    line-height: 100%;

}

#nav li {
    float: left;
    position: relative;
    list-style: none;
}

/* main level link */
#nav a {
    width: 280px;
    font-weight: bold;
    color: #e7e5e5;
    text-decoration: none;
    display: block;
    padding:  16px 20px;
    margin: 0;

    border: 1px solid white;
}

/* main level link hover */
#nav .current a, #nav li:hover > a {
    background: blue;
}

/* level 2 list */
#nav ul {
    display: none;
    margin: 0;
    padding: 0;
    position: absolute;
    top: 35px;
    left: 0;

    background: #f5f5f5;
}

/* dropdown */
#nav li:hover > ul {
    display: block;
}

#nav ul li {
    float: none;
    margin: 0;
    padding: 0;
}

#nav ul a {
    font-weight: normal;
}

/* clearfix */
#nav:after {
    content: "";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

#nav {
    display: inline-block;
}

html[xmlns] #nav {
    display: block;
}

* html #nav {
    height: 1%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:11:29.723

您已经`top`在此声明中设置了属性，我将其调整为`50px`您可以[在 JSFiddle 上看到的](http://jsfiddle.net/8XupQ/)。

```
/* level 2 list */
#nav ul {
    display: none;
    margin: 0;
    padding: 0;
    position: absolute;
    top: 50px;
    left: 0;
    background: #f5f5f5;
} 
```

正如评论中 pzin 所提到的，您可以通过使用来减少未来的问题，`top: 100%`当您更改大小时，将来不需要对其进行编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:10:00.480

更新以下样式并添加`margin-top:15px;`

```
#nav li:hover > ul {
    display: block;
    margin-top: 15px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:13:19.570

更好的解决方案是将顶部位置设置为`li`元素的完整高度，因此如果有一天您更改它，您以后不需要编辑它，因为它会自动适应自己：

```
#nav ul {
  top: 100%;
  [...]
} 
```

# java - 在不使用循环语句的情况下检查 M 到 N 个数字的条件

> ID：15919144
> 
> 赞同：-4
> 
> 时间：2013-04-10T07:04:54.560
> 
> 标签：java, random

所以问题是：

用户必须指定 2 个编号的**M**（起点）和**N**（终点）

程序必须在以下条件下检查 M 和 N 之间的所有数字：

*   如果能被 3 整除，则打印“被 3 整除”
*   如果能被 5 整除，则打印“被 5 整除”
*   如果能被 3 和 5 整除，则打印“被两者整除”

只有在允许循环检查条件的情况下，Java 中的解决方案才会非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:14:47.623

如果你想要递归

```
 void func(int M,int N)
{ 
if (M>N)
return;
 else
  {
   i=M;
    if(i%5==0 && i%3==0){

       system.out.println(i + "is divisible by both 3 and 5");

    }else if(i%5==0){

       system.out.println(i + "is divisible by  5");

    }else if(i%3==0){

       system.out.println(i + "is divisible by  3");

    }
    func(M++,N);
 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:18:19.053

这是我的尝试，过程称为`Recursion`.

```
public class Main {

    private static int M, N;

    public static void main(String[] args) {
        M = 0; // min value
        N = 10; // max value
        noLoop(M); // begin the method
    }

    private static void noLoop(int currentNumber) {
        String resultMessage;

        if (currentNumber % 3 == 0) {
            resultMessage = currentNumber + " is divisible by 3.";
        } else {
            resultMessage = currentNumber + " is NOT divisible by 3.";
        }

        if (currentNumber % 5 == 0) {
            resultMessage = currentNumber + " is divisible by 5.";
        } else {
            resultMessage = currentNumber + " is NOT divisible by 5.";
        }

        if (currentNumber % 3 == 0 && currentNumber % 5 == 0) {
            resultMessage = currentNumber + " is divisible by BOTH 3 and 5.";
        }

        System.out.println(resultMessage);
        M++; // min value + 1
        if (M <= N) { // if min value == max value, STOP!
            noLoop(M);
        }
    }
} 
```

# android - Android项目开始时的R错误

> ID：15919145
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:04:55.730
> 
> 标签：android, file

我已经在 android 中启动了一个新的应用程序项目，我在 R 文件上遇到了这个奇怪的错误。我做了很多项目，但这是第一次出现 R 错误，因为 R 文件是自动生成的。没有错误我刚刚开始项目时的我的 xml 或类文件。这就是它的显示 - ：

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        }
R cannot be resolved to a variable. 
```

我尝试创建 R 类，但它显示在 src 文件夹中，而不是在 gen 文件夹中。请在此帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:07:40.593

检查您的 Java 编译器版本，它应该是 1.6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:08:11.837

清理并构建您的项目。这将为您自动生成的文件夹生成 R.java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:08:44.213

删除在 src 目录下创建的 R.java，然后进行清理和构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T07:12:01.197

当然清理项目，但如果你有任何导入的库，如 xxx.R 删除

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T07:12:57.917

从源文件夹中删除**R.java文件。**现在**清理**你的项目

也试试这个。

右键单击您的**项目名称**>> **Android 工具**>>**修复项目属性**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T07:13:24.813

检查 Eclipse IDE 中的问题选项卡，它必须显示一些错误。

否则清理和构建。

还要检查项目菜单中的自动构建选项。

# java - 正则表达式进入无限循环

> ID：15919146
> 
> 赞同：6
> 
> 时间：2013-04-10T07:05:01.153
> 
> 标签：java, regex

我正在解析形式的（物种）名称：

```
Parus Ater
H. sapiens
T. rex
Tyr. rex 
```

通常有两个术语（二项式），但有时有 3 个或更多。

```
Troglodytes troglodytes troglodytes 
E. rubecula sensu stricto 
```

我写

```
[A-Z][a-z]*\.?\s+[a-z][a-z]+(\s*[a-z]+)* 
```

大部分时间都有效，但偶尔会进入无限循环。花了一些时间才发现它在正则表达式匹配中，然后我意识到这是一个错字，我应该写

```
[A-Z][a-z]*\.?\s+[a-z][a-z]+(\s+[a-z]+)* 
```

正确执行。

我的问题是：

*   为什么会发生这个循环？
*   有没有办法在运行程序之前检查类似的正则表达式错误？否则可能很难在 prgram 分发之前捕获它们并导致问题。

[注意：我不需要更通用的物种表达式——物种名称有一个正式的 100 多行正则表达式规范——这只是一个初始过滤器]。

注意：出现问题是因为尽管大多数名称被精确地提取为 2 或偶尔 3/4 项（因为它们是斜体），但仍有一些误报（如`"Homo sapiens lives in big cities like London"`）并且匹配在“L”处失败。]

注意：在调试时，我发现正则表达式经常完成但速度很慢（例如在较短的目标字符串上）。我通过一个病态的案例发现了这个错误，这是很有价值的。我学到了重要的一课！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T08:04:28.270

要解决您问题的第一部分，您应该阅读[catastrophic backtracking](http://regular-expressions.info/catastrophic.html)。本质上，正在发生的事情是有太多方法可以将您的正则表达式与您的字符串匹配，并且解析器会不断地回溯以尝试使其工作。

在您的情况下，它可能是嵌套的重复： `(\s*[a-z]+)*`这可能会导致一些非常非常奇怪的循环。正如 Qtax 巧妙地指出的那样，如果没有更多信息，就很难判断。

不幸的是，您的问题的第二部分无法回答。这基本上是[停机问题](http://en.wikipedia.org/wiki/Halting_problem)。由于正则表达式本质上是一个有限状态机，其输入是一个字符串，因此您无法创建一个通用解决方案来预测哪些正则表达式将灾难性地回溯，而哪些不会。

至于让你的正则表达式运行得更快的一些技巧？那是一大罐虫子。我花了很多时间自己研究正则表达式，并花一些时间优化它们，这就是我发现的通常有帮助的内容：

1.  如果您的语言支持，请在循环之外编译您的正则表达式。
2.  只要有可能，当您知道它们有用时添加[锚点。](http://www.regular-expressions.info/anchors.html)特别是`^`对于字符串的开头。另请参阅： [字边界](http://www.regular-expressions.info/wordboundaries.html)
3.  避免像瘟疫一样的嵌套重复。如果您必须拥有它（您将拥有它），请尽力向引擎提供提示，以缩短任何意外的回溯。
4.  利用风味结构来加快速度。我偏爱[非捕获组](http://www.regular-expressions.info/brackets.html)和[所有格量词](http://www.regular-expressions.info/possessive.html)。它们不会出现在每种口味中，但是当它们出现时，您应该使用它们。还可以查看[原子组](http://www.regular-expressions.info/atomic.html)
5.  我总是认为这是真的：**你的正则表达式越长，你就越难让它变得高效。** 正则表达式是一个伟大而强大的工具，它们就像一个超级聪明的锤子。 [不要陷入把一切都看成钉子的陷阱](http://en.wikipedia.org/wiki/Law_of_the_instrument)。有时，您正在寻找的字符串函数就在您的眼皮底下。

希望这对您有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:54:41.917

对于第一个正则表达式：

```
[A-Z][a-z]*\.?\s+[a-z][a-z]+(\s*[a-z]+)* 
```

`(\s*[a-z]+)*`正如评论中指出的那样，发生灾难性的回溯。但是，仅当您使用 验证字符串时它才成立，因为这是遇到无效字符导致引擎尝试回溯而不是返回匹配（循环）`String.matches()`的唯一情况。`Matcher`

让我们匹配一个无效的字符串`(\s*[a-z]+)*`：

```
inputstringinputstring;

(Repetition 1)
\s*=(empty)
[a-z]+=inputstringinputstring
FAILED

Backtrack [a-z]+=inputstringinputstrin
(Repetition 2)
\s*=(empty)
[a-z]+=g
FAILED

(End repetition 2 since all choices are exhausted)
Backtrack [a-z]+=inputstringinputstri
(Repetition 2)
\s*=(empty)
[a-z]+=ng
FAILED

Backtrack [a-z]+=n
(Repetition 3)
\s*(empty)
[a-z]+=g
FAILED

(End repetition 3 since all choices are exhausted)
(End repetition 2 since all choices are exhausted)
Backtrack [a-z]+=inputstringinputstr 
```

至此，您应该已经注意到了问题所在。让我们定义`T(n)`为检查长度为 n 的字符串与模式不匹配的工作量。从回溯的方法，我们知道`T(n) = Sum [i = 0..(n-1)] T(i)`。由此，我们可以推导出`T(n + 1) = 2T(n)`，这意味着回溯过程的时间复杂度是指数级的！

更改`*`为`+` **完全避免了该问题**，因为重复实例只能从空格字符和英文字母字符之间的边界开始。相反，第一个正则表达式允许重复实例在任意 2 个字母字符之间开始。

为了证明这一点，`(\s+[a-z]+\s*)*`当无效的输入字符串包含许多用多个连续空格分隔的单词时，会给你回溯地狱，因为它允许重复实例在多个位置开始。这遵循以下公式`b^d`，其中`b`是最大连续空格数（减 1），`d`是空格序列数。它没有您拥有的第一个正则表达式那么严重（每次重复至少需要一个英文字母和一个空格字符，而不是在您的第一个正则表达式中每次重复一个英文字母），但这仍然是一个问题。

# c - 一轮浮动值

> ID：15919164
> 
> 赞同：0
> 
> 时间：2013-04-10T07:06:16.400
> 
> 标签：c, floating-point, floating-point-precision

我正在设计一个收银机，我必须在其中比较 2 个浮点值，并且每次比较它时都会出错。即，因为我无法将最多 2 个小数位数的差异四舍五入并将其与值进行比较。

例如。如果客户支付的金额是 60.36 并且发出的账单是 30.24 ，那么出来的差额是 30.120001 。我什至尝试使用 floor 函数将其四舍五入为两位小数： floorf(diff*100+.5)/100; 但它不起作用。

我应该如何四舍五入十进制数字并在设计收银机时使用它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T07:09:01.527

您不应该使用二进制浮点数来处理货币金额。有很多问题与舍入和浮点的不精确性有关。例如，您将无法准确表示`0.1`为`float`.

请改用[定点算术](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)。

# android - 从日历打开 Android 应用程序

> ID：15919165
> 
> 赞同：10
> 
> 时间：2013-04-10T07:06:21.660
> 
> 标签：android, android-calendar

我正在开发的应用程序需要能够在选定的日历中创建事件，然后当用户在他们的日历查看应用程序中查看这些事件时，它会提供一个选项来返回到我的应用程序以查看有关它和数据的更多信息与它有关。

使用[日历提供程序](http://developer.android.com/guide/topics/providers/calendar-provider.html)，我可以创建事件并将 Uri 存储到事件中以供以后使用/删除，但我还没有找到在日历查看应用程序中从这些事件打开我的应用程序的好方法。

我考虑的 2 个选项是在事件描述中包含一个自定义 URL，单击该 URL 时将被我的应用程序中的意图过滤器（例如 myapp://event/1000）捕获，或者我可以设置[CUSTOM_APP_PACKAGE 和 CUSTOM_APP_URI](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#CUSTOM_APP_PACKAGE)值创建事件时的 CalendarContract。

我对第一个选项的问题是，我认为我不能保证日历查看应用程序会正确地将我的自定义 URL 视为链接并让用户单击它（在我的平板电脑上的 Google 日历中不起作用）。第二个选项看起来更有希望，但我找不到太多解释如何使用它的文档。

有谁知道如何正确地做到这一点？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-12-19T22:10:36.657

如果可以接受以 Jelly Bean (API 16+) 为目标，那么使用`CUSTOM_APP_PACKAGE`是最好的解决方案。添加新日历事件时，您只需填写[`CUSTOM_APP_PACKAGE`](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#CUSTOM_APP_PACKAGE)和[`CUSTOM_APP_URI`](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#CUSTOM_APP_URI)字段（分别使用您的包名称和标识事件的 URI）：

```
ContentValues values = new ContentValues();
values.put(CalendarContract.Events.CALENDAR_ID, 1);
values.put(CalendarContract.Events.TITLE, "Check stackoverflow.com");
values.put(CalendarContract.Events.DTSTART, beginTime.getTimeInMillis());
values.put(CalendarContract.Events.DTEND, endTime.getTimeInMillis());
values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());

values.put(CalendarContract.Events.CUSTOM_APP_PACKAGE, getPackageName());
values.put(CalendarContract.Events.CUSTOM_APP_URI, "myAppointment://1");

getContentResolver().insert(CalendarContract.Events.CONTENT_URI, values); 
```

然后，您需要指定作为 AndroidManifest.xml 的一部分（如[文档](http://developer.android.com/reference/android/provider/CalendarContract.html#ACTION_HANDLE_CUSTOM_EVENT)所述）将从日历应用程序调用的 Activity 以显示详细视图，例如

```
 <activity android:name=".ShowCalendarDetailActivity">
        <intent-filter>
            <action android:name="android.provider.calendar.action.HANDLE_CUSTOM_EVENT" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="vnd.android.cursor.item/event" />
        </intent-filter>            
    </activity> 
```

`ShowCalendarDetailActivity`将在点击出现的按钮时启动，并将传递一个带有操作的 Intent，`"android.provider.calendar.action.HANDLE_CUSTOM_EVENT"`其 URI 将是日历项 URI。

您提供的自定义 URI 在 extras 中，带有 key `CalendarContract.EXTRA_CUSTOM_APP_URI`。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    String myCustomUri = getIntent().getStringExtra(CalendarContract.EXTRA_CUSTOM_APP_URI);

    ...
} 
```

如果您想查看日历应用程序构建此意图的代码，请参阅`EventInfoFragment.updateCustomAppButton()`.[`EventInfoFragment.java`](https://github.com/android-ia/platform_packages_apps_Calendar/blob/master/src/com/android/calendar/EventInfoFragment.java)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T08:18:55.357

您列出的第一个选项在我的 Nexus S 上运行良好。我现在刚刚尝试过，以确保它来自默认的 Google 日历应用程序。

就我而言，我不是在拦截`myapp://event/1000`，而是在拦截一个更像`https://myspecialdomain.com/blahblah`. 浏览器开始加载，但在它有时间加载任何东西之前，它被我的应用程序换掉了。

如果你愿意，我明天可以给你看我的代码。

# vb.net - 通过 VB.net 获取 VGA BUS 类型

> ID：15919177
> 
> 赞同：0
> 
> 时间：2013-04-10T07:07:05.707
> 
> 标签：vb.net, pci, bus, vga, pci-e

如何通过 VB.net 获取 VGA BUS 类型（AGP、PCI、PCI-e...）？

这将返回计算机中的视频卡：SELECT Name, PNPDeviceID FROM Win32_VideoController

如何从这些视频卡中获取总线类型以将 PCI 或 PCI-e 或 AGP 连接到计算机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:04:18.627

您可以使用 WMI 来获取此信息。我使用了下面的代码。您必须添加对 System.Management 的引用。这段代码很脆弱，但它表明可以使用 WMI 获得信息。查看 MSDN 上的文档，了解您可能感兴趣的其他 WMI 类。

```
Private Shared Sub Main()
    Dim videoControllers As ManagementObjectCollection = getManagementObjects("Win32_VideoController")

    For Each controllerObj As ManagementObject in videoControllers
        Dim pnpDeviceID As String = Path.GetFileName(controllerObj.Properties("PNPDeviceID").Value.ToString())
        Dim deviceBus As String = getDeviceBus(pnpDeviceID)
        Dim busType As String = getBusType(deviceBus)

        Console.WriteLine("{0}:  {1}", controllerObj.Properties("Name").Value, busType)
    Next
End Sub

Private Shared Function getManagementObjects(ByVal wmiClass As String) As ManagementObjectCollection 
    Using searcher As ManagementObjectSearcher = New ManagementObjectSearcher(String.Format("select * from {0}", wmiClass))
        Return searcher.Get()
    End Using
End Function

Private Shared Function getDeviceBus(ByVal pnpDeviceID As String) As String 

    Dim result As String = Nothing
    Dim coll As ManagementObjectCollection = getManagementObjects("Win32_DeviceBus")

    For Each mobj As ManagementObject In coll
        For Each props As PropertyData in mobj.Properties
            If props.Name = "Dependent" AndAlso props.Value.ToString().Contains(pnpDeviceID) Then
                result = mobj.Properties("Antecedent").Value.ToString().Split("="c)(1).Replace("""", "")
                Exit For
            End If
        Next
    Next

    Return result
End Function

Private Shared Function getBusType(ByVal deviceBus As String) As String 
    Dim busTypes As Dictionary(Of Integer, String) = New Dictionary(Of Integer, String)()
    busTypes.Add(-1, "Undefined")
    busTypes.Add(0, "Internal")
    busTypes.Add(1, "ISA")
    busTypes.Add(2, "EISA")
    busTypes.Add(3, "MicroChannel")
    busTypes.Add(4, "TurboChannel")
    busTypes.Add(5, "PCI Bus")
    busTypes.Add(6, "VME Bus")
    busTypes.Add(7, "NuBus")
    busTypes.Add(8, "PCMCIA Bus")
    busTypes.Add(9, "C Bus")
    busTypes.Add(10, "MPI Bus")
    busTypes.Add(11, "MPSA Bus")
    busTypes.Add(12, "Internal Processor")
    busTypes.Add(13, "Internal Power Bus")
    busTypes.Add(14, "PNP ISA Bus")
    busTypes.Add(15, "PNP Bus")
    busTypes.Add(16, "Maximum Interface Type")

    Dim result As String = Nothing
    Dim coll As ManagementObjectCollection = getManagementObjects("Win32_Bus")

    Dim busType As Integer = -1

    For Each mobj As ManagementObject in coll
        If mobj.Properties("DeviceID").Value.ToString() = deviceBus Then
            Integer.TryParse(mobj.Properties("BusType").Value.ToString(), busType)
            Exit For
        End If
    Next

    result = busTypes(busType)

    Return result
End Function 
```

这在我的盒子上产生了这个结果：

```
ConfigMgr Remote Control Driver:  PCI Bus
NVIDIA GeForce 8400 GS    :  PCI Bus
Winvnc video hook driver:  PCI Bus 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-29T17:09:08.753

不是最好的解决方案，但它会返回哪个VGA在哪个端口，显示是PCI还是PCIe，我也认为是AGP，但我无法测试这个，因为我不再有AGP主板。

```
 Function GetName(ByVal devid As String) As String
        Dim sql As String = "SELECT * FROM Win32_PnPEntity WHERE DeviceID LIKE """ & devid.Replace("\", "\\") & """"
        Dim videoControllers As New ManagementObjectSearcher("root\CIMV2", sql)
        For Each controllerObj As ManagementObject In videoControllers.Get()
            Return controllerObj.Properties("Name").Value.ToString()
        Next
        Return devid
    End Function
    Function GetParent(ByVal devid As String) As String
        Dim sql As String = "SELECT * FROM Win32_PnPEntity WHERE DeviceID = """ & devid.Replace("\", "\\") & """"
        Dim MObjS As New ManagementObjectSearcher("root\CIMV2", sql)
        For Each MObj As ManagementObject In MObjS.Get()
            Dim outParams As ManagementBaseObject = MObj.InvokeMethod("GetDeviceProperties", Nothing, Nothing)
            For Each r In outParams.Properties("deviceProperties").Value
                If r.Properties("KeyName").Value = "DEVPKEY_Device_Parent" Then
                    Return GetName(r.Properties("Data").Value)
                End If
            Next
        Next
        Return devid
    End Function
    Sub GetGPUs()
        For Each MObj As ManagementObject In getManagementObjects("Win32_VideoController")
            Dim name As String = MObj.Properties("Name").Value.ToString()
            Dim PNPDeviceID As String = MObj.Properties("PNPDeviceID").Value.ToString()
            Debug.WriteLine(name & " - " & GetParent(PNPDeviceID))
        Next
    End Sub 
```

结果是：

```
 NVIDIA GeForce GTX 1060 6GB - Intel(R) Xeon(R) E3 - 1200/1500 v5/6th Gen Intel(R) Core(TM) PCIe Controller (x16) - 1901 
```

# cygwin - 需要更多的眼睛来发现在 Windows 上编译 doxygen 的错误

> ID：15919178
> 
> 赞同：1
> 
> 时间：2013-04-10T07:07:13.840
> 
> 标签：cygwin, doxygen, visual-c++-2008

**概括：**

```
1>Executing Lex for d:\usr\doxygen\src\code.cpp ...
1>flex: can't open ..\src\code.l
1>Project : error PRJ0019: A tool returned an error code from "Executing Lex for d:\usr\doxygen\src\code.cpp ..." 
```

**细节**

我偶尔会编译 Doxygen ( [http://www.doxygen.org/](http://www.doxygen.org/) ) 的源代码以从 SVN 版本发布其 Windows 二进制文件。Visual Studio C++ 2008（即版本 9）用于此目的。由于 Doxygen 源也使用 yacc 和 lex 工具，因此 cygwin bison 和 flex 在过去被成功使用。它停止工作。也就是说，flex 抱怨它找不到它的源（如上面的摘要所示）。我电脑上的 flex 版本是：

```
d:\>flex --version
flex 2.5.35 
```

VS 项目`winbuild\Doxygen.vcproj`配置为启动 flex，Visual Studio 显然为此目的生成了一个批处理文件。构建日志包含以下内容：

```
Creating temporary file "d:\usr\doxygen\winbuild\Debug\BAT00000241406084.bat" with contents
[
@echo off
flex -PcodeYY  -od:\usr\doxygen\src\code.cpp  ..\src\code.l
if errorlevel 1 goto VCReportError
goto VCEnd
:VCReportError
echo Project : error PRJ0019: A tool returned an error code from "Executing Lex for d:\usr\doxygen\src\code.cpp ..."
exit 1
:VCEnd
]
Creating command line "d:\usr\doxygen\winbuild\Debug\BAT00000241406084.bat" 
```

从命令行手动尝试命令时，我确实可以观察到相同的情况：

```
d:\usr\doxygen\src>flex -PcodeYY  -od:\usr\doxygen\src\code.cpp  ..\src\code.l
flex: can't open ..\src\code.l 
```

但是，当用`code.l`普通斜杠替换路径中的反斜杠时，它可以工作：

```
d:\usr\doxygen\src>flex -PcodeYY  -od:\usr\doxygen\src\code.cpp  ../src/code.l 
```

我不确定 flex 版本中反斜杠与斜杠的问题是否是新引入的错误/功能。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:30:12.683

我更加努力地找到了原因。`cygwin`过去实际上对我有用。它仍然适用于反斜杠——它只显示一个关于更好地使用 POSIX 路径的警告。

原因是，我安装了更多工具，带来了更多`flex.exe`实用程序。第一个是`msysGit`安装的一部分，第二个来自*Ruby Development Kit*。它们都不支持路径中的反冲。重命名后，Doxygen 再次开始编译。

事实上，GnuWin 在`flex.exe`没有任何警告的情况下使用反斜杠——我现在更喜欢它。

# javascript - 在用户清除缓存之前，如何让我的网站预加载器只出现一次？

> ID：15919182
> 
> 赞同：1
> 
> 时间：2013-04-10T07:07:25.607
> 
> 标签：javascript, css

我的网站有一个预加载器，它运行良好。它只附加到主页，但是，每当我回到主页时，预加载器就会再次出现。我希望一旦站点（主页）已经被缓存，预加载器就不会出现。

[这是我的网站](http://www.healthtravelexpo.com)

这是我的javascript：

```
<script type="text/javascript">
 //<![CDATA[
 $(window).load(function() { 
 $("#status").fadeOut(); 
 $("#preloader").delay(350).fadeOut("slow"); 
 })
 //]]>
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:33:05.110

我参考了这个链接： [http](http://www.w3schools.com/js/js_cookies.asp) ://www.w3schools.com/js/js_cookies.asp 你可以使用javascript函数来实现

**演示：**

```
<script type="text/javascript">
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
  {
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
}

function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

 //<![CDATA[
 $(window).load(function() { 

if(!getCookie("loaded")){ 
```

**编辑**

```
 //Show element only if the cookie is absent.
 $("#preloader").show();
 $("#status").fadeOut(); 
 $("#preloader").delay(350).fadeOut("slow"); 
//property name , value and no of expiration days
setCookie("loaded",true,365);
    }
else{
    $("#preloader").hide();
    $("#status").hide();
}

 })
 //]]>
 </script> 
```

**编辑：** 您还可以通过设置**预加载**`display:none`器元素来初始化默认隐藏的元素。然后通过 javascript 将仅在 cookie 不存在时显示该元素。请参阅我在代码中的编辑。

# wpf - 用于 Pivot 的简单 MVVM

> ID：15919183
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:07:27.490
> 
> 标签：wpf, windows-phone-7, mvvm

我对 Windows Phone 开发非常陌生，我正在尝试使用 Pivot，但面临数据绑定问题。我想在导航时更改我的 Pivot Item 数据。谁能帮我为 Pivot 创建一个简单的 MVVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:39:03.707

首先，你必须阅读并理解[这篇文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

然后尝试了解如何使用现有的 mvvm 工具包，例如[MVVM Light](http://mvvmlight.codeplex.com/)或[Caliburn.Micro](http://caliburnmicro.codeplex.com/)。

您应该对如何使用 MVVM 有一个很好的了解，然后您就可以自己解决您的问题。

希望有帮助。

编辑：还要检查[这个有用的问题](https://stackoverflow.com/questions/1662309/good-examples-of-mvvm-template?rq=1)。

# spring-mvc - java.lang.IllegalStateException：Bean 名称“RegistrationBean”的 BindingResult 和普通目标对象都不能用作请求属性

> ID：15919188
> 
> 赞同：0
> 
> 时间：2013-04-10T07:07:34.883
> 
> 标签：spring-mvc, spring-annotations

我得到了这个例外：

```
 java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'RegistrationBean' available as request attribute 
```

这是我的控制器类

```
@Controller
public class TenantRegistrationController {

    @Autowired
    private TenantService tenantService;

    @Autowired
    private UserService userService; 
```

RegistrationBean 是从 jsp 作为模型属性传递的 bean 类。

```
 @RequestMapping(value="/registration", method= RequestMethod.POST)
    public String addNewTenant(@ModelAttribute("RegistrationBean")RegistrationBean registrationBean, 
            BindingResult result, Map<String,Object> map)
    {
        Tenant tenant = new Tenant();

        tenant.setTenant_name(registrationBean.getTenantName());
        tenant.setTenant_email(registrationBean.getTenantEmail());
        tenant.setAddress(registrationBean.getTenantAddress());
//      tenant.setReminder_email(Integer.parseInt(registrationBean.getReminderMail()));
        tenant.setReminder_email(registrationBean.getReminderMail());
        tenant.setThankyou_email(registrationBean.getThankyouMail());

        CurrencyFormat cf = new CurrencyFormat();
        cf.setCurrencyFormatId(registrationBean.getCurrencyFormatId());
        tenant.setTenantCurrencyFormat(cf);

        DateFormat df = new DateFormat();
        df.setDateFormatId(registrationBean.getDateFormatId());
        tenant.setTenantDateFormat(df);

        tenant.setRegistration_date(registrationBean.createRegistrationDate());

        tenantService.addTenant(tenant);

        User user = new User();
        user.setName(registrationBean.getUserName());
        user.setAddress(registrationBean.getUserAddress());
        user.setUser_name(registrationBean.getUserLoginName());
        user.setDesignation(registrationBean.getUserDesignation());
        user.setPassword(registrationBean.getUserPassword());
        user.setEmail(registrationBean.getUserEmail());
        user.setContact_number(registrationBean.getUserContactNo());

        Role urole=new Role();
        urole.setRole_id(1);
        user.setUser_role(urole);

        userService.addUser(user);

        map.put("tenant_name", tenant.getTenant_name());
        return "tenant_registration_success";

    }

    @RequestMapping("/addANewTenant")
    public String showAddTenantPage(Map<String, Object> map)
    {
        /*map.put("item", new Item());
        map.put("itemList", itemService.listitems());*/
        return "add_tenant_details";
    }

} 
```

这是我的 JSP 文件

```
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Tanent Registration and Tanent Administrator Registration</title>
<style>
.error {
color: #ff0000;
font-style: italic;
}
</style>
</head>
<body> 
```

我将名为“RegistrationBean”的 bean 指定为 modelAttribute

```
<h3>Tenant Registration</h3>
<form:form method="post" action="/MTInvoiceManagement/tenant/registration.html" modelAttribute="RegistrationBean">
<table align="left">
       <tr>
              <td>Tenant Name</td>
              <td><form:input path="tenantName" type="text" /></td>
              <td><form:errors path="tenantName" cssClass="error"></form:errors></td>
       </tr>

       <tr>
              <td>Tenant Email</td>
              <td><form:input path="tenantEmail" type="text" /></td>
              <td><form:errors path="tenantEmail" cssClass="error"/></td>

       </tr>
       <tr>
              <td>Tenant Address</td>
              <td><input name="tenantAddress" type="text" /></td>
              <td><form:errors path="tenantAddress" cssClass="error" ></form:errors></td>
       </tr>

       <tr>
              <td>Reminder Mail</td>
              <td>
                     <form:select path="reminderMail">                     
                     <form:option value="0" label="No"  />
                     <form:option value="1" label="Yes" />
                     </form:select>
              </td>
              <td><form:errors path="reminderMail" cssClass="errors"></form:errors></td>
       </tr>

       <tr>
              <td>Thank You Mail</td>
              <td>
                     <form:select path="thankyouMail">
                     <form:option value="0" label="No"></form:option>
                     <form:option value="1" label="Yes"></form:option>
                     </form:select>
              </td>
              <td> <form:errors path="thankyouMail" cssClass="errors"></form:errors>  </td>
       </tr>

       <tr>
              <td>Date Format</td>
              <td>
                     <form:select path="dateFormatId">
                     <form:option value="1" label="DD-MM-YY"></form:option>
                     <form:option value="2" label="MM-DD-YY"></form:option>
                     <form:option value="3" label="YYYY-MM-DD"></form:option>
                     </form:select>
              </td>
              <td><form:errors path="dateFormatId" cssClass="errors"></form:errors></td>
       </tr>

       <tr>
              <td>Currency Format</td>
              <td>
                     <form:select path="currencyFormatId">
                     <form:option value="1" label="$"></form:option>
                     <form:option value="2" label="£"></form:option>
                     <form:option value="3" label="¥"></form:option>
                     <form:option value="4" label="€"></form:option>
                     <form:option value="5" label="₨"></form:option>
                     </form:select>
              </td>
              <td><form:errors path="currencyFormatId" cssClass="errors" ></form:errors></td>
       </tr>

       <tr>
            <td> <h3> Tanent Administrator Details  </h3>  </td>
       </tr>

       <tr>
              <td>Tanent Admin Name</td>
              <td><form:input path="userName" type="text"/> </td>
              <td> <form:errors path ="userName" cssClass="errors"></form:errors> </td>
       </tr>

       <tr>
              <td>Tanent Admin User Login Name</td>              
              <td><form:input path="userLoginName" type="text"/> </td>
              <td> <form:errors path ="userLoginName" cssClass="errors"></form:errors> </td>
       </tr>
       <tr>
              <td>Tanent Admin User Password</td>              
              <td><form:input path="userPassword" type="password"/> </td>
              <td> <form:errors path ="userPassword" cssClass="errors"></form:errors> </td>
       </tr>
       <tr>
              <td>Tanent Admin User Email</td>              
              <td><form:input path="userEmail" type="text"/> </td>
              <td> <form:errors path ="userEmail" cssClass="errors"></form:errors> </td>
       </tr>
       <tr>
              <td>Tanent Admin User Contact No</td>              
              <td><form:input path="userContactNo" type="text"/> </td>
              <td> <form:errors path ="userContactNo" cssClass="errors"></form:errors> </td>
       </tr>
              <tr>
              <td>&nbsp;</td>
              <td>
                     <input name="Submit" type="submit" value="submit" />

              </td>
       </tr>
</table>
</form:form>

</body>
</html> 
```

请帮我！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:40:02.810

显示表单时，您必须将 RegistrationBean 放入模型中。您可以像在公共 String addNewTenant 方法中那样做

```
 @RequestMapping("/addANewTenant")
    public String showAddTenantPage(Map<String, Object> map,@ModelAttribute("RegistrationBean")RegistrationBean registrationBean) 
```

如果您需要对表单对象进行相同的特殊初始化，您可以使用 @ModelAttribute 注释定义方法来处理表单对象的初始化。

```
@ModelAttribute
public RegistrationBean getRegistrationBean() {

} 
```

# ios - 用故事板以两种不同的方式连接相同的视图

> ID：15919193
> 
> 赞同：0
> 
> 时间：2013-04-10T07:07:50.560
> 
> 标签：ios, storyboard, tabbar, uitapgesturerecognizer

对不起我的英语，我的问题是：

我最近开始开发应用程序，也许我的问题很愚蠢。

我正在尝试开发一个带有标签栏的应用程序，在我的“家”中，有一些图像在同一个视图中连接（当被点击时），这些图像也与标签栏连接。

为了更好地解释我的想法，我在有连接的地方附上了我的故事板的图像（点击下面的链接）。

[http://www.manuelragazzini.it/mystoryboard.png](http://www.manuelragazzini.it/mystoryboard.png)

这可行，但问题是当我使用“点击手势识别器”将图像从“家”连接到另一个视图时，当我点击我的图像时，它会加载“标签 2”视图但没有标签栏，标签栏消失。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:48:56.707

完毕。创建自定义 segue 类（来自 UIStoryboardSegue 的子类）。

.h 文件

```
#import <UIKit/UIKit.h>

@interface CustomSegueOpenTab : UIStoryboardSegue

@end 
```

.m 文件

```
#import "CustomSegueOpenTab.h"

@implementation CustomSegueOpenTab

-(void)perform
{
    UIViewController *src = [self sourceViewController];

    UITabBarController *tabbarController =  (UITabBarController *)[src tabBarController];
    [tabbarController setSelectedViewController: (UIViewController *)[tabbarController.viewControllers objectAtIndex:1]];
}

@end 
```

src - 家庭视图控制器。您可以参考它的 tabbarController 属性并获取 tabbarController 对象。然后只需选择您需要的项目。

创建 segue 后，将图像手势操作与情节提要中的 tabbarController 连接，选择“自定义”。

顺便说一句，看起来哪个控制器将成为情节提要中手势动作的目的地并不重要，因为我们仅引用源视图控制器（home）。

# web-services - 如何连接到 APNS 以更新通行证

> ID：15919194
> 
> 赞同：0
> 
> 时间：2013-04-10T07:07:57.930
> 
> 标签：web-services, ios6, apple-push-notifications, passbook

我正在做服务器以更新通行证。现在我想向 APNS 发送通知，但它不起作用。这是来自 php_error.log 的错误： `[10-Apr-2013 08:59:24 Europe/Berlin] PHP Warning: stream_socket_client(): Unable to set private key file` ``/Applications/MAMP/htdocs/passesWebserver/certificatePass.pem' in /Applications/MAMP/htdocs/passesWebserver/pushNotification.php on line 32`
`[10-Apr-2013 08:59:24 Europe/Berlin] PHP Warning: stream_socket_client(): failed to create an SSL handle in /Applications/MAMP/htdocs/passesWebserver/pushNotification.php on line 32`
`[10-Apr-2013 08:59:24 Europe/Berlin] PHP Warning: stream_socket_client(): Failed to enable crypto in /Applications/MAMP/htdocs/passesWebserver/pushNotification.php on line 32`
`[10-Apr-2013 08:59:24 Europe/Berlin] PHP Warning: stream_socket_client(): unable to connect to ssl://gateway.sandbox.push.apple.com:2195 (Unknown error) in /Applications/MAMP/htdocs/passesWebserver/pushNotification.php on line 32`

//第 32 行： $tSocket = stream_socket_client('ssl://' . $tHost . ':' . $tPort, $error, $error_string, 2, STREAM_CLIENT_CONNECT, $tContext);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:05:25.057

使用您在评论中提供的代码，尝试：

```
$tToken = $row['pushToken']; 
$payload = json_encode (array("aps" => ""));
$tCert = '/path/to/combined/cert/and/key/file.pem';
$tPassword = 'your certificate password'; 

// Create the and config the socket context. 
$tContext = stream_context_create (); 
stream_context_set_option ($tContext, 'ssl', 'local_cert', $tCert);
if (strlen($tPassword))
    stream_context_set_option($tContext, 'ssl', 'passphrase', $tPassword);

// Compose and pack the push message
$apns_message = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $tToken)) . chr(0) . chr(mb_strlen($payload)) . $payload;

// Connect and write the push message to the connection
$ConnectAPNS = stream_socket_client('ssl://gateway.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $streamContext);
$success = fwrite($ConnectAPNS, $apns_message);

if ($success)
    error_log(date('d-m-Y hh:ii:ss', time()) . ': APNS Message successfully sent to device token' . $tToken, 0);
else
    error_log(date('d-m-Y hh:ii:ss', time()) . ': Push error:' . $err . ': ' . $errstr); 
```

# php - 禁用和启用 onclick 事件不适用于多行

> ID：15919195
> 
> 赞同：1
> 
> 时间：2013-04-10T07:08:10.550
> 
> 标签：php, javascript, html, mysql, database

我正在做一个php项目，

好吧，我需要帮助，比如我有 10 条记录将数据更新到数据库，请参见下面的诊断 -

![在此处输入图像描述](https://i.stack.imgur.com/cE9HK.png)

现在就像你看到的 No_Info 选项一样，上面写着：No_Data 和 Available。

因此，当用户单击 ID:1 的 No_data 时，它会禁用附加到相应 ID 的字段。和相同的可用作品。

但它只适用于 ID: 1 ，没有其他行它的工作.....

编辑：在此处更新代码。

```
>>>> <?php
//connect to the database server
$objConnect = mysql_connect("localhost","root","") or  die(mysql_error()); 
//select the database 
$objDB = mysql_select_db("main_project"); 
//select which data you want to get.
$sql           = "SELECT * FROM website_maindb";
$objQuery      = mysql_query($sql);
// $Ct = mysql_query('select * from company_type');
/* $objResult     = mysql_fetch_array($objQuery);   // Not to use when using loop to call full database */
?>
  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <title>ss</title>
    <script>
function disable()
{
document.getElementById("noi1").disabled=true;
document.getElementById("noi2").disabled=true;
document.getElementById("noi3").disabled=true;
document.getElementById("noi4").disabled=true;
document.getElementById("noi5").disabled=true;
document.getElementById("noi6").disabled=true;

}
function enable()
{
document.getElementById("noi1").disabled=false;
document.getElementById("noi2").disabled=false;
document.getElementById("noi3").disabled=false;
document.getElementById("noi4").disabled=false;
document.getElementById("noi5").disabled=false;
document.getElementById("noi6").disabled=false;
}
</script>
    </head>
    <body>

<form id="form" action="insert.php" method="post">
<table width="700" border="1">  
<tr> 
<th></th>  
<th width="20"> <div align="center">ID </div></th>  
<th width="98"> <div align="center">website </div></th> 
<th width="98"> <div align="center">category </div></th>
<th width="98"> <div align="center">email </div></th>
<th width="98"> <div align="center">contact form </div></th> 
<th width="98"> <div align="center">Primary No. </div></th> 
<th width="98"> <div align="center">Secondary No. </div></th> 
<th width="98"> <div align="center">fax </div></th> 
<th width="98"> <div align="center">Company type </div></th> 
<th width="98"> <div align="center">No_Info </div></th> 
<th width="98"> <div align="center">time </div></th> 
</th>  
</tr>
<?php
$options = '';
$Ctype=mysql_query("select distinct typec from company_type");
while($row = mysql_fetch_array($Ctype)) {
    $options .="<option>" . $row['typec'] . "</option>";
}
?>

<?php 
$i = 0;  
while($objResult = mysql_fetch_array($objQuery))  
{  
$i++;  
?>  
<tr>  
<td><input type="hidden" name="WID" value="<?=$objResult["WID"];?>"></td>  
<td><label><input type="text" name="ID" value="<?=$objResult["WID"];?>" disabled></label></td>  
<td><input type="text" name="website" value="<?=$objResult["website"];?>"></td> 
<td><input type="text" name="cat" size="10"></td> 
<td><input type="text" id="noi1" name="email" size="10"></td> 
<td><input type="text" id="noi2" name="cform" size="10"></td>  
<td><input type="text" id="noi3" name="contactp" size="10"></td>  
<td><input type="text" id="noi4" name="contacts" size="10"></td>  
<td><input type="text" id="noi5" name="fax" size="10"></td>  
<td><select id="Ctype" name="Ctype"> <?="  $options  "?> </select></td>  
<td><button type="button" onclick="disable()" size="20">No_Data</button> </br>
<button type="button" onclick="enable()" size="20">Available</button> 
</td>  
<td><input type="text" id="noi6" name="time" size="10"></td>  
</tr> 
<?php  
}  
?> 
<button type="submit" id="send">Submit</button>
</form>
</table>
</body>
</html> 
```

谁能帮忙解决。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:33:38.457

你做的有点不对。您必须在数组中构建表单字段。像这样：

`<input type="text" id="noi1_<?php echo $i; ?>" name="email[]" size="10">`

.

你的按钮是这样的：

`<button type="button" onclick="disable('<?php echo $i; ?>')" size="20">No_Data</button>`

.

然后，在你的 JS 中：

```
function disable(idx)
{
  document.getElementById("noi1_"+idx).disabled=true;
  .
  . 
```

. .

最后，当您在 $_POST 中收到表单时，您将获得 $_POST['email'] 作为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T05:03:00.357

```
**Please Share the Enable code...**

$(document).ready(function() {

$("#submit").click(function() {
var name = $("#name").val();
var cname = $("#cname").val();
var email = $("#email").val();
var contact = $("#contact").val();
var msg = $("#msg").val();
if (name == '' || cname == ''|| email == '' || contact == '' ||  msg == '') {
alert("Insertion Failed Some Fields are Blank....!!");
} else {
// Returns successful data submission message when the entered information is stored in database.

$.post("re.php", {
name1: name,
cname1: cname,
email1: email,
contact1: contact,
msg1: msg
}, function(data) {
alert(data);
//$('#form')[0].reset(); // To reset form fields

});

}

});
function NextButton() {        

mySubmitButton = document.getElementById("submit");        

mySubmitButton.click();

myOpenButton = document.getElementById("form1");       

myOpenButton.click();    

 }
$("#submit").click(function(){

    $("#name").prop("disabled",true);
    $("#cname").prop("disabled",true);
    $("#email").prop("disabled",true);
    $("#contact").prop("disabled",true);
    $("#msg").prop("disabled",true);
});

$("#submit1").click(function() {
var name3 = $("#name3").val();
var cname3 = $("#cname3").val();
var email3 = $("#email3").val();
var contact3 = $("#contact3").val();
var msg3 = $("#msg3").val();
if (name3 == '' || cname3 == ''|| email3 == '' || contact3 == '' ||  msg3 == '') {
alert("Insertion Failed Some Fields are Blank....!!");
} else {
// Returns successful data submission message when the entered information is stored in database.

$.post("re.php", { 
name4: name3,
cname4: cname3,
email4: email3,
contact4: contact3,
msg4: msg3
}, function(data) {
alert(data);
//$('#form')[0].reset(); // To reset form fields

});
}
});
$("#submit1").click(function(){

    $("#name3").prop("disabled",true);
    $("#cname3").prop("disabled",true);
    $("#email3").prop("disabled",true);
    $("#contact3").prop("disabled",true);
    $("#msg3").prop("disabled",true);
});
}); 

This code for a disable value coding please share the value enable coding 
```

# android - 如何在android中调用web服务

> ID：15919197
> 
> 赞同：0
> 
> 时间：2013-04-10T07:08:12.823
> 
> 标签：android, asp.net, web-services, unit-testing, tree

我的队友在其中开发了一个应用程序，`Asp.NET`并在其中编写了 Web 服务。我的主管告诉我从 Android 调用这些服务。我在 Google 上进行了广泛搜索，但我无法理解如何从 Android 调用 Web 服务。

Asp.Net Web 服务有：

“GenerateTreeFromXMLWebService.asmx”网络服务类

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.IO;
using System.Xml.Linq;

namespace UnitTestWebApp
{
    /// <summary>
    /// Summary description for GenerateTreeFromXMLWebService
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class GenerateTreeFromXMLWebService : System.Web.Services.WebService
    {
        Node node = new Node();

        XDocument xDoc = new XDocument();
        string xml;   //to save the xml data value

        // this method is for reading xml from file and storing it in a string
        public GenerateTreeFromXMLWebService()
        {
            xml = File.ReadAllText("E:\\Unit Testing\\AdWordsTestsnew.xml");
            xDoc = XDocument.Parse(xml);
        }

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }
        //this method is used to separate parent nodes with their child from xml file
        [WebMethod]
        public Node generateXMLTree()
        {

            XElement rootElement = xDoc.Element("Node");

            node.ResultName = rootElement.Attribute("result").Value;
            node.MethodName = rootElement.Attribute("name").Value;

            if (rootElement.HasElements)
                generateChild(node, rootElement);

            return node;

        }
        //this method is used for making child nodes
        void generateChild(Node node, XElement rootElement)
        {

            foreach (XElement a in rootElement.Elements("Node"))
            {
                Node K = new Node();
                K.ResultName = a.Attribute("result").Value;
                K.MethodName = a.Attribute("name").Value;

                node.AddChild(K);
                //this recursion is for making inner child node of the child functions
                generateChild(K, a);
            }
        }

    }
} 
```

Service.cs 类：

```
namespace GenerateTree
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the interface name "IService1" in both code and config file together.
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        // TODO: Add your service operations here
    }

    // Use a data contract as illustrated in the sample below to add composite types to service operations
    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }
} 
```

我如何调用这些服务？任何教程链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:12:20.977

如果是 .net soap-web-service 那么这个 url 可以帮助你。

[http://gafurbabu.wordpress.com/2012/05/28/how-to-call-soap-web-service-with-android-only-soap-service-not-rest-service/](http://gafurbabu.wordpress.com/2012/05/28/how-to-call-soap-web-service-with-android-only-soap-service-not-rest-service/)

谢谢。

# delphi - 捕获应用程序输出 Delphi

> ID：15919198
> 
> 赞同：2
> 
> 时间：2013-04-10T07:08:12.793
> 
> 标签：delphi, delphi-xe2

我是一名意大利程序员（我从 2 周开始就开始了一份新工作）。我必须制作一个程序，允许我从触摸屏显示器打印一些票并付款。对于付款，我使用现金流 mei 型号 7900。现在的问题是没有一些 delphi 的代码示例，API 演示是用 c# 编写的。我想通过捕获输出并将其输入到我的 delphi 应用程序中来使用 exe 演示与现金流进行通信。例如在 delphi 中，我可以捕获控制台的输出并输入到文本框，我想捕获演示应用程序的命令启动并输入到我的 delphi 应用程序中，这将做一些事情。可能吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:34:07.830

SO上有一些类似的问题，请从他们开始：

[Delphi 2009 及更高版本中的捕获控制台](https://stackoverflow.com/q/4905450/850848)
[如何从外部控制台应用程序中读取？](https://stackoverflow.com/q/3526994/850848)
[Delphi 6 - 在运行时读取控制台应用程序的输出](https://stackoverflow.com/q/1212176/850848)

# php - 在PHP中按日期对多维数组进行排序

> ID：15919199
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:08:13.443
> 
> 标签：php, json, multidimensional-array

我想按日期对 PHP 中的数组进行排序，然后以 JSON 格式输出。我的数组包含很多“帖子”。这是当我对当前数组进行 json_encode 并将其作为 json 回显时它当前的显示方式。我想我可能不得不使用 usort() 但我不知道该怎么做。

我已经尝试过这个建议[PHP 按包含日期的元素对多维数组进行排序，](https://stackoverflow.com/questions/2910611/php-sort-a-multidimensional-array-by-element-containing-date)但它对我不起作用。请任何人都可以帮忙。谢谢

```
{
"post": [
    {
        "title": "Title 1",
        "date": {
            "strdate": "2013-04-09",
            "dayname": "Tue"
        }
    },
    {
        "title": "Title 2",
        "date": {
            "strdate": "2013-04-08",
            "dayname": "Mon"
        }
    }
] 
```

}

我在 PHP 中的数组如下所示：

```
 <?php 

    Array
    (
        ["post"] => Array
            (
                [0] => Array
                    (
                        ["title"] =>   Title 
                        ["date"] => Array
                            (
                                ["strdate"] => 2013-04-09
                                ["month"] => 04
                                ["dayname"] => Tue
                            )

                    )

                [1] => Array
                    (
                        ["title"] =>   Title2 
                        ["date"] => Array
                            (
                                ["strdate"] => 2013-04-08
                                ["dayname"] => Mon
                            )

                    )

            )

    )

     ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:10:52.203

```
usort($array['post'], function ($a, $b) {
    return strtotime($b['date']['strdate']) - strtotime($a['date']['strdate']);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:12:19.730

[从这里](http://chicalicdan.blogspot.fi/2011/02/sort-time-date-inside-multidimensional.html)试试这个，

```
function mysort($a, $b)
{
   return(strtotime($b['timestamp']) - strtotime($a['timestamp']));
}

// Convert first date & time to UNIX timestamp

$t1 = mktime(2, 30, 0, 7, 1, 2011);
$t2 = mktime(3, 30, 0, 7, 1, 2011);
$t3 = mktime(4, 30, 0, 7, 1, 2011);

// Store data to a Multidimensional Arrays
$testArray = array(
    "testing3" => array("timestamp" => $t1, 
                        "name" =>"testing3"),

    "testing" => array("timestamp" => $t2, 
                       "name" =>"testing"),

    "testing2" => array("timestamp" => $t3, 
                        "name" =>"testing2")
    );

usort($testArray, 'mysort');

echo "<pre>";
print_r($testArray);

echo "

";

foreach($testArray AS $row){

 $date = $row['timestamp'];
 echo date("d/m/y : H:i:s a",$date)."
";
} 
```

也可以看看：

*   [PHP按包含日期的元素对多维数组进行排序](https://stackoverflow.com/questions/2910611/php-sort-a-multidimensional-array-by-element-containing-date)
*   [如何在 PHP 中对多维数组进行排序](https://stackoverflow.com/questions/96759/how-do-i-sort-a-multidimensional-array-in-php)

# google-fusion-tables - 尝试在融合表中创建表返回无效凭据

> ID：15919201
> 
> 赞同：2
> 
> 时间：2013-04-10T07:08:38.680
> 
> 标签：google-fusion-tables, google-api-python-client

***这是 google 中给出的示例代码的更改代码，用于通过 python 访问 Fusion 表。我想在融合表中创建表，然后插入数据......使用发布请求我设法编写以下代码通过发送发布请求来创建表。但这会返回“无效凭据”错误，并且位置是 > Header。请帮助...或建议一个简单的代码来创建表并插入 Fusion 表（数据在 txt 文件中）。我对此很陌生。请帮助。***

完整代码：

```
#!/usr/bin/python

# Copyright (C) 2011 Google Inc.

""" Demostrates use of the new Fusion Tables API

"""

import urllib2, urllib, simplejson, sys, httplib

client_id = "996027904153.apps.googleusercontent.com"
client_secret = "secret-given"#
redirect_uri = "my localhost"
api_key = "my api_key is given"
tableid = "1jCqbPu5PjNsczx7cDl3y9EJtSUgNePbvXT7-x70"

class RunAPITest:
    def __init__(self):
        self.access_token = ""
        self.params = ""

    def main(self):
        print "copy and paste the url below into browser address bar and hit enter"
        print "https://accounts.google.com/o/oauth2/auth?%s%s%s%s" % \
            ("client_id=%s&" % (client_id),"redirect_uri=%s&" % (redirect_uri),
  "scope=https://www.googleapis.com/auth/fusiontables&","response_type=code")
        code = raw_input("Enter code (parameter of URL): ")
        data = urllib.urlencode({
           "code": code,
           "client_id": client_id,
            "client_secret": client_secret,
              "redirect_uri": redirect_uri,
               "grant_type": "authorization_code"
                        })
        serv_req = urllib2.Request(url="https://accounts.google.com/o/oauth2/token",
             data=data)
        serv_resp = urllib2.urlopen(serv_req)
        response = serv_resp.read()
        tokens = simplejson.loads(response)
        access_token = tokens["access_token"]
        print access_token
        self.access_token = access_token
        print "CREATE TABLE"
        data='''{ "name": "Insects","columns": [{"name": "Species","type": "STRING"},{"name":                      "Elevation","type": "NUMBER"},{"name": "Year","type": "DATETIME"}],"description": "Insect Tracking Information.","isExportable": "true"}'''
        headers={}
        headers['Authorization']=access_token
        headers['Content-Type']='application/json'
        print headers
        response = self.runRequest("POST","/fusiontables/v1/tables/",data,headers)
        json_response = simplejson.loads(response)
        return json_response

   def runRequest(self, method, url, data=None, headers=None):
        request = httplib.HTTPSConnection("www.googleapis.com")
        if data and headers: 
                  request.request(method, url, data, headers)
        else: 
                  request.request(method, url)
        response = request.getresponse()
        print response.status, response.reason
        response = response.read()
        print response
        return response

if __name__ == "__main__":
        api_test = RunAPITest()
        api_test.main() 
```

# html - Web 应用程序的离线数据输入

> ID：15919209
> 
> 赞同：0
> 
> 时间：2013-04-10T07:08:53.417
> 
> 标签：html, caching, local-storage, offline-caching, offline-browsing

我正在开发一个 php 数据输入 Web 应用程序，该应用程序需要具有离线数据输入功能，因为它将用于互联网不稳定的地方。也就是说，用户应该可以选择将数据输入到系统中，即使他们没有在线，一旦他们重新上线就会同步。

我想到了一些想法

*   使用 HTML5 离线功能
*   使用excel表格并将其上传到系统中

我无法选择使用哪种方法，有人对我可以使用什么有任何想法，为什么？甚至对任何方法的想法？

# multithreading - 如何中断Scala中的任务？

> ID：15919213
> 
> 赞同：5
> 
> 时间：2013-04-10T07:09:10.147
> 
> 标签：multithreading, scala, actor

据我了解`Scala Actors` *，不能*被打断。现在假设我有一个超时任务。如果任务没有在超时时间内完成，我应该停止它。

假设任务是可*中断*的（例如，在可中断的通道上执行阻塞 i/o）。在 Java 中，我可以在单独的线程中运行任务并在超时时中断线程。

我可以这样做`Scala Actors`吗？我应该改用 Java 线程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:22:13.820

如果您精确地遵循 Actor 模型，您将无法打断 Actor。那就是：如果你不想分享。[例如，如何](https://stackoverflow.com/questions/7420753/how-to-cancel-an-akka-actor)通过使用 AtomicBoolean 取消 Akka 演员答案中提出了这一点。

但是一般的答案是：您正在尝试在参与者中使用 Java 线程习语。这是错误的。您应该将工作分成更小的批次，而不是长时间运行的任务。

来自[Akka 文档](http://doc.akka.io/docs/akka/snapshot/general/actor-systems.html)，Actor Best Practices：

> 演员应该像好同事一样：高效地完成工作，避免不必要地打扰其他人，避免占用资源。转换为编程，这意味着以事件驱动的方式处理事件并生成响应（或更多请求）。Actor 不应阻塞（即在占用线程时被动等待）某个外部实体（可能是锁、网络套接字等），除非它是不可避免的；在后一种情况下，请参见下文。

你能用 Scala Actors 做到这一点吗？不，您会遇到同样的问题，因为您的问题是概念性的，与框架实现无关。

您应该改用 Java 线程吗？如果您想遵循 Java 线程习语，那么可以：去吧。但是如果你想使用 Actor 并发，你必须采用不同的思维模型来获得所有的好处。

# c - 在系统命令中使用命令行参数

> ID：15919218
> 
> 赞同：2
> 
> 时间：2013-04-10T07:09:20.080
> 
> 标签：c, unix, system, reverse

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
main(int argc,char *argv[]){
int i,j;
for (i=0;i<argc;i++){
printf("Name: %s\n",argv[i]);
    char name[100];
    sprintf(name,"echo"| rev, argv[i]);
    system(name);

}

}; 
```

我有这个，我的问题是如何反转名称存储在 argv[i] 中的文件，我想要的是执行一个执行此命令“rev argv[i]”的子进程？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:11:25.487

你有正确的想法来使用`sprintf`. 但它需要一个格式说明符，就像它一样`printf`。And`|`是一个按位或运算符，在这里没有任何意义（如果它被定义，它会产生一个*残缺*的指针）。

```
snprintf(name, sizeof(name), "rev %s", argv[i]); 
```

* * *

如果要修改名称为 in 的文件，`arg[i]`则不能只将输出重定向到同一个文件中，因为 shell（用于`system`执行命令）同时打开两个文件，并且打开一个用于写入的文件会截断其长度。因此，您需要将输出重定向到不同的文件，然后在单独的命令中复制回原始文件。

```
snprintf(name, sizeof(name), "rev %s > %s.modified", argv[i], argv[i]);
system(name);
snprintf(name, sizeof(name), "mv %s.modified %s", argv[i], argv[i]);
system(name); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T07:11:06.813

认为你需要换线`sprint()`

```
sprintf(name,"rev %s", argv[i]); 
```

好吧，您也应该在正确的参数上执行此操作，对所有参数执行此操作可能不是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:22:33.860

请确保您使用 sprintf

它必须带有一个字符串，它显示了一些不纯的东西！检查相同。

# apache - 使用 Apache 重定向 400 个 URL

> ID：15919223
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:09:27.480
> 
> 标签：apache, .htaccess, redirect, mod-alias

我需要永久重定向大约 400 个 URL。最好的方法是什么？最明显的解决方案是将 400 行“重定向 301 old-url new-url”添加到 .htaccess。有没有更好的办法？

示例网址：

**其中 50 个：**

```
/category -> /new-category-name-c/ 
```

**其中大约 350 个：**

```
/category/subcategory/product.html -> /slightly-different-product-name.html 
```

编辑：添加示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:05:01.910

您可以创建一个 PHP（或任何其他）脚本来处理所有不存在的页面。它将检测旧 URL 并返回 301 重定向到新 URL。

如果 regexp 无法解析旧 URL，则需要创建一个映射，如下所示：

```
$urlMap = array(
    '/category1' => '/new-category1',
    '/category2' => '/new-category2'
); 
```

并从中查找新的 URL。如果 URL 不在地图中，则返回 404 标头或重定向到其他地方..

您可以使用该`ErrorDocument`指令定义自定义 404 页面：

```
ErrorDocument 404 /process-urls.php 
```

您可以从中获取路径`$_SERVER['REQUEST_URI']`。

### 更新

正如@faa 所建议的，您可以使用[`RewriteMap`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)apache 指令。您需要创建一个*txt*文件，该文件将从旧 URL 映射到新 URL，每行一个映射，空格分隔：

```
/category1 /new-category-1
/category2 /new-category-2 
```

然后，在您的**虚拟主机文件**中，声明地图：

```
RewriteMap examplemap txt:/path/to/file/map.txt 
```

以及重写规则（可以放在*.htaccess*中）：

```
RewriteCond ${examplemap:%{REQUEST_URI}|0} !=0
RewriteRule ^(.*) ${examplemap:$1|/not_found.html} 
```

这种方法比将 400 条重写规则放入*.htaccess*更容易维护。

# javascript - 根据传单给定的地址获取纬度和经度

> ID：15919227
> 
> 赞同：25
> 
> 时间：2013-04-10T07:09:46.043
> 
> 标签：javascript, leaflet

在我的项目中，我使用传单来显示点。

我正在从我的数据库中获取地址并希望显示该特定地址的点。

根据提供的地址，我没有找到任何可以给我纬度和经度的东西。

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-12-11T23:00:47.747

如果您想为此使用 OpenStreetmaps，您可以简单地发出请求（使用 jquery）：

```
 $.get(location.protocol + '//nominatim.openstreetmap.org/search?format=json&q='+address, function(data){
       console.log(data);
    }); 
```

您将获得包含（不仅）纬度和经度的 JSON 对象。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-07-17T07:35:02.407

无需额外插件的解决方案。只有 Leaflet 和纯 JavaScript。拖动标记或输入地址会为您提供坐标。如果您对 nominatim 请求有疑问，只需将 https 更改为 http。在这里演示：http: [//yellowthailand.com/leafletgeo.html](http://yellowthailand.com/leafletgeo.html)

```
<html>
<head>
<title>Leaflet Address Lookup and Coordinates</title>
<meta charset="utf-8">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<style type="text/css">
html, body { width:100%;padding:0;margin:0; }
.container { width:95%;max-width:980px;padding:1% 2%;margin:0 auto }
#lat, #lon { text-align:right }
#map { width:100%;height:50%;padding:0;margin:0; }
.address { cursor:pointer }
.address:hover { color:#AA0000;text-decoration:underline }
</style>
</head>
<body>
<div class="container">

<b>Coordinates</b>
<form>
<input type="text" name="lat" id="lat" size=12 value="">
<input type="text" name="lon" id="lon" size=12 value="">
</form>

<b>Address Lookup</b>
<div id="search">
<input type="text" name="addr" value="" id="addr" size="58" />
<button type="button" onclick="addr_search();">Search</button>
<div id="results"></div>
</div>

<br />

<div id="map"></div>

</div>

<script type="text/javascript">

// New York
var startlat = 40.75637123;
var startlon = -73.98545321;

var options = {
 center: [startlat, startlon],
 zoom: 9
}

document.getElementById('lat').value = startlat;
document.getElementById('lon').value = startlon;

var map = L.map('map', options);
var nzoom = 12;

L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: 'OSM'}).addTo(map);

var myMarker = L.marker([startlat, startlon], {title: "Coordinates", alt: "Coordinates", draggable: true}).addTo(map).on('dragend', function() {
 var lat = myMarker.getLatLng().lat.toFixed(8);
 var lon = myMarker.getLatLng().lng.toFixed(8);
 var czoom = map.getZoom();
 if(czoom < 18) { nzoom = czoom + 2; }
 if(nzoom > 18) { nzoom = 18; }
 if(czoom != 18) { map.setView([lat,lon], nzoom); } else { map.setView([lat,lon]); }
 document.getElementById('lat').value = lat;
 document.getElementById('lon').value = lon;
 myMarker.bindPopup("Lat " + lat + "<br />Lon " + lon).openPopup();
});

function chooseAddr(lat1, lng1)
{
 myMarker.closePopup();
 map.setView([lat1, lng1],18);
 myMarker.setLatLng([lat1, lng1]);
 lat = lat1.toFixed(8);
 lon = lng1.toFixed(8);
 document.getElementById('lat').value = lat;
 document.getElementById('lon').value = lon;
 myMarker.bindPopup("Lat " + lat + "<br />Lon " + lon).openPopup();
}

function myFunction(arr)
{
 var out = "<br />";
 var i;

 if(arr.length > 0)
 {
  for(i = 0; i < arr.length; i++)
  {
   out += "<div class='address' title='Show Location and Coordinates' onclick='chooseAddr(" + arr[i].lat + ", " + arr[i].lon + ");return false;'>" + arr[i].display_name + "</div>";
  }
  document.getElementById('results').innerHTML = out;
 }
 else
 {
  document.getElementById('results').innerHTML = "Sorry, no results...";
 }

}

function addr_search()
{
 var inp = document.getElementById("addr");
 var xmlhttp = new XMLHttpRequest();
 var url = "https://nominatim.openstreetmap.org/search?format=json&limit=3&q=" + inp.value;
 xmlhttp.onreadystatechange = function()
 {
   if (this.readyState == 4 && this.status == 200)
   {
    var myArr = JSON.parse(this.responseText);
    myFunction(myArr);
   }
 };
 xmlhttp.open("GET", url, true);
 xmlhttp.send();
}

</script>

</body>
</html>
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-10T07:21:34.133

已经为 Leaflet 开发了一个很棒的地理编码器。

[https://github.com/smeijer/L.GeoSearch](https://github.com/smeijer/L.GeoSearch)

您可以轻松地使用结果，例如

```
map.on('geosearch_showlocation', function (result) {
    L.marker([result.x, result.y]).addTo(map)
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T14:39:33.810

不使用任何插件的另一种解决方案。我正在从 Mongo DB 读取数据，然后使用 Javascript、Angular（不是必需的）和 Leaflet 库来绘制我们从 Mongo DB 获得的坐标的标记。

**HTML**

只显示传单 div 和我们传递用户日期和电子邮件的 onclick 事件。此信息将传递给 MongoDB 以获取用户在给定时间范围内的纬度和经度集

```
<div class="map" leaflet [leafletOptions]="historicalOptions">
        <div *ngFor="let l of historicalLayers" [leafletLayer]="l"></div>
      </div>

<div class="col-lg-3 d-flex justify-content-center align-items-center">
          <button type="button" (click)="getHistoricalData(onDate,fromTime,toTime,user.email)" class="btn btn-primary p-4">
            Get Map
          </button>
        </div> 
```

**代码**

```
ngOnInit() {

this.historicalOptions = {
  layers: [
    tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '...' }),
    this.heatmapLayer
  ],
  center: latLng(xxxxxxx, xxxxxxx),
  zoom: 16
};
}

public getHistoricalData(onDate: Date, fromTime: Date, toTime: Date, userEmail) {

this.historicalLayers = [];
this.apiService.getGPSLocations(fromDate.toISOString(), toDate.toISOString(), userEmail)
    .subscribe(data => {

      if (data && data.length) {

        const markerLayers = this.drawMarkerPlotline(data, 'blue');
        this.historicalLayers = markerLayers;

      }
    }
}

private drawMarkerPlotline(data, color) {
if (data) {
  let rawData;
  if (typeof data === 'string')
    rawData = JSON.parse(data);
  else
    rawData = data;
  const layers = [];
  if (rawData.length) {
    this.heatmapData.data = [];
    rawData.forEach((point, index) => {
      if (point && point.sensorValue && point.sensorValue.attr_lat && point.sensorValue.attr_lng) {
        const markerLayer = marker([point.sensorValue.attr_lat, point.sensorValue.attr_lng], {
          icon: icon({
            iconSize: [15, 15],
            iconAnchor: [7, 7],
            iconUrl: this.getIconPath(color)
          }),
          title: new Date(point.observationTimestamp).toLocaleString(),
        });
        markerLayer.userId = point.userAccount.userId;

        layers.push(markerLayer);

        this.heatmapData.data.push({
          lat: point.sensorValue.attr_lat,
          lng: point.sensorValue.attr_lng,
          // count: 1
        });
      }
    });
    this.heatmapLayer.setData(this.heatmapData);

    return [layerGroup(layers)];
  }
}
return null;
}

private getIconPath(color) {
let icon: string;
switch (color) {
  case 'green':
    icon = 'assets/green-circle.png'
    break;
  case 'orange':
    icon = 'assets/orange-circle.png'
    break;
  default:
    icon = 'assets/blue-circle.png'
    break;
}
return icon;
} 
```

**笔记**

代码片段直接取自我的示例应用程序。因此，在需要的地方进行更改以满足您的要求。

# android - 如何使布局具有相同的高度？

> ID：15919228
> 
> 赞同：-3
> 
> 时间：2013-04-10T07:09:48.190
> 
> 标签：android, layout

下面是我的布局 xml 代码：

```
 <LinearLayout
            android:id="@+id/c"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/a"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:orientation="vertical" >
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/b"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:orientation="vertical" >
            </RelativeLayout>
        </LinearLayout> 
```

我在 LinearLayout c 中有 2 个 RelativeLayout，a 和 b。
a 和 b 的高度可能不同。
我想让两个 RelativeLayout 与最高的一个高度相同。
我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:12:56.500

将属性 layout_weightsum = 2 放入布局 c 为布局 a、b 添加 layout_weight 为 1 并删除 a、b 的 layout_height 属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:12:34.133

试试看

```
<LinearLayout
        android:id="@+id/c"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:weightSum="2" >

        <RelativeLayout
        android:id="@+id/a"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/b"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </RelativeLayout>
    </LinearLayout> 
```

希望它的帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:15:32.423

1.  将父`LinearLayout`高度更改为`match_parent`. 给予`wrap_content`将固定`LinearLayout`高度以适应其子视图的大小。

2.  `RelativeLayout`将高度更改为`0dip`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-25T06:34:05.670

使用表格布局它会自动调整它

```
<TableLayout
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="match_parent"
       android:padding="5dp"
       android:shrinkColumns="1"
       android:stretchColumns="1" >

       <TableRow android:id="@+id/tableRow1" >

           <TextView
               android:id="@+id/textView1"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Main Status             "
               android:textAppearance="?android:attr/textAppearanceMedium" />

           <Button
               android:id="@+id/retentionMainStatus"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="CLICK ME" />
</TableRow>
</TableLayout> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T07:20:23.603

试试这个，它会自动为子布局分配相等的空间。

```
<LinearLayout

            android:id="@+id/c"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <RelativeLayout
                android:id="@+id/a"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:orientation="vertical" >
            </RelativeLayout>

            <RelativeLayout
                android:id="@+id/b"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:orientation="vertical" >
            </RelativeLayout>
        </LinearLayout> 
```

# ios - 从 NSData 检索图像

> ID：15919238
> 
> 赞同：0
> 
> 时间：2013-04-10T07:10:25.053
> 
> 标签：ios, encoding, uiimageview, nsdata

我正在开发一个应用程序，我必须在应用程序中解析和显示数据。

我正在以**NSData**的形式获取图像数据，我正在对其进行编码并转换为**UIImage**，以便它可以显示在 UIImageView 上，但是出现问题并且图像没有显示。

以下是我完成的代码，

```
NSData *requestdata = [[[self.resultArray objectAtIndex:indexPath.row] objectForKey:@"profile_image"] dataUsingEncoding:NSUTF8StringEncoding];
// NSLog(@"Data is::%@",requestdata);
UIImage* image = [[UIImage alloc] initWithData:requestdata];
[cell.profilePic setImage:image]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:16:09.090

使用该代码，您无需编码 - 解码任何内容。如果您的意思是图像使用 base64 编码（最常见于 json 中的图像）。然后你需要在初始化图像之前对它们进行解码。

确保它们已编码，如果是，您可以尝试使用下一页中的 NSData 类别进行解码

[http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

# objective-c - 将值设置为类变量并将其放入数组中会更改先前添加的值

> ID：15919239
> 
> 赞同：0
> 
> 时间：2013-04-10T07:10:26.770
> 
> 标签：objective-c, cocoa-touch

我正在编写一个应用程序，它从服务器中提取 XML 文件，存储它，然后解析它以形成一个`UIListView`. 博客文章的名称与其他信息一起存储在 XML 文件中。为了处理数据，我编写了两个类，`Post`（存储博客文章的名称、链接、内容等）和`PostList`（存储`NSMutableArray`所有`Post`对象中的一个以及其他信息）。

我遇到了一个问题，在下面的循环中，（`getPosts`我的类中的方法的一部分`PostList`）每当修改变量时，它都会更改以前循环迭代`aPost`的所有存储值的值。`aPost`

我不明白为什么会这样。谁能解释一下？

```
TBXMLElement *element = tbxml.rootXMLElement;
TBXMLElement *nextElement = element->nextSibling;
NSLog(@"URLs have been set, preparing for parse/input. [PostList.getPosts]");

//Extracts the content of the XML file and saves it to values in the Post Class
do {
    /**********
     * This loop goes through the XML file looking for <item> tags that hold information
     * about the blog posts. It finds <item> tags and scours them for <title>, <description>, 
     * <pubdate>, and <link> tags to put into the class variables for the Post Class (aPost).
     *********/

    NSString *stringElement = [TBXML elementName:element];
    NSLog(@"%@", stringElement);

    //Sorts through the header junk to find the first <item> tag.
    if (![stringElement isEqualToString:@"item"]) {
        if (!(element->firstChild)) {
            if (!(element->nextSibling)) {
                element = nil;
            }
            element = element->nextSibling;
        }
        element = element->firstChild;
    }
    //Once the first <item> tag is found, this code executes.
    else {
        //Now we move to the first child tag and scour its contents and its siblings
        nextElement = [TBXML nextSiblingNamed:@"item" searchFromElement:element];
        element = element->firstChild;
        do {
            //Here it loops over and over until all the parts have been collected.
            stringElement = [TBXML elementName:element];
            if ([stringElement isEqualToString:@"title"]) {
                aPost.name = [TBXML textForElement:element];
            }
            if ([stringElement isEqualToString:@"description"]) {
                aPost.content = [TBXML textForElement:element];
            }
            if ([stringElement isEqualToString:@"link"]) {
                aPost.postURL = [TBXML textForElement:element];
            }
            if ([stringElement isEqualToString:@"pubdate"]) {
                aPost.publicationDate = [TBXML textForElement:element];
            }
            element = element->nextSibling;
        } while (element->nextSibling);
        NSLog(@"%@", [self getName:self.aPost]);
        [self.postsArray insertObject:aPost atIndex:countingIndex];
        countingIndex++;
        element = nextElement;

    }
} while ((element != nil)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:20:56.770

不要将 aPost 定义为头文件中的属性，只需在进入循环的 do 部分后直接定义它，例如：

```
...
else {
    //Now we move to the first child tag and scour its contents and its siblings
    nextElement = [TBXML nextSiblingNamed:@"item" searchFromElement:element];
    element = element->firstChild;
    do {
        Post* aPost = [[Post alloc] init]; // <-- create a new post, don't reuse or class level pointer
        //Here it loops over and over until all the parts have been collected.
        stringElement = [TBXML elementName:element]; 
```

...并删除头文件中的 Post 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:15:56.073

您应该在外观的每次迭代中创建一个新的 Post 元素，否则数组中的所有条目将引用相同的对象，您将值更新到该对象。

```
do {
    //...
    if (...) {
    } else {
        //...
        aPost = [[Post alloc] init];
        do {
            //...
        } while(...)
        //...
    }
    //...
} while(...) 
```

# java - 如何使用变量设置日历

> ID：15919240
> 
> 赞同：0
> 
> 时间：2013-04-10T07:10:31.750
> 
> 标签：java, android

我有一个固定的日历来在我的应用程序中设置月份的星期几。

这里是变量 1。

```
Long date1 = cursor.getLong(12); // first I load a choosen date to a database
//date result is 1365569546000

//then I convert to string
SimpleDateFormat sdfd = new SimpleDateFormat("d");
String day3 = sdfd.format(date1);

SimpleDateFormat sdfm = new SimpleDateFormat("M");
String month3 = sdfm.format(date1);

SimpleDateFormat sdfy = new SimpleDateFormat("yyyy");
String year3 = sdfy.format(date1);

intent.putExtra("days",day3);
intent.putExtra("months",month3);
intent.putExtra("years",year3); 
```

2 新活动。

```
Bundle extras2 = getIntent().getExtras();
        dayWeek = extras2.getInt("days");
        monthWeek = extras2.getInt("months");
        yearWeek = extras2.getInt("years"); 
```

在我使用手动插入并且它起作用之前，结果是**2**。

这是代码。

```
Calendar calFr = Calendar.getInstance(TimeZone.getTimeZone("Asia/Jakarta"));
        calFr.setFirstDayOfWeek(Calendar.MONDAY);
        calFr.set(2013, Calendar.APRIL, 10);
int weekOfMonthFr = calFr.get(Calendar.WEEK_OF_MONTH);
        TextView txtMinggu = (TextView) findViewById(R.id.week);
        txtMinggu.setText(""+weekOfMonthFr); 
```

，但现在我使用变量 EXTRAS 来设置月份的星期几。

这是代码

```
calFr.set(yearWeek, monthWeek, dayWeek); 
```

> 年周 = 2013；
> 
> 月周 = 4;
> 
> 日周 = 10；

但结果是**5**

我想要的结果是**2**

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:34:44.517

> 你得到的输出是正确的..

因为当你设置月份`4` 时`May`

因为月份的值将从 0 开始

在这里检查[常量字段值](http://docs.oracle.com/javase/1.5.0/docs/api/constant-values.html#java.util.Calendar.MAY) 所以

```
January -0
Feb    - 1
Mar    -2
April  -3
May -   4 
```

所以`May 10th is Friday`，所以它会给`5`

# android - 收到消息时应用程序崩溃

> ID：15919246
> 
> 赞同：0
> 
> 时间：2013-04-10T07:10:53.197
> 
> 标签：android, broadcastreceiver

在我添加一些代码来保存收到的 SMS 之前，我有以下代码可以使用。

```
package com.example.smsTest;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {
    private SQLiteAdapter mySQLiteAdapter;
@Override
public void onReceive(Context context, Intent intent) {
    Message message = null;

       Bundle extras = intent.getExtras();
       if (extras == null)
       return;

       Object[] pdus = (Object[]) extras.get("pdus");
       for (int i = 0; i < pdus.length; i++) {
          SmsMessage SMessage = SmsMessage.createFromPdu((byte[]) pdus[i]);
          String sender = SMessage.getOriginatingAddress();
          String body = SMessage.getMessageBody().toString();

          message = mySQLiteAdapter.createMessage(body);

          // A custom Intent that will used as another Broadcast
         Intent in = new Intent("SmsMessage.intent.MAIN").
         putExtra("get_msg", sender+":"+body);

         // To display a Toast whenever there is an SMS.
         Toast.makeText(context,body,Toast.LENGTH_LONG).show();

         //You can place your check conditions here(on the SMS or the sender)            
         //and then send another broadcast 
         context.sendBroadcast(in);

        // This is used to abort the broadcast and can be used to silently
        // process incoming message and prevent it from further being 
        // broadcasted. Avoid this, as this is not the way to program an app.
        this.abortBroadcast();
        }
     }
 } 
```

我添加的导致此崩溃的代码如下：

```
private SQLiteAdapter mySQLiteAdapter;
Message message = null;
message = mySQLiteAdapter.createMessage(body); 
```

这是 createMessage 函数的代码：

```
public Message createMessage(String message) {
    String[] columns = new String[]{KEY_ID, KEY_CONTENT};

    ContentValues values = new ContentValues();
    values.put(KEY_CONTENT, message);
    long insertId = sqLiteDatabase.insert(MYDATABASE_TABLE, null,
    values);
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE,
            columns, KEY_ID + " = " + insertId, null,
    null, null, null);
    cursor.moveToFirst();
    Message newMessage = cursorToMessage(cursor);
    cursor.close();
    return newMessage;
} 
```

我不知道错误来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:12:44.157

看起来你没有实例化`mySQLiteAdapter`. 您必须在访问它之前进行实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:15:32.647

请评论这行代码，

```
 Toast.makeText(context,body,Toast.LENGTH_LONG).show(); 
```

我认为这会起作用，我在后台服务上的 UI 操作遇到了同样的问题，请评论代码，或替换为 Log.d() 以记录信息

# orchardcms - 果园从 TEST 到 PROD 的推广

> ID：15919247
> 
> 赞同：0
> 
> 时间：2013-04-10T07:10:58.820
> 
> 标签：orchardcms, orchardcms-1.6

我目前有 3 个环境：

1.  DEV（带有 VS2012 和源代码）- 连接到 TEST db
2.  TEST - 连接到 TEST db
3.  PROD - 连接到 PROD db

该网站目前在 DEV 和 TEST 上运行良好（已添加内容、小部件等）。

当我尝试推广到 PROD 时，该网站似乎运行良好（那里的所有页面，我可以导航等） - 但是，我根本无法编辑。

例如，在添加新页面/编辑内容时，我会收到此错误：

```
"An unhandled exception has occurred and the request was terminated. Please refresh the page. If the error persists, go back

could not insert: [Orchard.ContentManagement.Records.ContentItemVersionRecord][SQL:    INSERT INTO Orchard_Framework_ContentItemVersionRecord (Number, Published, Latest, Data, ContentItemRecord_id) VALUES (?, ?, ?, ?, ?); select SCOPE_IDENTITY()]

NHibernate.Exceptions.GenericADOException: could not insert: [Orchard.ContentManagement.Records.ContentItemVersionRecord][SQL: INSERT INTO Orchard_Framework_ContentItemVersionRecord (Number, Published, Latest, Data, ContentItemRecord_id) VALUES (?, ?, ?, ?, ?); select SCOPE_IDENTITY()] ---> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'Id', table 'Orchard.dbo.Orchard_Framework_ContentItemVersionRecord'; column does not allow nulls. INSERT fails." 
```

此外，当我尝试在 PROD 中禁用形状跟踪模块时 - 它会说成功，但是当我检查它时实际上并没有禁用该模块。

这就是我将它发布到 PROD 的方式：

1.  使用 build.cmd "compile;package" 在 DEV 上构建项目
2.  将 build\Stage 的内容复制到 PROD（App_Data 文件夹只有 _marker.txt 文件）
3.  在 PROD 中创建一个空白数据库
4.  在 PROD 中打开网站，它要求我输入网站名称、数据库详细信息等。
5.  现在，当我打开网站时——它会显示默认的“ThemeMachine”网站——这很好
6.  然后，我将数据库从 TEST 复制到 PROD（通过 SQL Server 导出）
7.  现在，当我打开网站时，我的网站运行良好，所有页面等，但在尝试编辑内容或添加新页面时出现异常

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:48:22.717

这意味着您的表没有定义正确的标识。由于您在导出和导入时没有获取所有架构信息，因此您可能还缺少有关表的大量元数据。备份/恢复是移动数据库的一种更安全的方法，尽管还有其他方法，因为您可以保证在另一端拥有相同的数据库、模式 + 数据。

# visual-c++ - 构建调试时链接错误

> ID：15919248
> 
> 赞同：1
> 
> 时间：2013-04-10T07:11:04.613
> 
> 标签：visual-c++, linker, linker-errors, debug-symbols

每当我在 Release 中构建代码时，它都会编译并运行良好。但是，当我切换到调试时，我得到了一些我似乎无法弄清楚的错误。

```
swift.lib(scene.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(fileio.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(mesh_utils.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(object.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(mesh.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(pair.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>swift.lib(lut.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in main.obj
1>msvcprt.lib(MSVCP100.dll) : error LNK2005: "public: class std::basic_ostream<char,struct std::char_traits<char> > & __thiscall std::basic_ostream<char,struct std::char_traits<char> >::flush(void)" (?flush@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEAAV12@XZ) already defined in main.obj
1>msvcprt.lib(MSVCP100.dll) : error LNK2005: "public: void __thiscall std::basic_ostream<char,struct std::char_traits<char> >::_Osfx(void)" (?_Osfx@?$basic_ostream@DU?$char_traits@D@std@@@std@@QAEXXZ) already defined in main.obj
1>msvcprt.lib(MSVCP100.dll) : error LNK2005: "bool __cdecl std::uncaught_exception(void)" (?uncaught_exception@std@@YA_NXZ) already defined in libcpmtd.lib(uncaught.obj)
1>msvcprt.lib(MSVCP100.dll) : error LNK2005: "public: void __thiscall std::basic_ios<char,struct std::char_traits<char> >::setstate(int,bool)" (?setstate@?$basic_ios@DU?$char_traits@D@std@@@std@@QAEXH_N@Z) already defined in main.obj
1>msvcprt.lib(MSVCP100.dll) : error LNK2005: "public: __int64 __thiscall std::basic_streambuf<char,struct std::char_traits<char> >::sputn(char const *,__int64)" (?sputn@?$basic_streambuf@DU?$char_traits@D@std@@@std@@QAE_JPBD_J@Z) already defined in main.obj 
```

还有一堆然后...

```
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: "public: __thiscall std::exception::exception(char const * const &)" (??0exception@std@@QAE@ABQBD@Z) already defined in LIBCMTD.lib(stdexcpt.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: "public: virtual __thiscall std::exception::~exception(void)" (??1exception@std@@UAE@XZ) already defined in LIBCMTD.lib(stdexcpt.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: "public: __thiscall std::bad_cast::bad_cast(char const *)" (??0bad_cast@std@@QAE@PBD@Z) already defined in LIBCMTD.lib(stdexcpt.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: "public: __thiscall std::exception::exception(class std::exception const &)" (??0exception@std@@QAE@ABV01@@Z) already defined in LIBCMTD.lib(stdexcpt.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _memmove already defined in LIBCMTD.lib(memmove.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fgetc already defined in LIBCMTD.lib(fgetc.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fputc already defined in LIBCMTD.lib(fputc.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _ungetc already defined in LIBCMTD.lib(ungetc.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: __lock_file already defined in LIBCMTD.lib(_file.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: __unlock_file already defined in LIBCMTD.lib(_file.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fflush already defined in LIBCMTD.lib(fflush.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _setvbuf already defined in LIBCMTD.lib(setvbuf.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _strncmp already defined in LIBCMTD.lib(strncmp.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _memcpy_s already defined in LIBCMTD.lib(memcpy_s.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fwrite already defined in LIBCMTD.lib(fwrite.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fgetpos already defined in LIBCMTD.lib(fgetpos.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: __fseeki64 already defined in LIBCMTD.lib(fseeki64.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fsetpos already defined in LIBCMTD.lib(fsetpos.obj)
1>MSVCRT.lib(MSVCR100.dll) : error LNK2005: _fclose already defined in LIBCMTD.lib(fclose.obj)
1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
1>MSVCRT.lib(ti_inst.obj) : error LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
1>LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other libs; use /NODEFAULTLIB:library
1>C:\...\: fatal error     LNK1169: one or more multiply defined symbols found 
```

我同时使用 SWIFT 和 OPCODE 库。我在 C++-> 代码生成中的“运行时库”字段对于所有 3 个项目（我的主项目、swift、操作码）都相同。我已尝试将它们全部设置为 \MT 并全部设置为 \MD 以进行调试模式，但都不起作用。实际上，当它在 Release 中成功构建时，我必须将 Opcode 和我的活动项目设置为 \MD（swift 可以是 \md 或 \mt 并且它仍然可以构建）。我不太了解用于链接的运行时库...所以如果这是问题所在，您可以尝试明确吗？

我也去寻找_ITERATOR_DEBUG_LEVEL，但找不到。我应该在哪里更改它？我在源代码的任何地方都找不到它。我没有在项目属性中看到它，但完全有可能我只是没有在属性中找到正确的位置。

显然，人们在字符集不匹配时也遇到过类似的错误。我已经尝试将它们全部设置为 multi 并全部设置为 unicode。那似乎没有任何效果。

目前，我的活动项目只有 swift.lib 作为附加依赖项。我有 opcode.dll 和 opcode_d.dll 所以我不会静态链接它们。

在 C/C++ 设置下的预处理器中，我有以下预处理器定义：

操作码：

```
WIN32
_DEBUG
_WINDOWS
_USRDLL
OPCODE_EXPORTS 
```

迅速：

```
_DEBUG
WIN32
_LIB
LOOKUP_TABLE_5_625 
```

活跃项目：

```
WIN32
_DEBUG
_CONSOLE 
```

如果需要，我可以提供更多信息。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:51:21.787

听起来您已经确保 C 运行时库 (CRT) 对于所有项目都是一致的，这是首选做法。它对您的 DLL 项目不太重要，因为它使用 CRT 的独立副本。

下一步是查看项目设置的“预处理器”页面。您正在寻找可能在三个项目之间发生冲突的预处理器（宏）定义。我相信您会在该列表中找到_ITERATOR_DEBUG_LEVEL。

我不知道如何在 StackOverflow 上发布后续问题，但您可以将在每个项目中找到的宏定义添加到您的问题中。

# php - 使用 file_get_contents 发布访问不能解决使用内容长度的 411 错误

> ID：15919249
> 
> 赞同：0
> 
> 时间：2013-04-10T07:11:06.100
> 
> 标签：php, http

我正在尝试使用 访问发布数据`file_get_contents`，但是收到以下错误消息：

`failed to open stream: HTTP request failed! HTTP/1.0 411 Length Required`.

虽然我使用`Content-Length field`了错误并没有得到解决。如果有人可以帮助我，这是我的代码，在此先感谢。

```
<?php
set_time_limit(0);
include "ui.php";
$oy= `perl E:/mul.pl`;
$context  = stream_context_create(array('http' => array('method'=>'POST', 'header'  => 'Content-type: application/x-www-form-urlencoded', 'Content-Length: 0', 'content' => '')));
$result = file_get_contents($oy, false, $context);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:48:47.263

你可以使用[apache_note](http://www.php.net/manual/en/function.apache-note.php)和[虚拟](http://www.php.net/manual/en/function.virtual.php)php 函数来运行 perl

或查看此页面以通过 php shell 函数执行 perl

[在 PHP 中执行 perl](https://stackoverflow.com/questions/11114277/execute-perl-in-php)

[如何从 PHP 调用 Perl 脚本？](https://stackoverflow.com/questions/3733844/how-can-i-call-a-perl-script-from-php)

[使用 shell_exec 从 php 调用 perl 脚本](https://stackoverflow.com/questions/5971554/using-shell-exec-to-call-a-perl-script-from-php)

[从 PHP 执行 Perl 脚本的问题](https://stackoverflow.com/questions/3481121/problems-executing-perl-scripts-from-php)

# lua - 在 Corona SDK 中重新定位交互式广告

> ID：15919255
> 
> 赞同：0
> 
> 时间：2013-04-10T07:11:16.760
> 
> 标签：lua, coronasdk

我在我的应用程序中通过交互方式添加了广告，如下所示：

```
local ads = require("ads")
local adNetwork = "inneractive"
ads.init(adNetwork, "test_id")

local function displayAd()
ads.show("banner", {x=0,y=0, interval=30})
end 
```

然后我在本地函数scene:enterScene(event)方法中调用displayAd()。这工作正常。现在，从当前类（game.lua）来看，它可以到两个场景：gameover.lua 和stage.lua。如果玩家清除舞台，它会进入舞台清除。

现在，如果出现舞台清晰场景，我想将广告的 y 位置移动到类似 y=display.contentCenterY 的位置，所以我在 displayAd() 上尝试了类似的操作：

```
if adFlag == true then
     ads.show("banner", {x=0,y=0, interval=30})
elseif adFlag == false then
     ads.show("banner", {x=0,y=display.contentCenterY, interval=30})
end 
```

这样做的问题是，广告仅在 game.lua 被调用后才会移动，并且永远不会回到原来的位置。我不能把它放在舞台清除课上，因为它有时间延迟，会自动进入下一阶段。所以我的问题是，我怎样才能在下一页立即移动我的广告位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:15:45.797

您可以尝试像这样修改您的代码：

```
if adFlag == true then
     ads.hide()
     ads.show("banner", {x=0,y=0, interval=30})
elseif adFlag == false then
     ads.hide()
     ads.show("banner", {x=0,y=display.contentCenterY, interval=30})
end 
```

# html - 隐藏 Html 页面的地址栏/位置

> ID：15919256
> 
> 赞同：-3
> 
> 时间：2013-04-10T07:11:20.773
> 
> 标签：html

我的代码：

```
"HtmlPage.Window.Navigate(new Uri(Uri), "_newWindow",
  "directories=no,fullscreen=no,menubar=no,location=no,resizable=yes,scrollbars=yes,status=no,titlebar=yes,toolbar=no,Width = 800");" 
```

没有隐藏 Html 页面的地址栏。

我可以使用什么替代代码来隐藏地址栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:19:54.050

它不是html页面的地址栏。它是浏览器 UI 的地址栏元素。您不应尝试在您的域之外进行操作，这只是 HTML 页面。出于安全原因，浏览器不应让您隐藏位置栏

# android - 如何查询两个日期时间列之间的行？

> ID：15919258
> 
> 赞同：2
> 
> 时间：2013-04-10T07:11:23.510
> 
> 标签：android, sqlite

如何查询两个日期时间列之间的行？

**我的示例表：**

```
 message     |      startdatetime           |      enddatetime
--------------------------------------------------------------------------------
Hi           |   2013-04-09 10:00:00       |    2013-04-09 10:30:00

Good morning |   2013-04-09 10:40:00       |    2013-04-09 10:50:00 
```

**我的查询：**

fromDateTime="2013-04-09 10:00:00"; toDateTime="2013-04-09 10:50:00";

```
c1 = myDB.rawQuery("select * from masterdatatable where number=? and startdatetime >= datetime(?) and enddatetime <= datetime(?) order by enddatetime, new String[]{imei,fromDateTime,toDateTime}); 
```

在这里，如果通过`fromDateTime="2013-04-09 10:00:00 " and toDateTime="2013-04-09 10:50:00 "`此查询正确返回以上两条记录。

但如果我通过`fromDateTime="2013-04-09 10:05:00 "; toDateTime="2013-04-09 10:20:00 "`，此查询将返回空游标。其实我希望这个查询返回第一行。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:42:38.463

我通过以下方法实现了这一点，

```
Cursor c0 = myDB.rawQuery("select startdatetime from masterdatatable where datetime(?) >= startdatetime and  datetime(?) <= enddatetime order by startdatetime asc limit 1", new String[]{fromDateTime,fromDateTime});

String fromDate1=fromDateTime;
if(c0.moveToFirst())
{
    fromDate1 = c0.getString(0);
}

Log.i("date", "fromDate1->"+fromDate1);

Cursor c01 = myDB.rawQuery("select startdatetime from masterdatatable where datetime(?) >= startdatetime and  datetime(?) <= enddatetime order by startdatetime desc limit 1", new String[]{toDateTime,toDateTime});
String fromDate2=toDateTime;
if(c01.moveToFirst())
{
    fromDate2 = c01.getString(0);
}

Log.i("date", "fromDate2->"+fromDate2);

c1 = myDB.rawQuery("select * from masterdatatable where startdatetime  between datetime(?) and datetime(?)  order by enddatetime, new String[]{fromDate1,fromDate2}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:17:36.983

由于您的情况，它不会返回第一行..第一行的 endTime 不会

```
 2013-04-09 10:30:00 doesn't 
```

小于

```
 toDateTime="2013-04-09 10:20:00 
```

正因为如此你没有得到第一行..

**更新：** 如果您仍想返回第一行，您可以创建一个新查询来检查 startDate 是否在给定的输入之间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:19:15.463

尝试使用以下 SQL 查询

```
select * from masterdatatable 
where number=? 
and fromdate between startdatetime and enddatetime 
and todate between startdatetime and enddatetime
order by enddatetime 
```

# android - Android从片段中导航到父片段活动

> ID：15919259
> 
> 赞同：0
> 
> 时间：2013-04-10T07:11:24.740
> 
> 标签：android

我的应用程序中的主要片段活动具有以下功能

```
private final void insertFragmentIntoView(final SherlockFragment fragment,
            String tag) {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        ft.add(R.id.fragment_content, fragment, tag);
        ft.commit();
    } 
```

这`R.id.fragment_content`是一个框架布局，我基本上将一个新片段插入到这个框架中。现在我插入的框架有一个按钮，可以将我带到一个新屏幕。我想要的是我的应用程序中的所有导航都应该在我的 FragmentActivity 中进行。如何使用子片段调用我的 FragmentActivity ？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:34:31.223

在您的片段中创建一个侦听器类，您的父活动将实现该侦听器。现在在您的片段中注册侦听器并调用您想要执行某些操作的方法。更多你可以看到这个链接[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

示例片段和活动如何通信。

```
class MyFragment extends Fragment{

class interface MyFragmentListener {
doSomeAction();
}

MyFragmentListener myListener;
onAttach(){
myListener=(MainActivity )getActivity();
}

onButtonClick(){
myListener.doSomeAction();
}

}

class MainActivity extends FragmentActivity implements MyFragment.MyFragmentListener 
{

doSomeAction(){

//TODO perform some action from your fragment to activity
}

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T07:28:00.583

使用侦听器是在 Fragment 和您的活动之间进行通信的推荐方式。

有关信息，请参阅此 Android[文档部分](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)。长话短说，他们只是通过 Activity 类实现了一个侦听器接口，并将 getActivity() 结果转换为一个片段给侦听器。

根据我的个人经验，这非常方便，因为可以让您：

轻松切换底层活动（例如，您在包装活动中托管整个片段以在 3.0 之前兼容，并在 11+ 中托管此片段和其他片段）轻松控制包装活动是否支持回调。只需检查它是否实现了侦听器，如果没有，则执行您的应用程序特定操作。

# c# - 检测 SQL 连接是否使用别名（配置管理器）

> ID：15919266
> 
> 赞同：0
> 
> 时间：2013-04-10T07:11:36.717
> 
> 标签：c#, sql, sql-server, tsql, database-connection

我在 SQL Server 配置管理器>SQL Native 客户端配置 > 别名中有一个条目

```
Alias Name : CRM_APP
Port : 5051
Protocol: TCP/IP
Server: 10.10.10.10\MYSERVER 
```

我正在使用连接到 SQL

```
Servername : CRM_APP 
```

我们如何检测 SQL 连接是否使用 Alias（基本上我想知道客户端正在使用的服务器的实际 IP 地址）使用 SQL 或 C# 连接到服务器？

*从评论中复制的要求更清晰的解释：*

> 基本上我想将 Winforms 应用程序登录仅限于 LAN。如果用户尝试通过 Internet 连接到服务器，则不应被允许。但是我们不想使用防火墙策略或 SQL 登录触发器来做到这一点。如果它使用主机文件，我们已经处理了连接。现在我们需要处理别名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:05:22.130

使用[`SERVERPROPERTY`](http://msdn.microsoft.com/en-us/library/ms174396.aspx)：

*   `SERVERPROPERTY('ServerName')`：与指定的 SQL Server 实例关联的 Windows 服务器和实例信息。
*   `SERVERPROPERTY('MachineName')`：运行服务器实例的 Windows 计算机名称。对于群集实例，即在 Microsoft 群集服务上的虚拟服务器上运行的 SQL Server 实例，它返回虚拟服务器的名称。
*   `SERVERPROPERTY('ComputerNamePhysicalNetBIOS')`：当前运行 SQL Server 实例的本地计算机的 NetBIOS 名称。对于故障转移群集上的 SQL Server 群集实例，此值会随着 SQL Server 实例故障转移到故障转移群集中的其他节点而更改。在 SQL Server 的独立实例上，此值保持不变并返回与 MachineName 属性相同的值。

## 更新

顺便说一句，如果您希望您的应用程序专门连接到知名服务器，请利用 SSL/TLS：

*   在应用程序使用的连接字符串中指定[`Encrypt=True`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.encrypt.aspx)。这将触发连接所需的 SSL/TLS。
*   为服务器指定 FQDN，请参阅[Encrypting Connections to SQL Server](http://msdn.microsoft.com/en-us/library/ms189067%28v=sql.105%29.aspx)，特别是该`SQL Server Native Client Certificate Requirements`部分。
*   在服务器上安装证书以供 SQL 使用，请参见`Configuring SSL For SQL Server`上面的同一链接。
*   将服务器的证书添加到客户端上的受信任证书中

这样，您就为任何“劫持”应用程序连接的尝试添加了一个重大障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:58:18.660

我不确定我是否完全理解您的要求，但可能一种可能性（假设您使用的是 SQL 2005 或更高版本）是`sys.dm_exec_connections`从客户端查询管理视图？查询将类似于：

```
SELECT  session_id, local_net_address, client_net_address 
FROM    sys.dm_exec_connections 
WHERE   session_id = @@SPID 
```

访问`sys.dm_exec_connections`需要`VIEW SERVER STATE`权限，因此您可能需要将查询包装在存储过程、视图或函数中，以避免授予您的应用程序登录此权限。

# java - StringEscapeUtils 无法解决

> ID：15919267
> 
> 赞同：6
> 
> 时间：2013-04-10T07:11:40.213
> 
> 标签：java, maven, spring-mvc, dependencies, pom.xml

我在 pom.xml 中添加了依赖项

```
<dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency> 
```

但是当我更新 maven 依赖项并导入`EscapeStringUtils`using

```
import org.apache.commons.lang3.StringEscapeUtils; 
```

我得到了红色下划线和错误说明：

```
The import org.apache.commons.lang3.StringEscapeUtils cannot be resolved 
```

jar 文件在那里（下载）现在我该如何修复它，我不知道。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:33:41.180

感谢所有回复，我通过从以下链接手动下载 .jar 文件并覆盖由 maven 下载的现有 jar 解决了这个问题。（我不知道为什么它在手动下载后开始工作，但毕竟它工作）

[http://commons.apache.org/proper/commons-lang/download_lang.cgi](http://commons.apache.org/proper/commons-lang/download_lang.cgi)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:14:26.817

如果你确定 jar 文件在类路径中包含 StringEscapeUtils，你应该清理项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T09:28:23.367

删除 .m2\repository\org\apache\commons\commons-lang3 中的内容。

更新项目 - 转到 eclipse 项目 -> maven -> 更新项目并检查强制更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T09:09:03.130

我有一个类似的问题，我用这个解决了：

```
org.apache.commons.lang3.StringEscapeUtils.escapeHtml4(testToBeTranslated) 
```

# facebook - 图片未显示在 Facebook 分享中

> ID：15919270
> 
> 赞同：0
> 
> 时间：2013-04-10T07:11:49.073
> 
> 标签：facebook, share

我正在使用 facebook sharer.php 来分享从我的网站到 facebook 墙的链接。以下是网址，我用来完成这项工作。

https://www.facebook.com/sharer/sharer.php?s=100&p[title]= **title_to_be_shared** &p[url]= **link_to_be_shared** &p[images][0]= **image_path** 我知道 sharer.php 已被弃用。但是我已经搜索了很多来实现这个共享功能。我只发现了这个。但是在这种情况下，图像并不能在所有情况下都正确渲染。在某些情况下，共享时不会加载图像。

请帮助我克服这一点。或者，如果有其他 API 可以完成这项工作，请告诉我...

提前致谢！问候， 拉朱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T03:37:24.207

sharer.php 方法已弃用，不再受支持。据我所知，共享您网站页面的最佳替代品是[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)。

# ruby - 如何在 @INC for Perl 中包含其他文件夹？（原为：`Can't locate Git.pm in @INC` for svn2git）

> ID：15919273
> 
> 赞同：5
> 
> 时间：2013-04-10T07:12:07.220
> 
> 标签：ruby, perl, git, svn, git-svn

我正在尝试通过`svn2git`. 当我运行时，`svn2git --verbose https://url_to_repo`我最终得到以下输出：

```
Running command: git svn init --prefix=svn/ --no-metadata --trunk=trunk --tags=tags --branches=branches https://url_for_repository
Can't locate Git.pm in @INC (@INC contains: /usr/lib/perl5/site_perl/5.8.8 /home/cpdirect/perl5/lib/perl5 /usr/local/lib/perl5/5.8.8/x86_64-linux /usr/local/lib/perl5/5.8.8 /usr/local/lib/perl5/site_perl/5.8.8/x86_64-linux /usr/local/lib/perl5/site_perl/5.8.8 /usr/local/lib/perl5/site_perl .) at /usr/libexec/git-core/git-svn line 80.
BEGIN failed--compilation aborted at /usr/libexec/git-core/git-svn line 80.
command failed:
2>&1 git svn init --prefix=svn/ --no-metadata --trunk=trunk --tags=tags --branches=branches https://url_for_repository 
```

很明显，Perl 无法在路径中找到该模块，但是到目前为止我在 CentOS 5.9 上尝试的所有方法都没有产生结果。例如，安装了以下内容：

```
git-1.7.11.3-1.el5.rf
git-svn-1.7.11.3-1.el5.rf
cpanel-git-1.7.11.3-1.cp1136 
```

有关如何解决此问题的任何想法？

所以事实证明，由于某种原因 Perl 不知道如何查看`/usr/lib/perl5/vendor_perl/5.8.8/`. 如果我链接到它需要的每个模块，它`/usr/lib/perl5/site_perl/5.8.8`看起来工作正常且没有错误。

所以这里真正的问题是你如何强制 Perl 在那个`vendor_perl`文件夹下查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:33:59.383

所以我发现了如何添加多个库并解决了缺少的 Perl 库：

```
PERL5LIB="/usr/lib/perl5/vendor_perl/5.8.8/:/usr/lib64/perl5/vendor_perl/5.8.8/x86_64-linux-thread-multi" svn2git -v file:///my/path/to/svn/repo 
```

# java - 使用 org.codehaus.jackson 反序列化 JSON 字符串

> ID：15919276
> 
> 赞同：0
> 
> 时间：2013-04-10T07:12:11.273
> 
> 标签：java, spring, spring-mvc

我是序列化和反序列化 JSON 的新手。

我有值的字符串

```
String json = [{"Area":"LoremIpsum","Quantity":1500,"isSubArea":false},
{"Area":"LoremIpsum","Quantity":700,"isSubArea":false}]; 
```

我想反序列化，我使用杰克逊的 ObjectMapper 反序列化

```
ObjectMapper mapper = new ObjectMapper();
List<DeserializeJSON> agentsList = mapper.readValue(json,new TypeReference<List<DeserializeJSON>>() {}); 
```

我的反序列化类

```
public class DeserializeJSON {
String Area;
Integer Quantity = 0;
boolean isSubArea = false;

public String getArea() {
    return Area;
}
public void setArea(String Area) {
    this.Area = Area;
}
public Integer getQuantity() {
    return Quantity;
}
public void setQuantity(Integer Quantity) {
    this.Quantity = Quantity;
}
public boolean isSubArea() {
    return isSubArea;
}
public void setSubArea(boolean isSubArea) {
    this.isSubArea = isSubArea;
} 
```

}

但我收到错误

```
Unrecognized field "Area" (Class DeserializeJSON), not marked as ignorable at [Source: java.io.StringReader@2acf7a; line: 1, column: 11] (through reference chain: DeserializeJSON["Area"]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:34:51.330

默认情况下，Jackson 将在[JavaBean 命名约定](http://en.wikipedia.org/wiki/JavaBeans#JavaBean_conventions)中使用属性访问器而不是字段。为了使您的示例正常工作，您可以通过添加来更改它

```
mapper.setVisibilityChecker(mapper.getVisibilityChecker().withFieldVisibility(Visibility.ANY)); 
```

`VisibilityChecker`查看正确自定义 json 映射的其他方法。

# ruby - 红宝石耙子守卫任务

> ID：15919277
> 
> 赞同：2
> 
> 时间：2013-04-10T07:12:19.630
> 
> 标签：ruby, rake, guard

Ruby noob - 我需要在我的 rake 任务中运行警卫，但我找不到让它在后台运行的方法。它需要最后运行第二个，因此让`guard >`shell 等待命令会阻止最终任务运行，因此`sh bundle exec guard`不能选择调用 rake 文件。根据文档，这应该有效：

```
 ##
  desc "Watch files"
  ##
  task :watcher do
    Guard.setup
    Guard::Dsl.evaluate_guardfile(:guardfile => 'Guardfile', :group => ['Frontend'])
    Guard.guards('copy').run_all
  end
  #end watch files 
```

[https://github.com/guard/guard/wiki/Use-Guard-programmatically-cookbook](https://github.com/guard/guard/wiki/Use-Guard-programmatically-cookbook)

这是我的完整 Guardfile（与 Rakefile 在同一目录中）

```
# Any files created or modified in the 'source' directory
# will be copied to the 'target' directory. Update the
# guard as appropriate for your needs.
guard :copy, :from => 'src', :to => 'dist', 
            :mkpath => true, :verbose => true 
```

但`rake watcher`返回错误：

```
07:02:31 - INFO - Using Guardfile at Guardfile.
07:02:31 - ERROR - Guard::Copy - cannot copy, no valid :to directories
rake aborted!
uncaught throw :task_has_failed 
```

我尝试了不同的 hack，这里就不多说了，但都返回了上面的`Guard::copy - cannot copy, no valid :to directories`. 该`dist`目录肯定存在。此外，如果我从 shell、rake 内部或在 cmd 行上调用 guard，那么它运行完美，但让我留下了`guard >`shell。认为我的问题可能是 rake 文件中的语法错误？任何帮助表示赞赏；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:40:09.077

Guard Copy 在`#start`方法中做了一些初始化，所以你需要先启动 Guard 才能运行它：

```
task :watcher do
  Guard.setup
  copy = Guard.guards('copy')
  copy.start
  copy.run_all
end 
```

另外没有必要再打电话`Guard::Dsl.evaluate_guardfile`了，维基上的信息已经过时了。

## 编辑1：继续关注

当你想看目录时，你需要启动Guard：

```
task :watcher do
  Guard.start
  copy = Guard.guards('copy')
  copy.start
  copy.run_all
end 
```

**注意：**如果您设置 Guard**并**在之后启动它，则 Guard 会失败并显示`Hook with name 'load_guard_rc'`

## 编辑2：真的继续看

Guard 以非阻塞模式启动[Listen ，所以为了使调用阻塞，你需要等待它：](https://github.com/guard/listen)

```
task :watcher do
  Guard.start
  copy = Guard.guards('copy')
  copy.start
  copy.run_all
  while ::Guard.running do
    sleep 0.5
  end
end 
```

如果您还想禁用交互，您可以传递`no_interactions`选项：

```
Guard.start({ no_interactions: true }) 
```

API 绝对不是最佳的，当我们删除 Ruby 1.8.7 支持和一些已弃用的东西时，我会为 Guard 2 改进它。

# c# - 如何使用 ViewModelCloser 关闭 ViewModel 的 View？

> ID：15919288
> 
> 赞同：3
> 
> 时间：2013-04-10T07:12:43.697
> 
> 标签：c#, xamarin, mvvmcross

在 MvvmCross v3, CustomerManagement 示例中，该方法`void RequestClose(IMvxViewModel viewModel)`关闭了顶部`View`。你如何关闭`View`a`ViewModel`而不是？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:38:58.837

我不会使用那个 ViewModelCloser 方法——尽管如果你愿意，它可以被扩展。

MvvmCross v3 删除了以前的`CloseViewModel`方法——因为它并没有真正适用于所有平台和所有演示样式——适用于所有导航控制器、拆分视图、选项卡、弹出窗口、弹出窗口、对话框等。

为了替换它，v3 引入了一个新的 ViewModel 调用：

```
 protected bool ChangePresentation(MvxPresentationHint hint) 
```

这在 UI 中与 IMvxViewPresenter 方法匹配：

```
 void ChangePresentation(MvxPresentationHint hint); 
```

要使用它，您需要：

1.  创建一个新的提示类 - 例如`public class CustomPresentationHint : MvxPresentationHint { /* ... */ }`

2.  `CreateViewPresenter()`在每个 UI 项目中，提供一个自定义演示者（通常通过在您的类中覆盖`Setup.cs`） - 并在该自定义演示者中处理`ChangePresentationHint`调用：

    ```
     public void ChangePresentation(MvxPresentationHint hint)
          {
              if (hint is CustomPresentationHint)
              {
                   // your custom actions here
                   // - which may involve interacting with the RootFrame, with a NavigationController, with the AndroidFragment manager, etc
              }
          } 
    ```

3.  在您的视图模型中，您可以`CustomPresentationHint`在需要时发送。

我意识到这比 vNext 所需的“更多工作”，但希望它是一种更灵活、更强大的方法。

# php - 如何在 mysql-php 中检索所有最后插入的行 ID？

> ID：15919289
> 
> 赞同：6
> 
> 时间：2013-04-10T07:12:44.010
> 
> 标签：php, mysql, last-insert-id

有没有任何有效的方法可以使用 php 从 mysql 数据库中检索所有最后插入的行自动递增的 ID？假设我不知道批量插入多少行，但插入后我需要它们的所有 ID。

谷歌搜索后，我没有找到任何有效的方法来做到这一点，所以我不确定这是否可能。我可以关注这个，但必须多次访问数据库才能检索 ID。

```
$data = array (
array(1,2),
array(3,4),
array(5,6)
);

$ids = array();

foreach ($data as $item) {
   $sql = 'insert into table (a,b) values ('.$item[0].','.$item[1].')';
   mysql_query ($sql);
   $ids[] = mysql_insert_id();
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:33:10.160

Mysql 只返回最后插入的 id，不幸的是没有办法检索所有这些（直接）。您将不得不使用变通方法，例如：

1.  计算插入的行和最后插入的 ID，然后向后计算其余部分。

2.  生成自定义 ID 而不是让 mysql 增量创建它们，如果插入查询成功，则将 id 存储到数组中（通常如果其中一个失败，整个查询无论如何都会失败）。

推荐使用第二种方法，因为对于 n1，如果您正在执行稍微复杂的操作，例如使用`INSERT blah blah ON DUPLICATE KEY`修改将计为 2 次插入（不要问我为什么）而不是 1 次，并且您必须进行一些计算才能了解如何实际上插入了很多，修改了多少。

**顺便说一句，停止使用 mysql_ 扩展名，它已被弃用，改用 mysqli 或 pdo**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:20:36.860

您的代码接近完整的解决方案。

```
$data = array (
array(1,2),
array(3,4),
array(5,6)
);

$ids = array();

foreach ($data as $item) {
   $sql = "INSERT INTO `table` (`a`, `b`) VALUES ('{$item[0]}' ,'{$item[1]}');";
   mysql_query ($sql) or mysql_error();
   $ids[] = mysql_insert_id();
}

var_dump($ids); 
```

如果问题是关于性能问题，那么另一个解决方案可能是

```
foreach ($data as $item) {
   $sql = "INSERT INTO `table`.`table` (`a`, `b`) VALUES ('{$item[0]}' ,'{$item[1]}');";
   mysql_query ($sql) or mysql_error();
}

$last_id = mysql_insert_id();
$total = count($data);
for($i = 0; $i <= $total; $i++){
    $ids[] = $total-$i;
} 
```

这将防止多个sql查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:17:12.340

如果您的 auto_incremented 字段是“正常”的，因此它不会以某种特殊方式表现，而是将最后一个 id 增加一，您可以在插入之前找到它的最大值，然后找到所有高于它的记录。

例子：

```
$sql = "SELECT id FROM table ORDER BY id DESC LIMIT 1";
    // get maximal value before insert

$sql = "SELECT id FROM table WHERE id > :last_id"; // get all new 
```

但是这个解决方案不是很专业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:39:07.260

当我需要跟踪输入的批次记录时，我在表格中有一个额外的字段，通常标记为邮票或其他东西。插入记录后，将使用 time() 函数给出的当前时间戳填充标记字段。然后可以跟踪每个批次，无论它们有多旧。此外，保存时间戳是获取添加它们的确切时间的一种简单方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T07:37:24.110

获取最后插入id的id

```
 <?php

$conn = mysql_connect('localhost', 'user', 'password');

mysql_select_db('test');

$data = array (
array(1,2),
array(3,4),
array(5,6)
);

$ids = array();

foreach ($data as $item) {

   $sql = 'insert into testtable (a,b) values ('.$item[0].','.$item[1].')';   
   mysql_query ($sql, $conn);
   $id[] = mysql_insert_id($conn);
} 
```

# java - 将中缀转换为后缀时识别负值

> ID：15919292
> 
> 赞同：2
> 
> 时间：2013-04-10T07:12:54.193
> 
> 标签：java, arrays, operators, infix-notation, postfix-notation

这是我的课：

```
import java.io.*;
import java.util.*;
import java.lang.*;
import java.util.Scanner;
import java.util.List;
import java.util.Stack;

/**
 *
 * @author rtibbetts268
 */
public class InfixToPostfix
{
        /**
         * Operators in reverse order of precedence.
         */
    private static final String operators = "_-+/*";
    private static final String operands = "0123456789x";

    public String xToValue(String postfixExpr, String x)
    {
        char[] chars = postfixExpr.toCharArray();
        StringBuilder newPostfixExpr = new StringBuilder();

        for (char c : chars)
        {
            if (c == 'x')
            {
                newPostfixExpr.append(x);
            }
            else
            {
                newPostfixExpr.append(c);
            }
        }
        return newPostfixExpr.toString();
    }

    public String convert2Postfix(String infixExpr)
    {
        char[] chars = infixExpr.toCharArray();
        StringBuilder in = new StringBuilder(infixExpr.length());

        for (int i : chars)
        {
            if (infixExpr.charAt(i) == '-')
            {
                if (isOperand(infixExpr.charAt(i+1)))
                {
                    if (i != infixExpr.length())
                    {
                        if (isOperator(infixExpr.charAt(i-1)))
                            in.append('_');
                    }
                    else
                    {
                        in.append(infixExpr.charAt(i));
                    }
                }
                else
                {
                   in.append(infixExpr.charAt(i));
                }
            }
            else
            {
                in.append(infixExpr.charAt(i));
            }
        }

        chars = in.toString().toCharArray();
        Stack<Character> stack = new Stack<Character>();
        StringBuilder out = new StringBuilder(in.toString().length());

        for (char c : chars)
        {
            if (isOperator(c))
            {
                while (!stack.isEmpty() && stack.peek() != '(')
                {
                    if (operatorGreaterOrEqual(stack.peek(), c))
                    {
                        out.append(stack.pop());
                    }
                    else
                    {
                        break;
                    }
                }
                stack.push(c);
            }
            else if (c == '(')
            {
                stack.push(c);
            }
            else if (c == ')')
            {
                while (!stack.isEmpty() && stack.peek() != '(')
                {
                    out.append(stack.pop());
                }
                if (!stack.isEmpty())
                {
                    stack.pop();
                }
            }
            else if (isOperand(c))
            {
                out.append(c);
            }
        }
        while (!stack.empty())
        {
            out.append(stack.pop());
        }
        return out.toString();
    }

    public int evaluatePostfix(String postfixExpr)
    {
        char[] chars = postfixExpr.toCharArray();
        Stack<Integer> stack = new Stack<Integer>();
        for (char c : chars)
        {
            if (isOperand(c))
            {
                stack.push(c - '0'); // convert char to int val
            }
            else if (isOperator(c))
            {
                int op1 = stack.pop();
                int op2 = stack.pop();
                int result;
                switch (c) {
                    case '*':
                        result = op1 * op2;
                        stack.push(result);
                        break;
                    case '/':
                        result = op2 / op1;
                        stack.push(result);
                        break;
                    case '+':
                        result = op1 + op2;
                        stack.push(result);
                        break;
                    case '-':
                        result = op2 - op1;
                        stack.push(result);
                        break;
                }
            }
        }
        return stack.pop();
    }

    private int getPrecedence(char operator)
    {
        int ret = 0;
        if (operator == '_')
        {
            ret = 0;
        }
        if (operator == '-' || operator == '+')
        {
            ret = 1;
        }
        else if (operator == '*' || operator == '/')
        {
            ret = 2;
        }
        return ret;
    }

    private boolean operatorGreaterOrEqual(char op1, char op2)
    {
        return getPrecedence(op1) >= getPrecedence(op2);
    }

    private boolean isOperator(char val)
    {
        return operators.indexOf(val) >= 0;
    }

    private boolean isOperand(char val)
    {
        return operands.indexOf(val) >= 0;
    }

} 
```

在其中，我使用该方法将中缀表达式更改为后缀表达式`convert2Postfix()`

一开始有一小部分，我正在重写字符串输入，所有负数的前面都有一个`'_'`，而不是`"-"`. 它不起作用。

例如：将 -4 更改为 _4

我需要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:34:24.267

这里有很多错误，这里是第一个：

```
 for (int i : chars) 
```

chars 被转换为对应的 int。例如，如果 chars 包含一个字符“A”：

```
 char [] chars = new char[1];
    chars[0] = 'A';
    for(int i: chars){
        System.out.println(i); //You will have a '65' here
    } 
```

你真正的意思可能是：

```
 for (int i=0;i<chars.length;++i) 
```

这也是错误的：

```
 if (isOperator(infixExpr.charAt(i-1))) 
```

它应该是 ：

```
 if (isOperator(infixExpr.charAt(i))) 
```

然后在堆栈中放置和删除元素的方式存在问题。在所有这些更改之后，您还应该这样做：

```
 return out.reverse().toString(); 
```

代替 ：

```
 return out.toString(); 
```

这是我最终得到的结果：http: [//pastebin.com/2TLqPUsH](http://pastebin.com/2TLqPUsH) （当然更改类的名称）

# ruby - Enumerable#all 的正确用例是什么？和 Enumerable#each 在 Ruby 中？

> ID：15919296
> 
> 赞同：2
> 
> 时间：2013-04-10T07:12:58.277
> 
> 标签：ruby, enumerable

`Enumerable#all?`我一直对and的用例感到困惑`Enumerable#each`。例如

```
['.txt', '-hello.txt'].all? do |suffix|
        puts "temp#{suffix}"
      end 
```

为我工作，也为

```
['.txt', '-hello.txt'].each do |suffix|
        puts "temp#{suffix}"
      end 
```

也为我工作。

我应该选择`.all?`什么`.each`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:16:38.400

`all?`评估您传递给它的块，`true`如果所有元素都满足它，则返回，`false`否则返回。

`each`是一种使用块遍历可枚举对象的方法。它将评估*每个*对象的块。在您的情况下，您想使用`each`.

查看**所有文档？** [这里](http://ruby-doc.org/core-2.0/Enumerable.html)和**每个** [这里](http://ruby-doc.org/core-2.0/Array.html#method-i-each)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:36:59.537

查看您的代码和输出：

```
['.txt', '-hello.txt'].all? do |suffix|
        puts "temp#{suffix}"
end
p "======================="
['.txt', '-hello.txt'].each do |suffix|
        puts "temp#{suffix}"
end 
```

输出：

```
temp.txt
"======================="
temp.txt
temp-hello.txt 
```

但现在的问题是**为什么第一个代码中的“temp.txt”？**. 是的，作为`puts`回报`nil`。现在见下图：

```
['.txt', '-hello.txt'].all? do |suffix|
        p "temp#{suffix}"
end
p "======================="
['.txt', '-hello.txt'].each do |suffix|
        puts "temp#{suffix}"
end 
```

输出：

```
"temp.txt"
"temp-hello.txt"
"======================="
temp.txt
temp-hello.txt 
```

***解释：***

[`Enum#all?`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-all-3F)说：

> 将集合的每个元素传递给给定的块。如果块从不返回**false 或 nil** ，则该方法返回**true**。

 **您的第一个代码在将第一个元素传递给块后`puts`返回。`nil`仅当每个项目评估为 时，传递给的块`all?`才会继续`true`。因此块返回`"temp.txt"`。在第二个版本中不是这种情况。因为`p`永远不会回来`nil`。因此该块的计算结果为`true`，因为所有对象都是`true`除`nil`和`false`。**

# ruby-on-rails - BooksController#index 中的 ActiveRecord::StatementInvalid

> ID：15919297
> 
> 赞同：0
> 
> 时间：2013-04-10T07:12:59.057
> 
> 标签：ruby-on-rails

请帮忙！！

我是 Rails 新手，正在按照《Agile Web Development With Rails 3rd Edition》一书中的步骤进行练习。这就是我所做的：

1.  创建铁路应用程序
2.  创建数据库：rails generate scaffold book \ title:string description:text image_url:string
3.  是否迁移：rake db:migrate
4.  我的服务器正在运行：rails 服务器

现在我正在尝试访问该表并对其进行编辑，所以我在浏览器上输入了“http://localhost/3000/books”，它给了我以下错误：

'ActiveRecord::StatementInvalid in BooksController#index 找不到表'books'

Rails.root: C:/Sites/book_example

应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/books_controller.rb:5:in `index'

要求

参数：无

显示会话转储

显示环境转储

回复

标题：无'

我更新了捆绑包，但仍然收到相同的错误，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:19:07.227

您的迁移步骤中有拼写错误。

应该是`rake db:migrate`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:27:44.977

按照以下步骤，

```
rails new book_example
# edit config/database.yml file
rake db:create
rails generate scaffold book title:string description:text image_url:string
rake db:migrate
rails s  #Run Server 
```

然后检查**localhost/3000/books**

# android - 带参数的机器人

> ID：15919302
> 
> 赞同：2
> 
> 时间：2013-04-10T07:13:16.917
> 
> 标签：android, robotium

有什么方法可以让我在机器人应用程序的机器人测试中使用不同的数据多次运行单个测试用例。就像参数化的联合测试一样。

```
public class UserTest extends
        ActivityInstrumentationTestCase2<MainActivity> {

public UserTest() {
        super(TestActivity.class);
    }       

    @Override
    public void setUp() throws Exception {
        // setUp() is run before a test case is started.

        // This is where the solo object is created.
        solo = new Solo(getInstrumentation(), getActivity());
    }

public void testUserData1() throws Exception {

        // UserBean
        Bean bean = setUp.get(0);
        dataTest(bean);

    }

    public void testUserData2() throws Exception {

        // UserBean
        Bean bean = setUp.get(1);
        dataTest(bean);

    }
public void dataTest(Bean bean) {
        Log.e("testAddNote userbean", bean.toString());

        // Login
        solo.enterText(0, bean.getUserName());
        solo.enterText(1, bean.getPassWord());
        solo.clickOnButton(0);
} 
```

这是我目前运行测试用例的方式，有一种方法可以使用 setUp 元素作为参数多次执行 dataTest(Bean)。意味着我必须使用不同的参数多次调用单个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:08:45.137

我只是注意到，这仅在您使用[https://code.google.com/p/zohhak/时才有效](https://code.google.com/p/zohhak/)

在这种情况下，您可以这样做：

```
@TestWith({ 
           “2,  true”, 
           “6,  false”,
           “19, true” 
})
public void testPrimeNumberValidator(int number, boolean isPrime) { 
assertThat(… 
} 
```

# windows - Leiningen repl 项目中的 EOF 异常

> ID：15919309
> 
> 赞同：3
> 
> 时间：2013-04-10T07:13:27.530
> 
> 标签：windows, clojure, leiningen

刚刚在 Windows XP 上的 D:\lein\ 中安装了 Leiningen 2.1.2 (lein.bat)，将此目录添加到路径中。

然后我开始 repl

```
D:\lein>lein repl 
```

它运行良好。

它也可以在其他目录中运行并且可以很好地执行命令。

然后我制作了示例项目“helloworld”：

```
D:\lein>lein new app helloworld 
```

Lein 使用示例应用程序制作了项目目录。

然后我去项目目录

```
D:\lein>cd helloworld 
```

现在我在项目文件夹中运行命令：

```
D:\lein\helloworld>lein repl 
```

并得到这个错误：

```
Exception in thread "main" clojure.lang.LispReader$ReaderException: java.lang.Ru
ntimeException: EOF while reading string
    at clojure.lang.LispReader.read(LispReader.java:220)
    at clojure.core$read.invoke(core.clj:3407)
    at clojure.core$read.invoke(core.clj:3405)
    at clojure.main$eval_opt$fn__6602.invoke(main.clj:306)
    at clojure.main$eval_opt.invoke(main.clj:306)
    at clojure.main$initialize.invoke(main.clj:327)
    at clojure.main$script_opt.invoke(main.clj:353)
    at clojure.main$main.doInvoke(main.clj:440)
    at clojure.lang.RestFn.invoke(RestFn.java:3894)
    at clojure.lang.Var.invoke(Var.java:527)
    at clojure.lang.AFn.applyToHelper(AFn.java:410)
    at clojure.lang.Var.applyTo(Var.java:532)
    at clojure.main.main(main.java:37)
    Caused by: java.lang.RuntimeException: EOF while reading string
    at clojure.lang.Util.runtimeException(Util.java:219)
    at clojure.lang.LispReader$StringReader.invoke(LispReader.java:461)
    at clojure.lang.LispReader.readDelimitedList(LispReader.java:1148)
    at clojure.lang.LispReader$ListReader.invoke(LispReader.java:982)
    at clojure.lang.LispReader.readDelimitedList(LispReader.java:1148)
    at clojure.lang.LispReader$ListReader.invoke(LispReader.java:982)
    at clojure.lang.LispReader.readDelimitedList(LispReader.java:1148)
    at clojure.lang.LispReader$ListReader.invoke(LispReader.java:982)
    at clojure.lang.LispReader.readDelimitedList(LispReader.java:1148)
    at clojure.lang.LispReader$ListReader.invoke(LispReader.java:982)
    at clojure.lang.LispReader.readDelimitedList(LispReader.java:1148)
    at clojure.lang.LispReader$ListReader.invoke(LispReader.java:982)
    at clojure.lang.LispReader.read(LispReader.java:185)
    ... 12 more
Exception in thread "Thread-1" clojure.lang.ExceptionInfo: Subprocess failed {:e
xit-code 1}
    at clojure.core$ex_info.invoke(core.clj:4327)
    at leiningen.core.eval$fn__2654.invoke(eval.clj:213)
    at clojure.lang.MultiFn.invoke(MultiFn.java:231)
    at leiningen.core.eval$eval_in_project.invoke(eval.clj:283)
    at leiningen.repl$start_server.invoke(repl.clj:117)
    at leiningen.repl$server$fn__6110.invoke(repl.clj:173)
    at clojure.lang.AFn.applyToHelper(AFn.java:159)
    at clojure.lang.AFn.applyTo(AFn.java:151)
    at clojure.core$apply.invoke(core.clj:617)
    at clojure.core$with_bindings_STAR_.doInvoke(core.clj:1788)
    at clojure.lang.RestFn.invoke(RestFn.java:425)
    at clojure.lang.AFn.applyToHelper(AFn.java:163)
    at clojure.lang.RestFn.applyTo(RestFn.java:132)
    at clojure.core$apply.invoke(core.clj:621)
    at clojure.core$bound_fn_STAR_$fn__4102.doInvoke(core.clj:1810)
    at clojure.lang.RestFn.invoke(RestFn.java:397)
    at clojure.lang.AFn.run(AFn.java:24)
    at java.lang.Thread.run(Unknown Source)
REPL server launch timed out. 
```

我觉得我错过了一些东西，或者我的系统不知何故搞砸了。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:29:58.807

解决了

安装JDK而不是JRE，它工作正常。

还

当来自 jre-s 的“java.exe”首先出现在路径上时，可能会出现问题，我已经通过递归查找 java.exe 的“位置”并从除 jdk 路径之外的所有路径中删除它的存在来清理系统。

有可能 ：

1.  在 windows\system32 文件夹下/只需从那里删除它

2.  在 jdk-s path-s 下 /just 从 $PATH 变量中删除那个 path-s

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T15:46:09.373

您必须将脚本**lein.bat**中的 lein 版本 从 2.1.3 更改为 2.1.0 **LEIN_VERSION=2.1.0**然后在命令提示符下输入命令**lein self-install**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T23:25:36.837

这对我有用：

*   删除目录 %home%.lein 及其下的所有内容/文件
*   下载win安装程序[http://leiningen-win-installer.djpowell.net/](http://leiningen-win-installer.djpowell.net/)
*   安装 leiningen
*   像这样运行 repl：

    [WINKEY + R]
    CMD.EXE [ENTER]
    C:>\ lein repl

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T16:40:08.020

从 jdk 1.6 升级到 jdk 1.7 为我解决了这个问题。

# javascript - Dynamics CRM：Javascript 触发打开对话框

> ID：15919311
> 
> 赞同：0
> 
> 时间：2013-04-10T07:13:28.657
> 
> 标签：javascript, dialog, dynamics-crm-2011, onload-event, topendialog

我正在尝试创建 javascript 来打开一个对话框。

一旦当前记录上名为“new_mstatus”的字段的值等于“非活动”并且用户打算打开此记录，就会打开一个对话框。

```
function opendialog() {
   if(Xrm.Page.ui.getFormType() == 1)
   {
       Xrm.Page.data.entity.save(null);
       return;
   }

   // If inactive then trigger dialog
   if (Xrm.Page.getAttribute("new_mstatus").getValue() == 'Inactive') {

       window.open("/" + Xrm.Page.context.getOrgUniqueName() + "/cs/dialog/rundialog.aspx?DialogId=%7b840D55C6-8307-450B-977F-6A9C9844CCE7%7d&EntityName=appointment&ObjectId=" + Xrm.Page.data.entity.getId());

       // Set as being displayed so it doesn't trigger again on load
       Xrm.Page.getAttribute("new_displayeddialog").setValue(true);

   }
} 
```

但它不起作用。甚至没有错误弹出。

有人可以帮帮我吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:32:19.023

`getValue`问题是您正在根据字符串（`Inactive`在您的情况下）检查选项集数值（由函数获取）。

所以你有两种可能性：

*   找到选项集的值`Inactive`（这是正确的方法）

```
// assuming 900000000 is the value for Inactive
if (Xrm.Page.getAttribute("new_mstatus").getValue() == 900000000) { 
```

*   使用函数获取选项集的标签而不是值`getText`（不建议，因为如果标签更改将不起作用，例如在多语言环境中）

```
if (Xrm.Page.getAttribute("new_mstatus").getText() =='Inactive') { 
```

# facebook - Spring Social facebook + Spring Security

> ID：15919315
> 
> 赞同：6
> 
> 时间：2013-04-10T07:13:40.537
> 
> 标签：facebook, spring, spring-security, spring-social

我想使用 Spring Security 将 Spring Social facebook 集成到我的应用程序中（我使用 xml 配置）。我所需要的只是将 facebook 帐户与我的应用程序帐户连接起来。在简单的例子中，我发现了这个：

```
<bean id="connectionRepository" factory-method="createConnectionRepository" 
      factory-bean="usersConnectionRepository" scope="request">
    <constructor-arg value="#{request.userPrincipal.name}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean> 
```

所以，据我了解，这种方法开始发挥作用：

```
public ConnectionRepository createConnectionRepository(String userId) {
        if (userId == null) {
            throw new IllegalArgumentException("userId cannot be null");
        }
        return new JdbcConnectionRepository(userId, jdbcTemplate, connectionFactoryLocator, textEncryptor, tablePrefix);
    } 
```

它`userId`从`#{request.userPrincipal.name}`. 所以，我的问题是：`userId`如果我想`userId`使用`SecurityContextHolder.getContext().getAuthentication().getPrincipal()`.

我看到的唯一方法是创建我的实现`JdbcUsersConnectionRepository`并重新定义`createConnectionRepository(String userId)`方法。但也许有更优雅的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:06:50.410

还有另一种方法：

```
<bean id="connectionRepository" factory-method="createConnectionRepository" factory-bean="usersConnectionRepository"
    scope="request">
    <constructor-arg value="#{authenticationService.getAuthenticatedUsername()}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean>

@Service("authenticationService")
public class AuthenticationService {

    public String getAuthenticatedUsername() {
        return SecurityContextHolder.getContext().getAuthentication().getPrincipal();
    }

} 
```

你也可以在 SPeL 中完成它（我不喜欢这种依赖）：

```
<bean id="connectionRepository" factory-method="createConnectionRepository" factory-bean="usersConnectionRepository"
    scope="request">
    <constructor-arg value="#{T(org.springframework.security.core.context.SecurityContextHolder).getContext().getAuthentication().getPrincipal()}" />
    <aop:scoped-proxy proxy-target-class="false" />
</bean> 
```

# css-position - 位置有没有解决方案：固定在旧的移动浏览器中

> ID：15919316
> 
> 赞同：0
> 
> 时间：2013-04-10T07:13:51.720
> 
> 标签：css-position

很多老的手机浏览器不支持position:fixed，我自己写了一个sloution，可以，但是不够流畅。

我用谷歌搜索，现在没有运气。

所以我想知道是否有“平滑”的解决方案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:29:13.997

我认为最好提及您遇到问题的浏览器。例如，我假设您在使用 IE6 时遇到问题。我将尝试根据我的假设回答您的问题。因此，body 和 html 内容的 100% 高度是为了以防您想沿浏览器窗口的底部边缘进行固定定位。

像这样：

```
* { margin:0; padding:0; }
html, body {
   height: 100%;
}
body #fixedElement {
   position:fixed !important;
   position: absolute; /*ie6 and above*/
   top: 0;
   right: 0;
}
#page-wrap {
    width: 600px;
    margin: 0 auto; 
    font: 16px/2 Georgia, Serif;
} 
```

希望这会有所帮助 当遇到与 CSS 相关的问题时，请检查此站点

[http://css-tricks.com/snippets/css/fixed-positioning-in-ie-6/](http://css-tricks.com/snippets/css/fixed-positioning-in-ie-6/)

# java - 谁调用了类初始化方法 什么时候？

> ID：15919317
> 
> 赞同：11
> 
> 时间：2013-04-10T07:13:51.947
> 
> 标签：java, jvm, bytecode

我知道**new**，**dup**，**invokespecial**和**astore**`<init>`字节码模式将在有人从 Java 语言的角度实例化 Java 类时调用实例初始化方法，但我从来不知道是谁调用了这个特殊`<clinit>`方法，什么时候会发生这种情况？

我的猜测是在方法**之前**`<clinit>`调用。任何机构都可以给我一些信息来证明这一点吗？这是否记录在 JVM 规范或 Java 语言规范中？ **`<init>`**

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T07:17:14.503

JVM 规范[§2.9。特殊方法](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.9)：

> 一个类或接口最多有一个类或接口初始化方法，并通过调用该方法进行初始化（第 5.5 节）。类或接口的初始化方法具有特殊名称`<clinit>`，不带参数，并且是无效的（第 4.3.3 节）。
> 
> 该名称`<clinit>`由编译器提供。因为名称不是有效的标识符，所以不能直接在用 Java 编程语言编写的程序中使用。**Java虚拟机隐式调用类和接口初始化方法；它们永远不会从任何 Java 虚拟机指令中直接调用，而只是作为类初始化过程的一部分间接调用。**

有关类初始化过程的更多详细信息，请参见[第 5 章。](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T07:46:29.527

`<clinit>`是javac添加的静态方法，类加载后被JVM调用。我们可以使用字节码大纲工具在类字节码中看到这个方法。请注意，`<clinit>`仅当类需要静态初始化时才添加，例如

```
public class Test1 {
    static int x  = 1; 

    public static void main(String[] args) throws Exception {
    }
}

public class Test2 {
    static final int x  = 1; 

    public static void main(String[] args) throws Exception {
    }
} 
```

Test1 有`<clinit>`，因为它的字段`x`需要初始化为 1；而 Test2 没有`<clinit>`方法，因为它`x`是一个常数。

有趣的是，它的`Class.forName`参数`boolen intialize`决定了类是否应该在加载后初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:23:28.973

`<clinit>`是类的静态初始化块，静态字段初始化及其由JVM调用。

Java 规范说， http: [//java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#12174](http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html#12174)

```
The initialization method of a class or interface is static and takes no arguments. It has the special name <clinit>. This name is supplied by a compiler. Because the name <clinit> is not a valid identifier, it cannot be used directly in a program written in the Java programming language. Class and interface initialization methods are invoked implicitly by the Java virtual machine 
```**

# magento - 如何将属性添加到管理产品的自定义选项卡

> ID：15919318
> 
> 赞同：1
> 
> 时间：2013-04-10T07:13:57.410
> 
> 标签：magento, tabs, product, custom-attributes

我在管理产品上创建了一个选项卡。通过以下方式。

```
 <adminhtml_catalog_product_edit>
    <reference name="product_tabs">
        <action method="addTab" ifconfig="customoptionspricing/general/enable" ifvalue="1">
            <name>customoptionspricing_tab</name>
            <block>customoptionspricing/adminhtml_catalog_product_tab</block>
        </action>
    </reference>
</adminhtml_catalog_product_edit> 
```

选项卡显示完美，我在其 phtml 文件中显示了一些自定义数据。

现在我必须在此选项卡的内容中显示产品自定义属性。我不知道如何使用此 phtml 文件或任何其他方式添加此内容。

我试图添加这样的属性：

```
 $setup = new Mage_Eav_Model_Entity_Setup('core_setup');
    $setup->addAttribute('catalog_product', 'is_cop_product', array(
                 'group'    => 'Custom Options Pricing',
                 'label'    => 'Is Custom Options Pricing (COP) Product',            
                 'type' => 'int',
                 'input'    => 'boolean',                     
                 'visible'  => true,
                 'required' => true,
                 'position' => 1,
                 'global'   => 'Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL',
         'note'    => "is product a cop product"
    )); 
```

但这样它会创建另一个具有此属性的选项卡（新组）。

所以我需要在我已经创建的选项卡上添加这个属性。？？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T14:18:57.463

尝试设置`used_in_forms`。

```
Mage::getSingleton( 'eav/config' )
    ->getAttribute( 'catalog_product','is_cop_product')
    ->setData( 'used_in_forms', array( 'customoptionspricing_tab' ) )
    ->save(); 
```

这在 1.8 和 1.9 上对我们有用。在我们的例子中，这是一个客户属性，但我不明白为什么它不适用于产品。

# android - Android：在单独的线程中将许多子项添加到布局中

> ID：15919321
> 
> 赞同：2
> 
> 时间：2013-04-10T07:14:00.393
> 
> 标签：android, multithreading, layout, children

我有一个带有 Button 和 GridLayout 的活动，其中有很多孩子。如果我在 onCreate() 中添加所有这些孩子，我的活动会出现在屏幕上，但有延迟：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LinearLayout main = new LinearLayout(this);
    main.setOrientation(LinearLayout.VERTICAL);

    Button button = new Button(this);
    button.setText("test");
    main.addView(button);

    GridLayout testGrid = new GridLayout(this);
    testGrid.setColumnCount(5);
    for (int i = 0; i < 100; i++)
        testGrid.addView(new Button(this));
    main.addView(testGrid);

    setContentView(main);
} 
```

但我至少希望我的 Button 立即出现，所以我尝试将子项添加到线程中的网格中。经过实验，我得出了这个解决方案：

```
 final GridLayout testGrid = new GridLayout(this);
    testGrid.setColumnCount(5);
    main.addView(testGrid);
    Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        public void run() {
            new Thread(new Runnable() {
                public void run() {
                    for (int i = 0; i < 100; i++)
                        MyActivity.this.runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                testGrid.addView(new Button(testGrid.getContext()));
                            }
                        });
                }
            }).start();
        }
    }, 1); 
```

但我不确定这是一个好主意，因为它看起来有点复杂，可能在某些设备上效果不佳。有更好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:24:27.053

当你必须做这样的事情时，这清楚地表明你做错了什么。如果您真的需要 100 个网格中的按钮，也许您应该考虑使用 GridView 而不是 GridLayout 并通过简单的适配器将按钮加载到视图中。

# java - 基于文本文档的索引在调色板上实现图像索引 (Solr)

> ID：15919325
> 
> 赞同：2
> 
> 时间：2013-04-10T07:14:19.873
> 
> 标签：java, solr, solrj

我在 solr 文档中添加了 doubletype 字段。但它被添加为**字符串字段名、字符串 [] 字段值的映射，**因为预构建的 API 仅支持它。那么这是否意味着我无法在 solr 中执行范围查询？

我已将色域定义为动态**TrieDoubleField**，索引并存储在 schema.xml 中。所以我必须能够根据色域对其进行排序？

这种方法对吗？

并且在索引之后我应该预处理查询以专门提取*颜色字段名称*还是 solr 自动提取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-03T04:00:56.287

好的，让我们尝试简化您的问题，您想要搜索颜色列表。颜色可能会转换为文本，例如蓝色和海洋蓝。将您的颜色与空格一起存储为字段中的列表。

然后搜索这样的颜色：

```
q: *:*
fq: color:*blue*
will retrieve docs{ blue,blueocean} 
```

文本可以像这样存储 12:134:144 :) 是对您的问题的回应吗？

# python - 从去趋势数据中重建原始数据——Python

> ID：15919327
> 
> 赞同：1
> 
> 时间：2013-04-10T07:14:23.063
> 
> 标签：python, signals, time-series

我从以下 python 代码中获得了去趋势数据：

```
Detrended_Data = signal.detrend(Original_Data) 
```

python中是否有一个函数可以使用“Detrended_Data”和一些“校正因子”重建“Original_Data”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:34:47.630

你指的是[scipy.signal.detrend](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.detrend.html)吗？如果是这样，答案是否定的——没有（也永远不可能是）取消趋势功能。`detrend`将许多数组映射到同一个数组。例如，

```
import numpy as np
import scipy.signal as signal

t = np.linspace(0, 5, 100)    
assert np.allclose(signal.detrend(t), signal.detrend(2*t)) 
```

如果有一个`undetrend`函数，它必须映射`signal.detrend(t)`回`t`，也映射`signal.detrend(2*t)`回`2*t`。那是不可能的，因为`signal.detrend(t)`与 是同一个数组`signal.detrend(2*t)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:35:56.837

我想你可以`numpy`用来趋势你的数据。这不会正确地为您提供原始数据，但它会减少“嘈杂”。

[阅读此问题](https://stackoverflow.com/questions/6939901/average-trend-curve-for-data-points-in-python)，因为它对此进行了更详细的介绍。

# dynamics-crm-2011 - 如何在 CRM 中使用 JavaScript 打开现有实体表单？

> ID：15919329
> 
> 赞同：2
> 
> 时间：2013-04-10T07:14:43.047
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4

如果单击自定义功能区按钮，是否可以使用 JavaScript 打开现有实体表单，或者是否有其他方法可以打开现有表单（例如活动表单）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T12:55:05.177

```
function PopNewCase() { 
     Xrm.Utility.openEntityForm("incident", "GUID_OF_EXISTING_CASE"); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T07:26:58.983

是的，你可以，检查这个链接。这解释了 JavaScript 部分。 [http://social.microsoft.com/Forums/en-US/crmdevelopment/thread/de870f82-a4e0-49fa-abfd-06918098c86e](http://social.microsoft.com/Forums/en-US/crmdevelopment/thread/de870f82-a4e0-49fa-abfd-06918098c86e) 您需要将实体类型和记录的 guid 传递到 url。

这里解释了如何在功能区按钮单击时调用 JavaScript 函数， [http://nishantrana.wordpress.com/2010/11/04/using-javascript-in-a-custom-button-in-crm-2011/](http://nishantrana.wordpress.com/2010/11/04/using-javascript-in-a-custom-button-in-crm-2011/)

使用 Visual Ribbon Editor 可能会使事情变得更容易一些。 [http://crmvisualribbonedit.codeplex.com/](http://crmvisualribbonedit.codeplex.com/)

* * *

**[编辑：来自http://msdn.microsoft.com/en-us/library/gg328483.aspx](http://msdn.microsoft.com/en-us/library/gg328483.aspx)的示例**

```
window.open("/main.aspx?etn=account&pagetype=entityrecord&id=%7B91330924-802A-4B0D-A900-34FD9D790829%7D"); 
```

将“account”替换为您想要的实体类型，并将“7B91330924-802A-4B0D-A900-34FD9D790829”替换为您想要的记录的 guid。

可能会使用这样的功能

```
function OpenRecord(entityName, recordId)
{
    window.open("/main.aspx?etn=" + entityName + "&pagetype=entityrecord&id=%7B" + recordId + "%7D");
} 
```

# qt - 将 QRadioButton 值从一个窗口传递到 Qt 中的另一个窗口（没有匹配的调用函数）

> ID：15919333
> 
> 赞同：0
> 
> 时间：2013-04-10T07:15:04.770
> 
> 标签：qt, qradiobutton

我想将选定的 QRadioButton 的值从一个窗口传递到另一个窗口。我对在第二个窗口中接受文本值的函数声明感到困惑，这是我的代码。

窗口1.cpp

```
void SelectOS :: processNextButton(){
if(ui->win32->isChecked()){
QString loc = "WIN/32Bit";
SelectSoftware *ss = new SelectSoftware (loc);
this->hide();
ss->show();
}
else
{
//QMessageBox:warning();
}
} 
```

窗口2.h

```
public:
SelectSoftware(const QString &text, QWidget *parent=0); 
```

窗口2.cpp

```
SelectSoftware::SelectSoftware(const QString &text, QWidget *parent):QMainWindow(parent),ui(new ui::SelectSoftware)
{
QString softpath = text;
qDebug << softpath;
} 
```

但是当我打电话

```
ss = new SelectSoftware(); 
```

或者

```
ss= new SelectSoftware(const QString &text, QWidget *parent); 
```

在 Window2.cpp 中，我收到错误：`no matching function for call to SelectSoftware::SelectSoftware()`

我哪里错了？

**更新**

窗口2.cpp

```
#include "selectsoftware.h"
#include "ui_selectsoftware.h"

SelectSoftware *ss;
QStringList selectedModuleList;

SelectSoftware::SelectSoftware(const QString &text, QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::SelectSoftware)
{
    ui->setupUi(this);
    softpath = text;
    setWindowPosition();
    getSoftwareDetails();
    initializeUi();
}

SelectSoftware::~SelectSoftware()
{
    delete ui;
}

void SelectSoftware::setWindowPosition()
{
    QDesktopWidget *desktop = QApplication::desktop();
    int x = (desktop->width() - size().width())/2;
    int y = (desktop->height() - size().height())/2;
    move(x, y-50);
    setFixedSize(size().width(), size().height());
}

void SelectSoftware::cancel()
{
    qApp->exit(0);
}

    void SelectSoftware::showMainPage()
    {
        ss = new SelectSoftware(softpath); // here its creating problem, not going forward and app is crashing!!!

        for(int j = 0; j < softwareList.size(); j++){
            if(checkBox[j]->isChecked()){
                if(!comboBox[j]->currentIndex()){
                    QMessageBox::warning(this, "Select version !", "Select version number for all selected software");
                    return;
                }
            }
        }

        for(int i = 0; i < softwareList.size(); i++){
            if(checkBox[i]->isChecked()){
                ss->selectedSoftList.push_back(checkBox[i]->text());
                ss->selectedVerList.push_back(comboBox[i]->currentText());
            }
        }

        if(!ss->selectedSoftList.size()){
            QMessageBox::warning(this, "No product Selected !", "Select one");
            return;
        }

    else{
            SelectionPage* sp = new SelectionPage;
            this->hide();
            sp->show();
        }
    }

    void SelectSoftware::test(const int id) 
    {
        if(checkBox[id]->isChecked()){
            comboBox[id]->setEnabled(true);
            comboBox[id]->addItem(" Select anyone ");
            QString path = qApp->applicationDirPath() + "/products/" + checkBox[id]->text();

            QDir dir;
            dir.cd(path);
            dir.setFilter(QDir::Dirs | QDir::NoDotAndDotDot);

            QFileInfoList list = dir.entryInfoList();
            for (int i = 0; i < list.size(); ++i) {
                QFileInfo fileInfo = list.at(i);
                comboBox[id]->addItem(fileInfo.fileName());
            }

        }else{
            comboBox[id]->clear();
            comboBox[id]->setDisabled(true);
        }
    }

    void SelectSoftware::getSoftwareDetails()
    {
        QString fileName = qApp->applicationDirPath() + "/abc/" + SOFTWARELIST;
        QFile file(fileName&#41;;
        if (!file.open(QIODevice::ReadOnly | QIODevice::Text&#41;){
            QString msg = "Could not find the file " + fileName;
            errorExit(msg);
        }

        QTextStream in(&file);
        while (!in.atEnd()) {
            QString line = in.readLine();
            processLine(line.toLower());
        }
    }

    void SelectSoftware::processLine(QString str)
    {
        QStringList list = str.split(",");
        QDir path = qApp->applicationDirPath() + "/products/" + list[0];
        if(path.exists() && (list.size() == 2)){
            QString tmp = list[0];
            tmp = tmp.toLower();
            softwareList.push_back(tmp);
        }
    }

    void SelectOption::initializeUi()
    {
        this->setWindowTitle("Window2");

        QGridLayout *gridLayout1 = new QGridLayout();
        gridLayout1->setMargin(5);
        gridLayout1->setSpacing(5);

        QSignalMapper* signalMapper = new QSignalMapper();

        for(int i = 0; i < list.size(); i++){
            radioButton[i] = new QRadioButton();
            radioButton[i]->setText(softwareList[i]);
            signalMapper->setMapping(radioButton[i], i);
            gridLayout1->addWidget(radioButton[i], i/1, i%1);
            connect(radioButton[i], SIGNAL(clicked()),signalMapper, SLOT(map()));
        }

    connect(signalMapper, SIGNAL(mapped(const int &)),this, SIGNAL(radioChecked(const int &)));
    connect(this, SIGNAL(radioChecked(const int &)),this, SLOT(test(const int)));

        QGridLayout *gridLayout2 = new QGridLayout();
        gridLayout2->setMargin(5);
        gridLayout2->setSpacing(5);

        for(int j = 0; j < list.size(); j++){
            comboBox[j] = new QComboBox();
            comboBox[j]->setDisabled(true);
            gridLayout2->addWidget(comboBox[j], j/1, j%1);
        }

        QPushButton *nextButton = new QPushButton("Next >");
        nextButton->setDefault(true);
        connect(nextButton, SIGNAL(clicked()), this, SLOT(showMainPage()));

        QPushButton *backButton = new QPushButton("< Back");
        backButton->setDefault(true);
        connect(backButton, SIGNAL(clicked()), this,     SLOT(showSelectOS()));

        QPushButton *cancelButton = new QPushButton("Cancel");
        cancelButton->setDefault(true);
        connect(cancelButton, SIGNAL(clicked()), this, SLOT(cancel()));

        QHBoxLayout *hboxlayout;
        hboxlayout = new QHBoxLayout();
        hboxlayout->addLayout(gridLayout1);
        hboxlayout->addLayout(gridLayout2);

        QHBoxLayout *layout;
        layout = new QHBoxLayout();
        layout->addStretch(10);
        layout->addWidget(nextButton);
        layout->addWidget(backButton);
        layout->addWidget(cancelButton);
        layout->addStretch(10);

        QVBoxLayout *mainLayout;
        mainLayout = new QVBoxLayout();
        mainLayout->addLayout(hboxlayout);
        mainLayout->addLayout(layout);
        ui->centralwidget->setLayout(mainLayout);
    }

    QVector<QString> SelectSoftware::getSelectedSoftware()
    {
        return ss->selectedSoftList;
    }

    QVector<QString> SelectSoftware::getSelectedVersion()
    {
        return ss->selectedVerList;
    }

    QStringList SelectSoftware::getSelectedModules()
    {
        return selectedModuleList;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:34:48.710

首先 -[使用信号和插槽，卢克](http://qt-project.org/doc/qt-4.8/signalsandslots.html)

其次，您不能 call `ss = new SelectSoftware();`，因为您没有声明`SelectSoftware`没有参数的构造函数，并且在 C++ 中调用`ss= new SelectSoftware(const QString &text, QWidget *parent);`是非法的。

`SelectSoftware *ss = new SelectSoftware (loc);`不过是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:51:28.587

**1.**在不检查列表不为空的情况下`void SelectSoftware::processLine(QString str)`寻址可能是危险的。`list[0]`我建议您添加：

```
if (!list.size())
    return; 
```

初始化之后。

**2.**在`void SelectOption::initializeUi()`什么地方`list`？你确定`list.size() <= softwareList.size()`吗？如果没有，这是一个潜在的问题。

**3.**什么是`radioButton`？我没有看到它的初始化。如果是`QList < QRadioButton * >`，那就`radioButton[i] = new QRadioButton();`不好了，你应该这样做：

```
radioButton.append(new QRadioButton()); 
```

**4.**同理`comboBox`。

每个列表都可能导致您的应用程序崩溃。我很容易错过一些东西。

# java - 如何使用休眠条件为子对象应用 DISTINCT

> ID：15919334
> 
> 赞同：1
> 
> 时间：2013-04-10T07:15:06.050
> 
> 标签：java, hibernate, hibernate-criteria

我有一个名为“MasterObj”的对象。在那个“MasterObj”中，我有一个名为“EmployeeObj”的子对象（外键）

“MasterObj”和“EmployeeObj”之间的关系是一对多的。

我的“MasterObj”有很多重复的“employeeObj”

我需要使用 DISTINCT 或不重复 emp_SlNo 的 MasterObj 计数

如何使用休眠条件从我的 MasterObj 中过滤重复的 emp_SlNo。

对不起我的英语不好。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:01:05.400

经过这么多的谷歌，我终于得到了这个代码：

```
ProjectionList projList = Projections.projectionList();
projList.add(Projections.property("id.state"));
projList.add(Projections.property("id.uspsCity"));
criteria.setProjection(Projections.distinct(projList)); 
```

它对我来说很好。它从父对象中消除了重复的子对象。

# jpa - 播放【2.11】jpa事务

> ID：15919344
> 
> 赞同：3
> 
> 时间：2013-04-10T07:15:52.567
> 
> 标签：jpa, playframework-2.1, transactional

我正在尝试使用 JPA hibernate 的播放框架，看起来只能将 @Transactional 放在控制器类上。我计划创建另一层服务可能用于 WS 或移动客户端。我想在Service层而不是控制器上启动事务，谁知道怎么做？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:14:07.977

我认为，当您在 play 2.1 中使用 Web Service 中的 EntityManager 时，您可能会遇到与使用 Web Socket 中的 EntityManager 时相同的@Transactional 问题。

[所以你应该这样做，因为我的问题在这里](https://stackoverflow.com/questions/16483650/play-2-1-websocket-no-entitymanager-bound-to-this-thread)得到了回答。我希望它可能会有所帮助，并且它也对您有用。

# android - Android 在版本 >=4.1 时禁用飞行模式

> ID：15919346
> 
> 赞同：4
> 
> 时间：2013-04-10T07:15:57.023
> 
> 标签：android

我需要在我的自助服务终端应用程序中禁用飞行模式，我尝试了下面的代码片段来覆盖设备设置

```
try {
    int airplane = Settings.System.getInt(getApplicationContext().getContentResolver(), "airplane_mode_on");
    if (airplane == 1) {
        getApplicationContext().sendBroadcast(new Intent("android.intent.action.AIRPLANE_MODE").putExtra("state", false));
    }
} catch (SettingNotFoundException e) {
    e.printStackTrace();
} 
```

此代码似乎适用于 android 4.0 版本，而在 4.1 及更高版本中不起作用。我希望通过 root 设备访问系统设置来使其工作。实际上，我的任务是从 nexus 平板电脑的状态栏中禁用飞行模式功能。让我知道有关这些实施的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:24:12.597

对于 Android <= 4.1：

```
static boolean getAirplaneMode(Context context)
{
   return Settings.System.getInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0) != 0;
}

static void setAirplaneMode(Context context, boolean mode)
{
   if (mode != getAirplaneMode(context))
   {
      Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, mode ? 1 : 0);
      Intent newIntent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
      newIntent.putExtra("state", mode);
       context.sendBroadcast(newIntent);
    }
} 
```

对于 Android 4.2，请查看[Modify AIRPLANE_MODE_ON on Android 4.2（及更高版本）](https://stackoverflow.com/questions/13422527/modify-airplane-mode-on-on-android-4-2-and-above/15448650#15448650)

# node.js - 如何使用 Node JS 执行 Windows Shell 命令 (Cmd.exe)

> ID：15919347
> 
> 赞同：19
> 
> 时间：2013-04-10T07:16:08.740
> 
> 标签：node.js, cmd, windows-shell

我想

```
C:\>ACommandThatGetsData > save.txt 
```

但是我不想在控制台中解析和保存数据，而是想用**Node.JS执行上述命令**

如何使用**Node.JS**执行 shell 命令？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T07:19:24.473

~~使用[`process.execPath()`](http://nodejs.org/api/process.html#process_process_execpath)：~~

 ~~```
process.execPath('/path/to/executable'); 
```~~  ~~### 更新

我应该更好地阅读文档。

有一个允许执行子进程的[子进程模块。](http://nodejs.org/api/child_process.html)您将需要`child_process.exec`或`child_process.execFile`。`child_process.spawn`所有这些在使用上都是相似的，但每个都有自己的优点。使用哪一个取决于您的需求。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-23T16:18:47.563

你也可以试试[node-cmd](https://www.npmjs.com/package/node-cmd)包：

```
const nodeCmd = require('node-cmd');
nodeCmd.get('dir', (err, data, stderr) => console.log(data)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-04T23:27:39.640

我知道这个问题很老，但它帮助我使用 Promise 找到了我的解决方案。另请参阅：[此问题和答案](https://stackoverflow.com/questions/12941083/execute-and-get-the-output-of-a-shell-command-in-node-js/50335035#50335035)

```
const util = require('util');
const exec = util.promisify(require('child_process').exec);

async function runCommand(command) {
  const { stdout, stderr, error } = await exec(command);
  if(stderr){console.error('stderr:', stderr);}
  if(error){console.error('error:', error);}
  return stdout;
}

async function myFunction () {
    // your code here building the command you wish to execute ...
    const command = 'dir';
    const result = await runCommand(command);
    console.log("_result", result);
    // your code here processing the result ...
}

// just calling myFunction() here so it runs when the file is loaded
myFunction(); 
```~~

# grails - Grails、Tomcat 7、REST 客户端和字符的 UTF-8 编码

> ID：15919350
> 
> 赞同：4
> 
> 时间：2013-04-10T07:16:30.110
> 
> 标签：grails, utf-8, character-encoding, tomcat7, grails-2.0

我正在尝试将以下字符串“`.4.13 - 30613 £ ₤ © ™”发布到 Grails 服务器一旦部署为 WAR 并且在 Tomcat7 的两个实例之间进行通信时我没有运气

我们的服务器作为 API 工作，而 Web 层完全独立。数据通过对 Web App 的 POST 请求保存到 DB，然后 Web App 向服务器发送 POST（或 PUT 更新）请求以保存数据。

当我使用“Run-App”启动 Web 应用程序和服务器时，这在本地可以正常工作，但当我们使用 Tomcat7 移动到非本地环境并部署 WAR 文件时则不行。

最初我认为这可能与报告的错误[http://jira.grails.org/browse/GRAILS-8873](http://jira.grails.org/browse/GRAILS-8873)有关，但经过仔细检查，似乎 UTF-8 无论如何都是默认值，并且目前正在使用

非本地环境使用以下结构（Tomcat7中部署的WAR）

```
Entry Point -> Apache 2.2 < - > Web App < - > Server 
```

本地环境使用以下结构（运行应用程序）

```
Entry Point -> Web Abb < - > Server 
```

我已将编组时的值输出为字符串，以确保在将其发送到服务器之前，它具有正确的编码

```
DEBUG MarshallService  - Marshalling Property : name of value [ `.4.13 - 30613 £ ? © ™] 
```

这直接来自从 Web 应用程序到服务器的传出请求的日志忽略内容长度错误的事实，为了便于阅读，我已经截断了正文。

```
DEBUG org.apache.http.headers  - >> PUT /baseline-server/baseline/pwqi9tzyTRWX5oZogfKjJw HTTP/1.1
DEBUG org.apache.http.headers  - >> Accept: application/json; charset=utf-8
DEBUG org.apache.http.headers  - >> Content-Length: 349
DEBUG org.apache.http.headers  - >> Content-Type: application/json
DEBUG org.apache.http.headers  - >> Host: localhost:9001
DEBUG org.apache.http.headers  - >> Connection: Keep-Alive
DEBUG org.apache.http.headers  - >> Accept-Encoding: gzip,deflate
DEBUG org.apache.http.wire  - >> "{"name":"`.4.13 - 30613 [0xa3] ? [0xa9] [0x99]"} 
```

我已经阅读了其他几个位置的几个答案并完成了以下操作

在任何 VirtualHost 之前的 Apache 2.2 HTTPD.conf

```
AddDefaultCharset utf-8 
```

在两个 Tomcat 实例中 (Web.xml)

```
<filter>
    <filter-name>setCharacterEncodingFilter</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <async-supported>true</async-supported>
</filter> 
```

此外，根据其他答案，我确保我们使用的是 webxml 1.4.1

然而，当值到达服务器端时，值都是 ???

我发现特别奇怪的是传出的 JSON 似乎根本没有显示 UTF-8 字符

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:40:12.797

我可以建议一些配置来尝试....让我知道是否可以解决您的问题:)

你是ubuntu还是其他linux？尝试设置

```
LANG="en_US.UTF-8"
LANGUAGE="en_US:en"
LC_ALL="en_US.UTF-8" 
```

在 /etc/default/locale 并运行

```
sudo locale-gen 
```

（并重新启动）

你在使用数据库连接吗？检查 config/dasource.groovy 中的连接是否为 utf8

```
url = "jdbc:mysql://localhost/?useUnicode=true&characterEncoding=UTF-8" 
```

将此设置放入您的 /etc/Config.groovy

```
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8" 
```

检查您的 tomcat 连接器是否配置为 utf8

```
<Connector ... URIEncoding="UTF-8"> 
```

# iphone - 当用户使用objective-c在ios的monotouch中选择DatePicker控件中的特定日期和时间时，我想在标签中显示日期和时间

> ID：15919351
> 
> 赞同：0
> 
> 时间：2013-04-10T07:16:32.267
> 
> 标签：iphone, ios, objective-c

我是 ios 应用程序的新手，我尝试了一个示例进行`DatePicker`控制，但问题是，我只得到当前的日期和时间。

我添加了`DatePicker`控制并`label`在 Xcode 中查看，我添加了这个

```
lblDtp.Text = dtp.Date.ToString (); 
```

在`ViewDidLoad ()`其工作正常并显示当前日期和时间但我喜欢在用户选择特定日期和时间`DatePicker`控制时在标签中显示日期和时间。你能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:25:22.307

尝试这个

```
NSDate *appDate = [datePicker date];
NSDateFormatter *form = [[NSDateFormatter alloc] init];
[form setDateFormat:@"YYYYMMddHHmmss"];
NSString *str = [form stringFromDate:appDate];
lblDtp.Text = str; 
```

`datePicker`是你的 DatePicker

# visual-c++ - 如何在 MFC 智能设备应用程序 VC++ 中使用 CFileFind？

> ID：15919352
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:16:35.057
> 
> 标签：visual-c++, mfc, cfile, cfilefind

我收到这样的错误

```
 error C2065: 'CFileFind' : undeclared identifier
 error C2146: syntax error : missing ';' before identifier 'finder' 
 error C2065: 'finder' : undeclared identifier  
 error C2065: 'finder' : undeclared identifier 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:35:56.437

来自 CFileFind 文档： http: [//msdn.microsoft.com/en-US/library/f33e1618 (v=VS.80).aspx](http://msdn.microsoft.com/en-US/library/f33e1618(v=VS.80).aspx)

“智能设备项目不支持此类”

# linux - 如何重新排序 C 头文件中的包含？

> ID：15919353
> 
> 赞同：0
> 
> 时间：2013-04-10T07:16:38.173
> 
> 标签：linux, bash, sed, awk, grep

我有许多 .cpp 和 .hpp 文件，其中包含一个#include“my.hpp”，我想将其移动到每个文件中，使其成为最后一个包含，如下所示：

当前的：

```
#include "my.hpp"
#include "foo.hpp"
#include "bar.hpp" 
```

或者

```
#include "whatever.hpp"
#include "my.hpp"
#include "bar.hpp" 
```

需要：

```
#include "whatever.hpp"
#include "something.hpp"
#include "my.hpp" 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:45:43.753

你可以使用 find 和 perl：

```
find . -name "*.?pp" -exec perl -0777 -pi -e 's/(#include "my.hpp"\n)((#include .*\n)*)/$2$1/g' {} \; 
```

e：忘记添加-0777（启用多行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:34:09.753

我没有时间编写完整的脚本，但这里有一个想法：

1.  运行`grep`以仅查找包含的文件`#include "my.hpp"`并仅在这些文件上运行以下阶段
2.  使用类似的东西剪切有问题的包含行`sed 's/#include "my.hpp"'//`
3.  `tac`使用and查找最后一个包含行`sed`并将其附加到您的包含行 - 有关详细信息，请参阅[此问题和接受的答案](https://stackoverflow.com/questions/7724778/sed-return-last-occurrence-match-until-end-of-file)。我猜是这样的

    `tac | sed 's/^\(#include .*\)$/\1\n#include "my.hpp"/q' | tac`

详细信息可能取决于您的确切文件，所以 YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:45:33.547

这可能对您有用（GNU sed）：

```
sed -rsi '/^#include\b/!b;:a;/#include\b[^\n]*$/{$bb;N;ba};:b;s/(#include my.hpp"\n)(.*)(#include\b[^\n]*\n)/\3\2\1/' file1 file2 filen 
```

这假定它们`#includes`是连续的并且不是文件中的最后一个条目。

# drupal - 从 page.tpl.php 访问 html.tpl.php 变量

> ID：15919355
> 
> 赞同：1
> 
> 时间：2013-04-10T07:16:38.857
> 
> 标签：drupal, drupal-7, drupal-theming

问候，我一直在访问 page.tpl.php 中的 html.tpl.php 的 $scripts 变量，如何访问该变量？

我正在使用 Drupal 7

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:38:58.163

为了改变页面的脚本，看看在`hook_js_alter()`自定义模块中实现。这将允许您执行必要的更改而不会弄乱渲染的输出。更多信息[在这里](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_js_alter/7)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:48:26.533

您必须将您想要的变量显式发送到您想要的模板，模板变量是特定于模板的，没有继承或其他干净的方式。

干净的方法是将您需要的内容发送到特定模板，或者如果它存在并执行您想要的操作，则实现一个钩子。

最后，在这种情况下，我认为您必须决定在调用 hook_js_alter 时加载哪些文件作为建议的 jamix。

# c - C 程序：__start

> ID：15919356
> 
> 赞同：8
> 
> 时间：2013-04-10T07:16:43.353
> 
> 标签：c, linux, unix, gcc

你能帮我理解如何

```
__start 
```

在 C 内部使用？

它是函数的精确副本`main`还是编译程序的入口点？

只是想知道，它是如何使用的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T07:25:11.417

[这是对](http://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html)*之前* 程序启动期间发生的情况的一个很好的概述`main`。特别是，它表明从操作系统的角度来看，这`__start`是您程序*的实际入口点。*

它是程序中[指令指针](http://en.wikipedia.org/wiki/Instruction_pointer)开始计数的第一个地址。

那里的代码调用一些 C 运行时库例程只是为了做一些家务，然后调用你的`main`，然后把事情放下，并`exit`用返回的任何退出代码调用`main`。

* * *

一张图片胜过千言万语：

![C运行时启动图](https://i.stack.imgur.com/WY54O.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-14T03:14:39.487

根据 C/C++ 标准，`main()`是程序的起点。如果您使用 GCC，`_start`函数是 C 程序的入口点，它调用`main()`. 函数的主要工作`_start()`是执行一些初始化任务。

```
// $ gcc program_entry.c -nostartfiles
// $ ./a.out
// custom program entry

#include <stdio.h>
#include <stdlib.h>

void program_entry(void);

void
_start(void)
{ 
    program_entry();
}

void
program_entry(void)
{
    printf("custom program entry\n");
    exit(0);
} 
```

如果需要，也可以`-e`在 GCC 中使用 switch 编译程序入口。

```
// $ gcc program_entry.c -e __start
// $ ./a.out
// custom program entr

#include <stdio.h>

void program_entry(void);

void
_start(void)
{ 
    program_entry();
}

void
program_entry(void)
{
    printf("custom program entry\n");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T09:01:54.013

_start 是一个操作系统函数......它是任何程序的入口点......因为我们的编译器知道 main（main 不是预定义函数，它是用户定义的，但所有编译器都知道它们）这个 _start 函数将调用main ，然后我们的程序进入 CPU

# iphone - MapKit 通过自定义引脚和标注路由

> ID：15919358
> 
> 赞同：2
> 
> 时间：2013-04-10T07:17:01.167
> 
> 标签：iphone, objective-c, mapkit, cgcontextref

我在我的地图视图中使用自定义标注自定义了图钉。

在地图上绘制路径时，路线会经过标注和图钉。附图片。

我已经使用谷歌 API 来获取折线并在解码后绘制它。

![在此处输入图像描述](https://i.stack.imgur.com/TFq58.png)

这是代码：

```
 if(!routeView)
    routeView = [[UIImageView alloc] initWithFrame:CGRectMake(0,    self.mapView.frame.origin.y, mapView.frame.size.width, self.mapView.frame.size.height)];
routeView.userInteractionEnabled = NO;
[mapView addSubview:routeView];

[self.lat1 resignFirstResponder];
[self.long1 resignFirstResponder];
[self.lat2 resignFirstResponder];
[self.long2 resignFirstResponder];

NSString* saddr = [NSString stringWithFormat:@"%@,%@",self.lat1.text,self.long1.text];

NSString* daddr = [NSString stringWithFormat:@"%@,%@",self.lat2.text,self.long2.text];

NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.apple.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false", saddr, daddr];

NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

NSError *error;
NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];

NSData *responseData = [apiResponse dataUsingEncoding:NSUTF8StringEncoding];

NSError* error1;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                     options:NSJSONReadingMutableLeaves
                                                       error:&error1];
NSLog(@"Error: %@\n%@",[error1 localizedDescription],[error1 localizedFailureReason]);

if([[json objectForKey:@"status"] isEqualToString:@"OK"])
{
    NSArray *routes1 = [json objectForKey:@"routes"];
    NSDictionary *route = [routes1 lastObject];

    if (route)
    {
        NSString *overviewPolyline = [[route objectForKey: @"overview_polyline"] objectForKey:@"points"];

        routes = [self decodePolyLine:overviewPolyline];

        //NSLog(@"%@",[routes objectAtIndex:0]);

        [self updateRouteView];
        [self centerMap];
    }
}

-(void) updateRouteView
{
 CGContextRef context =     CGBitmapContextCreate(nil,
                                             routeView.frame.size.width,
                                          routeView.frame.size.height,
                                          8,
                                          4 * routeView.frame.size.width,
                                          CGColorSpaceCreateDeviceRGB(),
                                          kCGImageAlphaPremultipliedLast);

CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
CGContextSetLineWidth(context, 3.0);

for(int i = 0; i < routes.count; i++) {
CLLocation* location = [routes objectAtIndex:i];
CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:routeView];

if(i == 0) {
    CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
} else {
    CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
}
}

CGContextStrokePath(context);

CGImageRef image = CGBitmapContextCreateImage(context);
UIImage* img = [UIImage imageWithCGImage:image];

routeView.image = img;
CGContextRelease(context);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:19:10.850

感谢您的回复。我已经使用 MKPolylines 解决了这个问题。参考下面的代码

```
NSInteger numberOfSteps = routes.count;

CLLocationCoordinate2D coordinates[numberOfSteps];
for (NSInteger index = 0; index < numberOfSteps; index++) {
    CLLocation *location = [routes objectAtIndex:index];
    CLLocationCoordinate2D coordinate = location.coordinate;

    coordinates[index] = coordinate;
}

MKPolyline *polyLine = [MKPolyline polylineWithCoordinates:coordinates count:numberOfSteps];
[self.mapView addOverlay:polyLine]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:29:43.967

我认为您的问题是您在添加 pin 后添加了 routeView，因此 routeview 是第一个子视图。如果您尝试首先在 viewDidLoad 方法中添加 routeView 会发生什么？

# git - 如何发现 svn 存储库的布局以进行 svn2git 转换？

> ID：15919359
> 
> 赞同：0
> 
> 时间：2013-04-10T07:17:02.583
> 
> 标签：git, svn, github, git-svn

我正在尝试将`svn`repo 转换为`git`，但是我不完全确定当前`svn`repo 使用的布局。由于我不擅长，`svn`我不确定如何在内部达到峰值`svn`并确定我应该使用什么来获得正确的转换字符串以供[`svn2git`使用](https://github.com/nirvdrum/svn2git#usage)

如果我能确定这一点，我就可以轻松地从那里列出的选项中选择。如果知道如何在 svn 中找到它，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:43:10.730

用于[`svn list http://repository`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.list.html)查看 SVN 存储库的内容。

# java - 如何为单个 IP 获取多个域？

> ID：15919361
> 
> 赞同：0
> 
> 时间：2013-04-10T07:17:11.007
> 
> 标签：java, dnsjava

方法如下——

```
public static String getHostByAddr(byte[] addr) throws UnknownHostException {

    Name name = ReverseMap.fromAddress(InetAddress.getByAddress(addr));

    final String[] servers = new String[] {"208.67.220.220", "208.67.222.222"};
    final Resolver res = new ExtendedResolver(servers);
    final Lookup lookUp = new Lookup(name, Type.PTR);
    lookUp.setResolver(res);
    Record[] records = lookUp.run();
    if (records == null) {
        throw new UnknownHostException();
    }
    return ((PTRRecord) records[0]).getTarget().toString();
} 
```

这是对上述方法的调用-

```
 final InetAddress ip = InetAddress.getByName("198.154.218.168");
    final byte[] bytes = ip.getAddress();
    final String host = getHostByAddr(bytes);
    System.out.println("Host - " + host); 
```

在大多数情况下都可以正常工作，但是当 IP 映射到多个域时会失败 (???)

这是示例-

1.  从[这里](http://www.site24x7.com/find-ip-address-of-web-site.html)获取[securonix.com](http://securonix.com)的 IP ，它是 198.154.218.168
2.  如果我将此 IP 传递给上述方法，则会出现错误
3.  [但如果我在这里](http://www.yougetsignal.com/tools/web-sites-on-web-server/,%20I%20get%20the%20list%20of%204%20domains)尝试相同的 IP ，它会列出 4 个域

[是否可以使用DNSJava](http://www.xbill.org/dnsjava/)做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:51:28.877

一般来说，你不能。正如域 securonix.com 的所有者在其 DNS 服务器上创建了一个将 securonix.com 转换为 198.154.218.168 的条目一样，IP 地址 198.154.218.168 的所有者维护“反向”DNS 记录（通常在单独的服务器上）将 IP 地址映射到默认 DNS 名称。有关反向 DNS 查找的更多信息，请参阅维基百科上的“[反向 DNS 查找](http://en.wikipedia.org/wiki/Reverse_DNS_lookup)”页面，并注意反向 DNS 查找（从 IP 地址到名称）通常由与域名所有者不同的所有者维护，并且它是不仅仅是通过交换名称和 IP 地址“自动”创建的。

*此外*，您提到的站点似乎没有该 IP 地址的反向 DNS 条目，因此您永远不会从标准 DNS 查询中得到 198.154.218.168 的答案；198.154.218.168 根本没有（反向）DNS 条目，上面的代码失败。

作为正向和反向 DNS 查找之间差异的示例，当我第一次获得静态 IP 地址时，我的提供商 (Comcast) 将 IP 地址映射到某个通用名称，例如 75-148-###-###- Houston.hfc.comcastbusiness.net（随机 IP 地址示例），我曾要求他们修改反向 DNS 条目以映射到我的域名，以便 IP 地址和域名的正向和反向查找匹配。**他们在他们的**DNS 服务器上维护 IP 地址的查找，而我在**我**的 DNS 服务器上维护域名的查找。

yougetsignal.com 上的页面肯定一直在对名称进行 DNS（前向）查找，并将它们存储在可供购买的巨大数据库中，这使得网页可以找到具有相同 IP 的所有名称。但是，没有简单的方法可以通过查询 DNS 服务器对任意 IP 地址执行此操作，除非您有大量额外信息或已经完成了数百万次类似该站点的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T16:28:38.610

我发现有两个网站提供此功能。但是我不知道他们如何实现该功能。

*   [http://reverseip.domaintools.com/](http://reverseip.domaintools.com/)
*   [http://ipaddress.com/reverse_ip/](http://ipaddress.com/reverse_ip/)

更新：domaintools 提供 api 调用。也许您可以调用 domaintools api 来获取单个 IP 的多个域名。

# jsf - 如何访问 ServletContextListener 的 contextDestroyed 中的 bean

> ID：15919365
> 
> 赞同：2
> 
> 时间：2013-04-10T07:17:19.443
> 
> 标签：jsf, servlets, jpa, seam, jsf-1.2

我有一个使用 JSF 1.2 和 Servlets 2.3 和 Seam 2.2.0 的 JSF 应用程序。我想在每次应用程序关闭时运行一种备份。我尝试过像这样使用 ServletContextListener：

```
public class ApplicationStartupAction implements ServletContextListener {
@In
FormActionImpl formAction;

public void contextDestroyed(ServletContextEvent arg0) {
    System.out.println("Context destroyed");
    formAction.migrateForms();
}

    public void contextInitialized(ServletContextEvent arg0) {
    //Do nothing
    System.out.println("Startup");
    }

} 
```

我想使用 FormActionImpl 类，因为它可以访问 JPA 处理程序和数据库，并且我需要访问数据库。这对于“forAction.migrateForms();”行不起作用（我得到一个空指针异常）。我最好的猜测是我不能使用注入，因为这些类在关闭的这个阶段已经被销毁了？

有没有办法在关机期间访问托管 bean？或者以其他方式使用 JPA？

# c - 从文本文件中读取并放入 struct

> ID：15919366
> 
> 赞同：1
> 
> 时间：2013-04-10T07:17:22.580
> 
> 标签：c, struct

我有汇编文件实际上是这样的文本文件

```
1         # Test case 1 for assembler
2                 
3                   .text
4    test1:          lwa   $1,val1
5                    prh   $1
6    val12:          lwa   $2,val2
7                    prh   $2
         .................. 
```

我正在使用 fgets 读取每一行并保存在名称为“linebuffer”的字符缓冲区中，并且我正在使用 sscanf 读取 linebuffer。

```
while((fgets(linebuffer,sizeof(linebuffer),ifp)!=NULL)
{
sscanf(linebuffer,"%s%s%s%s",line[i].label,line[i].opcode,line[i].operands,line[i].comment);
......
} 
```

我想把它们保存在结构中，

```
struct instrucion{
char lable[8];
char opcode[4];
char opearand[15];
char comment[100];
}line[65536]; 
```

问题是某些列没有任何空间，而 sscanf 跳过空格并读取下一个字符串并保留在第一列中。对不起，我不能完全理解，但我希望有人能理解。

例如，我想要第三行那样；

```
line[2].label=NULL
line[2].opcode=".text"
line[2].opernds=NULL
line[2].comment=NULL 
```

第四行；

```
line[3].label="test1:"
line[3].opcode="lwa"
line[3].operands="$1,val1"
line[3].comment=NULL 
```

问题是从第 5 行开始，它必须是这样的

```
line[4].label=NULL
line[4].opcode="prh"
line[4].operands="$1"
line[4].comment=NULL 
```

但是当我运行代码时，我得到了这个结果；

```
line[4].label="prh"
line[4].opcode="$1"
line[4].opernds=NULL
line[4].comment=NULL 
```

我怎样才能正确地定义这个 linebuffer？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:00:50.673

好的，所以您的第一个问题是 fgets() 不读取一行 - 它读取的字节数最多为 sizeof(linebuffer)，您可以在此处查看它的手册页：http: [//linux.die.net/man/3 /得到](http://linux.die.net/man/3/gets)

其次，假设您在字符串“linebuffer”中只有一行，您想要做的是使用 sscanf 返回值来确定哪些标记出现在该行中（scanf 函数族返回从溪流）。

第三，请注意 scanf 仅将空格和换行符视为标记分隔符的事实，因此它不会将字符串 "$1,val1" 分隔为两个子字符串 - 您需要手动执行此操作。

最后，还有一个字符串解析函数可以让你的生活更轻松——strtok_r。你可以在这里看到它的手册页：http: [//linux.die.net/man/3/strtok_r](http://linux.die.net/man/3/strtok_r)

阿姆农。

# c# - css @media 打印不起作用

> ID：15919369
> 
> 赞同：2
> 
> 时间：2013-04-10T07:17:26.853
> 
> 标签：c#, javascript, asp.net, css

我正在尝试使用 css（@media print）更改打印文档的样式，并定义了一个简单的样式来在打印时更改标题字体大小。然而，印刷媒体的风格根本没有改变。谁能告诉我哪里出错了？谢谢！这就是我所做的

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="testmediacss.aspx.cs" Inherits="PrintDemo1.testmediacss" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css" >
   @media print { body {font: 50pt Arial;} h1 {font-size: 138pt;} h2 {font-size: 15pt; color: #000;} }
    </style>
    <script type="text/javascript" language="javascript">
        function CallPrint(strid){
            var prtContent = document.getElementById(strid);
           var WinPrint = window.open('', '', 'letf=1000,top=1000,width=1000,height=500,toolbar=0,scrollbars=0,status=0');
           WinPrint.document.write(prtContent.innerHTML);
            WinPrint.document.close();
            WinPrint.focus();
            WinPrint.print();
            WinPrint.close();
       }
  </script>
</head>
<body>
    <form id="form1" runat="server">
    <div  id="divprint">
        <p>hello this is the part to be printed in the printer.</p>

        <h1>hello world</h1>
        </div>
        <asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="CallPrint('divprint');" />

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:45:04.047

在定义 css 时，我一直使用媒体打印和媒体屏幕。

```
@media print
{
  h1 {font-size: 138pt;}
}
@media screen
{
 h1 { font size: 95pt;}
} 
```

它将在屏幕上显示为 95 点文本，但打印为 138 点文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T21:17:34.163

有时，至少在 Chrome 中，CSS 会被忽略......在按下`Ctrl + R`20 次之后，或者甚至更好地清除缓存后，它最终会起作用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T05:03:11.350

改用这个：

```
var WinPrint = window.open('', '', 'left=1000,top=1000,width=1000,height=500,toolbar=0,scrollbars=0,status=0'); 
```

不是`letf`

# java - 带适配器的 ExpandableListView

> ID：15919376
> 
> 赞同：0
> 
> 时间：2013-04-10T07:17:47.817
> 
> 标签：java, android

我想用自定义适配器创建一个 ExpandableListView，但是它只显示我的标题组，当我单击标题（查看子项）时它什么也没做（我只想有一个组项，因此项组计数是 1)。

请帮我找出我错在哪里，非常感谢。

这是我的适配器：

```
class chatListAdapter extends BaseExpandableListAdapter {
private String objectsIdInsideAdapter;
private List<String> commentsInsideAdapter = new ArrayList<String>();
private List<String> FacebookIdInsideAdapter=new ArrayList<String>();
private List<String> NamesInsideAdapter =new ArrayList<String>();
private Context mContext;

chatListAdapter(String objectId,Context ctx,List<String> comments,List<String> face,List<String> names){
    objectsIdInsideAdapter=objectId;
    mContext=ctx;
    commentsInsideAdapter=comments;
    FacebookIdInsideAdapter=face;
    NamesInsideAdapter=names;
}
@Override
public Object getChild(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return NamesInsideAdapter.get(arg1);
}

@Override
public long getChildId(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View v,
        ViewGroup parent) {
    // TODO Auto-generated method stub

    LayoutInflater inflater = getLayoutInflater();

    if(v==null){
         v = inflater.inflate(R.layout.chat_item, parent, false);
    }

    String comment =commentsInsideAdapter.get(position);
    Button sendCommentBtn =(Button) v.findViewById(R.id.chatitemSendComment);
        TextView commentView= (TextView) v.findViewById(R.id.chateitemViewComment);
        commentView.setText(comment);
        TextView commentName =(TextView) v.findViewById(R.id.chatitemfreindName);
        commentName.setText(NamesInsideAdapter.get(position));
        EditText commentText= (EditText) v.findViewById(R.id.chatitemEnterComment);
        commentText.setVisibility(View.GONE);
        sendCommentBtn.setVisibility(View.GONE);

    return v;
}

@Override
public int getChildrenCount(int arg0) {
    // TODO Auto-generated method stub
    return NamesInsideAdapter.size();
}

@Override
public Object getGroup(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return 1;
}

@Override
public long getGroupId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,
        ViewGroup parent) {
    // TODO Auto-generated method stub
    View v = convertView;

    if (v == null) {
        LayoutInflater inflater = getLayoutInflater();
        v = inflater.inflate(R.layout.chat_item_group_layout,parent, false);
    }

    TextView groupName = (TextView) v.findViewById(R.id.groupName);
    TextView groupDescr = (TextView) v.findViewById(R.id.groupDescr);

    groupName.setText("view comments");
    groupDescr.setText("groupDSCR");

    return v;

}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean isChildSelectable(int arg0, int arg1) {
    // TODO Auto-generated method stub
    return false;
} 
```

这是主要活动中的代码：

```
ExpandableListView  chat =(ExpandableListView) v.findViewById(R.id.ExpList); 

     String faceids =facebookIdChatInside.get(position);
     String comments = commentInside.get(position);
     String namesChat =nameChatInside.get(position);
     List<String> chatItems = new ArrayList<String>(Arrays.asList(comments.split(",")));
     List<String> facebookids = new ArrayList<String>(Arrays.asList(faceids.split(",")));
     List<String> namesList = new ArrayList<String>(Arrays.asList(namesChat.split(",")));
     chatItems.add(" ");
     facebookids.add(id);
     namesList.add(name);

     chatListAdapter chatA =new chatListAdapter(objectsId.get(position),profileContext,chatItems,facebookids,namesList);
     chat.setAdapter(chatA); 
```

我查了一下，那 3 个 List 不是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:03:06.067

阅读您的代码，我发现 3 点对我来说不是很清楚：

1.  getGroup 你返回null？你为什么不返回真正的对象
2.  getChildId 你应该返回一个唯一标识你的孩子
3.  hasStableIds。你返回假。您不需要重写此方法。

如果您想了解有关 ExpandableListView 的更多信息，请在[此处查看我的博客](http://www.survivingwithandroid.com/2013/01/android-expandablelistview-baseexpandablelistadapter.html)

您使用 ExpandableListView 就像一个简单的 ListView 为什么不考虑给您一个 ListView？

# solr - 索引 csv 文件 solr - 缺少内容流

> ID：15919378
> 
> 赞同：2
> 
> 时间：2013-04-10T07:17:54.920
> 
> 标签：solr

```
Error is as follows :
[root@hdqsltest1 garyTestDocs]# curl http://localhost:8983/solr/update/csv? literal.id=book2&commit --data-binary @sample.csv -H 'Content-type:text/plain; charset=utf- 8'
[1] 16541
bash: commit: command not found 
```

响应看起来像这样 -

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
<title>Error 400 missing content stream</title>
</head>
<body><h2>HTTP ERROR 400</h2>
<p>Problem accessing /solr/update/csv. Reason:
<pre>    missing content stream</pre></p><hr /><i><small>Powered by Jetty://</small>     </i><br/>                                                
<br/>                                                
<br/>                                                
</body>
</html> 
```

sample.csv 输入 -

```
 module,meets,question,response
 General Questions,,"Please provide us a detailed company background","We are great" 
```

schema.xml -

```
 <field name="module" type="text" indexed="true" stored="true" />
 <field name="meets" type="text" indexed="true" stored="true" />
 <field name="question" type="text" indexed="true" stored="true" />
 <field name="response" type="text" indexed="true" stored="true" /> 
```

solrconfig.xml

```
 <!-- CSV update handler, loaded on demand -->

  <requestHandler name="/update/csv" class="solr.CSVRequestHandler" startup="lazy">
       <lst name="defaults"> 
             <str name="separator">,</str>
             <str name="header">true</str>
             <str name="encapsulator">"</str>
        </lst> 
   </requestHandler> 
```

另一个示例.csv

```
 module,meets,question,response
   General Questions,,"Please provide us a detailed company background","Yes" 
```

我已启用远程流式传输。我的查询是

```
 curl http://localhost:8983/solr/update/csv?literal.id=book12&commit=true --data-binary @sample.csv -H 'Content-type:text/plain; charset=utf-8' 
```

那我做错了什么。请指导。

solr 版本 = 3.6.2。

索引的全部意义在于能够查询字段？我还想知道是否可以提取 csv 文件以将其文本放置在各个字段中，我知道它将 csv 文件的文本放置在内容字段中。有关更新/提取的任何建议？我在这里问了2个qns。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:24:06.270

实际上只是解决了这个查询的问题

curl [http://localhost.com:8983/solr/update/csv?commit=true](http://localhost.com:8983/solr/update/csv?commit=true) --data-binary @sample.csv -H 'Content-type:text/plain; 字符集=utf-8'

但是在执行此查询之前，我不断收到 required id field 错误，我会去我的查询并提及literal.id = ABC1（一些唯一的随机id），然后我仍然遇到同样的错误。所以我去了我的 schema.xml 并删除了字段 id 所需的属性并重新启动了 solr 并运行了上面的查询，但仍然出现错误。所以当我在我的 sample.csv 中创建一个 id 列并将其编入索引时，解决方案就出现了。我其实不喜欢这样！但它奏效了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T13:42:34.240

首先更改目录以找到您的 csv 文件，

```
cd <file_path> 
```

和

```
curl http://localhost:8983/solr/update/csv?commit=true --data-binary @sample.csv -H 'Content-type:text/plain; charset=utf-8' 
```

从终端运行此脚本。我希望能解决你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:32:47.120

如果您启用了远程流式传输，则需要在请求中将内容类型和文件指定为查询参数。

这是[Solr Wiki的示例](http://wiki.apache.org/solr/UpdateCSV#Example)

具体来说，您的查询字符串看起来有点像这样 -

```
curl http://localhost:8983/solr/update/csv?stream.file=<remote path>/sample.csv&stream.contentType=text/plain;charset=utf-8 
```

请注意，使用远程流式传输时，您需要确保 Solr 实例可以访问文件的位置。

# scite - SciTE：执行后显示输出的结尾

> ID：15919381
> 
> 赞同：1
> 
> 时间：2013-04-10T07:18:03.860
> 
> 标签：scite

我经常使用 Scite 来执行冗长的脚本（批处理文件、python 脚本）。默认情况下，输出窗口中的当前位置设置回起始位置。是否有一些秘密配置选项指示 scite 在输出结束时停止？
对于我的用例，这样会更方便，因为我可以立即看到最终状态而无需向后滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:18:30.447

[通过scite-interest](https://groups.google.com/forum/?fromgroups=#!forum/scite-interest)小组找到了答案：就在文档中：[http ://www.scintilla.org/SciTEDoc.html](http://www.scintilla.org/SciTEDoc.html)

> 要停止输出窗格自动滚动，请将 output.scroll 设置为 0。要让输出窗格滚动并返回到执行命令的行，请将 output.scroll 设置为 1。如果您希望输出窗格滚动并保持不变在底部执行后，将 output.scroll 设置为 2。垂直滚动范围通常设置为使最大滚动位置在视图底部的最后一行。将 end.at.last.line 设置为 0 以允许在最后一行下方滚动一页。

# cordova - 参考错误：未定义 LocalFileSystem

> ID：15919382
> 
> 赞同：2
> 
> 时间：2013-04-10T07:18:07.693
> 
> 标签：cordova, ibm-mobilefirst

我正在尝试使用 cordova File API 在我的 worklight 项目中创建一个文件。我收到错误消息，

> 参考错误：未定义 LocalFileSystem

我尝试使用以下链接中的解决方案，但仍然遇到相同的错误。我应该在我的 js 文件夹中添加任何脚本文件吗？我不确定从哪里获得确切的 cordova.js 文件。 [PhoneGap-Android 文件系统请求错误](https://stackoverflow.com/questions/13845244/localfilesystem-is-not-defined-phonegap-build-in-android)

当我包含 cordova.js 文件时，我收到了错误 ![在此处输入图像描述](https://i.stack.imgur.com/Z3iJg.png)

这是我的代码：

```
 document.addEventListener("ondeviceready", onDeviceReady(), true);
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);
}

function onFileSystemSuccess(fileSystem) {
    alert(fileSystem.name+" created");
    alert(fileSystem.root.name);
}

function fail(evt) {
    alert(evt.target.error.code);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:14:44.190

```
document.addEventListener("ondeviceready", onDeviceReady(), true); 
```

这是错误的。这意味着您将该函数的返回值作为参数。您只需要输入函数的名称。改用这个。（没有 （） ）

```
document.addEventListener("ondeviceready", onDeviceReady, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T21:23:28.030

也许你没有安装文件系统插件，在**cordova plugin add org.apache.cordova.file**命令之后尝试。

# ember.js - 在 Ember.js 中添加 html5 服务器发送事件

> ID：15919384
> 
> 赞同：0
> 
> 时间：2013-04-10T07:18:13.327
> 
> 标签：ember.js

我有一个 ember 应用程序，我想在其中添加 sse。问题是收到消息后我无法调用控制器功能。我可以通过声明控制器的新实例来调用它，`var ac = new App.ActivecallsController; ac.addNewCall().`但它会创建一个新实例，这就是它不会更改控制器中 activeCalls 数组的值的原因。

```
if(typeof(EventSource)!=="undefined"){
            self.set('source',new EventSource("http://localhost/sse/demo_sse.php"));
            var source=new EventSource("http://localhost/sse/demo_sse.php");
            source.onmessage=function(event){
                var data = $.parseJSON(event.data);
                console.log(data.length);
                if(data.length){
                   **//Here I want to call the addNewCall function.** 
                }
            }
        } 
```

我的控制器是

```
App.ActivecallsController = Ember.ArrayProxy.extend({
    activeCalls:[],
    content:[],
    addNewCall:function(model){
        var self= this;
        console.log('here');
        App.Cdrglobal.set('active_call',App.Cdrglobal.active_call+1);
        self.activeCalls.insertAt(0,model);
   }
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-15T06:41:32.200

我找到了解决方案

```
 APP.__container__.lookup('controller:activecalls').addNewCall(model); 
```

# iphone - 如何在应用中添加 iAd

> ID：15919386
> 
> 赞同：4
> 
> 时间：2013-04-10T07:18:18.927
> 
> 标签：iphone, ios, iad

我想在我的应用程序中添加 iAd。而且我做了很多研究并观看了展示如何在您的项目中添加 iAd 的视频。但是所有用于在项目中添加 iAd 的视频和教程显示代码都没有说明我们是否必须在 iTunes 连接中做某事。

我在[apple doc](https://developer.apple.com/iad/resources/)中看到了这个链接。添加 iAd 很好。并且在该链接中，它将显示选项卡`iTunes Connect Developer Guide`，其中显示我们必须在 iTunes 连接中进行的一些设置，以在应用程序中添加 iAd。

因此，据我了解，我们必须首先在 iAd 的 iTunes 连接帐户中进行该设置，然后实施代码以在项目中添加 iAd。

但我对苹果文档中的这一行感到困惑，`After you have enabled at least one app for iAd ads, you see the iAd Network module on your iTunes Connect homepage.`为 iAd 启用应用程序是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:57:21.803

[iTunesconnect](https://itunesconnect.apple.com) -> 管理你的应用

此代码显示 iAd 网络的默认屏幕

```
#import <UIKit/UIKit.h>
#import <iAd/iAd.h>

@interface iAdExViewController : UIViewController <ADBannerViewDelegate>
{
    ADBannerView *adView;
    BOOL bannerIsVisible;
}
@property (nonatomic,assign) BOOL bannerIsVisible;

@end 
```

然后修改**iAdExViewController.m**`viewDidLoad`中的方法

 **```
- (void)viewDidLoad
{
    adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    adView.frame = CGRectOffset(adView.frame, 0, -50);
    adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
    adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;
    [self.view addSubview:adView];
    adView.delegate=self;

    self.bannerIsVisible=NO;

    [super viewDidLoad];
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    if (!self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOn" context:NULL];

        // banner is invisible now and moved out of the screen on 50 px
        banner.frame = CGRectOffset(banner.frame, 0, 50);
        [UIView commitAnimations];

        self.bannerIsVisible = YES;
    }
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    if (self.bannerIsVisible)
    {
        [UIView beginAnimations:@"animateAdBannerOff" context:NULL];

        // banner is visible and we move it out of the screen, due to connection issue
        banner.frame = CGRectOffset(banner.frame, 0, -50);
        [UIView commitAnimations];

        self.bannerIsVisible = NO;
    }
}

- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
{
    NSLog(@"Banner view is beginning an ad action");
    BOOL shouldExecuteAction = YES;

    if (!willLeave && shouldExecuteAction)
    {
        // stop all interactive processes in the app
        // [video pause];
        // [audio pause];
    }
    return shouldExecuteAction;
}

- (void)bannerViewActionDidFinish:(ADBannerView *)banner
{
    // resume everything you've stopped
    // [video resume];
    // [audio resume];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:29:44.120

转到 iTunes Connect -> 管理您的应用程序并选择您想要的应用程序，然后单击设置 iAd 网络，就是这样。

> 但我对苹果文档中的这一行感到困惑 在您为 iAd 广告启用了至少一个应用程序后，您会在 iTunes Connect 主页上看到 iAd Network 模块。为 iAd 启用应用程序是什么意思？

这意味着，当您激活 iAd（正如我告诉过您的那样）时，会出现一个名为 iAd Network 的新模块，您可以在其中看到统计信息（展示次数、收入等）**

# asp.net - 如何使用内置的 Funq 容器正确注入依赖项？

> ID：15919388
> 
> 赞同：1
> 
> 时间：2013-04-10T07:18:22.197
> 
> 标签：asp.net, servicestack

我有一个缓存的存储库

```
public interface IRepository
{
    void LogWebUsage(string html);
    IEnumerable<ApiKey> GetApiKeys();
    ApiKey GetApiKey(Guid key);
}

public class Repository : IRepository
{
    private static readonly ILog Log = LogManager.GetLogger("API.Repository");

    public IDbConnectionFactory DbFactory { get; set; }

    public void LogWebUsage(string request)
    {
        Log.Debug(request);
    }

    public virtual IEnumerable<ApiKey> GetApiKeys()
    {
        List<ApiKey> result = null;
        using (var db = DbFactory.OpenDbConnection())
        {
            result = db.SelectParam<ApiKey>(q => q.Active);
        }

        return result;
    }

    public ApiKey GetApiKey(Guid key)
    {
        ApiKey result = null;
        using (var db = DbFactory.OpenDbConnection())
        {
            result = (db.SelectParam<ApiKey>(q => q.Id == key)).FirstOrDefault();
        }

        return result;
    }
}

public class CachedRepository : Repository
{
    public ICacheClient Cache { get; set; }

    public override IEnumerable<ApiKey> GetApiKeys()
    {
        const string cacheKey = "GetApiKeys";

        var result = Cache.Get<IEnumerable<ApiKey>>(cacheKey);

        if (result == null)
        {
            result = base.GetApiKeys();

            if (result.Any())
            {
                Cache.Add(cacheKey, result, TimeSpan.FromMinutes(30));
            }
        }
        return result;
    }
} 
```

我像这样配置它。

```
//Register any dependencies you want injected into your services
container.Register<IDbConnectionFactory>(new OrmLiteConnectionFactory(ConfigUtils.GetConnectionString("DBConnstr"), true, SqlServerOrmLiteDialectProvider.Instance));
container.Register<ICacheClient>(new MemoryCacheClient());
container.Register<IRepository>(new CachedRepository());
container.RegisterAutoWired<CachedRepository>(); 
```

所以我希望的是 IDbConnectionFactory 和 ICacheClient 都将在运行时注入，但它们是空的。你如何正确解释这种类型的依赖图？

谢谢你，斯蒂芬

**更新**

谷歌搜索了几个小时后，我终于找到了一个可行的解决方案。通过配置进行构造函数注入。

```
public class CachedRepository : Repository
{
    private ICacheClient Cache { get; set; }

    public CachedRepository(IDbConnectionFactory dbFactory, ICacheClient cache) : base(dbFactory)
    {
        Cache = cache;
    }

    public override IEnumerable<ApiKey> GetApiKeys()
    {
        const string cacheKey = "GetApiKeys";

        var result = Cache.Get<IEnumerable<ApiKey>>(cacheKey);

        if (result == null)
        {
            result = base.GetApiKeys();

            if (result.Any())
            {
                Cache.Add(cacheKey, result, TimeSpan.FromMinutes(30));
            }
        }
        return result;
    }
} 
```

配置

```
//Register any dependencies you want injected into your services
container.Register<IDbConnectionFactory>(c => new OrmLiteConnectionFactory(ConfigUtils.GetConnectionString("DBConnstr"), true, SqlServerOrmLiteDialectProvider.Instance));        
container.Register<ICacheClient>(c => new MemoryCacheClient());
container.Register<IRepository>(c => new CachedRepository(c.Resolve<IDbConnectionFactory>(), c.Resolve<ICacheClient>())); 
```

它有效，但我仍然想知道如何连接属性注入。

保重，斯蒂芬……再一次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:28:36.320

[ServiceStack 的 Funq IOC 中](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container#autowire-registration)用于 AutoWiring 的 API在这里：

使用通用 API：

```
container.RegisterAutoWired<MyType>();
container.RegisterAutoWiredAs<MyType,IMyType>(); 
```

使用运行时类型的 API：

```
container.RegisterAutoWiredType(typeof(MyType));
container.RegisterAutoWiredType(typeof(MyType),typeof(IMyType));
container.RegisterAutoWiredTypes(typeof(MyType),typeof(MyType2),typeof(MyType3)); 
```

因此，基本上您可以使用上述任何 API 来自动连接您的依赖项，例如：

```
container.Register<IDbConnectionFactory>(c => new 
  OrmLiteConnectionFactory(ConfigUtils.GetConnectionString("DBConnstr"), true, 
  SqlServerDialect.Provider));        

container.Register<ICacheClient>(c => new MemoryCacheClient());
container.RegisterAutoWiredAs<CachedRepository,IRepository>(); //auto-wired 
```

# c# - C#.net winforms 应用程序 Sessionending 事件

> ID：15919395
> 
> 赞同：0
> 
> 时间：2013-04-10T07:18:55.483
> 
> 标签：c#, windows

`SystemEvents.SessionEnding`当我关闭我的系统时，事件没有被触发......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:27:08.533

您是否尝试过将此事件作为 microsoft 的示例来实现？像那样

**重要提示：**控制台应用程序不会引发 SessionEnding 事件。

仅当消息泵正在运行时才会引发此事件。在 Windows 服务中，除非使用隐藏表单或手动启动消息泵，否则不会引发此事件。有关显示如何使用 Windows 服务中的隐藏表单来处理系统事件的代码示例，请参阅 SystemEvents 类。-> [.NET Windows 服务中的消息泵](https://stackoverflow.com/questions/2443867/message-pump-in-net-windows-service)

```
private static int WM_QUERYENDSESSION = 0x11;
private static bool systemShutdown = false;
protected override void WndProc(ref System.Windows.Forms.Message m)
{
    if (m.Msg==WM_QUERYENDSESSION)
    {
        MessageBox.Show("queryendsession: this is a logoff, shutdown, or reboot");
        systemShutdown = true;
    }

    // If this is WM_QUERYENDSESSION, the closing event should be
    // raised in the base WndProc.
    base.WndProc(ref m);

} //WndProc 

private void Form1_Closing(
    System.Object sender, 
    System.ComponentModel.CancelEventArgs e)
{
    if (systemShutdown)
        // Reset the variable because the user might cancel the 
        // shutdown.
    {
        systemShutdown = false;
        if (DialogResult.Yes==MessageBox.Show("My application", 
            "Do you want to save your work before logging off?", 
            MessageBoxButtons.YesNo))
        {
            e.Cancel = true;
        }
        else
        {
            e.Cancel = false;
        }
    }
} 
```

更多信息 ？请参见此处： [SystemEvents.SessionEnding 事件](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:26:53.623

你可以试试这个——首先你打开 gpedit.msc，去配置 -> 管理模板 -> 系统 -> 关机选项。现在选择关闭阻止或取消关闭的应用程序的自动终止。

并阅读[Microsoft SystemEvents.SessionEnding Event 文档](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.sessionending.aspx)以进行进一步开发。

# javascript - 输出 HTML 时出现意外的令牌错误

> ID：15919398
> 
> 赞同：0
> 
> 时间：2013-04-10T07:19:14.720
> 
> 标签：javascript

我试图将所有插件输出到浏览器。

但是我在这行之后收到了 ac`Uncaught SyntaxError: Unexpected token`异常：

`document.write(<tr><td>);`

我错过了一些东西，但是什么？

**代码：**

```
<html>
    <head>
        <title>List of Plug-Ins</title>
    </head> 
        <body>
            <h1>List of Plug-Ins</h1>
            <hr>
            The following is a list of the plug-ins installed in this
                copy of Netscape, generated using the JavaScript
                navigator.plugins object:
            <hr>                
                <table border>
                    <tr>
                        <th>Plug-in Name</th>
                        <th>Filename</th>
                        <th>Description</th>
                    </tr>
                    <script>
                        for(i=0; i < navigator.plugins.length; i++) {
                            document.write(<tr><td>);
                            document.write(navigator.plugins[i].name);
                            document.write(</td><td>);
                            document.write(navigator.plugins[i].filename);
                            document.write(</td><td>);
                            document.write(navigator.plugins[i].description);
                            document.write(</td></td>);
                        }
                    </script>
                </table>
        </body>    
</html> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:21:17.847

您的 HTML 标签需要在`""`.

将您的脚本更改为以下内容：

```
for(i=0; i < navigator.plugins.length; i++) {
    document.write("<tr><td>");
    document.write(navigator.plugins[i].name);
    document.write("</td><td>");
    document.write(navigator.plugins[i].filename);
    document.write("</td><td>");
    document.write(navigator.plugins[i].description);
    document.write("</td></td>");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:21:52.583

```
document.write('</td></td>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:22:05.663

如果您想在 Javascript 中编写 HTML 格式的内容，请尝试在文章中加上引号。

# android - EditText 的第一个字符应该是字母

> ID：15919400
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:19:16.107
> 
> 标签：android, textwatcher

在我的`EditText`我想输入第一个字符作为 alpha 和其余的是什么。我在`TextWatcher`. 但现在我的问题是，如果我输入了错误的内容（如数字、特殊字符）作为我的第一个字符，那么我`EditText`不应该接受剩余的字符。如果我纠正我的第一个字符，那么只有我`EditText`应该接受。他们有没有可能实现这个朋友？如果是的话，请朋友们指导我。

我的 textWatcher 代码是

```
edittext.addTextChangedListener(new TextWatcher() {

    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // TODO Auto-generated method stub

    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        // TODO Auto-generated method stub

    }

    public void afterTextChanged(Editable s) {
        // TODO Auto-generated method stub
        if (s.length() > 0) {
            String str = edittext.getText().toString();
            char t = str.charAt(0);
            if (!Character.isLetter(t)) {
                Toast.makeText(getApplicationContext(),
                        "please enter your first charecter as alpha",
                        Toast.LENGTH_LONG).show();
            }
        }
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:27:11.410

```
CREATE UNIQUE INDEX ON UnnamedTable (Department) WHERE Designation='Head' 
```

它被称为[过滤索引](http://msdn.microsoft.com/en-gb/library/ms188783.aspx)。如果您使用的是 2008 之前的 SQL Server 版本，则可以使用索引视图实现过滤索引的穷人等效项：

```
CREATE VIEW UnnamedView
WITH SCHEMABINDING
AS
    SELECT Department From UnnamedSchema.UnnamedTable WHERE Designation='Head'
GO
CREATE UNIQUE INDEX ON UnnamedView (Department) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:27:45.773

执行以下查询以查看重复项：

```
Select Department,Designation,count(*) 
From [mytable] Group by Department,Designation 
```

现在将 mytable 替换为表名，将部门和名称替换为表中的列。执行后，结果集将显示重复记录的计数超过 1。

# .net - 如何在 [vb.net] 中读取 [.db] 文件

> ID：15919404
> 
> 赞同：0
> 
> 时间：2013-04-10T07:19:28.733
> 
> 标签：.net, database, vb.net, paradox

我在同一个论坛上找到了[在 c# 中读取 .db 文件](https://stackoverflow.com/questions/11021455/read-a-db-file-in-c-sharp)的帖子，但没有显示如何从代码中访问它的表。

那么有人知道如何打开连接并访问/读取`.db`文件`vb.net`吗？

我尝试使用下面的代码打开连接，但收到此错误：

`[DBNETLIB][ConnectionOpen (Connect()).]SQL Server does not exist or access denied.`

我的代码是：

```
Dim connection As OleDbConnection = New OleDbConnection

connection = New OleDbConnection("Provider=SQLOLEDB;Data Source=C:\mydatabase.db;Persist Security Info=True;Integrated Security=SSPI;")

connection.Open() 
```

谢谢。

# c# - C# WPF IChangeTracking IRevertibleChangeTracking 实现

> ID：15919408
> 
> 赞同：3
> 
> 时间：2013-04-10T07:19:54.987
> 
> 标签：c#, wpf, change-tracking

我有一个 WPF 页面，它有一个带有单选按钮列（请求、建议、确认、取消）的 Datagridview 和一个搜索按钮，单击它会在 Datagridview 中显示大约 5 行的以下数据。在现场环境中可能超过 1000 条记录或 1500 条记录。

```
索引 姓 名 请求 提议 确认 取消
---------------------------- --------- -------- ----- ---- ---------
1 B2 R2 0 0 1 0
2 日 0 0 1 0
3 日 0 0 1 0
4 日 0 0 1 0
5 SG0019 SG0019 0 0 0 0

```

现在案例 1：我只希望修改这 5 行中的行，例如第一条记录用户更改状态如下并单击“保存”按钮，然后我只发送与索引 1 或更改的记录相关的一条记录或数据

```
索引 姓 名 请求 提议 确认 取消
---------------------------- --------- -------- ----- ---- ---------
1 B2 R2 0 0 0 1

```

现在案例2：

如果用户只修改两行，如下所示

```
原始数据

索引 姓 名 请求 提议 确认 取消
---------------------------- --------- -------- ----- ---- ---------
1 B2 R2 0 0 1 0
2 日 0 0 1 0
3 日 0 0 1 0
4 日 0 0 1 0
5 SG0019 SG0019 0 0 0 0

修改后的数据

步骤1

索引 姓 名 请求 提议 确认 取消
---------------------------- --------- -------- ----- ---- ---------
1 B2 R2 0 0 0 1-------- 状态改变
2 dd 0 0 0 1-------- 状态改变

第2步
索引 姓 名 请求 提议 确认 取消
---------------------------- --------- -------- ----- ---- ---------
1 B2 R2 0 0 1 0-------- 返回原始
2 dd 0 0 0 1-------- 状态改变

```

所以我只想要第二条被修改的记录，即使第一条记录被修改，但它又回到了原来的状态或值，所以我怎样才能使用 IChangeTracking 或 irevertiblechangetracking 来实现这两个东西。

# http - 如何在 Blackberry 的对象选择字段中显示 HTTP 响应

> ID：15919411
> 
> 赞同：0
> 
> 时间：2013-04-10T07:20:13.017
> 
> 标签：http, blackberry, choicefield

我正在使用此代码从服务器读取响应。

```
public static String getContentString(HttpConnection Connection) throws IOException
{
    String Entity=null;
    InputStream inputStream;
    inputStream = Connection.openInputStream();//May give network io
    StringBuffer buf = new StringBuffer();
    int c;
    while ((c = inputStream.read()) != -1) 
    {
         buf.append((char) c);
    }

    //Response Formation            
    try
    {
        Entity = buf.toString();
        return Entity;
    }
    catch(NullPointerException e)
    {
        Entity = null;
        return Entity;
    }

} 
```

我需要在对象选择字段中显示此实体。例如：假设我得到响应 Entity=`ThisIsGoingToGood`

然后，我需要在对象选择下拉列表中显示以下方式。

*   这

*   是

*   去

*   到

*   好的

请告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:59:05.060

使用 Nate's Answer 中的参考 - 试试这个 -

```
ObjectListField ol = new ObjectListField(ObjectListField.ELLIPSIS);
ol.setSize(words.size()); //Where words is the vector 
for (int i = 0; i < size; i++)
    {
ol.insert(i, words.elementAt(i));
}
add(ol); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:53:32.027

该解决方案假设：

*   您的字符串的*驼峰*式格式将始终以大写字母开头**。**

*   一行中只使用一个大写字符，即使该*单词*是首字母缩略词。例如，“HTTP 响应”将被写为`"HttpResponse"`.

```
public static Vector getContentStrings(HttpConnection connection) throws IOException {
    Vector words = new Vector();

    InputStream inputStream = connection.openInputStream();
    StringBuffer buf = new StringBuffer();
    int c;
    while ((c = inputStream.read()) != -1) 
    {
        char character = (char)c;
        if (CharacterUtilities.isUpperCase(character)) {
            // upper case -> new word
            if (buf.length() > 0) {
                words.addElement(buf.toString());
                buf = new StringBuffer();
            }
        }
        buf.append(character);
    }
    // add the last word
    words.addElement(buf.toString());

    return words;
} 
```

然后，您将有很多`Vector`适合您的`ObjectChoiceField`. 然后你可以`insert()`他们，如Signare的回答所示。

**注意：**永远记得关闭你的流。不过，我已经让您决定何时真正完成它。

# css - z-index 是 FireFox 中的重叠 css 3d 变换位置

> ID：15919412
> 
> 赞同：1
> 
> 时间：2013-04-10T07:20:16.593
> 
> 标签：css, firefox, css-transforms

我创建了一些 3d 演示：[https](https://dl.dropboxusercontent.com/u/20810772/model/field.html) : //dl.dropboxusercontent.com/u/20810772/model/field.html webkit 渲染它很好。但在 FireFox 19/FF 每晚 z-index 重叠元素的 3d 变换位置。如果元素在 dom 中出现较晚，则它与 dom 中较早出现的元素重叠。

有什么办法可以解决吗？

致以最诚挚的问候。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-07T01:35:24.067

不要将preserve-3d 和perspective 放在同一个元素上。将 preserve-3d 放在 3d 场景的外部容器上，透视应该*在*该场景中的任何内容上进行。

# iphone - UIAlertView：wait_fences：未能收到回复：10004003

> ID：15919415
> 
> 赞同：0
> 
> 时间：2013-04-10T07:20:25.007
> 
> 标签：iphone, ios, ipad

我已经在运行`UIAlertView`，但是在从 Web 服务获取数据期间，我想更新该 AlertView 的消息。所以我写下面的代码来更新警报消息：

```
[self performSelectorOnMainThread:@selector(UpdateAlertMessage:) withObject:@"Downloading Schedule ..." waitUntilDone:NO];

-(void)UpdateAlertMessage:(NSString *)strMessage
{appDelegate.progressAlert.message=strMessage;
} 
```

这里的进度警报是我已经在运行的警报视图。

但我在控制台中给了我以下警告：

```
wait_fences: failed to receive reply: 10004003 
```

我想删除该警告。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:27:14.407

您正在主线程上执行此操作，因此请尝试使用 GCD 方法而不是 [self`performSelectorOnMainThread:@selector(UpdateAlertMessage:) withObject:@"Downloading Schedule ..." waitUntilDone:NO];`

像这样

```
dispatch_async(dispatch_get_main_queue(), ^{ 
  [self UpdateAlertMessage:@"Downloading Schedule ..."];
}); 
```

**更新**

```
dispatch_queue_t myQueue;
myQueue = dispatch_queue_create("myQueue", NULL);
dispatch_sync(myQueue, ^{
    [self UpdateAlertMessage:@"Downloading Schedule ..."];
}); 
```

# javascript - 使用 Javascript 在 iOs 设备上动态重置页面缩放

> ID：15919420
> 
> 赞同：3
> 
> 时间：2013-04-10T07:20:55.037
> 
> 标签：javascript, ios, scale

我想在我的 Javascript 应用程序打开时动态重置缩放或缩放。假设开始页面已放大，但是当我在新对话框中打开我的应用程序时，我想重置缩放。

我尝试动态更改适用于 android 但在 iOS 上失败的元标记。是不是还有什么妙招。

以下是我尝试了一切可能的功能。

```
function setMeta(){

  $('meta[name=viewport]').attr('content', 'width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no, user-scalable=0');
    document.body.style.zoom="100%";

document.getElementById("medView").setAttribute('content','user-scalable=no, width=device-width, minimum-scale = 1, maximum-scale = 1');

      if (navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i)) {
        var viewportmeta = document.querySelector('meta[name="viewport"]');
        if (viewportmeta) {
            alert("we are here");
            viewportmeta.content = 'width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0';
            document.body.addEventListener('gesturestart', function () {
                viewportmeta.content = 'width=device-width, minimum-scale=0.25, maximum-scale=1.6';
            }, false);
        }
    }

    } 
```

# objective-c - 禁用特定窗口的键盘

> ID：15919424
> 
> 赞同：0
> 
> 时间：2013-04-10T07:21:04.970
> 
> 标签：objective-c, macos, cocoa

如何在某些特定窗口中禁用键盘？

我想如果一个窗口是打开的，那么键盘不应该做任何事情。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:40:40.353

您可以从 NSWindow 的 canBecomeKeyWindow 方法返回 NO。这会禁用窗口的键盘

# c++ - 在 MFC 项目中包含 Curl

> ID：15919435
> 
> 赞同：0
> 
> 时间：2013-04-10T07:21:56.547
> 
> 标签：c++, curl, mfc, unresolved-external, curlpp

我对 curl 很陌生。我需要在具有 ssl 支持的 c++ 中使用 curl。我用 nmake 编译了 OpenSSL，然后通过 VS10 项目将 libcurl 编译为带有 SLL SUPPORT 的静态库。编译成功了，我尝试构建一个小型控制台应用程序示例：那行得通！

但是，当我尝试使用以下特定属性创建 MFC 项目时：MFC 作为对话框，没有 unicode，并在静态库中使用 MFC。这不起作用，我收到以下未解决的符号错误：

```
libcurl.lib(mprintf.obj) : error LNK2001: symbole externe non résolu __imp__fputc
1>libcurl.lib(tftp.obj) : error LNK2001: symbole externe non résolu __imp__memchr
1>libcurl.lib(http.obj) : error LNK2001: symbole externe non résolu __imp__memchr
1>libcurl.lib(userauth.obj) : error LNK2001: symbole externe non résolu __imp__memchr
1>libcurl.lib(file.obj) : error LNK2001: symbole externe non résolu __imp___fstat64
1>libcurl.lib(formdata.obj) : error LNK2001: symbole externe non résolu __imp___stat64
1>libcurl.lib(session.obj) : error LNK2001: symbole externe non résolu __imp___difftime64
1>libcurl.lib(kex.obj) : error LNK2001: symbole externe non résolu __imp___snprintf
1>libcurl.lib(knownhost.obj) : error LNK2001: symbole externe non résolu __imp___snprintf
1>libcurl.lib(scp.obj) : error LNK2001: symbole externe non résolu __imp___snprintf
1>libcurl.lib(misc.obj) : error LNK2001: symbole externe non résolu __imp___snprintf
1>libcurl.lib(transport.obj) : error LNK2001: symbole externe non résolu _imp___snprintf
1>libcurl.lib(channel.obj) : error LNK2001: symbole externe non résolu __imp___wassert
1>libcurl.lib(sftp.obj) : error LNK2001: symbole externe non résolu __imp___wassert
1>libcurl.lib(transport.obj) : error LNK2001: symbole externe non résolu __imp___wassert
1>libcurl.lib(userauth.obj) : error LNK2001: symbole externe non résolu __imp__rewind
1>libcurl.lib(misc.obj) : error LNK2001: symbole externe non résolu __imp__vsnprintf 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T07:43:41.707

默认情况下，curl 使用`/MD`(dll) 运行时库进行编译（这就是为什么你会得到`__imp__`未解析外部的前缀）。

`/MT`我假设您使用（静态链接运行时）构建您的 MFC 项目。

`RTLIBCFG`您可以通过将构建控制台中的环境变量设置为 来构建具有静态运行时的 curl `static`，如下所示：

`set RTLIBCFG=static`

或者只是手动添加`/MT`到编译器标志和`/NODEFAULTLIB:MSVCRT.lib`生成文件中的链接标志，以防第一个建议不起作用。

# ios - 在 UIView 中调用 presentModalView 控制器

> ID：15919438
> 
> 赞同：0
> 
> 时间：2013-04-10T07:22:05.217
> 
> 标签：ios, uiview, uiviewcontroller, uinavigationcontroller

我想`presentModalViewController`打电话`UIView`。

我想创建一个模型类子类`UIView`并创建 3 个带有动作的按钮，然后将其添加到`UIView`. 我写了一个关于发送消息的小代码。在那我打电话`presentModalViewController`并将该视图添加到`firstViewController`.

可能吗？

我写了代码在`AppDelegate->application:didReceiveLocalNotification` 收到通知后，这个视图将被添加到`MainViewController`

```
NotifViewModel *remainderAlert = [[NotifViewModel alloc]initWithFrame:CGRectMake(40, 60, 250, 300)];

[remainderAlert showRemainderAlert1];

[self.viewController.view addSubview:remainderAlert]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:16:04.650

No, you can't call `presentModalViewController` on `UIView`.

You only can 'presentModalViewController' from `UIViewController` or it's subclass (`UINavigationController`, `UITableViewController`, etc).

# meteor - [meteor][0.6.*] package.js 错误：未定义模块

> ID：15919441
> 
> 赞同：2
> 
> 时间：2013-04-10T07:22:14.287
> 
> 标签：meteor

我尝试部署我的流星应用程序，但它仍然失败。我使用meteor 0.6.1，以及它的包系统。在我的根应用程序中，我创建了以下文件树：

```
packages
    cheerio
        package.js
    iconv-lite
        package.js 
```

这是 package.js 的内容：

```
Package.describe({
    summary: 'Cheerio, an html parser with Jquery like API, but server side'
});

Npm.depends({cheerio: '0.10.8'}); 
```

和

```
Package.describe({
    summary: 'Encoding management'
});

Npm.depends({'iconv-lite': '0.2.7'}); 
```

然后我做了一个流星部署appName，然后一个流星记录appName，这是错误：

```
[Tue Apr 09 2013 13:14:59 GMT+0000 (UTC)] INFO ReferenceError: module is not defined
at app/packages/cheerio/index.js:5:11
at /meteor/containers/72e47bd9-1446-3b0f-126d-113dfb566c3c/bundle/server/server.js:282:7
at Array.forEach (native)
at Function._.each._.forEach (/meteor/dev_bundles/0.3.0/lib/node_modules/underscore/underscore.js:79:11)
at run (/meteor/containers/72e47bd9-1446-3b0f-126d-113dfb566c3c/bundle/server/server.js:227:7) 
```

所以我遇到了一个问题，因为 var`module`没有在 js 文件中定义。我不知道该怎么做，任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:47:44.763

基于这个网站：[meteor-npm-integration](http://www.armetiz.info/meteor-npm-integration/)，我写了一个小题目，稍微解释一下meteor Npm包的系统：[tumblr](http://rebolon.tumblr.com/post/47618181073/meteor-npm-package-how-to-do)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:25:01.057

我认为您仍然需要至少一个使用`api.add_files`package.js 添加的 js 文件，您可以使用它来完成`Npm.require`

# javascript - 选择框样式问题

> ID：15919442
> 
> 赞同：2
> 
> 时间：2013-04-10T07:22:18.900
> 
> 标签：javascript, jquery, html, css

我有这个选择框：

`<select class="slctbx condition-Combiner" onchange="updateConditionBuilder()" style="color: rgb(153, 153, 153);" disabled="disabled">`

我正在使用：

`$('#rule-condition-listing tr:last-child .condition-Combiner').removeAttr("style","#999999").removeAttr("disabled","disabled");`

所以它实际上删除了 disabled 属性而不是 color 属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:23:36.627

您必须将属性名称传递给，`removeAttr()` *但*您传递的名称具有**不正确语法**的值，请检查`removeAttr()` [此处](http://api.jquery.com/removeAttr/)的语法。您可以使用[css()](http://api.jquery.com/css/)设置颜色属性。

```
$('#rule-condition-listing tr:last-child .condition-Combiner').css("color","").removeAttr("disabled","disabled"); 
```

*除了使用 removeAttr 来启用元素，您还可以使用 .attr('disabled', false);*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:24:22.210

[.css()](http://api.jquery.com/css/) - 获取匹配元素集中第一个元素的样式属性值，或为每个匹配元素设置一个或多个 CSS 属性。

```
$('#rule-condition-listing tr:last-child .condition-Combiner').
  css("color","#999999").
   removeAttr("disabled","disabled"); 
```

或者

```
$('#rule-condition-listing tr:last-child .condition-Combiner').
  css("color","").
   removeAttr("disabled","disabled"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T07:27:30.200

如 jquery Api 文档中所述， removeAttr - 函数仅接受 1 个条件。所以如果你做类似的事情

```
$('#rule-condition-listing tr:last-child .condition-Combiner').removeAttr("style","#999999").removeAttr("disabled","disabled"); 
```

这意味着您删除了元素上的样式，并丢弃了“#999999”。禁用部分也是如此。

我希望它有所帮助。

亲切的问候，亚历克斯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T07:29:09.980

不要将属性与样式混合。

在 Jquery 中，您应该使用[.css()](http://api.jquery.com/css/)属性来处理样式，所以这应该可以工作

```
$('#rule-condition-listing tr:last-child .condition-Combiner').css("style","").removeAttr("disabled","disabled"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-10T07:33:19.270

用这个：

```
$('#rule-condition-listing tr:last-child .condition-Combiner').css("color","").removeAttr("disabled","disabled"); 
```

# asp.net-mvc - 如何在 Web 角色（IIS）中进行后台工作（如工作角色）？

> ID：15919445
> 
> 赞同：0
> 
> 时间：2013-04-10T07:22:26.953
> 
> 标签：asp.net-mvc, azure, signalr, azure-web-roles, azureservicebus

我正在开发 azure MVC4 应用程序，我需要从 servicebus 读取消息，然后通过 IIS（通过 SignalR）更新在线用户。我想在 web 角色中运行一些工作角色类型的进程。寻找在 Web 角色本身中处理服务总线的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:20:54.240

要在 Web 角色中运行“工作角色”，您只需在 Web 项目中实现 RoleEntryPoint，就像在工作角色中一样。

请记住，这个“后台”进程 (WaIISHost.exe) 与您的 Web 应用程序进程 (w3wp.exe) 完全隔离运行。虽然[这篇文章](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)已经很老了，但它仍然非常清楚地代表了您的 Web 角色中运行的进程。

您可以将 SignalR 托管在“工作角色”中，而不是 IIS。并将消息从 web worker 传递到服务总线，并从工作进程中读取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:58:53.570

我认为最好的解决方案是使用服务总线的工作人员角色，您可以尝试使用服务总线队列的工作人员角色。

您可以从网络上获取所需的消息，通过服务总线队列将其发送给工作者角色，然后执行所需的过程。

之后，无论是使用队列还是服务队列，您都可以将结果发送回 webrole。

您可以查看此链接，我认为他正在做一些类似的事情[http://middlewareinthecloud.com/2012/06/23/azureservice-bus-queues-in-worker-roles/](http://middlewareinthecloud.com/2012/06/23/azureservice-bus-queues-in-worker-roles/)

这是带有服务总线队列的工作角色的 MSDN URL [http://msdn.microsoft.com/en-us/library/windowsazure/jj149831.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj149831.aspx)

# rhomobile - RhoMobile 中的 Web 视图

> ID：15919450
> 
> 赞同：0
> 
> 时间：2013-04-10T07:22:34.060
> 
> 标签：rhomobile

我是 rhoMobile 的新手，我正在尝试从 application.rb 打开 google 页面阅读 webview 文档，但没有找到将应用程序放入 snc 的方法。

```
application.rb 
```

{ def on_ui_created WebView.navigate(" [http://www.mysite.com](http://www.mysite.com) ") end }

请帮助我如何进行。建议一些 gud 教程来启动。（所有教程仅显示模型创建）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T14:02:12.147

这里是基础教程。如果您逐步阅读文档，您应该会看到它。

[http://docs.rhomobile.com/rhoelements/rhoelements-tutorial](http://docs.rhomobile.com/rhoelements/rhoelements-tutorial)

此外，您在主页上也有示例章节

[http://docs.rhomobile.com/](http://docs.rhomobile.com/)

示例应用

**API 示例：**演示所有功能的简单 Rhodes 应用程序。

**TrackR：** Pivotal Tracker 的第三方 iPhone/Android 应用程序的源代码。

**Rhostore：**我们在 Rhodes 教程中向您展示如何构建的简单商店应用程序。

**Rhostore Bulk：**演示如何使用批量同步功能的简单商店应用程序。

**网络研讨会样本：网络研讨会**中显示的所有样本的集合。

# php - 如何用另一个自定义日历（阳历）替换 vtigercrm 的日历？

> ID：15919453
> 
> 赞同：1
> 
> 时间：2013-04-10T07:22:43.790
> 
> 标签：php, javascript, crm, vtiger

我正在修改 Vtiger CRM 环境，并将其语言从英语更改为波斯语。现在我想用另一个日历替换 Vtiger 的日历（它的系统是公历）。您可以在下面看到这两个压光机的图像：

已在 Vtiger 中使用的公历： ![公历](https://i.stack.imgur.com/eGlun.jpg)

我想在波斯 Vtiger 中使用的阳历：

![阳历](https://i.stack.imgur.com/8PZfo.jpg)

我相信我应该使用我的日历组件，`/var/www/html/vtigercrm/jscalendar`但我不知道如何用新日历替换公历。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T16:43:36.220

### 调整日期选择器小部件

您可以围绕您的波斯小部件编写一个[适配器，该适配器实现与](https://en.wikipedia.org/wiki/Adapter_pattern)[原始日历](http://sourceforge.net/p/vtigercrm/code/HEAD/tree/vtigercrm/trunk/jscalendar/calendar.js)对象相同的接口（对象方法，*而不是*UI）。然后 vtigercrm 可以与适配器交互，就好像它是原始的一样，适配器会将所有调用转换为波斯小部件期望的任何内容并转换所有响应。这也[修补了 Date 原型](http://sourceforge.net/p/vtigercrm/code/HEAD/tree/vtigercrm/trunk/jscalendar/calendar.js#l1582)。乍一看，似乎没有明确的[MVC 模式](https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)；小部件的作用类似于视图和控制器，而元素的作用类似于模型。但既然用户看到它，它也是一个视图。这让我们`calendar.js``<input>`

### 内部表示

由于 date`<input>`元素既是模型又是视图，因此日期的波斯表示形式会被 POST，您需要在服务器上处理翻译，*或者*将其 onload*从*公历和 onsubmit更改*为*公历。

如果你做后者，内部 vtiger 将只知道公历，你必须在所有显示日期的地方进行更改。

您可以尝试调整看起来像服务器模型的东西[`vt_DateTime`](http://sourceforge.net/p/vtigercrm/code/HEAD/tree/vtigercrm/trunk/modules/Calendar/Date.php)。如果 vtiger 会在任何地方使用它，你就完蛋了......但是我又去了兔子洞，看起来 vtiger 不是这样设计的......你可以清理设计并提交一个补丁，你可以找到所有以 'format' 开头的函数和方法，或者你可以在[bugtracker](https://wiki.vtiger.com/index.php/How_to_Access_Bug_Tracker)中发布一个功能请求。

无论如何，在检查了代码之后，我确信这超出了 StackOverflow 的答案。

# excel - Sheets.Select 和 Sheets.Activate 有什么区别？

> ID：15919455
> 
> 赞同：15
> 
> 时间：2013-04-10T07:22:52.953
> 
> 标签：excel, spreadsheet, vba

**`Sheets.Select`**在 VBA for Excel 中，和有什么区别**`Sheets.Activate`**？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T08:05:19.977

不同之处在于它们的灵活性。

`Activate`使指定的工作表成为活动工作表，并且只能应用于单个工作表

`Select`允许选择性地*扩展*当前选定的工作表以包括指定的工作表，例如

```
Worksheets("Sheet2").Select Replace:=False 
```

并且还允许选择一组工作表

```
Sheets(Array("Sheet3", "Sheet2")).Select 
```

* * *

以他们的最小形式`Select`做`Activate`同样的事情。

例如，如果当前仅选择了一张工作表（例如`Sheet3`），或者如果选择了多张工作表但*不包括*say `Sheet2`，则`Worksheets("Sheet2").Select`两者`Worksheets("Sheet2").Activate`都将`Sheet2`成为唯一选定的活动工作表。

另一方面，如果说两者`Sheet2`和`Sheet3`都被选中并且`Sheet2`是活动工作表，则`Worksheets("Sheet3").Activate`让两个工作表都被选中并成为`Sheet3`活动工作表，`Worksheets("Sheet2").Select`而使`Sheet3`唯一的选定工作表成为活动工作表。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-10T07:59:23.247

`.activate`您是否单击了工作表选项卡。

`.select`模拟您进行控制并单击选项卡。在 VBA 中，您还没有在工作表中。

您可以`.select`多张纸，但`.activate`只能一张。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-03T16:43:42.427

扩展上述内容：当使用 Replace:=False 运行以下代码时，sheet4 上不会发生工作表停用事件。如果使用 Replace:=True 代替，则将触发停用事件。

在大多数情况下，防止事件发生是可取的，因为它可能导致意外行为。

这意味着如果使用了 replace:=false，则 select 仅相当于 CTRL+单击工作表选项卡。

子

```
Dim rng As Range

Sheet4.Select Replace:=False
Set rng = Selection

Sheet5.Select Replace:=True
Selection = rng.Value 
```

结束子

感谢您的帖子，因为它帮助我理解了差异。

哈维

# datagrid - 获取声明性 dojox.grid.datagrid 的 onresizecolumn 中的列索引

> ID：15919456
> 
> 赞同：0
> 
> 时间：2013-04-10T07:22:54.860
> 
> 标签：datagrid, dojo, dojox.grid.datagrid, onresize

*   在声明性 dojox.grid.datagrid 中，我在 table 标记中使用 onresizecolumn。

> onresizecolumn="columnResize(this.id,this.cellIdx)"

onresizecolumn 调用一个函数。在调整特定列的大小时，我想获取 cellIdx。

```
<div class="claro" id="eterte" name="dataGrid" onclick="getConnect('inner__eterte');setWidgetproperty(this.id,'xy','inner__eterte');" ondblclick="editCustomGrid(this.id)" onmouseup="setDocStyle(this.id)" style="height:200px; left:39px; position:absolute; top:251px; width:950px;">
     <table class="claro" dojotype="dojox.grid.DataGrid" id="inner__eterte" onresizecolumn="columnResize(this.id,this.cellIdx)" rowselector="10px" style="height: 180px; width: 400px;">
          <thead>
               <tr>
                    <th field="Column1" id="Column1_6" width="159px">
                         Column1
                    </th>
               </tr>
          </thead>
     </table>
     <input id="hidden__eterte" name="dataGrid" style="display:none;" type="hidden">
</div>

function columnResize(id,index){
            alert();
            alert(id);
            alert(index);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:29:19.820

通过阅读[API 文档](http://dojotoolkit.org/api/1.6/dojox/grid/DataGrid)，我得出结论，Dojo**自动**将 Cell 索引发送到事件处理程序。所以解决方案是简单地提供以下属性`onResizeColumn="myFunction"`，然后定义一个这样的函数：

```
function myFunction(cellDx) {
    alert(cellDx);
} 
```

这应该可行，我什至做了一个[JSFiddle](http://jsfiddle.net/94Kzk/)来测试它。顺便说一句，你有什么理由想以声明的方式完成所有这些工作吗？就我的经验而言，用 JavaScript 编写大部分内容要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:03:16.963

我可以让它以这种方式工作，不确定这是否是最佳实践。

[http://jsfiddle.net/gE8rH/6/](http://jsfiddle.net/gE8rH/6/)

HTML（已删除`onresizecolumn`属性）：

```
<div class="claro" id="eterte" name="dataGrid" onclick="getConnect('inner__eterte');setWidgetproperty(this.id,'xy','inner__eterte');" ondblclick="editCustomGrid(this.id)" onmouseup="setDocStyle(this.id)" style="height:200px; width:950px;">
    <table dojotype="dojox.grid.DataGrid" id="inner__eterte" rowselector="10px" style="height: 180px; width: 400px;">
        <thead>
            <tr>
                <th field="Column1" id="Column1_6" width="109px">Column1</th>
                <th field="Column2" id="Column1_7" width="109px">Column2</th>
                <th field="Column2" id="Column1_8" width="109px">Column3</th>
            </tr>
        </thead>
    </table>
</div> 
```

JS（使用 Dojo 1.7+ 模块名称），分配给小部件的`onResizeColumn`属性：

```
require(["dojo/parser", "dijit/registry", "dojox/grid/DataGrid"], function (parser, registry) {
    parser.parse().then(afterParse);

    function afterParse() {
        var d = registry.byId("inner__eterte");
        console.log(d);

        d.onResizeColumn = function (colIdx) {
            console.log("columnResize");
            console.log("args", arguments);
            console.log("this", this);
            console.log("colIdx", colIdx);
        };
    }
}); 
```

调整第一列的大小时输出：

```
columnResize
args [0]
this [Widget dojox.grid.DataGrid, inner__eterte] { _attachPoints=[4], _attachEvents=[1], _connects=[0], more...}
colIdx 0 
```

# iphone - UICollectionView：像 Safari 选项卡或 App Store 搜索一样分页

> ID：15919457
> 
> 赞同：13
> 
> 时间：2013-04-10T07:22:58.197
> 
> 标签：iphone, ios, objective-c, ios6, uicollectionview

我想在我的应用程序中实现“卡片”，例如 Safari 选项卡或 App Store 搜索。

我将在屏幕中心向用户显示一张卡片，并在左右两侧显示上一张和下一张卡片的一部分。（例如，请参阅 App Store 搜索或 Safari 选项卡）

我决定使用`UICollectionView`，我需要更改页面大小（没有找到如何）或实现自己的布局子类（不知道如何）？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T21:28:30.703

下面是我发现获得这种效果的最简单方法。它涉及您的收藏视图和一个额外的秘密滚动视图。

**设置您的收藏视图**

*   设置您的集合视图及其所有数据源方法。
*   框架集合视图；它应该跨越您希望可见的整个宽度。
*   设置集合视图的`contentInset`：

    ```
    _collectionView.contentInset = UIEdgeInsetsMake(0, (self.view.frame.size.width-pageSize)/2, 0, (self.view.frame.size.width-pageSize)/2); 
    ```

这有助于正确偏移单元格。

**设置你的秘密滚动视图**

*   创建一个滚动视图，将其放置在您喜欢的任何位置。`hidden`如果您愿意，可以将其设置为。
*   将滚动视图边界的大小设置为页面所需的大小。
*   将自己设置为滚动视图的代表。
*   将其设置`contentSize`为集合视图的预期内容大小。

**移动手势识别器**

*   将秘密滚动视图的手势识别器添加到集合视图中，并禁用集合视图的手势识别器：

    ```
    [_collectionView addGestureRecognizer:_secretScrollView.panGestureRecognizer];
    _collectionView.panGestureRecognizer.enabled = NO; 
    ```

**代表**

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
    CGPoint contentOffset = scrollView.contentOffset;
    contentOffset.x = contentOffset.x - _collectionView.contentInset.left;
    _collectionView.contentOffset = contentOffset;
} 
```

随着滚动视图的移动，获取它的偏移量并将其设置为集合视图的偏移量。

我在这里写了关于这个的博客，所以请查看此链接以获取更新： http: [//khanlou.com/2013/04/paging-a-overflowing-collection-view/](http://khanlou.com/2013/04/paging-a-overflowing-collection-view/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-17T12:39:00.363

您可以继承 UICollectionViewFlowLayout 并像这样覆盖：

```
- (CGPoint)targetContentOffsetForProposedContentOffset:(CGPoint)contentOffset 
                                 withScrollingVelocity:(CGPoint)velocity
{
    NSArray* layoutAttributesArray = 
   [self layoutAttributesForElementsInRect:self.collectionView.bounds];

    if(layoutAttributesArray.count == 0)
        return contentOffset;

    UICollectionViewLayoutAttributes* candidate = 
    layoutAttributesArray.firstObject;

    for (UICollectionViewLayoutAttributes* layoutAttributes in layoutAttributesArray)
    {
        if (layoutAttributes.representedElementCategory != UICollectionElementCategoryCell)
            continue;

        if((velocity.x > 0.0 && layoutAttributes.center.x > candidate.center.x) ||
           (velocity.x <= 0.0 && layoutAttributes.center.x < candidate.center.x))
            candidate = layoutAttributes;

    }

    return CGPointMake(candidate.center.x - self.collectionView.bounds.size.width * 0.5f, contentOffset.y);
} 
```

这将根据速度获得下一个或上一个单元格......但是它不会捕捉到当前单元格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-17T13:07:34.807

[@Mike M](https://stackoverflow.com/a/22454509/123632)在 Swift 中的回答……</p>

```
class CenteringFlowLayout: UICollectionViewFlowLayout {

    override func targetContentOffsetForProposedContentOffset(proposedContentOffset: CGPoint, withScrollingVelocity velocity: CGPoint) -> CGPoint {

        guard let collectionView = collectionView,
            let layoutAttributesArray = layoutAttributesForElementsInRect(collectionView.bounds),
            var candidate = layoutAttributesArray.first else { return proposedContentOffset }

        layoutAttributesArray.filter({$0.representedElementCategory == .Cell }).forEach { layoutAttributes in

            if (velocity.x > 0 && layoutAttributes.center.x > candidate.center.x) ||
                (velocity.x <= 0 && layoutAttributes.center.x < candidate.center.x) {
                candidate = layoutAttributes
            }
        }

        return CGPoint(x: candidate.center.x - collectionView.bounds.width / 2, y: proposedContentOffset.y)
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-21T09:08:21.037

对 Soroush 的回答进行了一点编辑，这对我有用。我所做的唯一编辑而不是禁用手势：

```
[_collectionView addGestureRecognizer:_secretScrollView.panGestureRecognizer];
_collectionView.panGestureRecognizer.enabled = NO; 
```

我禁用了collectionview上的滚动：

```
_collectionView.scrollEnabled = NO; 
```

由于禁用手势也禁用了秘密滚动视图手势。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-28T15:12:57.450

我将添加另一个解决方案。就地捕捉并不完美（不如设置启用分页时那么好，但效果很好）。

我已经尝试实施 Soroush 的解决方案，但它对我不起作用。

因为它`UICollectionView`是它的子类，`UIScrollView`所以它会响应一个重要的`UIScrollViewDelegate`方法，即：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                     withVelocity:(CGPoint)velocity
              targetContentOffset:(inout CGPoint *)targetContentOffset 
```

（`targetContentOffset`一个**inout 指针**）让您重新定义集合视图的停止点（`x`在这种情况下，如果您水平滑动）。

关于以下几个变量的快速说明：

*   `self.cellWidth`– 这是您的集合视图单元格的宽度（如果您愿意，您甚至可以在那里对其进行硬编码）

*   `self.minimumLineSpacing`– 这是您在单元格之间设置的最小行距

*   `self.scrollingObjects`是集合视图中包含的对象数组（我需要这个主要是为了计数，知道什么时候停止滚动）

因此，想法是在集合视图的委托中实现此方法，如下所示：

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                     withVelocity:(CGPoint)velocity
              targetContentOffset:(inout CGPoint *)targetContentOffset
{       
    if (self.currentIndex == 0 && velocity.x < 0) {
        // we have reached the first user and we're trying to go back
        return;
    }

    if (self.currentIndex == (self.scrollingObjects.count - 1) && velocity.x > 0) {
        // we have reached the last user and we're trying to go forward
        return;
    }

    if (velocity.x < 0) {
        // swiping from left to right (going left; going back)
        self.currentIndex--;
    } else {
        // swiping from right to left (going right; going forward)
        self.currentIndex++;
    }

    float xPositionToStop = 0;

    if (self.currentIndex == 0) {
        // first row
        xPositionToStop = 0;
    } else {
        // one of the next ones
        xPositionToStop = self.currentIndex * self.cellWidth + (self.currentIndex + 1) * self.minimumLineSpacing - ((scrollView.bounds.size.width - 2*self.minimumLineSpacing - self.cellWidth)/2);
    }

    targetContentOffset->x = xPositionToStop;

    NSLog(@"Point of stopping: %@", NSStringFromCGPoint(*targetContentOffset));
} 
```

期待您提供的任何反馈，这些反馈可以使卡扣效果更好。我也会继续寻找更好的解决方案...

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-06-16T11:54:00.210

前面比较复杂，UICollectionView 是 UIScrollView 的子类，那么就这样做吧：</p>

```
[self.collectionView setPagingEnabled:YES]; 
```

你们都准备好了。

请参阅此[详细教程](http://adoptioncurve.net/archives/2013/04/creating-a-paged-photo-gallery-with-a-uicollectionview/)。

# java - 在 YuGiOh 游戏中，我可以在单例模式或工厂模式之间使用什么模式？

> ID：15919461
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:23:07.190
> 
> 标签：java, design-patterns

我正在尝试基于控制台开发简单的游戏 YuGiOh。我制作了 Supercard，它将继承 3 类陷阱卡、魔法卡和怪物卡。但是我应该在那个游戏中添加一些模式，单例模式和工厂模式之间的最佳选择是什么。

我应该把模式放在我的游戏中的什么地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:37:14.550

你的问题太模糊了，任何人都无法帮助你，单例模式和工厂模式有完全不同的用途，你可能可以在应用程序的某个地方同时使用它们。

在设计的初始阶段不要担心模式，在你自己的脑海中弄清楚你希望事情如何工作，也许画一些图表，想想你需要什么类，并产生一个高级的 OO 设计。模式将在稍后出现，一般来说，如果您已经完成了上述步骤，那么应该清楚您应该使用哪些（如果有的话）模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:41:31.157

单例模式适用于单实例对象。工厂模式用于创建超类或对象的不同实例。

单例模式适用于游戏本身和对象管理器（图形对象实例或任何渲染对象、声音管理器、游戏管理器、逻辑管理器等）

工厂模式在洗牌或任何其他对象生成机制时可用。可能是人工智能移动等。

还有许多其他模式可用于事件链、AI、对话事件等。

不过，codebox 是对的，您需要某种图表来至少正确地详细说明游戏。也许你应该从那开始。（创建类图和序列图将适用于 YuGiOh）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:41:44.823

这取决于你想要什么。单例实例在整个程序中都是唯一的，例如，您将能够拥有一个单一的陷阱卡，该陷阱卡将由程序中的所有其他对象共享。如果您只是想要一种创建好卡片实例的方法，您可能更喜欢工厂模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:47:39.177

如果您问“将我的模式放在哪里”和“应该是工厂还是单身”，您应该重新考虑您的方法。一般来说，模式的设计和实现是为了解决软件开发过程中遇到的常见问题。在这些问题出现之前，您不要无目的使用它们。

我不知道 YuGiOh 是什么，但是根据您的描述，如果您真的想使用这些模式（即教育目的），我会使用 Factory 来构建这些卡片对象，并使用单例来实现一些日志记录机制，但话又说回来 - 如所述上面你的问题是含糊的。

# mysql - EA添加存储过程时无数据库类型

> ID：15919463
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:23:07.917
> 
> 标签：mysql, database, enterprise-library, enterprise-architect

我看到这个官方页面[http://www.sparxsystems.com/uml_tool_guide/data_modeling/storedprocedureindividualclass.htm](http://www.sparxsystems.com/uml_tool_guide/data_modeling/storedprocedureindividualclass.htm)。我想将存储过程添加到我的项目中，没有可供选择的数据库，我只有这个： ![在此处输入图像描述](https://i.stack.imgur.com/itIeI.jpg)

这是我正在使用的 EA。

提前致谢

![在此处输入图像描述](https://i.stack.imgur.com/Dc3CW.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T00:25:21.573

您显示的文档不是指数据库，而是指您正在使用的 DBMS。此功能很可能是在版本 7 之后引入的。您可能需要下载当前版本 (10) 的新试用版，看看是否是这种情况。

对于您的设计而言，这可能并不重要，只要您在您正在处理的任何目标 DBMS 中编写存储过程即可。

# android - Adding two buttons which are touching each other in Framelayout

> ID：15919465
> 
> 赞同：1
> 
> 时间：2013-04-10T07:23:11.967
> 
> 标签：android, android-layout, android-framelayout

I want to add two buttons one below another in a FrameLayout but they should be touching. However, I am not managing to do this. Here is my code:

```
<FrameLayout
    android:id="@+id/lytOptions"
    android:layout_below="@id/imgLine"
    android:layout_width="fill_parent"        
    android:layout_height="wrap_content" 
    >

    <Button
        android:id="@+id/btnLogin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/action_via_email"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

    <Button
        android:id="@+id/btnSignUp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:text="@string/action_sign_up"
        android:textColor="@android:color/white"
        android:textStyle="bold" />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:10:59.023

Try this

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="49dp"
            android:text="Button" />

    </RelativeLayout> 
```

to get the output like this

![enter image description here](https://i.stack.imgur.com/nVUBC.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:26:08.513

Use vertical `LinearLayout` instead...

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_below="@id/imgLine"
android:layout_height="wrap_content"
android:orientation="vertical" >

<Button
    android:id="@+id/btnLogin"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/action_via_email"
    android:textColor="@android:color/white"
    android:textStyle="bold" />

<Button
    android:id="@+id/btnSignUp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"            
    android:text="@string/action_sign_up"
    android:textColor="@android:color/white"
    android:textStyle="bold" />
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:28:46.620

By using framelayout you are actually placing one image on another, instead use linearlayout with buttons width and height as wrap content,and avoid using layout weights of the buttons. Let me know if this solves your problem

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:46:33.960

As others have pointed out, the key answer is to use a LinearLayout to position the buttons next to each other. However, to a "touching" effect, you will need to do one or more of the following:

1.  Change the padding on each Button.
2.  Change the margin on each Button.
3.  Change the button background image so that it goes right to the edge of the View area.

My preference would be to set the margins and paddings to zero and to set the image to be the effect you want:

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_below="@id/imgLine"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- options 1 and 2 -->
    <Button
        android:id="@+id/btnLogin"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/action_via_email"
        android:textColor="@android:color/white"
        android:padding="0dp" <!-- Set there to be no space between the content and the surrounding views -->
        android:padding="0dp" <!-- Set to be no space int the content area but between the content and the edge of the content area -->
        android:textStyle="bold" />

    <!-- option 3 -->
    <Button
        android:id="@+id/btnSignUp"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"            
        android:text="@string/action_sign_up"
        android:textColor="@android:color/white"
        android:background="@drawable/my_background"
        android:textStyle="bold" />
</LinearLayout> 
```

You will need to define my_background as an imagine the drawable directory or res. You may the section on 9 patch images from [http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html) helpful.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T10:01:33.770

Use a TableLayout instead:

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" android:background="@drawable/button_style"/>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" android:background="@drawable/button_style"/>

    </TableRow>

</TableLayout> 
```

Assign a drawable button_style to the buttons:

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
 android:shape="rectangle">
<solid android:color="#38393B"/>    
<stroke android:width="0.5dp"  android:color="#8aaa"/>
<size android:width="120dp" android:height="80dp" /> 
```

# iphone - 如何在按钮中显示带下划线的文本：iphone

> ID：15919468
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:23:22.170
> 
> 标签：iphone, ios

我想在我的视图中显示邮件 ID，以便单击邮件 ID 应该打开邮件编写器视图。

我想将按钮文本显示为下划线，以显示它是一个超链接，并让按钮单击事件调用邮件编写器视图。目前，我无法显示带下划线的按​​钮文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:32:48.180

您可以使用 UILabel 来实现这个 Tack 查看[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)以显示下划线标签。并将 TapGestureRecognizer 添加到标签，并在该 TapGestureRecognizer 方法中实现代码以显示 MailComposer。

# android - 使用表格布局的 Android 按钮对齐

> ID：15919471
> 
> 赞同：0
> 
> 时间：2013-04-10T07:23:47.083
> 
> 标签：android, button, android-tablelayout

我正在尝试使用 Table Row 保持对齐的三个按钮，但中间的按钮仍然悬空，知道我错过了什么吗？

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:stretchColumns="*">

    <TableRow
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:gravity="center_horizontal">

    <Button
        android:id="@+id/abc" android:text="ABC"
        android:layout_weight="1" 
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>

    <Button
        android:id="@+id/def" android:text="DEF"
        android:layout_weight="1" 
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>

    <Button
        android:id="@+id/ghi" android:text="GHI"
        android:layout_weight="1"
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>
</TableRow> 
```

无法附上快照，但通过绘图在下面给出一些提示。第一个和第三个按钮是完美的，但中间的按钮仍然从底部向上一点。任何想法 ？

```
**********************************
*                                *
*   ABC        DEF        GHI    * 
*          ************          *
************          ************ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:15:55.700

试试这个，

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:stretchColumns="*" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal" >

        <Button
            android:id="@+id/abc"
            android:layout_weight="1"
            android:gravity="center"
            android:padding="20dip"
            android:text="ABC"
            android:textColor="#000000" />

        <Button
            android:id="@+id/def"
            android:layout_weight="1"
            android:gravity="center"
            android:padding="20dip"
            android:text="DEF"
            android:textColor="#000000" />

        <Button
            android:id="@+id/ghi"
            android:layout_weight="1"
            android:gravity="center"
            android:padding="20dip"
            android:text="GHI"
            android:textColor="#000000" />
    </TableRow>
</TableLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:38:37.983

尝试使用这个

```
<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="bottom"
    android:stretchColumns="*">

    <TableRow
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:gravity="center_horizontal">

    <Button
        android:id="@+id/btnManualLookup" android:text="ABC"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1" 
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>

    <Button
        android:id="@+id/downloadcerti" android:text="DEF"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1" 
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>

    <Button
        android:id="@+id/settingsbutton" android:text="GHI"
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:textColor="#000000"
        android:padding="20dip" android:gravity="center"/>
</TableRow> 
```

# java - 在定义的时间段内通过 Wifi 发现设备

> ID：15919472
> 
> 赞同：0
> 
> 时间：2013-04-10T07:23:51.490
> 
> 标签：java, multithreading

我正在编写代码以从我的移动设备发送`UDP Multicast`过来。`Wifi`网络中的其他设备上运行着一个服务器代码。服务器将侦听多播并**使用其 IP 地址和系统**类型（类型：计算机、移动设备、Raspberry Pi、Flyports 等）进行响应

在已发送 的移动设备上`UDP Multicast`，我需要获取响应**的设备列表**`UDP Multicast`。

为此，我创建了一个类，它将作为`device details`.

**DeviceDetails.class**

```
public class DeviceDetails
{
    String DeviceType;
    String IPAddr;
    public DeviceDetails(String type, String IP)
    {
        this.DeviceType=type;
        this.IPAddr=IP;
    }
} 
```

我在`group address of 225.4.5.6`和发送 UDP 多播数据包`Port Number 5432`。

我已经创建了一个类，它将调用一个`thread`将发送`UDP Packets`. 另一方面，我制作了一个`receiver thread`实现**Callable** Interface 以返回响应的设备列表。

这是代码：

**MulticastReceiver.java**

```
public class MulticastReceiver implements Callable<DeviceDetails>
{
    DatagramSocket socket = null;
    DatagramPacket inPacket = null;
    boolean check = true;
    public MulticastReceiver()
    {
        try
        {
            socket = new DatagramSocket(5500);
        }
        catch(Exception ioe)
        {
            System.out.println(ioe);
        }
    }
    @Override
    public DeviceDetails call() throws Exception
    {
        // TODO Auto-generated method stub
        try
        {
            byte[] inBuf = new byte[WifiConstants.DGRAM_LEN];
            //System.out.println("Listening");
            inPacket = new DatagramPacket(inBuf, inBuf.length);
            if(check)
            {
                socket.receive(inPacket);

            }

            String msg = new String(inBuf, 0, inPacket.getLength());

            Log.v("Received: ","From :" + inPacket.getAddress() + " Msg : " + msg);
            DeviceDetails device = getDeviceFromString(msg);
            Thread.sleep(100);
            return device;
        }
        catch(Exception e)
        {
            Log.v("Receiving Error: ",e.toString());
            return null;
        }
    }
    public DeviceDetails getDeviceFromString(String str)
    {
        String type;
        String IP;
            type=str.substring(0,str.indexOf('`'));
            str = str.substring(str.indexOf('`')+1);
            IP=str;
        DeviceDetails device = new DeviceDetails(type,IP);
        return device;
    }
} 
```

以下代码是调用的活动`Receiver Thread`：

```
public class DeviceManagerWindow extends Activity
{
    public void searchDevice(View view)
    {
        sendMulticast = new Thread(new MultiCastThread());
        sendMulticast.start();
        ExecutorService executorService = Executors.newFixedThreadPool(1);
        List<Future<DeviceDetails>> deviceList = new ArrayList<Future<DeviceDetails>>();

            Callable<DeviceDetails> device = new MulticastReceiver();
            Future<DeviceDetails> submit = executorService.submit(device);
            deviceList.add(submit);

        DeviceDetails[] devices = new DeviceDetails[deviceList.size()];
        int i=0;
        for(Future<DeviceDetails> future :deviceList)
        {
            try
            {
                devices[i] = future.get();
            }
            catch(Exception e)
            {
                Log.v("future Exception: ",e.toString());
            }
        }
    }
} 
```

`receive method`现在接收数据包的标准方法是在无限循环下调用。但我只想在前 30 秒内接收传入连接，然后停止寻找连接。

`This is similar to that of a bluetooth searching. It stops after 1 minute of search.`

**现在问题在于，我可以使用计数器，但问题** `thread.stop` **现在已经被贬低了。不仅如此，如果我将** `receive method` **无限循环置于无限循环之下，它将永远不会返回该值。**

我应该怎么办。？我想搜索 30 秒，然后停止搜索并希望返回响应设备的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:53:40.353

而不是打电话`stop()`，你应该打电话`interrupt()`。这会导致 a在代码中的可*中断*`InterruptedException`位置被抛出，例如在调用时或被 I/O 操作阻塞时。不幸的是，没有实现，所以调用不能被中断。 所以你要么使用而不是，这样就会抛出一个if被调用。或者您需要通过在指定的时间间隔后调用cause来设置超时- 在这种情况下，您不需要中断线程。*`Thread.sleep()``DatagramSocket``InterruptibleChannel``receive`
`DatagramChannel``DatagramSocket``receive()``ClosedByInterruptException``Thread.interrupt()``DatagramSocket.setSoTimeout()``receive()``SocketTimeoutException`*

 *### 简单的方法

最简单的方法是简单地设置一个套接字超时：

```
public MulticastReceiver() {
    try {
        socket = new DatagramSocket(5500);
        socket.setSoTimeout(30 * 1000);
    } catch (Exception ioe) {
        throw new RuntimeException(ioe);
    }
} 
```

这将导致在 30 秒后`socket.receive(inPacket);`抛出一个。`SocketTimeoutException`正如您已经捕获`Exception`的那样，这就是您需要做的所有事情。

### 使 MulticastReceiver 可中断

这是一个更激进的重构。

```
public class MulticastReceiver implements Callable<DeviceDetails> {
    private DatagramChannel channel;
    public MulticastReceiver() {
        try {
            channel = DatagramChannel.open();
            channel.socket().bind(new InetSocketAddress(5500));
        } catch (IOException ioe) {
            throw new RuntimeException(ioe);
        }
    }
    public DeviceDetails call() throws Exception {
        ByteBuffer inBuf = ByteBuffer.allocate(WifiConstants.DGRAM_LEN);
        SocketAddress socketAddress = channel.receive(inBuf);

        String msg = new String(inBuf.array(), 0, inBuf.capacity());

        Log.v("Received: ","From :" + socketAddress + " Msg : " + msg);
        return getDeviceFromString(msg);;
    }
} 
```

`DeviceManagerWindow`看起来有点不同；我不确定你打算在那里做什么，因为你在处理列表和数组，但你只有一个未来......所以我假设你想听 30 秒并获取尽可能多的设备。

```
ExecutorService executorService = Executors.newFixedThreadPool(1);
MulticastReceiver receiver = new MulticastReceiver();

List<DeviceDetails> devices = new ArrayList<DeviceDetails>();
long runUntil = System.currentTimeMillis() + 30 * 1000;
while (System.currentTimeMillis() < runUntil) {
    Future<Object> future = executorService.submit(receiver);
    try {
        // wait no longer than the original 30s for a result
        long timeout = runUntil - System.currentTimeMillis();
        devices.add(future.get(timeout, TimeUnit.MILLISECONDS));
    } catch (Exception e) {
        Log.v("future Exception: ",e.toString());
    }
}
// shutdown the executor service, interrupting the executed tasks
executorService.shutdownNow(); 
```

就是这样。无论您选择哪种解决方案，都不要忘记关闭套接字/通道。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T22:13:33.837

我已经解决了..您可以按以下方式运行您的代码：

**DeviceManagerWindow.java**

```
public class DeviceManagerWindow extends Activity
{
    public static Context con;
    public static int rowCounter=0;
    Thread sendMulticast;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_device_manager_window);
        WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
        if(wifi != null)
        {
            WifiManager.MulticastLock lock = wifi.createMulticastLock("WifiDevices");
            lock.acquire();
        }
        TableLayout tb = (TableLayout) findViewById(R.id.DeviceList);
        tb.removeAllViews();
        con = getApplicationContext();
    }
    public void searchDevice(View view) throws IOException, InterruptedException
    {
        try
        {
            sendMulticast = new Thread(new MultiCastThread());
            sendMulticast.start();
            sendMulticast.join();
        }
        catch(Exception e)
        {
            Log.v("Exception in Sending:",e.toString());
        } 
```

这是有时间限制的搜索......你可以使用**thread.join退出你的线程**

```
 //Device Will only search for 1 minute
        for(long stop=System.nanoTime()+TimeUnit.SECONDS.toNanos(1); stop>System.nanoTime();)
        {
            Thread recv = new Thread(new MulticastReceiver());
            recv.start();
            recv.join();
        }
    }
    public static synchronized void addDevice(DeviceDetails device) throws InterruptedException
    {
        ....
        Prepare your desired list here.
        ....
    }
} 
```

**不要在监听端添加任何循环。只需使用 socket.receive**

**MulticastReceiver.java**

```
public class MulticastReceiver implements Runnable
{
    DatagramSocket socket = null;
    DatagramPacket inPacket = null;
    public MulticastReceiver()
    {
        try
        {
            socket = new DatagramSocket(WifiConstants.PORT_NO_RECV);
        }
        catch(Exception ioe)
        {
            System.out.println(ioe);
        }
    }
    @Override
    public void run()
    {
        byte[] inBuf = new byte[WifiConstants.DGRAM_LEN];

        //System.out.println("Listening");
        inPacket = new DatagramPacket(inBuf, inBuf.length);
        try
        {
            socket.setSoTimeout(3000)
            socket.receive(inPacket);
            String msg = new String(inBuf, 0, inPacket.getLength());
            Log.v("Received: ","From :" + inPacket.getAddress() + " Msg : " + msg);
            DeviceDetails device = getDeviceFromString(msg);
            DeviceManagerWindow.addDevice(device); 
```

`socket.setSoTimeout(3000)`**只会将套接字的侦听时间设置为 3 秒。如果数据包没有到达，它将走得更远。**`DeviceManagerWindow.addDevice(device);`**此行将调用调用类中的 addDevice 方法。你可以在哪里准备你的清单**

```
 }
        catch(Exception e)
        {
            Log.v("Receiving Error: ",e.toString());
        }
        finally
        {
            socket.close();
        }
    }
    public DeviceDetails getDeviceFromString(String str)
    {
        String type;
        String IP;
            type=str.substring(0,str.indexOf('`'));
            str = str.substring(str.indexOf('`')+1);
            IP=str;
        DeviceDetails device = new DeviceDetails(type,IP);
        return device;
    }
} 
```

希望这有效..它会奏效。一切顺利。让我知道是否有任何问题。*

# java - 如何在我自己的班级中实现装箱和拆箱？

> ID：15919475
> 
> 赞同：7
> 
> 时间：2013-04-10T07:24:02.330
> 
> 标签：java, boxing

在 Java 中，没有像 C++ 那样覆盖运算符，所以我不知道如何为我自己的类实现装箱/拆箱。

例如，当我们执行以下操作时，可以使用 Integer 或 Float 进行装箱和拆箱：

```
int myVar = new Integer(25); 
```

但是我怎样才能在我的 MyObject 类中实现类似的东西呢？（如果我想自己包装一个原始类型）。有代码示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T07:25:26.167

没有办法为用户定义的类实现自动装箱和自动拆箱。

您当然可以提供命名方法来完成这项工作。但是，每次需要装箱或拆箱时，您都必须显式调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:26:40.060

无法为您自己的类实现自动装箱和拆箱 - 自动（拆箱）装箱是一种语言功能，在 Java 编译器中实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T07:37:44.600

自动装箱或拆箱仅适用于 java 中的原语，如`Long`包装类 long

```
Integer for int 
```

但用户无法拒绝，

最好你可以做构造函数初始化

```
Myclass m=new Myclass(100); 
```

# typo3 - TYPO3 TCA 选择，项目数组中的 NULL 值

> ID：15919478
> 
> 赞同：5
> 
> 时间：2013-04-10T07:24:07.880
> 
> 标签：typo3, fluid, extbase

我在 Typo3 4.5 中使用 extbase 和流体进行了扩展。现在要插入一些数据，我使用后端模块“列表”，它使用表格的 TCA 制作一些表格。为了使选择框可选，我在外部表之前插入一个项目，如下所示：

```
 'feuser' => array(
        'exclude' => 0,
        'label' => 'LLL:EXT:yes/Resources/Private/Language/locallang_db.xml:tx_yes_domain_model_schools.feuser',
        'config' => array(
            'type' => 'select',
            'items' => array(
                array('', NULL),
            ),
            'foreign_table' => 'fe_users',
            'maxitems' => 1,
        ),
    ), 
```

现在，由于我的数据库中有一个关系（允许使用 NULL），我必须插入一个 NULL 值。但是像这样是行不通的。我也试过 ''、"" 和 0。但这些也不起作用。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T06:54:37.797

尝试这个：

```
'items' => array(
    array('', -1)) 
```

数组中的第二个参数不是 db 的值！

# google-chrome - css3过滤器的一致渲染

> ID：15919479
> 
> 赞同：0
> 
> 时间：2013-04-10T07:24:15.600
> 
> 标签：google-chrome, css, filter, safari, webkit

我正要在我的网站上做一些花哨的 css3 过滤器，但遗憾的是浏览器显示完全不同的结果。

因为过滤器目前仅适用于 webkit 浏览器（[source](http://caniuse.com/#feat=css-filters)），所以到目前为止我只进行了实验`-webkit-filter`。

问题是，Safari（在 iOS 上测试）解释`brightness(0)`为默认值并`brightness(1)`全亮显示元素。Chrome 的默认值为*1*。

有没有办法为 webkit 浏览器实现一致的亮度？

有关示例，请参见此 jsFiddle：http: [//jsfiddle.net/4SMDf/1/](http://jsfiddle.net/4SMDf/1/)

在此先感谢，麦克法兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:43:51.877

您可以使用 SVG 过滤器来做到这一点。

这是一个例子：

```
<svg height="0" xmlns="http://www.w3.org/2000/svg">
  <filter id="brightness">
    <feComponentTransfer>
      <feFuncR type="linear" slope="[amount]"/>
      <feFuncG type="linear" slope="[amount]"/>
      <feFuncB type="linear" slope="[amount]"/>
    </feComponentTransfer>
  </filter>
</svg> 
```

在此处查看**亮度（数量）**部分：[https ://developer.mozilla.org/en-US/docs/CSS/filter](https://developer.mozilla.org/en-US/docs/CSS/filter)

# wpf - WPF 动画第一次没有运行

> ID：15919480
> 
> 赞同：2
> 
> 时间：2013-04-10T07:24:18.990
> 
> 标签：wpf

我有一个窗口，它打算在显示时淡入。第一次使用时，动画不运行。在随后的使用中，它工作正常。这是我实例化以显示某些内容的请求者-我不会保留它并重用实例。我实例化请求者，设置各种属性，例如 .Top 和 .Left，然后调用 ShowDialog。在构造函数中，我正在设置 DataContext。如果我将其注释掉（因为另一个线程建议这可能是由于在播放动画时设置数据上下文引起的），那么它就解决了这个问题。然而，直到调用构造函数之后，我才调用 ShowDialog。而且因为每次我想使用它时都会实例化一个新实例，所以我不明白为什么只有在第一次运行时才会出现问题。

就好像第一次加载程序集一样，但是 VS 输出窗口没有显示这种情况。

窗口从零不透明度开始，因此通过变得可见它显示动画正在被触发，它只是没有时间运行。如果我将 BeginTime 设置为半秒，那么它每次都可以工作，但显然它在响应按钮按下时会更加缓慢，并且在速度较慢的机器上可能仍然不够用。

我在 XAML 中定义动画

```
<Window.Triggers>
    <EventTrigger RoutedEvent="Window.Loaded">
        <BeginStoryboard>
            <Storyboard Name="FormFade">
                <DoubleAnimation Name="FormFadeAnimation"
                                 Storyboard.TargetProperty="(Window.Opacity)"
                                 From="0.0" To="1.0" Duration="0:0:0.25"
                                 AutoReverse="False" RepeatBehavior="1x"
                                 BeginTime="0:0:0"/>
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>
</Window.Triggers> 
```

是否有更合适的事件触发？我尝试了 Window.Initialized 和 Window.IsVisibleChanged 但似乎都不是路由事件，因此在解析 XAML 时它们会引发异常。

我可以将其全部转移到代码后面（因为无论如何都必须在那里进行淡出），但如果可以的话，我更喜欢将东西放在 xaml 中。

我可以从 Dispatcher.BeginInvoke 分配 DataContext，但这看起来很混乱，而且将来要填充的字段可能会在动画之后发生并且看起来很糟糕，所以我只是将问题隐藏到以后。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:59:53.380

试试这个代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="WpfApplication2.MainWindow"
    x:Name="thisWindow"
    Title="MainWindow"
    Width="640" Height="480" AllowsTransparency="True" WindowStyle="None">

    <Window.Resources>
        <Storyboard x:Key="MyStoryboard">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="thisWindow">
                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                <EasingDoubleKeyFrame KeyTime="0:0:0.25" Value="1"/>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Window.Resources>
    <Window.Triggers>
        <EventTrigger RoutedEvent="FrameworkElement.Loaded">
            <BeginStoryboard Storyboard="{StaticResource MyStoryboard}"/>
        </EventTrigger>
    </Window.Triggers>

    <Grid x:Name="LayoutRoot"/>

</Window> 
```

# objective-c - 编译器开销：objectiveC 中的 IF 条件会施加多少开销？

> ID：15919491
> 
> 赞同：0
> 
> 时间：2013-04-10T07:24:48.727
> 
> 标签：objective-c

请参考以下代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";    
    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                              reuseIdentifier:CellIdentifier];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
     }

 //... some other code 
 if (imageLoadingQueue == nil) {
    imageLoadingQueue = [[NSOperationQueue alloc] init];
    [imageLoadingQueue setName:@"Image Loading Queue"];
}
//... some other code 

return cell;
} 
```

现在我们知道`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`每次滚动时都会调用该方法，但要引用条件：`if (cell == nil)`& `if (imageLoadingQueue == nil)`。这种情况会被反复检查。

**所以我想知道如果条件成本有多少性能开销？**

*编辑：我们如何衡量？任何工具？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:28:29.977

`if`声明本身可以忽略不计。语句中使用的*条件*可能很重要（如 中），但在这种情况下并非如此，只需根据值检查指针。`if``if (somethingThatTakesTenSeconds()) ...``nil`

无论如何，这无关紧要。如果您需要选择是否发生某事，*则必须*使用选择语句，无论是`if`、`select`还是三元运算。所以它有多繁重并没有真正进入等式。

# shell - gdb没有启动应用程序

> ID：15919492
> 
> 赞同：0
> 
> 时间：2013-04-10T07:25:06.010
> 
> 标签：shell, gdb

我正在尝试在模拟器外壳中使用 gdb 运行应用程序。我使用以下命令

```
gdb <path of exe> 
```

但是，该应用程序没有启动，我收到以下错误

```
Starting program: <path of exe>
[Thread debugging using libthread_db enabled]

Program exited normally. 
```

但是，当我将正在运行的进程附加到 gdb 时，它工作正常。

```
gdb -pid <process_id> 
```

可能是什么原因？

```
****<Update>****
On Employed Russian's advice, I did these steps
(gdb) b _start
Breakpoint 1 at 0xb40
(gdb) b main
Breakpoint 2 at 0xc43
(gdb) catch syscall exit
Catchpoint 3 (syscall 'exit' [1])
(gdb) catch syscall exit_group
Catchpoint 4 (syscall 'exit_group' [252])

(gdb) r
Starting program: <Exe Path>
[Thread debugging using libthread_db enabled]

Breakpoint 1, 0x80000b40 in _start ()
(gdb) c
Continuing.

Breakpoint 2, 0x80000c43 in main ()
(gdb) c
Continuing.

Catchpoint 4 (call to syscall 'exit_group'), 0xb7fe1424 in __kernel_vsyscall
    ()
(gdb) c
Continuing.

Program exited normally.
(gdb) 
```

Catchpoint **4 (call to syscall 'exit_group'), 0xb7fe1424 in __kernel_vsyscall** 是什么意思？

**我进一步探索，我发现了这个**

 **```
Single stepping until exit from function main,
which has no line number information.
__libc_start_main (main=0xb6deb030 <main>, argc=1, ubp_av=0xbffffce4, 
    init=0x80037ab0 <__libc_csu_init>, fini=0x80037b10 <__libc_csu_fini>, 
    rtld_fini=0xb7ff1000 <_dl_fini>, stack_end=0xbffffcdc) at libc-start.c:258
258 libc-start.c: No such file or directory.
    in libc-start.c 
```

但是，libc.so 存在，我也使用导出了它的路径

```
export LD_LIBRARY=$LD_LIBRARY:/lib 
```

为什么不加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:00:28.440

> 该应用程序无法启动，我收到以下错误

您误会了：应用程序**确实**启动（并且您得到的输出*不是*错误），然后立即以`0`退出状态退出。

因此，您应该查看应用程序的问题，而不是 GDB 的问题。查看问题的一种方法是在`_start`and上设置断点`main`，并检查是否达到了这些函数中的任何一个。

如果是，则使用`catch syscall exit`或`catch syscall exit_group`可能会为您提供有关应用程序退出原因的线索。

也许您的应用程序采用了反逆向工程技术，并检测到它正在被调试？

更新：

您已验证应用程序实际上已启动，到达 main，然后调用`exit`. 现在你所要做的就是弄清楚它*为什么*调用exit。这样做的方法是找出`exit_group`系统调用的来源。

为此，您应该进入该系统调用 ( `Catchpoint 4`)，发出 GDB`where`命令。这将告诉您您的应用程序如何决定退出。

您还（显然）在没有调试信息（通常是`-g`标志）的情况下构建了您的应用程序。如果您构建应用程序的调试版本，您将使调试更容易。**

# cordova - 诺基亚 Lumia 上 phonegap 应用的媒体查询

> ID：15919494
> 
> 赞同：1
> 
> 时间：2013-04-10T07:25:14.630
> 
> 标签：cordova, windows-phone-8, media-queries

我正在为诺基亚 Lumia 620 开发应用程序。我对 ios phonegap 应用程序的媒体查询有所了解，但不知道如何在同一个 css 中处理诺基亚 Lumia 620、900 和 920 的媒体查询。所以请告诉我如何为它编写媒体查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T07:32:03.283

没关系，我找到了一种方法来做到这一点。我是这样使用的-

```
@media screen and (orientation: portrait) {  
@-ms-viewport  
{ 
  width: 480px; 
} 
```

# facebook-graph-api - 如何使用 GraphAPI 在朋友墙上发帖？

> ID：15919498
> 
> 赞同：1
> 
> 时间：2013-04-10T07:25:30.320
> 
> 标签：facebook-graph-api, facebook-wall

我正在使用 GraphAPI 发布到朋友的墙上，但我无法做到。我正在尝试以下链接：

> [http://graph.facebook.com/friendID/feed](http://graph.facebook.com/friendID/feed)

谁能帮我把帖子贴到你朋友的墙上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:15:42.710

As of february, you can't post content to a friend's wall using the API - see here: [https://developers.facebook.com/roadmap/completed-changes/#february-2013](https://developers.facebook.com/roadmap/completed-changes/#february-2013)

> Removing ability to post to friends walls via Graph API We will remove the ability to post to a user's friends' walls via the Graph API. Specifically, posts against [user_id]/feed where [user_id] is different from the session user, or stream.publish calls where the target_id user is different from the session user, will fail.

You can post links using the FB.ui function w/ the 'to' parameter set to a friend's id, however.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T05:50:22.160

请参阅自 2013 年 3 月 6 日以来的以下更改，发布在 Facebook 开发人员路线图中的已完成更改列表中：

```
Removing ability to post to friends walls via Graph API
We will remove the ability to post to a user's friends' walls via the Graph API. Specifically, posts against [user_id]/feed where [user_id] is different from the session user, or stream.publish calls where the target_id user is different from the session user, will fail.
If you want to allow people to post to their friends' timelines, invoke the feed dialog. Stories that include friends via user mentions tagging or action tagging will show up on the friend’s timeline (assuming the friend approves the tag). For more info, see this blog post. 
```

# c# - DataGridView - 单元格验证 - 防止 CurrentRow/Cell 更改

> ID：15919504
> 
> 赞同：2
> 
> 时间：2013-04-10T07:25:52.723
> 
> 标签：c#, winforms, validation

我`DataGridView`有源设置为`SortableBindingList`. 在这种形式中，有列`Comment`，我需要防止用户插入一些字符，从而进行验证。

我想要做的是，每当用户输入无效值时，系统都会通知他（`OnNotification( 'You entered wrong comment');`）并强制他/她保持编辑模式。

到目前为止，我构建了这样的解决方案：

```
void MyDataGridView_CellEndEdit( object sender, DataGridViewCellEventArgs e )
{
    if (e.ColumnIndex == ColumnComment.Index) {
        object data = Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
        if( (data != null) && (!CommentIsValid( data.ToString()))){
            CurrentCell = Rows[e.RowIndex].Cells[e.ColumnIndex];
            BeginEdit( true );

            // My notification method
            OnNotification( String.Format( "Comment `{0}` contains invalid characters) );
            return;
        }
    }
} 
```

我对此有以下问题：

*   `OnCellValidating`仅在整个表单关闭或当前行更改时触发，而不是在我完成*单个单元格*的编辑后触发，因此我已将 check 放入`CellEndEdit`.
*   当我使用`Enter`/`Esc`结束编辑时，它按预期工作。
*   当我使用鼠标单击另一行时，单元格保持编辑模式，但另一行被选中。
*   当我尝试使用`Enter`（显示无效评论通知）然后`Esc`（取消编辑）它使用*推送*的值`Enter`（因为编辑模式已完成）。

**所以我的问题是**：

*   如何`CellValidating`在每次单元格编辑后触发，而不是在表单关闭时触发
*   即使在鼠标单击后如何防止`CurrentRow`和更改？`CurrentCell`
*   如何强制单元格**保持**编辑模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:22:38.713

> 当我使用鼠标单击另一行时，单元格保持编辑模式，但另一行被选中。

在这里，我会使用一个全局布尔值，`bool isInvalidState`比如说和一个全局`DataGridViewCell = invalidCell`对象。在默认状态下，您可以设置`isInvalidState = false`和`invalidCell = null`。然后使用

```
private bool OnNotification(string cellValue)
{
    // Check for error.
    if (error)
        return false;
} 
```

然后在上面的方法中

```
void MyDataGridView_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == ColumnComment.Index) {
        object data = Rows[e.RowIndex].Cells[e.ColumnIndex].Value;
        if((data != null) && (!CommentIsValid(data.ToString()))){
            CurrentCell = Rows[e.RowIndex].Cells[e.ColumnIndex];
            BeginEdit(true);

            // My notification method
            isInvalidState = OnNotification(
                String.Format("Comment `{0}` contains invalid characters));
            if (isInvalidState)
                invalidCell = MyDataGridView[e.RowIndex, e.ColumnIndex];
            return;
        }
    }
} 
```

`CellContentClick`现在，在您的设备上连接一个事件`DataGridView`并检查是否`isInvalidState == true`

```
private void MyDataGridView_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    if (isInvlaidState)
    {
        isInvalidState = false;
        MyDataGridView.CurrentCell = invalidCell;
        invalidCell = null;
        return;
    }
    // Do other stuff here.
} 
```

> 当我尝试使用 Enter （显示无效评论通知）然后 Esc （取消编辑）时，它使用 Enter 推送的值（因为编辑模式已完成）。

我不确定这个问题；您可能必须处理`KeyDown`事件并捕获转义键 - 以不同的方式处理它。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:07:08.767

尝试这样的事情。它会起作用的。

```
private void datagridview1_dataGridview_CellValidating
(object sender, DataGridViewCellValidatingEventArgs e) 
{
    if (datagridview1_dataGridview.Rows[e.RowIndex].Cells[2].Value.Equals(""))
    {
         MessageBox.Show("Product name should not be empty", "Error");
         datagridview1_dataGridview.CurrentCell = datagridview1_dataGridview.Rows[e.RowIndex].Cells[2];
         datagridview1_dataGridview.CurrentCell.Selected = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T20:23:08.673

不幸的是，MoonKnight 的解决方案对我来说并不完全有效，因为`CellContentClick`事件处理程序中的代码从未将控件设置回正在验证其值的单元格，当它具有无效值时。尽管如此，考虑到他对使用全局变量的宝贵提示，`isInvalidState`并`invalidCell`帮助我构建了以下解决方案，该解决方案完全按照 OP 中的要求工作。

`CellValidating`以正确的方式使用和的组合`CellValidated`解决问题如下：

在`CellValidating`事件处理程序中进行数据验证。设置`isInvalidState`标志和`cellWithInvalidUserInput`变量（注意：我将其重命名`invalidCell`为`cellWithInvalidUserInput`）：

```
private void MyDataGridView_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    var cellUnderConsideration = MyDataGridView.Rows[e.RowIndex].Cells[e.ColumnIndex];

    if (!ValidateCurrentCellValue(cellUnderConsideration)) 
    {               
       OnNotification( String.Format( "Comment `{0}` contains invalid characters) );
       //Or MessageBox.Show("your custom message");

       isInvalidState = true;
       cellWithInvalidUserInput = cellUnderConsideration;
       e.Cancel = true;                    
    }
} 
```

数据验证功能：

```
bool isInvalidState;
DataGridViewCell cellWithInvalidUserInput;
private bool ValidateCurrentCellValue(DataGridViewCell cellToBeValidated)
{
    //return 'true' if valid, 'false' otherwise
} 
```

`CellValidated`在事件处理程序内的 UI 控件上执行所需的操作：

```
private void MyDataGridView_CellValidated(object sender, DataGridViewCellEventArgs e)
{
    if (isInvalidState)
    {
        isInvalidState = false;

        if (cellWithInvalidUserInput != null && cellWithInvalidUserInput.RowIndex > -1)
        {
            MyDataGridView.CurrentCell = cellWithInvalidUserInput;
            MyDataGridView.CurrentCell.Selected = true;
            MyDataGridView.BeginEdit(true);
        }

        cellWithInvalidUserInput = null;
    }
} 
```

# c# - 将邮件从本地主机发送到 Gmail 时出错

> ID：15919505
> 
> 赞同：0
> 
> 时间：2013-04-10T07:25:52.950
> 
> 标签：c#, asp.net, smtpclient

我只是在测试从本地主机发送到 gmail.com 的电子邮件

```
***Webconfig:***

<system.net>
<mailSettings>
  <smtp>
    <network 
      host="localhost"
       port="25"
        />
  </smtp>
</mailSettings>
</system.net>

***Default.aspx:***

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs"  Inherits="MasterApps._Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>Untitled Page</title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Button" />      

</div>
</form>
</body>
</html>

***Code behind is:***

protected void Button1_Click(object sender, EventArgs e)
{

        MailAddress from = new MailAddress("mwaghela7@gmail.com");
        MailAddress to = new MailAddress("mwaghela7@gmail.com");
        MailMessage msg = new MailMessage(from, to);
        msg.Subject = "hi";
        msg.Body = "hello";
        SmtpClient sc = new SmtpClient();
        sc.Send(msg);

} 
```

它的触发错误如下：

> * System.dll 中出现“System.Net.Mail.smtp failedReceipientExeception”类型的异常，但未在用户代码中处理。附加信息：邮箱不可用。服务器响应为：5.7.1。无法中继 mwaghela7@gmail.com

上面的代码有什么问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:22:17.027

好吧，在大多数情况下，由于指定的端口号或您没有建立安全连接，电子邮件无法发送。试试这个替代方案。单击[此处，](http://www.emailarchitect.net/easendmail/)您可以下载一些用于向所有域发送电子邮件的类文件。首先添加对 EASendMail 的引用。然后像这样编码。

```
using EASendMail;
 SmtpMail oMail = new SmtpMail("Tryit");
                    SmtpClient oSmtp = new SmtpClient();

            //        
                    oMail.From = "eamil";

            //        // Set recipient email address
                    oMail.To = "email@domain.com";

                    // Set email subject
                   oMail.Subject = "subject";

                    // Set email body
                    oMail.TextBody = "body";

                    SmtpServer oServer = new SmtpServer("smtp.gmail.com");

                    oServer.User = "email";
                    oServer.Password = "password";

                   oServer.Port = 465;

            //detect SSL type automatically
                 oServer.ConnectType = SmtpConnectType.ConnectSSLAuto;
                    oSmtp.SendMail(oServer, oMail); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:58:09.827

尝试这个。`

```
using (var client = new SmtpClient("smtp.gmail.com", 587))
            {
                client.Credentials = new NetworkCredential("you@gmail.com","password");
               var mail = new MailMessage();
                mail.From = new MailAddress("email");
                mail.To.Add("email");
                mail.Subject = "something";
                mail.Body = "body";
               client.Send(mail); 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:32:25.777

您的邮件服务器可能不支持匿名发送邮件。您可以将邮件发送给您邮件服务器中的用户。

尽管如下编辑您的 web.config 代码，然后尝试：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="Network">
            <network host="localhost"
                port="25"
                from="no-reply@me.com"/>
        </smtp>
    </mailSettings>
</system.net> 
```

# javascript - 在用 Javascript (JQuery Mobile) 创建的表中应用 css 样式

> ID：15919506
> 
> 赞同：2
> 
> 时间：2013-04-10T07:25:55.200
> 
> 标签：javascript, php, css, html-table

我有一个使用 PHP 和 Javascript 动态创建的表。现在，我正在尝试为最后一个设置样式`<tr>`以添加填充和边框，但它不起作用。

我该如何进行？我需要调用一些元素，如 trigger('create') 或其他元素？

我的部分代码：

```
$.ajax ( {
        beforeSend: function() { $.mobile.showPageLoadingMsg(); }, //Show spinner
        complete: function() { $.mobile.hidePageLoadingMsg() }, //Hide spinner
        url: "http://www.someweb.com/somePHP.php",
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
            for(var i = 0; i< data[1].length;i++){
                table += "<tr><td>"+data[1][i].mon_da+"</td>";
                table += "<td>"+Number(data[1][i].mon_qu).toFixed(2)+"€&lt;/td>";
                table += "<td>"+data[1][i].mon_con+"</td></tr>";
            }
            table += "<tr style='border:1px solid;padding-top:20px;'><td colspan='2'><b>Disp:</b></td><td><b>"+Number(data[0].usr_to).toFixed(2)+"€&lt;/b></td></tr>";
            document.getElementById("tableMo").innerHTML = table;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:31:39.850

[你不能`<tr>`像这样将样式应用于 s](http://jsfiddle.net/vmw28/)。

您可以[尝试将它们应用于`<td>`s。](http://jsfiddle.net/vmw28/1/)

我个人更喜欢`tr`在 CSS 文件中添加一个类并在 JS 外部处理样式。

[jsFiddle](http://jsfiddle.net/vmw28/2/)

**HTML**

```
<tr class="stylish">
    <td colspan='2'><b>Disp:</b></td>
    <td><b>"+Number(data[0].usr_to).toFixed(2)+"€&lt;/b></td>
</tr> 
```

**CSS**

```
.stylish td {
    border:1px solid #000;
    padding-top:20px;
}
.stylish td:first-child {
    border-right:0;
}
.stylish td:last-child {
    border-left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:54:22.060

You can do that using jquery css selector

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:32:20.980

您可以通过 id 获取表格元素，然后使用 javascript 添加 CSS 样式属性：

例如：

```
 document.getElementById("tableMo").style.border = "1px solid black";
document.getElementById("tableMo").style.padding = "10px"; 
```

查看一些 DOM 样式教程，它可能会对您有所帮助

[http://www.w3schools.com/jsref/dom_obj_style.asp](http://www.w3schools.com/jsref/dom_obj_style.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:32:27.537

这样做的一种方法是向您的`tr`标签添加一个类，如下所示：

```
table += "<tr class='rowStyle'><td>"+data[1][i].mon_da+"</td>"; 
```

现在您可以设置行的样式，或者如果您想设置表格本身的样式，您可以使用 jquery 来获取行的父级，如下所示：

```
var obj = $('.rowStyle').closest('table'); 
```

并给它一个ID：

```
$(obj).attr('id','tableID'); 
```

现在只需设计它。

虽然这是一个冗长的方法。

*希望这可以帮助 ：）*

# linux - 有没有 Linux 命令行环境的网站，可以用来练习命令？

> ID：15919507
> 
> 赞同：9
> 
> 时间：2013-04-10T07:26:00.913
> 
> 标签：linux, shell

我想知道我是否可以通过一个可以为我提供一个编辑器来练习它们的网站在线练习 LINUX 命令和 shell 脚本。而且我知道最简单的做法可能是下载 Linux LIVE CD，然后练习 shell 脚本，但除此之外，我想在任何我想要的任何时间、任何我想要的任何系统上在线练习它们，而无需费心关于从 LIVE CD 启动。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T07:57:37.647

这里有一个很好的：

Javascript PC 模拟器 - [http://bellard.org/jslinux/](http://bellard.org/jslinux/)

* * *

有关的：

*   [Fabrice Bellard 编写的 Javascript 中的 Linux 模拟器如何工作？](https://stackoverflow.com/questions/6030407/how-does-linux-emulator-in-javascript-by-fabrice-bellard-work)
*   [在浏览器中模拟linux终端](https://stackoverflow.com/q/19561188/1983854)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T10:48:47.830

May be www.webminal.org (I'm involved in this project :P)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:44:40.590

有一个站点[linuxzoo](http://linuxzoo.net/)为您提供 linux 环境，但您需要使用模拟器（如 Putty）连接到该网络服务器并执行命令。请浏览该网站，它可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T07:47:49.143

我玩过[http://cb.vu/](http://cb.vu/)有点...很酷

# drupal-7 - 在 drupal 7 中向 ck 编辑器添加 line-height 选项

> ID：15919508
> 
> 赞同：2
> 
> 时间：2013-04-10T07:26:04.373
> 
> 标签：drupal-7, ckeditor

我在drupal中使用ck-editor。所以我只想在上面添加 line-height 选项。我不知道如何在 ck-editor 中添加行高。有没有办法在ck-editor中添加行高。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-25T11:08:27.080

我对我的一个项目也有同样的需求，然后决定通过引用一些现有的插件来创建我自己的。

[这是 ckeditor 的链接： http](http://ckeditor.com/addon/lineheight) ://ckeditor.com/addon/lineheight

# session - 爬取某些链接后网站禁止爬虫

> ID：15919517
> 
> 赞同：0
> 
> 时间：2013-04-10T07:26:36.743
> 
> 标签：session, scrapy, web-crawler

我遇到了scrapy的问题。当我使用scrapy spider访问网站时。20-30 分钟后，网站阻止了我的爬虫。Scrapy 总是返回 500 代码。(DELAY_TIME = 10s)

但是如果我停止scrapy并立即启动它。它可以正常爬行。我认为这个网站阻止一个会话可以查看多个页面？

运行时如何更改scrapy的会话？或者解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:34:31.443

可以有多种方法来解决这种饱和问题。

首先，您应该查看将放置在**`root`**网站上的 robots.txt 文件。确保本网站是否允许刮擦。

`COOKIES_ENABLED=False`仅当网站允许您禁用 cookie 时，他们才会尝试在您的设置中。大多数网站都使用 cookie 跟踪您的活动。

# angularjs - Angular JS - 使用函数重置下拉列表

> ID：15919520
> 
> 赞同：8
> 
> 时间：2013-04-10T07:26:42.250
> 
> 标签：angularjs

我在 Angular 中设置了一个侦听器，以在选择框的选项更改时触发事件。

我还有一个按钮，我想将选择框“重置”为空白（不是选项 1）。

这是一些代码：

HTML：

```
<select id="dropdown" ng-model="orderProp" >
  <option ng-repeat="cats in categories" value="{{cats}}">{{cats}}</option>
</select>
<button id="showHide" ng-click="showAll($event)" >Show all results</button> 
```

Javascript：

```
$scope.showAll = function($event){
    $scope.orderProp ="0";
} 
```

选择框上的监听器功能：

```
 $scope.$watch( 'orderProp', function ( val ) {
        $scope.filteredMarkersProperty = $filter('filter')($scope.markersProperty, val);
        $scope.zoomProperty = 11;
        calcFocus();
    }); 
```

这有点有效，虽然只是有时，我不知道**为什么**它有效（或不有效），因为我认为这是错误的处理方式。我尝试用 jQuery 重置它`.prop('selectedIndex',0);`，但是虽然这会重置索引，但它根本不会触发监听功能，所以这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T09:20:54.160

首先 - 看看选择指令中的 ngOptions：[http ://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select)

```
<select ng-options="cats for cats in categories" ng-model="orderProps"></select>

<button ng-click="orderProps='0'">Show all results</button> 
```

只要“0”不是类别之一，这将起作用。当 orderProps 的值与类别中的任何值都不匹配时，选择框将显示空白。

您的 $watch 函数不是选择框上的侦听器，它监视 orderProps 并且 orderProps 可以在选择框之外进行更改。如果你想在选择框上有一个监听器，你可以添加一个 ng-change="myOnChangeFn()"。

添加了一个工作 plunkr：[http ://plnkr.co/edit/fqWkJBYOXGaYsK9Fnedc?p=preview](http://plnkr.co/edit/fqWkJBYOXGaYsK9Fnedc?p=preview)

# jquery - 使用jquery自动链接页面中的url

> ID：15919522
> 
> 赞同：0
> 
> 时间：2013-04-10T07:26:57.530
> 
> 标签：jquery

我需要自动链接页面中的 URL。

例如

这是一个 html 内容，包含文本 url www.example.com 和链接的 url <a href='www.example.com'> example </a>。后面可能是 http，例如 [http://www.example.com]

我需要结果是这样的：

这是一个 html 内容，包含文本 url [http://www.example.com](http://www.example.com)和链接的 url [http://www.example.com](http://www.example.com)。后面可能是 http，例如[http://www.example.com](http://www.example.com)

我使用了以下函数，但它不适用于以 www 开头的 url。

```
    jQuery.fn.autolink = 函数（） {
        返回 this.each(function() {
            //以 http://、https:// 或 ftp:// 开头的 URL
            var re = /((http|https|ftp):\/\/[\w?=&.\/-;#~%-\{\}$!|]+(?![\w\s? &.\/;#~%"=-]*>))/g;
            $J(this).html($J(this).html().replace(re, '$1'));
        });
    }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:40:37.030

使用此函数并将您的锚标记文本 url 作为 urlname 和 href 作为链接名传递

```
function replaceURLWithHTMLLinks(urlname, linkname) {

if (linkname && !linkname.match(/^http([s]?):\/\/.*/)) {
    linkname = 'http://' + linkname
}
var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
return linkname.replace(exp,"<a href='$1'>"+urlname+"</a>"); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:38:04.027

尝试这样的事情。这将修改 href 属性和超链接的 html。

```
$("a").each(function(k,v){
   this.attr("href","http://"+this.attr("href"));
   this.html("http://www."+this.html()+".com");
}) 
```

# java - 将双精度格式设置为 2 位小数

> ID：15919523
> 
> 赞同：0
> 
> 时间：2013-04-10T07:26:58.753
> 
> 标签：java

我正在尝试将我的双精度值格式化为精确的 2 位小数，它似乎工作正常，这是我正在尝试的代码

```
final NumberFormat df = DecimalFormat.getInstance();
df.setMinimumFractionDigits(2);
df.setMaximumFractionDigits(2);
df.setRoundingMode(RoundingMode.DOWN);
df.format(value) 
```

到现在一切正常，但我需要返回双精度值，因为它正在用于其他计算，我试过了

```
Double.parseDouble(df.format(value)) 
```

像大小数一样

```
BigDecimal price = new BigDecimal(df.format(number)); 
```

但它没有按预期工作，就像`18.50`被转换为`18.5`

虽然这不是计算问题，但我需要在 UI 上显示金额，我必须精确显示最多 2 个小数位。

有没有我可以在 java 类中处理它或者我必须在带有 JSTL 的 JSP 中处理它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:35:23.883

这就是`BigDecimal`为之而生的！

```
BigDecimal number = new BigDecimal(123.456);
// set 2 fraction digits
// Note that setScale() does not change the original, 
// but returns a new BigDecimal.
number = number.setScale(2, RoundingMode.DOWN);
// get string representation
String text = number.toPlainString();
// get double value
double dbl = number.doubleValue(); 
```

如果`BigDecimal`可以的话，也可以用于其他计算。

# java - 使用 java 错误提取 tar.gz

> ID：15919527
> 
> 赞同：0
> 
> 时间：2013-04-10T07:27:07.127
> 
> 标签：java, extract, tar

我正在尝试使用 java 提取存档 .tar.gz，但我收到了我似乎不理解的目录错误。请帮忙。我从[https://forums.oracle.com/forums/thread.jspa?threadID=2065236获得了这个示例代码](https://forums.oracle.com/forums/thread.jspa?threadID=2065236)

```
package untargz;
import java.io.*;
import com.ice.tar.*;
import javax.activation.*;
import java.util.zip.GZIPInputStream;
/**
 *
 * @author stanleymungai
 */
public class Untargz {
public static InputStream getInputStream(String tarFileName) throws Exception{

      if(tarFileName.substring(tarFileName.lastIndexOf(".") + 1, tarFileName.lastIndexOf(".") + 3).equalsIgnoreCase("gz")){
         System.out.println("Creating an GZIPInputStream for the file");
         return new GZIPInputStream(new FileInputStream(new File(tarFileName)));

      }else{
         System.out.println("Creating an InputStream for the file");
         return new FileInputStream(new File(tarFileName));
      }
   }

    private static void untar(InputStream in, String untarDir) throws IOException {

      System.out.println("Reading TarInputStream... ");
      TarInputStream tin = new TarInputStream(in);
      TarEntry tarEntry = tin.getNextEntry();
      if(new File(untarDir).exists()){
          while (tarEntry != null){
             File destPath = new File(untarDir + File.separatorChar + tarEntry.getName());
             System.out.println("Processing " + destPath.getAbsoluteFile());
             if(!tarEntry.isDirectory()){
                FileOutputStream fout = new FileOutputStream(destPath);
                tin.copyEntryContents(fout);
                fout.close();
             }else{
                destPath.mkdir();
             }
             tarEntry = tin.getNextEntry();
          }
          tin.close();
      }else{
         System.out.println("That destination directory doesn't exist! " + untarDir);
      }     
    }   
    private void run(){ 
        try {           
            String strSourceFile = "C:/AskulInstaller/pid.tar.gz";
            String strDest = "C:/AskulInstaller/Extracted Files";
            InputStream in = getInputStream(strSourceFile);
            untar(in, strDest);     

        }catch(Exception e) {

            e.printStackTrace();        
            System.out.println(e.getMessage());
        }
    }   
    public static void main(String[] args) {
       new Untargz().run();
    }
} 
```

一旦我运行这段代码，这就是我的输出；

```
Creating an GZIPInputStream for the file
Reading TarInputStream... 
That destination directory doesn't exist! C:/AskulInstaller/Extracted Files
BUILD SUCCESSFUL (total time: 0 seconds) 
```

当我手动创建目标目录 C:/AskulInstaller/Extracted Files

我得到这个错误输出；

```
Creating an GZIPInputStream for the file
Reading TarInputStream... 
Processing C:\AskulInstaller\Extracted Files\AskulInstaller\pid\Askul Logs\DbLayer_AskulMain_10_Apr_2013_07_44.log
java.io.FileNotFoundException: C:\AskulInstaller\Extracted Files\AskulInstaller\pid\Askul Logs\DbLayer_AskulMain_10_Apr_2013_07_44.log (The system cannot find the path specified)
C:\AskulInstaller\Extracted Files\AskulInstaller\pid\Askul Logs\DbLayer_AskulMain_10_Apr_2013_07_44.log (The system cannot find the path specified)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:165)
    at untargz.Untargz.untar(Untargz.java:37)
    at untargz.Untargz.run(Untargz.java:55)
    at untargz.Untargz.main(Untargz.java:64) 
```

有没有办法我应该放置我的目录以便提取发生或者我的错误到底是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:33:50.953

如果 tar 文件包含文件的条目`foo/bar.txt`但不包含先前的目录条目，`foo/`那么您的代码将尝试在不存在的目录中创建文件。尝试添加

```
destFile.getParentFile().mkdirs(); 
```

就在您创建 FileOutputStream 之前。

或者，如果您不介意您的代码依赖于作为库的 Ant，那么您可以将整个解包过程委托给 Ant 任务，而不是手动完成。像这样的东西（未完全测试）：

```
Project p = new Project();
Untar ut = new Untar();
ut.setProject(p);
ut.setSrc(tarFile);
if(tarFile.getName().endsWith(".gz")) {
  ut.setCompression((UntarCompressionMethod)EnumeratedAttribute.getInstance(UntarCompressionMethod.class, "gzip"));
}
ut.setDest(destDir);

ut.perform(); 
```

# html - src、href 和导入不起作用

> ID：15919533
> 
> 赞同：0
> 
> 时间：2013-04-10T07:27:14.707
> 
> 标签：html, css, web

一个。src - 当我使用“img src”时，图像没有在 Firefox 中加载。在 chrome 和 IE 中加载。

湾。href - 当我尝试从外部添加 css 文件时它不起作用。

我的样式.css

```
h1, h2, h3 {
color: #36C;
font-weight: normal;
letter-spacing: .4em;
margin-bottom: 1em;
text-transform: lowercase;
} 
```

css.htm

```
<head>
<link type="text/css" href="C:\Divakar_Repository\html_learning\mystyle. css">
</head>
<h1>CHEcking the css style</h1> 
```

但它将输出显示为黑色的“检查 css 样式”。实际上输出应该是蓝色的“检查css样式”。

C。进口 - 它不工作。

导入.htm

```
<head>
@import "C:\Divakar_Repository\html_learning\mystyle.c ss";
</head>
<h1> CHEking the css file </h1> 
```

但它返回的输出如下。

@import "C:\Divakar_Repository\html_learning\mystyle.c ss"; 检查css文件

任何帮助将非常感激。

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:51:01.273

谢谢大家。

如果我在样式元素之间有@import，它会起作用。

在我添加属性 rel="stylesheet" 后，链接元素就起作用了。

但我有一些问题。

除了 IE，反斜杠不起作用？因为如果我指向具有 c:\ 之类路径的文件，它在 firefox 和 chrome 中不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:34:29.347

您必须在使用 CSS 的地方使用 @import，而不仅仅是在 head 元素中，并且格式正确。

`style`您可以通过这种方式在元素或css 文件中 @import css 文件：

```
@import url(mystye.css); 
```

您的语法更多的是 Sass/更少相关，而不是 CSS。

还要注意文件名。

此外，在打开`h1`标签之前，您应该先**打开`body`标签**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:34:41.863

引用样式表时使用相对路径：

`<link type="text/css" href="mystyle.css">`

该链接是您链接的文档在目录结构中的相对位置，因此请确保路​​径正确。还要确保在奇怪的地方没有空格。

该`@import`函数仅在样式表中起作用，因此您可以在 .css 文件中使用它或将其包装在`<style>`标签中：

```
<style>
@import url(mystyle.css);
</style> 
```

最后一点，在该`<head>`部分中，它需要有一个`<title>`元素。你不能跳过这个。

# udp - 使用 Pjsip 传输文件

> ID：15919535
> 
> 赞同：1
> 
> 时间：2013-04-10T07:27:21.083
> 
> 标签：udp, file-transfer, pjsip, ice

我想使用 pjsip 在 c 中开发一个程序来进行点对点文件传输。由于 pjsip 使用 ice 并且在 ICE 中使用 UDP，所以我需要处理**数据包传递保证**。

因为我会通过将文件分成几个部分来发送文件，然后它们在接收器端重新组装所有部分，所以我是否必须保持数据包的顺序，或者我可以假设数据包以正确的顺序传递？ ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:08:37.700

使用 UDP，您既不能假设数据包是按顺序传递的，也不能假设它们只传递一次，或者根本就不能传递它们！所以你需要想出一个协议来做很多通常 TCP 会处理的事情。它必须重新组装原始数据流并处理我上面列出的事情。

此外，使用 UDP，您可能会遇到导致拥塞的问题。TCP 可以通过其拥塞避免算法来避免这种情况，使用 UDP，您可以轻松地发送数据包太快，从而导致它们在过载的路由器处丢弃。

所有这些都是要解决的重要问题，因此我建议您阅读该主题。我会从一本关于 TCP 的好书开始。

# github - github api：如何有效地查找存储库的提交次数？

> ID：15919539
> 
> 赞同：16
> 
> 时间：2013-04-10T07:27:31.583
> 
> 标签：github, github-api

我想查找对特定 github 项目以及在其中对特定文件的提交次数。我检查了[github api 文档](http://developer.github.com/v3/repos/)，但只找到了一个用于实际返回所有提交的 API。这将是非常低效的，因为我必须通过所有提交进行多次 api 调用以进行分页。

有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T07:36:30.597

2013 年 5 月更新：请参阅“ [API 中现在提供文件 CRUD 和存储库统计信息](https://github.com/blog/1498-file-crud-and-repository-statistics-now-available-in-the-api)”

您现在可以[获取最后一年的提交活动数据](http://developer.github.com/v3/repos/statistics/#get-the-last-year-of-commit-activity-data)

```
GET /repos/:owner/:repo/stats/commit_activity 
```

> 返回按周分组的最后一年的提交活动。days 数组是每天的一组提交，从星期日开始。

不*完全*是您正在寻找的东西，但更接近。

* * *

原始答案（2010 年 4 月）

不，当前的 API 不支持 ' `log --all`' 用于列出来自所有分支的所有提交。

唯一的替代方法在“ [Github API：检索所有分支的所有提交以进行 repo](https://stackoverflow.com/questions/9179828/github-api-retrieve-all-commits-for-all-branches-for-a-repo) ”中，并列出所有提交的所有页面，一个*分支一个分支*。

这似乎比另一种替代方法实际*克隆*Github 存储库并[在该本地克隆上应用 git 命令](https://stackoverflow.com/questions/677436/how-to-get-the-git-commit-count)更麻烦！
（主要[`git shortlog`](http://git-scm.com/docs/git-shortlog)）

* * *

注意：您还可以签出由[Arcsector创建的](https://stackoverflow.com/users/6284028/arcsector)[python 脚本](https://stackoverflow.com/a/49682970/6309)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-27T00:19:21.170

使用[GraphQL API v4](https://developer.github.com/v4/)，您可以获得每个分支的总提交计数[`totalCount`](https://developer.github.com/v4/reference/object/commithistoryconnection/#commithistoryconnection)：

```
{
  repository(owner: "google", name: "gson") {
    name
    refs(first: 100, refPrefix: "refs/heads/") {
      edges {
        node {
          name
          target {
            ... on Commit {
              id
              history(first: 0) {
                totalCount
              }
            }
          }
        }
      }
    }
  }
} 
```

[在资源管理器中测试它](https://developer.github.com/v4/explorer/?variables=%7B%7D&query=%7B%0A%20%20repository(owner%3A%20%22google%22%2C%20name%3A%20%22gson%22)%20%7B%0A%20%20%20%20name%0A%20%20%20%20refs(first%3A%20100%2C%20refPrefix%3A%20%22refs%2Fheads%2F%22)%20%7B%0A%20%20%20%20%20%20edges%20%7B%0A%20%20%20%20%20%20%20%20node%20%7B%0A%20%20%20%20%20%20%20%20%20%20name%0A%20%20%20%20%20%20%20%20%20%20target%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20...%20on%20Commit%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20id%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20history(first%3A%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20totalCount%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T18:12:11.177

纯JS实现

```
const base_url = 'https://api.github.com';

    function httpGet(theUrl, return_headers) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", theUrl, false); // false for synchronous request
        xmlHttp.send(null);
        if (return_headers) {
            return xmlHttp
        }
        return xmlHttp.responseText;
    }

    function get_all_commits_count(owner, repo, sha) {
        let first_commit = get_first_commit(owner, repo);
        let compare_url = base_url + '/repos/' + owner + '/' + repo + '/compare/' + first_commit + '...' + sha;
        let commit_req = httpGet(compare_url);
        let commit_count = JSON.parse(commit_req)['total_commits'] + 1;
        console.log('Commit Count: ', commit_count);
        return commit_count
    }

    function get_first_commit(owner, repo) {
        let url = base_url + '/repos/' + owner + '/' + repo + '/commits';
        let req = httpGet(url, true);
        let first_commit_hash = '';
        if (req.getResponseHeader('Link')) {
            let page_url = req.getResponseHeader('Link').split(',')[1].split(';')[0].split('<')[1].split('>')[0];
            let req_last_commit = httpGet(page_url);
            let first_commit = JSON.parse(req_last_commit);
            first_commit_hash = first_commit[first_commit.length - 1]['sha']
        } else {
            let first_commit = JSON.parse(req.responseText);
            first_commit_hash = first_commit[first_commit.length - 1]['sha'];
        }
        return first_commit_hash;
    }

    let owner = 'getredash';
    let repo = 'redash';
    let sha = 'master';
    get_all_commits_count(owner, repo, sha); 
```

学分 - [https://gist.github.com/yershalom/a7c08f9441d1aadb13777bce4c7cdc3b](https://gist.github.com/yershalom/a7c08f9441d1aadb13777bce4c7cdc3b)

# javascript - jquery .change 函数使 IE 中的脚本崩溃

> ID：15919544
> 
> 赞同：0
> 
> 时间：2013-04-10T07:27:53.033
> 
> 标签：javascript, jquery, html, internet-explorer, onchange

嗨，我正在研究 jquery`.change`函数。

**javascript代码：**

```
 $(document).ready(function () {

    $("#user").change(function()
    {
       var v=$('#user').val();
       var i=0;
       var id1="";
       while(v[i]!="|")
       {
          parseInt(v[i]);
          id1=(id1)+v[i];
          i++;
       }
      $("#dummy").attr("href", "create_graph/demo_graph.php?id="+id1);
      $("#dummy").attr("target",'content1');
  }); 
```

**HTML 代码：**

```
User Name:
<TD>
    <SELECT NAME='user' id='user'>
        <OPTION value=''></OPTION>{USER}
    </SELECT>
</TD> 
```

它在 Mozilla 和 Chrome 中运行良好，但弹出框说

```
"Stop running this script? 
A script on this page is causing your web browser to run slowly. If it continues to run, your          
computer might become unresponsive. " 
```

即使我说“不”，它也会一次又一次地给出这个弹出框

当我删除上面的 javascript 时，它不会给出任何弹出窗口......

请帮帮我。我将根据需要提供所需的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:34:39.750

`v[i]!="|"``v`如果不包含将始终为真`|`，因此它将是一个无限循环。

你只想得到之前的部分`|`，所以你可以使用以下`split`方法：

```
$("#user").change(function() {
    var id = $(this).val().split('|')[0];
    $("#dummy").attr("href", "create_graph/demo_graph.php?id="+id);
    $("#dummy").attr("target",'content1');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:33:57.313

好像你的

```
while(v[i]!="|") 
```

可能会永远运行。显式添加终止条件。

# google-app-engine - Google appengine id 出现问题

> ID：15919547
> 
> 赞同：1
> 
> 时间：2013-04-10T07:27:58.727
> 
> 标签：google-app-engine, eclipse-plugin

我在本地主机本地成功启动了一个应用程序

当我部署到 appengine 时出现错误。

com.google.appengine.tools.admin.HttpIoException：发布到 URL 时出错：[https](https://appengine.google.com/api/appversion/create?app_id=my_id&version=1&) ://appengine.google.com/api/appversion/create?app_id=my_id&version=1& 404 Not Found 此应用程序不存在（app_id=u '我的身份'）。

由于某种原因，错误中给出的 ID 开头有 u 和一个空格

我仔细检查了该应用程序是否存在并成功从另一台计算机上传了该应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:38:07.310

我能找到的所有解决方案（如“[此应用程序不存在`(app_id=xxx)`](https://stackoverflow.com/questions/7039200/this-application-does-not-exist-app-id-xxx)”或“ [GAE - 部署错误：“<code>AttributeError: can't set attribute”</a>”）都提到`appcfg.py`使用`--no_cookies`](https://stackoverflow.com/a/12750238/6309)

 [```
 C:\Program Files (x86)\Google\google_appengine\appcfg.py

 appcfg.py --no_cookies update my-app-folder\
 # or (2-steps verificatio enabled)
 appcfg.py --oauth2 --no_cookies update my-app-folder\ 
```](https://stackoverflow.com/a/12750238/6309) 

[如果项目包含 Java7 类，则需要添加`--use_java7`选项，如问题“](https://stackoverflow.com/a/12750238/6309) [Failed to deploy to Google App Engine because `--use_java7`flag has not been set](https://stackoverflow.com/a/13849112/6309) ”所示。

* * *

虽然您可以从 GAE 安装路径运行 appcfg，但页面“ [Using the Google Plugin for Eclipse](https://developers.google.com/appengine/docs/java/tools/eclipse) ”提到（在页面底部）：

> App Engine Java SDK 工具的某些功能只能通过直接从命令行运行工具来使用。如果您使用 Eclipse 安装了 SDK，则可以从 Eclipse 插件安装目录运行这些工具。
> 
> SDK 位于 Eclipse 安装目录下`plugins/com.google.appengine.eclipse.sdkbundle_VERSION/`，其中`VERSION`是 SDK 的版本标识符。
> 在此目录中是**`appengine-java-sdk/bin/`**包含工具的子目录。

# performance - Matlab中的内存和执行速度

> ID：15919553
> 
> 赞同：2
> 
> 时间：2013-04-10T07:28:24.243
> 
> 标签：performance, matlab, memory-management

我正在尝试创建随机线条并选择其中一些，这非常罕见。我的代码相当简单，但要获得我可以使用的东西，我需要创建非常大的向量（即：<100000000 x 1，在我的代码中跟踪变量）。有什么方法可以创建更大的向量并减少所有这些计算所需的时间？

我的代码是

```
%Initial line values

tracks=input('Give me the number of muon tracks: ');
width=1e-4;
height=2e-4;

Ystart=15.*ones(tracks,1);
Xstart=-40+80.*rand(tracks,1);
%Xend=-40+80.*rand(tracks,1);
Xend=laprnd(tracks,1,Xstart,15);
X=[Xstart';Xend'];
Y=[Ystart';zeros(1,tracks)];
b=(Ystart.*Xend)./(Xend-Xstart);
hot=0;
cold=0;

for i=1:tracks
    if ((Xend(i,1)<width/2 && Xend(i,1)>-width/2)||(b(i,1)<height && b(i,1)>0))
        plot(X(:, i),Y(:, i),'r');%the chosen ones!
        hold all
        hot=hot+1;
    else
        %plot(X(:, i),Y(:, i),'b');%the rest of them
        %hold all
        cold=cold+1;
    end
end 
```

我也在使用并调用一个拉普拉斯分布生成器制作了我的 Elvis Chen，可以在[这里找到](http://www.mathworks.com/matlabcentral/fileexchange/13705-laplacian-random-number-generator)

```
function y  = laprnd(m, n, mu, sigma)
%LAPRND generate i.i.d. laplacian random number drawn from laplacian distribution
%   with mean mu and standard deviation sigma. 
%   mu      : mean
%   sigma   : standard deviation
%   [m, n]  : the dimension of y.
%   Default mu = 0, sigma = 1\. 
%   For more information, refer to
%   http://en.wikipedia.org./wiki/Laplace_distribution

%   Author  : Elvis Chen (bee33@sjtu.edu.cn)
%   Date    : 01/19/07

%Check inputs
if nargin < 2
    error('At least two inputs are required');
end

if nargin == 2
    mu = 0; sigma = 1;
end

if nargin == 3
    sigma = 1;
end

% Generate Laplacian noise
u = rand(m, n)-0.5;
b = sigma / sqrt(2);
y = mu - b * sign(u).* log(1- 2* abs(u)); 
```

结果图是

![](https://i.imgur.com/kioNSKB.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T10:02:38.640

正如您所指出的，您的问题有两个方面。一方面，你有记忆问题，因为你需要做很多试验。另一方面，您有性能问题，因为您必须*处理*所有这些试验。

每个问题的解决方案通常会对另一个问题产生负面影响。恕我直言，最好的方法是找到妥协。

只有摆脱矢量化所需的那些*庞大的数组，并使用不同的策略来执行循环，才能进行更多试验。*我将优先考虑使用更多试验的可能性，可能以最佳性能为代价。

[当我在Matlab profiler](http://www.mathworks.nl/help/matlab/ref/profile.html)中按原样执行您的代码时，它立即显示所有变量的初始内存分配需要大量时间。它还表明`plot`and`hold all`命令是它们中最耗时的行。更多的反复试验表明，在错误开始出现`trials`之前，您可以做的最大值非常低，令人失望。`OUT OF MEMORY`

如果你知道一些关于它在 Matlab 中的局限性的事情，那么循环可以极大地加速。在旧版本的 Matlab 中，应该完全避免循环以支持“矢量化”代码，这是事实。在最近的版本中（我相信是 R2008a 及更高版本），Mathworks 引入了一种称为 JIT 加速器（即时编译器）的技术，它在执行过程中将 M 代码即时翻译成*机器*语言。简单地说，JIT 加速器可以让你的代码绕过 Matlab 的解释器，更直接地与底层硬件对话，从而节省**大量**时间。

*您会听到很多关于在 Matlab 中应避免循环的建议，但通常*不再是正确的。尽管矢量化仍然有其价值，但仅使用矢量化代码实现的任何相当复杂的过程通常都难以辨认、难以理解、难以更改和难以维护。使用循环的相同过程的实现通常没有这些缺点，而且它通常会*更快*并且需要*更少的内存*。

不幸的是，JIT 加速器有一些令人讨厌的（恕我直言，*不必要*的）限制，您必须了解这些限制。

其中一件事是`plot`；让循环除了收集和操作数据之外*什么都不*做，并将任何绘图命令等延迟到循环*之后*，通常是一个更好的主意。

另一个这样的事情是`hold`；该`hold`函数*不是*Matlab内置函数，意思是，它是用M语言实现的。Matlab 的 JIT 加速器在循环中使用时无法加速非内置函数，这意味着您的整个循环将以 Matlab 的解释速度运行，而不是机器语言的速度！因此，也将此命令延迟到循环*之后:)*

现在，如果您想知道，这最后一步可能会产生***巨大***的影响——我知道有一种情况，将函数体复制粘贴到上层循环中会导致性能提高 1200 倍。*执行*时间已减少到*几分钟*！）。

实际上，您的循环中还有另一个*小*问题（它非常小，而且相当不方便，我会立即同意） - 循环变量的名称不应该是`i`. 名称`i`是Matlab中虚数单位的名称，名称解析也会在每次迭代中不必要地消耗时间。它很小，但不容忽视。

现在，考虑到这一切，我得出了以下实现：

```
function [hot, cold, h] = MuonTracks(tracks)

    % NOTE: no variables larger than 1x1 are initialized

    width  = 1e-4;
    height = 2e-4;

    % constant used for Laplacian noise distribution  
    bL = 15 / sqrt(2);

    % Loop through all tracks
    X = [];
    hot = 0;  
    ii = 0;          
    while ii <= tracks

        ii = ii + 1;

        % Note that I've inlined (== copy-pasted) the original laprnd()
        % function call. This was necessary to work around limitations 
        % in loops in Matlab, and prevent the nececessity of those HUGE 
        % variables. 
        %
        % Of course, you can still easily generalize all of this: 

        % the new data
        u = rand-0.5;

        Ystart = 15; 
        Xstart = 800*rand-400;
        Xend   = Xstart - bL*sign(u)*log(1-2*abs(u));

        b = (Ystart*Xend)/(Xend-Xstart);

        % the test
        if ((b < height && b > 0)) ||...
            (Xend < width/2 && Xend > -width/2)

            hot = hot+1;

            % growing an array is perfectly fine when the chances of it
            % happening are so slim
            X = [X [Xstart; Xend]]; %#ok

        end
    end

    % This is trivial to do here, and prevents an 'else' in the loop
    cold = tracks - hot;

    % Now plot the chosen ones
    h = figure;
    hold all
    Y = repmat([15;0], 1, size(X,2));
    plot(X, Y, 'r'); 

end 
```

有了这个实现，我可以这样做：

```
>> tic, MuonTracks(1e8); toc
Elapsed time is 24.738725 seconds. 
```

内存占用完全可以忽略不计。

分析器现在还显示了代码中工作量的均匀分布；没有因为内存使用或性能而真正脱颖而出的行。

这可能不是最快的实现（如果有人看到明显的改进，请随时编辑它们）。但是，如果您愿意等待，您将能够做到`MuonTracks(1e23)`（或更高:)

我还在 C 中做了一个实现，可以编译成 Matlab MEX 文件：

```
/* DoMuonCounting.c */

#include <math.h>
#include <matrix.h>
#include <mex.h>
#include <time.h>
#include <stdlib.h>

void CountMuons(
    unsigned long long tracks,
    unsigned long long *hot, unsigned long long *cold, double *Xout);

/* simple little helper functions */
double sign(double x) { return (x>0)-(x<0); }
double rand_double()  { return (double)rand()/(double)RAND_MAX; }

/* the gateway function */
void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
    int
        dims[] = {1,1};

    const mxArray
        /* Output arguments */
        *hot_out  = plhs[0] = mxCreateNumericArray(2,dims, mxUINT64_CLASS,0),
        *cold_out = plhs[1] = mxCreateNumericArray(2,dims, mxUINT64_CLASS,0),
        *X_out    = plhs[2] = mxCreateDoubleMatrix(2,10000, mxREAL);

    const unsigned long long
        tracks = (const unsigned long long)mxGetPr(prhs[0])[0];

    unsigned long long
        *hot  = (unsigned long long*)mxGetPr(hot_out),
        *cold = (unsigned long long*)mxGetPr(cold_out);
    double
        *Xout = mxGetPr(X_out);

    /* call the actual function, and return */
    CountMuons(tracks, hot,cold, Xout);
}

// The actual muon counting
void CountMuons(
    unsigned long long tracks,
    unsigned long long *hot, unsigned long long *cold, double *Xout)
{
    const double
        width  = 1.0e-4,
        height = 2.0e-4,
        bL     = 15.0/sqrt(2.0),
        Ystart = 15.0;

    double
        Xstart,
        Xend,
        u,
        b;
    unsigned long long
        i = 0ul;

    *hot  = 0ul;
    *cold = tracks;

    /* seed the RNG */
    srand((unsigned)time(NULL));

    /* aaaand start! */
    while (i++ < tracks)
    {
        u = rand_double() - 0.5;

        Xstart = 800.0*rand_double() - 400.0;
        Xend   = Xstart - bL*sign(u)*log(1.0-2.0*fabs(u));

        b = (Ystart*Xend)/(Xend-Xstart);

        if ((b < height && b > 0.0) || (Xend < width/2.0 && Xend > -width/2.0))
        {
            Xout[0 + *hot*2] = Xstart;
            Xout[1 + *hot*2] = Xend;
            ++(*hot);
            --(*cold);
        }
    }
} 
```

在 Matlab 中编译

```
mex DoMuonCounting.c 
```

（*在*运行之后`mex setup`:)，然后将它与一个小的 M-wrapper 结合使用，如下所示：

```
function [hot,cold, h] = MuonTrack2(tracks)

    % call the MEX function 
    [hot,cold, Xtmp] = DoMuonCounting(tracks);

    % process outputs, and generate plots

    hot = uint32(hot); % circumvents limitations in 32-bit matlab

    X = Xtmp(:,1:hot);
    clear Xtmp

    h = NaN;
    if ~isempty(X)
        h = figure;
        hold all         
        Y = repmat([15;0], 1, hot);
        plot(X, Y, 'r');       
    end    
end 
```

这让我可以做

```
>> tic, MuonTrack2(1e8); toc
Elapsed time is 14.496355 seconds. 
```

请注意，MEX 版本的内存占用略大，但我认为这没什么好担心的。

我看到的唯一缺陷是固定的最大 Muon 计数（硬编码为 10000 作为初始数组大小`Xout`；需要，因为标准 C 中没有动态增长的数组）......如果你担心这个限制可能是坏了，只需增加它，将其更改为等于 的一小部分`tracks`，或者做一些更聪明（但更痛苦）的动态数组增长技巧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:04:17.300

在 Matlab 中，向量化有时比使用`for`循环更快。例如，这个表达式：

```
(Xend(i,1) < width/2 && Xend(i,1) > -width/2) || (b(i,1) < height && b(i,1) > 0) 
```

它是为 的每个值定义的`i`，可以像这样以矢量化方式重写：

```
isChosen = (Xend(:,1) < width/2 & Xend(:,1) > -width/2) | (b(:,1) < height & b(:,1)>0) 
```

像这样的表达式`Xend(:,1)`会给你一个列向量，所以`Xend(:,1) < width/2`会给你一个布尔值的列向量。请注意，我使用`&`了而不是`&&`- 这是因为`&`执行*逐元素*逻辑与，不像`&&`它只适用于标量值。通过这种方式，您可以构建整个表达式，以便该变量包含一个布尔值的列向量，一个用于/向量`isChosen`的每一行。`Xend``b`

获取计数现在就像这样简单：

```
hot = sum(isChosen); 
```

因为`true`由 表示`1`。和：

```
cold = sum(~isChosen); 
```

最后，您可以通过使用布尔向量选择行来获取数据点：

```
plot(X(:, isChosen),Y(:, isChosen),'r');    % Plot chosen values
hold all;
plot(X(:, ~isChosen),Y(:, ~isChosen),'b');  % Plot unchosen values 
```

**编辑：**代码应如下所示：

```
isChosen = (Xend(:,1) < width/2 & Xend(:,1) > -width/2) | (b(:,1) < height & b(:,1)>0);
hot = sum(isChosen);
cold = sum(~isChosen);
plot(X(:, isChosen),Y(:, isChosen),'r');    % Plot chosen values 
```

# ruby-on-rails - GitLab 5.0 在创建新项目后在项目设置页面上产生错误 500

> ID：15919556
> 
> 赞同：3
> 
> 时间：2013-04-10T07:28:35.397
> 
> 标签：ruby-on-rails, gitlab

上周我更新到 GitLab 5.0。尝试编辑它们时，所有以前的现有项目都可以正常工作。

今天我创建了一个新的，一切似乎也运行良好。然后我想在我的项目中添加一个成员并检查设置页面，我得到的一切都是内部服务器错误（500）。

我发现的唯一日志在 production.log 中：

```
Completed 500 Internal Server Error in 95ms

ActionView::Template::Error (undefined method `heads' for nil:NilClass):
    36:                   .input
    37:                     = f.text_area :description, placeholder: "awesome project", class: "span5", rows: 3, maxlength: 250
    38: 
    39:                 - unless @repository.heads.empty?
    40:                   .clearfix
    41:                     = f.label :default_branch, "Default Branch"
    42:                     .input= f.select(:default_branch, @repository.heads.map(&:name), {}, style: "width:210px;")
  app/views/projects/_form.html.haml:39:in `block in _app_views_projects__form_html_haml__2678582515483350008_62614560'
  app/views/projects/_form.html.haml:17:in `_app_views_projects__form_html_haml__2678582515483350008_62614560'
  app/views/projects/edit.html.haml:6:in `_app_views_projects_edit_html_haml___3552883863573912945_62197460' 
```

但是，这是什么意思？

我已经尝试重新创建项目，但这会导致同样的错误。我的 Gitlab 安装是默认安装，除了我使用 Apache Proxy 而不是 nginx 的独角兽。

*更新：* 与此同时，我发现没有创建回购。澄清了错误消息，但为什么没有创建存储库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:45:23.297

一个月前最近有一个[类似的错误。](https://github.com/gitlabhq/gitlabhq/issues/3155)

> 抱歉，我认为 sidekiq 已关闭...我已重新启动 gitlab 和 nginx -> 现在它可以工作了。

所以：

*   检查你的 sidekiq 是否启动
*   如果您有最新版本的 GitLab，请检查您的[GitLab`init.d`](https://github.com/gitlabhq/gitlab-recipes/tree/master/init.d)脚本（[最近更改`unicorn`为`puma`](https://github.com/gitlabhq/gitlab-recipes/commit/33433b655fd4de92ada68db41dbb6dd29de68160)）

* * *

在这种情况下，sidekiq 已关闭，但需要完全重新启动服务器本身才能使项目的设置页面再次可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:01:28.890

我们遇到了权限错误的类似问题。

您应该检查 /home/git/repositories 的权限。也许 git 进程不允许在那里创建文件夹/文件。

# postgresql - 允许某些角色更新列，如果它为空，则允许其他一些角色

> ID：15919562
> 
> 赞同：2
> 
> 时间：2013-04-10T07:28:49.497
> 
> 标签：postgresql, database-design, triggers, privileges, postgresql-9.2

我在表中有一个列`A`（类型`int`），在插入其他值时，该列的数据不可用。我不想拆分表格，因为没有其他真正的理由这样做。我正在数据库级别实现权限分离。

只有某些用户（属于 A 类）才能随时修改`column A`。但是其他用户（在 B 类中，不一定与 A 类互斥）应该能够更新列，如果它的值尚未设置，即。如果是`NULL`。
我正在使用 PostgreSQL 9.2.4。

我怎样才能做到这一点？触发器？规则？还有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:47:06.853

> 只有某些用户应该能够修改 A 列
> ……
> 如果……它为 NULL，其他用户应该能够更新该列。

撤销`UPDATE`（和`DELETE`？！？）`public`不应该拥有特权的其他所有人。

```
REVOKE UPDATE ON TABLE tbl FROM public;
REVOKE UPDATE ON TABLE tbl FROM ... 
```

`some_users`创建一个允许更新的（组）角色（仅此`col_a`而已）：

```
CREATE ROLE some_users;
GRANT SELECT, UPDATE (col_a) ON TABLE tbl TO some_users; 
```

为什么`SELECT`？[手册`GRANT`](https://www.postgresql.org/docs/current/sql-grant.html)：

> 实际上，任何重要的`UPDATE`命令也需要`SELECT` 特权，因为它必须引用表列来确定要更新哪些行，和/或计算列的新值。

这样，您就可以在*一个点*上为该列分配权限。
创建另一个（组）角色`certain_users`，可以做任何事情`some_users`（加上更多）：

```
CREATE ROLE certain_users;
GRANT some_users TO certain_users; 
```

根据需要将这些角色的成员资格授予用户角色：

```
GRANT some_users TO lowly_user;
GRANT certain_users TO chief_user; 
```

创建一个条件触发器，类似于[@Daniel 提供](https://stackoverflow.com/a/15921276/939860)的，但使用另一个条件[`pg_has_role()`](https://www.postgresql.org/docs/current/functions-info.html#FUNCTIONS-INFO-ACCESS-TABLE)：

```
CREATE TRIGGER tbl_value_trigger
BEFORE UPDATE ON tbl
FOR EACH ROW
WHEN (OLD.col_a IS NOT NULL AND NOT pg_has_role('some_users', 'member'))
EXECUTE PROCEDURE always_fail(); 
```

使用触发功能：

```
CREATE FUNCTION always_fail()
  RETURNS trigger
  LANGUAGE plpgsql AS
$func$
BEGIN
   -- To fail with exception, rolling back the whole transaction
   -- use this instead:
   -- RAISE EXCEPTION 'value is not null';

   -- Do nothing instead, letting the rest of the transaction commit.
   -- Requires BEFORE trigger.
   RAISE WARNING 'col_a IS NOT NULL. User % is too ambitious!', current_user;
   RETURN NULL;  -- effectively aborts UPDATE
END
$func$; 
```

### 现在：

*   公众无法完全更新表格。
*   `some_users`并被`certain_users`允许更新列`col_a`（仅此而已），
*   只改变从`certain_users`经过一次`col_a is NOT NULL`。

**请注意**，**超级用户**自动成为任何组的成员。因此，表单`NOT pg_has_role(...)` *启用*超级用户，而反向逻辑可能会禁止超级用户更新列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T07:31:37.103

更新触发器应该可以工作。它需要检查旧值，如果不是，则中止更新`NULL`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T08:55:30.520

例子：

```
-- setup
CREATE TABLE tbl (tbl_id serial PRIMARY KEY, value int);

-- trigger function that always fails
CREATE FUNCTION always_fail() RETURNS trigger as $$ begin raise exception 'value is not null'; end; $$ LANGUAGE plpgsql;
-- create the trigger
CREATE TRIGGER tbl_value_trigger BEFORE UPDATE ON tbl FOR EACH ROW WHEN (old.value is not null) EXECUTE PROCEDURE always_fail();

-- test it
INSERT INTO tbl(value) VALUES (NULL);
INSERT INTO tbl(value) VALUES (NULL);
UPDATE tbl SET value=2 WHERE tbl_id=1;
UPDATE tbl SET value=3 WHERE tbl_id=1; -- fails
UPDATE tbl SET value=2 WHERE tbl_id=2;
UPDATE tbl SET value=3 WHERE tbl_id=2; -- fails

-- cleanup
DROP TABLE tbl; 
DROP FUNCTION always_fail(); 
```

笔记：

*   我必须创建一个触发函数（`CREATE FUNCTION`），因为`CREATE TRIGGER`需要一个触发函数并且不接受普通函数，所以`CREATE TRIGGER ... EXECUTE PROCEDURE raise exception 'value not null'`无法使用
*   在每次更新之前评估触发器，即
    *   不检查 INSERTS，因此您可以插入 NULL
    *   检查发生在更新之前，因此可以中止
*   我必须使用`FOR EACH ROW`，否则我将无法检查`OLD.value`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:22:18.910

要向某些用户授予无条件更新权限，使他们成为具有该权限的角色的成员。

```
create role the_role;
grant update on table t to the_role;
grant the_role to the_user; 
```

现在，此更新查询仅在当前用户是成员`the_role`或值为 null 时才有效：

```
update t
set A = 1
where
    id = 1
    and (
        A is null
        or
        pg_has_role('the_role', 'usage')
    ) 
```

[访问权限功能](http://www.postgresql.org/docs/current/interactive/functions-info.html#FUNCTIONS-INFO-ACCESS-TABLE)

[数据库角色](http://www.postgresql.org/docs/9.2/interactive/user-manag.html)

# python - 将保存菜单项添加到我的 GUI 时遇到问题

> ID：15919565
> 
> 赞同：0
> 
> 时间：2013-04-10T07:29:01.980
> 
> 标签：python, user-interface, menu, wxpython, pythoncard

我使用 PythonCard 制作我的 GUI，我目前唯一的菜单项是保存和退出。退出功能齐全并关闭程序；但是当我点击保存时没有任何反应。我只能假设命令是错误的。我做了一些彻底的搜索，但什么也没找到。我使用的命令是“保存”。显然这是不正确的。谁能告诉我我需要使用什么命令？

[资源文件](http://www.mediafire.com/view/?dghhl9w490babaw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:18:36.640

这里真的没有足够的信息。您需要将 EVT_MENU 绑定到保存菜单项的事件处理程序。然后在事件处理程序中，您必须定义“保存”行为是什么。例如，它是保存到数据库、文件还是什么？一旦你弄清楚了，你把它放在你的处理程序中并执行它或者让处理程序启动一个线程。

编辑：如果要保存文件，请参阅 wx.FileDialog 并将样式标志设置为 wx.SAVE。像这样的东西应该工作：

```
def onSaveFile(self, event):
    """
    Create and show the Save FileDialog
    """
    wildcard = "Text (*.txt)|*.txt|" \
            "All files (*.*)|*.*"
    dlg = wx.FileDialog(
        self, message="Save file as ...", 
        defaultDir=self.currentDirectory, 
        defaultFile="", wildcard=wildcard, style=wx.SAVE
        )
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        print "You chose the following filename: %s" % path
    dlg.Destroy() 
```

另请参阅 wxPython 演示，或[此](http://www.blog.pythonlibrary.org/2010/06/26/the-dialogs-of-wxpython-part-1-of-2/)或[文档](http://www.wxpython.org/docs/api/wx.FileDialog-class.html)

# java - 创建一个可执行 jar 执行带有嵌入式码头的战争文件

> ID：15919568
> 
> 赞同：2
> 
> 时间：2013-04-10T07:29:19.570
> 
> 标签：java, jsp, jersey, jetty

我是码头新手。我需要制作一个嵌入码头以及战争文件的可执行jar。双击这个jar，服务器应该启动并部署我的项目war文件。这是我编写的代码。我没有使用maven。

```
public class TestJetty {

        public static void main(String[] args) throws Exception {
            int port = 9008;

            Server server = new Server(port);
            final String WEBAPPDIR = "war/SampleApp.war";
            final URL warUrl = TestJetty.class.getClassLoader().getResource(WEBAPPDIR);
                System.out.println(warUrl.toExternalForm());
                WebAppContext webapp = new WebAppContext(warUrl.toExternalForm(),"/SampleApp"); 
            server.setHandler(webapp);
            server.start();
            server.join();
        }
} 
```

在托管项目中，我创建了一个文件夹战争并放置了 SampleApp。当我从 eclipse 执行这个文件时它可以工作。SampleApp 在从 eclipse 部署时执行（作为 java 应用程序运行）。但是当我将它作为可执行 jar （我从 eclipse 导出它）时，同样的方法不起作用。事实上，当我执行可执行 jar 时，会发生以下情况。
1\. 服务器启动。
2\. 指定路径后，路径将以超链接的形式显示。单击此链接后，war 文件将下载到我的本地系统中。
**我正在使用以下罐子。**
servlet-api-3.0.jar
jetty-jsp-2.1-7.5.4.v20111024.jar
jsp-api-2.1-6.1.5.jar
jetty-util-6.1.26.jar
com.sun.el-2.2.0。 v.201108011116.jar
org.eclipse.jdt.core-3.7.1.jar
jsp-2.1-6.1.5.jar
jetty-all-8.1.9v20130131.jar

请帮助我如何解决这个问题。我需要从可执行 jar 中执行我的 war 文件。

# flexigrid - flexigrid Ajax 过滤器使用 flexOptions

> ID：15919572
> 
> 赞同：0
> 
> 时间：2013-04-10T07:29:34.010
> 
> 标签：flexigrid

我在flexigrid中有一个页面数据加载，加载后有几个过滤器，onchange过滤器我尝试像这样重新加载网格

`var data = {name: 'fltr_county', value: $("#fltr_county").val(), name: 'county_ene', value:$("#county_ene").val()}`

`$('.flexme').flexOptions({params: [ data ]}).flexReload();`

但只有 'page=1&rp=25&sortname=Borrower&sortorder=asc&query=&qtype=&county_ene=equal' 发布数组。只有最后一个参数值得到了。

我如何在发布数组中传递更多过滤器？请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T11:37:14.373

我是 Flexigrid 的新手.. 但面临同样的情况并使用了此代码.. 它对我有用.. 我希望您的问题可以得到解决..

```
var query = $("#fltr_county").val();

var data = {"groupOp":"all","rules":[{"field":"fltr_county","op":"ew", "data": '"'+query+'"'}]};
$('#flex2').flexOptions({
    filters : data,
    qtype : "admin_client_contract_id",
    query : query,
    }).flexReload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T11:12:43.550

根据我的说法，在数据中，您没有按照 json 的语法传递参数

尝试这样的事情

var data = {name: 'fltr_county', value: $("#fltr_county").val()},{ name: 'county_ene',value:$("#county_ene").val()}

我希望这个能帮上忙

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T13:03:55.500

这对我有用：

```
$('#useTimeRange').change(function() {
if( this.checked ) {    //limit events to timestamp range
    //alert("Checked " + startTime + " " + endTime);
    var data = {name: 'startTime', value: $("#startTime").val()};
    var data2= {name: 'endTime',  value:$("#endTime").val()};
    $('.flex5').flexOptions({params: [ data, data2 ]}).flexReload();        
} 
```

这是我的用户界面和萤火虫：

![flexigrid 额外参数](https://i.stack.imgur.com/hzaSi.png)

# java - 包含项目的数组中的空指针异常

> ID：15919574
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:29:39.683
> 
> 标签：java, arrays, string, nullpointerexception

我对我在这里做错了什么感到有点困惑。我有一个 for each 循环，它通过每个`String[]`循环`List<String[]>`：

```
 try {
           List<String[]> lines;
           //Code that fills lines
           for (String[] line : lines){
               System.out.println(line[0] + " "  + line[1] + " " + line[2]);                       
               data.write(line[0], line[1], line[2]);
            }
            //More Code
         } catch (Exception e){ //TODO: DEBUG
            System.err.println(e.getMessage());
         } 
```

我已经验证了 line 中的每个项目确实存在，但我仍然得到一个`NullPointerException`at line `data.write(line[0], line[1], line[2]);`。

我很困惑，因为`System.err.println(e.getMessage());`只是打印`null`并将`System.out.println(line[0] + " " + line[1] + " " + line[2]);`打印正确的数据

例外是在那一行，所以我不认为它是`write()`方法（如果我尝试进入它，调试器将无法写入）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:33:08.060

最可能的解释`data`是`null`：

```
 data.write(line[0], line[1], line[2]);
           ^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:40:53.337

NPE 在：

```
data.write(line[0], line[1], line[2]); 
```

必须在`data`、或中`line[0]`，使用按合同设计或断言来确保值在访问它们之前就在那里。`line[1]``line[2]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:42:16.887

试试下面的代码

```
try {
   List<String[]> lines;
   //Code that fills lines
   for (String[] line : lines){
       boolean isWrite = true;
       for(int i=0; line != null && i < line.length;i++)
       {
            if(line[i] == null){
                isWrite = false;
                break;
             }
       }
       if(isWrite && data != null){
            System.out.println(line[0] + " "  + line[1] + " " + line[2]);                                      
            data.write(line[0], line[1], line[2]);
        }
    }
    //More Code
 } catch (Exception e){ //TODO: DEBUG
    System.err.println(e.getMessage());
 } 
```

上面的代码根据您的代码检查所有可能的 null

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T07:36:20.683

在一次迭代中，数据为空或 line[i] 为空。

# c# - 每个线程存储数据

> ID：15919577
> 
> 赞同：0
> 
> 时间：2013-04-10T07:30:02.827
> 
> 标签：c#, .net, multithreading, task-parallel-library, task

## 博览会

我需要对大量数据进行一些处理。我可以用表格来表示我的计算，`result[i] = F(SomeSubsetOf(input))`因此并行进行所有这些计算真的很容易。问题是我为一些操作使用了一个小临时缓冲区，我不想为每个计算分配一个，我只想在每个线程的基础上分配它们。

## 实际问题

我如何将变量定义为仅每个线程唯一。例如：

```
int Calculate(byte[] buffer, int resultIndex)
{
    byte temp = new byte[8];

    CopyStuff(buffer, resultIndex -4 , temp, 8) // please dont be pendatic about this line

    DoSomeStuff(temp)l

    return GetAverage(temp);
} 
```

现在我打算使用`Parallel.For`并且`temp`必须仅对每个执行线程都是唯一的，并且显然可以为同一线程执行的每个计算回收。实现这一目标的最简单和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:34:26.170

您可以声明`temp`为一个属性，包裹在 中`ThreadLocal`，然后通过该`Value`属性访问它的值。

另请参阅[MSDN](http://msdn.microsoft.com/en-us/library/dd642243.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:19:30.120

我在这里使用了第三个参数：http: [//msdn.microsoft.com/en-us/library/dd783299.aspx](http://msdn.microsoft.com/en-us/library/dd783299.aspx)

它为执行迭代的每个任务初始化本地数据。

# php - php exec openoffice 宏 windows 7

> ID：15919580
> 
> 赞同：0
> 
> 时间：2013-04-10T07:30:09.593
> 
> 标签：php, windows, shell, command-line, macros

我在从 php 执行命令时遇到问题。该代码直接在 Windows 上使用命令行可以正常工作。我还可以使用 php 执行测试命令来创建一个简单的空文本文件，但是当我尝试执行我的宏时没有任何反应。我也将代码放入一个bat文件并尝试执行bat文件和同样的事情，什么也没发生。我在错误日志或屏幕输出中没有收到任何错误。我正在使用 WAMP 安装。

我还尝试以管理员身份运行 wamp 并为所有用户设置对 soffice.exe 的完全访问权限。

有关如何解决此问题的任何想法？

谢谢你的时间。

```
shell_exec('"C:/Program Files (x86)/OpenOffice.org 3/program/soffice.exe" -invisible -headless -norestore macro:///Standard.doc2html.SaveAsHTML("{MYPATH}/MYDOC.doc")'); 
```

{MYPATH}/MYDOC 是真实路径的缩写，该路径是正确的，因为它可以在直接命令行中正常工作。

这是在 php 中工作的测试代码

```
shell_exec('cd. > "{MYPATH}/test.txt"'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:24:18.317

我想我找到了问题所在。启动 httpd 的 wamp 服务没有正确的权限。我将服务器更改为使用我的用户帐户登录，并且可以正常工作。但是，您将如何通过修复默认帐户 wampapache 登录的权限来解决此问题？默认情况下，它登录到“本地系统帐户”，我检查了允许服务器与桌面交互。我还在 soffice.exe 上添加了权限，以允许 SYSTEM 帐户完全访问，但仍然无济于事。关于那个有什么想法吗？回顾一下，在将服务登录更改为我自己的帐户后，我得到了它的工作，但我很好奇如何通过修复默认本地系统帐户的权限来解决它。谢谢！

# ios - Sqlite 返回不同的值 - iOS

> ID：15919583
> 
> 赞同：1
> 
> 时间：2013-04-10T07:30:24.217
> 
> 标签：ios, xcode, sqlite

当为相同的“DBName”值调用以下函数时，将返回不同的布尔值。我期待找到一个副本。第一次尝试它有效，第二次尝试它没有。我做错什么了吗？

```
-(BOOL)CheckForDB:(NSString *)dbPath{
if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {
    if(checkForDB == nil){

        const char *sql = "SELECT  COUNT(*) FROM BookingInfo WHERE DBName = ?";
        if(sqlite3_prepare_v2(database, sql, -1, &checkForDB, NULL) != SQLITE_OK) {
            NSAssert1(0, @"Error while fetching uploaded status. '%s'", sqlite3_errmsg(database));
        }
    }

    sqlite3_bind_text(checkForDB, 1, [dbName UTF8String], -1, SQLITE_TRANSIENT);

             NSLog(@"checking status %@",dbName);
    while(sqlite3_step(checkForDB) == SQLITE_ROW) {

        NSString *status=[NSString stringWithUTF8String:(char *)sqlite3_column_text(checkForDB, 0)];
        return [status boolValue];
    }

    return NO;
    sqlite3_reset(checkForDB);

}else{
    sqlite3_close(database);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:34:55.373

我找到了解决方案。在我调用 return YES 之前，我必须再调用一次 sqlite3_reset(checkForDB)

```
while(sqlite3_step(checkForDB) == SQLITE_ROW) {

    NSString *status=[NSString stringWithUTF8String:(char *)sqlite3_column_text(checkForDB, 0)];
    sqlite3_reset(checkForDB)
    return [status boolValue];
} 
```

# checkbox - Primefaces：更改 selectionMode 标记以使用普通复选框

> ID：15919584
> 
> 赞同：1
> 
> 时间：2013-04-10T07:30:32.693
> 
> 标签：checkbox, primefaces, datatable

我正在使用 PrimeFaces 3.5 版并像这样使用 selectionMode：

```
<p:column selectionMode="multiple"/> 
```

它会产生这样的标记：

```
<div class="ui-chkbox ui-widget">
<div class="ui-helper-hidden-accessible">
<input type="checkbox" name="x_checkbox">
</div>
<div class="ui-chkbox-box ui-widget ui-corner-all ui-state-default">
<span class="ui-chkbox-icon ui-c"></span>
</div>
</div> 
```

我只想拥有复选框：

```
<input type="checkbox" name="x_checkbox"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:54:55.057

很抱歉回答，但我没有足够的声誉来发表评论。

为什么您实际上只想拥有复选框？是因为取消选择，即使您没有单击复选框，而是在列中的任何位置？

如果是这样，我遇到了同样的问题，我做了一些解决方法，我将复选框的宽度和高度设置为列宽/高度，这样您就不必处理那个小“错误”。

顺便说一句，据我所知，在 primefaces 3.4 中它有所不同，他们根据 primefaces Pro 用户的请求对其进行了更改。

# django - distinct() 不工作

> ID：15919585
> 
> 赞同：2
> 
> 时间：2013-04-10T07:30:48.407
> 
> 标签：django

我正在尝试对重复值进行分组，但它不起作用。我已经谷歌了很多次，他们指向 distinct() 函数。无论我做什么都不工作。我之前在其他查询（不是我的）中尝试了 distinct() 并且它正在工作，现在我正在使用它，它不工作。

这是我的代码：

模型.py

```
 class Transaction(models.Model):
    payee = models.CharField(
        max_length=255
        ) 
```

视图.py

```
 transactions = Transaction.objects.values_list('payee', flat=True).distinct() 
```

输出：

```
 [u'YOUR LOCAL SUPERMARKET', 
  u'CITY OF SPRINGFIELD', 
  u'SPRINGFIELD WATER UTILITY', 
  u'DEPOSIT', 
  u'DEPOSIT'] 
```

注意输出有重复`DEPOSIT`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:11:36.637

当您定义了一个排序时，`distinct()`将在尝试执行 SQL 时考虑这些字段，因此可能会返回奇怪的结果。

因此，您可以：

*   要么跳过订购，

*   `order_by()`在您的查询中调用一个空，

*   你可以定义你想要的字段`distinct()`。

所以在你的情况下，查询将是

`Transaction.objects.order_by('payee').distinct('payee')`

这将无视您可能拥有的任何顺序，并且对发生的事情也会更清楚一些，但这是以仅在 PostGresSQL 中可用为代价的。

[在文档中阅读更多信息](https://docs.djangoproject.com/en/dev/ref/models/querysets/#distinct)

# android - 如何在 Android 的 ObjectAnimator 中给出百分比值

> ID：15919587
> 
> 赞同：29
> 
> 时间：2013-04-10T07:31:07.910
> 
> 标签：android, android-animation, objectanimator

我正在使用 objectAnimator 在 Android 中从下到上为按钮设置动画。现在我正在使用下面的代码

```
ObjectAnimator transAnimation = ObjectAnimator.ofFloat(button,"translationY",0,440);
        transAnimation.setDuration(440);
        transAnimation.start(); 
```

> 我也尝试过使用下面的示例代码。但是问题依然存在

```
ObjectAnimator transAnimation = ObjectAnimator.ofFloat(loginLayout, "translationY",0f,0.8f);
                    transAnimation.setDuration(480);
                    transAnimation.start(); 
```

它在大屏幕设备中运行良好。但是当涉及到小屏幕设备时，它就会脱离屏幕。无论屏幕尺寸如何，我都想将它留在屏幕顶部。我想我必须给出百分比值（比如 0% 到 100% 或 0 到 100%p）。所以我的问题是如何在 Android 的 objectAnimator 中给出百分比值。我还注意到一件事，这个 objectAnimator 只在 HoneyComb 中引入。那么是否有任何向后兼容的库可以在低版本中运行它。谁能指导我找到解决方案。

我还尝试扩展 View 并为`offset()`. 它仍然没有完全移动到屏幕顶部。这是我使用的代码。

```
@SuppressLint("NewApi") public float getXFraction()
    {
        int width = context.getWindowManager().getDefaultDisplay().getHeight();
        return (width == 0) ? 0 : (getY());
    }

    @SuppressLint("NewApi") public void setXFraction(float xFraction) {
        int width = context.getWindowManager().getDefaultDisplay().getWidth();
        setY((width > 0) ? (width) : 0);
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T17:11:36.313

要`ObjectAnimator`在 Honeycomb 之前的设备上使用，请将[NineOldAndroids](http://nineoldandroids.com/)库添加到您的项目中，并将您的导入更改为使用`com.nineoldandroids.animation.ObjectAnimator`.

要使用百分比值`ObjectAnimator`代替，`getXFraction`您`setXFraction`必须添加`getYFraction`和`setYFraction`这样的方法

```
public float getYFraction() {
    final WindowManager wm = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);
    int height = wm.getDefaultDisplay().getHeight();
    return (height == 0) ? 0 : getY() / (float) height;
}

public void setYFraction(float yFraction) {
    final WindowManager wm = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE);
    int height = wm.getDefaultDisplay().getHeight();
    setY((height > 0) ? (yFraction * height) : 0);
} 
```

然后你可以`project-folder/res/animator/move_bottom.xml`像这样创建xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<objectAnimator xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="500"
    android:propertyName="yFraction"
    android:valueFrom="0"
    android:valueTo="0.8"
    android:valueType="floatType" /> 
```

或者在代码中创建动画

```
final LoginLayout loginLayout = (LoginLayout) findViewById(R.id.login_layout);
final ObjectAnimator oa = ObjectAnimator.ofFloat(loginLayout, "yFraction", 0f, 0.8f);
oa.start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-18T14:47:25.770

如果您想使用 ObjectAnimator 从屏幕外部创建动画。您可以使用 Android 显示大小来执行此操作。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {

        ...

        sampleImage = BitmapFactory.decodeResource(getResources(), R.drawable.sample);

        myImage = (ImageView) findViewById(R.id.image_view);
        myImage.setImageBitmap(sampleImage);

        //In case API Level is 14 above.
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        float displayWidth = size.x;

        //In case API Level is 13 below.       
        //WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
        //Display display = wm.getDefaultDisplay();
        //displayWidth = display.getWidth();

        animator = ObjectAnimator.ofFloat(myImage, "translationX", displayWidth,  0);
        animator.setDuration(500);

    } 
```

抱歉，如果我的建议没有抓住重点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-28T22:52:50.357

尝试使用 ObjectAnimator 的自定义属性，而不是使用自定义属性创建自定义视图，您可以创建一个接受“分数”的自定义属性：

```
Property<View, Float> property = new Property<View, Float>(Float.TYPE, "translation_x_fraction") {
        @Override public Float get(View view) { 
            return view.getWidth() <= 0 ? 0 : view.getTranslationX() / view.getWidth();
        }

        @Override public void set(View view, Float value) {
            view.setTranslationX(view.getWidth() * value);
        }
}

ObjectAnimator.ofFloat(view, property, 0f, 1f); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T05:22:54.550

这个获取父布局的 Y 尺寸然后除以 2 然后在上面做动画怎么样....

```
int a = parentlayout.getY();
view.animate().setTranslationY(a/2).start(); 
```

这个可以随心所欲地工作....

这是我的第一个答案，让我知道它是否有效..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T12:12:33.683

我已经这样做了，我花了太多时间，但它会节省你的时间。

**论据：**

1.  **查看**（您的支持查看）
2.  **父宽度**（视图的根）
3.  **子宽度**（您要在其上应用动画）
4.  **%**（您想要移动对象或视图的百分比）

不要害怕参数，我在这里举例说明。

**XML**和**JAVA**代码：

**活动主.xml**：

```
<LinearLayout
     android:id="@+id/llProgressParent"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:layout_margin="5dp"
     android:layout_gravity="center"
     android:orientation="horizontal"
     android:weightSum="1" >

     <View
        android:id="@+id/viewSuppot"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0" >
     </View>

     <ImageView
        android:id="@+id/ivProgressChild"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/ic_launcher" />

</LinearLayout> 
```

**MainActivity.java**：

```
private LinearLayout llProgressParent;
private View viewSuppot;
private ImageView ivProgressChild;
private int childWidth, parentWidth;
private int percentage = 75; 
```

在**onCreate()**上：

```
viewSuppot = findViewById(R.id.viewSuppot);

llProgressParent = (LinearLayout)findViewById(R.id.llProgressParent);
llProgressParent.post(new Runnable() {
      @Override
      public void run() {
          parentWidth = llProgressParent.getMeasuredWidth();
      }
  });

 ivProgressChild = (ImageView)findViewById(R.id.ivProgressChild);
 ivProgressChild.post(new Runnable() {
      @Override
      public void run() {
          childWidth = ivProgressChild.getMeasuredWidth();
      }
  }); 
```

**方法：**

```
private void animateViewByPercentageOrProgrss(final View view,  int parentWidth, int childWidth, int percentage){
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        ValueAnimator anim = ValueAnimator.ofInt(view.getMeasuredWidth(), (int) (((float) percentage * parentWidth) / 100)-(childWidth/2));
        anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator valueAnimator) {
                int val = (Integer) valueAnimator.getAnimatedValue();
                ViewGroup.LayoutParams layoutParams = view.getLayoutParams();
                layoutParams.width = val;
                view.setLayoutParams(layoutParams);
            }
        });
        anim.setDuration(2000);
        anim.start();
    } 
```

**如何**调用**方法**：

```
animateViewByPercentageOrProgrss(viewSuppot, parentWidth, childWidth, percentage); 
```

**它完成了**。

# java - 查看外部存储中的文件列表

> ID：15919590
> 
> 赞同：3
> 
> 时间：2013-04-10T07:31:22.123
> 
> 标签：java, android, list, storage, external

我想查看我的外部存储中的所有文件，我有这个库可以向用户显示文本，但是当我使用它来显示子文件时，它会说：
`(Ljava.File;@`
我如何得到它向用户显示实际文件的名称？另外，如何向用户显示特定文件夹的名称？说文件#3？

```
File[] files = myDir.listFiles();
UIHelper.displayText(this, R.id.textView1, files.toString()); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T08:21:22.080

检查 sdcard 是否已安装。

```
 if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
{
       ///mounted
} 
```

获取sd卡的路径

```
 File dir= new File(android.os.Environment.getExternalStorageDirectory()); 
```

然后打电话

```
 walkdir(dir);

 ArrayList<String> filepath= new ArrayList<String>();//contains list of all files ending with 

public void walkdir(File dir) {
 File listFile[] = dir.listFiles();

if (listFile != null) {
 for (int i = 0; i < listFile.length; i++) {

 if (listFile[i].isDirectory()) {// if its a directory need to get the files under that directory
  walkdir(listFile[i]);
} else {// add path of  files to your arraylist for later use

  //Do what ever u want
  filepath.add( listFile[i].getAbsolutePath());

 }
 }  
}    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-11T05:31:55.167

这是从 ExternalStorage 打印文件和文件夹列表的代码

```
String path = Environment.getExternalStorageDirectory().getAbsolutePath();

        Log.d("Files", "Path: " + path);
        File f = new File(path);        
        File file[] = f.listFiles();
        Log.d("Files", "Size: "+ file.length);
        for (int i=0; i < file.length; i++)
        {
            Log.d("Files", "FileName:" + file[i].getName());
        } 
```

不要忘记在您的 android Manifest 中添加以下权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:53:11.307

You can use a recursive method to scan all your SD card:

```
String sdCardState = Environment.getExternalStorageState(); 
if( !sdCardState.equals(Environment.MEDIA_MOUNTED ) ) {
    //displayMessage("No SD Card.");
    return;
} else {
    File root = Environment.getExternalStorageDirectory();
    lookForFilesAndDirectories(root);
}

// lookForFilesAndDirectories() method:

public void lookForFilesAndDirectories(File file) {
    if( file.isDirectory() ) {
        String[] filesAndDirectories = dir.list();
        for( String fileOrDirectory : filesAndDirectories) {
            File f = new File(dir.getAbsolutePath() + "/" + fileOrDirectory);
            lookForFilesAndDirectories(f);
        } 
    } else {
        doSomethingWithFile(f);
    }
} 
```

# c# - 将 DateTime 序列化为二进制

> ID：15919598
> 
> 赞同：6
> 
> 时间：2013-04-10T07:31:46.533
> 
> 标签：c#, .net, serialization

如何正确序列化 DateTime 对象（例如使用 BinaryWriter），并保留其完整状态？

我的印象是日期时间仅由内部长整数表示，并且该整数可作为`Ticks`DateTime 的属性访问。但是，查看实现，Ticks 属性实际上返回了实际内部数据的子集，该子集存储在名为 ulong 的`dateData`

Ticks（它只是获取 InternalTicks）是这样实现的：

```
public long InternalTicks
{
    get { return (long) this.dateData & 4611686018427387903L; }
} 
```

据我所知，这意味着 dateData 可能包含该`Ticks`属性未显示的信息。

更奇怪的是，DateTime 的 BinaryFormatter 序列化在 GetObjectData() 中执行此操作：

```
info.AddValue("ticks", this.InternalTicks);
info.AddValue("dateData", this.dateData); 
```

这将在流中输出*两个*long，其中一个很容易从另一个中恢复！

我怎样才能序列化我的 DateTime 而不会丢失任何内部状态（当然最好只有 8 个字节，并且没有反射）。我在想也许它可以直接投射到 ulong 上（不安全）？

还是我无缘无故地担心，该`Ticks`属性实际上会编码所有必要的状态吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T07:44:26.227

有两条信息需要担心：

*   蜱虫
*   日期时间种类

在内部，它们都被编码为一个长整数，dateData 如下所示：

```
this.dateData = (ulong) (ticks | (((long) kind) << 62)); 
```

因此该`Ticks`属性*不会*对所有状态进行编码。它将缺少 DateTimeKind 信息。

`dateData` *确实*对所有数据进行了编码，因此序列化程序同时存储该数据*和* `Ticks`!

所以你可以做的是：

```
ulong dataToSerialise = (ulong) (date.Ticks | ((long) date.Kind) << 62); 
```

反序列化时，您可以这样做：

```
long ticks = (long)(deserialisedData & 0x3FFFFFFFFFFFFFFF);
DateTimeKind kind = (DateTimeKind)(deserialisedData >> 62);
DateTime date = new DateTime(ticks, kind); 
```

这确实利用了有关 DateTime 内部的知识，并且它在未来理论上可能会发生变化，这可能会破坏这种序列化。

* * *

**编辑**

本地时间调整有一些问题。

因此，我建议您不要搞乱上述所有内容，而是查看[`DateTime.ToBinary()`](http://msdn.microsoft.com/en-us/library/system.datetime.tobinary.aspx)and[`DateTime.FromBinary()`](http://msdn.microsoft.com/en-us/library/system.datetime.frombinary.aspx)方法，这些方法*将*允许您将序列化为 long，但要遵守与本地时间调整相关的警告。这些警告在上面的 MSDN 链接中有完整的记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T08:07:32.813

我已经通过序列化在 TCP 套接字中传输日期来做到这一点

这是您可以像这样序列化任何对象的代码

```
public static byte[] DateToBytes(DateTime _Date)
{
    using (System.IO.MemoryStream MS = new System.IO.MemoryStream()) {
        BinaryFormatter BF = new BinaryFormatter();
        BF.Serialize(MS, _Date);
        return MS.GetBuffer();
    }
}

public static DateTime BytesToDate(byte[] _Data)
{
    using (System.IO.MemoryStream MS = new System.IO.MemoryStream(_Data)) {
        MS.Seek(0, SeekOrigin.Begin);
        BinaryFormatter BF = new BinaryFormatter();
        return (DateTime)BF.Deserialize(MS);
    }
} 
```

**编辑**

没有二进制格式化程序

```
//uses 8 byte
DateTime tDate = DateAndTime.Now;
long dtVal = tDate.ToBinary();
//64bit binary

byte[] Bits = BitConverter.GetBytes(tDate.ToBinary());
//your byte output

//reverse
long nVal = BitConverter.ToInt64(Bits, 0);
//get 64bit binary
DateTime nDate = DateTime.FromBinary(nVal);
//convert it to date 
```

# android - Android - 如何保存复选框启用状态

> ID：15919599
> 
> 赞同：2
> 
> 时间：2013-04-10T07:31:54.197
> 
> 标签：android, settings

我有一些 PreferenceActivity 并且有一些 CheckBoxes。

```
<PreferenceScreen
        android:key="prefGraphValues"
        android:title="@string/pref_graph_values"
        android:persistent="false" >
         <CheckBoxPreference
            android:defaultValue="true"
            android:key="Temp.Dry"
            android:summary="@string/pref_graph_value_temp_dry_summary"
            android:title="@string/pref_graph_value_temp_dry" >
        </CheckBoxPreference>
</PreferenceScreen> 
```

在代码的某个地方我有这样的东西：

```
checkBox.setEnabled(false); 
```

但是当我关闭此活动并稍后启动它时，复选框已启用。我可以保存这个状态吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:33:52.860

将您的持久属性更改为 true。

```
android:persistent="true" 
```

实际上，如果您将其分配给它，`false`则意味着首选项不会将值存储到 SharedPreferences，这就是您的状态未保存在“下一次启动”中的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:40:40.363

您必须将更改应用于 sharedpreference，下次复选框将通过 sharedpreference 中的键检索值。

```
SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);
sp.edit().putInt(your_key, your_value).apply(); 
```

# java - 如何使用 selenium 优化 java 中的向下滚动代码

> ID：15919602
> 
> 赞同：0
> 
> 时间：2013-04-10T07:31:56.183
> 
> 标签：java, javascript, selenium, web-crawler, jsoup

我正在使用*Java在**MAVEN*中工作一个项目。我必须获取一个 URL，向下滚动它们，然后获取此给定网页中其他项目的所有链接。

 *到目前为止，我使用 Selenium 动态获取页面，并向下滚动它们，并获取链接。但这需要太多时间。请帮助我优化它。

示例：-，我正在处理一个页面，其链接在[此处](http://www.jabong.com/men/shoes/men-sports-shoes/?source=home-leftnav)。

**我的问题**：-

1.  使用 selenium 滚动网页非常慢。我该如何优化呢？（建议任何其他方法
    来做同样的事情或帮助我优化这个）

提前致谢。寻找您的善意回应。

**动态获取和滚动页面的代码**：-

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import java.io.IOException;
import com.google.common.collect.*;
import java.io.File;
import java.util.ArrayList;
import java.util.Date;
import org.apache.commons.io.FileUtils;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;

/**
 *
 * @author jhamb
 */
public class Scroll_down {

    private static FirefoxProfile createFirefoxProfile() {
        File profileDir = new File("/tmp/firefox-profile-dir");
        if (profileDir.exists()) {
            return new FirefoxProfile(profileDir);
        }
        FirefoxProfile firefoxProfile = new FirefoxProfile();
        File dir = firefoxProfile.layoutOnDisk();
        try {
            profileDir.mkdirs();
            FileUtils.copyDirectory(dir, profileDir);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return firefoxProfile;
    }

    public static void main(String[] args)  throws InterruptedException{
        String url1 = "http://www.jabong.com/men/shoes/men-sports-shoes/?source=home-leftnav";
        System.out.println("Fetching %s..." + url1);
        WebDriver driver = new FirefoxDriver(createFirefoxProfile());

        driver.get(url1);  

        JavascriptExecutor jse = (JavascriptExecutor)driver;
        jse.executeScript("window.scrollBy(0,250)", "");
        for (int second = 0;; second++) {
            if (second >= 60) {
                break;
            }
            jse.executeScript("window.scrollBy(0,200)", "");
            Thread.sleep(1000);
        }
            String hml = driver.getPageSource();
        driver.close();

        Document document = Jsoup.parse(hml);

            Elements links = document.select("div");

        for (Element link : links) {
            System.out.println(link.attr("data-url"));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:31:19.497

Selenium 滚动是基于 Javascript 的。不过，我不知道您使用 selenium 的目标，您没有断言可以比较代码中的任何内容吗？当您确信您的数据获取速度如此之快时，请不要使用任何睡眠方法。睡眠方法使硒变慢，但是是的，它一直在等待元素正确加载.....这取决于您，尽管要测试什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T06:34:13.517

下页怎么样？

```
ele.sendKeys(Keys.PAGE_DOWN);   //WebElement ele = <Any existing element> 
```

重复此操作，直到找到该特定项目。*

# javascript - 如何使用javascript刷新网页？

> ID：15919603
> 
> 赞同：2
> 
> 时间：2013-04-10T07:31:59.550
> 
> 标签：javascript, html, function, url, hash

我想使用 javascript 刷新网页，我知道该怎么做，但在刷新之前我有一个问题：

> 网址：[http ://www.example.com/index.html#introduction](http://www.example.com/index.html#introduction)

刷新后：

> 网址：[http ://www.example.com/index.html](http://www.example.com/index.html)

我想在页面刷新后将该哈希用作另一个 javascript 函数中的参数。

那么，如何在页面重新加载后保存该哈希？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:20:24.060

尝试

```
escape(window.location.href) 
```

如果要添加参数：例如

```
escape(window.location.href="parameter="+param); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:40:26.107

如前所述，如果您只使用静态代码，那么您需要使用 cookie（如果还支持旧版浏览器），否则您可以使用 localstorage（对于现代浏览器）来存储 hashValue。

要在没有哈希值的情况下重新加载，请使用以下代码

```
window.location.href = window.location.href.split("#")[0]; 
```

在调用上述代码之前，您需要保存 hashValue。

```
var hash = location.hash.substr(1);
localStorage["hashValue"] = hash; 
```

稍后检索上述值

```
var hash = localStorage["hashValue"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:32:28.223

尝试这个

```
window.location.href = window.location 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:39:36.427

我相信您已经使用 location.reload() 方法实现了刷新，而是尝试使用 location.href 重定向到同一页面，如下所示。

location.href = " [http://example.com/index.html#introduction](http://example.com/index.html#introduction) "

这将刷新页面并在 url 中保持 #。

# c# - 如何使用正则表达式检查excel中的浮点值？

> ID：15919606
> 
> 赞同：0
> 
> 时间：2013-04-10T07:32:08.377
> 
> 标签：c#, asp.net, regex

使用以下代码，我可以轻松识别单元格中的单个字符。但我必须确保不仅字符而且它可以检测单词和符号（“。”除外）。换句话说，我必须确保单元格仅包含浮点值，例如 4.1、12.14、12345.2154、0.1 等。

```
string pattern = @"^[a-zA-Z]$";
int rowCnt = 0;
if (ExcelDataTable.Rows.Count > 0)
{
foreach (DataRow row in ExcelDataTable.Rows)
{
   rowCnt += 1;
  if (Regex.IsMatch(Convert.ToString(row[5]), pattern))
  {
  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:35:45.600

试试这个正则表达式

```
[-+]?[0-9]*\.?[0-9]+ 
```

# javascript - 创建拖放菜单

> ID：15919607
> 
> 赞同：3
> 
> 时间：2013-04-10T07:32:12.167
> 
> 标签：javascript, html, css

我正在开发一个菜单，您可以通过将菜单项拖放到彼此之上来进行排列。将一个项目放在另一个项目上应该会创建一个子菜单，并且当将它放在左/右/上/下时，它应该相应地放置它。

为了“检测”菜单应该放置的方向，我正在考虑像这样向菜单项添加叠加层（请原谅我的绘画技巧）：

![div 覆盖](https://i.stack.imgur.com/rgcJg.png)

红色框是我要添加的覆盖 div。

我的问题是：这是正确的做法吗？或者与菜单相关的某种鼠标坐标的javascript解决方案会更好吗？您会使用什么方法（可以是任何方法，而不仅仅是我指出的两种）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:52:35.697

You can use the library JQuery UI to [sort](http://jqueryui.com/sortable/ "sort") and [drag&drop](http://jqueryui.com/droppable/ "drop").
If the item is located exactly above the other, you need to add it to the item.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:36:38.463

我会去检查鼠标事件及其坐标以保持标记和 domtree 的清洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T07:39:32.597

您可以使用 Knockout.js 进行一些修改。

检查[这篇文章](http://www.knockmeout.net/2011/05/dragging-dropping-and-sorting-with.html)。看起来它可能对你有帮助。

您还可以查看[这个 github 项目](https://github.com/rniemeyer/knockout-sortable)。

# visual-studio-2008 - 未能将应用程序部署到移动设备

> ID：15919608
> 
> 赞同：2
> 
> 时间：2013-04-10T07:32:12.523
> 
> 标签：visual-studio-2008, windows-mobile-6.5, pushdown-automaton

我在部署阶段从 Visual Studio 收到以下错误消息到移动设备：

```
An operation was attempted on something that is not a socket 
```

唯一有效的解决方案是从`Program Files`设备上删除整个应用程序文件夹 - 在[http://mobileworld.appamundi.com/blogs/petevickers/archive/2010/06/30/vs2008-an-operation-was-attempted-中描述on-something-that-is-not-a-socket.aspx](http://mobileworld.appamundi.com/blogs/petevickers/archive/2010/06/30/vs2008-an-operation-was-attempted-on-something-that-is-not-a-socket.aspx)。

任何人都可以提出更好的解决方案，因为删除-重新部署会损害生产力。

细节：

*   视觉工作室 2008 (9.0.30729)
*   设备是运行 Windows Mobile 6.5 的 PDA、PSION EP10
*   正常部署一段时间后突然出现问题

我发现的另一个相关线程没有帮助 - [http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/18e06e4f-f5b3-4e6f-a5a6-ff2ba26c69d7/](http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/18e06e4f-f5b3-4e6f-a5a6-ff2ba26c69d7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T10:52:28.107

我有同样的问题。看完后：

[http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/18e06e4f-f5b3-4e6f-a5a6-ff2ba26c69d7/](http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/18e06e4f-f5b3-4e6f-a5a6-ff2ba26c69d7/)

我发现当我使用 Visual Studio 将应用程序部署到 PDA 时，它还部署了我项目中的一个文件夹，该文件夹不包含代码，但包含一些我要求 Visual Studio 复制到输出目录的内容文件。我猜 Visual Studio 没有权限覆盖它，因此部署失败，但不是在您第一次部署此应用程序时。

要解决此问题，您需要删除该目录。也许尝试使用构建后事件来做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T17:27:08.200

我过去也看到过类似的问题。

*   它们与部署目录路径有关。我更改了部署目录（来自 %Program Files%），然后问题就消失了。

*   可能，如果项目/解决方案文件已损坏，只需启动一个新项目并从原始项目复制所有文件/代码，然后使用新的解决方案/项目重新开始。

*   在另一种情况下，应用程序仍在设备上运行。所以部署失败了。

*   调试 DLL 项目时，您必须为调试会话设置一个 exe。

# scala - 忽略部分 slug 的播放路线语法

> ID：15919613
> 
> 赞同：6
> 
> 时间：2013-04-10T07:32:21.723
> 
> 标签：scala, playframework, playframework-2.0

我们想要的基本上是这样的：

```
/foo/*                 controllers.FooController.foo 
```

但是，这不起作用。

我们找到了以下解决方法：

```
/foo/*ignore           controllers.FooController.foo(ignore) 
```

但这使得该方法的代码`controllers.FooController.foo`略显难看。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:07:15.640

[查看此处](https://github.com/playframework/Play20/blob/master/framework/src/routes-compiler/src/main/scala/play/router/RoutesCompiler.scala#L156)的代码，路由器无法在不指定`identifier`...的情况下处理“slug”部分......解析器组合器并未将其声明为可选，并且`map`( `^^`) 显然按原样使用它。

如果它不会引发其他问题，其中模式将隐藏所有其他路由，因为它在文件中定义得更高（甚至最坏，包括在内），这可能是一个很好的功能请求。

[如果我们看这里](https://github.com/playframework/Play20/blob/master/framework/src/routes-compiler/src/main/scala/play/router/RoutesCompiler.scala#L345)，它似乎是故意的，我们可以发现动态参数不能被分配一个默认值——事实上，在这种情况下，我们将陷入我刚刚提到的情况：-/ .

我的第一个建议是告诉您使用`ignore`as`Option[String]`和将其设置为的操作定义`None`（而不是空`String`的，因为它更具表现力）。我的第二个是鼓励你怀疑这种情况是否真的相关，因为它容易出错并且可能隐藏更多问题

# python - 在二进制网格中扩展块（膨胀）

> ID：15919617
> 
> 赞同：1
> 
> 时间：2013-04-10T07:32:47.073
> 
> 标签：python, algorithm, matrix

对于 A* 实现（为“汽车”机器人生成路径），我需要调整我的模型以考虑汽车的“宽度”，从而避开障碍物。

我得到的一个想法是将所有障碍物扩大汽车的宽度，这样所有离障碍物太近的单元格也将被标记为障碍物。

我尝试使用两种简单的算法来做到这一点，但它仍然太慢（尤其是在大网格上），因为它多次通过相同的单元格：

```
 unreachable = set()
    # I first add all the unreachables to a set to avoid 'propagation'
    for line in self.grid:
        for cell in line:
            if not cell.reachable:
                unreachable.add(cell)

    for cell in unreachable:
        # I set as unreachable all the cell's neighbours in a certain radius
        for nCell in self.neighbours( cell, int(radius/division) ):
            nCell.reachable = False 
```

这是邻居的定义：

```
def neighbours(self, cell, radius = 1, unreachables = False):
    neighbours = set()
    for i in xrange(-radius, radius + 1):
        for j in xrange(-radius, radius + 1):
            x = cell.x + j
            y = cell.y + i
            if 0 <= y < self.height and 0 <= x < self.width and (self.grid[y][x].reachable or unreachables )) :
                neighbours.add(self.grid[y][x])

    return neighbours 
```

是否有任何顺序算法（或 O(n.log(n))）可以做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:52:54.697

您正在寻找的是所谓的[Minkowski sum](http://en.wikipedia.org/wiki/Minkowski_addition)，如果您的障碍物和汽车是凸的，则有一个线性算法来计算它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:55:38.107

我最终使用了卷积产品，我的“地图”（一个矩阵，其中“1”是障碍物，“0”是一个自由单元格）作为第一个操作数，以及一个汽车大小的矩阵，并且全部填充了“1”作为第二个操作数。

这两个矩阵的卷积乘积给出了一个矩阵，其中没有任何障碍物的细胞（即：附近没有任何障碍物）的值为“0”，而那些至少有他们附近的一个障碍物（即等于“1”的单元格）的值！= 0。

这是 Python 实现（使用 scipy 作为卷积产品）：

```
 # r: car's radius; 1 : Unreachable ; 0 : Reachable
    car = scipy.array( [[1 for i in xrange(r)] for j in xrange(r)] )
    # Converting my map to a binary matrix
    grid = scipy.array( [[0 if self.grid[i][j].reachable else 1 for j in xrange(self.width)] for i in xrange(self.height)] )

    result = scipy.signal.fftconvolve( grid, car, 'same' )

    # Updating the map with the result
    for i in xrange(self.height):
        for j in xrange(self.width):
            self.grid[i][j].reachable = int(result[i][j]) == 0 
```

# jsf - PrimeFaces 组件的自定义渲染器在 Tomcat 中可以正常工作，但在 Websphere 中却不行

> ID：15919624
> 
> 赞同：5
> 
> 时间：2013-04-10T07:33:02.780
> 
> 标签：jsf, jsf-2, websphere, myfaces, custom-renderer

我正在使用 MyFaces 2.1.9 和 PrimeFaces 3.5。我已经为`<p:inputText>`. 这适用于 Tomcat。但这不适用于 Websphere。我在自定义渲染器类中放置了断点，但它们从未被命中。我的日志中也没有看到任何内容。但是，当我在标准 JSF 上注册相同的自定义渲染器时`<h:inputText>`，它可以正常工作。

我已将其注册如下`faces-config.xml`：

```
<render-kit>
    <renderer>
        <component-family>org.primefaces.component</component-family>
        <renderer-type>org.primefaces.component.InputTextRenderer</renderer-type>
        <renderer-class>xxx.xxx.xxx.MyInputRenderer</renderer-class>
    </renderer>
</render-kit> 
```

如何解决自定义渲染器的注册问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T16:21:36.323

需要覆盖 3rd 方组件库的渲染器的自定义渲染器需要在 webapp 自己的中注册`faces-config.xml`，而不是在`faces-config.xml`打包在另一个 JAR 中的 a 中`/WEB-INF/lib`。JAR 文件的加载顺序未指定，因此可能会在您想要覆盖的第 3 方组件库之一*之前*加载和注册自定义渲染器，就像您所面对的那样。

# github - 在 GitHub API 上 - 获取与每个文件关联的最后提交消息的最佳方法是什么？

> ID：15919635
> 
> 赞同：17
> 
> 时间：2013-04-10T07:33:21.673
> 
> 标签：github, comments, github-api

据我了解，消息与提交相关联。但是，当您查看 GitHub 上的存储库时，它会很有帮助地按每个文件列出消息，以及上次更改的时间。

我想在我拥有的回购的网络视图中复制它。查看 GitHub api，在我看来，获取该信息的唯一方法是下载*所有*提交（可以分页），并从最近的提交消息开始工作，将提交消息分配给本地缓存中的文件，进一步再往前追溯，直到您收到每个文件的消息，可能是第一次提交，如果任何文件自初始提交以来没有更改

问题是，这是正确的做法吗？这不会杀死甚至 5000/hr 的配额吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-10T18:02:37.013

好的，在弄清楚您需要的是每个文件的最新提交消息之后，您可以执行以下操作。

首先，获取存储库中的文件列表。为此，您需要：

1)获取要为其列出文件的分支[的引用对象：](http://developer.github.com/v3/git/refs/#get-a-reference)

```
GET https://api.github.com/repos/:owner/:repo/git/refs/heads/:branch 
```

您可能需要 master 分支，因此这是您将提出的请求的示例：

```
https://api.github.com/repos/izuzak/pmrpc/git/refs/heads/master 
```

您将得到的响应将如下所示：

```
{
  "ref": "refs/heads/master",
  "url": "https://api.github.com/repos/izuzak/pmrpc/git/refs/heads/master",
  "object": {
    "sha": "fd6973f430a3367ad718ff049f1b075843913d6f",
    "type": "commit",
    "url": "https://api.github.com/repos/izuzak/pmrpc/git/commits/fd6973f430a3367ad718ff049f1b075843913d6f"
  }
} 
```

2)使用您在上一步中收到的响应的属性获取引用指向[的提交对象：](http://developer.github.com/v3/git/commits/#get-a-commit)`object.url`

```
GET https://api.github.com/repos/izuzak/pmrpc/git/commits/fd6973f430a3367ad718ff049f1b075843913d6f 
```

您将得到的响应将如下所示：

```
{
  "sha": "fd6973f430a3367ad718ff049f1b075843913d6f",
  "url": "https://api.github.com/repos/izuzak/pmrpc/git/commits/fd6973f430a3367ad718ff049f1b075843913d6f",
  "html_url": "https://github.com/izuzak/pmrpc/commits/fd6973f430a3367ad718ff049f1b075843913d6f",
  "author": {
    "name": "Ivan Zuzak",
    "email": "izuzak@gmail.com",
    "date": "2013-04-09T08:55:45Z"
  },
  "committer": {
    "name": "Ivan Zuzak",
    "email": "izuzak@gmail.com",
    "date": "2013-04-09T08:55:45Z"
  },
  "tree": {
    "sha": "f5f5de80f67dd794ffbd4abb855fb7d1a573660e",
    "url": "https://api.github.com/repos/izuzak/pmrpc/git/trees/f5f5de80f67dd794ffbd4abb855fb7d1a573660e"
  },
  "message": "fix typos",
  "parents": [
    {
      "sha": "d3617ae56dda793131e743b2ff394984bbab6ca3",
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/commits/d3617ae56dda793131e743b2ff394984bbab6ca3",
      "html_url": "https://github.com/izuzak/pmrpc/commits/d3617ae56dda793131e743b2ff394984bbab6ca3"
    }
  ]
} 
```

3)[获取上一步获取的提交对象的树对象](http://developer.github.com/v3/git/trees/#get-a-tree)。您将按照`tree.url`上一步响应中提供的链接执行此操作：

```
GET https://api.github.com/repos/izuzak/pmrpc/git/trees/f5f5de80f67dd794ffbd4abb855fb7d1a573660e 
```

响应将如下所示：

```
{
  "sha": "f5f5de80f67dd794ffbd4abb855fb7d1a573660e",
  "url": "https://api.github.com/repos/izuzak/pmrpc/git/trees/f5f5de80f67dd794ffbd4abb855fb7d1a573660e",
  "tree": [
    {
      "mode": "100644",
      "type": "blob",
      "sha": "726f21a4adec8c24c2fab6cf5b455d094a8b21bf",
      "path": "LICENSE.markdown",
      "size": 568,
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/blobs/726f21a4adec8c24c2fab6cf5b455d094a8b21bf"
    },
    {
      "mode": "100644",
      "type": "blob",
      "sha": "eb94760b81441b34a73d1b085d9f153ae48b0e63",
      "path": "README.markdown",
      "size": 5772,
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/blobs/eb94760b81441b34a73d1b085d9f153ae48b0e63"
    },
    {
      "mode": "040000",
      "type": "tree",
      "sha": "2e72b217b8644ce6874cda03387a7ab2d8eee55e",
      "path": "examples",
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/trees/2e72b217b8644ce6874cda03387a7ab2d8eee55e"
    },
    {
      "mode": "100644",
      "type": "blob",
      "sha": "64b0dbe4981759c0f9640c8e882c97c7324fc798",
      "path": "pmrpc.js",
      "size": 24546,
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/blobs/64b0dbe4981759c0f9640c8e882c97c7324fc798"
    }
  ]
} 
```

这些是存储库中的所有文件和文件夹。但是请注意，对于文件夹，您需要递归地获取文件夹树对象以获取文件夹中的文件列表。在上面的响应中，这`examples`是一个文件夹，您可以通过 type 属性的树值看到它。因此，您将在文件夹提供的 url 上发送另一个 GET 请求：

```
 GET https://api.github.com/repos/izuzak/pmrpc/git/trees/2e72b217b8644ce6874cda03387a7ab2d8eee55e 
```

另一种方法是通过一个请求获取**所有文件**（在所有文件夹中）的列表，使用`recursive=1`参数，如此[处](http://developer.github.com/v3/git/trees/#get-a-tree-recursively)所述。我建议您使用这种方法，因为它只需要一个 HTTP 请求。

接下来，既然您在 repo 中有文件和文件夹的列表，您将获得更改每个文件/文件夹[的最后一次提交。](http://developer.github.com/v3/repos/commits/#list-commits-on-a-repository)为此，请提出此请求

```
GET https://api.github.com/repos/:user/:repo/commits?path=FILE_OR_FOLDER_PATH 
```

因此，例如，这是一个获取上述`examples`文件夹提交的请求：

```
GET https://api.github.com/repos/izuzak/pmrpc/commits?path=examples 
```

您将得到的响应是提交对象的列表，您应该只查看该列表中的第一个对象（因为您对文件的最后一次提交感兴趣）并检索`commit.message`属性以获取您需要的消息：

```
[
  {
    "sha": "3437f015257683a86e3b973b3279754df9ac2b24",
    "commit": {
      "author": { ... },
      "committer": { ... },
      "message": "change mode",
      "tree": { ... },
      "url": "https://api.github.com/repos/izuzak/pmrpc/git/commits/3437f015257683a86e3b973b3279754df9ac2b24",
      "comment_count": 0
    },
    ...
  },
  {
    ...
  }
] 
```

在这种情况下，更改文件夹的最新提交的消息`examples`是“更改模式”。

因此，基本上，您需要发出 3 个 HTTP 请求来获取文件列表，然后为每个文件和文件夹发出 1 个 HTTP 请求。坏消息是，如果您有大量文件——您将发出大量 HTTP 请求。好消息是您可以缓存响应，这样如果没有任何更改，您就不需要发出请求（有关更多信息，请参见[此处](http://developer.github.com/v3/#conditional-requests)）。此外，您不会一次获取所有提交消息，您将在用户浏览文件夹时获取它们（就像在 GitHub 上单击文件夹一样）。因此，您应该能够轻松地保持在 5000 个请求的限制范围内。

希望这可以帮助！如果您找到更简单的方法，请告诉我:)。我不知道是否有一种方法可以通过 1-2 个请求来实现这一点，这可能是您所期望的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-05T17:42:11.843

我在存储库上列出提交，而不是抓住第一个并阅读它的 SHA，它工作得很好：

[https://developer.github.com/v3/repos/commits/#list-commits-on-a-repository](https://developer.github.com/v3/repos/commits/#list-commits-on-a-repository)

在 Go 中，它看起来像这样：

```
func GetLatestCommit(owner, repo string, sgc *github.Client) (string, error) {
    commits, res, err := sgc.Repositories.ListCommits(owner, repo, &github.CommitsListOptions{})

    if err != nil {
        log.Printf("err: %s res: %s", err, res)
        return "", err
    }

    log.Printf("last commit: %s", *commits[0].SHA)

    return *commits[0].SHA, nil
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T22:31:27.460

在寻找建立永久链接时，我发现检索提交 sha 的最简单方法之一是实际解析 html 页面。

好处：

*   存储库中的所有文件/文件夹页面都有它，甚至是根
*   单个 HTTP 调用
*   无需身份验证登录
*   将使用正确的分支（有些不使用 master 作为默认）
*   也适用于树枝

`Permalink`每个文件页面上都有一个链接。如果您正在寻找识别该链接的方法，则可以使用类`.js-permalink-shortcut`和`data-hotkey="y"`属性，如[获取文件的永久链接 - Github](https://help.github.com/articles/getting-permanent-links-to-files/#press-y-to-permalink-to-a-file-in-a-specific-commit)中所述。

```
<a href="/luckydonald/JavaPipBoyServer/blob/a6f4038336ff41463ad527b4ff4fda45642ebc6d/PROTOCOL.md" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a> 
```

所以在这个例子中 sha 是`a6f4038336ff41463ad527b4ff4fda45642ebc6d`.

请注意，它将始终呈现，即使您已经在该提交中。

如果有人喜欢从中建立永久链接，则[`#L437-L441`](https://github.com/luckydonald/JavaPipBoyServer/blob/a6f4038336ff41463ad527b4ff4fda45642ebc6d/src/main/java/de/luckydonald/pipboyserver/PipBoyServer/Database.java#L437-L441)需要手动保留（附加）url 哈希（例如，行引用，如 ）。

# php - 我怎样才能使这个电子邮件确认工作？

> ID：15919638
> 
> 赞同：0
> 
> 时间：2013-04-10T07:33:34.013
> 
> 标签：php, email, sendmail, registration, confirmation

我尝试使用邮件功能发送简单的电子邮件并且它有效。但是当我尝试将它插入我的程序时它不会。谁能告诉我哪一部分是错的，因为我很确定这不是关于 xampp/sendmail 配置的——我已经尝试了 2 个简单的邮件程序，除了这个之外它们都可以工作。

我尽力把(...) 代替不必要的行。我认为问题在于，它无法进入 prog 读取电子邮件功能部分的部分？

这是我的 register.php：

```
<?
session_start();
if(isset($_POST['register']))
{
    include('/class.register.php');

    $register = new Register();
if($register->process()) {
    header('location: login.php');
}
else  {
    $register->show_errors();
}
}

?>

<form method= "POST" action="<?=$_SERVER['PHP_SELF'];?>">
<table>
<tr><td>Username:</td><td><input type="text" name="ruser" required="required" /></td></tr>
<tr><td>Email:</td><td><input type="text" name="remail" required="required" /></td></tr>
<tr><td>Password:</td><td><input type="password" name="rpass" required="required" /></td></tr>
<tr><td>Title:</td><td><input type="text" name="rtitle" required="required" /></td></tr>
<tr><td>First Name:</td><td><input type="text" name="rfname" required="required" /></td></tr>
<tr><td>Last Name:</td><td><input type="text" name="rlname" required="required" /></td></tr>
<tr><td>Mobile Number:</td><td><input type="text" name="rmobile" required="required" /></td></tr>

</table>

<input type="submit" name="register" value="Sign Up" />

</form> 
```

这是我的 class.register.php：

```
<?

class Register
{

...

private $errors;  

public function __construct()
{
    $this->errors = array();

    ...;

    $this->token = $_POST['token'];
    $this->passmd5 = md5($this->password);

}

public function process()
  {
  if($this->valid_data() && $this->send_email())
$this->register();

return count($this->errors)? 0: 1;

}

public function filter($var)
{
    return preg_replace('/[^a-zA-z0-9@.]/','',$var);
}
public function user_exists()
{
    ...
} 

public function email_exists()
 ...

public function register()
{
    ...

}

public function show_errors()
 echo "<h3>Errors</h3>";

    foreach($this->errors as $key=>$value)
    echo $value."<br>";

public function valid_data()
...

public function send_email()
{

$from = 'jeremiah@citydelivery.ph';
$to = $_POST['remail'];
$subject = 'Registration confirmation';
$message = 'Please click the following link or copy and paste it
into your browser to complete the registration process: ';
$message .= 'http://example.com/confirm.php?u=';
$message .= urlencode($_POST['ruser']);
$message .= '&amp;t=';
$message .= urlencode($_POST['token']);

return mail($to, $subject, $message, $from);

}

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:41:39.090

`$this->send_email`一定是`$this->send_email()`

它是一个函数而不是变量；）

您也可以在语句中使用它，但`send_mail()`不返回任何内容，因此它返回 null，最终结果为 false。

所以`return mail($to, $subject, $message, $from);`要解决这个问题

**仅使用 && (and) 时**，if 语句按顺序执行，直到遇到 false

 **你有

```
if($this->valid_token() && $this->valid_data() && $this->send_email()) 
```

所以它可能永远不会命中`send_mail()`，因为`valid_data()`例如是错误的。

检查这个使用`var_dump($this->valid_token(), $this->valid_data(), $this->send_email()`第一个命中的错误是你要解决的问题，所以一个。

使用下面的处理函数，它检查哪一个是问题所在。我建议在它工作后删除这些`die()`功能

```
public function process()
  {
if($this->valid_token()) { die('token is the problem'); }
if($this->valid_data()) { die('valid data is the problem'); }
if($this->send_email()) { die('send email is the problem'); }

 if($this->valid_token() && $this->valid_data() && $this->send_email)
    $this->register();

return count($this->errors)? 0: 1;

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-11T02:16:17.283

我要感谢所有做出贡献的人。我通过创建另一个文件 sendmail.php 解决了这个问题，然后将它包含在我的 register.php 中。**

# c++ - iPhone 项目中的许多 C++ 编译错误

> ID：15919640
> 
> 赞同：0
> 
> 时间：2013-04-10T07:33:40.733
> 
> 标签：c++, xcode, compiler-errors

我正在处理我的应用程序`C++`中的文件。由于某种原因，编译器不接受语句，它给了我很多错误。为什么会这样？`Xcode 4.5``iPhone``C++`

![在此处输入图像描述](https://i.stack.imgur.com/8p4GH.png)

任何帮助，将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:43:16.687

`CAStreamBasicDescription.h`并`CAXException.h`包含 C++ 代码。它们只能包含在 C++ 或 Objective-C++ 源文件中。

这些错误表明包含这两个头文件的文件没有被编译为 C++ 或 Objective-C++。错误中的引用`Class`表明它被编译为普通的 Objective-C。`.mm`如果您确实打算将文件编译为，请确保该文件具有文件扩展名`Objective-C++`，并检查文件检查器部分中的`Type`未设置为非默认值`Identity and Type`。

# asp.net-mvc-3 - MVC 3/4 中 URL 的语言 SEO 优化

> ID：15919646
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:02.360
> 
> 标签：asp.net-mvc-3, url, asp.net-mvc-4, seo

我正在做一个网站，它有多种语言，如**丹麦语、英语和德语。**

但是，为不同语言格式化 url 的正确方法是什么。

是不是这样：

> 英语 = [http://www.mysite.dk/myController/Hepper](http://www.mysite.dk/myController/Hepper) **（网址中没有 /en/）**
> 
> 或者
> 
> 英语 = [http://www.mysite.dk/en/myController/Hepper](http://www.mysite.dk/en/myController/Hepper) **（带有 /en/）**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:39:12.040

就 SEO 而言，在 URL 中包含语言是最好的。当然，如果有默认语言，您可以省略它。例如：

*   `http://www.mysite.dk/myController/Hepper`（英语）
*   `http://www.mysite.dk/fr/myController/Hepper`（法语）
*   `http://www.mysite.dk/de/myController/Hepper`（德语）
*   ...

# mysql - 如何在 MySQL 中随机选择一行？

> ID：15919647
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:03.033
> 
> 标签：mysql

请问我需要什么查询才能在我的表中随机选择 JUST ONE ROW？

我努力了：

```
SELECT * 
FROM `table` 
ORDER BY RAND() 
LIMIT 0,1; 
```

它似乎很慢，有时不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:42:15.427

您可以创建一个`STORED PROCEDURE`包含动态 SQL 来获取随机记录，

```
DELIMITER $$
CREATE PROCEDURE SelectOne()
BEGIN
    SET @rownum := (SELECT count(*) FROM TableName);
    SET @start := (SELECT FLOOR((rand() * @rownum)));
    SET @sql = CONCAT('SELECT * FROM TableName LIMIT ?, 1');

    PREPARE stmt FROM @sql;
    EXECUTE stmt USING @start;
    DEALLOCATE PREPARE stmt;        
END $$
DELIMITER ; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/43948/4)

感谢[Jack](https://stackoverflow.com/users/1338292/jack)的改进`:)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:36:37.840

如果表很大，`ORDER BY`会很慢。相反，您可以根据表中的行数选择一个随机偏移量。

```
SELECT * FROM table LIMIT 1 OFFSET ? 
```

`?`随机数在哪里<`SELECT COUNT(*) FROM table`

# c++ - 编译C++的无限时间

> ID：15919653
> 
> 赞同：1
> 
> 时间：2013-04-10T07:34:15.017
> 
> 标签：c++, templates

我试图实现一个持久的双端队列结构。但我对 C++ 中的模板不是很熟悉。现在只有一个`push_front`函数，它不能正确编译。

```
#include <iostream>

using namespace std;

template < typename T > class Container{
public:
    T val;
    Container(){}
    Container(T _val){
        val = _val;
    }
};

template < typename T > class Deque{
public:
    Container<T>* head;
    Container<T>* tail;
    Deque< pair<T, T> > *child;
    Deque<T>(){}
    Deque<T>(Container<T>* _head, Deque< pair<T, T> > *_child, Container<T>* _tail){
        head = _head;
        child = _child;
        tail = _tail;
    }
    Deque<T>* push_front(T x){
        if (this == NULL)
            return new Deque<T>(new Container<T>(x), NULL, NULL);
        if (head == NULL)
            return new Deque<T>(new Container<T>(x), child, tail);
        return new Deque<T>(NULL, child->push_front(make_pair(x, head->val)), tail);
    }
};

int main(){
    Deque<int> d;
    int a = 1;
    d.push_front(a);
} 
```

有 push_front 函数的算法方案。 [http://i.stack.imgur.com/an1xd.jpg](http://i.stack.imgur.com/an1xd.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:56:35.087

我相信编译器可能会被这样一个事实混淆，即`Deque<int>`具有一个`child`of 类型`Deque<pair<int,int>>*`，该`child`类型`Deque<pair<pair<int, int>, pair<int, int> > >*`具有一个具有...... ad infinitum 的孩子的类型，并尝试实例化所有这些类型。

```
Deque<int>
    child: Deque<pair<int, int> >*
        child: Deque<pair<pair<int, int> , pair<int, int> > >*
            child: Deque<pair<pair<pair<int, int>.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:02:08.413

您有一个递归实例化：

```
dt.cpp: In instantiation of 'Deque<T>::Deque(Container<T>*, Deque<std::pair<T, T> >*,
Container<T>*) [with T = std::pair<std::pair<std::pair<int, int>, std::pair<int, int> >,
std::pair<std::pair<int, int>, std::pair<int, int> > >]':
dt.cpp:38:83:   recursively required from 'Deque<T>* Deque<T>::push_front(T) [with T = 
std::pair<int, int>]' 
```

等等。如果您对 进行一些小的修改`Deque`，`g++`将开始吐出这些错误：

```
Deque<T>(Container<T>* head_, Deque< pair<T, T> > *child_, Container<T>* tail_)
  : head(head_), child(child_), tail(tail_)
{ }

Deque<T>* push_front(T x)
{
    if (head == NULL)
        return new Deque<T>(new Container<T>(x), child, tail);
    return new Deque<T>(NULL, child->push_front(make_pair(x, head->val)), tail);
} 
```

# php - php jquery在成功函数中迭代php数组

> ID：15919664
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:32.720
> 
> 标签：php, jquery, ajax

我有 jquery pop 表单。它从用户那里获取一个输入，mapping_key，一旦用户输入映射键，我就会进行 ajax 调用以检查数据库中是否有用户使用这样的键。这是我的电话。

**Javascript：**

```
$.ajax({       
    url : base_url+'ns/config/functions.php',
    type: 'POST',
    data : {"mapping_key":mapping_key} ,
    success: function(response) {
            alert(response)                        
    }
}); 
```

**PHP：**

```
$sql = "select first_name,last_name,user_email,company_name from registered_users where mapping_key = '$mapping_key'";    
$res = mysql_query($sql);
$num_rows = mysql_num_rows($res);
if($num_rows == 0)
{
    echo $num_rows;
}
else{
    while($result = mysql_fetch_assoc($res))
    {
       print_r($result);
    }
} 
```

现在我想遍历返回的数组并添加这些返回值以在另一个弹出表单中显示。将不胜感激任何建议或帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:43:32.183

在您的 php 中，回显一个 json_encoded 数组：

```
$result = array();
while($row = mysql_fetch_assoc($res)) {
   $result[] = $row;
}
echo json_encode($result); 
```

在您的 javascript 中，将 $.ajax dataType 属性设置为“json”，然后您将能够循环返回的数组：

```
$.ajax({       
    url : base_url+'ns/config/functions.php',
    type: 'POST',
    data : {"mapping_key":mapping_key} ,
    dataType : 'json',
    success: function(response) {
        var i;
        for (i in response) {
          alert(response[i].yourcolumn);
        }                      
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:38:37.040

改变

```
data : {"mapping_key":mapping_key} , 
```

至

```
data: "mapping_key=" + mapping_key, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:49:23.740

你必须采取张贴`mapping_key`：

```
$mapping_key = $_POST['mapping_key'];

$sql = "select first_name,last_name,user_email,company_name from registered_users
        where mapping_key = '$mapping_key'"; 
```

或这个：

```
$sql = "select first_name,last_name,user_email,company_name from registered_users
        where mapping_key = $_POST['mapping_key']"; 
```

# asp.net - vb listview - 将值读入字符串

> ID：15919665
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:37.537
> 
> 标签：asp.net, sql, vb.net, visual-studio-2010

在询问之前我已经彻底搜索过，我想了解如何从列表视图中获取一些文本并将其传递给字符串。列表视图中只有一列，只有一行。其中的值是一个整数。

我最接近的是：

```
teststring = ListView1.Items.ToString 
```

但这只是用“System.Collections.Generic.List`1[System.Web.UI.WebControls.ListViewDataItem]”填充了字符串

更新：我在 ASP.NET 下工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:38:21.617

用这个，

```
teststring =  ListView1.Items(ListView1.Items.Count - 1) 
```

代替

```
teststring = ListView1.Items.ToString 
```

因为您的尝试将获得 ListViewItemCollection（非技术上：项目组），但实际上您需要从该组中获取单个项目。如果您需要进一步说明，请参阅[此。](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)

更新，

```
 teststring =  Ctype(ListView1.Items(ListView1.Items.Count - 1),Control).text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:43:32.400

尝试这个：

```
teststring = ListView1.Items(0).Text 
```

# c++ - 这个 A ::c("d") 构造是什么意思？带有模板的命名空间？

> ID：15919668
> 
> 赞同：5
> 
> 时间：2013-04-10T07:34:40.503
> 
> 标签：c++, templates, syntax, namespaces

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T07:42:23.893

这意味着您有一个名为`A`接受类型参数的类模板，并且您使用类型`B`作为其类型参数来实例化该模板。

反过来，该类模板定义了*（1）*一个静态成员**可调用对象** `c`（可以是一个常规函数），它接受一个字符串字面量可转换为的类型的对象，或者*（2）*一个类型的类型别名`c`，它可以从字符串文字构造（在这种情况下，您正在构造该类型的*临时*）。

`A`在这两种情况下，您都可以使用与访问命名空间内定义的实体相同的范围解析运算符 ( ) 来访问定义在类模板内`::`的实体（毕竟，*类和命名空间都定义了一个范围*）。

作为*（1）*的示例（[现场示例](http://liveworkspace.org/code/1XTnBW%2420)）：

```
#include <iostream>

struct B { };

template<typename T>
struct A
{
    static void c(const char* s) { std::cout << s; }
};

int main()
{
    A<B>::c("d");
} 
```

作为*（1）*使用可调用对象而不是函数的另一个示例（[现场示例](http://liveworkspace.org/code/1XTnBW%2414)）：

```
#include <iostream>

struct B { void operator () (const char* c) { std::cout << c;  } };

template<typename T> 
struct A
{
    static T c;
};

template<typename T>
T A<T>::c;

int main()
{
    A<B>::c("d");
} 
```

作为*（2）*的示例（[现场示例](http://liveworkspace.org/code/1XTnBW%2423)）：

```
#include <iostream>

struct B { B(const char* s) { std::cout << s; } };

template<typename T> 
struct A
{
    typedef T c;
};

int main()
{
    A<B>::c("d");
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T07:36:36.927

[范围解析运算符](http://en.wikipedia.org/wiki/Scope_resolution_operator) `::`与命名空间和完全限定成员一起使用。

在您的示例中，`c()`看起来像模板类公开的[静态方法。](http://msdn.microsoft.com/en-us/library/yyh8hetw.aspx)`A<B>`静态成员在类外访问时必须是完全限定的。

正如其他人正确指出的那样，`c`它也可以是可调用的静态成员（例如，覆盖的类型的实例`operator()(const char *)`），或可从 a 构造的类型的别名，或者是可从 a 构造的`const char *`公共`class`或`struct`嵌套的类型。`A<B>``const char *`

（在后两种情况下，该类型的构造函数仅因其副作用而被调用，因为创建的实例未存储在任何地方。）

# xml - 如何结合这两个xsl文件

> ID：15919670
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:43.537
> 
> 标签：xml, xslt, schematron

我有一个具有抽象模式的 schematron 文件，我想使用 xsl 文件将此文件转换为没有抽象模式的文件，所有抽象模式都是实例。问题是当我实例化抽象模式时，如果我在`<pattern>`一切正常中提供@id 属性。没有@id，抽象模式中的参数无法正确替换，schematron 文件如下

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://purl.oclc.org/dsdl/schematron">
    <title>Table abstract patterns</title>

    <pattern abstract="true" id="table">
        <rule context="$table">
            <assert test="$row">A table has at least one row</assert>
        </rule>
        <rule context="$row">
            <assert test="$cell">A table row has at least one cell</assert>
        </rule>
    </pattern>

    <pattern is-a="table">
        <param name="table" value="table"/>
        <param name="row"  value="tr"/>
        <param name="cell"  value="td"/>
    </pattern>
</schema> 
```

xsl 文件是

```
<xslt:stylesheet version="1.0" xmlns:xslt="http://www.w3.org/1999/XSL/Transform" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:iso="http://purl.oclc.org/dsdl/schematron"  
    xmlns:nvdl="http://purl.oclc.org/dsdl/nvdl"  

    xmlns:iae="http://www.schematron.com/namespace/iae" 

      >

    <xslt:param name="schema-id"></xslt:param>

    <!-- Driver for the mode -->
    <xsl:template match="/">
        <xsl:apply-templates select="." mode="iae:go" />
    </xsl:template> 

    <!-- ================================================================================== -->
    <!-- Normal processing rules                                                            -->
    <!-- ================================================================================== -->
    <!-- Output only the selected schema --> 
    <xslt:template match="iso:schema" >
        <xsl:if test="string-length($schema-id) =0 or @id= $schema-id ">
            <xslt:copy>
                <xslt:copy-of select="@*" />
                <xslt:apply-templates  mode="iae:go" /> 
            </xslt:copy>
        </xsl:if>
    </xslt:template>

    <!-- Strip out any foreign elements above the Schematron schema .
        -->
    <xslt:template match="*[not(ancestor-or-self::iso:*)]"     mode="iae:go"  >
       <xslt:apply-templates  mode="iae:go" />
    </xslt:template>

    <!-- ================================================================================== -->
    <!-- Handle Schematron abstract pattern preprocessing                                   -->
    <!-- abstract-to-real calls
            do-pattern calls 
                macro-expand calls 
                    multi-macro-expand
                        replace-substring                                                   -->
    <!-- ================================================================================== -->

    <!--
        Abstract patterns allow you to say, for example

        <pattern name="htmlTable" is-a="table">
            <param name="row" value="html:tr"/>
            <param name="cell" value="html:td" />
            <param name="table" value="html:table" />
        </pattern>

        For a good introduction, see Uche Ogbujii's article for IBM DeveloperWorks
        "Discover the flexibility of Schematron abstract patterns"
          http://www-128.ibm.com/developerworks/xml/library/x-stron.html
        However, note that ISO Schematron uses @name and @value attributes on
        the iso:param element, and @id not @name on the pattern element.

    -->

    <!-- Suppress declarations of abstract patterns -->
    <xslt:template match="iso:pattern[@abstract='true']"  mode="iae:go"  >
        <xslt:comment>Suppressed abstract pattern <xslt:value-of select="@id"/> was here</xslt:comment> 
    </xslt:template> 

    <!-- Suppress uses of abstract patterns -->
    <xslt:template match="iso:pattern[@is-a]"  mode="iae:go" >

        <xslt:comment>Start pattern based on abstract <xslt:value-of select="@is-a"/></xslt:comment>

        <xslt:call-template name="iae:abstract-to-real" >
            <xslt:with-param name="caller" select="@id" />
            <xslt:with-param name="is-a" select="@is-a" />
        </xslt:call-template>

    </xslt:template>

    <!-- output everything else unchanged -->
    <xslt:template match="*" priority="-1"  mode="iae:go" >
        <xslt:copy>
            <xslt:copy-of select="@*" />
            <xslt:apply-templates mode="iae:go"/> 
        </xslt:copy>
    </xslt:template>

    <!-- Templates for macro expansion of abstract patterns -->
    <!-- Sets up the initial conditions for the recursive call -->
    <xslt:template name="iae:macro-expand">
        <xslt:param name="caller"/>
        <xslt:param name="text" />
        <xslt:call-template name="iae:multi-macro-expand">
            <xslt:with-param name="caller" select="$caller"/>
            <xslt:with-param name="text" select="$text"/>
            <xslt:with-param name="paramNumber" select="1"/>
        </xslt:call-template>

    </xslt:template>

    <!-- Template to replace the current parameter and then
       recurse to replace subsequent parameters. -->

    <xslt:template name="iae:multi-macro-expand">
        <xslt:param name="caller"/>
        <xslt:param name="text" />
        <xslt:param name="paramNumber" />

        <xslt:choose>
            <xslt:when test="//iso:pattern[@id=$caller]/iso:param[ $paramNumber]">

                <xslt:call-template name="iae:multi-macro-expand">
                    <xslt:with-param name="caller" select="$caller"/>   
                    <xslt:with-param name="paramNumber" select="$paramNumber + 1"/>     
                    <xslt:with-param name="text" >
                        <xslt:call-template name="iae:replace-substring">
                            <xslt:with-param name="original" select="$text"/>
                            <xslt:with-param name="substring"
                            select="concat('$', //iso:pattern[@id=$caller]/iso:param[ $paramNumber ]/@name)"/>
                            <xslt:with-param name="replacement"
                                select="//iso:pattern[@id=$caller]/iso:param[ $paramNumber ]/@value"/>          
                        </xslt:call-template>
                    </xslt:with-param>                      
                </xslt:call-template>
            </xslt:when>
            <xslt:otherwise><xslt:value-of select="$text" /></xslt:otherwise>       

        </xslt:choose>
    </xslt:template>

    <!-- generate the real pattern from an abstract pattern + parameters-->
    <xslt:template name="iae:abstract-to-real" >
        <xslt:param name="caller"/>
        <xslt:param name="is-a" />
        <xslt:for-each select="//iso:pattern[@id= $is-a]">
        <xslt:copy>

            <xslt:choose>
              <xslt:when test=" string-length( $caller ) = 0">
              <xslt:attribute name="id"><xslt:value-of select="concat( generate-id(.) , $is-a)" /></xslt:attribute>
              </xslt:when>
              <xslt:otherwise>
                <xslt:attribute name="id"><xslt:value-of select="$caller" /></xslt:attribute>
              </xslt:otherwise>
            </xslt:choose> 

            <xslt:apply-templates select="*|text()" mode="iae:do-pattern"    >
                <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
            </xslt:apply-templates> 

        </xslt:copy>
        </xslt:for-each>
    </xslt:template>

    <!-- Generate a non-abstract pattern -->
    <xslt:template mode="iae:do-pattern" match="*">
        <xslt:param name="caller"/>
        <xslt:copy>
            <xslt:for-each select="@*[name()='test' or name()='context' or name()='select']">
                <xslt:attribute name="{name()}">
                <xslt:call-template name="iae:macro-expand">
                        <xslt:with-param name="text"><xslt:value-of select="."/></xslt:with-param>
                        <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
                    </xslt:call-template>
                </xslt:attribute>
            </xslt:for-each>    
            <xslt:copy-of select="@*[name()!='test'][name()!='context'][name()!='select']" />
            <xsl:for-each select="node()">
                <xsl:choose>
                    <!-- Experiment: replace macros in text as well, to allow parameterized assertions
                        and so on, without having to have spurious <iso:value-of> calls and multiple
                        delimiting -->
                    <xsl:when test="self::text()">  
                        <xslt:call-template name="iae:macro-expand">
                            <xslt:with-param name="text"><xslt:value-of select="."/></xslt:with-param>
                            <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
                        </xslt:call-template>
                    </xsl:when>
                    <xsl:otherwise>
                        <xslt:apply-templates select="." mode="iae:do-pattern">
                            <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
                        </xslt:apply-templates>     
                    </xsl:otherwise>
                </xsl:choose>
            </xsl:for-each>         
        </xslt:copy>
    </xslt:template>

    <!-- UTILITIES --> 
    <!-- Simple version of replace-substring function -->
    <xslt:template name="iae:replace-substring">
        <xslt:param name="original" />    
        <xslt:param name="substring" />   
        <xslt:param name="replacement" select="''"/>

  <xsl:choose>
    <xsl:when test="not($original)" /> 
    <xsl:when test="not(string($substring))">
      <xsl:value-of select="$original" />
    </xsl:when> 
        <xsl:when test="contains($original, $substring)">
          <xsl:variable name="before" select="substring-before($original, $substring)" />
          <xsl:variable name="after" select="substring-after($original, $substring)" />

          <xsl:value-of select="$before" />
          <xsl:value-of select="$replacement" />
          <!-- recursion -->
          <xsl:call-template name="iae:replace-substring">
            <xsl:with-param name="original" select="$after" />
            <xsl:with-param name="substring" select="$substring" />
            <xsl:with-param name="replacement" select="$replacement" /> 
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <!-- no substitution -->
            <xsl:value-of select="$original" />
        </xsl:otherwise>
      </xsl:choose> 
</xslt:template>

</xslt:stylesheet> 
```

我的预期结果是

```
 <?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://purl.oclc.org/dsdl/schematron">
    <title>Table abstract patterns</title>

    <pattern id="table1">
        <rule context="table">
            <assert test="tr">A table has at least one row</assert>
        </rule>
        <rule context="tr">
            <assert test="td">A table row has at least one cell</assert>
        </rule>
    </pattern>
</schema> 
```

现在我有一个如下的预处理xsl，如果我先使用这个然后再使用上面的，我会得到我想要的

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xslt="http://www.w3.org/1999/XSL/Transform"
    version="1.0"    
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:iso="http://purl.oclc.org/dsdl/schematron"  
    xmlns:nvdl="http://purl.oclc.org/dsdl/nvdl"  

    xmlns:iae="http://www.schematron.com/namespace/iae" 

    >
    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*" />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="iso:pattern[not(@id)]">

        <xslt:comment>Add @id for pattern </xslt:comment>
        <xsl:copy>
            <xslt:comment>Add @id for pattern </xslt:comment>
            <xsl:attribute name="id">
                <xslt:value-of select="generate-id(.) "/>
            </xsl:attribute>
            <xsl:apply-templates  select="node() | @*"/>
        </xsl:copy>

    </xsl:template>

</xsl:stylesheet> 
```

如何将这两个文件组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:22:10.197

更改您的模板：

```
 <xslt:template name="iae:abstract-to-real" >
    <xslt:param name="caller"/>
    <xslt:param name="is-a" />
    <xslt:for-each select="//iso:pattern[@id= $is-a]">
      <xslt:copy>

        <xslt:choose>
          <xslt:when test=" string-length( $caller ) = 0">
            <xslt:attribute name="id"><xslt:value-of select="concat( generate-id(.) , $is-a)"/></xslt:attribute>
          </xslt:when>
          <xslt:otherwise>
            <xslt:attribute name="id"><xslt:value-of select="$caller" /></xslt:attribute>
          </xslt:otherwise>
        </xslt:choose> 

        <xslt:apply-templates select="*|text()" mode="iae:do-pattern"    >
          <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
        </xslt:apply-templates> 

      </xslt:copy>
    </xslt:for-each>
    <xslt:for-each select="//iso:pattern[not(@id)]">
      <xslt:copy>

        <xslt:choose>
          <xslt:when test=" string-length( $caller ) = 0"/>
          <xslt:otherwise>
            <xslt:attribute name="id"><xslt:value-of select="$caller" /></xslt:attribute>
          </xslt:otherwise>
        </xslt:choose> 

        <xslt:apply-templates select="*|text()" mode="iae:do-pattern"    >
          <xslt:with-param name="caller"><xslt:value-of select="$caller"/></xslt:with-param>
        </xslt:apply-templates> 

      </xslt:copy>
    </xslt:for-each>
  </xslt:template> 
```

# c# - 从对象直接访问类中的方法

> ID：15919671
> 
> 赞同：2
> 
> 时间：2013-04-10T07:34:43.623
> 
> 标签：c#

如果一个类只有一个方法可能多次但很少被调用，那么不要以传统方式调用该方法，如下所示

```
RarelyCalledClass orarelyCalled = new RarelyCalledClass();
orarelyCalled.rarelyCalledMethod(); 
```

我可以这样称呼它吗？

```
(new RarelyCalledClass()).rarelyCalledMethod(); 
```

这会提高性能，因为编译器必须做更少的操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:37:13.663

这将是完全相同的性能和代码。只是您无法再在代码中访问该实例。而且可读性也更差（在我和大多数人看来）。

还有一点你应该牢记在心：***过早的微优化是邪恶的*****。**

 *分析您的应用程序。这是一个真正的瓶颈吗？不？那就别打扰了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:37:34.447

> 由于编译器必须做更少的操作，这会提高性能吗？

## 不，我不这么认为。

我相信你可以用任何反编译器检查他们的 IL 代码，你也会看到同样的东西。

第一个 IL 代码；

```
 .locals init ([0] class _1.RarelyCalledClass orarelyCalled)
  IL_0000:  nop
  IL_0001:  newobj     instance void _1.RarelyCalledClass::.ctor()
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  callvirt   instance void _1.RarelyCalledClass::rarelyCalledMethod()
  IL_000d:  nop
  IL_000e:  ret 
```

秒一IL码；

```
 .maxstack  8
  IL_0000:  nop
  IL_0001:  newobj     instance void _1.RarelyCalledClass::.ctor()
  IL_0006:  call       instance void _1.RarelyCalledClass::rarelyCalledMethod()
  IL_000b:  nop
  IL_000c:  ret 
```

基于这种结构；

```
static void Main(string[] args)
{
    //
}
}

class RarelyCalledClass
{
    public RarelyCalledClass()
    {

    }

public void rarelyCalledMethod()
{
    Console.WriteLine("Test");
}
} 
```

唯一的区别是您的第一个代码使用`stloc`nad`ldloc`处理堆栈问题，第二个没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:41:39.550

除非您稍后在某处使用该实例，否则编译后应该是相同的。但是*ILSpy*显示出不同：

***第一版（带作业）***

```
.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2058
    // Code size 13 (0xd)
    .maxstack 1
    .entrypoint
    .locals init (
        [0] class ConsoleApplication1.TestClass obj
    )

    IL_0000: newobj instance void ConsoleApplication1.TestClass::.ctor()
    IL_0005: stloc.0
    IL_0006: ldloc.0
    IL_0007: callvirt instance void ConsoleApplication1.TestClass::TestMethod()
    IL_000c: ret
} // end of method Program::Main 
```

***第二版（未分配）***

```
.method private hidebysig static 
    void Main (
        string[] args
    ) cil managed 
{
    // Method begins at RVA 0x2058
    // Code size 11 (0xb)
    .maxstack 8
    .entrypoint

    IL_0000: newobj instance void ConsoleApplication1.TestClass::.ctor()
    IL_0005: call instance void ConsoleApplication1.TestClass::TestMethod()
    IL_000a: ret
} // end of method Program::Main 
```

两者都是在*发布*模式下构建的。*

# c++ - 静态全局函数词汇

> ID：15919680
> 
> 赞同：0
> 
> 时间：2013-04-10T07:34:52.553
> 
> 标签：c++, function, global

我正在学习明天的测验（c ++）并且有一个快速的问题。

全局函数可以在任何地方访问，但是（根据我的笔记），将全局函数设为静态会限制对定义文件的访问。

1.  定义文件是否正好在全局函数所在的位置（.cpp 文件）
2.  这不是否定全局函数的想法吗

再次感谢大家的帮助，你们为我在 CSC 上省了很多麻烦，我希望在知识渊博的时候回报大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:38:15.143

1.  是的

2.  是的，但这有时就是你想要的。这有点像 C++ 类声明中的穷人版本的 private。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:38:24.697

1.  是的，将全局函数设为静态将限制其仅访问同一文件（在其中定义它）。

2.  文件中的其他函数仍然可以访问它（它就像一个受限的全局函数）。它的好处是可以最大限度地减少与软件中其他文件的名称冲突。

此外，如果您不需要其他文件中的功能，那么您可以限制其访问，从而避免其他文件（如果有）中全局数据的数据损坏的机会。

# android - getIntent().getStringArrayExtra() 总是返回 null

> ID：15919682
> 
> 赞同：2
> 
> 时间：2013-04-10T07:34:56.003
> 
> 标签：android, android-intent

我一直在寻找几个小时，但似乎无法弄清楚这里发生了什么。我想通过一个意图在按下按钮时传递一个数组。在 Activity AI 中有（在 onclick 监听器中）

```
Intent i = new Intent(getApplicationContext(), classB);
i.putExtra("string",stringArray);
startActivity(i); 
```

并且在 Activity BI 中有 onCreate 方法

```
final String theList[] = getIntent().getStringArrayExtra("string"); 
```

每当我尝试访问数组 theList 时，如下所示

```
textView.setText(theList[0]); 
```

程序强制关闭，我似乎无法理解为什么......我觉得我一定错过了一些明显的东西，但几个小时后我似乎无法理解为什么 theList = null。

谢谢你，很抱歉问了一个看似重复的问题。

日志输出

```
04-10 19:44:52.815: D/AndroidRuntime(1794): Shutting down VM
04-10 19:44:52.815: W/dalvikvm(1794): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-10 19:44:52.835: E/AndroidRuntime(1794): FATAL EXCEPTION: main
04-10 19:44:52.835: E/AndroidRuntime(1794): java.lang.NullPointerException
04-10 19:44:52.835: E/AndroidRuntime(1794):     at sean.vieten.acm.Athletics$1.onClick(Athletics.java:66)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at android.view.View.performClick(View.java:2485)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at android.view.View$PerformClick.run(View.java:9080)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at android.os.Handler.handleCallback(Handler.java:587)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at android.os.Looper.loop(Looper.java:123)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at       android.app.ActivityThread.main(ActivityThread.java:3683)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at java.lang.reflect.Method.invoke(Method.java:507)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-10 19:44:52.835: E/AndroidRuntime(1794):     at dalvik.system.NativeStart.main(Native Method) 
```

问题解决了，似乎我有两个与同一个按钮匹配的 onclick 侦听器，因此当我单击该按钮时，会创建多个意图来解释崩溃。对我来说非常非常愚蠢的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:50:26.807

在活动 B 中使用它。

```
 Intent intent= getIntent();

 theList[] = intent.getStringArrayExtra("string"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:39:19.400

1) 不要使用`getApplicationContext()`use`Activity`的上下文
2) 使用比“字符串”更多的信息键名

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T07:40:05.320

我遇到了同样的问题，就我而言，我使用

```
List<String> list = new ArrayList<>;
...
Intent intent = new Intent();
intent.putExtra("string",list.toArray());
...
String strs = intent.getStringArrayExtra("string"); 
```

我发现 strs 始终为空，因为 list.toArray 返回一个对象数组；所以我们应该改用字符串数组

```
List<String> list = new ArrayList<>;
...
Intent intent = new Intent();
String[] strArr = new String[list.size()];
list.toArray(strArr);
intent.putExtra("string",strArr);
...
String strs = intent.getStringArrayExtra("string"); 
```

或者你可以得到一个 ArrayList 代替

```
Intent intent = new Intent();
intent.putStringArrayListExtra("string", arrayList);
...
List<String>  list = intent.getStringArrayListExtra("string"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-05T05:44:06.807

**活动一**

```
Bundle b=new Bundle();
b.putStringArray("strings", new String[]{"aaa","bbb"});
Intent intent=new Intent(MainActivity.this,Main2Activity.class);
intent.putExtras(b);
startActivity(intent); 
```

**活动二**

```
 Intent intent=getIntent();
 Bundle b=intent.getExtras();
 String[] array=b.getStringArray("strings"); 
```

# python - Python条码库

> ID：15919686
> 
> 赞同：0
> 
> 时间：2013-04-10T07:35:13.713
> 
> 标签：python, python-2.7, barcode

我正在寻找 python 条形码库。我正在使用 ubuntu 12.04 并安装了一个[pyBarcode 库](https://pypi.python.org/pypi/pyBarcode/)来生成条形码。但它不支持。它给我这样的错误，

```
>>> import barcode
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named barcode 
```

有什么猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:48:18.257

如果您没有将它安装在标准路径/位置，请确保您的 PYTHONPATH 指向安装库的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-28T18:22:44.630

使用`pdf 417`模块。最容易使用和最好的之一

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-29T19:04:35.410

检查运行`python -c "import sys; print(sys.path)"`，然后运行添加`python -c "import sys; print(sys.path)"`到您正在运行的 python 文件中。

两者的输出是否不同？`python`如果是这样，那么您正在运行的 Python 中的 PYTHONPATH（甚至可能是其本身）与所`pip`使用的不同。

# php - 如何停止我的 YouTube iFrame

> ID：15919688
> 
> 赞同：0
> 
> 时间：2013-04-10T07:35:14.080
> 
> 标签：php, javascript

我制作了一个 youtube 列表，我可以在其中单击加载 youtube 视频的文本。

只有一个问题：当我播放一个视频并单击另一个视频链接时，我正在播放的视频并没有停止。所以我尝试使用 jQuery 停止它，但没有结果。

所以这就是我的 php 生成的：

```
function generateVideo() {
    echo '<script type="text/javascript" src="scripts/video.js"></script>';
    $tags = initTags();
    $query = '
    SELECT * FROM `youtube_links`';
    $result = mysql_query($query);
    if ( !$result) {
        die('Error: '.mysql_error());
    }

    echo '<div id="content"><table>';
    $i = 0;
    $className = "";
    while ($row = mysql_fetch_array($result)) {
        $i++;
        if ($i == 1) {
            $className = "active";
        } else {
            $className = "inactive";
        }
        echo '
            <tr>
                <td>
                    <a class="'.$className.'" id="item_'.$i.'" onclick="switchVideo(this)">
                        '.$row['Title'].'
                    </a>
                </td>
            </tr>
            ';
    }
    echo '</table></div>';

    $query = '
    SELECT * FROM `youtube_links`';
    $result = mysql_query($query);
    if ( !$result) {
        die('Error: '.mysql_error());
    }

    echo '<div id="videoPlayer">';

    $i = 0;
    $className = "";
    while ($row = mysql_fetch_array($result)) {
        $link = $row['Link'];
        $i++;
        if ($i == 1) {
            $className = "activePlayer";
        } else {
            $className = "inactivePlayer";
        }
        echo '<iframe class="'.$className.'" id="ytplayer'.$i.'" type="text/html" width="640" height="390"
             src="'.$link.'?version=3&enablejsapi=1"
             frameborder="0">
             </iframe>';
    }

    echo '</div>';
} 
```

这是我的 JavaScript：

```
function switchVideo(obj) {
    var idText = obj.id;
    var idArray = idText.split("_");
    var id = idArray[1];

    var videoPlayer = document.getElementById('ytplayer' + id);

    var elements = document.getElementsByClassName("activePlayer");

    for (var i = 0; i < elements.length; i++) {
        elements[i].className = "inactivePlayer";
        $(elements[i]).pause();
    }

    $('.inactivePlayer').each(function() {
        $(this).stopVideo();
    }); 

    videoPlayer.className = "activePlayer";
} 
```

您可以看到我将 youtube API 添加到 iframe 中，所以出了什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T08:03:20.370

这可能是 javascript Youtube API 异步加载的情况。你检查了吗？

格雷茨，亚历克斯

# html - 如何修复 OS X 选择 html 标记行为？

> ID：15919694
> 
> 赞同：0
> 
> 时间：2013-04-10T07:35:27.063
> 
> 标签：html, css, macos, select, drop-down-menu

我正在尝试使用 css 和 javascript、不透明度和附加标签自定义选择，但我在 OS X webkit 浏览器中遇到了下一个问题： ![OS X 下拉菜单](https://i.stack.imgur.com/3Zqbl.jpg) 我该如何避免这种情况？在其他系统中，所有浏览器（即 webkit）看起来都不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:16:17.367

你不能为真正的下拉菜单设置样式……</p>

但是，如果您稍微编辑一下，您就可以使用这种“菜单样式”的东西……</p>

[http://cssmenumaker.com/builder/475667](http://cssmenumaker.com/builder/475667)

# php - 带有php if块的多行Mysql插入语句

> ID：15919706
> 
> 赞同：2
> 
> 时间：2013-04-10T07:36:26.783
> 
> 标签：php, mysql

我有一个插入多行的表单。表单有六行字段。用户可以决定使用所有六行或使用几行。当所有六行都填满时，我使用下面的代码，它工作正常。

**下面的代码工作正常**

```
 //Database connection string
 global $conn;

//insert Records
$strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values

('".$Af_Depot."','".$Af_Product2."','".$Af_Date."','".$Af_Dist."','".$Af_Price2."','".$Af_Qty2."','".$Af_Trans."'), 
('".$Af_Depot."','".$Af_Product3."','".$Af_Date."','".$Af_Dist."','".$Af_Price3."','".$Af_Qty3."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product4."','".$Af_Date."','".$Af_Dist."','".$Af_Price4."','".$Af_Qty4."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product5."','".$Af_Date."','".$Af_Dist."','".$Af_Price5."','".$Af_Qty5."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product6."','".$Af_Date."','".$Af_Dist."','".$Af_Price6."','".$Af_Qty6."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product1."','".$Af_Date."','".$Af_Dist."','".$Af_Price1."','".$Af_Qty1."','".$Af_Trans."')";
db_exec($strSQLInsert,$conn); 
```

但是，当我尝试包含一个 php if 语句以省略空行时，它会给我一个错误。在下面的代码中，我尝试测试第一行但它不起作用。如果您有任何想法，请提供帮助。

```
//Database connection string
 global $conn;

//insert Records
$strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values

"if ($Af_Qty2 > 0){     //error occurs here
('".$Af_Depot."','".$Af_Product2."','".$Af_Date."','".$Af_Dist."','".$Af_Price2."','".$Af_Qty2."','".$Af_Trans."'), 
  }"

('".$Af_Depot."','".$Af_Product3."','".$Af_Date."','".$Af_Dist."','".$Af_Price3."','".$Af_Qty3."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product4."','".$Af_Date."','".$Af_Dist."','".$Af_Price4."','".$Af_Qty4."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product5."','".$Af_Date."','".$Af_Dist."','".$Af_Price5."','".$Af_Qty5."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product6."','".$Af_Date."','".$Af_Dist."','".$Af_Price6."','".$Af_Qty6."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product1."','".$Af_Date."','".$Af_Dist."','".$Af_Price1."','".$Af_Qty1."','".$Af_Trans."')";
db_exec($strSQLInsert,$conn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:45:17.313

尝试一下。

```
//Database connection string
global $conn;

//insert Records
$strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values ";

if ($Af_Qty2 > 0){   
    $strSQLInsert .= "('".$Af_Depot."','".$Af_Product2."','".$Af_Date."','".$Af_Dist."','".$Af_Price2."','".$Af_Qty2."','".$Af_Trans."'),";
}

$strSQLInsert .= "('".$Af_Depot."','".$Af_Product3."','".$Af_Date."','".$Af_Dist."','".$Af_Price3."','".$Af_Qty3."','".$Af_Trans."'),";
$strSQLInsert .= "('".$Af_Depot."','".$Af_Product4."','".$Af_Date."','".$Af_Dist."','".$Af_Price4."','".$Af_Qty4."','".$Af_Trans."'),";
$strSQLInsert .= "('".$Af_Depot."','".$Af_Product5."','".$Af_Date."','".$Af_Dist."','".$Af_Price5."','".$Af_Qty5."','".$Af_Trans."'),";
$strSQLInsert .= "('".$Af_Depot."','".$Af_Product6."','".$Af_Date."','".$Af_Dist."','".$Af_Price6."','".$Af_Qty6."','".$Af_Trans."'),";
$strSQLInsert .= "('".$Af_Depot."','".$Af_Product1."','".$Af_Date."','".$Af_Dist."','".$Af_Price1."','".$Af_Qty1."','".$Af_Trans."');";

db_exec($strSQLInsert,$conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:39:38.233

您不能在双引号内写 If 条件。所以尝试如下：

```
$strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values ";

if ($Af_Qty2 > 0){     //error occurs here
$strSQLInsert .= "('".$Af_Depot."','".$Af_Product2."','".$Af_Date."','".$Af_Dist."','".$Af_Price2."','".$Af_Qty2."','".$Af_Trans."'),";
  }

$strSQLInsert .="('".$Af_Depot."','".$Af_Product3."','".$Af_Date."','".$Af_Dist."','".$Af_Price3."','".$Af_Qty3."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product4."','".$Af_Date."','".$Af_Dist."','".$Af_Price4."','".$Af_Qty4."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product5."','".$Af_Date."','".$Af_Dist."','".$Af_Price5."','".$Af_Qty5."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product6."','".$Af_Date."','".$Af_Dist."','".$Af_Price6."','".$Af_Qty6."','".$Af_Trans."'),
('".$Af_Depot."','".$Af_Product1."','".$Af_Date."','".$Af_Dist."','".$Af_Price1."','".$Af_Qty1."','".$Af_Trans."')";
db_exec($strSQLInsert,$conn); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:49:13.713

正如您在评论中提到的，您只是在学习 PHP，所以我想指出一些事情。

首先，[SQL Injection](http://php.net/manual/en/security.database.sql-injection.php)，只是做你的研究，阅读它是什么以及如何预防它。

其次，使用`$Af_PriceN`哭声来使用[数组](http://php.net/manual/en/language.types.array.php)。

```
$prices = array(...);
$products = array(...); 
```

或者在理想世界中，您将创建包含所有数据的[类：](http://php.net/manual/en/language.types.object.php)

```
class Product {
    public $id;
    public $price;

    public function __construct($id, $price)
    {
        $this->id = $id;
        $this->price = $price;
    }
}

$p = array(
    new Product(1, 17.85),
    new Product(2, 19.47),
    ...
) 
```

然后你可以[`foreach`](http://php.net/manual/en/control-structures.foreach.php)用来构建复杂的查询：

```
foreach( $p as $prod){
    // append product to query
} 
```

但是回到您的示例，假设您将每个替换`$Af_fooN`为`$Af_foo = array`，那么您可以：

```
$rows = array();

for( $i = 0; $i < count( $Af_Product); $i++){
    if( $Af_Qty[$i]){
        continue;
    }

    $r = "('".$Af_Depot."','".$Af_Product[$i]."','".$Af_Date."','".$Af_Dist."',
          '".$Af_Price[$i]."','".$Af_Qty[$i]."','".$Af_Trans."')";

    array_push( $rows, $r);
}

// And join rows
if( count( $rows)){
    $strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values ";
    $strSQLInsert .= implode( ',', $rows);
} 
```

签出[`array_push`](http://php.net/manual/en/function.array-push.php)和[`implode`](http://php.net/manual/en/function.implode.php)。但是你仍然没有转义值，所以让我们定义`db_esc`为类似于[`mysqli_real_escape_string`](http://php.net/manual/en/mysqli.real-escape-string.php).

```
$r = "('".db_esc($Af_Depot)."','".db_esc($Af_Product[$i])...; 
```

键入真的很烦人，因此您可以使用以下功能的优势[`array_map`](http://php.net/manual/en/function.array-map.php)：

```
// Inside loop:
$pieces = array( $Af_Depot, $Af_Product[$i], $Af_Date, $Af_Dist,
                 $Af_Price[$i], $Af_Qty[$i], $Af_Trans);

$pieces = array_map( 'db_esc', $pieces);

// And here comes a trick:
$r = "('" . implode( "','", $pieces) . ")"; 
```

所以总结一下整个代码：

```
// Assuming
$Af_Depot = ...;
$Af_Date = ...;
$Af_Trans = ...;

$Af_Product = array();
$Af_Price = array();
$Af_Qty = array();

// Prepare
$rows = array();

// Go trough items:

for( $i = 0; $i < count( $Af_Product); $i++){
    if( $Af_Qty[$i]){
        continue;
    }

    $pieces = array( $Af_Depot, $Af_Product[$i], $Af_Date, $Af_Dist,
                     $Af_Price[$i], $Af_Qty[$i], $Af_Trans);

    $pieces = array_map( 'db_esc', $pieces);
    $r = "('" . implode( "','", $pieces) . ")";

    array_push( $rows, $r);
}

// And join rows
if( count( $rows)){
    $strSQLInsert = "insert into tbl_sales (Depot_Id,SalesProduct_Id,Sales_Date,Distributor_Id,Selling_Price,Units_Sold,Trns_type) values ";
    $strSQLInsert .= implode( ',', $rows);
} 
```

# winapi - 如何在 Win32 API 中获取目录文件夹属性？

> ID：15919707
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:36:28.863
> 
> 标签：winapi, properties, size, directory

我想使用 C/C++ 在 WIN32 API 中获取目录文件夹属性，例如：创建日期、大小、文件夹名称、...。我能做些什么？感谢您的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:35:28.170

使用[FindFirstFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)函数。您还可以使用[_stat](http://msdn.microsoft.com/en-us/library/14h5k7ff%28v=vs.71%29.aspx)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T11:18:16.247

```
 WIN32_FILE_ATTRIBUTE_DATA fileAttr;
    if (!GetFileAttributesEx(dirPath.c_str(), GetFileExInfoStandard, &fileAttr))
        return false;
    SYSTEMTIME st;
    FileTimeToSystemTime(&fileAttr.ftCreationTime, &st); 
```

使用[GetFileAttributesEx](http://msdn.microsoft.com/en-us/library/aa364946.aspx)。

# php - 在 PHP 中使用“date”和“strtotime”函数获取日期的问题

> ID：15919709
> 
> 赞同：1
> 
> 时间：2013-04-10T07:36:35.150
> 
> 标签：php, date, strtotime

我在 PHP 中使用日期函数分别获取日期、月份和年份。我在这个函数中传递了两个日期，一个是从日期，另一个是今天。在 todate 的情况下，函数返回适当的值，但在 fromdate 的情况下，函数分别为月、日、年返回 0、1、2。

这是我在 PHP 中使用的代码：

```
// here i am passing values for fromdate and todate fetched from POST, these values are proper

$from = $_POST['event_fromdate'];
$to=$_POST['event_todate'];

// here i am fetching month,day & year separately from fromdate , these values are not proper 

$time['month'] = date('m',strtotime($from));
$time['day'] = date('d',strtotime($from));
$time['year'] = date('Y',strtotime($from));

// here i am fetching month,day & year separately from todate , these values are proper

$time1['month'] = date('m',strtotime($to));
$time1['day'] = date('d',strtotime($to));
$time1['year'] = date('Y',strtotime($to)); 
```

在逐一打印这些值时，输出为：

```
Actual From date: 13-APR-2013
Actual To date  : 14-APR-2013

'From date' fetched from date function:
  month = 0
  day = 1
  year = 2

'To date' fetched from date function:
  month = 04
  day = 14
  year = 2013 
```

在这里，我已经尝试了各种方式，但不明白为什么在 FROM DATE 的情况下我会得到不适当的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:27:47.747

如果你只是把它放在一个 DateTime 对象中，你可以从那里提取所有的值，为你节省很多重复的代码。

```
$dt_to     = new DateTime($to);
$some_info = array(
  'day'   => $dt_to->format('d'),
  'month' => $dt_to->format('m'),
  'year'  => $dt_to->format('Y')
); 
```

但是，将 DateTime 对象传递到您实际需要天/月/年的端点将是一个更简洁的解决方案。

# java - 使用连接器将文件上传到 Salesforce

> ID：15919715
> 
> 赞同：0
> 
> 时间：2013-04-10T07:36:43.997
> 
> 标签：java, web-services, salesforce, mule, salesforce-service-cloud

我在 mule 中构建了一个流程，该流程使用“Salesforce”连接器在 Salesforce 中创建了一个案例。现在我需要使用相同的 mule 流程将文件上传到该案例。这可以通过以下代码以编程方式完成：

尝试 {

```
 File f = new File("c:\java\test.docx");
    InputStream is = new FileInputStream(f);
    byte[] inbuff = new byte[(int)f.length()];        
    is.read(inbuff);

    Attachment attach = new Attachment();
    attach.setBody(inbuff);
    attach.setName("test.docx");
    attach.setIsPrivate(false);
    // attach to an object in SFDC 
    attach.setParentId("a0f600000008Q4f");

    SaveResult sr = binding.create(new com.sforce.soap.enterprise.sobject.SObject[] {attach})[0];
    if (sr.isSuccess()) {
        System.out.println("Successfully added attachment.");
    } else {
        System.out.println("Error adding attachment: " + sr.getErrors(0).getMessage());
    }

} catch (FileNotFoundException fnf) {
    System.out.println("File Not Found: " +fnf.getMessage());

} catch (IOException io) {
    System.out.println("IO: " +io.getMessage());            
} 
```

但是为了简单起见，是否有任何骡子连接器可以自动完成所有这些并将文件附加到特定创建的案例中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:21:06.653

是的，您可以为此使用 Salesforce Cloud 连接器。例子：

```
<file:file-to-byte-array-transformer />
<sfdc:create type="Attachment">
    <sfdc:objects>
        <sfdc:object>
            <body>#[payload]</body>
            <name>test.docx</name>
            <parentid>#[message.inboundProperties['mysfdcparentid']]</parentid>
        </sfdc:object>
    </sfdc:objects>
</sfdc:create> 
```

在示例中，我将 sobject 类型设置为“附件”。

正文元素是文件本身。请注意，连接器将为您处理 base64 编码，您只需为其提供一个字节数组。如果您使用的是 File，则可以使用 file:file-to-byte-array-transformer 例如。

使用 MEL 设置 parentid 以从消息属性中获取值。因此，如果您有之前的 SFDC 操作，您可以使用 MEL 来提取之前 sobject 的值。

# javascript - 打印 javascript 字符串对象的属性和方法

> ID：15919717
> 
> 赞同：4
> 
> 时间：2013-04-10T07:36:47.877
> 
> 标签：javascript

如何打印 javascript String 对象的属性和方法。

以下代码段不打印任何内容。

```
for (x in String) {
   document.write(x);   
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:44:14.843

的属性`String`都是不可枚举的，这就是你的循环不显示它们的原因。可以在 ES5 环境中使用[`Object.getOwnPropertyNames`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames)函数查看自己的属性：

```
Object.getOwnPropertyNames(String);
// ["length", "name", "arguments", "caller", "prototype", "fromCharCode"] 
```

您可以使用以下函数验证它们是不可枚举的[`Object.getOwnPropertyDescriptor`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor)：

```
Object.getOwnPropertyDescriptor(String, "fromCharCode");
// Object {value: function, writable: true, enumerable: false, configurable: true} 
```

如果您想查看`String`实例方法，则需要查看`String.prototype`. 请注意，这些属性也是不可枚举的：

```
Object.getOwnPropertyNames(String.prototype);
// ["length", "constructor", "valueOf", "toString", "charAt"... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T08:52:44.587

首先它必须声明为对象，（可能使用'new'关键字）

```
s1 = "2 + 2";               
s2 = new String("2 + 2");   
console.log(eval(s1));      
console.log(eval(s2)); 
```

或者

```
console.log(eval(s2.valueOf())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:43:03.013

尝试在 Chrome 中的开发人员工具中使用控制台或在 Firefox 中使用 Firebug。

试试这个

```
 for (x in new String()) {
       console.log(x);   
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T07:45:19.493

这应该可以完成工作：

```
 var StringProp=Object.getOwnPropertyNames(String);

 document.write(StringProp); 

 -->>  ["length", "name", "arguments", "caller", "prototype", "fromCharCode"] 
```

但您可能对以下内容更感兴趣：

```
 var StringProtProp=Object.getOwnPropertyNames(String.prototype);

 document.write(StringProtProp); 

-->> ["length", "constructor", "valueOf", "toString", "charAt", "charCodeAt", "concat", 
"indexOf", "lastIndexOf", "localeCompare", "match", "replace", "search", "slice", "split", 
"substring", "substr", "toLowerCase", "toLocaleLowerCase", "toUpperCase", "toLocaleUpperCase",
 "trim", "trimLeft", "trimRight", "link", "anchor", "fontcolor", "fontsize", "big", "blink", 
"bold", "fixed", "italics", "small", "strike", "sub", "sup"] 
```

# java - 检票口更改标签/文本字段值

> ID：15919721
> 
> 赞同：6
> 
> 时间：2013-04-10T07:37:05.367
> 
> 标签：java, jakarta-ee, replace, label, wicket

我正在努力学习 Wicket。我遇到的问题之一是更改标签等组件的值。

这就是我声明标签的方式：

```
Label message = new Label("message", new Model<String>(""));
message .setOutputMarkupId(true);
add(message ); 
```

我能找到的唯一解决方案：

```
Label newMessage= new Label(message.getId(), "MESSAGE");
newMessage.setOutputMarkupId(true);
message.replaceWith(newMessage);
target.add(newMessage); 
```

是否有更好/更简单的方法来编辑 Wicket 标签的值并向用户显示这个新值？

谢谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T07:44:24.033

我想你不明白什么是模型。您的示例可以重写如下

```
Model<String> strMdl = Model.of("My old message");
Label msg = new Label("label", strMdl);
msg.setOutputMarkupId(true);
add(msg); 
```

在你的 ajax 事件中

```
strMdl.setObject("My new message");
target.add(msg); 
```

# jquery - JQuery DataTables mRender - 如何获取行 ID？

> ID：15919723
> 
> 赞同：4
> 
> 时间：2013-04-10T07:37:10.787
> 
> 标签：jquery, jquery-datatables

使用 JQuery DataTables 插件，我使用 mRender 将按钮添加到动态添加的行中。这部分效果很好，但是如何获取按钮添加到的当前行的 rowID？我需要这个来为按钮创建唯一的 ID。

我需要用什么代替？？？在下面的代码中？

**JavaScript：**

```
 $('#example').dataTable({
        "aoColumns": [
        { "sTitle": "Person", "mData": "Person" },
        {
            "sTitle": "Buttons", "mData": "Buttons", "mRender": function () {
                var rowID = ?????;
                btnD = '<button id="btnDepth' + rowID + '" data-keyindex="' + rowID + '" data-type="Depth" data-action="Show" class="addDepthGraph" title="Show Depth">D</button>';
                btnG = '<button id="btnGraph' + rowID + '" data-keyindex="' + rowID + '" data-type="Graph"  data-action="Show" class="addDepthGraph" title="Show Graph">G</button>';

                var returnButton = btnD + btnG;
                return returnButton;
            }
        }
        ],
        "bPaginate": false
    });

    $("#addRowOptions").click(function () {
        rowindex = $('#example').dataTable().fnGetData().length;
        obj = [{Person:'PersonA', Buttons: ''}];
        $('#example').dataTable().fnAddData(obj);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-04T10:22:00.080

[如果您使用DT_RowId](http://datatables.net/usage/server-side)服务器端，[此页面](http://datatables.net/forums/discussion/15353/using-dt_rowid-within-mrender-to-create-a-link/p1)正是您所需要的

代码：

```
"mRender": function ( data, type, full ) {
                                    return '<a href="?action=student_report&studentUID='+ full.DT_RowId + '">' + data + '</a>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:50:37.383

好的，我找到了解决方法。虽然这不是完美的解决方案，但它确实有效。我现在将网格中的总行数作为 rowID 传递给 mRender 函数。

```
$('#example').dataTable({
    "aoColumns": [
    { "sTitle": "Person", "mData": "Person" },
    {
        "sTitle": "Buttons", "mData": "Buttons", "mRender": function (rowIndex) {
            alert(rowindex);
            btnD = '<button id="btnDepth' + rowindex + '" data-keyindex="' + rowindex + '" data-type="Depth" data-action="Show" class="addDepthGraph" title="Show Depth">D</button>';
            btnG = '<button id="btnGraph' + rowindex + '" data-keyindex="' + rowindex + '" data-type="Graph"  data-action="Show" class="addDepthGraph" title="Show Graph">G</button>';
            var returnButton = btnD + btnG;
            return returnButton;
        }
    }
    ],
    "bPaginate": false
});

$("#addRowOptions").click(function () {
    rowindex = $('#example').dataTable().fnGetData().length;
    obj = [{Person:'PersonA', Buttons: rowindex}];
    $('#example').dataTable().fnAddData(obj);
}); 
```

我仍然想知道：是否可以从 mRender 函数中获取当前行索引？一个人会怎么做呢？

# php - 表单值不能输入到mysql，但可以连接mysql（PHP）

> ID：15919732
> 
> 赞同：1
> 
> 时间：2013-04-10T07:37:24.237
> 
> 标签：php, mysql, forms

我想DIY一个php测验，当你满级时，你可以将你的信息输入到我的数据库中，但是当我填写表格并放入sumbit时。有这个错误~

注意：未定义索引：第 19 行 C:\xampp\htdocs\record.php 中的名字

注意：未定义索引：第 19 行 C:\xampp\htdocs\record.php 中的姓氏

注意：未定义的索引：年龄在 C:\xampp\htdocs\record.php 第 19 行 mysql_connect.inc.php

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<?php
//資料庫設定
//資料庫位置
$db_server = "localhost";
//資料庫名稱
$db_name = "quiz";
//資料庫管理者帳號
$db_user = "root";
//資料庫管理者密碼
$db_passwd = "123456";

//對資料庫連線
if(!@mysql_connect($db_server, $db_user, $db_passwd))
        die("can't connect mysql");

//資料庫連線採UTF8
mysql_query("SET NAMES utf8");

//選擇資料庫
if(!@mysql_select_db($db_name))
        die("can't connect db");
?> 
```

记录.php

```
<?php  ?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<?php
session_start();

include("mysql_connect.inc.php");

$con = mysql_connect("localhost","root","123456");

mysql_query("INSERT INTO Persons (FirstName, LastName, Age) 
VALUES ('Peter', 'Griffin', '35')");

mysql_query("INSERT INTO Persons (FirstName, LastName, Age) 
VALUES ('Glenn', 'Quagmire', '33')");

$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

 mysql_close($con)
?> 
```

进程.php

```
<html>
<head>
<style type="text/css">
#wrapper {

    width:950px;
     height:auto;
     padding: 13px;
     margin-right:auto;
     margin-left:auto;
     background-color:#fff;
}
</style>
</head>
<?php 

    $fid = $_GET['id'];

?>
<body bgcolor="#e1e1e1">

<div id="wrapper">

<center><font face="Andalus" size="5">Your Score</font></center>
<br />
<br />

<?php
    $answer1= $_POST['answerOne'];
    $answer2= $_POST['answerTwo'];
    $answer3= $_POST['answerThree'];
    $score = 0;

    if ($answer1 == "A"){$score++;}
    if ($answer2 == "B"){$score++;}
    if ($answer3 == "C"){$score++;}
    echo "<center><font face='Berlin Sans FB' size='8'>Your Score is <br> $score/3</font></center>";

?>

<br>
<br>
<Center>
<?php   
  if ($score == 3)
    { 
      echo " 
      <form action='record.php' method='post' >
       ID: <input type='text' id='firstname'/><br>
       Phone: <input type='text' id='lastname'/><br>
       E-mail: <input type='text' id='age'/><br><br>
       <input type='submit' value='Submit Data' />
      </form>  ";
    }
?>
</Center>

</div><!--- end of wrapper div --->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:40:18.060

您的输入字段也需要具有“名称”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:41:01.447

您忘记引用数组键。

```
$_POST['firstname'] ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:42:03.290

*   首先，`('$_POST[firstname]','$_POST[lastname]','$_POST[age]')`应该是`("$_POST[firstname]","$_POST[lastname]","$_POST[age]")`“”而不是“”获取变量里面的解析。否则，您将在数据库中插入 $.... 而不是变量的内容。

*   其次，正如 Vidario 所述，数组索引需要引号。意思`$_POST[firstname]`应该变成`$_POST['firstname']`or `$_POST["firstname"]`。由于我们已经在变量周围有“”，现在让我们使用 ' ' 作为索引。

所以现在你有：

```
`("$_POST['firstname']","$_POST['lastname']","$_POST['age']")` 
```

*   第三，正如 Danny 所说，在 HTML 中您需要为输入项命名，以便它们可以在 PHP 中使用。身份证不够用。所以`<input type="..." id="blah" name="blah" />`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T07:47:02.997

替换这个：

```
$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')"; 
```

有了这个：

```
$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST['firstname']','$_POST['lastname']','$_POST['age']')"; 
```

并将名称属性添加到您的表单中，如下所示：

```
<?php   
if ($score == 3)
{ 
  echo " 
  <form action=\'record.php\' method=\'post\' >
   ID: <input type=\'text\' name=\'firstname\' id=\'firstname\'><br>
   Phone: <input type=\'text\' name=\'lastname\' id=\'lastname\'><br>
   E-mail: <input type=\'text\' name=\'age\' id=\'age\'><br><br>
   <input type=\'submit\' value=\'Submit Data\'>
  </form>  ";
}
?> 
```

# c# - 在单元测试中发送错误的 UDP/IP 数据报（故意）？

> ID：15919733
> 
> 赞同：2
> 
> 时间：2013-04-10T07:37:30.513
> 
> 标签：c#, networking, testing, network-programming, udp

我目前正在为我公司正在开发的设备（无线电编码器）开发单元测试。

可以通过 SNMP（仅限 v1）访问各种统计信息，其中您可以获取由于各种原因丢弃的 UDP 数据报的数量等。

我希望能够发送一个包含在错误 UDP 标头中的数据包，其中包含各种错误（校验和错误、标头中的错误 IP 地址等），以确保错误计数器正常运行。

我无法找到有关如何完成此操作的任何信息，我能够找到的大多数高级网络功能（显然）正确且自动地计算校验和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:23:31.817

你必须求助于原始套接字：

[http://www.winsocketdotnetworkprogramming.com/clientserversocketnetworkcommunication8f_3.html](http://www.winsocketdotnetworkprogramming.com/clientserversocketnetworkcommunication8f_3.html) 和 [http://www.winsocketdotnetworkprogramming.com/clientserversocketnetworkcommunication8h.html](http://www.winsocketdotnetworkprogramming.com/clientserversocketnetworkcommunication8h.html)

请注意限制： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740548 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548(v=vs.85).aspx)

> 在 Windows 7、Windows Vista、带有 Service Pack 2 (SP2) 的 Windows XP 和带有 Service Pack 3 (SP3) 的 Windows XP 上，通过原始套接字发送流量的能力受到以下几种方式的限制：
> 
> TCP 数据不能通过原始套接字发送。无法通过原始套接字发送具有无效源地址的 UDP 数据报。任何传出 UDP 数据报的 IP 源地址必须存在于网络接口上，否则数据报将被丢弃。进行此更改是为了限制恶意代码创建分布式拒绝服务攻击的能力，并限制发送欺骗数据包（具有伪造源 IP 地址的 TCP/IP 数据包）的能力。不允许使用 IPPROTO_TCP 协议的原始套接字调用绑定函数。注意 其他协议（例如 IPPROTO_IP、IPPROTO_UDP 或 IPPROTO_SCTP）允许使用原始套接字的绑定函数

# php - 重写 URL www.domain.com 在我的页面上导致 404

> ID：15919737
> 
> 赞同：6
> 
> 时间：2013-04-10T07:37:38.097
> 
> 标签：php, .htaccess, url-rewriting

好的，所以我在我的网站中重写了 URL，现在由于某种原因，如果我输入 www.domain.com，它会抛出 404 错误，如果我输入 domian.com，一切正常。

```
DirectoryIndex home.php

IndexIgnore *
#RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
#RewriteRule ^(.*)$ http://%1/directory/$1 [L,R=301]

RewriteRule ^home/?$   home.php  [NC]
RewriteRule ^about/?$   about.php  [NC]

RewriteRule ^404/?$   404.php  [NC]

ErrorDocument 404 http://domain.com/directory/404 
```

注意：我已经评论了 1st 2 rewrite 规则，即使我更改它们在上传到服务器后也不会影响`.htaccess`，感觉就像它被缓存了一样。

附加信息，我正在使用`<base>`位于`embeds.php`

```
if($_SERVER['REMOTE_ADDR'] == '::1') {
    echo '<base href="http://localhost/projects/directory/" />';
} else {
    echo '<base href="http://domain.com/directory/" />';
} 
```

目录结构

```
Root -
  home.php
  about.php
     -stylesheets
      default.css
     -includes
      embeds.php
  404.php
  .htaccess 
```

`embeds.php`**包含**在`home.php`等中`about.php`，样式表、脚本等，简而言之，头部**和** `<base>`标签都在`embeds.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:09:19.743

这也是Firefox的问题，它正在缓存我的`.htaccess`文件

以下是一些有用的链接，可能会帮助其他用户参考此问题

[Apache - 如何在调试 htaccess 时禁用浏览器缓存](https://stackoverflow.com/questions/7743980/apache-how-to-disable-browser-caching-while-debugging-htaccess)

[htaccess 文件以某种方式被缓存？](https://stackoverflow.com/questions/4499541/htaccess-file-somehow-being-cached)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:48:40.223

```
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule ^(.*) http://www.domain.com/$1  [QSA,L,R=301] 
```

如果它不是来自您的 DNS 或 Vhost 配置，它应该可以工作。

# c# - 使用 IP 地址实现 facebook 之类的按钮 data-href

> ID：15919741
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:37:53.277
> 
> 标签：c#, facebook

我成功地为我的网站实现了 Facebook，它有一个域名..但是当我想使用我托管它的 IP 地址来实现它时......它不起作用。

关于如何实现这一目标的任何想法

下面是我的代码

```
<script type="text/javascript">
        (function(d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "/js/alllocalFb.js#xfbml=1&appId=138257749685264";
             ref.parentNode.insertBefore(js, ref);
         } (document));
    </script> 
```

这是我喜欢的按钮 div`<div class="fb-like" data-href="http://192.168.1.5:8484/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:40:43.563

> 我成功地为我的网站实现了 Facebook，它有一个域名..但是当我想使用我托管它的 IP 地址来实现它时......它不起作用。

我认为这可能是故意的。

整个 Open Graph 是基于基于其 URL 识别对象的。是的，使用 IP 地址而不是域名的 URL 在技术上是有效的——但 Facebook 希望能够（我猜）根据其域名阻止垃圾邮件站点。垃圾邮件发送者的域被阻止 == pita，必须获得新域。只需切换到另一个 IP 地址 - 通常更容易且完成得更快。

* * *

[虽然，当我在https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)上的生成器中输入您的 IP 地址时，我看到了一个点赞按钮和“有人喜欢这个”……</p>

# knockout-2.0 - 使用敲除清除表格

> ID：15919742
> 
> 赞同：0
> 
> 时间：2013-04-10T07:37:57.187
> 
> 标签：knockout-2.0

我正在使用淘汰赛 foreach 绑定绑定表单字段值，该绑定使用从数据库中检索的值并且工作正常。但是如何使用这个 foreach 绑定来清除我通过敲除 foreach 绑定绑定的相同表单？如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T12:15:30.737

您可以使用此博客文章中描述的模式：[http ://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js.html](http://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js.html)

```
var Item = function(data) {
    this.name = ko.observable();
    this.price = ko.observable();
    this.cache = function() {};

    this.update(data);
};

ko.utils.extend(Item.prototype, {
  update: function(data) {
    this.name(data.name || "new item");
    this.price(data.price || 0);

    //save off the latest data for later use
    this.cache.latestData = data;
  },
  revert: function() {
    this.update(this.cache.latestData);
  }
}); 
```

现在您可以将取消按钮单击事件绑定到该`revert`方法。

# java - 在 IntelliJ 中创建 Android 项目时如何设置我的 Java SDK？

> ID：15919743
> 
> 赞同：6
> 
> 时间：2013-04-10T07:38:00.153
> 
> 标签：java, android, intellij-idea

我正在尝试[按照此处的 JetBrain 说明](http://confluence.jetbrains.com/display/IntelliJIDEA/Create+a+new+Android+project)在 IntelliJ 中运行 Android 项目，但在尝试选择项目模板时遇到错误消息（步骤 #2）。错误是

“无法创建 SDK

您需要先配置 Java SDK”。

我在 Mac 上执行此操作，并按照上面链接之前的第一页说明进行操作。尤其是：

*   `tools/android update sdk --no-ui`仅下载 Android SDK 内容后，我从终端运行命令。我提到这一点是因为它说“运行 SDK 管理器”，但我在解压缩的内容中没有看到任何类似的内容。运行上述命令会下载并安装许多 Android API 版本和修订版。
*   我下载的JDK是jdk-7u17。我安装了它；这就是我需要做的吗？

当我在步骤 2 中按下“新建...”按钮时，出现“首先配置 Java SDK”的错误。有谁知道如何配置我的 Java SDK？JetBrain 说明中是否有我遗漏或遗漏的内容？

![单击新建... 会导致此处出现错误。](https://i.stack.imgur.com/GrDye.png)

编辑：显然，单击确定后会出现一个文件浏览器。这让我更加困惑，因为它接受设置我的 JDK 位置，但我想要的是查看一个 Android 项目。我的 Android SDK 位于名为“android-sdk-macosx”的文件夹中，但是当它被选中时并没有显示 Android 选项。如何访问 Android 模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:53:20.917

Have a look at the [IntelliJ documentation](http://www.jetbrains.com/idea/webhelp/configuring-global-project-and-module-sdks.html#d277741e299), which explains how to setup your SDK.

You have to setup a JDK first (see also [Setting up JDK 7 for IntelliJ on the Mac](https://stackoverflow.com/questions/13078898/setting-up-jdk-7-for-intellij-on-the-mac)), then you will be able to open your Android project.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T07:56:03.117

您是否下载了一些 Android SDK？尝试运行`tools/android sdk`（这将打开 SDK 管理器）并下载其中一个 SDK。然后将其添加到您的项目中。

# forms - symfony 2 form_row 有 2 个字段

> ID：15919751
> 
> 赞同：0
> 
> 时间：2013-04-10T07:38:16.123
> 
> 标签：forms, symfony, twig

我需要类似下面的东西：

```
{% block form_row %}
    <div class="form_row">
        {{ form_label(form) }}
        {{ form_widget(form) }}
        {{ form_widget(form.field_name + '_previous') }}
        {{ form_errors(form) }}
    </div>
{% endblock form_row %} 
```

即，一行中的两个表单域；第二个字段名称等于 first_field_name + _previous。例如，如果字段名称为“total_cost”，则第二个字段将为“total_cost_previous”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:31:38.953

我认为你可以这样做：

```
{% set field = field_name ~ '_previous' %}
{{ form_widget(attribute(form, field)) }} 
```

# .net - 重置基础设施工具栏位置

> ID：15919756
> 
> 赞同：0
> 
> 时间：2013-04-10T07:38:39.157
> 
> 标签：.net, winforms, infragistics, toolbars

我需要重置 Infragistics 工具栏位置，以便工具栏之间没有空格。有没有办法做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/7EdCk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:13:18.373

关于您的评论：“......有很多关于 Infragistics 的问题，有时解决方案比支持论坛上的解决方案更快......”。

这是您在 Infragistics 论坛中的帖子：http: [//www.infragistics.com/community/forums/p/79125/399883.aspx](http://www.infragistics.com/community/forums/p/79125/399883.aspx) ，我认为我的同事已经发送了您的问题的解决方案和示例。

如果您还有其他问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:00:33.483

查看提供的信息，如果您使用 UltraToolbarManager 的“保存设置”选项，则上述行为是可能的。要解决您的任务，您可以禁用“保存设置”选项。通过这种方式，您将使用 UltraToolbarManager 的默认功能，并且您的工具栏将左对齐

更多详情请看：http: [//www.infragistics.com/community/forums/p/79847/402650.aspx#402650](http://www.infragistics.com/community/forums/p/79847/402650.aspx#402650)

# android - Paint.Style.STROKE 和 drawText 性能不佳

> ID：15919757
> 
> 赞同：1
> 
> 时间：2013-04-10T07:38:42.697
> 
> 标签：android, performance, android-widget

我的三星 Galaxy S3 和自定义`TextView`组件面临巨大的性能问题。

我已经覆盖了`onDraw`方法：

```
canvas.drawText(getText().toString(), x, y, borderPaint);
canvas.drawText(getText().toString(), x, y, textPaint); 
```

问题在于`borderPaint`使用`Paint.Style.STROKE`. 如果我将该属性注释掉，一切都会顺利进行，但我需要它来为我的`TextView`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:59:42.527

不知道为什么`STROKE`会导致问题，但是我通过将文本绘制到`Bitmap`然后`Bitmap`在`onDraw`方法中绘制它来获得良好的性能。

# templates - Angular：构建指令并从根元素中删除属性

> ID：15919758
> 
> 赞同：0
> 
> 时间：2013-04-10T07:38:53.213
> 
> 标签：templates, angularjs, angularjs-directive

是否有可能做这样的事情：

`<field:text id="foo" label="Foo Label" model="model.foo" placeholder="foo" />`

这将被编译为：

```
<div class="control-group">
   <label class="control-label" for="foo">Foo Label</label>
   <div class="controls">
      <input type="text" id="foo" placeholder="foo" ng-model="model.foo">
   </div>
</div> 
```

我试图做一个例子，但 Plunker 不让我保存我的例子......上传到 dropbox：[https ://dl.dropbox.com/u/2862814/plunk.zip](https://dl.dropbox.com/u/2862814/plunk.zip)

该示例中断了诸如 ng-change 之类的内容。这是由于编译了 ng-change 指令。我以 fieldText 指令的高优先级尝试了它，但没有修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:16:48.493

您在示例中非常接近，但您必须将 ng-change 放在模板中的输入字段上。你的旧代码：

```
<field:text ng-change="updateHidden()" ... 
```

将此更改为

```
<field:text change="updateHidden()" ... 
```

并在指令中（参见[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive) - & 或 &attr - 提供了一种在父范围的上下文中执行表达式的方法。）

```
{scope:{change:'&' ... 
```

最后是指令模板

```
<input ng-change="change()" ... 
```

这是一个修改和工作的 plunkr：[http ://plnkr.co/edit/QmQjGQQBRtDmkCka0dul?p=preview](http://plnkr.co/edit/QmQjGQQBRtDmkCka0dul?p=preview)

```
<field:text id="too" label="Too" model="model.too" placeholder="too" change="updateHidden()"></field:text>

<script type="text/ng-template" id="/tpl.html">
<div class="control-group">
   <label class="control-label" for="{{id}}">{{label}}</label>
   <div class="controls">
      <input ng-change="change()" type="text" id="{{id}}" placeholder="{{placeholder}}" 
      ng-model="model">
   </div>
</div>
</script>

directive('fieldText',function(){
  return {
    restrict:'E',
    templateUrl:'/tpl.html',
    scope:{change:'&',id:'@',model:'=',placeholder:'@',label:'@'}
  }
}) 
```

# ruby-on-rails - 嵌套属性不允许的参数

> ID：15919761
> 
> 赞同：128
> 
> 时间：2013-04-10T07:39:01.730
> 
> 标签：ruby-on-rails, ruby-on-rails-4

我有一个`Bill`对象，它有很多`Due`对象。该`Due`对象也属于一个`Person`。我想要一个可以在一个页面中创建`Bill`及其子项的表单。`Dues`我正在尝试使用嵌套属性创建一个表单，类似于[这个 Railscast](http://railscasts.com/episodes/196-nested-model-form-part-1)中的那些。

相关代码如下：

**到期.rb**

```
class Due < ActiveRecord::Base
    belongs_to :person
    belongs_to :bill
end 
```

**账单.rb**

```
class Bill < ActiveRecord::Base
    has_many :dues, :dependent => :destroy 
    accepts_nested_attributes_for :dues, :allow_destroy => true
end 
```

**bills_controller.rb**

```
 # GET /bills/new
  def new
      @bill = Bill.new
      3.times { @bill.dues.build }
  end 
```

**账单/_form.html.erb**

```
 <%= form_for(@bill) do |f| %>
    <div class="field">
        <%= f.label :company %><br />
        <%= f.text_field :company %>
    </div>
    <div class="field">
        <%= f.label :month %><br />
        <%= f.text_field :month %>
    </div>
    <div class="field">
        <%= f.label :year %><br />
        <%= f.number_field :year %>
    </div>
    <div class="actions">
        <%= f.submit %>
    </div>
    <%= f.fields_for :dues do |builder| %>
        <%= render 'due_fields', :f => builder %>
    <% end %>
  <% end %> 
```

**账单/_due_fields.html.erb**

```
<div>
    <%= f.label :amount, "Amount" %>        
    <%= f.text_field :amount %>
    <br>
    <%= f.label :person_id, "Renter" %>
    <%= f.text_field :person_id %>
</div> 
```

**更新 bills_controller.rb** 这行得通！

```
def bill_params 
  params
  .require(:bill)
  .permit(:company, :month, :year, dues_attributes: [:amount, :person_id]) 
end 
```

正确的字段在页面上呈现（尽管还没有下拉菜单`Person`）并且提交成功。但是，没有一个孩子的会费被保存到数据库中，并且在服务器日志中抛出了一个错误：

```
Unpermitted parameters: dues_attributes 
```

就在错误之前，日志显示如下：

```
Started POST "/bills" for 127.0.0.1 at 2013-04-10 00:16:37 -0700
Processing by BillsController#create as HTML<br>
Parameters: {"utf8"=>"✓", 
"authenticity_token"=>"ipxBOLOjx68fwvfmsMG3FecV/q/hPqUHsluBCPN2BeU=",
 "bill"=>{"company"=>"Comcast", "month"=>"April ", 
"year"=>"2013", "dues_attributes"=>{
"0"=>{"amount"=>"30", "person_id"=>"1"}, 
"1"=>{"amount"=>"30", "person_id"=>"2"},
 "2"=>{"amount"=>"30", "person_id"=>"3"}}}, "commit"=>"Create Bill"} 
```

Rails 4 有什么变化吗？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-04-10T08:20:27.747

似乎属性保护的处理发生了变化，现在您必须将控制器中的参数列入白名单（而不是模型中的 attr_accessible），因为以前的可选 gem strong_parameters 已成为 Rails 核心的一部分。

这应该看起来像这样：

```
class PeopleController < ActionController::Base
  def create
    Person.create(person_params)
  end

private
  def person_params
    params.require(:person).permit(:name, :age)
  end
end 
```

所以`params.require(:model).permit(:fields)`会被使用

对于嵌套属性，例如

```
params.require(:person).permit(:name, :age, pets_attributes: [:id, :name, :category]) 
```

可以在[Ruby edge API 文档](http://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html)和[github 上的 strong_parameters](https://github.com/rails/strong_parameters)或[此处找到更多详细信息](http://rubysource.com/rails-4-quick-look-strong-parameters/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-24T02:43:58.573

从文档

```
To whitelist an entire hash of parameters, the permit! method can be used

params.require(:log_entry).permit! 
```

嵌套属性采用哈希的形式。在我的应用程序中，我有一个 Question.rb 模型接受 Answer.rb 模型的嵌套属性（用户为他创建的问题创建答案选择）。在 questions_controller 中，我这样做

```
 def question_params

      params.require(:question).permit!

  end 
```

问题哈希中的所有内容都是允许的，包括嵌套的答案属性。如果嵌套属性采用数组的形式，这也适用。

话虽如此，我想知道这种方法是否存在安全问题，因为它基本上允许散列内的任何内容而没有具体说明它是什么，这似乎与强参数的目的背道而驰。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-08-14T10:54:41.307

或者你可以简单地使用

```
def question_params

  params.require(:question).permit(team_ids: [])

end 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-09-25T20:56:30.630

实际上有一种方法可以将所有嵌套参数列入白名单。

```
params.require(:widget).permit(:name, :description).tap do |whitelisted|
  whitelisted[:position] = params[:widget][:position]
  whitelisted[:properties] = params[:widget][:properties]
end 
```

与其他解决方案相比，此方法具有优势。**它允许允许深度嵌套的参数。**

而其他解决方案如：

```
params.require(:person).permit(:name, :age, pets_attributes: [:id, :name, :category]) 
```

不。

* * *

来源：

[https://github.com/rails/rails/issues/9454#issuecomment-14167664](https://github.com/rails/rails/issues/9454#issuecomment-14167664)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-09-19T16:21:32.133

今天我遇到了同样的问题，在使用 rails 4 时，我可以通过将 fields_for 构造为：

```
<%= f.select :tag_ids, Tag.all.collect {|t| [t.name, t.id]}, {}, :multiple => true %> 
```

然后在我的控制器中，我有我的强大参数：

```
private
def post_params
    params.require(:post).permit(:id, :title, :content, :publish, tag_ids: [])
end 
```

所有作品！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-16T16:34:27.287

如果使用 JSONB 字段，则必须使用 .to_json (ROR) 将其转换为 JSON

# ruby-on-rails - 如何使用 gem 修复重复的模型名称

> ID：15919762
> 
> 赞同：4
> 
> 时间：2013-04-10T07:39:02.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我尝试在我的 Rails 应用程序中使用[ging/mailboxer的 gem。](https://github.com/ging/mailboxer)在 gem 中，模型中使用了“Receipt”类。但是我已经在我的应用程序中使用了“Receipt”类。

在这种情况下，模型和表名是重复的。那么修复重复模型名称的最佳方法是什么？

我认为以下：

*   Way1：重命名gem中的模型/表名
*   Way2：在我的应用程序中重命名模型/表名

我没有找到任何采用 Way1 的线索。

如果我采用 Way2，我将在整个应用程序中重命名表名，然后重命名模型名。如果可能的话，我想避免这种方式，因为我已经在很多地方使用了“收据”。

我必须采用Way2，还是有其他修复重复型号名称的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:43:58.153

正如您所说，由于它们是 ActiveRecord 类，因此它们具有相同的表，并且它们将在您的应用程序的命名空间中发生冲突。

您可以使用模块来避免名称类冲突，或者您可以更新 gem 或您的代码以使用不同的类名称。

如果您选择将类放在模块中，对于数据库中的表，您可以使用[set_table_name](http://apidock.com/rails/ActiveRecord/Base/set_table_name/class)为该类使用不同的名称，而不是 ActiveRecord 期望的默认名称。

# c# - 仅在特定页面上发出警告（单击返回、菜单、按钮）

> ID：15919767
> 
> 赞同：0
> 
> 时间：2013-04-10T07:39:16.350
> 
> 标签：c#, javascript, jquery, asp.net, warnings

我有个问题。在 Web 应用程序中，管理员（我的客户）可以在其中编辑订单。他想要一个警告，以防止失去工作。如果您点击： - 按钮（保存，WorkOrder，DeliveryNote..）
- 在左侧菜单上（我使用 Master.page） - 在资源管理器按钮上返回..

我只能在那个管理页面中使用 window.onbeforeunload() 来做到这一点，称之为表单母版页。

但问题是它只为所有相同的移动返回默认的资源管理器消息。

顺便说一句，这不好，因为在按钮保存时会询问您“是否确定要离开页面”，在其他情况下可以。只有保存不是。

我在单个按钮上放置了自定义警告，但我不能在菜单中，因为我只想以特定形式显示警告。

我正在考虑在另一个母版页上做，只针对那个页面......

你有什么想法，如何处理这个？

谢谢大佬：）

编辑：

我想，对不起

```
jQuery(document).ready(function () {
        jQuery('.change-control').change(function () {
              jQuery('td#Menu a, .button.report').click(function (e) {
                 if (confirm('Warning, unsaved order changes will be lost!')) {
                  }
                  else {
                     e.preventDefault();
                  }
            });
        });
    }); 
```

问题仍然存在如何将警告添加到单击资源管理器后退按钮？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:33:51.420

> 我在单个按钮上放置了自定义警告，但我不能在菜单中，因为我只想以特定形式显示警告。

如何让您的 javascript 函数查看当前浏览器页面（使用“ [window.location](http://www.w3schools.com/js/js_window_location.asp) ”对象）以显示来自菜单项点击的消息，仅在您位于特定表单页面的位置？可以工作，但要注意页面重命名......

# ios - iOS 前缀文件：包括 NSManagedObjects（Core Data 生成的类）

> ID：15919768
> 
> 赞同：2
> 
> 时间：2013-04-10T07:39:16.920
> 
> 标签：ios, objective-c, core-data

最近，我与某人讨论何时将 NSManagedObjects 包含到 iOS 前缀文件 (.pch) 中

我这样做是因为它会加快开发时间（例如，语法完成适用于所有模型名称等，构建时间会更快一些）

目前我们有大约 70 个不同的表（因此有大约 70 个不同的 NSManagedObject 类）。我制作了一个 shell 脚本来列出这些文件并创建一个名为 AllModels.h 的头文件来导入这些表。然后我将其作为#import 包含在 pch 文件中。所以现在，我们可以使用整个项目中的所有表。

他说我们不能再这样做了，因为这是一种不好的做法，我不同意。我不知道我实际上是对还是错。在我看来，是的，我觉得是对的，但我试图在这里对这种情况有一个更大的了解，所以我想听听你们的意见，有什么更好的？将您需要的 NSManagedObject 包含在您正在处理的文件的标题中，还是将它们一次包含在 pch 文件中？

谢谢你的时间！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:51:49.017

阅读[http://qualitycoding.org/precompiled-headers/](http://qualitycoding.org/precompiled-headers/)

一般来说，我会说在那里包含 MOM 标头并没有错。

我会将这些东西包装在我自己的“PROJECT_MOMs.h”中，并将其包含在真正需要 MOM 的文件中的 pcm + 中，这样您可以获得速度但不要过于依赖 pch

# java - 正则表达式 grep 多行数据

> ID：15919773
> 
> 赞同：0
> 
> 时间：2013-04-10T07:39:34.003
> 
> 标签：java, regex

# 我有大量的文本数据，从中我可以到达特定的部分。具体部分如下图：

```
Caption = "Universal Plug and Play Device Host"
   CheckPoint = 0
   CreationClassName = "Win32_Service"
   Description = "Provides support to host Universal Plug and Play devices."
   DesktopInteract = FALSE
   DisplayName = "Universal Plug and Play Device Host"
   ErrorControl = "Normal"
   ExitCode = 1077
   Name = "upnphost"
   PathName = "C:\\WINDOWS\\system32\\svchost.exe -k LocalService"
   ProcessId = 0
   ServiceSpecificExitCode = 0
   ServiceType = "Share Process"
   Started = FALSE
   StartMode = "Disabled"
   StartName = "NT AUTHORITY\\LocalService"
   State = "Stopped"
   Status = "OK"
   SystemCreationClassName = "Win32_ComputerSystem"
   SystemName = "KYAKKALA-WXP"
   TagId = 0
   WaitHint = 0 
```

我需要将文本分开并存储成组。

我尝试使用以下正则表达式：

```
String REGEX ="(Caption)\\s=.*?(VMware USB.*)\"\\;\\n((?:(\\w+)\\s+=\\s+(.*)\\n)   {1,21}?)"; 
```

通过应用正则表达式，我进入 gp1“caption”、gp2“vmware usb 仲裁服务”、gp3“waithint”和 gp4“0”。我需要获取 21 行的所有数据，
但它只获取第一行和最后一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:19:15.743

您不能用一个正则表达式匹配任意数量的组。
您应该放弃多行匹配，并使用全局修饰符在每一行上使用您的正则表达式。然后你可以遍历结果。

......或者像Deepak Bala所说的那样使用属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:19:41.400

`*`似乎组号在, `+`or`{...}`语句中被覆盖。因此，当执行类似的操作时`(?:(...))*`，每场新比赛都会覆盖第 1 组，因此，在打印第 1 组时，您只会看到最后一场比赛。

但是，您可以执行以下操作：（根据您的需要更改）

```
String str = "Caption = \"Universal Plug and Play Device Host\"\n"+
  "  CheckPoint = 0\n"+
  "  CreationClassName = \"Win32_Service\"\n"+
  "  Description = \"Provides support to host Universal Plug and Play devices\"";

String regex = "(?:^|\n)\\s*(\\w*)\\s*=\\s*(.*?)(?=\r?\n|$)";

Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(str);
while (m.find()) {
   System.out.println("Name = " + m.group(1));
   System.out.println("Value = " + m.group(2));
} 
```

这将打印：

```
Name = Caption
Value = "Universal Plug and Play Device Host"
Name = CheckPoint
Value = 0
Name = CreationClassName
Value = "Win32_Service"
Name = Description
Value = "Provides support to host Universal Plug and Play devices" 
```

# php - 如何在 php 中的聊天窗口中添加情绪

> ID：15919780
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:39:54.547
> 
> 标签：php

我正在开发简单的聊天应用程序，我想在聊天窗口中添加情绪（笑脸）。但我不知道该怎么做，谁能帮我

像这样

![在此处输入图像描述](https://i.stack.imgur.com/EleRO.jpg) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:44:43.270

尝试这个

```
 function Smilify(&$subject)
     {
     $smilies = array(
    ':|'  => 'mellow',
    ':-|' => 'mellow',
    ':-o' => 'ohmy',
    ':-O' => 'ohmy',
    ':o'  => 'ohmy',
    ':O'  => 'ohmy',
    ';)'  => 'wink',
    ';-)' => 'wink',
    ':p'  => 'tongue',
    ':-p' => 'tongue',
    ':P'  => 'tongue',
    ':-P' => 'tongue',
    ':D'  => 'biggrin',
    ':-D' => 'biggrin',
    '8)'  => 'cool',
    '8-)' => 'cool',
    ':)'  => 'smile',
    ':-)' => 'smile',
    ':('  => 'sad',
    ':-(' => 'sad',
);

$sizes = array(
    'biggrin' => 18,
    'cool' => 20,
    'haha' => 20,
    'mellow' => 20,
    'ohmy' => 20,
    'sad' => 20,
    'smile' => 18,
    'tongue' => 20,
    'wink' => 20,
);

$replace = array();
foreach ($smilies as $smiley => $imgName)
{
    $size = $sizes[$imgName];
    array_push($replace, '<img src="imgs/'.$imgName.'.gif" alt="'.$smiley.'"  
     width="'.$size.'" height="'.$size.'" />');
}
$subject = str_replace(array_keys($smilies), $replace, $subject);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:47:25.027

为“:-)”之类的表情符号创建一组代码，并具有一个转换数组，例如。

```
$smile_keys = array(':-)',...,...etc)
$smile_images = array('face1.jpg',...,...etc);

echo str_replace($smile_keys, $smile_images, $text); 
```

这是一种看起来相当简单的方法。

# jsf-2 - action="xyz" 和 action="#{bean.returnXyz}" 的导航差异

> ID：15919781
> 
> 赞同：1
> 
> 时间：2013-04-10T07:39:55.177
> 
> 标签：jsf-2, navigation, facelets

如何从 Facelet 页面导航

```
<p:commandLink action="xyz.xhtml"> 
```

或后备豆

```
<p:commandLink action="#{bean.redirect}"> 
```

```
public class Bean{
   public String redirect(){
       .....
       return "xyz.xhtml";
   }
 } 
```

彼此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:45:55.450

> *来自 xhtml 页面或支持 bean 的导航有何不同。*

没有区别。这两个示例都调用 POST 请求并指示 JSF 呈现与给定结果相关联的视图。支持 bean 方法的唯一优点是它允许您预先执行一些业务逻辑，甚至以编程方式控制结果值。

但是，如果您根本没有任何业务逻辑并且只想拥有指向另一个页面的幂等链接，那么使用*命令*链接实际上是一种不好的做法。使用 POST 进行页面到页面导航对用户和 SEO 都不友好。目标页面不可收藏（URL 仍然是提交 POST 表单的页面之一），也不可搜索机器人抓取（它使用 JavaScript 提交隐藏表单）。

您应该改用普通链接。

```
<h:link outcome="xyz.xhtml"> 
```

这会生成一个包含完整 URL 的 SEO 友好`<a>`元素，`href`并最终生成一个用户友好的可收藏 URL。

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink)
*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-make-url-reflect-the-current-page-and-not-the-previous-one/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:55:39.117

查看`p:commandLink` [此处](http://www.primefaces.org/docs/vdl/3.5/primefaces-p/commandLink.html)的文档，其中说明了以下`action`属性：

> *执行命令时要处理的方法表达式或字符串结果。*

现在，作为`action="xyz.xhtml"`返回字符串`xyz.xhtml`，您将被相应地重定向，并且`action="#{bean.redirect}"`再次返回时`xyz.xhtml`，您将根据返回的字符串再次重定向。

# c - 表达式必须有类类型错误

> ID：15919782
> 
> 赞同：2
> 
> 时间：2013-04-10T07:39:56.390
> 
> 标签：c

我正在做家庭作业，但我碰到了一堵砖墙。我想我有我需要的所有代码，我只需要让程序编译即可。任务的对象是

创建一个结构来保存学生姓名和平均成绩。该结构应包含名字、姓氏和整数平均成绩。

然后：

编写一个程序，它将执行以下操作：

> > 1.) 创建一个指向这些学生结构的指针数组。
> > 
> > 2.) 提示用户输入姓名和平均值。
> > 
> > 3.) 获得学生信息后，使用 malloc 提供内存来存储信息。
> > 
> > 4.) 将 malloc 返回的学生地址放入指针数组中。
> > 
> > 5.) 在用户表示没有更多学生之后：
> 
> 搜索输入的数据并找到最高和最低的平均成绩。
> 
> a) 打印最高等级的姓名和等级
> 
> b) 打印最低等级的名称和等级
> 
> c) 打印输入的所有成绩的平均值

这是我的代码：

```
#include "stdafx.h"
#include <string.h>
#include <stdlib.h>

#define SIZE 25

int enterStudents (int ePointArray[SIZE]);
void searchData (int *sPointArray, int *sHigh, int *sLow);
int calculateAvg (int, int *avgPointArray);
void printData (int, int *pHigh, int *pLow);

struct student
{
    char firstName[20];
    char lastName[20];
    int average;
};

int main()
{
    int pointArray[SIZE], high[3], low[3];
    int i = 0, studentCounter, avgGrade; 

    for (i = 0; i < SIZE; i++)
        pointArray[i] = 0;

    studentCounter = enterStudents(pointArray);

    searchData(pointArray, high, low);

    avgGrade = calculateAvg(studentCounter, pointArray);

    printData(avgGrade, high, low);

    return 0;
}

int enterStudents (int ePointArray[SIZE])
{
    char tempFname[20], tempLname[20], yesNo[2] = "y";
    int tempAvg, counter = 0;
    int *studPtr;

    struct student aStud={"\0", "\0", 0};

    while( counter < SIZE && strcmp(yesNo, "y")==0)
    {
        printf(" Enter first name: ");
        scanf("%s", tempFname);

        printf(" Enter last name: ");
        scanf("%s", tempLname);

        printf(" Enter grade average:");
        scanf("%d", tempAvg);

        strcpy(aStud.firstName, tempFname);
        strcpy(aStud.lastName, tempLname);
        aStud.average = tempAvg;

        studPtr = malloc(sizeof(struct student));

        ePointArray[counter] = *studPtr;

        counter++;

        printf("/n");
        printf(" Do you have more students? yes or no:");
        scanf("%s", yesNo);
    }

    return counter;

}

void searchData (int sPointArray[SIZE], int sHigh[3], int sLow[3])
{
    int searchCounter = 0;

    while( searchCounter = 0)
    {
        if( *sPointArray[searchCounter].average > *sPointArray[searchCounter+1].average)
        {
            sHigh[0] = &sPointArray[searchCounter].firstName;
            sHigh[1] = &sPointArray[searchCounter].lastName;
            sHigh[2] = &sPointArray[searchCounter].average;
        }

        if( *sPointArray[searchCounter].average < *sPointArray[searchCounter+1].average)
        {
            sLow[0] = &sPointArray[searchCounter].firstName;
            sLow[1] = &sPointArray[searchCounter].lastName;
            sLow[3] = &sPointArray[searchCounter].average;
        }

        searchCounter++;
    }

}

int calculateAvg( int totalStudents, int avgPointArray[SIZE])
{
    int sum = 0;
    int avgCounter;
    double overallAvg;

    for( avgCounter = 0; avgCounter < totalStudents; avgCounter++)
        sum = sum + *avgPointArray[avgCounter].average;

    overallAvg = sum/totalStudents;

    return overallAvg;
}

void printData (int pAverage, int pHigh[3], int pLow[3])
{
    printf(" Highest Grade: %s %s %d", pHigh[0], pHigh[1], pHigh[3]);
    printf("/n");
    printf(" Lowest Grade: %s %s %d", pLow[0], pLow[2], pLow[3]);
    printf("/n");
    printf(" Average Grade: %d",pAverage);

} 
```

主要问题来自 searchData 函数。在 if 语句中，*sPointArray 和 &sPointArray 的每次出现都带有红色下划线，错误显示为

```
 "Error: expression must have class type" 
```

同样的事情也发生在 for 循环中带有 *avgPointArray 的 calculateAvg 函数中。我知道这个错误对于noobie C程序员（即我自己）来说是一个相当普遍的问题，并且它通常与将代码编写为函数而不是语句或类似的东西有关，但我不能一辈子我发现我哪里出错了。任何帮助将不胜感激。我在这方面工作了很长时间，我的视力变得模糊。

此外，对于任何在两秒钟内解决此问题并希望证明我是一个真正的白痴的人，enterStudents 函数中有一个错误，它显示 StudPtr = malloc(sizeof...)。错误显示在分配符号下并说

`"Error: a value of type "void*" cannot be assigned to an entity of type "int*".`

我在理论上理解这个概念，但是对于如何解决它的一些建议将不胜感激。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:42:49.127

您将 声明`sPointArray`为整数数组，但将其用作结构数组。

# c++ - 六边形网格上 2 个六边形之间的距离

> ID：15919783
> 
> 赞同：13
> 
> 时间：2013-04-10T07:39:58.577
> 
> 标签：c++, algorithm, distance, hexagonal-tiles

我有一个六边形网格：

![六边形网格](https://i.stack.imgur.com/YFprk.png)

使用模板类型坐标 T。如何计算两个六边形之间的距离？

例如：

距离（（3,3），（5,5））= 3

距离（（1,2），（1,4））= 2

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T13:14:59.630

首先应用变换 (y, x) |-> (u, v) = (x, y + floor(x / 2))。

现在面部邻接看起来像

```
 0 1 2 3
0*-*-*-*
 |\|\|\|
1*-*-*-*
 |\|\|\|
2*-*-*-* 
```

设点为 (u1, v1) 和 (u2, v2)。令 du = u2 - u1 和 dv = v2 - v1。距离是

```
if du and dv have the same sign: max(|du|, |dv|), by using the diagonals
if du and dv have different signs: |du| + |dv|, because the diagonals are unproductive 
```

在 Python 中：

```
def dist(p1, p2):
    y1, x1 = p1
    y2, x2 = p2
    du = x2 - x1
    dv = (y2 + x2 // 2) - (y1 + x1 // 2)
    return max(abs(du), abs(dv)) if ((du >= 0 and dv >= 0) or (du < 0 and dv < 0)) else abs(du) + abs(dv) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T14:33:16.660

在我看到我的一篇博客文章后在这里发帖，这里的另一个答案获得了推荐流量。它被否决了，这是正确的，因为它不正确；但这是对我帖子中提出的解决方案的错误描述。

您的“波浪形”轴 - 就您的 x 坐标每隔一行移位而言 - 将导致您在尝试确定距离或稍后进行寻路时遇到各种头痛，如果这是为了某种游戏的话。六边形网格自然适合三个轴，六边形的“方形”网格最好有一些负坐标，这样可以更简单地计算距离。

这是一个映射出 (x,y) 的网格，x 向右下方增加，y 向上增加。

![两个坐标和三个轴重叠的六边形网格](https://i.stack.imgur.com/b3Y0k.gif)

通过理顺事情，第三个轴变得显而易见。

![三坐标三轴叠加的六边形网格](https://i.stack.imgur.com/rG39V.gif)

巧妙的是，三个坐标相互关联——所有三个坐标的总和始终为 0。

有了这样一个一致的坐标系，任意两个六边形之间的原子距离就是三个坐标之间的最大变化，或者：

```
d = max( abs(x1 - x2), abs(y1 -y2), abs( (-x1 + -y1) - (-x2 + -y2) ) 
```

很简单。但是你必须先修复你的网格！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T11:07:50.973

这是 a 所做的：

以一个单元格为中心（如果选择 很容易看出`0,0`），远处的单元格`dY`形成一个大六边形（带有“半径” `dY`）。这个六边形的一个顶点是`(dY2,dY).`If `dX<=dY2`the path is a zig-zag to the ram of the big hexagon with a distance `dY`。如果不是，则路径是顶点的“对角线”，加上从顶点到第二个单元格的垂直路径，以及添加`dX-dY2`单元格。

也许更好理解：led：

```
dX = abs(x1 - x2);
dY = abs(y1 - y2);
dY2= floor((abs(y1 - y2) +  (y1+1)%2  ) / 2); 
```

然后：

```
 d = d((x1,y1),(x2,y2)) 
   = dX < dY2 ? dY : dY + dX-dY2 + y1%2 * dY%2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T12:35:09.563

首先，您需要将坐标转换为“数学”坐标系。每两列在 y 方向上移动坐标 1 个单位。“数学”坐标 (s, t) 可以从您的坐标 (u,v) 计算如下：

s = u + floor(v/2) t = v

如果将六边形的一侧称为 a，则坐标系的基向量为 (0, -sqrt(3)a) 和 (3a/2, sqrt(3)a/2)。要找到点之间的最小距离，您需要计算坐标系中的曼哈顿距离，由 |s1-s2|+|t1-t2| 给出 其中 s 和 t 是系统中的坐标。曼哈顿距离仅涵盖在您的基本向量方向上的行走，因此它仅涵盖这样的行走：|/ 但不包括这样的行走：|\。您需要将向量转换为具有基向量 (0, -sqrt(3)a) 和 (3a/2, -sqrt(3)a/2) 的另一个坐标系。该系统中的坐标由 s'=st 和 t'=t 给出，因此该坐标系中的曼哈顿距离由 |s1'-s2'|+|t1'-t2'| 给出。您要查找的距离是两个计算出的曼哈顿距离中的最小值。您的代码如下所示：

```
struct point
{
  int u;
  int v;
}

int dist(point const & p, point const & q)
{
  int const ps = p.u + (p.v / 2); // integer division!
  int const pt = p.v;
  int const qs = q.u + (q.v / 2);
  int const qt = q.v;
  int const dist1 = abs(ps - qs) + abs(pt - qt);
  int const dist2 = abs((ps - pt) - (qs - qt)) + abs(pt - qt);
  return std::min(dist1, dist2);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T08:46:16.447

距离的正确显式公式以及您的坐标系由下式给出：

```
d((x1,y1),(x2,y2)) = max( abs(x1 - x2), 
                          abs((y1 + floor(x1/2)) - (y2 + floor(x2/2)))
                        ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-06T10:44:03.323

(odd-r)(没有 z，只有 x,y)

我在上面的实现中看到了一些问题。抱歉，我没有全部检查，但是。但也许我的解决方案会对某人有所帮助，也许这是一个糟糕且未优化的解决方案。

主要思想是先对角线，然后是水平线。但为此我们需要注意：

1) 例如，我们有 0;3 (x1=0;y1=3) 并且要转到 y2=6，我们可以在 6 步内处理每个点 (0-6;6) 所以： 0-left_border , 6 -right_border

2）计算一些偏移量

```
#include <iostream>
#include <cmath>

int main()
{
    //while(true){
    int x1,y1,x2,y2;
    std::cin>>x1>>y1;
    std::cin>>x2>>y2;
    int diff_y=y2-y1; //only up-> bottom no need abs
    int left_x,right_x;
    int path;

    if( y1>y2 ) { // if Down->Up  then swap
        int temp_y=y1;
        y1=y2;
        y2=temp_y;
        //
        int temp_x=x1;
        x1=x2;
        x2=temp_x;
    }                   // so now we have Up->Down

        // Note that it's odd-r horizontal layout
        //OF - Offset Line  (y%2==1)
        //NOF -Not Offset Line (y%2==0)
    if( y1%2==1 && y2%2==0 ){ //OF ->NOF
        left_x = x1 - ( (y2 - y1 + 1)/2 -1 );  //UP->DOWN no need abs
        right_x = x1 + (y2 - y1 + 1)/2;  //UP->DOWN no need abs
    }
    else if( y1%2==0 && y2%2==1 ){ // OF->NOF
        left_x = x1 - (y2 - y1 + 1)/2;  //UP->DOWN no need abs
        right_x = x1 + ( (y2 - y1 + 1)/2 -1 );  //UP->DOWN no need abs

    }
    else{
        left_x = x1 - (y2 - y1 + 1)/2;  //UP->DOWN no need abs
        right_x = x1 + (y2 - y1 + 1)/2;  //UP->DOWN no need abs
    }
    /////////////////////////////////////////////////////////////
    if( x2>=left_x && x2<=right_x ){
        path = y2 - y1;
    }
    else {
        int min_1 = std::abs( left_x - x2 );
        int min_2 = std::abs( right_x - x2 );
        path = y2 - y1 + std::min(min_1, min_2);
    }
    std::cout<<"Path: "<<path<<"\n\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\n";
    //}

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-04-10T07:54:58.310

我相信您寻求的答案是：

```
d((x1,y1),(x2,y2))=max(abs(x1-x2),abs(y1-y2)); 
```

您可以在这里找到关于六边形网格坐标系/距离的一个很好的解释：

[http://keeekerdc.com/2011/03/hexagon-grids-coordinate-systems-and-distance-calculations/](http://keekerdc.com/2011/03/hexagon-grids-coordinate-systems-and-distance-calculations/)

# android - android:gravity 和 android:layout_gravity 有什么区别

> ID：15919789
> 
> 赞同：0
> 
> 时间：2013-04-10T07:40:16.977
> 
> 标签：android, android-layout

我正在开发一个简单的android应用程序，我需要在特定位置对齐一些视图，但不使用填充或常量整数值作为大小，我想使用重力属性来做到这一点，谁能告诉我什么是重力属性以及 android:gravity 和 android:layout_gravity 属性有什么区别。

并提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:41:42.273

`android:gravity`设置其使用的内容的重力`View`。设置或在其父
`android:layout_gravity`级中的重力。`View``Layout`

检查[https://stackoverflow.com/a/6819801/1434631](https://stackoverflow.com/a/6819801/1434631)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:41:35.090

```
android:gravity sets the gravity of the content of the View its used on.
android:layout_gravity sets the gravity of the View or Layout in its parent. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T07:48:49.817

**Gravity：**将指定视图内容的下车位置，这意味着如果您有一个`TextView`并且它的参数不是`wrap_content`两个维度，那么`Gravity`将确定该文本将触及哪个边界。

**Layout_Gravitiy：**这将指定视图在其父布局中的位置，这意味着如果您的布局更大，则其中的视图将决定此视图将触及此布局的哪个边界。

# iphone - 如何使用视差使背景在垂直方向上重复

> ID：15919793
> 
> 赞同：2
> 
> 时间：2013-04-10T07:40:26.037
> 
> 标签：iphone, cocos2d-iphone

我一直在寻找使背景在垂直方向重复但总是有一些闪烁..

我在护目镜和一些参考书上搜索了很多，但找不到正确的回复有很多正确的回复，用于水平方向的背景重复

```
 -(void) update:(ccTime)delta
  { 
      CCSprite* sprite;
      CCARRAY_FOREACH([spriteBatch children], sprite)
      {

        NSNumber* factor = [speedFactors objectAtIndex:sprite.zOrder];

        CGPoint pos = sprite.position;
        pos.y -= scrollSpeed * [factor floatValue] * (delta * 50);

        if (pos.y < -screenSize.height)
        {
            pos.y += (screenSize.height * 2) - 2;
        }

         sprite.position = pos;
        }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:49:35.090

每次都加载新背景？我强烈怀疑闪烁是由纹理中的加载时间引起的。您可以使用线程加载来避免闪烁。

[这是另一个有类似问题的问题。](https://stackoverflow.com/questions/12345556/cocos2d-continuously-scrolling-tile-based-game-strange-flash-only-in-device)

[Continuous-horizo​​ntal-scrolling-of-background-in-cocos2d](https://stackoverflow.com/questions/14932027/continuous-scrolling-of-background-in-cocos2d/14932464#14932464)：参考我的回答

连续垂直滚动：

```
 #define IS_IPAD (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
 #define MM_BG_SPEED_DUR       ( IS_IPAD ? (6.0f) : (2.0f) )

-(void)onEnter
{
    [super onEnter];
    [self initBackground];

    [self schedule: @selector(tick:)];
}

-(void)initBackground
{
   NSString *tex = @"BG/Background.png";//[self getThemeBG];

    mBG1 = [CCSprite spriteWithFile:tex];
    mBG1.position = ccp(s.width*0.5f,s.height*0.5f);
    [self addChild:mBG1 z:LAYER_BACKGROUND];

    mBG2 = [CCSprite spriteWithFile:tex];
    mBG2.position = ccp(s.width*0.5f,s.height*0.5f+mBG1.contentSize.Height);

    mBG2.flipY = true;
    [self addChild:mBG2 z:LAYER_BACKGROUND];

}

-(void)scrollBackground:(ccTime)dt
{
    CGSize s = [[CCDirector sharedDirector] winSize];

    CGPoint pos1 = mBG1.position;
    CGPoint pos2 = mBG2.position;

    pos1.y -= MM_BG_SPEED_DUR;
    pos2.y -= MM_BG_SPEED_DUR;

    if(pos1.y <=-(s.height*0.5f) )
    {
        pos1.y = pos2.y + mBG2.contentSize.height;
    }

    if(pos2.y <=-(s.height*0.5f) )
    {
          pos2.y = pos1.y + mBG1.contentSize.height;
    }

    mBG1.position = pos1;
    mBG2.position = pos2;

}

-(void)tick:(ccTime)dt
{
    [self scrollBackground:dt];
} 
```

# svn - 如何在颠覆中替换分支？

> ID：15919797
> 
> 赞同：1
> 
> 时间：2013-04-10T07:40:28.760
> 
> 标签：svn, tortoisesvn, branch, versioning

直到昨天我才使用分支，所以我不知道我应该把分支变成我们的树干。所以我分支了一个子文件夹，这导致了一些副作用，比如意外地将主干切换到分支......这导致用子文件夹覆盖主干并删除主干内的所有其他内容 = 破坏我的工作副本；/

现在，我想用我的工作副本覆盖这个有问题的分支。如何执行此操作？我正在使用乌龟 SVN。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T07:52:36.363

**It's easily possible via commandline:**
You can switch your working copy back to trunk with `svn switch TrunkURL` in your local repo.

Use `svn remove URL` to remove the branch, you then can recreate the branch with the right source. With `svn switch branchURL` you can switch your local copy to the newly created branch.

**With TortoiseSVN:**

*   Rightclick on your repo, go into the Tortoise-menu and select `Switch`. Select your trunk, you will then have your local repo back to trunk.
*   Go into the Tortoise SVN Repo browser, there locate your branch. Right click on it and remove it
*   Recreate the branch by rightclicking your trunk and selecting `Copy to...`
*   Switch your local repo with the `switch` command from the first point. This time just select the branch instead of trunk.

No worries, you won't lose any files stored in the SVN. Even your first branching-experiment will stay in there at a certain Revision.

# c# - WPF C# RightClicking 从绑定的 DataGrid 中排除行

> ID：15919798
> 
> 赞同：0
> 
> 时间：2013-04-10T07:40:32.897
> 
> 标签：c#, wpf, mvvm, binding, datagrid

我有一个将 ItemSource 绑定到集合的 DataGrid。我有一个对象，它代表 DataGrid 的 selectedItem，也绑定了。我希望更改元素的属性，该属性是 rightClicked。问题：当我右键单击一行时，在 MouseRightButtonUp 事件之后 selectedItem 得到更新，因此我无法访问单击的行。

有没有办法我仍然可以保留绑定模式？

# windows-runtime - 如何在 C++CX Windows 运行时组件中定义“输出”参数？

> ID：15919809
> 
> 赞同：6
> 
> 时间：2013-04-10T07:40:56.590
> 
> 标签：windows-runtime, c++-cx

在谷歌看来，这似乎是不可能的，但是：

如何在 C++/CX 'ref class' 中定义 'out' 参数？

如果您的回答是这不可能，请提供参考。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T19:48:57.673

任何类型的参数`T*`（其中`T`是 ABI 合法类型）都将被编译器视为输出参数，并在元数据中进行修饰。以下代码：

```
namespace TestMakePublic {
 public ref class Class1 sealed
 {
 public:
   void foo(int* out1, Object^* out2){}
 };
} 
```

在元数据中生成一个函数，如下所示（ildasm 输出）：

```
.method public hidebysig newslot virtual final 
        instance void  foo([out] int32& out1,
                           [out] object& out2) runtime managed
{
  .override TestMakePublic.__IClass1PublicNonVirtuals::foo
} // end of method Class1::foo 
```

请注意，WinRT 不***支持***“输入/输出”参数，因此 和 的值`out1`仅对`out2`从函数返回有效，***不能***作为`foo`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:49:23.110

它是 C# 特定的关键字，COM 在 IDL 语法中也有它。MSVC++ 中的等价物是 [out] 属性。

但是不，如果您尝试使用 C3115，编译器将拒绝它。请记住，您使用 C++/CX 语言扩展来编写其他语言使用的代码。总的来说，对 [out] 概念的支持非常差。C++、Javascript 或 .NET 语言（如 vb.net）都不支持它。您也可以在 C:\Program Files (x86)\Windows Kits\8.0\Include\WinRT 中的 .h 文件中看到这一点，这些文件是从具有 [out] 属性的同一目录中的 .idl 文件生成的。它被 midl 在 .h 文件中剥离。

无论如何都没关系，因为您的代码将在进程内使用，因此 [out] 能够优化参数值的编组并没有任何好处。只需一个简单的指针即可完成工作。然而，必须在 C# 代码中初始化参数值是不可避免的损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T17:34:13.077

您可以使用：

1.  `_Out_opt_`
2.  `_Out_`

但这些仅适用于私人、内部和受保护的成员 AFAIK。

# ios - 将非常长的 NSData 上传到服务器的正确方法是什么？

> ID：15919812
> 
> 赞同：0
> 
> 时间：2013-04-10T07:41:02.690
> 
> 标签：ios, nsurlconnection, nsdata

我正在将图像上传到服务器。NSData 的长度将取决于图像的大小。如果图像太大，NSData 长度将为 6798791（长度会有所不同）。如果图像很小，请求正在上传到服务器。如果请求太大（包含非常大的图像）请求没有被上传。以下是图像的请求格式。

```
<vaayoo:message xmlns:vaayoo="http://www.vaayoo.com<vaayoo:ostype>iphone</vaayoo:ostype><vaayoo:osversion>8</vaayoo:osversion><vaayoo:deviceid>354043043430851</vaayoo:deviceid><vaayoo:sku>lite</vaayoo:sku><vaayoo:xmlversion>1.0</vaayoo:xmlversion></vaayoo:header><vaayoo:vaayoodata xmlns:vaayoo="http://www.vaayoo.com/version2/yooml" datatype="content" mobiletid="8DD7A158-FC05-4588-B4D6-39D93F10E504" formname="frm_reportupload" streamid="A58BFEAF-E566-4ddc-842D-F8C5976FC300"><vaayoo:event type="control_click" name="btn_submit"><vaayoo:action type="form.asyncsubmit" url="http://content.vaayoo.com/AppsPlatForm/PhotoReportCreatorService/PhotoReportCreator.svc/PhotoreportResponse" asyncurl="http://content.vaayoo.com/AppsPlatForm/ConentUploadService/1_1/MyuploadService.svc/UploadData"/></vaayoo:event><vaayoo:data type="formdata" collection="true"><vaayoo:input name="img_0" type="image" filename="01262013035548648.jpg" currentchunk="18" totalchunk="18">VJpLnKnCzUkRBniTapLDOck81q6dqysPLl4ANZEod5Pl+Zc/d6Gq5Em4hsAdRg0+dyak0ZxpN+82aV8xYmQNu5wAelZkmZXGRUjySOFAycDmlJwMtx3qZS0aGmr7DPsciAYI2rz70qTMhBDfNnkelWbV9zHcd2Rj61ObEDeeFXGaty90qVrWRSfBwQmO/NIY2Bxn5e5JqRsKCTyW45oIGBu5B5qE2277hBaFV+WxI2D2xTHmXeSnJHU1OwjkU7idoHbrWfOCqZTjPercJNXbLi5XsSR3BdnLA7j0PtRNHuUOuA5NRRMwIQ4HHJqx8rbQDnHGa54q7bDkk9UyrE5DYJywOetWZ7nLkYLZ4yRxU4hjOcJlh1NIUk3Y2Db0Hc10L3naRN+XRsDcPlWHIxiprWUNEGPVjkiqiOIQyt1PUDrU8Z/d7lwR2BrKXYfK+VO5YdHdVKkb93QnFShdiBnHzE4zUEH77/WHLA529BU0m1PmPzA/Nz/KtYK8eVkadtSRopHjwTkEcdjVa5g2/vJGAVFq4LtNyknC4pk9uJhnqG9KrmcWuZmjmkldFUuGhG45BGd3Uj2qtH8rb87h2NPlDR5VRtTOAtNTEKBCMKTx7VUZRlFsvm59yR3xy7FgaSWYrFtiBU+tICsnyYJYH8KbIGMhOOhHFZOXLqyNL36ldoX8kM+EI5ODk/jUtndG33buQRxRkwKVlBRvQ07yvM2zcjHHSos5XsVK8hWbziPMcAdeBUEl1vj8tEyTxzU8qKDuUktjv0qtdnj5UC7fvEd6cG1p0QPRW7FdGEUh8zPy8D3qZxvVWVtvc81FCQ8vnE/KrA7etLCsqSErjYTk5rK/M79DCPdH5yzKZHJQnaT1I6VgakMXDovVTz+VeiX2mSWcok8o7c4ziuWv9LDTySBB83zE9zXfD3XzI6alTXU5iJWJzggikuVdIpcsQ2OBW4mniJkYjhztHfmq13D5m/5VO04BJrrhecryOhVJKjd9SlBJkYPClc9eelT4EqkdsAZqS2tSm7ABYjliOlTzWgEcjBSrEA/Kc8+tHN73KnoZKo4xbaKCW2WJ5z1PHWpbTEWQ2M88VbSPcDwSvQEetV2tX3HAJA64rJScVZMcbyXNAbwFKkDJ5pZEYINuQT/KpFjMWXU/d5+tLGPlDPkljuye30qVNye2p0XWjZGVjcOHyhx8uBwahsLTyIt4aRww4MhrS5mQqF+UHhwaVrR0t423jazEFT/MfpTUW99jWXO1aBniykmmYqy5UcJnrxQljLbq7SkSS9hV+3tn3hT9wg/ODzmra2ZJZSWIxjdWspxTsc3Opasz7YM0Ayo3jrzwfepPskbx4UAsc/N71dSx+yyeXglSAcd/SpIrdZZ3UELzwR2rKezsaympJRZUtdPRSzgcHoBTpbTy5AiZB43ZHTNasVuFbYcEnuOlWpIsbh5YKlcNu61x+2ctDnjG8uZPVHPC3YYBJ3bvvDtT7Gw8uLc3yopOSTWn9jG/cBx6UT2TNH5gx/srXTGonH2bJnU97mt7xBDBvDMvVGA571NNbI8gV1w3UYOKt2atgRuuWbB9s/Wpo4vtIEk0fl7SQAwxnBxUQqOLcTOq+WKTe5RMDW4G5jJjqTT4k87HGcDIA71eWLEoZkzEeo9qX7KYyWRBGc9+uKp2k3YuVTmiosyorcLKwXJwcse34Vcs7drlZGlBVkJByOvNX47Xy/mU7SOQasY3DBGDjt0rl5k12ZnCDi7mY1uXVnGQqjn2qV4C8QUDjqas78s6j7nQjtUgZYmRCpUt8o46mupVXblZrJc8WitATbgKF4JzuFErdcjcxHPrWtFbLg8D1qjcxiN1LJuXPOKzqcl0kYqHsloUmsnjcOjCReGXvVmWNXAdjyo57fpU0cLRzYHcZ46KO1Kw86UbMb1bBGOfrThFzerE5t2sVvsskh8xcHjCkcA0+WPyZCjL83GRWqPkXHccA9qqvAWuQw+YgYJPeoUXZc3QxmnFe6VvmiGduB60Qxm6nJPBA4OcVoy26yqgPG05PvVW6KCVV4BzwQK0UYpGjjJR5myE5C/MP9kH2qSOAuIyvAzlgf4qnZQ3ygb1PHvViKE7C2QADiqcJKNzthGM4OPUieFcgM30AGKcsO0ALyPWjy975K5btU6RH+9jipUOVXORSkm7dCIgCMkfu37kd6igtRjdhC397Gc1O9qJBhxuQ8HJqXYLePEafQAUJvl0OpKUkm2Qm3GRjke3rUPlkM+cg9DV6LLnKr8ynPNOW3LOT15y1TC8lZnPLW8YFX7MAQ3AJ5pYYRvLkAHOc96tLb7m3n0xg1aSFcZIHTpSkraMag+azehAp80e9PKKI3Vxk8YPpSx4U4A5x0p0hD4ABPc1oknFMvnVrFYtuKhCKm8vHTJb2p4tFjJ+bnHFIUkTLcjHXApTahqlc4pczY6JFXkgb+cmrMYOM9qVEjdCWbHrxTPJMuVPPpis1Fp2RraVkLMmSDjHbmqjZ5BbBqxMXBSJPrmk8vYwPQZzk1u5K6Q1VbbiugwkkgbcHFSlNyZxzmpSwAOFDbj1PpQQNu3cB3x6mpfxWixKLvZke8PwVHoDUnAHsKb8qfeFP2LJkfd7YrNrkd0dEZNLTVjJJCqbycNnse1IG3gZye9KtqWbBbI6c0vy7ljB+YcEmtfektWYNNtN7EPVsnk0hi3AsDgA81NiMfdO845yOhqLazMSQQc5NTTXM7di5JRdkW0VWt8jnPFMjVQW3D5c/rSK20cYPoCcVZTDQJtO5D8xx3rZRTujODsm0iFEEvLDNMYMxPYDgCrE0cgKk4VO3NCLmPHRgPvEZpcutzZTvexDIheMkDLngc1LYDbtDfeJIxSuG2ICAi5JzUgXDjAZSOhHWh2IUbO/QsFwcZHPeok5+6Nyq2W+hqa3jH3WOSeKSa28kkqdoxyc0NaWTMmpQd1sVzIZSQFK98mnum5UbaMgn8aeLYwxgAhy3J+lNnRpNnGNvpWKvF7msJdbBu+TcBz60iI2C6tnHUYo8hnAyOP51bZRFtwOcZxV2XNc0d225FMsVIwM47ilZJPtCc5C88etXhDhRJt5zmpYoi+HAAYdeOaJXcboxlK6SuZyLnggjdwGqUq0e0AZC1deHawXYFNLHAyvlh/WkpWQ3yxjbcrwxHJbHzkn6YqfYXVmA7cVcijEbHeNyMp7cg0iwbgWU7R3qXpqtwS5ld7mf9nbqB8vepVH2fD4yp6VbELEjaOlWPsDMPlXgDLA81N9NBSm1Gz3KJTzDmNckdQKmEDRkPImeeh71oW0B8obEGT97tmrBtH2KCPnPPPQVCbjKwQkpxdzDi/dztyRjnHarcVl50gyNpPRfWtWPThwxjxz96m+SsM6tuZju9MAU27v3Soy5Y36FZ7B7VU3cB+gzzT/ACg6nJyfrW1KplG7j5eQMZNQC2fcB5SsrjKyAEMP8aqnPR83QhSW1jKgsWuHCPthX1J61onS0ZNudxHGQOtSpZ7dq7uM8nGf0roYbFAgjCZIXjHaq5nIlOUlLSxziqyoI2Ro8gg++KfHaxlNzL8wHB9a6iTRi4BQDcVwdx5qvHoLrgMCw77eRWNryd3qTK9tGYcNl5aAqu5s/Nit3StL8tfMwC5NP+x7YyEyJc8elaVnC0EeX4Ncrcn7tyeSTsnsQ3Nn+7w2DjqKrnTotg4xWpgysSQST0xTprQNEMfKRW0eeMTeKUndr0MOTTlX5jye1JHbhyc/LxW7NCPLK4xxWa9u/wAqA4YnOfaiM+dWZz1o3rK2xXFpu+VQdtTRab8i4655q5awdcHLDtUsdu6zKATzyTWco9DerKMI+71G20O3KnHXFaMEGFOPvdqYkcbyrjgqck1PGzeYAOmetaqNmQ4xUU5DfsDjKsoyec1W+yjzNhzyOw4rcMbEZzx1PvUAVVLBiep6elU5OzSHGNnaJmLY8hQMY5+tD2gfGQc9PatXyzGNyHPsR2p8SfKc8A9BiplZQTb1NJ1FblRmrCqgJ36AGlFqI+iYbOKneCSJ95TgHIJpxduPQ96lrmsuhEG3K9tis8LR4GcKetWLW03ozgAkeoq6tsDtLL83YGtjTrD92GK7GJqoJWakiZSbbXU5iSJ0OUTPOD7Ur/uxnA3DtXXz6dA0Zw5Q9+OKxbqwi2EZ2v2I71vb3bNjpSs3FmApB35Xk5pI1XbyPatSKwGOBz60yazbYAy7Vzx61xLmlsQ6aabKENmBERjA9KUx7dkanjvVpI9+eCAvHPen+UrOXHB7Chy95HVdRgn1KiSHzMFSD0B9KtEZCouM45pVTGCeQT0NKE3lR05rWM0rktSXvLqJBA7SlQ2BnrjtUjDYzgAgdBWgluoIZW5708W4lwSOAaGoyiRa1l1KCJ+7PHU9aiNsyEyA7ieozWnJAzZOAq/3QaiUKMrt2noRVKmpLm7Gmid4syPtQRioXDAnPHWpVgBYSAAv61bltQ0ikLuGcZAp8Fvlm5wo6e9YqPMmy53exX81W3GReQOAKryI8sbSKDx2rWltNwyMFulNaFVg2sCDWluaXkTaSVrmOqttIDHGevvVyElCEZPm/vUNBsACjjPNSRwuW79OtN2XoYqT5bPoTrnnK7FHTnk1GYt8vyjg05Pug9farTRrGOMnJ/KsmudXBTcdtiGJ2icFSEz3roLGWOVDl9xx3rBkyCG7VZtLkQffkyT0GK0UrSSI5U7y6l27QRJuXv6UyDCZQAMQOaa0m8q55XPSq8SiFpQpJJOcn+VdFS0NV1Ki5RSSNCUL5aBRjPU1RmXn5uQepqyrmWPY3y4bIz3qG8PIXjArmUrXfQajJycplIoIgdzbh2FOguMSjsPSoLjduBweuflqMAmXcDz6VL2uiZNNG59uSTgccc8VmXF1HJEsecbSQRTYWKudzDFM8vdIzGIkN69aak76inzKN4ksTGQBcYCiklQxsCOuMe1OYOsaiMgDPenbXZQrgZ9jQr3vcLKyIJsyOrKcY6rTvtBijIJxz0x1/Gp1kW3ieNiGfqOKhkUmIYXeSemaHGTN4u2sRRNtQM/Ip0ZDxOx4bPHpTHIjtmJUbhUVpKpOXOz2rSL5Vclt3v1HeW64YHnPNLGcscrhgenc055/MdkTlNuSMe9QXAb+Bl45ya55ycpcp16tXLBzGVJGdx4xViKcp947WB71Wt8kBncZ9Kmd0K7WG7PShXV4tmErR96xpx3QKlfvHGajkMbplYw0ncniqEdw0L7R0xz71NvBUtn6AVvpZoXLzJtsJXVI2B6k44qE4gPIzn1pHmHO75mDY21NLEsxQg5U0pzcI+6jJ3VmV433ygH5V68VNJESpZSPzp3kKsoI69h60ke5mA28gk1z9L9SlJpFfY3pg9jUqSs0vllevBq4lq5Rml4I5XHcVX8w/e24OeGrdR05mTLdNFiIhDtOWPpVe6uSSgblu1OMTb2cfLmmzQtLsJyX7Va1ZMnPdDk/0bI2hwew60+Kcjp0HJOP5VB84wzvz0CgdqfFIQG2ADHQVMLfaLUvddy2riXfwc9jjrVfAdyR24IximNPt2qhIJ5JNSfafm6ZOOPespJ/I0UXsRqwQkkFsHI7VJPEFj9R2FQgM7Euf04p11cOxAYAfSuhRu9DJyu0OiiYxAhcBTjFXvNJidGO/nj2rPSbzHGeMc8cU+SdkY4Gc9xVTd5F+7KLbCV8nax+UdPaoFZmGWIOD0zTmZo8lvmJFPQJKqttGO+6jmjEvaKuRQxhsjdyeenGaqFSJGXGTmtdF+XAXPcYFRTW/myAfdI6053a1ISaVzNZCkWVGD3zUlqxkDjG0571K9lcfOSyld2B61CmUJHOQcGuVp8rt1NrOysy4zbfLZFy7feFWJJWjwpXaSOtZq3ChsDoT1NaKobhAc4kz0z1pRbS1MHDRqW4l3YhB5sa9Ryaoea8RXahYegrUedo42U9fQ1SJP3kXk8AVtfl0kipQc7DMiaUkcYGatxDiMtxyarzLudXIzgYGOtTqxGC4w5H51nF63REbR1ZJ57SLsdAuOBxTkuxgqvLj14FRSSbPmxk96rtjdlDyevvWttRykrJTJbsNIFUEZznfUEjCOMADcaZK8hddzbQOoqSMqdwC5I+b6U3JtWQrqUhlozb/RD0z1qS5ZmA2nAz1FOQgo3QntUQZTlOgx+IovHl97cU7rTqglAuiCX3MDkmrQcJGVGGbHINV4wE5GMAUSfJK7D5t3HtUczWkVqUpacoN5eQx5qKRFETnPXsafEvmBgcDHIqtcISchm3Z6dqF7ysXFTTfNsRL5SxHapDHg09/NNsDjHqarAfM+cxkZ47U6NyznkhehxULRcqGqd43Plq707zY2SWFipPNcRqfh14/NjToeRkdK9i1C2bcCyncR8wIrl9esQWUr1PU11q28uhrVkvaXWyPHpNKlw2RgghhjsfaqN7pznIkRY933TjrXoN7p+ZB0A/zzXN6paFidj4wcAt2qlV1uJrmi+U5u2jcRLE5IdCcnrn0pJIG3YAwcdvSttLZcgIcOOrEVFcWginKt9wDPSnSnz3FFtwSkjFa1CJuQbXJ6Doasw26pE2eG6MDV4x74yUzjqaq+SpkbsO56mjmu7kWcZNx2KD2od8EDdTmACqoTkcDir8kQQIuMsRk/0pxhYlcsEYDK7hkU4z9+7MKkna5lRwtId2NvYGrEflW8bCWLzJGOI2JJ2/0xWvb23lph8Mh5BFL9mVnBVEyvOGPf1p1ZuT0O1VpOmovcppZrHA3mgu+Mrt6j607yxCmCfvcFiOlWljd55PmO4YJ44x6VLPCs+0qOAOam99WW0rJJFDZ9pfcAVYfL+AoOnk3COFAyOc8Vq21qAccYxzkciiWNlZwcEKOD1yalJydr7mEoylFKJFEMubcjay/MD2NS6hE7J9/Yoxk/zp6BmkIZPlUAZI6VNLGZEAK5RcFRjms5xSnZLYFVs2rFIqiNvGcH8qFYMcDk+9XmtQqkj5c9wKjMG6FYWO45zk9fzquWKd+rM6jlJg8aqrccE8in3W5dhx8uN2cdKtxwjyShHG3AJoNv5o2yKVUDH3utKU4w91BU9+3MioE3MAfudc+tNeNmOQuCed2ev0rRWLnhfpSurnI6leRRbRSiX7KLsk9iogPkkBccfdzgUxgylAcAtk4HIFWYrUAMzZ3MalmtwcdCe1ClFXbLlNfZ3KW3zJAWAAUZA7N9amSeKFowykluARzzUqQJB94bgy4H9aktcsmGAIXjOOtW5Plb7mUHU+AcNgztBqt5bpuZu5IBzV1oiyodvBPOe1I6fNt2Fsd/Ss1Lew5XWqIokDQYzhgAOBVebfCyER5arpiHA3dTggdakkgCx+rDoK600rJE+84NMhUcHcKIodqttGfX1NTxYZdrcmrQjEaFsjk9KyV02maUY/ZZRaJ1x8uMjPWoVgJkAJHBzzVwuzZMmMdKGiVnSQ8EDj3q0ktbmEm5aETWvlOrg8n0oCSKj5UKO9WHlR4sDO7r7U/wAhjAEzyTnNV7S/usqV0nylSGMyZkOVPTBqVUYpkNgZ9KUIVYqfujrTol2DGcCspQcpeREdI2YsUZOC/wAx64okfdIzIOPTFSsQHAUZDe3SnSxGN93bHNNQcVa5vz8sbMq42Etzg8HFWYwIY89SxpSB8p5wTQyueMZAOT9Kt6RtFCp3vZBIVXbjnjnmk3s3GcZPp0p6IsYyBjvT1POcZNYyp8yvcGrtsZ9xRxg9M0scQz7kdamuYxtViCPwpsaspKMhXjg1pJJRTRz+zcmmiaONPKBbkdh3prBsBSOG9aSBsvycD+dTOfVtuDV8vQ61yvRlcZHy4x6inpuBbntxUuzoQN3pTokGWAX5xySaI2SuYSvHQrfxB2PI6DvQr5bDdDxVloS/zDjB+b1qsyL0JwPWk3F301CLS94eU+ZQPlx0qaGIy7gy4Knn2pi5nA+Xae1WbiViFBADDg4/Ss0/eHdW52RTL5ZBxn0NRsVLZ6D3qw1u8kayMeM4WlaBVT5+WrS6ejCTTV9iNMmI4Xn61Bwz7iMOORUkQKB8ZJJwalkhCxHC/MBkk81K10BJqnzNlTyT5jP2ByfepUZSCSM+h9acEMsY5wfyp0cTKCrgOfWpk7GTl71iJVWaTuBjGOtWFj8okDntx2pYrbcxYjP07CpntyjDbhz221UJK2hor9SPZ5y56Y4GKdGgTnqegqdYxEvAJGeeacYwDleueDTa5kK6TbRWaASYDDocnNOkTA4NWthbO8HGfvAU9bbdyQSM1ly+8jNS1syCGMqvualIEhweVH86uC02jIJLdMVH5IjRQeD/ADom7O0ROdvdZUMX735fujrmrMce1SSME8FOufcVPFCIhJkZ3LjIpkNs0mH9Dge1O/ctVHDRrQhMW/GRgYxmmmB2JwuOa00tWPGzPvVuO12Remf096HPsW6is0jLa2JXKDAHYHrTreMnCBc7h1JwRWpDZHZwDuz92kS0aOaMhBJk/OpyAB1zn1pJ6WI5P3al3GpprvDuZSpHY01bVmwo+XI5b0rWRGBOMvnoKuraCNA7L8/U1mpOzjYlNRlZ7GKLLEQXeWA6ZHOKT+z2ZWbb0Hp1rXWz81zKcgtjpU8tuUwBlQK1XLJaHUkkm0zC+wsdqptBx69auLayW5xjJ29+hrQFkvVc7s1pNCLhCqpkj86zu76HNzR1cjEGnyRxsXCknpjpU1vbvIMY74571vtZhbcZQDHQe1RW1qFk6c+lReUtR00qktDMa3kQAAEYHBpINNLKXZdxreFm8rMi8D0q3DZfICMAjtUaxegnJQlynNfYmB+UYJNXY0KRsvp781qyaeQjtn5wN20VXEQSMlo/mPGahzb1OucoxSaWplQWqm45BA65roLeFS0Uq9hyc9arCFdgLJjnPFW7aHOFDYroUpTS6HDJ3S1NOKFD0bIPNKItj7Uz+NSRwYcL+OfWrT2ZSIPnDZPWjlSbbIjrcx5o4hyTg5zio4p5Myblyo4AqzLCxYAjjuamtrJW+ZumfWpsn8Jt719BbCBvNDvyMdu3tVx7NdyF0x7GtS1toIQQQfMb5gQKLuNX2kksfyqZxtq2Qp2vdmK8ReRlI+Ue1V7iyjmwuCvHBFaE2csueKiiUybcLg/WsbSb901Uo62KMemCNlYOSferMEKiRieRV37MX3MDjmnwxLH5uU5I6Vb6mM481mtCksCM/AAXPOOtS2tmolYhh16Hoaktrbc+9eF71a+yYduOvIou1bQ35WrdhjqUATr1zTdg6lfm/pTmhLSBwMleD6inrubLSZHbmqjy3umZ80l77QiwmQsM4I6elS48raHGaVZAByoKkVF5jJ3JX+72pSaZtFRfvsR/mba5yhPQ1IlmSvygsq9PSolUMwGeT71oWs/7jHRR1NVHdJEzbfwEtvADKm7B/ve1azqUTKcrWbFA0SmTqW5BFSC7ZImY9emKuOruzOyScpblmSdWj3EDK8FT/OsiWPzZOBzmnsz8so7GqwZxhmJbByaVX4bIml8WgJvWWRWHzHtipxbAgljuOOatWqq6szDLnvRNsROSeepxUp8hvd811sZMyY3KignuCazJt8uA42c4+U81sXBAkIQAdzzVFoN5OPv+p6VhJ82qG7tWFiiBQIR0xg1IIY/NbBz6ipIoGVCp657U5YhE4C85/vUuZP3UVdxhdiKwUkknHtVuJ9wUqfmqFkGCNuMGq0ztEOOue3pWibv5EuPPG8jVCbWBI7c0z7MFVnzyx+8e1VluGEWAcvjvU32n92ikhj1JHrWyfVExir8xKpUqU9Dn6molIjZiB8o6j1pI2x3606RfMUkHGPzpVG3HlRlGblJ67EMjmN1wcrnnHanPC9wu4DKAVTffGGJyfrVlJ2MOzOT6VinbY6Je/djJY3t2CkHYOfrSys24hRntUm0yRfePtTYmAbacY6mr5XJpMbg0rIlaGLaoxyvpQncNnbQYpPlkBHSo2lfpng/nVPY5532CVgSqjoOhNRrjz+MDHPsaZPuIIVxn0pg4HXDCoVmV9r3tESwysjHnC5wATU0ZbzC5kJA/KomTcpZcDipI3PkRh1CnHNaN+0Wuhq7N2iS+ex3MzZLdM0x3LqS5HpxStIrKy4A45zTIIlKggnG7BpWdrnPKMlK/QmglQswKkY6H1qGZQGcr8vzfjVzyd0ROee1UrmAq27gHPrWajeWppJPRorrExZnXOAepqdJ25XkkjGTSHzHh8tnCrnpnrS2+zzAFwR0qpL3rMJO90uo5FJd0BG/GRU3zRxoR820/Nmobg7HDKMe461LuPlYBHPWiasF0naQjfv8AnbjvRjPsBU4mRYgGXkcZxTNy+WCvB61vFqCH8M9Cgc/OOSByKbLCbiMDIWTOOtWHZGlUkNgdQOhqGVVaYFWOKx1TtFFRTk3zAkksMPzRAnocVGSGfBzg4qZpyuQ/OR97v9KaimbtnHespLXmN1ZR5UydIldQAMeuauraRk4HPFZVtMfm469c1oWEx3gZ471as9jli273GTQYUvnCAHOKr+bsh2theckVsz2yPFuBwc54rJu4mMm/aAuelW4dtip1NkkAUMWOMMe9OhaSCQEMDnsajij6kj5SOPapcbgpXBNEU0vQuME0rsiJlLbpGG4fdIP+eatwuFYtgkkVVmjyVA+Y+tX7WRWXa6dOnvUKPMQ5qMrLYuo/nbRnD9Dj0qOSKKEkkgfyo+1AsUi+TPBcr0/xqrOro/Pzj+961qpWfLYVRw+yPuZUEQKkMD0xVcXBWEMDndwfaoZMZIA+lJ9leJEG0ufQGq5dfIinzJPl6jluHYkEDHrUy+WzF4znHLA+tQwopY7sn6nkUDCxEknbmsoq0ncSjJtO4POGkLgBSBgCnMpeRN3y7hwe2aim+78g5P6CiPAUbuWonytHRLmbJQJSp9VPJ7GlZt/VSwHpTYrpVyo5H1pzTmHeNnzd6zV4pNMFDm1kC4+ZunHC1EjNcSHgqO1N819y7lwP50SQSDDAn5+AAaV29WZezcnfoh08xPA5YcZFOeRltju5OOq1BtL42Hbg8/1pdshUyEgJnjPU1bsjSpCdlI29LugIFyu3PFTbVM298HPpWKhG0bWPB6Vah1LJCkcdOldEJLl0Ic2/dLN1GUjYnjHasuKLptQjGepq7eTl49gPfmqX2llJUNg56A1hK6kbxso+8NeMW8zrjehXd06HtU0Dvs8wsI4weRT1cny8rnHLE9xUUqJJJ6HqMfypcl3foZVJSikKZwjnd8xPqakidCuFG45yfSqrICxYrk9ajQMrbvM2g9q6FaaZTv0ZpRzhi+6MKc8c1KxEzsCuABw1VN6xgK42yNzmrfnZA5JAPfoaySvZpaGemz3IwyrLjbkN+VQzxASHDMQpydvGKun54cJhfQ4qizv5wDjk9SKpJ2E+WejK5VW3FjvOefpUa3TiRsrhT932qSeXnCpgE4ogTzFbcoAHSs6j5JX6Mi1tE9Qhk3TA52k8E9KVNksjH7oHHHeqslwMsFHCnmpYZlWRRkY9apKNrdyormabJDbvHu2cqevtTRiFGBO45zirLSJNuXO1QMjHc1QZAecnrz9KiLlezNZJ8zkSlwwATO7rxUSzZbJ4IamvKQu5R7Z7/wCeKrFiykj71Wou7bOiFtk7jpZS+RnPOahkl/dttPPpTC7ncBkBhzSFgEDMvA5+tZe9bQwcm4uMTz3U9LU4yBvA4xya4/U7RtzBkIYdiK9Lu40lXcRg9Aa5PXrXqR98HqeePrWam07MlKz1PL762VTK+0M3TFcxd2STElhsPt613mpwgh224GeQK5e+jAzxzXVo43R0a7x2OUurRraUEA7SckioXhaZpdw3IOV9615oHkn35GF6g9GHoagMSCU7flTHAXtRCU5K6Fzpe692ZPn7ASQRHyCEHP5d6iigDkzIrKjjhGXB/KtWe3KBZOB/EG96Vpd5+fkj7p9KIP7LRzuq7tdSisK85Tp7Un2cPkEquTkZ/lVtPMklZzwQOnamQqz3AXjrn1FdsoReiZpGkklchNru8uJScRNuIJ7kdvyp0MYEnK89vark0O994HXg0iDZE24c8YJrBJ7LoU7QViBl8qQtn5entmo12SRtIpIBOduOlXFUbM4GAOM96bImAdw4PoKtNxV2VzqSvfQgXeP3nYjBFWBAvDEZOODTSjDjGCDyDwauWyBYiXOFz8qnqaFJW5kcybi3qNaFZMgDBC1HkxhAxBbPOO5qdg33oz0PT1oktBNg45BoindtkxUr6htDKCRxiiSFXwuOD3HUUq/JhB/+qrAUKVBY5Iz9auUVbmNk18S3GLGGOwDAA6+tPMXPFSJEeuMmpQOuBk/WsuVS9Qd5ayIhH8pHQ1ALQQoCS2WJznkmrhhcAsDk1HJl229MdT6VhCM1LXY0UuTXuRDavJ6USDG3IyrDOcZxTzFtkKMOn5GpVXDEryCMfSunkVm0ccm5OxTkiZyAFDL064Iqe2jSNNuMkdKkEWGyWCn09aeiYbJG1scH0qIq8dTanJwnzMZvChcfL7elO2MBnoaNoHB5J6mpBIudrHHHFNRTj2NJVVbTqQvb4AZTnnmpAhYZI6GpBGVVg3rxQ4KbSxHWtlBReo9eW42OH5CVXdnrUgj82BWx74PUURlwTsyB04p6yOpYnkg1i466PcwpVXJu+hXaHDKSAeeQ3SlaMk8j2FP8xZ2ZcYP8qsFf3AwBuzjNEo8i7l3jNaFVYwD04xj8aTzNkgVsAkfL3qcHapHr1NL5Hm7X4OO9Vyc6UjT2ejs9iOG2Y7i33e1TNAgAIA4p5cvjtxz700qAPmX5a1+JkqcYq1isIiDnOecirXOwjG71oEW7DMeD1xTmDZUJnb0JHNZVJe9yiWiuRRlXDBxkjnB7UseedxJ9vWp1tv324HgDv3pHi2nj5jjnFOc2krDpqd20GwGPc3y8/WkSE/hTlU5HepFPykdPmoUug03K7kRvuZlRhkEYBJ6U/DMNhPzdPapBGGyc9BSoNp3Z6Hj3qJJyCMrpjIrVUl5bnHHoaGt0ZXOTuz39Ks7z5bKRkk8ewpJV4IU5cjiqTclqY2U9OobRtJDYA9Kidl8vIzlj8xqQW7mBySBt+Y0kUG/cxO1lGCvoamLdrI1k7tRI90kcYOAVPHJ5qDyweGq1cBwoyPlPQd/rSQ25PJ/EVppuyHTSbT6EsChV55PY0kqhVJKkH1zU0MIjcjeWxyNwqRghHP41g7v3kJyvBX2IYI2KD5sHqBSec8ymPAUDjpVqPAL8npgYpCFTOcDPfuTRu+Yz5eeyIA6xW6QsBt3VHIjNIqg4Srhs96gOCSDuDVKkWzjYDz3rbmsrx3Nmo3UFsUEi5QHjPAqUjJx1Pc1bns/tCqqAA56/1qePTwuAeCeM1jze9qOpBR0iV4FHlLgBTnkUoUiMuOJQe3etFrBFjVVHI7+tPS1+Vv73WlzRRbnyw5WjNZA+CAc9x2psFiTJ+8xtzWqtpIBkxkqBnA5NSJp5Kl1JXAztNUm+hi4XipFFbcKw25x6VYtYH3sdhIY4IA+6aupancNq+5x2q9HbkEBCcHnH/wBanKdtUROytczhavu2EYOeAajOmySuVVQW/vdgK6B7dHmLsmx34ODTGjMZfblsKTWUaid2NKE/eRjfZ0jkRGRmRT8xx2xVi2sf3RR3CjOScZP4VsR2ZaMYGDtp8dtGvy7cnr0ojUbXKzaSTkmZ8VgWmHlACI8nPUe9WRaRuSpB253Buxq/Dp4aPdt9ue1P+zlSAoBXHbtUc0k/Qh0ubXoUWtvs0Z2Dd+FMFqZ5yisqjGQTxxW19kbcMDtxSNpZSYbhlCMk1cpXvykuryfu4md9neL/AFeS3Tp2q3Z2PnSnfnaBkg1eEAQ4jPTpVyxgy2/oMH8aUJe6rhVgrqZmtZqMbRgVJAgbKsBt9xVyYMmMqNvrUxjURREYJ7miKu3c51JzldaIotYKShRACDzVyGERsR39av2tumxnB3etKLFFkBGSCc8c0k3quhvFJqxA0AcM3oMfWmR2ahgeR71qSWZ2BRwM5J9qSVvLGNhPocVCcV7rHCKjJ3KjMRPkgDI4NPhtzGoXO4+9Thll+UjpRIgzlCcihxbkjOKuuYrRwvIS3Q8ge9RS2+NyvyDxWnChYr6EdaayAMxzkqeKVW7VkjZaNoyFQgKpG5fWrCIiH7u89avpbNO+4IuGGMUot0hIUDlRgmnvYzhTupIuWvCq7DPcY7U538/DYwe9RMjqDtBC9OeKdbssUTeYcknGMVjzvYdOGjiloVpYQ3c8GrdmqlsFdvPGKBHHuIH3aktl2EnJAFbXbi2i4tOLb6GzFngE5IHanTmN12kbmHXiqiTN95TjtzT/ADdisozkitlK8LSOd05bvqUJ40UnjJp8Vp9zac96RjzudgPYirEW4qrbcmuZtxdkatKNgSHyycqWXHQnFU3gaZ22sVz/AA5rVcOYiEGC3c9qhntxE2UYsAOa0T0cSZNPdFC2WS3i+cd+laCygoJGTkVEycx8ZORWgYsMFPzBuCKfLdJNlOctFYqMucHYATz8veoHieMENnPXBq+tliXMZxjpzVaSR5HPBz0IIrLltK6IlLmS10KwTYGzkrTJhkdfcGtHam0kAEeh7VUWMGJgRhs8VbWhvFRg2kNjiSJQ7NyTgYHNWo1EaHGGJ60sNuJGAYZ44NW0tPlOMde1Q3YaclLmWw37W821M7VFMdkR8A7/AFzTLi3HITkDrTIbcKoYsc9cVSloYTUp3sSeXujaPd97Jye1RCBlJ/iHenh9hBPA9DVxJUcjJA9DWutkEXpqVoZmiz2ye/UiluJ4yxVm6ckCppYRnG/A61kSRBLlgWyTxnNZwa1Ui3ruOuFid2aPPSqUu8Ybknt6VOJAqHHA7mmO2Y/XnrWam4ysUtE0TwPuXc3SrHkLGQ8nz56ZNVYU3xl24RRmnxszcjp0y3TFVBPXQyd5e7YuDEjYPPY+lZssTHeo5I6Crqo+8fw0ksahWbqQOgq04o0d4/EZvzNIN57YNWLfHmggfJyBUE8kjAADGTyasLgFSDlccYpU/hbJSi7qLJfNzkJ1HU4pVldiuVAPemiTqq/K5GSaVFLMQWqoWV7ipxipbhcnfID93b1HrUCJg5z8metW/JQn/a71C8OSQTjnP1rP4Xax1u8o+Q95hwoOF9fSmoR867TuHOfX8aEAVSCCQP5UbiVB42n+XpRq5bmdSdmWreQzRAcA9DSXKCBTs5Yjk0kK5QOhCnPQ1PkyNhwOP1q0ly36malBaPqZxXcFJ7c1HKwXJOCTwKs3CCOTLNhSeCaobTInyjb6+poUVZtEKa5eUnDgBlY8DpzSrIoYB8nvUMMJ3A/qamaEb2IO8dqiV+bTY0cW3ZE6/PuO7j+7U1shd2DdM5wKoqNgHUDOTVy1n/ejaGatoK6auZVGuWz3Nm2gBIyD+NE+khwZMd+5qXTp0nJ3ZFXpsbMdhyCO9a01Z3ZDnd2Ryl/aKrkbfm6VBZoUkO7gYxWzqOJMgcN3z1rJJCSEhMH1NZTkm3cpuN7rclKDYwIwx6+1M8rYFJP0FN8/C/NyD1IHNPe487GP4elaRS5W2auKkkhScIT2HaqzSPjMOSP4qkneTYqvwG/iApYf3Z4bhuPrUKLvqJwilZdBfKYoXB2qeuKjcxh0jJKlunpU0soWRVbhfaldInO5hj+6c1Se5MFKlK7d7lPAd/LdtneggZEcblWzwadNGA5KYxnnFN8uPhiWBHdR0NYcu7Z0SfIr2HQSKkskbLuPdhVq3V9pKlQeoBqoLdtu4Y570+C5OSjDntVQSbsjkV+TmRopO4U7zz3HpUEm0TlH6n1pXmj3Mrn5tvX0qBWTcwY7yOhrXXlt2N4JPVlgqsEpYMGQ9qtxxRSgNGcg9RWU6iRGQ/KFO7PrVqxmG47OR0+lQ3aKuXFe/cSSAROTuwc8VpWVgj/Nyz45PpWdMw8zH6elXLG4EcqLuwPfvT5noohLlbuXXtQikjg+9VriQDbuHJ7VpeagjkZ0JB6//WrPuSAOVBAPHGDVS1WhzU5QctTKkX592asR+WjoykkdTmhkzncOKRSPKI2/Ssk9PeZopVFrHZjZVQSbu5pjhTgZ5xjFKjKJEU8t2FDKFlcselS46XBXeqK0imAggbge9EJU5LHLHmppPni2KM7qpmBonBXkgZNFO10mVUqSik1sTPEYyHVepzT0lDoQQfMY8sKYJWLASR7l9jSLujkfZ93PSiWtzFz13LVxNG7iM5O3g8d6iM+5dyn5B0FNSWNJEY/eB5qSe3GSw578U4xi0bKpdMj2kxOyjGR2oQmVAucKq/rQ27cAzMqdgOhpDE6nIxjOKqz5WmNSdlzMjkZkYAdNv65p8UpQ5zjPOaryT4lXcoYHjIp5XBx/CaztK2jIglzNslmmCvkMWcjmm28UeGLfe6571WjYNORglAetStIqEgcA1XkVq37xdJBX7xCqOR2qCKVSzc554pnJzj5QPXvToIQuSOSBnI70SfQiTlUasTrKYd2QCG45pPLjJUO20/TIqLe80mGPzD86l2AIVRie/Iq2+RqxMXKJNN5T8EgsPzqSB1IRSvtVWEtFuDjJJ4Yir0CJLj5ct2waUfdWppB8sXJljCgbACMVE4+Rn9BzVzyjIM7sEdQfSqt6p2gY/ckfPt610XtGwk4vXoZk6mNWUNuJHpVeMs2E5z3qS5wUkKMd38I7mmYIt8EEMRyay5VJLmFeLk7lVlDyOqEbc/nTXsipK79qd8mk2Hg4LMxwR/WpcupOUC8Y9c0rX0T0OiMdLEazSRfu1GUBwGPJIqxM3mSgr/qzxUKqfLIAJGfyqz5SrGC3BHes4JKW5nKUo35iC52wLlTjPAFUTK+ck/N2rS8xZSFVfbcarPCnnNmQFupNXUbc2uhgqltYIotcn7sjEn1FLJ80Qyu5N3WnXPlGQFV29snvVXzGUHyxtVqiDdmmb07yd2Yc+UlZM5UfnXOairEuCw9yx7Vu3TdXb7xrlr+Rpp2VwUTPTHUexrlaUXqXNJ7HM61Avmbk4UjmuT1CPMr47V2WqB2mCjp7jgfjXM3ykOwzyD2rrppchXNzR5WcsyF2ICkID0PU1TkTy3BVcD3rYul3XJOcL6VRubUPEJGJwOCfxq9E7roc0kpxd90QwgTDpweMVFNZqNysM1LEpjlxjbHjPFSb1LOQScjAroSa96JdP3orqVwvmQSIr+XJt2ocZwe1VjEY2UCPfFtxhTghx1/A1eC7A4bAOM5pkJ3y9t3Wo953kbT1asV4tzDEgGQOdnT3qUxKAFPC/wAJNSrFtPyjg9almj8xRG4zHjvWac1exV00VggLMmNxB5qaOzWN8sd3GRUMUYjkYnIZj+narDIzMpHbqO1VKd9DlnHkkmVxCS8hY7h157D0pwgJxuGfTNPZjuAAwB1FTqyycdT2FVCDjqzpsuXmXQaoWOIBunXJp2DjKVM8Y8iEkjcxP4U7y1WMYyw9TVPmk7IxbcpOLKCwebJggbvWp4o9uQ3BHT3p1uyiQ/xKDz7VZ2KW3dMmicnbXoTCHKtyvuK5Unj1FEIBLNvJY9PpUzW/HC5Q9Pajy1TJFC1sojtZ3DzHKFBwM85pGx5i5wOufelXk4xmpGgJzuH/ANatZ2cuWJV/d1GbS+FxuPf2p8qrCAoPz9frTo/kJOKbJ8zjcvUcmua7pvU52+R3HQrhsjA/CnH73zDnuKcqYTgjJII57Usm9l3bAMDApx5rXN3JPWRC6oUBUqwzk461F5AcqW4UVYUdFC7V6gY61LsBxxW8XaPvGTavddCuW6A0RQhwzA7s+vYVMkQZyvIOPTin58hCqLxu4qeZzaZSn7tpEW0bRyVIp2xcFifp9asmNQilyFfuo5xUMlvtzhyVPfHIpe63e5rRas00QPBjLj73pUm4yAAjGO3anZOOnB6YpsUbcl1IHUZPNLVtXZMk4SVg5cZI5qSFQhJxU0MYJ255659qeyf3uucU0lFWB827IZF3MCRhRnOOKcAJovLYkKe9WGj/AHZIAbsKitYc4BGVP6UQvrczg1GWuwxGG33/AENIf3W7Ax64NW/swj6kY7ZHNRSx7WwPmJOMn1pSjeV0aylZNojjR5FJJIA96FIhDgJvL9WJ4FSxISQpOB1O2rJgVEwvP1ptpJIm01HmTKXlt8pFPf7uDip4o847Yqy9nG5VwegqIN8w1pFlaKB16A4Zaa6BYyMY9TmtJQVAKjjuTUQtf3gcjcv3vrWjbk2Q23K0diBLMxKrEdqdCgjckLzj8q0Ps88xLKM+1HkdRxkjBwc1hG6epTaUkzNePMeBkqRyQaWOABBgZyeuea0zAMYyAucEUsdljhBgdlHWrlJ7g/iv1M8xM2APvdQafb23LM2eDjbir62MiS5LDngZq7HZMoGTgMOGFQve91hGTm2mZLWxUGTA54HrTIrEt94cHrWx/Z+1gCdw7GniDbIigDGck9sU3an7sTPl01M4WyqEWIcEc1KLdY0yw3en1rSe3jiRio4JyPWmtCFX5F3nPOayabehtCKvfoU4oVAwxwx6g9qfHZeYSXcbRzmr1pDHIpGz5u7HrT10+Qq6lT5f8L/4ipi2m0YvR2ZQS3OTuXLHoc4p8Vs83D5OBwV7fWtSK0Bwsg2tjORyDVq3tWSUFV+VTkr/AHq6btK7L5ly7mWLVYzhmdm/hGOp+tTi1wTwS68dODW1a22zL7cnnb6ikltndxtAwOSRWDS36HRJKdNSW6M5YWJDdcckUsto5haXlATx61ppZlxgNjcMMcVcEEnCHa/GKm7jP3Opye9L0Mi106NYsOA792Vs4q6liluNwUAn061a+xMG2xgIvc1aMBCBSMH1puM7tiTu+W2hRTTj5ivnK0LChmcdx29a1RavHjYNwI5PoaItN3MXY5qFflswe9ooomI87R2pbeLeSduGrRitN3TrvqaWDqirgg8+lQpciH7OTauyitsZBgcKT61JFbCPeFXA96uSWhRUyoUDk4PepkjMkZLDC59Kj2jm7dCpvkbXQqW8bPn5ON3Bq7EgC+WeTn7uM1KZlVQAO2Kmt48ygE7T1rquloTC01dFJNNO4DacNzSvA0bHjCjnHoK6KKAlA4HHQ56VQ1KEJNv3kEDGB3p8runLYHdQfKZiwhkyyZGeKVLURZwvyk5qzHJvKr5fQVYVGkQleNvrWfM232RitWkyCFFY905wcVYjhaKVBn5SeopFikExAXCY3Z9asxrvc7xjB4qdJXZ0JxV0tyz5CyKcnGeKrXUICgK3C9fWrTeXwOmKJIhLjbwe5rVR59WDU7GVFGoAZfmDc5pfsrbWbOVrRkijiXphu+KR5CYuIxjucVMnzRu+hpJcz5UZsUbttBYgVLEoST5uc1IuQzMVwpHAphRnO89OgrnjLlZb5YRSe5OOMgfLx2qBgGcLnnuTxVlTnAHIx1qC4th/F+lXrfQmF7PlJUXzZCJCwOcj0qRolduyA9M1FG24FGbgCpDCABubBX5gSaUmrDSlqNa1kTKnBXtjrVlY3ZWWRcI3RhUnlMvB5bvTmzEirnjqRWiaUeWSF7i2HKu7CDt3psjbZCPanQrjLHg9MUrFW5XqvWm7SVkZTqc2pDKoYkj5qs22WxuBOO1RvGixqd+SecYqxEpESFTnPpV+zd7Ic0r8245yd5wMZOeO1K0bJ6YI7nFOCsmGIz9aBIsn3+SDnNTJJaR3HGPOtdxohDOpXjFKkxic8bvWplIJJX5h2x1qa0tVnDY9ec1DlzJXCbco3iMs8yjdtx/dHepprQJDGeWb+LA/nV63t0t+AOvenTq0aZIIHtXQ7cxz+zuklsYLbUkxINwxVeVVyzBdozwAa0prPcSQRsPNZzrsJB7cCsZ31aKpxsudjYdySLz949a0lGzCg8YwT2NUI0DqjOcqOAPQ1J8wOC5KDpSjfls0aRldOwssckLDbtKnk1GInbO3nvS+azjByME4OOtWrXa4GDlsVa1V2RFSvuVpINuAwJqo+Ub3Fa14C2FUHkdaovEiRAHJIPU80Sk2tOguf3uXsQtcEng/LjqagkUMpOOozSshy244HUYpVfcCpwDisopM6lCM2Z8heMBxGXUnnPSrEBU84+U0eX8pUHjtS7BGiqtPR6LcyanB6CtIQGUPtT09atRAyoikFR3FURErMCWq/CzKM9R60ruMWS2rt3sWkIclerL0psa5Egb5QOfao0bDH5xn+dJI+cAnaT+tEPe2RDTluVLmEb2C46cVXit5FITOwY+U1dyJn2pjI61DLL5f7vdkg5FUpuOg4U0nzDhGykgNvbp9KG3RS7W64zxTFmOcqTk9aR98hBxkn+VHNHqCtFN9TUiiBjLA5kbpms6d/KYhhg5wTnOauWrMsau3GOMetVrtQ2QR8rng0XdipVOVaPcTcy/u8YHbFGfLSMHOO/0o8osyuG4zx7VOUcAFec0uWz3DmcistwCTsBAU4/wqV5CPnzhqLazMjFQNozk54qO4XYTtYtz0xxVOTuRKKSvIl2+fs3HjPWo2twuWx8tOUToVbAx6VPubaS+G9qVNNt3NlBJXZWZVmG1TsPSpTGVQjOM8VXmjDPuP8PIIqWOZTHzuz9KGmlcunezbJFtwM7vmDDGadGi28wbPIpVO0KSfoD0qcMhIUgbjzWkErKZk7VJXWxdswkZDjAVucZrQmuMwgKoJxkgmspYyo37go7DPSoGvSnzbu5JqnO+hySi/abkl5epyzDBXse9Zxm+0ZLDB6jFNnmW4nH7vdzySanKpGB8vNY3VrWNU+aWq2K6Mdv7xgTnipYwpySWB9qjlhSXbkY6g+1S7cDg7yBjOOtWpWdmi730JJI1807/3inlfQU2ZBFGgDe9WFxJB8oHp7iq1zBIGUgZUHnml7zluRd3VkM8tnjMhPFNeXp7Chohu3AkA/wAGabM67mx82MAins7Hbe7XYIm3sNq5XOOasFkWLCKHOc4PaqvmFOM7e5p6N5bA5IBGMjrSnfltEwlOycIimcsyAgKMYwKWJxgpsGP5UeUrEHPIp7LgEg8d6IyWncn3uW6J9ybMFQWzknrVUxhJhzgHgccUqs0A3MMxnjnpU3yMDu4HbHalJtPQ00+JFWQgbgA31pIup8s7SBTpQUb+VGDtLAZPetpWe4RqatsfwM87iRUywukkQOASM8mqkZZ5uF/djj8auREmQbhuHfvWPMua0Sakou5ufZ3+zqdxPt2qG4jk2AuBntVuG7LLtxx25pJgzfMx3J0+ldD8jhqOMWkZg+ZMkhQRmoeCGGPl9ae4fnPIzwKrSStGjDG4Z59awkl6nbGo7e9sNdEVhIOPrTJciUZO5CMinSEMq55GOlMs1Ik2uplBbjPpSje/vdTSUdFymjb2ybVbnpyKhFtxt6kcZrSVA5z91lPT1qT7NGxLk7F6fjWiSVmctSTjLkexgEvE4IXd81SrLztZcc5471au4GMhAPHQEVTnYRbVK5I6tS5VfQ2vdNxWgNaKwJHB60kdy/KYBwOeKazuwG0/JnOc9aglQjc/r2zSUnHVmcZNa2LwCTOiueevFJPnay8bQaobiH3qxBxwpNTSzloWGAWUZypquaN7s6YxVncrTokhC52kHPFSBh5zKxzhcikj/eZIPNDRrK6kghweOwNZ6sqTXK31K7y7ZMqDjH3RSy/OyHoD19RU7W6SL8jlSB1NVizAmMr0OMjvUuxipe8uYdcnY8TM2QeT61ahuAgyR8jDgDtWZdsyyRjGTnAqd5WhAbHy9D709Zajc002izHKs0hCqAR1qaCZwzcY5/Cq1uyGE4ypPcCh7sZ2DhDxVcu1yrJe8aNwPOCYOfYdqkjlfegjjJPcg9KrWxKRnzGwW4XHpVmNRnIJLVfKudpmEmlqbcBXYqjBZ+pz0qlfRXOWGEwp6g5yKjJMYDAFSe4qUaiJEc7cnBBPY1e5lzXlZGLcQKrIwJbcM88Gq8twWxEQSnvVu5mLyAP1zge1ZV022XYGxzwRzUp62Z0StJX2NBkWNgF4OM59KgLEvhj9G9ajE0e1v3jNJjaB0FTLNHJGFIzt/nUWSVkZxl3YkjtGqBTjk5pplzEFBy2eSaSWYgBwgaNjjk4qs0w8zPCqR0HIpe7G9zT4viLJnSKE4bLdaybskl5Eycnt1NMuLvDEDBX9aghuiW/uHtVW05kTb2istEOluPPUZG3jvUFq4ILFvkHy4p7fv3JJyajZBCCzD5OpA9ajnjJq25cocsk+x//Z</vaayoo:input><vaayoo:input name="txt_rpt_name" type="text" textmode="multiline">anil dairy</vaayoo:input></vaayoo:data></vaayoo:vaayoodata></vaayoo:message> 
```

以下是将数据写入服务器的方法。

```
-(BOOL)write:(NSData *)data toURI:(NSString *)URI
{
BOOL retVal = NO;
NSString* requestDataLengthString = [[NSString alloc] initWithFormat:@"%d", [data         length]];
NSLog(@"Data length is %@",requestDataLengthString);
NSLog(@"Urlis %@",URI);
NSRange range = [URI rangeOfString:@"http"];//Is http?  
if(range.location != NSNotFound) 
{   
    //Yes, http
    NSMutableURLRequest *httpRequest = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString:URI]];

    [httpRequest setHTTPMethod:@"POST"];
    [httpRequest setHTTPBody:data];

    [httpRequest setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
    [httpRequest setValue:requestDataLengthString forHTTPHeaderField:@"Content-Length"];

    NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:httpRequest delegate:self];

    [theConnection release];
    [httpRequest release];

    if (theConnection) 
    {
        receivedData=[[NSMutableData data] retain];
        retVal = YES;
    } 
    else 
    {                                            
        NSError *error = [NSError alloc];
        NSLog(@"Connection failed! Error - %@ %@",
            [error localizedDescription],
            [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
            [error release];

        retVal = NO;
    }

}                                            
return retVal; 
```

}

我在 Write 方法中做错了什么？它适用于小图像，但不适用于大图像，如果我尝试上传大图像，甚至不会出现任何异常。如何解决此问题。请帮帮我..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:17:56.857

您是否尝试过将异步上传与 NSURLConnection 委托一起使用？错误可能会出现在那里。您为网络服务使用什么语言？可能是您的网络服务器上的设置导致无法上传大图像。尝试查看服务器上设置的最大请求长度。如果它小于图像大小，那么它将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:49:18.367

使用 NSTimeoutInterval 并尝试其工作：

```
NSMutableURLRequest *request1 = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:1000.0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T10:27:59.347

而不是使用：

```
 [httpRequest setHTTPBody:data]; 
```

利用：

```
NSInputStream *stream = [[NSInputStream alloc] initWithFileAtPath:filePath];
request setHTTPBodyStream:stream]; 
```

苹果有一个[例子](http://developer.apple.com/library/ios/ipad/#samplecode/SimpleURLConnections/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009245-Intro-DontLinkElementID_2)。

# .net - Mono.Cecil 获取 TypeReference 的构造函数

> ID：15919813
> 
> 赞同：1
> 
> 时间：2013-04-10T07:41:03.957
> 
> 标签：.net, mono, mono.cecil

我正在尝试`List<Simple>`使用 Mono.Cecil 创建一个。我`TypeReference`对此有一个，但我无法产生正确的结果。

鉴于：

```
var listOfObjConstructor = this.ModuleDefinition.Import(listRef
    .Resolve().GetConstructors()
    .FirstOrDefault(c => (null == c.Parameters) || (0 >= c.Parameters.Count))); 
```

`listOfObjConstructor`是

```
System.Void System.Collections.Generic.List`1::.ctor() 
```

我试图制作的 IL 是为了

```
instance void class [mscorlib]System.Collections.Generic.List`1<class AssemblyToProcess.Simple>::.ctor() 
```

我需要做什么来创建正确类型的新列表对象？

# vba - vba宏使所有形状和图片与文本内联

> ID：15919815
> 
> 赞同：2
> 
> 时间：2013-04-10T07:41:20.157
> 
> 标签：vba, ms-word

我想编写一个宏，将我的word文档中的所有形状和图片转换为内联文本。我正在使用的代码将所有形状（由绘图工具编辑）转换为内联文本，但先前转换为图片（由图片工具编辑）或任何其他图片的表格不是将其包装为内联文本的文本. 粘贴我正在使用的代码

```
For Each oShp In ActiveDocument.Shapes
   oShp.Select
   Selection.ShapeRange.WrapFormat.Type = wdWrapInline
Next oShp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-04T15:29:44.007

第一个答案是一个好的开始，但有一个问题。For Each 迭代集合，但集合由 ConvertToInlineShape 更改。在其他语言中，这会引发集合已被修改的异常，在这里它只是静默停止。

为避免这种情况，您需要将每个形状添加到另一个集合并在那里对其进行迭代。或者在以下示例的情况下，只需手动跟踪索引。

```
Sub InlineAllImages()

    Dim Shape As Shape
    Dim Index As Integer: Index = 1
    ' Store the count as it will change each time.
    Dim NumberOfShapes As Integer: NumberOfShapes = Shapes.Count

    ' Break out if either all shapes have been checked or there are none left. 
    Do While Shapes.Count > 0 And Index < NumberOfShapes + 1

        With Shapes(Index)
            If .Type = msoPicture Then
                ' If the shape is a picture convert it to inline.
                ' It will be removed from the collection so don't increment the Index.
                .ConvertToInlineShape
            Else
                ' The shape is not a picture so increment the index (move to next shape).
                Index = Index + 1
            End If
        End With

    Loop

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T22:16:44.370

试一试

```
For Each oShp In ActiveDocument.Shapes
   oShp.Select
   Selection.ShapeRange.ConvertToInlineShape 
Next oShp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-16T17:46:49.117

For i = 1 To ActiveDocument.Shapes.Count ActiveDocument.Shapes(1).ConvertToInlineShape 'index 值为 1，因为每次转换时计数都会减少 Next

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T00:03:39.507

我认为选择每个迭代形状是不必要的，并且可能会妨碍。

任何仍然需要答案的人，这对我有用：

```
For Count = 1 To 2
    For Each oShp In ActiveDocument.Shapes
        oShp.ConvertToInlineShape
    Next oShp
Next Count 
```

外循环的第一次迭代处理图片，第二次迭代处理绘图对象。不要问为什么！

# c# - 在编译时获取属性名称

> ID：15919817
> 
> 赞同：7
> 
> 时间：2013-04-10T07:41:35.043
> 
> 标签：c#

我有一个具有一些属性的类：

```
class Foo
{
    public int Bar { get; set; }
    public string Baz { get; set; }
    public bool Quux { get; set; }
    (...)
} 
```

为了在某​​些存储 API 中使用，我需要按名称指定这些属性的子集作为字符串：

```
var props = new string[]
{
    "Bar",
    // Don't want this one... "Baz",
    "Quux",
     ...
}; 
```

这可行，但不安全 - 如果我输入错误“Quux”，我不会收到编译错误，只是（希望）出现 runetime 错误。我尝试了反射--`typeof(Foo).GetProperties("Bar")`但这也只会在运行时失败。

理想情况下，我想做类似的事情：

```
var props = new string[]
{
    Magic_GetName(Foo.Bar),
    // Don't want this one... Foo.Baz,
    Magic_GetName(Foo.Quux),
     ...
}; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-12T22:31:25.610

在 C# 6.0 中，您可以使用[nameof()](https://msdn.microsoft.com/en-us/library/dn986596.aspx)关键字：

然后你写：

```
var props = new string[]
{
    nameof(Foo.Bar),
    nameof(Foo.Quux),
     ...
}; 
```

一切都是在编译时使用这个关键字完成的，因此它比使用 lambda 表达式和在运行时挖掘符号名称的代码要好得多。从性能的角度来看它更好，它也适用于`switch()`语句：

```
switch(e.PropertyName)
{
    case nameof(Foo.Bar):
        break;
} 
```

使用 lambda 表达式或魔术 get 函数，您不能使用该`switch()`语句，因为该`switch()`语句需要使用字符串文字。由于`nameof()`关键字在编译时被转换为字符串文字，所以它可以工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T07:48:33.177

您可以为此使用表达式。用法如下所示：

```
Magic_GetName<Foo>(x => x.Bar) 
```

的实现`Magic_GetName`如下所示：

```
public static string Magic_GetName<TClass>(
    Expression<Func<TClass, object>> propertyExpression)
{
    propertyExpression.Dump();
    var body = propertyExpression.Body as UnaryExpression;
    if (body == null)
    {
        throw new ArgumentException(
            string.Format(
                CultureInfo.InvariantCulture, 
                "The body of the 'propertyExpression' should be an " +
                "unary expression, but it is a {0}", 
                propertyExpression.Body.GetType()));
    }

    var memberExpression = body.Operand as MemberExpression;
    if (memberExpression == null)
    {
        throw new ArgumentException(
            string.Format(
                CultureInfo.InvariantCulture, 
                "The operand of the body of 'propertyExpression' should " +
                "be a member expression, but it is a {0}", 
                propertyExpression.Body.GetType()));
    }
    var propertyInfo = memberExpression.Member as PropertyInfo;
    if (propertyInfo == null)
    {
        throw new ArgumentException(
            string.Format(
                CultureInfo.InvariantCulture, 
                "The member used in the expression should be a property, " +
                "but it is a {0}", 
                memberExpression.Member.GetType()));
    }

    return propertyInfo.Name;
} 
```

**更新：** 这个问题的标题是“在**编译**时获取属性名称”。
我的回答实际上并没有做到这一点。该方法`Magic_GetName`在*运行时*执行，因此会对性能产生影响。

另一方面，使用[该`CallerMemberName`属性](http://danrigby.com/2012/03/01/inotifypropertychanged-the-net-4-5-way/)的 .NET 4.5 方式实际上[是一个编译时功能](http://rohiton.net/2012/03/05/caller-information/)，因此不会对运行时产生影响。但是，正如我在评论中已经说过的，它不适用于给定的场景。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-11T13:23:45.460

更好的方法是

```
GetPropertyName<MemoryDevice>(x => x.DeviceLocator)

public static string GetPropertyName<TClass>(
        Expression<Func<TClass,object>> propertyExpression)
    {
        var body = propertyExpression.ToString();
        body = body.Substring(body.IndexOf(".")+1);
        return body;
    } 
```

在运行时执行此操作的另一种方法是

```
public static string GetName<TClass>(
    Expression<Func<TClass, object>> propertyExpression)
{
    var body = propertyExpression.Body as UnaryExpression;
    var memberExpression = body.Operand as MemberExpression;
    var propertyInfo = memberExpression.Member as PropertyInfo;

    return propertyInfo.Name;
} 
```

# r - R：通过比较两行将长转换为宽

> ID：15919822
> 
> 赞同：0
> 
> 时间：2013-04-10T07:41:41.207
> 
> 标签：r

我花了 4 天时间试图解决这个问题，从其他相关问题中学到了很多东西，但仍然找不到有效的解决方案。开始：

我有一个包含 500k x 40 个变量的数据集，并且需要将一个变量从长转换为宽，以比较两个连续行之间的比较。
数据样本如下所示：

```
df <- data.frame(id=c(267, 268, 269, 269, 270, 271, 272, 272, 273, 274),              
           quant=c(2,1,4,4,1,5,2,2,3,1),
           pts=  c(3,2,7,11,2,4,5,9,6,4),
           kind=c('v','v', 'v', 'c', 'v', 'v', 'v', 'c', 'v','v'))

    id quant pts kind
1  267     2   3    v
2  268     1   2    v
3  269     4   7    v
4  269     4  11    c
5  270     1   2    v
6  271     5   4    v
7  272     2   5    v
8  272     2   9    c
9  273     3   6    v
10 274     1   4    v 
```

请注意，每次*id*重复时，*quant*也是如此，并且变量*kind*在一行中假设值为 'v' 而在另一行中假设为 'c'。相反，'c' 的值仅出现在具有重复*id*的记录中。

我打算得到以下data.frame：

```
 id quant pts kind  c
1  267     2   3    v  0
2  268     1   2    v  0
3  269     4   7    v 11
5  270     1   2    v  0
6  271     5   4    v  0
7  272     2   5    v  9
9  273     3   6    v  0
10 274     1   4    v  0 
```

我已经使用以下代码弄清楚了：

```
df$c <- 0
df$delete <- 0
for (i in 1:(dim(df)[1] - 1)) {
  if (df[i,'id'] == df[i+1, 'id'] & df[i+1, 'kind'] == 'c')
  {
    df[i, 'c'] <- df[i+1, 'pts']
    df[i+1, 'delete'] <- 1
  }
}
df <- df[df$delete == 0, ]
df$delete <- NULL 
```

虽然在原始数据集中需要大约 10 个小时，但它是令人讨厌和令人讨厌的，但它确实有效！

任何正确代码的想法？
非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:58:19.160

这是可用于此示例的基本方法：

```
df$c <- with(df, ave(pts, id, quant, FUN = function(x) {
  ifelse(length(x) == 1, 0, tail(x, 1))
}))
df <- df[df$kind == "v", ]
df
#     id quant pts kind  c
# 1  267     2   3    v  0
# 2  268     1   2    v  0
# 3  269     4   7    v 11
# 5  270     1   2    v  0
# 6  271     5   4    v  0
# 7  272     2   5    v  9
# 9  273     3   6    v  0
# 10 274     1   4    v  0 
```

* * *

### 更新

顺便说一句，这*更*有趣`data.table`。

这是数据：

```
library(data.table)
DT <- data.table(id = c(267, 268, 269, 269, 270, 271, 272, 272, 273, 274), 
                 quant = c(2, 1, 4, 4, 1, 5, 2, 2, 3, 1),
                 pts = c(3, 2, 7, 11, 2, 4, 5, 9, 6, 4),
                 kind = c('v','v', 'v', 'c', 'v', 'v', 'v', 'c', 'v','v'),
                 key = c("id", "quant"))
DT
#      id quant pts kind
#  1: 267     2   3    v
#  2: 268     1   2    v
#  3: 269     4   7    v
#  4: 269     4  11    c
#  5: 270     1   2    v
#  6: 271     5   4    v
#  7: 272     2   5    v
#  8: 272     2   9    c
#  9: 273     3   6    v
# 10: 274     1   4    v 
```

这就是您正在寻找的东西：

```
DT[, c := ifelse(length(pts) == 1, 0, tail(pts, 1)), by = key(DT)][kind == "v"]
#     id quant pts kind  c
# 1: 267     2   3    v  0
# 2: 268     1   2    v  0
# 3: 269     4   7    v 11
# 4: 270     1   2    v  0
# 5: 271     5   4    v  0
# 6: 272     2   5    v  9
# 7: 273     3   6    v  0
# 8: 274     1   4    v  0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:08:14.900

这里使用包 plyr 的方法：

```
DF <- ddply(df, .(id), function(x) cbind(x[1,], c=x$pts[match("c", x$kind)]))
DF$c[is.na(DF$c)] <- 0
# or
DF <- ddply(df, .(id), function(x) cbind(x[1,], c=sum(x$pts*(x$kind=="c")))) 
```

# typo3 - Typo3 tt_news 将参数添加到 URL

> ID：15919825
> 
> 赞同：0
> 
> 时间：2013-04-10T07:41:42.887
> 
> 标签：typo3, typoscript, tt-news

我如何从 tt_news 读出当前 id 并将其作为参数添加到 url

对我的 TYPOSCRIPT 的一个小评论

```
2 = TMENU
2 {
wrap = <ul class="naviMainLevel2"> | </ul>
NO {
wrapItemAndSub = <li> | </li>
}
ACT = 1
ACT {
wrapItemAndSub = <li class="active"> | </li>
#get current tt_news id add it to the menu
additionalParams.data = GP:tx_ttnews|tt_news
additionalParams.intval = 1
additionalParams.wrap = &tx_events_pi1[newsUid]=|
#returns only &tx_events_pi1[newsUid]=0
#maybe is it possible with RECORDS tt_news.mbl_newsevent, to get the id? 
}
CUR = 1
CUR < .ACT
} 
```

url 应如下所示：www.example.com/news/news-tech?&tx_events_pi1[newsUid]=55

更新：

我认为这是扩展 mbl_newsevent 的问题，它仅显示带有注册选项的新闻和带有当前 tt_news id 的按钮...使用此 TS 生成：

```
plugin.tt_news.mbl_newsevent {
    registrationLink_typolink {
            title.data = LLL:EXT:mbl_newsevent/locallang.xml:registerLinkLabel
            parameter = {$powermail.plugin.pid}
            parameter.override.field = tx_mblnewsevent_regurl
            additionalParams.field = uid
            additionalParams.intval = 1
            additionalParams.wrap = &tx_powermail_pi1[eventUid]=|
                #this returns the correct tt_news id for the button
        }  
} 
```

我的网址需要同样的方式....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:30:20.323

如果我理解正确，您需要通过以下方式更正您的代码：

```
2 = TMENU
2 {
  wrap = <ul class="naviMainLevel2"> | </ul>
  NO {
   wrapItemAndSub = <li> | </li>
  }
  ACT = 1
  ACT {
    wrapItemAndSub = <li class="active"> | </li>

    #parameter.override.field = tt_news_id ||uid
    # ^ you don't need this line, becasue you still need 
    # the current page id in url and it shouldn't be overriden
    # by some other param

    # next you need to get current tt_news uid from GET
    # as you mentioned in your comment
    additionalParams.data = GP:tx_ttnews|tt_news
    additionalParams.intval = 1
    additionalParams.wrap = &tx_events_pi1[newsUid]=|
  }
  CUR = 1
  CUR < .ACT
} 
```

# google-app-engine - 更新 GAE Python SDK 后获得最大递归深度超出错误

> ID：15919827
> 
> 赞同：0
> 
> 时间：2013-04-10T07:41:45.503
> 
> 标签：google-app-engine, python-2.7, runtime-error

我有一个应用程序，自 2012 年 8 月以来一直在开发，直到最后一次 Python SDK 更新，我在本地为 GAE 开发都没有问题。在 1.7.6 版本之后，我一启动应用程序就开始收到以下递归错误：

```
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_rpc.py", line 156, in _WaitImpl
    self.request, self.response)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 200, in MakeSyncCall
    self._MakeRealSyncCall(service, call, request, response)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/remote_api/remote_api_stub.py", line 218, in _MakeRealSyncCall
    request_pb.set_request(request.Encode())
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/net/proto/ProtocolBuffer.py", line 54, in Encode
    e = Encoder()
RuntimeError: maximum recursion depth exceeded 
```

我直接从 Google AppEngineLauncher 创建和运行一个空白的新项目时看到了同样的错误，我现在已经在两台不同的机器上进行了测试和复制。

# jquery-ui - 无法拖动已拖动的元素

> ID：15919828
> 
> 赞同：0
> 
> 时间：2013-04-10T07:41:58.137
> 
> 标签：jquery-ui, jquery-draggable, jquery-droppable

[我在http://jsfiddle.net/stevea/zPPPV/3/](http://jsfiddle.net/stevea/zPPPV/3/)有一个简单的拖放情况。如果您拖放绿色框，则放置处理程序会克隆拖动的对象并将其插入到发生放置的 xy 处的红色框中。绿色框具有绝对定位，并且克隆在放置点处具有偏移量。

拖放框一次就可以了，但是我无法拖放克隆和插入的新框，即使 Firebug 显示它具有 ui-draggable 类。

有没有人看到问题？

谢谢。

显然我需要显示一些代码，因为我引用了一个 jsfiddle：

```
<div id="red">
    <div id="box_green" class="green"></div>  
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:03:55.850

没有直接的方法可以做到这一点。看一下这个。

```
 $('#orangeBox').draggable({
        opacity:'0.5', 
        helper:'clone',
        revert : 'invalid'
    });   
    $('#page').droppable({
        accept:'#orangeBox',
        drop: function( event, ui ) {
            $(this).after($(ui.helper).clone());
        }
    }); 
```

**[演示](http://jsfiddle.net/maheshsapkal/rQQwx/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:47:42.257

我找到了答案。一旦您克隆了一个项目并将其放下 - 它不再绑定到可拖动功能，因此将最后一行更改为

.prependTo('#red').draggable({opacity:'0.5', helper:'clone'});

成功了。

# r - 在R中读取ascii文件

> ID：15919832
> 
> 赞同：2
> 
> 时间：2013-04-10T07:42:09.640
> 
> 标签：r, header, read.table

我正在尝试使用 read.table 在 R 中读取文件 (ascii) 该文件如下所示：

```
 DAILY MAXIMUM TEMPARATURE  
  YEAR DAY MT DT   LAT. 66.5   67.5   68.5   69.5   70.5
  1969 001 01 01   6.5  99.90  99.90  31.90  99.90  99.90 
  1969 001 01 01   7.5  99.90  20.90  99.90  99.90  23.90
  1969 001 01 01   8.5  99.90  99.90  30.90  99.90  18.90
  .....
  ..... 
  YEAR DAY MT DT   LAT. 66.5   67.5   68.5   69.5   70.5
  1969 001 01 02   6.5  21.90  99.90  99.90  99.90  99.90 
  1969 001 01 02   7.5  99.90  33.90  99.90  99.90  99.90
  1969 001 01 02   8.5  99.90  99.90  15.90  99.90  99.90
  .....
  .....
  YEAR DAY MT DT   LAT. 66.5   67.5   68.5   69.5   70.5
  1969 001 01 03   6.5  99.90  99.90  99.90  99.90  99.90 
  1969 001 01 03   7.5  99.90  99.90  99.90  99.90  99.90
  1969 001 01 03   8.5  99.90  99.90  99.90  99.90  99.90
  .....
  ..... 
```

我使用以下方法阅读它：

```
inp=read.table("MAXT1969.TXT",skip=1,header=T) 
```

文件已被读取，内容在变量 inp 中。

我有2个问题-

I. 查看前 5 列的命令提供了一些额外的信息以及所需的输出，例如，inp[1,5] 提供以下输出：

```
> inp[1,5]
  "[1] 6.5
  33 Levels: 10.5 11.5 12.5 13.5 14.5 15.5 16.5 17.5 18.5 19.5 20.5 21.5 ... LAT." 
```

我不想要额外的信息，只想要价值。我哪里错了？

二、在每 32 行之后，我有一个标题（YEAR DAY ....）。如何忽略定期阅读标题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T07:59:12.893

试试`comment.char="Y"`这将`read.table`忽略所有以 . 开头的行`Y`。 `stringsAsFactors=FALSE`将避免将字符串转换为因子。

```
inp <- read.table("MAXT1969.TXT", skip = 1, header=FALSE, comment.char="Y", stringsAsFactors=FALSE )

#Read just first row to get header names
cols <- read.table("MAXT1969.TXT", header=FALSE, skip=1, nrows=1  )
names(inp) <- cols  

inp
##   YEAR DAY MT DT LAT. 66.5 67.5 68.5 69.5 70.5
## 1 1969   1  1  1  6.5 99.9 99.9 31.9 99.9 99.9
## 2 1969   1  1  1  7.5 99.9 20.9 99.9 99.9 23.9
## 3 1969   1  1  1  8.5 99.9 99.9 30.9 99.9 18.9
## 4 1969   1  1  2  6.5 21.9 99.9 99.9 99.9 99.9
## 5 1969   1  1  2  7.5 99.9 33.9 99.9 99.9 99.9
## 6 1969   1  1  2  8.5 99.9 99.9 15.9 99.9 99.9
## 7 1969   1  1  3  6.5 99.9 99.9 99.9 99.9 99.9
## 8 1969   1  1  3  7.5 99.9 99.9 99.9 99.9 99.9
## 9 1969   1  1  3  8.5 99.9 99.9 99.9 99.9 99.9

#Since the stringsAsFactor = FALSE was used numbers were read correctly. 
inp[1, 5]
## [1] 6.5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:02:36.557

问题1：这意味着您的值已被读取为a `factor`，即分类变量。只需`as.numeric`在列上使用将其从 转换`factor`为`numeric`。或者，您可以使用`colClasses`参数 to`read.table`直接指定文件中列的类型。

问题 2：您可以使用 读取行`readLines`，找到以`YEAR`using开头的行`grep`，删除这些行，然后将编辑后的输出读入`data.frame`using `read.table(textConnection(edited_data))`。我会改用@geektrader 的解决方案，但为了完整起见，我只想添加它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:22:06.647

另一种解决方案是引入 NA，然后省略它们 -

```
inp = as.data.frame(na.omit(apply(apply(inp, 2, as.character), 2, as.numeric))) 
```

# mysql - 如何在存储过程中删除连字符

> ID：15919833
> 
> 赞同：1
> 
> 时间：2013-04-10T07:42:13.750
> 
> 标签：mysql, sql, stored-procedures

在某些情况下，我必须在存储过程中删除连字符。例如，LanguageScore 为 1 并且描述非常好。在这种情况下，我想要答案 1-Excellent。但在某些情况下，例如：LanguageScore 为 2，并且没有 2 的描述。在那个时候我想要像2这样的答案。我该如何解决这个问题？

```
CREATE PROCEDURE [dbo].[p_getLanguageScores]  
AS  

SELECT       
 [LanguageScoreID],  
 [LanguageScore] + ' - ' + [Description]AS [LanguageScore]  
FROM          
 [M_LanguageScores]  
WHERE   
 [Status] > 0   
ORDER BY   
 [SortOrder]   

SET NOCOUNT ON 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:21:18.887

```
SELECT     
    [LanguageScoreID],
     ( CASE 
           WHEN [LanguageScore]= ''
              THEN [Description]
           WHEN [Description]=''
              THEN [LanguageScore]
           ELSE [LanguageScore] + ' - ' + [Description]
       END )AS [LanguageScore] 
FROM        
    [M_LanguageScores] 
```

# zend-framework2 - 使用 UNION 从多个表中获取数据

> ID：15919838
> 
> 赞同：1
> 
> 时间：2013-04-10T07:42:31.030
> 
> 标签：zend-framework2

```
("SELECT * FROM (
    select id, title, report_date, report_file, company,  'company' as report_type from rs_company_report
    union
    select id, title, report_date, report_file, company, 'sector' as report_type from rs_sector_report
    union
    select id, title, report_date, report_file, company, 'morning' as report_type from rs_morning_report) as company_reports where company LIKE '%1%' order by title "); 
```

如何将此查询转换为 zend tablegateway 格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T09:40:37.770

它现在有 combine()

但这对这两个不起作用：

*   多于两个 SELECT 的

*   命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:58:54.380

到目前为止，Zend2 似乎没有提供任何 UNION 支持。

[http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html#zend-db-sql-select](http://framework.zend.com/manual/2.1/en/modules/zend.db.sql.html#zend-db-sql-select)

# java - 设置一个 Fiveton 类，以供不同线程以循环方式访问

> ID：15919839
> 
> 赞同：2
> 
> 时间：2013-04-10T07:42:34.533
> 
> 标签：java, multithreading

与 Singleton 类类似，我想创建一个 Fiveton 类，它可以创建最多 5 个该类的实例。不同的线程正在尝试访问此类的实例（因此需要提供 getInstance 方法）。然而类很重，所以不能急切地创建实例，即按需创建。

另一个约定是线程以循环方式分配实例，即线程 1、6、11 获得 Fiveton 对象的实例 1。如果实例正在被线程使用，它们会等待锁（线程 6 和 11 可能会等待实例 1，而线程 11 可能会获得它，但在任何情况下线程 11 都不应该获得实例 2）。同样，线程号。2、7、12 应该得到实例 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:16:25.387

不要在你的类本身中编写代码*，而是使用对象池。

[Apache Commons / Pool](http://commons.apache.org/proper/commons-pool/)是一个很好的入门库

另一个我不知道但声称更快的是[furious-objectpool](https://code.google.com/p/furious-objectpool/)

使用提供的实现之一或使用库作为构建您自己的自定义池的基础。

* 为什么不将其编码到类本身中？因为类做什么以及如何访问类的实例是不相关的问题。课程应该专注于它的核心目的，而不是管理自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:19:07.653

如果您关心创建实例时的争用（即您不希望线程 6 阻塞，因为线程 2 仍在创建它的实例），您可以使用锁条带策略 - 在此实现中，假设线程 1、2 , ...`getInstance`一个接一个地调用：

```
class CyclicFiveton {

    private static final CyclicFiveton[] fivetons = new CyclicFiveton[5];
    private static final Object[] locks = new Object[5];
    private static final AtomicInteger counter = new AtomicInteger();

    static {
        for (int i = 0; i < 5; i++) {
            locks[i] = new Object();
        }
    }

    private CyclicFiveton() {
    }

    public static CyclicFiveton getInstance() {
        int index = counter.getAndIncrement() % 5;
        synchronized (locks[index]) {
            CyclicFiveton fiveton = fivetons[index];
            if (fiveton == null) {
                fiveton = new CyclicFiveton();
                fivetons[index] = fiveton;
            }
            return fiveton;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:28:56.407

如果我正确理解你的要求，你可以尝试这样的事情：

```
public class Fiveton {

private Fiveton(){
    //create private constructor to prevent new instances from outside of the class
}

private static final int MAX_NB_INSTANCES = 5;
private static List<Fiveton> instances; 

/**
 * Should be called once at the beginning 
 */
public static void init(){
    instances =  new ArrayList<Fiveton>(MAX_NB_INSTANCES);
    for(int i=0;i<MAX_NB_INSTANCES;i++){
        instances.add(new Fiveton());
    }
}

/**
 *  threadNb can be the name of the Thread::getName() 
 * 
 * @param threadNb
 * @return Fiveton
 */
public static Fiveton getInstance(int threadNb){
    synchronized(instances.get(threadNb%MAX_NB_INSTANCES)){
        return instances.get(threadNb%MAX_NB_INSTANCES);
    }       
}  

/**
 * other logic
 * 
 */ 
```

}

您只需要在 Fiveton 对象后面添加逻辑即可。

**更新**

或者正如肖恩·帕特里克·弗洛伊德（ ***Sean Patrick Floyd*** ）所指出的那样，您可以使用它来管理实例，并为您希望以这种方式更清洁和透明的逻辑使用不同的类（对象）。

**更新**

添加了延迟初始化

# java - GUI 不适用于自定义 AbstractTableModel。错误“未知来源”

> ID：15919840
> 
> 赞同：0
> 
> 时间：2013-04-10T07:42:41.053
> 
> 标签：java, swing, linked-list, jtable, abstracttablemodel

我目前正在创建或更多尝试为我的项目创建 GUI。我现在需要做的是创建一个从 LinkedList 读取数据的 JTable。我为此有一个自定义的 TableAbstractModel。

```
public class StudentTableModel extends AbstractTableModel {

public static final String[] columnNames = { "ID", "First Name",
        "Last Name" };
private LinkedList<Student> data;

public StudentTableModel(LinkedList<Student> data) {
    this.data = data;
}

@Override
public int getColumnCount() {
    return columnNames.length;
}

@Override
public String getColumnName(int column) {
    return columnNames[column];
}

@Override
public int getRowCount() {
    return data.size();
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    Student student = data.get(rowIndex);
    if (student == null) {
        return null;
    }
    switch (columnIndex) {
    case 0:
        return student.getID();
    case 1:
        return student.getFirstname();
    case 2:
        return student.getLastname();
    default:
        return null;
    }
} 
```

}

现在我正在尝试构建一个非常基本的布局，该布局仅由表格和适当的 JTextfields 和 JButtons 组成，以测试表格是否真的有效。

```
public class GUI extends JFrame {

private JTextField StudentID;
private JTextField Firstname;
private JTextField Lastname;
private JTextField Group;
private JButton Add;
private static Database DB; // << Does this have to be static? Eclipse tells me it needs to be, but I am not sure.
private JTable StudentTable;

public GUI(Database DB) {
    super("Theatre Management");
    setExtendedState(JFrame.MAXIMIZED_BOTH);
    this.DB = DB;
    LinkedList<Student> data = null;

    setLayout(new FlowLayout());
    StudentID = new JTextField("Enter Student ID", 10);
    Firstname = new JTextField("Enter First Name");
    Lastname = new JTextField("Enter Last Name");
    Group = new JTextField("Enter Group ID");
    Add = new JButton("Add Student");
    StudentTable = new JTable();
    StudentTable.setModel(new StudentTableModel(data));
    JScrollPane scrollPane = new JScrollPane(StudentTable);
    StudentTable.setFillsViewportHeight(true);

    add(StudentTable);
    add(StudentID);
    add(Firstname);
    add(Lastname);
    add(Group);
    add(Add);
    add(scrollPane);

    addStudentEvent add = new addStudentEvent();
    Add.addActionListener(add);

}

public static void createAndShow() {
    GUI Database = new GUI(DB);
    Database.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    Database.setVisible(true);

}

public static void main(String[] args) {
    GUI.createAndShow();

}

private class addStudentEvent implements ActionListener {
    public void actionPerformed(ActionEvent event) {
        int G = Integer.parseInt(Group.getText());
        int ID = Integer.parseInt(StudentID.getText());
        String First = Firstname.getText();
        String Last = Lastname.getText();

        DB.getGroup(G).addStudent(ID, First, Last);
        DB.addStudent(ID, First, Last);
    }

} 
```

}

现在，问题是，一旦我尝试运行 GUI，就会收到一大堆错误。

```
Exception in thread "main" java.lang.NullPointerException
at theatremanagement.StudentTableModel.getRowCount(StudentTableModel.java:29)
at javax.swing.JTable.getRowCount(Unknown Source)
at javax.swing.plaf.basic.BasicTableUI.createTableSize(Unknown Source)
at javax.swing.plaf.basic.BasicTableUI.getPreferredSize(Unknown Source)
at javax.swing.JComponent.getPreferredSize(Unknown Source)
at java.awt.FlowLayout.layoutContainer(Unknown Source)
at java.awt.Container.layout(Unknown Source)
at java.awt.Container.doLayout(Unknown Source)
at java.awt.Container.validateTree(Unknown Source)
at java.awt.Container.validateTree(Unknown Source)
at java.awt.Container.validateTree(Unknown Source)
at java.awt.Container.validateTree(Unknown Source)
at java.awt.Container.validate(Unknown Source)
at java.awt.Container.validateUnconditionally(Unknown Source)
at java.awt.Window.show(Unknown Source)
at java.awt.Component.show(Unknown Source)
at java.awt.Component.setVisible(Unknown Source)
at java.awt.Window.setVisible(Unknown Source)
at theatremanagement.GUI.createAndShow(GUI.java:59)
at theatremanagement.GUI.main(GUI.java:64) 
```

我现在真的被卡住了，不知道如何解决这个问题。如果有人能告诉我我做错了什么，那就太好了。另一方面，我必须在我的程序中，在不同的类中使用 LinkedList。TableModel 怎么知道我想要哪一个？我是否需要向 TableModel 添加任何内容，以使表格在添加或删除学生后立即自动更新？

**更新：**

```
private JTable setStudentList(LinkedList<Student> Studentlist) {
    JTable StudentTable = new JTable();
    StudentTable.setModel(new StudentTableModel(Studentlist));
    JScrollPane scrollPane = new JScrollPane(StudentTable);
    StudentTable.setFillsViewportHeight(true);
    return StudentTable; 
```

此方法是否适用于创建带有链表的表？然后我会要求该方法为

```
setStudentList(Studentlist); 
```

如果我这样初始化一个空的 LinkedList：

```
LinkedList<Student> StudentList = new LinkedList<Student>(); 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:44:47.597

从未`LinkedList`初始化...

```
LinkedList<Student> data = null;
// ... ///
StudentTable.setModel(new StudentTableModel(data)); 
```

这意味着当`getRowCount`被调用时，`data`对象是`null`，因此`NullPointerException`

**更新**

您可以使用任意数量的选项将 main 的引用传递`LinkedList`到 UI 中，但这将归结为您的工作流程的工作方式。

你可以...

通过它的构造函数传递对 UI 的引用....

```
public GUI(Database DB, LinkedList<Student> students) {...} 
```

你可以...

通过类`LinkedList`中的方法`GUI`传入...

```
public class GUI extends JFrame {

    //...//

    public GUI(Database DB) {...}

    public void setStudent(LinkedList<Student> students) {
        StudentTable.setModel(new StudentTableModel(students));
    }
} 
```

**更新了示例**

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.LinkedList;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;

public class PassTable {

    public static void main(String[] args) {
        new PassTable();
    }

    public PassTable() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private ExampleTable example;

        public TestPane() {
            setLayout(new BorderLayout());
            example = new ExampleTable();
            add(example);
            JButton add = new JButton("Add");
            add(add, BorderLayout.SOUTH);
            add.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    LinkedList<Person> people = new LinkedList<Person>();
                    people.add(new Person("A", "A", 1));
                    people.add(new Person("B", "B", 2));
                    people.add(new Person("C", "C", 3));
                    people.add(new Person("D", "D", 4));
                    example.setPeople(people);
                }
            });
        }

    }

    public class ExampleTable extends JPanel {

        private JTable table;

        public ExampleTable() {
            this(new LinkedList<Person>());
        }

        public ExampleTable(LinkedList<Person> people) {
            setLayout(new BorderLayout());
            table = new JTable(new SampleTableModel(people));
            add(new JScrollPane(table));
        }

        public void setPeople(LinkedList<Person> people) {
            table.setModel(new SampleTableModel(people));
        }

    }

    public class SampleTableModel extends AbstractTableModel {

        private LinkedList<Person> data;

        public SampleTableModel(LinkedList<Person> data) {
            this.data = data;
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public String getColumnName(int column) {
            String name = "";
            switch (column) {
                case 0:
                    name = "First name";
                    break;
                case 1:
                    name = "Last name";
                    break;
                case 2:
                    name = "Age";
                    break;
            }
            return name;
        }

        @Override
        public int getColumnCount() {
            return 3;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Object value = null;
            Person person = data.get(rowIndex);
            switch (columnIndex) {
                case 0:
                    value = person.getFirstName();
                    break;
                case 1:
                    value = person.getLastName();
                    break;
                case 2:
                    value = person.getAge();
                    break;
            }
            return value;
        }

    }

    public class Person {
        private String firstName;
        private String lastName;
        private int age;

        public Person(String firstName, String lastName, int age) {
            this.firstName = firstName;
            this.lastName = lastName;
            this.age = age;
        }

        public int getAge() {
            return age;
        }

        public String getFirstName() {
            return firstName;
        }

        public String getLastName() {
            return lastName;
        }

    }

} 
```

# grails - 使用 scribe 1.3.1.jar 将linkedin 集成到我的应用程序中

> ID：15919842
> 
> 赞同：3
> 
> 时间：2013-04-10T07:42:43.273
> 
> 标签：grails, linkedin, scribe

我正在使用 scribe 1.3.1.jar。

我已经使用这个 jar 成功地通过 twitter 验证了用户。

但是我在使用同一个 jar 对用户进行身份验证时遇到了问题。

获取访问令牌时出现此错误。我已成功获取请求令牌和验证程序。但是当我尝试获取访问令牌并得到以下异常时，问题就出现了：

响应正文不正确。无法从中提取令牌和秘密：

`oauth_problem=signature_invalid&oauth_problem_advice=com.linkedin.security.auth.pub.LoginDeniedInvalidAuthTokenException%20while%20obtaining%20request%20token%20for%20%3APOST%26https%253A%252F%252Fapi.linkedin.com%252Fuas%252Foauth%252FaccessToken%26oauth_consumer_key%253Dxuk04eooznqu%2526oauth_nonce%253D2417349075%2526oauth_signature_method%253DHMAC-SHA1%2526oauth_timestamp%253D1365577634%2526oauth_token%253D7277829e-e121-4b76-b0f4-8f5e9e6c7be8%2526oauth_verifier%253D66312%2526oauth_version%253D1.0%0AOAU%3Axuk04eooznqu%7C7277829e-e121-4b76-b0f4-8f5e9e6c7be8%7C%2A01%7C%2A01%3A1365577634%3AlCqOvqH1tkJAtpGa58tnEhqwdRQ%3D`

我觉得自己真的陷入了困境。

请帮忙！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T14:01:05.593

看看这篇博文：[http ://www.objectpartners.com/2012/04/03/linkedin-api-in-a-grails-application/](http://www.objectpartners.com/2012/04/03/linkedin-api-in-a-grails-application/)

它展示了如何使用使用 Scribe 库的 OAuth 插件。希望有帮助！

# java - 当使用石英调度器时，我遇到了 NoClassDefFoundErroe

> ID：15919843
> 
> 赞同：1
> 
> 时间：2013-04-10T07:42:47.237
> 
> 标签：java, spring, jsp, quartz-scheduler

```
public void  HelloSchedule()throws Exception{

      SchedulerFactory sf=new StdSchedulerFactory();
      Scheduler sched=sf.getScheduler();
      sched.start();
      JobDetail job = JobBuilder.newJob(Quartzjob.class)
                .withIdentity("job1", "group1").build();

        Trigger trigger = TriggerBuilder.newTrigger().withIdentity("trigger1", "group1")
                .withSchedule(SimpleScheduleBuilder.simpleSchedule().withIntervalInSeconds(20)
                    .repeatForever()).startNow().build();

        sched.scheduleJob(job, trigger);

      } 
```

**例外**

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory at       org.quartz.impl.StdSchedulerFactory.<init>(StdSchedulerFactory.java:274)
at quartzSheduler.QuartzTrigger.HelloSchedule(QuartzTrigger.java:28)v 
```

我得到了例外，我使用了 Quarta-2.1.5.jar ，我是否应该使用事务库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:46:59.563

您似乎缺少[SL4J](http://www.slf4j.org/)库。[您可以通过使用 maven 并从repo](http://mvnrepository.com/artifact/org.quartz-scheduler/quartz/1.7.3)导入依赖项来避免此类依赖项错误。您需要一个 maven 项目来链接到quartz 依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:46:31.200

确保在应用程序或服务器 lib 目录中添加 slf4j-api jar。

# codeigniter - CodeIgniter Cookie

> ID：15919851
> 
> 赞同：0
> 
> 时间：2013-04-10T07:43:14.083
> 
> 标签：codeigniter

我在处理 cookie 时遇到了一些问题。最初我将 cookie 值设置为 0。当用户导航到下一页时，我想将 cookie 值加一。我的控制器是这样的：

```
class Welcome extends CI_Controller {

    public function index() {
        $this->load->helper('cookie');
        $this->input->set_cookie("starttime", time(),time()+3600);
        $this->input->set_cookie("pagevisited",0,time()+3600);
        $_SESSION['currenttime'] = time();
        $this->load->view('indexpage');
    }

    public function page1() {
        $this->load->helper('cookie');
        $value = $this->input->cookie("pagevisited");
        $this->input->set_cookie("pagevisited",$value+1,time()+3600);
        $this->load->view('page1');
    }

    public function page2() {
        $this->load->helper('cookie');
        $value = $this->input->cookie("pagevisited");
        $this->input->set_cookie("pagevisited",$value+1,time()+3600);
        $this->load->view('page2');
    }
} 
```

上面的代码不起作用。cookie 值仍然为 0。我注意到 CI 也存储具有相同 cookie 名称的会话变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:41:05.757

我认为您的 cookie 语法不正确。CodeIgniter 手册说只需要名称和值，但要添加其他参数，您需要全部设置它们或定义一个数组，我相信。这里有两种定义你想要的 cookie 的方法。

```
$cookie = array(
    'name'   => 'The Cookie Name',
    'value'  => 'The Value',
    'expire' => '86500'
);

$this->input->set_cookie($cookie); 
```

或者

```
$this->input->set_cookie($name, $value, $expire, $domain, $path, $prefix, $secure); 
```

# ide - IDE 生成的 USEFORM 宏调用更改它们的顺序

> ID：15919853
> 
> 赞同：8
> 
> 时间：2013-04-10T07:43:20.423
> 
> 标签：ide, c++builder, c++builder-xe

我们有一个 C++Builder XE 项目（VCL 表单应用程序），其中包含几十个表单和单元。每当添加、删除或重命名属于项目的文件时，IDE 应该做两件事：

1.  如果受影响的单元是窗体或框架，则会在项目源文件 (ProjectName.cpp) 中添加或更改对 USEFORM 宏的调用
2.  添加或更改项目文件 (ProjectName.cbproj) 中的 CppCompile 元素

但是，IDE 不仅会进行必要的更改，还会对一些现有的 USEFORM 和 CppCompile 记录进行洗牌，即使它们不受更改的影响。如果我添加一个单元（cpp 和头文件），则即使不需要对项目源进行任何更改，也会对 USEFORM 进行改组，仅对 cbproj 文件进行更改。

我没有看到新订单如何形成的具体模式。如果我编辑或重命名单个单元，大约一半的 USEFORM 似乎改变了位置，只有几个或没有 CppCompile 记录。如果在两台不同的机器上对项目的副本进行更改，大多数更改似乎相似，但不是全部。这表明重新排序不是随机的。

当使用 Subversion 合并更改时，该行为会导致问题，因为它强制手动解决更改顺序造成的冲突。

所以问题是：什么可能导致上述行为以及如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-15T15:32:43.850

我一直无法找到解决问题的适当方法，但这里有一个简单的方法可以让它稍微不那么烦人：

**采用从不将 IDE 生成的随机更改提交到版本控制存储库的策略。**每当您对触发混合文件的代码进行更改时，请还原`ProjectName.cpp`和中所有不必要的更改`ProjectName.cbproj`。在这一点上，它仍然相当容易，因为您知道文件的哪些部分实际上应该更改。这样，在仍然需要最少工作量的情况下进行体力劳动。此外，这项工作只需要执行一次，而不是让更改保持不变，在这种情况下，每次有人合并更改时都必须重复这项工作。

# asp.net - ASPxGridView - 当我提交更改时，我总是从之前的一次编辑中看到它们

> ID：15919854
> 
> 赞同：0
> 
> 时间：2013-04-10T07:43:21.690
> 
> 标签：asp.net, webforms, devexpress, aspxgridview

我的 WebForms 页面上的 GridView 有问题。我希望也许你能帮助我。

我有一个由 LinqDataSource 通过实体框架绑定到 SQL Server 视图的网格。View 基本上汇总了其中一张表中的数据。在我的页面上，我允许对该表进行一些更改，我在不同的上下文中使用实体框架进行更新。问题是，在 PostBack 之后，我总是会看到之前一次编辑的更改。

例如： 1\. 我有一个值为“Matthew”的实体。2.我编辑到“约翰”->回发=>我看到“马修”。3\. 我编辑到“Mick”-> postback => 我看到了“John”。

我尝试禁用网格的视图状态和行缓存 - 没有成功。

我会很感激任何建议。

谢谢！

```
 <p>
                <asp:LinqDataSource ID="LinqDataSource1" runat="server" ContextTypeName="WebApplication2.Database1Entities" EntityTypeName="" TableName="Clients">
                </asp:LinqDataSource>
                <dx:ASPxGridView ID="ASPxGridView1" runat="server" AutoGenerateColumns="False" DataSourceID="LinqDataSource1" KeyFieldName="id" EnableRowsCache="False">
                    <Columns>
                        <dx:GridViewDataTextColumn FieldName="id" VisibleIndex="0">
                        </dx:GridViewDataTextColumn>
                        <dx:GridViewDataTextColumn FieldName="name" VisibleIndex="1">
                        </dx:GridViewDataTextColumn>
                    </Columns>
                </dx:ASPxGridView>
            </p>
            <p>
                <dx:ASPxTextBox ID="ASPxTextBox1" runat="server" Width="170px">
                </dx:ASPxTextBox>
                <dx:ASPxButton ID="ASPxButton1" runat="server" Text="ASPxButton" OnClick="ASPxButton1_Click">
                </dx:ASPxButton>
            </p>

    protected void ASPxButton1_Click(object sender, EventArgs e)
            {
                var ent = new Database1Entities();
                var itemToUpdate = ent.Clients.FirstOrDefault(p => p.id == 1);
                itemToUpdate.name = ASPxTextBox1.Text;
                ent.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:19:59.657

马修，

我建议您使用 ASPxGridView 的编辑事件。看看这个例子：

*   [如何在与 EntityDataSource / Entity Framework 绑定的 ASPxGridView 中实现常见场景](http://www.devexpress.com/Support/Center/e/E3251.aspx)

这是一个 Code Central 示例，因此您可以下载整个解决方案并在本地运行它：

*   [如何使用代码中心](http://community.devexpress.com/blogs/aspnet/archive/2008/07/30/codecentral-source-code-to-search-download-run-enterprise-cheat.aspx)

如果仍然没有帮助，请联系 DevExpress 支持团队，他们可以为您提供帮助： [DevExpress 支持](http://www.devexpress.com/Support/Center/CreateIssue.aspx?issuetype=Question)

# php - 查找“p”标签的数量并遍历它们以使用 php 抓取底层文本

> ID：15919855
> 
> 赞同：0
> 
> 时间：2013-04-10T07:43:22.703
> 
> 标签：php, curl, web-scraping

因此，我不知道如何从网站页面中抓取段落的底层文本，该页面没有使用 php 的任何“id”或“类”。一种方法是计数并遍历

a 中的标签，但 div 本身在任何之前关闭

遇到标签。我打算抓取 wikitravel.org 信息以学习抓取。这是wikitravel.org的页面源示例之一

```
 <h2><span class="editsection">[<a href="/wiki/en/index.php?title=Kanniyakumari&    amp;action=edit&amp;section=18" title="Edit section: Sleep">edit</a>][<a href="#Sleep" title="click to add a sleep listing" onclick="addListing(this, '18', 'sleep', 'Kanniyakumari');">add listing</a>]</span> <span class="mw-headline" id="Sleep">Sleep</span></h2>

   <p>There are numerous hotels, residencies etc. in and around Kanyakumari and therefore, staying over is not be a problem. But there are agents, touts and brokers in every nook and corner looking for unsuspecting tourists. Eschew buying or booking rooms from them, as many a time you end up paying a lot more than the actual price. Vivekananda Kendra can be a good option for people looking for a decent, yet cheap accommodation, but it's around 3 km from Kanyakumari. Prefer hotels near the beach especially if you want to watch the sunrise right out of your bed! Note that, you should quote this preference when booking the room or else, you'll always be given a room without a window opening out to the sea. Moreover many a times, these rooms are in great demand and you'll find yourself shelling a extra 400 - 500 Rs (~10 US$)for such a room. Hotel Sea View, Hotel Sangam and a couple of other hotels offer such rooms and the rent is about Rs. 1100 (~ 25 US$) for 12 hrs. Note that many rooms are priced for 12 hrs  and not per day especially during the peak season.
</p>

<p>ATM's in Kanyakumari:</p>

 <p>Canara Bank 
 Main Road, Kanyakumari 629702, ,
 </p>
 <p>Indian Bank 
  S No 658 / 1, National High Way Opp St Antony'S Higher Secondary Sckanyakumari 629702
 </p>
<p>State Bank Of Travancore 
P.B.No.1, 1/17 Amman Sannathi Street, Kanyakumari, Tamil Nadu, 629702
</p> 
```

有人可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:48:58.650

我一直发现 JQuery 是抓取 HTML 数据的最佳方式。让 PHP 使用 JQuery 呈现一个页面，该页面解析抓取的 HTML，然后将 JSON 数据集发布回 PHP。

如果您想坚持使用纯 PHP 路线，请尝试以下库：http: [//simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:50:48.230

看看[simplehtmldom](http://simplehtmldom.sourceforge.net/)解析器。它应该与类似 jQuery 的选择器一起使用。

这是您的案例的示例：

```
$html = file_get_html('http://www.wikitravel.com/yourpage');
foreach($html->find('p') as $element){
    echo $element->innertext; // the content in all the p tags
} 
```

# asp.net - 托管云服务 - 一般做法

> ID：15919860
> 
> 赞同：1
> 
> 时间：2013-04-10T07:43:28.140
> 
> 标签：asp.net, asp.net-mvc-3, razor, asp.net-mvc-4, azure

这些天我尝试在 windows azure 上进行操作，它非常棒。

我的问题是关于每次的云服务部署实践。

我第一次设置我的云服务环境时，我可以使用 Visual Studio 部署它（在我的 PC 上花费长达 30-40 分钟）。稍后对于网站的任何其他代码更新，我只是使用 vs（.cspkg 和 .cscfg 文件）创建一个新包并直接上传到我的服务实例上。

这是托管云服务的一般流程。但是每次上传包括静态文件在内的所有文件在一般实践中并不是一种好的托管方式。

有没有其他方法可以做同样的事情。比如上传带有 bin 文件夹的预编译动态图片，不包括其他静态内容文件。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:12:59.110

当涉及到静态文件时，最好将它们存储在 Blob 中。这使您可以独立于您的网站更新 blob。此外，您还可以使用这种方法利用 CDN 网络，允许您将静态内容缓存在离用户更近的地方，以提高性能。

以下是有关 Azure CDN 的更多信息：http: [//www.windowsazure.com/en-us/develop/net/common-tasks/cdn/](http://www.windowsazure.com/en-us/develop/net/common-tasks/cdn/)

# oracle - 具有特定发件人域的 UTL_SMTP 中的传输超时

> ID：15919862
> 
> 赞同：1
> 
> 时间：2013-04-10T07:43:32.480
> 
> 标签：oracle, email, oracle11g, smtp

当我尝试使用 oracles UTL_SMTP 包向自己发送电子邮件时，我从 UTL_SMTP.MAIL 过程中收到传输超时错误 (ORA-29276)，但仅当发件人变量使用landmail.com 域时。其他地址可以正常工作，例如 fake@email.com - 但无论@landmail.com 不能。

我已经尝试重新输入它以确保没有奇怪的隐藏字符或任何东西，但我完全感到困惑，我的 google-fu 什么也没返回。

我们最近从 10g 更新到 11g 可能是相关的。

超时之前的代码非常简单 - 它看起来如下所示，其中检查点 C 从未到达...

```
PROCEDURE send_email(sender_email_chr IN VARCHAR2
                    ,other_stuff      IN WHATEVER)
IS
  connection_col UTL_SMTP.CONNECTION;
  reply_col      UTL_SMTP.REPLY;
BEGIN
  reply_col := UTL_SMTP.OPEN_CONNECTION('localhost',25,connection_col,60);

  DBMS_OUTPUT.PUT_LINE('Checkpoint A');

  reply_col := UTL_SMTP.HELO(connection_col,'localhost');

  DBMS_OUTPUT.PUT_LINE('Checkpoint B');

  UTL_SMTP.MAIL(connection_col, sender_email_chr);

  DBMS_OUTPUT.PUT_LINE('Checkpoint C');

  --rest of procedure snipped
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:20:23.353

嗯，很奇怪。我认为这与 Oracle 无关，而是与我们的本地 SMTP（sendmail，postfix）配置（或 DNS 设置）有关。您的本地 SMTP 可能会在接收时尝试验证电子邮件。

尝试从 Unix 命令行执行相同的操作。或者直接使用“telnet localhost 25”，您将看到电子邮件被 SMTP 接受需要多长时间。

# hibernate - Logback 不适用于休眠

> ID：15919865
> 
> 赞同：5
> 
> 时间：2013-04-10T07:43:34.627
> 
> 标签：hibernate, logback, c3p0, hibernate-annotations

我正在尝试将 logback 与 hibernate 一起使用，看起来很简单，但我无法让它工作

休眠.cfg.xml

```
 <!-- DB Properties -->
    <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.show_sql">true</property>
    <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
    <property name="hibernate.current_session_context_class">thread</property>

    <!-- DB Connection -->
     <property name="hibernate.connection.url"> XXXXXXXXXXXXX</property>
    <property name="connection.username">XXXXXXXXXX</property>
    <property name="connection.password">XXXXXXXXXX</property>

    <!-- c3p0 config  -->

    <property name="connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>     
    <property name="hibernate.c3p0.acquire_increment">1</property>
    <property name="hibernate.c3p0.idle_test_period">100</property>
    <property name="hibernate.c3p0.min_size">10</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.c3p0.timeout">1800</property>

</session-factory> 
```

logback.xml

```
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
        <Pattern>%d{yyyy-MM-dd_HH:mm:ss.SSS} %-5level %logger{36} - %msg%n
        </Pattern>
    </encoder>
</appender>

<appender name="FILE"
    class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>c:/timesheet.log</file>
    <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
        <Pattern>%d{yyyy-MM-dd_HH:mm:ss.SSS} [%thread] %-5level %logger{36} -
            %msg%n
        </Pattern>
    </encoder>

    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
        <FileNamePattern>c:/timesheet.%i.log.zip</FileNamePattern>
        <MinIndex>1</MinIndex>
        <MaxIndex>10</MaxIndex>
    </rollingPolicy>

    <triggeringPolicy
        class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
        <MaxFileSize>2MB</MaxFileSize>
    </triggeringPolicy>

</appender>
<logger name="org.hibernate" level="ALL"/>
<root level="INFO">
    <appender-ref ref="FILE" />
    <appender-ref ref="STDOUT" />
</root> 
```

控制台输出

Hibernate: select this_.id_utente as id1_2_3_, this_.valido as valido2_3_, aziendagru2_.id_azienda_gruppo as id1_0_0_, aziendagru2_.logo as logo0_0_, aziendagru2_.nome_azienda as nome3_0_0_, aziendagru2_.sottotitolo_due as sottotit4_0_0_, aziendagru2_.sottotitolo_uno as sottotit5_0_0_, livello3_.id_livello as id1_3_1_ , livello3_.descrizione as descrizi2_3_1_, utentianag4_.id_utente_anagrafica as id1_1_2_, utentianag4_.cognome as cognome1_2_, utentianag4_.nome as nome1_2_ from ts_utenti this_ left outer join ts_aziende_gruppo aziendagru2_ on this_.id_azienda_gruppo=aziendagru2_.id_azienda_gruppo left outer join ts_livelli livello3_ on this_.id_livello= livello3_.id_livello 左外连接 ts_utenti_anagrafica utentianag4_ on this_.id_utente_anagrafica=utentianag4_.id_utente_anagrafica where this_.username=? 和 this_.password=?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:40:00.417

您在那里看到的控制台输出是因为您在休眠配置中有这个：

```
<property name="hibernate.show_sql">true</property> 
```

这告诉 hibernate 将 sql 准备好的语句记录到控制台。

很难从您的问题中判断 logback 日志记录是否正常工作，但如果它不在[这里](http://www.mkyong.com/hibernate/how-to-configure-logging-in-hibernate-logback/)，这是一个很好的（如果有点过时；只需更新版本号）教程来启动和运行它。

**编辑**

如果上述教程不起作用，那么很可能您使用的是 Hibernate 4 版本。

在更高版本的 hibernate 中，日志框架从 slf4j 切换到 JBoss 日志。这意味着 slf4j 不再是 Hibernate 依赖项。

您需要将最新的 slf4j JAR 添加到类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:53:25.883

如果您想记录所有 Hibernate 内容（这些日志很多，并且将是一个真正的性能问题），请使用`TRACE`日志级别而不是`ALL`.

# string - ActionScript 3.0 从文本文件中读取并将内容分配给字符串

> ID：15919866
> 
> 赞同：0
> 
> 时间：2013-04-10T07:43:41.130
> 
> 标签：string, actionscript-3, flash, text

我在读取文本文件的内容并将其写入字符串时遇到问题。我总是在文本文件中有 1 个单词，我想将该单词分配给一个字符串。这是我到目前为止可以（不）做的事情：

```
function lastGameFile()
{
file = File.applicationStorageDirectory.resolvePath("LastGame.txt");

var docDir:File = File.applicationStorageDirectory;

var fileString:String = docDir.nativePath;

var lastgameLoader:URLLoader = new URLLoader();
lastgameLoader.load(new URLRequest(file.url));
lastgameLoaderXML();
lastgameLoader.addEventListener(Event.COMPLETE,lastgameLoaderXML);
lastgameLoader.addEventListener(IOErrorEvent.IO_ERROR,IO_ERROR_lastgameLoaderXML);                  
    }

function IO_ERROR_lastgameLoaderXML(e:Event):void
{
    trace("IO_ERROR_lastgameLoaderXML")
}                       
function lastgameLoaderXML()
{
    trace("lastgame loader dan atıyor")
    lastgameXML = new XML(file);
    lastGameName = lastgameXML.GameName;
    FileName = lastGameName;
} 
```

LastGame.txt 是我的文本文件，我想将内容分配给 FileName。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:12:52.477

尝试将事件监听器移到函数上方`.load`。我的猜测是在你告诉你的应用程序在事件完成时运行一个函数之前事件已经完成。

另外，你打电话给你`lastgameLoaderXML()`两次，这是为什么呢？

试试这个功能`lastGameFile()`：

```
function lastGameFile()
{
    file = File.applicationStorageDirectory.resolvePath("LastGame.txt");
    var docDir:File = File.applicationStorageDirectory;
    var fileString:String = docDir.nativePath;
    var lastgameLoader:URLLoader = new URLLoader();
    lastgameLoader.addEventListener(Event.COMPLETE,lastgameLoaderXML);
    lastgameLoader.addEventListener(IOErrorEvent.IO_ERROR,IO_ERROR_lastgameLoaderXML);   
    lastgameLoader.load(new URLRequest(file.url));
} 
```

并放置`trace(preloader.response[0]);`在某处`lastgameLoaderXML()`。

# c# - 使用代码创建窗口时 WPF 绑定不起作用

> ID：15919872
> 
> 赞同：-2
> 
> 时间：2013-04-10T07:44:03.460
> 
> 标签：c#, wpf, binding

谁能帮我弄清楚为什么这段代码不起作用：

```
 private void button2_Click(object sender, RoutedEventArgs e)
    {
        BuildMainWindow().Show();
    }

    private Window BuildMainWindow()
    {
        Window w = new Window();
        w.BeginInit();

        System.Windows.Controls.Grid g = new System.Windows.Controls.Grid();
        g.BeginInit();
        System.Windows.Controls.RowDefinition r1 = new System.Windows.Controls.RowDefinition();
        r1.Height = new GridLength(1, GridUnitType.Star);
        System.Windows.Controls.RowDefinition r2 = new System.Windows.Controls.RowDefinition();
        r2.Height = new GridLength(1, GridUnitType.Star);
        g.RowDefinitions.Add(r1);
        g.RowDefinitions.Add(r2);

        System.Windows.Controls.Button b1 = new System.Windows.Controls.Button();
        b1.BeginInit();
        b1.Name = "b1";
        b1.Content = "Hello";
        Grid.SetRow(b1, 0);
        b1.EndInit();

        System.Windows.Controls.Button b2 = new System.Windows.Controls.Button();
        b2.BeginInit();
        b2.Name = "b2";
        b2.Content = "World";
        Grid.SetRow(b2, 1);
        b2.EndInit();

        g.Children.Add(b1);
        g.Children.Add(b2);
        g.EndInit();

        w.Content = g;
        w.EndInit();

        System.Windows.Data.Binding bind = new System.Windows.Data.Binding("Content");
        bind.ElementName = "b1";
        b2.SetBinding(System.Windows.Controls.ContentControl.ContentProperty, bind);

        return w;
    } 
```

这里我尝试创建一个 Window 对象，然后添加 Grid，然后向网格添加两个按钮，之后我尝试将 b2.Content 属性与 b1.Content 绑定，我的预期结果是运行后，b2.Content 将显示为“Hello "，但是运行后，b2.Content 是空的，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:07:20.557

在您的代码中，您可以使用`Binding.Source`实际的 b1 按钮而不是`Binding.ElementName`其名称：

```
//bind.ElementName = "b1";
bind.Source = b1; 
```

不知道为什么 ElementName 不起作用。它可能与 XAML 之间的差异`Name`有关`x:Name`，这是您通常使用 ElementName 绑定的地方。

[在 WPF 中，x:Name 和 Name 属性有什么区别？](https://stackoverflow.com/questions/589874/in-wpf-what-are-the-differences-between-the-xname-and-name-attributes/593151#593151)

# java - 如何处理自填充列表的超时异常？

> ID：15919874
> 
> 赞同：0
> 
> 时间：2013-04-10T07:44:08.390
> 
> 标签：java, webdriver, testng

在我的申请中，如果我必须选择大学名称，我只需要输入前三个字母（不少于那个），它就会生成一个大学列表。现在的问题是有时生成列表需要很长时间，有时它根本不生成列表并且测试失败并出现 TimeOutException 错误。为了处理这个问题，我把它放在了一个 try-catch 块中，在 catch 中，我正在清除并重新输入该 univ 框中的这些字母。但这使得代码非常丑陋/笨重，并且不能确保放入 catch 不会失败。所以我想循环它直到成功，它会继续清除并输入 Univ 字母，直到它填充列表。为什么我要这样做，因为它可以手动实时工作（没有 WebDriver/Automation）？这是正确的方法，如果不是，那么如何解决这个问题。如果是的话，如何使它成为可能？我认为它可以像这样工作：

```
#1 while (particular univ name is not visible)
#2 .clear
#3 .sendkeys first 3 letters
#4 wait till elelment is visble >> select >> pass
#5 if not visible >> repeat 2 & 3 
```

我正在使用 java 在 ubuntu 上编写我的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:16:54.683

我不认为这是一个正确的方法。这是您的应用程序中的一个错误。

如果输入的数据不正确并且没有匹配的列表，那么您应该期望不返回结果的唯一情况。在这种情况下，您的验证是：不返回结果，您可以自动化。

如果您有有效数据并且未返回结果，那么我会将其视为应用程序错误并与开发人员交谈。理想情况下，您不应该尝试在代码中处理，因为在这种情况下您隐藏了一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:07:53.987

建议需要等待期。将您的 .sendkeys 与 sleep 分开。所以列表可以正确累加。.sendkeys 睡眠 sendkeys 睡眠 sendkeys

# jquery - Jquery Accordion 附加要求

> ID：15919880
> 
> 赞同：0
> 
> 时间：2013-04-10T07:44:27.810
> 
> 标签：jquery, accordion

我需要在以下 jquery 代码中进行两项修改。[（演示在这里）](http://jsfiddle.net/awaises/ePLzL/)

1.  当我单击段落内的关闭链接时，我想向上滑动（隐藏）段落。
2.  当我向上/向下滑动任何段落时，活动类（箭头图标）应该可以正常工作。如果您注意到，当我打开两个段落时，箭头方向变得疯狂（∧ 向上，∨ 向下，∧ 向上）。当 para 关闭时，箭头指针应向下（∨），如果打开，则箭头应向上（∧）。

以下是我的代码

```
$(document).ready(function(){
    $(".accordion p").hide();

    $(".accordion h3").click(function(){
        $(this).next("p").slideToggle("fast")
        $(this).toggleClass("active");
        $(this).siblings("h3").removeClass("active");
    });
}); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:27:26.933

如果您想一次打开多个段落，这可能会对您有所帮助。

```
$(document).ready(function(){
    $(".accordion p").hide();

    $(".accordion h3").click(function(){
        $(this).next("p").slideToggle("fast")
        $(this).toggleClass("active");
    });

    $(".mylink").click(function(){
        $(this).parent('p').prev().trigger('click');
    });
}); 
```

检查[小提琴](http://jsfiddle.net/kishor_subedi/ePLzL/2/)的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:52:10.803

再加上一点工作，我相信你很快就会自己做！

`**[LIVE DEMO](http://jsfiddle.net/ePLzL/1/)**`

```
$(function(){
    $(".accordion p").hide();

    $(".accordion h3").click(function(){
        $(this).next("p").slideToggle("fast").siblings('p').slideUp("fast");
        $(this).toggleClass("active").siblings("h3").removeClass("active");            
    });

    $('.accordion a.mylink').click(function( e ){
        e.preventDefault();
        $(this).closest('p').slideToggle("fast").prev('h3').removeClass("active");        
    });
}); 
```

# python - 扩展 asyncore.dispatcher 的 HTTP 类

> ID：15919886
> 
> 赞同：0
> 
> 时间：2013-04-10T07:44:56.817
> 
> 标签：python, sockets, asyncore

是否有使用 asyncore.dispatcher 执行 HTTP 客户端的“标准”或众所周知的类？

我可以做一个，但我不想再次发明轮子:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:03:30.090

简短的回答是：不，至少不是您想要使用的任何东西。

大多数人认为这`asyncore`对于如何编写`select`基于事件循环的“示例代码”有点有用，但对于超出琐碎复杂性的实际项目的框架来说没有用。

过去有一些项目可以在其上构建严肃的东西`asyncore`，包括至少一个 Web*服务器*，但我不知道 Web*客户端*。这并不意味着不存在这样的东西……但我不希望它得到良好的维护或大量使用。

`asyncore`人们大多专注于从头开始构建新框架，而不是在. 最流行的可能是[`twisted`](http://twistedmatrix.com)（其架构`asyncore`与[`gevent`](http://gevent.org).一个事件循环）。

与此同时，Guido 和朋友们正在设计一个新的现代异步库（参见[PEP 3146](http://www.python.org/dev/peps/pep-3156/)和[`tulip`](http://code.google.com/p/tulip/)详细信息），它可能会出现在 3.4 中，并且可能会弃用`asyncore`.

所以，你的选择是：

*   `httplib`用和自己构建它`asyncore`。
*   搜索一个旧的、部分完成的实现并完成它。
*   使用`twisted`, `gevent`,`tulip`等
*   使用不同的高级抽象，例如[`pycurl`](http://pycurl.sourceforge.net)（或任何其他包装`libcurl`及其`curl_multi`API 的库）或[`grequests`](https://github.com/kennethreitz/grequests)（使用 来同步非常高级的`requests`HTTP 客户端库`gevent`）。

当然，您是否真的需要单线程事件循环也值得考虑。大多数客户端应用程序不需要处理十几个左右的连接，每个套接字的线程可以在任何平台上轻松处理。（当然，如果你有任何受 CPU 限制的代码，Python 线程会很糟糕，但基于单线程事件循环的代码会*更糟糕*，所以我认为这不是问题。）

* * *

首先，对您的评论进行一些一般性评论：

我不确定您所说的“性能”是什么意思。通常，对于网络应用程序，您会担心*可扩展性*：您可以同时处理多少个连接、每秒可以建立多少新连接、可以维持多少吞吐量等。*性能*——通常以多少 CPU/功率来衡量- 你在稳态工作流程中使用的绘制/散热——通常只有在你获得所需的所有可扩展性时才会使用它，即使这样，也只有当你计划运行几十个堆满盒子的房间时运行你的服务器。

无论如何，我不知道你在测试什么，但*所有*这些选项在 Linux 和 Mac OS X/*BSD 上都明显超过了速度`asyncore`，并且在任何人做过的任何合理测试下，在 Windows 上都完全被打败了。他们将使用 IOCP、`epoll`或`kqueue`而不是`poll`. 其中一些还将中心代码放在 C 中。它们都在大量实际使用中进行了广泛的测试和调整，而自十多年前添加支持`asyncore`以来没有任何改进。`poll`（这并不是因为`asyncore`它已经足够好，而是因为它还不够好，不值得改进。）

但对于客户端应用程序，可扩展性和性能通常都不是问题。仅从几十个站点进行并行下载通常足以使您的 FTTH/cable/DSL/等饱和。带宽，除此之外，您还想要什么？

所以，我提出这些替代方案的原因不是为了性能或可扩展性，而是为了简单和完整。Twisted 的 HTTP 客户端或`grequests`意味着您只需要编写 5 行代码，并且您有一些可以工作的东西，并且所有困难的部分都已经经过深思熟虑并经过大量测试。即使是自己构建它，运行`httplib`/ `urllib2`/whatever所需的工作量也要少得多（并且为 bug 提供的机会要少得多），而`gevents`不是把它拆开并重新构建它`asyncore`而不是阻塞套接字。

> 扭曲-我是初学者，至少目前没有那么多时间进行投资。

虽然`twisted`显然是一个巨大的项目，但您不必*全部*学习，对于初学者来说应该比`asyncore`. 查看我之前提供的链接中的 HTTP 客户端示例。`httplib`将其与使用和做同样的事情需要多少代码进行比较`asyncore`。

> gevent - 性能类似于 asyncore，但服务器负载很高。

如果服务器负载太高，那只能意味着您的客户端运行得太快……这是一个很好的问题；你总是可以限制一个太快的客户端，但是你通常不能对一个太慢的客户端做很多事情，除非重写整个事情。

# jsf - 将带有分隔内容的文本区域转换为实体列表

> ID：15919887
> 
> 赞同：1
> 
> 时间：2013-04-10T07:45:02.167
> 
> 标签：jsf, textarea, converter

到目前为止，我有一个简单的文本区域，可以在其中复制/粘贴分隔文本（使用逗号）。每条线代表一个新的日志（在本例中为 GPS 日志）。

例如：

```
1,15:26:38,5103.5889,400.8531,5
2,15:26:40,5103.5864,400.8449,6
3,15:26:43,5103.5815,400.8335,10
4,15:26:44,5103.5771,400.8259,12
5,15:26:48,5103.5688,400.8123,15
6,15:26:50,5103.5659,400.7946,22
7,15:26:52,5103.5513,400.7545,36 
```

所以你在这里：名字，时间，纬度，经度，速度

现在我正在使用一个简单的程序代码，如下所示：

```
List<GeoCoordinate> coordinates = new ArrayList<GeoCoordinate>();
        for (String line : gpsDump.split("\\n")){
            List<String> items = Arrays.asList(line.split("\\s*,\\s*"));
            GeoCoordinate c = new GeoCoordinate();
            Date date = null;
            try {
                date = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").parse(items.get(1));
            } catch (ParseException ex) {
                Logger.getLogger(GeoTrackController.class.getName()).log(Level.SEVERE, null, ex);
            }
            c.setDateTime(date);
            c.setLatitude(Float.parseFloat(items.get(2)));
            c.setLongitude(Float.parseFloat(items.get(3)));
            c.setSpeed(Integer.parseInt(items.get(4)));
            coordinates.add(c);
        } 
```

但我想重写这段代码并使其**更加面向对象**。我首先考虑在我的**实体**类中转换这些设置器，但是当我接受基本培训时，他们不鼓励这样做。

我还阅读了有关**转换器**的信息，但似乎它仅用于文本框。

那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:35:06.213

> *我还阅读了有关转换器的信息，但似乎它仅用于文本框。*

错了，你可以在任何[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)实现中使用它们[`ValueHolder`](http://docs.oracle.com/javaee/6/api/javax/faces/component/ValueHolder.html)（注意这个接口定义了一个 getter 和 setter 来获取/设置转换器）。所[`<h:inputTextarea>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/inputTextarea.html)代表的[`HtmlInputTextarea`](http://docs.oracle.com/javaee/6/api/javax/faces/component/html/HtmlInputTextarea.html)也属于这一类。

```
<h:inputTextarea ... converter="geoCoordinateCsvConverter" /> 
```

JSF`Converter`确实是在模型表示中基于 Java 对象的格式和 HTML 表示中基于字符串/字符序列的格式之间转换的正确方法。

# android - 来自 Eclipse 的类型不匹配，而我似乎使用了好的类型

> ID：15919892
> 
> 赞同：0
> 
> 时间：2013-04-10T07:45:18.040
> 
> 标签：android, arrays, eclipse, colors, type-mismatch

我有一个函数可以加载一个颜色数组，我需要在我的列表视图中交替颜色。

我从资源加载一个 xml 数组，这是一个字符串数组，所以我想将它转换为一个颜色数组。我的代码在下面：

```
public Color[] initColors() {
    String[] allColors = activity.getResources().getStringArray(R.array.colors);

    Color[] colors= new Color[10];
    try { 
        for(int i=0;i<allColors.length || i < 10;i++) {
            String colorstring = allColors[i];
            colors[i] = Color.parseColor(colorstring);
        }

    }catch(IndexOutOfBoundsException oob) {
        oob.printStackTrace();
    }catch(NullPointerException npe){
        //empty
        npe.printStackTrace();
    }
    return colors;

} 
```

现在我得到一个红色下划线和消息：

**类型不匹配，无法从 int 转换为 Color**

但我绝对确定 colorstring 是一个字符串，那么为什么它说我输入一个 int 呢？Color.parseColor 函数应该使用字符串...

任何想法？我真的不明白，我认为我这样做是正确的，但日食不是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:48:08.830

`Color.parseColor`在 java doc 中返回一个 int：

```
Parse the color string, and return the corresponding color-int. If the string cannot be 
parsed, throws an IllegalArgumentException exception. Supported formats are: #RRGGBB 
#AARRGGBB 'red', 'blue', 'green', 'black', 'white', 'gray', 'cyan', 'magenta', 
'yellow', 'lightgray', 'darkgray' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:49:25.417

给出错误的不是`colorString`那个，而是这个

```
colors[i] = Color.parseColor(str);
^^^^^^^^ 
```

因为[Color#parseColor](http://developer.android.com/reference/android/graphics/Color.html#parseColor%28java.lang.String%29)返回一个`int`而不是一个`Color`对象。

因此，`int`（返回类型 of `parseColor()`）无法转换为的错误`Color`。

# joomla1.5 - 本地主机上带有 SH404SEF 扩展的 Joomla 中的禁止访问（洪水）

> ID：15919894
> 
> 赞同：0
> 
> 时间：2013-04-10T07:45:20.703
> 
> 标签：joomla1.5, joomla-extensions

我正在尝试在我的本地主机（MAMP）上创建我的全功能 Joomla 1.5 网站的实例。

我创建了一个新数据库并导入了实时数据库，复制了 Joomla 文件并更新了 config.php 文件。

可以访问 Joomla 管理后台界面但无法访问前端。

我收到禁止访问（洪水）错误，我尝试禁用 SH404 插件，但这对我没有帮助。

我增加了 SH404 泛洪限制，即使这样也没有帮助。

有什么想法吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T16:20:21.290

转到此文件：`administrator/components/com_sh404sef/custom.sef.php`

编辑这个变量：`shDefaultParams['sh404SEF_USE_NON_STANDARD_PORT']=0`

至`shDefaultParams['sh404SEF_USE_NON_STANDARD_PORT']=1`

# sql - 将多个数据插入数据库

> ID：15919899
> 
> 赞同：3
> 
> 时间：2013-04-10T07:45:32.557
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我正在学习使用 SQL Server 2008 R2，但我有点卡在 INSERT 选项上。我想一次插入多个数据，我正在使用这个：

```
INSERT INTO Members (column1, column2, column3, column4, column5)

VALUES ('value1', 'value2', 'value3', 'value4', 'value5'),

       ('value1', 'value2', 'value3', 'value4', 'value5'),

       ('value1', 'value2', 'value3', 'value4', 'value5') 
```

哪个ofc有效。但是假设我想要插入 1000 条记录（来自另一个文件，例如 Excel），我该怎么做？任何参考我可以在哪里学习这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:52:22.863

Use SELECT statement to insert multiple data like:

```
INSERT INTO Members (column1, column2, column3, column4, column5)
SELECT 'value1', 'value2', 'value3', 'value4', 'value5'
UNION
SELECT 'value1', 'value2', 'value3', 'value4', 'value5'
UNION
SELECT 'value1', 'value2', 'value3', 'value4', 'value5' 
```

or

```
INSERT INTO Members (column1, column2, column3, column4, column5)
SELECT Column1, Column2, Column3, Column4, Column5 FROM Table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:18:05.817

从[文档](http://technet.microsoft.com/en-us/library/dd776382.aspx)中：

> 通过直接在 VALUES 列表中插入行可以构造的最大行数为 1000。如果在这种情况下行数超过 1000，则会返回错误 10738。要插入超过 1000 行，请使用以下方法之一：
> 
> *   创建多个 INSERT 语句
> *   使用派生表
> *   使用 bcp 实用程序或 BULK INSERT 语句批量导入数据

如果您想使用 bcp 实用程序，这是一个很好的答案：[SQL Server Management Studio 2012 - Export/Import data from/to table](https://stackoverflow.com/questions/11356911/sql-server-management-studio-2012-export-import-data-from-to-table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:04:53.907

如果要从 excel 文件中插入值，请使用 sql server 的导入向导，这是最简单的。在 sql server 中，右键单击您的数据库，指向任务，然后单击导入数据或导出数据。（查看[http://msdn.microsoft.com/en-us/library/ms140052.aspx](http://msdn.microsoft.com/en-us/library/ms140052.aspx)以获得更多解释）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:01:18.147

您可以简单地`Export Wizard`在数据库上运行 a 。只需按照以下步骤操作。

第 1 步：右键单击数据库
第 2 步：选择任务
第 3 步：选择导出数据
第 4 步：输入数据源详细信息（在这里您将选择您的 Excel 文件）

*   选择 Excel 文件作为数据源
*   并给出Excel文件路径

第 5 步：输入目标详细信息（您的表名）
第 6 步：选择要重新创建的表。

而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T08:01:34.800

1.  您可以将数据文件保存为 CSV 格式文件，例如 C:\myData.csv
2.  执行语句“ LOAD DATA INFILE 'C:/myData.csv' INTO TABLE Members”

希望这可以帮到你：）

# java - 春天的连锁反应

> ID：15919901
> 
> 赞同：0
> 
> 时间：2013-04-10T07:45:40.990
> 
> 标签：java, spring, annotations

Spring解析Spring定义文件中定义的注释bean的顺序是否重要，如下所示：

```
<context:annotation-config />

<context:component-scan base-package="com.for.jms"/>
<context:component-scan base-package="com.for.lookup"/>
<context:component-scan base-package="com.for.persistence"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:47:43.267

应该没关系。它们都将是 bean，并且 bean 创建周期应该整理出所需的创建顺序。

# ios - AVCaptureVideoPreviewLayer 的 setFrame 无法正常工作

> ID：15919902
> 
> 赞同：3
> 
> 时间：2013-04-10T07:45:41.273
> 
> 标签：ios, avfoundation, layer

我正在尝试像这样将 AVCaptureVideoPreviewLayer 添加到我的视图中

```
[captureVideoPreviewLayer setFrame:CGRectMake(10.0f,10.0f,300.0f,300.0f)];
[self.view.layer addSublayer:captureVideoPreviewLayer]; 
```

但它似乎没有遵循 CGRectMake，层的高度是 300 但不是宽度，我不知道为什么！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T19:05:54.070

解决方案很简单，我只需要添加即可`captureVideoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;`解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:58:36.997

似乎您的视图的图层尺寸错误。为此，将视图的大小至少更新到所需的矩形：

```
[self.view setBounds:CGRectMake(10.0f,10.0f,300.0f,300.0f)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:16:13.977

确保您将视图出口分配给`captureVideoPreviewLayer`，更好地访问 like `self.captureVideoPreviewLayer`。如果您按顺序做事，那么设置框架应该使用`CGRectMake`. 我一直在用它来改变预览层的大小。

```
 self.captureVideoPreviewLayer.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height); 
```

# ajax - 对 Web 服务的 Ajax 调用

> ID：15919905
> 
> 赞同：1
> 
> 时间：2013-04-10T07:45:45.200
> 
> 标签：ajax, web-services

我有一个 C# Web 应用程序，我在其中使用 ajax 调用 Web 服务。ajax 代码如下所示

```
$.ajax({
                  type: 'GET',
                  url: "WebServices/testwebService.asmx/Methodname",
                  contentType: "application/json; charset=utf-8",
                  data: { value: "string" },
                  dataType: 'xml',
                  success: function (data) {
                      alert(data);
                  },
                  error: function (data) {
                      alert("In error");
                  }

              });
          }); 
```

服务 'WebServices/testwebService.asmx/Methodname' 返回一个字符串列表（或者可以是一个字符串）

在这里，如果我给出 type: 'GET' 和 dataType: 'json' 它正在重定向到错误部分。

如果它以 dataType 'json' 或 'string' 的类型给出：'POST'，或者 dataType 'xml' 或 'string' 的类型为：'GET'，它会重定向到成功部分。和 'xml' dataType 类型：'POST' 重定向到错误部分。

我对 ajax 中的 dataType 概念感到非常困惑。

当我签入 Firebug 时，响应数据始终为 xml 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:21:52.963

ASMX SOAP Web 服务使用 HTTP-POST 协议调用该方法。理想情况下，ajax 调用中的“类型”参数应该具有值“POST”。（[查看 MSDN 文档](http://msdn.microsoft.com/en-us/library/0c515353%28v=vs.71%29.aspx)）

关于数据类型，响应数据完全取决于您在 ajax 调用中提到的内容类型和数据类型。根据数据类型参数，JQuery 处理来自服务器的响应，对于 SOAP Web 服务，它始终是 XML。

如果您将数据类型参数值设为“xml”，您将在成功回调函数中获得一个 XML 文档。如果您将其设为 JSON，您将在成功回调函数中获得 JSON 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:34:02.287

如果您使用的是 json 数据类型，服务器应该返回一个 json。如果您对 dataTypes 有任何疑问，请通过[此链接。](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

# php - 如何在服务器端获取附加到 curl 函数的数据？

> ID：15919910
> 
> 赞同：0
> 
> 时间：2013-04-10T07:45:57.217
> 
> 标签：php, post, curl, wordpress

我必须将一组数据传递给服务器并从服务器获取响应..我在 clientside.php 上收到未定义的变量错误，我正在尝试打印接收到的内容..如何在服务器端获取响应并发送它带有附加信息返回客户端..我正在使用 curl 功能来实现这一点..

我的clientside.php

```
 $url = "http://some_ip_address/../../../../serverside.php";
    //$abc is variable which contains all data in array format 
    $abc;
    $post_data = array('data' => serialize($abc)); 
    $ch = curl_init();
        curl_setopt($ch, CURLOPT_POST,1);
        curl_setopt($ch, CURLOPT_POSTFIELDS,$post_data);
        curl_setopt($ch, CURLOPT_URL,$url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        if(curl_exec($ch) === false) {
        echo 0;
        } else {
        echo 1;
        }

$output= curl_exec($ch);
echo $output;
curl_close ($ch); 
```

我的 Serverside.php 是这样的

```
print_r($_POST['data']); 
```

我收到以下错误

```
*Notice: Undefined index: data* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:48:31.423

尝试 http_build_query()：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post_data)); 
```

不要调用 curl_exec 两次：

客户端.php

```
$url = "http://some_ip_address/../../../../serverside.php";
//$abc is variable which contains all data in array format 
$abc;
$post_data = array('data' => serialize($abc)); 
$ch = curl_init();

curl_setopt($ch, CURLOPT_POST,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post_data));
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

$output= curl_exec($ch);
echo $output;
curl_close ($ch); 
```

服务器端.php：

```
 print_r($_REQUEST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T07:51:55.283

[来自curl_setopt](http://php.net/manual/en/function.curl-setopt.php)的 PHP 文档，关于`CURLOPT_POSTFIELDS`选项：

"*如果 value 是一个数组，则 Content-Type 标头将设置为**multipart/form-data**。* "

您必须构建有效的 HTTP 查询字符串（使用`http_build_query()`）或设置正确的内容类型，因为您使用数组作为值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:58:53.457

尝试改变：

```
$post_data = array('data' => serialize($abc)); 
```

进入

```
$post_data = "data=" . urlencode(serialize($abc)); 
```

**编辑：**您也可能想准备好这个答案： [application/x-www-form-urlencoded 或 multipart/form-data?](https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data/4073451#4073451)

**编辑2：**请不要忘记安德烈所说的关于删除第一个 curl_exec() 因为你不应该有两次！所以删除：

```
if(curl_exec($ch) === false) {
  echo 0;
} else {
  echo 1;
} 
```

# cookies - Azure cookie 'WAWebSiteSID' 的确切用途是什么？

> ID：15919911
> 
> 赞同：2
> 
> 时间：2013-04-10T07:46:04.443
> 
> 标签：cookies, azure

我的 Azure 网站设置了一个名为“WAWebSiteSID”的 http 会话 cookie。我找不到任何关于它的文档。这个 cookie 的确切用途是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:16:07.233

[Windows Azure](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)网站使用此 cookie来识别您的请求要转到哪个服务器实例。

[可以在此处](http://ntotten.com/2012/06/07/10-things-about-windows-azure-web-sites/)找到有关 Windows Azure 网站的更多信息。也可以在[这里](http://www.slideshare.net/maartenba/windows-azure-web-sites-things-they-dont-teach-kids-in-school)浏览深入的技术演示。

要完全理解（如果愿意的话），您还需要理解[IIS 的应用程序请求路由模块](http://www.iis.net/downloads/microsoft/application-request-routing)。

# git - 如何确定工作副本包含子树？

> ID：15919923
> 
> 赞同：4
> 
> 时间：2013-04-10T07:46:55.773
> 
> 标签：git, git-subtree

假设我们有以下工作副本结构：

```
.
├── adm
└── etc 
```

和

```
$ git remote -v
origin  git@github.com:xxx/my.git (fetch)
origin  git@github.com:xxx/my.git (push) 
```

现在，假设我们通过以下方式添加了一个子项目`git subtree`：

```
git remote add extlip git@github.com:yyy/ExtLib.git
git subtree add -P tech -m "added extlib as a sub-project" extlib/master 
```

这样

```
.
├── adm
├── etc
└── tech 
```

和

```
$ git remote -v
origin  git@github.com:xxx/my.git (fetch)
origin  git@github.com:xxx/my.git (push)
extlip  git@github.com:yyy/ExtLib.git (fetch)
extlip  git@github.com:yyy/ExtLib.git (push) 
```

现在假设你有一段时间没有在这个项目上工作，你如何识别子项目的根？说，你如何识别你“子树化”的位置以及哪个是正确的遥控器？或者，你如何确定你“子树化”了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T05:48:32.303

检测添加子树的提交的一种方法是查找两个父级不属于同一棵树的合并提交，或者换句话说，这两个提交在其历史记录中不共享任何先前的提交。

一个如何在 bash 中检测这种情况的示例脚本，从您的 git 存储库的根目录运行它：

```
#!/bin/bash

# To separate the rev-list by newlines
IFS=$'\n'

# This rev list will return the hash and the parents, separated by spaces,
# of any merge commit found in the history of HEAD
for hashes in $(git rev-list --merges --parents HEAD); do

    # To split the commits by space
    IFS=$' '
    hashList=($hashes)

    # Merge base will find the most recent commit shared by all the
    # given commits, output dumped just to not clutter
    git merge-base ${hashList[1]} ${hashList[2]} > /dev/null

    # We care only if such commit did not exist, which means each parent is
    # in its own separate tree
    if [[ $? != 0 ]]; then
        echo "Subtree merge: ${hashList[0]}"
    fi
done
unset IFS 
```

# c# - 从类库中瞥见日志记录

> ID：15919926
> 
> 赞同：1
> 
> 时间：2013-04-10T07:47:09.837
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, glimpse

我有一个带有 Glimpse 的 ASP.NET MVC 项目。我使用 Debug.WriteLine 进行日志记录，我在 Glimpse 中看到了“日志”。

我有一个 ASP.NET MVC 项目引用的类库。当我在类库中使用 Debug.WriteLine 时，它​​在“值不能为空”上失败，并且堆栈跟踪说 HttpContext 为空。

我的问题是，如何绕过它或如何设置 Glimpse 以便能够从 ASP.NET MVC 项目引用的类库中记录消息。

# scikit-learn - 如何获得经过训练的 LDA 分类器的特征权重

> ID：15919929
> 
> 赞同：4
> 
> 时间：2013-04-10T07:47:19.133
> 
> 标签：scikit-learn

LDA 分类器将对象特征向量与特征权重向量相乘，然后使用固定阈值预测对象类别。或者wx(o) > c，其中w是特征权重向量，x(o)是对象o的特征向量，c是阈值。

我想使用 scikit-learn 从训练有素的 LDA 分类器中获取特征权重 (w)，我想知道是否有可用的函数？

查看代码，我看到两个属性 coef_ 和 scalings_，它们提到了特征权重。coef_ 的描述，“线性决策函数中特征的系数”，似乎与我正在寻找的内容相对应，但我不确定这是否正确。如果这是我应该使用的属性，现在有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T13:50:54.123

你是对的，`coef_`持有权重（又名系数），但决策函数实际上比它更复杂一点`w.T * x`，它是（从[源代码](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/lda.py)解释）：

```
X = np.dot(X - self.xbar_, self.scalings_)
return np.dot(X, self.coef_.T) + self.intercept_ 
```

在计算线性阈值函数之前，首先将so`X`居中并投影到较小的子空间（使用 中的奇异值分解计算）。`fit`

# ruby - 使用 ocra 和 sqlite 生成 INNOSetup 安装程序时出错

> ID：15919933
> 
> 赞同：1
> 
> 时间：2013-04-10T07:47:30.313
> 
> 标签：ruby, sqlite, inno-setup, ocra

我正在尝试将带有 ocra 的 ruby​​ + qtruby + sqlite3 应用程序打包到 Windows 安装程序中。

一切顺利，直到我添加连接到数据库的代码。

这是片段：

```
require 'Qt4'
require 'rubygems'
require 'active_record'

dbconfig = YAML::load(File.open('src/config/database.yml'))['development']
ActiveRecord::Base.establish_connection(
:adapter => dbconfig['adapter'],
:database => dbconfig['database']
)

class Category < ActiveRecord::Base
end

Category.find(:all)

exit if Object.const_defined?(:Ocra)
... 
```

此代码运行并且 ocra 能够创建单个可执行文件，但是如果我尝试创建安装文件，这是我得到的错误：

```
=== Running InnoSetup compiler ISCC                                                                                       
Error in D:\Workspaces\Ruby\TestGui\ocratemp.iss: Impossibile accedere al file. Il file Þ utilizzato da un altro processo.
Compile aborted.                                                                                                          
ERROR: InnoSetup installer creation failed: ISCC failed to run. Is the InnoSetup directory in your PATH?                  
rake aborted! 
```

错误是意大利语，对不起，但它翻译为“**无法访问该文件。该文件当前被另一个进程使用**”

这是用于生成安装程序的命令：

```
ocra --chdir-first --no-lzma --no-autoload --innosetup testGui.iss gui.rb src/db/development.db src/config/database.yml 
```

如果我注释掉连接到 sqlite 的代码块，则安装程序会正确创建，我可以在测试机器上正确使用。如果我在连接到 sqlite 之前移动*exit if...*块，则生成的可执行文件/安装程序缺少 sqlite 库，并且在目标机器中我无法执行它。

我认为该错误与未关闭 sqlite 的连接有关，但也许我遗漏了其他内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T16:40:23.383

我知道这很旧，但我也遇到了同样的错误。关闭防病毒软件后，我运行的一切都运行良好。我的安装文件已创建并正常运行。

# php - 如果 individual_sex 匹配，则尝试获取所有内容，然后返回 product_id

> ID：15919934
> 
> 赞同：1
> 
> 时间：2013-04-10T07:47:31.207
> 
> 标签：php, xml, xpath

这是我的 XML 文件：

```
<products>
  <product_id value="1">
    <tab_id value="351">
        <city_name value="Jamnagar"/>
        <individual_sex value="2"/>
    </tab_id>
  </product_id>
  <product_id value="2">
    <tab_id value="352">
        <city_name value="Rajkot"/>
        <individual_sex value="2"/>
    </tab_id>
  </product_id>
</products> 
```

这是我在 php XPath 中的尝试

```
list ($gender_id) = $product->xpath("//individual_sex[@value='$sex']/../../@value"); 
```

我尝试检查`individual_sex`属性值是否匹配，然后返回`product_id`和`1, 2`（这是`product_id`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:33:14.473

正如一些用户已经说过的那样，你`xpath`的很好，但你`list`在这里的使用不正确。
要访问 的各个值`<product_id>`，请执行以下操作：

```
// assuming $xml is your simplexml-object...
$results = $xml->xpath("//individual_sex[@value='2']/../../@value");

foreach ($results as $result) echo $result['value'],"<br />"; 
```

现场演示：[http ://codepad.viper-7.com/h0Ckxc](http://codepad.viper-7.com/h0Ckxc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:52:51.637

您只是在代码中犯了一个小错误，您只为变量分配了一个条目：

```
list ($gender_id) = ... 
```

请参阅[http://php.net/list](http://php.net/list)。如果要获取整个数组，请将其分配：

```
$gender_ids = ... 
```

另请参阅[http://php.net/array](http://php.net/array)以及关于如何在 PHP 中编写代码的非常基本的描述，它的基本语法。

# git - 模拟存储库颠覆外部到 git

> ID：15919936
> 
> 赞同：0
> 
> 时间：2013-04-10T07:47:38.113
> 
> 标签：git, svn, externals

我使用 subversion 开发 webprojects，我想迁移到 git。我有一个 lib 文件夹（php 文件）、一个 js 文件夹（js 文件）和每个 webproject 一个不同的目录（例如 project1），其中包含 lib 文件夹和 js 文件夹作为外部文件。这样我的存储库中有一份 js 文件和 php lib 文件的副本。如果我更改项目文件夹中标记为外部的文件，则更改会传播到所有项目和库文件夹。如何在 git 上模拟这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:54:15.643

Perhaps you're looking for Git submodules.

Have a look here for more information: [http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# javascript - 使用表单时数据乱码

> ID：15919938
> 
> 赞同：2
> 
> 时间：2013-04-10T07:47:40.120
> 
> 标签：javascript, ajax, forms

`form.submit()`当我使用在数据库中存储为乱码的非英文字符（比如中文、韩文）提交表单时。

我在jsp中使用了以下代码：

```
<%
 response.setContentType("text/html;charset=utf-8");
 response.setCharacterEncoding("UTF-8");
%>
<html>
  <head>
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
 <body>
 <form name="TestForm" enctype="application/x-www-form-urlencoded" accept-charset="UTF-8" action="<%=formaction%>" method="POST">
  <table>
   <tr><td>Source</td><td>:</td>
   <td><input type="text" name="SOURCE"> </td></tr>

   <tr><td>Category</td><td>:</td>
   <td><input type="text" name="CATEGORY"> </td></tr>

   <tr><td>Message</td><td>:</td>
   <td><input type="text" name="MESSAGE"> </td></tr>
   <tr><td><input type="submit" name="Submit" value="Ok"></td></tr>
  </table>
 </form>
 </body>
 </html> 
```

我正在设置请求选项，例如`Content-type`，`CharSet`当我发送 Ajax 请求时。它在 Ajax 中按预期工作，但即使我在表单中设置了这些属性，它也无法在`form.submit()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:35:59.550

尝试使用以下代码在服务器端获取值。确保在 getParameter 之前设置字符编码

```
request.setCharacterEncoding("UTF-8"); 
String str = request.getParameter("fuzz-field"); 
```

还要检查您的服务器是否将 URIEncoding 设置为 UTF-8

希望这可以帮助

这是我尝试并让它工作的示例代码

JSP

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
pageEncoding="UTF-8 %> 

  <form id="form-sample" name="form-sample" method="post" action="/HTML5Sample/sampleservlet">
<!--field has the value of two Chinese characters.-->
<input type="text" id="fuzz-field" name="fuzz-field" value="中文"/>
<input type="submit" value="Submit">
</form> 
```

Tomcat 服务器.xml

```
<Connector port="8080" protocol="HTTP/1.1"
connectionTimeout="20000" redirectPort="8443" URIEncoding="UTF-8"/> 
```

Servlet 类 -

```
request.setCharacterEncoding("UTF-8"); 
String str = request.getParameter("fuzz-field");
System.out.println("character field " + str); 
```

要在 Eclipse 控制台上查看此内容，您需要修改控制台设置 - Window > Preference > encoding to utf-8

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T08:36:08.500

感谢您的意见。我已经解决了这个问题。自从这个问题发生以来，我使用了一个自定义过滤器而不使用**characterEncodingFilter 。**添加此过滤器并在 WEB-INF/web.xml 中配置后，一切正常。

有关更多信息，请参阅此 wiki： *[http ://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)*

# python - 在 python 中进行 Squish 测试以测试 qt 应用程序

> ID：15919941
> 
> 赞同：0
> 
> 时间：2013-04-10T07:47:58.907
> 
> 标签：python, qt, testing, squish

我正在尝试在 Squish IDE 上编写一个关于 python 的测试来测试 QT 应用程序。我可以使用 Squish 记录测试，但我不知道如何手写？

下面是测试记录

```
def main():
    startApplication("hmi")
    mouseClick(waitForObject(":Setup_Text"), 18, 5, 0, Qt.LeftButton)
    activateItem(waitForObjectItem(":_QMenu", "Monitor setup       X"))
    mouseClick(waitForObject(":_Rectangle"), 33, 31, 0, Qt.LeftButton)
    activateItem(waitForObjectItem(":_QMenu", "ECG                X"))
    mouseClick(waitForObject(":_Rectangle_2"), 65, 66, 0, Qt.LeftButton)
    sendEvent("QCloseEvent", waitForObject(":_QDeclarativeView")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-23T11:08:52.113

就我个人而言，我使用类来定义 PageObjects（从 cucumber/selenium 中汲取灵感），使用包装器来定义用于登录和加载要测试的模块的小部件和装饰器的功能。这提供了代码的最大重用和最小的维护开销。

这也意味着可以在编写任何代码之前创建测试，只要开发人员能够合理地命名小部件并预先定义它们。

```
from globals.widgets.QPushButton import QPushButtonWrapper # simple click functions
from globals.toolbars.sometoolbar import SomeToolBar

class SomeFormPO(PageObject): #PageObject has some "lazy ok and cancel methods"

    def __init__(self):
        name = <symbolic name>
        PageObject.__init__(self, name)

        self.some_tool_bar = SomeToolBar() # contains defines for toolbar e.g.
         #  self.some_button = QPushButtonWrapper(<symbolic name of button>) 
```

然后在你的测试中：

```
from globals.path.login.login import LoginDecorator
from globals.path.pages import SomeFormPO

def main():
    """
    sensible test details

    """
    log_docstring(main)
    run()

@LoginDecorator
def run():

    some_form = SomeFormPO()

    test.verify(some_form.visible(), "some form is visible")
    some_form.some_tool_bar.some_button.click() 
```

这不是完全描述这些方法的地方，但是如果您阅读：-

`UI Tests with Cucumber (5 part blob series) <http://www.cheezyworld.com/2010/11/09/ui-tests-not-brittle/>`_ *(红宝石)* `Selenium on PageObjects <http://code.google.com/p/selenium/wiki/PageObjects>` _ *(Java)*

您将了解所使用的原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T03:45:06.430

您需要在 startApplication 行之后设置断点。在它下面放一个贪睡（5）。

一旦程序中断，几秒钟后，应用程序对象窗口将填充对象映射/层次结构。通过这种层次结构，您可以以线性方式访问对象。每次您扩展一个对象以查看它的子对象时，都会更深一层。

例如，假设我正在查看“应用程序对象”窗口，我看到的只是一个可点击的右向箭头，标记为：-> MainDeclarativeView

然后我点击它，它会展开：

# | 主声明视图

# -> 一些按钮

我访问 SomeButton 及其属性，如下所示：

myButton = findObject(":MainDeclarativeView.SomeButton")

注意 MainDeclarativeView 前面的冒号和指定 SomeButton 是 MainDeclarativeView 的子对象的句点。现在，如果你这样做：

鼠标单击（我的按钮）

您将单击它。您也可以将 waitForObject 作为参数放入 findObject，然后将“:Main ....”放入 waitForObject 中，但根据我的经验，它并没有什么不同。如果在“应用程序对象”菜单中看不到该对象，则无法找到该对象并将其作为对象分配给变量。

从此时起，您可以通过 myButton 访问 SomeButton 的属性，例如

showMeX = myButton.x

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T03:52:54.033

使用屏幕截图验证点来帮助您识别什么是什么。如果您单击应用程序对象窗口中的对象复选框，它们将（最终）填充在 Spy 页面上的单独选项卡中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-06T09:10:24.010

您还可以检查元素并获取它们的真实/符号名称。这是（简单地说）Squish 识别对象的方式。

要检查元素，请**暂停**正在运行的测试。Squish IDE 将再次打开，并在**右上角**找到选项卡**Test Debugging**。切换到此视图，您将在**左下角找到****应用程序对象**。按下复选框，将显示所选对象。您还可以右键单击对象并复制真实/符号名称。

 **当您选择一个对象时，您还可以读取它的属性和方法。通常它显示在应用程序上下文旁边的窗口中。**

# iphone - 对对象的 NSArray 进行排序 WRT 包含在这些对象中的 NSSet 中的对象

> ID：15919947
> 
> 赞同：2
> 
> 时间：2013-04-10T07:48:16.703
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

所以这里是层次结构：

`NSArray`A 包含 3 个对象。这些自定义对象中的每一个都包含`NSSet`另一个自定义对象。这些“另一个自定义对象”中的每一个都包含一个数字。

我想`NSArray`按那个数字对 A 进行排序。我不在乎拾取了集合中的什么对象。该集合中的任何对象都可以。

关于如何做到这一点的任何线索`NSSortDescriptor`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:39:05.693

Key-Value 编码也适用于自定义对象的属性（甚至是实例变量），如下例所示。但是您必须指定一个应用于集合的集合运算符以选择要排序的对象，`@max`例如`@min`或`@avg`。

```
// The "inner object", containing a number:
@interface Custom1 : NSObject
@property (nonatomic, strong) NSNumber *number;
@end

@implementation  Custom1
@end

// The "outer object", containing a set of "inner" objects:
@interface Custom2 : NSObject
@property (nonatomic, strong) NSSet *others; // set of "Custom1 objects.
@end

@implementation  Custom2
@end 
```

现在您可以执行以下操作：

```
Custom1 *o1 = [[Custom1 alloc] init];
o1.number = @1;
Custom1 *o2 = [[Custom1 alloc] init];
o2.number = @2;
Custom2 *p1 = [[Custom2 alloc] init];
p1.others = [NSSet setWithObjects:o1, o2, nil];

Custom1 *o3 = [[Custom1 alloc] init];
o3.number = @3;
Custom1 *o4 = [[Custom1 alloc] init];
o4.number = @4;
Custom2 *p2 = [[Custom2 alloc] init];
p2.others = [NSSet setWithObjects:o3, o4, nil];

NSArray *array = @[p1, p2];

// Sort according to maximum number in the inner object set:
NSSortDescriptor *sort = [NSSortDescriptor sortDescriptorWithKey:@"others.@max.number" ascending:YES];
NSArray *sortedArray = [array sortedArrayUsingDescriptors:@[sort]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:34:07.617

由于数据存储在`NSArray`排序中，因此可以使用块来完成排序，排序描述符称为比较器。请注意，这种方法不适用于 SQLite 支持的核心数据提取，后者直接对存储在基础数据库中的属性值进行排序。

有几种方法可以解决，这个是直截了当的，与行人接壤（我希望我的数据结构是正确的）：

```
NSArray *data = @[
    @{@"otherobjects":[NSSet setWithObjects: @{@"num":@2}, @{@"num":@1}, @{@"num":@4}, nil]},
    @{@"otherobjects":[NSSet setWithObjects:@{@"num":@7}, @{@"num":@9}, @{@"num":@8}, nil]}
];

NSSortDescriptor *sd = [NSSortDescriptor sortDescriptorWithKey:@"otherobjects" ascending:NO comparator:^NSComparisonResult(id obj1, id obj2) {

    NSNumber *n1 = [[obj1 anyObject] valueForKey:@"num"];
    NSNumber *n2 = [[obj2 anyObject] valueForKey:@"num"];
    return [n1 compare: n2];
}];

NSArray *sorted = [data sortedArrayUsingDescriptors:@[sd]]; 
```

如果你想变得花哨，你可以在你的自定义对象上实现一个比较两个对象的方法，然后使用该方法创建一个排序描述符，或者你可以声明一个只读属性，例如返回最大值或最小值`NSSet`，然后简单地对该属性使用正常的排序描述符。

# java - 演员表到 Java 中的 Object[][]

> ID：15919948
> 
> 赞同：3
> 
> 时间：2013-04-10T07:48:29.360
> 
> 标签：java, arrays, list, casting, classcastexception

如何在Java中将数组列表转换为二维数组？

```
//Prepare the list
List<Object[]> conf = new LinkedList<Object[]>();
conf.add(new Object[]{ "FOO", "BAR"});
conf.add(new Object[]{ "FOO", "BAR"}); 
```

我试过了：

```
Object[][] array = (Object[][]) conf.toArray(new Object[0]); 
```

但它失败了`ClassCastException`：

```
java.lang.RuntimeException: java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [[Ljava.lang.Object; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T07:51:18.800

您缺少一对方括号：

```
 Object[][] array = conf.toArray(new Object[0][]);
                                                 ^^ 
```

或者，如果您希望节省一个不必要的内存分配：

```
 Object[][] array = conf.toArray(new Object[conf.size()][]); 
```

`Object[][]`一旦参数 to`toArray()`具有正确的类型，就不需要强制转换。

# ruby - 如何在 Ruby 中初始化当前类以外的实例？

> ID：15919954
> 
> 赞同：0
> 
> 时间：2013-04-10T07:48:46.577
> 
> 标签：ruby, oop, class, proxy, instance

我想根据初始参数初始化不同类的实例。例如，我想对`Hello.new(true)`和有不同的行为`Hello.new(false)`。准确地说，我希望他们创建**不同类的实例**。

我怎样才能在 Ruby 中实现这一点？

```
class Name1
end

class Name2
end

class Hello
  def initialize(opts)
    if opts
      Name1.new
    else
      Name2.new
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:05:04.773

你所说的叫做`Factory`模式（至少，一个简单的版本）。可以将`new`进程调用`allocate`和`initialize`手动拆分，但我不建议这样做。

主要原因是因为它完全违反直觉。您将（几乎）永远找不到这样的 Ruby 库。

相反，我建议您使用不同的方法。例如，`#factory`。

```
class Name1
end

class Name2
end

class Hello
  def self.factory(opts)
    klass = if opts
      Name1
    else
      Name2
    end
    klass.new
  end
end

Hello.factory(...) 
```

# css - @media print css 没有给出期望的输出

> ID：15919957
> 
> 赞同：3
> 
> 时间：2013-04-10T07:48:52.333
> 
> 标签：css

我使用@media print 和@media screen 进行打印。对于@media screen，它可以正常工作，但对于@media print，它不会将虚线表显​​示为屏幕。

```
 @media screen{
    body{
        font-family:"Courier New", Courier, monospace;  
        font-size:13px;
    }
    .f1{
        text-transform:uppercase;
        display:block;
        text-align:center;
    }

    .f2{
        text-transform:uppercase;
        display:block;
        margin-left:10px;
    }

    .border_bottom{
        border-bottom:2px dashed #000;
    }
    .border_top{
        border-top:2px dashed #000;
    }

    .body_table{
        border:1px dashed #CCCCCC;
        padding:.5em;
    }   
}

   @media print {
            body {
                font: 12pt georgia,serif;
            }

            h1 {
                font-size: 18pt;
            }

    h2 {
        font-size: 15pt;
        color: #000;
    }

                 .border_bottom{
        border-bottom:2px dashed #000;
    }
    .border_top{
        border-top:2px dashed #000;
    }

    .body_table{
        border:1px dashed #CCCCCC;
        padding:.5em;
            }
        } 
```

通过上面的这些代码，@media 屏幕就像我想的那样工作得很好。即我可以看到带有虚线边框的账单，但是在打印部分时，虚线边框不起作用并且未显示。账单在桌子上，当我打印时，也没有看到这张桌子。

我的 HTML 代码

```
<body >
    <form id="form1" runat="server">
    <div id="divprint">
        <table>
            <tr>
                <td>name</td>
            </tr>
            <tr>
                <td>Roll</td>
            </tr>
        </table>

    </div>
        <asp:button runat="server" ID="btn_prnt" OnClientClick="CallPrint('divprint')" Text="Print"  />
    </form>
</body> 
```

注意：我使用的是 Waterfox 18.0.1 浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:54:23.240

您提供的 HTML 不包含`.border_top`和`.body_table`元素。因此，没有国界。[请通过http://codepen.io](http://codepen.io)或[http://jsbin.com](http://jsbin.com)分享有效的 CSS 和 HTML 。

在准备打印页面时，浏览器会删除一些装饰。在大多数浏览器中，背景已被删除。也许边界也被删除了？

# php - 获取mysql和php中不同用户的总值

> ID：15919960
> 
> 赞同：-3
> 
> 时间：2013-04-10T07:49:03.403
> 
> 标签：php, mysql, sql

表格1

```
|-----|---------------|---------------------|
| id  | name          |         pid         |
|-----|---------------|---------------------|
| 1   |  ram          |          2          |
| 2   |  rani         |          1          |
| 3   |   ram         |          3          |
|-------------------------------------------| 
```

表 2

```
|-----|---------------|---------------------|
| pid | name          |         price       |
|-----|---------------|---------------------|
| 1   |  soap         |          2000       |
| 2   |  towel        |          1333       |
| 3   |  bed          |          3000       |
|-------------------------------------------| 
```

我需要下表给出的结果

```
|-----|---------------|---------------------|
| id  | name          |         price       |
|-----|---------------|---------------------|
| 1   |  ram          |          4333       |
| 2   |  rani         |          2000       |
|-------------------------------------------| 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:50:52.207

```
SELECT  MIN(a.ID) ID, a.name, SUM(b.Price) Price
FROM    table1 a
        INNER JOIN table2 b
            ON a.PID = b.PID
GROUP   BY a.Name 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/5efc5/2)

输出

```
╔════╦══════╦═══════╗
║ ID ║ NAME ║ PRICE ║
╠════╬══════╬═══════╣
║  1 ║ ram  ║  4333 ║
║  2 ║ rani ║  2000 ║
╚════╩══════╩═══════╝ 
```

# c++ - 如何用 C++ 编写基于眼动追踪的计算机鼠标

> ID：15919961
> 
> 赞同：-5
> 
> 时间：2013-04-10T07:49:04.680
> 
> 标签：c++, visual-studio-2010, opencv, mouse, eye-tracking

我正在做一个项目，我必须开发一个应用程序，其中鼠标光标根据提供给它的坐标移动。这些坐标是从用户瞳孔的位置生成的。我能够得到坐标使用opencv的学生。现在，我有以下问题：

1.）我如何对鼠标光标进行编程，使其根据我给它的坐标移动。具体来说，我正在寻找可以做到这一点的库和函数。上网后我发现人们使用**图形。带有 turbo CI 的h**库正在 Visual Studio 2010 中做我的项目，所以请告诉我任何与之相关的方法。

2.)其次，我如何使用我用C++和opencv创建的这个所谓的鼠标在windows中充当主鼠标？我必须进行汇编级编程或设备驱动程序编写还是有其他合适的方法？

对于第一季度。如果您能给我一些示例代码，我将不胜感激。

谢谢。

................................这是我到目前为止所做的...... ............. 我在运行代码时遇到问题。我已经从[http://winbgim.codecutter.org/](http://winbgim.codecutter.org/)集成了 WinBGIm v6.0 （我在 Windows 上使用 VS2010 Ultimate 7）。如果我运行示例代码，一切正常。但是，当我尝试运行文档中给出的这个鼠标示例时，发生了几个错误。请帮我纠正错误，我不知道它们是什么意思。

```
/* mouse example */
/*Filename:mint.cpp*/
    #include "winbgim.h"
    void main(void)
    {
    const int LIMIT = 10; // Number of clicks to stop program.
    int maxx, maxy; // Maximum x and y pixel coordinates
    int count = 0; // Number of mouse clicks
    int divisor; // Divisor for the length of a triangle side
    // Put the machine into graphics mode and get the maximum
    coordinates:
    initwindow(450, 300);
    maxx = getmaxx( );
    maxy = getmaxy( );
    // Draw a white circle with red inside and a radius of 50 pixels:
    setfillstyle(SOLID_FILL, RED);
    setcolor(WHITE);
    fillellipse(maxx/2, maxy/2, 50, 50);
    // Print a message and wait for a red pixel to be double clicked:
    settextstyle(DEFAULT_FONT, HORIZ_DIR, 2);
    outtextxy(20, 20, "Left click " << LIMIT << " times to end.");
    setcolor(BLUE);
    divisor = 2;
    while (count < LIMIT)
    {
    triangle(maxx/divisor, maxy/divisor);
    delay(500);
    divisor++;
    if (ismouseclick(WM_LBUTTONDOWN))
    {
    (clearmouseclick(WM_LBUTTONDOWN));
    count++;
    }
    }
    // Switch back to text mode:
    closegraph( );
    }
...................................................
The compiler errors are:

c:\program files\microsoft visual studio 10.0\vc\include\winbgim.h(302): error C2086: 'int right' : redefinition
1>c:\program files\microsoft visual studio 10.0\vc\include\winbgim.h(302) : see declaration of 'right'
1>c:\users\administrator\desktop\winbgm\driver\mint.cpp(20): error C2296: '<<' : illegal, left operand has type 'const char [12]'
1>c:\users\administrator\desktop\winbgm\driver\mint.cpp(25): error C3861: 'triangle': identifier not found
Build FAILED. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:55:23.240

1.  您可以使用适用于 Windows 的 BGI 库 (WinBGIm) 的端口。这是一个关于如何做的一般想法的链接（VS2010中的示例项目）。
    项目： http: [//muhammadallee.pbworks.com/w/file/53399106/WinBGIm-Demo.zip](http://muhammadallee.pbworks.com/w/file/53399106/WinBGIm-Demo.zip) （您需要转到项目属性->链接器->输入并在那里更正lib文件的路径。或者，使用这个项目： [http](http://www.cs.colorado.edu/~main/bgi/visual/BGI2010.zip) ://www.cs.colorado.edu/~main/bgi/visual/BGI2010.zip 文档：
    [http ://www.cs.colorado.edu/~main/bgi/doc/](http://www.cs.colorado.edu/~main/bgi/doc/)

2.  它将使用 Windows 标准鼠标。所以你不必担心。您可以通过`SetMousePos()`使用设置自己鼠标的坐标来简单地设置鼠标的坐标。

您的代码包含错误

代替

```
outtextxy(20, 20, "Left click " LIMIT << " times to end."); 
```

使用此代码

```
char msg[80] = "";
sprintf(msg, "Left click %d times to end.", LIMIT); 
```

并注释掉

```
triangle(maxx/divisor, maxy/divisor); 
```

另外，从我提到的链接下载。经过这些更改后，它运行良好。

PS：如果它解决了你的问题，你可以将其标记为答案:)

# android - Android：在点击按钮时设置 alpha。最好只有 xml

> ID：15919962
> 
> 赞同：7
> 
> 时间：2013-04-10T07:49:14.160
> 
> 标签：android, button, layout, alpha

我想在某些按钮上引入“向下”样式。我创建了一个样式和一个状态列表。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/inactive_button_background" android:state_enabled="false"/>
    <item android:drawable="@drawable/active_button_background" android:state_enabled="true"/>
    <item android:drawable="@drawable/pressed_button_background" android:state_pressed="true"></item>
</selector> 
```

问题是我希望能够在单击按钮时仅更改背景的 alpha（我将有可变的背景，因此使用 alpha 通道设置出售的颜色不是解决方案）。

而且我只想从声明性 xml 中执行此操作（不想用布局的东西污染我的代码）。

问题是我不知道如何将此 alpha 混合应用到 xml drawable 中的按钮。我很确定有办法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-18T10:50:32.933

我回答这个问题有点晚了，但我只是通过使用 View.onTouchListner 更改 alpha 值来做到这一点

您可以通过以这种方式实现 onTouch 来做到这一点

```
 @Override
public boolean onTouch(View v, MotionEvent event) {

    switch (event.getAction())
    {
        case MotionEvent.ACTION_DOWN:
            v.setAlpha(0.5f);
            break;
        case MotionEvent.ACTION_UP:
            v.setAlpha(1f);
        default : 
         v.setAlpha(1f)
    }
    return false;
} 
```

我猜你不能从 drawable 改变 alpha 值，所以你只能这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-09T21:18:21.137

这完美地工作

* * *

```
yourView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN: {
                v.setAlpha(0.5f);
                break;
            }
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_CANCEL: {
                v.setAlpha(1f);
                break;
            }
        }
        return false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-30T13:36:17.300

如果您正在寻找“更柔和”的点击动画，请在 Michael 的回答中添加一些内容。我添加了这个：

```
btn.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent motionEvent) {
            switch (motionEvent.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    v.animate().alpha(0.3f).setDuration(200).start();
                    break;
                case MotionEvent.ACTION_UP:
                    v.animate().alpha(1f).setDuration(200).start();
                default :
                    v.setAlpha(1f);
            }
            return false;
        }
    });
} 
```

有相同想法的谎言，但有动画

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-25T07:13:19.993

我知道那是一个很老的问题，但是根据关于使用 xml 进行 alpha 更改的问题，我看不到正确的答案。
为此，您需要创建已在问题中显示的选择器，它是：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/inactive_button_background" android:state_enabled="false"/>
    <item android:drawable="@drawable/active_button_background" android:state_enabled="true"/>
    <item android:drawable="@drawable/pressed_button_background" android:state_pressed="true"></item>
</selector> 
```

因此，如果您只有正常状态的可绘制对象（假设它的 btn_background.png）并且您需要它处于按下状态的 50% alpha，那么您所要做的就是创建相应的名为 press_button_background.xml 的 xml-drawable（在可绘制文件夹中，没有 dpi！ ）。所以这应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/btn_background"
    android:alpha=".5" /> 
```

这同样适用于禁用状态，我猜唯一的区别是这个状态的 alpha 级别可能是 30% 或任何设计师说/想要的）。所以较短的版本将如下所示（对于带有可绘制 ic_edit.png 的按钮）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:state_enabled="true"
        android:state_pressed="true">
        <bitmap
            android:src="@drawable/ic_edit"
            android:alpha=".5" />
    </item>
    <item
        android:state_enabled="false">
        <bitmap
            android:src="@drawable/ic_edit"
            android:alpha=".3" />
    </item>
    <item
        android:drawable="@drawable/ic_edit" />
</selector> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T12:48:09.953

你将不得不在你的代码中加入*一些东西。*

XML

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Text"
    android:onClick="dialogClicked" /> 
```

爪哇

```
public void dialogClicked(final View view)
{
   ... set the alpha programatically ...
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-11-21T00:50:54.940

This will pretty much do it. Well, it worked for me

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true">
    <shape>
      <solid android:color="#5000ddff" />
    </shape>
  </item>
  <item android:drawable="@color/yourdefaultcolor"/>
</selector> 
```

# javascript - 如何从 iframe 访问父页面并将 url 存储在输入标签中

> ID：15919963
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:49:18.323
> 
> 标签：javascript, asp.net, vb.net, iframe

嗨，我如何访问 iframe 父页面并将 url 存储在来自 javascript 的输入标签中，我尝试 eniting byt 对我来说不是最好的结果。

我有一个 htm 页面，另一侧是带有按钮的表单。我需要其他表单 (ekternal_form.aspx) 访问父级并获取 url 并将 url 存储在我的输入标签中。

```
 <label for="first_name"><%=GetPhrase("FORMFIELD_FIRSTNAME")%>:</label><input  id="first_name" maxlength="40" name="first_name" size="20" type="text" /><br/>

    <label for="last_name"><%=GetPhrase("FORMFIELD_LASTNAME")%>:</label><input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /><br/>

    <label for="email"><%=GetPhrase("FORMFIELD_EMAIL")%>:</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br/>

    <label for="phone"><%=GetPhrase("FORMFIELD_PHONE")%>:</label><input  id="phone" maxlength="40" name="phone" size="20" type="text" /><br>

    <label for="description"><%=GetPhrase("FORMFIELD_DESCRIPTION_INSIDE")%>:</label><textarea name="description"></textarea><br/>

    <input type="hidden"  id="00Nb0000001Vrag" name="00Nb0000001Vrag" size="20" type="text" value='<%=MyCookies.Tracker() %>' />

    <!--UserIP-->
    <input type="hidden"  id="00Nb0000002EPku" maxlength="20" name="00Nb0000002EPku" size="20" type="text" value='<%Response.Write(Request.ServerVariables("remote_addr"))%>'  /><br>

    <textarea style="display:none;" id="00Nb0000001Vraq" name="00Nb0000001Vraq" rows="10" type="text" wrap="soft"><%=Request.ServerVariables("HTTP_REFERER") %></textarea>

    <!--Referral URL-->
    <textarea style="display:none;"  id="00Nb0000002EPl3" name="00Nb0000002EPl3" rows="5" type="text" wrap="soft"><%=Request.ServerVariables("HTTP_REFERER") %></textarea><br>
    <label for="ParentPage">ParentPage</label><input id="parentpage" name="ParentPage" type="text" value=""  /><br />

    <input type="submit" name="submit"   class="button" value='<%=GetPhrase("FORMFIELD_SEND")%>' />
  </asp:Panel>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:13:45.557

检查我对[这个问题](https://stackoverflow.com/questions/15918480/read-query-string-parameters-from-inside-iframe)的回答。

您需要做的是将您要捕获的任何数据（在本例中为父页面标题）附加到 iframe 源 url，然后从其中的页面解析它。没有其他办法。

# highcharts - Highcharts - 带有 x 轴和 y 轴标题的气泡图 - 错误 #14

> ID：15919966
> 
> 赞同：1
> 
> 时间：2013-04-10T07:49:22.463
> 
> 标签：highcharts, bubble-chart

我正在寻找一种方法来显示以下情况的 Highcharts 气泡图：

我想在 X 轴上显示项目名称（“项目 a”、“项目 b”）和在 y 轴上显示团队成员名称（例如“tom”、“bill”、“john”）。气泡旨在可视化每个团队成员在每个项目上花费的时间。

数据系列应该类似于 ['project a', 'tom', 25.0], ['project b', 'john', 12.5]...，但尝试这样做会导致“Highcharts Error #14: String value sent到 series.data，预期数字“

是否有可能在 x 轴和 y 轴上使用字符串值而不是数字的 Highcharts 气泡/3d 气泡图，或者有没有办法实现类似的东西？

任何指导将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:21:13.843

您所说的只是分类轴 - 不需要任何技巧。

[http://jsfiddle.net/jlbriggs/36zn2/1/](http://jsfiddle.net/jlbriggs/36zn2/1/)

```
 xAxis: {
            categories:['Project 1', 'Project 2', 'Project 3']
        },
       yAxis: {
           categories:['User 1', 'User 2', 'User 3']
        }, 
```

要在数据中使用的数值是类别的数组索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:24:36.733

我在这里做了一些事情[http://jsfiddle.net/36zn2/](http://jsfiddle.net/36zn2/)这应该可以帮助你。

x 和 y 轴上的标签是使用格式化程序函数计算的，该函数将数字项目代码和人员代码转换为数组中的文本。

```
var names = ["DAVE","JOHN"];
var projects = ["Project 1","Project 2"];

    xAxis: {
        labels: {tickInterval:1,
            formatter: function () {
                return projects[this.value]
            }
        }
    },

    yAxis: {
        labels: {
            formatter: function () {
                return names[this.value]
            }
        }
    }, 
```

如果您无法更改数据的格式，您可以遍历数据数组，建立项目名称和员工姓名的映射，以创建数据的数字版本以及映射数组。

# dojo - 来自服务器的 dojo lazytreegrid 数据

> ID：15919977
> 
> 赞同：0
> 
> 时间：2013-04-10T07:50:23.243
> 
> 标签：dojo, dojox.grid

我是dojo的新手，我正在尝试使用lazytreegrid，我在文档中找到了这个示例代码

[http://dojotoolkit.org/reference-guide/1.7/dojox/grid/LazyTreeGrid.html](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/LazyTreeGrid.html)

但我想从java的servlet/portlet/加载树数据，子节点应该是延迟加载的。找不到任何简单的例子来表明可以做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T12:07:46.697

我已经修改了[http://dojotoolkit.org/reference-guide/1.9/dojox/grid/LazyTreeGrid.html](http://dojotoolkit.org/reference-guide/1.9/dojox/grid/LazyTreeGrid.html)上提供的示例，以使其与 QueryReadStore 一起使用，后者以 JSON 格式从后端服务获取数据。

我的示例服务以以下格式返回数据：

```
{"identifier":"id","label":"name","items":[{"name":"Africa","id":1,"type":"CONTINENT","population":null,"area":null,"hasChildren":true},{"name":"Asia","id":8,"type":"CONTINENT","population":null,"area":null,"hasChildren":true}]} 
```

请注意，与 ItemFileWriteStore 示例不同，子元素不是内联填充的。

现在网页代码：

```
// Dependencies
dojo.require("dojox.grid.LazyTreeGrid");
dojo.require("dojox.grid.LazyTreeGridStoreModel");
dojo.require("dojox.data.QueryReadStore");
.
.
.
// Use QueryReadStore instead of ItemFileWriteStore.
// The URL points to a service that returns root nodes of the tree in JSON format.
// When a node is expanded, the same URL gets called with an extra parameter 
// called parentId=<id> where id is identifier of the clicked row. The service
// should return children of the specified id.
var store = new dojox.data.QueryReadStore({url: "./admin/getRootNodes.json",
             requestMethod: "get" });

// hasChildren field in the JSON response should be boolean (true - has children, false otherwise)
var model = new dojox.grid.LazyTreeGridStoreModel({
      store: store,
      serverStore: true,
      childrenAttrs: ['hasChildren']
    });

/* set up layout */
var layout = [
  {name: 'Name', field: 'name', width: '30%'},
  {name: 'Type', field: 'type', width: '30%'},
  {name: 'Area', field: 'area', width: '20%'},
  {name: 'Population', field: 'population', width: '20%'}
];
/* create a new grid: */
var grid = new dojox.grid.LazyTreeGrid({
    id: 'grid',
    treeModel: model,
    structure: layout,
    rowSelector: '20px',
  }, document.createElement('div'));

/* append the new grid to the div */
dojo.byId("gridDiv").appendChild(grid.domNode);

/* Call startup() to render the grid */
grid.startup(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:23:36.160

**第一的：**

您的 Servlet 必须以 json / xml 格式输出某些内容并将其作为 weburl 提供。

例如网址[http://api.geonames.org/citiesJSON](http://api.geonames.org/citiesJSON)

输出：

> {"status":{"message":"请为每次调用添加用户名，以便地理名称能够识别调用应用程序并计算信用使用量。","value":10}}

当您在网络浏览器中访问 url 时，您的 servlet 应该具有相同的行为（当然不是相同的数据）。

**下一个：**

将网格与 JsonRestStore 一起用作存储，而不是与 ItemFileWriteStore 一起使用。我的示例使用 DataGrid，但 LazyTreeGrid 应该以与 JsonRestStore 相同的方式工作......

```
require(["dojo/ready","dojo/aspect",'dojo/_base/lang', 'dojo/topic', 'dojox/grid/DataGrid'  ,'dojo/store/JsonRest','dojo/data/ObjectStore'],
  function(ready,aspect,lang,topic, DataGrid, JsonRest,ObjectStore){

    ready(1,function() {

    var store = new JsonRest({  
            target: "http://yourUrl",
            sortParam: "sortby"
      });

    var layout = [[
    {'name': ' ', 'field': 'extension', 'width': '20px',noresize:true} // Adapt field to json data

    ]];

 var dataStore=ObjectStore({objectStore: store});

        var grid = new DataGrid({
            store:dataStore,
            queryTarget:"objectId",
            structure: layout});

    grid.setQuery({objectId:"1"}); // First QUERY !
    grid.placeAt("myDivId");
    grid.startup();

    });

}); 
```

# c# - 将 int 转换为带前导零的十六进制

> ID：15919979
> 
> 赞同：51
> 
> 时间：2013-04-10T07:50:27.453
> 
> 标签：c#, hex, string-formatting

如何在`XX XX XX XX`没有循环的情况下将 int（4 字节）转换为十六进制（“”）？

例如：

```
i=13 hex="00 00 00 0D" 
```

`i.ToString("X")`返回`"D"`，但我需要一个 4 字节的十六进制值。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-04-10T07:53:15.527

You can specify the minimum number of digits by appending the number of hex digits you want to the `X` format string. Since two hex digits correspond to one byte, your example with 4 bytes needs 8 hex digits. i.e. use `i.ToString("X8")`.

If you want lower case letters, use `x` instead of `X`. For example `13.ToString("x8")` maps to `0000000d`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-10T07:53:47.700

try this:

```
int innum = 123;
string Hex = innum .ToString("X");  // gives you hex "7B"
string Hex = innum .ToString("X8");  // gives you hex 8 digit "0000007B" 
```

# php - 如何实现一个可以轻松与 SendGrid 集成的邮件队列

> ID：15919981
> 
> 赞同：2
> 
> 时间：2013-04-10T07:50:42.937
> 
> 标签：php, email, sendgrid, mail-queue

目标：实现一个模块化的、可重用的、面向对象的类或包，它将负责自动化用户通知的过程。正如我已经提到的，这些通知是根据一组规则在后台发送给多个用户的。

例如：每次一个新用户注册，并且定义了一条系统消息，并且每个超级用户有10个以上的活跃用户，那么这个系统消息就会发送给所有的用户。

这些“规则”可能会被实现为方法，或者内部带有 SQL 模型的子类。

环境：LAMP，PHP 5.3。首选的实现是 PHP。SendGrid 邮件递送服务 + 他们的官方 PHP 库。

实现（到目前为止我的想法）：我考虑过使用 cronjob 或 Apache HTTP worker，问题是这个模型将负责系统的所有电子邮件通知，在这种情况下它必须运行每60秒左右，以确保按时同步交货。要添加或删除 cronjobs，我考虑过使用 PHP 的 exec() 或 system()，尽管我确信有更好的方法，也许直接使用文件函数编辑 cron 作业文件？

问题：任何实现都应该能够与 SendGrid 集成，因为这是我们当前使用的交付系统，并且已被证明是有效的。

这是系统的核心，所以它需要尽可能的防故障，并且具有自我诊断的能力，否则它不会有任何好处，最好直接发送那些电子邮件通知用户访问的页面，以及在加载时间、设计等方面的妥协。

有什么想法吗？，我在正确的方向吗？我一直在寻找已经在 github 和其他网络上实现的东西，但是没有什么能满足我的需要和要求。SendGrid 似乎也没有提供内置队列。

任何帮助深表感谢！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T23:42:51.707

我在 SendGrid 工作。

最强大的解决方案是不在代码中实现队列，而是设置本地邮件服务器并让它管理您的电子邮件队列。然后将该邮件服务器配置为使用 SendGrid 作为提供所有其他功能的智能中继。

这有几个好处：

*   您的应用程序与本地邮件服务器之间的延迟非常低

*   您的本地邮件服务器可以管理排队。

*   SMTP 命令流水线减少了协议请求的数量

    我们有[邮件服务器的配置指南](http://sendgrid.com/docs/Integrate/Mail_Servers/index.html)，可以为您指明正确的方向。

就触发发送到此本地服务器的逻辑而言，我认为您走在正确的轨道上。你可以用 cron 构建一个后台进程系统，或者你可以使用[php-resque](https://github.com/chrisboulton/php-resque)之类的东西，它可以抽象一些东西，让你从代码中获得更多的控制权。php-resque 或类似的解决方案可能会给您足够的控制权，让您有信心不使用本地 MTA。

# c++ - 促进进程间ipc死锁

> ID：15919983
> 
> 赞同：1
> 
> 时间：2013-04-10T07:50:45.180
> 
> 标签：c++, boost, ipc, deadlock, futex

这是我与 boost ipc 库有关的第二篇文章。我正面临着莫名其妙的死锁，所以我想我会探索一些网络上现有的例子

我当前的问题只是对提供的示例的试用@

[http://en.highscore.de/cpp/boost/interprocesscommunication.html](http://en.highscore.de/cpp/boost/interprocesscommunication.html)

```
#include <boost/interprocess/managed_shared_memory.hpp> 
#include <boost/interprocess/sync/named_mutex.hpp> 
#include <boost/interprocess/sync/named_condition.hpp> 
#include <boost/interprocess/sync/scoped_lock.hpp> 
#include <iostream> 

int main() 
{ 
   boost::interprocess::managed_shared_memory   managed_shm(boost::interprocess::open_or_create, "shm", 1024); 
   int *i = managed_shm.find_or_construct<int>("Integer")(0); 
   boost::interprocess::named_mutex named_mtx(boost::interprocess::open_or_create, "mtx"); 
   boost::interprocess::named_condition named_cnd(boost::interprocess::open_or_create, "cnd"); 
   boost::interprocess::scoped_lock<boost::interprocess::named_mutex> lock(named_mtx); 
   while (*i < 10) 
   { 
     if (*i % 2 == 0) 
   { 
     ++(*i); 
     named_cnd.notify_all(); 
     named_cnd.wait(lock); 
   } 
   else 
   { 
     std::cout << *i << std::endl; 
     ++(*i); 
     named_cnd.notify_all(); 
     named_cnd.wait(lock); 
   } 
 } 
 named_cnd.notify_all(); 
 boost::interprocess::shared_memory_object::remove("shm"); 
 boost::interprocess::named_mutex::remove("mtx"); 
 boost::interprocess::named_condition::remove("cnd"); 
} 
```

此示例代码导致我陷入僵局。strace 指示这两个进程：

```
 futex(0x...,FUTEX_WAIT,1,NULL 
```

我在 ubuntu 12.04 上使用 gcc 4.7 进行编译

任何帮助/想法为什么会这样？

PS：请注意，如果您尝试这样做，并且遇到死锁，请保留一个独立程序，该程序仅在最后执行删除命令以清除共享对象。否则 i 的计数器将从当前状态开始，而不是从 0 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T08:21:40.463

I think it is clear: according to the documentation, notify methods have ho effect, unless there is already a thread (or more) waiting. And in the provided example it can occur, that all processes execute notify_all() before any of them reaches wait().

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T19:45:53.763

这是使用一些最近的增强版本报告的错误： [https ://svn.boost.org/trac/boost/ticket/7682](https://svn.boost.org/trac/boost/ticket/7682)

# java - 具有未明确定义的比较器的排序地图

> ID：15919984
> 
> 赞同：1
> 
> 时间：2013-04-10T07:50:45.800
> 
> 标签：java

我正在寻找可以根据其键和比较器进行排序的 Map 实现。

我知道这`TreeMap`是要走的路，但我有一个很大的问题：比较器没有很好地定义（我知道这是一个错误，但我目前无法修复它）即使对于不是的键它也返回 0相等（就 equals() 方法而言）。

如果比较器返回 0 并且不考虑对象的 hashCode 或 equals 方法，则 TreeMap 实现假定对象相等（并因此覆盖值）。这是记录在案的，并且在大多数情况下是所需的行为。您可以通过查看 TreeMap.put() 方法来检查实现是否基于比较器，该方法包含以下片段：

```
 do {
            parent = t;
            cmp = cpr.compare(key, t.key);
            if (cmp < 0)
                t = t.left;
            else if (cmp > 0)
                t = t.right;
            else
                return t.setValue(value);
        } while (t != null); 
```

此代码遍历树，如果它在树中找到一个节点（使用比较器`cpr`）与应该插入的节点（ ）相等`key`，则该值将被覆盖。

但是：我正在寻找 Map 接口的实现，它基于 Comparator 进行排序，但不使用它来检测哪些是相等的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:14:06.920

I doubt you will find a Map that does that, since it goes against the recommendation of the Comparator interface.

> The ordering imposed by a comparator c on a set of elements S is said to be **consistent with equals** if and only if c.compare(e1, e2)==0 has the same boolean value as e1.equals(e2) for every e1 and e2 in S.
> 
> Caution should be exercised when using a comparator capable of imposing an ordering inconsistent with equals to order a sorted set (or sorted map). Suppose a sorted set (or sorted map) with an explicit comparator c is used with elements (or keys) drawn from a set S. If the ordering imposed by c on S is inconsistent with equals, the sorted set (or sorted map) will behave "**strangely**." In particular the sorted set (or sorted map) will violate the general contract for set (or map), which is defined in terms of equals.

You can always decorate the comparator with your own comparator like so `new MyComparator(faultyComparator);`

When you deletegate the calls to the faulty comparator, check its return value. If it is 0, make sure the `equals()` contract of the objects agree. If they don't, rectify the return value. An even better solution is to rewrite the comparator correctly and use a TreeMap, if that option is open.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:05:37.587

在您的情况下，TreeMap 应该没问题。但是，听起来您没有使用 Strings 或 Wrapper 类对象作为键。如果使用自己的类对象作为键，则必须实现 hashcode() 和 equals() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:10:11.683

只需实现一个永远不会返回 0 的 Comparator 并使用常规 TreeMap。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:37:37.053

这将是更多的内务管理，但在我看来，您需要某种两级结构，`TreeMap<K, LinkedHashMap<K, V>>`其中外部映射基于您的“错误”比较器，其值是正常的等值感知映射（其键将全部是根据比较器相等，但根据 hashCode 和 equals 不同）。

# ios - iOS 中关于任务完成轮询 Web 服务的最佳实践

> ID：15919987
> 
> 赞同：5
> 
> 时间：2013-04-10T07:50:49.170
> 
> 标签：ios, web-services, long-polling, polling

假设我们有一个与 Web 服务通信的 iOS 应用程序。一些请求被委托给另一个 Web 服务，以便在另一端进行操作时立即返回 HTTP 200 状态代码：

```
|iOS app|          |Main service|    |Delegate service|   
    |     request        |                    |
    |------------------->|_      delegate     |_
    |                    | |----------------->| |
    |     HTTP 200       | |     accepted     | |
    |<-------------------|_|<-----------------| |
    |                    |                    | |
    |                    |                    | | 
    |     status?        |                    | |
    |------------------->|_                   | |
    |                    | |                  | |
    |     pending        | |                  | |
    |<-------------------|_|                  | |
    |                    |                    | |
    |                    |      finished      | |
    |                    |<-------------------|_|
    |                    |                    |
    |     status?        |                    |
    |------------------->|_                   |
    |                    | |                  |
    |     finished       | |                  |
    |<-------------------|_|                  |
    |                    |                    |
    |                    |                    | 
```

这些请求可以持续 20 秒到 2 分钟，因此我们可以每 15-20 秒轮询一次服务器。

实施这种场景的最佳实践是什么？如果我们决定实施每 20 秒一个请求的轮询策略，限制为 6 个请求，Apple 会拒绝该应用程序吗？

不幸的是，长轮询策略也没有服务器支持（它不在我们的控制之下）。服务器只是在每个请求上返回一个状态 JSON。

我们试图避免使用推送通知，因为这些请求是一种低级任务，用户不必明确参与。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:21:48.490

我建议您尝试长轮询策略，该策略已在之前的线程中讨论过：[objective-C 中的长轮询](https://stackoverflow.com/questions/6300756/long-polling-in-objective-c)。还可以查看这个 [基于 TCP 的 RPC 服务器（Erlang 或类似的东西？），用于 iOS/Android 应用程序通信](https://stackoverflow.com/questions/6614343/tcp-based-rpc-server-erlang-or-something-similar-for-ios-android-app-communic)

# knockout.js - 用咖啡脚本淘汰赛

> ID：15919993
> 
> 赞同：2
> 
> 时间：2013-04-10T07:51:19.767
> 
> 标签：knockout.js, coffeescript

我将使用带有 Coffeescript 的 Knockout。以下是简单的示例代码。

```
**** coffeescript ****
    class NewsItem
        constructor : (content) ->
            @content = ko.observable(content)

    class ViewModel
        constructor : ->        
            @items = ko.observableArray()
            @item = ko.observable()

            @items.push new NewsItem('a')
            @items.push new NewsItem('b')
            @items.push new NewsItem('c')

            @addItem = ->
                @items.push new NewsItem @item()

    $ ->
        ko.applyBindings new ViewModel
        return  

**** html ****
    <ul data-bind="foreach: items">
        <li data-bind="text: $data.content"></li>
    </ul>
    <div>
        <input type="text" data-bind="value: item" />
        <button data-bind="click: addItem">Add Item</button>
    </div> 
```

上面的代码运行良好。我想知道的是我应该使用上面的***这个***关键字或***原型***成员声明 addItem 事件如下

```
class NewsItem
    constructor : (content) ->
        @content = ko.observable(content)

class ViewModel
    constructor : ->        
        @items = ko.observableArray()
        @item = ko.observable()

        @items.push new NewsItem('a')
        @items.push new NewsItem('b')
        @items.push new NewsItem('c')

    addItem : ->
        console.log @item()
        @items.push new NewsItem @item()

$ ->
    ko.applyBindings new ViewModel
    return 
```

我了解可观察属性（内容、项目、项目）应该是使用***此***关键字的实例成员，以避免在实例对象之间共享值。没关系，但是在我的情况下，诸如**addItem方法之类的事件函数呢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:08:22.370

在第二种情况下它工作正常，试试吧；）。

```
class Randomized
  constructor: -> @items = [Math.random()]
  first: -> @items[0]

console.log new Randomized().first()
console.log new Randomized().first()
console.log new Randomized().first() 
```

# episerver - EPiServer：CS1061：“System.Web.UI.Control”不包含“CurrentPage”的定义......？

> ID：15919994
> 
> 赞同：-1
> 
> 时间：2013-04-10T07:51:21.723
> 
> 标签：episerver, episerver-6-r2

对此 EPIServer 错误有一点问题：CS1061：“System.Web.UI.Control”不包含“CurrentPage”的定义，并且没有扩展方法“CurrentPage”接受“System.Web.UI.Control”类型的第一个参数' 可以找到（您是否缺少 using 指令或程序集引用？）

当我尝试使用我的 ascx 文件中的参数访问方法时。ascx 文件：

```
<div id="nav">
    <ul role="menu">
      <li <%# GetMenuClass(Container.CurrentPage)%> role="menuitem">
            <%= GetNewsPage %>
            <%--<a href="#">News</a>--%>
        </li>
        <li <%# GetMenuClass(Container.CurrentPage) %> role="menuitem">
            <%= GetClientPage %>
            <%--<a href="#">Clients</a>--%>
        </li>
    </ul>
</div> 
```

代码隐藏中的方法：

```
protected string GetMenuClass(PageData page)
    {

        if (page.IsSelected(CurrentPage))
        {
            return "class=\"menu-item selected\"";
        }

        return "class=\"menu-item\"";
    } 
```

我想要实现的是这样的（如果选择了新闻页面）：

```
<div id="nav">
<ul role="menu">
<li class="menu-item selected" role="menuitem"> News </li>
<li class="menu-item" role="menuitem">
<a href="#">Clients</a>
</li>
</ul>
</div>
</nav> 
```

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:28:28.537

看起来 Container 属性的类型是 System.Web.UI.Control。我不确定你的情况是什么容器，但看起来你需要将它转换为相应的特定类型，如 EPiServer.UserControlBase、EPiServer.PageBase 或 EPiServer.Web.WebControls.PageControlBase。这些类型包含 CurrentPage 属性，即 PageData。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:19:16.057

我注意到您正在使用绑定语法表达式 (a <%#) 并使用 Container，所以我假设这是在像转发器这样的数据绑定控件中？

如果是，请尝试将您对 GetMenuClass 的调用修改为以下内容

`GetMenuClass((PageData)Container.DataItem)`

假设您已将 PageData 对象的集合绑定到转发器

# javascript - 制作响应式图像滑块/轮播

> ID：15919996
> 
> 赞同：1
> 
> 时间：2013-04-10T07:51:24.237
> 
> 标签：javascript, jquery, css, responsive-design, image-gallery

我正在创建自己的滑块，我需要一些帮助以使其响应。现在它适用于第一张幻灯片上的响应部分，但是当我转到下一张幻灯片（在这种情况下，任何不是第一个孩子的 li）时，li 的位置和宽度不会加起来，一切都出错了.

很难解释，如果有人可以在这里看一下，我很乐意：

[http://robbinj.se/r/](http://robbinj.se/r/)

我有一个宽度为 100% 的包装器，每个 li 的宽度都设置为 100% 的包装器宽度。如果您不明白我在尝试转到该页面后的内容，请在第一张幻灯片上调整浏览器的大小，这就是我希望它在所有其他幻灯片上也能正常工作的方式，但我需要一些关于如何做到这一点的想法！

这是jQuery：

```
 var slideLiWidth = $('#slider').width(),
    slideUl = $('#slider ul'),
    slideLi = $(slideUl).find('li'),
    slides = $(slideLi).length,
    slideNav = $('.slideNav'),
    current = 1;

slideLi.width(slideLiWidth);

$(window).resize(function() {
    var slideLiWidth = $('#slider').width();
    slideLi.width(slideLiWidth);
});

slideNav.click(function() {
    dir = $(this).data('dir');
    transition();
});

function transition() {
    var slideLiWidth = $('#slider').width();
    if (dir === 'next' && current < slides) {
        slideUl.transition({x: '-='+slideLiWidth}, 500, 'ease');
        current++;
    }
    else if (dir === 'back' && current > 1) {
        slideUl.transition({x: '+='+slideLiWidth}, 500, 'ease');
        current--;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:04:47.080

问题在于您计算平移距离的方式。您在添加和减去当前列表项宽度的翻译值时是正确的，但没有考虑到所述值不会随着用户可能调整其视口大小而更新的事实。当然，这只是对于实际上会在浏览中调整其视口大小的用户的问题。例如，任何使用平板电脑的人都不会遇到任何问题。

不过，如果您真的在寻找一个完美的滑块，我会这样做：创建一个变量来记录当前处于活动状态的幻灯片使用该变量来调整平移值以符合调整后的视口

这是该代码的样子：

```
$(window).resize(function() {
    var slideCounter = 1; // Because the first slide is, well ... first.    
    var slideLiWidth = $('#slider').width();
    slideLi.width(slideLiWidth);
    slideUl.transition({x: '-='+slideCounter*slideLiWidth}, 500, 'ease'); // Adjust the UL's transition value to match the current slide position and width.
});

function transition() {
    var slideLiWidth = $('#slider').width();
    if (dir === 'next' && current < slides) {
        slideUl.transition({x: '-='+slideLiWidth}, 500, 'ease');
        current++;
        slideCounter++; // Increment the counter to keep up.
    }
    else if (dir === 'back' && current > 1) {
        slideUl.transition({x: '+='+slideLiWidth}, 500, 'ease');
        current--;
        slideCounter--; // Increment the counter to keep up.
    }
} 
```

我已经评论了添加的行，虽然我实际上无法测试上面的代码，但我很确定它会起作用。如果没有，至少我为你指明了正确的方向。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:04:59.020

问题与选择以像素为单位指定宽度和滑动偏移量有关，当您应该尝试定义宽度时`%`（例如，每一个`<li>`都是`100%`宽的），并且当您为滑块设置动画时，您将应用`transform: translate(-100%, 0)`，对于^(第二)张图像，然后`transform: translate(-200%, 0)`对于第三^次等等。

即使您调整浏览器的大小，这也应该可以正常工作，因为您的负偏移量和应用的宽度将与浏览器大小一起自动重新计算。浏览器会将您的相对偏移量转换为正确的像素量。

看看这个小提琴的概念证明（在 firefox 和 chrome 上试过）：http: [//jsbin.com/ecifoc/1/](http://jsbin.com/ecifoc/1/)（移动滑块并调整浏览器大小，然后再次移动滑块）

其他方法，如连续重新计算宽度和负偏移量也可以正常工作，但它们肯定过于昂贵（通常，您需要将一些处理程序附加到`resize`事件）并且由于引入了一些复杂性而使代码更容易出错。

* * *

**注意：**如果您还需要管理无限滑块，您可以查看[此讨论](https://stackoverflow.com/a/15877302/1098851)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-27T09:59:42.330

我认为这个会有所帮助。这个也将在小型设备和平板电脑上工作。您也可以在同一页面上有多个轮播。只需复制“DIV”-“SpecDataWrap”并更改 ID。

```
<div class="ContainerWrap">
    <div class="Container">
        <div class="AllSpecsDataWrap">
            <div class="SpecDataWrap" id="SpecDataWrap1">
                <div class="SpecDataSlides activeNavSlide">
                    <img src="http://s19.postimg.org/lzem156s3/image1.jpg" />
                    <div class="SpecDesc SpecDescRight">
                        <h2>Choose to be unique.</h2>
                        <div class="SpecDescDetails">
                            Metal accents, colorful hues, real woods and leathers, and a customizable laser-etched signature offer thousands of ways to make your Moto X unique.
                        </div>
                    </div>
                </div>
                <div class="SpecDataSlides InActiveNavSlide">
                    <img src="http://s19.postimg.org/6cira13mb/image2.jpg" />
                    <div class="SpecDesc SpecDescLeft">
                        <h2>Choose to be unique.</h2>
                        <div class="SpecDescDetails">
                            Metal accents, colorful hues, real woods and leathers, and a customizable laser-etched signature offer thousands of ways to make your Moto X unique.
                        </div>
                    </div>
                </div>
                <div class="SpecDataSlides InActiveNavSlide">
                    <img src="http://s19.postimg.org/f4zpxpor7/image3.jpg" />
                    <div class="SpecDesc SpecDescRight">
                        <h2>Choose to be unique.</h2>
                        <div class="SpecDescDetails">
                            Metal accents, colorful hues, real woods and leathers, and a customizable laser-etched signature offer thousands of ways to make your Moto X unique.
                        </div>
                    </div>
                </div>
                <div class="SpecSlideNavigation">
                    <div class="leftNavSpec SpecSlideNav"></div>
                    <div class="bulletsNavSpec">
                        <ul>
                            <li class="activeImage"></li>
                            <li class="InActiveImage"></li>
                            <li class="InActiveImage"></li>
                        </ul>
                        <div class="clearFix"></div>
                    </div>
                    <div class="RightNavSpec SpecSlideNav"></div>
                </div>
                <div class="clearFix"></div>
            </div>
        </div>
    </div>
</div> 
```

您可以在此处查看 JS 和 CSS 代码： [https ://jsfiddle.net/raju_sumit/Ld21vutz/](https://jsfiddle.net/raju_sumit/Ld21vutz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T08:04:21.267

```
var $slider = $('#slider'),
    imgW = $('#slider li').outerWidth(true),
    winW = 0,
    zero = 0;

function getSizes(){
    winW = $(window).width();
    zero = (winW-imgW)/2;
    $slider.animate({left: zero},0); // This should 'zero' the position on resize
}

getSizes(); 

$(window).resize(function() {
    getSizes();
}); 
```

如果我错过了什么，请在此处检索逻辑：[http ://roxon.in/scripts/infinite_gal/index.html](http://roxon.in/scripts/infinite_gal/index.html)