# StackOverflow 问答 16190000-16190999

# jsf - 我无法在 primefaces 选择列表中将值从源传递到目标

> ID：16190001
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:41.350
> 
> 标签：jsf, primefaces

这是我的第一篇文章。我正在尝试为我的 primefaces 应用程序制作一个选择列表。我可以看到源部分中列出的值，也可以将源值传递给屏幕中的目标面板。但是在服务器端，tariffListForDestination（绑定到选择列表中的目标面板）仍然是空的。但在屏幕上一切正常。而且当我调试我的应用程序并在 ontransfer 方法中设置断点并将源对象传递给目标时，我在 event.getItems 中看不到任何值（事件传输事件）。

我在下面发送我的代码的相关部分。

谢谢您的回复。

DÇ

我的 xhtml 代码片段：

```
 <p:pickList id="pojoPickList" value="#{serviceCopyInsertBean.tariffList}" var="tariff" effect="bounce"
                itemValue="#{tariff}" itemLabel="#{tariff.cpcmOfferName}"    converter="tmp2TariffDescMappingConverter"
                showSourceControls="true" showTargetControls="true" showCheckbox="true"
                showSourceFilter="true" showTargetFilter="true"     filterMatchMode="contains" >

    <f:facet name="sourceCaption">Available</f:facet>
    <f:facet name="targetCaption">Starting</f:facet>

    <p:ajax event="transfer" listener="#{serviceCopyInsertBean.onTransfer}"/>

        <p:column style="width:75%;">
        #{tariff.cpcmOfferName}
    </p:column>

</p:pickList> 
```

我的转换器 Tmp2TariffDescMappingConverter

```
 import java.util.ArrayList;
      import java.util.List;
      import javax.faces.application.FacesMessage;
      import javax.faces.component.UIComponent;
      import javax.faces.context.FacesContext;
       import javax.faces.convert.Converter;
      import javax.faces.convert.ConverterException;
      import javax.faces.convert.FacesConverter;
      import com.i2i.st.entity.Tmp2TariffDescMapping;

    @FacesConverter("tmp2TariffDescMappingConverter")
    public class Tmp2TariffDescMappingConverter implements Converter {

private static List<Tmp2TariffDescMapping> tmp2TariffDescMappingDB;

static {
    tmp2TariffDescMappingDB = new ArrayList<Tmp2TariffDescMapping>();

}

public Object getAsObject(FacesContext facesContext, UIComponent component, String submittedValue) {
    if (submittedValue.trim().equals("")) {
        return null;
    } else {
        try {
            int number = Integer.parseInt(submittedValue);

            for (Tmp2TariffDescMapping tmp :tmp2TariffDescMappingDB) {
                if (tmp.getCpcmOfferId() == number) {
                    return tmp;
                }
            }

        } catch(NumberFormatException exception) {
            throw new ConverterException(new FacesMessage(FacesMessage.SEVERITY_ERROR, "Conversion Error", "Tmp2TariffDescMapping"));
        }
    }

    return null;
}

public String getAsString(FacesContext facesContext, UIComponent component, Object value) {
    if (value == null) {
        return null;
    } else {
        return String.valueOf(((Tmp2TariffDescMapping) value).getCpcmOfferId());
    }
} 
```

}

我的 JSF 豆

```
 private DualListModel<Tmp2TariffDescMapping> tariffList=new                              DualListModel<Tmp2TariffDescMapping>();
         private List<Tmp2TariffDescMapping> tariffListForSource=new ArrayList<Tmp2TariffDescMapping>();
     private List<Tmp2TariffDescMapping> tariffListForDestination=new ArrayList<Tmp2TariffDescMapping>();

                tariffList=new DualListModel<Tmp2TariffDescMapping>(tariffListForSource, tariffListForDestination); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T11:07:51.463

我不明白你为什么要在 getAsObject() 中迭代 tmp2TariffDescMappingDB。你是如何填写这份清单的？

您应该搜索关税列表.getTarget() 和关税列表.getSource() 以查看pickList 的两侧。类似于这个通用的东西：

```
 public T getAsObject(FacesContext context, UIComponent component, String value) {
    ...
    if (component instanceof PickList) {
        DualListModel<T> dl = (DualListModel) ((PickList) component).getValue();
        for (T t : dl.getTarget()) {
            //search here
        }
       for (T t : dl.getSource()) {
            //maybe here too
        }
     ... 
```

# windows-phone-8 - 如何去除windows phone中ApplicationBarIconButton的圆圈？

> ID：16190003
> 
> 赞同：2
> 
> 时间：2013-04-24T10:48:42.507
> 
> 标签：windows-phone-8, application-bar

我用 4 个图标按钮和 3 个普通菜单创建了应用程序栏。它工作正常。

但我不想要，图标按钮周围的圆圈。我怎样才能删除它。

另一个问题是如何正常查看图标按钮文本。这意味着我单击更多图标，时间图标按钮可见。但我不想使用更多按钮，而是想查看图标按钮文本。这是可能的。

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:30:52.787

您不能删除圆圈，也不能“扩展”应用程序栏，以便查看每个按钮的标签。它只是针对 Windows Phone UI。

但由于它是 .NET，您可以轻松地在页面底部创建自己的按钮栏。当然，为您的菜单项实现 UI 逻辑可能很困难，因此它们的行为就像本机应用程序栏一样（您可以考虑为您的菜单项使用内置应用程序栏并将其模式设置为“最小化”）。

但是：你为什么要做这一切？在我看来，应用程序应该遵循所有 UI 准则并且看起来都应该相同（尤其是与原生应用程序相比时）;-)

问候

# javascript - 按字母顺序对数组进行排序，最后保留数字和特殊字符

> ID：16190005
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:46.807
> 
> 标签：javascript, arrays, sorting

我正在使用这个按字母顺序对数组进行排序：

```
contactList.sort((function(index){
        return function(a, b){
            return (a[index] == b[index] ? 0 : (a[index] < b[index] ? -1 : 1));
        };
    })(2)); 
```

它很好用，唯一的问题是数字和特殊字符出现在我的数组顶部。我希望它按字母顺序排序，但我也希望它在最后存储数字和特殊字符。

我真的不知道如何修改我的功能才能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:53:23.767

只需检查它们是否是字母。我只检查第一个字符，但也许你需要扩展这个检查 `a[index].charAt(0) == b[index].charAt(0)`以比较后面的字母等等循环。

```
contactList.sort((function(index){
    return function(a, b){
        var aIsLetter = a[index].charAt(0).match(/[a-z]/i),
            bIsLetter = b[index].charAt(0).match(/[a-z]/i);
        if (aIsLetter && !bIsLetter) return -1;
        if (!aIsLetter && bIsLetter) return 1;
        return (a[index] == b[index] ? 0 : (a[index] < b[index] ? -1 : 1));
    };
})(2)); 
```

# android - 我正在尝试在系统浏览器上阻止 facebook

> ID：16190006
> 
> 赞同：1
> 
> 时间：2013-04-24T10:48:49.197
> 
> 标签：android, android-webview

为此，首先我从堆栈中获取顶部活动，然后在 logcat 中匹配 Facebook 的字符串。我正在使用此代码，

```
public class MyService extends Service 
{
    public static  String Tag  = "Task";
    public static  String Tag1 = "Top Running Task";
    ActivityManager am ;
    String packageName ;
    Handler handler;
    int count=0;
      @Override
      public int onStartCommand(Intent intent,int flags, int startId) 
      {
            // TODO Auto-generated method stub
            super.onStartCommand(intent, flags,startId);
            Toast.makeText(this, "Service running", Toast.LENGTH_SHORT).show();

            handler = new Handler(){

                @Override
                public void handleMessage(Message msg) 
                {
                    // TODO Auto-generated method stub

                    super.handleMessage(msg);
                   // Browser.clearHistory(getContentResolver());
                    //Browser.clearSearches(getContentResolver());

                     String packageName = am.getRunningTasks(1).get(0).topActivity.getPackageName();

                     if((packageName).indexOf("browser")!= -1)
                        {
                        // Toast tost=Toast.makeText(getApplicationContext(), packageName.toString(), 1);
                         //tost.show();

                                try {

                                        Process process = Runtime.getRuntime().exec("logcat -d");
                                        BufferedReader bufferedReader = new BufferedReader(
                                        new InputStreamReader(process.getInputStream()));

                                StringBuilder log = new StringBuilder();
                                String line = "";
                                while ((line = bufferedReader.readLine()) != null) 
                                {

                                    if(line.contains("facebook.com"))
                                    {
                                        //Browser.addSearchUrl(getContentResolver(), "google");
                                        Log.i(Tag1,"ww"+ line);

                                        /*Intent startMain = new Intent(Intent.ACTION_MAIN);
                                        startMain.addCategory(Intent.CATEGORY_HOME);
                                        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                                        startActivity(startMain);*/
                                        //android.os.Process.killProcess(pid);

                                    }
                                  //log.;
                                }
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                        }

                    //}

                }

            };

new Thread(new Runnable()
{
    public void run() 
    {
        while(true)
                {
                   try 
                   {
                    Thread.sleep(1000);
                    handler.sendEmptyMessage(0);
                   } 
                   catch (InterruptedException e) {} 

                }
    }
}).start();
            return START_NOT_STICKY;
        }

        @Override
        public void onDestroy() 
        {
            super.onDestroy();

            am.killBackgroundProcesses(packageName);
            Log.i(Tag,"destory ");
        }
      @Override
      public IBinder onBind(Intent intent) 
      {
      //TODO for communication return IBinder implementation
        return null;
      }
    } 
```

我也在删除历史记录和缓存。之后，我可以阻止 facebook，但第一次，它工作正常，但第二次它不起作用，它保留它的历史 5-6 秒，然后再次正常工作。

# java - 三角函数和角度收敛

> ID：16190008
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:53.887
> 
> 标签：java, scala, trigonometry, angle

这是我的问题：

2 个角度表示为从 0 到 360（或 359，如果需要）的整数 1 个从 0 到 1 的双倍，表示收敛速度。

我需要编写一个函数，将角度拉近一个等于收敛速度的因子。

例如，如果我的收敛率为 0.5 和两个角度：80° 和 40°，则输出应该是 70° 和 50° 的几个角度（这样它们就在 60° 会聚角的中间）。这种配置相当明显，但在一般情况下我很难解决这个问题，因为我在三角学方面真的很差，而且在我的职业生涯中从未使用过角度，所以我没有经验。所以这个函数需要处理任何角度的配置，问题就出现了，因为例如，如果差值大于 180，我需要反转操作，因为角度表示为整数，我必须使用求和和减法

我需要在 Scala 中实现它，但可以随意用 Java、伪代码或任何其他流行语言编写您的建议，我希望将您的代码翻译成 Scala 不会出现问题。

溶液越轻越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:59:19.220

原始角度 = o1 o2。

差异 D= o2-o1（注意这是正数，假设 o1 < o2）

中角 M= o1 + (D/2)

收敛因子 = F

新角度 = M +- (D/2)*F

如果我是正确的，这就是所需要的。由于角度始终在 0-360 之间，并且假设您只需要逆时针方向即可找到中间值和所有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:06:18.907

这是我的一个朋友制作的一个实现。我知道这是糟糕的***scala***代码，但他用命令式伪代码编写了它，我还没有将它转换为函数式，但这是一个公平的解决方案。在一堆输入上进行了测试，看起来不错。

```
 def adjustAngles(aa1: Int, aa2: Int):(Int,Int)= {
        def convergenceRate=0.5
      var diff = aa2 - aa1;
      var a1 = aa1
      var a2 = aa2
      if (diff > 180) {
        diff -= 360;
      } else if (diff < -180) {
        diff += 360;
      }

      a1 = ((a1 + diff / 2 * convergenceRate) % 360).toInt; 
      if (a1 < 0) {
        a1 += 360;
      }

      a2 = ((a2 - diff / 2 * convergenceRate) % 360).toInt
      if (a2 < 0) {
        a2 += 360;
      }
      (a1, a2)
    } 
```

# visual-studio-2012 - JsonObject/JsonValue 无法在 Windows Phone 8 中解析 JSON

> ID：16190009
> 
> 赞同：0
> 
> 时间：2013-04-24T10:48:58.383
> 
> 标签：visual-studio-2012, windows-phone-8

我在 Windows Phone 8 中解析 JSON 时遇到问题。我有一个像

```
{"ids":{"internal":[{"type":"ABCD","id":"7BCDCA0676CC8E2F5","time":19376,"asV":"AP_33160"}
                     ,{"type":"ADFP","id":"A2D3D22A6458BC2B","time":19376,"asV":"AP_420TETA"}
                     ]
            },
 "err":6000,
 "msg":"No Msg",
 "timeTL":87600
} 
```

我想要有这样的价值观：

```
string strIds= "{"internal":[{"type":"ABCD","id":"7BCDCA0676CC8E2F5","time":19376,"asV":"AP_33160"},{"type":"ADFP","id":"A2D3D22A6458BC2B","time":19376,"asV":"AP_420TETA"}]}" ;

int err= 6000;
string message= "msg";
int timeTL=87600; 
```

我能够使用 JsonValue 在 Windows 8 上获得所需的结果，但 Windows Phone 8 不支持它。主要问题是“内部”的内容不固定，我想将“ids”的完整值保存到一个字符串。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:24:18.947

**您可以使用Newtonsoft.Json**解析您的 Json 数据。该库在 Nuget.org 上可用。通过转到 Tools->Libiya Package Manager ->Packae manager 控制台并键入**Install-Package Newtonsoft.Json将其添加到您的项目**

创建类如下。通过使用 json 字符串和[http://json2csharp.com/](http://json2csharp.com/)

```
public class RootObject
{
    //public Ids ids { get; set; } 
    public object ids { get; set; } //use type object for id 
    public int err { get; set; }
    public string msg { get; set; }
    public int timeTL { get; set; }
}

results = reader.ReadToEnd();
then using newtonsoft.json
RootObject root = JsonConvert.DeserializeObject<RootObject>(results, new JsonSerializerSettings
                    {
                        NullValueHandling = Newtonsoft.Json.NullValueHandling.Ignore,
                        TypeNameHandling = TypeNameHandling.All,
                        TypeNameAssemblyFormat = System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full
                    }); 
```

您可以通过使用获取 Id 的值

```
string str= root.ids.Tostring(); 
```

希望这有效

# javascript - 在 javascript 的函数声明中命名函数有什么好处？

> ID：16190020
> 
> 赞同：1
> 
> 时间：2013-04-24T10:49:19.640
> 
> 标签：javascript, javascript-objects

我有时会看到这种模式被使用

```
function foo() {
    this.bar = function bar() {
        // code
    }
} 
```

命名函数而不是将其作为匿名函数的好处/原因是什么？

为了进一步说明/澄清：

```
function foo() {
    this.bar = function bar() {
        bar.someVar = 1;
    }
} 
```

VS

```
function foo() {
    this.bar = function() {
        this.someVar = 1;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:55:47.673

我想从根本上说，你可以用一个问题来回答你的问题。那个问题是，如果您不命名该函数，您将如何在其他地方显式调用该函数？

当然，您提供的示例仍然可以在没有名称的情况下使用，因此我建议它与开发人员的个人偏好有关，因为它与任何功能有关。我个人喜欢为我的函数命名，以便于调试、重用和可读性，以及显式调用它们的有用性。

通过创建一次函数并重用它们，还可以获得明显的性能优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:24:56.220

命名的主要好处`function`是允许它是[自引用的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/function#Named_function_expression)，特别是对于递归：

> 如果要在函数体内引用当前函数，则需要创建一个命名函数表达式。该名称仅对函数体（作用域）是本地的。这也避免了使用非标准[arguments.callee](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)属性。
> 
> ```
> var math = {
>   'factorial': function factorial(n) {
>     if (n <= 1)
>       return 1;
>     return n * factorial(n - 1);
>   }
> }; 
> ```

也就是说，它不必知道它的持有对象和引用属性名称，这可以改变：

```
// a contrived and hopefully unrealistic example

function foo() {
    this.bar = function () {
        return this.bar;
    };
}

console.log(new foo().bar());        // Function
console.log(new foo().bar.call({})); // undefined, `{}` doesn't have a `bar` 
```

如前所述，它是部分“*取缔*”的可用解决方案[`arguments.callee`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments/callee)：

> **注意**：您应该避免使用`arguments.callee()`并且只给每个函数（表达式）一个名称。
> 
> **警告**：ECMAScript 第 5 版禁止`arguments.callee()`在[严格模式下](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)使用。

# java - Java 条纹错误

> ID：16190024
> 
> 赞同：0
> 
> 时间：2013-04-24T10:49:30.093
> 
> 标签：java, tomcat, web, stripes

所以我在这里关注 Stripes 网站上的快速入门指南：

[http://www.stripesframework.org/display/stripes/Quick+Start+Guide](http://www.stripesframework.org/display/stripes/Quick+Start+Guide)

我已经按照每个步骤进行操作，但是当我尝试查看它时，我收到了错误消息：

```
HTTP Status 500 - java.lang.ClassNotFoundException: org.apache.jsp.Test.WebContent.index_jsp

type Exception report

message java.lang.ClassNotFoundException: org.apache.jsp.Test.WebContent.index_jsp

description The server encountered an internal error (java.lang.ClassNotFoundException: org.apache.jsp.Test.WebContent.index_jsp) that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.Test.WebContent.index_jsp
org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:177)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

root cause

java.lang.ClassNotFoundException: org.apache.jsp.Test.WebContent.index_jsp
java.net.URLClassLoader$1.run(Unknown Source)
java.net.URLClassLoader$1.run(Unknown Source)
java.security.AccessController.doPrivileged(Native Method)
java.net.URLClassLoader.findClass(Unknown Source)
org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:132)
org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:63)
org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:172)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:369)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.29 logs. 
```

我真的不明白出了什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:52:53.507

问题是您没有正确构建它，请确保所有依赖项都在构建路径中，如果您导出它，请确保它们也在导出和部署路径中

# sql - 从同一个表中插入表中的值，修改一列

> ID：16190026
> 
> 赞同：0
> 
> 时间：2013-04-24T10:49:37.840
> 
> 标签：sql, db2, sql-insert

我有一种情况，我想使用现有的列值在表中插入值，但修改了一个日期列。我可以尝试使用表中的 select 语句插入值，但是如何为日期列添加不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T10:52:03.377

示例：（*这会复制另一条记录，但将日期设置为另一个显式值）*

```
INSERT [table] (col1, col2, col3, datecol, othercol)
SELECT col1, col2, col3, '20130104', othercol
  FROM [table]
 WHERE pk_id = 4; 
```

# node.js - node.js 侦听 UDP 并转发到连接的 http web 客户端

> ID：16190028
> 
> 赞同：6
> 
> 时间：2013-04-24T10:49:48.507
> 
> 标签：node.js, websocket, socket.io

我是 node.js 的新手，所以如果这很简单，请原谅我的无知。

我想要做的是设置一个简单的 node.js http 服务器，一个 web 客户端连接到该服务器。我还希望 node.js 服务器充当单独端口上的 UDP 侦听器，在该端口上它将接收来自其他应用程序的 JSON 有效负载。我希望 node.js 服务器将这些 JSON 有效负载立即转发到一个或多个连接的 Web 客户端。

我与最初的谷歌搜索相差甚远：

1.  创建一个简单的 node.js http 服务器，它以静态 html 页面响应：

    ```
    //Initialize the HTTP server on port 8080, serve the index.html page
    var server = http.createServer(function(req, res) {
        res.writeHead(200, { 
            'Content-type': 'text/html'});
            res.end(fs.readFileSync(__dirname + '/index.html'));
        }).listen(8080, function() {
            console.log('Listening at: 127.0.0.1 8080');
        }
    ); 
    ```

2.  在单独的端口上初始化 UDP 服务器：

    ```
    //Initialize a UDP server to listen for json payloads on port 3333
    var srv = dgram.createSocket("udp4");
    srv.on("message", function (msg, rinfo) {
      console.log("server got: " + msg + " from " + rinfo.address + ":" + rinfo.port);
      io.sockets.broadcast.emit('message', 'test');
      //stream.write(msg);
      //socket.broadcast.emit('message',msg);
    });

    srv.on("listening", function () {
      var address = srv.address();
      console.log("server listening " + address.address + ":" + address.port);
    });

    srv.bind(5555); 
    ```

3.  使用 socket.io 在 web 客户端和服务器之间建立实时连接：

    ```
    //this listens for socket messages from the client and broadcasts to all other clients
    var io = require('socket.io').listen(server);
    io.sockets.on('connection', function (socket) {
        socket.on('message', function (msg) {
          console.log('Message Received: ', msg.data.skeletons[0] ? msg.data.skeletons[0].skeleton_id : '');
          socket.broadcast.emit('message', msg);
        }
      );
    }); 
    ```

我想我的问题是我不知道如何桥接 2 和 3，以便将接收到的 UDP 数据包广播到连接的 socket.io 客户端。或者也许有一种更简单、更优雅的方式来做到这一点？我发现缺少 socket.io 的文档...

编辑：感谢修复代码格式的人

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-27T00:53:20.377

我为你做了一个运行示例：[http ://runnable.com/UXsar5hEezgaAACJ](http://runnable.com/UXsar5hEezgaAACJ)

现在它只是一个环回客户端 -> socket.io -> udp 客户端 -> udp 服务器 -> socket.io -> 客户端。

这是它的核心：

```
var http = require('http');
var fs = require('fs');
var html = fs.readFileSync(__dirname + '/index.html');

//Initialize the HTTP server on port 8080, serve the index.html page
var server = http.createServer(function(req, res) {
  res.writeHead(200, { 
    'Content-type': 'text/html'
  });
  res.end(html);
}).listen( process.env.OPENSHIFT_NODEJS_PORT, process.env.OPENSHIFT_NODEJS_IP, function() {
  console.log('Listening');
});

var io = require('socket.io').listen(server);

io.set('log level', 0);

io.sockets.on('connection', function (socket) {
  socket.emit('message', 'connected');
  socket.on('message', function (data) {
    console.log(data);
    var address = srv.address();
    var client = dgram.createSocket("udp4");
    var message = new Buffer(data);
    client.send(message, 0, message.length, address.port, address.address, function(err, bytes) {
      client.close();
    });
  });
});

var dgram = require('dgram');

//Initialize a UDP server to listen for json payloads on port 3333
var srv = dgram.createSocket("udp4");
srv.on("message", function (msg, rinfo) {
  console.log("server got: " + msg + " from " + rinfo.address + ":" + rinfo.port);
  io.sockets.emit('message', 'udp');
});

srv.on("listening", function () {
  var address = srv.address();
  console.log("server listening " + address.address + ":" + address.port);
});

srv.on('error', function (err) {
  console.error(err);
  process.exit(0);
});

srv.bind(); 
```

# sql - 将 WHERE 添加到 SQL 中的 AS 语句

> ID：16190029
> 
> 赞同：0
> 
> 时间：2013-04-24T10:49:58.860
> 
> 标签：sql

是否可以向 AS 添加 WHERE 语句？当我像这样运行sql时总是失败。我只需要某种示例，但我在搜索中找不到任何东西。

```
SELECT *, 
COUNT(my_other_table.id) as 'c_others' WHERE my_other_table.active = 1
LEFT JOIN my_other_table on my_accounts.id = my_other_table.account_connection
FROM my_accounts
ORDER BY my_accounts.name 
```

请注意我如何添加 WHERE my_other_table.active = 1，这就是我破坏一切的地方

我不是 100% 确定 AS 语句是如何工作的，通常我不会对它们做任何复杂的事情。但现在我需要，我无法弄清楚

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T10:52:55.173

`WHERE`子句必须位于表列表的末尾，在可选的`ORDER BY`. 查看 SELECT 语句必须遵守的结构定义：

```
SELECT 
[ DISTINCT | ALL ] 
  <select list>
  FROM <table reference list>
[ <where clause> ]             <-- THIS IS THE INTERESTING PART
[ <group by clause> ]
[ <having clause> ]
[ UNION [ALL] <query specification> ]
[ <order by clause> ] 
```

所以你的查询应该是这样的：

```
SELECT *, COUNT(my_other_table.id) AS c_others
FROM my_accounts
LEFT JOIN my_other_table ON my_accounts.id = my_other_table.account_connection
WHERE my_other_table.active = 1
ORDER BY my_accounts.name 
```

您还可以将条件添加到您的`ON`子句中：

```
SELECT *, COUNT(my_other_table.id) AS c_others
FROM my_accounts
JOIN my_other_table ON 
   my_accounts.id = my_other_table.account_connection
   AND my_other_table.active = 1
ORDER BY my_accounts.name 
```

该`AS`语句除了为选定字段指定别名外，什么都不做。当字段名太长时，这可能很有用，您想为函数调用定义一个名称（例如`COUNT(column) AS counter`，就像您使用它一样）或在连接具有相似列名的表时避免名称冲突。您还可以使用`AS`为*表名*指定别名以避免必须多次键入它。

**编辑：**

正如 HamletHakobyan 的评论中所述：`COUNT`是一个聚合函数，可能需要您`GROUP BY`在语句中选择的其他字段上使用子句。因此，您需要将其扩展`*`为实际的字段名并这样做：

```
SELECT
   my_accounts.name, 
   my_accounts.firstname, 
   COUNT(my_other_table.id) AS c_others
FROM my_accounts
JOIN my_other_table ON 
   my_accounts.id = my_other_table.account_connection
   AND my_other_table.active = 1
GROUP BY my_accounts.name, my_accounts.firstname
ORDER BY my_accounts.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:53:05.340

您可以将`WHERE`子句添加为：

```
SELECT *, 
    COUNT(my_other_table.id) as 'c_others'
FROM my_accounts
    LEFT JOIN my_other_table
        ON my_accounts.id = my_other_table.account_connection
WHERE my_other_table.active = 1
GROUP BY <list all necessary fields>
ORDER BY my_accounts.name 
```

或者，如果您想获得元素的选择性计数，请使用此

```
SELECT <list all necessary fields>, 
    COUNT(CASE WHEN my_other_table.active = 1 THEN my_other_table.id END) as 'c_others'
FROM my_accounts
    LEFT JOIN my_other_table
        ON my_accounts.id = my_other_table.account_connection
GROUP BY <list all necessary fields>
ORDER BY my_accounts.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T10:53:22.010

`AS`只是为对象（列、表等）引入了一个新*名称。*因此，`WHERE`对它应用 a 没有意义（因为在这种情况下，列的名称）对于整个结果集都是固定的。

猜测一下，您实际上想要修改`COUNT`, 以便您只计算那些`active`为 1 的行：

```
SELECT *, 
SUM(CASE WHEN my_other_table.active = 1 THEN 1 ELSE 0 END) as 'c_others'
LEFT JOIN my_other_table on my_accounts.id = my_other_table.account_connection
FROM my_accounts
ORDER BY my_accounts.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:01:10.587

AS 只是为列命名的关键字。这在复杂的列定义中很方便。该名称仅在查询结果中有效，但在查询中无效 - 您不能在同一查询中引用它。然后你必须使用子查询。

正如 Till Helge 所写的那样，WHERE（以及其他关键字）在 Query 中占有一席之地。

# css - 禁用 IE8 蓝色边框环绕图标

> ID：16190030
> 
> 赞同：0
> 
> 时间：2013-04-24T10:50:00.293
> 
> 标签：css, internet-explorer-8

我已将图像附加到具有 css 样式的按钮。

```
 .a-icon {
    background: url('../a.png') no-repeat 100% 100%;
 }

 .b-icon {
    background: url('../b.png') no-repeat 100% 100%;
 } 
```

在 Firefox 中它看起来不错，但在 IE8 中，当按钮被禁用时，图标周围会出现蓝色边框。我曾尝试添加边框：无等，但没有运气。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:09:54.093

在 IE lte 9 上，所有带有`img`内部的链接都有一个蓝色边框，添加到此标签的您的 css 全局样式中。

```
a img {
 border:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:56:05.253

将此添加到您的 CSS 中：

```
.a-icon,
.a-icon img,
.b-icon,
.b-icon img {
    border: 0;
    outline: 0;
    background: transparent;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:18:09.550

我认为这将是您正在寻找的解决方案。如果我理解正确，问题在于图像周围的链接边框。所以你必须删除它。所以试试这个：

```
 a img {
    border:0;
 } 
```

希望能帮助到你

# java - 如果抛出任何异常，请关闭命令提示符窗口

> ID：16190033
> 
> 赞同：1
> 
> 时间：2013-04-24T10:50:13.803
> 
> 标签：java, batch-file, jar

我已经创建了批处理文件并安排它每 1 小时一次。

下面是批处理文件脚本

```
set libpath=D:\Batch\Batch_lib
set classpath=%classpath%;%libpath%\aspriseOCR.jar
set classpath=%classpath%;%libpath%\aspriseTIFF.jar
set classpath=%classpath%;%libpath%\cmb81.jar
set classpath=%classpath%;%libpath%\cmbcm81.jar
set classpath=%classpath%;%libpath%\cmbem81.jar
set classpath=%classpath%;%libpath%\cmbicm81.jar
set classpath=%classpath%;%libpath%\cmbicmc81.jar
set classpath=%classpath%;%libpath%\cmbicmcup.jar
set classpath=%classpath%;%libpath%\cmblog4j81.jar
set classpath=%classpath%;%libpath%\cmbsdk81.jar
set classpath=D:\Batch\Batch_1.jar
java -Xms1024m -Xmx1024m -jar Batch_1.jar
exit 
```

此批处理文件执行可运行的 jar 文件。在执行 jar 并经过一段时间后，它会抛出内存异常，并且命令提示符窗口永远不会关闭，并且它也不会在一个小时后启动另一个命令提示符。

所以我关心的是如何在它引发任何 java 异常后关闭命令提示符？

至少它应该在一个小时后关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:19:18.213

Java 将异常输出到错误流，因此您需要通过重定向到 &1 来捕获它：

`java -Xms1024m -Xmx1024m -jar Batch_1.jar 2>&1 | find "Exception" && exit`

这应该可以在不考虑退出代码的情况下工作。

# java - 将 Joda LocalTime 转换为 java.sql.Date

> ID：16190035
> 
> 赞同：24
> 
> 时间：2013-04-24T10:50:16.387
> 
> 标签：java, date, jdbc, jodatime

要进行 JDBC 查询，我需要将日期传递给它。日期保存在PostgreSql 数据库的[`Date`字段](http://www.postgresql.org/docs/9.1/static/datatype-datetime.html)类型中，表示特定的日期，没有任何时间。

因为我只需要日期，所以我决定使用仅代表没有时间的日期的特定对象，它[`LocalDate`来自 Joda-Time 包](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)。我认为这很重要，因为如果我使用 DateTime 对象，它将携带冗余时间数据，并且当时钟向后一小时时，它可能会导致夏令时结束时出现错误（尽管这种情况史无前例，但并非如此不可能的）。

但是当我开始尝试`LocalDate`用可接受的`preparedStatement.setDate`方法参数来平方对象时，我没有找到合适的方法来做到这一点。

`setDate`接受`java.sql.Date`作为参数。构造对象的唯一选择`java.sql.Date`是以毫秒为单位传递时间。

但这违背了使用`LocalDate`Joda-Time 包的所有目的，因为在此转换中我们回到毫秒，当这些转换发生时，时钟可能会延迟一小时并将日期更改为前一个日期。

所以，现在我的代码中有这一行：

```
preparedStatement.setDate(1, new java.sql.Date(localDate.toDate().getTime())); 
```

但这是转换`LocalDate`为接受`setDate`格式的最佳方式吗？

我对夏令时和相应的时钟变化的担忧是否合理？

有没有更好的方法将日期（并且只有没有时间的日期）传递给 JDBCpreparedStatement？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T12:46:34.907

使用您的技术应该是安全的，因为所有时区问题都会被`LocalDate#toDate`. 您所拥有的毫秒瞬间与上下文无关：它与您用于转换的区域设置内的该时间点有效的时区唯一相关。换句话说，如果您在一年中重复转换完全相同的毫秒值，您将始终得到完全相同的答案，*即使同时您所在位置的时区规定发生变化*，因为 JDK 指的是记录完整历史的数据库世界各地的所有时区变化。

在对这些问题进行推理时，重要的是要记住您当前的时区对转换没有影响，这是由您的*语言环境*参数化的，并且仅在被转换的瞬间的上下文中解析时区。

我衷心同情你对这一切的不安：它把一个简单而直接的操作变成了一个复杂的计算迷宫，只会招来麻烦。希望 Java 8 及其新的（是的，再次！）日期/时间 API 会发生积极的转变，它坚定地基于 JodaTime。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-19T13:52:04.100

我今天遇到了同样的问题。我正在使用 JDK 8。经过几个小时的搜索后，我终于在 Java SE 8 文档中找到了答案。这是解决方案：

```
statement.setDate(5, java.sql.Date.valueOf(personToUpdate.getBirthday())); 
```

语句是 PreparedStatement 实例。“personToUpdate.getBirthday()”是 LocalDate 的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-26T12:24:29.743

由于 org.joda.time.toDateMidnight() 和 org.joda.time.toDateMidnight(DateTimeZone zone) 已被弃用，这对我来说是完美的解决方案。

我的典型课程，要坚持：

```
 ...
    import org.joda.time.LocalDate;
    ...

    public class MyObject implements Serializable {

      ...
      private LocalDate startDate;

      ...
      private EndDate startDate;

      // Getters and Setters
      ...

      ...
    } 
```

我是我坚持startDate的另一个班级，我有：

```
 myObject.setStartDate(new LocalDate(myObject.getStartDate().toDateTimeAtStartOfDay(DateTimeZone.getDefault()))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-27T07:30:41.840

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:15:51.940

尝试使用`LocalDate#toDateMidnight()`将时间设置为 0 然后`DateMidnight#toDate()`.

```
Date date = localDate.toDateMidnight().toDate(); 
```

或者，如果您使用的是 JodaTime 1.5 或更新版本，请使用`LocalDate#toDateTimeAtStartOfDay()`然后`DateTime#toDate()`

希望有所帮助

# php - 如何使用 javaScript 将数据添加到组合中，然后使用 POST 进行选择？

> ID：16190036
> 
> 赞同：0
> 
> 时间：2013-04-24T10:50:18.873
> 
> 标签：php, javascript, smarty

我公开了我的案例，我选择了 mysql 数据并用 php 和 smarty 填充了一个组合，然后我有一个按钮可以向这个组合和 bbdd 添加更多数据。一切正常，但我在 POST 数据收集添加到组合中的数据时没有拾取它

代码：

带有 smarty 的 HTML 代码填充组合，以及将新数据添加到组合的按钮

```
<form action="algo.php" method="post">
<div class="form-field">
<label for="cliente_sector">Sector*</label>
    <select name="cliente_sector" id="cliente_sector">
           {section name=sector loop=$sectores}
                   <option value="{$sectores[sector].sector}">{$sectores[sector].sector}</option>
           {/section}
     </select>
    <p>Sector del cliente</p>
    <label onclick="javascript:anadir('divAnadir')">Nuevo sector</label>
</div>

<div id="divAnadir" style="display: none;">
    Nuevo sector:<input type="text" id="nuevo_sector" name="nuevo_sector" value=""/>
     <input onclick="javascript:nuevoSector()" type="button" value="Añadir nuevo sector "/>
</div>
</form> 
```

javascript函数

```
function anadir(a){
if(document.getElementById(a).style.display=="none")
    $("#divAnadir").css("display", "block");
else
    $("#divAnadir").css("display", "none");
}
function nuevoSector(){
var datos = document.getElementById("nuevo_sector").value;
$.get("/ajax/altaNuevoSector.php?sector="+datos, datos, function(data){
    if(data != 1) {
        alert('Nuevo sector añadido');
        $("#divAnadir").css("display", "none");
        $("#cliente_sector").append('<option value=" " selected="selected">'+data+'</option>')
        return true;
    }else{
        alert('Este sector ya existe, pruebe de nuevo.');
        return false;
    }  
});
} 
```

用于更新 bbdd 和响应 javascript 的 PHP 脚本：

```
<?php
session_start();
require_once('../includes/config.php');
if($_GET['sector']){
    $sql = "INSERT INTO clientes_sectores(sector) VALUES ('".$_GET['sector']."')";
    $consulta = $con->ejecutar($sql);

    if(!is_numeric($consulta))
        echo '1';
    else
        echo $_GET['sector'];
}

?> 
```

一切正常，数据被添加到 bbdd 并显示在组合中，问题是组合是一种形式，通过邮寄我尝试选择数据，如果值 cliente_sector 是新的，不让我选择它， $ _POST ['cliente_sector'] 被清空。我如何解决它？当我在我的表单中提交 $_POST['clientes_sector'] 时，如果在组合中选择了新值。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:46:18.147

最后我用一个js函数刷新了页面。谢谢大家。

# cordova - Phonegap 科尔多瓦 2.3.0 phonegap-facebook-plugin

> ID：16190038
> 
> 赞同：6
> 
> 时间：2013-04-24T10:50:19.503
> 
> 标签：cordova, phonegap-plugins, facebook-ios-sdk

我正在尝试在我的 ios phonegap 应用程序上设置 facebook connect 插件，我按照以下链接中的步骤操作

[https://github.com/phonegap/phonegap-facebook-plugin](https://github.com/phonegap/phonegap-facebook-plugin)

并完成了 100% 但是当我运行应用程序时它在控制台中显示此错误

```
2013-04-24 13:43:10.009 ShoBingg[2538:19a03] CDVPlugin class FacebookConnectPlugin (pluginName: org.apache.cordova.facebook.Connect) does not exist.
2013-04-24 13:43:10.010 ShoBingg[2538:19a03] ERROR: Plugin 'org.apache.cordova.facebook.Connect' not found, or is not a CDVPlugin. Check your plugin mapping in config.xml.
2013-04-24 13:43:10.010 ShoBingg[2538:19a03] -[CDVCommandQueue executePending] [Line 103] FAILED pluginJSON = ["org.apache.cordova.facebook.Connect467591405","org.apache.cordova.facebook.Connect","init",["427370550688587"]]
2013-04-24 13:43:10.010 ShoBingg[2538:19a03] CDVPlugin class FacebookConnectPlugin (pluginName: org.apache.cordova.facebook.Connect) does not exist.
2013-04-24 13:43:10.010 ShoBingg[2538:19a03] ERROR: Plugin 'org.apache.cordova.facebook.Connect' not found, or is not a CDVPlugin. Check your plugin mapping in config.xml.
2013-04-24 13:43:10.010 ShoBingg[2538:19a03] -[CDVCommandQueue executePending] [Line 103] FAILED pluginJSON = ["org.apache.cordova.facebook.Connect467591406","org.apache.cordova.facebook.Connect","getLoginStatus",[]] 
```

我在互联网上搜索了这个错误，每个人都有同样的错误，通过在 config.xml 中添加下面的代码行来修复它

```
<plugin name="org.apache.cordova.facebook.Connect" value="FacebookConnectPlugin" /> 
```

我添加了它，但我仍然有同样的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T05:26:36.307

您是否已将此添加到您的 config.xml 中？

```
<feature name="org.apache.cordova.facebook.Connect">
        <param name="ios-package" value="FacebookConnectPlugin" />
    </feature> 
```

我有同样的问题，添加了这个，它对我有用： [source](https://github.com/phonegap-build/FacebookConnect/issues/20)

请注意，这仅在 phonegap cordova 3.0 上进行了测试

# matlab - 如何在matlab中将循环结果转换为向量或矩阵

> ID：16190042
> 
> 赞同：0
> 
> 时间：2013-04-24T10:50:30.930
> 
> 标签：matlab

事情是这样的：我有 while 循环嵌套在一个 for 循环中。作为变量 flp 的结果，我可以获得每次迭代的结果。但现在我希望将所有这些结果存储在一个向量中，该向量与另一个名为 eci 的变量具有相同的行数。我知道我必须预先分配向量。但是我如何从这里继续前进？保护你！

这是我到目前为止所做的代码：

```
for eci=0:0.0002:ecu
    fl=0;
    fcc=fc0*(2.254*sqrt(1+7.94*fl/fc0)-2*fl/fc0-1.254);
    ecc=ec0*(1+5*(fcc/fc0-1));
    r=Ec/(Ec-fcc/ecc);
    x=eci/ecc;
    fc=fcc*x*r/(r-1+x^r);
    el=(Ec*eci-fc)/(2*beta*fc);
    flp=ke*kr*2*nf*tf*Ef*1000*el/B;
    while abs(fl-flp)>0.0001
        fl=flp;
        fcc=fc0*(2.254*sqrt(1+7.94*fl/fc0)-2*fl/fc0-1.254);
        ecc=ec0*(1+5*(fcc/fc0-1));
        r=Ec/(Ec-fcc/ecc);
        x=eci/ecc;
        fc=fcc*x*r/(r-1+x^r);
        el=(Ec*eci-fc)/(2*beta*fc);
        flp=ke*kr*2*nf*tf*Ef*1000*el/B
    end
end

eci=[0:0.0002:ecu]';
m=size(eci);
m(:,2)=[];
mat_result=zeros(m,1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T16:07:06.360

它非常简单，从一个空向量开始，例如：

```
results = zeros(length(0:0.0002:ecu),1); 
```

然后从循环中的某个地方开始计数`t=t+1`（当然要正确初始化）并存储结果：

```
results(t) = myResult 
```

# c# - 遍历 2D 数组（网格）的最佳寻路算法触及一些必填点（JavaScript/Java/C#）

> ID：16190044
> 
> 赞同：0
> 
> 时间：2013-04-24T10:50:38.807
> 
> 标签：c#, java, javascript, path-finding, dijkstra

我有一个二维数组，我想从一个点开始遍历到另一个点，并具有以下约束：

*   只允许水平和垂直方向移动
*   路径必须触及数组内的每个强制点
*   阵列没有障碍物

这是一个图形表示：

```
+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | 0 | E |
+---+---+---+---+---+---+
| 0 | 1 | 1 | 0 | 1 | 0 |
+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 | 0 | 0 |
+---+---+---+---+---+---+
| S | 0 | 1 | 0 | 0 | 0 |
+---+---+---+---+---+---+ 
```

从点 S 开始，算法应该能够找到到达 E 的最短路径，接触所有以“1”表示的点，并且只能水平或垂直移动。

我必须用 Javascript 来实现它（但即使在 C# 或 Java 中也应该不错，我想我可以翻译它:)）

哪种算法最适合我的需求？我用谷歌搜索了很多，但只发现了一些相似但不同的 Dijkstra 或 A 星实现（它们不必触及强制性点......）

有人遇到过这样的问题吗？

有人可以帮忙吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T06:36:45.660

好的，抱歉回复晚了。我想你可能已经得到了一些实现。如果没有，请考虑一下。

让我先做一个简单的版本。让我们假设 S 和 E 在它们各自的列中要么是最顶部的，要么是最底部的。有问题的问题图片符合这一点。

该算法应该：

1.  向上（向下）移动列，直到达到（当前列顶部，下一列顶部）的最大值。
2.  过渡到下一列。下一列成为当前列。
3.  向下移动列，直到达到（当前列底部，下一列底部）的最大值

需要考虑的事项

1.  您可以在行上运行算法。
2.  最后一行/列需要以不同方式处理。
3.  最后一行/列和第一行/列可能需要遍历两次。
4.  如果 S 和 E 在行/列的中间，则需要修改。

PS我记得在某处做这个算法问题。如果我找到某个地方，将发布源代码。

# c++ - 如何保持控件 MFC 的 TopMost 位置？

> ID：16190057
> 
> 赞同：0
> 
> 时间：2013-04-24T10:51:11.470
> 
> 标签：c++, mfc

我想保持控制是最重要的。但是其他控件被重绘以更新`OnTimer()`方法中的图像。所以他们画了第一个我最想保持领先的人。虽然我设置

```
m_thumbnail->
SetWindowPos(&wndTopMost , 300, 400, 500, 400, SWP_SHOWWINDOW|SWP_NOZORDER); 
```

任何能让它始终保持领先的想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:48:56.747

`SetWindowPos`-function 有一个名为 的参数`hWndInsertAfter`。使用此参数，您可以控制控件的 z 顺序。您还必须删除`SWP_NOZORDER`标志。

# c++ - 有没有办法在 Visual Studio 中获取某些 c++ 函数的调用图？

> ID：16190058
> 
> 赞同：28
> 
> 时间：2013-04-24T10:51:14.060
> 
> 标签：c++, visual-studio

我想知道是否有 VS 工具可以显示给定 C++ 函数的调用图（即列出所有*可能*执行路径的图）。在仅在几个地方调用函数的情况下，它将有助于导航大型代码库。

对于经常调用的函数，`printf`它可以简单地说：

> 太多的选择...

再次，我想制作这样的工具并不容易，所以我想知道它是否存在，但你知道它似乎可以做到，所以你永远不知道...... :)

编辑：我知道找到所有引用，但这只是给出函数的调用点，而不是调用函数的函数的调用点...

编辑：VS 是 2010，但如有必要，可以选择 VS2012。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-27T09:52:16.223

你提到你知道如何找到所有的参考资料。你有没有考虑查看`Call Hierarchy`？这可能不是您的“梦想方法”，但它确实允许您根据给定函数的“调用”和“调用”来查看函数。该窗口还允许您添加多个功能以树格式查看。所以基本上你会通过可能的结果向上或向下树。

> 右键单击所需的方法（可以在层次结构中的任何位置）=>
> 
> 选择“查看调用层次结构”
> 
> 请注意，如果您可以向窗口添加多个参考点。需要时删除
> 
> 您也可以使用 Ctrl+K 或 Ctrl+T

* * *

另一个很好的例子，恕我直言，对 C++ 和 C# 与 VS 之间的差异感到失望。我认为[Code Maps](http://msdn.microsoft.com/en-us/library/vstudio/jj739835.aspx)正是您正在寻找的。当然，假设您使用的是 Ultimate，但不是，不是使用 C++。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-27T19:16:53.140

据我所知，C++/MSVC 中没有这样的功能。

但是，Windows 的 AQTime 分析器具有“静态分析”选项（如果我没记错的话）扫描已编译的可执行文件、生成调用图并向您显示无法访问的函数。

如果我没记错的话，AQtime 集成到了视觉工作室（专业版，afaik）。

不幸的是，这是一个价格约为 500 美元的商业分析器，并且此功能在试用版中不可用。上次我使用静态分析是在 3..4 年前，我现在不完全记得细节（而且我再也无法访问 AQTime）。无论如何，它是一个专门的工具，所以我不建议您购买它，除非您正在优化代码以实现 24/7 速度。

也许，通过谷歌搜索“静态分析”、“代码覆盖率”或研究其他分析器，您会发现有些类似的工具可以免费完成这项工作。

除此之外，doxygen 可以为 C++ 代码生成调用图。如果是 doxygen，您将不得不寻找从未调用过的函数。

此外，Visual Studio 2008 有一个内置的调用者图表功能（我认为它使用了智能感知）。基本上，你右键单击任何函数并选择“显示调用者”（或类似的东西），这将在一个窗口中打开所有函数的列表（visual studio THINKS 正在调用你的函数）。因为这个特性在 VS2008 中已经存在，所以它应该包含在 VS2010 中。但是，由于明显的原因（虚拟方法、回调等），它无法检测到每个调用者。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-27T11:13:37.123

也许 doxygen 是您正在寻找的工具。它提供了生成调用图（显示由特定函数调用的所有函数）和/或调用者图（显示直接或间接调用该函数的函数）的可能性。

见： http: [//www.doxygen.nl/manual/diagrams.html](http://www.doxygen.nl/manual/diagrams.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-03T09:04:02.573

看看了解工具 ( [http://www.scitools.com](http://www.scitools.com) )。它非常适合绘制调用图和控制流程图。不幸的是，它是商业的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-04T05:27:16.710

您可以在进行符号搜索后解析结果。只需右键单击您的源代码，然后选择查找所有执行符号搜索的引用。它在[http://blogs.msdn.com/b/vcblog/archive/2009/11/17/improvements-to-find-all-references-in-visual-studio-2010.aspx有更详细的解释](http://blogs.msdn.com/b/vcblog/archive/2009/11/17/improvements-to-find-all-references-in-visual-studio-2010.aspx)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-02T09:33:45.907

您可以尝试[CppDepend](http://www.cppdepend.com)，它为您提供 VS 内部的调用图，并在其依赖图中提供许多功能。

[![在此处输入图像描述](https://i.stack.imgur.com/TrcEz.png)](https://i.stack.imgur.com/TrcEz.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-21T12:01:51.953

Source Navigator 是我在 C++ 项目中使用过并且非常满意的工具。同样，它不在 Visual Studio IDE 中，但如果您不介意按 Alt-Tab ，它有一些很大的优势 :-)

*   适用于 C 和 C++ 源代码
*   它的索引和搜索速度非常快；使用起来很愉快，恕我直言
*   是一个可视化工具
*   是一个免费的开源工具

有关一些屏幕截图，请参见[http://sourcenav.berlios.de/screenshots/](http://sourcenav.berlios.de/screenshots/)

特别是，您正在寻找[交叉引用浏览器](http://sourcenav.sourceforge.net/online-docs/userguide/crossref.html)：

> “它可以找到函数的每个调用，或者告诉你特定函数调用的所有内容。它创建树形图，显示项目符号数据库中的基本关系，例如函数调用层次结构树。你可以向上和向下遍历层次结构树，以及扩展或限制树。您可以选择层次结构中的项目并显示它们的引用和引用关系；这些关系基于所选符号的“观点”。

尽管本教程[“使用交叉引用浏览器”的](http://sourcenav.sourceforge.net/online-docs/userguide/tutorial.html#pgfId-1223096)示例屏幕截图显示了类而不是函数的引用关系（使用红色箭头），但后一个用例将非常相似。您还可以浏览从函数调用的函数/方法，这将是一个引用关系，使用蓝色箭头而不是红色箭头显示。

![在此处输入图像描述](https://i.stack.imgur.com/j296R.gif)

试一试吧！正如我之前提到的，我一直是这个工具的快乐用户。它不是很有名，但它是一个很好的软件（这也是 Tcl/Tk 在右手中的有用性的一个例子）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-01T15:12:05.020

我认为您应该能够在您的解决方案上使用 VS Plugin - CodeGraph 并寻找您正在寻找的特定功能并从那里继续。它对您的解决方案进行静态分析，并生成一个很好的调用流图。检查“ [https://marketplace.visualstudio.com/items?itemName=YaobinOuyang.CodeAtlas](https://marketplace.visualstudio.com/items?itemName=YaobinOuyang.CodeAtlas) ”。希望这可以帮助。

# php - 从 Facebook RSS 提要中提取外部图像 url

> ID：16190062
> 
> 赞同：0
> 
> 时间：2013-04-24T10:51:22.563
> 
> 标签：php, facebook

我有一个看起来像这样的 Facebook 页面 Feed，

```
http://external.ak.fbcdn.net/safe_image.php?d=AQA-U_vFlmf0YW5c&w=130&h=130&url=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FX9Hx6nUTSwE%2Fmaxresdefault.jpg%3Ffeature%3Dog 
```

如何提取 &url.........featuredog (Extracting only image url) 之间的内容？欣赏任何代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:00:55.097

我的正则表达式很丑，但可以解决问题：

```
<?php
$str = 'http://external.ak.fbcdn.net/safe_image.php?d=AQA-U_vFlmf0YW5c&w=130&h=130&url=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FX9Hx6nUTSwE%2Fmaxresdefault.jpg%3Ffeature%3Dog';

$str = urldecode($str);
preg_match_all('~&url=(.*?)[\?\!]?feature~i', $str, $matches, PREG_PATTERN_ORDER);

echo $matches[1][0];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:27:53.807

```
$parts = parse_url('http://external.ak.fbcdn.net/safe_image.php?d=AQA-U_vFlmf0YW5c&w=130&h=130&url=http%3A%2F%2Fi1.ytimg.com%2Fvi%2FX9Hx6nUTSwE%2Fmaxresdefault.jpg%3Ffeature%3Dog');
parse_str($parts['query'], $params);
var_dump($params['url']); 
```

# ruby - 用于烹饪食谱的 Ruby 库或格式

> ID：16190068
> 
> 赞同：1
> 
> 时间：2013-04-24T10:51:42.837
> 
> 标签：ruby, format, recipe

我开始为需要保存和导出烹饪食谱的客户实施网站。需要有一个 CRUD 编辑部分并导出为模板 PDF。

我一直在尝试研究现有格式（基于文件或数据库）来保存食谱。我不想只是开始设计一个模式，因为我有一种感觉，它不会是微不足道的。此外，我希望应用程序基于最常用的格式，因此导入/导出会更容易。

这个页面： http: [//microformats.org/wiki/recipe-formats](http://microformats.org/wiki/recipe-formats)列出了一些食谱的文件格式，但没有一个让我觉得是“确定的”格式。

所以问题是双重的：

是否存在被普遍接受为“行业标准”的配方文件格式？

和

是否有用于管理食谱的库（最好是 Ruby）？像 chef 和 capistrano 这样的工具让谷歌无法搜索这个......

# asp.net - 在不同名称的浏览器中打开pdf

> ID：16190073
> 
> 赞同：1
> 
> 时间：2013-04-24T10:51:57.790
> 
> 标签：asp.net, web-applications, pdf-generation

我的程序在浏览器中生成 PDF（在浏览器中打开 PDF）。但是当我想将文件保存在计算机中时，PDF 的默认名称总是相同的（我的班级名称）。我想传递不同pdf的名称...这是我的代码：

```
protected void displayPDF(string filePath, string filename)
{
    Response.Clear();
    Response.ContentType = "Application/PDF";
    //what i do with filename?
    Response.WriteFile(filePath);
    Response.Flush();
    Response.End();
} 
```

我试过这个：

> Response.AddHeader("Content-Disposition", "attachment; filename=myfile.pdf");

但是这种方式，pdf不会在浏览器中打开，像附件一样传递。

你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:40:35.550

尝试 HttpResponse.TransmitFile(path) 例如。 [http://bojanskr.blogspot.ca/2012/03/providing-file-for-download-trough-save.html?m=1](http://bojanskr.blogspot.ca/2012/03/providing-file-for-download-trough-save.html?m=1)

# junit - Junit testing in java

> ID：16190075
> 
> 赞同：-4
> 
> 时间：2013-04-24T10:52:02.773
> 
> 标签：junit

Please, how can I write a junit test cases for these methods :

```
public void setDishProvider(DishProvider dishProvider) {
        this.dishProvider= dishProvider;
        dishProvider.addDishListener(this);
    }

public int peopleHelped() {
        return counter; //returns the counter..
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:33:50.813

guessing blindly...

```
@Test
public void testSetDishProvider() {
    YourClass yourclass = new YourClass();
    DishProvider dishProvider = new DishProvider();

    yourClass.setDishProvider(dishProvider);

    assertEquals(dishProvider, yourClass.getDishProvider());
    assertTrue(dishProvider.getListeners().contains(yourClass));
} 
```

# android - zxing 条码扫描仪自动对焦不工作

> ID：16190077
> 
> 赞同：2
> 
> 时间：2013-04-24T10:52:05.603
> 
> 标签：android, android-camera, zxing, barcode-scanner, autofocus

我能够使用 zxing 库成功集成条码扫描仪来制作独立的扫描仪。我的应用程序中出现的问题是**autofocus**。我的应用程序中的相机正在获取初始焦点并且没有重置。例如。如果最初我将相机对准黑暗的表面，然后将其聚焦到具有条形码的页面上，则页面上的文本甚至都不可见。对比度太高。并且这种对比度不会像 zxing 在条形码扫描仪应用程序中那样重置。

我已经看到其他应用程序，例如 pvr 电影院，它们正在使用 zxing 库，并且在我的设备上它们在这个问题上运行良好。他们的焦点正在重新设定。

我已经按照这个[教程](http://phpmyweb.net/2012/07/18/integrating-zxing-in-your-android-app-as-standalone-scanner/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T10:31:27.370

我已经注释掉了这部分

```
task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, args); 
```

感谢您指出`AutofocusManager`我添加了

```
if (Build.VERSION.SDK_INT >= 11 ) {
                         // changed to 11 as Build.VERSION_CODES.HONEYCOMB is not
                         // accessible on android platform prior to 3.0
    task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, args);
} else {
    task.execute(args);
} 
```

在`HoneycombAsyncTaskExecInterface`

现在它工作正常。谢谢@[肖恩欧文](https://stackoverflow.com/users/64174/sean-owen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:00:55.693

您可能修改了扫描聚焦循环并导致它停止工作。看如何`AutofocusManager`触发焦点，等待预览帧，然后再次触发。您需要调试这部分以查看您所做的更改。

# c++ - 如何以原子方式更新最大值？

> ID：16190078
> 
> 赞同：45
> 
> 时间：2013-04-24T10:52:13.223
> 
> 标签：c++, c++11, concurrency, atomic, max

在串行代码中，更新最大值可以简单地通过

```
template<typename T>
void update_maximum(T& maximum_value, T const& value) noexcept
{
  if(value > maximum_value) maximum_value = value;
} 
```

`atomic<T>`但是，对于保持最大值的变量，应该如何做到这一点：

```
template<typename T>
void update_maximum(std::atomic<T>& maximum_value, T const& value) noexcept
{
   // want a lock-free, thread-safe implementation
} 
```

显然，串行版本的代码不起作用，因为另一个线程可能会`maximum_value`在加载和存储之间改变。可以使用`compare_exchange`（比较`==`而不是`>`）来实现这一点吗？如何？

请注意，不允许使用显式锁（唯一允许的锁是 的实现可能附带的锁`std::atomic<T>`）。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-24T11:28:25.410

在单个操作中似乎不可能，但是您可以创建一个循环，尝试执行此操作，直到它最终成功或原子变量中的值变得大于`value`：

```
template<typename T>
void update_maximum(std::atomic<T>& maximum_value, T const& value) noexcept
{
    T prev_value = maximum_value;
    while(prev_value < value &&
            !maximum_value.compare_exchange_weak(prev_value, value))
        {}
} 
```

# charts - 如何在 .net 图表中将趋势线添加到散点图？

> ID：16190080
> 
> 赞同：0
> 
> 时间：2013-04-24T10:52:19.113
> 
> 标签：charts

我使用散点图来可视化男性和女性的体重和身高的相关性。我用 .net 图表来做到这一点：

```
chart.Type = ChartType.Scatter;
chart.DefaultSeries.Type = SeriesType.Marker;

SeriesCollection SC = new SeriesCollection();

Series s1 = new Series();
s1.Elements.Add(GetElements(female));

Series s2 = new Series();
s2.Elements.Add(GetElements(male));

SC.Add(s1);
SC.Add(s2); 
```

如何为两个系列添加一级趋势线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:25:52.020

对此有一种数学方法`StatisticalEngine.LeastSquaresEstimateY()`，它采用应计算趋势线的系列。它会生成一个新系列，您可以像往常一样设置它的样式：

```
Series s3 = StatisticalEngine.LeastSquaresEstimateY("Series 1", s1);
s3.Type = SeriesType.Line;

Series s4 = StatisticalEngine.LeastSquaresEstimateY("Series 2", s2);
s4.Type = SeriesType.Line;

SC.Add(s3);
SC.Add(s4); 
```

# php - 显示输入表单

> ID：16190081
> 
> 赞同：2
> 
> 时间：2013-04-24T10:52:25.437
> 
> 标签：php, html

我在 html 中有一个需要填写的表单的代码。单击“确定”按钮时，会将值发送到 php 脚本。我使用 $_POST。当输入格式不正确但仅在我的 php 脚本中执行此操作时，我可以显示相同的表单吗？
这是我检查我的一些字段但我不知道如何重新显示表单的地方。

```
if (isset($_POST["name"])) {
$name = $_POST["name"];
}

if (isset($_POST["date"])) {
    $date = $_POST["date"];
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:08:25.730

你可以尝试这样的事情：

```
<?php
    foreach($_POST as $key => $value) {
        $$key = $value;
    }
?>

<form method="post" action="">
    <input type="text" name="name" value="<?php echo !empty($name) ? $name : 'Fill in your name'; ?>" />
    <input type="text" name="age" value="<?php echo !empty($age) ? $age : 'Fill in your age'; ?>" />
    <input type="text" name="what" value="<?php echo !empty($what) ? $what : 'what'; ?>" />
    <input type="text" name="ever" value="<?php echo !empty($ever) ? $ever : 'ever'; ?>" />

    <input type="submit" value="Go" />
</form> 
```

如果你正在寻找一个 php 模板引擎来拆分 PHP 和 HTML，我推荐[Smarty](http://www.smarty.net/)

## 编辑

要在没有引擎的情况下拆分 HTML 和 PHP，您可以执行以下操作：组合函数`file_get_contents()`，`str_replace`如下所示：

## 模板.html

```
<form method="post" action="">
    <input type="text" name="name" value="#_name_#" />

    <input type="submit" value="Go" />
</form> 
```

## PHP

```
<?php
    $template = file_get_contents('template.html');
    foreach($_POST as $key => $value) {
        $template = str_replace('#_'.$key.'_#', !empty($value) ? $value : '');
    }
    echo $template;
?> 
```

这样你就可以得到 .html 文件，并`#_name_#`用帖子或默认值替换。

我还是建议你使用[Smarty](http://www.smarty.net/)

# jquery - jquery select2 - 不工作

> ID：16190088
> 
> 赞同：20
> 
> 时间：2013-04-24T10:52:42.363
> 
> 标签：jquery, ajax, jquery-select2

我正在使用 select2 插件（ivaynberg.github.io/select2）。我正在尝试显示一个下拉列表（选择）。它正在获取 data.php 中的所有项目作为选项。然而 select2 是一个自动完成插件，应该搜索客户端输入的搜索词，并只显示匹配的结果。目前它正在显示所有项目并且没有获得搜索结果。对不起我的语言

data.php 呼应了这一点：

```
[{
    "id": "1",
    "text": "item1",
    "exercise": "blah text"
  }, {
    "id": "2",
    "text": "item2"
  }
] 
```

代码是：

```
$(document).ready(function () {
    $('#thisid').select2({
        minimumInputLength: 2,
        ajax: {
            url: "data.php",
            dataType: 'json',
            data: function (term, page) {
                return {
                    q: term
                  };
            },
            results: function (data, page) {
                return {
                    results: data
                };
            }
        }
    });
}); 
```

输入是：

```
<input type="hidden" id="thisid" style="width:300px" class="input-xlarge" /> 
```

我想找到一个线索，我对这个插件很陌生，并且花了一天时间查看示例。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-02T18:37:08.673

**如果附加到标准`select`表单控件，select2 将不会执行 AJAX。它必须附加到隐藏`input`控件才能通过 AJAX 加载。**

**更新**：这已在 Select2 4.0 中修复。来自[预发布说明](https://select2.github.io/announcements-4.0.html)：

> 与所有数据适配器的标准元素保持一致，`<select>`无需隐藏`<input>`元素。

它也可以在他们的[示例部分](https://select2.github.io/examples.html)的功能中看到。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-18T20:16:00.767

我猜 user2315153 想要接收多个远程值，并错误地将带有 ajax 调用的 select2() 分配给 < *select* > 元素。

获取远程值的正确方法是使用普通的 < *input* > 元素，如果需要多个值，请在方法调用时通知“多个”参数。例子：

```
<input type="hidden" id="thisid" style="width:300px" class="input-xlarge" />
<script>
$('#thisid').select2({
        minimumInputLength: 2,
        multiple: true,
        ajax: {
              ... 
```

< *select* > 元素不能用于远程值

> **更新：**从 select2 4.0.0 开始，隐藏输入已弃用：

[https://select2.github.io/announcements-4.0.html#hidden-input](https://select2.github.io/announcements-4.0.html#hidden-input)

这意味着：不要使用输入属性 select2 插件，而是使用 SELECT 标记。

注意：很容易从您的服务器使用任何格式的 json。只需使用“processResults”即可。

例子：

```
<select id='thisid' class='select2-input select2'></select>
<script>
        $("#thisid").select2({
            multiple: true,
            closeOnSelect: true,

            ajax: { 
                url: "myurl",
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    return {
                      q: params.term,
                      page: params.page
                    };
                  },
                processResults: function (data, page) { //json parse
                    console.log("processing results");
                    //Transform your json here, maybe using $.map jquery method
                    return { 
                       results: yourTransformedJson
                    };
                },
                cache: (maybe)true
            }
        });
</script> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T15:49:22.053

我尝试了代码，它运行良好。我认为您没有包含 jquery 框架或检查 js 和 css 的路径。

```
<!DOCTYPE html>
<html>
<head>
    <link href="select2.css" rel="stylesheet"/>
    <script src="//code.jquery.com/jquery-latest.min.js"></script>
    <script src="select2.min.js"></script>
    <script>
        $(document).ready(function() { 
            $('#thisid').select2({
                minimumInputLength: 2,
        ajax: {
            url: "data.php",
            dataType: 'json',
            data: function (term, page) {
                return {
                    q: term
                  };
            },
            results: function (data, page) {
                return {
                    results: data
                };
            }
        }
    });

        });
    </script>
</head>
<body>
    <input type="hidden" id="thisid" style="width:300px" class="input-xlarge" />

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-02T05:25:44.900

我认为没有必要使用隐藏的输入元素。您可以试一试，从 ajax 调用中获取纯 html 数据并设置它，然后初始化 select2 重置方法。这是代码片段

> **HTML**

```
<select id="select" name="select" class="select2">
        <option value="" selected disabled>Please Select Above Field</option>
</select> 
```

> **Javascript**

```
 $.ajax({
        type: "POST",
        cache:false,
        url: YOUR_AJAX_URL,
        success: function(response)
        {
            $('#select').html(response);
        }
    });
    $('#select').select2("val",""); 
```

> **阿贾克斯响应：**

```
<option value="value">Option Name</option>
.
.
.
<option value="value">Option Name</option> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-22T14:04:25.927

经过大量阅读，我决定更改 select2.js 本身。

在第 2109 行将其更改为

```
this.focusser.attr("id", "s2id_"+this.select.context.id); 
```

如果您的输入标签是这样

```
<select id="fichier"> 
```

因此，您在列表中搜索的输入标签的 id 为**s2id_fichier_search**

据我所知，不应该有冲突，这将允许您在同一页面上拥有多个 select2 并通过它们的事件运行您的功能（包括 .get、.post），例如。

```
$(function() { 
  $('#s2id_fichier_search').keyup(function() {
    console.log('Be Practical')
  })
} 
```

所以这会像你使用

```
<select id="fichier" onkeyup="console.log('Be Practical')"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-15T23:08:35.630

在我的情况下，旧版本的 select2 库导致了这个问题，请确保在网页中包含最新版本的 js 和 css。

# jquery - 使用 jQuery 获取所有过滤后的数据表行以进行迭代

> ID：16190096
> 
> 赞同：0
> 
> 时间：2013-04-24T10:52:58.507
> 
> 标签：jquery

我正在为dataTable中的过滤行应用一个css类

```
 tableName.fnFilter( this.value, 0);
$(tableName.fnGetNodes()).addClass('diffColor'); 
```

但我需要迭代数据表中的所有过滤行。这可能吗。我该怎么做。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:59:19.440

```
May be its helpful for you 

var oTable = $("#Mytable").dataTable({whatever discribing your datatable});
//After the declaration of your datatable : 

var rowToAdd = true;
oTable.$('tr').each(function(){
var td_index = 0;
$(this).children('td').each(function){
 if($(this).value == mynewdata[td_index])
    rowToAdd = false;
 td_index++;
}
});
if(rowToAdd)
    oTable.fnAddData([Name,Age,Link,Schema,Visite,Info]); 
```

# ios - 没有 customCell 类的 CustomCell

> ID：16190098
> 
> 赞同：0
> 
> 时间：2013-04-24T10:53:04.003
> 
> 标签：ios, xcode, uitableview, storyboard

这是我的问题。我想创建一个自定义单元格而不创建自定义单元格类。我知道这是可能的。我在情节提要中创建了一个带有标签的原型单元的 tableviewcontroller。在属性中，我设置了单元格名称“mycell”。我使用的代码是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{  static NSString *CellIdentifier = @"mycell";
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) 
   { cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];}
   UILabel *title = (UILabel*) [cell viewWithTag:1];
   title.text = @"Hi";
   return cell;
} 
```

但是当我的应用程序运行时，我只看到一个空表，没有带有我的标签的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:44:35.220

您的 UILabel 标题为零。首先创建一个 UILabel 并将其作为子视图添加到您的单元格中。你可以像下面这样

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {  
     static NSString *CellIdentifier = @"mycell";
     UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil) {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
     }

     UILabel *title = (UILabel*) [cell viewWithTag:1];
     if (title == nil) {
         title = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 300, 15)];
         title.tag = 1;
         [cell.contentView addSubview:title];
     }

     title.text = @"Hi";
     return cell;
} 
```

# java - 使用 Java 或 Groovy 以编程方式修改 Java 源代码

> ID：16190101
> 
> 赞同：1
> 
> 时间：2013-04-24T10:53:06.047
> 
> 标签：java, groovy

为了自动化遗留项目中的某些手动任务，我需要从 java 或 groovy 代码中修改现有的 java 文件。

我不想使用 RegEx，因为在我看来它既不快速也不干净。

我找到了 javassist 和 srcgen4javassist。第一个允许我根据需要修改源代码，但只写入字节码，丢失所有注释和注释。而对于第二个，我没有设法读取不是用 srcgen4javassist 本身创建的现有类。

有没有优雅的解决方案，还是我需要硬着头皮使用正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:57:47.630

您可以真正使用 eclipse 的[ASTParser](http://help.eclipse.org/indigo/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html)之类的东西来解析代码，此时您可以找到替换目标 xpath 样式，但需要做很多工作。

您还可以考虑使用注释标记替换区域并[编写注释处理器以在运行时生成/更改源](http://deors.wordpress.com/2011/10/08/annotation-processors/)，但是（至少在我看来）API 很麻烦。

您可以将正则表达式与源代码中的某些标记结合起来，例如

```
//START REPLACEMENT-TARGET 
...code to be edited/replaced
//END REPLACEMENT TARGET 
```

这将使您的正则表达式定位更安全。

# c - 使用比预期更多的参数调用 C 函数是否安全？

> ID：16190105
> 
> 赞同：9
> 
> 时间：2013-04-24T10:53:12.513
> 
> 标签：c, gtk, gobject

我反复遇到在 GTK+ 代码中设置信号处理程序的问题，不需要几个参数，并试图对多个信号使用与处理程序相同的函数，这些信号的处理程序具有不同的签名 - 但使用前 N 个参数（我关心的人）一样。

当这些函数期望的参数少于它们的参数时，将指向函数的指针传递给 GObject API 是否安全（从某种意义上说，它不是未定义的行为，而不是更实用的“它在我的 PC 上工作吗？”）究竟是从信号发射过程中得到的？

或者，将其与 GTK+ 分开，这段代码可以吗？

```
/* Note: No void *userdata argument! */
void show(int x) {
  printf("x = %d\n", x);
}

void do_stuff(void (*fn)(int, void *), void *userdata) {
  static int total = 0;
  (*fn)(total, userdata);
  total++;
}

void doitnow(void) {
  do_stuff(&show, NULL);
} 
```

为了获得额外的荣誉，请讨论函数签名和调用站点之间不同返回值类型的含义。

**编辑：**一个[几乎相同的问题](https://stackoverflow.com/questions/559581/casting-a-function-pointer-to-another-type)更密切地探讨了“兼容函数类型”，并得出[了一个直接解决我的具体问题的答案](https://stackoverflow.com/a/14044244/117911)——链接 GObject 信号处理程序的问题。**TL;DR：**是的，这是未定义的行为，但在某些工具包中它实际上是惯用的（尽管不是强制性的）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T11:16:56.897

根据 6.5.2.2 第 9 段，这是明确未定义的行为：

> 如果函数定义的类型与表示被调用函数的表达式所指向的（表达式的）类型不兼容，则行为未定义。

`show`定义的类型，

```
void show(int x) 
```

与调用它的指针所指向的表达式的类型不兼容，

```
void (*fn)(int, void *) 
```

同样在 6.3.2.3 第 8 段中明确：

> 指向一种类型的函数的指针可以转换为指向另一种类型的函数的指针，然后再返回；结果应与原始指针比较。**如果转换后的指针用于调用类型与引用类型不兼容的函数，则行为未定义。**

对于函数，“兼容类型”的特征在 6.7.6.3 (15) [C99 中的 6.7.5.3 (15)] 中：

> 对于要兼容的两种函数类型，两者都应指定兼容的返回类型。此外，参数类型列表（如果两者都存在）应在参数数量和省略号终止符的使用方面达成一致；相应的参数应具有兼容的类型。如果一种类型具有参数类型列表，而另一种类型由不属于函数定义的函数声明符指定且包含空标识符列表，则参数列表不应有省略号终止符，并且每个参数的类型应与应用默认参数提升所产生的类型兼容。如果一种类型具有参数类型列表，而另一种类型由包含（可能为空）标识符列表的函数定义指定，则两者应在参数数量上一致，并且每个原型参数的类型应与将默认参数提升应用到相应标识符的类型所产生的类型兼容。（在类型兼容性和复合类型的确定中，每个声明为函数或数组类型的参数都被视为具有调整后的类型，每个声明为限定类型的参数被视为具有其声明类型的非限定版本。）

这里最直接相关的部分是参数的数量必须相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T19:48:08.487

这是 C 标准中未定义的行为，但 C 标准还要求支持具有可变参数的函数，编译器实现后者的唯一方法是允许前者。

这种特殊的惯用形式受到 GLib 支持的每个编译器和平台的支持，并且已经存在多年——甚至在 GLib 创建之前——因此它极不可能被破坏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T11:17:10.840

阅读[http://www.unixwiz.net/techtips/win32-callconv-asm.html](http://www.unixwiz.net/techtips/win32-callconv-asm.html)和[http://www.csee.umbc.edu/~chang/cs313.s02/stack.shtml](http://www.csee.umbc.edu/~chang/cs313.s02/stack.shtml) 似乎你传递的更多，它不应该引起问题，因为首先要推送参数。所以无论什么不需要，都留在调用者堆栈中。但是相反的方式肯定会引起问题。

# solr - 你如何更新 Solr 4 中的数据？

> ID：16190106
> 
> 赞同：1
> 
> 时间：2013-04-24T10:53:19.270
> 
> 标签：solr, solrnet

我们需要更新 Solr 4 的索引，但得到了一些意想不到的结果。我们运行一个使用 SolrNet 执行 AddRange() 的 C# 程序。在此过程中，我们正在添加新文档并尝试更新现有文档。

我们注意到一些记录的字段会使用最新数据进行更新，而其他记录的字段仍会显示旧信息。我们应该使用[文档中](http://wiki.apache.org/solr/UpdateXmlMessages#Optional_attributes_for_.22field.22)指示的信息吗？

文档表明我们可以`update="set|add|inc"`在该字段上设置一个。如果我们希望更新现有记录，我们应该使用`set`? 另外，当我们删除一个字段时，要删除它，我们是否需要关闭 Solr 并重新启动？还是设置`null="true"`？

您能否向我们指出一些有关更新 Solr 数据的好信息？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:15:38.513

您列出的文档参考描述了 Solr 4 中[原子更新](http://wiki.apache.org/solr/Atomic_Updates)的参数，目前 SolrNet 不支持该参数 - 有关更多详细信息，请参阅[问题 199](https://code.google.com/p/solrnet/issues/detail?id=199&colspec=ID%20Type%20Priority%20Milestone%20Summary%20BlockedOn%20Stars)。

在向 SolrNet 添加此支持之前，更新索引中的文档的唯一选择是重新发送整个文档（C# 中的对象），并适当设置所需的更新/删除字段。在内部，Solr 将使用更新的字段将文档重新添加到索引中。

此外，当您在索引中添加/更新文档时，在发出提交之前，这些更改对于针对索引的查询将不可见。我建议使用[AddParameters](https://github.com/mausch/SolrNet/blob/master/SolrNet/AddParameters.cs)`CommitWithin`选项来允许 Solr 在内部处理这个问题，这在[SolrWiki - CommitWithin](http://wiki.apache.org/solr/CommitWithin)中有详细描述。

# sql - 字符集不匹配 oracle 错误

> ID：16190112
> 
> 赞同：2
> 
> 时间：2013-04-24T10:53:32.623
> 
> 标签：sql, oracle

我有一个这样的 SQL 语句：

```
SELECT QUOTE_CREATION.*,
       CASE
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'ARA'
          THEN
             'TE161938'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'HH-'
          THEN
             'TE161302'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'SMT'
          THEN
             'TE161101'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'AYP'
          THEN
             'TE108812'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'DKR'
          THEN
             'TE160895'
          ELSE
             QUOTE_CREATION."Created_By"
       END
          AS CORRECT_USER_ID
  FROM CCO.QUOTE_CREATION QUOTE_CREATION 
```

但是，当我尝试运行查询时，我在 CASE 表达式的“ELSE”部分收到错误“字符集不匹配”。有人可以建议我在哪里做错了吗？

谢谢桑托莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:24:42.123

QUOTE_CREATION."Created_By" 可能是`NVARCHAR2`

尝试这样的事情：

```
SELECT QUOTE_CREATION.*,
       CASE
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'ARA'
          THEN
             N'TE161938'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'HH-'
          THEN
             N'TE161302'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'SMT'
          THEN
             N'TE161101'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'AYP'
          THEN
             N'TE108812'
          WHEN (SUBSTR (QUOTE_CREATION."PO_number", 1, 3)) = 'DKR'
          THEN
             N'TE160895'
          ELSE
             QUOTE_CREATION."Created_By"
       END
          AS CORRECT_USER_ID
  FROM CCO.QUOTE_CREATION QUOTE_CREATION 
```

# python - 使用python编写双精度二进制文件

> ID：16190115
> 
> 赞同：1
> 
> 时间：2013-04-24T10:53:36.483
> 
> 标签：python, double-precision

如何使用 Python 编写双精度文件二进制文件？我目前正在执行以下操作，但它给了我单精度文件：

```
#!/usr/bin/env python

import struct

data =[2.3715231753176,9.342983274982732]

output_file = "test.dat"
out_file = open(output_file,"wb")
s = struct.pack('f'*len(data), *data)
out_file.write(s)
out_file.close() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T10:57:03.070

用于`d`编写双精度浮点数：

```
s = struct.pack('d'*len(data), *data) 
```

`f`只是*单*精度。请参阅模块文档的[格式字符](http://docs.python.org/2/library/struct.html#format-characters)部分：`struct`

> 对于`'f'`和`'d'`转换代码，打包表示使用 IEEE 754 binary32 (for `'f'`) 或 binary64 (for `'d'`) 格式，而不考虑平台使用的浮点格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T10:57:11.563

您错误地使用了格式字符串。要使用双精度，请使用“d”而不是“f”。请参阅[文档](http://docs.python.org/2/library/struct.html#format-characters)以获取格式字符列表。

# php - 如何将发布的值分配给 cakephp 中的变量？

> ID：16190116
> 
> 赞同：0
> 
> 时间：2013-04-24T10:53:37.953
> 
> 标签：php, post, cakephp-2.0

我喜欢将发布的值分配给变量，鉴于我编写了代码，

```
<?php echo $this->Form->create('Register'); ?>
<fieldset>
    <?php echo $this->Form->input('username');
    echo $this->Form->input('password');
    echo $this->Form->input('Confirm password');
?>
</fieldset> 
```

表单->end(__('提交'));

在控制器中，

```
if($this->request->is('post')){
    //print_r($this->data);
    $uname = $this->request->data('username');
    echo "uname".$uname;
    exit;
} 
```

问题是我没有得到 $uname 的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:57:54.737

确保您的调试已启用。使用它 -`pr($this->request->data);`查看该变量中的内容。CakePHP 表单命名数据通常看起来像这样

```
$this->request->data['Formname']['fieldname'] 
```

在你的情况下，它应该是

```
$this->request->data['Register']['username'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T10:59:04.717

请尝试使用此代码

```
$this->params['form']['YOUR_VARIABLE_NAME'] 
```

或者

```
$this->data['FORMNAME']['YOUR_VARIABLE_NAME'] 
```

# python - 删除不同目录中的文件行

> ID：16190117
> 
> 赞同：0
> 
> 时间：2013-04-24T10:53:43.743
> 
> 标签：python

我想删除在同一根目录的不同子目录中存在的第一行和最后第二行文件。代码如下

```
import fileinput
import sys
import os
path = "./rootDire"
for(dirpath,dirnames,files) in os.walk(path):
    f = open(file,'r')
    lines = f.readlines()
    f.close()
    f = open(file,'w')
    f.writelines(lines[1:-2])
    f.close() 
```

但是，当它找到文件时，发生错误，说没有已经找到的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:44:24.517

如果它不起作用，请纠正我：

```
import fileinput
import sys
import os
path = "./rootDire"
for(dirpath,dirnames,files) in os.walk(path):
    for filename in files:
        filepath = os.path.join(dirpath, filename)
        f = open(filepath,'r')
        lines = f.readlines()
        f.close()
        f = open(filepath,'w')
        f.writelines(lines[1:-2])
        f.close() 
```

# html - 一个段落中的两个文本对齐方式

> ID：16190118
> 
> 赞同：-2
> 
> 时间：2013-04-24T10:53:58.343
> 
> 标签：html, css

我必须写一个段落，使它看起来像

```
1st line: align:center
2nd line: align:left
3rd line: align:center
4th line: align:left 
```

它应该是这样的。

我如何使用 CSS 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:58:13.900

您可以尝试使用`nth-child(even)`选择器

```
p:nth-child(even) {
    text-align:center
} 
```

[检查这个小提琴](http://jsfiddle.net/Arkana/sWd7Q/)

编辑：巴特杜德是对的。此解决方案仅在您分隔每个段落时才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T10:58:21.093

您需要有 1 个块元素，其中包含每个不同的文本行。如果您只有带有所有文本的 ap 标签，这是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:00:48.770

使用类属性...

例子：

```
<p class="centerAlign">1st line: align:center</p>
<p class="leftAlign">2nd line: align:left</p>
<p class="centerAlign">3rd line: align:center</p>
<p class="leftAlign">4th line: align:left</p> 
```

您的 css 文件中的规则应如下所示：

```
p.centerAlign {....}
p.leftAlign {....} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T11:02:45.653

`:first-line`不幸的是，除了伪选择器之外，CSS 缺乏选择行的能力。因此，不幸的是，您不会很快看到针对此问题的纯 CSS 解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T11:02:48.770

你可以通过简单地格式化每个

每个新行的标签。

根据需要更改 CSS。

像这样的东西可能会起作用：

利用`<p class="align_____">x line: align:______</p>`

# google-app-engine - blobstore.ParseUpload 在开发服务器和部署中的行为不同

> ID：16190124
> 
> 赞同：3
> 
> 时间：2013-04-24T10:54:17.227
> 
> 标签：google-app-engine, go, blobstore

我正在尝试发送带有文件和访问令牌的多部分/表单，它可以与开发服务器一起正常工作，但是与 AppEngine 部署完全相同的帖子会导致收到不同的令牌字符串（我可以看到它的长度是更长。938 个字符，而它应该是 902）。

我实际上正在执行完全相同的 POST 请求：

```
curl -X POST --form "token=<ACCESS_TOKEN>" --form "file=@myfile.jpg" http://upload_url 
```

上传响应处理程序：

```
c := appengine.NewContext(r)

blobs, values, err := blobstore.ParseUpload(r)

if err != nil {
    http.Error(w, err.Error(), http.StatusInternalServerError)
    return
}

files := blobs["file"]

if len(files) == 0 {
    fmt.Fprintln(w, "No file uploaded")
    return
}

token := values.Get("token") 
```

编辑：我试图简单地创建一个端点来发布令牌并打印它的长度，它返回正确的长度..我做错了什么？

```
func t(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintln(w, "%d", len(r.FormValue("token")))
} 
```

EDIT2：当我打印从 AppEngine 部署收到的令牌时，我得到如下信息：

```
eyJhbGciOiJSUzI1NiIsImtpZCI6ImZjZmQ4NGYxZGZhN2NiODUyMTg4MDFkNDRjNzYwNDFmMzB=
lMzg2OGIifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXVkIjoiMjEwMTAyMTk5NDI=
4LmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwidG9rZW5faGFzaCI6IklQMmduQjFsZGMwTE=
VEdVg5LWlZa2ciLCJhdF9oYXNoIjoiSVAyZ25CMWxkYzBMRUR1WDktaVlrZyIsImlkIjoiMTA5O=
.
. 
```

它有换行符......由于某种原因，开发服务器的行为不像那样并且不会拆分行。

如何获取原始字符串或停止此行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:49:59.417

使用 multiplart.Reader 怎么样？

```
c := appengine.NewContext(r)
if r.Method != "POST" {
    http.Error(w, "invalid request", 400)
    return
}
ct := r.Header.Get("Content-Type")
if strings.SplitN(ct, ";", 2)[0] != "multipart/form-data" {
    http.Error(w, "invalid request", 40400)
    return
}
_, params, err := mime.ParseMediaType(ct)
if err != nil {
    http.Error(w, "invalid request", 400)
    return
}
boundary, ok := params["boundary"]
if !ok {
    http.Error(w, "invalid request", 400)
    return
}
reader := multipart.NewReader(r.Body, boundary)
var data []byte
for {
    part, err := reader.NextPart()
    if part == nil || err != nil {
        break
    }
    if part.FormName() != "file" {
        continue
    }
    v := part.Header.Get("Content-Disposition")
    if v == "" {
        continue
    }
    d, _, err := mime.ParseMediaType(v)
    if err != nil {
        continue
    }
    if d != "form-data" {
        continue
    }
    data, _ = ioutil.ReadAll(part)

    // do something using data
} 
```

# ios - 自定义 UINavigationBar 背景图片看起来比原图更暗

> ID：16190127
> 
> 赞同：0
> 
> 时间：2013-04-24T10:54:26.293
> 
> 标签：ios, uinavigationbar, uiappearance

我正在像这样自定义 UINavigationBar：

```
UIImage * img = [UIImage imageNamed:@"background.png"];
[[UINavigationBar appearance] setBackgroundImage:img forBarMetrics:UIBarMetricsDefault]; 
```

我的原始图像`background.png`如下所示：

![原来的](https://i.stack.imgur.com/qovTX.png)

它有一个平坦的颜色`#4b0367`

生成的 NavigationBar 如下所示：

![结果条](https://i.stack.imgur.com/DkFni.png)

它的颜色`#311253`和原来的不一样！显然 UIKit 改变了颜色。

笔记：

*   设置`tintColor`没有效果。
*   在我的情况下，设置透明背景图像 + 颜色不是合适的解决方案。

有人知道底层机制是如何工作的吗？如何让原始图像正确显示？

# android - 我可以在哪里放置 IF 声明以进行工作？

> ID：16190131
> 
> 赞同：0
> 
> 时间：2013-04-24T10:54:38.357
> 
> 标签：android, if-statement, timer, ksoap2

我有一些定时器操作中的 ksoap Web 服务，如果我做得好的话，它每半小时工作一次。其中一个将整个表行发送到 sql server，它把我变成 0 或 1 取决于正确发送。如果它返回 1，它必须从 sqlite 中删除所有行。尽管它返回 1，但它不会进入 if 语句，也无法使用 delete 命令。我不知道我的计时器和线程是正确的方法，我怎样才能正确地做到这一点？

编码：

```
 try
       { 
           final Timer V_Timer;
           final Handler V_Handler;
           V_Timer = new Timer();
           V_Handler = new Handler(Looper.getMainLooper());  
             V_Timer.scheduleAtFixedRate(new TimerTask()
             {
              public void run()
              {                
                  V_Handler.post(new Runnable()
               {
                public void run()
                {   
                 //for status update//
                     if(isConnected()){                
                    Thread networkThread = new Thread() {
                    @Override
                    public void run() {

                      try {
                          SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME_STATUS); 

                            request.addProperty("MH_ID",hardwareID);
                            request.addProperty("Latitude",V_Latitude);
                            request.addProperty("Longitude",V_Longitude);

                         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                         envelope.dotNet = true;
                         envelope.setOutputSoapObject(request);

                         HttpTransportSE ht = new HttpTransportSE(URL);
                         ht.call(SOAP_ACTION_STATUS, envelope);
                         final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                         final String str_ = response.toString();
                         //final String str = response.toString()+"\n"+ V_Latitude +"\n"+V_Longitude;

                         runOnUiThread (new Runnable(){ 
                     public void run() { 
                         Toast.makeText(MainActivity.this, str_, Toast.LENGTH_LONG).show();
                     }
                         });
                        }
                        catch (Exception e) {
                            e.printStackTrace();
                        }
                       }
                     };
                     networkThread.start();

                     //Insert Bulk//

                     if(isConnected()){                
                            Thread networkThread2 = new Thread() {
                            @Override
                            public void run() {
                                str = "0";

                              try {
                                    StringBuilder bulk = GetTotalRecord();  
                                    bulkinsert = bulk.toString();
                                  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME_BULK); 

                                    request.addProperty("Insert_Bulk",bulkinsert);                                                                      

                                 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                                 envelope.dotNet = true;
                                 envelope.setOutputSoapObject(request);

                                 HttpTransportSE ht = new HttpTransportSE(URL);
                                 ht.call(SOAP_ACTION_BULK, envelope);
                                 final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                                 str = response.toString(); 

                                 runOnUiThread (new Runnable(){ 
                             public void run() { 
                                // Toast.makeText(MainActivity.this, str, Toast.LENGTH_LONG).show();
                                /////delete sqlite table/////

                                 Log.d("str", str);

                                   if (str=="1")
                                 {
                                     try {
                                            dbobject.delete(SQLiteDB.TABLE_NAME_S, null, null);
                                            Toast.makeText(MainActivity.this, "All Answers sent", Toast.LENGTH_LONG).show() ;
                                        } catch (Exception e) {
                                            // TODO Auto-generated catch block
                                            Toast.makeText(MainActivity.this, "Error: Answers could not send \n "+e.toString(), Toast.LENGTH_LONG).show();
                                            e.printStackTrace();
                                        }
                                     finally{
                                        sqlitedb.close();
                                    }   
                                 }

                                 /////delete sqlite table/////

                             }
                                 });
                                }
                                catch (Exception e) {
                                    e.printStackTrace();
                                }
                               }
                             };
                             networkThread2.start();

                     //Insert Bulk end//                                                         

                }
                }
               }});
              }
             },10000, 1000*60*30);           
                    }       
       catch(Exception ex)
       {     

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:48:34.410

```
 if (str=="1") 
```

您不能`String`以这种方式比较对象`Java`。

您应该使用`equalsTo()`或转换`str`为`int`

例如：

```
if (str.equalsTo("1")) {
} 
```

或者

```
int strInt = Integer.parseInt( str )

if (strInt == 1) {
} 
```

# php - 如何使用 SendGrid php 库添加回复和发件人名称标头

> ID：16190132
> 
> 赞同：5
> 
> 时间：2013-04-24T10:54:49.510
> 
> 标签：php, sendgrid

这可能是一个愚蠢的问题，但我看过[这里](http://sendgrid.com/docs/API_Reference/SMTP_API/index.html)、[这里](http://sendgrid.com/docs/Code_Examples/php.html)和[这里](http://sendgrid.com/docs/Code_Examples/SMTP_API_Header_Examples/php.html)，并没有提及这些简单的功能。

我可以为此原因使用 addHeader 方法吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T14:11:10.080

如果没有更多关于您实际发送电子邮件的信息（网络？、smtp？、库？等），很难给你一个简明的答案。也就是说，这三个选项之一应该有效：

**1) 如果您使用 Web API 通过 HTTP 发送**

实际上，您可以在 POST 正文中添加两个额外的参数，`fromname`然后`replyto`将它们与正常`to`的 , `from`,`subject`等一起发送。

此处的文档：http: [//sendgrid.com/docs/API_Reference/Web_API/mail.html](http://sendgrid.com/docs/API_Reference/Web_API/mail.html)

**2) 如果您使用 PHP 库通过 SMTP 发送**

PHP 帮助器库（[在此处找到](https://github.com/sendgrid/sendgrid-php)）有两个帮助器方法，`setReplyTo`可以`setFromName`帮助您。

```
$mail = new SendGrid\Mail();
$mail->addTo('foo@bar.com')->
     setReplyTo('someone.else@example.com')->
     setFromName('John Doe')->
     ... 
```

**3) 如果您使用 SwiftMailer 发送**

SwiftMailer 是一个流行的 PHP SMTP 库。它有自己的从回复到和发件人名称的帮助方法。您可以在文档中找到更多信息（请参阅`setReplyTo`和`setFrom`）

[http://swiftmailer.org/docs/messages.html#the-structure-of-a-message](http://swiftmailer.org/docs/messages.html#the-structure-of-a-message)

# python - 从 dom.xpath 获取 img src

> ID：16190135
> 
> 赞同：2
> 
> 时间：2013-04-24T10:54:56.267
> 
> 标签：python, dom, xpath

我有这段代码，它从网页中读取链接（URL）并将它们打印在屏幕上。

```
connection = urllib.urlopen("http://www.google.com")
dom =  lxml.html.fromstring(connection.read())
for link in dom.xpath('//a/@href'):
    print link 
```

它工作正常。
现在我想做完全相同的事情，但是代替锚标记中的 url，`a`我想获取位于`img`under的 HTML 标记中的图像的 url `src`。我无法理解这是如何 `dom.xpath('//a/@href')`工作的。如果有人可以解释它或只是指导我学习教程，那就太好了。
干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:40:19.087

要开始使用 xpath，请查看 http: [wiki/XPath](http://en.wikipedia.org/wiki/XPath)或有关[USING XPATHS](http://www.jenitennison.com/xslt/xpath.xml)的更多信息。

`//a/@href'`从所有链接（`<a>`标签）中选择 href 属性。

对于所有图像 src 属性，这将是`//img/@src`.

# c++ - 如何翻译 GTK+ 应用程序？

> ID：16190136
> 
> 赞同：6
> 
> 时间：2013-04-24T10:55:03.903
> 
> 标签：c++, c, internationalization, gtk, gettext

我想翻译我用 C++ 编写的 GTK+ 应用程序。我不知道从哪里开始，我听说过 gettext()，但我不知道应该如何使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:53:40.133

查看 1.7 中的[https://developer.gnome.org/gtk3/stable/gtk-question-index.html](https://developer.gnome.org/gtk3/stable/gtk-question-index.html)页面。他们解释了如何使用[GNU gettext](http://www.gnu.org/software/gettext/)翻译应用程序的段落。

# ios - [UIRoundedRectButton setText:]：无法识别的选择器发送到实例？

> ID：16190139
> 
> 赞同：0
> 
> 时间：2013-04-24T10:55:05.240
> 
> 标签：ios, objective-c, uitextfield, uilabel

由于未捕获的异常，我的程序一直终止。键盘工作正常，直到在键盘上输入字符。

我有一个按钮来调出键盘和一个连接到文本字段的插座，我也是文本字段代表。

[删除代码]

预先感谢您的任何帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:01:44.700

这条线`lbl.text=TempTF.text;`在你的情况下不好。您`lbl`可以是任何类型的 UIView，因为您只是从子视图中对其进行类型转换。因此，在您的情况下，其中一个是 UIRoundedRectButton 类型，它没有文本设置器。

你需要放一些`if([lbl isKindOfClass:])`或做检查`if([lbl respondsToSelector:@selector(setText:)])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:08:16.327

```
-(void)changeLabelsMethod:(UITextField*)txtField
{
    NSArray *allLabelViews = self.view.subviews;
    for(id subView in allLabelViews) {

        if([allLabelViews isKindOfClass:[LettersOnTileView class]])
        {
            for (int i = 0; allLabelViews.count>0; i++) {
                LettersOnTileView.tag = i;
            if([[allLabelViews objectAtIndex:i] isKindOfClass:[UILabel Class]]){

            UILabel *lbl=[allLabelViews objectAtIndex:i];
            lbl.text=TempTF.text;
            }

        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:09:34.523

您的代码有问题。

而不是这段代码。

```
for(id subView in allLabelViews) {

        if([allLabelViews isKindOfClass:[LettersOnTileView class]])
        { 
```

你必须试试这个。

```
for(id subView in allLabelViews) {

        if([subView isKindOfClass:[LettersOnTileView class]])//Here you want to check all subview . 
        { 
```

2）我认为你在这一行有按钮对象`UILabel *lbl=[allLabelViews objectAtIndex:i];`。那就是它在下一行登录时崩溃了。

# android - Android facebook 好友在 4.0 或更高版本的 android 操作系统中获取显示 NetworkOnMainThreadException

> ID：16190141
> 
> 赞同：0
> 
> 时间：2013-04-24T10:55:12.623
> 
> 标签：android, facebook, networkonmainthread

我正在尝试在我的 android 应用程序中获取 facebook 朋友我的代码在较低的 android 版本中运行良好，但它在 4.0 及更高版本中显示**NetworkOnMainThreadException 。**

这是我的代码：

```
public static void getFaceBookFriendsIDs() {

        new Thread(new Runnable() {
            @Override
            public void run() {
                try {
                    JSONObject result = new JSONObject(facebook.request("me/friends"));
                    JSONArray friendsArray = result.getJSONArray("data");
                    //friendsList = new ArrayList<String>();
                    for (int i = 0; i < friendsArray.length(); i++) {
                        //friendsList.add(friendsArray.getJSONObject(i).getString("id"));
                        String id=friendsArray.getJSONObject(i).getString("id");
                        String name=friendsArray.getJSONObject(i).getString("name");
                        contactBean=new ContactBean();
                        contactBean.setFbId(id);
                        contactBean.setUserName(name);
                        com.interactiveapp.Constants.fbContactListArrayList.add(contactBean);
                    }
                } 
                catch (MalformedURLException e) {
                    e.printStackTrace();

                } 
                catch (JSONException e) {
                    e.printStackTrace();

                } 
                catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();

        /////////////HANDLE RESPONSE//////////
        Message m = new Message();
        m.obj="";
        m.arg1 =1 ;
        saveHandler.dispatchMessage(m);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:59:55.217

您必须在 >= 4.0 Android os 中添加此行

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

或者您可以使用：[https ://stackoverflow.com/a/16103640/1168654](https://stackoverflow.com/a/16103640/1168654)

# javascript - 如何在easyui-datebox中设置初始值和范围

> ID：16190142
> 
> 赞同：0
> 
> 时间：2013-04-24T10:55:12.883
> 
> 标签：javascript, jquery-ui, jquery-easyui

我有一段`easyui-datebox`时间访问它，提示日期表格`jan 1970` 我怎样才能让他们最初显示当前日期（即）是否有类似的东西`setInitialDate()`我如何设置日期范围`setStartDate()`和`setEndDate()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T07:01:09.403

这是这里报告的一个问题：[JQuery easyui 和 Datejs 日期冲突](https://stackoverflow.com/q/16558852/830945)。当您在 easyui 中使用 Date.js 时，会出现此问题。如果您从 Web 资源中删除 Date.js，打开日期框会在第一次弹出窗口时自动显示当前日期。解决方法是在启动日期字段后使用以下代码。

```
$('#dateDuetxt').datebox({
    value: (new Date().toString('dd-MMM-yyyy')) /* Date.js toString function to convert date into format that is being used by datebox. */
}); 
```

完整的示例代码是：

```
Due Date <input id="dateDuetxt" class="easyui-datebox" style="width:100px"/>  

<script>

$('#dateDuetxt').datebox({
    value: (new Date().toString('dd-MMM-yyyy')), /* Date.js toString function to convert date into format that is being used by datebox. */
    formatter : function(date){
        return date.toString('dd-MMM-yyyy');
    },
    parser : function(s){
        var t = Date.parse(s);
        if (!isNaN(t)){
            return new Date(t);
        } else {
            return null;
        }
    }
});

</script> 
```

但是，如果您从页面中删除 Date.js，则不需要编写脚本，只需创建一个日期框

```
Due Date <input id="dateDuetxt" class="easyui-datebox" style="width:100px"/> 
```

会成功的。

# mysql - 查找 MySQL 数据库中两列组合的重复项

> ID：16190145
> 
> 赞同：14
> 
> 时间：2013-04-24T10:55:20.347
> 
> 标签：mysql, select, count, duplicates, distinct

我处理具有三个不同列的数据集`pile`：`position`和`info`。

数据库中没有重复，但它可能会发生，对于信息列中的一种组合`pile`并且`position`存在一两个不同的文本。这些是我试图找到的条目。

我尝试了以下

```
SELECT COUNT(DISTINCT(`pile`, `position`)) FROM db; 
```

但是收到一条错误消息

```
ERROR 1241 (21000): Operand should contain 1 column(s) 
```

有没有办法在两列中找到不同的值组合？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-24T11:04:26.820

即使没有子选择，这也有效。

```
SELECT
  `pile`,
  `position`,
  COUNT(*) AS c
FROM
  db
GROUP BY
  `pile`,
  `position`
HAVING c > 1; 
```

上面的命令显示了表中多次出现的`pile`和的所有组合。`position``db`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:01:26.370

获取不同重复项的计数（此处优先使用分组）

```
 select count(*)
     from (
   select pile, position
     from db
 group by pile, position
          ) x 
```

查找实际的重复记录

```
 select db.*
     from (
   select pile, position
     from db
 group by pile, position
   having count(*) > 1
          ) x
     join db on db.pile = x.pile and db.position = x.position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:11:47.447

```
SELECT *
FROM db x
WHERE EXISTS (
  SELECT 1 FROM db y
  WHERE y.pile = x.pile
  AND y.position =x.postion
  AND y.other_field <> x.other_field
  ); 
```

现在，`other_field`您可以使用一些唯一的 id 列或字段的任意组合（当然 {pole, postion} 除外）

# ajax - 使用 ajaxSetup beforeSend 进行基本身份验证会破坏 SignalR 连接

> ID：16190148
> 
> 赞同：7
> 
> 时间：2013-04-24T10:55:28.773
> 
> 标签：ajax, asp.net-web-api, authorization, signalr, basic-authentication

我有一个使用基本身份验证保护的 WebApi，它使用 AuthorizationFilterAttribute 应用于整个 Api。我的几个 Api 控制器上也有 SignalR 集线器。

除此之外，我还有一个使用我的 WebApi 的网页。网页大部分是用 Backbone 编写的，所以为了调用我的安全 WebApi，我添加了以下 jquery

```
$.ajaxSetup({
    beforeSend: function (jqXHR, settings) {
        jqXHR.setRequestHeader('Authorization', 'Basic ' + Token);
        return true;
    }
}); 
```

这适用于与我的 Api 控制器进行通信，但添加上述代码已断开与我的 SignalR 集线器的连接，特别是：

```
XMLHttpRequest cannot load http://localhost:50000/signalr/negotiate?_=1366795855194\. 
Request header field Authorization is not allowed by Access-Control-Allow-Headers. 
```

删除该`jqXHR.setRequestHeader()`线路会恢复我的 SignalR Hub 连接，但会中断 Api 调用。

鉴于上述情况，我可以做一些骇人听闻的事情，并且仅在发出的请求不是 /signalr 时才设置请求标头，但这只是感觉很脏......

有没有更清洁的方法来解决这个问题？

我只是在做傻事吗？有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T14:20:37.170

我之前没有提到的是我有一个 DelegatingHandler 它将正确的标头发送回任何进入我的 WebApi 的请求。这适用于对我的 WebApi 的任何请求，但我错误地认为这也适用于 SignalR 请求。

由于 SignalR 依赖于几种不同的传输方法，因此假设我首先可以访问 Authorization 标头似乎是不合理的 - 例如，它们不是所有 WebSockets 实现的要求（[参见此处](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-13#page-21)）

我目前的解决方案是使用 SignalR 的 HubPipeline（[在此处详述](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)）。使用它，我相信我可以在查询字符串中传递基本身份验证凭据并编写一个单独的模块来处理 SignalR 请求的授权：

* * *

**传递查询字符串**

```
$.connection.hub.qs = "auth=" + MyBase64EncodedAuthString; 
```

**过滤器**

```
public class SignalrBasicAuthFilterAttribute: Attribute, IAuthorizeHubConnection {

    public bool AuthorizeHubConnection(HubDescriptor hubDescriptor, IRequest request) {
      var authString = request.QueryString["auth"];

      // ... parse, authorize, etc ...

      return true;
    }

} 
```

**注册过滤器**

```
var globalAuthorizer = new SignalrBasicAuthFilterAttribute();
GlobalHost.HubPipeline.AddModule(new AuthorizeModule(globalAuthorizer, globalAuthorizer)); 
```

**此外...**

请注意，由于使用 SignalR 请求发送 Authorization 标头不是一个可靠的假设，出于上述原因，我仍在过滤我的 $.ajaxSetup 以仅影响*非 SignalR*请求：

```
$.ajaxSetup({
    beforeSend: function (jqXHR, settings) {
        if (settings.url.indexOf("/signalr") == -1)
            jqXHR.setRequestHeader('Authorization', 'Basic ' + Token);
        return true;
    }
}); 
```

在此过程中，我将让 SignalrBasicAuthFilterAttribute 类承担授权 SignalR 请求的全部责任。

* * *

延伸阅读：

*   [http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx](http://weblogs.asp.net/davidfowler/archive/2012/11/11/microsoft-asp-net-signalr.aspx)
*   [http://eworldproblems.mbaynton.com/2012/12/signalr-hub-authorization/](http://eworldproblems.mbaynton.com/2012/12/signalr-hub-authorization/)
*   [控制器内的 SignalR 身份验证？](https://stackoverflow.com/questions/13380777/signalr-authentication-within-a-controller)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:31:58.280

我认为该问题的真正解决方案是确保“授权”是从“协商”请求的 signalR 响应返回的允许标头（访问控制允许标头）的一部分。

您可以像这种可能性一样在 web.config 中注册标头。

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Headers" value="Authorization" />
  </customHeaders>
</httpProtocol> 
```

# c# - 使用 LinearGradientBrush 的 FillPath

> ID：16190150
> 
> 赞同：2
> 
> 时间：2013-04-24T10:55:33.367
> 
> 标签：c#, .net, winforms, graphics, drawing

我从这个主题 GDI+ .NET 中发现了一个类似的问题[：LinearGradientBrush 宽度超过 202 像素导致颜色环绕](https://stackoverflow.com/questions/8015656/gdi-net-lineargradientbrush-wider-than-202-pixels-causes-color-wrap-around) 但该解决方案对我不起作用。我也不能问那个话题。请看一下。这是我的代码：

```
public partial class Form1 : Form {

    int ShadowThick = 10;
    Color ShadowColor = Color.Gray;
    int width;
    int height;

    public Form1() {
        InitializeComponent();
        width = this.Width - 100;
        height = this.Height - 100;
    }

    private void Form1_Paint(object sender, PaintEventArgs e) {
        //e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
        GraphicsPath shadowPath = new GraphicsPath();
        LinearGradientBrush shadowBrush = null;
        // draw vertical shadow
        shadowPath.AddArc(this.width - this.ShadowThick, this.ShadowThick, this.ShadowThick,
            this.ShadowThick, 180, 180);
        shadowPath.AddLine(this.width, this.ShadowThick * 2, this.width,
            this.height - this.ShadowThick);
        shadowPath.AddLine(this.width, this.height - this.ShadowThick,
            this.width - this.ShadowThick, this.height - this.ShadowThick);
        shadowPath.CloseFigure();
        // declare the brush
        shadowBrush = new LinearGradientBrush(PointF.Empty,
            new PointF(this.ShadowThick + 1, 0), this.ShadowColor, Color.Transparent);
        //shadowBrush = new LinearGradientBrush(PointF.Empty,
        //    new PointF(this.ShadowThick + 1, 0), this.ShadowColor, Color.Transparent);

        //e.Graphics.DrawPath(Pens.Black, shadowPath);

        e.Graphics.PixelOffsetMode = PixelOffsetMode.Half;
        e.Graphics.FillPath(shadowBrush, shadowPath);
    }

} 
```

我希望从左到右从暗到亮，但请参阅：

![在此处输入图像描述](https://i.stack.imgur.com/4w7zC.jpg)

我试图画一个阴影，我坚持这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:11:10.053

正如汉斯在下面评论的那样，画笔坐标需要与路径匹配，所以不要这样：

```
shadowBrush = new LinearGradientBrush(PointF.Empty,
    new PointF(this.ShadowThick + 1, 0), this.ShadowColor, Color.Transparent); 
```

它应该是：

```
new LinearGradientBrush(new Point(this.width - this.ShadowThick, 0),
                        new Point(this.width, 0),
                        this.ShadowColor, Color.Transparent); 
```

此外，您应该处理您创建的图形对象。我还将您的画笔更改为仅使用 Point 而不是 PointF，因为您不处理浮点数。

这是您重新编写的代码：

```
 e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
  e.Graphics.PixelOffsetMode = PixelOffsetMode.Half;
  using (GraphicsPath shadowPath = new GraphicsPath()) {
    shadowPath.StartFigure();
    shadowPath.AddArc(this.width - this.ShadowThick, this.ShadowThick, 
        this.ShadowThick, this.ShadowThick, 180, 180);
    shadowPath.AddLine(this.width, this.ShadowThick * 2, this.width,
        this.height - this.ShadowThick);
    shadowPath.AddLine(this.width, this.height - this.ShadowThick,
        this.width - this.ShadowThick, this.height - this.ShadowThick);
    shadowPath.CloseFigure();
    using (var shadowBrush = new LinearGradientBrush(
        new Point(this.width - this.ShadowThick, 0),
        new Point(this.width, 0),
        this.ShadowColor, Color.Transparent)) {
      e.Graphics.FillPath(shadowBrush, shadowPath);
    }
  } 
```

# optimization - Trigger.io：打开时启动画面显示时间过长

> ID：16190152
> 
> 赞同：1
> 
> 时间：2013-04-24T10:55:38.320
> 
> 标签：optimization, splash-screen, trigger.io

在我们的应用程序中，它只有 js 文件、一个 index.html 文件和一个用于我们初始加载的 ajax 请求，以及一些用于我们应用程序的图像。

但启动画面隐藏需要 7 秒。

有什么方法可以优化应用程序的加载时间吗？或者我们可以手动降低启动画面的加载时间吗？

谢谢！

问候， Junnel

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:29:58.423

使用[`forge.launchimage.hide`API](http://docs.trigger.io/en/v1.4/modules/launchimage.html#hide)，您可以在需要时清除启动图像 - 当您的应用“准备就绪”可以向用户显示时。

我们在窗口加载事件或 5 秒后自动隐藏 launchimage 图像，以先到者为准。

# c# - C# XPathSelectElements 返回 null？

> ID：16190153
> 
> 赞同：0
> 
> 时间：2013-04-24T10:55:39.660
> 
> 标签：c#, xml

我有一个 XML 文档：

```
<xsd:form-definition xmlns:xsd="http://...m.xsd"
                     xmlns:ds="http://www.w3.org/2000/09/xmldsig#"
                     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:schemaLocation="....xsd" ...>
    <xsd:page>
        <xsd:formant source-name="label" id="guid1" />
        <xsd:formant source-name="label  id="guid2" />
        <xsd:formant source-name="label" id="guid3">
            <xsd:value>2013-04-24</xsd:value>
        </xsd:formant>
   </xsd:page>
</xsd:form-definition> 
```

通过 C# 代码，我想遍历特定元素并获取`id`属性和`value`（如果存在） - 让我们说`labels`。

为此，我尝试了代码

```
 XDocument xml = (document load);

    XmlNamespaceManager ns = new XmlNamespaceManager(new NameTable());
    ns.AddNamespace("f", "http://m.xsd");

    foreach (XElement e in xml.XPathSelectElements("//f:formant[@source-name = 'label']", ns))
    {
     ....
    } 
```

但`foreach`循环不返回任何元素。为什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:12:25.927

这个对我有用。检查您的命名空间是否`f`完全`xsd`匹配。在您的示例中，它们不匹配。此外，您的示例中还有一些其他语法错误，例如`source-name`第二个的值`formant`不以双引号结尾。

```
XDocument xml = XDocument.Parse(
@"<xsd:form-definition xmlns:xsd=""http://m.xsd""
                     xmlns:ds=""http://www.w3.org/2000/09/xmldsig#""
                     xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">
    <xsd:page>
        <xsd:formant source-name=""label"" id=""guid1"" />
        <xsd:formant source-name=""label2"" id=""guid2"" />
        <xsd:formant source-name=""label"" id=""guid3"">
            <xsd:value>2013-04-24</xsd:value>
        </xsd:formant>
   </xsd:page>
</xsd:form-definition>");

XmlNamespaceManager ns = new XmlNamespaceManager(new NameTable());
ns.AddNamespace("f", "http://m.xsd");

foreach (XElement e in xml.XPathSelectElements(
    "//f:formant[@source-name = 'label']", ns))
{
    Console.WriteLine(e);
}
Console.ReadLine(); 
```

# android - 同步适配器，在 devtools 中不可见--->sync tester

> ID：16190154
> 
> 赞同：0
> 
> 时间：2013-04-24T10:55:41.917
> 
> 标签：android

我创建了一个同步适配器，它查询脏联系人，我希望它能够同步我现有的交换服务器帐户。

我认为我的问题在于 syncadapter.xml

```
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
android:contentAuthority="com.android.contacts"
android:accountType="com.android.exchange"
android:supportsUploading="true"
android:userVisible="true" /> 
```

我不想像在 google 的示例同步适配器中那样创建新帐户，我希望我的适配器将联系人与现有的公司帐户同步。

# jetty - Jetty：将会话数据存储在 couchbase 服务器中

> ID：16190164
> 
> 赞同：2
> 
> 时间：2013-04-24T10:56:08.350
> 
> 标签：jetty, couchbase

简短的介绍

我正在寻找可以存储数据沙发库集群的 Jetty 服务器的会话管理器。我想利用 couchbase 服务器的优势，即如果一台服务器出现故障，应用程序不会受到影响。

详细描述

目前我正在通过以下方式使用 couchbase 集群作为 Jetty Server 的会话存储

1.  安装了这个库[https://github.com/yyuu/jetty-nosql-memcached](https://github.com/yyuu/jetty-nosql-memcached)
2.  在 Couchbase 上有一个没有密码的默认存储桶。它侦听 1111 端口并与 memcached 协议通信。
3.  在码头配置上面的库。因此，这个 Jetty 会话存储将 memcached 协议与 couchbase 集群的节点之一进行通信。

此设置运行良好，但几乎没有限制。

1.  我不能使用非默认存储桶来存储会话。
2.  我不能有存储桶密码。
3.  如果集群的一台服务器（我在 jetty.xml 中配置）出现故障，会话将停止工作。

我更关心第 3 点。那么是否有任何会话管理器可以满足这些要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:10:34.303

如果您将 Couchbase 与 Couchbase Bucket 一起使用，您将拥有会话的自动分区和复制，因此当一个节点出现故障时，集群将故障转移该节点，您的应用程序将继续透明地工作。

您在 1 和 2 中描述的问题与 Couchbase 无关，而是与“jetty-nosql-memcached”项目的实施有关。也许您可以为这个项目做出贡献并添加端口更改和 SASL 支持。

# solr - Solr - 带有自定义标记器的 WordDelimiterFactory 仅在边界上拆分

> ID：16190167
> 
> 赞同：0
> 
> 时间：2013-04-24T10:56:12.283
> 
> 标签：solr

我已经为自定义标记器配置了 WordDelimiterFilterFactory`&`并且`-`工作正常。

对于少数分词器（如`.` `_` `:`），我们只需要在边界上进行拆分。如果在单词之间，不要分裂。

例如

```
test.com (should tokenized to test.com)
newyear. coming (should tokenized to newyear and coming)
new_car (should tokenized to new_car)
..
.. 
```

我检查了可以在`Solr.WordDelimiterFilterFactory`are `LOWER`, `UPPER`, `ALPHA`, `DIGIT`, `ALPHANUM`,中使用的类型`SUBWORD_DELIM`。没有可用于每种类型的描述。顾名思义，我认为 SUBWORD_DELIM 类型可以满足我的需求，但它似乎不起作用。

以下是文本字段的定义

```
<fieldType name="text_general_preserved" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
         <tokenizer class="solr.WhitespaceTokenizerFactory"/>
         <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="false" />
         <filter class="solr.WordDelimiterFilterFactory"
                splitOnCaseChange ="0"
                splitOnNumerics ="0"
                stemEnglishPossessive ="0"
                generateWordParts="1"
                generateNumberParts="1"
                catenateWords="0"
                catenateNumbers="0"
                catenateAll="0"
                preserveOriginal="0"
                protected="protwords_general.txt"
                types="wdfftypes_general.txt"
                />

        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="false" />
        <filter class="solr.WordDelimiterFilterFactory"
                splitOnCaseChange ="0"
                splitOnNumerics ="0"
                stemEnglishPossessive ="0"
                generateWordParts="1"
                generateNumberParts="1"
                catenateWords="0"
                catenateNumbers="0"
                catenateAll="0"
                preserveOriginal="0"
                protected="protwords_general.txt"
                types="wdfftypes_general.txt"
                />
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType> 
```

以下是 wdfftypes_general.txt 内容

```
& => ALPHA
- => ALPHA
_ => SUBWORD_DELIM
: => SUBWORD_DELIM
. => SUBWORD_DELIM 
```

任何人都可以建议我如何设置配置`Solr.WordDelimiterFilterFactory`以满足我的要求。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:24:31.103

根据 WordDelimiterFilterFactory 的文档，[wdfftypes.txt](http://lucene.apache.org/core/4_2_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/WordDelimiterFilter.html)文件中的 SUBOWRD_DELIM 设置仅影响基于 splitOnCaseChange 和 splitOnNumerics 设置的行为。因此，我将`:` `_` `.`在 wdfftypes.txt 文件中添加为 ALPHA 条目，并在您的 fieldType 中的 WordDelimiterFilterFactory 之后添加一个新[的](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternReplaceFilterFactory)PatternReplaceCharFilterFactory 以从任何标记中删除那些前导或尾随字符。

# abap - 如何增加 UI 中选择选项的长度

> ID：16190168
> 
> 赞同：3
> 
> 时间：2013-04-24T10:56:14.783
> 
> 标签：abap, sap-selection-screens

据我了解，abap 中的选择选项仅从 UI 中获取 45 个字符。

无论我指定选择选项的类型，它都不会超过 45 个字符。

```
SELECT-OPTIONS: s_key  FOR somlreci1-receiver NO INTERVALS VISIBLE LENGTH 100\. 
```

somlreci1-receiver 是 char(1215)。但是我不能在该选择选项中写入超过 45 个。

有什么办法可以增加这个长度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:09:20.243

这个官方链接

[http://help.sap.com/abapdocu_70/en/ABAPSELECT-OPTIONS.htm](http://help.sap.com/abapdocu_70/en/ABAPSELECT-OPTIONS.htm)

表示无法传递大于 45 个字符的输入，抱歉：|

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:17:53.270

在@vlad-ardelean 发布的文档末尾，它提到：

> 如果在使用 SUBMIT 调用可执行程序时提供了数据类型的选择标准
> 
> ...
> 
> 如果选择标准是用添加的 NO-DISPLAY 声明的，那么第一行也不会执行转换例程或截断。

您可以在主程序中将选择选项声明为 NO-DISPLAY，然后从第二个程序中调用它

```
SUBMIT programname WITH so_field EQ lv_longdata SIGN 'I'. 
```

...或类似于将 long 值传递给主程序。然而，这是一种非常复杂的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-21T04:49:25.993

除了@vlad-ardelean 的回答：有趣的是，在最近的版本中，最大字段长度提高到 255 个字符（参见[http://help.sap.com/abapdocu_731/en/ABAPSELECT-OPTIONS.htm](http://help.sap.com/abapdocu_731/en/ABAPSELECT-OPTIONS.htm)）。

# c++ - 在向量中存储不同维度的数组

> ID：16190172
> 
> 赞同：1
> 
> 时间：2013-04-24T10:56:27.800
> 
> 标签：c++, arrays, vector

我想像这样将两个浮点数组存储在一个向量中

```
float b_pt[16] = {-65.,-55.,-45.,-40.,-35.,-30.,-25.,-20.,20.,25.,30.,35.,40.,45.,55.,65.};
  float b_eta[25] =
  {-4.5,-4.25,-4.,-3.75,-3.5,-3.25,-3.,-2.75,-2.5,-2.25,-2.,-1.,0.,1.,2.,2.25,2.5,2.75,3.,3.25,3.5,3.75,4.,4.25,4.5};

vector<float[]> bins;
bins.push_back(b_pt);
bins.push_back(b_eta); 
```

但是得到以下错误：

```
g++ -g -Wall -W -Wconversion -Wshadow -Wcast-qual -Wwrite-strings -pthread -m64 -I/opt/local/root-v5-34-00/include -L/opt/local/root-v5-34-00/lib -lGui -lCore -lCint -lRIO -lNet -lHist -lGraf -lGraf3d -lGpad -lTree -lRint -lPostscript -lMatrix -lPhysics -lMathCore -lThread -lpthread -Wl,-rpath,/opt/local/root-v5-34-00/lib -lm -ldl -MMD -MP  -c -o test.o test.cpp
test.cpp: In function ‘int main()’:
test.cpp:31: error: no matching function for call to ‘std::vector<float [], std::allocator<float []> >::push_back(float [16])’
/usr/include/c++/4.2.1/bits/stl_vector.h:600: note: candidates are: void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = float [], _Alloc = std::allocator<float []>]
test.cpp:32: error: no matching function for call to ‘std::vector<float [], std::allocator<float []> >::push_back(float [25])’
/usr/include/c++/4.2.1/bits/stl_vector.h:600: note: candidates are: void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = float [], _Alloc = std::allocator<float []>]
/usr/include/c++/4.2.1/bits/stl_vector.h: In destructor ‘std::_Vector_base<_Tp, _Alloc>::~_Vector_base() [with _Tp = float [], _Alloc = std::allocator<float []>]’:
/usr/include/c++/4.2.1/bits/stl_vector.h:202:   instantiated from ‘std::vector<_Tp, _Alloc>::vector(const _Alloc&) [with _Tp = float [], _Alloc = std::allocator<float []>]’
test.cpp:30:   instantiated from here
/usr/include/c++/4.2.1/bits/stl_vector.h:123: error: invalid use of array with unspecified bounds
/usr/include/c++/4.2.1/bits/stl_construct.h: In function ‘void std::__destroy_aux(_ForwardIterator, _ForwardIterator, std::__false_type) [with _ForwardIterator = float (*)[]]’:
/usr/include/c++/4.2.1/bits/stl_construct.h:155:   instantiated from ‘void std::_Destroy(_ForwardIterator, _ForwardIterator) [with _ForwardIterator = float (*)[]]’
/usr/include/c++/4.2.1/bits/stl_construct.h:182:   instantiated from ‘void std::_Destroy(_ForwardIterator, _ForwardIterator, std::allocator<_T2>) [with _ForwardIterator = float (*)[], _Tp = float []]’
/usr/include/c++/4.2.1/bits/stl_vector.h:271:   instantiated from ‘std::vector<_Tp, _Alloc>::~vector() [with _Tp = float [], _Alloc = std::allocator<float []>]’
test.cpp:30:   instantiated from here
/usr/include/c++/4.2.1/bits/stl_construct.h:121: error: cannot increment a pointer to incomplete type ‘float []’ 
```

请告知如何做到这一点！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T10:58:10.223

两个不同维度的数组有不同的***类型***。因此它们不能存储在同一个向量中。您可以改为将它们设为向量并存储为

```
vector<float> b_pt = {-65.,-55.,-45.,-40.,-35.,-30.,-25.,-20.,20.,25.,30.,35.,40.,45.,55.,65.};
vector<float> b_eta = {-4.5,-4.25,-4.,-3.75,-3.5,-3.25,-3.,-2.75,-2.5,-2.25,-2.,-1.,0.,1.,2.,2.25,2.5,2.75,3.,3.25,3.5,3.75,4.,4.25,4.5};
vector<vector<float>> bins;
bins.push_back(b_pt);   
bins.push_back(b_eta); 
```

或使用动态分配和存储指针来浮动数组并存储为

```
float* b_pt = new float[16] {-65.,-55.,-45.,-40.,-35.,-30.,-25.,-20.,20.,25.,30.,35.,40.,45.,55.,65.};
vector<float*> bins;
bins.push_back(b_pt);

// later for each i
delete [] bins[i]; 
```

我将使用第一个选项，因为这样您就不必担心内存泄漏。

* * *

如果您没有 C++1 支持，您可以通过这种方式初始化向量。

```
float b_pt_data[16] = {-65.,-55.,-45.,-40.,-35.,-30.,-25.,-20.,20.,25.,30.,35.,40.,45.,55.,65.};
vector<float> b_pt(b_pt_data, b_pt_data + 16 );
vector<vector<float> > bins;
bins.push_back(b_pt); 
```

# ruby-on-rails - 没有路线匹配 {:action=>"edit", :controller=>"comments", :article_id=>nil, :id=>nil} 用于在 rails blog 上编辑 ruby 中文章的评论

> ID：16190178
> 
> 赞同：3
> 
> 时间：2013-04-24T10:56:42.960
> 
> 标签：ruby-on-rails, ruby, routes

在我决定为评论添加编辑功能之前，我的应用程序运行良好。在此之前，我可以查看特定文章，但现在不能。现在，`No route matches {:action=>"edit", :controller=>"comments", :article_id=>nil, :id=>nil}`当我尝试访问有一些评论的特定文章（文章/节目）时，我遇到了路由错误。实际上，我正在尝试为文章实现评论编辑功能。为此，我在comments/_comment.html.erb 中放置了评论的“编辑”链接。值得注意的是，只有当文章有评论并且文章没有评论时，我才会收到此错误。我对文章和评论有不同的看法。

评论控制器.rb

```
 class CommentsController < ApplicationController
         before_filter :user_signed_in, except: [:create]
        def new
          @comment = Comment.new
        end

        def create
          @article = Article.find(params[:article_id])
          @comment = @article.comments.build(params[:comment])
          @comment.user_id = current_user.id
          @comment.save
            flash[:success] = "Comment created!"
            redirect_to article_path(@comment.article)
        end

        def edit
        @comment = Comment.find(params[:id])
        end

        def update
         @comment = Comment.find(params[:id])
         @article = @comment.article
         respond_to do |format|
          if @comment.update_attributes(params[:comment])
            redirect_to @article_path(@article)
          else
           render :action => "edit" 
          end
        end

        def destroy
         @comment = Comment.find(params[:id])
        @article = Article.find(params[:article_id])
        @comment.destroy
           redirect_to @article_path(@artilce) 
        end

    end 
```

评论/edit.html.erb

```
 <h3>Editing comment</h3>
    <%= render :partial => 'comment_form' %> 
```

评论/_comment_form.html.erb

```
 <%= form_for ([@article, @article.comments.build]), :required => true do |f| %>
    <%= f.hidden_field :article_id %> 
    <%= f.text_area :content, :style => "width:727px; height:100px; border: 1px solid #999999;margin-top:80px; background-color:#FFFFFF;margin-left:-33px" %>
        <div class="actions">
        <%= f.submit "Add Comment", :style => "margin-right:20px; margin-left:560px; background-color:#66C9Ef; color:#FFFFFF; border: 0px solid #82b548; border-radius: 3px 3px 3px 3px; font-size: 1.3rem;" %>
      </div>
    <% end %> 
```

comments/comment.html.erb（这里我给出了编辑文章评论的链接）

```
 <% if @article.comments.count  >= 1 %>
      <div style="border: px solid #66c9ee;border-radius: 0px 0px 0px 0px;margin: 10px -30px 15px; padding:     10px 15px 25px; background: none repeat scroll 0 0 #F2F2F2; width:700px; font-size: 1.2em;border-bottom: 0px solid #DDDDDD;">
          <%= comment.content %>
             <div id="tabula"> 
                <ul id="tabula">
                 <li> <div style="color: #0077CC;margin-rigth:200px; font-size: 1.0em;margin-top:4px;background-color:#;"> <%= comment.user.username if comment.user %></div></li>
                 <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <p> <%= time_ago_in_words(comment.created_at.in_time_zone("Asia/Calcutta"))  unless comment.created_at.nil? %>  </p></div></li>
                 <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <%= link_to "edit", edit_article_comment_path(@article,comment) %> </div></li>
                </ul>
               </div>
              </div>
        <% else %>
            <div style="color:#0077CC;margin-left:25px;font-size:1.4em;"> be first to comment</div>
      <% end %> 
```

耙路线结果。（不完整）

```
 articles GET    /articles(.:format)                               articles#index
                     POST   /articles(.:format)                               articles#create
         new_article GET    /articles/new(.:format)                           articles#new
        edit_article GET    /articles/:id/edit(.:format)                      articles#edit
             article GET    /articles/:id(.:format)                           articles#show
                     PUT    /articles/:id(.:format)                           articles#update
                     DELETE /articles/:id(.:format)                           articles#destroy
     dashboard_index GET    /dashboard(.:format)                              dashboard#index
                     POST   /dashboard(.:format)                              dashboard#create
       new_dashboard GET    /dashboard/new(.:format)                          dashboard#new
      edit_dashboard GET    /dashboard/:id/edit(.:format)                     dashboard#edit
           dashboard GET    /dashboard/:id(.:format)                          dashboard#show
                     PUT    /dashboard/:id(.:format)                          dashboard#update
                     DELETE /dashboard/:id(.:format)                          dashboard#destroy

                   tags GET    /tags(.:format)                                   tags#index
                         POST   /tags(.:format)                                   tags#create
                 new_tag GET    /tags/new(.:format)                               tags#new
                edit_tag GET    /tags/:id/edit(.:format)                          tags#edit
                     tag GET    /tags/:id(.:format)                               tags#show
                         PUT    /tags/:id(.:format)                               tags#update
                         DELETE /tags/:id(.:format)                               tags#destroy
        article_comments GET    /articles/:article_id/comments(.:format)          comments#index
                         POST   /articles/:article_id/comments(.:format)          comments#create
     new_article_comment GET    /articles/:article_id/comments/new(.:format)      comments#new
    edit_article_comment GET    /articles/:article_id/comments/:id/edit(.:format) comments#edit
         article_comment GET    /articles/:article_id/comments/:id(.:format)      comments#show
                         PUT    /articles/:article_id/comments/:id(.:format)      comments#update
                         DELETE /articles/:article_id/comments/:id(.:format)      comments#destroy
                         GET    /articles(.:format)                               articles#index
                         POST   /articles(.:format)                               articles#create
                         GET    /articles/new(.:format)                           articles#new
                         GET    /articles/:id/edit(.:format)                      articles#edit
                         GET    /articles/:id(.:format)                           articles#show
                         PUT    /articles/:id(.:format)                           articles#update
                         DELETE /articles/:id(.:format)                           articles#destroy 
```

路线.rb

```
 Mau::Application.routes.draw do
      devise_for :users
      root :to => 'articles#index'
      resources :articles
      resources :dashboard
      resources :tags
      resources :articles do
      resources :comments
    end
    end 
```

comments_comment.html.erb

```
<% if @article.comments.count  >= 1 %>
  <div style="border: px solid #66c9ee;border-radius: 0px 0px 0px 0px;margin: 10px -30px 15px; padding:     10px 15px 25px; background: none repeat scroll 0 0 #F2F2F2; width:700px; font-size: 1.2em;border-bottom: 0px solid #DDDDDD;">
      <%= comment.content %>
         <div id="tabula"> 
            <ul id="tabula">
             <li> <div style="color: #0077CC;margin-rigth:200px; font-size: 1.0em;margin-top:4px;background-color:#;"> <%= comment.user.username if comment.user %></div></li>
             <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <p> <%= time_ago_in_words(comment.created_at.in_time_zone("Asia/Calcutta"))  unless comment.created_at.nil? %>  </p></div></li>
             <li> <div style="color: #0077CC; background-color:; margin-top:4px; margin-left:25px;"> <%= link_to "edit", edit_article_comment_path(@article ,@comment) %> </div></li>
            </ul>
           </div>
          </div>
    <% else %>
        <div style="color:#0077CC;margin-left:25px;font-size:1.4em;"> be first to comment</div>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:09:55.313

```
<% if @article.comments.count  >= 1 %>
  <div "...">
    <%= comment.content %> # <-- This. 
```

我怀疑在*comments_comment.html.erb*和*comments/comment.html.erb*`<%= comment.content %>`中发现的其他`comment`变量。

 **对我来说似乎是合理的，因为如果有问题的文章没有评论，您不会收到错误，因为`@article.comments.count >= 1`返回`false`。

要拥有一个工作`comment`变量，请在 if 语句后插入一个循环：

```
<% if @article.comments.count  >= 1 %>
  <div "...">
    <% @article.comments.each do |comment| %> # <-- This.
      <%= comment.content %>
      ...
    <% end %> # Remember to close the loop.
  </div>
<% else %>
... 
```

另外，请注意在*comment/_comment.html.erb*`comment`中使用而不是`@comment`in 。`edit_article_comment_path`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:13:44.280

如果方法 #count 返回 1 或更大，您只会显示注释。当你调用count方法时，它直接在数据库中计数，对于没有评论的文章，​​它不会渲染任何内容，这是因为你可以看到没有评论的文章。

但是，当评论存在时，您正在构建一个新评论以显示在表单中，并尝试为其创建一个编辑链接。

所以我的解决方案是，更改您的 form_for，因为您不需要再次重新发送所有评论，将新评论作为参数传递，而不是在评论集合上构建一个。然后在另一个视图上，您​​可以为每个保留的评论创建一个编辑链接。***

# c# - 多列上不区分大小写的组

> ID：16190180
> 
> 赞同：17
> 
> 时间：2013-04-24T10:56:46.973
> 
> 标签：c#, linq, linq-to-sql

无论如何做一个 LINQ2SQL 查询做类似这样的事情：

```
var result = source.GroupBy(a => new { a.Column1, a.Column2 }); 
```

或者

```
var result = from s in source
             group s by new { s.Column1, s.Column2 } into c
             select new { Column1 = c.Key.Column1, Column2 = c.Key.Column2 }; 
```

但忽略分组列内容的大小写？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-24T11:31:37.400

您可以传递`StringComparer.InvariantCultureIgnoreCase`给`GroupBy`扩展方法。

```
var result = source.GroupBy(a => new { a.Column1, a.Column2 }, 
                StringComparer.InvariantCultureIgnoreCase); 
```

或者您可以按照[Hamlet Hakobyan](https://stackoverflow.com/users/685467/hamlet-hakobyan)的评论`ToUpperInvariant`建议在每个字段上使用。我推荐or而不是or因为它针对程序比较目的进行了优化。`ToUpperInvariant``ToUpper``ToLower``ToLowerInvariant`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-05T22:19:23.587

我无法让 NaveenBhat 的解决方案正常工作，出现编译错误：

> 无法从用法中推断方法“System.Linq.Enumerable.GroupBy(System.Collections.Generic.IEnumerable, System.Func, System.Collections.Generic.IEqualityComparer)”的类型参数。尝试明确指定类型参数。

为了使它工作，我发现定义一个新类来存储我的键列 (GroupKey) 是最简单和最清晰的，然后是一个实现 IEqualityComparer (KeyComparer) 的单独类。然后我可以打电话

```
var result= source.GroupBy(r => new GroupKey(r), new KeyComparer()); 
```

KeyComparer 类确实将字符串与 InvariantCultureIgnoreCase 比较器进行比较，因此感谢 NaveenBhat 为我指明了正确的方向。

我的课程的简化版本：

```
private class GroupKey
{
    public string Column1{ get; set; }
    public string Column2{ get; set; }

    public GroupKey(SourceObject r) {
        this.Column1 = r.Column1;
        this.Column2 = r.Column2;
    }
}

private class KeyComparer: IEqualityComparer<GroupKey>
{

    bool IEqualityComparer<GroupKey>.Equals(GroupKey x, GroupKey y)
    {
        if (!x.Column1.Equals(y.Column1,StringComparer.InvariantCultureIgnoreCase) return false;
        if (!x.Column2.Equals(y.Column2,StringComparer.InvariantCultureIgnoreCase) return false;
        return true;
        //my actual code is more complex than this, more columns to compare
        //and handles null strings, but you get the idea.
    }

    int IEqualityComparer<GroupKey>.GetHashCode(GroupKey obj)
    {
        return 0.GetHashCode() ; // forces calling Equals
        //Note, it would be more efficient to do something like
        //string hcode = Column1.ToLower() + Column2.ToLower();
        //return hcode.GetHashCode();
        //but my object is more complex than this simplified example

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T10:09:30.943

我有相同的问题按表中的 DataRow 对象的值分组，但我只是在 DataRow 对象上使用 .ToString() 来解决编译器问题，例如

```
MyTable.AsEnumerable().GroupBy(
    dataRow => dataRow["Value"].ToString(),
    StringComparer.InvariantCultureIgnoreCase) 
```

代替

```
MyTable.AsEnumerable().GroupBy(
    dataRow => dataRow["Value"],
    StringComparer.InvariantCultureIgnoreCase) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-18T15:22:07.507

我已经扩展了 Bill B 的答案，使事情变得更加动态，以避免“硬编码” `GroupKey`and中的列属性`IQualityComparer<>`。

```
private class GroupKey
    {
        public List<string> Columns { get; } = new List<string>();

        public GroupKey(params string[] columns)
        {
            foreach (var column in columns)
            {
                // Using 'ToUpperInvariant()' if user calls Distinct() after 
                // the grouping, matching strings with a different case will 
                // be dropped and not duplicated
                Columns.Add(column.ToUpperInvariant());
            }
        }

    }

    private class KeyComparer : IEqualityComparer<GroupKey>
    {

        bool IEqualityComparer<GroupKey>.Equals(GroupKey x, GroupKey y)
        {
            for (var i = 0; i < x.Columns.Count; i++)
            {
                if (!x.Columns[i].Equals(y.Columns[i], StringComparison.OrdinalIgnoreCase)) return false;
            }

            return true;
        }

        int IEqualityComparer<GroupKey>.GetHashCode(GroupKey obj)
        {
            var hashcode = obj.Columns[0].GetHashCode();

            for (var i = 1; i < obj.Columns.Count; i++)
            {
                var column = obj.Columns[i];
                // *397 is normally generated by ReSharper to create more unique values
                // So I added it here, it's technically not required
                hashcode = (hashcode * 397) ^ (column != null ? column.GetHashCode() : 0);
            }

            return hashcode;
        }
    } 
```

**用法：**

```
var result = source.GroupBy(r => new GroupKey(r.Column1, r.Column2, r.Column3), new KeyComparer()); 
```

这样，您可以将任意数量的列传递给`GroupKey`构造函数。

# html - 加速网页

> ID：16190185
> 
> 赞同：0
> 
> 时间：2013-04-24T10:57:05.250
> 
> 标签：html, css, web-development-server

我测试了我的网站加载速度，结果给出了我网站低速加载的答案是......

> 带有“？”的资源 URL 中的某些代理缓存服务器未缓存。删除查询字符串并将参数编码到以下资源的 URL 中：

[http://mydomain1.com/css/layout.css?v2.2](http://mydomain1.com/css/layout.css?v2.2)

在这里我怎样才能删除“？” 从上面的链接并将参数编码到url.??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:59:36.143

该消息意味着您应该这样做：

`http://mydomain1.com/css/layout.css/v2.2`

使用 a`/`而不是`?`. 您如何在服务器端解析它取决于您使用的技术。

# linux - 在 Linux 上编译 libktx

> ID：16190190
> 
> 赞同：0
> 
> 时间：2013-04-24T10:57:28.853
> 
> 标签：linux, opengl, makefile

OpenGL sdk 建议使用 libktx 在 OpenGL 上加载纹理，但是默认的 makefile 给了我错误

```
make: *** lib: No such file or directory.  Stop. 
```

并将文件移动到项目的基本目录给了我

```
make[1]: Entering directory `/home/tim/Documents/ktx/lib'
make[1]: *** No targets specified and no makefile found.  Stop. 
```

是否有在 linux 上编译 libktx 的白痴指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T03:44:56.957

缺少的“lib”目录是 build/GNUmake/lib。build/GNUmake/lib/GNUmakefile 无意中从项目的 zip 和 tar 档案中遗漏了。我为此道歉。我没有注意到，因为我总是在 SVN 工作区工作。

好消息是 libktx v2.0 刚刚发布。的 zip 和 tar 存档包含曾经丢失的文件。您可以在以下网页找到下载档案的链接和 SVN 存储库的链接。

[http://www.khronos.org/opengles/sdk/tools/KTX/](http://www.khronos.org/opengles/sdk/tools/KTX/)

在 linux 上编译：

cd 构建/GNUmake 制作

在 2.0 版中，这将为 OpenGL ES 1、2 和 3 以及 OpenGL 构建库版本。

在执行此操作之前，您需要将宏 glincdir 更改为系统上 GLES1、GLES2、GLES3 和 GL 包含目录的父目录。如果在所有 Linux 发行版上都有这些包含文件的标准位置，请随意修改 GNUmakefile 并将其发回给我。

如果您只想为 GL 或 GL ES 版本之一构建

cd build/GNUmake/lib make es1 [或 es2 或 es3 或 gl]

我只在cygwin上测试过。希望它能在 GNU/Linux 上按预期构建。

# javascript - 返回或发送变量到 onchange 事件

> ID：16190191
> 
> 赞同：0
> 
> 时间：2013-04-24T10:57:34.917
> 
> 标签：javascript, jquery

我试图从两个单独的事件中实现相同的函数功能。所以我创建的函数是：

```
function adding_stuff() {
    var names = [];
    var dates = [];
    for(var i = 0; i < this.files.length; i++) {
        //adding stuff to names and dates
    }
    $(".primary .panel-content").append("<ul class='list-unstyled'></ul>");
    for(var i in names) {
        var li = "<li>";
        $(".primary .panel-content ul").append(li.concat(names[i]))
    }
} 
```

有两个按钮`primary`和`secondary`。我希望这两个功能具有相同的功能，但输出不同`<div>`。当前选择`<div>`的是`".primary"`，但是我希望这取决于已单击的按钮。

该功能使用以下方式触发：

```
$("#primary").onchange = adding_stuff;
$("#secondary").onchange = adding_stuff; 
```

**注意：** `primary`和`secondary`是类型的输入`file`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:08:30.260

您可以在注册回调时添加其他数据，这些数据将在事件处理程序中可用：

```
$('#primary').on('change', { target: '.primary' }, adding_stuff);
$('#secondary').on('change', { target: '.secondary' }, adding_stuff); 
```

然后在处理程序中：

```
function adding_stuff(ev) {
    var cls = ev.data.target;  // extract the passed data
    ...
    // file handling code omitted

    $(".panel-content", cls).append(...)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:04:16.900

使用 jquery 的`change()`事件

```
function adding_stuff(obj,objClass) {
var names = [];
var dates = [];
for(var i = 0; i < obj.files.length; i++) {
  //adding stuff to names and dates
}
$("."+ objClass+" .panel-content").append("<ul class='list-unstyled'></ul>");
for(var i in names) {
    var li = "<li>";
    $("."+ objClass+" .panel-content ul").append(li.concat(names[i]))
}
}

$("#primary").change(function(){
   adding_stuff(this,'primary');
});
$("#secondary").change(function(){
    adding_stuff(this,'secondary');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:07:51.130

您可以`$(this).attr("class")`在函数内部使用。它将返回触发事件的按钮类。

```
function adding_stuff() {
var div = $(this).attr("class");
var names = [];
var dates = [];
for(var i = 0; i < this.files.length; i++) {
    //adding stuff to names and dates to $div
}
$(div + " .panel-content").append("<ul class='list-unstyled'></ul>");
for(var i in names) {
    var li = "<li>";
    $(div + " .panel-content ul").append(li.concat(names[i]));
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:08:00.163

尝试

```
function adding_stuff(opselector) {
    return function() {
        var names = [];
        var dates = [];
        for (var i = 0; i < this.files.length; i++) {
            // adding stuff to names and dates
        }
        var ul = $("<ul class='list-unstyled'></ul>").appendTo(opselector)
        for (var i in names) {
            ul.append("<li>" + li.concat(names[i]) + "</li>")
        }
    }
}

$("#primary").change(adding_stuff('.primary .panel-content'));
$("#secondary").change(adding_stuff('.secondary .panel-content')); 
```

# android - 如何将原始类型（字符串）的集合存储到数据库中

> ID：16190195
> 
> 赞同：1
> 
> 时间：2013-04-24T10:57:52.130
> 
> 标签：android, android-sqlite, ormlite, primitive-types, foreign-collection

我正在尝试使用 ORMLite 将我的类映射到 SQLite 数据库，但我无法存储 String 的集合我有这个错误：

```
java.lang.IllegalArgumentException: No fields have a DatabaseField annotation in
     class java.lang.String 
```

这个错误是不言自明的，但是我应该如何存储字符串集合，我应该扩展 String 类并添加所需的注释来做到这一点？在字段的注释中，我添加了 datatype.serializable 但这也行不通。这是我遇到问题的班级：

```
@DatabaseTable(tableName = "parameters")

public class Parameters {

    // id is generated by the database and set on the object automagically
    @DatabaseField(generatedId = true)
    int id_parameters;

    @DatabaseField(canBeNull = true)
    @JsonProperty("id")
    private Integer id;

    @DatabaseField(canBeNull = false)
    @JsonProperty("account_id")
    private Integer account_id;

    @ForeignCollectionField
    @JsonProperty("languages")
    private Collection<String> languages;
    ...
} 
```

有问题的领域是语言！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T18:34:29.207

是的，你不能只做一个字符串的集合。您将需要创建一个包装类，其中包含一个`String`字段以及一个外部`Parameters`字段：

```
public class Language {
    @DatabaseField(generatedId = true)
    int id;
    @DatabaseField
    String language;
    @DatabaseField(foreign = true)
    Parameters parameters;
} 
```

以下是来自 FM[的外国收藏品的描述。](http://ormlite.com/docs/foreign-collections)去引用：

> 请记住，当您有一个 ForeignCollection 字段时，集合中的类（在此示例中为 Order）必须具有用于具有该集合的类（在此示例中为 Account）的外部字段。如果 Account 有一个国外的 Orders 集合，那么 Order 必须有一个 Account foreign 字段。它是必需的，以便 ORMLite 可以找到与特定帐户匹配的订单。

# php - 在 PHP 中的 image_15 之后上传将不起作用

> ID：16190197
> 
> 赞同：0
> 
> 时间：2013-04-24T10:57:55.287
> 
> 标签：php, mysql, loops, for-loop, uploading

我有点难过，因为我有一段运行循环的代码：

```
for($i=1; $i<=30; $i++) {
    if(!empty($_FILES['image_'.$i]['name'])) {
        copy($_FILES['image_'.$i]['tmp_name'], WEB_UPLOAD."/images/products/".$_FILES['image_'.$i]['name']) or die("Error uploading image.");
        $ext = strtolower(substr($_FILES['image_'.$i]['name'], strrpos($_FILES['image_'.$i]['name'], ".")));
        $image = "".text_to_url_image($name)."_product_".$i."_".$id."_large".$ext;
        $image_medium = "".text_to_url_image($name)."_product_".$i."_".$id."_medium".$ext;
        $image_small = "".text_to_url_image($name)."_product_".$i."_".$id."_small".$ext;

        rename(WEB_UPLOAD."/images/products/".$_FILES['image_'.$i]['name'], WEB_UPLOAD."/images/products/".$image); 

        $scale = '74x74';
        $go = WEB_UPLOAD.'/images/products/'.$image;
        $stop = WEB_UPLOAD.'/images/products/'.$image_small;
        exec("/usr/bin/convert $go -resize $scale\> -quality 100 $stop");
        unset($scale, $go, $stop);

        $scale = '158x158';
        $go = WEB_UPLOAD.'/images/products/'.$image;
        $stop = WEB_UPLOAD.'/images/products/'.$image_medium;
        exec("/usr/bin/convert $go -resize $scale\> -quality 100 $stop");
        unset($scale, $go, $stop);

        $scale = '620x500';
        $go = WEB_UPLOAD.'/images/products/'.$image;
        $stop = WEB_UPLOAD.'/images/products/'.$image;
        exec("/usr/bin/convert $go -resize $scale\> -quality 100 $stop");
        unset($scale, $go, $stop);

        chmod(WEB_UPLOAD."/images/products/".$image_small, 0777);
        chmod(WEB_UPLOAD."/images/products/".$image_medium, 0777);
        chmod(WEB_UPLOAD."/images/products/".$image, 0777);
        mysql_query("UPDATE `products` SET image_".$i."='".$image."' WHERE id='".$id."'");
    }
} 
```

这适用于 image_1 到 image_15，但是当我尝试为 image_16 或更高版本上传图像时，它不会上传图像或将其输入到 SQL 中？表格如下所示：

```
for($i=1; $i<=30; $i++) {
    echo "<tr><td valign=\"top\">Gallery Image [".($i)."]:</td><td valign=\"top\">";
        echo "<input type=\"file\" name=\"image_".$i."\">";
        if(!empty($r['image_'.$i])) {
            echo "<br /><img src=\"".WEB_URL."/images/products/".$r['image_'.$i]."\" height=\"150\" />";
            echo "<a href=\"./?action=edit_products&id=".$id."&delete_image=image_".$i."\"><img src=\"images/delete.gif\"></a>";
        }
    echo "</td></tr>";
} 
```

有任何想法吗？

谢谢，皮特

# regex - 正则表达式包含

> ID：16190203
> 
> 赞同：0
> 
> 时间：2013-04-24T10:58:20.293
> 
> 标签：regex

我需要一个正则表达式来匹配可以是小写字母或数字但必须至少包含一个小写字母的字符串。

因此，对于示例输入：

```
a123 b123 123c C123 aaa AAA 1234 B123 1234 
```

匹配将是`a123`,`b123`和.`123c``aaa`

我在想这样的表达`(\d*|[a-z]+)+`，但不完全是。这将包括`1234`我不想要的也是非法的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T05:39:06.817

我假设英文字母和 0-9 位数字：

```
[a-z0-9]*[a-z][a-z0-9]* 
```

如你看到的：

*   该字符串只能包含小写英文字母字符 ( `a-z`) 或`0-9`数字。
*   字符串必须有小写英文字母`[a-z]`。由于`*`（*0 或更多*量词），其余部分是可选的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:04:15.853

怎么样：

```
^(?=.*[a-z])[a-z\d]+$ 
```

**解释：**

```
The regular expression:

(?-imsx:^(?=.*[a-z])[a-z\d]+$)

matches as follows:

NODE                     EXPLANATION
----------------------------------------------------------------------
(?-imsx:                 group, but do not capture (case-sensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (?=                      look ahead to see if there is:
----------------------------------------------------------------------
    .*                       any character except \n (0 or more times
                             (matching the most amount possible))
----------------------------------------------------------------------
    [a-z]                    any character of: 'a' to 'z'
----------------------------------------------------------------------
  )                        end of look-ahead
----------------------------------------------------------------------
  [a-z\d]+                 any character of: 'a' to 'z', digits (0-9)
                           (1 or more times (matching the most amount
                           possible))
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T05:41:44.233

尝试这样的事情：

```
/([a-z\d]*[a-z][a-z\d]*)/ 
```

至少需要一个小写字母，然后在其前后允许 0 个或多个小写字母和数字。

# jquery - 设置新数据 I have an issue with using <object>. I need it to show different external pages, but it's not really working for me. It is like, after the first time I set Data, changing it does nothing. Do I need to ref 问问题 问问题 2013-04-24T10:58:32.353 92 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an issue with using <object>. I need it to show different external pages, but it's not really working for me. It is like, after the first time I set Data, changing it does nothing. Do I need to refresh it, somehow? This is my jQuery code to change the data: $("#content").attr('data', urls[urlIdx]); And my object: <div id="Main" style="width:100%;height:100%;"> <object id="content" style="width:100%;height:100%;"/> </div> Simple stuff. urls is an array of urls, and urlIdx is a counter that I increment. Edit: I have made this jsfiddle: http://jsfiddle.net/fJQm6/ Basically, the first time the tick executes, the object's data is set, but the subsequent ticks changes nothing. First off, object is for embedded things like video etc. see here What you might want to use instead is a iframe here <iframe id="test" src="http://www.w3schools.com"></iframe> You could then use jquery to set attr. $('#test').attr('src','http://www.google.co.uk'); Update Object can be used for webpages but iframe is preferred. fiddle updated with iframe. jqueryhtmlobject 4 2 回答 2 This answer is useful 0 Possible duplicate of Changing data content on an Object Tag in HTML var divEl = document.getElementById('Main'); var objEl = document.getElementById('content'); objEl.data = newUrl; //you can use aray logic here // Refresh the content divEl.innerHTML = divEl.innerHTML; using Jquery $("#content").attr('data', urls[urlIdx]); var $mainDiv=$("#Main"); $mainDiv.html($mainDiv.html()); Here is updated live jsfiddle http://jsfiddle.net/fJQm6/3/ 于 2013-04-24T11:26:58.150 回答 This answer is useful 0 首先，object用于视频等嵌入式内容，请参见此处 您可能想要使用的是iframe 这里 <iframe id="test" src="http://www.w3schools.com"></iframe> 然后，您可以使用 jquery 来设置 attr。 $('#test').attr('src','http://www.google.co.uk'); 更新 Object可用于网页，但iframe首选。 fiddle用 iframe 更新。 于 2013-04-24T11:04:45.363 回答 Related 4 css - CSS 中 '★' 的内容显示为 'â～...' 1 gerrit - 推送长提交消息 gerrit 2 google-app-engine - 在 Google App Engine 上定义 url 规则 1 ios - MonoTouch CopyCurrentNetworkInfo 不正确 1 android - mysql 肥皂调用不适用于 android 设备 3 c# - 如何将按钮中的文本设置为粗体，具体取决于它是否在 datagridview 中有信息 10 ruby-on-rails - 将表示逻辑放在控制器中是 Ruby 的一个好习惯吗？ 2 iphone - Gamer Center排行榜不显示分数，每个用户只能访问自己的分数 0 sql-server - SQL Server 2008 报错建议 1 python - AppEngine 数据存储区预留 ID 范围 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16190208
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, html, object

I have an issue with using `<object>`. I need it to show different external pages, but it's not really working for me. It is like, after the first time I set Data, changing it does nothing. Do I need to refresh it, somehow?

This is my jQuery code to change the data:

```
$("#content").attr('data', urls[urlIdx]); 
```

And my object:

```
<div id="Main" style="width:100%;height:100%;">
    <object id="content" style="width:100%;height:100%;"/>
</div> 
```

Simple stuff.

`urls` is an array of urls, and `urlIdx` is a counter that I increment.

Edit: I have made this jsfiddle: [http://jsfiddle.net/fJQm6/](http://jsfiddle.net/fJQm6/)

Basically, the first time the tick executes, the object's data is set, but the subsequent ticks changes nothing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:26:58.150

Possible duplicate of [Changing data content on an Object Tag in HTML](https://stackoverflow.com/questions/676705/changing-data-content-on-an-object-tag-in-html)

```
var divEl = document.getElementById('Main');
var objEl = document.getElementById('content');
objEl.data = newUrl; //you can use aray logic here
// Refresh the content
divEl.innerHTML = divEl.innerHTML; 
```

using Jquery

```
$("#content").attr('data', urls[urlIdx]);
var $mainDiv=$("#Main");
$mainDiv.html($mainDiv.html()); 
```

Here is updated live jsfiddle [http://jsfiddle.net/fJQm6/3/](http://jsfiddle.net/fJQm6/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:04:45.363

首先，`object`用于视频等嵌入式内容，请参见[此处](http://www.w3schools.com/tags/tag_object.asp)

您可能想要使用的是`iframe` [这里](http://www.w3schools.com/tags/tag_iframe.asp)

```
<iframe id="test" src="http://www.w3schools.com"></iframe> 
```

然后，您可以使用 jquery 来设置 attr。

```
$('#test').attr('src','http://www.google.co.uk'); 
```

**更新**

`Object`可用于网页，但`iframe`首选。

[fiddle](http://jsfiddle.net/fJQm6/2/)用 iframe 更新。

# delphi - 在Delphi中将self作为参数传递

> ID：16190210
> 
> 赞同：2
> 
> 时间：2013-04-24T10:58:38.260
> 
> 标签：delphi, pascal

我想将“self”作为参数传递给另一个类的方法（在不同的单元中）。然而，第一类的类型在第二类中是未知的，因为我不能将第一类放入第二类的使用部分。所以我将参数类型定义为指针，但是当我尝试从第一个类调用方法时，Delphi 7 解析器告诉我需要 classtyp。

那么我应该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:22:18.173

通过在实现部分中使类已知，您可以转换给定的引用。

```
unit UnitY;

interface
uses Classes;
type
    TTest=Class
       Constructor Create(AUnKnowOne:TObject);
    End;

implementation
uses UnitX;
{ TTest }

constructor TTest.Create(AUnKnowOne: TObject);
begin
    if AUnKnowOne is TClassFromUnitX then
      begin
         TClassFromUnitX(AUnKnowOne).DoSomeThing;
      end
    else
      begin
         // .... 
      end;
end;

end. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:45:08.557

我喜欢这类问题的接口方法。除非您的单元非常紧密耦合，在这种情况下它们可能应该共享一个单元，否则接口是交换类相关部分的整洁方式，而无需完全了解每种类型。

考虑 ：

```
unit UnitI;
interface
type
  IDoSomething = Interface(IInterface)
    function GetIsFoo : Boolean;
    property isFoo : Boolean read GetIsFoo;
  end;
implementation
end. 
```

和

```
unit UnitA;
interface
uses UnitI;
type
  TClassA = class(TInterfacedObject, IDoSomething)
     private
       Ffoo : boolean;
       function GetIsFoo() : boolean;
     public
       property isFoo : boolean read GetIsFoo;
       procedure DoBar;
       constructor Create;
  end;
implementation
uses UnitB;

constructor TClassA.Create;
begin
  Ffoo := true;
end;

function TClassA.GetIsFoo() : boolean;
begin
  result := Ffoo;
end;

procedure TClassA.DoBar;
var SomeClassB : TClassB;
begin
  SomeClassB := TClassB.Create;
  SomeClassB.DoIfFoo(self);
end;

end. 
```

并注意`TClassB`不需要知道任何关于`TClassA`或包含它的单元 - 它只是接受任何遵守`IDoSomething`接口契约的对象。

```
unit UnitB;
interface
uses UnitI;
type
  TClassB = class(TObject)
    private
      Ffoobar : integer;
    public
      procedure DoIfFoo(bar : IDoSomething);
      constructor Create;
  end;

implementation

constructor TClassB.Create;
begin
  Ffoobar := 3;
end;

procedure TClassB.DoIfFoo(bar : IDoSomething);
begin
  if bar.isFoo then Ffoobar := 777;
end;

end. 
```

# android - 在两个日期之间重复闹钟

> ID：16190212
> 
> 赞同：0
> 
> 时间：2013-04-24T10:58:51.073
> 
> 标签：android, alarmmanager, repeat

我已经搜索了如何实现此类问题的示例，但找不到任何可以解决我的问题的方法，因此我向您寻求解决方法的建议。

我必须实现一个在两个指定日期之间的特定时间每天触发的警报。

到目前为止，我每天都会在特定时间重复发出警报，但直到何时重复才指定......

任何建议和想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:11:29.693

假设您要设置`repeating` `Alarm`from`Date1`到`Date2`。
对于`Date1`，因为它正在工作，所以对您来说没有问题。
设置一个`alarm`for`Date2`并在触发该警报时取消`Date1`重复警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:24:22.007

我这样做：

假设您想设置一个重复警报，它首先在一天中两个小时之间的“随机”时间触发（例如 0100 - 0500），然后总是每 24 小时在一天中的同一时间再次触发。

```
private long getTimeOfNextWidgetAutoUpdateInMilliseconds(Calendar now, int startHour, int endHour){
    // calc the time diff in milliseconds from now until a 'random' time between startHour and endHour
    // ensure to +1 day if the time has already passed
}

private void createAutoRefreshAlarm(Context context, long initialTriggerTimeInMillis,
            long intervalInMillis) {
        AlarmManager alarmManager = getAlarmManager(context);
        PendingIntent widgetRefreshPi = getWidgetRefreshAlarmPendingIntent(context);
        setRepeatingAlarm(initialTriggerTimeInMillis, intervalInMillis, widgetRefreshPi,
                alarmManager);

        ApplicationData.setAppDataBoolean(WIDGET_REFRESH_ALARM_SERVICE_INITITATED, true);
    }

    private static void setRepeatingAlarm(long initialTriggerTimeInMillis, long intervalInMillis,
            PendingIntent widgetRefreshPi, AlarmManager alarmManager) {
        alarmManager.setRepeating(
                AlarmManager.RTC_WAKEUP,
                initialTriggerTimeInMillis,
                intervalInMillis,
                widgetRefreshPi);
    }

private PendingIntent getWidgetRefreshAlarmPendingIntent(Context context) {
        Intent alarmIntent = new Intent(context, AlarmManagerBroadcastReceiver.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        return pendingIntent;
    }

 private static AlarmManager getAlarmManager(Context context) {
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
        return alarmManager;
    } 
```

然后我会在 WidgetProvider 类中有以下内容：

```
@Override
    public void onEnabled(Context context) {
        super.onEnabled(context);

        int startHour = 1;
        int endHour = 5;
        long initialTriggerTimeInMillis = getTimeOfNextWidgetAutoUpdateInMilliseconds(
                Calendar.getInstance(),
                startHour,
                endHour);

        long intervalInMillis = 86400000; // 24 hours
        createAutoRefreshAlarm(context, initialTriggerTimeInMillis, intervalInMillis);
    } 
```

这应该让你继续，我已经从我自己的项目中剪切+粘贴，所以可能会有一些错误。

另外，请记住在`onDisabled()`您的 `WidgetProvider.

还有其他情况可以删除您应该考虑的警报，例如 ON BOOT

# magento - Magmi 激活所有类别级别的产品

> ID：16190213
> 
> 赞同：0
> 
> 时间：2013-04-24T10:58:56.387
> 
> 标签：magento, magmi

我正在使用 Magmi On the fly 类别创建器/导入器插件来导入产品并将类别创建到 Magento 1.7.0.2 安装中。这很好用，但有些事情是我没想到的。

所有产品都被分配到所有创建的类别级别。[即使我尝试从wiki](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=On_the_fly_category_creator/importer#Basic_example)截取的 samlpe CSV

```
sku;name;attribute_set;store;categories
"100";"Product 1";"Default";"en";"My Products/Sample Products/Sample Category"
"101";"Product 2";"Default";"en";"My Products/Other Products" 
```

当我尝试上述 CSV 时，具有 SKU 100 的产品在猫“我的产品”和“样品产品”和“样品类别”中处于活动状态。带有 101 的产品在猫“我的产品”和“其他产品”中处于活动状态。

这是默认行为还是仅在类别级别的最后一个命名类别中激活产品的技巧？

我的配置是：

*   Magento V. 1.7.0.2
*   Magmi V. 0.7.18
*   插件：
*   *   CSV Datasource (1.3) by Dweeves On the fly
*   *   Dweeves 图像属性的类别创建者/导入者 (0.2.3)
*   *   Dweeves 的处理器 (1.0.25) Dweeves 的动态索引器 (0.1.5)
*   *   Dweeves 的标准属性导入 (1.0.5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:57:08.120

这是“类别创建者/导入者”插件的默认行为。但是您可以将其更改为仅在最后一个类别级别中激活产品。

这可以通过 Web 界面完成：

* * *

转到/magmi/web/magmi.php

点击创建者/导入者的“配置”按钮

选择“Assing product to”旁边的“last category of each branch”；

* * *

或者，如果您出于某种原因想直接编辑配置文件。

* * *

浏览到 conf 目录并确保包含此行：

CAT:lastonly = "1"

在“CategoryImporter.conf”文件中

# r - 具有大量点的 dist 函数

> ID：16190214
> 
> 赞同：5
> 
> 时间：2013-04-24T10:58:57.593
> 
> 标签：r

我正在使用该`dist {stats}`函数来计算点之间的距离，我的问题是我有 24469 个点，并且 dist 函数的输出给了我一个长度为 18705786 的向量，而不是矩阵。我已经尝试过 export `as.matrix`，但文件是 2 大。

我如何才能访问每个距离对应的点？

例如`which(distance<=700)`给我向量中的位置，但我怎样才能得到这个距离对应的点的信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:10:02.663

您可以尝试一些事情，也取决于您的确切需要：

*   计算循环中的距离，并仅保留与标准匹配的距离。尤其是当匹配的数量远小于距离矩阵的总大小时，这样可以节省大量的 RAM 使用量。如果这个循环在纯 R 中实现，它可能非常慢，这也是为什么`dist`不使用 R 但我相信 C 来执行计算。这可能意味着您获得了结果，但必须等待一段时间。或者，优秀的`Rcpp`包可以让你用 C/C++ 写下来，可能会快得多。
*   开始使用像`bigmemory`存储距离矩阵这样的包。然后你在一个循环中构建它并将它迭代地存储在 bigmemory 对象中（我之前没有使用过 bigmemory，所以我不知道确切的细节）。然后在构建矩阵之后，您可以访问它以提取您想要的结果。实际上，在 R 中处理大数据的所有技巧都适用于这个项目符号。参见例如[R SO 关于大数据的帖子](https://stackoverflow.com/questions/tagged/r+bigdata)。

一些有趣的链接（发现谷歌搜索`r distance matrix for large vector`）：

*   [用于重复距离矩阵计算和超大距离矩阵分块的高效（内存）函数](https://stackoverflow.com/questions/13456639/efficient-memory-wise-function-for-repeated-distance-matrix-calculations-and-c)
*   （你很幸运！）[http://stevemosher.wordpress.com/2012/04/08/using-bigmemory-for-a-distance-matrix/](http://stevemosher.wordpress.com/2012/04/08/using-bigmemory-for-a-distance-matrix/)

# javascript - 防止 javascript 正则表达式替换功能进行更多替换

> ID：16190215
> 
> 赞同：0
> 
> 时间：2013-04-24T10:58:58.393
> 
> 标签：javascript, regex, replace, break

据我所知，我发现一个有趣的问题在这里没有得到解答。我有一个正则表达式对象，用于在字符串中进行替换。问题是如果我想停止进一步的替换，因为我找到了一个特定的字符串，我不能这样做。“break”语句显然不起作用，因为这既不是循环也不是 switch-case。

如果我使用“return”，替换将继续。我可以在函数的头部使用“不完整”变量（见下面的例子）来防止进一步的替换，但检查会继续进行，它将被评估与正则表达式匹配的次数一样多，这不是必需的。

有没有办法完全停止这个函数的替换？

谢谢。

例子：

```
var regex = new RegExp("whatever", "g");
str = str.replace(regex, function(tot, group1) {
    if (group1 == "i_wanna_stop_str") {
        incomplete = true;
        break; <-- not working
    } else {
        ... compute replacement ...
        return replacement;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:32:19.970

找到原始标志后替换：

```
var regex = new RegExp("whatever", "g");
str = str.replace(regex, function(tot, group1) {
    if (group1 == "i_wanna_stop_str") {
        incomplete = true;
        break; <-- not working
    } else {
        if (incomplete) {
            replacement = <captured original>;
        } 
        else {
            ... compute replacement ...
        }
        return replacement;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:41:25.237

在找到要替换的正则表达式时循环替换并且在停止字符串之前找到它

在代码中：

```
var str = " blah blah whatever blah blah whatever i_wanna_stop_str blah blah whatever";
var stopStr = "i_wanna_stop_str";
var searchStr = "whatever";
while (str.indexOf(searchStr) != -1 && str.indexOf(searchStr) < str.indexOf(stopStr)) {
    str = str.replace(/whatever/, "some");
} 
```

# php - 如果选择菜单返回选择，则将值设置回 £0.00

> ID：16190216
> 
> 赞同：0
> 
> 时间：2013-04-24T10:58:59.090
> 
> 标签：php, javascript

我有一个用于选择价格选项的下拉菜单。默认选项是 select，然后一旦选择了一个选项，我会更新 Total Price 值以反映选项价格。这样就可以了，但是如果您再次选择“选择”，我的总价值中会出现“未定义”...

这是代码

标记

```
<form class="optionsForm" name="form{$option.optionID}" action="/view-cart.html" enctype="multipart/form-data" method="post" >

            <input type="hidden" value="{$option.optionPrice}" name="productPrice" id="optionPrice" />
            <input type="hidden" value="{$product.productID}" name="instanceID" />
            <input type="hidden" value="add" name="action"/>
            <input type="hidden" value="products" name="componentID"/>
            <input type="hidden" value="{$option.optionID}" name="options[optionID]" id="optionID"/>
            <input type="hidden" value="add" name="action"/>

            {* If there is only one option, don't show the select option row *}

            {if count($product.productOptions) > 1}

            <h4 class="optionsFormTitle">Please select your options</h4>

            <div class="optionsRow">

                <select name="options" class="dropDown">

                    <option value="0.00">Select</option>

                    {foreach $product.productOptions option}
                        <option value="{$option.optionID}">{$option.optionTitle}
                        {if $option.optionPrice > $product.pricesFrom} &pound;{$option.optionPrice}{/if}
                        </option>
                    {/foreach}           

                </select>

            </div>

            {/if}        

        <div {if count($product.productOptions) > 1} class="totalRow" {else} class="noOptionTotalRow" {/if} >        
            Total<span class="productPrice optionPrice"> &pound;0.00</span>

            <input type="submit" value="Add To Basket" class="buyNowButton" />
        </div>

    </form> 
```

Javascript...

```
 products.prices = new Array;

    $.get('/ajax/' + window.location.pathname, function(data) {

        for (var optionID in data)
            products.prices[optionID] = data[optionID];

        $('.optionsRow select').change(function() {
            var requested = $(this).val();
            $('.optionPrice').html('£' + products.prices[requested]);
            $('#optionPrice').val(products.prices[requested]);
            $('#optionID').val(requested);
        });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:06:07.823

也许您应该先将默认价格添加到`products.prices`数组中？

```
products.prices = new Array;
products.prices["0.00"] = "0.00"; 
```

# .net - 'FmtClr' 没有重载匹配委托 'System.EventHandler'

> ID：16190219
> 
> 赞同：0
> 
> 时间：2013-04-24T10:59:09.063
> 
> 标签：.net

下面的代码抛出错误，因为“FmtClr”没有重载与委托“System.EventHandler”匹配

即使传递了处理程序参数

是我添加 scipt 的位置的问题。

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup=    
CodeBehind="Default.aspx.cs" Inherits="TestCertification._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script runat="server">     
   public void FmtClr(object sender, ListViewItemEventArgs e)
   {
       Label LineTotal = (Label)
       e.Item.FindControl("LineTotalLabel");
       if (LineTotal.Text.Length > 7)
       { LineTotal.ForeColor = System.Drawing.Color.Red; }
       else
       { LineTotal.ForeColor = System.Drawing.Color.Black; }
   }
   </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">   
<asp:SqlDataSource ID="SqlDataSource1" runat="server" OnDataBinding="FmtClr"
ConnectionString="<%$ ConnectionStrings:FXVanilla50ConnectionString %>" 
SelectCommand="SELECT top 2 [AddressId], [City], [State], [PostalCode], [Country] FROM       [Addresses]">    
</asp:SqlDataSource>

<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1">
   <ItemTemplate>
   <td>
   <asp:Label ID="LineTotalLabel" runat="server" Text='<%# Eval("City") %>' />
</td>
</ItemTemplate>
</asp:ListView> 
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:46:08.070

根据[MSDN](http://msdn.microsoft.com/en-IN/library/system.web.ui.webcontrols.sqldatasource.aspx)， SqlDataSource 的 DataBinding 事件处理程序签名是`object`，`EventArgs`但您指定`ListViewItemEventArgs`了。将您的签名更改为：

```
 public void FmtClr(object sender, EventArgs e)
   {
      //....
   } 
```

# c++ - lz4 压缩 c++ 示例

> ID：16190231
> 
> 赞同：6
> 
> 时间：2013-04-24T10:59:37.487
> 
> 标签：c++, compression

在将[lz4](http://code.google.com/p/lz4/) csv 写入压缩二进制文件转换器（大容量外汇报价数据 csv）的过程中，希望减少对我的微型 vps 的存储/磁盘带宽要求。自包含代码来说明

```
#include <string>
#include <fstream>
#include <iostream>
#include "lz4.h"

using namespace std;

int main()
{
char szString[] = "2013-01-07 00:00:04,0.98644,0.98676 2013-01-07 00:01:19,0.98654,0.98676 2013-01-07 00:01:38,0.98644,0.98696";
const char* pchSource = szString;
int nInputSize = sizeof(szString);

cout <<"- pchSource -" << endl << pchSource << endl;
cout <<"nbytes = "<< nInputSize << endl << endl;
ofstream source("pchSource.txt");
source << pchSource;

int nbytesPassed = 0;
int nMaxCompressedSize = LZ4_compressBound(nInputSize);

char *pszDest = new char[nMaxCompressedSize];
nbytesPassed = LZ4_compress(pchSource, pszDest, nInputSize);
cout <<"- pszDest Compressed-" << endl;
cout <<"nbytesPassed = "<< nbytesPassed << endl;
cout << pszDest << endl << endl;
// pszDest garbage ?

char *pszDestUnCompressed = new char[nInputSize];
LZ4_uncompress(pszDest, pszDestUnCompressed, nInputSize);
cout <<"- pszDestUnCompressed -" << endl;
cout <<"nbytesPassed = "<< nbytesPassed << endl;
cout << pszDestUnCompressed << endl << endl;
//pszDestUnCompressed is correct ?

delete[] pszDestUnCompressed;
pszDestUnCompressed = 0;

// ok lets write compressed pszDest to pszDest.dat
ofstream outCompressedFile("pszDest.dat",std::ofstream::binary);
outCompressedFile.write (pszDest,nMaxCompressedSize);

delete[] pszDest;
pszDest = 0;

//read it back in and try to uncompress it
ifstream infile("pszDest.dat",std::ifstream::binary);
infile.seekg (0,infile.end);
int nCompressedInputSize = infile.tellg();
infile.seekg (0);

char* buffer = new char[nCompressedInputSize];
infile.read (buffer,nCompressedInputSize);
const char* pchbuffer = buffer;

char* pszUnCompressedFile = new char[nInputSize];
nbytesPassed = LZ4_uncompress(pchbuffer, pszUnCompressedFile, nInputSize);
cout <<"- pszUnCompressedFile -" << endl;
cout <<"nbytesPassed = "<< nbytesPassed << endl;
cout << pszUnCompressedFile << endl;

//write uncompressed pszDest.dat to pszUnCompressedFile.txt
ofstream outUncompressedSource("pszUnCompressedFile.txt");
outUncompressedSource << pszUnCompressedFile;
// On my system 32bit ArchLinux 3.7.10-1 - gcc 4.7.2-4
// file contains random Garbage

delete[] buffer;
buffer = 0;

delete[] pszUnCompressedFile;
pszUnCompressedFile = 0;

return 0;
}

CONSOLE OUTPUT :
- pchSource -
2013-01-07 00:00:04,0.98644 .....
nbytes = 108

- pszDest Compressed-
nbytesPassed = 63
�2013-01-07 00:

- pszDestUnCompressed -
nbytesPassed = 63
2013-01-07 00:00:04,0.98644 .....

- pszUnCompressedFile -
nbytesPassed = -17
�W��W�-07 q

Process returned 0 (0x0)   execution time : 0.010 s
Press ENTER to continue. 
```

我显然遗漏了一些东西，除了源中包含的示例之外，还有其他用法示例吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-26T00:28:39.713

现在一切正常，谢谢，这是任何感兴趣的人的代码

```
#include <fstream>
#include <iostream>

#include "lz4.h"

using namespace std;

int main()
{
char szSource[] = "2013-01-07 00:00:04,0.98644,0.98676 2013-01-07 00:01:19,0.98654,0.98676 2013-01-07 00:01:38,0.98644,0.98696";
int nInputSize = sizeof(szSource);

// compress szSource into pchCompressed
char* pchCompressed = new char[nInputSize];
int nCompressedSize = LZ4_compress((const char *)(&szSource), pchCompressed, nInputSize);

// write pachCompressed to binary lz4.dat
ofstream outBinaryFile("lz4.dat",ofstream::binary);
outBinaryFile.write(pchCompressed, nCompressedSize);
outBinaryFile.close();
delete[] pchCompressed;
pchCompressed = 0;

//read compressed binary file (assume we pass/encode nInputSize but don't know nCompressedSize)
ifstream infCompressedBinaryFile( "lz4.dat", ifstream::binary );

//Get compressed file size for buffer
infCompressedBinaryFile.seekg (0,infCompressedBinaryFile.end);
int nCompressedInputSize = infCompressedBinaryFile.tellg();
infCompressedBinaryFile.clear();
infCompressedBinaryFile.seekg(0,ios::beg);

//Read file into buffer
char* pchCompressedInput = new char[nCompressedInputSize];
infCompressedBinaryFile.read(pchCompressedInput,nCompressedSize);
infCompressedBinaryFile.close();

// Decompress buffer
char* pchDeCompressed = new char[nInputSize]; //(nCompressedInputSize *2) +8
LZ4_uncompress(pchCompressedInput, pchDeCompressed, nInputSize);
delete[] pchCompressedInput;
pchCompressedInput = 0;

// write decompressed pachUnCompressed to
ofstream outFile("lz4.txt");
outFile.write(pchDeCompressed, nInputSize);
outFile.close();

delete[] pchDeCompressed;
pchDeCompressed = 0;

return 0;
} 
```

我还在研究一个简单的 CLI csv 到二进制 I/O 示例[here](https://groups.google.com/forum/?fromgroups=#!topic/lz4c/nxGxhaXtjSI)

# ios - 从 URL 下载图像并存储在设备中（可以是 iPod 中的照片文件夹），不在应用程序中

> ID：16190232
> 
> 赞同：0
> 
> 时间：2013-04-24T10:59:40.487
> 
> 标签：ios, image, download, writetofile, documentsdirectory

我有一个关于从 URL 下载图像的问题。检查后，我意识到我可以将图像下载并存储到应用程序中（将iPod连接到MAC并打开这个应用程序，我可以找到刚刚从服务器下载的图像），但是这个图像没有出现在设备的Photos文件夹中（我的 iPod）。以下是我的代码：

```
 NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://a3.twimg.com/profile_images/414797877/05052008321_bigger.jpg"]];
    [NSURLConnection connectionWithRequest:request delegate:self];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *localFilePath = [documentsDirectory stringByAppendingPathComponent:@"pkm.jpg"];
    NSData *thedata = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://a3.twimg.com/profile_images/414797877/05052008321_bigger.jpg"]];
    [thedata writeToFile:localFilePath atomically:YES]; 
```

我的应用程序的主要任务是从服务器（通过 URL）下载图像并将图像存储到 Photo 文件夹（或我可以创建的其他文件夹）中，之后我使用此图像为 iPod 设置背景。

有没有人见过这种情况？请给我任何想法来解决这个问题。

不管怎么说，还是要谢谢你，

瑞安。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:14:11.523

您需要将图像保存到相册，您可以为此使用[ALAssetsLibrary](https://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722)类。它们可能学起来有点陡峭，但非常强大。

或者使用非常简单的：[`UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo);`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/doc/uid/TP40006894-CH3-SW29)方法。这只会将图像保存到照片库。

# c# - LINQ 不工作

> ID：16190234
> 
> 赞同：0
> 
> 时间：2013-04-24T10:59:48.203
> 
> 标签：c#, linq, list, collections, linq-to-objects

我有一堂课：-

```
Class EmployeesList
{
    public string Category{get;set;}
    public string Name{get;set;}
} 
```

和一个`list<EmployeesList>`：`ListOfEmployee`-

```
Category = “AA”  Name= “A”
Category = “AA”  Name= “B”
Category = “AA”  Name= “C”
Category = “AA”  Name= “D”
Category = “BB”  Name= “E”
Category = “BB”  Name= “F”    
Category = “CC”  Name= “G”
Category = “CC”  Name= “H”
Category = “CC”  Name= “I” 
```

我做了两个模型类

```
Class EmployeeModel
{
    public string EmployeeCategory(get;set;)
    public List<Employees> EmployeeList {get;set;}
}
Class Employee
{
    public string EmployeeName(get;set;)
    public int EmployeeID(get;set;)
} 
```

`ObservableCollection<EmployeeModel>`我的 问题是如何`ListOfEmployee`使用 LINQ。

我试过了，但没有得到正确的输出。在这种情况下，EmployeeList 总是有第一个和冗余的值。请帮忙。

```
var tables = ListOfEmployee
             .GroupBy(f => f. EmployeeCategory)    
             .Select(f => new Employee
                          {
                              EmployeeName = f.Key,
                              EmployeeList 
                                 = f.Select(g => new Employee 
                                                 { EmployeeName = f.First().Name}
                                            )
                                     .ToList()
                            }
                      )
             .ToList(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:07:53.643

尝试以下操作：

```
var employees = ListOfEmployee
    .GroupBy(e => e.Category)
    .Select(g =>
        new EmployeeModel()
        {
            EmployeeCategory = g.Key,
            EmployeeList = g.Select(e =>
                new Employee()
                {
                    EmployeeName = e.Name,
                    EmployeeID = GetEmployeeID()
                }).ToList()
        });

return new ObservableCollection<EmployeeModel>(employees); 
```

# nsis - 为什么卸载要求关闭未打开的应用程序？

> ID：16190239
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:04.723
> 
> 标签：nsis, uninstallation, findwindow

从资源管理器启动*卸载*时，它会弹出一条消息，要求用户关闭应用程序。

但是，应用程序没有运行。*FindWindow看到*了什么用户看不到的东西？

这在 Windows95 或使用 Win95 界面的系统上不会发生。

从开始菜单中的卸载图标卸载时不会发生此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:10:00.810

在 Win95 GUI 中，资源管理器窗口的标题包含完整路径 - 例如`C:\BuildScripts`- 而在更高版本（我们的 QA 使用 Win7 和 Win8）中，标题现在是文件夹名称 - 例如`BuildScripts`。

因此，如果您的安装文件夹与您的产品同名，`FindWindow`则无法区分打开的资源管理器窗口和您的产品。

这就是为什么只有从资源管理器卸载时才会出现问题，而从开始菜单中的卸载图标卸载时不会出现问题的原因。

解决方案：

1.  不要为您的安装文件夹和您的产品使用相同的名称。
2.  使用“类”参数`FindWindow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:05:48.363

进程仍在后台运行。看看 ProcessExplorer 或 WindowTaskManager 也许你会认出它

# c# - 在 C# 中使用 Stasm - DllImport / 互操作

> ID：16190240
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:10.820
> 
> 标签：c#, interop, pinvoke

我知道这个问题之前在[这里](https://stackoverflow.com/questions/14392468/exporting-c-dll-to-c-sharp)和[这里](https://stackoverflow.com/questions/4306649/c-sharp-interp-for-active-shape-models-library-in-c)被问过，不幸的是，提供的答案无法解决我的问题。我在 C# 应用程序中使用 Stasm ( [http://www.milbo.users.sonic.net/stasm/index.html](http://www.milbo.users.sonic.net/stasm/index.html) ) 库。下面是我调用“AsmSearchDll”函数的代码。

```
 [DllImport(@"stasm\stasm_dll.dll", CallingConvention = CallingConvention.Cdecl)]
    internal static extern void AsmSearchDll
    (
        [Out] out Int32 pnlandmarks,
        [Out] out Int32[] landmarks,
        [In, MarshalAs(UnmanagedType.LPStr)] String image_name,
        [In, MarshalAs(UnmanagedType.LPStr)] String image_data,
        [In] Int32 width,
        [In] Int32 height,
        [In] Int32 is_color,
        [In, MarshalAs(UnmanagedType.LPStr)] String conf_file0,
        [In, MarshalAs(UnmanagedType.LPStr)] String conf_file1
    );

    public void SearchFacialFeatures()
    {
        string image_name = "image-5.jpg"; // imagePath;
        var image = new Image<Bgr, byte>(image_name).Convert<Gray, byte>();

        int pnlandmarks = 0;
        var landmarks = new int[500];

        var imageData = Marshal.PtrToStringAnsi(image.MIplImage.imageData);
        int imgWidth = image.Width;
        int imgHeight = image.Height;
        int is_color = 1;
        string confile_file0 = Path.GetFullPath(@"data\mu-68-1d.conf");
        string config_file1 = Path.GetFullPath(@"data\mu-76-2d.conf");
        string sDataDir = @"\stasm\data";

        AsmSearchDll(out pnlandmarks, out landmarks, image_name, imageData, imgWidth, imgHeight, 1, null, null);

        MessageBox.Show(image_name);
    } 
```

问题是应用程序在到达这条线时停止

```
AsmSearchDll(out pnlandmarks, out landmarks, image_name, imageData, imgWidth, imgHeight, 0, null, null); 
```

最初，每当调用 AsmSearchDll 函数时，应用程序就会退出，经过多次处理代码后，该函数停止了。现在应用程序出现了，但从未处理 AsmSearchDll 函数。我可以说出来，因为我用 VS 浏览了代码。永远无法到达函数下方的消息框。

我有一种强烈的感觉，该函数正在引发内部错误。对我来说不幸的是，这是我与 Interop/DllImport 的第一次交易。

我的问题是，我做错了什么，我该如何解决这个问题？我已经坚持了一天。

编辑：为非托管函数添加了代码

非托管函数的签名

```
void AsmSearchDll (
int *pnlandmarks,          // out: number of landmarks, 0 if can't get landmarks
int landmarks[],           // out: the landmarks, caller must allocate
const char image_name[],   // in: used in internal error messages, if necessary
const char image_data[],   // in: image data, 3 bytes per pixel if is_color
const int width,           // in: the width of the image
const int height,          // in: the height of the image
const int is_color,        // in: 1 if RGB image, 0 if grayscale
const char conf_file0[],   // in: 1st config filename, NULL for default
const char conf_file1[])   // in: 2nd config filename, NULL for default, "" if none 
```

调用函数的 C++ 示例

```
 const char *image_name = "../data/test-image.jpg";

IplImage *img = cvLoadImage(image_name, CV_LOAD_IMAGE_COLOR);
if(img == NULL) {
    printf("Error: Cannot open %s\n", image_name);
    return -1;
}
// sanity checks (AsmSearchDll assumes imageData is vector of b,r,g bytes)

if(img->nChannels != 3 || img->depth != IPL_DEPTH_8U ||
        img->origin != 0 || img->widthStep != 3 * img->width) {
    printf("Error: %s is an unrecognized image type\n", image_name);
    return -1;
}

// locate the facial landmarks with stasm

int nlandmarks;
int landmarks[500]; // space for x,y coords of up to 250 landmarks
AsmSearchDll(&nlandmarks, landmarks,
             image_name, img->imageData, img->width, img->height,
             1 /* is_color */, NULL /* conf_file0 */, NULL /* conf_file1 */); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:42:05.510

使用这个定义：

```
[DllImport(@"stasm\stasm_dll.dll", CallingConvention = CallingConvention.Cdecl, CharSet=CharSet.Ansi)]
internal static extern void AsmSearchDll
(
    [Out] out Int32 pnlandmarks,
    [Out] Int32[] landmarks,       // <-- the `out` keyword is removed
    [In, MarshalAs(UnmanagedType.LPStr)] String image_name,
    [In] IntPtr image_data,        // <-- should not be passed as string
    [In] Int32 width,
    [In] Int32 height,
    [In] Int32 is_color,
    [In, MarshalAs(UnmanagedType.LPStr)] String conf_file0,
    [In, MarshalAs(UnmanagedType.LPStr)] String conf_file1
); 
```

我猜主要问题是冗余`out`关键字 on `landmarks`，这导致参数作为*指向数组*的指针传递，这意味着*指向 int 的指针的指针*。您需要的是*指向 int*的指针。

同样将字节数组作为字符串传递可能会破坏字节（`image_data`参数）的内容。现在不需要使用`Marshal.PtrToStringAnsi`函数了。直接传递`image.MIplImage.imageData`给函数。

让我知道它是否有效。我无法测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T04:04:50.690

您的问题是您的程序正在尝试在 ../data/%filename% 中查找某些文件，这会导致查看包含 Debug 和 Release 文件夹的 bin 文件夹，并且您的工作目录实际上是 Debug 或 Release，具体取决于您的配置. 这就是程序返回代码 0x01 和错误的原因。一个简单的解决方案是将包含所有必需文件的数据文件夹复制到 Debug 或 Release 文件夹的父文件夹，这应该是一个快速的解决方案，或者您可以考虑修复这是通过修改 dll 查找这些文件夹的文件夹路径来实现的。

发生此问题是因为路径是硬编码的。

# java - java中的计时器，精度为0.1毫秒，间隔为23毫秒

> ID：16190246
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:21.457
> 
> 标签：java

我想每 23 +-0.1 毫秒执行一次函数。这可以在java中完成吗？如果是怎么办？提前致谢！

假设我想使用 soTimeout 7 ms 的 HttpGet 函数，我可以使用 System.nanoTime() 在 23 +-1 ms 内重复该函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:10:51.330

您可以使用 System.nanoTime() 来花时间并忙着等待，直到所需的时间到达。在大多数情况下，这必须优于 0.1 毫秒的准确度，但仍有一个小风险，即您的线程将无法运行，在这种情况下它无法及时执行操作。

# android - 膨胀类 com.readystatesoftware.maps.TapControlledMapView 时出错

> ID：16190247
> 
> 赞同：4
> 
> 时间：2013-04-24T11:00:23.970
> 
> 标签：android, google-maps, android-mapview, google-maps-android-api-2

我正在编写一个应用程序，其中我使用**Google Maps Android API v2**和*mapviewballoons*库，所以我在我的 android 项目中使用**了两个库：**

```
> android mapviewballoons
> google-play-services_lib 
```

我已经*获得了 SHA1 指纹*并且还创建了一个 Android App Map Key，**Android 应用程序的密钥（带有证书）**

但是每当我运行我的应用程序时，我都会收到**不幸的应用程序已停止**

```
Error: 
java.lang.NoClassDefFoundError:   com.era.restaurant.versionoct.map.LocationActivity 
```

**日志猫：**

```
 04-24 10:52:51.592: D/dalvikvm(1053): GC_FOR_ALLOC freed 53K, 7% free 2421K/2600K, paused 35ms, total 38ms
04-24 10:52:51.592: I/dalvikvm-heap(1053): Grow heap (frag case) to 3.069MB for 614416-byte allocation
04-24 10:52:51.651: D/dalvikvm(1053): GC_FOR_ALLOC freed <1K, 6% free 3020K/3204K, paused 48ms, total 48ms
04-24 10:52:51.691: D/dalvikvm(1053): GC_CONCURRENT freed <1K, 6% free 3020K/3204K, paused 5ms+10ms, total 48ms
04-24 10:52:51.861: D/gralloc_goldfish(1053): Emulator without GPU emulation detected.
04-24 10:52:54.811: W/dalvikvm(1053): Unable to resolve superclass of Lcom/era/restaurant/versionoct/map/LocationActivity; (973)
04-24 10:52:54.811: W/dalvikvm(1053): Link of class 'Lcom/era/restaurant/versionoct/map/LocationActivity;' failed
04-24 10:52:54.811: E/dalvikvm(1053): Could not find class 'com.era.restaurant.versionoct.map.LocationActivity', referenced from method com.era.restaurant.versionoct.TabsActivity.setTabs
04-24 10:52:54.811: W/dalvikvm(1053): VFY: unable to resolve const-class 546 (Lcom/era/restaurant/versionoct/map/LocationActivity;) in Lcom/era/restaurant/versionoct/TabsActivity;
04-24 10:52:54.811: D/dalvikvm(1053): VFY: replacing opcode 0x1c at 0x0019
04-24 10:52:55.631: D/dalvikvm(1053): GC_FOR_ALLOC freed 67K, 6% free 3206K/3404K, paused 101ms, total 136ms
04-24 10:52:55.661: I/dalvikvm-heap(1053): Grow heap (frag case) to 3.856MB for 635812-byte allocation
04-24 10:52:55.762: D/dalvikvm(1053): GC_CONCURRENT freed 8K, 6% free 3819K/4028K, paused 5ms+5ms, total 107ms
04-24 10:52:56.091: D/AndroidRuntime(1053): Shutting down VM
04-24 10:52:56.111: W/dalvikvm(1053): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-24 10:52:56.191: E/AndroidRuntime(1053): FATAL EXCEPTION: main
04-24 10:52:56.191: E/AndroidRuntime(1053): java.lang.NoClassDefFoundError: com.era.restaurant.versionoct.map.LocationActivity
04-24 10:52:56.191: E/AndroidRuntime(1053):     at com.era.restaurant.versionoct.TabsActivity.setTabs(TabsActivity.java:35)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at com.era.restaurant.versionoct.TabsActivity.onCreate(TabsActivity.java:26)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.Activity.performCreate(Activity.java:5104)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.os.Looper.loop(Looper.java:137)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 10:52:56.191: E/AndroidRuntime(1053):     at dalvik.system.NativeStart.main(Native Method) 
```

活动位置.xml：

```
 <RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
android:orientation="vertical"
   >

 <include
    android:id="@+id/header"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    layout="@layout/header_location" 
    />

<com.readystatesoftware.maps.TapControlledMapView
    android:id="@+id/viewmap"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_below="@+id/rg_views"
    android:clickable="true" />

   <RadioGroup
    android:id="@+id/rg_views"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/header"
    android:background="@color/tabMedium"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/rb_satellite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/header"
        android:layout_marginRight="16dp"
        android:text="@string/str_rb_satellite" />

    <RadioButton
        android:id="@+id/rb_normal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/viewmap"
        android:layout_marginLeft="14dp"
        android:checked="true"
        android:text="@string/str_rb_normal" />
    </RadioGroup>

    </RelativeLayout> 
```

**AndroidManifest.xml（仅显示与地图相关的内容）::**

```
 <uses-permission  
    android:name="com.era.restaurant.versionoct.maps.permission.MAPS_RECEIVE"
    >
    </uses-permission>

<permission  
    android:name="com.era.restaurant.versionoct.maps.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission 
    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES">
</uses-permission>

<uses-feature 
    android:glEsVersion="0x00020000" android:required="true">
   </uses-feature>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" 
    android:allowBackup="false">

  <activity 
        android:name="com.era.restaurant.versionoct.map.LocationActivity"
        android:label="@string/app_name">
   </activity>

 <meta-data
   android:name="com.era.restaurant.versionoct.map.v2.API_KEY"
   android:value="myAPIkey"/> 
```

**位置活动.java：**

```
 public class LocationActivity extends MapActivity {
public GeoPoint point;
TapControlledMapView mapView=null; // use the custom TapControlledMapView
List<Overlay> mapOverlays;
Drawable drawable;
SimpleItemizedOverlay itemizedOverlay;

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_location);

    mapView = (TapControlledMapView) findViewById(R.id.viewmap);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);
   // Getting reference to rg_views of the layout activity_main
    RadioGroup rgViews = (RadioGroup) findViewById(R.id.rg_views);

    // Defining Checked Change Listener for the RadioGroup
    OnCheckedChangeListener checkedChangeListener = new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {

            // Getting Reference to map_view of the layout activity_main

            // Currently checked is rb_map
            if(checkedId==R.id.rb_normal){
                mapView.setSatellite(false);
            }

            // Currently checked is rb_satellite
            if(checkedId==R.id.rb_satellite){
                mapView.setSatellite(true);
            }
        }
    };

    // Setting Checked ChangeListener
    rgViews.setOnCheckedChangeListener(checkedChangeListener);

    // dismiss balloon upon single tap of MapView (iOS behavior) 
    mapView.setOnSingleTapListener(new OnSingleTapListener() {      

        public boolean onSingleTap(MotionEvent e) {
            itemizedOverlay.hideAllBalloons();
            return true;

        }
    });

    mapOverlays = mapView.getOverlays();        
    drawable = getResources().getDrawable(R.drawable.map_button);
    itemizedOverlay = new SimpleItemizedOverlay(drawable, mapView);         
    itemizedOverlay.setShowClose(false);
    itemizedOverlay.setShowDisclosure(true);
    itemizedOverlay.setSnapToCenter(true);
    new DownloadWebPageTask().execute();

    }

class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {

            HttpClient client = new DefaultHttpClient();
            // Perform a GET request for a JSON list
            HttpUriRequest request = new HttpGet("http://XXXX.xxx/locations.json");

            // Get the response that sends back
            HttpResponse response = null;
            try {
                response = client.execute(request);
            } catch (ClientProtocolException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
            // Convert this response into a readable string
            String jsonString = null;
            try {
                jsonString = StreamUtils.convertToString(response.getEntity().getContent());
            } catch (IllegalStateException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            // Create a JSON object that we can use from the String
            JSONObject json = null;
            try {
                json = new JSONObject(jsonString);
            } catch (JSONException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

            try{
                JSONArray jsonArray = json.getJSONArray("maps");
                Log.e("log_tag", "Opening JSON Array ");
                for(int i=0;i < jsonArray.length();i++){                      
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    String latitude =  jsonObject.getString("latitude");
                    String longitude =  jsonObject.getString("longitude");
                    String title =  jsonObject.getString("title");
                    String country = jsonObject.getString("location");
                    double lat = Double.parseDouble(latitude);
                    double lng = Double.parseDouble(longitude);
                    Log.e("log_tag", "ADDING GEOPOINT"+title); 
                    point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));
                    OverlayItem overlayItem = new OverlayItem(point, title, country);
                    itemizedOverlay.addOverlay(overlayItem);
               }
           }catch(JSONException e)        {
               Log.e("log_tag", "Error parsing data "+e.toString());
           } 

           return jsonString;
       }

        @SuppressWarnings("unused")
        @Override
        protected void onPostExecute(String result) {
                    itemizedOverlay.populateNow(); 

           mapOverlays.add(itemizedOverlay);
           Object savedInstanceState = null;
              }

protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

 } 
```

**SimpleItemizedOverlay.java：**

```
 public class SimpleItemizedOverlay extends BalloonItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
public SimpleItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView);
    mapView.getContext();
}
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow)
{
    if(!shadow)
    {
        super.draw(canvas, mapView, false);
    }
}

public void addOverlay(OverlayItem overlay) {
    m_overlays.add(overlay);

}
public void populateNow()
{
    populate(); 
}

@Override
protected OverlayItem createItem(int i) {
    return m_overlays.get(i);
}

@Override
public int size() {
    return m_overlays.size();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:39:13.373

您收到此错误：

```
java.lang.NoClassDefFoundError: com.era.restaurant.versionoct.map.LocationActivity 
```

因为您的`LocationActivity`extends `MapActivity`，一个来自 - 现在已弃用 - Maps Android API *v1*库的类，您的项目中缺少该类：

```
Unable to resolve superclass of Lcom/era/restaurant/versionoct/map/LocationActivity; (973) 
```

此外，就像 Archie.bpgc 所说，您可以安全地从项目中删除*android-mapviewballoons*库，而*只*使用新的[Maps Android API v2](https://developers.google.com/maps/documentation/android/)，它具有该第三方库提供的所有功能。

# codeigniter - CodeIgniter 中的验证规则

> ID：16190250
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:29.880
> 
> 标签：codeigniter, codeigniter-2

我正在尝试使用 CodeIgniter 的 form_validation 库来验证电子邮件和密码。但是当我输入错误的电子邮件或密码时，validation_rules 的错误消息不会显示。

控制器：

```
public function anuncios() 
{
    $usr=$this->input->post('Usuario');
    $this->input->post('Contrasenya');

    $this->form_validation->set_rules('drcorreo','Nombre de usuario',
            'trim|required|min_length[5]|xss_clean');
     $this->form_validation->set_rules('contrasena','Contrase&ntilde;a',
     'trim|required|min_length[8]|md5|xss_clean');

    if($this->form_validation->run()) 
     {
        $this->load->model('modelo_usuarios');

        if($this->modelo_usuarios->puede_entrar()) 
         {
            echo "Credenciales correctos";
            $this->load->model("modelo_bd");
            $data['vanc']=$this->modelo_bd->datos();
            $this->load->view('vancios',$data);

            return true;
         }
        else { //this one is never displayed

                                    echo "Credenciales incorrectos";
                echo "Usuario o contrasenya incorrectos<br /><br />";
                $this->load->view('indice');

                return false;
             }
     }  
    else { //this one is displayed but not the rules specified in 
                   //form_validation_lang.php file

            echo "Las reglas no son validas";
            $this->load->view('indice');
         }

} 
```

看法：

```
<div id="acformulario"> 
    <form action="http://localhost/Pruebas/index.php/cindice/anuncios" method="post">
        <label for="correo" id="dcorreo">Direcci&oacute;n de correo</label>
        <input type="text" name="drcorreo" id="dcc"/><br /><br />
        <label for="contrasenya" id="cont">Contrase&ntilde;a</label>
        <input type="password" name="contrasena" id="cmcont"/><br /><br />
        <!--<label for="enviar"></label>-->
        <input type="submit" name="envia" id="bentrar" value="Entrar" />    
    </form>
</div> 
```

为什么不显示错误消息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:50:47.887

规则通过后， “*无法进入*”消息会传回。当表单验证为真时，它位于**if语句内。**

如果您希望显示此消息，请将消息加载到视图中，或将其设置为闪存数据。

为什么不将 puede_entrar() 模型调用变成自定义回调表单验证规则，然后可以将其添加到设置的规则中。

[在此处](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)查找有关自定义回调的信息。

这就是我编写控制器的方式；

```
<?php

class Foo extends CI_Controller {
    public function anuncios() {
    // xxs_clean set globally in config
        $this->form_validation->set_rules('drcorreo','Nombre de usuario', 'trim|required|min_length[5]|callback_puede_entrar');
        // should use sha1 at least for hashing, see http://www.freerainbowtables.com/tables/
        $this->form_validation->set_rules('contrasena','Contrase&ntilde;a', 'trim|required|min_length[8]|md5');

        if($this->form_validation->run()) {
            $this->load->model('modelo_bd');
            $data['vanc']=$this->modelo_bd->datos();
            $this->load->view('vancios',$data);
        } else { 
            // redisplay form with validation errors
            $this->load->view('indice');
        }
    }

    public function puede_entrar($val) {
        $this->load->model('modelo_usuarios');

        if($this->modelo_usuarios->puede_entrar()) {
            return TRUE;
        } else {
            $this->form_validation->set_message('puede_entrar', 'Las reglas no son validas.');
            return FALSE;
        }
    }
} 
```

视图（假设您已自动加载或已在`$this->load->helper(array('form', 'url')); $this->load->library('form_validation');`其他地方加载）；

```
<div id="acformulario"> 
    <form action="http://localhost/Pruebas/index.php/cindice/anuncios" method="post">
        <?php echo form_error('drcorreo'); ?>
        <label for="correo" id="dcorreo">Direcci&oacute;n de correo</label>
        <input type="text" name="drcorreo" id="dcc"/><br /><br />
        <label for="contrasenya" id="cont">Contrase&ntilde;a</label>
        <?php echo form_error('contrasena'); ?>
        <input type="password" name="contrasena" id="cmcont"/><br /><br />
        <!--<label for="enviar"></label>-->
        <input type="submit" name="envia" id="bentrar" value="Entrar" />    
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:52:49.943

我假设您在 autoload.php 文件中调用“表单”助手，

像这样使用你的观点；

```
<div class="errors"><?php echo validation_errors(); ?></div>
<div id="acformulario"> 
    <form action="http://localhost/Pruebas/index.php/cindice/anuncios" method="post">
        <label for="correo" id="dcorreo">Direcci&oacute;n de correo</label>
        <input type="text" name="drcorreo" id="dcc"/><br /><br />
        <label for="contrasenya" id="cont">Contrase&ntilde;a</label>
        <input type="password" name="contrasena" id="cmcont"/><br /><br />
        <!--<label for="enviar"></label>-->
        <input type="submit" name="envia" id="bentrar" value="Entrar" />    
    </form>
</div> 
```

重点是这里的“validation_errors()”函数。

# ruby-on-rails - Mongoid：按字段排序并跳过 N 条记录

> ID：16190251
> 
> 赞同：4
> 
> 时间：2013-04-24T11:00:32.787
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, database

我有一个包含以下数据的集合：

```
{
  "_id" : ObjectId("516b969beceaed363a000027"),
  "user" : "276",
  "item" : "796",
  "rating" : 1,
} 
```

我想按顺序排序`user`，然后在每个用户中，我想跳过前 10 条记录，只返回其他记录。如果用户没有 10 条记录，则不应返回任何内容。我也需要反过来：按用户订购，只返回前 10 条记录。如果用户没有 10 条记录，它应该返回例如 6 条记录。

我不知道如何在 Mongoid 中执行此操作，而无需调用 ruby​​ 脚本。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:38:39.183

假设您定义了一个映射到此集合的模型：

```
class MyModel
  include Mongoid::Document

  field :user, type: String
  field :item, type: String
  field :rating, type: Integer
end 
```

那么您要查找的查询非常简单：

```
#  I want to order by user and then within each user, I want to skip the first 10 records, and only return the other records
MyModel.asc(:user).skip(10)

#  Order by user and only return the first 10 records. If a user doesn't have 10 records, it should return for example 6 records
MyModel.asc(:user).limit(10) 
```

注意两个查询都返回 Mongoid`Criteria`对象。如果您需要实际的数组 - 调用`to_a`结果。

# c++ - 非常量引用的初始化

> ID：16190252
> 
> 赞同：3
> 
> 时间：2013-04-24T11:00:36.787
> 
> 标签：c++, reference, initialization

我想我从 TC++PL 中了解到“非常量引用应该由左值初始化”。

以下是我的问题

```
int f1(int &x)
{
    return 1;
}

int f2()
{
    return 1;
}

int f3(string &s)
{
    return 1;
}

string f4()
{
    return "1";
}

int main()
{
    cout<<f1(f2())<<endl; // Error.
    cout<<f3(f4())<<endl; // OK.
} 
```

所以我不明白为什么 f3(f4()) 是正确的，而 f4() 的返回值显然不是左值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:12:46.367

我认为，您使用 Microsoft Visual C++ 编译器，使用默认选项编译此代码。这是因为其中有非标准扩展，允许将右值绑定到左值引用。有关如何在 MSVC 中工作的更多信息，您可以阅读[右值到左值转换 Visual Studio](https://stackoverflow.com/questions/11508607/rvalue-to-lvalue-conversion-visual-studio)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:12:38.273

这两种说法都行不通。原因是 f(2) 返回一个常量值，而 f(1) 需要一个非常量，因此会出现错误消息。

```
int f3(const string &s)
{
   return 1;
}

int f1(const int &x)
{
   return 1;
} 
```

这将消除错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:20:13.680

从概念上讲，这段代码不应该工作。为什么？

答：函数 f1 和 f3 中的每一个都使用一个参数作为按地址调用。所以它必须能够引用传递给它的参数的地址。因此，函数 f1 和 f3 中参数值的任何更改都会影响传递给它的实际变量。

但函数 f4 和 f2 的返回值是常量，不能更改。因此错误。

现在，如果您只需将函数 f2 和 f4 的值传递给函数 f1 和 f3，只需按值传递即可。为此，请删除参数中的 & 符号。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-24T11:25:46.230

```
int _tmain(int argc, _TCHAR* argv[])
{
    cout<<f1(f2())<<endl; 
    int &a(1); //This is what gonna happen when your f2() returns 1 and 1 is passed in    f1(int&). That is invalid.
        cout<<f3(f4())<<endl; 
    // string& str(string("1"));//when "1" is returned from f4() it will be implicitly casted to string("1") and pass in f3 as f3(string("1")). There it comes valid reference.

    return 0;
} 
```

# r - 组合几个二进制变量

> ID：16190253
> 
> 赞同：1
> 
> 时间：2013-04-24T11:00:36.977
> 
> 标签：r

我有 5 个变量，`var1`等等`var2`，它们都是这样编码的：

```
Factor w/ 2 levels "no","yes": 2 1 1 2 1 2 1 1 1 1 ... 
```

我想将它们合二为一。到目前为止，我只使用过：

```
comb_drug <- with(dt1,interaction(var1, var2, var2, var4, var5)) 
```

这给出了一个具有 32 个级别的变量。我现在想创建一个具有以下 3 个级别的变量：

*   5个都是yes
*   任何4个都是
*   少于4个是

做这个的最好方式是什么 ？以下是一些示例数据：

```
var1 <- as.factor(c(2,2,1,2,2,1,2,1,2,2))
var2 <- as.factor(c(2,1,2,2,2,1,2,2,2,2))
var3 <- as.factor(c(2,2,1,2,2,2,2,2,1,2))
var4 <- as.factor(c(2,2,1,2,2,2,2,2,1,2))
var5 <- as.factor(c(2,2,2,1,2,1,2,1,1,2))

dt <- data.frame(var1,var2,var3,var4,var5)

for ( i in 1:5) {
    levels(dt[,i]) <- c("no","yes")
}

   var1 var2 var3 var4 var5
1   yes  yes  yes  yes  yes
2   yes   no  yes  yes  yes
3    no  yes   no   no  yes
4   yes  yes  yes  yes   no
5   yes  yes  yes  yes  yes
6    no   no  yes  yes   no
7   yes  yes  yes  yes  yes
8    no   no  yes  yes   no
9   yes  yes   no   no   no
10  yes  yes  yes  yes  yes 
```

我宁愿

```
 newvar
1   allyes
2   4yes
3   lessthan4yes
4   4yes
5   allyes
6   lessthan4yes
7   allyes
8   lessthan4yes
9   lessthan4yes
10  allyes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:12:59.717

可能比`apply(x,1,sum)`( `rowSums`)稍快的替代方案

```
dt$nYes <- rep(c('<4','4','all'),times = c(3,1,1))[rowSums(dt=='yes')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:09:56.093

这应该会让您上路……只需将每行的“是”值相加即可：

```
dt$newvar <- apply(dt, 1, function(x) sum(x == "yes"))
dt$newvar
#  [1] 5 4 2 4 5 2 5 3 2 5 
```

从那里，您可以做一些巧妙的分解来获得您需要的东西......或者这*可能*足以满足您的目的。

实际上，`rowSums`可能会快很多：

```
dt$newvar <- rowSums(dt == "yes") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T13:04:53.243

如果您`1`从所有数据中减去，您将得到零和一，这可以直接解释为 TRUE/FALSE，这使软件运动员更快乐:-)。作为额外的奖励，对于某些 T/F 向量（或 1 和 0）， `sum(myvector)`直接为您提供 TRUE 的数量。那时，您甚至可以有一个查找矩阵，例如

```
sum  label
0    allno
1     one_no
2    lessthan4yes
3    lessthan4yes
4    4yes
5    yes 
```

并直接替换为 `newvec <- lutmat[lutmat[,1]==sums,2]` .

# html - 自动启动不适用于视频 html

> ID：16190255
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:40.020
> 
> 标签：html, tags, embed

我正在使用标签在页面上显示我的视频。加载页面后，视频会自动启动。

为了防止这种情况，我使用 autostart="false"。但没有运气。

我的代码：

```
<embed style="max-width:180px; max-height:135px;" src="url" autostart="false" loop="true"> 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:09:42.087

如果它是一个严格的嵌入，通常你只需将 autostart="false" 放在嵌入标签中。

**示例**：

```
<embed autostart="false"> 
```

如果它是一个对象（推荐），您将需要使用一个参数。

**示例**：

```
<object width="160" height="144">
<param name="autoplay" value="false">

<embed src="sample.mov" width="160" height="144" autoplay="false" controller="false"
</embed> 
```

# c# - 如何通过后面的代码将值插入或更新到数据库中

> ID：16190258
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:43.743
> 
> 标签：c#, asp.net, sql-server, repeater

我目前正在为我的网站开发管理页面。目前，我正在尝试开发用户名册和规则。

我的数据库结构如下：

* * *

**tblSiteUserRolls**

```
id
rollName
rollDescription 
```

* * *

**tblSiteRollAccess**

```
id
accessName
accessDescription 
```

* * *

**tblSiteRollLink**

```
id
rollId
rollAccessId
allowed 
```

* * *

**tblSiteMemberDetail**

```
~stuff~
userRollId 
```

* * *

我手动添加了`rolls`and `rollAccess`，并将它们显示在`Repeater`控件上，名称旁边有小复选框。这一切目前都完美无缺。

这可以通过将所有的添加`rollAccess`到一个通用列表中，并将所有的值设置为`allowed`0。然后我检查从**tblSiteRollLink**`rollAccess`中*选择* 的所有的，如果它在那里，设置为 1。`roll`**`allowed`**

 **有没有一种快速的方法可以使用编辑的值插入或更新**tblSiteRollLink**中的记录，而不是遍历我的所有值`repeater`并手动执行它？

这是一些代码：Page.aspx

```
<asp:Repeater ID="rptRollRules" runat="server">
        <HeaderTemplate>
            Roll Rules
            <table>
                <tr>
                    <th>Access Name
                    </th>
                    <th>Allowed
                    </th>
                </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td>
                    <asp:Label ID="lblRollId" runat="server" Text='<%# Eval("RollId") %>' Visible="False"></asp:Label>
                    <asp:Label ID="lblAccessId" runat="server" Text='<%# Eval("AccessId") %>' Visible="False"></asp:Label>
                    <asp:Label ID="lblAccessName" runat="server" Text='<%# Eval("AccessName") %>'></asp:Label>
                </td>
                <td>
                    <asp:CheckBox ID="chkIsAllowed" runat="server" Checked='<%# Eval("AccessAllowed") %>'/>
                </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
            </table>
        </FooterTemplate>
    </asp:Repeater> 
```

页面.cs

```
private void PopulateRollRulesRepeater(string rollId)
    {
        // Get all the access rolls
        List<RollAccess> access = new List<RollAccess>();

        string strSql = "SELECT [id]" +
                              ", [accessName]" +
                              ", [accessDescription]" +
                              " FROM tblSiteRollAccess";

        SqlCommand sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text };

        SqlDataReader rdr = sqlComm.ExecuteReader();

        while (rdr.Read())
        {
            access.Add(new RollAccess
                {
                    RollId = rollId,
                    AccessId = rdr["id"],
                    AccessName = rdr["accessName"],
                    AccessDescription = rdr["accessDescription"],
                    AccessAllowed = false
                });
        }

        rdr.Close();
        DataConn.Disconnect();

        // Check if the current roll has the access
        strSql = "SELECT [rollAccessId]" +
                 ", [allowed]" +
                 " FROM vwGetRollAccess WHERE rollID = @id AND allowed = 1";

        sqlComm = new SqlCommand(strSql, DataConn.Connect()) { CommandType = CommandType.Text };
        sqlComm.Parameters.Add(new SqlParameter("@id", SqlDbType.Int)).Value = rollId;

        rdr = sqlComm.ExecuteReader();

        while (rdr.Read())
        {
            foreach (RollAccess rollAccess in access.Where(rollAccess => rollAccess.AccessId.ToString() == rdr["rollAccessId"].ToString()))
            {
                rollAccess.AccessAllowed = true;
            }
        }

        rdr.Close();
        DataConn.Disconnect();

        rptRollRules.DataSource = access;
        rptRollRules.DataBind();
    }

    public class RollAccess
    {
        public object RollId { get; set; }
        public object AccessId { get; set; }
        public object AccessName { get; set; }
        public object AccessDescription { get; set; }
        public object AccessAllowed { get; set; }
    }

/// <summary>
/// Update the Roll's details and access levels
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void btnUpdate_Click(object sender, EventArgs e)
{

    DataTable rules = new DataTable();
    DataColumn rollId = new DataColumn("rollId", typeof(int));
    DataColumn rollAccessId = new DataColumn("rollAccessId", typeof(int));
    DataColumn allowed = new DataColumn("allowed", typeof(int));

    rules.Columns.Add(rollId);
    rules.Columns.Add(rollAccessId);
    rules.Columns.Add(allowed);

    DataRow drRules = rules.NewRow();

    // Update the access levels
    foreach (RepeaterItem i in rptRollRules.Items)
    {
        //Retrieve the state of the CheckBox
        CheckBox chkIsAllowed = (CheckBox) i.FindControl("chkIsAllowed");
        Label lblRollId = (Label) i.FindControl("lblRollId");
        Label lblAccessId = (Label) i.FindControl("lblAccessId");

        drRules["rollId"] = lblRollId.Text;
        drRules["rollAccessId"] = lblAccessId.Text;
        drRules["allowed"] = chkIsAllowed.Checked.GetHashCode();
    }

    string strSql = "";
} 
```

/当前/ SQL

```
-- =============================================
-- Author:      Darren Whitfield
-- Create date: 24 April 2013
-- Description: This will update the user roll rules
-- =============================================

CREATE TABLE [rulesTable]
( 
     [ID] [int] NOT NULL PRIMARY KEY IDENTITY,
     [rollId] [int] NOT NULL, 
     [rollAccessId] [int] NOT NULL, 
     [allowed] [tinyint] NOT NULL
)
CREATE TYPE [rulesUDT] AS TABLE
( 
     [rollId] [int] NOT NULL, 
     [rollAccessId] [int] NOT NULL, 
     [allowed] [tinyint] NOT NULL
)

GO

CREATE PROCEDURE procUpdateUserRollRules 
@tbl rulesUDT READONLY
AS
BEGIN
    SET NOCOUNT ON

    INSERT INTO [rulesTable] SELECT * FROM @tbl

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:05:10.037

根据您如何完成中间层，这应该是可能的。

您需要将值列表作为表传递给 SQL Server，并传递到接受表类型参数的存储过程中：http: [//msdn.microsoft.com/en-us/library/bb510489.aspx](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

在该存储过程中，您可以使用 MERGE 命令在单个操作中插入/更新：http: [//msdn.microsoft.com/en-GB/library/bb510625.aspx](http://msdn.microsoft.com/en-GB/library/bb510625.aspx)

这是此站点上另一个问题的 C# 示例将数据表[从 C# 传递到 SQL Server 2008](https://stackoverflow.com/questions/10408457/passing-datatable-from-c-sharp-to-sql-server-2008)

好的，看看你的回发代码示例，一些伪代码：

```
 // Update the access levels
    foreach (RepeaterItem i in rptRollRules.Items)
    {

DataRow drRules = rules.NewRow(); //One table row per repeater row

        //Retrieve the state of the CheckBox
        CheckBox chkIsAllowed = (CheckBox) i.FindControl("chkIsAllowed");
        Label lblRollId = (Label) i.FindControl("lblRollId");
        Label lblAccessId = (Label) i.FindControl("lblAccessId");

        drRules["rollId"] = lblRollId.Text;
        drRules["rollAccessId"] = lblAccessId.Text;
        drRules["allowed"] = chkIsAllowed.Checked.GetHashCode();

rules.Rows.Add(drRules); //Add your row to the data table
    }

cmd = new SqlCommand(); //Can't remember the syntax
cmd.CommandText = "EXEC YourMergeStoredProcedure @YourDataTable";
SqlParameter sqlParameter = cmd.Parameters.AddWithValue("@YourDataTable", drRules);
sqlParameter.SqlDbType = SqlDbType.Structured;
cmd.ExecuteNonQuery(); 
```

不要忘记，您需要在 SQL Server 中创建表类型，以便它知道会发生什么。请参阅上面的链接以了解如何执行此操作。另外我的代码只是为了给你一个想法，我在这里写下我的头顶，所以会有错误。**

# php - Magento api cart_coupon.add 不起作用

> ID：16190261
> 
> 赞同：0
> 
> 时间：2013-04-24T11:00:49.133
> 
> 标签：php, android, magento-1.7, xml-rpc

我正在创建允许用户将产品添加到他的购物车并下订单的 Android 应用程序。为此，我正在使用 XMLRPC。

按照我已经完成的步骤

```
1.cart.create
2.cart_customer.set
3.cart_customer.addresses
4.cart_shipping.list
5.cart_shipping.method
6.cart_product.add
7.cart_payment.list
8.cart_payment.method 
```

在 cart_payment.method 之前，所有代码都可以正常工作，但是当我调用 cart_coupon.add api 时出现异常

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {null}methodResponse
(position:START_TAG (empty) <br>@1:7 in java.io.InputStreamReader@4151b450) 
at org.kxml2.io.KXmlParser.require(KXmlParser.java:2046) 
```

我的代码是：

```
client = new XMLRPCClient(url);
object = client.callEx("call", new Object[]{sessionId,
                    "cart_coupon.add",new Object[]{shoppingCardId,couponcode}}); 
```

其中 url 是有效的 magento 主机 url，shoppingCardId 是我从服务器获取的 CardId。

异常发生在类 XMLRPCClient，在行

```
pullParser.require(XmlPullParser.START_TAG, null, Tag.METHOD_RESPONSE); 
```

我认为服务器用空白字符串回复，解析器找不到开始标签。

如果我通过 php 脚本调用相同的 api，cart_coupon.add 和 cart.order 工作正常，我得到订单 ID 作为响应，并且在服务器端的 sales->orders 中，我可以看到订单已成功下达。但是，当我从 Android 遵循相同的程序时，我得到了上述异常。
我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T06:52:09.203

我也遇到了同样的问题。我在最后一次调用时绕过了 XMLRPC，并编写了 php 脚本来下订单。

# c++ - g++ 总是向后兼容“旧”静态库？

> ID：16190269
> 
> 赞同：14
> 
> 时间：2013-04-24T11:01:05.070
> 
> 标签：c++, g++, backwards-compatibility, abi

我有一些静态库，我不是它们的所有者，它们是用旧版本的 g++ 4.3.2（c++11/c++0x 未激活）编译的。

当我用 g++ 4.6（没有 c++11）编译我的代码并使用 g++ 4.6 将它与这些静态库链接时，它链接得很好，我似乎在运行时没有遇到任何问题（虽然没有测试一切）。我很想认为前向兼容性是可以的。

现在我想用 gcc 4.8 和 c++11 编译我的代码，并且仍然将它与那些相同的，而不是重新编译的静态库链接。

**g++ 中的 ABI 更改是否只是链接前向兼容性的问题，还是也可能出现向后兼容性问题？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T15:47:12.460

C++98 代码的 G++ ABI 向后兼容，一直到 GCC 3.4

因此，如果您使用 GCC 4.8 编译和链接您的最终可执行文件，您可以链接到使用 GCC 3.4 到 4.8（但不是更新版本）构建的对象和库

C++11 ABI 与 C++98 ABI 相同，C++98 和 C++11 通用的标准库类型具有相同的定义，[（忽略 GCC 4.7.0 和 GCC 4.7。 1，在 C++11 中`std::pair`和使用时存在 ABI 不兼容问题`std::list`，已在 4.7.2 及更高版本中修复）]，因此您可以将 C++98 和 C++11 代码链接在一起[（除非 C++11 代码使用 GCC 4.7.0 或 4.7.1 构建）]

**然而**，一些 C++11 库类型还不稳定，并且在不同版本之间会发生变化，例如，因为它们在最终 C++11 标准之前首次发布，并且必须进行更改以匹配最终规则。所以混合使用 GCC 4.6 构建的 C++11 代码和使用 GCC 4.8 构建的 C++11 代码不一定安全

对于您的情况，所有 C++11 代码都是使用 GCC 4.8 构建的，这没问题。如果您升级编译器，您应该使用较新的 GCC 重新构建所有 C++11 代码以确保安全。（无需重新编译 C++98/C++03 代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:10:54.043

C++11 标准的目标是保持向后兼容性，编译器供应商也是如此。只要库不使用任何“破坏” C++11 标准的东西，库格式本身就应该是相同的。

有关C++11 中引入的更改，请参阅[此内容。](https://stackoverflow.com/questions/6399615/what-breaking-changes-are-introduced-in-c11)

因此，假设您用于调用库的代码（包括标题），您应该没问题。

# nhibernate - NHibernate CreateSqlQuery() 结果到 ObservableCollection

> ID：16190270
> 
> 赞同：0
> 
> 时间：2013-04-24T11:01:08.170
> 
> 标签：nhibernate, observablecollection

我有以下内容：

```
 using (ISession session = Config.SessionFactory.OpenSession())
            {
                using (ITransaction transaction = session.BeginTransaction())
                {
                    // This is a System.Collections.ArrayList,contains all my records returned from the session
                    var list  = session.CreateSQLQuery(selectQuery).List(); 

                    // I want to put these records in an ObservableCollection of a specific Type
                    // Something like htis:
                    MyCollection = new ObservableCollection<MyType>(list);
                }
            } 
```

这是行不通的，这里不能选择强制转换。有没有办法将我返回的列表放入 ObservableCollection？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:48:57.843

我使用以下内容填充了我的 ObservableCollection：

```
 var query = session.CreateSQLQuery(selectQuery).AddEntity(typeof(MyType));
   myObservableCollection = new ObservableCollection<MyType>(query.List<MyType>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:25:40.713

List() 返回 ArrayList。ArrayList 中的每个值都有一些值，它是对象的类型。它不能直接转换为任何特定的类。所以创建一个映射文件，然后只有你可以获得所需对象的列表。 ![在此处输入图像描述](https://i.stack.imgur.com/thZKA.png)

# java - ScrollView Height 不会包裹到代码中的父 Activity

> ID：16190273
> 
> 赞同：0
> 
> 时间：2013-04-24T08:53:25.710
> 
> 标签：java, android

关于我的android代码上带有滚动视图的布局，我有这个小问题

```
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.graphics.Color;
import android.view.Menu;
import android.view.ViewGroup.LayoutParams;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.ScrollView;

public class ScheduleList extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().getDecorView().setBackgroundColor(Color.BLACK);
    setTheme(R.style.DefaultForm);
    ScrollView sv = new ScrollView(this);
    ListView lv = new ListView(this);
    String data[] = { "Android", "iPhone", "BlackBerry", "AndroidPeople" };
    ArrayAdapter adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, data);
    lv.setAdapter(adapter);
    sv.addView(lv);
    sv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    setContentView(sv);
}
} 
```

这就是我得到的 [结果图像](http://i.stack.imgur.com/spLx0.jpg)

如何调整此 ScrollView 的大小以匹配我的活动表单的高度，我确实更改了 LayoutParams.FILL_PARENT 以及 setLayoutParams 上的 LayoutParams.WRAP_CONTENT 但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:05:05.390

执行 ：

```
 sv.addView(lv);
 sv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT)); 
```

在`onCreate()`或**构造函数之外！** 因为视图还没有完成创建并且视图不知道元素的大小！

例如，如果您尝试打印`sv.getWidth()`，则该方法将在**构造函数中***返回 0* ，或者如果调用在外部，则返回正确的大小！**`onCreate()`**

# php - PHP创建带有POST信息的表，遍历填充的变量

> ID：16190282
> 
> 赞同：3
> 
> 时间：2013-04-24T11:01:58.287
> 
> 标签：php, html, loops, post, html-table

我有以下帖子变量：

```
$line_1_09
$line_1_12
$line_1_15
$line_1_18
$line_1_21
$line_2_09
$line_2_12
$line_2_15
$line_2_18
$line_2_21
$line_3_09
$line_3_12
$line_3_15
$line_3_18
$line_3_21 
```

我从我之前的表格中知道，15 个输入（帖子）中有 12 个已填充。12 存储在变量 $populatedrows 中。

然后我想在我的新页面上创建一个表格

```
<table>
<?php for ($i=1; $i<=$populatedrows; $i++)
  {
?>
    <tr>
       <td>
         <input type="text" value="//first post with information//">
       </td>
    </tr>
<?php } ?>
</table> 
```

所以在这个例子中，如果`$line_1_09`和`$line_1_12`为空，那么第一个表行输入必须是`$line_1_15`

因此它将继续“循环”通过下一个可用/填充的帖子变量，直到表等于`$populatedrows`. 这将等于包含数据的 post 变量的数量。

对我来说很奇怪的情况，所以不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:26:15.507

如果您只想为每个非空 $_POST 变量创建输入：

```
 <?php
    foreach($_POST as $key => $value) //$key is e.g 'line_1_20'
    {
        // substr($key, 0, 5) == 'line_' checks if the $key starts with 'line_'
        if((substr($key, 0, 5) == 'line_') && !empty($value))
        {
        ?>
            <tr>
                <td>
                  <input type="text" value="<?php echo $value ?>">
                </td>
            </tr>
        <?php
        }
    }
    ?> 
```

如果你想要更少，那么所有填充的 $_POST：

```
 <?php
    $count = 0; //count rendered fields
    foreach($_POST as $value)
    {
        if(!empty($value))
        {
        ?>
            <tr>
                <td>
                  <input type="text" value="<?php echo $value ?>">
                </td>
            </tr>
        <?php
        $count++; //increase counter
        }

        if($count == $populatedrows) //if the coutner hits the requested amount break the loop
            break;
    }
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:09:23.473

你可以迭代你的变量名，有点难看:-) [http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

只需做每一个并测试isset（），如果是这样输出它。

例如，您可以嵌套几个 for 循环来生成索引 (1,2,3) 和 (9, 12, 15, 18, 21)。然后得到你的变量

```
$var_name = '$line_' . $i . '_' . $j;
echo ${$var_name}; 
```

您必须在 $j 的前导零中填充 9 -> 09

您可能会考虑遍历发布数据，但如果您更改发送到页面的发布数据的数量或顺序，您的代码就会损坏。

如果数据的顺序不适合您的表，请将其放入数组中，然后再进行表写入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:15:52.837

尝试这个：

```
 <table>
    <?php for ($i=1; $i<=$populatedrows; $i++)
      {
       if(isset($_POST[$i])) {
    ?>
         <tr>
           <td>
             <input type="text" value="<?php echo $_POST[$i] ?>">
           </td>
        </tr>
    <?php }
} ?>
    </table> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T11:18:53.853

试试这个？

```
<table>
<?php for ($i=1; $i<=$populatedrows; $i++) : 
if (!empty($populatedrows)) continue;
?>
  <tr>
     <td>
       <input type="text" value="//first post with information//">
     </td>
  </tr>
<?php endfor; ?>
</table> 
```

# r - R：GillespieSSA 绘制所有运行图

> ID：16190285
> 
> 赞同：1
> 
> 时间：2013-04-24T11:02:09.560
> 
> 标签：r

我正在使用`GillespieSSA`R 包，并且运行了 10 次。代码如下：

```
library(GillespieSSA)
init <- c(S=199, I=1)
a <- c("0.03*{S}*{I}","1*{I}")
nu <- matrix(c(-1, +1, +1, -1),nrow=2,byrow=T)
out <- lapply(X=1:10,FUN=function(x) ssa(init, a, nu, tf=10)$data)
plot(out[[3]][,3],type="l",xlab="Time",ylab="I(t)") 
```

我的问题是我可以绘制一个特定的运行，比如说第三次运行，out[[3]] 给出了数据的第三次运行，但是我希望绘制所有运行以了解每次运行的频率。我不知道如何编写代码。我被困了几个星期，而且我的 R 程序非常薄弱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:37:19.907

如果您只想绘制所有运行的频率，这是您正在寻找的吗？

```
par(mfrow=c(4,3))

for (i in seq_along(out)){
  hist(out[[i]][,3],xlab="I(t)", main=paste("Run ", i))
} 
```

# java - 如何避免“除非模拟类型是可注入或动态的，否则无法进入方法”？

> ID：16190288
> 
> 赞同：2
> 
> 时间：2013-04-24T11:02:24.890
> 
> 标签：java, unit-testing, mocking, jmockit

**一般来说**：是否可以为我自己不创建的对象调用方法的原始实现？我的意思是，我可以调用`inv.proceed()`在测试代码中创建的实例，但我不知道如何为在测试代码中创建的实例调用。原因是，我知道在我的控制之外模拟实例的唯一方法是使用`@Mocked`注释，但它`inv.proceed()`会因“UnsupportedOperationException”而失败。

**详细说明**：我使用如下代码收到此错误：

```
new NonStrictExpectations() {
    @Mocked("process")
    MyClassUnderTest o;
    {
        o.process(any);
        result = new Delegate<MyClassUnderTest>() {
            public void process(Invocation inv, Object o) {
                inv.proceed(); //Fails on this line with UnsupportedOperationException
            }
        }
    }
} 
```

当我使用动态部分模拟时，异常消失了：

```
new NonStrictExpectations(o) {
    {
        o.process(any);
        result = new Delegate<MyClassUnderTest>() {
            public void process(Invocation inv, Object o) {
                inv.proceed();
            }
        }
    }
} 
```

我不明白这一点。@Mocked 不是“可注入的”吗？

# php - 显示 HTML 标签而不是实际消息的邮件正文

> ID：16190290
> 
> 赞同：0
> 
> 时间：2013-04-24T11:02:26.327
> 
> 标签：php

代码正在为 gmail、yahoo 查找，但对于公司 ID，它显示的是 HTML 标签而不是实际消息.. 如下所示

```
Content-type: text/xhtml; charset=iso-8859-1

From: info@test.net

X-Mailer: php
Message-Id: <20130424005039.50FF769A98@test.=myweb.org>
Date: Wed, 24 Apr 2013 05:50:39 -0500 (CDT) 
```

1.  当在客户端 PC 中提交代码时，当我们使用公司 ID 以外的代码时，代码工作正常，只有公司 ID 存在问题。
2.  如果邮件从其他主机 (php) 发送到公司 ID，则 html 再次显示正常。我不知道我现在该怎么办。

来自 php.net 代码的片段。

```
$to .= 'mytomailid@mail.com';

// subject
$subject = 'Birthday Reminders for August';
// message
$message = '
<html>
<head>
  <title>Birthday Reminders for August</title>
</head>
<body>
  <p>Here are the birthdays upcoming in August!</p>
  <table>
    <tr>
      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
    </tr>
    <tr>
      <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
    </tr>
    <tr>
      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
    </tr>
  </table>
</body>
</html>
';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:20:25.523

您应该尝试使用库[PHP Mailer](https://github.com/Synchro/PHPMailer)进行邮件发送。它处理了这种类型的标题条件。

# wpf - 如何将ListViewItem的高度调整为*？

> ID：16190292
> 
> 赞同：0
> 
> 时间：2013-04-24T11:02:29.420
> 
> 标签：wpf, xaml, windows-runtime, winrt-xaml

我有一个 ListView，正在添加 5 个 ListViewItem。因为第三项的高度应该采用代码中给出的行定义的其余高度。

```
<Grid.RowDefinitions>
   <RowDefinition Height="Auto" />
   <RowDefinition Height="Auto" />
   <RowDefinition Height="*" />
   <RowDefinition Height="Auto" />
   <RowDefinition Height="Auto" />
</Grid.RowDefinitions> 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:07:12.043

我不确定，如果这有效..

> yourListView.GetItemRect(itemIndex).Height=foo;

您可以尝试使用任何逻辑来设置 foo 的值吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T14:10:10.890

问题是，如果您使用 *，这意味着对此的控制将占用剩余的空闲空间。间接地说，列表视图的大小和整个网格大小很重要。所以保持 * 不是问题。但是，如果您想设置控件的大小，请使用`auto`.

您仍然可以使用其他容器（如 stackpanel）通过将 stackpanel 添加到第三行来管理列表视图控件的大小。

# mysql - mysql sql脚本

> ID：16190293
> 
> 赞同：0
> 
> 时间：2013-04-24T11:02:30.093
> 
> 标签：mysql, sql-scripts

我有一个表 T 有几列，其中 1 列有逗号分隔值。我想以下列方式处理此列并更新所有行

该列包含诸如“15,20”之类的值；“30,15,50”（不按排序顺序）。并且只有 10 个不同的可能值

## 处理逻辑

根据分隔符 (,) 拆分列 在结果列表中查找最大值。根据最大值，使用特定值更新列。

我是 Mysql 脚本的新手。因此，如果您能提供一些有关如何解决此问题的指示，将会很有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:31:33.423

## 警告

除了我确信这不是这样做的方法之外，还有一种方法。但是我不能足够强调数据库设计是一个问题，以及在 sql 中执行此逻辑的决定。这不应该。

请不要这样做。话说回来...

## 黑客攻击

你需要这个，我想从你的问题中理解：

1.  拆分字符串
2.  找到最高值
3.  基于此进行查询。

第一个是最难的。例如，请参阅[有关爆炸的问题](https://stackoverflow.com/questions/471914/can-you-split-explode-a-field-in-a-mysql-query)和[字符串函数的 mysql 手册](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)（尤其是注释）。可以做到，但是您需要做一些技巧，并利用您对字符串限制的知识（数量，它们的形成方式等），您可能可以`SUBSTRING_INDEX`像这些示例中那样做一些骇人听闻的事情。

如果您有单独的值，则可以比较它们以找到最高值。您也许可以使用 sql`MAX`函数，但是当您进行所有 substring-split-explode 黑客攻击时，进行比较可能会更快。

现在你有了一个值，你可以使用某种`CASE`语句来硬编码效果，或者在查询中输入它。

## 讲道

数据库设计看起来有问题，但这可能是一个正当的理由。您可以更改的内容也可能受到限制（例如，它不是您的数据库），因此给定的就是给定的。悲伤但真实。

*您需要*在 sql 中执行此操作的事实，我很难做到这一点。应该有人有理由想要这个，而那个人可能是错的。你能去找这个人，找出原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:18:14.273

这家伙在这里从列表中选择最大的数字（您可以从 mySQL UI 即时/查询窗口或命令行运行此代码进行测试）：

```
SET @foo = CONCAT('SELECT ', REPLACE('40,50,10,20', ',', ' UNION ALL SELECT '));
SET @foo = CONCAT('SELECT * FROM (', @foo, ' ORDER BY 1 DESC) AS uncleFoo LIMIT 1');
PREPARE STMT FROM @foo; 
EXECUTE STMT;
DEALLOCATE PREPARE STMT;
```

所以。第一个“SET @foo”有点像一个explode函数：它创建一个从列表中选择数字到表行中的SQL。如您所见，在上面的示例中，我输入了“40,50,10,20”，但您可以使用任意数量的项目和任何分隔符来代替“，”。
注释第二行“SET”并执行查询以查看究竟发生了什么。

下一个“SET @foo”扩展了查询，因此只会返回最大的数字（类似于“SELECT max([field])”，但由于查询的性质，我们不能在这里使用“max”） .
然后我们执行查询，因此它只返回列表中的最大数字。

如果你想用结果更新一个字段，你应该像这样扩展查询：

```
UPDATE myTable SET myField=[value from above @foo execution] WHERE [your clause]
```

我认为从这一点开始，您可以轻松弄清楚如何在特定情况下更新您想要的字段。
如果不是“一次性执行”来修复某些问题，您也可以将上述代码移动到一个函数中，但您稍后也需要此更新。

希望这可以帮助！

# php - ® 字符在我的表单中未正确处理

> ID：16190294
> 
> 赞同：0
> 
> 时间：2013-04-24T11:02:32.747
> 
> 标签：php, mysql, web-applications, special-characters, zpl

堆栈：

一个带有文本字段的简单表单=> 发布到在 unix 上运行的 apache web 服务器 => 由 php 5.3 处理 => 保存在 mysql5 表中并使用 latin1 字符集

然后，从数据库中检索并显示给用户。

结果：当用户在表单中输入 ® 符号时，它作为两个符号而不是一个符号保存到数据库中，然后在 ZPL 打印机中出现错误

顺便说一句，当它在运行 Windows 而不是 Unix 的开发机器上运行时不会发生

我究竟做错了什么？

编辑：我无法更改 mysql 表的字符集，有一个 latin1 的公司标准，我不欣赏，但仍然如此

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:38:05.973

字符编码在您的场景中的多个位置发挥规则

*   客户端使用哪种编码将参数发送到服务器
*   mysql 服务器使用哪种编码来解释从 php 脚本发送到服务器的字符
*   mysql 服务器使用哪种编码将结果发送回 php 脚本
*   mysql服务器使用哪种编码来存储数据
*   客户端/浏览器使用哪种编码来呈现从 php 脚本发送到客户端/浏览器的数据

将整个链保持为 utf-8 编码是最简单的：
将发送到浏览器的 html 文档的字符编码设置为 utf-8，例如通过[default_charset](http://docs.php.net/manual/en/ini.core.php#ini.default-charset)。
向 mysql 服务器指示连接字符集是 utf-8，例如通过在[PDO-MYSQL DSN](http://docs.php.net/manual/en/ref.pdo-mysql.connection.php)中设置 charset 属性。
使用 utf-8 作为默认字符集创建表，而不为字段本身指定另一种编码。

自包含示例：

```
<?php
ini_set('default_charset', 'utf-8');
$fn = isset($_POST['val']) ? 'doDatabase' : 'doForm';
doHtml($fn);

function doHtml($fn) { ?>
<html>
    <head><title>...</title></head>
    <body>
        <?php $fn(); ?>
    </body>
</html>
<?php
}

function doForm() { ?>
    <form method="POST" action="?">
        <div>
            <input type="text" name="val" value="&reg;" />
            <input type="submit" />
        </div>
    </form>
<?php       
}

function doDatabase() {
    $pdo = new PDO('mysql:host=localhost;dbname=test;charset=utf8', 'localonly', 'localonly');
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

    $pdo->exec('
        CREATE TEMPORARY TABLE soFoo (
            id int auto_increment,
            val varchar(30),
            primary key(id)
        ) DEFAULT CHARACTER SET utf8
    ');

    $stmt   = $pdo->prepare('INSERT INTO soFoo (val) VALUES (?)');
    $stmt->execute( array($_POST['val']) );
    $stmt = null;

    foreach( $pdo->query('SELECT * FROM soFoo', PDO::FETCH_ASSOC) as $row ) {
        echo 'row: ', join(', ', $row), "<br />\r\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:18:09.143

**您应该尝试使用utf8_general_ci**排序规则的 mysql5 表

# .htaccess - 使用 .htaccess 重写 url 不起作用

> ID：16190296
> 
> 赞同：1
> 
> 时间：2013-04-24T11:02:35.563
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

嗨，我有一个类似的网址：

`http://www.mysite.nl/vakantiehuizen/Denemarken/Bornholm`

我想为 SEO 目的重写它：

`http://www.mysite.nl/vakantiehuizen/denemarken/bornholm`

我已经尝试了所有可能的方法，例如：

```
RewriteMap lc int:tolower    
RewriteCond %{REQUEST_URI} [A-Z]
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

但每次都失败并给出 500 内部服务器错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:10:11.830

您不能`RewriteMap`在 htaccess 文件中声明 a inside。它只能在虚拟主机或服务器配置中声明。您可以在 htaccess 文件中使用其他两行。

# android - 如何处理按钮上的多点触控

> ID：16190306
> 
> 赞同：0
> 
> 时间：2013-04-24T11:03:01.453
> 
> 标签：android, button, click, touch

我正在制作一个示例 android 项目拨号盘，以便如果用户按下任何数字，我必须获取该值，以便如果用户一次按下两个按钮，我如何使用触摸事件获取这两个按钮值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:07:59.760

请参阅[Make Sense of Multitouch](http://android-developers.blogspot.in/2010/06/making-sense-of-multitouch.html)，这是一篇非常好的文章，对我帮助很大。

基本上你需要覆盖你的按钮的onTouch

```
private static final int INVALID_POINTER_ID = -1;

// The ‘active pointer’ is the one currently moving our object.
private int mActivePointerId = INVALID_POINTER_ID;

// Existing code ...

@Override
public boolean onTouchEvent(MotionEvent ev) {
    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = ev.getX();
        final float y = ev.getY();

        mLastTouchX = x;
        mLastTouchY = y;

        // Save the ID of this pointer
        mActivePointerId = ev.getPointerId(0);
        break;
    }

    case MotionEvent.ACTION_MOVE: {
        // Find the index of the active pointer and fetch its position
        final int pointerIndex = ev.findPointerIndex(mActivePointerId);
        final float x = ev.getX(pointerIndex);
        final float y = ev.getY(pointerIndex);

        final float dx = x - mLastTouchX;
        final float dy = y - mLastTouchY;

        mPosX += dx;
        mPosY += dy;

        mLastTouchX = x;
        mLastTouchY = y;

        invalidate();
        break;
    }

    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_POINTER_UP: {
        // Extract the index of the pointer that left the touch sensor
        final int pointerIndex = (action & MotionEvent.ACTION_POINTER_INDEX_MASK) 
                >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = ev.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = ev.getX(newPointerIndex);
            mLastTouchY = ev.getY(newPointerIndex);
            mActivePointerId = ev.getPointerId(newPointerIndex);
        }
        break;
    }
    }

    return true;
} 
```

# windows-8 - 在 winRT 中启动 FtpRequest

> ID：16190311
> 
> 赞同：0
> 
> 时间：2013-04-24T11:03:28.730
> 
> 标签：windows-8, windows-runtime, httpclient, ftp-client

我正在寻找一个示例，描述winrt下的ftprequest从服务器下载/上传文件的过程，我找到了使用webclient的示例，但Winrt不支持，而且HttpClient不支持FTP。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:13:15.700

WinRT 上没有对 FTP 的内置支持。

不过，有很多关于如何做到这一点的例子。这是 MSDN 示例中的一个。我还没有测试过它有多好。

[http://code.msdn.microsoft.com/windowsapps/CSWindowsStoreAppFTPDownloa-88a90bd9/view/SourceCode#content](http://code.msdn.microsoft.com/windowsapps/CSWindowsStoreAppFTPDownloa-88a90bd9/view/SourceCode#content)

# c++ - QString 显示错误

> ID：16190313
> 
> 赞同：1
> 
> 时间：2013-04-24T11:03:38.037
> 
> 标签：c++, qt, qstring

我对 Qt 很陌生，我遇到了一个以前从未见过的问题：当我更新 QLabel 的文本时，QString 的值在分配之前发生了变化。

这是我的代码：

dom.cpp

```
if (noeud.nodeName().toStdString() == "roles"){
            cout << endl << "Value of nbroles: "<< nbroles;
            w.addmsg("" + nbroles);
        } 
```

信息.cpp

```
void info::addmsg(QString str){
    this->txt->setText(this->txt->text() +"\n"+ str);
    this->txt->adjustSize();
    cout << endl << "add : " << str.toStdString();
} 
```

这是我的输出：

```
Value of nbroles : 41
add : 'm not here 
```

> 不在这里

是字符串的一部分，它位于从未调用过的函数中的几行之下。

我不明白，这让我大吃一惊......提前谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:12:39.897

这就是正在发生的事情，我想。您正在传递`"" + nbroles`给期望的函数`QString`。所以`QString::QString(const char*)`构造函数被调用。该构造函数的参数是`"" + nbroles`，它不是空字符串的连接并`nbroles`转换为字符串，而是指向任意内存的一些指针 - 字符串文字的地址按字节`""`递增。`nbroles`

尝试以这种方式调用您的函数：

```
w.addmsg(QString::number(nbroles)); 
```

# c++ - multi_index_container 删除最后一个元素

> ID：16190314
> 
> 赞同：2
> 
> 时间：2013-04-24T11:03:39.303
> 
> 标签：c++, boost

我有以下定义：

```
typedef  boost::multi_index_container<
  boost::shared_ptr<Temp>,
   boost::multi_index::indexed_by<
    boost::multi_index::ordered_non_unique< boost::multi_index::const_mem_fun<Temp, unsigned int, &Temp::getParam> >
    >
  > RequestsContainer; 
```

我需要从此容器中删除（弹出）最后一个元素。我怎样才能做到这一点？reverse_iterator 不能与 erase() 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:34:00.937

使用 'sequenced<>' 索引，您可以获得类似于 'std::list' 的语义，请参阅 boost 中的[codumentation](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/doc/tutorial/basics.html#seq_indices)和[代码示例](http://www.boost.org/doc/libs/1_53_0/libs/multi_index/example/sequenced.cpp)。将您的“typedef”更改为：

```
typedef  boost::multi_index_container<
  boost::shared_ptr<Temp>,
  boost::multi_index::indexed_by<
    boost::multi_index::sequenced<>,
    boost::multi_index::ordered_non_unique<
      boost::multi_index::const_mem_fun<Temp, unsigned int, &Temp::getParam>
    >
  >
> RequestsContainer; 
```

然后，有了“std::list”的附加语义，你得到一个双向迭代器到最后并根据[这个问题](https://stackoverflow.com/questions/2678175/iterator-to-last-element-in-stdlist)递减它，就像这样：

```
RequestsContainer r;
/* ... fill r ... */
assert(!r.empty);
auto iter = r.end(); // from sequenced<>
--iter;              // iter now points to the last element
r.erase(iter);       // pop() 
```

- 编辑 -

如果“last”的语义不是插入顺序，而是ordered_non_unique 索引的顺序，则可以使用'reverse_iterator::base()'，它为下一个元素提供前向'iterator'：

```
RequestsContainer r;
/* ... fill r ... */
auto index = r.get<1>();     // or get<0> if no sequenced<>
auto riter = index.rbegin(); // reverse_iterator
++riter;                     // points previous to last element
auto iter = riter.base();    // points to the last element
r.erase(iter);               // pop() 
```

另请参阅[有关](https://stackoverflow.com/a/2037917/762488)将反向迭代器转换为正向迭代器的答案。

# html - html在网页上保留用户历史记录

> ID：16190316
> 
> 赞同：0
> 
> 时间：2013-04-24T11:03:47.567
> 
> 标签：html, css, browser-history

在我访问过的几个网页上，我以前访问过的迹象很明显，即已经访问过的链接。我需要什么 html 代码在我正在构建的页面中实现此功能？还是仅取决于历史设置？谢谢。戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:06:08.097

您可以使用各种解决方案。例如 javascript/php 中的 cookie。或者，如果您只想知道该用户访问了一个链接，您可以使用 :visited 例如

```
a {color:black;}
a:visited { color: green;}
<a href="#" >link</link> 
```

那么如果用户访问了链接，它将是绿色的，如果他没有访问，那么它将是黑色的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:06:40.693

您的浏览器知道您访问了哪些页面。你不需要做任何特别的事情。

如果要设置访问页面的链接样式，请使用 CSS，如下所示：

```
a:visited {
    /* your styles*/
} 
```

因此，例如，如果您希望链接在正常情况下为蓝色和粗体，但在被访问时为灰色而不是粗体，您可以执行以下操作：

```
a {
    color: blue;
    font-weight: bold;
}
a:visited {
    color: gray;
    font-weight: normal;
} 
```

**编辑：**

我最初没有包括这个，因为我认为它很明显，但你确实特别询问了 html。因此，为了完整起见，链接的 html 为：

```
<a href="<!-- the target of your link -->">Link text</a> 
```

因此，指向 Stack Overflow 的链接是：

```
<a href="http://www.stackoverflow.com">Stack Overflow</a> 
```

您可能需要查看[HTML / CSS 教程](http://learn.shayhowe.com/html-css/)以获得更多帮助。

# c++ - 禁用/启用 QCheckBox 文本

> ID：16190317
> 
> 赞同：0
> 
> 时间：2013-04-24T11:03:47.330
> 
> 标签：c++, qt, qt4, qcheckbox

我正在开发一个示例应用程序，我需要在未选中复选框时禁用复选框的文本并在选中时启用它。

代码：

```
if(ui->checkBox->isChecked() == true)
{
   // Enable the text of the checkbox
}

else
{
   // Disable the text of the checkbox      
} 
```

我浏览了各种文章，但没有找到正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:13:37.650

使用[样式表](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qcheckbox)

对于您的所有小部件：

```
ui->setStyleSheet(
"QCheckBox:checked {
     {color: black;}
 }
 QCheckBox:unchecked {
     {color: grey;}
 }"
) 
```

编辑：

如评论中所述，要使其与自定义主题一起使用，您可以使样式查询[调色板](http://qt-project.org/doc/qt-4.8/qapplication.html#palette)：

```
QPalette my_palette = ui->palette()
QColor my_active_color = my_palette.color(QPalette::Active, QPalette::Text);
QColor my_disabled_color = my_palette.color(QPalette::Disabled, QPalette::Text);

QString my_style =
 QString("QCheckBox:checked { {color: rgb(%1, %2, %3);} } "     
"QCheckBox:unchecked { {color: rgb(%4, %5, %6);}}")
.arg( my_active_color.red())
.arg( my_active_color.green())
.arg( my_active_color.blue() )
.arg( my_disabled_color.red())
.arg( my_disabled_color.green())
.arg( my_disabled_color.blue() );

ui->setStyleSheet(my_style); 
```

请注意，我没有尝试过，它可能有任何错字，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:27:49.720

我得到了解决方案。这就是我实现它的方式：

```
ui->checkBox->setStyleSheet( "QCheckBox:checked{color: black;} QCheckBox:unchecked{color: grey;}"); 
```

# mysql - 在 phpMyAdmin 导出/导入后 BIT 列全为“1”

> ID：16190321
> 
> 赞同：1
> 
> 时间：2013-04-24T11:04:04.093
> 
> 标签：mysql, phpmyadmin, bit

我必须使用 phpMyAdmin 从 MySQL 数据库中导入数据。

我已经使用 phpMyAdmin 从本地机器导出了我的数据库。之后，我将脚本文件导入到我的主机。BIT 类型的列中的所有数据都更改为“1”。托管数据库版本为 5.5.27。

是 phpMyAdmin 问题，还是 MySQL 版本问题？我怎样才能解决这个问题？

导出时请在数据库内容下方查找

```
`-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Apr 24, 2013 at 12:50 PM
-- Server version: 5.5.27
-- PHP Version: 5.4.7

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `test`
--

-- --------------------------------------------------------

--
-- Table structure for table `bitTest`
--

CREATE TABLE IF NOT EXISTS `bitTest` (
  `textName` varchar(5) NOT NULL,
  `bitValue` bit(1) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `bitTest`
--

INSERT INTO `bitTest` (`textName`, `bitValue`) VALUES
('False', '0'),
('True', '1');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;` 
```

# hover - 剑道分离器：悬停事件

> ID：16190325
> 
> 赞同：0
> 
> 时间：2013-04-24T11:04:10.957
> 
> 标签：hover, kendo-ui, splitter

我想`hover`在 kendo-ui 拆分器的事件中运行代码。
拆分器的事件列表不包含`hover`、`mouseenter`或`leave`任何此类。

有人知道如何实现它吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:33:08.187

这取决于你想要达到的目标......

如果你只是想观察拆分条的移动，只需手动将相应的事件绑定到此条：

```
$(".k-splitbar").on("mousemove", yourHandler); 
```

# php - MySQL 使用 CONCAT() 更新日志 IP 地址的问题

> ID：16190326
> 
> 赞同：0
> 
> 时间：2013-04-24T11:04:14.293
> 
> 标签：php, mysql

我正在创建简单的星级评分系统，现在一切正常，但是当涉及到更新 IP 地址时，它现在让我很痛苦..

我已经使用这个查询创建了表

```
return 'CREATE TABLE star_ratings ('.
    'id INT (11) NOT NULL AUTO_INCREMENT PRIMARY KEY,'.
    'post_id INT (11),'.
    'rating FLOAT (11) DEFAULT 0,'.
    'total_rating FLOAT (11) DEFAULT 0,'.
    'total_rates INT (11) DEFAULT 0,'.
    'ipaddress LONGTEXT'.
'); 
```

检查图像中的 IP 地址列

![在此处输入图像描述](https://i.stack.imgur.com/sTUD7.jpg)

现在尝试使用更新它，`CONCAT()`但它没有增加任何价值。并在我尝试更新而`CONCAT()`不是更新值时进行调试。我只是想知道这不起作用以及我错在哪里。

如果您在`ipaddress`专栏中注意到其他事情，我会变得很奇怪`ipaddress` `::1`，而不是类似`127.1.1.1`

这是我的更新查询

```
UPDATE star_ratings 
SET rating = '$rating', 
total_rating = '$total_rating', 
total_rates = '$total_rates', 
ipaddress = CONCAT(ipaddress, ',$ipaddress')

WHERE post_id = '$post_id' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:12:36.900

在 windows7 localhost 解析为`::1`（您可以尝试在 cmd 中执行 ping 操作）。如果您访问您的页面，请重`localhost/somepage.php`试`127.0.0.1/somepage.php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:26:28.427

当字段为空时，更新何时附加 ipaddress 可能会失败，在这种情况下......

```
UPDATE star_ratings 
SET rating = '$rating', 
total_rating = '$total_rating', 
total_rates = '$total_rates', 
ipaddress = CONCAT(ifnull(ipaddress,''), ',$ipaddress') 
```

如果任何部分为空（空传播）， concat 将返回空，因此以下将产生空

```
select concat(null, 'hello') 
```

ifnull [() 函数](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)将用第二个参数替换空的第一个参数

```
select ifnull(null,'hello') => 'hello' 
```

和

```
select ifnull('hi','hello') => 'hi' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:13:16.787

使用函数`CONCAT_WS(' ',field1,field2)`代替`CONCAT()`..

# javascript - javascript函数制作动画div css

> ID：16190333
> 
> 赞同：0
> 
> 时间：2013-04-24T11:04:36.357
> 
> 标签：javascript, html, css

我试图制作一个 div 动画`onmouseover`，但它不起作用

这是我`.style.animation`用于 Internet Explorer 和 Firefox 以及`.style.webkitanimation`chrome 的 javascript：

```
function emailhelp() { 

  document.getElementById('help-text').innerHTML = 'Enter you&acute;re email';
  document.getElementById('help-box').style.animation ='myfirst 5s;';
  document.getElementById('help-box').style.webkitanimation ='myfirst 5s;';

} 
```

这是CSS：

```
@keyframes myfirst
{
  from {background-color:#00304c;}
  to {background-color:yellow;}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
  from {background-color:#00304c;}
  to {background-color:yellow;}
}
#help-box {
 position: fixed;
 top: 82px;
 left: 50%;
 margin-left: 289px;
 font-size: 12px;
 background-color: #00304c;
 height: 32px;
 width: 250px;
 line-height: 32px;
 padding-left: 10px;
 margin-right: 0px;
 text-align:center;
} 
```

这是我的 HTML：

```
<input class="user-input" name="" type="text" value="email" onmouseover="emailhelp()" onmouseout="helphide()" onfocus="if(this.value == 'email') { this.value = ''; }" onblur="if(this.value == '') { this.value = 'email'; }" onmouseover="emailhelp()" onmouseout="helphide()" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:20:10.680

您需要大写该属性（至少对于 webkit）：

```
document.getElementById('help-box').style.WebkitAnimation ='myfirst 5s'; 
```

对于 FF，您的代码应该没问题：

```
document.getElementById('help-box').style.animation ='myfirst 5s'; 
```

**这是一个演示：http: [//jsfiddle.net/E4vSx/](http://jsfiddle.net/E4vSx/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:28:45.933

在您选择另一个答案之前，这是我为您服务的地方。

使用内联 javascript 被认为是不好的做法。

```
<input class="user-input" name="" type="text" value="email" />
<div id="help-box">
    <div id="help-text"></div>
</div>

var input = document.getElementsByClassName("user-input")[0];
var helpBox = document.getElementById("help-box");
var helptext = document.getElementById("help-text");

helpBox.style.visibility = "hidden";

function emailhelp() {
    helpBox.style.visibility = "visible";

    helptext.textContent = "Enter your email";

    helptext.style.WebkitAnimation = "myfirst 5s";
    helptext.style.animation = "myfirst 5s";
}

function helphide() {
    helpBox.style.visibility = "hidden";
}

function focus(evt) {
    if (evt.target.value === "email") {
        evt.target.value = "";
    }
}

function blur(evt) {
    if (evt.target.value === "") {
        evt.target.value = "email";
    }
}

input.addEventListener("mouseover", emailhelp, false);
input.addEventListener("mouseout", helphide, false);
input.addEventListener("focus", focus, false);
input.addEventListener("blur", blur, false); 
```

在[jsfiddle上](http://jsfiddle.net/Xotic750/jtAKa/)

# jquery - 如何使用 JQuery 触发新的 twitter 小部件

> ID：16190334
> 
> 赞同：0
> 
> 时间：2013-04-24T11:04:37.617
> 
> 标签：jquery, twitter, widget

当通过 ajax 加载内容时，新的 twitter 小部件不会触发，我为旧的小部件`$.getScript`找到了一个解决方案，但到目前为止找不到新的小部件的解决方案（脚本从`<a>`标签中获取变量并通过构建iFrame 中的内容，而旧的仅使用 js 变量）。有没有人有任何想法或解决方案？

非常感谢

贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:25:41.340

好的，所以我是个傻瓜......我想多了：-/它只需要以下内容：

```
$.getScript('http://platform.twitter.com/widgets.js') 
```

# c# - 添加额外属性的自定义 XML 序列化

> ID：16190339
> 
> 赞同：4
> 
> 时间：2013-04-24T11:04:53.273
> 
> 标签：c#, xml, serialization

我有以下课程。

```
public class ConfigurationItem
{
    public String Type { get; set; }
    public String Value { get; set; }
} 
```

此代码执行序列化。

```
static void Main(string[] args)
{
    List<ConfigurationItem> cis = new List<ConfigurationItem>();
    cis.Add(new ConfigurationItem() { Type = "Car", Value = "Car Value" });
    cis.Add(new ConfigurationItem() { Type = "Bike", Value = "Bike Value" });

    System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(cis.GetType());
    x.Serialize(Console.Out, cis);
} 
```

实际输出如下。

```
<?xml version="1.0" encoding="IBM437"?>
<ArrayOfConfigurationItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ConfigurationItem>
        <Type>Car</Type>
        <Value>Car Value</Value>
    </ConfigurationItem>
    <ConfigurationItem>
        <Type>Bike</Type>
        <Value>Bike Value</Value>        
    </ConfigurationItem>
</ArrayOfConfigurationItem> 
```

我想生成以下 XML。

```
<?xml version="1.0" encoding="IBM437"?>
<ArrayOfConfigurationItem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ConfigurationItem>
        <Type>Car</Type>
        <Value Label="Car Label">Car Value</Value>
    </ConfigurationItem>
    <ConfigurationItem>
        <Type>Bike</Type>
        <Value Label="Bike Label">Bike Value</Value>        
    </ConfigurationItem>
</ArrayOfConfigurationItem> 
```

我有以下类型到可用的标签映射表

```
Dictionary<String, String> ValueLabels = new Dictionary<string, string>()
{
    {"Car","Car Label"},
    {"Bike","Bike Label"}
}; 
```

我无法触摸 ConfigurationItem 类。是否可以使用 System.Xml.Serialization.XmlAttributeOverrides 或类似的东西？

**编辑 1** 我现在正在使用一个丑陋的解决方案。我正在使用正常的序列化并手动将数据添加到 XmlDocument。

```
static void Main(string[] args)
{
    List<ConfigurationItem> cis = new List<ConfigurationItem>();
    cis.Add(new ConfigurationItem(){Type = "Car", Value = "Car Value"});
    cis.Add(new ConfigurationItem(){Type = "Bike", Value = "Bike Value"});

    Dictionary<String, String> valueLabels = new Dictionary<string, string>()
    {
        {"Car","Car Label"},
        {"Bike","Bike Label"}
    };

    var detailDocument = new System.Xml.XmlDocument();
    var nav = detailDocument.CreateNavigator();

    if (nav != null)
    {
        using (System.Xml.XmlWriter w = nav.AppendChild())
        {
            var ser = new System.Xml.Serialization.XmlSerializer(cis.GetType());
            ser.Serialize(w, cis);
        }
    }
    var nodeList = detailDocument.DocumentElement.SelectNodes("//ConfigurationItem");
    foreach (System.Xml.XmlNode node in nodeList)
    {
        String type = ((System.Xml.XmlElement)node.SelectNodes("Type")[0]).InnerText;
        ((System.Xml.XmlElement)node.SelectNodes("Value")[0]).SetAttribute("Label", valueLabels[type]);
    }

    System.Xml.XmlTextWriter writer = new System.Xml.XmlTextWriter(Console.Out);
    writer.Formatting = System.Xml.Formatting.Indented;
    detailDocument.WriteTo(writer);            

    Console.ReadLine();
} 
```

仍在寻找更好的解决方案...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T19:25:58.427

如果要输出属性，则需要一个将序列化为属性的属性。尝试以下操作：

```
public class ConfigurationItem
{
    public String Type { get; set; }
    public String Value { get; set; }
    [XmlAttribute("Label")]
    public string Label
    {
        get {return Value;}
        set {Value = value;}
    }
} 
```

# jquery - 使用 jquery 基于关键字对 HTML 行进行排序

> ID：16190341
> 
> 赞同：3
> 
> 时间：2013-04-24T11:04:57.917
> 
> 标签：jquery

我需要使用特定关键字对 HTML 表进行排序。例如，使用 jQuery 对“AX”、“BY”、“CZ”、“DQ”进行排序。我的表包含多行，其中一个单元格包含上述值

```
 <table>
 <tr><td>Test1</td><td>BY</td></tr>
 <tr><td>Test2</td><td>AX</td></tr>
 <tr><td>Test3</td><td>DQ</td></tr>
 <tr><td>Test4</td><td>AX</td></tr>
 <tr><td>Test5</td><td>DQ</td></tr>
 <tr><td>Test6</td><td>CZ</td></tr>
 <tr><td>Test7</td><td>CZ</td></tr>
 <tr><td>Test8</td><td>AX</td></tr>
 </table> 
```

表应重新排列如下：

```
 <table>
 <tr><td>Test8</td><td>AX</td></tr>
 <tr><td>Test2</td><td>AX</td></tr>
 <tr><td>Test4</td><td>AX</td></tr>
 <tr><td>Test1</td><td>BY</td></tr>
 <tr><td>Test6</td><td>CZ</td></tr>
 <tr><td>Test7</td><td>CZ</td></tr>
 <tr><td>Test3</td><td>DQ</td></tr>
 <tr><td>Test5</td><td>DQ</td></tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:11:14.220

您可以使用`sort`方法：

```
$('table tr').sort(function(a, b) {
    return $('td:eq(1)', a).text() > $('td:eq(1)', b).text();
}).appendTo('tbody'); 
```

[http://jsfiddle.net/NrUCw/](http://jsfiddle.net/NrUCw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:27:50.650

给你的桌子一个 id 是明智的：

```
<table id="mytable"> 
```

然后您可以像使用谓词函数对 javascript 数组进行排序一样对元素进行排序：

**Javascript**

```
var keywordWeights = { "AX": 0, "BY": 1, "CZ": 2, "DQ": 3 };

$(function() {
    $("#mytable tr").sort(function(a, b) {
        var tagA = $("td:nth-child(2)", a).html();
        var tagB = $("td:nth-child(2)", b).html();
        weightA = tagA in keywordWeights ? keywordWeights[tagA] : Number.MAX_VALUE;
        weightB = tagB in keywordWeights ? keywordWeights[tagB] : Number.MAX_VALUE;
        return weightA - weightB;
    }).appendTo("tbody");
}); 
```

[看到这个 jsFiddle](http://jsfiddle.net/DZYeq/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:08:51.447

```
$('TABLE > TBODY > TR > TD:nth-child(1)').each(function () {
    var cellText = $.trim($(this).text());
    var row = $(this).closest("TR");
    switch (cellText) {
        case AX:
            SetPriority(row, 0);
            break;
        case BY:
            SetPriority(row, 1);
            break;
        case CZ:
            SetPriority(row, 2);
            break;
        case DQ:
            SetPriority(row, 3);
            break;
        default:
            SetPriority(row, 4);
            break
    }
});

function SetPriority(row, priority) {
    row.attr("RowIndex", priority);
}

var $table = $('TABLE');
var rows = $table.find('tr').get();

rows.sort(function (a, b) {
    var keyA = $(a).attr('RowIndex');
    var keyB = $(b).attr('RowIndex');
    if (keyA < keyB) return -1;
    if (keyA > keyB) return 1;
    return 0;
});

$.each(rows, function (index, row) {
    $table.children('tbody').append(row);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:08:57.570

如果您想允许用户进行排序、过滤等，也许您应该考虑使用数据表，它将为您节省大量时间：[http](http://www.datatables.net/) ://www.datatables.net/ :)

# django - 添加一个注释对象作为虚拟字段以获取序列化

> ID：16190349
> 
> 赞同：3
> 
> 时间：2013-04-24T11:05:28.237
> 
> 标签：django, django-models, django-orm

**楷模**

```
class Category(models.Model):
    name = models.CharField()

class Element(models.Model):
   name = models.CharField()
   categories = models.ManyToManyField(Category) 
```

**注释代码**

```
>>> from django.db.models import Count
>>> q = Category.objects.all().annotate(element_count = Count('element'))

>>> print q[0].element_count
223 
```

我想用 django 默认的 json 序列化程序对其进行序列化，但它只需要字段

如何将注释结果作为虚拟字段添加到查询集中的字段列表中。它看起来像一个字段，我可以作为一个字段使用 [https://docs.djangoproject.com/en/dev/topics/serialization/](https://docs.djangoproject.com/en/dev/topics/serialization/)有 什么想法吗？

谢谢

# android - Android 动画 - applytransformation - 在 Z 轴上进行相机平移一半的时间

> ID：16190352
> 
> 赞同：0
> 
> 时间：2013-04-24T11:05:30.860
> 
> 标签：android, animation, rotation, cube, depth

我试图使用平移和旋转来制作旋转立方体。我正在使用 Google 示例中提供的名为 Rotate3dAnimation.java 的类。旋转效果很好，我正在努力在立方体上制作深度错觉，同时旋转使其离屏幕越来越近。
为此，我正在修改方法`applyTransformation(float interpolatedTime, Transformation t)`，但问题是，立方体的面（旋转时隐藏的面）必须在前半部分进一步移动，在后半部分再次靠近。

恢复：

```
Camera.translate(float x, float y, float z) 
```

z 平移应该在前半部分减少并在后半部分增加。

这是我正在使用的代码：

```
@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    final float fromDegrees = mFromDegrees;
    float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

    final float centerX = mCenterX;
    final float centerY = mCenterY;
    final String orientation = mOrientation;
    final Camera camera = mCamera;

    final Matrix matrix = t.getMatrix();
    camera.save();
    float midTime = getDuration()/2;
    if (mReverse) {
      camera.translate(0.0f, 0.0f, (interpolatedTime<midTime)? 
           (mDepthZ * interpolatedTime): (mDepthZ * (1.0f - interpolatedTime)));

    } else {

      camera.translate(0.0f, 0.0f, (interpolatedTime<midTime)? 
           (mDepthZ * (1.0f - interpolatedTime)): (mDepthZ * interpolatedTime));

    }
    if(orientation.equals("horizontal"))
        camera.rotateY(degrees);
    else
        camera.rotateX(degrees);
    camera.getMatrix(matrix);
    camera.restore();

    matrix.preTranslate(-centerX, -centerY);
    matrix.postTranslate(centerX, centerY);
} 
```

但我认为这不是很好......有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T22:17:58.220

我实际上遇到了同样的问题，经过一些调试后，我意识到 interpolatedTime 并不是我（我猜你）预期的那样以毫秒为单位。这很好，因此您实际上不必计算 midTime 到底是什么，您只需要知道插值的进度即可。

要检查您是否已完成动画的一半，只需使用

`(interpolatedTime < .5)`

在你的三元陈述中。

# asp.net - PayPal 集成 - 推荐哪些选项

> ID：16190358
> 
> 赞同：0
> 
> 时间：2013-04-24T11:05:55.873
> 
> 标签：asp.net, paypal, asp.net-4.5

我们有一个包含产品目录的 ASP.NET 网站。我们现在被要求添加购物车和支付功能。但是，由于这是一个试用版，它需要是免费的（在合理的范围内）并且没有安装 SSL 证书。

所以我们求助于 PayPal 作为解决方案，但在我们消化手册之前，这是一个好方法吗？

1.  可以将篮子中的一组项目（在 ASP.NET 中）推入 PayPal 自己托管的支付页面吗？这对我们来说是最简单的，因为我们可以轻松地在 ASP.NET 站点中创建购物篮和内容
2.  有没有办法（使用 API 或其他方式）“添加到购物车”而不将购物者重定向到 PayPal，然后再次返回我们的网站？
3.  有没有我们错过的更好的方法？！？

所有建议都将被投票 - 在我们开始任何工作之前，这对我们来说是一个事实调查之旅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:15:05.757

> 没有安装 SSL 证书

您必须获得 SSL 证书才能对支付网关进行任何操作。

> 可以将篮子中的一组项目（在 ASP.NET 中）推入 PayPal 自己托管的支付页面吗？

是的他们可以。

> 这对我们来说是最简单的，因为我们可以轻松地在 ASP.NET 站点中创建购物篮和内容

您仍然需要以 PayPal 友好的方式排列数据。

> 有没有办法（使用 API 或其他方式）“添加到购物车”而不将购物者重定向到 PayPal，然后再次返回我们的网站？

是的，但是这会花费更多，并且集成会涉及更多。

> 有没有我们错过的更好的方法？！？

取决于需要什么。一个简单或半专业的商店可以重定向到 PayPal，但一个大型或专业的商店应该有集成支付以及 PayPal 选项。集成支付选项不需要是 PayPal。

在选择您的支付网关时，请考虑货币、退款、取消、文档和客户服务质量。

# html - WCAG 2.0：技术 H65 和隐藏表单控件

> ID：16190359
> 
> 赞同：1
> 
> 时间：2013-04-24T11:05:59.877
> 
> 标签：html, accessibility, wcag

即使我有一个隐藏的表单控件，也应该使用[H65](http://www.w3.org/TR/2008/WD-WCAG20-TECHS-20081103/H65)技术？例如：

1) 输入类型="隐藏"

2）被css隐藏的输入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:40:39.277

1.  它不是交互式控件，所以没有。
2.  这取决于上下文。
    *   如果它总是隐藏的，为什么它用 CSS 隐藏而不是被隐藏`type=hidden`？
    *   如果它在某些时候被隐藏，那么它与任何其他控件没有什么不同，`<label>`如果可以的话，你应该使用 a。隐藏控件时可以隐藏标签。H65 是当设计师不能被说服产生一个可访问的设计时的最后手段。如果您应该使用 a`<label>`但不允许修复设计，请使用它。

# html - 推荐的http响应大小

> ID：16190363
> 
> 赞同：0
> 
> 时间：2013-04-24T11:06:22.653
> 
> 标签：html, json

我正在编写一种社交网络应用程序，并为一个特定的决定而苦苦挣扎。对于地图上的标记，我有相当大的 json 结构（至少 300KB），我想知道是否可以将其呈现为 html 或者我是否应该使用 ajax 来分段提供它。关于推荐的响应大小是否有任何经验法则（什么可以，什么已经不行）？因为另一方面，ajax 解决方案更复杂，并且增加了对我的服务器的请求数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:17:38.493

在您的情况下，最重要的可能是感知性能（网站对用户的感觉有多快）。

我无法提供关于文件大小的经验法则，但我可以告诉您，如果页面加载时间似乎超过 500 毫秒，您的普通用户会感到不耐烦。

最好快速加载某些内容（即您的地图），然后使用 ajax 请求逐步添加您的作品（地理标记）。当用户观看时，页面上“加载”的事物的感知性能的改善将超过对服务器进行多次调用导致的实际性能下降。否则，您的用户将盯着空白屏幕一秒钟左右，以便加载整个 html 文件。

# c# - 向下滚动时面板会丢失内容

> ID：16190366
> 
> 赞同：2
> 
> 时间：2013-04-24T11:06:41.343
> 
> 标签：c#, winforms, scroll, panel, paint

我在一个较大的面板中有 2 个面板。2 个内部面板自动调整大小，外部面板自动滚动，以便我可以一起向下滚动 2 个面板的内容。

我使用paint事件在我的右侧面板上绘制网格线，并且两者都有标签控件。

这一切都很好（也可以调整大小和响应）但是当我向下滚动时会发生一些奇怪的事情。

**因此，假设我将滚动条位于顶部时看到的内容称为初始状态。然后，当我向下滚动并且看不到任何初始状态并且我调整大小/最小化/刷新...时，我的右侧面板（带有网格线和标签）变灰，一切都消失了。**

**只有当我再次向上滚动并到达初始状态的底部时，标签和图形才会返回。**

我知道这可能很难理解，但如果您认为您可以提供帮助，请随时要求澄清。

![初始状态](https://i.stack.imgur.com/rG2AA.png) 初始状态

![向下滚动并调整大小/最小化后 - 恢复...](https://i.stack.imgur.com/mG6LD.png) 向下滚动并调整大小/最小化后 - 恢复...

![当我到达初始状态的东西时，一切都会再次出现](https://i.stack.imgur.com/5T0Qd.png)

当我到达初始状态的东西时，一切都会再次出现

右侧面板的绘制事件（虽然我怀疑它会有多大用处）

```
private void panelPlanning_Paint(object sender, PaintEventArgs e)
    {
        for (int i = 0; i <= sub.Days + 1; i++)
        {
            if (toolStripButtonGrid.CheckState == CheckState.Checked)
            {
                if (vertGrid)
                {
                    if (dashedVert)
                    {
                        Pen blackPen = new Pen(Color.FromArgb(50, 0, 0, 0), 1);
                        blackPen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dash;

                        e.Graphics.DrawLine(blackPen, i * labelDaysWidth, 0, i * labelDaysWidth, panelPlanning.Height);
                    }
                    else
                    {
                        Pen blackPen = new Pen(Color.FromArgb(50, 0, 0, 0), 1);
                        e.Graphics.DrawLine(blackPen, i * labelDaysWidth, 0, i * labelDaysWidth, panelPlanning.Height);
                    }
                }
            }
        }

        for (int i = 0; i < userList.Count; i++)
        {
            if (horGrid && toolStripButtonGrid.CheckState == CheckState.Checked)
            {
                if (dashedHor)
                {
                    Pen blackPen = new Pen(Color.FromArgb(50, 0, 0, 0), 1);
                    blackPen.DashStyle = System.Drawing.Drawing2D.DashStyle.Dash;

                    e.Graphics.DrawLine(blackPen, 0, i * userHeight, panelPlanning.Width, i * userHeight);
                }
                else
                {
                    Pen blackPen = new Pen(Color.FromArgb(50, 0, 0, 0), 1);
                    e.Graphics.DrawLine(blackPen, 0, i * userHeight, panelPlanning.Width, i * userHeight);
                }
            }
        }

        for (int i = 0; i <= sub.Days + 1; i++)
        {
            if (dtPickerStart.Value.AddDays(i) == DateTime.Today)
            {
                Pen blackpen = new Pen(Color.Black, 3);
                e.Graphics.DrawLine(blackpen, i * labelDaysWidth + labelDaysWidth / 2, 0, i * labelDaysWidth + labelDaysWidth / 2, panelPlanning.Height);
            }
        }

        if (userList.Count > 0)
        {
            panelPlanning.Height = userList.Count * userHeight;
            panelUsers.Height = userList.Count * userHeight;
        }
        if (nrResources == 0)
        {
            nrResources = 10;
        }
        userHeight = panel1.Height / nrResources;
    } 
```

**编辑**

[https://www.dropbox.com/sh/p4k9zilmy5pq6ev/RpBEe05B3j](https://www.dropbox.com/sh/p4k9zilmy5pq6ev/RpBEe05B3j)

解决方案的简化版本给出了同样的问题。

**编辑 2**

我已经能够解决大部分问题。下面是我更改的一些代码（要查看我更改的内容，您可以查看上面的 Dropbox 链接进行比较。

```
private void this_beginResize(object sender, EventArgs e)
{
    this.ResizeBegin -= new EventHandler(this_beginResize);

    panelPlanning.Paint -= new PaintEventHandler(panelPlanning_Paint);

    this.SuspendLayout();
    SuspendDrawing(panelTimeline);
    SuspendDrawing(panelPipeLine);
    SuspendDrawing(panel1);
} 
```

我曾经删除 ResizeEnd 事件并稍后再次添加它。我将其更改为 ResizeBegin，因为这对我来说更有意义。

```
private void this_SizeChanged(object sender, EventArgs e)
{
    panelTimeline.Controls.Clear();
    sub = dtPickerEnd.Value - dtPickerStart.Value;
    addDayLabels(sub);

    panelUsers.Controls.Clear();
    addUserLabels();

    panelPlanning.Paint += new PaintEventHandler(panelPlanning_Paint);

    ResumeDrawing(panel1);
    ResumeDrawing(panelTimeline);
    ResumeDrawing(panelPipeLine);
    this.ResumeLayout();

    if (userList.Count > 0)
    {
        panelPlanning.Height = userList.Count * userHeight;
        panelUsers.Height = userList.Count * userHeight;
    }
    if (nrResources == 0)
    {
        nrResources = 10;
    }
    userHeight = panel1.Height / nrResources;
    lastPanelHeight = panel1.Height;

    panelPlanning.Controls.Clear();
    addPlanning();

    this.ResizeBegin += new EventHandler(this_beginResize);
} 
```

当调整大小结束时，我曾经将规划面板设置为容器面板的高度。这可能是我向下滚动时内容丢失的主要原因。我用我的绘画事件中的代码替换了它来计算高度。我还分配了一个变量 lastPanelHeight 来跟踪下面方法的面板高度。最大化和恢复事件在它们实际执行之前在这里被调用，所以我需要知道它们必须恢复到什么。

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == 0x0112) // WM_SYSCOMMAND
    {
        // Check your window state here
        if (m.WParam == new IntPtr(0xF030) || m.WParam == new IntPtr(0xF120)) // Maximize event - SC_MAXIMIZE from Winuser.h
        {
            //Same code as the two above combined but with lastPanelHeight as value to do the calculations with
        }
    }
    base.WndProc(ref m);
} 
```

**但是**，我仍然遇到问题。当我调整大小并且表单变大或从最大化或最小化状态恢复窗口时，滚动条会以一种奇怪的方式运行。当它一直向下并且表格变大时，它在面板中保持相同的高度，从而向上移动。在恢复时，滚动条总是回到顶部。 *有任何想法吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T09:16:02.530

经过初步改进（参见问题 EDIT2），我专注于滚动条，并在一段时间后让它工作。诀窍是在调整大小之前跟踪滚动条值和面板高度，并在调整大小后使用新高度计算它。滚动位置是这样设置的，但滚动条仍会显示在另一个位置。这可以通过启用和禁用滚动条来解决。完整的代码（请注意也有最大化和恢复的代码）。

```
/// The beginning of a form resize
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void this_beginResize(object sender, EventArgs e)
{
    lastLocation = this.Location;
    this.ResizeBegin -= new EventHandler(this_beginResize);

    panelPlanning.Paint -= new PaintEventHandler(panelPlanning_Paint);
    scrollvalue = panel1.VerticalScroll.Value;
    lastHeight = panel1.Height;

    this.SuspendLayout();
    SuspendDrawing(panelTimeline);
    SuspendDrawing(panelPipeLine);
    SuspendDrawing(panel1);
}

/// <summary>
/// Called when the form is done resizing
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void this_SizeChanged(object sender, EventArgs e)
{
    if (this.Location != lastLocation)
    {
        lastLocation = this.Location;
        return;
    }

    panelTimeline.Controls.Clear();
    sub = dtPickerEnd.Value - dtPickerStart.Value;
    addDayLabels(sub);

    panelUsers.Controls.Clear();
    addUserLabels();

    panelPlanning.Paint += new PaintEventHandler(panelPlanning_Paint);

    ResumeDrawing(panel1);
    ResumeDrawing(panelTimeline);
    ResumeDrawing(panelPipeLine);
    this.ResumeLayout();

    if (userList.Count > 0)
    {
        panelPlanning.Height = userList.Count * userHeight;
        panelUsers.Height = userList.Count * userHeight;
    }
    if (nrResources == 0)
    {
        nrResources = 10;
    }
    userHeight = panel1.Height / nrResources;

    panel1.VerticalScroll.Value = scrollvalue * panel1.Height / lastHeight;
    panel1.VerticalScroll.Enabled = false;

    panelPlanning.Controls.Clear();
    addPlanning();

    this.ResizeBegin += new EventHandler(this_beginResize);

    panel1.VerticalScroll.Enabled = true;
    panel1.VerticalScroll.Value = scrollvalue * panel1.Height / lastHeight;
}

/// <summary>
/// Handles maximize and restore
/// </summary>
/// <param name="m"></param>
protected override void WndProc(ref Message m)
{
    if (m.Msg == 0x0112) // WM_SYSCOMMAND
    {
        // Check your window state here
        if (m.WParam == new IntPtr(0xF030) || m.WParam == new IntPtr(0xF120)) // Maximize event - SC_MAXIMIZE from Winuser.h
        {
            this.ResizeBegin -= new EventHandler(this_beginResize);

            panelPlanning.Paint -= new PaintEventHandler(panelPlanning_Paint);
            scrollvalue = panel1.VerticalScroll.Value;

            if (panel1.Height != 0)
            {
                lastHeight = panel1.Height;
            }

            this.SuspendLayout();
            SuspendDrawing(panelTimeline);
            SuspendDrawing(panelPipeLine);
            SuspendDrawing(panel1);

            panel1.VerticalScroll.Enabled = false;
        }
    }

    base.WndProc(ref m);

    if (m.Msg == 0x0112) // WM_SYSCOMMAND
    {
        // Check your window state here
        if (m.WParam == new IntPtr(0xF030) || m.WParam == new IntPtr(0xF120)) // Maximize event - SC_MAXIMIZE from Winuser.h
        {
            panelTimeline.Controls.Clear();
            sub = dtPickerEnd.Value - dtPickerStart.Value;
            addDayLabels(sub);

            panelUsers.Controls.Clear();
            addUserLabels();

            panelPlanning.Paint += new PaintEventHandler(panelPlanning_Paint);

            ResumeDrawing(panel1);
            ResumeDrawing(panelTimeline);
            ResumeDrawing(panelPipeLine);
            this.ResumeLayout();

            if (userList.Count > 0)
            {
                panelPlanning.Height = userList.Count * userHeight;
                panelUsers.Height = userList.Count * userHeight;
            }
            if (nrResources == 0)
            {
                nrResources = 10;
            }
            userHeight = panel1.Height / nrResources;

            panel1.VerticalScroll.Value = scrollvalue * panel1.Height / lastHeight;
            panel1.VerticalScroll.Enabled = false;

            panelPlanning.Controls.Clear();
            addPlanning();

            this.ResizeBegin += new EventHandler(this_beginResize);

            panel1.VerticalScroll.Enabled = true;
            panel1.VerticalScroll.Value = scrollvalue * panel1.Height / lastHeight;
        }
    }
} 
```

# ruby-on-rails - Rails RABL 将集合显示为对象和此对象中的子对象

> ID：16190371
> 
> 赞同：1
> 
> 时间：2013-04-24T11:06:54.947
> 
> 标签：ruby-on-rails, json, rabl

我有这样的 index.rabl：

```
collection @exchangers, :root => "bank", :object_root => false

extends "exchanger_lists/show" 
```

和这样的show.rabl：

```
object @exchanger
attributes :id, :name, :address, :location_id, :latitude, :longitude, :exchanger_type_id
node(:location_name) {|exchanger_list| exchanger_list.location.name }
node(:exchanger_type_name) {"normal" }
child @currencies do
      attribute :value, :direction_of_exchange_id, :exchanger_list_id
end 
```

我的控制器是这样的：

```
def index
    @exchangers = ExchangerList.all
  end
 def show
    @exchanger = ExchangerList.find(params[:id])
    @currency_list = CurrencyList.all
    @currencies = []
    @currency_list.each do |c|
      @currencies << CurrencyValue.find(:all, :conditions => {:currency_list_id => c.id, :exchanger_list_id => @exchanger.id}, :order => :updated_at).last(2)
    end
    @currencies.flatten!
  end 
```

如果我在浏览器显示方法中调用，我会看到子 @currencies 和它的数据，但是如果我调用索引，我会看到所有（我也看到节点），但我没有看到子项....怎么了？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:46:15.027

您的架构有点混乱，因为在 show 操作中，当您在 index 模板中渲染 show 时，您不仅会显示 nil ，`@exchanger`而且还会显示完整的 nil 列表。`@currencies`一般来说，我建议您考虑整个应用程序架构。

当我应该为您当前的问题提供一个简单的解决方案时，我会将 @currencies 代码从 show 操作中提取到 app/helpers/currencies_helper.rb 中的 helper 方法中，并从 show 模板中访问它。

```
module CurrenciesHelper

  def currencies(exchanger)
    currencies = CurrencyList.all.map do |c|
      CurrencyValue.find(:all, :conditions => {:currency_list_id => c.id, :exchanger_list_id => exchanger.id}, :order => :updated_at).last(2)
    end
    currencies.flatten!
  end

end 
```

顺便说一句，我用这种方法替换了该`each`方法，`map`因为它更适合这种情况。

将显示模板中的货币部分更改为

```
child currencies(@exchanger) do
  attribute :value, :direction_of_exchange_id, :exchanger_list_id
end 
```

# android - 如何在缩略图中显示视频网址？

> ID：16190374
> 
> 赞同：2
> 
> 时间：2013-04-24T11:07:01.800
> 
> 标签：android, gridview, video-thumbnails

我在缩略图中显示视频时遇到问题..

从数据库中检索视频链接并将其存储在字符串数组中。

我想在缩略图网格视图中显示视频数组。如何实施？它可以显示吗？

谁能帮我？提前非常感谢。

我试过这个......

```
vid = new ArrayList<String>(new ArrayList<String>(vid));

runOnUiThread(new Runnable() {
   public void run() {
      setContentView(R.layout.gallery);
      GridView grd = (GridView)findViewById(R.id.gridView1);
      grd.setAdapter(new ImageAdapter(this));
      grd.setOnItemClickListener(new OnItemClickListener()
      {
      public void onItemClick(AdapterView<?> parent,View v,int pos,long id)
      {
      Toast.makeText(getBaseContext(),
                        "pic"+(pos+1)+"select ",Toast.LENGTH_SHORT).show();
      }
    });
 }
   });
      return;
     private class ImageAdapter extends BaseAdapter {
     private final Runnable context; 
     public ImageAdapter(Runnable runnable) {
           context = runnable;
    }
    public int getCount() 
    {
        return vid.size();
    }
    public Object getItem(int position) 
    {
        return position;
    }
    public long getItemId(int position) 
    {
        return position;
    }
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        ImageView picturesView;
        if (convertView == null) {
           picturesView = new ImageView((Context) context);
            //Creation of Thumbnail of video
           Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(vid.get(position),0);
           picturesView.setImageBitmap(bitmap);
           picturesView.setScaleType(ImageView.ScaleType.FIT_XY);
            //picturesView.setPadding(8, 8, 8, 8);
           picturesView.setLayoutParams(new Gallery.LayoutParams(150, 120));
        }else {
            picturesView = (ImageView)convertView;
        }
        return picturesView;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T11:20:27.463

它非常简单，而不是字符串数组使用对象数组列表，它具有网格项目的缩略图/位图和视频 url，如下所示。

```
class video
{
  Bitmap thumnail;
  String videoURL;
} 
```

从数据库中创建该视频类的数组列表，然后在 getview 中使用该数组列表。

```
 videoList = new ArrayList<Video>();
 // populate videolist

public int getCount() 
{
    return videoList.size();
}

 public View getView(int position, View convertView, ViewGroup parent) 
{
    ImageView picturesView;
    if (convertView == null) {
       picturesView = new ImageView((Context) context);
        //Creation of Thumbnail of video
       //Bitmap bitmap = ThumbnailUtils.createVideoThumbnail(vid.get(position),0);
       Bitmap bitmap = videoList.get(position).thumnail;
       picturesView.setImageBitmap(bitmap);
       picturesView.setScaleType(ImageView.ScaleType.FIT_XY);
        //picturesView.setPadding(8, 8, 8, 8);
       picturesView.setLayoutParams(new Gallery.LayoutParams(150, 120));
    }else {
        picturesView = (ImageView)convertView;
    }
    return picturesView;
} 
```

然后在 onitemclick 中，使用相同的数组列表，您可以获得 videourl，您可以在单独的屏幕上播放视频。

```
 grd.setOnItemClickListener(new OnItemClickListener()
  {
  public void onItemClick(AdapterView<?> parent,View v,int pos,long id)
  {
     String videoLink = videoList.get(pos).videoURL;
     // pass this video link to another activity where you want to play the video
  }
}); 
```

# python - 在 Tornado 中注销不起作用

> ID：16190375
> 
> 赞同：0
> 
> 时间：2013-04-24T11:07:08.443
> 
> 标签：python, logging, cookies, tornado

我在 Tornado 中编写了登录和注销处理程序，用于登录 Google 外部服务。

处理程序如下：

```
###############################################################################
# Manage login requests using Google authentication
###############################################################################
class AuthLoginHandler(BaseHandler, tornado.auth.GoogleMixin):
    @tornado.web.asynchronous
    def get(self):
        if self.get_argument("openid.mode", None):
            self.get_authenticated_user(self.async_callback(self._on_auth))
            return
        self.authenticate_redirect()

    # Authentication-OK callback.
    # Save user info on the first connection.
    # Only save a last-login timestamp otherwise.
    def _on_auth(self, user):
        if not user:
            raise tornado.web.HTTPError(500, "Google auth failed")

        str_time = datetime.datetime.now().isoformat()

        usr = self.db.get("SELECT * FROM users WHERE email=%s", user["email"])
        if not usr:
            # Create user entry in the WSN-database
            self.lock_tables("write", ['users'])
            usr_id = self.db.execute("INSERT INTO users (email, name, last_access) \
                                                  VALUES (%s,%s,%s)",
                                                  user["email"], user["name"], str_time)
            self.unlock_tables()
        else: 
            self.lock_tables("write", ['users'])
            usr_id = usr["id"]
            self.db.execute("UPDATE users SET last_access=%s WHERE id=%s",
                            str_time, usr_id)
            self.unlock_tables()

        self.set_secure_cookie("user", str(usr_id))
    self.info("Hello <b>" + user["name"] + "</b>!")
        self.redirect(self.get_argument("next", "/"))

    # Do not log Login info
    def _log(self):
        pass

################################################################################
# Logout handler. Simply clear the "user" cookie and redirect to homepage.
################################################################################
class AuthLogoutHandler(BaseHandler, tornado.auth.GoogleMixin):
    def get(self):
        self.clear_cookie("user")
    self.notice("You have successfully logged out")
        self.redirect("/") 
```

我希望，当用户注销时，单击他未登录的浏览器的后退按钮。换句话说，我希望后退按钮不起作用......相反，如果我注销用户，如果他点击后退按钮，他可以在网页中导航，就像他一直登录一样。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T13:04:32.077

我认为您通过按后退按钮导航到的页面位于浏览器的缓存中。尝试按 F5 重新加载页面并查看用户是否仍处于登录状态。

# python - 获取字符串的正则表达式

> ID：16190378
> 
> 赞同：0
> 
> 时间：2013-04-24T11:07:19.157
> 
> 标签：python, regex, python-2.x

* * *

我正在创建一个解析日志文件的脚本...这是以下行的示例：

```
data = "09:55:04.125 mta         Messages       I Doc O:SERVER (NVS:SMTP/me@domain.com) R:NVS:FAXG3.I0.0101 mid:6393"
data2= "09:55:05.045 mta         Messages       I Doc O:SERVER (NVS:SMTP/me@domain.com) R:ADMIN (NVS:SMTP.0/me@domain.fr) mid:6397" 
```

* * *

起初我已经匹配了斜线和两点之间的内容，但我注意到有一些像第一行一样的行，其中类型“FAXG3.I0.0101”后面没有斜线

* * *

这是我使用的正则表达式：

```
exp = result = re.findall(r'[\w\.]+(?=:*)',data) # type S & D 
```

* * *

我想要的结果是第一行的'SMTP'，'FAXG3.I0.0101'和第二行的'SMTP'，'SMTP.0'。有人可以帮助纠正我的正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:17:03.527

“NVS：”是否保证出现在您的比赛前？如果是这样，您可以使用`NVS:([\w\.]+)`：

```
re.findall(r'NVS:([\w\.]+)',data)
['SMTP', 'FAXG3.I0.0101']

re.findall(r'NVS:([\w\.]+)',data2)
['SMTP', 'SMTP.0'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:41:21.740

以下应该可以解决问题

```
>>> for x in re.finditer('(NVS:([\w.]+?)(\s|/))', data2):
...     print x.groups()[1]
...
SMTP
SMTP.0
>>> for x in re.finditer('(NVS:([\w.]+?)(\s|/))', data):
...     print x.groups()[1]
...
SMTP
FAXG3.I0.0101 
```

# ios - ios - 如何将 javascript 函数加载到 UIWebview 中？

> ID：16190380
> 
> 赞同：-3
> 
> 时间：2013-04-24T11:07:29.847
> 
> 标签：ios, objective-c, access-token

我正在使用 OpenID 构建一个应用程序，现在我想获取访问令牌，请通过这个给定的链接

[http://www.stevesaxon.me/posts/2011//window-external-notify-in-ios-uiwebview](http://www.stevesaxon.me/posts/2011//window-external-notify-in-ios-uiwebview)

在那个链接中给出了javascript函数

```
<script type=\"text/javascript\">

    window.external =

    {
        'Notify': function(s) { document.location = 'acs://settoken?token=' + s; },
        'notify': function(s) { document.location = 'acs://settoken?token=' + s; }
    };

</script> 
```

如何加载这个javascript `UIWebview`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:17:18.043

UIWebView 类有一个名为**stringByEvaluatingJavaScriptFromString**的方法，您可以使用该方法将 javascript 代码加载到 webview。

我使用这种方法在我的 webview 上执行 javasctipt：

```
-(void) runjs:(NSString *)code
{
    @try 
    {
        if (webview)
            [webview stringByEvaluatingJavaScriptFromString: code];      
    }
    @catch (NSException *exception) 
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:13:56.147

检查调用的 UIWebView 方法：

stringByEvaluatingJavaScriptFromString:(NSString *)script;

```
NSString *result = [_webView stringByEvaluatingJavaScriptFromString:(@"alert('Hi')")]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T03:48:42.233

您可以使用此方法将 javascript 从 html 调用到 iOS webview

```
[self.webView stringByEvaluatingJavaScriptFromString:@"my_html_function();"]; 
```

这可能会对您有所帮助。

# php - 如何将图像路径和名称上传到数据库 - Codeigniter

> ID：16190381
> 
> 赞同：3
> 
> 时间：2013-04-24T11:07:29.927
> 
> 标签：php, mysql, codeigniter, upload, insert

我知道这个问题已经被问过好几次了，但是我发现的所有其他问题都与我想要的不同。

我想将文件名和文件路径上传到名为“factoryimages”的表中。

这样做的最佳方法是什么？

我的控制器功能：

```
function do_upload()
{
    $config['upload_path'] = './assets/uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '1000';
    $config['max_width']  = '';
    $config['max_height']  = '';
    $config['overwrite'] = TRUE;
    $config['remove_spaces'] = TRUE;

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());

        $this->load->view('members/header');
        $this->load->view('members/upload_form', $error);
        $this->load->view('members/footer');
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());
        $this->load->view('members/header');
        $this->load->view('members/upload_success', $data);
        $this->load->view('members/footer');
    }
} 
```

我在我的模型中尝试了这个，但它没有用：

```
function insert_images()
{
    $insert_data = array(
    'filename' => $image_data['file_name'],
    'fullpath' => $image_data['full_path']
    );

    $this->db->insert('bedrijfimages', $insert_data);
} 
```

我的观点：

```
<?php echo $error;?>
<br/>
<?php echo form_open_multipart('upload/do_upload');?>

<input type="file" name="userfile" size="20" multiple="true" />

<br /><br />

<input type="submit" value="upload" />

</form> 
```

# 编辑：

我收到一个服务器错误，但我看不到它是什么。

我的控制器功能：

```
function do_upload()
{
    $config['upload_path'] = './assets/uploads/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '1000';
    $config['max_width']  = '';
    $config['max_height']  = '';
    $config['overwrite'] = TRUE;
    $config['remove_spaces'] = TRUE;

    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload())
    {
        $error = array('error' => $this->upload->display_errors());
        $this->upload_model->insert_images($this->upload->data());
        $this->load->view('members/header');
        $this->load->view('members/upload_form', $error);
        $this->load->view('members/footer');
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());
        $this->load->view('members/header');
        $this->load->view('members/upload_success', $data);
        $this->load->view('members/footer');
    }
} 
```

我的模型功能：

```
function insert_images($data = array())
{
    $data = array(
    'filename' => $image_data['file_name'],
    'fullpath' => $image_data['full_path']
    );

    $this->db->insert('bedrijfimages', $data);
} 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:11:46.033

您必须将此数据作为数组传递给您的插入 `$this->upload->data()`

在您的控制器上，您必须在验证完成时进行设置

```
else
{
    $this->MODELNAME->insert_images($this->upload->data());
    $data = array('upload_data' => $this->upload->data());
    $this->load->view('members/header');
    $this->load->view('members/upload_success', $data);
    $this->load->view('members/footer');
} 
```

在您的模型中：

```
function insert_images($image_data = array()){
      $data = array(
          'filename' => $image_data['file_name'],
          'fullpath' => $image_data['full_path']
      );
      $this->db->insert('bedrijfimages', $data);
} 
```

您可以在 CI 文档页面查看此数组中包含哪些信息：[Codeigniter 上传库](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

# c# - 正则表达式选择直到特定字符的所有逗号

> ID：16190384
> 
> 赞同：0
> 
> 时间：2013-04-24T11:07:42.487
> 
> 标签：c#, regex

我在正则表达式上度过了一段糟糕的时光。我承认这很糟糕，但是当我需要时，我只是没有足够地使用它们来变得非常好。基本上由于我们的应用程序的运行方式，我将一个 .csv 文件的内容提取到一个字符串中。我需要在已经存在的内容上方和下方插入一个新行。列的数量可能会因报告而异。我想做的是在字符串中的第一组 \r\n 之前抓取所有没有任何其他字符（包括空格）的逗号。这样我就有了所有的列，我可以在顶部插入一个空白行并用我需要的内容填充列。以下是 .csv 文本的示例：

```
"Date, Account Code, Description, Amount\r\n23-Apr-13,12345,Account1,$12345\r\n" 
```

我希望正则表达式抓住什么：

```
",,," or ",,,\r\n" 
```

我似乎无法得到这个。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:33:26.303

您不需要正则表达式。

```
string firstLine = file.ReadLines().First();
int numCommas = firstLine.Count(c => c == ',');
string commaString = new String(',', numCommas); 
```

如果您无权访问`file.ReadLines()`方法，则可以使用[此链接](https://stackoverflow.com/questions/1576999/how-to-take-only-first-line-from-the-multiline-text)中的以下内容：

```
string firstline = test.Substring(0, test.IndexOf(Environment.NewLine)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T12:01:05.820

您实际上不需要使用常规 Epressions 使您的代码复杂化来完成您想要的：计算列数。

这是一个非常简单的方法：

```
String textline = csvtext.Substring(0, csvtext.IndexOfAny(Environment.NewLine.ToCharArray()));
int columns = textline.Split(',').Length; 
```

现在`columns`变量有你的总列数。

* * *

第一行*仅从*CSV 文本中获取第一行。第二行将该文本拆分为一个以逗号 ( `,`) 分隔的数组，并返回总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:56:06.417

您可以使用下面的正则表达式 `(?<=[\d\w\s])(\r|\n|,)(?=[\d\w\s\W])` 来匹配，以及换行符，使用可以利用`Regex.Replace("inputstring","regexpattern","replacechar", RegexOptions.IgnoreCase)`

这可以通过字符串操作本身来完成

```
string[] strs= inputstr.split(new string[]{"\n","\r",","}, StringSplitOptions.RemoveEmptyEntries);
foreach(string str in strs)
{
// do you part
} 
```

# git - 应用补丁时有什么方法可以解决冲突吗？

> ID：16190387
> 
> 赞同：149
> 
> 时间：2013-04-24T11:07:56.460
> 
> 标签：git, git-am, git-apply

我在窗户上。

由于各种原因，我们有多个不同 svn 分支的 git 实例。

很多时候，我想修复存储库 A 中的问题，生成补丁并将其应用到存储库 B。除非存在冲突，否则这工作正常。

变基时，我只需右键单击文件夹并使用 tortioseGit 并选择解析选项。这带来了一个很好的 gui 让我解决我的冲突。

有没有办法用被拒绝的补丁块来完成这个？

这是我目前创建/应用补丁的方法

```
git format-patch master --stdout > c:\\patch\\file.patch
git apply --reject --ignore-space-change --ignore-whitespace c:\\patch\\file.patch 
```

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2013-06-06T18:00:35.160

要生成补丁，请执行以下操作：

```
git format-patch --stdout first_commit^..last_commit > changes.patch 
```

现在，当您准备好应用补丁时：

```
git am -3 < changes.patch 
```

`-3`如果存在冲突，将进行三向合并。此时，`git mergetool`如果您想转到 gui 或仅使用 vim 手动合并文件（标准`<<<<<<`, `||||||`,`>>>>>>`冲突解决方案），您可以这样做。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-11T02:24:52.357

如果您在应用补丁、变基或合并时经常遇到相同的冲突集，那么您可以使用 git rerere（重用记录的分辨率）功能。这使您可以根据过去解决冲突的方式预先定义应如何解决冲突。有关其工作原理的详细信息，请参阅[http://git-scm.com/blog/2010/03/08/rerere.html](http://git-scm.com/blog/2010/03/08/rerere.html)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-06T13:58:51.320

TortoiseGit 有一个合并功能，可以打开补丁文件。

[这里](https://tortoisegit.org/about/screenshots/#TortoiseGitMerge)有一张照片。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-07T13:13:00.613

我的做法是：

*   创建文件相同的“集成”分支
*   将补丁应用到这个集成分支
*   合并或变基到master（不知道变基在这里是否有用，因为我不知道应用更多补丁时会发生什么）

# html - 如何计算不同文本长度的元素宽度

> ID：16190391
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:08:03.007
> 
> 标签：html, css

我的意思是，如果我有这个：

```
<ul>
   <li>one</li>
   <li>two</li>
   <li>three</li>
</ul> 
```

例如布局宽度是900px，那些li标签现在每个宽度都是300px，但是如果我改变网站的语言，文本长度可能会改变，宽度会变大或变小，这就是它的时候是自动宽度，如果我给li标签设置了固定宽度，文字长度可能会比我设置的宽度大，那么如何解决这个难题呢？

我需要使所有 li 标签的总宽度 == 布局宽度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:11:11.330

您可以尝试使用[溢出](http://www.w3schools.com/cssref/pr_pos_overflow.asp)css 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:11:22.030

如果您的`<li></li>`项目的宽度为 300 像素，而您的页面的宽度为 900 像素，那么无论内容是什么，它们的宽度都不应超过 CSS 中的宽度。

这些在 CSS 中的实际样式是什么？

您可能想 [看看溢出的](http://www.w3schools.com/cssref/pr_pos_overflow.asp)css 属性。这可能有助于理解某些限制的影响可能产生的影响。

# opengl - Opengl 延迟光照着色器

> ID：16190395
> 
> 赞同：0
> 
> 时间：2013-04-24T11:08:14.993
> 
> 标签：opengl, shader, deferred-rendering, deferred-shading

我刚开始学习 OpenGL 3.1，我正在尝试为我的引擎（框架？）实现延迟着色。我为第一阶段、照明阶段和延迟阶段编写了简单的着色器。光照阶段从延迟纹理中获取漫反射颜色并将其保存在光照纹理中。延迟阶段绘制照明纹理。在照明着色器中是一个错误，场景很奇怪。它看起来像[这样](https://www.dropbox.com/s/q1qerf2bmmtdqsw/screen1.png)，而且应该看起来像[这样](https://www.dropbox.com/s/bj2uth2d5k2lq70/screen2.png)。灯光舞台顶点着色器：

```
#version 150

in vec4 vertex;

out vec2 position;

void main(void)
{
   gl_Position = vertex*2-1;
   gl_Position.z = 0.0;

   position.xy = vertex.xy;
} 
```

灯光舞台片段着色器：

```
#version 150

in vec2 position;

uniform sampler2D diffuseTexture;
uniform sampler2D positionTexture;

out vec4 lightingOutput;

void main()
{
    vec4 diffuse = texture(diffuseTexture, vec2(position.x, position.y));
    vec4 position = texture(positionTexture, position.xy);

    vec4 ambient = vec4(0.05, 0.05, 0.05, 1.0) * diffuse;

    lightingOutput = diffuse;
} 
```

这就是我在光照阶段渲染的内容：

```
static const GLfloat _vertices[] =
{
    -1.0f, -1.0f, 0.0f,
    1.0f, -1.0f, 0.0f,
    0.0f,  1.0f, 0.0f,

    0.0f, 1.0f, 0.0f,
    1.0f, -1.0f, 0.0f,
    1.0f,  1.0f, 0.0f,
}; 
```

这就是我渲染它的方式：

```
glUseProgram( programID[2] );

glEnableVertexAttribArray(vertexID[1]);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glVertexAttribPointer(
    vertexID[1],
    3,                  // size
    GL_FLOAT,           // type
    GL_FALSE,           // normalized?
    0,                  // stride
    (void*)0            // array buffer offset
    );

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, positionTexture);
glUniform1i(positionTextureID[1], 1);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, diffuseTexture);
glUniform1i(diffuseTextureID[1], 0);

glDrawArrays( GL_TRIANGLES, 0, 6 );

glDisableVertexAttribArray(vertexID[1]); 
```

如果您需要所有代码，请访问 www.dropbox.com/s/hvfe4v4pb1pfxb3/code.zip。

如何解决这个奇怪的问题？

# asp.net-mvc - Simplemembership 登录和 RemeberMe ASP.Net MVC4

> ID：16190400
> 
> 赞同：0
> 
> 时间：2013-04-24T11:08:25.793
> 
> 标签：asp.net-mvc, simplemembership

我正在使用带有 SimpleMemberShip 的 ASP.net MVC4。

如果勾选了记住我复选框，我只想存储用户名并从 cookie 重新加载它。

登录工作正常，RememberMe 设置为 true。但 Request.Cookies[FormsAuthentication.FormsCookieName] 始终为空。我对这应该如何工作感到困惑。

登录控制器：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Index(LoginModel model, string returnUrl)
    {
        bool RememberMe = model.RememberMe == "on" ? true : false;
        if (WebSecurity.Login(model.UserName, model.Password, persistCookie: RememberMe))
        {
            return RedirectToLocal(returnUrl);
        }

        // If we got this far, something failed, redisplay form
        ModelState.AddModelError("", "The user name or password provided is incorrect.");
        return View(model);
    } 
```

登录页面控制器：

```
 [AllowAnonymous]
    public ActionResult Index(string returnUrl)
    {
        // load user name
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
            ViewBag.Username = Server.HtmlEncode(ticket.Name);
            ViewBag.RememberMeSet = true;
        }
        else
        {
            ViewBag.RememberMeSet = false;
        }
        ViewBag.ReturnUrl = returnUrl;
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T18:55:37.773

我想通过单击“记住我”复选框来保存用户名。我现在明白除非登录，否则 cookie 为空，因此它在登录页面上没有用。作为参考，我在下面添加了我的解决方案。

处理登录请求控制器：

```
 [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Index(LoginModel model, string returnUrl)
        {
            // handle remembering username on login page
            bool RememberMe = model.RememberMe == "on" ? true : false;
            HttpCookie existingCookie = Request.Cookies["xxx_username"];

            if (RememberMe)
            {
                // check if cookie exists and if yes update
                if (existingCookie != null)
                {
                    // force to expire it
                    existingCookie.Expires = DateTime.Today.AddMonths(12);
                }
                else
                {
                    // create a cookie
                    HttpCookie newCookie = new HttpCookie("xxx_username", model.UserName);
                    newCookie.Expires = DateTime.Today.AddMonths(12);
                    Response.Cookies.Add(newCookie);
                }
            }
            else
            {
                // remove cookie
                if (existingCookie != null)
                {
                    Response.Cookies["xxx_username"].Expires = DateTime.Now.AddDays(-1);
                }
            }

            if ((!string.IsNullOrEmpty(model.UserName)) && (!string.IsNullOrEmpty(model.Password)))
            {
                if (WebSecurity.Login(model.UserName, model.Password, RememberMe))
                {
                    return RedirectToLocal(returnUrl);
                }
            }

            // If we got this far, something failed, redisplay form
            TempData["ErrorMsg"] = "Login failed";
            return View(model);
        } 
```

显示登录页面控制器：

```
 [AllowAnonymous]
    public ActionResult Index(string returnUrl)
    {
        // load user name
        HttpCookie existingCookie = Request.Cookies["xxx_username"];
        if (existingCookie != null)
        {
            ViewBag.Username = existingCookie.Value;
            ViewBag.RememberMeSet = true;
        }
        else
        {
            ViewBag.RememberMeSet = false;
        }
        ViewBag.ReturnUrl = returnUrl;
        return View();
    } 
```

# c# - 关于变量值变化。

> ID：16190405
> 
> 赞同：0
> 
> 时间：2013-04-24T11:08:43.753
> 
> 标签：c#, variables

我有一些代码根据不同的输入值设置变量。在这里简化：

```
if (hipDepthPoint.X < 100)
{
    Xvariabel = 1;
}
else 
{
    Xvariabel = 2;
} 
```

然后我想寻找变量的变化`Xvariabel`，每当值变化我想执行一个动作。我研究了事件和属性，但我无法让它们中的任何一个起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:13:00.717

尝试用属性来做

```
if (hipDepthPoint.X < 100)
{
    Xvariabel = 1;
}
else 
{
    Xvariabel = 2;
}

public int Xvariabel 
{
    get { return _xvariabel ; }
    set
    {
        if (_xvariabel != value)
        {
            _xvariabel = value
            //do some action
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:16:14.133

带有 setter 的属性应该可以完成工作。
你应该写这样的东西：

```
private int _X     
public int X {
    get { return _X ; }
    set { _X  = value; //Your function here }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:47:22.853

这是一个示例，您可以使用 .net 的发明和力量来做些什么。我使用了 INotifyPropertyChange，但您可以使用自己的界面。这是一种非常通用的类型，它会将自己的值更改通知给多个侦听器

```
public class Test
{
    public static void Main(string[] args)
    {
        ObservableVar<int> five = new ObservableVar<int>(5);
        five.PropertyChanged += VarChangedEventHanler;
        five.Value = 6;
        int six = five;
        if (five == six)
        {
            Console.WriteLine("You can use it almost like regular type!");
        }
        Console.ReadKey();            
    }

    static void VarChangedEventHanler(object sender,PropertyChangedEventArgs e)
    {
        Console.WriteLine("{0} has changed",sender.ToString());
    }
}

public class ObservableVar<T> : INotifyPropertyChanged
{
    private T value;

    public ObservableVar(T _value)
    {
        this.value = _value;
    }

    public T Value
    {
        get { return value; }
        set
        {
            if (!this.value.Equals(value)) //null check omitted
            {
                this.value = value;
                if (PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs("Value"));
                }
            }
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    public static implicit operator T(ObservableVar<T> observable)
    {
        return observable.Value;
    }
} 
```

# spring-batch - 如何在春季批处理中实现这个简单的逻辑？

> ID：16190410
> 
> 赞同：2
> 
> 时间：2013-04-24T11:08:55.180
> 
> 标签：spring-batch, spring-batch-admin

我试图让它尽可能简单。我是春季批次的新手，我有一个小问题，了解如何将弹簧项目联系在一起，特别是在涉及多步骤作业时，但这是我的**逻辑而不是代码**（简化），我不知道在春季批次中实施它所以我认为这可能是正确的结构

*   reader_money
*   读者详细信息
*   小任务
*   读者利润
*   tasklet_calculation
*   作家

但是，如果我错了，请纠正我并尽可能提供一些代码。非常感谢您

***逻辑：***

```
sql = "select * from MONEY where id= user input"; //the user will input the condition

while (records are available) { 

    int currency= resultset(currency column);
    sql= "select * from DETAILS where D_currency = currency";

    while (records are available) {

        int amount= resultset(amount column);
        string money_flag= resultset(money_type column);
        sql= "select * from PROFIT where Mtypes = money_type";

        while (records are available) {

            int revenue= resultset(revenue);

            if (money_type== 1) {
                int net_profit= revenue * 3.75;
                sql = "update PROFIT set Nprofit = net_profit";
            }

            else (money_type== 2) {
                int net_profit = (revenue - 5 ) * 3.7 ;
                sql = "update PROFIT set Nprofit = net_profit";
            }
        }
    sql="update DETAILS set detail_falg = 001 ";
    }
sql = "update MONEY set currency_flag = 009";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:04:38.490

检查 ItemReaderAdapter 的使用，您可以将所有 SQL 放在某种 DAO 中，该 DAO 可以返回包含计算所需的所有信息的聚合对象列表。

或者

您可以使用 CompositeItemReader 模式。您基本上将多个 ItemReader 定义为一个主 ItemReader。read() 方法将在进入处理器/编写器阶段之前调用所有内部 ItemReader。

我可以给你发一些例子..但我必须离开:-(..

如果您需要一些示例，请发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:00:41.113

要将其放入“常规”弹簧批处理配置中，您需要尽可能将三个循环扁平化为一个。

也许是一个 sql 语句，它会在一个类似于的循环中返回它；

```
select p.revenue, d.amount from PROFIT p, DETAILS d, MONEY m where p.MTypes = d.money_type and d.D_currency = m.currency and m.id = :? 
```

一旦你“扁平化”了它，你就会陷入更“传统”的块模式的读/处理/写，其中读取器从结果集中检索记录，处理器执行money_type逻辑，然后写入器执行“更新”声明。

# php - 如何在 PHP 中使超链接执行操作？

> ID：16190411
> 
> 赞同：0
> 
> 时间：2013-04-24T11:08:55.920
> 
> 标签：php, hyperlink

我想做的是在我的网站上创建一个“注销”超链接，更改会话变量以使用户看起来已注销，但我很难这样做。这可能吗？

我了解如何更改变量等，但我正在努力让这在超链接中发生。

（请记住，这是一个简单的学生演示，我使用它基本上从 MySQL 数据库登录用户以查看与其他当前用户相同的内容。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:11:20.707

`<a href="logout.php">logout</a>`在`logout.php`简单`unset`的`session`和重定向主页上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:14:58.067

由于 PHP 是服务器端，因此您必须对服务器进行链接调用才能执行操作。正如 Praveen 所示，您需要导航到一个新的 PHP 页面。

您也可以让 JavaScript 执行 AJAX 请求，但它不会对注销有太大作用，因为页面上的大部分内容可能需要更新，因为您不再登录。

在 logout.php 页面中，您可以使用

```
header('Location: login.php');
die(); 
```

因此，在用户访问 logout.php（取消设置 Cookie 和会话）后，他们会自动重定向到 login.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:12:43.087

内一个超链接应该是什么意思，一个指向同一页面的超链接还是什么？

页面.php：

```
<a href="page.php?logout=1">logout</a>
if (isset($_GET['logout'])) {
  unset($_SESSION['session']);
} 
```

但我根本看不出这样做的任何逻辑

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:16:22.463

HTML：

```
<a href='index.php?logout'>Logout</a>" 
```

PHP：

```
if (isset($_GET["logout"])) {
    session_start();
    session_destroy();
} 
```

# c# - C# 我想检查一个字符串是否包含带有两个点的德语日期

> ID：16190413
> 
> 赞同：-7
> 
> 时间：2013-04-24T11:09:02.777
> 
> 标签：c#, string, date

我有字符串“24.04.2013”​​。

如何识别字符串是否为日期？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:10:14.207

像这样的东西？

```
int count="24.04.2013".Count(c => c == '.'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T11:19:37.003

我认为您真正的问题应该是：我如何验证日期？

您应该使用[`DateTime.TryParseExact()`](http://msdn.microsoft.com/en-GB/library/ms131044.aspx)它来验证它。

例如：

```
CultureInfo enDE = new CultureInfo("de-DE"); 
string dateString = "24.04.2013";

DateTime date;

if (DateTime.TryParseExact(dateString, "dd.MM.yyyy", enDE, DateTimeStyles.None, out date))
    Console.WriteLine("Success");
else
    Console.WriteLine("Failure"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T11:11:19.883

你可以尝试使用

`string.Split('.').Length >= 2`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T11:13:23.383

您可以将字符串与正则表达式 (RegEx) 匹配。这不仅可以告诉您是否有两个点，还可以告诉您格式是否正确：2 位、点、2 位、点、4 位。

```
Regex regex = new Regex("\d{2}\.\d{2}\.\d{4}");
if (regex.IsMatch(myInput, regex))
{ ... } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:48:32.780

可以通过正则表达式检查它！

```
 private static bool IsDateGerman(string germanDate)
    {
        Regex rx = new Regex(@"[0-3]?[0-9]\.[0-1]?[1-9]\.[0-9]{1,4}");

        return rx.IsMatch(germanDate);
    } 
```

仍然没有处理像 39.19.2013 这样的所有案件

# c# - C#：空列表的 Any() vs Count()

> ID：16190415
> 
> 赞同：27
> 
> 时间：2013-04-24T11:09:22.103
> 
> 标签：c#, .net

之前发布的一个[问题](https://stackoverflow.com/questions/16189602/ternary-best-practice/)让我思考。在空列表上使用时会`Any()`并执行类似的操作吗？`Count()`

正如[这里](https://stackoverflow.com/questions/305092/which-method-performs-better-any-vs-count-0)所解释的，两者都应该经过相同的步骤`GetEnumerator()/MoveNext()/Dispose()`。

我使用 LINQPad 上的快速程序对此进行了测试：

```
static void Main()
 {
    var list = new List<int>();

    Stopwatch stopwatch = new Stopwatch();
    stopwatch.Start();

    for (int i = 0; i < 10000; i++)
        list.Any();

    stopwatch.Stop();
    Console.WriteLine("Time elapsed for Any()   : {0}", stopwatch.Elapsed);

    stopwatch = new Stopwatch();
    stopwatch.Start();

    for (int i = 0; i < 10000; i++)
        list.Count();

    stopwatch.Stop();
    Console.WriteLine("Time elapsed for Count(): {0}", stopwatch.Elapsed);
} 
```

总体结果似乎表明`Count()`在这种情况下速度更快。这是为什么？

我不确定我是否得到了正确的基准，如果没有，我将不胜感激。

* * *

编辑：我知道这在语义上会更有意义。我在问题中发布的第一个链接显示了直接使用确实有意义的情况，`Count()`因为将使用该值，因此问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T12:03:30.983

该`Count()`方法针对`ICollection<T>`类型进行了优化，因此`GetEnumerator()/MoveNext()/Dispose()`不使用模式。

```
list.Count(); 
```

被翻译成

```
((ICollection)list).Count; 
```

而`Any()`必须建立一个枚举器。所以`Count()`方法更快。

`IEnumerable`这里是 4 个不同实例的基准。看起来`MyEmpty`像`IEnumerable<T> MyEmpty<T>() { yield break; }`

```
iterations : 100000000

Function                      Any()     Count()
new List<int>()               4.310     2.252
Enumerable.Empty<int>()       3.623     6.975
new int[0]                    3.960     7.036
MyEmpty<int>()                5.631     7.194 
```

正如[casperOne](https://stackoverflow.com/questions/16190415/c-any-vs-count-for-an-empty-list/16191520#comment23157025_16191520)在评论中所说，`Enumerable.Empty<int>() is ICollection<int>`, 因为它是一个数组，并且数组不适合`Count()`扩展，因为[转换`ICollection<int>`为不是微不足道的。](https://stackoverflow.com/questions/16208951/array-count-much-more-slower-than-list-count)

无论如何，对于自制的空`IEnumerable`，我们可以看到我们所期望的，即`Count()`比 慢`Any()`，因为测试是否`IEnumerable`为`ICollection`.

完整的基准：

```
class Program
{
    public const long Iterations = (long)1e8;

    static void Main()
    {
        var results = new Dictionary<string, Tuple<TimeSpan, TimeSpan>>();
        results.Add("new List<int>()", Benchmark(new List<int>(), Iterations));
        results.Add("Enumerable.Empty<int>()", Benchmark(Enumerable.Empty<int>(), Iterations));
        results.Add("new int[0]", Benchmark(new int[0], Iterations));
        results.Add("MyEmpty<int>()", Benchmark(MyEmpty<int>(), Iterations));

        Console.WriteLine("Function".PadRight(30) + "Any()".PadRight(10) + "Count()");
        foreach (var result in results)
        {
            Console.WriteLine("{0}{1}{2}", result.Key.PadRight(30), Math.Round(result.Value.Item1.TotalSeconds, 3).ToString().PadRight(10), Math.Round(result.Value.Item2.TotalSeconds, 3));
        }
        Console.ReadLine();
    }

    public static Tuple<TimeSpan, TimeSpan> Benchmark(IEnumerable<int> source, long iterations)
    {
        var anyWatch = new Stopwatch();
        anyWatch.Start();
        for (long i = 0; i < iterations; i++) source.Any();
        anyWatch.Stop();

        var countWatch = new Stopwatch();
        countWatch.Start();
        for (long i = 0; i < iterations; i++) source.Count();
        countWatch.Stop();

        return new Tuple<TimeSpan, TimeSpan>(anyWatch.Elapsed, countWatch.Elapsed);
    }

    public static IEnumerable<T> MyEmpty<T>() { yield break; }
} 
```

# php - 使用容器进行依赖注入

> ID：16190421
> 
> 赞同：0
> 
> 时间：2013-04-24T11:09:36.390
> 
> 标签：php, oop, design-patterns, dependency-injection, ioc-container

阅读了很多关于依赖注入的内容，现在我正在尝试做一些事情。我想到了一个简单的表单提交。基本上是一个带有`input`标题字段和`textarea`正文字段的表单。

然后我有一个容器，像这样：

```
class IoC
{
  protected $db;

  public static function newPost()
  {
     $post = new Post(); // Instantiate post class so we can use the methods in there
     $input = $post->getInput(); // Method that gets the POST values
     $post->insertInput($input, $db); // Method that adds the post values to a database
  }
}
//Call IoC::newPost(); on the page the form submits to 
```

这是`Post`课程：

```
class Post
{
  protected $db;

  public function __construct($db)
  {
    $this->db = $db;
  }

  public function getInput()
  {
    // Should I get the post input here? Like $_POST['title'] etc. and put it 
    // into an array and then return it?
    return $input;
  }

  public function insertIntoDB($db, $input)
  {
    // Should I hardcode the connection and query here?
  }
} 
```

如您所见，我对连接的来源感到困惑。考虑一下，我想有一个单独的、可重用的`Database`类来创建连接并在容器中调用该类是明智的吗？

我真的不知道，请随时告诉我你会怎么做，如果你有例子，可以举个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:25:32.097

依赖注入背后的想法是您实际上注入了任何依赖项。假设您有 Post 课程。这个类 - 在你的情况下 - 取决于数据库，所以你在构造函数中注入你的 Database 对象（或者如果你愿意的话，请参见 symfony2 获取更多信息）。反过来，您的 Database 类需要参数来建立连接，您可以通过注入配置（提供者）对象来做到这一点（是的！）。

您的容器只不过是一个管理对象并可能初始化它们的容器。容器的任务是初始化 Database 对象，以便将其插入 Post 对象。

我不知道您的 IoC 是做什么的，但如果它是您的容器，我不建议您私下这样做。您可以让您的容器被传递到您要求发布对象的控制器。

[http://symfony.com/doc/current/book/service_container.html](http://symfony.com/doc/current/book/service_container.html)

# javascript - 功能无法正常工作

> ID：16190429
> 
> 赞同：1
> 
> 时间：2013-04-24T11:10:04.400
> 
> 标签：javascript, dom, canvas

当敌人发射激光时，我的功能有问题。我对此做了很多调试，我只是不知道为什么它不起作用。

当我有这样的代码时，它会射到我的 playArea 的顶部，但不会射到底部（边界拼写错误，因为我从一开始就这样做了）

```
for (var i = 0; i < enemylasers.length; i++){
        if(parseInt(enemylasers[i][0].style.top) > playArea.topBoundry){
            enemylasers[i][1] -= laserSpeed;
            enemylasers[i][0].style.top = enemylasers[i][1] + 'px';
        }else{
            playArea.removeChild(enemylasers[i][0]);
            enemylasers.splice(i,1);
        }
    } 
```

当我将一些代码更改为我认为可能正确的代码时，它不是而且不会使激光在任何​​地方射击。这就是我把它改成的。

```
for (var i = 0; i < enemylasers.length; i++){
        if(parseInt(enemylasers[i][0].style.top) > playArea.bottomBoundry){
            enemylasers[i][1] += laserSpeed;
            enemylasers[i][0].style.top = enemylasers[i][1] + 'px';
        }else{
            playArea.removeChild(enemylasers[i][0]);
            enemylasers.splice(i,1);
        }
    } 
```

这就是创造我的敌人激光的原因

```
function createenemylaser(){
    if(enemylasers.length < enemymaxlasers){ 
            var laserpush = Math.floor(Math.random()*enemies.length);
            var laser = enemylaser();
            laser.classList.add('enemylaser');
            laser.style.top = enemies[laserpush][1] + 'px';
            laser.style.left = parseInt(enemies[laserpush][0].offsetLeft) +'px';
            playArea.appendChild(laser);
            enemylasers.push([laser, enemies[laserpush][1]]);
    }
}
    setInterval(createenemylaser, 2000); 
```

这是我的敌人激光阵列

```
enemylasers=[],
    enemylaserspeed = 5,
    enemymaxlasers= 8, 
```

这就是为我的敌人激光创建 div 的原因

```
function enemylaser(){
    return document.createElement('div');
} 
```

我希望有人可以提供帮助，我在 javascript 方面不是那么有经验，但我知道安静一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:58:01.550

由于@Chips_100 建议我应该从这里的评论部分发布我的解决方案，这里是：

您需要更改`parseInt(enemylasers[i][0].style.top) > playArea.bottomBoundry`为，`parseInt(enemylasers[i][0].style.top) < playArea.bottomBoundry`因为您已经反转了激光的行进方向。

# forms - 从联系表格中隐藏选择选项字段

> ID：16190432
> 
> 赞同：0
> 
> 时间：2013-04-24T11:10:10.090
> 
> 标签：forms, select, hide

我正在创建一个具有一组图像块的模板展示主题，并且我也有一个自定义联系表。一旦用户选择图像，它也会从我的自定义表单的选择选项中动态选择。

现在我试图隐藏我的选择选项字段，

我的代码是

```
<form action="">
    <select name="templates">
      <option value="THEME001">THEME001</option>
      <option value="THEME002">THEME002</option> 
      <option value="THEME003">THEME003</option> 
      <option value="THEME004">THEME004</option> 
      <option value="THEME005">THEME005</option>  
    </select>
</form> 
```

到目前为止，我尝试`type="hidden"`了但它不起作用。除了使用 ccs 还有其他方法吗`visibility:hidden`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:20:24.117

您可以使用 jquery 的[隐藏](http://api.jquery.com/hide/)功能，如

```
$("select").hide(); 
```

我认为您可以通过 Jquery 的[删除](http://api.jquery.com/remove/)功能将其删除。

```
$("select").remove(); 
```

只需选择选择元素，您就可以使用这些 Jquery 函数来隐藏或删除您的选择元素

使用 javascript 你必须像下面这样使用 (display = 'none')

```
document.getElementById('THE ID OF YOUR SELECT BOX').style.display = 'none' 
```

# javascript - 为什么我的 jQuery.getJSON() 方法调用了 fail 方法？

> ID：16190437
> 
> 赞同：0
> 
> 时间：2013-04-24T11:10:25.480
> 
> 标签：javascript, jquery

我有一个直接从 Web 浏览器中的本地文件加载的 html 页面（FF 14.0.1 或 Chromium，在 Ubuntu 12.04 上）

html页面包含一个本地的jQuery js文件，然后用这个方法包含一个本地的js文件：

```
function start() {
     $.getJSON("http://localhost:8080/app/connect?callback=?", "id=11", function() { alert("win!"); })
     .done(function() { alert("done"); })
     .fail(function(xhr, request, error) { alert(xhr.status + "<> + request + "<>" + error); }); } 
```

我正在响应来自 JBoss / Restful Web 服务器的这些请求，没有特殊配置，服务器上的方法使用 @Produces({"application/json"}) 进行注释。服务器没有显示任何错误，甚至正确获取了 id 值。

当我触发此 javascript 时，将调用 fail 方法并收到此警报：

```
200<>parsererror<>jQuery311391951_513134 was not called 
```

使用 Firebug 检查时，我可以看到 JSON 响应，看起来没问题。在 Chromium 中，我可以检查请求/响应标头，一切看起来都不错。如果有人认为它可能会提供更多见解，我已经保存了该文本。

谁能告诉我发生了什么事？为什么我会收到此错误？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:21:21.343

看起来您正在访问本地资源，在这种情况下您不必使用 jsonp。您可以`callback=?`从网址中删除 。

如果您必须访问违反[同源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)的第三方资源，则使用它

```
function start() {
    $.getJSON("http://localhost:8080/app/connect", "id=11", function() { 
        alert("win!");
    }).done(function() { 
        alert("done"); 
    }).fail(function(xhr, request, error) { 
        alert(xhr.status + "<>" + request + "<>" + error); 
    }); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:22:59.663

您正在使用 JSONP（带填充的 JSON）。服务器必须理解`?callback=`参数并用回调函数包装 JSON 答案。这对于适用 SOP 限制的呼叫是强制性的。如果不是（相同的域和端口），则删除回调参数。

# javascript - 使用javascript切换焦点后无法编辑输入

> ID：16190440
> 
> 赞同：1
> 
> 时间：2013-04-24T11:10:43.700
> 
> 标签：javascript, android, input, focus, backspace

我在几个 Android 设备上遇到了这个问题，使用 JS 来切换焦点字段。- 当我插入值时，一切都很顺利，所以一旦一个字段达到最大长度，那么“下一个”字段就会被聚焦；- 另一方面，当我尝试使用退格键清除字段（使用下面的代码）时，在几个设备中，焦点似乎已更改为前一个字段，但我无法在其中写入任何内容。

```
$('.AllMyFields').bind('keyup', function(e) {
    if( e.keyCode == 8 && $(this).val().length == 0 ) {
        _prevField = ... the previous field selector ...

        if( _prevField.length > 0 ) { 
         _prevField.get(0).focus()
        }
    }
}); 
```

如果我手动点击该字段，那么它将起作用；任何想法？

# c# - 选择一些记录，然后在asp.net c#中同时更新它们

> ID：16190446
> 
> 赞同：0
> 
> 时间：2013-04-24T11:11:02.470
> 
> 标签：c#, asp.net, sql-server, select, sql-update

我正在开发一个 web 服务，在该服务中，我根据状态使用 select 语句获取一些记录，然后我需要更改状态。

就像是：

```
select * from tblx where status='x' 
```

进而

`update tblx set status='y' where status='x'`对于获取的记录。

示例代码：

```
 string getpaid = "select top2 * from tblfameface where img_f_p='paid'";
                con1 = new SqlConnection(conString1);
                con1.Open();
                SqlCommand cmd = new SqlCommand(getpaid, con1);
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataTable dt1 = new DataTable();
                da.Fill(dt1);

                foreach (DataRow row in dt1.Rows)
                {
                    string updatepaid = "update tblfameface set img_f_p='free' where img_f_p='paid' ";
                    con1 = new SqlConnection(conString1);
                    con1.Open();
                    SqlCommand cmd1 = new SqlCommand(updatepaid, con1);
                    int temp = cmd1.ExecuteNonQuery();
                    con1.Close();
                }
} 
```

我不知道如何解决它。

我能得到任何帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:23:40.387

你的原型是好的，除了你的“更新”查询。重写你的更新查询，比如

```
update tblx set status='y' where status=(select status from tblx where status='x'); 
```

**根据您的要求：**

```
string updatepaid = "update tblfameface set img_f_p='free' where img_f_p=(select top 2 img_f_p from tblfameface where img_f_p='paid')";
con1 = new SqlConnection(conString1);
con1.Open();
SqlCommand cmd1 = new SqlCommand(updatepaid, con1);
int temp = cmd1.ExecuteNonQuery();
con1.Close(); 
```

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:17:47.970

在这里您的更新声明是错误的：

```
UPDATE <TABLE NAME> SET <Column> = <New Value> WHERE <Condition> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:22:05.457

在这里，您可以只执行一条更新语句，如下所示。

```
UPDATE YourTable
SET status='Y'
WHERE status='X' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:22:58.993

请更具体一点。你有 sql 或 c# 的问题吗？

这可能对 C# 有帮助：

[http://msdn.microsoft.com/en-us/library/tyy0sz6b.aspx](http://msdn.microsoft.com/en-us/library/tyy0sz6b.aspx)

这对于 sql：

[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T11:16:02.117

更新 tblx set status='y' where status='x';

# c# - C# 中的数据处理 - 最佳方法？

> ID：16190448
> 
> 赞同：1
> 
> 时间：2013-04-24T11:11:05.647
> 
> 标签：c#, sql-server

我还在 C# 和 SQL Server 的学习曲线上，所以请原谅我的“绿色”。

这是我的场景：

我有一个包含 10,000 行的 EMPLOYEE 表。这些员工中的每一个在 TRANSACTIONS 表中都有事务。

交易表有基本工资、代理津贴、加班时间等工资元素。它还有工资扣除，如预扣、部分贷款（含利息）和储蓄（养老金、社保储蓄等）。

我需要检查每个员工的交易并计算税金、未偿还的贷款余额、更新储蓄余额、将工作时间转换为付款/扣除额以及其他一些东西。

此处理将为每个员工提供一组新的行，并带有一个期间标记（例如 2013 年 4 月的 2013-04）。我需要将其存储在 HISTORY 表中以供将来参考。

处理整个 10,000 个员工表及其事务的最佳方法是什么？

有人告诉我，通过阅读器将整个表格拉入内存不是好的做法，我同意。

我是否一直从数据库中提取员工、处理他们的事务并将历史记录提交到数据库？并拉下一个等等？

后端调用太多？

（EF 不是我的选择，仍在 ADO.NET 中执行原始 SQL）

我将不胜感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:30:42.027

10000 行并不多。如果没有大量的 varchar 或 binary 列，内存可以轻松处理。不要觉得完全被良好的实践“规则”所束缚。

另一方面，考虑一个[存储过程](http://www.codeproject.com/Articles/38682/Overview-of-SQL-Server-Stored-Procedure)。然后所有处理都将在服务器本地完成。

编辑：如果以上都不是一个选项，请尝试流式传输您的结果。例如，在阅读查询时，将每一行保存在 a`ConcurrentQueue`或类似的内容中。在执行查询之前，启动另一个线程或 a`BackgroundWorker`来检查队列中的新项目并将结果同时保存在另一个`SqlConnection`. `Count`查询完成且队列为0时，工作将完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:44:48.653

使用`ROW_NUMBER()`. 程序可以使用它来允许一次使用“x”行数来浏览大型表。然后，您可以想象使用相同的方法对您的作业进行批处理，例如，一次 1000 行。

有关更多信息，请参阅[此](http://beyondrelational.com/modules/2/blogs/28/posts/10434/sql-server-server-side-paging-with-rownumber-function.aspx)链接。

# javascript - 选择与目标相同的父元素

> ID：16190450
> 
> 赞同：0
> 
> 时间：2013-04-24T11:11:09.920
> 
> 标签：javascript, jquery, html

假设我有一个设置：

```
<ul id="cal">
    <li><span>test</span><img /></li>
    <li><span>test</span><img /></li>
    <li><span>test</span><img /></li>
</ul> 
```

在 jQuery 中：

```
$('#cal li span').hover(function(){
    $("#cal li img").trigger('mouseover');
}); 
```

我需要在#cal li img 上触发鼠标悬停，但仅在跨度的图像上而不是所有图像上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:12:16.513

您可以参考最接近的`<img>`using`$(this).next()`或 with：

```
$("#cal li span").hover(function() {
    $(this).siblings("img").trigger("mouseover");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:12:34.443

指定它与您的上下文相关联：

```
$('#cal li span').hover(function(){
    $(this).parent().find("img").trigger('mouseover');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:14:04.247

```
$('#cal li span').hover(function(){
    $(this).next("img").trigger('mouseover');
}); 
```

# java - 从数字转换为十六进制字母？

> ID：16190452
> 
> 赞同：3
> 
> 时间：2013-04-24T11:11:11.117
> 
> 标签：java

我正在尝试使用 JExcel 重新排序一些 Excel 列。我还需要找到对其他单元格的引用，然后重新映射它们以引用正确的单元格。我觉得我做了很多艰苦的工作，但我遇到了一个绊脚石。

[我在wikipedia](http://en.wikipedia.org/wiki/Hexavigesimal#Conversion_algorithm_.28alphabet-only_system.29)上找到了这段代码，链接到 SO：

```
 public static String toBase26(int number){
        number = Math.abs(number);
        String converted = "";
        // Repeatedly divide the number by 26 and convert the
        // remainder into the appropriate letter.
        do
        {
            int remainder = number % 26;
            converted = (char)(remainder + 'A') + converted;
            number = (number - remainder) / 26;
        } while (number > 0);

        return converted;
    } 
```

但是当我在其中运行数字 35 时，会发生以下情况：

1.  `number`= 35
2.  `remainder`= 9
3.  `converted`= 字符(9+'A')+"" = J
4.  `number`= (35-9)/26 = 1
5.  1>0
6.  `remainder`= 1
7.  `char(1+'A')`= B
8.  `converted`= 字符(1+'A')+"J" = BJ

以某种预期的方式，即 Base 10 (35) = Base 26 (19)。但我实际上想参考 AJ 栏。

我无法弄清楚我需要做哪些改变才能得到正确的字母。每当我试图在纸上解决它时，我最终都会毁掉之前提取的字母。例如，我认为[这](https://stackoverflow.com/a/182924/1075247)行不通，因为这意味着我`remainder`第一次以 8 结束，然后将转换为 I，除非我错过了什么？

对此的任何帮助将不胜感激。我环顾四周并在这上面浪费了足够的时间。我只是想要一些帮助来让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:19:07.383

这个“十六进制系统”背后的绊脚石是它有一个 0，但单位列跳过了 0 并且范围仅从 AZ 开始。考虑以下十进制转换：

```
A 1 (0*26 + 1)
...
Z 26 (0*26 + 26)
AA 27 (1*26 + 1)
...
AZ 52 (1*26 + 26)
BA 53 (2*26 + 1)
...
BZ 78 (2*26 + 26)
CA 79 (3*26 + 1)
...
ZZ 702 (26*26 + 26)
AAA 703 (1*26*26 + 1*26 + 1) 
```

看到问题了吗？十六进制数字中缺少“零”：

```
00A 1
...
00Z 26
0AA 27
...
0AZ 52
0BA 53
...
0BZ 78
0CA 79
...
0ZZ 702 (26*26 + 26)
AAA 703 (1*26*26 + 1*26 + 1) 
```

但是，单位列从来没有零！

显然我们不会打印这些零，但它应该有助于您了解出了什么问题。

* * *

这是我们的算法。我在十进制 0 = 十六进制 A、1 -> B、25 -> Z、26 -> AA 等假设下编写算法，因为它让我更容易理解。如果这不是您想要的假设，只需在运行代码之前减去 1 :)

```
0\. If number =< 0, return.

1\. Modulo by 26\. Convert 0-25 to 'A'-'Z'. //This is our units column.

Loop {

    2\. Divide the number by 26 (integer division rounding down).

    3\. If number =< 0, return.

    4\. Modulo by 26\. Convert 0-25 to 'Z','A'-'Y'. //This is our next column (prepend to string output).

} 
```

## 例子

转换十进制 730 -> ABC 十六进制

以 730 为模乘以 26 = 2 -> 'C' 表示单位列

730 除以 26 = 28

模 28 x 26 = 2 -> 'B' 十列

28 除以 26 = 1

模 1 乘 26 = 1 -> 'A' 表示数百列

将 1 除以 26 = 0

数字为空，因此返回 'ABC'

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-05T06:16:00.113

这是一个简单的 Python 函数，用于计算数字的十六进制表示（以任意基数），其中`a`等于`1`(not `0`)。

问题的棘手部分是，在每一步中，您都在其余部分之间`1`进行`10`取舍，因此您需要在模数中考虑到这一点。`1`下面的代码通过每次从数字中减去来解释它。然后`0`成为一个非常方便的结束条件，因为你不能`0`用十六进制表示（[维基百科条目](https://en.wikipedia.org/wiki/Bijective_numeration)表示它`λ`）。

```
# Formats a number as a bijective base N string.
def bijective(n, base):
  chars = ''
  while n != 0:
    chars = chr((n - 1) % base + 97) + chars
    n = (n - 1) / base

  return chars

# Examples!
if __name__ == '__main__':
  base = 26
  for n in range(1, 2 * base * base):
    print('{}: {}'.format(n, bijective(n, base))) 
```

[在pythonanywhere](https://www.pythonanywhere.com/gists/4a5a032944f1c9bc0f4a/bijective.py/ipython2)上查看它的实际效果。

[我在这个要点](https://gist.github.com/theazureshadow/4a5a032944f1c9bc0f4a)中包含了一个 javascript 版本。

# javascript - 如何从 onclick div 属性检测 Javascript 中的 control+click？

> ID：16190455
> 
> 赞同：72
> 
> 时间：2013-04-24T11:11:18.597
> 
> 标签：javascript, jquery

我需要知道用户是否正在单击或控制单击 div 元素。我已经看到了有关如何使用事件侦听器进行操作的示例。但是我的代码已经设置到位，并且正在使用元素上的**onclick**方法。 .

HTML

```
 <div id='1' onclick='selectMe()'>blah</div> 
```

JS

```
 function selectMe(){
         //determine if this is a single click, or a cntrol click 
    } 
```

...也很想知道是鼠标左键还是右键单击。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-04-24T11:20:25.387

在您的处理程序中，检查`window.event`对象的属性`ctrlKey`，如下所示：

```
function selectMe(){
    if (window.event.ctrlKey) {
        //ctrl was held down during the click
    }
} 
```

**更新：** 上述解决方案依赖于窗口对象的[专有属性](https://developer.mozilla.org/en-US/docs/Web/API/Window/event)，可能不应该指望它存在于所有浏览器中。幸运的是，我们现在有一个可以满足我们需求的[工作草案](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/ctrlKey)，并且根据 MDN，[它得到了广泛的支持](https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/ctrlKey#Browser_compatibility)。例子：

*HTML*

```
<span onclick="handler(event)">Click me</span> 
```

*JS*

```
function handler(ev) {
  console.log('CTRL pressed during click:', ev.ctrlKey);
} 
```

[这同样适用于键盘事件](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/ctrlKey)

**另请参阅** [KeyboardEvent.getModifierState()](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/getModifierState)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-24T11:38:05.147

**2021 年更新：现在有更好的方法来做到这一点。请务必查看其他答案**

我建议在文档上使用 JQuery 的 keyup 和 keydown 方法，因为它规范了事件代码，以制作一个跨浏览器的解决方案。

对于右键单击，您可以使用 oncontextmenu，但要注意它在 IE8 中可能会出现错误。在此处查看兼容性图表：

[http://www.quirksmode.org/dom/events/contextmenu.html](http://www.quirksmode.org/dom/events/contextmenu.html)

```
<p onclick="selectMe(1)" oncontextmenu="selectMe(2)">Click me</p>

$(document).keydown(function(event){
    if(event.which=="17")
        cntrlIsPressed = true;
});

$(document).keyup(function(){
    cntrlIsPressed = false;
});

var cntrlIsPressed = false;

function selectMe(mouseButton)
{
    if(cntrlIsPressed)
    {
        switch(mouseButton)
        {
            case 1:
                alert("Cntrl +  left click");
                break;
            case 2:
                alert("Cntrl + right click");
                break;
            default:
                break;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2017-02-16T06:43:25.930

因为自从第一次提出这个问题以来已经有好几年了，其他答案已经过时或不完整。

这是使用 jQuery 的现代实现的代码：

```
$( 'div#1' ).on( 'click', function( event ) {
    if ( event.ctrlKey ) {
        //is ctrl + click
    } else {
        //normal click
    }
} ); 
```

至于检测右键单击，这是由另一个用户正确提供的，但我将在此处列出它只是为了将所有内容放在一个地方。

```
$( 'div#1' ).on( 'contextmenu', function( event ) {
    // right-click handler
} ) ; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-04-27T07:21:17.490

当有鼠标点击时，**ctrlKey**是事件属性，可以作为 e.ctrlKey 访问。 `Look down for example`

```
$("xyz").click(function(e)){
  if(e.ctrlKey){
    //if ctrl key is pressed
  }
  else{
    // if ctrl key is not pressed
  }
} 
```

注意：[https ://www.w3schools.com/jsref/event_key_keycode.asp](https://www.w3schools.com/jsref/event_key_keycode.asp)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-13T10:07:52.440

试试这个代码，

```
$('#1').on('mousedown',function(e) {
   if (e.button==0 && e.ctrlKey) {
       alert('is Left Click');
   } else if (e.button==2 && e.ctrlKey){
       alert('is Right Click');
   }
}); 
```

抱歉，我添加了**e.ctrlKey**。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-24T11:20:27.597

试试这个：

```
var control = false;
$(document).on('keyup keydown', function(e) {
  control = e.ctrlKey;
});

$('div#1').on('click', function() {
  if (control) {
    // control-click
  } else {
    // single-click
  }
}); 
```

并且右键单击会触发一个`contextmenu`事件，因此：

```
$('div#1').on('contextmenu', function() {
  // right-click handler
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T11:20:08.637

您无法检测到某个键在按下后是否已按下。js中只能监听关键事件。在您的情况下，我建议`onclick`使用按键事件进行更改，然后通过事件键码检测它是否是控制键，然后您可以添加您的点击事件。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-01T05:19:19.617

仅从上面，刚刚编辑，所以它可以马上工作

```
<script>
    var control = false;
    $(document).on('keyup keydown', function (e) {
        control = e.ctrlKey;
    });

    $(function () {
        $('#1x').on('click', function () {
            if (control) {
                // control-click
                alert("Control+Click");
            } else {
                // single-click
                alert("Single Click");
            }
        });
    }); 

</script>
<p id="1x">Click me</p> 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-11-09T22:43:09.037

纯JavaScript：

```
var ctrlKeyCode = 17;
var cntrlIsPressed = false;

document.addEventListener('keydown', function(event){
    if(event.which=="17")
        cntrlIsPressed = true;
});

document.addEventListener('keyup', function(){
    if(event.which=="17")
        cntrlIsPressed = true;
});

function selectMe(mouseButton)
{
    if(cntrlIsPressed)
    {
        switch(mouseButton)
        {
            case 1:
                alert("Cntrl +  left click");
                break;
            case 2:
                alert("Cntrl + right click");
                break;
            default:
                break;
        }
    }
} 
```

# java - 无法添加 RESTEasy WS

> ID：16190460
> 
> 赞同：0
> 
> 时间：2013-04-24T11:11:26.037
> 
> 标签：java, jakarta-ee, jboss, resteasy

根据[本](http://docs.jboss.org/seam/2.2.2.Final/reference/en-US/html/webservices.html#d0e22185)手册，添加 Web 服务应该是小菜一碟，但我正在努力使其可访问。这是代码：

```
@Name("examineeController")
@Path("/examinee")
public class ExamineeController {

    @GET
    @Produces("text/plain")
    @Path("/setteststatus")
    private String updateProjectTestStatus(/) {
        return "OK";
    } 
```

...并像这样收到 404：

`HTTP Status 404 - Could not find resource for relative : /examinee/setteststatus of full path: http://localhost:8080/am/seam/resource/rest/examinee/setteststatus`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:18:45.450

我史诗中最史诗的失败。`private String updateProjectTestStatus(/)` `private`！！！它必须是`public`！

# android - Android报警：重新安装应用程序时传递的数据错误

> ID：16190463
> 
> 赞同：1
> 
> 时间：2013-04-24T11:11:42.987
> 
> 标签：android, alarmmanager, reinstall

我有一个使用`alarms`using的应用程序`AlarmManager`。我在某个时间设置了一个闹钟，当它触发时，它会在 2 小时后再次设置。第二次触发警报它没有再次设置，所以它只触发了 2 次。

要知道触发的警报是第一个还是第二个，我将 a`boolean`作为参数传递给 BroadcastReceiver，如下所示：

```
 Bundle b = new Bundle();
    b.putBoolean(TODAlarm.KEY_IS_INFRACTION, true);

    Intent intent = new Intent(me, TODAlarm.class);
    intent.putExtras(b);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(me, TODAlarm.TYPE_DAILY_REST_NEEDED,
            intent, PendingIntent.FLAG_ONE_SHOT);

    alarmManager.set(AlarmManager.RTC_WAKEUP, time+2*HOURS, pendingIntent); 
```

第一次编写警报时，我将 KEY_IS_INFRACTION 设置为 false。当它被触发时，我使用上面的代码并将其设置为 true。

如果我`Eclipse`在触发一次警报时重新安装应用程序（使用->运行）（我有一个使用 KEY_IS_INFRACTION = true 但尚未触发的警报），在重新安装后编程的警报有 KEY_IS_INFRACTION = false，但是收到的意图`BroadcastReceiver`有 KEY_IS_INFRACTION = true （它似乎在重新安装应用程序之前收到了编程的警报，即使我使用了alarmManager.cancel）。这只发生在我重新安装应用程序时，如果我重新启动手机，收到的意图是好的。我总是在alarmManager.set 之前使用alarmManager.cancel，但它也不起作用。

最终的应用程序不会经常重新安装，但如果我发布更新，这可能会导致应用程序行为出现错误。有人知道我该如何解决吗？

这是正确的操作序列（应用程序应该做什么）：

1-安装应用程序。警报设置为小时 X，INFRACTION = false。

2 小时 X 到达并触发警报。接收到 INFRACTION = false的`BroadcastReceiver`意图，并使用 INFRACTION = true 再次设置警报。

3-重新安装应用程序。警报设置为小时 X，INFRACTION = false。由于 X 小时已经过去，警报被触发。`BroadcastReceiver`接收到**INFRACTION = false**的意图，并使用 INFRACTION = true 再次设置警报。

这是真正发生的事情：

1-安装应用程序。警报设置为小时 X，INFRACTION = false。

2 小时 X 到达并触发警报。接收到 INFRACTION = false的`BroadcastReceiver`意图，并使用 INFRACTION = true 再次设置警报。

3-重新安装应用程序。警报设置为小时 X，INFRACTION = false。由于 X 小时已经过去，警报被触发。`BroadcastReceiver`接收到**INFRACTION = true**的意图，并且没有再次设置警报。

[编辑] 添加一些代码。这是在应用程序首次启动时设置警报的功能：

```
private void setNeededRestAlarmOrWarning(int type, long timeToStart){ 
    Bundle b = new Bundle();
    b.putInt(TODAlarm.KEY_ALARM_TYPE, type);
    if(type == TODAlarm.TYPE_DAILY_REST_NEEDED){
        b.putBoolean(TODAlarm.KEY_IS_INFRACTION, arr_bControls[CONTROL_PERMITIR_DORMIR_9_HORAS] || 
                arr_iControls[CONTROL_LIMIT_TO_RECUPERATE] == 0 ||
                arr_iControls[CONTROL_TIME_TO_RECUPERATE_COUNTER] >= Times.CTRL_PERMITTED_DESCANSOS_REDUCIDOS_POR_SEMANA);
        Log.d(TAG, "INFRACTION IS "+b.getBoolean(TODAlarm.KEY_IS_INFRACTION));
    }

    Intent intent = new Intent(me, TODAlarm.class);
    intent.putExtras(b);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(me, type,
            intent, PendingIntent.FLAG_ONE_SHOT);
    alarmManager.set(AlarmManager.RTC_WAKEUP, timeToStart, pendingIntent);      
} 
```

当警报被触发时，我使用上面发布的代码，在编辑之前。

[/编辑]

# python - 当内存不是问题时，`dict` 可以替换 `list` 吗？

> ID：16190465
> 
> 赞同：-3
> 
> 时间：2013-04-24T11:11:46.387
> 
> 标签：python, python-3.x, containers, built-in-types

我可以将任何列表表示为字典，其键是有效的列表索引，其值是列表的项目。例如，`[5, 6, 'a']`将表示为`{0:5, 1:6, 2:'a'}`。

在渐近时间和内存复杂度方面，`dict`表示与 相同`list`。`list`以常数因子使用更少的内存。

如果内存不是问题，我是否总是可以使用`dict`而不是列表和其他序列（以获得使用任意键的灵活性，并通过减少使用的不同容器的数量来稍微标准化代码）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:14:37.197

考虑到进入其中的数据，更喜欢最有意义的数据结构。

`dict`s 很棒，但是，例如，它们不保持顺序：因此，如果您想按顺序迭代值，则必须根据键进行排序，这会产生复杂性并使其难以阅读。

一般来说，在`dict`任何地方使用 s 代替`list`s 都不太可能显着提高应用程序的速度——这是过早的优化。

更重要的是对代码的读者和修改者有意义的内容，以及最适合您尝试存储的数据的内容。在存储数据序列的地方，使用`list`. 在您存储映射的地方，使用`dict`.

# ios - 在 iPhone 中获取图像属性以检查图像质量

> ID：16190467
> 
> 赞同：1
> 
> 时间：2013-04-24T11:11:51.550
> 
> 标签：ios, image, image-processing

我正在从 iPhone 相机捕获图像并将其存储在文档文件夹中以供进一步检查和使用。

在存储图像之前，我想根据 RGB 值、灰度和白平衡等检查图像质量。

我能从图像中得到的一切。但我无法理解应该或如何使用任何可以帮助我检索这些信息的框架。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T07:01:47.543

如果您想从 UIImage 检索元数据 - 选中此

[https://github.com/foundry/UIImageMetadata](https://github.com/foundry/UIImageMetadata)

例如，如果您想获得色彩平衡，我认为您必须从图像中获取像素数据并自行计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T06:51:24.257

这个应用程序可能会做你想做的事。它被称为照片元数据阅读器。我在屏幕截图中看到它有 RGB。

[https://itunes.apple.com/us/app/photo-metadata-reader/id437865801?mt=8](https://itunes.apple.com/us/app/photo-metadata-reader/id437865801?mt=8)

# sqlite - GROUP BY 查询的“错误：无法打开数据库文件”

> ID：16190471
> 
> 赞同：1
> 
> 时间：2013-04-24T11:12:00.957
> 
> 标签：sqlite, cygwin

我有一个 python 脚本，它从一些外部数据创建一个 sqlite 数据库。这工作正常。但是每次我在这个数据库上执行 GROUP BY 查询时，我都会收到“错误：无法打开数据库文件”。正常的 SELECT 查询工作。

这对于 python 的 sqlite3 库和 sqlite3 cli 二进制文件都是一个问题：

```
sqlite> SELECT count(*) FROM REC;
count(*)
----------
528489
sqlite> SELECT count(*) FROM REC GROUP BY VERSION;
Error: unable to open database file
sqlite> 
```

我知道这些错误通常是权限错误（我已经阅读了我在 StackOverflow 上可以找到的关于这个主题的所有问题），但我很确定这不是我的情况：

1.  我说的是一个容易创建的数据库和读取请求
2.  我检查了权限：文件及其包含的文件夹都设置了写权限
3.  我什至可以写入数据库：创建新表没问题。
4.  该设备未满，它有足够的空间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:23:27.053

确保您的进程有权访问 TEMP 目录。

从[SQLite 的使用临时磁盘文件](http://www.sqlite.org/tempfiles.html)文档：

> SQLite 可以利用瞬态索引来实现 SQL 语言功能，例如：
> 
> *   ORDER BY 或 GROUP BY 子句
> *   聚合查询中的 DISTINCT 关键字
> *   由 UNION、EXCEPT 或 INTERSECT 连接的复合 SELECT 语句
> 
> 每个临时索引都存储在自己的临时文件中。临时索引的临时文件会在使用它的语句结束时自动删除。

您可能可以通过将[`temp_store`编译指示](http://www.sqlite.org/pragma.html#pragma_temp_store)设置为来验证临时存储是否是问题`MEMORY`：

```
PRAGMA temp_store = MEMORY; 
```

告诉 SQLite 将`GROUP BY`子句的临时索引保留在内存中。

或者，在要分组的列上创建显式索引，以防止创建临时索引。

# string - Sybase：从二进制列中获取特定字符串

> ID：16190472
> 
> 赞同：1
> 
> 时间：2013-04-24T11:12:10.913
> 
> 标签：string, sybase, binary-data

在 Sybase 上，我有一个包含二进制列的表。使用`convert(varchar(16384), convert(binary(16384), T1.TEXT)) as Text`我可以将包含的数据转换为字符串格式。现在有我的问题：我需要从该字段中选择一个字符串作为包含特定单词的新字符串。我该怎么做？

让我举个例子。如果我假设在一行中该字段包含字符串“此活动的输出是 txt 文件：文件 orange.txt、文件 black.txt 和最终文件 red.txt”，在我的查询输出中，我希望该字段为“橙色.txt，黑色.txt，红色.txt”。

有可能做到吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T01:39:08.710

你不能这样做。这是因为 Sybase 下的 BINARY 和 TEXT 数据类型都不允许子字符串搜索或正则表达式处理。

当您存储字符数据时，VARCHAR 或 UNIVARCHAR 始终是更好的选择。仅当 TEXT 字段大于 Sybase 配置的页面大小时，才应使用 TEXT 作为类型。

# xml - 将 xml 根拆分为两个分支 - 可选择删除不需要的属性

> ID：16190476
> 
> 赞同：0
> 
> 时间：2013-04-24T11:12:17.527
> 
> 标签：xml, xslt, transform, transformation

这个问题与我之前的问题非常相似（如何将 xml root 拆分为两个分支 - 除了第一个分支中的特定子项和第二个分支中的特定子项之外的所有子项）。

和以前一样，我有一个文件：

```
<config width="100" height="200">
    <parameter name="account number" country="UK">
        12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
        UK0112
    </parameter>
    <parameter name="email-address" accepts="yes">
        john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
        W1A 1HQ
    </parameter>
    <parameter name="additional parameters" mode="on">
        <parameter name="preferences" type="internal">
            Not applicable
        </parameter>
        <parameter name="issues" type="internal" category="normal">
            None
        </parameter>
        <parameter name="complaints" type="internal">
            None
        </parameter>
        <parameter name="approbation" type="external">
            X11
        </parameter>
    </parameter>
</config> 
```

这次我想解开一个名为“问题”的任意子节点并将其放入单独的分支中并保留每个节点的所有属性（例如宽度、高度或任何可能存在的附加值，例如颜色） - 解决方案是由 ABach 提供（谢谢）。现在不同的是我想在将节点移动到单独的分支之前删除属性类别

```
<configs>
    <config width="100" height="200">
        <parameter name="account number" country="UK">
            12345678901234567890123456
        </parameter>
        <parameter name="client code" codeType="xa">
            UK0112
        </parameter>
        <parameter name="email-address" accepts="yes">
            john.sparrow@rex.co.uk
        </parameter>
        <parameter name="postal-code" country="UK">
            W1A 1HQ
        </parameter>
        <parameter name="additional parameters" mode="on">
            <parameter name="preferences" type="internal">
                Not applicable
            </parameter>
            <parameter name="complaints" type="internal">
                None
            </parameter>
            <parameter name="approbation" type="external">
                X11
            </parameter>
        </parameter>
    </config>
    <config width="100" height="200">
        <parameter name="issues" type="internal">
                None
        </parameter>
    </config>
<configs> 
```

子项及其父项的选择是硬编码的（参数/参数）并基于属性名称（问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:40:18.793

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/">
    <configs>
      <xsl:apply-templates />
    </configs>
  </xsl:template>

  <xsl:template match="config[parameter/parameter/@name = 'issues']">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates 
           select="parameter/parameter[@name = 'issues']"
           mode="extract" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="parameter/parameter[@name = 'issues']" />

  <xsl:template match="*" mode="extract">
    <xsl:copy>
      <xsl:apply-templates select="@*[local-name() != 'category'] | node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的样本输入时，结果是：

```
<configs>
  <config width="100" height="200">
    <parameter name="account number" country="UK">
      12345678901234567890123456
    </parameter>
    <parameter name="client code" codeType="xa">
      UK0112
    </parameter>
    <parameter name="email-address" accepts="yes">
      john.sparrow@rex.co.uk
    </parameter>
    <parameter name="postal-code" country="UK">
      W1A 1HQ
    </parameter>
    <parameter name="additional parameters" mode="on">
      <parameter name="preferences" type="internal">
        Not applicable
      </parameter>
      <parameter name="complaints" type="internal">
        None
      </parameter>
      <parameter name="approbation" type="external">
        X11
      </parameter>
    </parameter>
  </config>
  <config width="100" height="200">
    <parameter name="issues" type="internal">
      None
    </parameter>
  </config>
</configs> 
```

# c++ - 对“WinMain@16”的未定义引用

> ID：16190477
> 
> 赞同：0
> 
> 时间：2013-04-24T11:12:18.150
> 
> 标签：c++, header, linker, declaration

我收到一个 [Linker Error] 未定义的对“WinMain@16”的引用，我无法解决这个问题。我正在使用 Dev-C++ - 在我的项目设置中选择了“Win32 控制台”，因为我希望它是一个控制台应用程序。

示例头文件（Test.h）：

```
#ifndef TEST_H
#define TEST_H
#include<string>
using namespace std;
class Test {
  private:
    int testing;
  public:
    int main();
};
#endif 
```

示例 .cpp 文件

```
#include<iostream>
#include "Test.h"
using namespace std;
int Test::main(){ 
   /*         EXAMPLE       */
   cout << "Enter Test" <<endl;
   cin >> testing;
   cout << "----------------------------"<<endl;
   system("pause");
   return 0;   
} 
```

`Test::`我可以通过删除main() 前面的来修复错误，但我希望它引用我的头文件。如果它没有引用我的头文件，我的所有变量都将变为未声明的......除非我将它们放入程序本身。

请注意，代码只是我正在做的一个例子。如果它很明显，再次抱歉。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:26:26.373

评论本身提供了答案，但这里是要点::

```
#ifndef TEST_H
#define TEST_H
#include<string>
using namespace std;
class Test {
  private:
    int testing;
  public:
    int main();
};

int Test::main(){ 
   /*         EXAMPLE       */
   cout << "Enter Test" <<endl;
   cin >> testing;
   cout << "----------------------------"<<endl;
   system("pause");
   return 0;   
}
#endif 
```

在 .cpp 文件中::

```
#include<iostream>
#include "Test.h"
using namespace std;
int main(){ 
   /*         EXAMPLE       */
   Test *testObject = new Test();
   testObject->main();
   delete(testObject);
   system("pause");
   return 0;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T01:08:37.250

`system("PAUSE")`哦，当有更好的方法时，你为什么要使用！？（你可以在这里阅读为什么`system()`是邪恶的：[http](http://www.cplusplus.com/forum/articles/11153/) ://www.cplusplus.com/forum/articles/11153/ ）为什么不使用这样的东西：

```
void PressEnterToContinue()
{
    std::cout << "Press ENTER to continue...\n";
    std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
} 
```

然后在最后调用函数？？

# c++ - 可以以某种方式从私有类中检索“主机实例”吗？

> ID：16190485
> 
> 赞同：3
> 
> 时间：2013-04-24T11:12:40.887
> 
> 标签：c++

我有以下设置（简化）：

```
class A {
    public:
        void doBar() {  B b; b.bar();  }

    private:
        int foo;

        class B {
            public: void bar() {  /* do somehting with foo */  }
        };
}; 
```

现在，VS 告诉我：

> 非静态成员引用必须相对于特定对象

好吧，这听起来很合理。但是，由于这个类`B`是私有的，`A`我可以确定它永远不会在`A`（好的，静态方法`A`是一个例外）的（特定）实例的实例之外使用。

所以底线，是否有机会`A`从 的方法中获取当前实例`B`，即实例化的`B b`实例？我特别在寻找一个干净的解决方案，否则我只会传递参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:27:42.717

在另一个类中声明一个类不会创建“包含”，只会创建类声明的范围。通常来说，您的`B`对象不包含在`A`对象中，除非您通过彼此持有引用的方式使它们如此。

所以不行; 没有任何机制`B`可以让 a 确定是哪个实例`A`创建了它，因为这种情况没有什么特别之处。

想想看：`B`在您的示例中，该对象是在堆栈上创建的，但它可能是堆分配的。该`A`对象也可能是使用“new”在堆上创建的，或者在堆栈上，或者在自定义堆上，或者通过“placement-new”创建的。内存中的两个对象之间根本没有关系。

# java - 在 JLabel 中使用 html 显示图像

> ID：16190490
> 
> 赞同：0
> 
> 时间：2013-04-24T11:12:52.387
> 
> 标签：java, html, jlabel

我使用以下方法将 ImageIcon 转换为缩略图：

```
ImageIcon im = new ImageIcon(url);
Image image = im.getImage().getScaledInstance(80,100,Image.SCALE_DEFAULT); 
```

现在，当我尝试使用 html 在 JLabel 中显示图像时遇到问题。在将 ImageIcon 转换为 Image 之前，以下代码运行良好：

```
JLabel label = new JLabel("<html>" + im); 
```

但是现在当我尝试使用图像做同样的事情时，它不起作用。关于如何在 JLabel 中使用 html 显示结果图像的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T11:05:43.840

有什么问题：

```
JLabel label = new JLabel("<html><img height='" + height + "' width='" + width
               + "' src='" + url + "'></html>"); 
```

例如：

```
JLabel label = new JLabel("<html><img  height='80' width='100' src='https://developer.cdn.mozilla.net/media/img/mdn-logo-sm.png' /></html>"); 
```

注意：不要将 px 添加到高度或宽度值

这里的一些文档：

[http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/ImageView.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/ImageView.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:37:39.050

您不能在 JLabel 中显示 HTML 代码。您将需要使用 htmlPanel。您可以稍后设置它的首选大小，这是您需要添加的内容。

```
JPanel htmlPanel = new HtmlPanel("<html><body><img src="file path goes here"></body></html>"); 
```

这是我编写的完整代码。

```
JPanel htmlPanel = new HtmlPanel("<html><body><img src="images/file.png"></body></html>");

htmlPanel.setPreferredSize(new Dimension(TheWidthGoesHere, TheHeightGoesHere)); 
```

然后，您可以像添加任何其他组件一样将 htmlPanel 添加到您的框架中。

```
frame.add(htmlPanel); 
```

# threadpool - 如何以正确的方式在 Java EE 6 中实现带有贪婪工作池的作业队列？

> ID：16190491
> 
> 赞同：0
> 
> 时间：2013-04-24T11:12:55.777
> 
> 标签：threadpool, java-ee-6, task-queue, worker, greedy

我正在寻找一种正确的方法，在 Java EE 6 中执行以下操作，如果可能的话，仅使用 vanilla Java EE 6。

我想将一个作业放入作业队列并拥有一个固定的工作对象池，如果它们空闲，它们应该从队列中拉出一个作业。

工作对象与遗留系统具有固定关系，因此不可能在多个线程中为所有作业使用一个工作对象，也不可能为每个工作实例化一个新的工作对象。

贪婪的工人模式看起来很完美，但这只适用于 Java SE。在 EE 中，我不确定实现这一点的正确方法是什么。

有什么建议么？

提前致谢。M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:33:43.247

首先要注意的是，根据规范中的定义，您不得在 JavaEE 中创建和启动自己的线程。

关于您的设置，我不完全确定它在您的系统中是如何工作的 - 您是否一直与客户有固定的关系，或者是否只有不时执行的作业然后为一个客户工作？

在这两种情况下，您都可以只使用有状态的 EJB，以便一个 EJB 服务于特定的客户端系统。然后对于第一种情况，此 EJB 为整个生命周期服务于客户端，或者对于第二种情况，您可以启动异步 EJB 来完成工作。

# java - 在 Eclipse 中导入具有自定义 pom 名称的 Maven 项目

> ID：16190492
> 
> 赞同：5
> 
> 时间：2013-04-24T11:12:55.977
> 
> 标签：java, eclipse, maven

如何使用非默认 pom2.xml 在 Eclipse 中导入 Maven 项目（我有 m2e 插件），如下所示：

```
project
   + src
   + pom2.xml
   + pom.xml 
```

我可以使用 构建项目`mvn clean install -f pom2.xml`，但无法在 Eclipse 中导入。似乎 m2e 缺少此功能。

编辑：重复：[如何在 m2eclipse 中导入替代 pom.xml 文件](https://stackoverflow.com/questions/7640143/how-do-i-import-an-alternative-pom-xml-file-in-m2eclipse)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:31:45.080

我尝试并成功地通过以下方式导入了一个以 pom2.xml 作为其 pom 的 maven 项目：

> mvn clean install -f pom2.xml

从命令行。

从 eclipse 导入现有项目。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:30:21.883

这是不可能的。

更多信息可以在以下位置找到：[如何在 m2eclipse 中导入替代 pom.xml 文件](https://stackoverflow.com/questions/7640143/how-do-i-import-an-alternative-pom-xml-file-in-m2eclipse)

# asp.net - 时间格式化 ASP.NET GridView

> ID：16190497
> 
> 赞同：0
> 
> 时间：2013-04-24T11:13:13.600
> 
> 标签：asp.net, time, formatting

我在网格中有一个标签，其值是从弹出窗口中的下拉列表中填充的（下拉列表的时间值以小时为单位 - 00 到 23）。我已经像这样在网格中绑定了标签。

`<asp:Label ID="lblFromTime" runat="server" Text='<%# Eval("FromTime", "{0:hh/mm}")%>'></asp:Label>`

问题是当我从下拉列表中选择 13 时（任何大于 12 的值），它填充为**01-00**而不是**13-00**。

如何将值显示为**13-00**？

**编辑：**

当我改变标签时

`<asp:Label ID="lblFromTime" runat="server" Text='<%# Eval("FromTime", "{0:HH/MM}")%>'></asp:Label>`

并从我的下拉列表中选择**13**，它将文本显示为**13-04**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:17:05.700

您需要将格式更改为：

```
"{0:HH/mm}" 
```

例如：

```
<asp:Label ID="lblFromTime" runat="server" Text='<%# Eval("FromTime", "{0:HH/mm}")%>'></asp:Label> 
```

资本`HH`是关键。

这是一个很好的[TimeFormatting](http://www.codeproject.com/Tips/206348/12-24-Hour-Time-format)参考

# jquery - on() 方法的奇怪之处

> ID：16190501
> 
> 赞同：1
> 
> 时间：2013-04-24T11:13:17.093
> 
> 标签：jquery

我遇到了一些 jQuery，它具有：

```
 .on('mousedown.minicolors', '.minicolors-swatch', function  (event) {

       --  some code  --
   }) 
```

控制直接来自 jQuery.min.js 以响应鼠标按下。

第一个问题是，on() 方法正在处理的包装集是什么？其次，从阅读文档来看，mousedown 之后的 .minicolors 似乎是一个“命名空间”。“mousedown”确实是这里创建的插件的名称。但是，确切地说，该命名空间在 mousedown.minicolors 中为我们做了什么？

感谢您在此处添加任何清晰度？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:16:36.400

命名空间允许您轻松删除事件处理程序，如下所示：

```
.off('mousedown.minicolors'); 
```

否则，您还必须通过传递原始事件处理程序本身来删除事件处理程序：

```
var originalEventHandler = function() { ... };
el.on('mousedown', originalEventHandler)
el.off('mousedown', originalEventHandler) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:19:28.620

> 第一个问题是，on() 方法正在处理的包装集是什么？

~~无论点之前是什么——你的代码片段就*在*那之后开始，所以我们不知道。~~

这是委托版本，`.on`它为包装集中的每个元素设置一个事件处理程序`.on`（在委托版本中，这通常只是一个元素，因为如果有更多元素，您可以将两者替换为它们的任何共同祖先，直到和包括`document`）。

此事件处理程序响应在与提供的选择器匹配的后代上触发的任何事件。例如，在其`$(document).on("click", "div.foo", ...)`上安装一个事件处理程序，`document`以响应对任何具有 class 的 div 的单击`foo`。

> 其次，从阅读文档来看，mousedown 之后的 .minicolors 似乎是一个“命名空间”。“mousedown”确实是这里创建的插件的名称。但是，确切地说，该命名空间在 mousedown.minicolors 中为我们做了什么？

实际的插件名称是`minicolors`; `mousedown`是（命名空间的）事件名称。命名空间的作用是：

1.  它允许您区分由不同插件定义的具有相同通用名称的事件。当然，您也可以在没有命名空间抽象的情况下这样做，例如使用名为`plugin1mousedown`and的事件`plugin2mousedown`，**但那**将是*两个不同的事件*。命名空间允许您“标记”事件处理程序，同时仍然引用非命名空间处理程序所引用的同一事件。
2.  它允许您一次取消绑定同一命名空间中事件的所有事件处理程序：`$whatever.off(".minicolors")`. 每当插件实例被“销毁”时，这非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:46:11.170

关于 .on 应用到的包装集，我现在可以看到它是 $(document)。代码是：

```
//Handle Events
$(document)

.on('mousedown.minicolors', '.minicolors-grid', function (event) {
              })
.on('mousedown.minicolors', '.minicolors-space', function (event) {
              })
.on('mouseover.minicolors', '.minicolors-grid', function (event) {
              })
.on('mouseover.minicolors', '.minicolors-space', function (event) {
              }); 
```

这实际上是

```
//Handle Events
$(document).on(...).on(...).on(....).on(...); 
```

标点符号让我大吃一惊，定义所有事件处理程序似乎仍然是一种奇怪的方式，但我想它有效。

感谢您对命名空间的解释。

# symfony - 检索今天插入的所有行

> ID：16190506
> 
> 赞同：0
> 
> 时间：2013-04-24T11:13:29.327
> 
> 标签：symfony, dql

我正在尝试在我的 mysql 数据库中检索今天插入的所有行（仅 DATE，而不是时间）。

```
$query = $em->createQuery("SELECT md
               FROM YtBundle:Mood md
               WHERE md.created_at = CURRENT_DATE()
               ");
$moods = $query->getResult(); 
```

我插入了一个在 2013-04-24 02:00:00 创建的测试行，不幸的是我没有得到任何结果。如果我用“>”更改“=”，它会成功运行。关于为什么会发生这种情况的任何想法？运行查询后，插入今天日期的所有条目似乎都有 +1 的差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:53:04.853

关于什么 ：

```
$query = $em->createQuery("SELECT md
               FROM YtBundle:Mood md
               WHERE md.created_at >= CURRENT_DATE()
               ");

$moods = $query->getResult(); 
```

列 created_at 存储在 TIMESTAMP 列中，因此 CURRENT_DATE = '2013-04-24 00:00:00'，它不等于 '2013-04-24 02:00:00'

# jenkins - 配置作业“Jenkins”

> ID：16190508
> 
> 赞同：0
> 
> 时间：2013-04-24T11:13:38.293
> 
> 标签：jenkins, continuous-integration

我使用 Jenkins 作为持续集成服务器。我尝试配置一个作业，它将在启动另一个作业的执行后自动执行。如果可能，可以配置什么实验室时间？有一种方法 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:29:03.203

有一个关于作业配置的部分`Build Triggers`使用选项调用`Build after other projects are built`。我想这就是您要在初始工作中配置的内容。

# android - 在 Android 上播放 AudioStream（RTP、HTTP）

> ID：16190515
> 
> 赞同：4
> 
> 时间：2013-04-24T11:14:03.280
> 
> 标签：android, http, audio, stream, rtp

我正在使用 Android MediaPlayer 在我的设备上播放流，但在播放流时出现错误。

我在我的 PC 上使用 VLC 将音频流式传输到我的设备。使用 VLC 的 Android 版本，我可以在我的设备上播放声音，所以我的流媒体是可以的。

这是我的代码：

```
try {
    player = new MediaPlayer();
    player.setAudioStreamType(AudioManager.STREAM_MUSIC);
    player.setDataSource("http://192.168.3.111:8080/xx");
    //player.setSurface(null);
    //player.prepare();
    player.prepareAsync();
    //player.start();
    player.setOnPreparedListener(new OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                player.start();
            }
    });

    player.setOnErrorListener(new OnErrorListener() {

        @Override
        public boolean onError(MediaPlayer mp, int what, int extra) {
            Log.e("RTP", "ERROR: " + what + "  " + extra);
            return false;
        }
    });

} catch (Exception e) {
    Log.d("RTP", e.getMessage());
} 
```

每次我收到以下错误：error (1, -2147483648)

我尝试了 RTP、RTSP、HTTP 和始终相同的结果。

Update1：​​是编解码器的问题吗？我在没有任何转码的情况下流式传输 mp3。

# jquery - jQuery "this" 和元素集合

> ID：16190516
> 
> 赞同：3
> 
> 时间：2013-04-24T11:14:03.793
> 
> 标签：jquery, this

在这段代码中：

```
 $(function() {
        $("div").click(function() {
            $(this).before("<p>Hi</p>");

        });
    }); 
```

“这”实际上指的是什么？它是指整个 div 列表，还是仅指单击的特定一个？我怎么知道？

另外，如果我在`this`没有 jQuery 符号的情况下编写或者它们是否相同，这有关系吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T11:16:14.877

在点击处理程序中，`this`是对触发事件的单个 DOM 元素的引用——在本例中是 div 元素。通过包装它，`$()`您可以创建对该 div 元素的 jQuery 引用（一个包含该单个元素的 jQuery 对象，允许您在其上调用 jQuery 方法。

```
$(function() {
    $("div").click(function() {
        $(this).before("<p>Hi</p>"); // 'this' is an HTMLDivElement

    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T11:16:54.077

this 是 DOM 对象，而 $(this) 是相同的 jQuery 包装器。

使用它时，您可以在其上调用 DOM 方法，但不能调用 jQuery 方法。使用 $(this) 时，您可以在其上调用 jQuery 方法，但不能调用 DOM 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T11:16:22.680

`this`只是一个参考。该语言将其读取为包含当前最活跃的元素。

它可以在整个代码中使用，以使许多任务能够采用一系列依赖于当前会话的变量。

> 在许多面向对象的编程语言中，this（或 self）是一个关键字，可以在实例方法中使用，以引用当前正在执行的方法已被调用的对象。

[看看这个。](http://en.wikipedia.org/wiki/This_%28computer_science%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-24T11:16:18.447

`this`始终是您与之交互的特定 DOM 节点，而它`$(this)`是同一个 DOM 节点，但包装在一个 jQuery 对象中。

不同之处在于它`this`可以与普通的 JavaScript/DOM API 一起使用（并且`$(this)`不能），而如果您需要使用 jQuery 方法（`hide()`、`show()`等...），那么您将需要使用`$(this)`（而不是`this`）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T11:16:49.603

`$(this)`指的是从您附加事件处理程序的选择器创建的 jQuery 对象。`div`执行事件的任何元素都将`this`与从 jQuery 对象创建的添加的属性和方法一起变为

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:18:10.530

使用 jQuery与在 Javascript`$(this)[0]`中使用相同。`this`

所以`$(this)[0] == this`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T11:18:14.250

复制自[Nick Craver 的回答](https://stackoverflow.com/a/3889590)：

> *   `this`- 指您当前所在的处理程序中的 DOM 元素，但在其他情况下，这可能完全是另一个对象，但它始终是上下文。
>     
>     
> *   `$this`- 通常由`var $this = $(this)`jQuery 包装版本的缓存版本创建以提高效率（或`$(this)`在许多情况下链接以获得相同的效果）。
>     
>     
> *   `$(this)`- 元素的 jQuery 包装版本，因此您可以访问它的所有方法（在 中的方法`$.fn specifically`）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-24T11:14:51.090

在这种情况下，`this`指的是您单击的特定 HTML 元素。

不，你需要在 '$' 之前加上 '$' 符号`(this)`，否则会导致 JavaScript 错误。

# java - 比较 byte[] 的各个部分以确定两个 byte[] 是否相同

> ID：16190517
> 
> 赞同：0
> 
> 时间：2013-04-24T11:14:03.887
> 
> 标签：java, android

我有一个光标适配器，我可能在网格设置中有许多图像。

当该`bindView`方法运行时，它需要非常快速地完成，因此作为性能/效率提升的一部分，我想在进行任何更改之前比较图像（所以我不会开始多次运行我的异步任务等）。但是，我无法存储整个`byte[]`内容（例如在 ViewHolder 中），因为这显然会占用内存。

但是，我想我可以获取图像字节数组的一部分（大约 20 个字符）并将其与 ViewHolder 中的当前内容进行比较，如果不同，则可以验证。

这是一个可行的选择还是有更好的方法来做到这一点？其次，哪一部分`byte[]`会产生最独特的角色集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:47:41.973

1- 获取 MD5 校验和`java.security.DigestInputStream`（请参阅[Getting a File's MD5 Checksum in Java](https://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java)）

```
MessageDigest md = MessageDigest.getInstance("MD5");
InputStream is = new FileInputStream("file.txt");
try {
    is = new DigestInputStream(is, md);
    // read stream to EOF as normal...
}
finally {
  is.close();
}
byte[] digest = md.digest(); 
```

2-比较两个字节[]的小方法

```
boolean safeArrayEquals(byte[] a1, byte[] a2) {
    if (a1 == null || a2 == null) {
        return (a1 == a2);
    }

    if (a1.length != a2.length) {
        return false;
    }

    byte result = 0;
    for (int i = 0; i < a1.length; i++) {
        result |= a1[i] ^ a2[i];
    }

    return (result == 0);
} 
```

# c# - 如何将firebird客户端安装到GAC中？

> ID：16190525
> 
> 赞同：0
> 
> 时间：2013-04-24T11:14:35.997
> 
> 标签：c#, asp.net, web-applications

我有一个 readme txt 文件要执行相同的步骤，它对我说：

> 将 FirebirdClient 安装到 GAC 您可以使用 gacutil 实用程序来执行此操作或检查它是否已正确安装。gacutil 还向您显示程序集的签名，稍后将使用该签名。

我是这个世界的新手，所以我不明白它是什么，而且我的英语说得不太好。你能用简单的方式（用简单的话）向我解释该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:18:43.263

查看以下链接 [http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

> 使用全局程序集缓存工具 (Gacutil.exe) 将强名称程序集安装到全局程序集缓存中
> 
> 在命令提示符处，键入以下命令：
> 
> gacutil -i
> 
> 在此命令中，程序集名称是要安装在全局程序集缓存中的程序集的名称。
> 
> 以下示例将文件名为 hello.dll 的程序集安装到全局程序集缓存中。

```
gacutil -i hello.dll 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:19:37.567

见[MSDN](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)

使用命令

```
gacutil -i <assembly name> 
```

# foreach - 数组php foreach循环

> ID：16190528
> 
> 赞同：0
> 
> 时间：2013-04-24T11:14:42.220
> 
> 标签：foreach

考虑以下数组

```
$arr1=array('a'=>2,'b'=>22,'c'=>4,'d'=>10) 
```

现在，对于

```
print_r(array_keys($arr1)); 
```

输出是

```
Array ( [0] => a [1] => b [2] => c [3] => d ) 
```

很好，因为 array_keys 的返回类型是数组。甚至`echo array_keys($arr1);`给出`Array`作为输出。

但对于

```
foreach(array_keys($arr1) as $key)
 {
     echo $key.'<br/>';
  } 
```

输出是`abcd`有人能解释一下`foreach`这里是如何工作的，因为我期待以下输出

```
[a] => 2 
[b] => 22 
[c] => 4 
[d] => 10 
```

不想要更好的代码来显示我的预期输出。只想知道在这种情况下 foreach 是如何循环的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:21:25.453

`array_keys($arr1)`获取数组键，因此它循环通过 ["a","b","c","d"]。

此外，您的输出`print_r(array_keys($arr1))`是错误的，因为它输出：

```
Array
(
    [0] => a
    [1] => b
    [2] => c
    [3] => d
) 
```

不是你写的

我引用你的话：

> 现在，对于
> 
> print_r(array_keys($arr1)); 输出是
> 
> 数组（ [a] => 2 [b] => 22 [c] => 4 [d] => 10 ）

**这是不正确的**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:19:50.877

您可以使用以下语法：

```
<?php
foreach($arr1 as $key => $values) {
        echo $key . "=>" . $values;
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:19:53.770

`foreach(array_keys($arr1) as $key)`遍历 的键，依次`$arr1`分配当前键。`$key`'current' 表示当前迭代的键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:20:56.677

因为这就是[`foreach`](http://de2.php.net/manual/de/control-structures.foreach.php)工作原理。由于`array_keys`返回数组的键 ("a","b",...)`array_keys($arr1)`与 相同`Array("a","b","c","d")`，即

```
Array( [0] => "a", [1] => "b", ... ) 
```

由于您想遍历数组中的键和值，您应该简单地使用

```
foreach($arr1 as $key => $value){
    echo "[{$key}] = {$value}<br/>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:21:40.410

函数 array_keys 返回数组的所有键。为了得到你想要的，你应该使用这样的东西

```
foreach($arr1 as $key => $value) {
    echo $key . "=>" . $value;
} 
```

# string - 使用 htaccess 重写查询字符串而不与 WordPress 冲突

> ID：16190530
> 
> 赞同：1
> 
> 时间：2013-04-24T11:14:51.380
> 
> 标签：string, wordpress, .htaccess, mod-rewrite

我已经设置了重写规则 =

```
RewriteRule ^names/([a-zA-Z0-9_]+|)(-in-|)([a-zA-Z0-9_]+|)(-|)([a-zA-Z0-9_]+|)(-|)([0-9]+|)/?$ query.php?sector=$1&location=$3&firmname=$5&firmnumber=$7 
```

它按预期工作，即当输入 /names/something_else-in-somewhere-somename-100 时，它将这些变量值传递给 query.php 页面。

这是在使用 WordPress 的网站上构建的，我遇到了似乎默认的 WordPress htaccess 规则的问题，阻止我在没有 /names/ 的情况下使用上面的重写规则 - 因为我只想查询字符串作为 url。

但是，如果我从重写规则中删除 ^names/，它将阻止 WordPress 页面的可访问性。我已将我的重写代码放在 htaccess 文档的顶部，如下所示：

```
RewriteEngine On
RewriteBase /
RewriteRule ^names/([a-zA-Z0-9_]+|)(-in-|)([a-zA-Z0-9_]+|)(-|)([a-zA-Z0-9_]+|)(-|)([0-9]+|)/?$ query.php?sector=$1&location=$3&firmname=$5&firmnumber=$7 
ErrorDocument 404 /404.php 
RewriteRule ^index\.php$ - [L]
# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L]
# END WordPress 
```

如果我将重写规则置于 WordPress 规则之下，它将停止一起工作。任何人都可以解释为什么会这样，并指出我解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:08:57.377

尝试这个。在 WP htaccess 的最后一行之后添加另一个 RewriteBase

```
RewriteBase /names/
RewriteRule ^names/([a-zA-Z0-9_]+|)(-in-|)([a-zA-Z0-9_]+|)(-|)([a-zA-Z0-9_]+|)(-|)([0-9]+|)/?$ query.php?sector=$1&location=$3&firmname=$5&firmnumber=$7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:57:47.127

您必须使用`[L]`来标记规则的结束。将您的规则更改为：

```
RewriteRule ^names/([a-zA-Z0-9_]+|)(-in-|)([a-zA-Z0-9_]+|)(-|)([a-zA-Z0-9_]+|)(-|)([0-9]+|)/?$ query.php?sector=$1&location=$3&firmname=$5&firmnumber=$7 [L,QSA,NC] 
```

# java - 如何在 JTextarea/JTextfield 中显示字符串

> ID：16190536
> 
> 赞同：2
> 
> 时间：2013-04-24T11:15:08.707
> 
> 标签：java

对你来说很基本的问题。我是Java新手，到目前为止已经制作了一些相对简单的Javascript程序。我最喜欢的一个是我称之为完美侮辱的一个，我决定适当地开发它，所以我可以说我已经制作了一个程序。

核心程序还没有完成，但是到目前为止我所做的已经足够了。将进行一些计算来决定计算机应该给出哪种响应，但所有变量都将保持不变。我只需要知道如何将代码打印到 JTextArea 或 JTextField 而不是`System.out`. 任何帮助将非常感激 ：）。

```
import java.awt.Color;
import java.awt.Font;
import java.util.Random;
import java.util.Scanner;
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import javax.swing.JEditorPane;
import java.awt.Font;
import java.awt.Color;
import javax.swing.JTextArea;
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.border.EmptyBorder;

public class tpiCore {

    public class rootInterface extends JFrame {

        private JPanel contentPane;
        private JTextField input;

        public void main(String[] args) {
            EventQueue.invokeLater(new Runnable() {
                public void run() {
                    try {
                        rootInterface frame = new rootInterface();
                        frame.setVisible(true);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
        }

        public rootInterface() {
            setBackground(Color.GREEN);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setBounds(100, 100, 450, 550);
            contentPane = new JPanel();
            contentPane.setForeground(Color.GREEN);
            contentPane.setBackground(Color.BLACK);
            contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
            setContentPane(contentPane);
            contentPane.setLayout(null);

            input = new JTextField();
            input.setFont(new Font("Lucida Console", Font.PLAIN, 11));
            input.setBackground(Color.DARK_GRAY);
            input.setBounds(10, 447, 414, 54);
            contentPane.add(input);
            input.setColumns(10);

            JEditorPane dtrpnThePerfectInsult = new JEditorPane();
            dtrpnThePerfectInsult.setForeground(Color.GREEN);
            dtrpnThePerfectInsult.setBackground(Color.BLACK);
            dtrpnThePerfectInsult.setFont(new Font("Lucida Console", Font.PLAIN, 20));
            dtrpnThePerfectInsult.setText("        The Perfect Insult");
            dtrpnThePerfectInsult.setBounds(10, 11, 414, 35);
            contentPane.add(dtrpnThePerfectInsult);

            JTextArea textArea = new JTextArea();
            textArea.setLineWrap(true);
            textArea.setBackground(Color.BLACK);
            textArea.setFont(new Font("Lucida Console", Font.PLAIN, 13));
            textArea.setForeground(Color.GREEN);
            textArea.setBounds(10, 57, 414, 383);
            contentPane.add(textArea);

            }
        }

        public static void core(String args[]) {
            String[] insults = new String[15];
            insults[0] = "insult 0";
            insults[1] = "insult 1";
            insults[2] = "insult 2";
            insults[3] = "insult 3";
            insults[4] = "insult 4";
            insults[5] = "insult 5";
            insults[6] = "insult 6";
            insults[7] = "insult 7";
            insults[8] = "insult 8";
            insults[9] = "insult 9";
            insults[10] = "insult 10";
            insults[11] = "insult 11";
            insults[12] = "insult 12";
            insults[13] = "insult 13";
            insults[14] = "insult 14";
            double count = 0;

            System.out.println("Come on then, hit me with your best shot!");

            while (count<10) {
                String insult1 = insults[(new Random()).nextInt(insults.length)];
                System.out.println(insult1);
                Scanner input = new Scanner(System.in);
                input.nextLine();
                String response = input.toString();
                count++;
            } 

            System.out.println("Okay, I give in. You win.");

            }

        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T13:58:28.943

```
JTextArea.setText(string)
JTextArea.append(string) 
```

爪哇文档：

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTextArea.html)

# html - 'elements[...].value' 为 null 或不是对象

> ID：16190539
> 
> 赞同：0
> 
> 时间：2013-04-24T11:15:18.407
> 
> 标签：html, jsp, pvcs

我正在尝试根据我的需要修改 PVCS（版本管理器）网络版本。该产品是用 JSP 编写的。我的问题是当我添加一个简单的组合框时，我收到以下错误，我不知道为什么？！我调试了代码，但我再也找不到问题了，请帮助我解决问题。

对话框.jsp

```
Line: 281
Error: 'elements[...].value' is null or not an object 
```

我收到错误的函数：请查找：alert(name + " -a- "+ targetForm.elements[name].value)

```
/* copy form data from one form to another */
function copyFormData(targetForm, sourceForm)
{
    for (var i = 0; i < sourceForm.elements.length; i++) {
        element = sourceForm.elements[i]
        type = sourceForm.elements[i].type
        if (type == "text" || type == "textarea" || type == "password") {
            name = sourceForm.elements[i].name

            zField = eval("targetForm['"+ name+"']");
            if ( validElement( zField ) )               
                targetForm.elements[name].value = sourceForm.elements[i].value
        }
        else if (type == "checkbox") {
            name = sourceForm.elements[i].name
            if (sourceForm.elements[i].checked)
                targetForm.elements[name].value = sourceForm.elements[i].value
        }
        else if (type == "radio") {
            name = sourceForm.elements[i].name
            if (sourceForm.elements[i].checked)
                targetForm.elements[name].value = sourceForm.elements[i].value
        }
        else if (type == "select-one") {
            name = sourceForm.elements[i].name
            selectedIndex = sourceForm.elements[i].selectedIndex
            alert(name  + " -a- "+ targetForm.elements[name].value)

            if (sourceForm.elements[i].options[selectedIndex].value != "")
                targetForm.elements[name].value = sourceForm.elements[i].options[selectedIndex].value
            else
                targetForm.elements[name].value = sourceForm.elements[i].options[selectedIndex].text
        }
        else if (type == "select-multiple") {
            // FIXME_CWP - this code only handles the first selection from
            // a selection of type select-multiple.  Currently, there are
            // no cases where this is used.  Before multiple selections
            // are properly handled, a suitable delimiter must be decided
            // upon.
            // The main reason this was done was because Netscape interprets
            // a select box of size > 1 as a select-multiple
            name = sourceForm.elements[i].name
            selection = sourceForm.elements[i].options;

            selectedIndex = -1;
            for (var j = 0; j < selection.length; j++) {
                if (selection[j].selected) {
                    selectedIndex = j;
                    break;
                }
            }

            if (sourceForm.elements[i].options[selectedIndex].value != "")
                targetForm.elements[name].value = sourceForm.elements[i].options[selectedIndex].value
            else
                targetForm.elements[name].value = sourceForm.elements[i].options[selectedIndex].text

            //alert("selectedIndex: " + selectedIndex + "\n" + targetForm.elements[name].value);
        }
    }
} 
```

CCheckout.jsp -> 在这个文件的下面一行：

copyFormData(masterForm, tabForm);

masterForm 为空，这就是我收到错误消息的原因，但为什么呢？由于没有我的组合框页面工作正常。

```
/* submit master form using elements from other forms */
function onSubmit(masterForm)
{
    // Get the check out location value.
    /*
    if (isNetscape)
        masterForm.<%=options.WORKING_FOLDER%>.value = document.general_layer.document.applets[0].getEditFieldContents();
    else
        masterForm.<%=options.WORKING_FOLDER%>.value = document.applets[0].getEditFieldContents();
    */
    //alert('Check out location=' + masterForm.<%=options.WORKING_FOLDER%>);

    // Copy the fields from the General form
    tabForm = getForm("general_form", "general_layer")
        <%-- START Added by Vamsi on 21st May 2003
    This is done as part of the Vm_secondary_performance_functional_spec
--%>
    if(tabForm.<%=options.CHECKOUT_BY_DATE_RADIO_CHOICE%>.checked)
    {
        advTabForm = getForm("advanced_form", "advanced_layer");
        advTabForm.<%=options.CHECKOUT_BY_DATE%>.checked = 1;
    }
<%-- END Added by Vamsi on 21st May 2003 --%>
    copyFormData(masterForm, tabForm);

    // Get the workfile options index from the general form and set
    // as correct value in the master form.  Note that the index numbers in
    // the switch statement correspond to the order of the select options in the form.
    selectedIndex = tabForm.<%=options.OVERWRITE_WORKITEM%>.selectedIndex;
    switch (selectedIndex)
    {
        case 0:
            masterForm.<%=options.OVERWRITE_WORKITEM%>.value = <%=pvcs.cmd.PvcsConst.PROMPT_USER%>
            break;

        case 1:
            masterForm.<%=options.OVERWRITE_WORKITEM%>.value = <%=pvcs.cmd.PvcsConst.ANSWER_YES%>
            break;

        case 2:
            masterForm.<%=options.OVERWRITE_WORKITEM%>.value = <%=pvcs.cmd.PvcsConst.ANSWER_NO%>
            break;

        default:
            alert('Bad selected index for OVERWRITE_WORKITEM: ' + selectedIndex);
    }
    if(<%=isModelInAffect%>){
        if (document.general_form.ENABLE_LOOKUP.checked==false){
            masterForm.<%=options.LOOKUP_REVISION%>.value = "<%=pvcs.cmd.PvcsConst.NOLOOKUP%>";
        }
    }
    else{
        masterForm.<%=options.LOOKUP_REVISION%>.value = "<%=pvcs.cmd.PvcsConst.REVISION%>";
    }   
    // Copy the fields from the Advanced form
    tabForm = getForm("advanced_form", "advanced_layer")

    copyFormData(masterForm, tabForm);
    // Encode form data using UTF8.
    encodeFormData(masterForm, document.UTF8Encode);
    return true;
} 
```

checkout.jsp 修改部分：添加以下代码后，我收到上述错误，如果我删除它，它工作正常！！！！！！

> ```
> <tr>
>   <td>Project:</td>
>     <td>  
>       <select id="projn" name="projn">
>           <option value="volvo">Volvo</option>
>           <option value="saab" SELECTED>Saab</option>
>           <option value="mercedes">Mercedes</option>
>           <option value="audi">Audi</option>
>         </select> 
>     </td>
> </tr> 
> ```

部分代码

```
<DIV ID="general_layer" class="visiblelayer" ALIGN="left"><!-- general layer-->
<FORM NAME="general_form" METHOD="post" ACTION="" onSubmit="return genSubmit(this)">
 <BR>
  <TABLE BORDER="0">
   <TR VALIGN="top">
    <TD><%=I18n.getStr(jspFileName,"CHECK_OUT_TO","Check Out To:")%></TD>
    <%-- <TD><INPUT TYPE="text" NAME="<%=options.WORKING_FOLDER%>" VALUE="<%=options.getStringPropertySafe(options.WORKING_FOLDER)%>" SIZE="40" MAXLENGTH="254">&nbsp;<INPUT TYPE="button" VALUE=" ... "></TD> --%>
    <TD><%=HtmlTagHelper.writeBrowseTag("general_form",
                                        options.WORKING_FOLDER,
                                        options.getStringPropertySafe(options.WORKING_FOLDER),
                                        I18n.getStr(jspFileName, "BROWSE_TITLE_KEY", "Select Workfile Location"),
                                        browseType,
                                        45)%>
    </TD>
   </TR>

<%if (projectSelection || multiSelect)
{%>
   <TR VALIGN="top">
    <TD></TD>
    <TD><INPUT TYPE="checkbox" NAME="<%=options.USE_WORKPATH_ATTRIBUTE%>" VALUE="false"><%=I18n.getStr(jspFileName,"CHECK_OUT_USING_PROJECT_HIERARCHY",
                                                                                        "Check out using project hierarchy instead of workfile location(s)")%></TD>
   </TR>
<%}%>
<tr>
    <td>Project:</td>
    <td>  
        <select id="projn" name="projn">
          <option value="volvo">Volvo</option>
          <option value="saab" SELECTED>Saab</option>
          <option value="mercedes">Mercedes</option>
          <option value="audi">Audi</option>
        </select> 
    </td>
</tr>
<tr>
    <td>Developer:</td>
    <td>col2</td>
</tr>
<tr>
    <td>Required Duration:</td>
    <td><input type="text" ID="ReqDuration" name="ReqDuration" value="5"/>Days</td>
</tr>
<tr>
    <td>RFA No:</td>
    <td><input type="text" ID="RFANO"  name="RFANO" value="10256"/></td>
</tr>
<tr>
    <td>Prefered checkout location:</td>
    <td><input type="text" ID="LocationPreFix" name="LocationPreFix" value="C:\projects\"/>
        <input type="button" value="Generate Checkout Link" onClick="generateCheckout()" /></td>
</tr>
   <TR VALIGN="top">
    <TD><%=I18n.getStr(jspFileName,"CHECKOUT_REVISION","Revision:")%></TD>
    <TD><INPUT TYPE="text" NAME="<%=options.REVISION%>" VALUE="<%=revision%>" SIZE="20" MAXLENGTH="254" onChange="revisionChanged()">
    <input type="button" value=" ... " onClick="window.opener.parent.browseForLabel(document.master_form,document.general_form.<%=options.REVISION%>,false,true,'<%=pvcs.vm.servlet.BrowseLabelFrameJspHelper.REVISION_VIEW%>');" onFocus="checkRevision();"/>
    </TD>

   </TR>

   <TR VALIGN="top">
    <TD><%=I18n.getStr(jspFileName,"IF_WORKFILE_EXISTS","If&nbsp;Workfile&nbsp;Exists:")%></TD>
    <TD>
     <SELECT name="<%=options.OVERWRITE_WORKITEM%>">
      <OPTION <%if (overWriteWorkItem == pvcs.cmd.PvcsConst.PROMPT_USER) {%> SELECTED <%}%>><%=I18n.getStr(jspFileName,"IF_EXISTS_PROMPT","Prompt")%>
      <OPTION <%if (overWriteWorkItem == pvcs.cmd.PvcsConst.ANSWER_YES) {%> SELECTED <%}%>><%=I18n.getStr(jspFileName,"IF_EXISTS_OVERWRITE","Overwrite")%>
      <OPTION <%if (overWriteWorkItem == pvcs.cmd.PvcsConst.ANSWER_NO) {%> SELECTED <%}%>><%=I18n.getStr(jspFileName,"IF_EXISTS_DONT_OVERWRITE","Do not overwrite")%>
      </SELECT>
     </TD>
   </TR>
<%  
    if (devPromoGroups != null)
    {
%>
   <TR VALIGN="top">
    <TD><%=I18n.getStr(jspFileName,"CHECKOUT_PROMOTION_GROUP","Promotion&nbsp;Group:")%></TD>
    <TD>
     <SELECT name="<%=options.TO_PROMOTION_GROUP%>">
<%      for (int i=0; i < devPromoGroups.length; i++)
        {
%>
            <OPTION><%=devPromoGroups[i]%>
<%      }%>
      </SELECT>
    </TD>
   </TR>
<%  }%>
<%if (showAssociationsButton)
{%>
 <tr>
  <td>
   <br>
   <INPUT TYPE="button" VALUE="<%=I18n.getStr(jspFileName,"AssociateSCRS","Associate Issues")%>" onClick="onAssociateSCRs()">
  </td>
 </tr>
<% }%>
<%-- START Added by Vamsi on 22nd May 2003
    This is done as part of the Vm_secondary_performance_functional_spec. The below code is
    moved from the Advanced Tab.
--%>
   <TR VALIGN="top">
    <TD  COLSPAN="3">
     <INPUT TYPE="checkbox" NAME="<%=options.CHECKOUT_BY_DATE_RADIO_CHOICE%>" <%if (options.getBooleanPropertySafe(options.ONLY_IF_REVISION_NEWER, false)) {%> CHECKED <%}%> VALUE="<%=options.CHECKOUT_BY_DATE_RADIO_ONLY_IF_REVISION_NEWER%>"><%=I18n.getStr(jspFileName,"GET_REVISION_NEWER_THAN_WORK_FILE","Get only if revision newer than workfile")%>
    </TD>
   </TR>
    <%  
    if (devPromoGroups != null )
    {
   %>
   <TR VALIGN="top">
    <TD  COLSPAN="3">
         <input type="checkbox" NAME="ENABLE_LOOKUP" <%if (!disableLookup) {%> CHECKED <%}%> onClick="toggleLookupOptions();"><%=I18n.getStr(jspFileName,"LOOKUP_ENABLE_LABEL","Force revision lookup")%><br>   
    </TD>
    </TR>   
    <TR VALIGN="top">
    <TD  COLSPAN="3">
     &nbsp;&nbsp;&nbsp;<input type="radio" name="<%=options.LOOKUP_REVISION%>" value="<%=pvcs.cmd.PvcsConst.REVISION%>" <%if (!lookupByGroup) {%> CHECKED <%}%> <%if (disableLookup) {%> DISABLED <%}%>> <%=I18n.getStr(jspFileName,"LOOKUP_REV_LABEL","Based on Revision")%><br>
     &nbsp;&nbsp;&nbsp;<input type="radio" name="<%=options.LOOKUP_REVISION%>" value="<%=pvcs.cmd.PvcsConst.GROUP%>" <%if (lookupByGroup) {%> CHECKED <%}%> <%if (disableLookup) {%> DISABLED <%}%>> <%=I18n.getStr(jspFileName,"LOOKUP_GROUP_LABEL","Based on Promotion Group")%>       
    </TD>
   </TR>
   <%}%>
<%-- END --%>
 </TABLE>
 <BR>
</FORM>
</DIV> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:17:17.890

我发现在该页面中有几个隐藏字段，“copyFormData”函数获取所有字段的副本并将其存储在那里，这就是为什么我的新字段在那里不可用，所以我收到空错误。

# mysql - 仅当他们在另一个表中有共同记录时，才从他们的用户名中检索两个用户记录

> ID：16190540
> 
> 赞同：0
> 
> 时间：2013-04-24T11:15:19.207
> 
> 标签：mysql, join

我试图弄清楚如何进行查询以从他们的用户名中检索两个用户记录，前提是它们一起具有“双重配置文件”。

我的表看起来像：

```
doubles =>
  id
  user_1
  user_2
  profile_text

users =>
  id
  username
  url_username
  birthdate
  and so on 
```

假设我在双打表中有此记录：

```
id    user_1    user_2         profile_text
5       14        16      Welcome to our profile 
```

假设我在用户表中有这两条记录（以及许多其他记录）：

```
id   username   url_username   birthdate
14    John         john        1990-05-09
16     Bob          bob        1991-07-04 
```

当用户访问 www.mysite.com/double/john/bob 我想检索这 2 个用户，但前提是他们在双打表中有记录（不关心他们的 id 是在 user_1 还是 user_2 中）。url_username 是在 url 中输入的内容（此列的原因是我有丹麦字母被替换为 url），我从 url 中检索它。

这甚至可能吗？

编辑：如果更改表结构能够使其更高效，我对此很满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:23:26.663

我没有建立你的表来测试它，但我认为这个查询应该有效：

```
`select * from users, doubles where (doubles.user_1 = users.id or doubles.user_2 = users.id) and users.url_username = 'THEUSERNAME';` 
```

`我在 where 子句中使用了 url_username，假设您已经有一种解析 url 的方法。我会说最好使用实际用户 ID 之一。

好的，这是一个使用连接的查询，我认为它可以满足您的需求。（连接比子查询快，如果可能，最好使用。）

至于速度有多快，您必须对其进行测试，这显然取决于您正在查看多少条记录。请注意，此查询没有做任何事情来保护您免受 sql 注入。（我只是使用您在 url 中的内容，但在将其传递给数据库之前，您需要确保它是安全的。）

```
`select 
  d.* 
from 
  users u1, 
  doubles d, 
  users u2 
where 
  (
    (d.user_1 = u1.id and d.user_2 = u2.id)
   or
    (d.user_1 = u2.id and d.user_2 = u1.id)
  )
and 
  (u1.url_username = 'john' and u2.url_username='bob');` 
```

`如果你想玩它，我在这里做了一个 sql fiddle，或者检查我的数据库是否正确。 [http://sqlfiddle.com/#!2/a5acc/12](http://sqlfiddle.com/#!2/a5acc/12)``

# asp.net - ASP.NET nTier 架构

> ID：16190544
> 
> 赞同：0
> 
> 时间：2013-04-24T11:15:46.443
> 
> 标签：asp.net, vb.net, n-tier-architecture, 3-tier

我有一个项目需要我使用 ntier 方法设置一个 Web 应用程序。但是，由于我所做的大多数项目都是使用 1 层的网站，因此我对这种架构不熟悉。

我决定建立一个 3 层架构，即表示层、业务和数据访问层，最后是数据层。

我想知道，由于这些层位于不同的服务器机器中，它们应该如何通信？使用 Web 服务会帮助解决这个问题吗？

是否有任何简单的教程或课程可以完全教授这一点？从构建应用程序到部署在单独的服务器机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:22:08.930

我认为是一个很好的教程。我建议您为您的项目使用 MVC 4 并遵循以下逻辑

[http://www.codeproject.com/Articles/439688/Creating-ASP-NET-application-with-n-tier-architect](http://www.codeproject.com/Articles/439688/Creating-ASP-NET-application-with-n-tier-architect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:35:30.200

使用以下内容：表示层 --> 通过创建 Asp.Net 项目
业务逻辑和数据访问层 --> 通过创建 Web 服务项目。
SQL 数据库 --> 通过在安装 SQL 的机器上创建一个新数据库。

完成后：

1.  在 SQL Studio 中设计数据库表。

2.  在 BL & DAL 项目中，使用 Entity Framework 连接到您的 SQL DB，这将创建一个现成的方案，实际上将自动生成一个包含您需要的所有业务对象的 DAL。

3.  在 BL 中为所有应该实现的方法创建方法签名（定义）。

4.  在您的表示层中添加对您的 BL 和 DAL Web 服务的服务引用。

这需要时间，您需要阅读大量有关实体框架和 Web 服务以及如何利用它们来满足您的需求的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:00:03.870

如果它们位于不同的机器上，那么使用 Microsoft 技术的常见场景将是：

1.  `User Interface`(UI) 由`ASP.NET`
2.  `Business Layer`(BLL) 由 DLL 实现`C#`或`VB` `.NET` 作为一堆 DLL实现
3.  `Data Access Layer`（DAL）作为关系数据库，即`SQL` 带有表的数据库，存储过程......加上类（一些DLL）来访问数据库。最佳实践是使用`ORMs`ie`Entity Framework`处理`Data Access Layer`和`Data Layer`.

您在常见场景中的图层将以这种方式相互通信：

*   您`UI`将与`BLL`常用的通信`Web Services`。
*   您`BLL`将与`DAL`常用的通信`Web Services`。
*   您`DAL`将与`Database`常用的通信`TCP/IP`。

尽管`n-Tier`设计是最佳实践，但这并不意味着每一层都应该托管在不同的机器上（认为它更像是逻辑分离而不是物理分离）。例如，如果您将所有 3 层都保留在同一台机器上，并且只是将数据库托管在不同的服务器上，那么您不需要实现 Web 服务`BLL`，`DAL`这会降低复杂性和实现时间以及其他好处，即更高的通信速度和安全性。

# java - Java：静态方法和静态块输出

> ID：16190549
> 
> 赞同：1
> 
> 时间：2013-04-24T11:15:57.253
> 
> 标签：java

这是演示静态块和静态方法的源代码。

```
class StaticDemo
{
static int count=10;

 StaticDemo(){
 count++;
 }
 static void display(){
  System.out.println(count);
 }

 static{
  System.out.println("Static Block written Before Main");
 }

 public static void main(String args[]){
     StaticDemo t1=new StaticDemo();
     StaticDemo t2=new StaticDemo();

     StaticDemo.display();
     t2.display();

  }
  static{
     System.out.println("Static Block written After Main");
  }
 } 
```

我期望输出

```
Static Block written Before Main 
Static Block written After Main 
11
12 
```

而我得到的输出

```
Static Block written Before Main 
Static Block written After Main 
12
12 
```

我知道静态块是要执行的第一组代码，因此是前两条语句的顺序。但是，当 JVM 创建 StaticDemo 类的对象 t1 时， count 的值不是递增到 11 （ 10+1 ）吗？什么时候初始化/增量实际发生在程序中？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:19:47.277

增量发生在构造函数中。在显示计数器之前调用构造函数两次，因此它增加了两次。如果您将 display() 放在两个构造函数调用之间，您将看到`11 12`您所期望的。

顺便说一句，您可以通过单步调试调试器中的代码来查看所有这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T11:21:16.953

`main`输出由您的方法中的语句顺序解释：

```
 StaticDemo t1=new StaticDemo();       //this increments count to 11
 StaticDemo t2=new StaticDemo();       //this increments count to 12

 StaticDemo.display();                 //this outputs 12
 t2.display();                         //this outputs 12 
```

本质上，您要增加两次，然后输出两次 - 因此是结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T11:19:29.140

看看你的构造函数 -

```
StaticDemo(){
    count++;
} 
```

每次创建对象时都会增加静态变量。您在这里创建了两个对象，因此它将增加 2。这就解释了为什么你两次得到 12。

要获得您的“预期”输出 -

```
public static void main(String args[]){
    StaticDemo t1=new StaticDemo();    // count got incremented, now contains 11
    StaticDemo.display();    // will print 11

    StaticDemo t2=new StaticDemo();  // again count got incremented
    t2.display();    // will print 12
} 
```

我希望这可以为您清除实际输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T11:20:40.157

```
 public static void main(String args[]){
     StaticDemo t1=new StaticDemo();
     StaticDemo.display();
     StaticDemo t2=new StaticDemo();
     t2.display();

  } 
```

输出：

静态块写在 Main 之前 静态块写在 Main 之后 11 12

编辑：// 问题是你调用了 display()，在你调用了构造函数 2 次之后。因为 display() 使用与每次 12 相同的值

**edit2:// 到迟到**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:22:58.277

见下文：

```
public static void main(String args[]){
             //Initially value of count is 10
             StaticDemo t1=new StaticDemo(); //here it becomes 11
             StaticDemo t2=new StaticDemo(); //here it becomes 12

             StaticDemo.display(); //Now you are printing, it will print 12
             t2.display(); //The value has not changed, so again 12

          } 
```

如果将块重写为：

```
 public static void main(String args[]){

             StaticDemo t1=new StaticDemo(); 
             StaticDemo.display(); 
             StaticDemo t2=new StaticDemo(); 
              t2.display(); 

          } 
```

然后你应该看到输出为 11, 12

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:28:39.340

@用户2315188 ..

您正在创建 t1 和 t2 对象，因此无参数构造函数调用 2 次，第一次计数值为 11，第二次计数变为 12，因此您得到输出 12,12

```
 StaticDemo t1=new StaticDemo();
     StaticDemo t2=new StaticDemo(); 
```

# debugging - 分离windbg内核调试器并保持目标运行

> ID：16190555
> 
> 赞同：2
> 
> 时间：2013-04-24T11:16:18.977
> 
> 标签：debugging, kernel, windbg, remote-debugging

考虑以下场景：

1.  我在 Windows 7 系统上通过串口设置调试。
2.  在另一台机器上，我在它们之间安装了 windbg 并连接了串行电缆。

当我启动目标机器并在调试器机器上运行windbg时，windbg和windows内核之间的连接会正确建立并且我可以根据我的需要进行调试。

我的问题是：

建立连接后，无法分离内核调试并允许它作为独立运行。
我经常需要删除/重新安装驱动程序。安装调试器是完全不必要的，它使安装非常缓慢。

简单的解决方案根本不启动windbg。但是有没有办法在连接建立**后**只分离调试器并允许系统自由运行？目前，分离调试器会使目标系统保持冻结状态，允许用户再次重新连接。

注意：也欢迎任何 hacky 方式。没有干净的方法。（至少我知道。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:44:30.180

不是我知道的。我记得在某个时候（XP，也许？）目标机器会在一段时间（30-60 秒）后超时并继续运行，但我认为这不再是真的了。

您可以使用 .kdfiles 而不是卸载/重新安装吗？或者，更好的是，切换到 1394。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:16:29.677

通常在重新启动时会很慢，因为它会检索并加载所有符号。在主机上缓存符号会在一定程度上提高速度。当您觉得它卡住或更慢时，另一个提示是按 Ctrl + Brk 中止任何长时间卡住的加载操作，然后按 F5 继续运行。

# node.js - 哪个 JetBrains IDE 更适合 nodeJS？

> ID：16190562
> 
> 赞同：3
> 
> 时间：2013-04-24T11:16:26.930
> 
> 标签：node.js, intellij-idea, webstorm

我目前正在使用**IntelliJ IDEA**，但我正在考虑迁移到**WebStorm**。

根据您的经验，哪个更适合 nodejs 开发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T11:41:04.860

是的，**WebStorm**是最适合使用 Node.js 进行开发的编辑器。然而，就我个人而言，我并没有发现使用 WebStorm 的大部分功能。我在编辑器中寻找的是简单、最小的界面和快速打开文件。话虽如此，**IntelliJ IDEA**也可以与 Node.js 一起正常工作。因为它只是javascript。

目前我正在使用[方括号](http://brackets.io/)和[文本](http://foicica.com/textadept/)，可以互换。它们都是免费的，您应该尝试一下。

**编辑**

对于 node js 中的智能感知支持，有以下选项：

*   带有 Node.js[插件的 Ecllipse](http://www.nodeclipse.org/)
*   网络矩阵
*   网络风暴

# apache - http 到 https 重写规则不起作用

> ID：16190563
> 
> 赞同：0
> 
> 时间：2013-04-24T11:16:33.583
> 
> 标签：apache, mod-rewrite, https

我需要使用 https 在网站上提供表格。假设这是表单网址：

[http://www.mysite.com/cms/visit/residents/form](http://www.mysite.com/cms/visit/residents/form)

请求需要到这里：

[https://www.mysite.com/cms/visit/residents/form](https://www.mysite.com/cms/visit/residents/form)

我在共享主机上，所以我把它放在根目录的 .htaccess 文件中：

```
RewriteCond %{HTTPS} !=on
RewriteRule ^(cms/visit/residents/form.*)$ https://www.mysite.com/$1 [R=301,L] 
```

这在我们的开发服务器 (Apache/Debian Squeeze) 上运行良好，但是当我将 .htaccess 文件置于活动状态时，该规则不起作用。重写引擎已打开并且工作正常，因为 .htaccess 文件中已经存在其他重写和重定向。这些其他规则仍然可以正常工作。我问过这里托管该网站的 IT 人员，他们不明白为什么该规则不起作用。我已经尝试了上述规则的无数变体，但无法在实时服务器上运行。这是我尝试的另一个示例：

```
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^cms/visit/residents/form(.*) https://www.mysite.com/cms/visit/residents/form$1 [R=301,L] 
```

我可以从开发服务器上的页面重写到实时服务器上的 https url，所以我认为目标不是问题。我能想到的就是与实时服务器上的 Apache 配置文件有交互，其中包含：

```
<VirtualHost *:80>
 ServerName www.mysite.com
 RewriteEngine on
 RewriteOptions inherit
 RewriteCond %{HTTP_HOST} !=www.mysite.com
 RewriteCond %{HTTP_HOST} !=""
 RewriteRule (.*) $1 [R=permanent,L]
</VirtualHost>
<VirtualHost *:443>
 ServerName www.mysite.com
 RewriteEngine on
 RewriteOptions inherit
 RewriteCond %{HTTP_HOST} !=www.mysite.com
 RewriteCond %{HTTP_HOST} !=""
 RewriteRule (.*) $1 [R=permanent,L]
 SSLEngine on
</VirtualHost> 
```

有没有人有任何想法？我一直在为每个测试清除浏览器缓存，并检查 .htaccess 文件是否已正确上传。

.htaccess 文件：

```
AddDefaultCharset utf-8
AddType text/x-component .htc
AddType application/x-httpd-php .php .phtml
DirectoryIndex index.html index.php redirect.php index.htm
Options -Indexes +Includes +ExecCGI

ErrorDocument 404 /not-found.html 
ErrorDocument 401 /access-error.html

RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(cms/visit/residents/form.*)$ https://www.mysite.com/$1 [R=301,L]

# To tidy up urls of pages run by live Drupal install (under /cms)
RewriteRule (^research/events/patronage.*) cms/$1 [L]
RewriteRule (^intranet/facilities/meeting-rooms/supervision-room-booking) cms/$1 [L]
RewriteRule (^intranet/facilities/meeting-rooms/function-room-booking) cms/$1 [L]
RewriteRule (^study/five-question-feedback-form) cms/$1 [L]
RewriteRule (^intranet/students/graduates/ballot-form) cms/$1 [L]
RewriteRule (^intranet/students/graduates/summer-rooms) cms/$1 [L]
RewriteRule (^intranet/students/undergrads/accommodation/survey) cms/$1 [L]
RewriteRule (^intranet/students/grads/accommodation/survey) cms/$1 [L]
RewriteRule (^graduate-accommodation) cms/$1 [L]
RewriteRule (^undergraduate-accommodation) cms/$1 [L]
RewriteRule (^intranet/students/easter-vacation) cms/$1 [L]
RewriteRule (^students/grads/accommodation/ballot.html) cms/$1 [L]
RewriteRule (^students/undergrads/accommodation/ballot.html) cms/$1 [L]
RewriteRule (^intranet/students/advent-booking) cms/$1 [L]
RewriteRule (^intranet/students/christmas-vacation) cms/$1 [L]
RewriteRule (^intranet/students/undergrads/summer-vacation) cms/$1 [L]
RewriteRule (^six-question-survey) cms/$1 [L]
RewriteRule (^conference-dining/feedback) cms/$1 [L]
RewriteRule (^intranet/meat-free) cms/$1 [L]
RewriteRule (^conference-dining/enquiry-form) cms/$1 [L]
RewriteRule (^study/undergraduate/open-days/booking-form) cms/$1 [L]
RewriteRule (^study/undergraduate/open-days/arts-form) cms/$1 [L]
RewriteRule (^study/undergraduate/open-days/sciences-form) cms/$1 [L]
#RewriteRule (^intranet/college.*) cms/$1 [L]

# For the Cognitive Studies course 2012-13
Redirect permanent /cognitive http://mysite.com/intranet/students/cognitive-skills.html 
```

（我知道，大量的重写，我应该浓缩成一条规则！）

# sql-server - 从代码回滚 SQL Server

> ID：16190567
> 
> 赞同：1
> 
> 时间：2013-04-24T11:16:40.273
> 
> 标签：sql-server, delphi

猜猜我的问题很流行，比如[INFORMIX DB ROLLBACK](https://stackoverflow.com/questions/7978965/rollback-informix-database)，我们正在使用 DELPHI 和 SQL Server 在我们的数据库上开发长期运行的算法。如果这些程序失败，我们需要将数据库设置回初始状态。在服务器端分离数据库，从备份中恢复旧数据库，然后重新开始我们的程序测试。漫长而耗时的过程。

如果我的测试失败，我可以使用 Delphi 在数据库中设置保存点并从 Delphi 恢复数据库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:29:47.283

您可以轻松地为此使用 SQL Server 的[数据库快照](http://msdn.microsoft.com/en-us/library/ms175158.aspx)功能：

*   在开始之前创建数据库快照（使用`CREATE DATABASE snapshot_name.... AS SNAPSHOT OF database_name`）

*   运行您的应用程序

*   如果失败，只需从该快照恢复（使用`RESTORE DATABASE .... FROM DATABASE_SNAPSHOT = '....'`）

# magento - Magmi 不导入产品类型

> ID：16190579
> 
> 赞同：2
> 
> 时间：2013-04-24T11:17:14.153
> 
> 标签：magento, csv, import, product, magmi

我刚刚开始使用 Magmi 上传产品，但一直遇到问题。我的产品上传正常，但是当我查看管理部分时，它们没有被分配产品类型。此外，当您查看产品时，它会丢失所有价格信息等。我已尝试在管理员中和通过 Magmi Reindexer 重新索引，如其他问题中所建议的那样，但它没有任何区别。

我使用的 CSV 文件如下：

```
"sku","store","attribute_set","type","grouped_skus","categories","brands","color","delivery_availability","description","enable_googlecheckout","gallery","guarantee","image","image_label","ip_rating","lighting_fitting_system","lighting_light_colour","media_gallery","meta_description","meta_keyword","meta_title","name","package_id","price","product_category","short_description","small_image","small_image_label","special_from_date","special_price","special_to_date","status","style","tax_class_id","thumbnail","thumbnail_label","type","url_key","url_path","visibility","voltage","weight"
"SY7031CC",,"Lighting","simple",,"Lighting/Kitchen Lighting/Under Cabinet Lights;;Lighting/Kitchen Lighting/Down Lights",,"Chrome","3 Working Days","Required when using 60&deg; and 120&deg; beam angles",1,,"3 Year Guarantee",,,,"LED Plug in System",,,,,,"Surface Spacer for 60&deg; and 120&deg; Florence, Toscanna, Siclia Lights - Chrome","3 Working Days",3.95,,"For use with Florence, Siclia and Toscana 3 Watt OSRAM LED light fittings.",,,,,,1,,2,,,"Accessories","Surface-Spacer-for-60&deg;-and-120&deg;-Florence-Toscanna-Siclia-Lights-Chrome","Surface-Spacer-for-60&deg;-and-120&deg;-Florence-Toscanna-Siclia-Lights-Chrome.html",1,,0.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T16:15:39.263

您`type`在 CSV 中定义了两次该列。

第一个实例具有正确的值，`simple`。type 的第二个实例`Accessories`作为值。

您需要删除 type 的第二个实例，因为`Accessories`它不是 type 列的有效值。此外，您不能`type`用于自定义属性数据。这是一个 Magento 保留属性，用于定义产品类型。尝试创建一个名为的属性`product_type`，并将其设置`Frontend Label`为`Type`. 这将允许您设置数据，而不会与核心 Magento 属性冲突。

# directx - 由默认创建的深度模板缓冲区引起的问题

> ID：16190585
> 
> 赞同：1
> 
> 时间：2013-04-24T11:17:42.500
> 
> 标签：directx, stencil-buffer, shadow-mapping

我正在从阴影贴图上的 DirectX SDK 示例中学习。这个示例在初始化期间创建了一个模板表面，并说：

```
 Create the depth-stencil buffer to be used with the shadow map

 We do this to ensure that the depth-stencil buffer is large
 enough and has correct multisample type/quality when rendering
 the shadow map.  The default depth-stencil buffer created during
 device creation will not be large enough if the user resizes the
 window to a very small size.  Furthermore, if the device is created
 with multisampling, the default depth-stencil buffer will not
 work with the shadow map texture because texture render targets
 do not support multisample. 
```

这是什么意思？我试图评论创建和操作模板缓冲区的语句，然后我得到了相当不稳定的结果：如果我让窗口更大，阴影效果很好，而当我让窗口更小时，阴影停止移动。有人可以向我解释吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:13:23.237

Main DepthStencil 缓冲区是渲染到主窗口时使用的缓冲区，因此将具有与窗口相同的分辨率。然而，阴影过程不必使用相同的分辨率、视口等。这就是他们创建第二个 DepthStencil 缓冲区的原因，该缓冲区与用于渲染 Shadowmap 的视口具有相同的分辨率。

此外，正如引用所述，可能不希望使用与渲染场景相同的格式、多重采样设置等来创建阴影贴图。

编辑：

您使用模板缓冲区是因为您想存储最近的遮挡三角形的深度。

DepthStencil 缓冲区不“支持阴影映射”，它只是一种碰巧需要深度缓冲区的技术，最好具有某些属性（例如正确的大小，没有 MSAA 等）

# java - 如何在zk的日历中选择星期

> ID：16190586
> 
> 赞同：1
> 
> 时间：2013-04-24T11:17:42.610
> 
> 标签：java, javascript, zk

`Calendar`如何在组件的 onclick 上选择日历中的整周。就像这张图片一样。

![在此处输入图像描述](https://i.stack.imgur.com/TNHVp.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:22:23.450

您可以覆盖 _markCal js 函数（用于标记选定日期）来设置整行样式并触发事件到服务器以更新选定日期，请参考：

[在线演示](http://screencast.com/t/N35NM2T98yY)

[calendar_as_week_picker.zul](https://github.com/benbai123/ZK_Practice/blob/master/Components/projects/Components_Practice/WebContent/calendar_as_week_picker.zul)

[WeekPicker.java](https://github.com/benbai123/ZK_Practice/blob/master/Components/projects/Components_Practice/src/test/custom/component/WeekPicker.java)

和

[我博客上的相关文章](http://ben-bai.blogspot.tw/2013/04/zk-calendar-as-week-picker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-25T14:26:15.557

对于 zk 的版本 7，请使用：

```
<zk xmlns:w="client">
<style>
    .custom-selected-node {
        background-color: #99FF99 !important;
    }
</style>
<vlayout>
    <label value="selected dates" />
    <textbox rows="7" id="tbx" width="300px" />
</vlayout>
<calendar id="cal" use="test.custom.component.WeekPicker">
    <attribute w:name="_markCal"><![CDATA[
        function (opts) {
            // clear old custom-selected-node
            jq('.custom-selected-node').each(function () {
                jq(this).removeClass('custom-selected-node');
            });
            this.$_markCal(opts);
            if (this._view == 'day') {
                // target: current focused date (td)
                // parent: tr
                var target = jq('.z-calendar-selected')[0],
                    parent = target.parentNode,
                    node = parent.firstChild,
                    beforeCnt = 0,
                    found;
                // loop through each td
                while (node) {
                    // add selected style
                    jq(node).addClass('custom-selected-node');
                    if (node == target) {
                        found = true;
                    } else if (!found) {
                        // count nodes before target
                        beforeCnt++;
                    }
                    node = node.nextSibling;
                }
                // fire event to server
                this.fire('onCustomSelect', {bcnt: beforeCnt});
            }
        }
    ]]></attribute>
    <attribute name="onCustomSelect"><![CDATA[
        List dates = self.getSelectedDates();
        java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("dd / MM / yyyy");
        String value = "";
        for (int i = 0; i < dates.size(); i++) {
            value = value + sdf.format((Date)dates.get(i)) + "\n";
        }
        tbx.setValue(value);
    ]]></attribute>
</calendar> 
```

# java - 如何将集合转换为数组

> ID：16190589
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:17:52.673
> 
> 标签：java, arrays, collections

我需要一个将日期作为数组返回的函数。

以下`getItem()`必须将日期作为数组返回。

```
public class Calendar implements Ownable {
    User owner;
    ArrayList<CalendarItem> Termin = new ArrayList<CalendarItem>();

    public Calendar (User owner){
        this.owner = owner; 
    }

    @Override
    public Person getOwner() {
        return owner;
    }
    public CalendarItem [] getItems(){
        return ; //  what should I return here?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:20:32.927

注意——Termin 的名字很糟糕，变量都应该是驼峰式的。

```
public CalendarItem [] getItems(){
    return Termin.toArray(new CalendarItem[Termin.size()]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:18:54.877

请参阅[将 ArrayList 转换为 String []](https://stackoverflow.com/questions/5374311/convert-arrayliststring-to-string) 和[toArray](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28%29)。

尝试这个：

```
public CalendarItem [] getItems(){
    return Termin.toArray(new CalendarItem[Termin.size()]);
} 
```

# jquery - 防止对话提交刷新页面

> ID：16190596
> 
> 赞同：0
> 
> 时间：2013-04-24T11:18:15.707
> 
> 标签：jquery, html

我有一个对话框弹出窗口，应该将信息附加到表中。在 Chrome 中，它会附加一次，然后第二次刷新页面并清除所有内容。

我努力了

```
 $('#addthisquote').submit(function(e) {
                e.preventDefault(); 
```

在顶部和底部移动阻止默认值，均无效。也在 HTML 中

```
 <div data-role="page" data-external="false"> 
```

[http://jsfiddle.net/SteveRobertson/p6bCW/10/](http://jsfiddle.net/SteveRobertson/p6bCW/10/)

我附上了一个 JSfiddle，它每次都会刷新页面。由于我对 ajax 缺乏了解，是否有办法最好在不使用 ajax 的情况下防止这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:39:16.060

在摆弄小提琴之后，您似乎忘记了事情，首先将开头添加`$`到`$(document).ready(`通话中：

```
$(document).ready(function() {
^-------- YOU FORGOT THIS 
```

而且您还需要`false`在提交处理程序结束时返回以确保未提交表单。

见[**工作小提琴**](http://jsfiddle.net/gnel/p6bCW/9/)

# sql - SQL 日期参数

> ID：16190597
> 
> 赞同：0
> 
> 时间：2013-04-24T11:18:17.233
> 
> 标签：sql, visual-studio, visual-studio-2008

我在 Visual Studio 中使用了一段简单的编码，如下所示：-

```
select *
from dbo.NGPTimesheetsPosition
where ProjectNO = @ProjectNO AND CreditorEmployeeID <> 'E0000' AND DocType = 'Time Sheet' 
```

这给了我以下结果： -

![在此处输入图像描述](https://i.stack.imgur.com/kJlyO.png)

我想要做的是按日期过滤这些结果，这样当我在 Visual Studio 中使用我的日期参数时，结果会根据日期而变化。

将其编码的最佳方法是什么？

所有帮助表示赞赏。

# svn - SVN 1.7 重新应用还原的更改

> ID：16190605
> 
> 赞同：0
> 
> 时间：2013-04-24T11:19:01.100
> 
> 标签：svn, merge, diff, patch

我在应用 svn 补丁时遇到问题。我将 svn 1.7 与 TortoiseSVN 一起使用。

在修订版 A 中进行了一些更改。在修订版 B 恢复修订版 A 中所做的更改之前，有一些后续提交。然后过一段时间需要重新应用修订版 A 的更改。如何做到这一点以免丢失有关移动文件的信息？

至于现在，我尝试使用 TortoiseSVN -> 显示日志 -> 将更改显示为统一差异来创建修订版 A 的补丁。然后我签出修订版 B 应用了这个补丁，但它没有完成这项工作。一些文件被创建/删除而不是移动或移动然后修改。有些被标记为本地删除（至少从 IntelliJ 的角度来看）。

如何干净地重新应用 rev A 的更改？SVN甚至可以吗？我想避免手动重做所有更改，因为有几百个受影响的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:53:53.640

因为：

*   为了撤消修订 A，您创建了反向合并修订 B
*   修订版 B 为普通修订版

为了 UNDO UNDO 你必须创建反向合并（对于修订 B）修订 C

PS：这样你的日志很快就会不喝就无法阅读

# c# - 在应用程序/进程之间传递数据

> ID：16190609
> 
> 赞同：1
> 
> 时间：2013-04-24T11:19:20.957
> 
> 标签：c#, interprocess, data-sharing

我正在开发一个应用程序来监控我们软件套件的信息，所以我只能从我自己的项目中修改代码，而另一半将取决于套件程序员。这些程序都将在同一台计算机上运行，​​监控软件作为服务运行。

我对采取哪条路线感到好奇的一件事是如何在应用程序或进程之间共享或传递信息。我们只是说数据的类型并不重要，无论我发送字节还是字符串等等（即使在内心深处都是一样的）。

打开 TCP/IP 侦听器/连接以将数据发送到同一台计算机似乎有点矫枉过正，只是在某个端口上侦听以接收信息。还有哪些其他选择？我对数据映射进行了一些研究，但我唯一担心的是该套件是用 delphi 编写的，所以我不确定 c# 和 delphi 之间访问数据映射的兼容性（delphi 甚至可以做这样的事情是研究点我会调查）。

所以我的问题是，在 TL;DR 中，有哪些选项可用于在进程间级别传输数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:22:55.860

我会看看 WCF（使用命名管道），它是应用程序间通信的理想选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:31:49.440

你在这里有很多选择。我会研究命名管道以实现快速、高效的进程间通信。然而，还有另一种选择，那就是[WMI](http://en.wikipedia.org/wiki/Windows_Management_Instrumentation)

您要做的是在您发布监控数据的 Delphi 程序中实现 WMI 提供程序。然后，您的监控服务将使用 WMI 查询读取数据。

这有几个优点。它不会对您的部署设置施加任何限制，因为远程查询 WMI 与本地查询一样可行。因此，即使您现在的目标是本地解决方案，您以后也可以轻松地适应远程设置，只需远程调用 WMI 而不是本地调用。

它还允许进程彼此独立工作，这样您就可以从您的 Delphi 套件中以您想要的任何速率发布统计信息，并独立于您的监控服务进行轮询。这里甚至还有一些活动支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:22:31.193

在这种情况下，我可能会使用监视服务作为客户端之间通信的一种方式（例如，使用轮询系统），并使用 NetNamedPipeBinding 在同一台机器上进行跨进程通信。请参阅[http://msdn.microsoft.com/nl-be/library/ms752247.aspx](http://msdn.microsoft.com/nl-be/library/ms752247.aspx)。

另请参阅[如何使用命名管道绑定从 Delphi 与 WCF 通信，以](https://stackoverflow.com/questions/808287/how-can-i-communicate-with-wcf-from-delphi-using-named-pipes-binding)了解如何从 Delphi 应用程序与 WCF 通信。

这种方法的优点是，如果需要，您可以轻松地将其扩展到具有后端和多个客户端的集中式系统。

# javascript - Cocos2D - HTML 代码加密

> ID：16190610
> 
> 赞同：0
> 
> 时间：2013-04-24T11:19:25.683
> 
> 标签：javascript, encryption, cocos2d-iphone, cocos2d-x, cocos2d-html5

我正在用 cocos2d 宽度的 javaScript 编写游戏。

由于跨平台的原因，我所有的游戏代码都将在 JS 中，我需要知道我是否可以保护我的代码和内容免受偷窥。

我必须加密 cocos2D-iPhone、cocos2D-x 和 cocos2D-HTML 中的代码以确保安全。

什么是最好的方法？

如果您能告诉我如何通过 javaScript 使用[TexturePacker 中的内容保护，](http://www.codeandweb.com/texturepacker/contentprotection)我们将不胜感激：更改 ZipUtils.js 文件以解码纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T08:38:06.900

您可以通过混淆代码来保护您的 JavaScript 代码。

也许[这](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)就是你要找的

# android - Appcelerator Titanium 或 PhoneGap 上的 iPhone 和 Android 应用程序

> ID：16190621
> 
> 赞同：1
> 
> 时间：2013-04-24T11:19:53.917
> 
> 标签：android, iphone, cordova, sms, titanium

我必须为 iPhone/iPad 和 Android 创建一个应用程序。这是一个非常简单的应用程序。以下是要求列表：

*   登录
*   从服务器获取生成的消息
*   从手机的联系人列表中获取联系人
*   将收到的消息作为 SMS 发送给选定的联系人

前三个好像不错 4项呢？据我所知，我无法从 iPad 发送短信（它不应该需要越狱）。这意味着我必须将带有联系人列表的消息发布回服务器并使用任何服务将消息发送出去。还有其他方法吗？

此外，我还有不到一周的时间来构建它。我没有移动开发经验，所以最好使用 Titanium 或 PhoneGap。

问题：你会建议我做什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:36:16.500

我不是 phonegap 方面的专家，但这对 Titanium 来说是可行的。我创建了一个发送短信的应用程序。

要在 iPhone 和 Android 上发送短信，您需要使用外部模块，您可以找到许多用于发送短信的开源模块：

iOS： [https ://github.com/omorandi/TiSMSDialog](https://github.com/omorandi/TiSMSDialog)

安卓： [https ://github.com/omorandi/TiAndroidSMS](https://github.com/omorandi/TiAndroidSMS)

如果您在构建这些模块时遇到错误，您可能需要一点本地语言经验。

对于 iPad（或所有平台），您可以使用一些外部商业 REST API 来发送消息。

# java - 如何找到在给定类中实现其方法的 Java 接口？

> ID：16190642
> 
> 赞同：3
> 
> 时间：2013-04-24T11:20:57.813
> 
> 标签：java, reflection, methods, interface

我需要与大多数人想要处理的完全相反的东西：我有一个带有 className 和 methodName 的 StackTraceElement。由于该方法属于给定类实现的接口，因此我需要一种方法可以询问该方法源自哪个接口。

我可以调用`Class.forName(className)`，也可以调用`clazz.getMethod(methodName)`，但是`method.getDeclaringClass()`返回的是提到的类的名称而不是它的原始接口。我不想遍历所有类的接口以找到该特定方法，这实际上会使性能无效。

--

基本上它是一种传统的广播机制。广播器类包含一个哈希图，其中键是接口，值是具有实现类的列表。广播器实现相同的接口，以便每个方法从哈希图中检索实现类，遍历它们并在每个实现类上调用相同的方法。

--

很抱歉在这里添加它，但是在评论中添加它有点太长了：

我的解决方案类似于 Andreas 所指的：

```
StackTraceElement invocationContext = Thread.currentThread().getStackTrace()[2];
Class<T> ifaceClass = null;
Method methodToInvoke = null;
for (Class iface : Class.forName(invocationContext.getClassName()).getInterfaces()) {
  try {
    methodToInvoke = iface.getMethod(invocationContext.getMethodName(), paramTypes);
    ifaceClass = iface;
    continue;
  } catch (NoSuchMethodException e) {
    System.err.println("Something got messed up.");
  }
} 
```

使用`invocationContext`类似的结构可以制作拦截器，因此发送器只能包含带有空实现主体的注释方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T10:20:53.197

> 我有一个带有 className 和 methodName 的 StackTraceElement。
> 我需要一种方法可以询问它源自哪个接口的方法
> 我不想遍历所有类的接口以找到该特定方法，这实际上会使性能无效。

我会首先检查在您的用例中迭代所有类接口是否真的对性能至关重要。通常，当您拥有堆栈跟踪元素时，您已经处于异常状态，性能可能并不那么关键。然后，您可以使用`Class.getInterfaces()`遍历接口并查询每个接口的声明方法，例如：

```
class MethodQuery {
   private Set<Class<?>> result = new HashSet<>();
   private String theMethodName;

   private void traverse(Class<?> cls) {
      for (Class<?> c : cls.getInterfaces()) {
         for (Method m : c.getDeclaredMethods()) {
            if (theMethodName.equals(m.getName())) {
               result.add(c);
            }
         }

         traverse(c);
      }
   }

   public Set<Class<?>> getInterfacesForMethod(Class<?> cls, String methodName) {
      result.clear();
      theMethodName = methodName;
      traverse(cls);
      return result;
   }
} 
```

然后，您可以像这样查询方法声明的接口：

```
MethodQuery methodQuery = new MethodQuery();
Set<Class<?>> result = 
    methodQuery.getInterfacesForMethod(java.util.Vector.class, "addAll");
System.out.println(result); 
```

结果：

```
[interface java.util.Collection, interface java.util.List] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:24:12.903

我无法想象为什么在性能敏感的情况下需要它，但您可以缓存搜索结果。注意：同一个方法可能会从许多接口实现一个方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:28:44.693

> 我不想遍历所有类的接口以找到该特定方法，这实际上会使性能无效。

我不认为有任何替代方案。

（但是为了呼应 Peter Lawrey 所说的话，缓存会有所帮助……如果性能很重要，通常应该避免反射。）

另请注意：

*   给定的方法可能不会在任何接口中声明。
*   一个给定的方法可以在多个接口中声明，或者在通过多个路径继承的接口中声明。

如果要真正通用，您的方案必须考虑这些事情。

* * *

> 保证一种方法只属于一个接口。

即使是这样 ...

# html - 在 Opera 中解析 SVG―DOMException: NOT_SUPPORTED_ERR

> ID：16190643
> 
> 赞同：1
> 
> 时间：2013-04-24T11:21:12.673
> 
> 标签：html, parsing, svg

我正在尝试使用 Opera 解析 SVG-String，它在 FF 和 Chrome 中运行良好，但 Opera 给了我：

```
Uncaught exception: DOMException: NOT_SUPPORTED_ERRError 
```

解析字符串的代码是这样的：

```
var svg = ( new DOMParser() ).parseFromString( 
                svgstr.replace( /\$\{png-dir\}/g, 
                    this._vars[ 'templateurl' ] + '/batch/png' ), 'image/svg+xml' ); 
```

`svgstr`是包含`${png-dir}`某些属性的 SVG（通过 ajax 加载，相同的域），由有效路径替换。

有任何想法吗？

注意：SVG 是使用 inkscape 创建并保存为 Inkscape SVG，因此它包含一大堆命名空间元素和属性，但它不包含[此处](http://www.opera.com/docs/specs/opera95/svg/attributes.xml)列出的任何元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:13:40.067

我认为这在 Presto 214 (Opera bug CORE-41250) 中退化了，Presto 392 对此进行了修复 (CORE-48402)。一种解决方法是使用`text/xml`类型参数。

# javascript - 带有缓动的 JavaScript 动画

> ID：16190645
> 
> 赞同：2
> 
> 时间：2013-04-24T11:21:18.877
> 
> 标签：javascript

我正在尝试使用 JavaScript 构建一个滑块模块。一切正常，但动画是线性的，感觉不流畅或不自然。我曾想过连接一个缓动方程，但我不确定它的去向。

[这是我从这里](https://stackoverflow.com/a/11213374/704015)借来的动画功能：

```
function animate(elem, style, unit, from, to, time) {
    if (!elem) return;
    var start = new Date().getTime(),
        timer = setInterval(function() {
            var step = Math.min(1,(new Date().getTime()-start)/time);

            elem.style[style] = (from+step*(to-from))+unit;

            if (step == 1) clearInterval(timer);
        },25);
    elem.style[style] = from+unit;
} 
```

[以及来自这里](https://stackoverflow.com/a/7347076/704015)的缓动功能：

```
/**
 * @param {Number} t The current time
 * @param {Number} b The start value
 * @param {Number} c The change in value
 * @param {Number} d The duration time
 */ 
function easeInCubic(t, b, c, d) {
    t /= d;
    return c*t*t*t + b;
} 
```

我尝试只传递我已经拥有的值，如下所示：

```
elem.style[style] = easeInCubic(start, from, to, time) + unit; 
```

但很明显，这是错误的（我的数学并不出色，我承认我只是在猜测）。

我如何将两者结合在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:38:03.537

你的方法没问题，你只是使用了错误的参数。正如它所说，t 是**当前**时间，d 是整体动画时间

```
function animate(elem, style, unit, from, to, time) {
    if (!elem) return;
    var start = new Date().getTime(),
        timer = setInterval(function() {
            var step = Math.min(1,(new Date().getTime()-start)/time);
            elem.style[style] =  easeInCubic(step*time, from,step*(to-from), time)+unit;

            if (step == 1) clearInterval(timer);
        },25);
    elem.style[style] = from+unit;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:50:05.977

`t`是当前时间，或者更准确地说是经过的时间。在你的情况下`new Date().getTime() - start`

`c`在您的情况下，是开始和结束之间的区别`from - to`。

```
 var elapsedTime = new Date().getTime() - start;
        elem.style[style] = easeInCubic(elapsedTime, from, to - from, time) + unit;
        if (elapsedTime >= time) clearInterval(timer); 
```

# matlab - Matlab - 计算收敛速度

> ID：16190646
> 
> 赞同：0
> 
> 时间：2013-04-24T11:21:18.977
> 
> 标签：matlab, math

有了向量`x`，我必须计算它[的收敛速度，](http://en.wikipedia.org/wiki/Rate_of_convergence)为此它只是返回一个值向量，根据`x`长度显示后续系列的迭代 -

![在此处输入图像描述](https://i.stack.imgur.com/DU0fp.jpg)

计算它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:24:13.010

要获得问题中指定值的向量，只需执行以下操作：

```
r = abs(diff(x(2:end)) ./ diff(x(1:end - 1)) .^ p); 
```

# image - Magento 类别图像的批量更新

> ID：16190650
> 
> 赞同：2
> 
> 时间：2013-04-24T11:21:33.253
> 
> 标签：image, magento, import, thumbnails, categories

我已将 400 多个类别导入 Magento 安装。每个类别都有多个产品，但没有类别图像。

我编写了一个脚本来遍历每个类别并返回当前类别中第一个产品图像的 URL。

下一步是将返回的产品图像设置为其父类别的图像。

我的第一种方法是使用类别 ID 和类别图像 URL 格式化 CSV 以用于 MAGMI，但是在检查了[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Import_categories](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Import_categories)上的文档之后，我一直找不到有关导入类别图像的任何信息。MAGMI 可以做到这一点吗？

如果上述情况失败，我的下一个方法是使用 PHP 以编程方式设置类别图像。如果 MAGMI 方法失败，我已经找到了我打算修改的以下代码段。任何人都可以确认 setThumbnail 方法的 $image 参数是否将接受完全限定的 URL，或者这是否仅指本地文件路径？

```
$category = Mage::getModel('catalog/category')->load($cat);
$category->setImage($image);
$category->save(); 
```

非常感谢所有输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T14:33:40.823

好的 - 我无法使用 MAGMI 找到允许我导入类别图像的解决方案。相反，我找到了一个 PHP 解决方案：

1.  遍历所有 Magento 产品类别
2.  保存当前类别中产品的随机（或定义）图像
3.  使用步骤 2 中保存的图像更新当前类别图像。

这是完整的代码，如果处理类似的任务，你们中的一些人可能会发现它很有用。

```
<?php

/* require the necessary magento classes */

require_once 'app/Mage.php';
Mage::app('default'); // Default or your store view name.

/* construct a category tree object to traverse */

$category = Mage::getModel('catalog/category');
$tree = $category->getTreeModel();
$tree->load();

$ids = $tree->getCollection()->getAllIds();
$arr = array(); 

/* loop through each category id */

if ($ids){
    foreach ($ids as $id){
        getImageForCategory($id);
        updateCategoryThumbnail($id);
    }
}

function getImageForCategory($id){

        $images = array();

        $catId=$id; // put your category ID in here
        $products =  Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('image')
        ->addCategoryFilter(Mage::getModel('catalog/category')->load($catId));

        Mage::getSingleton('catalog/product_status')->addSaleableFilterToCollection($products); // Only select products that are salable

        $products->load();

        foreach($products as $product){
            $images[] = $product->getImageUrl();

            /* remove the following break if you want to use a random image, otherwise the image of the first product will be used. Using random images will cause the execution time to increase dramatically.  */
            break;
        }

        if (sizeof($images) > 1) {
        $random_image = array_rand($images, 1);
        } else {
        $random_image = 0;
        }

        if($images[$random_image]){
            saveImageFromURL($images[$random_image],$id);       
        }

    }

function updateCategoryThumbnail($cat){

    $image = $cat . ".jpg";

    $catc = Mage::getModel('catalog/category')->load($cat);
    $catc->setImage($image); // /media/catalog/category
    $catc->save(); 
}

function saveImageFromURL($imgUrl,$cat){

    $fout = fopen('/var/www/vhosts/your-site-folder.com/httpdocs/media/catalog/category/' . $cat . '.jpg', 'w');
    $fin = fopen($imgUrl, "rb");
    while (!feof($fin)) {
        $buffer= fread($fin, 32*1024);
        fwrite($fout,$buffer);
    }
    fclose($fin);
    fclose($fout);
} 
```

?>

确保 saveImageFromURL() 函数中使用的类别图像文件夹有足够的写入权限。

如上所述，从 getImageForCategory() 中删除“break”语句将随机选择一个类别产品。需要注意的是，这会大大增加脚本的执行时间。

# ios - 无法从视图中删除子视图？

> ID：16190651
> 
> 赞同：0
> 
> 时间：2013-04-24T11:21:35.470
> 
> 标签：ios, objective-c, uiview

我试图从 UIView 中删除指标子视图，但它同时删除了它们，而不仅仅是 subview 。

我的观点是：

```
 UIView * aView = [[UIView alloc] initWithFrame:CGRectMake(0.5*winSize.width-winSize.width/3, 0.85*winSize.height , winSize.width/1.5, winSize.width/8)];
    aView.backgroundColor = [UIColor clearColor];
    aView.tag  = 31000;
    UIActivityIndicatorView  *av = [[[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite] autorelease];
    av.frame=aView.bounds;
    [av setBackgroundColor:[UIColor colorWithRed:0.23 green:0.23 blue:0.23 alpha:0.85]];
    av.layer.cornerRadius=4;
    av.tag = 31001;
    [aView addSubview:av];
    [[[CCDirector sharedDirector]view]addSubview:aView];
    [av startAnimating]; 
```

我试图用我在这里找到的许多方法来删除它：

```
 UIActivityIndicatorView *tmpimg = (UIActivityIndicatorView *)[[[CCDirector sharedDirector]view] viewWithTag:31001];
    if(tmpimg)
        [((UIView *)tmpimg) removeFromSuperview]; 
```

或者

```
 UIView *removeView;
    while((removeView = [[[CCDirector sharedDirector]view] viewWithTag:31001]) != nil)
    {
        [removeView removeFromSuperview];
    } 
```

或者

```
 UIView * aView = [[[CCDirector sharedDirector]view] viewWithTag:31000];
    if(aView)
        for(UIView *subview in [aView subviews])
            [subview removeFromSuperview]; 
```

但它总是删除他们两个......我迷路了..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:34:01.910

这将从您的视图中删除任何 UIActivityIndi​​catorView ，而无需对其进行标记 imo 是一个糟糕的解决方案

```
for (UIView *aSubView in aView) {
    if ([aSubView isKindOfClass:[UIActivityIndicatorView class]])
        [aSubView removeFromSuperview];
} 
```

# salesforce - 获取文本框 salesforce ID 并在同一页面上的其他位置显示

> ID：16190656
> 
> 赞同：0
> 
> 时间：2013-04-24T11:21:43.527
> 
> 标签：salesforce, apex-code, visualforce, force.com

我有一个 apex:textbox，它在带有 SF ID 的 visualforce 页面上呈现。

我需要在同一页面加载时获取 SF ID 并将其放入链接中。

例如：我需要这个：

```
<input id="j_id0:mainpage:edit:querysection:j_id67:0:val1" maxlength="99" name="j_id0:mainpage:edit:querysection:j_id67:0:val1" size="20" type="text" value="Madrid,London"> 
```

我需要上面的名称或 ID 出现在同一文本框旁边的链接中：

```
<img src="test.jpg" onclick="myPopup2('/GenericPopUp?pv=j_id0:mainpage:edit:querysection:j_id67:0:val1', 300, 300, true)"> 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:14:17.690

这只是

```
{!$Component.val1} 
```

卫生部

# php - 尝试获取特定外键的信息

> ID：16190658
> 
> 赞同：1
> 
> 时间：2013-04-24T11:21:57.743
> 
> 标签：php, sql

我是 php 和 mysql 的新手。我正在尝试从我的一张表中获取信息。只要给你关于我的桌子的信息。我的表的名称是`leave`.it 包含一个外键，即`leaveId`。

```
 lid     empname     username    nod     date     reason  action leaveID 
    ===     =======     ========    ===     =====    ======  ====== =======
     1      Maxwell       max        1       2012     Null   Denied    3
     2      Ponting      punter      1       2011     Null   Denied    4
     3      Ponting      punter      2       2011     xam    Accepted  4
     4      Taylor       tayl        1       2011     Null   Accepted  1 
```

现在作为示例，是否有任何 sql 查询仅检索`Pointing`谁`leaveId`是 4 的信息。我编写了以下查询..

```
$leave = mysql_query("SELECT * FROM `leave` where leaveID = $user "); 
```

但它只返回与数字 4 关联的第 2 行 `leaveId`，它应该返回第 2 行和第 3 行，不是吗？. 实际上我不确定......如果它是错误的，那么给我正确的答案（例如）我怎样才能获取 ponting 谁离开 ID 为 4 的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:30:56.223

你需要用一个while循环来获取你的行

```
$leave = mysql_query("SELECT * FROM `leave` where leaveID = $user ");
while ($row = mysql_fetch_array($leave, MYSQL_NUM)) {
    printf(" ID:", $row[0], "empname ", $row[1]);  
} 
```

# javascript - 更好的做法 Jquery 与 Document.formname.formelement.value

> ID：16190662
> 
> 赞同：4
> 
> 时间：2013-04-24T11:22:04.800
> 
> 标签：javascript, jquery, html, forms

快速提问。

我目前正在做一些 js（预/前端验证），我的问题是哪一行代码更好用。我自己一直使用这种方法。

```
 document.formname.forminput.value 
```

而不是

```
 $('formelement').val() 
```

你会推荐我使用哪个，我认为第一种方法更好，因为它不依赖外部库来提交函数？

谢谢，托尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:25:40.243

这对你有用。

如果您只想使用纯 JavaScript，请使用：

```
document.formname.forminput.value 
```

或者

```
 document.getElementById('formelement').value 
```

如果你想使用 jQuery 框架：

```
$('formelement').val() 
```

就我个人而言，我喜欢 jQuery 方式，因为它更干净，但如果你使用它，总是知道纯 JavaScript 方式。

查看 stackexchange 上的这篇文章，了解关于纯 JavaScript 与 jQuery 的更详细讨论： [https ://softwareengineering.stackexchange.com/questions/122191/what-benefits-are-there-to-native-javascript-development](https://softwareengineering.stackexchange.com/questions/122191/what-benefits-are-there-to-native-javascript-development)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:36:43.487

“更好”很难定义。“更快”可能是第一个，尽管在输入字段中添加一个 ID 并`$('#inputid')`在 jQuery 中调用可能会更快。但是差异是如此之小，以至于任何人甚至考虑对这样的选择器进行微优化都是没有意义的。

在简单地从已知输入字段中获取值时，它们也是相等的，但是如果找不到 DOM 元素，jQuery 不会抛出异常，而`document.formname.forminput.value`如果 DOM 中不存在则将抛出异常`formname`。如果找不到 DOM 元素，jQuery`.val()`将简单地返回。`undefined`

不用补充，jQuery 的 API 包括`val()`在不同的输入元素和浏览器之间更加一致，也可以用作 setter。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:23:32.463

两个都很好

如果您使用的是 document.formname.forminput.value，这意味着您使用的是纯 javascript

但是如果你使用 $('formelement').val() 它来自 jquery，它是 javascript 的框架之一。为了使用，您应该下载 jquery.js 并将其包含在您的网页中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:26:30.137

实际上没有正确的答案...答案取决于使用它的人..

第一个是普通的javascript，所以你说不需要外部库文件..

然而

第二个是使用jquery ....

我会选择第二个原因，它简短、易读且更干净

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:30:11.727

实际上在纯 JavaScript 中你有

```
document.formname.fieldName.value
document.getElementsByName("fieldName")[0].value
document.getElementById("fieldID")[0].value 
```

而 jQuery 中的类似访问将是

```
$("input[name='fieldName'"].val(); 
```

或者

```
$("#fieldID"].val(); 
```

一定要知道区别

如果页面中没有 jQuery 而不是为了获取表单字段的值，那么我认为 jQuery 是不必要的。但是，如果您正在做任何稍微复杂且跨浏览器的事情，例如 Ajax 或事件处理，请使用 jQuery 来满足您在页面上的所有需求

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:30:33.773

根据 JS Perf，本机 DOM 方法`document.querySelector()`最快*，*而您在问题中发布的本机 DOM 方法最慢。据推测，“快速”与高效相关，那么，选择方式`id`（正如 jQuery 和`document.querySelector()`方法都使用的那样）似乎是最快的选择方法。

JS Perf 链接如下，基于以下 HTML：

```
<form action="#" method="post" name="trek">
  <fieldset>
    <label for="input1">
      Input One:
    </label>
    <input id="input1" value="An input, Jim; but just as we know it..." />
  </fieldset>
  <fieldset>
    <label for="input2">
      Input Two:
    </label>
    <input id="input2" value="'Beam me up, Scotty!' attributed to, but never said, in Star Trek."
    />
  </fieldset>
</form> 
```

原生 DOM：

```
var input1 = document.trek.input1.value,
    input2 = document.trek.input2.value;
console.log(input1, input2); 
```

更多 DOM：

```
var input1 = document.getElementById('input1').value,
    input2 = document.getElementById('input2').value;
console.log(input1, input2); 
```

还有更多 DOM，d.qS：

```
var input1 = document.querySelector('#input1').value,
    input2 = document.querySelector('#input2').value;
console.log(input1, input2); 
```

和 jQuery：

```
var input1 = $('#input1').val(),
    input2 = $('#input2').val();
console.log(input1, input2); 
```

[JS 性能](http://jsperf.com/native-dom-vs-jquery-methods)。

参考：

*   [的兼容性（在 Quirksmode 中）`document.querySelectorAll()`，假设它与`document.querySelector()`](http://www.quirksmode.org/dom/w3c_core.html#t13).
*   [MDN 参考`document.querySelector()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector).

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T11:54:05.873

在这种情况下，没有理由使用 jQuery 而不是 javascript。

# postgresql - 如何在 Postgres 的 inet 字段上使用 LIKE

> ID：16190669
> 
> 赞同：11
> 
> 时间：2013-04-24T11:22:37.650
> 
> 标签：postgresql, sql-like, inet

我需要执行以下查询：

```
SELECT * FROM users WHERE ip LIKE '88.99.%'; 
```

问题是`inet`数据类型似乎不支持通配符（至少不是我在前面的查询中使用它们的方式）。

我想知道的是在指定`LIKE`过滤器之前将字段转换为字符串是否是明智之举？（另一方面，这可能会减慢整个查询，即使方法本身是有效的。）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-24T11:33:47.440

对此类查询使用子网运算符。`'88.99.0.0/16'`应该这样做：

```
SELECT * FROM users WHERE ip << inet '88.99.0.0/16'; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-05-31T14:16:33.383

如果您想进行字符串比较，另一个对我有用的选项是：

```
SELECT * FROM users WHERE TEXT(ip) LIKE '88.99.%'; 
```

尽管它比“[如何在 Postgres 的 inet 字段上使用 LIKE](https://stackoverflow.com/questions/16190669/postgresql-like-on-inet-field/16190911#16190911) ”效率低。

参考：[https ://www.postgresql.org/docs/8.2/static/functions-net.html](https://www.postgresql.org/docs/8.2/static/functions-net.html)

# python - “错误：NSInternalInconsistencyException - 无效参数不满足：cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType”

> ID：16190680
> 
> 赞同：0
> 
> 时间：2013-04-24T11:23:25.883
> 
> 标签：python, cocoa

有时，主要是在重负载时，我会收到以下错误：

```
2013-04-23 23:53:13.595 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-23 23:53:14.686 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
2013-04-24 00:40:47.358 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-24 00:40:47.561 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
2013-04-24 00:42:49.016 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-24 00:42:49.017 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
2013-04-24 00:42:53.689 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-24 00:42:53.689 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
2013-04-24 00:43:01.091 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-24 00:43:01.091 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
2013-04-24 00:43:06.840 MusicPlayer[74705:6303] unrecognized type is -2
2013-04-24 00:43:06.840 MusicPlayer[74705:6303] *** Assertion failure in -[NSEvent _initWithCGSEvent:eventRef:], /SourceCache/AppKit/AppKit-1187.37/AppKit.subproj/NSEvent.m:1348
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
new song: Tiestö - Reepublic, 00:15, mp3, 125 kbit/s, 233 KB
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
EXCEPTION
Traceback (most recent call last):
  File "/Users/az/Programmierung/music-player/mac/build/Release/MusicPlayer.app/Contents/Resources/Python/mediakeys.py", line 71, in runEventsCapture
    line: Quartz.CFRunLoopRun()
    locals:
      Quartz = <local> <module 'Quartz' from '/System/Library/Frameworks/Python.framework/Versions/2.6/Extras/lib/python/PyObjC/Quartz/__init__.py'>
      Quartz.CFRunLoopRun = <local> <objc.function 'CFRunLoopRun' at 0x1027dfb30>
error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType 
```

相关代码：

```
 import AppKit, Quartz
    from AppKit import NSSystemDefined
    pool = AppKit.NSAutoreleasePool.alloc().init()

    self.runLoopRef = Quartz.CFRunLoopGetCurrent()

    while True:
        # https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html
        tap = Quartz.CGEventTapCreate(
            Quartz.kCGSessionEventTap, # Quartz.kCGSessionEventTap or kCGHIDEventTap
            Quartz.kCGHeadInsertEventTap, # Insert wherever, we do not filter
            Quartz.kCGEventTapOptionDefault, #Quartz.kCGEventTapOptionListenOnly,
            Quartz.CGEventMaskBit(NSSystemDefined), # NSSystemDefined for media keys
            self.eventTap,
            None
        )
        assert tap

        # Create a runloop source and add it to the current loop
        runLoopSource = Quartz.CFMachPortCreateRunLoopSource(None, tap, 0)
        Quartz.CFRunLoopAddSource(
            self.runLoopRef,
            runLoopSource,
            Quartz.kCFRunLoopDefaultMode
        )

        # Enable the tap
        Quartz.CGEventTapEnable(tap, True)

        try:
            # and run! This won't return until we exit or are terminated.
            Quartz.CFRunLoopRun()
        except Exception:
            # I got this one here once:
            # error: NSInternalInconsistencyException - Invalid parameter not satisfying: cgsEvent.type > 0 && cgsEvent.type <= kCGSLastEventType
            sys.excepthook(*sys.exc_info())
            continue # rerun

        # this is a regular quit
        break

    del pool 
```

异常主要伴随着 GUI 线程的挂起（这是我不想忽略它的主要原因 - 因为它可能非常显着）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:55:51.610

从[这里](http://forums.macrumors.com/showthread.php?t=1145465)，我得到了有用的信息，上面写着：

> 实际上，事件类型 CGEventType 在 CGEventType.h 中定义为无符号 32 位整数。所以你的 -2 实际上是 0xFFFFFFFE。在定义为 kCGEventTapDisabledByTimeout 的 CGEventType.h 中。有一条评论就是这样说的：
> 
> ```
>  /* Out of band event types. These are delivered to the event tap callback
>      to notify it of unusual conditions that disable the event tap. */
>   kCGEventTapDisabledByTimeout = 0xFFFFFFFE,
>   kCGEventTapDisabledByUserInput = 0xFFFFFFFF 
> ```
> 
> 所以看起来你的事件水龙头正在超时。这就是为什么您在此之后不再收到任何事件的原因。

在 Python 中，在您的事件点击中，您可以像这样检查这种情况：

```
def eventTap(self, proxy, type_, event, refcon):
    if type_ < 0 or type_ > 0x7fffffff:
        # handle it ... 
```

请注意，在您获得此类事件类型后，事件点击被禁用。所以你可能想重新启动你的事件循环。

# geolocation - 改变我在捏的位置 - OpenStreetsMaps

> ID：16190684
> 
> 赞同：0
> 
> 时间：2013-04-24T11:23:32.387
> 
> 标签：geolocation, position, openstreetmap, osmdroid, pinch

我在 OpenStreetMaps 应用程序中遇到了 MyCurrentPosition 问题。我已经使用 OSMdroid 3.0.9 库创建了该应用程序。问题是关于当前位置。问题似乎与捏放大/缩小有关。它仅在捏屏幕时向我显示 GPS 或网络提供商的正确当前位置。当我释放它时，它会改变我当前的位置与附近的另一个位置，但不是真正的一个位置。我在下面给你我的代码，让你一睹为快：

MainActivity.java

```
public class MainActivity extends Activity {

private MapView map;
private MapController mapController;
private MyLocationOverlay miLocalizacion;
private LocationManager locManager; 
private LocationListener locListener;
private Button pruebas;
private Location actual;
private GeoPoint punto;
private double mLatitude, mLongitude;
private Button candado;
private OnItemGestureListener<OverlayItem> myOnItemGestureListener;

public static Resources res;

private     ArrayList<OverlayItem> overlayItemArray;
final private String MAP_DEFAULT_STARTPOSITION = "Santander";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_ACTION_BAR);
    setContentView(R.layout.activity_main);

    overlayItemArray = new ArrayList<OverlayItem>();

    candado = (Button)findViewById(R.id.button2);

    map = (MapView)findViewById(R.id.openmapview);
    map.setBuiltInZoomControls(true);
    map.setMultiTouchControls(true);
    map.setTileSource(TileSourceFactory.MAPNIK);

    mapController = new MapController(map);
    mapController = map.getController();
    mapController.setZoom(15);

    candado.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

        }
    });

    LocationManager locManager = (LocationManager)getSystemService(LOCATION_SERVICE);

    actual = locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    locListener = new LocationListener() {

        @Override
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {

        }

        @Override
        public void onProviderEnabled(String arg0) {

        }

        @Override
        public void onProviderDisabled(String arg0) {

        }

        @Override
        public void onLocationChanged(Location loc) {
            ActualizarPosicion(loc);

             mLatitude = (int) (loc.getLatitude() * 1E6);
                mLongitude = (int) (loc.getLongitude() * 1E6);

        }

    };

    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
    locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);

    miLocalizacion = new MyLocationOverlay(getBaseContext(), map);

    map.getOverlays().add(miLocalizacion);

    //Mi ubicación

    miLocalizacion.runOnFirstFix(new Runnable() {
        public void run() {

            map.getController().animateTo(miLocalizacion.getMyLocation());
        }
    });

    res = getResources();

    //Minimapa
    MinimapOverlay miniMapOverlay = new MinimapOverlay(this, map.getTileRequestCompleteHandler());
    miniMapOverlay.setZoomDifference(5);
    miniMapOverlay.setHeight(200);
    miniMapOverlay.setWidth(200);
    map.getOverlays().add(miniMapOverlay);

    myOnItemGestureListener = new OnItemGestureListener<OverlayItem>() {

        @Override
        public boolean onItemLongPress(int arg0, OverlayItem arg1) {
            Toast.makeText(getBaseContext(), "Pulsacion larga", Toast.LENGTH_SHORT).show();
            return false;
        }

        @Override
        public boolean onItemSingleTapUp(int arg0, OverlayItem arg1) {
            Toast.makeText(getBaseContext(), "Pulsacion corta", Toast.LENGTH_SHORT).show();
            return false;
        }
    };

    overlayItemArray.add(new OverlayItem("Hola", "Estás aquí.", new GeoPoint(actual.getLatitude(), actual.getLongitude())));
    ItemizedOverlayWithFocus<OverlayItem> anotherItemizedIconOverlay = new ItemizedOverlayWithFocus<OverlayItem>(this, overlayItemArray, myOnItemGestureListener);
    map.getOverlays().add(anotherItemizedIconOverlay);

    anotherItemizedIconOverlay.setFocusItemsOnTap(true);
    anotherItemizedIconOverlay.setFocusedItem(0);

    //Botón de pruebas
     pruebas = (Button)findViewById(R.id.button1);
     pruebas.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {

            Toast.makeText(getBaseContext(), actual.getLatitude() + " , " + actual.getLongitude(), Toast.LENGTH_SHORT).show();

        }
    });

protected void PonerMarcador(Location loc) {
    overlayItemArray.add(new OverlayItem("Hola", "Estás aquí.", new GeoPoint(actual.getLatitude(), actual.getLongitude())));
    ItemizedOverlayWithFocus<OverlayItem> anotherItemizedIconOverlay = new ItemizedOverlayWithFocus<OverlayItem>(this, overlayItemArray, myOnItemGestureListener);
    map.getOverlays().add(anotherItemizedIconOverlay);

    anotherItemizedIconOverlay.setFocusItemsOnTap(true);

}

protected void ActualizarPosicion(Location loc) {
actual.setLatitude(loc.getLatitude());
actual.setLongitude(loc.getLongitude());
mapController.animateTo(actual.getLatitude(),actual.getLongitude());

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Se lanza el menú, codigo para la action bar, iconos etc..
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

    private void setOverlayLoc(Location overlayloc){
        GeoPoint overlocGeoPoint = new GeoPoint(overlayloc);
        overlayItemArray.clear();
        OverlayItem newMyLocationItem = new OverlayItem("My Location", "My Location", overlocGeoPoint);
        overlayItemArray.add(newMyLocationItem);

    }

 private class MyItemizedIconOverlay extends ItemizedIconOverlay<OverlayItem>{

        public MyItemizedIconOverlay(
                List<OverlayItem> pList,
                org.osmdroid.views.overlay.ItemizedIconOverlay.OnItemGestureListener<OverlayItem> pOnItemGestureListener,
                ResourceProxy pResourceProxy) {
            super(pList, pOnItemGestureListener, pResourceProxy);

        }

        @Override
        public void draw(Canvas canvas, MapView mapview, boolean arg2) {

            super.draw(canvas, mapview, arg2);

            if(!overlayItemArray.isEmpty()){

                //overlayItemArray have only ONE element only, so I hard code to get(0)
                GeoPoint in = overlayItemArray.get(0).getPoint();

                Point out = new Point();
                mapview.getProjection().toPixels(in, out);

                Bitmap bm = BitmapFactory.decodeResource(getResources(), 
                        R.drawable.ic_launcher);
                canvas.drawBitmap(bm, 
                        out.x - bm.getWidth()/2,    //shift the bitmap center
                        out.y - bm.getHeight()/2,   //shift the bitmap center
                        null);
            }
        }

 }

    }

activity_main.xml

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearlayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/pruebas" />

    <Button
        android:id="@+id/button2"
        android:layout_width="62dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.13" />

</LinearLayout>

<org.osmdroid.views.MapView
    android:id="@+id/openmapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</org.osmdroid.views.MapView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T13:48:57.927

在清单或代码中关闭硬件加速。有关如何执行此操作的示例，请参阅示例应用程序。3.0.10 中有更好的硬件加速支持。

# matlab - Matlab：更改 xlabel 和 ylabel 上的字体大小

> ID：16190685
> 
> 赞同：1
> 
> 时间：2013-04-24T11:23:32.483
> 
> 标签：matlab, ubuntu, plot, visualization

我正在执行以下操作（这是一个说明问题的简单示例）：

```
a = [1,3,4];
b = [1,4,5];
plot(a,b,'LineWidth',4);
xlabel('recall','FontSize',35);
ylabel('precision','FontSize',4); 
```

它产生： ![在此处输入图像描述](https://i.stack.imgur.com/JHpuj.png)

如您所见`'FontSize'`，没有任何效果。我还得到了如下所示的 xlabel 的属性：

```
xl = xlabel('recall','FontSize',35);
get(xl)
    FontAngle = normal
    FontName = Helvetica
    FontSize = [35]
    FontUnits = points
    FontWeight = normal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:18:06.393

您必须安装软件包：

*   xfonts-100dpi
*   xfonts-75dpi。

正如[这个线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/326770#898664)中所建议的那样，因为 Ubuntu 12.04 没有附带 MATLAB 特定的字体。

# android - 无法在 android Adapter 中加载图像

> ID：16190694
> 
> 赞同：1
> 
> 时间：2013-04-24T11:23:45.430
> 
> 标签：android

我正在使用以下代码在 Android Pager 中加载图像，但我得到一个空白区域而不是图像，当我加载文本时，我得到一个输出。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View vi=container;
        //if(container==null)
            vi = inflater.inflate(R.layout.fragment_pager_list, null);

        TextView title = (TextView)vi.findViewById(R.id.textTitle); // title
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.imageProduct); 
            // thumb image

        HashMap<String, String> song = new HashMap<String, String>();
        song = ListProduct.productList.get(mNum);

        // Setting all values in listview
        title.setText(song.get(ListProduct.KEY_TITLE));
        Bitmap bitmap = BitmapFactory.decodeFile
                                           (song.get(ListProduct.KEY_THUMB_URL));

        thumb_image.setImageBitmap(bitmap);
        return vi;

    } 
```

我正在使用上面的代码，但我没有得到我错的地方。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:33:26.033

尝试这个....

```
 try {
        URL url = new URL(ListProduct.KEY_THUMB_URL);
        HttpGet httpRequest = null;

        try {
            httpRequest = new HttpGet(url.toURI());
        } catch (URISyntaxException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);

        HttpEntity entity = response.getEntity();
        BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
        InputStream input = b_entity.getContent();

        bitmap = BitmapFactory.decodeStream(input);

        //// Set Bitmap to Imageview
        thumb_image.setImageBitmap(bitmap);

     } catch (MalformedURLException e) {
         Log.d("log", "bad url");
     } catch (IOException e) {
         Log.d("log", "io error");
     } 
```

# c# - 多个生产者和消费者的队列

> ID：16190695
> 
> 赞同：0
> 
> 时间：2013-04-24T11:23:46.643
> 
> 标签：c#, multithreading, .net-3.5, queue, producer-consumer

我必须在 .Net3.5 中编写多个线程（现在至少 3 个）之间的通信，并且每个线程都是生产者和消费者。我的想法不是在每对线程之间发送信号，而是实现一个消息队列，它将像这样存储类：

```
enum Signals { ObjectArrivedOnLightBarrier, ObjectLeftLightBarrier, CodeFound };
enum UnitID { GrabThread, ImageProcessingThread, SaveThread };

// Consumer shows who the message is intended for (and only that unit is allowed to remove it from the queue)
public class QueuedSignal
{
    Signals Message;
    UnitID Producer;
    UnitID Consumer;
} 
```

这个想法是，任何线程都可以查看队列中的第一个项目，如果消息不是针对它的，则不理会它（如果其他消息很少并且其中一个可能针对此线程，则不是问题） .

当有多个生产者和消费者时，队列线程安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:39:19.167

**`Queue<T>`不是线程安全的*。***

如果您使用的是 .Net 4 或更高版本，我建议您使用[`BlockingCollection<T>`](http://msdn.microsoft.com/en-gb/library/dd267312%28v=vs.100%29.aspx).

不幸的是，您不能使用它，但是并发队列有几种实现。

在 Marc Gravel 的回答中看看[这个](https://stackoverflow.com/questions/530211/creating-a-blocking-queuet-in-net/)。不幸的是，它没有 Peek() 方法。

这是我在 .Net 4 出现之前使用的一个类；也许您可能对此感兴趣。这不是最好的实现；在 .Net 4 出现之前，我们更多地将其用作占位符。即便如此，这里是：

```
/// <summary>A bounded blocking queue.</summary>
/// <typeparam name="T">The element type of the queue, which must be a reference type.</typeparam>

public sealed class BoundedBlockingQueue<T>: IDisposable where T: class
{
    #region Construction and disposal

    /// <summary>Constructor.</summary>
    /// <param name="maxQueueSize">
    /// The maximum size of the queue.
    /// Calls to <see cref="Enqueue"/> when the queue is full will block until at least one item has been removed.
    /// Calls to <see cref="Dequeue"/> when the queue is empty will block until a new item is enqueued.
    /// </param>

    public BoundedBlockingQueue(int maxQueueSize)
    {
        if (maxQueueSize <= 0)
        {
            throw new ArgumentOutOfRangeException("maxQueueSize");
        }

        _queue                  = new Queue<T>(maxQueueSize);
        _itemsAvailable         = new Semaphore(0, maxQueueSize);
        _spaceAvailable         = new Semaphore(maxQueueSize, maxQueueSize);
        _queueStopped           = new ManualResetEvent(false);
        _queueStoppedAndEmpty   = new ManualResetEvent(false);
        _stoppedOrItemAvailable = new WaitHandle[] { _queueStopped, _itemsAvailable };
    }

    /// <summary>Disposal.</summary>

    public void Dispose()
    {
        if (_itemsAvailable != null)
        {
            _itemsAvailable.Close();
            _spaceAvailable.Close();
            _queueStopped.Close();
            _queueStoppedAndEmpty.Close();
            _itemsAvailable = null;          // Use _itemsAvailable as a flag to indicate that Dispose() has been called.
        }
    }

    #endregion Construction and disposal

    #region Public properties

    /// <summary>The number of items currently in the queue.</summary>

    public int Count
    {
        get
        {
            throwIfDisposed();

            lock (_queue)
            {
                return _queue.Count;
            }
        }
    }

    /// <summary>Has <see cref="Stop"/> been called?</summary>

    public bool Stopped
    {
        get
        {
            throwIfDisposed();
            return _stopped;
        }
    }

    #endregion Public properties

    #region Public methods

    /// <summary>
    /// Signals that new items will no longer be placed into the queue.
    /// After this is called, calls to <see cref="Dequeue"/> will return null immediately if the queue is empty.
    /// Before this is called, calls to <see cref="Dequeue"/> will block if the queue is empty.
    /// Attempting to enqueue items after this has been called will cause an exception to be thrown.
    /// </summary>
    /// <remarks>
    /// If you use a different thread to enqueue items than the thread that calls Stop() you might get a race condition.
    /// 
    /// If the queue is full and a thread calls Enqueue(), that thread will block until space becomes available in the queue.
    /// If a different thread then calls Stop() while the other thread is blocked in Enqueue(), the item enqueued by the other
    /// thread may become lost since it will be enqueued after the special null value used to indiciate the end of the
    /// stream is enqueued.
    /// 
    /// To prevent this from happening, you must enqueue from the same thread that calls Stop(), or provide another
    /// synchronisation mechanism to avoid this race condition.
    /// </remarks>

    public void Stop()
    {
        throwIfDisposed();

        lock (_queue)
        {
            _queueStopped.Set();
            _stopped = true;
        }
    }

    /// <summary>
    /// Returns the front item of the queue without removing it, or null if the queue is currently empty.
    /// A null return does NOT indicate that <see cref="Stop"/> has been called.
    /// This never blocks.
    /// </summary>
    /// <returns>The front item of the queue, or null if the queue is empty.</returns>

    public T Peek()
    {
        throwIfDisposed();
        T result;

        lock (_queue)
        {
            if (_queue.Count > 0)
            {
                result = _queue.Peek();
            }
            else
            {
                result = null;
            }
        }

        return result;
    }

    /// <summary>
    /// Enqueues a new non-null item.
    /// If there is no room in the queue, this will block until there is room.
    /// An exception will be thrown if <see cref="Stop"/> has been called.
    /// </summary>
    /// <param name="item">The item to be enqueued. This may not be null.</param>

    public void Enqueue(T item)
    {
        throwIfDisposed();

        if (item == null)
        {
            throw new ArgumentNullException("item");
        }

        if (_stopped)
        {
            throw new InvalidOperationException("Attempting to enqueue an item to a stopped queue.");
        }

        this.enqueue(item);
    }

    /// <summary>
    /// Dequeues the next available item.
    /// If <see cref="Stop"/> has been called, this returns null if the queue is empty.
    /// Otherwise it blocks until an item becomes available (or <see cref="Stop"/> is called).
    /// </summary>
    /// <returns>The next available item, or null if the queue is empty and stopped.</returns>

    public T Dequeue()
    {
        throwIfDisposed();

        if (_isQueueStoppedAndEmpty)
        {
            return null;
        }

        WaitHandle.WaitAny(_stoppedOrItemAvailable);

        lock (_queue)
        {
            if (_stopped && (_queue.Count == 0))
            {
                _isQueueStoppedAndEmpty = true;
                _queueStoppedAndEmpty.Set();
                return null;
            }
            else
            {
                T item = _queue.Dequeue();
                _spaceAvailable.Release();
                return item;
            }
        }
    }

    /// <summary>Waits forever for the queue to become empty AND stopped.</summary>

    public void WaitUntilStoppedAndEmpty()
    {
        throwIfDisposed();
        WaitUntilStoppedAndEmpty(Timeout.Infinite);
    }

    /// <summary>Waits up to the specified time for the queue to become empty AND stopped.</summary>
    /// <param name="timeoutMilliseconds">The maximum wait time, in milliseconds.</param>
    /// <returns>True if the wait succeeded, false if it timed-out.</returns>

    public bool WaitUntilStoppedAndEmpty(int timeoutMilliseconds)
    {
        throwIfDisposed();
        return _queueStoppedAndEmpty.WaitOne(timeoutMilliseconds);
    }

    #endregion Public methods

    #region Private methods

    /// <summary>Enqueues a new item (which may be null to indicate the last item to go into the queue).</summary>
    /// <param name="item">An item to enqueue.</param>

    private void enqueue(T item)
    {
        _spaceAvailable.WaitOne();

        lock (_queue)
        {
            _queue.Enqueue(item);
        }

        _itemsAvailable.Release();
    }

    /// <summary>Throws if this object has been disposed.</summary>

    private void throwIfDisposed()
    {
        if (_itemsAvailable == null)
        {
            throw new ObjectDisposedException(this.GetType().FullName);
        }
    }

    #endregion Private methods

    #region Fields

    /// <summary>
    /// Contains wait handles for "stopped" and "item available".
    /// Therefore using this for WaitAny() will wait until the queue is stopped
    /// or an item becomes available, whichever is the sooner.
    /// </summary>

    private readonly WaitHandle[] _stoppedOrItemAvailable;

    private Semaphore _itemsAvailable;

    private volatile bool _stopped;
    private volatile bool _isQueueStoppedAndEmpty;

    private readonly Queue<T> _queue;
    private readonly Semaphore _spaceAvailable;
    private readonly ManualResetEvent _queueStopped;
    private readonly ManualResetEvent _queueStoppedAndEmpty;

    #endregion Fields
} 
```

这是一个旧的单元测试。这不是一个很好的单元测试；它一次测试了太多东西并且还有一些其他问题，但它会演示如何使用队列：

```
[TestMethod]

public void TestBoundedBlockingQueue()
{
    int maxQueueSize = 8;

    using (var queue = new BoundedBlockingQueue<string>(maxQueueSize))
    {
        // Fill the queue, but don't block.

        for (int i = 0; i < maxQueueSize; ++i)
        {
            int start1 = DateTimeFunctions.TickCount;
            queue.Enqueue(i.ToString());
            int elapsed1 = DateTimeFunctions.TickCount - start1;
            Assert.IsTrue(elapsed1 < 100, "Took too long to enqueue an item.");  // Shouldn't have taken more than 100 ms to enqueue the item.
        }

        // Now if we try to enqueue something we should block (since the queue should be full).
        // We can detect this by starting a thread that will dequeue something in a few seconds
        // and then seeing how long the main thread took to enqueue something.
        // It should have taken around the thread sleep time (+/- half a second or so).

        int sleepTime = 2500;
        int tolerance = 500;
        Worker.Run(()=>{Thread.Sleep(sleepTime); queue.Dequeue();}, "TestBoundedBlockingQueue Dequeue()");
        int start2 = DateTimeFunctions.TickCount;
        queue.Enqueue(maxQueueSize.ToString());
        int elapsed2 = DateTimeFunctions.TickCount - start2;
        Assert.IsTrue(Math.Abs(elapsed2 - sleepTime) <= tolerance, "Didn't take the right time to enqueue an item.");

        // Now verify that the remaining items in the queue are the expected ones,
        // i.e. from "1".."maxQueueSize" (since the first item, "0", has been dequeued).

        for (int i = 1; i <= maxQueueSize; ++i)
        {
            Assert.AreEqual(i.ToString(), queue.Dequeue(), "Incorrect item dequeued.");
        }

        Assert.AreEqual(0, queue.Count);

        // Now if we try to dequeue something we should block (since the queue is empty).
        // We can detect this by starting a thread that will enqueue something in 5 seconds
        // and then seeing how long the main thread took to dequeue something.
        // It should have taken around 5 seconds (+/- half a second or so).

        string testValue = "TEST";
        Worker.Run(()=>{Thread.Sleep(sleepTime); queue.Enqueue(testValue);}, "TestBoundedBlockingQueue Enqueue()");
        start2 = DateTimeFunctions.TickCount;
        Assert.AreEqual(testValue, queue.Dequeue(), "Incorrect item dequeued");
        elapsed2 = DateTimeFunctions.TickCount - start2;
        Assert.IsTrue(Math.Abs(elapsed2 - sleepTime) <= tolerance, "Didn't take the right time to enqueue an item.");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:10:05.177

2008年[6 月的 .NET Parallel Extensions CTP](http://blogs.msdn.com/b/pfxteam/archive/2008/06/02/8567093.aspx)包含一个`BlockingCollection<T>`类，它可以满足您的需求。虽然它可能没有`Peek`方法。该库与 .NET 3.5 一起使用。我用了很多。

我一直找不到下载它的地方，但你可能会做一些搜索。

它*可能*在 Reactive Extensions 中可用。[较新版本的 Rx 适用于 .NET 4.5，但在http://www.microsoft.com/en-us/download/details.aspx?id=28568](http://www.microsoft.com/en-us/download/details.aspx?id=28568)上提供了较旧版本

# ios - 在由页面控件控制的滚动视图上添加不同的表格视图

> ID：16190696
> 
> 赞同：0
> 
> 时间：2013-04-24T11:23:47.947
> 
> 标签：ios, objective-c, uitableview, uiscrollview, uipagecontrol

我在由页面控件控制的滚动视图上添加了不同的表格视图。我正在这样设置它们。

```
- (void)loadPage:(NSInteger)page {
    if (page < 0 || page >= self.pageStages.count) {
        // If it's outside the range of what we have to display, then do nothing
        return;
    }
    // Load an individual page, first seeing if we've already loaded it
    UIView *pageView = [self.pageViews objectAtIndex:page];
    if ((NSNull*)pageView == [NSNull null]) {
        CGRect frame = self.scrollView.bounds;
        frame.size.width = 280.0f;
        frame.size.height = self.scrollView.bounds.size.height;

        frame.origin.x = (320 * page)+20;
        NSLog(@"orgin x is %d",(320 * page)+20);
        NSLog(@"orgin x is %f",frame.origin.x);
        frame.origin.y = 0;

        UITableView *table = [[UITableView alloc]initWithFrame:frame];
        table.delegate = self;
        table.dataSource = self;

        table.contentMode = UIViewContentModeScaleAspectFit;
        [self.scrollView addSubview:table];
        [self.pageViews replaceObjectAtIndex:page withObject:table];
    }
} 
```

一切正常。添加了 tableviews 并且滑动 als 工作。唯一的问题是 x 坐标不正确。每个 tableview 的两边都应该有 20 px 的边距。因此，为了获得下一个 tableview 的 X，我这样做了。

```
frame.origin.x = (320 * page)+20; 
```

对于第一个 tableview 没关系，但是当我滚动到下一个时，它每次都会向左移动一点。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:43:38.040

当我设置表格的边界而不是框架本身尝试添加它时，它已经解决了

```
[table setBounds:CGPointMake(x, y>)]; 
```

# nuget - 为什么nuget打包时不包含引用的项目？

> ID：16190697
> 
> 赞同：15
> 
> 时间：2013-04-24T11:23:48.873
> 
> 标签：nuget

我在以下简单场景中重现了这个问题

*   LibB - 项目
    *   B类
*   LibA - 项目
    *   引用 ClassB 的 ClassA

现在我想创建一个 nuget 包`LibA`并运行：

```
nuget pack LibA.csproj 
```

这工作正常，但是当我检查 nuget 包时，我无法`LibB.dll`按预期在 lib 文件夹中找到 a 。为什么不？

我正在使用 Nuget 2.2 版。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T19:25:19.307

NuGet 2.5 现在有一个`-includereferencedprojects`选项，可以在此处找到更多详细信息：[NuGet 命令行界面 (CLI) 参考 | Microsoft Docs](http://docs.nuget.org/docs/reference/command-line-reference#Pack_Command)我从或 by
下载最新版本。`nuget.exe``nuget.org/nuget.exe``nuget update -self`

# spring - 自动为每个响应添加标题

> ID：16190699
> 
> 赞同：40
> 
> 时间：2013-04-24T11:23:50.037
> 
> 标签：spring, spring-mvc, cors, response-headers

我想将此标头“Access-Control-Allow-Origin”，“*”添加到每当我的应用程序中对休息控制器发出请求以允许跨源资源共享时对客户端所做的每个响应目前我正在手动添加这个像这样的每个方法的标题

```
HttpHeaders headers = new HttpHeaders();
headers.add("Access-Control-Allow-Origin", "*"); 
```

它的工作，但它非常令人沮丧。我在 spring 文档中找到了 webContentInterceptor，它允许我们修改每个响应的标题

```
<mvc:interceptors>
<bean id="webContentInterceptor" 
class="org.springframework.web.servlet.mvc.WebContentInterceptor">
<property name="Access-Control-Allow-Origin" value="*"/>
</bean>
</mvc:interceptors> 
```

但是当我使用它时，它会抛出错误，找不到名称为 Access-Control-Allow-Origin 的属性，所以有没有其他方法可以自动将标题添加到每个响应

更新 ！Spring 框架 4.2 通过向方法或控制器本身添加 @CrossOrigin 注释极大地简化了这一点 [https://spring.io/blog/2015/06/08/cors-support-in-spring-framework](https://spring.io/blog/2015/06/08/cors-support-in-spring-framework)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-24T12:13:57.630

我最近遇到了这个问题并找到了这个解决方案。您可以使用过滤器添加这些标题：

```
import java.io.IOException;

import javax.servlet.FilterChain;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.web.filter.OncePerRequestFilter;

public class CorsFilter extends OncePerRequestFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {
            response.addHeader("Access-Control-Allow-Origin", "*");
            if (request.getHeader("Access-Control-Request-Method") != null
                    && "OPTIONS".equals(request.getMethod())) {
                // CORS "pre-flight" request
                response.addHeader("Access-Control-Allow-Methods",
                        "GET, POST, PUT, DELETE");
                response.addHeader("Access-Control-Allow-Headers",
                        "X-Requested-With,Origin,Content-Type, Accept");
            }
            filterChain.doFilter(request, response);
    }

} 
```

不要忘记将过滤器添加到您的 spring 上下文中：

```
<bean id="corsFilter" class="my.package.CorsFilter" /> 
```

以及 web.xml 中的映射：

```
<filter>
    <filter-name>corsFilter</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>corsFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

更进一步，您可以指定一个 Spring 配置文件来启用或禁用此过滤器，如下所示：

```
<beans profile="!cors">
    <bean id="corsFilter" class="my.package.FilterChainDoFilter" />
</beans>

<beans profile="cors">
    <bean id="corsFilter" class="my.package.CorsFilter" />
</beans> 
```

（提供类似于 CorsFilter 但仅`filterChain.doFilter(request, response);`在 doFilterInternal(..) 中执行的 FilterChainDoFilter）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-08-07T14:45:58.123

更新 ！Spring 框架 4.2 通过向方法或控制器本身添加 @CrossOrigin 注释极大地简化了这一点 [https://spring.io/blog/2015/06/08/cors-support-in-spring-framework](https://spring.io/blog/2015/06/08/cors-support-in-spring-framework)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-23T19:56:49.640

如果要为控制器设置标题，可以使用`@ModelAttribute`注释。

```
@ModelAttribute
public void setVaryResponseHeader(HttpServletResponse response) {
    response.setHeader("Vary", "Accept");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T13:03:49.473

在 Spring 4 中，您可以使用 @CrossOrigin() 来解决跨源问题。

出于安全原因，浏览器禁止对位于当前来源之外的资源进行 AJAX 调用。例如，当您在一个选项卡中检查您的银行帐户时，您可以在另一个选项卡中拥有 evil.com 网站。evil.com 的脚本不能使用您的凭据向您的银行 API 发出 AJAX 请求（从您的帐户中提取资金！）。

跨域资源共享 (CORS) 是大多数浏览器实现的 W3C 规范，它允许您以灵活的方式指定授权哪种跨域请求，而不是使用一些安全性较低且功能较弱的 hack，如 IFrame 或 JSONP。

Spring Framework 4.2 GA 为 CORS 提供了开箱即用的一流支持，与典型的基于过滤器的解决方案相比，为您提供了一种更简单、更强大的配置方式。

您可以将 @CrossOrigin 注释添加到您的 @RequestMapping 注释处理程序方法中，以便在其上启用 CORS。默认情况下，@CrossOrigin 允许 @RequestMapping 注解中指定的所有来源和 HTTP 方法：

```
@RestController
@RequestMapping("/account")
public class AccountController {

    @CrossOrigin
    @RequestMapping("/{id}")
    public Account retrieve(@PathVariable Long id) {
        // ...
    }

    @RequestMapping(method = RequestMethod.DELETE, path = "/{id}")
    public void remove(@PathVariable Long id) {
        // ...
    }
} 
```

[http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cors.html](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/cors.html)

[https://spring.io/guides/gs/rest-service-cors/](https://spring.io/guides/gs/rest-service-cors/)

[https://spring.io/blog/2015/06/08/cors-support-in-spring-framework](https://spring.io/blog/2015/06/08/cors-support-in-spring-framework)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:29:56.680

[`WebContentInterceptor`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/mvc/WebContentInterceptor.html)没有名为 的属性`Access-Control-Allow-Origin`，据我所知，它没有公开任何设置响应标头的方法。它仅通过启用/禁用某些属性来设置一些与缓存相关的标头。但是编写自己的拦截器（或 servlet 过滤器）来执行此操作很简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-16T22:10:26.533

基本上，我在浏览器中遇到了一个障碍，因为我的 Spring Server 没有告诉浏览器该做什么（不在标题中添加“允许的来源”）。

因此，在**SPRING CLOUD GATEWAY**中解决的问题如下：

```
import org.springframework.cloud.gateway.filter.GatewayFilterChain;
import org.springframework.cloud.gateway.filter.GlobalFilter;
import org.springframework.core.Ordered;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;
import org.springframework.web.server.ServerWebExchange;
import reactor.core.publisher.Mono;

@Component
@Order(Ordered.HIGHEST_PRECEDENCE)
public class CustomGlobalFilter implements GlobalFilter {

@Override
public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {

    exchange.getResponse().getHeaders().set("Access-Control-Allow-Origin", "*");

    if (exchange.getResponse().getHeaders().getAccessControlRequestMethod() != null
            && "OPTIONS".equals(exchange.getResponse().getHeaders().getAccessControlRequestMethod())) {
        // CORS "pre-flight" request
        exchange.getResponse().getHeaders().set("Access-Control-Allow-Methods",
                "GET, POST, PUT, DELETE");
        exchange.getResponse().getHeaders().set("Access-Control-Allow-Headers",
                "X-Requested-With,Origin,Content-Type,Accept");
    }
    return chain.filter(exchange);
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-27T04:47:49.783

我也面临这个问题，我已经修复了这个代码问题。

```
public static HttpServletResponse getResponse(HttpServletResponse response) {
    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setCharacterEncoding("UTF-8");
    response.setHeader("Access-Control-Allow-Methods", "POST, GET");
    response.setHeader("Access-Control-Allow-Headers", "x-requested-with");
    return response;
} 
```

# image - 在 Matlab 中读取文件夹上的多个图像

> ID：16190701
> 
> 赞同：5
> 
> 时间：2013-04-24T11:23:57.273
> 
> 标签：image, matlab, file-io

我在从文件夹中读取 Matlab 中的多个图像时遇到问题。我想用他们的原始名称阅读（使用命令 imread 因为是多波段的）。图像的名称类似于“2001_01”、“2001_02”。这是我的代码：

```
myPath= 'C:\images\'; %'
a=dir(fullfile(myPath,'*.tif'));
fileNames={a.name}; 
```

接着...

```
for k = 1:length(fileNames)
    filename = [fileNames(k).name];  
    I = imread(filename);
end 
```

但它不起作用，我不知道如何单独保存和读取每一个。有人知道我该怎么做吗？真的提前谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:28:47.120

1.  关于第一个问题：

    > 但它不起作用...

    只需将输出`dir`直接分配到`fileNames`（不带括号）：

    ```
    fileNames = dir(fullfile(myPath, '*.tif')); 
    ```

2.  关于第二个问题：

    > ...我不知道如何单独保存`imread`每个。

    似乎您需要一个[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)来将所有图像存储在一个集合中。首先，将元胞数组定义为具有正确的大小：

    ```
    C = cell(length(fileNames), 1); 
    ```

    然后将每个图像存储到不同的单元格中：

    ```
    for k = 1:length(fileNames)
        filename = fileNames(k).name;
        C{k} = imread(filename);
    end 
    ```

    要稍后访问元胞数组中的任何图像`C`，请使用大括号 ( `{}`)。例如，第二张图片的访问方式如下：`C{2}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:32:51.750

代替

```
 fileNames={a.name}; 
```

尝试

```
fileNames = arrayfun( @(x) fullfile( myPath, x.name ), a, 'UniformOutput', false ); 
```

然后，在循环中，您可以访问`k`-th 文件名

```
I = imread( filenames{k} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:28:26.930

它是否返回完整的文件路径？文件名（k）.name ？还是只是实际的文件名？您可能还需要在 myPath 后面加上文件名来处理斜线

```
fileName = strcat(myPath, fileName) 
```

然后做imread，确保你在接触后看过斜线

# html - 居中没有宽度的下拉菜单

> ID：16190702
> 
> 赞同：0
> 
> 时间：2013-04-24T11:24:00.293
> 
> 标签：html, css

我想在不使用父菜单li的宽度的情况下将下拉菜单居中对齐。

CSS：

```
ul{list-style: none;}
li{display: block; float:left; height: 20px; background: #999999; margin: 10px;      position:relative;}
li span{height: 100px; width: 100px; background:#6699FF;position:absolute; left:-50%;     display:none;}
li:hover span{ display: block;} 
```

HTML：

```
<ul>
  <li>Sample Content <span></span></li>
  <li>Sample Content Sample Content<span></span></li>
  <li>Sample Content<span></span></li>
  <li>Sample ContentSample ContentSample Content<span></span></li>
</ul> 
```

示例：http: [//jsfiddle.net/y5nh8/](http://jsfiddle.net/y5nh8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:37:07.907

网上有很多这方面的例子。例如，[http://www.lateralcode.com/css-drop-down-menus/](http://www.lateralcode.com/css-drop-down-menus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:36:22.190

这很可能是 stackoverflow 中已经回答了很多的问题。我的建议是使用搜索**CSS 下拉菜单**或一些类似的查询。

顺便说一句，谷歌是你的朋友，这里有一个免费下拉菜单的来源，我猜你会找到一些适合你想要完成的：[http](http://cssmenumaker.com/css-drop-down-menu) ://cssmenumaker.com/css-drop-down-menu 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:37:40.600

我已经修改了**跨度**检查的 CSS

`li span{height: 100px; width: 100px; background:#6699FF; display:none;margin:0 auto ;}`

[这里](http://jsfiddle.net/dreamweiver/y5nh8/2/)

快乐编码:)

# windows - 哪个版本的 Windows 子窗口可以具有透明度？

> ID：16190703
> 
> 赞同：0
> 
> 时间：2013-04-24T11:24:07.737
> 
> 标签：windows, transparency

```
 SetWindowLong (handle, GWL_EXSTYLE, GetWindowLong (h, GWL_EXSTYLE ) | WS_EX_LAYERED );
 SetLayeredWindowAttributes(h, 0, 180, 2); 
```

在 XP 上，这仅适用`handle`于没有父级的浮动窗口（您可以将其视为插入桌面）。

更完整的答案将包括左侧的 Windows 系列操作系统列表，以及它是否支持右侧的透明子控件。

哪个版本的 Windows 子窗口可以具有透明度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:00:11.670

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633540%28v=vs.10%29.aspx)：

> Windows 8：顶级窗口和子窗口支持 WS_EX_LAYERED 样式。以前的 Windows 版本仅支持顶级窗口的 WS_EX_LAYERED。

# vb.net - 避免了跨线程异常，但 GUI 没有更新

> ID：16190707
> 
> 赞同：1
> 
> 时间：2013-04-24T11:24:14.670
> 
> 标签：vb.net, multithreading, thread-safety, backgroundworker

我有一个线程需要更新 Windows 窗体。使用此处的代码：

[http://www.dreamincode.net/forums/blog/143/entry-2337-handling-the-dreaded-cross-thread-exception/](http://www.dreamincode.net/forums/blog/143/entry-2337-handling-the-dreaded-cross-thread-exception/)

以避免跨线程异常。

我已经更新了控件，但 GUI 没有刷新以显示新值。为了确认它们正在更新，我正在读取它们的值，设置它们然后再次读取它们，并在两种情况下打印出结果。

这是我的代码（包含在线程库中），用于添加一个自定义事件，我可以使用它来触发对任何控件的线程安全更新：

```
Imports System.ComponentModel
Imports System.Runtime.CompilerServices

Public Module MyInvoke
    <Extension()>
    Public Sub CustomInvoke(Of T As ISynchronizeInvoke)(ByVal control As T, ByVal toPerform As Action(Of T))
        If control.InvokeRequired Then
            control.Invoke(toPerform, New Object() {control})
        Else
            toPerform(control)
        End If
    End Sub
End Module 
```

当线程强制更新时，它是这样做的：

```
' Read initial label text and write it out
Dim labelText As String = Form1.Label1.Text
Console.WriteLine("Label: " & labelText)

' Change value of label text, re-read it and write it out
Form1.Label1.CustomInvoke(Sub(l) l.Text = "Hello World")
labelText = Form1.Label1.Text
Console.WriteLine("Label: " & labelText) 
```

此代码更改文本，但不会在 GUI 中更新 - 它仍显示为“Label1”。如果我再次触发线程，它会正确读取更改的值（Hello World），但它仍未在 GUI 中更新（仍显示 Label1）。

我试过刷新它： Form1.Label1.CustomInvoke(Sub(l) l.Refresh()) 没有成功。我究竟做错了什么 ？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:55:28.740

像这样试试

```
 Label1.CustomInvoke(Sub() Label1.Text = "hello") 
```

# c - c编译器如何在内部表示无符号整数

> ID：16190711
> 
> 赞同：0
> 
> 时间：2013-04-24T11:24:19.473
> 
> 标签：c

```
#include<stdio.h>
int main() 
{
int num=0,num1;
do
{
num++;
num1=num+1;
}while(num1>num);
printf("\nthe largest +ve value int can have is:%d",num);
printf("\nthe largest -ve value int can have is:%d",num1);
} 
```

输出： int 可以拥有的最大 +ve 值：2147483647 int 可以拥有的最大 -ve 值：-2147483648

问题是即使我采用“unsigned int”而不是“int”，结果也是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:26:41.147

那是因为您将其打印为整数 ( `%d`)，而不是无符号整数 ( `%u`)。此外，您不需要循环来计算它 - 您可以使用`limits.h`:`UINT_MAX`和`INT_MAX / INT_MIN`.

# jquery - 使用后取消 prependTo

> ID：16190714
> 
> 赞同：1
> 
> 时间：2013-04-24T11:24:32.003
> 
> 标签：jquery, html, css

我正在尝试将 div 移动到左侧的 div，然后将其返回到右侧的 div。

我已经让它工作了，我可以在左边的 div 上显示选定的 div。

HTML：

```
<div id="left">

</div>

<div id="right">
    <div class="block">
        Item 1
    </div>
    <div class="block">
        Item 2
    </div>
    <div class="block">
        Item 3
    </div>
    <div class="block">
        Item 4
    </div>
</div> 
```

查询：

```
$(".block").click(function() {
    if ($(this).height() < 100) {
        $(this).animate({height:"100px",width:"100px"},500);
        $(this).prependTo("#left");
    }
    else {
        $(this).animate({height:"50px",width:"50px"},500);
    }
}); 
```

（另见 Jsfiddle：http: [//jsfiddle.net/MMTu7/](http://jsfiddle.net/MMTu7/)）

我可以使用 prependTo- 或 appendTo- 方法将 div 再次返回到正确的 div，但是顺序会错误......

是否有某种历史方法或类似的东西，所以我可以在单击 div 之前将顺序更改回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:54:31.873

[http://jsfiddle.net/MMTu7/1/](http://jsfiddle.net/MMTu7/1/)

```
$('.block').each(function( i ){
    $(this).addClass('idx'+i);
});

$("#left, #right").on('click', '.block', function() {

    var myIdx = $(this).attr('class').split(" ")[1];
    //alert(myIdx)
    if ($(this).height() < 100) {
        $(this).clone().prependTo('#left').animate({height:100, width:100},500);
        $(this).hide();
    }
    else {
        $(this).animate({height:50, width:50},500, function(){
            $("#right ."+myIdx).show();
            $(this).remove();           
        });
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:58:43.263

尝试使用它。

```
$('.block').click(function() {
    if ($(this).height() < 100) {
        $(this).animate({height:'100px',width:'100px'},500);
        $(this).prependTo('#left');
    }
    else {
        $(this).prependTo('#left');
        $(this).animate({height:'50px',width:'50px'},500);
    }
}); 
```

您的 div 将被重新排序。

[http://jsfiddle.net/SanketS/MMTu7/2/](http://jsfiddle.net/SanketS/MMTu7/2/)

# c# - UDP可以或应该通过代理路由吗？

> ID：16190717
> 
> 赞同：0
> 
> 时间：2013-04-24T11:24:37.547
> 
> 标签：c#

我有一个适用于 Socks 4、Socks 5 和 HTTP 的 TCP/IP 代理套接字实现。我需要通过 UDP 获取 MX 记录。当有代理时，UDP 流量是否通过代理路由？甚至有可能做到这一点吗？如果是这样，我在哪里可以找到这样的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:28:36.153

路由一般是基于 IP 的。所以通过代理发送UDP数据包当然是可以的。甚至还有一些简单的脚本可以做到这一点：[simple udp proxy solution](https://stackoverflow.com/questions/1803329/simple-udp-proxy-solution)

如果在您的情况下可能 - 这取决于您使用的代理。

# php - 如何使用 PHP 获取图像的扩展？

> ID：16190718
> 
> 赞同：1
> 
> 时间：2013-04-24T11:24:37.410
> 
> 标签：php, extension-methods, dir

有没有办法在不写扩展名的情况下获得图像的扩展名？

例如在下面的代码中，我必须编写 image.GIF 才能知道它是 GIF 文件。

```
pathinfo('/testdir/dir2/image.gif', PATHINFO_EXTENSION); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:28:32.843

我总是使用这个函数来找出文件的 mime 类型：

```
function validateMimeType($filePath, $extensions) {
    $finfo      = finfo_open(FILEINFO_MIME);
    $mimeType   = finfo_file($finfo, $filePath);

    finfo_close($finfo);

    return preg_match("/$extensions/i", $mimeType);
} 
```

其中 $extensions 是一个字符串，您可以在其中定义所需的格式，例如：

```
$extension = "jpg|jpeg|png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:29:09.487

要确定它是否真的是 gif，您应该请求 mimetype：

例如： http:
[//www.sanisoft.com/blog/2010/05/17/how-to-use-php-fileinfo-extension-to-get-file-mime-type/](http://www.sanisoft.com/blog/2010/05/17/how-to-use-php-fileinfo-extension-to-get-file-mime-type/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:29:17.913

在带有值大小写的开关中使用 exif_imagetype($file_name) 将使您获得 ext 而不会在名称中包含它。

[http://php.net/manual/en/function.exif-imagetype.php](http://php.net/manual/en/function.exif-imagetype.php)

例子

```
$type = false;
switch(exif_imagetype($file_name)) {
   case 1:
      $type = 'gif';
   break;
   case 2:
      $type = 'jpeg';
   break;
   case 3:
      $type = 'png';
   break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:35:08.777

基本上，没有。

如果有 2 张图片，image.gif 和 image.jpg，您希望得到什么结果？您想获得有关文件的信息，因此您必须使用其名称来调用该文件。扩展名是名称的一部分。

您可以读取目录的所有内容并过滤掉您想要的文件。

```
$dir = "/testdir/dir2";
foreach(scandir($dir) as $file)
{
  if(is_dir($file) == false && $file != ".." && $file != ".")
  {
    var_dump(pathinfo(dir . '/' . $file, PATHINFO_EXTENSION));
  }
} 
```

Pathinfo 是为了简化将文件名拆分为扩展名和名称的过程。这不是确定文件类型，如果您知道硬编码的名称，为什么还要将名称分成几部分？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-24T11:26:52.593

```
$ext = pathinfo($_FILES['image']['name'], PATHINFO_EXTENSION); 
```

摆脱由于某种原因让我投反对票的“自制代码”。

上面的代码可能会有所帮助吗？

每个人都是对的，PHP 有它自己的设备，pathinfo 应该可以正常工作。

以供参考：

```
function get_file_extension($file_name) {
    return substr(strrchr($file_name,'.'),1);
} 
```

可以作为某种形式的替代品。在不知道要读取的文件的确切性质的情况下，很难给出准确的答案。

# c# - 将包含图像及其图层的 HTML div 标签保存到新图像

> ID：16190721
> 
> 赞同：0
> 
> 时间：2013-04-24T11:24:46.113
> 
> 标签：c#, javascript, asp.net, css, html

实际上，我有一个 div 标签，其中包含一个标签以及几个其他标签，这些标签是显示在图像上方的小文本。因此，我需要将图像及其内容保存到新图像中。欢迎您的所有想法。谢谢你。

```
<div id="bin" class=""> 
  <img id="myImage" src="myImage.jpg" alt="" width="300" height="550" />
      <div class="" >a</div>
      <div class="" >b</div>
      <div class="" >c</div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:45:03.843

做这个客户端听起来很有挑战性。您最好的选择可能是创建一个（一组？）C# 类来表示图像的属性和服务器端的相关数据，然后使用这些类并尝试使用 C# 重现图像。

***更新：***

根据您在下面的评论，听起来一个可行的选择是将图像数据发布到例如.ashx，然后在那里执行逻辑。您在评论中提到您已经能够保存图像，所以现在您应该能够处理它，一旦您获得所需的参数。为此，我认为[**ashx**](https://stackoverflow.com/questions/5469491/aspx-vs-ashx-main-difference)可能是要走的路。

# teamcity - 如何使用网络农场框架和章鱼部署

> ID：16190723
> 
> 赞同：2
> 
> 时间：2013-04-24T11:24:49.907
> 
> 标签：teamcity, nuget-package, web-farm-framework, octopus-deploy

我已经使用 team-city 和 octopus 完成了自动化部署的设置。它已成功部署到所需的服务器，但我也需要进行负载平衡。知道如何将它们组合在一起。或使用章鱼执行负载平衡的任何其他最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T17:24:51.180

Octopus 可以绑定到您的负载平衡解决方案，但它不会执行负载平衡。

大多数企业应用程序使用硬件网络负载平衡设备。例如 F5 的 Big-IP 产品线。您还可以像 John Hoerr 建议的那样创建软件解决方案。

一旦有了解决方案，您就可以编写 Octopus 脚本，以满足您业务需求的方式自动配置负载均衡器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T14:15:12.623

我们使用 IIS 的[应用程序请求路由](http://www.iis.net/learn/extensions/planning-for-arr/using-the-application-request-routing-module)扩展来为我们基于 WFF 的场提供负载平衡。ARR 需要额外的“前端”IIS 服务器，它充当“后端”应用程序服务器的反向代理。这是一种享受，我们对此感到非常满意。

# c++ - 使用 eclipse cdt 在 C++ 中包含一个新文件

> ID：16190724
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:24:50.787
> 
> 标签：c++, eclipse, include, eclipse-cdt

对不起，如果这是一个重复的问题。我在 ubuntu 中有 eclipse juno，cdt。一个有效的 hello world autotools 项目。现在我想在另一个文件中使用一个函数，所以我创建了 one.h 和 one.cpp 并修改了 main_hello.cpp：

main_hello.cpp：

```
#include <iostream>
#include "one.h"

using namespace std;

int main(void) {
        cout << "Hello World" << endl;
        onehello();
        return 0;
} 
```

一个.h：

```
#ifndef ONE_H_
#define ONE_H_
void onehello(void);
#endif /* ONE_H_ */ 
```

一个.cpp：

```
#include "one.h"
#include <iostream>
using namespace std;

void onehello(void) {
        cout << "Hello one" << endl;
} 
```

当我构建它时，我得到一个“对 `onehello() 的未定义引用”。如果我在 one.h 而不是 one.cpp 中定义函数，它会起作用。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:35:58.737

将 one.cpp 添加到 src/Makefile.am ：

它应该是此文件中的以下行：

some_name_SOURCES=main_hello.cpp

所以，添加一个.cpp：

some_name_SOURCES=main_hello.cpp one.cpp

# java - Android - 来自带有国家代码的号码的联系方式

> ID：16190727
> 
> 赞同：12
> 
> 时间：2013-04-24T11:25:14.877
> 
> 标签：java, android, sql, android-contacts

从传入的短信中检索手机号码时，它会附加国家代码。
现在，由于数据库中的匹配联系人可能不包括国家代码来获取我正在使用的联系人姓名：

```
public static String getContactName(String number, Context context) {

    try {

        Uri personUri = Uri.withAppendedPath(
            ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number.trim()));
        String selection = PhoneLookup.NUMBER + " LIKE %" + number.trim() + "%";
        Cursor cur = context.getContentResolver().query(personUri,
            new String[] {
            PhoneLookup.DISPLAY_NAME
        },
            selection, null, null);
        if (cur.moveToFirst()) {
            String str = cur.getString(cur.getColumnIndex(PhoneLookup.DISPLAY_NAME));
            cur.close();
            return str;
        }
    } catch (Exception e) {
        //e.printStackTrace();
        return number;
    }
    return number;
} 
```

如果我传入完全匹配或部分匹配，这将非常有效。但是，如果我想获取联系人 ID，我正在使用此代码：

```
public static Contact getContact(String number, ContentResolver contentResolver) {

    Contact contact = new Contact(-1, number);
    try {
        Uri personUri = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Phone.CONTENT_FILTER_URI, Uri.encode(number));
        String selection = ContactsContract.CommonDataKinds.Phone.NUMBER + " LIKE '%" + number + "%'";
        Cursor cur = contentResolver.query(personUri,
            new String[] {
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID, PhoneLookup.DISPLAY_NAME
        },
            selection, null, null);
        if (cur.moveToFirst()) {
            contact = new Contact(Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_ID))),
                cur.getString(cur.getColumnIndex(PhoneLookup.DISPLAY_NAME)));
        }
        cur.close();
    } catch (Exception e) {}
    return contact;
} 
```

如果数字完全匹配，则此方法非常有效，但如果不是，则不返回任何内容。我需要这种方法来查找联系人的 ID，其中其号码保存为“01111111111”，传入号码为“+441111111111”。尽管他们正在查看不同的 URI，但选择代码几乎相同，所以我不确定为什么它不适用于第二个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-09T13:24:59.677

我将此代码用于相同的要求，它通过从相同代码返回 contactId 来返回名称。使用它，您的问题将得到解决。

```
public static String getContactDisplayNameByNumber(String number) {
    Uri uri = Uri.withAppendedPath(
            ContactsContract.PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(number));
    String name = "?";

    ContentResolver contentResolver = context.getContentResolver();
    Cursor contactLookup = contentResolver.query(uri, new String[] {
            BaseColumns._ID, ContactsContract.PhoneLookup.DISPLAY_NAME },
            null, null, null);

    try {
        if (contactLookup != null && contactLookup.getCount() > 0) {
            contactLookup.moveToNext();
            name = contactLookup.getString(contactLookup
                    .getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
            // String contactId =
            // contactLookup.getString(contactLookup.getColumnIndex(BaseColumns._ID));
        }
    } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
    }

    return name;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-09T12:16:38.437

上个月我遇到了同样的问题，我设法使用谷歌的[libphonenumber](https://code.google.com/p/libphonenumber/)库解决了这个问题。

该问题仅发生在本地/国家电话号码上，因为它们可以在没有国家代码或使用“0”的情况下保存。

例如 ：

印度的典型电话号码可以保存为以下格式

```
 a. +919665123456
  b. 919665123456
  c. 09665123456
  d. 9665123456 
```

以上每一种都是完全有效的格式，只能在印度拨打

但是，如果电话号码不属于您的祖国，则必须使用国家代码强制保存，否则您将无法拨打电话。

```
ex. 

 a. +1732-757-2923    (US)
 b. +97433-456-789    (Qatar) 
```

因此，如果相关联系人是 ，则确实会出现匹配联系人的问题`local/national`。

这就是`libphonenumber`图片的来源。使用该库，我们可以提取属于该特定国家的实际国家格式的电话号码。

这是诀窍。首先将接收到的 sms 号码原样传递给 uri，以便在数据库中进行匹配。如果不匹配，则使用 libphonenumber 提取国有化电话号码，然后再次将其作为 uri 传递以进行匹配。( `Uri.encode(number)`)

它在我的情况下有效。

我已经通过以下方式使用它。

```
public String getContactDisplayNameByNumber(String number) {

    if (number != null && number.length() != 0) {

        String name = lookupNumber(number);

        if (!name.contains(number))
            return name;
        else {

            TelephonyManager manager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

            String usersCountryISOCode = manager.getNetworkCountryIso();

            PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
            try {
                PhoneNumber phonenUmber = phoneUtil.parse(name,
                        usersCountryISOCode);
                if (phoneUtil.isValidNumber(phonenUmber)) {
                    temp = phoneUtil
                            .getNationalSignificantNumber(phonenUmber);

                    name = lookupNumber(temp);
                    return name;
                }

            } catch (Exception e) {

                e.printStackTrace();

            }
            return number;
        }
    } else {
        return "Invalid Number";
    }
}

private String lookupNumber(String number) {

    uri = Uri.withAppendedPath(
            ContactsContract.PhoneLookup.CONTENT_FILTER_URI,
            Uri.encode(number));
    name = number;

    contentResolver = getContentResolver();
    contactLookup = contentResolver.query(uri, columns, null, null, null);

    try {
        if (contactLookup != null && contactLookup.getCount() > 0) {
            contactLookup.moveToNext();
            name = contactLookup.getString(contactLookup
                    .getColumnIndex(ContactsContract.Data.DISPLAY_NAME));

        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (contactLookup != null) {
            contactLookup.close();
        }
    }

    return name;
} 
```

希望它能解决你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T13:43:44.033

**对于这类问题，谷歌本身已经为我们提供了专门针对 Android 手机的库。不要使用任何奇怪的代码，看看有经验的开发人员测试过的谷歌官方库。**

使用 Google 的**libphonenumber**库，用于解析、格式化、存储和验证国际电话号码。

这个着陆页上有很多代码片段，所以我认为没有必要在这里编写任何代码；你应该能够从那里理解它们。

[http://code.google.com/p/libphonenumber/](http://code.google.com/p/libphonenumber/)

他们已经给出了所有资源*如何解析*和*如何匹配*。

该库与您相关的功能：

*   解析/格式化/验证世界所有国家/地区的电话号码。

*   isNumberMatch - 获取两个数字是否相同的置信度。

*   findNumbers - 在文本输入中查找数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T11:28:23.033

虽然我的解决方案可能看起来很脏，但这可能会奏效。

```
 String number = "your number";
    ContentResolver contentResolver; // content resolver
    Contact c;
    if (number != null) {
        if (number.charAt(0) == '+') {
            c = getContact(number.substring(1), contentResolver);
            if (c.firstField == -1) {
                c = getContact(number.substring(2), contentResolver);
                if (c.firstField == -1) {
                    c = getContact(number.substring(3), contentResolver);
                }
            }
        } else {
            c = getContact(number, contentResolver);
            if (c.firstField == -1) {
                c = getContact(number.substring(1), contentResolver);
                if (c.firstField == -1) {
                    c = getContact(number.substring(2), contentResolver);
                }
            }
        }
    } 
```

希望能帮助到你...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T12:41:05.930

我不太确定我是否正确回答了您的问题，但我是这样理解的：您的问题是电话号码可能以两种不同的方式出现。有或没有国家代码。

我认为有两个简单的解决方案。最简单的方法是更改​​收件箱中的读取输入。收件箱将始终包含可以修剪的国家/地区代码。例如

```
String inboxNo; //the number you've read from the inbox
int length = inboxNo.length     
if ((inboxNo.equals(whatYouAreSearching) || (String withOutCountryCode = "0"+ inboxNo.substring(3,length-1))
... 
```

另一种解决方案可能是您检查数据库条目的第一个字符并进行转换。例如

```
if(!dataBaseNo.substring(0,1).contanins("+"){
dataBaseNo = "+44" + dataBaseNo.substring(1,length-1);
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-11T11:09:53.670

这种技术适用于我，解析部分数字，通过使用：

```
//encode the phone number and build the filter URI
Uri contactUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number.substring(len-9)));

String selection = PhoneLookup.NUMBER + " LIKE %" + number.substring(len-9) + "%";

Cursor cursor = context.getContentResolver().query(contactUri, projection, selection, null, null); 
```

完整示例：

```
private void getContactDetails(String number) {
    // define the columns you want the query to return
    String[] projection = new String[] {
        PhoneLookup.DISPLAY_NAME,
        PhoneLookup._ID,
        PhoneLookup.LOOKUP_KEY};
    int len = number.length();
    // encode the phone number and build the filter URI
    Uri contactUri = Uri.withAppendedPath(PhoneLookup.CONTENT_FILTER_URI, Uri.encode(number.substring(len-9)));

    String selection = PhoneLookup.NUMBER + " LIKE %" + number.substring(len-9) + "%";

    Cursor cursor = context.getContentResolver().query(contactUri, projection, selection, null, null);

    if(cursor != null) {
        if (cursor.moveToFirst()) {
            String name = cursor.getString(cursor.getColumnIndex(PhoneLookup.DISPLAY_NAME));
            String lookUpKey = cursor.getString(cursor.getColumnIndex(PhoneLookup.LOOKUP_KEY));
        }
        cursor.close();
    }
} 
```

它解析并匹配数字的最后 10 位数字，希望对您有所帮助！！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-24T11:26:54.380

试试这个：[谷歌处理电话号码的图书馆](https://code.google.com/p/libphonenumber/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-07T20:11:52.183

也许您可以对所有国家/地区代码使用静态变量（数组或其他东西），并使用 2-pass 方法正确匹配代码。如果添加了国家/地区代码或其他内容，则可以通过更新来刷新此数组，或者如果您需要非常出色，请从在线标准源中提取并从您的应用程序中触发定期更新。

```
private static int countrycodes[]; // define the entire data here
...
{
...
for(int i=0;i<countrycodes.length;i++){
    //match using regexp or something and flag this for 2nd pass
    }
} 
```

# linux - PostgreSQL 完整备份脚本不起作用

> ID：16190731
> 
> 赞同：1
> 
> 时间：2013-04-24T11:25:29.353
> 
> 标签：linux, bash, backup, hostname, postgresql-9.2

我想使用中提供的备份脚本（我的脚本与给定链接中的脚本相同，仅更改了配置）：

[http://wiki.postgresql.org/wiki/Automated_Backup_on_Linux](http://wiki.postgresql.org/wiki/Automated_Backup_on_Linux)

在 pg_backup.config 我添加了：

```
BACKUP_USER = myusername (that has postgresql superuser access)
HOST = localhost
USERNAME = myusername (that has postgresql superuser access) 
```

更新完整的 pg_backup.config：

```
##############################
## POSTGRESQL BACKUP CONFIG ##
##############################

# Optional system user to run backups as.  If the user the script is running as doesn't match this
# the script terminates.  Leave blank to skip check.
BACKUP_USER=myusername

# Optional hostname to adhere to pg_hba policies.  Will default to "localhost" if none specified.
HOSTNAME=localhost

# Optional username to connect to database as.  Will default to "postgres" if none specified.
USERNAME=myusername

# This dir will be created if it doesn't exist.  This must be writable by the user the script is
# running as.
BACKUP_DIR=/home/myusername/openerp/7.0/backup

# List of strings to match against in database name, separated by space or comma, for which we only
# wish to keep a backup of the schema, not the data. Any database names which contain any of these
# values will be considered candidates. (e.g. "system_log" will match "dev_system_log_2010-01")
SCHEMA_ONLY_LIST=""

# Will produce a custom-format backup if set to "yes"
ENABLE_CUSTOM_BACKUPS=no

# Will produce a gzipped plain-format backup if set to "yes"
ENABLE_PLAIN_BACKUPS=yes

#### SETTINGS FOR ROTATED BACKUPS ####

# Which day to take the weekly backup from (1-7 = Monday-Sunday)
DAY_OF_WEEK_TO_KEEP=5

# Number of days to keep daily backups
DAYS_TO_KEEP=7

# How many weeks to keep weekly backups
WEEKS_TO_KEEP=5 
```

但是当我尝试使用命令运行 pg_backup.sh 时：

```
bash pg_backup.sh 
```

我收到此错误消息：

```
Performing full backups
--------------------------------------------

psql: FATAL:  no pg_hba.conf entry for host "shows my external IP", user "postgres", database "postgres", SSL on
FATAL:  no pg_hba.conf entry for host "shows my external ip", user "postgres", database "postgres", SSL off

All database backups complete! 
```

它还打印出所有数据库都是完整的，但它不做任何备份。

当我手动尝试此命令时：

```
pg_dump -Fp -h "localhost" -U "myusername" "mydatabase" | gzip > /home/myusername/openerp/7.0/backup/"mydatabase".sql.gz; 
```

然后它会完美备份！

所以问题是为什么它会给出如此奇怪的错误？首先它使用我的外部 ip，当它应该使用 localhost，其次它连接到 postgres 用户（或者至少它显示像那样），当它应该连接到 myusername，第三，脚本错过了一些错误检查，因为它打印了所有数据库已成功备份，而实际上根本没有备份任何内容。

还查看脚本看起来它应该正确使用 pg_backup.config 中提供的所有内容，但它没有..

# java - 如何在上一个之后返回下一个 indexOf？

> ID：16190734
> 
> 赞同：7
> 
> 时间：2013-04-24T11:25:34.643
> 
> 标签：java, string, indexof

例如：

```
str = "(a+b)*(c+d)*(e+f)"
str.indexOf("(") = 0
str.lastIndexOf("(") = 12 
```

如何获得第二个括号中的索引？(c+d) <- 这个

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T11:28:15.870

```
int first  = str.indexOf("(");
int next = str.indexOf("(", first+1); 
```

看看[API 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-24T11:28:22.027

**试试这个 ：**

```
 String word = "(a+b)*(c+d)*(e+f)";
 String c = "(";
  for (int index = word.indexOf(c);index >= 0; index = word.indexOf(c, index + 1)) {
       System.out.println(index);//////here you will get all the index of  "("
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:28:57.600

*   `charAt()`反复使用
*   `indexOf()`反复使用

试试这个简单的通用解决方案：

```
 int index =0;
    int resultIndex=0;
    for (int i = 0; i < str.length(); i++){
        if (str.charAt(i) =='('){
            index++;
            if (index==2){
            resultIndex =i;
            break;
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:31:01.973

您可以使用来自 Apache Commons 的[StringUtils](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#indexOf%28java.lang.CharSequence,%20java.lang.CharSequence,%20int%29)，在这种情况下，它将是

```
StringUtils.indexof(str, ")", str.indexOf(")") + 1); 
```

想法是在最后一个参数中可以指定起始位置，这样就可以避免第一个“)”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:38:58.060

我认为有更好的方法！

```
String str = "(a+b)*(c+d)*(e+f)";
str = str.replace(str.substring(str.lastIndexOf("*")), "");
int idx = str.lastIndexOf("("); 
```

和 "(c+d)" ：

```
 str = str.substring(idx); 
```

# jquery - jQuery - 根据其值设置下拉列表的选定索引

> ID：16190735
> 
> 赞同：0
> 
> 时间：2013-04-24T11:25:36.830
> 
> 标签：jquery, select

我尝试做的是以下内容。

有人通过 GET 向我的结果页面发送表单。提交结果页面时，URL 如下所示

```
index.php?Reiseziel=Italy 
```

现在，有一个 ID 为 #filtercountry 的选择，它包含所有可用于过滤的国家/地区。当设置了 GET 值 Reiseziel 时，我想遍历选择的值并选择正确的选项。

例如，选择包含

```
<select name="Reiseziel" id="filtercountry">
<option value="Please choose..." />
<option value="Germany" />
<option value="Italy" />
<option value="Spain" /> 
```

URL 包含“index.php?Reiseziel=Italy”，所以我想将选项值“italy”设置为选中。我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:37:44.977

```
function getQueryStringFromUrl()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}

 $(document).ready(function () {
        var name = getQueryStringFromUrl("Reiseziel");
        $('#dropdownid').val(name);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:27:38.363

查看此主题： [使用 jQuery 按文本内容选择选项](https://stackoverflow.com/questions/1009740/selecting-option-with-jquery)

我相信这完全符合您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:31:15.270

使用[此处描述的](http://jquerybyexample.blogspot.com/2012/06/get-url-parameters-using-jquery.html)此功能：

```
function GetURLParameter(sParam)
{
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for (var i = 0; i < sURLVariables.length; i++) 
    {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == sParam) 
        {
            return sParameterName[1];
        }
    }
}​ 
```

然后你可以像这样使用它：

```
var reiseziel= GetURLParameter('Reiseziel'); 
```

然后使用变量设置选定的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:34:06.223

使用此函数从查询字符串中获取值，它使用`RegExp`：

```
function getParameter(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

然后像这样设置下拉列表的值：

```
$('#filtercountry').val(getParameter('Reiseziel')); 
```

或这个：

```
var reiseziel = getParameter('Reiseziel');
$('#filtercountry').val(reiseziel); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:34:47.993

```
 function QueryString(key) {
                fullQs = window.location.search.substring(1);
                qsParamsArray = fullQs.split('&');
                for (i = 0; i < qsParamsArray.length; i++) {
                    strKey = qsParamsArray[i].split("=");
                    if (strKey[0] == key) { return strKey[1]; }
                }
            }

var Reisezielnew = QueryString("Reiseziel"); 
```

你会进去`country name`，`Reisezielnew`你可以随心所欲地使用它。

# git - Hg-git 不在 Github 上推送提交

> ID：16190739
> 
> 赞同：3
> 
> 时间：2013-04-24T11:25:52.010
> 
> 标签：git, version-control, mercurial, tortoisehg, hg-git

我有这个问题`hg-git`，我不能再推送任何提交`Github`了。以前我完全没有问题。

我有一个 Mercurial 存储库`Bitbucket`，我在其中推送到 Github，其中

```
hg push git+ssh://git@github.com:userid/MyRepo.git 
```

这曾经可以工作，但是现在，当我这样做时，`hg`总是返回没有更改并且提交未更新为`Github`. 它能够连接，没有那种问题。这真的很奇怪，有些东西可能已经损坏了。所以我做了一个新鲜的

```
hg clone 
```

来自的 repo `Bitbucket`，检查提交历史记录是否存在，然后再次将 hg push 到 Github，仍然没有发现任何更改。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T11:20:11.300

根据[https://bitbucket.org/durin42/hg-git/overview](https://bitbucket.org/durin42/hg-git/overview)中的“使用”部分，您应该在主机后从冒号切换到斜杠：

```
hg push git+ssh://git@github.com/userid/MyRepo.git 
```

# javascript - HTML 5 中的现代 UI（Metro）样式磁贴？

> ID：16190743
> 
> 赞同：2
> 
> 时间：2013-04-24T11:26:01.567
> 
> 标签：javascript, css, html, modern-ui

我想知道是否可以在 HTML 页面上从 Windows 8 重新创建现代 UI 的磁贴系统。

我已经从[这个网站创建了](http://www.microsoft.com/belux/techdays/2013/Home.aspx#p=sessions)[这个](http://jsfiddle.net/B4st13n/P45bE/)。这是代码

```
<div class="tile pos1-1 w1h1 techolive"></div>
<div class="tile pos1-2 w1h1 techblue"></div>
<div class="tile pos2-2 w1h1 techred"></div>
<div class="tilebanner" style="font-size: 20px !important;">
    <a class="tile pos2-3 w2h1 techdarkblue" href="...">
                    List of<br/>
                    Sessions
    </a>
</div> 
```

现在我想添加与现代 UI 相同的[滑动移动](http://www.youtube.com/watch?v=4YkNJN_g-sw)效果。我来宾我需要 javaScript 来创建它。也许这个特性或类似特性包含在 HTML 5 或 CSS 中。你知道我在哪里可以找到样品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:30:26.857

有一个名为[Metro JS](http://www.drewgreenwell.com/projects/metrojs)的 jQuery 插件。也许您可以使用它来使用 jquery 和 javascript 创建图块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T11:32:29.323

现在看到这个的任何人都应该看看[MetroUI——](http://metroui.org.ua/)它遵循与 Twitter Bootstrap 非常相似的方法，并且非常易于使用并产生非常好的结果。

这也是：

> 在 Microsoft 的建议下开发以构建用户界面

所以你得到了一些真正适用于 Windows 8 的东西

# numpy - 大型数组的 numpy.mean 精度

> ID：16190745
> 
> 赞同：2
> 
> 时间：2013-04-24T11:26:04.240
> 
> 标签：numpy, precision

我不明白为什么将 float32-Array 转换为 float64-Array 会显着改变数组的平均值。

```
import numpy as n  

a = n.float32(100\. * n.random.random_sample((10000000))+1000.)
b = a.astype(n.float64)        
print n.mean(a), a.dtype, a.shape
print n.mean(b), b.dtype, b.shape 
```

结果（应该是大约 1050，所以 float64 是正确的）：

```
1028.346368   float32 (10000000,)                                                          
1049.98284473 float64 (10000000,) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:38:09.370

@bogatron 解释了导致精度损失的原因。为了解决这类问题，`np.mean`有一个可选`dtype`参数，可以让您指定用于内部操作的类型。所以你可以这样做：

```
>>> np.mean(a)
1028.3446272000001
>>> np.mean(a.astype(np.float64))
1049.9776601123901
>>> np.mean(a, dtype=np.float64)
1049.9776601123901 
```

第三种情况明显快于第二种，但比第一种慢：

```
In [3]: %timeit np.mean(a)
100 loops, best of 3: 10.9 ms per loop

In [4]: %timeit np.mean(a.astype(np.float64))
10 loops, best of 3: 51 ms per loop

In [5]: %timeit np.mean(a, dtype=np.float64)
100 loops, best of 3: 19.2 ms per loop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T12:38:29.110

32 位浮点数只能精确到大约 7 位有效数字。随着值总和的增长，您开始失去较小数字的准确性。64 位数字在 13 到 16 之间具有显着意义，因此您需要更大的总和才能看到相同的效果。

要在您的示例中看到这种效果，请注意增加数组子集的方法：

```
>>> for i in [j * 1000000 for j in range(1, 11)]:
...   print i, n.mean(a[:i]), n.mean(b[:i])
... 
1000000  1050.92768    1049.95339668
2000000  1045.289856   1049.96298122
3000000  1038.47466667 1049.97903538
4000000  1034.856      1049.98635745
5000000  1032.6848512  1049.98521094
6000000  1031.237376   1049.98658562
7000000  1030.20346514 1049.98757511
8000000  1029.428032   1049.98615102
9000000  1028.82497422 1049.98925409
10000000 1028.3424768  1049.98771529 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T12:27:38.463

问题在于均值和求和函数的实现。

浮点值具有恒定的精度。当您将小值添加到某个大值时，您会失去小值的精度。

为了克服这个问题，您需要划分数组并部分计算总和：

```
s=n.float32(0)
for p in xrange(0,a.size,1000):
    s+= n.sum(a[p:p+1000])
print 'Sum:',s
print 'Mean:',s/a.size 
```

会给你更正确的结果。

# paypal - 使用 Paypal 自适应付款自动汇款

> ID：16190746
> 
> 赞同：4
> 
> 时间：2013-04-24T11:26:04.423
> 
> 标签：paypal, paypal-adaptive-payments

这是用户场景：

“ *John 在网站上有 5 个虚拟积分，他可以通过点击网站上的按钮将他的虚拟积分转换为真钱。然后网站将通过 paypal 给他真钱，无论 John 是否有 paypal 帐户。* ”

我想知道是否可以将这种情况落实到位？

当然，出于安全原因，我会在服务器端检查所有需要的数据，以便安全地进行操作。

可以在没有网站管理员任何操作的情况下实现自动化吗？

谢谢您的回答 ！

**编辑：**

我发现这篇文章：[https ://www.x.com/devzone/articles/using-adaptive-payments-disburse-cash-prizes-real-time-easter-eggs](https://www.x.com/devzone/articles/using-adaptive-payments-disburse-cash-prizes-real-time-easter-eggs)

我会尽量适应我的场景。我今天完成整合后会更新我的帖子。

**编辑2：**

一切似乎都很好，但我尝试从 www.x.com 获取应用 ID，他们向我询问我是如何使用 API 的：

> 您好，感谢您的提交，
> 
> 在我们继续审查之前，您能否澄清一下您需要的 API？
> 
> *   您能否说明您使用“隐式付款”来从您的 PayPal 帐户向您的用户付款？如果不需要，请从您提交的“应用程序使用的服务”-“自适应支付”-“基本支付”部分取消选择
>     
>     
> *   您还选择了 Preapprovals，这是一个需要深入审查的高级 API。这将用于与您的客户创建计费协议（如在“订阅”业务模型中）。如果需要，请填写“预先批准条款”字段，并告诉我们如何在您的网站上测试预先批准的付款流程。如果不需要，请从您提交的“应用程序使用的服务”-“自适应支付”部分取消选择它。
>     
>     
> 
> 注意：您需要单击 x.com 的“我的应用程序”部分中的应用程序名称，以展开和编辑提交表单的字段。

我应该怎么办 ？

**编辑 3：**

好的，我得到了 Paypal 的祝福，现在我可以使用带有实时凭据的 API！我取消了预先批准，一切都很顺利。

最后一个问题但并非最不重要：

如何配置我的自适应付款以更改待处理付款并让供应商选择验证付款？

这是更好地了解情况的用例：

“ *John 想将 5 个虚拟积分兑换成 5 美元，他点击提款按钮，网络应用程序会自动将他的贝宝账户中的真钱发送给他。House 博士想要将 100 个虚拟积分兑换成 100 美元，这个金额需要得到批准管理员，这个管理员进入他的贝宝账户，检查一切是否正常，他确认付款，然后豪斯博士会得到他的钱！* ”

我找到了这个选项：

```
$PayRequestFields = array(
                    'ActionType' => 'PAY', // Required. Whether the request pays the receiver or whether the request is set up to create a payment request, but not fulfill the payment until the ExecutePayment is called. Values are: PAY, CREATE, PAY_PRIMARY 
```

如果将值 PAY 更改为值 CREATE，它不会做任何事情。

忠实！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:11:39.680

您可以将其设置为自动化。如果您特别想使用 Adaptive Payments，则需要使用 Adaptive Payments Pay API 将钱汇给 John。但是，John 需要一个 PayPal 才能获取资金并提取资金。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T16:49:42.003

我用这段代码让它在沙盒模式下工作，还没有尝试过：

```
 ServicePointManager.Expect100Continue = true;
        ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls12;

        var request = (HttpWebRequest)WebRequest.Create("https://svcs.sandbox.paypal.com/AdaptivePayments/Pay");
        request.ContentType = "application/json";
        request.Method = "POST";

        request.Headers.Add("X-PAYPAL-SECURITY-USERID", apiUsername);
        request.Headers.Add("X-PAYPAL-SECURITY-PASSWORD", apiPassword);
        request.Headers.Add("X-PAYPAL-SECURITY-SIGNATURE", apiSig);
        request.Headers.Add("X-PAYPAL-APPLICATION-ID", "APP-80W284485P519543T"); // sandbox app id
        request.Headers.Add("X-PAYPAL-REQUEST-DATA-FORMAT", "JSON");
        request.Headers.Add("X-PAYPAL-RESPONSE-DATA-FORMAT", "JSON");

        JObject j = new JObject();
        using (var streamWriter = new StreamWriter(request.GetRequestStream()))
        {
            string json = "{  \"actionType\": \"PAY\",  \"currencyCode\": \"GBP\", \"useCredentials\": \"FALSE\",  \"senderEmail\": \"admin@example.com\",\"ipnNotificationUrl\": \"http://example.com/IPN.aspx\",    \"receiverList\": {\"receiver\": [{\"amount\": \"1.00\", \"email\": \"receiver@gmail.com\"     }]  },  \"returnUrl\": \"http://example.com/thanks.aspx\",    \"cancelUrl\": \"http://example.com/cancel.aspx\",    \"requestEnvelope\": {    \"errorLanguage\": \"en_US\",      \"detailLevel\": \"ReturnAll\"   }}";

            streamWriter.Write(json);
            streamWriter.Flush();
            streamWriter.Close();
        }

        var httpResponse = (HttpWebResponse)request.GetResponse();
        string sResult = "";
        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
        {
            sResult = streamReader.ReadToEnd();

        } 
```

需要注意的几点：

*   确保请求是有效的 JSON，并且您没有意外弄乱语法
*   确保在请求参数上使用正确的大小写
*   如果发布到沙盒 url，请确保您使用的是沙盒凭据
*   添加您的代码以检查您指定的 IPN 网址中的交易（金额、收件人等）

这会从您的帐户自动付款给不需要您登录授权的收件人。

# git - git message - 给定分支的默认配置远程是什么？

> ID：16190751
> 
> 赞同：0
> 
> 时间：2013-04-24T11:26:19.300
> 
> 标签：git

```
You asked to pull from the remote 'hub', but did not specify a branch.
Because this is not the default configured remote for your current
branch, you must specify a branch on the command line. 
```

我的问题是：以下是什么意思？

```
default configured remote for your current branch 
```

我们配置了一个远程 REPO。

谁能澄清一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:41:41.307

每个本地分支都可以配置为“跟踪”远程分支。这意味着：每当您拉出远程并在远程分支上发生更新时，git 将尝试更新您的本地分支以包含远程分支的所有变更集：如果本地分支上没有发生任何事情，它将被快速转发到远程分支的新提示；如果您在本地分支上有本地提交，则两个不同的分支将被合并。

otoh，没有规则说您的本地分支必须跟踪远程分支。拥有彼此无关的本地分支`foobar`和远程分支是完全有效的。`hub/foobar`

经验法则是：

*   *克隆*远程存储库时，默认情况下，本地分支`clone`将*跟踪*所有远程分支（在 时存在）

*   添加新远程时，默认不会跟踪远程分支

如果您想让本地分支明确地跟随远程分支，我发现`-u`在推送到远程时最容易使用该标志：

```
 git checkout localbranch
 git push -u <REMOTE> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:30:02.733

意思是它所说的，你试图从远程仓库中提取，`hub`而指定分支的远程是别的东西。如果您这样做`git branch -a`，它将向您显示该分支当前正在远程跟踪的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:31:26.187

跑

```
git remote -v 
```

它将显示每个远程的名称以及相关 git 服务器的 url。
然后，

```
git pull [REMOTE] master 
```

应该允许您从 git 服务器中提取。[REMOTE] 是您从上一个命令中获取的名称。

**编辑**。我想添加更多细节。当您使用 克隆 git 存储库时`git clone [GIT_URL]`，git 会自动配置与分支`origin`关联的远程命名。`master`Run`git pull`等价于 run `git pull origin master`，也`git push`等同于`git push origin master`.
回到你的问题，你运行`git pull hub`，但默认关联 remote-branch 是`origin-master`所以你可能必须运行

```
git pull hub master 
```

让它工作

# android - 在android中实现布局时出错

> ID：16190753
> 
> 赞同：1
> 
> 时间：2013-04-24T11:26:21.647
> 
> 标签：android, android-layout

我是 android 新手。在 Android 应用程序中实现选项卡视图时，我遇到了一种错误，我无法看到视图/布局。

我得到的错误是`Could not create tab content because could not find view with id -1`

我`activity_main.xml`的如下：-

```
 <?xml version="1.0" encoding="utf-8"?>

 <TabHost android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@android:id/tabhost"
    xmlns:android="http://schemas.android.com/apk/res/android"
    >
    <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    <!-- <HorizontalScrollView android:layout_width="fill_parent"
        android:layout_height="wrap_content"
         android:fillViewport="true"
         android:scrollbars="none">    >> Close this layout used for scrolling tabs
-->
      <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="#2184C6" />

     <FrameLayout
         android:id="@android:id/tabcontent"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" >

      <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        />

     </FrameLayout>
    </RelativeLayout>
    </TabHost> 
```

`error log`我得到的如下：-

```
java.lang.RuntimeException: Could not create tab content because could not find view with id -1
    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:593)
    at android.widget.TabHost$ViewIdContentStrategy.<init>(TabHost.java:584)
    at android.widget.TabHost$TabSpec.setContent(TabHost.java:441)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.setupTabHost(RenderSessionImpl.java:1041)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.postInflateProcess(RenderSessionImpl.java:892)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.postInflateProcess(RenderSessionImpl.java:967)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:293)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.reloadLayoutSwt(GraphicalEditorPart.java:1866)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.access$0(GraphicalEditorPart.java:1804)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener$1.run(GraphicalEditorPart.java:1798)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438) 
```

我`java code`的如下：-

```
package com.example.library;

import android.app.TabActivity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.Toast;
import android.view.Display;
import android.view.Menu;
import android.content.pm.ActivityInfo;
import android.content.res.Configuration;
import android.view.WindowManager;

public class MainActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = getTabHost();
        TabHost.TabSpec spec;

        Intent intent;

        intent = new Intent().setClass(this, FirstActivity.class);
        spec = tabHost.newTabSpec("First").setIndicator("Books")
                      .setContent(intent);
        tabHost.addTab(spec);
 for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
        {
            tabHost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#4E4E9C"));
        }
    }
        // Check screen orientation or screen rotate event here
        @Override
        public void onConfigurationChanged(Configuration newConfig) {
            super.onConfigurationChanged(newConfig);

            // Checks the orientation of the screen
            if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
                Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
            } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT){
                Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
            }
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;

    }  

} 
```

我无法继续前进，因为我无法查看布局。

我阅读了其他问题，`Stackoverflow`但这对我没有帮助。

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:41:10.773

为您的 分配一个 ID `TextView`，它将起作用。

```
<TextView
        android:layout_width="wrap_content"
        android:id="@+id/lblTest"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:39:14.557

而不是所有这些，

```
android:id="@android:id/tabhost" 
```

尝试使用这个

```
android:id="@+id/tabhost" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:36:28.247

我认为由于您的 java 类而引发的错误。

您的类名应该从 TabActivity 扩展，然后您将设置这样的布局。

```
public class MainActivity extends TabActiviy{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activy_main);

}

} 
```

# python - Python facepy撇号问题

> ID：16190757
> 
> 赞同：0
> 
> 时间：2013-04-24T11:26:34.697
> 
> 标签：python, facebook-graph-api, apostrophe, facepy

我通过 python 代码从 Postgresql 数据库中获取一些字符串，并尝试通过 API 将其发送到 Facebook。

```
cur.execute("SELECT  text_column FROM table")
.....
print graph.post(path = str(row["FB_acnt_id"])+'/notifications', template = str(row["_text"]), access_token = fb_token_app, href = str(row["_href_text"])) 
```

一切正常，除了带有撇号的文本。例如：短语 - 它显示为 - It\047s

如何解决这个问题？

谢谢。

# asp.net - 在 GridView 中过滤 DropDownList

> ID：16190765
> 
> 赞同：0
> 
> 时间：2013-04-24T11:27:14.150
> 
> 标签：asp.net, .net, gridview

我已经`DropDownList`嵌套在`GridView`. 如何过滤`DropDownList`数据源，仅显示活动的数据库行（列活动作为位类型）或当前选择的值`DropDownList`？

以下代码的一部分不起作用。有什么方法可以绑定到当前的 GridView 行数据（通过标记）？

```
<asp:GridView ID="GridView" runat="server" AllowPaging="True" 
    AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="PlasticTypeId" 
    DataSourceID="dsPlasticTypes">
    <Columns>
        <asp:CommandField ShowEditButton="True" />
        <asp:CheckBoxField DataField="Active" HeaderText="Active" SortExpression="Active" />
        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
        <asp:TemplateField HeaderText="<%$ Resources:Labels, PlasticFamily %>" SortExpression="PlasticFamily.Name">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Eval("PlasticFamily.Name") %>'/>
            </ItemTemplate>
            <EditItemTemplate>
                <asp:DropDownList ID="ddlFamilies" runat="server" DataSourceID="dsFamilies" DataValueField="PlasticFamilyId"
                    DataTextField="Name" SelectedValue='<%# Bind("PlasticFamilyId") %>'/>
                <asp:EntityDataSource ID="dsFamilies" runat="server" 
                    ConnectionString="name=PlasticsDbEntities" OrderBy="it.Name"
                    DefaultContainerName="PlasticsDbEntities" EnableFlattening="False" 
                    EntitySetName="PlasticFamilies"
                    Where="it.Active==true || it.PlasticFamilyId==@control">
                    <WhereParameters>
                        <asp:ControlParameter Name="control" ControlID="ddlFamilies" PropertyName="SelectedValue" Type="Int32" />
                    </WhereParameters>
                </asp:EntityDataSource>
            </EditItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T13:37:45.153

我通过在绑定到同一字段的 DropDownList 上方放置一个隐藏字段并将其用作 ControlParameter 来过滤数据源来解决此问题。

```
<asp:TemplateField HeaderText="<%$ Resources:Labels, PlasticFamily %>" SortExpression="PlasticFamily.Name">
    <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%# Eval("PlasticFamily.Name") %>' />
    </ItemTemplate>
    <EditItemTemplate>
        <asp:HiddenField ID="hfPlasticFamilyId" runat="server" Value='<%# Eval("PlasticFamilyId") %>' />
        <asp:DropDownList ID="ddlFamilies" runat="server" DataSourceID="dsFamilies" 
            DataTextField="Name" DataValueField="PlasticFamilyId" SelectedValue='<%# Bind("PlasticFamilyId") %>' />
        <asp:EntityDataSource ID="dsFamilies" runat="server" 
            ConnectionString="name=PlasticsDbEntities" 
            DefaultContainerName="PlasticsDbEntities" EnableFlattening="False" 
            EntitySetName="PlasticFamilies" OrderBy="it.Name" 
            Where="it.Active==true || it.PlasticFamilyId==@control">
            <WhereParameters>
                <asp:ControlParameter ControlID="hfPlasticFamilyId" Name="control" 
                    PropertyName="Value" Type="Int32" />
            </WhereParameters>
        </asp:EntityDataSource>
    </EditItemTemplate>
</asp:TemplateField> 
```

# c# - 如何部署在其输出中包含文件夹的 WinForms 引用程序集

> ID：16190766
> 
> 赞同：0
> 
> 时间：2013-04-24T11:27:15.657
> 
> 标签：c#, .net, winforms, deployment

我有一个 Winforms 项目 A，它引用了一个类库程序集 B。程序集 B 的文件夹包含设置为**Build Action = None**和**Copy to Output Directory = True**的文件。这些文件夹和文件正确输出到程序集 B 的 bin 文件夹。它们不是引用文件，只是我需要在运行时从部署位置加载的文件。

运行项目 A 时，程序集 B 中的代码需要访问所描述的文件夹和文件。 **AppDomain.CurrentDomain.BaseDirectory**将为我提供项目 A 的运行位置，但该位置不存在文件夹和文件。如何在程序集 B 的 C# 代码中找到这些文件？

程序集 B 被编译成各种解决方案类型（winforms、Web 服务等），所以我需要一个可以在所有场景中工作的部署。

我希望这是有道理的！我想我正在寻找 a) 对其部署方式的更改，以便文件夹和文件也在运行目录中，或者 b) 对程序集 B 中的代码进行更改。

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:36:38.690

如果要在应用程序之外运送和使用程序集 B，我建议使文件夹嵌入资源而不是磁盘上的外部文件夹。这当然需要在应用程序中使用这些文件的任何地方更改代码，以便从 ResourceStreams 而不是磁盘上的文件中获取它们。

如果文件夹只是应用程序运行时需要访问的数据，那么最简单的解决方案是将两个项目构建到一个公共输出目录。设置输出目录，例如

```
 bin\Debug 
```

到

```
 ..\bin\Debug 
```

这样，A 和 B 的输出（包括文件夹）都将位于同一目录中（如果项目正常位于解决方案目录下的文件夹中）。这也有助于加快构建速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:25:32.393

您可以通过项目属性添加构建后事件。在这种情况下，您可以运行命令将程序集和文件夹及其内容复制到适当的位置。

在您的代码中，如果您需要加载程序集的位置，那么您可以使用 Assembly.GetExecutingAssembly().CodeBase

# php - 从 HTML 字符串调用 php 函数

> ID：16190769
> 
> 赞同：0
> 
> 时间：2013-04-24T11:27:23.747
> 
> 标签：php

我面临从 html 代码调用 PHP 函数并填充函数参数的问题。之后，HTML 代码与函数的返回值一起输出。

例如：

在 PHP 文件的某处定义了函数

```
function html_field($type,$name,$value){ 
//some code here
return $out;
}
// or other example function
function boldme($text){
return "<b>$text</b>";
} 
```

之后在字符串中生成 html 输出，其中包含 php 函数（如标签）

HTML 字符串：

`$html = "<h1><label for="foo">{call~html_field("text","name","value")} </label><input type="text" name="foo" id="foo" /> </h1>"`

或者

`$html = "<h1><label for="foo">{call~boldme("text")} </label><input type="text" name="foo" id="foo" /> </h1>"`

解决方案应该结束，例如：

`$html = "<h1><label for="foo"><input type="text" name="name" ...> </label><input type="text" name="foo" id="foo" /> </h1>"`

或者

`$html = "<h1><label for="foo"><b>text</b> </label><input type="text" name="foo" id="foo" /> </h1>"`

需要过滤此字符串...

注意：包含从模板和主题中收集的 html 数据的字符串，它们是不可知的文件，其中包含**纯 HTML**。

我`preg_replace_callback`用来创建所需的功能，但现在都消失了，感谢我的老板......！@#！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:03:49.587

弦乐`$html`从何而来？如果是静态代码，请使用标准 php：

```
$html = '<h1><label for="foo">' . html_field("text","name","value") . '</label><input type="text" name="foo" id="foo" /> </h1>'; 
```

如果它们是从数据库或文件或其他任何内容加载的，您必须选择：

*   制作自己的模板引擎，工作量大，bug少，浪费时间
*   使用像[twig](http://twig.sensiolabs.org/)这样的轻量级模板引擎，并将你的函数定义为[过滤器](http://twig.sensiolabs.org/doc/advanced.html#filters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:13:41.773

如果你需要解析一个字符串并基于它调用一些函数，你可以使用该`preg_replace_callback`函数。

这样的事情应该可以解决问题：

```
$html = "<p>{functionName('value1', 'value2')}</p>";

function contentParser($matches)
{   
    $function = $matches[1];
    $parameters = array_slice($matches, 2);

    return call_user_func_array($function, $parameters);
}

function functionName($valueA, $valueB)
{
    return "You called functionName with values " . $valueA . " and " . $valueB;
}

echo preg_replace_callback(
    "/\{(\w+)\([\"']([^\"']+)[\"'](?:, ?[\"']([^\"']+)[\"'])?\)\}/",
    "contentParser",
    $html); 
```

这将打印以下内容：

```
You called functionName with values value1 and value2 
```

请注意，我的正则表达式有一个大问题。
您可以将值（在您的 html 中）括在单引号或双引号（“ 或 ' ）中，并且可以混合使用它们......这会导致第二个问题，您不能在值中使用它（我不t 检查转义序列）。

仅使用一个字符作为值包装器（当然，您可以更改该字符）的更简单的模式如下：

```
"/\{(\w+)\(#([^#]+)#(?:, ?#([^#]+)#)?\)\}/" 
```

在这里，我使用尖锐 (#) 作为值分隔符，那么，您的 html 必须如下所示：

```
<p>{functionName(#value1#, #value2#)}</p> 
```

# c++ - 我们是否还需要单独定义静态成员，即使它们是在类定义中初始化的？

> ID：16190776
> 
> 赞同：4
> 
> 时间：2013-04-24T11:27:39.937
> 
> 标签：c++, c++11, language-lawyer

`const` `static`在 C++03 中，我们能够在类定义中内联初始化类数据成员，但[如果要使用](https://stackoverflow.com/q/9786029/560648)[*odr-used*](https://stackoverflow.com/q/9786029/560648)[仍然必须*定义*该成员](https://stackoverflow.com/a/7092830/560648) 。[](https://stackoverflow.com/q/9786029/560648)

 *在 C++11 中仍然是这种情况吗？

```
struct Foo
{
   static const int x = 3;
};

const int Foo::x;
// ^ required? 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T11:27:39.937

## 是的。

> `[C++11: 9.4.2/3]:` **如果非易失性`const` `static`数据成员是整数或枚举类型，则其在类定义中的声明可以指定一个*大括号或等式初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式***（5.19）。字面量类型的`static`数据成员可以用说明`constexpr`符在类定义中声明；如果是这样，它的声明应指定一个*大括号或等式初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式。*[ 注意：*在这两种情况下，成员都可能出现在常量表达式中。*——尾注]* ******如果该成员在程序中被 odr-used (3.2) 使用并且命名空间范围定义不应包含初始化器*，则该成员仍应在命名空间范围内定义。******

 **这与 C++03 中的措辞相当：

> `[C++03: 9.4.2/2]:`如果一个静态数据成员是`const`整数或`const`枚举类型，它在类定义中的声明可以指定一个*常量初始化器*，它应该是一个整数常量表达式（5.19）。在这种情况下，成员可以出现在整型常量表达式中。如果在程序中使用该成员，则该成员仍应在名称空间范围内定义，并且名称空间范围定义不应包含*初始*值设定项。

如您所见，除了为`constexpr`.***

# php - PHP - 一小时后检查json值

> ID：16190783
> 
> 赞同：3
> 
> 时间：2013-04-24T11:28:04.007
> 
> 标签：php

我创建了一个函数，它使用 json 获取 twitter 计数。

但是，我想在一段时间后重新检查它，比如一个小时。但目前它每次加载页面时都会检查。以及哪些影响页面加载时间。

已经有一个 PHP 函数可以做我想要的，但我不记得了，我只记得函数从`tr....`

这是我的功能，它检查 twitter 关注者：

```
function follower( $tw ) {      
    $tw =  @json_decode(file_get_contents('http://api.twitter.com/1/users/show.json?screen_name='.$tw));
    $tw_followers = number_format($tw->followers_count); 

    return $tw_followers;
} 
```

**编辑：**

我发现PHP函数：

```
set_transient('follower', $tw_followers, 60*60*24); 
```

如果我错了，请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:32:48.733

如果您使用的是 Unix 服务器或 Windows 任务计划程序，我建议您使用[cron 作业。](http://en.wikipedia.org/wiki/Cron_%28Unix%29)

像这样，您将能够使用编程任务。

对于 Windows，这里有一个由@Chris Cooney 提供的教程：http: [//www.makeuseof.com/tag/how-to-automate-windows-programs-on-a-schedule/](http://www.makeuseof.com/tag/how-to-automate-windows-programs-on-a-schedule/)

在使用 cron 的情况下，您可以像这样轻松地每小时检查一次：

```
0 * * * *  php -f your_relative_or_full_path_URL/params > /dev/null 
```

为了避免任何人通过 URL 执行代码，你可以[这样](https://stackoverflow.com/a/15618074/1081396)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:35:57.357

如果页面已加载，使用 time() 检查时间将允许它每小时运行一次。您还需要在数据库中存储一个上次运行时间的值。下面是一些与 PHP 混合的伪代码

```
connect_to_database();
$lastcheck = get_value_from_database('last-check');
if($lastcheck+3600 < time()) {
  run_json_stuff();
  update_last_check_in_database();
} 
```

$lastcheck+3600 = 自上次运行以来的 1 小时。如果它小于加载页面时的 time()，则自上次运行以来已经超过一个小时，因此它应该再次运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:37:39.837

您可以使用 mem 缓存或其他一些缓存技术将所有 JSON 键/值排队并运行后台线程以每小时获取这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:34:48.857

使用**AJAX**获取它并在频繁的时间间隔内以正确的值重新加载您的页面。

# c - 将 c 样式字符串的一部分转换为 int

> ID：16190785
> 
> 赞同：1
> 
> 时间：2013-04-24T11:28:06.487
> 
> 标签：c

`input`我有一个可能包含数字的数组。我知道它将出现在数组中的哪个位置（如果确实出现了）：在`:`. （未来的输入可能包括多个数字，每个数字都在一些文本和 a 之后`:`）。

我可以创建一个新数组，然后从`input`我的令牌开始复制到新数组，在我读取 characters 时继续`0-9`。然后我调用`atoi`新数组。

如果我能够说`atoi(array, start, end)`只转换包含我的数字的数组部分并消除对复制到新数组循环的需要，那会更简单一些。

我看不到任何这样的[`atoi`函数](http://www.cplusplus.com/reference/cstdlib/atoi/)重载。

有没有一种简单的方法可以仅将 c 样式字符串的一部分转换为不涉及我自己编写的数字`atoi(const char * str, int start, int end)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:44:38.517

按照 D.Shawley 的建议使用[strtoul](http://www.cplusplus.com/reference/cstdlib/strtoul/)，您可以执行以下操作：

**代码**

```
char* str = ":12 sdfsdf :45:18";
char* p = str;
while (*p)
{
    if (*p++ == ':')
        printf("%d\n", strtoul(p, &p, 10));
} 
```

**输出**

```
12
45
18 
```

[查看键盘](http://codepad.org/s9Hs5xlo)

**atoi 版本**

也可以使用 atoi ( [codepad](http://codepad.org/nmZN2FxT) )：

```
char* str = ":12 sdfsdf :45:18";
char* p = str;
while (*p)
{
    if (*p++ == ':')
        printf("%d\n", atoi(p));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T11:31:54.137

改为使用[`strtoul`](http://www.cplusplus.com/reference/cstdlib/strtoul/)。只需使用索引调整或偏移起始地址。输出指针会让你知道解析在哪里结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:31:55.323

不，我不知道这样的功能。

C中也没有重载。

但是，编写自己的atoi 并不难。

```
int atoi_se(const char * str, int start, int end) {
  char* startPtr = str+start;
  char* endPtr = str+end;
  char savedChr = *endPtr;
  *endPtr = '\0';
  int retVal = strtol(startPtr, NULL, 10);
  *endPtr = savedChr;
  return retVal;
} 
```

注意：我跳过了此类功能所需的防御性编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:32:44.577

`atoi`应该可以正常工作。只需将您的起始位置（而不是整个`input`数组）传递给它，它就会读取尽可能多的数字。数字后的其他字符将被忽略。

# jdbc - jdbc 与 jpa 实现

> ID：16190793
> 
> 赞同：1
> 
> 时间：2013-04-24T11:28:29.357
> 
> 标签：jdbc, jpa-2.0

我如何在 JPA 中做到这一点？

数据库：

```
School
------
id int PK
name varchar
state int FK (State(id))

State
-----
id int PK
desc varchar 
```

爪哇：

```
SchoolShow
----------
int id;
String name;
int iState;
String sState; 
```

代码：

```
select sc.name, st.desc from school sc, state st where st.id=sc.state and sc.id=?

while(rs.hasNext()){
    SchoolShow ss=new SchoolShow();
    ss.setName(rs.getString("name"));
    ss.setSState(rs.getString("desc"));
} 
```

¿我可以有一个具有来自不同表的属性的@Entity 吗？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:37:40.460

`School`您应该为和`State`表创建实体，并使用实体属性上的`@ManyToOne`关系来引用状态。`state``School`

然后你可以像这样查询，浏览从学校到州的关系：

```
List result = em.createQuery("SELECT sc.name, sc.state.desc FROM School sc").getResultList(); 
```

请注意，列表的每个元素都是一个`Object[]`. 您将需要遍历它们并将值分配给您的 DTO。

您还可以使用 JPA 构造函数表达式来保证类型安全并减少混乱：

```
List<DTO> dtos = em.createQuery("SELECT NEW com.example.DTO( sc.name, sc.state.desc) FROM School sc").getResultList(); 
```

DTO 类型必须有一个具有所有相关属性的构造函数。

# wix - wix，如何将字符串添加到自定义路径

> ID：16190805
> 
> 赞同：-1
> 
> 时间：2013-04-24T11:28:51.953
> 
> 标签：wix

我对 WiX 工具集非常陌生。我必须创建一个具有两个要求的安装程序：

1.  将程序安装到默认路径。这很好用。
2.  用户可以选择路径。这很好用，但我必须始终将目录的名称添加为我给的字符串`"WIXUI_INSTALLDIR"`。

如何自动添加目录名称？

这是一个代码示例：

```
<Directory Id="COMNET" Name="COMNET">
   <Directory Id="DICSHS_1" Name="DICSHS">
      <Component Id="DICSHS.EXE" DiskId="1" Guid="2E3EED9D-369D-41E4-A213-0479912E4A40">
         <File Id="DICSHS.EXE" Name="DicsHs.exe" Source="C:\Wix_Tests\program files\COMNET\DICSHS\DicsHs.exe">
            <Shortcut Id="desktopShortcut" Directory="DesktopFolder" Name="DicsHs" WorkingDirectory="INSTALLDIR" Advertise="yes" Icon="DesktopIcon.exe" IconIndex="0" />
            <Shortcut Id="ExeShortcut" Directory="ProgramMenuDir" Name="DicsHs" Advertise="yes" Icon="StartMenuIcon.exe" IconIndex="0" />
         </File>
      </Component>

      <Component Id="SHOWERROR.EXE" DiskId="1" Guid="14B32974-B447-4A8B-973D-C96D80251BE8">
         <File Id="SHOWERROR.EXE" Name="ShowError.exe" Source="C:\Wix_Tests\program files\COMNET\DICSHS\ShowError.exe" />
      </Component> 
```

这里我使用 WIXUI_INSTALLDIR 中的目录 COMNET：

```
<Property Id="WIXUI_INSTALLDIR" Value="COMNET" /> 
<UIRef Id="WixUI_InstallDir" /> 
```

但是当用户选择路径时，我必须始终在自定义路径的末尾添加字符串 COMNET。这是我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:51:00.590

在 COMNET 之前再添加一个根目录并将该 ID 设置为 WIXUI_INSTALLDIR。

例子：

```
<Directory Id=" DIR_ROOT" Name="Sample">
   <Directory Id="COMNET" Name="COMNET">

<Property Id="WIXUI_INSTALLDIR" Value="DIR_ROOT” /> 
```

# c++ - C++-builder：window.cpp 中的访问冲突 0x0000002c

> ID：16190807
> 
> 赞同：0
> 
> 时间：2013-04-24T11:28:55.443
> 
> 标签：c++, c++builder, access-violation, owlnext

我正在修改 C++ Builder XE2 中的程序。该程序还没有使用 vcl，而是使用 owlnext。并包含多个 MDI 子表单。

在那里，我使用例程加载文件并打开一个新窗口。

在这个例程中一切正常（我在调试模式下逐行跟踪它多次），但是当它完成并`PumpWaitingMessages() // pumps any waiting messages, idleCount=0`再次完成并`TApplication::MessageLoop()`进入下一个循环并调用`IdleAction(idleCount++)`哪个调用`MainWindow->IdleAction(idleCount)`哪个调用`TWindow::IdleAction(idleCount)`哪个是 window.h 的函数时，程序崩溃。

在 IdleAction 中，应用程序在调用`win->IdleAction(idleCount)`异常时在第一个循环中崩溃：

```
First chance exception at $004E4CA4\. Exception class $C0000005 with message 'access violation at 0x004e4ca4: read of address 0x0000002c'. Process Project2.exe (3772) 
```

该函数在 Owlnext 中定义如下：

```
//
/// Called when no messages are waiting to be processed, IdleAction performs idle
/// processing as long as true is returned. idleCount specifies the number of times
/// idleAction has been called between messages.
///
/// Propagate idle action to all children if count==0, and to any children that
/// previously said they wanted more time.
//
bool
TWindow::IdleAction(long idleCount)
{
  bool wantMore = false;
  TWindow* win = GetFirstChild();
  if (win) {
    do {
      if (idleCount == 0 || win->IsFlagSet(wfPropagateIdle)) {
        if (win->IdleAction(idleCount)) {
          win->SetFlag(wfPropagateIdle);
          wantMore = true;
        }
        else {
          win->ClearFlag(wfPropagateIdle);
        }
      }
      win = win->Next();
    } while (win && win != GetFirstChild());
  }
  return wantMore;
} 
```

我的猜测是窗口的句柄无效，但win-object似乎并不无效......我也找不到任何包含0x0000002c地址的变量。

好吧，title 和 parent 为 NULL，Handle 为 0x00000004，但其他值对我来说似乎是合法的......但奇怪的是，当检查 cursormodule.name 时它告诉我`E2122 Function call terminated by unhandled exception 0xc0000005 at address 0x408b1a`

那么，有人知道为什么会发生此错误，或者我可以做什么或撤消以使其正常工作吗？

编辑：win->next 是一个定义为的 owl-function

```
//
/// Returns a pointer to the next sibling window in the window's sibling list.
inline TWindow* TWindow::Next()
{
  return SiblingList;
} 
```

与`TWindow* SiblingList;`TWindow 一样私有 TWindow 声明如下：[http](http://pastebin.com/TzTp4ZXh) ://pastebin.com/TzTp4ZXh （请点击链接，因为该类有一个非常大的声明）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T17:19:12.073

你能检查一下你是否正确设置了项目设置：有一个整数大小的枚举选项，它必须打开结构对齐必须与 OWLNext 中的相同 - 默认情况下为 8 个字节。

另外，您可以在启用 CodeGuard 的情况下构建并查看它是否报告任何问题吗？

乔吉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:15:49.533

所以，我仍然不太清楚这是如何详细解决的，但是当我计划将它分段移植到 vcl 时，我加载`#include <vcl.h>`了主文件。

我也全部替换`TFileSaveDialog(handle, fileNameData))`为`owl::TFileSaveDialog(NULL, fileNameData))`.

不，没有任何问题了。

# mysql - 在区分大小写的列中进行不区分大小写的搜索（以及不区分大小写的排序）

> ID：16190809
> 
> 赞同：3
> 
> 时间：2013-04-24T11:28:58.063
> 
> 标签：mysql, sql, select, utf-8

我有一个区分大小写的列（utf8_bin 排序规则）。我需要不区分大小写地搜索字符串并不区分大小写地对结果进行排序。

是写了这个查询。

```
SELECT customer_name 
   FROM customers
   WHERE CONVERT(customer_name USING UTF8) LIKE 'aB%' 
   ORDER BY CONVERT(customer_name USING UTF8) 
   LIMIT 0,10 
```

这有效率吗？还是有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:35:48.983

大写转换呢？

```
SELECT customer_name 
   FROM customers
   WHERE UPPER(customer_name) LIKE 'AB%' 
   ORDER BY UPPER(customer_name) 
   LIMIT 0,10 
```

# java - Passing JSON data between Python and Java Datagram Sockets

> ID：16190811
> 
> 赞同：1
> 
> 时间：2013-04-24T11:29:00.580
> 
> 标签：java, python, json, sockets, datagram

Hi I have a very simple Java server and two clients. One client is Java based and other is python based. When I send any string from Java client to java server or vice versa it works fine. When I send any string from Java to python it also works fine. But when I send a string from python which is generated by python json lib using json.dumps, I receive a buffer in Java containing desired data and null bytes. There is no indication of start or end of string. How do i convert it back to String of same length. Currently the string has a lot of null bytes after JSON data is finished thats why I wont be able to parse that string correctly.

Receive code for Java is like this.

```
byte[] receiveData = new byte[1024];
DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
CtrlChannel.getSocket().receive(receivePacket);
strData = new String(receivePacket.getData());
System.out.println("FROM PYTHON:" + strData); 
```

Sender code of python is like this.

```
...
...
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM) # UDP
sock.bind((UDP_IP, UDP_PORT))
data = {}
data["type1"] = "type1"
data["type2"] = "type2"
data["type3"] = "type3"
data["type4"] = "type4"

data_string = json.dumps(data)
sock.sendto(data_string, (addr[0], 36963))
...
... 
```

I am new to Java so there may be some silly mistake I am doing. PLease help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:29:20.067

In your java code you use a 1024 byte buffer to recieve udp packets, which will only be filled partially if you don't receive enough bytes. `receivePacket.getData()` simply returns this buffer.

When you then convert it to a String, of course the remaining bytes will be filled with whatever was in the buffer before (in this case zero bytes, but could als be filled with content if you used it as receiving buffer before).

The correct way to get the received data would be to use the `getLength()` and `getOffset()` methods of `DatagramPacket`:

```
strData = new String(receivePacket.getData(), receivePacket.getOffset(), receivePacket.getLength()); 
```

# excel - 从 Internet 服务器 VBA Excel 取件时间

> ID：16190812
> 
> 赞同：0
> 
> 时间：2013-04-24T11:29:02.637
> 
> 标签：excel, vba

是否有可以在 Excel 2007 中运行的 VBA 代码，它可以从众所周知的 Internet 服务器中检索日期和时间？我需要这个来根据检索到的日期和时间调用宏。代码不应将值粘贴到任何地方，而是将日期和时间存储在变量中。

例如，网址[http://tycho.usno.navy.mil/cgi-bin/timer.pl](http://tycho.usno.navy.mil/cgi-bin/timer.pl)将我们带到一个网页，该网页只有美国几个时区的当前时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:52:58.010

您可以尝试我在 Personal.xls 工作簿中的以下内容（几个月前发现它）：

```
Sub GetiNetTime()

'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'
'
'   The GetiNetTime macro is written by Karthikeyan T.
'
'   Please Note: Original code adjusted here for setting Indian Standard Time,
'   India Standard Time (IST) = GMT+5:30
'   Time adjusted for BST by setting  the 'Hr' variable = 1 to get GMT+1
'
'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'

Dim ws
Dim http
Dim GMT_Time, NewNow, NewDate, NewTime, Hr, Mn ', Sc

'Below line wont work since clock providers changed the URL.
'Const GMTTime As String = "http://wwp.greenwichmeantime.com/time/scripts/clock-8/runner.php"

'Updated URL to fetch internet time ***
'Macro updated Date & Time: 27-Oct-12 1:07 PM

     Const GMTTime As String = "http://wwp.greenwichmeantime.com/time/scripts/clock-8/runner.php?tz=gmt"

On Error Resume Next
Set http = CreateObject("Microsoft.XMLHTTP")

http.Open "GET", GMTTime & Now(), False, "", ""
http.Send

GMT_Time = http.getResponseHeader("Date")
GMT_Time = Mid$(GMT_Time, 6, Len(GMT_Time) - 9)

'Set Indian Standard Time from Greenwich Mean Time.
'India Standard Time (IST) = GMT+5:30
    Hr = 1      'Hours. =1 for BST, 2 for Europe Time, 11 for Oz?
    Mn = 0     'Minutes.
    'Sc = 0     'Seconds.

NewNow = DateAdd("h", Hr, GMT_Time) 'Adding 5 Hours to GMT.
NewNow = DateAdd("n", Mn, NewNow)   'Adding 30 Minutes to GMT.
'NewNow = DateAdd("s", Sc, NewNow)  'Adding 0 Seconds to GMT.

MsgBox "Current Date & Time is:  GMT " & NewNow, vbOKOnly, "GetiNetTime"

'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'
'
'   If you want to insert the new date & time in excel worksheet just unquote
'   the following lines,
'
'   Sheets("Sheet1").Select
'   Range("A1").Select
'   ActiveCell.Value = NewNow
'
'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'

'Insert current date & time in cell on selected worksheet.
'Sheets("Sheet1").Select        'Select worksheet as you like
'Range("A1").Select             'Change the destination as you like
'ActiveCell.Value = NewNow

'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'
'
'   If you want to change the system time just unquote the following lines,
'
'   Set ws = CreateObject("WScript.Shell")
'   NewDate = DateValue(NewNow)
'   NewTime = Format(TimeValue(NewNow), "hh:mm:ss")
'   ws.Run "%comspec% /c time " & NewTime, 0
'   ws.Run "%comspec% /c date " & NewDate, 0
'   Set ws = Nothing
'
'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'*'

'Set ws = CreateObject("WScript.Shell")
'Split out date.
'NewDate = DateValue(NewNow)

'Split out time.
'NewTime = Format(TimeValue(NewNow), "hh:mm:ss")

'Run DOS Time command in hidden window.
'ws.Run "%comspec% /c time " & NewTime, 0

'Run DOS Date command in hidden window.
'ws.Run "%comspec% /c date " & NewDate, 0

Cleanup:
'Set ws = Nothing
Set http = Nothing

End Sub 
```

# sql - 我应该使用关系数据库来存储我的 XML 文档吗

> ID：16190821
> 
> 赞同：0
> 
> 时间：2013-04-24T11:29:36.970
> 
> 标签：sql, xml, database

我使用并编写使用各种模式以 XML 编写的技术文档。我开发了一个相当简单的 Windows 窗体应用程序，我们现在在办公室将其用作工作流系统。该程序可以签入、签出和移动验证过程。该程序使用一个通用的“data.xml”文件来读取和写入，从该文件中跟踪笔记、作者、状态和各种其他内容。

但是，目前应用程序指向共享驱动器上的文件夹结构，其中包含每个项目中的所有 xml 文件，以及保存程序项目数据的 data.xml 文件。因此，当有人签出文件时，应用程序只需将文件从一个文件夹移动到另一个文件夹（用户不可见），更新 data.xml 文件，然后更新 UI 中的 listViews。

这可以正常工作，除非当然有几个人在处理同一个项目，并且客户端应用程序尝试同时写入 data.xml 文件。

所以我想我想做的是将整个系统迁移到数据库。因此，它不是将 XML 文件存储在文件夹中，而是将它们存储在 SQL 等数据库中。现在我完全没有数据库经验，因此希望有一个指针可以让我朝着正确的方向前进。理想情况下，我需要能够查询数据库中的 xml 文档，所以我希望能够使用 Xquery，并在理想情况下对所有文件运行进程。例如，目前我可以在整个项目上运行 XSLT，因为它们只是放在一个文件夹中。

所以我的问题是，为了保留这种功能，我应该查看哪种类型的数据库？像 SQL 一样的关系，或者可能是 xml 数据库？

注意：每个 xml 文件最大为几百 Kbs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:23:03.920

你能找到一个源代码控制系统，而不是所有的猴子业务，一次只允许一个人签出一个文件。或者只是使用某种文件锁定机制来限制一次只能访问一个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:34:51.543

我会说将数据库用于项目和客户特定数据，而不是将 xml 文档存储在数据库中。如果您的大多数 xml 文件不会延迟太多，您可以使用 xml 模板并回到您使用 XSLT 更新这些模板之前呈现有用数据的观点。我的 xml 模板去哪里了？它可以在您的文件系统或数据库中。这样就避免了存储大量的xml文档，也避免了数据库中xml代码的重复。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T13:06:20.250

“......为了保留这种功能，我应该查看哪种类型的数据库？”

实际上只有一种数据库类型——RDBM。所有类型的关系数据库都支持 XML、文本或二进制存储，例如文件和文档。

对我来说，更大的问题是，通过普通编程和 SQL 数据库，您是否能够支持多用户环境中的文档存储。简短的回答是，我不这么认为，至少在你没有大量工作的情况下是这样。

问题是这样的：假设你和我在同一个办公室工作。我转到文档数据库并下载文档 XYZ.xml 的副本并开始进行更改。同时，您还将获得该文档的副本并开始进行更改。完成后，我将检查我的更改（sql 中的正常更新函数）。然后，当您签入更改时，您的更改将覆盖我的更改。大问题。

但是，如果您可以将文档签出过程限制为“独占”使用（即，一次只有一个人可以签出和签入一个文档），那么在 SQL 上存储 XML 文档是可能的，而无需大量工作。这可以通过简单地在文档存储表中设置一个标志来完成，例如 DocInUse=True。如果 DocInUse=True，则在重新签入且 DocINUse 字段 = False 之前无法再次下载该文档。我确定你会跟随。

顺便说一句，有一些应用程序可以为您执行此操作。有来自 Microsoft 的 Team Foundation Server 和 Source Safe，以及其他允许这种存储和签出/签入处理的程序……但这些程序并不便宜。

我希望这有帮助。

# ruby - 如何使用 watir 将图像保存在 blob 字段中？

> ID：16190826
> 
> 赞同：2
> 
> 时间：2013-04-24T11:30:07.963
> 
> 标签：ruby, watir

```
<table>  
<tr>
<td>hello</td>
<td><img src="xyz.png" width="100" height="100"></td>
</tr>
</table> 
```

*我想将这个 xyz.png 以 blob 形式保存到我的数据库中，那么如何以`blob`表格形式保存图像。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T10:37:04.970

```
img=cell.image.src
image = Net::HTTP.get_response(URI.parse(img)).body 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T16:46:53.653

看看我写的这个简单的例子。本质上，我只是使用 id 找到我想要的图像，然后获取它的来源。然后，我打开一个临时文件来保存图像的内容，最后，我打开该 src 的 url 并将其写入临时文件。使用 tempfile 的好处是没有清理。

```
require 'watir-webdriver'
require 'open-uri'
require 'tempfile'

browser = Watir::Browser.new :firefox
browser.goto("http://www.reddit.com")
img = browser.image(:id, "header-img").src

tempFile = Tempfile.new('tempImage')
open(img, 'rb') do |image|
  tempFile.write(image.read)
end
tempFile.rewind
puts tempFile.read ###Make your database call here, simply save this tempFile.read as a blob 
tempFile.close
tempFile.unlink # completely deletes the temp file
browser.close 
```

对于这个例子，我只是获取 reddit 徽标并将二进制数据打印到屏幕上。您从未指定您正在使用哪个数据库，所以我不想假设，但不是做“放置”，而是在那里进行数据库调用。

# google-chrome-extension - 无法从 Chrome 扩展程序的 background.js 重定向

> ID：16190828
> 
> 赞同：0
> 
> 时间：2013-04-24T11:30:12.917
> 
> 标签：google-chrome-extension

在`Ajax's done() method`我必须重定向到`download.php?file=filename.txt`哪个将强制下载给定文件。问题是它`window.location`不起作用。

我试过的是：

```
window.location = "http://domain.com/download.php?file=test.txt"; 
```

或者

```
chrome.tabs.executeScript(null, {code: 'window.location = "http://domain.com/download.php?file=test.txt"' }); 
```

两者都不起作用。我认为它可能来自 Ajax（我红色的东西是关于成功重定向的）并在 Ajax 代码之外（和之前）尝试了这些。又不工作了。

**manifest.json**的一部分：

 **```
...
"background": {
    "scripts": [
        "scripts/jquery.min.js",
        "scripts/background.js"
    ]
},
... 
```

当从外部文件尝试`window.location`工作时，问题在于它在扩展中使用时。

有任何想法吗？**

# ruby-on-rails-3 - Rails - 动态添加表单字段并在“数组”中转换参数

> ID：16190829
> 
> 赞同：3
> 
> 时间：2013-04-24T11:30:19.277
> 
> 标签：ruby-on-rails-3, simple-form, viewparams

我想动态添加新的输入（选择）字段，这可以通过 JQuery 完成，但是当传递给控制器​​时，`create`它只保留第一个条目。

这是我的`new.html.erb`看法

```
<%= simple_form_for @comp, :url => url_for(:controller => 'competitors', :action => 'create'), :method => 'post' do |f| %>
    <div id="form_inputs">
        <%= f.error_notification %>
        <br />
        <%= f.collection_select :user_id, User.order("LOWER(name) ASC"), :id, :name, :prompt => "Select an user", required: true %>
        <span class="label label-important"><%= f.error :user_id %></span>
        <br />
        <%= f.collection_select :competitor_id, Company.order("LOWER(name) ASC"), :fb_id, :name, :prompt => "Select a competitor"%>
        <span class="label label-important"><%= f.error :competitor_id %></span>
        <br />
    </div>
        <div class="add">Add another competitor <%= image_tag "add.png" %></div>
        <br />

    <%= f.button :submit, "Create new competitor!" %>

<script type="text/javascript">

    $(".add").on('click', function(event){
        event.preventDefault();

        $("#form_inputs").append("<%= escape_javascript(f.collection_select :competitor_id, Company.order('LOWER(name) ASC'), :fb_id, :name, :prompt => 'Select a competitor') %> <span class='label label-important'><%= escape_javascript(f.error :competitor_id) %></span><br /> ");

        $('select').selectpicker();
    });

</script>

<% end %> 
```

我想在我的控制器中收到的参数是这样的：

`params[:user_id]`=> OK
`params[:competitor_id]`=> 用户插入的所有 ID 的数组（只能是 1 或 +）。

例如，如果用户“点击”了 3 次添加按钮，则有 4 次`competitor_id`，`params[:competitor_id]`应该类似于：
`params[:competitor_id] = [71,32,65,234]`按选择的顺序。

如何`:competitor_id`在一个数组中转换各种选择？

# text - Android：如何根据条件在需要时合并两个 TEXT VIEWS？

> ID：16190831
> 
> 赞同：0
> 
> 时间：2013-04-24T11:30:25.060
> 
> 标签：text, merge, views

我为我的大学编写了一个应用程序，要求我为每个学生设计一个时间表。所以我在每一行都使用了带有文本视图的表格视图，文本视图是指学生上课的时间（每个文本视图代表一个小时，比如从上午 9 点到上午 10 点）。所以我可以从数据库中检索值并将它们设置到测试视图中。但主要问题是学生可能有两个小时的课程。

如何将两个文本视图合并在一起以表示两小时的上课时间？

或者

有比表格视图更好的方法吗？

并提前感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:49:10.943

好的，所以你可以使用`TableLayout`它。`TableLayout`可以使用项目动态构建`TableRow`。每个`TableRow`都可以添加到`TableLayout`和中，`TableRow`您可以添加您的控件（如`TextViews`）。我假设您有一些数据，并且您正在根据该数据构建表格。无论如何，它会是这样的：

```
TextView tv1 = new TextView();
TextView tv2 = new TextView();
if(some condition){
  tv1.Text = "whatever text you need to add";
  //add tv1 to your layout
}
else{
  tv1.Text = "some text for tv1";
  tv2.Text = "some text for tv2";
  //add both textviews to your layout
} 
```

我无法为您编写更复杂的代码，因为我在工作并且没有安装 Eclipse。但是，如果您想更深入地了解如何执行此操作，请查看[此](http://huuah.com/using-tablelayout-on-android/)

希望它会帮助你。

# android - 如何在 android 2.2 中以马拉雅拉姆字体（印度当地语言）设置 textview

> ID：16190833
> 
> 赞同：3
> 
> 时间：2013-04-24T11:30:27.490
> 
> 标签：android, text

我需要以`TextView`印度当地语言的马拉雅拉姆字体显示。为此，我正在尝试以下代码

```
 Typeface custom_typerface = Typeface.createFromAsset(getAssets(), "fonts/AnjaliNewLipi.ttf");
        TextView mytext = (TextView)findViewById(R.id.mytext);
        mytext.setTypeface(custom_typerface);
        mytext.setText("മലയാള ഭാഷ തന്‍ ഭാവ ശുദ്ധി..."); 
```

这在 4.2 设备上正确显示，但并非在所有设备上都能正确显示。如何为所有 android 设备渲染它？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T11:57:41.803

上面的代码是正确的，它应该显示马拉雅拉姆字体。但是有一个问题！如果您的手机不支持该字体，它不会显示马拉雅拉姆语，而是会显示一些框。

如果您使用任何文件浏览器并查看系统/系统/字体 - 您将看到设备支持的所有字体。

如果您想添加新字体，您也可以这样做，但设备必须为此扎根。许多便宜的手机只支持几种字体，但昂贵的手机却支持多种字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T04:47:32.787

**将自定义字体设置为 TextView。**

你有两种方式，先看第一种方式：

**1.**将您的字体文件添加到资产文件夹，如果不存在资产文件夹创建它。

**2**、创建CustomTypeface类，例如：

```
import android.content.Context;
import android.content.res.AssetManager;
import android.graphics.Typeface;

public class CustomTypeface {

    private static Typeface typefaseArialCondIt;
    private static Typeface typefaseArialBold;
    private static Typeface typefaseArialRegular;

    public CustomTypeface() {
    }

    public CustomTypeface(Context context) {
        AssetManager assets = context.getAssets();
        CustomTypeface.typefaseArialCondIt = Typeface.createFromAsset(assets, "fonts/ArialCondIt.otf");
        CustomTypeface.typefaseArialBold = Typeface.createFromAsset(assets, "fonts/ArialBold.otf");
        CustomTypeface.typefaseArialRegular = Typeface.createFromAsset(assets, "fonts/ArialRegular.otf");
    }

    public static Typeface gettypefaseArialCondIt() {
        return typefaseArialCondIt;
    }

    public static Typeface settypefaseArialCondIt(Typeface typefaseArialCondIt) {
        return CustomTypeface.typefaseArialCondIt = typefaseArialCondIt;;
    }

    public static Typeface gettypefaseArialBold() {
        return typefaseArialBold;
    }

    public static Typeface settypefaseArialBold(Typeface typefaseArialBold) {
        return CustomTypeface.typefaseArialBold = typefaseArialBold;;
    }

    public static Typeface gettypefaseArialRegular() {
        return typefaseArialRegular;
    }

    public static void settypefaseArialRegular(Typeface typefaseArialRegular) {
        CustomTypeface.typefaseArialRegular = typefaseArialRegular;
    }
} 
```

**3.**并将自定义字体设置为TextView：

```
TextView yourTextView = (TextView) findViewById(R.id.textView1);
yourTextView.setTypeface(CustomTypeface.gettypefaseArialRegular); 
```

**或者第二种方法，使用您的字体创建自定义 TextView：**

```
import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.TextView;

public class ArialTextView extends TextView {

    public ArialTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }
    public ArialTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public ArialTextView(Context context) {
        super(context);
    }

    @Override
    public void setTypeface(Typeface tf, int style) {
        if (style == Typeface.BOLD) {
            setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/ArialBold.otf"));
        } else if (style == Typeface.NORMAL) {
            setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/ArialRegular.otf"));
        } else if (style == Typeface.ITALIC) {
            setTypeface(Typeface.createFromAsset(getContext().getAssets(), "fonts/ArialCondIt.otf"));
        }
    }
} 
```

并且在布局 xml 中您可以创建自定义 TextView，例如：

```
<com.your.package.ArialTextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textAppearance="?android:attr/textAppearanceMedium"
     android:text="TextView with your custom font"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T10:43:01.763

经过长时间的搜索，我终于找到了答案。我将 Unicode 字体转换为 Ascii，用 Ascii 替换每个 Unicode 字符。这是神奇的代码

```
mytext.replaceAll("oldChar", "newChar"); 
```

对每个字符使用此代码。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-22T02:49:05.413

我不确定这是否适用于您的情况，但我使用的是旁遮普字体。我所做的不是复制或将文本输入到字符串中，然后使用字体。您当然确实使用了该字体，但为了使其正常工作，您需要在音译中输入马拉雅拉姆语文本，即如下面的印地语示例，因为我不知道马拉雅拉姆语。

PUl

```
 Typeface custom_typerface = Typeface.createFromAsset(getAssets(), "fonts/AnjaliNewLipi.ttf");
    TextView mytext = (TextView)findViewById(R.id.mytext);
    mytext.setTypeface(custom_typerface);
    mytext.setText("PUl"); //Assuming you know Hindi PUl in hindi is फूल 
```

这将以正确的格式显示文本，没有问题但是如果您只是输入

```
mytext.setText("फूल"); 
```

它很有可能无法正确呈现字体。我希望这有帮助。:)

# templates - 以编程方式在线分配 sharepoint 中的权限

> ID：16190841
> 
> 赞同：2
> 
> 时间：2013-04-24T11:30:42.903
> 
> 标签：templates, sharepoint, office365, feature-activation

我正在在线使用 Sharepoint 中的自定义模板，并且我想在创建子站点时自动将组分配给列表。我做了什么：

*   在 Visual Studio 中创建模板
*   为最后一个功能添加了事件接收器
*   用下面的脚本填充功能激活方法

应该发生的是，当创建子站点时，将触发 featureactivated 方法，并且指定的组将被分配对列表的权限。

```
 public override void FeatureActivated(SPFeatureReceiverProperties properties)
    {
      using (SPSite site = properties.Feature.Parent as SPSite)
      {
        SPWeb web = (SPWeb)properties.Feature.Parent;

        try
        {
          SPList internalNotes = web.Lists.TryGetList("Internal Notes");
          SPList externalNotes = web.Lists.TryGetList("Notes");

          SPGroup headOfArtists = web.SiteGroups.GetByName("Head of Production");
          SPGroup stageDesigners = web.SiteGroups.GetByName("Logistics Manager");

          web.BreakRoleInheritance(true);

          Tools.GroupHandler.addGroupToSPWeb(web, SPRoleType.Editor, headOfArtists);
          Tools.GroupHandler.addGroupToSPWeb(web, SPRoleType.Reader, stageDesigners);

          internalNotes.BreakRoleInheritance(true);
          externalNotes.BreakRoleInheritance(true);

          Tools.GroupHandler.addGroupToSPList(web, SPRoleType.Reader, headOfArtists, externalNotes);
          Tools.GroupHandler.removeGroupFromList(web, stageDesigners, externalNotes);

        }
        catch (Exception e)
        {
          logger.LogError("Failed to add rights", e);
        }
      } 
```

GroupHandler 类是一个静态类，如下所示：

```
public static class GroupHandler
  {
    public static void addGroupToSPWeb(SPWeb web, SPRoleType roleType, SPGroup group)
    {
      try
      {
        SPRoleAssignment roleAssignment = new SPRoleAssignment((SPPrincipal)group);
        SPRoleDefinition roleDefinitionRead = web.RoleDefinitions.GetByType(roleType);
        roleAssignment.RoleDefinitionBindings.Add(roleDefinitionRead);
        web.RoleAssignments.Add(roleAssignment);
      }
      catch (Exception e)
      {
        logger.LogError("Failed to add rights", e);
      }
}

public static void addGroupToSPList(SPWeb web, SPRoleType roleType, SPGroup group, SPList list)
{
  try
  {
    SPRoleAssignment roleAssignment = new SPRoleAssignment((SPPrincipal)group);
    SPRoleDefinition roleDefinitionRead = web.RoleDefinitions.GetByType(roleType);

    roleAssignment.RoleDefinitionBindings.Add(roleDefinitionRead);
    //list.RoleAssignments.Remove(group);
    list.RoleAssignments.Add(roleAssignment);
  }
  catch (Exception e)
  {
     logger.LogError("Failed to add rights", e);
  }
}

public static void removeGroupFromList(SPWeb web, SPGroup group, SPList list)
{
  try
  {
    list.RoleAssignments.Remove(group);
  }
  catch (Exception e)
  {
     logger.LogError("Failed to add rights", e);
  }
}
} 
```

**问题**
当我使用包含此事件接收器的模板创建子站点时，事件接收器只是丢弃了我想要分配给特定列表的组（在上面的示例中“生产主管和”物流经理“。我可以” t 调试任何东西，因为它是在线 Sharepoint，并且在我的 Sandbox Solutions 测试环境中一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T05:53:08.807

我的建议是不要使用带有托管代码的沙盒解决方案，而是使用 SharePoint 应用程序模型项目作为 SharePoint 托管或提供程序托管来执行此操作......主要是因为您使用的方法已被弃用并且无法像这样进行调试你已经说过了。Provider Hosted 可能更容易跳转，因为您可以在 MVC 或 Web Forms 项目中使用托管代码 CSOM 来执行此操作。然后，您可以非常轻松地使用远程事件接收器并对其进行调试。在 codeplex 上的 Office AMS 示例中，有一个示例项目展示了如何使用远程事件接收器并利用 Visual Studio 2013 中的 Azure 服务总线方法对其进行实时调试[http://officeams.codeplex.com/](http://officeams.codeplex.com/). 此外，在该代码示例下载中，还有一个在 App 模型中管理安全性的示例，所以你应该很高兴。

# linux - 试图删除子目录中除最近的 2 个文件之外的所有文件

> ID：16190845
> 
> 赞同：3
> 
> 时间：2013-04-24T11:30:59.787
> 
> 标签：linux, bash, ubuntu-12.04

我正在创建一个 cron 来清理指定文件夹的子目录（仅限第一个子目录），但最近的两个文件除外，但遇到了问题。

这些是我的尝试：

```
find ./ -type d -exec rm -f $(ls -1t ./ | tail -n +4);
find . -maxdepth 2 -type f -printf '%T@ %p\0' | sort -r -z -n | awk 'BEGIN { RS="\0"; ORS="\0"; FS="" } NR > 5 { sub("^[0-9]*(.[0-9]*)? ", ""); print }' | xargs -0 rm -f 
```

我还尝试创建一个文件数组，目的是使总数减去 2，但该数组并未填充所有文件：

```
while read -rd ''; do      x+=("${REPLY#* }");  done < <(find . -maxdepth 2 -printf '%T@ %p\0' | sort -r -z -n ) 
```

有人可以帮我解释一下他们是怎么做的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T13:26:30.777

这列出了除了最近的两个文件之外的所有文件：

```
find -type f -printf '%T@ %P\n' | sort -n | cut -d' ' -f2- | head -n -2 
```

解释：

*   `-type f`仅列出文件
*   `-printf '%C@ %P\n'`
    *   `%T@`显示自 1970 年以来文件的最后修改时间（以秒为单位）。
    *   `%P` 显示文件名
*   `| sort -n`进行数字排序
*   `| cut -d' ' -f2-`删除秒表单输出，只留下文件名
*   `| head -n -2`显示除最后两行之外的所有内容

因此，要删除所有这些文件，只需通过`xargs rm`或附加管道`xargs rm -f`：

```
find -type f -printf '%T@ %P\n' | sort -n | cut -d' ' -f2- | head -n -2 | xargs rm 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-12T19:59:17.103

与现有答案不同，这个 NUL 分隔了 find 的输出，因此对于具有绝对任何合法字符的文件名是安全的——一组包含换行符：

```
delete_all_but_last() {
  local count=$1
  local dir=${2:-.}
  [[ $dir = -* ]] && dir=./$dir
  while IFS='' read -r -d '' entry; do
    if ((--count < 0)); then
      filename=${entry#*$'\t'}
      rm -- "$filename"
    fi
  done < <(find "$dir" \
             -mindepth 1 \
             -maxdepth 1 \
             -type f \
             -printf '%T@\t%P\0' \
           | sort -rnz)
}

# example uses:
delete_all_but_last 5
delete_all_but_last 10 /tmp 
```

请注意，它需要 GNU 查找和 GNU 排序。（现有的答案也需要 GNU find）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-02T12:26:35.667

我刚刚遇到了同样的问题，这就是我解决它的方法：

```
#!/bin/bash

# you need to give full path to directory in which you have subdirectories
dir=`find ~/zzz/ -mindepth 1 -maxdepth 1 -type d`

for x in $dir; do
        cd $x
        ls -t |tail -n +3 | xargs rm --
done 
```

解释：

*   使用 tail -n +number 决定子目录中保留多少文件

# css - CSS：使用 ID 选择第 n 个元素？

> ID：16190848
> 
> 赞同：1
> 
> 时间：2013-04-24T11:31:08.490
> 
> 标签：css, css-selectors

这是我的 HTML：

```
<dl id="id">
    <dt>test</dt>
    <dd>whatever</dd>
    <dt>test1</dt>
    <dd>whatever2</dd>
    ....
</dl> 
```

我想选择第三个 dd 但我不能让它工作。这是我尝试过的：

```
dl#id dd:nth-child(3) {  
     color: yellow;
} 
```

样式没有应用，怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T11:34:07.770

的第三个孩子`#id`实际上是`<dt>test1</dt>`，所以选择器不匹配任何东西。

在这里使用选择器会更合适[`:nth-of-type`](https://developer.mozilla.org/en-US/docs/CSS/:nth-of-type)：

```
dl#id dd:nth-of-type(3) 
```

也可以利用相当严格的 HTML 结构（成对`<dt>`/ `<dd>`）并简单地编写`dl#id :nth-child(6)`，但在这种情况下它是没有意义的（浏览器支持对于两个选择器来说都是一样的）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T11:47:35.810

你也可以用 jquery 来做：

```
$("dl#id dd") 
```

这将为您提供 dl 中的所有 dd。使用索引，您可以访问第 n 个元素对于第三个元素，这将是：

```
$("dl#id dd").eq(2) 
```

然后，您可以添加样式属性：

```
$("dl#id dd").eq(2).css("color", "yellow") 
```

我希望这回答了你的问题

# ios - 从 UIImageView 和 UITextView 创建 UIImage

> ID：16190856
> 
> 赞同：0
> 
> 时间：2013-04-24T11:31:37.093
> 
> 标签：ios, objective-c, uigraphicscontext

我正在使用先前答案中的以下代码通过组合 UIImageView 和 UITextView 创建新的 UIImage。

```
UIView *parentView = [[UIView alloc] initWithFrame:CGRectZero];
[parentView addSubview:self.imagePreview];
[self.imagePreview setFrame:CGRectMake(0, 0, 100, 100)];
[parentView addSubview:self.memeTextFieldTop];
[self.memeTextFieldTop setFrame:CGRectMake(20, 20, 80, 20)];
[parentView sizeToFit];

UIGraphicsBeginImageContext([parentView bounds].size);
[[parentView layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *outputImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

问题似乎是我目前遇到以下错误，我不确定如何解决它们。

```
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetAlpha: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextGetBaseCTM: invalid context 0x0
<Error>: CGContextConcatCTM: invalid context 0x0
<Error>: CGContextSetBaseCTM: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextSetAlpha: invalid context 0x0
<Error>: CGContextSaveGState: invalid context 0x0
<Error>: CGContextConcatCTM: invalid context 0x0 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:03:15.137

日志显示您没有有效的绘图上下文

根据文档

> UIGraphicsGetCurrentContext()
> 
> 当前图形上下文默认为 nil。在调用它的 drawRect: 方法之前，视图对象将一个有效的上下文压入堆栈，使其成为当前的。但是，如果您不使用 UIView 对象进行绘图，则必须使用 UIGraphicsPushContext 函数手动将有效上下文推送到堆栈上。

通过使用您创建的上下文调用 UIGraphicsPushContext()，您的其他方法可以使用 UIGraphicsGetCurrentContext() 访问该上下文。

如果您在**drawRect: 之外调用 UIGraphicsGetCurrentContext()**并且**没有使用 UIGraphicsPushContext() 显式设置上下文**，则当前的图形上下文是未定义的——当然使用起来也不安全

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:12:54.900

sizeToFit 不适用于 UIView。您必须重写此方法才能按预期工作。请参阅[iphone uiview - resize frame to fit subviews](https://stackoverflow.com/questions/3605393/iphone-uiview-resize-frame-to-fit-subviews)和[在让 UIView sizeToFit 做任何有意义的事情时遇到问题](https://stackoverflow.com/questions/3946665/having-trouble-getting-uiview-sizetofit-to-do-anything-meaningful)

# php - 返回结果时如何在 AJAX div 中重新加载 MySQL 记录？

> ID：16190858
> 
> 赞同：2
> 
> 时间：2013-04-24T11:31:40.843
> 
> 标签：php, javascript, mysql, ajax

我想知道如何`<div>`使用`AJAX`正在显示的内容是从`MySQL` `database`. 棘手的部分是我希望将`<div>`每个结果显示 30 秒，然后重新加载以显示下一个结果。

这是`media table`：

```
_______________________________________________
| FIELD 1 |  FIELD 2  |  FIELD 3  |  FIELD 4  |
-----------------------------------------------
|   ID    |   TVOne   |   TVTwo   |  Active   |
-----------------------------------------------
|   15    |   no      |     no    |    no     |
-----------------------------------------------
|   29    |   yes     |     no    |   yes     |
-----------------------------------------------
|   53    |    no     |     no    |    no     |
-----------------------------------------------
|   71    |   yes     |    yes    |    yes    |
----------------------------------------------- 
```

在`<div>`位于 TVOne 的页面中，我希望它加载记录 29 和 71。在`<div>`位于 TVTwo 的页面中，我希望它只加载记录 71。这`table`是由用户在后端修改的，所以结果总是与众不同。

我正在阅读[这个问题](https://stackoverflow.com/questions/11070607/reload-mysql-data-inside-a-div-using-ajax)，我相信`javascript`选择器`.eq()`可能是拼图的一部分，但我不确定如何将它们放在一起。

所在的页面`<div>`称为`index4.php`。前一页 ( `index3.php`) 执行查询以查看是否有任何记录设置为活动，如果是，则设置`num_rows`为`$count`并转到`index4.php?count=$count`，如果不是，则返回显示序列的开头`index.php`。

这是`index3.php`重定向功能：

```
<?php
$result = $mysqli->query("SELECT * FROM media WHERE Active = 1 AND TVTwo = 1");
$count = $result->num_rows;
if($count > 0){$media = "index4.php?count=$count";}
else{$media = "index.php";}
?>

<script>
refresh=window.setTimeout(function(){location.href="<?php echo $media;?>"},15000);
</script> 
```

这是我`AJAX`加载的代码`<div>`：

```
<script>
function MediaQuery(qty)
    {
    if (qty=="")
        {
        document.getElementById("Media").innerHTML="";
        return;
        }
    if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
        }
    else
        {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("Media").innerHTML=xmlhttp.responseText;
            }
        }
    xmlhttp.open("GET","../process/QueryMedia.php?count="+qty,true);
    xmlhttp.send();
    }
</script> 
```

这是QueryMedia.php：

```
<?php
$count = $_GET["count"];

$sql = ("SELECT * FROM media WHERE Active = 1 AND TVTwo = 1 LIMIT $count");

if(!$result_sql = $mysqli->query($sql))
    {
    echo QueryCheck("getting the media records ","from the media",$mysqli);
    }

// fetch it here
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:53:12.837

好吧，我想通了。

1.  `index3.php`检查数据库以查看是否已将任何内容设置为“活动”（在这种情况下，它还检查以查看它被设置为显示在哪个显示器上）。
2.  当它找到一条记录时，它通过to发送变量`$i`（用作键并设置为最高结果）。`$_GET``index4.php`
3.  当`index4.php`页面加载时，它会触发`function MediaQuery(i)`，然后`QueryMedia.php`根据给定的键请求数据库记录。
4.  `QueryMedia.php`加载结果后，密钥`i`减 1，然后在`function MediaQuery(i)`短暂延迟后再次发送。
5.  一旦`i`键到达最后一个结果，这总是`0`，页面将重定向到显示序列的开头`index.php`。

这里是`index3.php`：

```
<?php
$sql = $mysqli->query("SELECT * FROM media WHERE Media_Active = 1 AND Media_TVTwo = 1");
$count = $sql->num_rows;

if($count != 0)// If there are results returned then redirect to the media page.
    {
    $i = $count - 1;

    $media = "index4.php?i=$i";
    }
else // Else redirect to the first page.
    {
    $media = "index.php";
    }
?>

<script>
window.setTimeout(function(){location.href="<?php echo $media;?>"},20000);
</script> 
```

这里是`index4.php`：

```
<script>
function MediaQuery(i)
    {
    if (i < 0)
        {
        window.setTimeout(function(){location.href="index.php"},0);
        return;
        }
    if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
        }
    else
        {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
    xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            document.getElementById("Media").innerHTML=xmlhttp.responseText;
            var i = document.getElementById("i").innerHTML;
            var i = i-1;
            setTimeout(function() {MediaQuery(i)},20000);
            }
        }
    xmlhttp.open("GET","../process/QueryMedia.php?i="+i,true);
    xmlhttp.send();
    }
</script>

<body onload="MediaQuery(<?php echo $_GET['i'];?>)"> 
```

这里是`QueryMedia.php`：

```
<?php
$i = $_GET["i"];

    $sql = ("SELECT * FROM media WHERE Media_Active = 1 AND Media_TVTwo = 1 ORDER BY Media_Name");

    if(!$result_sql = $mysqli->query($sql))
        {
        echo QueryCheck("getting the media records ","from the media",$mysqli);
        }

    $id = array();
    while($idquery = $result_sql->fetch_assoc())
        {
        $id[] = $idquery['Media_ID'];
        }

    $sql2 = ("SELECT * FROM media WHERE Media_ID = $id[$i]");

    if(!$result_sql2 = $mysqli->query($sql2))
        {
        echo QueryCheck("getting the media records ","from the media",$mysqli);
        }

    while($media = $result_sql2->fetch_assoc())
        {
        $img = $media['Media_Name'];
        $width = $media['Media_Width'];
        $height = $media['Media_Height'];
        $msg = $media['Media_Msg'];
        }
?>

<img src="../images/media/<?php echo $img; ?>" border="2" width="<?php echo $width; ?>px" height="<?php echo $height; ?>px">

<p align="center" class="f24" style="margin:5px"><?php echo $msg; ?></p>
<p id="i" style="display:none;"><?php echo $i; ?></p><!-- used to return the key value --> 
```

我毫不怀疑这可能不是最有效的做事方式，有很多服务器请求正在进行，我确信代码有点臃肿。如果有人想帮助我让它变得更好，我一定会很感激你的意见。

# javascript - 查找是否有任何 QTips 可见？

> ID：16190865
> 
> 赞同：0
> 
> 时间：2013-04-24T11:31:53.657
> 
> 标签：javascript, jquery, qtip2

我有一个每 5 秒运行一次代码的窗口间隔。但是，此代码可能会删除并重新创建可能向用户显示 QTip 的某些元素。

有没有办法使用 JQuery 查找是否存在可见的 QTip？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:45:08.717

您可以使用以下方法对其进行测试：

```
if($('.qtip:visible').length > 0) 
```

# android - 在 Android 上使用 OpenGL 时自动清除缓冲区

> ID：16190869
> 
> 赞同：6
> 
> 时间：2013-04-24T11:31:59.417
> 
> 标签：android, opengl-es, egl

我正在编写一个特定的 OpenGL 应用程序，我特别想在其中逐步绘制帧。为此，我想禁用我理解的缓冲区的自动清除，这是`GLSurfaceView.Renderer#onDrawFrame()`. 有人可以帮助我如何做到这一点吗？我需要用 Java 编写应用程序，而不是使用本机 SDK。

我知道我可以通过以下方式做到这一点：-

1.  在执行时设置属性`EGL_SWAP_BEHAVIOR_PRESERVED_BIT`位，并且`EGL_SURFACE_TYPE`[`eglChooseConfig`](https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglChooseConfig.xhtml)
2.  通过调用EGLSurface 对象来设置`EGL_SWAP_BEHAVIOR`属性`EGL_BUFFER_PRESERVED`[`eglSurfaceAttrib`](https://www.khronos.org/registry/EGL/sdk/docs/man/html/eglSurfaceAttrib.xhtml)

但是，我从 Khronos 文档中收集到：-

*   `EGL_SWAP_BEHAVIOR_PRESERVED_BIT`仅当 EGL 版本为 1.4 或更高版本时才受支持。
*   `EGL_SWAP_BEHAVIOR`仅当 EGL 版本为 1.2 或更高版本时才受支持。

现在，我知道我可以在我的 Android 应用程序中以两种方式访问​​ EGL：-

1.  [`EGL10`](https://developer.android.com/reference/javax/microedition/khronos/egl/EGL10.html)使用包中 的 Khronos API 类`javax.microedition.khronos.egl`（`EGL11`似乎还没有实现）
2.  [`EGL14`](https://developer.android.com/reference/android/opengl/EGL14.html)在中使用 Android API 类`android.opengl package`（类似于使用类`android.opengl.GLES20`）

(1) 的问题是版本小于 1.4，所以它不支持我需要的功能。(2) 的问题是，**当我在 EGL14 中调用任何方法时，我的应用程序就会崩溃，而且我不确定我应该如何使用它（我找不到一个关于 EGL14 的示例程序/教程应该在应用程序中使用）**。特别是，我想学习如何从 EGL14 获取有效的 GL 上下文：在 EGL10 的情况下，我可以通过调用`javax.microedition.khronos.egl.EGLContext.getGL()`. 但是，我在 class 中没有看到等效的方法`android.opengl.EGLContext`。事实上，`android.opengl`除了 EGL14 之外，所有与 EGL 相关的类似乎大部分都是空的。

我最好的选择是遵循与 GLES20 相同的推理方式：仅在方法内部调用`GLSurfaceView.Renderer`方法：`onDrawFrame()`, `onSurfaceCreated()`, `onSurfaceChanged()`，因为它们提供有效的 GL (GL10) 和 EGL (EGLConfig) 上下文作为参数。所以我在里面放了以下代码`onDrawFrame()`：-

```
public void onDrawFrame(GL10 gl) {
    ...
    android.opengl.EGLDisplay d = null;
    if ( (d = EGL14.eglGetDisplay(EGL14.EGL_DEFAULT_DISPLAY)) == EGL14.EGL_NO_DISPLAY) {
        Log.i("Triangle", "EGL14.eglGetDisplay() failed!");
    } else {
        Log.i("Triangle", "EGL14.eglGetDisplay() succeeded!");
    }
    ...
} 
```

我相信我不必在调用上述方法之前实例化 EGL14，因为所有方法都是静态的。但是，调用`EGL14.eglGetDisplay()`会使应用程序崩溃。

任何帮助将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T22:13:36.727

实现的 EGL 版本可能高于您使用的接口。实际版本由 EGL10.eglInitialize() 返回。如果是 [1,4] 或更高，则可以在调用 EGL10.eglChooseConfig() 时传递 [EGL10.EGL_SURFACE_TYPE, EGL14.EGL_SWAP_BEHAVIOR_PRESERVED_BIT]。可以在这里使用 EGL14 的 EGL_SWAP_BEHAVIOR_PRESERVED_BIT 定义——它只是 EGL 规范定义的一个 int。

EGL14.eglGetDisplay() 如何使应用程序崩溃。它是否抛出了未被捕获的异常？[可能值得在https://code.google.com/p/android/issues/list](https://code.google.com/p/android/issues/list)提交一个错误（关于你在做什么以及在什么设备上的详细信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-17T13:39:55.587

以 Jesse Hall 的解决方案为基础：

```
import javax.microedition.khronos.egl.EGL10;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.egl.EGLDisplay;
import android.opengl.EGL14; 
```

你可以在你的子类中有一个`GLSurfaceView`实现 EGLConfigChooser 的内部类：

```
private static class MyEGLConfigChooser implements GLSurfaceView.EGLConfigChooser {
    public EGLConfig chooseConfig (EGL10 egl, EGLDisplay display) {
        EGLConfig [] configs = new EGLConfig[1];
        int [] num_config = new int[1];
        int [] attrib_list  = new int[] {
            EGL10.EGL_RED_SIZE, 8,
            EGL10.EGL_GREEN_SIZE, 8,
            // ... + anything else you want ...
            EGL10.EGL_SURFACE_TYPE, EGL10.EGL_WINDOW_BIT | EGL14.EGL_SWAP_BEHAVIOR_PRESERVED_BIT,
            EGL10.EGL_NONE,
        };

        if (egl.eglChooseConfig(display, attrib_list, configs, configs.length, num_config) && num_config[0] > 0) {
            // We just pick the first here, but you could interrogate all
            return configs[0];
        }

        return null;
    }
} 
```

在`GLSurfaceView`子类的构造函数中，添加：

```
setEGLConfigChooser(new MyEGLConfigChooser()); 
```

然后，在您的实现中`GLSurfaceView.Renderer`，每当表面发生变化时，您都可以在其上设置属性：

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
    EGL14.eglSurfaceAttrib(EGL14.eglGetCurrentDisplay(),
                           EGL14.getCurrentSurface(EGL14.EGL_DRAW),
                           EGL14.EGL_SWAP_BEHAVIOR,
                           EGL14.EGL_BUFFER_PRESERVED);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:22:46.043

您可以扩展 GLSurfaceView 并调用 `setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);`init，而不是直接使用 EGL。

> 此设置可防止 GLSurfaceView 框架在您调用 requestRender() 之前被重绘，这对于此示例应用程序更有效。

请参阅 android 文档[1](http://developer.android.com/training/graphics/opengl/environment.html#renderer)，了解如何使用 Java 设置 GLES。

[构建 OpenGL ES 环境](http://developer.android.com/training/graphics/opengl/environment.html#renderer)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T10:52:43.907

您可以简单地[渲染到纹理](https://www.khronos.org/opengles/sdk/docs/man/xhtml/glFramebufferTexture2D.xml)，然后将该纹理绘制到屏幕上。

# javascript - 当用户通过 webkit 取消按钮取消输入时会触发什么事件？

> ID：16190870
> 
> 赞同：18
> 
> 时间：2013-04-24T11:32:00.383
> 
> 标签：javascript, jquery, html

一些浏览器（如 Chrome）在输入上提供了一个额外的搜索取消按钮`type="search"`，如下图所示。

通常`keyup`，额外的检查足以测试用户是否删除了输入字符串（不考虑右键单击）。但是，如果用户通过 webkit 浏览器提供的特殊取消按钮取消输入，`keyup`也不会触发。`change`

这些取消按钮是否有某种特殊事件？还是我必须检查已经存在的事件之一，例如`click`？

![铬的屏幕截图](https://i.stack.imgur.com/AjqtR.gif)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-24T11:50:04.727

有一个事件：[`oninput`](http://help.dottoro.com/ljhxklln.php)。

> 在通过用户界面更改元素的文本内容时发生。
> 
> 如果您想检测 textarea、input:text、input:password 或 input:search 元素的内容何时发生更改，oninput 很有用，因为这些元素上的 onchange 事件会在元素失去焦点时触发，而不是在修改后立即触发.

这是一个工作示例；

```
$('#search').on('input', function(e) {
  if('' == this.value) {
    alert('Please enter a search criteria!');
  }
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<input type="search" name="search" id="search" placeholder="Search..." />
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T12:34:59.527

为此有一个事件：[onsearch](http://help.dottoro.com/ljdvxmhr.php)。

调用 onsearch 事件的操作：

> 按 ENTER 键或单击搜索控件中的“删除搜索文本”按钮。

这是一个例子：

**HTML：**

```
<input type="search" name="search" id="search" placeholder="Search..." /> 
```

**jQuery：**

```
$('#search').on('search', function(e) {
    if('' == this.value) {
        alert("You either clicked the X or you searched for nothing.");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:39:40.703

听点击事件似乎在我的小提琴中工作：

[http://jsfiddle.net/S5n84/1/](http://jsfiddle.net/S5n84/1/)

HTML

```
<input type="search" value="hello" />
<span id="status"></span> <!-- Just an example --> 
```

Javascript

```
$("input").on("click keyup", function () {
    if ($(this).val() == "") {
        $("#status").text("WTF it's empty..");   
    } else {
        $("#status").text($(this).val());   
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T12:02:59.193

这是 oninput 的替代方法，它将在集中时监视该字段

[演示](http://jsfiddle.net/mplungjan/dXHJ2/)

```
function tell(fld,id) {
    $("#"+id).html((fld.val()==""?"Clear":"Not clear")+" - "+new Date())
}
$(function() {
    $("#search").on("focus",function() {
        var srch = $(this);
        var tId = setInterval(function() { tell(srch,"status") },100);
        $(this).data("tId",tId);
    })
    .on("blur",function() {
        clearInterval($(this).data("tId"));
     });
    tell($("#search"),"status");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T11:49:20.497

起初，当 OP 的想法并不明显时`<input type="search">`（我没有读懂他的想法是多么愚蠢），我认为这可能是答案。

我猜“x”不是输入字段的标准部分（HTML5 与否）。

这可能是从外部添加的一些站点元素，这就是您可能对此答案感兴趣的原因：[https ://stackoverflow.com/a/6258628/2107024](https://stackoverflow.com/a/6258628/2107024)

**编辑：**

经过研究，我发现单击`x`Chrome 会触发该`click`事件。还有这个类似线程中的答案：[如何检测“搜索”HTML5 输入的清除？](https://stackoverflow.com/questions/2977023/how-do-you-detect-the-clearing-of-a-search-html5-input)建议该`search`事件也被触发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T11:33:25.210

捕获 'change' 事件，而不是 'keyup' 事件。当文本字段的值更改时，会触发此事件，您可以检查该值是否为空白。

```
$('input[type="search"]').on('change', function() {
    if ($(this).val() == "") {
        alert('clear');
    }
}); 
```

[http://jsfiddle.net/Ebg4M/](http://jsfiddle.net/Ebg4M/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-18T19:11:19.103

您可以使用 bind 来捕获多个事件，正如[Eric Warnke](http://www.twitter.com/EricWarnke)在[jQuery .keyup() vs .change() vs .bind()中演示的那样](http://solicitingfame.com/2011/11/09/jquery-keyup-vs-bind/)

这是一个基于[Emre Erkan](https://stackoverflow.com/users/84042/emre-erkan)[的分叉小提琴](http://jsfiddle.net/rv2two92/)：

```
$('#search').bind("change keyup input", function(e) {
    if('' == this.value) {
        alert('Please enter a search criteria!');
    }
}); 
```

# sql - SQL 将值从一个表复制到另一个表，但将重复项移动到另一个表

> ID：16190871
> 
> 赞同：0
> 
> 时间：2013-04-24T11:32:03.943
> 
> 标签：sql, sql-server-2008, duplicates

我想知道是否有人可以帮助我？

在我的数据库中，我有两个表，它们具有相同的列并包含相同类型的数据。我的第一个表是我们过去 6 年一直在维护的表，其中有几百万条记录。我的第二张表是我们从其他地方获得的一张，其中包含超过 1 亿条记录。表二中的一些数据很可能已经包含在表一中。

我想要实现的是将表二中的唯一记录添加到表一中。

我的 PK 对于两个表都是相同的，并且正是这一列可以识别它是否是重复的。

问题出现了，我需要在流程结束时显示重复记录，以便可以查看这些记录。

我对 SQL 有很好的基础知识，但还不够先进，无法做到这一点。如果有人能够提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:37:56.410

```
insert into one(...) 
select ...
from two t
where not exists (
  select *
  from one x
  where x.id = t.id
  )
  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T12:31:45.337

由于您使用的是 Sql 2008，请考虑使用 Merge 语句，这将插入唯一键

```
MERGE ONE AS Tar
USING (SELECT Id FROM TWO) AS Sor
ON Tar.Id=Sor.Id
WHEN NOT MATCHED THEN
INSERT(Id)
values(Sor.Id); 
```

这将向您显示重复的键

```
SELECT B.ID
FROM ONE A
LEFT JOIN TWO B
ON A.ID=B.ID
WHERE B.ID IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:35:41.297

请试试：

```
INSERT INTO Table1
SELECT DISTINCT * FROM Table1 
WHERE PrimaryKeyColumn NOT IN (SELECT PrimaryKeyColumn from Table1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:36:09.187

像这样的东西：

```
-- store the duplicates
SELECT t2.id
INTO #tempTable
FROM table2 t2
JOIN table1 t1 ON t1.id = t2.id

-- insert the non-duplicates
SELECT t2.*
INTO table1
FROM table2 t2
LEFT JOIN #tempTable t1 ON t1.id = t2.id
-- Alternative to above - LEFT JOIN table1 t1 ON t1.id = t2.id
WHERE t1.id IS NULL

-- display the duplicates
SELECT t1.*, t2.*
FROM #tempTable
JOIN table1 t1 ON tempTable.id = t1.id
JOIN table2 t2 ON tempTable.id = t2.id 
```

# c# - C#中泛型接口之间的子类型化

> ID：16190879
> 
> 赞同：1
> 
> 时间：2013-04-24T11:32:20.667
> 
> 标签：c#, generics, subtyping

我有一个“最小状态”类型，其中包含一些数据并且可以生成另一个最小状态实例：

```
public interface IMinimalState
{
   IMinimalState generate();
   int getData();
} 
```

我还有一个“正常状态”，它包含更多数据并且可以生成一个正常状态的实例：

```
public interface IState
{
   IState generate();
   int getData();
   int getAnotherData();
} 
```

据我所知，IState 应该是 IMinimalState 的子类型。（任何需要 IMinimalState 的东西在获得 IState 时都应该同样高兴）但是，我无法让编译器接受这一点。

例子：

```
 public interface IMinimalState
   {
      IMinimalState generate();
      int getData();
   }

   public interface IState : IMinimalState
   {
      int getAnotherData();
   }

   public class MinimalState : IMinimalState
   {
      public IMinimalState generate() { return this; }
      public int getData() { return 0; }
   }

   public class State : IState
   {
      public IState generate() { return this; }  //Compiler Error, return type should be IMinimalState
      public int getData() { return 1; }
      public int getAnotherData() { return 2; }
   } 
```

很公平，让我们尝试通用接口：

```
 public interface IMinimalState<out T> where T : IMinimalState<T>
   {
      T generate();
      int getData();
   }

   public interface IState<out T> : IMinimalState<T> where T : IState<T>
   {
      int getAnotherData();
   }

   public class MinimalState : IMinimalState<MinimalState>
   {
      public MinimalState generate() { return this; }
      public int getData() { return 0; }
   }

   public class State : IState<State>
   {
      public State generate() { return this; }
      public int getData() { return 1; }
      public int getAnotherData() { return 2; }
   } 
```

还没有编译器错误。但`State`仍然不是 的子类型`MinimalState`，`IState<State>`也不是 的子类型`IMinimalState<MinimalState>`。我尝试了许多其他组合，但没有成功。

有没有办法制作`IState`的子类型`IMinimalState`？如果不，

*   是因为.Net类型系统不够强大吗？

*   或者，我认为这`IState`真的是 的子类型是错误的`IMinimalState`吗？（如果需要的东西`IMinimalState`接收到，程序是否会崩溃`IState`？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:41:01.457

您可以使用 new 关键字来更改 的返回类型`generate`，然后`generate`在`State`类中实现两种变体

```
 public interface IMinimalState
   {
      IMinimalState generate();
      int getData();
   }

   public interface IState : IMinimalState
   {
      new IState generate();      
      int getAnotherData();
   }

   public class State : IState
   {
      public IState generate() { return this; } 
      IMinimalState IMinimalState.generate() { return  generate(); }           
      ...
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:17:41.723

如果你改变返回类型——你正在改变`the contract`——你不能用`IMinimalState`.

我只是简化一下，例如

```
public interface IMinimalState
{
    IMinimalState generate();
    int getData();
}

public interface IState : IMinimalState
{
    // IState generate();
    int getAnotherData();
}

public class MinimalState : IMinimalState
{
    public IMinimalState generate() { return this; }
    public int getData() { return 0; }
}

public class State : IState
{
    IMinimalState IMinimalState.generate() { return this.generate(); }
    // IState IState.generate() { return this; }
    public IState generate() { return this; }
    public int getData() { return 1; }
    public int getAnotherData() { return 2; }
} 
```

**注意：您的“用例”在这里是必不可少的**（并且缺失） - 并推动您的设计。您应该始终在做出设计决策之前提供它，这可能是第一件事。

通常，如果您要存储和迭代基本接口`IMinimalState`- 这就是您所需要的。

如果你正在访问`knowing`它的对象，`State`你可以使用它的公共方法来获取强类型。

如果您仍然想要 - 您可以同时拥有（只需取消注释这两行）。

最后一个选项 - 通常用于更复杂的情况 -**是使用 a`Visitor`来区分 IMinimalState 和 IState** - 当您只有一个基本接口列表时。例如，在您需要`redefine`参数类型、子表达式等的表达式中使用它。如果您有兴趣，我可以稍后发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:47:20.343

您需要返回 IMinimalState，因为这是界面所说的。

```
public class State : IState
{
  public IMinimalState generate() { return this; }  // Fixed
  public int getData() { return 1; }
  public int getAnotherData() { return 2; }
} 
```

如果您以后需要在 IMinimalState 的引用上访问 IState 成员，则需要强制转换它

```
var state = minimalState as IState;
if (state != null)
{
    // Work on IState
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:48:01.823

您可以使用泛型：

```
public interface IMinimalState<T>
{
    T generate();
    int getData();
}

public interface IState : IMinimalState<IState>
{
    IState generate();
    int getAnotherData();
} 
```

# java - java项目中无法加载类“org.slf4j.impl.StaticLoggerBinder”错误？

> ID：16190880
> 
> 赞同：9
> 
> 时间：2013-04-24T11:32:21.283
> 
> 标签：java, log4j

我收到错误。我`Failed to load class "org.slf4j.impl.StaticLoggerBinder"`想将记录器写入文件。所以我使用了 log4j.jar 并且正在使用 apache tomcat 服务器。

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-26T18:05:41.060

首先。关于依赖关系。

为了添加 SLF4J，您必须在 pom.xml 中放置**一个**且仅**一个**这些依赖项。这取决于您选择使用什么实现。您在 pom.xml 中添加的每个依赖项都会自动添加到类路径中。如果以下依赖项之一由另一个依赖项提供，则可以省略它。不要忘记，即使依赖项是由另一个依赖项提供的，您也必须只包含一个。请注意，我已经从依赖项中省略了版本。使用最新可用的。

```
<dependency>
   <groupId>ch.qos.logback</groupId>
   <artifactId>logback-classic</artifactId>
   <version></version>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-simple</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-log4j12</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

```
<dependency>
   <groupId>org.slf4j</groupId>
   <artifactId>slf4j-jdk14</artifactId>
   <version></version>
   <scope>compile</scope>
</dependency> 
```

现在关于构建 maven 项目时遇到的烦人错误。如果仅具有上述依赖项之一后，您仍然会得到 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。那么您将面临来自 m2e 的错误。

Eclipse Juno 和 Indigo 在使用捆绑的 maven 版本 (m2e) 时不会抑制消息 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder"。此行为从 m2e 版本 1.1.0.20120530-0009 及更高版本开始存在。

虽然，这被指示为错误，您的日志将正常保存。在修复此错误之前，突出显示的错误仍将存在。[在m2e 支持站点](https://bugs.eclipse.org/bugs/show_bug.cgi?id=387064)中了解更多信息。

当前可用的解决方案是使用外部 maven 版本而不是 Eclipse 的捆绑版本。您可以在下面的问题中找到有关此解决方案的更多详细信息以及有关此错误的更多详细信息，我认为该问题描述了您面临的相同问题。

[SLF4J：无法加载类“org.slf4j.impl.StaticLoggerBinder”。错误](https://stackoverflow.com/questions/11916706/slf4j-failed-to-load-class-org-slf4j-impl-staticloggerbinder-error)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-09T12:24:05.313

手册中没有关于如何一起使用 log4j 和 sl4j 的明确示例。但是有很多非官方的，我喜欢这个： [http ://www.javavillage.in/slf4j-with-log4j.php](http://www.javavillage.in/slf4j-with-log4j.php)

**请注意**只有两个 Maven 部门。没有明确的 log4j dep，它是自动加载的。

**此外**（这花了我 1 小时 14 分钟）一些版本的 sl4j 不稳定，这很重要。1.8-beta 版（是的.. beta）不起作用。所以我使用了 1.7.13 并且它有效。

所以，检查 maven deps，它应该是这样的：

```
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-api</artifactId>
  <version>1.7.13</version>
</dependency>
<dependency>
  <groupId>org.slf4j</groupId>
  <artifactId>slf4j-log4j12</artifactId>
  <version>1.7.13</version>
</dependency> 
```

默认配置位置是资源文件夹。例如对于主要来源：

```
project/src/main/resources 
```

或用于测试：

```
project/src 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T11:35:26.493

您需要将 slf4j jar 或依赖项添加到您的项目中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:39:54.347

请为您的项目导入 slf4j-api-1.6.6.jar。1.在您的java类中编写以下代码

```
private Logger logger = LoggerFactory.getLogger(this.getClass()); 
```

2.导入以下：

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory; 
```

3.现在你可以使用logger.info()；打印任何东西。

# google-maps - Point in KML Polygon - C / C++ code

> ID：16190882
> 
> 赞同：0
> 
> 时间：2013-04-24T11:32:26.673
> 
> 标签：google-maps, google-maps-api-3, kml, point-in-polygon

I am looking for C or C++ code to identify whether the point (a co-ordinate) lies inside a KML polygon or not.

I have searched but all I got is javascript (google maps apis) which can achieve the same. I cannot even port it directly because I have a slight modified requirement:

1.  Identify whether given co-ordinate lies within polygon of KML (the code should exclude holes in the polygon too!).
2.  Informing the caller the distance to the nearest polygon edge if the point is outside the range.

As far as I have researched, the 2nd point has not been achieved anywhere yet. I would want to know how to achieve this in C or C++? Or, have I missed searching any existing sources?

Would like to have inputs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T09:39:11.973

扩展了开源 libkml C++ 库并在其中实现了多边形中的点。这是源代码：

[https://github.com/gumdal/libkml-pointinpolygon](https://github.com/gumdal/libkml-pointinpolygon)

我还没有达到上述问题的第二点。不过，在这件事上的任何线索都将不胜感激:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-25T14:49:32.587

我正在寻找 C/C++ 中的 KML 库并看到了您的帖子。看起来它已经 6 岁以上了，但如果其他人来这里寻找你问题的第二部分......

我不记得我在网上是在哪里挖到这个的，所以我不能给予/信任。

```
// *************************************************************************
//
//  Function:   distToLine
//
//  Usage:      Calculate the shortest distance to a line
//
//  Params:     x1      - Line start x
//              y1      - Line start y
//              x2      - Line end x
//              y2      - Line end y
//              ptX     - Observation Point x
//              ptY     - Observation Point y
//
//  Returns:    Distance
//
//  Notes:
//
// *************************************************************************

double distToLine(double x1, double y1, double x2, double y2, double ptX, double ptY)
{
    double  dx;
    float   dy;
    float   t;

    dx = x2 - x1;
    dy = y2 - y1;

    if ((dx == 0) && (dy == 0))
    {
        dx = ptX - x1;
        dy = ptY - y1;
        return sqrt(dx * dx + dy * dy);
    }

    t = ((ptX - x1) * dx + (ptY - y1) * dy) / (dx * dx + dy * dy);

    if (t < 0)          // point is nearest to the first point i.e x1,y1
    {        
        dx = ptX - x1;
        dy = ptY - y1;
    }
    else if (t > 1)     // point is nearest to the end point i.e x2,y2
    {        
        dx = ptX - x2;
        dy = ptY - y2;
    }
    else                // if perpendicular line intersect the line segment.
    {        
        dx = ptX - (x1 + t * dx);
        dy = ptY - (y1 + t * dy);
    }

    return sqrt(dx * dx + dy * dy);     // returning shortest distance
}
// distToLine() 
```

# json - 为 Json4s 编写自定义序列化程序

> ID：16190886
> 
> 赞同：1
> 
> 时间：2013-04-24T11:32:46.973
> 
> 标签：json, scala

由于 Json4s 仅在键是字符串时才带有 Map 序列化，因此我正在尝试为特定 Map 编写自定义序列化程序，并将 Java 枚举作为键。

```
class HistoricalRecordCustomSerializer extends CustomSerializer[Map[QuotedData,Double]](
  format => (
    {
      case JArray(items) =>
        items.map{
                   case JObject(JField(name,JDouble(value))::Nil) => (QuotedData.valueOf(name),value)

                 }.toMap

    },
    {
      case x: Map[QuotedData,Double] =>
        JArray(
          x.map(entry =>
                  JObject(
                    List(
                      JField(entry._1.toString,JDouble(entry._2))
                    )
                  )
        ).toList
        )
} ) ) 
```

首先，这个实现在序列化的情况下显然不起作用，因为`x: Map[QuotedData,Double]`被擦除了。此外，我无法设法让 json4s 使用它。编写此自定义序列化程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T00:30:55.667

Json4s 在这个阶段只知道字符串键，所以你试图实现的目标不适用于地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-19T13:42:12.960

您可以使用自定义密钥序列化程序

例如

```
 class UUIDKeyJSonSerializer extends CustomKeySerializer[UUID](format => ( {
  case s: String => {
    UUID.fromString(s)
  }
}, {
  case x: UUID => {
    x.toString
  }
}
  )) 
```

您需要将对象映射到字符串，反之亦然

# php - 在PHP中输出外来字符？

> ID：16190888
> 
> 赞同：0
> 
> 时间：2013-04-24T11:32:49.013
> 
> 标签：php

我在一个 MYSQL 数据库中有许多外来字符：

```
ü 
```

他们出现在网站上，例如：

```
Ã¤ 
```

当我从客户端导入电子表格以制作表格时，我无法在数据库条目中转换它们。

php中有没有办法让它们正确输出？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:33:47.147

这要么是因为您的文档编码错误，要么是您的数据库链接未启用 UTF。

你用的是什么编辑器？

还要确保通过添加此元标记在页面头部设置正确的字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:36:39.797

使用`utf8_encode`功能它会帮助你。

# android - setvisibility（view.visible）在setvisibility（view.gone）之后不起作用

> ID：16190892
> 
> 赞同：11
> 
> 时间：2013-04-24T11:33:05.573
> 
> 标签：android, listview, view, visibility, onitemclicklistener

我看到了一些关于这个的帖子，我理解了这个问题。但是怎么能绕过去呢？我有`ListView`一个可以扩展的项目，但是一旦视图消失，它就不能再次可见，除非它有可用空间。怎么弄那个空间？

```
private void mySetOnItemListener() {
    l.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View view,
            int position, long arg3) {
        Log.d("onItemClick","called");
        LinearLayout ll = (LinearLayout)view.findViewById(R.id.llOpenedField);
        ll.setVisibility(View.VISIBLE);
    }
    });
} 
```

我的视图布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:descendantFocusability="blocksDescendants">

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:orientation="horizontal"
        android:weightSum="5" >

        <TextView
            android:id="@+id/tv_name"
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="4"
            android:padding="7dp"
            android:text="item"
            android:textColor="@android:color/background_dark"
            android:textSize="25dp" />
    </LinearLayout>

      <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/llOpenedField"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:orientation="horizontal"

         >

        <ImageButton
            android:id="@+id/ibInformation"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:src="@drawable/info" />

    </LinearLayout>

</LinearLayout> 
```

这`LinearLayout` `android:id="@+id/llOpenedField"`就是我一开始就想做`gone`的。

我把`gone`属性放在`getView()`里面`BaseAdapter` 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:22:20.313

如果您将使元素可见的代码放入其 onClickListener 中，它将无法访问（如果它不占用任何屏幕空间，您将无法单击它）。您应该在其下方放置一个高度最小的布局，当您的视图 l 消失时，新的布局外壳变得可见，并且它应该获得可见的 onClickListener。这样，在您的 View 消失后，这个新布局将能够将其恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T03:37:43.710

请检查这个答案。这个答案对我有用。

```
TranslateAnimation translateAnimation = new TranslateAnimation(0, 50, 0, 0);
          int animationTime = 200;
          translateAnimation.setDuration(animationTime);
          translateAnimation.setFillEnabled(true);
          translateAnimation.setFillAfter(true);
          yourView.startAnimation(translateAnimation);
          yourView.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T11:44:07.697

试试这个并根据您的需要进行修改，这不是我单击的列表项

进行线性布局`android:visibility="gone"`；首先做这个。

```
@Override
    public void onClick(View v)
    {
        LinearLayout ll = (LinearLayout)findViewById(R.id.vis);

        if(v == ex)
        {
            if(ll.getVisibility() == View.VISIBLE)
                ll.setVisibility(View.GONE);
            else
                ll.setVisibility(View.VISIBLE);
        } 
```

更新 :- 这些是给你的线..这将使适当的展开和折叠，并且没有可用空间

```
if(ll.getVisibility() == View.VISIBLE)
                    ll.setVisibility(View.GONE);
                else
                    ll.setVisibility(View.VISIBLE); 
```

# ios - “视频当前不可用”- Youtube Javascript/iFrame API for iOS App (UIWebview Embed)

> ID：16190894
> 
> 赞同：2
> 
> 时间：2013-04-24T11:33:09.897
> 
> 标签：ios, uiwebview, youtube, youtube-api, youtube-javascript-api

我尝试将 Youtube 播放器内联到 UIWebview。我将 Javascript/iFrame API 与 Player API 一起使用。

一般来说，播放器工作正常。但在某些情况下，视频无法播放，我收到一条消息“视频当前不可用”。

我尝试使用以下代码以编程方式清除 uiwebview 的缓存：

```
 [[NSURLCache sharedURLCache] removeAllCachedResponses]; 
```

如果这是问题，我还清除了 Safari 的缓存，但没有运气。

视频示例如下：[http ://www.youtube.com/embed/z-6cCmxaGoQ?enablejsapi=1&rel=0&playsinline=1&showinfo=1&controls=0&vq=hd720](http://www.youtube.com/embed/z-6cCmxaGoQ?enablejsapi=1&rel=0&playsinline=1&showinfo=1&controls=0&vq=hd720)

对于这种随机和奇怪的行为有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-23T22:08:23.227

我使用了这里的代码[https://github.com/youtube/youtube-ios-player-helper/](http://github.com/youtube/youtube-ios-player-helper/)。但是，您需要添加一个参数来解决问题。请在下面找到示例。

```
let vars = ["origin": "http://www.youtube.com"]
videoView.load(withVideoId: "YourVideoID", playerVars: vars) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-29T05:46:57.190

某些视频和频道存在隐私问题，它们不会从任何其他地方播放，除了 youtube... 第 1 步：- 检查您尝试播放的 url 是否正确 第 2 步：- 检查 videoid 是否正确解析 第 3 步：- 检查 webview已加载内容第 4 步：- 视频没有隐私问题 那么它可以正常工作，我的工作正常

# .net - What are the differences between an MDB and SDF file?

> ID：16190899
> 
> 赞同：1
> 
> 时间：2013-04-24T11:33:17.500
> 
> 标签：.net, sql, ms-access, sql-server-ce, oledb

I am developing a standalone .NET application that currently uses an SQLite Database, but I want to port this to something else because i'm not happy with it's performance.

I would like to know which one would be better for use instead? An Access Database File or a SQL Server Compact Database File?

Which one would give the best performance and why?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:41:11.783

我个人使用 Sql Server 精简版代替 SQLite。而且效果很好。

您可以在此处找到两个数据库的详细比较：http: [//database-management-systems.findthebest.com/compare/24-27/Access-vs-Microsoft-SQL-Server-Compact-Embedded-Database](http://database-management-systems.findthebest.com/compare/24-27/Access-vs-Microsoft-SQL-Server-Compact-Embedded-Database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:42:56.430

在我看来，两者之间的选择应该更多地与您的应用程序的演变和维护有关，而不是纯粹/原始的性能。

如果你去，`SQL Compact`你将使用一个更接近真实 SQL Server 的编程模型，以防你需要扩展你的应用程序以使用真实的`SQL Server`（我知道`Compact`也是一个真实的版本，但是是嵌入的，进程内零配置一），您将几乎没有痛苦。

# java - 在 JPA 中加入 3 个实体

> ID：16190903
> 
> 赞同：0
> 
> 时间：2013-04-24T11:33:29.587
> 
> 标签：java, jpa, criteria-api

这是我第一次开发 Java 应用程序并立即遇到问题。现在我有一个如下的 SQL 查询：

```
Select PD.* From product PD
join Stock SP on PD.id = SP.product_id
join storage SR on SR.id = SP.storage_id
join status ST on ST.storage_id = SR.id
where ST.id ='1qa7n234i' 
```

我的实体：

```
public class Product extends MainEntity {
   public Product(){}
   public void setAtcKey(String pAtcKey) {
    atcKey = pAtcKey;
   }
}

public class StockPosition extends MainEntity {
   public StockPosition(){}
   @XmlIDREF
    public Product getProduct() {
        return product;
    }

    public void setProduct(Product pProduct) {
        product = pProduct;
    }

    @XmlIDREF
    public Storage getStorage() {
        return storage;
    }

    public void setStorage(Storage pStorage) {
        storage = pStorage;
    }
}

public class Storage extends MainEntity {
   public Storage(){}
   @XmlTransient
   public Station getStation() {
    return station;
   }

   public void setStation(Station pStation) {
    station = pStation;
   }
}

public class Status extends MainEntity {
   public Status(){}
} 
```

所以我将它转换为 CriteriaQuery，如：

```
CriteriaBuilder cb = getCriteriaBuilder();
CriteriaQuery<Product> query = cb.createQuery(Product.class);
Root<Product> product = query.from(Product.class);
Join<StockPosition, Product> sp = product.join(StockPosition_.product); 
```

但是我收到一条错误消息，例如`The method join(SingularAttribute<? super Product,Y>) in the type From<Product,Product> is not applicable for the arguments (SingularAttribute<StockPosition,Product>)`？这个消息对我来说很奇怪（因为我是新手）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:04:31.153

```
CriteriaBuilder cb = getCriteriaBuilder();
CriteriaQuery<Product> query = cb.createQuery(Product.class);
Root<Product> product = query.from(Product.class);
Join<StockPosition, Product> sp = product.join(StockPosition_.product); 
```

我认为它应该是这样的：

```
CriteriaBuilder cb = getCriteriaBuilder();
CriteriaQuery<Product> query = cb.createQuery(Product.class);
Root<Product> product = query.from(Product.class);
Join<StockPosition, Product> sp = product.join(Product_.stockposition); 
```

也许您对 SQL 连接的方式有很多想法。

如果您不需要在运行时构建查询，您可以考虑改用 JPQL。

带有 NamedQueries 的 JPQL： [http ://www.objectdb.com/java/jpa/query/named](http://www.objectdb.com/java/jpa/query/named)

也许这可以帮助您解决有关 JPA [http://www.objectdb.com/java/jpa/query/criteria的其他问题](http://www.objectdb.com/java/jpa/query/criteria)

您自己构建元模型类吗？还是您使用了持久性框架提供的“元模型生成器”？

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:09:46.813

您的加入不正确。如果您`Root`在`Product`( `Root<Product>`) 中，那么您必须使用`Product`类中存在的属性加入。

在这种情况下，您的`Product`类应定义如下属性：

```
@OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
private List<StockPosition> stackPositions; 
```

然后按如下方式执行连接：

```
Join<Product, StackPosition> sp = product.join(Product_.stackPositions_);
Predicate p = cb.equal(sp.get(StackPosition_.id, "1qa7n234i");
... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T11:42:50.493

如果您的数据库模型中存在**一对一的**关系，那么具有如下所示的类和**注释**应该会给您结果。

基本上，您将获取`Stock`, 并获取`stock.storage.status`（根据`@javax.peristence.JoinColumn`子句加入）

```
class Product {

@OnetoOne
@JoinColumn(name="product_id")
Stock stock;

}

class Stock {

@OnetoOne
@JoinColumn(name="storage_id")
Storage storage;

}

class Storage {

@OnetoOne
@JoinColumn(name="storage_id")
Status status;

} 
```

# ios - 在任务管理器中应用程序时检查网络连接

> ID：16190904
> 
> 赞同：0
> 
> 时间：2013-04-24T11:33:35.977
> 
> 标签：ios, objective-c, networking

我要创建一个应用程序，我想在应用程序运行时检查网络连接，或者任何时候运行应用程序首先检查网络连接（如果此应用程序在任务管理器中然后运行，我需要检查网络）

我不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:47:13.647

您应该查看 Apple 代码示例中的[可达性示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)。

基本上，您可以在项目中导入`Reachability.h`和`Reachability.m`，然后使用可用的方法检查网络状态。

# java - Fitnesse 如何调用 selenium 服务器？我们可以明确指定它还是 Fitnesse 随机调用？

> ID：16190905
> 
> 赞同：0
> 
> 时间：2013-04-24T11:33:35.987
> 
> 标签：java, fitnesse, selenium-fitnesse-bridge

*Fitnesse 如何调用 selenium 服务器？* **我们可以明确指定它还是 Fitnesse 随机调用？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:32:13.010

FitNesse 本身不测试任何特定的工具、技术或产品。它需要一个夹具来与您的软件进行通信。FitNesse 网站上的插件页面上有一个用于测试 web、rest、数据库和其他常见类型应用程序的已知夹具列表：[http](http://www.fitnesse.org/PlugIns) ://www.fitnesse.org/PlugIns 。但是，此夹具代码将经常由团队中的某个人编写，以将 FitNesse 连接到被测系统的独特组件。

具体来说，您可能会先查看 Xebium 或 SpiderFixture。

# reporting-services - 数据刷新到报告数据库

> ID：16190908
> 
> 赞同：0
> 
> 时间：2013-04-24T11:33:45.157
> 
> 标签：reporting-services, ssrs-2008, load-balancing, database-administration

我有两台服务器，一台用于数据处理（PRDB），另一台用于报告数据库（RSDB）。在 PRDB 上的每次处理之后，我手动将数据刷新到 RSDB。在这个意义上手动：使用 SSIS 我自动化这个过程

A - 对于小桌子

*   删除 RSDB 中 TableA 中的行
*   在 PRDB 中的 TableA 中选择增量行
*   然后在 RSDB 的 TableA 中插入

B - 对于大桌子

*   我使用了 Transfer SQL Server Objects Task Editor - 目标中 DropObjectFirst 的选项（RSDB）

我最近注意到这个过程需要 3 个小时或更长时间才能完成，在这些情况下，用户无法查看报告。系统是96gig RAM，系统资源还可以。

请提供建议和帮助，指出在日常流程中可能会出现的性能缺陷。

谢谢大家。。

担心的算盘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:47:23.633

由于您已经在使用 SSIS，我建议您探索它的增量加载功能。

增量加载仅加载自上次加载以来的差异。差异包括：

*   新行
*   更新的行
*   删除的行

就其本质而言，增量加载是可重新执行的，这意味着您可以一遍又一遍地执行加载程序而不会造成伤害。不仅如此，可重新执行意味着加载程序被设计为多次执行，而不会在服务器上造成不必要的或重复的工作。

有关帮助您入门的完整文章，请参阅

1.  [http://www.sqlservercentral.com/articles/Integration+Services+(SSIS)/75331/](http://www.sqlservercentral.com/articles/Integration+Services+(SSIS)/75331/) 和
2.  [http://www.sqlservercentral.com/articles/Stairway+Series/76390/](http://www.sqlservercentral.com/articles/Stairway+Series/76390/)

# ios - 适用于 iOS 的最佳免费崩溃报告器

> ID：16190909
> 
> 赞同：2
> 
> 时间：2013-04-24T11:33:46.697
> 
> 标签：ios, crash-reports, plcrashreporter, crashlytics

我想从用户那里获取我的应用程序的崩溃日志，以便我可以在下一次更新中解决显示停止问题。为此，我可以在我的应用程序代码中使用一些第三方崩溃报告器。最初我从[PLCrashReporter](http://code.google.com/p/plcrashreporter/)开始。这是一个很酷的框架，可以生成日志（比如苹果创建的日志）。

然后，我选择用我的应用程序实现[Crashlytics](http://try.crashlytics.com/)。它以一种优雅的方式创建日志，其中包含比其他崩溃报告器更多的详细信息。

我的问题是，

*   这两者有什么区别？根据您的经验，哪一个更好？
*   他们是合法的吗？我可以在我的应用程序中不加任何条件地添加它们吗？
*   或者，有没有比这两个更好的免费崩溃报告器？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:10:21.460

我们在商业应用程序中使用 Crashlytics。效果很好。当然，它现在归 Twitter 所有，所以假设有一天它会像他们拥有的一切一样被杀死。跟踪崩溃没有错，从长远来看，它可以帮助您创建更好的产品。毕竟 Apple 支持 iTunesConnect 中的崩溃报告，但它很糟糕。

# ios - MKMapView iOS 自定义用户位置注释未显示/更新位置

> ID：16190920
> 
> 赞同：1
> 
> 时间：2013-04-24T11:34:15.773
> 
> 标签：ios, mkmapview, mkannotation, mkannotationview, mkpinannotationview

您好我正在使用自定义注释来替换蓝色 GPS 位置点。我已经在 viewForAnnotation 中将它添加到地图中。OurLocAnnotation 类符合 MKAnnotation 委托。

```
 //Custom location view
if([annotation isKindOfClass:[OurLocAnnotation class]]) {
    static NSString *identifier = @"currentLocation";
    SVPulsingAnnotationView *pulsingView = (SVPulsingAnnotationView *)[self.recycleMap dequeueReusableAnnotationViewWithIdentifier:identifier];

    if(pulsingView == nil) {
        pulsingView = [[SVPulsingAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
        pulsingView.annotationColor = [UIColor colorWithRed:0.678431 green:0 blue:0 alpha:1];
        pulsingView.canShowCallout = YES;
    }

    return pulsingView;
} 
```

根据此链接将显示用户位置设置为 NO：从 viewDidLoad 调用[上一个 stackoverflow 问题](https://stackoverflow.com/questions/11432746/custom-annotation-view-for-userlocation-not-moving-the-mapview)并开始更新位置

我遇到的问题是注释没有显示我是否需要四处移动才能启动并更新我的位置，或者我可以在加载时设置它的状态，即显示注释，然后让它将注释更新到我的位置？如果我给出它显示的注释硬编码坐标值，但我不希望我想要它基于我的位置？

```
- (void) locationManager:(CLLocationManager*) manager didUpdateToLocation:(CLLocation*)newLocation fromLocation:(CLLocation*)oldLocation
{

if (ourLocAnn == nil)
{
    self.ourLocAnn = [[OurLocAnnotation alloc] init];

    ourLocAnn.title = @"I am here";
    ourLocAnn.coordinate = newLocation.coordinate;
    [recycleMap addAnnotation:ourLocAnn];
}
else
{
    ourLocAnn.coordinate = newLocation.coordinate;
} 
```

**更新：**我很愚蠢，我可以通过向位置经理询问我的位置来显示我的位置，如下所示。我只希望我搬家时我的位置会更新....

```
ourLocAnn = [[OurLocAnnotation alloc]init];
ourLocAnn.coordinate = clController.locMgr.location.coordinate;
[recycleMap addAnnotation:ourLocAnn]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:58:44.603

是的，上面的所有代码都有效！终于让它工作了。因此，上面还列出了也会随着您的动作而更新的自定义用户 loc 的步骤。

# javascript - New deployment, have browser cache cleared the first time the page is loaded

> ID：16190922
> 
> 赞同：3
> 
> 时间：2013-04-24T11:34:20.010
> 
> 标签：javascript, jquery, deployment, browser-cache, web-deployment

The situation:

*   Application deployed and in use.

*   JavaScript / jQuery (in .js file) updates made.

*   Application redeployed

*   User does not see JavaScript changes unless they clear their cache.

This is presenting non-trivial issues.

Is there a way to have the cache cleared:

1.  Automatically and
2.  Just on the first load (cache as normal after that) when a new deployment is rolled out?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:36:42.660

使用jawr，这将根据更改为每个文件创建哈希（如果文件未更改，则不会为该文件创建新哈希） [https://jawr.java.net/](https://jawr.java.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:40:22.550

您可以在文件名中添加一个参数。比如：path/to/styles.css?deployed=20130424 和 path/to/scripts.js?deployed=20130424

# php - exec Exit Code Meaning for 11

> ID：16190926
> 
> 赞同：3
> 
> 时间：2013-04-24T11:34:46.700
> 
> 标签：php, linux, exec, exit-code

I'm using the following code on a linux web server

```
$error = exec('phantomjs table1.js', $op, $code);
echo $code; // prints 11 on screen 
```

* * *

### table1.js

```
var page = require('webpage').create();
var url = 'table1.php';
page.open(url, function (status) {
    page.render('ss/table1.png');
    phantom.exit();
}); 
```

* * *

### table1.php

```
echo '<h1>This should be converted to an image</h1>'; 
```

I went through [***this***](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/exitcodes.html) link but that code isn't listed there. Any idea what this exit code stands for?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T11:36:11.063

代码 11 是“分段错误”：分段错误（也称为 segfault）是由程序在尝试在一块未分配给程序的内存中分配数据时引起的。它表示程序错误，并且通常（如果不总是）使程序崩溃。在您的情况下，段错误可能是由 phantomjs 引起的，这表明可能是旧版本或 beta 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:54:43.497

这是我发现的。

*   您的 phantomjs 正在调用一些子进程。（我的假设是你在节点上执行这个）。
*   现在，如果 table1.js 突然退出，那么返回代码将是二进制`00001000`的，主进程（根据假设的节点）也将退出，并带有相同的二进制错误代码。
*   现在根据退出状态相关性，两个二进制文件都将转换为正常的符号信号，这使得两者都成为`1`和`1`.

因此您的错误代码为 11。

资料来源： [Linux 中是否有任何标准的退出状态代码？](https://stackoverflow.com/questions/1101957/are-there-any-standard-exit-status-codes-in-linux)

# php - 在 php 中检测 mime 类型失败

> ID：16190929
> 
> 赞同：4
> 
> 时间：2013-04-24T11:34:50.630
> 
> 标签：php, symfony-1.4, mime-types

我有以下 PHP 代码显示上传文件的 mime 类型。

```
<?php

if ($_POST) {

    var_dump($_FILES);

    $finfo = new finfo(FILEINFO_MIME_TYPE);

    var_dump($finfo->file($_FILES['file']['tmp_name']));

} else{
    ?>
    <form method="POST" enctype="multipart/form-data"><input name="file" type="file"><input name="submit" value="send" type="submit"/></form>
    <?php
} 
```

使用此脚本上传 somefile.csv 的结果如下。

```
array (size=1)
    'file' =>
    array (size=5)
        'name' => string 'somefile.csv' (length=12)
        'type' => string 'text/csv' (length=8)
        'tmp_name' => string '/tmp/phpKiwqtu' (length=14)
        'error' => int 0
        'size' => int 3561
string 'text/x-fortran' (length=14) 
```

所以当然 mime 类型应该是 text/csv。但是我使用的框架（Symfony 1.4）使用文件信息的方法。

此外，我进一步测试了该命令（在 Ubuntu 上）似乎`file --mime-type somefile.csv`返回`somefile.csv: text/x-fortran`并且命令`mimetype somefile.csv`返回`somefile.csv: text/csv`. somefile.csv 是用 MSOffice 创建的（我不知道这是否重要）。显然`mimetype`使用了一些很棒的 mime 数据库（[http://freedesktop.org/wiki/Software/shared-mime-info](http://freedesktop.org/wiki/Software/shared-mime-info)），而`file`没有。

1.  PHP 使用`file`还是`mimetype`不使用？
2.  此外，我不确定在这里做什么；我上传的文件格式错误吗？我必须使用不同的 mime 数据库吗？PHP被窃听了吗？这里发生了什么？

***编辑：***

之所以将其检测为 fortran 程序，是因为 somefile.csv 仅包含以下内容：

```
somecolumn;
C F; 
```

我相信CSV文件的上述内容是有效的，对吗？如果一个字段包含空格，则该字段不必放在引号内，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T15:43:32.333

我这里没有一个 Unix 盒子来检查一个真正的“魔法”文件（用于猜测 mime 类型的签名数据库），但一个快速的谷歌搜索揭示了这一点：

```
# $File: fortran,v 1.6 2009/09/19 16:28:09 christos Exp $
# FORTRAN source
0       regex/100       \^[Cc][\ \t]    FORTRAN program
!:mime  text/x-fortran 
```

显然，它会扫描文件的开头以查找以单个 C 字母加空格开头的行，这似乎是[Fortran 样式的注释](http://en.wikipedia.org/wiki/Comparison_of_programming_languages_%28syntax%29#Inline_comments)。因此误报：

```
somecolumn;
C F; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:47:17.597

来自[PHP Mimetype 的介绍](http://www.php.net/manual/en/intro.mime-magic.php)：

> **此扩展已被弃用，因为 PECL 扩展 Fileinfo 以更简洁的方式提供了相同的功能（以及更多功能）。**
> 
> 该模块中的函数尝试通过在文件中的特定位置查找某些魔术字节序列来猜测文件的内容类型和编码。虽然这不是万无一失的方法，但使用的启发式方法做得很好。
> 
> 此扩展源自 Apache mod_mime_magic，它本身基于 Ian F. Darwin 维护的文件命令。有关更多历史和版权信息，请参阅源代码。

来自[PHP Fileinfo 的介绍](http://www.php.net/manual/en/intro.fileinfo.php)：

> 该模块中的函数尝试通过在文件中的特定位置查找某些魔术字节序列来猜测文件的内容类型和编码。**虽然这不是万无一失的方法，但使用的启发式方法做得很好**。

这是一个关于同一主题的一些答案的问题：[Detecting MIME type in PHP](https://stackoverflow.com/questions/652002/detecting-mime-type-in-php)。

# jsp - jsp上远程业务接口的ejb ref解析错误

> ID：16190930
> 
> 赞同：1
> 
> 时间：2013-04-24T11:34:51.153
> 
> 标签：jsp, glassfish, jndi, ejb-3.1

在发生此异常之前，我有两个项目

分页 -> 一个使用 EJB 的简单 struts2 Web 应用程序

简单的 PagingWithAjaxJSON-ejb -> 上述项目引用的 EJB 应用程序。

一切都按预期工作。

之后我决定在我的应用程序中使用 Maven。我根据 Web 应用程序的 Maven 目录结构更改了第一个应用程序（分页）。所以我只需要更改源代码中的包导入。

之前（在分页应用程序中）

```
import beans.personBeanRemote;
.
.
and so on.. 
```

之后（当前应用）

```
import com.mycompany.ajaxstruts2.beans.personBeanRemote;
.
.
and so on.. 
```

以及相应的包装声明。

除了这一切都是同上。

但是这次当我浏览同一个文件 index.jsp 时，它说

```
**Struts Problem Report
Struts has detected an unhandled exception:
Messages:   
    beans.personBeanRemote
    ejb ref resolution error for remote business interfacebeans.personBeanRemote
    Lookup failed for 'java:global/SimplePagingWithAjaxJson-ejb/personBean!beans.personBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming}
    javax.naming.NamingException: Lookup failed for 'java:global/SimplePagingWithAjaxJson-ejb/personBean!beans.personBeanRemote' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NamingException: ejb ref resolution error for remote business interfacebeans.personBeanRemote [Root exception is java.lang.ClassNotFoundException: beans.personBeanRemote]]
File:   org/glassfish/web/loader/WebappClassLoader.java
Line numbe  1578** 
```

index.jsp 中的代码片段在以前和当前应用程序的 index.jsp 文件中是相同的。

但是`<%@page import=...>`在当前项目的 index.jsp 中会相应地更改以适应更改的目录结构。

```
Context c = new InitialContext();
            personBeanRemote bean= (personBeanRemote) c.lookup("java:global/SimplePagingWithAjaxJson-ejb/personBean!beans.personBeanRemote");
                        int x = bean.getCount(); 
```

以前的应用程序正在运行，但当前的 Maven 应用程序没有。两个应用程序都使用了 NetBeans IDE 6.9。

注意：EJB 应用程序是完整的。

# ios - 在日历视图上添加标签

> ID：16190932
> 
> 赞同：1
> 
> 时间：2013-04-24T11:34:52.900
> 
> 标签：ios, objective-c, nscalendar

我正在开发一个项目，其中我为 iPad 集成了全屏日历视图。

`ios_calendar`可可控件上可用的视图在[这里](https://www.cocoacontrols.com/controls/ios-calendar)。

现在，我想要的是在不同的日期添加标签。

还要显示单个标签，从开始日期延伸到结束日期。

有什么解决办法吗？

如果我想在`Selected Date Cell`.
但找不到如何在一年中的其他日期贴标签。

```
- (void) calendarView: (CXCalendarView *) calendarView
        didSelectDate: (NSDate *) date {

    NSLog(@"Selected date: %@",date);

    UILabel *labeltext=[[UILabel alloc]initWithFrame:CGRectMake(100, 0, 50, 50)];
    labeltext.text=@"hello";
    labeltext.backgroundColor=[UIColor redColor];
    [self.calendarView addSubview:labeltext];

} 
```

# javascript - display:none 属性在 Firefox 和 chrome 中不起作用

> ID：16190936
> 
> 赞同：0
> 
> 时间：2013-04-24T11:35:22.217
> 
> 标签：javascript, html, css

```
<tr style="height:5px" id="TRRSHeaderTrialBar" name="TRRSHeaderTrialBar" style='display:none'>
<tr id="TREmail" name="TREmail"  style="height:1px;" nowrap style='display:none'> 
```

我使用上面的代码来隐藏栏，它在 IE 中工作正常，但在 Firefox 和 chrome 中没有，所以我使用了

```
document.getElementById("TREmail").style.display = "none";
document.getElementById("TRRSHeaderTrialBar").style.display = "none"; 
```

`TRRSHeaderTrialBar`包含标签页并`TREmail`包含两个按钮。当页面加载时，`TRRSHeaderTrialBar`工作正常，但`TREmail`在页面开始加载时显示按钮。加载完成后隐藏。

我想在页面加载时隐藏该按钮。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T11:38:12.823

不得[使用](http://www.w3.org/TR/html-markup/syntax.html#attribute)多个样式属性。代替

```
 <tr style="height:5px" ... style='display:none'> 
```

采用

```
 <tr style="height:5px; display:none"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:39:23.670

看你写的html代码就行了；您可以很容易地注意到，两者都有两种样式`tr`。尝试以下，它可能会工作：

```
<tr style="height:5px; display:none;" id="TRRSHeaderTrialBar" name="TRRSHeaderTrialBar">
<tr id="TREmail" name="TREmail"  style="height:1px; display:none;" nowrap> 
```

您必须在一个样式标题中应用所有 css 样式，如上面的代码中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-04T05:47:05.670

```
varvalidated = document.forms(0).validated.value;

if(varvalidated == 0)
{
    document.getElementById("k1").style.display = "none";
}
else
{
    document.getElementById("t1").style.display = "none";
} 
```

# visual-studio-lightswitch - Form Authentication and Active users in LightSwitch Web App

> ID：16190939
> 
> 赞同：0
> 
> 时间：2013-04-24T11:35:39.573
> 
> 标签：visual-studio-lightswitch

Is there any way i can trace when user has Login (i.e. insert time of login in a log table) and how many users are currently active. I am using Form Authentication. I have search but i got stuff regarding custom login page. Is it possible to trace this using form authentication?

i have tried to insert a log into table on Application_LoggedIn

```
 Private Sub Application_LoggedIn()

        Dim A = Application.Current.CreateDataWorkspace.ApplicationData.Logtable.AddNew()
        A.name = User.Name
        A.time = DateTime.Now
        A.dates = DateTime.Now.Date
        A.Activity = "Login"
        Application.Current.CreateDataWorkspace.ApplicationData.SaveChanges()

    End Sub 
```

But it does not seems to working. I checked in debug mode, the pointer passed but data is not inserted. I am not getting where i am doing wrong.

Is there any way i can call applicationdataservice public functions on client end?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T13:10:06.487

您正在创建两个**单独**的数据工作区，一次是在添加记录时，另一个是在您保存更改时。这两个工作区没有连接，所以当你要求第二个工作区保存更改时，没有，因为它不知道第一个工作区中添加的记录。

您的代码应该是（我没有对此进行测试，但基于我在您的代码中看到的错误）：

```
Private Sub Application_LoggedIn()
    Using ws = Application.Current.CreateDataWorkspace
        Dim A = ws.ApplicationData.Logtable.AddNew()
        A.name = User.Name
        A.time = DateTime.Now
        A.dates = DateTime.Now.Date
        A.Activity = "Login"
        ws.ApplicationData.SaveChanges()
    End Using
End Sub 
```

# php - xmlhttp.responseText after second ajax request

> ID：16190940
> 
> 赞同：0
> 
> 时间：2013-04-24T11:35:41.133
> 
> 标签：php, javascript, ajax, ajax-request

i m writing a script using javascript ajax request and php.. i make an ajax call to verify that a user is recognised or not and according to the "response" i want to make a second ajax request either letting him either make his choices if his is already a registered user, or display the already submitted choices

```
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    var script = document.createElement('script');
        script.innerHTML = xmlhttp.responseText;
        document.getElementsByTagName('head')[0].appendChild(script);
        removeOnclick();
        //document.getElementById("txtHint").innerHTML=
    }
  }
xmlhttp.open("GET","submit_votes.php?q="+str+string,true);
xmlhttp.send();
} 
```

on my php side

i have these lines in case he is recognised

```
if (mysqli_num_rows($result) > 0) {

while($row = mysqli_fetch_array($result))
  {
    echo "document.getElementById('".$row['option1']."').className += ' colour1';";
    ....
} 
```

but if he is not recognised i have set this check

```
if (!isset($_GET['option1'])){ //option1 is one of the parameters i pass through "string"
    echo "nodata";
    } 
```

the first call is made passing only the string is set ""

```
 q="+str+string 
```

while on the second call string is set as option1=A&option2=B etc etc...

the issue is, that i try to alert the xmlhttpresponse to check if the response has been altered, but the resposne remains the same..for instance if he is not recognised i ll get in both responses "nodata" while if i refresh the page and he is recognised, i ll get the document.getElementById('".$row['option1']."').className += ' colour1'; response..

the reason i need this is because i want this part

```
 var script = document.createElement('script');
        script.innerHTML = xmlhttp.responseText;
        document.getElementsByTagName('head')[0].appendChild(script);
        removeOnclick();
        //document.getElementById("txtHint").innerHTML= 
```

to be executed only if he is recognised..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:56:05.197

在考虑了 moonwave99 的评论之后，我最终得到了一个不同的解决方案..

首先我发现，条件检查失败，因为在 responseText 中有一个额外的空格..所以最初我使用

```
xmlhttp.responseText.trim(); 
```

为了删除不需要的字符......但我仍然感觉不对，因为我将 js 代码作为字符串从 php 传递回 js .. 我决定使用 json .. 所以在 php 方面，我使用json编码

```
$options = array($row['option1'],$row['option2'],$row['option3'],$row['option4'],$row['option5'],$row['option6'],
                    $row['option7'],
                    $row['option8'],
                    $row['option9'],
                    $row['option10']
                    );
echo json_encode($options); 
```

在我使用的javascript方面

```
 var jsObject = JSON.parse(xmlhttp.responseText);
    var jslength = jsObject.length;
    for (i=0; i<jslength; i++){
        document.getElementById(jsObject[i]).className += ' colour';
    } 
```

# php - Return to the previous page and the message

> ID：16190942
> 
> 赞同：0
> 
> 时间：2013-04-24T11:35:42.807
> 
> 标签：php, html

I have a problem because I'm new to PHP. I wrote a simple contact form, but after sending a message (everything works fine), it takes me to a blank page. Is there any way to go back to the `contact.html` page and show the message "sent successfully"?

```
<?php
    if(isset($_POST['submit'])) {
        $to ='contact@centurioagency.com';
        $subject =$_POST['subject']; 
        $headers  = 'MIME-Version: 1.0' . "\r\n";
        $headers .= 'Content-type: text/html; charset=utf-8' . "\r\n";
        $message = "
                <html>
                    <head>
                        <title>$_POST['subject']</title>
                    </head>
                    <body>
                        <b>Person: </b>    ".$_POST['name']." </br>
                        <b>Email: </b>     ".$_POST['email']." </br>
                        <b>Message: </b>   ".$_POST['detail']." </br>
                    </body>
                </html>" ;
     mail($to, $subject, $message, $headers);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:40:28.797

您可以使用[标头](http://php.net/manual/en/function.header.php)功能进行重定向。

```
header('Location: contact.php?msg=Mail Sent');
exit; 
```

**联系人.php**

```
if(isset($_GET['msg'])){
    echo $_GET['msg'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:39:02.573

```
header("location:contact.php?msg=YOUR_MSG");
die(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:41:22.877

在您的 HTML 文件中，您不能使用 PHP，因此首先将 contact.html 更改为 contact.php ，然后：

尝试这个：

```
if (mail($to, $subject, $message, $headers)) {
 header("location:contact.php?msg=sent successfully");
} 
```

在contact.php

```
if(isset($_GET['msg'])) {
 echo $_GET['msg']
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:42:28.997

您无法在 html 页面中获取查询字符串，因此您需要将其转换为 php 页面

```
 <?php

    header('Location: contact.php?msg=sent successfully');
    ?>

contact.php page 

    <?php

    if($_GET['msg'])
    { ?>
    <p>
    Message has been sent successfully.
    thank you.

    </p>

<?php }

 ?> 
```

***其他解决方案：***

为消息创建一个新页面Thankyou.html并使用它

```
<?php

header('Location: Thankyou.html');
?> 
```

# sql - 特殊数据表示的 SQL 脚本

> ID：16190943
> 
> 赞同：0
> 
> 时间：2013-04-24T11:35:42.717
> 
> 标签：sql, join, cross-join

请帮助我解决数据表示的问题。

我有一些 SQL 脚本，它创建以下数据表示：

```
Declare params cursor for 
Select distinct id_variable from [UIR_DB].[dbo].[Variable_Values]
open params
Declare @idparam int
Declare @csql nvarchar(max)  = ''
Declare @csql2 nvarchar(max)  = ''
declare @csq13 nvarchar(max) = ''
Declare @i int = 1
fetch next from params into @idparam
while @@FETCH_STATUS = 0
begin
Select @csql2 = @csql2 +', id_var'+LTRIM(Str(@i))+ ', param' +LTrim(Str(@i))
Select @csql =  ' (Select id_variable as id_var'+LTrim(Str(@i))+', value as param'+LTrim(Str(@i))+' from
[UIR_DB].[dbo].[Variable_Values] where id_variable = '+LTrim(Str(@idparam))+') a'+LTrim(Str(@i))+'
cross join'+@csql
Set @i = @i+1
fetch next from params into @idparam
end
Select @csql = 'Select '+SubString(@csql2,2,LEN(@csql2)-1)+' from
'+SubString(@csql,1,LEN(@csql)-11)+'order by'+SubString(@csql2,2,LEN(@csql2)-1)
print @csql
exec sp_executesql @csql
close params
deallocate params 
```

![执行脚本 1](https://i.stack.imgur.com/MmQob.png)

我对 SQL 的了解还不是很远，所以请，如果它不是一个大问题，我需要脚本，它将从 Script1 结果创建下一个数据表示： ![新脚本结果](https://i.stack.imgur.com/PEGbS.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:48:39.940

尝试这个：

您可以将您的第一个结果集添加到一个临时表中并执行以下查询。

您可以根据需要添加别名或 ID。

```
SELECT id_var1,Param1 FROM [UIR_DB].[dbo].[Variable_Values]
UNION
SELECT id_var2,Param2 FROM [UIR_DB].[dbo].[Variable_Values] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T12:17:26.670

希望这对您有所帮助。这可以分两步完成

1) 为结果集中的记录生成自动递增编号

```
WITH CTE
AS
(
  SELECT ROW_NUMBER() OVER(ORDER BY id_var1) AS id_sample,
  [id_var1], [param1],[id_var2], [param2]
  FROM Table1
) 
```

注意：您可以在代码中添加增量数字，以上只是示例

2）使用下面的查询来获得想要的结果

```
SELECT 
c.id_sample,
c.id_variable
,c.value
FROM CTE
CROSS APPLY
(
  VALUES
  (id_sample,id_var1,param1),
  (id_sample,id_var2,param2)
)c(id_sample,id_variable,value) 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!3/653fc/1)

# qt - Two views, one model : How to update the views when the model changes

> ID：16190949
> 
> 赞同：0
> 
> 时间：2013-04-24T11:36:08.167
> 
> 标签：qt, model-view-controller, user-interface

I'm designing a Qt UI and have two different views ( `QGraphicsObject` class) for the same model (a car).

When the car's model is to be updated (in one of two widgets), I want both of the views to be updated (and of course the same goes for the model).

The intuitive way to do this is to update the model, and let the views catch a 'signal' or something similar when this happens to update themselves.

I want to know if this is a recommended behavior (in MVC) as it forces the model to have some bidirectional connection with its views (while in MVC the model shouldn't have a list of its views).

Also, what's a good way to implement this in Qt ? (use Qt signals ? raise a flag when the model have been changed ?)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:38:58.297

你的模型会是什么样子？在 Qt 中，有一个用于类似列表、类似表格和类似树的模型的标准 API，即[模型视图编程](http://qt-project.org/doc/qt-4.8/model-view-programming.html)。`QGraphicsScene`但是，您显然正在使用它并不能很好地发挥作用。你还没有说你想用什么来沟通，或者你建模的数据是如何结构化的，所以很难建议你在这里应该做什么。

也就是说，通常的 MVC 模式（对`QAbstractItemModel`Qt 中使用的 API 进行数学运算）是让模型通知任何附加视图有关基础数据的任何更改；在 Qt 中，这是通过视图连接的信号来完成的。当视图想要修改数据时，它们会调用模型上的方法。当模型接受修改时，它会发出标准信号，以便之后更新所有视图。

# c# - 解析 DNS 服务器并且有代理时，是否需要通过代理？

> ID：16190953
> 
> 赞同：2
> 
> 时间：2013-04-24T11:36:13.500
> 
> 标签：c#

我有下面的代码来解析 DNS 服务器。当有 Socks 4、Socks 5 或 HTTP 代理时，是否应该更改为使用代理？如果是这样，你能举个例子吗？提前致谢。

```
public static IPAddress ResolveHostName(string host)
{
    if (host.ToLower() == "localhost" || host.ToLower() == Environment.MachineName.ToLower())
        host = "127.0.0.1";

    IPAddress result;

    //This will parse IPV4 and IPV6
    IPAddress.TryParse(host, out result);

    //Not an IP Address but a server name
    IPAddress ipAddress = result ?? Dns.GetHostEntry(host).AddressList[0];

    return ipAddress;
} 
```

# javascript - javascript中的小数点后3位

> ID：16190959
> 
> 赞同：0
> 
> 时间：2013-04-24T11:36:32.660
> 
> 标签：javascript, decimal-point

我是编程新手，我从 javascritpt 开始，我有这段代码，我希望打印的值到小数点后 3 位。

```
<script>
for (var a = 3, b = 2; b >= 0; a ++, b --) {
document.writeln (a + " / " + b + " = " + a/b + "<br />")
}
</script> 
```

我试过了：

```
var a=a.toFixed(3);
var b=b.toFixed(3); 
```

但这并没有什么不同。第一行是 4 / 3 = 1.3333333333333333 而不是我想要的 1.333。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:38:21.057

你有没有尝试过：

```
document.writeln (a + " / " + b + " = " + (a/b).toFixed(3) + "<br />") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:39:05.263

你可以`.toFixed(3)`在你划分的时候使用。喜欢`(a/b).toFixed(3)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T11:41:58.857

尝试这个：

```
<script>
for (var a = 3, b = 2; b >= 0; a ++, b --) {
    var c = (a/b).toFixed(3);
    document.writeln (a + " / " + b + " = " + c + "<br />")
}
</script> 
```

# xquery - 无法在 BaseX 中使用 XQuery 执行乘法运算

> ID：16190966
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:01.363
> 
> 标签：xquery, basex

考虑一个定义为的 xml 文件：

```
<?xml version="1.0"?>
<sports>
    <teams>
    <team tno="t100">
            <tname>Knights</tname>
            <city>London</city>
        </team>
        <team tno="t200">
            <tname>Dukes</tname>
            <city>Surrey</city>
        </team> 
        <team tno="t300">
            <tname>Kings</tname>
            <city>Leeds</city>
        </team>     
    </teams>

    <players>
    <player pid="p501">
            <pname>Simon</pname>
            <city>London</city>
        </player>
        <player pid="p502">
            <pname>Andrew</pname>
            <city>Birmingham</city>
        </player>
        <player pid="p503">
            <pname>Mike</pname>
            <city>London</city>
        </player>       
    </players>

    <parts>
        <part pno="801">            
            <pname>Right Gloves</pname>
            <price>8.99</price>
        </part>
        <part pno="901">            
            <pname>Left Gloves</pname>
            <price>9.99</price>
        </part>
        <part pno="851">            
            <pname>Left Pad</pname>
            <price>33.00</price>
        </part>
        <part pno="951">            
            <pname>Right Pad</pname>
            <price>43.00</price>
        </part>
    </parts>

    <orders>    
        <order ono="61" playerNum="p501" team="t200" >
            <kits>
                <kit>
                    <pNum>801</pNum>
                    <qty>11</qty>
                </kit>
            </kits>
        </order>
        <order ono="62" playerNum="p501" team="t100" >
            <kits>
                <kit>
                    <pNum>901</pNum>
                    <qty>12</qty>
                </kit>

            </kits>
        </order>

        <order ono="63" playerNum="p502" team="t300" >
            <kits>
                <kit>
                    <pNum>851</pNum>
                    <qty>9</qty>
                </kit>

            </kits>
        </order>

        <order ono="64" playerNum="p503" team="t300" >
            <kits>
                <kit>
                    <pNum>951</pNum>
                    <qty>16</qty>
                </kit>

            </kits>
        </order>

        <order ono="65" playerNum="p503"  team="t200" >
            <kits>
                <kit>
                    <pNum>801</pNum>
                    <qty>12</qty>
                </kit>
                <kit>
                    <pNum>901</pNum>
                    <qty>16</qty>
                </kit>
                <kit>
                    <pNum>851</pNum>
                    <qty>13</qty>
                </kit>
            </kits>
        </order>

    </orders>
</sports> 
```

我尝试运行的查询是获取某个订单的总定价（比如订单 65）。BaseX 中的查询是：

```
let $d:=doc("sports.xml")
let $o:=$d/sports/orders/order[@ono=65]
let $p:=$d/sports/parts/part
for $k in $o/kits/kit 
return <OrderCost>
({$k/qty})*({$p[@pno=$k/pNum]/price})
</OrderCost> 
```

我的输出：

```
<OrderCost>
(<qty>12</qty>)*(<price>8.99</price>)
</OrderCost>
<OrderCost>
(<qty>16</qty>)*(<price>9.99</price>)
</OrderCost>
<OrderCost>
(<qty>13</qty>)*(<price>33.00</price>)
</OrderCost> 
```

我无法将数量与相应的价格相乘，然后得到总和。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:12:08.773

创建元素时，会评估大括号内的所有内容（并且不会评估大括号外的任何内容）。由于您只在变量周围放置了大括号，因此只有这些被替换，但不执行乘法。

替换为这一行：

```
{ $k/qty * $p[@pno=$k/pNum]/price } 
```

# asp.net-mvc - 在 html 帮助器中从视图模型访问通用集合

> ID：16190967
> 
> 赞同：3
> 
> 时间：2013-04-24T11:37:02.047
> 
> 标签：asp.net-mvc, razor

我正在尝试编写一个 html 帮助程序，我想在其中迭代作为通用列表的已知类型属性，并输出所需的 HTML 内容。这是我如何构建视图模型以确保任何视图模型都符合帮助程序的概述；

**接口定义：**

```
public Interface ITheViewModelInterface<T> where T : class
{
    IEnumerable<T> Items { get; set; }
} 
```

**具体的抽象接口实现**（以便我可以定义默认值）：

```
public abstract class TheConcreteViewModelImplementation<T> : IViewModelInterface<T> where T : class
{
    public virtual IEnumerable<T> Items { get; set; }
} 
```

**视图模型：**

```
public class TheViewModel : TheConcreteViewModelImplementation<MyListType>
{ 

} 
```

什么是帮助程序定义，以便我可以访问基类中正确键入的项目列表？我不完全确定在这种情况下我需要一个强类型的助手，但我如何在助手调用中显式传递项目类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:45:13.713

在对这个问题进行了更多研究之后，我发现这个讨论为我的问题提供了一些答案（以及微软的一个相当惊人的声明！）；

[ASP.NET MVC 3 HtmlHelper 异常无法识别继承接口上的 ModelMetadata](https://stackoverflow.com/questions/4702483/asp-net-mvc-3-htmlhelper-exception-does-not-recognize-modelmetadata-on-inherited/15806809#15806809)

# android - Android如何从应用程序内部调用iptables

> ID：16190968
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:02.970
> 
> 标签：android, iptables

我可以

```
Runtime.getRuntime().exec("/system/bin/iptables --version"); 
```

这确实返回了版本号。

但是当我尝试操纵`iptables`电话时

```
Runtime.getRuntime().exec("su -c /system/bin/iptables -A OUTPUT -d " + IP + " -j DROP) 
```

什么都没发生。

我从`adb`shell 执行此操作，然后相同的命令有效。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:14:42.537

想通了，你需要root模拟器家伙！

# node.js - 使用 node.js 同步执行 git 命令

> ID：16190971
> 
> 赞同：2
> 
> 时间：2013-04-24T11:37:09.490
> 
> 标签：node.js, asynchronous, exec, sync

我目前正在编写一个 node.js 模块。我正在使用`var exec = require('child_process').exec;`node.js api。但我必须用 exec 连续执行 2 个 git 命令。我总是收到以下错误消息：

> 执行错误：错误：命令失败：致命：无法创建'~/Git/project/.git/index.lock'：文件存在。
> 
> 如果当前没有其他 git 进程在运行，这可能意味着之前该存储库中的 git 进程崩溃了。确保没有其他 git 进程正在运行并手动删除文件以继续。

我需要在第一个命令完成后执行第二个命令 - 关键字：sync 到目前为止，我使用[execSync](https://github.com/mgutz/execSync)进行了尝试，但它无法在 Windows 系统上运行，这是不行的。

目前我正在使用[asyncblock](https://github.com/scriby/asyncblock)模块，但我也给了我上面提到的错误。

当 updateList 中的两个值都为真时会发生这种情况，如果一个为假，则所有工作都按预期工作。

```
var loadPackageJson = function(updateList){

        if(updateList.foo === true){
            update('foo/package.json');
        }

        if (updateList.bar === true){
            update('bar/package.json');
        }       
    };

        var update = function(path){
                var packageJson = JSON.parse(fs.readFileSync(path,'utf8'));
                incrementVersion(packageJson);

                asyncblock(function(flow){
                    exec('git log -1 HEAD', flow.add('commit'));
                    var result = flow.wait('commit');
                    var commit=result.split('\n');
                    console.info(commit[0]);

                    setValueInPackageJson('commit', commit[0], packageJson);
                    writeUpdatedPackageJson(path, packageJson);

                    flow.wait();

                    exec('git add ' + path, flow.add('add'));
                    flow.wait('add'); //error is thrown here
                    console.info('added ' + path + ' successful to commit');
                });
    }; 
```

如何同步执行两个 git 命令？

/edit 我知道 SO 上的以下[线程](https://stackoverflow.com/questions/4443597/node-js-execute-system-command-synchronously)，但我帮助我不要解决这个问题。我在这个线程上找到了带有 asyncblock 的提示。

/edit2 控制台上的输出如下所示：

```
Version: 0.6.14
Version: 0.0.901
commit a3ed4fd8545b736aa9feea1bea52c5e0aa6a07ac
foo/package.json successfully updated
commit a3ed4fd8545b736aa9feea1bea52c5e0aa6a07ac
bar/package.json successfully updated 
```

在我看来，这看起来像是节点并行处理了`loadPackageJson`函数。

BR & 谢谢，我的贝克

# java - Best development environment using Spring MVC, JRebel for Java web app?

> ID：16190972
> 
> 赞同：2
> 
> 时间：2013-04-24T11:37:14.070
> 
> 标签：java, spring, web-applications, spring-mvc, jrebel

I looking for the current best combination of tools for developing a Java web app using Spring MVC (and Spring) and JRebel. Which IDE (which version, which plugins?), which other build tools (maven, gradle?)? Tomcat/Jetty? Embedded? How to fit them together so that the development process becomes quick and painless.

Has anybody got some tried and tested combinations that work really well? Any you would avoid?

I'm developing on Windows 7, using Java 7, looking to use latest production releases of libraries/frameworks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T12:27:23.957

据我所知，您真正想知道的是，如果您将 JRebel 与 Eclipse 一起使用，您是否能够立即看到更改。所以如果我是对的，那么 JRebel 会做你想做的工作。

> 使用 JRebel，您可以立即在浏览器中查看对 Java 代码的所有更改。保存并刷新！您的其他项目文件也是如此。

我已经使用过它，它会在您保存它后立即部署您的 java 文件，甚至不会弹出一些在 eclipse 中自动使用 build 时发生的窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:56:25.930

在我的项目中，我正在使用以下内容： 1.IDE-eclipse juno 最新版本。2.Server-jboss-5.1.0.GA 3.Framework-Spring MVC架构。4.front End-JSF 我认为这是任何Web应用程序项目的好配置

# python - Writing printed output to a file (python)

> ID：16190973
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:16.803
> 
> 标签：python, output

I have a problem with writing my printed output to a file.

My code:

```
list1 = [2,3]
list2 = [4,5]
list3 = [6,7]

for (a, b, c) in zip(list1, list2, list3):
    print a,b,c 
```

the output I get is:

```
>>> 
2 4 6
3 5 7
>>> 
```

but I have problems with saving this output, I tried:

```
fileName = open('name.txt','w')
for (a, b, c) in zip(list1, list2, list3):
    fileName.write(a,b,c) 
```

and various combinations like fileName.write(a+b+c) or (abc), but I am unsuccessful...

Cheers!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:39:00.273

问题是该[`write`](http://www.tutorialspoint.com/python/file_write.htm)方法需要 a `string`，而您给它一个`int`.

尝试使用[`format`](http://docs.python.org/3.3/library/stdtypes.html#str.format)和[`with`](http://www.python.org/dev/peps/pep-0343/)：

```
with open('name.txt','w') as fileName:
    for t in zip(list1, list2, list3):
        fileName.write('{} {} {}'.format(*t)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T11:38:44.450

如何使用格式字符串：

```
fileName.write("%d %d %d" % (a, b, c)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T19:31:38.827

您可以使用以下`print >> file`语法：

```
with open('name.txt','w') as f:
    for a, b, c in zip(list1, list2, list3):
        print >> f, a, b, c 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T11:39:16.310

使用`with`. 可能您的文件句柄未关闭或未正确刷新，因此文件为空。

```
list1 = [2,3]
list2 = [4,5]
list3 = [6,7]

with open('name.txt', 'w') as f:
    for (a, b, c) in zip(list1, list2, list3):
        f.write(a, b, c) 
```

您还应该注意，这不会在每次写入结束时创建新行。要使文件的内容与您打印的内容相同，您可以使用以下代码（选择一种写入方法）：

```
with open('name.txt', 'w') as f:
    for (a, b, c) in zip(list1, list2, list3):
        # using '%s' 
        f.write('%s\n' % ' '.join((a, b, c)))
        # using ''.format()
        f.write('{}\n'.format(' '.join((a, b, c)))) 
```

# java - 为什么 putHashmap 不按顺序显示数据？

> ID：16190974
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:19.533
> 
> 标签：java, mysql, hashmap

我必须编写一个程序，从 Excel 文件中读取数据并将这些数据加载到数据库中的表中。该表将具有 excel 文件的名称，表的字段将是 excel 文件第一行中的数据。我已经编写了代码来读取 excel 文件并使用我想要的名称创建表。我还设法将数据存储在表中。但是对于这两个操作，创建字段和将数据存储在表中，我使用的是 Hashmap。但是我在表格中得到的结果与我的 excel 文件中的序列不同。

例如我的excel文件中的数据是：

身份证 姓名 工资

5 克里斯汀 2349000

6 宝莲娜 1000

7 劳拉 12587458

8 电喷 34567

43 吉姆 45878

但是当我运行我的程序时，我在我的基础中得到的是：

姓名 身份证 工资

2349000 5 克里斯汀

宝莲娜 6 1000

等数据混淆了。

我的程序如下。谁能帮助我为什么会在我的结果中发生这种情况？先感谢您。

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import java.util.Iterator;
import java.util.List;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.commons.lang3.StringUtils;
import org.apache.poi.ss.usermodel.Cell;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class readexcel {
    static HashMap<String, Integer> tFields = new HashMap();
    static HashMap[] tData;

    public static void main(String[] args) throws Exception {

        Class.forName("com.mysql.jdbc.Driver");
        Connection con = (Connection) DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/kainourgia", "root", "root");
        Statement stmt = con.createStatement();
        // String filename = "C:\\Users\\Efi\\Documents\\test6.xls";
        String fullPath = "C:\\Users\\Efi\\Documents\\test9.xls";
        String Path = "C:\\Users\\Efi\\Documents\\";
        String filename = "test9.xml";
        String[] parts = filename.split("\\.");
        String tablename = parts[0];

        //Create an ArrayList to store the data read from excel sheet.
        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            //Create a FileInputStream that will be use to read the
            // excel file.
            fis = new FileInputStream(fullPath);
            //Create an excel workbook from the file system
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            //Get the first sheet on the workbook.
            HSSFSheet sheet = workbook.getSheetAt(0);

            //store the data read on an ArrayList so that we can printed the
            // content of the excel to the console.
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();

                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }
                sheetData.add(data);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }

        showExcelData(sheetData);
        tFields = parseExcelColumnTitles(sheetData);
        String str = getCreateTable(con, tablename, tFields);
        tData = parseExcelColumnData(sheetData);
        fillTable(con, tablename, tData);
    }

    // Iterates the data and print it out to the console.
    private static void showExcelData(List sheetData) {
        // HashMap<String, String> tableFields = new HashMap();
        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
            for (int j = 0; j < list.size(); j++) {
                Cell cell = (Cell) list.get(j);
                if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
                    System.out.print(cell.getNumericCellValue());
                } else if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
                    System.out.print(cell.getRichStringCellValue());
                } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
                    System.out.print(cell.getBooleanCellValue());
                }
                if (j < list.size() - 1) {
                    System.out.print(", ");
                }
            }
            System.out.println("");
        }
    }

    @SuppressWarnings( { "unchecked", "unused" })
    private static HashMap parseExcelColumnTitles(List sheetData) {
        // εδώ διαβάζω μόνο την γραμμή 0 κάθε φύλλου για να πάρω τους τίτλους
        // των πεδίων

        List list = (List) sheetData.get(0);
        HashMap<String, Integer> tableFields = new HashMap(list.size());
        for (int j = 0; j < list.size(); j++) {
            Cell cell = (Cell) list.get(j);
            tableFields.put(cell.getStringCellValue(), cell.getCellType());
        }

        return tableFields;

    }

    @SuppressWarnings( { "unchecked", "unused" })
    private static HashMap[] parseExcelColumnData(List sheetData) {
        // εδω πρέπει να μπει μια επανάληψη, από την γραμμή 1 μέχρι την
        // τελευταία γραμμή του κάθε φύλλου
        HashMap[] tousRows = new HashMap[sheetData.size() - 1];
        for (int rowCounter = 1; rowCounter < sheetData.size(); rowCounter++) {

            List list = (List) sheetData.get(rowCounter);

            HashMap<String, Integer> tableFields = new HashMap(list.size());
            String str;
            String[] tousFields = new String[list.size()];
            int i = 0;

            for (int j = 0; j < list.size(); j++) {
                Cell cell = (Cell) list.get(j);
                if (cell != null) {
                    if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
                        tableFields.put(String.valueOf(cell
                                .getNumericCellValue()), cell.getCellType());
                    } else if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
                        tableFields.put(cell.getStringCellValue(), cell
                                .getCellType());
                    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
                        tableFields.put(String.valueOf(cell
                                .getBooleanCellValue()), cell.getCellType());
                    }
                }

            }
            tousRows[rowCounter - 1] = tableFields;
        }

        return tousRows;

    }

    private static String getCreateTable(Connection con, String tablename,
            HashMap<String, Integer> tableFields) {
        Iterator iter = tableFields.keySet().iterator();
        Iterator cells = tableFields.keySet().iterator();
        String str = "";
        String[] allFields = new String[tableFields.size()];
        int i = 0;
        while (iter.hasNext()) {
            String fieldName = (String) iter.next();
            Integer fieldType = (Integer) tableFields.get(fieldName);

            switch (fieldType) {
            case Cell.CELL_TYPE_NUMERIC:
                str = fieldName + " INTEGER";
                break;
            case Cell.CELL_TYPE_STRING:
                str = fieldName + " VARCHAR(255)";
                break;
            case Cell.CELL_TYPE_BOOLEAN:
                str = fieldName + " INTEGER";
                break;
            }
            allFields[i++] = str;
        }
        try {
            Statement stmt = con.createStatement();
            // try
            // {
            // System.out.println( "Use the database..." );
            // stmt.executeUpdate( "USE kainourgia;" );
            // }
            // catch( SQLException e )
            // {
            // System.out.println( "SQLException: " + e.getMessage() );
            // System.out.println( "SQLState: " + e.getSQLState() );
            // System.out.println( "VendorError: " + e.getErrorCode() );
            // }
            try {
                String all = org.apache.commons.lang3.StringUtils.join(
                        allFields, ",");
                String createTableStr = "CREATE TABLE IF NOT EXISTS "
                        + tablename + " (" + all + ")";

                System.out.println("Create a new table in the database");
                stmt.executeUpdate(createTableStr);
            } catch (SQLException e) {
                System.out.println("SQLException: " + e.getMessage());
                System.out.println("SQLState:     " + e.getSQLState());
                System.out.println("VendorError:  " + e.getErrorCode());
            }
        } catch (Exception e) {
        }
        return str;
    }

    private static void fillTable(Connection con, String fieldname,
            HashMap[] tableData) {
        for (int row = 0; row < tableData.length; row++) {
            HashMap<String, Integer> rowData = tableData[row];
            Iterator iter = rowData.entrySet().iterator();
            String str;
            String[] tousFields = new String[rowData.size()];
            int i = 0;
            while (iter.hasNext()) {
                Map.Entry pairs = (Map.Entry) iter.next();
                Integer fieldType = (Integer) pairs.getValue();
                String fieldValue = (String) pairs.getKey();
                switch (fieldType) {
                case Cell.CELL_TYPE_NUMERIC:
                    str = fieldValue;
                    break;
                case Cell.CELL_TYPE_STRING:
                    str = "\'" + fieldValue + "\'";
                    break;
                case Cell.CELL_TYPE_BOOLEAN:
                    str = fieldValue;
                    break;
                default:
                    str = "";
                    break;
                }
                tousFields[i++] = str;
            }

            try {
                Statement stmt = con.createStatement();
                System.out.println("Use the table");
                String all = org.apache.commons.lang3.StringUtils.join(
                        tousFields, ",");
                String sql = "INSERT INTO " + fieldname + " VALUES (" + all
                        + ")";
                stmt.executeUpdate(sql);
            } catch (SQLException e) {
                System.out.println("SQLException: " + e.getMessage());
                System.out.println("SQLState: " + e.getSQLState());
                System.out.println("VendorError: " + e.getErrorCode());
            }

        }

        // return str;
    }

    private Statement createStatement() {
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T11:39:24.437

[LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)而不是`HashMap`正是您要寻找的。

来自 Javadoc：`HashMap`“类不保证映射的顺序；特别是，它不保证顺序会随着时间的推移保持不变。”

如果您需要一致的排序，您可以使用`LinkedHashMap`（用于插入/访问顺序）或`TreeMap`（用于比较顺序）。请注意，这些维护键的顺序，而不是值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:39:22.807

之所以会发生这种情况，是因为这`HashMap`就是设计的工作方式。正如[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)所说：

> *“此类不保证地图的顺序”*

如果您有什么可以按插入顺序迭代的地图，请使用`LinkedHashMap`.

# c++ - Does a two-dimensional array of character pointers need to be terminated by two null?

> ID：16190976
> 
> 赞同：2
> 
> 时间：2013-04-24T11:37:24.680
> 
> 标签：c++

The other day, I was reading a book where I found this code:

```
char *words[][40] = {"Goat", "A herbivore",
                     "Dog", "An omnivore",
                     "Fox", "A carnivore",
                     "Bear", "An omnivore"
                     "", ""}; 
```

And the book said, "notice, the list must be terminated by two nulls". But when I compiled this code without the nulls, it compiled and worked just as desired. Please explain if the nulls are of any use. I am quite new to C(++), so please elaborate.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T11:39:12.433

`"", ""`用作标记值，以指示数组的结尾，因为未指定数组的维数，而是从初始化程序推导出来的。注意那些不是`NULL`s，而是空字符串。遍历此数组的循环将用于`strlen(words[i])`知道它正在访问数组中的最后一个元素并防止访问超出数组的范围。

例如：

```
for (int i = 0; strlen(words[i]); i++)
{
} 
```

可以使用而不是使用空字符串`NULL`来避免`strlen()`调用来检测数组中的最后一个元素：

```
const char *words[] = {"Goat", "A herbivore",
                       "Dog", "An omnivore",
                       "Fox", "A carnivore",
                       "Bear", "An omnivore",
                       NULL};

for (int i = 0; words[i]; i++)
{
} 
```

* * *

可以确定 中的元素数量`words`，即使维度没有明确说明使用`sizeof(words)/sizeof(words[0])`，但如果数组被传递给函数，它会衰减到指向数组第一个元素的指针，并且计算不再正确，并且要么数组中必须存在标记值，或者必须将数组中的元素数量提供给函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T11:40:00.153

出于技术原因，该列表不必以两个空值终止。

但是如果你的代码不知道列表的长度，你可以遍历它直到它被空元素终止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:40:29.457

您发布的代码不会编译。你确定你是从书里抄来的吗？

如果我们添加明显缺失的逗号，我们最终会得到等价的

```
char* words[1][40] = 
{
    "Goat"
    "A herbivore",
    "Dog"
    "An omnivore",
    "Fox"
    "A carnivore",
    "Bear"
    "An omnivore",
    "",
    "",
    NULL,
    //  this last line repeated 30 times...
}; 
```

我怀疑这也是我们的意图。（它会生成一个以 30 个空值终止的列表，而不仅仅是 2 个。）

我怀疑这意味着什么也没有`*`：

```
char words[][2][40] =
{
    "Goat", "A herbivore",
    "Dog", "An omnivore",
    "Fox", "A carnivore",
    "Bear", "An omnivore",
    "", ""
}; 
```

这导致数组 [10] 的数组 [40] 为`char`。当然，最好清楚地表明这一点：

```
char words[][2][40] =
{
    { "Goat", "A herbivore" },
    { "Dog" , "An omnivore" },
    { "Fox" , "A carnivore" },
    { "Bear", "An omnivore" },
    { ""    , ""            },
}; 
```

关于“null”的含义仍然存在问题。如果它是一个空指针，那么在这个版本中没有（也不可能有）任何指针，因为没有指针。如果是空字符 ( `'\0'`)，则有 10 个，每个字符串一个。如果它是一个空字符串，那么作者使用了一个最不寻常和最令人困惑的术语；如果他的意思是空字符串，他应该说空字符串。

作为两个需要的东西：我想目的是使用哨兵。写这个（在 C 或 C++ 中）的常用方法 *是*使用指针，并编写如下内容：

```
char const* const words[][2] =
{
    { "Goat", "A herbivore" },
    { "Dog" , "An omnivore" },
    { "Fox" , "A carnivore" },
    { "Bear", "An omnivore" },
    { NULL  , NULL          }
}; 
```

在这种情况下，我可能会使用两个空值，但初始化数组的最后一行可以是`{}`、`{ NULL }`或`{ NULL, NULL }`; 它们都会对编译器产生相同的结果。

即使是非指针版本，*一个*空字符串就足够了。编译器也会用空字符串填充所有附加值。

最后，关于为什么需要空指针或空字符串：在 C 中，它们经常被用作哨兵：你会循环直到遇到一个：

```
for ( char const* const (*p)[2] = words; (*p)[0] != NULL; ++ p ) {
    std::cout << (*p)[0] << " - " << (*p)[1] << std::endl;
} 
```

在 C++ 中，您几乎从不使用哨兵，因为您可以编写如下内容：

```
for ( char const* const (*p)[2] = begin( words );
        p != end( words );
        ++ p ) {
    std::cout << (*p)[0] << " - " << (*p)[1] << std::endl;
} 
```

在 C++11 中，这将是`std::begin`and `std::end`，但当然，在 C++11 之前，每个人在他们的个人工具包中都有它们的实现。在 C++11 中，您还可以使用`auto`：

```
for ( auto p = begin( words ); p != end( words ); ++ p ) {
    std::cout << (*p)[0] << " - " << (*p)[1] << std::endl;
} 
```

但是，我不确定这是否能给我们带来很多好处。使用的时候还是要注意复杂的类型。（`auto`当您拥有基本上易于使用但难以拼写的类型时，确实会购买很多，例如迭代器。）

最后，当然，无论是在 C 中还是在 C++ 中，都不会有人为此使用二维数组。我们将定义一个结构：

```
struct Mapping
{
    char const* animalName;
    char const* eatingType;
};

Mapping const map[] = 
{
    { "Goat", "A herbivore" },
    { "Dog" , "An omnivore" },
    { "Fox" , "A carnivore" },
    { "Bear", "An omnivore" },
    { NULL  , NULL          }
};

for ( Mapping const* p = map; p->animalName != NULL; ++ p ) {
    //  ...
} 
```

（当然，在 C++ 中使用`begin`and`end`而不是哨兵。）

顺便说一句：除非你严重错误地引用了这本书，否则就把它扔掉。作者显然既不懂 C 也不懂 C++。

# java - 来自 BaseAction 类型的方法 getRequest() 指的是缺少的类型 HttpServletRequest

> ID：16190983
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:40.330
> 
> 标签：java, servlets

```
java.lang.Error: Unresolved compilation problem: 
The method getRequest() from the type BaseAction 
refers to the missing type HttpServletRequest 
```

这是方法：

```
public String list(){

    QueryFilter filter=new QueryFilter(getRequest());
    filter.addSorted("rowNumber", "asc");
    List<Section> list= sectionService.getAll(filter);

    Type type=new TypeToken<List<Section>>(){}.getType();
    StringBuffer buff = new StringBuffer("{success:true,'totalCounts':")
    .append(filter.getPagingBean().getTotalItems()).append(",result:");

    Gson gson=new GsonBuilder().excludeFieldsWithoutExposeAnnotation().create();
    buff.append(gson.toJson(list, type));
    SysConfig sectionColumn = sysConfigService.findByKey("sectionColumn");
    buff.append(",columnType:");
    if(sectionColumn!=null){
        buff.append(sectionColumn.getDataValue());
    }else{
        buff.append("2");
    }
    buff.append("}");

    jsonString=buff.toString();

    return SUCCESS;
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-04-24T11:39:18.183

将 servlet api 添加到您的类路径。这将解决问题

# sql-server - 从存储过程返回结果集

> ID：16190986
> 
> 赞同：0
> 
> 时间：2013-04-24T11:37:41.627
> 
> 标签：sql-server, stored-procedures

假设我为存储过程做了必要的声明并开始存储过程

```
BEGIN

IF (@TYPE = 0)  
    BEGIN
        SELECT @AMOUNT = ((@TOTAL_MONEY )/(12))
        SELECT @INTEREST_AMOUNT = 0           
        SELECT @TOTAL_MONEY AS TOTAL_MONEY , @AMOUNT AS AMOUNT , @INTEREST_AMOUNT AS INTEREST_AMOUNT , DATEADD(m,0,@BEGIN_DATE) AS DATE_

        @ORDER_NO=1 
        WHILE ((@ORDER_NO) <= ((@COUNT) -1 ) )  
            BEGIN   
                SELECT @INTEREST_AMOUNT =  (@TOTAL_MONEY - (@AMOUNT))* (@INTEREST_RATE/100)
                SELECT @MONEY AS MONEY_ , @AMOUNT AS PROMISE_AMOUNT , @INTEREST_AMOUNT AS INTEREST_AMOUNT , DATEADD(m,@COUNT,@BEGIN_DATE) AS DATE_
                SELECT @COUNT=@COUNT -1
            END                     
    END 
 END 
```

问题是：我想转一个结果集，但这个过程逐行转，所以我制作了一个临时表并选择如下，但我不想使用临时表，而只是从我的存储过程中返回一个结果集

```
DECLARE @TEMP TABLE
(

    TOTAL_MONEY decimal (19,3), 
    AMOUNT decimal (19,3), 
    INTEREST_AMOUNT decimal (19,3), 
    DATE_ date          

);
INSERT @TEMP  EXEC --HERE I CALL MY STORED PROCESURE with parameters IE: spinterest ..., ...., ...
SELECT * FROM @TEMP; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:10:06.127

将代码的最后两行更改为以下一行：

```
EXEC --HERE I CALL MY STORED PROCESURE with parameters IE: spinterest ..., ...., ... 
```

我不知道你的参数是什么样的，但是，你说过它们已经设置好了。

# php - 如果列名与变量匹配，则仅打印行列

> ID：16190995
> 
> 赞同：0
> 
> 时间：2013-04-24T11:38:05.973
> 
> 标签：php, mysql

我有一个从 mysql 结果生成表的脚本，我的目标是根据包含我要显示的列名称的变量使列完全动态显示。我已经使用以下代码以这种方式生成表格标题：

```
$search_field_names=explode(',', $search_field_names)    
for($i=0, $count=count($search_field_names);$i<$count;$i++) {
        echo ('<th>'.$search_field_names[$i].'</th>');
    } 
```

其中 $search_field_names 是一个逗号分隔的值字符串（例如 fristname、lastname、user_id 等）。

举个例子，假设上面的字符串包含 7 个我想要显示的列的名称，如下所示：

```
$search_field_names=('firstname,lastname,dob,company,position,user_id,date_added') 
```

然后，第一个代码片段将生成一个带有这 7 个名称的表格标题。

然后是棘手的部分：存储所有记录的数据库表共有 22 列。通过执行与第一个片段完全相同的操作来打印记录，结果将是它打印该表中的前 7 列，这不一定是我想要的。

这是我获取记录的方式（这显然是在脚本中的上述片段之后）：

```
$query=mysqli_query($mysqli, "SELECT * FROM table WHERE column_name1='$search_query' AND column_name2='$search_query' etc...);
while($row=mysqli_fetch_assoc($query)) {
echo('<tr>');
for($i=0, $count=count($search_field_names);$i<$count;$i++) {
        echo ('<td>'.$row[$i].'</td>');
    }
echo('</tr>'); 
```

所以，我想要实现的是只获取数据库中的列，这些列对应于变量 $search_field_names 中设置的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:57:54.820

正如 Haider 所建议的，两种解决方案使用您的 $search_field_names 变量来调整您的查询：

```
$query=mysqli_query($mysqli, "SELECT ".implode(",", $search_field_names)." FROM table");
while($row=mysqli_fetch_assoc($query)) {
    echo('<tr>');
    for($i=0, $count=count($search_field_names);$i<$count;$i++) {
        echo ('<td>'.$row[$i].'</td>');
    }
    echo('</tr>');
} 
```

或者，因为你正在做一个 mysqli_fetch_assoc，这应该工作：

```
$query=mysqli_query($mysqli, "SELECT * FROM table");
while($row=mysqli_fetch_assoc($query)) {
    echo('<tr>');
    for($i=0, $count=count($search_field_names);$i<$count;$i++) {
        // Using header name as the key to the column
        echo ('<td>'.$row[ $search_field_names[$i] ].'</td>');
    }
    echo('</tr>');
} 
```

编辑：到目前为止，我们只看到巧妙地循环 $search_field_names 以生成结果表。您在上一条评论中询问我们是否可以在构建查询约束时使用相同的技巧。一个问题是，您*似乎*想直接在查询中使用 $_POST。请不要这样做，这是[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的来源。另一个问题是，我们不可能永远聪明。如果所有字段都属于同一类型，我们可以这样做，但是如果您的搜索字段之一是日期或整数，那么编写和调试将变得非常困难。

所以，如果你真的*需要*聪明地处理你的查询，你可以这样做（假设所有搜索字段都是字符串值）：

```
<?php
// Assuming you have a $post_array like so, where inputs have the same names as the column names in the database
// $post_array = array('username' => 'T', 'url' => 'http');

// Build constraints of the form column_name LIKE 'value%'
$constraints = array();
foreach ($post_array as $key => $value) {
    $constraints[] = "$key LIKE ?";
    $post_array[$key] = $value.'%';
}

// Build a query selecting the columns from $post_array, with corresponding constraints
// Note : replace " AND " by " OR " if you want the query to match ANY parameter.
$query_text = "SELECT ".implode(", ", array_keys($post_array))." FROM table WHERE ".implode(" AND ", $constraints);

// Prepare this query, we don't want SQL injections!
$query = $mysqli->prepare($query_text);

$bind = array();
foreach ($post_array as $key => $value) {
    // We need to use our bind variables outside the scope of this loop, so we create them in $GLOBALS
    $GLOBALS[$key] = $value;
    // Array of references to our bind variables.
    $bind[] = &$$key;
}
// Binding the parameters : we need as many 's' as there are inputs
$bindtypes = str_repeat('s', count($post_array))
call_user_func_array(array($query, 'bind_param'), array_merge( array($bindtypes), $bind ));
// Binding the retrieved columns
echo call_user_func_array(array($query, 'bind_result'), $bind);
$query->execute();

// Header row
echo '<tr>';
foreach ($post_array as $key => $value) {
    echo '<th>'.$key.'</th>';
}
echo '</tr>';

// Result rows
while ($query->fetch()) {
    echo('<tr>');
    foreach ($post_array as $key => $value) {
        echo '<td>', $$key, '</td>';
    }
    echo('</tr>');
}
?> 
```

# api - REST API - 通用或特定资源

> ID：16190999
> 
> 赞同：3
> 
> 时间：2013-04-24T11:38:13.540
> 
> 标签：api, rest

我目前正在从事一个项目，该项目具有发送东西的资源。

假设 URI 看起来像这个[http://api.somename.com/thingssender](http://api.somename.com/thingssender)，只有 POST 动词。

随着时间的推移，这已成为一种资源，在有效负载中具有几个“可选”元素，这些元素仅适用于发送一种类型的东西。

目前，此资源处理两种不同类型的事物（ThingA 和 ThingB），但子元素中的内容也会有所不同。因此，例如，您可以向一群人发送许多东西或一件东西。

出现了需要 ThingC 的要求。鉴于此端点将来可能会在负载中使用可选数据的 ThingD，我开始质疑这种“包罗万象”的资源。

我担心资源的复杂性不仅对开发人员而且对使用 REST API 的客户端都会不断增加。对我来说，这只会造成混乱，而不是创造最好的体验（同样对于开发人员和客户来说）。

人们对创建通用端点与特定端点有何想法？

因此，用于发送 ThingC 的特定端点（[http://api.somename.com/ThingsCSender](http://api.somename.com/ThingsCSender)）。它对我来说是单一的责任，并且仔细考虑底层实现不应该导致任何重复的功能。

（给出的例子不是项目中的真实概念或资源：p！）

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:46:44.933

您是正确的，每个资源都应该有自己的 URI。有关更多信息，如果有兴趣，stackoverflow 上有一些很好的答案：

[了解 REST：动词、错误代码和身份验证](https://stackoverflow.com/questions/2001773/understanding-rest-verbs-error-codes-and-authentication/2022938#2022938)

[RESTful 编程到底是什么？](https://stackoverflow.com/questions/671118/what-exactly-is-restful-programming)