# StackOverflow 问答 13547000-13547999

# php - 列出 sql 到 html 页面上的所有用户

> ID：13547000
> 
> 赞同：1
> 
> 时间：2012-11-25T00:12:00.457
> 
> 标签：php, html, mysql

如何在 sql 到 html 页面上列出所有用户？我用了这段代码；

```
$query = mysql_query("SELECT username FROM Users WHERE id<'".$row['id']."'");
$rowtwo = mysql_fetch_array($query) or die();
echo '<table>
  <tr>
  <td><font size="2" face="Lucida Sans Unicode" color=#EBEBEB>' .$rowtwo['username'].'</td>
  </tr>
  </table>'; 
```

注意：$row['id'] 是当前用户 ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:18:56.177

试试这样：

从数据库中获取所有用户（以防你得到所有用户，否则使用你的查询）：

```
$query = mysql_query("SELECT username FROM Users"); 
```

每个用户都应该打印在他自己的行中：

```
echo '<table>';
while($rowtwo = mysql_fetch_array($query)){
  echo '<tr>
        <td><font size="2" face="Lucida Sans Unicode" color=#EBEBEB>' .$rowtwo['username'].'</td>
        </tr>';
}
echo '</table>'; 
```

While 循环对于只从数据库中获取一行很重要。

# java - 从 Java Swing 更新 GoogleMap 静态图像？

> ID：13547004
> 
> 赞同：0
> 
> 时间：2012-11-25T00:12:28.467
> 
> 标签：java, swing, google-maps

我可以使用以下方法在我的摇摆应用程序中显示图像：

```
double longitude = 10;
double lat = 20 
```

然后我打印图像：

```
JFrame frame = new JFrame();
frame.add(mapImage); 
```

我现在改变了它：

```
public Image map() {
URL map = new URL("http://maps.google.com/staticmap?center="+long+","+longitude +"&zoom=14&size=500x500");
Image map = ImageIO.read((map));
return map;
}

JFrame frame = new JFrame();
frame.add(map); 
```

然后我试图通过调用 map(); 来刷新地图。然后重绘（）；但是它仍然无法正常工作=[

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:22:30.923

我玩过，好像没啥问题。。。

![带我去月球](../Images/5e13e9df6f156f4e1b8f9e4aea623c1f.png)

（我确实改变了缩放级别，所以我并没有一直只得到“蓝色”）

```
public class TestGoogleMaps {

    public static void main(String[] args) {
        new TestGoogleMaps();
    }

    public TestGoogleMaps() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                final MapPane mapPane = new MapPane();
                JButton random = new JButton("Random");
                random.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        String lat = Double.toString((Math.random() * 180) - 90);
                        String longt = Double.toString((Math.random() * 360) - 180);
                        new LoadMapTask((JButton)e.getSource(), mapPane, lat, longt).execute();
                        ((JButton)e.getSource()).setEnabled(false);
                    }
                });

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(mapPane);
                frame.add(random, BorderLayout.SOUTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class MapPane extends JPanel {

        private BufferedImage mapImage;
        private String latitude;
        private String longitude;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(500, 500);
        }

        public void setMap(String lat, String log, BufferedImage image) {
            mapImage = image;
            latitude = lat;
            longitude = log;
            repaint();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (mapImage != null) {
                int x = (getWidth() - mapImage.getWidth()) / 2;
                int y = (getHeight() - mapImage.getHeight()) / 2;
                g.drawImage(mapImage, x, y, this);
                FontMetrics fm = g.getFontMetrics();
                g.drawString(latitude + "x" + longitude, 0, fm.getAscent());
            }
        }

    }

    public class LoadMapTask extends SwingWorker<BufferedImage, Object> {

        private String latitude;
        private String longitude;
        private MapPane mapPane;
        private JButton master;

        public LoadMapTask(JButton master, MapPane mapPane, String latitude, String lonitude) {
            this.mapPane = mapPane;
            this.latitude = latitude;
            this.longitude = lonitude;
            this.master = master;
        }

        @Override
        protected BufferedImage doInBackground() throws Exception {
            BufferedImage mapImage = null;
            try {
                URL map = new URL("http://maps.google.com/staticmap?center=" + latitude + "," + longitude + "&zoom=5&size=500x500");
                System.out.println(map);
                mapImage = ImageIO.read(map);
            } catch (Exception exp) {
                exp.printStackTrace();
            }
            return mapImage;
        }

        @Override
        protected void done() {
            try {
                mapPane.setMap(latitude, longitude, get());
            } catch (InterruptedException | ExecutionException ex) {
                ex.printStackTrace();
            }
            master.setEnabled(true);
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:34:19.037

我一定猜你有这样的事情：

```
longitude = newLongitude;
lat = newLatitude;
// here
repaint(); 
```

这不会有任何影响，因为`map`并且`mapImage`不会改变。尝试在我`// here`发表评论的地方插入以下代码：

```
map = new URL("http://maps.google.com/staticmap?center="+longitude+","+lat +"&zoom=14&size=500x500");
mapImage = ImageIO.read(map); 
```

# batch-file - 修复变量=密码批处理文件中的变量

> ID：13547005
> 
> 赞同：0
> 
> 时间：2012-11-25T00:12:39.690
> 
> 标签：batch-file, passwords, batch-processing

在这个批处理文件中，我试图创建一个程序，用户可以在其中输入他或她想要的密码，并在他们打开或关闭批处理文件时使用它。问题是我无法获取用户密码和（在：MDLOCKER 和：UNLOCK）以及脚本的解锁部分工作。当最终让它工作时，它接受任何密码
，如果你能提供帮助，那将非常感谢。

```
enter code here@ECHO OFF
prompt Filelocker`enter code here`
:START
echo what do you want to do?  (insert number)
echo 1 Lock current folder
echo 2 Unlock current folder
echo 3 Make new locked folder

set/p "cho=>"
if %cho%==1 goto CONFIRM
if %cho%==2 goto UNLOCK
if %cho%==3 goto NEW
echo not valid
goto start

: NEW
title Folder Locked files
if EXIST "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}" goto ALREADY
if NOT EXIST Locker goto MDLOCKER

:ALREADY
echo folder already exist!
echo try unlocking if folder can not be found
pause
goto START

:CONFIRM
echo Are you sure u want to Lock the folder(Y/N)
set/p "cho=>"
if %cho%==Y goto LOCK
if %cho%==y goto LOCK
if %cho%==n goto END
if %cho%==N goto END
echo Invalid choice.
goto CONFIRM

:LOCK
ren Locker "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
attrib +h +s "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
echo Folder locked
goto end

:MDLOCKER
md Locker
echo Locked folder created....
echo folder is now created 
echo enter password for your file.
set/p 1%=
echo password accepted 
goto start

:UNLOCK
echo Enter password to Unlock folder
set/p "pass=>"
if NOT %pass%==%1% goto FAIL
attrib -h -s "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
ren "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}" Locker
echo Folder Unlocked successfully
goto End

:FAIL
echo Invalid password
echo 2 MORE TRYS LEFT
pause
goto 

:End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:13:28.893

我不认为你可以改变位置参数`%1`...... `%9`尝试将密码保存到变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:30:38.463

问题在这里：

```
set/p 1%= 
```

你为什么这样做？

您不能使用像 var-name 这样的特殊 var。而且您不能在 var-name 的开头使用数字。

并且您可以使用命令 Choice 而不是您正在使用的所有 IF 语句：

```
@ECHO OFF
prompt Filelocker`enter code here`
:START
echo what do you want to do?  (insert number)
echo 1 Lock current folder
echo 2 Unlock current folder
echo 3 Make new locked folder

choice /C 123 /M "choose an option: "
IF %ERRORLEVEL% EQU 1 (goto :CONFIRM)
IF %ERRORLEVEL% EQU 2 (goto :UNLOCK)
IF %ERRORLEVEL% EQU 3 (goto :NEW)

:NEW
title Folder Locked files
if EXIST "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}" (
    echo folder already exist!
    echo try unlocking if folder can not be found
    pause
    goto :START
)
if NOT EXIST "Locker" (goto :MDLOCKER)

:CONFIRM
choice /C YN /M "Are you sure u want to Lock the folder? "
IF %ERRORLEVEL% EQU 1 (goto :LOCK)
IF %ERRORLEVEL% EQU 2 (goto :END)

:LOCK
ren Locker "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
attrib +h +s "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
echo Folder locked
goto :end

:MDLOCKER
md "Locker"
echo Locked folder created....
echo folder is now created 
echo enter password for your file.
set/p "VAR=>> "
echo password accepted 
goto :start

:UNLOCK
echo Enter password to Unlock folder
set/p "pass=>> "
if NOT "%pass%"=="%VAR%" goto FAIL
attrib -h -s "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}"
ren "Control Panel.{21EC2020-3AEA-1069-A2DD-08002B30309D}" Locker
echo Folder Unlocked successfully
goto End

:FAIL
echo Invalid password
echo 2 MORE TRYS LEFT
pause
goto :UNLOCK

:End 
```

# php - 通过ajax获取数据不起作用

> ID：13547006
> 
> 赞同：-1
> 
> 时间：2012-11-25T00:13:00.243
> 
> 标签：php, javascript, jquery, ajax

我必须从数据库中获取数据，但我的脑袋坏了，因为我没有发现任何错误，但我不知道为什么它不起作用！

JavaScript

```
var editdata = document.getElementById('editdata');
editdata.onclick = function() {
    $.ajax({
        url: "sendata.php",
        data :{ length : length, age : age, },
        type : 'POST',
        success: function(output_data){
            $('#mydata').html(output_data);
        }
    });
} 
```

PHP

```
if (isset($_POST['editdata'])) {
    $sql4 = $db->setQuery(
        "SELECT * FROM people WHERE userid = "
        . $userid2 . " AND inf_id = " . $_SESSION['name'] . " "
    );
    $result4 = $sql4->loadAssocList() ;
    $output_data = "";
    $output_data .= "<table width='600' border='1' >";
    foreach ($result4 as $row4) {
        $output_data .= "<tr><td>".$row4['age'];
        $output_data .= "</td><td>".$row4['length'] ;
        $output_data .= "</td><td><input id ='".$row4['id']
            . "' type='button' value='Delete'/>";
        $output_data .= "</td></tr>" ;
    }
    $output_data .= "</table>" ;
    echo $output_data ;
}
echo "failure"; 
```

但如果我这样做，我只会收到一条`failure`消息：

```
success: function(msg){
    alert(msg);
    $('#mydata').html(output_data);
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:39:44.070

您正在`{ length : length, age : age }`使用 POST 方法发送。

这意味着只有`$_POST['lenght']`and`$_POST['age']`被设置，因此`(isset($_POST['editdata']))`返回 false 并且不执行 if 块。

你的意思：

```
if (isset($_POST['legth']) and isset($_POST['age'])) {
    ...
} 
```

您还可以注意到`echo "failure;"`每次都执行。也许你的意思是：

```
if (isset($_POST['editdata'])) {
    ...
} else {
    echo "failure";
} 
```

?

# jquery - fancybox2 / fancybox 导致页面跳转到顶部

> ID：13547007
> 
> 赞同：108
> 
> 时间：2012-11-25T00:13:06.103
> 
> 标签：jquery, css, fancybox-2

我已经在开发网站上实现了 fancybox2。

当我使用花式框（单击链接等）时，整个 html 会移到它后面 - 并移到顶部。我在另一个演示中运行良好，但是当我将相同的代码拖到这个项目时，它会跳到顶部。不仅有内联 div 的链接，还有简单的图片库。

有没有人经历过这个？

* * *

## 回答 #1

> 赞同：337
> 
> 时间：2013-03-09T03:37:38.830

这实际上可以通过 Fancybox 2 中的助手来完成。

```
$('.image').fancybox({
  helpers: {
    overlay: {
      locked: false
    }
  }
}); 
```

[http://davekiss.com/prevent-fancybox-from-jumping-to-the-top-of-the-page/](http://davekiss.com/prevent-fancybox-from-jumping-to-the-top-of-the-page/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-07-03T21:10:22.887

Jordanj77 是正确的，但最简单的解决方案是转到样式表`jquery.fancybox.css`并注释掉`overflow: hidden !important;`部分中的行`.fancybox-lock`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-25T19:24:59.157

我意识到这是一个老问题，但我认为我已经找到了一个很好的解决方案。问题是花哨的盒子会改变 body 的溢出值以隐藏浏览器滚动条。

正如 Dave Kiss 指出的那样，我们可以通过添加以下参数来阻止花哨的盒子这样做：

```
$('.image').fancybox({
  padding: 0,
  helpers: {
    overlay: {
      locked: false
    }
  }
}); 
```

但是，现在我们可以在查看我们花哨的框窗口时滚动主页。它比跳到页面顶部要好，但它可能不是我们真正想要的。

我们可以通过添加下一个参数来防止以正确的方式滚动：

```
 $('.image').fancybox({
      padding: 0,
      helpers: {
        overlay: {
          locked: false
        }
      },
    'beforeLoad': function(){
      disable_scroll();
        },
     'afterClose': function(){
       enable_scroll();
      }
    }); 
```

并从 galambalaz 添加这些功能。请参阅：[如何暂时禁用滚动？](https://stackoverflow.com/questions/4770025/how-to-disable-scrolling-temporarily)

```
 var keys = [37, 38, 39, 40];

    function preventDefault(e) {
      e = e || window.event;
      if (e.preventDefault) e.preventDefault();
      e.returnValue = false;  
    }

    function keydown(e) {
        for (var i = keys.length; i--;) {
            if (e.keyCode === keys[i]) {
                preventDefault(e);
                return;
            }
        }
    }

    function wheel(e) {
      preventDefault(e);
    }

    function disable_scroll() {
      if (window.addEventListener) {
          window.addEventListener('DOMMouseScroll', wheel, false);
      }
      window.onmousewheel = document.onmousewheel = wheel;
      document.onkeydown = keydown;
    }

    function enable_scroll() {
        if (window.removeEventListener) {
            window.removeEventListener('DOMMouseScroll', wheel, false);
        }
        window.onmousewheel = document.onmousewheel = document.onkeydown = null;  
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-25T05:02:53.637

问题是 fancyBox 改变了 body 的溢出值以隐藏浏览器滚动条。我找不到切换此行为的选项。

您可以删除这部分 fancyBox 代码来阻止它：

```
if (obj.locked) {
    this.el.addClass('fancybox-lock');

    if (this.margin !== false) {
        $('body').css('margin-right', getScalar( this.margin ) + obj.scrollbarWidth);
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-11-02T22:00:55.397

尽管解决这个问题的正确方法是通过fancybox提供的选项（[参考这个答案](https://stackoverflow.com/a/15306863/1925666)），但CSS可以用来解决这个问题。无需编辑库的 css 文件，只需将其添加到应用程序的主样式表中：

```
html.fancybox-lock {
    overflow: visible !important;
} 
```

代码重置元素的原始溢出。问题是`overflow: hidden;`隐藏元素上的滚动条`<html>`，导致页面“跳”到顶部。为了保留滚动条的位置，我们用`overflow: visible;`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-22T08:45:32.390

这也有帮助

```
.fancybox-lock body {
    overflow: visible !important;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-13T16:47:32.333

接受的答案并不完整，因为它实际上并没有解决它只是避免它的问题！这是一个更完整的答案，它实际上在修复窗口跳转问题时为您提供了所需的功能：

```
 $('.fancybox').fancybox({
            helpers: {
                overlay: {
                    locked: false
                }
            },
            beforeShow:function(){ 
                $('html').css('overflowX', 'visible'); 
                $('body').css('overflowY', 'hidden'); 
            },
            afterClose:function(){ 
                $('html').css('overflowX', 'hidden');
                $('body').css('overflowY', 'visible'); 
            }
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-06T19:39:56.867

也许这个答案已经晚了，但也许它在未来会有所帮助，如果在点击/关闭图像花式框后让您的网站滚动到顶部，您可以删除：

```
F.trigger('onReady'); 
```

或更好地使用：

```
/*F.trigger('onReady');*/ 
```

在 fancyBox 版本：2.1.5（2013 年 6 月 14 日星期五）中，部分代码位于第 897 行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-07T19:11:22.037

如果您使用的是 fancybox 默认函数，您实际上可以像这样编写代码：

```
 $(document).ready(function() {
        $(".fancybox").fancybox({
            padding: 0,
            helpers: {
                overlay: {
                  locked: false
                }
            }
        });
    }); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-29T05:23:42.243

你也可以用这种方法试试！

```
$.fancybox({
    beforeShow: function () {
        $("body").css({ 'overflow': 'hidden' });
    },
    afterClose: function () {
        $("body").css({ 'overflow-y': 'visible' });
    },
}); 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2013-08-15T06:26:17.797

我修复了它：

```
overflow: hidden !important; 
```

在`.fancybox-lock`体内`jquery.fancybox.css`。滚动条不跳:)

# google-app-engine - GAE：为什么对 /RPC2 有一个恒定的 POST 请求

> ID：13547012
> 
> 赞同：0
> 
> 时间：2012-11-25T00:13:23.973
> 
> 标签：google-app-engine

我是 Google 应用引擎的新手，对 Python 并不陌生，这对我来说是一个非常令人困惑的问题。

首先，给你看我的版本。

![在此处输入图像描述](../Images/7bbd4b66add2d5c03a30f95fee42a8d1.png)

问题是当我运行开发服务器时，有一个对 /PRC2 的持续 POST 请求，我不知道它来自哪里。

请参阅下面的屏幕截图。 ![在此处输入图像描述](../Images/8dc871e40cdf158716c338bfc892dc0a.png)

我的 main.py

```
from google.appengine.ext import webapp
import os
from handlers import MainHandler

CURRENT_VERSION_ID = os.environ.get('CURRENT_VERSION_ID', None)

if os.environ.get('SERVER_SOFTWARE', '').startswith('Google App Engine'):
    DEVELOPMENT = False
else:
    DEVELOPMENT = True

config = {
    'DEBUG': DEVELOPMENT
}

routes = [
    (r'/', MainHandler),    # Homepage
]

app = webapp.WSGIApplication(
    routes, debug=DEVELOPMENT, config=config
) 
```

和 app.yaml

```
application: xxxxxxxxxxxx
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /static
  static_dir: static
- url: /.*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: "2.6" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:17:59.373

奇怪的。尝试另一个端口，看看你是否保留了这个奇怪的 POST。或者在您的应用程序中提供帖子并查看请求中的内容，以找出它的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:34:00.640

您可能在 XML-RPC 应用程序正在寻找特定 API 的某个端口上启动 dev_appserver。

# jquery - jQuery加载表单上的jQuery验证表单插件？

> ID：13547013
> 
> 赞同：-1
> 
> 时间：2012-11-25T00:13:29.263
> 
> 标签：jquery, jquery-validate

我之前发布过这个，我对 jQuery 验证插件成为解决方案的可能性感到非常兴奋。也许我只是错过了一些东西......

我想要做的是使用 jQuery`.load()`将表单加载到 div 中，然后使用 jQuery 验证插件来验证页面。我的页面 100% 使用 jQuery `.load()`，所以除了 jQuery 表单验证之外的所有东西都可以正常工作。我让验证插件在普通静态页面上运行良好，但是一旦我尝试在现有站点上使用`.load()`它来实现它，它就会停止按预期运行。

jQuery 不会在提交时提醒用户有关无效字段，而是重新加载页面并将它们带回主页。我究竟做错了什么？

将页面加载到位于索引文件头部的内容 div 的脚本：

```
<script>
$(document).ready(function(){
    $formLoad = false;
    $('div#happenings').load('happenings.html #happenings_content'); 
    $('div#menu_content').load('home.html #contentA');
    $('div#page_content').load('home.html #contentB');
    $("div#menu ul li a").click(function() {
        var ifContact = $(this).attr('href'); 
            $('div#menu ul li a').removeClass("active").addClass("inactive");
        $(this).removeClass("inactive").addClass("active"); 
        $('div#menu_content').load($(this).attr('href') + ' #contentA');
        $('div#page_content').load(($(this).attr('href') + '#contentB'), 
            function(){ 
                if (ifContact == 'contact.html') { extra bit goes here }); 
            }
                }
        ); <!--FINISH LOADING PAGE CONTENT-->
        return false;
    }); 
});
</script> 
```

位于索引文件头部的 jQuery 验证脚本：

```
<script type="text/javascript">
(function($,W,D) {
var JQUERY4U = {};

JQUERY4U.UTIL =
{
    setupFormValidation: function()
    {
        //form validation rules
        $("#register-form").validate({
            rules: {
                fullname: "required",
                email: {
                    required: true,
                    email: true
                },      
            },
            messages: {
                fullname: "Please enter your firstname",
                email: "Please enter a valid email address"
            },
            submitHandler: function(form) {
                form.submit();
            }
        });
    }
}

//when the dom has loaded setup form validation rules
$(D).ready(function($) {
    JQUERY4U.UTIL.setupFormValidation();
});
})(jQuery, window, document);
</script> 
```

以及从contact.html中的div加载的表单：

```
<div id="mailform">
<form action="" method="post" id="register-form" novalidate="novalidate">
    <div id="form-content">
    <div class="fieldgroup">
        <label for="fullname">Name:</label>
        <input type="text" name="fullname">
    </div>

    <div class="fieldgroup">
        <label for="email">Email</label>
        <input type="text" name="email">
    </div>

    <div class="fieldgroup">
        <label for="subject">Subject</label>
        <input type="password" name="password">
    </div>

    <div class="fieldgroup">
        <label for="comment" class="commenttop">Comment:</label>
        <textarea id="comment" name="comment" cols="60" rows="10"       
                      maxlength="1000"></textarea>
    </div>  

    <div class="fieldgroup">        
        <input type="checkbox" name="mailinglist" value="Please sign me up 
                       for your mailing list!" checked="yes" />
        <label for="mailinglist">Please sign me up for your mailing list!   
                       </label>
    </div>

    <div class="fieldgroup">
        <input type="submit" value="Register" class="submit"> 
    </div>

    </div>
</form>

</div> <!-- END MAILFORM--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T18:30:38.307

尝试使用 live() 函数。

```
 setupFormValidation: function()    
        {
        $('.submit').live('click', function() {

            //form validation rules    
            $("#register-form").validate({

                rules: {
                    fullname: "required",
                    email: {
                        required: true,
                        email: true
                    },      
                },
                messages: {
                    fullname: "Please enter your firstname",
                    email: "Please enter a valid email address"
                },

                submitHandler: function(form) {
                    form.submit();
                }
            });
       )};
 } 
```

# c# - 使用 C# 中的 DbgHost.exe COM 对象

> ID：13547015
> 
> 赞同：1
> 
> 时间：2012-11-25T00:14:12.633
> 
> 标签：c#, debugging, com, windbg

我的公司有一个应用程序有一些响应性/稳定性/内存问题。我正在尝试编写一个小助手应用程序来帮助我们识别这些问题。我希望这个应用程序能够根据命令生成转储并进行一些基本的自动调试，首先我试图获取目标应用程序中所有线程的所有堆栈跟踪。

所以我已经研究了一周左右，我发现了几种添加调试能力的方法。我发现的一些选项是使用 ICorDebug、DbgEng.dll 和 DbgHost.exe。我真的很想使用 DbgHost.exe，因为它使我能够将 LeakTrack.dll 注入目标进程以跟踪内存分配。

我的问题是我似乎无法让它工作，而且我在网络上找不到关于 DbgControl 和 DbgObj 这两个对象的任何真正好的信息。我找到了以下链接：

[如何控制调试器引擎？](http://codenasarre.wordpress.com/2011/06/14/how-to-control-a-debugger-engine/)

[脚本 DbgHostLib](https://dl.dropbox.com/u/81532342/O2%20Raw%20Docs/Pdfs/Scripting%20DbgHostLib.pdf)

第一篇文章解释了如何打开转储文件并对其进行处理，第二篇文章解释了如何附加到进程并对其进行处理。二是使用一些网络自动化软件。第二个正是我想做的。

所以这是我到目前为止的代码，我只添加了重要的代码，其余的代码只是用于 UI。

```
 private void OnAttach(uint? targetProcessId)
    {
        if (targetProcessId == null || targetProcessId.Value == default(uint))
        {
            return;
        }

        Process targetProcess = Process.GetProcessById((int)targetProcessId.Value);
        if (targetProcess.HasExited)
        {
            return;
        }

        DbgControl dbgControl = new DbgControl();
        dbgControl.AttachToProcess((int)targetProcessId.Value, @"C:\scripts", @"C:\symcache", null);
        try
        {
            DbgObj dbgObj = new DbgObj();
            Debug.WriteLine(dbgObj.ThreadInfo.Count);
            foreach (ProcessThread processThread in targetProcess.Threads)
            {
                IDbgThread dbgThread = dbgObj.GetThreadBySystemID(processThread.Id);
                foreach (IDbgStackFrame dbgStackFrame in dbgThread.StackFrames)
                {
                    Debug.WriteLine(dbgStackFrame.InstructionAddress);
                }
            }
        }
        finally
        {
            dbgControl.DetachFromProcess();
        }
    }

    private void OnOpen(string dumpFilePath)
    {
        if (!File.Exists(dumpFilePath))
        {
            return;
        }

        DbgControl dbgControl = new DbgControl();
        DbgObj dbgObj = dbgControl.OpenDump(dumpFilePath, @"C:\symcache", @"C:\symcache", null);

        Debug.WriteLine(dbgObj.ThreadInfo.Count);
    } 
```

所以 OnOpen 的东西有效， OnAttach 的东西没有。OnAttach 代码成功附加到进程，我创建了一个 DbgObj 甚至转储线程计数，但是当我尝试获取线程对象时它失败了。我得到：

```
The server threw an exception. (Exception from HRESULT: 0x80010105 (RPC_E_SERVERFAULT)) 
```

当我检查 EventVwr.exe 时，我得到这些条目：

```
Faulting application name: Dbghost.exe, version: 1.2.0.52, time stamp: 0x4e164226
Faulting module name: Dbghost.exe, version: 1.2.0.52, time stamp: 0x4e164226
Exception code: 0xc0000005
Fault offset: 0x0001907d
Faulting process id: 0x2300
Faulting application start time: 0x01cdcaa0cdffbb1a
Faulting application path: C:\Program Files\DebugDiag\x86Support\Dbghost.exe
Faulting module path: C:\Program Files\DebugDiag\x86Support\Dbghost.exe
Report Id: 0bb5082a-3694-11e2-a454-d4bed9031bdf 
```

所以 DbgHost.exe 出现访问冲突。我即将放弃这一点并转向更常见的方法，但我希望有人能提供一些指导，帮助我克服这个障碍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T15:35:53.383

我发现了同样的问题。我只是理解这个[链接](http://blogs.msdn.com/b/pfedev/archive/2012/07/30/using-debugdiag-s-leaktrack-with-procdump-s-reflected-process-dumps.aspx)。我使用带有 C# 的 DebugDiag 1.2 进行自动转储。注意，请忽略“test.dmp”，目前我无法指定文件名，它不是我们真正需要的主要功能。

这是我们正在寻找的代码。这是 C# 的示例。

C#代码：

```
int pid = 1234; //process id that you need to dump
string dumpPath;
dumpPath = @"C:\Programs\test.dmp";
DbgControl dbgControl = new DbgControl();
dbgControl.AttachToProcess(pid, @"C:\Programs\InjectLeakTrack.vbs", @"C:\", dumpPath);
DbgObj dbgObj = new DbgObj();
dbgObj.DumpPath = @"C:\";
dbgObj.CreateDumpForProcessID(pid, "No reason", false, true);
dbgControl.DetachFromProcess(); 
```

对于 InjectLeakTrack.vbs，我们只需要这个。

```
Sub Debugger_OnInitialBreakpoint()
   Debugger.InjectLeakTrack
End Sub 
```

我们还使用 C# 进行自动化分析。C#代码：

```
DbgControl dbgControl = new DbgControl();
DbgObj g_Debugger = dbgControl.OpenDump(dumpPath, @"c:\symbols", @"c:\symbols", null);
dynamic g_UtilExt = g_Debugger.GetExtensionObject("CrashHangExt", "Utils");
dynamic g_VMInfo = g_Debugger.GetExtensionObject("MemoryExt", "VMInfo");
dynamic g_LeakTrackInfo = g_VMInfo.LeakTrackInfo;
Console.Write(g_LeakTrackInfo.IsLeakTrackLoaded()); 
```

# sockets - TCP和UDP相同的端口，不同的进程

> ID：13547016
> 
> 赞同：19
> 
> 时间：2012-11-25T00:14:21.640
> 
> 标签：sockets, tcp, udp, port

我知道你不能有两个不同的进程使用同一个端口，但是如果一个使用 tcp 而另一个使用 udp 会发生什么？你可以有两个不同的进程，每个进程将一个套接字绑定到同一个端口但不同的协议？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T08:55:02.537

5 元组（协议、源 ip、源端口、目标 ip、目标端口）必须是唯一的。这意味着您不仅可以让 TCP 和 UDP 使用相同的端口号，甚至可以使用相同的协议和本地端口号但目的地不同的传出连接。

然而，在侦听时，套接字通常在其协议中必须是唯一的，即您可以/不应该打开另一个具有相同端口号的 TCP 套接字。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-25T00:22:21.580

TCP 端口和 UDP 端口完全没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T09:04:27.783

是的。两个套接字可以绑定相同的端口号但不同的协议。

它不是同一个端口，只是恰好有相同的编号。

# ruby-on-rails - CSV 导入问题

> ID：13547018
> 
> 赞同：2
> 
> 时间：2012-11-25T00:14:30.563
> 
> 标签：ruby-on-rails, ruby, csv, import

我有这个来解析 CSV 文件：

```
csv_file = CSV.parse(
  file.read(),
  headers:              true,
  header_converters:    :symbol
) 
```

它可以工作，但我想指定编码类型，所以我`{encoding: 'UTF-8'}`在 read 方法中添加：如下：

```
csv_file = CSV.parse(
  file.read({encoding: 'UTF-8'}),
  headers:              true,
  header_converters:    :symbol
) 
```

但我得到这个错误：can't convert Hash into Integer

我只是看不出有什么问题。我已经检查了文档，但它说你可以像这样传递编码，但它确实需要文件作为第一个参数，所以它可能会停在那里，但肯定因为它已经知道正在读取什么文件，所以应该没问题。

我该如何解决这个问题？

**更新：**

我已更新为以下内容：

```
def import
  if params[:import_coasters]
    file = params[:import_coasters][:file]
    Park.import_from_csv(file)

def self.import_from_csv(file)
  Park.destroy_all 
```

和

```
 csv_file = CSV.parse(
    File.read(file, {encoding: 'UTF-8'}),
    headers:              true,
    header_converters:    :symbol
  ) 
```

但我收到以下错误：

无法将 ActionDispatch::Http::UploadedFile 转换为字符串

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:24:48.020

你很近。尝试这个：

```
# Step 1: convert the uploaded file object to a file name
uploaded_file = params[:import_coasters][:file]
file_name = uploaded_file.path

# Step 2: To get the input text and see if it's what you expect
text = File.read(
  file_name, 
  {encoding: 'UTF-8'}
)

# Parse the text
csv_file = CSV.parse(
  text,
  headers: true,
  header_converters: :symbol
) 
```

来自 IO.read 上的 Ruby 1.9.3 文档：

“如果最后一个参数是一个散列，它指定内部 open() 的选项。键如下。open_args: 是其他人独有的。”

[http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-read](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-read)

另外，请查看文档，`UploadedFile`因为它实际上不是典型的 Ruby File 对象：

[http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html](http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T23:38:16.093

这是因为 File.read() 期望文件名作为第一个参数。您正在传递 ActionDispatch::Http::UploadedFile 。如果您查看[文档](http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html)，您会看到 UploadedFile 已经有一个 read 方法，因此您可以尝试：

```
 csv_file = CSV.parse(
    file.read({encoding: 'UTF-8'}),
    headers:              true,
    header_converters:    :symbol
  ) 
```

# php - mysql查询到php数组并显示数组

> ID：13547021
> 
> 赞同：0
> 
> 时间：2012-11-25T00:14:47.203
> 
> 标签：php, mysql

```
$query2 = "SELECT * FROM `Listing` WHERE listingid = '{$myID}'";
if(!($result2 = @ mysql_query($query2,$connection)))
    echo "query failed<br>";

$result_array = array();
while($row2 = mysql_fetch_assoc($result2))
{
    $result_array[] = $row2;
}
foreach ($result_array  as $key => $val) {
    echo "$key = $val\n";
} 
```

清单（表）有 7 个字段。
我得到一堆“0 = Array”

如何将 mysql 查询结果存储到 php 数组中并显示它们？我想先把它作为数组，这样我就可以对它们进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:19:51.287

您实际上是在存储它们。您列出的代码将它们存储在数组数组中以查看它们，您可以修改`for`：

```
foreach ($result_array  as $key => $val) {
    echo "$key = " .  print_r($val, true) . "\n";
} 
```

$val 实际上是一个包含一行所有字段的数组。

# java - Java GPS 的公共交通算法

> ID：13547022
> 
> 赞同：1
> 
> 时间：2012-11-25T00:15:09.597
> 
> 标签：java, algorithm

我有一个 Java 项目要做，我必须编写一个程序来询问用户的起点和目的地坐标，然后我的程序应该使用一个 .txt 文件，其中包含芝加哥所有公共汽车和火车停靠点坐标的数据库。谁能帮我找到算法来创建应该决定应该发生多少传输以及如何决定走哪条线的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:19:48.807

这根本不是一个小问题。

您可能会发现有用的一种方法是预处理数据，以便可以以有向图的形式表示。然后，根据从用户的角度出发的走这条路的意愿（例如，在美元、时间、距离等方面，在这条路上行驶的成本是多少），您可以为每条路段分配适当的成本。完成此操作后，您可以应用诸如 Dijkstra 算法之类的算法来确定用户采用的最佳路径。

# int - 检测整数溢出

> ID：13547024
> 
> 赞同：8
> 
> 时间：2012-11-25T00:15:18.940
> 
> 标签：int, d

如何检测D中的整数溢出？（检查携带标志？）

原始示例：

```
ubyte a = 100;
ubyte b = 200;
ubyte c = a + b;
// c can't represent 300; how to detect the overflow now? 
```

修改示例：

```
uint a = 2_000_000_000;
uint b = 3_000_000_000;
uint c = a + b;
// c can't represent 5_000_000_000; how to detect the overflow now? 
```

还具有乘法和前/后增量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T04:13:30.110

对于初学者，您提供的代码甚至无法编译，因为所有大小小于`int`的整数数学都是使用`int`. 所以`a + b`is的结果`int`，并且`int`不会隐式转换为`ubyte`，因为这是一个缩小转换。如果要将其分配给`c`，则需要对其进行强制转换。

```
ubyte c = cast(ubyte)(a + b); 
```

现在，这显然是一个未经检查的转换，它会很高兴地`44`填入`c`（因为这是给定`100`and值的强制转换的结果`200`）。如果您想要检查转换，请使用[`std.conv.to`](http://dlang.org/phobos/std_conv.html)：

```
ubyte c = to!ubyte(a + b); 
```

这将抛出一个`ConvOverflowException`（它是 的子类`ConvException`），因为结果不适合请求的类型。

如果您想自己进行转换然后检查是否存在溢出，那么您基本上与 C/C++ 处于同一条船上，并且没有进位标志或类似的东西。如果您检查汇编代码，可能存在这种情况。我不知道。但是该语言当然不提供类似的东西。`std.conv.to`通过检查结果并查看它是否太大或太小（取决于参数的符号和类型）来计算它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T01:09:37.633

2021 年更新：此技术仅在您使用没有优化的 dmd 时才有效（即使那样做其他方法可能更好）。要在更多情况下工作，您可以在内联汇编中执行所有操作（顺便说一句，这可能会破坏优化器），或者使用`core.checkedint`具有`ref bool overflowed`可以在操作结束时检查的参数的操作（这也是内联友好的顺便说一句再次用于优化器）。

原帖如下：

您可以使用一些内联汇编很容易地检查它：

```
asm { jo overflowed; } // for checking signed types
// or
asm { jc overflowed; } // use this for checking unsigned types

/* continue going */

return;

overflowed:

/* do whatever to handle it */ 
```

注意：您可能无法将其放入函数中，因为调用该函数可以重置标志。您需要在您感兴趣的操作之后立即将其内联。

可以创建一种使用运算符重载来引发溢出的类型：http: [//arsdnet.net/dcode/ranged.d](http://arsdnet.net/dcode/ranged.d)就是一个例子。或者我认为该模块是标准库中的 std.bigint ，它通过提供任意大的整数类型来避免溢出。

# c# - 来自 2 个点数组的 4 个点的组合

> ID：13547025
> 
> 赞同：2
> 
> 时间：2012-11-25T00:15:21.697
> 
> 标签：c#, algorithm, combinations, jagged-arrays

我有两个二维点数组：

```
array1 = int[x][2]
array2 = int[y][2] 
```

从这两个数组中，我想生成 4 个点的组合。结果应该在一个列表中：

```
List<int[4][2]> 
```

但是我需要指定每个组合从 array1 中获取的点数（并从 array2 中获取剩余的点）。点的顺序无关紧要。而且不应该有重复。

例如：

```
array1={ {0,0} , {0,1} , {1,0} }
array2= { {1,1} , {2,1} , {2,2} , ... , {9,9} } 
```

（从array1中取1分，从array2中取3分）

```
res= { {0,0} , {1,1} , {2,1} , {2,2} }
     { {0,0} , {1,1} , {2,1} , {3,2} }
     ...
     { {0,0} , {1,1} , {2,1} , {9,9} }
     ...
     { {0,1} , {1,1} , {2,1} , {2,2} }
     ... 
```

绝不 ：

```
res = { {0,0} , {1,1} , {1,1} , {1,1} }
      ... 
```

两者都不 ：

```
res= { {0,0} , {1,1} , {2,1} , {2,2} }
     { {0,0} , {1,1} , {2,2} , {2,1} }
     ... 
```

（从array1中取2个点，从array2中取2个点）

...

（从 array1 中取 3 个点，从 array2 中取 1 个点）

...

我希望有人可以帮助我，因为我花了很多时间阅读/测试了很多答案，但找不到解决方案。

PS/编辑：如果您可以提供 C# 代码，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:03:45.177

~~您的规定简化了这个问题，即您只能按照它们在原始数组中的存储顺序检索点。~~

**编辑：**这个问题已经被你的规定简化了，即结果应该包含组合，而不是排列。因此，为了简化事情，我们可以按照它们存储在原始数组中的顺序检索点，从而避免对它们进行置换。

您提出要翻译任何其他语言，所以我将使用 JavaScript。请注意，JavaScript 数组包含它们的长度，因此您需要单独传递长度（或者传递数组的末尾）。

```
function combinations(array1, count1, array2, count2)
{
    var result = [];
    combine(array1, 0, count1, array2, 0, count2, [], result);
    return result;
}

function combine(array1, offset1, count1, array2, offset2, count2, chosen, result)
{
    var i;
    var temp;
    if (count1) {
        count1--;
        for (i = offset1; i < array1.length - count1; i++) {
            temp = chosen.concat([array1[i]]); // this copies the array and appends the item
            combine(array1, i + 1, count1, array2, offset2, count2, temp, result);
        }
    } else if (count2) {
        count2--;
        for (i = offset2; i < array2.length - count2; i++) {
            temp = chosen.concat([array2[i]]);
            combine(null, 0, 0, array2, i, count2, temp, result);
        }
    } else {
        result.push(chosen); // don't need to copy here, just accumulate results
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:02:17.747

`Combinatorics Library for .Net`通过 Nuget下载。

我试了一下：

```
 Dim a1 = {New Integer() {0, 0}, New Integer() {1, 1}, New Integer() {2, 2}}
    Dim a2 = {New Integer() {3, 3}, New Integer() {4, 4}, New Integer() {5, 5}, New Integer() {6, 6}}

    Dim combA1 = New Combinations(Of Integer())(a1, 1)
    Dim combA2 = New Combinations(Of Integer())(a2, 3)

    Dim l As New List(Of Integer()())
    For Each i In combA1
        For Each j In combA2
            l.Add(i.Union(j).ToArray)
        Next
    Next 
```

不要忘记导入 Combinatorics.Collections 命名空间。结果对我来说看起来不错，但您可能需要花更多时间来检查它。for 循环看起来可以用一个简单的 LINQ 语句代替，但它确实有效。

# java - 无法在android应用程序中使用Java库

> ID：13547029
> 
> 赞同：1
> 
> 时间：2012-11-25T00:15:42.183
> 
> 标签：java, android, jar

我使用 JSOUP 库在 android 应用程序中解析 html。我创建了一个 lib 文件夹，在其中放置了 .jar 文件，然后按照本[教程](http://www.vogella.com/blog/2010/02/11/java-library-jar-android/)中的说明添加到 Buildpath 。当我编写包含导入库中的对象和方法的代码时，我在 Eclipse 中没有收到任何抱怨，但是当我运行它时，我得到了这个错误。

```
11-25 01:05:16.108: E/AndroidRuntime(785): FATAL EXCEPTION: main
11-25 01:05:16.108: E/AndroidRuntime(785): java.lang.NoClassDefFoundError: org.jsoup.Jsoup
11-25 01:05:16.108: E/AndroidRuntime(785):  at com.example.seminarska.Prevozi.onCreate(Prevozi.java:76)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.Activity.performCreate(Activity.java:5008)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.os.Looper.loop(Looper.java:137)
11-25 01:05:16.108: E/AndroidRuntime(785):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-25 01:05:16.108: E/AndroidRuntime(785):  at java.lang.reflect.Method.invokeNative(Native Method)
11-25 01:05:16.108: E/AndroidRuntime(785):  at java.lang.reflect.Method.invoke(Method.java:511)
11-25 01:05:16.108: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-25 01:05:16.108: E/AndroidRuntime(785):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-25 01:05:16.108: E/AndroidRuntime(785):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:26:26.690

您按照以下步骤在项目中添加外部 jar

第1步

![在此处输入图像描述](../Images/3d60a698f059735f4ac4e78c8f5fab16.png)

第2步 ![在此处输入图像描述](../Images/5a9ce4b73689e75bb5b3ad38eddbb0ab.png)

第三步

![在此处输入图像描述](../Images/322fc36c894ae5ab501bf6485e4f44a6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:19:32.240

您应该将 jar 放在 libs 文件夹中，然后 Project -> Properies -> Java Buid Path -> Add JARs -> 从 libs 文件夹中选择您的库的 jar -> OK。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:17:12.550

如果要添加库，正确的方法是将它们复制到 lib 文件夹，而不是 Buildpath。这在 API 14 左右发生了变化，因此仍然存在一些混乱。请遵循以下说明：

1.  从构建路径中删除所有内容。
2.  创建一个名为 libs 的文件夹（如果它不存在）。它应该与 res、src 等处于同一级别。
3.  将所有库函数放在此文件夹中。

# c - 如何将异或 (XOR) 运算符应用于多个谓词？

> ID：13547044
> 
> 赞同：2
> 
> 时间：2012-11-25T00:17:23.790
> 
> 标签：c, operators

我想知道有没有办法将异或（对于两个操作数称为 XOR）运算符应用于多个谓词？

例如`p`，假设`q`和`r`是三个谓词（换句话说，布尔变量）。我想写一个`if`这样的条件：

```
if ((p || q || r) && !(p && q && r)) 
```

即，如果至少其中一个为真但不是全部为真，我希望条件为真。

显然`if (p ^ q ^ r)`行不通（考虑这种情况`p=true`，`q=true`和`r=false`）

谢谢你。

* * *

我对**c语言有一个很好的答案，但我很高兴知道****c#**中是否有解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:24:51.643

这是一种方法：

```
if ((!!p + !!q + !!r) % 3) 
```

但这可能太聪明了。

*编辑：*

```
if (((p ? 1 : 0) + (q ? 1 : 0) + (r ? 1 : 0)) % 3 != 0)  // C#-compatible version 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:24:51.343

您想要的实际上不是 XOR 应用于三个或更多参数，因此标题中的问题具有误导性。XOR 的泛化基本上是检查真值的数量是否为奇数，这是`(p ^ q ^ r)`表达式计算的内容。

C 没有任何运算符可以检查您的条件（“至少其中一个为真，但不是全部为真”），因此您的符号为：

```
((p || q || r) && !(p && q && r)) 
```

似乎是 C 中最惯用的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-25T00:20:57.997

```
if (((p ^ q) ^ r)&!(p&q&r)) should work in your example 
```

[http://en.wikipedia.org/wiki/Exclusive_or](http://en.wikipedia.org/wiki/Exclusive_or)

# mysql - 存储波兰字符mysql

> ID：13547046
> 
> 赞同：4
> 
> 时间：2012-11-25T00:17:35.740
> 
> 标签：mysql, database, utf-8

我正在尝试保存诸如“ą”、“ć”、“ł”之类的字符，但它们作为问号保存在数据库中（我使用 phpMyAdmin 保存它们）。

数据库和表的排序规则是 utf8_bin。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T01:00:31.950

尝试将排序规则更改为：

```
utf8_unicode_ci 
```

或者

```
utf8_polish_ci 
```

可以参考：http: [//mysql.rjweb.org/doc.php/charcoll](http://mysql.rjweb.org/doc.php/charcoll)

您也可以尝试使用以下方法更改特定列：

```
ALTER TABLE tbl MODIFY COLUMN txt TEXT CHARACTER SET utf8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-19T14:53:39.430

我已经搜索了很多，最后，我得到了一个解决方案：

```
ALTER TABLE tableName MODIFY COLUMN columnName VARCHAR(64) CHARACTER SET `binary`; 
```

您可以根据`VARCHAR(64)`需要进行更改。我希望这可以帮助别人。**请注意，我不仅需要存储波兰字符，还需要存储法语和西班牙语字符。**所以上面的解决方案可能只适用于波兰字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-22T10:07:27.890

您还可以将列从 vchar 更改为 nvchar。然后在向 DB 中插入值时，记得在如下之前添加 N：N'ŁÓDŹ'（在持久性框架中，你应该有某种 NString 表示）

来自文档：

> Nvarchar 存储 UNICODE 数据。如果您需要存储 UNICODE 或多语言数据，nvarchar 是您的选择。Varchar 存储 ASCII 数据，应该是您正常使用的数据类型选择。关于内存使用，nvarchar 每个字符使用 2 个字节，而 varchar 使用 1

# mysql - MySQL左连接返回错误数量的结果

> ID：13547047
> 
> 赞同：2
> 
> 时间：2012-11-25T00:17:47.407
> 
> 标签：mysql, left-join

希望有人可以帮助我解决这个问题。我有一个包含以下数据的表：

```
site_id  type                           key               data
2        organic-keywords-last-month    (not provided)    9064
2        organic-keywords-last-month    bmi               345
2        organic-keywords-last-month    bmi kalkulator    445
2        organic-keywords-last-month    grove pannekaker  678
2        organic-keywords-last-month    grove vafler      976
2        organic-keywords-last-month    lapper            475
2        organic-keywords-last-month    melk.no           624
2        organic-keywords-last-month    ostesuffle        361
2        organic-keywords-last-month    scones            697
2        organic-keywords-last-month    sunne pannekaker  658
2        organic-keywords-last-month    sunne vafler      484
2        organic-keywords-this-month    (not provided)    10034
2        organic-keywords-this-month    bmi kalkulator    659
2        organic-keywords-this-month    grove pannekaker  721
2        organic-keywords-this-month    grove vafler      857
2        organic-keywords-this-month    lapper            515
2        organic-keywords-this-month    melk.no           587
2        organic-keywords-this-month    ostesuffle        433
2        organic-keywords-this-month    scones            626
2        organic-keywords-this-month    smultringer       401
2        organic-keywords-this-month    sunne pannekaker  566
2        organic-keywords-this-month    sunne vafler      407 
```

我想做的是查询本月的所有有机关键字，然后将它们加入到上个月的有机关键字中，这样我就可以得到本月 11 个关键字的列表，它们的表现和他们上个月的表现。

我正在使用以下查询：

```
SELECT 
    ktm.key AS keyword, 
    ktm.data AS `this month`, 
    klm.data AS `last month` 
FROM
    data AS ktm 
    LEFT JOIN data AS klm ON 
        (ktm.key = klm.key AND ktm.type = 'organic-keywords-this-month' 
        AND klm.type = 'organic-keywords-last-month') 
WHERE 
    ktm.site_id = 2 
    AND klm.site_id = 2 
ORDER BY 
    `this month` ASC 
```

我认为应该返回 11 行，因为有 11 行类型为 'organic-keywords-this-month'，但是当我运行它时它只返回 10 行，看起来更像是内部连接表而不是左连接.

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:26:14.910

我认为查询非常接近......但是将您的连接条件放在相同的类型上，并且只将类型的 QUALIFIER 放在与 THIS MONTHs 数据关联的 WHERE 子句中

```
SELECT 
      ktm.key AS keyword, 
      ktm.data AS this_month, 
      klm.data AS last_month 
   FROM 
      data AS ktm 
         LEFT JOIN data AS klm 
             ON klm.site_id = ktm.site_id
            AND klm.key = ktm.key 
            AND klm.type = 'organic-keywords-last-month'
   WHERE 
          ktm.site_id = 2 
      AND ktm.type = 'organic-keywords-this-month' 
   ORDER BY 
     this_month ASC 
```

通过应用“AND ktm.type = 'organic...'，这将正确地限定你现在想要的。

但是，LEFT JOIN 也将根据“AND ktm.type = klm.type”显式匹配子句。请注意，我也调整为与上个月类似地应用您的“相同站点 ID”。

我会确保数据表在 (site_id, type, key) 上有一个索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:21:46.070

您的 WHERE 需要 klm 中的特定值，因此查询不会返回您甚至没有任何 klm 值的第 11 行。

把 WHERE 的 klm 一半取出，放到 LEFT JOIN 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T11:24:21.013

正如保罗·格雷戈里所说。我认为这应该被接受为答案。我只想补充一点，当且仅当您希望将键值的比较限制为来自同一站点的键值的比较时，才应在 join 'on' 子句中比较站点值，这似乎是您想要的。在任何一种情况下，如果您想将结果限制为 ktm.site = 2，可以在 join on 子句以及 ktm.site = klm.site 或 where 子句中使用它，只是不要将 klm .site 在 where 子句中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T04:32:59.680

如果您将表分成两张表，一张用于本月，一张用于上个月，您会注意到键列中的细微差异。上个月的组有一个名为“bmi”的键，该键在本月中缺失，而本月的键名为“smultringer”，上个月缺失。由于缺少您在 中指定的匹配项，`klm.key = ktm.key`这些行将被排除在连接之外，只为您提供 10 行而不是 11 行。

编辑：我并不是说要真正分开桌子，我的意思是在心理上这样做来比较各组。

# oracle - Oracle解释计划成本解释

> ID：13547052
> 
> 赞同：0
> 
> 时间：2012-11-25T00:18:22.117
> 
> 标签：oracle, partitioning

**我想知道 Oracle 中的解释计划成本是否总是确定特定查询是否比其他查询最有效（在性能、资源使用、磁盘访问等方面）？**

我的问题是因为我有两张桌子。

*   一个带有本地分区索引。
*   另一个具有全局分区索引。

两者具有相同的结构和相同的数据。然后我有一个查询，成本明显不同。全局分区索引一的成本非常低，而本地分区索引一的成本非常高。但是，当我在 SQL Developer 中运行查询时，具有全局分区索引的表的响应时间更高。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:35:00.813

两个不同的 SQL 语句之间的成本不可比。不能也不应该推断出更高的成本 = 更高的运行时间或 IO/CPU 使用率。

成本只是 oracle 在计算特定 sql 语句的所有可能 sql 计划时应用的内部排名。如您所见，一条低成本的 sql 比高成本的 sql 运行时间更长。成本数字受到很多因素的影响，例如 sql 提示（first_rows 等）、表统计信息、系统级统计信息（负载统计信息，或在 optimizer_index_cost_adj/optimizer_index_caching 上设置不同的数字等）。

始终按 IO/CPU 调整 SQL（即实际资源使用情况）。真的忽略“成本”。

也见这里：[http ://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:313416745628](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:313416745628)

# java - 一键清理构建Eclipse java项目

> ID：13547055
> 
> 赞同：13
> 
> 时间：2012-11-25T00:18:55.843
> 
> 标签：java, eclipse, eclipse-plugin

是否可以一键在 Eclipse 中清理和构建 java 项目？我不想去 Project -> clean -> OK 而不是项目菜单'Build project'

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T22:01:30.153

在项目->清理中，我选择“清理下面选择的项目”，选择我的项目并选中“立即开始构建”和“仅构建选定的项目”。

然后转到 Window->Preferences->General->Keys，搜索“Build clean”并为该命令输入我自己的绑定。例如，`Ctrl`+ `D`。

然后，当我按`Ctrl`+`D`并 Enter 时，我已经清理并构建了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T00:22:38.637

当你有

```
Project --> Build Automatically 
```

勾选，清理后会自动重建。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-25T00:22:45.950

如果你需要比 clean 和 deploy 更强大的东西，我建议学习 Ant 构建工具。 [http://ant.apache.org/](http://ant.apache.org/)

只需为您的项目配置它并准备构建脚本，而不是为清洁和构建目标配置构建脚本。如果您需要，也可以将其部署在您的服务器上（glassfish、weblogic 或任何您想要的）。使用 Ant，您可以配置更多情况（测试、生产......）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-03-08T16:05:39.827

选择您的项目并转到菜单栏：选择 Windows 然后 -> 选择首选项 -> 选择键然后 -> 选择构建和清理

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-07-30T04:58:05.127

只需要`Ctrl + S`那么`Build`，它会和新的一样！

# openni - OpenNI 身体手势识别？

> ID：13547060
> 
> 赞同：1
> 
> 时间：2012-11-25T00:20:06.780
> 
> 标签：openni

我想知道 OpenNI 有没有办法识别蹲下或原地跑步等动作？你能同时运行手、手指和身体识别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T11:32:14.603

前段时间我玩过[姿势估计](http://www.youtube.com/watch?v=qESgiIWavk8&list=UU04-FQBwnGPfIc8W8KDRFHQ&index=6&feature=plcp)，但这与手势识别不同，手势识别也涉及时间。

我建议将[动态时间规整 (DTW)](http://en.wikipedia.org/wiki/Dynamic_time_warping)视为一种有用的技术。还可以查看利用这种技术的[KineticSpace 项目。](http://code.google.com/p/kineticspace/)它是用 Processing(Java) 编写的，并使用了一个包装器，但它仍然在底层使用 OpenNI。 ![动能空间](../Images/6d5f87d6492798b677a738a40f99c3c4.png)

这应该可以帮助您锻炼蹲下甚至跑步。关于您的第二个问题：您可以使用 OpenNI/Nite 免费获得身体识别和手部跟踪，但您必须自己进行手指检测。以下是在 Google 上找到的一些随机结果：

*   [Kinect 核心视觉](http://patriciogonzalezvivo.com/2011/kinectcorevision/)
*   [CodePlex 上的指尖](http://fingertip.codeplex.com/)
*   [ROS 手指跟踪](http://www.ros.org/wiki/openni/Contests/ROS%203D/Finger%20Detector) 还有更多示例，这取决于您使用的语言以及编码的舒适程度。

高温高压

# php - 将变量从 JS 传递给 PHP

> ID：13547065
> 
> 赞同：0
> 
> 时间：2012-11-25T00:20:28.777
> 
> 标签：php

我知道它真的很简单，但我是一个新手。我想通过 JS（用于 open-flash-chart）将 PHP 查询中的变量传递给 PHP 数据文件。

这是我的 PHP 文件中的 JS。我很确定我的问题在于 JS 部分，因为我以前从未使用过它。

```
<script type="text/javascript" src="js/swfobject.js"></script>
<script type="text/javascript">

var player = "<? echo $player1 ?>";

swfobject.embedSWF(
"open-flash-chart.swf", "my_chart", "900", "350", "9.0.0", "expressInstall.swf", {"data-file":"data2.php"} );  

</script> 
```

我正在尝试将 $player 变量传递给图形数据文件（data2.php）

```
<?php
include("include/session.php");

include 'open-flash-chart/php-ofc-library/open-flash-chart.php';

if  (isset($_GET['player'])) {
$player = $_GET['player']; }

$sql = "SELECT pos FROM nflscore where username = '$player'"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:26:06.743

**好吧，这几乎取决于您的需求！**

javascript会改变那个变量吗？如果没有，在 php 页面之间传输数据的最佳方式是会话！还有其他选项，例如 cookie、get vars、post vars 等，但如果用户这样做，用户可能会更改它们，从而使您的脚本处于处理错误信息的尴尬位置！

使用会话，您的第一页将如下所示：

```
<?php session_start(); $_SESSION['player'] = $player; ?>
<!-- [...] -->
<script type="text/javascript">
    swfobject.embedSWF("open-flash-chart.swf", "my_chart", "900", "350", "9.0.0", "expressInstall.swf", {"data-file":"data.php"} );  
</script>
<!-- [...] --> 
```

[session_start](http://www.php.net/manual/en/function.session-start.php)必须放在 php 文件的最开头，在该函数之前不应发送任何标题！

那么，您的数据文件将变成这样：

```
<?php session_start();

/* ...your includes and the rest... */

$sql = "SELECT pos FROM nflscore where username = '{$_SESSION['player']}'"; 
```

[使用 cookie](http://php.net/manual/en/function.setcookie.php)是完全一样的，您只是不必在脚本的开头开始会话（但如果它是一个游戏，您应该已经依赖它们）！不过最好的是，您之后也可以在您的 javascript 中访问 c​​ookie！

所以这就是你的第一页应该是什么样子：

```
<?php setcookie('player', $player) // somewhere in the script ?> 
<!-- [...] -->
<script type="text/javascript">
    swfobject.embedSWF("open-flash-chart.swf", "my_chart", "900", "350", "9.0.0", "expressInstall.swf", {"data-file":"data.php"} );  
</script>
<!-- [...] --> 
```

您的数据页面也变为：

```
$sql = "SELECT pos FROM nflscore where username = '{$_COOKIE['player']}'"; 
```

第三个简单的选择是从一开始就将信息放在应该正确的位置；）所以没有会话，没有cookie，只是简单的获取变量！

第一个文件：

```
<!-- [...] -->
<script type="text/javascript">
    swfobject.embedSWF("open-flash-chart.swf", "my_chart", "900", "350", "9.0.0", "expressInstall.swf", 
    {"data-file":"data.php?player=<?php echo $player ?>"} );  
</script>
<!-- [...] --> 
```

第二个文件：

```
$sql = "SELECT pos FROM nflscore where username = '{$_GET['player']}'"; 
```

**如果您的 javascript 需要更改变量的内容，情况会有所不同**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:26:09.243

假设你想使用 var player 在你的 swfobject.embedSWF 调用中改变它

```
{"data-file":"data2.php?player=" + player } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:22:36.510

```
data2.php?variable="whatever variable" 
```

在php方面做

```
$variable=$_GET["variable"]; 
```

现在变量是你传递的变量，你可以用它做你想做的事

# javascript - 如何将 Ajax 帖子发布到类似 Twitter 的 API

> ID：13547068
> 
> 赞同：2
> 
> 时间：2012-11-25T00:20:53.503
> 
> 标签：javascript, jquery, html, ajax

我对 JavaScript 和 AJAX 非常陌生。一位朋友已经开始帮助我使用一个可以将状态更新发布到[App.net](http://alpha.app.net)的表单，但我无法让它工作。我确定代码中有很多错误，但在此先感谢您的帮助。

```
<html>
<head>
<title>Post to App.net</title>
<link rel="stylesheet" type="text/css" href="style_post.css">
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>
<script>
function post()
</script>
<script type="text/javascript" language="javascript" src="count.js"></script>

<form id="post" method="post">
<textarea name="fixlength" value="What's on your mind?" id="posttext" maxlength="256"     lengthcut="true"></textarea><br>
<input type="submit" value="Post" id="submit">
</form>
<label id="limitlbl_0" ><script> parseCharCounts(); </script></label>

<script type="text/javascript">
var frm = $('#post');
var token = window.location.href.substring(45,143),
var text = $('input[type="text"]').val()
frm.submit(function () {
        $.ajax({
            type: 'POST',
            url: 'https://alpha-api.app.net/stream/0/posts',
            data: {
                text: 'test'
                token: + token +'
            },
            success: 
    });

    return false;
});
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T18:28:28.127

如果您正在制作一个更大的应用程序，那么您肯定需要让 ajax 调用正常工作（您可以制作跨域帖子以及使用 CORS）。但是，对于这种特殊情况，有一个更简单的解决方案：

[http://developers.app.net/docs/other/web-intents/](http://developers.app.net/docs/other/web-intents/)

使用网络意图，您可以使用 iframe 或非常轻松地将用户重定向到帖子表单。只需使用正确的 URL，您就完成了。根本不需要JS。

这是上面的示例：

[https://alpha.app.net/intent/post/?text=%40adn%20When%20is%20the%20next%20meetup%3F](https://alpha.app.net/intent/post/?text=%40adn%20When%20is%20the%20next%20meetup%3F)

# linux - 下载完成后传输守护进程启动程序

> ID：13547070
> 
> 赞同：0
> 
> 时间：2012-11-25T00:21:21.910
> 
> 标签：linux, ubuntu, transmission

是否有传输守护程序的文档，以便下载结束后我可以启动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:42:42.340

您可以指定在`-f, -finish script`torrent 完成时运行的脚本。 [手册](http://www.linuxcertif.com/man/1/transmissioncli/#DESCRIPTION_687h)和[示例](https://trac.transmissionbt.com/wiki/Scripts#OnTorrentCompletion)

# wordpress - 整个帖子链接到实际文章。如何？

> ID：13547071
> 
> 赞同：0
> 
> 时间：2012-11-25T00:21:28.523
> 
> 标签：wordpress, post

我刚开始以 Bones“框架”为主题，我想让首页文章预览链接到帖子，而不仅仅是`<h1>`链接。

我如何实现这一目标？使整个预览链接成为可点击的 div？

这是该部分的模型！:)

```
<article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">

                            <header class="article-header">

                                <h1 class="h2"><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></h1>

                                <p class="byline vcard"><?php _e('Posted', 'bonestheme'); ?> <time class="updated" datetime="<?php echo the_time('Y-m-j'); ?>" pubdate><?php the_time(get_option('date_format')); ?></time> <?php _e('by', 'bonestheme'); ?> <span class="author"><?php the_author_posts_link(); ?></span> <span class="amp">&</span> <?php _e('filed under', 'bonestheme'); ?> <?php the_category(', '); ?>.</p>

                            </header> <!-- end article header -->

                            <section class="entry-content clearfix">
                                <?php the_content(); ?>
                            </section> <!-- end article section --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:59:46.213

不确定它是否符合 HTML5 规范，但您可以尝试移动 以包装所有文章..：

```
 <article id="post-<?php the_ID(); ?>" <?php post_class('clearfix'); ?> role="article">

<!-- move <a> to here -->

<a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>">

                                <header class="article-header">

                                    <h1 class="h2"><?php the_title(); ?> </h1>

                                    <p class="byline vcard"><?php _e('Posted', 'bonestheme'); ?> <time class="updated" datetime="<?php echo the_time('Y-m-j'); ?>" pubdate><?php the_time(get_option('date_format')); ?></time> <?php _e('by', 'bonestheme'); ?> <span class="author"><?php the_author_posts_link(); ?></span> <span class="amp">&</span> <?php _e('filed under', 'bonestheme'); ?> <?php the_category(', '); ?>.</p>

                                </header> <!-- end article header -->

                                <section class="entry-content clearfix">
                                    <?php the_content(); ?>
                                </section> <!-- end article section -->
<!-- close </a>  here -->
    </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:28:58.647

您始终可以将*JavaScript*解决方案与*CSS*结合使用：

```
<article style="cursor:pointer;" onclick="window.location='<?php the_permalink(); ?>'">
  ...
</article> 
```

# asp.net-mvc - 单元测试模拟 WCF 客户端

> ID：13547073
> 
> 赞同：1
> 
> 时间：2012-11-25T00:21:34.840
> 
> 标签：asp.net-mvc, wcf, mocking, nunit

我在如何在易于测试的 MVC 站点中部署 WCF 客户端时遇到严重问题。我正在努力在没有实际访问端点的情况下设置服务的模拟。

被测站点的示例控制器

```
public class ProfileController : ControllerExtended
{

    public ProfileController(IUserService membershipService, IDropDownService dropdownService, ISiteService siteService)
    {
        WCFService.Instance.Client = siteService; //Should maybe be a serpate service.
        _membershipService = membershipService;
        _dropDownService = dropdownService;
        _siteService = siteService;

    }

    public ActionResult Index()
    {
        UserComp profile = _siteService.ProfileGet(_sharedContext.CurrentUser.id);

        return View(new ProfileViewModel { Profile = profile });
    }
} 
```

WCF Singleton（我认为我的 WCF 实现是我的问题，它应该在接口中吗？）

```
public sealed class WCFService
{

    public SiteServiceI Client { get; set; }

    #region Singleton

    static readonly WCFService query = new WCFService();

    static WCFService()
    {
    }

    WCFService()
    {
    }

    public static WCFService Instance
    {
        get { return query; }
    }

    #endregion
} 
```

单元测试

```
[TestFixture]
public class UnitTest1
{
    private Mock<SiteService> mockSiteService;
    private Mock<IUserService> mockMembershipService;
    private Mock<IDropDownService> mockDropDown;
    private Mock<SiteServiceIClient> mockServiceClient; //new Mock<SiteServiceIClient>();

    //private Mock<WebService> mockWebService;

    [SetUp]
    public void SetUp()
    {
        mockSiteService = new Mock<ISiteService>();
        mockMembershipService = new Mock<IUserService>();
        mockDropDown = new Mock<IDropDownService>();
        mockServiceClient = new Mock<SiteServiceIClient>();

        mockWebService = new Mock<WebService>(mockServiceClient);
    }

    [Test]
    public void CheckHomeIndex_Controller()
    {

        var controller = new HomeController(mockMembershipService.Object, mockDropDown.Object, mockPTSearch.Object, mockServiceClient.Object); // mockServiceClient times out.

        Assert.AreEqual("this", "this");
    }
} 
```

我假设错误正在发生，因为单例在初始化后立即设置服务。我试图实现一个单独的服务，纯粹是为了调用 WCF，但没有成功地以可测试的方式实现它。不太确定这是否含糊不清，但我已经阅读了很多，而不是更接近。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:34:08.517

单例绝对是你的问题 - 单例测试正在进入一个痛苦的世界。你应该实现一个[外观](http://www.dofactory.com/Patterns/PatternFacade.aspx)模式来使这个测试变得友好。像这样的东西：

```
public interface IServiceFacade
{
    Profile ProfileGet(int id);
}

public class ServiceFacade : IServiceFacade
{

    private WCFService _theRealService = new WCFService();

    public Profile ProfileGet(int id)
    {
        return _theRealService.ProfileGet(id);
    }
}

public class Some_Tests()
{
    public void Test_Stuff_Whatever()
    {

        Mock<IServiceFacade> _facade = new Mock<IServiceFacade>();

        _facade.SetUp(Whatever.....);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T09:34:04.577

您的问题是您的服务是单例的。单例模式的问题是它不可测试。您应该使用依赖注入来获得服务。

# gcc - 了解基本的内联 NEON 组件

> ID：13547082
> 
> 赞同：2
> 
> 时间：2012-11-25T00:22:40.050
> 
> 标签：gcc, assembly, arm, inline-assembly, neon

考虑到这个问题：[如何在 Xcode LLVM 中编写关于 LOOP 的内联汇编代码？](https://stackoverflow.com/questions/8613793/how-to-write-inline-assembly-codes-about-loop-in-xcode-llvm)

用以下内联汇编代码回答：

```
void brighten_neon(unsigned char* src, unsigned char* dst, int numPixels, int intensity) {
asm volatile (
              "\t mov r4, #0\n"
              "\t vdup.8 d1, %3\n"
              "Lloop2:\n"
              "\t cmp r4, %2\n"
              "\t bge Lend2\n"
              "\t vld1.8 d0, [%0]!\n"
              "\t vqadd.s8 d0, d0, d1\n"
              "\t vst1.8 d0, [%1]!\n"
              "\t add r4, r4, #8\n"
              "\t b Lloop2\n"
              "Lend2:\n"
              : "=r"(src), "=r"(dst), "=r"(numPixels), "=r"(intensity)
              : "0"(src), "1"(dst), "2"(numPixels), "3"(intensity)
              : "cc", "r4", "d1", "d0");
} 
```

我想知道汇编代码中的最后三行是什么意思？似乎参数在这里定义为内联使用的寄存器名称等。有人可以详细说明一下吗？有谁知道任何解释这一点的好资源？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:47:14.450

具体我对ARM汇编不是很了解，但是在GCC的内联汇编语法中，这三个部分分别是输出寄存器、输入寄存器和clobbered寄存器。寄存器按它们出现的顺序编号，在这种情况下，输入寄存器以相同的顺序引用与输出寄存器相同的变量。`=r`是特定于体系结构的，但可能意味着“任何通用寄存器”之类的东西。

因此，您可以期望编译器选择四个方便的寄存器来将四个变量放入（很可能是 ARM 调用约定放入的那些？），并确保在必要时保存`cc`, `r4`, `d1`, 。您可以在程序集中使用, , ,`d0`来引用四个寄存器。反过来，编译器可以预期，当您完成后，您不会破坏任何其他寄存器，并且变量的新值将在新寄存器中（恰好与此中的旧寄存器相同）案子）。`%0``%1``%2``%3`

另请参阅[GCC-Inline-Assembly-HOWTO](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html) - 它有点旧，但您应该能够从中得到大致的想法。

# c# - 关于 PRISM 和 WPF 的一些架构和设计指南

> ID：13547084
> 
> 赞同：0
> 
> 时间：2012-11-25T00:23:02.643
> 
> 标签：c#, .net, wpf, mvvm, prism

我对使用 PRISM 框架的 WPF MVVM 应用程序开发有几个问题：

1.  模块化应用程序中的模块是否应该包含数据访问代码？

2.  如果模块依赖于基础设施项目中存在的代码，例如 prism 文档中的“Stock Trader RI”，那么这不会导致这些模块和基础设施之间的紧密耦合。项目，模块不应该是自包含的功能吗！？

3.  我喜欢 DDD（领域驱动开发）神话，即所有代码都应该依赖于业务逻辑层，因此“依赖箭头”不应该从 BLL 中出来，而是应该进入 BLL（例如，DAL 依赖于BLL，然后你可以使用 DI 容器来连接所有东西），我认为模块是应用程序的 BLL，所以我不希望它们依赖于任何东西，你可以在模块化 PRISM 应用程序中实现这一点（如何) ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:07:12.620

1.  是的，由于 Prism 应用程序通常仅由模块组成，因此如果您希望在应用程序中访问数据，则必须以某种方式从模块中访问它。

2.  管理依赖关系很重要。我尝试检查我的模块做了什么，以决定它引用我的基础设施项目是否有意义。例如，如果您正在创建一个事件记录模块，您可能需要考虑将该接口放在一个公共库中，该库不是您的基础设施项目，因为您可以将其重新用于其他项目。但是，我不介意我的项目特定模块引用了基础设施项目。这些模块仍然允许我强制松散耦合，随意更换模块以添加或删除功能，或者如果我要水平而不是垂直切片应用程序，则可以交换 UI。

3.  我不太清楚你所说的不依赖“任何东西”是什么意思。我想他们仍然依赖于 .NET 核心库。那么棱镜呢？这是允许的吗？如果您担心它们引用 Prism 或您的基础设施项目，您可以始终将 BLL 代码放在单独的 DLLS 中，您的模块引用并在其中实现模型存储库、视图模型逻辑和视图逻辑。

# android - 到最近的移动桅杆的大约距离

> ID：13547085
> 
> 赞同：6
> 
> 时间：2012-11-25T00:23:06.370
> 
> 标签：android

我偶然发现了一个[网站](http://www.panix.com/~mpoly/android/antennas/r1.0/)，该网站显然允许用户计算出最近的手机天线杆有多远。有没有办法在android中硬编码计算出这个距离？（或者有人对如何完成这个有任何建议吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:10:36.010

一种解决方案是禁用 GPS 定位并仅启用[小区定位](https://stackoverflow.com/questions/5184877/how-to-find-user-location-using-cell-tower-in-android)。我怀疑在这种情况下是否存在任何定位[三角测量](http://en.wikipedia.org/wiki/Triangulation)，并且设备地理定位将是最近的桅杆之一。之后，您[使用 GPS](http://developer.android.com/reference/android/location/LocationManager.html#GPS_PROVIDER)并获取真实位置并使用[euler distances](http://euler.rene-grothmann.de/Programs/Examples/Geometry%20on%20the%20Earth.html)计算距离。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T23:17:06.913

在 GSM 中，从移动站到活动蜂窝塔的距离是连接的主要参数之一。它被称为**定时提前**（TA）。

请注意，活动桅杆通常是最近的，但并非总是如此。

TA 值通常在 0 到 63 之间，每一步代表一个比特周期的提前（大约 3.69 微秒）。无线电波以每秒大约 300,000,000 米（即每微秒 300 米）的速度传播，一个 TA 步长代表往返距离（传播范围的两倍）大约 1,100 米的变化。这意味着移动台和基站之间的距离每变化**550 米，TA 值就会发生变化。**

也就是说，移动台始终知道到当前塔的距离，精度为 550 米。

此参数应该可以通过标准 Android API 轻松访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-18T16:35:52.197

这是一个古老的问题，但携带此信息的蜂窝塔数据库的最新发展可以在[Wikipedia](http://en.wikipedia.org/wiki/Cell_ID)上找到，其中包括一长串公开或免费的全球蜂窝塔数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T23:39:04.723

经过进一步研究，我最终得出了这个结论：

在英国，现在可以下载由 Ofcom 的[Sitefinder 网站](http://stakeholders.ofcom.org.uk/sitefinder/sitefinder-dataset/)提供的数据集，其中包含英国 140,000 多个移动桅杆的信息，这些信息可以被操纵以定位移动电话桅杆。

这并**不能**回答是否可以在 Android 中以*编程*方式实现这一问题，但至少为在英国从事类似项目的开发人员提供了另一种可行的选择。

# node.js - 如何在 socket.io/node.js 中将 2 个用户 socket.id 设置为 2 个变量 user1id 和 user2id

> ID：13547087
> 
> 赞同：0
> 
> 时间：2012-11-25T00:23:15.323
> 
> 标签：node.js, socket.io

我已经按照这个聊天教程[http://cestfait.ch/content/chat-webapp-nodejs](http://cestfait.ch/content/chat-webapp-nodejs)创建了一个简单的聊天应用程序，我一直试图将其限制为只有 2 个用户，我想创建 2 个名为 user1id 的变量，和user2id，我希望它们成为客户端的socket.id，比如

```
// you set this value when the user1 connects
var user1id;

// you set this value when the user2 connects
var user2id;

// just for visualization, this is one of the questions I have on how to do this.
user1id = socket.id; user2id = socket.id; 
```

我只想要 2 个用户并将他们作为 user1 和 user2 的原因是我可以比较他们的消息，所以我需要一组 user1 和用户 2 的消息，例如

```
user1arr = []; user2arr = []; 
```

然后只需比较 user1 的“currentWord”变量，看看它是否与 user2msgs[] 中的任何内容匹配。user1 的例子如下：

```
function receivedWord(userid, currentWord) {

// this means current player is 1
if( userid == user1id ) {

    // adds the word received to user 1 word array
    user1arr.push(currentWord);

    // compares received word with each word in user 2 array
    $.each(user2arr, function(u2word) {
        if(u2word == currentWord) {
            wordsMatch();
        }
    }
} 
```

我的代码基本上是我在本文开头给出的聊天应用程序的代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:42:58.410

您将遇到的问题是，每次用户重新加载页面时，来自 socketIO 的 socketID 都会改变。您需要做的是将诸如 sessionID 之类的东西附加到用户，这样您就知道即使他重新连接，他也是同一个用户。您将需要查看像[expressJS](http://expressjs.com/)甚至[connect](http://www.senchalabs.org/connect/)这样的 webframe，它们是 nodeJS 的高度灵活的中间件。我已经用 express 完成了这样的事情，所以让我用一些代码让你开始吧

```
//directories
var application_root = __dirname;

//general require
var express = require('express'),
        connect = require('connect'),
        http = require('http'),
        fs = require('fs');

//create express app
var app = express();

//create sessionStore
var sessionStore = new connect.session.MemoryStore();

//setup sessionKey
var secretKey = 'superdupersecret';

//configure express
app.configure(function() {

        //use body parser
        app.use(express.bodyParser());

        //override methods
        app.use(express.methodOverride());

        //cookies and sessions
        // BE AWARE: this lines have to be written before the router!
        app.use(express.cookieParser(secretKey));
        app.use(express.session({
                store: sessionStore,
                secret: secretKey,
                key: 'express.sid'
        }));

        //router
        app.use(app.router);

        //use static page in public folder
        app.use(express.static(path.join(application_root, 'public')));
});

//create the http server link to the new data http object of express 3
server = http.createServer(app);

//make server listen to 8080 and localhost requests
server.listen(8080, 'localhost', function() {
        console.log('Express Server running and listening');
});

//bind socket.io to express server by listening to the http server object
var io = require('socket.io').listen(server);

//set the authorization through cookies 
io.set('authorization', function(data, accept) {

        //check if header data is given from the user
        if (!data.headers.cookie) {

                //return false if no cookie was given
                return accept('Session cookie required!', false);
        }

        //parse cookie into object using the connect method
        //NOTE: this line is a hack, this is due to the fact
        //that the connect.utils.parseCookie has been removed
        //from the current connect module and moved to an own
        //instance called 'cookie'.
        data.cookie = connect.utils.parseSignedCookies(require('cookie').parse(decodeURIComponent(data.headers.cookie)), secretKey);

        //save session id based on exress.sid
        data.sessionID = data.cookie['express.sid'];

        //get associated session for this id
        sessionStore.get(data.sessionID, function(err, session) {
                if (err) {
                        //there was an error
                        return accept('Error in session store.', false)
                } else if (!session) {
                        //session has not been found
                        return accept('Session not found', false);
                }

                //successfully got the session, authed with known session
                data.session = session;

                //return the accepted connection
                return accept(null, true);
        });

});

//connection handler for new io socket connections
io.sockets.on('connection', function(socket) {

        //parse handshake from socket to io
        var hs = socket.handshake;

        //show session information
        console.log('New socket connection with sessionID ' + hs.sessionID + ' connected');

}); 
```

只需通读代码和注释即可了解它们在做什么。基本上你正在做的是创建一个快速服务器，让 socketIO 监听它，创建一个 sessionStore 以使其全局可用，用一个 secretKey 锁定它并将其设置为 socketIO 的授权方法。然后套接字所做的是与用户握手，然后将其链接到快速会话。这意味着 express sessionID 在整个会话期间保持不变，而 socketIO ids 一直在切换。

# python - 从 Python 中的导入语句

> ID：13547088
> 
> 赞同：2
> 
> 时间：2012-11-25T00:23:17.263
> 
> 标签：python, import

我对 Python 中的 from import 语句有点困惑。特别是，我如何从包中的模块导入类。例如，如果我有一个名为 my package 的包，它有两个模块（模块 1 和模块 2），我如何从模块 2 中的模块 1 导入特定类？

我目前发现的是我需要（在模块二中）执行以下操作......

```
from package import module1
module1.class1() 
```

虽然这可行，但我更希望能够直接从模块 2 访问 class1()，因为它的可读性不强。但是，以下语法不起作用...

```
from package import module1.class1 
```

而且，它不会让我简单地离开......

```
from module1 import class1 
```

如何直接在该包内的单独模块中导入位于包内模块中的类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T00:24:06.930

你走在正确的轨道上：

```
from package.module1 import class1 
```

如果你说你是从同一个包中导入的，你也可以这样做

```
from .module1 import class1 
```

这`.`意味着“执行导入的模块在包层次结构中的位置”。有关信息，请参阅[文档](http://docs.python.org/3/reference/simple_stmts.html#the-import-statement)。

# jwplayer - JW 播放器无法从 http 处理程序播放音频文件

> ID：13547089
> 
> 赞同：1
> 
> 时间：2012-11-25T00:23:24.380
> 
> 标签：jwplayer

我编写了 ac# 处理程序，它返回一个音频文件。JW播放器无法播放，但其他播放器可以播放，例如“mp3_maxi player”。

这是处理程序网址：

```
http://176.28.53.232/Handler.ashx?id=1 
```

这里是Demo的地址

```
http://176.28.53.232/default.aspx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T04:13:21.043

提供者应该是健全的，提供者：“健全”

# ruby-on-rails - 使用 Git 摆脱分支和错误代码

> ID：13547093
> 
> 赞同：1
> 
> 时间：2012-11-25T00:23:55.720
> 
> 标签：ruby-on-rails, ruby, git

我正在开发一个新分支。基本上我已经把我的代码搞砸了，想回到 master 并从一个新的分支重新开始。

`$ git revert`能让我回到主人身边吗？

或者我应该执行以下操作：

```
$ git branch -D branch-name 
```

我想摆脱所有代码和当前已签出的整个分支。

在线文档有点混乱 - 害怕把一切都搞砸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T00:26:43.243

要返回`master`分支，只需使用：

```
git checkout master 
```

如果您还想清除未提交的更改，您可以按照以下方式进行操作：

```
git reset --hard 
```

您可以使用以下方法删除不需要的分支：

```
git branch -D branch-name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:26:45.493

是的，`git branch -D branch-name`会删除给定的分支。提交将保留在存储库中，直到被垃圾收集。确保在删除该分支时没有将其签出。为此，只需再次使用 签出 master `git checkout master`，然后您就可以运行 delete 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T00:27:46.283

如果你想回到master，只需输入：

```
git checkout master 
```

然后从那里开始一个新的分支。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T00:27:29.887

尝试：

```
git checkout master
git branch -d messed-up-branch-name-goes-here 
```

其他信息可以[在 git book](http://git-scm.com/book)中找到。

# android - 为移动和桌面编写一个代码库？

> ID：13547098
> 
> 赞同：1
> 
> 时间：2012-11-25T00:24:40.163
> 
> 标签：android, iphone, web-applications, mobile, cross-platform

我有兴趣为一个应用程序编写一个单一的代码库，它可以在 iPhone、Android 和 Blackberry 移动设备以及 Firefox、IE 和 Chrome 等桌面浏览器上运行。这是可能的还是我只是在做梦？

此外，我的另一个限制是，我想为这个应用程序使用 .Net 编程语言并结合 HTML5、jQuery 和 CSS3。

现在技术每个月都在迅速变化，我想知道这在 2012 年 11 月现在是否可能。我知道在 2012 年 5 月这是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T00:33:28.193

您可以使用：

*   [电话间隙](http://phonegap.com/)
*   [加速器钛](http://www.appcelerator.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:49:49.597

是的，它们会很好地呈现 Html Table。使用 html 时几乎没有限制。唯一的限制是浏览器是否支持 Html 4.x，现在大多数支持 HTML 5，所以你会没事的。您的 CSS 将是决定项目如何在不同平台上呈现的主要因素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T00:34:51.020

取决于你想要做什么，你总是可以使用 C。一个用 C 编写的库函数可以从 iPhone 上的 Objective C 中访问，通过 Android 上的 JNI 和通过 CGI 或网络服务器上的大多数服务器端脚本语言（Ruby ，PHP）。

我不知道有任何库可以为所有这些平台生成用户界面，我认为这甚至没有意义，因为用户交互会有很大的不同。

如果您想创建游戏，请查看在多个不同平台上运行的 Unity 游戏引擎。

# objective-c - UIView 内的 UIButton 不响应触摸事件

> ID：13547101
> 
> 赞同：15
> 
> 时间：2012-11-25T00:24:52.597
> 
> 标签：objective-c, uiview, uibutton, interface-builder, xib

我在自定义 UIView 中放置了一个 UIButton 并且该按钮没有接收任何触摸事件（它没有进入突出显示状态，所以我的问题**不**在于无法在处理程序内部连接触摸）。我已经尝试将它放入 Interface Builder 中的 XIB 中，还尝试以编程方式将 UIButton 分别添加到 UIView 中，但都没有成功。我所有的视图都在 UIScrollView 内，所以我首先虽然 UIScrollView 可能会阻止它们，所以我还以编程方式添加了一个按钮，就像我将自定义视图添加到 UIScrollView 中一样，并且按钮工作，消除了 UIScrollView 的可能性成为原因。我的视图的层次结构是这样的：

![ss](../Images/64b712ad25c3388b271bada9fc2af897.png)

按钮在图像视图之上，并且前层没有完全占据我的按钮，所以我没有理由不与按钮进行物理交互。在我的自定义视图的代码方面，我正在创建我的视图：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        UIView *sub = [[[NSBundle mainBundle] loadNibNamed:@"ProfileView" owner:self options:nil] objectAtIndex:0];
        [self addSubview:sub];
        [sub setUserInteractionEnabled:YES];
        [self setUserInteractionEnabled:YES];
        CALayer *layer = sub.layer;
        layer.masksToBounds = YES;
        layer.borderWidth = 5.0;
        layer.borderColor = [UIColor whiteColor].CGColor;
        layer.cornerRadius = 30.0;
        /*layer.shadowOffset = CGSizeZero;
        layer.shadowRadius = 20.0;
        layer.shadowColor = [[UIColor blackColor] CGColor];
        layer.shadowOpacity = 0.8;
        */
    }
    return self;
} 
```

我已经尝试了所有的组合`setUserInteractionsEnabled`，但没有运气。（是的，也将它们设置为在 Interface Builder 中检查）。我还阅读了另一个类似问题的问题，我应该尝试覆盖“canBecomeFirstResponder”以返回“YES”，我也这样做了。但问题依然存在，我无法点击按钮。我没有为按钮提供任何特殊属性和设置，它只是一个普通的。我在视图中的其他对象（下面的标签、按钮后面的图像视图等）工作正常，没有问题。这里可能有什么问题？

谢谢，

能。

**更新：**这是问题的快速重现：[https](https://dl.dropbox.com/u/79632924/Test.zip) ://dl.dropbox.com/u/79632924/Test.zip 尝试运行并单击按钮。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T00:53:59.757

查看测试项目，我相信您的问题在于您创建 TestView 的方式，您没有为其指定框架，所以基本上父视图的大小为 0，而您从 XIB 看到的子视图延伸出父视图，因此不要在响应者链中得到任何东西。

您应该在创建 TestView 时指定框架，或者在加载 XIB 文件后调整框架。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-12T18:48:01.667

我也遇到过这个问题。我的原因是`UIButton`超级视图框架的高度为 0，所以我相信即使发生触摸，它也不会被传递给按钮。

在确保按钮的超级视图采用更大的矩形作为框架之后，按钮操作起作用了。

我这边这个问题的根本原因是错误的自动布局实现（我忘记为按钮的超级视图设置高度约束）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T00:52:15.837

我找到了解决方案。我将我的自定义视图初始化为：

```
MyView *view = [[MyView alloc] init]; 
```

我已经用我的视图大小的框架对其进行了初始化，它开始响应事件：

```
CGRect rect = CGRectMake(0,0,width,height);
MyView *view = [[MyView alloc] initWithFrame:rect]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-22T23:39:38.230

## 故事板解决方案

仅适用于在使用情节提要和约束时想要解决此问题的任何人。

> 在超级视图（包含按钮）和具有相等高度约束的 UIButton 之间添加一个约束。

在我的例子中，我选择了将 UIButton 嵌入到 UIView 中，而故事板上没有插图。在 UIButton 和 superview 之间添加额外的高度约束允许 UIButton 响应触摸。

您可以通过启动**View Debugger**来确认问题，并直观地确认 UIButton 的 superview*不可*选择。

（Xcode 11，*- 也应该在早期版本中工作）

# ruby-on-rails - Rails：在 event_mailer 中初始化全局变量

> ID：13547103
> 
> 赞同：0
> 
> 时间：2012-11-25T00:25:13.630
> 
> 标签：ruby-on-rails, sendmail

在我的 mailers/event_mailer 类中，我有一些方法。这些方法中的每一个：

1.  接收用户散列输入
2.  将用户哈希转换为全局变量
3.  从 event_mailers 调用相应的 .html.erb 文件来发送电子邮件

有没有办法在 event_mailer 类的“构造函数”中初始化一次，而不是为每个方法重复步骤 1 和 2？

# 澄清代码：

注册控制器代码：

```
 EventMailer.notify_admins(@user,subject,topic).deliver 
```

event_mailer.rb 代码：

```
class EventMailer < ActionMailer::Base
  @@smtp_settings = {
  ..........
  }

def notify_admins(user,subject,topic)
    @user = user
    @topic = topic
    ......
    mail(:from => 'test@example.com', :to => 'someone@someone.com', :subject => subject)
end

def notify_accounts(user,subject,topic)
    @user = user
    @topic = topic
    ......
    mail(:from => 'test@example.com', :to => 'someone@someone.com', :subject => subject)
end 
```

# jquery - 在 div 悬停时更改 div 多个外观和内容

> ID：13547104
> 
> 赞同：2
> 
> 时间：2012-11-25T00:25:27.930
> 
> 标签：jquery, html, css, opacity

在过去的三天里，我一直在挠头，试图弄清楚如何解决我的问题。

在此页面上想要做什么[http://www.hungryhippo.se/test/contact.html](http://www.hungryhippo.se/test/contact.html) 是当悬停在办公室 DIV 上时，该办公室的人以其他人的不透明度为 50 的方式突出显示%。

第二阶段是同时点击或悬停地图被替换为与该办公室相关的地图。我在尝试解决此问题时注意到的是，我无法使用隐藏，因为我通过 Dreamweaver 获得的谷歌地图小部件出现错误并显示灰色条而不是地图。

然后我从 jsfiddle 使用了这个脚本 /TennG/

因此，我一直在考虑的一种解决方案是使用可见性，然后隐藏的那些将具有高度 0px，然后在应该显示时放大到 100%。

即使你不给我完整的代码（可以理解），也请把我推向正确的方向。不是 HTML 中的能手，jquery 对我来说是新的尝试赶上那一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:14:26.470

您页面上的 HTML 太复杂（您似乎患有 divitis），无法直接回答您需要用它做什么，但在一般意义上，只要您有某种方式将“标题”办公室 div 与个人 div 添加淡入淡出效果相当简单。例如，您可以为`data-`标题赋予一个属性以指定所有相关人员 div 将具有的类，如下所示：

```
<div class="office" data-office="Stockholm">Stockholm Office</div>
<div class="office" data-office="Denmark">Denmark Office</div>
<div class="office" data-office="LA">Los Angeles Office</div>

<div class="person Stockholm">Stockholm<br>Amanda Atkins</div>
<div class="person Stockholm">Stockholm<br>Benjamin Bovington</div>
<div class="person Denmark">Denmark<br>Carolyn Carson</div>
<div class="person LA">Los Angeles<br>Dave Duncan</div>
<div class="person LA">Los Angeles<br>Evelyn Edwards</div> 
```

然后将悬停处理程序添加到具有“office”类的 div 中，该处理程序将使用该`data-office`属性来查找关联的人员 - 或者在您的情况下查找未关联的人员以降低其不透明度：

```
$(document).ready(function() {
    $(".office").hover(function() {
        $(".person").not("." + $(this).attr("data-office")).fadeTo(100, 0.5);
    }, function() {
        $(".person").not("." + $(this).attr("data-office")).fadeTo(100, 1);
    });
}); 
```

演示：http: [//jsfiddle.net/EHrcb/](http://jsfiddle.net/EHrcb/)

（“person” div 也可以使用`data-`属性，但按类选择更简单，所以我就是这样做的。）

我想您可以使用相同的概念为每个办公室显示适当的地图，但使用`.hide()`和`.show()`或设置可见性或其他内容而不是设置不透明度。

请注意，您现有的 html 是无效的：您不应该`id`对多个元素使用相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:17:57.023

使用 jQuery 的人的解决方案

您可以向任何元素添加多个类，以便为您的人员添加代表城市的类，以及用于平移地图的数据属性（请参阅答案底部的最后编辑中的注释）

```
<div class="contact_office_people stockholm" data-map-coordinates="[ lat,lng]"> 
```

在您的办公室位置 DIV`data-`为办公室添加一个 html5 属性，可以使用 jQuery`data()`方法轻松读取

```
<div class="contact_office_container" data-office="stockholm"> 
```

现在可以使用 jQuery`hover()`

```
var $people=$('.contact_office_people');

$('.contact_office_container').hover(function(){
     /* this part of hover covers mouseenter event*/
     /* "this" is the current element behing hovered*/
      var peopleClassSelectorString = '.' + $(this).data('office') ; 
      $people.not( peopleClassSelectorString).css({opacity: .5});        

},function(){
    /* this part of hover covers mouseleave event*/
    $people.css({opacity: 1});
}) 
```

**编辑**：就谷歌地图而言，您可以将数据绑定到可以使用标记 mouseenter/mouseleave 事件检索的地图标记对象。一旦你消化了人员和办公室类别的格式，你可能想要创建一个单独的问题，用谷歌地图标记，以了解如何将数据添加到标记并使用事件检索它。

**第二次编辑**：其实地图并不难，你可以使用谷歌地图的`panTo( coordinates)`方法。我为那些添加了额外的`data-`属性。

请参阅[谷歌地图 API](https://developers.google.com/maps/documentation/javascript/reference#Map)

# debugging - Ollydbg 不在评论中显示 api 调用。它也不会分析程序

> ID：13547107
> 
> 赞同：0
> 
> 时间：2012-11-25T00:25:44.060
> 
> 标签：debugging, ollydbg

我在 Windows 7 x64 上使用 Ollydbg 2.01。任何时候我打开一个程序，Olly 都不会显示 API 调用。这是我想看到的，请注意评论部分中的 API 调用： ![我想看的](../Images/758f2c2512cc7a04750c9f0666d773d5.png)

这就是我所看到的 ![我所看到的](../Images/236472e660d3d327bdd7dac17875048b.png)

请注意缺少 API 调用和一般信息。尝试分析 (Ctrl+A) 也无济于事。我注意到的一件事是尝试设置 .UDD 路径文件不起作用。我设置了 API 帮助文件（可以正常工作）和 .UDD 路径文件，重新启动 Olly，当我查看 .UDD 路径时，它已被单个句点替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:58:42.070

问题是我根本没有使用最新版本的 Olly。下载它解决了我遇到的问题。

# image - 如果原始图像不存在，如何显示默认图像

> ID：13547117
> 
> 赞同：0
> 
> 时间：2012-11-25T00:27:11.247
> 
> 标签：image, .htaccess

我有我的`.htaccess`文件`localhost/site/`夹和文件夹中的默认图像`defaultcarimage-thumb.jpg`。`localhost/site/images/car_model/`当找不到原始图像时，我想显示这个默认图像而不是主图像。为此，我在谷歌上搜索并找到[了这个链接](https://stackoverflow.com/questions/11643640/show-default-image-if-no-image-exists)

我编辑我`.htaccess`的如下：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_URI} \.(gif|jpg|jpeg|png)$ 
RewriteRule .*/images/car_model/defaultcarimage-thumb.jpg [L] 
```

但什么都没有改变。这段代码有什么问题？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T02:19:40.540

RewriteRule 语法是`RewriteRule _url-send-by-user_ _rewrite-to_`

因此，将您的 RewriteRule 更改为以下内容：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_URI} \.(gif|jpg|jpeg|png)$ 
RewriteRule (.*) /images/car_model/defaultcarimage-thumb.jpg [L] 
```

并检查路径，包括 RewriteBase 和 RewriteRule-to 参数路径。

# jquery - 试图建立一个不透明度在悬停时改变的div网格

> ID：13547118
> 
> 赞同：2
> 
> 时间：2012-11-25T00:27:14.660
> 
> 标签：jquery, opacity

请耐心等待，因为这是我尝试从头开始构建的第一个脚本，所以它很糟糕，我知道这一点。

我要创建的是：9 个 div 的网格，当鼠标悬停在 div 上时，其他 8 个淡入为 0.25 不透明度。然后只要鼠标停留在网格上，“1”不透明度级别就会跟随鼠标。无论鼠标在哪里，您都有 1（实际上是 0.999）不透明度，在其他地方您有 0.25。

当鼠标完全退出网格区域时，所有 div 切换回 1 不透明度。

我知道这很复杂，所以我在这里创建了一个 jsfiddle：http: [//jsfiddle.net/Cooperdale/AKuKx/15/](http://jsfiddle.net/Cooperdale/AKuKx/15/)

如果你慢慢移动它实际上可以工作，但脚本太不可靠：如果你移动鼠标更快，你会得到不可预知的结果，例如一组 div 为“on (1)”而其他 div 为“off (0.25)” .

这是我写的脚本：

```
 $(function() {

    $('#jazzmen').mouseleave(function() {
        $('#sq1').css({ opacity: 1 });
        $('#sq2').css({ opacity: 1 });
        $('#sq3').css({ opacity: 1 });
        $('#sq4').css({ opacity: 1 });
        $('#sq5').css({ opacity: 1 });
        $('#sq6').css({ opacity: 1 });
        $('#sq7').css({ opacity: 1 });
        $('#sq8').css({ opacity: 1 });
        $('#sq9').css({ opacity: 1 });
    }
    );

  $('.music9').hover(function() {
    if ($(this).css('opacity') == 1) {
        $(this).css({ opacity: 0.999 });
        if (this.id !== 'sq1') {
            $('#sq1').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq2') {
            $('#sq2').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq3') {
            $('#sq3').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq4') {
            $('#sq4').animate({opacity: 0.25}, 500);
        }        
        if (this.id !== 'sq5') {
            $('#sq5').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq6') {
            $('#sq6').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq7') {
            $('#sq7').animate({opacity: 0.25}, 500);
        }            
        if (this.id !== 'sq8') {
            $('#sq8').animate({opacity: 0.25}, 500);
        }
        if (this.id !== 'sq9') {
            $('#sq9').animate({opacity: 0.25}, 500);
        }
     }

     if ($(this).css('opacity') == 0.25) {
         $(this).animate({opacity: 0.999}, 200);

        if (this.id !== 'sq1') {
            $('#sq1').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq2') {
            $('#sq2').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq3') {
            $('#sq3').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq4') {
            $('#sq4').animate({opacity: 0.25}, 10);
        }        
        if (this.id !== 'sq5') {
            $('#sq5').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq6') {
            $('#sq6').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq7') {
            $('#sq7').animate({opacity: 0.25}, 10);
        }            
        if (this.id !== 'sq8') {
            $('#sq8').animate({opacity: 0.25}, 10);
        }
        if (this.id !== 'sq9') {
            $('#sq9').animate({opacity: 0.25}, 10);
        }
    }

  }

  );
}); 
```

我想通过使用向量或其他东西可以使脚本变得更好。我希望有人可以帮助我使这个更可靠，谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:35:47.747

像这样试试

```
$('.music9')
    .on('mouseover', function() {
        $(this).stop().animate({ opacity: 0.999 })
               .siblings().stop().animate({ opacity: 0.25 });
    })
    .on('mouseleave', function() {
        $('.music9').stop().animate({ opacity: 0.999 });
    }); 
```

[**演示**](http://jsfiddle.net/AKuKx/20/)

# php - 自定义 PHP 站点的分页

> ID：13547121
> 
> 赞同：-4
> 
> 时间：2012-11-25T00:27:31.550
> 
> 标签：php, pagination

我有自定义 PHP 站点并使用此脚本进行分页。

```
echo "Page <strong>$pagenum</strong> of <strong>$last</strong><br><br>";
    if ($pagenum == 1)
    {
    }
    else
        {
        echo "<li> <a href='{$_SERVER['PHP_SELF']}?pagenum=1'><strong>First page</strong></a></li>";
        echo " ";
        $previous = $pagenum-1;
        echo "<li> <a href='{$_SERVER['PHP_SELF']}?pagenum=$previous'>".$previous."</a></li>";
        }

        echo "";

    if ($pagenum == $last)
        {           
        }
    else {
        $next = $pagenum+1;
        echo "  ....  <li><a href='{$_SERVER['PHP_SELF']}?pagenum=$next'> ".$next."</a></li>";
        echo " ";
        echo "<li><a href='{$_SERVER['PHP_SELF']}?pagenum=$last'><strong>Last page</strong></a></li>";
    } 
```

这仅显示最后两页，甚至不显示第一页。如何自定义它以显示前 5 页和后 5 页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:54:06.563

这一切都取决于您的页面的存储位置和方式！如果您使用数据库执行此操作，则需要检查 $pagenum （我们在任何地方都看不到定义）是否具有上一页/下一页...并在此基础上绘制 +/- 5 页锚点！最好做一些循环！

另一方面，如果您没有使用任何数据库并且只想根据 ?pagenum=(number) 显示一些内容，这就是您在这里所做的！一旦用户在新页面上，您需要通过 $_GET['pagenum'] 获取当前页面！以便内容正确显示！

```
$pagenum = isset( $_GET['pagenum'] ) ? intval($_GET['pagenum']) : 0; 
```

那么您只需执行以下操作：

```
echo "<a href=\"{$_SERVER['PHP_SELF']}?pagenum=$first\">first</a>";

for ( $i = $pagenum-5; $i <= $pagenum+5; ++$i ) // check if the pages exist as well somewhere ;)
{
    if ( $pagenum != $i ) 
    {
        echo "<a href=\"{$_SERVER['PHP_SELF']}?pagenum=".($i)."\">$i</a>";
    }
    else
    {
        echo "<a href=\"#\">Current</a>";
    }
}

echo "<a href=\"{$_SERVER['PHP_SELF']}?pagenum=$last\">last</a>"; 
```

如果那个“方法”对你来说太基本了，看看这个[simple-php-mysql-pagination](http://www.goodphptutorials.com/article/show/simple-php-mysql-pagination)，[how-to-paginate-data-with-php](http://net.tutsplus.com/tutorials/php/how-to-paginate-data-with-php/)，[basic-pagination](http://www.phpfreaks.com/tutorial/basic-pagination)

# php - Codeigniter：TinyMCE 图像管理器动态图像路径

> ID：13547122
> 
> 赞同：5
> 
> 时间：2012-11-25T00:27:32.663
> 
> 标签：php, codeigniter, tinymce

我已经将 TinyMCE 安装到我的 codeigniter 构建中，并且我已经包含了图像管理器。

在图像管理器插件（保存在 public/assets 文件夹中）中有一个 php 配置文件，它定义了图像和文件路径常量。

```
define('DIR_IMAGES', 'images/path/here'); etc 
```

我遇到的问题是我需要根据数据库中的某些数据（例如template_name）动态路径，但我不知道如何将正确的文件包含到配置文件中，以便查看动态信息。

因此，如果用户保存了 template_name，那么我需要将路径设为

```
define('DIR_IMAGES', $template_name.'images/path/here'); 
```

我还在 core/MY_Controller.php 中的常量中定义了 template_name，因此如果我可以访问该变量，这将比查询数据库更容易，但任何一种方式都可以。

谁能帮帮我，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:40:29.763

我刚刚自定义了 tinymce 图像，但没有使用 TinyMCE 图像管理器。

但我使用下面链接中的教程。

[如何实现自定义文件浏览器](http://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser)

```
<!-- Start tinymce custom -->
<script type="text/javascript">
 tinyMCE.init({

  <!-- 
      your tiny mce init here 
   --->

   <!-- custom file browser callback -->
   file_browser_callback : 'myFileBrowser',
 });

function myFileBrowser (field_name, url, type, win) {
  // this is your dynamic image path
  var cmsURL = "<?php echo base_url() ?>admin/media/select_image";  <== you can set as you wish
if (cmsURL.indexOf("?") < 0) {
  //add the type as the only query parameter
  cmsURL = cmsURL + "?type=" + type;
   }
else {
  //add the type as an additional query parameter
   // (PHP session ID is now included if there is one at all)
cmsURL = cmsURL + "&type=" + type;
}

   tinyMCE.activeEditor.windowManager.open({
file : cmsURL
,width : 600
,height : 600
,resizable : "yes"
,inline : "yes"
,close_previous : "yes"
,popup_css : true // Disable TinyMCE's default popup CSS
}, {
window : win,
input : field_name
});
return false;
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-02T05:41:35.273

将“data-”属性添加到您的 tinymce 元素并从那里回显您想要的 url。然后在 tinymce activeEditor 中，访问该 data- 属性值。

文本区域

```
<textarea name="description" class="tinymceDescription" data-uploadLink="<?php echo DIR_IMAGES; ?>" ></textarea> 
```

小麦

```
tinymce.init({
    // other settings here

    //either use this if you are uploading automatically.
    images_upload_url: $(tinymce.activeEditor.targetElm).attr("data-uploadLink"),

    //or use this if you want to override tinymce auto upload.
    images_upload_handler: function (blobInfo, success, failure) {
        var xhr, formData;

        var uploadLink = $(tinymce.activeEditor.targetElm).attr("data-uploadLink");

        xhr = new XMLHttpRequest();
        xhr.withCredentials = false;
        xhr.open('POST', uploadLink);

        xhr.onload = function () {
            var json;

            if (xhr.status != 200) {
                failure('HTTP Error: ' + xhr.status);
                return;
            }

            json = JSON.parse(xhr.responseText);

            if (!json || typeof json.location != 'string') {
                failure(xhr.responseText);
                return;
            }

            success(json.location);
        };

        formData = new FormData();
        formData.append('file', blobInfo.blob(), blobInfo.filename());

        xhr.send(formData);
    }
}); 
```

这里的重点是向您展示我如何从当前选择的 tinymce 实例中获取到 tinymce 的动态上传 url。您上传的方式是您的选择，我希望您知道如何处理。但是以太方式，我提供了自动和自定义示例。

# ruby-on-rails-3 - 在 Mac OS X Lion 上安装 rmagick gem 失败

> ID：13547130
> 
> 赞同：0
> 
> 时间：2012-11-25T00:29:14.053
> 
> 标签：ruby-on-rails-3, imagemagick, rmagick

在安装 rmagic gem 的 MAC OS X LION 上，我拼命地遇到这个错误：

```
 Installing rmagick (2.13.1) with native extensions 
    Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

            /Users/joel/.rvm/rubies/ruby-1.9.2-p290/bin/ruby extconf.rb 
    checking for Ruby version >= 1.8.5... yes
    checking for gcc... yes
    checking for Magick-config... yes
    checking for ImageMagick version >= 6.4.9... yes
    checking for HDRI disabled version of ImageMagick... yes
    checking for stdint.h... *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/Users/joel/.rvm/rubies/ruby-1.9.2-p290/bin/ruby
    /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:368:in `try_do': The complier failed to generate an executable file. (RuntimeError)
    You have to install development tools first.
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:452:in `try_cpp'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:834:in `block in have_header'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:693:in `block in checking_for'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:280:in `block (2 levels) in postpone'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:280:in `block in postpone'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:254:in `open'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:276:in `postpone'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:692:in `checking_for'
        from /Users/joel/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/mkmf.rb:833:in `have_header'
        from extconf.rb:193:in `<main>'

    Gem files will remain installed in /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/rmagick-2.13.1 for inspection.
    Results logged to /Users/joel/.rvm/gems/ruby-1.9.2-p290/gems/rmagick-2.13.1/ext/RMagick/gem_make.out
    An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
    Make sure that `gem install rmagick -v '2.13.1'` succeeds before bundling. 
```

事先使用此安装程序安装 ImageMagick

[http://cactuslab.com/imagemagick/](http://cactuslab.com/imagemagick/) 为 Mac OS X Lion 选择了 ImageMagick 6.7.3-2

我花了几个小时在这上面，希望有人可以指导我如何解决这个问题。

附加错误信息：

```
 Can't install RMagick 2.13.1\. Can't find MagickWand.h. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:29:02.450

这里有什么修复它！

C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.7.7-6/include/ImageMagick gem install rmagick

# python - Python中的邻接表和邻接矩阵

> ID：13547133
> 
> 赞同：13
> 
> 时间：2012-11-25T00:29:42.130
> 
> 标签：python, algorithm, adjacency-list, adjacency-matrix

您好，我了解邻接列表和矩阵的概念，但我对如何在 Python 中实现它们感到困惑：

实现以下两个示例的算法可以实现，但从一开始就不知道输入，因为他们在示例中对其进行了硬编码：

对于邻接列表：

```
 a, b, c, d, e, f, g, h = range(8) 
    N = [ 
     {b:2, c:1, d:3, e:9, f:4},    # a 
     {c:4, e:3},                   # b 
     {d:8},                        # c 
     {e:7},                        # d 
     {f:5},                        # e 
     {c:2, g:2, h:2},              # f 
     {f:1, h:6},                   # g 
     {f:9, g:8}                    # h 
   ] 
```

对于邻接矩阵：

```
 a, b, c, d, e, f, g, h = range(8) 
    _ = float('inf') 
    #     a b c d e f g h
    W = [[0,2,1,3,9,4,_,_], # a 
        [_,0,4,_,3,_,_,_], # b 
        [_,_,0,8,_,_,_,_], # c 
        [_,_,_,0,7,_,_,_], # d 
        [_,_,_,_,0,5,_,_], # e 
        [_,_,2,_,_,0,2,2], # f 
        [_,_,_,_,_,1,0,6], # g 
        [_,_,_,_,_,9,8,0]] # h 
```

再次任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T00:52:58.283

假设：

```
edges = [('a', 'b'), ('a', 'b'), ('a', 'c')] 
```

这是矩阵的一些代码：

```
from collections import defaultdict

matrix = defaultdict(int)
for edge in edges:
    matrix[edge] += 1

print matrix['a', 'b'] 
```

```
2 
```

对于“列表”：

```
from collections import defaultdict

adj_list = defaultdict(lambda: defaultdict(lambda: 0))
for start, end in edges:
    adj_list[start][end] += 1

print adj_list['a'] 
```

```
{'c': 1, 'b': 2} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:57:16.320

设置数据结构非常简单。例如，邻接列表示例可以使用如下实现`defaultdict`：

```
from collections import defaultdict

N = defaultdict(dict) 
```

然后，当您开始获得输入时，只需`N[start][end] = weight`对每个输入的边执行此操作。如果您有一些没有出站边的节点（您需要将内部字典的键与外部字典结合以确保您拥有它们全部），那么这组节点将更加棘手。但是即使没有完整的节点列表，很多算法也能正常工作。

邻接矩阵稍微复杂一些，因为您需要知道节点的数量才能正确设置其维度。如果您提前知道它，那么它很容易：

```
number_of_nodes = 8
_ = float("inf")

N = [[_]*number_of_nodes for i in number_of_nodes] 
```

如果不这样做，您可能需要扫描作为输入获得的边以找到编号最高的节点，然后使用上面相同的代码来制作矩阵。例如，如果您的边以`(start, end, weight)`3 元组列表的形式提供，您可以使用以下命令：

```
number_of_nodes = max(max(start, end) for start, end, weight in edges) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T18:43:32.840

我希望下面的示例对您有所帮助，它既有已初始化的图，也有用户自定义的

```
class Graph:
"""
  Read the Intialized Graph and Create a Adjacency list out of it 
   There could be cases where in the initialized graph <map> link
  issues are not maintained
   for example node 2 to 1 link 
    2->1
   there needs to be a link then since undirected Graph
    1->2
"""

def __init__(self,Graph_init):
    self.edge={}
    for keys,values in Graph_init.items():
         for value in values:
             self.addEdge(keys,value);

"""
Add a vertex to graph map
structure is
int => int list
"""
def addVertex(self,v):
    if v not in self.edge:
        self.edge[v]=[]
"""
Add Edge from both vertex to each other
Make sure the nodes are present 
```

"""
def addEdge(self,u,v): if u not in self.edge: self.addVertex(u) if v not in self.edge: self.addVertex(v) if u not in self.edge[v ]: self.edge[v].append(u) 如果 v 不在 self.edge[u]: self.edge[u].append(v)

```
def isEdge(self,u,v):
    if u not in self.edge:
        return False
    if v not in self.edge:
        return False 
    return  u in self.edge[v] 

def display(self):
    for keys,values in self.edge.items():
        print(keys,":=>",values)

"""A initalized Graph (not in form of adjaceny list"""
Graph_init = {1:[2,3,5],
          2:[1,4],
          3:[1,6]};

"""Default constrcutor takes care of making the initialzed map to adjaceny 
list"""                 
g=Graph(Graph_init)
g.addVertex(1)
g.addVertex(2) 
g.addVertex(3)
g.addEdge(1,2)
g.addEdge(3,2)
g.display(); 
```

# php - 在 PHP 中格式化 HTTP 日期消息

> ID：13547135
> 
> 赞同：1
> 
> 时间：2012-11-25T00:30:13.837
> 
> 标签：php

背景：

我正在为 iOS/Android 构建一个简单的聊天程序。后端是一个同样简单的 PHP/MySQL 服务器来处理消息。在某些情况下，消息需要延迟而不是立即发送。为了处理这个功能，我通过 HTTP 向服务器发送消息，该服务器计划何时发布消息。它遵循的格式如下：

```
http://www.company.com:8899/?Env=env&AppName=####&Token=string
&Message=string&ScheduleDate=2010-08-31%2022:10:34%20-0400
&ScheduleAction=action 
```

此问题的 URL 中最相关的部分是 ScheduleDate，它指定了发送消息的时间/日期

问题：

我无法获取当前日期/时间，将其放入所需的格式 (YYY-MM-DD HH:MM:SS)，然后考虑所需的延迟。我想做的是：

(1) 获取当前日期/时间 (2) 添加 5 分钟 (3) 将其放回该 URL 字符串

这是我用来构建字符串的段。我使用 $roomCreateDate 来尝试获取当前日期，以查看是否可以在不考虑延迟的情况下构建字符串。$comand 应该构建字符串以匹配上面的格式。

```
$roomCreateDate = date("Y-m-d H:i:s");

$command =  'localhost:8899/'.
                '?Env='. environment($appversion) .
                '&AppName=EchoFriendly'.
                '&Token=' . $devicetoken .
                '&Message=' . urlencode($apsPayload) .
        '&ScheduleDate=' . urlencode($roomCreateDate) .
        '&ScheduleAction=add'; 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:45:34.240

```
$roomCreateDate = date("Y-m-d H:i:s", strtotime('+5 minutes')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T00:46:12.390

您在添加 5 分钟时遇到问题？

您可以使用以下内容代替：

```
$roomCreateDate = date("Y-m-d H:i:s"); 
```

尝试：

```
$roomCreateDate = date("Y-m-d H:i:s", strtotime('+5 minutes')); 
```

# php - 无法在 Joomla 2.5 上与 Ignite Gallery 交互

> ID：13547136
> 
> 赞同：0
> 
> 时间：2012-11-25T00:30:18.017
> 
> 标签：php, javascript, joomla, joomla-extensions

我在 Joomla 2.5 站点上新设置的 Ignite Gallery 有问题。我对在 Joomla 中进行设置相当陌生。

问题是我的画廊缩略图在画廊页面上可见，但是当我点击它们时，它们什么也没做。如果将它们设置为在图库页面顶部显示和更改大图像，则不会显示任何图像，并且在单击缩略图时不会更改为一个。如果缩略图设置为显示灯箱，则单击缩略图时不会弹出灯箱。

我只能假设我错过了一些重要的步骤，例如在我的模板顶部包含一个 JavaScript 声明。我找不到任何信息说我需要向我的模板添加一个脚本标记，我也无法从 Ignite Galley 网站上的示例库中找出模板上应该包含什么内容。

有谁知道发生了什么？我目前还没有开发人员的支持帐户，但如果没有人 Stack Overflow 知道发生了什么，我会得到一个。

谢谢，特里·罗兹穆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:54:14.960

如果您打开浏览器开发者工具并查看您网站的标签，很可能会运行 2 个版本的 jQuery，因此会导致冲突。如果 Ignite Gallery 有关闭 jQuery 的选项，请尝试这样做，否则找出包含 jQuery 文件的文件并将其替换为以下内容：

```
<?php
  // load jQuery, if not loaded before
  if(!JFactory::getApplication()->get('jquery')){
    JFactory::getApplication()->set('jquery',true);
    $document =& JFactory::getDocument();
    $document->addScript(JURI::root() . "components/component_name/js/jquery.js");
  }
?> 
```

显然将路径更改为适合您的路径

# time - 如何使用 awk 分析时间跟踪报告？

> ID：13547138
> 
> 赞同：0
> 
> 时间：2012-11-25T00:31:00.717
> 
> 标签：time, awk, time-tracking

我正在使用两个很棒的工具，[todotxt](http://todotxt.com/)和[punch](http://code.google.com/p/punch-time-tracking)来跟踪我的时间。有了这些，可以生成如下所示的报告：

```
2012-11-23 (2 hours 56 minutes):
    first task (52 minutes)
    second task (2 hours 4 minutes)
2012-11-24 (2 hours 8 minutes):
    second task (2 hours 8 minutes) 
```

我的问题：分析这种输出的方便方法是什么？例如，我如何总结“第一项任务”/“第二项任务”所花费的时间，或者找出我在较长时间内的总工作时间，例如“2012-11-*”？

所以，我想要一个命令，例如`punch.sh report /regex-for-date-or-task-i'm-interested-in/`.

我[阅读](http://snippets.aktagon.com/snippets/15-Log-file-analysis-with-AWK-Calculating-the-sum-and-average)并[看到](https://github.com/tobym/pom)这是可能的`awk`。但我不知道如何 1）总结分钟 + 小时和 2）提供“带空格的任务名称”作为 awk 的变量。

**更新：** 我还在标记我的任务`+tags`以标记不同的项目（如 中`first task +projecttag`）。因此，将花费在具有特定标签的所有任务上的时间相加也很棒。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:33:46.217

在运行此脚本之前。请取消注释相应的`gsub()`功能。像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS="[( \t)]"
}

/^\t/ {
    line = $0

#### If your input has...

##   No tags, show hrs in each task
#    gsub(/^[\t ]*| *\(.*/,"",line)

##   Tags, show hrs in each task
#    gsub(/^[\t ]*| *\+.*/,"",line)

##   Tags, show hrs in each tag
#    gsub(/^[^+]*\+| *\(.*/,"",line)

####

    for(i=1;i<=NF;i++) {
        if ($i == "hours") h[line]+=$(i-1)
        if ($i == "minutes") m[line]+=$(i-1)
    }
}

END {
    for (i in m) {
        while (m[i] >= 60) { m[i]-=60; h[i]++ }
        print i ":", (h[i] ? h[i] : "0") " hrs", m[i], "mins"
    }
} 
```

# php - 用递归替换循环

> ID：13547141
> 
> 赞同：-2
> 
> 时间：2012-11-25T00:31:11.410
> 
> 标签：php, optimization, loops, recursion

我想问一下，如何使用递归为 php 函数 fibonacci 制作 php 代码。没有“for”循环。我有这样的代码，没有'for'怎么样？多谢你们，，

```
<?php function fibo($n){
if($n==0)
    return 0;
elseif($n==1)
    return 1;
else
    $tambah=fibo($n-1)+fibo($n-2);
    return $tambah;
    }

for($n=0;$n<15;$n++){
    echo fibo($n)."<br/>";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:37:54.240

```
function repeat($func, $times) {
    if ($times <= 0) {
        return;
    }
    $func($times);
    repeat($func, $times - 1);
}

$f = function($n) {
    echo fibo($n)."<br/>";
};

repeat($f, 15); 
```

演示[http://codepad.viper-7.com/F9TKPS](http://codepad.viper-7.com/F9TKPS)

# ruby-on-rails - I18n 用于特定于模型的 Rails 提交按钮

> ID：13547144
> 
> 赞同：37
> 
> 时间：2012-11-25T00:31:40.737
> 
> 标签：ruby-on-rails, internationalization, rails-i18n

我发现 Rails 允许通过以下 in 提交按钮的通用 i18n `config/locales/en.yml`：

```
en:
  helpers:
    submit:
      create: "Create %{model}"
      submit: "Save %{model}"
      update: "Update %{model}" 
```

但是，我希望`create`仅更新一个特定模型的值。我希望文本读作“上传 %{model}”或只是“上传”。如何仅对一个模型（例如：一个`Photo`模型）进行此更改？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-25T01:03:13.613

```
Those labels can be customized using I18n under the +helpers.submit+ key 
and using %{model} for translation interpolation:

  en:
    helpers:
      submit:
        create: "Create a %{model}"
        update: "Confirm changes to %{model}"

It also searches for a key specific to the given object:

  en:
    helpers:
      submit:
        post:
          create: "Add %{model}" 
```

[来源@actionview/lib/action_view/helpers/form_helper.rb](https://github.com/rails/rails/blob/main/actionview/lib/action_view/helpers/form_helper.rb#L2478-L2493)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-09-16T14:58:34.127

如果您使用[i18n-debug gem](https://github.com/fphilipe/i18n-debug)，rails 服务器会将翻译查找尝试打印到控制台，例如：

```
[i18n-debug] en.helpers.submit.post.create => nil 
```

# f# - 如何在 F# 中创建具有 out 参数的成员

> ID：13547146
> 
> 赞同：20
> 
> 时间：2012-11-25T00:32:19.660
> 
> 标签：f#, clr

我知道在 f# 中`out`，当我从 F# 使用参数时，我可以将参数视为结果元组的成员，例如

```
(success, i) = System.Int32.TryParse(myStr) 
```

我想知道的是我如何定义一个成员以具有在 C# 中显示为具有`out`参数的签名。

是否有可能做到这一点？当我从 C# 调用该方法时，我是否可以只返回一个元组并发生相反的过程，例如

```
type Example() =
  member x.TryParse(s: string, success: bool byref)
    = (false, Unchecked.defaultof<Example>) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T01:16:24.963

不，您不能将结果作为元组返回——您需要在从函数返回结果之前将值分配给 byref 值。还要注意这个`[<Out>]`属性——如果你忽略它，这个参数就像一个 C#`ref`参数。

```
open System.Runtime.InteropServices

type Foo () =
    static member TryParse (str : string, [<Out>] success : byref<bool>) : Foo =
        // Manually assign the 'success' value before returning
        success <- false

        // Return some result value
        // TODO
        raise <| System.NotImplementedException "Foo.TryParse" 
```

如果您希望您的方法具有规范的 C#`Try`签名（例如，`Int32.TryParse`），您应该`bool`从您的方法返回 a 并将可能解析的内容`Foo`通过 传递回`byref<'T>`，如下所示：

```
open System.Runtime.InteropServices

type Foo () =
    static member TryParse (str : string, [<Out>] result : byref<Foo>) : bool =
        // Try to parse the Foo from the string
        // If successful, assign the parsed Foo to 'result'
        // TODO

        // Return a bool indicating whether parsing was successful.
        // TODO
        raise <| System.NotImplementedException "Foo.TryParse" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T01:13:12.993

```
open System.Runtime.InteropServices

type Test() = 
    member this.TryParse(text : string, [<Out>] success : byref<bool>) : bool = 
       success <- false
       false
let ok, res = Test().TryParse("123") 
```

# java - JPanel 无法正确绘制

> ID：13547148
> 
> 赞同：-1
> 
> 时间：2012-11-25T00:32:52.827
> 
> 标签：java, swing, jlabel

我已经发布了几个问题，没有任何回应。这个作业几天后就要交了，我不知道这是怎么回事。我正在制作二十一点游戏，我的目标非常简单：我只想在屏幕上画一些牌，以及一些告诉我分数是多少的标签。问题有三个方面，并且可能具有相同的根本原因：

1) 组件没有正确绘制背景。调用`setBackground`什么都不做，并且显式地绘制一个矩形有效，但随后被灰色透支，原因完全让我无法理解。

2）是当我在标签上调用 setText 时，新文本被绘制在旧文本上，而不是替换它。

3）我有一个功能，每次用户按下“Hit”按钮时都会绘制一张新卡，它会给他们一张新卡。当卡片重新计算其位置时，旧卡片会留在屏幕上，因此您会看到同一张卡片的多个副本。

这是绘制所有内容的 JPanel 子类中的代码：

```
package problem5.view;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;

import problem5.controller.BlackJackController;
import problem5.model.Card;
import problem5.model.Player;

public class CardPanel extends JPanel {
    ArrayList<Card> crdCardsOnPanel;
    private final int DEFAULT_PANEL_WIDTH = 600;
    private int nCardHeight = 180;
    private int nCardWidth = 135;
    private int nPanelWidth;
    private int nPanelHeight;
    private int nDeckOffset;
    private int nHeightOffset;
    private int nSecondOffset;
    private int nCardSpaceWidth;
    private int nU;
    private int nSecondPanelVerticalOffset;
    private JButton btnHit;
    private JButton btnStick;
    private JLabel lblPlayerScore;
    private JLabel lblDealerScore;
    private BlackJackController bjc;

    private int nDealerCardXCoords[];
    private int nPlayerCardXCoords[];

    public CardPanel(final BlackJackController bjc) {
        this.bjc = bjc;

        setLayout(null);
        setBackground(Color.green);

        //set button behavior
        btnHit = new JButton("Hit");        
        btnHit.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                bjc.dealCard(getPlayer());
            }
        });
        btnStick = new JButton("Stick");

        lblPlayerScore = new JLabel();
        lblDealerScore = new JLabel();

        resize(DEFAULT_PANEL_WIDTH);
        System.out.printf("Bounds: %d, %d, %d, %d\n", 
                getBounds().x, getBounds().y, getBounds().width, getBounds().height);

        add(btnHit);
        add(btnStick);
        add(lblDealerScore);
        add(lblPlayerScore);
    }

    public void addCard(Card crdNew) {
        crdCardsOnPanel.add(crdNew);
    }

    public void setController(BlackJackController bjc) {
        this.bjc = bjc;
    }

    private BlackJackController getController(){
        return this.bjc;
    }

    public void resize(int nNewWidth) {
        nPanelWidth = nNewWidth;
        nU = (int) (nNewWidth/36.0);
        nPanelHeight = nU * 10;
        nDeckOffset = nU;
        nHeightOffset = nU;
        nSecondOffset = nU;
        nCardSpaceWidth = nU * 27;
        nCardHeight = nU * 8;
        nCardWidth = nU * 6;
        nSecondPanelVerticalOffset = nU * 14;

        //set bounds of buttons and labels
        btnHit.setBounds(new Rectangle(nDeckOffset,
                   getPlayerCardViewRectangle().y,
                   nCardWidth, nCardHeight/2));
        btnStick.setBounds(new Rectangle(nDeckOffset,
                   getPlayerCardViewRectangle().y + nCardHeight/2,
                   nCardWidth, nCardHeight/2));

        lblPlayerScore.setBounds(new Rectangle(1*nU, 11*nU, 16*nU, 2*nU));
        lblDealerScore.setBounds(new Rectangle(19*nU, 11*nU, 16*nU, 2*nU));

        //calculate positions of dealer's and player's cards
        calculateDealerCardXCoords();
        calculatePlayerCardXCoords();

        setPreferredSize(new Dimension(nPanelWidth, 24*nU));
        setMinimumSize(new Dimension(nPanelWidth, 24*nU));

    }

    private void updateLabels() {
        int nPlayerScore = getController().getPlayerScore();
        int nDealerScore = getController().getDealerScore();

        lblPlayerScore.setText(getPlayer().getName() + "'s Score: " + nPlayerScore);
        lblDealerScore.setText("Dealer's Score: "+ nDealerScore);
    }

    public void resize() {
        resize(getBounds().width);
    }

    public Player getPlayer() {
        return getController().getPlayer();
    }

    public Player getDealer() {
        return getController().getDealer();
    }

    private void calculateDealerCardXCoords() {
        int nNumberOfCards = getDealer().getHand().getHandSize();
        int xCoords[] = new int[nNumberOfCards];
        int nOffset;

        if (nNumberOfCards <= 4)
            nOffset = 7*nU;
        else
            nOffset = nCardSpaceWidth/nNumberOfCards;

        for (int i=0; i<nNumberOfCards; i++) {
            xCoords[i] = i*nOffset + nDeckOffset;
        }

        nDealerCardXCoords = xCoords;
    }

    private void calculatePlayerCardXCoords() {
        int nNumberOfCards = getPlayer().getHand().getHandSize();
        int xCoords[] = new int[nNumberOfCards];
        int nOffset;

        if (nNumberOfCards <= 4)
            nOffset = 7*nU;
        else
            nOffset = (nCardSpaceWidth-nCardWidth)/nNumberOfCards;

        for (int i=0; i<nNumberOfCards; i++) {
            xCoords[i] = i*nOffset;
        }

        nPlayerCardXCoords = xCoords;
    }

    public Rectangle getDealerCardViewRectangle() {
        Rectangle rectReturn = new Rectangle();
        Rectangle currentView = getBounds();
        rectReturn.x = currentView.x + nDeckOffset;
        rectReturn.y = currentView.y + nHeightOffset;
        rectReturn.height = nCardHeight;
        rectReturn.width = nCardSpaceWidth;
        return rectReturn;
    }

    public Rectangle getPlayerCardViewRectangle() {
        Rectangle rectReturn = new Rectangle();
        Rectangle currentView = getBounds();
        rectReturn.x = currentView.x + nDeckOffset + 8*nU;
        rectReturn.y = currentView.y + nHeightOffset + nSecondPanelVerticalOffset;
        rectReturn.height = nCardHeight;
        rectReturn.width = nCardSpaceWidth;
        return rectReturn;
    }

    public void updateScreen() {
        resize();
        updateLabels();

    }

    public void paintComponent(Graphics g)
    {
        //draw background
        g.setColor(new Color(15,125,1));
        g.drawRect(0, 0, 36*nU, 24*nU);

        //draw dealer's cards
        for (int i=0; i<nDealerCardXCoords.length; i++) {
            g.drawImage(getDealer().getHand().getCards().get(i).getImage(),
                    nDealerCardXCoords[i] + getDealerCardViewRectangle().x, getDealerCardViewRectangle().y, 
                    nCardWidth, nCardHeight, null, null);
        }

        //draw player's cards
        for (int i=0; i<nPlayerCardXCoords.length; i++) {
            g.drawImage(getPlayer().getHand().getCards().get(i).getImage(),
                    nPlayerCardXCoords[i] + getPlayerCardViewRectangle().x, getPlayerCardViewRectangle().y, 
                    nCardWidth, nCardHeight, null, null);
        }

//      lblDealerScore.repaint();
//      lblPlayerScore.repaint();
    }

} 
```

这是正在发生的事情的截图： [http ://s10.postimage.org/3kokr17o9/Screen_Shot_2012_11_24_at_6_31_39_PM.png](http://s10.postimage.org/3kokr17o9/Screen_Shot_2012_11_24_at_6_31_39_PM.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:43:09.890

好的，问题是我没有将行`super.paintComponent(g)`放在`paintComponent(Graphics g)`. `CardPanel`所以，总是这样做！:)

# arrays - 什么是“错误：可变大小的对象可能未初始化”？

> ID：13547151
> 
> 赞同：0
> 
> 时间：2012-11-25T00:33:06.523
> 
> 标签：arrays, c

我正在尝试使用以下代码填充一个包含 1-100 的数字的数组：

```
#include <stdio.h>

int main()
{
    int num[100];
    int i = 0;

    for (i = 0; i < 100; i++)
    {
        int num[i] = i+1;
    }
} 
```

但我收到此错误：

```
c:18:13: error: variable-sized object may not be initialized 
```

我对编程还是比较陌生，所以我不确定这意味着什么。你能告诉我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:34:35.293

替换这个

```
 int num[i] = i+1; 
```

为了这：

```
 num[i] = i+1; 
```

您已经在顶部声明了数组`int num[100];`

首先声明数组，然后在循环内对其进行迭代。

由于您是新手，最好先阅读一本关于我[推荐](https://rads.stackoverflow.com/amzn/click/com/0672305100)的主题的好书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:34:33.173

问题是`int`在`int num[i] = i+1`. 编译器认为您正在尝试声明一个`num`包含元素的新数组（也称为 ）`i`（这是*可变大小的对象*部分）。只需`int`从该行中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:40:57.720

您在循环中再次声明数组：

```
int num[i] = i+1; 
```

无论如何，这是您的代码中的错误，但编译器的问题不存在：它给您该错误，因为这不是对数组进行初始化的有效声明。如果您只是编写`int num[i];`代码，那么它是有效代码，并且它会毫无错误地编译（好吧，仅来自 C99，旧的 C89 不支持*变长数组*）。这是编译器识别并尝试报告的内容。

# prolog - 用定句语法计算列表中的数字

> ID：13547161
> 
> 赞同：0
> 
> 时间：2012-11-25T00:34:39.643
> 
> 标签：prolog, dcg

我目前正在编写一个程序来执行以下操作。如果我有一个 [0,1]* 列表并且我的示例列表是 [0,1,0,0,1]，我想编写一个返回为我计数。如果数字为 0 ，则计数增加，当数字为 1 时，计数减少。

```
dd(0)-->[].
dd(Newcnt)-->[0],dd(Cnt),{Newcnt is Cnt + 1}.
dd(Newcnt)-->[1],dd(Cnt),{Newcnt is Cnt - 1}. 
```

# ffmpeg - 来自 png 文件的视频幻灯片 + mp3 音频

> ID：13547169
> 
> 赞同：1
> 
> 时间：2012-11-25T00:36:09.930
> 
> 标签：ffmpeg, video-encoding

我有一堆 .png 帧和一个 .mp3 音频文件，我想将它们转换成视频。不幸的是，这些帧并不对应于恒定的帧速率。例如，一帧可能需要显示 1 秒，而另一帧可能需要显示 3 秒。

是否有任何开源软件（例如 ffmpeg）可以帮助我完成此任务？任何反馈将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:31:06.870

这不是一个优雅的解决方案，但它可以解决问题：根据需要复制帧，以便最终获得一些（相当高的）恒定帧速率，30 或 60 fps（如果您需要更高的时间分辨率，则更高）。您只需将在最近的新帧处复制的帧更改为您想要的确切时间戳。精确重复的帧将使用任何合适的编解码器被编码为很小的尺寸（几个字节），所以这是相当紧凑的。然后像往常一样用 ffmpeg 编码。

如果您有很多这些并且需要以“正确”的方式进行操作：您可以在容器（例如 mp4、mkv 等）或编解码器中指示时间。例如，在 H.264 流中，您必须插入 pic_timing 类型的 SEI 消息来指定每个帧的时间。或者，您将不得不编写自己的复用器，依赖于[Matroska](http://www.matroska.org/) (mkv) 或[GPAC](http://gpac.wp.mines-telecom.fr/) (mp4) 等容器库来指示容器中的时间。请注意，并非所有编解码器/容器都支持任意可变帧速率。只有少数编解码器支持编解码器中的时序。此外，如果在容器和编解码器中都指定了时序，则使用容器时序（但如果您将流复用到容器中，复用器应该从编解码器中获取各个帧时间戳）。

# javascript - jquery动画移动和停止

> ID：13547172
> 
> 赞同：0
> 
> 时间：2012-11-25T00:36:48.250
> 
> 标签：javascript, jquery, jquery-animate

我使用查询得到了一个带有图像的 div

```
 $('#super').animate({
                left:'150px'
                }, {
                duration: 10000,}); 
```

我想弄清楚的是如何停止和启动动画。例如，它将开始向左移动 150 像素，然后停止 2 秒，然后向左移动 300 像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:38:35.377

像这样：

```
$('#super').animate({left : '-=150'}).delay(2000).animate({left : '-=300'}); 
```

演示：http: [//jsfiddle.net/E7akr/](http://jsfiddle.net/E7akr/)

（您可以根据需要为调用添加持续时间、缓动和完整设置`.animate()`- 显然这里的关键是[`.delay()`方法](http://api.jquery.com/delay)。）

# unit-testing - 如何使用 ctest 重新运行失败的测试？

> ID：13547175
> 
> 赞同：10
> 
> 时间：2012-11-25T00:37:01.367
> 
> 标签：unit-testing, testing, ctest

我正在使用 CTest 来启动我的项目的测试。我只想启动上次执行失败的测试。

有没有一种简单的方法可以用 CTest 做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-05-11T22:08:22.990

该`--rerun-failed`选项已添加到 CMake 3.0 中的 CTest：

```
 --rerun-failed
    Run only the tests that failed previously

    This  option  tells  ctest to perform only the tests that failed
    during its previous run.  When this option is  specified,  ctest
    ignores  all  other options intended to modify the list of tests
    to run (-L, -R, -E, -LE, -I, etc).  In the event that CTest runs
    and   no   tests  fail,  subsequent  calls  to  ctest  with  the
    --rerun-failed option will  run  the  set  of  tests  that  most
    recently failed (if any). 
```

参考：

*   [CTest 文档](https://cmake.org/cmake/help/v3.0/manual/ctest.1.html)

*   [GitHub 提交](https://github.com/Kitware/CMake/commit/eb2decc02d28f41a3e189d5387be24552c42060f)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T00:18:28.690

我认为，简短的回答是否定的。

但是，您可以使用简单的 CMake 脚本将上次失败的测试列表转换为适合[CTest`-I`选项](http://www.cmake.org/cmake/help/v2.8.10/ctest.html#opt%3a-IStartEndStridetesttestTestfile--tests-information)的格式。

CTest 写入一个名为类似的文件`<your build dir>/Testing/Temporary/LastTestsFailed.log`，其中包含失败测试的列表。如果所有测试都通过后续运行，则不会清除此列表。此外，如果 CTest 在仪表板模式下运行（作为 dart 客户端），则日志文件名将包括文件中详细说明的时间戳`<your build dir>/Testing/TAG`。

下面的脚本没有考虑包括时间戳在内的文件名，但应该很容易扩展它来做到这一点。它读取失败的测试列表并将一个名为的文件写入`FailedTests.log`当前构建目录。

```
set(FailedFileName FailedTests.log)
if(EXISTS "Testing/Temporary/LastTestsFailed.log")
  file(STRINGS "Testing/Temporary/LastTestsFailed.log" FailedTests)
  string(REGEX REPLACE "([0-9]+):[^;]*" "\\1" FailedTests "${FailedTests}")
  list(SORT FailedTests)
  list(GET FailedTests 0 FirstTest)
  set(FailedTests "${FirstTest};${FirstTest};;${FailedTests};")
  string(REPLACE ";" "," FailedTests "${FailedTests}")
  file(WRITE ${FailedFileName} ${FailedTests})
else()
  file(WRITE ${FailedFileName} "")
endif() 
```

然后，您应该能够通过执行以下操作仅运行失败的测试：

```
cmake -P <path to this script>
ctest -I FailedTests.log 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-01T12:28:10.473

基于弗雷泽回答的 Linux 单线：

```
ctest -I ,0,,`awk -F: '{print $1;}' Testing/Temporary/LastTestsFailed.log | paste -d, -s` 
```

# c - 用 c – 模块扩展 Ruby 返回奇怪的值，请解释...

> ID：13547176
> 
> 赞同：0
> 
> 时间：2012-11-25T00:37:18.637
> 
> 标签：c, ruby, irb

我目前正在测试 c 扩展 ruby​​。以下测试模块编译并安装：

```
# include "ruby.h"

static VALUE t_init(VALUE self)
{
  return self;
}

static VALUE t_check(VALUE self)
{
  return 15;
}

VALUE Qmodule;
VALUE FlagValueClass;

void Init_Flags()
{
  Qmodule = rb_define_module("Q");
  FlagValueClass = rb_define_class_under(Qmodule, "Flags", rb_cObject);
  rb_define_method(FlagValueClass, "initialize", t_init, 0);
  rb_define_method(FlagValueClass, "check", t_check, 0);
} 
```

但是当我将它加载到 irb 中时：

```
1.9.3-p286 :002 > require 'Q/Flags'
 => true
1.9.3-p286 :003 > a = Q::Flags
 => Q::Flags
1.9.3-p286 :004 > a = Q::Flags.new
 => #<Q::Flags:0x00000001fa78e0>
1.9.3-p286 :005 > puts a.check()
 => 7 
```

…我得到`7`的不是`15`我所期望的。有人可以解释一下这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:23:17.040

好的; 在尝试返回一个字符串并得到一个转储之后，我终于明白了...... ^^

我的错是没有`ruby.h`仔细阅读文档（尤其是 中的宏）：通过返回 15，Ruby 获得`0xF`了 LSB 集。因此它看到了一个fixnum，它通过将它向右移动一位来获得它的值，所以它以`0x7`. 通过返回`INT2FIX(15)`而不是 just `15`，这得到了解决。

# jquery - 从 BookMarklet 脚本调用 Jquery 函数

> ID：13547178
> 
> 赞同：0
> 
> 时间：2012-11-25T00:37:39.587
> 
> 标签：jquery

我有一个运行 .js 文件的书签。我现在想将该 .js 文件拆分为更集中的模块。

在 scriptA 中，我使用以下代码加载 scriptB：

```
 $.getScript("LoadXML.js")(function(){ 
     loadAllXML() 
 }); 
```

此函数在 scriptB 中：

```
function loadAllXML() {
  $.ajax({
      type: "GET",
      url: "/dataSource.xml",
      dataType: "xml",
      success: function (xml) {
         //how to return xml to ScriptA?
      }
  });        
} 
```

我认为 scriptA 中的代码在 loadAllXML 完成之前继续运行，因此尝试了 jquery 之类的操作[，](http://api.jquery.com/jQuery.when/)但没有任何乐趣。

如何将 xml 返回到 scriptA？

另外，如何从 $.getScript 外部调用 loadAllXML()？

谢谢

# matlab - 在matlab中绘制TSP图的最简单方法是什么？

> ID：13547185
> 
> 赞同：0
> 
> 时间：2012-11-25T00:38:28.113
> 
> 标签：matlab, plot

我已经创建了一个非常简单的旅行商问题算法，现在我需要将结果输出到可视化图形中。

我有一个带有路径权重的矩阵和一个正确排序的点数组（路径）

互联网上充满了非常复杂和详细的 TSP 示例（例如用于 DNA 研究），但我正在寻找一些基本的绘图功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:21:17.453

不完全确定您要绘制什么，但假设它只是生成的路径，它非常简单：

```
x=randperm(10); % Your x coordinates
y=randperm(10); % Your y coordinates
% Now plot these points and make sure you add 1 term to return to the starting point
plot([x x(1)],[y y(1)]) 
```

# iphone - 如何动态更改 UITableView 的 UISwitch？

> ID：13547188
> 
> 赞同：0
> 
> 时间：2012-11-25T00:38:40.213
> 
> 标签：iphone, ios, uitableview, delegates, uiswitch

我有一个`UItableView`每个`UITableViewCell`都包含一个`UISwitch`。现在我的问题是我什么时候会点击一个开关，然后我怎么能点击`OFF`其他开关`UITableViewCell`

在我的代码中，我已经制作了视图，我可以切换。但我`ON/OFF`想要`OFF`除了我选择的开关之外的所有其他开关。

请通过提供示例或源代码示例来帮助我。

最诚挚的问候

**编辑**

我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        switchview = [[UISwitch alloc] initWithFrame:CGRectZero];
        cell.accessoryView = switchview;
        switchCondition = NO;
        [switchview setOn:NO animated:YES];
        [switchview addTarget:self action:@selector(updateSwitchAtIndexPath:) forControlEvents:UIControlEventValueChanged];
        [switchview release];
    }
    if(switchCondition == YES){
    [switchview setOn:YES animated:YES];
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.contentView.backgroundColor = [UIColor clearColor];
    cell.textLabel.text = [NSString stringWithFormat:@"%@",[cellValueArray objectAtIndex:indexPath.row]];
    return cell;
}

- (void)updateSwitchAtIndexPath:(UISwitch*)sender {
    if(sender.on){
        switchCondition = YES;
        [table reloadData];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:40:19.063

更新表的数据源使用的数据模型，然后重新加载表（或至少是可见行）。这将导致每行重新加载，并且每个开关都将使用最新数据进行更新。

编辑：这是您的代码的更新版本：

您需要一个实例变量来跟踪每个开关的状态。创建一个数组来保存 YES 和 NO 值。在下面的代码中，我将假设有一个名为`switchConditions`type的实例变量，`NSMutableArray`该变量已设置为`NSNumber`代表每行的 YES 和 NO 值的对象。这与您的`cellValueArray`. 您还应该摆脱您的`switchView`和`switchCondition`实例变量。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        UISwitchView *switch = [[UISwitch alloc] initWithFrame:CGRectZero];
        cell.accessoryView = switch;
        [switchview addTarget:self action:@selector(updateSwitchAtIndexPath:) forControlEvents:UIControlEventValueChanged];
        [switch release];
    }

    UISwitchView *switch = (UISwitchView *)cell.accessoryView;
    switch.tag = indexPath.row; // This only works if you can't insert or delete rows without a call to reloadData
    BOOL switchState = [switchConditions[indexPath.row] boolValue];
    switch.on = switchState; // this shouldn't be animated

    cell.contentView.backgroundColor = [UIColor clearColor];
    cell.textLabel.text = cellValueArray[indexPath.row];

    return cell;
}

- (void)updateSwitchAtIndexPath:(UISwitch*)switch {
    NSInteger row = switch.tag;
    if (switch.on){
        // This switch is on, turn all of the rest off
        for (NSUInteger i = 0; i < switchConditions.count; i++) {
            switchConditions[i] = @NO;
        }
        switchConditions[row] = @YES;
        [self.tableView reloadData];
    } else {
        switchConditions[row] = @YES;
    }
} 
```

# r - 如何根据R中的接近度将数字排序到列表中

> ID：13547190
> 
> 赞同：4
> 
> 时间：2012-11-25T00:38:59.027
> 
> 标签：r, sorting, vector

假设我有一个向量中的数字列表。我正在尝试提出一个脚本，它将列表划分或排序为（不一定是偶数）集合，这些集合的数字相对于向量中的其他数字彼此相当接近。您可以假设向量中的数字按升序排列。

```
my_list<- c(795, 798, 1190, 1191, 2587, 2693, 2796, 3483, 3668) 
```

也就是说，我需要帮助想出一个脚本，将这些数字划分并分配到集合中

```
set_1<- c(795, 798) # these 2 numbers are fairly close to each other
set_2<- c(1190, 1191) # these numbers would be another set
set_3<- c(2587, 2693, 2796) # these numbers would be another set relative to the other numbers
set_4<- c(3483, 3668)  # the last set 
```

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T01:00:15.647

一般来说，您所要求的称为[聚类分析](http://en.wikipedia.org/wiki/Cluster_analysis)，其中有许多可能的方法和算法，其中许多已经在此处列出的 R 包中可用：http: [//cran.r-project.org/web/views /Cluster.html](http://cran.r-project.org/web/views/Cluster.html)。

例如，您可以使用层次聚类对数据进行聚类。

```
tree <- hclust(dist(my_list))
groups <- cutree(tree, h = 300)
# [1] 1 1 2 2 3 3 3 4 4
split(my_list, groups)
# $`1`
# [1] 795 798
# 
# $`2`
# [1] 1190 1191
# 
# $`3`
# [1] 2587 2693 2796
# 
# $`4`
# [1] 3483 3668 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T01:02:23.597

弗洛德尔的回答要好得多，因为我对聚类分析有足够的了解，可以装满一个小顶针，而且还有空间放 2 颗豌豆，但这是基本的回应：

```
split(my_list, cut(my_list, breaks=seq(0, 4000, by=1000))) 
```

# ruby - 将十六进制打印为 ASCII

> ID：13547193
> 
> 赞同：4
> 
> 时间：2012-11-25T00:39:28.423
> 
> 标签：ruby, string, hex, ascii

我有一个`password`包含这个的字符串

```
\x79\x6F\x75\x63\x61\x6E\x74\x68\x61\x78\x6D\x65 
```

我想将这些打印为 ASCII 字符。我通过获取十六进制字符并`\x`在它们前面添加来创建这个字符串。`puts(password)`不起作用。但是，当我执行以下操作时：

```
shellcode = "\x65\x61"
puts(shellcode) 
```

它工作得很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T01:06:10.700

字符串在 Ruby 中是一种奇怪的野兽，它们的处理方式在 Ruby 1.9 中发生了微妙的变化，这使事情变得有些复杂。

如果您使用单引号创建该字符串并来自其他来源（例如数据库），那么如果您使用`inspect`它，您将看到：

```
"\\x79\\x6F\\x75\\x63\\x61\\x6E\\x74\\x68\\x61\\x78\\x6D\\x65" 
```

您可以通过一些列表处理来处理它：

```
s.scan(/\\x(..)/).map{|a| a.first.to_i(16).chr}.join
# => "youcanthaxme" 
```

解释：

1.  `\\x`我们通过取( )后面的两个字符来提取各个组件`scan(/\\x(..)/)`：`[["79"], ["6F"], ["75"], ["63"], ["61"], ["6E"], ["74"], ["68"], ["61"], ["78"], ["6D"], ["65"]]`

2.  对于列表 ( `map`) 的每个元素，我们将其转换为整数 ( `a.first.to_int(16)`)：`[121, 111, 117, 99, 97, 110, 116, 104, 97, 120, 109, 101]`

3.  `chr`然后我们找到与该 ascii 值 ( )对应的 ascii 字符：`["y", "o", "u", "c", "a", "n", "t", "h", "a", "x", "m", "e"]`

4.  然后我们`join`一起：`"youcanthaxme"`

# iphone - 如何将一个音频文件添加到另一个？

> ID：13547197
> 
> 赞同：1
> 
> 时间：2012-11-25T00:40:34.337
> 
> 标签：iphone, ios, audio, merge, record

我有一个音乐的音频文件，我需要录制歌曲的小片段并在不同的时间添加到音乐文件中。你可以这样理解，我有一条长条纸，我必须将小纸条粘贴在大纸条的不同位置。请提出一些方法。

让我在这里提供更多细节。假设我有 10 个 5 秒的小声音片段，我有一个 50 秒的音乐文件。所以我总共有 11 个声音文件。现在，我必须通过在音乐文件的不同时间后添加 10 个小片段来创建一个最终的音频文件。第一个文件应该在 5.22 秒添加，第二个文件应该在 10.34 秒添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:25:34.533

我将根据您在评论中的澄清回答：

> 假设我有两个 mp3 文件，a.mp3 为 5 秒，b.mp3 为 7 秒，我想混合它们以生成持续时间为 7 秒的 c.mp3。

如评论中所述，我无法为您提供任何 iOS 细节，但我可以让您了解执行此过程所需的逻辑，无论使用何种平台和库。我将使用简单的 C++ 片段来演示。但是，听起来您想要做的是在某处将 a.mp3（以下称为 A）混合到 b.mp3（以下称为 B）中——假设将 A 混合到 B 的开头——以产生最终的音频剪辑 C。

首先，由于您提到它们是 MP3 文件，而不是 WAV 或其他未压缩的 PCM 格式，例如 RAW 或 AIFF，您首先需要将 A 和 B 转换为未压缩的格式，例如`S16_LE`PCM（CD 音频格式 - 签名 16 -bit integer samples, little endian)，这意味着您将使用一组样本值——如果是立体声音频，左右声道交错——用于 A 和 B，因此 C，最后一个可能稍后是完成混音后可选择重新编码为 MP3。

您应该使用一个库来为您处理文件编码/格式问题，但是在使用它们时，它们都——包括用于直接录制或回放的系统接口——产生（即，读取时）或期望（即，当写作）本质上是相同的基本未压缩 PCM 样本流格式。对于一般开发，无处不在的`libsndfile`C 库可用于为您处理大约 47 种文件格式的所有这些，包括 Ogg Vorbis 和 FLAC（但不直接支持 MP3）以及您可能应该使用的 WAV 格式变体聚焦。

为简单起见，我们将只考虑单声道声音片段 A 和 B（即，它只是 A 和 B 的样本值的直接数组，我们不必担心交错的左/右声道）；如果重要的话，您可以通过独立考虑每个立体声通道（A.left 与 B.left 混合，A.right 与 B.right 混合）轻松地将概念扩展到立体声。如果您的特定 A 和 B 是立体声但 C 不需要，您也可以简单地将两个输入音频剪辑预先转换为单声道，具体取决于应用程序。

此外，将音频样本作为浮点值处理通常更容易，因此将未压缩的样本格式转换（或者，通常，您的音频文件库会为您做这件事 -`libsndfile`做）未压缩的样本格式为 [-1.0 范围内的浮点数, +1.0]，其中 1.0 的绝对值表示最大可能的样本值，0.0 表示静音。这些样本值包括随时间（即，在阵列上）的任意音频波形的演变。

首先，您需要确保在混音前有足够的“净空”（防止输出中出现削波）。为什么？混合采用信号叠加（加法）的原理来组合信号/声音：我们将为每个重叠样本将 A 和 B 加在一起，因此如果来自 A 和 B 的相应样本的总和，则混合输出样本可能会“剪辑”超过 1.0 或低于 -1.0。

有几种方法可以防止削波，具体取决于您各自的输入电平以及您是要保留它们的音量比还是简单地将它们相等地组合（或者您是否正在使用立体声并想要使用 A 中最响亮的通道或 B 作为您的参考点——这是我们最后一次听到立体声）。

我们将采用最简单的方法，将 A 和 B 的音量标准化为不超过满量程一半 (0.5) 的峰值，这样当它们加在一起时，它们永远不会削波（即，永远不会有混合输出样本超出范围 [-1.0, +1.0])。如果不是 2 个输入，而是有 3 个输入音频剪辑 X、Y 和 Z 要使用此方法同时混合在一起，我们将在峰值 (0.33) 处将每个标准化为满量程的 1/3。

通过迭代它们各自的样本缓冲区/数组并确定每个样本缓冲区/数组中的最大样本值，`A_peak`找到A 和 B 的峰值。`B_peak`[要遵循的代码。]

分别为每个样本缓冲区 A 和 B确定缩放值`A_scale`，`B_scale`以使它们与各自的峰值相乘产生半刻度。[要遵循的代码。]

```
A_scale * A_peak == 0.5
B_scale * B_peak == 0.5 
```

尔格：

```
A_scale = 1 / (2 * A_peak)
B_scale = 1 / (2 * B_peak) 
```

现在，我们可以将整个样本缓冲区 A 和 B 分别乘以`A_scale`和`B_scale`，它们将被归一化为每个正好半刻度的峰值，并且两者的混合样本永远不会超过满量程。也就是说，即使 A 和 B 的最大值与样本对齐，它们的缩放和总和混合输出也将恰好为 1.0，并且永远不会更大。这种比例系数通常被称为“增益”。

同样，有多种方法可以在混合时对两个或多个样本缓冲区（音频剪辑）之间的增益进行归一化，但这是最简单和最通用的演示方法。另外，它很容易适应将 N 个不同的音频剪辑混合在一起（如上所述），并且稍微简化后，可以实时混合样本*流*（其中整个音频剪辑的样本缓冲区不可用并且样本处理已完成）块，就像录制时经常发生的情况一样）。

现在，我们可以开始混音了。

在这种情况下，A（5 秒）适合 B（7 秒），因此我们可以将混合直接输出到 B 中，但为了一般性，让我们将混合输出到单独的样本缓冲区 C（7 秒），留下输入 A B 原样作为浮点样本缓冲区（可能被重用）。

让我们`A_len`成为样本计数中 A 的长度（这是很容易确定的——当你加载文件时，库会告诉你，尽管从根本上说它只取决于持续时间和采样率），同样对于`B_len`和 B，以及对于输出 C，`C_len == B_len`，因为`B_len > A_len`在您的问题陈述中。

分配 C，我们的混合输出：

```
unsigned int C_len = max(A_len, B_len);
double C[] = new double[ C_len ]; 
```

求 A 和 B 中样本绝对值的峰值：

```
double A_peak = -1.0, B_peak = -1.0;

for (unsigned int i = 0; i < A_len; ++i) A_peak = max( A_peak, fabs(A[i]) );
for (unsigned int i = 0; i < B_len; ++i) B_peak = max( B_peak, fabs(B[i]) ); 
```

求 A 和 B 的半标度归一化增益：

```
double A_scale = 1 / ( 2 * A_peak );
double B_scale = 1 / ( 2 * B_peak ); 
```

将 A 与 B 混合为 C：

```
assert(A_len <= B_len);
assert(B_len == C_len);

unsigned int x = 0;

for (; x < A_len; ++x)
  C[x] = A_scale * A[x] + B_scale * B[x]; // actual mixing of A and B, finally

for (; x < B_len; ++x)
  C[x] = B_scale * B[x]; // as if A[x] were zero & no abrupt gain change 
```

请注意，浮点缓冲区 A 和 B 在混合和归一化后仍保持不变。

A 在没有混合的任何地方都可以被认为是零/静音。

如果我们想在 B 内的任意偏移处开始混合 A（而不是在此处假设的开始处），那么我们只需计算与我们的时间偏移相对应的样本数（`t_offset`以秒为单位，`s_offset = t * sample_rate`以整数样本为单位），并且`x == s_offset`在上述循环结构中开始在混合中包含 A 。[假设是`s_offset + A_len <= C_len`为了防止溢出。]

鼓励人们尝试更多特定于应用程序的方法来规范化混合输入，因为有很多可能性。例如，如果我计算了 A 和 B 样本之和的峰值，而不是分别计算每个峰值（基本上是先混合然后校正），该怎么办？这种[更好的]技术何时不可能实现？

最后，无论何时您混合信号，在混合开始和结束的过渡点（例如，咔嗒声）处（例如，在 A 结束但 B 继续进入 C 的点）总是存在伪影的可能性。这是一个相对较低的风险。但是，此类伪影的一般解决方案是对混音的输入/离开输入进行短时间淡入和淡出，通过平滑混合波形来消除伪影，并且可以快速完成以至听不见.

# php - 用户图像和用户名从 sql 到 html

> ID：13547202
> 
> 赞同：-1
> 
> 时间：2012-11-25T00:42:11.577
> 
> 标签：php, html, sql

我需要帮助将用户图像和用户名从 sql 写入 html 我尝试了这些代码；

```
$query = mysql_query("SELECT * FROM tbl_images WHERE id<'".$id."'");
$row = mysql_fetch_array($query) or die();
$query = mysql_query("SELECT username FROM Users WHERE id<'".$id."'");
echo '<table>';
while($rowtwo = mysql_fetch_array($query)){
echo '<tr>
    <td><img height="115" width="115" src="data:image/jpeg;base64,' . base64_encode( $row['image'] ) . '"/></td>
    <td><font size="2" face="Lucida Sans Unicode" color=#EBEBEB>' .$rowtwo['username'].'</td>
    </tr>';}
echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:45:16.437

你应该尝试对用户名和图像进行连接查询，这样你只需要使用一个查询和一个 mysql_fetch_array()

试试这样：

```
$query = mysql_query("SELECT i.image, u.username FROM tbl_images i JOIN Users u ON u.id=i.id WHERE u.id<'".$id."'");
if(!$query) die("MYSQL: ".mysql_error());     

echo '<table>';
while($row = mysql_fetch_array($query)){
echo '<tr>
    <td><img height="115" width="115" src="data:image/jpeg;base64,' . base64_encode( $row['image'] ) . '"/></td>
    <td><font size="2" face="Lucida Sans Unicode" color=#EBEBEB>' .$row['username'].'</td>
    </tr>';}
echo '</table>'; 
```

但是您的 base64_encode 是否正确？我觉得应该是解码？？？

# c# - 如何允许我的应用程序被托管在 WebBrowser 控件中的 Javascript 操作？

> ID：13547203
> 
> 赞同：0
> 
> 时间：2012-11-25T00:42:13.900
> 
> 标签：c#, javascript, browser

我找到了回答如何将 javascript 注入 WebBrowser 元素的 stackoverflow 问题，但我想知道如何允许 WebBrowser 控件中的 javascript 代码与我的应用程序交互。例如，Web 开发人员可以按照以下方式做一些事情

```
ghostmancersBrowser.app.color="red"; 
```

这将导致应用程序的配色方案切换为红色。

这只是一个例子——我并不需要这个，我只是想知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:54:51.630

您可以使用控件的[`ObjectForScripting`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)属性`WebBrowser`来提供此类功能。基本上，这允许您将应用程序的一部分公开给在`WebBrowser`控件内运行的 Javascript。

你需要做的是：

1.  有一个可以实例化的类，它允许操作您的应用程序（根据您的示例将配色方案设置为红色）。
2.  在包含 WebBrowser 控件的窗体中，将其设置`ObjectForScripting`为所述类的实例。
3.  在 WebBrowser 控件中执行的 Javascript 中，调用所述对象的方法。如果调用其中一种方法，`SetAppColourScheme`您的 Javascript 将是`window.external.SetAppColourScheme('red')`.

# java - String.Split 的行为不符合预期

> ID：13547207
> 
> 赞同：0
> 
> 时间：2012-11-25T00:43:20.183
> 
> 标签：java, string, split

我有一个非常大的字符串。可以在这里看到：http: [//pastebin.com/vqXJ3WV6](http://pastebin.com/vqXJ3WV6)

我想使用正则表达式 3.8 拆分此字符串 当我使用记事本搜索此字符串时，我找到了 3.8 的两个实例。因此，我希望返回的数组的长度为 3。

```
System.err.println(convertPdfToText(save).split("3.8").length); 
```

但是，使用 convertPdfToText 调用它来获取此字符串的长度为 4？

![在此处输入图像描述](../Images/0ad66b476768de45ef05cb43dc0db6fe.png)

我一点也不明白这一点。谁能告诉我发生了什么，因为这极大地改变了我的程序的行为。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:55:59.407

该`.`字符是正则表达式中的特殊字符，字面意思是“任何字符”。因此，您基本上是在寻找`3[anything]8`，并且快速的正则表达式搜索显示确实有 3 个匹配项。两个是您实际查找的有效“3.8”字符串。您的意外匹配位于此字符串的末尾：

```
3.4 单元 3：西班牙语 46953 8
```

解决方案是简单地使用`.`文字，而不是使用反斜杠转义字符：

```
System.err.println(convertPdfToText(save).split("3\\.8").length); 
```

# java - 从 EditorReference 获取源文件？

> ID：13547209
> 
> 赞同：1
> 
> 时间：2012-11-25T00:43:41.920
> 
> 标签：java, eclipse-plugin

在我的 Eclipse 插件中，我有一个用于 CompilationUnitEditor 的 EditorReference 对象，其中显示了我的源文件。现在，如何从 CompilationUnitEditor 中获取此源文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:21:43.993

调用`getEditorInput()`编辑器上的 来取回一个`IEditorInput`对象。编辑器有多种可能的输入（源文件），但如果它是一个文件，那么返回的值也将是一个`IFileEditorInput`具有`getFile()`返回源文件引用的方法的方法。

```
IFile ifile = ((IFileEditorInput) myEditor.getEditorInput()).getFile(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:28:54.067

而不是一个简单的类型转换来使用extends`IFileEditorInput`的事实。这样你得到`IEditorInput``IAdapter`

```
IFile ifile = (IFile) myEditor.getEditorInput().getAdapter(IFile.class); 
```

这适用于`IFileEditorInput`但通常也适用于基于存储系统其他视图的其他类型的编辑器输入。

# java - Java，内部窗口

> ID：13547213
> 
> 赞同：0
> 
> 时间：2012-11-25T00:44:38.523
> 
> 标签：java, swing, jframe, desktop, internal

我有两节课。

一个是计算器（使用 swing），另一个是类似桌面的界面，带有一个基本菜单栏和一个应该调用计算器的按钮。

如何调用桌面内部的计算器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:59:11.397

```
menuItem.addActionListener(new ActionListener {
    public void actionPerformed(ActionEvent e) {
        if (calculatorFrame.isVisible() == false) { // calculator is not visible and button clicked
              calculatorFrame.setVisible(true);
       } else {
              calculatorFrame.setVisible(false);
       }
   } 
```

本质上，你让你的菜单项调用了calculatorFrame。请注意，calculatorFrame 变量必须声明为 final。

# css - 当使用@-ms-viewport 处理 Windows 8 应用程序中的所有屏幕分辨率时，缩小或放大是否重要？

> ID：13547214
> 
> 赞同：1
> 
> 时间：2012-11-25T00:44:51.373
> 
> 标签：css, windows-8

我正在使用 JavaScript / CSS / HTML 创建我的第一个 Windows 8 应用程序，并在我的系统上基于 1920 x 1080 本机分辨率开发了我的应用程序。然后我将以下内容放入我的CSS：

```
@-ms-viewport {
   width: 1920px;
   height: 1080px;
} 
```

这似乎在各种分辨率的模拟器中都可以正常工作，例如，它会将所有内容缩小为 1024x768。我只是想知道我是否以正确的方式去做这件事。我是否应该改为为 1024x768 设计我的应用程序并扩大规模？有关系吗？

# clojure - Clojure - 需要在 repl 中声明的命名空间

> ID：13547218
> 
> 赞同：3
> 
> 时间：2012-11-25T00:45:14.863
> 
> 标签：clojure, namespaces, read-eval-print-loop

假设我想在 REPL 中执行以下操作：

```
(ns a1)

(defn adder [a b]
  (+ a b))

(ns b1
  (:require [a1 :as a]))

(println (a/adder 1 2)) 
```

如果代码是根据声明的命名空间在文件中定义的，这可以正常工作。但是，如果我们在 repl 中执行它 - 那么我们会在这一行得到一个错误：

```
(ns b1
  (require [a1 :as a])) 
```

错误是：

```
FileNotFoundException Could not locate a1__init.class or a1.clj on classpath:   
clojure.lang.RT.load (RT.java:432) 
```

现在我知道我可以明确地将命名空间的全名放在：

```
(println (a1/adder 1 2)) 
```

但我想缩写我的命名空间。（如果我的命名空间是 20 个字符或更多）。

我要更改什么以确保我可以以缩写方式引用 repl 上的不同名称空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:42:07.067

`require`在内部使用该函数`alias`来做你想做的事：

```
(ns b1)
(alias 'a 'a1) 
```

# html - 替代列表中的超链接颜色

> ID：13547222
> 
> 赞同：1
> 
> 时间：2012-11-25T00:45:51.860
> 
> 标签：html, css

我有一个类似的清单

```
<ul>
      <li>ho <a href="#">test</a></li>
      <li>ho <a href="#">test</a></li>
      <li>ho <a href="#">test</a></li>
      <li>ho <a href="#">test</a></li>
</ul> 
```

我喜欢用其他颜色的链接：

以下代码不起作用

```
li.a:nth-child(odd) { color:green }
li.a:nth-child(even) { color:red }​ 
```

这是代码演示

[http://jsfiddle.net/KqRfe/1/](http://jsfiddle.net/KqRfe/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T00:47:04.267

扩展您的选择器以定位锚点而不是列表项本身：

```
li:nth-child(odd) a { 
    color: green;
}

li:nth-child(even) a { 
    color: red;
}​ 
```

演示：http: [//jsfiddle.net/KqRfe/2/](http://jsfiddle.net/KqRfe/2/)

# c++ - 如何在 C++ 中将值附加到数组？

> ID：13547227
> 
> 赞同：-3
> 
> 时间：2012-11-25T00:46:45.670
> 
> 标签：c++, arrays

在**Javascript中**

```
> var arr = new Array();
> arr.push("Hello"); 
```

在**红宝石中**

```
> first_array = ["Matz", "Guido"]
> first_array << "Yukihiro" 
```

在**Python中**

```
> array = ['a', 'b', 'c', 'example']
> li.append("new") 
```

在我看来，它并不像上面的例子那么简单。一个人怎么可能用**C++**做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:49:43.467

这些是高级语言，C++ 不是其中之一。C++ 中的数组包含维度作为其类型的一部分，因此它们的维度不能在运行时更改。

一种“解决方法”是使用动态分配的内存块而不是数组，建议习惯于围绕这个工具进行包装，例如`std::vector`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:51:02.807

*   C++ 默认没有动态数组数据类型

*   最简单的解决方案是使用`std::vector`：

    ```
    std::vector<int> data;
    data.push_back(5); 
    ```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T00:52:23.133

如果您需要不惜一切代价使用数组来执行此操作，则需要调整数组的大小，因为在创建数组时大小是固定的。调整数组大小是我个人不喜欢的解决方案。您必须创建一个大小为“a1.lenght + 1”的新数组 a2，然后将旧数组中的所有值复制到新数组中，然后添加新值。考虑使用具有附加函数（push_back）并且没有固定大小的 std::vector。

# mysql - 创建发票表 SQL 的最佳方法

> ID：13547229
> 
> 赞同：0
> 
> 时间：2012-11-25T00:46:48.307
> 
> 标签：mysql, sql, database

我有这些表：

```
* gasm_clients
id_client INT NOT NULL,
name_client VARCHAR(50) NOT NULL,
cellphone_client VARCHAR(15) NOT NULL

* gasm_invoices
id_invoice INT NOT NULL,
(id_client || client_name) --> I'm not sure of these two columns which use
invoice_total DECIMAL(10,2) NOT NULL
.... 
```

必须澄清客户必须先以另一种形式注册，但要快速开具发票，我只需要客户的姓名而不在客户表中注册。

我想允许用户搜索所有注册的客户或单写客户名称。

```
EX: 
1\. Choose Client
2\. Write name 
```

但我不知道在 SQL 上执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T00:55:33.113

在构建数据库时，您希望最大限度地减少数据重复。第一个选项（id_client）将是我使用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:17:57.157

为了最大程度地减少重复并保持数据完整性，hd1 的方式是正确的。

`GASM_CLIENTS`和`GASM_INVOICES`表之间应该有一个主键-外键关系。`GASM_INVOICES`您可以在各自的 DBMS 中创建表时指定此关系。指定此关系将确保该列`GASM_INVOICES.id_client`包含对表中有效行的引用`GASM_CLIENTS`。

接下来，您不必每次都注册您的客户。这很容易解决。保留`id_client`自动生成的整数主键，`name_client`并`not null`删除列`not null`上的约束`cellphone_client`。此列不需要此约束。它只会增加数据开销和混乱。

此外，除非绝对需要，否则使用主键 (ID) 以外的列从另一个表中引用一个表是一个坏主意。

现在，使用此模式，您可以设计一个前端逻辑，其中当操作员输入客户名称时，软件可以在`gasm_clients`表中搜索它并向操作员显示可供选择的搜索结果。否则，运营商可以选择将此新名称添加为将添加到数据库中的新客户端。

实际`INSERT INTO`查询将太多，无法在此答案中写在这里。只需进行我在这里提到的更改，阅读一些优秀的书籍，如 Korth 和其他关于数据库设计的书籍，你就会明白这一点。

我希望我的回答足够有帮助。

# xml - 如何使用 ASP 处理带有 Web 服务的入站 xml 请求

> ID：13547230
> 
> 赞同：1
> 
> 时间：2012-11-25T00:46:54.233
> 
> 标签：xml, web-services, asp-classic

我每天使用标准 HTML 和经典 ASP 编写代码。我被要求构建一个小的 API，它将使用我们的 ASP/html 平台和 SQL Server 数据库。我在处理 ASP/SQL Server、HTML 等方面没有任何问题。我什至可以编写 XML 请求来查询我们的服务器。但是我不知道从哪里开始设置服务以“侦听”入站 XML 请求。我准备了大约十几个请求/响应例程，但不知道如何对接收该请求的页面进行编码。

有人可以伸出援手吗？

例如：

我们请求他们的方法/功能之一是简单的类别列表请求。使用SOAP，我可以很好地发出请求，只是我不知道如何在服务器端形成接收端来处理请求和响应。

我已经提出了下面的请求，我只需要知道如何处理 Web 服务页面来接收这个请求并用数据进行响应。任何帮助将不胜感激。请看下文。

要发送的 VAR

```
DealerID
UserID
Password
Dept 
```

代码：

```
DIM wagConnect, WAGRequest
wagConnect = "http://www....../catreq.asp"

Dim strResult, strNamespace, strFunction
DIM wagResponse, xmldom, xmlresponse
Dim objXMLHTTP : set objXMLHTTP = Server.CreateObject("Msxml2.XMLHTTP.3.0")

' strNamespace="urn:externalwsdl"
' strFunction="add_line"
' area_code

WAGRequest = "<?xml version=""1.0"" encoding=""utf-8"" ?>" & _
             "<soapenv:Envelope xmlns:s=""http://schemas.xmlsoap.org/soap/envelope/"">" & _
             "<soapenv:Body>" & _
             "<Get_Categories xmlns=""urn:externalwsdl"">" & _
             "<DealerInfo>" & _
             "<DealerID>DealerTest</DealerID>" & _
             "<UserID>K850</UserID>" & _
             "<Password>1234567Pass</Password>" & _
             "</DealerInfo>" & _
             "<CatInfo>" & _
             "<Dept></Dept>" & _
             "</CatInfo>" & _
             "</Get_Categories>" & _
             "</soapenv:Body>" & _
             "</soapenv:Envelope>"

objXMLHTTP.open "POST", "" & wagConnect & "", False
objXMLHTTP.setRequestHeader "Content-Type", "text/xml; charset=UTF-8"
objXMLHTTP.setRequestHeader "Content-Length", Len(WAGRequest)
'objXMLHTTP.setRequestHeader "SOAPMethodName", strFunction
objXMLHTTP.setRequestHeader "SOAPAction", wagConnect
'strNamespace & "#" & strFunction

'send the request and capture the result
Call objXMLHTTP.send(WAGRequest)

xmlresponse = objXMLHTTP.responsetext

wagResponse = ("<pre>"& replace(replace(xmlresponse, "<", "&lt;"), ">", "&gt;<br>") &"</pre>")

Set xmldom = Server.CreateObject("Microsoft.XMLDOM")
xmldom.async = false
xmldom.loadxml(objXMLHTTP.responsexml.xml)

IF objXMLHTTP.status <> 200 THEN 
   wagResponse = "Could not get XML data."
END IF

'Response elements and attributes

'Result-Code (1 = Success, 0 = Failed)
'Category Count {Cat_Count, int} (Number of Categories returned)
'Category
'Child elements:    'CatName {Cat_Name, nvarchar} (Short Text)
'Category Subtitle {Cat_Desc, nvarchar} (SubTitle)
'Category Desc {Cat_Memo, ntext} (long description)
'Picture URL {Cat_Pic, ntext} (URL)'

'ResultCode = xmldom.getElementsByTagName("result-code")(0).text

If ResultCode = 1 THEN
   CatCnt = xmldom.getElementsByTagName("Cat_Count")(0).text
   CatName = xmldom.getElementsByTagName("Cat_Name")(0).text 
   CatDesc = xmldom.getElementsByTagName("Cat_Desc")(0).text 
   CatMemo = xmldom.getElementsByTagName("Cat_Memo")(0).text 
   CatPic = xmldom.getElementsByTagName("Cat_Pic")(0).text 
End if 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:55:51.093

您应该简单地制作一个脚本，通过 POST 以 xml 格式获取指令。然后脚本应该从发布的 xml 内容中检索其变量，然后生成 xml 输出并通过 response.write() 轻松发送

# apache-flex - 库组件中未拾取的样式

> ID：13547239
> 
> 赞同：0
> 
> 时间：2012-11-25T00:49:11.967
> 
> 标签：apache-flex, flex4, flex4.6

我有一个 Flex 项目和 Flex 库项目。我在库中定义了诸如 MyGroup 和 MyContainer 之类的视图组件。在 Flex 项目中，我有应用程序 MyApplication 以及对样式表 style.css 的引用。库中的视图组件引用样式，例如“myStyle”。这些在 Flex 主应用程序项目的 styles.css 中定义。这些不会在运行时被拾取或应用。

有什么我做错了，有没有办法解决这个问题？我考虑过将我的样式表移动到我的库项目中，但是我该如何包含它（因为我通常在主应用程序中包含样式）。我是否必须将它包含在每个视图组件中？

# perl - 打印一列的值在另一列中指定的次数

> ID：13547245
> 
> 赞同：2
> 
> 时间：2012-11-25T00:50:16.633
> 
> 标签：perl, unix

我有要在 unix 中重新格式化的数据，将第 2-3 列创建一个新列（在示例中称为 when ），但在弄清楚如何执行此操作时遇到了麻烦。在不更改作为数据标识符的第 4-7 列的情况下，我想打印第 2 列的第 3 列中指定的次数，然后打印一个值（在本例中为 31）N（= 每个标识符的第 1 列) 减去（每个标识符第 3 列的总和）次数。因此，重新格式化的数据对于每个标识符将总共有 N 行。开始的数据如下所示：

```
N   time    awake   line    sex temp    rep
9   15  1   188 f   25  1
9   20  1   188 f   25  1
9   21  1   188 f   25  1
9   28  1   188 f   25  1
10  12  1   205 m   25  1   
10  14  3   205 m   25  1   
10  16  1   205 m   25  1   
10  18  1   205 m   25  1   
10  19  2   205 m   25  1   
10  22  1   205 m   25  1   
10  24  1   205 m   25  1 
```

重新格式化的数据应该看起来像这样：

```
line    sex temp    rep when
188 f   25  1   15
188 f   25  1   20
188 f   25  1   21
188 f   25  1   28
188 f   25  1   31
188 f   25  1   31
188 f   25  1   31
188 f   25  1   31
188 f   25  1   31
205 m   25  1   12
205 m   25  1   14
205 m   25  1   14
205 m   25  1   14
205 m   25  1   16
205 m   25  1   18
205 m   25  1   19
205 m   25  1   19
205 m   25  1   22
205 m   25  1   24 
```

我的猜测是它需要某种循环，我认为伪代码看起来像这样：

```
for (each columns 4-7)
    tot = (column 1)
    rem = tot - sum (column 3)
    for (i=0; i <= column 3; i++)
        print column 2"\n"
    for (j=0; i <= rem; j++)
        print "31\n" 
```

任何帮助深表感谢！

编辑添加：我尝试从下面的@mvp 修改 perl 代码，但它不太正确。我使用 awk 将原始列 4-7 重新格式化为一个名为 id 的字段（和变量）。任何意见？

```
print "id       when\n"; # output header
my $temp='188.f.25.1';
my $count;
my $rest;
my $total;
while(my $input = <>) {
    my ($n, $time, $awake, $id)
        = split /\s+/, $input; # read each line
    next if $n eq 'N'; # skip input header line
    if ($id eq $temp) {
        $count++;
        for (1..$awake) {print "$id     $time\n";}
        $total = $n;
        next;
    }
    else {
        $rest=$total-$count;
        for (1..$rest) {print "$temp    31\n";}
    }
    $count=0;
    $temp = $id;
    next;
} 
```

以及修改后的输入文件：

```
N       time    awake   line.sex.temp.rep
9       15      1       188.f.25.1
9       20      1       188.f.25.1
9       21      1       188.f.25.1
9       28      1       188.f.25.1
10      12      1       205.m.25.1
10      14      3       205.m.25.1
10      16      1       205.m.25.1
10      18      1       205.m.25.1
10      19      2       205.m.25.1
10      22      1       205.m.25.1
10      24      1       205.m.25.1
10      10      1       206.m.25.1
10      14      1       206.m.25.1
10      18      1       206.m.25.1
10      20      1       206.m.25.1
10      24      1       206.m.25.1
10      26      1       206.m.25.1
10      27      1       206.m.25.1
10      28      2       206.m.25.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:23:25.213

这是使用`awk`. 它使用未修改的输入文件。像这样运行：

```
awk -f script.awk file{,} | column -t 
```

内容`script.awk`：

```
BEGIN {
    print "line sex temp rep when"
}

FNR==NR && NR>1 {
    a[$4,$5,$6,$7]+=$3
    next
}

FNR>1 {
    for (i=1;i<=$3;i++) {
        print x=($4 FS $5 FS $6 FS $7), $2
        a[$4,$5,$6,$7]--
        var++
    }

    if (a[$4,$5,$6,$7]==0) { 
        for (i=1;i<=$1-var;i++) {
            print x, "31"
        }
        var=0
    }
} 
```

结果：

```
line  sex  temp  rep  when
188   f    25    1    15
188   f    25    1    20
188   f    25    1    21
188   f    25    1    28
188   f    25    1    31
188   f    25    1    31
188   f    25    1    31
188   f    25    1    31
188   f    25    1    31
205   m    25    1    12
205   m    25    1    14
205   m    25    1    14
205   m    25    1    14
205   m    25    1    16
205   m    25    1    18
205   m    25    1    19
205   m    25    1    19
205   m    25    1    22
205   m    25    1    24 
```

或者，这是单线：

```
awk 'BEGIN { print "line sex temp rep when" } FNR==NR && NR>1 { a[$4,$5,$6,$7]+=$3; next } FNR>1 { for (i=1;i<=$3;i++) { print x=($4 FS $5 FS $6 FS $7), $2; a[$4,$5,$6,$7]--; var++ } if (a[$4,$5,$6,$7]==0) { for (i=1;i<=$1-var;i++) print x, "31"; var=0 } }' file{,} | column -t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:00:33.070

这就是我在 Perl 中的做法：

另存为`myscript.pl`：

```
#!/usr/bin/perl

use strict;
use warnings;

print "line    sex temp    rep when\n"; # output header
while(my $input = <>) {
    my ($n, $time, $awake, $line, $sex, $temp, $rep)
        = split /\s+/, $input;
    next if $n eq 'N'; # skip input header line
    for (1..$awake) {
        print "$line $sex  $temp $rep $time\n";
    }
} 
```

称它为`myscript.pl <a.txt >b.txt`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T06:22:30.343

```
perl -F -lane 'if($.==1){print "@F[3,4,5,6,1]"}for($i=0;$i<$F[2];$i++){print "@F[3,4,5,6,1]"}' your_file 
```

或者你也可以使用这个：

```
perl -F -lane 'for($i=0;($i<$F[2])||($.==1);$i++){print "@F[3,4,5,6,1]";if($.==1){last}}' your_file 
```

测试如下：

```
> cat temp
N       time    awake   line    sex     temp    rep
9       15      1       188     f       25      1
9       20      1       188     f       25      1
9       21      1       188     f       25      1
9       28      1       188     f       25      1
10      12      1       205     m       25      1
10      14      3       205     m       25      1
10      16      1       205     m       25      1
10      18      1       205     m       25      1
10      19      2       205     m       25      1
10      22      1       205     m       25      1
10      24      1       205     m       25      1 
```

执行：

```
> perl -F -lane 'if($.==1){print "@F[3,4,5,6,1]"}for($i=0;$i<$F[2];$i++){print "@F[3,4,5,6,1]"}' temp
line sex temp rep time
188 f 25 1 15
188 f 25 1 20
188 f 25 1 21
188 f 25 1 28
205 m 25 1 12
205 m 25 1 14
205 m 25 1 14
205 m 25 1 14
205 m 25 1 16
205 m 25 1 18
205 m 25 1 19
205 m 25 1 19
205 m 25 1 22
205 m 25 1 24
> 
```

# plugins - 为 Emacs 安装插件

> ID：13547247
> 
> 赞同：3
> 
> 时间：2012-11-25T00:50:32.967
> 
> 标签：plugins, emacs, installation

我正在使用[此](http://bruda.ca/emacs/prolog_mode_for_emacs)说明页面为 Emacs 安装 Prolog 插件，它显示以下内容：

```
In a nutshell, place the downloaded file where Emacs can see it, 
and insert into your ~/.emacs or ~/.xemacs/init.el the following 
lines: 
```

将文件放在 Emacs 可以看到的地方是什么意思，如何插入 ~/.emacs？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:45:30.877

“将文件放在 Emacs 可以看到的地方”是指将文件`prolog.el`放在一个目录中，该[**目录**专门用于存放其他每个用户的 Emacs 特定文件](http://emacswiki.org/emacs/DotEmacsDotD)，例如放在`~/.emacs.d/`(like `~/.emacs.d/elisp`) 的子目录中，如果需要，[将该目录添加到`load-path`](http://www.emacswiki.org/emacs/LoadPath).

其他说明是指修改[标准 Emacs 初始化**文件**](http://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html)，例如`~/.emacs.d/init.el.`将这些说明中给出的行插入到您自己的 Emacs 初始化文件中，然后保存文件并重新启动 Emacs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:54:59.963

根据您的发行版，可能已经发布了 prolog-mode。如果你打开一个 prolog 文件，检查模式行（底部的东西）在`prolog`某处说，你很高兴。也许它没有正确关联，请尝试`M-x`(Alt + x) 并键入 `prolog-mode`，然后按 Enter。现在`prolog`应该出现在模式行中。如果它没有继续并安装文件。否则，您的计算机上有一堆垃圾软件，您必须手动更新。

# java - 我一直试图通过数组编写循环以获取 toString 中的结果

> ID：13547252
> 
> 赞同：0
> 
> 时间：2012-11-25T00:51:38.330
> 
> 标签：java

```
/**
     * get a formatted string with information about a competition.
     * 
     * @return String String with information about a competition.
     * 
     * The output should be in the following format:
     * <pre>
     * Rodent's Information:
     * Rat RFID 787878787
     * Gender: F
     * Vaccination status: false
     * 
     * Maze Information:
     * Start Time: 00:00:00
     * End Time: 01:00:05
     * Actual Time: 01:00:05
     * Contest Time: 00:59:30
     * </pre>
     * 
     */
    public String toString()
    {
        // your code here, replace the "X" and -9 with appropriate
        // references to instance variables or calls to methods
        String output = "Competition Description: " + this.desc
            + "\nCompetition Count: " + this.count + "\n";
        output += "Competition Results:" + "\n";
        // loop through the array from beginning to end of populated elements
        for (int i = 0; i < this.nextPos; ++i)
        {
            this.results[i].getRFID();
            this.results[i].getGender();

            // get toString() for each result

        return output;
    } 
```

大家好，我已经坚持写这个 toString 好几天了。有人可以帮我弄清楚如何编写一个循环来从头到尾显示数组中的所有元素。我只是一直卡住。如您所见，我已经开始编写一个循环，但现在我不知道它是否开始正确。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T00:54:31.570

你还没有在你的循环中添加你得到的`output`字符串！`for()`您需要将其更改为：

```
for (int i = 0; i < this.nextPos; ++i)
{
    output += this.results[i].getRFID();
    output += this.results[i].getGender();
    output += "\n";
} 
```

添加您喜欢的任何其他格式。代码中的注释表明，您需要在每次循环中添加一个类似“Rodent's Information:”的字符串，以及每个字段的标题和指示符以及它们之间的换行符。

祝你好运！

此外，为了扩展@Matt 在您问题下方的评论中所说的内容，您在`for()`循环中的比较非常奇怪，并且可能没有按照您的意愿进行（尽管可能是这样，而且我们都只是公约的坚持者）。通常，在遍历数组或集合时，您将比较集合的长度，而不是“下一个位置”中的某个值（这是我假设变量的含义）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:00:36.153

嗯，如果你在循环中这样做并且你经常这样做，你可能会考虑`StringBuilder`. `String`s 在 Java 中是不可变的，因为它，您只会在该循环中随处生成一堆新字符串。伊克维姆

一个简短的例子

```
StringBuilder output = new StringBuilder("");
for(int i = 0; i < this.nextPos; ++i) {
 output.append(this.results[i].getRFID());
 ...  
}

return output.toString(); 
```

# java - Android Capturing OnFocusChange 或最近在警报对话框上启动

> ID：13547254
> 
> 赞同：1
> 
> 时间：2012-11-25T00:51:58.737
> 
> 标签：java, android, android-alertdialog

我有一个名为“对话框”的警报对话框，但是当我按下最近按钮时不会调用 onFocusChange。当出现警报对话框时，是否有任何方法可以捕捉到最近调用按钮？

```
 final AlertDialog dialog = builder.create();
        dialog.show();  

        enterPin.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                if (hasFocus) {

                    Log.w("com.app", "focus");

                }
                else
                {
                    Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
                    sendBroadcast(closeDialog);
                    Log.w("com.app", "closeDialog");

                }
            }
        }); 
```

# visual-studio-2012 - 如何从 Visual Studio 插件中更改编辑器字体？

> ID：13547255
> 
> 赞同：2
> 
> 时间：2012-11-25T00:52:04.977
> 
> 标签：visual-studio-2012, visual-studio-addins

我希望能够使用键盘快捷键更改 Visual Studio 2012 中的编辑器字体。由于宏已被删除，我知道这只留下了编写加载项的选项。

因此，为了澄清，我想编写一个插件，将编辑器字体设置*为单个特定字体*。我不希望它弹出任何对话框，就好像它那样，我还不如使用工具→选项。

我已经有一个添加 Visual Studio 命令的加载项，所以我已经知道如何做到这一点。我也知道如何为其分配键盘快捷键，所以这个问题与其中任何一个都无关。

Visual Studio 加载项 API 中用于更改文本编辑器字体的命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:40:19.847

这是答案：

```
private void setFont(string fontFamily, int fontSize)
{
    foreach (Property prop in _applicationObject.Properties["FontsAndColors", "TextEditor"])
    {
        if (prop.Name == "FontFamily")
            prop.Value = fontFamily;
        else if (prop.Name == "FontSize")
            prop.Value = fontSize;
    }
} 
```

`_applicationObject`假定包含`DTE2`宿主环境的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T12:22:26.950

+1 蒂姆维。作为对他的回答的奖励，以下内容对我更改“工具”->“选项”中的属性很有用：

```
_DTE2.Properties["TextEditor", "General"].Item("DetectUTF8WithoutSignature").Value = true;
_DTE2.Properties["Environment", "Documents"].Item("CheckLineEndingsOnLoad").Value = true; 
```

# python - 从 Python long 访问大数的最高位

> ID：13547261
> 
> 赞同：4
> 
> 时间：2012-11-25T00:53:08.740
> 
> 标签：python, long-integer, bignum

我在 python 中处理数万位数的数字。long 类型在对这些数字执行数学运算时效果很好，但是我无法以足够快的方式访问这些数字的最高位。请注意，我不确切知道该数字包含多少位数。“最高位”是指最高位的数字，最低位可以使用模数快速访问。

我可以想到两种在 python 中访问这些数字的方法，但它们对于我的目的来说都太慢了。我尝试过转换为字符串并通过数组方法访问数字，但是当您有 10,000 多个数字时，类型转换很慢。或者，我可以简单地屏蔽位并截断，但这需要我知道 long 中有多少位。查找 long 中的位数需要在计数器上循环和进行掩码测试，这肯定会比字符串转换慢。

[从这里的描述](http://www.python.org/dev/peps/pep-0237/)看来，long 类型实际上确实包含一个 bignum 数组。有什么方法可以访问存储 long 的底层数据结构，或者可能检查 long 从基本类型中有多少位？

如果人们有兴趣，我可以提供一个带有基准的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T01:16:24.710

一种简单的方法，无需深入研究 long 类型的低级实现：

```
>>> n = 17**987273 # 1.2 million digits number

>>> digits = int(math.log10(n))

>>> k = digits - 24 # i.e. first 24 digits

>>> n / (10 ** k)
9953043281569299242668853L 
```

在我的机器上运行得非常快。我试图得到这个数字的字符串表示，这需要很长时间。

对于 Python 3.x，请使用`n // (10 ** k)`

这个大数字的一些时间（它快 140 倍）：

```
%timeit s = str(n)[:24]
1 loops, best of 3: 57.7 s per loop

%timeit n/10**(int(math.log10(n))-24)
1 loops, best of 3: 412 ms per loop

# With a 200K digits number (51x faster)

%timeit s = str(n)[:24]
1 loops, best of 3: 532 ms per loop

%timeit n/10**(int(math.log10(n))-24)
100 loops, best of 3: 10.4 ms per loop

# With a 20K digits number (19x faster)

%timeit s = str(n)[:24]
100 loops, best of 3: 5.4 ms per loop

%timeit n/10**(int(math.log10(n))-24)
1000 loops, best of 3: 272 us per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T01:19:00.790

Python 2.7 有[`bit_length()`](http://docs.python.org/2/library/stdtypes.html#additional-methods-on-integer-types)整数方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T02:44:00.933

这是一个非常丑陋的衬线，它将提取前几位小数：

```
(x >> (x.bit_length()-50))*(10**(math.fmod((x.bit_length()-50)*math.log(2)/math.log(10), 1))) 
```

如果您的 x 值约为 10,000 位十进制数字，您应该得到一个精确到 12 位左右的答案。随着 x 变大，您的准确性会降低。

如果您愿意使用外部模块，我会看[gmpy2](http://code.google.com/p/gmpy/)。gmpy2 库提供对多精度整数和小数运算的 GMP（或 MPIR）库、多精度浮点运算的 MPFR 库和多精度复数运算的 MPC 库的访问。gmpy2 整数比 Python 的原生 long 更快，您可以将 long 整数转换为浮点数以仅提取前导数字。上面的一个衬里就变成了：

```
gmpy2.mpfr(x).digits()[0] 
```

即使数字变大，gmpy2 方法也会保持准确性。

免责声明：我维护 gmpy2。

# php - PHP PDO 插入 MySQL 错误 SQL 语法

> ID：13547262
> 
> 赞同：2
> 
> 时间：2012-11-25T00:53:08.400
> 
> 标签：php, mysql, syntax, pdo

好吧，我刚开始使用这个新的 php PDO，并且遇到了这个问题。我有一个包含 19 个字段左右的表的数据库。有些是由数据库自己自动处理的，因此在代码的插入部分中省略了。

当进程尝试将电话号码输入数据库时​​出现错误。数据库设置为接受 12 个 varchar。该号码也有 12 个 varchar，但是当我查看调试信息时，看起来整个函数正在省略电话号码的最后一位并给我一个错误：

```
array (
  0 => '42000',
  1 => 1064,
  2 => 'You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near \') 
```

我不确定这里发生了什么。如果有人能指出我正确的方向，那就太好了。这是我的脚本代码。

```
<?php
require_once('../wp-includes/class-phpass.php');

//Create var names
$first_name = $_POST['F_Name'];
$last_name = $_POST['L_Name'];
$phone_number_1 = $_POST['Pnumber1'];
$phone_number_2 = $_POST['Pnumber2'];
$address = $_POST['Address'];
$state = $_POST['State'];
$city = $_POST['City'];
$zip_code = $_POST['Zip'];
$email_1 = $_POST['Email1'];
$email_2 = $_POST['Email2'];
$username = $_POST['Uname'];
$password_1 = $_POST['Pass'];
$jed = $_POST['Jednostka'];
$dob = $_POST['DOB'];
$stopien = $_POST['Stopien'];
$funk = $_POST['FUNK'];
$fullName = $_POST['F_name'].' '.$_POST['L_name'];  
$hasher = new PasswordHash(8, True);
$password = $hasher->HashPassword($password_1);
$ENC =MD5($password_1);
$ERRmsg = "";

    //Checks if any feilds were left empty and creates an error message to display
        if(empty($first_name)) $ERRmsg .= 'You did not enter a First Name!  Pleaase go back and try again! <br/>';
        if(empty($last_name)) $ERRmsg .= 'You did not enter a Last Name!  Please go back and try again! <br/>';
        if(empty($phone_number_1)) $ERRmsg .= 'You did not enter a Phone Number!  Please go back and try again! <br/>';
        if(empty($address)) $ERRmsg .= 'You did not enter an Address!  Please go back and try again! <br/>';
        if(empty($state)) $ERRmsg .= 'You did not choose a State!  Please go back and try again! <br/>';
        if(empty($city)) $ERRmsg .= 'You did not enter a City!  Please go back and try again! <br/>';
        if(empty($zip_code)) $ERRmsg .= 'You did not enter a Zip Code.  Please go back and try again!<br/>';
        if(empty($email_1)) $ERRmsg .= 'You did not enter a Email.  Please go back and try again!<br/>';
        if(empty($email_2)) $ERRmsg .= 'You did not re-enter you Email.  Please go back and try again!<br/>';
        if(empty($username)) $ERRmsg .= 'You did not enter a Username.  Please go back and try again!<br/>';
        if(empty($password_1)) $ERRmsg .= 'You did not enter a password!  Please go back and try again!<br/>';
        if(empty($jed)) $ERRmsg .= 'You did not choose a Jednostka!  Please go back and try again!<br/>';
        if(empty($dob)) $ERRmsg .= 'You did not enter a Date of Birth!  Please go back and try again!<br/>';
        if(empty($stopien)) $ERRmsg .= 'You did not choose a Stopien!  Please go back and try again!<br/>';
        if(empty($funk)) $ERRmsg .= 'You did not enter a Funkcjia!  Please go back and try again!<br/>';
        if($email_1 !== $email_2) $ERRmsg .= 'Your emails did not match!  Please go back and try again!<br/>';

            //Checks to see if error message is empty, if empty does rest of code
            if(empty($ERRmsg))
            {
                try {
                $wdp = new PDO('mysql:host=localhost; dbname=***********', '***********', '***********');
                    echo "<p>Connected to Warta Database</p>\n";
                $wdp->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                        //prepare the SQL statement
                            $wdp_insert = $wdp->prepare
                            ("INSERT INTO Users( 
                            F_NAME,
                            L_Name,
                            P_number1,
                            P_number2,
                            Address,
                            City,
                            State,
                            Zip,
                            Email,
                            username,
                            password,
                            Jednostka,
                            DOB,
                            Stopien,
                            Funkcjia,
                            High,
                            Active,
                            user_email,
                            user_login,
                            user_pass,
                            user_nicename,
                            display_name,
                        )
                        VALUES (
                            :fname,
                            :lname,
                            :pnumber1,
                            :pnumber2,
                            :address,
                            :city,
                            :state,
                            :zip,
                            :email,
                            :username,
                            :password,
                            :jednostka,
                            :DOB,
                            :Stopien,
                            :funkcjia,
                            :jednostka,
                            0,
                            :email,
                            :username,
                            :password,
                            :fullname,
                            :fullname,
                        )"
                        );

                                //Bind the paramaters
                                $wdp_insert->bindParam(':fname', $first_name);
                                $wdp_insert->bindParam(':lname', $last_name);
                                $wdp_insert->bindParam(':pnumber1', $phone_number_1);
                                $wdp_insert->bindParam(':pnumber2', $phone_number_2);
                                $wdp_insert->bindParam(':address', $address);
                                $wdp_insert->bindParam(':city', $city);
                                $wdp_insert->bindParam(':state', $state);
                                $wdp_insert->bindParam(':zip', $zip_code);
                                $wdp_insert->bindParam(':email', $email_1);
                                $wdp_insert->bindParam(':username', $username);
                                $wdp_insert->bindParam(':password', $password);
                                $wdp_insert->bindParam(':jednostka', $jed);
                                $wdp_insert->bindParam(':DOB', $dob);
                                $wdp_insert->bindParam(':Stopien', $stopien);
                                $wdp_insert->bindParam(':funkcjia', $funk);
                                $wdp_insert->bindParam(':fullname', $fullName);

                        //Execute the prepared statement
                            $wdp_insert->execute();
                            echo ("<p>Insert complete</p>\n");
                } catch (PDOException $ex) {
                $msg = $ex->errorInfo;
                error_log(var_export($msg, true));
                die("<p>Sorry, there was an unrecoverable database error. Debug data has been logged.</p>");
                };

            }
            else {
                echo ($first_name .' '. $ERRmsg);
                exit;
            }

?> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T00:59:08.823

它是你的 SQL

删除最后一个`,`

开`display_name,`&`:fullname,`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T00:58:11.447

`displayname`和`:fullname`, 和结束括号之前 不应该有逗号。

```
 . . .
 user_nicename,
 display_name,     <-- superfluous comma
)
VALUES (
 . . .
 :fullname,
 :fullname,     <-- superfluous comma
)" 
```

某些语言（例如 PHP 和 Perl）允许在列表中的最后一个元素之后使用逗号，但 SQL 不允许。

# c# - 在 ASP.net 中维护动态添加的控件

> ID：13547263
> 
> 赞同：0
> 
> 时间：2012-11-25T00:53:30.520
> 
> 标签：c#, asp.net, webforms

我被困在如何维护我在 Webforms 应用程序中动态添加的用户控件的视图状态。我创建了一个名为 Set.ascx 的用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Set.ascx.cs" Inherits="CustomControlLab.Set" %>
&nbsp
<asp:Label ID="BodyArea" CssClass="SetLabel" runat="server" Text="Label"></asp:Label>
&nbsp
<asp:Label ID="Exercise" CssClass="SetLabel" runat="server" Text="Label"></asp:Label>
&nbsp
<asp:Label ID="SetNo" CssClass="SetLabel" runat="server" Text="Label"></asp:Label>
&nbsp
<asp:Label ID="Reps" CssClass="SetLabel" runat="server" Text="Label"></asp:Label> 
```

用户将从下拉列表中选择项目以设置每个标签的值。这是在按钮单击事件上设置的，如下所示：

```
 protected void AddExercise_Click(object sender, EventArgs e)
    {
            Set set = (Set)Page.LoadControl("Set.ascx");
            int currentSet = (int)ViewState["Sets"];
            set._bodyArea = AreaSelect.SelectedValue;
            set._exercise = ExerciseSelect.SelectedValue;
            set._reps = RepNumbers.SelectedValue;
            set._setNumber = currentSet.ToString();
            int idCount = (int)ViewState["Sets"];
            set.ID = string.Format("set{0}", idCount);
            currentSet++;
            ViewState["Sets"] = currentSet;
            WeightList.Controls.Add(set);
     } 
```

这正确地将我的用户控件添加到我的面板控件 WeightList。我无法解决的是如何在页面初始化事件中成功地重新创建这些控件？我认为这与控制ID有关？或者也许我的方法永远不会奏效。任何反馈都会非常有帮助！

在 Tims 评论之后，我不确定如何使用 ID 重新加载 UserCONtrol。如果回发，我在 Page_Load 事件中尝试了这个：

```
 else
        {
            if(ViewState["Sets"] != null)
            {
            int sets = (int)ViewState["Sets"];
            for (int i = 0; i < sets; i++)
            {
                Set set = new Set();
                set = (Set)Page.FindControl(string.Format("MainContent_set{0}", i + 1));
                WeightList.Controls.Add(set);

            }
            }

        } 
```

但它没有重新创建 Set 对象。在加载每个 Set UC 时查看页面会呈现以下内容：

```
&nbsp
<span id="MainContent_set1_BodyArea" class="SetLabel">All Exercises</span>
&nbsp
<span id="MainContent_set1_Exercise" class="SetLabel">Bench Press</span>
&nbsp
<span id="MainContent_set1_SetNo" class="SetLabel">1</span>
&nbsp
<span id="MainContent_set1_Reps" class="SetLabel">3</span> 
```

控件上的每个标签都有一个用于设置其值的公共属性：

```
public partial class Set : System.Web.UI.UserControl
{
    public string _exercise { get { return Exercise.Text; } set { Exercise.Text = value; } }
    public string _bodyArea { get { return BodyArea.Text; } set { BodyArea.Text = value; } }
    public string _setNumber { get { return SetNo.Text; } set { SetNo.Text = value; } }
    public string _reps { get { return Reps.Text; } set { Reps.Text = value; } }

    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

按照呈现到页面的内容，我虽然可以执行以下操作（这不起作用！！）

```
 else
    {
        if(ViewState["Sets"] != null)
        {
        int sets = (int)ViewState["Sets"];
        for (int i = 0; i < sets; i++)
        {
            Set set = new Set();
            Label templbl = (Label)Page.FindControl(string.Format("MainContent_set{0}_BodyArea", i + 1));
            set._bodyArea = templbl.Text;
            //Other code to get rest of control values 
            WeightList.Controls.Add(set);

        }
        }

    } 
```

但这也不起作用。我想我在这里遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:09:09.643

在你的页面加载中试试这个：

```
if(ViewState["Sets"] != null)
{
    int sets = (int)ViewState["Sets"];
    for (int i = 0; i < sets; i++)
    {
        Set set = new Set();
        set.ID =  string.Format("set{0}", i);
        WeightList.Controls.Add(set);
     }
 } 
```

只要您在页面上有一个具有正确 ID 的控件，就会为您从视图状态加载值。

# javascript - 用 JavaScript 替换 HTML 中的文本

> ID：13547270
> 
> 赞同：8
> 
> 时间：2012-11-25T00:55:21.907
> 
> 标签：javascript, replace

我正在尝试编写一个不使用 jQuery 的 JavaScript 程序来替换网页上所有可见的目标文本，而不会破坏页面的功能。

具体来说，我正在尝试制作一个在 Facebook 等网站上被动执行的 Chrome 扩展程序。

我在以下方面取得了有限的成功：

```
checkLoad();
function checkLoad(){
    if (document.readyState === "complete") {
        document.body.innerHTML = document.body.innerHTML.replace("target string", "replacement string");
    } else {
        setTimeout('checkLoad();', 500)
    }
} 
```

这段代码遗漏了人名、头衔等内容。

我环顾四周，似乎找不到可行的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T03:48:55.230

简单的正则表达式来修复它：

```
document.body.innerHTML = document.body.innerHTML.replace(/target string/g, "replacement string"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-02T19:47:31.200

[我建议不要从这个博客（ https://j11y.io/javascript/replacing-text-in-the-dom-solved/](https://j11y.io/javascript/replacing-text-in-the-dom-solved/)）替换innerHTML ：

1.  您不能保证替换的文本是文本。也许它是 html 或其他相关代码中的属性。
2.  它重置了文档，就我而言，它再次触发了我的 chrome 扩展。这导致我的扩展一次又一次地重新加载。

我通过从博客下载 js 文件解决了这个问题，并像这样调用它：

```
 var regex = new RegExp(targetString, "g");
  findAndReplaceDOMText(document.body, {
    find: regex,
    replace: function(portion) {
      var e = document.createElement('span');
      e.appendChild(document.createTextNode(replacementString));
      return e;
    }
  }); 
```

我上面的用例将要替换的文本包装在 span 标签中，因此它与您的略有不同。这个 javascript 函数有很大的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-07T08:27:57.363

链接[https://j11y.io/javascript/replacing-text-in-the-dom-solved/](https://j11y.io/javascript/replacing-text-in-the-dom-solved/)很酷，但我不是 100% 同意解决方案。恕我直言，在 DOM 上行走可能是矫枉过正。

这是我仅在 regexp 上工作的棘手解决方案，因此可以使用 element.innerHTML。因此，除了标签和类似 nbsp 的东西之外，它会替换所有地方的文本：

```
function highlightInHtml(html, textToHighlight) {
  const t = textToHighlight'

  const tagsRe = new RegExp('(<.+?>|&\\w+;)');

  const htmlParts = html.split(tagsRe).filter(Boolean);

  const r = htmlParts.map( item =>
    tagsRe.test(item)
      ? item
      : item.replace(new RegExp(`(${t})`, 'ig'), `<span class="highlight">$1</span>`)
  ).join('');

  return r;
} 
```

如果此解决方案有弱点，请告诉我！

# c# - 在运行时动态克隆表单

> ID：13547272
> 
> 赞同：1
> 
> 时间：2012-11-25T00:55:45.560
> 
> 标签：c#

假设我有一个名为“FormA”的表单，其中包含两个文本框 text1_a 和 text2_a。如何在运行时动态创建一个名为“FormB”的表单，其中 FormA 中的相同对象具有相同的布局，但文本框的名称不同，例如text1_b 和 text2_b

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:11:37.007

试试这个代码：

```
FormA cloningForm = new FormA();
cloningForm.Show();
cloningForm.Name = "FormB";
cloningForm.text1_a.Name = "text1_b";
cloningForm.text2_a.Name = "text2_b"; 
```

# c++ - C++11：在 std::array 上定义函数

> ID：13547273
> 
> 赞同：3
> 
> 时间：2012-11-25T00:55:57.963
> 
> 标签：c++, c++11

`std::array`接受两个模板参数：

```
typename T // the element type
size_t N // the size of the array 
```

我想定义一个将 std::array 作为参数的函数，但仅适用于特定的 T，在这种情况下`char`，但适用于任何大小的数组：

以下是格式错误的：

```
void f(array<char, size_t N> x) // ???
{
    cout << N;
}

int main()
{
    array<char, 42> A;

    f(A); // should print 42

    array<int, 42> B;

    f(B); // should not compile
} 
```

写这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T00:57:45.790

使用模板函数：

```
template<size_t N> void f(array<char, N> x) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T00:59:27.410

`N`需要是一个静态值。例如，您可以创建一个模板参数：

```
template <std::size_t N>
void f(std::array<char, N> x) {
    ...
} 
```

在您的示例中，我仍然会通过引用传递参数，但是：

```
template <std::size_t N>
void f(std::array<char, N> const& x) {
    ...
} 
```

# java - JDBC程序从一个表中选择数据并插入到不同数据库中的另一个表中

> ID：13547276
> 
> 赞同：0
> 
> 时间：2012-11-25T00:56:22.737
> 
> 标签：java, postgresql, jdbc

我是 java 新手，我正在尝试将 old_db 中的数据插入 new_db。我已经尝试过一个程序来做到这一点，它显示了一个错误，比如“语法错误”找不到什么错误。

该程序必须连接到 2 个 postgres db 并选择表中的数据并将它们插入到另一个数据库表中。两个表都有相同的字段和数据类型。

```
import java.sql.* ;   
public class con2 
{ 
public static void main( String[] args ) 
{ 
try 
{ 
   Connection con = DriverManager.getConnection( "jdbc:postgresql://localhost:5432/old_db","postgres","password");
try
{
   Connection con1 = DriverManager.getConnection( "jdbc:postgresql://localhost:5432/new_db","postgres","password");

 Statement st = con.createStatement();
 Statement st1 = con1.createStatement();   
ResultSet rs = st.executeQuery("SELECT * FROM users"); 

  int val = st1.executeUpdate("insert into users("+"'rs()'"+")");

        rs.close();
                        st.close(); 
                    st1.close(); 

}
catch(SQLException e) 
  { 
         System.out.println( "could not get JDBC connection for new_db: " + e ); 
  } 
}
catch(SQLException e) 
  { 
         System.out.println( "could not get JDBC connection for  old_db: " + e ); 
  } 
} 
} 
```

我正在使用 jdbc4

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T11:04:09.237

我写了一个如下所示的程序，它正在工作。

感谢您的建议。

```
import java.sql.*;
import java.io.*;
import java.util.*;

public class test1 {

    public static void main(String[] argv) throws Exception {
        try {
            Connection con = DriverManager.getConnection( "jdbc:postgresql://localhost:5432/old","user","pass");
            Connection con1 = DriverManager.getConnection( "jdbc:postgresql://localhost:5432/new","user","pass");

            String sql = "INSERT INTO users("+ "name,"+ "active,"+ "login,"+ "password)"+ "VALUES(?,?,?,?)";

            Statement statement = con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);

            PreparedStatement pstmt = con1.prepareStatement(sql);

            ResultSet rs = statement.executeQuery("SELECT * FROM users");
            while (rs.next()) {
                String nm = rs.getString(2);
                Boolean ac = rs.getBoolean(3);
                String log = rs.getString(4);
                String pass = rs.getString(5);

                pstmt.setString(1, nm);
                pstmt.setBoolean(2, ac);
                pstmt.setString(3, log);
                pstmt.setString(4, pass);

                pstmt.executeUpdate();
            }
        } catch (SQLException e) {
            System.out.println("could not get JDBC connection: " +e);
        } finally {
            con.close();
            con1.close();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T01:01:18.373

这是完全错误的：

```
 int val = st1.executeUpdate("insert into users("+"'rs()'"+")"); 
```

您必须遍历`ResultSet`和`INSERT`每一行。

我建议 a `PreparedStatement`to bind variables 和 a batch `INSERT`。

我建议您更改许多其他内容，但首先要让代码正常工作。

以这种方式嵌套的两个 try/catch 块是个坏主意。一个会做的。

在 finally 块中关闭您的资源。

这只是一个例子，但为什么你必须选择并将数据带到中间层呢？

为什么要重新插入已经存在的数据？

所提出的问题*毫无意义*。投票结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T12:23:19.020

另一种方法是在 PostgreSQL中使用[DBLinks 。](http://www.postgresql.org/docs/9.2/static/dblink.html)

# git - 在私有仓库中管理外部 git 仓库的最佳方式

> ID：13547278
> 
> 赞同：2
> 
> 时间：2012-11-25T00:56:53.230
> 
> 标签：git

当谈到 git 时，我仍然是一个新手，所以虽然我确实看到了以下[问题/答案](https://stackoverflow.com/questions/5287157/what-is-the-best-way-to-maintain-a-git-public-repo-fork-within-a-private-repo) ，但它并没有真正给我足够的理解来真正做到这一点。这是我的基本问题：

我有几个环境（开发、测试、生产）供我移动代码。在大多数情况下，我在开发中进行开发，然后将私有存储库推送到 bitbucket（因为我可以拥有免费的私有存储库）。然后，我在需要更新代码的其他环境中将其从 bitbucket 中提取出来。没关系; 像你期望的那样工作。

问题是当我在私人仓库中时，我有一个“外部”目录，其中挂着一堆公共仓库（如下图所示）：

![示例 repo 目录结构](../Images/5d7a0ab1eb6e59aa2fb7ee19682ad0c4.png)

我希望所有公共回购的结帐状态在任何给定时间都相同。因此，假设我的开发环境中的公共 repo 1 是 master 后面的 10 次提交；当我将私有仓库拉入我的测试环境时，我不仅希望私有仓库被拉下（那里没问题），而且我想将公共仓库 1 拉到与开发中存在的相同提交级别。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:17:18.770

作为序言，如果您没有在开发、测试、生产区域使用分支，而是为同一代码库管理多个存储库，您应该考虑简单地使用分支。这将使管理代码变得更加容易，而不是将代码推到不同的地方。

有一个名为 git-flow 的“模型”深入讨论了这个概念：http: [//nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

至于您的外部公共存储库，git 子模块功能听起来正是您所追求的。通过将存储库添加为子模块，您的主存储库将跟踪它们的提交。所以就像你说的，如果公共 repo A 落后 10 次提交，并且这是你在主 repo 中提交它的地方，它将在同一位置再次检查。

子模块 repo 更改要求您首先对外部 repo 进行更改，推送这些更改，将它们拉到您的主 repo 子模块，然后将它们提交到主 repo（以跟踪更改的提交）。

那里有更深入的子模块教程[（这里是一个）](http://chrisjean.com/2009/04/20/git-submodules-adding-using-removing-and-updating/)，但总体概述是这样的：

```
cd mainRepo
git submodule add http://git.domain.com/repo external/submoduleA 
```

这会将您的公共回购克隆到外部/子模块A。如果需要，您可以从这里签出不同的提交。但是当你准备好后，你可以在你的主仓库中添加并提交它。现在，当您再次克隆此主存储库时，您将执行以下操作：

```
git clone http://git.domain.com/myMainRepo --recursive 
```

该`recursive`选项告诉它还继续检查所有子模块。您可以将其关闭并作为第二步进行初始化。但是我把它留给你来探索`submodule`命令的所有选项。

# ios - Core Image CIColorControls 亮度滤镜会产生错误的效果。如何更改图像的亮度？

> ID：13547279
> 
> 赞同：16
> 
> 时间：2012-11-25T00:56:52.880
> 
> 标签：ios, ios5, graphics, core-graphics, core-image

我正在为 iOS 创建一个颜色选择器。我想让用户选择亮度（亮度）并让色轮反映这种变化。我正在使用 Core Image 通过 CIColorControls 过滤器修改亮度。这是我的代码：

```
-(CIImage *)oldPhoto:(CIImage *)img withBrightness:(float)intensity
{
    CIFilter *lighten = [CIFilter filterWithName:@"CIColorControls"];
    [lighten setValue:img forKey:kCIInputImageKey];
    [lighten setValue:@((intensity * 2.0) - 1.0) forKey:@"inputBrightness"];
    return lighten.outputImage;
} 
```

以下是强度 = 0.5 (inputBrightness = 0) 时色轮的外观：

![我的 inputBrightness = 0 图像](../Images/5c020cb8de99c05df48a51f31960f81d.png)

问题是当强度 < 0.5 时色轮看起来不对。例如，以下是强度 = 0.3 (inputBrightness = -0.4) 时的样子：

![我的 inputBrightness = -0.4 图像](../Images/d169bede6ad73699f31cc3ae52f5d7c8.png)

请注意，中间有一个黑色圆圈，图像的其余部分也没有正确变暗。这应该是一个HSL色轮，所以我想我真正想要改变的是亮度，而不是亮度。

首先，任何人都可以解释为什么图像看起来像这样吗？我不是色彩专家。奇怪的是，圆的中心很快就变成了黑色，而它的边缘并没有变暗很多。

二、怎样才能达到我想要的效果？

这是我实际希望图像看起来的方式：

![亮度 = 0.3 的图像，在 CPU 上使用 HSL 函数生成（太慢）](../Images/f7aa587bf25f56316c2bcca87641c7dd.png)

这是使用自定义 HSL 函数和亮度 = 0.3 创建的。这在 CPU 上运行，所以它对我的需要来说太慢了。我很乐意发布此 HSL 函数的代码，但我没有包含它，因为它似乎没有立即相关。如果你想看，就问吧。

如果您有任何问题，或者有任何不清楚的地方，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-12T19:11:39.510

`kCIInputBrightnessKey`我还发现of的非线性`CIColorControls`很烦人。我采用了线性`CIToneCurve`：

```
/** Change luminosity of `CIImage`

 @param inputImage The `CIImage` of the image to have it's luminosity changed.
 @param luminosity The percent change of the luminosity, ranging from -1.0 to 1.0.

 @return `CIImage` of image with luminosity changed. If luminosity of 0.0 used, original `inputImage` is returned.
 */

- (CIImage *)changeLuminosityOfCIImage:(CIImage *)inputImage luminosity:(CGFloat)luminosity
{
    if (luminosity == 0)
        return inputImage;

    NSParameterAssert(luminosity >= -1.0 && luminosity <= 1.0);

    CIFilter *toneCurveFilter = [CIFilter filterWithName:@"CIToneCurve"];
    [toneCurveFilter setDefaults];
    [toneCurveFilter setValue:inputImage forKey:kCIInputImageKey];

    if (luminosity > 0)
    {
        [toneCurveFilter setValue:[CIVector vectorWithX:0.0  Y:luminosity]                           forKey:@"inputPoint0"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.25 Y:luminosity + 0.25 * (1 - luminosity)] forKey:@"inputPoint1"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.50 Y:luminosity + 0.50 * (1 - luminosity)] forKey:@"inputPoint2"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.75 Y:luminosity + 0.75 * (1 - luminosity)] forKey:@"inputPoint3"];
        [toneCurveFilter setValue:[CIVector vectorWithX:1.0  Y:1.0]                                  forKey:@"inputPoint4"];
    }
    else
    {
        [toneCurveFilter setValue:[CIVector vectorWithX:0.0  Y:0.0]                     forKey:@"inputPoint0"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.25 Y:0.25 * (1 + luminosity)] forKey:@"inputPoint1"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.50 Y:0.50 * (1 + luminosity)] forKey:@"inputPoint2"];
        [toneCurveFilter setValue:[CIVector vectorWithX:0.75 Y:0.75 * (1 + luminosity)] forKey:@"inputPoint3"];
        [toneCurveFilter setValue:[CIVector vectorWithX:1.0  Y:1 + luminosity]          forKey:@"inputPoint4"];
    }

    return [toneCurveFilter outputImage];
} 
```

这是您的图像，使用上述例程将亮度降低 30%：

![减少](../Images/6098ff7ee8c8bf6e7bc3d6d346709a83.png)

可以用`CIToneCurve`. 无论它是否比您的例行程序更快，您都会对其进行基准测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-19T19:53:45.970

您的 CIColorControls 过滤器按设计工作。它只是将其亮度参数添加到每个像素的红色、绿色和蓝色值。如果负亮度使像素低于 0，则它将剪辑为黑色。如果正亮度将其推至 1 以上，则会剪辑为白色。（其实每个频道都是单独剪辑的……）

另一个问题是 CIColorControls 在 RGB 颜色空间中工作。HSL 非常不同。这就是为什么您的基本色轮看起来与标准 Apple 颜色选择器非常不同的原因。

[有用的参考](http://en.wikipedia.org/wiki/HSL_and_HSV#Formal_derivation)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T07:14:25.163

试试这个并使用滑块更改值：-

```
- (void)viewDidLoad{

   UIImage *aUIImage = showPickedImageView.image;
   CGImageRef aCGImage = aUIImage.CGImage;
   aCIImage = [CIImage imageWithCGImage:aCGImage];

   context = [[CIContext contextWithOptions:nil] retain];
   brightnessFilter = [[CIFilter filterWithName:@"CIColorControls" keysAndValues: @"inputImage", aCIImage, nil] retain];

}

- (IBAction)brightnessSliderValueChanged:(id)sender {

    [brightnessFilter setValue:[NSNumber numberWithFloat:brightnessSlider.value ] forKey: @"inputBrightness"];
    outputImage = [brightnessFilter outputImage];
    CGImageRef cgiig = [context createCGImage:outputImage fromRect:[outputImage extent]];
    newUIImage = [UIImage imageWithCGImage:cgiig];
    CGImageRelease(cgiig);
    [showPickedImageView setImage:newUIImage];
} 
```

# google-chrome - manifest.json 中 content_security_policy 中的多个端口

> ID：13547283
> 
> 赞同：0
> 
> 时间：2012-11-25T00:57:26.187
> 
> 标签：google-chrome, google-chrome-extension, content-security-policy

我需要在我的 chrome 扩展中监听多个**端口。**

我的 manifest.json **content_security_policy**行是：

```
"content_security_policy": "script-src 'self' http://localhost:35729; object-src 'self'", 
```

天呐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:35:25.023

如果您想从主机上的多个端口加载脚本，您需要依次将每个端口列入白名单。也就是说`script-src`，允许通过 HTTPS 从 example.com 上的端口 443 和 444 加载脚本的指令如下所示：

```
script-src https://example.com:443 https://example.com:444; 
```

CSP 中没有允许使用一个源表达式将多个端口列入白名单的快捷语法。

# ruby-on-rails - Rails：如果未登录，则从任何地方重定向到根位置

> ID：13547287
> 
> 赞同：0
> 
> 时间：2012-11-25T00:58:00.660
> 
> 标签：ruby-on-rails

有没有一种简单的方法可以做到这一点？无论用户尝试访问哪个页面，我如何始终触发此控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:03:38.233

您可以添加`before_filter`到`ApplicationController`：

```
before_filter :login_required

protected

  def login_required
    redirect_to root_url if not logged_in?
  end 
```

# javascript - grunt.js 文件中的嵌套对象字面量是什么意思？

> ID：13547292
> 
> 赞同：8
> 
> 时间：2012-11-25T00:58:31.600
> 
> 标签：javascript, build, gruntjs

我无法理解有时会出现在`grunt.js`文件中的嵌套。在以下示例中，嵌套对象的含义`concat.dist`和`min.dist`含义是什么？键是`dist`引用另一个命名任务还是只是一个配置对象？`concat`执行and`min`任务时到底调用了什么？

```
module.exports = function (grunt) {
  grunt.initConfig({
    // …
    concat: {
      dist: {
        src: ["<banner:meta.banner>", "<file_strip_banner:lib/main.js>"],
        dest: "dist/main.js",
      }
    },
    min: {
      dist: {
        src: ["<banner:meta.banner>", "<config:concat.dist.dest>"],
        dest: "dist/main.min.js",
      }
    },
    // …
  });

  // …
  grunt.registerTask("default", "lint qunit concat min");
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T01:45:35.073

在 grunt 中，支持这种嵌套的任务称为**[多任务](https://github.com/gruntjs/grunt/blob/master/docs/api.md#gruntregistermultitask)**，嵌套的对象称为**目标**。假设您有以下多任务：

```
 concat: {
    dist: {
       src: ["<banner:meta.banner>", "<file_strip_banner:lib/main.js>"],
       dest: "dist/main.js",
    },
    dev: {
       (...)
    }
 } 
```

这意味着您拥有多任务**concat**，其中包含目标**dist**和**dev**。您可以通过在控制台上键入任务名称来运行任何多任务的所有目标。例如：

```
grunt concat 
```

将同时运行 concat 和 dev。另一方面，您还可以明确指定要运行的目标：

```
grunt concat:dist 
```

只会执行**dist**目标。

据我所知，如果您有两个具有相同名称目标的多任务（例如您的示例*min.dist*和*concat.dist*），这并不意味着两个**dist**都以某种方式引用同一事物，它们只是碰巧共享同名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:11:25.800

就像答案状态一样，那些或“多目标”..我在[这里做了一个关于多任务的视频](http://www.youtube.com/watch?v=FRWhjOxG7EE)

# twig - 在定义变量时使用引号有什么区别吗？

> ID：13547294
> 
> 赞同：1
> 
> 时间：2012-11-25T00:58:33.767
> 
> 标签：twig

Twig 手册（“ [include](http://twig.sensiolabs.org/doc/tags/include.html) ”）这样说：

```
{% include 'foo' with {'foo': 'bar'} %} 
```

但这也很好用：

```
{% include 'foo' with { foo: 'bar'} %} 
```

那么有什么区别还是引号是任意的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T20:44:44.680

@Maerlyn 之前的回答并不完全准确。

从 Twig 1.5 开始，您可以使用不带引号的字符串作为散列中的键名。例如`{foo: 'bar'}`，`{'foo': 'bar'}`即使您`foo`在模板中命名了一个变量，它也不会与`foo`. 这是一个方便的事情，仅此而已。

**例如：**

```
{% set foo = 'bar' %}
{% set bar = {foo: foo} %} {# note: no quotes around foo #}
{% debug bar %} 
```

**预期输出：**

```
array
  'foo' => string 'bar' (length=3) 
```

# c++ - 解释如何正确初始化和删除指针向量

> ID：13547299
> 
> 赞同：1
> 
> 时间：2012-11-25T00:59:19.503
> 
> 标签：c++

我正在尝试为最小堆编写 C++ 代码。我想创建一个指针向量并确保它们被正确删除。

我能够创建一个指针向量，但是我从默认构造函数中得到一个无效的转换错误。为什么会这样？

此外，我正在尝试编写用户定义的析构函数以确保我没有任何内存问题。但是，我无法弄清楚为什么我会收到指针未分配的错误。

```
#include <vector>
#include <iostream>

struct A
{
  A(int av, int bv):a(av),b(bv){}
  int a, b;
};

struct Heap
{
   Heap() : ptr(new std::vector<A*>()) {}  //WHY AM I GETTING AN ERROR FOR THE DEFAULT CONSTRUCTOR AND NOT THE CONSTRUCTOR BELOW?
   //ERROR: invalid conversion from ‘std::vector<A*, std::allocator<A*> >*’ to ‘long unsigned int’
   //ERROR: initializing argument 1 of ‘std::vector<_Tp, _Alloc>::vector(size_t, const _Tp&, const _Alloc&) [with _Tp = A*, _Alloc = std::allocator<A*>]’

   Heap(std::vector<A*> p) : ptr(p) {  //Works fine. 
       makeHeap();
   }

  ~Heap(){   //I DON'T UNDERSTAND WHY I AM GETTING A MEMORY ERROR HERE
        std::vector<A*>::iterator it;
    for(it=ptr.begin(); it<ptr.end(); ++it)
    {  
      delete *it;
      *it=NULL;
    }
  }//ERROR:  malloc pointer being freed was not allocated  

  void makeHeap()
  {  //some code  }

  std::vector<A*> ptr;
  std::vector<int> heapLoc;
};

int main()
{
  A a0(2,5), a1(4,2);  
  std::vector<A*> aArray;  
  aArray.push_back(&a0);
  aArray.push_back(&a1);

  Heap h(aArray);

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:01:55.797

`ptr`是指针向量，而不是指向向量的指针。所以你不能用来`new`在堆上构造它并存储地址。

相反，像这样构造它：

```
Heap() : ptr() {} 
```

这是调用 的默认构造函数`ptr`，即它将创建一个空的指针向量。您还应该考虑更改名称，`ptr`因为它不是真正的指针。

* * *

关于你的析构函数（Dietmar 同时发布了一个答案，在他之前 Cameron 发表了评论，这解释了它（+1），但为了完整起见）：你得到一个内存错误，因为你存储在你的向量中的指针参考您在堆栈上创建的对象的地址。具体来说，您在此处创建的对象：

```
int main()
{
  A a0(2,5), a1(4,2);  // <-- automatic storage, so they
                       //     will be deallocated automatically
  /* ... */
} 
```

如果您希望您的`Heap`对象负责它自己的对象，您应该让您的构造函数在堆上创建对象，然后析构函数可以删除这些对象。一种方法是定义`Heap`如下的复制构造函数：

```
Heap(const std::vector<A*> &p) : ptr() {
  std::vector<A*>::const_iterator it(p.begin());
  for ( ; it != p.end() ; ++it)
    ptr.push_back(new A(**it));
} 
```

您的析构函数可以按原样使用，但您可能希望使用`!=`而不是`<`在 for 循环中使用。

```
~Heap() {
   std::vector<A*>::iterator it;
   for(it=ptr.begin(); it != ptr.end(); ++it)
   {  
     delete *it;
     *it=NULL;
   } 
```

最后，我不确定您是否真的需要指针向量（而不是对象向量），但如果您认为需要，请考虑使用智能指针（例如 C++11 提供`std::unique_ptr`，因此您可以定义 a`std::vector<std::unique_ptr<A>>`来解决许多与分配相关的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:03:26.673

> 为什么默认构造函数而不是下面的构造函数出现错误？

```
ptr(new std::vector<A*>()) 
```

这是因为 operator`new`返回一个指向 的*指针*，`std::vector`而不是 a`vector`本身。由于您将 a 声明`vector`为对象，因此您应该简单地删除整个`ptr(...)`部分：`ptr`编译器将正确初始化 a 。

一种更现代的方法是`unique_ptr<T>`代替“原始”指针。这将确保在销毁时自动正确销毁`vector<unique_ptr<T>>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T01:06:22.493

由于人们没有指出：当您`Heap`使用指向堆栈的指针销毁时，即未在空闲存储上分配的对象（我正要说“堆”，但这可能会导致不必要的混乱......）你'也会得到有趣的行为。这整个方法从一开始就注定要失败：除非您**真的**知道自己在做什么，否则**不要**使用原始指针容器！（即使那样你最好不要使用原始指针容器）

# r - 由 R 中的多个实际参数匹配的形式参数“数据”

> ID：13547302
> 
> 赞同：3
> 
> 时间：2012-11-25T01:00:00.473
> 
> 标签：r

当我在 R 中运行以下代码时，

```
library(mclust)
data(iris)
mc <- Mclust(iris[,1:4], 3)
plot(mc, data=iris[,1:4], what="classification",dimens=c(3,4))
table(iris$Species, mc$classification) 
```

我收到以下错误消息`plot`：

```
Error in coordProj(data = data, what = "classification", parameters = object$parameters,  : 
  formal argument "data" matched by multiple actual arguments 
```

我不确定数据子集出了什么问题`data=iris[,1:4]`。有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:14:30.433

如何删除数据=并离开

```
plot(mc, what="classification",dimens=c(3,4)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-18T11:54:44.010

那可能是旧的，但希望它会帮助别人。

1.  函数的第一个参数`plos(..)`代表数据。
2.  函数`data=...`中的参数`plos(...)`代表数据

因此，`r`可以识别多个数据集，因为您建议的数据不止一个

# mysql - 如何获取每个分组的最新行？

> ID：13547303
> 
> 赞同：1
> 
> 时间：2012-11-25T01:00:04.210
> 
> 标签：mysql, greatest-n-per-group

> **可能重复：**
> [获取列的最大值所在的行](https://stackoverflow.com/questions/121387/fetch-the-row-which-has-the-max-value-for-a-column)

我的表如下所示：

```
Sales 
- id
- country_id
- location_id
- order_id
- created 
```

现在我只想为每个 country_id、location_id 对返回一行（最新的，可以使用最高的 id 值或使用创建的日期时间字段）。

这可能在单个查询中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:08:42.060

```
select * from (
  select * from mytable
  order by id desc) x
group by country_id, location_id; 
```

这是一个 mysql-only 解决方案，但它之所以有效，是因为当您不聚合 mon group-by 列时，mysql 会为您提供它为每个组找到的*第一*行，如果您在分组之前对行进行排序，则会得到拖你要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T01:08:15.453

这应该只是

```
select country_id, location_id, max(created)
from sales
group by country_id, location_id 
```

# objective-c - 是否可以在 Objective-C 中的另一个函数中嵌套一个函数

> ID：13547306
> 
> 赞同：3
> 
> 时间：2012-11-25T01:00:29.500
> 
> 标签：objective-c, c

Objective-C 是 ANSI C 的超集。在 GNU C 中，[您可以将一个函数嵌套在另一个函数中](http://en.wikipedia.org/wiki/Nested_function)......就像这样......

```
float E(float x)
{
    float F(float y) //objective-C compiler says expected ; at end of declaration
    {
        return x + y;
    }
    return F(3) + F(4);
} 
```

在Objective-C中可以做到这一点吗？

我知道块和 NSInvocation 对象，它们可以模拟上面的 C 代码。但是你能在 Objective-C 中另一个函数的词法范围内定义一个函数吗？就像是 ...

```
-(int) outer:(int)x
{
    -(int) inner:(int)y //use of undeclared identifier inner
    {
        return x * 3;
    }
    return inner(x);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T01:02:09.783

你不能，但你可以很容易地用 block 获得相同的行为

```
int outer(int i)
{
    int (^inner)(int) = ^(int x)
    {
        return x * 3;
    };

    return inner(i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:03:26.923

您不能仅仅因为在 ObjectiveC 中方法像在 C++ 中那样附加到类，这意味着`self`函数内部总是存在隐含的。

您应该如何调用嵌套在另一个函数中的函数？将其作为类方法没有多大意义。调用它的唯一方法是让它成为静态的（但它似乎真的过于复杂了）

您应该使用 OS X 上的 C、C++ 和 ObjectiveC 可用的块，或者如果您要使用 ObjectiveC++，则应该使用类似函子之类的东西。

# html - Symfony 1.4 布局页脚故障：页脚 div 与 $sf_content 相呼应

> ID：13547311
> 
> 赞同：0
> 
> 时间：2012-11-25T01:00:52.497
> 
> 标签：html, css, layout, symfony-1.4, footer

我的应用程序有一个非常简单的布局。页眉、主要内容和页脚。从语义上讲，它们呈现如下：

```
<body>
<div id = "header"> </div>
<div id = "content"> </div>
<div id = "footer"> </div>
</body> 
```

相应的 CSS 也非常基础：

```
#header{
width:100%;
min-height:10%;
}
#center{
width:100%;
min-height:80%;
}
#footer{
width:100%;
min-height:10%:
} 
```

正如您在布局页面中所知道的，以下是内容的呈现方式：

```
<div id= "content">
<?php echo $sf_content; ?> 
</div> 
```

以上所有内容都非常好，并且按照预期呈现。但这有一个小故障，我放入`<?php echo $sf_content; ?>`页脚的那一刻被包含为内容的一部分，而不是作为#content标记之后的div。

本质上，我明白了：

```
<div id = "header"></div>
<div id = "content>
   <div id ="symfony_template_to_be_rendered">
    <!-- all web application related content like forms etc. -->
   </div>
   <div id = "footer">Footer material
   </div>
</div> 
```

正如你所看到的，出于某种奇怪的原因，页脚随着 symfony 内容向上移动。显然这是一个小故障，因为如果我从布局中的 div 标签中删除 php 哈希 $sf_content 部分，那么页脚将自身呈现为应在的位置，并且所有内容都占用了所需的尺寸。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:00:56.987

我的愚蠢问题。这是一个非常微不足道的问题，我没有关闭我的一个模板中的 HTML 标签，这无意中弄乱了我的页脚。回答这个问题：请在发布诸如此类的问题之前正确关闭 HTML 标签 :)

# javascript - 如何在 JavaScript 中为弹出窗口中的搜索栏着色？

> ID：13547313
> 
> 赞同：0
> 
> 时间：2012-11-25T01:01:13.707
> 
> 标签：javascript, jquery, css, ajax, popup

好的，所以我有这个按钮，点击它会弹出一个弹出窗口，窗口中除了地址栏之外什么都没有。我想知道是否有某种方法可以对其进行着色以使其不那么明显。

这是我的代码：

```
<input type="button" onclick="Launch()" value="Launch App"> 
```

JS：

```
function Launch() {
    window.open("app/intro.html", "winname", "directories = 0, tilebar = 0, toolbar = 0, status = 0, menubar = 0, scrollbars = yes, resizable = yes");
} 
```

那么有没有一些技巧可以为地址栏着色？或者，更好的是，有什么方法可以完全隐藏它？

我最喜欢它以全屏方式打开，但据我所知，这是不可能的。所以我想知道是否有一种方法可以隐藏几乎所有内容，而我无法隐藏的项目，只是颜色像深蓝色以匹配我的背景，（这样用户仍然可以在他/她离开页面时导航想要）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:09:05.847

查看[Fullscreen API](http://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html)，因为它可能对您有所帮助。

html5rocks[在这里](http://updates.html5rocks.com/2011/10/Let-Your-Content-Do-the-Talking-Fullscreen-API)[也](http://www.html5rocks.com/en/)有一个很好的教程。

希望这可以帮助！

# html - 图片库默认选项卡

> ID：13547315
> 
> 赞同：2
> 
> 时间：2012-11-25T01:01:31.530
> 
> 标签：html, css, gallery

我不知道如何制作它，以便景观不是默认选项卡。每当您将鼠标悬停在该区域之外时，它都会转到风景，即使您在另一个选项卡上，风景也总是比其他选项卡更暗。请帮忙。jsfiddle 在这里[http://jsfiddle.net/jspence29/nQ2TK/](http://jsfiddle.net/jspence29/nQ2TK/)。谢谢！需要明确的是，我希望这样当您将鼠标移出图片库时，您上次打开的选项卡是向上的，而不是风景，并且当您将鼠标悬停在另一个选项卡上以更改选项卡时，风景与其余选项卡的颜色相同.

```
/* common styling */

#body a {color:#000;}
#body a:hover {text-decoration:none;}
#body a:visited {color:#000;}

/* slides styling */

#body .photo {width:635px; text-align:left; position:relative; margin:0 auto;}

#body .photo ul.topic {padding:0; margin:0; list-style:none; width:635px; height:auto; position:relative; }

#body .photo ul.topic li {display:block; width:125px; height:31px; float:left;}
#body .photo ul.topic li a.set {display:block; font-size:11px; width:124px; height:30px; text-align:center; line-height:30px; color:#000; text-decoration:none; border:1px solid #fff; border-width:1px 1px 0 0; background:#ccc; font-family:verdana, arial, sans-serif;}

#body .photo ul.topic li a ul, 
#body .photo ul.topic li ul 
{display:none;}

#body .photo ul.topic li.active a
{color:#000; background:#bbb;}

#body .photo ul.topic li a:hover,
#body .photo ul.topic li:hover a
{color:#fff; background:#aaa;}

#body .photo ul.topic li.active ul
{display:block; position:absolute; left:0; top:31px; list-style:none; padding:0; margin:0; height:375px; background:#ddd; width:464px; padding:40px 60px; border:20px solid #bbb; z-index:1;}

#body .photo ul.topic li a:hover ul, 
#body .photo ul.topic li:hover ul
{display:block; position:absolute; left:0; top:31px; list-style:none; padding:0; margin:0; height:375px; background:#ddd; width:464px; padding:40px 60px; border:20px solid #aaa; z-index:100;}

#body .photo ul.topic li ul li
{display:inline; width:112px; height:87px; float:left; border:1px solid #fff; margin:1px;}

#body .photo ul.topic li ul li a
{display:block; width:110px; height:85px; cursor:default; float:left; text-decoration:none; background:#444; border:1px solid #888;}

#body .photo ul.topic li ul li a img
{display:block; width:100px; height:75px; border:5px solid #eee;}

#body .photo ul.topic li a:hover ul li a:hover, 
#body .photo ul.topic li:hover ul li a:hover 
{white-space:normal; position:relative;}

#body .photo ul.topic li a:hover ul li a:hover img, 
#body .photo ul.topic li:hover ul li a:hover img 
{position:absolute; left:-50px; top:-32px; width:200px; height:150px; border-color:#fff;}
</style>

<div id="body">
<div class="photo">
<ul class="topic">
    <li><a class="set" href="#Portraits">Portraits<!--[if gte IE 7]><!--></a><!--<![endif]-->
    <!--[if lte IE 6]><table><tr><td><![endif]-->
        <ul>
            <li><a href="lbox/portrait1.jpg"><img src="http://www.cssplay.co.uk/menu/lbox/portrait1a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait2.jpg"><img src="lbox/portrait2a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait3.jpg"><img src="lbox/portrait3a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait4.jpg"><img src="lbox/portrait4a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait5.jpg"><img src="lbox/portrait5a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait6.jpg"><img src="lbox/portrait6a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait7.jpg"><img src="lbox/portrait7a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait8.jpg"><img src="lbox/portrait8a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait9.jpg"><img src="lbox/portrait9a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait10.jpg"><img src="lbox/portrait10a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait11.jpg"><img src="lbox/portrait11a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait12.jpg"><img src="lbox/portrait12a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait13.jpg"><img src="lbox/portrait13a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait14.jpg"><img src="lbox/portrait14a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait15.jpg"><img src="lbox/portrait15a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/portrait16.jpg"><img src="lbox/portrait16a.jpg" alt="" title="" /></a></li>
        </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>

    <li class="active"><a class="set" href="#Landscapes">Landscapes<!--[if gte IE 7]><!--></a><!--<![endif]-->
    <!--[if lte IE 6]><table><tr><td><![endif]-->
        <ul>
            <li><a href="lbox/landscape1.jpg"><img src="http://www.cssplay.co.uk/menu/lbox/landscape1a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape2.jpg"><img src="lbox/landscape2a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape3.jpg"><img src="lbox/landscape3a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape4.jpg"><img src="lbox/landscape4a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape5.jpg"><img src="lbox/landscape5a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape6.jpg"><img src="lbox/landscape6a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape7.jpg"><img src="lbox/landscape7a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape8.jpg"><img src="lbox/landscape8a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape9.jpg"><img src="lbox/landscape9a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape10.jpg"><img src="lbox/landscape10a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape11.jpg"><img src="lbox/landscape11a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape12.jpg"><img src="lbox/landscape12a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape13.jpg"><img src="lbox/landscape13a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape14.jpg"><img src="lbox/landscape14a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape15.jpg"><img src="lbox/landscape15a.jpg" alt="" title="" /></a></li>
            <li><a href="lbox/landscape16.jpg"><img src="lbox/landscape16a.jpg" alt="" title="" /></a></li>
        </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
    <li><a class="set" href="#Flowers">Flowers<!--[if gte IE 7]><!--></a><!--<![endif]-->
    <!--[if lte IE 6]><table><tr><td><![endif]-->
        <ul>
            <li><a href="#flower1"><img src="http://www.cssplay.co.uk/menu/lbox/flower1.jpg" alt="" title="" /></a></li>
            <li><a href="#flower2"><img src="lbox/flower2.jpg" alt="" title="" /></a></li>
            <li><a href="#flower3"><img src="lbox/flower3.jpg" alt="" title="" /></a></li>
            <li><a href="#flower4"><img src="lbox/flower4.jpg" alt="" title="" /></a></li>
            <li><a href="#flower5"><img src="lbox/flower5.jpg" alt="" title="" /></a></li>
            <li><a href="#flower6"><img src="lbox/flower6.jpg" alt="" title="" /></a></li>
            <li><a href="#flower7"><img src="lbox/flower7.jpg" alt="" title="" /></a></li>
            <li><a href="#flower8"><img src="lbox/flower8.jpg" alt="" title="" /></a></li>
            <li><a href="#flower9"><img src="lbox/flower9.jpg" alt="" title="" /></a></li>
            <li><a href="#flower10"><img src="lbox/flower10.jpg" alt="" title="" /></a></li>
            <li><a href="#flower11"><img src="lbox/flower11.jpg" alt="" title="" /></a></li>
            <li><a href="#flower12"><img src="lbox/flower12.jpg" alt="" title="" /></a></li>
            <li><a href="#flower13"><img src="lbox/flower13.jpg" alt="" title="" /></a></li>
            <li><a href="#flower14"><img src="lbox/flower14.jpg" alt="" title="" /></a></li>
            <li><a href="#flower15"><img src="lbox/flower15.jpg" alt="" title="" /></a></li>
            <li><a href="#flower16"><img src="lbox/flower16.jpg" alt="" title="" /></a></li>
        </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]-->

    </li>
    <li><a class="set" href="#Trees">Trees<!--[if gte IE 7]><!--></a><!--<![endif]-->
    <!--[if lte IE 6]><table><tr><td><![endif]-->
        <ul>
            <li><a href="#tree1"><img src="http://www.cssplay.co.uk/menu/lbox/tree1.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree2.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree3.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree4.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree5.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree6.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree7.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree8.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree9.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree10.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree11.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree12.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree13.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree14.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree15.jpg" alt="" title="" /></a></li>
            <li><a href="#tree1"><img src="lbox/tree16.jpg" alt="" title="" /></a></li>
        </ul>
    <!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
    <li><a class="set" href="#Birds">Birds<!--[if gte IE 7]><!--></a><!--<![endif]-->
    <!--[if lte IE 6]><table><tr><td><![endif]-->

        <ul>
            <li><a href="#bird1"><img src="http://www.cssplay.co.uk/menu/lbox/bird1.jpg" alt="" title="" /></a></li>
            <li><a href="#bird2"><img src="lbox/bird2.jpg" alt="" title="" /></a></li>
            <li><a href="#bird3"><img src="lbox/bird3.jpg" alt="" title="" /></a></li>
            <li><a href="#bird4"><img src="lbox/bird4.jpg" alt="" title="" /></a></li>
            <li><a href="#bird5"><img src="lbox/bird5.jpg" alt="" title="" /></a></li>
            <li><a href="#bird6"><img src="lbox/bird6.jpg" alt="" title="" /></a></li>
            <li><a href="#bird7"><img src="lbox/bird7.jpg" alt="" title="" /></a></li>
            <li><a href="#bird8"><img src="lbox/bird8.jpg" alt="" title="" /></a></li>
            <li><a href="#bird9"><img src="lbox/bird9.jpg" alt="" title="" /></a></li>
            <li><a href="#bird10"><img src="lbox/bird10.jpg" alt="" title="" /></a></li>
            <li><a href="#bird11"><img src="lbox/bird11.jpg" alt="" title="" /></a></li>
            <li><a href="#bird12"><img src="lbox/bird12.jpg" alt="" title="" /></a></li>
            <li><a href="#bird13"><img src="lbox/bird13.jpg" alt="" title="" /></a></li>
            <li><a href="#bird14"><img src="lbox/bird14.jpg" alt="" title="" /></a></li>
            <li><a href="#bird15"><img src="lbox/bird15.jpg" alt="" title="" /></a></li>
            <li><a href="#bird16"><img src="lbox/bird16.jpg" alt="" title="" /></a></li>
        </ul>

    <!--[if lte IE 6]></td></tr></table></a><![endif]-->
    </li>
</ul>
<br class="clear" />
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:34:10.547

以下是使用 Jquery 的解决方案：

```
$(document).ready(function(){
    $('ul.topic li a').click(function(){
        $('ul.topic li').removeClass('active');
        $(this).parent().addClass('active');
    alert('hi') //Just for knowing everything is well!
    })
})​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/saidbakr/nQ2TK/1/](http://jsfiddle.net/saidbakr/nQ2TK/1/)

**要使此示例在您的 HTML 页面中有效，请执行以下操作：**

在页头部分：

```
<head>
...
<script type="text/javascript" src="path/to/jquery-1.x.x.min.js"></script>
...
</head> 
```

然后在body标签之后的body部分：

```
<body>
    <script>
    $(document).ready(function(){
        $('ul.topic li a').click(function(){
            $('ul.topic li').removeClass('active');
            $(this).parent().addClass('active');
        alert('hi') //Just for knowing everything is well!
        })
    })​​​​​​​​​​​​​​​​​
    </script>
...
</body> 
```

最后，您可以从其[官网获取最新的 jquery 库](http://jquery.com/)

# visual-studio - 反序列化网络流上的 system.outofmemoryexception

> ID：13547316
> 
> 赞同：0
> 
> 时间：2012-11-25T01:01:31.933
> 
> 标签：visual-studio, serialization, deserialization, out-of-memory, binaryformatter

我有一个名为 Cereal 的可序列化类，这里显示了几个公共字段

```
<Serializable> Public Class Cereal
    Public id As Integer
    Public cardType As Type
    Public attacker As String
    Public defender As String
    Public placedOn As String
    Public attack As Boolean
    Public placed As Boolean
    Public played As Boolean
    Public text As String

    Public Sub New()

    End Sub
End Class 
```

我的客户端计算机通过序列化此处显示的新谷物向主机发送

```
'sends data to host stream (c1)
Private Sub cSendText(ByVal Data As String)
    Dim bf As New BinaryFormatter
    Dim c As New Cereal
    c.text = Data
    bf.Serialize(mobjClient.GetStream, c)
End Sub 
```

主机监听活动流，当有东西放在上面时，它应该将其反序列化为此处显示的新 Cereal

```
'accepts data sent from the client, raised when data on host stream (c2)
Private Sub DoReceive(ByVal ar As IAsyncResult)
    Dim intCount As Integer

    Try
        'find how many byte is data
        SyncLock mobjClient.GetStream
            intCount = mobjClient.GetStream.EndRead(ar)
        End SyncLock
        'if none, we are disconnected
        If intCount < 1 Then
            RaiseEvent Disconnected(Me)
            Exit Sub
        End If

        Dim bf As New BinaryFormatter
        Dim c As New Cereal
        c = CType(bf.Deserialize(mobjClient.GetStream), Cereal)
        If c.text.Length > 0 Then
            RaiseEvent LineReceived(Me, c.text)
        Else
            RaiseEvent CardReceived(Me, c)
        End If

        'starts listening for action on stream again
        SyncLock mobjClient.GetStream
            mobjClient.GetStream.BeginRead(arData, 0, 1024, AddressOf DoReceive, Nothing)
        End SyncLock
    Catch e As Exception
        RaiseEvent Disconnected(Me)
    End Try
End Sub 
```

当以下行执行时，我得到一个 System.OutOfMemoryException 并且我无法弄清楚为什么这不起作用。

```
c = CType(bf.Deserialize(mobjClient.GetStream), Cereal) 
```

该流是 TCPClient 流。我是序列化/反序列化和使用 Visual Studio 11 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:29:05.093

我的 arData 只接受 1024 字节，正如您在代码中看到的那样，当它再次启动侦听器时。从那以后我已经多次提出这个问题，因为现在我通过流发送图像。我现在超过 3,000,000（或 3MB），我认为我发送的最多大约是 2MB。在我的代码中，有 5 或 6 个地方需要更新 arData，而不仅仅是上面显示的那个。此外，提高这一点似乎并没有减慢任何极小数据的发送速度。

# jquery - jquery在提交之前验证所有字段

> ID：13547331
> 
> 赞同：2
> 
> 时间：2012-11-25T01:04:09.893
> 
> 标签：jquery, jquery-validate

我试图确保在提交表单之前验证所有字段。我什至不知道从哪里开始。我想让提交按钮变灰或禁用，直到所有字段都成功验证。

这是脚本：

```
$('document').ready(function(){
$('form').validate({
    rules: {
       a: {required:true, minlength:2},
       b: {required:true}
    },      
    messages: {
       a: {required: "enter your name!"},
       b: {required: "enter the date!"}                        
    },
    errorPlacement: function(error, element) {
    if(element.attr('name') == 'a'){
         $('#name').html(error);                
     }
     if(element.attr('name') == 'b'){
         $('#date').html(error);                
     }
    },
    success: function(label){
        label.addClass("valid").text("Ok!");                  
    },
    debug:true
});
$('#a').blur(function(){
    $("form").validate().element("#a");
});
}); 
```

这是html：

```
<form action="#" id='commentForm'>
    <input type="text" name="a" id="a">
    <input type="text" name="b" id="b">
    <button type="submit">Validate!</button>
<div id="date" style="border:1px solid blue;"></div>
<div id="name" style="border:1px solid red;"></div>
</form> 
```

这是jsfiddle：

[http://jsfiddle.net/wQxQ8/12/](http://jsfiddle.net/wQxQ8/12/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:32:17.380

无需争论它是否是多余的（我个人喜欢它，因为这样清晰两倍）

*   使按钮默认禁用
*   在每次输入模糊时，检查表单是否有效。
*   如果是，请启用该按钮。

    ```
    $('input').blur(function(){
        var thisform = $('form');
        if (thisform.valid()) {
            thisform.find("button").prop("disabled", false)
        }
     }); 
    ```

小提琴：http: [//jsfiddle.net/wQxQ8/17/](http://jsfiddle.net/wQxQ8/17/)

您还可以将模糊更改为 onkeyup，以便在每次击键后进行验证。但是，如果您有很多输入要验证，它可能会对性能产生影响。

# android - Google Drive Emptied Trash，10 分钟后，当我使用 Google Drive API 执行列表文件时，那些永久删除的文件仍然出现

> ID：13547333
> 
> 赞同：3
> 
> 时间：2012-11-25T01:04:35.880
> 
> 标签：android, google-drive-api

如标题

因为我的 google drive 有很多文件，所以当我使用 Google Drive API 调试我的 Android 应用程序时，列出所有文件需要很长时间。

所以我决定将 90% 的文件清空到垃圾箱，然后清空垃圾箱。（永久删除）

但是，当我使用 Google Drive API 执行列表文件时，仍然会返回那些“永久删除”的文件。即使在 10 分钟或更长时间之后。

这是正常现象吗？

# javascript - 动态更改 svg 图像 ID 路径颜色

> ID：13547334
> 
> 赞同：0
> 
> 时间：2012-11-25T01:04:53.890
> 
> 标签：javascript, html, svg

我用 JS 在屏幕上放了一个 SVG 代码是这样的；

```
var imageObj = new Image();

imageObj.onload = function() {
context.drawImage(imageObj, 0, 0);
};

imageObj.src = mysvg.svg; 
```

但现在我想改变它的颜色。但只有stroke1 id路径

```
 <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
<path id="stroke1" d="M104.172,243.778c-19.76,28.41-32.721,45.681-38.883,51.843l-25.922-33.328c46.896-56.761,77.766-127.757,92.578-212.929
    l37.031,12.961c7.405,3.703,6.77,6.799-1.853,9.258c-6.19,34.572-16.058,67.293-29.625,98.133L104.172,243.778z"/>
<path d="M241.188,156.754c-16.058,32.113-33.328,58.643-51.845,79.617l-27.772-24.07c33.328-35.787,58.006-88.238,74.063-157.383
    l35.18,3.703c12.324,2.488,11.718,6.799-1.852,12.961l-14.813,49.993L241.188,156.754z"/>
<path d="M256,249.333c11.109,3.703,10.473,8.042-1.852,12.96c-11.109,62.953-26.56,111.73-46.289,146.273l-33.328-16.664
    c20.975-35.787,36.395-85.779,46.289-149.977L256,249.333z"/>
<path d="M405.977,238.223c27.138,56.791,46.289,104.931,57.398,144.421l-40.734,12.961c-9.895-40.734-26.559-89.482-49.991-146.273
    L405.977,238.223z"/>
<path d="M103.172,468.816V243.563l33.758-75.02l8.485,2.122l0.196,0.196c1.779,1.779,2.565,3.631,2.335,5.503
    c-0.293,2.384-2.173,4.635-5.744,6.872v285.58H103.172z"/>
<polygon points="382.413,218.462 408.168,157.754 239.753,157.754 253.451,120.575 418.319,120.575 424.109,108.995 
    466.786,138.093 456.82,148.059 423.218,232.064 "/>
<path d="M335.616,156.754V436.34c0,19.73-8.65,29.625-25.922,29.625h-49.992l-11.108-38.883h42.586c4.918,0,7.405-2.459,7.405-7.406
    V156.754H335.616z"/>
</svg> 
```

我能做些什么来改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:11:44.500

您可以使 SVG 内联，然后对其进行操作，例如（尝试[jsFiddle](http://jsfiddle.net/HEte2/)）：

```
<html>
  <head>
    <title></title>
    <script type="text/javascript">
      var changeColor = function() {
        document.getElementById("stroke1").setAttribute("style","fill:red")
      };
  </script>
  </head>
  <body onload="changeColor()">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
      <path id="stroke1" d="M104.172,243.778c-19.76,28.41-32.721,45.681-38.883,51.843l-25.922-33.328c46.896-56.761,77.766-127.757,92.578-212.929     l37.031,12.961c7.405,3.703,6.77,6.799-1.853,9.258c-6.19,34.572-16.058,67.293-29.625,98.133L104.172,243.778z"/>
      <path d="M241.188,156.754c-16.058,32.113-33.328,58.643-51.845,79.617l-27.772-24.07c33.328-35.787,58.006-88.238,74.063-157.383     l35.18,3.703c12.324,2.488,11.718,6.799-1.852,12.961l-14.813,49.993L241.188,156.754z"/>
      <path d="M256,249.333c11.109,3.703,10.473,8.042-1.852,12.96c-11.109,62.953-26.56,111.73-46.289,146.273l-33.328-16.664     c20.975-35.787,36.395-85.779,46.289-149.977L256,249.333z"/>
      <path d="M405.977,238.223c27.138,56.791,46.289,104.931,57.398,144.421l-40.734,12.961c-9.895-40.734-26.559-89.482-49.991-146.273     L405.977,238.223z"/>
      <path d="M103.172,468.816V243.563l33.758-75.02l8.485,2.122l0.196,0.196c1.779,1.779,2.565,3.631,2.335,5.503     c-0.293,2.384-2.173,4.635-5.744,6.872v285.58H103.172z"/>
      <polygon points="382.413,218.462 408.168,157.754 239.753,157.754 253.451,120.575 418.319,120.575 424.109,108.995      466.786,138.093 456.82,148.059 423.218,232.064 "/>
      <path d="M335.616,156.754V436.34c0,19.73-8.65,29.625-25.922,29.625h-49.992l-11.108-38.883h42.586c4.918,0,7.405-2.459,7.405-7.406     V156.754H335.616z"/>
    </svg>
  </body>
</html> 
```

编辑：要获取 SVG 并使其内联，我可能会使用这样的东西：

```
request = new XMLHttpRequest();
request.overrideMimeType("image/svg+xml");
request.open("GET",filename,false);
request.send("");
document.body.appendChild(document.adoptNode(request.responseXML.documentElement)); 
```

（这是未经测试的，这种形式对于严肃的代码来说可能太草率了。但它应该清楚地说明这个想法。）

# iphone - Amazon S3 - iPhone 不会播放私人 mp3

> ID：13547335
> 
> 赞同：1
> 
> 时间：2012-11-25T01:05:28.197
> 
> 标签：iphone, amazon-s3, jplayer

我正在使用[JPlayer](http://www.jplayer.org/)播放位于我的 Amazon S3 服务器上的 mp3 文件。

这在网络浏览器和 iPhone 上都能很好地发挥作用。

但是，当我将媒体设置为私有并添加存储桶策略以允许我的域访问时，iPhone 浏览器无法再找到 mp3 文件。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T19:52:42.543

发现 Safari 不会播放私人存储桶中的 mp3。相反，我将存储桶公开并生成过期链接供 jPlayer 使用

# php - AJAX POST 无法在 DIV 中加载 PHP 页面

> ID：13547347
> 
> 赞同：3
> 
> 时间：2012-11-25T01:08:18.303
> 
> 标签：php, jquery, ajax, post

我对ajax的耐心已经消失了。无论如何不能让这个工作。老实说，我没有在 DIV 之外尝试过此操作，因为其目的是专门使用 AJAX 将表单加载并发布到所述 DIV 范围内的页面。

非常感谢您对即将发生的事情的推进。

#contentmainpane 是一个 DIV。我有 ...

```
if (isset($_POST['l'])) {
echo $_POST['l']; }
else { 
echo 'nope'; } 
```

...在 CART 页面中加载正常，但没有收到来自 BOOK 页面的帖子（所以我在 #contentmainpane DIV 中的 CART.PHP 上没有得到回应）。这是有问题的 BOOK 页面代码：

```
<form id="form1" method="POST">
<input id="l" name="l" size="45" type="text" value="book">
<input id="submit" name="submit" value="save" type="submit">
</form>

<script>
$('#form1').submit(function(event){

event.preventDefault();

var book = $('#book').serialize();
var cart = '/content/pages/cart.php';
var formdata = {"book": book}

$.ajax({

type: "POST",

url : "/content/pages/cart.php"

data: formdata,

success: function(msg){

$("#contentmainpane").load(cart);

}
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:27:06.357

我注意到您正在序列化 ID 为 #Book 的表单，但您的 html 未显示 ID 为 #book ...另外，您需要在 url 后面加一个逗号

试试这个

```
$('#form1').submit(function(event) {
    event.preventDefault();
    var book = $('#form').serialize();
    var cart = '/content/pages/cart.php';

    $.ajax({
        type: "POST",
        url: "/content/pages/cart.php",
        data: book,
        success: function() {
            $("#contentmainpane").load(cart);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:34:46.857

您`data`需要成为具有 value 现有键的对象`l`。

由于您请求的`$_POST`值为“l”，因此您必须传递一个带有键“l”的数据对象。`formdata`从您的代码中，您在 AJAX 调用中传递的变量当前是一个`{ 'book' : book}`.

相反，它必须是`{ 'l' : book }`

或者，在您的 PHP 代码中

`if(isset($_POST['book'])){...`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T05:39:46.590

您可以使用 phery 库通过 AJAX 轻松地将 PHP 与 jQuery 绑定。[http://phery-php-ajax.net](http://phery-php-ajax.net)

你没有提到你`#book`是什么，我猜这是一个表格，对吧？在这种情况下，`data-related`在您的表单中使用将使其能够在一次 AJAX 调用中加入两个表单。

在你的情况下，它会像：

```
<form id="form1" data-remote="function" method="POST" data-related="#book">
  <input id="l" name="l" size="45" type="text" value="book">
  <input id="submit" name="submit" value="save" type="submit">
</form> 
```

在您的 PHP 中，它将是：

```
function func($data){
  $r = new PheryResponse;
  // $data['l'] got what you want, also $data['submit'] is available here
  // do whatever you need to do, then update your #contentmainpane
  $r->jquery('#contentmainpane')->html('your cart.php contents');
  return $r;
}

Phery::instance()->set(array(
  'function' => 'func'
))->process(); 
```

您的逻辑现在将是服务器端，而不是客户端。这样做您可以获得更大的灵活性，因为来自服务器的代码是免费的，并且可以在需要时进行更改，而客户端代码则不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T15:25:25.193

**这个问题已经解决**

谢谢大家的建议和努力。codingforums 上的用户解决了这个 ajax 帖子问题。

这是线程[http://www.codingforums.com/showthread.php?p=1294868#post1294868](http://www.codingforums.com/showthread.php?p=1294868#post1294868)

向所有编码员致以最诚挚的问候

# java - javadoc @global 或 @memberAttribute

> ID：13547349
> 
> 赞同：0
> 
> 时间：2012-11-25T01:08:23.747
> 
> 标签：java, android, javadoc

Javadoc 是一种友好的易于自建文档的实用程序。它有许多直接的标签，例如：`@param` `@return` `@throws`. 但是，我看不到记录对“全局”或“成员属性”变量的访问的方法。

我浏览了 SO、$search、Javadoc 上的一些 java/oracle 文档（[example1](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)、[example2](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/javadoc.html)）。

虽然通常建议通过函数参数传递操纵变量，但在某些有效的设计场合中，函数必须访问或修改超出其局部范围的变量（例如：“全局”或“成员属性”变量）。我试图找到记录这种访问的最佳方式。

基本代码示例：

```
<!-- language: lang-java  -->
/**
 * Update various UI widgets text and state.
 * @global mState is read to identify current state.
 */
private void updateWidgetsLook() {
  // stuff...   
} 
```

thx - android 标签是因为那是我工作的环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:59:25.467

您可以将@link 标签用于此类目的，例如：

```
<!-- language: lang-java  -->
/**
 * Update various UI widgets text and state.
 * {@link #mState} is read to identify current state.
 */
private void updateWidgetsLook() {
  // stuff...   
} 
```

在上面的示例中，mstate 必须驻留在当前类中。如果它位于不同的类中，则可以像这样访问它：{@link ResidingClass#mState}。

# c - c - 不能获取位域的地址

> ID：13547352
> 
> 赞同：17
> 
> 时间：2012-11-25T01:08:57.117
> 
> 标签：c, pointers, syntax-error, bit-fields, memory-address

**为什么不能获取位域的地址？**

*如何创建指向位域的指针？*

*这是代码...*

```
struct bitfield {
    unsigned int a: 1;
    unsigned int b: 1;
    unsigned int c: 1;
    unsigned int d: 1;
};

int main(void)
{
    struct bitfield pipe = {
        .a = 1, .b = 0,
        .c = 0, .d = 0
    };
    printf("%d %d %d %d\n", pipe.a,
            pipe.b, pipe.c, pipe.d);
    printf("%p\n", &pipe.a); /* OPPS HERE */
    // error: cannot take address of bit-field ...
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-25T01:17:57.003

位域成员（通常）小于指针所允许的粒度，即`char`s 的粒度（根据 的*定义*，`char`顺便说一句，它被要求至少为 8 位长）。因此，常规指针不会削减它。

此外，还不清楚指向位域成员的指针的类型是什么，因为要存储/检索这样的成员，编译器必须确切知道它在位域中的位置（并且没有“常规”指针类型可以携带此类信息）。

最后，它几乎不是一个要求的功能（位域在第一时间并不常见）；位域用于紧凑地存储信息或构建标志的打包表示（例如写入硬件端口），您很少需要指向它们的*单个字段*的指针 - 如果需要，您总是可以诉诸常规`struct`并在最后一刻转换为位域。

由于所有这些原因，该标准规定位域成员不可寻址，句号。有*可能*克服这些障碍（例如，通过定义存储访问位域成员所需的所有信息的特殊指针类型），但这将是该语言的另一个过于复杂的黑暗角落，没有人使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T01:13:59.403

您不能拥有位域的地址，因为最小的可寻址单元是一个字节（请记住，C 中的字节不一定是 8 位宽）。

您可能希望的最好结果是包含结构的地址。

（C11）标准的相关部分是部分`6.5.3.2 Address and indirection operators`（我的斜体）：

> 一元运算`&`符的操作数应该是函数指示符、a `[]`或一元运算`*`符的结果，或者`lvalue`指定*不是*位域且未使用寄存器存储类说明符声明的对象的 an。

鉴于最小的可寻址性是一个字节，并且您可能会发现您的 bitfileds 被压缩为：

```
Addr\Bit   7   6   5   4   3   2   1   0
00001234 | a | b | c | d | ? | ? | ? | ? |
00001235 |   |   |   |   |   |   |   |   | 
```

您可以看到所有这些位文件的地址实际上是相同的，所以它并没有那么有用。

对于操作位文件，您真的应该直接访问它们并让编译器对其进行排序。*除非您知道*编译器如何将它们布置在内存中，否则即使使用按位运算符也不能保证有效。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-25T01:15:43.540

地址必须是整数字节，但位域不必是，因此[C 标准规定](http://c0x.coding-guidelines.com/6.5.3.2.html)地址运算符`&`不能与它们一起使用。当然，如果你真的想用位域的地址做事情，你可以只使用封闭结构的地址，并进行一些按位操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-31T01:34:52.140

您不能打印位字段的地址，但可以分配给一些所需大小类型的局部变量（从一位内存转换为 2 个字节（整数类型大小将取决于编译器）内存），可用于打印地址。

无符号整数 x=pipe.a; printf("x=%d",&x);

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-07-07T13:31:16.303

在类似的注释中，如果您只想处理单个字节，您可以执行以下操作：

```
union PAIR  {
    struct { uint8_t l, h; } b;
    uint16_t w;
};

PAIR ax; 
```

您现在可以访问指向 &ax.w、&ax.bl 或 &ax.bh 等片段的指针，注意这仍然不允许您指向单个位，请参阅之前的解释。

编辑：固定示例

# bison - 野牛与非终端一起工作

> ID：13547354
> 
> 赞同：0
> 
> 时间：2012-11-25T01:09:21.983
> 
> 标签：bison

在我添加“浮动”规则之前，以下代码正在正确编译，然后它给了我在下面列出的错误，任何帮助将不胜感激。

```
%{
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

#define YYSTYPE double

int yylex(void);

static
void yyerror(char *s)
{
printf("yyerror: %s\n", s);
}

%}

%union{
  int       int_val;
  string*   op_val;
}

%token PLUS
%token MINUS
%token MULT
%token DIVIDE

%token LPAREN
%token RPAREN

%token Unsigned_float
%token UNSIGNEDINTEGER

%left PLUS MINUS
%left MULT DIVIDE

%%

lines     :         lines expr   '\n'         {printf("%g\n", $2);}
|                    lines '\n'
|                   /*empty*/
;

expr      :          expr PLUS  expr           {$$  =  $1  +  $3;}  
|                   expr MINUS  expr           {$$  =  $1  -  $3;} 
|                   expr MULT  expr           {$$  =  $1  *  $3;} 
|                    expr DIVIDE  expr           {$$  =  $1  /  $3;} 
|                   LPAREN  expr  RPAREN        {$$ =  $2;}
|                   UNSIGNEDINTEGER        
;

 float     : Unsigned_float PLUS  Unsigned_float           {$$  =  $1  +  $3;}  
|                    Unsigned_float MINUS  Unsigned_float           {$$  =  $1      -  $3;} 
|                    Unsigned_float MULT  Unsigned_float           {$$  =  $1  *  $3;} 
|                    Unsigned_float DIVIDE  Unsigned_float           {$$  =  $1  /  $3;} 
|                    LPAREN  Unsigned_float  RPAREN        {$$ =  $2;}       
;

%%

#include  "lex.yy.c"

int yylex(void);
int yyparse(void);

int main(void)
{
return yyparse();
} 
```

以下是错误：

```
stojk_3_4.y:40.63-64: $2 of `lines' has no declared type
stojk_3_4.y:45.49-50: $$ of `expr' has no declared type
stojk_3_4.y:45.56-57: $1 of `expr' has no declared type
stojk_3_4.y:45.63-64: $3 of `expr' has no declared type
stojk_3_4.y:46.61-62: $$ of `expr' has no declared type
stojk_3_4.y:46.68-69: $1 of `expr' has no declared type
stojk_3_4.y:46.75-76: $3 of `expr' has no declared type
stojk_3_4.y:47.60-61: $$ of `expr' has no declared type
stojk_3_4.y:47.67-68: $1 of `expr' has no declared type
stojk_3_4.y:47.74-75: $3 of `expr' has no declared type
stojk_3_4.y:48.63-64: $$ of `expr' has no declared type
stojk_3_4.y:48.70-71: $1 of `expr' has no declared type
stojk_3_4.y:48.77-78: $3 of `expr' has no declared type
stojk_3_4.y:49.62-63: $$ of `expr' has no declared type
stojk_3_4.y:49.68-69: $2 of `expr' has no declared type
stojk_3_4.y:53.60-61: $$ of `float' has no declared type
stojk_3_4.y:53.67-68: $1 of `float' has no declared type
stojk_3_4.y:53.74-75: $3 of `float' has no declared type
stojk_3_4.y:54.82-83: $$ of `float' has no declared type
stojk_3_4.y:54.89-90: $1 of `float' has no declared type
stojk_3_4.y:54.96-97: $3 of `float' has no declared type
stojk_3_4.y:55.81-82: $$ of `float' has no declared type
stojk_3_4.y:55.88-89: $1 of `float' has no declared type
stojk_3_4.y:55.95-96: $3 of `float' has no declared type
stojk_3_4.y:56.83-84: $$ of `float' has no declared type
stojk_3_4.y:56.90-91: $1 of `float' has no declared type
stojk_3_4.y:56.97-98: $3 of `float' has no declared type
stojk_3_4.y:57.73-74: $$ of `float' has no declared type
stojk_3_4.y:57.79-80: $2 of `float' has no declared type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:18:12.227

您不应同时使用`YYSTYPE`和`%union`。我很确定这样做会导致解析器无法编译。（但是，`bison`可能没有检测到这一点。）

如果您指定`%union`，那么您必须告知`bison`哪些`union`成员（按标记名）适用于每个终端和非终端。您可以使用`%type`非终端和`%token`终端的声明来执行此操作，如下所示：

```
%type <int_val> expr
%token <op_val> PLUS MINUS 
```

（这些*只是示例。* **不要只是复制它们。**您需要根据您对这些值所做的事情来考虑这一点。）

如果您指定`%union` *每个*终端和非终端 - 或者至少，使用其值的那些 - 必须具有类型规范；否则，`bison`将产生您看到的错误消息。如果不指定`%union`，则不需要声明类型，因为每个终端和非终端都具有相同的类型，无论`YYSTYPE`是什么类型。

# maven - Maven 部署：使用 -DaltDeploymentRepository 进行部署

> ID：13547358
> 
> 赞同：36
> 
> 时间：2012-11-25T01:11:07.007
> 
> 标签：maven, deployment

我有 maven 项目，我想将我的工件部署在内部 nexus 存储库上，该存储库被配置为在两个不同的地方拥有我的**快照**和**发布。**所以我不能使用'distributionManagement'，因为这会硬编码位置。所以我定义了几个**在我的**settings.xml 中**说“releaseRepository”和“snapshotRepository”，每个都有参数“release”，对于发布应该设置为“true”，对于快照应该设置为“false”。**

 **我正在使用以下命令运行我的构建以发布我的工件；

```
mvn clean deploy -DaltDeploymentRepository=releaseRepository::<DON'T KNOW WHAT GOES HERE SO LEFT IT EMPTY>::htp://abc.com/repositores/my-releases/ -Drelease=true 
```

现在，当我在命令上方运行时，它会失败，因为未提供“布局”的值，并且出现异常并且构建失败。

我找不到任何关于“布局”价值应该是什么的信息，我有大约 10 个项目，我想一个接一个地构建和发布。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-25T01:31:19.633

> `altDeploymentRepository` `String` - 指定项目工件应部署到的替代存储库（除了 中指定的那些`<distributionManagement>`）。格式：`id::layout::url`
> 
> ——（[来源](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)）

因此，在您的情况下：（`releaseRepository::default::http://your.repo.url`请参阅[此处](http://maven.apache.org/settings.html#Repositories)了解布局）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T08:36:33.333

“布局”是为向后兼容 Maven 1 而提供的遗留开关，在这一点上是不合时宜的。如果您使用的是 Maven 2 或 Maven 3（我相信至少 99.99% 的世界必须在这一点上），它确实是“默认”的，如此处其他地方所述。通过声明答案是明确的“默认”，可以避免开关的实用性问题；如果它总是“默认”，它仍然存在吗？

如果您实际上仍在使用 Maven 1，它应该是“遗留的”，但我希望没有人是。所有这些都在 Maven 规范中进行了描述：

布局 Maven2 布局的默认布局或 Maven1 布局的传统布局。Maven3 也使用默认布局。

[https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html](https://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T09:34:17.963

这可能不是您特定问题的答案，但仅仅因为您有不同的发布和快照存储库，您不需要使用 alt location 属性。仍然可以通过 pom.xml 中的分发管理标签进行管理

这是具有发布和快照存储库的示例片段

```
 <distributionManagement>
    <repository>
      <id>releaseRepository</id>
      <name>releaseRepository</name>
      <url>release-url-goes-here</url>
    </repository>
    <snapshotRepository>
      <id>snapshotRepository</id>
      <name>snapshotRepository</name>
      <url>snapshot-url-goes-here</url>
    </snapshotRepository>
  </distributionManagement> 
```**

# java - 如何在 Android 上使用 iText 从 PDF 文件中按顺序提取图像和文本

> ID：13547359
> 
> 赞同：6
> 
> 时间：2012-11-25T01:11:13.013
> 
> 标签：java, android, pdf, itext

我已经完成了从 PDF 中提取文本，但现在我想提取图像。第一个问题是图像位于每页文本之间。我想知道的是如何按顺序提取图像，即使文件是每页 2 列，以及如何确定图像在文本中的位置。

这是我尝试过的一些代码。

图像提取：

```
ExtractImages.java:
public static final String RESULT = "results/part4/chapter15/Img%s.%s";
public void extractImages(String filename)
    throws IOException, DocumentException {
    PdfReader reader = new PdfReader(filename);
    PdfReaderContentParser parser = new PdfReaderContentParser(reader);
    MyImageRenderListener listener = new MyImageRenderListener(RESULT);
    for (int i = 1; i <= reader.getNumberOfPages(); i++) {
        parser.processContent(i, listener);
    }
}

MyImageRenderListener:
public MyImageRenderListener(String path) {
    this.path = path;
}

public void renderImage(ImageRenderInfo renderInfo) {
    try {
        String filename;
        FileOutputStream os;
        PdfImageObject image = renderInfo.getImage();
        if (image == null) return;
        filename = String.format(path, renderInfo.getRef().getNumber(), image.getFileType());
        os = new FileOutputStream(filename);
        os.write(image.getImageAsBytes());
        os.flush();
        os.close();
    } catch (IOException e) {
        System.out.println(e.getMessage());
    }
} 
```

该代码处理 pdf 的内容并检查图像，然后将这些图像渲染为图像文件（.png、.jpg 等）。

我在这里遇到的问题是它没有按顺序提取图像。我希望图像按顺序排列，所以我会知道页面中的第一个图像和最后一个图像。我怎么做？那么，是否可以在不将其渲染到文件的情况下提取图像？我对图像的目标是在我的 android 应用程序中将其显示为图像而不将其转换为文件。如果我不可能，那么当用户完成使用它时，我会坚持删除图像。

我的目的是从 pdf 文件中**提取（不查看）**文本和图像，并在 android 应用程序中按顺序显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-27T14:58:53.507

高级方法：

1.  从文档中提取所有文本，而不关心阅读顺序
2.  根据字符、二元组和三元组的分布确定文本的语言
3.  一旦知道语言，您就知道是使用 LTR（从左到右）还是 RTL 阅读顺序
4.  使用诸如每个字符的边界框、语言和字体之类的信息，启发式地构建文本行（一个好的初始度量可能是“如果两个字符大致位于相同的 y 位置并且它们之间的间隙x 位置在平均值 + std_dev 范围内）
5.  一旦你建立了线条，建立段落（与以前类似的启发式）
6.  现在您有了段落和文本的语言，您可以按正确的顺序打印出段落。

这是我在 iText 一直在研究的东西，这当然不是一项简单的任务。

最简单的解决方案当然是有一个带标签的 pdf 文档。标记文档包含有关哪些视觉元素以何种方式属于一起的信息。或者，简单地说，您不必担心自己已​​经完成并标记了行和段落。

# java - YEAR 无法解析为变量

> ID：13547360
> 
> 赞同：0
> 
> 时间：2012-11-25T01:11:24.560
> 
> 标签：java

在 JAVA 中，

```
Calendar Target_Date = Calendar.getInstance();
Target_Date.set(YEAR,Integer.parseInt(req.getParameter("date").split("-")[0])); 
```

给出错误`YEAR cannot be resolved to a variable`。我没有`set()`正确使用吗？我想改变`Target_Date`年份。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T01:13:02.877

`YEAR`是静态的，`Calendar.YEAR`除非您有静态导入，否则您应该使用它。

# java - 如何在 Java GridLayout 中使用边距和填充

> ID：13547361
> 
> 赞同：10
> 
> 时间：2012-11-25T01:11:27.960
> 
> 标签：java, swing, layout, awt, layout-manager

如何防止 JLabel 与框架的一侧齐平显示？我在使用 GridLayout 或 BoxLayout 时遇到了同样的问题。

这是发生这种情况的示例：

```
JPanel content = new JPanel();
content.setLayout(new BoxLayout(content, BoxLayout.Y_AXIS));
content.add(new JLabel("Hello World")); 
```

CSS 有边距和内边距的概念。Java有类似的吗？

我仍然希望左对齐，但边缘和标签之间有几个像素的空间。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T01:28:33.020

您可以为 设置一个空边框`JLabel`以将组件从左边缘移动几个像素：

```
label.setBorder(BorderFactory.createEmptyBorder(0, 20, 0, 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:23:11.687

对于居中的标签，试试这个：

```
content.add(new JLabel("Hello World", JLabel.CENTER)); 
```

如果您正在使用`Box`，您可以通过调用添加空格（在垂直框中）：

```
content.add(Box.createVerticalStrut(height));
content.add(new JLabel("Hello World")); 
```

或水平：

```
content.add(Box.createHorizontalStrut(width)); 
```

# java - 将图形按钮制作为 JPanel

> ID：13547362
> 
> 赞同：1
> 
> 时间：2012-11-25T01:11:33.107
> 
> 标签：java, swing, graphics, jpanel, jcomponent

我有一个很好的问题，因为我有 3 个课程：

1.  WindowFrame - 它的一个类扩展了 JFrame，它将显示其中一个面板；
2.  WindowPanel - 它是一个扩展 JPanel 的类。我在那里有布局 BoxLayout。我想在 WindowFrame 中的其他面板之间切换；
3.  GButton - 它是一个类似于普通按钮的类，但我的纹理在 bg 上，我想通过 add() 轻松地将它们添加到 WindowPanel：

* * *

```
public class GButton extends JComponent implements MouseMotionListener, MouseListener{

    int x, y , w, h; //the coordinates of button
    Graphics2D g2d;

    public GButton(int x, int y){
        this.x = x; this.y = y;
        this.w = 200; this.h = 100;
        ... //add listeners, loading some information etc
    }

    @Override
    public void paintComponent(Graphics g){
        g2d = (Graphics2D) g;
        ...//loading and draw on g2d
        g2d.drawString("asidoaisjdiajsoidj",x,y);
    }

    //code with using events of mouse and so on
} 
```

当我添加按钮时，按钮的纹理在y下方50px！下一个按钮已经与 y 产生了这种差异。为什么？我知道这一点，因为我通过帮助 MouseMove 事件检查它。这不是一个糟糕的图像大小或类似的东西。为什么它不起作用，它在其他地方画东西？更简单的方法可以获得相同的效果吗？请回答 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:18:33.033

但是，您在地面上编码有点薄。

*   不要维护对`Graphics`上下文的引用。1、重复使用；2\. 油漆周期之间可能会发生变化。您需要在传递给组件的图形上下文中进行绘制
*   你必须打电话`super.paintComponent`，这非常重要。

我不能 100% 确定，但您似乎认为您需要绘制到按钮出现在屏幕上的 x/y 位置，这是不正确的。上下文已经被翻译，`Graphics`因此位置 0x0 是对象的上/左角。

我建议你需要花一些时间阅读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:19:02.647

`Graphics`永远不要保留对（以及 2D）的全局引用。

如果确实需要，请`g2d.dispose()`在每个绘图结束时调用，以便在下次使用时获取新的图形上下文。

# python - 有没有办法检查字符串是否包含未知格式的日期？

> ID：13547364
> 
> 赞同：2
> 
> 时间：2012-11-25T01:12:01.003
> 
> 标签：python, date, parsing, date-parsing

在 Python 中，有没有办法明确检查字符串是否包含日期。？如果它可以捕获任何日期格式会更好，但如果不能，它是否可以捕获 %B-%w-%Y 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:46:49.710

您可以使用 dateutil.parser 模块，该模块将为您从字符串中解析任何人类可读的日期格式。

[http://labix.org/python-dateutil#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c](http://labix.org/python-dateutil#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c)

# java - 在 Scala 中使用 Java 语言环境抱怨：对象不是值

> ID：13547365
> 
> 赞同：4
> 
> 时间：2012-11-25T01:12:04.730
> 
> 标签：java, scala, locale

我正在尝试在 Scala 中使用 java 语言环境。使用常量 like`java.util.Locale.ENGLISH`效果很好；然而，`java.util.Locale("en")`抱怨：

```
error: object Locale is not a value
java.util.Locale("en")` 
```

这似乎与[这个问题有关](https://stackoverflow.com/questions/9079129/object-is-not-a-value-error-in-scala)，这表明 Locale 没有伴随对象。我已经[阅读了一些关于此的内容](http://tutorials.jenkov.com/scala/singleton-and-companion-objects.html)，但我仍然无法弄清楚如何访问 Locale**类**？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T01:16:09.830

不要忘记用**new**关键字实例化语言环境，因为它是类：

```
scala> new java.util.Locale("en")
res0: java.util.Locale = en 
```

# php - 将 JavaScript 变量发送到 PHP 变量的安全性

> ID：13547367
> 
> 赞同：4
> 
> 时间：2012-11-25T01:12:09.860
> 
> 标签：php, javascript, ajax

我有一个关于安全的问题。我有一个 Javascript 变量：

```
var toSearch = "something" 
```

我想将此变量发送到另一个 php 页面。我正在使用会话：`<?php session_start(); ?>`

根据我的阅读，我需要使用 AJAX GET/POST 过程将此 javascript 客户端变量传递给 PHP 服务器端。

我知道可以这样做：

```
window.location.href = "myphpfile.php?name=" + javascriptVariable; 
```

然后`$_GET['name']`是变量。我读过这不安全？是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:15:11.990

它只是不安全的，取决于你用它做什么。任何人都可以在地址栏中输入他们喜欢的任何内容，而您无法控制。例如，我可以去

```
http://example.com/myphpfile.php?name=fuzzball 
```

现在，这本身并不危险，但是如果我要放置一些 MySQL 代码，而您将其直接放在 MySQL 数据库中而没有进行任何处理，那就很危险了。如果我将 HTML 放入然后显示给其他用户，那么这很危险。

你所要做的就是记住，虽然 GET 和 POST 并不危险，但它们不能被信任为你所期望的那样，因此你应该确保它们在服务器端，在那里它可以被信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:20:29.883

如果您不想强制页面重新加载，那么更好的解决方案是使用 ajax 请求。关于安全性是一样的，因此每个用户都可以轻松地操作查询字符串......我们有一个地址栏：）

```
window.XMLHttpRequest = window.XMLHttpRequest || window.ActiveXObject('MSXML2.XMLHTTP') || window.ActiveXObject('Microsoft.XMLHTTP');

var ajax = new XMLHttpRequest();

ajax.open('get', 'page.php?name=' + javascriptVariable, true);

if ( ajax.readyState == 4 && ajax.status == 200 )
{
    // ajax.responseText is the result from php server
    // ajax.responseXML is the result from php server
}

ajax.send(null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T01:34:48.610

如果您不擅长 JavaScript 或 Ajax 请求，我建议您使用 jquery .ajax 方法。jQuery 的文档非常完善，非常适合初学者。

此外，您的变量设置不正确。应该：

```
var toSearch = "something"; 
```

所以请访问：[http](http://api.jquery.com/jQuery.ajax/) ://api.jquery.com/jQuery.ajax/开始。

如何执行此操作的示例。

JS：

```
function myFunction() {

    var toSearch = "something";

    $.ajax({
       url: 'mysite/action_page.php?toSearch=' + toSearch,
       success: function(data) {
          alert('Here is some data from the $_GET request: ' + data);
       }
    });

} 
```

PHP：

```
<?php
   /**
     * I strongly suggest a security measure here
     * ie: if($_GET['token'] != $_SESSION['token']) die('access not permitted');
    */

   //init
   $search_string = '';

   //set
   $search_string = htmlspecialchars(trim($_GET['toString']), ENT_QUOTES);
   //TAKE A LOOK AT PHP.net IF YOU DON'T KNOW WHAT THE TWO METHODS ABOVE DO.  
   // will help prevent xss

   echo $search_string;

   //all done!
 ?> 
```

# c++ - '\u0B95' 是多字符文字吗？

> ID：13547368
> 
> 赞同：10
> 
> 时间：2012-11-25T01:12:16.383
> 
> 标签：c++, character-encoding, c++11, literals

在[我之前给出的答案中](https://stackoverflow.com/a/13546801/150634)，我回应了以下警告，原因是`'\u0B95'`需要三个字节，*多字符文字*也是如此：

```
warning: multi-character character constant [-Wmultichar] 
```

但实际上，我不认为我是对的，我也不认为 gcc 是。该标准规定：

> 包含多个*c-char*的普通字符文字是*多字符文字*。

*c-char*的一个产生规则是*通用字符名称*（即`\uXXXX`或`\UXXXXXXXX`）。由于`\u0B95`是单个*c-char*，因此这不是多字符文字。但现在它变得一团糟。该标准还说：

> 包含单个*c-char*的普通字符文字具有 type ，其值等于执行字符集中*c-char*`char`编码的数值。

 *所以我`char`的文字在执行字符集中具有字符的类型和值（或者如果它在该集中不存在，则为实现定义的值）。`char`仅定义为足够大以存储基本字符集的任何成员（标准实际上并未定义，但我认为它表示基本执行字符集）：

> 声明为字符 (char) 的对象应足够大以存储实现的基本字符集的任何成员。

因此，由于执行字符集是 a`char`可以保存的所有值的超集，我的角色可能不适合`char`.

那么my有什么价值*呢？*`char`这似乎没有在任何地方定义。该标准确实说，对于`char16_t`文字，如果值不可表示，则程序格式错误。但是，它没有说明普通文字。

发生什么了？这只是标准中的一团糟还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:42:09.803

有人发布的答案正确回答了我的问题的第二部分（有什么价值`char`？），但后来删除了他们的帖子。由于那部分是正确的，我将在此处与第一部分的答案一起复制它（它是多字符文字吗？）。

* * *

`'\u0B95'`不是多字符文字，gcc 在这里是错误的。如问题中所述，多字符文字由（§2.14.3/1）定义：

> 包含多个*c-char*的普通字符文字是*多字符文字*。

由于*通用字符名称是**c-char*的一种扩展，因此文字`'\u0B95'`仅包含一个*c-char*。如果普通文字不能包含*通用字符名称*以`\u0B95`被视为六个单独的字符（`\`, `u`,`0`等），那将是有意义的，但我在任何地方都找不到这个限制。因此，它是单个字符，而文字不是多字符文字。

为了进一步支持这一点，为什么*它*会被认为是多个字符？在这一点上，我们甚至还没有给它一个编码，所以我们不知道它会占用多少字节。在 UTF-16 中它需要 2 个字节，在 UTF-8 中它需要 3 个字节，而在某些想象的编码中它可能只需要 1 个字节。

那么字符文字有什么价值呢？首先，*universal-character-name*映射到执行字符集中的相应编码，除非它没有映射，在这种情况下它具有实现定义的编码（第 2.14.3/5 节）：

> 通用字符名称被转换为命名字符在适当执行字符集中的编码。如果没有这样的编码，universal-character-name 将被转换为实现定义的编码。

无论哪种方式，`char`文字的值都等于编码的数值（第 2.14.3/1 节）：

> 包含单个*c-char*的普通字符文字具有 type `char`，其值等于执行字符集中 c-char 编码的数值。

现在重要的部分，不方便地隐藏在本节进一步的不同段落中。如果该值不能在 中表示`char`，它将获得一个实现定义的值（第 2.14.3/4 节）：

> `char`如果字符文字的值超出为（对于没有前缀的文字）定义的实现定义的范围，则它的值是实现定义的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T22:33:17.313

你是对的，根据规范`'\u0B95'`是一个字符类型的字符文字，其值等于执行字符集中字符的编码。你是对的，规范没有说明由于单个 char 无法表示该值而无法用于 char 文字的情况。行为未定义。

有关于这个问题向委员会提交的缺陷报告：例如，[http ://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#912](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#912)

当前提议的解决方案似乎是指定这些字符文字也是`int`s 并且具有实现定义的值（尽管提议的语言不太适合），就像 multichar 文字一样。我不喜欢这种解决方案，我认为更好的解决方案是说这样的文字格式不正确。

这是在 clang 中实现的：http: [//coliru.stacked-crooked.com/a/952ce7775dcf7472](http://coliru.stacked-crooked.com/a/952ce7775dcf7472)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T05:16:04.347

我会争辩如下：

> *`char`如果字符文字的值超出了为（对于没有前缀的文字）定义的实现定义的范围*...... （来自第 2.14.3.4 节）

如果`'\u0B95'`超出定义的实现定义范围`char`（如果`char`是 8 位），则它的值将由实现定义，此时 GCC 可以使其值成为多个`c-char`s 的序列，从而成为多字符文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-24T21:45:51.347

因为您没有字符编码前缀，所以 gcc（以及任何其他符合标准的编译器）会看到`'\u0B95'`并认为 1）char 类型和 2）多字符，因为字符串中有多个字符代码。

*   `u'\u0B95'` 是一个 UTF16 字符。
*   `u'\u0B95\u0B97'`是一个多字符 UTF16 字符。
*   `U'\ufacebeef'` 是一个 UTF32 字符。

等等*

# c# - DropDownList 绑定到 ActionResult 创建方法 MVC 4 VS2012

> ID：13547375
> 
> 赞同：2
> 
> 时间：2012-11-25T01:13:33.213
> 
> 标签：c#, razor, asp.net-mvc-4, visual-studio-2012, html-select

我是这里的全新用户 - 但我一直在寻找几个小时来解决以下问题：

我有 2 个实体 - 类别和项目。每个项目都应该属于一个类别 - 因此我希望有一个 DropDownList 在创建新项目时显示所有现有类别。到目前为止，我的代码显示了包含所有类别的 DropDownList，但是当我选择一个类别并提交表单 (POST) 时，类别的值始终为空。这自然会导致 ModelState.IsValid 为 false，因为 Category 不可为空。如何将 User-Selected-Value 放入我的 Create(POST) 方法？

```
I've got a Controller with following Methods to Create a new Item:

// GET Method
public ActionResult Create()
{
    ViewBag.Category = new SelectList(db.CategorySet, "Id", "CategoryName");
    return View();
}
[HttpPost]
public ActionResult Create(Item item)
{
    if (ModelState.IsValid)
    {
      db.ItemSet.Add(item);
      db.SaveChanges();
      return RedirectToAction("Index");
    }

return View(item);
}

And this is the DropDownList in my View (Create.cshtml):
<div class="editor-field">
@Html.DropDownList("Category", (IEnumerable<SelectListItem>) ViewBag.Categories, "--Select Category--")
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:58:58.687

最后我得到了一个自定义视图模型——这样我就可以工作了……

对于那些不知道自定义视图模型是什么的人：您创建一个新类，其中包含创建新对象所需的所有值，在我的示例中，该类包含可用类别的 SelectList（属性）， SelectedCategoryId 的整数值（属性）和要创建的项目（属性）。在您的 cshtml 文件中，您将此类添加为 @model ....CustomCreateItemModel 并在您的 DropDownList 中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:57:18.730

如果您的 Item 具有 CategoryId 属性：

```
public class Item
{
  public int CategoryId {get;set;]
} 
```

您需要将您的名称命名`DropDownList`为，`"CategoryId"`以便`ModelBinder`能够正确绑定该值

或者使用强类型助手：

```
Html.DropDownListFor(x=>x.CategoryId...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T09:34:36.890

谢谢阿门。

我有同样的问题，我的下拉列表可以从数据库中填充，但是 OrganisationID（在我的情况下）在创建新记录时没有进入数据库（在我的情况下，总是捕获 0） - 直到我刚刚改变ViewBag 的名称与下拉列表中的值相同（即两个 OrganisationID） - 正如您有帮助地指出的那样 - 现在它可以工作了！

对于它的价值，对于其他任何人在我们的命名不一致以启用绑定时经历“绝望的编码器”和我所经历的挫折，这就是我用来使下拉列表工作的方法（抱歉 - 不使用实体框架，但如果你使用 EF，原则应该仍然清晰且易于适应）：

但关键是要启用绑定的相同命名。再次感谢阿门！

**模型**

```
public class Organisation_Names
    {
        public DataSet GetOrg_Names()
        {
            SqlConnection cn = new SqlConnection(@"Data Source=XXXXXXXXX;User ID=XXXXXXXXX;Password=XXXXXXXXXXX;Initial Catalog=XXXXXXXXXXXX");
            SqlCommand cmd = new SqlCommand("sp_GetOrg_Names", cn);
            cn.Open();
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.ExecuteNonQuery();
            DataSet ds = new DataSet();
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds);
            return ds;
        }
    } 
```

**控制器**

```
//
    // GET: /Services/Create
    **public ActionResult Create(Organisation_Names organisation_names)
    {
        DataSet ds = organisation_names.GetOrg_Names();
        ViewBag.OrganisationID = ds.Tables[0];
        List<SelectListItem> items = new List<SelectListItem>();
        foreach (System.Data.DataRow dr in ViewBag.OrganisationID.Rows)
        {
            items.Add(new SelectListItem { Text = @dr["OrganisationName"].ToString(), Value = @dr["OrganisationID"].ToString() });
        }
        ViewBag.OrganisationID = items;
        return View();
 }

 //
    // POST: /Services/Create

    [HttpPost]
    [ValidateAntiForgeryToken]
    **public ActionResult Create(CreateServiceModel createservicemodel, Organisation_Names organisation_names, FormCollection selection)
    {
DataSet ds = organisation_names.GetOrg_Names();
        if (ds == null)
        {
            return HttpNotFound();
        }
        ViewBag.OrganisationID = ds.Tables[0];
        List<SelectListItem> items = new List<SelectListItem>();
        foreach (System.Data.DataRow dr in ViewBag.OrganisationID.Rows)
        {
            items.Add(new SelectListItem { Text = @dr["OrganisationName"].ToString(), Value = @dr["OrganisationID"] + 1.ToString() });
        }
        ViewBag.OrganisationID = items;**

if (this.IsCaptchaVerify("Answer was incorrect. Please try again."))
        {
            try
            {
int _records = createservicemodel.CreateService(createservicemodel.OrganisationID, createservicemodel.ServiceName, createservicemodel.ServiceDescription, createservicemodel.ServiceComments,   createservicemodel.ServiceIdentificationNumber, createservicemodel.CreatedBy, createservicemodel.NewServiceID);

                if (_records > 0)
                {
                    return RedirectToAction("Index", "Services");
                }
            }
            catch
            //else
            {
                ModelState.AddModelError("", "Cannot Create");
            }

        }
        {
            return View(createservicemodel);
        }

    } 
```

**看法**

```
@model WS_TKC_MVC4.Models.CreateServiceModel
@using CaptchaMvc.HtmlHelpers
@using WS_TKC_MVC4.Models
@{ViewBag.Title = "Service added by " ;} @User.Identity.Name

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript">     </script>

@using (Html.BeginForm()) {
@Html.AntiForgeryToken()
@Html.ValidationSummary(true)
<fieldset>
    <legend>CreateServiceModel</legend>

<div class="editor-label">
    <p>Select Organisation</p>
</div>
    <div class="editor-field">
    @Html.DropDownList("OrganisationID")
 @Html.ValidationMessageFor(model => model.OrganisationID)
        @Html.EditorFor(model => model.OrganisationID)
    </div> 
```

（更多字段）

```
 <div class="editor-label">
        @Html.LabelFor(model => model.MathCaptcha)
    </div>
    @Html.MathCaptcha("Refresh", "Type answer below", "Answer is a required field.")

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

# c++ - GetAsyncKeyState() defn 中的“不应依赖”是什么意思

> ID：13547377
> 
> 赞同：2
> 
> 时间：2012-11-25T01:13:48.613
> 
> 标签：c++, winapi

[来自 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)：

> 如果设置了最高有效位，则键按下，如果设置了最低有效位，则在上一次调用 GetAsyncKeyState 后按下了键。但是，您不应该依赖最后一种行为；[..]
> 
> 尽管返回值的最低有效位指示自上次查询以来是否已按下键，但由于 Windows 的抢先式多任务处理性质，另一个应用程序可以调用 GetAsyncKeyState 并接收“最近按下”位而不是您的应用程序。严格保留返回值的最低有效位的行为是为了与 16 位 Windows 应用程序（非抢占式）兼容，不应依赖该应用程序。

在我的程序中，我只对密钥当前所在位置的返回值感兴趣。即，如 msdn 所定义，当设置了最低和最高有效位 (-32767) 时（这就是它现在的工作方式。）。但是，我是否还必须检查 32767 （没有最低 sig. 位的值）以防万一，就像它说的那样，最低有效位被另一个程序截获，或者“不可靠”，无论这意味着什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:55:12.390

`GetAsyncKeyState()`尝试确定自从您上次调用它以来它是否被按下，这使得它不可靠。其他东西可能已经调用并有效地重置了该标志，因此您永远不会收到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:23:58.493

嗯，是的，基本上。不过，只检查最重要的位并完全忽略最不重要的位更容易。

> 我是否还必须检查 32767（没有最小信号位的值）

这是不对的 - 值将是 -32768（假设二进制补码）：

```
1000 0000 0000 0001   -32767
1000 0000 0000 0000   -32768 
```

参见[这里](https://stackoverflow.com/a/10795798/560648)；我很奇怪这个值被打包成 a `short`，但我们开始了。

# file - 更新以前的安装设置

> ID：13547378
> 
> 赞同：3
> 
> 时间：2012-11-25T01:13:51.010
> 
> 标签：file, inno-setup, updates, uninstallation

我正在创建更新设置文件。在我的初始安装中，我有一个在 [UninstallRun] 中调用的 EXE 文件。在更新中，我想永久删除此 EXE 文件，但更新后卸载时似乎总是抛出错误“无法删除某些元素”。

要删除 EXE，我尝试在更新的`[InstallDelete]`. 这会删除文件，但在卸载时仍会抛出错误消息（即使所有文件都已明确删除）。

我尝试在更新中替换 EXE 并使用`deleteafterinstall`标志，但这并没有什么不同。

如果我什么都不做，只是安装它，当我运行卸载程序时，会调用 EXE 文件，即使更新不再包含该`[UninstallRun]`部分。所以看起来初始安装的安装文件正在用于卸载部分。

出于本项目的目的，我无法更改初始安装，因此一切都必须从更新安装开始。有没有办法删除放在一个`UninstallRun`部分中的现有文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T09:01:28.290

问题是`[UninstallRun]`先前安装的条目已经在卸载日志中注册，因此只需从脚本中删除它不会阻止它生效，默认情况下删除文件会使其产生该错误，因为（大概）由于文件丢失，一些必需的卸载任务没有发生。

您是否记得在原始安装程序`RunOnceId`的条目上添加了一个？`[UninstallRun]`如果是这样，您可以使用相同的 ID 放置一个“替换”条目。您仍然必须将其指向一个 exe，但您可以将其设为无操作的，或者（更好地）使用`Flags: skipifdoesntexist`并将其指向您已删除的那个。

如果您没有使用 a `RunOnceId`，则没有任何方法可以覆盖上一个条目。你只需要放入一个什么都不做的虚拟 exe 文件。

# php - 使用 php 获取 windows 标题在浏览器调用中不起作用

> ID：13547381
> 
> 赞同：2
> 
> 时间：2012-11-25T01:14:04.033
> 
> 标签：php, windows, winapi, visual-c++, browser

我的问题是我需要获取 FOOBAR2000 的标题，因为其中包括播放文件的信息，所以我通过 Win32 API( `GetWindowText()`, `EnumWindows()`) 创建了一个执行文件，它运行良好。

```
TCHAR SearchText[MAX_LOADSTRING] = _T("foobar2000");

BOOL CALLBACK WorkerProc(HWND hwnd, LPARAM lParam)
{
    TCHAR buffer[MAX_TITLESTRING];

    GetWindowText(hwnd, buffer, MAX_TITLESTRING);
    if(_tcsstr(buffer, SearchText))
    {
        // find it output something
    }

    return TRUE;
}

EnumWindows(WorkerProc, NULL); 
```

输出看起来像“**专辑封面标题.... [foobar2000 v1.1.5]** ”

我创建了一个像 test.php 这样的 php 文件，并使用`exec()`它来执行它。

```
exec("foobar.exe"); 
```

然后在控制台（cmd）中我使用命令来执行它

```
php test.php 
```

它也很好用，输出和以前一样。

现在我用浏览器（firefox）调用这个php文件（test.php），奇怪的事情发生了。输出只有**foobar2000 v1.1.5**，其他信息不见了...

我想也许是`exec()`问题？优先级或某些限制，所以我使用 C# 创建一个 COM 对象并注册它，并重写 php 代码

```
$mydll = new COM("FOOBAR_COMObject.FOOBAR_Class");
echo $mydll->GetFooBarTitle(); 
```

结果仍然相同，命令行正常，但浏览器失败。

我的问题是

1.  为什么命令行和浏览器之间有 2 个不同的输出。我想不通。
2.  如何通过浏览器获得正确的输出。
3.  或者有一种简单的方法来获取 FOOBAR2000 的标题？

有没有人有这个问题的经验？

== 2012/11/28 编辑 ==

按照Enno的意见，我修改http_control插件添加文件名信息，原来的json信息是“曲目标题”。

修改如下

state.cpp 第 380 行添加 1 行

```
+pb_helper1 = pfc::string_filename(pb_item_ptr->get_path());
 pb_helper1x = xml_friendly_string(pb_helper1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:35:33.207

如果您的网络服务器作为服务运行，则在 Windows 中您需要为该服务启用“允许桌面交互”。当通过浏览器请求时，您的 php 脚本作为网络服务器进程的子进程运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:40:13.510

@ 1：当firefox打开php并执行时，上下文取决于运行php-container（apache）的用户，这与在您的上下文中执行的命令行调用完全不同

@ 2 和 3：获取标题的方法似乎不止一种：使用 foobar-sdk 并创建一个模块，该模块只需读取每个 api 的当前标题，然后将结果写入 http 内的静态 html 文档-root-folder 或者使用 sdk 中的 http-client，有了它，你不需要 wabserver，最好使用已经实现的模块：例如 foo_upnp 或 foo-httpcontrol

祝你好运！

# python - 如何在 Python 中播放来自 Windows 服务的视频

> ID：13547386
> 
> 赞同：0
> 
> 时间：2012-11-25T01:14:49.737
> 
> 标签：python, windows, windows-services

我使用这篇文章中描述的技术：

[是否可以在 Windows 中将 Python 脚本作为服务运行？如果可能，怎么做？](https://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how)

在 Python 中创建 Windows 服务。我启动 OSC 并等待消息启动视频。问题是，我不能让它开始一个视频。在任何阶段。我用过`subprocess.call`，我用过`os.startfile`，我用过`win32api.WinExec`。我将命令放在一个`.bat`文件中并启动它。没有任何效果。这是不可能的吗？

我更改了脚本以在服务启动时启动视频，所以这不是 OSC 问题。

# sed - 使用 sed 或 awk - 或其他文本处理器 - 查找/替换范围内的数字

> ID：13547392
> 
> 赞同：1
> 
> 时间：2012-11-25T01:15:52.513
> 
> 标签：sed, awk, grep

我是正则表达式和处理文本的初学者。我需要做的是将文件中的文本格式化为 CSV 格式以导入电子表格。

我需要找到一个具有一定范围的数字并在其后插入一个回车 - `\r`- 并删除一个逗号。我知道如何查找/替换特定字符，但不是在字符或数字范围内。

这是交易：我有一个长文本文件，采用这种格式。

```
Shimshon A
(blank)
November 24, 2012
13,481
jonathan t
Laguna Niguel, CA
November 24, 2012
13,480
scott b
Sussex, NJ
November 24, 2012
13,479 
```

我在带有查找/替换的文本编辑器中添加了行尾逗号和行首/行尾引号：

```
"Shimshon A",
"(blank)",
"November 24, 2012",
"13,481",
"jonathan t",
"Laguna Niguel, CA",
"November 24, 2012",
"13,480",
"scott b",
"Sussex, NJ",
"November 24, 2012",
"13,479", 
```

但是一旦我删除了所有返回，我需要在 13,481 到 1 范围内的数字之后插入一个返回。这是因为 CSV 中的每一列都需要是名称、位置、日期和数字，如下所示：

```
"Shimshon A","(blank)","November 24, 2012","13,481"
"jonathan t","Laguna Niguel, CA","November 24, 2012","13,480"
"scott b","Sussex, NJ","November 24, 2012","13,479" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T03:15:54.150

解决此问题的另一种方法是将您的数据集视为四行组

**使用`awk`：**

```
awk 'NR%4!=0 { printf "%s", $0; next } { sub(/,$/,"") }1' file 
```

结果：

```
"Shimshon A","(blank)","November 24, 2012","13,481"
"jonathan t","Laguna Niguel, CA","November 24, 2012","13,480"
"scott b","Sussex, NJ","November 24, 2012","13,479" 
```

解释：

正如你所看到的，这使用[模数运算符](http://www.grymoire.com/Unix/Awk.html#uh-6)来“grep”不能被四整除的每一行（即不是整数）*。*'printf' 语句将这些行并排打印。'next' 成功时跳过。在所有其他时间，删除滞后的逗号，并打印该行（语句末尾的 1 是默认打印的简写）。有任何问题，请随时提问。HTH。

您还可以通过简单地更改`printf`语句来集成逗号和双引号的添加：

```
awk 'NR%4!=0 { printf "\"%s\",", $0; next } { printf "\"%s\"\n", $0 }' file 
```

* * *

**使用`GNU sed`：**

```
sed -n 'N;N;N;s/\n\|,$//g;p' file 
```

或者在添加逗号和双引号之前：

```
sed -n 'N;N;N;s/^\|$/"/g;s/\n/","/g;p' file 
```

结果：

```
"Shimshon A","(blank)","November 24, 2012","13,481"
"jonathan t","Laguna Niguel, CA","November 24, 2012","13,480"
"scott b","Sussex, NJ","November 24, 2012","13,479" 
```

解释：

虽然这个解决方案要短得多，但它与上面使用 , 描述的情绪相同`awk`。对于第一条语句：使用标志`sed`禁用默认打印。`-n`将三行附加到模式空间。在第四行，删除换行符和滞后逗号。然后打印。

第二个`sed`陈述大致相同；将三行附加到模式空间。在第四行，用双引号替换行的开头和结尾。还用双引号、逗号、双引号替换换行符；全球范围内。然后打印。HTH。

* * *

**从评论：**

根据我的经验，使用（尽管可能）进行排序`awk`可能会很快变得难以阅读。这是一种让您重用我们使用其他两个工具编写的以前代码的方法，`paste`并且`sort`：

```
paste <(awk -F, 'NR%4==2 { print $NF }' file) <(awk 'NR%4!=0 { printf "\"%s\",", $0; next } { printf "\"%s\"\n", $0 }' file) | sort | sed 's/[^"]*//' 
```

应该注意的是，这个命令在添加逗号和双引号之前使用输入——正如你所看到的，它使用了`awk`上面描述的第二个命令。它通过`paste`在我们之前获得的每个结果之前粘贴（用）“状态”来工作。然后，这允许使用 . 按字母顺序对行进行排序`sort`。输入排序后，`sed`用于剥离此信息。

# c# - 将人类可读的日期转换为纪元时间戳

> ID：13547394
> 
> 赞同：0
> 
> 时间：2012-11-25T01:16:14.087
> 
> 标签：c#, timestamp, epoch

我正在开发一个 C# 项目，我有一个格式为的日期/时间，`2012-11-24 15:35:18`我需要将其转换为纪元时间戳。

我在谷歌上找到的所有东西都是将纪元时间戳转换成人类可读的，但我需要反过来做。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:24:12.300

我在[这里](http://www.epochconverter.com)找到了这个：

```
epoch = (DateTime.Now.ToUniversalTime().Ticks - 621355968000000000) / 10000000; 
```

而不是 DateTime.Now，您应该能够输入您想要的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:23:00.507

你没有说你的确切用例，但标准的.NET DateTime 有一个`Ticks`属性定义为：

> 此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。它不包括可归因于闰秒的滴答数。

如果它适合您的需要，这本质上是一个基于纪元的时间。否则，使用此值，您应该能够轻松计算到另一个纪元计时方法的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T01:28:27.967

您需要使用 TryParse：

```
string input = "2012-11-24 15:35:18";
DateTime dateTime;
if (DateTime.TryParse(input, out dateTime))
{
    ulong epoch = (dateTime.ToUniversalTime().Ticks - 621355968000000000) / 10000000;
} 
```

# xml - 在单独节点集的 for-each 循环中访问原始节点集

> ID：13547397
> 
> 赞同：0
> 
> 时间：2012-11-25T01:16:24.820
> 
> 标签：xml, xslt, foreach, node-set

我正在使用 XSLT 1.0。我基本上是在尝试根据属性的值创建输出。这是我正在转换的 XML 示例：

```
<object include="name number" id="5" /> 
```

这是“id”属性引用的数据示例：

```
<People>

  ...

  <row>
    <id>5</id>
    <number>1455210</number>
    <name>Mike</name>
    <age>38</age>
    <city>London</city>
  </row>

  ...

</People> 
```

以下是我的部分代码：

```
<xsl:template match="object">
  <param name="id" select="@id" />
  <param name="filename">
    ...
  </param>

  ...

  <xsl:apply-templates select="document($filename)//row[id=$id]">
    <xsl:with-param name="include" >
      <xsl:call-template name="tokenize">
        <xsl:with-param name="string" select="@include" />
      </xsl:call-template>
    </xsl:with-param>
  </xsl:apply-templates>
</xsl:template>

<xsl:template match="row">
  <xsl:param name="include" />

  <xsl:for-each select="exsl:node-set($include)/token">
    <span type="{.}">
      INSERT VALUE OF ORIGINAL NODE HERE (i.e. the value of the child of the "row" node with name current() or ".")
    </span>
  </xsl:for-each>
</xsl:template>

<xsl:template name="tokenize">
  <param name="string" />

  Turn a string with multiple values (i.e. "car dog hat") into an XML string
</xsl:template> 
```

除了使用 $id 而不是 @id 之外，我的问题是在我进入 for-each 循环后引用传递给“行”模板的节点。鉴于原始 XML，我希望得到以下输出：

```
<span type="name">Mike</span>
<span type="number">1455210</span> 
```

相反，我只能设法获得以下内容：

```
<span type="name">name</span>
<span type="number">number</span> 
```

我可以只使用一堆“if”语句而不标记任何东西，但是“include”属性中项目的顺序很重要，所以我觉得我需要一个节点集。

任何帮助或解决此问题的更好方法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:49:14.017

将外部上下文节点存储在变量中

```
<xsl:template match="row">
  <xsl:param name="include" />
  <xsl:variable name="curRow" select="."/> 
```

然后，您可以访问`$curRow`模板中的任何位置，包括内部 for-each。

# ios - 为什么我的 ViewController 被从 NavigationController.ViewControllers 集合中删除

> ID：13547403
> 
> 赞同：0
> 
> 时间：2012-11-25T01:18:59.910
> 
> 标签：ios, xamarin.ios

我在我的 iOS 应用程序的屏幕之间导航。

BaseView.NavigationController.ViewControllers

当我切换屏幕时，我会在静态变量中保留对前一个屏幕的引用。

在某些时候，我的一个项目会从 BaseView.NavigationController.ViewControllers 中删除，即使它仍然是一个有效的视图控制器并且 IsLoaded 仍然设置为 True/YES。

当我使用时（请原谅我的 C#/MonoTouch）

```
BaseView.NavigationController.PopToViewController(CurrentViewController,false); 
```

再次显示它，我得到 NSInternalInconsistencyException 原因：试图弹出到一个不存在的视图控制器。这是可以理解的，因为它不再在 ViewController 集合中。

我切换屏幕的方式是保持对各种屏幕的引用并调用通用方法来显示屏幕。在那个方法中，我使用这个逻辑来确定我应该推送还是弹出。

```
 if (CurrentViewController.IsViewLoaded)
        {

            BaseView.NavigationController.PopToViewController(CurrentViewController,false);
        }
        else
        {
            BaseView.NavigationController.PushViewController(CurrentViewController,true);
        } 
```

我的问题是它去哪儿了，为什么它会从 ViewControllers 集合中删除，什么时候是 StillLoaded=true/YES？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:55:28.137

如果我理解正确，您正在使用`NavigationController.PopToViewController(controller);`导航回某个视图控制器，但保留从导航堆栈中弹出的视图控制器的引用。

我认为正在发生的事情是因为您保留了对这些视图控制器的引用，它们仍在内存中，因此尽管视图控制器实际上并不存在于导航堆栈中，但该`IsViewLoaded`属性仍然存在。`true`

而不是使用该`IsViewLoaded`属性，您应该检查 View Controller 是否存在于`NavigationController.ViewControllers`数组中，如果存在则 Pop 到它，如果不存在则推送它。

例如

```
if (BaseView.NavigationController.ViewControllers.Contains(CurrentViewController))
{
    BaseView.NavigationController.PopToViewController(CurrentViewController,false);
}
else
{
    BaseView.NavigationController.PushViewController(CurrentViewController,true);
} 
```

**编辑**

因此，您提到您希望视图保留在导航堆栈上。那么，使用 PopToViewController 将删除TopViewController 和指定控制器之间的**所有**视图控制器。

为了实现您想要的，您可以直接操作`NavigationControllers.ViewControllers`数组。唯一的问题是您将失去 Push/Pop 方法提供的漂亮动画。

```
// Changes order of View Controllers currently in the stack. You can also add/remove 
// controllers using this method.
NavigationController.ViewControllers = new UIViewController[]{
          NavigationController.ViewControllers[1],
          NavigationController.ViewControllers[0],
          NavigationController.ViewControllers[3],
          NavigationController.ViewControllers[2]}; 
```

# java - 使用 String.split 的奇怪操作与用户输入不同

> ID：13547406
> 
> 赞同：2
> 
> 时间：2012-11-25T01:20:09.953
> 
> 标签：java, string, input, split

我无法理解这一点。

```
System.err.println(convertPdfToText(save).split("3\\.8").length); 
```

正如预期的那样打印出 3 的结果。

事实上，我希望用户能够获得相同的结果。因此，当我运行此代码时：

```
System.err.println(convertPdfToText(save).split(seperator).length); 
```

当用户在 JInputField 中输入“3\\.8”时，我得到的数组长度返回为 1。

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T01:21:39.633

`"\\"`在 Java 程序中表示包含一个`\`. 在您的情况下，用户必须输入`3\.8`才能获取由 Java 代码表示的字符串`"3\\.8"`。

也就是说，您似乎对 Java 的字符串字面量语法（处理`\`和`"`特殊处理）和从外部源输入的字符串（每个字符代表自己）之间的区别感到困惑。

# autocomplete - 如何在 zsh 中动态选择完成函数？

> ID：13547410
> 
> 赞同：2
> 
> 时间：2012-11-25T01:21:34.980
> 
> 标签：autocomplete, zsh, zsh-completion

假设我有一个脚本`foo`，可以称为：

```
foo git clone http://example.com 
```

或作为：

```
foo print 12 
```

等等

我怎样才能让一个`compdef`委托到`$argv[0]`这里来让它处理完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:44:35.877

您可以通过调用该函数重新调度到正常的完成系统`_normal`，但首先您需要修改一些状态，以便它会忽略您的程序名称和可能的参数。一个非常简单的版本可以通过以下方式完成：

```
#compdef foo
shift words
(( CURRENT-- ))
_normal 
```

如果您需要变得更复杂（这很可能），您可以查看其他调用 的命令的完成定义`_normal`，例如`env`、`sudo`或的完成`fakeroot`。

# parent-child - 带有父子文档的弹性搜索问题

> ID：13547413
> 
> 赞同：5
> 
> 时间：2012-11-25T01:21:50.843
> 
> 标签：parent-child, elasticsearch

我们在弹性搜索 (ES) 上使用两种类型的文档：项目和插槽，其中项目是插槽文档的父级。我们使用以下命令定义索引：

```
curl -XPOST 'localhost:9200/items' -d @itemsdef.json 
```

其中`itemsdef.json`有以下定义

```
{
"mappings" : {
    "item" : {
        "properties" : {
            "id" : {"type" : "long" },
            "name" : {
                "type" : "string",
                "_analyzer" : "textIndexAnalyzer"   
            },
            "location" : {"type" : "geo_point" },
        }
    }
},
"settings" : {
    "analysis" : {
        "analyzer" : {

                "activityIndexAnalyzer" : {
                    "alias" : ["activityQueryAnalyzer"],
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["trim", "lowercase", "asciifolding", "spanish_stop", "spanish_synonym"]
                },
                "textIndexAnalyzer" : {
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["word_delimiter_impl", "trim", "lowercase", "asciifolding", "spanish_stop", "spanish_synonym"]
                },
                "textQueryAnalyzer" : {
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["trim", "lowercase", "asciifolding", "spanish_stop"]
                }       
        },
        "filter" : {        
                "spanish_stop" : {
                    "type" : "stop",
                    "ignore_case" : true,
                    "enable_position_increments" : true,
                    "stopwords_path" : "analysis/spanish-stopwords.txt"
                },
                "spanish_synonym" : {
                    "type" : "synonym",
                    "synonyms_path" : "analysis/spanish-synonyms.txt"
                },
                "word_delimiter_impl" : {
                    "type" : "word_delimiter",
                    "generate_word_parts" : true,
                    "generate_number_parts" : true,
                    "catenate_words" : true,
                    "catenate_numbers" : true,
                    "split_on_case_change" : false                  
                }               
        }
    }
}
} 
```

然后我们使用以下命令添加子文档定义：

```
curl -XPOST 'localhost:9200/items/slot/_mapping' -d @slotsdef.json 
```

其中`slotsdef.json`有以下定义：

```
{
"slot" : {
    "_parent" : {"type" : "item"},
    "_routing" : {
        "required" : true,
        "path" : "parent_id"
    },
    "properties": {
        "id" : { "type" : "long" },
        "parent_id" : { "type" : "long" },
        "activity" : {
            "type" : "string",
            "_analyzer" : "activityIndexAnalyzer"
        },
        "day" : { "type" : "integer" },
        "start" : { "type" : "integer" },
        "end" :  { "type" : "integer" }
    }
}   
} 
```

最后，我们使用以下命令执行批量索引：

```
curl -XPOST 'localhost:9200/items/_bulk' --data-binary @testbulk.json 
```

其中 testbulk.json 包含以下数据：

```
{"index":{"_type": "item", "_id":35}}
{"location":[40.4,-3.6],"id":35,"name":"A Name"}
{"index":{"_type":"slot","_id":126,"_parent":35}}
{"id":126,"start":1330,"day":1,"end":1730,"activity":"An Activity","parent_id":35} 
```

我们通过 ES Head 插件看到定义似乎没问题。我们测试分析器以检查它们是否已加载并且它们是否工作。两个文档都出现在 ES Head 浏览器视图中。但是如果我们尝试使用 API 检索子项，ES 会响应它不存在：

```
$ curl -XGET 'localhost:9200/items/slot/126'
{"_index":"items","_type":"slot","_id":"126","exists":false} 
```

当我们导入 50 个文档时，可以通过 API 检索所有父文档，但只有部分对子元素的请求得到成功响应。

我的猜测是，它可能与如何跨分片和路由存储文档有关......这对我来说当然不清楚它是如何工作的。

关于如何能够检索单个子文档的任何线索？ES Head 显示它们已被存储，但对 localhost:9200/items/slot/XXX 的 HTTP GET 随机响应“exists”:false。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T01:25:40.103

子文档使用父 ID 进行路由。因此，为了检索子文档，您需要在查询的路由参数中指定父 ID：

```
curl "localhost:9200/items/slot/126?routing=35" 
```

如果父 ID 不可用，则必须搜索子文档：

```
curl "localhost:9200/items/slot/_search?q=id:126" 
```

或切换到具有单个分片的索引。

# matlab - 获取矩阵的两个特定元素

> ID：13547415
> 
> 赞同：0
> 
> 时间：2012-11-25T01:22:16.117
> 
> 标签：matlab, octave

是否有从矩阵中获取特定元素的简写？说，我有一个矩阵`m`，我想得到元素`(a, b)`和`(c, d)`。我可以在一个表达式中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:37:08.250

另一种选择（在我看来是一个更简单的选择）只是：

```
 val=[m(a,b) m(c,d)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:53:26.237

是的。您可以使用`sub2ind`将下标列表转换为索引。这适用于任意数量的维度。从您的示例中，如果您想获取`matrix(a, b)`and `matrix(c, d)`，则可以这样做：

```
values = matrix(sub2ind (size (matrix), [a c], [b d])) 
```

# php - 如何使用foreach从数据库mysql中选择行？

> ID：13547416
> 
> 赞同：0
> 
> 时间：2012-11-25T01:22:55.357
> 
> 标签：php, mysql

例如。地址页 test.php?prid=4477535

**代码页 test.php**

```
function query($query) {
    $database = 'test';
    $host = 'test';
    $username = 'test';
    $password = 'test';
    $link = mysql_connect($host,$username,$password);
    if (!$link) {
    die(mysql_error());
    }
    $db_selected = mysql_select_db($database);
    if (!$db_selected) {
    die(mysql_error());
    }
    $result = mysql_query($query);
    mysql_close($link);
    return $result;
    }

        $product_idn=$_GET['prid'];

        $select_image = query("SELECT * FROM products_images WHERE `product_idn`='$product_idn'") or die(mysql_error());
        foreach ($select_image as $row)
        {
        $select_image_array[]=$row->image;
        }

print_r ($select_image_array); 
```

**收到请求**

```
SELECT * 
FROM products_images
WHERE  `product_idn` =  '4477535' 
```

如果从 phpmyadmin 中选择，我有 10 行。

但是如果我使用**test.php?prid=4477535**我会看到空白页面。

**print_r ($select_image_array) 不显示数组。**

请告诉我为什么我看到带有 phpmyadmin 的行而看不到带有脚本的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:32:53.733

就像另一个说的那样，您很容易受到 SQL 注入，因为您不序列化您的输入，但是要修复您的代码，请使用以下命令：

```
$select_image = query("SELECT * FROM products_images WHERE `product_idn`='$product_idn'") or die(mysql_error());

while($data = mysql_fetch_assoc($select_image))
{
    echo $data['image'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:27:27.173

你这样做是不对的。您必须将资源（mysql_query 返回资源）获取到数组中，并且数组的键将是查询返回的行的名称。

```
$product_idn=$_GET['prid'];

$select_image = query("SELECT * FROM products_images WHERE `product_idn`='$product_idn'") or die(mysql_error());

    while($fetch=mysql_fetch_assoc($select_image))
    {
         echo $fetch['image'];
    }

    print_r ($select_image_array); 
```

顺便说一句，你这里有一个安全漏洞——SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T01:28:55.237

测试以下

```
$result = query("SELECT * FROM products_images WHERE `product_idn`='$product_idn'")
$select_image = mysql_fetch_assoc($result);
var_dump($select_image); 
```

有关更多信息，请查看[http://se2.php.net/mysql_query](http://se2.php.net/mysql_query)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T01:31:12.313

你只是 echo $row->image; 从不初始化 $select_image_array

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T01:34:07.277

`print_r ($select_image_array);`不会显示任何内容，因为没有`$select_image_array`定义。你的意思是`print_r ($select_image);`？

query() 是您定义的函数吗？如果没有，并且您没有错误，您可能什么也看不到。

您还需要清理您的 SQL。现在最简单的方法，因为它是一个整数：

```
$product_idn=(int)$_GET['prid']; 
```

# python - Python 2d 插值问题

> ID：13547423
> 
> 赞同：2
> 
> 时间：2012-11-25T01:24:14.170
> 
> 标签：python, numpy, scipy, interpolation

我目前有三个 1D numpy 数组，如下所示：

```
#X     Y     Z
 0     1     2.9
 0     3     2.1
 0     5     1.753
 .     .     .
 .     .     .
 0     99    3.82
 0.1   1     4.1
 0.1   3     5.3
 0.1   5     2.65
 .     .     .
 .     .     .
 0.1   99    5.21 
```

每个 z 对应于同一索引处的 (x,y) 对。我正在尝试在我的网格上执行线性插值，以便我能够看到 Z 的值是多少（57.3、33.1）。

我的问题是我的 X 值以 0.1 的增量一直上升到几乎 100，而我的 Y 值以 2 递增。当我尝试使用 interp2d 或 bisplrep 进行插值时，我总是遇到分段错误。（我假设是因为数据点的数量？）。

感谢您提供的任何帮助。我的 X 坐标增加了一个足够小的量，以至于我永远不会尝试检查 Z 值（50.53，y）。不过，我确实需要能够检查那个增量的 Y 值。例如 (50.1, 33.6)。

如果有用的话，我建立了一个 (x,y) 坐标及其对应的 z 值的字典。

编辑：

由于我已经为每个 (x,y) 对设置了 Z 值，所以我不明白为什么下面的代码不起作用（大约 20 秒后它会出现故障）。

```
f = interpolate.interp2d(X, Y, Z, kind='linear') 
```

由于我已经有这样的 X 和 Y 结构，我不需要使用 np.meshgrid 来构建网格。那是对的吗？

# android - 将 android Sqlite DB 导出为 CSV 所需的注释

> ID：13547425
> 
> 赞同：0
> 
> 时间：2012-11-25T01:24:29.937
> 
> 标签：android, sqlite, csv, export

我正在尝试将应用程序的 SQLite db 导出到 CSV 文件并存储在 SD 卡中。导出方法在 DBAdapter 类中定义为 ExportToCSV。我已检查该应用程序是否成功创建了 SQLite 数据库。但是，当我尝试在 MainActivity 中使用 onPause 方法调用 ExportToCSV 时，应用程序无法响应导出数据库。您能否就如何更正此代码给我任何意见？我会感谢你的帮助！

我的代码如下：

```
public void ExportToCSV(Cursor c, String fileName) {       
       int rowCount = 0;  
       int colCount = 0;  
       FileWriter fw;  
       BufferedWriter bfw;  
       File sdCardDir = Environment.getExternalStorageDirectory();  
       File saveFile = new File(sdCardDir, fileName);  
       try {  
            rowCount = c.getCount();  
           colCount = c.getColumnCount();  
           fw = new FileWriter(saveFile);  
           bfw = new BufferedWriter(fw);  
           if (rowCount > 0) {  
               c.moveToFirst();  
               // write the colume title  
               for (int i = 0; i < colCount; i++) {  
                   if (i != colCount - 1)  
                      bfw.write(c.getColumnName(i) + ',');  
                   else  
                      bfw.write(c.getColumnName(i));  
               }  
               // change the line
               bfw.newLine();  
               // write data
               for (int i = 0; i < rowCount; i++) {  
                   c.moveToPosition(i);  
                   Log.v("exporting data", "exportting" + (i + 1) + "line");  
                   for (int j = 0; j < colCount; j++) {  
                       if (j != colCount - 1)  
                           bfw.write(c.getString(j) + ',');  
                       else  
                          bfw.write(c.getString(j));  
                   }  
                   // change line
                   bfw.newLine();  
               }  
           } 
```

我在 MainActivity.java 中使用 onPause 来调用 ExportToCSV：

```
@Override
 protected void onPause() {
    super.onPause();
    DBAdapter myDatabase=new DBAdapter(this);
    myDatabase.open();
    Cursor c=myDatabase.getAllgpspoint();
 // this method was defined in DBAdapter.java and returned a Cursor
    myDatabase.ExportToCSV(c, "IRI.csv");
    myDatabase.close();
        mSensorManager.unregisterListener(this);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:31:59.570

您必须在最后关闭文件。

```
bfw.close(); 
```

# internet-explorer - 传单 js 弹出 IE 看 起来不正常

> ID：13547426
> 
> 赞同：0
> 
> 时间：2012-11-25T01:24:36.887
> 
> 标签：internet-explorer, maps, leaflet

我将传单 js 用于地图及其默认弹出窗口。我为 IE () 添加了正确的 css 规则，但弹出窗口在地图上看起来不正确（见下面的屏幕截图）。

我目前正在使用 IE9 进行测试，因此 IE<9 的 css 规则无论如何都不适用。

当我去leaflet js官方网站示例时，弹出窗口看起来不错。

我错过了什么？

谢谢

![截图](../Images/cad4bf9db143cb7b174641e4597f7c36.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:03:41.023

我在这个项目中使用 twitter bootstrap，这就是 IE 上弹出的原因

编辑：我的坏坏坏，我包括了所有东西的特殊css，不是有条件的......去死我！

# css - 直接的 CSS 布局

> ID：13547429
> 
> 赞同：1
> 
> 时间：2012-11-25T01:25:41.100
> 
> 标签：css

我确定以前有人问过这个问题，但我真的很想知道为什么它正在做它正在做的事情，而不仅仅是答案（如果有的话）。

目前我得到的是一个非常简单的布局，它由一个主包装 div、一个标题 div、一个内容 div 和一个页脚 div 组成。我遇到的问题是当我在内容 div 中放置一些正方形并将它们的定位设置为绝对位置时 - 以便将它们布置在网格中，以便它们跨越内容 div 的整个宽度。当我将这些 div 设置为绝对时，页脚 div 会跳起来，并且不会出现在位于其父内容 div 中的 div 网格下方。如果我将内容 div 的高度设置为页脚 div 应位于的值，但如果我不设置或将其设置为自动（如我所愿），则页脚 div 有效地位于内容 div 下方。

我已经读过将任何内容设置为绝对会使其脱离文档的正常流程，但是无论如何我可以设置内容 div 以便内容 div 的高度由内容设置（即 div 的网格）和还让页脚 div 始终位于内容 div 下方？

这是一个模拟[http://jsfiddle.net/M4jyH/3/](http://jsfiddle.net/M4jyH/3/)

这是我的代码

```
#wrapper {
width: 400px;
height: auto;
border: 1px solid #000; 
margin: 10px auto;   
padding: 10px;    
}

#header {
width: 100%;
height: 50px;
border: 1px solid #000;
}

#content {
position: relative;
width: 100%;
/*height:92px;*/

border: 1px solid #000; 
margin: 10px 0px 0px 0px;        
}

.box {
position: absolute;
width: 92px;
height: 92px; 
background-color: #999;    
}

#footer {
position: relative;
width: 100%;
height:92px;
border: 1px solid #000; 
margin: 10px 0px 0px 0px; 
}

<div id="wrapper">

<div id="header">header</div>

<div id="content">

    <div class="box" style="top:0px; left:0px;"></div>
    <div class="box" style="top:0px; left:102px;"></div>
    <div class="box" style="top:0px; left:205px;"></div>
    <div class="box" style="top:0px; left:308px;"></div>

</div>

<div id="footer">footer</div>

</div>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:24:53.123

您不需要使用`position: absolute`内部元素，将它们水平放置只需使用`float: left`边距作为间距。对于内容区域，您仍然会得到类似的折叠高度 - 因为浮动再次部分地从内容流中取出。但是，这很容易通过应用于`overflow: hidden`内容区域来解决。

我为您的`box`元素添加了 first 和 last 类，只是为了使处理边距更容易：

```
<div id="content">
  <div class="box first"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box last"></div>
</div> 
```

我还更改了您的 CSS 项目，如下所示：

```
#content {
  overflow: hidden; /* <-- added overflow hidden */
  position: relative;
  width: 100%;
  outline: 1px solid #000;
  margin: 10px 0px 0px 0px;        
}

.box {
  float: left; /* <-- replaced pos abs with float left */
  margin-right: 10.5px; /* <-- added a specific margin */
  width: 92px;
  height: 92px;
  background-color: #999;    
}

.box.last {
  margin-right: 0px;
} 
```

关于使用`10.5px`边距，最好重新评估使用的尺寸，这样就没有必要了。然而，大多数现代浏览器都会正确处理这个问题。

[http://jsfiddle.net/M4jyH/5/](http://jsfiddle.net/M4jyH/5/)

`position: absolute`实际上应该只用于您特别希望从文档流中取出的项目并且不干扰其他任何事情。

# matlab - 形状上下文 - 旋转不变性

> ID：13547430
> 
> 赞同：1
> 
> 时间：2012-11-25T01:25:42.333
> 
> 标签：matlab, descriptor

我试图实现形状上下文（在 MatLab 中）。我试图实现旋转不变性。

形状上下文的一般方法是计算给定图像中每组兴趣点之间的距离和角度。然后，您根据这些计算值是否落入特定范围，将其分类为直方图。您对标准图像和测试图像都执行此操作。为了匹配两个不同的图像，您可以使用卡方函数来估计两个不同直方图中每个可能的点对之间的“成本”。最后，您使用匈牙利算法之类的优化技术来找到最佳的点分配，然后总结总成本，这对于良好的匹配会更低。

我检查了几个网站和论文，他们说要使上述方法旋转不变，您需要使用切向量作为 x 轴来计算每对点之间的每个角度。（即[http://www.cs.berkeley.edu/~malik/papers/BMP-shape.pdf](http://www.cs.berkeley.edu/~malik/papers/BMP-shape.pdf)第 513 页）

这到底是什么意思？似乎没有人解释清楚。此外，您将从每对点中的哪一个获得切向量 - 您会平均这两个点吗？

其他几个人建议我可以使用渐变（在 Matlab 中很容易找到）并将其用作切点的替代品，尽管它似乎无法用它计算合理的成本分数。用渐变来做到这一点是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:21:11.460

梯度应该适用于这个主导方向吗？

相对于该方向订购垃圾箱是什么意思？我最初打算有一个箱的方阵 - 两个给定点之间的半径确定矩阵中的列，两个给定点之间的计算角度确定行。

感谢您的见解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:00:46.327

实现（某种程度上）旋转不变性的一种方法是确保无论您在哪里计算图像描述符，它们的方向（即 bin 的排序）都将（大致）相同。为了实现这一点，您在提取每个描述符的位置选择主要方向，并根据该方向对 bin 进行排序。通过这种方式，您可以比较不同描述符的 bin-to-bin，知道它们的顺序是相同的：关于它们的局部主导方向。
根据我的个人经验（不是太多），这些方法在纸上看起来比在实践中更好。

# r - 导入其中某些列包含包含空格的字符串的数据集

> ID：13547434
> 
> 赞同：0
> 
> 时间：2012-11-25T01:26:11.480
> 
> 标签：r, dataframe, read.table

我有一个如下所示的数据集：

```
 ID          Message     
  1                .
  2                .
  3     Click_screen
  4     Blank screen
  5                .
  6                .
  7                . 
```

实际数据集有 48 列和 50,000 行。

**使用read.table()**导入此数据集是有问题的，因为字符串“Blank screen”在两个子字符串之间有一个空格。例如，我收到如下错误消息：

```
 Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
     line 4 did not have 48 elements 
```

我想知道是否有任何方法可以规避 R 中的这个问题，而不是更改 Excel 中的原始数据集。

编辑：只是补充一下，我尝试将填充设置为 TRUE，并在下面收到一条错误消息：

```
 Error in read.table(file.choose(), header = T, fill = T) : 
   duplicate 'row.names' are not allowed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:42:34.367

这取决于您当地的分隔符，但试试这个

```
read.table(fileName,fill=TRUE,header=FALSE,sep =';') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T01:47:11.940

如果文件是空格分隔的（而不是制表符分隔的），您可能需要 read.fwf 以及字段宽度向量。如果文件是制表符分隔的，您可能需要 read.table(sep='\t',...)。

# php - 申请Datetime时MAX()有什么问题？

> ID：13547435
> 
> 赞同：1
> 
> 时间：2012-11-25T01:26:21.803
> 
> 标签：php, mysql

我不理想这会发生什么。

这工作正常

```
SELECT 
SUM(LAMT)AS SUMAMT, 
COUNT(LAMT)AS CNT, 
IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY))AS MXDT 
FROM product1 
WHERE LSUBBY IN (12,15,17,13,14,16) AND RECST=1 ORDER BY LSUBDT 
```

它返回给我（很好）
SUMAMT > 645746.00
CNT > 4
MXDT > 2012-11-14 15:56:56

**但是** 当我使用**MAX(IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY)))AS MXDT** 时，它返回给我
MXDT > 323031322d31312d32332030353a30323a3037

为什么？使用 strtotime 时，我不能用它在 php 中进行比较

1）。sql MAX() 有什么问题？
2）。除了 MAX() 之外还有什么选择吗？我想获得最新的 DATETIME。
3）。可以在哪里一些如何 php 将它转换回 2012-11-14 15:56:56 格式然后我继续在 php 中比较

**顺便说一句**
4）。MXDT > 2012-11-14 15:56:56 的返回结果也不正确，因为数据库中的最新日期时间是 2012-11-24 5:36:25，如果我删除总和和计数，则返回我正确。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:48:59.740

试试这个：

```
SELECT SUM(SUMAMT)AS SUMAMT, SUM(CNT)AS CNT, MAX(MXDT) AS MXDT 
from (SELECT SUM(LAMT)AS SUMAMT, COUNT(LAMT)AS CNT, 
             IFNULL(LSUBDT,(CURDATE()-INTERVAL 9999 DAY)) AS MXDT 
      FROM (SELECT LAMT, LSUBDT FROM product1 
            WHERE LSUBBY IN (12,15,17,13,14,16) AND RECST=1 ORDER BY LSUBDT DESC 
     ) AS A GROUP BY LSUBDT
) AS B 
```

# mysql - MySQL：如何进行涉及连接和左连接的查询

> ID：13547436
> 
> 赞同：2
> 
> 时间：2012-11-25T01:26:26.253
> 
> 标签：mysql, join, left-join, outer-join

这只是一个大学练习，所以我并不着急。但我想已经知道答案了。考虑这些表和行：

```
create table course (
    numco   integer,
    nameco  varchar(20) not null,
    primary key (numco)
);
create table prereq (
    numco integer,
    numcoprereq integer,
    primary key (numco, numcoprereq),
    foreign key (numco) references course (numco),
    foreign key (numcoprereq) references course (numco)
);
insert into course values (1, 'course 1');
insert into course values (2, 'course 2');
insert into course values (3, 'course 3');
insert into course values (4, 'course 4');
insert into course values (1, 'course 5');
insert into course values (2, 'course 6');
insert into prereq values (4, 2);
insert into prereq values (2, 1); 
```

我没有做这个。我只是翻译了它并删除了一些不相关的部分。我知道有两`course`排PK相同，但这一排我得问我的老师。

他让我们写一个查询来获取课程名称和课程先决条件的名称。如果它只是课程的编号，左连接就可以了。但我不能让它与名字一起工作。它应该输出：

```
course 1    (null)
course 2    course 1
course 3    (null)
course 4    course 2
course 5    (null)
course 6    course 1 
```

我搜索了很多并写了两次尝试：

```
select C1.nameco, C2.nameco as namecoprereq
    from course C2 left join
    (course C1 join prereq P on C1.numco = P.numco)
    on C2.numco = P.numcoprereq;

select C1.nameco, C2.nameco as namecoprereq
    from (course C1 join prereq P on C1.numco = P.numco)
    left join course C2 on C2.numco = P.numcoprereq; 
```

它们分别输出：

```
course 2    course 1
course 6    course 1
course 4    course 2
(null)      course 3
(null)      course 4
course 2    course 5
course 6    course 5
course 4    course 6 
```

和

```
course 2    course 1
course 2    course 5
course 4    course 2
course 4    course 6
course 6    course 1
course 6    course 5 
```

我知道（我想，我没有尝试过）我可以用联合和减号来做到这一点，但我想知道是否可以在一次选择中做到这一点。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:37:02.977

您的查询几乎有正确的答案，但我认为您的搜索有点过远。只需用“英语”来想它：

1.  我有课程 ( `FROM course`)
2.  其中一些具有先决条件（`LEFT JOIN prereq`）
3.  我需要先决条件的名称 ( `LEFT JOIN course`)

这应该工作：

```
SELECT
    c1.nameco,
    c2.nameco AS nameprereq
FROM course AS c1
LEFT JOIN prereq AS p ON p.numcoprereq = c1.numco
LEFT JOIN course AS c2 ON c2.numco = p.numco 
```

# java - 为什么嵌套类的子类在这里不能访问嵌套类的私有字段？

> ID：13547437
> 
> 赞同：0
> 
> 时间：2012-11-25T01:26:33.070
> 
> 标签：java, nested-class, private-members

像这样的Java代码：

```
public class A {
        private static int a;

        public static class B {
                static void funcc() {
                        a = 3;
                }
        }
}

public class C extends A.B {
        public void func() {
                a = 1;
        }
} 
```

当我尝试编译它时，会发生错误：

```
C.java:3: error: cannot find symbol
                a = 1;
                ^
  symbol:   variable a
  location: class C
1 error 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:30:37.323

`B`是`static`。这使得它等同于在顶层声明它。它不是一个嵌套类，并且无法访问其词法包含类中的任何私有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:37:30.990

嵌套类`B`可以访问它所包含的所有字段和方法，因为它是`A`. 的子类`B`（不是 的成员`A`）没有该访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T01:28:54.280

内部类不扩展它们的包含类；他们本身就是一个阶级。

在您的示例中，`B`是一个没有方法和字段的类。它没有变量`a`。

但是，您可以访问类`a`内部的变量`B`，但这仅仅是因为`a`is 在它的闭包中；它可以在 的变量处达到峰值`A`，这是内部类的力量。

# javascript - 检测窗口上的拖动事件

> ID：13547440
> 
> 赞同：0
> 
> 时间：2012-11-25T01:26:55.547
> 
> 标签：javascript, jquery, html, drag-and-drop

我试图像绝望一样解决这个问题，但我想不出正确的方法。

我试图让用户能够通过将图片拖放到浏览器中来更改背景图片。但是，我无法正确检测到拖动事件。使用时

```
$(window).on 'dragenter', (e) =>
  console.log e.target
$(window).on 'dragleave', (e) =>
  console.log e.target 
```

我总是在单个 DOM 元素上触发事件，但从来没有在窗口/主体本身上触发事件，这意味着如果我的 DOM 元素/容器/包装器没有覆盖整个窗口，它就无法正常工作。我知道这是可能的，因为 GMail 可以让它以某种方式工作，但我真的不知道我在这里做错了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:54:12.403

如果我正确解释了您的问题，您需要将事件绑定到 $(document)。由于事件传播，一切最终都会冒泡到文档中。如果您只想拖动页面的特定部分，请尝试使用类/类选择器。

# android - 在 Android 主屏幕上创建一个类（不是 MainActivity）的快捷方式

> ID：13547442
> 
> 赞同：2
> 
> 时间：2012-11-25T01:27:07.650
> 
> 标签：android, android-intent, shortcut

我一直在寻找一整天都无济于事..我知道对此有几个问题，但我无法找到一个适合我的问题。

基本上，我有一个活动（MainActivity），具有向主屏幕添加快捷方式的功能。当我单击快捷方式时，我希望它打开一个不同的活动（NewActivity）。这里的问题似乎是，当我尝试启动与创建快捷方式的活动不同的活动时，它无法正常工作。

快捷方式已成功创建，但当我单击它时，我会从 Android 系统收到一条“未安装应用程序”的 toast 消息。

这是添加快捷方式的代码：

```
 Intent shortcutIntent = new Intent();
                shortcutIntent.setClassName("com.enceladus.myApp", "com.enceladus.myApp.NewActivity");
                shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                shortcutIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                Intent addIntent = new Intent();
                addIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, shortcutIntent);
                addIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, "Calculator");
                addIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, Intent.ShortcutIconResource.fromContext(MainActivity.this, R.drawable.calc));
                addIntent.setAction("com.android.launcher.action.INSTALL_SHORTCUT");
                MainActivity.this.sendBroadcast(addIntent); 
```

编辑：这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.enceladus.myApp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.enceladus.myApp.NewActivity"
        android:label=""
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"
        android:launchMode="singleInstance"
        />
</application> 
```

NewActivity.class 功能完美（我知道是因为我已经调试了很多），所以这不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T01:39:24.293

尝试为 NewActivity 条目制作清单，如下所示：

```
 <activity android:name="com.enceladus.myApp.NewActivity"
    android:label=""
    android:screenOrientation="portrait"
    android:theme="@android:style/Theme.Translucent.NoTitleBar"
    android:launchMode="singleInstance"
    > 
       <intent-filter>
            <action android:name="android.intent.action.MAIN"/>

        </intent-filter>

    </activity> 
```

也可以尝试制作这样的快捷方式意图：

```
Intent shortcutIntent = new Intent(MainActivity.this, NewActivity.class);
shortcutIntent.setAction(Intent.ACTION_MAIN); //Not sure if you'll need this or not.
//remove the next line.
//shortcutIntent.setClassName("com.enceladus.myApp", "com.enceladus.myApp.NewActivity"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-04T22:32:42.647

您可以执行此操作的另一种方法是将**android:exported**标志设置为 true。

# ms-access - 在 MS Access 中总计行中的总和

> ID：13547446
> 
> 赞同：0
> 
> 时间：2012-11-25T01:28:14.187
> 
> 标签：ms-access

任何人都知道如何合计 MS Access Table in Row 中的总和。假设我有一个表 TblAccount，其字段名称为 Total。我需要对 Total 字段名称中的所有行求和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:05:42.910

您应该创建一个“总计”查询：

```
SELECT sum(TblAccount.Total) as sumOfTotal 
FROM TblAccount; 
```

这将汇总表中所有行中的总计字段。

# c# - 尝试使用 Windows Phone ShellTile API 创建多个动态磁贴时如何避免错误？

> ID：13547447
> 
> 赞同：2
> 
> 时间：2012-11-25T01:28:27.060
> 
> 标签：c#, windows-phone-7, code-behind, live-tile

从[这里](http://code.msdn.microsoft.com/wpapps/Building-Dynamic-Live-52bdc195)的示例开始，我创建了一个应用程序来将多个磁贴固定到“开始”屏幕。当我固定第一块瓷砖时，我没有任何问题。但是，当我返回应用程序（通过应用程序列表或返回键）并单击第二个图像以固定第二个磁贴时，我得到一个 InvalidOperationException。

这是我的简单代码：

```
 private void Pin_Tile1(object sender, RoutedEventArgs e)
    {
        StandardTileData data1 = new StandardTileData
        {
            BackgroundImage = new Uri("Assets/tile1.png", UriKind.Relative),
            Title = "Tile 1",
            BackContent = "asdf"
        };

        ShellTile.Create(new Uri("/MainPage.xaml", UriKind.Relative), data1);
    }

    private void Pin_Tile2(object sender, RoutedEventArgs e)
    {
        StandardTileData data20 = new StandardTileData
        {
            BackgroundImage = new Uri("Assets/tile2.png", UriKind.Relative),
            Title = "Tile 2",
            BackContent = "fdsa"
        };
        ShellTile.Create(new Uri("/MainPage.xaml", UriKind.Relative), data2); 

    } 
```

谁能告诉我发生了什么？感谢您的关注

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:43:21.700

从[这里开始](http://www.jeffblankenburg.com/2011/11/11/31-days-of-mango-day-11-live-tiles/)，每个活动图块都必须指向一个唯一的 Uri，这就是我搞砸的地方。

要求的完整列表是：

*   每个动态磁贴必须指向一个唯一的 URI 位置。
*   Each time that you create a secondary tile, the user will be taken to their home screen to view it. You can’t create more than one secondary tile at a time.
*   Limit the number of secondary live tiles allowed.

# javascript - JavaScript onload 或 init 还是...？

> ID：13547457
> 
> 赞同：-2
> 
> 时间：2012-11-25T01:29:49.017
> 
> 标签：javascript

将外部 .js 文件加载到 .html 文件中的最佳做法是什么？（没有内联调用，例如，`<body onload="...`）

我有一个基本的 HTML 页面，我想在其中加载一个外部 .js 文件。当我在 HTML 页面底部的脚本标记中有代码时，一切正常。

但是，如果我剪切 js 代码并将其粘贴到外部 .js 文件中并从`<head>`标记底部调用该文件，或者将调用放在结束标记上方的`</body>`脚本，则脚本不会运行。

不成功，但我也尝试将代码包装在外部 .js 文件中：

```
function init() {
    // Put your code here
}
window.onload = init; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:31:13.373

```
<script type="text/javascript" src="url.blah/folder/file.js"></script> 
```

这将使 Javascript 代码可以从其他外部 javascript 文件以及内联 Javascript 访问。

# c++ - 这是无限循环吗？程序提前结束

> ID：13547462
> 
> 赞同：-5
> 
> 时间：2012-11-25T01:31:15.457
> 
> 标签：c++, infinite-loop

我编写了一个随机写作程序。那使用马尔科夫算法。所以它会选择一个字母顺序，`[th]`然后使用一些随机性等去寻找最频繁出现的字母。但是如果程序选择了一个没有“兄弟姐妹”的字母。例如，在文件末尾说这个符号`[%]`，它不会出现在文件的其他任何地方。然后发生的事情是程序只是说它`"Finished running"`甚至不执行`cout`打印出字符串的命令`newText`。

为什么是这样？

其余代码基本上对数组进行了一些操作（添加等），以便在此处发布许多代码。

```
for (int i = 0; i < fullText.length(); i++)
{
    newText += getNext(currentWord, curWordPos, order);
}

cout << "Output: " << newText << endl; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T01:35:06.333

> 这是一个无限循环吗？

不，这不对。

# css - 为什么浮动下降？

> ID：13547464
> 
> 赞同：0
> 
> 时间：2012-11-25T01:31:26.790
> 
> 标签：css, css-float

我有一个简单的 CSS 布局

```
wrapper
header
left-sidebar / main-content / right-sidebar
footer 
```

但我的主要内容似乎下降（浮动下降），我不明白为什么。

我已经在小提琴中设置了它 -[小提琴](http://jsfiddle.net/krutski/rZpfj/)

`float:left`我可以通过从div中删除它来让它不下降，`main-content`但我不明白为什么会这样。容器（包装器）有一个浮动：左，我认为这是避免“浮动下降”的方法

我是左侧栏和包装器上的浮动：左侧，所以我认为如果我在主要内容 div 上设置浮动：左侧，主要内容只会与左侧栏对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:52:45.130

如果您从 div 中删除左右边距`main-content`，您将看到它在应用浮动时的正常行为（应该如此）。[演示](http://jsfiddle.net/rZpfj/12/)

它太宽了，无法放在父侧边栏旁边，所以它会掉下来。

但是，我认为问题在于您将宽度`main-content`设置为`500p`，将其更改为`500px.` [Demo](http://jsfiddle.net/rZpfj/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:57:59.887

`#main-content`div 需要一个合适的测量值。

```
#main-content
{
margin-left: 110px;
margin-right: 110px;
float:left;
padding-bottom:150px;
width:500px;
} 
```

# php - PHP Imagick - 将图像转换为灰度（非常糟糕的结果）

> ID：13547466
> 
> 赞同：4
> 
> 时间：2012-11-25T01:31:44.950
> 
> 标签：php, imagick, gd2, grayscale

我正在使用 PHP 进行一些图像编辑，因为 GD 提供的功能较少，所以我切换到了 Imagick。

其中一个过程是灰度图像。在我将脚本上传到我的网络托管服务器（Linux、Imagick 3.0.1、6.2.8、2010-10-20、问题 16）。

我试图改变质量，但它并没有改善任何东西。

```
$img->setImageCompression(imagick::COMPRESSION_JPEG);
$img->setImageCompressionQuality(100);
```

这是来自 GD、Imagick 和 Photoshop 的结果 ![在此处输入图像描述](../Images/b3e65168c8952b805c939fe67b3531ac.png)

我相信版本 3.0.1 有问题。有人可以确认吗？

Q1：有没有另一种方法可以将图像转换为灰度`Imagick`？

Q2：是否可以将 GD 资源转换为 Imagick？所以我可以`imagefilter($img, IMG_FILTER_GRAYSCALE);`用来得到正确的结果，然后用 Imagick 输出。

ps：对于Q2，你可能会建议我只使用GD来处理图像。但问题是`imagejpeg()`无法保存**保留分辨率的**图像。这实际上就是我切换到 Imagick 的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-03T17:19:37.383

这是我在 php/imagick 中制作黑白照片的首选方式：`$im = $im->fxImage('intensity');`

这将函数应用于图像，其中强度等于`0.299*red+0.587*green+0.114*blue`。

该公式基于我们的眼睛对不同颜色的敏感程度，因此它与“平面”灰度图像之间的区别实际上是白天和黑夜。

更多细节在这里：

*   [http://php.net/manual/en/imagick.fximage.php](http://php.net/manual/en/imagick.fximage.php)
*   [http://www.imagemagick.org/script/fx.php](http://www.imagemagick.org/script/fx.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:43:04.163

```
function ImagickToGD($imagick){
    $tmpfile = tmpfile();
    $imagick->writeImage($tmpfile);
    return imagecreatefromstring(file_get_contents($tmpfile));
} 
```

请注意，此函数不进行任何清理（临时文件除外，PHP 会自动清理该文件）。

因此，例如，您的代码应如下所示：

```
$img = new Imagick();
// ...
$gd = ImagickToGD($img);
unset($img); // destroy imagick
imagefilter($gd, IMG_FILTER_GRAYSCALE);
imagejpeg($gd, $target_name, 100);
imagedestroy($gd); 
```

另外，我不明白关于“保留分辨率”的部分。这些操作中没有任何与解析相关的内容。我猜你的意思是压缩？如果您想要完整的质量（即不压缩），只需使用 100 作为压缩值（就像我一样）。

这导致保持现有质量，因为打开 70% 质量的图像并以 70% 质量将其保存回来实际上会使最终质量降低 49%（70% 的 70%）。

* * *

```
function GDToImagickTo($gd){
    $tmpfile = tmpfile();
    imagepng($tmpfile); // Png is our best image deal:
                        // lossless compression, transparency etc..
    $imagick = new Imagick()
    $imagick->readImage($tmpfile);
    return $imagick;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T03:56:30.573

请参阅此网站并查看此处找到的图像 Magick 操作员[www.rubblewebs.co.uk/imagemagick/](http://www.fmwconcepts.com/imagemagick/)

也可以访问[www.fmwconcepts.com/imagemagick/](http://www.fmwconcepts.com/imagemagick/)你会在这里找到一些例子......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T12:32:14.963

您可以使用您喜欢的图像类，然后使用方法 readImageBlob 将其发送到 imagick [http://www.php.net/manual/en/imagick.readimageblob.php](http://www.php.net/manual/en/imagick.readimageblob.php)

# javascript - jquery ctrlkey 不工作

> ID：13547467
> 
> 赞同：0
> 
> 时间：2012-11-25T01:31:46.460
> 
> 标签：javascript, jquery, click, conditional-statements

我是 Javascript 的新手，我正在尝试制作一个函数，当您 shift+单击一系列图像 (.gif) 时执行一件事，而当您按住 ctrl+单击它们时执行另一件事。现在我将代码设置为在发生 ctrl+click 时发出警报，但是它不起作用。我的 chrome 控制台表明代码没有明显错误。

```
<script>
 $('.gif').click(function(e){

        if(e.ctrlkey) {

            alert('ctrl pressed');
        }

        if(e.shiftKey) {  

             $(this).css({
                border: 'dashed 3px black',        
             });    

            queue.push(this.id+'divless.html');

        }

        else {

            window.location.href = this.id + '.html';

        }             
    });
   </script> 
```

任何帮助表示赞赏！我浏览了 ws3schools 条件语句页面以及搜索了 stackoverflow 的相关问题，但无法弄清楚我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:40:06.110

区分大小写的问题：

```
 Change e.ctrlkey by  e.ctrlKey 
```

# android - 为什么 Maven Central 上的 Android 版本不包含 Google API（地图）？

> ID：13547469
> 
> 赞同：5
> 
> 时间：2012-11-25T01:31:54.370
> 
> 标签：android, google-maps, maven, sdk

[大多数 Android SDK 的 jars 现在都在 maven central 中](https://stackoverflow.com/q/5253029/693752)，但没有一个 Google Api 版本的 SDK。你知道为什么吗 ？添加它们有什么限制吗？

更新：我不是在寻找解决方法（[比如将它们本地添加到我的仓库中](https://stackoverflow.com/q/10385664/693752)）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T04:27:39.940

[Android SDK EULA](http://developer.android.com/sdk/terms.html)禁止：

> 1.1 Android 软件开发工具包**（在本许可协议中称为“SDK”，具体包括 Android 系统文件、打包的 API 和 Google API 插件）**根据本许可协议的条款向您授予许可。本许可协议构成您与 Google 之间关于您使用 SDK 的具有法律约束力的合同。
> 
> ……
> 
> 3.3 您不得将 SDK 用于本许可协议未明确允许的任何目的。除非适用的第三方许可要求，**否则您不得： (a) 复制（用于备份目的除外）、修改、改编、重新分发、反编译、反向工程、反汇编或创建 SDK 或其任何部分的衍生作品开发工具包；**(b) 将 SDK 的任何部分加载到手机或除个人计算机之外的任何其他硬件设备上，将 SDK 的任何部分与其他软件结合，或分发包含 SDK 的一部分的任何软件或设备。

[Android for Maven](http://android4maven.sourceforge.net/)使用的方法是从源代码编译 android.jar 并提取源文件和资源文件以在 SDK 中复制 android.jar。正如你所看到的，这对于一些接近源代码的谷歌 API 插件来说显然是不可能的，比如地图。

好消息是 Android 团队开始重新发明构建系统（更多细节在[这里](https://sites.google.com/a/android.com/tools/tech-docs/new-build-system)），希望 Android 团队在中央存储库中照顾和管理封闭源 jar，请参阅 Manfred[在此处](https://groups.google.com/forum/?fromgroups=#!topic/maven-android-developers/lQCMRKInuyk)的回复。

# c++ - cpp 将 int 分配给字符串恶作剧

> ID：13547470
> 
> 赞同：1
> 
> 时间：2012-11-25T01:32:02.957
> 
> 标签：c++, string, char

我知道错误在以下代码第 90 行中的位置，我只是无法弄清楚为什么它会以这种方式运行：

```
 83   string
 84   getStringId(TokenType toktype)
 85   {
 86     map<TokenType, string>::iterator pos;
 87     pos = TokenTypeMap.find(toktype);
 88     string str;
 89     if(pos != TokenTypeMap.end()) {
 90       str = pos->first;
 91     }
 92     if(str.empty()) {
 93       cerr << "Error: Invalid TokenType: " << toktype << endl;
 94       exit(EXIT_FAILURE);
 95     }
 96     /* The following if block is only here for debugging */
 97     if(str.length() == 1) {
 98       cerr << "Error: String length == 1 :>" << str << "<:"<< endl;
 99       exit(EXIT_FAILURE);
100     }
101     return str;
102   } 
```

在第 90 行，我将 TokenType 分配给一个字符串。由于 TokenType 是一个枚举，我期待由于严格的类型在这里会发生一些事情，但不幸的是，由于它确实是一个 int，所以根本没有任何警告。其原因在这里找到：

[为什么 C++ 允许将整数分配给字符串？](https://stackoverflow.com/questions/1177704/why-does-c-allow-an-integer-to-be-assigned-to-a-string)

这很好，但是，我注意到字符串不是空的，并且长度为 1，这与 char 预期的一样。但是，如果我尝试在线打印 98 我会得到

```
Error: String length < 2 :><: 
```

请注意，标记之间没有打印任何内容 >

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:36:59.097

您没有告诉我们实际值是什么，但它可能是 ASCII 中不可打印的字符。

这是字符串的一种相当奇怪的用法。

# c - c编程检查是否按下键而不停止程序

> ID：13547471
> 
> 赞同：8
> 
> 时间：2012-11-25T01:32:06.490
> 
> 标签：c, windows

如您所知，在 Windows 中使用 getch() 时，应用程序会等待您，直到您按下一个键，

如何在不冻结程序的情况下读取密钥，例如：

```
void main(){
  char   c;
  while(1){
  printf("hello\n");
  if (c=getch()) {
  .
  .
  .
  }  
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T01:47:04.383

您可以使用`kbhit()`来检查是否按下了某个键：

```
#include <stdio.h>
#include <conio.h> /* getch() and kbhit() */

int
main()
{
    char c;

    for(;;){
        printf("hello\n");
        if(kbhit()){
            c = getch();
            printf("%c\n", c);
        }
    }
    return 0;
} 
```

更多信息在这里： http: [//www.programmingsimplified.com/c/conio.h/kbhit](http://www.programmingsimplified.com/c/conio.h/kbhit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T18:21:48.143

我在 Linux 的控制台应用程序中需要类似的功能，但 Linux 不提供`kbhit`功能。在搜索谷歌时，我发现了一个实现 -

[http://www.flipcode.com/archives/_kbhit_for_Linux.shtml](http://www.flipcode.com/archives/_kbhit_for_Linux.shtml)

# java - 记忆/注意力游戏问题

> ID：13547473
> 
> 赞同：0
> 
> 时间：2012-11-25T01:32:17.050
> 
> 标签：java, swing, memory

所以，我一直在做 Java 记忆/注意力游戏作业。我还没有达到我想要的程度，它只完成了一半，但我确实让 GUI 大部分工作......直到我尝试将单选按钮添加到我的框架。我认为问题可能是因为我将 JFrame(CardButtonPanelFrame) 更改为 JPanel。我正在尝试将 3 个 JPanel 添加到我添加到 JFrame 的较大 JPanel 中。当我曾经弹出所有 52 张卡片时，我只是弹出一个小的空白窗口。

基本上，当我从事项目时，事情的复杂性可能会失控，所以我想我来这里是为了确保我朝着正确的方向前进。

这是我的主要内容：

```
import javax.swing.*;

public class Project3{
public static void main(String[] args){

    JFrame frame = new JFrame();

    Grid game = new Grid();

    frame.pack();
    frame.add(game);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

}
} 
```

然后这是最外面的 JPanel，我想将单选按钮放在顶部，卡片放在中间，最后将分数放在底部。

```
import java.awt.*;
import javax.swing.*;

public class Grid extends JPanel{

public Grid(){

    JPanel panel = new JPanel(); //construct a frame
    CardButtonPanelFrame buttons = new CardButtonPanelFrame();
    wtf choices = new wtf();

    panel.setLayout(new GridLayout(3,1)); //that panel uses GridLayout

    panel.add(choices);//add the panels to the Frame
    panel.add(buttons);
    //frame.add(scores);

    add(panel);
    setVisible(true);

}
} 
```

这是单选按钮面板...命名为 wtf 因为我遇到了一些编译问题并尝试更改名称。我什至还没有到弄清楚如何实现不同玩家数量的阶段。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class wtf extends JPanel implements ActionListener {
   static String zerostring = "Zero Player Game";
   static String onestring = "One Player Game";
   static String twostring = "Two Player Game";

   public wtf() {
     super(new BorderLayout());

     //Create the radio buttons.
     JRadioButton zeroButton = new JRadioButton(zerostring);
     zeroButton.setMnemonic(KeyEvent.VK_C);
     zeroButton.setActionCommand(zerostring);

     JRadioButton oneButton = new JRadioButton(onestring);
     oneButton.setMnemonic(KeyEvent.VK_B);
     oneButton.setActionCommand(onestring);
     oneButton.setSelected(true);

     JRadioButton twoButton = new JRadioButton(twostring);
     twoButton.setMnemonic(KeyEvent.VK_D);
     twoButton.setActionCommand(twostring);

     //Group the radio buttons.
     ButtonGroup group = new ButtonGroup();
     group.add(zeroButton);
     group.add(oneButton);
     group.add(twoButton);

     //Register a listener for the radio buttons.
     zeroButton.addActionListener(this);
     oneButton.addActionListener(this);
     twoButton.addActionListener(this);

     //Put the radio buttons in a column in a panel.
     JPanel radioPanel = new JPanel(new GridLayout(0, 1));
     radioPanel.add(zeroButton);
     radioPanel.add(oneButton);
     radioPanel.add(twoButton);

     add(radioPanel, BorderLayout.LINE_START);
     setBorder(BorderFactory.createEmptyBorder(20,20,20,20));
}

/** Listens to the radio buttons. */
public void actionPerformed(ActionEvent e) {
   //do something with e.getActionCommand()
}
} 
```

所以我还有两个课程，但我认为当前的问题就在这里，我害怕把它变成一堵巨大的代码墙。我还有更多问题，但我想我会一次解决一个问题，这样我就不会最终发布一页又一页没有人想阅读的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:53:42.523

您正在做的一个问题是在添加组件*之前*`pack()`调用您的 JFrame 。不要那样做，而是先添加所有可以添加的组件，*然后*调用，然后**`pack()``setVisible(true)`**

# android - 具有自动完成功能的不同步 ArrayAdapter

> ID：13547475
> 
> 赞同：1
> 
> 时间：2012-11-25T01:32:43.423
> 
> 标签：android, rest, autocompletetextview

我有 3 个课程，我希望使用自动完成文本框向用户显示来自 Web 服务（rest api）的某些数据（又名城市）。我已经在我自己的应用程序的各种功能上使用了这个实现，但由于某种原因，textchangedlistener 中存在同步问题......

CitiesArrayAdapter.java（显示不同的视图，在我的例子中是“城市，州”）：

```
package com.android.lzgo.adapters;

import java.util.ArrayList;
import java.util.List;

import com.android.lzgo.activities.LiftSearchActivity;
import com.android.lzgo.activities.R;
import com.android.lzgo.models.City;
import com.android.lzgo.models.Lift;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class CitiesArrayAdapter extends ArrayAdapter<City> {

    private static final String TAG = CitiesArrayAdapter.class.getName();

    private final ArrayList<City> cities;
    private int viewResourceId;

    public CitiesArrayAdapter(Context context, int textViewResourceId, ArrayList<City> results) {
        super(context, textViewResourceId, results);
        this.cities = results;
        this.viewResourceId = textViewResourceId;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // assign the view we are converting to a local variable
        View v = convertView;

        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(viewResourceId, null);
        }

        City i = cities.get(position);

        Log.d(TAG, "Here is my value: " + i);

        if (i != null) {

            TextView tt = (TextView) v.findViewById(android.R.id.text1);

            Log.d(TAG, "Name: " + i.getName() + ", " + i.getProvince_name());

            if (tt != null){
                tt.setText("Name: " + i.getName() + ", " + i.getProvince_name());
            }
        }

        // the view must be returned to our activity
        return v;

    } 
```

}

CitiesResponderFragment.java （这是我从我的 rest api 获取值的方式）：

```
package com.android.lzgo.fragment;

import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

import com.android.lzgo.activities.LiftSearchActivity;
import com.android.lzgo.definitions.Constants;
import com.android.lzgo.models.City;
import com.android.lzgo.service.LzgoService;
import com.google.gson.Gson;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.Toast;

public class CitiesResponderFragment extends LzgoResponderFragment {
    private static String TAG = CitiesResponderFragment.class.getName();

    private List<City> mCities;
    ArrayAdapter<City> adapter;
    private String enteredCharacters;
    LiftSearchActivity activity;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        activity = (LiftSearchActivity) getActivity();

        // This gets called each time our Activity has finished creating itself.
        getCities();

    }

    private void getCities() {

        if (mCities == null && activity != null) {
            Intent intent = new Intent(activity, LzgoService.class);
            intent.setData(Uri.parse(Constants.REST_CITIES_AUTOCOMPLETE));

            Bundle params = new Bundle();
            params.putString("search", getenteredCharacters());

            intent.putExtra(LzgoService.EXTRA_HTTP_VERB, LzgoService.GET);
            intent.putExtra(LzgoService.EXTRA_PARAMS, params);
            intent.putExtra(LzgoService.EXTRA_RESULT_RECEIVER, getResultReceiver());

            // Here we send our Intent to our RESTService.
            activity.startService(intent);
        }                
    }

    @Override
    public void onRESTResult(int code, String result) {
        Log.e(TAG, Integer.toString(code));
        Log.e(TAG, result);

        // Check to see if we got an HTTP 200 code and have some data.
        if (code == 200 && result != null) {
            mCities = getCitiessFromJson(result);

            adapter = activity.getArrayAdapter();

            adapter.clear();

            for( City city : mCities){
                //debugging
                Log.d(TAG, "City : " + city.getName());
                adapter.add(city);
                adapter.notifyDataSetChanged();
            }

            getCities();               

        }
        else {
            Activity activity = getActivity();
            if (activity != null && code == 400) {
                Toast.makeText(activity, result, Toast.LENGTH_SHORT).show();
            }
            else
                Toast.makeText(activity, "Failed to load lzgo data. Check your internet settings.", Toast.LENGTH_SHORT).show();
        }
    }

    private List<City> getCitiessFromJson(String json) {
        ArrayList<City> cityList = new ArrayList<City>();
        Gson gson = new Gson();

        try {
            JSONObject citiesWrapper = (JSONObject) new JSONTokener(json).nextValue();
            JSONArray  cities        = citiesWrapper.getJSONArray("cities");

            for (int i = 0; i < cities.length(); i++) {
                //JSONObject city = cities.getJSONObject(i);
                String jsonCity = cities.getString(i);
                City city = gson.fromJson( jsonCity, City.class );

                //Log.e(TAG, "Hurray! Parsed json:" + city.getString("name"));
                //cityList.add(city.getString("name"));
                cityList.add(city);
            }
        }
        catch (JSONException e) {
            Log.e(TAG, "Failed to parse JSON.", e);
        }

        return cityList;
    }

    public String getenteredCharacters() {
        return enteredCharacters;
    }

    public void setenteredCharacters(String characters) {
        this.enteredCharacters = characters;
    }

} 
```

LiftSearchActivity.java（我的 FragmentActivity）：

```
package com.android.lzgo.activities;

import java.util.ArrayList;

import com.android.lzgo.adapters.CitiesArrayAdapter;
import com.android.lzgo.fragment.CitiesResponderFragment;
import com.android.lzgo.models.City;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.AutoCompleteTextView;
import android.widget.DatePicker;

public class LiftSearchActivity extends FragmentActivity{

    private static final String TAG = LiftSearchActivity.class.getName();

    // User lift input
    private AutoCompleteTextView autoCityFrom;
    private AutoCompleteTextView autoCityTo;
    private DatePicker date;

    private CitiesArrayAdapter adapter;
    private ArrayList<City> mCities ;

    int year , month , day;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lift_search);

        mCities = new ArrayList<City>();

        adapter = new CitiesArrayAdapter(this,
                android.R.layout.simple_dropdown_item_1line, mCities);

        autoCityFrom = (AutoCompleteTextView) findViewById(R.id.cityFrom);
        autoCityTo = (AutoCompleteTextView) findViewById(R.id.cityTo);

        adapter.setNotifyOnChange(true);

        autoCityFrom.setAdapter(adapter);
        autoCityTo.setAdapter(adapter);

        autoCityFrom.addTextChangedListener(new TextWatcher() {
            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                // no need to do anything
            }

            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                if (((AutoCompleteTextView) autoCityFrom).isPerformingCompletion()) {
                    return;
                }
                if (charSequence.length() < 2) {
                    return;
                }      

                String query = charSequence.toString();

                getCities(query);

            }

            public void afterTextChanged(Editable editable) {
            }
        });

        autoCityTo.addTextChangedListener(new TextWatcher() {
            public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                // no need to do anything
            }

            public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                if (((AutoCompleteTextView) autoCityTo).isPerformingCompletion()) {
                    return;
                }
                if (charSequence.length() < 2) {
                    return;
                }

                String query = charSequence.toString();

                getCities(query);
            }

            public void afterTextChanged(Editable editable) { 
            }
        });

        date = (DatePicker) findViewById(R.id.dpResult);
    }

    public void searchLifts(View view) {

        Intent intent = new Intent(this, LiftsResultActivity.class);

        //While autocomplete doesn't work hardcore value...
        intent.putExtra("from", Integer.toString(9357)); // Sherbrooke
        intent.putExtra("to", Integer.toString(6193)); // Montreal
        intent.putExtra("date", Integer.toString(date.getMonth()+1) + "-" + Integer.toString(date.getDayOfMonth()) + "-" + Integer.toString(date.getYear()));
        startActivity(intent);
    }

    public void getCities(String query) {
        FragmentManager     fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();

        CitiesResponderFragment responder = (CitiesResponderFragment) fm.findFragmentByTag("RESTResponder");

        responder = new CitiesResponderFragment();
        responder.setenteredCharacters(query);
        ft.add(responder, "RESTResponder");

        ft.commit();
    }

    public CitiesArrayAdapter getArrayAdapter() {
        // TODO Auto-generated method stub
        return adapter;
    }

} 
```

我得到了正确的结果。但是我的服务似乎没有在我的活动中填充我的数组适配器，当我尝试显示我的第一个“城市”时，我的适配器不包含任何内容。我想知道我是否必须放置一个 notifydatasetchanged （我试过了，但没有用）。我有点困惑......任何指针？

在调试应用程序时，我注意到 ArrayAdapter 的属性 mObjects 被清除，即使关联的 ArrayList 有元素，然后属性 mOriginalValues 被第一次加载的字符串填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:01:17.503

在没有看到完整的代码库（+ 数据）的情况下，我不知道是否有人可以指出您的代码失败的原因。但我认为问题更多来自您设置整个自动完成相关代码的方式，而不是一些明显的行错误。下面我将尝试解决其中的一些问题（从我的角度来看）：

首先，在`TextWatcher`from`LiftSearchActivity`你调用`getCities()`添加的方法中，每次用户修改自动完成文本时，a`Fragment`到`Activity`. 我真的怀疑你想要这个，你可能应该看看只有一个`Fragment`可以`Activity`调用刷新（或更新）方法，并将新的过滤器文本传递给它。如果用户旋转手机，这些片段也会因为配置更改而重新创建。

其次，在`CitiesResponderFragment`类中调用片段的`getCities()`方法（如果您没有任何数据），在`onActivityCreated`该方法中启动更新服务（？！）。现在与第一点相关，您最终可能会进行很多不必要的查询，例如，如果用户输入 4 个字符，然后决定删除其中一个字符，因为它不正确，您最终会添加 5 个片段，来自其中 3 将使服务启动/查询数据。

最后，我不确定您是否了解`AutoCompleteTextView`引擎盖下的工作原理。为了向下拉菜单提供建议，`AutoCompleteTextView`小部件将过滤其适配器（`adapter.getFilter()`）并将匹配过滤器的项目显示为建议。我不知道您是否在 上设置了一些阈值，`AutoCompleteTextView`但最初输入的前 3 个字符的自动完成将为空，因为您在首次设置`Activity`. 前两个字符不会显示任何内容，因为您从一个空列表开始并且您没有添加任何新片段（`charSequence.length() < 2`）。第三个字符很可能也不会显示任何内容，因为创建片段、启动服务和获取数据的开销几乎肯定会大于适配器过滤的工作（仍然会看到最初的空列表） . 我不知道您是否测试过，但是从这第四个字符开始，适配器中应该有一些元素，并且过滤应该显示一些东西。清除适配器并在其中添加新数据只会使该数据可用于在`AutoCompleteTextView`.

进行过滤的正确方法是进一步扩展您的适配器并实现该`getFilter()`方法以返回您自己的`Filter`实现，该实现将查询数据存储以获取新的过滤项。过滤方法在后台线程上运行，我认为您可以`Service`通过 REST 回调实现您当前的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:27:02.470

请参阅 REST API 自动完成示例：[https ://subversion.assembla.com/svn/rockitsearch-android/](https://subversion.assembla.com/svn/rockitsearch-android/)

虽然它是我的服务的一部分，但它也可以作为一个示例，说明如何将自己的 REST API 集成到 AutoCompleteTextView 控件中。如果您对自动完成第 3 方服务感兴趣，请访问：www.rockitsearch.com

# jquery - 在图案中使用四种颜色的不同背景颜色

> ID：13547477
> 
> 赞同：0
> 
> 时间：2012-11-25T01:32:56.590
> 
> 标签：jquery, css, colors

我有一组四种颜色，我想知道是否可以使用这四种颜色作为循环来更改模式中 div 的颜色。因此，例如：

div1 = 红色 div2 = 蓝色 div3 = 绿色 div4 = 黄色 [重新开始] div5 = 红色 div2 = 蓝色 div3 = 绿色...等等。

我认为 jQuery/JS 会是最好的。我尝试使用 nth-childs 等，但没有那么强大。

有什么帮助吗？

谢谢，R

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:37:03.110

你可以只用 CSS 来做到这一点：

```
div:nth-child(4n+1) { background-color : red; }
div:nth-child(4n+2) { background-color : blue; }
div:nth-child(4n+3) { background-color : green; }
div:nth-child(4n+4) { background-color : yellow; } 
```

演示：http: [//jsfiddle.net/RLmgD/](http://jsfiddle.net/RLmgD/)

但如果你真的想要 jQuery：

```
$(document).ready(function() {
    $("div:nth-child(4n+1)").css("background-color","red");
    $("div:nth-child(4n+2)").css("background-color","blue");
    $("div:nth-child(4n+3)").css("background-color","green");
    $("div:nth-child(4n+4)").css("background-color","yellow");
}); 
```

演示：http: [//jsfiddle.net/RLmgD/1/](http://jsfiddle.net/RLmgD/1/)

# c# - 是否有任何与可移植类库一起使用的 REST 库？

> ID：13547479
> 
> 赞同：5
> 
> 时间：2012-11-25T01:33:45.010
> 
> 标签：c#, rest, portable-class-library

我正在开发一个需要发出 REST 请求的可移植类库，并且正在寻找像 Restsharp 或 EasyHttp 这样的东西。不幸的是，目前这些都不适用于 PCL。看到一个使用基本身份验证执行发布请求的示例也很好。

如果没有任何内容，是否有人举例说明我将如何使用基本身份验证进行发布请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:27:47.873

如果您针对 4.5 或 Windows 应用商店应用程序，您可以使用 HttpClient 作为 PCL。[否则，您可以在https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp](https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp)尝试破解和斜线 RestSharp 的 PCL 端口

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T10:46:48.463

有一个最近刚刚宣布，目前在 GitHub 上可用。它被称为便携式休息

[https://github.com/advancedrei/PortableRest](https://github.com/advancedrei/PortableRest)

> PortableRest 是一个可移植类库，用于在其他可移植类库中实现 REST API 客户端。它利用 JSON.NET 进行快速、可定制的序列化，并利用 Microsoft.Bcl.Async 库在任何平台上等待执行。它被设计成在很大程度上与 RestSharp 兼容，尽管您需要进行一些更改并重新编译。
> 
> 此初始版本对简单 JSON 请求的支持有限。更多选项（包括 XML 和希望 DataContract 支持）将在以后的版本中提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T13:22:51.740

由于我只支持 windows phone 7.5 和更高版本，我能够使用这个库 ( [Microsoft.Bcl.Async](http://blogs.msdn.com/b/bclteam/archive/2012/11/22/10361314.aspx?PageIndex=3) ) 将异步支持添加到我的 plc，然后使用[这个解决方案](https://stackoverflow.com/questions/10565090/getting-the-response-of-a-asynchronous-httpwebrequest/10565229)。

所以我的代码最终看起来像这样：

```
 public async Task<RequestResult> RunRequestAsync(string requestUrl, string requestMethod, object body = null)
    {
        HttpWebRequest req = WebRequest.Create(requestUrl) as HttpWebRequest;
        req.ContentType = "application/json";

        req.Credentials = new System.Net.NetworkCredential(User, Password);

        string auth = Convert.ToBase64String(Encoding.UTF8.GetBytes(string.Format("{0}:{1}", User, Password)));
        var authHeader = string.Format("Basic {0}", auth);
        req.Headers["Authorization"] = authHeader;

        req.Method = requestMethod; //GET POST PUT DELETE
        req.Accept = "application/json, application/xml, text/json, text/x-json, text/javascript, text/xml";

        if (body != null)
        {
            var json = JsonConvert.SerializeObject(body, new JsonSerializerSettings() { NullValueHandling = NullValueHandling.Ignore });
            byte[] formData = UTF8Encoding.UTF8.GetBytes(json);

            var requestStream = Task.Factory.FromAsync(
                req.BeginGetRequestStream,
                asyncResult => req.EndGetRequestStream(asyncResult),
                (object)null);

            var dataStream = await requestStream.ContinueWith(t => t.Result.WriteAsync(formData, 0, formData.Length));
            Task.WaitAll(dataStream);
        }

        Task<WebResponse> task = Task.Factory.FromAsync(
        req.BeginGetResponse,
        asyncResult => req.EndGetResponse(asyncResult),
        (object)null);

        return await task.ContinueWith(t =>
        {
            var httpWebResponse = t.Result as HttpWebResponse;

            return new RequestResult
            {
                Content = ReadStreamFromResponse(httpWebResponse),
                HttpStatusCode = httpWebResponse.StatusCode
            };

        });
    }

    private static string ReadStreamFromResponse(WebResponse response)
    {
        using (Stream responseStream = response.GetResponseStream())
        using (StreamReader sr = new StreamReader(responseStream))
        {
            //Need to return this response 
            string strContent = sr.ReadToEnd();
            return strContent;
        }
    } 
```

然后我会用类似这样的方式调用代码：

```
public async Task<bool> SampleRequest()
        {            
            var res = RunRequestAsync("https//whatever.com/update/1", "PUT");
            return await res.ContinueWith(x => x.Result.HttpStatusCode == HttpStatusCode.OK);
        } 
```

如果这对您来说还不够，请随时在[此处查看项目的其余部分](https://github.com/eneifert/ZendeskApi_v2/blob/master/ZendeskApi_v2/Core.cs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T16:49:20.843

您有一个便携式 RestSharp 在以下位置工作：

[https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp](https://github.com/Geodan/geoserver-csharp/tree/master/RestSharp)

看起来它运作良好......它使用 Json.net 来

# javascript - 跳过正则表达式 html 中的标签和空格

> ID：13547481
> 
> 赞同：0
> 
> 时间：2012-11-25T01:34:02.190
> 
> 标签：javascript, html, regex, tags

我正在使用这个正则表达式来查找一个以 !? 开头、以 ?! 结尾的字符串，并且中间有另一个变量（在本例中为“a891d050”）。这就是我使用的：

```
var pattern = new RegExp(/!\\?.*\s*(a891d050){1}.*\s*\\?!/); 
```

它与这个正确匹配：

```
!?v8qbQ5LZDnFLsny7VmVe09HJFL1/WfGD2A:::a891d050?! 
```

但是当字符串被 html 标签分解时失败。

```
<span class="userContent"><span>!?v8qbQ5LZDnFLsny7VmVe09HJFL1/</span><wbr /><span class="word_break"></span>WfGD2A:::a891d050?!</span></div></div></div></div> 
```

我尝试添加**\s**和***{space}* ***，但仍然失败。问题是，如果我想在匹配项中忽略空格和 html 标记，我需要考虑哪些（特殊？）字符。

**编辑：**这就是我使用正则表达式的方式：

```
var pattern = /!\?[\s\S]*a891d050[\s\S]*\?!/;

document.body.innerHTML = document.body.innerHTML.replace(pattern,"new content"); 
```

在我看来，当它遇到它替换的“普通”字符串时，它是正确的。但是，当面对在其周围和内部具有类的 String 时，它会使类变得一团糟，**或者**根本不会根据上下文进行替换。所以我决定尝试[jquery-replacetext-plugin](http://benalman.com/projects/jquery-replacetext-plugin/) *（因为它承诺保留标签原样），*如下所示：

```
$("body *").replaceText( pattern, "new content" ); 
```

但是没有成功，结果和以前一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:52:05.437

也许是这样：

```
var pattern = /!\?[\s\S]*a891d050[\s\S]*\?!/; 
```

[\s\S] 应该匹配任何字符。我还删除了 {1}。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:41:00.047

这个问题*显然是*通过使用这个正则表达式解决的：

```
var pattern = /(!\?)(?:<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])*?>)?(.)*?(a891d050)(?:<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])*?>)?(.)*?(\?!)/; 
```

# drupal-7 - Drupal 表单 API 和 BrainTree 异常认证

> ID：13547484
> 
> 赞同：0
> 
> 时间：2012-11-25T01:34:21.957
> 
> 标签：drupal-7, drupal-forms, braintree

当我使用 API 创建 Drupal 表单并根据需要构建表单时，Braintree 返回身份验证异常。当我采用相同的渲染 HTML 并将其输出到页面上时（跳过 api），它就可以工作了。我不知道为什么！

下面是不起作用的代码。

```
function my_module_menu() {
  $items['user/payment/add'] = array(
    'title' => t('Add Card'),
    'type' => MENU_LOCAL_TASK,
    'page callback' => 'drupal_get_form',
    'page arguments' => array('my_module_add_form'),
    'access arguments' => array('access content'),
    'weight' => 2,
  );
}

function my_module_add_form() {

  global $user;

  require_once 'sites/all/libraries/braintree/lib/Braintree.php';

  Braintree_Configuration::environment('sandbox');
  Braintree_Configuration::merchantId('xxx');
  Braintree_Configuration::publicKey('xxx');
  Braintree_Configuration::privateKey('xxx');

  $customer = Braintree_Customer::find($user->uid);

  $trData = Braintree_TransparentRedirect::updateCustomerData(
    array(
      'redirectUrl' => 'http://www.xxx.com/user/payment',
      'customerId' => $user->uid
    )
  );

  $form['#action'] = url(Braintree_TransparentRedirect::url(), array('external' => true));
  $form['customer[first_name]'] = array(
    '#type' => 'textfield',
    '#title' => t('First Name'),
  );
  $form['customer[last_name]'] = array(
    '#type' => 'textfield',
    '#title' => t('Last Name'),
);
  $form['tr_data'] = array(
    '#type' => 'hidden',
    '#value' => htmlentities($trData),
  );
  $form['submit'] = array(
    '#type' => 'submit', 
    '#value' => t('Save')
  );

  return $form;
} 
```

相反，如果我采用该确切的 HTML 输出并使用 normal_menu_item 和与上述相同的凭据来执行此操作...

```
function my_module_menu() {
  $items['user/payment/add'] = array(
    'title' => t('Add Card'),
    'type' => MENU_NORMAL_ITEM,
    'page callback' => 'my_module_add_page',
    'access arguments' => array('access content'),
    'weight' => 2,
  );
}

function my_module_add_page() {

  global $user;

  require_once 'sites/all/libraries/braintree/lib/Braintree.php';

  Braintree_Configuration::environment('sandbox');
  Braintree_Configuration::merchantId('xxx');
  Braintree_Configuration::publicKey('xxx');
  Braintree_Configuration::privateKey('xxx');

  $customer = Braintree_Customer::find($user->uid);

  $trData = Braintree_TransparentRedirect::updateCustomerData(
    array(
      'redirectUrl' => 'http://www.xxx.com/user/payment',
      'customerId' => $user->uid
    )
  );

    $output="

    <form accept-charset='UTF-8' id='tqcustom-billing' method='post' action='".Braintree_TransparentRedirect::url()."'>
    <div>
      <div class='form-item form-type-textfield form-item-customer-first-name'>
        <label for='edit-customer-first-name'>First Name </label>
        <input type='text' class='form-text' maxlength='128' size='60' value='' name='customer[first_name]' id='edit-customer-first-name'>
      </div>
      <div class='form-item form-type-textfield form-item-customer-last-name'>
        <label for='edit-customer-last-name'>Last Name </label>
        <input type='text' class='form-text' maxlength='128' size='60' value='' name='customer[last_name]' id='edit-customer-last-name'>
      </div>
      <input type='hidden' value='".$trData."' name='tr_data'>
      <input type='submit' class='form-submit' value='Save' name='op' id='edit-submit'>
    </div>
  </form>
  ";
  return $output;
} 
```

它返回正常，状态码为 200。有关 drupal_get_form 或 drupal_render 的某些内容会杀死 Braintree 验证表单帖子所需的环境。这到底是什么原因造成的？两种方式的浏览器 HTML 输出 100% 完全相同，但第一种方式不会进行身份验证。

请向我询问详细信息，我会提供它们 - 迫切希望弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:48:06.743

在您的第一个示例中，您在显示表单之前传递了`Braintree_TransparentRedirect::updateCustomerData`through的输出。`htmlentities`这将导致 & 符号显示为 & 代替 ＆。由于 tr_data 字段是使用您的 API 密钥签名的，因此它必须与从`Braintree_TransparentRedirect::updateCustomerData`.

免责声明：我为 Braintree 工作

# android - SQLite 异常：Eclipse 上没有这样的表

> ID：13547493
> 
> 赞同：1
> 
> 时间：2012-11-25T01:36:08.043
> 
> 标签：android, database, sqlite, exception

我正在尝试复制位于资产上的现有数据库，以便我可以访问其静态信息，但我遇到了“没有这样的表”错误。

Logcat（其中一些，如果需要我会发布更多）：

```
11-25 01:30:49.863: E/SQLiteLog(627): (1) no such table: myTable
11-25 01:30:49.873: E/DataAdapter(627): getTestData >>android.database.sqlite.SQLiteException: no such table: myTable (code 1): , while compiling: SELECT * FROM myTable
11-25 01:30:49.873: D/AndroidRuntime(627): Shutting down VM
11-25 01:30:49.873: W/dalvikvm(627): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-25 01:30:49.882: E/AndroidRuntime(627): FATAL EXCEPTION: main
11-25 01:30:49.882: E/AndroidRuntime(627): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.adiel.cookbook/com.adiel.cookbook.MainActivity}: android.database.sqlite.SQLiteException: no such table: myTable (code 1): , while compiling: SELECT * FROM myTable
11-25 01:30:49.882: E/AndroidRuntime(627):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-25 01:30:49.882: E/AndroidRuntime(627):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084) 
```

数据库处理程序：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBHandler extends SQLiteOpenHelper
{
private static String TAG = "DataBaseHelper"; // Tag just for the LogCat window
//destination path (location) of our database on device
private static String DB_PATH = ""; 
private static String DB_NAME ="CookbookDB";// Database name
private SQLiteDatabase mDataBase; 
private final Context mContext;

public DBHandler(Context context) 
{
super(context, DB_NAME, null, 1);// 1? its Database Version
DB_PATH = "/data/data/" + context.getPackageName() + "/databases/";
this.mContext = context;
}   

public void createDataBase() throws IOException
{
//If database not exists copy it from the assets

boolean mDataBaseExist = checkDataBase();
if(!mDataBaseExist)
{
    this.getReadableDatabase();
    this.close();
    try 
    {
        //Copy the database from assets
        copyDataBase();
        Log.e(TAG, "createDatabase database created");
    } 
    catch (IOException mIOException) 
    {
        throw new Error("ErrorCopyingDataBase");
    }
}
}

   //  Check that the database exists here: /data/data/your package/databases/DaName
private boolean checkDataBase()
{
    File dbFile = new File(DB_PATH + DB_NAME);
    //Log.v("dbFile", dbFile + "   "+ dbFile.exists());
    return dbFile.exists();
}

//Copy the database from assets
private void copyDataBase() throws IOException
{
    InputStream mInput = mContext.getAssets().open(DB_NAME);
    String outFileName = DB_PATH + DB_NAME;
    OutputStream mOutput = new FileOutputStream(outFileName);
    byte[] mBuffer = new byte[1024];
    int mLength;
    while ((mLength = mInput.read(mBuffer))>0)
    {
        mOutput.write(mBuffer, 0, mLength);
    }
    mOutput.flush();
    mOutput.close();
    mInput.close();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T07:11:07.673

好吧，这很容易

您忘记写带有扩展名的数据库名称

在您的代码中：

```
private static String DB_NAME ="CookbookDB";// Database name 
```

应该

```
private static String DB_NAME ="CookbookDB.sqlite";// Database name 
```

或者您的确切数据库扩展名是什么。

还有一个问题仍然存在。没有升级方法。例如，如果您将来发布此应用程序并且想要对应用程序进行更新。会有一个问题。对于已经使用您的应用程序并尝试更新的人，您无法看到您的新数据库。

你应该小心

# f# - 我可以将 let 语句放在 F# 列表理解中吗？

> ID：13547494
> 
> 赞同：3
> 
> 时间：2012-11-25T01:36:08.970
> 
> 标签：f#

我正在尝试在 F# 中编写列表理解，但无法编译：

```
[for x in xs do
    let y = f(x)
    when g(y) -> y] 
```

有没有办法在列表理解的中间保存中间计算？我怎样才能修改这个列表理解以便它编译？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T01:45:31.193

我会跳过列表理解。

```
let ys = xs |> List.map f |> List.filter g 
```

但是，让您的代码正常工作很简单。

```
let ys = [ for x in xs do
               let y = f(x)
               if g(y) then yield y ] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T13:55:26.830

要扩展@ChaosPandion 的解决方案，您还可以使用`List.choose`- 将其视为 和 的组合，`List.map`从而`List.filter`避免创建额外的列表（即，而不是创建一个`List.map`仅将其传递给的列表`List.filter`）。

```
let ys =
    xs
    |> List.choose (fun x ->
        let y = f x
        if g y then Some y else None) 
```

# python-2.7 - 刽子手 - 重复字符

> ID：13547505
> 
> 赞同：1
> 
> 时间：2012-11-25T01:38:40.110
> 
> 标签：python-2.7

我有一个关于我的这个刽子手程序的问题。当我猜到一个单词（“good”）的一个字母（'o'）右边有重复时，它只作为 list.index（value）的第一个索引被公开即使该值有重复项，也只返回一个索引。如果我想同时显示所有重复的字母，我需要更改或添加什么。

这是我期望程序执行的操作：

猜字母：l >>> _oo_

谢谢。

```
the_word="good"
#print the_word
wLen=len(the_word)
u='_'*wLen
counter=0
while counter!=12 and wLen!=0:
    counter=counter+1
    print u
    g=raw_input("Guess the letter: ")
    p=list(the_word)
    x1=the_word.find(g)
    if x1 >=0:
        u1=list(u)
        u1[x1]=g
        u=''.join(u1)
        wLen=wLen-1

if wLen==0:    
    print "Congratulation!!!you have guessed the word"
    print "The word was",the_word

else:
    print "sorry u loose" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:45:39.143

```
while (true):
    x1=the_word.find(g)

    if x1 < 0:
        break

    u1=list(u)
    u1[x1]=g
    u=''.join(u1)
    wLen=wLen-1 
```

像这样的东西应该工作。没有测试过，但这应该是正确的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T01:58:10.847

如果这是一个任务，我将专注于一个更简单的解决方案，希望它是有意义的。你知道你的目标词，然后你可以使用一个函数`enumerate`来找到所有字母的索引位置：

```
In [31]: word = 'good'

In [32]: for index, letter in enumerate(word):
   ....:     print index, letter
   ....:
0 g
1 o
2 o
3 d 
```

所以知道这一点，假设用户输入`o`。我们当前的“猜测”字符串看起来像`____`，并且我们知道我们需要将索引位置 1 和 2 替换为`o`。由于猜测字符串和目标单词的长度相同（因为它们应该是同一个单词），一个简单的解决方案是使用 enumerate 遍历实际单词，如果字母是`o`（或他们猜到的任何内容），`guessing`用该字母替换单词中相同的索引位置。例如：

```
In [33]: word = 'good'

In [34]: guess_list = list('_' * len(word))

In [35]: g = raw_input('Guess a letter: ')
Guess a letter: o

In [36]: for index, letter in enumerate(word):
   ....:     if letter == g:
   ....:         guess_list[index] = letter
   ....:

In [37]: print ''.join(guess_list)
_oo_ 
```

# mysql - MySQL：选择表中的所有列加上同一表中的一列

> ID：13547507
> 
> 赞同：12
> 
> 时间：2012-11-25T01:39:01.563
> 
> 标签：mysql

我有一个包含很多列的表，比如说 column1,....,column20。我不想每次都滚动到结果表的末尾来查看 column20 的值。在 mssql 中我通常这样做 `SELECT column20, * FROM TABLE`，但显然这在 MySQL 中无效。有什么提示吗？（我也不想在 select 语句中明确选择所有列）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T01:42:55.033

您必须在查询中给出表名，否则 mysql 会抱怨：

```
SELECT column20, mytable.* FROM mytable 
```

PS：我完全不知道为什么，因为`SELECT *, column20 FROM mytable`效果很好......有时会发生奇怪的事情^^

# javascript - IE 7 中的引导轮播问题

> ID：13547508
> 
> 赞同：0
> 
> 时间：2012-11-25T01:39:02.473
> 
> 标签：javascript, jquery, css, twitter-bootstrap

正如标题所示，我在 IE7 中的 twitter 引导轮播存在一些问题，希望任何人都可以给我建议。

首先，我注意到轮播在 IE7 中没有滑动，经过阅读后，我意识到 Twitter 正在使用 css3 转换来实现幻灯片效果，而 IE 根本不支持这一点，所以我找到了一个使用 jQuery 动画的解决方案，该解决方案由“Barryvdh “来自 GitHub。这是链接：

[https://github.com/twitter/bootstrap/pull/3052/files](https://github.com/twitter/bootstrap/pull/3052/files)

虽然这确实解决了滑动问题，但我现在遇到了 IE 7 的另一个问题......幻灯片动画完成后，幻灯片中的所有图像都会消失，直到我将鼠标悬停在一个控制箭头上。

在这里，我创建了代码的 jsBin，因此您可以看到问题：http: [//jsbin.com/ozaxib/1/edit](http://jsbin.com/ozaxib/1/edit)

我将不胜感激任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:32:08.463

来自 github 的 Barryvdh 给出了这个问题的答案：

你可以用这行 css 来解决这个问题：

```
.carousel .item {
  width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:55:11.033

我面临同样的问题。但是，当我在您链接到的那个变更集中添加 css 更改时，它对我有用！

# android - 在安卓游戏中同步触摸事件和更新可以吗？

> ID：13547509
> 
> 赞同：4
> 
> 时间：2012-11-25T01:39:22.817
> 
> 标签：android, synchronized, touch-event, game-loop

所以游戏运行良好，但我注意到，在极少数情况下，应用程序会在随机位置崩溃。我进行了调试，我的理论是，因为表面上的触摸事件是在应用程序的 UI 线程中处理的，并且游戏更新发生在一个单独的线程（循环线程或任何它被调用的线程）中，所以这两者正在互相踩踏。我的解决方案是同步表面上的触摸事件：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    synchronized (this.gameLoopingThread) {
        //Handle touch events here
        return true;
    }
} 
```

循环线程中的游戏更新：

```
@Override
public void run() {
    while (this.running) {
        synchronized (this) {
            doUpdate();
        }
        doDraw();
    }
} 
```

所以我想知道，我可以这样做吗？我对多线程应用程序还不是很好，所以有人请告诉我这是否解决了我的问题，因为我无法真正验证，因为问题发生的频率不够高（只发生了两次）。如果是这样，我们不应该在我们实施的每个游戏上都这样做吗？我在网上到处看到的教程从来没有这样做过。有原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:01:07.377

同步确实有助于将线程更新方法锁定到触摸事件，这也是我实现游戏的方式。我注意到当双向同步时它是稳定的，而只有一个使其不稳定。

# html - 使用 foreach 语句可能会弄乱我的 CSS

> ID：13547511
> 
> 赞同：0
> 
> 时间：2012-11-25T01:39:24.357
> 
> 标签：html, asp.net-mvc, css, razor

我现在花了几个小时试图找出需要 5 秒才能完成的事情。使用 MVC 的 razor 引擎，我调用了一个 foreach 语句来循环并在我的视图（cshtml）中加载我的 html 内容。我需要仅使用水平滚动条查看我的内容，而不是使用滚动条进行默认垂直加载。我已经尝试了一切，我发现当我尝试在 foreach 语句下制作简单的 html 代码时，我的 css 来制作内容不起作用，否则它会正常工作。关于为什么会这样以及可以做些什么来修复这个错误的任何想法。

这段代码目前正在做的是它将在 foreach 语句中使用两个 div 并将所有一行放入，但是对于集合中的 foreach 项目（每个 div）它将跳过一行。不知道为什么。

```
<div class="container-scroll">

    @foreach (var item in Model)
    {
        <div style="display:inline-block !important;">dddddkklas;dlkfjlksjdlfklskdjflksjdlkflskdjflksjdfsdfsdfsdfsdfsdfs555555555555555555</div>
        <div style="display:inline-block !important;">lkjslkdj5555555555555444444444444444</div>
    }
</div>

.container-scroll {
    width: auto;
    min-width: 0px; 
    overflow-x: scroll; 
    position: relative;
    min-height: 100%;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T01:58:44.110

尝试添加`white-space: nowrap;`到您的`.container-scroll`课程中。

# c# - 不要加载 fbembed.dll，但它在测试用例中很好？

> ID：13547512
> 
> 赞同：0
> 
> 时间：2012-11-25T01:39:57.430
> 
> 标签：c#, database, firebird, embedded-database

我正在使用嵌入在我的 .net 应用程序中的 FireBird。这个家伙是我的联系人： ![火鸟连接](../Images/43b18b43560a5b1a2443a509521b4ad7.png)

代码是：

```
 public class ImDb{
    private static FbConnection _fbConnection;
    public static FbConnection IMManagerConnection() {
        var fbConnStringBuilder = new FbConnectionStringBuilder();
        fbConnStringBuilder.ServerType = FbServerType.Embedded;
        fbConnStringBuilder.UserID = "sysdba";
        fbConnStringBuilder.Password = "masterkey";
        //fbConnStringBuilder.ClientLibrary = @"fbembed.dll";
        fbConnStringBuilder.Database = @"IMMANAGER.FDB";

        _fbConnection = new FbConnection(fbConnStringBuilder.ConnectionString);
        return _fbConnection;
    }
} 
```

这是我的测试用例： ![我的测试用例，运行正常](../Images/148fa71b3fb45b36bba30a6bcce26f0b.png)

代码是：

```
 [Test]
    public void SimSymbolTest(){
        FbConnection fbc=IMManager.Common.ImDb.IMManagerConnection();
        fbc.Open();
        Console.WriteLine("The Server Version is :" + fbc.ServerVersion);
        Console.WriteLine("The database is :" + fbc.Database);
        Console.WriteLine("The DataSource is :" + fbc.DataSource);
        Console.WriteLine("The Version Number is: " + fbc.ServerVersionNumber);
        fbc.Close();
    } 
```

在我的应用程序中，这是错误的！！报告不要加载 fbembed.dll ![我的应用程序片段](../Images/5eb43b06f07486033823236a689cda4b.png)

代码是：

```
 private DataTable ExeQuery(string sqlString){
        DataSet ds = new DataSet();
        FbConnection fbc = ImDb.IMManagerConnection();
        try {
            fbc.Open();
            FbTransaction fbt = fbc.BeginTransaction();
            FbCommand fbcmd = new FbCommand(sqlString, fbc, fbt);
            FbDataAdapter fbda = new FbDataAdapter(fbcmd);
            fbda.Fill(ds);
            fbt.Commit();
        } catch (Exception ex) {
            MessageBox.Show(ex.Message, "错误", MessageBoxButtons.OK, MessageBoxIcon.Error);
        } finally {
            fbc.Close();
        } 
        return ds.Tables[0];
    } 
```

这是我的目录：

![我的目录](../Images/9187b110ac056caea63d4f8f3124889b.png)

请帮帮我！在此先感谢！

然后我修改连接代码，添加ClientLibrary的值： ![ClientLibrary 已分配](../Images/58ef2417a62249eb5cec53ca55fe7257.png)

测试用例运行正常！

但是在应用程序中，错误再次发生。 ![在此处输入图像描述](../Images/55700d8b1360a9dc3b7f3e66e081f76d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:55:19.423

Firebird 2.5 嵌入的最小文件集：

```
INTL\fbintl.conf
INTL\fbintl.dll
fbembed.dll
firebird.msg
ib_util.dll
icudt30.dll
icuin30.dll
icuuc30.dll
Microsoft.VC80.CRT.manifest
msvcp80.dll
msvcr80.dll 
```

在您的情况下，缺少 microsoft 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:38:46.193

没有解决方案！

我不得不更改 FireBird Server 版本。

没关系！

顺便说一句，我在我的应用程序中使用 Visual Web Gui，PATH 问题可能与此有关。也许 VWG 和 IIS 之间存在不同？我不知道，只是来宾；）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T09:54:45.897

对于 Windows 应用程序，它将在 .exe 文件所在的文件夹中查找 dll。

对于 Web 应用，您可以设置连接字符串的 ClientLibrary 属性：

connectionString="ServerType=1;User=SYSDBA;Password=masterkey;Dialect=3;Database=;ClientLibrary="

# jakarta-ee - 验证失败后命令按钮停止工作

> ID：13547527
> 
> 赞同：0
> 
> 时间：2012-11-25T01:43:35.677
> 
> 标签：jakarta-ee, jsf-2, primefaces

我是我的网络应用程序，我有以下在对话框中打开的表单：

```
<!-- Event edit -->
    <p:dialog id="editEvent" 
              widgetVar="dlgEdit" 
              modal="true"
              resizable="true" 
              closable="true"
              header="Edit event">
        <p:panelGrid columns="1" 
                     styleClass="gridNoLine">
            <p:panelGrid columns="1">
                <p:messages id="mEditMessages"
                            closable="true" 
                            redisplay="true"/>
            </p:panelGrid>
            <p:panelGrid columns="2" styleClass="gridNoLine">
                <h:outputLabel value="..." />
                <p:inputText value="#{eventBean.event.eventName}"
                             required="true"
                             requiredMessage="XXX"/>
            </p:panelGrid>
            <p:panelGrid columns="2" styleClass="gridNoLine">
                <h:outputLabel value="..." />
                <p:inputTextarea value="#{eventBean.event.eventDescription}"
                                 required="true"
                                 requiredMessage="XXX" />
            </p:panelGrid>

            ...

            <p:commandButton id="cbUpdateEvent" 
                             value="Update"
                             actionListener="#{eventBean.update}"
                             oncomplete="handleAction(xhr, status, args);"
                             process="@form"
                             update="mEditMessages OTHERCONTROLS"/>

        </p:panelGrid>
    </p:dialog> 
```

此对话框从 DataTable 的每一行的 commandButton 列打开，如以下代码所示：

```
<p:dataTable value="#{eventBean.events}" 
             var="event">
    <p:column styleClass="commandColumn">
        <f:facet name="header">
            <h:outputLabel value="Editar"/>
        </f:facet>
        <p:commandButton image="ui-icon-pencil" 
                     title="Edit"
                     update="editEvent"
                     oncomplete="dlgEdit.show();"
                     process="@this">
            <f:setPropertyActionListener value="#{event}" target="#{eventBean.event}" />
        </p:commandButton>
    </p:column>
    ...
 </p:dataTable> 
```

问题是：当我打开对话框时，清除一个随机字段（只是为了测试验证）并单击更新按钮，对话框上会显示一条警告消息。美好的。但是当我清除另一个字段并单击更新按钮时，与该控件关联的所需消息不会显示。然后当我关闭对话框并再次单击任何行的任何更改列时，什么也没有发生。我可以在浏览器控制台上看到以下消息：

```
Uncaught SyntaxError: Unexpected token { 
```

OBS：如果我单击编辑命令并且不修改任何字段而只是关闭，应用程序工作正常，我可以查看其他记录的编辑对话框。

更新：这是 template.xhtml 代码：

```
<h:body>
    <div class="structure"> 
        <div class="top">
        </div>
        <!--Base Menu -->
        <h:form id="menu">
            <div class="menu">
                <p:menubar autoDisplay="true" >
                    ...
                </p:menubar>
            </div>
        </h:form>
        <!-- Conteúdo -->
        <div class="left_content">

            <ui:insert name="content">
            </ui:insert>

        </div>
        ...
    </div>
</h:body> 
```

这是handleAction代码：

```
function handleAction(xhr, status, args){
    switch(args.key){
        case 'update': 
            dlgEdit.hide();
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:17:47.593

我发现了错误。我只是在[这里](http://forum.primefaces.org/viewtopic.php?f=3&t=24368)指出的两次导入 primefaces jar 。我的 WEB-INF/lib 文件夹和 pom.xml 文件中有一个 primefaces-3.4.jar。我确实删除了 WEB-INF/lib 中的 jar，一切正常。

# vim - Vim：在我的 .vimrc 文件中使用类似链接的帮助

> ID：13547528
> 
> 赞同：3
> 
> 时间：2012-11-25T01:44:07.047
> 
> 标签：vim

有没有办法让 Vim 帮助我的`.vimrc`文件中的链接？

喜欢将它用于，例如，在文件的开头为我的整个`.vimrc`文件提供目录吗？它并不小，而且我经常发现在`.vimrc`文件的两个部分之间快速移动很有用。

那么这可能吗？我说的是您在所有帮助文件中的链接，就像您按下它一样`Ctrol+]`，它会将您发送到该链接所在的文件部分。那种链接。

是否可以在我的`.vimrc`文件中包含这些？如果是这样，如何，同样的方式与帮助一样？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T04:45:09.143

vim 帮助使用标签文件：

```
$VIMRUNTIME/doc/tags 
```

您可以为您的`.vimrc`.

然后你需要设置`tags`选项来定位它：

```
:set tags+=/path/to/your/tags 
```

* * *

键入`:help 'tags'`以阅读更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T06:14:38.403

如果你只想有一个目录，我建议折叠你的 .vimrc 文件。这比创建标签要容易得多。我的 .vimrc 如下所示，其中只有最后一部分展开：

```
" vim:fdm=marker:fen:fdl=0:
+-- 20 lines: buffer
+-- 12 lines: tty
+-- 10 lines: look
+--  9 lines: spell
+-- 12 lines: highlight
+-- 25 lines: filetype
+-- 16 lines: folding
+-- 26 lines: mapping
" latex-box {{{1
let g:LatexBox_output_type="dvi"
let g:LatexBox_viewer="xdvi" 
```

第一行是 'modeline'，我告诉 vim 使用默认标记 ({{{) 来标记一个部分，以便在文件打开后启用折叠，从第 0 级折叠整个文件（表的顶层内容）。您可以使用普通`j`/`k`键在此列表中上下移动，`h`/`l`打开折叠（如果您配置 vim 这样做）。这样，您也可以实现目录。但是您根本不需要手动维护标签。

':help fold' 和 ':help modeline' 可以帮助你。这是让您进出文件夹的简短密钥列表：

```
" zR    Unfold all folded lines in file.
" za    Open/close (toggle) a folded group of lines.
" zA    Open a closed fold or close an open fold recursively.
" zc    Close a folded group of lines.
" zC    Close all folded lines recursively.
" zd    Delete a folded line.
" zD    Delete all folded lines recursively.
" zE    Eliminate all folded lines in file.
" zF    Create "N" folded lines. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T17:22:52.803

我为带有标签的 vmrc 文件使用了一个目录，但最终摆脱了它，因为折叠方法被证明更方便。[景在他的回答](https://stackoverflow.com/a/13548787/1731557)中已经描述过了。

那些讨厌丑陋 {{{1 标志的人的替代折叠方法在他们的文件中。

每个部分都以标题开头：

```
" = Another section = 
```

在文件的最后一行添加一个模式行：

```
"  vim:fdm=expr:fen:fdl=0:foldexpr=getline(v\:lnum)=~'^\"\\s='?'>1'\:'=': 
```

内容如下：

*   vim: - 这是此文件的模式行，使用以下本地设置
*   fdm=expr - 折叠方法是表达式
*   fen - 折叠启用
*   fdl=0 - 只打开 0 级折叠，这意味着关闭所有
*   foldexpr - 如果行以 " = 开始，则开始折叠级别 1，否则行与上面的行处于同一级别。

如果您想拥有多个级别，那么您最好为此使用一个函数。[在这个答案](https://stackoverflow.com/a/4677454/1731557)中有很好的描述

我最有用的捷径是

```
zi -  Invert 'foldenable'. 
```

这是一个切换命令：打开所有折叠或关闭所有折叠，除了那些我打开但没有用 zc 明确关闭的折叠。

# c# - 验证文件未更改/替换

> ID：13547532
> 
> 赞同：0
> 
> 时间：2012-11-25T01:44:39.323
> 
> 标签：c#, security, hash

我需要将安全信息传递给我的应用程序中的可执行文件。换句话说，我有这行：

```
Process.Start("someExecutable.exe","MyUsername, myPassword"); 
```

我想阻止人们看到这些参数。（用户名和密码由用户在运行时指定，因此我不必担心这些参数）。

现在我遇到的一个问题是：如果有人用他们自己的程序替换 someExecutable.exe，他们将能够看到凭据！

*为了将来参考，我参考 someExecutable.exe （程序我将凭证作为参数发送为）**A** ，我将此程序创建的可执行文件称为**B***

**我想防止这个问题，这里有一些我想到的解决方案：**

1.  计算**A**的哈希值并在执行前检查它。

    ```
    static bool? VerifyThatExeIsReliable(string pathOfExe)
    {
        if (System.IO.File.Exists(pathOfExe) == false)
            return null;            

        var bytes = System.IO.File.ReadAllBytes(pathOfExe);

        using (SHA1Managed a = new SHA1Managed())
        {
            var hash = a.ComputeHash(bytes);

            StringBuilder formatted = new StringBuilder(2 * hash.Length);
            foreach (byte b in hash)                
                formatted.AppendFormat("{0:X2}", b);                

            var code = formatted.ToString();

            if (code == "4835658749AF89A65C5F4835658749AF89A65C5F")
                return true;
        }            

        return false;
    } 
    ```

    这种方法的问题是哈希`4835658749AF89A65C5F4835658749AF89A65C5F`将存储在可执行文件**A**中，如果有人用十六进制编辑器打开这个程序，他将能够找到哈希并修改它。换句话说，他们将计算他们编写的程序的 sha1 哈希并放置该哈希而不是`4835658749AF89A65C5F4835658749AF89A65C5F`

2.  使用文件观察器类来检测文件何时被修改。如果我的程序没有运行，我将无法检测到这一点

3.  确保用户无法看到传递给该可执行文件的[命令行参数：查看传递给程序的命令行参数](https://stackoverflow.com/questions/13279436/see-command-line-arguments-being-passed-to-a-program)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:55:24.110

要解决选项#1 的问题，对散列使用非对称加密，这样您的程序（和用户）将只能解密散列，而不能加密不同的散列。当然，如果他们可以编辑已编译的 C# 代码，那么您无法阻止他们更改它以不解密哈希，但这需要更多的时间和专业知识。

要解决问题 #2，在程序中存储可执行文件 A 的哈希值，并在启动之前验证可执行文件 A 是否与哈希值匹配。

至于＃3，据我所知，没有办法解决这个问题。但是，如果您能够修改目标程序，例如，您可以通过加密的网络套接字发送用户名和密码。

另请注意，可以对 .NET 应用程序进行逆向工程，如果安全性对您很重要，您应该考虑在可执行文件上运行某种混淆工具。归根结底，它不是让程序 100% 防篡改，因为那是不可能的。它让任何有理由这样做的人都不值得为此烦恼。

# c++ - c ++计算用户输入的文本行中小写字母的数量

> ID：13547533
> 
> 赞同：1
> 
> 时间：2012-11-25T01:44:46.720
> 
> 标签：c++, visual-c++

我只做了 3 个月，目前处于静止状态。我不确定我做错了什么。如果有任何帮助指出我正确的方向，我将不胜感激。我不要求任何人为我做作业。我应该编写一个程序来接受用户的一行输入，然后计算并输出小写字母的数量。这是我到目前为止所拥有的，但它并没有做它应该做的事情。

```
#include <fstream>
#include <iostream>
#include <cctype>
#include <string>

using namespace std;

int main(){
    char text;
    int count = 0;
    cout << " Enter one line of text: ";

    do 
    {
        cin.get(text);

        while(text!='\n')
        {
            if(islower(text))
            count++;
        }
    } while(text!='\n');

    cout << count << "\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T01:50:42.193

问题在于输入：您输入了不同的字符，但会跳过空格。

您可以使用`std::getline`一次获取一行输入：

```
#include <algorithm>
#include <iostream>
#include <cctype>
#include <string>

using namespace std;

int main()
{
    cout << " Enter one line of text: ";
    string s;
    if(getline(cin, s))
    {
        size_t count = count_if(s.begin(), s.end(), 
               [](unsigned char ch) { return islower(ch); });
        cout << count << "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T01:49:07.833

您创建一个无限循环：

```
while (text != '\n') {
    ...
} 
```

如果`text`（对一个字符有点用词不当）碰巧与 '\n' 不同，它将永远持续下去。作为一般准则，每当您创建循环时，您都需要验证循环体是否以某种方式在循环结束时取得进展并且到达循环结束（当然，除非您打算创建一个无限lop）你可能只是想摆脱它`while (...)`，只保留身体。

请注意，外部循环应该有两个终止条件：

1.  如果您到达一行的末尾，它应该终止。
2.  如果您到达输入的末尾，它应该终止：这不一定由换行符终止。

如果我要编写循环，它看起来像这样：

```
for (std::istreambuf_iterator<char> it(std::cin), end; it != end && *it != '\n'; ++it) {
    // do something with the `char` obtained from `*it`
} 
```

还值得注意的是，您需要确保将正值传递给`islower()`（或来自 的任何其他函数`<cctype>`）：有些系统`char`已签名，例如，`ü`以我的名义将转换为负值，导致调用时未定义的行为`islower('ü')`。避免这个问题的方法是在将其传递给函数之前将其转换`char`为an ：的位模式与（假设是类型）的位模式相同。`unsigned char``<cctype>``static_cast<unsigned char>(c)``c``c``char`

坚持使用`while`-loop 读取 a的原始方法`char`，基本循环看起来像这样：

```
while (std::cin.get(text) && text != '\n') {
    if (std::islower(std::static_cast<unsigned char>(text))) {
        ++count;
    }
} 
```

一般来说，我发现-loops 很少不会在生产代码中存活下来，这也不例外：如果可以成功读取`do ... while`，您只想进入循环。`char`由于换行符不是小写字母，因此也可以直接放入条件中。对于 ASCII 字符`std::islower(text)`可以工作，但为了使代码更可靠，我添加了一个演员表以`unsigned char`确保事情不会中断。最后，具有讽刺意味的是，增加变量的 C++ 习语是预增量，`++count`而不是`count++`. 主要用途是，如果应用它的类型不完全是微不足道的，那么它会更有效。由于 C++ 使用大量递增的迭代器，因此通常使用预递增。

# symfony - Symfony2：如何将结果集呈现到输出中的 HTML 分组记录中

> ID：13547534
> 
> 赞同：0
> 
> 时间：2012-11-25T01:45:05.003
> 
> 标签：symfony, doctrine, doctrine-orm, group-by, twig

我有一个如下的教义查询......

```
$qb = $this->createQueryBuilder('s')
            ->select('s, csr, c')
            ->Join('s.classesreference', 'csr')
            ->Join('csr.Class', 'c')
            ->where('c.id = :id and csr.SpellLevel = :level')
            ->setParameter('level', $level)
            ->setParameter('id', $Class->getId())
            ->orderBy('s.Name','ASC')
            ->orderBy('csr.SpellLevel')
            ->getQuery(); 
```

在我的 Twig 模板中，我想在嵌套的无序列表中显示此查询的结果。

```
<ul>
    <li>Level 0
        <ul>
            <!-- Level zero spells here -->
        </ul>
    </li>
    <li>Level 1
        <ul>
            <!-- Level one spells here -->
        </ul>
    </li>
    <li>Level 2
        <ul>
            <!-- Level two spells here -->
        </ul>
    </li>
    <li>Level 3
        <ul>
            <!-- Level three spells here -->
        </ul>
    </li>
</ul> 
```

`Spell`我只是无法从返回的结果集（本质上是一个对象数组）中弄清楚如何在 twig 中执行此操作

`classesreference`是一个引用表，`Spell`当`CharacterClass`被引用`CharacterClass`记录使用时，它还包含一个拼写级别字段。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T20:36:00.740

好的，在解决 groupBy 的误解之后，让我们深入研究这一点；）

首先，您要实现的是这样的二维数组：

```
array(
    0 => array('Spell1', 'Spell4'),
    1 => array(),
    2 => array('Spell3'),
    3 => array('Spell2'),
); 
```

第一个数组将包含每个法术级别和一个法术数组。

这不能仅用 MySQL 完成。MySQL 返回行，因此无法编写一个查询来为您提供完美的数组。因此，您要做的是编写一个查询，以返回所有法术及其等级。由于我无法完全掌握您的表格设计，以下需要一些工作，但它可能会让您有所了解：

```
$qb = $this->createQueryBuilder('s')
            ->select('s, csr, c')
            ->Join('s.classesreference', 'csr')
            ->Join('csr.Class', 'c')
            ->where('c.id = :id')
            ->setParameter('id', $Class->getId())
            ->orderBy('s.Name','ASC')
            ->orderBy('csr.SpellLevel')
            ->getQuery();
$resultArray = $qb->getArrayResult();

$spellLevelArray = array();
foreach($resultArray AS $result) {
    $spellLevel = $result['spelllevel'];
    $spellLevelArray[$spellLevel][] = $result['spell'];
} 
```

如您所见，foreach 用于遍历每一行（即一个法术）并将法术添加到与级别对应的内部数组中。如前所述，您可能需要更改一些内容（例如法术级别和存储在数组中的内容），但总体思路应该很清楚。

# regex - 将主页重定向到子目录中的页面，掩码 url

> ID：13547540
> 
> 赞同：2
> 
> 时间：2012-11-25T01:46:14.590
> 
> 标签：regex, wordpress, .htaccess, redirect, rewrite

我正在使用wordpress。

我希望我网站的域根显示另一个页面的内容，同时仍将我的域根显示为 url。

示例：“http://www.mysite.com”显示“http://www.mysite.com/blogs/home”的内容，但用户仍然在地址栏中看到“http://www.mysite.com” .

我已经设法使重定向工作，但它没有掩盖 URL。它本质上是重定向。

这是我现在在我的 htaccess 中的内容：

```
RewriteEngine on
RewriteRule ^\/?$ \/blogs\/home\/ [R,NC] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:50:41.037

R 选项强制进行外部重定向。试试`[NC]`吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:53:53.657

这种方式怎么样。

1.  将 index.php 和 .htaccess 文件放在域的根目录中。
2.  编辑 index.php 以从您放置的任何位置获取“wp-blog-header.php”文件。例如，如果您的 wordpress 文件位于 blogs/home/ 子目录中，则将位于根目录中的 index.php 文件更改为 require('./blogs/home/wp-blog-header.php')。

3.  忘记重定向问题。

我认为这是最简单的方法。还是我误解了你的问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T03:56:24.673

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^$ /blogs/home [NC,P] 
```

PS：确保您在 Apache 配置中启用了 mod_proxy。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T15:05:24.960

这个问题有一个非常简单的解决方案。事实上，wordpress 可以选择完成这项任务。

转到**仪表板->设置->阅读->首页显示**

选择一个静态页面作为首页。

# c# - AWS S3 transferutility Upload 从不上传，但显示完成且没有错误

> ID：13547542
> 
> 赞同：5
> 
> 时间：2012-11-25T01:46:52.907
> 
> 标签：c#, amazon-s3, amazon-web-services

我收到了很多没有上传到我的 AWS 存储桶的文件，但下面的代码始终显示完整。有谁知道这是怎么回事？如果上传总是完成，我应该如何确定上传是否失败？我确实看到了一些关于使用 transferutility.EndUpload 的信息，但我不确定如何使用它。另外我将如何实施重试？将对象状态传递给 BeginUpload？有什么帮助吗？

```
public class S3Upload
{
    private string awsAccessKeyId = "XXXXXX";
    private string awsSecretAccessKey = "XXXXXX";
    private string bucketName = System.Configuration.ConfigurationManager.AppSettings.Get("BucketName");
    private Amazon.S3.Transfer.TransferUtility transferUtility;
    private static log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    public S3Upload()
    {
        // Initialize log4net.
        log4net.Config.XmlConfigurator.Configure();
        this.transferUtility = new Amazon.S3.Transfer.TransferUtility(awsAccessKeyId, awsSecretAccessKey);
        log.Info("S3 instance initiated");

    }

    public void UploadFile(string filePath, string toPath)
    {

        try
        {
            AsyncCallback callback = new AsyncCallback(uploadComplete);

            log.Info("S3 upload started...");
            log.InfoFormat("S3 filePath: {0}", filePath);
            log.InfoFormat("S3 toPath: {0}", toPath);

            var uploadRequest = new Amazon.S3.Transfer.TransferUtilityUploadRequest();
            uploadRequest.FilePath = filePath;
            uploadRequest.BucketName = bucketName;
            uploadRequest.Key = toPath;
            uploadRequest.StorageClass = Amazon.S3.Model.S3StorageClass.ReducedRedundancy;
            uploadRequest.AddHeader("x-amz-acl", "public-read");
            transferUtility.BeginUpload(uploadRequest, callback, null);
        }
        catch (AmazonS3Exception amazonS3Exception)
        {
              log.ErrorFormat("An Error, number {0}, occurred when creating a bucket with the message '{1}", amazonS3Exception.ErrorCode, amazonS3Exception.Message);    
        }
    }

    private void uploadComplete(IAsyncResult result)
    {
        var x = result;

        if (x.IsCompleted)
        {
            log.Info("S3 upload completed...");

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T17:13:38.427

找到了解决办法！我添加了 transferUtility.EndUpload(ar) ，如果出错，它会将异常写入我的日志并重试 put 请求。

发出请求 PutObject 时出错。System.IO.IOException：无法将数据写入传输连接：现有连接被远程主机强行关闭。--->

```
public class S3Upload
{
    private string awsAccessKeyId = "XXXXX";
    private string awsSecretAccessKey = "XXXXX";
    private string bucketName = System.Configuration.ConfigurationManager.AppSettings.Get("BucketName");
    private Amazon.S3.Transfer.TransferUtility transferUtility;
    private static log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

    public S3Upload()
    {
        // Initialize log4net.
        log4net.Config.XmlConfigurator.Configure();
        this.transferUtility = new Amazon.S3.Transfer.TransferUtility(awsAccessKeyId, awsSecretAccessKey);
        log.Info("S3 instance initiated");

    }

    public void UploadFile(string filePath, string toPath)
    {

        try
        {
            AsyncCallback callback = new AsyncCallback(uploadComplete);

            log.Info("S3 upload started...");
            log.InfoFormat("S3 filePath: {0}", filePath);
            log.InfoFormat("S3 toPath: {0}", toPath);

            var uploadRequest = new Amazon.S3.Transfer.TransferUtilityUploadRequest();
            uploadRequest.FilePath = filePath;
            uploadRequest.BucketName = bucketName;
            uploadRequest.Key = toPath;
            uploadRequest.StorageClass = Amazon.S3.Model.S3StorageClass.ReducedRedundancy;
            uploadRequest.AddHeader("x-amz-acl", "public-read");
            IAsyncResult ar = transferUtility.BeginUpload(uploadRequest, callback, null);
            transferUtility.EndUpload(ar);
        }
        catch (AmazonS3Exception amazonS3Exception)
        {
              log.ErrorFormat("An Error, number {0}, occurred when creating a bucket with the message '{1}", amazonS3Exception.ErrorCode, amazonS3Exception.Message);
        }
    }

    private void uploadComplete(IAsyncResult result)
    {
        var x = result;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T16:08:28.247

BeginUpload 函数启动一个新线程，该线程启动并执行上传。调用 EndUpload 会导致当前线程阻塞，直到上传完成。此外，EndUpload 函数会捕获您从上传中获得的任何异常。

如果要调用 BeginUpload，则需要从单独的线程调用 EndUpload()，以免阻塞主线程。如果您打算阻塞主线程，只需调用 Upload() 函数而不是 APM 版本。

例如，生成一个新线程，它将等待上传完成。（请注意，它不必执行任何特定操作，只需捕获错误即可。）

```
public void UploadFile(string filePath, string toPath)
{

    try
    {
        AsyncCallback callback = new AsyncCallback(uploadComplete);

        log.Info("S3 upload started...");
        log.InfoFormat("S3 filePath: {0}", filePath);
        log.InfoFormat("S3 toPath: {0}", toPath);

        var uploadRequest = new Amazon.S3.Transfer.TransferUtilityUploadRequest();
        uploadRequest.FilePath = filePath;
        uploadRequest.BucketName = bucketName;
        uploadRequest.Key = toPath;
        uploadRequest.StorageClass = Amazon.S3.Model.S3StorageClass.ReducedRedundancy;
        uploadRequest.AddHeader("x-amz-acl", "public-read");
        IAsyncResult ar = transferUtility.BeginUpload(uploadRequest, callback, null);
        // transferUtility.EndUpload(ar);
        ThreadPool.QueueUserWorkItem(c =>
        {
             try
             {
                 transferUtility.EndUpload(ar);
             }
             catch (AmazonS3Exception ex)
             {
                 // Retry, log the error, etc.
             }
             catch (WebException ex)
             {
                 // Retry, log the error, etc.
             }
         });
    }
    catch (AmazonS3Exception amazonS3Exception)
    {
          log.ErrorFormat("An Error, number {0}, occurred when creating a bucket with the message '{1}", amazonS3Exception.ErrorCode, amazonS3Exception.Message);
    }
} 
```

[此外，该线程检查 WebException。我不知道您是否可以从 Beginupload 获得其中之一，但我正在处理的一些代码似乎在关注这些。（最好安全然后抱歉。）]

另外，我发现您可以使用[CurrPorts Utility](http://www.nirsoft.net/utils/cports.html)对此进行测试。该实用程序可让您终止通往亚马逊的开放端口（尽管它会重试直到其配置的 MaxRetries）。

# c# - 是否有 .NET 函数可以根据条件输出字符串？

> ID：13547547
> 
> 赞同：0
> 
> 时间：2012-11-25T01:47:11.690
> 
> 标签：c#, .net

在 web 开发过程中，有很多场景我想根据条件输出一个字符串（例如 CSS 类）。流行的是：活跃的，甚至，...

在总是在特定条件下重复相同的功能之后，我现在写了一个可重用的功能并想将它添加到我的助手中。像这样：

```
public static string StringOnCondition (condition, returnString) {
    return (condition) ? returnString : "";
} 
```

这样我就可以在这种情况下使用它：

```
 <li class="classRoom">
        <a href="/messages/" class="classRoomName @Helpers.StringOnCondition(Model.Url == "/messages/", "active")">Inbox</a> 
    </li> 
```

但实际上，我不敢相信 .NET 框架中还没有这样的功能。那么我错过了哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:20:01.450

为什么需要一个函数？`?`运营商已经做了你需要的。使用函数的目的是在一个地方实现并在需要的地方使用它，因此如果您更改该函数中的行为，一切都会“更新”。在这里，我看不到为操作员创建函数的意义。你可以只使用`@(Model.Url == "/messages/" ? "active" : string.Empty)`. 它更短，可以满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T01:52:02.733

我采用将使用哪个字符串的逻辑移动到视图模型类的方法。例如：

```
public class EmployeeRowViewModel
{
  public string CssClass {get;set;}
  public Employee Row {get;set;}
} 
```

在构建`RowViewModel`s 时，我为每一行分配正确的类，然后在视图中使用模型时，使用正确的 CSS 类字符串。

通常，当我在视图中看到太多逻辑发生时，我认为这是一种“难闻的气味”，并尝试将逻辑分解到视图模型中。

**更新：**

根据原贴的新场景，我仍然相信逻辑可以移出视图。例如，您可以将计算属性添加到视图：

```
public class EmployeeRowViewModel
{
  public string CssClass {get;set;}
  public string Url {get;set;}
  public string CssActive
  {
    get { return (Url == "/messages/") ? "active" : null; }
  }
  public Employee Row {get;set;}
} 
```

然后将您的视图更新为：

```
<li class="classRoom">
  <a href="/messages/" class="classRoomName @Model.CssActive">Inbox</a> 
</li> 
```

# c++ - C linux代理服务器

> ID：13547550
> 
> 赞同：0
> 
> 时间：2012-11-25T01:47:26.763
> 
> 标签：c++, c, linux, sockets

我正在尝试构建客户端-> 代理服务器-> 服务器应用程序。

我需要代理服务器的帮助，我如何让它现在发送数据到`server`它只能与客户端通信。

这是我的 codef 或`proxy server`，我从一个示例中对其进行了修改。我是新来的。

```
int main(int argc, char *argv[])
{
     int sockfd, newsockfd, portno, pid;
     socklen_t clilen;
     struct sockaddr_in serv_addr, cli_addr;

     if (argc < 2) {
         fprintf(stderr,"ERROR, no port provided\n");
         exit(1);
     }
     sockfd = socket(AF_INET, SOCK_STREAM, 0);
     if (sockfd < 0) 
        error("ERROR opening socket");
     bzero((char *) &serv_addr, sizeof(serv_addr));
     portno = atoi(argv[1]);
     serv_addr.sin_family = AF_INET;
     serv_addr.sin_addr.s_addr = INADDR_ANY;
     serv_addr.sin_port = htons(portno);
     if (bind(sockfd, (struct sockaddr *) &serv_addr,
              sizeof(serv_addr)) < 0) 
              error("ERROR on binding");
     listen(sockfd,5);
     clilen = sizeof(cli_addr);
     while (1) {
         newsockfd = accept(sockfd, 
               (struct sockaddr *) &cli_addr, &clilen);
         if (newsockfd < 0) 
             error("ERROR on accept");
         pid = fork();
         if (pid < 0)
             error("ERROR on fork");
         if (pid == 0)  {
             close(sockfd);
             dostuff(newsockfd);
             exit(0);
         }
         else close(newsockfd);
     } /* end of while */
     close(sockfd);
     return 0; /* we never get here */
}

/******** DOSTUFF() *********************
 There is a separate instance of this function 
 for each connection.  It handles all communication
 once a connnection has been established.
 *****************************************/
void dostuff (int sock)
{
   int n, p;
   char buffer[256];
   char request;
   FILE *file; 
   file = fopen("process.log","a+");

   do
   {
       //here the proxy server receives data from the client
   bzero(buffer,256);
   p = read(sock,buffer,255);
   if (n < 0) error("ERROR reading from socket");

   printf("num: %s\n",buffer);

       //here the proxy servers replies to the client.
   n = write(sock,buffer,sizeof(buffer));

       //here the process should send data to the server
       //...codes i need help with...           

   if (n < 0) error("ERROR writing to socket");
   fprintf(file,"%s\n",buffer); /*writes*/ 

   }while(p != 0); //this runs the process +1 more than it should. wonder why?

   fclose(file);
} 
```

DoStuff() .... 你也可以查看我添加的评论。另外，如何在客户端连接到服务器后立即向客户端发送消息，例如欢迎客户端消息？:)

注意：代理服务器向 HTTP 1.1 服务器发送 GET 请求。

我真的很感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:31:16.827

要连接到服务器，您将不得不调用`socket`然后`connect`将该套接字从代理连接到您的真实服务器。请参阅此处的第 5 节：

[http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)

此外，检查`p`而不是`n`4 行进入你的 do-while 循环`DoStuff()`。

# mysql - MySQL真正的行合并......不仅仅是一个联合

> ID：13547551
> 
> 赞同：16
> 
> 时间：2012-11-25T01:48:18.880
> 
> 标签：mysql, join, merge, union

给定这两个表，我需要什么 mysql 才能达到以下结果：

表格1：

```
+----+-------+
| id | name  |
+----+-------+
|  1 | alan  |
|  2 | bob   |
|  3 | dave  |
+----+-------+ 
```

表2：

```
+----+---------+
| id | state   |
+----+---------+
|  2 | MI      |
|  3 | WV      |
|  4 | FL      |
+----+---------+ 
```

我想创建一个看起来像这样的临时视图

期望的结果：

```
+----+---------+---------+
| id | name    | state   |
+----+---------+---------+
|  1 | alan    |         |
|  2 | bob     | MI      |
|  3 | dave    | WV      |
|  4 |         | FL      |
+----+---------+---------+ 
```

我尝试了一个 mysql union 但以下结果不是我想要的。

```
create view table3 as
(select id,name,"" as state from table1)
union
(select id,"" as name,state from table2) 
```

表3联合结果：

```
+----+---------+---------+
| id | name    | state   |
+----+---------+---------+
|  1 | alan    |         |
|  2 | bob     |         |
|  3 | dave    |         |
|  2 |         | MI      |
|  3 |         | WV      |
|  4 |         | FL      |
+----+---------+---------+ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T02:00:06.823

您需要使用名为 JOIN 的 SQL 运算符来获得所需的内容。

JOIN 是 SQL 语言的基本部分，就像 while 循环适用于其他编程语言一样。

从这里开始： [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

JOIN 与 UNION 的另一种思考方式是：

*   UNION 将行附加在一起。
*   JOIN 将列附加在一起。

例如：

```
SELECT * 
FROM table1
JOIN table2 USING (id); 
```

这是一种*仅*返回两个表中都存在匹配 id 的行的连接样式。但是您想要所有那些在至少一个表或另一个表中存在一行的 id。

```
SELECT * 
FROM table1
LEFT OUTER JOIN table2 USING (id); 
```

这将获取 table1 中的所有行，以及 table2 中的匹配行。但要反过来，我们需要：

```
SELECT * 
FROM table1
RIGHT OUTER JOIN table2 USING (id); 
```

SQL 还定义了一个 FULL OUTER JOIN 可以同时完成这两项工作，但不幸的是 MySQL 还没有实现 SQL 标准的那部分。但是我们可以使用`UNION`来组合这两种类型的连接。默认情况下，联合将消除重复的行。

**更新：** 我解决了这个问题，并让它工作。事实证明，您必须明确命名列，以确保它们在两个联合查询中位于相同的列中。这是从我的终端窗口复制的有效查询：

```
SELECT id, name, state
FROM table1
LEFT OUTER JOIN table2 USING (id)
UNION
SELECT id, name, state
FROM table1
RIGHT OUTER JOIN table2 USING (id); 
```

一般来说，避免使用 是一个好习惯`SELECT *`，这只是一个好主意的情况。

另外，我之前在查询示例中留下了一个多余的分号。那只是我的一个错字。

此查询产生以下输出，从我的终端窗口复制：

```
+----+------+-------+
| id | name | state |
+----+------+-------+
|  1 | alan | NULL  |
|  2 | bob  | MI    |
|  3 | dave | WV    |
|  4 | NULL | FL    |
+----+------+-------+ 
```

PS：谢谢你把问题问的这么清楚！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:01:54.490

你需要`FULL OUTER JOIN`：

```
SELECT coalesce(a.id, b.id), a.name, b.state
FROM table1 a
FULL OUTER JOIN table2 b ON (a.id = b.id) 
```

# jquery - Jquery Mobile - 选项未动态添加

> ID：13547554
> 
> 赞同：0
> 
> 时间：2012-11-25T01:49:00.910
> 
> 标签：jquery, jquery-mobile

我正在使用 jquery mobile 最新版本。我有一个实际上看起来像这样的选择字段：

```
<select id="make">
</select> 
```

我想在上面动态添加选项。所以我使用这段代码：

```
var makeArr = new Array(1, 2, 3, 4, 5);
var parent = $('#make');
$.each(makeArr, function(i, item){
   parent.append('<option value="' + item + '">' + item + '</option>');
}); 
```

我也用过`parent.append('<option value="' + item + '">' + item + '</option>').trigger('create');`，但没什么变化。

我已经通过这种方式添加`<li>`了`<ul>`。但这在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:07:09.263

尝试

```
$("#make").selectmenu('refresh', true); 
```

插入动态内容后。

# grails - 是否在 grails 中使用 getter 和 setter？

> ID：13547563
> 
> 赞同：7
> 
> 时间：2012-11-25T01:50:26.060
> 
> 标签：grails, groovy, setter, getter

如果您在 grails 项目中有一个域类，您还可以使用 getter 和 setter 来编写或读取它们。

例如域类 Book 具有属性：

```
String author 
```

在控制器中，您有一本书，并且您想为这本书设置作者：这适用于直接访问属性或 getter 和 setter 方法，尽管它们不在类中。

```
book.author = "Mike Miller"
book.setAuthor("Mike Miller") 
```

在 groovy & grails 中获取和设置属性的首选方式是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T02:28:11.100

他们是一样的。当您有一个像 的无范围字段`String author`时，Groovy 编译器会将该字段设为私有并为其创建一个 getter 和 setter。但它不会覆盖现有方法，因此您可以定义自己的集合和/或获取它是否不仅仅是设置和获取值。

`book.author = "Mike Miller"`是调用 setter 的 Groovy 语法糖，就像`String authorName = book.author`调用 getter 的语法糖一样。要看到这一点，编辑类并添加一个 setter 或 getter 并添加一个 println，例如

```
void setAuthor(String a) {
   println "Setting author to '$a', was '$author'" 
   author = a
} 
```

您可以使用反编译器查看生成的代码 - 我推荐 JD-GUI， http://java.decompiler.free.fr/?q= [jdgui](http://java.decompiler.free.fr/?q=jdgui)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T06:12:13.500

两者之间没有实际区别，因为它们都编译为相同的代码。使用 grails 的好处之一是不必担心 getter 和 setter 样板代码，因此我强烈建议使用以下代码，因为它提高了可读性和生产力：

`book.author = "Mike Miller"`

# php - RSS 提要中的随机数

> ID：13547569
> 
> 赞同：0
> 
> 时间：2012-11-25T01:51:04.663
> 
> 标签：php, xml, rss, atom-feed

这是我目前的 PHP 文件：

```
<?php header("Content-type: text/xml"); ?>
<?php echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"; ?>
<rss version="2.0">
<channel>
  <title>My Website</title>
  <link>http://www.mywebsite.com</link>
  <description>The Title of My Website</description>
  <pubDate>Tue, 15 Apr 2008 18:00:00 +0000</pubDate>

  <item>
    <title>Website Directory - Page NUMBER</title>
    <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>
    <link>http://www.mywebsite.com/directory/NUMBER</link>
    <description>New update to page NUMBER in the Website Directory.</description>
  </item>

</channel>
</rss> 
```

那里正确地显示了 RSS 提要中的一个条目。但是，我需要它显示 30 个条目，每个条目在项目中显示 NUMBER 的三个位置输入一个随机数。

每个 RSS 项目应在 NUMBER 三个位置输入 1 到 2779503 之间的不同数字。我知道 PHP 有[http://php.net/manual/en/function.rand.php](http://php.net/manual/en/function.rand.php)但我不知道该怎么做是每次加载提要时让它循环 30 个随机数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T01:56:29.583

```
<?php
    foreach( range( 1, 30 ) as $i ):
        $number = mt_rand( 1, 2779503 );
?>
<item>
    <title>Website Directory - Page <?php echo $number; ?></title>
    <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>
    <link>http://www.mywebsite.com/directory/<?php echo $number; ?></link>
    <description>New update to page <?php echo $number; ?> in the Website Directory.</description>
</item>
<?php endforeach; ?> 
```

# winapi - Visual Studio 2010 Arduino 串行通信

> ID：13547574
> 
> 赞同：1
> 
> 时间：2012-11-25T01:52:56.620
> 
> 标签：winapi, visual-c++, opencv, serial-port, arduino

我在 Visual Studio 2010 中使用[OpenCV](http://en.wikipedia.org/wiki/OpenCV)来跟踪对象，我正在尝试向 Arduino 发送一个值以旋转连接到相机的伺服系统。我正在使用[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)。我已经完成了跟踪对象并确定相机需要旋转的方向的[C++代码，但是我无法将此数据发送到 Arduino。](http://en.wikipedia.org/wiki/C++)我目前正在尝试为此使用[RS-232](http://en.wikipedia.org/wiki/RS-232)电缆。我正在使用 B 型 USB 电缆对我的 Arduino 和 RS-232 进行编程，以尝试将数据从 Visual Studio 发送到 Arduino。这是我的 Visual Studio 串行通信代码：

```
 int portspeed(int centerpix, int xmid)
{HANDLE hDevice = CreateFile(L"COM5",GENERIC_READ | GENERIC_WRITE,FILE_SHARE_READ | FILE_SHARE_WRITE,NULL,OPEN_EXISTING,0,0);
    DCB lpTest;
    GetCommState(hDevice,&lpTest);
    lpTest.BaudRate = CBR_9600;
    lpTest.ByteSize = 8;
    lpTest.Parity = NOPARITY;
    lpTest.StopBits = ONESTOPBIT;
    SetCommState(hDevice,&lpTest);
    DWORD btsIO;

    if (centerpix<xmid)
    {
        char test[] = "2";
        WriteFile(hDevice,test,strlen(test),&btsIO,NULL);
        cout << "Turn right " << test << endl;
    }
    else
    {
        char test[] = "3";
        WriteFile(hDevice,test,strlen(test),&btsIO,NULL);
        cout << "Turn left " << test << endl;
    }

    return 0;
} 
```

在 Arduino 代码方面，我有这个，我用它来尝试点亮两个不同的 LED，以查看程序是否能够正确传达它需要旋转的方向：

```
int incomingByte = 0;   // For incoming serial data
void setup()
{
    Serial.begin(9600);     // Opens serial port, sets data rate to 9600 bit/s
}

void loop()
{
    // Send data only when you receive data:
    if (Serial.available() > 0)
    {
        incomingByte = Serial.read();
        if (incomingByte==50)   //if =2
            analogWrite(9,100);
        else
            analogWrite(9,0);
        if (incomingByte==51)   //if =3
            analogWrite(10,50);
        else analogWrite(10,0);
            delay(3000);
    }
    else
        analogWrite(9,255);
} 
```

我的解释是我需要启动 C++ 程序（它通过串行通信连续发送数据），然后将 TX 引脚从 RS-232 连接到 Arduino 上的 RX 引脚（数字 0）。当我尝试将程序上传到 Arduino 时出现错误，

> avrdude：stk500_getsync（）：不同步：resp=0x00

这只发生在我有一根电线进入 RX 引脚时，即使这根电线没有连接任何东西。我相信这个错误的发生是因为 RX 正在寻找波特率为 9600 的输入，但是当 C++ 程序运行并以 9600 的速率发送数据时，它仍然给我这个错误。

如何通过串行通信将值从在笔记本电脑上进行实时图像处理的 Visual Studio 项目发送到 Arduino？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:05:16.383

作为一个[Win32](http://en.wikipedia.org/wiki/Windows_API)经验有限的人（实际上更像是一个[.NET](http://en.wikipedia.org/wiki/.NET_Framework)人），我认为您的问题可能在于写入缓冲。

默认情况下，对文件或端口的写入缓冲在内存中。也许写入永远不会发送到端口，因为您永远不会关闭文件句柄或调用`[FlushFileBuffers][3]`.

尝试在之前添加`return 0;`：

```
//After a time, sensitive write
FlushFileBuffers(hDevice);

//or, more properly for the end of the program.
CloseHandle(hDevice); 
```

# python - Gheat 中的 Python Image.GetPixel

> ID：13547580
> 
> 赞同：1
> 
> 时间：2012-11-25T01:54:35.893
> 
> 标签：python, python-imaging-library

我正在使用并查看扩展此处找到的热图模块：http: [//jjguy.com/heatmap/](http://jjguy.com/heatmap/)。我的 python 知识和经验有限，但我对这种方法的工作原理感到困惑：

```
def _colorize(self, img, size, colors):
    """ use the colorscheme selected to color the 
        image densities  """
    w,h = img.size
    imgnew = Image.new('RGBA', size, (255, 255, 255, 0))
    imgpix = img.load()
    imgnewpix = imgnew.load()
    for x in xrange(w):
        for y in xrange(h):
            pix = imgpix[x,y]
            if isinstance(pix, (list, tuple)):
                pix = pix[3]
            rgba = list(colors[pix])
            if pix <= 254: 
                alpha = self.opacity
                rgba.append(alpha)
            else:
                rgba = (255, 255, 255, 0)

            imgnewpix[x,y] = tuple(rgba)
    return imgnew 
```

更具体地说，我不明白为什么

```
pix = imgpix[x,y] 
```

返回一个数字，例如 255 而不是一些有用的对象。我知道 pix int 用于引用几行上的数组，我理解这一点，但我真的不明白 pix int 来自哪里？

它显然是 x,y 位置的值，但该值是多少......如果你发现我的漂移 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:05:11.743

Depending on the image mode, the subscript operation will return either a single number or a tuple or list of 3 or 4 numbers. The single number is either a gray value (for mode 'L') or a palette index (for mode 'P'). When multiple numbers are returned they represent the Red, Green, Blue, and optionally Alpha (transparency) values. Each will be a number from 0 to 255 with 0 being black and 255 being full intensity for that color.

# python - Python：NLTK 中的形容词同义词集

> ID：13547581
> 
> 赞同：3
> 
> 时间：2012-11-25T01:54:46.677
> 
> 标签：python, nlp, nltk

NLTK 中是否有一种方法可以找到描述该词的某些形容词属性？例如，如果我输入“摩天大楼”这个词，就会出现“高”、“结构化”等属性。我对反过来更感兴趣，如果我输入“高”这个词，那么它会列出与其他词的语义关系。

我相信 NLTK 上的属性方法是为此而设计的，但它并不像我上面描述的那样特别有效，这是我正在使用的代码：

```
from nltk.corpus import wordnet as wn
synsets = wn.synsets('skyscraper')
print[str(syns.attributes()) for syns in synsets] 
```

我尝试过使用 part_meronyms 和 attributes 方法，但这并不总是导致单词的形容词属性。我知道其他允许我这样做的 Python 工具，但我现在更愿意只使用 NLTK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T22:27:46.117

使用纯粹的 NLTK，您可以使用自己的函数通过两步过程来实现此目的。

**基本理念**

*   第 1 步：为你的目标词找到所有有意义的**搭配**（“skyscraper”或“tall”）
*   Step 2\. 对于那些你感兴趣的搭配中识别的形容词，解析词性以获得语义关系。

对于第 1 步。这个[关于 Scoring bigrams 的 SO 问题](https://stackoverflow.com/questions/8683588/understanding-nltk-collocation-scoring-for-bigrams-and-trigrams)具有非常相关的定义。你必须调整`BigramAssocMeasures`你的问题。（它使用棕色语料库，但您可以使用许多其他语料库。）

对于第 2 步，您可以使用类似**`pos_tag()`**甚至**`Tree.parse()`**获取您正在寻找的目标形容词的关联。

对于（更简单）和替代方法，[此链接](http://nltk.googlecode.com/svn/trunk/doc/book/ch05.html)具有**`text.similar()`**应该相关的示例。

希望有帮助。

# c# - 根据在另一个查询中找到的相同值从 1 个查询中删除记录

> ID：13547587
> 
> 赞同：1
> 
> 时间：2012-11-25T01:55:35.783
> 
> 标签：c#, linq

因此，我有 2 个`IQueryable<Array>`具有通用字符串类型的查询；我想使用第二个查询来删除第一个使用公共类型的所有记录，只留下第一个查询的结果未找到的记录。不太清楚该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:00:59.363

最容易理解的方法是使用以下方法过滤 ListA 中的项目`Where()`：

```
IQueryable<LISTA> as = db.ListA.Where(x => x.Active);
IQueryable<LISTB> bs = db.ListB.Where(x => x.HadReview);
as = as.Where(a => bs.Any(b => a.LogginID == b.LogginID) == false); 
```

一种可能更有效的方法是使用[Group Join](http://msdn.microsoft.com/en-us/library/bb397905.aspx)：

```
var as = from a in db.ListA.Where(x => x.Active)
         join b in db.ListB.Where(x => x.HadReview) 
             on a.LogginID equals b.LogginID into bs
         where bs.Any() == false
         select a; 
```

**编辑：**如果你有两个不同的 DataContexts 以上将不起作用。这有可能：

```
IQueryable<LISTA> as = db1.ListA.Where(x => x.Active);
IQueryable<LISTB> bs = db2.ListB.Where(x => x.HadReview);
as = as.Where(a => bs.Select(b => b.LogginID).Contains(a.LogginID) == false); 
```

另请参阅：[Linq to SQL - 如何从不同的数据上下文内部连接表？](https://stackoverflow.com/questions/1537805/linq-to-sql-how-to-inner-join-tables-from-different-data-context)

# c# - 在 C# 中绘制三个矩形

> ID：13547592
> 
> 赞同：1
> 
> 时间：2012-11-25T01:56:04.467
> 
> 标签：c#

我有一个类“制作”，将一个矩形绘制到 Form1 类中。

问题是我必须在 form1 的不同位置再创建两个矩形，但我不知道如何在同一个类中再绘制两个矩形

制作.cs：

```
 class Making
{
    public Rectangle[] makingRec;
    private SolidBrush brush;
    private int x, y, width, height;

    public Making()
    {
        makingRec = new Rectangle[7];
        brush = new SolidBrush(Color.Red);

        x = 50;
        y = 50;
        width = 10;
        height = 10;

        for (int i = 0; i < makingRec.Length; i++)
        {
            makingRec[i] = new Rectangle(x, y, width, height);
            x -= 10;
        }

    }

    public void drawMaking(Graphics paper)
    {
        foreach (Rectangle making in makingRec)
        {
            paper.FillRectangle(brush, making);
        }

    }}
} 
```

Form1.cs：

```
 public partial class Form1 : Form
{
    Graphics paper;
    Making making = new Making();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {
        paper = e.Graphics;
        making.drawMaking(paper); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:19:21.463

问题不在于没有绘制矩形，而是所有矩形都在一条线上，所以你最终会得到三个相同高度和颜色的重叠矩形。它们看起来像一个从 x = 30 到 60 的长矩形。

# google-maps-api-3 - Google Maps API InfoBox 插件：一次只显示一个信息框

> ID：13547594
> 
> 赞同：2
> 
> 时间：2012-11-25T01:56:53.173
> 
> 标签：google-maps-api-3, infowindow, infobox

为了获得自定义信息窗口，我第一次使用谷歌地图 API V3 的 InfoBox 插件。我有带有 google 地方 API 内容的信息框在点击时打开。但是当我单击一个新标记时，以前的信息框不会关闭。我只希望一次打开一个信息框。我试图按照以下问题中的指导进行操作：[Google Map V3 - Allow only one infobox to be display at a time](https://stackoverflow.com/questions/10908132/google-map-v3-allow-only-one-infobox-to-be-displayed-at-a-time) in my own code。这是我的代码的相关部分：

```
 var boxText = document.createElement("div");
 boxText.style.cssText = "border: 1px solid black; margin-top: 8px; background: yellow; padding: 5px;";

 var myOptions = {
             content: boxText
            ,disableAutoPan: false
            ,maxWidth: 0
            ,pixelOffset: new google.maps.Size(-140, 0)
            ,zIndex: null
            ,boxStyle: { 
              background: "url('') no-repeat"
              ,opacity: 0.75
              ,width: "280px"
             }
            ,closeBoxMargin: "10px 2px 2px 2px"
            ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
            ,infoBoxClearance: new google.maps.Size(1, 1)
            ,isHidden: false
            ,pane: "floatPane"
            ,enableEventPropagation: false
    };

 var ib = new InfoBox(myOptions);
  var request =  {
      reference: place.reference
};
google.maps.event.addListener(marker,'click',function(e){
    service.getDetails(request, function(place, status) {

      if (status == google.maps.places.PlacesServiceStatus.OK) {
        boxText.innerHTML = '<br><div><div style="font-size: 18px; vertical-align:top; border:2px solid; background-color:; color: #555555;"><b>&nbsp;'+place.name+'</b>';
        if (!!place.website) contentStr += '&nbsp;<a target="_blank" href="'+place.website+'"><img src="img/arrow.png" style="position:absolute; bottom:0px: right:0px; height:22px; width:22px;"></img></a></div></div>';
        ib.close(); 
        ib.open(map, marker); 
      } else { 
        var contentStr = "<h5>No Result, status="+status+"</h5>";
        ib.close(); 
        ib.open(map, marker); 
       }
    });

});
gmarkers.push(marker); 
```

不幸的是，我一次仍然有多个信息窗口。还有另一个选项来设置不需要加载另一个脚本的 google API 信息窗口的样式吗？这将在移动网站上运行，如果有办法只使用 CSS3，那将是更可取的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:10:31.287

[我使用这个例子http://www.geocodezip.com/fredag](http://www.geocodezip.com/fredagsmat_se_infoboxA.html) ​​smat_se_infoboxA.html 解决了这个问题，这个例子来自这个论坛帖子[https://groups.google.com/forum/?fromgroups=#!topic/google-maps -js-api-v3/gLHyTaKlJ2c](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/gLHyTaKlJ2c)。

如果我理解正确，您需要通过将它放在初始化函数之外来使您的信息框变量成为全局变量。在我的情况下，var ib = null;。然后你放置 ib = new InfoBox({}); 在你的初始化函数关闭之前。您如何调用该函数将取决于您的特定 javascript，但请参阅示例以获得一些指导。

# android - 来自异步类的 Android 访问活动

> ID：13547595
> 
> 赞同：-1
> 
> 时间：2012-11-25T01:56:55.963
> 
> 标签：android, android-asynctask, android-activity

我想从异步类访问活动并设置文本。

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Button getBtn = (Button) findViewById(R.id.btn_result);

        getBtn.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                           TextView txt_res = (TextView)findViewById(R.id.txt_Result);
                           new GetText(txt_res).execute(); // Async class
                }
        });
    }
} 
```

//异步类

```
public class GetText AsyncTask<Void, Void, Void>{
    private TextView txt_res;

    public GetText (TextView txt_res) {
        this.txt_res = txt_res;
    }

    @Override
    protected Void doInBackground(Void... params) {
        try {
                     String Result = GetTextFromDb();
        } catch (Exception e) {

        }
        return null;
    }

     @Override
 protected void onPostExecute(Void result)
    {
        try
        {
            Log.v("Success", "Success"); // I see "Success" at Logcat
            txt_res.SetText("Success"); // Textview didn't change
        }catch (Exception e) {
            Log.v("Error", e.getMessage()); // No error at Logcat

        }
    }
} 
```

我重新定义了我的问题。文本视图不会改变。我的错误是什么。

我再次重新定义我的问题。Textview 在两个函数（doInBackground、onPostExecute）上没有改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:32:19.787

你基本上有2个选择。显然，您不能直接从 asych 访问主线程，因此您必须使用正确的格式。

1.  如果任务完成后需要更新文本视图，只需在[onPostExecute中进行更新](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)

2.  如果 textview 正在显示一些中间进度，请使用[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)

编辑：

好的，现在这是您的问题。对于 asycn 任务，您必须从 doInBackground 返回一个值。将类型更改为字符串，并更改 onPostExecute(String result)。Void 意味着你什么也没有返回。您还必须将异步任务顶部的三个参数中的第二个更改为字符串。

另外，方法是 textview.setText(""); 不是 textview.SetText("")。后者不应该编译

# java - Java：如何初始化一个固定长度的列表列表？

> ID：13547596
> 
> 赞同：2
> 
> 时间：2012-11-25T01:57:00.113
> 
> 标签：java, sql, list, fixed-length-record

我有一个 String[] 列表，其中包含从数据库返回的一些数据

```
List<String[]> x; 
```

现在对于每个“x”，我必须存储它的相对 Y。（想象一下“x”包含从“SELECT DISTINCT xColumn1，xColumn2 FROM table”返回的元素，现在对于每个元素，我必须存储来自另一个查询的数据）。

Y 的元素将存储在这里：

```
List<List<String[]>> yElements; 
```

我读过我可以声明一个固定长度的列表，但我不知道如何。这就是我所做的：

```
yElements = Arrays.asList(new List<String[]>[x.sixe()]); 
```

Netbeans 告诉我“通用数组创建”错误。

我还想告诉你，我必须有一个固定长度的列表来将一个 String[] 列表存储在这个列表列表的特定索引中。（如果你能告诉我如何处理一个数组，那就太好了！）谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:57:03.073

您不能使用创建泛型类型数组的实例`new`。

一种替代方法是：

```
import java.lang.reflect.*;
import java.util.*;

public class Test
{
    public static void main( String args[] )
    {
        List<String[]> x = ...;
        List<List<String[]>> yElements = Arrays.asList(
                (List<String[]>[])Array.newInstance(List.class, x.size()));
    }
} 
```

相关问题：[如何在 Java 中创建泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation). （那里的示例是关于创建泛型类型参数数组的实例......但同样的方法适用于此处。）

* * *

但是，我认为这整个问题是基于一个不正确的假设。

> 我还想告诉你，我必须有一个固定长度的列表来将一个 String[] 列表存储在这个列表列表的特定索引中。

你不必有一个固定大小的列表。从计算的角度来看，您的代码可以与非固定大小的列表一起正常工作......前提是您不添加或删除列表元素。（事实上​​，`Arrays.asList`用于包装数组不会阻止其他一些代码*尝试*添加/删除元素......）无论如何......如果你只是制作实现类型`ArrayList<ArrayList<ArrayList<String>>>`，那么通用数组创建问题就会消失。

另外，我怀疑使用.`x.size()`的大小是不正确的`yElements`。可能的大小`yElements`应该由`x`实例的数量决定，而不是给定`x`实例的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:58:25.523

如果您希望列表的大小绝对固定，则可以使用本机数组。它们可以是多维的，例如您可以拥有`String[][] x`或 `String[][][] y'。

然而，老实说，您的方法有点令人困惑，从设计的角度来看并不那么清晰。

为什么不像评论中所建议的那样，拥有一个具有两列（xColumn1，xColumn2）的对象，然后将 Y 元素放在一个单独的对象中，然后可以与第一个对象相关联？

所以：

```
class XDetails
{
   String xColumn1;
   String xColumn2;

   YDetails relatedY;
   ...
}

class YDetails
{
   ... fields of Y ...

} 
```

然后你可以有一个数组或`List<XDetails>`

# sql - 带有 Do 循环的 SAS If then else 语句

> ID：13547598
> 
> 赞同：0
> 
> 时间：2012-11-25T01:57:18.063
> 
> 标签：sql, sas

我需要分别获得 75 列中 75 个值的百分比。而且我想使用一个do循环，所以我不必硬编码75次。有一些条件，所以会有一个 where 语句。

我没有正确获得 do 循环，但我正在使用以下内容获取百分比

```
case when (SUM(t1.sam)) >0 then
  ((SUM(t1.sam))/(SUM(t1.sam_Threshold)))*100
else 0
end 
```

我尝试了以下，它更好一点：

```
data test;
i_1=4;
i_2=8;
i_3=4;
i_4=8;
V_ANN_V_INSP=24;
run;

%macro loop(); 
%let numcols=4; 
proc sql;
create table test3 as
select V_ANN_V_INSP,
%do i=1 %to &numcols;
(i_&i/V_ANN_V_INSP)*100 as i_&i._perc
%if &i<&numcols %then %do;,
%end;
%end;
from test;
quit;
%mend; 
%loop(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:59:44.967

CASE WHEN 是 SQL 语句，而不是数据步骤语句，因此您不能在此处使用 DO 循环。根据您正在做什么，这里有很多可能的解决方案。发布额外的代码将有助于获得更准确的答案，但我可以给你一些建议。

首先，将其纳入数据步骤。然后你可以使用 do 循环。

```
data want;
set have;
array nums sam1-sam75;
array denoms threshold1-threshold75;
array pct[75];
do _t = 1 to dim(nums);
  pct[_t]=nums[_t]/denoms[_t];
end;
run; 
```

其次，如果您出于某种原因需要在 SQL 中执行此操作，您可以在宏中或在预处理步骤中的数据步骤中写出 SQL 代码。

```
%macro do_sql_st;
  %do _t = 1 to 75;
    case when (SUM(t1.sam&_t.)) >0 then
  ((SUM(t1.sam&_t.))/(SUM(t1.sam_Threshold&_t.)))*100
else 0
end
as pct&_t.
%end;
%mend do_sql_st;

proc sql;
select %do_sql_st from t1 where ... ;
quit; 
```

这些不是非常灵活。除非您有非常明确命名的变量，否则它们不会按原样工作。我怀疑您更有可能想要进行某种数据步骤预处理，但是如果没有关于变量如何命名的更多细节（即，它们之间是否存在关系），这很难解释。

# html - 如何获得间距元素的跨浏览器一致性？

> ID：13547603
> 
> 赞同：-1
> 
> 时间：2012-11-25T01:58:02.407
> 
> 标签：html, css, cross-browser

我写了一个小应用程序，它是一个顶部带有几个徽标的图像滑块。间距对于这个项目非常重要，而且跨浏览器是不一致的。我不知道如何解决这个问题，我真的很紧张。

它应该是这样的：http: [//i.imgur.com/ycyeH.jpg](http://i.imgur.com/ycyeH.jpg)

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:16:08.123

我检查了您的 CSS，但在其中看不到任何 CSS 重置语句。当涉及到未声明的边距或填充等时，不同的浏览器有不同的默认值。您可以在顶部自己插入一些语句，例如

```
* {margin: 0px; padding: 0px} 
```

但可能还有其他问题，例如管理溢出的不同方式等。

所以也许最好的选择是从一个库中包含一个 CSS 重置，例如

*   [http://html5boilerplate.com/](http://html5boilerplate.com/)（我最喜欢的）

*   或[http://html5reset.org/](http://html5reset.org/)（我认为这个更轻量级，即使它没有附带所有的花里胡哨）。

但是，下次尝试按照其他答案中的建议使用 jsfiddle，或者只是在帖子中学习如何在此处包含代码，因此我们无需下载档案即可查看您的代码。

# django - 如何使用 Django 和 Mongodb 为 PhoneGap 应用程序构建 RESTful Webservice API？

> ID：13547607
> 
> 赞同：0
> 
> 时间：2012-11-25T01:58:18.350
> 
> 标签：django, tastypie, mongoengine

我想构建一个 RESTful webservice api 处理 phonegap 应用程序请求。我熟悉 Python 和 Django。

Restful webservice 是一个类似 Twitter 的社交网络，需要使用 Mongodb。每个人都可以将状态照片从移动应用程序发布到服务器，并且可以关注任何人。我已经阅读了 django-tastypie 来构建 restful api，但我想使用 mongodb。关于 django 的 mongodb 驱动程序我读过 mongoengein。

组合 django + django-tastypie + mongoengien 怎么样？是否适合我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:11:50.570

有这个[https://github.com/mitar/django-tastypie-mongoengine](https://github.com/mitar/django-tastypie-mongoengine)。天气 美味派模型是正确的选择取决于许多因素，但它创建与骨干网一起使用的符合标准的 REST 的能力将继续鼓励使用。扩展也很好——从你在 django 中定义 ModelAdmins 的方式中获得了很多灵感。不必提出自己的身份验证系统或手动集成 oauth 是很有吸引力的（但如果您将其构建到旧应用程序中，有时需要现有的身份验证）。

我尝试使用普通的 mongoengine 实现基本 API 端点，但遇到了许多序列化问题（ObjectID 和许多其他字段）并且无法获取关系或轻松或控制嵌入文档的包含和细节，因此至少值得花一些时间进入评估和修补 Tastypie。就像 mongoengine django 管理员一样 - 您不会找到 100% 无缝重新创建 SQL 版本，但在这里推出您自己的解决方案是一项高水平的工作。

# objective-c - NSPredicateEditor 正在清除其 NSTextField 的值

> ID：13547613
> 
> 赞同：2
> 
> 时间：2012-11-25T01:59:37.533
> 
> 标签：objective-c, xcode, macos, cocoa, nspredicateeditor

我在我的项目中使用 NSPredicateEditor。我的其中一行有 2 个弹出按钮和右侧的文本字段。如果我在文本字段中输入了某些内容，当我从任一弹出按钮中选择不同的菜单项时，文本字段中的文本将被删除。这似乎是默认行为，我不希望删除该文本。我已经尝试了我能想到的一切，但似乎无法处理这个问题。任何想法如何改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:14:44.283

您可以使用 NSUserDefault 保存数据，它将保存和加载数据（除非用户这样做，否则它不会删除您的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T17:37:06.440

通过行模板的`templateViews`属性访问文本字段。

这允许您获取已输入到文本字段中的自定义值。值改变时保存。

```
class YourCustomRowTemplate : NSPredicateEditorRowTemplate {

    func printTextFieldValues() {
        let templateViews = super.templateViews

        for view in templateViews {
            if let textField = view as? NSTextField {
                let text = textField.stringValue

                print("Text in the texfield is: \(text)")
            }
        }
    }

} 
```

`NSPredicateEditorRowTemplate`您可以通过子类化和覆盖方法来以相同的方式设置值`templateViews`。

# c++ - open() 中的正确路径

> ID：13547614
> 
> 赞同：0
> 
> 时间：2012-11-25T02:00:01.237
> 
> 标签：c++, c, file-io, file-descriptor

我正在尝试使用打开文件，`open()`但路径有问题。似乎如果路径以正斜杠开头`/`，它将找不到文件，例如如果路径是`/index.html`那么它不会打开，如果是`index.html`那么它工作正常。

有没有什么办法解决这一问题？我不想解析路径，因为可能有几个正斜杠，如`///index.html`

```
int fd = open(path, O_RDONLY); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:04:59.213

如果路径以斜杠开头`/`（[反斜杠](http://en.wikipedia.org/wiki/Backslash)看起来像`\`），则路径是绝对路径并从文件系统的根目录开始。如果它不以斜杠开头，则它是相对路径。目前尚不清楚您想要做什么，但如果您希望路径是相对的，似乎您可能需要删除前导斜杠。

# jquery - 使用 Jquery 根据 td 值更改行颜色

> ID：13547616
> 
> 赞同：6
> 
> 时间：2012-11-25T02:00:24.670
> 
> 标签：jquery, html, css, jsp

我有一个从数据库中填充的表。我有两个条件需要申请

1.  将斑马条纹应用于表格（已完成）
2.  将行颜色更改为基于红色的 td 值

​`

```
<tr class="alt">
    <td class="status"><input type="text" value="One"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"><input type="text" value="One"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"><input type="text" value="Zero"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"><input type="text" value="One"></td>
    <td class>Received</td>
</tr>
<tr class="alt">
    <td class="status"><input type="text" value="Zero"></td>
    <td class>Received</td>
</tr> 
```

​`

```
$(document).ready(function()
{
$("tr.alt:even").css("background-color", "#f0f8ff");
$("tr.alt:odd").css("background-color", "#fcfceb");
});

$(document).ready(function() {
   $('.status.val():contains("Zero")').closest('tr.alt').css('background-color', '#cd0000');
}); 
```

我想根据输入值更改行颜色

`<td class="status"><input type="text" value="One"></td>`

[这是我到目前为止所做的事情](http://jsfiddle.net/MMEhc/146/)

将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T02:02:20.183

试试这个，

**[现场演示](http://jsfiddle.net/MMEhc/148/)**

```
$('td.status[value=Zero]').css('background-color', 'red'); 
```

**编辑：基于评论和OP的变化**

要改变整体`row with the given criteria of td`，你可以这样做。

**[现场演示](http://jsfiddle.net/MMEhc/172/)**

```
$('td.status[value=Zero]').closest('tr').css('background-color', 'red'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T02:28:42.880

要更改 tr（您使用的是 v 1.6.4 而不是 latest，所以我们需要 bind 而不是 on）

```
$(document).ready(function(){

    $("tr.alt:even").addClass("even");
    $("tr.alt:odd").addClass("odd");
    $('td.status input').bind('change keyup', function(){
        var tr=$(this).closest('tr');

        if ($(this).val()=='Zero') tr.addClass('zero');       
        else tr.removeClass('zero');

    }).trigger('change'); // the trigger is to run this action on load
});
​
tr.odd
{
    background-color:#fcfceb;
}

tr.even
{
    background-color:#f0f8ff;
}

tr.odd.zero
{
    background-color:#ff0000;
}
tr.even.zero
{
    background-color:#cc0000;
} 
```

不过，您的 HTML 有点混乱。您缺少引号并且`<td class>`无效。

[http://jsfiddle.net/MMEhc/158/](http://jsfiddle.net/MMEhc/158/)

编辑：更新版本以适应手动更改的值，而不仅仅是输出的值（正如我理解的问题）

[http://jsfiddle.net/MMEhc/159/](http://jsfiddle.net/MMEhc/159/)

您会看到我将背景颜色从 HTML 中移到 CSS 中，以便于操作。我还调整了偶数行或奇数行的红色。

# java - Java - 查找数组中的高数和低数

> ID：13547618
> 
> 赞同：3
> 
> 时间：2012-11-25T02:00:29.553
> 
> 标签：java

我正在尝试查找数组中的高数和低数，但我不确定为什么我的代码无法正常工作。它给了我 0 和 56 的输出。我明白为什么它给了 0，但是 56 是从哪里来的？

```
package test;

public class Test {

    public static void main(String[] args) {
        int[] numbs = { '2', '4', '2', '8', '4', '2', '5'};

        int count = 0;
        int low = 0;
        int high = 0;

        while(count < numbs.length)
        {
             if(numbs[count]< low) {
                low = numbs[count];
            }

            if(numbs[count]> high) {
                high = numbs[count];
            }

            count++;   
        }

        System.out.println(low); 
        System.out.println(high);           

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T02:01:49.527

您需要从`low`足够低的位置开始；目前，您从零开始 - 太低而无法“捕捉”数组的最低元素。

有两种方法可以解决这个问题：

*   使用`Integer.MAX_VALUE`and`Integer.MIN_VALUE`开始`high`and `low`, 或
*   使用数组的初始元素同时启动`high`和`low`，然后从第二个元素开始处理数组。

* * *

```
int low = Integer.MAX_VALUE;
int high = Integer.MIN_VALUE; 
```

* * *

PS您会发现打印出奇怪的数字，因为您使用的是字符而不是整数：

```
int[] numbs = { 2, 4, 2, 8, 4, 2, 5}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T02:04:04.603

另外..它可能正在打印ASCII表示...使用实际整数（我不确定您是否有意使用字符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T02:14:41.143

`'8'`是`char`字面意思，而不是`int`. Java 语言规范[定义](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1) `char`如下：

> 整数类型是 byte、short、int 和 long [...] 和 char，它们的值是代表 UTF-16 代码单元的 16 位无符号整数。

如果您在预期的`char`地方使用 a，则将隐式转换为。由于是数字类型，这将保留其数值，即其 UTF-16[代码点](http://en.wikipedia.org/wiki/Code_point)。的 utf-16 码位是 56。`int``char``int``char``8`

将 char 视为数字类型可能很有用。例如，我们可以通过以下方式计算字母表中的第 n 个字母

```
char nthLetter = (char) `A` + n; 
```

或通过以下方式查找数字的数值

```
if ('0' <= digit && digit <= '9')
    return value = digit - '0';
else
    throw new IllegalArgumentException(digit); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T02:09:12.590

您在数组初始化块中使用`char`s 而不是`int`s，这会立即转换为`int`s 以适合`int[]`数组，但不要使用其实际值，而是使用*unicode*值，其中：2 = 52 和 8 = 56。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T02:04:24.330

您应该将`low`和设置`high`为数组第一个位置的值。

```
int low = numbs[0];
int high = numbs[0]; 
```

如果第一个位置确实是最低值，它将永远不会被交换，否则它将与较低的数字交换，最高的数字也会发生同样的情况。

你想要一个整数数组，你应该像这样声明：

```
int[] numbs = {2, 4, 2, 8, 4, 2, 5}; 
```

您将获得`56`最高值，因为根据 ASCII 表，char '8' 的十进制表示是`56`.

# android - Android麦克风缓冲区总是半空？

> ID：13547622
> 
> 赞同：1
> 
> 时间：2012-11-25T02:01:06.653
> 
> 标签：android, audio

我正在尝试用麦克风输入填充缓冲区并分析内容。我创建我的缓冲区：

```
 int bufferSize=AudioRecord.getMinBufferSize(8000,AudioFormat.CHANNEL_IN_MONO,
            AudioFormat.ENCODING_PCM_16BIT);
    short[] buffer1 = new short[bufferSize]; 
```

然后在一个名为 Recorder 的单独类中，我有以下相关代码：

```
public short[] fillBuffer(short[] audioData, int bufferSize) {

    AudioRecord recorder = new AudioRecord(AudioSource.MIC, 8000, AudioFormat.CHANNEL_IN_MONO,
            AudioFormat.ENCODING_PCM_16BIT, bufferSize); // instantiate the
                                                            // AudioRecorder

    if (recorder.getRecordingState() == android.media.AudioRecord.RECORDSTATE_STOPPED)
        recorder.startRecording(); // check to see if the Recorder
                                    // has stopped or is not
                                    // recording, and make it
                                    // record.

    recorder.read(audioData, 0, bufferSize); // read the PCM
                                                // audio data
                                                // into the
                                                // audioData
                                                // array

    if (recorder.getState() == android.media.AudioRecord.RECORDSTATE_RECORDING)
        recorder.stop(); // stop the recorder

    return audioData;

} 
```

然后，当我打电话时：

```
recorder.fillBuffer(buffer1, bufferSize); 
```

并记录输出，它总是显示缓冲区中有一半似乎是有效的音频数据，但一半是零。

创建一个正常大小一半的缓冲区会引发错误，所以我知道它实际上是在存储零。这不仅仅是缓冲区大小的一些奇怪之处。我在这里做明显错误的事情吗？请记住，这是我的第一个 Android 应用程序，尽管我对 Java 非常熟悉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:47:08.537

我遇到了同样的问题，我认为是因为：

*   getMinBufferSize 返回大小（以字节为单位）
*   AudioRecord 构造函数接受以字节为单位的大小。

*   读取功能重载，可以接受字节和短路。您的 audioData 变量很短，因此它也期望缓冲区大小也很短，唯一的问题是您现在以字节为单位指定缓冲区大小，因此实际上指定的缓冲区大小是两倍大！（短 = 2x 字节）

我所做的是在读取函数中将缓冲区大小除以 2。它似乎在这里解决了它，但我必须更好地测试它。

希望这可以帮助 ;）

干杯，

马塞尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T07:05:24.130

我实际上认为我可能已经解决了这个问题。我之前使用 Windows WaveIn 在 C++ 中编写了这个，并且我使用了一个短的 int 数组作为缓冲区，所以我很自然地尝试在这里这样做。不过，在再次阅读文档后，看起来我需要一个 byte[] 数组。改了之后，好像可以了。不过谢谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T02:20:24.277

的[文档`AudioRecord.read`](http://developer.android.com/reference/android/media/AudioRecord.html#read%28byte%5B%5D,%20int,%20int%29)似乎表明它返回读取的字节数。您似乎没有对 的返回值做任何事情`AudioRecord.read`，所以也许您只是在读取已用缓冲区的末尾。

如果要填充缓冲区，请更改`AudioRecord.Read`为：

```
int offset = 0, read = 1;
while (offset < bufferSize)
{
    read = recorder.read(audioData, offset, bufferSize);
    offset += read;
    if (read <= 0) break;
} 
```

# visual-studio-2008 - 错误 LNK2019：函数 _main 中引用的未解析的外部符号 _cblas_dgemm

> ID：13547627
> 
> 赞同：4
> 
> 时间：2012-11-25T02:02:12.487
> 
> 标签：visual-studio-2008

我在 Visual Studio C/C++ 编译器之上使用英特尔数学内核库 (MKL)。我已经设置了我的附加包含目录、附加库目录、附加依赖变量以链接到 MKL 库，但是当我运行矩阵乘法示例代码时，我仍然遇到链接错误，谁能告诉我我在那里错过了什么？

```
#define min(x,y) (((x) < (y)) ? (x) : (y))
#include <stdio.h>
#include <stdlib.h>
#include "mkl.h"

int main()
{
double *A, *B, *C;
int m, n, p, i, j;
double alpha, beta;
m = 2000, p = 200, n = 1000;
alpha = 1.0; beta = 0.0;

A = (double *)mkl_malloc( m*p*sizeof( double ), 64 );
B = (double *)mkl_malloc( p*n*sizeof( double ), 64 );
C = (double *)mkl_malloc( m*n*sizeof( double ), 64 );
if (A == NULL || B == NULL || C == NULL) {
  printf( "\n ERROR: Can't allocate memory for matrices. Aborting... \n\n");
  mkl_free(A);
  mkl_free(B);
  mkl_free(C);
  return 1;
}

printf (" Intializing matrix data \n\n");
for (i = 0; i < (m*p); i++) {
    A[i] = (double)(i+1);
}

for (i = 0; i < (p*n); i++) {
    B[i] = (double)(-i-1);
}

for (i = 0; i < (m*n); i++) {
    C[i] = 0.0;
}

printf (" Computing matrix product using Intel® MKL dgemm function via CBLAS interface \n\n");
cblas_dgemm(CblasRowMajor, CblasNoTrans, CblasNoTrans, 
            m, n, p, alpha, A, p, B, n, beta, C, n);

mkl_free(A);
mkl_free(B);
mkl_free(C);

printf (" Example completed. \n\n");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:14:55.013

很难说，因为源代码对于链接器错误并没有那么有用。如果链接器说它找不到函数，那么无论源代码是否成功编译，您都没有链接正确的库。

我要寻找的一件事是，仅指定库*目录*并没有什么好处，因为它们只是在查找库时提供了不同的搜索路径。您仍然需要指定要链接的实际库本身。

根据您问题中的信息，这是可能的原因之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T21:35:55.503

您可以使用[MKL Link line advisor](http://software.intel.com/en-us/articles/intel-mkl-link-line-advisor)。此外，您可以按照[此链接](http://software.intel.com/en-us/articles/intel-math-kernel-library-intel-mkl-compiling-and-linking-with-microsoft-visual-cc)中的步骤将 MKL 与 Microsoft Visual Studio 链接。

# java - 我将如何实现这个 Java 接口？

> ID：13547632
> 
> 赞同：-4
> 
> 时间：2012-11-25T02:03:50.947
> 
> 标签：java, interface, implementation, implements, interface-implementation

我目前处于此问题的设计模式：

实现预定义的 Speaker 接口。创建三个以各种方式实现 Speaker 的类。创建一个驱动程序类，其主要方法实例化其中一些对象并测试它们的能力。

我将如何设计这个程序以及他们进入编码阶段。我想用这三个类来实现 Speaker 接口类：Politician、Lecturer 和 Pastor 类。我想使用的方法是：

`public void speak(); public void announce (String str);`

现在对于我的设计和编码，我将如何声明和对象引用变量并让该变量具有多个引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:10:19.023

真的很简单。简单来说：

```
class ClassA implements Speaker
{
   public void speak(){
          System.out.println("I love Java") ; //implement the speak method
    }
}
class ClassB implements Speaker //follow the example of ClassA
class ClassC implements Speaker //same as above

Speaker[] speakers = new Speakers{new ClassA(),new ClassB(),new ClassC()} ;

for(Speaker speaker: speakers)
   speaker.speak(); //polymorphically call the speak() method defined in the contract. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:11:52.543

请参阅“什么是接口？” [http://docs.oracle.com/javase/tutorial/java/concepts/interface.html](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html) 这有望让您开始了解您正在寻找的基础知识。

实施的开始将类似于以下内容......

```
class Politician implements Speaker
{
  public void speak()
  { 
    // Method implementation
  }
  public void announce (String str)
  {
    // Method implementation
  }
}
class Lecturer implements Speaker
{
  public void speak()
  { 
    // Method implementation
  }
  public void announce (String str)
  {
    // Method implementation
  }
}
class Lecturer implements Speaker
{
  public void speak()
  { 
    // Method implementation
  }
  public void announce (String str)
  {
    // Method implementation
  }
}

public static void main(String [] args)
{
   Speaker s1 = new Politician();
   Speaker s2 = new Pastor();
   Speaker s3 = new Lecturer();
   // Do something...
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T04:05:31.487

使用工厂方法设计模式。在[http://en.wikipedia.org/wiki/Factory_method_pattern查看这篇文章](http://en.wikipedia.org/wiki/Factory_method_pattern)

如果您使用工厂模式，您的代码可能看起来像这样

```
public class SpeakerFactory {

      enum SpeakerEnum { POLITICIAN, LECTURER, PASTOR} ;
      Speaker getSpeaker(SpeakerEnum speakerType) {
          switch (speakerType) {

          case POLITICIAN : return new Politician();

          ....

          }
      } 
```

}

# git - 我可以在 Git 中为克隆的存储库指定一个新的本地存储库吗？

> ID：13547638
> 
> 赞同：0
> 
> 时间：2012-11-25T02:05:18.827
> 
> 标签：git, web-applications, tortoisegit

我在 Visual Studio 2012 中使用 GIT 进行源代码控制创建了一个 Web 应用程序模板，但仅在我的本地计算机上。我现在已准备好使用模板进行部署。

我不想简单地为部署创建一个分支，因为它们永远不会合并回主服务器。相反，我已将模板的存储库克隆到一个新目录中。

我注意到对于第二个目录，Remote 设置为“origin”，并且 URL 指向原始主目录。我希望将其推送到其自己的独立存储库，但我还没有弄清楚如何设置它。此外，我认为存储库的每个克隆都会创建另一个存储库，但如果是这种情况，我看不到它，也不知道如何将其指定为要推送到的存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T02:25:55.103

当您从存储库克隆时，该存储库将被设置为克隆的远程，您需要删除它并添加一个新的远程 url。

要列出您的遥控器，请运行：

```
$ git remote -v
origin  git@github.com:github/git-reference.git (fetch)
origin  git@github.com:github/git-reference.git (push 
```

要删除远程（在您的情况下是其他本地存储库）：

```
git remote rm origin 
```

然后添加新的远程 url（允许你推送）

```
git remote add origin git://github.com/abcdef/new.git 
```

您将必须创建一个新的远程仓库（如果这是您想要的）并获取它的 URL。那么你就可以`git push --all`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T02:23:15.120

据我了解，您想创建一个独立于现有本地存储库的单独本地存储库。

为此，您只需创建一个新目录，在控制台中导航到该空目录，然后通过执行`git init`. 创建存储库后，将所需的所有文件复制到新文件夹中。不过，请确保*不要*复制 .git 目录。然后，您可以通过运行`git add *`和来添加并提交新目录中的所有文件`git commit -m "Initial commit"`。当然可以修改提交消息。

您现在应该有一个单独的存储库，您可以在不影响原始存储库的情况下提交更改。

**编辑：**使用 TortoiseGit 时，您可以通过右键单击新创建的文件夹并选择“ *Git Create Repository Here* ”来创建新的存储库，而不是手动运行控制台中的命令。将文件复制到新存储库后，您可以通过再次右键单击目录并选择“Git commit -> 'master'...”并按照 TortoiseGit 提交对话框进行初始提交。

# c# - 按名称/标题返回窗口句柄

> ID：13547639
> 
> 赞同：16
> 
> 时间：2012-11-25T02:05:41.143
> 
> 标签：c#, window, title, handle

我无法解决这个问题。我收到一个错误：

```
The name 'hWnd' does not exist in the current context 
```

这听起来很简单，可能是......抱歉问了这么明显的问题。

这是我的代码：

```
public static IntPtr WinGetHandle(string wName)
{
    foreach (Process pList in Process.GetProcesses())
    {
        if (pList.MainWindowTitle.Contains(wName))
        {
            IntPtr hWnd = pList.MainWindowHandle;
        }
    }
    return hWnd;
} 
```

我尝试了许多不同的方法，但都失败了。提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-25T02:10:08.847

更新：有关更优雅的方法，请参阅[Richard 的答案。](https://stackoverflow.com/a/45566499/156755)

不要忘记你是`hWnd`在循环内声明你——这意味着它只在循环内可见。如果窗口标题不存在怎么办？如果你想用 a 来做，`for`你应该在循环外声明它，将它设置在循环内，然后返回它......

```
IntPtr hWnd = IntPtr.Zero;
foreach (Process pList in Process.GetProcesses())
{
    if (pList.MainWindowTitle.Contains(wName))
    {
        hWnd = pList.MainWindowHandle;
    }
}
return hWnd; //Should contain the handle but may be zero if the title doesn't match 
```

或者以更 LINQ-y 的方式....

```
IntPtr? handle = Process
    .GetProcesses()
    .SingleOrDefault(x => x.MainWindowTitle.Contains(wName))
    ?.Handle;
return handle.HasValue ? handle.Value : IntPtr.Zero 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-02-07T14:54:31.390

作为解决此问题的一个选项：

```
[DllImport("user32.dll")]
private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

public IntPtr GetHandleWindow(string title)
{
    return FindWindow(null, title);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-08T10:58:58.830

迟到了几年，但正如其他人所提到的，范围`hWnd`只是在`foreach`循环中。

但是值得注意的是，假设您对该功能没有做任何其他事情，那么其他人提供的答案存在两个问题：

1.  该变量`hWnd`实际上是不必要的，因为它仅用于一件事（作为 的变量`return`）
2.  该`foreach`循环效率低下，因为即使您找到了匹配项，您仍会继续搜索其余进程。实际上，它会返回找到匹配的最后一个进程。

假设您不想匹配最后一个进程（第 2 点），那么这是一个更清洁、更高效的函数：

```
public static IntPtr WinGetHandle(string wName)
{
    foreach (Process pList in Process.GetProcesses())
        if (pList.MainWindowTitle.Contains(wName))
            return pList.MainWindowHandle;

    return IntPtr.Zero;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-25T02:13:12.333

因为您`hWnd`在 if 块内声明，所以它外部的 return 语句无法访问它。有关说明，请参见[http://www.blackwasp.co.uk/CSharpVariableScopes.aspx](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)。

您提供的代码可以通过移动 hWnd 变量的声明来修复：

```
public static IntPtr GetWindowHandleByTitle(string wName)
{
    IntPtr hWnd = IntPtr.Zero;
    foreach (Process pList in Process.GetProcesses())
    {
        if (pList.MainWindowTitle.Contains(wName))
        {
            hWnd = pList.MainWindowHandle;
        }
    }
    return hWnd;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T02:10:06.647

`hWnd`在`foreach`循环中声明。**它的上下文在`foeach`循环**内。`foreach`要获得它的值，请在循环外声明它。

像这样使用它，

```
public static IntPtr WinGetHandle(string wName){
    IntPtr hWnd = NULL;

    foreach (Process pList in Process.GetProcesses())
        if (pList.MainWindowTitle.Contains(wName))
            hWnd = pList.MainWindowHandle;

    return hWnd;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-10T09:22:29.667

```
#include <windows.h>
#using <System.dll>

using namespace System;
using namespace System::Diagnostics;
using namespace System::ComponentModel;

// get window handle from part of window title
public static IntPtr WinGetHandle(string wName)
{
    IntPtr hwnd = IntPtr.Zero;
    foreach (Process pList in Process.GetProcesses())
    {
        if (pList.MainWindowTitle.Contains(wName))
        {
            hWnd = pList.MainWindowHandle;
            return hWnd;
        }
    }
    return hWnd;
}

// get window handle from exact window title
[DllImport("user32.dll")]
private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

public IntPtr GetHandleWindow(string title)
{
    return FindWindow(null, title);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-20T11:47:22.157

对于允许您按窗口标题的一部分进行搜索的方法，不区分大小写（将搜索所有窗口，而不仅仅是每个进程的第一个窗口）

```
using System.Runtime.InteropServices;
using System.Text;

var hwnd = GetHandleByTitle("Chrome");
Console.WriteLine(hwnd);

[DllImport("USER32.DLL")]
static extern IntPtr GetShellWindow();

[DllImport("USER32.DLL")]
static extern bool EnumWindows(EnumWindowsProc enumFunc, int lParam);

[DllImport("user32.dll")]
static extern int GetWindowText(IntPtr hWnd, StringBuilder text, int count);

static IntPtr GetHandleByTitle(string windowTitle)
{
    const int nChars = 256;

    IntPtr shellWindow = GetShellWindow();
    IntPtr found = IntPtr.Zero;

    EnumWindows(
        delegate (IntPtr hWnd, int lParam)
        {
                    //ignore shell window
                    if (hWnd == shellWindow) return true;

                    //get Window Title
                    StringBuilder Buff = new StringBuilder(nChars);

            if (GetWindowText(hWnd, Buff, nChars) > 0)
            {
                        //Case insensitive match
                        if (Buff.ToString().Contains(windowTitle, StringComparison.InvariantCultureIgnoreCase))
                {
                    found = hWnd;
                    return true;
                }
            }
            return true;

        }, 0
    );

    return found;
}

delegate bool EnumWindowsProc(IntPtr hWnd, int lParam); 
```

# lisp - Lisp IF-THEN-ELSE Lambda Calc 实现

> ID：13547640
> 
> 赞同：1
> 
> 时间：2012-11-25T02:06:00.830
> 
> 标签：lisp, lambda-calculus

我做了这个 IF-THEN-ELSE Lambda Calculus 代码

```
(defvar IF-THEN-ELSE
    #'(lambda(con)
        #'(lambda(x)
            #'(lambda(y)
                #'(lambda(acc1)
                    #'(lambda (acc2)
                        (funcall (funcall (funcall (funcall con x) y) acc1) acc2))))))
)

(defun IF-THEN-ELSEOP(c x y a1 a2)
    (funcall (funcall (funcall (funcall (funcall IF-THEN-ELSE c) x) y) a1) a2)
) 
```

而这个更大或等于运算符

```
(defvar GEQ
    #'(lambda(p)
        #'(lambda(q)
              (funcall #'LEQOP q p)))
) 
```

LEQOP 是“小于等于”的功能，它工作正常。所以当我这样称呼 IF-THEN-ELSE 时（“六”和“二”是教堂号码）

```
(if-then-elseop GEQ six two (print "THIS") (print "THAT")) 
```

作为输出我有

```
"THIS" 
"THAT" 
"THIS" 
```

我传递的两个函数都被调用了。我怎样才能避免它以仅作为输出“THIS”获得？

我使用的每个函数都会发生这种情况，这很麻烦，因为我想在递归调用中使用 IF-THEN-ELSE，因此必须根据 IF-THEN-ELSE eval 调用一个函数。

任何帮助，将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:25:27.550

`print`通过将它们包装在s 中来传递你的语句`lambda`应该可以工作，但也许值得解释一下为什么这是必要的。

您正在实现 lambda 演算。根据定义，微积分中的所有“事物”都是*高阶函数*。您`six`和`two`您可能定义的任何其他教堂数字也是高阶函数。

`IF-THEN-ELSE`是一个 lambda*抽象*（也是一个高阶函数，因为它的“参数”也是函数）。所以这将是有效的：

```
(if-then-elseop GEQ six two one two) 
```

教会号码在哪里`one`，在哪里。`two`通过这样做，你在 lambda 演算中表达了你在普通 lisp 中的表达方式：

```
(if (>= 6 2) 
  1 
  2) 
```

但我猜你的目标是：

```
(if (>= 6 2) 
  (print "this")
  (print "that")) 
```

*（稍后会详细介绍为什么乱搞`print`可能会分散您的锻炼）*

所以“真实”`1`有一个教堂编码`one`，我假设你已经定义了。这样，它就可以*应用于*lambda 抽象`IF-THEN-ELSE`- 以同样的方式

```
(>= 6 2) 
```

*在lisp 世界*中评估为 TRUE ，您的 lambda 演算实现相同，

```
((GEQ six) two) 
```

将评估为*TRUE 的 lambda 编码*，它再次被编码为高阶函数。

```
(defvar TRUE #'(lambda (x) #'(lambda (y) x)))
(defvar FALSE #'(lambda (x) #'(lambda (y) y))) 
```

所以要记住的规则是，你在 lambda 演算中传递和返回的所有内容都是*函数*：

```
 0 := λf.λx.x             
 1 := λf.λx.f x
 2 := λf.λx.f (f x)
 3 := λf.λx.f (f (f x))
 ... and so on 
```

这就是为什么，如果你这样做：

```
(if-then-elseop GEQ six two 
   #'(lambda () (print "THIS"))
   #'(lambda () (print "THAT"))) 
```

应该管用。*（有点，提前阅读）*

（我会坚持忠实的解释`IF-THEN-ELSE`：

```
(defvar IFTHENELSE 
  #'(lambda (p) 
    #'(lambda (a) 
      #'(lambda (b) (funcall (funcall p a) b))))) 
```

你的情况在哪里`p`……）

作为旁注，值得指出的是，`print`在 lambda 演算中引入和其他“做事”的代码可能并没有太大帮助 - 演算没有定义 IO，并且仅限于对 lambda 表达式的评估。Church 编码是将数字编码为*lambda 项*的一种方式；没有简单而有意义的方式来表示*具有副作用的语句，*例如`(print "hello")`lambda 项。`#'(lambda () (print "THIS"))`有效，但作为一项学术活动，最好坚持只评估事物并获得结果。

*lisp 本身*呢？`if`in lisp 不是一个函数，因此`(if cond then-expr else-expr)`可以按照您期望的方式工作（也就是说，只有一个`then-expr`or`else-expr`将实际被评估），因为它是一种*特殊的形式*。如果您要定义自己的，则需要一个*宏*（正如@wvxvw 正确建议的那样）。但这是另一个话题。

# java - java中的暴力破解双射加密

> ID：13547641
> 
> 赞同：0
> 
> 时间：2012-11-25T02:06:07.507
> 
> 标签：java, loops, encryption

我有一个关于通过使用循环检查某些东西的可能排列的问题：

使用 26 槽字符数组形成加密句子。这个数组包含一个随机字母表（每个字母只出现一次），原始未加密句子的每个字母都被更改为数组在它的第 x 个插槽中的任何字母，x 是字母表中的原始字符位置。

例如，如果加密数组是 {'q','w','e','r','t',...,'m'}，那么消息“abez”将变为“qwtm “ 因为：

```
a is the 1st letter of the alphabet and the 1st slot of the array contained a 'q'
b is the 2nd letter of the alphabet and the 2nd slot of the array contained a 'w'
e is the 5th letter of the alphabet and the 5th slot of the array contained a 't'
... 
```

我想通过检查关键字“早上”的每个排列来暴力破解加密的句子。

我该如何正确地做到这一点？我已经编写了一个方法来检查一个 char[] 是否包含在另一个 char[] 中，但是如何循环遍历 char[] 排列呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:16:55.803

您需要做的是遍历字符串的字符，并将每个字符更改为所有其他字母。您可以拥有一个采用以下参数的函数：

1.  要转换的字符串
2.  已经使用的字母表

并返回所有组合。

然后，您可以为单词中的每个字母递归调用它（早上），它会返回所有可能单词的列表。当递归调用自身，并且“子”函数返回时，父函数循环遍历所有答案，并为每个答案加上自己的字母前缀。它必须为所有字母执行此操作（递归调用和前缀字母），不包括已经使用的字母。

预计这将花费大量时间。

# php - 根据主要内容的高度在wordpress中重复侧边栏项目？

> ID：13547646
> 
> 赞同：0
> 
> 时间：2012-11-25T02:07:08.927
> 
> 标签：php, wordpress, wordpress-theming, sidebar

我有一些项目要显示在我的 wordpress 侧边栏中。假设 div1、div2、div3。

我的客户想重复侧边栏中的项目序列以填充侧边栏的高度以匹配主要内容区域的高度。因此，如果每个 div 的高度为 200px，并且给定页面上主 div 中的内容为 1000px，那么应该有 div1、div2、div3、div1、div2。

我知道如何编写 php 代码和编写循环，但如何知道要运行多少个循环？

虽然我觉得这有点傻，但我的客户对此很坚持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:47:27.533

我想到的一种解决方案是，使用 JavaScript（或 JQuery）来获取主要内容的高度并决定可以在侧边添加多少 DIV。

编辑：这不是有效的方法，但假设在循环中将显示所有侧栏内容。然后，在 javascript 中决定要显示多少个 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:24:33.470

这种类型的效果称为“浮动侧边栏”。我们将提供许多可用的 wordpress 插件。

简单的谷歌搜索将找到解决您的问题。

谷歌搜索结果之一是：

[http://www.strx.it/2010/11/wordpress-floating-sidebar-plugin/](http://www.strx.it/2010/11/wordpress-floating-sidebar-plugin/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T17:16:41.827

我最终用 jQuery 来做这件事。它不是浮动侧边栏，它实际上会根据需要将 img 标签添加到已经存在的任何内容中，直到不再适合为止。

```
<script type="text/javascript">
$(function() {
    var contentHeight = $('#content').height();
    var adList = [
        '<img class="ad" src="----url to first ad -----" />', 
        '<img class="ad" src="----url to second ad -----" />', 
        '<img class="ad" src="----url to third ad -----" />', 
        '<img class="ad" src="----url to fourth ad -----" />', 
        '<img class="ad" src="----url to fifth ad -----" />'
        ];
    var adHeight = 285;
    var numRequiredAds = adList.length;
    var heightDiff = contentHeight - (numRequiredAds * adHeight);
    var numAds = Math.floor(heightDiff/adHeight);
    if (heightDiff > adHeight){
        for (var i = 0; i < numAds ; i++) {
            $('#primary').append(adList[i % adList.length]);
        };
    }

}); 
```

# html - 如何居中对齐菜单中的项目？

> ID：13547649
> 
> 赞同：4
> 
> 时间：2012-11-25T02:07:32.937
> 
> 标签：html, css, menu, html-lists, nav

如何在我的菜单中居中对齐 WITHIN 中的项目？（`li`s）我设法`ul`在我的网站页面中将菜单（）居中，但我无法将菜单中的实际项目（主页、关于等）居中

您可以在此处编辑我的 HTML/CSS：http: [//jsfiddle.net/66reH/](http://jsfiddle.net/66reH/)
查看结果

**CSS/HTML：**

```
#nav {
	font-family: Century Gothic, Arial, Helvetica, sans-serif;
	font-size: 15px;
	color: #fff;
	margin-left:auto;
	margin-right:auto;
	background-color: #eee;
	padding: 5px;
	height: 38px;
	width: 913px;
	font-weight: bold;
	border-style:solid;
	border-width:4px;
	border-color: #000;
}
#nav ul {
	padding: 0px;
	margin-top: 0px;
	margin-right: 0px;
	margin-bottom: 0px;
	margin-left: 170px;
}
#nav ul li {
	list-style-type: none;
	text-align: center;
	float: left;
	margin: 0px;
}
#nav ul li a {
	text-decoration: none;
	color: #000;
	text-align: center;
	display: block;
	padding: 10px;
	margin: 0px;
}
#nav ul li a:hover {
	color: #CD0000;
}
```

```
<div id="nav" align="center">
  <ul>
    <li><a href="#">HOME</a></li>
    <li><a href="#">ABOUT</a></li>
    <li><a href="#">TOUR</a></li>
    <li><a href="#">NEWS</a></li>
    <li><a href="#">PRESS</a></li>
    <li><a href="#">PHILANTHROPY</a></li>
    <li><a href="#">JOBS</a></li>
    <li><a href="#">CONTACT</a></li>
  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T02:14:55.830

*   `#nav`删除div上的 align 属性
*   添加`text-align: center;`到`#nav`选择器 CSS
*   删除选择器 CSS的`margin-left`属性`ul`
*   将 ' 添加`text-align: center;`到`ul`选择器 CSS
*   删除选择器 CSS`float: left;`上的属性`li`
*   添加`display: inline-block;`到`li`选择器 CSS

您那里没有居中的菜单。您只是在 CSS 中的 UL 左侧添加了 170px，因此它*看起来*有点居中。但事实并非如此。

[**在这里演示**](http://jsfiddle.net/66reH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:23:33.937

CSS/HTML

```
#nav {
    font-family: Century Gothic, Arial, Helvetica, sans-serif;
    font-size: 15px;
    color: #fff;
    margin-left:auto;
    margin-right:auto;
    background-color: #eee;
    padding: 5px;
    height: 38px;
    width: 913px;
    font-weight: bold;
    border-style:solid;
    border-width:4px;
    border-color: #000;
}
#nav ul {
    padding: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
#nav ul li {
    list-style-type: none;
    text-align: center;
    float: left;
    margin: 0px;
}
#nav ul li a {
    text-decoration: none;
    color: #000;
    text-align: center;
    display: block;
    padding: 10px;
    margin: 0px;
}
#nav ul li a:hover {
    color: #CD0000;
}
.outer {
    float: right;
    right: 50%;
    position: relative;
}
.inner {
    float: right;
    right: -50%;
    position: relative;
}
.clearboth {
    clear:both;
}
```

```
<div id="nav" align="center">

  <div class="outer">
    <ul class="inner">
      <li><a href="#">HOME</a></li>
      <li><a href="#">ABOUT</a></li>
      <li><a href="#">TOUR</a></li>
      <li><a href="#">NEWS</a></li>
      <li><a href="#">PRESS</a></li>
      <li><a href="#">PHILANTHROPY</a></li>
      <li><a href="#">JOBS</a></li>
      <li><a href="#">CONTACT</a></li>
    </ul>
  </div>
  <div class="clearboth"></div>
</div>
```

[演示](http://jsfiddle.net/rZpfj/22/)

阅读更多关于居中的信息：

[将 div 居中](https://stackoverflow.com/questions/283961/centering-a-div-block-without-the-width)

# asp.net - asp.net 代码隐藏查找 webmethods

> ID：13547650
> 
> 赞同：0
> 
> 时间：2012-11-25T02:07:59.177
> 
> 标签：asp.net

在每个页面背后的代码中，如何使用反射来获取我在该页面上定义的所有 webmethod？

目前我有以下内容并在 Page_Load() 中调用它，但它没有找到我有 webmethod 属性的 1 静态函数。

```
MethodInfo[] methods = this.GetType().GetMethods();
foreach (MethodInfo method in methods)
{
    foreach (Attribute attribute in method.GetCustomAttributes(true))
    {
        if (attribute is WebMethodAttribute)
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:28:10.447

试试这个公共静态：

```
 public partial class Default : System.Web.UI.Page
    {
        public Default()
        {

        }

        protected void Page_Load(object sender, EventArgs e)
        {
            MethodInfo[] methodInfos = typeof(Default).GetMethods(BindingFlags.Public |
                                                      BindingFlags.Static);
            foreach (MethodInfo method in methodInfos)
            {
                foreach (Attribute attribute in method.GetCustomAttributes(true))
                {
                    if (attribute is WebMethodAttribute)
                    {
                    }
                }
            }

        }
        [WebMethod]
        public static void A() 
        { 
        }
    } 
```

为我工作

# ruby-on-rails-3 - 导轨；wicked_pdf 非常慢

> ID：13547653
> 
> 赞同：2
> 
> 时间：2012-11-25T02:08:53.277
> 
> 标签：ruby-on-rails-3, nginx, wkhtmltopdf, pow, wicked-pdf

1.9.2 & rails 3.0.9 wicked_pdf 0.8.0 wkhtmltopdf 0.10.0 rc2 @ /usr/local/bin/ nginx 和 pow

它似乎几乎没有工作，如果有的话，而且当它工作时它非常慢。我做了什么：

捆绑安装后，进入rails控制台进行简单测试：

> pdf = WickedPdf.new.pdf_from_string('你好！') " ***** ** *** ******\"/usr/local/bin/wkhtmltopdf\" -q - -* ****** *** ** ***** "***

 ***就这样挂了很长时间，大概30分钟左右，但最终又回来了。

直接使用 wkhtmltopdf google.com google.pdf 放到 shell 测试 wkhhtmltopdf 并返回：

```
Loading page (1/2)
Printing pages (2/2)                                               
Done 
```

很快，虽然我不得不cntl-c出来

经过一番挖掘，我将 wkhtmltopdf-binary 添加到 gem 文件中，捆绑安装......结果相同

我的 wicked_pdf.rb 初始化程序：

```
WickedPdf.config = {
   :exe_path => '/usr/local/bin/wkhtmltopdf',
   :layout => 'pdf.html',
   :orientation => 'Landscape',
   :page_size => 'Letter'
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T16:02:11.733

看起来您的问题可能与此问题有关：

[https://github.com/mileszs/wicked_pdf/issues/110](https://github.com/mileszs/wicked_pdf/issues/110)

尝试将 wkhtmltopdf 回滚到 0.9.9 版本，如果仍有问题，请告诉我。***

# c - valgrind 需要很长时间才能找到内存泄漏，但程序在没有 valgrind 的情况下运行需要几秒钟

> ID：13547654
> 
> 赞同：2
> 
> 时间：2012-11-25T02:08:57.607
> 
> 标签：c, compilation, valgrind

我正在使用 valgrind 来查找程序上的内存泄漏，但是它需要很长时间和加载。当我在没有 valgrind 的情况下运行程序时，它需要第二个，问题是什么，我应该在代码中寻找什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:11:13.810

据我所知，除非您可以验证无限循环或其他一些运行时错误，否则没有问题...... Valgrind 基本上就像一个运行程序的虚拟机或虚拟执行环境，监视所有变量、内存分配等. 等，因此运行速度会比本机代码慢很多。如果您在调试器中运行程序`gdb`并将其设置为监视每个可写内存位置，您将获得相同的效果。

# android - 未找到 PageTabStrip 类异常

> ID：13547656
> 
> 赞同：5
> 
> 时间：2012-11-25T02:09:18.643
> 
> 标签：android, android-fragmentactivity, android-pageradapter

好吧，我决定只使用pagertitlestrip。我假设我正在使用的支持库不包含 pagertabstrip。我不知道如何解决这个问题，因为我认为我已经正确更新了所有内容。编辑：这不再存在了吗？当我将 PagerTabStrip 更改为 PagerTitleStrip 时，一切正常，但我无法与预期的标题进行交互，因为这就是我想使用 PagerTabStrip 的原因。

我已经回到基础来找到问题的根源。我开始了一个导入 ABS 的新项目。我设置了一个非常简单的 pagerAdapter 和一个简单的片段。我使用了一本公共书籍中的一个例子，但我仍然遇到同样的错误。未找到类异常。找不到 PagerTabStrip。每次发布的堆栈都会出现相同的错误。如果我删除 PagerTabStrip，那么一切正常。

xml

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <android.support.v4.view.PagerTabStrip
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top" />

</android.support.v4.view.ViewPager> 
```

主要活动

```
package com.example.pagetabswipe;

import android.os.Bundle;
import android.support.v4.view.ViewPager;
import android.view.Menu;

import com.actionbarsherlock.app.SherlockFragmentActivity;

public class MainActivity extends SherlockFragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ViewPager pager = (ViewPager)findViewById(R.id.pager);
        pager.setAdapter(new SampleAdapter(getSupportFragmentManager(), this));
    }
} 
```

适配器

```
package com.example.pagetabswipe;

import android.content.Context;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class SampleAdapter extends FragmentPagerAdapter {
    Context ctxt=null;
    public SampleAdapter(FragmentManager fm, Context ctxt) {
        super(fm);
        this.ctxt=ctxt;
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int position) {
        return (EditorFragment.newInstance(position));
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 10;
    }
    @Override
    public String getPageTitle(int position) {
    return(EditorFragment.getTitle(ctxt, position));
    }
} 
```

分段

```
package com.example.pagetabswipe;

import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;
import com.actionbarsherlock.app.SherlockFragment;

public class EditorFragment extends SherlockFragment {
    private static final String KEY_POSITION = "position";

    static EditorFragment newInstance(int position) {
        EditorFragment frag = new EditorFragment();
        Bundle args = new Bundle();
        args.putInt(KEY_POSITION, position);
        frag.setArguments(args);
        return (frag);
    }

    static String getTitle(Context ctxt, int position) {
        return (String.format(ctxt.getString(R.string.hint), position + 1));
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View result = inflater.inflate(R.layout.editor, container, false);
        EditText editor = (EditText) result.findViewById(R.id.editor);
        int position = getArguments().getInt(KEY_POSITION, -1);
        editor.setHint(getTitle(getActivity(), position));
        return (result);
    }
} 
```

错误

```
11-24 18:01:25.630: E/AndroidRuntime(3505): FATAL EXCEPTION: main
11-24 18:01:25.630: E/AndroidRuntime(3505): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.pagetabswipe/com.example.pagetabswipe.MainActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.PagerTabStrip
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1696)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1716)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread.access$1500(ActivityThread.java:124)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:968)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.os.Looper.loop(Looper.java:130)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread.main(ActivityThread.java:3806)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at java.lang.reflect.Method.invokeNative(Native Method)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at java.lang.reflect.Method.invoke(Method.java:507)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at dalvik.system.NativeStart.main(Native Method)
11-24 18:01:25.630: E/AndroidRuntime(3505): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class android.support.v4.view.PagerTabStrip
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at com.example.pagetabswipe.MainActivity.onCreate(MainActivity.java:14)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1660)
11-24 18:01:25.630: E/AndroidRuntime(3505):     ... 11 more
11-24 18:01:25.630: E/AndroidRuntime(3505): Caused by: java.lang.ClassNotFoundException: android.support.v4.view.PagerTabStrip in loader dalvik.system.PathClassLoader[/data/app/com.example.pagetabswipe-2.apk]
11-24 18:01:25.630: E/AndroidRuntime(3505):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.createView(LayoutInflater.java:471)
11-24 18:01:25.630: E/AndroidRuntime(3505):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
11-24 18:01:25.630: E/AndroidRuntime(3505):     ... 20 more 
```

任何帮助都是极好的。我不确定在哪里可以解决这个问题。我觉得我错过了一些非常基本的东西，它阻止在支持库中找到 PagerTabStrip。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T03:42:44.717

对我来说，这最终是由于底层的 actionbarsherlock 库具有旧版本的支持库。

从 Eclipse 中，我从 actionbarsherlock 库项目的构建路径中删除了 android 支持库。

然后我按照这里的建议，[PagerTabStrip 无法解析为 type](https://stackoverflow.com/questions/12756567/pagertabstrip-cannot-be-resolved-to-a-type)，

> 右键单击您的项目..
> 
> 点击“Android工具”->“添加支持库”
> 
> 之后它将下载android-support.jar。并将其添加到您的项目中。
> 
> 之后，您的日食将识别 PagerTabStrip

# php - CodeIgniter 数据库查询到表类

> ID：13547657
> 
> 赞同：1
> 
> 时间：2012-11-25T02:09:52.183
> 
> 标签：php, codeigniter, expressionengine

我目前正在为 ExpressionEngine 开发一个模块，并且有一个关于将数据库查询输出到表类中的快速问题。

我设法做到这一点的唯一方法是通过以下方式：

```
$this->EE=& get_instance();
$this->EE->load->library('table');

    $data = $this->EE->db->query("SELECT * FROM my_table");

    echo $this->EE->table->generate($data); 
```

这很好，但我想在表格中输入一些额外的选项，例如“复制”和“删除”。为此，我需要能够单独输出查询结果。我尝试了以下方法：

```
$this->EE=& get_instance();
$this->EE->load->library('table');

$query = $this->EE->db->query("SELECT * FROM my_table");

if ($query->num_rows() > 0)
  {
    foreach($query->result_array() as $row)
        {
            $this->EE->table->add_row(
                echo $row['id']."<br />\n";
            );
        }
  }

echo $this->EE->table->generate(); 
```

上面我收到以下错误“解析错误：语法错误，意外'回声'（T_ECHO），期待'”。

任何援助将不胜感激。

非常感谢本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:19:56.810

```
 $this->EE->table->add_row($row['id']); 
```

试试那个。

# android - 当我设置最小高度时，我使用什么单位？

> ID：13547661
> 
> 赞同：4
> 
> 时间：2012-11-25T02:11:02.783
> 
> 标签：android, pixel, android-view

我想手动设置 ImageView 的大小。ImageView 对于所有视图都有一个函数[setMinimumHeight](http://developer.android.com/reference/android/view/View.html#setMinimumHeight%28int%29)。我告诉 ImageView 把它放在什么单位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:21:21.030

您正在获取并设置以像素为单位的大小。当`minWidth`属性从 XML 膨胀时，它会从其维度转换为像素测量值：

来自 View.java：

```
case R.styleable.View_minWidth:
    mMinWidth = a.getDimensionPixelSize(attr, 0); 
```

# google-chrome-extension - Chrome 扩展程序 background.html 如何访问当前窗口（用户的内容窗口）

> ID：13547663
> 
> 赞同：0
> 
> 时间：2012-11-25T02:11:28.010
> 
> 标签：google-chrome-extension

**chrome.windows.getCurrent**只会让我得到 background.html 本身。我真正想要的是用户正在浏览的内容窗口。

任何提示，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:49:13.877

当前窗口是包含当前正在执行的代码的窗口。重要的是要意识到这可能与最顶层或焦点窗口不同。例如，假设一个扩展从单个 HTML 文件创建了几个选项卡或窗口，并且该 HTML 文件包含对 chrome.tabs.getSelected 的调用。当前窗口是包含发出调用的页面的窗口，无论最上面的窗口是什么。

如果要获取用户正在浏览的内容窗口，可以使用以下代码：

***popup.js***

```
chrome.windows.getAll({"populate":true},function (windows){
    for(i=0;i<windows.length ;i++){
        if(windows[i].focused){
            for(j=0;j<windows[i].tabs.length;j++){
                if(windows[i].tabs[j].selected && windows[i].tabs[j].active && windows[i].tabs[j].highlighted ){
                    console.log(JSON.stringify(windows[i].tabs[j]));
                }
            }
        }   
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:59:48.397

为什么不使用 chrome.windows.getLastFocused()？

# r - 向量和分量均值的快速拆分

> ID：13547664
> 
> 赞同：0
> 
> 时间：2012-11-25T02:11:42.493
> 
> 标签：r, mean, large-data

我怎样才能写一个快速的函数，这将

*   将数据帧划分为 4 个相同长度的部分 w,x,y,z
*   返回 w,x,y,z 的每个索引平均值，这个平均值应该是`m=(w+x+y+z)/4` （注意这些都是字母所有向量）

示例数据可能如下所示：

```
# my data + noise 4 times
a <- 1:1000 + rnorm(10)
b <- 1:1000 + rnorm(10)
c <- 1:1000 + rnorm(10)
d <- 1:1000 + rnorm(10)

mydf <- data.frame(time=1:4000, measurement=c(a,b,c,d)) 
```

到目前为止，我使用以下缓慢的解决方法。并将该功能应用于`mydf$measurement`

```
AvgOverPeriodsVector <- function(hdata, recordedperiods=4){
  SamplesPerPeriod <- length(hdata)/recordedperiods
  a <- unname(sapply((split(hdata, rep(1:SamplesPerPeriod,recordedperiods))),mean ))
  return(a)
} 
```

我怎样才能提高速度？

想`rowMean`在 [元素方面意味着 R](https://stackoverflow.com/questions/3497464/element-wise-mean-in-r) 更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:49:27.670

刚刚找到关于`.rowMeans`这里的提示。我想这是一个很好的解决方案。

# android - 一个surfaceview可以处理多轮吗

> ID：13547670
> 
> 赞同：0
> 
> 时间：2012-11-25T02:12:15.503
> 
> 标签：android, surfaceview

我有一个我正在开发的游戏，目前我有一个 Surfaceview 类，它处理一轮，在你从屏幕上拍摄正确的图像后结束。我想知道我是否需要另一个类来处理下一轮获取新图像，或者我可以在一轮结束后再次调用这个类并将新数据推送到同一个类。目前我完成了活动然后再次调用自身导致崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:56:02.667

一个`SurfaceView`应该对每个人都足够了。

请确保您将游戏逻辑与 UI 分开，这样当您的用户从一个级别更改到另一个级别时，您的应用程序只会重新加载必要的资源并继续运行，而不是销毁和重新创建所有活动。

# python - AppEngine、python-oauth2 和 Context.IO；消费者密钥未随请求一起发送

> ID：13547671
> 
> 赞同：0
> 
> 时间：2012-11-25T02:12:22.087
> 
> 标签：python, google-app-engine, oauth

我对 AppEngine 和 Context.IO API 有一个非常奇怪的问题。

我正在使用[contextIO2](https://github.com/contextio/contextIO2)库，它使用[python-oauth2](https://github.com/simplegeo/python-oauth2)。

当我通过终端试用库（contextIO2）时，我没有遇到任何问题（或者至少现在还没有。但我在几天内尝试了几十次都没有问题）。

但是在 AppEngine 上运行代码时，***有时***会`401 Authorization Invalid consumer key`出错。我不确定是什么原因造成的，因为一分钟请求正常，然后当我再次尝试请求时，我得到了`401`，然后过一会儿就好了，然后又不行了，依此类推。

我通过电子邮件发送了 Context.IO 支持，他说当他尝试我的应用程序的 url 并收到错误时，“oauth_consumer_key 似乎没有正确传输”。这可能是什么原因造成的？AppEngine 搞砸了请求？pythoan-oauth2 错误？contextIO2 错误？

这是我的处理程序之一的代码：

```
class ReceiveConnectTokenHandler(webapp2.RequestHandler):
    def get(self):
        contextio_token = self.request.get('contextio_token')
        cio = ContextIO(API_KEY, API_SECRET)
        # get token's associated email
        try:
            token = cio.get_connect_token(contextio_token)
        except RequestError, e:
            if e.status_code == 404:
                self.response.write(
                    'Token %s not found. ' % contextio_token)
                return
            raise e
        account = token.account
        if not account or not account.email_addresses:
            self.response.write(
                'Token %s has no email associated with it yet.' % contextio_token)
            return
        email = account.email_addresses[0]
        # clear email's memcache
        memcache.delete_multi(['accounts', 'no_account'], namespace=email)
        self.response.write(
            '''%s is now connected with Context.IO. Please verify in the
            gadget that you have granted access. You can close this window.''' % email
        ) 
```

这只是一个简单的 GET on`https://api.context.io/2.0/connect_tokens/{{token}}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T06:17:03.510

根据格雷格的建议发布答案。

问题是 contextIO2 库通过以下方式定义了它的`request_uri`方法：

```
def request_uri(uri, method='GET', params={}, headers={}): 
```

这是一个常见的 Python 陷阱（[此列表中的 #5](http://www.zephyrfalcon.org/labs/python_pitfalls.html)）。我已通知 Context.IO 支持并已发送拉取请求。

# html - 使用 Bootstrap 居中下拉菜单

> ID：13547687
> 
> 赞同：8
> 
> 时间：2012-11-25T02:16:15.597
> 
> 标签：html, css, twitter-bootstrap

我正在尝试将我的下拉菜单放在 Bootstap 的中心。

```
 <ul class="dropdown-menu"> 
```

默认情况下它向左拉，或者我可以使用`pull-right`如下定义使其向右移动：

```
.dropdown-menu.pull-right {
  right: 0;
  left: auto;
} 
```

我想把它放在中心。我是 Boostrap 的新手，不知道如何将其居中。有小费吗？我试过了：50%，但没用。

注意：我不希望在下拉菜单中将实际文本居中。我希望将实际的下拉菜单和 carret 放在它下拉的导航菜单项下。

这是我模板中的完整代码片段：

```
<ul class="nav">
    <li id="tab_profile">
        <a href="{% url profile_detail user.username %}">{% trans "PROFILE" %}</a>
    </li>
    <li id="product_data">
        <a href="{% url all_models %}">{% trans "PRODUCT DATA" %}</a>
    </li>
    <li id="product_library">
        <a href="{% url library %}">{% trans "LIBRARY" %}</a>
    </li>
  <li id="database">
        <a href="/DATABASE/">{% trans "DATABASE" %}</a>
    </li>
        <li class="dropdown" id = "community">
        <a class="dropdown-toggle" href="#">COMMUNITY</a> 
             <ul class="dropdown-menu pull-right">
                <li> <a href="/profiles">Search</a></li>
                <li><a href="/questions/">Questions and Answers</a></li>
                <li><a href="{% url view_requests %}">Requests</a></li>
              </ul>
        </li>
</ul> 
```

CSS：

```
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  display: none;
  float: left;
  min-width: 160px;
  padding: 4px 0;
  margin: 1px 0 0;
  list-style: none;
  background-color: #ffffff;
  border: 1px solid #ccc;
  border: 1px solid rgba(0, 0, 0, 0.2);
  *border-right-width: 2px;
  *border-bottom-width: 2px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding;
  background-clip: padding-box;
}
.dropdown-menu.pull-right {
  margin-right: auto; 
  margin-left: auto;
} 
```

![在此处输入图像描述](../Images/67422ff20dcf58300c71eccc55ec14a8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-17T02:26:39.603

```
.dropdown-menu {
    left: 50% !important;
    margin-left: -70px;
} 
```

当使用默认引导下拉菜单时，这对我有用。只需根据菜单的宽度调整左边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T09:37:09.947

您可以在下面添加为 CSS 并在标签中给出此类，如下所示。

```
.centerDropdown {
    left: auto !important;
    right: -25% !important;
}
.centerDropdown:after {
   left: auto !important;
   right: 45% !important;
} 
```

在 HTML 代码中，

```
<li class="dropdown">
   <a href="/channel/list" data-toggle="dropdown" class="dropdown-toggle">
        <i class="icon-th-list"></i>
           Lists
   </a>
   <ul class="dropdown-menu centerDropdown">
          <li><a href="/list">Find a list</a></li>
          <li><a href="/my">My lists</a></li>
          <li><a href="/create">Create a list</a></li>
   </ul>
 </li> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-18T02:50:20.167

这个回复有点晚了，但希望会有用。要将 Bootstrap 下拉菜单相对于其父级居中，试试这个。

```
.dropdown-menu {
    left: -40px;
    right: -40px;
} 
```

根据需要调整大小，只需确保数值（本例中为 40px）彼此匹配。在这里，这会将下拉菜单的左侧和右侧分别拉到父母/原始链接的左侧 40 像素和右侧 40 像素。

奖励回合：如果列表项的文本超出菜单范围，请考虑添加以下声明。

```
.dropdown-menu>li>a {
    white-space: normal;
} 
```

# hql - 仅当 Hibernate 中的属性不为空时如何获取属性

> ID：13547688
> 
> 赞同：2
> 
> 时间：2012-11-25T02:16:17.913
> 
> 标签：hql, jpql

在 Hibernate 查询中，如何检查属性是否为空？根据我想获取该属性的结果，如果它不为空，我必须获取另一个属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T15:16:37.087

以下两种方式是有效的 HQL 查询，并且都是有效的 JPA 2.0 JPQL 查询。

使用 coalesce （返回第一个非 null，如果两者都为 null，则返回 null）：

```
SELECT coalesce(e.property, e.otherProperty) FROM SomeEntity e 
```

等效的选择案例，更长一点：

```
SELECT CASE WHEN e.property IS NULL THEN e.otherProperty ELSE e.property END 
FROM SomeEntity e 
```

# iis-express - IIS express 站点可通过 telnet 访问，但不能通过浏览器访问

> ID：13547690
> 
> 赞同：0
> 
> 时间：2012-11-25T02:17:06.717
> 
> 标签：iis-express

我想让一个本地 iis express 站点可以通过 Internet 访问以进行测试。在网站上设置 Paypal，我希望 paypal 能够访问在我的电脑上运行的开发网站。

如果我使用运行 iis express 站点的端口从另一台计算机远程登录到我的 PC，则连接正常。

但是，当我尝试使用浏览器访问该站点时，浏览器只是无限期地停留。

为了消除变量，我尝试关闭 Windows 防火墙。我还在路由器上启用了 DMZ 选项并将其指向我的 PC。我只能从 telnet 连接中启动该站点。浏览器仍然只是无限期地等待。

任何想法这里出了什么问题？为什么我可以通过 telnet 连接，但不能通过浏览器连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:18:56.957

尝试更改 IIS express 侦听的端口。一些 ISP 会阻止端口 80 以阻止托管 Web 服务器。确保将端口添加到您的 URL *http://yourdomain.com:8080/path*。

这可以解释为什么 telnet 工作（默认端口 23）和您的 Web 服务器（默认端口 80）不工作。我几年前使用的 ISP 也遇到过同样的问题。更改端口应该允许您解决此限制。

# python - 是否可以使用 Mechanize 发布到 URL 而无需先打开它？

> ID：13547691
> 
> 赞同：1
> 
> 时间：2012-11-25T02:17:08.873
> 
> 标签：python, http, mechanize

我想 POST 到一个 URL，其中一些表单字段用 Python 中的 Mechanize 填充。大多数代码示例都像这样：

```
import mechanize

url = "http://duckduckgo.com/html"
br = mechanize.Browser()
br.set_handle_robots(False) # ignore robots
br.open(url)
br.select_form(name="x")
br["q"] = "python"
res = br.submit()
content = res.read()
with open("mechanize_results.html", "w") as f:
    f.write(content) 
```

首先连接到 URL 并阅读表单，然后填写并提交。如果我知道需要哪些字段，是否可以在不先连接和阅读表单的情况下执行此操作？

# ruby - 在 ruby 中，如何判断字符串输入是大写还是小写？

> ID：13547694
> 
> 赞同：5
> 
> 时间：2012-11-25T02:17:34.320
> 
> 标签：ruby, uppercase, lowercase

我正在尝试编写一个程序，当输入单个字母时，如果它是大写的，则将其保留为大写并返回，如果是小写，则转换为大写。我该如何写才能判断字符串最初是大写还是小写？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T02:19:36.877

只需将字符串转换为大写并与原始字符串进行比较

```
string == string.upcase 
```

或小写

```
string == string.downcase 
```

**编辑：**如评论中所述，上述解决方案仅适用于英文字母。如果您需要国际解决方案，请改用

```
def upcase?(string)
    !string[/[[:lower:]]/]
end 
```

它使用正则表达式扫描字符串中的小写字母，并否定结果以判断字符串是否全部为大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T11:40:16.833

听起来您只需要转换为大写，根本不需要检查 if 小写，因为将 #upcase 应用于已经是大写的东西不会影响它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-27T02:45:27.797

对于单个字符串，您可以使用**start_with?** 方法也是。

```
user_input = gets.chomp

if user_input.start_with?(user_input.downcase)
    user_input.upcase!
end 
```

# php - 计算竞赛脚本中的位置

> ID：13547695
> 
> 赞同：0
> 
> 时间：2012-11-25T02:17:41.087
> 
> 标签：php, mysql

有人建议我再问一次这个问题，但要更深入。

这是我的脚本：

```
 <?php
    //Loggedin
    if($_SESSION['login']!=1)
    {
        print "You must be logged in.";
        include($root . 'footer.php');
        exit;
    }
    //Check banned account
    elseif($ui['level']=="2"){
        print "Sorry but your account is banned.";
        include($root . 'footer.php');
        exit;
    }
    //Check email verified
    elseif($ui['email_check']=="0"){
        print "Sorry but your account has not been verified, to verify your account now please visit <a href='index.php?index=verify&email=".$ui['email']."'>THIS LINK</a>.";
        include($root . 'footer.php');
        exit;
    }
date_default_timezone_set('America/New_York');
$country= $ui['country'];
$dates=mysql_query("SELECT * FROM `contest` WHERE `countries` LIKE '%$country%'");
$timestamp = time();

    $getcontests = $os_DB->query("SELECT * FROM contest WHERE date_1 <= '$timestamp' AND date_2 >= '$timestamp' AND countries LIKE '%$country%'");
        $num = $os_DB->num($getcontests);

            if($num == 0){
            print"<td colspan='4'>There are currently no active contests</td>";
            }
            else
            {

    while ($dat = mysql_fetch_array($dates)) {
        $tname = preg_replace('/\s+/', '', $dat['name']);
        $places="(SELECT * FROM `".$tname."_contest` WHERE `username` <> 'cassa' ORDER BY `completed` DESC LIMIT ".$dat['rewards'].")";
        $results=mysql_query($places) or die(mysql_error());

        $reward = array("".$dat['reward_1'].",".$dat['reward_2'].",".$dat['reward_3'].",".$dat['reward_4'].",".$dat['reward_5'].",".$dat['reward_6'].",".$dat['reward_7'].",".$dat['reward_8'].",".$dat['reward_9'].",".$dat['reward_10']."");

        $rewards = implode(",", $reward);

        $rewardsa = explode(",", $rewards);
        $i=0;
        $a=1;

            // Offers Contest

        if(time() <= $dat['date_2'] && time() >= $dat['date_1'] && $dat['type'] == offer) {
            print" <table width ='100%'><tr><th align='center'><font size='4'>{$dat['name']}</font></th><th align='right'><font size='1'>".date("m/d/Y h:i A", $dat['date_1'])."-".date("m/d/Y h:i A", $dat['date_2'])."</font></th></tr></table><br />".$dat['desc']."<br /><font size='1' color='white'>You must complete offers worth at least ".$dat['min_points']." points or $".$dat['min_cash']." to count towards contest!<br /><br />
            You must also complete at least ".$dat['min_offers']." offers in order to be eligible for winnings.</font><br /><br />";
            print" <table width ='100%'><tr><th align='left'>Place</th><th align='center'>User</th><th align='right'>Prize</th><th align='right'>Completed</th></tr>";

        if(mysql_num_rows($results) == 0){
            foreach($rewardsa as $rewa){
                if(!empty($rewa['$i'])){
                    if($dat['r_type'] == points){
                        print"  <tr><td align='left'>{$a}</td><td align='center'>......</td><td align='right'>{$rewardsa[$i]} points</td><td align='right'>--</td></tr>";
                    }
                if($dat['r_type'] == cash){
                    print"  <tr><td align='left'>{$a}</td><td align='center'>......</td><td align='right'>$".$rewardsa[$i]."</td><td align='right'>--</td></tr>";
                }
            $i++;
            $a++;
                }
            }
        }

    while ($place = mysql_fetch_array($results)) {
        if($dat['r_type'] == points){
            print"  <tr><td align='left'>{$a}</td><td align='center'>{$place['username']}</td><td align='right'>{$rewardsa[$i]} points</td><td align='right'>{$place['completed']}</td></tr>";
        }
        if($dat['r_type'] == cash){
            print"  <tr><td align='left'>{$a}</td><td align='center'>{$place['username']}</td><td align='right'>$".$rewardsa[$i]."</td><td align='right'>{$place['completed']}</td></tr>";
        }
        $i++;
        $a++;

    }
    ///Line I am working with///
    $getyou= mysql_query("SELECT COUNT(*) AS Place, t.*
    FROM ".$tname."_contest t
    GROUP BY t.id
    HAVING Place <= 3 OR username = '".$ui['username']."'");
        $youu = mysql_fetch_array($getyou);
        print"  <tr><td align='left'>{$youu['Place']}</td><td align='center'>You</td><td align='right'>---</td><td align='right'>{$youu['completed']}</td></tr>";
        }
    }
        }

?>  
        </table> 
```

使用这个脚本，我希望能够向登录的用户显示他们当前在当前获胜者下的比赛中所处的位置。

这就是我希望桌子的样子。

```
-----------------------------------------
| Place |    User   | Prize | Completed |
|   1   | Someuser1 | $5.00 |     5     |
|   2   | Someuser2 | $2.50 |     3     |
|   3   | Someuser3 | $1.25 |     2     |
|   20  |    You    |  ---  |     1     |
----------------------------------------- 
```

这是它的样子

```
-----------------------------------------
| Place |    User   | Prize | Completed |
|   1   | Someuser1 | $5.00 |     5     |
|   2   | Someuser2 | $2.50 |     3     |
|   3   | Someuser3 | $1.25 |     2     |
|   1   |    You    |  ---  |     1     |
----------------------------------------- 
```

这是我的表结构。

```
 Column   |  Type | Null |  Default
--------------------------------------
    id       |int(11)|  No  |   
    username |text   |  No  |   
    completed|int(11)|  No  | 
```

正如您所看到的，所有这些都来自一个表，并且该位置不是由数据库定义的，而是由脚本本身定义的。

希望这可以比我上一个问题更清楚。

编辑：使用肖恩的代码，这就是我得到的。

```
-----------------------------------------
| Place |    User    | Prize | Completed |
|   1   |   kikkat   | $5.00 |     1     |
|   2   |xXchris744Xx| $2.50 |     1     |
|   3   |  kira423   | $1.25 |     1     | /// This line is me
|   7   |    You     |  ---  |     1     | /// But it shows my current place as 7
----------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:50:35.823

这可以通过嵌套查询来完成 -

```
$getyou= mysql_query("SELECT 
                        (SELECT count(*)+1 AS rank FROM contest WHERE completed >
                          (SELECT completed FROM contest WHERE username = '".$ui['username']."' ORDER BY completed DESC LIMIT 1)) as Place,
                        c.* FROM contest c WHERE username = '".$ui['username']."'");
$youu = mysql_fetch_array($getyou);
    print"  <tr><td align='left'>{$youu['Place']}</td><td align='center'>You</td><td align='right'>---</td><td align='right'>{$youu['completed']}</td></tr>"; 
```

* * *

这是查询从内到外的工作方式-

第一个（内部）`SELECT`获得`completed`金额`username =$ui['username']`

```
SELECT completed FROM contest WHERE username = '".$ui['username']."' ORDER BY completed DESC LIMIT 1 
```

第二个（中间）`SELECT`使用该`completed`数量并执行`count`所有已完成的行中的 a ，添加 a `1`，`count`并将其保存为 users `Place`。

```
SELECT count(*)+1 AS rank FROM contest WHERE completed > '#' // # represents the `completed` amount for the `$ui['username']` that we got in the 1st SELECT 
```

第三个/最后一个（外部）`SELECT`现在只获取行数据`username =$ui['username']`

```
SELECT Place, c.* FROM contest c WHERE username = '".$ui['username']."'  // Place was created/defined in early SELECTS, now we just get the rest of the data using c.* 
```

* * *

编辑

`tiebreaker`要在一个或多个具有相同数字时添加 a `completed`，您还需要按 the 对查询进行排序`id`。因此，将您的第一个查询更改为 -

```
$places="(SELECT * FROM `".$tname."_contest` WHERE `username` <> 'cassa' ORDER BY `completed`,`id` DESC LIMIT ".$dat['rewards'].")";
                                                                                              --- 
```

`ORDER BY id`并将and添加`>=`到第二个查询

```
$getyou= mysql_query("SELECT 
                        (SELECT count(*)+1 AS rank FROM contest WHERE completed >=
                                                                                --
                          (SELECT completed FROM contest WHERE username = '".$ui['username']."' ORDER BY completed DESC LIMIT 1) ORDER BY `completed`,`id`) as Place,
                                                                                                                                 -------------------------
                        c.* FROM contest c WHERE username = '".$ui['username']."'"); 
```

* * *

编辑 #2 试试这个新查询。前一个不是选择确切的行，而是选择最后一行`tied`。

```
$getyou= mysql_query("SELECT Place, c.* FROM
                      (SELECT @Place:=@Place+1 AS Place, c.*
                        FROM contest c, (SELECT @Place := 0) r ORDER BY completed DESC, id ASC ) c
                         WHERE username = '".$ui['username']."'"); 
```

这个新查询创建了一个临时的新列`Place`，使用`SELECT @Place := 0`，然后我们使用 'Place' 获取用户`@Place:=@Place+1 AS Place`。

# sql - 显示正确数据的sql问题

> ID：13547696
> 
> 赞同：0
> 
> 时间：2012-11-25T02:17:48.670
> 
> 标签：sql

我有这些桌子

**餐厅**

```
restaurantID
restaurantName
locationID 
```

**地点**

```
locationID
locationName 
```

**盘子**

```
dishID
DishName
restaurantID
price 
```

**审查**

```
reviewID
dishID
rating 
```

现在我想显示这些东西：

```
`restaurantName`, `locationName`, #dishes from 1 specific restaurant, # of reviews per restaurant 
```

但我对 SQL 代码有点坚持。

我有这个自动取款机：

```
SELECT 
    res.name, l.name, 
    (SELECT COUNT(dishID) FROM dish WHERE restaurantID = res.restaurantID),
    (SELECT COUNT(r.reviewID)) 
FROM 
    restaurant res, location l, review r, dish d 
WHERE 
    res.locationID = l.locationID 
    AND r.dishID = d.dishID 
    AND d.restaurantID = res.restaurantID 
GROUP BY 
    res.restaurantID 
```

它显示了我想要的所有东西，除了没有评论的餐厅。

但我想让计数说 0 而不是根本不显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:24:03.280

LEFT JOIN 用于您希望包含在您加入的表中找不到匹配项的结果的位置（即，此 restaurant_id 未被任何菜肴使用，或者此菜肴与任何评论不匹配；您仍希望它在分组后的结果）。但是，位置很可能是强制性的，因此如果需要，请使用常规连接。

```
 SELECT res.name, l.name, COUNT(dishID) as dish_count, COUNT(r.reviewID) as review_count 
FROM restaurant res
JOIN location l ON res.locationID = l.locationID 
LEFT JOIN dish d on d.restaurantID = res.restaurantID
LEFT JOIN review r on r.dishID = d.dishID 
GROUP BY res.restaurantID 
```

此外，这个用例不需要子查询，当使用连接时，您可以消除这些。

# php - 将数据库信息插入 RSS 提要

> ID：13547703
> 
> 赞同：1
> 
> 时间：2012-11-25T02:18:56.850
> 
> 标签：php, mysql, xml, rss, atom-feed

这是我的 RSS Feed 的当前代码：

```
<?php header("Content-type: text/xml"); ?>
<?php echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"; ?>
<?php include('directory/database.php'); ?>
<rss version="2.0">
<channel>
  <title>Website Reviews</title>
  <link>http://www.mywebsite.com</link>
  <description>My Website's Description</description>
  <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>

<?php
    foreach( range( 1, 30 ) as $i ):
        $domain = mt_rand( 1, 62246 );
?>
<item>
    <title><?php echo $domain; ?> REVIEW</title>
    <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>
    <link>http://www.mywebsite.com/review/<?php echo $domain; ?></link>
    <description>Looking for a review on <?php echo $domain; ?>?  We've got it!</description>
</item>
<?php endforeach; ?>

</channel>
</rss> 
```

这是我需要帮助更改的特定代码：

```
<?php
    foreach( range( 1, 30 ) as $i ):
        $domain = mt_rand( 1, 62246 );
?> 
```

基本上，我不需要生成一个随机数，而是需要它从我的数据库中提取一个域名。我的数据库中有大量域列表，位于“网站”列下的“列表”表中。

我有 30 个不同的 RSS 项目显示，每个项目都需要有一个与该项目关联的不同域名。提前致谢！

# ruby-on-rails - 无法批量分配受保护的元素：crop_x、crop_y、crop_w、crop_h。设计和 jCrop。Ruby on Rails

> ID：13547714
> 
> 赞同：0
> 
> 时间：2012-11-25T02:19:56.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, jcrop

我正在关注 RyanBates 关于使用**jCrop** [http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)裁剪用户头像的截屏视频。Ryan 从头开始​​使用身份验证系统，但我为此使用了**Devise 。**

为了将用户带到处理裁剪的**crop.html.haml**，我通过在app/ **controllers**中创建此文件并指定

```
routes.rb

devise_for  :users, path_names: { sign_in: "login", sign_out: "logout" }, 
          controllers: { registrations: "registrations" } 
```

**我在registration_controller.rb**中的更新操作如下所示

```
def update
if resource.update_with_password(resource_params)
    if params[:user][:avatar].present?
    render 'crop'
  else
    expire_session_data_after_sign_in!
    redirect_to users_path, notice: "User updated."
  end
 else
    clean_up_passwords(resource)
    flash[:notice] = flash[:notice].to_a.concat resource.errors.full_messages
    session[:subscription] = resource
  redirect_to root_path
 end 
```

结尾

当我单击“裁剪”时，会导致以下错误：

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#update

Can't mass-assign protected attributes: crop_x, crop_y, crop_w, crop_h 
```

在**user.rb**我有

```
attr_accessor :crop_x, :crop_y, :crop_w, :crop_h 
```

我也尝试将其放入attar_accesible，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:32:03.640

您似乎在“attar_accesible”中有两个拼写错误，请尝试`attr_accessible`看看它是否有效。

# python - Mongo 查询不识别空记录

> ID：13547717
> 
> 赞同：1
> 
> 时间：2012-11-25T02:20:23.933
> 
> 标签：python, mongodb, pymongo

我正在浏览我的收藏并返回坐标信息，但是当它遇到空记录时会引发此错误：

```
a=get_coords(doc['coordinates']['coordinates'])
print a 
```

这是函数 get_coords：

```
def get_coords(doc):
    if doc == None:
        pass
    else:
        longs, lat = doc

        return lat, longs 
```

错误：

```
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

然后这会停止我的查询，并且不会返回更多记录。

我怎样才能防止这种情况发生，我的意思是我仍然希望它继续搜索其他记录而不是停止此错误消息。

谢谢

感谢他们都提供了帮助的两个答案。我能够通过以下方式完成它：

```
if doc['coordinates']==None:
    pass
else: 
    b=get_coords(doc['coordinates']['coordinates'])
    print b 
```

在首先检查集合中确实存在文档后，我会执行此操作。现在似乎打印集合中的所有现有坐标。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:32:53.540

我不确定你为什么要打印`b`，因为上面的代码中没有定义。也许你的意思是`a`？

无论哪种方式，您都应该能够：

```
if doc==None:
   pass
else:
   a=get_coords(doc['coordinates']['coordinates'])
   print b 
```

或任何你想做的事情`doc`。如果某些`doc`项目没有，`coordinates`您需要为此做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:46:20.420

总会`doc`有一个`coordinates`属性？如果是这样，那本字典是否总是有另一个`coordinates`属性？假设`doc`总是字典（即使只是一个空白的），你可以试试这个：

```
In [90]: def get_coords(doc):
   ....:     if doc.get('coordinates', None):
   ....:         if doc['coordinates'].get('coordinates', None):
   ....:             return doc['coordinates']['coordinates']
   ....:     return None, None
   ....:

In [91]: doc
Out[91]:
{'coordinates': {u'coordinates': [-81.453134399999996, 28.5287337],
                 u'type': u'Point'}}

In [92]: get_coords(doc)
Out[92]: [-81.453134399999996, 28.5287337]

In [93]: new_doc = {'coordinates': {u'type': u'Point'}}

In [94]: get_coords(new_doc)
Out[94]: (None, None)

In [95]: empty_doc = {}

In [96]: get_coords(empty_doc)
Out[96]: (None, None) 
```

注意`return`value是两个item，所以调用函数的时候需要准备好接受两个return item。如果没有`coordinates`in `doc`，它将返回`None, None`。

```
In [101]: lat, long = get_coords(doc)

In [102]: lat
Out[102]: -81.453134399999996

In [103]: long
Out[103]: 28.5287337 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T07:25:13.017

您还可以使用异常处理来重写`get_coords()`函数，如下所示：

```
def get_coords(doc):
    try:
        longs, lat = doc
        return lat, longs
    catch TypeError:
        return None, None 
```

# java - 如何正确获取另一个城市的当前时间？

> ID：13547720
> 
> 赞同：0
> 
> 时间：2012-11-25T02:21:23.673
> 
> 标签：java, android, time, timezone

我设法阅读了网络服务以获取任何给定城市的当前时间。我可以从 Web 服务中获得 2 个重要值，即当前时间（字符串）和偏移量。

问题是如何正确设置任何给定城市的时间？

选项1：

*   读取机器/本地时间
*   计算机器时间之外的 UTC/GMT 时间
*   城市时间 = UTC 时间 +/- 偏移值
*   但是当机器时间错误时会发生什么？你也会走错时间吧？

选项 2：

*   读取字符串中的当前城市时间 (2012-11-24 19:30)
*   解析此时间值并将其设置为日历
*   我们得到了正确的城市时间
*   但是下一分钟呢？当然，每分钟请求 Web 服务以获取当前时间不是一个好的解决方案，对吧？一旦我们设置它，是否可以保持这个 Calendar 实例每分钟自动运行？

注意：我在这里开发 Android 时钟小部件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:30:03.007

在我看来，选项1要好得多。大多数手机的时间都非常准确，因为时间同步是 GSM 和 CDMA 不可或缺的一部分。除此之外，我更喜欢离线工作的时钟而不是需要互联网连接。

如果您在面对不正确的系统时间时担心确保准确性，请考虑调用 Web 服务以获取当前时间以进行验证。

此验证可以在后台完成，但请记住，Web 服务不是最佳的时间同步提供程序。我会让任何相差不到 5 分钟的事情消失，因为这可能是由于您的服务器不同步或通话时间过长。

# c - UDP 套接字设置超时

> ID：13547721
> 
> 赞同：40
> 
> 时间：2012-11-25T02:21:26.210
> 
> 标签：c, sockets, udp

我正在尝试在 UDP 套接字上设置 100 毫秒超时。我正在使用 C。我在下面发布了我的相关代码。我不确定为什么这没有超时，而是在没有收到段时挂起。这仅适用于未使用 bind() 方法绑定的套接字吗？

```
#define TIMEOUT_MS      100     /* Seconds between retransmits */

if ((rcv_sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0)
    DieWithError("socket() failed");

if ((rcv_sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) < 0)
    DieWithError("socket() failed");

//set timer for recv_socket
static int timeout = TIMEOUT_MS;
setsockopt(rcv_sock, SOL_SOCKET, SO_RCVTIMEO,(char*)&timeout,sizeof(timeout));

if(recvfrom(rcv_sock, ackBuffer,sizeof(ackBuffer), 0,
       (struct sockaddr *) &servAddr2, &fromSize) < 0){
    //timeout reached
    printf("Timout reached. Resending segment %d\n", seq_num);
    num_timeouts++;
} 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-25T02:55:25.270

该`SO_RCVTIMEO`选项需要一个`struct timeval`定义的 in `sys/time.h`，而不是像您传递给它的整数。具有`timeval struct`as 秒字段和微秒字段。要将超时设置为 100 毫秒，以下应该可以解决问题：

```
struct timeval tv;
tv.tv_sec = 0;
tv.tv_usec = 100000;
if (setsockopt(rcv_sock, SOL_SOCKET, SO_RCVTIMEO,&tv,sizeof(tv)) < 0) {
    perror("Error");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-18T01:08:00.880

我也有同样的问题。我尝试采用您建议的解决方案，使用`timeval`struct. 但它似乎没有用。

我已经阅读了微软文档，时间应该是`DWORD`毫秒数，但还有另一件事要做，如果套接字是使用`WSASocket`函数创建的，那么`dwFlags`参数必须具有`WSA_FLAG_OVERLAPPED`设置超时才能起作用的属性适当地。否则超时永远不会生效。

# c - 不按位运算符执行计算

> ID：13547722
> 
> 赞同：0
> 
> 时间：2012-11-25T02:21:51.377
> 
> 标签：c, algorithm

我想在没有按位运算符的情况下执行此计算。

```
unsigned result = (1u << 5); 
```

结果将是 32。我知道这是将二进制文件转换`1`为`100000`但我想在*没有*位运算的情况下执行相同的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:25:03.933

既然你知道 2 ⁵是 32，你可以使用：

```
unsigned int result = 1u * 32u; // or just 32u if it's always '1u *'. 
```

否则，如果你只想使用位移值，有两种方法。第一个是循环：

```
unsigned result = 1u;
for (size_t i = 0; i < 5; result *= 2u, i++); 
```

或非循环版本：

```
static unsigned int shft[] = {1u, 2u, 4u, 8u, 16u, 32u, ... };
unsigned int result = 1u * shft[5]; // or just shft[5] if it's always '1u *'. 
```

# java - << 是 C++ 的东西 - java 等价物

> ID：13547723
> 
> 赞同：1
> 
> 时间：2012-11-25T02:21:57.047
> 
> 标签：java, c++

C++ 有这个符号`>>`，例如：

```
cin >> a >> b >> cp >> c 
```

java是否有等价于`>>`？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:25:25.447

c++ >> 运算符等效于 Java Scanner 类。用这个：

```
Scanner in = new Scanner(System.in);
a = in.nextLine(); 
```

这应该会为您提供一行用户输入。从那里您可以执行 b=a、cp=b 或其他操作。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:47:57.880

这取决于您所说的>>。您会看到，<< >> 是重载的运算符，用于按位移位操作和 I/O。

Java 有输入，例如 awolfe91 提到的 Scanner 类，并以 System.out.print("String goes here") 的形式输出（相对于 cout << a）。

Java 也有按位移位运算符，据我所知，它的工作方式与 C++ - << 或 >> 完全相同。

# ruby-on-rails - Rails：上传文件或存储 url

> ID：13547724
> 
> 赞同：0
> 
> 时间：2012-11-25T02:22:37.710
> 
> 标签：ruby-on-rails, ruby

我正在开发一个表单，我希望允许用户上传文件或输入现有文件的 url。

这个想法是允许用户将各种“多媒体”文件附加到条目中，其中一些可能是来自他们的硬盘驱动器的文件（想想图像、word 文档等），还有一些可能是 url（youtube 视频、flickr 上的图像等）

关于我如何做到这一点的任何想法？我目前正在使用carrierwave来处理文件上传，它似乎运作良好，但我也想存储url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:06:59.047

我可能会做的是在文件上传表单中有一个下拉菜单，以选择文件是来自磁盘还是来自外部 url。

默认情况下，它将设置为“从磁盘”，如果他们选择外部 url，您可以使用一些 AJAX 魔法并隐藏文件上传文本框并有一个文本框来使用外部 url/脚本等。

在表格中，您可以保留另外两列，

1 - 外部网址

2 - 文件类别（外部/上传文件）

通过这种方式，您可以区分文件以及它们如何在视图中显示

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:33:36.923

除非你真的有，否则不要保存网址。问题是，当您保存 url 时，您无法处理它来创建缩略图或图像的多种样式。此外，当您在页面中显示图像时，您将不得不进行外部调用，这可能会减慢页面速度，甚至更糟糕的是，如果链接在未来某个时间断开，您的用户将看到一个空图像。

youtube 视频也是如此。但是，对于视频，您通常希望存储和显示的信息不仅仅是视频。您可以有两张桌子 - 一张用于视频，一张用于图像。在视频表中，您有标题、说明、作者、持续时间、嵌入代码、缩略图（图像附件）。

给出 URL 后，您可以下载任何图像并将其保存为普通文件。使用载波 -

```
@object.remote_image_url = "http://www.foo.com/file.png"
@object.save 
```

在视图中，您将拥有两个选项，也许并排，您可以让它们发布到不同的操作。因此，如果选择并发布了文件，则可以正常保存。如果输入了 url，那么您可以检查它是否是视频网站 - 如果是视频，则使用 video_info gem 解析出信息并将其存储。否则只需使用上面的两行并保存 url 图像。

**笔记**

我的回答没有讨论用户输入的质量/性质。在我看来，有人输入错误 url 的可能性很高，因此您希望将尝试将 url 作为图像保存在 begin-rescue 块中，并且可能使用 JS 将视频域限制为您可以访问的几个网站将能够解析。

# database - 如何连接 Liferay 和 Mysql 数据库

> ID：13547725
> 
> 赞同：2
> 
> 时间：2012-11-25T02:22:55.137
> 
> 标签：database, liferay

我是 Liferay 的新手。我想将 Liferay 与 MySQL 数据库连接起来。我正在使用 Liferay CE（版本？ - 与 tomcat (6.0.29) 捆绑在一起）。请告诉我这个步骤。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T21:54:53.330

要构建已经提到的内容，请编辑 liferay-portal-xxx/tomcat-xxx/webapps/ROOT/WEB-INF/classes 中的文件 portal-ext.properties（如果它不存在，则创建它）。

将这些行添加到其中：

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
jdbc.default.username=<insert your mysql username>
jdbc.default.password=<insert your mysql password> 
```

在 mysql 中创建 lportal 表也可能值得。

```
mysql -u root -p <<< "create database lportal character set utf8;" 
```

下载并提取此处找到的[Liferay 数据库脚本](http://www.liferay.com/downloads/liferay-portal/additional-files)。然后运行一个，例如

```
mysql -u root -p < /path-to-the-script/create-mysql.sql 
```

更多信息可以在这个[Liferay Ubuntu 安装指南](http://www.liferay.com/web/guest/community/wiki/-/wiki/Main/Development%20Environment%20%28Ubuntu%20Linux%29)（因为它是一个版本但数据库部分很有用）和这个[Liferay 数据库配置指南](http://www.liferay.com/community/wiki/-/wiki/Main/Database+Configuration)中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T09:11:00.757

将以下代码行粘贴到 portal-ext.properties 中：

```
jdbc.default.driverClassName=com.mysql.jdbc.Driver
jdbc.default.url=jdbc:mysql://localhost/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
jdbc.default.username=
jdbc.default.password= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T05:12:00.277

```
 1)path--->home/karthik/Desktop/LiferaySetup/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/webapps/ROOT/WEB-INF/classes---->create an empty doc with name as portal-ext.properties
    paste the below code:
    jdbc.default.driverClassName=com.mysql.jdbc.Driver
    jdbc.default.url=jdbc:mysql://localhost/lportal?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false
    jdbc.default.username=root
    jdbc.default.password=root
    2)path--->/home/karthik/Desktop/LiferaySetup/liferay-portal-6.1.1-ce-ga2/tomcat-7.0.27/conf/Catalina/localhost-->Enter the below code inside ROOT.xml
     <Context path="" crossContext="true">

        <!-- JAAS -->

        <!--<Realm
            className="org.apache.catalina.realm.JAASRealm"
            appName="PortalRealm"
            userClassNames="com.liferay.portal.kernel.security.jaas.PortalPrincipal"
            roleClassNames="com.liferay.portal.kernel.security.jaas.PortalRole"
        />-->

        <!--
        Uncomment the following to disable persistent sessions across reboots.
        -->

        <!--<Manager pathname="" />-->

        <!--
        Uncomment the following to not use sessions. See the property
        "session.disabled" in portal.properties.
        -->

        <!--<Manager className="com.liferay.support.tomcat.session.SessionLessManagerBase" />-->
    <Resource
        name="jdbc/LiferayPool"
        auth="Container"
        type="javax.sql.DataSource"
        driverClassName="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost/lportal?useUnicode=true&amp;characterEncoding=UTF-8"
        username="root"
        password="root"
        maxActive="20"
    />

    </Context>
If you follow the above 2 statements you can create easily 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T21:24:54.797

1.  下载 Liferay CE
2.  安装 MySQL 并创建数据库
3.  如果不存在portal.properties，解压缩liferay并创建文件到liferay_home/tomcat-6.0.29/webapps/ROOT/WEB-INF/clases
4.  粘贴这个：

jdbc.default.driverClassName=com.mysql.jdbc.Driver

jdbc.default.url=jdbc:mysql://localhost/nameDatabase?useUnicode=true&characterEncoding=UTF-8&useFastDateParsing=false

jdbc.default.username=name

jdbc.default.password=密码

运行 onm Eclipse 或 Windows .bat/Linux .sh 我希望对你有用

# javascript - 如何使用不同的 JSHint 选项对两组文件进行 lint？(grunt.js)

> ID：13547732
> 
> 赞同：6
> 
> 时间：2012-11-25T02:23:56.353
> 
> 标签：javascript, jshint, gruntjs

我有一些 JavaScript 文件应该在 Node 环境下进行检查，而其他一些 JavaScript 文件应该在浏览器环境下进行检查。如何使用不同的 JSHint 选项对这些文件进行 lint？这是我的出发点：

```
module.exports = function (grunt) {
  grunt.initConfig({
    lint: {
      files: [
        "grunt.js", // Node environment
        "lib/**/*.js", // browser environment
      ],
    },
    jshint: {
      options: {
        browser: true, // define globals exposed by modern browsers?
        es5: true, // code uses ECMAScript 5 features?
        node: false, // define globals in Node runtime?
      },
      globals: {},
    },
  });

  grunt.registerTask("default", "lint");
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T02:27:04.893

实际上，这很容易：[https ://github.com/gruntjs/grunt/blob/master/docs/task_lint.md#per-target-jshint-options-and-globals](https://github.com/gruntjs/grunt/blob/master/docs/task_lint.md#per-target-jshint-options-and-globals)

```
// Project configuration.
grunt.initConfig({
  lint: {
    src: 'src/*.js',
    grunt: 'grunt.js',
    tests: 'tests/unit/**/*.js'
  },
  jshint: {
    // Defaults.
    options: {curly: true},
    globals: {},
    // Just for the lint:grunt target.
    grunt: {
      options: {node: true},
      globals: {task: true, config: true, file: true, log: true, template: true}
    },
    // Just for the lint:src target.
    src: {
      options: {browser: true},
      globals: {jQuery: true}
    },
    // Just for the lint:tests target.
    tests: {
      options: {jquery: true},
      globals: {module: true, test: true, ok: true, equal: true, deepEqual: true, QUnit: true}
    }
  }
}); 
```

# php - 创建用户特定的日历

> ID：13547734
> 
> 赞同：0
> 
> 时间：2012-11-25T02:24:10.207
> 
> 标签：php, html, mysql, mamp

我想创建一个相当简单的网页，用户可以在其中登录并可以操作我创建的日历（可能使用 HTML 表格？）。我已经用几个 HTML 和 php 页面创建了一个简单的登录服务，并将基本用户信息存储在 MAMP 服务器中。

如果我错了，请纠正我，但从这里我需要在 HTML 中布局日历，并且可能将表格单元格链接到用户可以创建新事件的编辑页面。这里真正的问题是在我的服务器上存储此类信息的最佳方式是什么？像我在注册时处理表单数据一样使用 PHP 和 MAMP？

我对数据库和使用服务器等还很陌生，所以只是寻找一些指导，这样我就不会浪费时间学习一个完全不正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T02:44:53.460

在我看来，MySQL 和 PHP 绝对是必经之路。如果我也是你，我会研究 Javascript 和 AJAX。使用 AJAX，您可以让用户直接在日历中输入信息并将其存储在数据库中，而无需离开页面。jQuery 是一个非常好的和简单的库，用于处理 Javascript 和 AJAX，我强烈推荐它。它极大地简化了使用 Javascript 的工作。

至于日历本身，对我来说，使用表格似乎是最好的方法。

为了在 MySQL 中存储信息，我看到了一个有点像这样的表：

```
UID|EntryID|Date|Time|Event|etc. 
```

您可以将此表与用户表分开存储，并在发出请求时轻松加入它们。例如，当用户登录时，您可以从您设置的用户表中提取用户 UID，然后从日历表中提取具有匹配 UID 的所有条目，并使用 PHP 和 Javascript 操作和显示此信息。

可能有（并且很可能有）更好的方法来设置您的数据库，但这只是您如何使其工作的一般概念。这里肯定有人在 MySQL 和数据库设计方面比我有更多的经验。

总的来说，听起来你有一个为你工作的好主意，并且非常清楚如何实现它。祝你在项目上好运！

# debugging - 尝试使用 TOTALVIEW 调试 CUDA 代码时出错

> ID：13547737
> 
> 赞同：0
> 
> 时间：2012-11-25T02:25:06.947
> 
> 标签：debugging, cuda, totalview

我正在尝试修复与 SEGMENTATION FAULT 相关的一些错误。因此，当我尝试使用逐步调试代码来修复错误时，我遇到了几个错误：

> 错误：cuda_trace_obj::initialize_cuda_library：Cuda 初始化（）返回 CUDBG_ERROR_INITIALIZATION_FAILURE（20）！
> 
> 错误：cuda_system_status_t::initialize：错误 CUDBG_ERROR_UNINITIALIZED(5) 获取设备计数

任何有关上述错误的帮助或指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-09-03T14:43:24.910

当您在具有单个 GPU 和运行 X11 服务器的计算机上调试 CUDA 应用程序时，通常会发生此错误。

在单个 GPU 系统中，只有在没有 X11 服务器（在 Linux 上）或 Aqua 桌面管理器（在 Mac OS X 上）在该系统上运行时，才能使用调试的 CUDA 应用程序。

据我所知，只有命令行调试器 CUDA-GDB 能够覆盖[cuda-gdb 文档](https://docs.nvidia.com/cuda/cuda-gdb/#single-gpu-debugging-with-desktop-manager-running)中描述的这种限制设置软件抢占，但仅适用于具有 SM3.5 计算能力及更高版本的设备。

# database - 我们如何处理快速增长到非常大的交集表？

> ID：13547739
> 
> 赞同：4
> 
> 时间：2012-11-25T02:25:24.683
> 
> 标签：database, database-design

例如，我们有表 A 和表 B，它们具有多对多关系。一个交集表，表 C 存储 A.id 和 B.id 以及表示两者之间关系的值。或者作为一个具体的例子，想象有一个用户帐户、一个论坛和一个业力分数的 stackexchange。或者，学生、课程和成绩。如果表 A 和 B 非常大，表 C 可以并且很可能会非常快速地增长（实际上我们假设它确实如此）。我们该如何处理这样的问题？有没有更好的方法来设计表格以避免这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T08:13:16.563

没有魔法。如果某些行是连接的，而有些行没有连接，则必须以*某种方式*表示此信息，并且执行此操作的“关系”方式是“连接”（也称为“链接”）表。是的，联结表可以变大，但幸运的是数据库非常有能力处理大量数据。

使用联结表而不是逗号分隔列表（或类似列表）有充分的理由，包括：

*   高效查询（通过索引和集群）。
*   执行参照完整性。

在设计连接表时，请提出以下问题：

1.  我需要只向一个方向查询还是同时向两个方向查询？¹
    *   如果**是一个方向**，只需在两个外键上创建一个复合主键（我们称它们为 PARENT_ID 和 CHILD_ID）。顺序很重要：如果您从父级查询到子级，PK 应该是：{PARENT_ID, CHILD_ID}。
    *   如果**两个方向**，也以相反的顺序创建一个复合索引，在这种情况下是 {CHILD_ID, PARENT_ID}。
2.  “额外”的数据很小吗？
    *   如果**是**，则对表进行[聚类并根据需要](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)二级索引中的额外数据。²
    *   我**不**，不要聚集表，也不要覆盖二级索引中的额外数据。³
3.  是否有任何其他表可以将联结表用作父表？
    *   如果**是**，请考虑添加代理键是否值得让子 FK 保持苗条。但请注意，如果您添加代理键，这可能会消除集群的机会。

在许多情况下，这些问题的答案是：**yes 和 no**，在这种情况下，您的表将与此类似（Oracle 语法如下）：

```
CREATE TABLE JUNCTION_TABLE (
    PARENT_ID INT,
    CHILD_ID INT,
    EXTRA_DATA VARCHAR2(50),
    PRIMARY KEY (PARENT_ID, CHILD_ID),
    FOREIGN KEY (PARENT_ID) REFERENCES PARENT_TABLE (PARENT_ID),
    FOREIGN KEY (CHILD_ID) REFERENCES CHILD_TABLE (CHILD_ID)
) ORGANIZATION INDEX COMPRESS;

CREATE UNIQUE INDEX JUNCTION_TABLE_IE1 ON
    JUNCTION_TABLE (CHILD_ID, PARENT_ID, EXTRA_DATA) COMPRESS; 
```

注意事项：

*   `ORGANIZATION INDEX`：大多数 DBMS 称为集群的特定于 Oracle 的语法。其他 DBMS 有自己的语法，有些（MySQL/InnoDB）暗示集群，用户不能关闭它。
*   `COMPRESS`: 一些 DBMS 支持[领先的索引压缩](http://richardfoote.wordpress.com/2008/02/17/index-compression-part-i-low/)。由于聚集表本质上是一个索引，因此也可以对其应用压缩。
*   `JUNCTION_TABLE_IE1`, `EXTRA_DATA`: 由于二级索引覆盖了多余的数据，所以DBMS在从child到parent的方向查询时，不用碰表就可以得到。主键充当聚类键，因此在从父级向子级查询时自然会覆盖额外的数据。

从物理上讲，您只有两棵 B 树（一棵是聚簇表，另一棵是二级索引），根本没有表堆。这转化为良好的查询性能（父到子和子到父方向都可以通过简单的索引范围扫描来满足）和插入/删除行时相当小的开销。

这是等效的 MS SQL Server 语法（无索引压缩）：

```
CREATE TABLE JUNCTION_TABLE (
    PARENT_ID INT,
    CHILD_ID INT,
    EXTRA_DATA VARCHAR(50),
    PRIMARY KEY (PARENT_ID, CHILD_ID),
    FOREIGN KEY (PARENT_ID) REFERENCES PARENT_TABLE (PARENT_ID),
    FOREIGN KEY (CHILD_ID) REFERENCES CHILD_TABLE (CHILD_ID)
);

CREATE UNIQUE INDEX JUNCTION_TABLE_IE1 ON
    JUNCTION_TABLE (CHILD_ID, PARENT_ID) INCLUDE (EXTRA_DATA); 
```

请注意，除非指定 PRIMARY KEY **NONCLUSTERED** ，否则 MS SQL Server 会自动对表进行聚类。

* * *

*¹换句话说，您是否只需要获取给定“父母”的“孩子”，或者您可能**还**需要获取给定孩子的父母。*

*²覆盖允许仅从索引满足查询，并避免在通过聚簇表中的二级索引访问数据时需要进行昂贵的双重查找。*

*³这样，额外的数据不会重复（这会很昂贵，因为它很大），但是您避免了双重查找并将其替换为（更便宜的）表堆访问。但是，请注意可能会破坏基于堆的表中范围扫描的性能的[集群因素！](http://oracle-online-help.blogspot.com/2006/11/clustering-factor_28.html)*

# ruby - Ruby 中元编程的常见/值得注意的用途是什么？

> ID：13547740
> 
> 赞同：2
> 
> 时间：2012-11-25T02:25:35.593
> 
> 标签：ruby, web, metaprogramming

大约一年来，我一直在使用 Ruby 和其中的许多 Web 框架。

我知道 Rails 主要是使用“元编程”构建的。虽然我试图检查源头，但通常并不是所有的都是有意义的。

我尝试发布一个小 gem，并使用了一些方法，例如`_send`, `instance_eval`，`class_eval`这很酷，但作为一般原则，我们被告知要远离`eval`它的各种形式。

我知道在哪里可以使用的其他编程结构。就像应用程序中的数据序列化，或者我可以/应该在制作 Web 应用程序时实现构建器模式的地方。

我的问题分为两部分：

1.  使用元编程的常见或恰当的用例/编程问题是什么？
2.  使用 ruby​​ 的元编程位时，我应该遵循哪些最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:51:50.533

你用过`attr_accessor`吗？然后你使用了元编程：它是一种生成方法的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T11:35:38.677

我发现元编程主要是库 API 的领域。在创建最终用户应用程序时，您通常不会直接使用其中的大部分内容。但是您可以肯定，您的应用程序所依赖的许多 gem 确实广泛使用它。Rails 就是一个很好的例子。它使用了大量 Ruby 的元编程技巧，使 Rails 的所有魔力成为可能。

# .net - DataGridView过滤CLR c++

> ID：13547744
> 
> 赞同：1
> 
> 时间：2012-11-25T02:26:32.300
> 
> 标签：.net, datagridview, c++-cli, clr

我创建了一个非常基本的程序，其中包含 4 列，`DataGridView`如下所示。我会嵌入图像，但还没有足够的声誉。

[![示例程序](../Images/f90083282af6fa3cce5ed08202c01280.png)](https://i.stack.imgur.com/cXNoX.png)
[（来源：[amicableits.com](http://amicableits.com/stackexchange/Filter%20Sample%20Program.png)）]

我正在尝试基于名字创建一个过滤器，以便用户在名字过滤器旁边的文本框中输入一个值，其中的名字`DataGridView`将被过滤以帮助搜索特定值。我将在我的所有列中应用过滤器，但现在我只需要通过一个示例来掌握这个概念。在互联网上进行大量搜索后，我看到用户分别创建数据表，从文件中读取数据，然后创建视图（或类似的东西）。

我还看到用户绑定数据库中的数据。我想我想要的是一种过滤`DataGridView`.

我以`DataGridView`编程方式将行添加到如下所示：

```
 this->dataGridView1->Rows->Add("1","Jack","Brown",true);
    this->dataGridView1->Rows->Add("2","Jason","Brown",false);
    this->dataGridView1->Rows->Add("3","Adam","Babson",true);
    this->dataGridView1->Rows->Add("4","Pablo","Favor",false);
    this->dataGridView1->Rows->Add("5","Tony","Jones",true);
    this->dataGridView1->Rows->Add("6","Jessica","Sason",true); 
```

Visual Studio 示例程序也可以[在这里下载](http://amicableits.com/stackexchange/datagrid_filter%20source.zip)

任何帮助表示赞赏。
或者，如果有人可以告诉我如何在 datagridview 中创建现有数据的数据视图，这也可能对我有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:03:55.020

简单地用手处理它怎么样：

当用户更新过滤器时，您将搜索与其匹配的行并通过将**Visible**标志设置为 false 来隐藏其他行。

# python - 不可广播的输出操作数 numpy 2D 转换为 3D

> ID：13547749
> 
> 赞同：2
> 
> 时间：2012-11-25T02:27:13.523
> 
> 标签：python, numpy

在 NumPy 中，

```
 foo = np.array([[i+10*j for i in range(10)] for j in range(3)])
    array([[ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9],
           [10, 11, 12, 13, 14, 15, 16, 17, 18, 19],
           [20, 21, 22, 23, 24, 25, 26, 27, 28, 29]])
    filter = np.nonzero(foo > 100)#nothing matches

    foo[:,filter]
    array([], shape=(3, 2, 0), dtype=int64)

    foo[:,0:0]
    array([], shape=(3, 0), dtype=int64)

filter2 = np.nonzero(np.sum(foo,axis=0) < 47)
foo[:,filter2]
array([[[ 0,  1,  2,  3,  4,  5]],

       [[10, 11, 12, 13, 14, 15]],

       [[20, 21, 22, 23, 24, 25]]])
foo[:,filter2].shape
(3, 1, 6) 
```

我有一个“过滤器”条件，我想对所有匹配列的所有行执行操作，但如果过滤器是一个空数组，我的 foo[:,filter] 会以某种方式被广播到一个 3D 数组中。另一个例子是 filter2 -> 再次，当我期待 foo[:,(np.sum(foo,axis=0) < 47)] 的结果时， foo[:,filter2] 给了我一个 3D 数组

有人可以解释 np.nonzero 的正确用例与使用布尔值查找正确的列/索引相比吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:37:54.857

首先，`foo[filter] == foo[filter.nonzero()]`when`filter`是一个布尔数组。

要理解为什么你会得到意想不到的结果，你必须对 python 如何进行索引有所了解。要在 python 中进行多维索引，您可以使用 in 中的索引`[]`，用逗号分隔或使用元组。所以`foo[1, 2, 3]`是一样的`foo[(1, 2, 3)]`。考虑到这一点，看看当你这样做时会发生什么`foo[:, something]`。我相信你试图得到的例子`foo[:, something[0], something[1]]`，但你得到了`foo[(slice[None], (something[0], something[1]))]`。

这有点学术，因为如果您只是`filter`用于索引，您可能不需要使用非零，只需使用布尔数组作为索引，但如果需要，您可以执行以下操作：

```
foo[:, filter[0]]

# OR
index = (slice(None),) + filter.nonzero()
foo[index] 
```

# g++ - G++：错误：无法识别的选项“-soname”

> ID：13547750
> 
> 赞同：5
> 
> 时间：2012-11-25T02:27:30.687
> 
> 标签：g++

我正在尝试在 Ubuntu 12.04 64 位上构建 SLitrani。我已经从源代码构建了 ROOT 5.34.03，并且我确实弄清楚了如何为 $ROOTDEV 设置 LD_LIBRARY_PATH 和 PATH 变量，所以问题不存在但是当我尝试制作 SplineFit 时，我得到了

```
>>> g++: error: unrecognized option ‘-soname=libSplineFit.so’
make: *** [libSplineFit.so] Error 1 
```

我也确实将 Makefiles 中的所有内容都更改`-m32`为`-m64`，所以我不知道发生了什么。我能够安装 TwoPad，但无法从 SplineFit 继续。我在这个版本上已经有一段时间了，如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:34:23.573

从内存中，`soname`是链接器操作，而不是编译器操作。因此，如果您使用`g++`，您可能需要将选项更改为：

```
-Wl,-soname=libSplineFit.so 
```

以下记录表明这是必要的：

```
pax> g++ --soname=x -Wall -o qq qq.cpp
cc1plus: error: unrecognized command line option "-fsoname=x"

pax> g++ -Wl,-soname=x -Wall -o qq qq.cpp

pax> 
```

来自[gcc 的在线 GNU 文档](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Link-Options.html#Link%20Options)：

> **-Wl,option：**将选项作为选项传递给链接器。如果 option 包含逗号，则在逗号处将其拆分为多个选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T12:08:34.203

我知道这是一个老问题，但经过一周的努力，我认为我应该发布我的发现。

我已经为此成功编辑了 makefile，以便它们可以在 Ubuntu 12.04 x64 上编译。

您可以完全删除 -soname 选项，这似乎是不必要的。

如前所述：所有“m32”都更改为“m64”。

您可以将“$ROOTSYS/libs”替换为“$ROOTLIBS”

并使用 TwoPad makefile 重新排序库顺序（在 LIBS += (.....) 下），以便 -lTwoPad 不在列表中的最后一个，而对于 VisuSLitrani，使 -lPhysMore 在其组中的最后一个。

据我所知，可以忽略“设置但未使用”的错误。

如果其中任何一个仍然不起作用，请与我联系，我可以将我的 makefile 发送给您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-17T08:38:26.710

[这里](https://man7.org/conf/lca2006/shared_libraries/slide4b.html)很好地解释了 -soname 链接器选项，如何调用它以及它有什么用处。

**概括**

您可以简单地使用`gcc -shared -Wl,-soname,libfoo_v1.so -o libfoo_v1.so libfoo_v1.o`并跳过以下讨论；）

*   称它为`gcc -shared -Wl,-soname,libfoo.so -o libfoo_v1.so libfoo_v1.o`
*   编译后，您需要创建一个指向 libfoo_v1.so 的符号链接，`ln -s libfoo_v1.so libfoo.so`然后才能执行代码。
*   这用于在编译时和运行时链接不同的共享库。显然这些库需要一个类似的接口。您可以使用它来管理不同的版本。

# .net - 在托管 c++/.net 4.0 中创建对象的 ConcurrentQueue

> ID：13547753
> 
> 赞同：3
> 
> 时间：2012-11-25T02:27:41.550
> 
> 标签：.net, c++-cli, managed-c++

我一直在尝试更新我继承的一些托管 c++ 代码。我不知道任何 c++，但我在 1.1 天参加了 ac# 课程，所以我可以在 .Net 中找到自己的方式。到目前为止，我使用 ConcurrentQueue 将工作从我的主线程发送到工作线程已经取得了很好的效果：

```
fullQueue = gcnew ConcurrentQueue<int>();

..

fullQueue->Enqueue(someNumber); 
```

现在我想尝试插入实际对象，以便向工作人员发送更复杂的指令。但是，这不起作用：

```
public ref class workUnit
{
    int ptrOffset;
    System::String^ outputPath;
    public:
        workUnit(int offset, System::String^ path)
        {
            ptrOffset=offset;
            outputPath=path;
        }
}; 
```

..

```
ConcurrentQueue test = gcnew ConcurrentQueue<workUnit ^>(); 
```

我得到：

```
'System::Collections::Concurrent::ConcurrentQueue' : use of class generic requires generic argument list

'System::Collections::Concurrent::ConcurrentQueue::ConcurrentQueue' : the function template cannot convert parameter 1 from type 'System::Collections::Concurrent::ConcurrentQueue<T> ^' 
```

显然，我遗漏了有关如何将对象插入队列的基本知识。在我的脑海中，我想我正在创建一个队列来保存对稍后可以实例化的类对象的引用，因此 CLR 应该只需要知道将进入什么引用类型，但显然这是不正确的。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:57:47.607

好像你错过了什么:)

```
using namespace System::Collections::Concurrent;

ref class WorkUnit
{
};

int main()
{
    ConcurrentQueue<WorkUnit^>^ test = gcnew ConcurrentQueue<WorkUnit^>();
} 
```

您必须在初始化表达式的两侧引用泛型类型**<WorkUnit^> 。**

# mysql - MySql - 使用触发器运行脚本

> ID：13547756
> 
> 赞同：0
> 
> 时间：2012-11-25T02:28:23.890
> 
> 标签：mysql, triggers

假设我有一个包含触发器代码的脚本，我如何实际启动脚本以使触发器处于活动状态？我该如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:51:24.390

如果您有一个包含用于创建 MySQL 触发器的代码的脚本，您只需执行该脚本以创建触发器，假设该脚本包含以下行中的 MySQL 语句：

```
CREATE
    [DEFINER = { user | CURRENT_USER }]
    TRIGGER trigger_name trigger_time trigger_event
    ON tbl_name FOR EACH ROW trigger_body 
```

[http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)

要摆脱您创建的触发器，您可以`DROP`在 MySQL 中使用带有触发器名称的语句，或者创建另一个脚本来执行 SQL 语句：

```
DROP TRIGGER [IF EXISTS] [schema_name.]trigger_name 
```

[http://dev.mysql.com/doc/refman/5.6/en/drop-trigger.html](http://dev.mysql.com/doc/refman/5.6/en/drop-trigger.html)

要执行 SQL 文件，您只需`@[file_name].sql`在命令行的 SQL 提示符处键入：

[http://www.techonthenet.com/oracle/questions/script.php](http://www.techonthenet.com/oracle/questions/script.php)

# c++ - 避免 C++ 基数排序中的分段错误？

> ID：13547757
> 
> 赞同：-1
> 
> 时间：2012-11-25T02:28:34.763
> 
> 标签：c++, segmentation-fault, radix-sort

使用从互联网上某处获取的代码，我尝试在我的程序中实现基数排序功能。该程序的输入是一个包含大约 120 万个长整数的文本文件。我已经有一个 maxSize = 1200000 的数组，它存储来自文本文件的整数，所以当我在 radixSort 函数中创建工作数组时，我得到了一个段错误。有什么办法可以避免这种情况吗？

这是驱动程序代码：

```
case 5:
    //Sort using Radix Sort
    startTime = clock();

        radixSort(array, size);
        writeArray(radixFile, array, size);
        radixFile.close();

    endTime = clock();
    timeUsed = (endTime-startTime)/(double)CLOCKS_PER_SEC;
    cout << "Time elapsed: " << timeUsed << " seconds" << endl;
    break; 
```

这是功能

```
void radixSort(int *array,int size){

    int i,b[maxSize],m=0,exp=1;

    for(i=0;i<size;i++){
        if(array[i]>m)
            m=array[i];
    }

    while(m/exp>0)
    {
        int bucket[10]={0};

        for(i=0;i<size;i++)
            bucket[array[i]/exp%10]++;

        for(i=1;i<10;i++)
            bucket[i]+=bucket[i-1];

        for(i=size-1;i>=0;i--)
            b[--bucket[array[i]/exp%10]]=array[i];

        for(i=0;i<size;i++)
            array[i]=b[i];

        exp*=10;
    }
} 
```

另外，创建数组的 main 的摘录：

```
 int main(){

      int choice, size=0, x=0;
      int *array = NULL;
      array = new int[maxSize]; 
```

并确定大小：

```
void readArray(ifstream &inputFile, int arr[], int &size){
size = 0;
while (inputFile >> arr[size]){
    size++;
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:39:23.107

1200000 int 至少需要 1200000*4/1024^2 = 4.7 MiB 并且您正在堆栈上声明您的数组，这对于堆栈大小可能不够......

您是否尝试过在堆上声明 b[] ？

尝试

> ```
> int *b = new int[maxSize]; 
> ```

代替

```
int b[maxSize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:06:41.630

您正在错误地读取文件。您应该检查 EOF，因为提取运算符始终返回您提供给它的流（请参阅[http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/](http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/)）。你很可能在这里破坏了记忆，之后所有的赌注都被取消了。尝试：

```
while (!inputFile.eof() && size<maxSize)
{
     inputFile >> arr[size++];
} 
```

# mysql - Mysql join 语句在 localhost 和 godaddy 上的表现不同

> ID：13547761
> 
> 赞同：0
> 
> 时间：2012-11-25T02:29:17.727
> 
> 标签：mysql, codeigniter

我有以下声明：

```
 SELECT * FROM (`titles`) 
 INNER JOIN `mastercat` 
 ON `mastercat`.`PeriodID` = `titles`.`PeriodID` 
 ORDER BY `titles`.`PeriodID` 
```

我的 Godaddy 帐户具有我的 localhost 帐户所具有的确切信息。但是当我在godaddy上运行它时，我得到了双倍的结果......

当我在本地主机上运行它时，我得到了预期的（和正确的）结果。

我在输入sql查询之前使用了codeigniators activerecord，在这两种情况下都出现了同样的问题。

有人见过这个吗？解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:34:40.523

您的 localhost 数据库和 go-daddy 数据库之间的数据集很可能是不同的。我还要建议几件事。
1\. 完全限定您选择查询中的数据库名称，以确保选择了正确的架构
2\. 从您有疑问的每个表中执行 select count(*) 并比较您的 localhost 和 go-daddy 主机之间的结果，以确保他们每个人都有相同数量的记录。

# ruby-on-rails - Rails：如何实现单属性 AJAX 更新？

> ID：13547765
> 
> 赞同：4
> 
> 时间：2012-11-25T02:30:47.310
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我想要单属性 AJAX 更新，例如“单击表中的行标签以切换公共/私有标志”。实现这一点的最佳策略是什么？使用`update`控制器中的方法还是自定义方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T15:03:22.917

除非您有一些令人信服的理由使用自定义方法，否则只需使用正常更新，发送您的典型`object[attr] = value`有效负载。它很简单，开箱即用，并且遵循 REST。

# ruby-on-rails - 如何使用这个类别工厂来填充另一个工厂的属性category_id？

> ID：13547767
> 
> 赞同：0
> 
> 时间：2012-11-25T02:30:54.133
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有以下工厂：

```
 factory :post do
    title "lorem"
    content "lorem ipsum"
    category_id 
    user
  end

  factory :category do
    name "Lorem"
  end 
```

我想以`category_id`某种方式填充`:category`工厂。

在我看来，几乎模仿了我所做的事情：

```
<%= f.collection_select :category_id, Category.order(:name), :id, :name,
                        { prompt: 'Select Category' } %> 
```

（本例中的类别已经创建）。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:53:27.797

如果您只是在工厂中替换`category_id`为，如下所示：`category``post`

```
factory :post do
  title "lorem"
  content "lorem ipsum"
  category
  user
end 
```

`category`然后 factory_girl 将使用工厂发起关联，`category_id`在`Post`记录的过程设置中。有关详细信息，请参阅[有关 factory_girl 与 ActiveRecord 交互的文档](https://github.com/thoughtbot/factory_girl/wiki/How-factory_girl-interacts-with-ActiveRecord)。

# c# - XNA 着色器矩阵参数损坏

> ID：13547769
> 
> 赞同：0
> 
> 时间：2012-11-25T02:31:32.147
> 
> 标签：c#, xna-4.0, hlsl

我在 XNA 4.0 中使用模型实例化，并在并行流中发送我的模型实例转换。我正在关注[本](http://sciencefact.co.uk/2011/12/hardware-geometry-instancing-in-xna-4/)教程。然而，当我想要一个矩阵作为我的着色器的输入时，我得到一个看起来像损坏的矩阵的东西，因为我得到了奇怪的投影结果。

有谁知道问题的根源以及为什么当其他人建议时我不能通过矩阵？

问题：

```
struct VertexShaderInput
{
    float4 Position : POSITION0;    
    float3 Normal : NORMAL0;
    float3 UV : TEXCOORD0;
    float3 Color : COLOR0;
    float3 Tangent : TANGENT0;
    float3 Binormal : BINORMAL0;
    float4x4 World : TEXCOORD3; //Problem 
}; 
```

将顶点着色器函数更改为以下也无济于事：

```
VertexShaderOutput VertexShaderFunction(VertexShaderInput input, float4x4 World : TEXCOORD3)
{

} 
```

如果我只用向量构建矩阵，这可行，我不知道为什么。我丢失数据了吗？

```
struct VertexShaderInput
{
    float4 Position : POSITION0;    
    float3 Normal : NORMAL0;
    float3 UV : TEXCOORD0;
    float3 Color : COLOR0;
    float3 Tangent : TANGENT0;
    float3 Binormal : BINORMAL0;
    float4 World1 : TEXCOORD3;
    float4 World2 : TEXCOORD4;
    float4 World3 : TEXCOORD5;
    float4 World4 : TEXCOORD6;
}; 
```

顶点格式：

```
internal struct InstanceDataVertex   
{
        public Matrix World;

        public InstanceDataVertex(Matrix World)
        {
            this.World = World;
        }

        public readonly static VertexDeclaration VertexDeclaration = new VertexDeclaration
        (
            new VertexElement(0, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 3),
            new VertexElement(sizeof(float) * 4, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 4),
            new VertexElement(sizeof(float) * 8, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 5),
            new VertexElement(sizeof(float) * 12, VertexElementFormat.Vector4, VertexElementUsage.TextureCoordinate, 6)
        );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:34:51.737

GPU 上的输入寄存器的大小是有限的。的大小`TEXCOORDn`是（如此[处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509647(v=vs.85).aspx)`float4`所列）。没有输入。`float4x4`

将矩阵拆分到多个输入寄存器然后重建它应该可以正常工作。只需确保 C# 中的正确值`Matrix`最终出现在 HLSL 中的正确位置即可`float4x4`。我怀疑映射是微不足道的，但我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:10:03.023

这是我在项目中使用的代码

```
 public Instance(Instancer instancer, float scale, Vector3 translate, Vector3 information)
    {
        ID++;
        id = ID;
        this.Scale(scale); 
        this.Translate(translate);
        this.Update(); //update the model matrix modelMatrix=scale*rotate*translate ma!

        Instancer = instancer;

        modelMatrix.M12 = information.X; //additional info unique for each instance
        modelMatrix.M23 = information.Y;
        modelMatrix.M34 = information.Z;
        Instancer.instanceTransformMatrices.Add(this, ModelMatrix);
    } 
```

每个实例的模型矩阵

```
 protected static VertexDeclaration instanceVertexDeclaration = new VertexDeclaration
    (
        new VertexElement(0, VertexElementFormat.Vector4, VertexElementUsage.BlendWeight, 0),
        new VertexElement(16, VertexElementFormat.Vector4, VertexElementUsage.BlendWeight, 1),
        new VertexElement(32, VertexElementFormat.Vector4, VertexElementUsage.BlendWeight, 2),
        new VertexElement(48, VertexElementFormat.Vector4, VertexElementUsage.BlendWeight, 3)
    ); 
```

vbo 的矩阵列表，其中 modelVertexBuffer 是四边形或任何其他几何图形

```
instanceVertexBuffer = new DynamicVertexBuffer(BaseClass.Device, instanceVertexDeclaration, instanceTransformMatrices.Count, BufferUsage.WriteOnly);
            instanceVertexBuffer.SetData(instanceTransformMatrices.Values.ToArray(), 0, instanceTransformMatrices.Count, SetDataOptions.Discard); 
```

绘制函数

```
BaseClass.Device.SetVertexBuffers(
                       new VertexBufferBinding(modelVertexBuffer, 0, 0),
                       new VertexBufferBinding(instanceVertexBuffer, 0, 1)
                   );

BaseClass.Device.Indices = indexBuffer;
BaseClass.Device.DrawInstancedPrimitives(PrimitiveType.TriangleList, 0, 0,modelVertexBuffer.VertexCount, 0,2,instanceTransformMatrices.Count); 
```

顶点着色器示例

```
 VertexOut VS(VertexIn input, float4x4 instanceTransform : BLENDWEIGHT)
 {
    VertexOut Out = (VertexOut)0;

  float4x4 world = transpose(instanceTransform);
  input.Position.xyz = float3(world._41,world._42,world._43); 
```

# c++ - 使用 boost 单元测试的 g++ 项目编译

> ID：13547771
> 
> 赞同：4
> 
> 时间：2012-11-25T02:32:10.683
> 
> 标签：c++, boost, g++

我正在尝试在 Linux 上编译单元测试（增强），但编译器出错。有人可以检查我的命令吗？

```
g++ -o UTest ../UTest/UT1.cpp ../UTest/UT2.cpp -lboost_system -lboost_thread -lboost_unit_test_framework 
```

**错误**

```
/usr/lib/gcc/i686-linux-gnu/4.6/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main' 
```

我`main()`从 g++ 命令中删除了，因为它不应该在使用时`boost unit test`使用。

怎么了？

PS 没有单元测试（带有`main()`）的项目编译得很好。Windows 上的单元测试也可以正常工作。

**更新**

问题`main()`已解决。但是一个新的诞生了。

两者`UT1.cpp`都`UT2.cpp`包括在内`UTCommon.h`，现在我有很多错误，如下所示

**错误**

```
tmp2.cpp:(.text+0xd44a): multiple definition of `boost::unit_test::unit_test_log_t::operator<<(boost::unit_test::lazy_ostream const&)'
/tmp/cc0jw8uR.o:tmp.cpp:(.text+0xd44a): first defined here
/tmp/cctLn9QJ.o: In function `boost::test_tools::tt_detail::equal_impl(char const*, char const*)' 
```

**UTCommon.h**

```
#ifndef UT_COMMON_H
#define UT_COMMON_H

#ifndef BOOST_TEST_MODULE
#define BOOST_TEST_MODULE UnitTest
#endif

#if defined (__GNUC__) && defined(__unix__)
    #include <boost/test/included/unit_test.hpp>
#elif defined (WIN32)
    #include <boost/test/unit_test.hpp>
#endif

#endif 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T02:56:29.770

最好创建一个包含该文件的单独 .cpp 文件`boost/test/included/unit_test.hpp`。`main()`这将在您的代码中包含一个预先生成的函数。然后，您可以将`BOOST_AUTO_TEST_CASE`宏用于实际测试（任意多次）：

```
#define BOOST_TEST_DYN_LINK        // this is optional
#define BOOST_TEST_MODULE MyTest   // specify the name of your test module
#include <boost/test/included/unit_test.hpp>  // include this to get main()

BOOST_AUTO_TEST_CASE(my_test_1)    // specify a test case
{
  /* Test something... */
  const static auto expected = 12;
  auto actual = my_func();

  BOOST_CHECK(actual == expected);
} 
```

编译这个 .cpp 文件（根据需要为您自己代码中定义的所有函数添加链接器选项），它将成为执行所有测试并生成报告的可执行文件。

# java - 如何在一个圆圈内画一个圆圈？

> ID：13547772
> 
> 赞同：0
> 
> 时间：2012-11-25T02:32:12.580
> 
> 标签：java, graphics, awt, geometry, java-2d

我试图在一个大圆圈内绘制一堆具有不同绿色深浅的小圆圈以获得“灌木”外观，但我不知道如何让所有小圆圈形状为一个大圆圈。我只能弄清楚如何在一个矩形内得到它。

```
public void paintComponent(Graphics g)
   {
      super.paintComponent(g);

      for(int i = 0; i < 1000; i++){
         int redV = (int) ((Math.random() * 100) + 27);
         g.setColor(new Color(red, red + 31, red - 15));

         int x = (int) ((Math.random() * 400) + 150);
         int y = (int) ((Math.random() * 500) + 200);

         g.fillOval(x, y, 50, 50);
      }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T02:44:23.633

我想你必须在这里做一些几何，并验证随机生成的 x 和 y 坐标是否在你的圈内。如您所说，在矩形内很容易（因为您只需检查 x > left, x+50 < right, y > top, y+50 < bottom），但是对于圆，您必须使用[圆的方程](http://www.mathwarehouse.com/geometry/circle/equation-of-a-circle.php)和检查 (x,y) 和 (x+50,y+50) 在实际执行之前是否在其中`fillOval()`。

[我认为您可以通过使用Ellipse2D](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.Double.html)实现的 Java 2D [Shape.contains()](http://docs.oracle.com/javase/7/docs/api/java/awt/Shape.html)有一个简单的出路。所以本质上你创建了一个更大的圆的实例，然后在每次生成坐标时调用，以在绘制它们之前检查它们是否在其中。`Ellipse2D.Double``Ellipse2D.Float``contains()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T12:29:11.060

选择应该是大圆中心的点，并相对于它绘制大圆（例如使用java.awt.geom.Ellipse2D）。

然后，您可以使用大圆的中心及其半径将其他较小的圆也相对于该圆定位在圆周内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T02:34:50.780

我认为您可以稍微更改颜色，并稍微增加/减少 x、y、宽度和高度，以使它们位于较旧的圆圈内。新的椭圆形应该涂在旧的椭圆形上。

# php - 将远程 SQL Server 连接到 PHP

> ID：13547775
> 
> 赞同：2
> 
> 时间：2012-11-25T02:33:20.953
> 
> 标签：php, sql-server

任何人都可以从以下参数中解释连接字符串：

```
server IP : 192.168.137.4
Windows Authentication : Windows Authentication
UserName : DELL-M102Z\dell
Database : DataProd 
Network Protocol : <default>
Product Name : Microsoft SQL Server Express Edition
Server Name : DELL-M102Z\SQLEXPRESS
Instance Name : SQLEXPRESS
Computer Name : DELL-M102Z 
```

我试过：

```
$serverName = "DELL-M102Z\SQLEXPRESS"; //serverName\instanceName
$username = "DELL-M102Z\dell"; //serverName\instanceName
$conn = mssql_connect( $serverName,$username,''); 
```

...但我得到的结果是：

> 警告：mssql_connect() [function.mssql-connect]: Unable to connect to server: DELL-M102Z\SQLEXPRESS in C:...\index.php on line 17 无法建立连接。

谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:09:15.700

尝试执行此步骤： http: [//michaelellerbeck.com/2010/03/31/cant-connect-remotely-to-sql-server-2008/](http://michaelellerbeck.com/2010/03/31/cant-connect-remotely-to-sql-server-2008/) 我知道我错过了激活 sql 浏览器服务，这就是为什么我不能通过远程IP连接，

我从那个网站得到了结论，我必须确保：

```
1\. make sure you have allow network connection from sql server configuration tool
2\. allow connection for this port in firewall
3\. activate sql browser service
4\. make sure port is listen as the the service provide 
```

我遇到了 3 号问题，我被困住了，这个网站解决了这个问题： http: [//www.wikihow.com/Enable-Remote-Connections-SQL-2008-Express](http://www.wikihow.com/Enable-Remote-Connections-SQL-2008-Express)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T09:52:40.883

```
<?php
$myServer = 'xxx.xxx.xxx.xxx:yyyy';
$myUser = 'sa';
$myPass = 'xxxxx';

$con = mssql_connect($myServer, $myUser, $myPass) or die("Could not connect to database: ".mssql_get_last_message()); 
if($con){
echo "connected";
}
// Select a database:
mssql_select_db('new') 
    or die('Could not select a database.');

// Example query: (TOP 10 equal LIMIT 0,10 in MySQL)
$SQL = "SELECT TOP 10 * FROM Table";

// Execute query:
$result = mssql_query($SQL) 
    or die('A error occured: ' . mysql_error());

// Get result count:
$count = mssql_num_rows($result);
print "Showing $count rows:<hr/>\n\n";

// Fetch rows:
while ($Row = mssql_fetch_assoc($result)) {

    print $Row['BillNo'] . "\n";

}

mssql_close($con); 
```

* * *

$myServer = 'IP_Address:PORT';

这里分号需要 ip 和 port 并且 Mssql 在你的 cpanel 中被 enbaled

# redirect - wamp 配置显示而不是我的网站页面

> ID：13547777
> 
> 赞同：1
> 
> 时间：2012-11-25T02:34:01.730
> 
> 标签：redirect, joomla, wamp

我在我的计算机中安装了 WAMP 服务器并成功将我的 IP 配置为重定向到我的域，但我的问题是当我输入我的 IP 或域名时，我被重定向到 WAMP 配置页面而不是[http://mydomain.com/project](http://mydomain.com/project)。

我正在运行 Joomla CMS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:42:22.113

我认为您误解了 WAMP 的目的。您不安装 WAMP，然后将任何内容重定向到您的域。你描述的过程没有意义。

如果您尝试在本地主机上设置 Joomla 或设置开发环境，请检查：[Joomla Development](http://docs.joomla.org/Setting_up_your_workstation_for_joomla_development)或[Local Joomla](http://www.codeproject.com/Articles/36633/Configuring-Joomla-in-Step-by-Step-Manner)

# php - 带有静态变量和函数的 PHP 扩展类

> ID：13547780
> 
> 赞同：0
> 
> 时间：2012-11-25T02:34:31.603
> 
> 标签：php, inheritance, static

我有一个问题，嗯，很多，但这个问题特别涉及以下内容：

我有一个我已经构建的数据库连接类 - 仔细从我所知道的内容和诸如此类的帖子中获取点点滴滴 - 它利用静态变量进行连接。这是该课程的一个片段：

```
class DatabaseConnection {
private static $dbconn;
private static $conn;
private $user;
private $pass;

public static function getInstance ( ) {
    if ( !self::$dbconn )   {
        self::$dbconn = new self();
    }
    return self::$dbconn;
}

...
...

public function getConnection()
{

    if ( $this->conn ) 
    { 
        return $this->conn ;
    }
    if (!$this->detailsSet) return null;
    try {       
        self::$conn = new PDO ($this->dsn, $this->user, $this->pass, $this->options);
        foreach ( $attributes as $k => $v ) {
            self::$conn -> setAttribute ( constant ( "PDO::{$k}" ), constant ( "PDO::{$v}" ) ) ;
        }
        return self::$conn ;
    }
    catch (Exception $e) {
        return null;    
    }
}
...
...

} 
```

我现在要做的是扩展这个类，以便具体了解可以执行的操作。例如，我有一个名为 UserRecordUpdater 的类。这是一个片段：

```
class UserRecordUpdater extends DatabaseConnection
{
public static function getInstance ( ) {
    if ( !self::$dbconn )   {
        self::$dbconn = new self();
    }
    return self::$dbconn;
}

public function addUser($newUser)
{
...
}
...
...
} 
```

因此，如果您无法破译我正在尝试做的事情，我正在尝试创建一些新类（例如上面的子类），它们将利用在父类中创建的现有静态连接，但会有自己特定的一套操作。

这是我从主脚本中调用此代码的方式：

```
include_once('./library/DatabaseConnection.php');
include_once('./library/UserRecordUpdater.php');

...

$userUpdater = UserRecordUpdater::getInstance();

...

$userUpdater->addUser($someuser); 
```

请假设`...`'s 之间的代码工作正常...

现在，这一切都说，我得到了错误：

`PHP Fatal error: Cannot access property UserRecordUpdater::$dbconn in /path/UserRecordUpdater.php`

错误指向行：`if ( !self::$dbconn )`在子类中。

现在，在指出明显的（即 $dbconn 在父级中，所以我应该使用之前`parent::$dbconn`，请注意我已经尝试过这个，我知道它不会起作用。这绝对是我对继承缺乏了解以及我的缺乏对静态变量的理解但至少希望我的解释足够清楚，可以回答什么是“正确”的方法（或至少一种正确的方法）。

# delphi - Delphi ASIO VST 和 MiniHost 的 Midi 时序问题

> ID：13547783
> 
> 赞同：54
> 
> 时间：2012-11-25T02:34:45.817
> 
> 标签：delphi, delphi-xe2, midi, vst

我来自使用[MSC* MidiSequencer](http://sourceforge.net/projects/midisequencer/)进行 Delphi XE2 项目的背景，并且本周末一直在玩 DelphiASIOVST，因为 MIDI 可能足够稳定，可以用作我的核心 MIDI 引擎，同时还允许我支持 VST 插件ins。经过一些路径调整后，我将 D16 主干从 SVN 中拉出并毫不费力地进行了编译。

我了解我所看到的很多内容，但我想知道其他人是否在 MiniHost 示例应用程序中遇到过 MIDI 文件播放问题。特别是在单轨旋律演奏中，听起来好像音符被跳过和/或播放得比其他正在播放的音符稍晚一些。基本上，如果一个音符被弹奏，它只是命中或未命中。

我的机器上有许多专业音序器，MIDI 文件在那里很好。他们还支持 VST，几乎没有问题。我也知道 MIDI 最低级别的文件格式，并且知道文件结构是合理的。

TMidiFile 可以直接播放到计算机中的标准 MIDI 合成器吗？我试图通过直接连接到内置合成器的管道来排除 VST 问题。除此之外，是否有人看到这些问题或知道使用组件集将 MIDI 文件转换为 VST 的更多/更好的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T17:01:45.533

我将 FL 工作室与我的 Midi 一起使用，并且很有可能您需要降低缓冲质量，以便几乎没有延迟。它可能默认设置为大约中高范围，这意味着您几乎可以肯定会有 1 - 1.5 秒的延迟

不要把它调得太低，否则你会听到垃圾桶的声音，一切听起来都是空洞和机械的，但是在你调整设置的时候继续砸钥匙

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T10:00:15.553

字时钟功能是否正常？你有能力驱动另一个 MIDI 时钟源，只是为了测试？

虽然你说：“我的机器上有很多专业音序器，而且 MIDI 文件在那里很好”，但你也可以尝试[http://www.reaper.fm](http://www.reaper.fm)（适用于 Linux/BSD、Mac 和 Win）DAW 并导入midi 直接进入，然后将您的默认 midi 设备设置为您想要测试的设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-13T09:21:32.017

1.  检查 Midi 溢出设置。
2.  确保您的每个 Midi 设备都有唯一的 ID。
3.  获取 midi 吞吐量应用程序，例如 Midi-ox [http://www.midiox.com/](http://www.midiox.com/)以查看实时消息和数据。看看事情进展如何。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-23T12:11:44.190

根据我们的要求进行设置需要 Midi 工作流程检查。使用您的 midi 溢出中指定的唯一 ID 设置所有设备。Midi 吞吐量应用程序需要查看实时消息和实时数据。用户必须看到他们要去什么目的的东西。

希望这会帮助你...

# python - django文件上传到动态路径

> ID：13547787
> 
> 赞同：1
> 
> 时间：2012-11-25T02:35:30.310
> 
> 标签：python, django

我正在尝试将文件上传到 django。因此，我尝试使用下面的代码为文件创建动态路径。但是，它不起作用。

我实际上不确定如何在 model.py 中使用实例以及如何将路径传递给 def get_file_path。具体来说，我想要的是从views.py中的函数传递文件路径。例如，当我调用类似 docfile.save(filepath) 的东西时，它将被保存在 django 的那个文件路径中。你能帮我解决这个问题吗？

一个例子：

```
 docfile.save(path1)

it will be saved in /path1/file_name 
```

注意：path1 可以是任何东西，它与任何模型字段无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:42:05.810

例如，您可以在模型上有一个额外的字段（例如`path`），指定您可以通过`instance.path`in访问的路径`get_file_path`。您无法访问`save`此函数中的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:50:22.117

您可以编写自定义文件字段。

```
class MyFieldField(FileField):

def get_path(self, attname):
        return 'path/to/%d' % self.id

def contribute_to_class(self, cls, name):
    super(MyFileField, self).contribute_to_class(cls, name)
    dispatcher.connect(self._post_init, signals.post_init, sender=cls)

def _post_init(self, instance=None):
    if hasattr(instance, 'get_path'):
        self.upload_to = instance.get_path(self.attname)

def db_type(self):
    return 'varchar(100)' 
```

# java - RandomAccess 接口，为什么没有方法？

> ID：13547789
> 
> 赞同：3
> 
> 时间：2012-11-25T02:35:51.390
> 
> 标签：java, collections, random-access

我正在阅读[Collections.shuffle(List) javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)，然后查看了[RandomAccess javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/RandomAccess.html)：

> List 实现使用的标记接口表明它们支持快速（通常是恒定时间）随机访问。[...]

我想知道为什么这个接口（如 Serializable）没有方法？这样做的设计原因是什么？

即使只有Lists“实现”了这个接口，为什么不设置E`get()`作为方法呢？我知道不是每个列表都是随机访问的，但是如果没有方法，我该如何使用这个接口？

像这样的东西：

```
if(object instanceof RandomAccess){
    // should I cast it if no operations can be done? why?
} 
```

另外，只有Lists可以是RandomAccess吗？文件呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T02:38:34.443

“标记”接口是一种早于注释的技术；它旨在将 Class 标记为符合某个标准，而该标准与方法无关。

在这种情况下，Shuffle 在不支持快速随机访问的列表上可能会有所不同。考虑如何打乱一个链表；这很难，对吧？你不能只说“给我一个随机元素”而不遍历列表，跟随指向下一个元素的指针。现在将其与 ArrayList 进行对比。由于列表的存储方式，获取随机元素要容易得多。

没有办法在方法名称中限定“列表的存储方式”或“不同的访问模式可能有多快或多慢”。因此，Java 使用标记接口来提供此信息。

在这种情况下，ArrayList 将是一个 RandomAccess，而 LinkedList 不是。

**编辑**

那些对标记接口和标记注释之间的区别感兴趣的人会喜欢 Joshua Bloch 在 Effective Java 2nd Edition 中的 Item 37：“使用标记接口定义类型”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T02:38:21.377

这是一个标记界面。它定义了不使用任何额外方法的行为或能力。

在这种情况下，它表示随机访问（已经在 List 接口中定义）不仅是可能的，而且是有效的。使用 List 的代码可以根据这个在算法之间切换。

人们可以争论这是否是一个好的设计决策。例如，随机访问方法可能已从 List 中删除（只允许迭代），而是放入 RandomAccess 接口中。同样，对象序列化系统的方法也可以放在 Serializable 接口中。

> 另外，只有Lists可以是RandomAccess吗？

我猜这个接口也可以用于其他用途，但看起来它目前只被 Lists 使用。

> 文件呢？

随机访问文件有一个单独的机制 (java.io.RandomAccessFile)。

# r - 在嵌套 for 循环中提高性能的提示？

> ID：13547792
> 
> 赞同：3
> 
> 时间：2012-11-25T02:36:59.280
> 
> 标签：r

在仅填充整数的 100x100 矩阵中，我在以元素 1,1 开始（并包括）开始的每一行内执行成对比较。对于任何为 TRUE 的比较，我在另一个预分配矩阵 [x]（这只是一个相似矩阵）中的相应元素处计算 +1。

使用嵌套的 for 循环，此操作需要对每一行进行 N*(N-1)/2 + N 次比较。在我的机器上，下面的代码不会花费太长时间，但是有更好（好的，更快，更优雅）的方法吗？我已经考虑过使用“应用”的矢量化计算，但到目前为止，还没有任何乐趣。

```
result <- matrix( round(rnorm(10000,sample(5))), ncol=100)
x <-matrix(data=0, nrow=100,ncol=100)

system.time(
for (i in 1:100) {
  for (j in 1:100) {
    for (k in j:100) {
        if (result[i,][j] == result[i,][k]) {
        x[j,][k] = x[j,][k] + 1
        }
    }
  }
}
)
user  system elapsed
6.586   0.599   7.192 
```

这是一个小例子：

“结果”矩阵

```
 [,1] [,2] [,3] [,4]
[1,]    1    6    1    1
[2,]    6    1    5    3
[3,]    1    5    4    4
[4,]    2    3    4    2

structure(c(1, 6, 1, 2, 6, 1, 5, 3, 1, 5, 4, 4, 1, 3, 4, 2), .Dim = c(4L,4L)) 
```

在代码应用之后，我期望在 x 矩阵中：

```
 [,1] [,2] [,3] [,4]
[1,]    4    0    1    2
[2,]    0    4    0    0
[3,]    0    0    4    2
[4,]    0    0    0    4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T13:26:45.193

`result`使用您的 100×100矩阵，这在我的机器上大约快 100 倍（50 毫秒） ：

```
for (i in 1:ncol(result))
   for (j in i:ncol(result))
      x[i, j] <- sum(result[, i] == result[, j]) 
```

这大约快 200 倍，但可能有点难以理解：

```
x <- apply(result, 2, function(y)colSums(result == y))
x[lower.tri(x)] <- 0 
```

如果它仍然不足以满足您的口味，我会看看这个确切的功能是否尚未在众多距离包之一中实现，或者尝试`Rcpp`实现。虽然我不确定你会得到更多，因为我的建议已经使用了大量的矢量化。

# php - 选择一个类别中的 wordpress 帖子并按所有其他类别分组？

> ID：13547793
> 
> 赞同：1
> 
> 时间：2012-11-25T02:37:14.147
> 
> 标签：php, wordpress-theming, categories, wordpress

我看到的所有代码示例都涉及父类别和子猫。但是，我所拥有的是这样的类别（简化）：

```
-Towns
--NY
--Chicago
--LA
-Restaurants
-Theatres
-Stores 
```

现在，我为芝加哥创建了一个页面。我想在上面显示与芝加哥匹配的所有其他项目：

```
-Restaurants
--restaurant 1
--restaurant 2
--restaurant 3
-Stores
--store 1
--store 2
etc 
```

我该怎么做？在模板中，我想我必须从当前页面的 URL 中获取 slug 并首先查询该类别（芝加哥），然后循环其他类别，但我不完全确定如何。

编辑：我也需要反过来做，按城市分组显示该国的所有餐馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:02:02.130

您可以尝试另一种方法。创建自定义帖子类型：餐馆、商店等。示例：

```
add_action( 'init', 'create_post_type' );
function create_post_type() {
    register_post_type( 'restaurants',
        array(
            'labels' => array(
                'name' => __( 'Restaurants' ),
                'singular_name' => __( 'Restaurants' )
            ),
        'public' => true,
        'has_archive' => true,
        )
    );
} 
```

然后，您为芝加哥创建一个页面，为餐厅 1、餐厅 2、餐厅 1 类型的餐厅创建条目，并将所有这些条目分配给芝加哥类别。

现在，在芝加哥的模板中，您可以显示分配给芝加哥类别的餐厅类型的所有条目。

```
//add this after the Loop

query_posts( array(
    'post_type' => 'restaurants',
    'category_name' => 'chicago', //use category slug
    'posts_per_page' => -1,
    'post_status' => 'publish',
) );

// The Loop
while ( have_posts() ) : the_post();
    echo '<li>';
    the_title();
    echo '</li>';
endwhile;

// Reset Query
wp_reset_query(); 
```

此外，`category_name`您可以使用`cat`参数而不是参数，它采用类别 ID。

# perl - 套接字中的 Socket recv、sysread 和 Posix::read 之间的区别？

> ID：13547796
> 
> 赞同：4
> 
> 时间：2012-11-25T02:38:00.440
> 
> 标签：perl

我在 perl 中找到至少 3 种从非阻塞套接字读取的方法

```
$socket->recv
$socket->sysread
POSIX::read($socket,... 
```

看起来同一事物有 3 个不同的名称，我阅读了文档，但找不到一个巨大的不同之处。任何人？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T02:44:52.947

`sysread`是面向流（TCP）的（它不关心一个发送在哪里结束，另一个在哪里开始），并且`recv`是面向数据报（UDP）的（它确实关心）。

`POSIX::read`适用于文件描述符，而`sysread`适用于文件句柄。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T08:43:22.483

最好的文档来源`recv()`是`man recvfrom`- 它基本上是该系统调用的 perl 接口。请注意，`recv()`它通常用于设置为非面向连接的套接字（即 UDP 套接字），但也可用于面向连接（即 TCP）的套接字。

和之间`read()`的人的区别是：`sysread()``POSIX::read()`

*   `read(...)`获取文件句柄并缓冲 IO
*   `sysread(...)`获取文件句柄并且 IO 没有缓冲
*   `POSIX::read(...)`接受一个文件描述符并且 IO 没有被缓冲

文件描述符是一个由 . 返回的值（一个小整数）`POSIX::open()`。`fileno()`此外，您可以通过该函数获取 perl 文件句柄的文件描述符。

# prolog - 如何以约束满足的方式对爱因斯坦的谜语进行建模（Prolog）

> ID：13547797
> 
> 赞同：1
> 
> 时间：2012-11-25T02:38:13.937
> 
> 标签：prolog, clpfd, zebra-puzzle

我的 IA 任务是解决爱因斯坦问题。

我必须使用 Prolog 中的 CSP 模型来解决它。我没有给出模型，只有问题和一些输入数据。我的解决方案必须是通用的，我的意思是，对于一些输入数据我必须提供一个解决方案。问题的维度是 N，例如 N 可能是 5（我们有 5 个房子），但它可以变化。

我在 Internet 上找到的许多解决方案都将约束直接放在代码中，但我需要使用输入数据生成它们。该问题必须使用 MAC（维护弧一致性）算法来解决。

我已经阅读了很多关于它的内容（爱因斯坦之谜）。为了实现这个问题，我需要一个问题的表示。

问题是，我不知道如何在 Prolog 中准确地表示问题（我知道基本的 Prolog，没有使用其他库，我们不允许使用 clpfd 库 - prolog clp 求解器）。

我知道我应该从输入（14条线索）+约束说明来自同一组的所有变量（例如国籍）应该不同，我可以实现我的谓词，例如：

```
my_all_different(like all_different/1 offered by clpfd). 
```

例如：

```
Attributes = ['Color', 'Nationality', 'Drink', 'Smoke', 'Pet'].

Values = [['Blue', 'Green', 'Ivory', 'Red', 'Yellow'],
['Englishman', 'Japanese', 'Norwegian', 'Spaniard', 'Ukrainian'],
['Coffee', 'Milk', 'Orange juice', 'Tea', 'Water'],
['Chesterfield', 'Kools', 'Lucky Strike', 'Old Gold', 'Parliament'],
['Dog', 'Fox', 'Horse', 'Snails', 'Zebra']
]).

Statements = 'The Englishman lives in the red house',
'The Spaniard owns the dog',
'Coffee is drunk in the green house',
'The Ukrainian drinks tea',
'The green house is immediately to the right of the ivory house',
'The Old Gold smoker owns snails',
'Kools are smoked in the yellow house',
'Milk is drunk in the middle house',
'The Norwegian lives in the first house',
'The man who smokes Chesterfield lives in the house next to the man with the fox',
'Kools are smoked in the house next to the house where the horse is kept',
'The Lucky Strike smoker drinks orange juice',
'The Japanese smokes Parliament',
'The Norwegian lives next to the blue house'
]).

Question = 'Who owns a zebra'? 
```

现在，我设法解析了这个输入并获得了一个列表列表：

```
R = [[red,englishman]
[spaniard,dog]
[green,coffee]
[ukrainian,tea]
[green,ivory,right]
[old,snails]
[yellow,kools]
[milk,middle]
[norwegian,first]
[chesterfield,fox,next]
[kools,horse,next]
[orange,lucky]
[japanese,parliament]
[blue,norwegian,next]]. 
```

现在我想我需要使用这个生成的信息来构建一些约束，从我读过的内容来看，使用二进制约束（我认为表示为谓词）是一个好主意，但是我也有一些一元约束，所以我应该怎么做代表约束以包括所有这些？

另一个问题是：如何表示变量（我将在其中获得计算数据），这样我就不需要搜索和修改列表（因为在 prolog 中你不能像在命令式语言中那样修改列表）。

所以我想使用一个变量列表，其中每个变量/元素由一个 3 元组表示：（`var, domain, attrV`），其中 var 包含变量的当前值，域是一个列表说：[1,2,3,4, .., N], attrV 是对应属性（例如红色）的一个值（N）。一个元素是：`(C, [1, 2, 3, 4, 5], red)`.

其他问题：我应该如何在 prolog 中实现 MAC 算法（使用 AC-3 算法），因为我将有一个元组队列，如果不满足约束，这个队列将被修改，这意味着修改变量列表，以及我应该如何修改 Prolog 中的列表。

任何帮助，将不胜感激！

* * *

我尝试使用您上面提供的链接中的 CSP 求解器解决特定版本的问题，但我仍然无法找到解决方案，我想获得解决方案，因为通过这种方式，我会知道如何正确表示通用版本的约束。

添加代码：

```
% Computational Intelligence: a logical approach.
% Prolog Code.
% A CSP solver using arc consistency (Figure 4.8)
% Copyright (c) 1998, Poole, Mackworth, Goebel and Oxford University Press.

% csp(Domains, Relations) means that each variable has
% an instantiation to one of the values in its Domain
% such that all the Relations are satisfied.
% Domains represented as list of
% [dom(V,[c1,...,cn]),...]
% Relations represented as [rel([X,Y],r(X,Y)),...]
%  for some r
csp(Doms,Relns) :-
   write('CSP Level'), nl,
   ac(Doms,Relns).

% ac(Dom,Relns) is true if the domain constrants
% specified in Dom and the binary relations
% constraints specified in Relns are satisfied.
ac(Doms,Relns) :-
   make_arcs(Relns,A),
   consistent(Doms,[],A,A),
   write('Final Doms '), write(Doms), nl, %test
   write('Final Arcs '), write(A), nl. %test

% make_arcs(Relns, Arcs) makes arcs Arcs corresponding to
% relations Relns. There are acrs for each ordering of
% variables in a relations.
make_arcs([],[]).
make_arcs([rel([X,Y],R)|O],
          [rel([X,Y],R),rel([Y,X],R)|OA]) :-
   make_arcs(O,OA).

% consistent(Doms,CA,TDA,A) is true if
% Doms is a set of domains
% CA is a set of consistent arcs,
% TDA is a list of arcs to do
% A is a list of all arcs
consistent(Doms,CA,TDA,A) :-
   consider(Doms,RedDoms,CA,TDA),
   write('Consistent Doms '), write(RedDoms), nl, %test
   solutions(RedDoms,A),
   write('Consistent Doms '), write(RedDoms), nl, %test
   write('Consistent Arcs '), write(A), nl. %test

% consider(D0,D1,CA,TDA)
% D0 is the set of inital domains
% D1 is the set of reduced domains
% CA = consistent arcs,
% TDA = to do arcs
consider(D,D,_,[]).
consider(D0,D3,CA,[rel([X,Y],R)|TDA]) :-
   choose(dom(XV,DX),D0,D1),X==XV,
  % write('D0 '), write(D0),
  % write('D1 '), write(D1), nl,
   choose(dom(YV,DY),D1,_),Y==YV, !,
   prune(X,DX,Y,DY,R,NDX),
   ( NDX = DX
   ->
     consider(D0,D3,[rel([X,Y],R)|CA],TDA)
   ; acc_todo(X,Y,CA,CA1,TDA,TDA1),
     consider([dom(X,NDX)|D1],D3,
              [rel([X,Y],R)|CA1],TDA1)).

% prune(X,DX,Y,DY,R,NDX)
% variable X had domain DX
% variable Y has domain DY
% R is a relation on X and Y
% NDX = {X in DX | exists Y such that R(X,Y) is true}
prune(_,[],_,_,_,[]).
prune(X,[V|XD],Y,YD,R,XD1):-
   \+ (X=V,member(Y,YD),R),!,
   prune(X,XD,Y,YD,R,XD1).
prune(X,[V|XD],Y,YD,R,[V|XD1]):-
   prune(X,XD,Y,YD,R,XD1).

% acc_todo(X,Y,CA,CA1,TDA,TDA1)
% given variables X and Y,
% updates consistent arcs from CA to CA1 and
% to do arcs from TDA to TDA1
acc_todo(_,_,[],[],TDA,TDA).
acc_todo(X,Y,[rel([U,V],R)|CA0],
         [rel([U,V],R)|CA1],TDA0,TDA1) :-
   ( X \== V
   ; X == V,
     Y == U),
   acc_todo(X,Y,CA0,CA1,TDA0,TDA1).
acc_todo(X,Y,[rel([U,V],R)|CA0],
         CA1,TDA0,[rel([U,V],R)|TDA1]) :-
   X == V,
   Y \== U,
   acc_todo(X,Y,CA0,CA1,TDA0,TDA1).

% solutions(Doms,Arcs) given a reduced set of
% domains, Dome, and arcs Arcs, solves the CSP.
solutions(Doms,_) :-
   solve_singletons(Doms),
   write('Single Doms '), write(Doms), nl. %test
solutions(Doms,A) :-
   my_select(dom(X,[XV1,XV2|XVs]),Doms,ODoms),
   split([XV1,XV2|XVs],DX1,DX2),
   acc_todo(X,_,A,CA,[],TDA),
   ( consistent([dom(X,DX1)|ODoms],CA,TDA,A)
   ; consistent([dom(X,DX2)|ODoms],CA,TDA,A)).

% solve_singletons(Doms) is true if Doms is a
% set of singletom domains, with the variables
% assigned to the unique values in the domain
solve_singletons([]).
solve_singletons([dom(X,[X])|Doms]) :-
   solve_singletons(Doms).

% select(E,L,L1) selects the first element of
% L that matches E, with L1 being the remaining
% elements.
my_select(D,Doms,ODoms) :-
   select(D,Doms,ODoms), !.

% choose(E,L,L1) chooses an element of
% L that matches E, with L1 being the remaining
% elements.
choose(D,Doms,ODoms) :-
   select(D,Doms,ODoms).

% split(L,L1,L2) splits list L into two lists L1 and L2
% with the about same number of elements in each list.
split([],[],[]).
split([A],[A],[]).
split([A,B|R],[A|R1],[B|R2]) :-
   split(R,R1,R2).

/* -------------------------------------------------------------------*/

cs1(V, V). %A1 = A2
cs2(V1, V2) :- (V1 is V2 - 1; V2 is V1 - 1). %next
cs3(V1, V2) :- V1 is V2 + 1\. %right

zebra(English,Spaniard,Ukrainian,Norwegian,Japanese,
       Red,Green,Ivory,Yellow,Blue,
       Dog,Snails,Fox,Horse,Zebra,
       Coffee,Tea,Milk,Orange_Juice,Water,
       Old_Gold,Kools,Chesterfields,Lucky_Strike,Parliaments) :-

 csp([dom(English, [1, 2, 3, 4, 5]),
     dom(Spaniard, [1, 2, 3, 4, 5]),
     dom(Ukrainian, [1, 2, 3, 4, 5]),
     dom(Norwegian, [1, 2, 3, 4, 5]),
     dom(Japanese, [1, 2, 3, 4, 5]),
     dom(Red, [1, 2, 3, 4, 5]),
     dom(Green, [1, 2, 3, 4, 5]),
     dom(Ivory, [1, 2, 3, 4, 5]),
     dom(Yellow, [1, 2, 3, 4, 5]),
     dom(Blue, [1, 2, 3, 4, 5]),
     dom(Dog, [1, 2, 3, 4, 5]),
     dom(Snails, [1, 2, 3, 4, 5]),
     dom(Fox, [1, 2, 3, 4, 5]),
     dom(Horse, [1, 2, 3, 4, 5]),
     dom(Zebra, [1, 2, 3, 4, 5]),
     dom(Coffee, [1, 2, 3, 4, 5]),
     dom(Tea, [1, 2, 3, 4, 5]),
     dom(Milk, [1, 2, 3, 4, 5]),
     dom(Orange_Juice, [1, 2, 3, 4, 5]),
     dom(Water, [1, 2, 3, 4, 5]),
     dom(Old_Gold, [1, 2, 3, 4, 5]),
     dom(Kools, [1, 2, 3, 4, 5]),
     dom(Chesterfields, [1, 2, 3, 4, 5]),
     dom(Lucky_Strike, [1, 2, 3, 4, 5]),
     dom(Parliaments, [1, 2, 3, 4, 5])],
     [rel([English, Red], cs1(English,Red)),
     rel([Spaniard, Dog], cs1(Spaniard,Dog)),
     rel([Coffee, Green], cs1(Coffee,Green)),
     rel([Ukrainian, Tea], cs1(Ukrainian,Tea)),
     rel([Green, Ivory], cs3(Green,Ivory)),
     rel([Old_Gold, Snails], cs1(Old_Gold,Snails)),
     rel([Kools, Yellow], cs1(Kools,Yellow)),
     rel([Milk, Milk], Milk = 3),
     rel([Norwegian, Norwegian], Norwegian = 1), %here is the problem
     rel([Chesterfields, Fox], cs2(Chesterfields,Fox)),
     rel([Kools, Horse], cs2(Kools,Horse)),
     rel([Lucky_Strike, Orange_juice], cs1(Lucky_Strike,Orange_juice)),
     rel([Japanese, Parliaments], cs1(Japanese,Parliaments)),
     rel([Norwegian, Blue], cs2(Norwegian,Blue))]). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:38:21.707

我已经做了一些搜索，然后我建议[阅读](http://www.cs.ubc.ca/~poole/ci/ci_code.html)一些关于 使用与[示例数据](http://www.cs.ubc.ca/~poole/ci/code/ch4/csp_t1.pl)[的弧一致性的约束满足](http://www.cs.ubc.ca/~poole/ci/code/ch4/csp.pl)

**在这里再次编辑**到目前为止的努力。唉，添加最后一个约束会使结果无效。明天我会试着理解为什么

**好消息！！**我在 next/2 中发现了愚蠢的错误

```
:- include(csp).

next(V1, V2) :-
    succ(V1, V2) ; succ(V2, V1).

dom(I, O, D) :-
    maplist(dom, I, O),
    alldiff(I, [], D).
dom(V, dom(V, [1,2,3,4,5])).

alldiff([], D, D).
alldiff([V|Vs], S, D) :-
    maplist(rdiff(V), Vs, Ds),
    append(S, Ds, As),
    alldiff(Vs, As, D).

rdiff(A, B, D) :- rel(A \= B, D).

rel(R, rel([A, B], R)) :- R =.. [_, A, B].

zebra :-
    People = [English, Spaniard, Ukrainian, Norwegian, Japanese],
    Color = [Red, Green, Ivory, Yellow, Blue],
    Pet = [Dog, Snails, Fox, Horse, Zebra],
    Drink = [Coffee, Tea, Milk, Orange_Juice, _Water],
    Smoke = [Old_Gold, Kools, Chesterfields, Lucky_Strike, Parliaments],
    maplist(dom, [People, Color, Pet, Drink, Smoke], DomT, DiffPair),
    flatten(DomT, Doms),
    maplist(rel,
        [English = Red % The Englishman lives in the red house
        ,Spaniard = Dog % The Spaniard owns the dog
        ,Ukrainian = Tea % The Ukrainian drinks tea
        ,Coffee = Green % Coffee is drunk in the green house
        ,succ(Ivory, Green) % The green house is immediately to the right of the ivory house
        ,Old_Gold = Snails % The Old Gold smoker owns snails
        ,Kools = Yellow % Kools are smoked in the yellow house
        ,Milk = H3 % Milk is drunk in the middle house
        ,Norwegian = H1 % The Norwegian lives in the first house
        ,next(Chesterfields, Fox) % The man who smokes Chesterfield lives in the house next to the man with the fox
        ,next(Kools, Horse) % Kools are smoked in the house next to the house where the horse is kept
        ,Lucky_Strike = Orange_Juice % The Lucky Strike smoker drinks orange juice
        ,Japanese = Parliaments % The Japanese smokes Parliament
        ,next(Norwegian, Blue) % The Norwegian lives next to the blue house
        ], ConstrS),
    flatten([DiffPair, ConstrS], Rels),
    csp([dom(H1, [1]), dom(H3, [3])|Doms], Rels),
    maplist(writeln,
        [people:[English, Spaniard, Ukrainian, Norwegian, Japanese],
         color:[Red, Green, Ivory, Yellow, Blue],
         pet:[Dog, Snails, Fox, Horse, Zebra],
         drink:[Coffee, Tea, Milk, Orange_Juice, _Water],
         smoke:[Old_Gold, Kools, Chesterfields, Lucky_Strike, Parliaments]
        ]). 
```

我已经分离[了 csp.pl](http://www.cs.ubc.ca/~poole/ci/code/ch4/csp.pl)，适应了 SWI-Prolog。这里是

```
% Computational Intelligence: a logical approach.
% Prolog Code.
% A CSP solver using arc consistency (Figure 4.8)
% Copyright (c) 1998, Poole, Mackworth, Goebel and Oxford University Press.

% csp(Domains, Relations) means that each variable has
% an instantiation to one of the values in its Domain
% such that all the Relations are satisfied.
% Domains represented as list of
% [dom(V,[c1,...,cn]),...]
% Relations represented as [rel([X,Y],r(X,Y)),...]
%  for some r
csp(Doms,Relns) :-
   ac(Doms,Relns).

% ac(Dom,Relns) is true if the domain constrants
% specified in Dom and the binary relations
% constraints specified in Relns are satisfied.
ac(Doms,Relns) :-
   make_arcs(Relns,A),
   consistent(Doms,[],A,A).

% make_arcs(Relns, Arcs) makes arcs Arcs corresponding to
% relations Relns. There are acrs for each ordering of
% variables in a relations.
make_arcs([],[]).
make_arcs([rel([X,Y],R)|O],
          [rel([X,Y],R),rel([Y,X],R)|OA]) :-
   make_arcs(O,OA).

% consistent(Doms,CA,TDA,A) is true if
% Doms is a set of domains
% CA is a set of consistent arcs,
% TDA is a list of arcs to do
% A is a list of all arcs
consistent(Doms,CA,TDA,A) :-
   consider(Doms,RedDoms,CA,TDA),
   solutions(RedDoms,A).

% consider(D0,D1,CA,TDA)
% D0 is the set of inital domains
% D1 is the set of reduced domains
% CA = consistent arcs,
% TDA = to do arcs
consider(D,D,_,[]).
consider(D0,D3,CA,[rel([X,Y],R)|TDA]) :-
   choose(dom(XV,DX),D0,D1),X==XV,
   choose(dom(YV,DY),D1,_),Y==YV, !,
   prune(X,DX,Y,DY,R,NDX),
   ( NDX = DX
   ->
     consider(D0,D3,[rel([X,Y],R)|CA],TDA)
   ; acc_todo(X,Y,CA,CA1,TDA,TDA1),
     consider([dom(X,NDX)|D1],D3,
              [rel([X,Y],R)|CA1],TDA1)).

% prune(X,DX,Y,DY,R,NDX)
% variable X had domain DX
% variable Y has domain DY
% R is a relation on X and Y
% NDX = {X in DX | exists Y such that R(X,Y) is true}
prune(_,[],_,_,_,[]).
prune(X,[V|XD],Y,YD,R,XD1):-
   \+ (X=V,member(Y,YD),R),!,
   prune(X,XD,Y,YD,R,XD1).
prune(X,[V|XD],Y,YD,R,[V|XD1]):-
   prune(X,XD,Y,YD,R,XD1).

% acc_todo(X,Y,CA,CA1,TDA,TDA1)
% given variables X and Y,
% updates consistent arcs from CA to CA1 and
% to do arcs from TDA to TDA1
acc_todo(_,_,[],[],TDA,TDA).
acc_todo(X,Y,[rel([U,V],R)|CA0],
         [rel([U,V],R)|CA1],TDA0,TDA1) :-
   ( X \== V
   ; X == V,
     Y == U),
   acc_todo(X,Y,CA0,CA1,TDA0,TDA1).
acc_todo(X,Y,[rel([U,V],R)|CA0],
         CA1,TDA0,[rel([U,V],R)|TDA1]) :-
   X == V,
   Y \== U,
   acc_todo(X,Y,CA0,CA1,TDA0,TDA1).

% solutions(Doms,Arcs) given a reduced set of
% domains, Dome, and arcs Arcs, solves the CSP.
solutions(Doms,_) :-
   solve_singletons(Doms).
solutions(Doms,A) :-
   select(dom(X,[XV1,XV2|XVs]),Doms,ODoms),
   split([XV1,XV2|XVs],DX1,DX2),
   acc_todo(X,_,A,CA,[],TDA),
   ( consistent([dom(X,DX1)|ODoms],CA,TDA,A)
   ; consistent([dom(X,DX2)|ODoms],CA,TDA,A)).

% solve_singletons(Doms) is true if Doms is a
% set of singletom domains, with the variables
% assigned to the unique values in the domain
solve_singletons([]).
solve_singletons([dom(X,[X])|Doms]) :-
   solve_singletons(Doms).

:- redefine_system_predicate(select(_,_,_)).

% select(E,L,L1) selects the first element of
% L that matches E, with L1 being the remaining
% elements.
select(D,Doms,ODoms) :-
%   remove(D,Doms,ODoms), !.
   system:select(D,Doms,ODoms), !.

% choose(E,L,L1) chooses an element of
% L that matches E, with L1 being the remaining
% elements.
choose(D,Doms,ODoms) :-
%   remove(D,Doms,ODoms).
    system:select(D,Doms,ODoms).

% split(L,L1,L2) splits list L into two lists L1 and L2
% with the about same number of elements in each list.
split([],[],[]).
split([A],[A],[]).
split([A,B|R],[A|R1],[B|R2]) :-
   split(R,R1,R2). 
```

上次更正到 next/2 后，测试似乎很好：

```
?- zebra.
people:[3,4,2,1,5]
color:[3,5,4,1,2]
pet:[4,3,1,2,5]
drink:[5,2,3,4,1]
smoke:[3,1,2,4,5]
true ;
false. 
```

# html - WSO2 ESB - HTML 响应

> ID：13547799
> 
> 赞同：0
> 
> 时间：2012-11-25T02:38:26.067
> 
> 标签：html, rest, wso2, wso2esb, esb

我构建了一个必须返回文本/html 的 GET REST Web 服务（Rest API）。在序列中，我有一个调解器，我在其中调用一个网页（如[http://www.mypage.com](http://www.mypage.com)或其他东西），并将其内容放入一个字符串变量中。
之后，我需要在内容中进行一些字符串替换并将其作为 text/html 发送回客户端。
问题是当我把它放回我的页面时，esb 已经将所有`<html>`标签和其他标签替换为`&lt;html&gt;`标签。所以网页浏览器不会渲染一个html页面，而只是将标签写入页面本身。

主要思想是它像 servlet 的代理一样工作，我在其中调用 servlet，获取响应，在我得到的 de html 和 javascript 中进行一些字符串替换，然后将其发送给客户端。

这是序列xml：

```
 <resource methods="GET" uri-template="/view">
  <inSequence>
     <log level="full"/>
     <header name="To" action="remove"/>
     <property name="URL" value="http://www.mypage.com"/>
     <sequence key="MyMediator"/>
     <property name="RESPONSE" value="true"/>
     <property name="NO_ENTITY_BODY" scope="axis2" action="remove"/>
     <property name="ContentType" value="text/html" scope="axis2"/>
     <enrich>
        <source type="property" clone="true" property="RESPONSE_MSG"/>
        <target type="body"/>
     </enrich>
     <send/>
  </inSequence> 
```

因此，我将带有 html 的字符串变量（从中介 MyMediator 获得，它是一个 java 类并调用网页 www.mypage.com）放入属性“RESPONSE_MSG”，然后尝试将其写入正文（丰富） .

在这种情况下，我得到一个错误，因为我设置的属性是一个字符串而不是一个 XML。
如果我使用有效负载工厂而不是丰富，那么它将生成一个 XML，我将获得带有 .html 的 html 标记`&lt;html&gt;`。

我想知道一种有效的方法，我可以从调解器发送字符串变量，并且它不会转换为某些 xml，其中字符串中的所有 html 标记都被替换为`&lt;`and `&gt;`。或者我可以像上面的代码一样发送它而不会出现任何错误。我是否必须为我放入属性 RESPONSE_MSG 中的变量使用另一种类型？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:04:25.973

这是使用的 messageFormatter (text/html) 的问题。检查 conf 目录中的 axis2.xml 文件，查看为关键字 text/html 配置了哪个 messageFormatter。否则可以尝试使用普通的 XML 构建器（即 application/xml）。

# php - 正在回显不正确的课程详细信息

> ID：13547803
> 
> 赞同：1
> 
> 时间：2012-11-25T02:39:22.213
> 
> 标签：php, mysqli

我在下面有一个基本的 mysqli 代码，它执行查询以从数据库中选择课程编号和课程名称，并将其显示在下拉菜单中。

```
 $sql = "SELECT CourseId, CourseNo, CourseName FROM Course ORDER BY CourseId"; 

    $sqlstmt=$mysqli->prepare($sql);

    $sqlstmt->execute(); 

    $sqlstmt->bind_result($dbCourseId, $dbCourseNo, $dbCourseName);

    $courses = array(); // easier if you don't use generic names for data 

    $courseHTML = "";  
    $courseHTML .= '<select name="courses" id="coursesDrop" onchange="getModules();">'.PHP_EOL; 
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

    $outputcourse = ""; 
    while($sqlstmt->fetch()) 
    { 
    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    $outputcourse .= "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";

    } 

    $courseHTML .= '</select>';  

    ?>

    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post" onsubmit="return validation();">
<table>
<tr>
<th>Course: <?php echo $courseHTML; ?></th>
</tr>
</table>
<p><input id="moduleSubmit" type="submit" value="Submit Course and Module" name="moduleSubmit" /></p>
</form>

    <?php

    if (isset($_POST['moduleSubmit'])) {

    $assessmentform = "<div id='lt-container'>
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
{$outputcourse}
</form>
</div>";

echo $assessmentform;

...

?> 
```

现在让我们说下拉菜单包含以下这些课程：

```
INFO101 - Information Communication Technology
INFO102 - Computing 
```

出于某种奇怪的原因，无论我从下拉菜单中选择哪门课程，当我单击提交按钮时，它应该在下拉菜单下输出的回声总是输出 Course Number 和 Course Name `INFO102 - Computing`。即使我选择了其他选项`INFO101 - Information Communication Technology`为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:46:08.590

在您的`while`循环中，您正在重新初始化`$outputcourse`每次迭代，而不是将其累积成一个长字符串。因此，它只会显示循环中获取的*最后一项。*

```
// Initialize $outputcourse outside the loop:
$outputcourse = "";
while($sqlstmt->fetch()) 
{ 
    $course = $dbCourseId;
    $courseno = $dbCourseNo;
    $coursename = $dbCourseName; 
    $courseHTML .= "<option value='".$course."'>" . $courseno . " - " . $coursename . "</option>".PHP_EOL;  

    // Match the course in $_POST with the current fetch iteration and load $outputcourse
    if (isset($_POST['courses']) && $_POST['courses'] == $course)) {
      $outputcourse = "<p><strong>Course:</strong> " . $courseno .  " - "  . $coursename . "</p>";
    }
} 
```

现在，只有选定的课程将被加载到`$outputcourse`. 希望您在`$assessmentform`上面未显示的其他输入中包含了一些其他输入，因为现在您只是将 a 包裹`<p>`在 a`<form>`中而没有关联的输入。

# bash - 为 cd - 命令创建一个 bash 别名

> ID：13547809
> 
> 赞同：2
> 
> 时间：2012-11-25T02:40:33.043
> 
> 标签：bash, alias

我想`--`为 bash`cd -`命令创建别名。为了解决这个问题，我找到了使用这个别名的建议：

```
alias -- -="cd -" 
```

但是，这会导致以下错误，如此会话片段中所示：

```
chris@DeathStar:~$ cd .vim
chris@DeathStar:~/.vim$ --
-bash: --: command not found
chris@DeathStar:~/.vim$ 
```

我的`bash --version`：

```
GNU bash, version 4.2.39(2)-release (i386-apple-darwin12.2.1)
Copyright (C) 2011 Free Software Foundation, Inc. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T02:44:12.013

您创建的别名似乎是`-`，不是`--`。如果您希望它是`--`，则需要将其声明为：

```
alias -- --="cd -" 
```

您始终可以通过简单地键入来检查 shell 会话中声明的别名列表`alias`。

附言

后面的第一个`--`序列`alias`与别名无关，只是为了让命令不考虑以as 命令选项`alias`开头的参数。`-`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T02:46:07.553

不要为别名烦恼。改用函数：

```
--() { cd -; } 
```

# python - 在 Python 中加密 URL

> ID：13547811
> 
> 赞同：0
> 
> 时间：2012-11-25T02:41:06.443
> 
> 标签：python, python-2.7, encryption

我打算使用 Py2Exe 将我的应用程序编译为可执行文件。但是，我的应用程序中有敏感的 URL 链接，我希望像加密一样保持隐藏。无论我的应用程序是否被反编译，链接仍将保持加密状态。我怎么会说 urllib2 来打开加密的链接？

任何帮助将不胜感激，或者可以为我指明正确方向的示例代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T02:47:35.380

我不认为 urllib2 有类似的选项，尽管你可以做的是将链接保存在其他地方（比如一个简单的数据库，加密它们（如密码），当 urllib2 调用链接时，你检查哈希。

类似于用户身份验证的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-17T00:14:08.517

在这种情况下，URL 加密不会拯救您。当您的软件在客户端计算机上运行并以某种方式解密此 URL 并向其发送 HTTP 请求时，任何使用 Wireshark 的孩子都将能够看到您的 URL。

如果您的系统设计需要敏感的 URL，更安全的方法可能涉及更改 HTTP 服务器本身的设计！您必须以 URL 不敏感的方式构建系统，因为您无法控制它们。一旦它们被您的代码使用，它们就可以被捕获。

# java - 在一个字符串中正则表达式多个字符串

> ID：13547815
> 
> 赞同：2
> 
> 时间：2012-11-25T02:42:20.543
> 
> 标签：java, regex

我有一个文本文件，我迭代并希望检查每行中的多个子字符串（每行将存在 1 个子字符串）。

我的正则表达式如下

`String rE = "(AGG|TIP|IDV|DVY|IYR|LQD|HYG|EMB|ACWI|ACWX|EFA|SCZ|EEM|IWB|IWF|IWD|IWM|IWO|IWN|IWV|IVV|IVW|IVE|IJH|IJK|IJJ|MUB|IJR|IJS|IJT|SPY)"`

我的文本文件中的一行如下所示：

`SPY,6696832,31080,140.7,400,140.69,140.69,6396960,299872`

然而当我这样做时：

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
System.out.println("Starting");
while ((retStr = in.readLine()) != null) {
    if(retStr.matches(tickers)){
         System.out.println(retStr);
    }
} 
```

我找不到我的琴弦。

代码编译并完美运行。我遍历文件，但我从来没有找到我的结果。

我可以对我做错的事情有所帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:45:54.460

只需添加`.*`到您的正则表达式的末尾（`.*`匹配任何内容）：

```
String rE = "(AGG|TIP|IDV|DVY|IYR|LQD|HYG|EMB|ACWI|ACWX|EFA|SCZ|EEM|" +
     "IWB|IWF|IWD|IWM|IWO|IWN|IWV|IVV|IVW|IVE|IJH|IJK|IJJ|MUB|IJR|IJS|IJT|SPY).*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:00:52.617

为了获得更好的性能，您应该编译正则表达式。String 上的`matches`方法每次都会重新编译表达式，它并不意味着在循环中使用。

这是一个例子

```
import static org.junit.Assert.assertEquals;
import java.util.regex.Pattern;
import org.junit.Test;

public class Example {

    @Test
    public void shouldMatchString() {
        Pattern p = Pattern.compile("^(AAA|BBB|CCC)");
        assertEquals(true, p.matcher("AAA,1,2,3,4,5").find());
        assertEquals(false, p.matcher("    AAA").find());
    }

} 
```

Find 不匹配整个字符串，所以我`^`用来匹配输入的开头。

# php - 如何使用 PHP 从 HTML 代码块中删除标签？

> ID：13547816
> 
> 赞同：1
> 
> 时间：2012-11-25T02:42:45.640
> 
> 标签：php, regex

我只想从 html 中删除特定 URL 中的图像

例如： http: [//pastebin.com/Qaw4dRbT](http://pastebin.com/Qaw4dRbT)

```
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.<img src="http://www.another-domain.tld/r/151230695794/32310/s/25e829c1/removeit.img" alt="" width="1" height="1" border="0" /></p> 
```

我想从 another-domain.tld 中删除图像并保留另一个图像。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T02:55:43.333

使用 xpath 查找它并将其从其父级中删除：

```
// Build a new DOMDocument, load it up with your HTML
$doc = new DOMDocument();
$doc->loadHTML($html);

// Reference to our DIV container
$container = $doc->getElementsByTagName("div")->item(0);

// New instance of XPath class based on $doc
$xpath = new DOMXPath($doc);

// Get images that contain 'specific-domain.tld' in their src attribute
$images = $xpath->query("//img[contains(@src,'specific-domain.tld')]");

// For every image found
foreach ($images as $image) {
    // Remove that image from its parent
    $image->parentNode->removeChild($image);
}

// Output the resulting HTML of our container
echo $doc->saveHTML($container); 
```

可执行演示：[http ://sandbox.onlinephpfunctions.com/code...6529d025e135013184e](http://sandbox.onlinephpfunctions.com/code/3fecd3d2792254bc06f956529d025e135013184e)

# mysql - 使用 JDBC Mysql 连接时出错

> ID：13547822
> 
> 赞同：5
> 
> 时间：2012-11-25T02:44:17.517
> 
> 标签：mysql, jdbc, google-apps-script

我无法与我的 MySQL 服务器建立连接。这是连接字符串：

```
jdbc:mysql://<my_IP_address>:1005/rs_pm 
```

这是代码行：

```
var conn = Jdbc.getConnection(connString, mysql_user, mysql_pass); 
```

我已经能够使用 JDBC 编写本机 Java 程序，并且它使用相同的连接字符串/用户名/密码连接得很好。（是的，我知道该端口是非标准的，但这就是我对其进行配置的方式，并且它适用于本机 Java 应用程序）。

奇怪的是，我正在查看我的路由器日志，当我尝试连接本地 Java 应用程序时，我可以看到流量进入。但是当我在 G 应用程序中运行脚本时，我没有看到收到任何数据包通过谷歌 IP 地址。

只有我吗？是不是哪里有问题？

提前致谢。

**更新**所以看来，如果我使用标准的 mysql 端口（3306），连接工作正常。似乎 Google Apps 中的某些内容不会在我指定的端口 (1005) 或我尝试的任何其他端口上尝试出站连接。也许他们使用的 jdbc 连接器只支持 3306 端口？我将提交一个错误，因为这种行为在任何地方都没有记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:15:29.193

与数据库服务器的 JDBC 连接仅支持端口 1025 和更高版本。

# objective-c - 我无法将我的数据对象添加到我的 NSArray

> ID：13547824
> 
> 赞同：3
> 
> 时间：2012-11-25T02:44:41.510
> 
> 标签：objective-c, ios, nsarray

所以我有这个方法：

```
-(void)addLaneToRacingLanes:(UITapGestureRecognizer*)sender{

    laneDataObject *data=[self.laneDataObjects objectAtIndex:sender.view.tag];
    [self.racingLanes addObject:data];

    NSLog(@"%i",self.racingLanes.count);
    [sender.view setBackgroundColor:[UIColor yellowColor]];

} 
```

它使用发件人视图中的标签来找出与该视图对应的数据对象。我正在使用它来添加到我的racingLanes，这是我更新这些视图的方式，但我的问题是由于某种原因我无法添加我的laneDataObjects到我的阵列赛车车道。有任何想法吗？

这是设置属性的方式：

```
@property (strong,nonatomic)NSArray *laneDataObjects;
@property (strong,nonatomic) NSMutableArray *racingLanes; 
```

我已经浏览了这些标签，它们都可以工作。标签工作时，通道 1 为标签 0，其数据对象为 0，然后通道 2 为标签 1，其数据为 1，依此类推。我已经预先测试过了。我已经检查了两个 laneDataObject 数组是否已正确设置。是因为我的racingLanes 没有使用自定义的getter 或setter 吗？我将如何改变它？万一这很重要，我用过

```
NSLog(@" %i",self.racingLanes.count); 
```

找出数组是否为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:49:26.853

几乎可以肯定的是，`racingLanes`尚未初始化：因为您添加的对象不是零（否则您会看到抛出异常），那么`racingLanes`必须是`nil`。

您需要在指定的初始化程序中设置`racingLanes`为：`NSMutableArray`

```
_racingLanes = [NSMutableArray array]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T02:52:02.423

你确定在你的类`-init`或`-viewDidLoad`函数中初始化你的 NSMutableArray 吗？

```
// WITH ARC
self.racingLanes = [NSMutableArray array];

// WITHOUT ARC
self.racingLanes = [[NSMutableArray alloc] init]; 
```

# php - 如何在 yii 中使用 ajax/jquery 向另一个表添加行并将这些值用作表单中的外键？

> ID：13547827
> 
> 赞同：1
> 
> 时间：2012-11-25T02:44:56.423
> 
> 标签：php, ajax, forms, yii, foreign-keys

我有这个表格（我使用了 crud 生成器和模型生成器）：

创建猪

[姓名]

[品种]

[病态] [加病态]

每次单击时，如何使添加疾病创建一个新的文本字段？我已经有一个多值疾病 ID 的表，我只需要访问该表并添加所有疾病，使用一个相同的 ID，这样我就可以将它用作表中的外键。

```
<?php
/* @var $this PigController */  
/* @var $model Pig */
/* @var $form CActiveForm */
?>
<div class="form">      
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'pig-form',
    'enableAjaxValidation'=>true,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">           
        <?php echo $form->labelEx($model,'name'); ?>                                
        <?php echo $form->dropDownList($model,'name');?>
    <?php echo $form->error($model,'name'); ?>      
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'breed'); ?>
        <?php echo $form->dropDownList($model,'breed', $model-  >getBreedOptions()); ?>
        <?php echo $form->error($model,'breed'); ?>
    </div>

    /*
    ENTER CODE FOR SICKNESS HERE
    */
    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>     
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:24:31.887

我也有同样的场景。我所做的是使用脚本。试试这个。它对我有用。请务必进行必要的更改

```
 $(function(){        
      $("#add").click(function(){

        if(5 > $(".attr").length) {
            var cycleBlock = '<tr id="item'+i+'">';
            cycleBlock += '<td style="width: 447px;"> <label for="CategoryMstExt_Attribute">Attribute</label> <input type="text" id="CategoryMstExt_0_attributes" name="CategoryMstExt['+i+'][attributes]" class="attrName'+i+'" maxlength="100" size="44"> </td> <td> <label for="CategoryMstExt_Data_Type">Data Type</label> <select id="CategoryMstExt_'+i+'_datatype" name="CategoryMstExt['+i+'][datatype]" class="attr" onchange="javascript:checkSelection(this.value,'+i+')"> <option value="17">Textarea</option> <option value="16">Textbox</option> <option value="18">Listbox</option> </select><img  onclick="deleteElm(item'+i+'.id);" src="<?php echo Yii::app()->request->baseUrl; ?>/assets/81ff99cf/gridview/delete.png" alt=""> </td>';
            cycleBlock += '</tr>';
            var $cycleBlock = $(cycleBlock);
            $('#fields').append($cycleBlock);
            i++;
        } else {

            alert('Maximum attributes limit reached');
        }
    });
});

<?php 

    <img style="margin-left:600px;" id="add" src="<?php echo Yii::app()->request->baseUrl; ?>/media/images/add.png">
                    <table id="fields" >
                        <tr id="item1" >
                            <td style="width: 447px;"> 
                                <?php echo $form->labelEx($model, 'Attribute'); ?>
                                <?php echo $form->textField($model, '[0]attributes', array('size' => 44, 'maxlength' => 100, 'class' => 'attrName0')); ?>
                            </td>
                            <td > 
                                <?php echo $form->labelEx($model, 'Data Type'); ?>                                 
                                <?php echo $form->dropDownList($model, '[0]datatype', Array('17' => 'Textarea', '16' => 'Textbox', '18' => 'Listbox'), array('onChange' => 'javascript:checkSelection(this.value,0)', 'class' => 'attr')); ?>
                                <img  onclick="deleteElm(item1.id);" src="<?php echo Yii::app()->request->baseUrl; ?>/media/images/delete_2.png" alt="">
                            </td>
                        </tr>
                    </table>  
?> 
```

# r - 挑战：用 R 复制多眼字树

> ID：13547832
> 
> 赞同：9
> 
> 时间：2012-11-25T02:46:08.377
> 
> 标签：r

许多眼睛，IBM 数据可视化实验，提供了一种非常有趣的可视化连续文本（如演讲或短语）的方法。本质上，您选择一个起始词，它会为该词后面的所有句子创建类似于树状图或树的东西，通常由所选词后面的动词分解。

![在此处输入图像描述](../Images/06999645e1b2f5d1e48d904cf5bd0949.png)

这里有一个例子：[http ://www-958.ibm.com/software/data/cognos/manyeyes/page/Word_Tree.html](http://www-958.ibm.com/software/data/cognos/manyeyes/page/Word_Tree.html)

虽然有一些交互式组件，但我只关心图形本身。

在 R 中是否有现有的方法可以做到这一点？如果没有，你能想出一种方法（在 R 中）吗？我不知道他们如何分解它。我会向代表寻求解决方案，但也会接受一个深思熟虑的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-31T17:38:20.523

谷歌通过谷歌图表工具为此做出了巨大贡献

[https://developers.google.com/chart/interactive/docs/gallery/wordtree](https://developers.google.com/chart/interactive/docs/gallery/wordtree)

[![您可以通过上面链接中的隐式脚本轻松生成自己的 - 我的是土耳其语](../Images/a241ed7de12f995390335d8907b22d58.png)](https://i.stack.imgur.com/kVuHg.png)

只需如下更改数据数组即可。

```
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {packages:['wordtree']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    var data = google.visualization.arrayToDataTable(
      [ ['Phrases'],
        ['abd adalet bakanligi fiat chrysler sorustur'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti abd adalet bakanliginin fiat chrysler fca hakkinda dizel'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti abd adalet bakanliginin fiat chrysler fca hakkinda dizel araclarinda emisyon'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti haberin detaylari icin tiklayiniz'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti kazakistan haber'],
        ['abd adalet bakanligi fiat chrysler sorusturma acti sondakika'],
      ]
    );

    var options = {
      wordtree: {
        format: 'implicit',
        word: 'cats'
      }
    };

    var chart = new google.visualization.WordTree(document.getElementById('wordtree_basic'));
    chart.draw(data, options);
  }
</script>
<body>
<div id="wordtree_basic" style="width: 900px; height: 500px;"></div>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:18:16.673

你看过 d3.js 吗？

树状图示例： [http ://bl.ocks.org/4063570](http://bl.ocks.org/4063570)

可折叠树： http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

旋转集群： http: [//mbostock.github.com/d3/talk/20111018/cluster.html](http://mbostock.github.com/d3/talk/20111018/cluster.html)

# c# - 限制 Kinect 检测距离

> ID：13547836
> 
> 赞同：1
> 
> 时间：2012-11-25T02:46:52.670
> 
> 标签：c#, .net, vb.net, kinect

我正在构建一个 kinect 驱动的 .net 应用程序，是否可以限制 kinect 的检测距离？

就像我有一个由 kinect 控制的交互式购物窗口，我只希望检测到踩到地面 X 标记的人，或者说距离传感器 3 米远的人被检测到。如果有人比 3 米更近或更远，它就不会检测到他。

我使用 VB.Net 进行编码，尽管大部分代码都是从 C# 翻译的，但非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:59:59.120

在您的 SkeletonFrameReady 回调中，您可能有一个`foreach`循环（或类似的）来逐步通过您的活动骨架。您还应该查看它们是否被主动跟踪。

```
foreach (Skeleton skeleton in _skeletons) {

    // some extra setup stuff here...

    if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
      return;

    // the Kinect is actively tracking the skeleton at this point

    ...
} 
```

此时您要做的是检查此`Z`人的位置。选择一个你想用作参考的关节——我建议你使用头部、臀部或脊柱。如果`Z`位置是您想要的位置，请继续对骨架进行操作。

```
foreach (Skeleton skeleton in _skeletons) {
    ....

    if (skeleton.TrackingState != SkeletonTrackingState.Tracked)
      return;

    if (skeleton.Joints[JointType.Spine].Position.Z < _minValue || skeleton.Joints[JointType.Spine].Position.Z > _maxValue)
      return;

    // if you reach this point, the person is standing a certain distance from the Kinect.  Not too close, not too far away.

} 
```

您将需要检查该`Z`位置的范围。它可以是一个很小的范围，但你想给用户足够的空间来移动一点，而不会让 Kinect 忽略它们。

**更新：**您也可以`Position`使用`Skeleton`. 它在 Kinect 的 FOV 中对整个骨架的计算点有一个 x/y/z 参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:34:39.200

遍历所有检测到的骨架并将骨架设置为主骨架，其中心关节的 Z 位置在 X 标记距离处。考虑 60 厘米的公差。

# git - GIT 每周活动

> ID：13547838
> 
> 赞同：6
> 
> 时间：2012-11-25T02:47:40.000
> 
> 标签：git, report, git-diff, git-bash, git-log

我想生成一个每周 GIT 报告，我可以在其中查看每个开发人员在特定时间范围内提交和删除了多少代码。

**目的是获得特定时间范围内开发人员活动的总体概述**

*   开始日期
*   结束日期
*   开发商
*   提交
*   添加代码
*   删除代码

如果我可以将这些信息导出到 csv 中，那就太好了

```
[some-script/command] > weekly-git-log.csv 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T03:11:33.933

我会开始`git log --since="1 week ago" --until="now"`并[根据您的喜好对其进行自定义](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)。

例子：

`git log --since="1 week ago" --until="now" --format="%an,%ct,%s" > weekly-git-log.csv`

您对要存储在 CSV 文件中的内容不是很具体，所以我给您一个非常笼统的答案，让您自己填写详细信息。

**编辑**：

如果您想添加/删除行，您将不得不变得更花哨并使用 bash 脚本：

```
#!/bin/bash
IFS=$'\n'
DATA=(`git log --since="1 week ago" --until="now" --format="%ct,%an,%s,"`)
LINES=(`git log --since="1 week ago" --until="now" --pretty=tformat: --shortstat | gawk '(NF > 0){ printf "%s,%s\n",$1,$4 }' -`)

i=0
while [ $i -lt ${#DATA[@]} ]; do
    echo "${DATA[$i]}${LINES[$i]}"
    i=$[i + 1]
done 
```

我在消息之后添加/删除了行，因为它更容易在脚本中执行（我对 bash 不是很好）。这应该是你想做的事情的一个很好的基础。（调用`./script.sh >file.csv`输出到文件）

请注意，提交消息中的逗号会破坏您的 csv 文件，我会将 csv 文件中的逗号更改为`--format`无法在键盘上定期键入的一些晦涩字符，擦掉消息中的所有逗号，然后用逗号替换那个晦涩的字符特点。

或者，`%s`如果您不需要消息，也可以取消格式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T06:39:12.750

特定日期范围内特定用户的更改列表 - 每个文件的详细信息

```
git log --pretty=format:"%h,%an,%ad,%s" --author=example@email.com --since=2012-11-19 --until=2012-11-20 --date=short --numstat 
```

特定日期范围内特定用户的更改列表 - 提交摘要

```
git log --pretty=format:"%h,%an,%ad,%s" --author=example@email.com --since=2012-11-19 --until=2012-11-20 --date=short --shortstat 
```

**最终短版**

```
git log --pretty=format:"%Cgreen%ad%x09%Cblue%s" --date=short --author=example@email.com --shortstat --since=2012-11-19 --until=2012-11-20 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T03:22:37.037

```
git log --since="1 week ago" --until="now" \
--format="%an,%ct,%s" > git_log_11_17_2012-11_24_2012.csv 
```

请注意，“1 周前”可以使用“1 周前”的确切文本来完成（因此它不是真实日期的占位符，尽管也可以使用）感谢 approxidate

# actionscript-3 - 如何为 Sound 对象编写音频包络（启动时间、淡入）？

> ID：13547839
> 
> 赞同：2
> 
> 时间：2012-11-25T02:48:10.990
> 
> 标签：actionscript-3, api, audio, sound-synthesis

我做了一个简单的正弦波音调发生器。问题是当播放音调时可以听到强烈的咔嗒声，我需要实现快速淡入（攻击时间）以避免这种情况。

我尝试使用补间（如 tweenmax），但它会导致音频失真（可能是补间中的步骤？）。我发现了一些关于这个主题的模糊教程，但没有关于攻击时间的具体内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:03:55.050

为了使渐变听起来平滑，它必须在您的合成循环内基于每个样本递增。补间引擎可能每秒更新多次，但您的耳朵仍然可以听到咔哒声。

在您的 sampleData 事件处理程序中，您必须将单个样本乘以一个体积修饰符，范围为​​ 0 到 1，*每个样本*递增。

要快速淡入声音，首先将音量设置为 0，然后为每个样本添加一个小值，直到达到 1.0。您可以稍后将其扩展为更复杂的包络控制器。

这是您可能开始的粗略示例：

```
for( i = 0; i < length; i++ ) {
    _count++;
    factor = _frequency * Math.PI * 2 / 4400;
    volume += 1.0 / 4400;
    if( volume > 1.0 ) volume = 1.0; //don't actually do it like this, ok?
    n = Math.sin( (_count) * factor ) * volume;
    _buffer.writeFloat(n); 
    _buffer.writeFloat(n); 
} 
```

注意：我没有测试过这个片段，也不建议将它用于生产。这只是为了大致向您展示我的意思。

另一种可能对您有用的技术是在音量上放轻松/延迟。使用始终以特定速度“追逐”目标音量的 volumeEase 变量。这将防止更改音量时的咔嗒声，并可用于制作更长的信封：

```
var volume:Number = 0; // the target volume
var volumeEase:Number = 1.0; // the value to use in the signal math
var volumeEaseSpeed:Number = 0.001; // tweak this to control responsiveness of ease

for( i = 0; i < length; i++ ) {
    _count++;

    // bring the volumeEase closer to the target:
    volumeEase += ( volume - volumeEase ) * volumeEaseSpeed;

    factor = _frequency * Math.PI * 2 / 4400;

    //use volumeEase in the maths, rather than 'volume':
    n = Math.sin( (_count) * factor ) * volumeEase;
    _buffer.writeFloat(n); 
    _buffer.writeFloat(n); 
} 
```

如果你愿意，你可以只使用线性插值，然后以恒定的速度“朝向”目标。

再一次，该片段未经过测试，因此您可能需要调整 volumeEaseSpeed。

# jquery - 如何使用 Sinon 和 QUnit 对 $(function () { ... }) 块进行单元测试？

> ID：13547840
> 
> 赞同：3
> 
> 时间：2012-11-25T02:48:41.597
> 
> 标签：jquery, unit-testing, qunit, sinon

我在一个 JS 文件中有这样的代码（当然是简化的）：

```
$(function () {
  var num;
  $.getJSON('./getNumber.php', function (n) {
    num = n;
  });

  $('#id').on('click', function () { alert(num); });
}); 
```

我需要编写两个单元测试：

1.  确保脚本在页面加载时向服务器发送`./getNumber.php`请求
2.  确保`#id`单击时`num`会收到警报。

显然我需要 FakeXmlHTTPRequest 并模拟该`alert`函数，甚至可以监视`$.getJSON`. 但是我不确定在保持两个原子的同时编写测试的正确方法是什么。

我认为这样做的唯一方法是`<script>`为每个测试动态注入块；但我只是觉得那是不对的。什么是正确的方法？谢谢。

**编辑**：基于 SO 之外的评论，我需要学习的是编写可测试的 Javascript，而不是尝试为低可测试性的东西提出测试用例。如果有人可以给我一些关于重写此代码的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T01:25:56.830

你的问题没有一个正确的答案，而是有很多好的原则可供学习。考虑以下代码。我已经重构了你的例子。我将在下面解释我所做的一切。

```
// Define your module in a self-executing function.
// This module is now completely unit testable.
var myModule = (function () {
    var num;

    function getNum() {
        $.getJSON('./getNumber.php', function (n) {
            num = n;
        });
    }

    function alertNum() {
        alert(num);
    }

    // this returned object will by set to myModule and will publicly
    // expose the necessary functions
    return {
        getNum: getNum,
        alertNum: alertNum
    };
})();

// wire up your events
$(function() {
    $("#id").on('click', myModule.alertNum);
}); 
```

这个例子对于这个简单的代码来说显然是多余的，但它应该给你一些好主意。

1.  您的核心功能现在封装在一个模块中。您在模块中保留了额外的私有函数和变量（如`num`），但是现在可以测试通过返回的对象公开公开的所有内容。（见下面的注释）

2.  我已经连接了模块外的事件。如果您的模块很大，您甚至可能希望将此代码放在另一个脚本中。无论哪种方式，它都会以更类似于 MVC 的方法分离您的关注点。您*可以*测试这段代码，但实际上不必这样做；它应该是非常简单的 jQuery，并且围绕它进行包装测试只不过是测试 jQuery 库，它已经被 jQuery 团队彻底测试过。

3.  这可能看起来很奇怪，但不要在你的模块中使用任何 jQuery 选择器！如果您的模块需要一个元素，请将其作为函数参数传入。有一些方法可以将这些东西排除在外，但这确实很麻烦，如果你已经正确地分离了你的关注点，那就没有必要了。我的大多数模块（或其中的对象）最终都带有一种`init()`我可以传入东西的方法。-- 你可能仍然选择`.find()`在你的模块中的元素上使用 jQuery 的方法。这更像是一个判断电话，只有您可以根据您的模块的特定需求做出判断。这样做将要求您在测试中对 DOM 元素进行更详细的模拟，但有时它比传入几十个元素更容易`init()`（只需传入主容器）。

* * *

注意：我强烈建议使用[RequireJS](http://requirejs.org/)或其他 AMD 模块加载器来管理您的模块。这将使`myModule`上述内容远离全局命名空间。不过，使用 QUnit 设置 Require 有点小题大做，一旦您掌握了单元测试，这可能是一个稍后需要解决的问题。

# python - 从包外部导入 python 模块会产生意外行为

> ID：13547841
> 
> 赞同：2
> 
> 时间：2012-11-25T02:48:58.757
> 
> 标签：python, python-module

假设我有这样一个目录结构：

```
 - Documents/
   - thesis_program/
     - __init__.py
     - classes.py
     - utils.py
     - GE_Test.py
   - GE_Test_fail.py 
```

classes.py 和 utils.py 包含一些类和函数。GE_Test.py 和 GE_Test_fail.py 包含完全相同的代码，除了导入部分。在**GE_Test.py**我以这种方式导入类和实用程序：

```
from utils import execute
from classes import Grammatical_Evolution 
```

在**GE_Test_fail.py**中，我以这种方式导入类和实用程序：

```
from thesis_program.utils import execute
from thesis_program.classes import Grammatical_Evolution 
```

出乎意料的是，我得到了不同的结果。这里有什么问题吗？我是否正确导入了模块？

我可以确保结果应该是相同的，因为我生成的随机数具有一定的种子

classes.py 也以某种方式依赖于 utils.py，因为我在 utils.py 中有几个常用函数。我怀疑 utils 也是系统使用的名称。所以在第二种情况下（GE_Test_fail.py）系统utils会覆盖我的utils.py。但这对我来说似乎没有意义。

classes.py 和 utils.py 的完整源代码可在此处获得（如果有助于发现问题所在）：[https ://github.com/goFrendiAsgard/feature-extractor](https://github.com/goFrendiAsgard/feature-extractor)

还有，截图：[https ://picasaweb.google.com/111207164087437537257/November25201204?authuser=0&authkey=Gv1sRgCOKxot2a2fTtlAE&feat=directlink](https://picasaweb.google.com/111207164087437537257/November25201204?authuser=0&authkey=Gv1sRgCOKxot2a2fTtlAE&feat=directlink)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:00:53.883

将下面提到的行添加到您的论文文件夹之外的测试文件中。

`import sys`
`sys.path.insert(0,"/path to your thesis folder/thesis_program")`

并维护其他一切；例如在`GE_Test.py`...

```
import sys
sys.path.insert(0,"/path to your thesis folder/thesis_program")
from utils import execute
from classes import Grammatical_Evolution 
```

**编辑：**

或者使用它来使其更具动态性
（注意：不要试图找到路径，`os.path.abspath('./thesis_program')`因为你可能并不总是可以找到你的`test_files`和你`thesis_folder`的在同一个目录中；如果你可以像上面一样在你的代码中永久修复它们; 那么你可以在你系统的任何地方自由使用它们）

```
import os, sys
lib_path = os.path.abspath('./thesis_program')
sys.path.insert(0,lib_path) 
```

# java - Stripes 忽略提交按钮事件

> ID：13547845
> 
> 赞同：3
> 
> 时间：2012-11-25T02:49:33.093
> 
> 标签：java, stripes

我正在使用 Stripes 框架，但我遇到了一个无法解决的问题。

我在文件夹“creatures”中有一个名为“add.jsp”的页面，它将一个生物（我的模型中的某个实体）添加到数据库中。我在该页面中使用此表单：

添加.jsp

```
<s:layout-render name="/layout.jsp" title="Creatures">
<s:layout-component name="menu">
    <ul class="navcontainer" id="main-navigation">
        <li><s:link href="/regions.jsp">Region</s:link></li>
        <li class="current"><s:link href="/creatures/show.jsp">Creatures</s:link></li>
        <li><s:link href="/types.jsp">Creature types</s:link></li>
        <li><s:link href="/weapons.jsp">Weapons</s:link></li>
    </ul>
</s:layout-component>
<s:layout-component name="main_content">
    <div class="main-content">
        <div class="content">
            <img src="../images/banner.png" alt="Banner" id="banner"/>
            <h1>Create a new creature</h1>
            <s:link href="/creatures/show.jsp">Back</s:link>
            <s:form beanclass="cz.muni.fi.pa165.creatures.web.CreaturesActionBean">
                <%@include file="/forms/createCreature.jsp"%>
                <s:submit name="create" value="Create"/>
            </s:form>
        </div>
    </div>
</s:layout-component> 
```

所以这很漂亮，我还包括表单本身，我有一个带有 name="create" 的提交按钮，它应该映射到 action bean 中的方法 "create" 对吗？

好的，所以我有一个看起来像这样的类：

```
@UrlBinding("/creatures/{$event}")
public class CreaturesActionBean implements ActionBean {

final static Logger logger = 
    Logger.getLogger(CreaturesActionBean.class.getName());

private ActionBeanContext context;

@SpringBean
protected CreatureService creatureService;

@ValidateNestedProperties(value = {
    @Validate(on = {"create"}, field = "name", required = true, maxlength=256),
    @Validate(converter=LongTypeConverter.class , on = {"create"}, 
        field = "weight", required = false, minvalue=1, maxvalue=1000),
    @Validate(converter=LongTypeConverter.class , on = {"create"}, 
        field = "height", required = false, minvalue=1, maxvalue=1000)
})
private CreatureDTO creatureDTO;

public void setCreatureDTO(CreatureDTO creatureDTO) {
    this.creatureDTO = creatureDTO;
}

public CreatureDTO getCreatureDTO() {
    return this.creatureDTO;
}

public Resolution create() {
    logger.log(Level.INFO, "add() creature={}", creatureDTO);
    creatureService.create(creatureDTO);
    return new RedirectResolution(this.getClass(), "all");
}

@DefaultHandler
public Resolution all() {
    logger.log(Level.INFO, "getting all creatures");
    return new ForwardResolution("/creatures/show.jsp");
} 
```

所以这意味着当有一个名为“create”的提交时，在该动作 bean 中执行 create 方法并保存 creativeDTO 等等。

**但**

操作 bean 中的“创建”方法根本没有执行，**我被重定向到名为的页面**

```
http://localhost:8080/pa165/creatures/ 
```

应用程序上下文是 pa165，在单击提交按钮后重定向到该页面后，我看到该目录中所有文件的列表（add.jsp 等，生物目录中的所有文件）并且该**方法根本不执行**.

我想被重定向到我按行处理的页面生物/show.jsp

```
return new RedirectResolution(this.getClass(), "all"); 
```

这意味着我将通过那里的所有方法重定向

为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:37:48.210

您是否在任何地方输出验证结果？（<stripes:errors> 标签） 'create' 方法根本没有被执行可能表明表单提交没有通过验证。也许字段名称不匹配或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T12:36:54.520

您的问题是 URL 绑定不应与文件夹结构相同。只需将绑定更改为`@UrlBinding("/mycreatures/{$event}")`. 我有同样的问题，这就像一个魅力。有关更多信息，请参阅[此链接](http://www.mail-archive.com/stripes-users@lists.sourceforge.net/msg05413.html)。

# eclipse - 我无法在 Eclipse 中使用 Vaadin 插件在 Button 中设置图标

> ID：13547848
> 
> 赞同：1
> 
> 时间：2012-11-25T02:50:02.720
> 
> 标签：eclipse, apache, vaadin

我在 Win 7 下的 Eclipse Juno 中使用 Vaadin 插件 6.8。我安装了 Apache 7（zip 版本）并配置了 Eclipse。我创建了一个 Vaadin 项目并添加了以下几行：

```
Button b = new Button("Miboton"); // create button
b.setIcon(new ThemeResource("user.png")); // set image to button
mainWindow.addComponent(b);//add button to main window 
```

但是当我运行该项目时，图像不会显示，因为（我想）apache 无法找到图像的相对路径。我将图像放在每个可能的目录中：WEB-INF、src、包下等。但仍然没有正确显示。我还尝试制作一个 foo.war 文件并将其直接部署在 Apache 中，但都没有奏效。有猜吗？！？！提前致谢！

和 Eclipse 代码的图像和结果在[这里](http://dl.dropbox.com/u/35638831/error.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:49:59.370

您需要提供来自 VAADIN 目录的图像。请参阅有关[主题](https://vaadin.com/book/-/page/themes.html)和[资源的 Vaadin 之书](https://vaadin.com/book/-/page/application.resources.html)

# python - 递归模块调用逻辑缺陷

> ID：13547851
> 
> 赞同：0
> 
> 时间：2012-11-25T02:50:17.640
> 
> 标签：python, python-2.7, logic

我正在尝试编写一个在用户程序中发现异常的程序

我有一个名为 test.py 的文件，它是：

```
try:
    # some code to get the name of the calling program
    #Then the code is like "import filename.py" , for example the next line
    import sample.py  # this is what should happen when the file name is got

    execfile("test.py")   # to run this file

catch:
      # catching some exceptions here 
```

现在如果我假设用户有一个文件说 sample.py 看起来像

```
import test.py

def __main__():
     4/0  # sample exception 
```

我是 python 编程的新手，但我知道 python 将所有程序都视为模块，所以基本上我设想程序流程是

1) 当用户运行 sample.py 时，控制流转到 test.py 然后获取调用程序的名称并将其导入 try 块。

2）然后流程回到sample.py，理想情况下我希望遇到并捕获异常

3）但是当控件返回到 sample.py 时，它又返回到 test.py 导致递归循环

我的问题是双重的

1) 有没有办法获取已导入您的模块的程序的名称。还有一种方法可以获取位于同一工作区（同一文件夹）中的程序的名称

2）我有这个控制流程的原因是我希望用户不要打开我的程序（test.py），但不管我怎么看，如果我的模块只是导入到他的程序中，它将像递归循环一样运行, 有什么建议可以修改我的设计以使其工作，也许是第三个脚本来组合它？

我正在使用 python 2.7

奇怪的设计模式是因为我不希望用户编写任何代码来运行我的程序，他应该写的最大值只是导入我的程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:26:47.320

好的，所以两条路线：

首先，`__name__`包含您从中导入的模块的名称。

其次，我个人的建议是分发一个 test.pyc 或其他东西并要求该人运行该 .pyc 以便他们不知道 test.py 的内容

# nuget - 使用 nuget pack 时如何避免生成 xml 文档

> ID：13547853
> 
> 赞同：2
> 
> 时间：2012-11-25T02:50:52.740
> 
> 标签：nuget, nuget-package

我正在为我的程序集创建包，但我不想在我的 nuget 包中包含 docs/*.xml 文件。我已经尝试了 pack 命令的 -Exclude 开关和 nuspec 文件中 files 部分的 exclude 属性，以明确排除这些文件。这些都不起作用。所以每次我生成我的 nuget 包，然后通过在目标项目中安装它来测试它时，它总是添加一个包含所有 xml 文件的 docs 文件夹。如何避免 xml 文件包含在 nuget 包中？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:30:45.073

谢谢你，马特，我已经在做你提到的事情，但在我看来，Nuget 按照惯例做了一些其他的事情。即使我像您所说的那样使用排除，也包含 docs 文件夹。我通过使用 -a 开关生成 nuspec 文件解决了这个问题（我使用的是我的 .csproj 文件）。我还必须将 .dll 文件复制到解决方案文件夹之外的文件夹中。这样，一切都按预期正常工作。

无论如何，您的答案是准确的，但在我的情况下它不起作用。不确定这是否是设计使然。这是我目前用来生成包的最终 msbuild 文件。希望 Nuget 很快会为 spec 命令添加更多开关，这样我们之后就不必修改太多 nuspec 文件。

```
<Project DefaultTargets="NugetPackage" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">  

<PropertyGroup>
 <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
 <OutputPathCore>NugetPkgs\$(Configuration)\My.Assembly</OutputPathCore>
 <NuGetExePath>assets\nuget.exe</NuGetExePath> 
```

```
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>

<Import Project="$(MSBuildExtensionsPath)\ExtensionPack\4.0\MSBuild.ExtensionPack.tasks"/>

<Target Name="NugetPackage" DependsOnTargets="PackageClean;BuildNugetPackageMyAssembly"> 
```

```
<Target Name="PackageClean">  
<RemoveDir Directories ="NugetPkgs\$(Configuration)" ContinueOnError ="true"/> 
```

```
<Target Name="BuildNugetPackageMyAssembly">   
   <MakeDir Directories="$(OutputPathCore)" />
   <MakeDir Directories="$(OutputPathCore)\Package" />
   <MakeDir Directories="$(OutputPathCore)\lib\net40" />
   <MakeDir Directories="$(OutputPathCore)\lib\net20" />      
   <MakeDir Directories="$(OutputPathCore)\lib\net20-cf" />   

   <Copy
       DestinationFolder="$(OutputPathCore)\lib\net40" 
       SourceFiles="Source\My.Assembly\bin\$(Configuration)\My.Assembly.dll" />

    <Copy
       DestinationFolder="$(OutputPathCore)\lib\net20" 
       SourceFiles="VS2008\Source\My.Assembly\bin\$(Configuration)\My.Assembly.dll" />

    <Copy
       DestinationFolder="$(OutputPathCore)\lib\net20-cf" 
       SourceFiles="VS2008\Source\My.Assembly.CF\bin\$(Configuration)\My.Assembly.CF.dll" />

   <Copy DestinationFolder="$(OutputPathCore)\content" SourceFiles="CHANGES" />

   <Copy SourceFiles="Release Notes.txt" DestinationFiles="$(OutputPathCore)\Readme.txt" />

   <Exec Command="&quot;$(NuGetExePath)&quot; spec -a  &quot;$(OutputPathCore)\lib\net40\My.Assembly.dll&quot;" />              

    <XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/licenseUrl" Value="http://someurl" />          
    <XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/projectUrl" Value="http://someurl" />          
    <XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/iconUrl" Value="http://somenice.png" />            
    <XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/tags" Value="My.Assembly" />           
    <XmlUpdate Namespace="http://schemas.microsoft.com/packaging/2010/07/nuspec.xsd" XmlFileName="My.Assembly.nuspec" XPath="//package/metadata/releaseNotes" Value="Review readme.txt for details." />  

<ItemGroup>      
  <file Include="Source\My.Assembly\bin\$(Configuration)\My.Assembly.dll"/>
  <file Include="VS2008\Source\My.Assembly\bin\$(Configuration)\My.Assembly.dll"/>    
  <file Include="$(OutputPathCore)\Readme.txt"/>
</ItemGroup>

<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="RemoveElement" File="My.Assembly.nuspec" Element="dependencies" XPath="//package/metadata/dependencies" />

<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="AddElement" File="My.Assembly.nuspec" Key="" Value="" Element="files" XPath="//package" InsertAfterXPath="//package" />
<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="AddElement" File="My.Assembly.nuspec" Key="src" Value="%(file.Identity)" Element="file" XPath="//package/files" />

<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="AddAttribute" File="My.Assembly.nuspec" XPath="//package/files/*[1]"  Key="target" Value="lib\net40" />
<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="AddAttribute" File="My.Assembly.nuspec" XPath="//package/files/*[2]"  Key="target" Value="lib\net20" />  
<MSBuild.ExtensionPack.Xml.XmlFile TaskAction="AddAttribute" File="My.Assembly.nuspec" XPath="//package/files/*[3]"  Key="target" Value=""/>

<Exec Command="&quot;$(NuGetExePath)&quot; pack My.Assembly.nuspec -OutputDirectory &quot;$(OutputPathCore)\Package&quot; -NoPackageAnalysis" />

<Delete Files ="My.Assembly.nuspec" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T15:32:00.167

要排除所有 .xml 文件，您应该使用 **\*.xml 通配符。我猜你正在使用 *.xml 这不起作用。

要排除所有 .xml 文件，您可以使用类似于以下内容的 nuget 命令行：

```
nuget.exe pack MyPackage.nuspec -Exclude **\*.xml 
```

如果您只需要排除 docs 目录中的 .xml 文件，则可以使用类似于以下内容的 nuget 命令行：

```
nuget.exe package MyPackage.nuspec -Exclude **\docs\*.xml 
```

通配符似乎相对于您的 .nuspec 文件所在的文件夹起作用。因此，如果您在相对于 .nuspec 文件的 docs 子文件夹中有一个 .xml 文件，那么通配符 if docs*.xml 也应该起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:54:02.977

我能想到的另一件事是

1.  创建一个 nuspec 文件并对其进行编辑。这只需要完成一次（也可以签入）。您在构建时编辑 nuspec 文件的任何原因？
2.  使用 nuspec 文件中的 files 元素将文件复制到目标文件夹

<files> <file src="bin\Debug\*.dll" target="lib" /> <file src="bin\Debug\*.pdb" target="lib" /> <file src="tools\ * *\* .*" exclude="* *\* .log" /> </files>

3.打包命令可以保留在构建时完成。

可以在此处找到文件的更多详细信息[http://docs.nuget.org/docs/reference/nuspec-reference](http://docs.nuget.org/docs/reference/nuspec-reference)

# facebook - heroku app iframe异常

> ID：13547856
> 
> 赞同：0
> 
> 时间：2012-11-25T02:51:52.097
> 
> 标签：facebook, canvas, heroku

当我加载我的应用程序时，无论是独立的还是在 Facebook 画布内，都有一个带有内联高度和宽度属性的 iframe，它基本上阻止了所有应用程序链接和功能，因为它以某种方式位于一切之上。

我不是经验丰富的 Facebook 应用程序开发人员，我想知道发生了什么以及如何处理它？我已经在 Google Chrome 中识别了 CSS，但不知道如何删除或阻止样式，因为 iframe 不是我克隆的开发包的一部分。该应用程序已在 Facebook 上发布，应该可以使用 facebook.apps.com/datingfordummies 查看

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:55:13.443

解决它。我只是删除了我的 CSS 中的 width 和 height 属性。我最初会这样做，但担心它会影响页面上的其他 iframe。不用说，它没有，现在正在工作。

备查：

```
iframe{width:0 !important; height:0 !important;} 
```

# iphone - 为 iOS 应用程序设置主题/皮肤的最佳实践？

> ID：13547860
> 
> 赞同：3
> 
> 时间：2012-11-25T02:52:13.970
> 
> 标签：iphone, ios, ipad, uitableview

为 iOS 应用程序设置主题/皮肤的一些最佳实践是什么？

例子：

*   使用自定义图像作为屏幕背景。
*   修改 UITableView 表的外观。
*   具有自定义外观的按钮。

链接到好的教程是一个加号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T03:11:17.180

您可以创建一个协议，定义返回特定主题颜色、图像等的方法。所有符合此协议的类都必须实现这些方法。

```
@protocol MyCustomThemes <NSObject>
-(UIFont*)writingAreaFont;
-(UIColor*)dataCellLabelColor;
-(UIImage*)dataCellBackgroundImage;
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T02:40:02.103

您可能会看一下[NUI](https://github.com/tombenner/nui)，它可以让您非常轻松地修改应用程序的主题/皮肤，并将该主题也保存给其他应用程序。

例如，如果您想为所有 UIViews 的背景使用自定义图像，您只需将以下内容放入 NUI 样式表中：

```
ViewBackgroundImage    String    MyImage.png 
```

NUI 也支持 UITableViews 和 UIButtons 的样式（如其他示例中所述）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T03:16:15.080

我可以建议：

1.  制作主题课
2.  使函数返回背景图像
3.  使函数返回数据单元格。
4.  在主题类中创建任何所需的功能。

init 函数应该有一个参数到 plist 文件，其中包含您的类正常工作所需的资产（图像）。它应该是一个 plist 文件，其中包含预定义键的字典。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T00:29:42.690

您可能想查看[Freestyle](http://pixate.com/freestyle)。它基于[Pixate 构建](http://pixate.com)，并使用结构化的 Sass 为您的应用程序设置样式。您只需更改变量值即可创建一个新主题，或者通过 CSS 或 Sass 扩展和自定义它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-01T22:35:55.000

老问题，但仍然 - 如果您正在寻找最佳实践，那么[`UIAppearance`](http://nshipster.com/uiappearance/)可能就是它。

但是，如果您正在寻找一种更强大的方式来为您的应用程序设置样式（并创建主题） - 也可以看看[InterfaCSS](http://www.interfacss.org)。InterfaCSS 使用受 CSS（和 Less/Sass）启发的样式表，支持丰富的选择器语法并允许您使用标准的 UIKit 属性名称。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-30T23:14:14.873

我知道这可能为时已晚，但我偶然发现了一个名为[Pixate](http://www.pixate.com/)的主题框架。Pixate 允许您使用 css 为所有组件设置主题。它是原生的，意味着没有 web 视图，什么不是，而且它很容易在现有项目中实现。一探究竟。

# expert-system - 在 CLIPS 中使用逻辑运算符

> ID：13547861
> 
> 赞同：2
> 
> 时间：2012-11-25T02:52:35.407
> 
> 标签：expert-system, clips

我试图在 CLIPS 中定义大于规则，但它似乎不起作用。关于如何修复它的任何想法。问题似乎发生在**defrule btwn100and120**。

```
(defrule part-credits
    (or (current-part "a")
        (current-part "b")
        (current-part "c"))
    =>
    (bind ?reply (get-text-from-user "How many points did you achieve?"))
    (assert (part-credits ?reply))
)

(defrule btwn100and120
    (part-credits => 100)
    (part-credits <= 120)
    =>
    (bind ?reply (get-text-from-user "Did you Part A before the changes? (y/n)"))
    (assert (btwn100and120 ?reply))
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:53:37.340

使用该`test`函数进行数值比较。另外，请注意 CLIPS 对数学运算符使用前缀表示法。这是一个简化的规则，可以满足您的要求：

```
(defrule MAIN::btwn100and120
  (part-credits ?val)
  (test (<= ?val 120))
  (test (>= ?val 100))
=>
  (printout t "Value " ?val " is in range." crlf)
) 
```

这是对规则的测试：

```
CLIPS> (watch facts)
CLIPS> (watch activations)
CLIPS> (assert (part-credits 99))
==> f-0     (part-credits 99)
<Fact-0>
CLIPS> (assert (part-credits 110))
==> f-1     (part-credits 110)
==> Activation 0      btwn100and120: f-1
<Fact-1>
CLIPS> (run)
Value 110 is in range.
CLIPS> 
```

# dictionary - python3正确的argv用法

> ID：13547863
> 
> 赞同：0
> 
> 时间：2012-11-25T02:55:22.667
> 
> 标签：dictionary, python-3.x, command, argv

这是我用于读取文本文件并将其存储为字典的代码：

```
from sys import argv

def data(file):
    d = {}
    for line in file:
        if line.strip() != '':
            key,value = line.split(":")
            if key == 'RootObject':
                continue
            if key == 'Object':
                obj = value.strip()
                d[obj]={}
            else:
                d[obj][key] = value.strip()
    return d

file = open(argv[1])
planets = data(file)
print(planets) 
```

我的问题是我`argv`是否正确实施，以便任何用户都可以通过`solardictionary.py random.txt`在命令行中键入并运行它来运行字典。我尝试运行它，但我不断收到索引错误，我不确定我的`argv`实现可能有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:03:43.127

您需要键入`file = open(sys.argv[1],'r')`才能访问该数组，因为它包含在`sys`模块中。

[http://docs.python.org/3.1/library/sys.html#module-sys](http://docs.python.org/3.1/library/sys.html#module-sys)

您可能还对在 try-catch 块中打开文件感兴趣。

# list - 具有缺失值的列表的算术运算

> ID：13547869
> 
> 赞同：4
> 
> 时间：2012-11-25T02:55:55.897
> 
> 标签：list, scala, math, missing-data

我正在尝试对可能包含缺失值的列表进行一些算术运算。到目前为止，我用 Option[Int] 表示我的列表：

```
val mylist=List( Option(4), Option(8), None ) 
```

通过这种表示，我可以轻松地在列表上应用一个函数（例如，乘以 2）：

```
scala> mylist.map(_.map(_*2))
res2: List[Option[Int]] = List(Some(8), Some(16), None) 
```

但是，这看起来比它需要的更复杂，所以我想知道我是否遗漏了一些东西。

另外，我不知道如何写总和之类的东西。我想应该可以使用（大）reduce 表达式......

所以，我想知道是否：

*   List[Option[Int]] 是这个用例的一个很好的表示
*   `mylist.map(_.map(_*2))`是最好的映射方式
*   有没有一种简单的方法来求和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:35:35.287

> *   List[Option[Int]] 是这个用例的一个很好的表示

是否可以使用 flatMap 更早地将其展平？例如，如果您使用地图创建此列表，则可以使用 flatMap 而不是缺失值。我的建议是尽可能不表示缺失值。如果您需要代表他们，Option 是理想的选择。

> *   `mylist.map(_.map(_*2))`是最好的映射方式
> *   有没有一种简单的方法来求和？

嵌套地图可能更可取。你也`foldLeft`可以。

`foldLeft`如果您需要做除 sum/product 之外的其他事情，这也很有帮助。

```
scala> val mylist=List( Option(4), Option(8), None )
mylist: List[Option[Int]] = List(Some(4), Some(8), None)

scala> mylist.foldLeft(0){
     |   case (acc, Some(i)) => acc + i 
     |   case (acc, _) => acc
     | }
res7: Int = 12

scala> (0 /: mylist) {
     |   case (acc, Some(i)) => acc + i 
     |   case (acc, _) => acc
     | }
res8: Int = 12

scala> (0 /: mylist) {
     |   case (acc, Some(i)) => acc - (i * 2)
     |   case (acc, _) => acc
     | }
res16: Int = -24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:09:31.797

好吧，这不是我自己使用的模式，但如果值可能“缺失”，那么 an`Option`是合适的。但`List`可能不是。在一个`List`位置通常不是你应该依赖的东西，因为它不是随机访问。也许 a`Vector`会更好，或者您需要考虑一种更好的方法来建模您的问题，即不要作为缺少值的列表。

`Option`您可以使用 for 表达式很好地处理：

```
for (o <- mylist; x <- o) yield x * 2 
```

或展平列表：

```
mylist.flatten.map(_ * 2) 
```

总结一下：

```
mylist.flatten.sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:22:13.610

最通用和最简洁的方法是使用[Scalaz](http://code.google.com/p/scalaz/)的 semigroup 类型类。这样，您不仅`List[Option[Int]]`可以将相同的功能应用于`List[Int]`.

```
import scalaz._
import Scalaz._

object S {
  def double[A:Semigroup](l:List[A]) = l.map(x => x |+| x)
  def sum[A:Semigroup](l:List[A]) = l.reduce(_ |+| _)

  def main(a:Array[String]) {
    val l = List(Some(1), None, Some(2))
    val l2 = List(1,2)
    println(double(l))
    println(sum(l))
    println(double(l2))
    println(sum(l2))
  }

} 
```

这打印

```
List(Some(2), None, Some(4))
Some(3)
List(2, 4)
3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T03:51:21.023

> 所以，我想知道是否：
> 
> List[Option[Int]] 是这个用例的一个很好的表示

Option 绝对是表达缺失值的首选方式。您还可以考虑将其更改为`List[(Int, Int)]`第一个元素表示原始列表中的位置，第二个元素表示值的位置。

> `mylist.map(_.map(_*2))`是最好的映射方式

在我看来，没有更短或更简洁的方式来表达这一点。（您有两个“级别”，这就是您需要两张地图的原因！）使用我建议的数据结构，这将变成`mylist.map(t => (t._1, t._2*2))`.

> 有没有一种简单的方法来求和？

没有比 om-nom-nom 建议的更简单的方法了。使用我的数据结构将是`mylist.map(_._2).sum`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T12:13:53.683

我不确定您要达到的目标是什么，但这似乎不是正确的方法。如果您需要确定“列表”中是否存在某个值，那么 a`Set`可能会更好地满足您的需求：

```
scala> val s = Set(4,8)
s: scala.collection.immutable.Set[Int] = Set(4, 8)

scala> s(4)
res0: Boolean = true

scala> s(5)
res1: Boolean = false

scala> s map (_ * 2)
res2: scala.collection.immutable.Set[Int] = Set(8, 16)

scala> s reduceLeft((a,b) => a+b)
res3: Int = 12 
```

甚至更简单：

```
scala> s sum
res4: Int = 12 
```

如果您需要更复杂的东西，并且列表中元素的索引很重要，您可以使用`Map`键模拟索引的位置，并且可以将缺失值映射到某个默认值：

```
scala> val m = Map(1 -> 4, 2 -> 8) withDefault(n => 0)
m: scala.collection.immutable.Map[Int,Int] = Map(1 -> 4, 2 -> 8)

scala> m(1)
res5: Int = 4

scala> m(3)
res6: Int = 0

scala> m map {case (k,v) => (k,2*v)}
res7: scala.collection.immutable.Map[Int,Int] = Map(1 -> 8, 2 -> 16)

scala> m.foldLeft(0){case (sum,(_,v)) => sum+v}
res8: Int = 12 
```

再次，不确定您的需求是什么，但感觉就像您走错了路……
`Option`是一种我在使用前会三思而后行的类型。问问自己是否真的有必要。可能有一些解决方案可以以更优雅的方式实现您想要做的事情。

# php - 如何计算 Zend Framework 2 中的行数

> ID：13547873
> 
> 赞同：2
> 
> 时间：2012-11-25T02:56:40.743
> 
> 标签：php, zend-framework2

我需要计算 MySql 查询的结果行。在这里，我将`TableGateway`课程扩展到我的课程，这是我的代码。

```
public function get_num_of_rows(){
    $sql = 'SELECT count(q_no) FROM questions';

    //code ????????????????
    $result = $this->select();

    return $result;
} 
```

那么我如何执行`SELECT count(q_no) FROM questions`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-05T18:30:33.660

如果您的表有大量记录，则使用时可能会出现内存溢出错误

```
$result->count(); 
```

而是使用这个，你可以避免同样的

```
$select->from('TABLE_NAME')->columns(array('COUNT'=>new \Zend\Db\Sql\Expression('COUNT(*)'))); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-27T13:23:45.933

无需编写自己的 sql 查询。当您执行 $this->select() 时，您将获得 Zend\Db\ResultSet\ResultSet 的一个实例。ResultSet 有方法计数。

```
$result = $this->select();
return $result->count(); 
```

但不要忘记添加`'options' => array('buffer_results' => true)`到您的数据库适配器。

**更新：**

这是我在某处写过的最愚蠢的东西。始终从资源只返回所需的数据。在这里，您只需要 1 个标量。所以[https://stackoverflow.com/a/13810175/1353837](https://stackoverflow.com/a/13810175/1353837)是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-10T06:24:56.363

对于 ZF-2，试试这个示例代码：

```
 <?php
//var/www/html/zend_app/module/Api/src/Api/Model/ApiTable.php
namespace Api\Model;

use Zend\Db\TableGateway\AbstractTableGateway;
use Zend\Db\Adapter\Adapter;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\Sql\Select;
use Zend\Db\Sql\Sql;
use Zend\Db\Sql\Where;
use Zend\Db\Sql\Expression;

class ApiTable extends AbstractTableGateway {

    public function __construct(Adapter $adapter) {
        $this->adapter = $adapter;
        $this->resultSetPrototype = new ResultSet();
        $this->resultSetPrototype->setArrayObjectPrototype(new Api());
        $this->initialize();
    }

    public function countTableData($from, $whereData = NULL) {
        $sql = new Sql($this->adapter);

        $select = $sql->select();
        $select->from($from);

        if($whereData)
        {
            $select->where($whereData);
        }
        $statement = $sql->prepareStatementForSqlObject($select);
        $results = $statement->execute();
        $resultSet = new ResultSet;
        $resultSet->initialize($results);
        $resultSet->buffer();
        return $resultSet->count();

    }

} 
```

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-27T00:20:49.923

或这个：

```
$select->join('reports', 'user.user_id = reports.ruser_id', array('sdays' => new \Zend\Db\Sql\Expression('COUNT(rhours)')),$select::JOIN_INNER);

$select->group('ruser_id'); 
```

# java - 在 Android 中创建“弹出式”侧边菜单

> ID：13547874
> 
> 赞同：0
> 
> 时间：2012-11-25T02:56:41.557
> 
> 标签：java, android, xml, android-layout, android-linearlayout

我对我的应用程序有一个想法，但我不知道如何去实现它。基本上，我有一个聊天应用程序，但你可以告诉应用程序它是快乐的还是悲伤的消息。我把它画出来，希望能让你更容易理解。任何人都可以向我提供有关创建这种效果的任何见解吗？

## **第一步（隐藏）：**

* * *

![在此处输入图像描述](../Images/1878e4f4a6324250c3caecc81dd694c4.png)

* * *

## **第二步（用户点击人脸）：**

* * *

![在此处输入图像描述](../Images/f3f4675d6fc5ae929ad6f54c53e2c9f9.png)

* * *

## **第三步（用户点击人脸并消失）：**

* * *

![在此处输入图像描述](../Images/eb693d1d9b01acb42f3ce16e48551148.png)

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:15:07.970

试试这个库。

教程在这里 - [http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

这里的图书馆 - [https://github.com/lorensiuswlt/NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)

![在此处输入图像描述](../Images/49428998608964045113963de5f9edb1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:28:54.143

使用 QuickActionController。[在https://github.com/lorensiuswlt/NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)找到控件的来源。

您只需要在快速操作 UI 类中将显示位置向右移动即可。您的要求将得到满足。

# android - 从android中的运动事件中获取所有x和y坐标

> ID：13547875
> 
> 赞同：4
> 
> 时间：2012-11-25T02:56:56.840
> 
> 标签：android, drawing, coordinates, points

我目前正在开发自己的基本绘图应用程序。到目前为止，我的应用程序运行良好，但我注意到我的运动事件似乎没有得到所有被触摸的 X 和 Y 轴点。

当我在屏幕上移动手指时，圆圈之间有明显的空间。只有当我慢慢移动手指时，它才能捕捉到所有的点。有没有办法我可以抓住所有的积分，或者有没有一种方法可以优化它以处理所有的积分？

这是我的做法：

```
setOnTouchListener(new View.OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {

                int x; 
            int y;    

            switch (event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                {
                    x = (int) event.getX();
                    y = (int) event.getY();   
                    //method draws circle at x and y coordinate
                    MyPainter mp = new MyPainter(x,y);

                    break;
                }
                case MotionEvent.ACTION_MOVE:
                {
                    x = (int) event.getX();
                    y = (int) event.getY();
                MyPainter mp = new MyPainter(x,y);

                    break;
                }
            }
            return true;

        }
    }); 
```

任何建议或意见表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:15:07.407

这正是硬件的设计方式。硬件每秒对触摸屏进行 N 次采样，并在每次感应到手指时吐出坐标。

如果您的移动速度比屏幕样本快，那么报告的数据中就会出现空白。您唯一能做的就是通过沿两次触摸之间的线插值自己生成缺失点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T14:00:23.317

接受的答案并不完全正确，可以使用以下方法从抓斗访问触摸数据：

```
event.getHistorySize();   // returns the number of data points stored as an int
event.getHistoricalX(int);
event.getHistoricalX(int); 
```

当有多个指针时，其他相关方法可用（请参阅[文档](http://developer.android.com/reference/android/view/MotionEvent.html#getHistorySize%28%29)）。

可以在[此处](http://corner.squareup.com/2010/07/smooth-signatures#missing%20events.html)找到如何在实践中使用它的一个很好的示例。

# php - 升级到 5.4 但“php -v”仍然返回旧版本

> ID：13547877
> 
> 赞同：3
> 
> 时间：2012-11-25T02:57:11.943
> 
> 标签：php, macos

我在 OSX Lion 10.7.5 上。正如[如何在 Mac OS X 中升级 PHP？](https://stackoverflow.com/questions/2526085/how-do-i-upgrade-php-in-mac-os-x?s=fdcf34c5-b2d0-4b37-8d92-d8317880189c)， 我用了：

```
curl -s http://php-osx.liip.ch/install.sh | bash -s 5.4 
```

一切似乎都很顺利，没有错误，我使用的是 64 位系统等，但是当我运行“php -v”时，我仍然看到与之前相同的版本（5.3.15）。在 1-10 的范围内，当通过命令行安装东西时，我可能是 2，所以，请在任何回复中考虑到这一点。

更新：我在运行后仔细查看了终端输出`curl -s http://php-osx.liip.ch/install.sh | bash -s 5.4`，我注意到以下内容：

```
Installing package tools-memcached into root /
./pkg/pre-install
pkg/pre-install
Skipping existing directory 
Skipping existing directory usr/
Skipping existing directory usr/local/ 
```

...然后在安装结束时：

```
Create symlink /usr/local/php5/entropy-php.conf /etc/apache2/other/+php-osx.conf
Removed /usr/lib from DYLD_LIBRARY_PATH in /usr/sbin/envvars
Restarting Apache
httpd: Could not reliably determine the server's fully qualified domain name 
```

谁能详细说明这意味着什么？正如评论中所解释的，我似乎已经安装了文件，但是，我在解决似乎是 $PATH 问题时遇到了麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:35:19.543

创建一个指向新 php 安装路径的符号链接，如下所示：

```
ln -s /usr/local/php5/bin/php php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-06T18:04:41.037

如果你使用 Apache 首先禁用当前的 php 模块

> 须藤a2dismod php5
> 须藤a2dismod php5.6

然后启用

> 须藤a2enmod php7.0

并重新启动apache

> sudo 服务 apache2 重启

# python - Python set 是否比 list 更节省空间？

> ID：13547883
> 
> 赞同：7
> 
> 时间：2012-11-25T02:59:27.853
> 
> 标签：python

`list`众所周知，它会使用一大块空间进行初始化，以优化扩展列表所需的时间（平均而言，我们不必像数组一样继续创建新列表）。

怎么样`set`？

以下构造使其空间浪费，因为`list`. 我知道`tuple`更节省空间，因为它是不可变的。我们可以对它做同样的事情`set`并且仍然是可变的吗？

`set( [ 1, 2, 3] )`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T03:04:05.073

```
>>> from sys import getsizeof as size
>>> s = set(xrange(100))
>>> l = list(xrange(100))
>>> size(s)
8424
>>> size(l)
1016 
```

`set`s 比 s 占用*更多*的内存`list`。s 提供的某些功能`set`需要更多内存（例如快速成员资格测试）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-26T17:44:12.220

似乎对于小列表，集合可以占用 10 倍的内存，但在较大的列表中，由于某种原因，这会下降到大约 3 倍。（可能是由于哈希表冲突导致链表链接，这会减慢查找速度，但有助于内存使用？）

在 python3 中，getsizeof(range()) 总是返回一个常量，因为范围对象有点像迭代器，所以我尝试通过制作实际列表来测试它。编辑：我可以尝试使用 getsizeof(list(range()))

```
from sys import getsizeof # returns memory size in bytes
list_lengths = [100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000] # from 100 to 1billion
for length in list_lengths:
     my_list = [num for num in range(length)]
     my_set = set(my_list)
     print("list length: {}".format(len(my_list)))
     print("memory size of my_list: {}".format(getsizeof(my_list)))
     print("memory size of my_set: {}".format(getsizeof(my_set)))
     print("set to list size ratio: {}".format(getsizeof(my_set)/getsizeof(my_list)))

Output:
list length: 100
memory size of my_list: 912
memory size of my_set: 8416
set to list size ratio: 9.228070175438596
list length: 1000
memory size of my_list: 9024
memory size of my_set: 32992
set to list size ratio: 3.6560283687943262
list length: 10000
memory size of my_list: 87624
memory size of my_set: 524512
set to list size ratio: 5.985939925134666
list length: 100000
memory size of my_list: 824464
memory size of my_set: 4194528
set to list size ratio: 5.087581750082478
list length: 1000000
memory size of my_list: 8697464
memory size of my_set: 33554656
set to list size ratio: 3.8579815909557085
list length: 10000000
memory size of my_list: 81528056
memory size of my_set: 268435680
set to list size ratio: 3.2925558779421897
list length: 100000000
memory size of my_list: 859724472
memory size of my_set: 4294967520
set to list size ratio: 4.995748824048828
list length: 1000000000
memory size of my_list: 8058558880
memory size of my_set: 34359738592 # my computer doesn't have this much memory, not sure what's going on here. Maybe it's writing to SSD
set to list size ratio: 4.263757218089594 
```

# iphone - NSCharacter Set 使用int，但我需要未分配的短？

> ID：13547886
> 
> 赞同：5
> 
> 时间：2012-11-25T03:00:00.143
> 
> 标签：iphone, objective-c, ios, c, nscharacterset

我正在使用[MWFeedParser](https://github.com/mwaterfall/MWFeedParser)将提要添加到我的应用程序中。现在框架通过了日期，我有一些警告，主要是由于旧类型的代码。

现在剩下 4 个警告，它们都是一样的，从技术上讲，我可以修复它们并删除它们，这样警告就消失了，但后来我发现应用程序无法正常工作。

有关的代码是：

```
 // Character sets
NSCharacterSet *stopCharacters = [NSCharacterSet characterSetWithCharactersInString:[NSString stringWithFormat:@"< \t\n\r%C%C%C%C", 0x0085, 0x000C, 0x2028, 0x2029]]; 
```

现在是警告的位是：

```
\t\n\r%C%C%C%C", 0x0085, 0x000C, 0x2028, 0x2029]]; 
```

警告是：

> 格式指定类型“无符号短”，但参数的类型为“int”

于是我改成了：

```
\t\n\r%i%i%i%i", 0x0085, 0x000C, 0x2028, 0x2029]]; 
```

这确实删除了警告并给了我完美的代码:-)（没有警告或错误）

然后当我运行该应用程序时，它没有解析日期并且无法打开链接。我不确定这是否是 C 的东西，但现在它绝对超出了我的知识领域。有没有人可以帮助我解决这个问题，并且仍然可以在应用程序中运行？

先感谢您：-）

## **编辑**

```
 - (NSString *)stringByConvertingHTMLToPlainText {

// Pool
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

// Character sets
NSCharacterSet *stopCharacters = [NSCharacterSet characterSetWithCharactersInString:@"< \t\n\r\x0085\x000C\u2028\u2029"];    
NSCharacterSet *newLineAndWhitespaceCharacters = [NSCharacterSet characterSetWithCharactersInString:@"< \t\n\r\205\014\u2028\u2029"];

NSCharacterSet *tagNameCharacters = [NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"];

// Scan and find all tags
NSMutableString *result = [[NSMutableString alloc] initWithCapacity:self.length];
NSScanner *scanner = [[NSScanner alloc] initWithString:self];
[scanner setCharactersToBeSkipped:nil];
[scanner setCaseSensitive:YES];
NSString *str = nil, *tagName = nil;
BOOL dontReplaceTagWithSpace = NO;
do {

    // Scan up to the start of a tag or whitespace
    if ([scanner scanUpToCharactersFromSet:stopCharacters intoString:&str]) {
        [result appendString:str];
        str = nil; // reset
    }

    // Check if we've stopped at a tag/comment or whitespace
    if ([scanner scanString:@"<" intoString:NULL]) {

        // Stopped at a comment or tag
        if ([scanner scanString:@"!--" intoString:NULL]) {

            // Comment
            [scanner scanUpToString:@"-->" intoString:NULL]; 
            [scanner scanString:@"-->" intoString:NULL];

        } else {

            // Tag - remove and replace with space unless it's
            // a closing inline tag then dont replace with a space
            if ([scanner scanString:@"/" intoString:NULL]) {

                // Closing tag - replace with space unless it's inline
                tagName = nil; dontReplaceTagWithSpace = NO;
                if ([scanner scanCharactersFromSet:tagNameCharacters intoString:&tagName]) {
                    tagName = [tagName lowercaseString];
                    dontReplaceTagWithSpace = ([tagName isEqualToString:@"a"] ||
                                               [tagName isEqualToString:@"b"] ||
                                               [tagName isEqualToString:@"i"] ||
                                               [tagName isEqualToString:@"q"] ||
                                               [tagName isEqualToString:@"span"] ||
                                               [tagName isEqualToString:@"em"] ||
                                               [tagName isEqualToString:@"strong"] ||
                                               [tagName isEqualToString:@"cite"] ||
                                               [tagName isEqualToString:@"abbr"] ||
                                               [tagName isEqualToString:@"acronym"] ||
                                               [tagName isEqualToString:@"label"]);
                }

                // Replace tag with string unless it was an inline
                if (!dontReplaceTagWithSpace && result.length > 0 && ![scanner isAtEnd]) [result appendString:@" "];

            }

            // Scan past tag
            [scanner scanUpToString:@">" intoString:NULL];
            [scanner scanString:@">" intoString:NULL];

        }

    } else {

        // Stopped at whitespace - replace all whitespace and newlines with a space
        if ([scanner scanCharactersFromSet:newLineAndWhitespaceCharacters intoString:NULL]) {
            if (result.length > 0 && ![scanner isAtEnd]) [result appendString:@" "]; // Dont append space to beginning or end of result
        }

    }

} while (![scanner isAtEnd]);

// Cleanup
[scanner release];

// Decode HTML entities and return
NSString *retString = [[result stringByDecodingHTMLEntities] retain];
[result release];

// Drain
[pool drain];

// Return
return [retString autorelease]; 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T06:47:12.253

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T04:38:51.427

问题是`0x0085`, etc 是文字整数。所以它们与格式说明符不匹配，`%C`格式说明符需要 a `unichar`，它是一个无符号短。

没有直接的方法可以在 C 中指定文字短，而且我不知道有任何 Objective-C 扩展。但是您可以使用蛮力方法：

```
NSCharacterSet *stopCharacters =
         [NSCharacterSet characterSetWithCharactersInString:
                  [NSString stringWithFormat:@"< \t\n\r%C%C%C%C", 
                               (unichar)0x0085, (unichar)0x000C,
                               (unichar)0x2028, (unichar)0x2029]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:30:28.377

您不需要 stringWithFormat，您可以使用 \u 转义将 unicode 字符直接嵌入到字符串中。例如 \u0085。

# c# - 实现一个可暂停的线程类

> ID：13547890
> 
> 赞同：2
> 
> 时间：2012-11-25T03:01:06.383
> 
> 标签：c#, multithreading

就这么简单！这是我的一个尝试，它要求与它线程化的函数在可暂停部分中通过自身使用 Pause() 函数。

```
using System;
using System.Threading;

class BlackThread {
    private bool paused;
    private Thread innerThr;

    // ---

    public bool IsAlive {
        get {
            return innerThr.IsAlive;
        }
    }

    // ===

    public void SetAndGo (ThreadStart start) {
        paused = false;

        innerThr = new Thread(start);
        innerThr.Start();
        WaitForIt();
    }

    // ---

    public void Pause() {
        paused = true;
        while (paused);
    }

    public void Unpause() {
        paused = false;
    }

    public void WaitForIt() {
        while(!paused && IsAlive);
    }

    public void Continue() {
        Unpause();
        WaitForIt();
    }
}

class MainClass {
    static void pausableFunction (BlackThread self) {
        Console.WriteLine("* Waiting...");
        self.Pause();
        Console.WriteLine("* Doing stuff.");
        self.Pause();
        Console.WriteLine("* Finished!");
    }

    static void Main() {
        BlackThread noir = new BlackThread();
        noir.SetAndGo(() => pausableFunction(noir));

        while (noir.IsAlive) {
            Console.Write("> ");
            Console.ReadKey();
            noir.Continue();
        }
    }
} 
```

可悲的是，它不是可以随时暂停的线程，而是需要等待外部处理才能继续的函数的线程。就像游戏暴徒的动作一样，它需要绘制循环才能继续绘制它的帧，并且暴徒的 AI 在游戏的主循环中处理。

我想它会使它成为某种伪线程？反正。

它将允许暴徒在每个循环中一点一点地处理这个动作，而不是像在它的 AI 中进行级联检查......

```
if mob is doing action {
    if mob has already done this previous part of the action {
        do the following part
    }
} 
```

...它宁愿像这样，在一个线程中：

```
do the first step of the action
Wait for it to be rendered...
do the following step of the action
Wait for it to be rendered...
do the last step of the action
(Action ends here, no need to wait for anything anymore) 
```

现在，我的实现有一个错误，我无法弄清楚如何修复。当它应该取消暂停 BlackThread 时，它会在使用它的函数（在本例中为 pausableFunction()）中保持暂停状态。我想这是因为实例是如何传递的？

如果这是我的猜测 - 也就是说，某些东西（我猜它是 bool 暂停的）是按值而不是引用传递的 - 我该如何解决它？

我真的习惯了 C 和 C++ 的指针，所以在处理 C# 中对象值在作用域之间的通信时，有时我会有点纠结。

* * *

这是代码的一个版本，一个原型说：

```
using System;
using System.Threading;

class Program {
    static bool paused;

    static void Pause() {
        paused = true;
        while (paused);
    }

    static void Unpause() {
        paused = false;
    }

    static void WaitForIt(Thread waited) {
        while(!paused && waited.IsAlive);
    }

    static void Continue (Thread ToStop) {
        Unpause();
        WaitForIt(ToStop);
    }

    static void SetAndGo (out Thread thread, ThreadStart Start) {
        thread = new Thread(Start);
        thread.Start();
        WaitForIt(thread);
    }

    // ---

    static void thr (string chant) {
        // Console.WriteLine("Waiting...");
        // Pause();
        // Console.WriteLine("{0}", chant);
        // Pause();
        // Console.WriteLine("Well, I'm finished!");

        Console.WriteLine("I'm finished!");
    }

    static void Main() {
        // Thread tt = new Thread(() => thr());
        // tt.Start();
        // WaitForIt(tt);

        Thread tt;
        SetAndGo(out tt, (() => thr("I'm doing stuff.")));

        while (tt.IsAlive) {
            Console.Write("> ");
            Console.ReadKey();
            Continue(tt);
        }
    }
} 
```

我只是不使用它，因为我宁愿让所有东西都负责一个特定的类，这也可以提高可读性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T21:50:45.820

好的，我已经完成了我已经尝试过的事情，所以我将把我的代码留在这里以供将来参考！

这是最后的BlackThread类：

```
using System;
using System.Threading;

class BlackThread { 
    //* ===== *//

    private AutoResetEvent pauser = new AutoResetEvent(false);
    private AutoResetEvent waiter = new AutoResetEvent(false);

    private Thread innerThr;

    // ----- //

    public bool IsActing {
        get {
            if (innerThr != null) return innerThr.IsAlive;
            else return false;
        }
    }

    //* ===== *//

    public void KickStart_(ThreadStart start) {
        innerThr = new Thread(start);
        innerThr.Start();

        WaitForIt();
    }

    // ----- //

    // FOR THE THREADED FUNCTION
    public void Wait() {
        waiter.Set();
        pauser.WaitOne();
    }

    public void End() {
        waiter.Set();
    }

    // ----- //

    // FOR BLACKTHREAD MANAGING
    private void WaitForIt() {
        waiter.WaitOne();
    }

    public void Continue() {
        if (IsActing) {
            pauser.Set();
            WaitForIt();
        }
    }

    //* ===== *//
} 
```

在这里，它的使用示例：

```
class MainClass {
    static void pausableFunction() {
        Console.WriteLine("* Waiting...");

        Event.Wait();

        Console.WriteLine("* Doing stuff.");
        Thread.Sleep(1000);

        Event.Wait();

        Console.WriteLine("* Finished!");

        Event.End();
    }

    static void anotherFunction(int foo) {
        Console.WriteLine("* Wanna know the value of a number?");

        Event.Wait();

        Console.WriteLine("* I'll tell you. It's {0}!", foo);

        Event.End();
    }

    static void simpleFunction() {
        Console.WriteLine("* I'm done already!");
    }

    static BlackThread Event = new BlackThread();   
    static Random Rand = new Random();

    static void Main() {        
        int r;

        do {
            if (!Event.IsActing) {
                Console.WriteLine();
                r = Rand.Next(3);

                if (r == 0) {
                    Event.KickStart_(() => pausableFunction());
                }
                else if (r == 1) {
                    simpleFunction();
                }
                else {
                    Event.KickStart_(() => anotherFunction(Rand.Next(20) + 1));
                }
            }
            else {
                Event.Continue();
            }

            Console.Write("> ");
            Console.ReadKey();
        } while(true);
    }
} 
```

我最终选择使用的是两个 AutoResetEvent 处理程序。一个是在需要暂停的线程的函数中管理的，它暂停主循环，等待者ARE，另一个是暂停者ARE，在主循环中管理，使用支持BlackThread的函数暂停线程；也就是说，可以访问 BlackThread 实例。

在这种情况下，我使用了一个静态 BlackThread 对象，但它也可以作为参数传递给函数。

是的，它是以佛教地狱命名的！

# php - 简单产品名称中的 HTML 未解析。Magento

> ID：13547898
> 
> 赞同：1
> 
> 时间：2012-11-25T03:04:05.580
> 
> 标签：php, html, magento

我需要在我的简单产品标题中包含 html，以便我可以拥有：

```
<strong>A.</strong> Product Title Name 
```

但在前端，它会回显那些 html 标签。有没有办法让所有的html标签都解析？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T03:08:41.047

要解决此问题，请执行以下步骤：

*   转到管理面板。
*   在`Catalog`菜单下，单击`Attributes`> `Manage Attributes`。
*   找到`Name`属性。打开它。
*   在 Frontend Properties 列表的中间，会出现一个下拉菜单，上面写着`Allow HTML Tags on Frontend`.
*   将其更改为`Yes`并保存。
*   完毕 ：）。

# core-data - NSFetchedResultsController 在 NSFetchRequest 中带有 NSDictionaryResultsType

> ID：13547899
> 
> 赞同：2
> 
> 时间：2012-11-25T03:04:13.077
> 
> 标签：core-data, nspredicate, nsfetchedresultscontroller, nsfetchrequest

一周以来我一直在研究这个问题，但没有得到任何解决方案，所以我想把这个问题更概括，可能会帮助用户研究它并给我一个解决方案。

设想：

我有一个费用跟踪 iOS 应用程序，我有一个名为“DashBoardViewController”的视图控制器（表格视图控制器 - 带有 FRC），它基本上可以对给定一周、一个月或一年的费用/收入进行分类，并将其显示为部分标题标题例如：（2012 年 10 月 1 日至 10 月 7 日），它根据特定的周或月或年显示费用/收入 ROWS 和相关内容。

我的问题：

我想要完成的是：

根据“Money”实体的“Category”属性显示不同的结果，并根据该属性计算“Sum”。

但是，我的名为“仪表板视图控制器”的视图控制器充满了 NSFetchedResultsController，其部分名称键路径为“类型”，可以是费用或收入。为了获得不同的结果，我将在我的 fetch 请求中使用 Result 类型作为 NSDictionaryResultsType ，这将给我唯一的结果，但 FRC 失败，它不适用。那么，我将如何获得我的部分名称呢？我已经发布了下面的代码。

编辑 - 基于马丁的建议

```
 - (void)userDidSelectStartDate:(NSDate *)startDate andEndDate:(NSDate *)endDate
{
    AppDelegate * applicationDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext * context = [applicationDelegate managedObjectContext];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Money" inManagedObjectContext:context];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    NSPredicate *predicateDate = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date <= %@)", startDate, endDate];
    [fetchRequest setPredicate:predicateDate];

    // Edit the sort key as appropriate.

    typeSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"type" ascending:YES];

    dateSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:YES];

    if(self.choiceSegmentedControl.selectedIndex == 0)
    {
        choiceSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"cat" ascending:NO];
    }

    if(self.choiceSegmentedControl.selectedIndex == 1)
    {
        choiceSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"vendor" ascending:NO];
    }

    if(self.choiceSegmentedControl.selectedIndex == 2)
    {        
        choiceSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"paidBy" ascending:NO];
    }

    NSArray * descriptors = [NSArray arrayWithObjects:typeSortDescriptor, dateSortDescriptor,choiceSortDescriptor, nil];

    [fetchRequest setSortDescriptors:descriptors];
    [fetchRequest setIncludesSubentities:YES];

    NSError * anyError = nil;

    NSArray *propertiesToFetch = [[NSArray alloc] initWithObjects:
                                  [entity.propertiesByName objectForKey:@"cat"],
                                  nil];

    [fetchRequest setReturnsDistinctResults:YES];
    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setPropertiesToFetch:propertiesToFetch];

    NSArray * objects = [context executeFetchRequest:fetchRequest error:&anyError];

    for (NSDictionary *d in objects)
    {
        NSLog(@"NSDictionary = %@", d);
    }

    NSSet *uniqueSet = [NSSet setWithArray:[objects valueForKey:@"cat"]];

    uniqueArray = [NSMutableArray arrayWithArray:[uniqueSet allObjects]];

    self.categoryArray = uniqueArray;

    if(_fetchedResultsController)
    {
        [_fetchedResultsController release]; _fetchedResultsController = nil;

    }

    _fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:@"type" cacheName:nil];

    //self.fetchedResultsController.delegate = self; in order to stop "change tracking"

    if(![_fetchedResultsController performFetch:&anyError])
    {
        NSLog(@"error fetching:%@", anyError);
    }

    [fetchRequest release];

    //Finally you tell the tableView to reload it's data, it will then ask your NEW FRC for the new data
    [self.dashBoardTblView reloadData];

    self.startDate = startDate;
    self.endDate = endDate;

} 
```

使用此代码，SECTION NAME KEY PATH 不起作用，它抱怨该对象将被放置在未命名的部分中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T10:59:03.873

获取的结果控制器不支持更改跟踪（即设置 FRC 委托）与`NSDictionaryResultType`.

原因记录在`setIncludesPendingChanges:`函数中：

> **特别注意事项**
> 
> 不支持 YES 值与结果类型 NSDictionaryResultType 一起使用，包括聚合结果的计算（例如 max 和 min）。对于字典，从 fetch 返回的数组反映了持久存储中的当前状态，并且不考虑上下文中的任何未决更改、插入或删除。

FRC 的更改跟踪意味着`includesPendingChanges = YES`获取请求，这不适用于`NSDictionaryResultType`.

一种解决方法可能是使用*没有更改跟踪*的 FRC ，因此您不要设置 FRC 委托。但这意味着要更新表格视图，您必须

*   保存托管对象上下文，以及
*   调用`performFetch`FRC 和`reloadData`表视图。

另一种解决方法可能是使用 FRC 来获取所有没有 sum 聚合的部分和行，并使用结果来计算具有内存中聚合的新表行（例如 in `controllerDidChangeContent`）。

**更新：（**来自讨论）另一个重要的一点是，如果您使用 fetch 请求`NSDictionaryResultType`，那么`sectionNameKeyPath`fetched results 控制器的 必须包含在`propertiesToFetch`fetch 请求中。

# jquery - jQuery 撤消/重做

> ID：13547900
> 
> 赞同：2
> 
> 时间：2012-11-25T03:04:22.903
> 
> 标签：jquery, jquery-ui

我设计了一个用于设计报告的 Web 表单。通过这个表单，我可以添加文本、图像，还可以修改上述元素的属性，例如`border`、`font-size`等。接下来我想添加*撤消*和*重做*功能。

例如，如果我在图像上添加边框，我想让它*undoable*，如果我修改某些文本的字体大小，我也希望它是*undoable*和*redoable*。使用 jQuery，我怎么能完成这样的事情？

[我在 jquery 中](https://stackoverflow.com/questions/1979863/undo-redo-plugin-in-jquery)发现了这个问题Undo/redo Plugin 。

# java - 如何获得2次幂的最后一位

> ID：13547901
> 
> 赞同：0
> 
> 时间：2012-11-25T03:04:44.443
> 
> 标签：java, biginteger

我正在解决一个要求获得 2^1001 的最后 100 位数字的问题。解决方案必须在 java 中并且不使用 BigInteger，仅使用 int 或 Long。目前我想创建一个处理 100 位数字的类。所以我的问题是，是否有另一种方法可以使用 int 或 long 处理溢出来获得 100 位数字。

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:13:53.587

已编辑：我的模运算符中的 10 次幂（哎呀）

2^1001 的最后 100 位数字是数字 2^1001（模 10^100）。

请注意，2^1001 (mod 10^100) = 2*(2^1000(mod 10^100)) (mod 10^100)。

查看模数的属性：http: [//www.math.okstate.edu/~wrightd/crypt/lecnotes/node17.html](http://www.math.okstate.edu/~wrightd/crypt/lecnotes/node17.html)

这是 99% 的数学问题，1% 的编程问题。:)

但是，使用这种方法，您将无法仅使用整数，因为 10^100 不适合 int 或 long。

但是，您可以使用它来查找 2^1001 的最后 10 位，然后使用单独的例程来查找接下来的 10 位等，其中每个例程都使用此功能...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T03:10:10.073

最快的方法（编码明智）是创建一个由 100 个整数组成的数组，然后有一个函数从一个位置开始并将每个数字加倍。确保取模数 10 并在需要时结转 1s。对于第 100 位，只需消除结转。做 1001 次，你就完成了。

# wpf - Linqpad 和 WPF（System.Windows.Controls 参考）

> ID：13547902
> 
> 赞同：4
> 
> 时间：2012-11-25T03:05:24.380
> 
> 标签：wpf, linqpad

我正在尝试使用 Linqpad 构建一些实时 WPF/XAML 示例

要创建 Window() 和其他控件，我需要从 linqpad 引用 System.Windows.Controls ...

我尝试使用 F4 添加此引用，但 System.Windows.Controls 未出现在列表中...在 VS 2010 中我可以添加此引用...因此证明 .DLL 存在

我已经查看了 \Windows\Microsoft.NET\Framework\v4.0.30319 并且什么都没有......还查看了 \Windows\Microsoft.NET\Framework\v4.0.30319\WPF 并且什么也没有......

\Windows\Microsoft.NET\Framework\v4.0.30319\WPF 中有一个 System.Windows.Presentation.dll，但我尝试包含它但仍然无法正常工作

？有什么建议么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T03:31:36.073

好的 解决了...

只需包含 \Windows\Microsoft.NET\Framework\v4.0.30319\WPF\PresentationFramework.dll

```
// and import namespaces
System.Windows.Controls
System.Windows.Documents
System.Windows.Interop
System.Windows.Media
System.Windows.Shell
System.Xaml 
```

;=))

# applescript - 如何从 applescript 为 iTunes 选择扬声器

> ID：13547910
> 
> 赞同：2
> 
> 时间：2012-11-25T03:07:04.247
> 
> 标签：applescript, itunes

我希望能够从脚本中为 iTunes 选择输出声音设备（实际上任何编程语言都可以）。

目前，我能够使用 UI 元素脚本来点击按钮，该按钮提供菜单以选择扬声器：

```
tell application "System Events"
     tell window "iTunes" of process "iTunes"
        set chbtn to first UI element whose help is "Choose which speakers to use."
        tell chbtn
            click
            -- tell menu 1 to get every menu item
        end tell
     end tell
end tell 
```

这可行，并出现带有可能选择的菜单。但是，applescript 似乎在**单击**命令之后停止，并且只有在我自己单击屏幕上的某个位置后才会发生进一步的操作（在代码中注释所在的位置）。如何防止这种情况并继续从此菜单中选择菜单项？

任何不恢复到 UI 脚本的解决方案也非常受欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:07:49.740

解决方案代码是

```
tell application "iTunes" to activate
tell application "System Events"
    tell window "iTunes" of process "iTunes"
        click (first UI element whose help is "Choose which speakers to use.")
        keystroke "DENON" & return -- Select "DENON" airplay entry
        -- keystroke "Computer" & return -- Select standard output
     end tell
end tell 
```

但是，在`click`和之间有一个恼人的 4 秒延迟`keystroke`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:04:11.723

我之前在使用 UI 脚本时遇到过延迟问题。您可以通过告诉脚本单击哪些元素来消除它。我没有外部扬声器，因此元素的名称和属性不在我的计算机上。获取有关可用元素的更多信息的一种简单方法是使用（不是免费的，但非常棒的）UI 浏览器[http://pfiddlesoft.com/uibrowser/](http://pfiddlesoft.com/uibrowser/)。获取有关元素的更多信息的一种不太简单但免费的方法是使用：

```
tell application "System Events"
    tell window "iTunes" of process "iTunes"
        set chbtn to first UI element whose help is "Show or hide item artwork and video viewer."
        tell chbtn
            entire contents
        end tell
end tell 
```

结束告诉

# google-app-engine - GAE 不导入 gflags

> ID：13547912
> 
> 赞同：6
> 
> 时间：2012-11-25T03:07:43.253
> 
> 标签：google-app-engine, python-2.7, oauth-2.0, google-api-python-client, gflags

我正在尝试让 oauth 在 Google App Engine (GAE) 上工作，但我无法导入`OAuth2Decorator`，因为它尝试导入`gflags`并失败。

在命令行中，我运行`help('modules')`并列出了 gflags，并且运行了++`import os`并收到了.`import gflags``print os.path.dirname(gflags.__file__)``/Library/Python/2.7/site-packages/python_gflags-2.0-py2.7.egg`

在 GAE 开发控制台中，我运行过：

```
import sys
import os

try:
  import webapp2
  import httplib2
  from oauth2client.appengine import OAuth2Decorator 

except ImportError, e:
  print("The import failed!")
  print(e) 
```

并收到：

```
The import failed!
No module named gflags 
```

`gflags`由 导入，但每次运行代码时`from oauth2client.appengine import OAuth2Decorator`GAE 都无法导入。`gflags`

我不确定这会有所不同，但我正在运行 Mac OS 10.7.5 和 python 2.7.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T01:12:00.337

抱歉，我最近刚刚使用 App Engine 特定说明更新了安装说明：

[https://developers.google.com/api-client-library/python/start/installation](https://developers.google.com/api-client-library/python/start/installation)

有一个专门针对 App Engine 的下载，其中包含所有客户端库代码*和*依赖项，只需将该文件解压缩到您的项目中，您就可以开始使用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T04:56:11.120

您需要将所需的库文件添加到您的 App Engine 项目中。从[客户端库文档](https://developers.google.com/api-client-library/python/platforms/google_app_engine)中，安装客户端库后，运行：

```
$ enable-app-engine-project your_app_directory 
```

# javascript - 谷歌地图在标记组之间切换

> ID：13547913
> 
> 赞同：0
> 
> 时间：2012-11-25T03:07:44.303
> 
> 标签：javascript, google-maps

我有一个 JSON 提要，其中包含要在 Google 地图画布上列出的业务类型的坐标和信息。在 JSON 提要中，行业字段由整数表示，可以是 1、2 或两者。一种不太抽象的表达方式是，企业可以是餐厅、零售店或两者兼而有之。

我通过检查初始数组值是否等于第一个类型数组值来管理这两种类型之间的切换，但我不知道如何处理业务两者兼有的情况。我在 Javascript 中搜索了“in”运算符，它可以检查数组中是否存在值并返回 true 或 false，但找不到任何有用的东西。

[http://jsfiddle.net/serkanh/BVjGh/16/](http://jsfiddle.net/serkanh/BVjGh/16/)

当前检查业务类型的方法：

```
for(i=0; i < markers.length; i++){                     
    if(markers[i].category === category){                 
           markers[i].setVisible(true);            
    }else{                 
           markers[i].setVisible(false);            
    }          
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:32:51.357

如果您的值是 1 和 2，那应该很容易：将两种类型的值都设置为 3。然后用

```
if(markers[i].category&3) {
  // Both
} else if(markers[i].category&2) {
  // type 2
} else if(markers[i].category&1) {
  // type 1
} 
```

# c - C中标识符的命名空间

> ID：13547915
> 
> 赞同：2
> 
> 时间：2012-11-25T03:08:01.227
> 
> 标签：c, namespaces, c99

从 (6.2.3/1) C99 标准

> -- 结构体、联合体和枚举的标签（通过任何*关键字 struct、union 或 enum 来消除歧义）；
> 
> *脚注：标签只有一个名称空间，尽管可能有三个。

现在，我知道在 C++ 中我们使用命名空间来避免实体冲突，例如：

```
namespace foo {
     struct bar // ..define bar..
};

namespace foo2 {
     struct bar // ..define bar..
}; 
```

在 C 中，struct、union、enum 如何用作命名空间以及脚注意味着只有一个命名空间而不是三个命名空间是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:13:31.137

结构、联合和枚举的*标签*有一个单独的命名空间，所以你可以拥有

```
struct foo {
    int bar;
};
double foo; 
```

因为标签的命名空间与标识符的命名空间是分开的。标签只有一个命名空间意味着您不能拥有

```
struct foo {
    int bar;
};
union foo {
    double baz;
    long quux;
} 
```

在同一范围内。

# content-management-system - N2CMS 安装 - 启动节点未出现

> ID：13547916
> 
> 赞同：0
> 
> 时间：2012-11-25T03:08:03.623
> 
> 标签：content-management-system, installation, integration, n2cms

我正在尝试将 N2CMS 集成到现有应用程序中。我正在安装过程中，并且一直在遵循提供的文档以集成到现有应用程序中。

我已完成安装的“添加内容包”部分。但是，“主页”开始页面未出现在“开始节点”下拉列表下（在“手动插入节点”下）。几天来，我一直试图弄清楚这一点，查看了各种来源，但似乎没有任何效果。

我将在下面发布内容项（安装程序应该使用的 cs 代码）。我真正需要的是一个易于集成到现有网站的 CMS，这就是我选择 N2CMS 的原因。但是维护不善的文档和缺乏支持真的让我想尝试别的东西。不幸的是，每个 CMS 都希望您从头开始使用他们的系统。如果有人知道另一个易于集成到现有网站的开源 CMS，请告诉我。

这是cs代码（HomePage.cs，在“模型”文件夹下）

```
namespace ExistingApplication.Models
{

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using N2;
using N2.Web;
using N2.Details;
using N2.ContentItem;
using N2.Installation;

[N2.Definition("My page", "MyPage", "A simple page with a chunk of text", "The tooltip", 1, Installer = InstallerHint.PreferredStartPage, TemplateUrl = "~/UI/Home.aspx")]

[N2.Details.WithEditableTitle, N2.Details.WithEditableName]

public class HomePage : N2.ContentItem
  {

  }

} 
```

顺便说一下，'TemplateUrl' 指向的 url 确实存在。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:53:46.533

尝试通过实现（空）接口 IStartPage 来修改主页定义

```
public class HomePage : N2.ContentItem, IStartPage 
```

IStartPage 是专门用于此目的的标记界面 - 以便 N2 可以将常规页面与可用作站点起始页面的页面区分开来。

# ruby-on-rails - 服务器上的 Ruby On Rails 路由

> ID：13547917
> 
> 赞同：0
> 
> 时间：2012-11-25T03:08:09.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, passenger, rails-routing

我在我的 Mac 上设置了 Rails 环境。

**本地**：`~/GitHub/Warehouse/`

**服务器**：`http://localhost:3001/`

这是我的**/config/routes.rb**：

```
Warehouse::Application.routes.draw do

    resources :events
    resources :locations
    resources :categories
    resources :items

    get "home/index"
    root :to => "home#index"

end 
```

我将我的应用程序放在服务器上的一个文件夹`~/warehouse`中。它有一个指向 的符号`~/public_html/warehouse/`链接`~/warehouse/public`。

**所以我的网址是：** [http ://showtime.www77.a2hosting.com/warehouse](http://showtime.www77.a2hosting.com/warehouse)

我收到以下错误：

```
Started GET "/warehouse" for 184.175.153.98 at Sat Nov 24 21:47:24 -0500 2012

ActionController::RoutingError (No route matches [GET] "/warehouse"):
    vendor/bundle/ruby/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
    vendor/bundle/ruby/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/rack/logger.rb:32:in `call_app'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `call'
    vendor/bundle/ruby/1.8/gems/activesupport-3.2.9/lib/active_support/tagged_logging.rb:22:in `tagged'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/rack/logger.rb:16:in `call'
    vendor/bundle/ruby/1.8/gems/actionpack-3.2.9/lib/action_dispatch/middleware/request_id.rb:22:in `call'
    vendor/bundle/ruby/1.8/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
    vendor/bundle/ruby/1.8/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
    vendor/bundle/ruby/1.8/gems/activesupport-3.2.9/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
    vendor/bundle/ruby/1.8/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
    vendor/bundle/ruby/1.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
    vendor/bundle/ruby/1.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
    vendor/bundle/ruby/1.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
    vendor/bundle/ruby/1.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!'
    vendor/bundle/ruby/1.8/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/engine.rb:479:in `call'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/application.rb:223:in `call'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `send'
    vendor/bundle/ruby/1.8/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
    passenger (3.0.15) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
    passenger (3.0.15) lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
    passenger (3.0.15) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
    passenger (3.0.15) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
    passenger (3.0.15) lib/phusion_passenger/rack/application_spawner.rb:171:in `send'
    passenger (3.0.15) lib/phusion_passenger/rack/application_spawner.rb:171:in `handle_spawn_application'
    passenger (3.0.15) lib/phusion_passenger/utils.rb:470:in `safe_fork'
    passenger (3.0.15) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:180:in `start'
    passenger (3.0.15) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
    passenger (3.0.15) lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rack_application'
    passenger (3.0.15) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    passenger (3.0.15) lib/phusion_passenger/spawn_manager.rb:246:in `spawn_rack_application'
    passenger (3.0.15) lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
    passenger (3.0.15) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    passenger (3.0.15) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
    passenger (3.0.15) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
    passenger (3.0.15) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:357:in `__send__'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    passenger (3.0.15) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    passenger (3.0.15) helper-scripts/passenger-spawn-server:99 
```

我的 routes.rb 表应该是什么样的？我对此感到困惑。请让我知道我应该做些什么来完成这项工作。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:22:25.987

尝试改变你的`config.ru`

```
map "/warehouse" do
  run Warehouse::Application
end 
```

这会将您的应用程序和机架中间件安装到指定的路径或 URI 及其下的所有子路径，因此您的路由应该可以正常工作。如果您的资产有问题，请`config.action_controller.asset_host`在 config/environments 中的环境配置文件中进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:55:41.423

尝试使用命名空间。你还需要

```
namepace :warehouse do
  resources ....
end 
```

root_to '仓库#pages#home'

# php - 如何从数据库中回显随机行？

> ID：13547918
> 
> 赞同：-2
> 
> 时间：2012-11-25T03:08:37.497
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL：如何检索随机行或多个随机行？](https://stackoverflow.com/questions/4586858/mysql-how-to-retrieve-a-random-row-or-multiple-random-rows)
> [从 mysql 数据库中提取 5 条随机记录](https://stackoverflow.com/questions/13351718/pull-5-random-records-from-mysql-database)

我的数据库中有大量域列表，位于“网站”列下的“列表”表中。

大约有 1.4 亿行，我只需要知道如何回显随机行。

基本上是这样的：

```
<?php include('directory/database.php'); ?>

WHATEVER CODE WORKS FOR GETTING A RANDOM DOMAIN FROM THE DATABASE

<?php
echo $domain;
?> 
```

只有大量的记录，所以我需要知道随机选择其中一个并显示在页面上的最快方法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:17:30.243

你绝对不想使用`ORDER BY RAND()`. MySQL 必须建立一个临时表。如果你的表有一个唯一的 id 列，这样的事情会更好：

```
SELECT * FROM `table`
WHERE id >= (SELECT FLOOR( MAX(id) * RAND()) FROM `table` )
ORDER BY id LIMIT 1; 
```

有关在 php 中运行良好的其他方法，请参阅[此博客文章](http://akinas.com/pages/en/blog/mysql_random_row/)。

注意：这只是重复[了我在这个线程上的回答](https://stackoverflow.com/a/13351767/535871)。

# gcc - 警告：从指针转换为不同大小的整数

> ID：13547920
> 
> 赞同：4
> 
> 时间：2012-11-25T03:08:43.503
> 
> 标签：gcc, int, void-pointers, gcc-warning

我正在研究套接字编程。我的代码按照我想要的方式执行，我可以使用它。但它给了我一个关于编译的警告。

我编译使用

```
gcc server1.c -o server1 -lpthread 
```

我得到了警告

```
warning: cast from pointer to integer of different size [-Wpointer-to-int-cast] 
```

以下代码出现此错误

```
int newsockfd;
newsockfd = (int)newsockfdd; //this line 
```

我在下面的代码块中使用了newsockfdd（它是int）

```
if (pthread_create(&threadID[i++], NULL, serverThread, (void *)(intptr_t)newsockfdd) != 0)
    {
        perror("Thread create error");
    } 
```

你可能会说，代码写得不太好（我正在努力让它变得更好）。我知道这个警告是因为与 int 的大小有关。但我真的不知道如何解决它。在我在 pthread_create 语句中输入 (intptr_t) 之前，它在该行显示了一个警告，但那个时候警告是

```
warning: cast to pointer from integer of different size [-Wint-to-pointer-cast] 
```

似乎应该有一个简单的解决方法？但我找不到它。我正在使用 Ubuntu 64 位。这是警告的原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T14:07:25.553

正如评论中所确定的那样，情况是（模重命名以避免混淆`newsockfdd`作为传递参数或接收参数的出现）

```
void *serverThread(void *arg) {
    // ...
    int newsockfd = (int)arg;
    // ...
} 
```

和 in `main`（或从那里调用的函数）

```
// ...
int newsockfdd = whatever;
// ...
if (pthread_create(&threadID[i++], NULL, serverThread, (void *)(intptr_t)newsockfdd) != 0)
// .. 
```

因此，当`int newsockfdd`作为参数传递给 时`serverThread`，它被强制转换为 a `void*`。最初，该演员表是直接的，但`intptr_t`插入了中间演员表以删除有关`cast to pointer from integer of different size`.

并且在中`serverThread`，收到`void*`的内容被强制转换为`int`，导致关于 的警告`cast from pointer to integer of different size`。

该警告也可以通过在`intptr_t`.

但是，虽然标准允许将整数转换为指针，反之亦然，但结果是实现定义的，并且不能保证`int -> void* -> int`往返（尽管标准中的脚注说

> 将指针转换为整数或将整数转换为指针的映射函数旨在与执行环境的寻址结构保持一致。

所以它*可能*会在这种情况下往返并按预期工作 - 但如果 a 的大小`void*`小于整数类型的大小[考虑`long long -> void* -> long long`32 位系统]）。

正确的解决方法是避免整数和指针之间的转换，

```
void *serverThread(void *arg) {
    // ... check that arg isn't NULL
    int newsockfd = *(int *)arg;
    // ...
} 
```

in `severThread`，将接收到的指针转换为适当类型的指针，并读取指向的值，然后在`main`

```
if// ...
int newsockfdd = whatever;
// ...
if (pthread_create(&threadID[i++], NULL, serverThread, &newsockfdd) != 0) 
```

传递 的地址`newsockfdd`。

一个警告：如果`serverThread`从多个地方调用，所有这些地方的调用都需要修复。

# python - Python：运行进度条并同时工作？

> ID：13547921
> 
> 赞同：3
> 
> 时间：2012-11-25T03:09:29.043
> 
> 标签：python, progress-bar, multitasking

我想知道如何同时运行进度条和其他一些工作，然后当工作完成后，在 Python (2.7.x) 中停止进度条

```
import sys, time
def progress_bar():
 while True:
  for c in ['-','\\','|','/']:
   sys.stdout.write('\r' + "Working " + c)
   sys.stdout.flush()
   time.sleep(0.2)

def work():
 *doing hard work* 
```

我怎么能做这样的事情：

```
progress_bar() #run in background?
work()
*stop progress bar*
print "\nThe work is done!" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T03:11:54.620

[您可以使用`threading`模块](http://docs.python.org/2/library/threading.html)在后台运行线程。例如：

```
def run_progress_bar(finished_event):
    chars = itertools.cycle(r'-\|/')
    while not finished_event.is_set():
        sys.stdout.write('\rWorking ' + next(chars))
        sys.stdout.flush()
        finished_event.wait(0.2)

# somewhere else...
finished_event = threading.Event()
progress_bar_thread = threading.Thread(target=run_progress_bar, args=(finished_event,))
progress_bar_thread.start()
# do stuff
finished_event.set()
progress_bar_thread.join() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T12:42:22.203

您可以创建一个单独的线程来显示进度条。这可以如@icktoofay 的[回答](https://stackoverflow.com/a/13547929/355230)中所示完成，但是我更喜欢下面的实现，它为任务派生一个新的线程子类。这种方法的一个优点是所有内容都包含在新类的每个实例中，因此您不需要全局变量来进行它们与主线程之间的通信。

```
import sys
import threading
import time

class ProgressBarThread(threading.Thread):
    def __init__(self, label='Working', delay=0.2):
        super(ProgressBarThread, self).__init__()
        self.label = label
        self.delay = delay  # interval between updates
        self.running = False
    def start(self):
        self.running = True
        super(ProgressBarThread, self).start()
    def run(self):
        label = '\r' + self.label + ' '
        while self.running:
            for c in ('-', '\\', '|', '/'):
                sys.stdout.write(label + c)
                sys.stdout.flush()
                time.sleep(self.delay)
    def stop(self):
        self.running = False
        self.join()  # wait for run() method to terminate
        sys.stdout.write('\r' + len(self.label)*' ' + '\r')  # clean-up
        sys.stdout.flush()

def work():
    time.sleep(5)  # *doing hard work*

pb_thread = ProgressBarThread('Computing')
pb_thread.start()
work()
pb_thread.stop()
print("The work is done!") 
```

# python-3.x - python3 在 PyCObject_AsVoidPtr 中导入 pygame 结果

> ID：13547923
> 
> 赞同：5
> 
> 时间：2012-11-25T03:10:01.297
> 
> 标签：python-3.x, pygame, runtime-error

我在 MacBookPro 上将 pygame 和 python3 放在一起时遇到了困难。

我安装了 Python 3.3，而我的 MacOS 运行的是 10.7.5 版本。

然后我下载了 pygamev1.9.1 源代码，并按照[http://programming.itcarlow.ie/PyGameInstall.pdf中的说明进行操作](http://programming.itcarlow.ie/PyGameInstall.pdf)

编译和安装都很顺利，直到我在 python3 中发出“import pygame”。

然后我遇到了以下“PyCobJect_AsVoidPtr”错误（错误消息后面的进一步文本）：

> > > 导入 pygame Traceback（最近一次调用最后）：文件“”，第 1 行，在文件“/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pygame/init **.py** ”中，第 95 行，从 pygame.base 导入 * ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pygame/base.so, 2)：找不到符号： _PyCObject_AsVoidPtr 引用自：/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pygame/base.so 预期于：/Library/Frameworks/Python.framework/Versions/3.3 中的平面命名空间/lib/python3.3/site-packages/pygame/base.so

在 google 上搜索表明该符号自 Python3.2 以来已被删除：

[http://mail.python.org/pipermail/python-dev/2011-March/108882.html](http://mail.python.org/pipermail/python-dev/2011-March/108882.html)

有人可以给我一些关于如何让 pygame 在 Python3.3 上工作的建议吗？

更重要的是，虽然我知道 pygame/python3 开发人员正忙于他们的工作，但如果有人可以为 python3 提供预编译的 pygame 二进制文件，我当然会很感激。我的计算机技能有限，我只想继续学习 Python3 和 pygame，这严重阻碍了我的兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T16:26:32.560

我注意到您试图从源代码编译，但据我所知，基于 Python 3.3 的构建尚不受支持（截至 2013 年 1 月）。事实上，我所知道的 PyGame 和 Python 3.3 的唯一二进制文件是[非官方版本和仅限 Windows](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pygame)的.

您应该考虑改用以前版本的 Python（例如 Python 2.7.*），PyGame 构建/二进制文件得到了很好的支持。设置的任何要点都应该直接发送到[pygame-users 邮件列表](http://www.pygame.org/wiki/info#Mailing%20List)，如果他们还没有的话。

# c - 使用 extern 将数组与指针链接起来

> ID：13547928
> 
> 赞同：2
> 
> 时间：2012-11-25T03:11:47.660
> 
> 标签：c, arrays, pointers, extern

假设我有两个文件：file1.c- 包含一个名为“array[10]”的大小为 10 的 int 数组的全局定义。file2.c- 包含一个名为“extern int *array”的 int 指针，这里我试图将此指针链接到数组。

但是当我检查file1.c中的数组地址和file2.c中的指针值时，它们都是不同的。为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T03:15:55.380

那行不通，在`file2.c`，你需要

```
extern int array[]; 
```

因为数组和指针不是一回事。两个声明都必须具有兼容的类型，并且`int*`不兼容`int[N]`.

没有具体说明实际发生的情况，程序格式错误`extern int *array;`，但可能`sizeof(int*)`数组的第一个字节被解释为地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:55:40.877

外部1.c

```
#include <stdio.h>

extern int *array;
int test();

int main(int argc, char *argv[])
{
    printf ("in main: array address = %x\n", array);
    test();
    return 0;
} 
```

外部2.c

```
int array[10] = {1, 2, 3};

int test()
{
    printf ("in test: array address = %x\n", array);
    return 0;
} 
```

输出：

```
in main: array address = 1
in test: array address = 804a040 
```

和汇编代码：

```
08048404 <main>:
 8048404:       55                      push   %ebp
 8048405:       89 e5                   mov    %esp,%ebp
 8048407:       83 e4 f0                and    $0xfffffff0,%esp
 804840a:       83 ec 10                sub    $0x10,%esp
 804840d:       8b 15 40 a0 04 08       mov    0x804a040,%edx    <--------- this (1)
 8048413:       b8 20 85 04 08          mov    $0x8048520,%eax
 8048418:       89 54 24 04             mov    %edx,0x4(%esp)
 804841c:       89 04 24                mov    %eax,(%esp)
 804841f:       e8 dc fe ff ff          call   8048300 <printf@plt>
 8048424:       e8 07 00 00 00          call   8048430 <test>
 8048429:       b8 00 00 00 00          mov    $0x0,%eax
 804842e:       c9                      leave  
 804842f:       c3                      ret    

08048430 <test>:
 8048430:       55                      push   %ebp
 8048431:       89 e5                   mov    %esp,%ebp
 8048433:       83 ec 18                sub    $0x18,%esp
 8048436:       c7 44 24 04 40 a0 04    movl   $0x804a040,0x4(%esp) <------- this (2)
 804843d:       08 
 804843e:       c7 04 24 3d 85 04 08    movl   $0x804853d,(%esp)
 8048445:       e8 b6 fe ff ff          call   8048300 <printf@plt>
 804844a:       b8 00 00 00 00          mov    $0x0,%eax
 804844f:       c9                      leave  
 8048450:       c3                      ret 
```

注意汇编代码中的<-----。您可以在主函数中看到数组是数组 [0]，而在测试函数中数组是地址。

# iphone - iPhone html 解析与 libxml2 和 hpple

> ID：13547930
> 
> 赞同：3
> 
> 时间：2012-11-25T03:12:00.563
> 
> 标签：iphone, html, ios, parsing, libxml2

我正在尝试使用 html 解析和 iPhone 开发。

这是我的问题：假设您有一个文本字段供用户在网站上输入值。如何使用 libxml2 库和 hpple 将自己的值发送到文本字段？我想在文本框中输入一个值，然后解析结果。这是我想要做的视觉表示：

[https://dl.dropbox.com/u/42738601/Screen%20Shot%202012-11-24%20at%2010.07.45%20PM.png](https://dl.dropbox.com/u/42738601/Screen%20Shot%202012-11-24%20at%2010.07.45%20PM.png)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:46:11.290

Ray Wenderlich 的[How To Parse HTML on iOS](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)教程涵盖了问题的解析部分。

如果要与网页交互，有两种基本技术。

1.  如果网站的客户端部分不太复杂，并且如果您已成功破译 HTML 以找出正在进行的 GET 和 POST 操作，您可以创建一个`NSURLConnection`，发出请求，并使用技能您从 Ray Wenderlich 的教程中开发，解析响应。请参阅 Apple 的[URL 加载系统编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165-BCICJDHA)。另请参阅[SimpleURLConnections 演示](http://developer.apple.com/library/ios/#samplecode/SimpleURLConnections/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009245)，了解简单 POST 和 GET 交互的示例。如果您想要的服务器交互稍微复杂一点，请查看适当命名的[AdvancedURLConnections 示例](http://developer.apple.com/library/ios/samplecode/AdvancedURLConnections/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009558)。

2.  或者，您可以让`UIWebView`管理您的应用程序和 Web 服务器之间的交互。因此，一旦调用了该`UIWebViewDelegate`方法`webViewDidFinishLoad`，您就可以参考这篇关于[将 JavaScript 注入 UIWebView 的](http://iphoneincubator.com/blog/windows-views/how-to-inject-javascript-functions-into-a-uiwebview)文章，其中讨论了该`UIWebView`方法[`stringByEvaluatingJavaScriptFromString`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIWebView/stringByEvaluatingJavaScriptFromString%3a)。

就个人而言，我倾向于第一种方法，因为它可能更强大。话虽如此，但值得注意的是，通过模拟 Web 界面与服务器交互并不是最理想的。如果您可以使用适当的 Web 服务来提供例如 JSON 或 XML 响应，那就更好了。我很欣赏您可能没有该选项（否则您可能不会问这个问题），但我们应该承认，上述方法确实天生就脆弱且效率低下。

# wordpress - 在 WooCommerce 中使 +/- 加号和减号数量按钮以 12 为增量

> ID：13547933
> 
> 赞同：5
> 
> 时间：2012-11-25T03:12:34.853
> 
> 标签：wordpress, woocommerce

我一直在尝试解决我认为可能很容易解决的问题，但我似乎无法在任何地方找到任何信息。

我的问题是这样的：

我正在使用带有最小/最大数量和批发商店插件的 WooCommerce 建立批发商店。我想展示一个简单的产品，它的单价（没问题），但由于商店里的所有产品都是批发的，它们只能以 6 或 12 个（多个）纸箱出售。

最小/最大插件允许我设置最小订单数量（比如 12 件商品），但是当我点击 -/+ 减号和加号数量选择器添加另一个纸箱（另外 12 件商品）时，它只会添加一个数字（单件商品）一次...例如 13、14、15、16 等等。

所以我的问题是......“是否可以修改 'quantity.php' 文件，使订单数量仅以 12 为增量增加？” （例如 12、24、36、48 等）

我知道我可以简单地设置单个纸箱成本并将其显示为简单的产品或做变量，但我的客户希望显示每单位价格。

提前感谢您提供的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-12T13:51:26.927

无需更改核心，甚至无需使用 WooCommerce 的模板覆盖。正如 Rashid 指出的那样，有一个过滤器可以修改这个值。我们只需要使用它。把它放在一个[特定于站点的插件](http://ottopress.com/2011/creating-a-site-specific-snippets-plugin/)中。

```
add_filter( 'woocommerce_quantity_input_step', 'kia_quantity_input_step', 10, 2 );
function kia_quantity_input_step( $step, $product ){
    return 6; // the will be the new step value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-03T08:49:22.280

我希望我的购物车部分具有类似的功能，我是这样实现的。

在 woocommerce 模板文件中，forlders 导航到 cart->cart.php 文件，然后搜索类似这样的内容

```
apply_filters( 'woocommerce_quantity_input_step', '1', $_product ); 
```

然后将“1”更改为“12”。如果您想在单个产品页面上进行更改，我相信它应该是相似的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T20:31:04.237

我相信你现在已经继续前进了，但为了后代的缘故，这个插件可能会做你正在寻找的东西：

[http://www.woothemes.com/products/minmax-quantities/](http://www.woothemes.com/products/minmax-quantities/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-13T22:58:30.497

没有任何黑客技术，这很难做到。如果您不介意更改核心文件（每次更新 WooCommerce 时都必须再次更改），您可以执行以下操作：

*   打开 wp-content/plugins/woocommerce/assets/js/frontend/woocommerce.js
*   转到第 34 行“$qty.val(currentVal + 1);” 并将“1”更改为“12”。
*   对第 52 行的减号函数执行相同的操作

请注意，这会影响所有产品！

# mysql - 性能 - MySQL 在插入记录时的默认排序顺序

> ID：13547934
> 
> 赞同：4
> 
> 时间：2012-11-25T03:12:51.357
> 
> 标签：mysql, database, rdbms

mysql 中记录的默认排序 ID 是 ASC（即我插入的行在表中），但我们将仅使用表中的最新信息（即下面的行）。

如果我们将默认排序更改为DESC（即新记录到表顶部）并且将从表顶部查询频繁信息，是否会有任何性能改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:10:45.230

我认为情况会适得其反。

我的评论基于我如何理解索引在 SQL Server 中的工作 - 如果我有机会阅读更多关于它们如何在 MySQL 中工作的信息，我将尝试稍后进行修改。

以与索引排序相同的顺序插入行，而不是以相反的顺序插入行，可能会有轻微的性能优势。

如果您以相同的顺序插入，并且要插入的下一行在排序顺序上始终大于现有行，那么您将始终在最后一页行数据中找到下一个可用的空点（如果存在）。

如果你做相反的事情，总是让你的下一个插入行的排序顺序小于现有行，那么你可能总是在你的第一页行数据中发生冲突，并且引擎会做更多的工作来改变行的位置如果页面有空间。

至于您在 select 语句中的 order by 子句：1) SQL 标准中没有关于索引的任何内容，除了 ORDER BY 子句之外，没有任何内容可以保证您的结果集排序。通常，SQL Server 中仅使用一个索引的查询将看到按索引顺序返回的结果。但是，如果隔离级别更改为“读取未提交”（混乱？），那么它将更有可能按照在内存或磁盘上找到它们的顺序返回行，这不一定是您想要的顺序。

2) 如果您的 select 语句中的 order by 基于与索引完全相同的列标准，那么您的数据库服务器应该使用索引顺序或与索引顺序相反的方式执行相同的操作。这非常简单，除非您有一个多列索引，其中包含针对不同列的混合 ASC-DESC 声明。您可以通过 order by 等于索引顺序和 order by 等于反向索引顺序获得相同的性能，其中反向索引顺序是通过用 DESC 和 ASC 替换索引声明中的 ASC 和 DESC 声明（显式和隐式）来确定的order by 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:19:17.203

任何性能变化都将是查询记录，而不是插入记录。

对于查询，我怀疑这会产生很大的影响，因为通过键进行的数据库查询通常具有相似的速度。

这也取决于你的数据，所以我会进行一些测试。

# python - 添加列表中的项目 - Python

> ID：13547937
> 
> 赞同：0
> 
> 时间：2012-11-25T03:13:41.657
> 
> 标签：python, python-3.x

我试图为练习编写代码，虽然它可以正常工作，但它看起来很可怕，我想知道是否有人可以帮助我删除任何不必要的东西，并可能只是组合一些功能？

以下是该函数的使用示例：

```
choices([['YES', 'NO', 'YES', 'YES'], ['NO', 'NO', 'YES', 'NO'], ['YES', 'YES', 'YES', 'YES']]) 
```

列表中的每个列表都有四个是/否选项（下面的索引也列出了四个选项，例如绿色、红色、蓝色、黄色；但不一定是四个）。列表中的列表数量是多少人投票。

```
i = 0
num = 0
total_num = 0
num_choices = len(INDICES)
choices_index = 0
choices_votes = []
choices_votes_num = []
index = 0
total_choices = []
winning_choice = ''
winning_index = 0
while i < len(parameter):
    while num < num_choices:
        for item in parameter:
            choices_votes.append(item[num])
        num += 1
    i += 1
while total_num < len(choices_votes):
    if choices_votes[total_num] == 'YES':
        choices_votes_num.append(1)
        total_num += 1
    elif choices_votes[total_num] == 'NO':
        choices_votes_num.append(0)
        total_num += 1
while choices_index < len(choices_votes_num):
    count = int(len(choices_votes_num) / num_choices)
    total = 0
    total = sum(choices_votes_num[choices_index:(choices_index + count)])
    total_choices.append(total)
    choices_index = choices_index + count
for score in total_choices:
    winning_index = max(total_choices)
    winning_choice = INDEX_TO_NAME[total_choices.index(winning_index)]
return winning_choice, total_choices 
```

`INDEX_TO_NAME`只是一个字典，用于将索引连接到选择（颜色）。

基本上，代码应该将每个“是”计为 1 分，每个“否”计为 0 分，将每个可用选项的总分相加，然后返回总分和获胜者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T03:28:55.237

让我们从：

```
c = [['YES', 'NO', 'YES', 'YES'],
     ['NO', 'NO', 'YES', 'NO'],
     ['YES', 'YES', 'YES', 'YES']]

INDICES = ['red', 'green', 'blue', 'yellow'] 
```

由于您一直在使用`INDICES`您的民意调查，我们可以假设答案将始终与`INDICES`.

我们可以利用`zip`来重组这些数据：

```
zip(*c)
#[('YES', 'NO', 'YES'),
# ('NO', 'NO', 'YES'),
# ('YES', 'YES', 'YES'),
# ('YES', 'NO', 'YES')] 
```

这扩展了参数的答案并将它们重新组合以按实际索引进行分组。所以第一个索引是“红色”，第二个是“绿色”，等等

现在我们可以再次压缩以将它们与索引结合起来：

```
results = zip(INDICES, zip(*c))
#[('red', ('YES', 'NO', 'YES')),
# ('green', ('NO', 'NO', 'YES')),
# ('blue', ('YES', 'YES', 'YES')),
# ('yellow', ('YES', 'NO', 'YES'))] 
```

我们可以循环`results`，简单地计算“YES”的出现次数：

```
totals = [(ind, answers.count('YES')) for ind,answers in results]
#[('red', 2), ('green', 1), ('blue', 3), ('yellow', 2)] 
```

所以这里我们有总数。我们可以将它传递给一个调用，`max`让它告诉我们哪一个是赢家：

```
max(totals, key=lambda x: x[1])
#('blue', 3) 
```

`max`默认情况下会查看第一个索引，所以我们可以传递一个`key`函数来指示它拉索引`1`。它告诉我们蓝色是赢家。

为了更高效，我们实际上可以将生成器传递给`max`：

```
totals = ((ind, answers.count('YES')) for ind,answers in results)
#<generator object <genexpr> at 0x102581fa0>
max(totals, key=lambda x: x[1])
#('blue', 3) 
```

最后的单个语句可以这样写：

```
max(((ind, answers.count('YES')) for (ind,answers) in zip(INDICES, zip(*c))), 
    key=lambda x: x[1]) 
```

我知道这个答案介绍了一些列表理解和 lambda（和生成器），但是您要求一种清理它的方法，这是您可以使用的工具的一个示例。希望这可以为您提供所需的帮助！

*注意：此答案未考虑平局。但我相信您可以从这里开始将这些示例集成到您的实际代码中*

# c - 编写排序函数对指针数组进行排序，指向结构

> ID：13547939
> 
> 赞同：0
> 
> 时间：2012-11-25T03:14:49.193
> 
> 标签：c, arrays, pointers, bubble-sort

我正在编写一个函数来根据邮政编码的值对指向结构的指针数组进行排序。我在网上找到了一个排序函数（这是我第一次编写排序函数），我想我会玩弄它，看看会发生什么，我一直收到错误“数组类型'char [7]不可分配'，我是不知道为什么。有什么想法吗？

谢谢你。

```
struct personCatalog {
char name[50];
char address[50];
char cityState[50];
char zipCode[7];
} ;

#include <stdio.h>
#include "header.h"
#include <stdlib.h>
#include <string.h>

void bubble_sort(struct personCatalog *arrayOfPointers[]){
    int num1 = 0;

    while (arrayOfPointers[num1] != NULL) {
    atoi(arrayOfPointers[num1++]->zipCode);
    }

        int progress = 0;

        do {
            int i;
            progress = 0;
            for (i = 0; i < num1 - 2; ++i) {
                if (arrayOfPointers[i]->zipCode > arrayOfPointers[i + 1]->zipCode) {
                    struct personCatalog  temp = *arrayOfPointers[i];
                    arrayOfPointers[i] = arrayOfPointers[i + 1];
                    arrayOfPointers[i + 1] = &temp;

                    progress = 1;
                }
            }
        } while (progress);
    } 
```

![我收到的错误](../Images/8945306269cadec47aeb900e1e14a917.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:31:12.007

这段代码有几个问题，但您会收到此错误，因为您试图将值分配给突出显示的行中的数组；这就是为什么它抱怨分配给数组类型的原因`char[7]`。这没有多大意义，因为您无法更改数组的位置。您可以通过调用来交换字节`memcpy`，或者，也许更惯用的方式，更改`struct personCatalog`这样的定义，即`zipcode`true`char *`而不是 char 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:25:00.410

C 语言本身并不知道如何将 7 个字符分配给其他 7 个字符。它只允许您一次将一种原始类型分配给另一种：

```
zipCode[0] = temp[0]
zipCode[1] = temp[1];
// etc. 
```

要在 C 中复制连续的数组，例如`zipCode`，您可以使用`memcpy`：

```
memcpy(zipCode, temp, 7); 
```

此外，我可能在我的小屏幕上误读了您的意图，但您也不应该将结构指针分配给 zipCode。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:53:14.837

该数组由指针组成。所以你用来交换它们的临时对象也应该是一个指针。

```
 for (i = 0; i < num1 - 1; ++i) {
            if ( strcmp( arrayOfPointers[i]->zipCode
                       , arrayOfPointers[i + 1]->zipCode
                       ) > 1) {
                struct personCatalog  *temp ;
                temp = arrayOfPointers[i];
                arrayOfPointers[i] = arrayOfPointers[i + 1];
                arrayOfPointers[i + 1] = temp;

                progress = 1;
            }
        } 
```

此外，循环条件`i < num1-2`错误。应该是 num1 -1，IMO。

更新：似乎 zipcode 是一个文本字符串，所以我将“>”替换为“strcmp()”

# java - 数组标价

> ID：13547946
> 
> 赞同：0
> 
> 时间：2012-11-25T03:15:50.933
> 
> 标签：java, arrays, search, methods, double

我正在尝试制作价格低于给定数量的书籍的 ArrayList，但我不断收到此编译器错误：

```
 JAmos_Chapter09_exercise_94Arrays.java:86: error: double cannot be dereferenced
   if ( ( currentJAmos_Chapter09_exercise_94.getPrice( ) ).indexOf( searchString ) != -1 )
                                                               ^
1 error 
```

在我的数组列表文件的代码中编译此方法后：

```
 public ArrayList<JAmos_Chapter09_exercise_94> searchForPrice( String searchString )
 {
  ArrayList<JAmos_Chapter09_exercise_94> searchResult = new ArrayList<JAmos_Chapter09_exercise_94>( );
  for ( JAmos_Chapter09_exercise_94 currentJAmos_Chapter09_exercise_94 : library )
  {
   if ( ( currentJAmos_Chapter09_exercise_94.getPrice( ) ).indexOf( searchString ) != -1 )
        searchResult.add( currentJAmos_Chapter09_exercise_94 );
  }
  searchResult.trimToSize( );
  return searchResult;
 } 
```

我的方法代码的 getPrice 部分从此类文件中获取双精度：

```
 /** default constructor
 */
 public JAmos_Chapter09_exercise_94( )
 {
  title = "";
  author = "";
  price  = 0.0;
 }

 /** overloaded constructor
 *  @param newTitle   the value to assign to title
 *  @param newAuthor  the value to assign to author
 *  @param newPrice   the value to assign to price
 */
 public JustinAmos_Chapter09_exercise_94( String newTitle, String newAuthor, double newPrice )
 {
  title = newTitle;
  author = newAuthor;
  price  = newPrice;
 }

 /** getTitle method
 *   @return the title
 */
 public String getTitle( )
 {
  return title;
 }

 /** getAuthor method
 *   @return the author
 */
 public String getAuthor( )
 {
  return author;
 }

 /** getPrice method
 *   @return the price
 */
 public double getPrice( )
 {
  return price;
 }

 /** toString
 * @return title, author, and price
 */
 public String toString( )
 {
  return ( "title: " + title + "\t"
           + "author: " + author + "\t"
           + "price: " + price );
 }
} 
```

总的来说，我想知道如何摆脱

> double 不能被取消引用错误

因为我需要搜索双精度而不是字符串。

对不起，如果这很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:27:35.390

不要`.indexOf()`用于查找价格是否低于某个值。 `.indexOf(s)`在另一个字符串中查找一个字符串的第一个实例的起始索引。

您正在寻找小于比较运算符：`<`。

将您的逻辑更改为：

```
public ArrayList<JAmos_Chapter09_exercise_94> searchForPrice( String searchString ) {  
  ArrayList<JAmos_Chapter09_exercise_94> searchResult = new ArrayList<JAmos_Chapter09_exercise_94>( ); 
  //Converts the search string price into a double price.
  double maxPrice = Double.parseDouble(searchString);
  for ( JAmos_Chapter09_exercise_94 currentJAmos_Chapter09_exercise_94 : library ) {
    //If itemPrice < maxPrice, add it to the list.
    if ( currentJAmos_Chapter09_exercise_94.getPrice( ) < maxPrice)
      searchResult.add( currentJAmos_Chapter09_exercise_94 );
  } 
  searchResult.trimToSize( ); 
  return searchResult; 
} 
```

如果你`searchString`不是一个格式很好的双精度数，我建议编写一个例程来转换`searchString`成双精度数。

编辑：如果不清楚，请在评论中询问我...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:26:38.477

那么，如果`getPrice()`返回 a `double`，你为什么要`indexOf()`处理这个`double`值？它只是一个数字，你希望它给你什么指数？`indexOf()`用于项目的有序集合。

`String searchString`如果您正在处理数字，我想知道为什么您首先需要一个参数。为什么参数 a`double price`也不是？

如果它必须是一个字符串，则首先将其转换为 double through `Double.valueOf()`，然后将其与`getPrice()`using进行比较`==`。

# c++ - 如何从文本文件中逐个字符读取并将其放入字符数组中？

> ID：13547949
> 
> 赞同：0
> 
> 时间：2012-11-25T03:15:56.007
> 
> 标签：c++

我正在尝试从文本文件中逐个字符地读取直到 EOF，将它们放入字符数组中，以便之后可以对其进行操作。用 g++ 编译没有错误，运行时，我被提示输入输入文件，但它只是挂起。

```
int main (int argc, char *argv[]) {
    string filename;
    ifstream infile;

    char *cp, c[1024];
    memset (c, 0, sizeof(c));
    cp = c;

    cout << "Enter file name: " << endl;
    cin >> filename;

    //open file
    infile.open( filename.c_str() );

    //if file can't open
    if(!infile) {
        cerr << "Error: file could not be opened" << endl;
        exit(1);
    }

    while (!infile.eof()); {
        infile.get(c, sizeof(infile));
       // get character from file and store in array c[]
    }
}//end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:05:04.373

您应该尝试该`istream::read()`方法而不是`get()`. 这将有助于解决任何缓冲区溢出问题：

```
unsigned int chars_read = 0;
//...
// Read in the file.
if (!infile.read(c, sizeof(c))
{
    // Handle the read error here.
    // Also check for EOF here too.
}

// Obtain the number of characters actually read.
chars_read = infile.gcount(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:26:22.370

首先，你**不想**测试`eof()`！不知怎的，我开​​始觉得堂吉诃德找到了我的风车。但是，我知道您需要在尝试读取输入后检查输入是否成功**，**因为在尝试读取流之前无法知道它是否会成功。

你的程序实际上并没有挂起！它只是等待您输入`sizeof(infile)`字符或结束输入（例如，在 UNIX 上使用 Ctrl-D，在 Windows 上使用 Ctrl-Z）。当然，这可能看起来像一个悬挂程序。您可以通过使用较小的尺寸来验证这确实是问题所在，例如`4`. 当然，`sizeof(infile)`它几乎和一个小的随机数一样好：它是一个类型对象的大小，`std::ifstream`谁能告诉它是什么？您可能打算使用`sizeof(c)`来确保调用`get(c, n)`不会写出比`c`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T03:33:09.173

试试这个：

```
int cont = 0;
while(infile.good()) {
  c[cont++] = infile.get();
} 
```

# artificial-intelligence - A* 搜索算法启发式函数

> ID：13547950
> 
> 赞同：4
> 
> 时间：2012-11-25T03:16:06.063
> 
> 标签：artificial-intelligence, a-star, heuristics

我正在尝试使用 A* 算法找到任何长度的滑动块拼图的最佳解决方案。

滑动块拼图是一种游戏，白色 (W) 和黑色 (B) 瓷砖排列在带有单个空白空间 (-) 的线性游戏板上。给定棋盘的初始状态，游戏的目的是将瓷砖排列成目标图案。

例如，我目前在板上的状态是 BBW-WWB，我必须达到 BBB-WWW 状态。瓷砖可以通过以下方式移动： 1\. 以 1 的成本滑入相邻的空白空间。 2\. 以 1 的成本跳过另一个瓷砖进入空白空间。 3\. 以 1 的成本跳过 2 个瓷砖进入空白空间2。

我已经实现了一切，但我不确定启发式函数。它计算当前状态下放错的瓷砖到目标状态下最近放置的相同颜色的瓷砖的最短距离（最小成本）。

考虑到当前状态 BWB-W 和目标状态 BB-WW 的给定问题，启发式函数给我的结果为 3。（根据最小距离：B=0 + W=2 + B=1 + W=0）。但是达到目标的实际成本不是 3（移动错位的 W => 成本 1 然后移动错位的 B => 成本 1）而是 2。

我的问题是：我应该以这种方式计算最小距离并且不关心高估，还是应该将其除以 2？根据棋子的移动方式，一个棋子可以以相同的成本克服两倍（参见移动 1 和 2）。

我尝试了两个版本。虽然分割的距离为实现的目标提供了更好的最终路径成本，但它访问更多的节点 => 比未分割的节点花费更多的时间。计算它的正确方法是什么？我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:09:41.980

对我来说，这个问题的可接受启发式函数是什么样的并不明显，所以我不会承诺说“使用除以二的函数”。但是我会告诉你，你想出的幼稚函数是不可接受的，因此不会给你带来好的性能。为了使 A* 正常工作，使用的启发式必须是可接受的；为了被接受，启发式*必须*绝对总是给出一个乐观的估计。这不是，正是您在示例中突出显示的原因。

（虽然现在我想起来了，除以二似乎是一种强制可接受性的合理方式。我只是不打算承诺。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T03:47:44.237

您的启发式方法不可接受，因此不能保证您的 A* 每次都能找到最佳答案。一个可接受的启发式方法绝不能高估成本。

比将启发式成本除以 3 更好的启发式方法是：不是将每个字母的距离 D 添加到其最终位置，而是添加 ceil(D/2)。这样，一个字母 1 或 2 的距离，得到一个 1 值，3 或 4 距离，得到一个 2 值，依此类推。

# css - CSS Sprite 不工作 - 仅显示集合中的第一个图像

> ID：13547951
> 
> 赞同：3
> 
> 时间：2012-11-25T03:16:11.863
> 
> 标签：css, css-sprites, sprite

是的，我来过这里：[CSS Sprite not working](https://stackoverflow.com/questions/9224010/css-sprite-not-working)

不，我不明白。他所说的“积分”是什么意思？

“换句话说：

对于每个 ID 值，应用 100 分对于每个类值（或伪类或属性选择器），应用 10 分对于每个元素引用，应用 1 分”

这些“点”是什么？我阅读了这些文章，我知道指定 CSS 代码是有顺序的，但我仍然不明白。就这样，我只得到了集合中的第一个精灵。仅供参考-我使用了精灵生成器。（[准确地说是这个](http://spritegen.website-performance.org/)）

[您可以在此处](http://nos.heliohost.org/pc/)查看源代码。我建议放大浏览器以正确查看所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:17:59.833

Ricky：img 标签遮挡了背景。我建议将其更改为 div。此外，您没有在代码中包含 NOS 对象。这是我想出的：

```
<script>
    var NOS = {
        itemno: 0,
        menuClasses: [
            'img-blog',
            'img-files',
            'img-forums',
            'img-login',
            'img-logout',
            'img-mail',
            'img-news',
            'img-profile',
            'img-reg',
            'img-settings',
            'img-shop',
            'img-status'
        ],
        toggle: function() {
            $('#menuimg').removeAttr('class').addClass(function() {
                ++NOS.itemno;
                if (NOS.itemno > NOS.menuClasses.length - 1) {
                    NOS.itemno = 0;
                }
                return NOS.menuClasses[NOS.itemno]; 
            });
        }
    }
</script> 
```

# jquery - jQuery/Ajax 从窗口侧加载和显示内容

> ID：13547960
> 
> 赞同：0
> 
> 时间：2012-11-25T03:18:09.610
> 
> 标签：jquery, ajax

我正在寻找一个 jQuery 脚本来通过 Ajax 加载内容（无需重新加载页面），有两个要求：

*   我需要更改每个内容的 URL
*   我想加载具有某种效果或过渡的内容

我正在寻找的效果是在[这个页面](http://www.themealings.com.au/)上工作（点击标志，向下滚动页面然后点击左/右箭头：内容从一侧出现并且URL改变了！）

我搜索了很长时间来寻找这样的东西，但我没有结果:(

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:17:20.803

您提到的链接（[http://www.themealings.com.au/](http://www.themealings.com.au/)）使用 jquery mobile 来完成这项工作。使用 jquery mobile，您可以自动 ajaxify 链接，可以进行历史管理和动画页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:20:20.910

对于第一点，您可以使用 `history.pushState(null, 'new title', 'new URL')。这是[兼容性表](http://caniuse.com/#feat=history)

对于第二点，使用 jquery，您可以执行以下操作：

```
$.ajax(
    url:'your/path/to/the/new/page',
    success:function(data){
        $('body').animate({'left':'-'+window.width}, 'slow', function(){
            document.write(data)
        });

    } 
```

)

身体应该有一个`position: relative;`

这是未经测试的原型

# javascript - 加载资源失败：在侧边栏组件中使用 jQuery 时 Salesforce 出现 500 错误

> ID：13547964
> 
> 赞同：1
> 
> 时间：2012-11-25T03:18:48.503
> 
> 标签：javascript, jquery, salesforce, apex-code

众所周知，我们无法在侧边栏组件中访问自定义标签（我可能在这里错了），就像我们在 vf 页面（{！$label.labelname}）中所做的那样，我必须在 apex 中编写一个 webService 类，它将返回自定义标签，我使用 sforce.apex.execute 在 jQuery 脚本中访问该类。现在，当主页加载时，侧边栏组件正确加载，下面的脚本执行没有任何问题。但是，当我在文本框中输入一些文本并搜索文本时，myVfPage 会加载到具有预期结果的新选项卡中，但是当我在侧边栏组件中输入一些文本并单击搜索时，我不会重定向到 myVfPage。当我检查控制台时，请参阅 2 错误，其中显示：![javascript错误](../Images/ae839e10a83fe534643706253f3aa91d.png). 这是错误消息的内容：

1:- 加载资源失败：服务器响应状态为 500（内部服务器错误）

2:-Uncaught {faultcode:'sf:INVALID_SESSION_ID', faultstring:'INVALID_SESSION_ID: Invalid Session ID found in SessionHeader: Illegal Session', }

不知道在这里做什么请帮忙

```
<script type="text/javascript" src="/resource/jQuery"></script>
<script type="text/javascript" src="/resource/connection"></script>
<script type="text/javascript" src="/resource/apexjs" ></script>
<script type="text/javascript">
var j$ = jQuery.noConflict();
var sid = getCookie('sid'); 
var server = "https://"+window.location.host+"/services/Soap/u/26.0";
alert(server);
sforce.connection.init(sid, server);
var custLabelSearchText = sforce.apex.execute("JqueryCustomLabelController","getCustomLabel", {});
j$(document).ready(function(){
   alert(getCookie('sid'));
   j$("#searchIt").bind('click', function(){
     if(j$("#userInput").val() == ''){
        alert(custLabelSearchText);
        custLabelSearchText ='';
    }else{
        window.open("/apex/myVfPage?searchText="+(j$("#userInput").val()), "_blank");
    }
});
});
</script>
<b>Search your Text here</b><br/>
<input id="userInput"  type="text"/><br/>
<input type="button" value="Search" id="searchIt"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:35:35.700

我不确定，但尝试在页眉中插入会话 ID：

```
<script type="text/javascript">
    var __sfdcSessionId = '{!GETSESSIONID()}';
</script> 
```

# recursion - 球拍/方案展平解释

> ID：13547965
> 
> 赞同：4
> 
> 时间：2012-11-25T03:19:04.880
> 
> 标签：recursion, scheme, racket, flatten

有人可以帮我准确分解以下扁平化版本的执行顺序吗？我正在使用球拍。

版本 1，来自球拍本身，而版本 2 是更常见的？执行。

```
(define (flatten1 list)
  (let loop ([l list] [acc null])
    (printf "l = ~a acc = ~a\n" l acc)
    (cond [(null? l) acc]
          [(pair? l) (loop (car l) (loop (cdr l) acc))]
          [else (cons l acc)])))

(define (flatten2 l)
  (printf "l = ~a\n" l)
  (cond [(null? l) null]
        [(atom? l) (list l)]
        [else (append (flatten2 (car l)) (flatten2 (cdr l)))])) 
```

现在，使用 '(1 2 3) 运行第一个示例会产生：

```
l = (1 2 3) acc = ()
l = (2 3) acc = ()
l = (3) acc = ()
l = () acc = ()
l = 3 acc = ()
l = 2 acc = (3)
l = 1 acc = (2 3)
'(1 2 3) 
```

而第二个产生：

```
l = (1 2 3)
l = 1
l = (2 3)
l = 2
l = (3)
l = 3
l = ()
'(1 2 3) 
```

执行顺序似乎不同。在第一个示例中，看起来第二个循环`(loop (cdr l) acc)`在第一个循环之前触发，因为 '(2 3) 正在立即打印。而在第二个示例中， 1 在 '(2 3) 之前打印，这似乎是首先评估第一个在 append 内部进行 flatten 的调用。

我正在浏览 Little Schemer，但这些是更难的例子，我真的可以使用一些帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T04:22:29.110

不是你的问题的真正答案（克里斯已经提供了一个很好的答案！），但为了完整起见，这里还有另一种实现方式`flatten`，类似于`flatten2`但更简洁：

```
(define (atom? x)
  (and (not (null? x))
       (not (pair? x))))

(define (flatten lst)
  (if (atom? lst)
      (list lst)
      (apply append (map flatten lst)))) 
```

还有另一种实现左折叠版本的方法（与 更多共同点`flatten1`），使用标准球拍程序：

```
(define (flatten lst)
  (define (loop lst acc)
    (if (atom? lst)
        (cons lst acc)
        (foldl loop acc lst)))
  (reverse (loop lst '()))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T03:50:51.367

主要区别在于：

*   `flatten1`通过将输出元素（首先从`cdr`侧面，然后从`car`侧面）存储到累加器中来工作。这是可行的，因为列表是从右到左构建的，所以`cdr`首先从侧面工作是正确的。
*   `flatten2`通过递归地展平`car`and`cdr`边，然后将`append`它们组合在一起来工作。

`flatten1`更快，尤其是在树很重的情况下`car`：使用累加器意味着无论如何都没有额外的列表复制。然而，`append`调用`flatten2`会导致左侧被复制，这意味着如果树在一侧`append`很重，则需要大量额外的列表复制。`car`

所以总而言之，我会考虑`flatten2`一个初学者的 flatten 实现，以及`flatten1`一个更精致、更专业的版本。另请参阅[我的 flatten 实现](https://stackoverflow.com/a/7324493/13)，它使用与 相同的原理`flatten1`，但使用左折叠而不是使用的右折叠`flatten1`。

（左折叠解决方案使用更少的堆栈空间，但可能使用更多的堆空间。右折叠解决方案使用更多的堆栈，通常使用更少的堆，尽管快速阅读`flatten1`表明在这种情况下堆使用与我的实现大致相同。 )

# android - Android - 广播接收器检测手机何时刚刚连接到塔？

> ID：13547967
> 
> 赞同：0
> 
> 时间：2012-11-25T03:19:24.397
> 
> 标签：android, broadcastreceiver

我需要检测 GSM 手机何时刚刚连接到网络（从不可用的手机信号塔到已连接的手机信号塔）。为此，我设置了广播接收器 **AIRPLANE_MODE**（关闭）和**BOOT_COMPLETE**，当这两个被触发时，我将循环一段时间，直到检测到网络。但除此之外，手机可能位于

> 手机信号塔根本不可用

我怎样才能发现这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:30:51.400

您可以使用为“android.net.conn.CONNECTIVITY_CHANGE”设置意图过滤器的 BroadcastReceiver

```
<receiver android:name=".ConnectivityActionReceiver">
    <intent-filter>
        <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
    </intent-filter>
</receiver> 
```

在该接收器中，您可以查看意图的附加内容，以确定您是否有连接。我这样做如下：

```
@Override
public void onReceive( Context context, Intent intent )
{
    Intent startIntent;
    SharedPreferences prefs;
    String action;
    int updateType;

    action = intent.getAction();
    if ( !action.equals( ConnectivityManager.CONNECTIVITY_ACTION ) )
        return;

    /* If we don't have a connection, nothing to do */
    if ( intent.getBooleanExtra( ConnectivityManager.EXTRA_NO_CONNECTIVITY, false ) )
        return; 
```

如果第二个 if 检查为真，则意味着没有网络连接，因此接收器退出。下次发生连接更改时，接收器将再次激活并再次运行此检查。一旦它通过了检查，我就会继续做我所做的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:23:14.637

CONNECTIVITY_CHANGE 似乎适用于飞行模式的模拟器，但在我的设备上它只触发 3G 网络状态更改。现在我不得不接受SERVICE_STATE_CHANGE，它会因为在飞行模式和突然失去塔台之间切换而被解雇。对于重新启动，我使用了 BOOT_COMPLETED。

# imagick - centos6.2 64 php-fpm 启动错误

> ID：13547969
> 
> 赞同：2
> 
> 时间：2012-11-25T03:19:39.930
> 
> 标签：imagick, php

错误信息：

> /usr/local/php/sbin/php-fpm start /usr/local/php/sbin/php-fpm：符号查找错误：/usr/local/php/lib/php/extensions/no-debug-non-zts -20100525/imagick.so：未定义符号：MagickWandGenesis

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T19:04:20.657

这看起来你的 Imagick 安装是 fubar'd。我建议尝试重新安装此软件。

你可以在这里下载 Imagick -> [http://pecl.php.net/package/imagick](http://pecl.php.net/package/imagick)

1）解压文件

2) /path/to/phpize

3) ./configure \ --with-php-config=/path/to/php-config \ --with-imagick

4) 制作 && 制作安装

5）您可能需要将 extension=imagick.so 添加到您的 php.ini 中，但听起来您可能已经有了这个。

如果这对您不起作用，您可以简单地从您的 php.ini 中删除 extension=imagick.so 并且 PHP-FPM 应该可以顺利启动。在你修复它之前，你不会得到 Imagick 的支持。

# c++ - Visual c中的静态库链接失败

> ID：13547970
> 
> 赞同：0
> 
> 时间：2012-11-25T03:19:43.977
> 
> 标签：c++, visual-c++, static-libraries, static-linking

在 Visual c++ 中，我创建了一个包含两个文件 myLib.h 和 myLib.cpp 的静态库。我还有一个控制台应用程序项目，其中包含引用此库的文件 testSequence.cpp。在 myLib.h 中，我定义了一个`template<class prec> class sequence`具有函数声明的类，`prec *getPrimes(int numToGet)`然后在 myLib.cpp 中定义该函数。但是，当我构建 testSequence 时，有一个链接错误，它说`error LNK2019: unresolved external symbol "public: int * __thiscall mathLib::sequence<int>::getPrimes(int)" (?getPrimes@?$sequence@H@mathLib@@QAEPAHH@Z) referenced in function "char * __cdecl codeString(char *,char *,bool)" (?codeString@@YAPADPAD0_N@Z)` 所以，是的，帮助会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:24:06.813

阅读[此](http://www.parashift.com/c++-faq-lite/separate-template-fn-defn-from-decl.html)内容以了解错误的解释。

基本上，你想做的事情是做不到的。当编译器尝试为给定的模板类型参数实例化类模板时，它必须能够*看到类模板的实现。*您需要将所有成员函数的实现移动到头文件中。

# python - 要安装哪个版本的rpy？

> ID：13547971
> 
> 赞同：1
> 
> 时间：2012-11-25T03:19:58.560
> 
> 标签：python, r

我想通过 Python 使用 R。我想知道要安装哪个版本的 rpy，文档中并不清楚。
我在装有 OSX 10.5（豹）的 Mac 上。
我使用python 2.7版。
谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:24:17.153

尝试使用 rpy2-2.2.1。可以在[这里下载](http://sourceforge.net/projects/rpy/files/latest/download?source=files)

# arrays - CodeIgniter 会话不保存数组

> ID：13547977
> 
> 赞同：0
> 
> 时间：2012-11-25T03:22:40.557
> 
> 标签：arrays, codeigniter, session

我使用带有数据库的 CodeIgniter Session 来保存带有 $_FILES 的数组，但不保存。我这样做（但数组永远不会增加）：

形式的帖子，重定向到他自己。

上传功能 加载上传页面。

```
public function getUpload($codtemp, $codmessage){
    $this->load->library('session');
    $this->layout       = '';
    $data           = array();
    $data['codmessage'] = $codmessage;
    $data['codtemp']    = $codtemp;$tempfiles= $this->session->userdata('tempfiles');

    if (isset($_FILES['attachment']))
    {       
        $files = $this->fixGlobalFilesArray($_FILES['attachment']);

        foreach($files as $file)
        {
            $tempfiles[$codtemp][] = $file;
        }

        $this->session->set_userdata('tempfiles', $tempfiles);

        unset($files);
    }

    $this->parser->parse('attachment_upload', $data);
}

private static function fixGlobalFilesArray($files) {
    $ret = array();

    if(isset($files['tmp_name']))
    {
        if (is_array($files['tmp_name']))
        {
            foreach($files['name'] as $idx => $name)
            {
                $ret[$idx] = array(
                    'name' => $name,
                    'tmp_name' => $files['tmp_name'][$idx],
                    'size' => $files['size'][$idx],
                    'type' => $files['type'][$idx],
                    'error' => $files['error'][$idx]
                );
            }
        }
        else
        {
            $ret = $files;
        }
    }
    else
    {
        foreach ($files as $key => $value)
        {
            $ret[$key] = self::fixGlobalFilesArray($value);
        }
    }

    return $ret;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-02T16:43:20.973

保存数组前，序列化数据，获取数据后，反序列化。如果数据为空，则创建一个数组

# c++ - 处理对象内对象的照明

> ID：13547978
> 
> 赞同：1
> 
> 时间：2012-11-25T03:22:41.140
> 
> 标签：c++, opengl, object, rotation, lighting

基本上我正在编写一个 C++ 程序来绘制世界中的对象，当我旋转/平移一个由多个对象组成的对象时，我在照明方面遇到了一些困难（例如，一个树对象由一个圆柱体对象组成叶子的树干和金字塔对象）。

我现在有一个工作光源，但是在旋转对象的子组件时遇到了一些问题（例如其父对象树内的金字塔对象）。

当我对树对象应用旋转时，所有照明/着色都有效，但是如果我尝试在树内旋转金字塔对象，照明会变得不稳定和随机。我真的希望有人对我可能遇到的问题有一些提示或提示？

编辑：这个项目有很多文件，很难在这里抛出足够多的文件来提供整个图片。基本上我的步骤是：

1.  使用功能正常的 opengl 光源建立一个世界。
2.  创建一个具有与之关联的变换矩阵的形状对象。
3.  使用形状及其矩阵并计算其法线以用于着色。
4.  现在创建一个由其他形状对象组成的新形状对象，并将其扔到世界中以使照明生效。
5.  现在问题发生在这里。如果我旋转父对象，照明很好，但如果我旋转子对象，照明变得随机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:22:27.263

我在我的代码中发现了问题。我过于频繁地更新法线，因此 opengl 照明的法线不好。

感谢大家的帮助！

# database - 无法使用 SSMS、LinqPad 连接到 SQL Azure；SQLCMD 工作正常

> ID：13547982
> 
> 赞同：1
> 
> 时间：2012-11-25T03:23:06.083
> 
> 标签：database, ssms, azure-sql-database, linqpad

几个月来，我一直在使用 SSMS 和 LinqPad 连接到 SQL Azure 实例而没有问题。本周突然，linqpad 停止连接，一直超时并显示此错误消息：“与服务器成功建立连接，但在登录前握手期间发生错误。（提供者：SSL 提供者，错误：0 -等待操作超时。）”

![在此处输入图像描述](../Images/09bd23ca507fb247cdb47fc0798be028.png)

起初，它只是 LinqPad。但是在我开始遇到与 SSMS 2012 相同的问题后不久。它显示了完全相同的错误消息（对话框略有不同）。

我已经确认这不是防火墙规则问题。我的 IP 已经被允许通过 SQL 防火墙几个月了，我仍然可以使用 SQLCMD 使用相同的凭据进行连接，并且可以运行查询。

有任何想法吗？为什么 SSMS 和 LinqPad 都会在 SQLCMD 仍然有效的情况下进行大量转储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:00:58.443

我终于找到了解决方案（我想我可能是通过[https://stackoverflow.com/questions/13420770/pre-login-handshake-error-connecting-directly-to-sql-azure](https://stackoverflow.com/questions/13420770/pre-login-handshake-error-connecting-directly-to-sql-azure)找到的）。在事情停止工作的时候，我安装了一些完全不相关的软件。碰巧的是，该软件还安装了一些捆绑软件，这些软件让您使用自定义 Winsock LSP，这意味着系统会受到[向 Microsoft 报告](http://connect.microsoft.com/VisualStudio/feedback/details/729323/visual-studio-11-beta-installation-disabled-my-abillity-to-connect-remote-ms-sql-server-but-not-local-databases)并在[KB 2568167](http://support.microsoft.com/kb/2568167)中解决的问题的困扰。幸运的是，我不必手动删除 LSP，因为我能够卸载不受欢迎的软件（Sendori！）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:47:23.450

您是否查看过 SQL Azure 的连接故障排除指南？ [http://social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure-sql-database-connectivity-troubleshooting-guide.aspx](http://social.technet.microsoft.com/wiki/contents/articles/1719.windows-azure-sql-database-connectivity-troubleshooting-guide.aspx)

您最近/在那一周的时间范围内是否还安装了 .NET 4.5？您是否检查过您的 SQL 连接以确保 SSL 加密已关闭？

# java - 在浏览器中运行的自签名小程序无法复制文件、编写器写入、编码等

> ID：13547986
> 
> 赞同：1
> 
> 时间：2012-11-25T03:24:34.470
> 
> 标签：java, applet

我写了一个签名的小程序，它可以接收文件并将其写入本地机器文件目录。我使用 NetBeans 在 Windows 7 上工作。在 Appletviewer 中一切运行正常。但是当我在 Web 浏览器中的网页上下文中运行小程序时，小程序可以在本地目录中创建一个文件，但我不能`copyFile()`使用`apache common.io`. 我可以写入使用创建的文件`bufferedWriter()`，但不能使用`fileWriter`. 我需要使用Java 库中的将文件从*.wav*转码为*.mp3*`Encoder`，但它在浏览器中不起作用。（我尝试了用户主文件夹和其他文件夹，但结果是一样的。）

这是我尝试实现文件复制的代码。不会抛出异常，但文件也不会被复制。

```
 try {
   FileUtils.copyFile(source, target);
 } catch(IOException e){
   jLabel4.setText("Error: " + e.getMessage());    
 } 
```

我可以捕获异常，所以当我按下应该复制的按钮时，这是来自我的 Java 控制台的文本：

```
 try { FileUtils.copyFile(fl1, fl2); } catch (IOException ex) { ex.printStackTrace(); jLabel4.setText("Error: " + ex.getMessage()); } 
```

这是我的 java 控制台文本：

```
basic: Told clients applet is started
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Connecting http://localhost:8084/ with proxy=DIRECT
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar, version: null]
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Connecting http://localhost:8084/Rozhlas_jsf/lib/commons-io-2.4.jar with proxy=DIRECT
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/, version: null]
network: Cache entry not found [url: http://localhost:8084/Rozhlas_jsf/org/apache/commons/io/FileUtils.class, version: null]
network: Connecting http://localhost:8084/Rozhlas_jsf/org/apache/commons/io/FileUtils.class with proxy=DIRECT
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: org/apache/commons/io/FileUtils
    at SoundApplet.SoundApplet.jButton2ActionPerformed(SoundApplet.java:480)
    at SoundApplet.SoundApplet.access$800(SoundApplet.java:42)
    at SoundApplet.SoundApplet$11.actionPerformed(SoundApplet.java:304)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.io.FileUtils
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 38 more 
```

导入库似乎有些不好。我通过右键单击库文件夹添加罐子并添加罐子。我附上了我的项目文件夹的图像，它可以帮助你理解我的问题，但它可以让我接受它，因为我的评论数量已经低于 10 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:38:11.757

问题解决了！！

我为像我这样绝望的人准备了一个小教程

1.  在你的 webproject 的属性/打包选项中添加你的 applet 项目。它会导致您的小程序中的 .jar 文件将在您运行 webproject 时自动编译并复制到您的 webroject 的 build/web 文件夹中。

2.  如果你想为你的小程序使用外部库，你必须将它们的 .jars 添加到你 webroject 的 build/web 文件夹中。现在，当您单击运行 Webproject 时，您的小程序会自动编译到您的 webroject 的 build/web 文件夹中，您的外部库 .jars 也在哪里。（这里注意清理你的项目，因为它会导致你的整个构建文件夹被删除并重新构建但是没有你的外部库 .jars !!当它发生时你必须再次复制 .jars 在这里）

3.  现在你必须在 html 页面中告诉加载小程序它需要做什么，所以你使用这个标签

    <`applet codebase="http://localhost:8084/<nameOfyourWebProject>" code="<package>.<appletFileName>" archive="Applet.jar, <EXternalLibName1>.jar, <EXternalLibName2>.jar... " width="500" height="500"></applet>`

codebase 通常是你的 build/web 文件夹（这里也是 index.html），所以你说 Java 将从这里搜索 jars。代码是您开始的小程序类的路径。存档告诉将加载哪些 jar，因此您还需要加载 applet 的 jar 和外部库 jar。你可以指定你想要多少个 jars... 就是这样，现在你可以运行你的 Web 项目并享受你加载的带有外部 libs jars 的小程序。但是，如果你想做一些未签名的小程序不能做的事情（[什么小程序可以和不能](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)），你必须签署你的 applet.jar（这可以通过项目属性），你必须为你的小程序签署所有使用过的 jars（这是为了测试可能通过keytool 和 jarsign 实用程序随 java 一起分发）

我花了很多时间来了解这些信息并成功运行我的项目，所以我希望这个小教程能帮助你停止浪费时间:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T17:32:19.017

commons-io jar 不包含在浏览器下载的材料中，因此其中的类不存在。您可以弄清楚如何获取浏览器包含的 jar，或者您可以使用 jarjar 或 shade 构建一个包含所有部分的大 jar。显然，当您将 commons-io 添加到类路径时，netbeans 没有正确设置。

# knockout.js - 与映射视图模型的淘汰赛 css 绑定

> ID：13547990
> 
> 赞同：0
> 
> 时间：2012-11-25T03:25:44.907
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在创建一个如下所示的表：

```
<table>
  <thead>
    <tr>
        <th>Index</th>
        <th>Last Name</th>
        <th>First Name</th>
    </tr>
  </thead>
  <tbody data-bind="foreach: $data">
    <tr data-bind="css: rowClass">
        <td data-bind="text: $index"></td>
        <td data-bind="text: LName"></td>
        <td data-bind="text: FName"></td>
    </tr>    
  </tbody>
</table> 
```

我正在使用knowckout.mapping 功能将我的数据从我的控制器中获取并编码为json。我的javascript在下面。

```
<script type="text/javascript">
    $(function () {
        var viewModelJSON = ko.mapping.fromJSON('@Html.Raw(jsonData)');

        viewModelJSON.rowClass = ko.computed(function () {
            return 'success';
        });

        ko.applyBindings(viewModelJSON);
    });
</script> 
```

在我为 css rowClass 添加数据绑定之前，一切都运行良好。我只是试图返回成功类，但 javascript 控制台报告“无法解析绑定”和“未定义行类”。我也尝试过声明 rowClass 函数，如：

```
viewModelJSON.rowClass = ko.computed(function () {
            return 'success';
        }, viewModelJSON); 
```

但仍然没有运气。对我做错了什么有任何想法吗？

**工作解决方案**

更新我的 JavaScript 似乎解决了我的问题：

```
<script type="text/javascript">
    $(function () {

        var mapping = {
            create: function (options) {
                return new myImportItem(options.data);
            }
        }

        var myImportItem = function (data) {
            ko.mapping.fromJS(data, {}, this);

            this.rowClass = ko.computed(function () {
                return 'success';
            }, this);
        }

        var viewModelJSON = ko.mapping.fromJSON('@Html.Raw(jsonData)', mapping);            

        ko.applyBindings(viewModelJSON);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:58:38.900

在您添加`css`绑定的地方，上下文将是您数组中的一个项目。但是，您已将`rowClass`计算结果放在根级别。

如果你想绑定它，你必须像`css: $parent.rowClass`or`css: $root.rowClass`一样（在这种情况下它们是相同的）。

如果您希望数组中的每个项目都有一个`rowClass`计算，那么您需要查看使用映射插件的[映射选项](http://knockoutjs.com/documentation/plugins-mapping.html#customizing_object_construction_using_create)。

# ruby-on-rails - Rails 中的多级关联？

> ID：13547991
> 
> 赞同：1
> 
> 时间：2012-11-25T03:25:48.733
> 
> 标签：ruby-on-rails, ruby

我正在开发一个医疗应用程序。在其中，我有用户和客户之间的关联（显然），以及用户和治疗之间的关联，以及用户和设置之间的关联（对于设置表）。

但这里棘手的部分是客户还必须与治疗表相关联，因为他们是记录治疗的人。用户只是管理上述所有内容的人。而且我们还有与客户相关的患者，因此需要多层次。所以业主有客户也有病人。患者和客户和业主一样有治疗方法。

对我来说，这似乎真的很复杂，而且除了用户工作之外，我很难得到任何东西。我正在使用 Rails 中的基本关系设置（我对 Rails 知之甚少）。我在 create 方法上使用 @treatment.user = current_user，然后简单地将所需的表与 user_id 相关联。我在治疗台上放了一个client_id，但这行不通吗？

我是否需要多态关联（但不确定那是什么）？或者我是否需要单独的表格来完成所有这些匹配？

谢谢。

代码：

```
class User < ActiveRecord::Base
# Include default devise modules.  Others available are:   
# :token_authenticatable, :confirmable,   
# :lockable, :timeoutable and :omniauthable
devise :database_authenticatable, :registerable,
       :recoverable, :rememberable, :trackable, :validatable

# Setup accessible (or protected) attributes for your model  
attr_accessible :email, :password, :password_confirmation,
                :remember_me, :role

  validates :email, presence: true
  has_many :clients
  has_many :settings
  has_many :treatments

  ROLES = %w[admin receptionist practitioner]

  def role_symbols
    [role.to_sym]
  end

  def to_s
    email
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:19:54.323

我还不确定，你的问题是什么。但是由于您提到您不熟悉 Rails，这可能会对您有所帮助：

看看[`has_many :through relation`](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)（也可作为`has_one :through`）

所以你可能会做这样的事情：

```
# patient.rb
class Patient < ActiveRecord::Base
  has_many :treatments, :through => :client
end 
```

# mysql - MySql - 触发器未按预期运行

> ID：13547992
> 
> 赞同：0
> 
> 时间：2012-11-25T03:25:55.990
> 
> 标签：mysql, triggers

MySql 触发器的新手，刚刚学习。

```
CREATE TRIGGER MyTrigger
AFTER UPDATE  ON MyTable
FOR EACH ROW
BEGIN
IF (new.field1 < 0 or new.field1 > 5) THEN
    UPDATE new SET new.field1 = old.field1;
END IF;
END; 
```

如果更新使其超出范围，则目标是保持 field1 的值相同。但是，它将其设置为 0。我做错了什么？这段代码应该怎么看？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T12:53:07.020

这是一个希望可以帮助您入门的示例：

```
DELIMITER ~
CREATE TRIGGER `so_13547992_trigger`
BEFORE UPDATE ON `so_13547992`
FOR EACH ROW BEGIN
    IF ( NEW.`field1` < 0 OR NEW.`field1` > 5 ) THEN
        SET NEW.`field1` = OLD.`field1`;
    END IF;
END;
~ 
```

为什么效果会更好？首先，您的示例触发器是递归的，您不能在由更新触发的触发器中更新同一个表。

其次，`new`您的`UPDATE`语句中的不是表名，您需要明确指定一个。

它似乎根本不是合法的触发器，当您尝试创建它时，您的服务器不会抱怨吗？您是否可以实际显示`SHOW CREATE TRIGGER `your_trigger`;`以确保它确实已创建并且看起来像您在上面粘贴的一样？

即使您的示例可行，您也尝试对表的所有行进行无约束更新，而不是您尝试更新的行，您应该有一个`WHERE`子句；再次，考虑到第一个和第二个问题已得到解决。