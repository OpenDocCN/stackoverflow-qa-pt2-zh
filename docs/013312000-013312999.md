# StackOverflow 问答 13312000-13312999

# java - 如何找到与休眠值最接近的k值？

> ID：13312006
> 
> 赞同：0
> 
> 时间：2012-11-09T16:27:35.950
> 
> 标签：java, mysql, hibernate

我想在java中实现k-NN算法，我需要从数据库中以最小距离获取k值。例如，我输入了 123，我们在数据库中有 10000 个值。我想找到与数据库差异最小的 10 个值。我怎样才能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:47:26.600

您可以从数据库中检索按感兴趣的值排序的值。

# javascript - 如何将仅 css 的 megamenu 转换为基于 jquery

> ID：13312028
> 
> 赞同：2
> 
> 时间：2012-11-09T16:28:46.490
> 
> 标签：javascript, jquery, html, css, megamenu

我在我的网站中使用了一个 megamenu，它完全基于 css。缺点是，它没有任何动画。下拉菜单突然出现。所以我正在考虑将其转换为基于 jquery 的切换。这是当前代码。如何将其转换为基于 jQuery 的？

```
.dropdown-1column, 
.dropdown-2columns, 
.dropdown-3columns, 
.dropdown-4columns,
.dropdown-5columns {
   margin:-1px auto  0 -285px;
   float:left;
   position:absolute;
   text-align:left;
   padding:10px 5px 10px 5px;
   border:1px solid #dedede;
   background:#fff;
   z-index:999;
   display:none;    
}

.menu li:hover .dropdown-1column, 
.menu li:hover .dropdown-2columns, 
.menu li:hover .dropdown-3columns,
.menu li:hover .dropdown-4columns,
.menu li:hover .dropdown-5columns {
    display:block; 
} 
```

这是代码[http://jsfiddle.net/gsTNS/](http://jsfiddle.net/gsTNS/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:50:12.713

我认为这几乎可以满足您的需求。大概可以细化：

[http://jsfiddle.net/gsTNS/5/](http://jsfiddle.net/gsTNS/5/)

基本上，我为每个具有下拉列表的 LI 添加了一个“has-dropdown”类，并且我为每个下拉 DIV 添加了一个“下拉”类。

然后使用 jQuery 激活一个 slideToggle 函数：

```
jQuery("div#menu ul.menu li.has-dropdown").hover(
 function () {
   $(this).find("div.dropdown").slideToggle();
 },
 function () {
   $(this).find("div.dropdown").slideToggle();
 }
); 
```

# php - PHP - 存储和计算无线电输入的总分

> ID：13312033
> 
> 赞同：0
> 
> 时间：2012-11-09T16:29:17.283
> 
> 标签：php, radio

我设计了一个基于网络的小型系统，它有一个学校评估表来询问可以访问系统的特定用户”一些问题，输入将是无线电类型（1 或 2 或 3 或 4）！代码正在运行并且可以将输入插入数据库，但我不知道计算总分并将其存储在数据库中的正确查询，这是当前工作代码如下：

```
 <?php

   session_start();
   $Load=$_SESSION['login_user'];
   include('../connect.php');
   $sql= "Select name from student where ID='$Load'";
   $username = mysql_query($sql);
    $id=$_SESSION['login_user'];

                if (isset($_POST['submit']))

{  

   $v1 = $_POST['v1'];
   $v2 = $_POST['v2'];
   $v3 = $_POST['v3'];
   $total = $_POST['total'];

 mysql_query("INSERT into Form1 (P1,P2,P3,TOTAL)
 values('$v1','$v2','$v3','$total')") or die(mysql_error());
 header("Location: mark.php");
 }

?>

<html>

<head>

<?php

if(!isset($_SESSION['login_user']))

header("Location:index.html");

?>
  <title>Q&A Form</title>

</head>

<body>

    <center><form method="post" action=""  >

    <table style="width: 20%" >
        <tr>
    <th> Criteria </th>
    <th> </th>
    </tr>
    <tr>
    <th> Excellent </th>
    <td >  4 </td>
    </tr>
    <tr>
    <th > Good <font size="3" > </font></th>
    <td>  3 <font size="4" > </font></td>
    </tr>
    <tr>
    <th > Average <font size="3" > </font></th>
    <td >  2 <font size="4" > </font></td>
    </tr>
    <tr>
    <th > Poor <font size="3" > </font></th>
    <td >  1 <font size="4" > </td>
    </tr>

<font size='4'>
    <table style="width: 70%">
        <tr>
<th > School Evaluation <font size="4" > </font></th>

<tr>
<th > Criteria <font size="4" > </font></th>
            <th> 4<font size="4" > </font></th>
            <th> 3<font size="4" > </font></th>
            <th> 2<font size="4" > </font></th>
            <th> 1<font size="4" > </font></th>

        </tr>
<tr>
<th> Your attendance<font size="4" > </font></th>
<td>  <input type="radio" name ="v1" value = "4"    checked = "checked" /></td>
<td>  <input type="radio" name ="v1" value = "3"     /></td>
<td>  <input type="radio" name ="v1" value = "2"     /></td>
<td>  <input type="radio" name ="v1" value = "1"     /></td>    
</tr>

<tr>
<th > Your grades  <font size="4" > </font></th>
<td>  <input type="radio" name ="v2" value = "4"    checked = "checked" /></td>
<td>  <input type="radio" name ="v2" value = "3"     /></td>
<td>  <input type="radio" name ="v2" value = "2"     /></td>
<td>  <input type="radio" name ="v2" value = "1"     /></td>    
</tr>

<tr>
<th >Your self-control <font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"    checked = "checked" /></td>
<td>  <input type="radio" name ="v3" value = "3"     /></td>
<td>  <input type="radio" name ="v3" value = "2"     /></td>
<td>  <input type="radio" name ="v3" value = "1"     /></td>    
</tr>       

        </tr>
    </table>

    <br>
    <a href="evaE.php">  <td><input type="submit" name="submit" value="Submit">

    <input type="reset" name="clear" value="clear" style="width: 70px"></td>
<?php
$total = $v1+ $v2 + $v3;

?>  

 </form> 
</center>
</div>

</body>
</html> 
```

我使用了这个查询，但它不起作用..有什么帮助吗？

```
 <?php
    $total = $v1+ $v2 + $v3;

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:43:05.450

我不确定我明白你在问什么。您想存储单独的值和总和，但不想在 PHP 上进行总和？

如果是这样，你可以做一个[触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)，像这样：

```
DELIMITER $$
CREATE TRIGGER `sum_values` BEFORE INSERT
    ON `Form1`
    FOR EACH ROW
BEGIN
    SET NEW.TOTAL = NEW.P1 + NEW.P2 + NEW.P3;
END$$
DELIMITER ; 
```

这样，您只需运行以下查询：

```
INSERT INTO 
    Form1 
        (P1,P2,P3)
    VALUES
        ('$v1','$v2','$v3') 
```

...并且触发器应该用总和 P1 + P2 + P3 填充“总计”列。

我创建的这个触发器基本上会说：“每次有人在'Form1'中插入一些东西，用总和P1 + P2 + P3填充'TOTAL'列”。

此外，您不应该使用 mysql_query。查看 mysqli 或 PDO_MySQL。mysql_query 已过时，已停产且不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:46:12.367

PHP 是一种服务器端技术，如果不提交到服务器，它可能无法响应页面中的更改，可能是通过 AJAX 调用或其他方式。但是，您似乎需要做的是设置一些 onclick 事件并使用 javascript 将您的总数添加到表单中的隐藏元素中，然后将其与其余部分一起提交。

```
...
<tr>
<th> Your attendance<font size="4" > </font></th>
<td>  <input type="radio" name ="v1" value = "4"    checked = "checked" onclick="updateTotal();"/></td>
<td>  <input type="radio" name ="v1" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v1" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v1" value = "1"  onclick="updateTotal();"   /></td>    
</tr>

<tr>
<th > Your grades  <font size="4" > </font></th>
<td>  <input type="radio" name ="v2" value = "4"  onclick="updateTotal();"  checked = "checked" /></td>
<td>  <input type="radio" name ="v2" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v2" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v2" value = "1"  onclick="updateTotal();"   /></td>    
</tr>

<tr>
<th >Your self-control <font size="4" > </font></th>
<td>  <input type="radio" name ="v3" value = "4"  onclick="updateTotal();"  checked = "checked" /></td>
<td>  <input type="radio" name ="v3" value = "3"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v3" value = "2"  onclick="updateTotal();"   /></td>
<td>  <input type="radio" name ="v3" value = "1"  onclick="updateTotal();"   /></td>    
</tr>       

        </tr>
    </table>

    <br>
    <a href="evaE.php">  <td><input type="submit" name="submit" value="Submit">

    <input type="reset" name="clear" value="clear" style="width: 70px"></td>

    <input type="hidden" id="total" name="total" />

<script>
  function updateTotal(){

    var sumRad = 0;

    var arrV1 = document.getElementsByName("v1");
    var arrV2 = document.getElementsByName("v2");
    var arrV3 = document.getElementsByName("v3");

    for(var i=0; i<arrV1.length ; i++){
      if(arrV1[i].checked == true){
        sumRad += parseInt(arrV1[i].value);
      }
    }

    for(var i=0; i<arrV2.length ; i++){
      if(arrV2[i].checked == true){
        sumRad += parseInt(arrV2[i].value);
      }
    }

    for(var i=0; i<arrV3.length ; i++){
      if(arrV3[i].checked == true){
        sumRad += parseInt(arrV3[i].value);
      }
    }

    document.getElementById('total').value = sumRad ;
  }
</script>

 </form> 
</center>
</div>

</body>
</html> 
```

**编辑：**更正以说明 JS 默认将值视为字符串。

# php - Foreach 循环循环过多

> ID：13312035
> 
> 赞同：-3
> 
> 时间：2012-11-09T16:29:23.743
> 
> 标签：php, mysql

这是我的代码，它正在检查我的结果。问题是它列出了我的数据库表中的一行五次。有 ID、姓名、电子邮件、公司和职位。我如何只显示一次结果？

```
$sql = "SELECT * FROM `newsletter`";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
    foreach ($row as $key => $value) {
        $DATA .= "
            <div id='contentBox'>
            Name: $row[Name]<br />
            Email: $row[Email]<br />
            Company: $row[Company]<br />
            Title: $row[Title]<br />
            <br />
            </div>
        ";
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:30:38.413

摆脱 foreach 循环，你不需要它。

```
while ($row = mysql_fetch_assoc($result)) {
        $DATA .= "
            <div id='contentBox'>
            Name: $row[Name]<br />
            Email: $row[Email]<br />
            Company: $row[Company]<br />
            Title: $row[Title]<br />
            <br />
            </div>
        ";
} 
```

请记住，您正在从数据库中取回行（包含多列）。

```
----------------------
| col1 | col2 | col3 |
----------------------
| val1 | val2 | val3 |
---------------------- 
```

您的`while`循环“向下”迭代该表，其中每个表`$row`都是数据库中的一行。`foreach`对执行 a`$row`将分别遍历每一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:33:37.903

这是仍然使用 foreach 循环的替代方法。这种方法的好处是，如果您添加或删除一列，您将不需要修改循环。

```
$sql = "SELECT * FROM `newsletter`";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
    $DATA .= '<div id="contentBox">';
    foreach ($row as $key => $value) {
        $DATA .= $key . ': ' . $value . '<br />';
    }
    $DATA .= '</div>';
} 
```

# python - mac上的VTK python没有捕捉到键盘事件

> ID：13312039
> 
> 赞同：2
> 
> 时间：2012-11-09T16:29:32.293
> 
> 标签：python, macos, vtk

我有以下问题。我已经在 Mac Os X 10.6 下编译了最新的 VTK，并且我正在使用 Python 绑定。我使用的 Python 发行版是 Enthought Python Distribution (EPD)。一切都很好，但是在 Mac 和 Linux 上，相同程序在键盘事件方面的行为有所不同。看来，我错过了一些非常重要的观点。部分代码如下

```
 vtkrenderer = vtk.vtkRenderer()
    vtkrenderWindow = vtk.vtkRenderWindow()
    vtkrenderWindow.SetSize(800, 600)
    vtkrenderWindow.AddRenderer(vtkrenderer)
    vtkrenderWindowInteractor = vtk.vtkRenderWindowInteractor()
    vtkrenderWindowInteractor.SetRenderWindow(vtkrenderWindow)
    vtkrenderWindow.Render()
    vtkrenderer.ResetCamera()
    vtkrenderWindowInteractor.GetRenderWindow().AddObserver('CharEvent', self.show_update)
    vtkrenderWindowInteractor.Start() 
```

该函数`self.show_update`具有以下形式：

```
def show_update(self, renderer, event):
    if renderer.GetKeyCode() == ' ':
        self.update(renderer, event)
        print 'ready'
        #Do computations here
        renderer.Render() 
```

但是，空格键仅在我启动程序的终端中工作（使用`python test_particles.py`但在 Cocoa 窗口中被完全忽略。

在 Linux 中，一切都按预期工作（键盘工作正常）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-14T20:36:51.770

尝试使用以下命令启动程序`pythonw`：

```
pythonw test_particles.py 
```

这在 OS X 10.10.2 下使用 Anaconda Scientific Python Distribution 对我有用。

# asp.net - 类型值 无法转换为

> ID：13312042
> 
> 赞同：0
> 
> 时间：2012-11-09T16:29:40.060
> 
> 标签：asp.net, vb.net, strongly-typed-dataset

我们正在开发一个带有 SQL Server 数据库的 ASP.Net Web 应用程序，并希望在主页显示时使用在学校注册的学生总数填充 ASP.Net 标签控件。

我们使用数据集设计器创建了以下强类型控件：

```
DataTable: Students
DataSet: DataSetAllStudents
TableAdapter: StudentsTableAdapter 
```

在 VB.Net 代码隐藏文件中，我使用以下代码开始获取注册学生总数的过程。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Dim studentsAdapter As New DataSetAllStudentsTableAdapters.StudentsTableAdapter
    Dim studentsTableRow As Knowledge_Academy.Students

    studentsTableRow = studentsAdapter.GetData

End Sub 
```

我们在这行代码中得到一个错误：

```
studentsTableRow = studentsAdapter.GetData 
```

这是错误：

```
Value of type 'Knowledge_Academy.DataSetAllStudents.StudentsDataTable' cannot be 
converted to 'Knowledge_Academy.Students'. 
```

GetData 包含将返回注册学生总数的查询。我们还想知道如何将值返回到这个 ASP.Net 标签控件中。

```
<asp:Label ID="LabelTotalNumberOfStudents" runat="server" Text="Label"></asp:Label> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:39:15.330

首先，确保仅在第一次加载时加载数据，而不是在每次回发时加载。其次，由于`GetData`返回 a`DataTable`所有行，您可以使用它的`Rows.Count`属性：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Page.IsPostBack Then
        Dim daStudents = New DataSetAllStudentsTableAdapters.StudentsTableAdapter()
        Dim tblStudents = studentsAdapter.GetData()
        LblStudentNumber.Text = String.Format("{0}", tblStudents.Rows.Count)
    End If
End Sub 
```

当然，最好向`TableAdapter`返回标量值和学生人数的新查询添加一个新查询。那将需要更少的资源。

# python - Python：检查字典是否为空的有效方法

> ID：13312043
> 
> 赞同：40
> 
> 时间：2012-11-09T16:29:42.883
> 
> 标签：python, dictionary

如何检查字典是否为空？更具体地说，我的程序从字典中的某个键开始，我有一个循环，直到字典中有键为止。整体算法是这样的：

> 从 dict 中的某个键开始，而 dict
> 中有键，
> 对 dict 中的第一个键进行一些操作
> 删除第一个键

请注意，`some operation`在上面的循环中可能会向字典添加新键。我试过了 `for key,value in d.iteritems()`

但它失败了，因为在 while 循环期间添加了一些新键。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-06-27T15:37:21.320

`any(d)`

如果是dict，这将返回true。d 至少包含一个 truelike 键，否则为 false。

例子：

`any({0:'test'}) == False`

另一种（更一般的）方法是检查项目的数量：

`len(d)`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-15T02:41:40.813

I just wanted to know if the dictionary i was going to try to pull data from had data in it in the first place, this seems to be simplest way.

```
d = {}

bool(d)

#should return
False

d = {'hello':'world'}

bool(d)

#should return
True 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-01T18:25:05.320

只需查字典：

```
d = {'hello':'world'}
if d:
  print 'not empty'
else:
  print 'empty'

d = {}
if d:
  print 'not empty'
else:
  print 'empty' 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-09T16:32:04.537

这将做到：

```
while d:
    k, v = d.popitem()
    # now use k and v ... 
```

布尔上下文中的字典如果为空则为 False，否则为 True。

字典中没有“第一个”项目，因为字典没有排序。但是 popitem 每次都会为您删除并返回*一些*项目。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-11-09T20:57:52.727

我会说这种方式更pythonic并且适合在线：

如果您只需要使用*您的函数*检查值：

`if filter( your_function, dictionary.values() ): ...`

当您需要知道您的 dict 是否包含任何键时：

`if dictionary: ...`

无论如何，在这里使用循环不是 Python 方式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-09T16:47:36.107

据我所知 for 循环使用*iter*函数，并且在迭代它时不应该弄乱结构。

必须是字典吗？如果您使用这样的列表可能会起作用：

```
while len(my_list) > 0:
    #get last item from list
    key, value = my_list.pop()
    #do something with key and value
    #maybe
    my_list.append((key, value)) 
```

请注意，my_list 是元组 (key, value) 的列表。唯一的缺点是您无法通过密钥访问。

编辑：没关系，上面的答案基本相同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-14T19:48:31.280

这是另一种方法：

```
isempty = (dict1 and True) or False 
```

如果 dict1 为空，则 dict1 和 True 将给出 {}，而当用 False 解决时会给出 False。

如果 dict1 是非空的，那么 dict1 和 True 给出 True 并且用 False 解决这个给出 True

# javascript - 从 kineticjs 中的容器获取舞台

> ID：13312046
> 
> 赞同：1
> 
> 时间：2012-11-09T16:29:51.650
> 
> 标签：javascript, html, canvas, kineticjs

我将此阶段与容器相关联：

html:

```
<div id="container"> 
```

脚本1：

```
var stageInFirstScript = new Kinetic.Stage({
    container: document.getElementById('container'),
    width: this.SKETCH_WIDTH,
    height: this.SKETCH_HEIGTH
}); 
```

在第二个脚本中，我需要操纵刚刚创建的舞台上的形状。是否可以使用这样的方法检索 stageInFirstScript？

脚本 2：

```
var stageInSecondScript = document.getElementById('container').RetrieveExistingStage();
//now I have retrieved stageInFirstScript
//I can add shapes to it, etc.... 
```

任何帮助或替代解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:48:31.063

您应该能够简单地引用您创建的变量，即“stageInFirstScript”。但是，如果这两个脚本在两个不同的范围内，请尝试将此变量设为全局变量，然后像这样访问它（我将在此示例中使用 jquery）：

Script1.js：

```
var stageInFirstScript; // declaring global variable

$(window).load(function() {

   // assigning new stage to the global variable

   stageInFirstScript = new Kinetic.Stage({
       container: document.getElementById('container'),
       width: this.SKETCH_WIDTH,
       height: this.SKETCH_HEIGTH
   });

}); 
```

然后在 script2.js 中：

```
function doSomething() {

    // accessing global variable and calling its method

    stageInFirstScript.setHeight(300); 

} 
```

只要在定义变量之后调用函数，这应该可以工作，在这种情况下是在加载窗口之后。

如果您希望获得任何容器的阶段，我能想到的一种方法是创建一个数组，将动力学阶段与容器（或它们的 id）相关联。

# entity-framework - EF Code First 和 modelbuilder - 如何用相同的 ID 建立一对一的关系？

> ID：13312047
> 
> 赞同：0
> 
> 时间：2012-11-09T16:29:55.273
> 
> 标签：entity-framework, foreign-keys, entity-relationship, one-to-one

我有两节课：

```
public class Account
{
   public int Id {get;set;}

   public PayoffData PayoffData {get;set;}
}

public class PayoffData
{
   public int Id {get;set;}
   //some other fields
} 
```

现在，我希望类`PayoffData`具有与类相同的 id `Account`，并且它需要是一对一的关系（帐户可以（或不能）有一个 payoffdata）。

我试图用模型构建器做一些事情，但据我所知，要在`PayoffData`课堂上设置外键，我需要设置一个`.HasMany`我不想要的关系。如何使用模型构建器解决我的问题？（我不想使用数据注释方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:44:02.423

```
modelBuilder.Entity<Account>()
    .HasOptional(a => a.PayoffData)
    .WithRequired(); 
```

两个表都有一个主键列，表中`Id`的主键`Id`同时是`PayoffData`表的外键`Account`。

# git - Gitlab没有在gitolite中创建存储库

> ID：13312051
> 
> 赞同：1
> 
> 时间：2012-11-09T16:30:09.370
> 
> 标签：git, ssh, gitlab

我已经用 Gitolite 安装了 Gitlab，并按照说明进行了配置。

gitlab 应用程序添加的用户密钥保存在 中`.gitolite/conf/keydir`，我猜应该是这样。

在应用程序中创建我的项目后，我尝试推送它们，并发现在 git 用户中没有创建任何 repo。

在安装中，我们进行了以下检查：`bundle exec rake gitlab:app:status RAILS_ENV=production`所有检查的结果都是“YES”。

但是当我们创建一个项目并进行相同的检查时，结果是：

```
...
.....YES
......YES
UMASK for .gitolite.rc is 0007? ............YES
/home/git/.gitolite/hooks/common/post-receive exists? ............YES
Validating projects repositories:
Gerência de Notebooks.....post-receive file missing
rake aborted! 
```

我正在使用 gl-v304。

会发生什么？

我的 git 和 gitolite 用户没有密码

对于安装，我必须将我的 sshd_config 设置`PermitEmptyPasswords yes`为 ，让 git 用户保存 gitlab sshkey，然后将 sshd_config 配置回`PermitEmptyPasswords no`，当克隆进行测试时，它可以正常工作，或者几乎可以工作。

只是希望你能帮助大家，提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:47:53.307

你必须在 gitlab 安装时添加这个

```
 git config --global user.name Gitlab
 git config --global user.email gitlab@localhost 
```

[https://github.com/gitlabhq/gitlabhq/issues/1904#issuecomment-1064714​​5](https://github.com/gitlabhq/gitlabhq/issues/1904#issuecomment-10647145)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T11:23:12.597

老问题，但无论如何：

你有哪个版本的*redis-server*？早于 2.4 的版本会导致此类问题。尝试升级。

# c# - 从 asp.net 页面在 Internet Explorer 中查看 xml 文件

> ID：13312056
> 
> 赞同：1
> 
> 时间：2012-11-09T16:30:19.817
> 
> 标签：c#, javascript, asp.net, xml

我是 Asp.net 的新手。我有一个网格视图，其中包含文本字段以及三个按钮。我的系统正在生成 xml 文件，我想在单独的窗口中查看该 xml 文件。例如，我的网格视图包含 3 行，并且将有 3 个 xml 文件，其中一个文件将与每一行关联。所以我想要的是每当我点击相应行中的按钮时查看文件。

有人可以帮忙吗？我知道我需要使用一些 java 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:44:13.563

有几种方法可以解决这个问题。对于一个简单的解决方案，您可以在响应中编写 XML。如果您想要一个新窗口，您可以创建一个临时 XML 文件并重定向到它的 URL。

```
//create the XML and put it in the filesystem -- just use google

ClientScript.RegisterStartupScript(GetType(), "SomeNameForThisScript", "window.open('http://UrlToYourXML.xml');", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:44:31.237

您在这里有几个选择：

1.  您可以流式传输 XML，大多数现代浏览器都可以呈现 XML。只需要提供样式。
2.  使用[JQgrid 之](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data)类的 jQuery 插件来渲染 XML
3.  在服务器端处理 XML 以将其转换为 HTML/Datagrid

# java - java对象初始化的最佳实践

> ID：13312057
> 
> 赞同：1
> 
> 时间：2012-11-09T16:30:24.423
> 
> 标签：java, object, initialization

这些方法之间有什么实际区别吗？（内存、GC、性能等？）

```
while...{
   Object o=new Object();
   ...
   o=new Object();
   ...
} 
```

和

```
Object o;
while...{
   o=new Object();
   ...
   o=new Object();
   ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:00:32.277

来自**有效的 Java 第 2 版**：

> **最小化局部变量范围的最强大的技术是在第一次使用它的地方声明它。**如果一个变量在使用之前就被声明了，那就是混乱了——另外一件事情会分散试图弄清楚程序做什么的读者的注意力。到使用变量时，读者可能不记得变量的类型或初始值。
> 
> 过早地声明一个局部变量不仅会导致其范围过早地扩展，而且会导致其结束得太晚。局部变量的范围从声明它的点延伸到封闭块的末尾。如果变量在使用它的块之外声明，则在程序退出该块后它仍然可见。如果一个变量在其预期使用区域之前或之后被意外使用，后果可能是灾难性的。

换句话说，性能（CPU，内存）的差异与您的情况无关。更重要的是程序的语义和正确性，这在您的**第一个**代码示例中更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:31:29.910

在您的第一个示例中，`o`将在您的 while 循环完成后超出范围。

现在，如果您实际上并未`o`在 while 循环之外使用（即使您将它引用的对象加载到不同的结构中），这很好，但您将无法`o`在循环之外访问

此外，这只是挑剔，但这些都不会编译，因为你声明`Object o`了两次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:34:28.517

我认为您需要在对象重用和垃圾收集的资格+可读性之间进行权衡。

最小范围总是增加可读性并最大限度地减少错误倾向。

同样，如果某些对象的创建成本太高（如线程、数据库连接），则应考虑重用。它们通常不在循环内创建，而是缓存在池中。

这就是连接池和[线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html) [池](http://en.wikipedia.org/wiki/Thread_pool_pattern)如此受欢迎的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T17:29:48.657

在选项 1 的情况下，当循环结束时，对象将有资格进行 GC，而在选项 2 中，对象将持续到方法结束。

# css - IE中不显示背景img

> ID：13312059
> 
> 赞同：0
> 
> 时间：2012-11-09T16:30:29.427
> 
> 标签：css

我正在创建网站，我遇到了 Internet Explorer（在版本 8 上测试）的问题，它不显示背景图像

这是我的代码：

```
 body {
      background: rgb(255,255,255); /* Old browsers */
      background-image: url(../images/bg.png);
      background-image: url(../images/bg.png), -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(105,205,249,1) 100%); /* FF3.6+ */
      background-image: url(../images/bg.png), -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(105,205,249,1))); /* Chrome,Safari4+ */
      background-image: url(../images/bg.png), -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* Chrome10+,Safari5.1+ */
      background-image: url(../images/bg.png), -o-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* Opera 11.10+ */
      background-image: url(../images/bg.png), -ms-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* IE10+ */
      background-image: url(../images/bg.png), linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* W3C */
      background-repeat: no-repeat;
      background-position: 0 0;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 15px;
} 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:35:18.267

看看这个小提琴的例子。我不知道你是否想要这样。但它也适用于 IE。核实。[例子](http://jsfiddle.net/Sriganesh/9hjrc/)

```
 body {
      background: rgb(255,255,255); /* Old browsers */
      background-image: url(../images/bg.png);
      background-image: url(../images/bg.png), -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(105,205,249,1) 100%); /* FF3.6+ */
      background-image: url(../images/bg.png), -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(100%,rgba(105,205,249,1))); /* Chrome,Safari4+ */
      background-image: url(../images/bg.png), -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* Chrome10+,Safari5.1+ */
      background-image: url(../images/bg.png), -o-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* Opera 11.10+ */
      background-image: url(../images/bg.png), -ms-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* IE10+ */
        -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#FFFFFF', endColorstr='#6BCEF9')"; /* IE8 */
      background-image: url(../images/bg.png), linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(105,205,249,1) 100%); /* W3C */
      background-repeat: no-repeat;
      background-position: 0 0;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 15px;
} 
```

在这里，我添加了以下行。

```
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#FFFFFF', endColorstr='#6BCEF9')"; /* IE8 */ 
```

检查并告诉我。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:40:18.380

我发现这个 [http://social.msdn.microsoft.com/Forums/en-ZA/iewebdevelopment/thread/4771f218-42fc-43b0-b0fd-bda98eef12ad](http://social.msdn.microsoft.com/Forums/en-ZA/iewebdevelopment/thread/4771f218-42fc-43b0-b0fd-bda98eef12ad)

它讨论了 IE8 中与 JS 声明冲突的背景图像。不确定这是否是这里的问题。我知道你不应该在这里遇到 hasLayout 问题，但你可能想尝试放置一个 display:block; 在身体上。您还应该确保正文的大小适合其中的内容（即确保清除浮动等 - 尽管这很可能是罪魁祸首，只有当您的 bgs 在大多数客户端中失败时）。

我喜欢放一个边框：1px纯红色；围绕我试图定位或调试的东西。希望对一些人有所帮助，对不起，答案并不完整。

此外，另一种测试方法是在包含 css 之后添加 IE 条件语句，然后从那里开始播放。

# image - 如何将图像/地图转换为 GoogleMaps 多边形？

> ID：13312065
> 
> 赞同：0
> 
> 时间：2012-11-09T16:30:46.663
> 
> 标签：image, google-maps, gis, polygon

如果我想使用图像（地图）作为“指南”为 GoogleMaps 图层创建多边形，谁能给我提示如何最好地接近它？

使用 GIS 软件会做得最好吗？我更喜欢桌面/离线工具而不是任何在线工具（Mac 会很完美，Windows 也可以）。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:02:22.600

以下是一些可能对您有所帮助的桌面应用程序：

*   Merkaartor - [http://merkaartor.be/](http://merkaartor.be/)
*   量子 GIS - [http://www.qgis.org/](http://www.qgis.org/)

如果您正在追踪卫星地图上可见的东西，您也可以尝试使用 Google 地球。

# sql - 选择多行作为数组

> ID：13312067
> 
> 赞同：9
> 
> 时间：2012-11-09T16:30:49.083
> 
> 标签：sql, arrays, postgresql, plpgsql

我有一张桌子，其中两个人可能有相同的名字，但有不同的 ID。我得到了这个名字，并且需要请求他们的 ID。

当我使用如下命令时：

```
SELECT id_num INTO cust_id FROM Customers WHERE name=CName; 
```

如果我在命令行 (psql) 上使用此命令，它会返回 2 个结果（例如）。

但是当我将它用作 SQL 脚本 (PL/pgSQL) 的一部分时，它总是只抓取第一个实例。

我尝试选择 into `cust_id[]`，但这产生了错误。那么选择所有结果并将它们泵入数组或其他简单的使用方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T16:55:50.820

在声明中

```
 DECLARE id_nums bigint[]; 
```

在选择

```
id_nums :=  ARRAY(select cust_id from Customers WHERE name = CName); 
```

如果您更喜欢循环使用

```
DECLARE id_num bigint;

FOR id_num in select cust_id from Customers WHERE name = CName LOOP
  your code here
END LOOP; 
```

[阅读 postgresql docs 9.1](http://www.postgresql.org/docs/9.1/static/plpgsql-control-structures.html)中的 plpgsql 控制结构。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T18:07:14.897

要将单个行中的数据放入数组中，请使用[**数组构造函数**](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#SQL-SYNTAX-ARRAY-CONSTRUCTORS)：

```
DECLARE id_nums int[];  -- assuming cust_id is of type int

id_nums := ARRAY (SELECT cust_id FROM customers WHERE name = cname); 
```

或者**聚合函数** [`array_agg()`](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)

```
id_nums := (SELECT array_agg(cust_id) FROM customers WHERE name = cname); 
```

或`SELECT INTO`用于作业::

```
SELECT INTO id_nums
       ARRAY (SELECT cust_id FROM customers WHERE name = cname); 
```

# msbuild - MSBuild 包含目录中的所有引用

> ID：13312069
> 
> 赞同：3
> 
> 时间：2012-11-09T16:30:55.843
> 
> 标签：msbuild

我有一个将类库构建到 DLL 的 MSBuild 脚本。

为了构建，我需要包含对几个 dll 的引用（即 log4net.dll、Elmah.dll 等）。

目前，我的构建文件包含每个 dll 的路径，如下所示：

```
<Reference Include="C:\Projects\MillinCommon\Trunk\bin\Debug\log4net.dll" />
<Reference Include="C:\Projects\MillinCommon\Trunk\bin\Debug\Elmah.dll" />
<Reference Include="C:\Projects\MillinCommon\Trunk\bin\Debug\Microsoft.Practices.EnterpriseLibrary.Common.dll" />

etc. etc. etc. 
```

然后，在目标中，我有我的 CSC：References="@(Reference)"

这变得相当乏味。我想做的是将所有依赖的 dll 放入文件系统上某个位置的单个目录中，然后传递一个对目录的引用，MSBuild 将使用该目录中包含的所需 dll。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T07:16:09.143

要包含一个文件夹中的所有项目，只需在参考包含语句中使用通配符：

```
<Reference Include="C:\Projects\MillinCommon\Trunk\bin\Debug\*.dll" /> 
```

您甚至可以使用递归通配符，例如`C:\Projects\MillinCommon\Trunk\bin\**\*.dll`从文件夹及其所有子文件夹中包含。

有关详细信息，请参阅[MSBuild 项 - 使用通配符指定项](http://msdn.microsoft.com/en-us/library/ms171453.aspx#BKMK_Wildcards)。

# ruby-on-rails - 在 Rails 中执行循环任务而不加载完整环境

> ID：13312073
> 
> 赞同：1
> 
> 时间：2012-11-09T16:31:11.827
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cron, whenever

在我的应用程序中，我需要每 5 分钟执行一次任务。任务本身非常精简，所以这不是问题：关键是加载 Rails 环境几乎使用了服务器的所有 CPU。现在，我正在使用`whenever`这样的代码`schedule.rb`：

```
every 5.minutes do
  runner Task.perform
end 
```

但是代价太大了。无论如何在预加载的环境中执行这种任务？还是有其他更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:42:01.613

考虑使用后台进程（许多 gem，尤其是[延迟作业](http://www.tobinharris.com/past/2009/3/9/6-ways-to-run-background-jobs-in-rubyonrails/)）并在您的代码中使用轮询循环实现一个简单的“cron”，例如

```
def perform
  last = Time.now
  while true
    if last.sec % (5 * 60) != 0
      do_task
      last = Time.now
    end
  end
end 
```

警告：这个例子比一片瑞士奶酪有更多的洞。写一些更好的东西:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:40:49.267

您可以使用 cron 作业或将其设置为在 bash 脚本中运行。这些将具有不与您的应用程序绑定的优点。

# c# - 在 MVC4 中模拟 User.Identity.Name

> ID：13312074
> 
> 赞同：0
> 
> 时间：2012-11-09T16:31:13.373
> 
> 标签：c#, asp.net-mvc, unit-testing, moq

我正在尝试为我在控制器（MVC4）中的一种方法编写测试。我使用最小起订量。在测试方法中，我为我的存储库创建了一个模拟，如下所示：

```
Mock<ISurveyRepository> mock = new Mock<ISurveyRepository>(); 
```

并继续模拟存储库调用。其中第一个是：

```
int userId = repository.GetUserId(User.Identity.Name); 
```

所以我将它添加到我的测试方法中：

```
mock.Setup(y => y.GetUserId("testName")).Returns(1); 
```

不幸的是，这行代码给了我：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

如果我从控制器中删除上面的行并改用静态值（int userId = 1），则测试可以正常完成。

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:47:50.477

这可能无法解决您的起订量问题，但就其价值而言，[MvcContrib 测试助手](http://mvccontrib.codeplex.com/wikipage?title=TestHelper)对于模拟登录用户非常有用。

使用测试助手，您可以编写如下代码：

```
FakeIdentity FakeId = new FakeIdentity(UserName);
FakeUser = new FakePrincipal(FakeId, new[] {  "Admin" });   
Thread.CurrentPrincipal = FakeUser; 
```

模拟用户。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:55:07.847

当您获取用户名时，您的代码会引发异常。`User`从当前 HTTP 请求返回安全信息。在测试期间，您没有 HTTP 请求，因此此代码会引发异常。

这是此属性的实现：

```
public IPrincipal User
{
    get
    {
        if (HttpContext != null)            
            return HttpContext.User;

        return null;
    }
} 
```

因此，如您所见，如果没有 HttpContext，它会返回 null。因此，您需要设置 HttpContext 并`IPrincipal`为您的测试提供模拟。请参阅[此处](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)如何创建假 HttpContext。

# sql - 我应该使用约束还是触发器？

> ID：13312079
> 
> 赞同：0
> 
> 时间：2012-11-09T16:31:23.993
> 
> 标签：sql, database

我有一个**Customer**表，其中有一列显示客户是否为**"AllowRefund"**，并且必须有一列**By_Which_Staff**来指示哪些员工将特权**归功于 "AllowRerfund"**。

我的要求是：在将员工 ID 放入**By_Which_Staff**表之前，数据库应首先检查**AllowRefund**列是否为**Yes**，然后才能将员工 ID 放入其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:38:15.180

这应该是一个约束。仅当您对（或至少使用）当前行之外的某些内容进行操作时，才应使用触发器。

对于不可接受的值（负年龄，k1 学生超过 18 岁）应使用约束，复合值（例如全名）应使用计算值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:37:42.000

`CHECK`约束可能是最简单的。假设 MS-SQL：

```
CHECK (AllowRefund = 1 Or By_Which_Staff Is Null) 
```

# php - 使用 AJAX 设置 cookie

> ID：13312081
> 
> 赞同：0
> 
> 时间：2012-11-09T16:31:26.923
> 
> 标签：php, javascript, ajax, cookies

我在使用 PHP 加载页面（不使用 AJAX）时设置了一个 cookie。

后来，我有一个 AJAX PHP 脚本，它做了一些工作，尝试通过包含删除 cookie `setcookie('my_cookie', '', time()-3600);`，返回`header('Content-Type: text/plain')`一些文本，然后浏览器根据响应重新加载页面。

cookie 没有被删除。然后我意识到我没有向浏览器发送 HTML，而是一些文本和/或 JSON。我在 SO 上阅读了其他一些帖子，听起来我应该能够这样做。我想我可以使用 JavaScript 删除 cookie，但是，我宁愿不这样做。

我应该如何最好地删除 cookie？谢谢

# java - Spring JPA 多线程

> ID：13312085
> 
> 赞同：1
> 
> 时间：2012-11-09T16:31:35.757
> 
> 标签：java, multithreading, spring, jpa, threadpoolexecutor

我们正在构建一个产品，所以从性能的角度来看，我需要一些帮助。我们正在使用完整的 Spring（MVC、JPA、Security 等）

我们有一个要求，即对于一个特定的流程，可以同时执行 100 个业务规则。可以有`n`许多这样的流程和业务规则。

这些规则在执行时实际上是从数据库中的表中获取记录，这些也将包含很少的 LAZILY INITIALIZED ENTITIES。

我将`Futures`/`Callables`用于多线程目的，但问题是它无法加载 LAZY 变量。它给 Hibernate 加载异常，可能是 TRANSACTIONAL 中的一些问题没有分布在不同的线程中。

请让我知道是否有其他方法可以接近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:39:53.600

如果某些实体/实体集合是延迟获取的，并且您正在另一个线程中访问它，您将面临`LazyInitialization`异常，因为延迟加载的实体只能在事务中访问，并且事务不会跨越线程。

您可以使用 DTO 模式，或者如果您跨线程共享实体，请在事务中调用其惰性初始化集合 getter，以便在事务本身中获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:51:36.413

如果您真的需要异步处理，那么我建议您使用 Java EE 指定的方式，即使用[JMS](https://docs.oracle.com/javaee/7/tutorial/jms-concepts.htm) / [MDB](https://docs.oracle.com/javaee/7/tutorial/ejb-intro003.htm)。

无论如何，因为您似乎希望无论如何都希望加载所有数据以进行处理。所以**Eager 获取**所有需要的数据，然后提交数据进行并行处理。或者让每个`Tasks`( `Callables`) 获取他们需要的数据。本质上，我要求您更改您的设计，以便事务边界不会跨越多个线程。在单个线程内本地化边界。

# ios - Core Data、Xcode 4.5 和在数据模型中创建获取的请求

> ID：13312086
> 
> 赞同：1
> 
> 时间：2012-11-09T16:31:45.053
> 
> 标签：ios, database, xcode, core-data, xcode4

我正在尝试了解核心数据，进展缓慢，但我正在慢慢实现。令我困惑的一件事是如何在数据模型编辑器中创建一个 Fetched Request，它从关系中提取具有标准的记录。

例如，我有两个实体“主类别”和“子类别”，它们具有一对多的关系。

我看不到如何在编辑器中创建 Fetched Request 来选择与“SOME_SUB”匹配的子类别，其主要类别是“SOME_MAIN”。在 SQL 中这是微不足道的，但我在这里敲我的头。

我可以在这里看到显示如何通过代码创建 Fetched Request 的苹果文档[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)但我想保留取而代之的是数据模型视图中的 Fetched Requests。

有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:11:20.833

查看数据模型时，选择要为其创建提取请求的实体。从菜单栏中选择“编辑器”菜单项 -> 添加获取请求。

# java - 如何完成全括号中缀形式？

> ID：13312090
> 
> 赞同：-4
> 
> 时间：2012-11-09T16:31:51.260
> 
> 标签：java, algorithm

目前面临的问题？
示例：
简单输入不是全括号中缀形式： 319*((5.5+12.9)-(4.5/3.0))

示例输出：( 319 * ( ( 5.5 + 12.9 ) - ( 4.5 / 3.0 ) ) )

### 如何制作全括号中缀？
能提供一些思路或算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:36:41.470

将结果解析为[表达式树](http://en.wikipedia.org/wiki/Binary_expression_tree)并使用[您选择的树遍历](http://en.wikipedia.org/wiki/Tree_traversal)将树返回。

# c++ - 如何引用在我的超类中定义的类？

> ID：13312091
> 
> 赞同：3
> 
> 时间：2012-11-09T16:31:52.523
> 
> 标签：c++, oop, superclass

我有一个超类，其中定义了一个类。像：

```
class A {
 public:
  class B {public: bool value;};

  A() {
      DoStuff(b_);
  }
  B b_;
 private:
  virtual void DoStuffImpl(B& b) = 0;
  void DoStuff(B& b) { return DoStuffImpl(b); }
};

class X : public A {
  // ...
 private:
  virtual void DoStuffImpl(B& b);
  void UseBForSomethingElse(B& b);
};

void X::DoStuffImpl(B& b) {
    UseBForSomethingElse(b);
}

void X::UseBForSomethingElse(B& b) {
    b.value = true;
}

int main(){
    X x;
    return x.b_.value;
} 
```

我的编译器似乎理解`DoStuffImpl()`得很好。但是，当我添加 时`UseBForSomethingElse()`，编译器找不到`B`该类的定义。我试图通过做进一步指定`bool UseBForSomethingElse(A::B& b)`。这已编译，但在链接期间失败。

如何正确指定 parent `B`，为什么它适用于虚拟功能而不适用于另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:00:27.803

基于 OP 编辑​​的编辑：

ideone 说您有运行时错误的原因是因为您*从 main 返回 1*。任何非零返回值`main`都将被视为执行失败。如果你只是改变返回`return !x.b_.value;`ideone 按预期报告成功。

Original answer:

```
void UseBForSomethingElse(const B& b) {
    b.value = true;
} 
```

You can't assign into a constant reference (`b`), so that's certainly one of your problems.

Also, you didn't qualify the definition of `UseBForSomethingElse` with `X::` so the compiler doesn't put it in the scope of `X`, preventing it from seeing the parent's nested class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:06:42.633

Your updated post doesn't properly qualify UseBForSomethingElse().

```
void UseBForSomethingElse(const B& b) 
```

should be

```
void X::UseBForSomethingElse(const B& b) 
```

Once this is fixed, you still have a problem (and heaven help me if I get this wrong).

You're firing a virtual method from a base class constructor without the derived class finishing construction. I.e, UseBForSomethingElse (non-virtual) is fired from DoStuffImpl() (virtual, pure @ A, defined in X) **before** X is finished base-construction (you're, in fact *in* X's base-construction when you make the call). This will trigger a 'pure virtual function called' since X's vtable isn't fixed up until its constructor is actually entered.

This **does** happen on my machine as well, btw.

# c - 将两个字节字符拆分为两个单字节字符

> ID：13312098
> 
> 赞同：0
> 
> 时间：2012-11-09T16:32:15.860
> 
> 标签：c, char

我有一个值 char 说 0xB3，我需要把它分成两个单独的 char。所以 X = 0xB 和 Y = 0x3。我试过以下代码：

```
int main ()
{
    char addr = 0xB3;
    char *p = &addr;

    printf ("%c, %c\n", p[0], p[1]);          //This prints ?, Y
    printf ("%X, %X\n", p[0], p[1]);          //This prints FFFFFFB3, 59

    return 0;
} 
```

为了澄清起见，我需要将值 00 的任何 2 字节字符转换为 FF，并将第一个和第二个字节分成单独的字符。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:34:37.707

直接来自[维基百科](https://en.wikipedia.org/wiki/Nibble)：

```
#define HI_NIBBLE(b) (((b) >> 4) & 0x0F)
#define LO_NIBBLE(b) ((b) & 0x0F) 
```

`HI_NIBBLE(addr)`也会如此`0xB`。但是，`0x00`通过`0xFF`不是“双字节”。它们是单字节值。一个十六进制数字可以占用 16 个字节，而一个字节可以占用 256 = 16² 个字节，因此您需要两个十六进制数字来表示任意字节值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:26:42.280

这里有很多问题，让我们看一下您的代码：

```
int main ()
{
    char addr = 0xB3;  <-- you're asigning 0xB3 in hex, which is (179 in dec) to addr
    char *p = &addr;   <-- you're assigning a pointer to point to addr 
```

如果`addr`是无符号的，现在将设置为 179，即扩展[ASCII](http://www.asciitable.com/)`│ ( Box drawing character )`

如果`char`有符号，则值可以是 -127 到 +127，如果没有符号，则可以是 0 到 255。在这里（根据您的输出）它已签名，因此您的`char`分配溢出了。

```
printf ("%c, %c\n", p[0], p[1]); <-- print the char value of what p is pointing to
                                     also, do some UB
printf ("%X, %X\n", p[0], p[1]); <-- print the hex value of  what p is pointing to
                                     also, do some UB 
```

因此，您的代码的第二部分在这里打印溢出`addr`var 的 char 值，它恰好`'?'`为您打印。的十六进制值`addr`表示`FFFFFFB3`您有一个负值（最高位是有符号位）。

this:`p[0]`实际上是一个“加法和引用”运算符。这意味着我们将获取 的地址`p`，添加`0`到它，然后遵从并查看结果：

```
p ---------+
           V
       ------------------------------------------
      | ptr(0xB3) |    ?      |     ?     | ... |
      -------------------------------------------
       0xbfd56c2b  0xbfd56c2C  0xbfd56c2d   ... 
```

当你这样做时，`p[1]`会超过 ptr 一个`char`或一个字节并给你那个结果。什么东西在那里？不知道。这超出了您的范围：

```
p+1 -------------------+
                       V
       ------------------------------------------
      | ptr(0xB3) |    ?      |     ?     | ... |
      -------------------------------------------
       0xbfd56c2b  0xbfd56c2C  0xbfd56c2d   ... 
```

`Y`的 ASCII 值（十六进制）是 0x59，所以内存中的指针后面是`Y`. 但它可能是任何东西，将要做什么是未定义的。正确的方法是：

```
int main ()
{
    unsigned char addr = 0xB3;
    char low = addr & 0x0F;
    char high = (addr >> 4) & 0x0F;

    printf("%#x becomes %#x and %#x\n", addr, high, low);

    return 0;
} 
```

这通过以下方式工作：

```
 0xB3  =>  1011 0011        0xB3 >> 4 =   0000 1011
            & 0000 1111                    & 0000 1111
            ------------                  -------------
              0000 0011 => 3 low             0000 1011 => B high 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:35:11.107

为什么需要通过指针传递？只需取 4 个相关位并在需要时移动最有意义的位：

```
char lower = value & 0x0F;
char higher = (value >> 4) & 0x0F; 
```

然后`0xB3`是一个字节，而不是两个字节。因为一个十六进制数字可以有 16 个值，所以两个数字可以存储 16*16 = 256 个值，这就是你可以在一个字节中存储多少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-08T06:05:28.127

好的，所以您尝试将 0xB3 拆分为 0xB 和 0x3，仅供参考，不要说“字节字符”，一个字节的 2 个部分通常称为“半字节”，一个字节由 2 个半字节组成（它们是由 4 位组成）。如果你不知道，`char`指的是 1 个字节。

因此，您的代码存在问题：

```
char addr = 0xB3;  <---- Creates single byte with value 0xB3 - Good
char *p = &addr;   <---- Creates pointer pointing to 0xB3 - Good

printf ("%c, %c\n", p[0], p[1]); <---- p[0], p[1] - Bad
printf ("%X, %X\n", p[0], p[1]); <---- p[0], p[1] - Bad 
```

好的，所以当您引用`p[0]`并`p[1]`告诉系统指针`p`指向 s 数组时`char`（p[0] 将引用 0xB3 但 p[1] 将指向内存中的下一个字节）

示例：这是您的系统内存的样子（但有 8 个字节的指针）

```
 Integer Values Area              Pointers Area
0x01 0x02 0x03 0x04 0x05 0x06    0x12 0x13 0x14 0x15 0x16
-----------------------------    ------------------------
.... .... 0xB3 0x59 .... ....    .... .... 0x03 .... ....
-----------------------------    ------------------------
           ^    ^                           ^
          addr  |                           p (example pointer pointing to example address 0x03)
             Random number                    (Pointers are normally 8 Bytes but)
             showing up in p[1]               (But In this example I used single bytes) 
```

因此，当您告诉系统获取`p[0]`或`*p`（它们会做同样的事情）时，它将转到地址（例如 0x03）并在这种情况下获取一个字节（因为它是一个字符）`0xB3`。但是，当您尝试时`p[1]`，`*(p+1)`它将转到地址（例如 0x03），跳过第一个`char`并获取下一个给我们的地址，该地址`0x59`将用于其他变量。

好的，所以我们已经解决了这个问题，那么您如何获得小食呢？

获取半字节的一个问题是您通常不能只有半字节的 put 变量，没有仅支持 4 位的类型。当您使用 %x/%X 打印时，它只会显示直到最后一个非零数字的半字节，例如。= 0x00230242 只会显示 230242 但如果你做类似的事情

%2lX 将显示 2 个完整字节（包括零） %4lX 将显示 4 个完整字节（包括零）

因此，尝试获取单个小食是毫无意义的，但是如果您想做类似的事情，请执行以下操作：

```
char addr = 0x3B;
char addr1 = ((addr >> 4) & 0x0F);
char addr2 = ((addr >> 0) & 0x0F); 
```

# objective-c - 将核心数据与 NSPredicate 和 NSDate 一起使用

> ID：13312099
> 
> 赞同：0
> 
> 时间：2012-11-09T16:32:19.690
> 
> 标签：objective-c, ios, core-data

我有一个`Event`保存 a`NSString *action`和 a的表`NSDate *date`。我想过滤从核心数据中检索到的数组，以显示过去一小时和下一小时执行的所有操作，而不取决于保存日期。周二的示例在 16:00 保存了一个操作，但今天是周五 17:00，我仍然想检索周二保存的该操作以及该时间范围内的任何操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:51:24.650

对于任何被这个问题困扰的人。将我的事件表更改为保存一个整数（动作的小时数）并像这样检索它

```
NSDate *currentFullDate = [NSDate date];
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:currentFullDate];
NSInteger currentHour = [components hour];
NSInteger hourAgo = currentHour -1;
NSInteger nextHour = currentHour +1;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Event"];
request.predicate = [NSPredicate predicateWithFormat:@"(hour >=%@) AND (hour <= %@)", hourAgo, nextHour];
request.fetchLimit = 5;
NSError *error;
NSArray *eventArray = [managedObjectContext executeFetchRequest:request error:&error];

for (Event *event in eventArray)
{

} 
```

# css - 我可以使用 Sublime 在 Visual Studio 2010 项目中编辑 CSS 文件吗

> ID：13312112
> 
> 赞同：0
> 
> 时间：2012-11-09T16:33:22.583
> 
> 标签：css, visual-studio-2010, tfs, sublimetext2

有没有办法从 Visual Studio 2010 中自动启动 Sublime，例如，每次单击打开 CSS 文件时？我需要所有源代码控制功能保持不变——我只想更改用于 VS / TFS 项目中的一些文件类型的编辑器。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:02:18.167

右键单击该文件，选择“打开方式...”，添加 sublime 作为编辑器，单击设置默认值。

您可能仍然需要在 Visual Studio 中手动右键单击结帐/签入。当使用本地工作区作为文件不再标记为只读时，此功能在 tfs2012/vs2012 中要好得多。

# c - 使用 CV_THRESH_OTSU 的 cvThreshold 的返回值

> ID：13312116
> 
> 赞同：1
> 
> 时间：2012-11-09T16:33:38.827
> 
> 标签：c, opencv

我正在做一个项目，该项目需要根据使用 OpenCV 的 otsu 方法计算的阈值来操作图像。我需要通过 Otsu 方法计算的阈值。

问题是，根据 [http://opencv.willowgarage.com/documentation/c/miscellaneous_image_transformations.html#threshold](http://opencv.willowgarage.com/documentation/c/miscellaneous_image_transformations.html#threshold)

它说阈值函数返回使用 Otsu 函数计算的阈值，当我使用 CV_THRESH_OTSU 作为阈值类型的参数时，它是双精度值。

但是当我运行代码片段时

```
 printf("thresh = %lf\n", cvThreshold(image, otsu, 100, 255, CV_THRESH_OTSU + CV_THRESH_BINARY_INV)) 
```

它会引发错误“无效使用无效表达式”。如何获得阈值？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:46:37.327

该文档适用于 opencv v2.1，您似乎使用的是*旧*版本，在 opencv 0.9`cvThreshold`中不返回值：

```
void cvThreshold( const CvArr* src, CvArr* dst, double threshold,
                  double maxValue, int thresholdType ); 
```

# iphone - 带有 UIPageControl 的 UITableview？

> ID：13312119
> 
> 赞同：1
> 
> 时间：2012-11-09T16:33:53.047
> 
> 标签：iphone, sdk

我正在制作一家餐厅“逐步”订购应用程序，我想在表格视图中列出菜单（开胃菜、主菜等），并能够使用 UIPagecontrol 组织菜单内容。类似于eat24 应用程序的操作方式或天气预报应用程序的构建方式。

![图片](../Images/0ec0bc95e7f167275f2f527cf79eb6a9.png)

![图片](../Images/c61e8f8725dfda41452d80b1d332c518.png)

我已经设置了tableview，现在我只需要实现它，我希望你能帮助我或指导我正确的方向，让我完成这个:)。我是否需要为每个类别设置一个表格视图，或者是否可以通过向左滑动或使用图片工具栏中的箭头来使用所需信息更新一个表格视图？使用情节提要->调整表格视图大小并将图像拖入或以编程方式设置它，添加像一张图片（白色环）这样的工具栏的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:59:19.363

**选项 1** -*更新您的 tableView*
您可以更新您的`dataSource`，以便它反映“新”tableView 的状态。比您`reloadSections:withRowAnimation:`使用`UITableViewRowAnimationRight`or调用`UITableViewRowAnimationLeft`，这取决于目前适合的情况。这感觉就像滚动到一个新的 tableView。对于刷卡，您可以使用`UISwipeGestureRecognizer`.

**选项 2** -*使用带有多个 tableViews 的 scrollView*
如果你想让它更容易一点，只需设置三个 tableViews 并将它们扔进一个`UIScrollView`启用分页的地方。

**PageControl**
当然，如果要显示这些点，您需要添加和设置[UIPageControl 。](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageControl_Class/Reference/Reference.html)

**关于 UI：**
您可以在 Storyboard 中设置所有内容。背景、箭头按钮、`UIPageControl`您甚至可以`UISwipeGestureRecognizer`在情节提要中添加。

# java - 逗号分隔的记录到字符串数组？

> ID：13312120
> 
> 赞同：3
> 
> 时间：2012-11-09T16:34:00.890
> 
> 标签：java, arrays, string, split, bufferedreader

我正在尝试读取一个 BufferedReader，它读取包含用逗号分隔的记录的文件。我想在两个逗号之间拆分每个字符串（或记录），去掉双引号，然后将每个字符串放入字符串数组的索引中。例如：

说我在文件中有这一行：

（“0001”、“00203”、“82409”（换行符）

“0002”、“00204”、“82500”（换行符）

ETC。）

我想将 0001 放入字符串数组 [1]，我希望将 00203 放入字符串数组 [2]，依此类推....

以下代码遍历文件，将第二列中的所有记录放入字符串数组[2]。这意味着，在我执行下面的代码后，如果我执行 System.out.println (arr[2])，它将打印 00203 和 00204，而我希望 array[2] 为 00203，array[5] 为00204。

这是我的代码：

```
public String[] getArray(String source) {

FileInputStream fileinput = new FileInputStream(source);
GZIPInputStream gzip = new GZIPInputStream(fileinput);
InputStreamReader inputstream = new InputStreamReader(gzip);
BufferedReader bufr = new BufferedReader(inputstream);

String str = null;
String[] arr = null;
    while((str = bufr.readLine()) != null) {
    arr = str.replace("\"", "").split("\\s*,\\s*");
}
return arr; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:59:32.657

[Commons CSV](http://commons.apache.org/csv)专为您的特定用例而设计。让我们不要重新发明轮子，下面的代码将导致 GZipped CSV 被解析为字段和行，这似乎是您想要做的。

```
public String[][] getInfo() throws IOException {
    final CSVParser parser = new CSVParser(new FileReader(new InputStreamReader(new GZIPInputStream(fileinput)), CSVFormat.DEFAULT.withIgnoreSurroundingSpaces(true));
    String[][] result = parser.nextRecord().values();
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:45:04.490

这些修改中很少有适合您的。

```
public String[] getArray(String source) {

FileInputStream fileinput = new FileInputStream(source);
GZIPInputStream gzip = new GZIPInputStream(fileinput);
InputStreamReader inputstream = new InputStreamReader(gzip);
BufferedReader bufr = new BufferedReader(inputstream);

String str = null;
List<String> numbers = new LinkedList<String>;

while((str = bufr.readLine()) != null) {
   String[] localArr = str.split(",");
   for(String intString : localArr){
    numbers.add(intString.trim());
   }
}
return arr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:41:50.240

您是否尝试过使用扫描仪类以及scanner.nextInt()。你不需要做条带化。

```
Scanner s = new Scanner(inputstream);
ArrayList<String> list = new ArrayList<String>();

while (s.hasNextInt())
    list.add(s.nextInt());
String[] arr = list.toArray(new String[list.size()]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:48:55.733

未测试：

```
arr = str.replaceAll("\"", "").replaceAll("(","").replaceAll(")","").split(","); 
```

# bison - 野牛自动生成的文件中缺少定义

> ID：13312122
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:34:10.483
> 
> 标签：bison

我在现有的 .y 文件中添加了一条新规则。由于我没有更改相应的 .l 文件中的任何内容，因此我仅使用 bison 编译 .y 文件。这是我的步骤：

1.  使用命令编译：`bison -d -l -p"glbSipParserAcceptContact" AcceptContact`. Bison 对其进行编译并生成相应的 .c/.h 文件。
2.  在 Visul Studio 中构建库，它给了我一些未定义标记的错误
3.  将自动生成的 .c/.h 文件与其在存储库中的先前版本进行比较，我发现确实缺少这些定义

我不知道为什么！我的野牛的版本是`1.875`并且存储库文件有版本`1.875b`。这是原因吗？如果是这样，那么我在哪里可以找到 1.875b？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:33:21.327

Bison 1.875 是真正的古老历史。最新版本是 2.6.5，您应该真正更新，至少可以避免与古老的错误作斗争（brr，听起来令人毛骨悚然）。

# mysql - 按 asc 排序未按顺序返回字段

> ID：13312123
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:34:21.310
> 
> 标签：mysql, sql

代码：

```
$SQLString = "SELECT DISTINCT NodeNumber, NodeLocation 
              FROM graphnode 
              ORDER BY NodeNumber ASC" 
```

输出：

```
1000
1001
1002
101
1010 
```

我的一个朋友正面临这个问题，我不知道完整的项目细节。任何想法都可以在这里发生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T16:35:24.490

该列`NodeNumber`似乎是字符串格式，首先将其转换为数字，例如

```
SELECT..
FROM..
WHERE..
ORDER BY CAST(NodeNumber AS SIGNED) ASC 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/45130/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:35:34.090

您的列类型未设置为 Int 等数字格式，它设置为 Varchar 或其他一些字符串格式，您可以进一步转换它并且您不需要提供 ASC，因为默认顺序是 ASC 而不是 DESC。

# reporting-services - SSRS 表达式参考此文本框

> ID：13312124
> 
> 赞同：6
> 
> 时间：2012-11-09T16:34:25.140
> 
> 标签：reporting-services, ssrs-2008

我有一个相当宽的 Tablix，我想为行中的每个文本框添加类似的表达式。例如：

```
TextAlign:
=iif(ReportItems!TextBox1.Value<>0, "Right", "Center") 
```

但我不想在每个文本框中编辑公式。我想说的是：

```
TextAlign:
=iif(Me.Value<>0, "Right", "Center") 
OR
=iif(This.Value<>0, "Right", "Center") 
```

目前对 SQL 2008R2 和 VS2008 使用 SSRS。有没有办法做到这一点，还是我被卡住了？如果我升级到 SQL 2012 和 VS2010，我会得到这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-05T05:50:37.347

MSDN 说`Me.Value`应该可以。请参阅[http://msdn.microsoft.com/en-us/library/dd255285.aspx](http://msdn.microsoft.com/en-us/library/dd255285.aspx)

那里给出的例子是

```
=IIF(Me.Value > 0,"Black","Red") 
```

话虽如此，我刚刚在 BIDS 中尝试了 SSRS 2008 R2，但它不起作用。

> “你调用的对象是空的”。

链接的文档适用于 2012，但将文档版本更改为 2008 或 2008 R2 仍然显示完全相同的页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T17:51:20.983

`Me.Value`过去在 2005 版的 SSRS 中可以正常工作，然后在 2008 版中引入了一个错误。

Robert Bruckner（他写了一本关于 SSRS 的书）表示它已在 2008 R2 版本中修复，但可能不是因为它不适合您。

我已经在 SSRS 2012 中对其进行了测试，但它对我不起作用。

有关更多详细信息，请参阅此对话。[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/98f0e6a0-108c-44bb-8730-5e90cf1fa5a4/mevalue-bug-in-ssrs-2008](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/98f0e6a0-108c-44bb-8730-5e90cf1fa5a4/mevalue-bug-in-ssrs-2008)

Robert Bruckner 建议您在需要修复时直接联系 Microsoft 支持。

# c# - 如何从营业时间时段列表中禁用预订的时段

> ID：13312127
> 
> 赞同：2
> 
> 时间：2012-11-09T16:34:36.087
> 
> 标签：c#, asp.net, duration, appointment, timeslots

朋友们，

我正在工作的预约项目，详情如下： 营业时间从**9:00**到**7:00**，默认时长为**30 分钟**。所以，老虎机开始像 (9:00, 9:30, 10:00.... 7:00)。

在这里，为了显示可用的插槽，我使用了以下逻辑。

1.  **将所有持续时间为30 分钟**的插槽存储在列表 ( **LIST A** ) 中，例如 [9:00, 9:30, 10:00, 10:30, ... 7:00]
2.  遍历已预订的约会（包含**start 和 end time**），如果 start time 与任何**LIST A**元素 I' 匹配，则从该 List 中删除该元素。循环继续。

在这里，问题是，考虑如果预约是**9:30-10:00**。根据我的逻辑，**9** :30与 LIST A 元素匹配，它将从该列表中删除 9:30。

因此，可用插槽将显示为 [9:00, X ,10:00, 10:30, .... 7:00]。实际上应该是 [9:00, 9:30, 10:30, 11:00... 7:00]

而不是显示可用的插槽**9:00-9:30, 10:30-11:00**它显示**9:00-10:00, 10:30-11，**因为 9:30 已从列表中删除。

请帮助解决这个问题，或者建议我解决这个问题的一些替代方法。非常需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:43:48.893

您混淆的是，您将第二个插槽的开始时间作为第一个插槽的结束时间。因此，与其这样做，您可以做的是存储开始时间和持续时间。

为了简单地计算结束时间，您可以

```
StartTime.AddMinutes(30); 
```

并在最后添加一条评论；你正在尝试建立一个非常刚性的结构。如果您尝试扩展应用程序，恕我直言，将会面临问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T07:51:24.240

我建议，不要使用单维数组，而是使用多维数组，例如

```
[[9:00][9:30],[9:30][10:00],[10:00][10:30], .... nth Item] 
```

在这里，逻辑应该是这样的

```
var start=[start time]
var end=[end time]
var duration=[duration]

for (i=start;i<end;i+=duration)
{
   if(start==A[i][0])
   remove(A[i][0]);
}
A.sort();
return A; 
```

# ruby-on-rails - Nginx + Unicorn 不允许上传文件 > 400mb

> ID：13312132
> 
> 赞同：2
> 
> 时间：2012-11-09T16:35:13.050
> 
> 标签：ruby-on-rails, upload, nginx, unicorn

我在 RoR 中有应用程序，我在 apache2 上对其进行测试以上传 > 1 GB 的文件，它正在工作。但我必须使用 nginx。在 nginx 服务器上 100% 上传后出现此错误：

> 2012/11/09 17:17:01 [错误] 1436#0: *12 上游过早关闭连接，同时从上游读取响应标头，客户端：134.19.136.32，服务器：my_domain，请求：“POST /attachments HTTP/1.1” ，上游：“http://unix:/tmp-sock/unicorn.my_domain.sock:/attachments”，主机：“my_domain”，引用者：“http://my_domain/”

我认为问题出在独角兽设置上，但我不知道具体在哪里。顺便说一句：一切都只在 Firefox 中有效。

我的配置文件：

```
#nginx main config
user www-data;
worker_processes 5;
pid /run/nginx.pid;

events {
    worker_connections 768;
    accept_mutex off;
    # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    ##
    # nginx-naxsi config
    ##
    # Uncomment it if you installed nginx-naxsi
    ##

    #include /etc/nginx/naxsi_core.rules;

    ##
    # nginx-passenger config
    ##
    # Uncomment it if you installed nginx-passenger
    ##

    #passenger_root /usr;
    #passenger_ruby /usr/bin/ruby;

    ##
    # Virtual Host Configs
    ##
    output_buffers 1 2m;
    send_timeout 50s;
    client_body_temp_path /citishare/datastore0;
    client_max_body_size 204800m;
    reset_timedout_connection on;

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

* * *

```
#site config
upstream unicorn {
  server unix:/tmp-sock/unicorn.citidrive.sock fail_timeout=10000;
}

server {
  listen 80 default deferred;
  server_name citidrive.citicom.sk;
  root /home/deployer/apps/citidrive/current/public;

  proxy_buffering on;
  proxy_buffer_size 8M;
  proxy_buffers 2048 8M;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  proxy_set_header   X-Accel-Mapping       /home/deployer/apps/citidrive/current/public/system/=/private_files/;
  proxy_set_header   X-Accel-Limit-Rate off;
  location /private_files/ {
          internal;
          alias   /home/deployer/apps/citidrive/current/public/system/;
      }
  try_files $uri/index.html $uri @unicorn;
    location @unicorn {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_pass http://unicorn;
        proxy_read_timeout 500;
      }
  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  proxy_max_temp_file_size 3072m;
  keepalive_timeout 80;
  client_header_timeout 3m;
  client_body_timeout 3m;
  send_timeout 3m;
} 
```

* * *

```
#unicorn.rb
root = "/home/deployer/apps/citidrive/current"
working_directory root
pid "#{root}/tmp/pids/unicorn.pid"
stderr_path "#{root}/log/unicorn.log"
stdout_path "#{root}/log/unicorn.log"

listen "/tmp-sock/unicorn.citidrive.sock"
worker_processes 5
timeout 80 
```

* * *

```
#unicorn_init.sh
#!/bin/sh
### BEGIN INIT INFO
# Provides:          unicorn
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Manage unicorn server
# Description:       Start, stop, restart unicorn server for a specific application.
### END INIT INFO
set -e

# Feel free to change any of the following variables for your app:
TIMEOUT=${TIMEOUT-60}
APP_ROOT=/home/deployer/apps/citidrive/current
PID=$APP_ROOT/tmp/pids/unicorn.pid
CMD="cd $APP_ROOT; bundle exec unicorn -D -c $APP_ROOT/config/unicorn.rb -E production"
AS_USER=deployer
set -u

OLD_PIN="$PID.oldbin"

sig () {
  test -s "$PID" && kill -$1 `cat $PID`
}

oldsig () {
  test -s $OLD_PIN && kill -$1 `cat $OLD_PIN`
}

run () {
  if [ "$(id -un)" = "$AS_USER" ]; then
    eval $1
  else
    su -c "$1" - $AS_USER
  fi
}

case "$1" in
start)
  sig 0 && echo >&2 "Already running" && exit 0
  run "$CMD"
  ;;
stop)
  sig QUIT && exit 0
  echo >&2 "Not running"
  ;;
force-stop)
  sig TERM && exit 0
  echo >&2 "Not running"
  ;;
restart|reload)
  sig HUP && echo reloaded OK && exit 0
  echo >&2 "Couldn't reload, starting '$CMD' instead"
  run "$CMD"
  ;;
upgrade)
  if sig USR2 && sleep 2 && sig 0 && oldsig QUIT
  then
    n=$TIMEOUT
    while test -s $OLD_PIN && test $n -ge 0
    do
      printf '.' && sleep 1 && n=$(( $n - 1 ))
    done
    echo

    if test $n -lt 0 && test -s $OLD_PIN
    then
      echo >&2 "$OLD_PIN still exists after $TIMEOUT seconds"
      exit 1
    fi
    exit 0
  fi
  echo >&2 "Couldn't upgrade, starting '$CMD' instead"
  run "$CMD"
  ;;
reopen-logs)
  sig USR1
  ;;
*)
  echo >&2 "Usage: $0 <start|stop|restart|upgrade|force-stop|reopen-logs>"
  exit 1
  ;;
esac 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-24T13:34:46.380

将大文件直接发送到您的 Rails 应用程序并不是上传大文件的好方法。您可以使用 nginx[上传模块](https://www.nginx.com/resources/wiki/modules/upload/)来处理使用 unicorn+nginx 的大文件上传。这样，nginx 实际上处理文件上传，而不是将整个文件作为多部分形式的数据传递给 rails，而是将由 nginx 上传的本地文件路径发送到独角兽 rails 服务器，rails 所做的就是将文件从操作系统的 tmp 路径到您定义的路径。[在这里](https://github.com/arefaslani/dx/blob/develop/config/nginx.conf#L27-L38)，我配置了 nginx 和 rails 以使用 nginx 上传模块进行上传作业。现在有更好的处理上传的解决方案，例如[TUS](http://tus.io/)协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T19:23:52.283

`keepalive_timeout`我通过增加Nginx 配置解决了这个问题。也许这不是一个合适的解决方案，或者您可以根据位置和请求类型增加它。对于 Firefox 部分，Firefox 等待响应的时间比 Chrome 长。

# spring-mvc - 从 spring mvc 控制器方法返回 null

> ID：13312137
> 
> 赞同：4
> 
> 时间：2012-11-09T16:35:23.640
> 
> 标签：spring-mvc, controller, return-value

我已阅读 Spring 文档，但无法找到有关返回 null （返回类型为 String）**的 Spring MVC 控制器方法的预期行为的相关信息。**

有人可以回复或指导我查阅相关文件吗？或者换句话说，从 Spring MVC 控制器方法返回 null 有什么好处？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:57:43.313

在 Spring 2 中，当您从控制器返回 null 时，您是在对 Spring 调度程序说您不希望它搜索视图。

如果您通过直接编写响应内容然后刷新输出流来自己处理响应（例如，您正在管理文件下载），那么您可以这样做。

如果您没有返回 null，那么 Spring 会转发到一个视图，该视图也会尝试写入响应，从而弄乱您已经写入的数据，或者如果响应已经提交，则会导致异常。

返回 null 是回避 Spring 的视图解析器的一种方式。

在 Spring 3 中发生了很多变化，现在可以通过使用返回 void 的 @RequestMapping 注释方法来获得相同的结果。

如果您的返回类型为 String 但您返回 null 我认为它使用默认的 RequestToViewNameTranslator 在未显式提供视图名称时将传入的 HttpServletRequest 转换为逻辑视图名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:12:02.587

spring mvc 中的返回类型 String 一般返回你的视图解析器，它可以是你的 JSP、html 或任何其他视图页面。

[http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/)

假设你想返回一个像“hi”这样的普通字符串，你可以使用@ResponseBody 注解来做到这一点。

# python - OpenCV 和 python/virtualenv？

> ID：13312139
> 
> 赞同：13
> 
> 时间：2012-11-09T16:35:36.887
> 
> 标签：python, linux, opencv, virtualenv

我正在开发一个使用 OpenCV (2.3.1) 以及其他库的 python 项目。到目前为止，我只是 apt-get 安装了所有东西，但现在我想与可能尚未安装所有东西的人分享我的代码。所以，virtualenv 似乎是完美的解决方案，但我明白了。

```
$ python src/importcv.py # does nothing but import cv, no problems
$ virtualenv .           # create virtualenv here
$ source bin/activate    # activates this virtualenv
(p)$ python src/importcv.py
Traceback (most recent call last):
  File "src/test.py", line 1, in <module>
    import cv
ImportError: No module named cv 
```

我如何设置 virtualenv 有什么问题，还是我必须做一些其他步骤才能看到我的 opencv python 绑定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T16:42:56.700

Virtualenv 创建了一个单独的 python 环境。您将需要重新安装所有依赖项。编辑这是真的 pip 似乎不能很好地与 opencv 一起使用。可以通过将 cv 共享对象复制到您的 virtualenv 来解决缺少的模块错误。下面链接的问题中的更多信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-06T20:05:43.273

我在我的项目中使用 makefile 在 Python virtualenv 中安装 OpenCV。下面是样板示例。它要求您已经为您的系统 Python ( `/usr/bin/python`) 提供了 OpenCV 绑定，您可以使用类似`yum install opencv-python`或`apt-get install python-opencv`.

首先查询系统 Python 的`cv2`模块并检索已安装库文件的位置。然后它复制`cv2.so`到 virtualenv 目录中。

```
VENV_LIB = venv/lib/python2.7
VENV_CV2 = $(VENV_LIB)/cv2.so

# Find cv2 library for the global Python installation.
GLOBAL_CV2 := $(shell /usr/bin/python -c 'import cv2, inspect; print(inspect.getfile(cv2))')

# Link global cv2 library file inside the virtual environment.
$(VENV_CV2): $(GLOBAL_CV2) venv
    cp $(GLOBAL_CV2) $@

venv: requirements.txt
    test -d venv || virtualenv venv
    . venv/bin/activate && pip install -r requirements.txt

test: $(VENV_CV2)
    . venv/bin/activate && python -c 'import cv2; print(cv2)'

clean:
    rm -rf venv 
```

（您可以将上面的代码片段复制粘贴到 Makefile 中，但请确保通过运行`sed -i s:' ':'\t':g Makefile`或类似方法将缩进替换为制表符。）

现在您可以运行模板：

```
echo "numpy==1.9.1" > requirements.txt
make
make test 
```

请注意，我们实际上不是复制符号链接，而是复制 .so 文件以避免此处指出的问题：[https ://stackoverflow.com/a/19138136/1510289](https://stackoverflow.com/a/19138136/1510289)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-07-09T11:02:21.413

只需将`cv2*.so`文件复制到虚拟环境的 site-packages 文件夹即可。例如：

```
cp /usr/lib/python3.6/dist-packages/cv2.cpython-36m-aarch64-linux-gnu.so ~/your_virt_env_folder/YOUR_VIRT_ENV_NAME/lib/python3.6/site-packages/ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-15T02:23:05.163

如果您想要一个更便携的解决方案（没有硬编码路径，没有`awk`输出字符串），您可以使用以下 shell 片段（在激活 之后`venv`）：

```
echo "Importing opencv library from host into venv..."
# Find cv2 library for the global Python installation.
GLOBAL_CV2=$(/usr/bin/python3 -c 'import cv2; print(cv2.__file__)')
# Find site-packages directory in the venv
VENV_SITEPACKAGES_DIR=$(python3 -c 'import site; print(site.getsitepackages()[0])')
# Copy host-installed library file into venv
cp ${GLOBAL_CV2} ${VENV_SITEPACKAGES_DIR} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-04-14T08:54:46.433

尝试安装`opencv-python`在你`venv`的内部，上面应该可以工作：

`pip install opencv-python`

# r - 向 R 添加自定义颜色：颜色配置文件在哪里？

> ID：13312140
> 
> 赞同：1
> 
> 时间：2012-11-09T16:35:40.693
> 
> 标签：r, colors

我有几种颜色（rgb/hex 代码），我希望它们可以作为默认值使用。我希望颜色在启动时可用，而无需运行任何脚本。换句话说，我想运行命令 colors() 并让我的自定义颜色显示在列表中。

我怀疑这个列表是从 R 树中的某个文件或其他地方的其他配置文件中填充的。具体来说：

*   R 从哪个文件中提取颜色定义？

相关数据：

```
> version
               _                            
platform       x86_64-apple-darwin9.8.0     
arch           x86_64                       
os             darwin9.8.0                  
system         x86_64, darwin9.8.0          
status                                      
major          2                            
minor          15.1                         
year           2012                         
month          06                           
day            22                           
svn rev        59600                        
language       R                            
version.string R version 2.15.1 (2012-06-22)
nickname       Roasted Marshmallows 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:49:53.463

您可以（如果您真的想要）将默认调色板更改为您自己的颜色。例如，

```
(palette(c("yellow", "orange")))
plot(1:10, col=1:10) 
```

除了提供命名颜色，您还可以使用该`rgb`函数指定 rgb 颜色。您可以将此命令添加到您的`.Rprofile`，以便在启动时可用。

但是，更好的主意是定义自己的调色板：

```
#Put this in your .Rprofile
mycols = adjustcolor(palette(), alpha.f = 0.3)
palette(mycols) 
```

这样你就不会覆盖默认值。参见`?palette`其他示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:28:41.640

直接回答您的项目符号问题：R 的颜色数据库存储在[“colors.c”源文件](https://github.com/wch/r-source/blob/trunk/src/main/colors.c#L277)中。

因为`colors()`etc. 访问该数据库的编译版本，所以如果不编辑源代码然后重新编译 R，就无法添加到命名颜色。

以下是定义 ColorDataBase 的前几行`$R_SOURCE_HOME/src/main/colors.c`：

```
static ColorDataBaseEntry ColorDataBase[] = {
    /* name rgb code -- filled in by InitColors() */
    {"white",   "#FFFFFF",  0},
    {"aliceblue",   "#F0F8FF",  0},
    {"antiquewhite",    "#FAEBD7",  0},
    {"antiquewhite1",   "#FFEFDB",  0},
    {"antiquewhite2",   "#EEDFCC",  0}, 
```

# android - Android：是否可以在包含滚动视图的布局中强制没有屏幕溢出？

> ID：13312146
> 
> 赞同：1
> 
> 时间：2012-11-09T16:36:00.323
> 
> 标签：android, layout, scrollview

我有一个简单的问题要问您：是否可以在包含 a 的布局中强制没有屏幕溢出`ScrollView`？

例如，如果我有以下布局：

```
<LinearLayout
    android:id="@+id/wrapper_table"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">     
    </LinearLayout>

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </TableLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">     
    </LinearLayout>

</LinearLayout> 
```

如果 The`TableLayout`有很多`TableRow`，则将`Scrollview`扩大到屏幕的末尾，并且下部`LinearLayout`不再可见。是否可以在没有设置高度的情况下强制`ScrollView`高度以让足够的空间显示较低的`LinearLayout`？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:39:01.117

是的，在您的外部线性布局中，为每个元素设置“android:layout_weight”，并让外层指定一个“weightSum”

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/wrapper_table"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="0.1">     
    </LinearLayout>

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="0.8">

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        </TableLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="0.1">     
    </LinearLayout>

</LinearLayout> 
```

“weightSum”和“layout_weight”指定应该使用多少屏幕的比例。在我的示例中，底部和顶部各占屏幕的 10%，留下 80% 作为中间滚动视图（由 tableview 填充）

现在，我相信您还需要将高度更改为“match_parent”，因为您希望它占据所有 80% 的屏幕...仔细检查...

您必须更改的另一件事（取决于您的 SDK 和编辑器版本）是每个内部元素的“layout_height”为“0dip”，否则此机制可能不起作用或您收到错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:42:55.000

将 an`android:layout_weight`应用于`ScrollView`; 这样，它将占用其他元素未占用的任何空间。

在下面的调整中，两个`LinearLayout`s 将占用足够的空间来容纳它们的内容，而 s 将占用`ScrollView`剩下的空间：

```
<LinearLayout
    android:id="@+id/wrapper_table"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="match_parent">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">    
    </LinearLayout>

    <!-- This should be weighted height -->
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="1">

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </TableLayout>
    </ScrollView>

    <!-- This should be wrap_content height -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">    
    </LinearLayout>

</LinearLayout> 
```

# c - 根据进程组限制对文件的访问

> ID：13312148
> 
> 赞同：2
> 
> 时间：2012-11-09T16:36:15.387
> 
> 标签：c, linux, permissions, kernel

我有一个假设性问题。假设我有一个文件，我只希望某些进程能够读取和修改。我将如何实施呢？

目前，经过一些思考，最好的方法似乎是基于限制对进程组的访问。就像在 *nix 中一样，如何更改文件的权限以向某个组中的用户授予 rwx 访问权限是否可以仅将文件的 rwx 访问权限授予属于某个进程组的进程？我的方法在这里有效还是有更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:41:30.757

文件权限存在于您所说的三个级别上。所有者 -> 所有者组 -> 全部。但是，当一个进程运行时，它会在某个用户（启动它的用户）的权限下运行并继承这些权限。我会假设您想要创建一个唯一的用户组，在该权限下运行进程并限制文件仅对该组的访问。

为什么你不能使用这样的方法会有限制吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:27:09.580

如果我理解正确，您想根据进程组锁定文件以进行写入，在这种情况下，您可以结合 fcntl 和 gpgrp

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <fcntl.h>
#include <unistd.h>

#define ALLOWED_GROUP 500

int main(int argc, char *argv[])
{
    struct flock fl = {F_WRLCK, SEEK_SET, 0, 0, 0};
    int fd;

    fl.l_pid = getpid();

    if (argc > 1 || getpgrp() != ALLOWED_GROUP) 
        fl.l_type = F_RDLCK;

    if ((fd = open("demo.c", O_RDWR)) == -1) {
        perror("open");
        exit(1);
    }

    printf("Press <RETURN> to try to get lock: ");
    getchar();
    printf("Trying to get lock...");

    if (fcntl(fd, F_SETLKW, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }

    printf("got lock\n");
    printf("Press <RETURN> to release lock: ");
    getchar();

    fl.l_type = F_UNLCK;

    if (fcntl(fd, F_SETLK, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }

    printf("Unlocked.\n");

    close(fd);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:55:56.563

您也可能对[访问控制列表感兴趣](http://users.suse.com/~agruen/acl/linux-acls/online/)

^(就个人而言，我从未使用过它们，因为我不需要对访问进行如此精细的控制)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T17:24:13.300

您不能这样做，但您可以通过以下步骤实现此效果：

首先创建一个新组，使其成为文件的所有者并设置权限以排除组外的访问。

然后将该组设为可执行文件的所有者并设置其 setgid 位。

运行时，可执行文件（及其子进程）将具有组的 ID，因此可以访问文件。

有关详细信息，请参见 CHMOD(1)。

此设置通常用于为游戏提供对乐谱文件的独占访问权限，以防止外部篡改。查看您的 /usr/games，您可能会找到一些 setgid 可执行文件的示例。

# ruby - 无法使用 RVM 安装 ruby 1.9.3。似乎是某种类型的 git 错误

> ID：13312150
> 
> 赞同：1
> 
> 时间：2012-11-09T16:36:21.920
> 
> 标签：ruby, macos, rvm

当我执行`rvm install ruby-1.9.3-head`我得到这个错误：

```
➜  ~  rvm install ruby-1.9.3-head
Installing Ruby from source to: /Users/max/.rvm/rubies/ruby-1.9.3-head, this may take a while depending on your cpu(s)...
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git
Branch origin/ruby_1_9_3 not found.
There has been an error while checking out branch ruby_1_9_3\.  
Halting the installation.
There has been an error fetching the ruby interpreter. Halting the installation.

ruby-1.9.3-head is not installed.
To install do: 'rvm install ruby-1.9.3-head' 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T11:24:33.420

我遇到了类似的问题，似乎某些存储库数据已过时/损坏。

`➜ rvm cleanup repos`解决了这个问题并解决了我的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:56:42.443

尝试做`rvm get stable`或`rvm get head`先。您可能拥有过时的 RVM 版本。

# assembly - intel 8086 处理器标志寄存器中保留位和未定义位之间的区别

> ID：13312152
> 
> 赞同：2
> 
> 时间：2012-11-09T16:36:23.700
> 
> 标签：assembly, intel, x86-16

在英特尔 8086 处理器的 16 位标志寄存器中，有 9 个标志（每个 1 位，位编号 0、2、4、6、7、8、9、10、11，我们将它们称为 ZF、OF、 ...) 位号 1、3、5 标记为“U”（未定义），位号 12、13、14、15 标记为“R”（保留）。

我的问题是intel 8086 处理器中的**保留**位和**未定义**位有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:40:48.050

保留几乎总是意味着“保留以供将来使用”，以允许英特尔在以后的 CPU 中添加扩展。

没有一个标志是“未定义的” - 它们都是已定义或保留的。您可能看到的是一个表格，描述了每条指令如何影响不同的标志，其中特定指令对特定标志的影响可能是未定义的（即使该特定标志不是未定义的标志）。这方面的一个例子是 IDIV 指令，它使大多数已定义的标志（溢出、进位等）处于未定义状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:44:37.600

可以定义保留位。未定义的位永远不会。如果某个位是“保留的”，则它是为某些特定目的而保留的。如果它是“未定义的”，那么那时就没有决定它的目的。

例如，如果某个位设置了用户永远不应启用的特定测试模式，则该位将被保留但不会未定义。

# asp.net-mvc - MVC4将复杂对象从视图传递到控制器，新视图未呈现

> ID：13312156
> 
> 赞同：5
> 
> 时间：2012-11-09T16:36:33.607
> 
> 标签：asp.net-mvc

我对 MVC 非常陌生，并且在尝试将现有站点移植到 MVC4 时遇到了这个问题。

我们使用的模型中大部分数据由服务调用填充，因此显然我们希望将调用保持在最低限度。问题是当我尝试将模型传回控制器时，模型中的复杂对象总是变为空。我已经能够使用 ajax 将数据保存到控制器的回调中；但是，我需要该操作来返回一个新视图，并且在操作完成后，该视图的代码将执行，但没有重定向（我相信这是 ajax 的重点，我认为我要的是一个以相同方式保留数据但实际上重定向的解决方案）。

这是我的模型：

```
public class DistributionModel
{
    public string typeOfDistribution { get; set; }
    public Document document { get; set; }
    public string thumbnailUrl { get; set; }
    public MergeFieldModel mergeFields { get; set; }
}

public class MergeFieldModel
{
    public MergeFields documentMergeFields { get; set; }
} 
```

这是我正在使用的控制器操作：

```
 public ActionResult Index(DistributionModel distributionModel)
    {
        distributionModel.mergeFields = new MergeFieldModel() { documentMergeFields = MergeFieldsHelper.GetDocumentMergeFields(distributionModel.document.Id) };
        return View("Index", distributionModel);
    } 
```

我尝试使用 href=@Url.Action("Index", Model) 而不是下面块中的按钮来调用控制器并执行重定向（重定向本身确实有效，但随后我不得不在其中执行另一个服务调用控制器从调用视图中检索与我正在使用的文档相同的文档），因为模型中的 Document 对象一直以 NULL 的形式返回给控制器。

这是调用控制器并实际返回完整模型的视图部分：我认为我正在寻找的是一种无需 ajax 即可完成此任务的方法，以便我可以重定向到 Distribution/Index 页面（这是从 Distribution/DocumentDetails 页面触发）

```
 <button id="EmailDistribution" data-corners="false" data-theme="a">EMAIL</button>

         $('#EmailDistribution').click(function () {
              var model = @Html.Raw(Json.Encode(Model));
              $.ajax({
              url: '@Url.Action("Index", "Distribution")',
              type: 'POST',
              contentType: 'application/json; charset=utf-8',
              data: JSON.stringify(model),     
              processData: false,                 
              });                
         }); 
```

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T19:43:40.180

我不确定我是否完全理解了您的问题，但我可以告诉您，您需要将模型的每个值放在一个表单中，该表单发布到您**不**希望为空的控制器操作。

这*正是*您在 ajax 调用中所做的：您当前将整个模型转换为 json 并使用 jQuery 功能再次转换它以发布数据。假设您有以下模型，例如：

```
public class TestModel {
    public string A { get; set; }
    public string B { get; set; }
} 
```

您的 javascript 代码将创建一个类似于`{ A: 'Value for a', B: 'Value for B' }`将使用 jQuery 将其转换为 HTTP POST 请求的字符串：

```
POST /Controller/Index HTTP/1.1
Host: demo.loc
User-Agent: Mozilla/5.0 whatever
Content-Type: application/x-www-form-urlencoded; charset=utf-8

A=Value+for+a&B=Value+for+B 
```

结果，您的`Index`操作将被调用，并将`DefaultModelBinder`值绑定到您的模型属性。这适用于像整数这样的原始类型以及像集合这样的复杂类型。`DefaultModelBinder`处理这些类型的转换。

让我们看一个更复杂的模型：

```
public class ComplexSubModel {
    public ICollection<string> StringList { get; set; }
}

public class ComplexModel {
    public ComplexSubModel SubModel { get; set; }
} 
```

`DefaultModelBinder`还能够绑定以下模型：

```
POST /Controller/Index HTTP/1.1
Host: demo.loc
User-Agent: Mozilla/5.0 whatever
Content-Type: application/x-www-form-urlencoded; charset=utf-8

ComplexModel.SubModel.StringList[0]=First+entry&ComplexModel.SubModel.StringList[1]=Second+entry&ComplexModel.SubModel.StringList[2]=Third+entry 
```

这将导致 的新实例，`ComplexModel`其`SubModel`属性设置为 的新实例，`ComplexSubModel`其属性`StringList`设置为`System.Collection.Generic.List<string>`包含三个字符串`First entry`和`Second entry`的新实例`Third entry`。

现在您要做的就是将模型属性渲染到隐藏字段，例如，以便它们包含在回发中：

```
@using (Html.BeginForm()) {
    @Html.HiddenFor(m => m.SubModel.StringList[0])
    @Html.HiddenFor(m => m.SubModel.StringList[1])
    @Html.HiddenFor(m => m.SubModel.StringList[2])
} 
```

回发中包含的每个属性都不会为空**，但**可能是用户伪造的，因为*假设*它们在隐藏字段中呈现，它们很容易重新传输到服务器。事实上，您无法确定重新传输的值是您之前通过服务调用获取的值。

另一种可能性是将服务调用的结果保存在`TempData`-dictionary 中，该字典实际上将值存储在用户会话中，并在它们在回发操作中重新读取时立即销毁它们，或者直接将值存储在会议：

```
public ActionResult Index() {
    // Do service calls

    #region Variant a
    TempData["ServiceResultA"] = foo;
    TempData["ServiceResultB"] = bar;
    #endregion

    #region Variant b
    Session["ServiceResultA"] = foo;
    Session["ServiceResultB"] = bar;
    #endregion

    var model = new DistributionModel();
    // Set properties and stuff

    return View("Index", model);
}

[HttpPost]
public ActionResult Index(DistributionModel model) {
    // Read "cached" service calls

    #region Variant a
    var foo = (TResultA)TempData["ServiceResultA"];
    var bar = (TResultB)TempData["ServiceResultB"];
    #endregion

    #region Variant b
    var foo = (TResultA)Session["ServiceResultA"];
    var bar = (TResultB)Session["ServiceResultB"];
    #endregion

    // Do stuff

    return RedirectToAction(...);
} 
```

这两种变体都有优缺点，例如在一个浏览器会话中浏览两个选项卡时它们可能会出现问题，或者当您使用会话状态服务器时需要对类进行可序列化。然而，程序总是一样的：你要么必须

*   每次需要时从服务中获取数据（这很昂贵）或
*   将它们保存在服务器上的任何位置（TempData、Session 和其他东西）或其他
*   用表单提交它们（可以由用户伪造，并不总是那么容易）。

选择你的毒药。;-)

# django - Django - 请求类型

> ID：13312157
> 
> 赞同：-3
> 
> 时间：2012-11-09T16:36:37.687
> 
> 标签：django

我对这种行为感到困惑。该代码仅打印请求的类型。第一种方法有效，但第二种方法返回一个空字符串。类的类型是 django.corehandlers.wsgi.WSGIRequest。

* * *

（编辑澄清）

```
def someview(request):                                                                                                                                        
    html+="<p>type of the request each char "                                                                                                                 
    for i in range(47):                                                                                                                                       
        html+= (str(type(request))[i])                                                                                                                        
    html+="</p>"                                                                                                                                              

    html+="<p>type of the request each char "                                                                                                                 
    for i in range(47):                                                                                                                                       
        html+= repr(str(type(request))[i])                                                                                                                    
    html+="</p>"                                                                                                                                              

    return HttpResponse(html) 
```

结果如下。第二个字符串为空。

```
type of the request each char '<''c''l''a''s''s'' '"'"'d''j''a''n''g''o''.''c''o''r''e''.''h''a''n''d''l''e''r''s''.''w''s''g''i''.''W''S''G''I''R''e''q''u''e''s''t'"'"'>'

type of the request: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T11:15:39.910

所以你的问题是为什么第二行没有打印任何东西？答案是您需要`repr()`，而不是`str()`。

但是，您意识到它*始终*是相同的 WSGIRequest，对吗？您正在打印对象*类*的表示。`request`

你可能想要[`request.METHOD`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.method).

# angularjs - 在服务中自定义 Angularjs $resource 默认参数

> ID：13312162
> 
> 赞同：8
> 
> 时间：2012-11-09T16:37:18.440
> 
> 标签：angularjs

假设我有

```
 angular.module('clientApp').factory('CreditCardResource', function($resource) {
   return $resource('/user/:userId/card/:cardId',
    {cardId:'@id'}, {
     charge: {method:'POST', params:{charge:true}}
    });
 }); 
```

我希望能够将 CreditCardResource 关联到某个 userId，这样每次我调用 CreditCardResource.query() 时，都会获得与该用户相关的卡。我不想每次都调用 CreditCardResource.query({userId : 123})。我希望资源作为服务保留。

我想做类似的事情：`CreditCardResource.defaultParams.userId = '123'`在我的控制器中。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T14:52:38.553

从 1.1.2 版本开始支持动态默认参数

[https://github.com/angular/angular.js/commit/cc42c99bec6a03d6c41b8e1d29ba2b1f5c16b87d](https://github.com/angular/angular.js/commit/cc42c99bec6a03d6c41b8e1d29ba2b1f5c16b87d)

基本上，而不是：

```
params: {
    apiKey: user.getApiKey()
} 
```

你用：

```
params: {
    apiKey: function() {
        return user.getApiKey();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T23:59:19.277

Angular Resource`Resource.bind()`为这种确切情况提供了一种方法（我在 v1.0.3 上）。

在您的情况下，您的代码应该是：

```
var BoundCreditCard = CreditCard.bind({userId: '123'});

// Performs a GET on /user/123/card/456
var card = BoundCreditCard.get({cardId: "456"}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-15T13:34:08.597

```
angular.module('clientApp')
.factory('User', ['$resource', 'UserCard',
    function ($resource, UserCard) {
        var User = $resource(
            "user/:id",
            {id: "@id" },
            {
                'save': {method: 'PUT'},
                'add': {method: 'POST'}
            }
        );
        User.prototype.getCards = function (params, callback) {
            UserCard.prototype.userId = this.id;
            params.userId = this.id;
            return UserCard.query(params, callback);
        };
        return User;
    }])
.factory('UserCard', ['$resource',
    function ($resource) {
        return $resource(
            "user/:userId/card/:id",
            {userId: '@userId', id: "@id" },
            {
                'save': {method: 'PUT'},
                'add': {method: 'POST'}
            }
        );
    }])
.controller('TestCtrl', ['User',
    function (User) {
        // GET user/123
        var user = User.get({id: 123}, function () {
            // GET user/123/card/321
            var card = user.getCard({id: 321}, function () {
                card.someAttribute = 'Some value';
                // PUT user/123/card/321
                card.$save();
            });
        });
    }])
; 
```

检查我的代码。这样我就得到了已经与用户关联的卡片，因此 card.$save() 或 card.$query() 不需要传递 userId 或 at 参数，也不需要传递 card 的属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T21:58:02.387

您也许可以装饰您的 $resource.query() 实例？这是一个通用的、非角度的例子，但希望能说明问题。在您的情况下，“someObj”将是 $resource，您的控制器可以设置“defaultValue”的值。

```
 var proxiedFn, someObj;

  someObj = {
    someFn: function(valueA, valueB) {
      console.log("Called with " + valueA + " and " + valueB);
    }
  };

  someObj.someFn('foo', 'bar'); /* before the proxy */
  proxiedFn = someObj.someFn;

  someObj.someFn = function(valueB) {
    return proxiedFn(this.defaultValue, valueB);
  };

  someObj.defaultValue = 'boz';
  someObj.someFn('bar'); /* after the proxy with default value */ 
```

# android - Android 版 Facebook SSO 我可以一次请求登录和许可吗

> ID：13312163
> 
> 赞同：0
> 
> 时间：2012-11-09T16:37:21.030
> 
> 标签：android, facebook-android-sdk

基本上我在我的 android 游戏上设置了一个按钮，当用户获得高分时，他可以在他的时间线中的 facebook 上分享它

我已经为此使用了 facebook sdk，基于 hellofacebook 示例，但是更新状态不是时间轴的帖子，权限是相同的，“publish_actions”我的问题是，用户第一次使用共享按钮，我显示 facebook LoginButton，单击时它重定向到用户必须接受该应用程序才能使用他的帐户的 fb 页面，然后返回我的活动，现在共享按钮被激活，但是当我单击共享时，它去了再次到同一页面询问用户发布的自动化，只有在那之后我的应用才能最终在用户时间轴上发布

现在我明白为什么会发生这种情况，因为我第一次请求读取会话时没有“publish_actions”权限，第二次请求权限时，我尝试在第一次请求时设置权限，我出现错误，因为我无法在读取会话中请求发布权限。在第一次阅读之前，我不能要求 opentoPublish。

有没有一种简单的方法可以在 1 次中获得具有发布权限的会话？

或者更好的是，在不征求用户许可的情况下，通过 sso 自行登录，并具有发布许可，这样用户只能看到共享按钮，它只是在他的时间轴中共享我的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:08:13.150

使用新的 SDK，您需要与读取权限分开请求写入权限（例如“publish_actions”）。无法同时请求两种类型的权限。

建议的最佳做法是在用户首次使用您的应用程序时使用您的读取权限对用户进行身份验证，当用户获得高分时，提供一个共享按钮，该按钮将再次对用户进行身份验证，但这次具有写入权限。这只需要做一次，所以当他们想再次分享他们的高分时，他们不需要通过身份验证对话框。

# .net - 为什么计时器（system.windows.forms.timer）不会启动？

> ID：13312164
> 
> 赞同：0
> 
> 时间：2012-11-09T16:37:27.327
> 
> 标签：.net, winforms, timer, delphi-prism, oxygene

在用户定义的类中，我有一个计时器，但它不会在我启动时启动`Timer.Enabled.`

用户定义的类：

```
 TSerialIndicator = public class
  private
    method TxTimerEvent(Sender:System.Object; e:System.EventArgs);
  public    
    Txlight:Label;
    Txtimer:System.Windows.Forms.Timer;
    constructor(mform:Form);
    method Transmit;
    method Receive;
  end; 
```

这是构造函数：

```
constructor TSerialIndicator(mform:Form);
begin
    TxLight := new Label;

    TxLight.AutoSize := false;

    TxLight.BorderStyle := BorderStyle.FixedSingle;

    TxLight.Location := new point(52,163);

    TxLight.Width := 20;
    TxLight.Height := 20;

    mform.Controls.Add(TxLight);

    TxTimer := new System.Windows.Forms.Timer;
    TxTimer.Interval:=1;

    TxTimer.Enabled:=false;
    TxTimer.Tick += new System.EventHandler(@TxTimerEvent);

    TxLight.BackColor := Color.Black;
end; 
```

这是定义的传输方法：

```
method TSerialIndicator.Transmit;
begin
  TxLight.BackColor := Color.Red;

  if TxTimer.Enabled = false then
     TxTimer.Enabled:=true;
end; 
```

这是定义的 TxTimerEvent：

```
method TSerialIndicator.TxTimerEvent(Sender:System.Object; e:System.EventArgs);
begin
    TxLight.BackColor := Color.Black;
    TxTimer.Enabled:=false;
end; 
```

以下是它的创建和使用方式：

```
Slight := new TSerialIndicator(self);
Slight.Transmit; 
```

当我从程序的其他部分调用 Transmit 时，它会做它的事情，但 TxTimerEvent 永远不会触发。我什至尝试过启动/停止它的方法。它仍然没有执行它的 Tick 事件。但是，我确实注意到，当我在构造函数中启用计时器时，它确实会触发一次 TxTimerEvent。

我究竟做错了什么？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:54:05.777

对于像“Transmit”和“Receive”这样的方法名称，很可能涉及到一个线程。就像运行 SerialPort 的 DataReceived 事件的线程池线程一样。或者由于 System.Timers.Timer 的 Elapsed 事件而运行的代码。等等。

在这样的工作线程中将 System.Windows.Forms.Timer 的 Enabled 属性设置为 true 是行不通的，它不是线程安全的类。它做它通常做的事，创建一个隐藏窗口，使用 Windows 的 SetTimer() 方法来触发 Tick 事件。但是该窗口是在不发送消息循环的线程上创建的。因此 Windows 不会生成 WM_TIMER 消息。

根据需要使用 Control.Begin/Invoke() 以确保与计时器或控件相关的任何代码在 UI 线程上运行。

# iphone - 如何使用 FB SDK 3.1 和 iOS<6 预览 facebook 状态更新？

> ID：13312169
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:37:47.473
> 
> 标签：iphone, objective-c, facebook-ios-sdk

我使用 FBRequestConnection 在我的 iphone 应用程序中实现了 fb 状态更新。我想向用户展示将在他们的墙上发布的内容。如我所见，它只能在 FBNativeDialogs 的帮助下在 iOS6 中完成。

iOS5 怎么做？

在 iOS5 中的 alertdialog 之后（没有帖子预览）和 iOS6 中的 FBNativeDialogs 发布它是一个好习惯吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T14:11:08.690

您应该按照本指南使用新的 Facebook SDK： [https ://developers.facebook.com/docs/tutorials/ios-sdk-games/feed/](https://developers.facebook.com/docs/tutorials/ios-sdk-games/feed/)

演示如何在 iOS6 和 iOS 5 中执行此操作。

# spring-roo - 删除默认的 WEB-INF/views/

> ID：13312174
> 
> 赞同：3
> 
> 时间：2012-11-09T16:38:07.177
> 
> 标签：spring-roo

如何删除默认的 jspx Spring Roo WEB-INF/views/. 我有自己的控制器。如果我只是部署战争文件并删除 WEB-INF/views/ 应用程序将失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:49:55.310

它可能会失败，因为 spring config ( `src/main/webapp/WEB-INF/spring/webmvc-config.xml`) 指的是视图文件夹：

```
 <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
      <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    </bean>

    <bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
    <property name="definitions">
      <list>
        <value>/WEB-INF/layouts/layouts.xml</value>
        <!-- Scan views directory for Tiles configurations -->
        <value>/WEB-INF/views/**/views.xml</value>
      </list>
    </property>
  </bean> 
```

如果您不使用瓷砖，您可以尝试删除上述定义。

# android - 保留 Facebook 好友列表的本地副本

> ID：13312180
> 
> 赞同：1
> 
> 时间：2012-11-09T16:38:18.857
> 
> 标签：android, facebook-graph-api

我创建了一个应用程序，它从 Facebook 帐户获取朋友列表，然后将朋友数据的部分记录（只是名称和 uid）存储在 SQLite 数据库中。

我不确定这在多大程度上可能是关于隐私等的任何问题。

这甚至会违反 Facebook 规则吗？

不要故意粗鲁或任何事情，但请不要回答诸如“您到底为什么要保留本地朋友列表”之类的答案。只是假设有一个很好的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:27:45.473

我收回它，SharedPreferences 可能不会更好。内部文件存储可能是您想要的。它应该比 SQLite DB 快得多。当您的应用程序被卸载时，它也会被删除

您要做的是，假设您同时拥有 Facebook 好友列表，将其保存到 HashMap，然后使用内部文件存储保存该哈希图。

看到这里写得很好的工作代码：

[Android - 具有可序列化对象的 SharedPreferences](https://stackoverflow.com/questions/5816695/android-sharedpreferences-with-serializable-object)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T20:22:04.660

根据我们的[Facebook 平台政策](https://developers.facebook.com/policy/)第 II 部分中的此部分：

> 您可以缓存通过使用 Facebook API 接收到的数据，以改善您的应用程序的用户体验，但您应该尽量使数据保持最新。此许可不授予您对此类数据的任何权利。

IANAL，但我对此的解释似乎是您可以缓存数据但您无权以持久方式存储数据。

另一个需要考虑的问题是如何保持与用户实际好友列表的一致性。如果您确实存储了数据，然后用户添加了 5 个朋友但删除了他的 3 个老朋友，您将如何更新本地数据库中的数据并保持数据新鲜？您将不得不从 Facebook 中提取用户的朋友列表，如果您每次都必须获取它，这会破坏存储它的全部意义（但由于您没有说明这样做的目的，我假设您有一个存储这个而不是每次都获取的充分理由）。

# xaml - wp7中交替图像的计时器

> ID：13312181
> 
> 赞同：0
> 
> 时间：2012-11-09T16:38:20.060
> 
> 标签：xaml, windows-phone-7.1, windows-phone

在我的 xaml 文件中，我有两个图像：

```
<Grid x:Name="ImageGrid" >
  <Image  Source="Images/FlightSearchImg.png"></Image>
</Grid>
<Grid x:Name="ParisLive">
  <Image Source="Images/ServiceTileImg.png"></Image>
</Grid> 
```

我需要使用计时器来交替图像的可见性。如何显示 image1 和隐藏 image2 5 秒，然后交替显示 image2 和隐藏 image1 5 秒？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:37:55.463

只需创建一个计时器，当它达到 5000 毫秒时切换图像和。

设置变量...

```
// Timer Stuff
    static Boolean stopped = true;
    static long dd = 0, hh = 0, mm = 0, ss = 0, ms = 0, gtdd = 0, gthh = 0, gtmm = 0, gtss = 0;
    static Stopwatch stopwatch = new Stopwatch();
    Timer timer;
    bool ShowImage1 = true; 
```

准备好后启动计时器。注意我们接下来要添加的 updateDisplay 函数。

```
stopwatch.Start();
timer = new Timer(new TimerCallback(updateDisplay), AdventureTimer, 0, 100); 
```

创建你的 updateDisplay 函数。在这里，您将检查以查看要显示的图像。

```
public void updateDisplay(Object displayBlock)
    {
       if (stopwatch.ElapsedMilliseconds >= 5000) {
          Dispatcher.BeginInvoke(new Action(ToggleImage);
       }
    } 
```

创建一个函数来切换图像。

```
public void ToggleImage()
    {
        stopwatch.Reset();
        if (ShowImage1 == true)
        {
            ImageGrid.Visibility = Visibility.Visible;
            ParisLive.Visibility = Visibility.Collapsed;
            ShowImage1 = false;
        }
        else
        {
            ImageGrid.Visibility = Visibility.Collapsed;
            ParisLive.Visibility = Visibility.Visible;
            ShowImage1 = true;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T05:11:22.877

如果您不想走 XAML 路线，您可以使用[Dispatch Timer](http://msdn.microsoft.com/en-us/library/ms615945%28v=vs.95%29.aspx)简单地实现一个。您只需每 5 分钟设置一次图像源，然后循环遍历每个 Uri。

# sass - SASS - 父因变量重用？

> ID：13312182
> 
> 赞同：0
> 
> 时间：2012-11-09T16:38:21.180
> 
> 标签：sass

我有一个基于 SASS 的站点，它有两个子站点。它们都使用完全相同的 HTML 和 CSS 布局，但它们更改了一些简单的品牌背景颜色。

在我的 SCSS 文件中，我有很多以下内容：

```
body.subsite-one {
  #sidebar-second #wrapper p {
    background-color: $primary-color-one;
  }
} 

body.subsite-two {
  #sidebar-second #wrapper p {
    background-color: $primary-color-two;
  }
} 

#sidebar-second {
    padding: 10px;

  #wrapper  {
    border: 1px solid #000;

    p {
      font-size: 17px;
      /* etc... */
    }

  }

} 
```

我不想在嵌套的其余部分之外声明自定义颜色，这很快就会变得笨拙和混乱，我想做一些类似的事情：

```
#sidebar-second {
    padding: 10px;

  #wrapper  {
    border: 1px solid #000;

    p {
      font-size: 17px;
      background-color: $primary-color-($subsite);
    }

  }

} 
```

因此，我的问题是：无论如何我可以设置一个变量，例如上面的 $subsite，它由**父**类/id 链更改？

（**注意**：我只能在主体上设置子站点类，它在任何其他标签上都不可用。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T20:27:59.257

最简单的解决方案是只使用[父选择器](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#referencing_parent_selectors_)：

```
#sidebar-second {
  padding: 10px;
  #wrapper  {
    border: 1px solid #000;
    p {
      font-size: 17px;
      .subsite-one & { background-color: $primary-color-1; }
      .subsite-two & { background-color: $primary-color-2; }
    }
  }
} 
```

如果您有更长的子站点列表，您可以自动化：

```
$subsites      : one  two     three   four   five;
$primary-colors: red  orange  yellow  green  blue;

#sidebar-second {
  padding: 10px;
  #wrapper  {
    border: 1px solid #000;
    p {
      font-size: 17px;
      @each $site in $subsites {
        $index: index($subsites,$site);
        .subsite-#{$site} & { background-color: nth($primary-colors,$index); }
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:59:37.583

我不确定这是否可行，但考虑尝试：

首先，有一个带有通用规则的“_common.scss”：

```
#sidebar-second {
    padding: 10px;

  #wrapper  {
    border: 1px solid #000;

    p {
      font-size: 17px;
      background-color: $primary-color;
    }

  }

} 
```

然后，为子站点 1 创建一个 SCSS 文件，并让它导入该公共文件，但首先设置`$primary-color`变量：

```
$primary-color: red;
@import "common";

// rules specific to sub-site 1 go here 
```

对子站点 2 执行相同操作：

```
$primary-color: blue;
@import "common";

// rules specific to sub-site 2 go here 
```

我在我的网站上做类似的事情；在此处查看其源代码：
[https ://github.com/simevidas/ecmazing-site/tree/master/sass](https://github.com/simevidas/ecmazing-site/tree/master/sass)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-14T11:22:00.060

在我看来，埃里克答案的以下变体应该（也）起作用：

```
$subsites: subsite-one subsite-two;

#sidebar-second {
  .case-study-aside-block  {
    .views-field-title .field-content span {
      @each $var in $subsites {
        background-color: $primary-color+$var;
      }
    }
  }
} 
```

但是，由于我的 Drupal 驱动的 SASS 编译器中[可能存在错误](http://drupal.org/node/1840356)，我目前无法轻松地对此进行测试。

（或者，如果我不能连接变量，我可以按照他的建议逐步完成第二个列表。）

# git - 如何使用 git 忽略某些目录但不忽略这些目录中的某些文件？

> ID：13312185
> 
> 赞同：0
> 
> 时间：2012-11-09T16:38:35.973
> 
> 标签：git, gitignore

请注意以下结构：

```
/assets --> this dir shouldn't be ignored. but SOME OF their contents SHOULD.;
ignoredfile.jpg --> should be ignored.
ignoredfile2.gif --> --> should be ignored.
 /blog --> this dir shouldn't be ignored. but SOME OF their contents SHOULD.;
  /images --> this dir shouldn't be ignored. but ALL their contents SHOULD.; 
```

在`/assets`文件夹里面我有一个 gitignore 文件：

```
# Ignore everything in this directory
*
# Except this file
!.gitignore
!/images
!/resize
!/blog 
```

在 '/assets/blog' 我有另一个`.gitignore`.

```
# Ignore everything in this directory
*
# Except those files
!.gitignore
!/images 
```

**问题**

当我推送到远程服务器时，git DO 推送了`/blog`目录但不是那个目录`/blog/images`。为什么 ？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:40:50.477

只需将其从中删除`.gitignore`并使用通常的重新添加即可`git add -A <directory-name>`，您应该没问题..

请注意可能会再次删除目录的合并，但如果您正确合并所有内容，则应该没问题。

## 更新

你不能在 git 中提交空目录；一种常见的方法是在其中放置一个空的“占位符”文件，只是说您希望它留在那里。

例如，将一个名为的空隐藏文件`.keep`放入`/images`目录并更改`.gitignore`如下：

```
/images/*
!/images/.keep 
```

现在，你添加/提交`.keep`文件，你应该没问题..

## 替代解决方案

放置一个`.gitignore`inside `/images`，内容如下：

```
*
!.gitignore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:49:26.273

`git`不跟踪目录。如果忽略该目录中的所有文件，`git`则不会记录该目录甚至存在。`.keep`您可以在该目录和该文件中创建一个名为 eg 的（否则无用的）空文件`git add`，但我不确定这是否适合您的最终目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:40:05.987

从您的`.gitignore`.

使用 .将目录添加到您的存储库中`git add <dir>`。

提交并再次推送。

# css - 在 wordpress 菜单后定位 UL 列表

> ID：13312187
> 
> 赞同：0
> 
> 时间：2012-11-09T16:38:40.540
> 
> 标签：css, wordpress, navigation, html-lists

在 wordpress 中，我已经能够修改菜单以显示在左侧，但我有我想在导航菜单末尾显示的社交图标（facebook、twitter..etc）。现在我所做的是修改我的 header.php 文件并插入带有这些图标的 UL 列表以显示在菜单的底部..但是你可以看到它是重叠的。好吧，这是正在发生的事情的图像..以下是我拥有的代码..

![这是我当前的问题](../Images/4495b9157d9f329fee07c205b4c81588.png)

```
<nav id="access" role="navigation">
    <h3 class="assistive-text"><?php _e( 'Main menu', 'twentyeleven' ); ?></h3>
    <?php /* Allow screen readers / text browsers to skip the navigation menu and get right to the good stuff. */ ?>
    <div class="skip-link"><a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to primary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to primary content', 'twentyeleven' ); ?></a></div>
    <div class="skip-link"><a class="assistive-text" href="#secondary" title="<?php esc_attr_e( 'Skip to secondary content', 'twentyeleven' ); ?>"><?php _e( 'Skip to secondary content', 'twentyeleven' ); ?></a></div>
    <?php /* Our navigation menu. If one isn't filled out, wp_nav_menu falls back to wp_page_menu. The menu assigned to the primary location is the one used. If one isn't assigned, the menu with the lowest ID is used. */ ?>
    <?php wp_nav_menu( array( 'theme_location' => 'primary' ) ); ?>
</nav><!-- #access -->
<ul class="social">
    <li><a class="youtubeicon" href="#LinkURL">youtube</a></li>
    <li><a class="facebook" href="#LinkURL">facebook</a></li>
    <li><a class="twitter" href="#LinkURL">twitter</a></li>
    <li><a class="pinterest" href="#LinkURL">pinterest</a></li>
    <li><a class="favorite" href="#LinkURL">favorite</a></li>
</ul> 
```

CSS：

```
ul.social{margin:10px 0 0 25px;}
ul.social li{float:left; padding:2px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:41:31.037

使用`<div style="clear:both"></div>`

```
</nav><!-- #access -->
<div style="clear:both;"></div> <--here 
<ul class="social"> 
```

# php - 对带有 PDO 的 MySQL 查询选项使用准备好的语句

> ID：13312193
> 
> 赞同：0
> 
> 时间：2012-11-09T16:39:04.540
> 
> 标签：php, mysql, pdo, prepared-statement

我正在使用 PDO，并且有用户可以在搜索结果中选择的选项。一些例子是排序、结果数、页码等。我尝试使用准备好的语句来验证这些数据以防止 SQL 注入攻击，但变量从未传递到查询中。

我究竟做错了什么？结果的排序依据和数量是 SELECT 菜单，页码是一个文本输入表单，他们可以在其中输入数字。

```
$query = "SELECT SQL_CALC_FOUND_ROWS * FROM people ORDER BY id :sortBy LIMIT $start, :total";
$result = $conn->prepare($query);
$result->bindValue(":sortBy", $sortBy, PDO::PARAM_STR);
$result->bindValue(":total", $total, PDO::PARAM_INT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:42:48.943

绑定参数用于您要传递到查询中的实际数据。你不能绑定实际的控制命令——MySQL 会将它们解释为数据，而不是命令。

您可以为您的排序方式做的是检查您发送的内容，并将“ASC”或“DESC”传递到查询中。您没有将用户提供的信息传递给查询 - 相反，您用于确定您要传递的一组预定义命令中的哪一个。没有注入风险。

# android - 在 Android 项目中使用 JAVE 库时出错

> ID：13312194
> 
> 赞同：0
> 
> 时间：2012-11-09T16:39:06.957
> 
> 标签：android, ffmpeg

我在我的 Android 项目中使用了一个名为[JAVE](http://www.sauronsoftware.it/projects/jave/index.php)的外部库，以便从视频文件中提取音频。

我的代码：

```
 public void extractAudio() {
    File source = new File(Environment.getExternalStorageDirectory().getPath() + "/test.flv");
    File target = new File(Environment.getExternalStorageDirectory().getPath() + "/test.mp3");
    AudioAttributes audio = new AudioAttributes();
    audio.setCodec("libmp3lame");
    audio.setBitRate(new Integer(128000));
    audio.setChannels(new Integer(2));
    audio.setSamplingRate(new Integer(44100));
    EncodingAttributes attrs = new EncodingAttributes();
    attrs.setFormat("mp3");
    attrs.setAudioAttributes(audio);
    Encoder encoder = new Encoder();
    try {
        encoder.encode(source, target, attrs);
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (InputFormatException e) {
        e.printStackTrace();
    } catch (EncoderException e) {
        e.printStackTrace();
    }
} 
```

这些是我得到的错误：

```
11-09 18:26:49.874: W/System.err(6594): java.io.IOException: Error running exec(). Command: [/bin/chmod, 755, /sdcard/jave-1/ffmpeg] Working Directory: null Environment: null
11-09 18:26:49.874: W/System.err(6594):     at java.lang.ProcessManager.exec(ProcessManager.java:211)
11-09 18:26:49.874: W/System.err(6594):     at java.lang.Runtime.exec(Runtime.java:168)
11-09 18:26:49.884: W/System.err(6594):     at java.lang.Runtime.exec(Runtime.java:123)
11-09 18:26:49.884: W/System.err(6594):     at it.sauronsoftware.jave.DefaultFFMPEGLocator.<init>(DefaultFFMPEGLocator.java:85)
11-09 18:26:49.884: W/System.err(6594):     at it.sauronsoftware.jave.Encoder.<init>(Encoder.java:111)
11-09 18:26:49.884: W/System.err(6594):     at com.yt.ringtones.RipActivity.extractAudio(RipActivity.java:236)
11-09 18:26:49.894: W/System.err(6594):     at com.yt.ringtones.RipActivity$1$DownloadFromUrl.onPostExecute(RipActivity.java:94)
11-09 18:26:49.894: W/System.err(6594):     at com.yt.ringtones.RipActivity$1$DownloadFromUrl.onPostExecute(RipActivity.java:1)
11-09 18:26:49.894: W/System.err(6594):     at android.os.AsyncTask.finish(AsyncTask.java:602)
11-09 18:26:49.894: W/System.err(6594):     at android.os.AsyncTask.access$600(AsyncTask.java:156)
11-09 18:26:49.986: W/System.err(6594):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:615)
11-09 18:26:49.986: W/System.err(6594):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-09 18:26:49.986: W/System.err(6594):     at android.os.Looper.loop(Looper.java:137)
11-09 18:26:49.994: W/System.err(6594):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-09 18:26:49.994: W/System.err(6594):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 18:26:49.994: W/System.err(6594):     at java.lang.reflect.Method.invoke(Method.java:511)
11-09 18:26:50.014: W/System.err(6594):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-09 18:26:50.014: W/System.err(6594):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-09 18:26:50.024: W/System.err(6594):     at dalvik.system.NativeStart.main(Native Method)
11-09 18:26:50.024: W/System.err(6594): Caused by: java.io.IOException: No such file or directory
11-09 18:26:50.024: W/System.err(6594):     at java.lang.ProcessManager.exec(Native Method)
11-09 18:26:50.034: W/System.err(6594):     at java.lang.ProcessManager.exec(ProcessManager.java:209) 
```

我对 Android 开发相当陌生，我不确定这里有什么问题。我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:01:03.393

“exec()”基本上是在系统中执行一个命令，就好像你从命令行运行它一样。它正在尝试运行“/sdcard/jave-1/ffmpeg”，它应该是一个可执行文件。你的设备上有这个可执行文件吗？如果没有，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T12:43:04.573

由于错误的 ffmpeg 文件权限而发生此错误。这是我在类似线程中的答案：[Using sauronsoftware's Jave in phonegap Android project](https://stackoverflow.com/questions/24863155/using-sauronsoftwares-jave-in-phonegap-android-project/30482674#30482674)

# ajax - ajax操作后如何删除未处理组件上的FacesMessage

> ID：13312196
> 
> 赞同：2
> 
> 时间：2012-11-09T16:39:18.950
> 
> 标签：ajax, jsf, primefaces, messages

我的场景如下：我有一个包含三个地址的表单，每个地址都是一个复合组件。每个地址都有一个链接，可以从其他两个地址之一复制它。该链接通过 设置目标和源地址`f:setPropertyActionListener`，然后根据这些参数调用 Bean 方法进行实际复制。该链接有一个`f:ajax`仅执行源地址并呈现目标地址的链接。这样，即使页面上的其他地址（例如他们想要复制到的地址）存在验证错误，用户也可以复制。由于目标字段可能无效（因此在我的情况下标记为红色），但在我使用`p:resetInput`（Primefaces）重置它们的 Ajax 请求期间未处理。

这是我的问题所在：重置工作正常，因为它确实删除了无效的状态和 styleClass。该字段本身看起来非常好。但是，我附加到它的错误消息仍然可见，并且只会在刷新时消失。我认为重置+重新渲染会解决这个问题，但可惜它没有。

我的下一个尝试是扩展复制方法，以便它清除 处的消息列表`FacesContext`，但这不起作用：当我实际到达我的 Bean 方法时，这意味着当前上下文通过了验证（对于)的一部分，`execute`因此没有消息。

所以，问题是：有没有办法访问之前附加的未处理组件的消息？基于[这个答案](https://stackoverflow.com/a/6845800/840977)，我在想：

*   获取目标组合
*   遍历它的孩子
*   检查每个组件上的消息，如果有，删除它们（虽然不知道如何......）

但也许我想错了。我不确定这些消息是否仍然存在，或者这是否是某种更新视图问题？在这种情况下，我需要知道如何重置输入消息组件（当前`render`使用封闭`h:panelGroup`作为目标，asfaik 应该正确地重新呈现消息，就像它对输入所做的那样......）

任何帮助表示赞赏。

* * *

将其简化为以下示例：

### 测试.xhtml

```
<h:inputText id="string1" value="#{testBean.string1}" style="#{component.valid ? '' : 'background-color:red;'}">
    <f:validateLength minimum="4" />
    <f:ajax render="@this msg1" />
</h:inputText>
<h:message id="msg1" for="string1" />
<br /><br/>

<h:inputText id="string2" value="#{testBean.string2}" style="#{component.valid ? '' : 'background-color:red;'}">
    <f:validateLength minimum="4" />
    <f:ajax render="@this msg2" />
</h:inputText>        
<h:message id="msg2" for="string2" /><br /><br/>

<h:commandButton actionListener="#{testBean.actionCopyString}" value="Click me">
    <f:ajax execute="string1" render="string2" />
    <p:resetInput target="string2" />
</h:commandButton> 
```

### 测试豆

```
@ManagedBean(name = "testBean")
@ViewScoped
public class TestBean {
    private String string1;
    private String string2;
    // + getters + setters

    public void actionCopyString() {
    string2 = string1;
    }
} 
```

### 行为

在字段一中输入一个有效的字符串（至少四个字符）。在字段 2 中输入无效的字符串，然后使用制表符或单击它。该字段变为红色并显示一条消息。然后单击按钮。有效值被复制。幸亏`<p:resetInput>`田野也不再红了。但是，该消息仍然显示。将其包含在`render`属性中或围绕输入和消息重新渲染容器组件都没有效果。我的目标是在复制操作完成后也让消息消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:42:53.943

解决了。根据 BalusC 的评论，使用`<p:resetInput>` *和*重新渲染消息标签本身就可以正常工作。

错误在我们的设置深处。项目开始时，它使用 IceFaces 作为 UI 框架，该框架是由一位前同事建立的。由于一些不断变化的需求，我们最近切换到 PrimeFaces。据我所知，所有对 IceFaces jar 和 include 的引用以及诸如此类的东西都已被删除 - 但是，今天我发现了一些仍然提到 IceFaces 的偏好。所以事实证明，由于通过 SVN 分发，我们所有的机器仍然在后台运行库，没有任何页面实际使用它。

显然，IceFaces 的一些生成输出与 PrimeFaces 的输出发生冲突（从我所经历的效果来看，可能是一些 JavaScript 和与主题相关的 styleClasses）。虽然现在我页面上的一些样式看起来有点奇怪，但`p:resetInput`突然按预期工作 - 以及`p:growl`到目前为止根本没有工作的一些其他组件（例如）。

这让我很开心！我真的不知道发生了什么，但这一次修复了我最神秘的四个错误……耶！

感谢 BalusC 查看它。我真的真的真的很感谢你在这里的努力。我总是发现您对我的问题的回答对我有很大帮助，更重要的是，对其他人的问题的数十个答案使我免于猜测并提供了如何做事的好例子。巨大的距离-拥抱！

# java - Sharepoint Web 服务 Java - 无数据

> ID：13312197
> 
> 赞同：2
> 
> 时间：2012-11-09T16:39:19.483
> 
> 标签：java, sharepoint, service, web

我在我的 Sharepoint 上创建了一些列表。接下来，我正在尝试使用 Java 从 Sharepoint 获取数据：

```
...
ListsSoap listsSoap = new Lists().getListsSoap();
GetListCollectionResult getListCollectionResult = listsSoap.getListCollection();
System.out.println(getListCollectionResult.getContent().toString());
... 
```

我的身份验证没有问题，但我的结果始终是一个空列表：

```
[[Lists: null]] 
```

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T22:29:43.647

事实上，我们必须得到这样的 dom 响应：

```
GetListCollectionResult getListCollectionResult = listSoap.getListCollection();
Object result = getListCollectionResult.getContent().get(0);

if(result != null && result instanceof ElementNSImpl)
{
    Document document = ((ElementNSImpl)result).getOwnerDocument();
    System.out.println(WebServiceUtils.xml(document));
} 
```

xml 是一种返回我的 dom 的 xml 字符串表示形式的方法。最后，我可以看到我的列表集合：

```
<Lists xmlns="http://schemas.microsoft.com/sharepoint/soap/">
    <List AllowDeletion="True" AllowMultiResponses="False" ...
    <List AllowDeletion="True" AllowMultiResponses="False" ...
    ... 
```

每个 List 节点代表我的 Sharepoint 中的一个列表。现在，只需浏览节点：

```
NodeList list = ((ElementNSImpl)result).getElementsByTagName("List");
... 
```

我希望这能帮到您。

# bash - 将 bash 字符串比较存储在变量中

> ID：13312200
> 
> 赞同：15
> 
> 时间：2012-11-09T16:39:24.647
> 
> 标签：bash

我想将 bash 字符串比较的结果存储在一个变量中，效果相当于：

```
if [[ $a == $b ]]; then
    res=1
else
    res=0
fi 
```

我希望能够写一些更简洁的东西，比如：

```
res2=$('$a'=='$b') #Not valid bash 
```

有没有一种方法可以实现我想要的，而无需遵循 if 构造？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T16:45:32.447

我会建议：

```
res=0; [ "$a" == "$b" ] && res=1 
```

或者

```
res=1; [ "$a" == "$b" ] || res=0 
```

不像您希望的那么简单，但确实避免了`if ... else ... fi`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:55:27.793

您还可以使用`$?`包含上一个命令的返回值的变量：

```
res="$( [[ $a == $b ]]; echo $? )" 
```

尽管这会与您给出的数字相反。最终结果将与以下内容相同：

```
if [[ $a == $b ]]; then
  res=0
else
  res=1
fi 
```

这是因为 shell 将返回值解释`0`为 true 和`1`false。

并不是说我也完全赞成这种解决方案。这是hackish，有点不清楚。但它很简洁，简洁就是你所要求的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-25T15:09:33.560

这是另一种选择。

```
$> test "foo" = "bar"; res=$?
$> echo $res
1
$> test "foo" = "foo"; res=$?
$> echo $res
0 
```

# asp-classic - 获取 ASP 经典中 Server.Executed 文件的名称

> ID：13312201
> 
> 赞同：2
> 
> 时间：2012-11-09T16:39:25.127
> 
> 标签：asp-classic, vbscript

我有一个`include.asp`包含以下代码的全局文件：

```
if SomeCondition then
    Response.Clear
    Response.Status = "404 Not Found"
    Server.Execute "/error404.asp"
    Respnse.End
end if 
```

另外两个文件，`content.asp`和`error404.asp`#include 这个文件。

内容文件将*SomeCondition*设置为 true ，从而导致错误页面为*Server.Execute*。但是，在错误页面中，同样的情况也会成立。这会创建一个无限循环，我最终会遇到以下错误：

```
Server object error 'ASP 0227 : 80004005'
Server.Execute Failed
/include.asp, line 1111
The call to Server.Execute failed 
```

如何避免无限循环？我想到了这些解决方法：

# 一种

```
if SomeCondition then
    if GetExecutedFileNameSomehow() <> "error404.asp" then
       ' ...
    end if
end if 
```

但我似乎无法通过代码获取错误文件的名称（我查看了服务器变量，所有点变量都引用了调用文件，即内容）。

# 乙

在内容文件中使用共享变量，例如 set *BeingExecuted = true*并在错误文件中检查它，但 Server.Execute 的问题是执行的脚本无法访问调用文件的变量。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T13:10:50.597

你是对的，由于 Server.Execute 的性质，被调用的脚本不知道它的真实来源，我没有找到任何方法来找到它。

也就是说，我担心您将不得不求助于丑陋的解决方法，我能想到的最可靠的方法是将 Session 变量用作“共享变量”。

在*include.asp*中有这样的代码：

```
strFileToExecute = "/error404.asp"
If (Session("currently_executing")<>strFileToExecute) And (SomeCondition) Then
    Response.Clear
    Response.Status = "404 Not Found"
    Session("currently_executing") = strFileToExecute
    Server.Execute strFileToExecute
    Session("currently_executing") = ""
    Response.End
End If 
```

逻辑是在调用 Execute 方法之前设置 Session 变量。这样，当执行*error404.asp*并再次包含相同的代码时，将设置 Session 变量的值，并且您知道要中止操作，从而避免死循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:26:30.927

如果你真的必须在 404.asp 中包含 include.asp，我希望你对“Somecondition”的测试是在子函数或函数中。您可以在 include.asp 中定义一个变量，在 404.asp 中将其设置为 true 并在您的条件下对其进行测试。

因此：

里面include.asp

```
Dim blnNot404page : blnNot404page = true 
```

在 404.asp 内部（在包含 include.asp 之后的代码中）

```
blnNot404page = false 
```

再次在include.asp里面

```
if (SomeCondition and blnNot404page) then
    Response.Clear 
    Response.Status = "404 Not Found"
    Server.Execute "/error404.asp"
    Response.End
end if 
```

# php - 查询 PHP/MySql AND/OR 进行高级搜索

> ID：13312202
> 
> 赞同：1
> 
> 时间：2012-11-09T16:39:50.143
> 
> 标签：php, mysql, search, parameters

我是 php 和 mysql 的新手，所以我的查询需要一些帮助。这是我的 sql 查询

```
SELECT * FROM table1 WHERE (Name LIKE '%$keyword%' OR ZipCode LIKE '%$keyword%') AND Category LIKE '$category' AND Country LIKE '$country' LIMIT $start, $limit 
```

现在我想做的就是

1.  此查询应使用带有 name 关键字的文本字段搜索带有 Name 或 ZipCode 的列名称。即关键字与 Name 列或 ZipCode 匹配。
2.  如果没有输入关键字并且仅从下拉列表中选择了一个国家，该查询也应该有效。
3.  如果没有输入关键字或国家，并且仅从下拉列表中选择了一个类别，该查询也应该有效。

用更简单的话来说，如果选择了事物关键字、国家或类别中的任何一个，则搜索应该相应地显示结果。此外，如果输入了所有字段，它也应该可以工作。我设法做到了一半，但有时它给了我错误的结果。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:02:39.153

您可以检查设置了哪些字段并在运行时进行相应的查询。你可以这样做：

```
$query = "";
$keyword = $_REQUEST['keyword'];
$country = $_REQUEST['country'];
$category = $_REQUEST['category'];
if(isset($keyword)){//if keyword set goes here
   $query = "SELECT * FROM table1 WHERE Name LIKE '%$keyword%' OR ZipCode LIKE '%$keyword%' OR country LIKE '%$keyword%'";
   if(isset($category)){
     $query .= "AND category LIKE '$category'";
   }
   if(isset($country)){
     $query . = "AND country LIKE '$country'"
   }
}else if (isset($category)){ //if keyword not set but category set then goes here
  $query = "SELECT * FROM table1 WHERE category LIKE '$category'";
  if(isset($country)){
    $query . = "AND country LIKE '$country'";
  }
}else if(isset($country)){//if only country set goes here
  $query = "SELECT * FROM table1 WHERE country LIKE '$country'"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:47:38.093

我建议使用几个不同的查询（每个搜索参数组合一个），使用 php 来决定使用哪个或使用 php 动态构建一个。

请注意，使用以 % 开头的 like 可能会很慢。

如果您真的想将其作为一个声明（我不推荐），那么：-

```
SELECT * 
FROM table1 
WHERE (Name LIKE '%$keyword%' OR ZipCode LIKE '%$keyword%' OR '$keyword' = '') 
AND (Category = '$category' OR '$category' = '' )
AND (Country = '$country' OR '$country' = '' )
LIMIT $start, $limit 
```

或者动态构建它

```
$ConditionArray = array();
if ($keyword != '') $ConditionArray[] = "(Name LIKE '%$keyword%' OR ZipCode LIKE '%$keyword%' OR '$keyword' = '')";
if ($category != '') $ConditionArray[] = "Category = '$category'";
if ($country != '') $ConditionArray[] = "Country = '$country'";

if (count($ConditionArray) > 0)
{
    $query = "
    SELECT *
    FROM table 1
    WHERE ".implode(' AND ', $ConditionArray);
} 
```

# postgresql - PostgreSQL SELECT 在记录一个属性与第二个属性的条件评估之间

> ID：13312204
> 
> 赞同：0
> 
> 时间：2012-11-09T16:39:54.303
> 
> 标签：postgresql, select, boolean, conditional, case

我有一个字段样本数据集，其属性包括：样本名称、分析时间戳（唯一键）、分析结果、采样日期和一个布尔属性“重新运行”，该属性描述记录是否是第二次分析的结果同一个样本。这意味着可以有多个记录具有相同的样品名称和样品日期，但在这种情况下，第二条记录 (rerun = TRUE) 是选择的首选结果。

名称时间戳分析结果重新运行日期采样

我曾尝试使用 CASE 功能，但我认为我缺少一些简单的东西。我试图把它作为 WHERE 子句的一个元素，但这不是按原样工作的。

例如，我正在尝试类似：

```
 SELECT name,analysisResult
    FROM sciencyTable
    WHERE date = '12/02/11',
    AND (some working CASE function)
    ORDER BY time; 
```

任何提示将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:03:52.570

查询的一种解决方案是针对重新运行的样本进行外部连接并合并：

```
select
  firstruns.name
, coalesce(reruns.analysisResult, firstruns.analysisResult) as analysisResult
from
(select name, dateSampled, analysisResult
 from sciencyTable
 where not rerun
) as firstruns
left join
(select name, dateSampled, analysisResult
 from sciencyTable
 where rerun
) as reruns
using (name,dateSampled) 
```

如果您对给定的名称、日期有多次重新运行并想选择最新的，您应该尝试[窗口函数](http://www.postgresql.org/docs/current/static/tutorial-window.html)

# javascript - 将 TR 和 TD 标签编写为 DIV / TD 的内部 HTML

> ID：13312206
> 
> 赞同：1
> 
> 时间：2012-11-09T16:39:55.697
> 
> 标签：javascript, dom, html-table

我正在使用 JavaScript innerHTML 属性在 DIV 中编写一个表

```
listing.innerHTML += '<table> <tr><td><img src='+ pic + friends[a].split("|")[1] + '/picture"' + ' class="pic" /></td>'; 

listing.innerhtml += '<td class="name">' + friends[a].split("|")[0] + "</td>";

listing.innerHTML += "<td><button id='add' onclick=write() /> </td> </tr> </table>"; 
```

对于 ID 为 'listing' 的 div，其内容是不带表格标签的，即`<td> </td> </tr> <tr>`.

即出现了所需的内容，但没有格式化为 HTML 表格。当我在浏览器中查看源代码时，缺少相同的 TR 和 TD 以及闭包标签。知道为什么吗？我正在使用 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:43:51.470

问题是每次您向 innerHTML 添加内容时，DOM 都会更新，并且浏览器会`<table>`为您关闭未关闭的内容。

我建议您生成整个 html，然后立即将其添加到 innerHTML：

```
var myhtml = "";
myhtml += '<table> <tr><td><img src="'+ pic + friends[a].split("|")[1] + '/picture"' + ' class="pic" /></td>'; 
myhtml += '<td class="name">' + friends[a].split("|")[0] + "</td>";
myhtml += "<td><button id='add' onclick='write()' /> </td> </tr> </table>";
listing.innerHTML += myhtml; 
```

**注意：**还要确保将所有属性值括在匹配的引号中（双引号或单引号，但它们必须匹配）。不支持不带引号的属性值，尽管它们有时可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:42:36.000

如果您说您所做的更改在您查看页面源时没有出现，那很好。这是因为它没有从您通过 DOM 中的 JS 所做的更改中更新。

看看使用 Firefox/Firebug

> 检查 HTML 并实时修改样式和布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:44:23.897

```
var tbl = '<table> <tr><td><img src='+ pic + friends[a].split("|")[1] + '/picture"' + ' class="pic" /></td>';
tbl += '<td class="name">' + friends[a].split("|")[0] + "</td>";
tbl += "<td><button id='add' onclick=write() /> </td> </tr> </table>";

listing.innerHTML += tbl; 
```

# php - 在 Debian 6 上安装 Gearman PHP 扩展

> ID：13312207
> 
> 赞同：4
> 
> 时间：2012-11-09T16:40:00.433
> 
> 标签：php, linux, debian, gearman

我正在拼命尝试让 Gearman PHP 扩展在 Debian 6 上运行。

我有所有的二进制文件和来源

```
root@debian:/tmp/pear/install# aptitude search gearman
i   gearman                                                             - A distributed job queue
i A gearman-job-server                                                  - Job server for the Gearman 
i   gearman-tools                                                       - Tools for the Gearman 
i   libgearman-dev                                                      - Development files for the 
i   libgearman4                                                         - Library providing Gearman 
```

...但是当 PHP 扩展配置中有一些错误不允许我安装它时

```
# /usr/local/pear/bin/pecl install gearman
downloading gearman-1.1.0.tgz ...
Starting to download gearman-1.1.0.tgz (30,488 bytes)
.........done: 30,488 bytes
3 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
building in /tmp/pear/install/pear-build-rootrDO8Ob/gearman-1.1.0
running: /tmp/pear/install/gearman/configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib
checking for PHP extension directory... /usr/lib/php5/20090626
checking for PHP installed headers prefix... /usr/include/php5
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking whether to enable gearman support... yes, shared
not found
configure: error: Please install libgearman
ERROR: `/tmp/pear/install/gearman/configure' failed 
```

config.m4 有几行有趣的

```
 for i in $PHP_GEARMAN /usr/local /usr /opt/local; do
    if test -r $i/include/libgearman-1.0/gearman.h; then
      GEARMAN_LIB_DIR=/usr/lib
      GEARMAN_INC_DIR=/usr/include/
      AC_MSG_RESULT([found in $i])
      break
    fi
  done 
```

首先是对“libgearman-1.0”的引用（源代码中使用了相同的目录名称）。已安装的包含转到 /usr/include/libgearman 。不是大问题 我创建了一个链接

```
ln -s libgearman/ libgearman-1.0 
```

也以防万一 eddied GEARMAN_LIB_DIR 和 GEARMAN_INC_DIR 将其指向正确的目录。不幸的是，据我所知：

```
./configure
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-unknown-linux-gnu
checking host system type... x86_64-unknown-linux-gnu
checking target system type... x86_64-unknown-linux-gnu
checking for PHP prefix... /usr
checking for PHP includes... -I/usr/include/php5 -I/usr/include/php5/main -I/usr/include/php5/TSRM -I/usr/include/php5/Zend -I/usr/include/php5/ext -I/usr/include/php5/ext/date/lib
checking for PHP extension directory... /usr/lib/php5/20090626
checking for PHP installed headers prefix... /usr/include/php5
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... no
configure: WARNING: You will need re2c 0.13.4 or later if you want to regenerate PHP parsers.
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking whether to enable gearman support... yes, shared
found in /usr
checking for gearman_client_set_context in -lgearman... yes
checking for gearman_worker_set_server_option in -lgearman... no
configure: error: libgearman version 0.21 or later required 
```

你知道在 Debian / Ubuntu 上安装这个 PHP 扩展最简单的方法是什么吗？我在谷歌上找到了一些建议，但没有一个对我有用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T21:59:42.937

这不起作用的原因是，正如错误消息所说，最新版本的 PHP 扩展需要 libgearman-1.0（这就是目录命名为 1.0 的原因）。您至少需要使用 wheezy（这是 debian 6/squeeze 之后的版本）才能获得 libgearman-1.0。

它也可能是从源代码编译 libgearman，然后用于`checkinstall`创建您之后安装的 debian 软件包的解决方案，或者使用在`https://launchpad.net/~gearman-developers/+archive/ppa`. 我们已经在各种发行版（包括 Debian、Ubuntu、RHEL4 和 SL6）上构建了 libgearman、gearmand 和 PHP 扩展，并使用 checkinstall 来获得合适的可用软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T09:22:22.653

```
sudo apt-get install make gcc g++
sudo apt-get install libboost-thread-dev libboost-program-options-dev libevent-dev uuid-dev libpq-dev libcloog-ppl0 libcurl4-gnutls-dev
sudo apt-get install libmemcached-dev libmariadbclient-dev libsqlite3-dev # option

wget https://launchpad.net/gearmand/1.2/1.1.12/+download/gearmand-1.1.12.tar.gz
tar xvfz gearmand-1.1.12.tar.gz
cd gearmand-1.1.12
./configure
make
sudo make install

sudo useradd -M gearman -s /sbin/nologin -r
sudo mkdir /var/run/gearman /var/log/gearman-job-server
sudo touch /var/log/gearman-job-server/gearman.log
sudo chown gearman:gearman /var/run/gearman /var/log/gearman-job-server

sudo vi /etc/init.d/gearman-job-server 
```

**资源**

*   [http://yupmin.net/install-gearmand-with-php-supervisor](http://yupmin.net/install-gearmand-with-php-supervisor)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T20:55:34.637

You can find thorough installation instructions for installing an older version of gearman (0.8.3) here, which may solve your problem [http://blog.andyburton.co.uk/index.php/2012-12/gearman-0-41-with-mysql-persistent-storage-and-php-pecl-0-8-3-with-gearmanmanager-on-ubuntu-12-04/](http://blog.andyburton.co.uk/index.php/2012-12/gearman-0-41-with-mysql-persistent-storage-and-php-pecl-0-8-3-with-gearmanmanager-on-ubuntu-12-04/)

# php - 2 服务器 1 个经过身份验证的用户

> ID：13312211
> 
> 赞同：0
> 
> 时间：2012-11-09T16:40:07.590
> 
> 标签：php

这将是很奇怪的抱歉，希望我将它发布在正确的网站上。

我在一次采访中得到了这个问题。

如果我有两台服务器，一台是媒体，另一台托管需要用户身份验证的网站。

在访问媒体服务器之前，用户必须登录到托管在一台服务器上的网站。只有经过身份验证的用户才能访问媒体和媒体服务器。

我不确定如何通过 PHP 解决这个问题？我相信我可以通过系统管理员和设置 kerberos 服务器的票务系统来做到这一点。但是对于 PHP，我只能想到 RSA 公私钥加密的某种形式？

另一个解决方案/黑客是创建某种哈希并将其附加到 URL。

或者

检查用户IP？每次用户访问媒体文件？

请注意，我申请的公司，经理似乎一点都不熟练。所以也许没有安全的解决方案？

笔记：

我很确定我不能使用它包含在服务器中的 PHP 会话？也许是饼干？这样还安全吗...

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:43:16.607

为两台服务器使用一个公共域，然后使用加密的 cookie 执行域级身份验证，其中两台服务器具有相同的私有解密密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:47:45.030

这可能很容易也可能很困难：这取决于媒体服务器是否信任网络服务器。

场景 1：媒体服务器信任 Web 服务器 - 简单

*   两者都维护一个共享的秘密（在最广泛的意义上 - 可以是公钥/私钥对）
*   登录时，Web 服务器向客户端分发一个令牌，该令牌使用共享密钥（或 Web 服务器持有的部分）签名或加密
*   客户端将此令牌提供给媒体服务器，媒体服务器通过其共享密钥的副本（或部分）对其进行身份验证
*   因此，媒体服务器可以做出访问决定

场景 2：媒体服务器不信任 Web 服务器 - 很难

*   请注意，您总是需要某种共同信任
*   这可以是分布式身份验证系统，如 Kerberos、OpenID 等

# php - 我真的需要正则表达式来检查输入字段是否为整数吗？

> ID：13312221
> 
> 赞同：2
> 
> 时间：2012-11-09T16:41:00.913
> 
> 标签：php, integer, validation

我有一个表格，我需要检查某些值是否为整数。这似乎出乎意料地复杂。

我试过：

```
if (is_int($value)) 
```

这不起作用：任何值都返回 false，因为文本输入总是发送一个字符串类型的变量

```
if (is_numeric($value)) 
```

这有效，但只检查变量是否为数字。我想知道它是否是一个整数，所以我不希望 1.3 被接受。

```
if (is_int( (int) $value )) 
```

尝试使用 is_int，并强制将 $value 强制转换为整数。这也不起作用

所以，除非有其他我不知道的解决方案，我想唯一的方法是使用 `ereg("^[0-9]*$",$value)`

这（性能？）有什么问题吗，难道没有更直接的解决方案吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:56:46.347

正如**mario**所指出的，[`ctype_digit()`](http://php.net/manual/en/function.ctype-digit.php)这是单一的功能方式：

```
if (ctype_digit($_POST['value'])) {
  $for_santity = (int)$_POST['value'];
} 
```

简单的。快速地。可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:53:03.760

您可以避免使用正则表达式（不确定`strpos`它在幕后做了什么）

```
if(!strpos($value,'.') && is_numeric($value)) 
```

> 你基本上复制了 ctype_digit()

看来我有，抱歉，PHP 不是我的母语。使用以下内容，因为我们不应该重新创建库函数：
`if(ctype_digit())`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:17:48.047

我意识到 ctype_digit() 是最佳答案，但我发布此答案以防万一有人使用不支持该功能的 PHP 版本（例如在我的测试用例中：Ideone.com）：

```
<?php
function testInt($a){
    if (intval($a)>0) {
        return (floatval($a)==intval($a)) ? 'true' : 'false';
    }
    return 'false';
}
?> 
```

[这适用于ctype_digit()](http://php.net/manual/en/function.ctype-digit.php)页面上列出的示例。

这是一个在线示例：http: [//ideone.com/uePQto](http://ideone.com/uePQto)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:45:25.613

这个怎么样，

```
 if( is_numeric( $value ) && floor( $value ) != $value) 
```

在这种情况下，绩效衡量太微不足道了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T16:45:55.100

您可以尝试定义接收到的信息的数据类型。假设您通过 POST 从表单中获取信息：

```
$num_val = (int) $_POST['VALUE_FROM_FORM']; 
```

我认为 is_int 将返回正确的结果，但您必须确保收到的结果是数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T16:46:27.090

在您的 PHP 中，您可以使用 来检查值`preg_match`，不要使用旧`ereg`函数，因为它们已被弃用。

```
$id = $_GET['id'];
if (!preg_match('/^[0-9]*$/', $id)) {
    // there was an error and the value DIDN'T pass validation
} else {
    // continue as everything was OK :)
} 
```

您可能需要更改`GET`to`POST`或`REQUEST`适应。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T16:47:26.423

我一直处理我期望为 1 或更多的整数的方式（即对于应该表示无符号主 INT 键的传入变量）：

```
$var = intval($_POST['form_var']);
if($var > 0){
    echo 'Good';
} 
```

# actionscript-3 - Alpha 0 与可见 = 假

> ID：13312222
> 
> 赞同：1
> 
> 时间：2012-11-09T16:41:17.083
> 
> 标签：actionscript-3, flash, animation, tween

我正在开发一个带有一些动画的网站（哦，是的），我对获得更好性能的方式表示怀疑。其中一些动画的 alpha 从 1 变为 0。所以我有两种方法：

*   当然是补间，但是对象仍然在 alpha = 0 的舞台上，是否还有一些处理工作剩余？还是 Flash 很聪明，只是忽略了对象？
*   手动，当 alpha 低于 0.1 时，我设置 visible = 0 就是这样。但我想知道补间是否比手工制作的功能更快......

有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:28:48.160

即使 alpha 设置为零，Flash 也会计算显示列表上的显示对象。

Alpha 决定剪辑的不透明度，而可见决定剪辑是否由播放器渲染。

因此，如果您不需要显示或交互，则 visible=false 是更高的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:41:14.150

绝对使用 Greensock 库。

要为 alpha 设置动画，然后使其不可见，请执行以下操作：

```
TweenLite.to(movieClip, 0.5, { autoAlpha: 0 }); 
```

有关 Greensock 补间引擎的更多信息：http: [//www.greensock.com/tweenlite/](http://www.greensock.com/tweenlite/)

如果显示列表上有太多对象并且影响性能，您仍然可以将对象移出“渲染”区域，（如果我是正确的）2000px 离开舞台，那么你应该这样做：

```
TweenLite.to(movieClip, 0.5, {autoAlpha: 0, onComplete: function() {
    movieClip.x = movieClip.y = 10000;
}}); 
```

我希望它有帮助，罗布

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:41:51.037

当一个项目的`alpha`值为 时`0`，它仍然由玩家渲染，仍然调度鼠标/交互事件并且仍然影响它的父项的边界。

当您设置`visible`为`false`时，玩家不会按说对象渲染对象，并且不会调度鼠标/交互事件。但是，它仍然会影响父级的边界。

如果您真的想提高效率，我建议您完全从显示列表中删除该项目。例如。`removeChild(item);`然后它不再影响父级的边界，并且真正没有被渲染。

关于补间，对于任何库，当补间完成或从显示列表中删除时，很容易将可见设置为 false。greensocks 补间库有一个特殊的参数来实际执行此操作 - 而不是使用`alpha`您使用的属性 use `autoAlpha`。当值下降到零时，它会将可见性设置为 false。如果高于 0，它会翻转回 true。

补间是否比手工制作的函数快取决于补间和手工制作的函数的质量。大多数补间库都非常高效，我不会担心。

# java - 从 Java JHotDraw 中覆盖的 getActions 在上下文菜单中创建子菜单

> ID：13312223
> 
> 赞同：2
> 
> 时间：2012-11-09T16:41:18.887
> 
> 标签：java, swing, contextmenu

我正在覆盖`getActions`基于 Java 的框架中的方法，这是一个托管[在这里](https://sourceforge.net/projects/jhotdraw/)[`JHotDraw`](http://www.jhotdraw.org/)的开源项目。该方法在. 我可以使用下面的代码正确添加额外的上下文菜单选项。我需要知道如何将子菜单添加到上下文菜单。`getActions``Figure``Drawingview`

```
@Override
public Collection<Action> getActions(Point2D.Double p) {
  Collection<Action> popupMenu = new ArrayList<Action>();
  popupMenu.add(new AbstractAction("add Context Option 1") {
    public void actionPerformed(ActionEvent event) {
      preformThisMethod("params");
    }
  });
  popupMenu.add(new AbstractAction("add Context Option 2") {
    public void actionPerformed(ActionEvent event) {
      preformThisMethod("params");
    }
  });
  // How to add a sub menu to the context menu?
  return popupMenu;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:24:00.140

支持添加子菜单。

该类`org.jhotdraw.gui.JPopupButton`扩展`JButton`以提供在整个框架中使用的弹出菜单。该方法`add(javax.swing.JMenu submenu)`可用于构建分层子菜单。例如，`org.jhotdraw.samples.draw.DrawingPanel`将`Zoom`子菜单添加到 中最右侧的弹出菜单`creationToolbar`，以及其他杂项编辑操作。中的方法`createFontButton()`是编辑器`org.jhotdraw.draw.action.ButtonFactory`使用的另一个示例。`addFontButtonsTo()`

相反，右键单击`org.jhotdraw.draw.DefaultDrawingView`由`javax.swing.JPopupMenu`in的实例处理`org.jhotdraw.draw.DelegationSelectionTool`，如 中所示`org.jhotdraw.samples.mini.EditorSample`。特别是，该`AbstractAction`属性`Actions.SUBMENU_KEY`标识子菜单名称。设置`DEBUG = true`看看效果。目前没有定义。

# c# - MEF 和导入到接口？

> ID：13312228
> 
> 赞同：0
> 
> 时间：2012-11-09T16:41:31.490
> 
> 标签：c#, prism, mef

我正在将 Prism 与 MEF 扩展一起使用，并且在有关导入到接口的项目设置方面遇到了一些问题。问题是接口与具体实现不在同一个程序集中（因为其他项目中还有其他具体实现也使用相同的接口）。

所以因为我只有一个对带有接口的项目的引用，而具体的实现从来没有在我的主应用程序中直接引用，所以它永远不会包含在 bin 目录中。因此，在运行时 MEF 组合失败，因为它试图注入一个没有包含实现的程序集的类。

这样做的正确方法是什么？我总是可以将它复制到 bin 目录，但这很糟糕......或者我可以将它复制到插件目录，但这也很糟糕，因为其他具体实现必须存在于同一个插件目录中。

要么我完全错过了一些东西，要么这不是 MEF 的好用处，或者......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:51:10.267

MEF 实现模块通常不被主项目引用——MEF 的重点是能够在运行时加载不同的东西。

我在 VS 的主项目中创建了一个构建后操作，以将 MEF 模块复制到主项目期望在其中找到 MEF 模块的任何位置——bin 或 bin 的子目录。

您可以改为更改每个 MEF 模块项目中的构建输出目录，以将模块二进制文件输出到主项目 bin 目录或 bin 的子目录。

我不熟悉 Prism，但是对于带有 .NET 4.0 的普通旧 MEF，我构建了 MEF 模块文件路径的 MEF 目录，通常来自主项目配置文件中的信息。（加载在一个目录中找到的所有 dll 是自找麻烦）

即使主项目没有引用 MEF 模块，您仍然可以在构建主项目时让 VS 构建 MEF 模块，方法是将 MEF 模块添加到主项目的项目依赖项中。确保所有 MEF 模块项目都包含在与主项目相同的解决方案中。右键单击解决方案资源管理器中的主项目，选择项目依赖项，然后在所有 MEF 模块旁边打勾。这也将导致在 MEF 模块更改时重新编译主项目，这不是绝对必要的，但如果您在某处更改接口，这仍然是一个好主意。

# java - jvisualvm 去哪儿了？

> ID：13312229
> 
> 赞同：60
> 
> 时间：2012-11-09T16:41:32.597
> 
> 标签：java, macos

我正在运行 Mac OSX Snow Leopard。

我一直使用 Mac OSX 的常规软件更新功能更新 Java。

我过去曾使用过 Java`jvisualvm`工具并取得了巨大的成功。

今天早上我像往常`jvisualvm`一样输入了命令行。我收到以下错误：

```
 $ jvisualvm
 Unable to locate an executable at "/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/jvisualvm" (-1) 
```

所有其他 Java 工具（`java`、`javac`、`jps`等）都可以正常工作。

`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin`确实不包含`jvisualvm`（突然）。

`/usr/libexec/java_home`产量：

```
$ /usr/libexec/java_home
/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home 
```

怎么回事？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-14T13:51:57.953

似乎是链接的混合；/usr/bin/jvisualvm 符号链接指向不存在的东西（正如人们在上面指出的那样）。显然 jvisualvm 可执行文件（存根）存在，现在解决这个问题的方法是执行：

```
cd /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin

sudo ln -s /System/Library/Java/Support/VisualVM.bundle/Contents/Home/bin/jvisualvm . 
```

这需要 sudo 权限并创建缺少的符号链接，指向 VisualVM 包。不知道为什么会这样，但是升级到最新的 XCode 4.5.2 并没有自动为我解决这个问题。我正在运行 MacOS X 10.7.5 和 java 1.6.0_37

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-03T19:40:38.793

似乎支持包在更新时被删除了。 [https://discussions.apple.com/thread/4474992?start=0&tstart=0](https://discussions.apple.com/thread/4474992?start=0&tstart=0)

下载捆绑包以用作解决方法。 [http://visualvm.java.net/download.html](http://visualvm.java.net/download.html)

**编辑：**

使用此下载链接：[https](https://java.net/projects/visualvm/downloads/download/release132/VisualVM_132.d) ://java.net/projects/visualvm/downloads/download/release132/VisualVM_132.d ‌​mg

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-02-26T09:38:27.763

我下载了 visualvm（[来自 java.net 的 .dmg](https://visualvm.github.io/download.html)），它适用于我的 Mountain Lion。

![在此处输入图像描述](../Images/ea43fcebc7601b7788f9a5ca8e749b93.png)

![带有 Mac OS X 应用程序特定选项的 VisualVM 下载页面的屏幕截图](../Images/1b5d99e56dfc784e0afebb134e1299d2.png)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-09-06T06:07:12.463

For **JDK 9+** users

> Starting with JDK 9, Visual VM will not be included with Oracle JDK. Developers who would like to use Visual VM with Oracle JDK 9 or later can get it from the Visual VM open source project site.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-09T01:36:26.643

如果您已经在使用 NetBeans，另一种解决方法是使用它的分析器。在 7.3 版中：

*   从命令行、桌面或[javawebstart](/questions/tagged/javawebstart "显示标记为“javawebstart”的问题")启动 Java 应用程序。

*   在 NetBeans 中，选择`Profile > Attach Profiler`.

*   选择`Attach to: <external Application>`。

*   指定所需的分析选项。

*   单击`Attach`按钮。

*   选择目标应用程序。

![探查器对话框](../Images/db39a5541268eb0caae4a331023f303d.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-06T11:32:50.163

macOS Mojave 中 JDK 1.8 的 Visual VM 二进制路径是

```
/Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home/bin/jvisualvm 
```

基本上，

```
/Library/Java/JavaVirtualMachines/<JDK_DIR>/Contents/Home/bin/jvisualvm 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-09T21:31:12.190

我只能在我的美洲狮 MBP 上运行 .app 版本的 JVisualVM

```
open /usr/share/java/Tools/Java\ VisualVM.app 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-13T08:03:42.920

VisualVM 也可作为独立应用程序使用。你可以从 [https://visualvm.github.io/download.html安装它](https://visualvm.github.io/download.html)

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-04-13T02:29:03.163

有时它很简单......你需要通过安装visualvm

```
sudo apt-get install visualvm 
```

要查找文件，请使用

```
dpkg -L visualvm 
```

# c# - 将数组从按钮传递到按钮

> ID：13312230
> 
> 赞同：0
> 
> 时间：2012-11-09T16:41:38.523
> 
> 标签：c#, asp.net

使用 C# 和 ASP.net，我有一个双精度数组，其中填充了来自文件的信息。当它最终充满时，它会向用户显示标签中有多少字段已满。

此代码用于从文件中填充一个数组，此代码位于按钮内。

```
double[] arrayX; //imagine this is a global variable.

string line;
int j = 0;

Stream data = FileUpload1.PostedFile.Inputstream;
StreamReader sr = new StreamReader(data);

line = sr.ReadLine();
while (line != null)
{
  arrayX[j] = Convert.ToDouble(line);
  j++;
  line = sr.ReadLine();
}
label1.Text = j.ToString(); 
```

现在在网络浏览器中，它会显示如下元素的数量： `No. of elements: __10___`

如果用户同意这个数字，他点击第二个按钮，该按钮必须使用为其他操作填充的数组，但在我的网络浏览器中它说即使我已声明为全局变量，该数组也是空的。

所以我的问题是，如何从第二个按钮读取我的数组数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:44:24.123

您需要将数组保存在视图数据或会话中，然后从会话或视图状态访问数组

在你原来的方法

```
ViewState["mtarray"] = arrayX; 
```

并在您的按钮方法中

```
 arrayX=ViewState["mtarray"] as double[]; 
```

[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# java - 游戏动画设置：我如何知道 JFrame 已完成设置？

> ID：13312232
> 
> 赞同：1
> 
> 时间：2012-11-09T16:41:41.880
> 
> 标签：java, swing, jframe, awt

我正在使用`javax.swing.JFrame`双缓冲策略绘制游戏动画。首先，我设置了框架。

```
JFrame frame = new JFrame();
frame.setVisible(true); 
```

现在，我画一个像这样的对象（让它是一个圆圈，没关系）。

```
frame.createBufferStrategy(2);
bufferStrategy = frame.getBufferStrategy();
Graphics g = bufferStrategy.getDrawGraphics();
circle.draw(g);
bufferStrategy.show(); 
```

问题是在绘图时框架并不总是完全设置好。

似乎 JFrame 需要最多三个步骤来调整自身大小，直到达到最终大小。这有时会使绘图滑出框架或阻碍它完全出现。

我已经设法使用`SwingUtilities.invokeLater()`. 虽然这改善了结果，但有时绘图会滑开/看起来过早地绘制。

有什么想法/策略吗？提前致谢。

编辑：好的，谢谢。我没有提到我一开始就写了一个小小的乒乓球游戏。抱歉给我带来了困惑 我真正寻找的是用 Java 完成的加速游戏动画的正确设置。在阅读建议时，我发现我的问题[在这里](https://stackoverflow.com/questions/2067255/bufferstrategy-vs-diy-double-buffering-in-jframe)得到了回答（虽然是间接的） ，[这个例子](http://www.stumbleupon.com/su/8wGoxm/www.cokeandcode.com/info/tut2d.html)让我明白了。

对此的总结可能是在 Java 中为游戏图形制作动画，第一步是摆脱 GUI 逻辑开销。

有一篇关于*被动*渲染和*主动*渲染区别的[教程文章。](http://docs.oracle.com/javase/tutorial/extra/fullscreen/rendering.html)这可能有助于清理新手的头......

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:02:55.470

您可以使用 GlassPane，也可以简单地将 LayerUI 放在顶部，例如：

![一些可以缩放的东西](../Images/33bc61e5f5e977a117e6053d492eff65.png)

当您调整框架大小时，圆圈会重新缩放。

```
import java.awt.*;
import java.awt.geom.Ellipse2D;

import javax.swing.*;
import javax.swing.plaf.LayerUI;

/**
 */
public class ALittleSomething {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("A Little Something");
                JLayer<JComponent> aLittleSomething = new JLayer<>(new ALittleSomethingPanel(), new ALittleSomethingUI());
                frame.getContentPane().add(aLittleSomething);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(800, 450));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }

    static class ALittleSomethingPanel extends JPanel {

        private JLabel aLittleSomethingLabel = new JLabel("A Little Something");

        ALittleSomethingPanel() {
            add(aLittleSomethingLabel);
            aLittleSomethingLabel.setFont(aLittleSomethingLabel.getFont().deriveFont(42f));
        }
    }

    static class ALittleSomethingUI extends LayerUI<JComponent> {

        @Override
        public void paint(Graphics g, JComponent c) {
            Graphics2D g2 = (Graphics2D) g.create();
            super.paint(g2, c);
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
            g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

            int height = c.getHeight();
            int width = c.getWidth();

            Shape circle = new Ellipse2D.Double(5, 5, width - 10, height - 10);

            g2.setPaint(new GradientPaint(15, 0, new Color(90, 97, 105), 15, 30, new Color(132, 142, 152)));
            g2.setStroke(new BasicStroke(5));
            g2.draw(circle);

            g2.dispose();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T21:23:59.310

您最好绘制到自定义组件并将其添加到您的框架中，首先查看[如何使用根窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)，了解为什么直接绘制到框架是一个坏主意（上面已经有很多东西了它）然后看一下[这个](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)和[这个](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)以及[这个](https://stackoverflow.com/questions/13170002/when-i-trigger-my-fireball-creating-it-resets-my-character-jlabel/13170046#13170046)使用 Swing 完成的（基本）动画的例子——所有这些都只有默认的缓冲策略

您可能还想看看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)和[Graphics2D](http://docs.oracle.com/javase/tutorial/uiswing/painting/)就像一些入门书一样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:01:46.890

我会自己回答这个问题，因为这个问题有点误导，而且在我真正了解这些工具之前，我混合了一些东西。我从中学到的一点是，对于 Java 中的图形编程，有两种方法：*被动*渲染和*主动*渲染。

虽然*被动*渲染发生在事件调度线程 (EDT) 中，这是让操作系统和 VM 确定绘制组件的正确时间的过程，但实际上不可能或不想确定绘制事物的确切时间. 这不是创建动画游戏图形的正确方法。

相反，您需要的是*主动*渲染 stargetey，如本文这样的文章中[所述](http://www.cokeandcode.com/info/tut2d.html)。在那里，您可以完全禁用渲染事件调度，并通过自己的缓冲区翻转或 blitting 主动重绘整个场景（[请参阅 BufferStrategy](http://docs.oracle.com/javase/tutorial/extra/fullscreen/bufferstrategy.html)）。

*AWT/Swing 中的被动渲染*和*主动*渲染之间的区别[在 java 教程](http://docs.oracle.com/javase/tutorial/extra/fullscreen/rendering.html)中有简短的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:47:08.493

像这样的东西怎么样：

```
private void createAndShowGUI()
{
  frame = new JFrame();
  frame.createBufferStrategy(2);
  bufferStrategy = frame.getBufferStrategy();
  Graphics g = bufferStrategy.getDrawGraphics();
  circle.draw(g);
  bufferStrategy.show();
  frame.setVisible(true);
} 
```

并从构造函数或其他任何地方调用它：

```
public MyClass()
{
   SwingUtilities.invokeLater(new Runnable()
   {
      public void run()
      {
         createAndShowGUI();
      }
   });

   try
   {
      while(frame == null || !frame.isVisible())
         Thread.sleep(1);
   }
   catch(InterruptedException e)
   {
     e.printStackTrace();
     System.exit(1);
   }
} 
```

像这样的东西，对不起，我匆忙发布这个，我的一些代码可能是错误的。**

# weblogic - Internet Explorer 中的 Weblogic 出现 SSL 证书错误

> ID：13312233
> 
> 赞同：6
> 
> 时间：2012-11-09T16:41:47.690
> 
> 标签：weblogic, weblogic-10.x, weblogic12c

我安装了一个 Weblogic 服务器和一个站点。SSL 端口是 7002 当我尝试`https://localhost:7002/site`在 Internet Explorer 中访问安全页面时，我收到证书错误。单击继续访问网站不会执行任何操作。在 chrome 中，我可以选择“无论如何忽略”，我可以继续查看该页面。但在 Internet Explorer 中我没有这样的运气。不知道我做错了什么。我正在使用 weblogic 安装附带的默认证书。我没有生成任何私钥或证书。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:33:19.583

问题出在最近的 Windows 安全更新中，该更新阻止了任何具有少于 1024 位 SSL 密钥的站点。开箱即用的 WebLogic 附带 512 位自签名证书。如果您使用 2048 位密钥创建自己的自签名身份和密钥存储，问题就会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:33:27.930

Suleyman：我也面临同样的问题，虽然我知道这是由于最近的微软补丁造成的。我已经禁用了这些补丁，现在它工作正常。如果您可以分享创建 2048 位密钥的步骤，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T04:44:29.117

Anil：要创建您自己的 SSL 密钥并配置 WebLogic 以使用它，请按照以下步骤操作：

[http://techworldrocks.wordpress.com/2012/03/28/configure-self-signed-certificate-with-weblogic-server/](http://techworldrocks.wordpress.com/2012/03/28/configure-self-signed-certificate-with-weblogic-server/)

确保在密钥生成命令中包含“-keysize 2048”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-11T10:59:28.523

输入 cmd 以管理员身份启动：

```
certutil -setreg chain\minRSAPubKeyBitLength 512 
```

这允许使用不安全的 512 位长证书，并且只能在单个主机上执行一次。

# .htaccess - 当 url 作为参数传递时，htacess url 重写规则失败

> ID：13312237
> 
> 赞同：0
> 
> 时间：2012-11-09T16:42:03.807
> 
> 标签：.htaccess, url-rewriting

我有这个 URL 重写规则

```
RewriteRule ^(send-your-request.*)$ / [NC,L,QSA,R=301] 
```

它基本上应该只是从 URL 中删除“/send-your-request”（即用域中的查询字符串参数重写它，即

```
http://example.com/send-your-request/?a_aid=rocketnews24&pname=just%20a%20test 
```

被改写为：

```
http://example.com/?a_aid=rocketnews24&pname=just%20a%20test 
```

在那种情况下它可以工作，但是如果我添加最后一个参数，它就会停止工作

```
http://example.com/send-your-request/?a_aid=rocketnews24&pname=just%20a%20test&plink=http%3A%2F%2Fradio-eva.jp%2Fshop%2Fproducts%2Fdetail.php%3Fproduct_id%3D82 
```

谁能告诉我一个可以处理所有查询字符串参数的更好的重写规则？

**编辑** 这里是我的其他规则，但我在第一个规则上有“L”，所以它应该停止处理吧？

```
RewriteRule ^(send-your-request.*)$ / [NC,QSA,R=301,L]
Redirect 301 /products http://whiterabbitexpress.com/
RewriteRule ^index\.php$ - [L]
RewriteCond %{QUERY_STRING} ^(.*)q=(.*)$
RewriteRule ^(.*)$ $1?%1s=%2 [L,R=301] 
RewriteRule ^catalogsearch/result/?$ / [NC,QSA,L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T11:13:02.350

已解决：这是一个旨在防止注入的 Mod_security 规则。

SecRule REQUEST_URI "=(?:ogg|gopher|data|php|zlib|(?:ht|f)tps?)://" \ "capture,id:340165,t:none,t:urlDecodeUni,t:replaceNulls ,t:compressWhiteSpace,t:lowercase,rev:275,severity:2,msg:'Atomicorp.com 不支持的延迟规则：URI (AE) 中的未编码可能远程文件注入尝试',logdata:'%{MATCHED_VAR}'"

能够通过 ConfigServer ModSecurity Control 修改规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:40:49.127

没有承诺，但这里有一个替代方案，应该做同样的事情，但值得一试。重写中的`?`QueryString 将剥离，然后`%1`反向引用将重新附加它。

```
RewriteBase /
RewriteCond %{QUERY_STRING} (.*)
RewriteRule ^send-your-request/?$ /?%1 [NC,R=301,L] 
```

值得注意的是，QueryString 会随着重写自动传递，并且如果您的重写中存在 a，那么`QSA`修饰符只会附加一个附加参数`?`- 如果您在重写中省略`QSA`并包含`?`，它将删除现有的 QueryString。您也可以尝试离开`QSA`。

```
RewriteBase /
RewriteRule ^send-your-request/?$ / [NC,R=301,L] 
```

# python - 从其调用范围中提取变量的字符串格式化程序是不好的做法吗？

> ID：13312240
> 
> 赞同：11
> 
> 时间：2012-11-09T16:42:21.833
> 
> 标签：python

我有一些代码进行了大量的字符串格式化，通常，我最终得到的代码如下：

```
"...".format(x=x, y=y, z=z, foo=foo, ...) 
```

我试图将大量变量插入到一个大字符串中。

是否有充分的理由不编写这样一个使用`inspect`模块查找变量进行插值的函数？

```
import inspect

def interpolate(s):
    return s.format(**inspect.currentframe().f_back.f_locals)

def generateTheString(x):
    y = foo(x)
    z = x + y
    # more calculations go here
    return interpolate("{x}, {y}, {z}") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:57:16.883

**更新：** Python 3.6 内置了这个特性（一个更强大的变体）：

```
x, y, z = range(3)
print(f"{x} {y + z}")
# -> 0 3 
```

参见[PEP 0498 -- 文字字符串插值](https://www.python.org/dev/peps/pep-0498/)

* * *

它[手动解决方案]导致嵌套函数的行为有些令人惊讶：

```
from callerscope import format

def outer():
    def inner():
        nonlocal a
        try:
            print(format("{a} {b}"))
        except KeyError as e:
            assert e.args[0] == 'b'
        else:
            assert 0

    def inner_read_b():
        nonlocal a
        print(b) # read `b` from outer()
        try:
            print(format("{a} {b}"))
        except KeyError as e:
            assert 0
    a, b = "ab"
    inner()
    inner_read_b() 
```

注意：相同的调用成功或失败取决于变量是否在其上方或下方提及。

在哪里`callerscope`：

```
import inspect
from collections import ChainMap
from string import Formatter

def format(format_string, *args, _format=Formatter().vformat, **kwargs):
    caller_locals = inspect.currentframe().f_back.f_locals
    return _format(format_string, args, ChainMap(kwargs, caller_locals)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T16:48:40.553

下面的代码是一种更简单、更安全的方法。inspect.currentframe 并非在所有 python 实现中都可用，因此您的代码在不可用时会中断。在 jython、ironpython 或 pypy 下它可能不可用，因为它似乎是一个 cpython 东西。这会降低您的代码的可移植性。

```
print "{x}, {y}".format(**vars()) 
```

这种技术实际上在[Python 教程的输入和输出章节中有所描述](http://docs.python.org/2.6/tutorial/inputoutput.html)

> 这也可以通过使用“**”符号将表作为关键字参数传递来完成。这与新的内置 vars() 函数结合使用特别有用，该函数返回包含所有局部变量的字典。

也在 python 文档中为[inspect.currentframe](http://docs.python.org/2/library/inspect.html#inspect.currentframe)

> CPython 实现细节：此函数依赖于解释器中的 Python 堆栈帧支持，并不保证在所有 Python 实现中都存在。如果在不支持 Python 堆栈框架的实现中运行，则此函数返回 None。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T17:27:53.583

好老邮递员有一个功能[`_`](http://bazaar.launchpad.net/~mailman-coders/mailman/2.1/view/head:/Mailman/i18n.py#L57)可以做到这一点：

```
def _(s):
    if s == '':
        return s
    assert s
    # Do translation of the given string into the current language, and do
    # Ping-string interpolation into the resulting string.
    #
    # This lets you write something like:
    #
    #     now = time.ctime(time.time())
    #     print _('The current time is: %(now)s')
    #
    # and have it Just Work.  Note that the lookup order for keys in the
    # original string is 1) locals dictionary, 2) globals dictionary.
    #
    # First, get the frame of the caller
    frame = sys._getframe(1)
    # A `safe' dictionary is used so we won't get an exception if there's a
    # missing key in the dictionary.
    dict = SafeDict(frame.f_globals.copy())
    dict.update(frame.f_locals)
    # Translate the string, then interpolate into it.
    return _translation.gettext(s) % dict 
```

所以如果巴里华沙可以做到这一点，我们为什么不能呢？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T16:57:47.807

在`inspect`模块中，`currentframe`定义如下：

```
if hasattr(sys, '_getframe'):
    currentframe = sys._getframe
else:
    currentframe = lambda _=None: None 
```

因此，除非`sys`具有`_getframe`属性，否则该`interpolate`功能将不起作用。

[文档](http://docs.python.org/2/library/sys.html#sys._getframe)`sys._getframe`说：

> CPython 实现细节：此函数应仅用于内部和专用目的。它不保证在 Python 的所有实现中都存在。

* * *

写作

```
"{x}, {y}, {z}".format(**vars()) 
```

在函数体中并不比

```
interpolate("{x}, {y}, {z}") 
```

并且您的代码将更具可移植性。

# java - 休眠 @Size 验证器

> ID：13312242
> 
> 赞同：2
> 
> 时间：2012-11-09T16:42:27.133
> 
> 标签：java, hibernate, validation

我有一个带有名字字段的表单的 spring mvc 应用程序。此字段应至少包含 3 个或更多字符。我在支持 bean 类中使用 hibernate @Size 验证器，如下所示：

```
@Size(min=3, message="message.key")
String firstName; 
```

当此验证失败时，将显示相应的错误消息。但是，当页面在失败后重新加载时，输入的名字值会从输入字段中清除。如何使该值保留在字段中进行编辑？如果可能的话....

代码如下：

JSP Snippet - 这不是 portlet 应用程序

```
<portlet:renderURL var="createUserAction">
    <portlet:param name="action" value="createUser"/>
</portlet:renderURL>
<form:form method="post" commandName="userInformation" action="${createUserAction}" htmlEscape="false">
<h2>
    <fmt:message key="msg.label.form.title" bundle="${msg}" />
</h2>
<form:errors path="*" cssClass="errorblock" element="div"></form:errors>
<p>
    <form:label path="firstName">
        <fmt:message key="msg.label.form.fname" bundle="${msg}"/>
    </form:label>
   <form:input path="firstName" />
</p>
<p>
    <form:label path="lastName">
        <fmt:message key="msg.label.form.lname" bundle="${msg}"/>
    </form:label>
    <form:input path="lastName" />
</p>
<div style="margin-left: 150px; margin-top: 20px">
    <input type="submit" value="Save" /> 
    <input type="reset" value="Reset" />
</div>
</form:form> 
```

豆

```
@Component
public class UserInformation {

  @NotEmpty(message="msg.error.required.lname")
  private String lastName;

  @NotEmpty(message="msg.error.required.fname")
  @Size(min=3, message="msg.error.length.fname")
  private String firstName;

  public UserInformation() {
    super();
  }

  public String getLastName() {
    return lastName;
  }

  public void setLastName(String lastName) {
    this.lastName = lastName;
  }

  public String getFirstName() {
    return firstName;
  }

  public void setFirstName(String firstName) {
    this.firstName = firstName;
  } 
```

}

控制器

```
@Controller
@RequestMapping("VIEW")
public class UserManagement {

  @Autowired
  private UserInformation userInformation;

  @Autowired
  private Validator validator;

  @Autowired
  private MessageSource messageSource;

  @RequestMapping(params="page=addUser")
  public String addUser(Model model){
    userInformation = new UserInformation();
    model.addAttribute("userInformation", userInformation); 
    return Page.ADD_USER;
  }

  @RequestMapping(params="action=createUser")
  public String createUser(
   @ModelAttribute(value="userInformation") UserInformation userInformation,
   BindingResult result, Model model) throws ApplicationException{

    // get values
    String firstName = userInformation.getFirstName();

    System.out.println("fname="+firstName);

    Set<ConstraintViolation<UserInformation>> constraintViolations = 
     validator.validate(userInformation);

   for(ConstraintViolation<UserInformation> constraintViolation : constraintViolations) {
     String propertyPath = constraintViolation.getPropertyPath().toString();
     String message = constraintViolation.getMessage();
     result.addError(
       new FieldError(
         "member", 
         propertyPath, 
         messageSource.getMessage(
           message, 
           null, 
           Locale.ENGLISH
         )
       )
     );
  }
  // Errors found
  if(result.hasErrors()){
    return UMConstants.Page.ADD_USER;
  }

  String successMsg = messageSource.getMessage(
    "msg.user.added", 
    new Object[]{userInformation.getFirstName()}, 
    Locale.ENGLISH
   );

   model.addAttribute("successMsg", successMsg);

   return UMConstants.Page.INDEX;
  }
} 
```

用户将单击执行**addUser**方法的链接以加载带有表单的页面，如上面的 JSP 片段所示。当用户单击提交按钮时，会调用**createUser**方法。这是完成验证的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:01:28.323

我遇到了同样的问题，我通过（痛苦地）迭代 Spring MVC `form:input`jsp 标签的源代码找到了解决方案......我想我会在这里分享它，也许它可以帮助某人。

简而言之：问题来自`form:input`标签。此标记在评估其值时检查与此字段（`path`属性）相关的错误，如果发现任何错误，它将使用实例的`rejectedValue`属性`FieldError`而不是命令或表单对象中的字段值。

在控制器方法的参数中使用`@Valid`注解时，Spring 将正确填充对象的`rejectedValue`属性`FieldError`。

但是，如果您`FieldError`使用短构造函数（3 args）手动创建对象，则不会设置`rejectedValue`属性，并且标签将使用此空值进行显示...`FieldError`

解决方案是在创建`FieldError`对象时使用构造函数的长版本，例如：

```
result.addError(
       new FieldError(
         "member", 
         "firstName", 
         userInformation.getFirstName(),
         false,
         new String[0],
         new Object[0],
         messageSource.getMessage(
           message, 
           null, 
           Locale.ENGLISH
         )
       )
     ); 
```

`form:input`标签将使用 的属性`rejectedValue`，`FieldError`这是这个更长的构造函数中的第三个参数，并且在使用更简单的 3 args 构造函数时没有设置......

请注意，命令或表单对象（此处为 userInformation）上的实际值始终是正确的，这使得该错误/怪癖很难跟踪。

希望对某人有所帮助，最终...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T01:54:19.877

在返回之前发生错误时尝试将用户信息添加到模型

```
if(result.hasErrors()){
model.addAttribute("userInformation", userInformation); 
return UMConstants.Page.ADD_USER; 
```

}

更新

我想我弄清楚了你的问题。当您遇到错误时，您调用 addUser 方法并在 add user 方法中创建新的 UserInformation 对象，并且该对象没有要在页面上显示的值。您可以在 addUser 方法中尝试类似下面的方法。

```
@RequestMapping(params="page=addUser")
public String addUser(Model model,HttpServletRequest request){
    userInformation =  (UserInformation)request.getAttribute("userInformation");

   if(userInformation == null){
    userInformation = new UserInformation();
   }
    model.addAttribute("userInformation", userInformation); 
    return Page.ADD_USER;
  } 
```

# entity-framework - DbSet<>.Add 导致调用 SaveChanges。为什么？

> ID：13312243
> 
> 赞同：0
> 
> 时间：2012-11-09T16:42:29.007
> 
> 标签：entity-framework, dbcontext

我正在做这样的标准功能：

```
var dbCxt = new dbContext();
var entity = new entity();
entity.Property = "123";
dbCxt.EntitySet.Add(entity); <== SaveChanges is called!!!!

//Do some child stuff.

dbCxt.SaveChanges(); 
```

当我覆盖 DbContext 中的 SaveChangs 并在 Add to the DbSet 上设置一个断点时，我感到很惊讶。为什么它在 Add 上调用它？它应该只像 ObjectContext 那样在 SaveChanges 上调用它！

我如何防止这种疯狂？（做任何事务性的事情都这么多！）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:30:34.443

我想通了为什么它会这样做。这是一个代码优先迁移帖子，在更改跟踪器中没有任何内容，因此从 EF 的角度来看，除了进行迁移工作之外，实际上没有发生任何事情。它仅在您第一次对 DbContext 执行任何操作时发生。

# php - Zend Cache File 后端标识符的最大长度是多少？

> ID：13312245
> 
> 赞同：0
> 
> 时间：2012-11-09T16:42:38.237
> 
> 标签：php, zend-framework, caching

我想知道缓存 id (backend File or TwoLevels) 的最大长度是多少，在文档或源代码中的任何地方都找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:58:23.907

API 没有理由强制限制。它与 PHP 字符串一样大，PHP 字符串的长度仅受服务器内存的限制。

# ios - 我如何在 iOS 中使用 RestKit 来处理一个 RESTful 服务器发送没有 rootkey 的 JSON？

> ID：13312247
> 
> 赞同：0
> 
> 时间：2012-11-09T16:42:40.170
> 
> 标签：ios, json, post, response, restkit

我成功地 POST 到一个 RESTful 服务，但它正在发回以下 json 响应；

```
 T restkit.network:RKObjectLoader.m:202 bodyAsString: {"Successful":true,"Message":"We have received 9138 message(s)","Data":null} 
```

（来自 RestKit 调试器/记录器）。如您所见，该 JSON 中没有根密钥。现在 RestKit 在尝试使用以下代码映射它时会抱怨；

```
RKObjectMapping *serverResponseMapping = [RKObjectMapping mappingForClass:[ServerReply class]];
[serverResponseMapping setRootKeyPath:@""]; //tried without this and with a value but no change!
[serverResponseMapping mapKeyPath:@"Success" toAttribute:@"success"];
[serverResponseMapping mapKeyPath:@"Message" toAttribute:@"message"];
[serverResponseMapping mapKeyPath:@"Data" toAttribute:@"data"];
[[manager mappingProvider] addObjectMapping:serverResponseMapping]; 
```

尝试映射时，我从 Restkit 收到以下错误；

```
W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: '' 
```

只是为了突出 `-[serverResponseMapping setRootKeyPath:@""];` **//尝试没有这行代码，也有一个值但没有变化！**

谁能告诉我如何解决这个问题，因为我认为我无法更改服务器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:32:36.197

终于解决了它，所以我想我会在其他人发现它有用的情况下更新它。如果使用 RKObjectManager postObject 消息的块构造，则可以在 ObjectLoader 中指定返回消息的接收对象；

```
[manager postObject:thePostMsgObj usingBlock:^(RKObjectLoader *loader){
    loader.targetObject = theResponseObj;
    loader.delegate = self;
    loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[response Class]];
}]; 
```

# css - JavaFX2：我可以分别为节点的内容和笔画设置不透明度吗？

> ID：13312249
> 
> 赞同：2
> 
> 时间：2012-11-09T16:42:50.037
> 
> 标签：css, svg, javafx-2, opacity, stroke

我正在处理 JavaFX 2.2 (JDK 7u7) 和 SVG 文件（再次；D）。我需要将 SVG 内容映射到 FX 对象。

我现在的问题是，我`<rec>`在我的 SVG 文件中定义了一个（矩形）。相应的 CSS 样式定义：

*   填充不透明度：0

和

*   中风不透明度：1

据我所知，我只能为一个完整的节点设置不透明度，描边不透明度和填充不透明度没有区别。

[我也没有在CSS 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)中找到合适的条目。

再一次，我只是错过了什么，还是我现在只是受限？任何提示我如何解决我的微妙问题？

每次都感谢任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:24:47.587

将 -fx-fill 和 -fx-stroke 属性设置为 RGB + Alpha 油漆规格。

在您引用的 CSS 参考指南中搜索将提供语法。

例如，以下样式类将填充不透明度设置为 0.5，将描边不透明度设置为完全不透明。

```
 .rectangle {
   -fx-fill: rgba(0,255,0,0.5);
   -fx-stroke: rgba(255,0,0,1);
 } 
```

# iphone - 未调试时无法在重新打开时及时恢复

> ID：13312256
> 
> 赞同：0
> 
> 时间：2012-11-09T16:43:06.767
> 
> 标签：iphone, crash

我正在经历一种相当令人痛苦的行为。当从 Xcode 执行时，我的应用程序运行并按下主页按钮并重新启动它工作正常。相反，当我在 iPhone 上执行它时，第一次它也可以正常工作，但是当我重新打开它时，它会在初始屏幕上冻结一秒钟，然后每次都会崩溃并显示不同的日志，但总是显示消息：“AppName”失败及时恢复

鉴于在线程化到 Xcode 时不会发生这种情况，我认为我可能不会使用 Instruments：我还尝试将 UIAlerts 放在应用程序委托和主视图控制器的启动回调中，但是当它崩溃时没有一个被调用。

它可能是什么，我如何定位它？

谢谢，法布里齐奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:01:39.550

您可以尝试使用 Instruments 对您的应用程序进行分析，以查看您的应用程序中的哪些原因导致无法及时恢复。显然，您的情况假设您在调试应用程序和未调试应用程序时有不同的行为，因此分析器也可能无法发现问题，但您最好尝试一下。

要解决这个问题，请执行以下操作：

1.  将您的设备连接到计算机
2.  启动应用程序并将其移至后台
3.  发射仪器
4.  选择时间分析器
5.  单击“所有进程”下拉菜单，选择您的设备并找到您应用的进程
6.  开始分析
7.  重新打开应用

如果你很幸运，你会看到应用程序在哪里花费了很多时间（可能是某种重绘，可能是数据集的一些重新初始化——不管是什么原因），这将引导你找到最初的原因的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T20:30:24.680

奇怪的是，这只发生在我自己的 iPhone 上：我在另一部 iPhone 和 iPad 上尝试过，一切正常。因此，这不再是编程问题，而是维护问题。

# wpf - 具有不同 TreeView 的 DataType 属性的不同 HierarchicalDataTemplates 集

> ID：13312259
> 
> 赞同：0
> 
> 时间：2012-11-09T16:43:23.840
> 
> 标签：wpf, treeview, hierarchicaldatatemplate

我有一个 WPF TreeView 绑定到混合类型对象的层次结构。因此，我使用带有“DataType”属性的 HierarchicalDataTemplates 来指定用于每种类型的模板，这很好用（TreeView 会自动为每种对象类型捕获正确的模板）。

现在我有一个问题，我有第二个 TreeView（在同一个 XAML 文件中），它要填充相同类型的对象。然而，这一次，它们必须以另一种方式显示，所以我需要另一组 HierarchicalDateTemplates。同样，我会使用“DataType”属性。但是如果我把它们放在同一个 XAML 文件中，我当然会得到一个错误（我不能为同一类型定义两个模板）。

有没有办法以某种方式确定它们的范围，以便第一个 TreeView 专门使用第一组，而第二个 TreeView 只使用第二组？

（请注意，由于事先不知道对象树结构，因此我必须使用“DataType”方法（无论如何我更喜欢），并且不能使用静态 HierarchicalDataTemplate。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:48:43.607

将第一个 DataTemplate 集放在第一个 TreeView 的资源中，将第二个 DataTemplate 集放在第二个 TreeView 的资源中，它应该可以工作。

```
<TreeView>
    <TreeView.Resources>
        <!-- put your data templates here -->
    </TreeView.Resources>
</TreeView> 
```

有关详细信息，请参阅[FrameworkElement.Resources](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.resources%28v=vs.95%29.aspx)。

# android - Phonegap（科尔多瓦）。如果我双击返回按钮然后应用程序崩溃

> ID：13312263
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:43:36.597
> 
> 标签：android, cordova

如果我在我的 Android 设备上双击“返回”按钮，那么应用程序就会崩溃。

我的应用程序使用 JQuery Mobile 和 Phonegap 2.0 (Cordova) 构建。

我遇到了这个问题。我将焦点放在页面上的任何 INPUT 字段上，以便出现键盘。我双击设备上的“返回”按钮。预期：应用程序返回到我访问过的上一页。实际：应用程序崩溃

Eclipse Log Cat 在它发生时向我显示下一条消息：

```
11-09 18:20:04.175: D/SoftKeyboardDetect(7399): Ignore this event
11-09 18:20:04.597: D/dalvikvm(136): GC_FOR_ALLOC freed 502K, 11% free 15278K/17159K, paused 149ms
11-09 18:20:04.632: D/CordovaWebView(7399): >>> loadUrlNow()
11-09 18:20:04.675: D/SoftKeyboardDetect(7399): Ignore this event
11-09 18:20:04.707: W/InputManagerService(136): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub

$Proxy@414c0dc0 (uid=10008 pid=7399)
11-09 18:20:04.707: W/InputManagerService(136): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub

$Proxy@414c0dc0 (uid=10008 pid=7399)
11-09 18:20:04.711: W/IInputConnectionWrapper(7399): showStatusIcon on inactive InputConnection
11-09 18:20:04.925: D/OpenGLRenderer(7399): Flushing caches (mode 0)
11-09 18:20:04.988: D/dalvikvm(202): GC_CONCURRENT freed 869K, 32% free 10761K/15623K, paused 2ms+22ms
11-09 18:20:05.425: D/OpenGLRenderer(7399): Flushing caches (mode 1)
11-09 18:20:05.429: D/DroidGap(7399): onDestroy()
11-09 18:20:05.429: D/CordovaWebView(7399): >>> loadUrlNow()
11-09 18:20:05.433: D/CordovaWebView(7399): >>> loadUrlNow()
11-09 18:20:05.457: D/DroidGap(7399): onMessage(onPageStarted,about:blank)
11-09 18:20:05.476: D/Cordova(7399): onPageFinished(about:blank)
11-09 18:20:05.476: D/DroidGap(7399): onMessage(onPageFinished,about:blank)
11-09 18:20:05.476: D/DroidGap(7399): onMessage(exit,null) 
```

有人可以帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:47:14.087

如果我正确解释的话，页面左上角的按钮是向上按钮，而不是返回。它应该是带有左尖括号的应用程序图标。请参阅[实现祖先导航](http://developer.android.com/training/implementing-navigation/ancestral.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:35:47.597

我已经解决了这个问题。解决方案是将 Phonegap 更新到 2.2 版，并为后退按钮事件上的所有“输入”文本字段绑定“模糊”。谢谢大家的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T06:48:56.003

使用这个 CSS 作为修复：它为我解决了这个问题。

```
input {
-webkit-user-modify: read-write-plaintext-only
} 
```

# javascript - jQuery 移动滑块句柄 - 停止拖动但允许选择轨道

> ID：13312264
> 
> 赞同：0
> 
> 时间：2012-11-09T16:43:36.337
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

我正在使用 jQuery 移动滑块，并希望停止拖动滑块句柄，但是当用户选择轨道上的一个点时，我仍然希望它沿着滑块轨道移动。我尝试了以下方法：

```
 $('.ui-slider').live(' mousemove touchmove', function(){
         return false;
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:04:24.343

我想你的答案就在这里：[jQuery UI Slider - disable slip on track/enable on handle mousedown](https://stackoverflow.com/questions/10093156/jquery-ui-slider-disable-sliding-on-track-enable-on-handle-mousedown)

我会尝试`$('.ui-slider-handle').mousedown(function(){return false;});`并让你知道

# javascript - 未使用 Javascript 显示的 Fusion Tables 图标标记

> ID：13312267
> 
> 赞同：0
> 
> 时间：2012-11-09T16:43:56.193
> 
> 标签：javascript, html, google-maps, google-fusion-tables

我用谷歌的 Fusion Tables 做了一张桌子。我有一列来分配图标标记。当我使用嵌入代码时，图标显示正确。但是当我使用表格 ID 并使用过滤器时，所有图标都会变成小红球（默认图标）。

如何在不重载标记选项样式的情况下从列中获取自定义图标？在文档上说我只能使用 5 个图标名称。

或者如何为我在列上创建的每个过滤器分配我自己的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:03:25.557

您似乎没有[将 FusionTable 地图](https://www.google.com/fusiontables/DataSource?snapid=S765811535r)设置为使用该列中定义的图标。

您必须使用 FusionTables 用户界面来配置地图以使用这些图标。单击“配置样式”链接并按照说明将图标分配给列中的标记（点：标记图标：列）。

[在“帮助”中查看此条目](http://support.google.com/fusiontables/answer/185991/?&)

# java - 从Java中的链表中删除头

> ID：13312268
> 
> 赞同：1
> 
> 时间：2012-11-09T16:43:57.470
> 
> 标签：java, linked-list

这应该是一个相当基本的问题，但我一生都无法弄清楚。我正在使用我的导师给我的两个文件，我必须编写一个方法`removeFirst`来从声明的链表中删除头部并返回旧的头部值。它不能接受任何参数。这是[文件 1](http://pastebin.com/nQN87Sw6)和[文件 2](http://pastebin.com/NB2FVQ14)。

我的 removeFirst 和调试代码如下。我不知道如何在`aList`不能将其用作参数的情况下引用它，尤其是因为链表不是全局的。当我使用调试代码时，它会打印`aList`，然后打印`21`（它应该删除的列表的头部，以及`removeFirst`应该返回的内容），但是它不打印更新的链表——它只是空白。

`removeFirst`代码：

```
public IntNode removeFirst() {
    IntNode cur = getHead();

    head = cur.getNext();
    head.setPrev(null);

    cur.setNext(null);

    return cur;
} 
```

调试代码（在底部`main`）：

```
for(int i = 0; i < aList.size(aList.getHead()); i++) {
    aList.print(aList.findObject(i));
}

aList.print(aList.removeFirst());
System.out.println("");

for(int j = 0; j < aList.size(aList.getHead()); j++) {
    aList.print(aList.findObject(j));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:45:53.537

你需要`return head;`代替`return cur;`

**编辑**对不起。我显然误解了你的问题陈述。如果该`removeFirst()`方法应该返回列表的*新*头，则上述内容是合适的。如果它应该返回已删除的元素（在您对原始帖子的评论和编辑之后现在很清楚），那么它应该可以正常工作。

大概`removeHead()`是您的列表类中的一个实例方法。您不需要传递参数，因为列表`this`在方法内部可用。

这将有助于查看`aList`. 您的`file 1`链接说它指向 MyLinkedList.java，但粘贴的代码是用于 IntNode.java。

**编辑 2**我认为，问题可能出在您的调试代码上。`findObject(j)`不返回列表的`j`^(第 th 个)`j`元素——它返回包含作为值的列表元素。从代码来看，它看起来像是`MyLinkedList.print(IntNode)`从指定的节点开始打印整个列表。如果您将`for`调试代码中的循环简单地替换为：

```
aList.print(aList.getHead()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:47:57.593

我认为除了返回之外，您一切都很好。您需要返回原样`head`以表示已删除的节点（前一个）。`cur``cur``head`

```
public IntNode removeFirst() {
    IntNode cur = getHead();

     head = cur.getNext();
     head.setPrev(null);

     cur.setNext(null);

     return head;
 } 
```

**编辑：**既然你已经更新了你的问题，这是你第二个问题的答案；

**您可以参考`aList`使用`this`运算符。**

更新：我`removeFirst()`在你的类中添加了方法，`MyLinkedList`然后我在你的方法中添加了这些语句（最后）

```
 aList.removeFirst();
    aList.print(aList.getHead());
    System.out.println(""); 
```

它工作正常并将输出打印为：

```
 84 88 92 96 100 
    100 96 92 88 84 
    Size = 5
    Adding another IntNode
    21 84 88 92 96 100 
    Adding yet another IntNode
    21 52 84 88 92 96 100 
    The object is 92
    The object containing 50 was not found.
    The object removed has 96 in it.
    The object containing 50 was not found. Nothing was removed.
    21 52 84 88 92 100 
    Removing Head
    52 84 88 92 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:07:57.017

我的假设是，由于您*通过引用*访问所有对象，因此在执行`removeFirst()`

```
IntNode cur = getHead(); 
```

如同

```
cur = head; 
```

因为它们可以在同一范围内访问。通过在执行时执行此操作：

```
head.setPrev(null);
...
cur.setNext(null); 
```

你基本上是这样做的：

```
head.setPrev(null);
...
head.setNext(null); 
```

或者....

```
null <-- head --> null 
```

看看这是怎么回事？

您的目标是获取要删除的节点的副本，然后销毁该副本对列表的引用。

```
IntNode cur = new IntNode(getHead().getVal()); 
```

当您尝试从节点中删除旧头时：

```
head.setNext(head.getNext());
head.setPrev(null); 
```

# servlets - 为什么一旦我们覆盖了 service()，委托就永远不会到达 doGet()？

> ID：13312270
> 
> 赞同：0
> 
> 时间：2012-11-09T16:44:04.670
> 
> 标签：servlets

在我向以下 servlet 发出 GET 请求后，文本“In service method”被写入，无法解释。这是为什么？

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;

public class MyServlet extends HttpServlet {
   public void service(HttpServletRequest req,
                       HttpServletResponse resp) throws IOException {
      Writer out = resp.getWriter();
      out.write("In Service method");
   }

   public void doGet(HttpServletRequest req, HttpServletResponse resp) 
                                                        throws IOException {
      Writer out = resp.getWriter();
      out.write("In get method");
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:57:22.773

的默认实现[**正是完成**](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#service%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)[`HttpServlet#service()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#service%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)这项工作。这是其 javadoc 的摘录：[](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html#service%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse%29)

 **> 从公共服务方法接收标准 HTTP 请求并将它们分派到此类中`doXXX`定义的方法。此方法是该方法的特定于 HTTP 的版本`Servlet.service(javax.servlet.ServletRequest, javax.servlet.ServletResponse)`。无需重写此方法。

它根据 HTTP 方法委托给适当的 servlet 方法。例如，当`request.getMethod()`等于 时`"GET"`，它委托给`doGet()`。顺便说一句，你也读过最后一句话吗？

无论如何，您基本上应该自己执行相同的工作。

```
@Override
public void service(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    Writer out = resp.getWriter();
    out.write("In Service method");

    if ("GET".equalsIgnoreCase(req.getMethod())) {
        doGet(req, resp);
    }
    // Check other methods as well!
} 
```

或者只是调用该`super`方法，以便它可以完成它的工作。

```
@Override
public void service(HttpServletRequest req, HttpServletResponse resp) throws IOException {
    Writer out = resp.getWriter();
    out.write("In Service method");
    super.service(req, resp);
} 
```

或者根本不覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:46:31.227

[从HttpServlet](http://www.docjar.com/html/api/javax/servlet/http/HttpServlet.java.html)（第 607 行）读取代码将告诉您原因。`service()`负责委托给适当的 doXXX 方法。

您可能想阅读普通[Servlet](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/index.html)（或[GenericServlet](http://tomcat.apache.org/tomcat-5.5-doc/servletapi/index.html)），而不是子类 HttpServlet。您将在文档中看到 Servlet 是协议独立的，而 HttpServlet 绝对是协议相关的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T09:20:13.810

HttpServlet 的 service 方法实际上是检查请求是 GET 还是 POST，然后根据请求的类型调用相应的方法。**

# .net - ClickOnce 运行时 DFSVC.EXE

> ID：13312273
> 
> 赞同：13
> 
> 时间：2012-11-09T16:44:11.797
> 
> 标签：.net, clickonce

有人可以详细说明或指出一些有关 DFSVC.EXE 在 ClickOnce 应用程序的执行周期中究竟扮演什么角色的信息吗？如果我通过以下方式启动 ClickOnce 应用程序：

```
rundll32.exe dfshim.dll,ShOpenVerbApplication http://www.domain.com/application/?param1=foo 
```

我看到一个 DFSVC.EXE 进程已启动。然后我看到我的 ClickOnce 应用程序的实际 EXE 进程被调用（由 DFSVC.EXE，它在 ProcessExplorer 中被列为父进程）。此时，我可以通过以下方式终止 DFSVC.EXE：

```
rundll32.exe dfshim.dll,KillService 
```

我的 ClickOnce 应用程序继续运行。我还注意到，如果我不杀死 DFSVC.EXE，它会在大约 15 分钟后自行消失。

我怀疑 DFSVC.EXE 负责下载、安装和启动应用程序——这是正确的吗？有没有办法告诉 DFSVC.EXE 在调用 ClickOnce 应用程序的这些任务完成后自动关闭？它持续存在的原因（即使在 ClickOnce 应用程序关闭后）是否是对 ClickOnce 应用程序的下一次调用的优化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-06T09:55:05.893

`DFSVC.EXE`检查应用程序是否已安装并且是最新的（如果已配置），如果需要，将应用程序下载到用户 AppData 中的 ClickOnce 文件夹，然后从其当前位置启动它（每次更新都会更改）。它还必须删除之前可能在后台执行的应用程序版本。

# expressionengine - 如何使用结构输出选择菜单

> ID：13312289
> 
> 赞同：7
> 
> 时间：2012-11-09T16:45:02.973
> 
> 标签：expressionengine

我正在开发一个响应式站点，需要将我的[Structure](http://buildwithstructure.com/)驱动导航输出到较小屏幕的选择菜单中。在查看 Structure 的文档时，这在本地似乎是不可能的。我错过了什么吗？

经过一番挖掘，似乎附加[结构条目](http://devot-ee.com/add-ons/structure-entries)是我需要的票，但需要注意一点。SE在使用它吐出自定义导航时有很多偷听（就查询而言）。将复杂菜单的影响性能降至最低的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:25:43.840

我目前正在使用 Twitter Bootstrap 的 Button Dropdown javascript 插件执行此操作。[http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

我还使用 MX Mobile Device Detect 为设备提供下拉菜单，同时桌面用户获得完整菜单。

我认为下拉按钮脚本只允许一个级别的列表，但是由于它的移动设备你需要多个吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:26:00.187

我知道在模板本身中做这件事显然更可取，但是一个 JS 替代品是 TinyNav.js。
它会将您的导航转换为选择下拉菜单。

[http://tinynav.viljamis.com/](http://tinynav.viljamis.com/)

# php - Google Analytics 导致 500 内部错误

> ID：13312290
> 
> 赞同：0
> 
> 时间：2012-11-09T16:45:03.663
> 
> 标签：php, javascript, ajax, google-analytics

使用从谷歌分析产品生成的这段代码：（信息审查）

```
<meta name="google-site-verification" content="xxxxxxxxxxxx" />

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxxxxxx']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 
    'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 
    'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; 
    s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

导致内部 500 错误，代码在 head 标签中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-10T18:22:31.517

如果您的网站使用 Smarty 模板引擎，只需将此代码粘贴到模板中就会导致 500 Internal Server Error，因为模板对代码的解释不正确。

过去的代码

```
{literal} 
...
{/literal} 
```

块，您的问题将得到解决！

向[Logicia.co.uk 博客大喊大叫](http://www.logicia.co.uk/blog/2012/04/google-analytics-and-the-smarty-template-engine/comment-page-1/#comment-83997)，它帮助我解决了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:48:45.920

您是否尝试过在元素结束之前将脚本标签移动到内容的底部？

IE：

```
<body>
  stuff here
  <ga script include>
</body> 
```

脚本本身正在将另一个脚本标签附加并加载到头顶。因此，您可能会在 GA 附加和加载新脚本与其他 JS 编译之间发生冲突。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T17:24:44.693

*WAG（Wild-A* **-Guess）*，基于您对头部中许多其他 SEO 内容和脚本的评论...

将分析代码分成两部分。将加载的部分放在`ga.js`靠近头顶的任何其他脚本调用之上。

```
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script'); ga.type = 
    'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 
    'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; 
    s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

将执行分析的另一部分放在 head 标签的底部，甚至放在 body 标签的底部。

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxxxxxx']);
  _gaq.push(['_trackPageview']);
</script> 
```

如果您仍然遇到问题，请查看如果您`_gaq`完全删除代码会发生什么

*   如果您仍然收到 500 个错误，那么问题出在`ga.js`. 您可以尝试切换到旧的、非异步风格的 Google Analytics。
*   如果错误消失，那么问题在于分析跟踪像素请求......

# vim - 在缓冲区之间快速切换？

> ID：13312296
> 
> 赞同：2
> 
> 时间：2012-11-09T16:45:12.303
> 
> 标签：vim

我有很多缓冲区打开并在 then I`Ctrl+w`和 then之间切换`Ctrl+[movement key]`。有没有更好的办法？因为这样当我要做不止一个动作时，我最终不得不按 4 个键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T17:00:31.887

如果你想在*windows*之间移动，你总是可以映射`Ctrl-W, H/J/K/L`到任何你想要的：

```
map <C-h> <C-w>h
map <C-j> <C-w>j
map <C-k> <C-w>k
map <C-l> <C-w>l 
```

如果你想在*缓冲区*之间移动，你可以使用`:buffer`命令，打印你想去的文件名的一部分：按下`Tab`将循环浏览名称中包含这部分的所有文件。例如，您想显示文件名为“some_long_c_file.c”的缓冲区，并且您知道没有任何其他名称以“file.c”结尾的打开文件：只需键入`:buffer file.c`并按下`Tab`（甚至是“ile.c”或更短的文件） ，这将完成它到“some_long_c_file.c”。

要在最后两个缓冲区之间快速切换，请使用`Ctrl-^`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:13:24.260

我发现最好的方法是安装[`bufexplorer.vim`](http://www.vim.org/scripts/script.php?script_id=42). 这让您可以快速切换到可以选择任何缓冲区的屏幕。您还可以关闭缓冲区等。

这是我打开 bufexplorer 的 vim 的屏幕截图，显示它的帮助屏幕：

![在此处输入图像描述](../Images/8e21bcbb661d66c8f99887b2649a2270.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-24T01:31:52.010

对我来说，解决方案有两个：

1）使用[未受损](https://github.com/tpope/vim-unimpaired)的- 所以`]b`和`[b`

2) map`:b#`切换到前一个缓冲区。我用过`map <cr> :b#<cr>`。（因此输入键将在两个打开的缓冲区之间来回切换）。

# sql - 根据返回的行列表获取下一行值

> ID：13312302
> 
> 赞同：2
> 
> 时间：2012-11-09T16:45:29.243
> 
> 标签：sql, oracle, plsql

在 Oracle 中，假设我有一个返回以下列表的查询：

```
ID     Sequence#
12        1
15        3
25        5 
```

在这种情况下，我只知道某行的 ID（假设为 12），我需要返回具有下一个序列号的行的 ID，在这种情况下为 3（id = 15）

我该怎么做？我知道有一个 Oracle 功能`lead`，但我无法成功实施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:52:02.660

是的，您可以使用`lead`函数来获取下一个值。这是如何完成的示例。

```
-- sample of data from your question
SQL> with t1(ID, Sequence#) as
  2  (
  3    select 12, 1 from dual union all
  4    select 15, 3 from dual union all
  5    select 25, 5 from dual
  6  )
  7  select *
  8    from (select id
  9               , sequence#
 10               , lead(sequence#) over(order by id) next_sequence#
 11               , lead(id) over(order by id) next_id#
 12           from t1
 13         )
 14   where id = 12
 15  ;

        ID  SEQUENCE# NEXT_SEQUENCE#   NEXT_ID#
---------- ---------- -------------- ----------
        12          1              3         15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:51:34.773

```
SELECT * FROM table1 where ID in (SELECT min(ID) FROM table1 WHERE ID > 12) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:54:01.807

```
Select sequence from my_ table where id=(select min(id) from my_table where sequence> 1) 
```

将上述查询中的 (1) 替换为您正在搜索其下一个的任何值

# iphone - cocos2d spritesheet 坐标随不同设备变化

> ID：13312305
> 
> 赞同：0
> 
> 时间：2012-11-09T16:45:34.487
> 
> 标签：iphone, cocos2d-iphone, sprite, retina-display

我正在制作一个从精灵表加载图像的游戏。在 iPhone 4 模拟器或 iPad 模拟器上运行时，纹理从各种 spritesheets 中正确加载。在 iPhone 4S 或 5 或视网膜 iPad 上运行时，sp​​ritesheet 的比例会发生变化。图片将有助于更好地解释这一点：

精灵表：

![纹理贴图](../Images/978db14f1ef164b0ab49cc422d9685a3.png)

正确显示：

![正确显示精灵](../Images/a571ab8fcd473a7fcb3a5bfed258f723.png)

纹理贴图上的错误比例：

![在此处输入图像描述](../Images/a7ce2892593ac65ebc13b95aad3e2cd1.png)

在最后一张图片中很明显，纹理贴图从第一种情况放大了 2 倍。用于两个版本的中间帖子的坐标是 CGRectMake(5, 100, 25, 120)。我应该为视网膜和正常使用两个纹理贴图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:06:29.743

Retina 正在放大图像，因为它没有后缀“-hd”。

# c++ - 找到位于大多数角度间隔中的角度

> ID：13312306
> 
> 赞同：2
> 
> 时间：2012-11-09T16:45:38.047
> 
> 标签：c++, algorithm, implementation, intervals, angle

我有角度间隔（以弧度为单位）[0,2π）

*   例如区间 [(2π)/3,(3π)/4],[π/2,π] 等。
*   但也可能存在区间 [(3π)/2,π/3]

我必须找到位于大多数区间的角度。在 C++ 中找到它的最佳方法是什么？我怎样才能表示角度间隔？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:50:06.133

你可以实现一个简单的[扫描线算法](http://en.wikipedia.org/wiki/Sweep_line_algorithm)来解决这个问题。

对于每个区间，将区间的开始和结束添加到向量中；排序这个向量，然后遍历它。如果您有任何跨越 2π 边界的区间，只需将其分成两个区间，它们都在 (0, 2π) 之内。

当您遍历列表时，请跟踪当前点有多少重叠迭代，以及到目前为止您看到的最佳角度是多少（以及在该角度重叠了多少间隔）。一旦到达终点，您就会知道最佳角度是多少。

如果您需要多个角度，您可以很容易地采用这种方法来记住具有最大重叠的间隔，而不是单个角度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:49:30.073

我会通过将 [0, 2π] 的分区维护为与区间覆盖相对应的范围来做到这一点，每个范围都有一个计数。首先，这是算法在没有任何区间超过 0（或 2π）的条件下的工作方式。还假设区间归一化如下：如果区间以 0 结束，则将其更改为以 2π 结束；如果从 2π 开始，则改为从 0 开始。

1.  创建一个 (range, count) 对的列表，使用单个范围 [0, 2π] 和计数 0 进行初始化。（列表将按范围的开头进行排序。列表中的范围只会在它们的位置重叠端点并且将始终覆盖 [0, 2π])。
2.  如下所述处理每个间隔
3.  扫描列表以查找具有最高计数的 (range, count) 对。随意解决关系。返回范围内的任意角度。

处理一个区间`i`：

1.  找到第一个（范围，计数）对（称为它`s`）`i.start >= s.range.start`（即范围包含`i.start`）。（请注意，如果`i.start`是一个范围的结束，那么它将是另一个范围的开始；这会选择它作为开始的对。）
2.  找到最后一个（范围，计数）`e`对`i.end <= e.range.end`。（请注意，如果`i.end`是一个范围的开始，那么它将是另一个范围的结束；这会选择它作为结束的对。）
3.  如果`i.start > s.range.start`(`i.range`开始于`s`) 的内部，`s`分成两对 (range, count)`s1 = ([s.range.start, i.start], s.count)`和`s2 = ([i.start, s.range.end], s.count)`. `s`在列表中替换为`s1`和`s2`（按此顺序）。
4.  如果，以与上一步平行的方式`i.end < e.range.end`替换，用于进行拆分。`e``i.end`
5.  `s`对于从（或`s2`如果`s`在步骤 3 中拆分）到包括`e`（或`e1`如果`e`在步骤 4 中拆分）的每一对，将计数加 1。

如果您不关心包含特定角度的间隔的实际数量，只是它是最大值，则跨 0（或 2π）的间隔的簿记更容易：只需取间隔的补数（反向开始和结束）并从第 5 步中的计数中减去 1 而不是加法。如果您确实需要绝对计数，请执行补码技巧，然后将列表中的每个计数加 1。

以上将无法正确处理相邻的区间（例如：[0, π/3] 和 [π/3, π]；或 [2π/3, 2π] 和 [0, 1]）。在这些情况下，据我了解，它们邻接的角度（π/3 或 0）应计为两个间隔。可以调整上述算法，以便当间隔开始与范围结束点重合时，在相关对之后插入一个新的（范围，计数）对；新对将具有单角度范围（即`range.start == range.end`）。类似的过程将适用于从间隔末尾开始的范围。我认为通过这些调整，上述算法可以正确处理所有情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T16:52:05.930

我的解决方案将涉及间隔开始对的列表以及有多少间隔与其重叠：

```
 1        2       3       2              1
|---------|--------|-----|---------------|------|

|------------------|
          |--------------|
                   |---------------------|
                   |----------------------------| 
```

因此，对所有起点和终点进行排序并遍历列表，为每个新间隔分配与其重叠的间隔计数（如果它是起点则增加，否则减少）。然后从重叠计数中取最大值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T16:58:10.440

如果你不象征性地这样做，我认为你会遇到奇怪的边缘情况。

您的角度范围不仅不能完全表示为二进制分数（引入舍入误差），而且它们是不合理的。（大于 3.14159265359 但小于 3.14159265360；除了象征性外`Pi`，如何说角度等于/2？）`Pi`

我看到的最稳健的方法是依次获取所有区间组合，确定它们的交集，并查看这些组合区间中的哪些是最独立区间交集的结果。

这也有一个好处，它不仅给你一个，而且给你满足你条件的*所有角度。*

# reporting-services - SQL Server Reporting Services 在聚合数据上运行总计

> ID：13312308
> 
> 赞同：2
> 
> 时间：2012-11-09T16:45:45.693
> 
> 标签：reporting-services, ssrs-2008

大家，在 SSRS 中，我们有 2 列，如下所示。

```
销售 | 运行销售
5.00 | 5.00
3.00 | 8.00
1.00 | 9.00

```

区别在于第一列（销售额）是一个分组行，因此要获得每行销售额的总计，我们使用 =Sum(Fields!Sales.Value)。

当我尝试使用运行价值来获得运行销售总额时，就会出现问题。它给了我聚合函数只能用于页眉和页脚的 SSRS 错误。在这种情况下，将总数放在页脚中是没有意义的。有谁知道这个问题的解决方案/解决方法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:35:29.207

我有同样的问题; 这就是我解决它的方法。

因此，这里是如何对本身是 sum 函数的列进行小计。SSRS 2005 不允许您聚合聚合函数。例如，显示运行总计的列的总计，在每日库存余额计算中很有用。将以下代码添加到报表 Report > Properties

```
Dim public totalBalance As Decimal 
Public Function AddTotal(ByVal balance As Decimal) AS Decimal totalBalance = totalBalance + balance return balance 
End Function 
Public Function GetTotal() return totalBalance 
End Function 
```

此代码添加了两个变量：totalbalance 和 cnt 作为十进制数。和两个函数`AddTotal`和`GetTotal`。 `AddTotal`允许将行中的项目相加，在您拥有的值单元格中按如下方式使用；

```
=RunningTotal(Fields!ColumnName.Value,sum,nothing) 
with
=Code.AddTotal(RunningTotal(Fields!ColumnName.Value,sum,nothing)) 
```

在整个单元格中，您无法简单地使用它

```
=sum(RunningTotal(Fields!ColumnName.Value,sum,nothing))
use instead
=Code.GetTotal() 
```

如果您需要对多个字段的总和求和，只需添加更多变量和公共函数。

[http://blog.wingateuk.com/2011/09/ssrs-aggregate-of-aggregate.html](http://blog.wingateuk.com/2011/09/ssrs-aggregate-of-aggregate.html)

# javascript - 带有回调的jQuery平滑滚动？

> ID：13312312
> 
> 赞同：-3
> 
> 时间：2012-11-09T16:46:07.640
> 
> 标签：javascript, jquery

你们有谁知道任何 jQuery 插件（或 js 脚本）可以平滑地滚动页面，并且可以在滚动完成时使用回调或调用某些函数？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:01:15.397

[jQuery.scrollTo](http://demos.flesler.com/jquery/scrollTo/)将平滑地滚动页面，并提供一个允许您指定回调的 onAfter 函数。

# apache - 如何重写 URL 以匹配任何 BikeID（特定短语）？

> ID：13312314
> 
> 赞同：0
> 
> 时间：2012-11-09T16:46:16.597
> 
> 标签：apache, coldfusion, url-rewriting

我在托管服务器 (hostek.com) 上使用 ColdFusion 10。

我正在尝试编写重写规则，以便任何带有 BikeID 的 URL 都将被重定向到特定页面。我将此作为页面上的第一条规则。我的其他规则工作得很好。

这是我的规则：

```
RewriteEngine on
RewriteRule ^bikeid* /redirect/redirect.cfm [NC,NS,L] 
```

此规则适用于此 URL

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/bikeid=2069 
```

此规则不适用于此 URL

```
http://flyingpiston2012-com.securec37.ezhostingserver.com/?bikeid=2069 
```

我尝试过的其他不起作用的规则如下：

```
RewriteRule ^bikeid* /redirect/redirect.cfm [NC,NS,L]
RewriteRule ^*bikeid* /redirect/redirect.cfm [NC,NS,L]
RewriteRule *bikeid* /redirect/redirect.cfm [NC,NS,L]
RewriteRule \?*bikeid* /redirect/redirect.cfm [NC,NS,L]
RewriteRule ^\?*bikeid* /redirect/redirect.cfm [NC,NS,L]
RewriteRule ^\?bikeid* /redirect/redirect.cfm [NC,NS,L] 
```

我必须在规则中添加什么来匹配包含短语“bikeid”的任何 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:06:13.510

我的主机 (hostek.com) 终于回复我并为我提供了答案。我真的不知道它是如何工作的，因为他们的解释完全缺乏。不过它确实有效。他们指示我将其添加到我的 .htaccess 文件的底部：

```
RewriteCond %{QUERY_STRING} .+
RewriteRule (.*) /redirect/redirect.cfm$1? [NC,NS,L] 
```

# css - 将设备从纵向更改为横向时，媒体查询不会选择新的浏览器大小

> ID：13312316
> 
> 赞同：1
> 
> 时间：2012-11-09T16:46:21.303
> 
> 标签：css, media-queries

我正在尝试创建一个“响应式”的网站。我找到了一个名为“resizemybrowser.com”的工具，它可以告诉你浏览器的大小。我一直在使用这些信息在我的 CSS 中进行媒体查询。

奇怪的是，当我导航到这个网站时，当我将设备从纵向旋转到横向时，浏览器宽度不会改变。height 属性确实显示了不同的值，但宽度始终为 980px，我不明白为什么。

谢谢你。

**编辑1：**

我还尝试使用网络工具“resizemybrowser.com”中的“外部”设置。现在，与横向模式相比，它确实显示了不同的纵向尺寸。它在我的 Galaxy s3 上返回 720 的纵向和 1280px 的横向。但是，当我使用这些值测试我的媒体查询时，它仍然会为横向和纵向选择 720 像素的媒体查询。这是CSS：

```
 @media only screen and (max-width: 720px) {        
.hero-unit {
  background: url("../img/1.jpg") 100% 100% no-repeat;
background-size: contain;
width: 20em;
height: 10em;
padding:0px;
    }

  @media only screen and (min-width:721px) and (max-width: 1280px) {        
.hero-unit {
    background: url("../img/2.jpg") 100% 100% no-repeat;
background-size: contain;
width: 26em;
height: 10em;
padding:0px;
    }

      h2 {
  font-size: 1.8em;
  line-height: 1em;
} 
```

}

编辑 2

我尝试在我的代码中添加以下行，但没有任何区别。

```
 <meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;' name='viewport' />' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:20:33.130

我认为您需要添加

```
<meta name="viewport" content="width = device-width"> 
```

比较带有和[不](http://www.quirksmode.org/m/tests/widthtest.html)[带有](http://www.quirksmode.org/m/tests/widthtest_vpdevice.html)此标签的结果，请参阅**媒体查询**部分。在我的设备上，它完全按照您的意愿工作。

# php - jQuery从cookie接收参数

> ID：13312318
> 
> 赞同：0
> 
> 时间：2012-11-09T16:46:27.353
> 
> 标签：php, jquery, html, cookies

我正在创建一个嵌套在其中的菜单

```
<a href="#">
<div class="container"> </div>
<div class="title"> </div>
<div class="Chapter"> </div>
</a> 
```

我的 PHP`foreachloop :`告诉我这些容器元素中有多少可以是 10 或 20。

我想要做的是使用 Jquery 告诉我我点击的菜单项的子编号。目前我正在使用

```
var count2 = $(this).parent().index(); 
```

然后我将参数保存到cookie中，`createCookie("menu",count2);`

*cookie 设置正确*，现在包含一个字符串“10”。

我的问题是：我可以使用哪个 jquery 函数来接收菜单项的子编号参数并向该菜单项添加一个类。

类似的东西

```
if (readCookie("menu") != null) {

   $("a .container:nth-child(readCookie("menu")").removeClass("").addClass("active");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:49:43.157

我不知道您使用什么插件来读取/写入 cookie，但以下代码适用于该插件...

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

```
var menu = $.cookie("menu");
if (menu) {
   $("a .container:nth-child(" + menu +")").addClass("active");
} 
```

如果`readCookie`在你的例子中是正确的，那么你想要这个......

```
var menu = readCookie("menu");
if (menu) {
   $("a .container:nth-child(" + menu +")").removeClass("").addClass("active");
} 
```

我删除`removeClass("")`了，因为那没有做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T16:50:43.093

尝试这个。`eq(x)`返回 jquery 选择器的第 x 个结果。

```
$("a .container:eq(" + readCookie("menu") + ")").addClass("active"); 
```

# c# - 加载后如何将用户重定向到另一个页面是 ASP .NET MVC？

> ID：13312324
> 
> 赞同：0
> 
> 时间：2012-11-09T16:46:37.017
> 
> 标签：c#, javascript, asp.net-mvc, view, controller

例如，我有一些带有操作链接的视图：

```
@Html.ActionLink("Action", "Controller") 
```

`Action`动作返回一些视图：

```
public ActionResult Action()
{
    string someModelForView = "some url i need to redirect after view was fully loaded";
    return View("SomeView", someModelForView);
} 
```

我需要将用户重定向到 url，`someModelForView`在视图完全加载后在模型中定义，并且此页面上的所有 javascripts 都已执行。这个视图可能是空的，没有任何内容，我只需要执行一些 javascript，然后将用户重定向到外部页面。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T16:52:46.990

渲染视图并加载 JavaScript 后，您（服务器）已经将您的响应（封装在返回的 中`ActionResult`）发送到客户端（浏览器）。因此，您不能让 ASP.NET MVC 重定向您——服务器已完成对请求的处理。

不过，您可以改用 JavaScript 重定向：

```
// Here goes your JavaScript code that needs to be executed
// ...

// ... and here comes the redirect:
window.location.href = "http://newurl.com"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:54:10.293

正如@achristov 所建议的那样，您可以直接进行重定向。但如果你必须返回`SomeView`执行 javascript，你可以使用这个：

```
@model string
<html>
    <head>
    </head>
    <body>
        <script type="text/javescript">
            $(document).ready( function() {
                // all your javascript code...
                // ...and then:
                window.location = "@Model";
            });
        </script>
    </body>
</html> 
```

# jax-rs - 如何在 RestEasy 中通过消息传递错误代码

> ID：13312325
> 
> 赞同：1
> 
> 时间：2012-11-09T16:46:49.827
> 
> 标签：jax-rs, resteasy

我正在使用以下代码发送错误消息。

这是我自己的错误代码和自定义消息。我正在发送消息作为回应。

```
throw new WebApplicationException(
    Response.status(1002)
            .header(ae.getMessage(), ae)
            .type(MediaType.TEXT_PLAIN)
            .build()); 
```

问题是，前端人员能够看到状态码，但看不到消息。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:57:20.127

您应该使用实体方法来设置消息：

```
Response.status(1002)
        .entity(ae.getMessage())
        .type(MediaType.TEXT_PLAIN)
        .build()); 
```

# c - c - strtok 和 while 循环终止问题

> ID：13312328
> 
> 赞同：1
> 
> 时间：2012-11-09T16:47:02.880
> 
> 标签：c, while-loop, strtok

基本上我试图在每次遇到空格时将用户输入连接到一个字符数组（源）数组中。换句话说，如果 sourceHold 包含“祝你生日快乐”，则源的数组内容将为“happy”（在 0）、“birthday”（在 1）、“to”（在 2）、“you”（在3）。sourcesTag 保存 char 数组数组的当前索引。退出循环时我不断收到错误（代码总是在它完全退出循环之前中断。最后一个“LOOP EXIT”打印行永远不会打印。把它放在那里测试出了什么问题。知道为什么我的循环不会终止吗？我猜测这是因为当整个输入字符串被标记时，while 语句没有正确终止，但是什么是好的语句呢？

```
while(sourceHold != NULL)
    {
        if(sourceHold[0] == '\n')
            break;

        printf("%s \n", sourceHold);

        strcpy(sources[sourcesTag], strtok(sourceHold, " "));
        sourcesTag++;

        strcpy( sourceHold, strtok(NULL, "\n"));
    } 
    printf("LOOP EXIT"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T16:49:00.820

```
while(sourceHold != NULL) 
```

循环中的任何内容都不会改变`sourceHold`，并且

```
strcpy( sourceHold, strtok(NULL, "\n")); 
```

确保`break`ing 条件

```
if(sourceHold[0] == '\n') 
```

从来没有遇到过，因为用a`strtok`覆盖`'\n'`（如果有的话）`'\0'`。

所以是的，你有一个无限循环，添加一个检查`sourceHold[0] != 0`应该可以解决这个问题。

但是，最好有一个指针

```
char *tok = strtok(sourceHold, " ");
while(tok != NULL) {
    strcpy(sources[sourcesTag++], tok);
    tok = strtok(NULL, " \n");
} 
```

避免半信半疑`strcpy(sourceHold, strtok(NULL, "\n"));`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:11:34.703

看看[手册页](http://www.manpagez.com/man/3/strtok/)。

> 在第一次调用 strtok() 时，应在 str 中指定要解析的字符串。在应解析相同字符串的每个后续调用中，str 应为 NULL。

您需要使用 sourceHold 调用一次，然后应使用 NULL 调用所有其他调用。也许是这样的：

```
 strcpy(sources[sourcesTag], 
           strtok(0 == sourcesTag ? sourceHoldPtr : NULL, " "));
    sourcesTag++; 
```

# php - 如何从php中的数组回显？

> ID：13312334
> 
> 赞同：-3
> 
> 时间：2012-11-09T16:47:17.823
> 
> 标签：php, arrays, count, echo, strlen

我有一个文本文件，其中包含如下数字：

```
12345678901234567890
123456789012345678901
123456789012345678902
1234567890123456789012
1234567890123456789023
12345678901234567890123
12345678901234567890234 
```

我写了一个脚本来逐行读取这个文件。我想计算行中的字符，而不仅仅是字节，并且只选择包含 21 或 22 个字符的行。

使用下面的脚本有效。不要问我为什么当我说 23 时它读取 21 个字符。我认为这与文件编码有关，因为`strlen`我只得到了字节。

选择长度为 21 或 22 个字符的行后，我需要拆分行。如果是21，应该变成两个字符串（一个15个字符串和一个6个字符串），如果是22个字符应该分成一个16个字符串和一个6个字符串。

我尝试将它放在一个数组中，但数组显示如下：

```
Array ( [0] => 123456789012345 [1] => 678901 ) Array ( [0] => 123456789012345 [1] => 678903 ) 
```

我希望它改为这样显示：

```
123456789012345=678901
123456789012345=678903 
```

知道如何从数组中回显吗？

```
$filename = "file.txt";
$fp = fopen($filename, "r") or die("Couldn't open $filename");

while (!feof($fp)){
    $line = fgets($fp);
    $str = strlen($line);
    if($str == 23){
        $str1=str_split($line, 15);
        print_r($str1);
        foreach ($str1 as $value)
        {
           echo $value . "=" ;
        }
    }
    if($str == 24){
        $str1=str_split($line, 16);

        foreach ($str1 as $value)
        {
            echo $value . "=" ;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:54:49.943

只是一些指针：

```
$filename = "file.txt";
$lines    = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
if ($lines === FALSE) {
   die "Couldn't open $filename";
}

foreach ($lines as $line)
{
    $length = strlen($line);

    if ($length < 21 || $length > 22)  {
        continue;
    }

    $start = 15;
    if ($length === 22) {
        $start = 16;
    }

    echo substr($line, 0, $start), '=', substr($line, $start), "\n";
} 
```

那是使用[`file`](http://php.net/file)and [`substr`](http://php.net/substr)。在 PHP 中，一个字符是一个字节。

* * *

一个不同的例子：

```
$filename = "file.txt";
$lines    = file($filename, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
if ($lines === FALSE) {
   die "Couldn't open $filename";
}

foreach ($lines as $line)
{
    $start = strlen($line) - 6;

    if ($start === 15 || $start === 16)
    {
        echo substr_replace($line, '=', $start, 0), "\n";
    }

} 
```

此示例使用[`substr_replace`](http://php.net/substr_replace)并`$start`直接预先进行计算。

# cakephp - cakePHP 中的 PoundCake 插件

> ID：13312343
> 
> 赞同：0
> 
> 时间：2012-11-09T16:47:48.430
> 
> 标签：cakephp

我正在尝试在 cakephp 1.2 中使用磅蛋糕插件。但我收到以下错误“致命错误：在第 25 行调用 C:\wamp\www\OnlineTickets\app\plugins\bcp\controllers\components\layouts.php 中的未定义方法 App::path()”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:56:44.117

您尝试使用的插件与 CakePHP 1.2 不兼容，因为`App::path()`该功能仅存在于 1.3 及更高版本中。

# sql-server - 使用 runas 命令远程登录 SQL Server

> ID：13312346
> 
> 赞同：13
> 
> 时间：2012-11-09T16:47:56.373
> 
> 标签：sql-server, runas

我被困在这一点上使用 runas 命令。我正在尝试使用该服务器上的 Windows 身份验证登录到远程 SQL Server 实例。我正在使用这个命令 -

```
runas /netonly /user:Domain\Username 
      /server=someIP "C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe" 
```

但是当我这样做时，它会打开我的 Management Studio - IP 是远程服务器的 IP，默认情况下选择 Windows 身份验证，并且我有我当前系统的域和用户名。

我实际上需要一种方法来指定连接字符串以登录到远程 SQL Server 并在其上触发查询。是跨域。

还有一个问题 - 我是否需要在触发查询的机器上安装 Management Studio？

谢谢。

**编辑**

为了更好地理解，我正在改写。

我有服务器 A 和服务器 B（两台独立的计算机）。我需要在 B 上从 A 发起查询。A 没有任何 sql 服务器或管理工作室。B 两者都有。我必须使用 Windows 身份验证（类似于 myDomain\username）登录到 B 的 sql server。我正在使用我在 B 上管理工作室属性中的“目标”中提到的 runas 命令。这是错的吗？我使用不同的用户名（但域相同）登录 A，因为我必须登录 B。如何完成此任务？

感谢和抱歉迟到的编辑。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T16:52:04.767

我在快捷方式上使用以下命令在不在域上的 xp 映像上运行 SSMS，以使用域凭据连接到服务器。

```
%windir%\System32\runas.exe /netonly /user:domain\username "C:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe -S SERVERNAME" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-09T16:52:36.413

没错，/netonly 将打开您当前的环境，SSMS 将愚蠢地在登录对话框中显示您的凭据。这是意料之中的，因为 /netonly 确实意味着提供的身份将*仅在 net 上*使用。但是，当您使用任何远程资源进行身份验证时，远程站点会将您身份验证为“域\用户名”。

您可能不需要 /server 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-27T10:19:54.093

我无法发表评论，所以我会给出新的答案。使用带有服务器名称的快捷方式

```
%windir%\System32\runas.exe /netonly /user:domain\username "C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\Ssms.exe -S SERVERNAME" 
```

您首先需要将服务器名称和服务器 IP 添加到您的主机文件中：

```
C:\Windows\System32\drivers\etc\hosts 
```

没有它你需要使用服务器IP：

```
%windir%\System32\runas.exe /netonly /user:domain\username "C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\Ssms.exe -S SERVER_IP" 
```

例如，您想使用帐户名 STACKUSER2019 在域 MASTER 中使用名称 MSSQLSERVER01 连接到服务器 10.10.10.123。因此，您将此行添加到主机文件：

```
10.10.10.123 MSSQLSERVER01 
```

在它从 CMD 或快捷方式运行之后：

```
%windir%\System32\runas.exe /netonly /user:MASTER\STACKUSER2019 "C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\Ssms.exe -S MSSQLSERVER01" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-16T09:15:24.293

**步骤 1：**导航到 ssms.exe 文件

*SSMS 2016 版：*

```
C:\Program Files (x86)\Microsoft SQL Server\130\Tools\Binn\ManagementStudio\Ssms.exe 
```

*SSMS 2017 版本：*

```
C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\Ssms.exe 
```

**右键单击**ssms.exe**并**选择**属性**

然后*选项卡* **兼容性**

并单击*按钮* **更改所有用户的设置**

*选中* **以管理员身份运行此程序，**然后单击确定

**第 2 步：**使用此路径创建快捷方式

*SSMS 2016 版：* `C:\Windows\System32\runas.exe /savecred /user:domain\username "cmd /c \"C:\Program Files (x86)\Microsoft SQL Server\130\Tools\Binn\ManagementStudio\Ssms.exe\""`

*SSMS 2017 版本：* `C:\Windows\System32\runas.exe /savecred /user:domain\username "cmd /c \"C:\Program Files (x86)\Microsoft SQL Server\140\Tools\Binn\ManagementStudio\Ssms.exe\""`

注意：路径中的***cmd /c***，这完全不同。

就是这样。希望它对你有用。

**PS**：关于第一步，如果您只想更改以管理员身份为特定用户启动应用程序，请在计算机上以该用户身份登录，并在没有**更改所有用户设置的情况下执行与步骤相同的操作**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T23:15:56.140

如果无法使用名称管道进行连接（即无法使用 SERVERNAME 进行连接），则可以使用 IP 地址，例如：

```
%windir%\System32\runas.exe /netonly /user:domain\username "Ssms.exe -S 10.20.30.10" 
```

* * *

路径`SSMS.exe`取决于您的 SQL 引擎版本：

*   2008 R2：`C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE\Ssms.exe`
*   2012 年：`C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Ssms.exe`
*   2014 年：`C:\Program Files (x86)\Microsoft SQL Server\120\Tools\Binn\ManagementStudio\Ssms.exe`
*   2016 年：`C:\Program Files (x86)\Microsoft SQL Server\130\Tools\Binn\ManagementStudio\Ssms.exe`

# asp.net-mvc - mvc razor 视图布局的最佳实践

> ID：13312350
> 
> 赞同：1
> 
> 时间：2012-11-09T16:48:24.407
> 
> 标签：asp.net-mvc, razor

我正在寻找使用 MVC 设计剃刀视图的最佳实践。

这将是更好的选择：

HtmlHelper 扩展方法

```
 @Html.TextBox("txtName") 
```

或者
直接写html

```
 <input type"text" id="txtName" name="txtName" /> 
```

我发现了 2 个不同的链接。第一个[http://blogs.msdn.com/b/aspnetue/archive/2010/09/17/second_2d00_post.aspx](http://blogs.msdn.com/b/aspnetue/archive/2010/09/17/second_2d00_post.aspx)说**使用 HTMLHelper 扩展方法。**
第二个[http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx](http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx)说**10 – 每次可以写 HTML**

所以我有点困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:52:58.377

由于您使用的是`Razor`，我会充分利用它所提供的功能，并且`HtmlHelper`扩展允许您在很多地方更快、更轻松地编写 html。

有时您可能不得不使用 Html，`@Html.ActionLink`例如，您可能希望在锚点中包含标签而不能使用 .

但是，如果您可以使用任何一种方法获得相同的结果，我建议您使用`Razor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:03:02.590

甚至名称`HtmlHelper`也应该已经提示您是否应该使用它。你需要帮忙吗？如果没有，只需从头开始编写 html。html 是如何生成的并不重要：从头开始或使用 html 助手。重要的是它是使用正确的输入名称生成的，以便模型绑定器可以将这些输入绑定到模型。

例如，假设您有以下模型将被传递给视图并在 POST 上接收：

```
public class SomeModel
{
    public Customer Customer { get; set; }
}

public class Customer
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

为了确保您的输入将绑定到模型，您需要在页面上输入三个输入：

```
<input type="hidden" id="whatever" name="Customer.Id" /> 
<input type="text" id="whatever" name="Customer.FirstName" />
<input type="text" id="whatever" name="Customer.LastName" /> 
```

拥有这个 html 标记将确保正确的模型思维。但是，您可以使用 HtmlHelpers 来实现此标记，这要容易得多：

```
@Html.HiddenFor(m => m.Customer.Id)
@Html.TextBoxFor(m => m.Customer.FirstName)
@Html.TextBoxFor(m => m.Customer.LastName) 
```

这不仅会`name`在每个输入上为您提供适当的属性，而且还会相应地分配`id`属性，因此您不必自己做所有这些。

* * *

看来第二篇文章的作者建议不要使用 HtmlHelpers 有两个原因：

1.  学习目的：我假设说“Web 开发人员必须习惯于编写 HTML”，他的意思是开发人员应该确切地知道正确的模型绑定需要什么 html 标记。
2.  对黑盒的恐惧：似乎作者害怕使用 HtmlHelpers 会生成不正确的 html 标记，或者他只是不知道会生成什么 html。

我不同意他的说法：“HtmlHelpers 的唯一生存理由就是​​将 HTML 隐藏起来”。我宁愿说“HtmlHelpers，他们唯一的生存理由就是​​帮助编写 Html 标记”

* * *

**摘要：** HtmlHelpers**帮助**您编写正确的 html 标记，这就是我建议您使用它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:37:17.180

Html 助手不是只是节省时间的装饰性代码片段。考虑根据模型属性类型选择适当的编辑器，并且 - 这也是非常重要的 - 它们有助于客户端验证，前提是您包括 jquery.unobtrusive-ajax.js 和 jquery.validate.js。
最后一个不能通过简单地编写 HTML 来实现。
从我所说的可以很容易地得出，Html 助手“知道”模型，而普通标记则不知道。
最后由您决定使用什么，但在做出决定时更好地了解 Html 助手。

# matlab - libmwi18n.so 丢失

> ID：13312352
> 
> 赞同：2
> 
> 时间：2012-11-09T16:48:27.590
> 
> 标签：matlab

> **可能重复：**
> [MCR libmwi18n.so 文件丢失](https://stackoverflow.com/questions/10972819/mcr-libmwi18n-so-file-missing)

我在 Linux 机器上运行 Matlab。我使用 mcc 编译器来获取我的 .exe 文件。我在 Matlab 命令窗口中运行：

```
mbuild -setup
mcc -m -v test.m 
```

但是，当我尝试从命令行运行我的 exe 文件“test”时，出现以下错误：

```
error while loading shared libraries: libmwi18n.so: cannot open shared object 
file: No such file or directory 
```

我试图在我的机器上手动搜索，`libmwi18n.so`但它似乎不存在。另外，我在互联网上找不到有关它的信息。

如果有人可以帮助我解决这个问题，我将不胜感激。

# mongodb - mongo - 无法连接到服务器 127.0.0.1:27017

> ID：13312358
> 
> 赞同：208
> 
> 时间：2012-11-09T16:48:39.633
> 
> 标签：mongodb, pymongo

我来自 riak 和 redis，我从来没有遇到过启动此服务或交互的问题。

这是 mongo 普遍存在的问题，我相当无能。重新启动没有帮助。我是 mongo 的新手。

```
mongo
MongoDB shell version: 2.2.1
connecting to: test
Fri Nov  9 16:44:06 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

这是我在日志中看到的。

```
 now open)
Fri Nov  9 16:44:34 [conn47] end connection 10.29.16.208:5306 (1 connection now open)
Fri Nov  9 16:45:04 [initandlisten] connection accepted from 10.29.16.208:5307 #48 (2 connections now open)
Fri Nov  9 16:45:04 [conn48] end connection 10.29.16.208:5307 (1 connection now open)
Fri Nov  9 16:45:04 [initandlisten] connection accepted from 10.29.16.208:5308 #49 (2 connections now open)
Fri Nov  9 16:45:04 [conn49] end connection 10.29.16.208:5308 (1 connection now open)
Fri Nov  9 16:45:34 [initandlisten] connection accepted from 10.29.16.208:5316 #50 (2 connections now open)
Fri Nov  9 16:45:34 [conn50] end connection 10.29.16.208:5316 (1 connection now open)
Fri Nov  9 16:45:34 [initandlisten] connection accepted from 10.29.16.208:5317 #51 (2 connections now open)
Fri Nov  9 16:45:34 [conn51] end connection 10.29.16.208:5317 (1 connection now open)
Fri Nov  9 16:46:04 [initandlisten] connection accepted from 10.29.16.208:5320 #52 (2 connections now open)
Fri Nov  9 16:46:04 [conn52] end connection 10.29.16.208:5320 (1 connection now open)
Fri Nov  9 16:46:04 [initandlisten] connection accepted from 10.29.16.208:5321 #53 (2 connections now open)
Fri Nov  9 16:46:04 [conn53] end connection 10.29.16.208:5321 (1 conn 
```

* * *

## 回答 #1

> 赞同：313
> 
> 时间：2013-06-12T17:40:22.103

通常这是因为您在尝试启动 mongo shell 之前没有启动 mongod 进程。

启动mongod服务器

```
mongod 
```

打开另一个终端窗口

启动 mongo shell

```
mongo 
```

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-03-09T11:22:39.767

解决。

这个问题可以通过下面提到的4个步骤来解决

1) 删除 .lock 文件

```
sudo rm /var/lib/mongodb/mongod.lock 
```

2）修复mongodb

```
mongod -–repair 
```

3）启动mongod服务器

```
sudo service mongod start 
```

4）启动mongo客户端

```
mongo 
```

有关更多详细信息，请查看[http://shakthydoss.com/error-couldnt-connect-to-server-127-0-0-127017-srcmongoshellmongo-js-exception-connect-failed/](http://shakthydoss.com/error-couldnt-connect-to-server-127-0-0-127017-srcmongoshellmongo-js-exception-connect-failed/)

[http://shakthydoss.com/technical/error-couldnt-connect-to-server-127-0-0-127017-srcmongoshellmongo-js-exception-connect-failed/](http://shakthydoss.com/technical/error-couldnt-connect-to-server-127-0-0-127017-srcmongoshellmongo-js-exception-connect-failed/)

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-11-09T22:24:20.237

如果 mongo shell 无法与 mongod 服务器通信，您会看到此错误。

这可能是因为地址错误（主机或 IP）或者它没有运行。需要注意的一点是，提供的日志跟踪不涵盖您的`mongo timestamp`.

你可以吗：

1.  提供用于启动 mongod 进程的命令行参数（如果有）
2.  提供 mongod 启动的日志文件活动以及 mongo shell 启动尝试期间的日志？
3.  确认您的 mongod 进程与 mongo shell 在同一台机器上启动？

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2013-05-04T07:39:24.483

此方法仅在您想**修复数据文件而不保留原始文件时才有效**

要找到您的 dbpath 所在的位置 - **vim /etc/mongodb.conf**

检查选项**dbpath=**

（我有 dbpath=/var/lib/mongodb）

**默认值：** /data/db/

典型位置包括：/srv/mongodb、/var/lib/mongodb 或 /opt/mongodb。

将**/var/lib/mongodb**替换为您的**dbpath**

```
sudo rm /var/lib/mongodb/mongod.lock
sudo mongod --dbpath /var/lib/mongodb/ --repair
sudo mongod --dbpath /var/lib/mongodb/ --journal 
```

（确保让您在上面运行的终端保持运行，不要按“Ctrl+c”或退出它。）现在在另一个窗口中键入命令以启动 mongo。

希望这对你有用！对于那些想要**在保留原始文件的同时修复数据文件的人** [mongo recover](http://docs.mongodb.org/manual/tutorial/recover-data-following-unexpected-shutdown/)

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2018-12-05T15:22:01.280

我是 Windows 用户，我在 2018 年 11 月安装了 MongoDB，我不想设置 data/db 目录。但是几天后，当我打开时，收到一条错误消息：

```
MongoDB shell version v4.0.4
connecting to: mongodb://127.0.0.1:27017
2018-12-05T20:42:40.108+0530 E QUERY    [js] Error: couldn't connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 :: caused by :: No connection could be made because the target machine actively refused it. :
connect@src/mongo/shell/mongo.js:257:13
@(connect):1:6
exception: connect failed 
```

然后我尝试使用上述所有答案进行修复，但没有成功。当我尝试运行 mongod 它说

```
MongoDB starting : pid=12220 port=27017 dbpath=C:\data\db\ 64-bit host=bla 
```

我尝试通过文件系统更改数据库路径（到程序文件）并使用 cmd 但这些都不起作用。

**对我有用的解决方案是：**

打开**任务管理器**( `ctrl + shift + esc`) ->**服务**选项卡，**有一个****状态为停止**的MongoDB 行。然后我**右键单击并单击开始**，一切正常***:)***。

* * *

## 回答 #6

> 赞同：40
> 
> 时间：2019-03-01T05:26:12.080

**苹果系统**

检查状态

```
brew services list 
```

就像是：

```
Name    Status  User Plist
mongodb stopped 
```

启动它

```
brew services start mongodb 
```

再试一次

`mongo`或者`mongo --port 27017`

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2020-07-05T10:44:54.713

> `Error: couldn't connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 :: caused by :: No connection could be made because the target machine actively refused it.`

**此错误是由于 Mongo Server 已关闭引起的**

**简单按照以下步骤**

1.  打开任务管理器
2.  转到>服务
3.  查找**MongoDB**
4.  右键单击并选择**开始**

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-11-08T11:34:36.903

答案有点晚了，但我遇到了同样的问题

以下是帮助我的步骤。

1.  转到 C:\
2.  创建“数据”文件夹
3.  在“数据”中创建“db”文件夹
4.  打开终端 (CMD) -> 转到 EX:" `c:\MongoDB\Server\3.4\bin`"
5.  输入 mongod => 这将启动 mongo 服务器（保持打开状态）

使用 GUI 运行，EX“robomongo”

或者

打开新终端 (CMD) -> 转到 EX:" `c:\MongoDB\Server\3.4\bin`" 输入 "mongo" 命令

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2016-01-12T16:10:47.263

就我而言：

首先我打开配置文件

```
sudo vi /etc/mongodb.conf 
```

像这样评论IP和端口

```
#bind_ip = 127.0.0.1
#port = 27017 
```

然后重启mongodb

```
sudo service mongodb restart
sudo service mongod restart 
```

最后，它的工作：D

```
finn@Finn ~ $ mongo
MongoDB shell version: 2.4.9
connecting to: test
> exit 
```

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2016-05-08T03:28:48.100

确保您的 mongo 正在运行。我通过尝试修复 mongodb 解决了这个问题，在那里我发现没有创建 db 运行所需的目录。它显示了这个错误

类型：`mongod`，它将显示错误

`exception in initAndListen: 29 Data directory /data/db not found., terminating`

发生错误是因为 dbpath `/data/db/`（默认配置）不存在。您需要创建数据文件夹并为其设置权限。

然后我通过命令在我的系统上创建一个文件夹

**sudo mkdir -p /data/db/** 和 **sudo chown `id -u`/data/db**

然后我再次运行 mongo 并且它起作用了。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2020-01-02T10:57:51.697

经过大量搜索后，我遇到了同样的问题，我通过以下方式解决了这个问题：

```
sudo service mongodb stop 

sudo rm /var/lib/mongodb/mongod.lock 

sudo mongod --repair --dbpath /var/lib/mongodb 

sudo mongod --fork --logpath /var/lib/mongodb/mongodb.log --dbpath /var/lib/mongodb 

sudo service mongodb start 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2014-07-20T07:46:49.457

如果上述所有解决方案都不起作用：转到服务（`start>search>services`）并启动 mongodb 服务。然后，在 cmd 提示符下，进入 bin 后，键入`:/>mongo`

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2018-07-03T02:52:07.727

我也有同样的问题，然后我被这两行代码解决了。希望能帮助到你

```
systemctl start mongod
systemctl enable mongod 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2017-03-04T19:20:12.610

要与 mongo 连接，我们必须首先启动“mongod”服务。您可以看到以下输出：

```
$ mongod
2017-03-05T00:31:39.055+0530 I CONTROL  [initandlisten] MongoDB starting : pid=1481 port=27017 dbpath=/data/db 64-bit host=Prabhu-Nandans-Mac.local
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] db version v3.4.2
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] git version: 3f76e40c105fc223b3e5aac3e20dcd026b83b38b
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.2k  26 Jan 2017
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] allocator: system
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] modules: none
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] build environment:
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten]     distarch: x86_64
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten]     target_arch: x86_64
2017-03-05T00:31:39.056+0530 I CONTROL  [initandlisten] options: {}
2017-03-05T00:31:39.056+0530 W -        [initandlisten] Detected unclean shutdown - /data/db/mongod.lock is not empty.
2017-03-05T00:31:39.057+0530 I -        [initandlisten] Detected data files in /data/db created by the 'wiredTiger' storage engine, so setting the active storage engine to 'wiredTiger'.
2017-03-05T00:31:39.057+0530 W STORAGE  [initandlisten] Recovering data from the last clean checkpoint.
2017-03-05T00:31:39.057+0530 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=3584M,session_max=20000,eviction=(threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] 
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] 
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] 
2017-03-05T00:31:39.620+0530 I CONTROL  [initandlisten] ** WARNING: soft rlimits too low. Number of files is 256, should be at least 1000
2017-03-05T00:31:39.643+0530 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory '/data/db/diagnostic.data'
2017-03-05T00:31:39.643+0530 I NETWORK  [thread1] waiting for connections on port 27017
2017-03-05T00:31:40.008+0530 I FTDC     [ftdc] Unclean full-time diagnostic data capture shutdown detected, found interim file, some metrics may have been lost. OK
2017-03-05T00:32:03.832+0530 I NETWORK  [thread1] connection accepted from 127.0.0.1:49806 #1 (1 connection now open)
2017-03-05T00:32:03.833+0530 I NETWORK  [conn1] received client metadata from 127.0.0.1:49806 conn1: { application: { name: "MongoDB Shell" }, driver: { name: "MongoDB Internal Client", version: "3.4.2" }, os: { type: "Darwin", name: "Mac OS X", architecture: "x86_64", version: "16.4.0" } }
2017-03-05T00:32:08.376+0530 I -        [conn1] end connection 127.0.0.1:49806 (1 connection now open) 
```

之后打开另一个终端并输入“mongo”。

以下是您可以看到的输出：

```
$ mongo
MongoDB shell version v3.4.2
connecting to: mongodb://127.0.0.1:27017
MongoDB server version: 3.4.2 
```

你的问题解决了:)

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2019-12-30T07:30:51.520

使用启动monogdb服务

```
sudo service mongod start 
```

然后从新窗口或终端使用 mongo 客户端启动

```
mongo 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-05-25T08:13:23.150

今天发生在我身上，我通过以下方式解决了它。

机器：我使用的是 Windows 10 机器并下载了最新的 MongoDB - 社区版。

所以，问题是，我没有`C:\data\db`创造。

没有创建`C:\data\db`，我打开 CMD 终端并`mongod`在终端使用命令启动数据库

> C:\YourInstallationPath\bin>mongod

当我触发`mongo`命令时，我遇到了问题。

扭曲，我创建了必要的文件夹，但仍然遇到问题。这是因为 mongo 服务器已经在运行。为了修复它，我`mongod`再次启动了命令，它自动引用了`C:\data\db`.

其他用户建议添加`C:\data\db`但没有谈论`mongod`再次执行，这正好解决了我的问题。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2019-05-08T03:34:42.200

在 macOS 上使用 brew 安装后，我在连接 mongodb 时遇到了同样的问题。

问题也是`mongod.lock`，但在我安装 mongodb 3.6 和数据库目录之前`/usr/local/var/mongodb`，它有旧文件和`mongod.lock`

很简单，我将旧数据库文件移动到不同的文件夹并从中删除了所有内容`/usr/local/var/mongodb`

然后重新启动：

```
brew services restart mongodb 
```

它现在工作正常。

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2019-09-10T09:38:42.217

我在 ubuntu 上收到此错误，但您可以尝试使用以下命令：

```
sudo service mongod start 
```

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2021-01-27T09:49:01.413

在用尽了很多很多的抱怨之后，我做到了——

`sudo brew services start mongodb-community`而不是 `sudo service mongod start`它起作用了。

所以，首先尝试

```
sudo brew services start mongodb-community 
```

然后启动 mongo shell，做-

```
mongo 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2018-05-23T06:23:31.967

您可以尝试使用以下命令：

`sudo service mongod start`

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2019-07-12T14:24:12.210

在 Windows 和 ubuntu 中，我需要`/data/db`在根目录中创建文件夹。在 ubuntu 中，我需要一个额外的选项；授予目录权限。

视窗

```
mkdir c:/data/db 
```

Ubuntu：

```
sudo mkdir -p /data/db
sudo chmod 700 /data/db 
```

然后运行

```
sudo service mongod start 
```

查看

```
sudo service mongod status 
```

然后运行

```
mongo 
```

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2021-10-12T17:49:46.537

**对于 MACOS**

检查服务状态：

```
brew services 
```

如果你有类似的东西：

```
Name              Status
mongodb-community error 
```

因此，您可以像这样停止并重新启动服务：

```
brew services stop mongodb-community
brew services start mongodb-community 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-08-06T10:42:03.480

删除 mongod.lock 文件。并运行“mongod -repair”。卸载/重新安装 mongod 服务为我解决了这个问题。

谢谢。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-02-18T11:52:17.763

另一种解决方案为我解决了同样的错误，尽管这可能仅适用于您通过虚拟机的 SSH 连接（本地）访问 mongo（至少这是我的设置），并且可能是特定于 linux 的环境变量问题：

```
export LC_ALL=C 
```

此外，我在运行 mongo 作为守护程序服务方面取得了更大的成功，然后使用 sudo service start，我的理解是这使用命令行参数而不是配置文件，所以它可能是我的配置文件的问题：

```
mongod --fork --logpath /var/log/mongodb.log --auth --port 27017 --dbpath /var/lib/mongodb/admin 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-02-28T13:42:13.200

如果您的计算机上不存在文件夹 C:data/db，请创建它。原来MongoDB需要存在这个文件夹结构'data/db'才能运行。我希望这可以帮助别人。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2017-11-07T16:05:45.023

我的原因是空间 - 在控制台中运行它：

```
df -h 
```

或更具体地说：

```
du -hs /var/lib/mongodb/ 
```

检查他的磁盘使用情况。如果它是〜99％ - 只需清理一些空间并重试！

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-12-20T06:19:45.877

首先，去`c:\mongodb\bin>`开启mongoDB，如果在控制台看到mongo正在监听27017端口，就OK如果没有，关闭控制台并创建文件夹`c:\data\db`，重新启动mongod

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2018-06-20T18:02:14.363

如果上述所有解决方案都无法解决，那么这可能会有所帮助。在某个地方，您可能已经通过 vagrant box 连接到本地 mongodb 数据库。

1.  vagrant up 然后 ssh 进入你已经与 mongodb 建立连接的 vagrant 机器（vagrant ssh vagrant_box_name）
2.  使用 # (sudo nano /etc/mongod.conf) 注释掉 /etc/mongod.conf 中的 bind_ip 行
3.  重新启动您的 mongodb 守护程序服务（sudo service mongod restart）瞧...

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2020-06-08T14:46:17.303

好吧，这可能很奇怪。我的错误发生是因为我的日志呈指数增长并堵塞了服务器空间，因此 mongo 没有足够的空间来存储任何东西。

所以我清除了日志

```
> /var/log/mongod.log 
```

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2020-09-08T21:18:44.993

试试这个：

进入终端上的 bin 文件夹，然后写入：

`sudo ./mongod --dbpath <write_here_the_path_to_your_database>`，点击进入。（总是做同样的事情）。

然后`sudo ./mongo`

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2021-05-26T03:20:37.470

当我们使用任务栏管理器时，转到服务选项卡。那里 MongoDB 状态显示已停止。右键开始。它将连接 MongoDB 服务器版本。用于检查类型“db”。

* * *

> 数据库测试

它会正常工作。

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2021-09-06T02:52:09.570

对于我的情况：

*   操作系统：CentOS 7

## 错误

```
> mongo
MongoDB shell version v4.4.2
connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&gssapiServiceName=mongodb
Error: couldn’t connect to server 127.0.0.1:27017, connection attempt failed: SocketException: Error connecting to 127.0.0.1:27017 caused by Connection refused
connecct@src/mongo/shell/mongo.js 374 17
@(connect) 2 6
exception connect failed 
existing with code 1 
```

## 原因

*   `mongod`不运行
    *   但是如果运行`mongod`，对于没有访问权限的情况将不起作用

## 解决方案

*   使用root运行`mongod`

```
sudo /data/mongodb/bin/mongod --config /data/mongodb/conf/mongodb.conf & 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2015-07-31T16:01:42.053

我在 AWS EC2 上连接到 Mongo 时遇到了同样的错误。这就是解决它 的方法[https://serverfault.com/a/347159/62381](https://serverfault.com/a/347159/62381) 从配置文件中删除 bind_ip

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2016-01-07T05:49:33.813

***这对我有用：-***

在 Mongo 3.2 for window 中，您应该启动 Mongodb 服务。所以，运行`Command Prompt as Administrator`then ***net start MongoDB***

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2016-05-29T10:46:18.707

最后我得到了这是一种简单的方式..

打开终端并转到 mongodb 位置。就我而言，它是

```
e:\mongodb\bin> 
```

并键入以下命令并按回车键..

```
mongod --config e:\mongodb\mongo.config 
```

打开另一个终端并使用

```
mongo.exe 
```

就是这样..你可以使用mongo

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-03-09T02:23:30.413

这是一个老问题，但是，作为一个新手，我想我会补充一点（使用 Webstorm），您需要单击 Mongo Explorer（窗口最右侧的选项卡）。从那里：

- 点击设置。- 单击浏览按钮（看起来像一个带有“...”的按钮）。- 转到 Program Files > MongoDB > Server > 3.4 > bin > mongo.exe（您的版本可能与 3.4 不同） - 之后，单击右侧的绿色加号。将打开一个窗口 - 在“标签”插槽中输入名称。- 单击应用。

您现在应该已连接。在终端中输入“mongod”是不够的。您还必须执行上述步骤。

我提前向那些没有使用 Webstorm 的人道歉！不确定使用其他 IDE 的步骤。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2017-05-15T07:43:18.720

如果您通过 brew 安装（在 osx 上）首先`sudo mkdir /data/db` 通过键入（保持打开状态）运行启动 mondoDB 守护程序`mongod`，然后通过键入`mongo`新的终端选项卡运行 mongo

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2018-03-31T06:32:24.943

只需在 C 驱动器中创建一个名为“data”的文件夹，然后在 data 文件夹中创建另一个名为“db”的文件夹。然后执行 mongod.exe :)

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2018-04-05T05:07:28.697

首先，您必须启动**mongod**服务器，然后在另一个终端中您必须启动**mongo** shell。

用于启动，mongo 服务器

**1.**如果你的路径是**默认路径（数据/数据库）**简单的终端 触发**mongod**

**2.**如果您的路径不是**data/db**，那么您的命令如下： **mongod --dbpath 'here your path come'**。

为了启动 mongo shell，只需在另一个终端中触发**mongo**

如果您**在端口 27017 上等待连接**，那么您的 mongo 已成功启动。

希望你能明白我的意思

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2018-06-24T11:21:19.200

我有同样的问题，我删除了 E:\Mongo Data Files\db\mongod.lock 文件，所以它开始工作了。问题是由于服务器关闭不当造成的。所以锁定文件不干净。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2018-09-26T14:25:07.637

@shakthydoss 的答案曾经运行良好，但是在第二个问题之后 .lock 不存在，我只是创建了一个空白的，并且运行良好。因此，请检查您的是否不存在。

如果您使用命令行：

```
cd /var/lib/mongodb

ls 
```

"ls" 将列出文件夹中的所有文件，如果 mongod.lock 不存在，则：

```
sudo touch mongod.lock 
```

最后运行命令。

```
mongod –-repair

sudo service mongod start 
```

Mongo 服务应该可以正常工作。

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2018-09-27T06:06:32.257

在 Windows 操作系统上解决此问题的步骤：

1.  **从C:\Program Files\MongoDB\Server\4.0\data**中删除 mongod.lock 文件
***   **点击C:\Program Files\MongoDB\Server\4.0\bin**中的 mongod***   点击**C:\Program Files\MongoDB\Server\4.0\bin**中的 mongo 启动 mongodb shell****

 ***** * *

## 回答 #43

> 赞同：0
> 
> 时间：2021-02-17T08:14:53.547

# 对于 Windows

### 代替

`mongodb://localhost:27017/yourDatabase`

### 写

`mongodb://yourComputerName:27017/yourDatabase`

### 例子：

`mongodb://Gabriel-Laptop:27017/shop`

* * *

要查找您的计算机/笔记本电脑名称，请在搜索栏中`View your PC name`输入，附近`Device name`的名称就是您要查找的名称。

* * *

**注意：**我在某处读到`localhost`不建议在 Windows 操作系统中为 MongoDB 使用关键字（很可能[在这里](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=&cad=rja&uact=8&ved=2ahUKEwiAuaHTu_DuAhUl_CoKHTRtDaMQFjABegQIAhAC&url=https%3A%2F%2Fdocs.mongodb.com%2Fmanual%2Freference%2Fconnection-string%2F&usg=AOvVaw1dwesdJ_Ikr9P3HxDyFzD_)）。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2021-03-18T17:11:57.607

你必须通过你的cmd访问你的`src C: \ Program Files \ MongoDB \ Server \ 4.4 \ bin`，然后你必须打开任务管理器->服务->（选择mongoDB）->启动它，然后通过cmd重新测试，它就会解决。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2022-02-03T05:36:39.467

在终端中执行此步骤

1.  通过运行此命令停止 mongodb

> `brew services stop mongodb-community`

2.  再次启动mongodb

> `brew services start mongodb-community`

> `mongod`

> `mongo`****

# c++ - 浮点数组的 C++ 向量构建麻烦

> ID：13312359
> 
> 赞同：2
> 
> 时间：2012-11-09T16:48:42.707
> 
> 标签：c++, visual-c++

为什么不在 VS 2010 C++ 中构建？

```
typedef float test[10];
std::vector<test> test_me(100); // wanted initial capacity of 100 
```

虽然这很好

```
typedef float test[10];
std::vector<test> test_me_now; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:53:24.493

数组既不能复制构造，也不能移动构造。 `std::vector`大多数操作至少需要其中一项。或者至少，涉及将事物实际放入向量中的操作。由于默认构造函数没有将任何内容放入向量中，因此使用它没有问题。

内置数组的不合时宜的行为[`std::array`](http://en.cppreference.com/w/cpp/container/array)是发明的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T16:54:22.353

这

```
std::vector<test> test_me(100); 
```

将尝试调用不存在的`test`,的默认构造函数。`test()`如果您想要增加容量，而不是带有`100`元素的向量，请尝试

```
std::vector<test> test_me_now;
test_me_now.reserve(100); 
```

虽然很难看出如何使用这样的向量，因为大多数操作都是无效的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:47:21.447

23.1/3 对此似乎很清楚：

> 这些组件中存储的对象类型必须满足 CopyConstructible 类型 (20.1.3) 的要求，以及 Assignable 类型的附加要求。

C 风格的数组既不是 CopyConstructible 也不是 Assignable ，因此它们不能存储在容器中。大概这意味着您已经进入了未定义行为的领域，因此编译器可以在这两种情况下为所欲为。

# facebook - 无法读取 facebook 成就，抛出 OAuthException

> ID：13312366
> 
> 赞同：0
> 
> 时间：2012-11-09T16:48:58.463
> 
> 标签：facebook, facebook-graph-api, access-token, facebook-authentication, achievements

我正在用 PHP 开发我的第一个 facebook 社交游戏，我遵循 developer.facebook.com 上提供的社交游戏教程

我的游戏在服务器上并加载到画布页面中。

一切都很清楚，但是当我尝试处理成就时我无法解决问题：http: [//developers.facebook.com/docs/guides/games/getting-started/#step6](http://developers.facebook.com/docs/guides/games/getting-started/#step6)

我能够创建、注册和保存成就，但是当我尝试查询我的用户已经获得的成就时出现错误。代码是这样的：

```
function getAchievements() {
    FB.api('/me/achievements', function(response) {
        for(var i = 0; i < response.data.length; i++) {
            ...
        }
    ...
}); 
```

在我的控制台中，如果我跟踪该`response`对象，我会看到一个身份验证错误：

```
response : {
    "error": {
        "message": "An active access token must be used to query information about the current user.",
        "type": "OAuthException",
        "code": 2500
    }
} 
```

我已经尝试了很多东西，但我无法解决这个问题。用户已登录，我已请求`email,publish_actions`权限，我已尝试添加`user_games_activity`扩展权限... :(

有人知道这个特定的 FB.api 调用发生了什么吗？

# php - imagecreatefrompng() + imagettftext() 低质量文本 - 如何抗锯齿

> ID：13312372
> 
> 赞同：4
> 
> 时间：2012-11-09T16:49:25.233
> 
> 标签：php, image, gd

采取以下基本图像（PNG-24）：

![在此处输入图像描述](../Images/c84a4bcfb5e5af174d0adb3e7d8441b3.png)

我们正在尝试将文本写入图像，如下所示：

```
<?
ini_set('display_errors', 1); 
error_reporting(E_ALL);

//#### Load the base image
$im = imagecreatefrompng("images/SpecialClearanceBlank.png");
imagealphablending($im, false);
imagesavealpha($im, true);

//#### Create the badge
if($im) {
    //#### define some colours to use with the image
    $white = imagecolorallocate($im, 255, 255, 255);

    //#### get the width and the height of the base image
    $width = imagesx($im);
    $height = imagesy($im);

    //#### Define font and text
    $font = "/var/www/arial.ttf";
    $fontSize = 13;
    $angle = 0;
    $text = "15%";

    //#### calculate the left position of the text:
    $dimensions = imagettfbbox($fontSize, $angle, $font, $text);
    $textWidth = abs($dimensions[4] - $dimensions[0]);
    $leftTextPos = ( $width - $textWidth ) / 2;

    //#### finally, write the string:
    //imagestring($im, 5, $leftTextPos, $topTextPos, $text, $white);
    imagettftext($im, $fontSize, $angle, $leftTextPos + 1, 29, $white, $font, $text);

    // output the image
    // tell the browser what we're sending it
    Header('Content-type: image/png');
    // output the image as a png
    imagepng($im);

    // tidy up
    imagedestroy($im);
}

?> 
```

这会产生低质量的文本（非常块状） - 如何抗锯齿文本使其看起来平滑？

这是块状版本：

![在此处输入图像描述](../Images/3b1ab92ba41de056461a3f349dfa61c6.png)

在仔细分析渲染的 png（在 Photoshop 中放大）后，我可以看到我正在编写的文本没有抗锯齿并且正在写入的像素几乎是透明的？

是什么导致了这个 - 我如何获得流畅的文本？

![在此处输入图像描述](../Images/50069af57fb4ec2e7ebf2bd44ba539a3.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:16:08.893

[说明](http://php.net/imagealphablending)：

`imagealphablending`在真彩色图像上使用时必须打开`imagettftext`，否则将根据图像背景颜色而不是每个目标像素的颜色计算混叠。

正确的（显式）设置是：

```
//#### Load the base image
$im = imagecreatefrompng("images/SpecialClearanceBlank.png");
imagealphablending($im, true);
                        ^^^^ 
```

您的图片默认启用它，这就是为什么将其设置为`false`之前创建的非锯齿效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:00:57.517

弄清楚了：

我的电话`imagealphablending()`是`imagesavealpha()`造成它的原因！如果我在写完文字后打电话给这些，那很好！

（不知道为什么 - 会对解释感兴趣）

下面是产生这个的工作代码：

[![以下代码中的示例 PNG](../Images/2d27e810cb55a75b4a1b1a1c39067413.png)](https://i.stack.imgur.com/7YqEi.png)

```
<?
Header('Content-type: image/png');

$Percentage = round(@$_GET["value"]);
$root = dirname(__FILE__) . "\\";

//#### Check the Cache
if (file_exists("images/Badges_Discounts/" . $Percentage . ".png") === true) {
    //#### Serve image from cache
    $im = imagecreatefrompng("images/Badges_Discounts/" . $Percentage . ".png");

    //#### Fix transparency
    imagealphablending($im, false);
    imagesavealpha($im, true);

    //#### Output from cache
    imagepng($im);

    //#### tidy up
    imagedestroy($im);

} else {
    //#### Load the base image
    $im = imagecreatefrompng("images/SpecialClearanceBlank.png");

    //#### Create the badge
    if($im) {
        //#### define some colours to use with the image
        $white = imagecolorallocate($im, 255, 255, 255);

        //#### get the width and the height of the base image
        $width = imagesx($im);
        $height = imagesy($im);

        //#### Define font and text
        $font = $root . "arial.ttf";
        $fontSize = 15;
        $angle = 0;
        $text = $Percentage . "%";

        //#### calculate the left position of the text:
        $dimensions = imagettfbbox($fontSize, $angle, $font, $text);
        $textWidth = abs($dimensions[4] - $dimensions[0]);
        $leftTextPos = ( $width - $textWidth ) / 2;

        //#### write the XX%
        imagettftext($im, $fontSize, $angle, $leftTextPos + 1, 26, $white, $font, $text);

        //#### write the word "off"
        $dimensions = imagettfbbox($fontSize, $angle, $font, "off!");
        $textWidth = abs($dimensions[4] - $dimensions[0]);
        $leftTextPos = ( $width - $textWidth ) / 2;
        imagettftext($im, 13, $angle, $leftTextPos + 4, 41, $white, $font, "off");

        //#### Fix transparency
        imagealphablending($im, false);
        imagesavealpha($im, true);

        //#### Save to cache
        imagepng($im, $root . "images\\Badges_Discounts\\" . str_replace("%","",$text) . ".png");

        //#### Output to browser
        imagepng($im);

        //#### tidy up
        imagedestroy($im);
    }
}

?> 
```

# java - maven 命令行 - 插件配置

> ID：13312374
> 
> 赞同：1
> 
> 时间：2012-11-09T16:49:37.113
> 
> 标签：java, maven, configuration, maven-failsafe-plugin

我需要使用故障安全插件一一运行集成测试*（请不要问为什么......他们只需要在单独的 jvm 中运行，这是避免单例的一个很好的理由）*。

所以我想创建一个脚本，每行一个 maven 调用，每个 maven 调用在单个测试文件上运行测试。像这样的东西：

```
mvn failsafe:integration-test -D<???>=**/ITest1.java
mvn failsafe:integration-test -D<???>=**/ITest2.java
mvn failsafe:integration-test -D<???>=**/ITest3.java
... 
```

在 pom.xml 我会添加类似

```
<includes>
  <include>**/ITest1.java</include>
</includes> 
```

到插件配置。有没有办法用命令行实现同样的效果？是否可以指定类似列表的配置选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:52:44.273

语法是：

```
mvn -Dit.test=TestName verify 
```

来源：[故障安全插件示例：运行单个测试](http://maven.apache.org/plugins/maven-failsafe-plugin/examples/single-test.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:53:27.540

`it.test`参数就是这样做的。你可以在[这里](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#test)阅读。

从文档：

> [...] 所以您只需键入“-Dit.test=MyTest”即可运行名为“foo/MyTest.java”的单个测试。

# python - 在龙卷风中进行异步调用同步

> ID：13312376
> 
> 赞同：1
> 
> 时间：2012-11-09T16:49:42.000
> 
> 标签：python, design-patterns, tornado, coroutine

我有以下问题。

我在基于龙卷风的应用程序服务器上工作。大多数代码可以是同步的，Web 界面并没有真正使用 Tornado 的任何异步功能。

我现在必须连接到一个（异步）遗留后端，我使用该`tornado.iostream`接口发送命令。对这些命令的响应与其他定期信息（例如状态更新）一起异步发送。

代码封装在一个公共接口中，该接口也用于其他后端。

我想要实现的是以下内容：

```
# this is executed on initialization
self.stream.read_until_close(self.close, self.read_from_backend)

# this is called whenever data arrives on the input stream
def read_from_backend(self, data):
     if data in pending:
         # it means we got a response to a request we sent out
         del self.pending[data]
     else:
         # do something else

# this sends a request to the backend
def send_to_backend(self, data):
     self.pending[data] = True
     while data in self.pending:
          # of course this does not work
          time.sleep(1)
     return 
```

当然这不起作用，因为`time.sleep(1)`不允许`read_from_backend()`进一步运行。

我该如何解决这个问题？我希望`send_to_backend()`仅在收到响应时返回。有没有一种方法可以让我控制`read_from_backend`而不从该方法返回？

请注意，在 web 层使用 @asynchronous 和 @gen.engine 很难做到这一点，因为这需要完全重写我们 web 层中的所有请求。有没有办法可以在其他地方实现相同的设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:13:25.133

我认为一个好主意可能是考虑使用 gevent。通过 MonkeyPatching 并使用我编写的简单装饰器，您可以轻松获得以同步方式（阻塞样式）编写的漂亮异步视图。

[您可以重用我之前回答中的](https://stackoverflow.com/questions/13292407/how-to-improve-the-performance-of-the-combination-of-gevent-and-tornado/13299083#13299083)大部分代码。

尽管您可能出于不同的原因不想使用 gevent（没有依赖项）：

承认你已经用猴子修补了你的全局流程：

```
from gevent import monkey; monkey.patch_all() 
```

上面的补丁线程，套接字，睡眠......所以他们通过gevent的集线器（集线器是gevent ioloop是龙卷风）。

一旦修补并在我之前的答案中使用 @gasync 装饰器，您的视图可能只是：

```
class MyHandler(tornado.web.RequestHandler):
     @gasync
     def get(self):
         # Parse the input data in some fashion
         data = get_data_from_request()

         # This could be anything using python sockets, urllib ...
         backend_response = send_data_to_backend(data)

         # Write data to HTTP client
         self.write(backend_response)

         # You have to finish the response yourself since it's asynchronous
         self.finish() 
```

我发现 gevent 的简单性和“优雅”远远超过了使用 tornado 的 ioloop 编写异步代码的任何优势。

在我的情况下，我必须使用以同步方式编写的遗留代码，所以基本上 gevent 是一种更安全的生活，我所要做的就是猴子补丁并编写那个装饰器，我可以使用所有这些遗留代码而无需任何修改。

我希望这有帮助。

# css - 将相对 div 的代码放在绝对 div 的代码上方，导致相对 div 不显示

> ID：13312380
> 
> 赞同：0
> 
> 时间：2012-11-09T16:49:51.710
> 
> 标签：css, html, web

我正在构建一个`absolutely positioned`在页面顶部有横幅的网站。这个 div 有一个 id 的容器`showcase`。覆盖此横幅的是导航栏和徽标，它们都位于名为 的容器 div`navLogoContainer`中，它被`relatively`定位。这两个容器 div 都不是任何其他元素（除了 body 和 html）的子元素，它们是独立的。

这是奇怪的部分，如果我将`navLogoContainer`代码放在代码`showcase`之上，则内容`navLogoContainer`不会显示，但是其中一个链接仍然是可点击的（徽标），但不可见，其他所有内容（导航栏）都不可点击或可见。

如果我把`navBarContainer`代码放在`showcase`代码下面，一切都会完美运行。

当然，我可以将代码放在`navBarContainer`代码下面`showcase`，一切都会好起来的，但这会导致我的代码不那么可读，并且不遵循逻辑顺序，这是我想避免的。另外，我真的很想知道它什么时候会这样做！

我对此感到非常困惑，我一直在尝试不透明度，显示属性，z-indexes，我能想到的一切，非常感谢任何帮助。

提前致谢。

相关的 HTML 和 CSS（对于 CSS 的邋遢和评论表示歉意，它还没有达到发布质量:)：

HTML：

```
<div id="navLogoContainer">
    <div id="logo">
        <a href="/beta/"></a>
        <p class="big">Name</p>
        <p class="small">Description</p>

    </div>

    <nav>

        <a href="/">Home</a>
        <a href="/linkOne">Link One</a>
        <a href="/linkTwo">Link Two</a>

    </nav>

</div>

<div id="showcase">

    <!First showcase>
    <div id="firstShowcase">

        <div id="firstCaseStudyContainer">

            <div id="firstCaseStudy3DContainer">
            <div id="firstCaseStudy">

                <p class="caseStudyTitle">Case Study Title</p>
                <p class="caseStudyDescription">A brief description of relevant stuff<a href="http://google.com">View the site</a> or <a href="/anotherPage/">view a second page</a>.</p>

            </div>
            </div>
        </div>

    </div>
</div> 
```

CSS：

```
/*The code for the navbar*/
#navLogoContainer {

    margin: 0px auto;
    width: 1050px;
    padding-top: 23px;
    height: 62px;
    z-index: 5;
    min-width: 1050px;
}

#logo {

    position: absolute;
    float: left;
    background-color: #00224d;
    height: 62px;
    width: 273px;

}

#logo a {

    position: absolute;
    display: block;
    width: 100%;
    height: 100%;
    z-index: 3;
}

/*The showcase container*/
#showcase {

    position: absolute;
    width: 100% !important;
    height: 399px;
    top: 0px;
    min-width: 1050px;
    z-index: 0;
}

/*The backgrounds for the showcases*/
#firstShowcase {

    background-image: url("first.png");
    margin: 0;
    width: 100% !important;
    height: 100%;
    z-index: 0;
}

/*The CONTAINERS for the case studies*/
#firstCaseStudyContainer {

    width: 930px;
    height: 399px;
    margin: 0px auto;
    z-index: 0;
}

/*The 3D containers*/
#firstCaseStudy3DContainer {

    position: absolute;
    height: 177px; /*Case study box height related. DO NOT SET TO AUTO. This value must be done by hand.*/
    width: 410px;
    margin-left: 530px;
    margin-top: 247px; 
    background-image: url("3dtriangle.png");
    background-position-y: 100%;
    background-repeat: no-repeat;
    -webkit-transition: all 0.6s;
    -moz-transition: all 0.6s;
}

/*The actual text boxes for the case studies. They default to auto*/
#firstCaseStudy {

    position: absolute;
    height: auto; 
    width: 392px;
    bottom: 0;
    margin-left: 9px;
    overflow-y: hidden;
    -webkit-transition: all 1.0s;
    -moz-transition: all 1.0s;
    background-color: black;
    overflow-y: hidden;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:05:27.580

从这说明展示柜正在做你告诉它做的事情。

您放入没有位置的 navLogoContainer ，因此它将被锚定在顶部。然后你把陈列柜放进去。这有一个绝对位置， top: 0 所以它绝对定位在页面或容器元素的顶部，这两者都在。所以它覆盖徽标是有道理的。如果您希望在徽标内容下方展示展示，则需要将其放置在 navLogoContainer 下方。

因此，如果 navLogoContainer 的高度为 50px，则展示柜的顶部属性应为 50px。如果您希望 navLogoContainer 位于展示柜上方，那么您需要给它一个位置：相对 + 一些 z-index 爱，以便它知道它在做什么。

# internet-explorer - 十六进制 NCR 字符在 IE 中不起作用

> ID：13312385
> 
> 赞同：0
> 
> 时间：2012-11-09T16:50:11.503
> 
> 标签：internet-explorer, hex, decimal, special-characters, ncr

对于网页需要一些特殊字符（如下所示），我在[这里](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)找到了这些字符。

![十进制 NCR](../Images/e7ae1aa86c9ff0b2f08f17aa9b313668.png)

[转换](http://rishida.net/tools/conversion/)后的十进制 NCR 值在 FF、Safari 和 Chrome 中运行良好。但不是在 IE 上我得到奇怪的方形字符。页面采用 UTF8 编码。

例如，这是一个字符的代码：

![在此处输入图像描述](../Images/c5151793df8c08b9a102105a87a7ccc8.png)

这是我在 Safari、FF 和 Chrome 上得到的：

![在此处输入图像描述](../Images/e52e16413c0989ddb250a31e1984e575.png)

这是在 IE8 上：

![在此处输入图像描述](../Images/d89723a138fe19d40b28f5b8904b1f7b.png)

请有人解释为什么这在 IE 中不起作用？

# c# - 如何在字符串的特定子字符串之后获取字符串？

> ID：13312390
> 
> 赞同：-1
> 
> 时间：2012-11-09T16:50:29.380
> 
> 标签：c#, .net, string

> **可能重复：**
> [如何从一大堆丑陋的字符串中提取特定字符串的一部分？](https://stackoverflow.com/questions/13294520/how-do-i-extract-part-of-a-specific-string-from-a-huge-chunk-of-ugly-strings)

细绳：

```
https://company.zendesk.com/api/v2/tickets/33126.json 
```

我需要号码 33126。

提取此数字的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T16:51:48.100

由于这是一个路径/网址，请使用 [`Path.GetFileNameWithoutExtension`](http://msdn.microsoft.com/en-us/library/system.io.path.getfilenamewithoutextension.aspx)：

```
string name = Path.GetFileNameWithoutExtension(path); 
```

我更喜欢`Path`，但如果你想改用这个`Uri`类，你也可以使用这个：

```
Uri uri = new Uri("https://company.zendesk.com/api/v2/tickets/33126.json");
string lastSegment = uri.Segments.Last();
string name = lastSegment.Substring(0, lastSegment.IndexOf('.')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:55:30.663

这看起来像是正则表达式的工作。

```
 Regex regex = new Regex(@"https://company.zendesk.com/api/v2/tickets/(\d+).json");

        Match match = regex.Match("https://company.zendesk.com/api/v2/tickets/33126.json");

        foreach(Group group in match.Groups)
        {
            Console.WriteLine(group.Value);
        } 
```

# oracle - 甲骨文 - 得到孩子和祖父母

> ID：13312391
> 
> 赞同：1
> 
> 时间：2012-11-09T16:50:30.083
> 
> 标签：oracle, hierarchical-data

我需要获取给定节点的子节点，以及属于其最高祖先的字段。我知道如何分别获得两者，并且我可能会弄清楚如何以编程方式将两者结合起来；但我更愿意在一个查询中完成所有操作。

假设我的表包含字段 id、item_id、code 和 name，并且 item_id 为 0 是根节点，并且我的树看起来像：

```
id   item_id  code      name    level
------------------------------------
1    0                  Root    1
2    1        my_value  Child1  2
3    2                  Child2  3 
```

我可以使用以下方法获取我需要的节点：

```
select id, item_id, code, name, level from my_table
start with code like '%my_value%'
connect by prior id = item_id 
```

返回：

```
id   item_id  code      name    level
-------------------------------------
2    1        my_value  Child1  2
3    2                  Child2  3 
```

我还想从这些节点的最高祖先那里获取名称字段。我可以使用以下方法获取这些节点：

```
select id, item_id, code, name, level from my_table
where level = (
    select max(level) as max_level from my_table
    start with code like '%my_value%'
    connect by prior item_id = id
)
start with code like '%my_value%'
connect by prior item_id = id 
```

返回：

```
id   item_id  code      name    level
-------------------------------------
1    0                  Root    1 
```

我想将从上述查询返回的名称字段添加为添加到从第一个查询返回的两个节点的附加字段，即

```
id   item_id  code      name    root_name   level
------------------------------------------------
2    1        my_value  Child1  Root        2
3    2                  Child2  Root        3 
```

我希望这很清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:06:06.163

也许从根开始，然后过滤以限制以 my_value 之类的代码开头？

```
SQL> select id, item_id, code, name, lvl, root_name
  2    from (select id, item_id, code, name, level lvl, sys_connect_by_path(code, '|') c,
  3                connect_by_root name as root_name
  4             from my_table
  5            start with item_id = 0
  6           connect by prior id = item_id)
  7   where c like '%my_value%';

        ID    ITEM_ID CODE                 NAME              LVL ROOT_NAME
---------- ---------- -------------------- ---------- ---------- ----------
         2          1 my_value             Child1              2 Root
         3          2                      Child2              3 Root 
```

# javascript - AngularJS - 基于类别等的复杂过滤

> ID：13312393
> 
> 赞同：5
> 
> 时间：2012-11-09T16:50:41.333
> 
> 标签：javascript, json, angularjs

我已经做了一些 google-fu，但我能找到的关于 AngularJS 过滤器的所有内容都是关于简单过滤器的简单示例（主要针对单个字段的值）。

我所追求的东西有点复杂，我有点寻求帮助来解决我的情况。

假设您有以下 JSON 对象的数组：

```
{
    "id":"1",
    "title":"Title",
    "categories":[
        {"id":"14","name":"DIY"}
    ],
    "topics":[
        {"id":"12","name":"Junk Food"}
    ]
},
{
    "id":"2",
    "title":"Title 2",
    "categories":[
        {"id":"4","name":"Test"},
        {"id":"14","name":"DIY"},
    ],
    "topics":[
        {"id":"2","name":"Food"}
    ]
}

[...] 
```

所以基本上每个对象都可以有任意数量的“类别”和/或“主题”。

现在，我的目标是创建一个前端界面，让我可以累积地将各种过滤器应用于这些 JSON 对象。

例如，我想说：仅显示具有 category.id = 14 AND topic.id = 2 [etc] 并且仍然支持过滤结果的深层链接的条目。

所以这就是我卡住的地方：

1）为此使用路由的最佳方法是什么（即，您将如何构造 URL 以支持任意数量的过滤器（基于不同的值）

2）我应该如何跟踪添加的过滤器？（即用户选择了多少过滤器和哪些过滤器）

查看[AngularJS 过滤器](http://docs.angularjs.org/api/ng.filter:filter)的文档，我显然会使用第二个示例作为过滤参数：

> 对象：模式对象可用于过滤数组包含的对象的特定属性。例如 {name:"M", phone:"1"} 谓词将返回一个项目数组，这些项目的属性名称包含“M”，属性电话包含“1”。可以使用特殊的属性名称 $（如 {$:"text"}）来接受与对象的任何属性的匹配。这相当于上面描述的与字符串的简单子字符串匹配。

但我不太确定如何确保我正在检查正确的字段（即 topic.id 用于主题与 category.id 用于类别）......

简而言之，我很想看到这样一个不那么简单的过滤场景的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T21:04:45.493

我认为你需要这样的[东西](https://stackoverflow.com/a/11753593/295797)。请参阅他的“其他简单替代方案”。我在注入到我的控制器中的服务中进行复杂的过滤，并将我的 $scope 上的过滤列表公开给视图。我只将 Angular 过滤器用于相对简单的任务。

回复：关于如何在 URL 上公开它的问题，您需要某种方式将这些过滤器表示为字符串，并且可以使用 $location 和 $routeParams 将它们填充到您的控制器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T11:46:16.530

如果您编写自定义过滤器，这可以工作：

```
var module = angular.module('app', []);

module.filter("property", ["$filter", function($filter){
    var parseString = function(input){
        return input.split(".");
    }

    function getValue(element, propertyArray) {
        var value = element;

        angular.forEach(propertyArray, function(property) {
            value = value[property];
        });

        return value;
    }

    return function (array, propertyString, target) {
        var properties = parseString(propertyString);

        return $filter('filter')(array, function(item){
            return getValue(item, properties) == target;
        });
    }
}]); 
```

HTML 部分可能如下所示：

```
<ul>        
    <li ng-repeat="data in items | property:'categories.id':<id_of_a_category_we_want>">
        {{ data }}
    </li>
</ul> 
```

学分：[OnOFF-Switch 博客](http://onoffswitch.net/filter-deep-object-properties-angularjs/)

# math - smarty 数学标记四舍五入

> ID：13312396
> 
> 赞同：2
> 
> 时间：2012-11-09T16:50:59.420
> 
> 标签：math, smarty

我有以下聪明的标签：

```
 {math equation=1.1+0.7 format="%.0f"} 
```

输出 2（四舍五入）。可以将其重写为始终像 php.ini 中的 floor() 那样向下舍入吗？并且请我无权访问 php 源代码或 smarty 配置以更合适的方式执行此操作。

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T16:56:57.607

```
 {math equation=1.1+0.7 format="%.2f"} 
```

试试看。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-15T12:58:40.573

{数学方程=“地板（1.1+0.7）”}

这对我有用

# dotnetnuke - 发生严重错误。你调用的对象是空的

> ID：13312398
> 
> 赞同：0
> 
> 时间：2012-11-09T16:51:06.750
> 
> 标签：dotnetnuke

我遇到了无法卸载的皮肤问题，因此我将其从数据库中删除。

现在我的扩展模块不起作用。

我收到此错误，“发生严重错误。对象引用未设置为对象的实例。”

有谁知道是什么原因造成的以及最终的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:57:37.547

看来我还必须从包表中删除皮肤包。扩展模块再次工作，但皮肤仍然显示在 admin> skins 中，并且正在使用中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T03:11:40.843

检查 Portals/_default 文件夹中的皮肤目录。它可能安装在那里并且需要被移除。

# python - Hangman：文件 I/O 字符串和列表 python

> ID：13312399
> 
> 赞同：2
> 
> 时间：2012-11-09T16:51:14.520
> 
> 标签：python

用python编写一个hangman程序，我在传递一个包含多字串和单字串的文件时遇到了一个问题。

文件：

你好棕狐

狗

猫

水

跳

```
#initialize list
wordList = []
# get and open file
getFile = raw_input("Enter file name: ")
filename = open(getFile, "r")

def readWords(filename):
    for line in filename:
        # split any multi word line
        line.split()
        # add line to wordList
        wordList.append(line) 
```

然而 wordList 的输出仍然显示：

```
wordList = ['hello brown fox\n', 'dog\n', 'cat\n', 'water\n', 'jump\n'] 
```

我正在尝试使“hello brown fox”显示为 3 个单独的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:38:33.017

你让这太复杂了 - 只是`.split`整个文件内容：

```
with open(getFile, "r") as f:
    words = f.read().split() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:00:00.897

您遇到的问题是您正在拆分但未保存拆分线：

```
>>> a = "hello brown fox"
>>> a.split()
['hello', 'brown', 'fox']
>>> a
'hello brown fox'
>>> 
```

所以：

```
wordList.extend(line.split()) 
```

应该为你解决问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:08:40.353

split 函数将结果作为列表返回，因此直接附加它可能不是您想要的。您可以尝试以下示例：

```
def main():
    l_wordList = ['hello brown fox\n', 'dog\n', 'cat\n', 'water\n', 'jump\n']
    l_words_list = []
    l_word = ''
    for word in l_wordList:
        if isinstance(word.split(), list):
            for token in word.split():
                l_words_list.append(token)
        else:
            l_words_list.append(word)

    for word in l_words_list:
        print(word)

main() 
```

结果将是这样

```
>>>
hello
brown
fox
dog
cat
water
jump
>>> 
```

问候，

达里约什

# c++ - 多维离散小波变换

> ID：13312402
> 
> 赞同：0
> 
> 时间：2012-11-09T16:51:20.463
> 
> 标签：c++, dwt

谁能告诉我在以下链接中使用 getOutputValue 函数的正确方法？另外，作者如何从代码中获得第二和第三张图像。

[http://www.codeproject.com/Articles/385658/Multidimensional-Discrete-Wavelet-Transform](http://www.codeproject.com/Articles/385658/Multidimensional-Discrete-Wavelet-Transform)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:54:59.220

好的，用法：

我还没有尝试过，但是从我得到的信息中，您只需调用`getOutputValue()`即可获得一个结果。该参数是一个包含“坐标”的向量（基于您输入的维数）。

图片：

在这个例子中，作者显然使用图像数据作为离散值，例如黑色像素`0`和白色像素`255`之间的所有其他灰度阴影（默认 8 位灰度图像）。

然后他使用输出信号/结果重新创建图像（即再次将值解释为像素）。

# c# - 为什么我收到 FormatException 未处理错误？

> ID：13312411
> 
> 赞同：2
> 
> 时间：2012-11-09T16:51:50.300
> 
> 标签：c#, string, input, formatexception, unhandled

我创建了一个程序，并对其进行了广泛的测试，我收到一条错误消息，提示“未处理 FormatException，输入字符串的格式不正确”。当我将任一文本框留空并按下“完成”按钮时会出现问题，但如果我输入低于 0 或高于 59 的任何内容（这是我想要允许的数字范围），它工作正常。当框为空白时，我该怎么做才能不收到此错误？这是我在“btnFinished”后面的代码：

```
 private void btnFinished_Click(object sender, EventArgs e)
    {
        if (lstCyclists.SelectedIndex >= 0)
        {
            Cyclists currentCyc = (Cyclists)lstCyclists.SelectedItem;
            //Decalre the minsEntered and secsEntered variables for txtMins and textSecs
            int minsEntered = int.Parse(txtMins.Text);
            int secsEntered = int.Parse(txtSecs.Text);

            try
            {
                //If the status of a cyclist is already set to Finished, show an error
                if (currentCyc.Finished.ToString() == "Finished")
                {
                    MessageBox.Show("A time has already been entered for this cyclist");
                }
                else
                {
                    //if a minute lower than 0 or greater than 59 has been entered, show an error
                    if (minsEntered < 0 || minsEntered > 59)
                    {
                        MessageBox.Show("You can only enter a minute up to 59");
                    }
                    //if a second lower than 0 or greater than 59 has been entered, show an error
                    else if (secsEntered < 0 || secsEntered > 59)
                    {
                        MessageBox.Show("You can only enter a second up to 59");
                    }
                    else
                    {
                        //otherwise, set the status to finished and update the time
                        currentCyc.Finished = "Finished";
                        currentCyc.FinishedHours(Convert.ToInt32(txtHours.Text));
                        currentCyc.FinishedMins(Convert.ToInt32(txtMins.Text));
                        currentCyc.FinishedSecs(Convert.ToInt32(txtSecs.Text));
                        //pass the parameter to the scoreboard class to display it in lblCyclistsFinished
                        lblCyclistsFinished.Text += "\n" + finishLine.Scoreboard(currentCyc);
                        //add to the number of cyclists finished
                        Cyclists.NumFinished++;
                        lblnumFinished.Text = Cyclists.NumFinished.ToString();
                        //update the details box
                        DisplayDetails(currentCyc);
                        txtHours.Clear();
                    }
                }
            }
            catch
            //make sure all the time fields have been entered, otherwise show an error message
            {
                MessageBox.Show("Please ensure all time fields have been entered");
            }
        }
        else
            //make sure a cyclist has been selected when pressing "Finished", otherwise show an error message
        {
            MessageBox.Show("You must select a cyclist");
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T16:54:06.957

好吧，看看这些行：

```
int minsEntered = int.Parse(txtMins.Text);
int secsEntered = int.Parse(txtSecs.Text); 
```

当文本框为空白时，您*希望*那些返回什么？

根本不要求`int.Parse`空文本框。例如：

```
int minsEntered = txtMins.Text == "" ? 0 : int.Parse(txtMins.Text);
// Ditto for seconds 
```

当然，如果您输入非数字的内容，这仍然会爆炸。您可能应该`int.TryParse`改用：

```
int minsEntered;
int.TryParse(txtMins.Text, out minsEntered); 
```

在这里，我忽略了 的结果`TryParse`，无论如何它都会保留`minsEntered`为 0 - 但如果你想要一个不同的默认值，你会使用类似的东西：

```
int minsEntered;
if (!int.TryParse(txtMins.Text, out minsEntered))
{
    minsEntered = 5; // Default on parsing failure
} 
```

（或者您可以在这种情况下显示错误消息...）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T16:53:19.890

> 当我将任一文本框留空时会出现问题

这就是问题所在。您正在使用`int.Parse`空字符串。空字符串不是有效的整数表示，解析失败。

您可以测试文本框中的值并默认为合理的值：

```
int minsEntered = 0;
int secsEntered = 0;

if(!string.IsNullOrWhitespace(textMins.Text))
{
  minsEntered = int.Parse(txtMins.Text);
}

if(!string.IsNullOrWhitespace(txtSecs.Text))
{
  secsEntered = int.Parse(txtSecs.Text);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T16:59:23.750

您可以使用 int.TryParse，它返回一个布尔值来指示文本是否解析成功：

```
int minsEntered = 0;
if (int.TryParse(txtMins.Text, out minsEntered))
{
    // txtMins.Text is a valid integer.
} 
```

# objective-c - UITableView 上的自定义滚动绘图层

> ID：13312412
> 
> 赞同：2
> 
> 时间：2012-11-09T16:51:50.580
> 
> 标签：objective-c, ios, uitableview, uikit

几天来我一直在努力解决这个问题，所以我希望有人可以帮助我......我有一个包含多个单元格的分组 UITableView。我想在 UITableView 上方绘制一些自定义图形，这些图形会随着表格的内容滚动。具体来说，我想用点画一条线，像这样加入 UITableViewCells（跨部分）：
[![截屏](../Images/f83a1ff4619bf4e84b126655ed4d2c30.png)](https://i.stack.imgur.com/vNPQP.gif)

当然，如果我们有比屏幕能够显示的更多的单元格，具有自定义绘图的上层应该与底层单元格一起移动。我试图继承 UITableView 并覆盖它的 -drawRect 方法，但它没有用。即使我不会调用[super drawRect:rect]，表格内容显示也没有问题。我试图向 UITableView 添加一个新的子视图，但是当它从其数据源中获取单元格和部分时，它会动态改变它的大小......我没有想法......

尽管网络上到处都是自定义 UITableViewCell 示例，但我还没有找到与我的概念类似的东西……

谁能帮我实现上述功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:04:18.043

首先你应该继承 UITableView。然后创建另一个 UIView 并将其添加为自定义 UITableVIew 的子视图。

接下来覆盖 UITableView 的 contentOffset 属性。

```
-(void)setContentOffset:(CGPoint)contentOffset
{

    [super setContentOffset:contentOffset];

    // Custom code here. Update custom subview here.
} 
```

此方法将在 UITableView 滚动时调用。然后，您可以调整子视图的偏移量并更新其绘图。

# grails - 按特定属性值排序 hql 结果

> ID：13312413
> 
> 赞同：3
> 
> 时间：2012-11-09T16:51:54.793
> 
> 标签：grails, groovy, hql

我有一个包含名为“状态”的属性的域。此属性可以包含“A”、“I”、“P”、“Pv”、“R”。

我有以下查询：

```
def list = Deal.findAll('from Deal as d') 
```

如何对结果进行排序，以便始终在结果集顶部返回状态为“P”的行？（我不在乎它们之后的顺序是什么）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:45:14.293

这会做你想要的吗？通常我会在回答之前对其进行测试，但我没有简单的方法来做那个 atm。

```
def list = Deal.findAll('''from Deal as d order by case d.property when 'P' then 0 else 1 end''') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:49:58.867

您可以将 sort 方法与比较器一起使用：

```
def list = Deal.findAll('from Deal as d').sort({a,b-> (a.status== 'P' && b.status != 'P') ? 0 : 1 }) 
```

# c# - 使用绑定文件从 JAXB WSDL 生成 C# 客户端代码

> ID：13312414
> 
> 赞同：5
> 
> 时间：2012-11-09T16:51:58.160
> 
> 标签：c#, jaxb, wsdl

我有一个带有几十个 XSD 的 WSDL，我需要从 WSDL 生成客户端代码来使用 Web 服务。Web 服务的所有者使用 Java 并使用 JAXB 生成 WSDL/XSD。JAXB 为自定义绑定指定了一个“绑定文件”，并且所有者已经生成了一个 XJB 文件（JAXB 自定义绑定文件）以与 WSDL 一起使用。

我需要在 C# 中生成我的客户端代码，但 svcutil 和 Visual Studio 的 Add Service Reference 对此自定义绑定文件没有任何规定。有一些工具可以生成将绑定文件作为参数的 Java 客户端代码，但没有用于 C# 生成的工具。我尝试只运行 svcutil 而不指定 XJB，但我无法让它工作。我做了广泛的谷歌搜索，但没有运气。关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:30:41.203

* * *

您可以通过提供绑定声明[来定制 WSDL ，但](http://jax-ws.java.net/nonav/2.1.2m1/docs/customizations.html)**这些声明是特定于 Java 的，并且定制仅适用于从 WSDL 生成 Java 代码时**。可以内联（嵌入在 XSD/WSDL 中）或在单独的文件中声明绑定。您有一个单独的文件，所以我认为 WSDL 和 XSD 是“干净的”。

**JXB 文件是一个红鲱鱼。WSDL 应该与技术无关，它不关心 Java、C# 或其他任何东西**。您应该能够生成代码，因为 svcutil 将忽略 Java 绑定。

svcutil 会向您抛出什么错误？`<type>`当 WSDL 缺少一个部分时，我已经看到它失败并出现难以理解的消息。您提到了几十个 XSD 文件，它们是如何在 WSDL 中导入的，导入是否有效？如果您在 Visual Studio 中打开 WSDL，它是否显示验证错误，它是否在抱怨什么？

最后，如果一切都失败了，您可以将其全部（包括 JXB 文件）提供给像[wsimport](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html)这样的 Java 工具并从中获取一些 Java 文件。您可以[使用 Endpoint.publish 进行快速部署，](http://java.boot.by/ocewsd6-guide/ch08.html)然后将 svcutil 指向已部署的地址，`?wsdl`然后查看是否得到不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:42:08.943

试试[WSCF.blue](http://wscfblue.codeplex.com/)看看这对你的情况是否有用。请注意，我不熟悉 JABX，但我目前正在使用此工具从 wsdl 生成 C# 代码。

# c - 检测设备插入和拔出

> ID：13312420
> 
> 赞同：1
> 
> 时间：2012-11-09T16:52:06.740
> 
> 标签：c, linux

我正在编写代码并且我使用libudev.h 到目前为止我可以检测设备并打开它们并将打开的设备的fd 放在devlist 中以读取和写入数据。我的问题是当我拔下设备时出现分段错误。

```
if (FD_ISSET(fd, &fds))
{
    dev = udev_monitor_receive_device(mon);
    if (dev)
    {
        if(strcmp(udev_device_get_action(dev),"add")==0)
        {
            if(strcmp(udev_device_get_devnode(dev), "/dev/ttyUSB0")==0)
            {
                fd1 = open(udev_device_get_devnode(dev), O_RDWR | O_NONBLOCK);
                if(fd1<0)
                {
                    printf("Can't open Device\n");
                    exit(0);
                }
            }
            printf("Device plugged\n");
            printf("   Node: %s\n", udev_device_get_devnode(dev));
            printf("   Action: %s\n", udev_device_get_action(dev));
            printf("device opened\n");

            int opt =1;

            ioctl(fd1, FIONBIO,(char *) &opt);
            for(loop=0; loop<MAXDEV; loop++)
                if(devlist[loop] == 0)
                {
                    devlist[loop] = fd1;
                    fd1 = -1;
                }
        }
        else {
            printf("Device unplugged\n");
            printf("   Node: %s\n", udev_device_get_devnode(dev));
            printf("   Action: %s\n", udev_device_get_action(dev));
            FD_CLR(devlist[loop],&fds);
            close(devlist[loop]);
            devlist[loop] = -1;
        }
        udev_device_unref(dev);
} 
```

一旦我打开设备，我就可以读取它的 fd 并且它没有问题，但是当我拔下设备时我得到错误。

这是我遇到麻烦的部分。

```
printf("Device unplugged\n");
printf("   Node: %s\n", udev_device_get_devnode(dev));
printf("   Action: %s\n", udev_device_get_action(dev));
FD_CLR(devlist[loop],&fds);
close(devlist[loop]);
devlist[loop] = -1; 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:08:32.710

在拔下 USB 串行适配器后访问它不会对我造成段错误——我不久前为我的工作进行了大量测试。

我注意到一件事，您似乎没有将“循环”初始化为与未插入设备相对应的“devlist”元素。如果您没有从插件和拔出事件之间的函数返回并且您拔出与上次插入相同的设备，那么这可能会起作用。但这是我对您在哪里进行分段错误的赌注。

我怀疑的另一个候选人是您用于读取或写入设备的代码。拔下设备后，读取和写入系统调用将返回 -1，如果您没有检查该错误或您的错误处理代码有错误，那也可能是您的问题。

一般来说，我建议您在 gdb 下运行您的程序，并在它崩溃时获取堆栈跟踪。这将告诉您错误发生在哪个行号。

# c# - 跨多个应用程序池的 ASP.Net C# 共享会话

> ID：13312421
> 
> 赞同：2
> 
> 时间：2012-11-09T16:52:15.620
> 
> 标签：c#, asp.net, .net-4.0, session-state

> **可能重复：**
> [为什么我不能使用 StateServer 在 2 个 Web 应用程序之间共享会话状态？我错过了什么？](https://stackoverflow.com/questions/3292359/why-cant-i-share-session-state-between-2-web-apps-with-stateserver-what-am-i-m)

我正在尝试跨 Web 应用程序维护会话状态，在该应用程序中，用户可以登录 www.domain.com，并且出于负载平衡的原因，在他们的浏览体验中的某个时刻，他们的浏览体验被重定向到不同服务器上的 ww2.domain.com。在这种情况下维护用户会话的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T16:54:46.320

最好的方法是使用[SQL Server 会话状态](http://support.microsoft.com/kb/317604?wa=wsignin1.0)而不是默认的进程内状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:55:27.473

您需要进程外会话管理。

数以百计的文章/技术可以在亲爱的互联网上找到。其中之一 [http://www.c-sharpcorner.com/UploadFile/ganesh.nataraj/ASPdotNETSessionState09212005235624PM/ASPdotNETSessionState.aspx](http://www.c-sharpcorner.com/UploadFile/ganesh.nataraj/ASPdotNETSessionState09212005235624PM/ASPdotNETSessionState.aspx)

# android - Android - 片段中的标签列表，滚动时显示错误

> ID：13312425
> 
> 赞同：2
> 
> 时间：2012-11-09T16:52:40.047
> 
> 标签：android, list, scroll, fragment

所以这是我的问题。

我正在研究 API 14，我在 Eclipse 的帮助下制作了一个“MasterDetailFlow”。在“双窗格”的左侧，我有一些文本视图和一个片段。（我做的很简单）

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="horizontal"
    tools:context=".ListActivity" >

    <RelativeLayout
        android:layout_width="0dip"
        android:layout_height="match_parent"
        android:layout_weight="27"
        android:orientation="vertical" >
        <TextView
              android:text="toto" 
            />
        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="textView"/>

          <fragment
              android:id="@+id/fragment1"
              android:name=""
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:layout_below="button"
              />
    </RelativeLayout>
    //the right part of the screen, doesn't matter
    <FrameLayout
         />

</LinearLayout> 
```

Fragment 类是这样的

```
public class MyFragment extends Fragment {
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = null;

        if (mItem != null) {
                if(mItem.isTrue){
                rootView = inflater.inflate(layout1, container, false);
            }else{
                rootView = inflater.inflate(layout2, container, false);
                }
        }
    }
} 
```

我使用 ArrayAdapter 在列表中动态添加项目。事情是：当列表不需要滚动时（列表的高度小于片段的高度），一切都以良好的方式显示。但是当列表更大（可见部分没问题）并且我滚动列表时，一些应该有 layout1 的项目有 layout2，反之亦然。这些项目奇怪地总是在交界处，就像隐藏的第一个元素一样。当您单击该项目时，它会正常运行。例如，应为 layout1（但显示为 layout2）的项目在单击时充当项目 layout1。我不知道它是否清楚，因为它不适合我:)

当我在 logcat 中打印片段中的字符串列表时，它的顺序很好。所以它看起来只是一个“显示错误”，但它来自哪里？

有没有人有类似的问题？知道问题吗？

谢谢。

**编辑 ：**

这是我的自定义 ArrayAdapter。我没有getItemViewType 和getViewTypeCount 方法，我应该处理它。到目前为止，我一直在使用存储在 DummyItem 中的布尔值来了解它是类型 1 项目还是类型 2。

```
 public class CustomArrayAdapter extends ArrayAdapter<DummyItem>
    @Override
        public View getView(int p_position, View p_convertView, ViewGroup p_parent) {
            DummyItem item = data.get(p_position);
            View row = p_convertView;
            if(row==null){
            if(item.isTrue){
            LayoutInflater inflater = ((Activity)m_context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, p_parent, false);
            row.setTag(item);
            TextView label1 = (TextView) row.findViewById(textViewId);
            label1.setText(item.content);

                }else{
                    LayoutInflater inflater = ((Activity)m_context).getLayoutInflater();

                    row = inflater.inflate(R.layout.simple_list_item_activated_1_custom, p_parent, false);
                    TextView label2 = (TextView) row.findViewById(R.id.text1);
                    labelPiece.setText(item.content);

                }

            }else{
            }

            return row;
        }
    } 
```

# vba - 访问文本导出损坏

> ID：13312426
> 
> 赞同：1
> 
> 时间：2012-11-09T16:52:40.593
> 
> 标签：vba, ms-access

我有一个 VBA 例程，可将数据导出为 CSV 以导入另一个应用程序。我正在研究的两个领域的内容是相当长的 XML 字符串。

这两个字段在导出时都被损坏了。查询结果中的值看起来不错，但是当我将数据导出到 CSV 时，它已经一团糟了。一个例子是：

```
<ItemSpecifics>
<NameValueList>
    <Name><![CDATA[Material]]></Name>
    <Value><![CDATA[Solid Wood]]></Value>
    <Value><![CDATA[Pine]]></Value>
    <Source>ItemSpecific</Source>
</NameValueList>
<NameValueList>
    <Name><![CDATA[Room]]></Name>
    <Value><![CDATA[Bedroom]]></Value>
    <???t?t?9\????t?t?t???t?t???t???9???9?????????????9?9???0 
```

任何想法为什么会发生这种情况？

--EDIT-- 好的，这不可能是巧合 - 损坏发生在字符 256.... 文本字段的访问限制。看起来很奇怪，因为查询结果中的结果看起来很好......有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:55:10.350

我没有给你一个明确的答案，但由于我在各种数据库和应用程序之间进行了大量的导入和导出，我想我会在谷歌上搜索一下这个问题。

我发现，如果您要求 Access 处理数据（即聚合、重复数据删除、格式化等），Access 的导出限制为 255。

我知道这并不能完全描述您的情况，但我认为这种解决方法可能会有所帮助。
有人说只有当你从查询中导出时才有限制，而不是表。他的解决方案是对临时表执行附加查询，十导出该表。

祝你好运

# android - 使用两列或更多列订购数据库

> ID：13312431
> 
> 赞同：0
> 
> 时间：2012-11-09T16:52:49.213
> 
> 标签：android, sqlite

我有一个用户数据库，每个用户都有名字、姓氏和年龄

我需要在这一行添加什么？

```
Cursor cursor = mDatabase.query(DATABASE_ATTENDEES_TABLE, null, Attendee.DATABASE_KEY_USER_ID + " = ?", new String[] { Long.toString(user_id) }, null, null, Attendee.DATABASE_KEY_LASTNAME); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:59:30.547

谢谢我明白了：

```
Cursor cursor = mDatabase.query(
    DATABASE_ATTENDEES_TABLE, 
    null, 
    Attendee.DATABASE_KEY_USER_ID + " = ?", 
    new String[] { Long.toString(userId) }, 
    null, 
    null, 
    Attendee.DATABASE_KEY_LASTNAME+ " ASC," + 
        Attendee.DATABASE_KEY_FIRSTNAME  + " ASC," +
        Attendee.DATABASE_KEY_AGE
); 
```

# c# - WebService 客户端将字符串中的数字 1 替换为 _x0031_

> ID：13312433
> 
> 赞同：2
> 
> 时间：2012-11-09T16:52:51.550
> 
> 标签：c#, web-services, client

我在 c# 中为 java 中的 web 服务做一个客户端问题是 .net 序列化程序当一个字符串以数字 1 开头时它会替换数字并放置一个“_ **x0031_** ”

```
var client = new wsProcesa();
var transito = new sv.test.registrarTest{
  NO_Test = "SV000001"
  NO_Licencia = "110110000034"
} ;
client.procesa(transito); 
```

当我在 java 端检查 xml 或者我序列化我收到的 registrarTest 类时

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<registrarTest>
  <NO_Test>SV000001</NO_Test>
  <NO_Licencia>_x0031_10110000034</NO_Licencia> 
</registrarTest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:37:48.227

问题出在生成的类中，因为该字段被标记为 DataType = "NCName"

我删除了生成的类中的标签，现在正在工作，我将删除 java 端 xsd 中的标签

# sql-server-2008 - 应用程序设置以避免 SQL Server 数据库表中的超时和死锁

> ID：13312437
> 
> 赞同：0
> 
> 时间：2012-11-09T16:53:20.327
> 
> 标签：sql-server-2008

我的应用程序访问本地数据库，将记录插入到表中（每天 +- 30-40 百万）。我有运行和处理数据并执行这些插入的进程。该过程的一部分涉及从唯一的 ID 表中选择一个 ID，这是使用简单的

```
 Begin Transaction

    Select top 1 @id = siteid from siteids WITH (UPDLOCK, HOLDLOCK)
    delete siteids where siteid = @id

  Commit Transaction 
```

然后，我立即使用该表中的单独语句删除该 id，以便没有其他进程获取它。这导致了巨大的超时问题，并且只有 4 个进程访问它，但我很惊讶。在检查我的主帖子表以查看是否使用上述 ID 插入记录时，我也会遇到超时问题。它运行速度很快，但存在所有死锁和超时，我认为这表明设计不佳并且是灾难的根源。

有什么建议吗？

编辑

这是这里其他人帮助的实际陈述。然后我删除了删除并将其作为单独执行的语句包含在我的代码中。order by 子句真的有帮助吗？

# core-data - Restkit-Core 数据：发布时 ObjectStore 和 Backend 中的重复对象

> ID：13312442
> 
> 赞同：1
> 
> 时间：2012-11-09T16:53:36.597
> 
> 标签：core-data, restkit, duplicate-data

在 iOS 5.0 应用程序上使用 Restkit (0.10.3)+core 数据时出现问题。我有一个实体 ToDo 映射如下：

```
RKManagedObjectMapping* map = [self mappingInObjectStore];

[map mapKeyPathsToAttributes:
 @"id"          ,   @"todoID"      ,
 @"message"     ,   @"detail"       ,
 @"created_at"  ,   @"createdAt"    ,
 @"updated_at"  ,   @"updatedAt"   ,
 @"public_location",@"publicLocation",   
 nil];

map.primaryKeyAttribute = @"todoID";
[map mapKeyPath:@"location" toRelationship:@"location" withMapping:[TDLocation mapping]]; 
```

TDLocation 是一个简单的实体，具有 long,lat,...

我使用 [TDTodo object] 方法创建了一个 TODO 对象并设置了所有需要的数据，但 todoID 除外（因为它将由后端填充）。后来我发帖：

```
[RKObjectManager sharedManager] postObject:todo usingBlock:^(RKObjectLoader *loader) {
    loader.onDidLoadResponse= ^(RKResponse *response){
        if (response.isOK || response.isCreated) {
            id parsedData = [response parsedBody:nil];
            todo.todoID = [NSNumber numberWithInt: [[parsedData valueForKeyPath:@"acceptedTodo.id"] intValue]]; //just get the assigned id from backend
        }
        [loader cancel];
    }; 
}]; 
```

到这里，一切正常。如果我执行 [TDTodo allObjects]，我会得到带有指定 ID 的已发布待办事项。但后来我得到了一个待办事项列表，我又检索了两个对象 TDTodo 包含与发布的待办事项相同的信息，所以我做了 [TDTodo allObjects]

```
{todoID: 1, ...}//posted todo
{todoID: 1, ...} // from the backend with the same info and id that the posted todo
{todoID: 2, ...} // from the backend with the same info that the posted todo, but diff id. 
```

总之，我在对象存储中有 3（三）个相同对象的重复实例。我搜索了这个问题，但找不到有效的解决方案。

提前致谢

**更新 1** 我解决了问题的一部分：“在后端重复创建实体”。这是通过尝试取消响应/加载器产生的，具体来说是这条指令：

`[loader cancel];`

我也试过：

```
[response.request cancel];
[response.request.delegate = nil; 
```

但这也会产生重复项。因此，删除此说明可解决该部分问题。

但是，objectStore 中仍然存在重复项：

```
{todoID: 1, ...}//posted todo`
{todoID: 1, ...} // from the backend with the same info and id that the posted todo`\ 
```

我该如何解决这个问题？我尝试了我在网上找到的所有解决方案:-(

干杯。

# iphone - 在手机上同时连接 wifi 和 3G

> ID：13312445
> 
> 赞同：3
> 
> 时间：2012-11-09T16:53:50.770
> 
> 标签：iphone

我正在开发一个使用 WiFi 和嵌入式浏览器的外围设备，该外围设备看起来像 iPhone（和 android）的接入点，但它没有连接到互联网。当我通过 Wifi 将手机连接到此外围设备时，我使用 3G 断开了手机上的互联网连接。

有没有办法避免这种情况？我可以控制外围设备的软件，因此我可以更改 IP 地址、网关等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:39:43.777

您打算通过 iPhone 的 3G 网络将外围设备连接到互联网吗？如果是这样，你为什么不使用 iphone 的[个人热点功能](http://www.gottabemobile.com/2012/09/19/how-to-use-personal-hotspot-on-ios-6-and-the-iphone-5/)？

我相信如果不使用个人热点模式，您将无法同时拥有 wifi 和 3G 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:03:08.607

您只能在设备上模拟 3g。在 iOS 6 或更高版本中打开 Settings->Developer->Network Link Conditioner-Status-Choose what you want。

# ruby-on-rails - 使用带有 ice_cube 的 schedule_attributes 来填充表单

> ID：13312451
> 
> 赞同：0
> 
> 时间：2012-11-09T16:54:17.453
> 
> 标签：ruby-on-rails, ruby, forms, activerecord, ice-cube

我正在使用带有 Ice Cube 的 Schedule Attributes 来安排一些带有表单的事件，我需要在编辑中填充表单，[如下例所示](https://github.com/avit/schedule_attributes#schedule_attributes-1)：

```
<%= form_for(@event) do |f| %>
[...]
  <%= f.fields_for :schedule_attributes do |schedule| %>
    Start Date <%= schedule.datetime_select :start_date %><br>
  <% end %>
[...]
<% end %> 
```

有人可以告诉我如何进行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T11:16:06.573

也许你应该给[https://github.com/GetJobber/recurring_select](https://github.com/GetJobber/recurring_select)一个机会？

# java - 如何在不让对象变成 DeferredElementImpl 的情况下将随机对象放入堆栈？

> ID：13312452
> 
> 赞同：0
> 
> 时间：2012-11-09T16:54:19.780
> 
> 标签：java, class, nodelist

我正在尝试将两者`Strings`都`Nodes`放在`Stack`. 我使用 NodeList方法`item(int)`从`Node`. `NodeList`然后，我将`Node`其推送到`Stack`. 我唯一的问题是，除非我有问题，否则我不会将其视为一个`Node`问题。

当我调用`getClass()`方法时`Node`，它返回：

```
class com.sun.org.apache.xerces.internal.dom.DeferredElementImpl 
```

`NodeList`当我在( )上调用相同的方法时`getClass()`，它会返回：

```
class com.sun.org.apache.xerces.internal.dom.DeepNodeListImpl 
```

两次调用该`getClass()`方法时，都是在我将其放在`Stack`. 我希望能够对 a 进行任何不同`Objects`的处理`Stack`，并且能够过滤 Stack 上的所有对象以找出它们属于哪个类。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:06:46.660

Node 和 NodeList 是接口而不是类。

`instanceof`是为你制作的。

这段代码：

```
DocumentBuilderFactory dbf   = DocumentBuilderFactory.newInstance();
DocumentBuilder        db    = dbf.newDocumentBuilder();
Document               doc   = db.parse( new File( "build.xml" ));
NodeList               nodes = doc.getElementsByTagName( "target" );
System.err.println( nodes instanceof NodeList );
System.err.println( nodes.item( 0 ) instanceof Node );
System.err.println( nodes.item( 0 ) instanceof Element ); 
```

输出：

```
true
true
true 
```

你可以写，之后`stack.pop()`，`if( var instance of String )`或`if( var instanceof Node )`......但恕我直言，将不同的类型混合到一个容器中并不是一个好主意。

# excel - excel用另一个单元格中的txt替换一个单元格中的选定txt

> ID：13312455
> 
> 赞同：-3
> 
> 时间：2012-11-09T16:54:28.437
> 
> 标签：excel

在excel中

A1 我有一个相机盒 CR05 ??????

A2 我有一个相机壳 CR05 ??????

在第一行我想用 1234 替换 CR05 在第二行我想用 1235 替换 CR05 等等

1234 在 A1 单元格中，1235 在 A2 单元格中，依此类推

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:11:34.603

您在寻找替代品吗？

```
=SUBSTITUTE(B1,"CR05",A1) 
```

它将文本“CR05”替换为单元格 A1 中 B1 中字符串的任何内容。（我假设您的字符串“我有一个用于相机的案例 CR05 ??????”在 B1 中。）

# javascript - jQuery preventDefault 不正常

> ID：13312457
> 
> 赞同：3
> 
> 时间：2012-11-09T16:54:37.703
> 
> 标签：javascript, jquery

我有一个行为不端的简单搜索功能。搜索框在我们不想在搜索时提交的表单内，所以我有下面的设置。

```
$(function() {
    jQuery.fn.onEnter = function(callback) {
        this.keyup(function(e) {
            if(e.keyCode == 13) {
                e.preventDefault();
                //e.stopPropagation();
                if (typeof callback == 'function')
                    callback.apply(this);
            }
        });
        return this;
    }
    $('#txtSearch').onEnter(function() {
        search();
        return false;
    });
    $('#search_btn').click(function() {
        search();
        return false;
    });

    function search() {
        alert('searching');
    }
}); 
```

e.preventDefault() 行不工作，所以搜索功能和表单提交一样被触发。我都试过了，但`e.preventDefault()`没有`e.stopPropagation()`运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:03:11.433

您正在停止浏览器默认`keyup`事件而不是`submit`事件。您最好的选择是使用`keydown`，以便停止输入键本身。

也使用`e.which`which is normalized for crossbrowser。

您可以尝试添加一个 keydown 处理程序以防止输入键并在 keyup 中执行操作。

**演示：http:** [//jsfiddle.net/PSkvm/1/](http://jsfiddle.net/PSkvm/1/)

```
jQuery.fn.onEnter = function(callback) {
    this.keyup(function(e) {
        if(e.keyCode == 13) {
            //e.stopPropagation();
            if (typeof callback == 'function')
                callback.apply(this);
        }
    }).keydown(function (e) {
         if(e.keyCode == 13) {
           e.preventDefault();
         }
    });
    return this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:56:43.797

preventDefault() 不适用于表单。尝试返回false；反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T16:59:09.430

很可能`e.keyCode`没有被抓到使用

```
 var code = e.keyCode || e.which; 
```

将您的代码修改为：

```
 var code = e.keyCode || e.which;
 if(code == 13) {
    e.preventDefault();
    if (typeof callback == 'function')
       callback.apply(this);
  } 
```

# firefox - FF buggy 中的内联元素大纲？

> ID：13312467
> 
> 赞同：0
> 
> 时间：2012-11-09T16:55:23.567
> 
> 标签：firefox, background, inline, outline

Firefox 中的内联元素上的轮廓未正确放置。背景和轮廓之间有一个空间。

有什么建议可以避免这种情况吗？

```
strong
{
    background: #3690f0;
    color: white;
    outline: 1px solid black;
} 
```

[http://jsfiddle.net/Yz9cA/](http://jsfiddle.net/Yz9cA/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:59:08.027

Firefox 在绘制轮廓时有一个错误（在此处查看更多信息：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=480888) ://bugzilla.mozilla.org/show_bug.cgi?id=480888 ）。您可以使用 box-shadow 解决方法：

```
strong
{
    background: #3690f0;
    color: white;
    box-shadow: 0px 0px 0px 1px rgba(0,0,0,1);
} 
```

# javascript - 下拉菜单被图像隐藏

> ID：13312473
> 
> 赞同：0
> 
> 时间：2012-11-09T16:55:42.007
> 
> 标签：javascript, css, overlapping

我在网页顶部有一组下拉菜单。下面是文字和一些图片。当我将鼠标悬停在每个菜单的顶部时，菜单会按预期在下方展开，但当它与页面上的任何文本重叠时，它会隐藏在任何图像后面。我将 z-index 设置为 9999，并将位置设置为绝对。我发现如果我将图像的不透明度降低到 0.6，那么菜单就会重叠。

因此，一种解决方案是检测菜单何时悬停，然后在 JavaScript 或 JQuery 中暂时降低页面其余部分的不透明度，直到光标移出菜单。如果是这样，我不确定该怎么做，但这是最好的方法吗？

HTML：

```
 <!--header -->                   
                <div class="headerHolder">
                    <div class="menuHolder">
                        <nav class="menu">
                            <ul id="menu"> 
                                <li>
                                   <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                   </div>
                                   <a href="#!/pageHome">
                                        <div class="textHold">
                                            <div class="mText">home</div>
                                        </div>
                                   </a>
                                </li>
                                <li class="with_ul">
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageAbout">
                                        <div class="textHold">
                                            <div class="mText">About Us</div>
                                        </div>    
                                    </a>
                                    <ul class="submenu_1">
                                       <li class="padTop"><a href="#!/pageProfile">profile</a></li>
                                       <li><a href="#!/pageStaff">staff</a></li>
                                       <li class="padBot bgNone"><a href="#!/pageMore">news</a>
                                            <ul class="submenu_2">
                                               <li class="padTop"><a href="#!/pageMore">fresh</a></li>
                                               <li class="padBot bgNone"><a href="#!/pageMore">archive</a></li>
                                            </ul>
                                       </li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageStudents">
                                        <div class="textHold">
                                            <div class="mText">students</div>
                                        </div>    
                                    </a> 
                                    <ul class="submenu_1">
                                       <li class="padTop"><a href="#!/pagePowerSchool">Power School</a></li>
                                       <li><a href="#!/pageTranscript">Transcript</a></li>
                                       <li><a href="#!/pageCounselor">Counselor</a>
                                       <li><a href="#!/pageStudentResources">Resources</a>
                                       <li><a href="#!/pageHandbook">Handbook</a>
                                       <li><a href="#!/pageUniform">Uniform Policy</a>
                                       <li><a href="#!/pageClubs">Clubs</a>
                                       <li><a href="#!/pageYouTube">You Tube</a>
                                       <li><a href="#!/pageSeniorProjects">Senior Proj</a></li>
                                    </ul>
                                </li>
                                <li>
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageParents">
                                        <div class="textHold">
                                            <div class="mText">parents</div>
                                        </div>
                                    </a>
                                    <ul class="submenu_1">                              
                                        <li class="padTop"><a href="#!/pagePowerSchool">Power School</a></li>
                                        <li><a href="#!/pageApplyOnline">Apply Online</a></li>
                                        <li><a href="#!/pageApplyMail">Apply Mail</a>
                                        <li><a href="#!/pageParentResources">Resources</a>
                                        <li><a href="#!/pageBoard">Board</a>
                                        <li><a href="#!/pagePTO">PTO</a>
                                        <li><a href="#!/pagePolicies">Policies</a>
                                            <ul class="submenu_2">
                                                <li class="padTop"><a href="#!/pageAttendance">Attendance</a></li>
                                                <li class="padBot bgNone"><a href="#!/pageWellness">Wellness</a></li>
                                            </ul>                                  
                                        <li><a href="#!/pageCounselor">Counselor</a></li>
                                        <li><a href="#!/pageSupplies">Supplies</a>
                                        <li><a href="#!/pageTranscript">Transcript</a>
                                        <li><a href="#!/pageSeniorProjects">Senior Proj</a>
                                        <li><a href="#!/pageNewsletters">Newsletter</a>
                                        <li><a href="#!/pageYouTube">You Tube</a>
                                    </ul>
                                </li>
                                <li>
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageCalendar">
                                        <div class="textHold">
                                            <div class="mText">Calendars</div>
                                        </div>
                                    </a>
                                    <ul class="submenu_1">
                                       <li class="padTop"><a href="#!/pageBusCalendar">Bus</a></li>
                                       <li><a href="#!/pageLunchMenu">Lunch</a></li>
                                       <li><a href="#!/pageSchoolCalendar">School</a></li>
                                    </ul>                               
                                </li>
                                <li>
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageCommunity">
                                        <div class="textHold">
                                            <div class="mText">Community</div>
                                        </div>
                                    </a>
                                    <ul class="submenu_1">                              
                                       <li class="padTop"><a href="#!/pageMore">Awards</a></li>
                                       <li><a href="#!/pageYouTube">You Tube</a></li>
                                       <li><a href="#!/pageCharter">Charter</a>
                                       <li><a href="#!/pageApplyOnline">Apply Online</a>
                                       <li><a href="#!/pageApplyMail">Apply Mail</a>
                                       <li><a href="#!/pageBoard">Board</a>
                                       <li><a href="#!/pageFinancials">Financials</a>
                                       <li><a href="#!/pagePublicCharter">Public vs Charter</a></li>
                                       <li><a href="#!/pageASN">Art School Network</a>
                                       <li><a href="#!/pageEmployment">Employment</a>
                                       <li><a href="#!/pageReportCard">Report Card</a>
                                       <li><a href="#!/pageSeniorProjects">Senior Proj</a>
                                       <li><a href="#!/pageNewsletters">Newsletters</a>
                                    </ul>
                                 </li>
                                 <li>
                                    <div class="extHold">
                                        <span class="whDiv"></span>
                                        <span class="overMarker"></span>
                                    </div>
                                    <a href="#!/pageContact">
                                        <div class="textHold">
                                            <div class="mText">Contact us</div>
                                        </div>    
                                    </a>
                                 </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            <!--header end--> 
```

CSS：

```
 /* Left & Right alignment */
    .left { float:left; }
    .right { float:right; }
    .wrapper {width:100%; overflow:hidden; }
    .glob{width:100%; height:100%; position:absolute; overflow:hidden; }
    body{font-family:Arial, sans-serif; color:#FFFFFF; background: #FFFFFF; line-height:20px; min-
    width:1010px; min-height:100%; position:absolute; width:100%; height:100%; overflow:hidden; }
    /* Global Structure ========================================================= */
    .main {margin:0px auto 0 auto;  width: 820px; z-index:2; height:100%; }
    .main .bio {margin:0px auto 0 auto;     width: 1020px; z-index:2; height:100%; }
    .page_spinner{ position:fixed; background:url(../images/loader.gif) 50% 50% no-repeat #FFFFFF; z- 
    index:99; width:100%; height:100%; top:0; left:0}
    #glob{position:relative; overflow:hidden; z-index:1; }
    /* ============================= main layout ================================ */
    a{ color:#FF9900; text-decoration:none; outline:none; font-size: 12px; }
    a:hover{ text-decoration:underline}
    h1{float:left;}
    h2{font-family: 'PT Sans Narrow', sans-serif; color:#FFF; font-size:26px; line-height: 26px; width:100%;   
    padding-bottom: 25px;text-transform: uppercase;font-weight: normal;text-shadow: 0px 0px 6px white;}
    p{font-family: Tahoma; padding-bottom: 20px; font-size: 11px; color: #000000; line-height: 19px;text-
    transform: uppercase;}
    .undLineOff{text-decoration:none; }
    .textLowerCase{text-transform:lowercase}
    .textUpperCase{text-transform:uppercase}
    .center{ padding:0; width:100%; position: relative; }
    .alignLeft{text-align:left; }
    .alignCenter{text-align:center; }
    .alignRight{text-align:right; }
    .relative{position: relative;}
    /* ============================= header ===================================== */
    header{position: absolute; z-index: 3; display: inline-block; top: 320px;right: 176px;}
    #logo{display:inline-block; background: url(../images/IACS_logo.png) 0 0 no-repeat; width: 320px; 
    height: 88px;}
    #logo:hover{text-decoration:none; }
    .logoHolder{ display:inline-block;  left: 10px; position: absolute;} /*position: relative;} */
    .headerHolder{position: relative; width: 830px;  z-index: 2;  margin: 0 auto;display: inline-block;}
    .menu{position:relative; z-index:1; display: block; right: -1000px;}
    .menuHolder{ float: right; display:inline-block; position: relative; width: 100%; z-index: 3; left: 0; 
    margin-top: 140px;}
    #menu {z-index:3; position:relative; display: inline-block;float: right;}
    #menu > li{position:relative; color: white; display: inline-block; text-align: center;margin-left: 
    10px;}
    #menu > li > a{display: block; position: relative;height: 60px;text-align: center;padding: 0 12px;}
    #menu > li > a:hover{text-decoration:none;}
    #menu > li.active > a{text-decoration:none;}
    .submenu_1 {position:absolute; z-index:9999; top: 60px; left: 0px; display: block; background: 
    #cc99ff;width: 100%;}
    .submenu_1 li {position:relative; display:inline-block;  width: 100%;height: 12px;float: left;padding:  
    8px 0; background: url(../images/extra3.png) 50% 100% no-repeat;}
   .submenu_1 a {font-family: 'Courier', sans-serif; font-size: 8px; color:#414141; display:inline-block;    
    line-height: 20px; padding: 0px 20px;font-weight: bold;text-transform: uppercase;}
    .submenu_1 li:hover > a, .submenu_1 li.sfHover > a{text-decoration:none; color:#2e3469; }
    .submenu_1 .padTop{padding-top: 15px;}
    .submenu_1 .padBot{padding-bottom: 15px;}
    .submenu_1 .bgNone{background: none;}
    .submenu_2 {position:absolute; z-index:2; top: 0px; left: 83px; display: block; background: #ee9c02; 
    width: 100%;}
    .submenu_2 li {position:relative; display:inline-block;  width: 100%;height: 16px;float: left;padding: 
    9px 0; background: url(../images/extra4.png) 50% 100% no-repeat;}
    .submenu_2 a {font-family: 'Courier', sans-serif; font-size: 14px; color:#000; display:inline-block;    
    line-height: 15px; padding: 0px 15px;font-weight: normal;text-transform: uppercase;}
    .submenu_2 li:hover > a, .submenu_1 li.sfHover > a{text-decoration:none; color:#414141;}
    .submenu_2 .padTop{padding-top: 15px;}
    .submenu_2 .padBot{padding-bottom: 15px;}
    .submenu_2 .bgNone{background: none;}
    .textHold{position: relative; display: inline-block; height: 60px;overflow: hidden;}
    .mText{font-family: 'Homenaje', sans-serif; line-height: 60px; color: #FFF; font-size: 18px; position: 
    relative;text-transform: uppercase;z-index: 1;}
    .mTextOver{font-family: 'Homenaje', sans-serif; line-height: 60px; color: #FFF; font-size: 18px; 
    position: absolute;text-transform: uppercase;z-index: 9999;}
    .extHold{ height: 14px; position: absolute; display: block; top: -11px;z-index: 2;text-align: center; 
    width: 100%; overflow: hidden;}
    .overMarker{background:url(../images/extra2.png) 50% 50% no-repeat; width: 100%; height: 4px; display: 
    inline-block; position: relative;}
    .whDiv{background: #fff; width: 100%; height: 3px; bottom: 0;position: absolute;}
    .area{position: absolute; top: 0; left: 0; width: 100%;height: 60px;background:  
    url(../images/pixel.png); 
    z-index: 2;}
    /* ============================= content ====================== */
    #bodyArea {opacity: 0.6;}
    #content{position:relative;  z-index: 1; width: 100%; margin: 0 auto; display: block;}
    #content > ul{width: 820px; height: 520px; z-index: 4;display: inline-block;margin-top: 68px;}
    #content > ul > li{width: 100%; display:block; position:absolute; height: 520px;}
    .box{width: 100%;  overflow: hidden; position: relative; height: 520px; padding: 0px 0px;}
    .underline{text-decoration:underline; }
    .space1{display:inline-block; width: 75px; }
    .color1{color: #c2c2c2;}
    .color2{color: #000;}
    .color3 a{color: #000;}
    .padBot1{padding-bottom: 25px;}
    .padBot2{padding-bottom: 15px;}
    .padBot3{padding-bottom: 21px;}
    .padBot4{padding-bottom: 20px;}
    .padBot5{padding-bottom: 15px;}
    .padBot6{padding-bottom: 20px;}
    .padBot7{padding-bottom: 26px;}
    .padRight1{padding-right: 36px;}
    .padRight2{padding-right: 32px;}
    .padRight3{padding-right: 40px;}
    .padRight4{padding-right: 25px;}
    .padLeft1 {padding-left: 5px; }
    .magLeft1{margin-left: 38px;}
    .magLeft2{margin-left: 37px;}
    .magLeft3{margin-left: 40px;}
    .magLeft4{margin-left: 5px;}
    .bordRight{border-right: 1px solid #2b2b2b;}
    .text1{font-size: 60px; line-height: 52px;}
    .enterBtn{ position: absolute; width: 184px; height: 184px; display: inline-block;left: 318px; top: 
    185px;z-index: 3;}
    .enterBtn > a{width:135px; height: 135px; display: inline-block; position: relative;margin: 24px;text-
    align: center;z-index: 2;}
    .enterBtn > a span{font-family: 'Homenaje', sans-serif; font-size: 20px; color: #2f34fc;text-transform: 
    uppercase;text-align: center;display: inline-block;margin-top: 50px;text-shadow: 0px 0px 5px #2D33FC;}
    .outBtn{background:url(../images/enterBtn.png); width: 184px;height: 184px;position: absolute;top: 0;}
    .overBtn{background:url(../images/enterBtnOver.png); width: 184px;height: 184px;position: absolute;top: 
     0;}
    .partic{background:url(../images/extra1.png); position: absolute; width: 204px; height: 240px;top: 
    -23px;left: -33px;z-index: 1;}
    .more{font-family: 'Homenaje', sans-serif; color: #fff; font-size: 18px;   
    background:url(../images/moreSprites1.png);padding: 9px 18px;text-transform: uppercase;line-height: 
    18px;position: relative;}
    .more:hover{text-decoration: none;}
    .track{position:absolute; top: 50px; left: 385px; width:15px; height:335px;  
    background:url(../images/track.png) 0 0 no-repeat;}
    .shuttle{position:relative; width: 13px; height:106px; background: url(../images/shuttle.png) 50% 0% no-
    repeat;display: inline-block;z-index: 1;}
    .scroll2{width: 240px; height: 320px; margin-bottom: 0px;}
    .track2{position:absolute; top: 50px; left: 240px; width:15px; height:335px; 
    background:url(../images/track.png) 0 0 no-repeat;}
    .shuttle2{position:relative; width: 13px; height:106px; background: url(../images/shuttle.png) 50% 0% 
    no-repeat;display: inline-block;z-index: 1;}
    .scroll3{width: 770px; height: 325px; margin-bottom: 0px;}
    .track3{position:absolute; top: 50px; left: 800px; width:15px; height:335px; 
    background:url(../images/track.png) 0 0 no-repeat;}
    .shuttle3{position:relative; width: 13px; height:106px; background: url(../images/shuttle.png) 50% 0%  
    no-repeat;display: inline-block;z-index: 1;}
    ._link1{font-family: 'Homenaje', sans-serif; color: #23224b; font-size: 15px;}
    ._link2{color: #fff; text-transform: uppercase;font-size: 11px;}
    .bgPic{position: absolute;  width: 1520px; height: 636px; display: inline-block;left: -590px;top: 20px;}
    .bgPic img{position: absolute;  width: 1520px; height: 636px; display: inline-block;left: 0;top: 0;}
    ._list1{width: 355px;}
    ._list1 > li{width: 100%; position: relative;display: inline-block;padding-bottom: 10px;}
    ._list1 > li > figure{float: left; }
    ._list1 > li > figure img{float: left; margin-right: 18px;}
    ._list1 > li  figcaption{float: left; width: 205px;border-bottom: 1px solid #2e2c39;margin-top: 6px;}
    ._list1 > li  figcaption p{padding-bottom: 25px;}
    ._list2{width: 100%;}
    ._list2 > li{width: 100%; position: relative;display: inline-block;padding-bottom: 35px;}
    ._list2 > li > figure{float: left;}
    ._list2 > li > figure img{float: left; margin-right: 18px;}
    ._list2 > li  figcaption{float: left; width: 278px;margin-top: -6px;}
    ._list3{width: 220px;}
    ._list3 > li{position: relative; width: 100%;}
    ._list4{width: 770px;}
    ._list4 > li{width: 240px; height: 144px; position: relative;display: inline-block;float: left;margin-
    right: 20px;margin-bottom: 20px;}
    ._list4 > li > figure{float: left; display: inline-block;}
    ._list4 > li > figure a{width: 240px; height: 144px; display: inline-block;}
    ._list4 .magRnone{margin-right: 0px;}
    ._list5{width: 100%; position: relative;margin-top: 4px;}
    ._list5 > li{width: 100%; position: relative; background: url(../images/marker.png) 0% 50% no-
    repeat;margin-bottom: 10px;}
    ._list5 > li > a{color: #000; text-transform: uppercase; margin-left: 24px;font-weight: bold;font-size: 
    11px;}
    ._list5 > li > a:hover{text-transform: uppercase; text-decoration: none;}
    .zoomSp{display:block; position:absolute; left:0; top:0; width: 240px; height: 144px; z-index:3; 
    background: url(../images/magnify.png) 50% 50% no-repeat; }
    /* ============================= footer ====================== */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:58:46.413

您是否尝试设置相对于菜单的位置？z-index 取决于静态以外的位置属性（这是默认值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:22:36.657

好吧，我找到了一种解决方案。我编写了一个 JQuery 脚本，当鼠标悬停在下拉菜单上时，它会将背景的不透明度降低到 0.6，然后在鼠标移开时将其返回到 1.0。这使菜单能够位于背景之上。使用 z-index 不起作用，并且位置属性已设置为绝对。所以不知道为什么这些东西不起作用，但至少这是另一个可以保存在你的技巧包中的工具。

# r - 计算 R 中的唯一分类值

> ID：13312477
> 
> 赞同：2
> 
> 时间：2012-11-09T16:55:52.567
> 
> 标签：r, count

我不久前才开始使用 R 作为 Excel 的替代品。我处理的数据库非常大，我需要一个新工具来更好地处理它们。我设法在这个网站上找到了很多关于 R 的答案，这些答案帮助我构建了我的脚本，但是对于一种特定类型的分析无法找到任何结论性的东西。

我的数据如下所示：

```
Col1   Col2     Col3    ... Col50  

 M    18-24     Single  ... Employed

 F    18-24     Married ... Unemployed

 F    Under 18  Single  ... Employed 
```

通常我处理的数据库甚至有 100,000 行和 30 - 70 列，通常每列不超过 20 个唯一值

我想要的是一个子集输出，它将为我提供每列中每个唯一值的频率计数：

```
Col1

Variable name / F / M

Frequency / 2 / 1

.....

Col50

Variable name / Employed / Un-employed

Frequency /  2 / 1 
```

谁能至少给我一个提示，我应该寻找什么来计算这些分类值。我需要一个特殊的包裹还是什么？我能够找到一些计算值的函数，但它们只引用数值（如`"table()function"`.

大卫罗杰斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:06:39.920

`table`听起来像你想要的。它将为您提供每个值的出现次数。为了轻松地将表格应用于每一列，我们可以使用 lapply

```
lapply(your_data, table)
# Example use and output
lapply(mtcars, table) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T15:35:59.740

如果您使用 summary(mydata) 它应该为您提供每个唯一值在每列中出现的次数的输出。

如果您使用 count(mydata$column.name) ，它将为您提供该列中的唯一值和频率。

您应该能够简单地在所有列中使用轻点来获得您想要的。

# asp.net-mvc - 在 MVC3 中，如何一次从视图中保存更多模型？

> ID：13312481
> 
> 赞同：0
> 
> 时间：2012-11-09T16:56:00.680
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

在我的 MVC3 项目中，我有一个这样的模型

```
Public Class Description

    Public Property DescriptionId As Integer

    <DisplayName("Product Title"), Required(ErrorMessage:="A Product Title is required"), StringLength(160)>
    Public Property ProductTitle As String

    <DisplayName("Product Description"), DataType(DataType.MultilineText)>
    Public Property ProductDescription As String

End Class 
```

从如下视图

```
@ModelType MyProject.Description

@Code
    ViewData("Title") = "Create"
End Code

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@Using Html.BeginForm()
    @Html.ValidationSummary(True)
    @<fieldset>
        <legend>Description</legend>

        <div class="editor-label">
            @Html.LabelFor(Function(model) model.ProductTitle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(Function(model) model.ProductTitle)
            @Html.ValidationMessageFor(Function(model) model.ProductTitle)
        </div>

        <div class="editor-label">
            @Html.LabelFor(Function(model) model.ProductDescription)
        </div>
        <div class="editor-field">
            @Html.EditorFor(Function(model) model.ProductDescription)
            @Html.ValidationMessageFor(Function(model) model.ProductDescription)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
End Using

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

我可以一次创建一个新的描述，但是有没有一种方法可以一次插入更多的描述（例如五个描述）以及如何在控制器操作中获取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:03:01.350

不太确定 VB.net 语法，我提供了它的 c# 版本。

1.  在您的视图模型中使用集合，例如`List<String> ProductDescription {get;set;}`

2.  在视图中，手动渲染描述，避免使用 EditorFor

    `for (var i = 0; i < Model.ProductDescription.Count;i++ ) { @Html.TextBox("ProductDescription[" + i + "]") }`

3.  回发时，使用描述作为您的操作参数。

# android - 触摸设备“atmel-maxtouch”在带有 Tegra 2 的 Android Ice Cream Sandwich 中不起作用

> ID：13312486
> 
> 赞同：1
> 
> 时间：2012-11-09T16:56:24.333
> 
> 标签：android, kernel, android-4.0-ice-cream-sandwich, atmel, tegra

```
I/EventHub(  146): New device: id=3, fd=118, path='/dev/input/event1', name='atmel-maxtouch', classes=0x14, configuration='/system/usr/idc/atmel-maxtouch.idc', keyLayout='', keyCharacterMap='', builtinKeyboard=false
I/InputReader(  146):   Touch device 'atmel-maxtouch' could not query the properties of its associated display 0\.  The device will be inoperable until the display size becomes available.
I/InputReader(  146): Device added: id=3, name='atmel-maxtouch', sources=0x00001002
I/InputReader(  146): Device added: id=2, name='gpio-keys', sources=0x00000101
I/InputReader(  146): Device added: id=1, name='tegra Wired Accessory Jack', sources=0x80000000
I/InputReader(  146): Reconfiguring input devices.  changes=0x00000004
I/InputReader(  146): Device reconfigured: id=3, name='atmel-maxtouch', surface size is now 1280x800, mode is 1 
```

我需要构建内核或修改 idc 设备。还可以使内核从 HC 反向移植到 ICS。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:25:33.153

# 英语

看到[这个帖子](http://forum.xda-developers.com/showthread.php?t=1330162)。问题出在 Atmel 控制器和 ICS 内核上。

以下是 Github 上发布的驱动程序链接：

[https://github.com/atmel-maxtouch/linux](https://github.com/atmel-maxtouch/linux)

* * *

# 西班牙文

Mira [este post](http://forum.xda-developers.com/showthread.php?t=1330162) , el problema es con el controlador de Atmel y el kernel de ICS。

Aqui esta el enlace al driver posteado en Github:

[https://github.com/atmel-maxtouch/linux](https://github.com/atmel-maxtouch/linux)

# powershell - PowerShell v3 中的 Get-ChildItem 出现 PathTooLong 错误，但不是 v2

> ID：13312487
> 
> 赞同：3
> 
> 时间：2012-11-09T16:56:30.390
> 
> 标签：powershell, error-handling, powershell-3.0, get-childitem

在[Windows Server 2008](http://en.wikipedia.org/wiki/Windows_Server_2008) R2 VM 上，我将 PowerShell 升级到 v3，希望利用[Get-ChildItem](http://technet.microsoft.com/en-us/library/hh849800.aspx) (gci) 性能改进。此行在 v2 中运行没有错误：

```
$search = gci $dir -recurse -exclude "*.mdf" | where {$_.length -gt 100mb} 
```

升级到v3后，为什么同一行会出现这个错误？`$dir`值不变。

> gci : 指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。在 line:1 char:11 + $search = gci $dir -recurse -exclude "*.mdf" | 其中 {$_.length -gt 100mb} + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : ReadError: (\server.domain...DETAILS 1.0.prt:String) [Get-ChildItem], PathTooLongException + FullyQualifiedErrorId : DirIOError,Microsoft.PowerShell.Commands.GetChildItemCommand

应用 Windows 更新并重新启动后没有任何变化。我在升级 PowerShell 之前拍摄了 VM 的快照，因此我可以轻松地来回切换。

`$errorActionPreference`在`Continue`v2 和 v3 中。

`$search.count`在 v2 和 v3 中都是 8，所以我不太担心丢失的东西，但想了解行为的变化。

我尝试`-force`在 v2 中添加，看到类似的 PathTooLong 错误，`.count`为 10。在添加`-force`v3 后，`.count`为 9。然后我恢复到 v2，再次找到 10 个带有`-force`. 尽管如此，更改数据`$dir`可能会解释`.count`差异，但在我们的环境中，更改数据并不能实际解释 v3 中 PathTooLong 错误的一致存在，而 v2 则不然。既然我的好奇心已经战胜了我，我希望有人能对这个谜团有所了解，并让我免于错误处理，我承认，这可能会提供更多线索。

FWIW，[TechNet 上的使用文档](http://technet.microsoft.com/en-us/library/hh849800.aspx)说它适用于 v2 和 v3。该`-Force`参数的默认值为 False。

关于 PowerShell 和`MAX_PATH`v1 的[一些背景知识。](http://connect.microsoft.com/PowerShell/feedback/details/276235/path-length-limitations)

在[Windows Server 2008](http://en.wikipedia.org/wiki/Windows_Server_2008) R2 VM 上，我将 PowerShell 升级到 v3，希望利用[Get-ChildItem](http://technet.microsoft.com/en-us/library/hh849800.aspx) (gci) 性能改进。此行在 v2 中运行没有错误：

```
$search = gci $dir -recurse -exclude "*.mdf" | where {$_.length -gt 100mb} 
```

升级到v3后，为什么同一行会出现这个错误？`$dir`值不变。

> gci : 指定的路径、文件名或两者都太长。完全限定的文件名必须少于 260 个字符，目录名必须少于 248 个字符。在 line:1 char:11 + $search = gci $dir -recurse -exclude "*.mdf" | 其中 {$_.length -gt 100mb} + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ + CategoryInfo : ReadError: (\server.domain...DETAILS 1.0.prt:String) [Get-ChildItem], PathTooLongException + FullyQualifiedErrorId : DirIOError,Microsoft.PowerShell.Commands.GetChildItemCommand

应用 Windows 更新并重新启动后没有任何变化。我在升级 PowerShell 之前拍摄了 VM 的快照，因此我可以轻松地来回切换。

`$errorActionPreference`在`Continue`v2 和 v3 中。

`$search.count`在 v2 和 v3 中都是 8，所以我不太担心丢失的东西，但想了解行为的变化。

我尝试`-force`在 v2 中添加，看到类似的 PathTooLong 错误，`.count`为 10。在添加`-force`v3 后，`.count`为 9。然后我恢复到 v2，再次找到 10 个带有`-force`. 尽管如此，更改数据`$dir`可能会解释`.count`差异，但在我们的环境中，更改数据并不能实际解释 v3 中 PathTooLong 错误的一致存在，而 v2 则不然。既然我的好奇心已经战胜了我，我希望有人能对这个谜团有所了解，并让我免于错误处理，我承认，这可能会提供更多线索。

FWIW，[TechNet 上的使用文档](http://technet.microsoft.com/en-us/library/hh849800.aspx)说它适用于 v2 和 v3。该`-Force`参数的默认值为 False。

关于 PowerShell 和`MAX_PATH`v1 的[一些背景知识。](http://connect.microsoft.com/PowerShell/feedback/details/276235/path-length-limitations)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:53:07.460

我知道 PathTooLongException 并不特定于 PowerShell。它由在后台调用的 Win32 API 引发。如果您必须使用长路径，您可能会发现 PowerShell 是否允许您改用 Unicode 版本的 Win32 API。[有关信息，请参见此处](http://blogs.msdn.com/b/bclteam/archive/2007/02/13/long-paths-in-net-part-1-of-3-kim-hamilton.aspx)

至于为什么版本 2 没有抛出错误，我只能假设版本 2 对异常有“更好”的内部处理。

# html - Internet Explorer 10 中 HTML5 音频标记的“错误：不支持的音频类型或无效的文件路径”

> ID：13312488
> 
> 赞同：8
> 
> 时间：2012-11-09T16:56:32.910
> 
> 标签：html, internet-explorer, internet-explorer-9, html5-audio, internet-explorer-10

对于不支持它的浏览器，我有以下带有音频标签的 html5 文档和对 Flash 的回退：

```
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  </head>
  <body>
    <audio autoplay controls preload="auto" autobuffer> 
      <source src="trumpet.ogg" type="audio/ogg">
      <source src="trumpet.mp3" type="audio/mp3">
      <source src="trumpet.wav" type="audio/wav">
      <source src="trumpet.m4a" type="audio/aac">

      <!-- Flash fallback -->
      <object width="1" height="1" type="application/x-shockwave-flash" data="player.swf">
        <param name="movie" value="player.swf">
        <param name="flashvars" value="file=trumpet.mp3">
      </object>
    </audio>
  </body>
</html> 
```

所有文件都由服务返回，并在 http 标头中具有正确的 MIME 类型。该解决方案适用于除 Internet Explorer 9 和 10 之外的所有浏览器（兼容模式**除外**，因为 Flash 文件将在那里播放）。

在这两个浏览器中，我可以看到播放器控件带有一条错误消息，上面写着“错误：不支持的音频类型或无效的文件路径”。我试图改变源标签的顺序，但找不到解决方案让它播放它们中的任何一个。

有没有人暗示要检查什么或这里出了什么问题？

请参阅[http://l.urff.at/html5audioexample](http://l.urff.at/html5audioexample)以了解上述标记的实际效果。

提前感谢您提供任何有用的提示或提示！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T11:27:41.780

您的示例在 Windows 8 上的 IE10 中适用于我。

你应该知道：

*   您应该只需要 Ogg Vorbis 和 AAC (.m4a) 即可覆盖所有浏览器。.wav 和 .mp3 无济于事。
*   某些格式具有复杂的子格式，例如 .wav 文件可以包含 MP3 音频，.m4a 文件可以包含特定系统可能不支持的某些采样率或位深度，而 .ogg 文件可以包含视频或其他内容。大多数浏览器不支持所有子格式，因此您应该仔细检查您使用的每种声音的确切子格式并确保它们受支持。几乎总是支持 16 位 44.1KHz 单声道/立体声，所以尽量不要偏离它。

# c# - C# 绑定到没有 selectedItem 和文本填充的组合框

> ID：13312491
> 
> 赞同：0
> 
> 时间：2012-11-09T16:56:42.893
> 
> 标签：c#, data-binding, combobox, selecteditem

我的问题是“有没有办法将数据绑定到组合框而不更改/填充 selectedItem 和文本值？” （我希望组合框保持空白）

这是我正在做的一个例子：

```
 Dictionary<int,string> test = new Dictionary<int,string>();
        test.Add(1, "Company1");
        test.Add(2, "Company2");
        test.Add(3, "Company3");
        test.Add(4, "Company4");
        test.Add(5, "Company5");
        test.Add(6, "Company6");

        var list = test.Select(x => new { CompanyName = x.Value }).ToList();

        comboBox1.DataSource = list;
        comboBox1.DisplayMember = "CompanyName";
        comboBox1.ValueMember = "CompanyName";
        comboBox1.SelectedItem = null; 
```

如果您运行此代码，它可以正常工作，因为它加载速度非常快，看起来组合框保持空白。

但是，如果您单步执行代码，您将看到当将 DataSource 分配给“list”时，SelectedItem 和 Text 值发生了变化。

我实际的 LINQ 查询要大一些，因此加载速度较慢。我的组合框在 Text 值被清除之前“闪烁”它，我想删除这个难看的 flash。

我已经尝试在 DataSource 分配之前和之后将 SelectedItem 和 Text 值设置为 null（或“”）的不同组合，但我无法让“flash”消失。

任何建议都非常感谢！=)

**编辑：**我还想补充一点，这只发生在初始表单加载时......如果我更改绑定源然后重置回我的原始（再次运行完全相同的代码），它不会“闪烁”......不确定这是否有帮助或有所作为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:06:50.437

尝试使用`comboBox1.SuspendLayout()`并`comboBox1.ResumeLayout()`围绕您的数据绑定代码。第一个应该完全阻止它更新，直到第二个被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:09:17.920

另一个简单的建议是将空白的 CompanyName 添加为列表中的第一项

```
list.Insert(0, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:11:06.357

在设置comboBox1.DataSource 之前，将一个空引用添加到您的列表作为第一个列表元素。

```
 var list = test.Select(x => new { CompanyName = x.Value }).ToList();
 list.Insert(0, null);
 comboBox1.DataSource = list; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T21:34:42.603

我遇到了同样的问题，但我无法添加一个空项目，所以我所做的是：

```
comboBox.ForeColor = comboBox.BackColor;
//set the combobox datasource
comboBox.ForeColor = SystemColors.WindowText; 
```

这使得组合框在设置数据源而不添加空项目时看起来是空白的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-14T15:47:56.047

这对我有用：删除绑定，然后在设置 DataSource 后将它们添加回来：

```
Binding[] bindings = new Binding[combo.DataBindings.Count];
combo.DataBindings.CopyTo(bindings, 0);
combo.DataBindings.Clear();
combo.DataSource = datasource;
combo.SelectedIndex = -1;
foreach (Binding b in bindings)
{
    combo.DataBindings.Add(b);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-29T11:32:03.657

我对这个问题的解决方案是在表单构造函数中添加一个数据源，然后在 form_Load 中将其更改为 null，之后，当我用我的列表设置数据源时，组合框中的文本保持空白

# c# - 性能最佳实践 - 通过 SQL 加载分页结果，以及加载找到的总结果

> ID：13312495
> 
> 赞同：0
> 
> 时间：2012-11-09T16:56:53.610
> 
> 标签：c#, sql, performance

我有一个通用的软件练习问题，也许版主可以更好地表述我的标​​题。

我正在为具有一堆过滤器的“管理用户”页面加载分页结果列表。

在我的系统中，有 3000 个用户，我想每页显示 25 个，底部有一个分页控件。没问题。这里的问题...

我想在页面顶部显示，我的条件有 2300 个匹配项，所以我正在做的是两次运行相同的 SQL 查询——一次限制为 25 条记录以构建到对象中（用于分页)，然后再次获得不受约束的总数。

这似乎表现不佳。有没有一种无需运行两个 SQL 查询的首选方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:15:36.710

我解决了一个类似的问题并采用了两种查询方法：第一个查询检索当前数据页（即 25 行），而另一个用于检索总计数。

从您的问题来看，您似乎正在第二个查询中检索整个数据集。正如其他人所说，您最好只检索行数。

仅在第二个查询中获取行数应该会加快速度，但是如果您想避免每次加载一些数据时都运行它，您可以在页面最初加载时只运行一次，将结果存储在会话中或视图状态。这当然意味着如果行数发生变化，计数可能会过时，因此在这种情况下，您需要根据性能评估准确性的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T05:56:02.677

Don't run the same query but a `Count(*)` one. For example:

```
Select top 25 Name, Country, SomethingElse from SomeTable where Name like @name

Select Count(*) from SomeTable where Name like @name 
```

This is easily achieved when using an ORM like NHibernate or Entity Framework. For plain-old sql, you'll need to create both queries.

Hope it helps.

# asp.net - 无法开始调试 Visual Studio 2005

> ID：13312497
> 
> 赞同：2
> 
> 时间：2012-11-09T16:56:57.637
> 
> 标签：asp.net, visual-studio, debugging

这真的很奇怪，我无法在一个项目上开始调试，但对另一个项目没有问题。我坚持的那个给了我以下错误消息：

> 无法在 Web 服务器上开始调试。无法连接到 Web 服务器。验证 Web 服务器是否正在运行并且传入的 HTTP 请求没有被防火墙阻止。

我尝试了以下不起作用：

1.  重置 IIS
2.  通过运行重新注册 ASP.NET`aspnet_regiis -i`
3.  重新启动并清除该项目的所有临时文件
4.  检查IIS虚拟文件夹是否正确
5.  确认安全设置为 Windows 集成
6.  确认 web.config 有`debugging= true`

我还可以采取哪些其他步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:51:08.850

重启解决了这个问题。谢谢。

# python - 如何在协方差矩阵中找到退化的行/列

> ID：13312498
> 
> 赞同：9
> 
> 时间：2012-11-09T16:56:59.930
> 
> 标签：python, matrix, numpy, singular

我正在使用 numpy.cov 从超过 400 个时间序列的数据集中创建协方差矩阵。使用 linalg.det 给我一个零值，所以矩阵是奇异的。我可以使用 linalg.svd 来查看秩比列数少 2，因此在协方差矩阵的某处，我有一些线性组合可以使矩阵退化。我在基础时间序列上使用了 corrcoef，但没有相关性 > 0.78，所以在那里并不明显。有人可以建议一种方法来确定退化列的位置。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T18:26:02.173

如果您对`QR`矩阵 进行分解，`A`沿`R`对角线具有非零值的列对应于 的线性独立列`A`。

* * *

```
import numpy as np
linalg = np.linalg

def independent_columns(A, tol = 1e-05):
    """
    Return an array composed of independent columns of A.

    Note the answer may not be unique; this function returns one of many
    possible answers.

    http://stackoverflow.com/q/13312498/190597 (user1812712)
    http://math.stackexchange.com/a/199132/1140 (Gerry Myerson)
    http://mail.scipy.org/pipermail/numpy-discussion/2008-November/038705.html
        (Anne Archibald)

    >>> A = np.array([(2,4,1,3),(-1,-2,1,0),(0,0,2,2),(3,6,2,5)])
    >>> independent_columns(A)
    np.array([[1, 4],
              [2, 5],
              [3, 6]])
    """
    Q, R = linalg.qr(A)
    independent = np.where(np.abs(R.diagonal()) > tol)[0]
    return A[:, independent]

def matrixrank(A,tol=1e-8):
    """
    http://mail.scipy.org/pipermail/numpy-discussion/2008-February/031218.html
    """
    s = linalg.svd(A,compute_uv=0)
    return sum( np.where( s>tol, 1, 0 ) )

matrices = [
    np.array([(2,4,1,3),(-1,-2,1,0),(0,0,2,2),(3,6,2,5)]),
    np.array([(1,2,3),(2,4,6),(4,5,6)]).T,
    np.array([(1,2,3,1),(2,4,6,2),(4,5,6,3)]).T,
    np.array([(1,2,3,1),(2,4,6,3),(4,5,6,3)]).T,
    np.array([(1,2,3),(2,4,6),(4,5,6),(7,8,9)]).T
    ]

for A in matrices:
    B = independent_columns(A)
    assert matrixrank(A) == matrixrank(B) == B.shape[-1] 
```

`assert matrixrank(A) == matrixrank(B)`检查`independent_columns`函数是否返回与 具有相同等级的矩阵`A`。

`assert matrixrank(B) == B.shape[-1]`检查 的排名是否`B`等于 的列数`B`。

# javascript - 是否可以从基于 JavaScript 的网站获取数据？

> ID：13312499
> 
> 赞同：0
> 
> 时间：2012-11-09T16:57:06.747
> 
> 标签：javascript, web

例如，我想从[http://www.peapod.com等网站获取一些产品详细信息](http://www.peapod.com)

我可以从搜索中获得所有简洁的产品信息。例如，在搜索“奶酪”时，我可以获得所有此类产品的重量和价格。但是，如果我想获得更详细的数据，我需要单击每个产品的链接，我可以从网络浏览器执行此操作，但是当我尝试从 html 文件执行此操作时，我得到的唯一链接信息是形成“javascript：ntn（product_id，some_int）。”

真正的 http 链接形式为[http://www.peapod.com/itemDetailView.jhtml?productId=106871&NUM=1352479733231](http://www.peapod.com/itemDetailView.jhtml?productId=106871&NUM=1352479733231)，其中第一个数字是产品 ID，第二个数字（我猜）是会话 ID。我可以通过其 JavaScript 调用从父页面中的链接地址中找到产品 id，但是如何获取会话 id？

当我尝试下载搜索页面时，我得到了一堆 js 文件，我想这些 js 文件可能会帮助我获取会话 ID。但我不知道如何调用这些 js 文件。

请帮我。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:02:08.263

与其尝试编写一些东西来调用 JavaScript 函数，不如使用 Fiddler 之类的工具来查看单击这些链接时会发生什么。最有可能的是，这些函数所做的是发出一个 HTTP 请求来检索要显示的数据。您的应用程序会更容易发出相同的 HTTP 请求并提取数据，而不是使用屏幕抓取技术。

# facebook - facebook跳过去应用程序

> ID：13312502
> 
> 赞同：1
> 
> 时间：2012-11-09T16:57:11.350
> 
> 标签：facebook

我为 facebook 创建了一个 iframe 应用程序

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<style type="text/css">
div#container_notlike, div#container_like {
display: none;
}
</style>
</head>
<body>
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
FB.init({
appId : 'YOUR_APP_ID', // App ID
channelUrl : 'http(s)://YOUR_APP_DOMAIN/channel.html', // Channel File
status : true, // check login status
cookie : true, // enable cookies to allow the server to access the session
xfbml : true // parse XFBML
});

FB.getLoginStatus(function(response) {
var page_id = "YOUR_PAGE_ID";
if (response && response.authResponse) {
var user_id = response.authResponse.userID;
var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
FB.Data.query(fql_query).wait(function(rows) {
if (rows.length == 1 && rows[0].uid == user_id) {
console.log("LIKE");
$('#container_like').show();
} else {
console.log("NO LIKEY");
$('#container_notlike').show();
}
});
} else {
FB.login(function(response) {
if (response && response.authResponse) {
var user_id = response.authResponse.userID;
var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id;
FB.Data.query(fql_query).wait(function(rows) {
if (rows.length == 1 && rows[0].uid == user_id) {
console.log("LIKE");
$('#container_like').show();
} else {
console.log("NO LIKEY");
$('#container_notlike').show();
}
});
} else {
console.log("NO LIKEY");
$('#container_notlike').show();
}
}, {scope: 'user_likes'});
}
});
};

// Load the SDK Asynchronously
(function(d){
var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
d.getElementsByTagName('head')[0].appendChild(js);
}(document));
</script>

<div id="container_notlike">
YOU DON'T LIKE ME :(
</div>

<div id="container_like">
YOU LIKE ME :)
</div>

</body>
</html> 
```

但是每次任何用户访问加载此应用程序的页面上的选项卡时，我都会收到 Auth Dialog 询问用户权限。如上所示，我的代码中没有任何信息。为什么我仍然得到这个对话框？有什么办法可以摆脱这个？问候尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:34:15.377

您的代码在不正确时自动调用 FB.login() `response && response.authResponse`，对于尚未登录您的应用程序的任何人来说都是这种情况。

# android - Activity_Pause 事件发生时如何接收数据

> ID：13312505
> 
> 赞同：0
> 
> 时间：2012-11-09T16:57:22.143
> 
> 标签：android, basic4android

我正在制作一个连接到我的服务器（VB6）的Android APP，一切正常，但我有一个小问题我希望APP即使在Activity_pause发生时也能接收数据我注意到APP会在何时接收数据用户恢复应用程序

它类似于 viber，即使未加载 UI，该程序也能够接收事件如何：？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:08:02.930

当您的活动处于暂停状态时，您可能需要实现`Service`在后台接收消息。

这是[参考——服务](http://developer.android.com/reference/android/app/Service.html)

# mysql - MySQL，从不同的表中选择...如果

> ID：13312506
> 
> 赞同：0
> 
> 时间：2012-11-09T16:57:26.760
> 
> 标签：mysql, sql

我有一个小麻烦，因为很久以前我研究数据库和查询。

例如，我将有两张用于 cd:s 的表格，一张带有数据，一张带有替代翻译。在 CD 表中，我有原始语言，它看起来像这样

```
Table for CDs (cds):
id  |  name  | language
-----------------------
1   |  aaa   | en
2   |  bbb   | en
3   |  ccc   | fi

Table for languages (languages):
cd_id | language | name
-----------------------
1     | fi       | AAA
1     | de       | AAACHTUNG
3     | en       | CCC 
```

现在，我想把所有这些 cd:s 都翻译成德语，如果没有翻译，我希望它是原始语言...

编辑：德语 = de

因为只有一个德语翻译（在 CD #1 上），所以我想要 cd 2 和 3 的原名……在这种情况下是英语和芬兰语……

我怎样才能做到这一点？

编辑2：在这种情况下，当我要求'de'时，我会得到：

```
AAACHTUNG
bbb
ccc 
```

如果我要求'en'，我会得到

```
aaa
bbb
CCC 
```

等等...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:07:04.943

这应该可以解决问题（[SQL Fiddle](http://www.sqlfiddle.com/#!2/f328a/1/0)）：

```
select coalesce(l.name, c.name)
from cds c
left join languages l on l.cd_id = c.id
                         and l.language = 'de'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:10:42.893

```
select cds.id, IFNULL(languages.name, cds.name) as name
from cds 
left join languages on cds.id = languages.cd_id and languages.language = 'de' 
```

# windows - Opencv cvshow 图像无法获得焦点

> ID：13312509
> 
> 赞同：0
> 
> 时间：2012-11-09T16:57:39.400
> 
> 标签：windows, image, opencv

我使用 opencv 显示原始图像，图像看起来不错，但是我无法单击并拖动窗口或无法使它们聚焦。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:02:24.487

你错过了`cv::waitKey`电话。

请阅读[文档](http://docs.opencv.org/modules/highgui/doc/user_interface.html#waitkey)和[一些教程](http://docs.opencv.org/doc/tutorials/tutorials.html)以了解 OpenCV GUI 功能。

# symfony - 如何确保作为属性嵌入的对象是 Valid 或 Null？

> ID：13312510
> 
> 赞同：1
> 
> 时间：2012-11-09T16:57:40.913
> 
> 标签：symfony, doctrine-orm

我有这个项目，其中一个实体 A 拥有一个属性 b，它应该是一个有效的 B 或 null。B 本身具有强制属性。

如何断言 b 有效或为空？我尝试使用 Valid 断言，但 null 无效，因此它抱怨强制项为 null。

```
<?php 
// use statements

class A
{
    /**
     * @ORM\OneToOne(targetEntity="B")
     * @Assert\Valid
     */
    private b;
}

// meanwhile, in another file...
class B
{
   /**
    * @Assert\NotBlank
    */
   private $mandatoryItem;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:14:30.190

在执行以下任何操作之前，请确保您已`Assert`启用。如果这已经是原因，则以下步骤可能对您有所帮助。

如果您使用表单提交数据并获得该表单的 formType，但`Valid`约束不起作用，您可以这样做：

删除`Valid`断言。

在`AType`类`buildForm()`块中，您可以像这样添加它：

```
...
$builder->add('B', new BType(), array(
    'required' => false,
));
... 
```

同样在`AType`类中添加此功能：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'data_class' => 'Your\AppBundle\Entity\A',
        'cascade_validation' => true,
    ));
} 
```

`'cascade_validation' => true,`与表单相同，`Valid`但在表单内。

# c++ - C++ 中字符串和整数的串联。从 ASCII 转换为 HEX

> ID：13312511
> 
> 赞同：0
> 
> 时间：2012-11-09T16:57:41.520
> 
> 标签：c++, hex, ascii

我一直在用头撞墙，尝试了很多不同的方法来做到这一点，但似乎没有一个能正常工作。

注释掉的行是我试图用 C++ 重写的 C# 中的代码。任何帮助将非常感激。

```
void sendCommand(string command)
{
    //Convert.ToString((8 * startBit) + "4" + command);
    char buffer[50];
    sprintf(buffer, "%d", (8 * startBit));
    motor.printf("sendBuffer: %d\r\n", buffer);
    startBit = 1 - startBit;
    motor.printf("%s%c%s\n\r", buffer, "4", command);
    return;
}

string strAcceleration(int acceleration)
{
    //string accelerationHex = acceleration.ToString("X");
    //accelerationHex = accelerationHex.PadLeft(8,'0');
    char buffer[50];
    sprintf(buffer, "%00000000X", acceleration);
    motor.printf("acc: %s", buffer);
    return buffer;
}

string strSpeed(int speed)
{
/*
    string speedHex = null;
    if (speed == 0) speedHex = "0";
    else if (speed > 0) speedHex = speed.ToString("X");
    else speedHex = 0xFFFFFFFF + speed.ToString("X");

    if(speedHex.Length == 1) speedHex = "0000000" + speedHex;
    if(speedHex.Length == 2) speedHex = "000000" + speedHex;
    if(speedHex.Length == 3) speedHex = "00000" + speedHex;

    return speedHex;

    */
} 
```

谢谢

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:00:13.633

我不确切知道您的 C# 代码做了什么，但第二个

```
sprintf(buffer, "%08X", acceleration); 
```

看起来不是一百万英里之外。同样对于第一个

```
std::ostringstream buffer;
buffer << (8 * startBit) <<  "4" << command;
std::string motor = buffer.str(); 
```

看起来它接近你想要的。

# ios - 检查设备是否静音

> ID：13312520
> 
> 赞同：1
> 
> 时间：2012-11-09T16:58:10.507
> 
> 标签：ios, xcode, device, silent

> **可能重复：**
> [如何检测 iphone 是否处于静音模式](https://stackoverflow.com/questions/833304/how-to-detect-iphone-is-on-silent-mode)

我制作了一个 iPhoneApplication，如果你摇晃它就会播放声音。我的问题是，许多使用它的人想知道为什么当设备处于静音模式时如果他们摇晃它就不会发出声音。如果设备处于静音模式，我想通过显示警报来解决问题。

我的问题是：“我如何检查设备是否处于静音模式？”

# javascript - div 内的搜索框。姜戈

> ID：13312521
> 
> 赞同：0
> 
> 时间：2012-11-09T16:58:10.997
> 
> 标签：javascript, jquery, django, search

在我的 django 应用程序中，由于循环，我显示了一个元素列表（朋友姓名）：

```
<div>
{% for friend in group %}
    <p>{{ friend.name }} <p>
{% endfor %}
</div> 
```

我想在我的列表顶部创建一个搜索框，以便能够只找到用户想要的朋友，而无需刷新页面。而且我希望搜索栏不需要单击即可发送请求（例如，Facebook 好友列表顶部的通话时间搜索框）。

我完全不知道如何做到这一点，我正在寻找开始的提示或技巧。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:23:05.390

正如所建议的，使用 jQuery 非常容易。这是一个简单的示例：

### HTML

```
<input id="searchbox" type="text" placeholder="Search" />
<ul id="friendlist">
    <li>Bob</li>
    <li>John</li>
    <li>Peter</li>
    <li>Paul</li>
    <li>Adam</li>
</ul> 
```

### JavaScript

```
// case insensitive ':contains' selector
jQuery.expr[':'].Contains = function(a, i, m) {
    return jQuery(a).text().toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
};

$(function() {
    $('#searchbox').on('keyup', function() {
        var w = $(this).val();
        if (w) {
            $('#friendlist li').hide();
            $('#friendlist li:Contains('+w+')').show();
        } else {
            $('#friendlist li').show();                  
        }
    });
});​ 
```

我们需要定义不区分大小写的 :Contains 选择器，因为 jQuery 的内置 :contains 是区分大小写的，这可能不是您想要的。

这是一个工作[jsFiddle](http://jsfiddle.net/UH6mN/)。

作为一名 Web 开发人员，您绝对应该仔细研究[jQuery](http://jquery.com/)。你总是需要它。

# python - python添加两个列表并创建一个新列表

> ID：13312523
> 
> 赞同：1
> 
> 时间：2012-11-09T16:58:19.677
> 
> 标签：python, python-2.7

```
lst1 = ['company1,AAA,7381.0 ', 'company1,BBB,-8333.0 ', 'company1,CCC,
3079.999 ', 'company1,DDD,5699.0 ', 'company1,EEE,1640.0 ',
       'company1,FFF,-600.0 ', 'company1,GGG,3822.0 ', 'company1,HHH,-600.0 ',
       'company1,JJJ,-4631.0 ', 'company1,KKK,-400.0 ']

lst2 =['company1,AAA,-4805.0 ', 'company1,ZZZ,-2576.0 ', 'company1,BBB,1674.0 ', 'company1,CCC,3600.0 ', 'company1,DDD,1743.998 '] 
```

我需要的输出==

```
['company1,AAA,2576.0','company1,ZZZ,-2576.0 ','company1,KKK,-400.0 ' etc etc] 
```

我需要在每个列表中添加类似的产品编号并将其移动到新列表中。我还需要将任何未添加在一起的符号添加到该新列表中。我在浏览每个列表时遇到问题。

这就是我所拥有的：

```
h = [] 

z = []         

a = []        

for g in lst1:
    spl1 = g.split(",")
    h.append(spl1[1])
for j in lst2:
    spl2 = j.split(",")
    **if spl2[1] in h:
        converted_num =(float(spl2[2]) +float(spl1[2]))
        pos=('{0},{1},{2}'.format(spl2[0],spl2[1],converted_num))
        z.append(pos)**
    else:
        pos=('{0},{1},{2}'.format(spl2[0],spl2[1],spl2[2]))
        z.append(pos)

for f in z:
    spl3 = f.split(",")
    a.append(spl3[1])

for n in lst1[:]:
    spl4 = n.split(",")
    if spl4[1] in a:
        got = (spl4[0],spl4[1],spl4[2])
        lst1.remove(n)
smash = lst1+z #for i in smash:
for i in smash:
    print(i) 
```

我在遍历列表时遇到问题，以确保我将所有类似产品添加到新列表（粗体）以及不在列表 1 中但在 lst2 中的任何产品到新列表，反之亦然。我相信有一个更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:11:30.127

我支持使用字典的建议。因为我很懒，所以我更喜欢使用 a`defaultdict`因为这样我就不必担心检查某个键是否存在。（您也可以在`Counter`此处使用 a 。）特别是，假设您必须以列表开头和结尾：

```
from collections import defaultdict

data = defaultdict(float)

for line in lst1+lst2:
    name, code, value = line.split(",")
    data[name, code] += float(value)

newlist = ['{},{},{}'.format(key[0], key[1], val) for key, val in sorted(data.items())] 
```

给

```
>>> data
defaultdict(<type 'float'>, {('company1', 'HHH'): -600.0, ('company1', 'JJJ'): -4631.0,
('company1', 'KKK'): -400.0, ('company1', 'DDD'): 7442.998, ('company1', 'ZZZ'): -2576.0,
('company1', 'CCC'): 6679.999, ('company1', 'AAA'): 2576.0, ('company1', 'FFF'): -600.0,
('company1', 'GGG'): 3822.0, ('company1', 'EEE'): 1640.0, ('company1', 'BBB'): -6659.0}) 
```

和

```
>>> newlist
['company1,AAA,2576.0', 'company1,BBB,-6659.0', 'company1,CCC,6679.999',
'company1,DDD,7442.998', 'company1,EEE,1640.0', 'company1,FFF,-600.0', 
'company1,GGG,3822.0', 'company1,HHH,-600.0', 'company1,JJJ,-4631.0', 
'company1,KKK,-400.0', 'company1,ZZZ,-2576.0'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:04:06.887

您应该使用字典将字符串映射到浮点数，如下所示：

```
dict1 = {'company1,AAA':7381.0, 'company1,BBB':-8333.0, 'company1,CCC':3079.999} 
```

那么当你得到一个新的字典时：

```
dict2 = {'company1,AAA':-4805.0} 
```

你可以说：

```
for key in dict2.keys():
    dict1[key] = dict1[key] + dict2[key] 
```

或类似的东西（另见函数.update（））

编辑：

.update() 函数还允许您使用来自 dict2 的新项目来更新您的字典，只需使用一个简单的 if 语句检查来自 dict2 的键是否已经在 dict1 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:10:48.513

完整解决您的问题

```
from collections import OrderedDict
lst1 = ['company1,AAA,7381.0 ', 'company1,BBB,-8333.0 ', 'company1,CCC, 3079.999 ', 
        'company1,DDD,5699.0 ', 'company1,EEE,1640.0 ', 'company1,FFF,-600.0 ', 
        'company1,GGG,3822.0 ', 'company1,HHH,-600.0 ', 'company1,JJJ,-4631.0 ', 
        'company1,KKK,-400.0 ']
lst2 =['company1,AAA,-4805.0 ', 'company1,ZZZ,-2576.0 ', 'company1,BBB,1674.0 ', 
       'company1,CCC,3600.0 ', 'company1,DDD,1743.998 ']
#Create an OrderedDict, this will ensure that the Order in the original
# List is maintained
out_dict = OrderedDict()
#Create a Dictionary out of the first List, Note the key is
#the company and product ID
for e in lst1:
    key, _, value = e.strip().rpartition(",")
    out_dict[key] = float(value)
#Now iterate through the next list
for e in lst2:
# Partition on company, productID and Value
    key, _, value = e.strip().rpartition(",")
#Retrieve the value with the key with default '0'
#and add value from the new list
    out_dict[key] = out_dict.get(key, 0) + float(value)
#Finally recreate the list from the dictionary
lst3 = [','.join(map(str, e)) for e in out_dict.iteritems()]
print lst3 
```

# xml - 为什么我在 Flash AS3 中得到 Error#2036 以及如何解决这个问题？

> ID：13312525
> 
> 赞同：0
> 
> 时间：2012-11-09T16:58:26.957
> 
> 标签：xml, actionscript-3, flash, rss

我目前正在构建一个与项目的 RSS/XML 提要相关的 Flash 应用程序。我现在被卡住了，因为我不断收到这个错误：

> 打开 URL 'http://distilleryimage6.instagram.com/.jpg' 时出错 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2036：加载从未完成。

我知道我的字符串 picURL 无法正常运行，但我是否遗漏了一些使其无法正常运行的内容？这是我的代码：

```
package  {

import flash.display.*;
import flash.events.*;
import flash.net.*;

public class instagramFeed extends MovieClip {
    //link to #rit xml loader
    public var ritFileRequest = new URLRequest("http://instagram.com/tags/rit/feed/recent.rss");
    public var ritXmlLoader = new URLLoader();

    //link to #rochester xml loader
    // same as above public variables

    public function instagramFeed() {
        // constructor code
        trace("About to load...");

        //Loads #rit hashtag xml data.
        ritXmlLoader.load(ritFileRequest);
        ritXmlLoader.addEventListener(Event.COMPLETE, displayRITInfo);
    }

    //focuses on data with #rit hashtag
    public function displayRITInfo(e:Event):void{
        var ritInstagramData:XML = new XML(ritXmlLoader.data);
        var ritInfoList:XMLList = ritInstagramData.elements().item;
        trace(ritInfoList);

        //load the image
        var ritPic:String = ritInfoList.*::condition.@code;
        var picURL:String = "http://distilleryimage6.instagram.com/" + ritPic + ".jpg";
        trace(picURL);

        //show the image on the stage!
        var ritImageRequest:URLRequest = new URLRequest(picURL);
        var ritImageLoader:Loader = new Loader();
        ritImageLoader.load(ritImageRequest);

        addChild(ritImageLoader);

        ritImageLoader.x=200;
        ritImageLoader.y=100;
        ritImageLoader.scaleX = 3;
        ritImageLoader.scaleY = 3;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:13:41.643

当您向不存在的 URL 发送请求时，会发生 IO 错误（至少在这种情况下）。如果你扔进`http://distilleryimage6.instagram.com/.jpg`浏览器，你会得到一个错误页面。这是你的问题。将您的加载程序定向到正确的 URL，您将不会收到 IO 错误

处理代码中的 IO 错误也很合适。

```
var ritImageLoader:Loader = new Loader();
ritImageLoader.addEventListener( IOErrorEvent.IO_ERROR, this.ioErrorHandler );
ritImageLoader.load(ritImageRequest);

private function ioErrorHandler( e:IOErrorEvent = null ):void {
    trace('An IO Error has occurred. You can use this function to display an error to the user or load a placeholder or whatever you wish');
} 
```

这将防止应用程序由于该特定错误而崩溃。错误仍然存​​在，请记住这一点。您确实需要处理该错误。如果您的应用程序不再发送，它就不会死在您身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:24:17.747

您的问题在于您对该 RSS 提要的 XML 解析。

我建议刷一下e4x。这是一个很好的资源：[http ://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4](http://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4)

我认为你的问题在于这一行：`ritInfoList.*::condition.@code`

尝试像这样修改这一行

```
var ritInfoList:XMLList = ritInstagramData..item;  //this will get all the item nodes 
```

然后这条线像这样：

```
var ritPic:String = ritInfoList[2]; //this grabs the value from the 3rd link node as a test 
```

该值是我注意到的完全限定 URL，因此您不需要下面的行，`var picURL:String = "http://distilleryimage6.instagram.com/" + ritPic + ".jpg";`因为`ritPic`它已经是完整的 URL。

# mysql - MySQL TimeDiff 排除周末

> ID：13312535
> 
> 赞同：1
> 
> 时间：2012-11-09T16:59:22.357
> 
> 标签：mysql

我一直在 MySQL 表上使用 TimeDiff 来获取两个字段之间的差异，两者都是 DateTime 格式。这是我正在使用的查询，它也将持续时间限制在今年。

```
SELECT username, CONCAT(
FLOOR(SUM(HOUR(TIMEDIFF(end_time, start_time)) / 24)), ' days ',
MOD(HOUR(TIMEDIFF(end_time, start_time)), 24), ' hours ',
MINUTE(TIMEDIFF(end_time, start_time)), ' minutes')
AS duration
FROM table
WHERE start_time > CONCAT(YEAR(CURDATE()) -1, '-12-31')
GROUP BY username 
```

我遇到的问题是我一直难以弄清楚如何从结果中排除周末。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T21:42:51.410

出于示例的目的，我们使用静态`@start`和`@end`日期，但实际上您可以将它们替换为您的列名，并且所有这些值都将按行重新计算。

```
SET @start  = '2012-09-30';
SET @end    = '2012-11-03';

SELECT
    @raw_days   := DATEDIFF(@end, @start)+1 'raw_days',
    @full_weeks := FLOOR(@raw_days / 7) 'full_weeks',
    @odd_days   := @raw_days - @full_weeks * 7 'odd_days',
    @wday_start := DAYOFWEEK(@start) 'wday_start',
    @wday_end   := DAYOFWEEK(@end) 'wday_end',
    @weekend_intrusion  := @wday_start + @odd_days 'weekend_intrusion',
    @extra_weekends     :=
        IF(@wday_start = 1, IF(@odd_days = 0, 0, 1),
            IF(@weekend_intrusion > 7, 2,
                IF(@weekend_intrusion > 6, 1, 0)
            )
        ) 'extra_weekends',
    @total_weekends     := @full_weeks * 2 + @extra_weekends 'total_weekends',
    @total_workdays     := @raw_days - @total_weekends 'total_workdays' 
```

这些`IF`陈述归结为：

如果一周从星期日开始，并且没有“奇数”日，则没有额外的周末日。如果有*奇数*天，则只能有 1 个周末，因为它不可能延长到星期六，因为那将是一个“完整”的一周。

否则，我们会查看一周的剩余部分是否延伸到星期日之后。如果是这样，请添加 2 个周末。否则，如果该部分去星期六，则添加 1 个周末。否则为 0。

输出：

```
+----------+------------+----------+------------+----------+-------------------+----------------+----------------+----------------+
| raw_days | full_weeks | odd_days | wday_start | wday_end | weekend_intrusion | extra_weekends | total_weekends | total_workdays |
+----------+------------+----------+------------+----------+-------------------+----------------+----------------+----------------+
|       34 |          4 |        6 |          1 |        6 |                 7 |              1 |              9 |             25 |
+----------+------------+----------+------------+----------+-------------------+----------------+----------------+----------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T10:22:01.203

这是我刚刚使用我的日期维度表开发的批量解决方案，它允许在周末开始和结束。

```
Select
    f.id, f.dtStart, f.dtEnd,
    sec_to_time(
    sum(
        case 
            -- don't count weekends
            when day_in_week in (6,7) 
                then 0
            -- start and end on same day
            when date(f.dtStart) = date(f.dtEnd) 
                then UNIX_TIMESTAMP(f.dtEnd) - UNIX_TIMESTAMP(f.dtStart)
            -- start period
            when date(f.dtStart) = dt.date_value
                then 24*60*60 - time_to_sec(time(f.dtStart))
            -- end period
            when date(f.dtEnd) = dt.date_value
                then time_to_sec(time(f.dtEnd))
            -- middle days
            else 24*60*60
        end
    )
    ) INT_timediff,
From fact f
join dim_date dt
    on dt.date_value between date(f.dtStart) and date(f.dtEnd)
group by f.id, f.dtStart, f.dtEnd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:10:35.047

这应该有效：

```
SELECT 
username, 
CONCAT(
    FLOOR(
        SUM(
            UNIX_TIMESTAMP(end_time) - UNIX_TIMESTAMP(start_time) - 86400 * (
                (FLOOR(DATEDIFF(end_time, start_time) / 7) * 2) +
                    IF(WEEKDAY(end_time) > 4, WEEKDAY(end_time) - 4, 0) +
                    IF(WEEKDAY(end_time) < WEEKDAY(start_time), 2, 0)
            )
        ) / 86400
    ),
    ' days ',
    TIME_FORMAT(
    SEC_TO_TIME(
        SUM(
            UNIX_TIMESTAMP(end_time) - UNIX_TIMESTAMP(start_time) - 86400 * (
                (FLOOR(DATEDIFF(end_time, start_time) / 7) * 2) +
                    IF(WEEKDAY(end_time) > 4, WEEKDAY(end_time) - 4, 0) + 
                    IF(WEEKDAY(end_time) < WEEKDAY(start_time), 2, 0)
            )
        ) % 86400
    ),
    '%H hours %i minutes'
    )
) AS duration
FROM table
WHERE start_time > CONCAT(YEAR(CURDATE()) -1, '-12-31')
GROUP BY username; 
```

但它假设`start_time`并且`end_time`永远不会在周末跌倒。

有关工作示例，请参阅[http://sqlfiddle.com/#!2/d41d8/3587 。](http://sqlfiddle.com/#!2/d41d8/3587)

如果您不关心额外的列，则此查询可以简化为：

```
SELECT
@diff := SUM(
    UNIX_TIMESTAMP(end_time) - UNIX_TIMESTAMP(start_time) - 86400 * (
        (FLOOR(DATEDIFF(end_time, start_time) / 7) * 2) +
            IF(WEEKDAY(end_time) > 4, WEEKDAY(end_time) - 4, 0) + 
            IF(WEEKDAY(end_time) < WEEKDAY(start_time), 2, 0)
    )
) AS duration_seconds,
CONCAT(
    FLOOR(@diff / 86400),
    ' days ',
    TIME_FORMAT(SEC_TO_TIME(@diff % 86400), '%H hours %i minutes')
) AS duration
FROM table
WHERE start_time > CONCAT(YEAR(CURDATE()) -1, '-12-31')
GROUP BY username; 
```

# c# - Fluent NHibernate 保存连接记录

> ID：13312536
> 
> 赞同：2
> 
> 时间：2012-11-09T16:59:22.753
> 
> 标签：c#, database, nhibernate, fluent

我在 SQL 中有 3 个表...如下所示

现在这映射到以下域对象

```
 public abstract class Case
    {
        public virtual DateTime Imported { get; set; }
        public virtual int Id { get; set; }

    }

    public class Meeting
    {
        public virtual int Id { get; set; }
        public virtual string Employee { get; set; }
        public virtual string LineManager { get; set; }
        public virtual Case Case { get; set; }

    }
    public class SCase : Case
    {
        public virtual int Id { get; set; }
        public virtual string reason { get; set; }
        public virtual IList<Meeting> Meeting { get; set; } 

    }

This works fine when I query it using the following fluent configuration

   public class PMap : ClassMap<Case>
    {
        public PMap()
        {

            Id(x => x.Id).GeneratedBy.Assigned();

        }
    }

    public class ParentMap : ClassMap<SCase>
    {
        public ParentMap()
        {

            Id(x => x.Id);
            Map(x => x.reason);
            //Map(x => x.Imported);
            Join("[Case]", m =>
                {
                    m.Fetch.Join();
                    m.KeyColumn("Id");
            });

        }
    } 
```

但我不明白为什么它不会保存！当然，如果它可以阅读并知道如何映射事物，那么它必须能够保存它？？

我收到以下错误：

> {"无法将值 NULL 插入到列 'CaseId'，表 'Scratchpad.dbo.SCase；列不允许空值。INSERT 失败。\r\n语句已终止。"}

为什么要插入`CaseID`？`SCase`当然，既然它是一个连接，它应该从??插入 Id

# c# - 我的 Class Factory 能否在 Unity 中使用更少的代码？

> ID：13312542
> 
> 赞同：0
> 
> 时间：2012-11-09T16:59:32.043
> 
> 标签：c#, .net, inversion-of-control, unity-container

我在我的代码中加入了这种模式来实例化业务对象：

```
// UI or Business level code
public class SomeClass
{
    IOrderFactory orderFactory;

    public SomeClass(IOrderFactory orderFactory)
    {
        this.orderFactory = orderFactory
    }

    public void SomeMethod()
    {
        var newOrder = orderFactory.CreateOrder();
        // Do stuff with new object        
    }
}

// In an interfaces only project
public interface IOrderFactory
{
    Order CreateOrder();
}

// In an implementation project (not seen by most other modules)
public class OrderFactory
{
    public Order CreateOrder()
    {
        return new Order();
    }
} 
```

我们目前使用 Unity 来创建`IOrderFactory`对象，但我想知道是否可以使用 Unity (IOC) 来生成`Order`对象本身。

类似的东西`unityContainer.Resolve<IOrder>()`，每次都制作一个新的吗？

那行得通吗？我们将统一用于我们的服务和功能（即 ViewModels、Helper）类。但我们从未使用它来创建业务对象（如 Customer 或 Order。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:11:12.750

在我看来，这一切都取决于构建给定对象（即 WizBang）的实例的复杂程度，以及它的更改频率。

如果 IWizBang 的实现总是 WizBang，或者如果创建 WizBang 实例只涉及调用默认构造函数，那么引入 IOC 容器就大材小用了……您可以轻松地制作工厂方法来为您生成方法。开发人员经常忘记配置复杂性会给刚接触项目的开发人员带来负担，甚至是那些不需要经常添加需要配置的新实体的开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:04:07.497

新答案

实际上，您将减少模板代码。域类与任何其他类没有什么不同。您可以注册从接口到具体类型的映射，而不是使用工厂类，并在需要时提供 ctor 参数。请参阅[http://msdn.microsoft.com/en-us/library/ff648211.aspx](http://msdn.microsoft.com/en-us/library/ff648211.aspx)

旧答案

通过任何容器解析对象总是比调用虚方法和调用构造函数慢。您不会从 DI 容器中受益的原始性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-11T08:30:43.523

我会保留 IOrderFactory。DI 容器在为您提供服务方面非常出色，但是当您需要一个实体（特定对象身份很重要的东西）时，使用容器通常会出现问题。

我会这样做有几个原因：

1.  创建实体往往需要该实体的数据（订单 ID、订单项等），每次创建时这些数据都不同。这对于容器来说变得困难和尴尬。
2.  为此，您需要将容器实例提供给您的业务逻辑。你真的不希望你的代码直接依赖于容器，除了组合根。根据我的经验，看到大量`IUnityContainer`依赖项是一个警告信号。

但是，您可以利用容器 - 将 IOrderFactory 作为依赖项，然后将工厂注入容器。然后，您可以将创建订单所需的任何服务注入工厂本身以保留。您也可以将容器注入工厂。

另一种选择是，如果您确实可以创建一个没有超出您配置的特殊参数值的订单，则可以注入一个 Func - 一个工厂函数。这将由容器在运行时生成，并在调用时回调到 container.Resolve。如果您发现需要更多参数或控制，也许您可​​以从那里开始构建 IOrderFactory？

# security - 为什么安全性属于 SOAP 标头而不是 SOAP 主体？

> ID：13312543
> 
> 赞同：0
> 
> 时间：2012-11-09T16:59:34.993
> 
> 标签：security, soap

我可以轻松地为我的所有消息创建一个基类，其中包含用户为每个请求设置的用户名和密码。用户还可以将其添加到 SOAP 标头中。这重要吗？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:11:37.277

通常，标头用于“带外”信息。与其说是关于当前消息的信息，不如说是关于您正在发送消息的*事实。*

如果安全信息不会从您发送的一封邮件更改为另一封邮件，则该信息不应位于单个邮件正文中，而应位于与*每个*邮件正文一起发送的标头中。

另一件事是，标头可用于在同一消息体可以发送到不同目的地时发生变化的信息，每个目的地可能对标头有自己的要求。

# c - 如何从文件中的行中读取字符数

> ID：13312545
> 
> 赞同：0
> 
> 时间：2012-11-09T16:59:46.573
> 
> 标签：c

嗨，我有这个程序，它从带有格式的字符的文件中读取

```
#00
000
000 
```

但是当我用 fgetc 读取行直到换行时，但是当我打印出字符数时，它们算作 4，但应该是 3（0-3）。为什么会这样？

```
#include <stdio.h>
#include <stdlib.h>

int
main(void)
{
    //int row, col; BEFORE.
    int row=0, col=0; //UPDATE
    /* check controls that read columns are the same size  */
    int check=0, i;
    FILE * file;
    char c;
    char **matrix;
    matrix = malloc(sizeof *matrix * 4);
    for (i = 0; i < 4; i++)
        matrix[i] = malloc(sizeof *matrix[i] * 4);
    file=fopen("map.map", "r");
    while ((c = fgetc(file)) != EOF)
    {
        matrix[row][col]=c;
        if (matrix[row][col]=='\n')
        {
            if(row==0)
               check=col;
            printf("%d\n", check);
            row++;
            if(check!=col)
               return -1;
            check=col;
            col=0;
        }
        else 
            col++;
     }
     fclose(file);
     printf("%d \n", check);
     return 0;
} 
```

### 更新

我已经调试了程序，发现使用字符读取文件的 fgetc

```
#00
000
000 
```

是在开始读取 '\0' 然后开始读取 '#00...' 所以要解决这个问题，必须从缓冲区中删除这个字符。然后就像评论的那样，col 的结尾是“/r”，后来是“/n”（在系统中：Mac OS X Lion 10.7.4），所以必须牢记这一点。

### 新版本

```
#include <stdio.h>
#include <stdlib.h>

int
main(void)
{
    int row=0, col=0;
    /* check controls that read columns are the same size  */
    int linelen=0, i;
    FILE * file;
    char c;
    char matrix[3][3];
    file=fopen("map.map", "r");
    /* have to read the first char because its a '\0' in the beginning */
    c=fgetc(file);
    if(c!=EOF)
    {
        while ((c=fgetc(file)) != EOF)
        {
            /* to jump over '\r' thats from old systems */
            if(c!='\r' || c!='\n')
            {
                matrix[row][col]=c;
                col++;
            }
            if(c=='\n')
            {
                /* first time definition of line length */
                if(row==0)
                    linelen=col;
                printf("%d\n", linelen);
                row++;
                if(linelen!=col)
                    return -1;
                col=0;
            }
        }
    }
    else
        printf("El archivo esta vacio\n");
    fclose(file);
    printf("%d\n", linelen);
    printf("%d, %d\n", row, col);
    return 0;
} 
```

当我调试这个程序时，它说我正在访问坏内存。

### 错误报告：

```
.....
.....
Breakpoint 1, main () at mapaprearmado.c:25
25          while ((c=fgetc(file)) != EOF)
(gdb) print c 
$25 = 13 '\r'
(gdb) print row
$26 = 1
(gdb) print col
$27 = 4
(gdb) step
.....
.....
(gdb) step
Cannot access memory at address 0x0
0x0000000100000714 in start () 
```

我没有得到什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:14:28.373

如果这是一个 windows 样式的文本文件，问题可能就像 \n 前面的 \r 一样简单

mac 使用 \r *nix 使用 \n 和 windows 使用 \r\n 尝试尽可能交叉兼容是一个历史性的事情。所以行尾实际上是两个字符。尝试改变：

```
if (matrix[row][col]=='\n') 
```

为了

```
if ((matrix[row][col]=='\r') || (matrix[row][col]=='\n')) 
```

这应该适用于所有平台 - 尽管您需要跳过换行符之后的任何 \r 或 \n ，并且如果需要检测多个换行符将需要一些思考......

# pre-increment - 预增量运算符

> ID：13312550
> 
> 赞同：1
> 
> 时间：2012-11-09T17:00:02.020
> 
> 标签：pre-increment

```
#include<iostream>
using namespace std;
int main()
{
    int i=2;
    cout<<++i<<" "<<++i;
    return 0;
} 
```

为什么程序的输出是 '4 4' 而不是 '3 4' ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:07:57.547

因为这两个增量都发生在输出行之前。实际写入屏幕会延迟到整行运行完毕，但到那时 i 的引用已经更新了它的值。

如果你把你的 cout 线分成两个离散的输出，事情会如你所料地评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:26:37.570

您对同一个变量（两个增量）有两个副作用，它们之间没有序列点。所以它们可能以任何顺序发生，甚至可能交错——行为是未定义的。您似乎在这里得到了交错的行为——表达式`++i`是增量我然后读取 i。所以你得到增量，增量，阅读，阅读。

# perl - 使用 n-gleton 模式表示（和导出）n 个独特的事物？

> ID：13312551
> 
> 赞同：2
> 
> 时间：2012-11-09T17:00:02.590
> 
> 标签：perl, singleton

在一组用于模拟国际象棋情况的类中，我想构建一个类来表示位置。但我只想创建（并导出）有效的 64 个位置，并在此之后将构造函数设为私有，以防止系统为同一位置创建多个对象。基本上是一个单件，但 1 = 64。一个 64 吨。有点儿。

**可能的用法**：

```
use Positions; # exports positions

my $pos = e4;

# something happens...
do_foo() if $pos == d5;
do_bar() if $pos->row == 8; 
```

我的解决方案按我想要的方式工作，但感觉有点不雅和过度设计。

**基础知识**：

```
package Position;
use Moo;

has column  => (is => 'ro');
has row     => (is => 'ro');
has name    => (is => 'lazy');

sub _build_name {
    my $self = shift;
    return $self->column . $self->row;
}

sub to_string { shift->name }

# ... 
```

没有对有效列或行的错误检查，`isa`因为我根本不希望类用户实例化位置对象。现在到出口：

```
# prepare 64 positions
my %position;
foreach my $col ('a' .. 'h') {
    foreach my $row (1 .. 8) {

        # build
        my $name    = "$col$row";
        my $pos     = Cherl::Position->new(column => $col, row => $row);

        # remember
        $position{$name} = $pos;
    }
}

# export
sub import {
    my $class   = shift;
    my $caller  = caller;

    # magic!
    no strict 'refs';
    for my $name (sort keys %position) {
        *{$caller . '::' . $name} = sub { $position{$name} };
    }
}

# make it private
sub BUILDARGS {
    my ($class, @args) = @_;
    die 'private' unless +(caller 1)[0] eq __PACKAGE__;
    return $class->SUPER::BUILDARGS(@args);
} 
```

**我能想到的替代方案**

如果两个位置的名称等于正确比较位置，则将为`column`s 和`row`s 添加错误检查并重载运算符以返回 true。`==`在这种情况下，我有点害怕为同一位置构建大量对象，但也许这是早期的优化。

所以问题是是否有更好的方法来设计这个类（使用[Moo](http://p3rl.org/Moo)）。蒂亚！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T20:00:00.990

我可能会有一个 Create() 方法（而不是 new X...），在 Create() 中有代码，所以它只会创建合法位置。如果您尝试在该位置再次调用 Create()，您甚至可以让它返回该位置的当前位置对象。

此外，如果您担心不小心直接创建位置对象，您甚至可以将实际位置类设为 Create()-ing 类的隐藏子类。

# angularjs - 如何创建服务实例？

> ID：13312553
> 
> 赞同：0
> 
> 时间：2012-11-09T17:00:10.453
> 
> 标签：angularjs

我有一个服务：

```
(angular
 .module('app.services', ['ngResource'])
 .factory('MyService', [
     /******/ '$resource',
     function ($resource) {
         return $resource('myurl');
     }
 ])
); 
```

我需要在我的代码中创建它的一个实例。我知道如果我将 angular 列为参数之一，它可以注入它，但我不是在问这个问题。我需要“手动”创建它的一个实例。它是如何完成的？

编辑：

这与我的另一个问题有关：[模板中的控制器及其依赖项](https://stackoverflow.com/questions/13259369/a-controller-and-its-dependencies-in-a-template)

基本上，我有一个将服务作为参数的通用控制器，我需要使用`$controller`对象手动创建这个控制器（以便能够在我的模板中使用它 - 请参阅引用的问题），我需要提供服务反对它。我的服务需要一个整数作为参数，所以我需要实例化服务并将这个整数设置为属性。否则，我当然会将服务的名称作为字符串提供给`$controller`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:29:17.193

看看[$injector](http://docs.angularjs.org/api/AUTO.%24injector)是否适合您的需求。

# javascript - 恢复调试器时防止 Chrome 调试器重新加载页面

> ID：13312554
> 
> 赞同：2
> 
> 时间：2012-11-09T17:00:10.957
> 
> 标签：javascript, asp.net, google-chrome

我的网页包含以下项目 -

*   母版页。更新面板。用户控件。jQuery 代码。

在调试时，当我继续（F5）时，Chrome 中的 JS 我希望页面能够加载并保持不变。但实际上页面重新加载。你如何防止这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:05:33.543

不要使用 F5，而是使用 F8 继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T17:06:05.837

取消停靠 Chrome 开发工具窗口，使其不嵌入网页中，然后始终确保开发工具窗口具有焦点，然后再按 F5。如果网页窗口具有焦点，F5 命令将被解释为刷新。

# java - EC2 上的 JGroups 节点不说话，尽管他们看到了对方

> ID：13312556
> 
> 赞同：6
> 
> 时间：2012-11-09T17:00:18.867
> 
> 标签：java, hibernate-search, infinispan, jgroups

我正在尝试使用 Hibernate Search，以便从 jgroupsSlave 节点对 Lucene 索引的所有写入都发送到 jgroupsMaster 节点，然后将 Lucene 索引与 Infinispan 共享回从站。一切都在本地工作，但是当节点在 EC2 上发现彼此时，它们似乎没有进行通信。

他们都在互相发送你还活着的消息。

```
# master output sample
86522 [LockBreakingService,localCache,archlinux-37498] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
86523 [LockBreakingService,LuceneIndexesLocking,archlinux-37498] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
87449 [Timer-4,luceneCluster,archlinux-37498] DEBUG org.jgroups.protocols.FD  - sending are-you-alive msg to archlinux-57950 (own address=archlinux-37498)
87522 [LockBreakingService,localCache,archlinux-37498] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
87523 [LockBreakingService,LuceneIndexesLocking,archlinux-37498] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0

# slave output sample
85499 [LockBreakingService,localCache,archlinux-57950] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
85503 [LockBreakingService,LuceneIndexesLocking,archlinux-57950] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
86190 [Timer-3,luceneCluster,archlinux-57950] DEBUG org.jgroups.protocols.FD  - sending are-you-alive msg to archlinux-37498 (own address=archlinux-57950)
86499 [LockBreakingService,localCache,archlinux-57950] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0
86503 [LockBreakingService,LuceneIndexesLocking,archlinux-57950] DEBUG org.infinispan.transaction.TransactionTable  - About to cleanup completed transaction. Initial size is 0 
```

**安全组**

我有两个 jar，一个用于 master，一个用于 slave，我在他们自己的 EC2 实例上运行。我可以从另一个实例 ping 每个实例，它们都在同一个安全组中，它为我组中任何机器之间的通信定义了以下规则。

ICMP 的所有端口 0-65535 用于 TCP 0-65535 用于 UDP

所以我认为这不是安全组配置问题。

**hibernate.properties**

```
# there is also a corresponding jgroupsSlave
hibernate.search.default.worker.backend=jgroupsMaster
hibernate.search.default.directory_provider = infinispan
hibernate.search.infinispan.configuration_resourcename=infinispan.xml
hibernate.search.default.data_cachename=localCache
hibernate.search.default.metadata_cachename=localCache 
```

**infinispan.xml**

```
<infinispan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="urn:infinispan:config:5.1 http://www.infinispan.org/schemas/infinispan-config-5.1.xsd"
            xmlns="urn:infinispan:config:5.1">
    <global>
        <transport clusterName="luceneCluster" transportClass="org.infinispan.remoting.transport.jgroups.JGroupsTransport">
            <properties>
                <property name="configurationFile" value="jgroups-ec2.xml" />
            </properties>
        </transport>
    </global>

    <default>
        <invocationBatching enabled="true" />
        <clustering mode="repl">

        </clustering>
    </default>

    <!-- this is just so that each machine doesn't have to store the index
         in memory -->
    <namedCache name="localCache">
        <loaders passivation="false" preload="true" shared="false">
            <loader class="org.infinispan.loaders.file.FileCacheStore" fetchPersistentState="true" ignoreModifications="false" purgeOnStartup="false">
                <properties>
                    <property name="location" value="/tmp/infinspan/master" />
                    <!-- there is a corresponding /tmp/infinispan/slave in
                    the slave config -->
                </properties>
            </loader>
        </loaders>
    </namedCache>
</infinispan> 
```

**jgroups-ec2.xml**

```
<config xmlns="urn:org:jgroups" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="urn:org:jgroups http://www.jgroups.org/schema/JGroups-3.2.xsd">
    <TCP
            bind_addr="${jgroups.tcp.address:127.0.0.1}"
            bind_port="${jgroups.tcp.port:7800}"
            loopback="true"
            port_range="30"
            recv_buf_size="20000000"
            send_buf_size="640000"
            max_bundle_size="64000"
            max_bundle_timeout="30"
            enable_bundling="true"
            use_send_queues="true"
            sock_conn_timeout="300"
            enable_diagnostics="false"

            bundler_type="old"

            thread_pool.enabled="true"
            thread_pool.min_threads="2"
            thread_pool.max_threads="30"
            thread_pool.keep_alive_time="60000"
            thread_pool.queue_enabled="false"
            thread_pool.queue_max_size="100"
            thread_pool.rejection_policy="Discard"

            oob_thread_pool.enabled="true"
            oob_thread_pool.min_threads="2"
            oob_thread_pool.max_threads="30"
            oob_thread_pool.keep_alive_time="60000"
            oob_thread_pool.queue_enabled="false"
            oob_thread_pool.queue_max_size="100"
            oob_thread_pool.rejection_policy="Discard"
            />
    <S3_PING secret_access_key="removed_for_stackoverflow" access_key="removed_for_stackoverflow" location="jgroups_ping" />

    <MERGE2 max_interval="30000"
            min_interval="10000"/>
    <FD_SOCK/>
    <FD timeout="3000" max_tries="3"/>
    <VERIFY_SUSPECT timeout="1500"/>
    <pbcast.NAKACK2
            use_mcast_xmit="false"
            xmit_interval="1000"
            xmit_table_num_rows="100"
            xmit_table_msgs_per_row="10000"
            xmit_table_max_compaction_time="10000"
            max_msg_batch_size="100"
            become_server_queue_size="0"/>
    <UNICAST2
            max_bytes="20M"
            xmit_table_num_rows="20"
            xmit_table_msgs_per_row="10000"
            xmit_table_max_compaction_time="10000"
            max_msg_batch_size="100"/>
    <RSVP />
    <pbcast.STABLE stability_delay="1000" desired_avg_gossip="50000"
                   max_bytes="400000"/>
    <pbcast.GMS print_local_addr="false" join_timeout="7000" view_bundling="true"/>
    <UFC max_credits="2000000" min_threshold="0.10"/>
    <MFC max_credits="2000000" min_threshold="0.10"/>
    <FRAG2 frag_size="60000"/>
</config> 
```

我直接从最新的 infinispan-core 发行版（5.2.0.Beta3，但我也尝试了我认为的 5.1.4）中复制了这个。我唯一改变的是将他们的 s3_ping 替换为我的，但我再次看到节点写入 s3，并且它们找到了彼此，所以我认为这不是问题。我也开始主/从，将 jgroups.tcp.address 的环境变量设置为他们的私有 IP 地址。我还尝试了一些大大简化的配置，但没有任何成功。

关于问题可能是什么的任何想法？我花了几天时间玩它，它让我发疯。我认为它必须与 jgroups 配置有关，因为它在本地工作并且无法在 EC2 上交谈。

你们还有其他信息想帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T10:47:18.940

您有两个 JGroups 通道正在启动，因此要指定两个 JGroups 配置：一个用于 Infinispan，一个用于后端工作人员通信。

Infinispan 和*jgroupsMaster*都将使用它们的默认配置设置，除非您指定一个，但默认使用在 EC2 上不起作用的多播。

看来您为 Infinispan 索引设置了正确的配置，但您必须重新配置*jgroupsMaster*工作程序才能使用 S3_PING 或 JDBC_PING；它可能在本地为您工作，因为默认配置能够使用多播自动发现对等点。

这种重复将由[HSEARCH-882](https://hibernate.onjira.com/browse/HSEARCH-882)解决，我期待它显着简化配置。

# php - 条件存在时如何按信息显示所有分组？

> ID：13312558
> 
> 赞同：1
> 
> 时间：2012-11-09T17:00:20.147
> 
> 标签：php, mysql, sql, group-by

我有一个页面显示上传到我的系统上的文件的“文件标签”。每个文件都可以有 0、1 或多个与之关联的文件标签。

我已经成功创建了一个显示文件名及其标签的页面，例如：

```
File     Tag(s)
File#1   None
File#2   TAG1
File#3   TAG1, TAG2 
```

此 SQL 查询将有助于生成上述数据：

```
SELECT *, GROUP_CONCAT(`ftg_name` ORDER BY `ftg_name` SEPARATOR ', ') 
  AS `x_file_tag_names` 
FROM `file` LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag` 
GROUP BY `fileftg_file` ORDER BY `file_created` DESC; 
```

**问题：**

我刚刚在页面顶部实现了过滤器。过滤器允许我在系统中的不同文件标签之间进行选择。当有人选择过滤器时，我会在 WHERE 子句中添加一个条件。看看这个查询：

```
 SELECT *, GROUP_CONCAT(`ftg_name` ORDER BY `ftg_name` SEPARATOR ', ') 
   AS `x_file_tag_names` FROM `file` 
 LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
 LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag` 
 WHERE `fileftg_filetag` = '1' 
 GROUP BY `fileftg_file` ORDER BY `file_created` DESC; 
```

这会在我的页面上产生这个结果：

```
File     Tag(s)
File#1   None
File#2   TAG1
File#3   TAG1 
```

The problem here is that I still want it to list `TAG1, TAG2` for `File#3`. But of course the WHERE condition is getting rid of the `TAG2`. I'm wondering if there is a solution that would involve only changing the SELECT condition. I was attempting to create a solution that looked something like:

```
SELECT *, IF(ISNULL(`filetag_file`), 'None', 
  (//a subquery that gets all file tags associated with file in outer query)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:53:50.953

One more ([SQL Fiddle](http://www.sqlfiddle.com/#!2/63afe/7/0)):

```
select file,
       group_concat(ftg_name order by ftg_name separator ', ') as tag_names
from file
left join link_file_filetag on fileftg_file = file_id
left join filetag on ftg_id = fileftg_filetag
where exists (select *
              from link_file_filetag 
              where fileftg_filetag = 1
                    and fileftg_file = file_id)
group by fileftg_file
order by file_created desc; 
```

Result:

```
FILE   TAG_NAMES  
File#2 TAG1  
File#3 TAG1, TAG2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:33:28.287

You could do this. This is assuming there is a field called "file" in the "file" table.

```
SELECT  *, 
        GROUP_CONCAT(`ftg_name` ORDER BY `ftg_name` SEPARATOR ', ') AS `x_file_tag_names` 

FROM    `file` 
        LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
        LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag` 

WHERE file.file_id in (SELECT file_id 
                       FROM   `file` 
                              LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
                              LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag` 
                       WHERE `fileftg_filetag` = '1') 
```

GROUP BY `fileftg_file` ORDER BY `file_created` DESC;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:48:43.643

This would allow you to do the group_concat as part of the select statement. I am guessing on which tables contain which fields since you did not use table prefixes in your joins.

```
SELECT  *, 
        (SELECT GROUP_CONCAT(`ftg_name` ORDER BY `ftg_name` SEPARATOR ', ') 
  AS `x_file_tag_names` 
         FROM `file` LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
                     LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag`
         WHERE file_id = f.file_id
         GROUP BY `fileftg_file` ORDER BY `file_created` DESC) AS tags

FROM    `file` f
        LEFT JOIN `link_file_filetag` lff ON lff.`fileftg_file` = f.`file_id` 
        LEFT JOIN `filetag` ON ft.`ftg_id` = lff.`fileftg_filetag` 

WHERE   `fileftg_filetag` = '1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T18:13:25.530

Sorry for all the answers, but after thinking about it, you might like this one best. This way, any group with the appropriate tag will appear. So no subquery would be needed.

```
 SELECT *, GROUP_CONCAT(`ftg_name` ORDER BY `ftg_name` SEPARATOR ', ') 
   AS `x_file_tag_names` FROM `file` 
 LEFT JOIN `link_file_filetag` ON `fileftg_file` = `file_id` 
 LEFT JOIN `filetag` ON `ftg_id` = `fileftg_filetag` 
 GROUP BY `fileftg_file` 
 HAVING  SUM(CASE WHEN `fileftg_filetag` = '1' THEN 1 ELSE 0 END) > 0
 ORDER BY `file_created` DESC; 
```

# if-statement - 对多个字符串使用 IF 语句 [Batch]

> ID：13312564
> 
> 赞同：0
> 
> 时间：2012-11-09T17:00:45.883
> 
> 标签：if-statement, batch-file

我正在编写软件来扫描预定的服务并在它们停止时启动它们。不幸的是，一些服务名称有空格，所以如果我这样做：

```
for %%a in (MSSQLSERVER,SQLSERVERAGENT,Cardinal SPD Delivery Package Service,AuthenticationServiceHost,CommunicationService,CqiProcessorService,IISADMIN,MobileAutmationAgentService,MSMQ) do ( 
```

发生的情况是，当我这样做时，它将 Cardinal SPD Delivery 包视为三个独立的服务而不是一个

```
net start "%%a" 
```

例如。我发现可行的替代方法是将服务放在文本文件中并执行

```
for /f %%a in (services.txt) do( 
```

但我更喜欢第一种方法，因为它更干净。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:34:21.853

要么双引号所有服务名称，而不是`%%a`在调用中引用：

```
for %%a in ("MSSQLSERVER","SQLSERVERAGENT","Cardinal SPD Delivery Package Service","AuthenticationServiceHost","CommunicationService","CqiProcessorService","IISADMIN","MobileAutmationAgentService","MSMQ") do (
net start %%a
) 
```

`%%a`或仅对多个单词进行双引号，并在调用时删除引号：

```
for %%a in (MSSQLSERVER,SQLSERVERAGENT,"Cardinal SPD Delivery Package Service",AuthenticationServiceHost,CommunicationService,CqiProcessorService,IISADMIN,MobileAutmationAgentService,MSMQ) do (
net start %%~a
) 
```

# git - 一个 Git 存储库，两个工作树

> ID：13312568
> 
> 赞同：6
> 
> 时间：2012-11-09T17:01:07.330
> 
> 标签：git, msysgit

是否可以在同一个本地存储库（== 共享 .git 目录）上有两个工作树（两个不同的分支）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:31:05.567

*在这里，替代品*可能有助于在多个 .git/- 目录之间共享一个对象存储。在以下位置检查“对象/信息/替代”：

[http://www.kernel.org/pub/software/scm/git/docs/gitrepository-layout.html](http://www.kernel.org/pub/software/scm/git/docs/gitrepository-layout.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T19:32:04.537

是的。但是您需要将第二个分支 workdir 放在第二个目录中，并手动管理交换。

请参阅[Git 手册页](http://www.kernel.org/pub/software/scm/git/docs/git.html)：

```
--work-tree=<path>
Set the path to the working tree. It can be an absolute path or a path relative
to the current working directory. This can also be controlled by setting the 
GIT_WORK_TREE environment variable and the core.worktree configuration variable 
(see core.worktree in git-config(1) for a more detailed discussion). 
```

这使您可以根据需要签出任意数量的工作树/目录，并根据您声称已经签出的任何分支以任何顺序将它们签入。

但是，如果您犯了一些错误，请不要感到惊讶。这有点像用剪刀跑步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:56:09.223

不，你必须制作两个克隆。

# php - 如何命名 jquery 为 php $_POST 生成的文本字段以获取变量

> ID：13312573
> 
> 赞同：0
> 
> 时间：2012-11-09T17:01:20.933
> 
> 标签：php, jquery, html

我有一个 jquery 表单微调器脚本，可以根据用户输入生成文本字段，并且工作正常。但我需要弄清楚如何命名这些字段，以便我可以使用 php $_POST 获取变量值。

请注意：根据用户输入的任何数字，每行会生成五个输入文本字段，这些字段是姓名、电话、电子邮件、性别和职位。以下是我喜欢给每个输入字段起的名字：

```
cand_name, cand_phone, cand_email, cand_sex, cand_pos 
```

请在下面的链接中找到 jquery 表单微调器脚本

[http://o2decor.com/form_scripts/jquery.fspin.js](http://o2decor.com/form_scripts/jquery.fspin.js)

下面是html的链接

```
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Form Spinner Test</title>
        <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="jquery.fspin.js"></script>
        <script type="text/javascript">
            $(function(){
                //you have to use the ID not the name of the fields we're interested in
                jQ_Form_Spinner('#container','#myrel',jQ_Form_Spinner_data);
            });
        </script>
    </head>

<body>

<form action="course_reg.php" method="post">
<p>
<label><strong>No of Candidates</strong></label>
<label><input type="text" id="myrel" name="cand_no" placeholder="Type Your Number of Candidates" /></label>
  <div class="clear"></div>
</p>

<div style="width:660px; float: left; border: 1px solid #ccc; padding:3px 3px;" id='container'>

</div>

</form> 
```

下面是查看运行 jscript 的表单页面的链接（它运行良好）

[http://o2decor.com/form_scripts/form.php](http://o2decor.com/form_scripts/form.php)

抱歉，我无法在此处粘贴 jquery 代码，stackoverflow 不会接受我的问题，因为我没有很好地格式化代码或其他什么...如果有人可以帮助解决这个问题，将不胜感激...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:40:06.420

您遇到的问题是您使用的 jQ_Form_Spinner 插件很烂:)

查看它为每个表单元素创建的 name 和 id 属性：

```
<input type="text" name="textfield_0" id="textfield_0" placeholder="Enter your full name" style="margin-right: 12px;" class=""> 
```

该配置甚至不允许您将这些名称更改为其他任何名称。基于此，您将很难让它发挥作用。

您需要修改插件，以便该`jQ_Form_Spinner_getField`函数为每个表单元素创建合理的名称和 id 属性。

我的建议是摆脱 jQ_Form_Spinner 插件。你不需要它。手动编写 Javascript/jQuery 代码时，您尝试做的事情（动态创建表单）是微不足道的。如果您只是学习编码，那么这将是一个很好的开始。

试一试，如果你遇到困难，再问一些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:02:45.953

看看这个**[演示](http://jsfiddle.net/4BEe7/)**。

下面的 JavaScript ( **form.php** ) 在使用以下命名约定提交表单时重命名字段：`candidate[X][Y]`— 其中**X**是行号，**Y**是字段名称。

因此，例如，第一行中的**电话**字段将被命名`candidate[0][phone]`，第二行中的**电子邮件**字段将被命名`candidate[1][email]`。

```
<script>
$(function(){
    var fields = ['name', 'phone', 'email', 'sex', 'pos'];
    $('form').on('submit', function(e){
        $('#container tbody tr').each(function(i){
            $(this).find('td').each(function(j){
                var field = fields[j];
                $(this).find(':input').attr('name', 'candidate[' + i + '][' + field + ']');
            });
        });
    });
});
</script> 
```

您在 PHP 端 ( **course_reg.php** ) 得到的是一个单一变量 ( `$_POST['candidate']`)，它以多维数组的形式包含结构化格式的所有数据。

```
array(2) {
  [0]=>
  array(5) {
    ["name"]=>
    string(8) "Jane Doe"
    ["phone"]=>
    string(12) "123-555-4567"
    ["email"]=>
    string(18) "jane.doe@email.add"
    ["sex"]=>
    string(6) "female"
    ["pos"]=>
    string(3) "CEO"
  }
  [1]=>
  array(5) {
    ["name"]=>
    string(8) "John Doe"
    ["phone"]=>
    string(12) "234-555-6789"
    ["email"]=>
    string(18) "john.doe@email.add"
    ["sex"]=>
    string(4) "male"
    ["pos"]=>
    string(3) "CTO"
  }
} 
```

使用上述数据填充的表单是什么样的：http: [//i.imgur.com/6yxbe.gif](http://i.imgur.com/6yxbe.gif)

您可以使用下面的 PHP 读入这些数据。（注意：这只是一个演示。我将把安全问题留给你。）

```
<?php

$candidates = array();

foreach ($_POST['candidate'] as $i => $can)
{
    $candidates[$i] = array();

    foreach ($can as $key => $value)
    {
        $candidates[$i][$key] = $value;
    }
}

echo '<pre>';
var_dump($candidates); 
```

当然，`var_dump($candidates)`将产生与 完全相同的输出`var_dump($_POST['candidate'])`，因为我们保持相同的结构。

您希望如何构建数据取决于您。

*更新：*

我创建了这个包含**form.php**和**course_reg.php**的 ZIP 存档：**[[下载]](https://www.dropbox.com/s/0wz6ngmwuhtz3jd/so1.zip)**

1.  将这两个文件上传到您的服务器。
2.  通过您的网络浏览器访问**form.php 。**
3.  填充表单。
4.  点击“提交”按钮。
5.  **course_reg.php**现在应该显示填充的数据。

让我知道事情的后续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:08:08.293

因此，您遇到的问题是您拥有动态数量的电话号码，例如，您想在帖子中捕获所有电话号码。但问题是它们都具有相同的名称。

```
name="phone_number"; 
```

所以你可以将它作为一个数组传递

```
name="phone_number[]" 
```

然后在 php 提交页面中循环遍历它。

我对么？

# clojure - Clojure 中映射和集合之间的行为不一致

> ID：13312580
> 
> 赞同：3
> 
> 时间：2012-11-09T17:01:38.007
> 
> 标签：clojure

Steve Losh[发布](https://twitter.com/stevelosh/status/266769468783460352) [了以下 Clojure 片段](https://gist.github.com/4043824)：

```
; Integers and Longs are equal.
(= (Integer. 1) (Long. 1))
true

; Even negative ones.
(= (Integer. -1) (Long. -1))
true

; When you use them as keys in maps, the maps are still equal.
(= {(Integer. 1) :foo} {(Long. 1) :foo})
true

(= {(Integer. -1) :foo} {(Long. -1) :foo})
true

; When you use positive numbers as keys to sets, they're also equal.
(= #{(Integer. 1)} #{(Long. 1)})
true

; But negative ones aren't. But only in sets. Maps are fine. lol.
(= #{(Integer. -1)} #{(Long. -1)})
false 
```

这种行为的原因是什么？它被认为是缺陷还是存在“形式逻辑”/集合论的原因，为什么`(Integer. -1)`不等于`(Long. -1)`持久集合？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T17:06:18.300

这是 Clojure 中的一个错误：http: [//dev.clojure.org/jira/browse/CLJ-1106](http://dev.clojure.org/jira/browse/CLJ-1106)

*满足堆栈溢出的愚蠢字符限制的文本在这里*

# javascript - Node.js 阻塞性质

> ID：13312582
> 
> 赞同：2
> 
> 时间：2012-11-09T17:01:40.683
> 
> 标签：javascript, node.js, google-chrome, v8

这是我之前的问题[Node.js Non Blocking Nature](https://stackoverflow.com/questions/12688868/node-js-non-blocking-nature). 我仍然无法完全理解 Node.js 发生了什么。假设 Node 收到了来自用户的大文件上传请求。现在我们说我们将处理文件的代码放在回调中，从而使其异步。接下来发生什么 ？假设回调被放入 Node.js 应用程序需要处理的大量事件列表中，到目前为止它还没有阻塞。但是在某些时候，回调会从事件循环中拉出，并且它的代码开始运行（上传或下载文件，无论如何）。现在怎么办 ？Node.js 应用程序现在被阻止了吗？如果是 - 它如何不破坏应用程序的性能，如果不是 - 谁负责“跳跃” 在不同的事件和请求之间？我们知道，在 apache 或类似服务器中，有特殊的代码来处理所有线程（对它们进行计时），因此没有线程阻塞所有其他线程。然而，据我所知，在 Node 中，有一个事件循环。当文件 I\O 完成时，它的回调会神奇地返回准备好的文件。尽管如此，服务器仍然需要做 I\O，不能逃避！事件循环中的代码是否定时？例如在不同的事件（回调..whatever）之间跳转，以便没有请求阻塞另一个？如果有，以什么方式？事件循环中的代码是否定时？例如在不同的事件（回调..whatever）之间跳转，以便没有请求阻塞另一个？如果有，以什么方式？事件循环中的代码是否定时？例如在不同的事件（回调..whatever）之间跳转，以便没有请求阻塞另一个？如果有，以什么方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:24:43.487

所有的 I/O 都由 node.js 使用多个线程在内部处理；它是单线程、基于事件和异步的 I/O 功能的编程接口。

因此，您的示例的大上传由 node.js 管理的单独线程执行，当该线程完成其工作时，您的回调将被放入事件队列（由单个 JavaScript 线程执行）。

将单个 JavaScript 线程视为从队列头部拉出回调并串行执行它们，直到队列为空。然后它会休眠，直到其中一个内部 I/O 线程在队列中放置一个新的回调。

[本文](http://howtonode.org/understanding-process-next-tick)讨论了`process.nextTick`帮助我理解其中一些细节的相关主题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:12:43.860

尽管 node.js 通常被描述为“非阻塞”，但真正的意思是它不会***在 i/o 上***阻塞。如果它必须做一些处理器密集型的事情，当然，其他事情必须等待。但如果它只是等待从文件系统或网络返回数据，node 不会阻塞你的进程。

在文件上传缓慢的情况下，它正在处理，定期它必须做一些事情，因为数据进来（可能调用你的回调，但可能只是存储该数据直到它有足够的调用你的回调）。但是计算机速度很快，无论发生什么，无论出于何种意图和目的，都是瞬时的。我们担心的是网络操作相对较慢的事实。在像 Php 这样的语言中，通常，在此操作完成之前，您的函数不会返回，并且在该脚本中您无能为力，直到发生这种情况。同时，CPU 可能处于空闲状态……只是等待数据通过网络进入。另一方面，在调用回调之前，Node 让您将 CPU 用于其他事情。

正如其他人所指出的那样，引擎盖下可能存在线程。或者可能没有，因为节点可以使用非阻塞 C++ 函数在内部实现文件和网络操作。没关系。重要的是 i/o 操作不会阻止您的应用程序中发生其他事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T08:56:23.560

我认为这个主题足够复杂（至少对于新手来说）值得彻底阅读，并且无法通过阅读 5 行答案来理解。这是我找到的最佳资源[http://www.theserverside.com/discussions/thread.tss?thread_id=61693](http://www.theserverside.com/discussions/thread.tss?thread_id=61693) 。他对 Node.js 的评价并不高，但他确实花了很多功夫来解释它。在我看来值得一读。

# sql - 如何在一天内按用户计算标签

> ID：13312585
> 
> 赞同：1
> 
> 时间：2012-11-09T17:01:43.923
> 
> 标签：sql, postgresql

我有一个跟踪用户创建的标签的表。我相信这个问题的重要列是 user_id（谁制作了标签）和 created_at。

通过一些搜索，我发现了如何使用 date_trunc 将 created_at 变成一天，以便我们可以按此分组。

但是，我只能得到这个给我一天的总标签数。我想要做的是按用户和日期分组，这样我就可以看到每个用户每天创建的标签数量，并通过一些排序找出用户在一天中创建的标签数量最多是多少。

我正在使用 postgres 9.1.6。

有什么帮助吗？提前致谢。

编辑：我开始的主要是在黑暗中拍摄，是：

```
select user_id,
       date_trunc('day', created_at) as "Day",
       count(*) as "numtags"
  from tags
  group by user_id, created_at
  order by numtags desc; 
```

结果是：

```
 user_id |         Day         | numtags 
---------+---------------------+---------
      1  | 2012-01-08 00:00:00 |    5719
      1  | 2012-01-31 00:00:00 |    3239
      1  | 2011-12-01 00:00:00 |    1868
      1  | 2011-12-01 00:00:00 |    1772
      1  | 2011-12-01 00:00:00 |    1756 
```

很明显，分组没有按预期工作，用户 ID 都是相同的（我已经手动确认它们不应该是）。

我想看到类似的东西（上面的数字不匹配，只是一个例子）：

```
 user_id |         Day         | numtags 
---------+---------------------+---------
      1  | 2012-01-08 00:00:00 |    100
      4  | 2012-01-31 00:00:00 |    90
      1  | 2011-12-12 00:00:00 |    80
      2  | 2011-12-12 00:00:00 |    77
      2  | 2011-12-13 00:00:00 |    76 
```

即同一个用户会出现很多次，相同的日期会出现很多次——事实上，只要用户在一天中至少创建了一个标签，每个 user_id/Day 组合都会显示（每个一次），并且 numtags 会显示如何那天该用户制作了许多标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:37:42.047

正如我所建议的：

```
select user_id,
   created_at::date as "Day",
   count(*) as "numtags"
from tags
group by user_id, created_at::date
order by numtags desc; 
```

created_at::date 将时间戳转换为日期类型。

您的错误是按 createdate 分组，它是具有不同时间部分的时间戳，但结果您截断了时间戳。

# python - 带有破折号的文件名的代码分析不完整

> ID：13312588
> 
> 赞同：3
> 
> 时间：2012-11-09T17:01:53.293
> 
> 标签：python, eclipse, pydev

我有一段时间遇到这个问题，终于明白是什么原因造成的，这是一个很好的解脱。所以基本上，名称中带有破折号（'-'）的 python 文件不会被 PyDev 完全分析。我只得到错误但没有警告......（即：未使用的变量，未使用的导入等......）

这是一个功能吗？一个已知的错误？有什么解决办法吗？我知道 python 文件夹不允许使用破折号，但这适用于 python 文件吗？（在我的情况下，这些是 python 脚本，为方便起见，没有 .py 扩展名）。

例如，在我的 bin 项目子文件夹中：

*   提交或发布脚本文件被分析 A-OK
*   add-input, select-files: 不报告警告。

感谢您对此的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:15:23.820

Python 不允许在标识符中使用破折号。模块名称必须是有效的标识符，因此任何带有破折号的模块文件或包目录名称都是不可导入的。

另一方面，脚本文件（由 Python 直接执行的 Python 文件，不是导入的）则没有这样的限制。我想说你遇到的是 PyDev 中的一个错误，你应该报告它。

# java - Java 小程序无法从带有自签名证书的 IIS SSL 站点加载到 Mac Lion 上的浏览 器中

> ID：13312590
> 
> 赞同：0
> 
> 时间：2012-11-09T17:02:09.073
> 
> 标签：java, macos, ssl, applet, self-signed

我们的 Web 应用程序中有一个小程序，它没有在我们的开发/测试站点中运行，但在我们的生产站点中运行良好。只有当我们从 Mac Lion 上的浏览​​器访问该站点时才会出现问题 - 从 MSWin 客户端运行的任何浏览器（IE、FF、Safari、Opera）都没有问题。

dev 和 prod 站点之间的区别在于，生产站点具有购买的 SSL 站点证书，而开发站点具有自签名证书。如果我们不使用 ssl，小程序也可以在开发站点上正常工作。

该应用程序由 IIS 7 提供服务。启用了 Java 插件（否则我们将无法在开发盒上使用 http 或在生产盒上使用 ssl 运行小程序）。

小程序 jar 本身使用购买的证书进行签名。网页使用 JavaScript 与小程序交互。

html 页面包含以下小程序代码：

```
 <object name="Previewer"
            class="java-applet" 
            classid="java:com.[omitted].template.TemplateViewer.class" 
            type="application/x-java-applet"
            archive="../Template/tv/TemplateViewer.jar" 
            height="425" width="270">
        <param name="MAYSCRIPT" value="true" />
        <param name="scriptable" value="true" />
        <param name="archive" value="../Template/tv/TemplateViewer.jar" />
        <!-- following parameters are used by the applet itself -->
        <param name="TEMPLATE" value="[url omitted]" />
        <param name="VERSION" value="1.7" />
        <param name="AREA" value="AreaName" />
        <param name="CUSTOMIZABLE" value="Y" />
        <param name="BACKGROUND" value="[url omitted]" />
        <param name="SHOWDROPDOWN" value="false" />
    </object> 
```

Java 控制台提供了堆栈跟踪（在问题末尾列出）。

我看到小程序类加载器抛出了 ClassNotFound 异常，这似乎是由带有“签名算法不匹配”的 CertificateException 引起的。

经过几个小时的谷歌，我一无所获，我在这里检查了所有“可能已经有你答案的问题”和“类似问题”，没有任何启发。

我所能猜测的是，这个问题是由使用自签名证书访问站点引起的，类似于某些移动设备对服务由 SSL 提供的媒体的敏感度。

现在的问题：

1.  是什么导致了这个问题？

2.  我们能做些什么来解决它？

* * *

这是包含堆栈跟踪的控制台日志：

```
 Java Plug-in 1.6.0_26
    Using JRE version 1.6.0_26-b03-383-11A511c Java HotSpot(TM) 64-Bit Server VM User home directory = /Users/[omitted]

    ----------------------------------------------------
    c:   clear console window
    f:   finalize objects on finalization queue
    g:   garbage collect
    h:   display this help message
    l:   dump classloader list
    m:   print memory usage
    o:   trigger logging
    q:   hide console
    r:   reload policy configuration
    s:   dump system and deployment properties
    t:   dump thread list
    v:   dump thread stack
    x:   clear classloader cache
    0-5: set trace level to <n>
    ----------------------------------------------------

    security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.
    security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws
    security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws
    security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws,com.sun.deploy
    security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws,com.sun.deploy
    security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    security: property package.definition value null
    security: property package.definition new value com.sun.javaws
    security: property package.definition value com.sun.javaws
    security: property package.definition new value com.sun.javaws,com.sun.deploy
    security: property package.definition value com.sun.javaws,com.sun.deploy
    security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp
    security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
    security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,apple.,com.apple.mrj.,com.apple.jdirect.,com.apple.audio.jdirect.,quicktime.internal.,com.sun.medialib.mlib.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
    security: property package.definition value com.sun.javaws,com.sun.deploy,com.sun.jnlp
    security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
    basic: Added progress listener: sun.plugin.util.GrayBoxPainter$GrayBoxProgressListener@2de12f6d
    basic: Plugin2ClassLoader.addURL parent called for https://[URL omitted]/Template/tv/TemplateViewer.jar
    network: Cache entry not found [url: https://[URL omitted]/Template/tv/TemplateViewer.jar, version: null]
    network: Connecting https://[URL omitted]/Template/tv/TemplateViewer.jar with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    javax.net.ssl.SSLProtocolException: Signature algorithm mismatch
            at com.sun.net.ssl.internal.ssl.HandshakeMessage$CertificateMsg.<init>(HandshakeMessage.java:412)
            at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
            at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
            at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1149)
            at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
            at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
            at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
            at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
            at sun.plugin.PluginURLJarFileCallBack.downloadJAR(PluginURLJarFileCallBack.java:81)
            at sun.plugin.PluginURLJarFileCallBack.access$000(PluginURLJarFileCallBack.java:48)
            at sun.plugin.PluginURLJarFileCallBack$2.run(PluginURLJarFileCallBack.java:150)
            at java.security.AccessController.doPrivileged(Native Method)
            at sun.plugin.PluginURLJarFileCallBack.retrieve(PluginURLJarFileCallBack.java:127)
            at sun.net.www.protocol.jar.URLJarFile.retrieve(URLJarFile.java:186)
            at sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:50)
            at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:70)
            at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:104)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(CachedJarURLConnection.java:201)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(CachedJarURLConnection.java:145)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(CachedJarURLConnection.java:91)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(DeployURLClassPath.java:752)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$800(DeployURLClassPath.java:631)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(DeployURLClassPath.java:698)
            at java.security.AccessController.doPrivileged(Native Method)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(DeployURLClassPath.java:690)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(DeployURLClassPath.java:652)
            at com.sun.deploy.security.DeployURLClassPath$3.run(DeployURLClassPath.java:400)
            at java.security.AccessController.doPrivileged(Native Method)
            at com.sun.deploy.security.DeployURLClassPath.getLoader(DeployURLClassPath.java:389)
            at com.sun.deploy.security.DeployURLClassPath.getLoader(DeployURLClassPath.java:366)
            at com.sun.deploy.security.DeployURLClassPath.getResource(DeployURLClassPath.java:230)
            at sun.plugin2.applet.Plugin2ClassLoader$2.run(Plugin2ClassLoader.java:966)
            at java.security.AccessController.doPrivileged(Native Method)
            at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Plugin2ClassLoader.java:955)
            at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:134)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:250)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:180)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:240)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:180)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:161)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
            at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:675)
            at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3046)
            at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1498)
            at java.lang.Thread.run(Thread.java:680)
    Caused by: java.security.cert.CertificateException: Signature algorithm mismatch
            at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1737)
            at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:179)
            at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:90)
            at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:305)
            at com.sun.net.ssl.internal.ssl.HandshakeMessage$CertificateMsg.<init>(HandshakeMessage.java:410)
            ... 48 more
    network: Cache entry not found [url: https://[URL omitted]/Template/tv/TemplateViewer.jar, version: null]
    network: Connecting https://[URL omitted]/Template/tv/TemplateViewer.jar with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    network: Cache entry not found [url: https://[URL omitted]/Template/tv/TemplateViewer.jar, version: null]
    network: Connecting https://[URL omitted]/Template/tv/TemplateViewer.jar with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    javax.net.ssl.SSLProtocolException: Signature algorithm mismatch
            at com.sun.net.ssl.internal.ssl.HandshakeMessage$CertificateMsg.<init>(HandshakeMessage.java:412)
            at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
            at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
            at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:893)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1138)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1165)
            at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1149)
            at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
            at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
            at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1172)
            at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:234)
            at sun.plugin.PluginURLJarFileCallBack.downloadJAR(PluginURLJarFileCallBack.java:81)
            at sun.plugin.PluginURLJarFileCallBack.access$000(PluginURLJarFileCallBack.java:48)
            at sun.plugin.PluginURLJarFileCallBack$2.run(PluginURLJarFileCallBack.java:150)
            at java.security.AccessController.doPrivileged(Native Method)
            at sun.plugin.PluginURLJarFileCallBack.retrieve(PluginURLJarFileCallBack.java:127)
            at sun.net.www.protocol.jar.URLJarFile.retrieve(URLJarFile.java:186)
            at sun.net.www.protocol.jar.URLJarFile.getJarFile(URLJarFile.java:50)
            at sun.net.www.protocol.jar.JarFileFactory.get(JarFileFactory.java:70)
            at sun.net.www.protocol.jar.JarURLConnection.connect(JarURLConnection.java:104)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.connect(CachedJarURLConnection.java:201)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFileInternal(CachedJarURLConnection.java:145)
            at sun.plugin.net.protocol.jar.CachedJarURLConnection.getJarFile(CachedJarURLConnection.java:91)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.getJarFile(DeployURLClassPath.java:752)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.access$800(DeployURLClassPath.java:631)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader$1.run(DeployURLClassPath.java:698)
            at java.security.AccessController.doPrivileged(Native Method)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.ensureOpen(DeployURLClassPath.java:690)
            at com.sun.deploy.security.DeployURLClassPath$JarLoader.<init>(DeployURLClassPath.java:652)
            at com.sun.deploy.security.DeployURLClassPath$3.run(DeployURLClassPath.java:400)
            at java.security.AccessController.doPrivileged(Native Method)
            at com.sun.deploy.security.DeployURLClassPath.getLoader(DeployURLClassPath.java:389)
            at com.sun.deploy.security.DeployURLClassPath.getLoader(DeployURLClassPath.java:366)
            at com.sun.deploy.security.DeployURLClassPath.getResource(DeployURLClassPath.java:230)
            at sun.plugin2.applet.Plugin2ClassLoader$2.run(Plugin2ClassLoader.java:966)
            at java.security.AccessController.doPrivileged(Native Method)
            at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Plugin2ClassLoader.java:955)
            at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:134)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:250)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:180)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:161)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
            at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:675)
            at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3046)
            at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1498)
            at java.lang.Thread.run(Thread.java:680)
    Caused by: java.security.cert.CertificateException: Signature algorithm mismatch
            at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1737)
            at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:179)
            at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:90)
            at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:305)
            at com.sun.net.ssl.internal.ssl.HandshakeMessage$CertificateMsg.<init>(HandshakeMessage.java:410)
            ... 46 more
    network: Cache entry not found [url: https://[URL omitted]/Template/tv/TemplateViewer.jar, version: null]
    network: Connecting https://[URL omitted]/Template/tv/TemplateViewer.jar with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    network: Cache entry not found [url: https://[URL omitted]/Orders/, version: null]
    network: Cache entry not found [url: https://[URL omitted]/Orders/com/[omitted]/template/TemplateViewer.class, version: null]
    network: Connecting https://[URL omitted]/Orders/com/[omitted]/template/TemplateViewer.class with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    network: Cache entry not found [url: https://[URL omitted]/Orders/com/[omitted]/template/TemplateViewer/class.class, version: null]
    network: Connecting https://[URL omitted]/Orders/com/[omitted]/template/TemplateViewer/class.class with proxy=DIRECT
    network: Connecting http://[URL omitted]:443/ with proxy=DIRECT
    basic: load: class com.[omitted].template.TemplateViewer.class not found.
    Java Plug-in 1.6.0_26
    Using JRE version 1.6.0_26-b03-383-11A511c Java HotSpot(TM) 64-Bit Server VM User home directory = /Users/[omitted] load: class com.[omitted].template.TemplateViewer.class not found.
    java.lang.ClassNotFoundException: com.[omitted].template.TemplateViewer.class
            at sun.plugin2.applet.Applet2ClassLoader.findClass(Applet2ClassLoader.java:252)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Plugin2ClassLoader.java:250)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:180)
            at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Plugin2ClassLoader.java:161)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
            at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Plugin2ClassLoader.java:687)
            at sun.plugin2.applet.Plugin2Manager.createApplet(Plugin2Manager.java:3046)
            at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1498)
            at java.lang.Thread.run(Thread.java:680)
    Exception: java.lang.ClassNotFoundException: com.[omitted].template.TemplateViewer.class
    Ignored exception: java.lang.ClassNotFoundException: com.[omitted].template.TemplateViewer.class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:21:16.243

我们无法确定到底是什么导致了问题，但我们已经从 Verisign 获得了 30 天的证书并安装了它，并且小程序使用该“官方”证书可以正常运行。因此，我们正在为 DEV 和 UAT 盒子获取证书。

# c - 内核无法处理 NULL 指针取消引用 - 使用带有结构的 kmem_cache_alloc

> ID：13312591
> 
> 赞同：5
> 
> 时间：2012-11-09T17:02:14.373
> 
> 标签：c, linux-device-driver

我正在尝试编写一个简单的 char 驱动程序，以尝试更多地了解 Linux 中的驱动程序。

驱动程序的想法是有一个链表，在每个节点中将包含一个字符和一个指向下一个节点的指针。我打算使用 kmem_cache 来构建这个链表，因为我认为根据需要一次为单个节点分配一个对象会很简单。

这是我遇到问题的相关代码。这并不漂亮，因为我只是想让这件事发挥作用。

```
struct kmem_cache *memCache;

typedef struct {
    char data;
    struct node* next;
} node;

node *head = NULL;

static ssize_t hello_write(struct file *file, const char *buf, size_t count, loff_t *ppos)
{
    int i;
    accesscount++;

    for(i = 0; i < count; i++)
    {
        node *finder;
        node *temp;

        finder = head;

        if(finder == NULL)
        {
            finder = kmem_cache_alloc(memCache, GFP_KERNEL);
            //memset(finder, 0, sizeof(node)); 

            if(!finder)
                return -ENOMEM;

            finder->next = NULL;

            //!!!NULL DEREFERENCE HERE!!!
            copy_from_user(finder->data, buf+i, 1);

            head = finder;
        }
        else
        {
            while(finder->next != NULL)
                finder = finder->next;

            temp = kmem_cache_alloc(memCache, GFP_KERNEL);
            //memset(temp, 0, sizeof(node)); 

            if(!temp)
                return -ENOMEM;

            temp->next = NULL;

            copy_from_user(temp->data, buf+i, 1);

            finder->next = temp;
        }

        charsStored++;  
    }

    return count;
}

static int __init hello_init(void)
{
    memCache = kmem_cache_create("hello1", sizeof(node), 0, 0, NULL);
} 
```

正如您从我的评论中看到的那样，当我调用 copy_from_user() 并在节点中传递 char 变量时，我得到一个空取消引用。我想既然我为节点分配了内存，它不应该再为空了。我也尝试将 char 设置为 char* 并得到不同的结果，但它仍然无法正常工作。

我知道我的问题在于我如何分配内存或构建指针的方式，但我真的被困在这里。我希望有人知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:18:32.447

将 finder->data 的地址而不是它的值传递给 copy_from_user，我想你会准备好的。

# html - 固定 div 可滚动的布局？

> ID：13312592
> 
> 赞同：0
> 
> 时间：2012-11-09T17:02:16.187
> 
> 标签：html, css, fixed, scrollable

如果浏览器尺寸太小，我试图让 3 个水平固定位置静态宽度 div 元素可滚动。现在，如果浏览器大小缩小到小于这 3 个 div 的总宽度，则水平或垂直都不会滚动。

*注意*左右窗格不应该移动，垂直滚动时只有中间窗格应该滚动。

图片示例：

![在此处输入图像描述](../Images/fdb51a148e173278d9e46ef0a611a875.png)

这是我的左、中、右窗格的 CSS，按顺序排列：

```
#webcto_menu {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 150px;
    background-image:url(../images/webcto_120.png);
    background-repeat: no-repeat;
    background-position: top left;
    padding-top: 67px;
}
#page_contents {
    position: absolute;
    top: 0px;
    left: 160px;
    width: 450px;
}
#webcto_pane {
    position: fixed;
    top: 40px;
    left: 615px;
    width: 510px;
    height: 100%;
    border: 1px solid #A6C9E2;
    overflow: auto;
    background-color: #ffffff;
    background-image:url('../images/sp_bg_lrg.jpg');
    background-repeat: no-repeat;
    background-position: center center;
} 
```

我还有一个围绕这些 div 的容器：

```
#page_container {
    min-width:1100px;
} 
```

这是我的 HTML DIV：

```
<div id="page_container">
    <div id="webcto_menu"></div>
    <div id="page_contents"></div>
    <div id="webcto_pane"></div>
    <div id="webcto_pane_menu"></div>
</div> 
```

任何人都可以帮助保持当前设计启用滚动？我尝试添加溢出：滚动；到 page_container 但只会在固定元素不移动时向左/向右滚动中心窗格（我认为这是固定元素应该工作的正确方式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:18:24.460

我不确定你为什么使用固定位置 div。但最简单的解决方案是将每个 div 的内容放入 iframe 中。这样，无论样式表中定义的宽度/高度如何，您都可以确定框架内容的固有尺寸。它仍然会尊重定义的样式，但溢出默认是自动的。

**HTML：**

```
<div id="container">
  <iframe id="one" src="http://www.ltg.ed.ac.uk/~richard/unicode-sample.html"></iframe>
  <iframe id="two" src="http://www.ltg.ed.ac.uk/~richard/unicode-sample.html"></iframe>
  <iframe id="three"src="http://www.ltg.ed.ac.uk/~richard/unicode-sample.html"></iframe>
</div> 
```

**CSS**

```
#container{
    width: 1000px;
    margin: 0 auto;
    }
        #one{
        width: 328px;
        height: 1000px;
        float: left;
        }
        #two{
        width: 328px;
        height: 1000px;
        float: left;    
        }
        #three{
        width: 328px;
        height: 1000px;
        float: left;    
        } 
```

为了使每个框架浮动以使其适合内联，您必须考虑滚动条所需的 5px（因浏览器而异）。1000/3 = 333 - 5 = 328

# mysql - 创建 MYSQL 视图时遇到问题

> ID：13312597
> 
> 赞同：1
> 
> 时间：2012-11-09T17:02:29.137
> 
> 标签：mysql, view

首先，我使用的 MYSQL 版本是`5.1.66-community-log`.

既然我们已经解决了这个问题，我在尝试创建以下视图时检索到以下错误：

> **您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“所有选择 RRA.id、RRA.reply_id 作为回复 ID、RRA.user_id、RRA.vote_up、RRA.rank”附近使用正确的语法**

和观点：

```
$sql = "Create or replace view userRank as 
select PRA.id, PRA.post_id as postID, PRA.user_id, PRA.vote_up, PRA.rank_date 
from post_rank_activity PRA
union all 
select RRA.id, RRA.reply_id as replyID, RRA.user_id, RRA.vote_up, RRA.rank_date 
from reply_rank_activity RRA"; 
```

我检查了一些网站，这似乎是正确的语法 - 或者随着时间的推移发生了变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:15:26.423

括号可能会有所帮助，请尝试：

```
Create or replace view userRank as 
(select PRA.id, PRA.post_id as postID, PRA.user_id, PRA.vote_up, PRA.rank_date 
from post_rank_activity PRA)
union all 
(select RRA.id, RRA.reply_id as replyID, RRA.user_id, RRA.vote_up, RRA.rank_date 
from reply_rank_activity RRA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:08:35.190

据此，您的*一切*[都不](http://forums.mysql.com/read.php?100,32218,32353)需要，请尝试：

 *```
Create or replace view userRank as select PRA.id, PRA.post_id as postID, PRA.user_id, PRA.vote_up, PRA.rank_date from post_rank_activity PRA union select RRA.id, RRA.reply_id as replyID, RRA.user_id, RRA.vote_up, RRA.rank_date from reply_rank_activity RRA; 
```

它应该可以工作——未经测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:09:28.173

Union 所有部分中的所有列的名称和类型必须相似

这两个是不同的

*   **PRA.post_id 作为 postID**

*   **RRA.reply_id 作为replyID**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:14:35.727

这似乎是一个甚至在 MySQL 站点上提出的错误

[http://bugs.mysql.com/bug.php?id=22044](http://bugs.mysql.com/bug.php?id=22044)*

# asp.net-mvc - 在 VS 2012 中创建 MVC4 项目时出现 NuGet 错误

> ID：13312602
> 
> 赞同：56
> 
> 时间：2012-11-09T17:03:00.810
> 
> 标签：asp.net-mvc, asp.net-mvc-4, visual-studio-2012, nuget

我尝试在 VisualStudio 2012 Ultimate 中创建一个 MVC4 空项目，但出现此错误：

> “错误：此模板试图加载组件程序集‘NuGet.VisualStudio.Interop，版本=1.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a’。”。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-11-13T07:29:59.233

我相信您没有安装 NuGet 包管理器扩展。

如果没有，您可以单击**TOOLS** -> **Extensions and Updates...** -> **Online**，选择**NuGet Package Manager**，然后单击**Download**：

![在此处输入图像描述](../Images/5c110fb362aa1f9cf16df502b5550a0a.png)

下载后，系统将提示您进行管理提升，然后重新启动 Visual Studio。

**测试于：** Visual Studio Ultimate 2012（版本 11.0.60610.01 更新 3）

**更新**：我刚刚在 Visual Studio 2012 中遇到了这个问题。所以尽管这里有一些评论，但它不一定默认安装。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-01T22:32:53.823

i) 打开 Visual Studio > 工具 > 扩展和更新 > 选择“NuGet 包管理器”并卸载它。（如果未安装，请转到第 2 步）

ii) 打开这个 url ' [http://nuget.org](http://nuget.org) '，你会看到一个 'Install NuGet' 链接，下载它（NuGet.Tools.vsix）并将它安装到你的 Visual Studio 上。

iii）关闭并重新打开 Visual Studio，我相信你再也不会像我一样看到那个错误对话框了 ;-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-21T09:14:06.043

同样的问题。

```
"Error: this template attempted to load component assembly 
'NuGet.VisualStudio.Interop .... "
when creating a new Web Role project in VS 2012. 
```

选择：

*   工具
*   扩展和更新
*   在线的
*   选择 NuGet 包管理器
*   点击下载
*   我可以看到 NuGet 已经安装
*   我删除了它
*   再次安装它
*   重启VS

解决。

感谢您提供以上信息 + 1\. Scott

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T07:48:06.347

您可能想要搜索并检查 dll 是否存在于 \Microsoft Visual Studio 11.0\Common7\IDE\Extensions\ 下（它将位于具有其他 nuget 二进制文件的扩展名下的文件夹中）。如果它不存在，您可以尝试卸载并重新安装 nuget。卸载：工具-> 扩展和更新-> 已安装（在左侧窗格中）-> nuget 包管理器要安装：工具-> 扩展和更新-> 在线->visualstudio 库-> nuget 包管理器

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-04T21:18:12.683

打开 Visual Studio 并转到工具 -> 打开扩展管理器或扩展和更新 -> 卸载 Nuget 包管理器 -> 然后从在线图库中再次下载 Nuget 管理器，然后重新启动 Visual Studio，您将不会看到错误消息。

# xml - 用于匹配文档中除特定元素中的文本节点之外的所有文本节点的 Xpath

> ID：13312603
> 
> 赞同：5
> 
> 时间：2012-11-09T17:03:00.920
> 
> 标签：xml, xslt, xpath

尝试在 XSLT 中构建模板以匹配特定的 Xpath 案例。

在这个示例 XML 文档中，我想匹配整个文档中的所有文本，除了 in `<x>`：

```
<root>
 <tag1> I want this text </tag1>
 <tag2> I want this text </tag2>
 <x> I don't want to match on this text </x>
 <tag3> I want this text </tag3>
</root> 
```

关于这个 Xpath 的任何想法？我正在尝试为其构建一个模板，以针对这种特定情况转换我的文档。

我想出的一些东西是这样的，但它不起作用：

```
<xsl:template match="text()[not(matches(.,x))]"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:06:44.943

当你写 . 它采用文本节点的字符串值，而不是父节点的节点名。并且匹配需要一个字符串参数

你可以把它写成：

```
<xsl:template match="text()[not(matches(name(..),'x'))]"> 
```

或更好：

```
<xsl:template match="text()[not(parent::x)]"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T02:39:20.627

**好多了——没有任何反向轴：**

```
<xsl:template match="*[not(self::x)]/text()"> 
```

# api - 如何检查任何项目中任务的任何细节是否被修改？

> ID：13312604
> 
> 赞同：0
> 
> 时间：2012-11-09T17:03:00.570
> 
> 标签：api, asana

我已经为“项目 A”获取了一些任务，并假设任务的“任务说明”或“受让人”已更改。如果有任何更改，我如何检查我的下一个请求？

我是否必须获取所有任务并检查它们的“modified_at”并将其与一些本地值进行比较？还是有一个简单的方法？（因为如果我这样做，我将必须获取所有任务，然后为每个任务发送请求以获取它的 modified_at，所以如果我的项目有 100 个任务，我需要 100 个请求？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:27:28.507

我正在处理同样的问题。没有一种很好的方法来处理获取自特定时间戳以来已修改的任务，但 Asana 的 api 表示将来会存在过滤选项。

但是有一个更好的解决方案：

```
https://app.asana.com/api/1.0/projects/PROJECT_ID/tasks?opt_fields=modified_at 
```

这将为您提供该项目的所有任务及其 modified_at 时间戳。您仍然需要请求已更改的各个任务。字段列表可以是逗号分隔的列表。

# asp.net - 如何将 ASP.NET MVC 控制器操作的结果添加到 Bundle？

> ID：13312617
> 
> 赞同：11
> 
> 时间：2012-11-09T17:03:56.030
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我有一个返回 Javascript 文件的控制器操作。我可以从我的视图中引用这个文件，它工作正常。我想把它和其他 JS 文件放在一个 System.Web.Optimization.Bundle 中。

我正在尝试这样做，基本上：

```
new Bundle().Include("~/DynamicScript/UrlDictionary"); 
```

我的 Bundle 中的其他文件渲染得很好，但是这个被忽略了。看到这种行为，我的假设是捆绑在应用程序能够通过路由基础设施解析 URL 之前得到处理，或者捆绑组件可能不会以允许该解析发生的方式请求文件。

如果有人可以为我确认和/或在这里为我指明一个好的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T07:47:30.147

我认为这是非常可行的——但在我进入我的解决方案之前——请记住，捆绑是在第一次点击时创建并被重用——这意味着任何“动态”脚本仍然必须是全局的（即它不能依赖于特定用户等）。这就是为什么它通常只允许静态 js 文件。这么说...我可以想象这样一种情况，您可能想在您的 js 中粘贴版本号之类的变量（尽管在这种情况下，我个人只会使用 Ajax/JSON 来获取它）。

我认为解决方法是从[Bundle](http://msdn.microsoft.com/en-us/library/system.web.optimization.bundle.aspx)创建派生类型。在其中，您将覆盖 EnumerateFiles 方法。最初，您将枚举 base.EnumerateFiles，然后包含您自己的虚拟文件。

类似的东西（注意：未经测试的代码）：

```
public class VirtualMethodBundle : Bundle
{
    private List<VirtualFile> _virtualContent = new List<VirtualFile>();

    public override IEnumerable<VirtualFile> EnumerateFiles(BundleContext context)
    {
        foreach(var file in base.EnumerateFiles(context))
        {
            yield return file;
        }

        foreach(var virtual in _virtualContent)
        {
            yield return virtual;
        }
    }

    public void AddCustomFile(VirtualFile file)
    {
        _virtualContent.Add(method);
    }
} 
```

然后你会有一个特殊的[VirtualFile](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualfile.aspx)定义类型，它覆盖 Open/Name 方法并在那里返回你的动态内容......类似的东西。

```
public class MethodBasedVirtualFile : VirtualFile
{
    private readonly Func<string> _contentFactory;
    private readonly string _path;

    public MethodBasedVirtualFile(string path, Func<string> contentFactory)
    {
        _path = path;
        _contentFactory = contentFactory;
    }

    public override string Name { get { return _path; } }

    public override Stream Open()
    {
        MemoryStream stream = new MemoryStream();
        StreamWriter writer = new StreamWriter(stream);
        writer.Write(_contentFactory());
        writer.Flush();
        stream.Position = 0;
        return stream;
    }
} 
```

那么使用它你将拥有的一切......

```
var bundle = new VirtualMethodBundle();
bundle.Include(... real files ...);
bundle.AddCustomFile(
    new MethodBasedVirtualFile("~/DynamicScript/UrlDictionary",
    ... the method that creates the content of that script...)
); 
```

如果你很聪明，你可以制作一个 UrlVirtualFile，它采用 url 路径并在需要时使用 MVC 自动获取内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T00:52:30.330

这是我为这种情况所做的。我定义了一个“Bundle Result”，然后在我的 Controller 方法中，按名称返回了一个 Bundle。我使用 ETags (If-None-Match Header) 作为客户端缓存的优化。

例如：

```
public ActionResult ReturnFooBundle()
{
    return new BundleResult("foo", TimeSpan.FromDays(7));
} 
```

这是 BundleResult 实现：

```
public class BundleResult
    : ActionResult
{
    private class BundleInfo
    {
        public string BundleETag;
        public DateTime LastModified;
        public Bundle TheBundle;
        public BundleResponse Response;
    }

    private static Dictionary<string, BundleInfo> _bundleCache = new Dictionary<string, BundleInfo>();

    public string BundleName { get; private set; }
    public TimeSpan CacheExpiry { get; private set; }

    public BundleResult(string bundleName, TimeSpan cacheExpiry)
    {
        BundleName = bundleName;
        CacheExpiry = cacheExpiry;
    }
    public override void ExecuteResult(ControllerContext context)
    {
        context.HttpContext.Response.Clear();
        BundleInfo bundleInfo = GetBundle(context.HttpContext);

        string requestETag = context.HttpContext.Request.Headers["If-None-Match"];
        if (!string.IsNullOrEmpty(requestETag) && (requestETag == bundleInfo.BundleETag))
        {
            context.HttpContext.Response.StatusCode = (int)HttpStatusCode.NotModified;
            context.HttpContext.Response.StatusDescription = "Not Modified";
            return;
        }
        else
        {
            BundleResponse bundleResponse = bundleInfo.Response;
            HttpResponseBase response = context.HttpContext.Response;
            response.Write(bundleResponse.Content);
            response.ContentType = bundleResponse.ContentType;

            HttpCachePolicyBase cache = response.Cache;
            cache.SetCacheability(HttpCacheability.ServerAndPrivate);
            cache.SetLastModified(bundleInfo.LastModified);
            cache.SetETag(bundleInfo.BundleETag);
        }
    }

    private BundleInfo GetBundle(HttpContextBase context)
    {
        // lookup the BundleResponse
        BundleInfo retVal;
        lock (_bundleCache)
        {
            _bundleCache.TryGetValue(BundleName, out retVal);
        }
        if(retVal != null)
        {
#if DEBUG
            // see if the contents have been modified.
            BundleContext bundleContext = new BundleContext(context, BundleTable.Bundles, BundleName);
            DateTime lastModified = retVal.TheBundle.EnumerateFiles(bundleContext).Select(fi => fi.LastWriteTimeUtc).Max();
            if (lastModified > retVal.LastModified)
            {
                // regenerate the bundleInfo
                retVal = null;
            }
#endif
        }
        if (retVal == null)
        {
            string rawBundleName = BundleTable.Bundles.ResolveBundleUrl(BundleName);
            string hash = rawBundleName.Substring(rawBundleName.IndexOf("?v=") + 3);
            Bundle bundle = BundleTable.Bundles.GetBundleFor(BundleName);
            BundleContext bundleContext = new BundleContext(context, BundleTable.Bundles, BundleName);
            BundleResponse bundleResponse = bundle.GenerateBundleResponse(bundleContext);
            DateTime lastModified = bundle.EnumerateFiles(bundleContext).Select(fi => fi.LastWriteTimeUtc).Max();
            retVal = new BundleInfo
            {
                BundleETag = hash,
                Response = bundleResponse,
                TheBundle = bundle,
                LastModified = lastModified,
            };
            lock (_bundleCache)
            {
                _bundleCache[BundleName] = retVal;
            }
        }
        return retVal;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T07:35:13.877

捆绑系统只支持物理文件，不支持应用路由。

# java - 需要可以更新的属性文件的位置

> ID：13312622
> 
> 赞同：0
> 
> 时间：2012-11-09T17:04:15.903
> 
> 标签：java, jakarta-ee, tomcat

在我的 Java EE Web 应用程序中，我需要一个地方来放置我的属性文件，我可以使用 getResource() 找到它，然后更新该文件。

将它放在 lib 目录中似乎不适用于 tomcat。建议？

应用是 GXT 需要有一个属性文件来保存国际化的字符串。我需要从数据库表中加载这些字符串。所以我必须在启动时创建属性文件。我正在创建一个空文件，该文件将放入 lib 目录中的 jar 文件中。然后我找到那个文件并用新的答案写入它。这一切都适用于码头，但不适用于tomcat。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:12:26.373

您不一定能可靠地写入类路径位置，因为它可能不代表本地磁盘文件系统路径。您只能写入（绝对）磁盘文件系统位置。

最好的办法是拥有一个已知的固定磁盘文件系统位置，该位置又添加到类路径中，这样您就可以同时使用`ClassLoader#getResource()`从类路径加载它并将`FileOutputStream`其写入本地磁盘文件系统。

在 Tomcat 的情况下，您可以`shared.loader`通过`/conf/catalina.properties`. 例如

```
shared.loader = /var/webapp/conf 
```

将表示固定磁盘文件系统位置的属性添加到属性文件本身也可能很有用。

```
my.location = /var/webapp/conf 
```

这样你就可以把它读成

```
Properties properties = new Properties();
properties.load(Thread.currentThread().getContextClassLoader().getResourceAsStream("foo.properties"); 
```

并另存为

```
properties.store(new FileOutputStream(new File(properties.getProperty("my.location"), "foo.properties"))); 
```

### 也可以看看：

*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:16:38.217

```
 //read properties    
    Properties prop = new Properties();
    ClassLoader loader = Thread.currentThread().getContextClassLoader();            
    InputStream stream = loader.getResourceAsStream("sample.properties");
    prop.load(stream);      
    //now save back, take as URL 
    java.net.URL f = loader.getResource("sample.properties");   
    File file = new File(f.getPath());
    OutputStream outstream = new FileOutputStream(file);
    prop.store(outstream, "");
    outstream.close(); 
```

但我会建议使用[http://commons.apache.org/configuration/howto_properties.html](http://commons.apache.org/configuration/howto_properties.html)，因为不同的功能包括在 store() 之后保持文件“用户可读”

# magento - 从magento的购物车中删除产品

> ID：13312624
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:04:16.807
> 
> 标签：magento

我对magento很陌生，有一个简单的问题......

在我的 cart.phtml 中，我有以下代码：

```
<div class="cart">
    <div class="page-title">
        <h1><?php echo $this->__('Shopping Cart') ?></h1>        
    </div>
    <?php if(!$this->hasError()): ?>
    <ul class="checkout-types">
    <?php foreach ($this->getMethods('top_methods') as $method): ?>
        <?php if ($methodHtml = $this->getMethodHtml($method)): ?>
        <li><?php echo $methodHtml; ?></li>
        <?php endif; ?>
    <?php endforeach; ?>
    </ul>
    <?php endif; ?>
    <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
    <?php echo $this->getChildHtml('form_before') ?>
    <form action="<?php echo $this->getUrl('checkout/cart/updatePost') ?>" method="post">
        <fieldset>
            <table id="shopping-cart-table" class="data-table cart-table">

            <?php $mergedCells = ($this->helper('tax')->displayCartBothPrices() ? 2 : 1); ?>
                <thead>
                    <tr>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>">&nbsp;</th>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>"><span class="nobr"><?php echo $this->__('Product Name') ?></span></th>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>"></th>                        
                        <th class="a-center" colspan="<?php echo $mergedCells; ?>"><span class="nobr"><?php echo $this->__('Unit Price') ?></span></th>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"><?php echo $this->__('Qty') ?></th>
                        <th class="a-center" colspan="<?php echo $mergedCells; ?>"><?php echo $this->__('Subtotal') ?></th>
                        <?php if ($this->helper('wishlist')->isAllowInCart()) : ?>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"><span class="nobr"><?php echo $this->__('Move to Wishlist') ?></span></th>
                        <?php endif ?>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"><?php echo $this->__('Remove product') ?></th>
                    </tr>
                    <?php if ($this->helper('tax')->displayCartBothPrices()): ?>
                    <tr>
                        <th class="a-right"><?php echo $this->helper('tax')->getIncExcTaxLabel(false) ?></th>
                        <th><?php echo $this->helper('tax')->getIncExcTaxLabel(true) ?></th>
                        <th class="a-right"><?php echo $this->helper('tax')->getIncExcTaxLabel(false) ?></th>
                        <th><?php echo $this->helper('tax')->getIncExcTaxLabel(true) ?></th>
                    </tr>
                    <?php endif; ?>
                </thead>
                <tbody>
                <?php foreach($this->getItems() as $_item): ?>
                    <tr>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>">&nbsp;</th>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>"><span class="nobr"><?php echo $_item->getName()?></span></th>
                        <th class="a-center" rowspan="<?php echo $mergedCells; ?>"></th>                        
                        <th class="a-center" colspan="<?php echo $mergedCells; ?>"><span class="nobr"><?php echo $_item->getPrice() ?></span></th>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"><?php echo $_item->getQty() ?></th>
                        <th class="a-center" colspan="<?php echo $mergedCells; ?>"><?php echo $_item->getPrice() * $_item->getQty() ?></th>
                        <?php if ($this->helper('wishlist')->isAllowInCart()) : ?>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"><span class="nobr"><?php echo $this->__('Move to Wishlist') ?></span></th>
                        <?php endif ?>
                        <th rowspan="<?php echo $mergedCells; ?>" class="a-center"> <button type="button" class="button btn-cart" onclick="setLocation('<?php echo $this->getDeleteUrl(); ?>')"><span><span><?php echo $this->__('Remove from Cart') ?></span></span></button>
                </th>
                    </tr>

                <?php endforeach ?>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="50" class="a-right">
                            <?php if($this->getContinueShoppingUrl()): ?>
                                <button type="button" title="<?php echo $this->__('Continue Shopping') ?>" class="button btn-continue left" onclick="setLocation('<?php echo $this->getContinueShoppingUrl() ?>')"><span><span><?php echo $this->__('Continue Shopping') ?></span></span></button>
                            <?php endif; ?>
                            <button type="submit" name="update_cart_action" value="update_qty" title="<?php echo $this->__('Update Shopping Cart'); ?>" class="button btn-update"><span><span><?php echo $this->__('Update Shopping Cart'); ?></span></span></button>
                            <button type="submit" name="update_cart_action" value="empty_cart" title="<?php echo $this->__('Clear Shopping Cart'); ?>" class="button btn-empty" id="empty_cart_button"><span><span><?php echo $this->__('Clear Shopping Cart'); ?></span></span></button>
                            <!--[if lt IE 8]>
                            <input type="hidden" id="update_cart_action_container" />
                            <script type="text/javascript">
                            //<![CDATA[
                                Event.observe(window, 'load', function()
                                {
                                    // Internet Explorer (lt 8) does not support value attribute in button elements
                                    $emptyCartButton = $('empty_cart_button');
                                    $cartActionContainer = $('update_cart_action_container');
                                    if ($emptyCartButton && $cartActionContainer) {
                                        Event.observe($emptyCartButton, 'click', function()
                                        {
                                            $emptyCartButton.setAttribute('name', 'update_cart_action_temp');
                                            $cartActionContainer.setAttribute('name', 'update_cart_action');
                                            $cartActionContainer.setValue('empty_cart');
                                        });
                                    }

                                });
                            //]]>
                            </script>
                            <![endif]-->
                        </td>
                    </tr>
                </tfoot>

            </table>
            <script type="text/javascript">decorateTable('shopping-cart-table')</script>
        </fieldset>
    </form>
    <div class="cart-collaterals">
        <div class="col2-set">
            <div class="col-1">
                <?php echo $this->getChildHtml('crosssell') ?>
            </div>
            <div class="col-2">
                <?php /* Extensions placeholder */ ?>
                <?php echo $this->getChildHtml('checkout.cart.extra') ?>
                <?php echo $this->getChildHtml('coupon') ?>
                <?php if (!$this->getIsVirtual()): echo $this->getChildHtml('shipping'); endif; ?>
            </div>
        </div>
        <div class="totals">
            <?php echo $this->getChildHtml('totals'); ?>
            <?php if(!$this->hasError()): ?>
            <ul class="checkout-types">
            <?php foreach ($this->getMethods('methods') as $method): ?>
                <?php if ($methodHtml = $this->getMethodHtml($method)): ?>
                <li><?php echo $methodHtml; ?></li>
                <?php endif; ?>
            <?php endforeach; ?>
            </ul>
            <?php endif; ?>
        </div>
    </div>
</div> 
```

如何从购物车中移除商品？有人可以告诉我是否有预定义的方法以及如何实现它以使其工作？：

```
 <th rowspan="<?php echo $mergedCells; ?>" class="a-center"> <button type="button" class="button btn-cart" onclick="setLocation('<?php echo $this->getDeleteUrl(); ?>')"><span><span><?php echo $this->__('Remove from Cart') ?></span></span></button></th> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:34:49.627

您不应使用此模板显示项目。你应该使用

```
<?php foreach($this->getItems() as $_item): ?>
    <?php echo $this->getItemHtml($_item) ?>
<?php endforeach ?> 
```

请参阅 /app/design/frontend/default/contempospace/template/checkout/cart/item/default.phtml （如果您添加具有属性的产品，并希望将它们显示在您的购物车中，那么您将来可能需要更改此设置）

**但如果你想这样做，那么改变**

```
 <?php echo $this->getDeleteUrl(); ?> 
```

到

```
 <?php echo $this->getUrl('checkout/cart/delete', array('id' => $_item->getId())) 
```

例如。

```
<th rowspan="<?php echo $mergedCells; ?>" class="a-center"> <button type="button" class="button btn-cart" onclick="setLocation('<?php echo $this->getUrl('checkout/cart/delete', array('id' => 'xxxx')) ?>)"><span><span><?php echo $this->__('Remove from Cart') ?></span></span></button></th> 
```

有关更好的解释，请参阅[如何在 Magento 中获取 url 以从购物车中删除产品？](https://stackoverflow.com/questions/7868665/how-to-get-url-to-remove-product-from-cart-in-magento)

# matrix-multiplication - 将两个矩阵相乘的缓存友好方法

> ID：13312625
> 
> 赞同：8
> 
> 时间：2012-11-09T17:04:20.547
> 
> 标签：matrix-multiplication, cachegrind

我打算使用缓存友好的方法将 2 个矩阵相乘（这将导致更少的未命中）

我发现这可以通过缓存友好的转置功能来完成。

但我找不到这个算法。我可以知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T17:56:34.530

你要找的词是**thrashing**。在 Google 中搜索抖动矩阵乘法会[产生更多结果](http://penguin.ewu.edu/~trolfe/MatMult/MatOpt.html)。

c = a*b 的标准乘法算法看起来像

```
void multiply(double[,] a, double[,] b, double[,] c)
{
    for (int i = 0; i < n; i++)
        for (int j = 0; j < n; j++)
            for (int k = 0; k < n; k++)
                C[i, j] += a[i, k] * b[k, j]; 
} 
```

基本上，以大步快速导航内存对性能不利。B[ **k , j] 中****k**的访问模式正是这样做的。因此，我们可以重新排列操作，以便最内部的循环仅在矩阵的第二个访问索引上操作，而不是在内存中跳转：

 **```
void multiply(double[,] a, double[,] B, double[,] c)
{  
   for (i = 0; i < n; i++)
   {  
      double t = a[i, 0];
      for (int j = 0; j < n; j++)
         c[i, j] = t * b[0, j];

      for (int k = 1; k < n; k++)
      {
         double s = 0;
         for (int j = 0; j < n; j++ )
            s += a[i, k] * b[k, j];
         c[i, j] = s;
      }
   }
} 
```

这是该页面上给出的示例。但是，另一种选择是预先将 B[k, *] 的内容复制到一个数组中，并在内部循环计算中使用该数组。这种方法通常比其他方法**快得多**，即使它涉及复制数据。即使这看起来违反直觉，也请随意尝试。

```
void multiply(double[,] a, double[,] b, double[,] c)
{
    double[] Bcolj = new double[n];
    for (int j = 0; j < n; j++)
    {
        for (int k = 0; k < n; k++)
            Bcolj[k] = b[k, j];

        for (int i = 0; i < n; i++)
        {
            double s = 0;
            for (int k = 0; k < n; k++)
                s += a[i,k] * Bcolj[k];
            c[j, i] = s;
        }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T23:41:09.983

@Cesar 的回答不正确。例如，内循环

```
for (int k = 0; k < n; k++)
   s += a[i,k] * Bcolj[k]; 
```

遍历 a 的第 i 列。

以下代码应确保我们始终逐行访问数据。

```
void multiply(const double (&a)[I][K], 
              const double (&b)[K][J], 
              double (&c)[I][J]) 
{
    for (int j=0; j<J; ++j) {
       // iterates the j-th row of c
       for (int i=0; i<I; ++i) {
         c[i][j] = 0;
       } 

       // iterates the j-th row of b
       for (int k=0; k<K; ++k) {
          double t = b[k][j];
          // iterates the j-th row of c
          // iterates the k-th row of a
          for (int i=0; i<I; ++i) {
            c[i][j] += a[i][k] * t;
          } 
       }
    }
} 
```**

# sql-server - 在 sql 查询中组合 2 个计算列

> ID：13312626
> 
> 赞同：1
> 
> 时间：2012-11-09T17:04:23.813
> 
> 标签：sql-server, tsql

第 1 列：

```
( CASE
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'General' THEN 'G'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Honors' THEN 'H'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'WhosWho' THEN 'Y'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Catholic' THEN 'J'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Conservative' THEN 'B'
           ELSE 'H'
         END )                        AS Edition 
```

第 2 栏：

```
(SELECT edition
        FROM   clients.dbo.service
        WHERE  serv_id = hdr.serv_id) AS editiontext,
       ( CASE
           WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
           ELSE ( CASE
                    WHEN si.itmclass = 'Distrib' THEN '-Disc'
                    WHEN si.itmclass = 'PremIR' THEN '0' + '-Disc'
                    WHEN si.itmclass = 'InstResp' THEN '5' + '-Disc'
                    ELSE ''
                  END )
         END )                        AS 'ItemCode' 
```

我需要在第三列中结合 Edition 和 ItemCode。-Disc (ItemCode) 应该像 G-Disc 但 0-Disc (ItemCode) 应该像 0G-Disc。

我需要选择为

选择版本、项目代码、版本+项目代码....

我已经使用以下内容创建了第三列，但很好奇这是否可以以更好的方式完成......

```
( CASE
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'General' THEN (
           CASE
             WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
             ELSE( CASE
                     WHEN si.itmclass = 'Distrib' THEN 'G-Disc'
                     WHEN si.itmclass = 'PremIR' THEN '0G' + '-Disc'
                     WHEN si.itmclass = 'InstResp' THEN '5G' + '-Disc'
                     ELSE ''
                   END )
           END )
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Honors' THEN (
           CASE
             WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
             ELSE( CASE
                     WHEN si.itmclass = 'Distrib' THEN 'H-Disc'
                     WHEN si.itmclass = 'PremIR' THEN '0H' + '-Disc'
                     WHEN si.itmclass = 'InstResp' THEN '5H' + '-Disc'
                     ELSE ''
                   END )
           END )
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'WhosWho' THEN (
           CASE
             WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
             ELSE( CASE
                     WHEN si.itmclass = 'Distrib' THEN 'Y-Disc'
                     WHEN si.itmclass = 'PremIR' THEN '0Y' + '-Disc'
                     WHEN si.itmclass = 'InstResp' THEN '5Y' + '-Disc'
                     ELSE ''
                   END )
           END )
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Catholic' THEN (
           CASE
             WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
             ELSE( CASE
                     WHEN si.itmclass = 'Distrib' THEN 'J-Disc'
                     WHEN si.itmclass = 'PremIR' THEN '0J' + '-Disc'
                     WHEN si.itmclass = 'InstResp' THEN '5J' + '-Disc'
                     ELSE ''
                   END )
           END )
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Conservative' THEN (
           CASE
             WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
             ELSE( CASE
                     WHEN si.itmclass = 'Distrib' THEN 'B-Disc'
                     WHEN si.itmclass = 'PremIR' THEN '0B' + '-Disc'
                     WHEN si.itmclass = 'InstResp' THEN '5B' + '-Disc'
                     ELSE ''
                   END )
           END )
           ELSE ( CASE
                    WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
                    ELSE( CASE
                            WHEN si.itmclass = 'Distrib' THEN 'H-Disc'
                            WHEN si.itmclass = 'PremIR' THEN '0H' + '-Disc'
                            WHEN si.itmclass = 'InstResp' THEN '5H' + '-Disc'
                            ELSE ''
                          END )
                  END )
         END )                        AS EditionItemCode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:16:39.583

最好的方法是将您的查询视为子查询，并使用从该子查询中选择值的父查询。所以：

```
select Edition, ItemCode, ItemCode+Edition as ItemCodeEdition
from
( select (CASE
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'General' THEN 'G'
           WHEN (SELECT edition
                 FROM   clients.dbwo.service
                 WHERE  serv_id = hdr.serv_id) = 'Honors' THEN 'H'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'WhosWho' THEN 'Y'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Catholic' THEN 'J'
           WHEN (SELECT edition
                 FROM   clients.dbo.service
                 WHERE  serv_id = hdr.serv_id) = 'Conservative' THEN 'B'
           ELSE 'H'
         END )                        AS Edition,

(SELECT edition
        FROM   clients.dbo.service
        WHERE  serv_id = hdr.serv_id) AS editiontext,
       ( CASE
           WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
           ELSE ( CASE
                    WHEN si.itmclass = 'Distrib' THEN '-Disc'
                    WHEN si.itmclass = 'PremIR' THEN '0' + '-Disc'
                    WHEN si.itmclass = 'InstResp' THEN '5' + '-Disc'
                    ELSE ''
                  END )
         END )                        AS 'ItemCode') as tempTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:22:44.110

您的案例语句中有许多多余的子查询，我认为这些子查询不需要存在。如果我理解您的表格和查询正确，您应该能够执行以下操作。请注意，我已将第一个 case 语句（`Edition`列）提取到派生表连接中，然后从第二个 case 语句中将其引用为 make `EditionItemCode`。

```
SELECT s.edition AS editiontext, s.e AS edition,
    CASE
        WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
        WHEN si.itmclass = 'Distrib' THEN '-Disc'
        WHEN si.itmclass = 'PremIR' THEN '0-Disc'
        WHEN si.itmclass = 'InstResp' THEN '5-Disc'
        ELSE ''
    END AS ItemCode,
    CASE
        WHEN hdr.giftcarddiscount = 1 THEN 'GCDisc'
        WHEN si.itmclass = 'Distrib' THEN s.e + '-Disc'
        WHEN si.itmclass = 'PremIR' THEN '0' + s.e + '-Disc'
        WHEN si.itmclass = 'InstResp' THEN '5' + s.e + '-Disc'
        ELSE ''
    END AS EditionItemCode
FROM hdr
LEFT OUTER JOIN
(
    SELECT serv_id, CASE edition
               WHEN 'General' THEN 'G'
               WHEN 'Honors' THEN 'H'
               WHEN 'WhosWho' THEN 'Y'
               WHEN 'Catholic' THEN 'J'
               WHEN 'Conservative' THEN 'B'
               ELSE 'H'
          END AS e, edition
    FROM clients.dbo.service
) s ON s.serv_id = hdr.serv_id
JOIN si ON ... 
```

# c# - C#将函数源代码转换为字符串

> ID：13312627
> 
> 赞同：4
> 
> 时间：2012-11-09T17:04:27.910
> 
> 标签：c#, asp.net

在 C# 中有没有办法将函数的源代码转换为字符串？有点像它是如何在 JavaScript 中完成的。我需要这个，因为我正在为 Asp.Net 控件编写一些文档，并希望在结果旁边显示原始源代码，而不需要复制/粘贴它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:07:28.633

简短的回答：没有。

长答案：您可以在编译时使用 MSBuild 任务、T4 模板或手动解析东西，或使用 Roslyn 为您解析它。

如果你在运行时需要源代码，你肯定需要在部署的东西中包含 cs 文件，因为没有稳定的方法来取回代码。（虽然你可以尝试运行时反编译，但这看起来“丑陋”而且不是很精确。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:21:51.993

您可以将 C# 编译器作为一个单独的进程运行（它是 .Net Framework 的一部分，并且可以免费使用 - 然后与之同步）并使用适当的方法加载生成的程序集或发出 IL 代码（您必须生成“真正的”IL 代码首先为你准备这么小的模板——只需编写 c# 类并检查生成的 IL 代码的样子）。首先检查您是否有适当的权限。

例如，示例 Emit 用法在这里（我前段时间写过）： [http ://bitcare.codeplex.com/SourceControl/changeset/view/21192#366441](http://bitcare.codeplex.com/SourceControl/changeset/view/21192#366441)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:08:03.867

作弊方式：

在您的项目中包含 .cs 文件，并从中读取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:10:28.883

听起来您希望函数在运行时执行任务，将（其）源代码写入文本文件。这是不可能的，因为该函数在运行时作为 ASSEMBLY（或二进制）运行。

但是，您可以让该函数从某个地方读取其源代码的副本，然后将其写入其他地方

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T17:14:15.970

您可以使用以下工具之一：

*   [.NET 反射器](http://www.reflector.net)
*   [代码DOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)

# jquery - jquery DragDrop调用BackingBean函数

> ID：13312636
> 
> 赞同：0
> 
> 时间：2012-11-09T17:05:34.710
> 
> 标签：jquery, jquery-ui, jsf-2, backing-beans

我有一个用于拖放表格的小脚本，它工作正常。但我有一个问题：我必须将 start/endPosition 传递给我的 BackingBean。有没有办法从 jquery 调用 BackingBean 函数（带参数）？或者你知道一些很好的解决方法吗？

拖放代码：

```
<script type="text/javascript" language="javascript">
$(document).ready(function() {
    var startPosition;
    var endPosition;
    $('#table tbody').sortable({
    cursor: "move",
    start:function(event, ui){
      startPosition = ui.item.prevAll().length;
    },
    update: function(event, ui) {
      endPosition = ui.item.prevAll().length;

      // Call BackingBean function

     }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:12:42.200

BackingBean 是服务器端，您可以做的是在 backingbean 代码中调用 javascript 函数，当然还要更改函数以返回开始和结束位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:23:40.240

您可以在 xhtml 页面中有两个隐藏的输入字段，例如

```
 <h:inputHidden id="input1" value="#{bean.startPosition}" /> // getters and setters for startPosition in your bean
  <h:inputHidden id="input2" value="#{bean.endPosition}" /> 
```

并将您从上述 Jquery 脚本中获得的值设置为这些字段

```
 document.getElementById('form:input1').value=startPosition;
   document.getElementById('form:input2').value=endPosition; 
```

把它们放进豆子里。它应该做你的工作。

# matlab - 使用自定义“文件名”在 Matlab 中发布函数

> ID：13312638
> 
> 赞同：1
> 
> 时间：2012-11-09T17:05:41.810
> 
> 标签：matlab, publish, rename

我`publish`在 Matlab 中循环运行函数。有没有办法*自定义*输出文件名？

例如，发布运行 TopFunction，它本身会打印出 Fun1、Fun2。您可以看到*TopFunction.html*每次都被覆盖（连同图像等）。

我正在尝试查看是否可以自定义输出名称？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T19:37:49.553

在循环中使用 matlab 'movefile' 函数重命名文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:17:28.183

这真的很hacky，但我会修改`publish`以接受一个新选项`prefix`。替换第 93 行

```
[scriptDir,prefix] = fileparts(fullPathToScript); 
```

和

```
if ~isfield(options, 'prefix')
    [scriptDir,prefix] = fileparts(fullPathToScript);
else
    [scriptDir,~] = fileparts(fullPathToScript);
    prefix = options.prefix;
end 
```

现在您可以设置`options.prefix`为您想要的任何文件名。如果您想成为真正的铁杆，请对`supplyDefaultOptions`和进行适当的修改`checkOptionFields`。

# opengl - OpenGL 高效地渲染多个图层

> ID：13312639
> 
> 赞同：1
> 
> 时间：2012-11-09T17:05:45.213
> 
> 标签：opengl, render, layered

我有一个主要场景，并且我有一个想要在其之上渲染的场景。我想使用早期深度测试来提高性能，所以我想把所有东西从前到后一起渲染。但是我不能将每个场景隔离到深度缓冲区的一半，因为这会限制它的精度。我可以渲染后面的场景，清除深度缓冲区，然后渲染前面的场景，这样可以正确绘制，但会导致不必要的过度绘制。额外的帧缓冲区加上 blit 同样会导致过度绘制。

理想的解决方案（如下所述）是使用 glDepthRange 在深度缓冲区内建立多个区域，允许正常渲染以前后两次的顺序进行，以最大限度地减少过度绘制，同时防止跨层遮挡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:55:16.910

> 我有一个主要场景，并且我有一个想要在其之上渲染的场景。我想使用早期深度测试来提高性能，所以我想把所有东西从前到后一起渲染。但是我不能将每个场景隔离到深度缓冲区的一半，因为这会限制它的精度。

通常，您有 24 位的深度缓冲区精度。将其分成两半产生...... 23位精度。不知何故，我相当怀疑这将是一个主要问题。如果是这样，您总是可以通过减少正面覆盖的空间来收回这一点。比如说，只有 5% 的深度范围。

这就是 FPS 游戏如何进行“视图模型”（玩家的手和枪）叠加。做专业人士做的事。

> 我可以以某种方式渲染覆盖场景，将深度缓冲区中的任何值更改为不是 1 的 -1，然后渲染主场景吗？

-1 不是有效的深度缓冲区值。所以我会假装你说的是 0。

是的，你可以这样做。您可以将场景渲染为深度纹理。然后渲染一个从纹理中获取深度值的全屏四边形，将其与 1 进行比较，如果不完全是 1.0，则写入 0 而不是 1.0。

但是这个练习的重点是表现，是吗？考虑必须发生什么才能使我刚才所说的起作用。

*在第一个场景完成*渲染之前，GPU 无法渲染该全屏四边形。这将意味着整个渲染管道必须完全刷新，浪费宝贵的时间。

与`glDepthRange`解决方案相比，这可能会更慢。

# php - 使用复选框删除 HTML 表单中的选定记录

> ID：13312640
> 
> 赞同：0
> 
> 时间：2012-11-09T17:05:50.547
> 
> 标签：php, html, database

我有一个 HTML 表单，其中包含一些记录。应通过选择一个或所有记录对应的复选框来删除记录。

当我选中一条记录的复选框并单击删除时，查询成功运行，但记录没有删除。

这是PHP代码：

```
if(isset($_POST['delete']))
{ 
    $allCheckBoxId = $_POST['chkDel'];

    array_map ('mysql_real_escape_string', $allCheckBoxId);
    $ids = implode(",", $allCheckBoxId);

    $object=new connection();
    $object=$object->dbConnect();

    $st=$object->prepare(
        "delete * from banners where bannerid IN (?)");

    $st->bindParam(1, $ids);
    $delete=$st;
    $delete->execute();
    if($delete)
    {
        echo "record deleted successfully." . 
             "This will go to banners within 5 sec";

    }
    else
    {
        echo "not deleted";

    }
} 
```

和 HTML 表单：

```
<form name="myform" action="listbanners.php" method="post" OnSubmit="return onDelete();" id="frm1">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <th width="13"><input type="checkbox" class="checkbox" title="select all" onclick="checkAll(document.myform.chkDel);" name="CheckAll" /></th>
        <th width="13">ID</th>
        <th>Name</th>
        <th><input type="submit" name="delete" value"Delete"></th>
    </tr>
    <?php
        $object=new connection();
        $object=$object->dbConnect();
        $st=$object->prepare("select * from banners order by bannerid desc");
        $st->execute();
        while($row=$st->fetch(PDO::FETCH_ASSOC))
        {
    ?>

    <tr>
        <td><input name="chkDel[]" type="checkbox" title="select" class="checkbox" value="<?php echo $row['bannerid'];?>"/></td>
        <td><?php echo $row['bannerid'];?></td>
        <td><h3 onClick="location='editbanner.php?bannerid=<?php echo $row['bannerid'];?>'"><?php echo $row['file'];?></h3></td> 
        <td><input type="submit" name="delete" value="delete"/></td>
    </tr>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:19:58.437

```
$st=$object->prepare("delete * from banners where bannerid IN (?)");
$st->bindParam(1, $ids); 
```

您正在尝试将单个参数绑定到值数组。您需要将每个值作为单独的参数传入；例如：

```
$st=$object->prepare("delete * from banners where bannerid IN (?,?,?)"); 
```

您需要为要包含在 IN 子句中的每个值包含一个占位符。您可以根据 中的项目数动态生成 SQL `$ids`。

我错过了'DELETE *'，这是无效的语法；但我把它留在原地，因为我注意到的一点是有效的。这是一个不完整的答案，不是错误的。

# url - 从 URL 中查找 Facebook ID

> ID：13312642
> 
> 赞同：3
> 
> 时间：2012-11-09T17:05:55.600
> 
> 标签：url, facebook-graph-api, facebook-like

在 Facebook 的文档中，它说您可以从 URL 中找到 ID，以前就是这样。这似乎不再是真的了。

这个例子直接来自 Facebook 的 API 文档：

--------------FACEBOOK 文档----------

## “ids”查询参数也接受 URL。这对于在 Open Graph 中查找 URL 的 ID 很有用。例如：[https ://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/)

但是，当您单击该链接时，它会为您提供：

```
{
   "http://www.imdb.com/title/tt0117500/": {
      "id": "http://www.imdb.com/title/tt0117500/",
      "shares": 18226,
      "comments": 7
   }
} 
```

其中不包括此示例 URL 的真实 Facebook ID。如果我去调试器并输入这个 URL，我可以找到 ID，即：380728101301

那么如何在不使用 Open Graph Debugger 的情况下找到 ID？我需要能够通过我网站上的代码获取 ID，并且不能每次都手动访问调试器.. 现在有人知道该怎么做吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:21:37.260

FQL 有一种可能性：

```
SELECT url,site,id FROM object_url WHERE url = 'http://www.imdb.com/title/tt0117500'; 
```

> [https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# sql - 定期更新 Sql Azure 数据库中的数据

> ID：13312643
> 
> 赞同：0
> 
> 时间：2012-11-09T17:05:58.470
> 
> 标签：sql, azure

我有一个向 Windows 8 应用程序提供数据的 SQL Azure 数据库实例。我的数据库中的数据应该定期（每周）更新。有什么方法可以做到吗？我正在考虑编写一个每周运行并更新数据库的应用程序。但是仍然不知道如何让它在 Window Azure 上运行？请帮忙！谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:30:04.617

有很多方法可以实现这一点，但是数据是否需要来自不同的来源或者可以计算出来？

无论哪种方式，鉴于您已经深入了解 SQL Azure，我建议您将您的逻辑置于[工作角色](http://www.techrepublic.com/blog/networking/windows-azure-web-worker-and-vm-roles-demystified/4017)中，该角色可以安排为每周运行一次更新。这将为您提供进行计算和/或从外部获取数据的绝佳机会。

Azure 使您可以灵活地将此辅助角色扩展到多个实例，具体取决于工作负载。

这是关于在 Azure 上创建辅助角色的一个很好的介绍教程：[链接](http://www.codeproject.com/Articles/50411/Simple-6-Steps-to-Run-your-First-Azure-Worker-Role)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:16:17.520

编写应用程序并将其设置为每周通过您的 cron 作业管理器运行。cron 作业管理器应由您的主机提供。

# fonts - wf-loading 类没有出现在网站上

> ID：13312644
> 
> 赞同：2
> 
> 时间：2012-11-09T17:05:59.917
> 
> 标签：fonts

我们目前正在使用 Google 的 WebFont Loader 来加载我们自定义的 @font-face 字体。该工具应该通过允许我们在加载字体时使用 css 类来隐藏文本来消除 fout。不幸的是，似乎 html 标签上的类总是 wf-active 所以 fout 仍然显示。有谁知道为什么没有显示 wf-loading 类？

如果您想查看我们的网站[http:](http://wiredimpact.com) //wiredimpact.com，Google WebFont Loader 的文档位于[https://developers.google.com/webfonts/docs/webfont_loader](https://developers.google.com/webfonts/docs/webfont_loader)。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T03:02:25.343

我创建了一个 hack 来解决这个问题。`wf-loading`首先，我将类硬编码为`html`元素。

```
<html class="wf-loading"> 
```

WebFont 加载器删除这个类并在加载后用相关的字体类替换它，所以一切都按预期工作。但是，我不希望出现 WebFont 加载器不加载且`wf-loading`类未删除的情况，因此作为后备，我添加了一个脚本以在 3 秒后删除该类：

```
setTimeout(function() {
    $('html').removeClass('wf-loading');
}, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T13:58:13.990

@Astrotim，您的答案将有效，除非在以下情况下

1）用户没有javascript。然后 wf-loading 类永远不会离开。

2) 在 webfont 加载器完成之前，您最终会在 3 秒超时后删除 wf-loading。

我使用modernizr 来解决同样的问题（*）。只需将 no-js 和 wf-loading 硬编码到 html 元素中。然后，您可以使用 .no-js.wf-loading 作为无 javascript 后备，并在 webfont 加载器获取字体时使用 .js.wf-loading，并在完成时使用 .js.wf-active,.js.wf-inactive .

(*) Modernizr 将在 html 元素中查找 no-js，如果启用了 javascript，则将其更改为 js。

# javascript - 如何实现我对 JavaScript 表单的想法？

> ID：13312648
> 
> 赞同：0
> 
> 时间：2012-11-09T17:06:09.730
> 
> 标签：javascript, jquery, python, django

到目前为止，我主要使用 Python 工作，所以在 JavaScript 方面我是新手。现在我需要后者来实现一个表单。我有一些想法和要求，希望您告诉我如何开始以及使用哪些框架或工具。

我的要求是：

1.  服务器端逻辑将在 Python 和 Django 中实现。
2.  整个表单位于一个网页上。
3.  网页的整体设计应该使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)来完成。
4.  加载页面后，仅显示表单的第一个字段。
5.  填写此字段并正确验证后，在第一个字段下方显示表单的第二个字段
6.  显示新字段时，如有必要，其网页应自动向下滚动，以便新字段在浏览器中居中。滚动应该发生一些漂亮的动画。
7.  我的表单还包括一些[ChoiceField](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#choicefield)类型的字段。每个选项都有自己的一组附加设置，这些设置也将作为表单字段实现。做出特定选择后，应仅显示相应的设置集，而不是同时显示所有选择字段的所有设置。（我可以用一个简单的`if-else`结构做到这一点吗？）
8.  当所有字段都已显示、填写和验证并且表单已提交时，服务器会进行一些计算。一旦准备好，这些计算的结果应该显示在整个表单的下方。网页应再次自动向下滚动到结果。最好的办法是将网页向下滚动到表单不再可见但只显示结果的程度。所以这可能取决于当前打开的浏览器窗口的大小。

我知道这一切都是可能的，我也时不时看到过这样的形式，但目前还没有具体的例子。我也知道这一切都可以通过 JavaScript 实现。我可以使用 JQuery 实现以上所有功能还是需要其他工具？如果一位 JavaScript 专家能指导我解决我脑海中的这个混乱局面，那就太好了。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:39:17.453

## 让它起作用

在使用 javascript 做任何事情之前，请先制作一个正常的表单。即使用您想要的任何服务器端语言生成表单，并且当您提交表单时，它应该执行您希望它执行的操作。如果您有一个没有 javascript 的表单，那么您有信心在 js 中断时它总是可以工作。

## 让它更好地工作/渐进式增强

您的 js 似乎有 2 或 3 个要求 - 单独对待它们：

### 1\. 表单应该一次只显示一个输入

例如，像这样的标记：

```
<form id="myForm" method="post">
    <legend>My Awesome Form</legend>
    <div class="question">
        <label for="x">X</label>
        <input name="x" id="x">
    </div>
    <div class="question">
        <label for="y">Y</label>
        <input name="y" id="y">
    </div>
    <div class="question">
        <label for="z">Z</label>
        <input name="z" id="z">
    </div>

    <div class="submit"><input type="submit" value="Submit"></div>
</form> 
```

像这样使用一些js：

```
$('.question', '#myForm').not(':first-child').hide();
$('input', '#myForm').change() {
    var div, next;

    div  = $(this).parent();
    next = div.next();

    if ($(this).val() && next.length) {
        parent.hide();
        next.show();
    }
}); 
```

一次只显示一个问题 div，并在填充输入时显示下一个（如果有下一个）。

### 2\. 验证用户输入

要验证用户输入，请创建一个为您执行此操作的函数，根据需要返回 true/false 并将其挂钩到您的 js 中，以便在输入值被视为无效时它不会继续：

```
validate(field, input) {
    var valid = false;

    // implement your logic here to validate input

    if (valid) {
        return true
    }
    return false;
}

$('input', '#myForm').change() {
    var div, next;

    if (!validate($('this').attr('name'), $(this).val()) {
        return;
    }

    div  = $(this).parent();
    next = div.next();

    if ($(this).val() && next.length) {
        parent.hide();
        next.show();
    }
}); 
```

如果当前输入的值无效，这将阻止用户进入下一个输入。

### 3.通过ajax提交表单

单击提交应该将表单数据发送到服务器，以（几乎）与正常提交表单相同的方式。唯一的区别应该是它使用您解析的 json 响应或您在页面末尾转储的 html 片段进行响应：

```
$('#myForm').submit(function(e) {
    e.preventDefault();

    $.ajax({
        type: "POST",
        url: $(this).attr('action'),
        data: $(this).serialize(),
        success: function(data, textStatus, jqXHR) {
            // handle success response
        },
        error: function(jqXHR, textStatus, errorThrown)) {
            // show the user an error
        }
    });
}); 
```

这里写的所有 js 都是未经测试的，它应该给你一些关于如何处理你想做的事情的各个方面的想法——当然，有关任何特定方法的更多信息，请参阅[文档](http://api.jquery.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:27:08.010

所有这些都可以使用 jQuery 完成，您不需要任何额外的 JS 工具。

由于您有很多功能要构建，所以我不打算详细介绍。但是，我可以提供一些有关如何进行流程的每个步骤的见解。

1.) 那很好。

2.) 那也很好，您只需要一个 html 页面即可完成此操作。

3.) 我建议使用 HTML 创建的所有表单，CSS 为 display none。然后随着用户的进行，您可以使用[.show()](http://api.jquery.com/show/)来“显示”隐藏的元素。

4.) 可能想要在表单之外有一个“下一步”按钮。使用[.click()](http://api.jquery.com/click/)触发一个函数，该函数对输入表单字段的值进行所需的任何表单验证。您可以使用[.next()](http://api.jquery.com/next/)循环浏览表单输入。

5.) 如果您想要浏览器滚动，请使用[scrollTop](http://api.jquery.com/scrollTop/)或 jQuery ScrollTo 插件。如果您只是想在屏幕上移动东西而不是真正滚动，请使用[.animate()](http://api.jquery.com/animate/)

6.) 随着用户的进展，您必须即时设置值。所以使用[.change()](http://api.jquery.com/change/)来进行检测。

7.) 在提交之前，再次在所有字段上运行您的验证器，以确保您拥有所有正确的数据。您需要使用[.ajax()](http://api.jquery.com/jQuery.ajax/)向您的服务发出请求，并防止在实际表单提交时出现默认设置。获取您从服务返回的响应并相应地格式化信息。

这应该让您深入了解如何完成您的项目。祝你好运！

# android - 如何画出封闭的曲线形状？

> ID：13312658
> 
> 赞同：1
> 
> 时间：2012-11-09T17:06:52.830
> 
> 标签：android, graphics, shape

如何在 Android 上绘制（用手指）清晰的闭合形状。我可以从触摸输入中获得一系列点，我需要放置与点相对应的自定义曲线形状（不必完全通过点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:42:41.263

跟踪您的接触点并应用它们以构建可以绘制 的`Path`（[文档链接）。](https://developer.android.com/reference/android/graphics/Path.html)`Path`以这样一种方式设置，您可以在每个点进入时将它们附加到它，并且您可以决定在它们之间绘制什么类型的连接（线、弧、贝塞尔）。

您可以使用初始触摸和当前触摸之间的接近度或类似逻辑来确定何时关闭轮廓，然后只需调用`close()`.

# bash - 将 shell 目录导出到终端

> ID：13312663
> 
> 赞同：-2
> 
> 时间：2012-11-09T17:07:04.640
> 
> 标签：bash

我正在创建一个 shell 脚本，它允许我的 shell 具有后退功能。在脚本中更改终端目录的好方法是什么。

只是在我的 back.sh 文件中运行这样的东西是行不通的：

```
cd / 
```

即使我像这样运行文件

```
source ./back.sh 
```

无法正常工作的示例文件：

```
#!/bin/bash

cd ~/Movies/ 
```

当我运行 source ./back.sh 或 source back.sh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T11:17:22.377

`.`这是我关于和builtins之间区别的 2 美分`source`：没有。

既然您提到您使用`.`for `cd ../`，请确保执行正确的`.`and`source`并且实际上是同一件事：

```
user@host> type source
source is a shell builtin     
user@host> type .
. is a shell builtin 
```

除此之外，`/bin/bash --version`也可能会有所帮助。

# django - Django：将 auth_login 设置为主页

> ID：13312665
> 
> 赞同：0
> 
> 时间：2012-11-09T17:07:17.347
> 
> 标签：django

我是 Django 的新手。问题：查看我的主页（显示默认的 django 登录表单）

我必须写地址：

xxxxxx:8001/登录

我想通过它直接访问它：

xxxxxx:8001

如果我输入 xxxxxx:8001，我现在可以看到的是没有表单的登录页面。

我有：

在我的 urls.py 中：

```
urlpatterns = patterns('',
    url(r'^$', 'license.views.index', name='auth_login'), 
```

在我看来.py

```
from django import template
from django.shortcuts import render_to_response
from django.views.decorators.vary import vary_on_cookie

@vary_on_cookie
def index(request):
    return render_to_response('login.html', {
    }, context_instance = template.RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:34:13.973

那是因为您没有将登录表单实例传递给您的表单。

除非你想在你的视图中执行一些自定义的东西，你最好的选择是使用 Django 的内置登录视图。您可以为其设置自定义模板：

```
url(r'^$', 'django.contrib.auth.views.login', {'template_name': 'login.html'}) 
```

有关更多信息，请参阅此页面：[django.contrib.auth.views.login (v1.5) 文档](https://docs.djangoproject.com/en/1.5/topics/auth/#django.contrib.auth.views.login)

现在，我看到您在视图上使用了装饰器，这意味着您确实想要执行自定义的东西。在这种情况下，我相信您会想要使用**django.contrib.auth.forms.AuthenticationForm**。尝试在您的视图中执行以下操作：

```
from django.contrib.auth.forms import AuthenticationForm
from django.shortcuts import render
from django.views.decorators.vary import vary_on_cookie

@vary_on_cookie
def index(request):
    form = AuthenticationForm(data=request.POST or None)

    return render(request, 'login.html', {
        'form': form
    }) 
```

# c# - 如何从我的简单 ASP.net 和从 URL 获取参数的 C# 程序连接 AS/400

> ID：13312667
> 
> 赞同：1
> 
> 时间：2012-11-09T17:07:30.823
> 
> 标签：c#, asp.net, .net, sql-server, ibm-midrange

这是我的简单代码，它将参数值存储在变量中并在查询中使用它，但它给了我错误消息“INVALID Object name”DTA010.DFDR00”，因为我想我没有连接到 AS/400

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //string strQuery;

        string order_no = Request.QueryString["order"];
        if (order_no != null)
        {
            Response.Write("\n");
            Response.Write("Order No is ");
            Response.Write(order_no);
        }
        else
        {
            Response.Write("You Order number is not correct");
        }

        Response.Write("Your Order Status is");
        Response.Write(niceMethod1());
        Response.Write("\n");

    }

    public string niceMethod1()
    {
        string tDate = "";

        string nOrder = (Request.QueryString["order"] ?? "0").ToString();

        using (SqlConnection connection = new SqlConnection("Data Source=*****;User ID=web;Password=****;Initial Catalog=WEBSTATUS;Integrated Security=False;"))
        {

            string commandtext = "SELECT A.STAT01 FROM DTA010.DFDR00 AS A WHERE A.ORDE01 = @nOrder"; //@nOrder Is a parameter

            SqlCommand command = new SqlCommand(commandtext, connection);

            //command.Parameters.AddWithValue("@nPhone", nPhone); //Adds the ID we got before to the SQL command
            command.Parameters.AddWithValue("@nOrder", nOrder);
            connection.Open();
            tDate = (string)command.ExecuteScalar();
        } //Connection will automaticly get Closed becuase of "using";
        return tDate;
    }
} 
```

从 .NET 应用程序连接到 AS/400 所需的驱动程序已正确安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T22:15:48.763

如果模式（又名库）和表（又名文件）的名称拼写正确，请尝试用斜杠替换句点`/`。这将用于“系统”命名语法，而不是“标准”命名语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:09:08.817

你肯定是有联系的。我认为问题可能出在您收到的错误中。确保您要连接的对象存在。`WRKOBJ OBJ(BTGDTA010/DF01HDR00)`会看看它是否存在。检查所有内容是否拼写正确。这可能是一个错字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:15:10.617

这是我发现的最简单的方法可能对某人有用..!!

首先需要添加 Assembly IBM 库和

使用 IBM.Data.DB2.iSeries；

然后

```
 iDB2Connection connDB2 = new iDB2Connection(
            "DataSource=158.7.1.78;" +
            "userid=*****;password=*****;DefaultCollection=MYTEST;"); 
```

# java - 为什么没有像 ruby 的 capybara for java 这样的无头 BDD 测试引擎？

> ID：13312671
> 
> 赞同：3
> 
> 时间：2012-11-09T17:07:57.157
> 
> 标签：java, capybara, web-testing

为什么没有可以与 tomcat 或其他东西一起使用的 ruby​​ 的 capaybara ( [https://github.com/jnicklas/capybara ) 的 java 版本？](https://github.com/jnicklas/capybara)

我知道我们有 selenium，但它非常慢，需要浏览器才能启动。

这有技术原因吗？或者它确实存在？

我希望有一些东西可以加快对 java、spring mvc 应用程序的浏览器集成测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:11:36.697

也许[HtmlUnit](http://htmlunit.sourceforge.net/)是一个适合您的选项

# javascript - 使用 jQuery 淡入新图像

> ID：13312673
> 
> 赞同：0
> 
> 时间：2012-11-09T17:07:59.717
> 
> 标签：javascript, jquery

下面是充当背景的图像元素。该位置是绝对的，并且它的 z-index 也很低，因此它位于其余内容的后面。

```
<img src="day-sky.jpg" id="background" /> 
```

下面的秒数仅指一分钟内的秒数。这仅用于测试目的，但如果秒数 < 30，我希望有一个背景图像，如果大于 30，我希望有一个不同的背景图像。如果可能，过渡将是一个很好的淡入淡出到下一个图像。

我一直在寻找方法来做到这一点，但还没有想出一个好的方法来做到这一点。有什么想法吗？

```
function changeBackground() {

if (secs > 30) {
    //have one background
}
else {
    //have a different background
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:13:33.653

您可能希望在`setInterval()`根据您的要求定义的每个时间戳之后使用函数来更改背景。

`setInterval(changebackground, timeout);` `runs the code/function once after the timeout.`

```
 $(function() {
    setInterval(function() {
        var bg = ["#000","#FF0", "#909"]
        var rep= Math.floor(Math.random() *3);
                $("body").css("background",bg[rep])
    }, 3000)
  }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:14:54.060

这是一个工作示例：http: [//jsfiddle.net/PKqGk/](http://jsfiddle.net/PKqGk/)

```
var imgs = [
        "http://placehold.it/1920x1080/&text=1",
        "http://placehold.it/1920x1080/&text=2",
        "http://placehold.it/1920x1080/&text=3",
        "http://placehold.it/1920x1080/&text=4",
        "http://placehold.it/1920x1080/&text=5",    
        "http://placehold.it/1920x1080/&text=6"   
    ],
    ind = 0,
    dur = 10 * 1000; // ten seconds
(function imgSlide(){

    var img = ind % 2 ? $('#imageOne') : $('#imageTwo'),
        hid = ind % 2 ? $('#imageTwo') : $('#imageOne');

    console.log(img, hid);

    img.fadeOut("slow", function(){
        hid.fadeIn("slow").css('margin-left', -hid.width()/2);
        if (++ind == imgs.length) ind = 0;
        img.attr('src', imgs[ind]);
        setTimeout(imgSlide, dur);
    });
})();​ 
```

# c# - 如何用双或更多空行分割？Regex.Stplit 添加不需要的字符串

> ID：13312677
> 
> 赞同：6
> 
> 时间：2012-11-09T17:08:07.437
> 
> 标签：c#, regex, string

我需要将此字符串拆分`"hello1\r\nhello2\r\n\r\nhello3\r\n\r\n\r\nhello4"` 为：`{"hello1\r\nhello2" , "hello3", "hello4"}`

我的代码：

```
string text = "hello1\r\nhello2\r\n\r\nhello3\r\n\r\n\r\nhello4"; 
string[] wordsarray = Regex.Split(text, @"(\r\n){2,}"); 
```

结果是：`{"hello1\r\nhello2" ,"\r\n" , "hello3" ,"\r\n" ,"hello4"}`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T17:10:03.080

你很亲密。只需使用非捕获组：

```
Regex.Split(text, @"(?:\r\n){2,}") 
```

`Regex.Split`[将捕获的组添加到结果数组中，如Regex.Split](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)的“备注”部分中所述。

# c++ - 为什么 OpenMP 不允许使用 != 运算符？

> ID：13312679
> 
> 赞同：78
> 
> 时间：2012-11-09T17:08:15.400
> 
> 标签：c++, c, multithreading, parallel-processing, openmp

我试图编译以下代码：

```
#pragma omp parallel shared (j)
{
   #pragma omp for schedule(dynamic)
   for(i = 0; i != j; i++)
   {
      // do something
   }
} 
```

但我收到以下错误：**错误：无效的控制谓词**。

[OpenMP 标准](https://www.openmp.org//wp-content/uploads/spec30.pdf)规定，对于构造函数，`parallel for`它“仅”允许以下运算符之一：`<`, `<=`, `>` `>=`.

我不明白不允许的理由`i != j`。我可以理解，在 的情况下`static schedule`，因为编译器需要预先计算分配给每个线程的迭代次数。但是我不明白为什么在这种情况下会出现这种限制。有什么线索吗？

* * *

**编辑：**即使我 make `for(i = 0; i != 100; i++)`，虽然我可以放 "<" 或 "<=" 。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-15T18:14:14.870

.

## **我向 OpenMP 开发人员发送了一封关于此主题的电子邮件，得到的答复是：**

对于有符号整数，环绕行为是未定义的。如果我们允许`!=`，程序员可能会得到意外的tripcount。问题是编译器是否可以生成代码来计算循环的行程计数。

对于一个简单的循环，例如：

```
for( i = 0; i < n; ++i ) 
```

**如果 n>=0** ，编译器可以确定有 'n' 次迭代，如果**n < 0 则**确定有零次迭代。

对于像这样的循环：

```
for( i = 0; i != n; ++i ) 
```

**同样，如果 n >= 0**，编译器应该能够确定存在“n”次迭代；**如果 n < 0**，我们不知道它有多少次迭代。

对于像这样的循环：

```
for( i = 0; i < n; i += 2 ) 
```

编译器可以生成代码来计算行程计数（循环迭代计数），**如果 n >= 0 则为 floor((n+1)/2)**，**如果 n < 0 则为 0**。

对于像这样的循环：

```
for( i = 0; i != n; i += 2 ) 
```

编译器无法确定“i”是否会命中“n”。如果'n'是奇数怎么办？

对于像这样的循环：

```
for( i = 0; i < n; i += k ) 
```

编译器可以生成代码来计算行程计数，**如果 n >= 0 则为 floor((n+k-1)/k)**，**如果 n <** 0 则为 0 ，因为编译器知道循环必须向上计数；在这种情况下，如果**k < 0**，则它不是合法的 OpenMP 程序。

对于像这样的循环：

```
for( i = 0; i != n; i += k ) 
```

编译器甚至不知道我是向上还是向下计数。它不知道“i”是否会命中“n”。这可能是一个无限循环。

**学分**：OpenMP ARB

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-11-09T17:19:52.727

与它的外观相反，它`schedule(dynamic)`不适用于动态数量的元素。相反，将迭代块分配给线程是动态的。对于静态调度，此分配是在工作共享构造的开始时预先计算的。使用动态调度，迭代块按照先到先得的原则分配给线程。

OpenMP 标准非常清楚，一旦遇到工作共享构造，就会预先计算迭代的数量，因此不能在循环体内修改循环计数器（OpenMP 3.1 规范，§2.5.1 - 循环构造）：

> 每个关联循环的迭代计数在进入最外层循环之前计算。如果任何关联循环的执行更改了用于计算任何迭代计数的任何值，则行为未指定。
> 
> 用于计算折叠循环的迭代计数的整数类型（或类型，对于 Fortran）是实现定义的。
> 
> 工作共享循环具有编号为 0,1,...,N-1 的逻辑迭代，其中 N 是循环迭代的次数，逻辑编号表示如果执行相关循环，则执行迭代的顺序通过一个线程。该 `schedule`子句指定相关循环的迭代如何划分为连续的非空子集，称为块，以及这些块如何分布在团队的线程中。每个线程在其隐式任务的上下文中执行其分配的块。*块*大小*使用在循环构造中设为私有的任何变量的原始列表项来评估表达式。未指定是否以什么顺序或多少次出现此表达式的求值的任何副作用。在循环构造的子句表达式中使用变量`schedule`会导致在所有封闭构造中隐式引用该变量。*

 *这些关系运算符限制背后的基本原理非常简单——它清楚地指示了循环的方向，它可以轻松计算迭代次数，并且它提供了与 C/C++ 和 Fortran 中的 OpenMP 工作共享指令类似的语义. 此外，其他关系操作需要仔细检查循环体，以了解循环如何进行，这在许多情况下是不可接受的，并且会使实现变得麻烦。

OpenMP 3.0 引入了显式`task`构造，它允许以未知的迭代次数并行化循环。但是有一个问题：任务引入了一些严重的开销，并且每个循环迭代的一个任务只有在这些迭代需要相当长的时间才能执行时才有意义。否则开销将支配执行时间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T17:25:14.910

答案很简单。OpenMP 不允许提前终止一组线程。使用 == 或 !=，OpenMP 无法确定循环何时停止。1\. 一个或多个线程可能达到终止条件，这可能不是唯一的。2\. OpenMP 无法关闭其他可能永远不会检测到该条件的线程。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T18:10:03.037

如果我看到声明

```
for(i = 0; i != j; i++) 
```

用于代替语句

```
for(i = 0; i < j; i++) 
```

我会想知道*为什么*程序员会做出这样的选择，更不用说它可能意味着同样的事情。可能 OpenMP 正在做出艰难的语法选择，以强制实现一定的代码清晰度。

这是对使用提出挑战的代码，`!=`可能有助于解释为什么不允许使用。

```
#include <cstdio>

int main(){
    int j=10;
   #pragma omp parallel for
   for(int i = 0; i < j; i++){
    printf("%d\n",i++);
   }
} 
```

请注意，`i`在`for`语句以及循环本身中都会增加，导致无限循环的可能性（但不是保证）。

如果谓词是，`<`那么循环的行为仍然可以在并行上下文中很好地定义，而编译器不必检查循环内的更改`i`并确定这些更改将如何影响循环的边界。

如果谓词是`!=`，则循环的行为不再是明确定义的，它的范围可能是无限的，从而阻止了简单的并行细分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T17:19:49.017

我认为除了扩展现有功能之外，可能没有什么好的理由来达到这一点。

IIRC 最初这些必须是静态的，以便它可以在编译时确定如何生成循环代码......它可能只是一个后遗症。*

# javascript - 谷歌地图地理编码器不如谷歌地图准确

> ID：13312680
> 
> 赞同：2
> 
> 时间：2012-11-09T17:08:22.467
> 
> 标签：javascript, google-maps-api-3, geocoding

我有一个数据库，其中包含准确到建筑物级别的地址。当我将这些手动放入谷歌地图的搜索中时，谷歌地图发现它们没有问题 - 标记出现在正确的建筑物上。但是，当我使用以下代码将这些相同的地址传递给 Google Maps API 地理编码器时，标记仅显示在街道上而不是建筑物上。

如何提高准确性？

HTML/PHP：

```
<div id="addressline"><?php echo theaddress(); ?></div> 
```

JS：

```
 function myGeocodeFirst() {
        geocoder = new google.maps.Geocoder();

        geocoder.geocode( {'address': document.getElementById("addressline").innerHTML},
          function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
              firstLoc = results[0].geometry.location;
              map = new google.maps.Map(document.getElementById("map_canvas"),
              {
                center: firstLoc,
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
              });
              markers = new google.maps.Marker({
              position: firstLoc,
              map: map,
        });

            } 
            else {
              document.getElementById("text_status").value = status;
            }
          }
        );
      }
window.onload=myGeocodeFirst; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:13:13.253

谷歌地图使用许多不同的数据源来定位地图上的搜索结果。

您看到的“正确”条目是 Places 数据库条目。请参阅[此页面](http://www.geocodezip.com/v3_GoogleEx_places-searchboxB.html)并输入您的搜索字符串（St Clement's Church, Edge Lane, Chorlton, M21 9JF）。

地理编码器旨在返回邮政地址的坐标，您的字符串中没有足够的信息来返回准确的结果：

[http://www.geocodezip.com/v3_example_geo2.asp?addr1=St%20Clement%E2%80%99s%20Church,%20Edge%20Lane,%20Chorlton,%20M21%209JF&geocode=1](http://www.geocodezip.com/v3_example_geo2.asp?addr1=St%20Clement%E2%80%99s%20Church,%20Edge%20Lane,%20Chorlton,%20M21%209JF&geocode=1)

看起来它只是返回邮政编码的地理编码：

```
Manchester M21 9JF, UK (53.4414411, -2.285287100000005) 
```

看起来地理编码器确实有那个位置。如果我使用“St Clement's Church, Edge Lane”，它似乎获得了“屋顶”地理编码（尽管它报告“近似”）

[http://www.geocodezip.com/v3_example_geo2.asp?addr1=St%20Clement%E2%80%99s%20Church,%20Edge%20Lane,%20Chorlton,%20M21%209JF&geocode=1&addr2=St%20Clement%E2%80 %99s%20Church,%20Edge%20Lane&geocode=2](http://www.geocodezip.com/v3_example_geo2.asp?addr1=St%20Clement%E2%80%99s%20Church,%20Edge%20Lane,%20Chorlton,%20M21%209JF&geocode=1&addr2=St%20Clement%E2%80%99s%20Church,%20Edge%20Lane&geocode=2)

```
St Clement's Church, 6 Edge Ln, Manchester, Lancashire M21 9JF, UK (53.4406823, -2.283755499999984) 
```

[概念证明小提琴](http://jsfiddle.net/geocodezip/Lf1yghwj/)

**代码片段：**

```
var geocoder, map, service, infowindow, bounds;

function initialize() {
  map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(37.4419, -122.1419),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  var request = {
    query: "St Clement’s Church, Edge Lane, Chorlton, M21 9JF"
  }
  infowindow = new google.maps.InfoWindow();
  service = new google.maps.places.PlacesService(map);
  bounds = new google.maps.LatLngBounds();
  service.textSearch(request, callback);

}
google.maps.event.addDomListener(window, "load", initialize);

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      var marker = createMarker(results[i]);
      bounds.extend(marker.getPosition())
    }
    map.fitBounds(bounds);
    google.maps.event.trigger(marker, 'click');
  }
}

function createMarker(place) {
  var placeLoc = place.geometry.location;
  var marker = new google.maps.Marker({
    map: map,
    position: place.geometry.location
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.setContent(place.name);
    infowindow.open(map, this);
  });
  return marker;
}
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=places"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:37:29.500

基本上有一个名字和一个地址。Google 数据库可以为同一位置使用其他名称。您可以在这里阅读我的答案：http: [//www.stackoverflow.com/questions/12788664/google-maps-api-geocode-returns-different-co-ordinates-then-google-maps/12790012#12790012](http://www.stackoverflow.com/questions/12788664/google-maps-api-geocode-returns-different-co-ordinates-then-google-maps/12790012#12790012)。在谷歌响应中，您需要遍历地标对象以找到最相似的位置。

# android - 我在 Android 模拟器上执行应用程序，它工作正常，但是当我导出到 APK 并在我的手机上测试它时，它不起作用

> ID：13312685
> 
> 赞同：0
> 
> 时间：2012-11-09T17:08:31.733
> 
> 标签：android, eclipse, android-layout, android-emulator

当我在 Android 模拟器上执行应用程序时，它工作正常，但是当我导出到 APK 并在我的手机上测试它时，它不起作用错误消息“不幸的是。ArduinoBlinkLED 已停止”。我不知道为什么！如何找出手机上的问题？

手机信息：

手机制造商 => 摩托罗拉 RAZR 和 Android 版本 => 4.0.4

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.yoursite.arduinoblinkled" android:versionCode="1"
    android:versionName="1.0">

     <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
        <uses-library android:name="com.google.android.maps" />
        <activity android:name=".ArduinoBlinkLEDActivity"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED" />
            </intent-filter>
            <meta-data android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
                android:resource="@xml/device_filter" />
        </activity>

        <uses-library android:name="com.android.future.usb.accessory"></uses-library>

    </application>
</manifest> 
```

这是 logcat 结果（错误）：

```
11-09 21:06:13.428: E/Netd(33): Unable to bind netlink socket: No such file or directory
11-09 21:06:13.428: E/Netd(33): Unable to open quota2 logging socket
11-09 21:06:22.347: E/PhonePolicy(37): Could not preload class for phone policy: com.android.internal.policy.impl.PhoneWindow$ContextMenuCallback
11-09 21:06:47.098: E/BatteryService(93): usbOnlinePath not found
11-09 21:06:47.098: E/BatteryService(93): batteryVoltagePath not found
11-09 21:06:47.107: E/BatteryService(93): batteryTemperaturePath not found
11-09 21:06:48.807: E/StrictMode(93): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
11-09 21:06:48.807: E/StrictMode(93): java.lang.Throwable: Explicit termination method 'close' not called
11-09 21:06:48.807: E/StrictMode(93):   at dalvik.system.CloseGuard.open(CloseGuard.java:184)
11-09 21:06:48.807: E/StrictMode(93):   at java.io.FileInputStream.<init>(FileInputStream.java:80)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.pm.UserManager.readUserList(UserManager.java:114)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.pm.UserManager.<init>(UserManager.java:81)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.pm.UserManager.<init>(UserManager.java:85)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.pm.PackageManagerService.<init>(PackageManagerService.java:923)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.pm.PackageManagerService.main(PackageManagerService.java:833)
11-09 21:06:48.807: E/StrictMode(93):   at com.android.server.ServerThread.run(SystemServer.java:163)
11-09 21:06:58.867: E/SoundPool(93): error loading /system/media/audio/ui/Lock.ogg
11-09 21:06:58.867: E/SoundPool(93): error loading /system/media/audio/ui/Unlock.ogg
11-09 21:06:59.077: E/EventHub(93): could not get driver version for /dev/input/mouse0, Not a typewriter
11-09 21:06:59.077: E/EventHub(93): could not get driver version for /dev/input/mice, Not a typewriter
11-09 21:06:59.487: E/CommandListener(33): Failed to open /proc/sys/net/ipv6/conf/wlan0/disable_ipv6: No such file or directory
11-09 21:06:59.487: E/WifiStateMachine(93): Failed to disable IPv6: java.lang.IllegalStateException: Unable to communicate to native daemon for disabling ipv6
11-09 21:06:59.587: E/MobileDataStateTracker(93): default: Ignoring feature request because could not acquire PhoneService
11-09 21:06:59.587: E/MobileDataStateTracker(93): default: Could not enable APN type "default"
11-09 21:07:10.258: E/ActivityThread(159): Failed to find provider info for com.android.inputmethod.latin.dictionarypack
11-09 21:07:10.268: E/BinaryDictionaryGetter(159): Could not find a dictionary pack
11-09 21:07:24.417: E/SoundPool(93): error loading /system/media/audio/ui/Effect_Tick.ogg
11-09 21:07:24.427: E/SoundPool(93): error loading /system/media/audio/ui/Effect_Tick.ogg
11-09 21:07:24.437: E/SoundPool(93): error loading /system/media/audio/ui/Effect_Tick.ogg
11-09 21:07:24.487: E/SoundPool(93): error loading /system/media/audio/ui/Effect_Tick.ogg
11-09 21:07:24.497: E/SoundPool(93): error loading /system/media/audio/ui/Effect_Tick.ogg
11-09 21:07:24.547: E/SoundPool(93): error loading /system/media/audio/ui/KeypressStandard.ogg
11-09 21:07:24.707: E/SoundPool(93): error loading /system/media/audio/ui/KeypressSpacebar.ogg
11-09 21:07:24.767: E/SoundPool(93): error loading /system/media/audio/ui/KeypressDelete.ogg
11-09 21:07:24.827: E/SoundPool(93): error loading /system/media/audio/ui/KeypressReturn.ogg
11-09 21:07:47.342: E/ActivityManager(93): Load: 6.0 / 1.65 / 0.56
11-09 21:07:47.342: E/ActivityManager(93): CPU usage from 0ms to 23052ms later:
11-09 21:07:47.342: E/ActivityManager(93):   30% 93/system_server: 22% user + 8.1% kernel / faults: 4812 minor 3 major
11-09 21:07:47.342: E/ActivityManager(93):   9.7% 145/com.android.systemui: 6% user + 3.6% kernel / faults: 3104 minor 3 major
11-09 21:07:47.342: E/ActivityManager(93):   9.6% 190/com.android.launcher: 5.6% user + 3.9% kernel / faults: 2512 minor 6 major
11-09 21:07:47.342: E/ActivityManager(93):   6.7% 247/android.process.acore: 5% user + 1.7% kernel / faults: 794 minor 1 major
11-09 21:07:47.342: E/ActivityManager(93):   5.8% 178/com.android.phone: 4% user + 1.7% kernel / faults: 881 minor
11-09 21:07:47.342: E/ActivityManager(93):   5.1% 269/app_process: 4.6% user + 0.4% kernel / faults: 2107 minor 1 major
11-09 21:07:47.342: E/ActivityManager(93):   4.9% 36/surfaceflinger: 1.8% user + 3% kernel / faults: 2 minor
11-09 21:07:47.342: E/ActivityManager(93):   3.3% 274/com.android.contacts: 2.2% user + 1% kernel / faults: 2467 minor 16 major
11-09 21:07:47.342: E/ActivityManager(93):   2.4% 205/com.google.process.gapps: 1.8% user + 0.5% kernel / faults: 450 minor
11-09 21:07:47.342: E/ActivityManager(93):   1.6% 37/zygote: 1.5% user + 0.1% kernel / faults: 239 minor
11-09 21:07:47.342: E/ActivityManager(93):   1.4% 45/adbd: 0.1% user + 1.3% kernel
11-09 21:07:47.342: E/ActivityManager(93):   1% 159/com.android.inputmethod.latin: 0.5% user + 0.4% kernel / faults: 336 minor
11-09 21:07:47.342: E/ActivityManager(93):   0.3% 35/rild: 0.2% user + 0.1% kernel
11-09 21:07:47.342: E/ActivityManager(93):   0.1% 30/servicemanager: 0% user + 0.1% kernel
11-09 21:07:47.342: E/ActivityManager(93):   0% 31/vold: 0% user + 0% kernel / faults: 13 minor
11-09 21:07:47.342: E/ActivityManager(93):   0.1% 92/logcat: 0% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):   0% 28/mmcqd: 0% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):  +0% 295/fsck_msdos: 0% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):  +0% 328/com.android.defcontainer: 0% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93): 100% TOTAL: 67% user + 32% kernel + 0.2% softirq
11-09 21:07:47.342: E/ActivityManager(93): CPU usage from 19702ms to 21344ms later:
11-09 21:07:47.342: E/ActivityManager(93):   24% 93/system_server: 15% user + 9% kernel / faults: 347 minor
11-09 21:07:47.342: E/ActivityManager(93):     13% 108/ActivityManager: 7.8% user + 6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     7.2% 314/Error dump: sys: 5.4% user + 1.8% kernel
11-09 21:07:47.342: E/ActivityManager(93):     3% 100/Compiler: 2.4% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.8% 243/Binder Thread #: 1.2% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.2% 93/system_server: 1.2% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.2% 105/Binder Thread #: 0.6% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.2% 172/Binder Thread #: 1.2% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.2% 222/Binder Thread #: 1.2% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.2% 244/Binder Thread #: 1.2% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 104/Binder Thread #: 0% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 107/er.ServerThread: 0.6% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 111/PackageManager: 0% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 240/Binder Thread #: 0.6% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 245/Binder Thread #: 0.6% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 246/Binder Thread #: 0.6% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 337/Error dump: sys: 0% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):   21% 247/android.process.acore: 18% user + 2.6% kernel / faults: 127 minor
11-09 21:07:47.342: E/ActivityManager(93):     14% 262/Binder Thread #: 14% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     6.9% 249/GC: 5.9% user + 1% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1% 254/Compiler: 0.5% user + 0.5% kernel
11-09 21:07:47.342: E/ActivityManager(93):   12% 178/com.android.phone: 8.5% user + 3.9% kernel / faults: 102 minor
11-09 21:07:47.342: E/ActivityManager(93):     11% 178/m.android.phone: 8.5% user + 3.4% kernel
11-09 21:07:47.342: E/ActivityManager(93):     2.8% 186/Compiler: 1.7% user + 1.1% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.1% 242/RILReceiver: 0.5% user + 0.5% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.5% 233/RILSender: 0.5% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):   10% 145/com.android.systemui: 6.9% user + 3.4% kernel / faults: 78 minor
11-09 21:07:47.342: E/ActivityManager(93):     9.2% 145/ndroid.systemui: 5.7% user + 3.4% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.7% 152/Compiler: 1.1% user + 0.5% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.5% 157/Binder Thread #: 0.5% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):   10% 190/com.android.launcher: 4.7% user + 5.9% kernel / faults: 18 minor
11-09 21:07:47.342: E/ActivityManager(93):     9.4% 190/ndroid.launcher: 4.1% user + 5.3% kernel
11-09 21:07:47.342: E/ActivityManager(93):   1.9% 36/surfaceflinger: 0.4% user + 1.4% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.9% 36/surfaceflinger: 0.9% user + 0.9% kernel
11-09 21:07:47.342: E/ActivityManager(93):     1.4% 64/SurfaceFlinger: 0.4% user + 0.9% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.4% 66/Binder Thread #: 0% user + 0.4% kernel
11-09 21:07:47.342: E/ActivityManager(93):   0.9% 35/rild: 0.9% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.9% 61/rild: 0.9% user + 0% kernel
11-09 21:07:47.342: E/ActivityManager(93):   1.2% 45/adbd: 0% user + 1.2% kernel
11-09 21:07:47.342: E/ActivityManager(93):     0.6% 45/adbd: 0% user + 0.6% kernel
11-09 21:07:47.342: E/ActivityManager(93):   0.5% 328/com.android.defcontainer: 0% user + 0.5% kernel / faults: 3 minor
11-09 21:07:47.342: E/ActivityManager(93):     0.5% 341/Binder Thread #: 0% user + 0.5% kernel
11-09 21:07:47.342: E/ActivityManager(93): 100% TOTAL: 60% user + 39% kernel
11-09 21:07:55.601: A/NetworkStats(93): problem reading network stats
11-09 21:07:55.601: A/NetworkStats(93): java.lang.IllegalStateException: problem parsing idx 1
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:300)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.NetworkManagementService.getNetworkStatsUidDetail(NetworkManagementService.java:1282)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.performPollLocked(NetworkStatsService.java:831)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.updateIfacesLocked(NetworkStatsService.java:743)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.updateIfaces(NetworkStatsService.java:721)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.access$000(NetworkStatsService.java:128)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService$8.handleMessage(NetworkStatsService.java:1633)
11-09 21:07:55.601: A/NetworkStats(93):     at android.os.Handler.dispatchMessage(Handler.java:95)
11-09 21:07:55.601: A/NetworkStats(93):     at android.os.Looper.loop(Looper.java:137)
11-09 21:07:55.601: A/NetworkStats(93):     at android.os.HandlerThread.run(HandlerThread.java:60)
11-09 21:07:55.601: A/NetworkStats(93): Caused by: java.io.FileNotFoundException: /proc/net/xt_qtaguid/stats: open failed: ENOENT (No such file or directory)
11-09 21:07:55.601: A/NetworkStats(93):     at libcore.io.IoBridge.open(IoBridge.java:406)
11-09 21:07:55.601: A/NetworkStats(93):     at java.io.FileInputStream.<init>(FileInputStream.java:78)
11-09 21:07:55.601: A/NetworkStats(93):     at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:269)
11-09 21:07:55.601: A/NetworkStats(93):     ... 9 more
11-09 21:07:55.601: A/NetworkStats(93): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
11-09 21:07:55.601: A/NetworkStats(93):     at libcore.io.Posix.open(Native Method)
11-09 21:07:55.601: A/NetworkStats(93):     at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
11-09 21:07:55.601: A/NetworkStats(93):     at libcore.io.IoBridge.open(IoBridge.java:390)
11-09 21:07:55.601: A/NetworkStats(93):     ... 11 more
11-09 21:07:57.801: A/NetworkStats(93): problem reading network stats
11-09 21:07:57.801: A/NetworkStats(93): java.lang.IllegalStateException: problem parsing idx 1
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:300)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.NetworkManagementService.getNetworkStatsUidDetail(NetworkManagementService.java:1282)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.performPollLocked(NetworkStatsService.java:831)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.updateIfacesLocked(NetworkStatsService.java:743)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.updateIfaces(NetworkStatsService.java:721)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService.access$000(NetworkStatsService.java:128)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.server.net.NetworkStatsService$1.onReceive(NetworkStatsService.java:612)
11-09 21:07:57.801: A/NetworkStats(93):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
11-09 21:07:57.801: A/NetworkStats(93):     at android.os.Handler.handleCallback(Handler.java:605)
11-09 21:07:57.801: A/NetworkStats(93):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-09 21:07:57.801: A/NetworkStats(93):     at android.os.Looper.loop(Looper.java:137)
11-09 21:07:57.801: A/NetworkStats(93):     at android.os.HandlerThread.run(HandlerThread.java:60)
11-09 21:07:57.801: A/NetworkStats(93): Caused by: java.io.FileNotFoundException: /proc/net/xt_qtaguid/stats: open failed: ENOENT (No such file or directory)
11-09 21:07:57.801: A/NetworkStats(93):     at libcore.io.IoBridge.open(IoBridge.java:406)
11-09 21:07:57.801: A/NetworkStats(93):     at java.io.FileInputStream.<init>(FileInputStream.java:78)
11-09 21:07:57.801: A/NetworkStats(93):     at com.android.internal.net.NetworkStatsFactory.readNetworkStatsDetail(NetworkStatsFactory.java:269)
11-09 21:07:57.801: A/NetworkStats(93):     ... 11 more
11-09 21:07:57.801: A/NetworkStats(93): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
11-09 21:07:57.801: A/NetworkStats(93):     at libcore.io.Posix.open(Native Method)
11-09 21:07:57.801: A/NetworkStats(93):     at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
11-09 21:07:57.801: A/NetworkStats(93):     at libcore.io.IoBridge.open(IoBridge.java:390)
11-09 21:07:57.801: A/NetworkStats(93):     ... 13 more
11-09 21:08:01.461: E/ActivityThread(380): Failed to find provider info for com.android.inputmethod.latin.dictionarypack
11-09 21:08:01.501: E/BinaryDictionaryGetter(380): Could not find a dictionary pack
11-09 21:08:05.551: E/DefaultVoicemailNotifier(274): No voicemails to notify about: clear the notification. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:10:50.250

如果没有 logcat 结果，几乎不可能给出最准确的诊断。但是，如果您不愿意/不能发布 logcat，这是在黑暗中刺伤

我认为这是您的设备可能是 android 2.3.3 并且不支持某些 USB 功能的事实，请参阅：

[http://developer.android.com/guide/topics/connectivity/usb/accessory.html](http://developer.android.com/guide/topics/connectivity/usb/accessory.html)

并在另一部手机上尝试，并准确说明您需要什么

此外，使用 eclipse、刷新、清理项目并重新构建和运行。（对于奇怪的错误总是好的做法）

# c++ - 字符串迭代器不可取消引用的 C++ 问题

> ID：13312686
> 
> 赞同：3
> 
> 时间：2012-11-09T17:08:32.820
> 
> 标签：c++, string, visual-c++, iterator

我必须遗漏一些简单的东西......但是它在声明 myDrawing 的行上给出了这个错误。谢谢你的帮助！

```
void buff::readFile()
{
     ifstream myDrawing("SavedDrawing.txt");
     file = "";
     char temp;
     int i = 0;
     if (myDrawing.is_open())
     {
         while(myDrawing.eof() == false)
         {
              myDrawing >> temp;
              file.push_back(temp);
         };
         myDrawing.close();
         load();
         return;
     }
     else{return;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:37:15.187

在我看来，这听起来像是您忘记包含使编译器感到困惑的 <iostream> 或 <fstream> 。

如果这不起作用，请尝试将“ifstream”更改为“std::ifstream”，看看是否会收到更好的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:21:03.863

试试这个也许：

```
void buff::readFile() {
    ifstream myDrawing("SavedDrawing.txt", ifstream::in);
    char temp;
    while (myDrawing.good()) {
        cout << (char) myDrawing.get();
    }
    myDrawing.close();
    load();
} 
```

# java - OpenGL obj 文件无法在 JOGL 中正确渲染

> ID：13312688
> 
> 赞同：0
> 
> 时间：2012-11-09T17:08:38.700
> 
> 标签：java, opengl, graphics, jogl, wavefront

我正在使用 JOGL 在 Java 中构建一个简单的**Wavefront Obj 文件加载器和渲染器。**然而，每当我加载一个简单的兔子测试网格时，它都会以一种有问题的方式渲染，我不知道是什么原因造成的。我只是使用几何顶点和法线，没有纹理或材料。

![经历过的故障](../Images/fb40d4b2d48c39a24852852443e3a82b.png)

![该故障的另一个角度](../Images/600fc95eb0b44085c0414823e0aa1239.png)

以下是该`init()`方法的 GL 初始化代码：

```
gl.setSwapInterval(1);
gl.glClearColor(0.2f, 0.2f, 0.2f, 1.0f);        
gl.glEnable(GL2.GL_DEPTH_TEST);
gl.glDepthFunc(GL2.GL_LESS);
gl.glEnable(GL2.GL_CULL_FACE);
gl.glCullFace(GL2.GL_BACK);
gl.glShadeModel(GL2.GL_SMOOTH);
gl.glClearDepth(1.0d); 
```

这是我用来渲染模型的方法（目前是固定管道）：

```
 gl.glBegin(GL2.GL_TRIANGLES);
    for(Face face : master.faces) {
        for(int i = 0; i < face.points.length; i++) {
            gl.glNormal3f(face.normals[i].x, face.normals[i].y, face.normals[i].z);             
            gl.glVertex3f(face.points[i].x, face.points[i].y, face.points[i].z);
        }
    }
    gl.glEnd(); 
```

`master`包含*所有*面和顶点的主要“组”在哪里。我已经检查过了——所有东西都进入了主组，并且 glNormal3f 和 glVertex3f 被调用为每个三角形中每个需要的顶点。

谁能说出导致这些故障的原因？

## 编辑1：

这是我用来设置投影和模型视图矩阵的代码：

```
float aspect = (float) width / (float) height;

gl.glMatrixMode(GL2.GL_PROJECTION);
gl.glLoadIdentity();

glu.gluPerspective(60.0f, aspect, 0.01f, 100.0f);
glu.gluLookAt(2.0f, 1.0f, 1.5f,
        0.0f, 0.0f, 0.0f,
        0.0f, 1.0f, 0.0f);

gl.glMatrixMode(GL2.GL_MODELVIEW);
gl.glLoadIdentity(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:16:30.803

尝试删除 gl.glDepthFunc(GL2.GL_LESS); gl.glClearDepth(1.0d);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:50:02.343

好吧，这似乎是由我的对象加载器中的一个愚蠢的小错误引起的。在解析我的输入顶点时，它会切掉几何顶点的所有 x 坐标的第一个字符。这不会影响正值，因为它们都被归一化 和`0.43 = .43`，但它弄乱了所有负值，导致它们被解释为正值。

我花了一段时间才弄清楚这一点，但我最终找到了它，它只是表明最微小的错误可能非常难以追踪。

# jquery - jQuery动画完成后在新窗口中打开herf

> ID：13312690
> 
> 赞同：0
> 
> 时间：2012-11-09T17:08:43.450
> 
> 标签：jquery, jquery-animate

单击 img 链接后，我有一个简单的幻灯片动画。客户端请求在新窗口/选项卡中打开链接。我尝试过`window.open`或`window.location = href;`使用该`var href = this.href;`套装的每个选项都不起作用。

```
$("#coatings").click(function(event) {
         event.preventDefault();
         var href = this.href;

         $("#sqeeguee_rightLink").fadeIn(100).animate({
            right:'-=450px'                 
         }, 2000,
         function() {
             window.location = href;
         });
     }); 
```

HTML：

```
<div id="sqeeguee_rightLink"></div>
        <a href="url here" target="_blank" id="coatings"><img src="coatings.jpg" width="456" height="592" alt="" /></a> 
```

任何输入都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:12:58.880

您引用的代码可能“不起作用”，因为动画完成后，新 URL 会在同一窗口中打开。您已经取消了会打开新窗口的事件（通过调用`event.preventDefault()`）。

您的尝试失败了，因为现代浏览器只允许 JavaScript 代码在处理用户启动的事件（例如 a ）*期间*`window.open`打开窗口。您的动画由用户启动的事件启动，但随后允许事件处理程序完成，因此当您尝试执行时，就浏览器而言，您正在打开一个垃圾邮件窗口，其弹出块阻止它正在发生。:-)*`click``window.open`*

 *如果您的目标是在当前窗口上显示动画，然后在完成后打开一个新窗口，恐怕没有干净的方法可以做到这一点。您*可能*可以允许打开原始的新窗口，但让它进入后台（“pop-under”），然后在动画完成后，将其带到前台。不过，我不能将其视为出色的用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:21:19.823

我相信您的问题是未正确捕获 href，而不是您想要打开链接的方式。

如果您需要打开单击链接的 href 属性（包装图像），请尝试以下操作：

```
var href = $(this).attr('href'); 
```

在您的事件处理程序方法中。

抢*

# plot - 从单独的窗口控制 matplotlib 图

> ID：13312691
> 
> 赞同：0
> 
> 时间：2012-11-09T17:08:44.587
> 
> 标签：plot, pyqt4

我正在尝试创建最简单的示例，从另一个窗口中的按钮和功能控制一个窗口中的绘图。我知道我需要在绘图窗口中添加更多内容，因此，我需要使用 QT 窗口创建我的绘图图。

这是我到目前为止所拥有的：

我的控制窗口：

```
import sys
from PyQt4.QtCore import (QSize, SIGNAL)
from PyQt4.QtGui import (QApplication, QDialog, QPushButton, QVBoxLayout)
import PlotWindow

class Window(QDialog):

  def __init__(self, parent=None):
    super(Window, self).__init__(parent)

    self.pushButton1 = QPushButton()
    self.pushButton1.setMaximumSize(QSize(110, 24))
    self.pushButton1.setObjectName("pushButton1")
    self.pushButton1.setText("Open Plot")
    self.pushButton2 = QPushButton()
    self.pushButton2.setMaximumSize(QSize(110, 24))
    self.pushButton2.setObjectName("pushButton2")
    self.pushButton2.setText("Update Plot")
    layout = QVBoxLayout()
    layout.addWidget(self.pushButton1)
    layout.addWidget(self.pushButton2)
    self.setLayout(layout)
    self.setWindowTitle("Plot Control")

    self.connect(self.pushButton1,SIGNAL("clicked()"),self.plotNew)

  def plotNew(self):
    print "new plot window"
    self.dialog = PlotWindow.PlotWindow()
    self.dialog.show()

app = QApplication(sys.argv)
form = Window()
form.open()
app.exec_() 
```

我的绘图窗口：

```
import matplotlib
import numpy as np
from PyQt4 import QtGui
from matplotlib.lines import Line2D
import matplotlib.pyplot as plt
import matplotlib.animation as animation

class PlotWindow(QtGui.QDialog):
  def __init__(self, parent=None):
    super(PlotWindow, self).__init__(parent)
    self.fig = plt.figure()
    self.ax = self.fig.add_subplot(111)
    plt.draw() 
```

显然，我的绘图窗口是我遇到最大问题的地方。我已经浏览了很多示例，但似乎没有一个显示如何将绘图放置在另一个窗口中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:22:36.913

好吧，我可以回答我自己的部分问题，但我想评论一下这是否是最好的方法。下面的代码显示了我为调出第二个窗口所做的更改，里面有一个绘图。

```
import sys
from PyQt4 import QtGui
import numpy as np
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.backends.backend_qt4agg import NavigationToolbar2QT as NavigationToolbar

class PlotCanvas(FigureCanvas):
  def __init__(self, parent):
    self.fig = Figure()
    self.axes = self.fig.add_subplot(111)
#        self.x = np.arange(0.0,0.3,0.01)
#        self.y = np.cos(2*np.pi*self.x)
#        self.axes.plot(self.x,self.y)
    FigureCanvas.__init__(self, self.fig)
    self.setParent(parent)
 FigureCanvas.setSizePolicy(self,QtGui.QSizePolicy.Expanding,QtGui.QSizePolicy.Expanding)

class PlotWindow(QtGui.QMainWindow):
  def __init__(self):
    QtGui.QMainWindow.__init__(self)
    self.setWindowTitle("Plot Figure")
    self.main_widget = QtGui.QWidget(self)
    vbl = QtGui.QVBoxLayout(self.main_widget)
    qmc = PlotCanvas(self.main_widget)
    ntb = NavigationToolbar(qmc, self.main_widget)
    vbl.addWidget(qmc)
    vbl.addWidget(ntb)
    self.main_widget.setFocus()
    self.setCentralWidget(self.main_widget) 
```

我仍然需要从另一个窗口设置绘图数据的帮助。谢谢

# mysql - 使用连接删除 mysql 字段中的零

> ID：13312694
> 
> 赞同：0
> 
> 时间：2012-11-09T17:09:21.367
> 
> 标签：mysql

> 代码 = 00000000005555
> 
> 第二个选项代码 = 00000000000555

嗨，我正在尝试找出与 php 的 ltrim() 相同的功能

```
SELECT * FROM db1.stock JOIN db2.prodinfo ON replace(db2.prodinfo.code,0000000000,'') = replace(db1.stock.code,0000000000,'') WHERE db1.stock.InvNo ='12' and db2.prodinfo.Cat = 'super' 
```

> 我朗姆酒这个暂时的。因为在上面的示例中，零可能是增加和减少。我只想在此查询中删除零

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:10:59.350

尝试将其转换为数字，

```
SELECT * 
FROM db1.stock JOIN db2.prodinfo ON 
          CAST(db2.prodinfo.code AS SIGNED) = CAST(db1.stock.code AS SIGNED) 
WHERE db1.stock.InvNo ='12' and db2.prodinfo.Cat = 'super' 
```

或者

```
SELECT * 
FROM db1.stock JOIN db2.prodinfo ON 
CAST(db2.prodinfo.code AS DECIMAL(15,0)) = CAST(db1.stock.code AS AS DECIMAL(15,0)) 
WHERE db1.stock.InvNo ='12' and db2.prodinfo.Cat = 'super' 
```

# css - CSS获取浮动DIV以拉伸到窗口高度

> ID：13312695
> 
> 赞同：2
> 
> 时间：2012-11-09T17:09:22.927
> 
> 标签：css, css-float

多年来第一次用 CSS 胡思乱想，我有一种讨厌的感觉，我把自己逼到了一个角落。

我用这个创建了一个 3 列浮动布局：

```
* {
    margin: 0;
    padding: 0;
    font-family: "Trebuchet MS", Verdana, Arial, sans-serif;
}

    #wrapper {
        width: 960px;
        background: silver;
        margin: 0 auto;
    }

#column-left {
    width: 240px;
    float: left;
    background: #f4d2d4;
    padding-top: 36px;
}

#column-center {
    margin-top: 41px;
    margin-left: 34px;
    margin-right: 34px;
    width: 492px;
    float: left;
    background: white;
}

#column-right {
    width: 160px;
    float: left;
    background: white;
    margin-top: 49px;
} 
```

如您所见，左侧列具有彩色背景。但它不会延伸到页面底部，只是为了覆盖内容。我需要它一直向下伸展。

切换到绝对位置或固定位置会破坏 3 列布局。使用 height: 100% 必须一直回到身体，这完全搞砸了一切。有没有简单的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T17:42:02.923

Dan Cederholm 有一个很好的方法，可以使用“仿柱”技术使其看起来像柱子延伸。我不会重新编写它，而是将其链接在这里：

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

如果您决定使用流畅的布局，Chris Coyier 还写了一篇关于不同人解决此问题的方法的文章：

[http://css-tricks.com/fluid-width-equal-height-columns/](http://css-tricks.com/fluid-width-equal-height-columns/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:11:22.940

添加`height:100%`到`body`和`html`您的列。

# ruby - 如何在 emacs 24 中安装 el4r？

> ID：13312698
> 
> 赞同：1
> 
> 时间：2012-11-09T17:09:30.430
> 
> 标签：ruby, emacs

我试图安装 el4r，这是一种[EmacsRuby](http://emacswiki.org/emacs/EmacsLispForRuby)。

我基本上按照[这里的描述安装了所有东西](http://www.rubyist.net/~rubikitch/computer/el4r/index.en.html#3)

**我的设置**

我使用带有 rbenv 的 Ubuntu 12.10 默认提供的 emacs 24，我的默认 ruby​​ 版本是 ruby​​ 1.9.3p286（2012-10-12 修订版 37165）[x86_64-linux]

当我测试所有内容时，我有一个简约的 .emacs 文件，其中包含以下文本

```
;; Source: http://marc-bowes.com/2012/03/10/rbenv-with-emacs.html
;; Setting rbenv path
(setenv "PATH" (concat (getenv "HOME") "/.rbenv/shims:"
               (getenv "HOME") "/.rbenv/bin:"
               (getenv "PATH")))
(setq exec-path (cons (concat (getenv "HOME") "/.rbenv/shims")
              (cons (concat (getenv "HOME") "/.rbenv/bin")
                exec-path)))

;; Beginning of the el4r block:
;; RCtool generated this block automatically. DO NOT MODIFY this block!
(add-to-list 'load-path "/home/mars/.rbenv/versions/1.9.3-p286/share/emacs/site-lisp")
(require 'el4r)
(el4r-boot)
;; End of the el4r block.
;; User-setting area is below this line. 
```

当我使用 --debug-init 启动 emacs 时，出现以下错误：

```
Debugger entered--Lisp error: (el4r-ruby-error)
  signal(el4r-ruby-error nil)
  (condition-case err (eval (setq expr (read result))) (el4r-ruby-error (signal (quote el4r-ruby-error) nil)) (error (setq el4r-error-lisp-expression expr) (signal (car err) (cdr err))))
  (let ((result (el4r-recv)) expr) (while (eq (length result) 0) (el4r-wait-expr) (setq result (el4r-recv))) (condition-case err (eval (setq expr (read result))) (el4r-ruby-error (signal (quote el4r-ruby-error) nil)) (error (setq el4r-error-lisp-expression expr) (signal (car err) (cdr err)))))
  el4r-get()
  (let ((result (el4r-get))) (el4r-leave-call) result)
  el4r-ruby-eval("el4r_boot")
  el4r-boot()
  eval-buffer(#<buffer  *load*> nil "/home/mars/.emacs" nil t)  ; Reading at buffer position 567
  load-with-code-conversion("/home/mars/.emacs" "/home/mars/.emacs" t t)
  load("~/.emacs" t t)
  #[0 "\205\262 
```

日志文件 /tmp/el4r-mars.13757.log 如下所示：

```
2012-11-09 18:00:58 +0100:Starting, waiting for expression.
2012-11-09 18:00:58 +0100:Error: cannot load such file -- test/unit/ui/console/testrunner (LoadError)
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:846:in `instance_eval'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:491:in `require'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:889:in `el4r_install_test_unit_testrunner'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:882:in `el4r_install_unittest_stuff'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:877:in `el4r_install_builtin_functions'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:723:in `el4r_boot__noinit'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:735:in `el4r_boot'
  from (eval):1:in `el4r_ruby_eval'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:846:in `instance_eval'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:846:in `el4r_ruby_eval'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:791:in `el4r_get'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:768:in `block in el4r_wait_expr'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:835:in `el4r_with_call'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:765:in `el4r_wait_expr'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:760:in `el4r_wait_expr_loop'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:1094:in `<main>'
2012-11-09 18:01:03 +0100:wrong number of arguments (1 for 0) (ArgumentError)
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:1084:in `block in <main>'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:760:in `call'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:760:in `eof?'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:760:in `el4r_wait_expr_loop'
  from /home/mars/.rbenv/versions/1.9.3-p286/bin/el4r-instance:1094:in `<main>'
2012-11-09 18:01:03 +0100:Exiting. 
```

我不明白这个问题以及如何解决它。[这是类似的问题](https://stackoverflow.com/questions/12399894/how-do-i-start-using-xiki-in-emacs)，但它是针对 xiki 的。我仍然尝试了没有成功的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:59:15.097

我让它正常工作。

基本上@Tass 是对的。最初的 el4r 项目似乎已经死了，但似乎有一些新的分叉可以工作。这很令人困惑，因为文档真的很奇怪。新项目安装例程使用旧脚本，但您不能完全遵循它们。

**安装**

以下是您必须遵循的步骤才能使其正常工作。

```
# Install http://rubygems.org/gems/trogdoro-el4r, but do not follow instructions on page
# Do not download the original el4r sources and files.
gem install trogdoro-el4r
# Go to the gem directory. For me it is:
cd /home/mars/.rbenv/versions/1.9.3-p286/lib/ruby/gems/1.9.1/gems/trogdoro-el4r-1.0.7
# Run the "original" setup commands
ruby setup.rb
cd bin
ruby -S el4r-rctool -p
ruby -S el4r-rctool -i
# Add `el4r_load "el4r-mode.rb"` to ~/.el4r/init.rb or execute this command
echo 'el4r_load "el4r-mode.rb"' >> ~/.el4r/init.rb
# Fix your .emacs.el or .emacs.d by adding the code from the newly generated ~/.emacs file
# Use the ruby you have installed the gem with. In my case rbenv ruby 1.9.3-p286
# You need to re-install el4r if you change your ruby version 
```

**配置**

对于 rbenv 你必须从问题中添加片段：

```
;; Source: http://marc-bowes.com/2012/03/10/rbenv-with-emacs.html
;; Setting rbenv path
(setenv "PATH" (concat (getenv "HOME") "/.rbenv/shims:"
               (getenv "HOME") "/.rbenv/bin:"
               (getenv "PATH")))
(setq exec-path (cons (concat (getenv "HOME") "/.rbenv/shims")
              (cons (concat (getenv "HOME") "/.rbenv/bin")
                exec-path)))

;; Beginning of the el4r block:
;; RCtool generated this block automatically. DO NOT MODIFY this block!
(add-to-list 'load-path "/home/mars/.rbenv/versions/1.9.3-p286/share/emacs/site-lisp")
(require 'el4r)
(el4r-boot)
;; End of the el4r block.
;; User-setting area is below this line. 
```

**测试是否一切正常**

将以下行添加到您的 ~/el4r/init.rb 文件中

```
defun(:stackoverflow_ruby_func) { |a|
  insert_string("It works!: '#{a}'"); newline
} 
```

启动 emacs 并到您的*暂存*缓冲区。

插入`(stackoverflow-ruby-func 42)`和评估。您的缓冲区应如下所示：

```
(stackoverflow-ruby-func 42)It works!: '42' 
```

更多信息在 doc/ 和 test/ 下的 gem 目录中。

# objective-c - 具有类层次结构的 Objective C Singleton

> ID：13312700
> 
> 赞同：0
> 
> 时间：2012-11-09T17:09:33.207
> 
> 标签：objective-c, class, inheritance, singleton, hierarchy

我有一个类 Parent 和一个类 Child。Child 派生自 Parent。我只实例化 Child 类，父级永远不会直接初始化，只有子级。我至少需要父母成为单身人士。如果这不起作用，那么作为单身人士的孩子也可以。我尝试了以下方法，但这并没有将其更改为单例：

```
static MySingleton *sharedSingleton;

+ (void)initialize
{
    static BOOL initialized = NO;
    if(!initialized)
    {
        initialized = YES;
        sharedSingleton = [[MySingleton alloc] init];
    }
} 
```

Child 类调用 [super init] 来实例化 Parent。你能帮我吗？

编辑：我为我的解决方案（架构）添加了一些背景信息：我有一个连接到 Web 服务的 Web 服务客户端。我有一个基类（父类），其中包含有关连接的信息（经过身份验证、如何连接等），并且我有从这个基类派生的不同子类。对不同子类的需求是一个子类负责一组 Web 服务逻辑，另一个子类负责另一组 Web 服务逻辑。问题是，我希望连接信息是单例的（因为它们都只使用一个连接，而不是很多）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:29:06.440

一个更线程安全的选项是这样的：

```
+(MySingleton *)singleton {
    static dispatch_once_t pred;
    static MySingleton *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[MySingleton alloc] init];
    });
    return shared;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:13:31.233

把这一行 static BOOL initialized = NO; 在这条线下面静态 MySingleton *sharedSingleton; 像这样

```
static MySingleton *sharedSingleton;
static BOOL initialized = NO;
+ (void)initialize
{
  if(!initialized)
  {
     initialized = YES;
     sharedSingleton = [[MySingleton alloc] init];
  }
} 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:16:05.140

通常的模式是：

```
static MySuperclass *singleton = nil;
+ (void)initialize {
    if (self == [MySuperclass class]) {
        singleton = [[MySubclassProbabl alloc] init];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:29:56.937

与其他答案有点不同，这是创建单例的现代方式

```
static MySingleton * volatile sharedInstance = nil;

+(MySingleton*) sharedInstance {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        sharedInstance = [[MySingleton alloc] init];
    });

    return sharedInstance;
} 
```

此外，通过您的问题的措辞和单例的预期用途（具有父/子关系），我想说您必须重新考虑您的架构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-09T18:19:39.060

如果我正确理解您的要求，那么您的要求没有意义，那么您似乎将*关系*与*继承*混淆了。如果你有：

```
@interface Parent : NSObject ...
@interface Child : Parent 
```

那么你创造的*每* *一个*也是它自身不可分割的一部分，没有办法从中分离——你只有一个对象。使用继承不会为您提供具有单个共享父级的多个子级。`Child` *`Parent``Parent``Child`*

 *如果您希望许多孩子共享一个单亲，那么您需要您的`Child`班级*有一个* `Parent`. 例如：

```
@interface Parent : NSObject ...

@interface Child : NSObject

@property (readonly) Parent *myParent;

- (id) initAsChildOf:(Parent *)parent;

...

@end 
```

用作：

```
Parent *theParent = [Parent new];
Child *firstChild = [[Child alloc] initAsChildOf:theParent];
Child *secondChild = [[Child alloc] initAsChildOf:theParent]; 
```

如果你希望你可以创建`Parent`一个单例类（只有一个实例可能），或者一个共享实例类（一个共享实例，其他实例可能）。

使用继承，而不是关系，很难（但并非不可能；-)）从真正的单例类派生，如果这样做，派生类本身就是单例。

您可以从*共享实例*类派生；并且您可以编写该类（再次困难），以便您可以拥有一个且只有一个实例，该实例不是派生类实例的不可分割的一部分。

注意：到目前为止，其他答案都为您提供了生成*共享实例*类的代码，*真正的单例类*涉及更多一些（您可以在 Apple 的文档中找到代码），并且通常共享实例类就足够了。

HTH，我并没有完全误解你的问题！*

# unit-testing - 当 TDD 测试发现需要的新功能也需要测试时该怎么办？

> ID：13312705
> 
> 赞同：3
> 
> 时间：2012-11-09T17:10:32.767
> 
> 标签：unit-testing, tdd

**[编辑]：** [单击此处](https://softwareengineering.stackexchange.com/questions/175302/what-to-do-when-tdd-tests-reveal-new-functionality-that-is-needed-that-also-need)在相应网站上查看问题。

当你正在编写一个测试并且你需要通过测试并且你意识到你需要一个额外的功能应该被分离到它自己的功能中时，你会怎么做？这个新功能也需要测试，但是 TDD 循环说让测试失败，让它通过然后重构。如果我正处于试图通过测试的步骤，我不应该开始另一个失败的测试来测试我需要实现的新功能。

例如，我正在编写一个具有函数**WillCollideWith( *LineSegment* )**的点类：

```
public class Point {
    // Point data and constructor ...

    public bool CollidesWithLine(LineSegment lineSegment) {
        Vector PointEndOfMovement = new Vector(Position.X + Velocity.X,
                                               Position.Y + Velocity.Y);
        LineSegment pointPath = new LineSegment(Position, PointEndOfMovement);
        if (lineSegment.Intersects(pointPath)) return true;
        return false;
    }
} 
```

当我意识到我需要一个**LineSegment.Intersects(** ***LineSegment*** **)**函数时，我正在为**CollidesWithLine编写测试。**但是，我是否应该停止我在测试周期中正在做的事情来创建这个新功能？这似乎打破了“红、绿、重构”的原则。

 ***我是否应该在CollidesWithLine**函数内部编写检测 lineSegments Intersect 的代码并在它工作后对其进行重构？这在这种情况下会起作用，因为我可以从**LineSegment**访问数据，但是在这种数据是私有的情况下呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:00:37.363

如果你按照 Kent Beck 在他的书中如何定义 TDD 来信，当你遇到一些你还需要测试的东西时，在一张纸上记下它（他称之为测试列表） ) 然后专注于当前的测试。肯特建议你一次只做一项测试。

从测试优先的角度来看，您应该专注于使测试通过，它有几个选项：

1.  在当前方法中内联编写 Intersects 的实现。“绿色”意味着工作，而不是漂亮。一旦工作，重构代码和测试。

2.  拔掉它。将测试替身（模拟）传递给可以模拟合约的方法。

3.  假装。当你遇到你需要的方法时，为其他测试做笔记，然后编写一个基本的实现（例如“return true”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:02:52.890

我建议你最好的选择是模拟它，这样你就可以留在你的工作流程中，并且一次也可以测试有限数量的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:20:19.603

我喜欢使用`[Ignore]`属性来标记需要注意的测试（例如，当它没有完成时）。此类测试将不会运行。忽略的测试在测试运行器中突出显示（通常为黄色或橙色）。即使所有其他测试都通过了，当有任何被忽略的测试时，您也不会看到绿线。这确保不会忘记测试。*

# sql - 单个 TRANSACTION 中的循环行为

> ID：13312706
> 
> 赞同：1
> 
> 时间：2012-11-09T17:10:38.650
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有以下结构：

```
PROCEDURE A

BEGIN TRANSACTION
    WHILE <loops 20 times>
        BEGIN

         --10 minute script     
         --INSERT a single record into table X

        END
COMMIT TRANSACTION

PROCEDURE B - This is run via the agent every 10 minutes it scans table X for any new entries and if it finds any it sends an e-mail 
```

如果一切正常，则 20 条新记录将添加到表 X - 如果所有 20 个循环都成功，这些记录是否只会添加到 X 中？如果循环进行到第 5 次迭代，那么前 4 条记录是否会被提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:18:10.600

好吧，保持交易开放 10 分钟是邪恶的。在 10 分钟内持有 20 次交易是……好吧，20 倍的邪恶。长寿命事务非常非常具有破坏性，它们会在锁定和阻塞、日志使用和增长、恢复问题等方面造成严重问题。永远不要设计任何事务超过*秒*的东西。是时候重新审视你试图解决的基本问题并提出一个完全不同的解决方案了。

至于核心问题：事务可以在这样的迭代中使用保存点，因此即使迭代 5 遇到问题并且必须回滚，迭代 1-4 也会被保存（提交）。诀窍是回滚到保存点，而不是完全回滚。[遵循与异常处理和嵌套事务](http://rusanu.com/2009/06/11/exception-handling-and-nested-transactions/)中相同的模式。请注意，并非*每个*错误都是可恢复的，某些错误会强制完全回滚（例如，死锁是一个典型示例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:21:59.810

这里的答案不是 100% 直截了当：

当它们在每个循环结束时插入时，它们将被添加到内存中的数据页中，如果另一个进程使用 READ UnCOMITTED 或 NO LOCK 运行，那么它们将能够看到这些插入。这称为脏读，READ COMMITED 的默认隔离级别可以防止这种情况，但这也意味着事务将被阻止在此级别下读取它，直到循环完成。

但是，SQL Server 可以随时选择将脏页刷新到磁盘。我的意思是在交易结束之前、交易结束时或交易完成之后。

What is certain, is that the writes will be flushed to the transaction log at the end of the transaction, before the commit. This is how SQL Server gauruntees data will not be lost in the event of the database going down. This is called WAL or Write Ahead Logging.

# php - 未找到自定义核心控制器

> ID：13312708
> 
> 赞同：1
> 
> 时间：2012-11-09T17:10:44.470
> 
> 标签：php, codeigniter

我创建了一个名为`Role_Admin`并设置配置前缀的核心控制器

```
$config['subclass_prefix'] = 'Role_'; 
```

这是文件夹`Role_Admin.php`中的代码`core`

```
class Role_Admin extends CI_Controller {
    function __construct() {

    }
} 
```

在我写的时候在控制器文件夹中

```
class admin extends Role_Admin { ... } 
```

我明白了

> 致命错误：找不到类“Role_Admin”

我正在做的事情有问题。

编辑：（我创建了一个更好的快速修复，您创建的任何新核心文件只需扩展 MY_Controller。然后在您的控制器目录中，您可以扩展您创建的任何核心控制器

```
class MY_Controller extends CI_Controller {

        function __construct() {
            parent::__construct();

            //include custom core classes
            $core_path = DOCUMENT_ROOT . '/application/core';
            $this->load->helper('file');

            foreach(get_filenames($core_path) as $file) {
                if ($file != 'MY_Controller.php') {
                    if(file_exists($file)) {
                        include_once($file);
                    }
                }
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:37:05.760

您的设置`$config['subclass_prefix']`很好，但您的文件名不正确。CI 正在寻找文件`Role_Controller.php`，而不是`Role_Admin.php`.

有一种更简单的方法可以做到这一点，虽然它可能看起来是一个黑客，但它是完全合法的。回到`MY_`前缀 create `MY_Controller.php`，然后在该文件中定义您要使用的控制器类。实际上，您甚至不需要`MY_Controller`上课。例子：

```
// application/core/MY_Controller.php
class Role_Admin extends CI_Controller {}
class AnotherClass extends Role_Admin {}
class SomeOtherClass extends AnotherClass {} 
```

所有这些类都可供您的控制器扩展。

# javascript - 单击正文上的任意位置并调用函数

> ID：13312713
> 
> 赞同：1
> 
> 时间：2012-11-09T17:10:58.337
> 
> 标签：javascript, function

这是我的html：

```
<img id="bladder" onclick="changeimage()" src="images/logo_bladder.png" /> 
```

和我的js：

```
 <script>
    cc = 0;
    function changeimage() {
        if (cc == 0) {
            cc = 1;
            document.getElementById('bladder').src = "images/logo_bladder_b.png";
        }
        else {
            cc = 0;
            document.getElementById('bladder').src = "images/logo_bladder.png";
        }
    }
</script> 
```

我希望能够点击身体上的任何地方——不仅仅是图像！– 更改图像。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:16:46.297

你可以试试

```
$(document).ready(function(){
    $(body).click(function(){
      if (cc==0) 
    {   cc=1;
    document.getElementById('bladder').src="images/logo_bladder_b.png";
    }
    else
    {
        cc=0;
     document.getElementById('bladder').src="images/logo_bladder.png";
    }
    });
}); 
```

或者

在您的`<body>`标签中，添加 onclick 事件，例如：

```
<body onclick="changeimage()">..</body> 
```

# crm - vtiger vs sugarcrm 用于构建定制产品

> ID：13312721
> 
> 赞同：0
> 
> 时间：2012-11-09T17:11:27.320
> 
> 标签：crm, rad, sugarcrm, vtiger

其中哪一个更适合构建定制产品？哪一个更容易开发？我发现 vtiger 包含更多模块，但另一方面，sugarcrm 似乎有更好的文档并且更容易开发。这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T12:30:05.737

我知道这是一个老问题，但答案仍然是相关的。SugarCRM 有自己的怪癖和不寻常的做事方式，但每个版本都变得更好。vTiger，我上次查看代码时（一年前）仍然是杂乱无章的代码拼凑。我不会亲自用众所周知的驳船杆接触后者。

# php - 检查用户是否使用 cookie 登录是否安全？

> ID：13312725
> 
> 赞同：0
> 
> 时间：2012-11-09T17:11:32.740
> 
> 标签：php, security

在我正在开发的网站上，如果设置了 cookie，我目前正在检查用户是否已登录。问题是我将这些信息用于数据库上的一些请求，并允许他在网站上执行一些任务。不过，我想到如果用户编辑它的 cookie，他可能会成为其他人（编辑它的用户名/id）。那么，有没有办法保护它或者我必须使用会话？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:13:42.830

是的，您可以使用 cookie。您只需要确保 cookie 提供可用于验证用户身份的数据，而不是表示用户*已通过*身份验证的令牌。

坏饼干：

```
username=foo,logged_in=true 
```

好饼干：

```
token=uifhjrjf4093jf3904j90j390kf934j8438j0493jf9034 
```

然后将身份验证数据与服务器上的数据存储进行比较。

> 我必须使用会话吗？

会话是一种临时存储用户（可能会或可能不会通过身份验证）的方式。它们是解决部分问题的一种快速简便的方法，而不是应该引起*我**必须**做的反应的事情吗？:(*。

大多数会话库使用 cookie 来存储令牌，该令牌将与会话关联的数据集合链接到会话所属的浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:16:40.797

我通常做的是在 cookie 中给出一个随机散列，然后将其指向一个数据库表，其中存储了完整的浏览器字符串、生存时间、最后访问时间、用户名和散列密码（用于比较万一用户因为被泄露而更改密码，这将使所有其他会话无效，除了更改密码的会话）。

# java - 多个线程在 Java 中读取同一个属性文件会导致性能问题吗？

> ID：13312731
> 
> 赞同：3
> 
> 时间：2012-11-09T17:11:35.743
> 
> 标签：java, multithreading, io

我正在创建多个线程，所有线程都读取相同的属性文件（没有对属性文件进行写操作）。由于多个线程多次读取同一个属性文件，这会导致性能开销吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:12:51.317

我建议[加载一次属性文件](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load%28java.io.Reader%29)并由所有线程使用相同的[属性实例。](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)

加载一次减少磁盘访问：

*   此应用程序的更好性能
*   整个系统的更好的可用性

多读不是并发问题。

[didierc](https://stackoverflow.com/users/1769720/didierc)的评论突出了一个可能的瓶颈：对 Properties 的每个访问都是同步的，因此当线程读取一个值时，其他所有可能都在等待。

为避免这种情况，您可以限制`Properties`在构造函数或线程初始化中的使用。不要在方法`p.getProperty( XXX )`内的循环中`Thread.run()`使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T18:18:26.807

答案是“视情况而定”。除了读取属性文件之外，它主要取决于每个线程所做的工作量。如果每个线程除了读取文件之外还做很多工作，性能不会受到太大影响。

您应该更关心潜在的正确性问题：如果不同的线程使用不同的属性，程序会正确运行吗？否则，您的程序存在竞争风险错误：如果属性文件在程序运行时被更改（或删除），则某些线程可能使用不同的属性，从而产生不正确的计算。

属性文件用于程序配置。程序通常会在启动后不久读取所有配置信息，然后再进行任何实际工作。因此，如果配置错误，它们可能*会很快失败*。您可能应该这样做，将线程的产生视为稍后要做的*真正工作。*这还可以确保您的程序的用户在配置中的每个错误只收到一条错误消息，而不是每个线程一条消息。

# java - Java - 没有为实例化单独指定的类范围的泛型类型

> ID：13312733
> 
> 赞同：3
> 
> 时间：2012-11-09T17:11:37.147
> 
> 标签：java, generics

> **可能重复：**
> [是否可以在 java 中引用嵌套的泛型参数？](https://stackoverflow.com/questions/996871/is-it-possible-to-reference-a-nested-generic-parameter-in-java)

如果可以的话，一个关于 Java 泛型的快速问题。是否有用于声明不用作实例化的泛型参数的泛型类范围类型的语法。例如：

```
public class <U extends FooUType> BarType<T extends FooType<U>>{

   public U getU(){return U;}
} 
```

要创建 BarType，我想编写以下内容，它本身包含 U，但我不想单独指定 U。所以：

```
BarType<SomeT<FooUType>> instance 
```

我们从参数化的 SomeT 中隐式获取 U 的类型，而无需单独指定 U。相对于：

```
public class BarType<U extends FooUType, T extends FooType<U>> 
```

这将需要：

```
BarType<FooUType,SomeT<FooUType>> 
```

我想我正在寻找类似于方法中相同想法的东西：

```
public <U> boolean StupidMethod(String s){
    ...
} 
```

我宁愿不使用`<? extends FooUType>`，因为这会导致 return 类中的方法返回类型出现问题`<U extends FooUType> U`。

非常感谢您的澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:16:31.277

正如评论所说，这是不可能的。

> 我宁愿不使用`<? extends FooUType>`，因为这会导致 return 类中的方法返回类型出现问题`<U extends FooUType> U`。

所以，在这里你说类的一些方法返回`U`......但你不想 `U`作为类型参数。好吧，你不能同时拥有它。要么有这个：

```
public class BarType<T extends FooType<U>, U extends FooUType>{

   public U getU() { ... }
} 
```

或这个：

```
public class BarType<T extends FooType<? extends FooUType>>{

   public FooUType getU() { ... }
} 
```

如果只是您关心的嘈杂的实例化，您可以`new BarType<>`在适用的情况下使用 Java 7。如果没有 Java 7，请声明一个工厂方法，以便调用者可以使用类型推断：

```
public static <T extends FooType<U>, U extends FooUType> BarType<T, U> make() {
    return new BarType<T, U>();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:17:23.087

谢谢大家，

最后我选择了不同的解决方案。基本上我试图隐藏的类`U`是抽象的，所以我添加`U`了一个通用参数，因为没有办法解决这个问题。然后我创建了扩展它的具体类，并让它们`U`默默地填充类型，这样调用者就不需要膨胀他们的代码。

像这样的东西：

```
public abstract class MyAbsClass<U extends Foo, T extends Bar<U>>{...}

public class ConcreteClass<T extends SomeBar> extends MyAbsClass<SilentUType, T> 
```

where`SomeBar`没有参数化。然后，用户可以使用以下方法进行实例化`T`：

```
 new ConcreteClass<SomeDerivedBar>() 
```

这很适合我的场景，所以我希望它可以帮助其他人。

# java - 从 Java 调用 C++ 函数。映射“const char*”

> ID：13312734
> 
> 赞同：2
> 
> 时间：2012-11-09T17:11:48.817
> 
> 标签：java, c++, java-native-interface, native

我已经通过stackoverflow和互联网搜索了这个，还没有找到答案。

我有一个指纹读取器的 SDK，但我没有源代码，这意味着我无法更改它。

它有一些我需要访问的方法，我将在下面列出哪些接口（来自 RS_API.h）：

```
REALSCANSDK_API int __stdcall RS_InitSDK( const char* configFileName, int option, int* numOfDevice );
REALSCANSDK_API int __stdcall RS_InitDevice( int deviceIndex, int*deviceHandle );
REALSCANSDK_API int __stdcall RS_SetCaptureMode( int deviceHandle, int captureMode, int captureOption, bool withModeLED );
REALSCANSDK_API int __stdcall RS_SetViewWindow( int deviceHandle, HWND windowHandle, RECT drawRectangle, bool autoContrast );
REALSCANSDK_API int __stdcall RS_TakeImageDataEx( int deviceHandle, int timeout, int fingerIndex, bool withLED, unsigned char** imageData, int* imageWidth, int* imageHeight ); 
```

我设法将它们全部转换为 Delphi，但我也想从 Java 应用程序访问它。

我的原型是这样的：

```
public class Leitor {
    public native int  RS_InitSDK(String configFileName, int option, int numOfDevice );

    public static void main(String[] args) {
        Leitor leitor= new Leitor();
        leitor.RS_InitSDK(null, 0, 0);
    }
  static 
  {
    System.load("C:\\temp\\SDKSuprema\\SDK\\RS_SDK.dll");    
  }
} 
```

加载位工作正常（我相信这意味着它可以找到 dll 文件），但是当它运行本机方法时会抛出异常：

线程“main”中的异常 java.lang.UnsatisfiedLinkError: leitor.Leitor.RS_InitSDK(Ljava/lang/String;II)I at leitor.Leitor.RS_InitSK(Native Method) at leitor.Leitor.main(Leitor.java:14)

如果我重命名 dll，它会将错误更改为“无法加载库”，所以我认为问题在于方法的映射。

我也找不到如何映射要从 Java 调用的通过引用参数传递。唯一的解决方案是更改 dll 以返回结构而不是单个结果，但这是不可能的，因为我无法更改代码。

第二个问题是将窗口句柄从 swt 发送到 JNI 本机方法......

非常欢迎任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:25:54.323

您需要编写显式的粘合代码，将参数作为 Java 对象接受，并将它们转换为现有 C 入口点期望的表示形式。JVM 不会自己为您执行此操作。

阅读[JNI 规范](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/jniTOC.html)以了解如何编写此胶水代码。

特别是，为了匹配您的 Java 声明，JNI 入口点必须命名为`package_name_here_Leitor_RS_1InitSDK`or `package_name_here_Leitor_RS_1InitSDK__Ljava_lang_String_2II`; 请参阅规范第 2 章的*“解析本机方法名称”部分。*这个函数必须在 Java 可见的参数前面加上一些额外的参数；请参阅规范中的*“本机方法参数”*。

在方法中，您将字符串作为`jstring`值传递，您必须使用`GetStringUTFChars`JVM 中的辅助函数将其转换为 C 字符串。

对于按引用传递的参数，您需要找到一种对调用 Java 代码有意义的方法来模拟它们，例如通过传递一个其字段由您的 JNI 代码分配的对象，或者（快速而肮脏地）传递一个`int[]`其第一个元素由您的 JNI 代码分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:31:49.980

您需要创建 c/c++ 胶水代码来实现 java 方法，使用类调用 javah 将创建一个标头，声明标记为本地的 java 方法的本地对应项。

如果您不想编写 c/c++，在大多数情况下，您可以使用[JNA](https://stackoverflow.com/tags/jna/info) 将 java 代码映射到现有的 c 方法和结构。

# c++ - 功能显示问题

> ID：13312735
> 
> 赞同：0
> 
> 时间：2012-11-09T17:11:49.580
> 
> 标签：c++

我的任务是编写一个程序来根据用户输入的数据显示一个星域 (*)。我得到了代码，但我的导师要求将它们放在至少两个函数中。显示横幅功能不起作用。getData 运行并要求用户输入值，但随后程序在输入后停止。似乎出了什么问题？

```
#include <iostream>

using namespace std;

void displaybanner(int numrows=0, int numcolums=0, int numfields=0);

void getData(int numrows=0, int numcolumns=0, int numfields=0);

const char c = '*';

int main(void)
{
    getData();
    displaybanner();

}

void getData(int numrows,int numcolumns,int numfields)
{

    cout << "Welcome to the banner creation program!" << endl;

    cout << "Enter the number of rows (1 - 5) --> ";
    cin >> numrows;

    if(numrows<1 || numrows>5){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);}

    cout << "Enter the number of columns (5 - 50) --> ";
    cin >> numcolumns;

    if(numcolumns<5 || numcolumns>50){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);
    }

    cout << "Enter the number of rows (3 - 10) --> ";
    cin >> numfields;

    if(numfields<3 || numrows>10){
        cout << "Your entered value is outside the range!" << endl;
        cout << "Program will now halt..." << endl;
        exit(0);
    }

}

void displaybanner(int numfields, int numrows, int numcolumns)
{
for (int i = 0; i < numfields; i++) {
  for (int j = 0; j < numrows; j++) {
    for (int k = 0; k < numcolumns; k++) {
      cout << c;
    }
    cout << endl;
  }
  cout << endl << endl << endl;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:16:18.970

这不起作用，因为您只是在修改函数中的临时/本地值。要解决此问题，您必须通过引用传递参数（使用指针或引用）。

最简单的方法可能是使用引用，例如更改

```
void getData(int numfields, int numrows, int numcolumns) 
```

至

```
void getData(int &numfields, int &numrows, int &numcolumns) 
```

这将确保保留您对这些参数所做的所有更改，即使在返回调用函数时也是如此。请注意，您不能使用默认参数，但您只需在要通过参数返回值的地方进行。

您的主要功能应如下所示：

```
int main(void)
{
    int fields, rows, cols;
    getData(fields, rows, cols);
    displaybanner(fields, rows, cols);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:18:52.773

的默认参数`displaybanner`全为零：

```
void displaybanner(int numrows = 0, int numcolums = 0, int numfields = 0); 
```

而且由于您在没有任何参数的主模块中调用此函数，因此不会执行连续的循环（因为索引变量为 0 并且它们的限制为 0）。要使其工作，请将参数传递给`displaybanner`或使其默认参数大于 0。

# algorithm - 创建一个不完美的游戏算法

> ID：13312736
> 
> 赞同：3
> 
> 时间：2012-11-09T17:11:54.010
> 
> 标签：algorithm, artificial-intelligence, tic-tac-toe, minimax

我知道如何使用 minimax 之类的算法来玩完美的游戏（在这种情况下，我正在寻找类似于井字游戏的游戏）

但是，我想知道如何创建一个不完美的算法，或不同“技能水平”（简单、中等、困难等）的人工智能，人类玩家实际上有机会击败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:48:53.627

切断各种深度的搜索以限制计算机的技能。改变评价函数，使计算机偏爱不同的策略。

非专业的人类玩家使用次优策略和有限的战术。这些大致对应于对游戏状态的糟糕评估和有限的超前思考能力。

关于随机性，需要一点点随机性，这样计算机就不会总是犯同样的错误，有时会幸运地比平时做得更好或更差。为此，不要总是选择最佳路径，而是选择按分数加权的路径。您可以让 AI 根据游戏结果改进其评估功能，即更新其权重，从而使 AI 更加有趣。这样它就可以像人类一样在有限的搜索深度下通过游戏学习更好的评估函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:22:58.350

引擎不容易犯人为错误。减少搜索深度是一种直接的方法，但它有其局限性。例如，减少为一层的国际象棋引擎通常会在一个有价值的棋子仍然受到攻击时进行检查。当对手用反击来防御检查时，两个棋子都是一体的。即使是没有经验的人也不太可能犯这个错误。

也许您可以使用名为 Phalanx 的国际象棋引擎的一些想法：http: [//phalanx.sourceforge.net/index.html](http://phalanx.sourceforge.net/index.html)

它是少数具有复杂难度级别（-e 选项）的开源引擎之一。如果我没记错的话，它会执行正常搜索，但有时会忽略不明显的动作。`evaluate.c`包含一个名为 的函数`blunder`，它评估一个动作是否可能被人类忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:18:16.307

我在游戏中使用的一种方法是利用随机值。对于简单的游戏关卡，我让选择随机数的几率有利于人类玩家。例子：

```
Easy level: only beat the human if you can randomly select a value less than 10 from the range of 1 to 100

Medium level: beat the human if you can select a random value which is less than 50 from a range of 1 to 100

Hard level: beat the human if you can randomly select a value less than 90 from a range of 1 to 100 
```

我相信有更好的方法，但这可能会给你一个想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:19:35.783

“最简单”的方法是使用阈值和 minmax 结果，从超过阈值的结果中创建一个集合，然后随机选择程序要采用的选择/路径。门槛越低，对手可能更容易。

我说可能是因为即使是纯粹的运气也可以选择最好的移动，因此是“初学者的运气”。

本质上，您正在寻求增加可能结果的熵（随机性）。如果您想专门降低计算机对手的难度，则可以限制 minmax 算法遍历的级别，或者降低算法某些部分的分数。

# backbone.js - 如何从backbone.js中的视图调用视图

> ID：13312738
> 
> 赞同：0
> 
> 时间：2012-11-09T17:12:00.380
> 
> 标签：backbone.js, backbone-views

我有两个视图文件views.js 和views2.js。在按钮上单击views.js 调用。在views.js 上有一个按钮需要触发views2.js。但是问题是按钮上单击views2.js 不是在职的。

我写了一些代码。在 view.js 中

```
define( ["backbone"], function(Backbone) {

var UserView = Backbone.View.extend({
    tagName: "div",
    render: function(){
        this.$el.html(this.model.get("desc") + "<button id='btn2' class='btn btn-             primary'>Next Page</button>");
        return this;
    }
});

var NextPageView = Backbone.View.extend({
    events: {
        'click': 'firstquestion'
    },

    render: function(){        
        return this;
    },

    firstquestion: function(){
        //to solve circular dependency
        require(['routes'],function(routes){
            var router = routes.pageRouter;
            router.navigate('view', {trigger: true});
       });   
    }
 });
    var views2 = require("views2");//should I call views2 here
    var np2 = new views2.NextPageView2({el: $("#btn2")});
 return {
    UserView: UserView,
    NextPageView: NextPageView
 };
}); 
```

在views2.js中

```
define( ["backbone"], function(Backbone) {
var UserView2 = Backbone.View.extend({
    tagName: "div",
    render: function(){

        this.$el.html(this.model.get("desc") + "<button id='btn3' class='btn btn-primary'>Next Page</button>");
        return this;
    }
});

var NextPageView2 = Backbone.View.extend({
    events: {
        'click': 'secondquestion'
    },
    render: function(){
        return this;
    },
    secondquestion: function(){
        require(['routes2'],function(routes2){
            var router = routes2.pageRouter2;
            router.navigate('view', {trigger: true});
        });
    }
});
return {
    UserView2: UserView2,
    NextPageView2: NextPageView2
};
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:22:05.623

您需要在调用视图上放置 Require.js 依赖项。

# iphone - UITableView 如何一次显示两个不同的数组？

> ID：13312739
> 
> 赞同：4
> 
> 时间：2012-11-09T17:12:01.393
> 
> 标签：iphone, xcode, uibutton, uitableview, subclass

下面的代码可以工作，但不是我希望的那样。我希望当我单击 UIbutton 时，它会自动更新 UITableview 中的新值而不是旧值。下面的代码仅在我按下 UIbuttons 时有效，然后当我滚动 UITableview 时它会更新具有新值的 UItableview。在我的应用程序中，我使用 UITableview 作为我的 mainclass 的子类。如下图所示

![在此处输入图像描述](../Images/eaf9b8dbc4d658d5842da97bff461999.png)

我在我的 Mainclass 中添加 Tableview，就像这样在 testingViewController.h 中的“testingViewController”

```
#import "Inputtableview.h"
@interface testingViewController :UIViewController<UITableViewDelegate,UITableViewDataSource> {
     Inputtableview *inputview;
     IBOutlet UITableView *inputtbl; 
}
@end 
```

在 testingViewController.m

```
- (void)viewDidLoad {
btn1bool=FALSE;
if (inputview == nil) {
    inputview = [[Inputtableview alloc] init];
}

[inputtbl setDataSource:inputview];
[inputtbl setDelegate:inputview];
inputview.view = inputview.tableView;
} 
```

现在在按钮操作方法中

```
-(IBAction)input:(id)sender
  {
  btn1bool=TRUE;
} 
```

我的子类代码“inputtableview.m”如下所示

```
- (void)viewDidLoad {
 [super viewDidLoad];
listOfItems=[[NSMutableArray alloc] initWithObjects:@"Iceland",@"Greenland",@"Switzerland",
             @"Norway",@"New Zealand",@"Greece",@"Italy",@"Ireland",nil];

  array1 = [[NSMutableArray alloc] initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H", nil] ;
 }

  #pragma mark -
  #pragma mark Table View datasource methods
-(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
    {
    if (btn1bool) {
        return [array1 count];
    }
else {
    return [listOfItems count];
}

[self.tableView reloadData];
   }

 -(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
   {
static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

NSLog(@"Row: %i", indexPath.row);
if (btn1bool) {
    NSString *cellValue = [array1 objectAtIndex:indexPath.row];
    cell.text = cellValue;
}
else {
    NSString *cellValue = [listOfItems objectAtIndex:indexPath.row];
    cell.text = cellValue;
      }
   return cell;
 } 
```

任何帮助都会被给予。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:31:09.900

只需输入以下代码：

```
[inputtbl reloadData]; 
```

您需要在项目中更改一些内容，但我认为这个项目只是为了测试东西。

* * *

您希望在按下按钮后重新加载日期，因此您在 IBAction 中调用该方法。

```
-(IBAction)input:(id)sender
{
    btn1bool=TRUE;
    [inputview.tableView reloadData];
} 
```

要在按下按钮时在 2 个数据源之间切换，您可以更改为这行代码：`btn1bool=!btn1bool;`

```
(NSInteger) tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section
{
    if (btn1bool) {
        return [array1 count];
    } else {
        return [listOfItems count];
    }
} 
```

`-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`是正确的

# javascript - 将字符串转换为 json，然后读取 json 值

> ID：13312741
> 
> 赞同：0
> 
> 时间：2012-11-09T17:12:22.293
> 
> 标签：javascript, jquery, json, yql

首先，我对json很陌生，所以如果我犯了一个严重的错误，请原谅我。我有一些代码使用 YQL 从网站获取 json 对象，它以字符串形式返回。所以现在我想把它解析成一个 json 对象然后读取它。这是我的代码：

```
$.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url=%22http://iphone-api.uitzendinggemist.nl/v1/episodes.json%22%20and%20xpath=%27*%27&format=json", function(data) {
console.log(data);
content = data.query.results.html.body.p;
json = JSON.stringify(eval("(" + content + ")"));
str = json.revoked;
$('#table').append('<li>' + str + '</li>');
}); 
```

[JS小提琴](http://jsfiddle.net/7UKwM/ "一个js小提琴在这里")

我只是不明白为什么这给了我无限的价值，而不是它应该给的价值。

所以现在我的问题是这里是否有人知道它为什么不能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:26:48.847

该`json`变量是一个数组，您需要访问一个索引。

`string = json[0].revoked;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:52:11.407

您的代码中有很多很多错误。你应该试着理解你正在做的每一步，看起来你没有。[这是你的代码的一个分支](http://jsfiddle.net/hdSbU/15/)，我不确定你想要它做什么。我会告诉你一些你做错的事情：

1.  在函数中声明新变量时使用`var`关键字
2.  不要使用 解析 JSON `eval()`，而是使用一些解析器。例如[$.parseJSON()](http://api.jquery.com/jQuery.parseJSON/)。使用`eval()`存在安全风险，因为返回的脚本将在客户端上执行，您应该只对获取数据感兴趣。
3.  构建 HTML 时，请注意对要显示的文本进行编码。在您的情况下，不要连接字符串（`'<li>' + str + '</li>'`）。您可以使用 jQuery ( `$('<li>').text(str)`)。
4.  不要向元素添加`li`元素`table`。将它们添加到`ul`或`ol`元素中，或者在表格的情况下创建行和单元格。
5.  完全不清楚您为什么要进行评估，并且它们将对象字符串化。你最终得到相同的确切数据。

# build - 如何使用 automake 链接两个库，一个是动态的，另一个是静态的？

> ID：13312743
> 
> 赞同：0
> 
> 时间：2012-11-09T17:12:31.187
> 
> 标签：build, automake, pkg-config

假设我想将**foo**应用程序与**bar**和**baz**库链接。两者都支持 pkg-config 并提供 .pc 文件。我想**动态**链接的**bar**库和我想**静态**链接的**baz**库。如何使用**automake**实现这一目标？

 ******我当前的设置以动态方式链接它们，如下所示：

```
foo_SOURCES = main.c
foo_LDADD = @BAR_LIBS@ @BAZ_LIBS@
foo_CFLAGS = @BAR_CFLAGS@ @BAZ_CFLAGS@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:04:56.040

当共享库可用时，没有（合理的）理由不使用它们。automake 在这里不提供具体的支持；有`-Wl,-Bstatic ${FOO_LIBS} -Wl,-Bdynamic`黑客攻击，但它就是这样 - 黑客攻击，并且不能保证它会一直有效。******

# javascript - 在另一个 js 文件中使用 javascript 函数

> ID：13312745
> 
> 赞同：0
> 
> 时间：2012-11-09T17:12:44.740
> 
> 标签：javascript, html

我正在读一本书，我有 2 个 javascript 文件。两者都在 HTML 文件中：

```
<script src="playlist_store.js"></script>
<script src="playlist.js"></script> 
```

但是，当我尝试从 playlist_store.js 调用 playlist.js 中的函数时，chrome 调试器说“未捕获的引用错误。未定义 loadPlaylist。loadPlaylist() 是 playlist_store.js 中的函数

我以为某处可能有错字，但我认为没有。playlist.js 是否真的需要以某种方式导入或包含/需要 playlist_store.js ？浏览器是否不够智能，无法以某种方式链接它们，以便您可以从另一个调用其中的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:25:39.647

定义如下函数

```
function myaction () { } 
```

是一个*命名*（私有）函数。
最好编写一个分配给变量的（私有）函数：

```
var myaction = function () { }; 
```

现在你需要的是一个函数，它被分配给全局对象中的一个变量：

```
myaction = function () { };
// or strict:
window.myaction = function () { }; 
```

它现在是一个全局（公共）函数，因此您可以在定义的 .js 之外使用它。

请注意第一个示例，函数语句没有分号。像在其他示例中一样使用函数运算符，您需要一个分号。

# javascript - 压缩时 JavaScript 字符串连接中断

> ID：13312754
> 
> 赞同：0
> 
> 时间：2012-11-09T17:13:27.010
> 
> 标签：javascript, compression, minify, string-concatenation, django-compressor

我最近决定开始在一个项目中使用 Django Compressor 来自动连接和缩小 js 和 css，并在它们更改时刷新缓存。

我遇到的问题是有些脚本在未压缩时可以工作，但在通过压缩器运行后它们会中断。我已经能够将可能性缩小到字符串连接。特别是 HTML 字符串连接。

例如：

```
boldTerm = '<b>' + terms[i] + '</b>';
term = new RegExp(term, 'g');
data = data.replace(term, boldTerm); 
```

压缩时断裂。我收到语法错误：

> 语法错误：缺少；声明之前

但这有效：

```
boldTerm = 'TEST';
term = new RegExp(term, 'g');
data = data.replace(term, boldTerm); 
```

有人可以解释一下：

1.  为什么会断？
2.  我应该如何编写它以便在压缩时工作？

谢谢

编辑：这是引发错误的压缩代码部分：

```
(jQuery);';term=new RegExp(term,'g');data=data.replace(term,boldTerm);}} 
```

它被扔在 RegExp(term, g) 中的“g”上

我发现这有效：

```
boldTerm = '<' + 'b' + '>' + terms[i] + '<' + '/b' + '>';
term = new RegExp(term, 'g');
data = data.replace(term, boldTerm); 
```

所以这解决了我让它工作的部分问题。但“为什么”的问题仍然存在。

玩的东西：

*   jQuery
*   胡子
*   Django 压缩器 (JSmin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:19:40.277

也许您没有导出 RegExp 并且压缩器正在重命名它。

# php - 驱动器 API 请求有时会在另一个数组中返回一个对象 - PHP

> ID：13312755
> 
> 赞同：1
> 
> 时间：2012-11-09T17:13:28.503
> 
> 标签：php, google-drive-api

我正在做一个小页面，列出了谷歌驱动器中的所有文件。第一次进行身份验证并保存刷新令牌+用户ID和电子邮件，然后列出所有文件。要获取信息，我这样做：

```
$result = array();
$pageToken = NULL;
do {
  try {             
    $parameters = array();
    if ($pageToken) {
      $parameters['pageToken'] = $pageToken;
    }

    $files = $service->files->listFiles($parameters);
    $list=$files->getItems();

    $result = array_merge($result,$list);
    $pageToken = $files->getNextPageToken();
  } catch (Exception $e) {
    echo "An error occurred: " . $e->getMessage();
    $pageToken = NULL;
  }
} while ($pageToken); 
```

它可以工作，但是如果用户刷新页面，我确实刷新了访问令牌（从 db 获取刷新令牌），然后继续执行与上面相同的操作。在这种情况下，该代码给了我一个错误，因为这次我得到一个关联数组：

```
$files = $service->files->listFiles($parameters); 
```

为了使其工作，我需要将代码更改为：

```
$result = array();
$pageToken = NULL;
do {
  try {
    $parameters = array();
    if ($pageToken) {
      $parameters['pageToken'] = $pageToken;
    }
    $files = $service->files->listFiles($parameters);
    $list=$files['items'];
    $result = array_merge($result,$list);
    $pageToken = $files['nextPageToken'];
  } catch (Exception $e) {
    echo "An error occurred: " . $e->getMessage();
    $pageToken = NULL;
  }
} while ($pageToken); 
```

这不应该发生，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:10:42.443

从该类的相关php源中，我想我找到了让您烦恼的原因。看[`Google_DriveService.php`](http://code.google.com/searchframe#FAxor0S6hu0/trunk/src/contrib/Google_DriveService.php&q=listFiles%20package%3agoogle-api-php-client%5C.googlecode%5C.com&l=119)：

```
// ~Line 119
public function listFiles($optParams = array()) {
  $params = array();
  $params = array_merge($params, $optParams);
  $data = $this->__call('list', array($params));
  if ($this->useObjects()) {                       // THIS CALL HERE
    return new Google_FileList($data);
  } else {
    return $data;
  }
} 
```

它检查您是否要使用对象：`$this->useObjects()`. 此方法在超类中定义[`Google_ServiceResource.php`](http://code.google.com/searchframe#FAxor0S6hu0/trunk/src/service/Google_ServiceResource.php&q=ServiceResource%20useObjects%20package%3agoogle-api-php-client%5C.googlecode%5C.com&l=180)：

```
// ~Line 180
public  function useObjects() {
  global $apiConfig;
  return (isset($apiConfig['use_objects']) && $apiConfig['use_objects']);
} 
```

这告诉我，当您配置服务时，您必须设置`'use_object'`为`true`.

# css - 在绝对 div 之后放置一个 div

> ID：13312757
> 
> 赞同：1
> 
> 时间：2012-11-09T17:13:31.670
> 
> 标签：css, html, background-image, css-position

我正忙于创建一个网站，该网站最好需要一个覆盖整个屏幕的背景图片，但是当访问者向下滚动时会出现其他内容。

到目前为止，我通过创建 2 个 div（我称之为 #container_page1 和 #container_page2）来完成这项工作。这是第一个 div 的 css：

```
#container_page1 { 
    background-image:url(images/background.jpg); 
    background-size: cover;
    position:absolute;
    margin:0px;
    width:100%;
    height:100%;
} 
```

这是第二个 div 的 css：

```
#container_page2 {
    background-color: #F00;
    height: 2000px;
    width: 1000px;
    margin-right: auto;
    margin-left: auto;
} 
```

问题是第二个div的内容出现在第一个div的下面，显然是因为第一个div是绝对定位的。

当然，我可以通过边距或填充将第二个 div 的内容放置在较低的位置，但由于屏幕分辨率不同，这不会很好地工作。

在这里你可以看到我到目前为止所做的：http: [//kmnew.kadushimarketing.com/index.php](http://kmnew.kadushimarketing.com/index.php)。您还将看到链接到第二个 div 中的锚点的“了解更多”按钮。

有没有人建议让第二个 div 从第一个 div 结束的地方开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:18:04.413

将两个 div 包装成一个父 div。然后给该父 div 一个绝对位置，并将两个内部 div 放置在该 div 内彼此相邻的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:59:42.727

如果您需要每个部分都有自己的特殊背景并且与浏览器的大小完全相同，那么为什么要使用绝对位置呢？

使用如下风格：

```
body, html{
    width:100%;
    height:100%;
    margin:0;
    padding:0;
}

section{
    width:100%;
    height:100%;
    background-image:url(images/background.jpg); 
    background-size: cover;
} 
```

然后将所有内容 div 相对定位，您应该能够保持浏览器大小的背景并让部分按顺序堆叠。

如果要控制部分内容的位置，可以使用如下结构：

```
<section>
    <div class="content">
        Section content goes here
    </div> 
</section> 
```

使用相应的 CSS：

```
section .content{
    width: 500px;
    margin:0 auto;
} 
```

这会将内容固定为 500px 的宽度并在屏幕上居中。希望这可以帮助！

# sharepoint - 修改 SharePoint 2010 中标题文本内容占位符的位置

> ID：13312758
> 
> 赞同：1
> 
> 时间：2012-11-09T17:13:32.837
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, breadcrumbs

我是 SharePoint 的初学者，我有一个 SP 2010 团队网站，我的目标（目前）是修改 Web 标题和标题。

在包含页面标题的样式标签“s4-titletext”下，后跟导航链接（我假设是面包屑导航），我想将整个块移到标题图标下方而不是在它旁边......

是否有 OOTB 可以执行此操作？还是我必须通过设计师？

我尝试了设计器的方式，并且能够移动标题图标下方的块，但是它只显示站点标题而不是面包屑链接.....

```
<td class="s4-titletext" >
                                    <h1 name="onetidProjectPropertyTitle">
                                        <asp:ContentPlaceHolder id="PlaceHolderSiteName" runat="server">
                                            <SharePoint:SPLinkButton runat="server" NavigateUrl="~site/" id="onetidProjectPropertyTitle"><SharePoint:ProjectProperty Property="Title" runat="server" /></SharePoint:SPLinkButton>
                                        </asp:ContentPlaceHolder>
                                    </h1>
                                    <span id="onetidPageTitleSeparator" class="s4-nothome s4-bcsep s4-titlesep">
                                    <SharePoint:ClusteredDirectionalSeparatorArrow runat="server"/> </span>
                                    <h2>
                                        <asp:ContentPlaceHolder id="PlaceHolderPageTitleInTitleArea" runat="server" />
                                    </h2>
                                    <div class="s4-pagedescription" tabindex="0" >
                                        <asp:ContentPlaceHolder id="PlaceHolderPageDescription" runat="server"/>
                                    </div>

                                </td> 
```

我可能哪里出错了.... :(

# java - 在java中按长度拆分字符串

> ID：13312763
> 
> 赞同：2
> 
> 时间：2012-11-09T17:13:47.443
> 
> 标签：java, android

> **可能重复：**
> [在 Java 中将字符串拆分为等长的子字符串](https://stackoverflow.com/questions/3760152/split-string-to-equal-length-substrings-in-java)

我有一个 String[] 数据结构，就像这样

```
0.1953601.3675211.3675214.1025640.5860811.36752110.3540903.711844-5.2747252.539683 
```

我想把它分成这样的数组

```
 0.195360
  1.367521
  1.367521
  4.102564
  0.586081
  1.367521
 10.354090
  3.711844
 -5.274725
  2.539683 
```

所以小数点后的值有6个有效数字

我尝试使用[这个问题](https://stackoverflow.com/questions/3760152/split-string-to-equal-length-substrings-in-java)的正则表达式解决方案，但它似乎不起作用。

甚至这个

```
System.out.println(Arrays.toString(
  "Thequickbrownfoxjumps".split("(?<=\\G.{4})")
)); 
```

给了我一个`[Theq, uickbrownfoxjumps]`不是`[Theq, uick, brow, nfox, jump, s]`我期望的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:28:57.800

断言

> 每个值的大小为 8，但如果值为负，则为 9

问题中的错误是错误的，因为如果我在这里手动拆分条目，结果是：

```
0.195360
1.367521
1.367521
4.102564
0.586081
1.367521
10.35409
03.71184   <<< As you can see, it's not that you want
4-5.2747   <<< It's not a number
252.5396
83         <<< Bang! too short 
```

我认为真正的断言是“点后的位数是 6”，在这种情况下，拆分变为：

```
 0.195360
  1.367521
  1.367521
  4.102564
  0.586081
  1.367521
 10.354090
  3.711844
 -5.274725
  2.539683 
```

代码在这里：

```
static String[] split( String in ) {
   List< String > list = new LinkedList< String >();
   int dot = 0;
   for( int i = 0; dot > -1 && i < in.length(); i = dot + 7 ) {
      dot = in.indexOf( '.', i );
      if( dot > -1 ) {
         int last = Math.min( dot + 7, in.length());
         list.add( in.substring( i, last ));
      }
   }
   return list.toArray( new String[list.size()]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:17:50.500

恕我直言，正则表达式不是一个很好的应用：

```
 while not end-of-string
   if next-char is "-"
      take next 9 chars
   else
      take next 8 chars 
```

# c# - JqG rid 从 Ajax 获取值 GridData

> ID：13312764
> 
> 赞同：-2
> 
> 时间：2012-11-09T17:14:01.143
> 
> 标签：c#, asp.net-mvc, jqgrid

我会使用我的 JQuery 的函数来选择 jqgrid any 的值 sidx、Sord、page 和 rows。

例子：

 `````
jQuery ("# grid")
 .navGrid ('# pager', {edit: false, add: false, del: false, search: false})
 .navButtonAdd ('# pager, {
      caption: "Excel"
      id: "grid_mybutton"
      buttonicon "icon_excel"
      onClickButton: function () {
        ExportarExcep ($controler, $sidx, $sord, $page, $rows);
          }
      position: "last"
}); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:34:58.400

如果我正确理解您的需求，您可以获取jqGrid 的`page`、和选项`rowNum`，并将其用作方法的参数：`sortname``sortorder``ExportarExcep`

```
jQuery("#grid").jqGrid("navButtonAdd", "#pager", {
      caption: "Excel",
      id: "grid_mybutton",
      //buttonicon "icon_excel",
      onClickButton: function () {
          var p = $(this).jqGrid("getGridParam");
          alert("page=" + p.page +
                ", rows=" + p.rowNum +
                ", sidx=" + p.sortname +
                ", sord=" + p.sortorder);
          //ExportarExcep ($controler, p.sortname, p.sortorder, p.page, p.rowNum);
      },
      position: "last"
}); 
```

您应该小心您发布的代码的语法。您当前的代码包含许多语法错误。``

# php - 如何将某个字符添加到 preg_match

> ID：13312771
> 
> 赞同：0
> 
> 时间：2012-11-09T17:14:42.700
> 
> 标签：php, regex, preg-match-all

我有这个代码：

```
$tags = preg_match_all('~%([a-zA-Z0-9]+)\.([a-zA-Z0-9]+)%~', $text, $matches); 
```

它很好用，但我希望能够添加“_”字符，但我不知道如何。

我会期待一些答案！

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:16:40.430

只需将它们添加到每个组中允许的字符中？：

```
$tags = preg_match_all('~%([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]+)%~', $text, $matches);
                                     ^                ^ 
```

# bash - 如何在bash中成对地减去字段？

> ID：13312772
> 
> 赞同：3
> 
> 时间：2012-11-09T17:14:43.997
> 
> 标签：bash, unix, awk

我有一个看起来像这样的大型数据集：

```
5 6 5 6 3 5
2 5 3 7 1 6
4 8 1 8 6 9
1 5 2 9 4 5 
```

对于每一行，我想从第二个字段中减去第一个字段，从第四个字段中减去第三个字段，依此类推，加深字段数（总是偶数）。然后，我想报告所有对的差异超过某个限制（比如 2）的那些行。我还应该能够报告下一个最佳行，即其中一对比较未能达到限制但所有其他对都符合限制的行。

从上面的示例中，如果我将限制设置为 2，那么我的输出文件应该包含最佳行：

```
2 5 3 7 1 6    # because (5-2), (7-3), (6-1) are all > 2
4 8 1 8 6 9    # because (8-4), (8-1), (9-6) are all > 2 
```

下一个最佳行

```
1 5 2 9 4 5    # because except (5-4), both (5-1) and (9-2) are > 2 
```

我目前的方法是读取每一行，将每个字段保存为变量，做减法。但我不知道如何进一步进行。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T18:27:17.277

这是一种 bash 方法：

```
#!/bin/bash

threshold=$1
shift
file="$@"

a=($(cat "$file"))
b=$(( ${#a[@]}/$(cat "$file" | wc -l) ))

for ((r=0; r<${#a[@]}/b; r++)); do
    br=$((b*r))
    for ((c=0; c<b; c+=2)); do

        if [[ $(( ${a[br + c+1]} - ${a[br + c]} )) < $threshold ]]; then
            break; fi

        if [[ $((c+2)) == $b ]]; then
            echo ${a[@]:$br:$b}; fi

    done
done 
```

用法：

```
$ ./script.sh 2 yourFile.txt
2 5 3 7 1 6
4 8 1 8 6 9 
```

然后可以轻松地重定向此输出：

```
$ ./script.sh 2 yourFile.txt > output.txt 
```

注意：如果您在每行之间有那些空行，这将无法正常工作......但我相信以上内容会让您顺利进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T09:08:07.647

将“best”行打印到文件“best”，并将“next best”行打印到文件“nextbest”

```
awk '
{
        fail_count=0
        for (i=1; i<NF; i+=2){
                if ( ($(i+1) - $i) <= threshold )
                        fail_count++
        }
        if (fail_count == 0)
                print $0 > "best"
        else if (fail_count == 1)
                print $0 > "nextbest"
}
' threshold=2 inputfile 
```

很简单的东西。

1.  一次循环遍历字段 2。
2.  如果（下一个字段 - 当前字段）不超过`threshold`，则递增`fail_count`
3.  如果该行为`fail_count`零，则表示它属于“最佳”行。

    否则，如果该行`fail_count`是 1，则它属于“次佳”行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:30:43.617

我可能不会在 bash 中这样做。就我个人而言，我会用 Python 来做，这对于那些快速而肮脏的小脚本来说通常是好的。

如果您将数据保存在文本文件中，您可以[在此处](https://stackoverflow.com/questions/3277503/python-read-file-line-by-line-into-array)阅读有关如何将该数据作为行列表导入 Python 的信息。然后你可以使用一个for循环来处理每一行：

```
threshold = 2
results = []
for line in content:
    numbers = [int(n) for n in line.split()] # Split it into a list of numbers
    pairs = zip(numbers[::2],numbers[1::2]) # Pair up the numbers two and two.
    result = [abs(y - x) for (x,y) in pairs] # Subtract the first number in each pair from the second.
    if sum(result) > threshold:
        results.append(numbers) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T13:17:04.570

另一个 bash 版本：

首先 a`check function`只返回结果代码：

```
function getLimit() {
    local pairs=0 count=0 limit=$1 wantdiff=$2
    shift 2
    while [ "$1" ] ;do
        [ $(( $2-$1 )) -ge $limit ] && : $((count++))
        : $((pairs++))
        shift 2
      done
    test $((pairs-count)) -eq $wantdiff
} 
```

比现在：

```
while read line ;do getLimit 2 0 $line && echo $line;done <file
2 5 3 7 1 6
4 8 1 8 6 9 
```

和

```
while read line ;do getLimit 2 1 $line && echo $line;done <file
1 5 2 9 4 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-16T02:13:49.107

如果你可以使用`awk`

```
$ cat del1
5 6 5 6 3 5
2 5 3 7 1 6
4 8 1 8 6 9
1 5 2 9 4 5
1 5 2 9 4 5 3 9

$ cat del1 | awk '{
> printf "%s _ ",$0; 
> for(i=1; i<=NF; i+=2){
>     printf "%d ",($(i+1)-$i)}; 
>     print NF 
> }' | awk '{
> upper=0; 
> for(i=1; i<=($NF/2); i++){ 
>     if($(NF-i)>threshold) upper++
> }; 
> printf "%d _ %s\n", upper, $0}' threshold=2 | sort -nr
3 _ 4 8 1 8 6 9 _ 4 7 3 6
3 _ 2 5 3 7 1 6 _ 3 4 5 6
3 _ 1 5 2 9 4 5 3 9 _ 4 7 1 6 8
2 _ 1 5 2 9 4 5 _ 4 7 1 6
0 _ 5 6 5 6 3 5 _ 1 1 2 6 
```

您可以根据需要进一步处理结果。结果按“好​​”顺序排序。

# javascript - 我的 onReadyStateChange 函数如何/何时运行？

> ID：13312773
> 
> 赞同：0
> 
> 时间：2012-11-09T17:14:45.333
> 
> 标签：javascript, ajax

假设我们有一个从数据库获取一些数据的函数：

```
function getResults() {
    if (httpReq.readyState == 4 || httpReq.readyState == 0) {
        httpReq.open("GET",'../search.php?blablabla',true);
        httpReq.onreadystatechange = function() {
            if (httpReq.readyState == 4) {
                // Some code here
            }
        };
        httpReq.send(null);
    }
    updateResults();
    // This function is running before the code above
    // ...so I actually get no results
} 
```

如何`updateResults()`在已经从数据库中获取结果的那一刻运行该函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:23:10.867

我认为代码应该是这样的：

```
function getResults() {
    httpReq.open("GET",'../search.php?blablabla',true);
    httpReq.onreadystatechange = function() {
        if (httpReq.readyState == 4) {
            // Some code here
            updateResults();
        }
    };
    httpReq.send(null);
} 
```

# payment-gateway - 一次信用卡授权上的多次捕获

> ID：13312774
> 
> 赞同：3
> 
> 时间：2012-11-09T17:14:48.907
> 
> 标签：payment-gateway, credit-card, pci-dss, recurring-billing

代替在本地保存信用卡信息以进行定期付款，我想我可以向支付网关请求一定金额的授权，然后每月左右多次获取该金额。

一个支付网关的文档说“可以提交捕获的金额等于或小于原始授权的金额”。这有点问题，因为这些经常性付款是可变的（即，您根据您提出的 API 请求数计费，这可能比上个月多或少）。另一个支付网关的文档说，您只能在“原始仅授权交易在前 30 天内提交”时捕获，这让我认为第二次捕获在 60 天后完成（与第一次捕获后的 30 天相比）不会不工作。

根据我所读到的，很多地方通过保存信用卡号（加密）而不是 CVV 来进行定期付款，然后定期收费，他们每个月都会进行新的授权和捕获交易。不过，据我了解，这个问题是保存 CC#，即使是加密的，也需要[完全符合 PCI DSS](https://www.pcisecuritystandards.org/documents/pci_dss_v2.pdf)，这在管理上似乎是一个巨大的麻烦，要求诸如“*验证对所有审计跟踪的访问被记录*”和“*验证面向外部技术（例如，无线、防火墙、DNS、邮件）的日志是否已卸载或复制到安全的集中式内部日志服务器或媒体上*”。

authorize.net 有一个[CIM API](http://developer.authorize.net/api/cim/)，似乎符合要求，但我不知道……我的雇主不想与 authorize.net 合作，所以我想这不在讨论范围内。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T21:01:54.480

您将无法做到这一点 - 有足够多的网关支持定期付款，您应该将交易作为定期交易处理，而不是尝试从单个身份验证进行多次捕获。

当您让网关进行定期交易时，他们会存储信用卡交易，而您不会。a.net 太糟糕了，他们在这种交易上做得很好。

你可能想看看 stripe.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T03:22:10.577

您绝对无法从一次授权中获取多笔付款。每次事先授权只能进行一次付款（捕获）。一旦获得金额，授权将不再有效。

您要查找的内容称为定期计费。它的工作原理是您创建一个具有固定金额、固定时间表（每月、每年等）和持续时间的订阅。当您创建订阅时，您提供支付信息（即信用卡详细信息）并将其存储在他们的服务器上，这使您无法掌握*大部分*PCI 合规性（接受您网站上的信用卡信息确实需要承担一些 PCI 责任） . 基本上，他们每个月都会自动为您向客户收费。

如果每次付款的金额或每次付款的时间表会有所不同，那么像 Authorize.Net 的 CIM 这样的服务会很方便，因为它们允许您通过为该客户创建付款配置文件将客户的信用卡信息存储在他们的服务器上。然后，您只需告诉 Authnet 向该付款资料收费即可对其收费。您的 PCI 责任与定期计费相同。

如果您真的想避免 PCI 合规性，Authorize.Net 提供了一个托管版本的 CIM，它可以让您完全避免处理信用卡信息。

如果您的雇主不想与 Authorize.Net 合作，您将不得不尝试寻找提供类似服务的人。尽管我不能说它们提供的功能与 Authnet 一样多，但它们就在那里，而且 Authnet 的 API 是迄今为止最容易使用的。但至少现在你知道这是如何工作的。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-25T20:53:10.723

一些支付处理器支持单个授权的多个部分捕获，但不是全部。[Cyber​​source 的这份文档](http://apps.cybersource.com/library/documentation/dev_guides/CC_Svcs_SO_API/Credit_Cards_SO_API.pdf)（从第 53 页开始）描述了哪些支付处理商支持和不支持它。摘要如下（基于 Cyber​​source 文档）：

**支持多个部分捕获的支付处理器：**

*   ​AIBMS
*   ​亚洲、中东和非洲门户
*   巴克莱
*   ​CCS（CAFIS）
*   ​大通支付技术解决方案
*   FDC指南针
*   ​GPN
*   汇丰银行
*   ​JCN网关
*   ​​​​​​
*   ​OmniPay Direct
*   OmniPay-爱尔兰
*   ​TSYS 采集解决方案

**​不支持多个部分捕获的支付处理器：**

*   美国运通直通
*   ​阿托斯
*   切洛
*   Comerico 拉丁裔
*   Cyber​​source 拉丁美洲处理
*   ​通过 VisaNet 的 Cyber​​source
*   FDC德国
*   FDC纳什维尔全球
*   FDMS纳什维尔
*   FDMS南
*   ​全球收藏
*   哈佛商学院
*   ​劳埃德-OmniPay
*   ​劳埃德TSD卡网
*   莫内里斯
*   流线型

# java - 使用 For 循环生成模式

> ID：13312775
> 
> 赞同：0
> 
> 时间：2012-11-09T17:14:49.093
> 
> 标签：java, loops

我将如何仅使用`for`循环生成此序列？

```
***+++------+++*** 
```

我试过这样做，但看起来不正确

```
String u ="";
for(i=1;i<3;++i)
{
    u = u + "***" + "+++" + "---";
}

System.out.println(u); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:18:40.857

好吧，你可以这样做：

```
for (int i = 1; i < 2; ++i) {
    System.out.println("***+++------+++***");
} 
```

但大概这不是你想要的。这个怎么样：

```
String symbols = "*+-";
for (int s = 0; s < symbols.length(); ++s) {
    char c = s.charAt(s);
    for (int i = 0; i < 3; ++i) {
        System.out.print(c);
    }
}
for (int s = symbols.length() - 1; s >= 0; --s) {
    char c = s.charAt(s);
    for (int i = 0; i < 3; ++i) {
        System.out.print(c);
    }
}
System.out.println(); 
```

要不然：

```
String symbols = "*+-";
int len = symbols.length();
StringBuilder output = new StringBuilder();
for (int s = 0; s < len; ++s) {
    char c = s.charAt(s);
    for (int i = 0; i < 3; ++i) {
        output.append(c);
    }
}
System.out.print(output);
System.out.println(output.reverse()); 
```

甚至：

```
String symbols = "*+-";
int len = symbols.length();
StringBuilder prefix = new StringBuilder();
StringBuilder suffix = new StringBuilder();
for (int s = 0; s < len; ++s) {
    char c1 = s.charAt(s);
    char c2 = s.charAt(len - 1 - 1);
    for (int i = 0; i < 3; ++i) {
        prefix.append(c1);
        suffix.append(c2);
    }
}
System.out.print(prefix);
System.out.println(suffix); 
```

# python - 您将如何在 Selenium 2（Python 驱动程序）的输入文件元素中键入文本？

> ID：13312780
> 
> 赞同：2
> 
> 时间：2012-11-09T17:14:57.940
> 
> 标签：python, file, selenium

Selenium 中的常见问题是在输入元素 ( `type="file"`) 中输入文本。由于安全原因，此操作无法使用 JavaScript 完成。

通常（使用其他输入，或使用文件输入但使用 Selenium IDE）这将是：

```
driver.find_element_by_id("inputFileId").send_keys("/tmp/tmp.txt") 
```

但这根本行不通。

我找到的一些解决方案是：

*   使用 *chrome 环境类型而不是 *firefox 或 *iexplore。
*   在 Mozilla 配置中设置`singed.applets.codebase_principal_support`为。`true`

他们都没有为我工作。

为了能够运行这些测试，有什么方法可以避免对 Firefox 的这种安全限制？

# android - 从相机捕获的图像未显示（OnActivityResult）

> ID：13312782
> 
> 赞同：2
> 
> 时间：2012-11-09T17:15:07.677
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我无法检索我刚刚拍摄的照片。我认为我的 OnActivityResult 有问题，案例 CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE。按案例 1 从相册中检索照片效果很好。请善意的建议。

源代码：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) { 
        super.onActivityResult(requestCode, resultCode, data); 
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
           if(resultCode == RESULT_OK){     
             Uri targetUri = (data != null) ? data.getData() : null;
             if (targetUri == null) {
                 targetUri = fileUri;
             }
             imageView.setImageURI(targetUri);
           }
           if(resultCode == RESULT_CANCELED){   
             Uri targetUri = (data != null) ? data.getData() : null;
             if (targetUri == null) {
                 targetUri = fileUri;
             }
             imageView.setImageURI(targetUri);
           }
           else{  ; 
             Uri targetUri = (data != null) ? data.getData() : null;
             if (targetUri == null) {
                 targetUri = fileUri;
             }
             imageView.setImageURI(targetUri);
           }
    }   
    else if(requestCode == 1) {
        if(resultCode == RESULT_OK){  
            Uri selectedImage = data.getData();
            imageView.setImageURI(selectedImage);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:23:32.927

不幸的是，您是否获得图像取决于手机制造商。每个 Android 版本和每个制造商的行为似乎都略有不同。有时 URL 在结果中作为“数据”参数提供（这就是你正在做的），但有时它只是空的。我什至有一部电话返回了 RESULT_CANCEL，尽管它运行良好。

似乎没有办法实现各种不同的后备。这是我目前在我们的一个项目中使用的代码。成员变量`mTargetUri`需要设置为您作为 Intent 参数提供的输出文件名`MediaStore.EXTRA_OUTPUT`，`mCaptureTime`应`Sytem.currentTimeMillis()`在启动 Intent 之前设置为正确。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            Log.v(LOG_TAG, "Camera intent succeeded");
        }
        else if (resultCode == RESULT_CANCELED) {
            Log.i(LOG_TAG, "Camera intent aborted");
        }
        else {
            Log.e(LOG_TAG, "Camera intent failed with result code: " + resultCode);
        }

        // Regardless of the resultCode we're going to check if a new photo has been
        // created on the phone. At least on the Samsung Galaxy S3 the behavior
        // could be observed that although the result code was "0" the camera app
        // created two (!) files on the SD card.

        // Image captured and saved to fileUri specified in the Intent
        Uri targetUri = (data != null) ? data.getData() : null;
        if (targetUri == null) {
            Log.w(LOG_TAG, "Camera intent returned empty result.");
            targetUri = mTargetUri;
        }

        if (targetUri != null) {
            String targetFilePath = targetUri.getPath();
            File targetFile = new File(targetFilePath);
            if (targetFile.exists()) {
                Log.i(LOG_TAG, "Image saved to: " + targetUri.toString());

                // Fix for issue reported here: http://code.google.com/p/android/issues/detail?id=22822
                // and here: http://code.google.com/p/android/issues/detail?id=19268
                // We're following the proposed solution from https://stackoverflow.com/questions/8450539/
                int rotation = -1;
                long fileSize = targetFile.length();
                Cursor mediaCursor = getContentResolver().query(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                        new String[] { 
                            MediaStore.Images.ImageColumns.ORIENTATION, 
                            MediaStore.MediaColumns.SIZE,
                            MediaStore.MediaColumns.DATA }, 
                        MediaStore.MediaColumns.DATE_ADDED + ">=?", 
                        new String[] { String.valueOf(mCaptureTime/1000 - 1)}, 
                        MediaStore.MediaColumns.DATE_ADDED + " desc");

                if ((mediaCursor != null) && (mCaptureTime != 0)) {
                    if (mediaCursor.moveToFirst()) {
                        do {
                            long size = mediaCursor.getLong(1);
                            Uri uri = Uri.parse(mediaCursor.getString(2));
                            // Extra check to make sure that we are getting the orientation from the proper file
                            if (size == fileSize && !uri.equals(targetUri.toString())) {
                                rotation = mediaCursor.getInt(0);
                                break;
                            }
                        } while (mediaCursor.moveToNext());
                    }
                    mediaCursor.close();
                }

                if (rotation == -1) {
                    // It seems that there has been no duplication and no rotation issue so far. This means we can
                    // add our newly created file to the media library.
                    // TODO
                }
                else {
                    // Looks like the picture already exists in the media library. This indicates we got a duplicate.
                    Log.w(LOG_TAG, "Duplicate image found for " + targetUri.toString() + " in media library. Deleting the copy.");
                    if (!targetFile.delete()) {
                        Log.e(LOG_TAG, "Failed to delete duplicate image.");
                    }
                }
            }
            }
    }
} 
```

代码来自 Stackoverflow 和其他网站上的不同来源。基本思想是我们

1.  忽略结果代码 (`RESULT_OK`或`RESULT_CANCELED`)，因为它们不表示照片是否已拍摄并存储在 SD 卡上。上面的代码只是记录值，但在任何情况下都会继续。
2.  然后我们检查是否有意图结果提供的 URI。如果我们得到一个 URI，那么可以安全地假设它实际上会指向新拍摄的照片。但是，尽管一切都非常成功，但我们不会得到这样的 URI。为了处理这种情况，我们只需使用我们最初提供给相机活动 ( `mTargetUri`) 的 URI，希望我们能在那里找到新文件。
3.  在一些较新的设备上，相机应用程序会自动将新照片添加到媒体库，然后按照我们最初在`targetUri`. 这种方法的问题是我们最终会得到重复的图像。为了解决这个问题，我们遵循源自以下 Stackoverflow 问题的逻辑：[使用 ACTION_IMAGE_CAPTURE 拍摄的图像在某些较新的设备上总是为 ExifInterface.TAG_ORIENTATION 返回 1](https://stackoverflow.com/questions/8450539/)。我不会在这里详细介绍（只需点击链接以获得更好的理解），但基本思想是我们查询 Android 媒体商店并通过比较时间戳检查它是否已经包含我们的新照片（`mCaptureTime`设置`System.currentTimeMillis()`为捕获意图最初是开始的）。
4.  如果我们在媒体存储中找到了一个条目，我们只需删除重复项。

这种逻辑应该适用于几乎所有 Android 设备的所有情况。到目前为止，我们已经在十几种不同的设备和 Android 版本上对其进行了测试，没有出现其他问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T10:47:35.137

我遇到了同样的问题，一旦检查你有没有放任何与历史相关的标签？

不要`android:noHistory="true"`在清单中放置标签

如果您`android:noHistory="true"`在清单内的活动中使用，它将在停止后从堆栈中删除。

注意：如果您使用的是选项卡活动，那么您也不应该使用`android:noHistory="true"`

或者简单地`android:noHistory="false"`在 manifest 中放入活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:11:26.577

尝试转动相机并在风景模式下拍照。Mediastore Camera Intent 似乎只拍摄风景照片。

# c - fgets 上的 pthread 和 fopen64 段错误

> ID：13312791
> 
> 赞同：7
> 
> 时间：2012-11-09T17:15:40.797
> 
> 标签：c, linux, pthreads, large-files

我正在使用 Kubuntu 12.04、gcc 4.6.3。如果我创建一个 pthread，请使用 fopen64，然后使用 fgets - 它会出现段错误。用 fopen 替换 fopen64 的相同代码 - 它成功了。不创建 pthread - 它成功。那么为什么会失败呢？这是代码：

```
#include <stdio.h>
#include <pthread.h>
typedef struct threadArgs
{
    char* argsList;
    int argc;
} threadArgs;

void 
threadRun(void *pArg);

int
main(int argc, char* argv[])
{
    int err = 0;
    threadArgs thrArgs;
    pthread_t thrd;  

    if (argc > 1)
    {
        printf("creating thread \n");
        err = pthread_create (&thrd, NULL, (void *) &threadRun, (void *) &thrArgs);
        printf("pthread_create returned: %d \n", err);
        pthread_join(thrd, NULL);
    }
    else
    {
        printf("no thread - just calling func \n");
        threadRun((void*)&thrArgs);
    }
    printf("Exiting main() \n");

    return err;
}

void 
threadRun(void *pArg)
{
    printf("IN the Thread \n");
    char* pStr;
    FILE *pFile = NULL;

    pFile = (FILE*)fopen64("test.txt","r");
    //pFile = (FILE*)fopen("test.txt","r");

    if (pFile==NULL)
    {
        printf("pFile is NULL \n");
    }
    else
    {
        printf("pFile is NOT null \n");
        char line[256];
        pStr = fgets(line, sizeof(line),pFile);
        if (pStr)
        {
            printf("line retrieved: %s \n", line);
        }
        else
        {
            printf("no line retrieved \n");
        }
    }   

    printf("End of pthread run func \n");
    return;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:31:34.663

`pthread_create()`期望`void * (*)(void *)`作为线程函数，但您正在传递`void (*)(void *)`.

* * *

**更新：**

您缺少 的原型`fopen64()`，因此编译器假定`int`它与`FILE*`.

* * *

**更新1：**

要使此原型可用（并通过此修复您的初始问题），只需添加：

```
#define _LARGEFILE64_SOURCE 
```

作为源文件的第一行。

*附加编辑：*确切地说：`_LARGEFILE64_SOURCE`需要在ing`#define`之前编辑`#include``stdio.h`

* * *

**更新 2：**

按照我用来使 suxxer 工作的来源（`main.c`）：

```
#define _LARGEFILE64_SOURCE

#include <stdio.h>
#include <pthread.h>

typedef struct threadArgs
{
    char* argsList;
    int argc;
} threadArgs;

void *
threadRun(void *pArg);

int
main(int argc, char* argv[]) /* line 16 */
{
    int err = 0;
    threadArgs thrArgs;
    pthread_t thrd;

    if (argc > 1)
    {
        printf("creating thread \n");
        err = pthread_create (&thrd, NULL, threadRun, &thrArgs);
        printf("pthread_create returned: %d \n", err);
        pthread_join(thrd, NULL);
    }
    else
    {
        printf("no thread - just calling func \n");
        threadRun((void*)&thrArgs);
    }
    printf("Exiting main() \n");

    return err;
}

void  *
threadRun(void *pArg)  /* line 40 */
{
    printf("IN the Thread \n");
    char* pStr;
    FILE *pFile = NULL;

    pFile = fopen64("test.txt","r");

    if (pFile==NULL)
    {
        printf("pFile is NULL \n");
    }
    else
    {
        printf("pFile is NOT null \n");
        char line[256];
        pStr = fgets(line, sizeof(line),pFile);
        if (pStr)
        {
            printf("line retrieved: %s \n", line);
        }
        else
        {
            printf("no line retrieved \n");
        }
    }

    printf("End of pthread run func \n");

    return 0;
} 
```

建造者：

```
$gcc -Wall -g -o main main.c -pedantic -Wextra -std=c99 -pthread 
main.c: In function ‘main’:
main.c:16: warning: unused parameter ‘argv’
main.c: In function ‘threadRun’:
main.c:40: warning: unused parameter ‘pArg’ 
```

（没有其他错误或警告）

环境：

```
$ uname -a
Linux debian-stable 2.6.32-5-amd64 #1 SMP Sun Sep 23 10:07:46 UTC 2012 x86_64 GNU/Linux
$ gcc --version
gcc (Debian 4.4.5-8) 4.4.5
[...]
$ ldd main
        linux-vdso.so.1 =>  (0x00007fff466d6000)
        libpthread.so.0 => /lib/libpthread.so.0 (0x00007f15ccd20000)
        ibc.so.6 => /lib/libc.so.6 (0x00007f15cc9be000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f15ccf4b000) 
```

输出（使用`main.c`不带`\n`s as的源`test.txt`）：

```
$ valgrind ./main 1
==31827== Memcheck, a memory error detector
==31827== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==31827== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==31827== Command: ./main 1
==31827== 
creating thread 
pthread_create returned: 0 
IN the Thread 
pFile is NOT null 
line retrieved: #define _LARGEFILE64_SOURCE #include <stdio.h> #include <pthread.h> typedef struct threadArgs { char* argsList; int argc; } threadArgs; void * threadRun(void *pArg); int main(int argc, char* argv[]) { int err = 0; threadArgs thrArgs; pthread_t thrd; if (a 
End of pthread run func 
Exiting main() 
==31827== 
==31827== HEAP SUMMARY:
==31827==     in use at exit: 568 bytes in 1 blocks
==31827==   total heap usage: 2 allocs, 1 frees, 840 bytes allocated
==31827== 
==31827== LEAK SUMMARY:
==31827==    definitely lost: 0 bytes in 0 blocks
==31827==    indirectly lost: 0 bytes in 0 blocks
==31827==      possibly lost: 0 bytes in 0 blocks
==31827==    still reachable: 568 bytes in 1 blocks
==31827==         suppressed: 0 bytes in 0 blocks
==31827== Rerun with --leak-check=full to see details of leaked memory
==31827== 
==31827== For counts of detected and suppressed errors, rerun with: -v
==31827== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 4) 
```

# linux - inotify 不将 vim 编辑视为修改事件

> ID：13312794
> 
> 赞同：5
> 
> 时间：2012-11-09T17:15:51.633
> 
> 标签：linux, vim, inotify

我下面的示例代码监视文件以进行修改。假设被监视的文件是 foo.txt，而从示例代码中得到的二进制名称是 inotify。我对示例代码进行了两次测试。

test1:
1) ./inotify foo.txt
2) echo "hello" > foo.txt
然后一切正常，并且“**文件已修改**”已打印出来。

test2:
1) ./infity foo.txt
2) vim foo.txt
3) 以某种方式编辑并保存，但不要退出 vim
打印出来的行是 **未知的掩码 0x00008000**，检查 inotify 头文件发现这个事件掩码意味着**IN_CLOSE_WRITE** .

从我的角度来看，“编辑和保存”只是menas修改。但显然 inotify 代码对它有不同的解释。对我来说很奇怪，任何人都可以帮助解释背后的事情吗？

```
#include <sys/inotify.h>
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
  int fdnotify = -1; 

  if (argc !=2) {
    fprintf(stderr, "usage: ./inotify dir_name\n");
    exit(1);
  }

  printf("argc is %d\n", argc);

  fdnotify = inotify_init();
  if (fdnotify < 0) {
    fprintf(stderr, "inotity_init failed: %s\n", strerror(errno));
  }

  int wd = inotify_add_watch(fdnotify, argv[1], IN_MODIFY);
  if (wd < 0) {
    fprintf(stderr, "inotify_add_watch failed: %s\n", strerror(errno));
  }

  while(1) {
    char buffer[4096];
    struct inotify_event *event = NULL;

    int len = read(fdnotify, buffer, sizeof(buffer));

    if (len < 0) {
      fprintf(stderr, "read error %s\n", strerror(errno));
    }   

    event = (struct inotify_event *) buffer;

    while(event != NULL) {
      if ((event->mask & IN_MODIFY)  ) { 
        printf("File modified %s\n", event->name);
      } else {
 printf("unknown Mask 0x%.8x\n", event->mask);
      }
      len -= sizeof(*event) + event->len;

      if (len > 0)
        event = ((void *) event) + sizeof(event) + event->len;
      else
        event = NULL;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T17:30:26.877

Vim 是一个程序，它不会在您保存文件时直接保存到文件中。它会创建一个通常命名为的临时文件`.filename.swp`，并且仅当您关闭 vim 时，此文件才会重命名为`filename`. 从 inotify 的常见问题解答：

> IN_MODIFY 事件在文件内容更改时发出（例如通过 write() 系统调用），而 IN_CLOSE_WRITE 在关闭更改的文件时发生。这意味着每个更改操作都会导致一个 IN_MODIFY 事件（在打开文件的操作过程中可能会发生多次），而 IN_CLOSE_WRITE 仅发出一次（关闭文件时）。

所以你得到的事件实际上是有意义的。假设您有一个名为`filename`. 当您打开该文件时，`filename`会创建另一个名为`.filename.swp`. 如果受到监控，您对此文件执行的所有修改都会生成许多`IN_MODIFY`事件。当您实际保存时，最终发生的是，vim 重命名此文件并关闭它，从而生成`IN_CLOSE_WRITE`事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T03:22:04.710

我认为掩码 0x00008000 是 IN_IGNORED 根据inotify.h：

```
#define IN_CLOSE_WRITE   0x00000008 /* Writtable file was closed.  */
#define IN_IGNORED   0x00008000 /* File was ignored.  */ 
```

事件掩码是否可能是 IN_IGNORED？

# jquery - Jquery在克隆后更新输入框

> ID：13312795
> 
> 赞同：0
> 
> 时间：2012-11-09T17:15:55.043
> 
> 标签：jquery, dom-traversal, jquery-traversing

我有以下代码：

```
$(document).ready(function($) {
$(".dispadd").click(function(event) {
    event.preventDefault();
    $('#hiddenrow')
        .clone()
            .removeAttr('id')
            .show()
            .appendTo( $('#disptable').after().show() 
    );
});
}); 
```

非常适合将包含表单控件的表行从一个表复制到另一个表。我现在的问题是，如何在将其中一个表单输入字段添加到新表时更新它？我需要更新的表单输入 (type=text) 的名称和 ID 为 cat。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:20:56.293

你可以这样做：

```
$('#hiddenrow')
        .clone()
            .removeAttr('id').find('#cat').val('newvalue').end()
            .show()
            .appendTo( $('#disptable').after().show() 
); 
```

查看工作[**演示**](https://tinker.io/93a58)

# teamcity - TeamCity - 未满足的要求：存在 DotNetFramework4.5_x86

> ID：13312796
> 
> 赞同：10
> 
> 时间：2012-11-09T17:15:59.767
> 
> 标签：teamcity, agent

我是 TeamCity 的新手，目前遇到不兼容代理的问题：

```
Unmet requirements: 
DotNetFramework4.5_x86 exists 
```

有谁知道如何解决这一问题？我必须在某处添加对 .NET 4.5 的引用吗？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T10:08:51.550

您有一个 DotNetFramework4.5_x86 存在的代理要求，但在此代理上它不存在。如果需要，您需要在该代理计算机上安装 .NET。TeamCity 检测到此计算机上未安装 .NET，因此您的构建无法运行。

如果要求不正确并且您的构建不需要，则可以通过以下方式将其删除：

```
Edit build Configuration > Agent Requirements 
```

然后在代理要求表中，您将看到：

```
DotNetFramework4.5_x86 exists 
```

并且有一个按钮可以删除这个要求。删除要求后，代理将显示在“兼容代理”下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-02T22:47:11.520

我们有一个工作正常的代理，但突然停止了与原始问题中相同的未满足要求。

我尝试按照@arcain 的建议重新启动代理服务，但这不起作用。所以我去了 TeamCity “代理摘要”页面并禁用然后重新启用代理，它又开始工作了。

# wpf - WPF DataGrid、分组和滚动条大小调整

> ID：13312797
> 
> 赞同：1
> 
> 时间：2012-11-09T17:16:01.360
> 
> 标签：wpf, datagrid, scrollbar

所以，我最近进入了一个项目，他们使用标准的 .NET WPF DataGrid，使用 Grouping 在每个相应组下构建几个项目，滚动条的行为非常不寻常。

我注意到它似乎对元素的大小完全感到困惑。它不会通过元素的像素大小滚动——它会滚动到 Groupings 的大小，看起来像。我不知道项目后端是否存在隐式风格，但我想知道：

有没有办法让 WPF DataGrid 按总大小的像素滚动并保持该位置，而不是通过组与内容对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:24:18.930

您应该尝试`ScrollViewer.CanContentScroll="False"`在 DataGrid 上进行设置。但是，请注意，这将禁用行虚拟化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-11-09T21:47:51.280

从 .NET 4.5 开始，您可以使用以下功能通过虚拟化进行良好的滚动，从而提高性能：`EnableColumnVirtualization="True" VirtualizingPanel.VirtualizationMode="Recycling" EnableRowVirtualization="True"`

`VirtualizingPanel`有更有趣的属性要改变

# oracle - Oracle 合并两个有日期间隔的表

> ID：13312799
> 
> 赞同：2
> 
> 时间：2012-11-09T17:16:05.237
> 
> 标签：oracle, plsql

[这个问题与我最近](https://stackoverflow.com/questions/13254895/oracle-query-to-fill-in-day-gaps-between-grouped-records)发布的另一个问题非常相关，但我发布了一个新问题，因为这在解决问题时提供了更多的复杂性。我正在寻求一些甲骨文忍者和摇滚明星的帮助，我觉得这是对他们专业知识的一个很好的挑战和锻炼。

基本上我有两个表，TableA 和 TableB。

```
-- For TableA
CREATE TABLE TableA
(
  ID          VARCHAR2(10),
  LOCN        VARCHAR2(10),
  START_DATE  DATE,
  END_DATE    DATE
)
STORAGE    (
            BUFFER_POOL      DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
NOMONITORING
/

-- Populate TableA
INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P1',   '01',   TO_DATE('02/04/1996', 'MM/DD/YYYY'),  TO_DATE('02/22/1996', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P1',   '01',   TO_DATE('02/23/1996', 'MM/DD/YYYY'),  TO_DATE('05/28/2002', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P1',   '01',   TO_DATE('05/29/2002', 'MM/DD/YYYY'),  TO_DATE('05/03/2005', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P1',   '01',   TO_DATE('05/04/2005', 'MM/DD/YYYY'),  TO_DATE('05/04/2005', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P2',   '30',   TO_DATE('01/31/1996', 'MM/DD/YYYY'),  TO_DATE('02/06/1996', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P2',   '02',   TO_DATE('02/07/1996', 'MM/DD/YYYY'),  TO_DATE('02/13/1996', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P2',   '02',   TO_DATE('02/14/1996', 'MM/DD/YYYY'),  TO_DATE('01/01/2099', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P3',   '03',   TO_DATE('02/07/1996', 'MM/DD/YYYY'),  TO_DATE('02/13/1996', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1P3',   '03',   TO_DATE('02/14/1996', 'MM/DD/YYYY'),  TO_DATE('01/01/2099', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('1S4',   '42',   TO_DATE('11/06/2001', 'MM/DD/YYYY'),  TO_DATE('01/01/2099', 'MM/DD/YYYY');

INSERT INTO TableA(ID, LOCN, START_DATE, END_DATE)
VALUES('3S4',   '42',   TO_DATE('11/06/2001', 'MM/DD/YYYY'),  TO_DATE('01/01/2099', 'MM/DD/YYYY');

-- For TableB
CREATE TABLE TableB
(
  ID           VARCHAR2(10),
  POSTING      VARCHAR2(20),
  DESCRIPTION  VARCHAR2(100),
  OTHER_ID     VARCHAR2(10),
  START_DATE   DATE,
  END_DATE     DATE
)
STORAGE    (
            BUFFER_POOL      DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
NOMONITORING
/

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1P1', 'PROFESSOR', 'Sch 1 Quad 1 Area', 'P1', '02/04/1996', '01/01/2099');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1P2', 'PROFESSOR', 'Sch 1 Quad 2 Area', 'P2', '01/31/1996', '01/01/2099');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1P3', 'PROFESSOR', 'Sch 1 Quad 3 Area', 'P3', '02/05/1996', '01/01/2099');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1S4', 'SUPERVISOR', 'Sch 1 CO Supervisor 4', '1S4', '02/05/1996', '03/18/2002');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1S4', 'SUPERINTENDENT', 'Sch 1 CD Superintendent', '1S4', '03/19/2002', '06/09/2009');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('1S4', 'SUPERVISOR', 'Sch 1 CO Supervisor 4', '1S4', '06/10/2009', '01/01/2099');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('2S5', 'SUPERVISOR', 'Sch 2 CAO Supervisor 5', '2S5', '10/26/2002', '06/09/2009');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('2S5', 'SUPERINTENDENT', 'Sch 2 CAO Superintendent 5', '2S5', '06/10/2009', '07/14/2009');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('2S5', 'SUPERINTENDENT', 'Sch 2 CAO Superintendent 5', 'S5', '07/15/2009', '01/01/2099');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('3S4', 'SUPERVISOR', 'Sch 3 CO Supervisor 4', '3S4', '02/05/1996', '03/18/2002');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('3S4', 'SUPERINTENDENT', 'Sch 3 CD Superintendent', '3S4', '03/19/2002', '06/09/2009');

INSERT INTO TableB(ID, POSTING, DESCRIPTION, OTHER_ID, START_DATE, END_DATE)
VALUES('3S4', 'SUPERVISOR', 'Sch 3 CO Supervisor 4', '3S4', '06/10/2009', '01/01/2099'); 
```

过程如下： 在 TableA 中，所有具有相同 ID、LOCN 且具有连续 START_DATE 和 END_DATE 日期的记录将被合并。

```
ID  LOCN    START_DATE  END_DATE
1P1 01      02/04/1996  05/04/2005
1P2 30      01/31/1996  02/06/1996
1P2 02      02/07/1996  01/01/2099
1P3 03      02/07/1996  01/01/2099
1S4 42      11/06/2001  01/01/2099
3S4 42      11/06/2001  01/01/2099 
```

在 TableB 中，所有具有相同 ID、POSTING、OTHER_ID 且连续 START_DATE 和 END_DATE 的记录也将被合并。（我相信无论如何都没有可以从该表中组合的数据）。

```
ID  POSTING         DESCRIPTION                 OTHER_ID    START_DATE  END_DATE
1P1 PROFESSOR       Sch 1 Quad 1 Area           P1          02/04/1996  01/01/2099
1P2 PROFESSOR       Sch 1 Quad 2 Area           P2          01/31/1996  01/01/2099
1P3 PROFESSOR       Sch 1 Quad 3 Area           P3          02/05/1996  01/01/2099
1S4 SUPERVISOR      Sch 1 CO Supervisor 4       1S4         02/05/1996  03/18/2002
1S4 SUPERINTENDENT  Sch 1 CD Superintendent     1S4         03/19/2002  06/09/2009
1S4 SUPERVISOR      Sch 1 CO Supervisor 4       1S4         06/10/2009  01/01/2099
2S5 SUPERVISOR      Sch 2 CAO Supervisor 5      2S5         10/26/2002  06/09/2009
2S5 SUPERINTENDENT  Sch 2 CAO Superintendent 5  2S5         06/10/2009  07/14/2009
2S5 SUPERINTENDENT  Sch 2 CAO Superintendent 5  S5          07/15/2009  01/01/2099
3S4 SUPERVISOR      Sch 3 CO Supervisor 4       3S4         02/05/1996  03/18/2002
3S4 SUPERINTENDENT  Sch 3 CD Superintendent     3S4         03/19/2002  06/09/2009
3S4 SUPERVISOR      Sch 3 CO Supervisor 4       3S4         06/10/2009  01/01/2099 
```

根据 ID 合并 TableA 和 TableB 中的记录。LOCN 列将添加到表 B 中，并且只会根据表 A 中的日期范围结转。结果数据应如下所示：

```
ID  UNIT_TYPE       DESCRIPTION                 OTHER_ID    START_DATE  END_DATE    LOCN
1P1 PROFESSOR       Sch 1 Quad 1 Area           P1          02/04/1996  05/04/2005  01
1P1 PROFESSOR       Sch 1 Quad 1 Area           P1          05/05/2005  01/01/2099  {NULL}
1P2 PROFESSOR       Sch 1 Quad 2 Area           P2          01/31/1996  02/06/1996  30
1P2 PROFESSOR       Sch 1 Quad 2 Area           P2          02/07/1996  01/01/2099  02
1P3 PROFESSOR       Sch 1 Quad 3 Area           P3          02/05/1996  02/06/1996  {NULL}
1P3 PROFESSOR       Sch 1 Quad 3 Area           P3          02/07/1996  01/01/2099  03
1S4 SUPERVISOR      Sch 1 CO Supervisor 4       1S4         02/05/1996  11/05/2001  {NULL}
1S4 SUPERVISOR      Sch 1 CO Supervisor 4       1S4         11/06/2001  03/18/2002  42
1S4 SUPERINTENDENT  Sch 1 CD Superintendent     1S4         03/19/2002  06/09/2009  42
1S4 SUPERVISOR      Sch 1 CO Supervisor 4       1S4         06/10/2009  01/01/2099  42
2S5 SUPERVISOR      Sch 2 CAO Supervisor 5      2S5         10/26/2002  06/09/2009  {NULL}
2S5 SUPERINTENDENT  Sch 2 CAO Superintendent 5  2S5         06/10/2009  07/14/2009  {NULL}
2S5 SUPERINTENDENT  Sch 2 CAO Superintendent 5  S5          07/15/2009  01/01/2099  {NULL}
3S4 SUPERVISOR      Sch 3 CO Supervisor 4       3S4         02/05/1996  11/05/2001  {NULL}
3S4 SUPERVISOR      Sch 3 CO Supervisor 4       3S4         11/06/2001  03/18/2002  42
3S4 SUPERINTENDENT  Sch 3 CD Superintendent     3S4         03/19/2002  06/09/2009  42
3S4 SUPERVISOR      Sch 3 CO Supervisor 4       3S4         06/10/2009  01/01/2099  42 
```

很想听听任何可行的方法来解决这个问题。非常感谢。

补充：这是我迄今为止编写的用于折叠 TableA 中的记录的查询

```
SELECT ID, LOCN, TO_CHAR(MIN(START_DATE), 'MM/DD/YYYY') START_DATE, TO_CHAR(MAX(END_DATE), 'MM/DD/YYYY') END_DATE
        FROM
             (
              SELECT ID, LOCN, START_DATE, END_DATE, MAX(GRP) OVER (ORDER BY ID, START_DATE) GRP
              FROM
                  (
                   SELECT ID, LOCN,
                          CASE WHEN START_DATE - LAG(END_DATE) OVER (PARTITION BY ID, LOCN ORDER BY START_DATE ASC) <= 1 THEN
                            NULL
                          ELSE
                            ROWNUM
                          END GRP,
                          START_DATE,
                          NVL(END_DATE, SYSDATE) END_DATE
                   FROM TableA
                   ORDER BY ID ASC, START_DATE ASC
                  )
             )
        GROUP BY ID, LOCN, GRP
        ORDER BY ID ASC, START_DATE ASC; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T18:48:54.170

由于摇滚明星忙于过着放荡（如果来之不易）的生活方式，而忍者看起来他们会忙一段时间，我会试一试...

按照您的布局方式，您希望首先折叠连续的记录`TableA`并将该结果用于 (可能已折叠) `TableB`。我不确定将其作为一个单独的步骤是否是解决整体问题的理想选择，但我现在会继续这样做。我发现最简单的折叠行的一般方法是：

```
select id, locn, max(start_date) as start_date, max(end_date) as end_date
from (
    select id, locn,
        case when start_date = lag_end_date  + interval '1' day then null
            else start_date end as start_date,
        case when end_date = lead_start_date - interval '1' day then null
            else end_date end as end_date,
        row_number() over (partition by id order by start_date)
            - row_number() over (partition by id, locn
                order by start_date) as chain
    from (
        select id, locn, start_date, end_date,
            lead(start_date) over (partition by id, locn
                order by start_date) as lead_start_date,
            lag(end_date) over (partition by id, locn
                order by start_date) as lag_end_date
        from TableA
    )   
)
group by id, locn, chain
order by 1, 3, 2;

ID         LOCN       START_DATE END_DATE
---------- ---------- ---------- ----------
1P1        01         02/04/1996 05/04/2005
1P2        02         02/07/1996 01/01/2099
1P2        30         01/31/1996 02/06/1996
1P3        03         02/07/1996 01/01/2099
1S4        42         11/06/2001 01/01/2099
3S4        42         11/06/2001 01/01/2099 
```

最里面的`select`用途`lead`和`lag`窥视相邻的行（你在上一个问题中暗示过）。

下一层将连续值（即一行的开始日期是前一行的结束日期之后的第二天）设置为空；如果你只运行那部分，你会看到连续的范围开始和结束出现。它还添加了一个`chain`伪列，可以处理`id`切换回以前使用的`locn`; 说`1P2`要回去`locn=30`。（这是我最初在[这里](https://stackoverflow.com/questions/4324623/sql-group-by-only-rows-which-are-in-sequence/4324654#4324654)看到的一种方法，但也可以看到更多关于[间隙和岛屿](https://stackoverflow.com/tags/gaps-and-islands/hot)的信息）。如果没有这个，所有的“岛屿”`id/locn`都会被视为一个块，你最终会得到重叠的日期范围。

外层用户`min`并`max`删除空值并产生最终结果。

使用它——如果你在 11gR2 上——使用[递归 CTE](http://rwijk.blogspot.co.uk/2009/11/recursive-subquery-factoring.html)以递归方式加入以获得所有组合。这只是我对其中一个的第二次真正的尝试，所以其他人可能会指出缺陷或改进，如果他们能把自己从他们的 M&Ms 中撕下来……虽然可能会给你一些指示。

```
with a as (
    select id, locn, max(start_date) as start_date, max(end_date) as end_date
    from (
        select id, locn,
            case when start_date = lag_end_date  + interval '1' day then null
                else start_date end as start_date,
            case when end_date = lead_start_date - interval '1' day then null
                else end_date end as end_date,
            row_number() over (partition by id order by start_date)
                - row_number() over (partition by id, locn
                    order by start_date) as chain
        from (
            select id, locn, start_date, end_date,
                lead(start_date) over (partition by id, locn
                    order by start_date) as lead_start_date,
                lag(end_date) over (partition by id, locn
                    order by start_date) as lag_end_date
            from TableA
        )
    )
    group by id, locn, chain
),
b as (
    select id, posting, description, other_id, start_date, end_date,
        row_number() over (partition by id, posting, description,
            other_id order by start_date, end_date) as rn
    from TableB
),
r (id, posting, description, other_id, rn, start_date, end_date, locn) as (
    select b.id, b.posting, b.description, b.other_id, b.rn,
        b.start_date,
        case
            when not (a.start_date > b.end_date or a.end_date < b.start_date)
                and a.start_date <= b.end_date and a.end_date < b.end_date
                then a.end_date
            when not (a.start_date > b.end_date or a.end_date < b.start_date)
                and a.start_date <= b.end_date and a.start_date > b.start_date
                then a.start_date - interval '1' day
            else b.end_date
        end as end_date,
        case
            when a.start_date <= b.start_date and a.end_date >= b.start_date
                then a.locn
        end
    from b
    left join (
        select id, locn, start_date, end_date,
            row_number() over (partition by id order by start_date) as rn
        from a
    ) a on a.id = b.id
        and a.rn = 1
    union all
    select b.id, b.posting, b.description, b.other_id, b.rn,
        case
            when a.start_date is null then r.end_date + interval '1' day
            else a.start_date
        end as start_date,
        case
            when a.start_date is null then b.end_date
            when not (a.start_date > r.end_date or a.end_date < r.start_date)
                then least(a.end_date, b.end_date)
            when a.end_date < b.end_date then a.start_date - interval '1' day
            else b.end_date
        end as end_date,
        a.locn
    from b
    join r on r.id = b.id
        and r.posting = b.posting
        and r.description = b.description
        and r.other_id = b.other_id
        and r.rn = b.rn
        and r.start_date = b.start_date
        and r.end_date < b.end_date
    left join a on a.id = r.id
        and a.start_date > r.end_date
) 
select id, posting as unit_type, description, other_id,
    start_date, end_date, locn
from r
order by id, start_date; 
```

我相信这会得到你想要的结果：

```
ID         UNIT_TYPE            DESCRIPTION                    OTHER_ID   START_DATE END_DATE   LOCN
---------- -------------------- ------------------------------ ---------- ---------- ---------- ----------
1P1        PROFESSOR            Sch 1 Quad 1 Area              P1         02/04/1996 05/04/2005 01
1P1        PROFESSOR            Sch 1 Quad 1 Area              P1         05/05/2005 01/01/2099
1P2        PROFESSOR            Sch 1 Quad 2 Area              P2         01/31/1996 02/06/1996 30
1P2        PROFESSOR            Sch 1 Quad 2 Area              P2         02/07/1996 01/01/2099 02
1P3        PROFESSOR            Sch 1 Quad 3 Area              P3         02/05/1996 02/06/1996
1P3        PROFESSOR            Sch 1 Quad 3 Area              P3         02/07/1996 01/01/2099 03
1S4        SUPERVISOR           Sch 1 CO Supervisor 4          1S4        02/05/1996 11/05/2001
1S4        SUPERVISOR           Sch 1 CO Supervisor 4          1S4        11/06/2001 03/18/2002 42
1S4        SUPERINTENDENT       Sch 1 CD Superintendent        1S4        03/19/2002 06/09/2009 42
1S4        SUPERVISOR           Sch 1 CO Supervisor 4          1S4        06/10/2009 01/01/2099 42
2S5        SUPERVISOR           Sch 2 CAO Supervisor 5         2S5        10/26/2002 06/09/2009
2S5        SUPERINTENDENT       Sch 2 CAO Superintendent 5     2S5        06/10/2009 07/14/2009
2S5        SUPERINTENDENT       Sch 2 CAO Superintendent 5     S5         07/15/2009 01/01/2099
3S4        SUPERVISOR           Sch 3 CO Supervisor 4          3S4        02/05/1996 11/05/2001
3S4        SUPERVISOR           Sch 3 CO Supervisor 4          3S4        11/06/2001 03/18/2002 42
3S4        SUPERINTENDENT       Sch 3 CD Superintendent        3S4        03/19/2002 06/09/2009 42
3S4        SUPERVISOR           Sch 3 CO Supervisor 4          3S4        06/10/2009 01/01/2099 42

17 rows selected. 
```

这是使用三个 CTE。`a`如上所述，是 的折叠版本`TableA`。`b`是`TableB`，但是添加了一个行号列，我想我以后需要在递归期间保持记录的同步。`r`是乐趣开始的地方。

的第一部分`r`为每个`TableB`条目生成初始数据，`TableA`如果合适，匹配值来自 - 但如果可能有多个匹配记录，则仅来自第一个匹配记录。这里的棘手之处在于弄清楚`end_date`应该是什么。如果根本没有重叠`TableA`记录，那么它可能只是`TableB`结束日期；如果有，但它在`TableB`记录之后开始，那么这需要在开始之前立即结束`TableA`。否则，这取决于记录是在`TableA`记录之前还是之后结束`TableB`。

只运行那部分：

```
with a as (...), b as (...)
select b.id, b.posting, b.description, b.other_id, b.rn,
    b.start_date,
    case
        when not (a.start_date > b.end_date or a.end_date < b.start_date)
            and a.start_date <= b.end_date and a.end_date < b.end_date
            then a.end_date
        when not (a.start_date > b.end_date or a.end_date < b.start_date)
            and a.start_date <= b.end_date and a.start_date > b.start_date
            then a.start_date - interval '1' day
        else b.end_date
    end as end_date,
    case
        when a.start_date <= b.start_date and a.end_date >= b.start_date
            then a.locn
    end
from b
left join (
    select id, locn, start_date, end_date,
        row_number() over (partition by id order by start_date) as rn
    from a
) a on a.id = b.id
    and a.rn = 1
order by id, start_date; 
```

...给出了这个（为了便于阅读而抑制了描述）：

```
ID         UNIT_TYPE            OTHER_ID   START_DATE END_DATE   LOCN
---------- -------------------- ---------- ---------- ---------- ----------
1P1        PROFESSOR            P1         02/04/1996 05/04/2005 01
1P2        PROFESSOR            P2         01/31/1996 02/06/1996 30
1P3        PROFESSOR            P3         02/05/1996 02/06/1996
1S4        SUPERVISOR           1S4        02/05/1996 11/05/2001
1S4        SUPERINTENDENT       1S4        03/19/2002 06/09/2009 42
1S4        SUPERVISOR           1S4        06/10/2009 01/01/2099 42
2S5        SUPERVISOR           2S5        10/26/2002 06/09/2009
2S5        SUPERINTENDENT       2S5        06/10/2009 07/14/2009
2S5        SUPERINTENDENT       S5         07/15/2009 01/01/2099
3S4        SUPERVISOR           3S4        02/05/1996 11/05/2001
3S4        SUPERINTENDENT       3S4        03/19/2002 06/09/2009 42
3S4        SUPERVISOR           3S4        06/10/2009 01/01/2099 42

12 rows selected. 
```

对于`IP3`，最初没有匹配的`TableA`记录，但请注意`end_date`设置为稍后匹配的记录开始的前一天。

的第二部分`r`,`union all`是递归部分。对于每条`TableB`记录，它都会重新连接到自己寻找生成的记录`end_date`早于原始记录的记录，就像 的情况一样`IP3`，这意味着还有一段时间需要填写。然后它会寻找合适的`TableA`记录并生成和的合适值`start_date`，`end_date`同样取决于记录是否重叠以及如何重叠。我完全有可能在这里错过了一些边缘情况。

你提到可能有连续的范围也可以折叠`TableB`，你可以给它一个与我展示的类似的处理`TableA`。我不确定这样做是否一定是最好或最清楚的一点，即使只有一张桌子需要它；我只是在那里真正做到了，因为这就是你描述这个过程的方式。

如果您将递归 CTE 修改为针对基表（可能在此过程中稍微简化它），您可以对该结果集而不是单个表应用间隙和孤岛方法，因此哪个表无关紧要差距是由造成的。

# visual-studio-2010 - “编码的 UI 测试生成器”十字准线在 IE 中不可用

> ID：13312801
> 
> 赞同：5
> 
> 时间：2012-11-09T17:16:15.757
> 
> 标签：visual-studio-2010, automated-tests, coded-ui-tests

我正在尝试测试 Visual Studio 对 Web 应用程序的自动化测试功能，而[Coded UI Test Builder](http://visualstudiomagazine.com/articles/2010/11/03/coded-ui-tests-1.aspx)看起来很有希望。

我可以让它记录和播放动作，但我不知道如何使用十字准线按钮来创建断言。

例如，在[此视频](http://channel9.msdn.com/Series/Visual-Studio-2012-Premium-and-Ultimate-Overview/Visual-Studio-Ultimate-2012-Easily-testing-user-interfaces-with-Coded-UI-tests)中，演示者开始录制，然后打开 IE 并能够为断言选择不同的 UI 元素。但是，当我这样做时，只要我打开 IE，十字准线就会变灰。

我是否需要安装插件或其他工具才能使 Coded UI Test Builder 能够访问 DOM？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:06:05.740

好吧，我想我明白了。看起来您必须暂停录制，然后单击“生成代码”才能选择十字准线。然后，您将断言创建为单独的步骤并为此“生成代码”。

我不确定这是否是您的工作流程应该是的，但它一直对我有用。

# uml - 用例图到类图的转换工具

> ID：13312804
> 
> 赞同：0
> 
> 时间：2012-11-09T17:16:22.433
> 
> 标签：uml

是否有任何软件工具可以将用例图转换为类图？

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:16:20.110

没有软件会做这样的事情。

> 用例图提供了非常高级的系统动态行为。
> 
> 类图提供系统中单个模块的静态视图。

这两个实体没有紧密耦合；用例图可以有无数个对应的有效类图，反之亦然。

# c++ - 如何使用本机 C++ 在 WinRT 中创建模式消息框

> ID：13312806
> 
> 赞同：5
> 
> 时间：2012-11-09T17:16:32.107
> 
> 标签：c++, windows-runtime, messagebox, assertions

我目前正在开发一个跨平台的 C++ SDK，我必须将我们的断言处理程序移植到 WinRT。该过程的一部分是显示一个消息框，等待用户输入并在用户选择“调试”时触发断点。

我已经有一个消息框出现，但我找不到等待消息框出现*而不*离开当前执行点的方法。

到目前为止，这是我的代码。

```
// Create the message dialog factory

Microsoft::WRL::ComPtr<ABI::Windows::UI::Popups::IMessageDialogFactory> messageDialogFactory;
Microsoft::WRL::Wrappers::HStringReference messageDialogFactoryId(RuntimeClass_Windows_UI_Popups_MessageDialog);

Windows::Foundation::GetActivationFactory(messageDialogFactoryId.Get(), messageDialogFactory.GetAddressOf() );

// Setup the used strings

Microsoft::WRL::Wrappers::HString message;
Microsoft::WRL::Wrappers::HString title;
Microsoft::WRL::Wrappers::HString labelDebug;
Microsoft::WRL::Wrappers::HString labelIgnore;
Microsoft::WRL::Wrappers::HString labelExit;

message.Set( L"Test" );
title.Set( L"Assertion triggered" );
labelDebug.Set(L"Debug");
labelIgnore.Set(L"Ignore");
labelExit.Set(L"Exit");

// Create the dialog object

Microsoft::WRL::ComPtr<ABI::Windows::UI::Popups::IMessageDialog> messageDialog;
Microsoft::WRL::ComPtr<ABI::Windows::Foundation::Collections::IVector<ABI::Windows::UI::Popups::IUICommand*>> messageDialogCommands;

messageDialogFactory->CreateWithTitle( message.Get(), title.Get(), messageDialog.GetAddressOf() );
messageDialog->get_Commands(messageDialogCommands.GetAddressOf());

// Attach commands

Microsoft::WRL::ComPtr<ABI::Windows::UI::Popups::IUICommandFactory> commandFactory; 
Microsoft::WRL::Wrappers::HStringReference commandFactoryId(RuntimeClass_Windows_UI_Popups_UICommand);

Windows::Foundation::GetActivationFactory(commandFactoryId.Get(), commandFactory.GetAddressOf() );

CInvokeHandler commandListener;
commandFactory->CreateWithHandler(labelDebug.Get(), &commandListener, commandListener.m_DebugCmd.GetAddressOf() );
commandFactory->CreateWithHandler(labelIgnore.Get(), &commandListener, commandListener.m_IgnoreCmd.GetAddressOf() );
commandFactory->CreateWithHandler(labelExit.Get(), &commandListener, commandListener.m_ExitCmd.GetAddressOf() );

messageDialogCommands->Append( commandListener.m_DebugCmd.Get() );
messageDialogCommands->Append( commandListener.m_IgnoreCmd.Get() );
messageDialogCommands->Append( commandListener.m_ExitCmd.Get() );

// Show dialog

Microsoft::WRL::ComPtr<ABI::Windows::Foundation::IAsyncOperation<ABI::Windows::UI::Popups::IUICommand*>> showOperation;
messageDialog->ShowAsync( showOperation.GetAddressOf() );

// ... and wait for the user to choose ...? 
```

现在我被困在这里。如果我只是旋转等待触发回调，我将进入一个无限循环并且消息框根本不显示（至少当我从 UI 线程调用时）。如果我继续执行，我将失去在正确位置触发断点的可能性。

所以我正在寻找的是某种强制重绘或“忙等待”异步调用完成的方法（比如“await messadeDialog->ShowAsync()”）。我知道我可以使用托管 C++，但我想避免它:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:32:51.387

当您调用`ShowAsync()`显示弹出窗口时，该任务被安排在 UI 线程上执行。为了让这个任务运行，UI 线程必须可以自由地执行它（即它不能执行其他代码）。如果您的代码在 UI 线程上执行并且您`ShowAsync()`调用`ShowAsync()`了任务完成。

如果要在 UI 线程上等待事件发生或异步操作完成，则需要调用抽送队列的同步函数之一，以免阻塞 UI 线程。例如，查看[Hilo 项目中允许同步异步操作的代码。](http://hilo.codeplex.com/SourceControl/changeset/view/fb6ac72f284a#HiloTests%2fTestHelper.h)

不幸的是，这仍然对您没有帮助，因为 Windows 应用商店应用程序 UI 在[应用程序单线程单元 (ASTA)](http://msdn.microsoft.com/en-us/library/windows/apps/hh750290.aspx)中运行，这限制了可重入性。这是一件好事，因为意外的 COM 重入是许多最可怕的错误的原因。我认为没有办法在您的函数等待时运行“显示弹出窗口”任务。

但是，如果这只是为了调试，您可以调用`MessageBox`显示一个普通的消息框。它会显示在桌面上，但您的程序肯定会等待调用完成，然后再继续执行。您的应用不会通过`MessageBox`就地调用通过商店认证，但同样，对于调试代码，它应该可以正常工作。

在构建 Windows 应用商店应用程序时，默认情况下 'ed out 的声明，但您可以自己声明该`MessageBox`函数。`#ifdef`我写了一篇文章[“在 Metro 风格应用程序中进行'printf' 调试”](http://seaplusplus.com/2012/06/25/printf-debugging-in-metro-style-apps/)，解释了如何做到这一点。

* * *

最后，快速澄清一下：Windows 运行时没有“托管 C++”。C++/CX 语言扩展在*语法上*类似于 C++/CLI，后者针对 .NET Framework 和 CLI，但它们在*语义上*有所不同。使用 C++/CX 时，根本没有托管代码，CLR 不会在运行时加载。编译器将 C++/CX 代码转换为等效的 C++ 代码，然后编译该代码。都是 100% 原生的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:07:44.737

只是对我最终所做的事情的快速跟进（感谢詹姆斯的回答）。

如果从 UI 线程触发了断言（并且应用程序在 STA 中运行），我只需中断并将消息放入调试输出。从 Metro 应用程序触发桌面窗口对我来说似乎是错误的。如果断言是从非 UI 线程触发的，则“模态”框可以完美运行。

```
#include <ppltasks.h>
using namespace concurrency;

// ...

auto UIDispatcher = Windows::ApplicationModel::Core::CoreApplication::MainView->CoreWindow->Dispatcher;

try
{
    auto uiTask = UIDispatcher->RunAsync( CoreDispatcherPriority::Normal, 
        ref new DispatchedHandler( [&messagePopup, cmds, &result]() 
    {
        try
        {
            create_task(messagePopup->ShowAsync()).then([cmds, &result](IUICommand^ selected) {
                // result is changed depending on which command was selected
            });
        }
        catch (...)
        {
        }
    }));

    // Wait for the user to click

    create_task(uiTask).wait();

    // Sleep until result has been changed
}
catch ( invalid_operation )
{               
    // STA, debugout & break
}

// test on result, etc. 
```

我不知道这是否真的是最好的方法，但它有效:)

您需要将 ShowAsync 分派到 UI 线程，否则在从非 UI 线程调用时会抛出 COM Exception。

我使用了第一个 create_task().then() 因为我很懒 ^^ 并检查用户交互。
当从 STA 调用时 create_task(uiTask).wait() 将引发无效操作（所以我猜 MTA 会正常工作）。
在这种情况下，分派的 ShowAsync 也会通过抛出 COM 异常而失败，因此不会显示任何内容。最后我只是忙着等待盒子被触发。

# php - 是否可以将 Doctrine2 批处理与 Twig 的 for 标签无缝结合使用？

> ID：13312808
> 
> 赞同：2
> 
> 时间：2012-11-09T17:16:35.760
> 
> 标签：php, symfony, doctrine-orm, iterator, twig

我有某些用例需要在不分页的情况下显示数据集。为了节省内存，我宁愿使用 Doctrine 的批处理功能（查询迭代器）。

我想知道 twig 是否提供任何机制（编写我自己的扩展是可以的）以允许将[for 标记](http://twig.sensiolabs.org/doc/tags/for.html)与迭代器结果集一起使用，就像我对任何其他集合一样。

然后在我的扩展（或处理迭代过程的任何东西）中，我会在使用对象时分离它们。

到目前为止，我认为我唯一的选择是为标签创建自定义，因为我认为 twig 的标签无法处理这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T00:29:42.853

考虑到：

1.  Doctrine 的迭代器使用 PDO 的 fetch 方法（一次只使用一个对象）
2.  Doctrine 的迭代器实现了 PHP 的[Iterator](http://www.php.net/manual/en/class.iterator.php)接口

而不是通过：

```
$query->getResult() 
```

到树枝你可以通过：

```
$query->iterate() 
```

然后在树枝中而不是这样做：

```
{% for item in result %}
     {# do work with item #}
{% endfor %} 
```

它应该是：

```
{% for item in result %}
     {# doctrine's iterator yields an array for some crazy reason #}
     {% set item = item[0] %} 

     {# do work with item #}

     {# the object should be detached here to avoid staying in the cache #}
{% endfor %} 
```

此外，loop.last 变量停止工作，所以如果你使用它，你应该想办法解决你的问题。

最后，我没有编写自定义的 twig 标签，而是为学说迭代器创建了一个装饰器来处理我需要的额外内容，唯一仍然损坏的是 loop.last var：

```
class DoctrineIterator implements \Iterator {

    public function __construct(\Iterator $iterator, $em) {
        $this->iterator = $iterator;
        $this->em = $em;
    }

    function rewind() {
        return $this->iterator->rewind();
    }

    function current() {
        $res = $this->iterator->current();
            //remove annoying array wrapping the object
        if(isset($res[0])) 
            return $res[0];
        else
            return null;
    }

    function key() {
        return $this->iterator->key();
    }

    function next() {
            //detach previous entity if present
        $res = $this->current();
        if(isset($res)) {
            $this->em->detach($res);
        }
        $this->iterator->next();
    }

    function valid() {
        return $this->iterator->valid();
    }
} 
```

# c# - 组件基于接口生成时的服务覆盖已经存在具有该名称的组件

> ID：13312810
> 
> 赞同：0
> 
> 时间：2012-11-09T17:16:39.617
> 
> 标签：c#, castle-windsor

从[这里](http://docs.castleproject.org/Windsor.Registering-components-one-by-one.ashx#Supplying_the_component_for_a_dependency_to_use_Service_override_9)我了解了如何指定一个组件，但是如果该组件实现了一个本身在容器中解析的接口呢？

我使用三个接口`IDBViewerModel`：`IMembershipModel`和`IMongoConnection`。我希望解决`IDBViewerModel`to`DBViewerModel`和`IMembershipModel`to `MembershipModel`。很容易。

但是，两者都`DBViewerModel`和`MembershipModel`期望`IMongoConnection`作为构造函数注入组件-并且这两个组件不相同，因此我想使用服务覆盖。

我的例子如下。where`DBViewerModel : IDBViewerModel`和构造函数期望注入的组件看起来像：`MembershipModel : IMembershipModel,``DBViewerModel``MembershipModel`

```
DBViewerModel(IMongoConnection uaxDB)
MembershipModel(IMongoConnection dataDB) 
```

现在我有`MongoConnection : IMongoConnection`并且`MongoConnection`看起来像：

```
public MongoConnection(string DBlocation, string DB) 
```

我希望以不同的方式提供 DBlocation 和 DB 参数，以便将`MongoConnection`组件注入`DBViewerModel`和`MembershipModel`. 所以我尝试：

```
 container.Register(Component
               .For<IDBViewerModel>()
               .ImplementedBy<DBViewerModel>()
               .LifeStyle.PerWebRequest);

         container.Register(Component
               .For<IMembershipModel>()
               .ImplementedBy<MembershipModel>()
               .LifeStyle.PerWebRequest);

container.Register(
           Component.For<IMongoConnection>()
               .ImplementedBy<MongoConnection>()
               .Named("myservice.dataDB")
               .DependsOn(Property.ForKey("DBlocation").Eq(USERmongoURL),
                    Property.ForKey("DB").Eq(USERmongoCollection))
               .LifeStyle.PerWebRequest,
           Component.For<IMongoConnection>()
               .ImplementedBy<MongoConnection>()
               .Named("myservice.uaxDB")
               .DependsOn(Property.ForKey("DBlocation").Eq(UAXmongoURL),
                    Property.ForKey("DB").Eq(UAXmongoCollection))
               .LifeStyle.PerWebRequest,

           Component.For<DBViewerModel>()
               .ServiceOverrides(ServiceOverride.ForKey("dataDB").Eq("myservice.dataDB")),
           Component.For<MembershipModel>()
               .ServiceOverrides(ServiceOverride.ForKey("uaxDB").Eq("myservice.uaxDB"))

       ); 
```

我的错误信息说明了一切——但我不知道如何正确解决我的依赖链：

> 无法注册组件 DBViewerModel。已经有一个具有该名称的组件。您是否想修改现有组件？如果不是，请确保指定一个唯一名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:52:23.780

这应该有效：

```
container.Register(Component
         .For<IDBViewerModel>()
         .ImplementedBy<DBViewerModel>()
         .LifeStyle.PerWebRequest
         .DependsOn(Dependency.OnComponent("dataDB", "myservice.dataDB")));

container.Register(Component
         .For<IMembershipModel>()
         .ImplementedBy<MembershipModel>()
         .LifeStyle.PerWebRequest
         .DependsOn(Dependency.OnComponent("uaxDB", "myservice.uaxDB")));

container.Register(
       Component.For<IMongoConnection>()
           .ImplementedBy<MongoConnection>()
           .Named("myservice.dataDB")
           .DependsOn(Property.ForKey("DBlocation").Eq(USERmongoURL),
                Property.ForKey("DB").Eq(USERmongoCollection))
           .LifeStyle.PerWebRequest,
       Component.For<IMongoConnection>()
           .ImplementedBy<MongoConnection>()
           .Named("myservice.uaxDB")
           .DependsOn(Property.ForKey("DBlocation").Eq(UAXmongoURL),
                Property.ForKey("DB").Eq(UAXmongoCollection))
           .LifeStyle.PerWebRequest

   ); 
```

# python - 有没有办法在 Python 中输入类命名空间？

> ID：13312814
> 
> 赞同：3
> 
> 时间：2012-11-09T17:16:48.087
> 
> 标签：python, class, namespaces

我发现自己正在编写以下代码：

```
def dlt(translation):
    del translation.strands[translation.active][translation.locus] 
```

我宁愿喜欢这样的东西：

```
def dlt(translation):
    *something*(translation):
        del strands[active][locus] 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T17:17:29.557

命名空间只是 Python 对象，您可以将对象（包括属性查找的结果）分配给局部变量名称：

```
strands = translation.strands
active = translation.active
locus = translation.locus 
```

或者，您必须将修改的上下文管理器组合在一起`locals()`，如[this answer](https://stackoverflow.com/a/12486075/100297)所示。

像这样的事情会这样做：

```
import inspect

class Namespace(object):
    def __init__(self, namespaced):
        self.namespaced = namespaced

    def __enter__(self):
        """store the pre-contextmanager scope"""
        ns = globals()
        namespaced = self.namespaced.__dict__
        # keep track of what we add and what we replace
        self.scope_added = namespaced.keys()
        self.scope_before = {k: v for k, v in ns.items() if k in self.scope_added}
        globals().update(namespaced)
        return self

    def __exit__(self):
        ns = globals()
        # remove what we added, then reinstate what we replaced
        for name in self.scope_added:
            if name in ns:
                del ns[name]
        ns.update(self.scope_before) 
```

然后像这样使用它：

```
with Namespace(translation):
     del strands[active][locus] 
```

在块中的所有项目`translation.__dict__`都可以在全局范围内使用`while`。

请注意，这**不是线程安全的**，并且有可能给任何试图阅读将来使用它的代码的人（包括您自己）造成很多混乱。就个人而言，我不会使用这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:31:21.630

您可能应该使用 Martijn 的答案。但是如果你真的想做你所要求的，我认为这个（未经测试的）片段可以做到：

```
exec "del strands...", translation.__dict__ 
```

如果你不喜欢：很好，你有品味。:-)

这是另一种选择：

```
def within(obj, func):
    return func(**obj.__dict__) 
```

像这样称呼它：

```
def dostuff(strands, active, locus, **ignored):
    del ...
within(translation, dostuff) 
```

# php - 减去两个字符串变量之间的差异

> ID：13312816
> 
> 赞同：0
> 
> 时间：2012-11-09T17:16:57.737
> 
> 标签：php, time, strtotime

我有两个包含时间的字符串，如下所示：

```
 'ftime1' => string '17:44' (length=5)
  'ftime2' => string '18:19' (length=5) 
```

我需要计算 frime2 和 ftime1 之间的差异，因此结果以**分钟**为单位。

我努力了

```
 $struct[$i]['ttime'] =  time($struct[$i]['ftime2']) - time($struct[$i]['ftime1']);
 $struct[$i]['ttime2'] =  strtotime($struct[$i]['ftime2']) - strtotime($struct[$i]['ftime1']);
 $struct[$i]['ttime3'] =  $struct[$i]['ftime2'] - $struct[$i]['ftime1']; 
```

导致：

```
 'ttime' => int 0
  'ttime2' => int 2100
  'ttime3' => int 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:20:14.270

`strtotime`将字符串转换为以秒为单位的时间戳..所以差异也将以秒`/ 60`为单位..做几分钟..

```
(strtotime($struct[$i]['ftime2']) - strtotime($struct[$i]['ftime1'])) / 60; 
```

并且 time 函数不会那样做，它返回当前的 Unix 时间戳，并且不接受任何参数。

# c++ - 富（）= 42；<- 这怎么可能？

> ID：13312817
> 
> 赞同：5
> 
> 时间：2012-11-09T17:17:06.753
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

我正在阅读一篇关于 rvalues 的文章，以了解新 C++ 标准中的通用引用，并找到以下作为 lvalue 的示例

```
// lvalues:
//
int i = 42;
i = 43; // ok, i is an lvalue
int* p = &i; // ok, i is an lvalue
int& foo();
foo() = 42; // ok, foo() is an lvalue
int* p1 = &foo(); // ok, foo() is an lvalue 
```

这里是什么`int& foo();`意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T18:51:23.047

假设 foo 的主体是这样的：

```
int & foo()
{
   static int i = 0;
   return i;
}
foo() = 30; 
```

这会将静态 int i 设置为 30；

一个更实际的例子是一个类返回对自身的引用

```
class foo
{
public:
   foo() {}

   foo& addString() {
      /* AddString */ 
      return *this;
   }

   foo& subtractSomething() { 
      /* Subtract Something */ 
      return *this; 
   }
} 
```

然后像这样使用它：

```
foo f;
f.addString().subtractSomething(); 
```

类运算符这样做 - 所以你可以这样做：

```
foo a, b c;

foo d = a+b+c; 
```

其中 + 运算符定义为：

```
foo & operator+(const foo& f) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T17:19:26.893

```
int& foo(); 
```

声明一个返回对 . 的引用的函数`int`。你可以看到它类似于

```
int* foo(); 
```

除了返回值不能为空。

但是，语法有点不同，因为`int* foo();`将用作 as`*(foo()) = 42;`和`int& foo();`as `foo() = 42`。

您可以在常见问题解答中阅读有关参考的更多信息[。](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:20:35.253

`int& foo();`表示该函数`foo()`返回一个*引用*类型。也就是可以修改它的返回值：

```
foo() = 42; 
```

意思是“修改”返回的引用值`foo`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:19:25.423

您正在定义一个以引用作为返回值的函数原型。该函数返回对整数的引用。因此，它的返回值可以设置为另一个值。

# objective-c - 使用协议和委托的 viewDidLoad 后字符串变为 nil

> ID：13312819
> 
> 赞同：1
> 
> 时间：2012-11-09T17:17:12.107
> 
> 标签：objective-c, ios, delegates, protocols

我有一个协议和委托，我让它发送一个字符串然后更改 UItabbar 上的选项卡，我的协议和委托工作只是找到并在视图控制器中设置一个字符串但是一旦视图完成加载它就变成 nil 这是我的代码;

```
-(void)duplicateAsset:(NSString *)serialNumber{

    [self setDubString:serialNumber];
    NSLog(@"delegate called DubString = %@",self.dubString);

}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"_dubString in viewDidLoad = %@",self.dubString);
} 
```

输出

```
 delegate called DubString = SERIALNUMBER
 _dubString in viewDidLoad = (null) 
```

我不确定发生了什么，因为我以前做过很多次。

编辑：我更新了日志的内容。我已将字符串属性设置为`copy`和`strong`，但我仍然无法让字符串保持不变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:21:39.407

在显示的代码中，您实际上并未将`dubString`其作为参数`NSLog`，这是您正在使用的实际代码吗？如果是，那就是问题所在，请`, self.dubString`在. 如果不是，则检查该属性是否设置为or （或者，如果它不是一个属性，则您的方法是否拥有该字符串或其副本的所有权）。`)``NSLog``dubString``strong``copy``setDubString:`

**编辑**：显示的代码似乎没有任何问题，因此如果您无法跟踪错误，请发布更多代码（例如，设置 dubString 的所有上下文，例如您正在调用的地方`duplicateAsset`）。

同时，我建议检查您是否正在调用`duplicateAsset`同一个对象`viewDidLoad`（包括`self`两个调试打印输出中的对象 ID）。还要确保`dubString`中间没有其他设置，例如，`setDubString:`自己定义访问器并在那里添加调试打印输出（或断点）。

# python - 如何使用 pyplot.bar 仅绘制正误差条？

> ID：13312820
> 
> 赞同：14
> 
> 时间：2012-11-09T17:17:15.937
> 
> 标签：python, matplotlib, bar-chart

我正在尝试绘制 4 个带有正误差条的平均值和图中的最大值。

```
means   = [26.82,26.4,61.17,61.55]         # Mean Data 
stds    = [4.59,4.39,4.37,4.38]            # Standard deviation Data
peakval = ['26.82','26.4','61.17','61.55'] # String array of means

ind = np.arange(len(means))
width = 0.35
colours = ['red','blue','green','yellow']

pyplot.figure()
pyplot.title('Average Age')
for i in range(len(means)):
    pyplot.bar(ind[i],means[i],width,color=colours[i],align='center',yerr=stds[i],ecolor='k')
pyplot.ylabel('Age (years)')
pyplot.xticks(ind,('Young Male','Young Female','Elderly Male','Elderly Female'))

def autolabel(bars,peakval):
    for ii,bar in enumerate(bars):
        height = bars[ii]
        pyplot.text(ind[ii], height-5, '%s'% (peakval[ii]), ha='center', va='bottom')
autolabel(means,peakval) 
```

但是我不知道如何只绘制正误差条。所以我最终得到了这样的图表：

![平均年龄](../Images/b454b0fd4298e56a9a1c8fc4fbbcf27b.png)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-09T19:53:21.807

如果我理解正确，您可以这样做：

```
import numpy as np
from matplotlib import pyplot

means   = [26.82,26.4,61.17,61.55]           # Mean Data 
stds    = [(0,0,0,0), [4.59,4.39,4.37,4.38]] # Standard deviation Data
peakval = ['26.82','26.4','61.17','61.55']   # String array of means

ind = np.arange(len(means))
width = 0.35
colours = ['red','blue','green','yellow']

pyplot.figure()
pyplot.title('Average Age')
pyplot.bar(ind, means, width, color=colours, align='center', yerr=stds, ecolor='k')
pyplot.ylabel('Age (years)')
pyplot.xticks(ind,('Young Male','Young Female','Elderly Male','Elderly Female'))

def autolabel(bars,peakval):
    for ii,bar in enumerate(bars):
        height = bars[ii]
        pyplot.text(ind[ii], height-5, '%s'% (peakval[ii]), ha='center', va='bottom')
autolabel(means,peakval) 
pyplot.show() 
```

结果：

![在此处输入图像描述](../Images/a4ff3ec6d4b8d547838eff03c4804c66.png)

它之所以有效，是因为您可以作为`yerr`一个`2xN`列表传递，代表正负“偏移量”，请参阅[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.errorbar)。

# asp.net-mvc - 实体框架/ASP MVC 关系验证：检查键还是对象？

> ID：13312829
> 
> 赞同：1
> 
> 时间：2012-11-09T17:18:07.323
> 
> 标签：asp.net-mvc, entity-framework, fluentvalidation

假设我有一个示例实体：

```
public class City
{
    public int CityId { get; set; }
    public string Name { get; set; }

    public int StateId { get; set; }
    public virtual State State{ get; set; }
} 
```

有几种情况会创建新城市。1）由用户在视图中，从现有状态中选择：

```
@Html.DropDownListFor(it => it.StateId, ViewBag.States) 
```

2）在状态可能是新的情况下的后端：

```
State newState = context.States.Create();
newState.Name = "North Takoma";

City newCity = context.Cities.Create();
newCity.Name = "Springfield";
newCity.State = newState;

context.States.Attach(newState);
context.Cities.Attach(newCity);    

context.SaveChanges(); 
```

状态关系是必需的并且应该被验证。问题是我们应该验证 StateID 还是实际的 State 关系对象？（在这里使用 FluentValidation，但使用数据注释的情况非常相似）

```
public class CityValidator : AbstractValidator<City>
{
    public CityValidator()
    {
        // this?
        RuleFor(it => it.StateID).NotEmpty();

        // or this?
        RuleFor(it => it.State).NotNull();
    }
} 
```

在第一种情况下，StateID 将被填充，但不会填充状态对象；对于第二种情况，反之亦然。

我可以在我的验证器中放入自定义逻辑来检查其中一个；但是，在我看来，我失去了不显眼的验证属性。这个问题有什么好的、干燥的解决方案吗？

**编辑澄清：**在示例中，可以通过设置 StateID（对于现有状态）或 State 属性（对于新状态）将 State 分配给 City。那么如何设置验证并仍然在我的视图中的输入上获得“data-val-required”属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:32:35.350

如果我理解正确，用户可能会或可能不会选择状态？我对吗？

为您，

**第一种情况**：StateID 将被填充，但不会填充状态对象。

```
RuleFor(c => c.StateId).NotEmpty().When(s => s.State != null).WithMessage("Please select state."); 
```

**第二种情况**：第二种情况反之亦然

我从你那里了解到这将发生在服务器端，因此你不需要这个规则。

希望这可以帮助。

# algorithm - 如何对不描述函数的 N 个点进行插值

> ID：13312834
> 
> 赞同：3
> 
> 时间：2012-11-09T17:18:35.043
> 
> 标签：algorithm, interpolation

假设我有点`n`，也假设这些点有一个顺序，而这些点不一定有功能。我想知道如果这些点不描述函数，如何对它们进行插值？例如，这将是原始点： ![插值点](../Images/cb30b1d02c71994db240628b2f735f8f.png)

我希望这个结果：

![插值点](../Images/316d9f8b122409561e89008cea295503.png)

请注意，仅使用样条线不起作用，因为这些点不会产生函数，并且使用贝塞尔曲线也不起作用，因为它们不会对点进行插值（仅通过它们附近）。我该怎么做才能得到这个？有算法吗？

* * *

只是一个更新。由于我作为参考的已接受答案的链接已关闭，因此我将分享一篇我根据该链接撰写的文章，以帮助其他人解决此问题。

[插值 2D 点，在 WPF 中使用 Bezier 曲线](https://www.codeproject.com/Articles/769055/Interpolate-D-points-usign-Bezier-curves-in-WPF)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:21:19.913

1.  样条有很多种，例如，[Catmull-Rom 样条](http://cubic.org/docs/hermite.htm)就适用于此。

2.  Maxim Shemanarev 提出了简单而有趣[的贝塞尔曲线插值方法](http://www.antigrain.com/research/bezier_interpolation/index.html#PAGE_BEZIER_INTERPOLATION)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:35:45.027

这个答案解决了问题本身的一些概念问题。我不打算将其作为完整的答案。

首先是在给定的情况下总是有一个函数。在数学上，您将曲线描述为从实数（粗略表示“时间”）到您的空间的函数。这通常称为曲线的参数表示。我们将函数写为`f(t) =( x(t), y(t) )`，其中`x(t)`和`y(t)`是单独的参数函数。

问题是您拥有的功能可能不是您想要的功能。这种类型的每个问题，为了有答案的希望，都必须明确说明哪类函数可以作为答案。只是说“功能”没有什么意义。问题是缺少可接受的函数类别的声明是可行的。不过，这里提到了样条线，所以让我们继续。给定一类样条（双三次样条很常见），通常你只能拟合样条上的这么多点，而不是任意数量。所以你想要的是分段样条函数类，即样条序列。

一旦你有了一个可接受的函数类别，你还必须决定如何选择它们。您似乎陈述的条件是您希望样条曲线通过给定的点。这是一种常见的情况，但不是唯一的。其他是最小化曲率、最小化长度、最小化点到曲线的总距离等。拟合条件也是问题陈述的一部分。

总而言之，听起来您想要拟合分段样条曲线以通过一系列点。现在看看其他答案，因为这是他们要回答的问题。

# django - django - 在表单向导中间退出并重定向到主页

> ID：13312840
> 
> 赞同：0
> 
> 时间：2012-11-09T17:19:05.257
> 
> 标签：django, django-formwizard

我有一个由几个表单组成的表单向导（Django 1.4）。我正在尝试检查`process_step`函数中的某些条件（对于中间步骤），退出表单向导并重定向到主页。当我尝试在函数`HttpResponseRedirect(<homepage>)`结束时使用重定向时`process_step`，它会忽略并继续执行下一个表单步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:23:15.107

为了让 Django 真正呈现下一步，它需要执行 return`HttpResponse`或`return render_to_response`等操作。所以很可能控制流根本不会到达`HttpResponseRedirect`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:58:25.130

Process_step 只处理数据，它返回的内容不会被渲染。可能你最好的选择是覆盖 render_next_step，尽管你也可以使用其他几个函数来处理它。

因此，覆盖 render_next_step，并执行以下操作：

```
 def render_next_step(self, form, **kwargs):
        data = get_cleaned_data('2')  # or whatever your step with the flag is
        if data.get('your_flag', False):
            self.storage.reset()
            return HttpResponseRedirect()
        return super(Wizard, self).render_next_step(self, form, **kwargs) 
```

您可能还想在获取清理数据之前添加一个条件，以检查当前或下一步是什么。

# hibernate - 使用 TestNg 测试休眠，单独运行时测试通过，但在套件中失败

> ID：13312845
> 
> 赞同：0
> 
> 时间：2012-11-09T17:19:16.330
> 
> 标签：hibernate, testing, testng

我正在使用在 IntelliJ 下运行的 TestNg 测试休眠。我在套件中有两个测试，当套件运行时，其中一个测试失败。当我单独运行它们时，它们会成功。此外，当我单击“仅运行失败”时，我会变绿。

我想在这种情况下测试的主体并不重要，但无论如何我都会在这里展示它。堆栈跟踪如下。

我尝试将 singleThreaded 参数添加到测试套件，但这没有帮助。我还添加了我认为应该有帮助的 AfterMethod，但结果是一样的。有什么想法吗？

```
@Test(singleThreaded = true)
public class RatesPersistanceTest
{
private SessionFactory sessionFactory;

@BeforeMethod
private void before() throws Exception
{
    sessionFactory = new Configuration().configure().buildSessionFactory();
}

@AfterMethod
private void after() throws Exception
{
    sessionFactory.close();
}

@Test
public void should_save_rates_and_retrieve_them_with_success()
{
    Money standardPrice = Money.parse("USD 85");
    Money upchargeExtraPerson = Money.parse("USD 80");
    Money upchargeExtraBed = Money.parse("USD 75");
    Room room = getMeRoom();

    AvailabilityPeriod availabilityPeriod = new AvailabilityPeriod(DateTime.now(), DateTime.now().plusDays(5), true);
    Season season = new BasicSeason("season name", availabilityPeriod);
    Rate seasonRate = new SeasonRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, room, season);

    Session session = sessionFactory.openSession();
    session.beginTransaction();

    session.save(room);

    session.save(season);

    session.save(seasonRate);

    session.getTransaction().commit();
    session.close();
}

@Test(expectedExceptions = org.hibernate.exception.ConstraintViolationException.class)
public void season_rate_should_violate_db_constraints_when_saved_without_season()
{
    Money standardPrice = Money.parse("USD 85");
    Money upchargeExtraPerson = Money.parse("USD 80");
    Money upchargeExtraBed = Money.parse("USD 75");
    Room room = getMeRoom();

    AvailabilityPeriod availabilityPeriod = new AvailabilityPeriod(DateTime.now(), DateTime.now().plusDays(5), true);
    Season season = new BasicSeason("season name", availabilityPeriod);
    Rate seasonRate = new SeasonRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, room, null);

    Session session = sessionFactory.openSession();
    session.beginTransaction();

    session.save(room);

    session.save(season);

    session.save(seasonRate);

    session.getTransaction().commit();
    session.close();
}

private Room getMeRoom()
{
    final RoomName roomName = new RoomName("101");
    final RoomType roomType = new RoomType("cheap");
    final Money standardPrice = Money.parse("USD 100");
    final Money upchargeExtraPerson = Money.parse("USD 50");
    final Money upchargeExtraBed = Money.parse("USD 20");
    final RackRate rackRate = new RackRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, null);
    final int maxExtraBeds = 2;
    final Occupancy occupancy = new Occupancy(4, 2);
    return new Room("C", roomName, roomType, rackRate, HousekeepingStatus.CLEAN, RoomAvailability.AVAILABLE, maxExtraBeds, occupancy);
}

} 
```

堆栈跟踪简短版本：

```
org.hibernate.PessimisticLockException: Timeout trying to lock table "ROOMS"; SQL   statement:
insert into ROOMS
...
Caused by: org.h2.jdbc.JdbcSQLException: Timeout trying to lock table "ROOMS"; SQL  statement:
insert into ROOMS 
```

休眠配置：

```
 <property name="connection.url">jdbc:h2:mem:db1;DB_CLOSE_DELAY=0</property>
 <property name="hbm2ddl.auto">create-drop</property> 
```

堆栈跟踪：

```
org.hibernate.PessimisticLockException: Timeout trying to lock table "ROOMS"; SQL   statement:
insert into ROOMS (prefix, housekeepingStatus, availability, typeName, maxExtraBeds,   standardPrice, upchargeExtraPerson, upchargeExtraBed, standard, maximum, name) values  (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [50200-168]
    at org.hibernate.dialect.H2Dialect$2.convert(H2Dialect.java:317)
     at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy9.executeUpdate(Unknown Source)
at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2962)
at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3403)
at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)
at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275)
at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1210)
at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:399)
at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
at net.mklew.hotelms.persistance.RatesPersistanceTest.should_save_rates_and_retrieve_them_with_success(RatesPersistanceTest.java:64)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:842)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1166)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
at org.testng.TestRunner.runWorkers(TestRunner.java:1178)
at org.testng.TestRunner.privateRun(TestRunner.java:757)
at org.testng.TestRunner.run(TestRunner.java:608)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1158)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1083)
at org.testng.TestNG.run(TestNG.java:999)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:203)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:174)
at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.h2.jdbc.JdbcSQLException: Timeout trying to lock table "ROOMS"; SQL  statement:
insert into ROOMS (prefix, housekeepingStatus, availability, typeName, maxExtraBeds, standardPrice, upchargeExtraPerson, upchargeExtraBed, standard, maximum, name) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) [50200-168]
at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
at org.h2.message.DbException.get(DbException.java:169)
at org.h2.message.DbException.get(DbException.java:146)
at org.h2.table.RegularTable.doLock(RegularTable.java:500)
at org.h2.table.RegularTable.lock(RegularTable.java:434)
at org.h2.command.dml.Insert.insertRows(Insert.java:123)
at org.h2.command.dml.Insert.update(Insert.java:84)
at org.h2.command.CommandContainer.update(CommandContainer.java:75)
at org.h2.command.Command.executeUpdate(Command.java:230)
at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:156)
at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:142)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
... 47 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:14:07.750

我回到那个项目，问题也回来了。

解决方案如下：

将@BeforeMethod 和@AfterMethod 更改为@BeforeSuite 和@AfterSuite

这也意味着在一个测试中插入的数据将在另一个测试中可见，至少我认为如果我在测试之间不关闭休眠状态就是这种情况，但这至少有效，所以我可以处理它。

# java - 为什么我们在使用 ContextMapper 时不必为 ldap 用户指定 objectclass？

> ID：13312849
> 
> 赞同：1
> 
> 时间：2012-11-09T17:19:37.970
> 
> 标签：java, spring, ldap, spring-ldap

请耐心等待，因为我是 spring 和 ldap 的新手。

如果我想将用户从 ldap 服务器映射到 Person java 对象，来自 ldap 服务器的查询是否包含对象类是否重要？

我的理解是对象类可以是ldap已经预定义的东西，比如“person”、“organizationalPerson”、“inetOrgPerson”等。ldap也可以保存自定义的objectclasses。如果定义了 objectclass=person，则保证将定义“cn”、“sn”等。

以下修改后的[示例代码](http://today.java.net/pub/a/today/2006/04/18/ldaptemplate-java-ldap-made-simple.html)应该将 ldap 属性映射到 java Person 对象：

```
 private static class PersonContextMapper
         implements ContextMapper {
      public Object mapFromContext(Object ctx) {
         DirContextAdapter context = (DirContextAdapter)ctx;
         Person p = new Person();

         if (context.getStringAttribute("cn") != null)
               p.setFullName(context.getStringAttribute("cn"));

         if (context.getStringAtribute("sn") != null)
               p.setLastName(context.getStringAttribute("sn"));

         return p;
      }
   } 
```

在这里，它没有引用 objectclass=person，但它会查找属性，就好像 objectclass=person 确实已经设置了一样。如果此 ldap 目录中的用户也是 objectclass=CustomPerson 的一部分，其中定义了属性“goals”、“salary”，该怎么办？

然后，在不知道这个用户是否也是 objectclass=CustomPerson 的情况下，是否像添加这样的检查一样简单：

```
if (context.getStringAttribute("goals") != null) 
     p.setGoals(context.getStringAttribute("goals")); 
```

或者，如果此用户只是 objectclass=CustomPerson 的一部分，而不是 objectclass=person 的一部分，该怎么办。那么，寻找“cn”和“sn”就没有意义了，因为只定义了“goals”和“salary”？

我是否遗漏了什么，或者只是假设用户属性已经提前知道，所以我们可以在 ldap 用户和 java Person 对象之间的映射中硬编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:53:20.997

Java 代码不需要知道 LDAP 对象类。它只是获取属性。LDAP 对象具有这些属性，在这种情况下您会获得它们，或者它没有，在这种情况下您会遇到异常。

# audio - 在java程序中嵌入JAAudio包

> ID：13312852
> 
> 赞同：1
> 
> 时间：2012-11-09T17:19:48.140
> 
> 标签：audio, feature-extraction

是的，伙计们；
我正在做一个关于基于内容的音乐分析（音乐流派分类和相似性测量）如何改进媒体播放器随机播放功能的歌曲选择的最后一年项目（BSc）。我想嵌入 JAudio 来执行特征提取。我从以下位置下载了包：sourceforge.net/projects/jaudio/，我正在使用[http://jaudio.sourceforge.net/jaudio10/embedding.html](http://jaudio.sourceforge.net/jaudio10/embedding.html)中说明的说明。但是，我遇到了一些问题：

1.  使用 Batch 类指令说使用 setFeatures(java.io.File[] files) 或 setFetaures(RecordingInfo[] files) 。但是，根据 [http://jaudio.sourceforge.net/jaudio10/javadoc/index.html](http://jaudio.sourceforge.net/jaudio10/javadoc/index.html)上的 API，没有这样的方法。
2.  下一步是 Batch.exectue()。但是，这会引发空指针异常。
3.  此外，当我尝试使用 GUI 时，文件选择器（添加录音）不会加载文件（.wav）

我真的很想在我的项目中使用 JAudio。但是，由于上述原因，我无法做到。首先，我想知道是否有人尝试过嵌入 JAudio 并遇到同样的问题。如果没有，是否有人知道提取相似特征的替代程序包？

* * *

我要提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:16:23.413

为了添加录音，您应该使用 -Xmx 来扩大 jAudio 可以使用的 JVM 内存。几个月前也遇到过同样的问题，好像Cory Mckay没有提供嵌入的API。我看了jAudio的源码，发现不是那么难懂，大家可以试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T16:14:51.293

根据我的说法，我建议您在需要在其中导入该 jaudio 库的地方使用 Ecilipse。因为据我所知，它是在纯 JAVA 中使用 Swing 组件制作的，因此您可以直接执行它......它是用于特征提取过程的所有音乐工具中的一个很好的工具，所以请使用它。如果有任何进一步的查询，请在评论中发布。

# android - 小于语句的 SQLite 查询

> ID：13312857
> 
> 赞同：0
> 
> 时间：2012-11-09T17:20:08.157
> 
> 标签：android, sqlite

我想计算低于您当前级别的所有级别的项目数：

```
public int getAmountPrevLevels(int level) { 
        int count = 0;

        Cursor c = myDataBase.rawQuery(
                "SELECT COUNT(*) FROM QUESTIONS WHERE LEVEL < " + level , null);
        c.moveToFirst();
        count = c.getInt(0);
        c.close();
        myDataBase.close();

        return count;

    } 
```

它总是没问题，直到我把 10 级和 17 项放在里面。假设我每个级别有 30 个项目，第 10 级有 17 个（随机数）。即使我在第 5 级，它也会返回 137（=4*30 + 1*17）。我不知道为什么它总是考虑到十级......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:24:30.610

我认为级别的数据类型是`TEXT`（不是数字类型），因此`10`在`5`.

如果您的级别总是如此，`INTEGER`那么我建议您尽可能更改表中的数据类型。

或者，我认为你可以使用`CASTING`如下：

```
 SELECT COUNT(*) FROM QUESTIONS WHERE CAST(LEVEL AS INTEGER) < " + level 
```

# c++ - 与 Arduino 的串行通信仅在重启后的第一条消息上失败

> ID：13312869
> 
> 赞同：5
> 
> 时间：2012-11-09T17:21:03.583
> 
> 标签：c++, boost, serial-port, arduino

我有一个 Arduino 设备和 PC。我在板上尝试了以下代码：

```
gpsdata data;

char needtosend;

void setup() {            
  Serial.begin(9600);
  Serial.flush();  
  data.id = 0;
  data.src= 500;
  data.lat= 1;
  data.lon= 2;
  data.alt= 3;
  strcpy(data.date, "test date format");

}

void loop() {

   if(Serial.available() > 0)
   {
    needtosend = Serial.read();
    if ( needtosend == '2')
    {
      data.id = ++data.id % 10;
    }

    byte* buff = (byte*)&data;
    Serial.write(buff, sizeof(data));

   }
   delay (200);

} 
```

PC 应用程序是用 C++ 编写的，并使用 boost 库与 Arduino 设备进行通信。这是PC代码：

```
Serial serial("/dev/ttyUSB0",9600);
            gpsdata *data;
            char *values = new char[sizeof(gpsdata)];
    while(true)
    {
        try {

            serial.writeString("2",1);
            serial.read(values,sizeof(gpsdata));
            data = (gpsdata *)values;
            cout<<data->id<<endl;
        } 
        catch(boost::system::system_error& e)
        {
            cout<<"Error: "<<e.what()<<endl;
        }
        catch(timeout_exception& e)
        {
            cout<<"Error: "<<e.what()<<endl;
        }
    }
            delete[] values;

Serial::Serial(std::string port, unsigned int baud_rate): io(), serial(io,port)
{
    serial.set_option(boost::asio::serial_port_base::baud_rate(baud_rate));  
}
void Serial::read(char *data, size_t size)
{
    boost::asio::read(serial,boost::asio::buffer(data,size));
}

void Serial::writeString(const char* s, int length)
{
   boost::asio::write(serial,boost::asio::buffer(s,length))<<std::endl;
} 
```

当我打开设备然后第一次启动 PC 应用程序时，它将字符串“2”发送到设备，然后 read() 阻塞并且从不接收来自 Arduino 的数据。如果我终止应用程序并重新启动它而不重新启动 Arduino，一切都开始正常工作。我尝试了异步读取，结果是一样的，第一条消息的读取超时，然后一切开始正常。在 PC 应用程序中收到的第二条消息的 id 为 1，这意味着 Arduino 尚未收到第一条消息。知道我的错误在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T18:30:41.533

正如汉斯在评论中提到的，您的通信协议已关闭。

你的 Arduino 循环基本上说：

> 读取一个值。如果还有其他可用值，请执行某些操作。等待 0.2 秒。然后重复。

您的 PC 循环说：

> 发送“2”。然后读取一个值数组。然后重复。

您正在做的事情是，您的通信中的 Arduino 方面正在等待比发送更多的值。在 Arduino 上，轮询[Serial.avaliable](http://arduino.cc/en/Serial/Available)，然后进行读取。

在 PC 上，您可能不需要更改它。

当您断开连接并重新连接时，会发送一个额外的位来初始化波特连接，这会诱使您的协议正常工作。

编辑：一定要检查串行库连接的设置。以下是我在使用 Qt QextSerialPort 库之前用于连接到 Arduino 板的设置。

```
port->setFlowControl(FLOW_OFF);
port->setParity(PAR_NONE);
port->setDataBits(DATA_8);
port->setStopBits(STOP_1);
port->setTimeout(500); 
```

以下是两个可能有用的链接：

[http://www.webalice.it/fede.tft/serial_port/serial_port.html](http://www.webalice.it/fede.tft/serial_port/serial_port.html)

[https://www.google.com/search?q=arduino+and+boost%3A%3Aasio](https://www.google.com/search?q=arduino+and+boost%3A%3Aasio)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T05:40:15.560

在 Win7 上使用 Boost asio 和 Arduino Uno 时，我在我的一个项目中看到了完全相同的行为。看来，当 Boost 打开串行端口时，它正在发送重置 Arduino 并触发引导加载程序的任何信号（这似乎与从 Arduino IDE 上传代码时发生的事情相同）。

我想出了三种可能的解决方法：

1.  当 Arduino 意外重置时（当 Boost 打开串行端口时），需要几秒钟才能重新开始工作。这似乎是引导加载程序通常会为 Arduino IDE 开始代码上传提供的时间窗口。在打开端口后等待几秒钟，我可以让事情变得更好：

    ```
    serial->open(strPortName);
    SleepEx(2000,false);
    serial->set_option(...);  
    ... 
    ```

    即使使用这种方法，我仍然通常会在第一次读取时得到乱码数据。通常它会在下一次阅读时正常工作。

2.  丢失引导加载程序。使用与 Arduino IDE 不同的方法通过 6 针 ISP 对 Arduino 进行编程。这涉及放弃 Arduino IDE 并使用 AVR Studio 之类的东西和某种硬件 ISP 程序员。如果你走那条路，请参考：[http ://www.engblaze.com/tutorial-using-atmel-studio-6-with-arduino-projects/](http://www.engblaze.com/tutorial-using-atmel-studio-6-with-arduino-projects/)

3.  切换库。我已经看到使用 Boost 的上述行为，但在使用 Boost 之前，我使用的是 CTB 库（[https://iftools.com/opensource/ctb.en.php](https://iftools.com/opensource/ctb.en.php)），它运行良好并且在打开时没有重置 Arduino串口。在我的项目中，我最初切换到 Boost 以获得它提供的其他功能，但我切换回 CTB 进行通信，因为它工作得更好。

第四种选择是希望让 Boost asio 专家告诉我们如何在不重置 Arduino 的情况下打开端口（因为 CTB 可以做到，所以必须有办法，但我不够专业，不知道如何使用 Boost ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:18:20.857

从 Arduino 网站上的硬件角度来看，对此进行了非常彻底的处理：

[http://playground.arduino.cc/Main/DisablingAutoResetOnSerialConnection](http://playground.arduino.cc/Main/DisablingAutoResetOnSerialConnection)

它也解释了这个问题的一些硬件解决方案，包括：

1.  在 RESET 和 GND 线之间连接一个 10uF 电容
2.  在 RESET 之间放一个 120 欧姆的电阻
3.  永久移除 R3 以禁用 Arduino 的自动复位功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T09:24:28.803

只需导入时间库并`time.sleep(2)`在行后添加`Serial.begin(9600);`。

# c# - 在 using 语句之外调用 AggressivelyCacheFor(duration) 有什么影响？

> ID：13312871
> 
> 赞同：0
> 
> 时间：2012-11-09T17:21:08.123
> 
> 标签：c#, asp.net-web-api, ravendb

我正在尝试在 WebApi 应用程序中启用 RavenDB Aggressive Caching，以便在更大的应用程序中使用**单个**操作方法。

为了实现这一点，我创建了一个动作过滤器属性，该属性获取`IDocumentSession`, 并`OnActionExecuting`调用该方法以启用 15 分钟的积极缓存。然后，在 中`OnActionexecuted`，我呼吁`DisableAggressiveCaching()`同一个会话。

简而言之，这导致了一些相当奇怪的行为。在调用使用积极缓存的操作方法之后，对其他操作方法的后续请求，无论如何都不依赖缓存（它们发出完全不同的请求），最终得到一个15 分钟`IDocumentSession`的`AggressiveCacheDuration`时间。这种情况发生的频率似乎与之前调用缓存操作方法的次数成正比。我应该补充一点，我正在为 DI 使用 StructureMap，使用`IDocumentStore`单例，并注入 HttpContextScoped `IDocumentSession`。我已经确认每个请求都注入了一个新的 IDocumentSession，但其中一些已经启用了缓存。

一些代码可以尝试进一步详细说明......

国际奥委会 - RavenRegistry

```
var documentStore = new DocumentStore {ConnectionStringName = "RavenDB"};

documentStore.Initialize();

For<IDocumentStore>().Singleton().Use(documentStore);
For<IDocumentSession>().HttpContextScoped().Use(x =>
{
    var store = x.GetInstance<IDocumentStore>();
    var session =  store.OpenSession();
    return session;
}); 
```

AggressivelyCache属性

```
public class AggressivelyCacheAttribute : ActionFilterAttribute
{
    private IDocumentSession _documentSession;

    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        base.OnActionExecuting(actionContext);

        _documentSession = actionContext.Request.GetDependencyScope()
            .GetService(typeof(IDocumentSession)) as IDocumentSession;

        _documentSession.Advanced.DocumentStore
            .AggressivelyCacheFor(TimeSpan.FromMinutes(15));
    }

    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        base.OnActionExecuted(actionExecutedContext);
        _documentSession.Advanced.DocumentStore.DisableAggressiveCaching();
    }
} 
```

`IDocumentSession`然后在管道中稍后使用相同的方法查询数据库，其结果被缓存。

在随后的请求中，在属性不存在的方法上，注入`IDocumentSession`的缓存设置为 15 分钟。为什么会这样？

我在网上看到的唯一示例是在 using 语句中使用缓存创建会话的位置。这是使用积极缓存的唯一“安全”方式，还是可以做我正在尝试的事情？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T05:34:47.363

基于[Ayende 的博客平台代码](https://github.com/ayende/RaccoonBlog/blob/master/RaccoonBlog.Web/Controllers/AggresivelyCachingRacconController.cs)，你需要在你的过滤器类中有一个引用：

```
private IDisposable _cachingHandle; 
```

然后，当您进行缓存声明时，将结果分配给：

```
_cachingHandle  = _documentSession.Advanced.DocumentStore
    .AggressivelyCacheFor(TimeSpan.FromMinutes(15)); 
```

然后在你的执行中，

```
if(_cachingHandle != null)
    _cachingHandle.Dispose(); 
```

那应该停止不需要的缓存。

# nsdate - NSDate 遥远的未来

> ID：13312875
> 
> 赞同：1
> 
> 时间：2012-11-09T17:21:20.977
> 
> 标签：nsdate, nsrunloop, operation

我有一个关于 [NSDate distinctFuture] 的问题，我这样使用它：

```
while (_connection != nil)
    {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSData distantFuture]];
    } 
```

我收到警告“找不到类方法'+distantFuture'（返回类型默认为'id'）”。我运行代码，错误：-[NSConcreteData timeIntervalSinceReferenceDate]：无法识别的选择器发送到实例 0x80d18e0

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSConcreteData timeIntervalSinceReferenceDate]: unrecognized selector sent to instance 0x80d18e0' *** First throw call stack: (0x1e63022 0x1606cd6 0x1e64cbd 0x1dc9ed0 0x1dc9cb2 0x10af3e1 0x72181 0x11300ad 0x18a9330 0x18aa439 0x95707b24 0x957096fe) terminate called throwing一个例外。我使用 [NSDate dateWithTimeIntervalSinceNow:2]，错误是一样的。有人可以帮助我吗？多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:23:49.843

NSData 不是 NSDate。尝试：[NSDate distinctFuture] 代替。

# iphone - iPhone - NSURLConnection 异步上传文件因 ios6 的 wifi 而失败

> ID：13312876
> 
> 赞同：2
> 
> 时间：2012-11-09T17:21:25.860
> 
> 标签：iphone, wifi, nsurlconnection

我已经实现了`NSURLConnection`将文件上传到服务器的方法，在设备升级到 iOS6 之前一切正常。现在，它在 3G 下工作正常，但是当通过 wifi 连接时，上传只是中途停止并挂在那里直到超时设置。

经过一番检查，使用wifi：

1.  上传小文件时，`didSendBodyData`会多次调用delegate，这很好，但奇怪的是，`totalBytesWritten`相当于之后`totalBytesExpectedToWrite`，它会暂停一段时间，再次调用相同的delegate，现在，`totalBytesExpectedToWrite`会变成2x原始文件大小。

2.  当上传较大的文件时，`didSendBodyData`delegate 将被多次调用，但`totalBytesWritten`永远不会到达`totalBytesExpectedToWrite`. 它将中途停止，直到超时才会再次调用委托。

以下是我如何启动文件发送的简要说明：

```
NSURL *url = [[NSURL alloc] initWithString:MyURI];
NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:url];
[req setHTTPMethod:@"POST"];
[req setTimeoutInterval:600];
[req setCachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData];
[req setValue:@"application/octet-stream" forHTTPHeaderField:@"Content-Type"];
[req setValue:userName forHTTPHeaderField:@"AuthField1"];
[req setValue:authorizationToken forHTTPHeaderField:@"AuthField2"];

[req setHTTPBody:data];

NSURLConnection *reqConnection = [[NSURLConnection alloc] initWithRequest:req delegate:self]; 
```

在 iOS6 中通过 wifi 连接有什么变化？任何意见，将不胜感激。

# css - 您如何在 Flex 4.5.1 中使用 CSS 样式设置 TextFlow 的样式？

> ID：13312877
> 
> 赞同：2
> 
> 时间：2012-11-09T17:21:26.030
> 
> 标签：css, apache-flex, flex4.5, textflow

我希望能够使用我的 CSS 文件中定义的样式来设置 TextFlow 元素的样式。我当前的 TextFlow 实现如下所示，但对我的样式的更改似乎没有生效。如何在 Flex 4.5.1 中使用 CSS 样式设置 TextFlow 样式？

```
// In defaults.css
.textHeader
{
    fontFamily: "Trebuchet MS";
    fontWeight: normal;
    fontStyle: normal;
    fontSize: 25;
    color: #FF0000;
}

.textBody
{
    fontFamily: "Trebuchet MS";
    fontWeight: normal;
    fontStyle: normal;
    fontSize: 12;
    color: #525252;
}

// In MySkin.mxml
<s:RichText left="5" right="5" top="5" bottom="5" id="richText">
    <s:textFlow>
        <s:TextFlow>
            <s:p styleName="textHeader">
                Cupcake cookie cotton candy chupa chups biscuit marzipan. 
            </s:p>
            <s:p styleName="textBody">
                Cupcake cookie cotton candy chupa chups biscuit marzipan. 
                Jelly beans cake jujubes. Powder cotton candy apple pie applicake. 
                Bear claw powder dessert macaroon.
            </s:p>
        </s:TextFlow>
    </s:textFlow>
</s:RichText> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:50:24.350

我不认为你能做到这一点。至少不容易。根据 Adob​​e，TLF 不支持 CSS 样式声明：

[http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff2.html](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7ff2.html)

但是，您可能会发现有效的 3rd 方实现：

[https://dev.c-ware.de/confluence/display/PUBLIC/Flex4+Text-Flow+and+CSS-Styles](https://dev.c-ware.de/confluence/display/PUBLIC/Flex4+Text-Flow+and+CSS-Styles)

（我自己没试过）。

# java - Java中的字节默认占用4个字节？

> ID：13312880
> 
> 赞同：1
> 
> 时间：2012-11-09T17:21:34.390
> 
> 标签：java, memory, byte

> **可能重复：**
> [内存中字节的大小 - Java](https://stackoverflow.com/questions/229886/size-of-a-byte-in-memory-java)

我在一篇文章中读到了这一点。我只是按原样粘贴：

> *   该类至少占用 8 个字节。所以，如果你说`**new Object();**`你将在堆上分配 8 个字节。
> *   每个数据成员占用 4 个字节，除了 long 和 double 占用 8 个字节。即使数据成员是一个字节，它仍然会占用4个字节！此外，使用的内存量以 8 字节块的形式增加。因此，如果您有一个包含一个字节的类，它将占用该类的 8 个字节和用于数据的 8 个字节，总共 16 个字节（呻吟！）。

真的Java字节分配/占用4个字节吗？空类占用 8 个字节？它在这里也令人困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:34:37.137

由于 Java 规范不要求使用内存，这取决于您使用的 JVM 实现。

当然，在所有 JVM 实现中都会有每个对象的开销（例如，为了实现运行时类型检查）。JVM 可能会选择内存对齐字段（在某些平台上，这会在访问字段时显着加快速度）。

但是，如果数组成员为内存对齐而填充，并且可以确认（至少在 Windows 的 oracle vm 上）一个 boolean[] 每个元素占用一个字节，我会感到非常惊讶。

此外，值得注意的是，如果您碰巧处理了一个适当大的堆，则引用类型字段的大小可以是 8 个字节。

总结：如果您真的想知道，请测量目标 JVM 上的内存消耗。

编辑：出于好奇，我写了一个小的（不准确的）基准：

```
class FourBytes {
    byte a,b,c,d;
}

public class Test {

    long usedBefore = used();

    long used() {
        return Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory();
    }

    public void before() {
        System.gc();
        usedBefore = used();
    }

    public void after(String text) {
        long usedAfter = used();
        System.out.println(text + "\t" + new BigDecimal(usedAfter - usedBefore).movePointLeft(6) + " bytes");
        before();
    }

    {
        int max = 1000000;
        before();
        boolean[] bools = new boolean[max];
        after("boolean in array");

        char[] chars = new char[max];
        after("char in array   ");

        Object[] objects = new Object[max];
        after("reference type in array");

        for (int i = 0; i < max; i++) {
            objects[i] = new Object();
        }
        after("Object instance  ");

        Byte[] bytes = new Byte[max];
        before();
        for (int i = 0; i < max; i++) {
            bytes[i] = new Byte((byte) i);
        }
        after("Byte instance    ");

        Integer[] integers = new Integer[max];
        before();
        for (int i = 0; i < max; i++) {
            integers[i] = new Integer(i);
        }
        after("Integer instance");

        FourBytes[] fbs = new FourBytes[max];
        before();
        for (int i = 0; i < max; i++) {
            fbs[i] = new FourBytes();
        }
        after("FourBytes instance");

    }

    public static void main(String[] args) throws Exception {
        new Test();
    }
} 
```

在

```
java version "1.7.0_02"
Java(TM) SE Runtime Environment (build 1.7.0_02-b13)
Java HotSpot(TM) Client VM (build 22.0-b10, mixed mode, sharing) 
```

它打印：

```
boolean in array    1.183624 bytes
char in array       2.091768 bytes
reference type in array 4.091768 bytes
Object instance     8.023664 bytes
Byte instance       16.133408 bytes
Integer instance    16.147312 bytes
FourBytes instance  16.142568 bytes 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:12:10.460

> 该类至少占用 8 个字节。所以，如果你说**new Object();** 您将在堆上分配 8 个字节。

在 OpenJDK/HotSpot JVM 中，它将在 32 位 JVM 上使用 8 个字节，在 64 位 JVM 上使用 16 个字节。

> 每个数据成员占用 4 个字节，除了 long 和 double 占用 8 个字节。

最小大小是 1 个字节而不是 4 个字节。即使在 64 位 JVM 上，引用通常也使用 4 个字节。

> 即使数据成员是一个字节，它仍然会占用4个字节！

这是一个新的想法。我不知道你是怎么得出这个结论的。

> 此外，使用的内存量以 8 字节块的形式增加。

从技术上讲，它与 8 字节边界对齐。

> 因此，如果您有一个包含一个字节的类，则该类将占用 8 个字节

在 32 位或 64 位 JVM 中，标头将占用 8 或 12 个字节，加上该字节的 1 个字节，并向上舍入到下一个 8 字节边界。

> 和 8 个字节的数据，总共 16 个字节（呻吟！）。

确实，但是每个可能的 Byte 对象都被缓存和自动装箱，你没有理由这样做。你永远不需要显式甚至隐式地创建一个字节。

```
Byte b = new Byte((byte) 1); // bad idea.
Byte b = 1; // simpler and more efficient
byte b = 1; // the most efficient option. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T17:26:41.083

这是错误的，至少对于 HotSpot JVM 而言。在那里，类中的原始字节字段将占用一个字节，但确实，类实例的大小从 8 个字节开始，并且字段被分组为每个占用 8 个字节的块——例如，您可以'不要跨 8 字节边界分割字段。

参见例如[http://www.codeinstructions.com/2008/12/java-objects-memory-structure.html](http://www.codeinstructions.com/2008/12/java-objects-memory-structure.html)

# sql-server-2008 - 使用日期计算 SQL Server 中的列

> ID：13312884
> 
> 赞同：1
> 
> 时间：2012-11-09T17:21:55.190
> 
> 标签：sql-server-2008, date

我有一个计算列，当其他两列更新时更新，该列的公式是

```
SELECT(datediff(day,'2012-11-01 18:15:00.000','2012-10-22 11:59:58.000')) 
```

它适用于所有其他日期，但是当月份发生变化时，我会得到一个负值。如何确保不会发生这种情况并获得正确的整数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:29:09.080

好吧，有两个选择：

1.  只需确保**较早的**日期始终是您的日期列表中的第一个日期`DATEDIFF`

    ```
    SELECT DATEDIFF(DAY, '2012-11-01 18:15:00.000', '2012-10-22 11:59:58.000') 
    ```

    这给你一个**-10**的结果- 这是因为你列表中的第一个日期是较晚的日期。

    如果你使用

    ```
    SELECT DATEDIFF(DAY, '2012-10-22 11:59:58.000', '2012-11-01 18:15:00.000') 
    ```

    你得到**10**的结果- 因为第一个日期`DATEDIFF`是较早的日期。

2.  仅用于`ABS`获取绝对值（不带 + 或 -）：

    ```
    SELECT ABS(DATEDIFF(DAY, '2012-11-01 18:15:00.000', '2012-10-22 11:59:58.000')) 
    ```

    在这种情况下，您**永远不会**得到负值。

# php - 登录表单不起作用

> ID：13312892
> 
> 赞同：0
> 
> 时间：2012-11-09T17:22:34.573
> 
> 标签：php

我最近升级了我的 php 版本，但我的登录表单不再有效。如果我输入正确的输入.. 它不会重定向，而是显示一个空白页。我仍在学习，任何帮助将不胜感激。

```
<?
session_start();
if(!empty($_SESSION[uname]))
{
    header("location:homepage.php");
    exit();
}
require_once "conn.php";
if(isset($s1))
{
    if(!empty($uname1) && !empty($upass1))
    {
        $sql = "SELECT * FROM members_info WHERE uname = '$uname1' AND upass = '$upass1'";
        $result = mysql_query($sql);
        if(mysql_num_rows($result) == "1")
        {
            $a = mysql_fetch_array($result);
            $_SESSION[uname] = $uname1;
            header("location:homepage.php");
            exit();
        } 
        else 
        {
            $login_error = "The username and password you entered was invalid.";
        }
    }
}
include_once "main3.php";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:26:59.080

改变这个你会看到一些东西。还要在 php.ini 文件中将显示错误设置为 true。这样您就可以看到错误（如果可用）。

```
 if(!empty($_SESSION[uname])) 
```

对此

```
if(!empty($_SESSION['uname'])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:37:11.617

由于您没有在任何地方使用任何请求变量，我的猜测是您已[`register_globals`](http://www.php.net/manual/en/ini.core.php#ini.register-globals)在旧 php 版本中打开。

此功能已弃用，并已从 php 5.4 中删除。

要访问发布的变量，现在您必须使用：

```
$_POST['uname1'] 
```

代替：

```
$uname1 
```

等等

另请注意，您的代码容易受到 SQL 注入的影响，您确实应该切换到 PDO / mysqli 和准备好的语句。

# java - 使 EJB 3.1 绑定默认为接口而不是类名

> ID：13312905
> 
> 赞同：0
> 
> 时间：2012-11-09T17:23:20.120
> 
> 标签：java, java-ee-6, ejb-3.1

```
@Singleton
public class DummySentenceManager implements SentenceManager { 
```

绑定到

```
[java:global/appname/mypkg.DummySentenceManager, java:global/appname/mypkg.DummySentenceManager!mypkg.SentenceManager] 
```

我希望它绑定到：

```
[java:global/appname/mypkg.SentenceManager] 
```

不诉诸于：

```
@Singleton(name="mypkg.SentenceManager")
public class DummySentenceManager implements SentenceManager { 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:56:17.687

为什么要这样绑定？无论如何，EJB 在模块名称中必须是唯一的，因此没有理由用包来限定名称。此外，`java:global`绑定的全部意义在于它们不能以这种方式定制：它们遵循严格且可预测的模式。

（对于它的价值，`.`根据 XSD，在 XML 中指定时，它不是 ejb 名称的有效名称。如果您因此在 EJB 实现中遇到问题，我不会感到惊讶。）

# c# - Stream 对象的 ReadAllLines？

> ID：13312906
> 
> 赞同：75
> 
> 时间：2012-11-09T17:23:22.533
> 
> 标签：c#, file, text, stream

存在 a`File.ReadAllLines`但不存在`Stream.ReadAllLines`。

```
using (Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("Test_Resources.Resources.Accounts.txt"))
using (StreamReader reader = new StreamReader(stream))
{
    // Would prefer string[] result = reader.ReadAllLines();
    string result = reader.ReadToEnd();
} 
```

有没有办法做到这一点，还是我必须逐行手动循环文件？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-11-09T17:27:03.607

您可以编写一个逐行读取的方法，如下所示：

```
public IEnumerable<string> ReadLines(Func<Stream> streamProvider,
                                     Encoding encoding)
{
    using (var stream = streamProvider())
    using (var reader = new StreamReader(stream, encoding))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            yield return line;
        }
    }
} 
```

然后将其称为：

```
var lines = ReadLines(() => Assembly.GetExecutingAssembly()
                                    .GetManifestResourceStream(resourceName),
                      Encoding.UTF8)
                .ToList(); 
```

这`Func<>`部分是为了应对多次阅读，并避免不必要地打开流。当然，您可以轻松地将代码封装在一个方法中。

如果您不需要一次全部存储在内存中，那么您甚至不需要`ToList`...

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-12-12T16:04:43.327

该`.EndOfStream`属性可以在循环中使用，而不是检查下一行是否不为空。

```
List<string> lines = new List<string>();

using (StreamReader reader = new StreamReader("example.txt"))
{
    while(!reader.EndOfStream)
    {
        lines.Add(reader.ReadLine());
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-09T17:27:03.890

```
using (Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("Test_Resources.Resources.Accounts.txt"))
using (StreamReader reader = new StreamReader(stream))
{
    // Would prefer string[] result = reader.ReadAllLines();
    string[] result = reader.ReadToEnd().Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-22T03:35:22.120

这里的使用`Split`：

```
reader
   .ReadToEnd()
   .Split(Environment.NewLine.ToCharArray(), StringSplitOptions.RemoveEmptyEntries); 
```

不等于`ReadLine`。如果您查看[StreamReader.cs](http://referencesource.microsoft.com/#mscorlib/system/io/streamreader.cs)`ReadLine`的源代码，您会发现它正确处理了行终止符：\r、\n 和 \r\n。当行终止符为 \r\n 时，不会返回额外的空字符串，这在 DOS/Windows 中很常见。“看到”（解析） \r 后跟 \n 作为 2 个单独的分隔符并返回一个空字符串。`ReadLine``Split`

上面代码中的“StringSplitOptions.RemoveEmptyEntries”确实删除了这些空字符串，但它也会删除输入中出现的任何空行。

因此对于输入 line1\r \r line3\r `ReadLine`返回 3 行。第二个是空的。 `Split`创建 4 个字符串。（在最后一个 \r 之后有一个附加字符串。）然后它会删除第 2 个和第 4 个。

请注意，`Split`它不太适合解析“后修复”分隔的文本行。即分隔符出现在标记之后。While`Split`适用于中缀，分隔符出现在标记之间。它是 a,b,c 和 line1\r,line2,line3\r 之间的区别。对于这些输入，`Split`分别返回 3 个字符串或 4 个字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-22T15:41:03.510

使用以下扩展方法：

```
public static class Extensions
{
    public static IEnumerable<string> ReadAllLines(this StreamReader reader)
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            yield return line;
        }
    }
} 
```

可以得到你想要的代码：

```
using (Stream stream = Assembly.GetExecutingAssembly().GetManifestResourceStream("Test_Resources.Resources.Accounts.txt"))
using (StreamReader reader = new StreamReader(stream))
{
    string[] result = reader.ReadAllLines().ToArray();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-09T17:29:18.080

如果你想使用 StreamReader 那么是的，你将不得不使用 ReadLine 并循环通过 StreamReader，逐行读取。

像这样的东西：

```
string line;

using (StreamReader reader = new StreamReader(stream))
{
    while ((line = reader.ReadLine()) != null)
    {   
        Console.WriteLine(line); 
    }
} 
```

或尝试

```
using (StreamReader reader = new StreamReader("file.txt"))
    {

       string[] content = reader.ReadToEnd().Replace("\n","").Split('\t');
    } 
```

# c# - C# 文件上传 - 原始创建日期被覆盖

> ID：13312911
> 
> 赞同：-1
> 
> 时间：2012-11-09T17:23:57.340
> 
> 标签：c#

I have a MVC web application, which provides users to upload text files. I then take those text files and store it on a folder which is monitored by a file system watcher and in turn upon newly generated files, it transfers those files to an FTP server. Everything works great but there is a small issue with File Creation Dates. I noticed that when they upload the file to my web application, the original file creation date is replaced by the current date (the time when the file is actually uploaded). This does not happen on my local machine. Before I save the file I even try to get the file creation date but its always wrong. Could it be a server configuartion setting? My requirement is to take the original file creation date and convert that to an epoch date in milliseconds. Again, locally on dev machine it works great, just on the server it overrides the original creation date. Below is my code:

```
 string storedFileName = string.Format("{0}{1}.out", destinationPath, System.Guid.NewGuid());
                            file.ElementAt(1).SaveAs(storedFileName);

                            DateTime fileCreatedDate = System.IO.File.GetCreationTime(file.ElementAt(1).FileName);

                            //Change Creation DateTime to Epoch
                            TimeSpan span = (fileCreatedDate - new DateTime(1970, 1, 1, 0, 0, 0, 0).ToLocalTime());
                            double epoch = span.TotalMilliseconds; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:28:01.857

不。

作为 HTTP 文件上传的一部分，没有包含有关文件的元数据。你能得到的最多的是文件名，有时是路径。

如果您需要获取其他文件信息，则需要创建某种客户端应用程序来执行自定义上传。单独的浏览器也不会为您的脚本提供此类信息。

# android - 在 Android 应用程序中解析来自互联网的数据

> ID：13312912
> 
> 赞同：1
> 
> 时间：2012-11-09T17:23:57.433
> 
> 标签：android, json

嘿伙计们，我从 Android 编程中的几个小步骤开始。我浏览了相关视频，并有信心跳入游泳池。我的动机是制作一个简单的应用程序，让我在大学等待校车的时间。我看到的示例使用 JSON 解析来解析来自互联网的数据，特别是 twitter。那么我如何检查我想要获取信息的网站是否给了我这样的 APIS。例如对于像[http://www.sbstransit.com.sg/](http://www.sbstransit.com.sg/)这样的网站，我看不到用于解析的 API。那么在这种情况下我该怎么办。这只是一个示例网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:49:23.253

试试看...

```
 String response = 'json string';
        try {
            JSONArray responseObj= new JSONArray(response);
                 String week_percentage_work = responseObj.getString("key");
             }
        } catch (JSONException e) {
        e.printStackTrace();
    } 
```

更多信息请访问：[android-json-parsing-tutorial](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

[堆栈问题](https://stackoverflow.com/questions/8210676/android-json-api-parsing)

# javascript - 如何防止 Meteor.js 模板在没有数据的情况下呈现

> ID：13312913
> 
> 赞同：5
> 
> 时间：2012-11-09T17:24:05.140
> 
> 标签：javascript, jquery, twitter-bootstrap, meteor

有人可以帮我理解 Meteors 模板的行为吗？

我想在我的项目中实现一个通知系统，类似于 Apples Growl。当一条记录写入数据库时​​，它使用简单的 jQuery 效果来显示一条消息。我简化了代码示例，以显示基本问题：

编码：

```
var Messages = new Meteor.Collection("messages");

if (Meteor.isClient) {
   Template.Notification.Message = function() {
     return Message.findOne({}, {sort: {seq: -1}});
   };

   Template.Notification.rendered = function() {
    $("#livebar").fadeIn(400).delay(1000).fadeOut(400);
   }
} 
```

模板：

```
<template name="Notification">
<div class="row">
   <div class="span6 alert alert-error" id="livebar" style="display:none;">
        {{Messages.text}}
   </div>
</div>
</template> 
```

如果页面被渲染，一个空的不可见区域会被 jQuery 效果渲染，然后系统会加载响应式数据源（消息）并再次渲染该区域！我试图阻止它渲染两次，但没有成功。该错误似乎很容易修复，但我被困在这里。我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T11:12:48.060

`{{> Notification}}`您可以用块包围模板调用`{{#if}}`。

```
{{#if has_notifications}}
  {{> Notifications}}
{{/if}}

//JS
Template.foo.has_notifications = function() {
  Message.find().count() > 0;
} 
```

但是，由于数据不是以一体的形式到达的，因此可能会发生多次渲染模板的情况。超时可以帮助你...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T07:46:28.813

你需要这个额外的代码：

首先`meteor remove autopublish`在项目内的终端上执行。

其次定义要发布的内容

```
//On isServer
Meteor.publish('messages', function(){
    return Messages.find();
}); 
```

然后订阅该数据并等待它准备好

```
//On isClient
subscription_handle = Meteor.subscribe('messages');

Meteor.autorun( function(computation) {
    if( subscription_handle.ready() ) {

        //The data is now ready, start your templates here

        computation.stop(); //Stop autorun
    } 
}); 
```

此外，将您的集合定义为~~var~~ `Messages = new Meteor.Collection("messages");`，使其成为全局变量。

一种完全不同（但更简单）的方法是在 Iron Router 中使用模板路由的[waitOn](https://github.com/EventedMind/iron-router#waiting-on-subscriptions-waiton)属性，因此您的模板会在数据准备好后呈现。

# web-hosting - ISPConfig 3.0.4.1 添加网站时不创建 web 文件夹或 .conf

> ID：13312914
> 
> 赞同：0
> 
> 时间：2012-11-09T17:24:10.160
> 
> 标签：web-hosting

我正在使用 ISPConfig 3.0.4.1，当我添加一个新站点时，我成功了，因为它出现在网站选项卡上，但当我通过 SSH 连接到它时，它实际上并没有在我的服务器上的客户端文件夹中创建 web## 文件夹. 它不是在错误的客户端文件夹或任何东西中创建它的问题，它根本不创建文件夹。我还为域添加了 DNS 区域，但我认为这与它没有任何关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T23:14:05.270

*必须对 Debian/Ubuntu 中的cron*错误做一些事情：ISPconfig 通过设置各种 cron 作业来完成工作。

在 http://www 上有一些解决方案。howtoforge.com/forums/showthread.php?t=38675

并在[https://bugs.launchpad.net/ubuntu/+source/shadow/+bug/238755](https://bugs.launchpad.net/ubuntu/+source/shadow/+bug/238755)

另外，请阅读未执行的此[linux debian crontab 作业](https://stackoverflow.com/questions/5486601/linux-debian-crontab-job-not-executed)

=======

经过一番研究，似乎它与一个不可变的位有关：

[http://www.howtoforge.com/forums/showthread.php?t=60767](http://www.howtoforge.com/forums/showthread.php?t=60767)

# iphone - 创建一个不保存到持久存储的核心数据模型对象

> ID：13312920
> 
> 赞同：1
> 
> 时间：2012-11-09T17:24:23.640
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobject

我有一个使用核心数据的 iOS 应用程序。我已经建立了我的`NSManagedObjectModel`. 我在那里有一个 NEOrder 实体。我已经生成了 NSManagedObject 子类。

```
@interface NEOrder : NSManagedObject

@property //....

@end 
```

我有一个 UIViewController 的子类。这需要具有 NEOrder 类型的实例变量。但我希望它表现得像一个常见的自定义对象：

```
@interface NEOrder : NSObject

@property //....

@end 
```

当然，它可以通过创建另一个 .h 和 .m 文件来完成，其中声明 NEOrder_ 子类化 NSObject 。但是这个文件会非常类似于核心数据生成的 NSObjectModels，除了 @synthesize/@dynamic 和 init 方法。我不想做两次工作。请帮帮我，怎么办？

如果我将 init 添加到生成的 NEOrder 应用程序会崩溃：

```
-(id)init
{
    if (self=[super init])
    {
        self.name=[[NSString alloc] init];
        self.phone=[[NSString alloc] init];
        self.weight=[[NSNumber alloc] init];
        self.fromDirection=[[NEDirection alloc] init];
        self.toDirection=[[NEDirection alloc] init];
    }
    return self;
} 
```

还有几句话是关于我想如何使用它的。

```
//NEOrder *order is an instance of view controller
self.order=[NEOrder alloc] init]
//...
self.order.name=@"order name";
self.order.phone=@"12344321"; 
```

是否可以？或者我必须为此创建一个单独的 NSObject 子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:31:16.467

您的问题的一部分没有意义：

> 我希望它表现得像一个常见的自定义对象。

你什么意思？

您的问题的其余部分表明您需要一个`NEOrder`类，并且您应该像这样设置视图控制器：

**MyViewController.h：**

```
@class NEOrder;

@interface MyViewController : UIViewController

@property (strong) NEOrder *order;

@end 
```

**MyViewController.m：**

```
#include "NEOrder.h"

@implementation MyViewController

...

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:31:32.457

所有的类都继承自 NSObject，所以 NSManagedObject 也继承自 NSObject。这意味着您的 NEOrder 对象将具有 NSObject 的所有特征。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T17:31:46.953

使用[类别](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。类别可用于为实际类之外的类编写方法。我将它们与 Core Data 模型一起使用，因此当我出于任何原因需要重新生成 NSManagedObjectModel 时，我会保留这些方法。

# windows - 在 Windows 上从浏览器运行批处理文件，但不继承浏览器的环境变量

> ID：13312923
> 
> 赞同：3
> 
> 时间：2012-11-09T17:24:33.220
> 
> 标签：windows, batch-file, environment-variables

我正在尝试编写一个 Windows 批处理文件，为我公司的内部用户启动一个安装程序。我们的 Intranet 上有一个批处理文件的链接。如果您单击该链接（至少在 IE9 上，我必须支持该链接），那么它会询问您是要运行还是保存文件。大多数用户单击运行，批处理文件作为 IE 的子进程执行，继承其环境变量。这就是我的问题出现的地方。

如果浏览器已经打开了一段时间，可能是在浏览器启动*后*用户的 PC 上设置了（用户或系统级别）环境变量，因此批处理文件看不到该变量，我需要它到。

我想找到一种方法来确保批处理文件始终在新环境下运行。

这有效

```
rem bootstrap batch file
explorer the_real_batch_file.bat 
```

因为`Explorer.exe`对用户和系统环境变量的变化保持警惕，但这并不

```
rem bootstrap batch file
explorer the_real_batch_file.bat some_param 
```

`some_param`混淆 Windows 资源管理器（它只是启动一个新的 Windows 资源管理器窗口）。我需要能够将参数传递给“真正的”批处理文件，所以这是一个显示停止器。

任何人都可以看到解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:47:06.563

对不起，我是新来的，我一生都无法弄清楚对上面的问题添加评论......

无论哪种方式，explorer.exe 都不会处理批处理文件的执行，而 cmd /c 会。

尝试做

```
cmd /c "batchfile.bat argument" 
```

另一种方法是找出您的软件中正在调用哪些环境变量，并在批处理中调用它们以确保它们是正确的，如果不正确则失败。IE

```
IF "%ENVIORMENTALVARIABLE%" NEQ "WhatitShouldBe" (goto :fail) else goto continue
:fail
echo this failed <insert exitcode here>
:continue 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T10:19:32.840

我最终稍微简化了我的问题。我现在可以运行`start explorer my_batch_file`（不带批处理文件的参数），因为我生成了一个定制的中间批处理文件，`%TEMP%`其中包含我需要的参数。

所以我这样做：

```
start explorer %TEMP%\temp_batch_file.bat 
```

在里面`temp_batch_file.bat`我有

```
call my_original_batch_file.bat some_argument 
```

这似乎工作正常。

# xml - 在 Windows 8 Metro 中创建文件

> ID：13312928
> 
> 赞同：1
> 
> 时间：2012-11-09T17:24:49.300
> 
> 标签：xml, windows, c#-4.0, windows-8, microsoft-metro

我正在搜索使用 c# 在 Windows 8 Metro 应用程序中创建 xml 文件，我遇到的任何链接都是如何操作 xml，我找不到任何关于如何创建将存储在硬盘上的 .xml 文件的信息。

我在 Metro 应用程序中想要这样的东西，但 Windows.xml 不提供这个。

```
XmlTextWriter writer = new XmlTextWriter("output.xml", null); 
```

我到底想问的是在应用程序启动时检查文件是否存在，如果不存在，处理的异常将创建一个带有 xml documentElement 的文件。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:14:28.780

此代码示例演示如何使用 C# 将 XML 写入 Windows Store 8 应用程序中的文件。它还包括用于检查文件是否存在的代码。祝你好运！

[Xlinq、XmlReader 和 XmlWriter 数据消息查询示例](http://code.msdn.microsoft.com/windowsapps/XLinq-XmlReader-and-1e17c0a5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T18:12:05.610

现代 UI 应用程序在沙盒环境中运行。您无权直接访问文件系统。

文件 IO API 完全修改（和异步）。

您可以使用 Pickers 获取文件流。[例子](http://dotnet.dzone.com/articles/windows-8-metro-app-tip-day)

或者，您可以使用 App 数据文件夹来创建文件。[应用数据访问快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)

[读取和写入文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758325.aspx)

# c# - 如何将播放视频作为相机输入？

> ID：13312932
> 
> 赞同：0
> 
> 时间：2012-11-09T17:25:09.907
> 
> 标签：c#, c++, image-processing, opencv, emgucv

我想从正在进行的实时视频中检测特定对象。所以我将帧提取部分（opencv，c++）作为一部分实现，其他检测功能（emgucv，c#）作为另一部分实现。为了集成这些部分，我将 c++ 项目的 exe 文件添加到 c# 项目中，并且运行良好。但现在我想离线测试这个项目。这意味着我想通过使用保存在硬盘中的视频来测试这个项目。在集成之前，c++ 项目可以在在线和离线情况下执行。但在集成后只能在在线条件下执行。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:31:47.627

您可以随时尝试网络摄像头模拟器，如 Magic Camera、Fake Webcam 或其他任何东西（只需 google 一下，互联网上有很多软件）——它们会播放视频文件，就好像它来自您的网络摄像头一样。

但是，您可能还想考虑重新组织您的软件设计，以便它可以同时接受流和文件输入——一旦您将处理逻辑与捕获逻辑分开，它应该非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:35:21.507

实时摄像机基本上是图像帧的异步源。大概您将回调函数传递给相机 API，并且该回调是在新帧可用时触发的？您可以以相当直接的方式模仿此功能。

编写一个打开视频文件的函数，然后循环运行......循环的每次迭代，它都会从文件中抓取一帧，将其适当打包，然后调用您的回调函数。然后它可以休眠几毫秒，然后重复循环。在它自己的线程中运行这个函数。从回调的角度来看，它与实时摄像机没有什么不同。

# javascript - 我如何删除 HeaderButton JQGrid

> ID：13312939
> 
> 赞同：0
> 
> 时间：2012-11-09T17:26:03.093
> 
> 标签：javascript, css, jqgrid

我正在为 JQGrid 设置标题并出现标题按钮；以及如何删除它？只需要我的网格的标题。Headerbutton 是折叠/展开；但我不需要那个。

```
<a class="ui-jqgrid-titlebar-close HeaderButton" href="javascript:void(0)" role="link
style="right: 0px;">
<span class="ui-icon ui-icon-circle-triangle-n"></span>
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:20:53.457

您应该只使用相应的 jqGrid 选项

```
hidegrid: false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T20:33:42.693

隐藏网格：假；工作。我走了很长的路来获得相同的行为。

```
$('#results_div  div').find('.HeaderButton').hide(); 
```

# matlab - 在平均数据时找到适合窗口大小的大小

> ID：13312941
> 
> 赞同：1
> 
> 时间：2012-11-09T17:26:19.067
> 
> 标签：matlab, window

我正在编写一个函数，该函数需要一个日期输入向量，我将其指定为儒略日期，以及一系列值（作为向量）。在函数中，我使用预定义的窗口大小来删除数据中的任何 nan。例如：

```
t = transpose(1/24:1/24:40);
data1 = 1+(30-1).*rand(length(t),1);
Randm = floor(1+(length(t)-1).*rand(120,1));
data1(Randm) = nan;
figure(1);
plot(data1,'linewidth',3);
hold on;

dailyData = reshape(data1,40,[]);
nanMap = isnan(dailyData);
validValuesPerDay = sum(~nanMap, 2);
nonNanData = dailyData;
nonNanData(nanMap) = 0;
sumPerDay = sum(nonNanData, 2);
dailyMeans = sumPerDay ./ validValuesPerDay;
dailyMeans = repmat(dailyMeans, [1 24]);
repairedData = dailyData;
repairedData(nanMap) = dailyMeans(nanMap);
data1 = reshape(repairedData,[],1);
plot(data1,'--r'); 
```

我现在面临的问题是如何处理分辨率与每小时（例如每天或每周）不同的数据，因为这会在我使用 reshape 时影响代码。有人对如何处理这个问题有一些建议吗？我正在考虑按照将窗口大小（我的意思是使用整形时）指定为数据长度的一部分来做一些事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:44:40.510

通常，您必须为所需的所有不同功能编写单独的例程。例如，如果您获得每日数据，您想做什么？平均数周？两周？几个月？年？

因此，最可靠的选择是（假设您总是得到线性网格时间）：

```
switch t(2)-t(1)
    case 1/24 % hourly data
        dailyData = reshape(data1,[], 24);
        ... etc.

    case 1 % daily data
        weeklyData = reshape(data1,[], 7);
        ... etc.

    case 7  % weekly data
        yearlyData = reshape(data1,[], 52);
        ... etc.

    otherwise
        ... issue error

end 
```

请注意，这`reshape`可能是您在交换机中唯一需要做的事情；其余代码将保持不变。您可能想重新考虑变量名...

# assembly - 在 8086 中保留一些标志寄存器位的目的是什么？

> ID：13312943
> 
> 赞同：1
> 
> 时间：2012-11-09T17:26:23.793
> 
> 标签：assembly, intel, flags, cpu-registers, x86-16

在 intel 8086 处理器的标志寄存器中，**保留**12、13、14 和 15 位的目的是什么？例如，它们在 SAR 和 SHR 等装配移位命​​令中是否有用，或者它们保留用于测试目的？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:36:56.777

它们保留供将来使用。换句话说，如果您使用它们或依赖它们作为某个值，那么您的代码将来可能会中断。

在“保留标志”中确实在 80286 和更新的处理器中添加了更多标志，寄存器甚至扩展到 32 位。[您可以在此处](http://zsmith.co/intel.html#flags)获得新标志的概述以及添加时间。

# eclipse - 如何让 Eclipse / m2eclipse 接受一个大型项目设置而不挂起？

> ID：13312948
> 
> 赞同：0
> 
> 时间：2012-11-09T17:26:44.000
> 
> 标签：eclipse, maven, import, maven-plugin, m2eclipse

我正在尝试将 Apache James Server 项目导入 Eclipse。

近一周前我已经实现了导入、构建和运行，但现在我不能。

现在它开始挂在“Importing maven projects %93”上

我尝试了几种情况

1）我有 m2eclipse 插件，并且有一个嵌入式 maven 并使用它。

挂点是 %93

2）我在 Ubuntu 上也有一个命令行 maven，当我通过“Window-Prefrences-Maven-Installations”将此 maven（将嵌入更改为此）设置为 Eclipse 时

挂在 %93

3）签出一个新的树干并尝试导入

结果相同

有很多项目都有一个根 pom，每次我尝试时，挂起都从同一个子项目开始。

这里有一个帖子，所以，用户回答说它是关于代理的。

我控制了我的代理设置，没有指定 IP 地址和端口。

此外，我想问一下，如果是关于代理，我如何导入并能够运行该项目？

我的 Eclipse 工作区日志与这种情况有关：

```
!ENTRY org.eclipse.core.resources 4 4 2012-11-09 18:31:14.132
!MESSAGE Exception loading preferences from: /james-server-queue-activemq/.settings/org.eclipse.core.resources.prefs.
!STACK 1
org.eclipse.core.runtime.CoreException: File not found: /home/gobito-merve/dev/workspace091112/james-server-queue-activemq/.settings/org.eclipse.core.resources.prefs.
    at org.eclipse.core.internal.filesystem.Policy.error(Policy.java:55)
    at org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:371)
    at org.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:797)
    at org.eclipse.core.internal.resources.File.getContents(File.java:289)
    at org.eclipse.core.internal.resources.ProjectPreferences.load(ProjectPreferences.java:461)
    at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:387)
    at org.eclipse.core.internal.preferences.EclipsePreferences.getChild(EclipsePreferences.java:500)
    at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:629)
    at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:757)
    at org.eclipse.core.internal.resources.CharsetManager.isDerivedEncodingStoredSeparately(CharsetManager.java:367)
    at org.eclipse.core.internal.resources.CharsetManager.getPreferences(CharsetManager.java:294)
    at org.eclipse.core.internal.resources.CharsetManager.getCharsetFor(CharsetManager.java:278)
    at org.eclipse.core.internal.resources.Project.getDefaultCharset(Project.java:420)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ContainerUndoState.<init>(ContainerUndoState.java:133)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ProjectUndoState.<init>(ProjectUndoState.java:48)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ResourceUndoState.fromResource(ResourceUndoState.java:44)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:130)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: java.io.FileNotFoundException: /home/gobito-merve/dev/workspace091112/james-server-queue-activemq/.settings/org.eclipse.core.resources.prefs (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:362)
    ... 25 more
!SUBENTRY 1 org.eclipse.core.filesystem 4 271 2012-11-09 18:31:14.133
!MESSAGE File not found: /home/gobito-merve/dev/workspace091112/james-server-queue-activemq/.settings/org.eclipse.core.resources.prefs.
!STACK 0
java.io.FileNotFoundException: /home/gobito-merve/dev/workspace091112/james-server-queue-activemq/.settings/org.eclipse.core.resources.prefs (No such file or directory)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at org.eclipse.core.internal.filesystem.local.LocalFile.openInputStream(LocalFile.java:362)
    at org.eclipse.core.internal.localstore.FileSystemResourceManager.read(FileSystemResourceManager.java:797)
    at org.eclipse.core.internal.resources.File.getContents(File.java:289)
    at org.eclipse.core.internal.resources.ProjectPreferences.load(ProjectPreferences.java:461)
    at org.eclipse.core.internal.preferences.EclipsePreferences.create(EclipsePreferences.java:387)
    at org.eclipse.core.internal.preferences.EclipsePreferences.getChild(EclipsePreferences.java:500)
    at org.eclipse.core.internal.preferences.EclipsePreferences.internalNode(EclipsePreferences.java:629)
    at org.eclipse.core.internal.preferences.EclipsePreferences.node(EclipsePreferences.java:757)
    at org.eclipse.core.internal.resources.CharsetManager.isDerivedEncodingStoredSeparately(CharsetManager.java:367)
    at org.eclipse.core.internal.resources.CharsetManager.getPreferences(CharsetManager.java:294)
    at org.eclipse.core.internal.resources.CharsetManager.getCharsetFor(CharsetManager.java:278)
    at org.eclipse.core.internal.resources.Project.getDefaultCharset(Project.java:420)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ContainerUndoState.<init>(ContainerUndoState.java:133)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ProjectUndoState.<init>(ProjectUndoState.java:48)
    at org.eclipse.ltk.internal.core.refactoring.resource.undostates.ResourceUndoState.fromResource(ResourceUndoState.java:44)
    at org.eclipse.ltk.core.refactoring.resource.DeleteResourceChange.perform(DeleteResourceChange.java:130)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.CompositeChange.perform(CompositeChange.java:278)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation$1.run(PerformChangeOperation.java:258)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.executeChange(PerformChangeOperation.java:306)
    at org.eclipse.ltk.internal.ui.refactoring.UIPerformChangeOperation.executeChange(UIPerformChangeOperation.java:92)
    at org.eclipse.ltk.core.refactoring.PerformChangeOperation.run(PerformChangeOperation.java:218)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ltk.internal.ui.refactoring.WorkbenchRunnableAdapter.run(WorkbenchRunnableAdapter.java:87)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:23:18.143

有时一个项目对于 Eclipse / m2eclipse 来说太大了，至少在我的经验中是这样。以下是我用来哄骗 Eclipse 处理大型项目的一些技巧。

1）关闭“自动构建”功能 - 似乎这是通常会破坏日食的位。

2) 考虑关闭其他 m2eclipse maven 功能，如下载源和 javadoc；这些只是很慢。

3) 从命令行对您的项目进行 SCM 检查，并从命令行构建它们。我建议此时让 maven 检索源代码和 javadocs；这样你就不会让 Eclipse 做那么大的家务活。

4) 在 Eclipse 中，仅在您需要的模块上“导入现有的 Maven 项目”。考虑到您并不“需要”一个模块来成为一个 Eclipse 项目，只是为了阅读它的源代码。如果您在命令行构建期间下载了源代码，那么您在 eclipse 中拥有的任何项目都将能够在代码浏览和调试中单步执行它的依赖项源代码，因为 eclipse 知道如何在您的本地 Maven 仓库。

如果有人有更多关于充分利用 m2eclipse 的技巧，我很乐意在这里添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T11:50:04.020

我已将 eclipse 的文件夹从一个地方移动到另一个地方，并且该文件夹错误地获得了 root 权限。因此，当我调用 eclipse 时，我使用超级用户执行此操作，并且 eclipse 的`M2_REPO`路径已更改为`/root/.m2/repository`. 现在我改变了previliges并`M2_REPO`重新设置`/home/myuser/.m2/repository`并且问题已经消失了。

# eclipse - 我可以将三星智能电视的 sdk 安装到现有的 Eclipse 中吗？

> ID：13312950
> 
> 赞同：3
> 
> 时间：2012-11-09T17:26:48.493
> 
> 标签：eclipse, eclipse-plugin, samsung-smart-tv

我已经安装了[三星智能电视 SDK](http://www.samsungdforum.com/Devtools/Sdkdownload)，但是当我启动 Eclipse 时，它​​没有三星 SDK 工具菜单或任何与电视相关的东西。我安装的其他 eclipse 版本之一是否可能会影响它？我对 sdk 版本 4 和 3.5.2 都有同样的问题。

或者，我可以将 sdk 安装到我预先存在的 eclipse 安装中吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T07:59:48.063

您是否按照安装说明以管理员身份运行 eclipse.exe？如果没有，请右键单击 eclipse.exe 并从上下文菜单中选择“以管理员身份运行”。

只有在这样做时才会安装三星功能。以管理员身份打开 Eclipse 一次后，这些功能已安装，即使您以普通用户身份执行它也将可用。

# mysql - 在存储过程中使用 current_timestamp +0 作为变量

> ID：13312951
> 
> 赞同：1
> 
> 时间：2012-11-09T17:26:50.487
> 
> 标签：mysql, stored-procedures

在 MySQL 过程中，我想将 current_timestamp+0 设置为一个变量并在查询中使用这个变量。

编辑：我需要@P_version 在整个过程中保持相同的值。我想在开始时获取当前时间戳并在所有查询中使用这个值。

我试过：

```
BEGIN
    DECLARE P_version float;
    SET P_version = current_timestamp +0;

    insert INTO reports_4.Items(id, version, itype)
    Select I.id, P_version, I.itype from Items where I.live = 1;
    .....
END; 
```

和：

```
 BEGIN
      BEGIN
        SET @P_version = 'select current_timestamp +0 from dual';
            PREPARE query from @P_version;
            EXECUTE query;
            DEALLOCATE prepare query;
        END;    
      insert INTO reports_4.Items(id, version, itype)
      Select I.id, P_version, I.itype from Items where I.live = 1;
      .....
END; 
```

如果我使用以下内容，当我第二次调用我的过程时，@P_version 的值与我第一次运行该过程时的值相同。

```
BEGIN
  select @P_version = current_timestamp +0 from dual;

  insert INTO reports_4.Items(id, version, itype)
  Select I.id, @P_version, I.itype from Items where I.live = 1;
  .....
END; 
```

你有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:29:09.387

`set @p = now();`? 对于这种事情，mysql 不需要从 dual 中进行选择。

# java - Java3D 通过 SVN

> ID：13312952
> 
> 赞同：0
> 
> 时间：2012-11-09T17:26:57.657
> 
> 标签：java, eclipse, java-3d

我有一个与这篇文章有些相似的问题。

[如何动态加载 Java3D 库？](https://stackoverflow.com/questions/11838393/how-do-i-dynamically-load-the-java3d-library)

我有一个项目，我可以在我的系统上安装 Java3D，然后在我的项目中使用 Java3D 库。但是当我将它上传到 SVN，并从另一台计算机获取它时，它不起作用。

我尝试在项目中创建一个 lib 文件夹，并从属性中的 lib 文件夹中添加 .jar 文件。但这仍然行不通。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:39:47.523

除了 JAR，Java3D 还加载了一组本地库。您是否将这些包含在您的项目和 SVN 存储库中？

另外，请记住，本机库是特定于平台的。如果您希望您的程序在所有支持 Java3D 的平台上运行，您可以包含所有本机库并动态解包/加载您需要的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T17:30:01.057

SVN 认为您的 .jar 文件是文本文件并照常处理它们。因此，如果数据在平台之间移动，它将被破坏，因为 SVN 将“修复”行尾代码。

这个问题有关于如何解决它的信息：[如何告诉 Subversion 将文件视为二进制文件？](https://stackoverflow.com/questions/73797/how-do-i-tell-subversion-to-treat-a-file-as-a-binary-file)

# xcode - Xcode 和在 IOS 中注销

> ID：13312961
> 
> 赞同：0
> 
> 时间：2012-11-09T17:27:24.947
> 
> 标签：xcode, ios5, ios6

对于 iphone/ipad 上的商业应用程序，想要添加登录和注销。每次，我使用该应用程序并导航到一组工作流程，然后突然在 iphone/ipad 中点击“主页”（iphone底部的中心按钮）并转到其他应用程序，然后在一个小时后返回，我在同一个地方我离开的地方。

我想要登录，我脑海中的设计是当我点击第一个屏幕 ViewDidLoad 时，检查用户 ID 变量值，如果它为空，则调用模式表单，验证并传递值并允许用户导航菜单。显然 web 服务将被再次验证（希望现在都是硬编码的）以通过信息安全

问题

1.  有没有类似注销的东西？
2.  身份验证后，在用户按下主页进行其他导航（例如检查电子邮件或致电并执行其他操作）的情况下，是否有我可以触发和注销的事件？
3.  ios应用程序中是否有空闲会话超时之类的东西？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:35:16.030

[应用程序状态](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)指南可能会提供一些帮助。

`applicationDidBecomeActive:`并且`applicationWillResignActive:`可能会特别感兴趣。

# javascript - 如何制作基于组件的单页网页应用？

> ID：13312962
> 
> 赞同：0
> 
> 时间：2012-11-09T17:27:25.227
> 
> 标签：javascript, web, client-side

这可能是一个非常模糊的问题。

假设我有一个单页 Web 应用程序，用于`AJAX`与服务器中的 REST 服务进行通信。它由一个整体文件`HTML`和一个整体`CSS`文件组成，其中包括应用程序应在屏幕上显示的所有表单、对话框和其他 GUI 元素。

现在我想把它分解成组件（例如*登录表单*、*注册表单*、*错误对话框*等）。我猜每个组件都应该包含自己的`HTML`,`CSS`和`JavaScript`文件。此外应该有一些机制来加载所有这些组件并将它们放在一起以显示在页面中。

实现这一目标的推荐方法/模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:33:35.777

我建议您通过查看 Todo MVC 项目来开始研究构建单页 js 应用程序。

[https://github.com/addyosmani/todomvc](https://github.com/addyosmani/todomvc)

从上面的网址

> 为了帮助解决这个问题，我们创建了 TodoMVC - 该项目提供了在当今大多数流行的 JavaScript MV* 框架中使用 MV* 概念实现的相同 Todo 应用程序。

因此，这将展示如何使用不同的库构建同一个项目，您可以尝试一个或多个，看看哪个最适合您。

# ajax - ajax jquery 不工作

> ID：13312966
> 
> 赞同：0
> 
> 时间：2012-11-09T17:27:49.127
> 
> 标签：ajax, jquery

我编写了下面的代码来使用 jquery 进行 ajax 调用：

```
$.ajax({
    url: 'verify.php',
    type: 'POST',
    data: {
        'mobile': 'update'

    }
    success: function(response) {
        if (response == 'success') {
            $('#popupscreen').fadeOut('slow');
        }
        else {
            $("#error").html("<p>" + Registration failed! Please try again. + "</p>").show();
        }
    }
}); 
```

我收到错误**Uncaught SyntaxError: Unexpected identifier** in line **success : function(response){** 为什么我收到此错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T17:28:36.303

因为您在数据的右大括号后缺少逗号。

你的代码应该看起来更像这样：

```
$.ajax({
    url: 'verify.php',
    type: 'POST',
    data: {'mobile': 'update'},
    success: function(response) {
        if (response == 'success') {
            $('#popupscreen').fadeOut('slow');
        }
        else {
            $("#error").html("<p>" + 'Registration failed!Please try again.' + "</p>").show();
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T17:30:02.337

您缺少一个逗号：

```
type : 'POST',
data : { 
    'mobile' : 'update'

}, //<---- there should be a comma here
success : function(response){
     if(response == 'success')
     { 
```

还有一些引用：

```
$("#error").html("<p>Registration failed!Please try again.</p>").show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:30:36.453

您在“成功”之前缺少一个逗号：

```
 data : { 
        'mobile' : 'update'
    }, 
```

# c# - 如何在我的 XNA 游戏中进行精灵跳跃？

> ID：13312969
> 
> 赞同：0
> 
> 时间：2012-11-09T17:27:53.060
> 
> 标签：c#, xna, sprite

我是 XNA 的新手，在尝试让我的精灵跳跃时遇到了困难。到目前为止，精灵所能做的就是在 X 轴上左右移动。

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Texture2D sprite;
    Vector2 spritePosition;

    protected override void Update(GameTime gameTime)//
    {
        UpdateSprite(gameTime);
    }

    public Game1()//
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void LoadContent() //
    {
        spriteBatch = new SpriteBatch(GraphicsDevice);
        sprite = Content.Load<Texture2D>("Main");

    }

    void UpdateSprite(GameTime gameTime) //
    {
        //Sprite Movement and Controlls

        //Movement Perametres, not yet in use

                int MaxX =
                   graphics.GraphicsDevice.Viewport.Width - sprite.Width;
                int MinX = 0;

                int MaxY =
                    graphics.GraphicsDevice.Viewport.Height - sprite.Height;
                int MinY = 0;

                KeyboardState keystate = Keyboard.GetState();

                //Movement Right
                if (keystate.IsKeyDown(Keys.D))
                {
                    sprite = Content.Load<Texture2D>("1");
                }

                if (keystate.IsKeyDown(Keys.D))
                {
                    spritePosition.X = spritePosition.X + 1;

                }

                //Movement Left
                if (keystate.IsKeyDown(Keys.A))
                {
                    spritePosition.X = spritePosition.X - 1;
                }

                if (keystate.IsKeyDown(Keys.A))
                {
                    sprite = Content.Load<Texture2D>("a");
                }

               // Null Movement sprites
                 if (keystate.IsKeyUp(Keys.D)) 
                     if (keystate.IsKeyUp(Keys.A))
                 {
                    sprite = Content.Load<Texture2D>("Main");
                 }

        UpdateSprite(gameTime);
    }

    protected override void Draw(GameTime gameTime)//
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        spriteBatch.Begin(SpriteSortMode.BackToFront, BlendState.AlphaBlend);
        spriteBatch.Draw(sprite, spritePosition, Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
 } 
```

请不要太技术化，我自学了所有我知道的编程，所以很多术语都会在我脑海中浮现。我最了解看到它们在原始代码中实现的答案。非常感谢，马修。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:35:48.320

在您的`UpdateSprite()`中，您应该有一些东西可以检查您的跳转按钮。就像是：

```
if(keystate.IsKeyDown(Keys.Space))
{
     spritePosition.Y -= 1;
} 
```

然后您可以检查键是否被释放，然后将位置降低到原来的位置`spritePosition.Y`，或者一旦达到最大高度。但是您需要确保将您的电流保存`spritePosition.Y`到一个临时变量中，以便您可以回到原来的状态。

这绝不是你应该怎么做，但它应该是帮助你弄清楚它的一个好的开始。

# excel - VBA 溢出错误在中断模式下消失

> ID：13312974
> 
> 赞同：3
> 
> 时间：2012-11-09T17:28:10.250
> 
> 标签：excel, vba

我有一些代码如下：

```
redim a(1 to N)
for i = 1 to N
    a(i) = someFunction(i)
Next i 
```

运行它时，我得到`"Run-time error 6: Overflow"`. 它进入中断模式，循环内的行：`a(i) = someFunction(i)`突出显示。为了找到错误，我进入该函数并逐行遍历。没有错误，它工作正常并继续运行。只要我以这种方式执行代码，保持中断模式并一次进入`someFunction`一个调用，它就可以工作，但是一旦我回到正常执行，溢出错误就会回来。

有谁知道我怎样才能摆脱溢出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:35:33.050

您应该提供整个函数，以便我们可以看到您声明变量的方式。

该错误是由错误的变量声明引起的。您的一个或多个变量无法接受该值（例如：您将变量 i 声明为整数，因此它不能接受如下值：i=55000；整数的最大值在 32000 到 32800 左右）...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T21:28:31.677

感谢大家的帮助，我弄清楚了问题所在。这是`someFunction`导致溢出的原因，我不确定为什么它没有在中断模式下发生，但我修复了导致它的原因并且它现在正在工作。

# python - 实例'__dict__的关键字参数解包的陷阱是什么？

> ID：13312977
> 
> 赞同：1
> 
> 时间：2012-11-09T17:28:29.607
> 
> 标签：python, arguments, argument-unpacking

我试图方便地将一组参数传递给许多函数（比如 20 个）。

考虑以下 MWE（当然我并不真正考虑以这种方式进行添加）：

```
def function(a, b):
    return a + b

class summation:
    def __init__(self, a, b):
        self.a = a
        self.b = b

s = summation(1,2)

function(**s.__dict__) 
```

我尝试这样做的原因是我有一堆函数都接收 4 个相同的参数，我需要在管道中处理它们，从一个函数传递到另一个函数。

暗示`s`总是只有相关字段是传递参数的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T17:45:06.523

通常使用它是一个坏主意，`obj.__dict__`因为对象字典不包含对象上可能存在的任何描述符或其他“魔术”属性。它还将包括隐藏属性，按照惯例，隐藏在`_`前缀后面。因此，该`obj.__dict__`技术实际上仅适用于完全基本的类型，并且如果您决定将任何属性更新为属性以便您可以控制它们的 getter/setter 等，则无法证明未来`vars(obj)`存在同样的问题。

```
class Rectangle(object):
    x = 0
    y = 0
    _width = 0
    height = 0

    @property
    def width(self):
        return self._width

    @width.setter
    def width(self, value):
        if value < 0:
            value = -value
            self.x -= value
        self._width = value

>>> r = Rectangle()
>>> r.__dict__
{}
>>> # this is because everything is class-level properties so far
>>> r.width = 50
>>> r.__dict__
{'_width': 50} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T17:31:32.083

[Namedtuple](http://docs.python.org/2/library/collections.html#collections.namedtuple)直接为您执行此操作。

这是[来自 PyCon US 2011 的演讲](http://pyvideo.org/video/367/pycon-2011--fun-with-python--39-s-newer-tools) `[11:35 - 26:00]`

```
from collections import namedtuple
Add = namedtuple("Add", "a b c d")

one = Add(1, 2, 3, 4)

def addme(a, b, c, d):
    print a + b
    print c + d

>>> addme(*one)
... 3
... 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T03:54:46.740

```
for attribute, attribute_value in obj.__dict__.items():  # or obj.__dict__.iteritems() 
    print attribute, attribute_value 
```

# c# - 使用 EF 和 Code First 使用递归关联更新记录时出错

> ID：13312980
> 
> 赞同：0
> 
> 时间：2012-11-09T17:28:35.913
> 
> 标签：c#, entity-framework, ef-code-first, code-first, poco

我想更新一个记录类型图，它修改了内部也有的父对象和子对象。当子项的 EF UPDATE 注册表将它们设置为 NULL 时，通常会出现此问题，其中子项有助于识别您正在更新的记录。

我的域类是：

此类帮助我更改状态，添加 - 自定义 - 删除，这是从父级作为所有子级的图表。使它工作的功能。

```
public interface IObjectWthState
{
    State State { get; set; }
}
public enum State 
{
    Added,
    Unchanged,
    Modified,
    Deleted
} 
```

这是一个用户类：

```
 public abstract class User : IObjectWthState 
 {
    public int Id { get; set; }
    public String Name { get; set; }
    public String LastName { get; set; }        
    [Timestamp]
    public byte[] RowVersion { get; set; }
    [NotMapped]
    public State State { get; set; }
} 
```

这是从用户继承的两个类：

```
public class AdminUser:User
{
    public ICollection<BasicUser> UsersList { get; set; }
    public String Email { get; set; }
}

public class BasicUser: User
{
    public String Position { get; set; }
    public String Department { get; set; }
} 
```

正如所见 AdminUser BasicUser 有一个列表。

该模型是根据需要生成的，需要检测外键并添加。这是数据库的图片：

![通过迁移生成的模型](../Images/365add8e2ba2afb22b881bba29ca1a9b.png)

这是添加或更新信息的函数：

```
public virtual void AddUpdateGraph(T entity)
{

    if (((IObjectWthState)entity).State == State.Added)
    {
        DbEntityEntry dbEntityEntry = dbContext.Entry(entity);
        dbEntityEntry.State = EntityState.Added;
    }
    else
    {
        dbSet.Add(entity);
        dbContext.ApplyStateChanges();
    }
} 
```

处理 go 和调整内部节点状态的函数：

```
public static void ApplyStateChanges(this DbContext context)
{
    foreach (var entry in context.ChangeTracker.Entries<IObjectWthState>())
    {
        IObjectWthState stateInfo = entry.Entity;
        entry.State = StateHelpers.ConvertState(stateInfo.State);
    }
} 
```

将状态返回给 EF 的函数：

```
public static EntityState ConvertState(State state)
{
    switch (state)
    {
        case State.Added:
            return EntityState.Added;
        case State.Modified:
            return EntityState.Modified;
        case State.Deleted:
            return EntityState.Deleted;
        default:
            return EntityState.Unchanged;
    }
} 
```

当您想用他的列表 BasicUser 添加一个新的 AdminUser 时，一切正常，没有问题，当您想修改 EF BasicUser AdminUser 并为 BasicUser 生成更新但添加了外键为空的条件时，问题就来了。

在这里你可以看到生成的两个更新

管理员用户：

```
 exec sp_executesql N'update [dbo].[User]
set [Name] = @0, [LastName] = @1, [Email] = @2
where (([Id] = @3) and ([RowVersion] = @4))
select [RowVersion]
from [dbo].[User]
where @@ROWCOUNT > 0 and [Id] = @3',N'@0 nvarchar(max) ,@1 nvarchar(max) ,@2 nvarchar(max) ,@3 int,@4 binary(8)',@0=N'Beto',@1=N'Guerere',@2=N'beto@gmail.com',@3=3,@4=0x0000000000000801 
```

基本用户：

```
exec sp_executesql N'update [dbo].[User]
set [Name] = @0, [LastName] = @1, [Position] = @2, [Department] = @3, [AdminUser_Id] = @4
where ((([Id] = @5) and ([RowVersion] = @6)) and [AdminUser_Id] is null)
select [RowVersion]
from [dbo].[User]
where @@ROWCOUNT > 0 and [Id] = @5',N'@0 nvarchar(max) ,@1 nvarchar(max) ,@2 nvarchar(max) ,@3 nvarchar(max) ,@4 int,@5 int,@6 binary(8)',@0=N'Viomar',@1=N'Guerere',@2=N'Supervisora',@3=N'Ventas',@4=3,@5=4,@6=0x0000000000000802 
```

正如您在 EF 生成的 SQL 命令中看到的那样，添加了对 BasicUser 进行更新的记录条件具有 Null 值到 AdminUser_Id。我不明白这是为什么。该字段不能为空，因为该用户已分配给主管。

我希望我解释了。

非常感谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:38:45.837

回答我的问题：EF 相信数据库中的 FK 无论如何你都必须在模型中与她一起工作，作为这种形式的变量，如果你断开连接工作，你要确保你的信息被存储。

必须做的第一件事是在类 BasicUser 中添加一个 int 类型的变量，我们将称之为 AdminUser_Id：

```
public class BasicUser: User
    {       
        public String Position { get; set; }
        public String Department { get; set; }
        public int AdminUser_Id { get; set; }
    } 
```

然后我们必须告诉 EF 添加的变量是一个 FK，它引用了一个 AdminUser AdminUser 并且可以有多个 BasicUser。

为此，我们在声明上下文的地方，DataLayer（在我的例子中），并在创建模型的地方添加以下注释：

```
modelBuilder.Entity<AdminUser>()HasMany(A => A.UsersList ).WithRequired().HasForeignKey(B => B.AdminUser_Id );

We update the model and with these adjustments the mistake is eliminated completely at the moment of realizing the update of the record. 
```

有关 FK 和 EF 的更多信息推荐阅读这篇文章：

1.  [使用不存在的外键](http://msdn.microsoft.com/en-us/magazine/hh708747.aspx)
2.  [代码优先关系 Fluent API](http://msdn.microsoft.com/en-us/data/hh134698.aspx)

非常感谢大家，尤其是[Julie Lerman](https://stackoverflow.com/users/471760/julie-lerman)的帮助，如果没有它，我会花更多的钱来解决这个问题。

我希望我已经解释过了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:41:41.843

您是否正在检索已经分配了管理员用户的基本用户？在我看来，从您检索它到您进行更新时，adminuserid 没有被保留。我经常看到这种情况，例如在 MVC 应用程序中，您不想显示该外键，因此您不将其包含在视图中。但是当您更新对象并将其发送到控制器时，它会创建一个具有空 FK 的新用户实例。当您将该 FK 用作并发检查字段时，在从控制器移动到视图再到控制器时，保留该值是非常重要的。如果是这种情况，幸运的是我已经有一篇关于这个问题的博客文章，所以我不必在这里重新解释：[http://thedatafarm.com/blog/data-access/round-tripping-a-timestamp-field-with-ef4-1-code-first-and-mvc-3/](http://thedatafarm.com/blog/data-access/round-tripping-a-timestamp-field-with-ef4-1-code-first-and-mvc-3/)

让我知道是否确实如此。如果是这样，希望它能解决您的问题。如果没有，我可能会有更多问题！:)

（ps 你的代码的其余部分看起来很熟悉！:) 这来自我和罗文关于 DbContext 的书吗？:) )

# ant - Ivy：使用不在本地存储库中的 Jar 版本

> ID：13312983
> 
> 赞同：2
> 
> 时间：2012-11-09T17:28:55.257
> 
> 标签：ant, publish, ivy

这实际上是两个问题，但来自同一个问题：

*   我们使用 Jenkins 作为持续集成系统。每次有人提交更改时，Jenkins 都会构建它。
*   我们使用公司的 Maven 存储库（Artifactory），我们构建的所有其他项目所需的 jar 都存储在那里。
*   我使用 Jenkins 中的*Promotion Plugin*来*推广*Jenkins 构建。当我提升一个构建时，我使用`mvn deploy:deploy-file`命令将该构建中的 jar 及其关联的 POM 部署回我们的公司 Maven 存储库。
*   我们实际上将 Ivy 与 Ant 一起使用，但无论如何都要使用我们的 Maven 存储库。

一个问题出现了。开发人员正在开发 Project *B*，该项目使用由 Project *A*构建的 jar 。开发人员更改了 Project *A*，然后想在他们的 Project *B*中使用更改后的 jar 。

* * *

### 第一个问题

我认为我可以使用 将该`<ivy:publish>`jar 交付到该计算机的本地存储库中。然后，当该开发人员进行构建时，它将使用该版本的 jar，而不是我们公司存储库中的 jar。

但是，我已经设置了 Ivy，使得`ivysettings-public.xml`checkmodified*设置*为*true*。这意味着如果存储库有不同版本的 jar，即使它已经在本地存储库中，它也会下载它。这对开发人员将 jar 发布到本地存储库的能力有何影响？

当 Ivy 解析依赖时，它是否注意到本地机器上的依赖与公共存储库中的不同，所以它总是会下载公共 jar，还是 Ivy 使用时间戳？也就是说，Ivy 将看到本地 jar 上的时间戳比公司存储库中 jar 上的时间戳更新，因此不会下载公司存储库中的时间戳。

如果需要，我可以将*checkmodified*重置为*false*，但我必须让开发人员知道他们需要定期清理 Ivy 缓存以获取最新版本的 jar。

### 第二个问题

您如何处理可能影响其他项目的基础 jar 更改问题？

在我当前的模型中（我所做的假设），我期望将这些 jar 放入我们公司的 Maven 存储库中的某种工作流程。有人会创建一个问题，它会通过一个工作流，我会将该 jar 部署到我们的 Maven 存储库中。

但是，这可能过于严格。也许基础 jar 的部署（尤其是在进行大量开发工作时）应该稍微宽松一些。

*   我可以坚持这种工作流程模型。我是 CM，我的话就是法律。但是，我要进行设置，以便开发人员可以完成他们的工作，而不是遵循一堆无意义的程序。
*   我可以让项目负责人进行部署，而不是问我。通过这种方式，他们可以确定（并承担责任）他们推广的罐子的质量。
*   我可以进行设置，因此 Jenkins 会在某些条件下自动提升 jars（比如它们通过了所有单元测试）。我什至可以将它与手动部署结合起来：开发人员可以推广 jar，但只能推广通过单元测试的 jar。而且，我什至可以设置它，这样即使单元测试没有通过，项目负责人（或我自己）也可以推广一个 jar。

最后，我在我们公司设置了 Ivy，所以我可以完全控制`ivysettings.xml`所有项目（我们`svn:externals`习惯将 Ivy 引入所有项目）。

我可以做的一件事是设置第二个*快照*存储库。Jenkins 构建完成后，jar 可以自动部署到此*快照*存储库。我可以允许开发人员将 Ant 属性传递给构建（通过命令行或通过`build.properties`文件），这将允许开发人员在*发布*存储库之前使用来自*快照*存储库的 jar 。

 *Jenkins 可以设置为始终将新建的 jar 部署到此*快照*存储库，bur。我仍然会控制将 jars 部署到我们的*发布*存储库中。官方 (Jenkins) 构建将始终使用*发布*存储库，但如果需要，开发人员可以使用*快照版本。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:38:43.223

我们在 Maven 上取得了另一个领先地位，并在每次构建时都创建了*快照版本。*我为通过任务构建的每个 jar创建了 a`pom-snapshot.xml`和 a 。`pom.xml``<ivy:makepom/>`

我有两个促销：一个提升快照版本，另一个提升发布版本（实际上是同一个 jar）。快照升级在每次成功构建后运行。发布促销是手动进行的。这样，我们可以将 jar 推广到我们的发布存储库中，但仍然允许开发人员使用最新的 jar。*

# ruby-on-rails - 迁移到 bitbucket.org 后 Capistrano 部署失败

> ID：13312985
> 
> 赞同：0
> 
> 时间：2012-11-09T17:29:00.213
> 
> 标签：ruby-on-rails, capistrano, bitbucket

它适用于导轨应用。曾经在 github 上，正在转移到 bitbucket.org。之前做过以下事情`cap deploy`：

```
cap deploy:cleanup -s keep_releases=0 
```

完全删除 /shared/cached-copy/。以下错误来自`cap deploy`：

```
failed: "sh -c 'if [ -d /var/www/byop/shared/cached-copy ]; then cd /var/www/byop/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 6da8873d384fa53b19b20646593342109d3b58d6 && git
 clean -q -d -x -f; else git clone -q git@bitbucket.org:username/byop.git /var/www/byop/shared/cached-copy && cd /var/www/byop/shared/cached-copy && git checkout -q -b deploy 6da8873d384fa53b19b20646593342109d3b58d6; fi'"
on x.x.x.x 
```

还在 bitbucket.org 上尝试了公共或私人回购，错误是一样的。什么可能导致问题？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:53:39.073

由于没有显示真正的错误，我只能猜测。

您必须在 bitbucket 中为服务器上的用户设置部署密钥。如果没有设置，git 命令将不起作用。

我也使用 capistrano 部署到使用 bitbucket 的虚拟服务器，它工作正常。如果有更多提示，也许检查输出后面的行。

# entity-framework-5 - 如何在新实体上初始化 ICollections，以便将项目自动添加到更改跟踪器

> ID：13312986
> 
> 赞同：0
> 
> 时间：2012-11-09T17:29:03.633
> 
> 标签：entity-framework-5, dbcontext

我相信，如果您使用 linq 或 .Find 命令加载数据库对象，那么调用中也包含的子集合将自动将项目添加到 changetracker 并保存它们：

```
entity.Children.Add(entityChild); 
```

这会将它添加到附加实体的更改跟踪器中就好了。

但是，如果您正在创建一个新实体，并且在构造函数上将 ICollection 设置为新的 HashSet()，则在执行 Children.Add(entityChild) 行时它不会添加到更改跟踪器中。

您如何为新对象初始化 ICollections，以便在添加到子对象时将其添加到更改跟踪器？

而且我认为如果您添加了父级（即创建父级，添加子级然后将父级添加到 DbSet 也应该将子级添加到更改跟踪器中，那么它也应该将所有新的子级添加到更改跟踪器中吗？ )

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:00:10.767

如果要创建启用更改跟踪的实体类型的新实例，则需要使用 DbSet 上的[Create 方法](http://msdn.microsoft.com/en-us/library/gg696539.aspx)。

[您还可以通过调用DetectChanges 方法](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbchangetracker.detectchanges.aspx)手动启动更改`DbContext.ChangeTracker`检测。

最后，如果您想在 POCO 类中添加大量代码，您可以查看[自跟踪实体模板](http://visualstudiogallery.msdn.microsoft.com/a3ac10a5-9365-4096-bb58-d9a1ba71db8f)生成的代码。这实际上与 EF 用于查询数据库时返回的对象的代码相同。

# javascript - Javascript运行密集可视化操作不冻结浏览器

> ID：13312988
> 
> 赞同：1
> 
> 时间：2012-11-09T17:29:06.490
> 
> 标签：javascript, d3.js

从之前在类似行上提出的问题中，我可以推断出由于 Javascript 是单线程的，因此可能会考虑 setTimeout 之类的方法，但是我似乎没有得到任何进步的结果。我的任务涉及 DOM 操作，所以我不能依赖关于 HTML5 Web Workers

这里的问题是关于为像重采样这样的统计操作绘制大数据集。为此，我们使用 d3 库，一般来说，它接收整个数据集并计算图的各种参数，如箱数、比例等。绕过冗长循环的一种方法是将数据集分解成更小的块，但仍然必须一次传递整个数据集以计算作为瓶颈的参数。

我所指的一个很好的例子是用于生成 github 存储库的图形（例如，[https](https://github.com/mbostock/d3/graphs/contributors) ://github.com/mbostock/d3/graphs/contributors ）。我们可以看到绘图操作不会干扰尽管是一项繁重的任务，但使用浏览器。关于如何在类似的线路上工作的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T19:33:09.090

(I'm not sure that the graphs you linked to qualify as an intensive task, but regardless)

I've gotten good results by breaking up the tasks using timeouts. Say you're doing something like this:

```
var largeSelection = d3.selectAll('svg circle')
  .data(aReallyLargeDataset);// Expensive Bind Operation

largeSelection.enter()
  .append('circle')// Lots of appending
  .attr('r', function() { /* expensive calculations */ return ... });

largeSelection// Many refreshes
  .attr('cx', function() { /* more expensive calculations */ return ... }); 
```

That might take the browser 1 second to render (a long time, considering everything will be frozen during this task). You can make it better by breaking it up like so:

```
setTimeout(function() {
  var largeSelection = d3.selectAll('svg circle')
    .data(aReallyLargeDataset);// Expensive Bind Operation

  setTimeout(function() {
    largeSelection.enter()
      .append('circle')// Lots of appending
      .attr('r', function() { /* expensive calculations */ return ... });

    setTimeout(function() {
      largeSelection// Many refreshes
        .attr('cx', function() { /* more expensive calculations */ return ... });
    }, 100);

  }, 100);

}, 100); 
```

Sorry about the obnoxious nesting and timeouts. You could refactor/abstract it in a way that's more readable/scalable. In any case, breaking up the tasks this way gives the browser a chance to "breath" and update the DOM so that, from the user's perspective, the application doesn't seem "stuck".

If that *still* feels sluggish, you can break things up even more:

```
var entering = largeSelection.enter()
  .append('circle');// Lots of appending

  setTimeout(function() {
    entering.attr('r', function() { /* expensive calculations */ return ... });
  }, 100); 
```

# c++ - boost::tokenizer_iterator 的问题——如何查看下一个迭代器？

> ID：13312991
> 
> 赞同：0
> 
> 时间：2012-11-09T17:29:09.173
> 
> 标签：c++, boost, iterator

代码是这样的

```
 void buildIt(Object& o, Tokenizer::const_iterator begin, Tokenizer::const_iterator end){
   if(begin == end) return;
   else{
    string parent = *begin;
    bool hasChild = (begin+1) != end; //error: class booost::token_iterator<...> has no member named 'advance'
   }
 } 
```

如何在不移动的情况下检查下一个迭代器是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:09:00.597

```
for (Tokenizer::const_iterator i = begin; i!= end; ++i) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T19:20:26.870

您总是可以只复制迭代器并增加副本。或使用`boost::next`.

```
if(boost::next(iter) == end)
  cout << "..."; 
```

# java - 如何在多态工厂模式中避免大量样板文件

> ID：13312995
> 
> 赞同：3
> 
> 时间：2012-11-09T17:29:49.373
> 
> 标签：java, design-patterns

我有一个抽象`Command`类。`Command`从某个类创建的每个类都`Fetcher`需要被赋予某些属性。通常这看起来像一个工厂模式 -`Fetcher`创建一个`CommandFactory`将`Command`在创建它时准备的。但是，大约有十几个派生类，如果每个具体类没有不同的具体工厂，或者每次创建新类`createConcrete1Command`时都必须扩展不同的方法，我不知道如何做到这一点。`Command`有什么策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:05:59.107

我发现这种情况的解决方案如下：

构造函数：

```
public BaseClass(Parameters p); // can be expanded and endowed as necessary; essentially anything a constructor can do can happen here. 
```

当然，所有派生类都将 a`Parameters`作为参数，但是`Parameters`可以根据需要进行扩展，而无需触及任何派生类的构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T01:42:56.120

您可以尝试使用`Class.forName(String)`and`Class.newInstance`以编程方式创建新实例。虽然一般来说，我发现由于缺少元类，工厂模式总是适用于 Java 中的样板代码。

所以类似于（模块异常处理并假设每个 Foo 类都有一个 FooCommand 类）

```
 public class AbstractFoo {

     public ICommand createCommand() {
         return Class.forName(this.getClass()+"Command").newInstance();
     }

 } 
```

并调用创建`createCommand()`.`Fetcher extends AbstractFoo``FetcherCommand`

那是你要找的吗？

# c - 在 c 中使用带有结构的 malloc

> ID：13312996
> 
> 赞同：4
> 
> 时间：2012-11-09T17:29:51.527
> 
> 标签：c, struct, malloc

因此，我正在尝试将 malloc 添加到我创建的电话簿应用程序中，但是由于我对 C 有点陌生，我不确定我所做的是否正确。我遇到了一个小问题，但我已经阅读了我拥有的初学者书籍，它并没有像我想要的那样详细，我无法通过搜索谷歌来判断我是否只是我设置 malloc 的方式完全错误，或者我错过了其他东西。

基本上我的结构中有 4 个数组，`First_Name`, `Last_name`, `home`, `cell`. 其中每一个都有 2 个功能，一个从用户那里获取信息的功能，一个打印用户信息并将其添加到电话簿的功能。我现在得到的是原始代码的一小部分，它只将名字添加到电话簿（所以它不是整个代码），并且在每个获取用户输入的函数中，我想添加 malloc 函数。现在我只设置了名字和第一个malloc，但我遇到的问题是当我去检查电话簿看名字是否输入成功时，程序退出了。如果我取出 malloc，它会成功运行。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <conio.h>

#define BUFFER 50
    //Structure for contacts
typedef struct friends_contact {

    char *First_Name;
    char *Last_Name;
    char *home;
    char *cell;
} fr;

void menu(fr * friends, int *counter, int user_entry, int i);
void setFirst(fr *, int *, int i);
char getFirst(fr *, int i);
void add_contact(fr * friends, int *counter, int i);
void print_contact(fr * friends, int *counter, int i);

int main()
{

    int user_entry = 0;
    fr *friends;
    int counter = 0;
    int i = 0;
    menu(friends, &counter, user_entry, i);
    getch();
    return 0;
}

//Menu function
void menu(fr * friends, int *counter, int user_entry, int i)
{
    do {
        int result;

        printf("\nPhone Book Application\n");
        printf
            ("1) Add friend\n2) Delete friend\n3) Show a friend\n4)Showphonebook\n5)Exit\n");
        scanf("%d", &user_entry);

        if (user_entry == 1) {
            add_contact(friends, counter, i);
        }
        if (user_entry == 2) {

        }
        if (user_entry == 3) {

        }
        if (user_entry == 4) {
            print_contact(friends, counter, i);
        }
    } while (user_entry != 5);
}

void setFirst(fr * friends, int *counter, int i)
{
    // THE MALLOC FUNCTION!
    friends = (fr *) malloc(BUFFER * sizeof(fr));
    printf("Enter a first name \n");
    scanf("%s", friends[*counter].First_Name);
    if (friends != NULL) {

        free(friends);
    }
}

char getFirst(fr * friends, int pos)
{
    printf("%s ", friends[pos].First_Name);
    return *friends[pos].First_Name;
}

void add_contact(fr * friends, int *counter, int i)
{
    setFirst(friends, counter, i);
    (*counter)++;
}

void print_contact(fr * friends, int *counter, int i)
{
    for (i = 0; i < *counter; i++)
        if (strlen(friends[i].First_Name)) {
            getFirst(friends, i);
        }
} 
```

希望给可以在这里帮助我的人打一个大大的绿色复选标记。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T17:52:40.640

您需要为整个记录分配内存，并为每个字段单独分配内存。例如：

```
void string_realloc_and_copy (char **dest, const char *src)
{
  size_t len = strlen (src);
  *dest = realloc (*dest, len + 1);
  memcpy (*dest, src, len + 1);
}

typedef struct
{
  char *name;
  char *title;
} record;

record * record_new ()
{
  record *r = malloc (sizeof (record));
  r->name = NULL;
  r->title = NULL;
  return r;
}

void record_free (record *r)
{
  free (r->name);
  free (r->title);
  free (r);
}

void record_set_name (record *r, const char *name)
{
  string_realloc_and_copy (&r->name, name);
}

void record_set_title (record *r, const char *title)
{
  string_realloc_and_copy (&r->title, title);
} 
```

现在创建一条记录并用从用户读取的值填充它：

```
record *r;
char buffer[100 + 1];

r = record_new ();

printf("Enter a first name \n");
if (scanf ("%100s", buffer) == 1) {
  record_set_name (r, buffer);
}

... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T17:50:09.210

这里遇到了一些问题：

```
void setFirst(fr*friends, int* counter, int i) {
   // THE MALLOC FUNCTION!
   friends=(fr*) malloc(BUFFER*sizeof(fr));  <-- This is not doing what you're thinking 
```

`sizeof(fr)`将是 4 个字符指针所需的大小。例如，如果您在 32 位 x86 平台上，则指向 a 的指针需要 4 个字节`char`，因此：

```
sizeof(fr) == 4 x 4 == 16 bytes 
```

所以现在你正在 malloc'ing 16*BUFFER 或 16x50 = 800 字节。这允许您拥有一个包含 50 个“fr”结构的数组。

```
fr * friend
        |
        +--------> FirstName*
            |      LastName*
            |      home*
            |      cell*
            +----> FirstName*
            |       LastName*
            |      home*
            |      cell*
            ... 
```

所以你有 50 个结构的内存，但是这些结构的内容仍然没有内存。您需要为结构的每个成员分配内存（并且不要忘记释放所有这些成员），或者您可以使用数组而不是指针使它们成为静态成员。

第二个问题：

```
if(friends != NULL)  <-- if malloc was successful
{
     free(friends);  <-- release the memory 
```

你刚刚失去了所有的朋友。:)
您确实需要释放内存，但在程序结束时或在您使用它的位置结束时。如果您分配然后立即释放，那么内存就消失了，您将无法再访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T17:38:20.003

您的结构仅包含指针，而不是分配的内存。您最好将其定义为保存您写入名称等的数组：

```
typedef struct friends_contact{

    char First_Name[20];
    char Last_Name[20];
    char home[20];
    char cell[20];
} fr; 
```

在这里，我将每个字段设置为 20 个字符长，但您可以更改以适合。

* * *

编辑：是的，当然你可以使用动态内存，但值得费心吗？动态字符串的优点是它们的大小可以完全正确；您可能会节省几个字节，并保证能够将名称放入字段中。但是是否有许多名称超过 20 个字符，是否必须缩写一些？使用 malloc，当然有很多繁琐的分配（每个都可能失败）和释放。

作为一种折衷方案，可以使电话号码固定大小（它们不会改变）并且名称是动态的；`strdup`然后使用（也可能失败）分配名称。

```
typedef struct friends_contact{

    char *First_Name;
    char *Last_Name;
    char home[12];
    char cell[12];
} fr; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T17:50:25.243

这里还有几件事需要考虑，但首先考虑以下内容。

在`setFirst`中，您正在`free`输入`friends`缓冲区，本质上是在说“我不再需要这个”。当你这样做时，那个记忆就会消失。如果您要为调用者动态分配结构，您要么必须提供单独的释放函数，要么让您的用户知道清理该结构是他们的责任。

此外，您只需要更改朋友指针的本地副本。如果要将调用者的指针指向新缓冲区，则需要将参数类型更改为`fr**`.