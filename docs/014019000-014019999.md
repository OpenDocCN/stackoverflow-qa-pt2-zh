# StackOverflow 问答 14019000-14019999

# android - 如何去除侧面二维码上的空白（使用zxing）

> ID：14019012
> 
> 赞同：4
> 
> 时间：2012-12-24T08:34:13.120
> 
> 标签：android, qr-code, zxing

我使用**zxing**库来生成二维码。当我生成 QR 时它工作正常，但它在 QR 的左右两侧有一个空白区域。如何删除此空白（使位图宽度=高度）

这是我生成 QR 的代码

```
 private static final int QR_SIZE = 480;

  public static Bitmap generateQR(String content){
      Bitmap returnBitmap= null;
      try {
        Hashtable<EncodeHintType, ErrorCorrectionLevel> hintMap = new Hashtable<EncodeHintType, ErrorCorrectionLevel>();
        hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);
        QRCodeWriter qrCodeWriter = new QRCodeWriter();
        BitMatrix matrix = qrCodeWriter.encode(content, BarcodeFormat.QR_CODE, QR_SIZE, QR_SIZE, hintMap);
        //int width = matrix.getWidth();
        int width = matrix.getHeight();
        int height = matrix.getHeight();
        int[] pixels = new int[width*height];
        for(int y=0; y<height; y++) {
            for(int x=0; x<width; x++) {
                int grey = matrix.get(x, y) ? 0x00 : 0xff;
                pixels[y*width+x] = 0xff000000 | (0x00010101*grey);
            }
        }    
        returnBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        returnBitmap.setPixels(pixels, 0, width, 0, 0, width, height);
        //returnBitmap.set
    } catch (Exception e) {
        Log.d(LOGTAG, e.toString());
    }
    return returnBitmap;
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-04-28T05:00:34.047

答案为时已晚，但可以在将来使用。

可以使用以下代码示例删除空格

```
Map<EncodeHintType, Object> hintMap = new HashMap<EncodeHintType, Object>();
hintMap.put(EncodeHintType.MARGIN, new Integer(1));
BitMatrix matrix = new MultiFormatWriter().encode(
        new String(qrCodeData.getBytes(charset), charset),
        BarcodeFormat.QR_CODE, qrCodewidth, qrCodeheight, hintMap); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T11:52:09.450

不要删除空格，这是规范要求的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-08T09:09:00.087

为了完整起见，这是一个用 Kotlin 编写的解决方案（它基于上述答案）：

```
fun generateQrImage(width: Int): Bitmap? {
    val code = "some code here" // Whatever you need to encode in the QR code
    val multiFormatWriter = MultiFormatWriter();
    try {
        val hintMap = mapOf(EncodeHintType.MARGIN to 0)
        val bitMatrix = multiFormatWriter.encode(code, BarcodeFormat.QR_CODE, width, width, hintMap)
        val barcodeEncoder = BarcodeEncoder();
        return barcodeEncoder.createBitmap(bitMatrix);
    } catch (e: Exception) {
        Log.error("Could not generate QR image", e)
        return null
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-23T06:01:36.917

我可能为时已晚，尽管我的建议可能会帮助将来谁会遇到这个问题。

是的，你不删除空白，有些读者会用一点边框扫描它，这会更难。有些根本不会阅读。

在我的情况下，我想在 Ui 中显示 QR 码，所以我只是将我的布局设置为白色背景。以及它的阅读二维码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-30T10:35:06.993

任何有兴趣的人都可以使用下面的代码。应用此代码后，我尝试扫描二维码，它被扫描没有任何问题。

```
 try {

        /**
         * Allow the zxing engine use the default argument for the margin variable
         */
        int MARGIN_AUTOMATIC = -1;

        /**
         * Set no margin to be added to the QR code by the zxing engine
         */
        int MARGIN_NONE = 0;
        int marginSize = MARGIN_NONE;

        Map<EncodeHintType, Object> hints = null;
        if (marginSize != MARGIN_AUTOMATIC) {
            hints = new EnumMap<>(EncodeHintType.class);
            // We want to generate with a custom margin size
            hints.put(EncodeHintType.MARGIN, marginSize);
        }

        MultiFormatWriter writer = new MultiFormatWriter();
        BitMatrix result = writer.encode(text, BarcodeFormat.QR_CODE, imageWidth, imageHeight, hints);

        final int width = result.getWidth();
        final int height = result.getHeight();
        int[] pixels = new int[width * height];
        for (int y = 0; y < height; y++) {
            int offset = y * width;
            for (int x = 0; x < width; x++) {
                pixels[offset + x] = result.get(x, y) ? barcodeColor : barcodeBackgroundColor;
            }
        }

        Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
        bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
        return bitmap;

    } catch (WriterException e) {
        e.printStackTrace();
    } 
```

来源[此页面](https://androidbycode.wordpress.com/tag/zxing/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-07T18:32:46.790

尝试这个......：）

```
private void generateQRCode(String data) throws IOException {
            com.google.zxing.Writer writer = new QRCodeWriter();
            String finaldata = Uri.encode(data, "UTF-8");
            try {
                BitMatrix bm = writer.encode(finaldata, BarcodeFormat.QR_CODE, 400,
                        400);
                mBitmap = Bitmap.createBitmap(400, 400, Config.ARGB_8888);
                for (int i = 0; i < 400; i++) {
                    for (int j = 0; j < 400; j++) {
                        mBitmap.setPixel(i, j, bm.get(i, j) ? Color.BLACK
                                : Color.WHITE);
                    }
                }
            } catch (WriterException e) {
                e.printStackTrace();
            }

            if (mBitmap != null) {
                                  img_qrcode.setImageBitmap(mBitmap);
                                }
} 
```

# javascript - 如何在 Handlebars 中使用值作为另一个查找的键

> ID：14019013
> 
> 赞同：2
> 
> 时间：2012-12-24T08:34:13.810
> 
> 标签：javascript, templates, handlebars.js

我有一个看起来像这样的 JSON：

```
var x = {
    default_image: 1,
    urls: {
        1: { catalog: "yyy.jpg" },
        2: { catalog: "zzz.jpg" }
    }

} 
```

在我的 Handlebars 模板中，我想根据 key 的值呈现 url `default_image`。

在上面的例子中，我想渲染值`x.urls[x.default_image].catalog`

假设我有一个看起来像这样的模板：

```
<img src="{{what_goes_here}}" /> 
```

里面有什么？（或者我应该为此使用某种辅助函数吗？）

# django - Django-allauth 没有配置 Facebook 应用程序：请使用 Django 管理员添加一个 SocialApp

> ID：14019017
> 
> 赞同：10
> 
> 时间：2012-12-24T08:34:42.183
> 
> 标签：django, facebook, django-allauth

我正在尝试在我的项目中设置**Django-allauth**。我遇到了这个错误，无法修复它。

**环境：**

```
Request Method: GET Request URL: `http://localhost:8000/accounts/login/`

Django Version: 1.4.2 Python Version: 2.7.3 
Installed Applications:
('django.contrib.auth',  
'django.contrib.contenttypes', 
'django.contrib.sessions',  
'django.contrib.sites', 
'django.contrib.messages',  
'django.contrib.staticfiles',  
'core', 
'allauth',  
'allauth.account',  
'allauth.socialaccount', 
'allauth.socialaccount.providers.facebook', 
'allauth.socialaccount.providers.twitter',  
'django.contrib.admin', 
'django.contrib.admindocs') 
```

**已安装的中间件：**

```
('django.middleware.common.CommonMiddleware', 
'django.contrib.sessions.middleware.SessionMiddleware', 
'django.middleware.csrf.CsrfViewMiddleware', 
'django.contrib.auth.middleware.AuthenticationMiddleware', 
'django.contrib.messages.middleware.MessageMiddleware')

Template error: In template
/media/Dump/Sites/wtr/allauth/templates/socialaccount/snippets/login_extra.html,
error at line 3    No Facebook app configured: please add a SocialApp
using the Django admin    

       1 : {% load socialaccount %}
       2 : 
       3 :  {% providers_media_js %} 
       4 : 
       5 : 
```

我实际上在 Django Admin 中配置了一个 facebook 应用程序，但不明白为什么它会给出这个异常。

```
 Exception Type: ImproperlyConfigured at /accounts/login/ Exception
 Value: No Facebook app configured: please add a SocialApp using the
 Django admin 
```

*   我将 allauth 应用程序添加到`INSTALLED_APPLICATIONS`
*   添加了该`TEMPLATE_CONTEXT_PROCESSORS`设置
*   修改设置，`AUTHENTICATION_BACKENDS`
*   在中添加`allauth`网址`urls.py`

这是所有需要做的事情还是还有更多？如果是的话，你能指点我相关的文档吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-24T08:42:26.313

问题可能出在您的数据库上。认为您需要同步数据库。

# 做

```
python manage.py syncdb 
```

如果这不起作用，如果您使用 localhost 或使用 127.0.0.1:8000 ，请确保`Site`您添加 facebook 应用程序的域具有域`localhost:8000``127.0.0.1:8000`

有关更多信息，请参阅此[allauth 教程](http://techstricks.com/django-allauth-tutorial-step-by-step/)。

# 更新

您还可以尝试`example.com`从管理员中删除该站点并添加一个使用的新站点，`localhost:8000`或者`127.0.0.1:8000`在新站点下添加 facebook 社交应用程序。另外，不要忘记`SITE_ID`在文件中设置变量`settings.py`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-30T14:11:03.757

我在这里遇到了同样的问题，问题是 SITE_ID，默认情况下为 1。但是，当您看到管理面板时，默认情况下会将 1 分配给示例站点。在创建用于配置 Facebook 登录的站点后，我替换了 settings.py 中的 SITE_ID=2 并且它起作用了。另一种选择是删除示例站点，但如果您在某个时候删除数据库并重新创建它，它将再次出现。

这花了我大约 3 个小时，直到我意识到......：S

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-18T07:44:12.877

我遇到了同样的问题，我认为一些解释会对其他人有所帮助：django-allauth 使用 django-sites，这会使它变得非常混乱。

在配置社交应用程序时，很容易意外添加网站。

为了使事情正常进行，您需要确保设置中的 SITE_ID 与您在 facebook 应用程序中启用并在 django 后端的社交应用程序中选择的域相匹配。如果在这三个位置中的任何一个位置指定的站点有误，您将收到“配置不当...”错误。

如果像我一样，您从一开始就搞砸了，请执行以下操作以使 facebook 身份验证正常工作：

1.  转到您的 Facebook 应用程序并记录“站点 URL” - 这是您的 facebook 应用程序将验证的唯一站点。为了测试我使用' `http://localhost:8000`'。将此**称为 mysite**。
2.  在 django admin 中转到您的 facebook 社交应用程序，并确保您已将**mysite**作为“选择的站点”中的唯一站点。如果它不在列表中，请使用 admin/sites 添加它。
3.  转到管理员/站点并删除任何不应该存在的内容。
4.  使用 phpmyadmin 或类似的工具查看您的 django_site 表并记录**mysite**的 site_id 。
5.  更新您的设置，以便将 SITE_ID 设置为**mysite** id。

运行您的服务器和 facebook 身份验证应该可以工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-06T21:51:46.847

我遇到了同样的问题，感谢大家提供有用的建议。这是我的解决方案：（我做了`chmod +x manage.py`）

```
1) ./manage.py syncdb
2*) ./manage.py schemamigration --initial socialaccount
(register new app on fb and add new Social app through admin)
3) ./manage.py shell
> from django.contrib.sites.models import Site
> site = Site.objects.create(domain='foo.com', name='foo.com')
> site.id
> ^C [y]
4) settings.py > add SITE_ID = 'your site.id'
5) test localhost:8000/accounts/login/ 
```

*schemamigration 与已安装的 South (!)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-23T21:40:21.143

虽然看起来很明显，但首先登录 facebook 开发者页面并创建一个新应用程序。

[![脸书开发者](../Images/a3ede20a2f21500db9dfced1a32c69f2.png)](https://i.stack.imgur.com/CWunr.png)

接下来转到 djagno[管理站点](http://127.0.0.1:8000/admin/socialaccount/socialapp/)并单击社交应用程序的添加按钮。

[![django 管理站点](../Images/abd14eb6de625fd9ee283b96eac2944a.png)](https://i.stack.imgur.com/HD8DK.png)

正如其他人提到的那样保存并设置 SITE_ID，所以这解决了我的“没有配置 Facebook 应用程序”的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-11T22:46:45.737

对我有用的是，在*Available Sites*下，选择（在本例中为*example.com*，即默认 SITE_ID 名称）并添加到正确的*Chosen Sites*，然后在创建社交应用程序时保存

![将示例站点添加到右窗格](../Images/89d2d8778a3e5d3906e687682b417deb.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-09T03:42:46.143

settings.py 中的`site_id`必须与您站点的 django 管理员条目匹配（在测试期间它可能是 localhost:8000）。它位于“站点”标题下的“站点”选项中（同样，在管理员中）。要获得您的`site_id`...点击“网站”。注意：仅仅因为您有 2 个条目并且第 2 个是您的，并不意味着`site_id = 2`. 单击您的条目，然后在地址栏中记下该数字。这在上面和其他地方都有介绍，但是对于编码新手，我需要更明确的说明。 [看到图片中的3了吗？好吧，这是我在“网站”中的 2 个条目中的第 2 个](http://i.stack.imgur.com/9LkKR.png)

# ms-access - 在 Access DAO SQL INSERT 中保留尾随空格

> ID：14019018
> 
> 赞同：2
> 
> 时间：2012-12-24T08:34:43.133
> 
> 标签：ms-access, vb6, dao

我正在使用 DAO 将数据插入 Access 数据库。当我连接字段时，会删除尾随空格。如何插入数据保留尾随空格？

例如，以下代码在创建列“mytext”时去除字段 ref 和 name 的尾随空格：

```
INSERT INTO mytest (ref, mytext) SELECT ref, ref + name + '/' FROM mytable 
```

mytable 是我已链接的 FoxPro 2.5 表。我假设 FoxPro 表中的列包含尾随空格，因为我在 FoxPro 中的数据不占用字段的整个宽度，并且在 FoxPro 中，当我运行包含连接运算符的 REPLACE 时，会出现尾随空格：

```
REPLACE ALL mytext WITH ref + name 
```

列 "ref" 和 "name" 是长度为 10 的字符字段。如果 ref = "S1" 和 name = "fred" - FoxPro 中运行的命令将 mytext 设置为 "S1" 然后 8 个空格然后 "fred" 然后 4 个假定空格- 在 VB6 中运行的 DAO 命令将 mytext 设置为“S1fred”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:00:27.740

假设 [name] 是 10...

也许明确地添加空格会起作用

```
INSERT INTO mytest (ref, mytext) 
SELECT ref + space(10-len(ref)), 
       ref + [name] + space(20 - (len(ref)+len([name]) ) )+'/' 
FROM mytable 
```

如果 ref 和/或 name 的列大小发生变化，您必须维护此查询。为了安全起见，请使用 left(ref + space(10), 10)。如果您的列大小更改，至少它不会中断

# visual-studio-2010 - 在局域网上为多个用户处理 SQL Server CE 3.5 文件

> ID：14019019
> 
> 赞同：0
> 
> 时间：2012-12-24T08:34:51.340
> 
> 标签：visual-studio-2010, linq, sql-server-ce-3.5

我正在使用 C#（vs2010 环境）开发一个项目，该项目需要一个 SQL Server CE 3.5 数据库来执行多个功能。为一个用户在本地工作`.sdf`没有问题，但是当我`.sdf`通过网络运行我的项目时，它给了我`sql.ce`错误。

发生此问题是因为在局域网上使用它还是因为与多个用户一起使用它？

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:50:08.170

要使用多个用户，您必须尝试 SQL Server Express 版本（免费）或 Mysql，您可以看到[该](https://stackoverflow.com/questions/10212217/how-do-i-share-a-sql-server-ce-database-file-sdf-for-multiple-processes)帖子会有所帮助

# android - 从 sdcard 浏览和打开 pdf 文件？

> ID：14019026
> 
> 赞同：2
> 
> 时间：2012-12-24T08:35:51.170
> 
> 标签：android, pdf

我想浏览 sdcard 中的 pdf 文件，然后想在 pdfviewer 中打开它。无论我尝试打开 sdcard 但没有在 pdfviewer 中打开它。

我怎样才能做到这一点？

```
public void onClick(View v) {

    Intent intent = new Intent();
    intent.setType("application/pdf");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Select Pdf"), REQUEST_PICK_FILE );

}
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent result) {
         if (resultCode == RESULT_OK) {
                switch (requestCode) {
                case REQUEST_PICK_FILE:
                {
                    Uri data = result.getData();

                    if(data.getLastPathSegment().endsWith("pdf")){
                        startActivity(new Intent(this, PDFReaderAct.class)); 
                    } else {
                        Toast.makeText(this, "Invalid file type", Toast.LENGTH_SHORT).show();   
                    }  }             
                }
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:37:49.670

尝试这个 ：

```
File targetFile = new File(Environment.getExternalStorageDirectory(), "/Android/data/...../yourpdf.pdf");
Uri targetUri = Uri.fromFile(targetFile);
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(targetUri, "application/pdf");
this.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:37:22.637

试试这个代码：

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/example.pdf");
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(file),”application/pdf”);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-03T19:09:13.827

这对我有用。如果您需要，您可以取消注释以下几行。

```
 public void browsePdf(View v) {

    Intent intent = new Intent();
        intent.setType("application/pdf");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent, "Select PDF"), 1);

   }

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent result) {
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
            case 1:
            {
                Uri data = result.getData();

             //   if(data.getLastPathSegment().endsWith("pdf")){
                    Intent intent_pdf=new Intent(this, PdfViewer.class);
                    intent_pdf.setData(data);
                    startActivity(intent_pdf);

              //  } else {
                //    Toast.makeText(this, "Invalid file type", Toast.LENGTH_SHORT).show();
              //  }
              }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T13:50:58.943

试试这个代码。

```
Intent intent = new Intent("com.sec.android.app.myfiles.PICK_DATA");
intent.putExtra("CONTENT_TYPE", "*/*");
intent.addCategory(Intent.CATEGORY_DEFAULT);
startActivityForResult(intent,1); 
```

# excel - 当单元格格式为其他时，未定义错误“xlValues”

> ID：14019028
> 
> 赞同：2
> 
> 时间：2012-12-24T08:36:11.500
> 
> 标签：excel, vbscript, vba

我正在尝试使用 VBScript 将此处“A1”的单元格格式复制到第一行的所有单元格，但`xlValues`未定义错误。

**代码**

```
 ob3.Range("A1").Copy
  ob3.Range("A1").EntireRow.PasteSpecial(xlValues) 'error here for that constants 
```

你能帮我吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:12:18.770

由于 VBScript 不知道 Excel 的常量，您必须自己定义它们：

```
Const xlValues = 123 ' <-- replace 123 with the correct value for your version of Excel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:02:46.127

尝试：

```
ob3.Range("A1").Copy
ob3.Range("A1").EntireRow.PasteSpecial xlPasteFormats 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T17:06:39.337

您可以在此处找到常量列表：http: [//techsupt.winbatch.com/ts/T000001033005F9.html](http://techsupt.winbatch.com/ts/T000001033005F9.html)

这些适用于 Excel 97，但在您的情况下（xlValues），常量没有改变（-4163）。

和

```
Const xlValues = -4163
...
ob3.Range("A1").Copy
ob3.Range("A1").EntireRow.PasteSpecial(xlValues) 
```

你不应该再收到错误了

# java - 在 EJB 3.1 中控制 CDI 启动

> ID：14019030
> 
> 赞同：6
> 
> 时间：2012-12-24T08:36:32.240
> 
> 标签：java, jakarta-ee, java-ee-6, cdi, ejb-3.1

我是新来的，也是 CDI 世界的新手，我工作中的第一个任务是找到一种控制 CDI 上传的方法。

我们同时使用`EJB 3.1`和，因为它们由不同的容器控制，我们可以通过使用和注释`CDI 1.0`来控制 EJB 托管 Bean 何时以及以何种顺序启动。`@Startup``@Singleton`

但是`@Inject`我在课堂上声明的 CDI bean 将变为 null，因为 CDI 容器尚未启动。

我已经尝试了几天来寻找解决方案，而我在[这里](https://stackoverflow.com/questions/12235464/java-ee-6-controlling-startup-of-managed-beans-with-dependencies-cdi-ejb)找到的那​​个没有用（仍然为空）。

我们正在使用 Java EE 6 并在 WebSphere Application Server 8 上运行应用程序。

拜托，如果你能帮我找到一种方法来控制内部的 CDI 上传，而不管 EJB 是什么？

这是它的示例代码：

```
import javax.annotation.PostConstruct;
import javax.ejb.Singleton;
import javax.ejb.Startup;

@Singleton
@Startup
public class BaseStartupLoader{

/**
 * Default constructor. 
 */
@Inject @MyStartup
BaseStartUp myStartup;

private static Logger m_logger = LoggerFactory.getLogger(BaseStartupLoader.class);
public BaseStartupLoader() {

}

@PostConstruct
public void init(){

    String applicationName = null;

    try {

            applicationName = myStartup.getClass().getName();
            myStartup.load();

    } catch (IllegalAccessException e) {
        m_logger.error("Faild to load data into preload system. "+e);               
    } catch (InstantiationException e) {
        m_logger.error("Faild to load data into preload system. "+e);               
    } catch (ClassNotFoundException e) {
        m_logger.error("Faild to load data into preload system - Class "+ applicationName + "Not found. "+e);               
    }
  }
} 
```

这是 BaseStartup 接口：

```
public interface BaseStartUp {
public void load() throws IllegalAccessException, InstantiationException, ClassNotFoundException;
} 
```

限定符和实施：

```
@Retention(RetentionPolicy.RUNTIME)
@Target ({ElementType.PARAMETER, ElementType.FIELD, ElementType.TYPE, ElementType.METHOD})
@Qualifier 
@Dependent
public @interface MyStartup {   
}

@MyStartup
public class MyStartUpLoader implements BaseStartUp {

    @Inject
    SomeConfigLoader config;

    @Override
    public void load() throws IllegalAccessException, InstantiationException, ClassNotFoundException {
    conifg.init();      
}   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T15:07:38.797

经过大量研究后，我从 IBM 的人那里得到了一些帮助，因为我们正在使用 WebSphere Application Server，所以我可以添加一个名为 JVM 的属性：

**“com.ibm.ws.cdi.immediate.ejb.start”=真**

到管理控制台中的 WAS，他将确保一旦我到达 @Startup bean 中的 EJB @PostConstruct 方法，我创建的 CDI 容器将已经启动并运行并且已经注入。

有用！！

以下是 IBM 站点中问题和解决方案的链接：

[http://www-01.ibm.com/support/docview.wss?uid=swg1PM62774](http://www-01.ibm.com/support/docview.wss?uid=swg1PM62774)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-25T00:11:11.663

也许仔细检查 CDI 实际上是否在应用程序的所有需要​​的地方都启用了。尝试将此代码添加到`BaseStartupLoader`作为实验：

```
@Singleton
@Startup
public class BaseStartupLoader {

    @Inject @MyStartup
    BaseStartUp myStartup;

    @Inject
    private InjectionTest test;

    public static class InjectionTest {}
} 
```

如果`test`变量在 中出现 null `@PostConstruct`，则 CDI 可能未在声明的 jar 中启用`BaseStartupLoader`。

例如，如果说`BaseStartupLoader`在一个名为的 jar中声明`orange.jar`并`MyStartUpLoader`在一个名为 的 jar 中声明`yellow.jar`，那么这两个文件都必须存在：

*   `orange.jar!/META-INF/beans.xml`
*   `yellow.jar!/META-INF/beans.xml`

如果通过 a 在两个 jar 中正确启用了 CDI `META-INF/beans.xml`，那么这是容器中的错误。在调用之前，所有`@Inject`点都必须完成（对于启用 CDI 的 jar） 。`@PostConstruct`无论使用 if`@Startup`并且其中一个 bean 恰好是 EJB，这都是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T19:41:27.017

看看 DeltaSpike。有一个 CDI 控制模块应该可以满足您的需求。我相信 Java EE 7 也应该解决这个问题。

# javascript - javascript正则表达式，单词不跟随且不以特定字符开头

> ID：14019037
> 
> 赞同：7
> 
> 时间：2012-12-24T08:37:20.543
> 
> 标签：javascript, regex

我想我不太擅长正则表达式，所以这是我的问题（我确定这很容易解决，但不知何故我似乎找不到如何解决）

```
var word = "aaa";
text = text.replace( new RegExp(word, "g"),
                     "<span style='background-color: yellow'>"+word+"</span>"); 
```

这在大多数情况下都有效。

我想要做的是正则表达式只有在 word 后面没有 char **/**并且前面没有 char **"**时才能工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-24T08:43:22.677

您将要使用负前瞻。

正则表达式：`'[^"]' + word + '(?!/)'`

编辑：虽然看起来你已经通过避免后视找到了答案并不重要，但 Rohit 注意到了一些我没有注意到的东西。您将需要捕获 [^\"] 并将其包含在替换中，这样它就不会被丢弃。这对于查找头来说不是必需的，因为根据定义，环视不包含在捕获中.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T08:53:30.367

你可以使用这个正则表达式： -

```
'([^"])' + word + '(?!/)' 
```

并将其替换为 -`"$1g"`

请注意，Javascript 不支持后视。`"`因此，您需要使用否定字符类捕获前一个字符并确保它不是。

[请参阅http://fiddle.re/zdjt](http://fiddle.re/zdjt)上的演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-21T17:25:53.673

首先，这个问题可以解释为

1.  *匹配单词不在前面**AND**不后面*（`"aaa`并且`aaa/`应该匹配，与 相同`"aaa/`）和 as
2.  *匹配单词前面没有**或**后面没有*一些字符（`"aaa`，`aaa/`不应该匹配，而`"aaa/`应该）。

如果您使用的是*支持* [ECMAScript 2018](https://262.ecma-international.org/9.0/)的 JavaScript 环境，则可以使用后视解决方案：

```
const word = 'aaa',                     // Word to find
    left = '"',                         // Left-hand negative marker
    right = '/',                        // Right-hand negative marker
    text = 'aaa aaa/ "aaa "aaa/ aaaaa'; // Test string

// Relace any 'word' that does not start with " OR does not end with /
var regex = new RegExp(String.raw`\b(?<!${left})${word}\b(?!${right})`, 'g')
console.log( text.replace(regex, "<span style='background-color: yellow'>$&</span>") );
// => <span style='background-color: yellow'>aaa</span> aaa/ "aaa "aaa/ aaaaa

// Replace any 'word' that does not start with " AND does not end with /
var regex = new RegExp(String.raw`\b${word}\b(?!(?<=${left}${word})${right})`, 'g')
console.log( text.replace(regex, "<span style='background-color: yellow'>$&</span>") );
// => <span style='background-color: yellow'>aaa</span> <span style='background-color: yellow'>aaa</span>/ "<span style='background-color: yellow'>aaa</span> "aaa/ aaaaa
```

如果您使用的是不支持[ECMAScript 2018](https://262.ecma-international.org/9.0/)的 JavaScript 环境，您可以使用

```
var word = 'aaa',                       // Word to find
    left = '"',                         // Left-hand negative marker
    right = '/',                        // Right-hand negative marker
    text = 'aaa aaa/ "aaa "aaa/ aaaaa'; // Test string

// Relace any 'word' that does not start with " OR does not end with /, one match expected
var regex = new RegExp("([^" + left + "\\w]|^)(" + word + ")\\b(?!" + right + ")", 'g')
console.log( text.replace(regex, "$1<span style='background-color: yellow'>$2</span>") );
// => <span style='background-color: yellow'>aaa</span> aaa/ "aaa "aaa/ aaaaa

// Same as above, but in case "left" is a sequence of chars, not a single char, or a longer pattern:
var regex = new RegExp("(" + left + ")?\\b(" + word + ")\\b(?!" + right + ")", 'g')
console.log( text.replace(regex, function(x,g,gg) { return g ? x : "<span style='background-color: yellow'>" + gg + "</span>";}) );
// => <span style='background-color: yellow'>aaa</span> aaa/ "aaa "aaa/ aaaaa

// Replace any 'word' that does not start with " AND does not end with /, three matches expected
var regex = new RegExp("(" + left + word + right + ")|\\b" + word + "\\b", 'g')
console.log( text.replace(regex, function(x, g) { return g || "<span style='background-color: yellow'>" + x + "</span>";}) );
// => <span style='background-color: yellow'>aaa</span> <span style='background-color: yellow'>aaa</span>/ "<span style='background-color: yellow'>aaa</span> "aaa/ aaaaa
```

笔记：

*   我在这里通过`\b`, 单词边界使用整个单词匹配（并`\w`在其中一种解决方法中在否定字符类中构造）
*   如果`right`和`left`字符/字符串包含特殊的正则表达式元字符，请注意[在用作正则表达式的一部分之前对其进行转义](https://stackoverflow.com/q/3561493/3832970)
*   `word`变量可能会出现相同的转义需求，但在这种情况下，如果`word`以特殊的正则表达式元字符开头或/和结尾，则单词边界 ( `\b`) 将不再起作用，您将需要使用[自适应/动态单词边界](https://stackoverflow.com/a/45145800/3832970)。

# javascript - 找到最远的 DIV 的最便宜的方法？

> ID：14019043
> 
> 赞同：5
> 
> 时间：2012-12-24T08:38:01.623
> 
> 标签：javascript, css, html, position, dimensions

假设我们有一个未知的容器 div，`width`它`height`小于身体的完整尺寸。

此容器 div 包含**未知数量**的 div。容器中的所有 div 都有**不同的大小**，除此之外，它们具有与以下 3 种类型之一相同的 CSS：

*   类型 1：所有 div 都向左浮动。
*   类型 2：所有 div 都向右浮动。
*   类型 3：所有 div 的绝对位置未知，甚至可以放置在远离屏幕的位置。

类型 1 和 2 的 div 有边距，*也可能*有填充。类型 3 的 div 可能有，也可能没有，也可能两者都有。

鉴于容器中 div 的类型未知 - 最终目标是在原始容器内添加一个辅助容器，该容器大到足以容纳视口中的所有 div（带有溢出：滚动）。**计算它最便宜的方法是什么？**

需要记住的一些事项：

1.  div**可能有也可能没有**（作为一个整体）有`box-sizing: border-box`. 这将影响它们的边框、边距和填充的呈现方式，并且也应予以考虑。

2.  在类型 1 和 2（浮动 div）的情况下，div 意味着水平堆叠 - 即容器应该增长以适应它们的总宽度。应该考虑到这一点。

3.  例如，最右边 div 的右边距应该被计算在内，并且应该增加容器的宽度。这同样适用于顶部、底部和最左侧的 div。

4.  不需要 IE8 及以下版本。

5.  **请仅使用原版 Javascript**。没有像 jQuery 之类的框架。

谢谢！

一些可视化： ![类型 1（和 2）div](../Images/837e7e03fbd94cf8ef034e62a7c0f723.png) ![类型 3 div](../Images/35fa3309e105b69e1bfc05155756d19f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:20:38.500

您可能必须自己进行性能测试以查看哪种方法最快，但无论如何这里是一种非常快速的方法。（[jsfiddle](http://jsfiddle.net/m7N2J/1/)）

```
function getOuterBoxDimensions() {
    var original = document.getElementById('original'),
        divs = original.getElementsByTagName('div'),
        left = 0,
        right = original.offsetWidth,
        top = 0,
        bottom = original.offsetHeight;
    for (var i = 0, div; div = divs[i++];) {
        if (div.offsetTop < top) {
            top = div.offsetTop;
        }
        if (div.offsetTop + div.offsetHeight > bottom) {
            bottom = div.offsetTop + div.offsetHeight;
        }
        if (div.offsetLeft < left) {
            left = div.offsetLeft;
        }
        if (div.offsetLeft + div.offsetWidth > right) {
            right = div.offsetLeft + div.offsetWidth;
        }
    }
    return {
        top: top,
        left: left,
        bottom: bottom,
        right: right
    };
    // Note that dimensions are relative to the original div top left
} 
```

据我所知，无论是否`box-sizing: border-box`设置，offsetLeft、offsetWidth 等都会返回正确的尺寸。如果您在内部 div 中有 div，那么事情会变得有点复杂 - 您只想检查作为原始子节点的 div。

编辑：这是一个扩展版本，它适当地考虑了边距并扩展了新容器以容纳单行中的所有浮动 div（请参阅评论中的讨论）。[http://jsfiddle.net/m7N2J/10/](http://jsfiddle.net/m7N2J/10/)

```
function getOuterBoxDimensions() {
    var original = document.getElementById('original'),
        divs = original.getElementsByTagName('div'),
        left = 0,
        right = original.offsetWidth,
        top = 0,
        bottom = original.offsetHeight,
        d = document.defaultView,
        style, marginTop, marginBottom, marginLeft, marginRight, float, floatWidth = 0;
    for (var i = 0, div; div = divs[i++];) {
        if (style = div.currentStyle) {
            // May be possible to exclude this if IE7/8 not needed
            marginTop = parseFloat(style.marginTop);
            marginBottom = parseFloat(style.marginBottom);
            marginLeft = parseFloat(style.marginLeft);
            marginRight = parseFloat(style.marginRight);
            float = style.float;
        }
        else {
            style = d.getComputedStyle(div, null);
            marginTop = parseFloat(style.getPropertyValue('margin-top'));
            marginBottom = parseFloat(style.getPropertyValue('margin-bottom'));
            marginLeft = parseFloat(style.getPropertyValue('margin-left'));
            marginRight = parseFloat(style.getPropertyValue('margin-right'));
            float = style.getPropertyValue('float');
        }
        if (float == 'left' || float == 'right') {
            floatWidth += div.offsetWidth + marginLeft + marginRight;
            if (div.offsetHeight + marginBottom > bottom) {
                bottom = div.offsetHeight + marginBottom;
            }
        }
        else {
            if (div.offsetTop - marginTop < top) {
                top = div.offsetTop - marginTop;
            }
            if (div.offsetTop + div.offsetHeight + marginBottom > bottom) {
                bottom = div.offsetTop + div.offsetHeight + marginBottom;
            }
            if (div.offsetLeft < left - marginLeft) {
                left = div.offsetLeft - marginLeft;
            }
            if (div.offsetLeft + div.offsetWidth + marginRight > right) {
                right = div.offsetLeft + div.offsetWidth + marginRight;
            }
        }
    }
    if (right < left + floatWidth) {
        right = left + floatWidth;
    }
    return {
        top: top,
        left: left,
        bottom: bottom,
        right: right
    };
    // Note that dimensions are relative to the original div
} 
```

# php - jQuery 出现意外令牌错误

> ID：14019044
> 
> 赞同：0
> 
> 时间：2012-12-24T08:38:08.353
> 
> 标签：php, javascript, jquery

我的标题中有运行 jQuery 库的代码行

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

我的 javascript 文件向 Web 服务发送 ajax 请求。Web 服务将输出一个随机报价。javascript 文件获取输出并将其显示在 id='quote' 的 div 中。我检查了 web 服务的 php 文件，它工作正常并打印了一个随机报价。但我不断收到下面的错误与 jQuery 的行

未捕获的语法错误：意外的令牌（

这是我的 javascript 文件中的代码。我也使用了原型，这就是我写“jQuery”而不是“$”的原因

```
function displayQuote(ajax){
    var quote = ajax.responseText;

    $("quote").hide();
    $("quote").innerHTML = quote;
    jQuery.("#quote").fadeIn(1000);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:41:29.320

```
function displayQuote(ajax){
    var quote = ajax.responseText;
    // here i added the # (hashtag) to your selector
    // when referencing an ID you need to use the hashtag '#'
    // when referencing a class you need to the a dot '.'
    $("#quote").hide();
    $("#quote").innerHTML = quote;
    // also write here you were placing a '.' after the jQuery function.
    // since this is the first function in the chain, 
    // you cannot put a period after it
    jQuery("#quote").fadeIn(1000);
 } 
```

`#`您在引用`<element id ="quote">`;时忘记添加井号标签

[这是上述相同内容的另一个版本： 编辑：正如搅拌机](https://stackoverflow.com/users/464744/blender)所指出的，我们不能在相同的上下文中使用`document.getElementById('')`和。`fadeIn()`所以要解决这个问题，我们可以只使用 .html 引用 HTML 元素`jQuery()`。

```
function displayQuote(ajax) {
           var quote = ajax.responseText;
           var quoteElement = document.getElementById('quote');
           quoteElement.style.display='none';
           quoteElement.innerHTML = quote;
           jQuery(quoteElement).fadeIn(1000);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:43:27.033

你有一个错误的时期：

```
jQuery.("#quote").fadeIn(1000);
      ^ 
```

而且您的选择器不正确：

```
$("quote") // This finds a `<quote>` tag. You want `#quote`. 
```

此外，使用`.html()`代替`innerHTML`：

```
function displayQuote(ajax){
    var quote = ajax.responseText;

    jQuery("#quote").hide().html(quote).fadeIn(1000);
} 
```

由于您使用的是 Prototype，因此请查看[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:40:01.717

我认为代码应该是：

```
quote.hide();
quote.innerHTML = quote;
quote.fadeIn(1000); 
```

因为你已经有一个 jQuery 变量`quote`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T08:43:16.093

我认为你必须使用它

```
function displayQuote(ajax){
    var quote = ajax.responseText;

    $("quote").hide();
    $("quote").innerHTML = quote;
    $("#quote").fadeIn(1000);
} 
```

# c# - 如何在后台工作人员中更改 ListView？跨线程错误

> ID：14019054
> 
> 赞同：4
> 
> 时间：2012-12-24T08:39:32.150
> 
> 标签：c#, winforms, delegates

> **可能重复：**
> [避免跨线程操作错误的最简洁和正确的方法？](https://stackoverflow.com/questions/12901938/most-concise-and-proper-way-of-avoiding-cross-thread-operation-error)

运行我的程序时出现错误.... **{“跨线程操作无效：控件 'listView1' 从创建它的线程以外的线程访问。”}**

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) {
        TestObject argumentTest = e.Argument as TestObject;
        string[] lines = argumentTest.ThreeValue.Split(new string[] { Environment.NewLine }, StringSplitOptions.None);

        HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
        foreach (string vr in lines)
        {
            string country = argumentTest.OneValue.Trim();
            string url = vr + country + '/code/' + argumentTest.TwoValue.Trim();
            string sourceCode = WorkerClass.getSourceCode(url);

            document.LoadHtml(sourceCode);
            var title = document.DocumentNode.SelectSingleNode("//title");
            var desc = document.DocumentNode.SelectSingleNode("//div[@class='productDescription']");

            //-- eksekusi title
            string isititle = title.InnerText;
            string isititle2 = isititle.Replace("droidflashgame: ", "");
            string isititle3 = Regex.Replace(isititle2, "[^A-Za-z0-9 ]+", "");
            string isititle4 = isititle3.Substring(0, Math.Min(isititle3.Length, 120));
            //-- Adding to list view for next step...
            ListViewItem abg = new ListViewItem(isititle3);
            abg.SubItems.Add(isititle4);
            listView1.Items.Add(abg); // ERROR in Here? 
```

我知道在一些教程中说使用调用？但我尝试了很多东西但仍然错误？

有手吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T08:41:48.530

试试这个。这对我来说很好

```
 ListViewItem abg = new ListViewItem(isititle3);

     if (listView1.InvokeRequired)
                    listView1.Invoke(new MethodInvoker(delegate
                    {
           listView1.Items.Add(abg);           

                    }));
                else
           listView1.Items.Add(abg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:06:22.750

从您的代码中删除最后一行 (listView1.Items.Add(abg); // ERROR in Here?) 并将其替换为：

```
AddListViewItem(abg); 
```

然后将此方法应用于您的代码：

```
 delegate void AddListViewItemDelegate(ListViewItem abg);
    void AddListViewItem(ListViewItem abg)
    {
        if (this.InvokeRequired)
        {
            AddListViewItemDelegate del = new AddListViewItemDelegate(AddListViewItem);
            this.Invoke(del, new object() { abg });
        }
        else
        {
            listView1.Items.Add(abg);
        }
    } 
```

这将完成工作，快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:50:29.307

当您使用后台工作人员时，您可以简单地通过更改进度来传递项目：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        //..........
        var test = new ListViewItem("test");
        backgroundWorker1.ReportProgress(0, test);

    }

    private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        listView1.Items.Add((ListViewItem)e.UserState);
    } 
```

# c# - 对内存位置的无效访问 - 托管到非托管代码

> ID：14019055
> 
> 赞同：4
> 
> 时间：2012-12-24T08:39:35.587
> 
> 标签：c#, c++, memory-management, 64-bit, unmanaged-memory

我在 c++ 中有这个代码，我通过 dll 导出：

```
typedef struct {
unsigned short major;
unsigned short minor;
} Version;

EXPORTED_FUNC Result Init(Version *version, char *file);

extern "C" Result Init(Version *version, char *file)
{
    if (file) {
    if (!GFile.init(string(file))) {
        return INVALID_PARAMETER;
    }
    if (version) {
        version->major = VERSION_MAJOR1;
        version->minor = VERSION_MAJOR2;
    }

      return OK;
} 
```

我从 c# 调用 dll，这就是我在那里写的：

```
internal struct Version
{
    ushort major { set; get; }
    ushort minor { set; get; }
}

[DllImport("mydll.dll", CallingConvention=CallingConvention.Cdecl)]
    static extern Result Init(ref Version versionInfo, [MarshalAs`(UnmanagedType.LPStr)] string FilePath); 
```

这是对 Init 的调用：

```
string filePath = Application.StartupPath + "\\ABC.ini";
Version version = new Version();

 result = _mydllWrapper.Init(ref version, filePath); 
```

对于上述所有代码，当我运行 c# 应用程序时，有时会在 x64 机器中出现以下异常：

```
Unable to load DLL mydll.dll : invalid access to memory location (Exception from HRESULT.0x800703E6) 
```

如何在不从编译中删除任何安全标志的情况下修复此代码？修复的代码示例真的很受欢迎！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:13:51.013

不幸的是，问题是缺少一些信息，但我只在构建输出不正确时才看到该错误。它只会“偶尔”发生，因为您可能偶尔会删除 .Net exe 的输出目录，然后进行构建，然后在出现问题后，从本机输出目录复制新构建的二进制文件，然后继续。

要解决这个问题，您应该确保您的 .NET 代码和本机代码之间的目标 CPU 类型正确匹配。如果你只在 x64 机器上运行，你可以只使用 AnyCPU，但我建议，因为你正在调用本机代码，你只需继续并将 CPU 设置为你的目标，无论是 x64、x86（ C++ 用语中的 Win32）或 ARM。另一种适用于 VS2012 的替代方案是“32 位首选”目标，它允许您在 x64 设备上作为 x86 运行，但也可以在 ARM 设备上正常运行。

无论如何，一旦您确保您的配置正确，请检查以确保您的输出目录设置正确，以便将 .NET exe 和 C++ dll 放到同一个输出目录中。请注意，输出目录特定于每个构建/架构组合。

# java - java mysql连接中的错误

> ID：14019059
> 
> 赞同：-2
> 
> 时间：2012-12-24T08:40:01.730
> 
> 标签：java, mysql

我一直在尝试编写一个连接到`mysql`db 并从中检索数据的 Java 程序。

我编写了一个成功运行的简单程序，但下面的代码片段引发了一些我什至没有听说过的错误。

片段如下：

```
public class test{
String rows,rows1;
String dbUrl = "jdbc:mysql://localhost:3306/login";
String dbClass = "com.mysql.jdbc.Driver";
public static void main(String args[]){
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection (dbUrl,"root","");
Statement stmt = con.createStatement();

String query="select distinct(username) from tracking";
ResultSet rs=stmt.executeQuery(query);
while(rs.next())
{
rows=rs.getString("username");
System.out.println(rows);
String query1="select distinct(session_id) from tracking where username='"+rows+"'";
ResultSet rs1=stmt.executeQuery(query1);
while(rs1.next())
{
rows1=rs1.getString("session_id");
String query2="select * from tracking where username='"+rows+"' and session_id='"+rows1+"'";
ResultSet rs2=stmt.executeQuery(query2);
while(rs2.next())
{
System.out.println("Result"+rs2.getString("method"));
}
}
}
con.close();
}
catch(ClassNotFoundException e) {
e.printStackTrace();
}

catch(SQLException e) {
e.printStackTrace();
}
}; 
```

错误如下

```
test.java:12: error: non-static variable dbUrl cannot be referenced from a stati
c context
Connection con = DriverManager.getConnection (dbUrl,"root","");
                                              ^
test.java:19: error: non-static variable rows cannot be referenced from a static
 context
rows=rs.getString("username");
^
test.java:20: error: non-static variable rows cannot be referenced from a static
 context
System.out.println(rows);
                   ^
test.java:21: error: non-static variable rows cannot be referenced from a static
 context
String query1="select distinct(session_id) from tracking where username='"+rows+
"'";
                                                                           ^
test.java:25: error: non-static variable rows1 cannot be referenced from a stati
c context
rows1=rs1.getString("session_id");
^
test.java:26: error: non-static variable rows cannot be referenced from a static
 context
String query2="select * from tracking where username='"+rows+"' and session_id='
"+rows1+"'";
                                                        ^
test.java:26: error: non-static variable rows1 cannot be referenced from a stati
c context
String query2="select * from tracking where username='"+rows+"' and session_id='
"+rows1+"'"; 
```

我无法理解这里的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:41:59.727

使您的变量成为静态的。

```
static String rows,rows1;
static String dbUrl = "jdbc:mysql://localhost:3306/login";
static String dbClass = "com.mysql.jdbc.Driver"; 
```

您在静态的 MAIN 方法中使用变量 rows、rows1 等。每当您在静态方法中使用任何变量时，变量本身都必须是静态的。

您可能正在犯[Java 中的常见错误之一](http://www.javacoffeebreak.com/articles/toptenerrors.html)。也许您可以通过其他类型的常见错误来避免它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:44:03.023

可能这里最简单的解决方案是让你的变量静态：

```
static String rows,rows1;
static String dbUrl = "jdbc:mysql://localhost:3306/login";
static String dbClass = "com.mysql.jdbc.Driver"; 
```

或将它们移动到 inside `main`，假设您将坚持当前的“做所有事情`main`”策略）。

您遇到的问题是这`main`是一个静态类，因此在没有您的类实例的情况下运行。因此，它只能访问在类级别定义的成员（每个类一个，或跨类的*所有*实例一个）。

因为您的四个字符串当前是*实例*变量（类的*每个*实例一个），所以只能通过它们的实例引用它们。

以这种方式考虑区别可能会有所帮助：

```
+-----------------------------------------------+
| xyzzy class                                   |
|    (class variables here, shared amongst      |
|     all instances and static methods)         |
|                                               |
|  +------------------+   +------------------+  |
|  | xyzzy instance 1 |   | xyzzy instance 2 |  |
|  |    (instance 1   |   |    (instance 2   |  |
|  |     variables    |   |     variables    |  |
|  |     here only    |   |     here only    |  |
|  |     for this     |   |     for this     |  |
|  |     instance)    |   |     instance)    |  |
|  +------------------+   +------------------+  |
|                                               |
+-----------------------------------------------+ 
```

* * *

您也根本不需要`dbClass`，因为您实际上并没有使用它。您应该在通话中使用它`forName`，或者完全摆脱它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T08:44:27.967

dbURL、dbClass、row 和 row1 都应该是静态变量。

将它们声明为静态。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-24T08:43:48.010

尝试在它遇到问题的变量前面敲打“静态”，以解释静态和非静态对象是什么：[这可能会有所帮助](http://www.javatutorialhub.com/java-static-variable-methods.html)

# encryption - hmac-sha1 会降低性能吗？

> ID：14019064
> 
> 赞同：0
> 
> 时间：2012-12-24T08:41:19.133
> 
> 标签：encryption, md5, hmac, hmacsha1

有一个网站有很多 HTTP 流量。HTTP 标头中有一个 MD5 HASH 字段。现在我想改用 HMAC-SHA1 来加密数据。使用 HMAC-SHA1 会大大增加服务器负载吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:44:59.110

这个问题无法有意义地回答。计算SHA1是否比MD5需要更多的计算能力？是的。[https://stackoverflow.com/a/2723941/308851](https://stackoverflow.com/a/2723941/308851)。这会对您的流量产生有意义的影响吗？嗯，这取决于这个散列目前占多大的百分比。IE。如果您正在运行甚至只是查询数据库的稍微复杂的页面，那么计算单个哈希不会给您带来有意义的差异。

您自己需要对此进行基准测试。

# input - 位置固定输入

> ID：14019072
> 
> 赞同：0
> 
> 时间：2012-12-24T08:42:30.960
> 
> 标签：input, position, fixed

我有一个`<input type="button" />`和一个`<input type="text" />`

![在此处输入图像描述](../Images/f211eefa155c7369ac67d5f98bb05d8c.png)

如何将加号放在文本框的左侧，以便它始终存在，无论在浏览器上进行缩放...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:05:06.690

您应该将两个控件都放在一个`<div>`标签中。并设置 div 的宽度，使其始终保持固定大小，与浏览器的缩放无关。

然后将 css 应用于按钮：`#buttonID { float:left; }`

# jsf - JSF：页面加载后自动触发事件

> ID：14019079
> 
> 赞同：0
> 
> 时间：2012-12-24T08:43:20.470
> 
> 标签：jsf, jakarta-ee, jsf-2, primefaces

我正在使用这个 primefaces 媒体标签来查看 PDF

```
<p:media value="#{bean.path}" width="100%" height="600px">    
</p:media> 
```

现在，从该页面中的特定文件夹加载 PDF 文件后，`(ViewPDF.xhtml)`我想从该文件夹中删除该 PDF 文件。我为此搜索并尝试`<f:event>`了标签并使用了它`type="postAddToView"`，但它在浏览器中显示 PDf 之前删除了该文件，我想要它在浏览器中加载PDF文件后应该删除。我应该使用什么？
任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:57:00.403

PDF 文件在“页面加载后”没有完成下载。它是由一个完全独立的 HTTP 请求下载的，该请求在页面加载后开始。您*可以*在所需的 URL 模式上映射过滤器并在`chain.doFilter()`调用后执行该工作。但这有点奇怪。

我了解您正在生成 PDF 报告，该报告仅应在提交时显示。在这种情况下，您应该创建一个单独的 servlet，它根据一些请求参数生成 PDF，并将其直接写入响应输出流而不是文件输出流。最后，让 JSF 为该 servlet 生成正确的 URL，并带有正确的请求参数。

例如

```
public void submit() {
    // ...

    path = externalContext.getRequestContextPath() + "/pdf"
        + "?foo=" + URLEncoder.encode(foo, "UTF-8")
        + "?bar=" + URLEncoder.encode(bar, "UTF-8")
        + "?baz=" + URLEncoder.encode(baz, "UTF-8");
} 
```

和这样的 servlet（假设您使用 iText 生成 PDF）：

```
@WebServlet("/pdf/*")
public class PdfServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String foo = request.getParameter("foo");
        String bar = request.getParameter("bar");
        String baz = request.getParameter("baz");
        // ...

        response.setContentType("application/pdf");
        PdfWriter.getInstance(document, response.getOutputStream());
        // ...
    }

} 
```

如果您想隐藏请求参数，您也可以通过自动生成/唯一 ID 将它们存储在会话中，并将其作为请求参数传递。

# c# - 默认参数说明符在 C# 上是不允许的错误

> ID：14019083
> 
> 赞同：3
> 
> 时间：2012-12-24T08:43:28.873
> 
> 标签：c#, .net-3.5, default-parameters

当我构建我的项目时，VC# 说不允许使用默认参数说明符。它把我带到了这段代码：

```
public class TwitterResponse
{
    private readonly RestResponseBase _response;
    private readonly Exception _exception;

    internal TwitterResponse(RestResponseBase response, Exception exception = null)
    {
        _exception = exception;
        _response = response;
    } 
```

我的错误可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:45:32.687

错误是：

```
Exception exception = null 
```

您可以移至 C# 4.0 或更高版本，此代码将编译！

这个问题将帮助您：

[C# 3.5 参数的可选和默认值](https://stackoverflow.com/questions/5116340/c-sharp-3-5-optional-and-defaultvalue-for-parameters)

或者，您可以在 C# 3.0 或更早版本上进行两次覆盖来解决此问题：

```
public class TwitterResponse
{
    private readonly RestResponseBase _response;
    private readonly Exception _exception;

    internal TwitterResponse(RestResponseBase response): this(response, null)
    {

    }

    internal TwitterResponse(RestResponseBase response, Exception exception)
    {
        _exception = exception;
        _response = response;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:45:51.887

如果您使用的是 .NET 3.5，则可能会发生这种情况。C# 4.0 中引入了可选参数。

```
internal TwitterResponse(RestResponseBase response, Exception exception = null)
{
    _exception = exception;
    _response = response;
} 
```

应该：

```
internal TwitterResponse(RestResponseBase response, Exception exception)
{
    _exception = exception;
    _response = response;
} 
```

请注意变量没有默认值`exception`。

# c++ - C++ 和 cin.getline 的问题

> ID：14019086
> 
> 赞同：5
> 
> 时间：2012-12-24T08:44:08.563
> 
> 标签：c++, struct, getline

我正在学习`struct`C++，但我不知道如何让它不跳过第一个问题。

如果我在其中使用 char`struct`它只会复制我的第一个单词，如果我尝试使用 string 它会跳过第一个问题（忽略它）。

你能指导我吗？

`std::getline`稍后编辑：我使用 Microsoft Visual C++ 2010 速成版，和之间有区别`cin.getline`吗？

```
#include <iostream>
#include <conio.h>
#include <string>

using namespace std;

struct melodie{

char artist[50];
char titlu[50];
int an;
int lungime;

};

void main(){
int repetam;
double rezultat;
cout<<"Cate melodii veti introduce: ";
cin>>repetam;
melodie *pointer = new melodie[repetam];
for(int i = 0; i<repetam; i++){
    cout<<endl;
    cout<<"Introduceti artistul melodiei: ";    
    cin.get(pointer[i].artist);
    cout<<"Introduceti titlul melodiei: ";
    cin.getline(pointer[i].titlu);
    cout<<"Introduceti anul melodiei: ";
    cin>>pointer[i].an;
    cout<<"Introuceti lungea melodiei (in secunde): ";
    cin>>pointer[i].lungime;

}
cout<<"Lista melodiilor introduse este:"<<endl;
for(int i =0; i<repetam; i++){
    cout<<"Artistul melodiei este: "<<pointer[i].artist<<endl
        <<"Titlul melodiei este: "<<pointer[i].titlu<<endl
        <<"Anul melodiei este: "<<pointer[i].an<<endl
        <<"Lungimea melodiei (in secunde) este: "<<pointer[i].lungime<<endl;
    cout<<endl;
}

cout<<"Melodiile care au aparut dupa anul 2000 si au lungimea mai mica de 180 de secunde sunt: "<<endl;
for(int i = 0;i<repetam; i++){
    if(pointer[i].an>2000 && pointer[i].lungime<180){
        cout<<"Artist: "<<pointer[i].artist
            <<endl
            <<"Titlul: "<<pointer[i].titlu<<endl<<endl;

    }
}

getch();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:14:12.063

首先，你不应该编译。有很多错误：

*   `void main()`是非标准的。`main()`总是返回are and`int`的唯一可移植声明（或与前一个相同；当然，两个参数的名称可以自由选择）。`main()``int main()``int main(int argc, char* argv[])``int main(int argc, char** argv)`
*   你使用的`get()`and`getline()`成员函数至少需要一个额外的参数：可用缓冲区的大小。

对于其余的答案，我假设这些错误已修复。

当然，输入不是“跳过第一个问题”。相反，它会读取已经给出但您可能没有考虑过的输入：格式化的输入 using`>>`在其各自的格式完成（或失败）时立即停止读取。例如，在读取整数时，一旦遇到非数字，它就会停止。因此，当读取`int`输入`repetam`流时，当遇到用于完成此输入的换行符时，在最后一位数字之后停止读取。调用`get()`读取一个字符串直到（包括）第一个换行符。输入`repetam`换行符时，输入了一个换行符，因此，此字符串是`get()`停止的换行符。

更一般地，当混合格式化输入（即使用`>>`）和未格式化输入（即使用命名函数`get()`、`getline()`、`read()`等）时，您通常需要删除不需要的字符。在您的示例中，您可能希望在调用之前摆脱第一个换行符`get()`（您需要包括`<limits>`才能访问`std::numeric_limits`）：

```
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
std::cin.get(pointer[i].artist, 50); 
```

如果您的`artisti`字符串不以任何空格字符开头，您可以使用

```
(std::cin >> std::ws).get(pointer[i].artist, 50); 
```

*操纵器* 会`std::ws`跳过所有前导空格（它会跳过空格、制表符、换行符等）并且更容易键入。当然，如果您需要经常忽略换行符，您可以创建一个操纵器来忽略包括换行符在内的字符：

```
std::istream& skipline(std::istream& in)
{
    return in.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
}
// ...
(std::cin >> skipline).get(pointer[i].artist, 50); 
```

也就是说，我猜你并不是真的要使用`get()`，因为这个函数在字符串中包含分隔字符（`'\n'`默认情况下）。您可能想`getline()`改用。此外，处理`std::string`s 而不是字符数组更容易，即我会为 s 使用不同的定义`struct`：

```
struct melodi
{
    std::string artist;
    std::string titlu;
    int an;
    int lungime;
}; 
```

这样，字符串可以是任意大小，并且不限于 49 个字符（您的版本中需要为终止空字符留出空间）。但是，要阅读 a`std::string`你需要一个非成员函数`std::getline()`）：

```
std::getline(std::cin >> skipline, artist); 
```

# ios5 - 如何显示图像中的信息消息

> ID：14019088
> 
> 赞同：-2
> 
> 时间：2012-12-24T08:44:14.903
> 
> 标签：ios5, ios4

如何显示消息**“哪些帐户将从这些最佳实践中受益最多？想想，添加客户名称并为自己增压！”** 像弹出显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:46:58.023

如果您谈论的是 iOS SDK 中的弹出窗口，您需要：

```
UIAlertView *alert = [[UIAlertView alloc]
            initWithTitle: @"Announcement"
            message: @"Which accounts will benefit the most from these best practices? Think,add customer names and supercharge yourself!"
            delegate: nil
            cancelButtonTitle:@"OK"
            otherButtonTitles:nil];

// Show the popup  
[alert show]; 
```

对于具有您指定的消息的消息，以及“确定”按钮标题以将其关闭，以及标题“公告”。

# google-drive-api - Google Drive API - 更新电子表格数据

> ID：14019091
> 
> 赞同：9
> 
> 时间：2012-12-24T08:44:34.577
> 
> 标签：google-drive-api

我想将数据从我的网络应用程序发送到谷歌驱动器电子表格，这样其他人会更容易看到数据。所以我有一个电子表格，每当有新数据时我想在其中添加行。

我的问题是，是否可以选择只在电子表格中添加一行？

如果不是，那么我想完成此操作的唯一方法是获取文件，添加行，然后再次上传？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-24T19:45:11.743

Google Drive API 用于通用文件/文件夹交互。对于直接修改 Google Spreadsheet 数据，[Google Sheets API](https://developers.google.com/sheets/)会是更好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T16:20:24.207

不再支持 Google Docs API 使用 Google Drive API [https://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

请检查[弃用政策和 API 春季大扫除的变化](http://googledevelopers.blogspot.mx/2012/04/changes-to-deprecation-policies-and-api.html)

# xcode - 雪豹上的Phonegap

> ID：14019092
> 
> 赞同：0
> 
> 时间：2012-12-24T08:44:35.600
> 
> 标签：xcode, macos, apache, cordova

是否可以在 10.6.8 上安装最新的 Phonegap？在要求部分它说，Apache Cordova 至少需要 Lion。是否值得尝试安装 Xcode 和 Phonegap 的旧版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:47:29.873

是的，您可以为此学习以下[教程](http://iphonedevlog.wordpress.com/2011/09/24/installing-phonegap-1-0-into-xcode-4-mac-os-x-snow-leopard/)

# javascript - 减小内存中的图像大小

> ID：14019095
> 
> 赞同：2
> 
> 时间：2012-12-24T08:44:56.517
> 
> 标签：javascript, html, css

在浏览器下载图像后，我是否正确地认为即使使用 css 将图像调整为更小，内存占用仍然与图像在浏览器内存中保持不变一样？

如果是这样，有没有办法**实际**减小图像的大小，以便占用更少的内存，并且在滚动/平移操作期间不会过多影响显示性能？

ps：这个问题对于“传统”网页可能没有多大意义，但在显示许多不同大小的图像的单页Web应用程序的上下文中非常重要（至少对我来说）页面和浏览器内存显示新页面时不会“刷新”。

ps2：我没有访问服务器的权限，所以服务器端调整大小是不行的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:51:54.793

[您可以使用 imagemagick http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)之类的东西重新调整服务器端 这有许多不同编程语言的绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:48:13.067

CSS 缩放通常不会减少内存占用。我认为它实际上可能会增加它，因为浏览器必须缓冲/缓存图像的缩放版本*和*原始版本。

我认为您可以使用[Canvas API](https://developer.mozilla.org/en-US/docs/HTML/Canvas)来有效地绘制较小版本的图像并改用它。

也看看[这个问题](https://stackoverflow.com/questions/2303690/resizing-an-image-in-an-html5-canvas)。

另外，如果您知道图像的有效最终尺寸，您当然可以在 Web 服务器上执行此操作并缓存较小的版本。这应该提供某种程度的向下兼容性。

# string - MATLAB：打印格式化表格

> ID：14019097
> 
> 赞同：0
> 
> 时间：2012-12-24T08:45:24.460
> 
> 标签：string, matlab, matrix

我正在 MATLAB 上开发一个迭代程序（解决 A **x** = **b**的 Jacobi 迭代方法），它允许我进行 N 次迭代。

到目前为止，我可以编写迭代代码，但我想改进结果的呈现方式。

我的程序的输出：

```
jacobi(A, b, 20);  %N = 20 iterations 
```

`x`从左到右按迭代列的值（从 0 开始）：

```
X = 
```

第 1 至 9 列

```
 0    3.4000   -0.0556    1.3848    1.0250    0.9300    1.0558    0.9813    1.0034
     0    4.0000    0.8603    2.1810    2.0329    1.9030    2.0453    1.9826    1.9997
     0    2.5000    4.5444    2.1023    3.3195    2.9782    2.9513    3.0402    2.9831
     0    2.0000    5.3463    3.5175    4.0772    4.0612    3.9463    4.0266    3.9939
     0    6.7778    3.8111    5.4106    4.9648    4.9366    5.0513    4.9777    5.0046 
```

第 10 至 18 列

```
1.0026    0.9979    1.0011    0.9998    1.0000    1.0001    1.0000    1.0000    1.0000
2.0027    1.9977    2.0008    1.9998    1.9999    2.0001    2.0000    2.0000    2.0000
3.0035    3.0013    2.9984    3.0009    2.9998    3.0000    3.0001    3.0000    3.0000
3.9990    4.0022    3.9988    4.0004    4.0000    3.9999    4.0001    4.0000    4.0000
5.0015    4.9979    5.0011    4.9997    5.0000    5.0001    5.0000    5.0000    5.0000 
```

第 19 至 21 列

```
1.0000    1.0000    1.0000
2.0000    2.0000    2.0000
3.0000    3.0000    3.0000
4.0000    4.0000    4.0000
5.0000    5.0000    5.0000 
```

没关系，如果你们从来没有听说过这种方法，但我想知道，如果我要插入字符串，这样它就变成了

```
jacobi(A, b, 20); 
```

从左到右按迭代列（从 0 开始）的 x 值：

X =

第 1 至 9 列

```
 iteration
     ----------------------------------------------------------------------------------
      0  |    1   |    2    |    3    |    4    |    5    |    6    |    7    |     8
     ----------------------------------------------------------------------------------
      0    3.4000   -0.0556    1.3848    1.0250    0.9300    1.0558    0.9813    1.0034
      0    4.0000    0.8603    2.1810    2.0329    1.9030    2.0453    1.9826    1.9997
      0    2.5000    4.5444    2.1023    3.3195    2.9782    2.9513    3.0402    2.9831
      0    2.0000    5.3463    3.5175    4.0772    4.0612    3.9463    4.0266    3.9939
      0    6.7778    3.8111    5.4106    4.9648    4.9366    5.0513    4.9777    5.0046 
```

等等，我到底该怎么做？

我正在考虑在循环中插入`------ up`、`i |`中间和`------`下面以及迭代次数，让它生成尽可能多的 N 。

到目前为止，我在搜索中找到的最接近的例子是

```
arrayfun(@(x)sprintf('Hole %j',x), 1:18)','UniformOutput',false) 
```

但是，我仍然不知道如何将这个想法融入我的代码中。这种输出在 MATLAB 中是否可行？

谁能帮我？提前致谢。

我正在学习关于 MATLAB 的课程，但是只有几个月的课程，我还没有学到很多东西。但我正在寻找挑战。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:22:26.213

您实际上并不需要将字符串添加到矩阵本身。

这完全是在**显示**结果时**格式化**结果的问题。例如，您可以使用以下解决方案，使用一些字符串格式（没有循环！）：**[`fprintf`](http://www.mathworks.com/help/matlab/ref/fprintf.html)**

 **```
% # Initialize table properties
col_w = 11;  % # Fixed column width in characters
fr_n = 4;    % # Number of fraction digits

% # Print header
hdr_line = repmat(['+', char('-' * ones(1, col_w))], 1, size(X, 2));
hdr_fmt = ['|%', int2str(col_w - fr_n - 1)', '.0f', char(' ' * ones(1, fr_n + 1))];
fprintf('Iteration:\n%s\n', hdr_line)
fprintf(hdr_fmt, 0:size(X, 2) - 1)
fprintf('\n%s\n', hdr_line)

% # Print values
data_fmt = [repmat(['|%', int2str(col_w - 1), '.', int2str(fr_n), 'f '], 1, size(X, 2)), '\n'];
fprintf(data_fmt, X') 
```

这里`X`表示您要打印的矩阵（不要忘记`X`在最后一行转置！）。和
的示例输出：`col_w = 10``fr_n = 4`

```
Iteration:
+----------+----------+----------+----------+----------+----------+----------+----------+----------
|    0     |    1     |    2     |    3     |    4     |    5     |    6     |    7     |    8     
+----------+----------+----------+----------+----------+----------+----------+----------+----------
|   0.0000 |   3.4000 |  -0.0556 |   1.3848 |   1.0250 |   0.9300 |   1.0558 |   0.9813 |   1.0034 
|   0.0000 |   4.0000 |   0.8603 |   2.1810 |   2.0329 |   1.9030 |   2.0453 |   1.9826 |   1.9997 
|   0.0000 |   2.5000 |   4.5444 |   2.1023 |   3.3195 |   2.9782 |   2.9513 |   3.0402 |   2.9831 
|   0.0000 |   2.0000 |   5.3463 |   3.5175 |   4.0772 |   4.0612 |   3.9463 |   4.0266 |   3.9939 
|   0.0000 |   6.7778 |   3.8111 |   5.4106 |   4.9648 |   4.9366 |   5.0513 |   4.9777 |   5.0046 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:02:02.513

首先请注意，命令窗口并非真正设计用于提供自定义输出。如果您想在每列上方显示一个带有数字的表格，变量查看器（通过双击工作区中的变量打开）可以做到这一点。

但是，如果您想在计算仍处于活动状态时打印结果，您可以查看其中之一：[打印格式化表格](http://www.mathworks.com/matlabcentral/fileexchange/33815-printing-a-formatted-table/)。答案就[在这里](http://www.mathworks.com/matlabcentral/answers/1892)。**

# javascript - 不正确的 JS 和 HTML

> ID：14019098
> 
> 赞同：0
> 
> 时间：2012-12-24T08:45:30.687
> 
> 标签：javascript, html

我对特定的 div 元素及其 id 有疑问。我想添加悬停链接样式，但如何做到这一点？我不是很明白。我的例子：

```
<a href="#" onmouseover="changeDiv('image_1')" onmouseout="defaultDiv('image_1')">Home</a> 
```

并且脚本处理样式的添加：

```
<script>
  function changeDiv('image_1'){
    document.getElementById('image_1').style.width="230px";
    document.getElementById('image_1').style.height="162px";
    document.getElementById('image_1').style.top="0px";
  }
</script> 
```

告诉我为什么这段代码对我的 id 不起作用`image_1`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:48:09.117

问题是您指定一个字符串文字而不是变量作为函数的参数，这将导致语法错误。

尝试将您的功能修改为以下内容：

```
<script>
function changeDiv(id){
  document.getElementById(id).style.width="230px";
  document.getElementById(id).style.height="162px";
  document.getElementById(id).style.top="0px";
}
</script> 
```

现在你可以在调用函数时将任何你想要的 id 传递给函数。

**缓存对元素的引用以提高性能：**

为了性能，你还可以将元素缓存在一个变量中，这样你就不必在 DOM 中查找 3 次了：

```
<script>
function changeDiv(id){
  var elm = document.getElementById(id);
  elm.style.width="230px";
  elm.style.height="162px";
  elm.style.top="0px";
}
</script> 
```

**同时修改多个元素：**

要同时修改多个元素，可以使用不同的参数多次调用该函数：

```
onmouseover="changeDiv('image_1'); changeDiv('image_2');" 
```

或者，您可以更改函数以获取具有元素 ID 的字符串数组。

```
<script>
function changeDivs(ids){
  for(var i = 0, len = ids.length; i < len; i++) {
     var elm = document.getElementById(ids[i]);
     elm.style.width="230px";
     elm.style.height="162px";
     elm.style.top="0px";
  }
}
</script> 
```

然后你可以这样称呼它：

```
onmouseover="changeDivs(['image_1', 'image_2'])" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:49:14.507

in function 属性必须是 var 而不是 string，例如，您必须调用此 var

```
function myfunc(d){ //d is varble
alert(d); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:29:52.657

尝试这个...

```
<a  href="#" >
    <div id='image_1' onmouseover="changeDiv('image_1')" onmouseout="defaultDiv('image_1')" style="width:100px; height:18px; border-style:ridge;">
    Home
    </div>
</a> 
```

如果您只想要鼠标悬停时的指针。**为测试
添加 DIV 边框... ** 为您的标签创建 ID。`border-style:ridge`

这个 JS 脚本

```
 function changeDiv(IDS){
      document.getElementById(IDS).style.width="230px";
      document.getElementById(IDS).style.height="162px";
      document.getElementById(IDS).style.top="0px";
  } 
```

# android - 2.3.3 android 的 CheckBox 按钮属性奇怪结果

> ID：14019102
> 
> 赞同：3
> 
> 时间：2012-12-24T08:45:43.063
> 
> 标签：android, android-checkbox

问题：为什么 2.3.3 中有多余的空间？

这是一个奇怪的行为，这就是为什么我认为我应该问。我的 xml 中有一个复选框，我有一个背景可以设置。所以我把背景放在它的按钮属性中。

像`android:button="@drawable/back_checkbox"`

其中 back_checkbox 只是具有选中/未选中状态的选择器

现在在 2.3.3 中： ![在此处输入图像描述](../Images/11dc57e910a263bf75de88b86626a161.png)

在 4.2 中： ![在此处输入图像描述](../Images/c8164e27955876ddf53d011a51123cf1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T13:05:33.253

请尝试**切换按钮**。

```
<ToggleButton
    android:id="@+id/toggleButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:background="@drawable/your_selector_xml"
    android:textOn=""
    android:textOff="" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:21:48.837

您必须在所有 xhdpi、hdpi、mdpi、ldpi 文件夹中以适当的大小检查和取消选中状态

# java - 没有继承可以实现多态吗？

> ID：14019108
> 
> 赞同：2
> 
> 时间：2012-12-24T08:46:34.480
> 
> 标签：java, oop, inheritance, polymorphism

> **可能重复：**
> [多态性是否可能没有继承](https://stackoverflow.com/questions/11732422/is-polymorphism-possible-without-inheritance)

我知道它可以通过方法覆盖（继承）和接口实现来完成。但是有没有其他可能的方法？准确地说，java中的重载可以被认为是一种多态性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:49:42.863

重载就像两个约翰有不同的爱好的比喻。他们只是有相同的名字，而不是相同的ID。因此，您不能将重载视为一种多态性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:50:35.207

重载就不一样了。多态性应用于具有相同签名的方法，而不仅仅是名称。重载创建具有不同签名的方法，因此它们不受多态性的影响。（当然，除非您覆盖子类中的重载方法。）

# google-maps - 从折线谷歌地图获取坐标

> ID：14019110
> 
> 赞同：6
> 
> 时间：2012-12-24T08:46:50.957
> 
> 标签：google-maps

这是我的代码

[http://jsfiddle.net/6KacA/](http://jsfiddle.net/6KacA/)

一切正常。我可以在地图上绘图，但我想获取我在地图上绘制的坐标。我怎么能在 api v3 上做到这一点？

PS对不起我的英语。

 `* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-24T10:40:27.110

绘图管理器有一个折线完成事件，观察它以访问折线（它将是提供给回调函数的第一个参数）。

然后使用[MVCArray](https://developers.google.com/maps/documentation/javascript/reference?hl=en#MVCArray)`polyline.getPath()`的方法访问路径并使用它

[**示例**：](http://jsfiddle.net/doktormolle/B7SWV/)

```
google.maps.event.addListener(drawingManager, 'polylinecomplete', function(line) {
  alert(line.getPath().getArray().toString());
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-24T00:14:17.093

您可以使用以下函数获取所有多段线坐标。

```
function getPathVariableCode(line){
var codeStr = '  var linePath = [\n';
var pathArr = line.getPath();
for (var i = 0; i < pathArr.length; i++){
    codeStr += '    {lat: ' + pathArr.getAt(i).lat() + ', lng: ' + pathArr.getAt(i).lng() + '}' ;
    if (i !== pathArr.length-1) {
        codeStr += ',\n';
    };

};

codeStr += '\n  ];';

//the coordinates path it´s print on the console of the browser

console.log (codeStr);
console.log(pathArr.length);

}; 
```

这就是你调用函数的方式

```
 line.addListener('click', function () {
 getPathVariableCode(line);
 }); 
```

然后您只需单击一个点即可在控制台浏览器上生成坐标

------------ 这是完整的代码 ---------

```
var map;
function initialize() {

    //Map options
   var mapOptions = {
	zoom: 7,
    center: new google.maps.LatLng(18.075464, -94.012622),
    mapTypeId: google.maps.MapTypeId.TERRAIN,
    scaleControl: false,
    mapTypeControl: false,
    zoomControl: false,
    draggable: true,
    disableDoubleClickZoom: true,
    keyboardShortcuts: false,

  }
    //map canvas
  map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions );
   //coordinates por the polyline
  var linePath = [
    {lat: 18.068652, lng: -94.25055299999997},
    {lat: 16.766951, lng: -93.31531000000001}
  ];
    //Polyline Options
  var line = new google.maps.Polyline({
    path: linePath,
    geodesic: true,
    strokeColor: '#ff0000',
    strokeOpacity: 0.4,
    strokeWeight: 8,
	editable: true // if you dont want to see the editable point change it to false
  });

     //call to the path coordinates function

  line.addListener('click', function () {
     getPathVariableCode(line);
 });
    //set map
 line.setMap(map);
 };

//here we call the initialize function which load the map
google.maps.event.addDomListener(window, 'load', initialize);

//function to get all the coordinates of the polyline
function getPathVariableCode(line){
	var codeStr = '  var linePath = [\n';
	var pathArr = line.getPath();
	for (var i = 0; i < pathArr.length; i++){
		codeStr += '    {lat: ' + pathArr.getAt(i).lat() + ', lng: ' + pathArr.getAt(i).lng() + '}' ;
        if (i !== pathArr.length-1) {
			codeStr += ',\n';
		};

	};

	codeStr += '\n  ];';

    //the coordinates path it´s print on the console of the browser

    console.log (codeStr);
    console.log(pathArr.length);

}; 
```

```
#map_canvas {
    width: 90%;
    height: 300px;
    margin: 0 auto;
    border: 1px solid grey;
    border-radius: 5px;
    box-shadow: 0px 0px 8px #999;
    color: black;
    text-align: center;
}
```

```
<!DOCTYPE html>
<html lang="en">

<head>

</head>

<body>
    <div class="container">
        <!-- Push Wrapper -->
        <div class="mp-pusher" id="mp-pusher">

            <!-- /scroller-inner -->

            <div id="map_canvas"></div>

        </div>

        <!-- /pusher -->
    </div>
    <!-- /container -->

    <script type="text/javascript"
      src="http://maps.google.com/maps/api/js?sensor=false&libraries=drawing"></script>

</body>

</html>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-21T12:20:38.360

尝试这个

```
 myfile.csv:

    -6.9906775;38.0667982
    -6.9906474;38.0666109
    -6.9904324;38.0663124
    ...

    var coordsList= [];
    $.ajax({
            type: "GET",
            url: "myfile.csv",
            dataType: "text",
            success: function(data) {                    
                var allTextLines = data.split(/\r\n|\n/);
                allTextLines.forEach(function(element) {
                    var entry = element.split(';');
                    coordsList.push({lat: entry[0]*1, lng: entry[1]*1});
                });
                console.log(coordsList);
            }
        });

    var myArea = new google.maps.Polygon({paths: coordsList}); 
````

# java - GridView 项目的标签仅在可见时应用？

> ID：14019111
> 
> 赞同：0
> 
> 时间：2012-12-24T08:46:51.090
> 
> 标签：java, android, gridview

我有一个可滚动的 GridView：只有在向下滚动 GridView 之后才会显示一些项目。我们可以看到其他项目。问题是，我正在为 GridView 中的所有项目设置标签，但是通过跟踪 LogCat 我知道它不接受为 GridView 中的不可见项目设置标签（我的意思是项目在网格内，但当时不在屏幕上）

滚动前：

![开始画面](../Images/614464cd34d9ae347fd6ff41d8680094.png)

滚动后：

![滚动后](../Images/e8cf96c09d873888cf5f90afe525df53.png)

只有在向下滚动其他项目之后才会应用标签。

如何为网格的所有项目设置标签，即使它们在屏幕上或屏幕外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:30:54.303

您的问题是您在方法中设置了 Tag`getView`并且该方法仅在需要显示视图时由框架调用。

不知道您需要对视图标签做什么，但我认为与其尝试从未显示的视图中获取数据，不如从 ImageAdapter ( `ia.imageid[]`) 中获取数据。

**编辑：**

要更准确地回答您的问题：

> 如何为网格的所有项目设置标签，即使它们在屏幕上或屏幕外？

只要视图在不显示时并不总是存在：你不能这样做。

我建议您解释为什么需要这些标签......也许您可以使用替代解决方案而不是查看标签来满足您的最终需求。

无论如何，如果您确实需要在视图上显示尚未显示的标签：

1.  `onCreate`在方法中初始化一个视图数组。
2.  使用您的所有视图填充此数组（并设置标签）
3.  修改`getView`适配器的方法以从视图数组返回视图，而不是创建视图。

请注意，我不推荐此解决方案，因为它会消耗更多资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:48:48.420

最后我自己得到了我的问题的解决方案。感谢所有提出宝贵建议的人。谢谢@ben75

> 我检查了当前单击项目的位置，然后应用了标签，所以如果用户想要选择当前不在焦点上的项目，他必须滚动网格，然后必须选择项目，然后只应用标签.

# php - 使用 jQuery 防止表单提交

> ID：14019113
> 
> 赞同：2
> 
> 时间：2012-12-24T08:47:00.220
> 
> 标签：php, jquery, joomla2.5

我正在使用 jquery 验证我的表单，如下所示：

```
jQuery(document).ready(function(){
        jQuery('#adminform').validate({

        rules: {
          name: {
            minlength: 5,
            maxlength: 30,
            required: true
          },
          username: {
            required: true,
            minlength: 5,
            maxlength: 30
          }
        },
        highlight: function(label) {
            jQuery(label).closest('.control-group').addClass('error');
        },
        success: function(label) {
            label
                .text('OK!').addClass('valid')
                .closest('.control-group').addClass('success');
        },
        messages:{

          name: {
            required: "Enter your name"
          },
          username: {
            required: "Enter a username"
          } 
       }
      });     
}); 
```

现在如果不符合规则，我应该如何防止表单提交？

当我单击提交按钮时，什么都不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T08:57:40.187

`Prevent form submission using jQuery?`

```
$('#myFormId').submit(function(event) {
     event.preventDefault();
 }); 
```

或者：

```
$('#myFormId').submit(function()
{
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T08:49:02.707

要停止提交表单，请使用：

```
return false; 
```

当您知道输入无效时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:54:57.017

阻止提交事件并留在屏幕上

```
e.preventDefault(); 
```

那这个呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:48:21.367

您的代码很完美，只需一个提交触发器：http: **[//jsfiddle.net/uUdWN/](http://jsfiddle.net/uUdWN/)**

```
jQuery(document).ready(function() {
jQuery('#adminform').validate({
    rules: {
        name: {
            minlength: 5,
            maxlength: 30,
            required: true
        },
        username: {
            required: true,
            minlength: 5,
            maxlength: 30
        }
    },
    highlight: function(label) {
        jQuery(label).closest('.control-group').addClass('error');
    },
    success: function(label) {
        label.text('OK!').addClass('valid').closest('.control-group').addClass('success');
    },
    messages: {
        name: {
            required: "Enter your name"
        },
        username: {
            required: "Enter a username"
        }
    }
});

$("#adminform").submit(); // <-------------just triggered submit

}); 
```

# jquery - 为jquery ui时间选择器动态设置hourMin，miniteMin vales

> ID：14019114
> 
> 赞同：1
> 
> 时间：2012-12-24T08:47:00.303
> 
> 标签：jquery, jquery-ui-timepicker

如何为 jquery ui 时间选择器动态设置 hourMin、miniteMin 值，例如如果日期是今天，我希望允许用户仅在当前时间上方进行选择，如果日期大于当前日期，则允许用户从 0 到 23 小时进行选择。

我试过这段代码但没有工作

```
 $('#test1').timepicker({
            hourMin: 0,
            hourMax: 23
        });
        $("#test").datepicker({
            dateFormat: 'dd/mm/yy',
            onSelect:function(selectedDate){
                if(selectedDate == $.datepicker.formatDate('dd/mm/yy', new Date())){
                    $('#test1').timepicker('option','hourMin', new Date().getHours());
                }else{
                    $('#test1').timepicker('option','hourMin', 0);
                }
            }
        }); 
```

如果这个插件有任何问题，任何人都可以推荐最适合我要求的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T16:55:53.207

如果这个（http://trentrichardson.com/examples/timepicker/）是您正在使用的插件，那么是的，有一个选项。

[http://trentrichardson.com/examples/timepicker/#rest_examples](http://trentrichardson.com/examples/timepicker/#rest_examples)

```
var nowDate = new Date();
$('#rest_example_3').datetimepicker({
    minDate: new Date(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate(), nowDate.​getHours(),nowDate.getMinutes(), nowDate.​​​​​​​getSeconds(), 0)
}); 
```

您可以设置 minDateTime（或 minDate）来实现您想要的。

**编辑：** 在运行时重置日期选择器启动的示例解决方案（hack）：

**Javascript：**

```
 function initDP()
        {
            var nowDate = new Date();
            $('#dpField').datetimepicker({
                minDate: new Date(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate(), nowDate.getHours(), nowDate.getMinutes(), 0, 0)
            });
        }

        function resetDP()
        {
            $('#dpField').die();
            $('#dpField').remove();
            $('#parentId').append('<input type="text" id="dpField" />');
            initDP();
        }
        $(document).ready(function()
        {
            initDP();

            $('#resetDate').click(function(){
                resetDP();
            });
        });

    </script> 
```

**html:**

```
<body>
<div id="parentId">
    <input type="text" id="dpField" />
</div>
<button id="resetDate">Reset DP</button>

</body> 
```

# javascript - 想要在页面 url 更改时设置警报

> ID：14019115
> 
> 赞同：1
> 
> 时间：2012-12-24T08:47:10.563
> 
> 标签：javascript, asp.net, c#-4.0, webpage

当用户尝试通过导航到另一个页面或更改 url 离开页面时，如何调用事件？我尝试了以下方法，但它不起作用。

```
 protected void Page_Unload(object sender, EventArgs e){}

 protected override void OnUnload(EventArgs e){} 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:05:05.283

您可以在 jquery 中使用 bind 属性。您可能还想忽略警告，为此只需创建一个变量并在您希望忽略警告时设置它。

包含[JQuery 库](http://jquery.com/)

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

之后，您可以将以下 javascript 添加到您的页面。

```
<script type="text/javascript">
var ignore = false;

$(function () {
    $(window).bind('beforeunload', function () {
        if (!ignore) {
            return 'WARNING: Data you have entered may not be saved.';
        }
    });

    $('.ignorepostback').live('click',function () {
        ignore = true;
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:52:13.453

你不能做那个服务器端。

你可以尝试在客户端实现一些东西，例如通过连接窗口的卸载事件。或者通过使用jquery中的[卸载处理程序](http://api.jquery.com/unload/)

```
$(window).unload(function() {
  alert('Do not bug users with alerts or try to keep them on your site');
}); 
```

请记住，一般用户不喜欢在他们决定离开时给他们带来麻烦的网站......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:53:14.647

通过 javascript ，您可以使用`onbeforeunload`

```
window.onbeforeunload = function(e) {
  return 'Dialog text here.';
}; 
```

# android - 使用 Android Maps API V2 获得两点之间的旅行距离（步行、驾车）的最佳方法是什么？

> ID：14019116
> 
> 赞同：0
> 
> 时间：2012-12-24T08:47:10.590
> 
> 标签：android, api, maps

有 Location.distanceBetween 方法，但这只是直线。我也研究了谷歌距离矩阵 API，但这似乎相当复杂，尽管它会给我我需要的信息。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T06:09:58.640

据我所知，没有。Distance Matrix 是 Google 提供的唯一一项可以为您提供所需信息的服务（汽车、步行、自行车两点之间的距离）。

用法很简单。我已经多次使用它（JSON）并且效果很好。这是获取距离的代码：

```
String sDistance = "";

            try
            {
                URL googleDMatrix = new URL("http://maps.googleapis.com/maps/api/distancematrix/json?origins="
                        + URLEncoder.encode(params[6].toString(), "UTF-8") + "&destinations="
                        + URLEncoder.encode(params[7].toString(), "UTF-8") + "&language=en-GB&sensor=false&units=imperial");
                URLConnection tc = googleDMatrix.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(tc.getInputStream()));

                String line;
                StringBuffer sb = new StringBuffer();
                // take Google's legible JSON and turn it into one big string.
                while ((line = in.readLine()) != null)
                {
                    sb.append(line);
                }

                // turn that string into a JSON object
                JSONObject main = new JSONObject(sb.toString());
                // now get the JSON array that's inside that object

                JSONArray rows_array = new JSONArray(main.getString("rows"));
                JSONObject elements_object = rows_array.getJSONObject(0);
                JSONArray elements_array = elements_object.getJSONArray("elements");
                JSONObject distance_object = elements_array.getJSONObject(0);
                JSONObject distance = distance_object.getJSONObject("distance");

                double dist = (distance.getDouble("value") / 1E3) * 0.62;

                sDistance = Double.toString(dist);
            }
            catch (Exception e)
            {
                sDistance = "0";
                e.printStackTrace();
            } 
```

这里可能有一些额外的东西，因为这直接来自我的项目。 **params[6] params[7]**是计算距离的两个点。

# php - 搜索字符串（变量匹配）并打印

> ID：14019119
> 
> 赞同：4
> 
> 时间：2012-12-24T08:47:53.653
> 
> 标签：php, string, variables, search

我想从文本中搜索一个数字`DB`并打印出来。数字是产品代码，从 4 到 6 位不等。

例子：

```
aaaaa 1234 aaaa
aaaaa 123456 aaaaa
aaaaa 12345 aaaaa 
```

我得到的是一个与 5 个数字完全匹配的数组，但不变化也不打印：

```
$string = $sql['products_description'];
preg_match_all('/(?<![0-9])[0-9]{5}(?![0-9])/', $string, $match);
for ($i=0; $i<10; $i++) {
   echo $match[$i];
   echo '<br>';
} 
```

有什么帮助吗？

编辑：我得到了这个密切合作：

```
$string = $sql['products_description'];
preg_match_all('#\d{4,6}#', $string, $matches);
foreach ($matches as $match) {
  print_r($match);
} 
```

但返回类似：

> 数组（[0] => 1234 [1] => 123456 [2] => 12345）

我纯粹需要它们（而不是在数组中），因为我以后必须单独使用每个数字。在这种情况下，如何提取每个元素并打印出来？

解决方案：

```
$var = array();
preg_match_all('#\d{4,6}#', $string, $matches);
foreach ($matches as $match) {
$var[] = $match;
}

for ($i=0; $i<=count($matches[0]); $i++) {
  for ($j=0; $j<=count($matches[0]); $j++) {
    if (($var[$i][$j]) != '') {
      print_r($var[$i][$j]);
      echo '<br>';
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:59:05.400

试试这个代码：

```
preg_match_all('!\d+!', $str, $matches);
print_r($matches); 
```

编辑：

```
preg_match_all('/[456]/', $str, $matches);
$var = implode('', $matches[0]);
print_r($var) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:13:43.897

```
 preg_match_all('!\d+!', $str, $matches);
     print_r($matches);
     $digit=$matches[0][0];
     $digit=(int)$digit;
     echo $digit; 
```

你会这样得到你的号码..

**编辑#1**

* * *

```
 print_r($matches[0]);
  //Output :
        Array
          (
            [0] => 1234,
            [1] => 123456,
            [2] => 1234

           )
  echo implode("",$matches[0]);
    //Output: 12341234561234 
```

* * *

**编辑#2**

* * *

```
 $var1=$matches[0][0];
   $var2=$matches[0][1];
   $var3=$matches[0][2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:06:23.193

如果您确定它们的长度在 4 到 6 之间：

```
$string = $sql['products_description'];
preg_match_all('#\d{4,6}#', $string, $matches);
foreach ($matches as $match) {
  echo $match;
} 
```

我只修改了模式和for循环。

如果您想要“纯粹”，请编辑：

```
$string = $sql['products_description'];
$var = array();
preg_match_all('#\d{4,6}#', $string, $matches);
foreach ($matches as $match) {
  $var[] = $match;
} 
```

# android - Android Listview 替换字符串

> ID：14019122
> 
> 赞同：-1
> 
> 时间：2012-12-24T08:48:23.670
> 
> 标签：android

> **可能重复：**
> [Android 替换字符串](https://stackoverflow.com/questions/14018950/android-replace-strings)

下面是我的列表视图。数据从 sdcard 收集并列在列表视图中。但是从 sdcard 中检索到的文件名以“.txt”结尾 如何从列出的文件名中删除“.txt”？

```
mainListView = (ListView) getActivity().findViewById( R.id.mainListView );

            myList = new ArrayList<String>();

                File sdCard = Environment.getExternalStorageDirectory();
                file = new File(sdCard.getAbsolutePath() + "/St/") ;       
                File list[] = file.listFiles();

                for( int i=0; i< list.length; i++)
                {
                        myList.add( list[i].getName() );
                }

                listAdapter = new ArrayAdapter<String>(getActivity(),R.layout.simplerow, myList);

                mainListView.setAdapter( listAdapter );  

                mainListView.setOnItemClickListener(new OnItemClickListener() {
                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        // TODO Auto-generated method stub
                        String textToPass = myList.get(position);
                                Intent i = new Intent(getActivity(), ViewActivity.class);                      
                                i.putExtra("textToPass", textToPass);
                                startActivity(i);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:56:17.320

`".txt"`检索文件名时替换它，然后将其设置在列表中。

```
 for( int i=0; i< list.length; i++)
     {
         String fileName = list[i].getName();
         if(fileName.contains(".txt")){
              fileName = fileName.replace(".txt", "");
         }
         myList.add( fileName );
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T08:57:03.523

我会使用 Java String Substring 方法。

在此处查看该方法和其他字符串方法。 [http://www.tutorialspoint.com/java/java_strings.htm](http://www.tutorialspoint.com/java/java_strings.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:00:05.443

试试下面的代码，它一定对你有帮助

```
if(list[i].getName().equalsIgnoreCase(".txt")){

    String[] strrwmoverar=list[i].getName().toString().split("//.");
     myList.add( strrwmoverar[0] );
 }
else{

      myList.add( list[i].getName() );
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:13:26.030

myList.add(list[i].getName().replaceAll("\.txt$", ""));

# css - PNG 序列到 Sprite 的转换

> ID：14019123
> 
> 赞同：1
> 
> 时间：2012-12-24T08:48:40.433
> 
> 标签：css, animation, sprite

有没有现成的软件可以将PNG序列转换为精灵？我知道很多网站都做同​​样的事情，但由于 NDA，我们无法将图像序列上传到第三方网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T08:53:32.773

这是另一种可能的选择（我不确定“PNG序列”到底是什么，但我认为这可能适用于您的情况）。[https://gamedev.stackexchange.com/questions/27214/is-there-a-tool-to-make-a-spritesheet-out-of-1000-pngs](https://gamedev.stackexchange.com/questions/27214/is-there-a-tool-to-make-a-spritesheet-out-of-1000-pngs)

# iphone - 一年中最后一周的 NSDateComponents 周组件

> ID：14019126
> 
> 赞同：5
> 
> 时间：2012-12-24T08:49:10.337
> 
> 标签：iphone, ios, nsdatecomponents

一年有几个星期？因为我在网上搜索过，发现一年总共有 52.1 周，但如果我在 Xcode 中这样做：

```
NSCalendar *gregorian = [[NSCalendar alloc]
                         initWithCalendarIdentifier:NSGregorianCalendar];

[gregorian setFirstWeekday:2];

NSDate* sourceDate = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;

NSDate* today = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate];

NSDateComponents *todaysComponents = [gregorian components:NSWeekCalendarUnit fromDate:today];

NSUInteger todaysWeek = [todaysComponents week]; 
```

todaysWeek 值为：**53**，这怎么可能？为什么不是52？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:03:52.980

他们将 52.1 转换为 53... 显示比截断小数部分更好。

这也取决于一周的开始日期。

欧洲和 ISO 标准（从周一到周日）——总共 52 周，短周（1 天）占 1 月 1 日星期日，短周（1 天）占 12 月 31 日星期一54 周。

美国标准（从周日到周六）- 52 整周，以及 12 月 30 日和 31 日的短（2 天）周，总共 53 周。

从周六到周五——51 个整周，一个短周（6 天）从 1 月 1 日到 1 月 6 日，一个短周（3 天）从 12 月 29 日到 12 月 31 日，总共 53 周。

编辑：

由于 iOS NSCalender 似乎将 ISO 8601 定义为默认值。您需要使用“setMinimumDaysInFirstWeek”方法设置日历以获得预期的周数结果。

请添加此代码并检查

```
 [gregorian setMinimumDaysInFirstWeek:5]; //"5" means Thursday in this case. 
```

[http://en.wikipedia.org/wiki/ISO_week_date](http://en.wikipedia.org/wiki/ISO_week_date) “一年的第一周是包含一年中第一个星期四的那一周。”

编辑2：

用于检查一年中可能的最小/最大周数

```
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
int minWeeks, maxWeek;
minWeeks=maxWeek=0;
for (int weekCounter=1; weekCounter<=7; weekCounter++) {
    [gregorian setMinimumDaysInFirstWeek:weekCounter];
    [gregorian setFirstWeekday:2];
    NSDate* sourceDate = [NSDate date];
    NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];
    NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
    NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
    NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;
    NSDate* today = [[NSDate alloc] initWithTimeInterval:interval sinceDate:sourceDate];
    NSDateComponents *todaysComponents = [gregorian components:NSWeekCalendarUnit fromDate:today];
    NSUInteger todaysWeek = [todaysComponents week];

    if (todaysWeek>maxWeek) {
        maxWeek=todaysWeek;
    }
    if (todaysWeek<minWeeks || minWeeks==0) {
        minWeeks=todaysWeek;
    }
}
NSLog(@"min:%d, max:%d", minWeeks, maxWeek); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:05:09.510

您可以尝试以下代码吗？

```
NSDate *date = [NSDate date];
NSDateFormatter *weekFormatter = [[NSDateFormatter alloc] init];
[weekFormatter setDateFormat:@"w"];
NSString *weekDateString = [weekFormatter stringFromDate:date];
NSLog(@"week = %@",weekDateString);
[weekFormatter release]; 
```

您可以使用上面的代码获取一年中的周数。但该数字基于当前的日历和区域设置。

# jsf-2 - 在 JSF（Primefaces）中使用 Servlet 过滤器检查授权时如何打开弹出窗口或消息或咆哮

> ID：14019129
> 
> 赞同：0
> 
> 时间：2012-12-24T08:49:41.230
> 
> 标签：jsf-2, primefaces, popup, servlet-filters, growl

我正在为学校做一个项目。我正在使用 JSF 和 Primefaces。但是在 JSF 项目中调用 HTML5 文件时使用 Servlet 过滤器检查授权。因为 JSF 不支持 HTML5。项目有一个 HTML5 页面。必须登录才能到达此页面。但是，在未登录的情况下调用 HTML5 文件时，我无法打开弹出窗口、消息或咆哮。

我可以在 LoginFilter 中使用 FacesMessage 吗？

代码：

```
@WebFilter(urlPatterns = {  "/design.html" , "/demodesign.html" } )
public class LoginFilter implements Filter{
@Override
public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain chain) throws IOException, ServletException {

    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;
    HttpSession session = request.getSession(false);

    UserBean userBean = (UserBean) ((session != null) ? session.getAttribute("userBean") : null);
    User member = null;

    if ( !(userBean == null) )
        member = userBean.getMember();

    if (member != null) {
        chain.doFilter(request, response);
    } else {
        response.sendRedirect(welcomeURL);
    }

}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:21:03.077

> *因为 JSF 不支持 HTML5*

这完全是胡说八道。JSF 只是一个 HTML 代码生成器。它可以毫无问题地生成合法的 HTML5 代码。`<canvas>`您可以像在 JSF 页面中一样放置“普通的”HTML5 元素。它只会松开它并按原样输出。JSF 可以为您做的更多事情就是将它包装在一个自定义/复合组件`<my:canvas>`中，这样提交的值就会立即更新为 bean 属性，并且您可以执行验证并在其上附加侦听器，而无需任何额外的努力。

只需将这些 HTML 文件重命名为`.xhtml`并`*.xhtml`在`FacesServlet`. 这样您就可以在那些所谓的 HTML5 页面上使用 JSF 组件。

### 也可以看看：

*   [是否可以在 HTML 4/5 中使用 JSF+Facelets？](https://stackoverflow.com/questions/2935759/is-it-possible-to-use-jsffacelets-with-html-4-5)

# html - 中间有加号图像的水平条？

> ID：14019132
> 
> 赞同：0
> 
> 时间：2012-12-24T08:49:55.910
> 
> 标签：html, css

我正在设计一个页面，该页面需要一个带有加号图像的水平条在中心。比如这个， ![在此处输入图像描述](../Images/b72150effd034cb4eb5640b80229fd73.png)

我试过这个，

```
<div><img src="http://s7.postimage.org/z6jiogw6f/add_icon.png" /></div>

div{
    background: #ced8e7;
    padding: 1px 0;
    position: relative;
    text-align: center;
    overflow-x: hidden;
} 
```

但是条形图不是圆形的，而且图像完全在条形图内部。任何人都可以帮忙吗？示例，[http://jsfiddle.net/PSAEJ/](http://jsfiddle.net/PSAEJ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:04:20.200

试试这个，它会工作测试：

**更新：** [jsbin 演示](http://jsbin.com/amaluk/6/watch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:10:06.737

这应该对你有用：你只需要将你的 img 标签包装到另一个`<div>`

[http://jsfiddle.net/ZkDXA/2](http://jsfiddle.net/ZkDXA/2)

编辑：如果你不喜欢，你真的不需要额外`div`的。另一个例子[http://jsfiddle.net/ESt84/](http://jsfiddle.net/ESt84/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T09:40:52.183

将溢出属性设置为可见或删除（默认`overflow: visible`）并为您的图像提供 -ve 边距

```
div {
    background: #ced8e7;
    padding: 1px 0;
    position: relative;
    text-align: center;
    height: 7px;
    margin-top: 5px; }

img {
    margin-top: -7px; } 
```

更新**了 jsfiddle**：http: [//jsfiddle.net/PSAEJ/10/](http://jsfiddle.net/PSAEJ/10/)

# ruby - 编写模拟器并需要能够在 Ruby 中引用方法/函数

> ID：14019137
> 
> 赞同：1
> 
> 时间：2012-12-24T08:50:11.900
> 
> 标签：ruby

我正在用 Ruby 为一个相对简单的 6502 处理器编写一个模拟器。

我的问题是，有没有办法用汇编指令的详细信息定义散列或数组，然后是它需要的操作数数量，最后是实现它的方法/函数？

然后在代码的某个地方，可以根据读取的指令评估哈希或数组，并且可以启动为其实现的适当方法/函数？

我对想法持开放态度...

目前，我有这样的结构，但在实现它时遇到了困难：

```
@inst.push [ 0x48, :implied, 1, PHA]
@inst.push [ 0xA2, :immediate, 2, LDX ]
@inst.push [ 0xA9, :immediate, 2, LDA ]
@inst.push [ 0xAD, :absolute, 3, LDA ]
@inst.push [ 0xA6, :zeropage, 2, LDX ]
@inst.push [ 0xB6, :zeropagey, 2, LDX ]
@inst.push [ 0xAE, :absolute, 2, LDX ]
@inst.push [ 0xBE, :absolutey, 2, LDX ]
@inst.push [ 0x8A, :implied, 1, TXA ] 
```

Lambdas，Procs？像这样的事情可以实现我在这里实现的目标吗？

我真的不希望每条指令都有一个大的“案例/时间”，然后是一个巨大、丑陋且相对不友好的地方的陈述。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:10:45.723

如果您的指令作为方法实现，则不需要 lambda。使用带有名称的符号指定方法，使用获取实际方法`Class#method`并使用 调用它`Method#call`。我的意思是

```
method = Object.method :puts
method.call "Oh, it seems to work!" 
```

在你的情况下，它会是

```
implementation = Instructions.method instruction_name
# Store it in a hash in which instruction names are keys or any other
# appropriate data structure. Once you encounter this instruction...
implementation.call 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:48:09.497

您可以使用`send`调用对象上的任何方法

```
>> a = [1,2,8]
=> [1, 2, 8]
>> a.send(:size)
=> 3
>> a.send(:pop)
=> 8
>> a
=> [1, 2]
>> a.send(:push,42)
=> [1, 2, 42] 
```

所以只需将实现您的指令的方法的名称作为符号存储在数组中，然后将符号发送给解释器以调用关联的方法。

# asp.net - 下拉和 jquery-ui 对话框的问题

> ID：14019138
> 
> 赞同：1
> 
> 时间：2012-12-24T08:50:16.253
> 
> 标签：asp.net, jquery-ui

我有一个页面，其中包含来自 jQuery UI 库的`dropdown`列表和组件。`Dialog`

但问题是`dropdown`列表出现`dialog box`在 IE7 中。在 chrome、Mozilla Firefox 中它工作正常。

这是jquery的代码： -

```
var divdialog = $('#divdialog'); divdialog.dialog('destroy');
    divdialog.dialog({
        autoOpen: true,
        height: 310,
        width: 570,title: "Look Up",
        modal: true,
        open: function () {$('#testframe').attr("src", strValue);
        $('#testframe').height($(this).height()-5); $('#testframe').width($(this).width()-10);         
            },
        close: function (e) {
            $('#divdialog').remove();
            //divdialog.html('');
           // divdialog.dialog('destroy');
            },
        resizable: true,
        resize: function() { $('#divdialog iframe').hide(); },
        resizeStop: function() { $('#divdialog iframe').show(); 
        $('#divdialog iframe').height($(this).height()-10);  
        $('#divdialog iframe').width($(this).width()-10); } ,
        closeOnEscape:true,
        draggable:true
    }) 
```

这是 UI 的代码：-

```
 <div id="divdialog" style="display:none;">
             <iframe id="testframe" frameborder="0" title="dialogBox"><p>not supportted iframe</p></iframe>
    </div>

<asp:DropDownList  ID="ddlRoleNames" runat="server" Width="180px" 
                                    OnSelectedIndexChanged="ddlRoleNames_SelectedIndexChanged" AutoPostBack="true">
                                </asp:DropDownList> 
```

![在此处输入图像描述](../Images/402309cc18b9ed7cdcb28295edf4c24e.png)

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:00:33.137

这可能是因为 Z-index，为什么因为即使您的元素的 z-index 为 1000，如果两者都不在 Z-index 为 1 的元素下方，该元素也有可能位于相同的堆叠上下文。

因此，请尝试在下拉列表中将位置设为绝对位置并告诉我。

看看下面的问题也可能有帮助

[IE7 Z-Index 分层问题](https://stackoverflow.com/questions/1287439/ie7-z-index-layering-issues)

希望这可以帮助

# android - GridView，每个单元格中都有一组数据

> ID：14019140
> 
> 赞同：1
> 
> 时间：2012-12-24T08:50:31.993
> 
> 标签：android, gridview, android-adapter

我有一个`GridView`给学生的，我想我用一个学生的名字填满每个单元格，在每个`GridCell`有名字的学生中，他也得到了他在同一个单元格中全年获得的所有分数。所以在我喜欢的每个单元格中：

一个`gridview`

```
 -------------------------------
 |   student 1    |   student 2  |
 |                |              |
 |   a listview   |              |
 | or scrollview  |  a listview  |
 |    ----------  |  ----------- |
 |    english A   |   english B  |
 |    math    A   |   math    A  |
 |    history A   |   history E  |
    ----------------------------- 
```

和当前的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/senaryolar_grid"
    android:layout_width="166dp"
    android:layout_height="210dp"
    android:padding="3dp"
    android:background="@color/white">
    <RelativeLayout 
        android:layout_width="166dp"
        android:layout_height="32dp"
        android:background="@drawable/senaryobaslik"
        android:id="@+id/senaryo_baslik">
        <TextView android:layout_width="100dp" 
            android:layout_height="wrap_content" 
            android:id="@+id/senaryo_baslik_tv"
            android:textColor="@color/white"
            android:layout_marginLeft="4dp"
            android:textStyle="bold" />
        <ImageView 
            android:id="@+id/senaryo_baslik_iv" 
            android:src="@drawable/arti" 
            android:layout_width="22dp"
            android:layout_height="18dp"
            android:layout_toRightOf="@id/senaryo_baslik_tv"/>
    </RelativeLayout>
    <ScrollView 
        android:layout_height="50dp"
        android:layout_width="fill_parent"
        android:id="@+id/senaryo_scrollview"
        android:layout_below="@id/senaryo_baslik">
        <LinearLayout android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            android:id="@+id/senaryo_scroll_ll">
        </LinearLayout>
        </ScrollView>
</RelativeLayout> 
```

所以我的问题是我尝试在我的函数中生成这些`listviews`或`scrollview`（都尝试过） ，因为我不知道该函数称为 looot 时间，而它是由函数生成的，所以我尝试将生成器放在函数中，但它没有工作和我得到了，我的问题是：“我应该在哪里打电话给我的？” 如果我不能调用它，根据学生 ID 在我的内部动态创建它？`getView()``gridview``getView()``gridview``getview()``getView()``outofmemoryexception``listview adapter``gridview``getview()`

我现在的`gridviewadapter`:(我只是把 this`gridviewadapter`的`getview()`函数和上面的 xml 代码告诉你我想做什么，但请注意，这不是做我想做的事情的正确方法）

```
public View getView(int position, View grid, ViewGroup parent) {
    if(grid == null){
        grid=layoutInflator.inflate(R.layout.senaryolar_grid, null);
    }
    ArrayList<ControlItem> senario_devices = new ArrayList<ControlItem>();
    // here think like senario_id is student_id
    int senario_id = samples_senario.get(position).getSenarioId();
    // here think like getSenarioDevices is getStudentMarks 
    senario_devices = dbhelpit.getSenarioDevices(senario_id); 
    int senario_device_size = senario_devices.size();
    TextView tv_senario;
    ImageView iv_senario;
    // I tried scrollview too since I thought listview adapters created outof memory exception but off course didnt work since its not the main problem
    ScrollView lv_senario;
    tv_senario = (TextView) grid.findViewById(R.id.senaryo_baslik_tv);
    iv_senario = (ImageView) grid.findViewById(R.id.senaryo_baslik_iv);
    lv_senario = (ScrollView) grid.findViewById(R.id.senaryo_scrollview);
    tv_senario.setText(samples_senario.get(position).getSenarioName());
    int i = 0;
    LinearLayout ll = (LinearLayout) grid.findViewById(R.id.senaryo_scroll_ll);
    while(i < senario_device_size){
        View temp = layoutInflator.inflate(R.layout.senaryolar_listview, null);
        TextView tv;
        ImageView iv;
        RelativeLayout rl;
        iv = (ImageView) temp.findViewById(R.id.senaryo_list_baslik_iv);
        rl = (RelativeLayout) temp.findViewById(R.id.senaryolar_list);
        tv = (TextView) temp.findViewById(R.id.senaryo_list_text_tv);
        tv.setText(senario_devices.get(position).getDeviceName());
        ll.addView(rl);
        i++;
    }
    return grid;
} 
```

因此，如果您有一个网格视图适配器，并且您想`listViewAdapter`在每个网格单元格中创建一个，`listViewAdapters`当您无法调用`getView()`函数时，您可以调用它们，它不必是 a `listview`，它可以只是一个纯 while 回声结果就像一个`array`，我希望问题很清楚。谢谢！

# javascript - 如何使用 css 让图像在中间使用光标调整大小？

> ID：14019142
> 
> 赞同：1
> 
> 时间：2012-12-24T08:50:44.393
> 
> 标签：javascript, css, layout, drag-and-drop, draggable

我使用拖放功能，当我将图像拖到另一个 div 时，它会调整图像的大小，请参见下面的代码。但是它相对于原始图像调整到左角，因此光标和图像位于不同的位置，这让用户感到困惑。有没有办法让图像调整大小并保持相对于光标的位置，或者将图像居中，光标在中间？

这是我现在使用的 CSS 代码：

```
.Skin .PGR .DragAndDrop .stack div ul li.stack span label {
    width: 200px;
    height: 255px;
}
.Skin .PGR .DragAndDrop .stack div ul li.stack span label img {
    width: 200px;
    height: 255px;
    visibility: visible;
}
.Skin .PGR .DragAndDrop .stack .Group li.stack span.rank {
    visibility: hidden;
}
.Skin .PGR .DragAndDrop .stack div.Group ul li span img {
    width: 177px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:50:40.263

如果我理解你想要做什么，这样的事情应该可以工作。基本上，您只需要获取鼠标坐标，然后将图像的位置设置为鼠标坐标减去宽度/高度的一半即可将其居中。希望这可以帮助！

```
 window.onload = track;
 var mouseX, mouseY;
 function track() {
     if (window.Event) {
          document.captureEvents(Event.MOUSEMOVE);
     }
     document.onmousemove = getCursorXY;
  }

 function getCursorXY(e) {
     mouseX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
     mouseY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);
 }

 function updatePosition() {
      var img = document.getElementById('myimage'); 
      var width = img.clientWidth;
      var height = img.clientHeight;

      img.style.position = "absolute";
      img.style.top = mouseY-(height/2);
      img.style.left = mouseX-(width/2);
 } 
```

# sql - 查询微调

> ID：14019145
> 
> 赞同：1
> 
> 时间：2012-12-24T08:51:02.510
> 
> 标签：sql, sql-server-2008

我有一个简单的查询，大约需要 7-8 秒才能从数据库中检索数据，我想进一步微调到 2-3 秒。

桌子 ：

```
UpdateDateTime | field1 | field2 |..... FieldN. 
```

查询是：

```
Select *  
from Table with (nolock)  
where UpdateDateTime Between D1 and D2  
Order By UpdateDateTIme 
```

我创建了聚集索引`UpdateDateTime`

可以做些什么来提高其效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T08:52:12.320

`UpdateDateTIme` 减少返回的列数是显而易见的答案，然后`INCLUDE`在其他选定列上创建覆盖（非聚集）索引。

```
CREATE NONCLUSTERED INDEX NC_MyCoveringIndex 
   ON Table(UpdateDateTime)
      INCLUDE (Col1, Col2, ..., ColN) 
```

[参考](http://msdn.microsoft.com/en-us/library/ms188783%28v=sql.105%29.aspx)。

[**注意**：创建包含表中所有列的广泛覆盖索引并不理想。]

很大程度上取决于您的`WHERE`条款的选择性。如果它返回（大约）大于表中行数的 10%，那么优化器可能只会扫描聚集索引。

差不多就是这样。除此之外，您还需要查看您的硬件，以及您通过网络传输了多少数据。

# lucene - Lucene 分析器

> ID：14019147
> 
> 赞同：3
> 
> 时间：2012-12-24T08:51:26.920
> 
> 标签：lucene, analyzer

我曾与 Lucene 一起为文档建立索引并在其中提供搜索，但是，我的工作是用英语进行的，但现在，我有一个库尔德语项目，库尔德语使用一些阿拉伯 unicode 字符和其他几个字符，这里是[表库尔德阿拉伯语脚本中使用的 Unicode 字符](http://en.wikipedia.org/wiki/Kurdish_typography)

我的问题是如何为这种语言创建分析器，或者我可以为此目的使用阿拉伯语分析器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T15:40:32.107

要回答有关如何为新语言创建自定义分析器的问题...“Lucene In Action”一书涵盖了自定义分析器的创建，并且非常详细。您可以“利用”在其他分析器中找到的大量代码，只需更改您需要的内容。Lucene 是开源的并且非常可扩展，因此分析这些更改非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:51:47.243

Lucene 有一个[其他分析器列表](http://lucene.apache.org/core/4_0_0/analyzers-common/index.html)，包括阿拉伯语。恐怕没有人专门针对库尔德人，但也许您可以扩展阿拉伯语分析器以满足您的需求？

请记住，所有这些分析器都与主要的 Lucene 发行版[分开。](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/lucene-contrib/index.html)

# python - 从 Django 登录中检索 SQL 条目

> ID：14019152
> 
> 赞同：3
> 
> 时间：2012-12-24T08:52:10.310
> 
> 标签：python, sql, django, django-forms

我是 Django 的新手。我使用内置`User`模型编写了一个登录脚本。

```
def login_user(request):
    state = "Please login below..."
    username = password = ''
    if request.POST:
        username = request.POST['username']
        password = request.POST['password']

        user = authenticate(username=username, password=password)
        if user is not None:
            if user.is_active:
                login(request, user)
                state = "You're successfully logged in!"
                return render_to_response('home.html',{'username': username})
            else:
                state = "Your account is not active, please contact the site admin."
        else:
            state = "Your username and/or password were incorrect."

    return render_to_response('index.html',{'state':state}) 
```

这将打开一个新页面`home`，我在其中显示`{{username}}`. 但是，我如何才能从该特定位置检索其他值，例如 ,`id`等，并将它们显示在我的页面上。我试过使用，但它似乎不起作用。`email``fullname``username``database``home``User.objects.all()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:02:20.403

您已经*有了*用户对象，（[`authenticate()`返回它](https://docs.djangoproject.com/en/stable/topics/auth/default/#django.contrib.auth.authenticate)），所以只需从`user`. 请参阅[`User`文档](https://docs.djangoproject.com/en/2.1/topics/auth/default/#user-objects)以了解您可以从中获得什么：

```
# ...
user = authenticate(username=username, password=password)
if user is not None:
    if user.is_active:
        state = "You're successfully logged in!"
        info = dict(username=username, email=user.email, fullname=user.get_full_name())
        return render_to_response('home.html', info) 
```

# android - 为结果开始检测活动

> ID：14019156
> 
> 赞同：7
> 
> 时间：2012-12-24T08:52:27.903
> 
> 标签：android, android-activity

我有一个活动假设“活动A”，我通过两种方式开始
a）`StartActivity()`
b）`StartActivityForResult()`
现在我有几个方法对于活动开始的方式具有不同的行为。现在我想检测“活动 A”是否已启动以获得结果。所以我的问题是我们如何检测到活动是为结果而开始的？我不想通过意图发送数据。还有其他更通用的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-10T14:12:23.147

从[这个答案](https://stackoverflow.com/a/17060830/2823516)

> 当您的活动仅通过 startActivity() 启动时，目标活动中的 getCallingActivity() 方法将返回 null。当它被 startActivityForResult() 调用时，它将返回调用活动的名称。
> 
> 例子：
> 
> ```
> if (getCallingActivity() == null) {
>     //This Activity was called by startActivity 
> } else {
>    //This Activity was called by startActivityForResult
> } 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T12:38:01.010

您不需要在`Intent`. Activity 有方法检查启动`Activity`它被调用`getCallingPackage()`

从文档中：

> 返回调用此活动的包的名称。这就是将 setResult() 中的数据发送给谁。您可以使用此信息来验证是否允许接收者接收数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T09:01:15.177

使用调用时发送一些**布尔附加值**

```
intent.putExtra("mBool", true);
startActivityForResult(intent); 
```

根据该值，执行相应的操作。

```
if(getIntent().hasExtra("mBool")){

//ForResult
}else{

//default
} 
```

# c# - 需要使用 WIN32 API 在 IE8/IE9 中的活动选项卡 URL

> ID：14019161
> 
> 赞同：1
> 
> 时间：2012-12-24T08:53:11.903
> 
> 标签：c#

> **可能重复：**
> [使用 Visual Basic 在 IE 中获取当前 URL](https://stackoverflow.com/questions/11158341/get-current-url-in-ie-using-visual-basic)

我需要使用 WIN 32 API 在 IE8/IE9 中获取用户浏览器的活动标签 URL。我需要用户在当前访问的浏览器中访问的 URL。我必须在 Windows 服务中使用 URl 值。

用户可以根据自己的要求打开任意数量的选项卡。但一次只有一个浏览器选项卡处于活动状态。我需要处于活动状态的选项卡的 URL。我尝试使用 ShellWindowsClass 获取活动选项卡 URL。但是我们得到了浏览器的所有 URL。我还需要在 Windows 服务中获取 URL。所以请分享你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:08:16.527

试试这些：

Internet Explorer URL Crawler .. 不知道它是否适用于最新的浏览器。

[http://stoyanov.in/code/ie-url-crawler/](http://stoyanov.in/code/ie-url-crawler/)

还有一个类似的链接..

[http://www.c-sharpcorner.com/Forums/Thread/46881/how-to-get-the-current-url-in-internet-explorer.aspx](http://www.c-sharpcorner.com/Forums/Thread/46881/how-to-get-the-current-url-in-internet-explorer.aspx)

# python - 如何在 Python 中编写轮询函数？

> ID：14019163
> 
> 赞同：6
> 
> 时间：2012-12-24T08:53:15.123
> 
> 标签：python, polling

我正在尝试编写一个函数，该函数每 1 分钟读取一次变量并返回每次的值。变量名是proc：

```
proc = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0] 
```

进度存储在 proc 变量中。我希望函数每 1 分钟轮询一次变量并返回值。这样做直到变量在执行时。最好的方法是什么？

尝试使用：

```
def doWork():
    while True:
        proc = subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]stdout=subprocess.PIPE).communicate()[0]
        data = sort(proc)
        print data 
        time.sleep(10) 
```

虽然没有运气！它同时打印整个进度并循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T18:50:36.990

下面的代码将运行 rsync 并在命令可用时读取该命令的任何输出。我使用 rsync 的 --progress 选项让它打印出它的进度。进度更新有时以 a 结尾，`\n`有时以 a结尾`\r`。所以我阅读单个字符，然后通过查找这两个字符中的任何一个来形成每一行字符。每当我遇到新的进度线时，我都会将其打印到屏幕上。您可以选择执行任何操作，例如解析完成百分比并显示图形进度条。如果您有兴趣了解如何在终端中生成进度条，[请查看此答案](https://stackoverflow.com/a/13946863/1699750)。我放了一个同步函数的示例调用和示例输出。

**代码**

```
from subprocess import Popen, PIPE

def sync(src, dest, passwd):
    cmd = ['sshpass', '-p', passwd, 'rsync', '-avz', '--progress', src, dest]
    p = Popen(cmd, stdout=PIPE)
    line = ''
    while True:
        c = p.stdout.read(1)
        if not c:
            break
        if c in ['\n', '\r']:
            print 'rsync progress: %s' % line
            line = ''
        else:
            line += c

sync('/path/big.txt', 'myserver:/path/', 'mypassword') 
```

**输出**

```
rsync progress: sending incremental file list
rsync progress: big.txt
rsync progress: 
rsync progress:        32768   0%    0.00kB/s    0:00:00  
rsync progress:     65798144  31%   62.72MB/s    0:00:02  
rsync progress:    131596288  62%   62.77MB/s    0:00:01  
rsync progress:    197427200  94%   62.79MB/s    0:00:00  
rsync progress:    209715200 100%   62.80MB/s    0:00:03 (xfer#1, to-check=0/1)
rsync progress: 
rsync progress: sent 204032 bytes  received 31 bytes  45347.33 bytes/sec
rsync progress: total size is 209715200  speedup is 1027.70 
```

# java - 如何从用户输入 JTextField 将值插入 MySql 表

> ID：14019164
> 
> 赞同：0
> 
> 时间：2012-12-24T08:53:15.287
> 
> 标签：java, mysql, swing

我试图将值从 JTextField 中的用户输入插入到表中。代码运行时出现错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法

谁能帮我解决这个问题？谢谢！

这是我的代码。

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.BorderLayout;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextField;

class InputRoute
{

JTextField text1;
JTextField text2;
JTextField text3;
String c;
Float d;

public void inputRoute() 
{

    Connection conn = null;
    String url = "jdbc:mysql://localhost:3306/";
    String dbName = "YarraTram";
    String driver = "com.mysql.jdbc.Driver";
    String userName = "root";
    String password = "abc123";

    try 
    {
        Class.forName(driver).newInstance();
        conn = DriverManager.getConnection(url + dbName, userName, password);

        PreparedStatement statement = conn.prepareStatement("INSERT INTO  ('route', 'price') VALUES ('"+c+"', '"+d+"')");
        statement.executeQuery();

    } 
    catch (Exception e)
    {
        e.printStackTrace();
    }
}

 public void createAndShowGUI() 
{

    final JFrame frame = new JFrame("Yarra Tram Route Finder(New Route)");

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setLayout(new FlowLayout());

    JLabel label1 = new JLabel("From: ");
    JLabel label2 = new JLabel("To: ");
    JLabel label3 = new JLabel("Price: ");

    text1 = new JTextField(20);
    text2 = new JTextField(20);
    text3 = new JTextField(20);

    JButton button1 = new JButton("Add");
    JButton button2 = new JButton("Close");

    frame.add(label1, BorderLayout.WEST);
    frame.add(text1, BorderLayout.EAST);
    frame.add(label2, BorderLayout.WEST);
    frame.add(text2, BorderLayout.EAST);
    frame.add(label3, BorderLayout.WEST);
    frame.add(text3, BorderLayout.EAST);
    frame.add(button1);
    frame.add(button2);

    button2.addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            String a = text1.getText();
            String b = text2.getText();
            d = Float.parseFloat(text3.getText());

            c = a + " - " + b;

            inputRoute();
        }
    });
    button2.addActionListener(new ActionListener() 
    {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            frame.dispose();
        }
    });

    frame.setSize( 500,120 );
    frame.setLocationRelativeTo( null );
    frame.pack();
    frame.setVisible(true);
} 
} 
```

这是我的 MySQL 表

```
 CREATE TABLE `route` (
 `rid` int(11) NOT NULL AUTO_INCREMENT,
 `route` varchar(100) ,
 `price` decimal(5,2) ,
 PRIMARY KEY (`rid`)
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:59:57.237

```
INSERT INTO "table_name" ("column1", "column2", ...)
VALUES ("value1", "value2", ...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:10:28.943

您在 SQL 查询中缺少表名。您不需要将列名放在单引号中。只有非数字值需要放在单引号中。

当您使用准备好的语句时，为什么不使用`PreparedStatement#setParamater()`. 根据当前的代码，我认为您不会充分利用 PreparedStatement 的优势。准备好的语句有其自身的优势。首先它有助于避免 SQL 注入，然后提高查询性能。您可以谷歌进一步的细节。

```
String c = <your_route>;
float d = <your_price>;      
PreparedStatement statement = conn.prepareStatement("INSERT INTO TABLE_NAME('route', 'price') VALUES (?, ?)");
statement.setString(1,c);
statement.setFloat(2,d);
statement.executeQuery(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T08:54:58.577

首先，您在以下位置缺少表名：

```
... ("INSERT INTO  ('route', 'price') VALUES ...
                 /\
                  here 
```

其次，您不应该在`'`列名中使用冒号。像这样使用反引号：

```
... ("INSERT INTO  `route` (`route`, `price`) VALUES ... 
```

冒号用于传递文字值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:27:42.233

**第 1 点**

您缺少表名

```
PreparedStatement statement = conn.prepareStatement("INSERT INTO tableName ('route', 'price') VALUES ('"+c+"', '"+d+"')");
                                                                 ^^^^^^^^^ 
```

**第 2 点**

您处理准备好的语句的方式不是正确的方式。总是像下面这样。

```
PreparedStatement statement = conn.prepareStatement("INSERT INTO tableName (route, price) VALUES (?, ?)");
statement.setString(1, c);
statement.setFloat(2, d); 
```

**第 3 点**

我也认为`'route', 'price'`行不通。我觉得你想使用**`**（反引号）而不是单引号**'**

所以，**你的最后陈述应该是**

```
PreparedStatement statement = conn.prepareStatement("INSERT INTO tableName
(route, price) VALUES (?, ?)");
statement.setString(1, c);
statement.setFloat(2, d); 
```

# javascript - 如果发生某种情况，如何链接到 CSS？

> ID：14019167
> 
> 赞同：-1
> 
> 时间：2012-12-24T08:53:55.937
> 
> 标签：javascript, css, html, hyperlink

我有两个 CSS 页面，

我想根据某些条件将 HTML 页面链接到其中之一。

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:56:29.047

您可以使用 JavaScript 动态创建`<link>`元素：

```
var link = document.createElement('link');

link.rel = 'stylesheet';
link.type = 'text/css';
link.href = 'css1.css';

document.head.appendChild(link); 
```

或者只是编辑`href`现有属性的属性：

```
document.getElementById('your_stylesheet').href = 'css1.css'; 
```

并给你的`<link>`元素一个`id`：

```
<link href="default.css" rel="stylesheet" type="text/css" id="your_stylesheet" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T08:56:56.080

看看[这个页面](http://www.thesitewizard.com/javascripts/change-style-sheets.shtml)，它解释了如何使用 JS 来切换样式表。仅当“条件”是您可以在客户端检测到的条件时，这才有可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:00:35.927

## 旧的 IE 条件句

IE 有一些旧的条件

```
<!--[if lte IE 6]>
<link rel="stylesheet" type="text/css" href="/css/ie6_fix.css" />
<![endif]-->
<!--[if IE 7]>
<link rel="stylesheet" type="text/css" href="/css/ie7_fix.css" />
<![endif]--> 
```

## 新媒体查询

有一些新的媒体查询： `<link rel='stylesheet' media='screen and (min-width: 701px) and (max-width: 900px)' href='css/medium.css' />`

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

## javascript

Use javascript to load css. Something like this: [http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

# .net - 编译带有 .xaml 扩展名的 Windows 工作流文件

> ID：14019170
> 
> 赞同：1
> 
> 时间：2012-12-24T08:54:05.157
> 
> 标签：.net, windows, xaml, workflow-foundation-4

我们在 Visual Studio 中编写了一些 Windows 工作流文件（文件扩展名为 .xaml）。我们希望能够从命令行构建程序集。我们尝试了[wfc.exe](http://msdn.microsoft.com/en-us/library/vstudio/ms734733%28v=vs.90%29.aspx)编译器，但它希望文件是 .xoml 格式，这似乎已经过时了 .xaml 格式。任何有关如何将 .xaml 文件构建到程序集中的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T17:46:51.167

WFC.EXE 工具是 Wf3 工件，与 WF4 无关。使用 WF4，您只需将 XAML 文件添加到 VS2012 或 VS2010 解决方案，并将属性表中的自定义工具设置为**MSBuild:Compile**并将生成操作设置为 XamlAppDef。之后，只需重新编译项目，您就有了一个带有嵌入式工作流的程序集。

根据您的需要，甚至可能不需要。ActivityXamlServices 将允许您加载 XAML 文件并执行工作流，而无需编译它。有关更多详细信息，请参见[此处](http://msmvps.com/blogs/theproblemsolver/archive/2010/03/07/loading-xaml-workflows-in-wf4.aspx)。

# php - 在数据库中手动关闭 DRUPAL 中的开发

> ID：14019175
> 
> 赞同：0
> 
> 时间：2012-12-24T08:54:44.927
> 
> 标签：php, drupal, module, drupal-7, drupal-modules

Drupal 7的DEVEL模块如何通过访问数据库手动关闭？我在 Drupal 中激活了 DEVEL 模块，所有配置页面立即开始生成内部错误消息，500。我无法进入 DEVEL 配置页面或 MODULE 配置页面来禁用 DEVEL 模块，它们是返回错误 500 消息的页面之一.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:05:52.707

1.  转到您的数据库管理器

2.  查找“系统”表

3.  您会发现“名称”列包含“开发”的行

4.  将该行的“状态”字段更改为 0

# javascript - 如何像在 Google SantaTracker 中一样创建倒数计时器？

> ID：14019180
> 
> 赞同：-3
> 
> 时间：2012-12-24T08:55:09.927
> 
> 标签：javascript, jquery, html, css

我确实知道如何在 javascript 中制作倒数计时器，但是如何实现[Google SantaTracker 网站](http://google.com/santatracker/)中的**翻转效果**...？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T09:06:01.843

这里。我不久前修改了 Chris Nanney 的[翻转计数器](http://cnanney.com/journal/code/apple-style-counter-revisited/)以允许倒计时。随意使用。

[https://bitbucket.org/fresheyeball/apple-style-flip-counter-with-leading-zeros/overview](https://bitbucket.org/fresheyeball/apple-style-flip-counter-with-leading-zeros/overview)

# c++ - C++ 在 std::vector 中搜索

> ID：14019181
> 
> 赞同：5
> 
> 时间：2012-12-24T08:55:14.040
> 
> 标签：c++, stl, vector, find

假设我有一个这样的向量：

```
vector< pair<string, pair<int, int> > > cont; 
```

现在我想`cont`找到`first`等于的元素`"ABC"`。如何使用 STL 提供给我们的函子和算法（find_if、is_equal??）轻松做到这一点。**（请不要使用 Boost，也不要使用新的 C++。）**

**编辑：是否可以不定义谓词函子？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T08:57:34.663

就像是

```
typedef std::pair<std::string, std::pair<int, int> > pair_t;

struct Predicate : public std::unary_function<pair_t, bool>
{
public:
   Predicate(const std::string& s):value(s) { }
   result_type operator () (const argument_type& pair)
   {
      return pair.first == value;
   }
private:
   std::string value;
};

std::vector<pair_t>::const_iterator pos = std::find_if(cont.begin(), cont.end(),
Predicate("ABC")); 
```

或 lambda，如果是 C++11。

```
auto pos = std::find_if(cont.begin(), cont.end(),
[](const std::pair<std::string, std::pair<int, int>>& pair)
{
    return pair.first == "ABC";
}); 
```

真的，有一种不好的方法来做这样的事情，没有结构。

```
typedef std::pair<std::string, std::pair<int, int> > pair_t;

namespace std {
template<>
bool operator ==<> (const pair_t& first, const pair_t& second)
{
   return first.first == second.first;
}
}

std::vector<pair_t>::const_iterator pos = std::find_if(cont.begin(), cont.end(),
std::bind2nd(std::equal_to<pair_t>(), std::make_pair("ABC", std::make_pair(1, 2)))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:22:53.400

如果您需要比`O(N)`搜索更快的速度，您可以`vector` 用`map`（或添加并行）`O(log N)`搜索（或`O(1)`用`unordered_map`）替换，不需要仿函数：

```
vector<pair<string, pair<int,int>>>  cont {{"ABC",{1,11}}, {"DFG",{2,22}}};
map        <string, pair<int,int>>   M(cont.begin(), cont.end());
cout << M["ABC"] << endl; 
```

并使用[RO 库](http://volnitsky.com/project/ro/)（可耻的插件），这将是：

```
#include <sto/sto.h>
using namespace sto;

...
auto it = cont / (_0=="ABC"); 
```

这里`/`重载了内部调用的 op `find_if`; `_0`- 在 STO lambda 表达式中引用元组（或对）的第一个元素；`_0=="ABC"`- 生成谓词的 lambda 表达式`find_if`

# java - 采访街三胞胎

> ID：14019187
> 
> 赞同：0
> 
> 时间：2012-12-24T08:55:55.777
> 
> 标签：java

> **可能重复：**
> [interviewstreet Triplet 挑战](https://stackoverflow.com/questions/13928575/interviewstreet-triplet-challenge)

有一个整数数组`d`，它不包含两个以上相同值的元素。存在多少个不同的上升三元组`(d[i] < d[j] < d[k], i < j < k)`？

**输入格式：**

第一行包含一个整数`N`，表示数组中元素的数量。接下来是包含`N`整数的单行，由单个空格分隔，没有前导/尾随空格

**输出格式：**

一个整数，表示数组中存在的不同升三元组的数量

**约束：**

```
N <= 10^5 
```

数组的每个元素最多出现两次

数组的每个元素都是一个 32 位正整数

**样本输入：**

```
6

1 1 2 2 3 4 
```

**样本输出：**

```
4 
```

**解释：**

不同的三元组是

```
(1,2,3)
(1,2,4)
(1,3,4)
(2,3,4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:19:52.973

编辑：我假设整数是有序的，你的回答中没有提到。对于无序整数，无法进行优化，您必须使用蛮力计数方法。如果它们已排序，请继续阅读。

* * *

问题是，您在这里并不需要大量编程。这更像是一个数学问题。

首先，一个整数出现 1 次、2 次或更多次都没有关系。无论如何，由此产生的三胞胎一定是独一无二的。这简化为仅计算数组中有多少不同的整数。命名该变量`s`。

然后我们只应用以下公式：

```
result = 0;
for(first_index = 0; first_index < s; first_index++) {
    for(second_index = first_index + 1; second_index < s; second_index++) {
        result += s - second_index - 1;
    }
}
return result; 
```

然而，这可以被简化。现在，如果我们推断`s - second_index - 1`一个外部循环的值，那就是从 0 到`s - 2`反转的所有整数的行！我们不是很高兴它的总和有一个公式：其中`n`是一个整数，`n * (n + 1) / 2`是第一个整数的总和`n`。

这意味着我们可以优化我们的程序：

```
result = 0;
for(first_index = 0; first_index < s; first_index++) {
    result += (s - 2 - first_index) * (s - 2 - first_index + 1) / 2;
} 
```

请注意，我们可以将其进一步简化为`result = (x^3 - 3*x^2 + 2*x) / 6`。

# c# - 如何开发将模型对象转换为 Excel 表 (.xls) 和文本文件 (.csv) 的操作方法

> ID：14019188
> 
> 赞同：3
> 
> 时间：2012-12-24T08:55:59.740
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, entity-framework-4

我在我的 asp.net mvc web 应用程序中有以下视图：它只是在表格中显示模型数据，表格中有三个复选框，用于选择应将哪些列提取到 excel (.xls) 或文本(.csv) 文件。观点是：-

```
@model MvcApplication4.Models.SelectedCustomers

@{
    ViewBag.Title = "CustomerDetials";
}
<h3>Select Customers Detials</h3>
<table>
    <tr>
        <th>
            NAME @Html.CheckBox("Name",true)
        </th>
        <th>
            Description @Html.CheckBox("Description",true)
        </th>
        <th>
            Address @Html.CheckBox("Address",true)
        </th>
    </tr>
@foreach (var item in Model.Info) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.address)
        </td>
    </tr>
}

</table>
<p>
@Html.ActionLink("Back","customer","Home") |
<a href="">extract to excel</a> |
<a href="">extract to text file</a>
</p> 
```

但是任何人都可以就我如何完成以下工作提供一些帮助：-

1.  开发一个操作方法，当用户单击“提取到 excel”链接时，将返回并打开一个包含 SelectedCustomer 模型对象的 excel 工作表。

2.  开发一个操作方法，当用户单击“提取到文本文件”链接时，该方法将返回并打开一个包含 SelectedCustomer 模型对象的 .csv 文件。

3.  我怎样才能只提取其复选框“选中”的列。

谢谢和最好的问候

**：：：更新：：：**

我已将我的观点更新为以下内容：-

```
@model MvcApplication4.Models.SelectedCustomers

@{
    ViewBag.Title = "CustomerDetials";
}

<h3>Select Customers Detials</h3>

@using (Html.BeginForm("Export", null))
{

<table>
        <tr>
            <th>
                NAME @Html.CheckBox("IncludeName",true)
            </th>
            <th>
                Description @Html.CheckBox("IncludeDescription",true)
            </th>
            <th>
                Address @Html.CheckBox("IncludeAddress",true)
            </th>
        </tr>

@foreach (var item in Model.Info) {
    <tr>

       <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.address)
            </td>
    </tr>
}

</table>
<p>
@Html.ActionLink("Back","customer","Home") |
        <button type="submit" name="format" value="xls">extract to excel</button> |
        <button type="submit" name="format" value="csv">extract to text file</button>
    </p>} 
```

然后添加了以下操作方法：-

```
[HttpPost]
        public ActionResult Export(ExportViewModel exportOptions,IEnumerable<Account> sc)
        {
          //  var accounts = GetAccounts();
            if (exportOptions.Format == "csv")
            {
                return sc.AsCsvResult(exportOptions);
            }
            else if (exportOptions.Format == "xls")
            {
                return sc.AsXlsResult(exportOptions);
            }

            throw new NotSupportedException(
                string.Format("Unsupported format: {0}", exportOptions.Format)
            );
        } 
```

以及以下模型类：-

```
public abstract class ExportAccountsResult : ActionResult
{
    protected ExportAccountsResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
    {

        this.Accounts = accounts;
        this.ExportOptions = exportOptions;
    }

    protected IEnumerable<Account> Accounts { get; private set; }
    protected ExportViewModel ExportOptions { get; private set; }

    protected abstract string ContentType { get; }
    protected abstract string Filename { get; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = ContentType;
        var cd = new ContentDisposition
        {
            FileName = this.Filename,
            Inline = false
        };
        response.AddHeader("Content-Disposition", cd.ToString());

        // TODO: Use a real CSV parser here such as https://github.com/JoshClose/CsvHelper/wiki/Basics
        // and never roll your own parser as shown in this oversimplified
        // example. Here's why: http://secretgeek.net/csv_trouble.asp
        using (var writer = new StreamWriter(response.OutputStream))
        {
            foreach (var account in this.Accounts)
            {
               var values = new List<object>();
            if (this.ExportOptions.IncludeName)
            {
                values.Add(account.Name);
            }
            if (this.ExportOptions.IncludeDescription)
            {
                values.Add(account.Description);
            }
            if (this.ExportOptions.IncludeAddress)
            {
                values.Add(account.Address);
            }
            writer.WriteLine(string.Join(", ", values));
            }
        }
    }
}
} 
```

和以下模型类：-

```
namespace MvcApplication4.Models
{
    public class ExportViewModel
    {
        public string Format { get; set; }
        public bool IncludeName { get; set; }
        public bool IncludeDescription { get; set; }
        public bool IncludeAddress { get; set; }

    }
} 
```

以及以下模型类：-

```
namespace MvcApplication4.Models
{
    public class CsvResult : ExportAccountsResult
    {
        public CsvResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
            : base(accounts, exportOptions)
        {
        }

        protected override string ContentType
        {
            get { return "text/csv"; }
        }

        protected override string Filename
        {
            get { return "accounts.csv"; }
        }
    }

} 
```

和以下模型类：-

```
namespace MvcApplication4.Models
{
    public class XlsResult : ExportAccountsResult
    {
        public XlsResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
            : base(accounts, exportOptions)
        {
        }

        protected override string ContentType
        {
            get { return "application/vnd.ms-excel"; }
        }

        protected override string Filename
        {
            get { return "accounts.csv"; }
        }
    }
} 
```

最后是以下模型类：-

```
namespace MvcApplication4.Models
{
    public class SelectedCustomers
    {
        public IEnumerable<Account> Info { get; set; }
    }
    public static class ActionResultextensions
    {
        public static ActionResult AsCsvResult(this IEnumerable<Account> accounts, ExportViewModel exportOptions)
        {
            return new CsvResult(accounts, exportOptions);
        }

        public static ActionResult AsXlsResult(this IEnumerable<Account> accounts, ExportViewModel exportOptions)
        {
            return new XlsResult(accounts, exportOptions);
        }
    }
} 
```

但是当我运行应用程序时，我得到了以下异常：-

```
System.NullReferenceException was unhandled by user code
  HResult=-2147467261
  Message=Object reference not set to an instance of an object.
  Source=MvcApplication4
  StackTrace:
       at MvcApplication4.Models.ExportAccountsResult.ExecuteResult(ControllerContext context) in c:\Users\Administrator\Documents\Visual Studio 2012\Projects\MvcApplication4\MvcApplication4\Models\ExportAccountResult.cs:line 43
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
       at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
       at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
  InnerException: 
```

在 ExportAccountResult.cs 中的这段代码上：-

```
foreach (var account in this.Accounts) 
```

那么可能出了什么问题？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:37:06.040

您可以将记录放入表单并制作 2 个链接提交按钮。让我们举个例子。我们将对文本文件和 Excel 文件格式都使用 CSV，因为 Excel 可以理解 CSV。如果您需要为 Excel 导出应用一些特殊格式，您可以使用第三方库，例如[OpenXML](http://msdn.microsoft.com/en-us/library/bb448854.aspx)。

让我们从定义我们的视图模型开始：

```
public class SelectedCustomers
{
    public IEnumerable<Account> Info { get; set; }
}

public class Account
{
    public string Name { get; set; }
    public string Description { get; set; }
    public string Address { get; set; }
}

public class ExportViewModel
{
    public string Format { get; set; }
    public bool IncludeName { get; set; }
    public bool IncludeDescription { get; set; }
    public bool IncludeAddress { get; set; }
} 
```

那么我们可以有一个具有 2 个操作的控制器 - 一个在视图上呈现记录，一个用于导出它们：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new SelectedCustomers
        {
            Info = GetAccounts()
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Export(ExportViewModel exportOptions)
    {
        var accounts = GetAccounts();
        if (exportOptions.Format == "csv")
        {
            return accounts.AsCsvResult(exportOptions);
        }
        else if (exportOptions.Format == "xls")
        {
            return accounts.AsXlsResult(exportOptions);
        }

        throw new NotSupportedException(
            string.Format("Unsupported format: {0}", exportOptions.Format)    
        );
    }

    private static IEnumerable<Account> GetAccounts()
    {
        // TODO: those records will probably come from a database or something
        // I have hardcoded them here to make my answer more clear
        // and not dependent on some data stores
        return Enumerable.Range(1, 5).Select(x => new Account
        {
            Name = "name " + x,
            Description = "description " + x,
            Address = "address " + x
        });
    }
} 
```

然后我们定义对应的视图：

```
@model SelectedCustomers

<h3>Select Customers Detials</h3>

@using (Html.BeginForm("Export", null))
{
    <table>
        <tr>
            <th>
                NAME @Html.CheckBox("IncludeName", true)
            </th>
            <th>
                Description @Html.CheckBox("IncludeDescription", true)
            </th>
            <th>
                Address @Html.CheckBox("IncludeAddress", true)
            </th>
        </tr>
        @foreach (var item in Model.Info) {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Address)
                </td>
            </tr>
        }
    </table>

    <p>
        @Html.ActionLink("Back","customer","Home") |
        <button type="submit" name="format" value="xls">extract to excel</button> |
        <button type="submit" name="format" value="csv">extract to text file</button>
    </p>
} 
```

接下来我们实现控制器中使用的自定义扩展方法，返回 2 个自定义操作结果：

```
public static class ActionResultextensions
{
    public static ActionResult AsCsvResult(this IEnumerable<Account> accounts, ExportViewModel exportOptions)
    {
        return new CsvResult(accounts, exportOptions);
    }

    public static ActionResult AsXlsResult(this IEnumerable<Account> accounts, ExportViewModel exportOptions)
    {
        return new XlsResult(accounts, exportOptions);
    }
} 
```

最后一部分当然是定义`CsvResult`和`XlsResult`自定义操作结果。由于我们将在这两种情况下使用 CSV，我们可以有一个基类：

```
public abstract class ExportAccountsResult : ActionResult
{
    protected ExportAccountsResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
    {
        this.Accounts = accounts;
        this.ExportOptions = exportOptions;
    }

    protected IEnumerable<Account> Accounts { get; private set; }
    protected ExportViewModel ExportOptions { get; private set; }

    protected abstract string ContentType { get; }
    protected abstract string Filename { get; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = ContentType;
        var cd = new ContentDisposition
        {
            FileName = this.Filename,
            Inline = false
        };
        response.AddHeader("Content-Disposition", cd.ToString());

        // TODO: Use a real CSV parser here such as https://github.com/JoshClose/CsvHelper/wiki/Basics
        // and never roll your own parser as shown in this oversimplified
        // example. Here's why: http://secretgeek.net/csv_trouble.asp
        using (var writer = new StreamWriter(response.OutputStream))
        {
            foreach (var account in this.Accounts)
            {
                var values = new List<object>();
                if (this.ExportOptions.IncludeName)
                {
                    values.Add(account.Name);
                }
                if (this.ExportOptions.IncludeDescription)
                {
                    values.Add(account.Description);
                }
                if (this.ExportOptions.IncludeAddress)
                {
                    values.Add(account.Address);
                }
                writer.WriteLine(string.Join(", ", values));
            }
        }
    }
} 
```

然后我们可以有两个实现：

```
public class CsvResult : ExportAccountsResult
{
    public CsvResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
        : base(accounts, exportOptions)
    {
    }

    protected override string ContentType
    {
        get { return "text/csv"; }
    }

    protected override string Filename
    {
        get { return "accounts.csv"; }
    }
}

public class XlsResult : ExportAccountsResult
{
    public XlsResult(IEnumerable<Account> accounts, ExportViewModel exportOptions)
        : base(accounts, exportOptions)
    {
    }

    protected override string ContentType
    {
        get { return "application/vnd.ms-excel"; }
    }

    protected override string Filename
    {
        get { return "accounts.csv"; }
    }
} 
```

# python - 切换服务器时过滤损坏的引用 Django 电子邮件

> ID：14019190
> 
> 赞同：1
> 
> 时间：2012-12-24T08:56:08.413
> 
> 标签：python, django, amazon-ec2

在切换 EC2 服务器时，我们经常更改 AWS 上的 IP 地址（是的，我们在适用时使用弹性 IP）。有时我们会获得用于托管其他应用程序的 IP 地址（当然这很好）。当最终用户点击过时的链接时，他们会访问我们的服务器（这没关系）。但是这些 HTTP GET 请求有一个“referer”标头，因此常规的 404 错误会自动生成一封 Django 电子邮件给我们的开发人员！

我可以使用以下 Python 代码轻松地重新创建错误电子邮件：

```
import urllib2
req = urllib2.Request('http://my_website.com/some/url/we/dont/have')
req.add_header('Referer', 'http://whatever.i.want')
request = urllib2.urlopen(req) 
```

当Referer 标头被注释掉时，Django 不会发送电子邮件。
我们仍然希望在我们的网站中有真正损坏的链接时发送电子邮件，所以我不想设置`SEND_BROKEN_LINK_EMAILS`为 False。
我无法过滤使用`IGNORABLE_404_URLS`，因为 a. 逻辑是相反的，b。正则表达式只扫描路径而不是主机名。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:40:42.477

我可能会打开一些捕获异常的[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs#process-exception)`Http404`，检查引用标头，然后引发单独的异常（尽管可能仍会通过邮件发送），或者进行简单的重定向到您的首页。更好的是，创建一个自定义页面来描述用户为何最终到达他们所在的位置，然后重定向到该页面。

# entity-framework - 按实体类型选择 ObjectSet

> ID：14019193
> 
> 赞同：1
> 
> 时间：2012-12-24T08:56:22.353
> 
> 标签：entity-framework

我需要一种方法来选择给定`name:string`对象的对象 和`ObjectContext`，但不知道如何做到这一点。

我将使用它来创建一个通用的查找下拉编辑器模板`ASP.MVC`

因此，当视图包含`@Html.EditorFor`( `student=>student.School`) 时，它将显示包含学校列表的下拉列表。

我从 获取目标实体名称`relation.ToMember`，但不知道如何使用此输入查询数据记录。

目前，我添加了一个自定义方法，该方法获取字符串并返回无数，并且在其中我有一个大开关案例“School”： return `this.SchooleSet`;

有没有正确的方法来做到这一点。

我还想添加一个通用方法，它允许我使用类似的语法进行查询`ctx.Select<Teacher>().Where(...)`

再次在这里，我已经使用 switch 实现了，但应该有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:13:24.077

尝试[CreateObjectSet](http://msdn.microsoft.com/en-us/library/dd383062.aspx)方法。

```
var q = ctx.CreateObjectSet<Teacher>().Where(...); 
```

# eclipse - 在 Eclipse CDT 中浏览 Nginx 源代码

> ID：14019207
> 
> 赞同：2
> 
> 时间：2012-12-24T08:58:29.310
> 
> 标签：eclipse, nginx

我正在尝试在 Eclipse CDT 中浏览 nginx 源代码。

我按照网上的说明，下载源代码，执行 ./configure && make，并作为现有的“Makefile 项目”导入 Eclipse。

幸运的是，我得到了正确的代码跳转内容（Ctrl+Click），但困扰我的是 Eclipse 一直报告“无法解析类型 'ngx_int_t'。”，这导致目录视图和文件中有很多错误标志本身。

这个要怎么治？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T18:30:44.323

我遇到了同样的问题，我只是想出了问题所在：nginx源代码中有一些函数具有`ngx_int_t`返回类型，并声明如下：

```
ngx_int_t
<function name> 
```

显然 Eclipse 不喜欢这种断行的声明。因此，我使用了 Command+Click（即 Ctrl+Click）`ngx_int_t`，Eclipse 向我展示了存在此类声明的所有位置，然后我删除了函数名称和函数名称之间的换行符`ngx_int_t`，现在 Eclipse 不会大喊此错误。

# java - 从 DatePicker 获取月份时出错

> ID：14019213
> 
> 赞同：0
> 
> 时间：2012-12-24T08:59:00.707
> 
> 标签：java, android, eclipse

请看下面的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:descendantFocusability="afterDescendants"
    android:background="@drawable/background1"
    tools:context=".Form" >

    <TextView
        android:id="@+id/txt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/dateTxt"
        android:textSize="32sp"
        android:textColor="#FFFFFF"
        android:textStyle="bold"
        style="@style/Text.Strong.Blurry" 

         />

        <DatePicker
        android:id="@+id/datePick" 
        android:layout_below="@+id/txt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="4dp"
        />

        <Button
            android:id = "@+id/goBtn"
            android:layout_below="@+id/datePick"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/goBtnTxt"
            android:onClick="goNext"
            />

</RelativeLayout>

package xxxx.xxxx;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.DatePicker;
import android.widget.Toast;

public class Form extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_form);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_form, menu);
        return true;
    }

    public void goNext(View view)
    {
        DatePicker datePicker = (DatePicker)findViewById(R.id.datePick);

        int year = datePicker.getYear();
        int month = datePicker.getMonth();
        int date = datePicker.getDayOfMonth();

        Toast.makeText(this, String.valueOf(year)+":"+String.valueOf(month)+":"+String.valueOf(date), Toast.LENGTH_LONG).show();

        //Intent intent = new Intent(Form.this,DisplayResult.class);
        //startActivity(intent);
    }

} 
```

当“Toast”工作时，它显示月份减少 1 个值。这意味着如果我选择 MARCH（第 3 个月）并单击按钮，它将月份显示为 2。这是为什么呢？请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T09:01:45.630

这是因为它从 0 开始。

作为

> 0 - 一月
> 
> 1 - 二月
> 
> 2 - 三月
> 
> 3-4月...

检查[这个](http://developer.android.com/reference/android/app/DatePickerDialog.html#onDateChanged%28android.widget.DatePicker,%20int,%20int,%20int%29)。

> month - 为与[Calendar](http://developer.android.com/reference/java/util/Calendar.html)兼容而设置的月份 (0-11) 。

# html - 从 $(this).html() 中按类删除 span

> ID：14019214
> 
> 赞同：0
> 
> 时间：2012-12-24T08:59:01.157
> 
> 标签：html, ajax

基本上我的搜索以跨度返回搜索结果，然后当单击一个时，一个新的跨度将添加到另一个具有选择输入和隐藏输入的 div，因此所有选定的功能都可以作为数组发布。

我的问题是，`$(this).html()`现在包括一个跨度的 class `alias_span`。我不想出现在新的跨度中。如何在将单击的跨度的内容插入新跨度之前将其删除

```
$(".minisearch_res").live('click', function() { 

    // when a search result is clicked we disable the submit button, 
    // append a span to the left column with an id, 
    // a select input to select standard/optional and
    // a hidden field with the required information to save and something to 
    // show the user

    var id = $(this).attr('id');

    var html = "<span class= \"added_result_cont\" id=\"" + id + "_cont\">";
    html += "<select name='" + id + "_sel'>";
    html += "<option value=\"none\" selected=\"selected\"></option>";
    html += "<option value=\"std\">Standard</option>";
    html += "<option value=\"opt\" >Optional</option>";
    html += "</select>";
    html += "<span id= \"" + id + "\" class=\"added_result\">";
    html += "<input type=\"hidden\" name=\"selectedfeat[]\" value=\"" + id + "\">";
    html += $(this).html() + "</span></span>";

    $('#div_apply_to').append(html);

    $(this).remove();
    $('#search_input').trigger('keyup');
    $("input[type=submit]").attr("disabled", "disabled");
}); 
```

更新：这是跨度的 html

```
<span class="minisearch_res" id="opt_1">Anti-Lock Brakes<br><span style="padding-left:20px" class="alias_span"><i>abs</i></span><br></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:16:31.837

```
<div></div> 
```

将其添加到 dom，然后将其删除。

```
var htm = (
    '<span class="foo">foo</span>' +
    '<span>bar</span>' +
    '<span>bar</span>' +
    '<span>bar</span>' +
    '<span>bar</span>'
);

var $el = $("div").append(htm);
console.log($el.html());
$el.find('.foo').remove();
console.log($el.html()); 
```

[http://jsfiddle.net/chovy/w2HdE/](http://jsfiddle.net/chovy/w2HdE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T02:24:57.503

有一个整洁的跨浏览器解决方案，我对此感到非常自豪:)

```
var temp = $(this);
temp.children('.alias_span').remove();
 $('#div_apply_to').append("...html..." + temp.html() + "...html..."); 
```

灵感来自这里： [Remove element from Ajax Response](https://stackoverflow.com/questions/8290716/remove-element-from-ajax-response)

# r - 使用 ggplot2 调整比例热图

> ID：14019216
> 
> 赞同：3
> 
> 时间：2012-12-24T08:59:13.667
> 
> 标签：r, ggplot2, heatmap, rescale

我是一个完整的新手，`R`如果这已经被问了无数次，请原谅我。我正在尝试按照这个[示例](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)`heatmap`进行使用，它们是.`R``tsvs`

这是一个例子。

```
name sam1 sam2
a     0.2  0
b     0.1  0.05
c     0.3  0.06 
```

抱歉，我无法发布我得到的图表（因为我是新手）。

当制作图表时，比例在 0 到 1 之间（数据在 0 到 1 之间重新缩放`heatmap`），但是我的文件中没有任何大于 0.3 的值，因此我想知道是否有可能在 0 到 0.3 之间缩放`heatmap`。我不确定我是否在此处提供了足够的详细信息，如果我需要在此处提供更多详细信息，请告诉我。

基本上我正在使用

```
a <- read.table(file = "name", sep ="\t", header =T) 

a.m <- melt(a)

a.m <- ddply(a.m, .(variable), transform,  rescale = rescale(value))

(p <- ggplot(a.m, aes(variable, transposons)) + 
      geom_tile(aes(fill = rescale), colour = "yellow") + 
      scale_fill_gradient(low = "yellow",  high = "darkgreen")) 
```

任何帮助都非常感谢，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:09:55.133

默认情况下我们有 ?`rescale`

```
 rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE)) 
```

这就是为什么您的值介于 0 和 1 之间的原因。只需将 min 和 max 指定为 ?`rescale`

```
a.m <- ddply(a.m, .(variable), transform,  
                    rescale = rescale(value,to=c(0,0.3)))) 
```

# android - VCard 检查联系人是否有姓名

> ID：14019217
> 
> 赞同：0
> 
> 时间：2012-12-24T08:59:25.293
> 
> 标签：android, contact

我在我的应用程序中使用了**CARDME** 3.6 库，但问题是我没有找到任何功能来判断联系人是否有姓名，因为电话上的一些联系人只是电话号码或电子邮件
我试图使用这个

```
card.getName().hasGivenName()   or    card.getName().hasFamilyName() 
```

但它的返回错误，所以当它没有名字时有什么方法可以检查联系人谢谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:29:12.327

您可能想检查是否`card.getName()`返回 null 。如果它返回 null，则可能意味着 vCard 中缺少包含名称的 vCard 属性。所以你的支票应该是：

```
card.getName() != null and (card.getName().hasGivenName() or card.getName().hasFamilyName()) 
```

# macos - 在 Mac OSX 上升级 JDK

> ID：14019218
> 
> 赞同：1
> 
> 时间：2012-12-24T08:59:41.610
> 
> 标签：macos, java, jdk1.6

我在运行 10.6.8 的 MacBook Pro 上使用默认 JDK。我想升级我的 JDK 版本，但在 Oracle 网站上没有找到。在哪里可以下载 Mac 版？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:06:29.347

只有 Java JDK 7 来自 Oracle，需要 OSX 10.7.3 或更高版本 请参阅[Oracle 的 mac 安装信息](http://docs.oracle.com/javase/7/docs/webnotes/install/index.html#mac)

早期的操作系统和 JDK 是由 Apple 发布的。最新版本是[1.6.0_37](http://support.apple.com/kb/DL1573)

# php - 从表单在mysql中插入换行符

> ID：14019220
> 
> 赞同：-5
> 
> 时间：2012-12-24T08:59:55.393
> 
> 标签：php, html

> **可能重复：**
> [写入 MySQL 时保留 TextArea 的换行符](https://stackoverflow.com/questions/5048849/preserve-line-breaks-from-textarea-when-writing-to-mysql)

我创建了一个将数据插入 mysql 数据库的表单，但我希望表单从表单中将换行符（当我按回车键）插入数据库中，以便在显示数据库中的信息时可以有段落。目前，尽管在输入信息时按下了表单（文本区域）上的返回按钮，但数据库中的信息仅显示在一行中。我该怎么做？我正在使用 php 并且是新的所以请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:08:36.067

您需要一个`<textarea>`div ，然后您将能够捕获新行，从那里您可以通过正常获得所需的输入`$_GET or $_POST`

我猜你只是回显数据库的输出，`<pre></pre>`用于格式化你的输出或 php 的 nl2br 函数。

# objective-c - 如何通过json解析获取整数值

> ID：14019230
> 
> 赞同：-6
> 
> 时间：2012-12-24T09:00:32.853
> 
> 标签：objective-c

你们所有人......这可能是一个愚蠢的问题，但我是 iOS 新手......我需要我们的帮助......我正在做 Json 解析......以获取一些值......我的 json 响应是：-

```
 {
        "_id" = 6001256351188711607;
        "access_level" = private;
        createdOn = "2012-12-17T07:06:42.09000";
        "created_by" = 9514682679942790960941872227340;
        description = "";
        keywords = "";
        location =         (
            "12.000023",
            "77.000012"
        );
        picture = "http://54120127762218290878972982207449539830674.jpg";
        "rel_interests" =         (
        );
        source = "Bank";
        "source_url" = "";
        title = ipl;
    },

 );
        "location_description" = "";
        picture = "http://54252499650705298384658551818639.jpg";
        "rel_interests" =         (
        );
        source = "";
        "source_url" = "";
        title = "Air";
    } 
```

我通过使用此代码获得标题：-

```
 [titleArray addObject:[[_arrData objectAtIndex:j]valueForKey:@"title"]]; 
```

但是当我为位置执行此操作时，我会抛出异常......我怎样才能获得位置？请帮助我实现这一目标...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:07:12.887

您可以使用以下代码获取第一个对象

```
[titleArray addObject:[[[[_arrData objectAtIndex:j]valueForKey:@"location"]objectAtIndex:0]intValue]]; 
```

对于第二个对象

```
[titleArray addObject:[[[[_arrData objectAtIndex:j]valueForKey:@"location"]objectAtIndex:1]intValue]]; 
```

**已编辑** 您有一个字典，其中有多个对象作为数组。在该数组的第一个对象中包含一个字典。在该字典中，只有您拥有位置数组。要访问它，您需要遵循以下代码

```
NSArray *location = [[_arrData objectAtIndex:1] objectForKey:@"location"];
double X = [[location objectAtIndex:0] doubleValue];
double locY = [[location objectAtIndex:1] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:09:35.277

```
title = Watch;
location =         (
            "12.000000",
            "77.000000"
        ); 
```

假设这是 yourDataDict 字典。

```
[titleArray addObject:[yourDataDict valueForKey:@"title"];
float loc1 = [[[yourDataDict valueForKey:@"location"] objectAtIndex:0] floatValue];
float loc2 = [[[yourDataDict valueForKey:@"location"] objectAtIndex:1] floatValue]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:10:33.847

```
NSArray *loc = [[_arrData objectAtIndex:j] objectForKey:@"location"];
double locX = [[loc objectAtIndex:0] doubleValue];
double locY = [[loc objectAtIndex:1] doubleValue]; 
```

# c# - 如何避免 C# 中的 StackOverflowException？

> ID：14019239
> 
> 赞同：0
> 
> 时间：2012-12-24T09:01:32.520
> 
> 标签：c#, stack-overflow

我对 C# 相当陌生，并认为我会从[这里的教程开始。](http://msdn.microsoft.com/en-us/library/dd492171.aspx)

我已经完成了前 3 个，并且正在研究更多关于 C# 类以及可以使用它们的各种方式。然后我突然意识到我的所有代码都在一个类中（MainForm，因为我正在使用 SharpDevelop），我应该尝试更好地组织它。但是，当我尝试引用其他类中的代码时，我得到了 StackOverflowException。我已经实例化了类（例如`CheckAnswers checkanswers = new checkanswers;`），出了什么问题？如果需要，我可以发布代码，但我的猜测是这是一些很容易诊断的 n00b 错误。

**编辑：**

代码 - [https://docs.google.com/open?id=0B9vVcIham8NHMGlNaDk3MTZ6ejA](https://docs.google.com/open?id=0B9vVcIham8NHMGlNaDk3MTZ6ejA)

有不少。这只是我自己编写的代码，不是表单配置的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:22:02.390

你在这里进行相互递归。

在 MainForm 中，您在第 23 行隐式调用 CheckAnswers 构造函数（这是对非静态变量的初始化，这意味着它将在构造 MainForm 时运行）。
在 CheckAnswers 中，您以类似的方式创建一个 MainForm 实例（第 193 行）。

这将导致堆栈溢出 - MainForm 创建一个 CheckAnswers 对象，该对象创建一个 MainForm 对象，该对象创建一个 CheckAnswers 对象，该对象...

编辑：如果您需要在类之间进行双向通信（我建议在大多数情况下反对），这将不起作用。CheckAnswers 对象持有对**不同实例**MainForm 的引用，MainForm 的实例也是如此。这根本行不通（并且会导致无限递归）。
做你想做的事情的一种方法是将 MainForm 的实例发送到 CheckAnswers 构造函数，并在第 23 行使用“this”作为构造函数的参数并使用该参数初始化 mainform（在 CheckAnswers 中）。像这样的东西：

```
public partial class MainForm : Form
{
    CheckAnswers checkanswers;
    ...
    public MainForm()
    {
        checkanswers = new CheckAnswers(this);
        ...
    }
}
public class CheckAnswers // Not sure why you inherit MainForm here, but it's not a good idea, as someone already stated
{
    MainForm mainform;

    public CheckAnswers (MainForm main)
    {
        mainform = main;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:21:13.257

CheckAnswers 类派生自 MainForm 类。因此，当您调用 CheckAnswers 类的构造函数时，它会使用基类 (MainForm) 的所有内部成员创建此类的实例。这就是为什么再次调用这行代码的原因：

第 23 行：CheckAnswers checkanswers = new CheckAnswers();

再一次，实例被创建，这行代码被一次又一次地递归调用，直到发生 StackOverflow 异常。

基本上，此代码代表与您的代码相同的问题：

```
class BaseClass
{
    DerivedClass myObject = new DerivedClass(); // this is a recursive call
}

class DerivedClass : BaseClass
{   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:36:54.393

要进行通信，您应该将现有对象的实例作为参数传递，而不是每次都创建一个新对象（否则具体对象之间将无法进行通信）。

所以这里有一个例子，它代表了你需要做什么的想法：

```
public class CheckAnswers
{
    MainForm mainform;
    public CheckAnswers (MainForm  form)
    { 
        this.mainform = form;
    }

   ...
} 
```

在 MainForm 类中，您必须将“自身”作为参数传递给 CheckAnswers 的构造函数，如下所示：

```
CheckAnswers checkanswers = new CheckAnswers(this); 
```

# java - javac生成的类文件中的方法顺序

> ID：14019240
> 
> 赞同：11
> 
> 时间：2012-12-24T09:01:34.410
> 
> 标签：java, javac

在 JDK7 中，反射 API 发生了变化，现在 getDeclaredMethods() 返回的方法**不再**按照它们在源文件中声明的顺序返回。

现在我的问题是，由 javac 生成的 .class 文件是否包含与在源文件中定义的*顺序相同的方法，*或者它也可以按随机顺序编写方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T09:21:40.820

Java 语言规范的[Binary Compatibility 一章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html)明确指出允许对类文件中的元素进行重新排序：

> [...] 以下是 Java 编程语言支持的一些重要的二进制兼容更改的列表：
> 
> *   [...]
>     
>     
> *   重新排序现有类型声明中的字段、方法或构造函数。
>     
>     
> *   [...]
>     
>     
> *   重新排序类或接口的直接超接口列表。

这意味着它们出现在 .class 文件中的顺序不受规范的限制。如果你想依赖它，你必须（1）知道你的特定实现使用与定义顺序相同的顺序（测试它，就像你所做的那样，是一个好主意，但不能保证任何事情)，或 (2) 自己更改顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T09:28:01.740

Class.getDeclaredMethods API 对此很清楚“......返回的数组中的元素没有排序，也没有任何特定的顺序......”。最有可能的原因是 javac 没有义务以任何特定的顺序在 .class 中生成方法。

# gallery - MODx Revo Gallery：如何通过从列表中选择来设置标签并在资源中按它们过滤专辑

> ID：14019242
> 
> 赞同：0
> 
> 时间：2012-12-24T09:01:51.350
> 
> 标签：gallery, modx, modx-revolution

我需要从画廊中获取“关闭”的专辑，其中包含“连衣裙、裙子……”和收藏（子类别中的每个元素都可以与不同的收藏相关），并且我需要通过**类别、收藏和其他参数**过滤关闭元素. 但是在创建时很难在每个图库项目中输入相同的标签。如何使用 Gallery 制作这样的目录？

甚至更多——每个画廊项目（元素）都有同一个项目的多个图像，所以现在我创建*专辑 -> 子专辑 -> 项目*。

我不确定我可以用 Gallery extra 做到这一点吗？可能会以某种方式使用 MIGx ......和代码库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T02:02:08.427

我不完全确定您的目标是什么，但我很想创建自己的 PHP 片段来搜索 ModX 数据库本身。例如：

```
//TEMP VAR SEARCH
$sql = 'SELECT * FROM `modx_site_tmplvar_contentvalues` WHERE `value` LIKE "%WHAT EVER TAGS YOU HAVE%"';

$tvqresult = mysql_query($sql);
$num_rowstvq = mysql_num_rows($tvqresult);

while ($rowtvq = mysql_fetch_array($tvqresult)) {
$contid =  $rowtvq['contentid'];

//MAIN QUERY
$mainsql = 'SELECT * FROM `modx_site_content` WHERE `id` = ' . $rowtvq['contentid'] . '  AND `template` = 12 AND `published` = 1 AND `deleted` = 0';

$resultmain = mysql_query($mainsql);

while ($row = mysql_fetch_array($resultmain)) {
  echo "[[Ditto? &parents=`134` &documents=" . $row['id'] . " &tpl=`tempchunk`]]";
}//END MAIN LOOP
} 
```

注意：这只是普通的 SQL - 对于 Revo，我相信您必须进行一些细微的调整才能使其与 PDO 一起使用。

# c++ - 在 Linux 上编写 OpenGL 4.X 应用程序的常用库有哪些？

> ID：14019246
> 
> 赞同：2
> 
> 时间：2012-12-24T09:02:11.540
> 
> 标签：c++, linux, opengl

我已经使用 OpenGL 4.X 一段时间来编写 Windows 应用程序。我正在使用 GLEW 访问 OpenGL API 和 GLFW 以获取上下文、窗口和输入。现在我计划为一些特定的项目迁移到 Linux。从来没有写过该平台上的 OpenGL 在我想知道当今在 Linux 平台上开发 OpenGL 4.x 软件的通用行业标准是什么？我读过 Mesa3D 并注意到[它仅支持](http://www.mesa3d.org/relnotes-9.0.1.html)GL 3.1。[GLEW](http://glew.sourceforge.net/)和[GLFW](http://www.glfw.org/)是跨平台的，所以我相信我可以在 Linux 上毫无问题地使用它们？希望获得更多提示。

我知道我可以使用[Qt](http://qt.digia.com/) OpenGL API，但我目前对“纯”C++ 解决方案感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:45:33.033

> 我已阅读有关 Mesa3D 并注意到它仅支持 GL 3.1

Mesa 是 OpenGL API 的开源实现，有多个后端，包括开源 GPU 驱动架构 DRI2 的接口。因此，与流行的看法相反，Mesa 不仅仅是一些软件光栅化器（很久以前它曾经是）。

**但**

这对你没有任何影响！OpenGL 是一个 API，任何遵循它的实现都可以使用。库的二进制接口（ABI）也定义良好。这意味着，要开始 OpenGL-4 开发，您需要做的就是找到*一些*支持它的实现，以便您可以测试您的程序。

现在有两个，不幸的是两个都不是开源的：

*   NVidia 专有驱动程序
*   AMD 专有驱动程序

其中任何一个发布的 libGL.so 都遵守 GLX OpenGL ABI 规则，因此您可以安全地将程序与 libGL.so 动态链接，并且它可以与目标系统上安装的任何实现一起使用。

现在只需编译您的程序，您不需要完整的 OpenGL 实现。您所需要的只是一些 libGL.so，这样在外部看起来就像是遵循 ABI 规范的 OpenGL 实现。ABI 规范仅适用于旧的 OpenGL-1.2，并且上面的所有内容都是通过扩展机制加载的。还有OpenGL-4。libGL.so 确实符合这一点的一个实现是...... Mesa。为了让这些扩展加载一些扩展加载器，比如 GLEW。

使长话短说。您可以使用 GLEW 和 Mesa 开发（我的意思是构建）OpenGL-4 应用程序。只有实际执行它，您才需要支持 OpenGL-4 的实现。

# java - jsp页面无法使用登录

> ID：14019249
> 
> 赞同：5
> 
> 时间：2012-12-24T09:02:19.763
> 
> 标签：java, jsp, logging, log4j

我正在使用以下库进行日志记录：

*   **slf4j-api 1.6.4**
*   **slf4j-log4j12 1.6.4**
*   **公共日志记录 1.1.1**

和我的**log4j.properties**文件：

```
log.dir=logs
rrd.dir=${log.dir}/rrd
datestamp=yyyy-MM-dd/HH:mm:ss.SSS
roll.pattern.hourly=.yyyy-MM-dd.HH
roll.pattern.daily=.yyyy-MM-dd

log4j.rootLogger=ON

log4j.appender.myConsoleAppender=org.apache.log4j.ConsoleAppender
log4j.appender.myConsoleAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.myConsoleAppender.layout.ConversionPattern=%d{${datestamp}} [%t] %-5p %m%n

log4j.appender.myFileAppender=org.apache.log4j.DailyRollingFileAppender
log4j.appender.myFileAppender.DatePattern=${roll.pattern.hourly}
log4j.appender.myFileAppender.File=${log.dir}/MyAPP.log
log4j.appender.myFileAppender.layout=org.apache.log4j.PatternLayout 
log4j.appender.myFileAppender.layout.ConversionPattern=%d{${datestamp}} [%t] %-5p %m%n

log4j.logger.com.myapp=DEBUG, myConsoleAppender, myFileAppender 
```

在**jsp 页面**中，我执行以下操作：

```
<%@page import="org.apache.commons.logging.*"%>

<%

        Log log = LogFactory.getLog(getClass());

        log.debug("login page"); 
```

**注意：**日志记录在 java 类中运行良好。

请告知为什么它不起作用，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:37:00.023

**我刚刚在log4j.properties**中添加了以下行，现在它工作正常：

```
log4j.logger.org.apache.jsp=DEBUG, myConsoleAppender, myFileAppender 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T07:18:45.557

要在 jsp 文件中使用 logger，请通过以下方式初始化 logger 对象：

```
<% Logger logger = LoggerFactory.getLogger(this.getClass()); %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T13:02:44.430

1- 在您的配置文件中：log4j.xml `<logger name="processus.jsp"> <level value="info" /> <appender-ref ref="fileAppender" /> </logger>`

2-在页面JSP中：`<%@ page import="org.apache.log4j.Logger"%>

<% Logger logger = Logger.getLogger("yourPage.jsp"); %>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:34:11.853

就像任何其他自定义标签库一样，您必须为您的 Web 应用程序正确配置它。这意味着将 log.tld 文件放入 WEB-INF 目录，并将 Log 标记 JAR 文件安装到 WEB-INF/lib 目录中。您还需要将适当的 taglib 元素添加到 Web 应用程序的部署描述符中，类似于添加 Struts 标记库的方式：

**Web.xml**

```
<taglib>
<taglib-uri>/WEB-INF/log.tld</taglib-uri>
 <taglib-location>/WEB-INF/log.tld</taglib-location>
</taglib> 
```

**在您的 JSP 中，**

```
<%@ taglib uri="/WEB-INF/log.tld" prefix="logger" %>

<logger:debug message="This is a debug message from a jsp using the Log tag" />

<html> 
   <head> 
       <title>Using the Log Tag in a JSP page</title> 
   </head> 
   <body> 
       <logger:info message="This is another message using the log4j tag" />

         There should be two log messages in the log4j log file. 
   </body> 
</html> 
```

这种方法对于更大、更复杂的 JSP 页面更加简洁

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-24T09:15:42.210

最好在 java 中创建一个将初始化日志记录的记录器类。

请参阅[此链接](http://www.imrantariq.com/blog/?p=491)以获取 java 类。从 JSP 调用它的 logDebug() 方法来记录消息，例如`LogClassName.logDebug("message here");`

# android - GCMIntent 服务偶尔会停止接收消息

> ID：14019251
> 
> 赞同：1
> 
> 时间：2012-12-24T09:02:31.303
> 
> 标签：android, android-intent, google-cloud-messaging

我已经实现了 GCM 的全部功能，并且一切正常。当我启动应用程序时，我得到了`regId`，一切看起来都很好。但是我的 GCMIntent 服务似乎时不时地停止接收传入的消息。我想知道 GCM 服务是否有问题，有没有办法检查通知是否已发送到设备。下面是我要注册的客户端代码，然后是我的 GCMIntent 服务。

```
GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        if(GCMRegistrar.isRegistered(this))
        {
            final String regId = GCMRegistrar.getRegistrationId(this);//app_preferences.getString(Constants.KEY_DEVICE_TOKEN, "");;
            if(!regId.equals(""))
            {
                mRegIds= regId;
                //sendIdToServer(regId);
                Log.i("DEVICE TOKEN", regId);
                is_gcm_registered = true;
            } 
        }

        else
        {
            GCMRegistrar.register(this, Constants.SENDER_ID);
            is_gcm_registered = false;
        } 
```

GCM 意向服务：

```
@Override
protected void onMessage(Context context, Intent intent) {
    Log.e("GOT INCOMING MESSAGE","HI");
    // My implementation
} 
```

问题是有时它会立即生效，有时可能需要 1 到 2 分钟才能收到通知。这是正常的吗？

编辑：我正在阅读 GCM Throttling [http://developer.android.com/google/gcm/adv.html#throttling](http://developer.android.com/google/gcm/adv.html#throttling) 并且它说如果将消息批量发送到同一设备，则应用程序会用完令牌。那么 GCM 不是实现即时消息应用程序的最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:13:46.460

是的，延迟是正常的——尤其是当手机进入睡眠状态几分钟时。您会注意到，如果您积极使用手机，消息往往会立即到达。

不要太担心 - 消息最终会到达。

# java - 如何在单击事件时一次仅验证一个文本框

> ID：14019263
> 
> 赞同：1
> 
> 时间：2012-12-24T09:05:03.707
> 
> 标签：java, events, event-handling, zk

我创建了一个自定义文本框，如下所示，将其用作 url 框

```
private class URLBox extends Textbox {
        // String value =null;
        URLBox(String infoValue) {
            if (!Utility.isBlank(infoValue)) {
                setValue(infoValue);

            } else {
                setValue("Enter URL");

            }
        }

        @SuppressWarnings("unchecked")
        public void initialize() {
            addEventListener("onClick", new EventListener() {

                public void onEvent(Event event) throws Exception {

                    Textbox tb = (Textbox) event.getTarget();
                    if (tb.getValue().equalsIgnoreCase("Enter URL")) {
                        tb.setValue("");
                    }

                }
            });

            addEventListener("onBlur", new EventListener() {

                public void onEvent(Event event) throws Exception {

                    final URLBox tb = (URLBox) event.getTarget();
                    if (Utility.isBlank(tb.getValue())) {
                        tb.setValue("Enter URL");
                    } else if (!PeopleInfoViewModel.IsMatch(tb.getValue())) {
                         Messagebox.show("Please Enter a valid URL");

                    }

                }

            });

        }

    } 
```

我对数字框所做的类似。我的问题是当我在 url 框中输入无效的 url 并单击 numberbox 时，它也开始验证数字框。我希望在它满足 url 框的要求之前它不应该开始验证数字框我该如何实现这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T17:50:18.140

哈，你让我难倒了好一阵子。圣诞节前夜也是，真丢脸；）

我能够重现您的问题，这只是使用`Messagebox.show`. 当`onBlur`事件检测到验证问题时，您调用`Messagebox.show`显示消息框。消息框上有一个“确定”按钮，它在 DOM 中获得*焦点。*通过将焦点赋予按钮，`NumberBox`失去焦点并`onBlur`触发事件，即使您刚刚选择了它。

我希望这是有道理的。`Messagebox`如果从用户体验的角度来看，你确实应该删除它，这个“双重验证”问题就会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:09:01.070

我建议不要提供 initialize() 方法，而是像这样将事件侦听器部分移动到类级别

```
final class OnClickListener implements EventListener {
        @Override
        public void onEvent(Event event) throws Exception {
            Textbox tb = (Textbox) event.getTarget();
                    if (tb.getValue().equalsIgnoreCase("Enter URL")) {
                        tb.setValue("");
                    }
        }
    }

final class OnBlurListener implements EventListener {
        @Override
        public void onEvent(Event event) throws Exception {
           final URLBox tb = (URLBox) event.getTarget();
                    if (Utility.isBlank(tb.getValue())) {
                        tb.setValue("Enter URL");
                    } else if (!PeopleInfoViewModel.IsMatch(tb.getValue())) {
                         Messagebox.show("Please Enter a valid URL");

                    }
            }
    } 
```

# oop - 模板方法的任务/算法

> ID：14019269
> 
> 赞同：0
> 
> 时间：2012-12-24T09:05:23.210
> 
> 标签：oop

我想使用模板方法模式来绘制形状 GUI。关于抽象类 Shape 中模板方法的任务有什么建议？我的意思是，这种方法能产生什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:31:58.017

你可以参考下面的例子，我在代码中做了注释。希望对你有帮助...

**CustomShape.java - 你的抽象类**

```
public abstract class CustomShape extends View {
    int shapeType = 0;
    int clr = Color.BLACK;
    int x=0;
    int y=0;

    public CustomShape(Context context) {
        super(context);

    }

    // OnDraw can act as Template Method
    // This method holds the algorithm of shape creation    
    // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

    @Override
    final public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
            // you can put here more method to make your shape different                 
            // for example setColor(); setStroke() ..... 

        createRectangle(canvas);                
    }

   // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

    // Primitive operation sub classes must override
    abstract void setShapeType(int type);

    // Primitive operation sub classes must override
    abstract void setShapeColor(int color);

    // Primitive operation sub classes must override
    abstract void setXY(int x1,int y1);

    // Concreate Operation we dont want subclass to override  
    final void createRectangle(Canvas canvas) {

        if (shapeType == 0) {
            if (isColored()) {
                canvas.drawRect(x, y, x+100, y+100, getPaint(clr, 1));
            } else {
                canvas.drawRect(x, y, x+100, y+100, getPaint(Color.BLACK, 1));

            }
        } else {
            if (isColored()) {
                canvas.drawCircle(x, y, 80, getPaint(clr, 1));
            } else {
                canvas.drawCircle(x, y, 80, getPaint(clr, 1));
            }
        }
    }

    // Concreate Operation we dont want subclass to override  

    final Paint getPaint(int color, int Stroke) {
        Paint paint = new Paint();
        paint.setColor(color);
        paint.setStrokeWidth(Stroke);
        return paint;
    }

    // HOOK - sub class can override but doesnt have to, 

    boolean isColored() {
        return true;
    }

} 
```

**CustomShape1.java - 你的创建类**

```
public class CustomShape1 extends CustomShape {

    public CustomShape1(Context context) {
        super(context);

    }   

     boolean isColored(){
         return true;
     }

    @Override
    void setShapeType(int type) {
        shapeType= type;
    }

    @Override
    void setShapeColor(int color) {
        clr = color;        
    }

    @Override
    void setXY(int x1, int y1) {
        x = x1;
        y =y1;
    }

} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

    LinearLayout ln1,ln2;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ln1 = (LinearLayout)findViewById(R.id.ln1);
        ln2= (LinearLayout)findViewById(R.id.ln2);

        CustomShape1 cs1 = new CustomShape1(this);
        cs1.setShapeType(1);
        cs1.setShapeColor(Color.YELLOW);
        cs1.setXY(100, 100);

        CustomShape1 cs2 = new CustomShape1(this);
        cs2.setShapeType(0);
        cs2.setShapeColor(Color.RED);
        cs2.setXY(300, 300);

        ln2.addView(cs2);
        ln1.addView(cs1);        

    }  
} 
```

**activity_main.xml**

```
 <LinearLayout
        android:id="@+id/ln1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
    </LinearLayout>

    <LinearLayout
        android:id="@+id/ln2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:09:43.327

画法。由于每个形状在渲染中都有不同的规格。

# google-app-engine - 对象化事务与常规加载然后保存

> ID：14019270
> 
> 赞同：1
> 
> 时间：2012-12-24T09:05:24.727
> 
> 标签：google-app-engine, transactions, google-cloud-datastore, objectify

我只需要确认我做对了。例如，如果我有一个`X`带有字段的实体`x`，并且在发送请求时我想做`X.x++`。如果我只是使用`X = ofy().load().type(X.class).id(xId).get()`然后我会做一些计算，然后我会做`X.x++`并保存它。如果在计算期间发布了另一个请求，我会得到一个不需要的行为。`X`相反，如果我将在事务中完成这一切，则第二个请求将在我完成之前无法访问。

是这样吗？

对不起，如果这个问题有点笨拙。

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:33:27.770

是的，您做对了，但是在使用事务时，请记住完成的第一个获胜，其余的失败。另请查看@Peter Knego 对它们如何工作的回答。

但是，如果第二个请求读取失败，请不要担心。您有 2 个选项：

1.  强制重试
2.  在事务中使用最终一致性

就重试而言：

> 可以安全地多次调用您的事务函数，而不会产生不良的副作用。如果这不可能，您可以设置 retries=0，但要知道事务将在第一次发生争用时失败

例子：

```
@db.transactional(retries=10) 
```

就最终一致性而言：

> 您可以通过指定请求最终一致性的读取策略来选择退出此保护。通过对实体的最终一致读取，您的应用程序将获取正在读取的实体的当前已知状态，无论是否仍有已提交的更改要应用。对于最终一致的祖先查询，用于查询的索引与从磁盘读取索引的时间一致。换句话说，最终一致性读取策略导致获取和查询表现得好像它们不是当前事务的一部分。在某些情况下，这可能会更快，因为操作不必在返回结果之前等待已提交的更改被写入。

例子：

```
@db.transactional()
def test():
    game_version = db.get(
        db.Key.from_path('GameVersion', 1),
        read_policy=db.EVENTUAL_CONSISTENCY) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T12:35:14.437

No, GAE transaction do not do locking, they use [optimistic concurrency control](http://en.wikipedia.org/wiki/Optimistic_concurrency_control). You will have access to `X` all the time, but when you try to save it in the second transactions it will fail with `ConcurrentModificationException`.

# php - Zend Framework 2 - 注释表单 - 绑定不起作用

> ID：14019272
> 
> 赞同：3
> 
> 时间：2012-12-24T09:05:43.700
> 
> 标签：php, doctrine-orm, zend-form, zend-framework2

我正在使用`AnnotationForms`并且我将教程中的标准编辑操作更改为使用注释而不是标准表单。

一切正常，除了`$form->bind()`不填写值。表单字段保持空白。

我检查了应该绑定的变量，它已设置并且看起来不错。

这是我的行动：

```
 $id = (int)$this->getEvent()->getRouteMatch()->getParam('id');
    if (!$id) {
        return $this->redirect()->toRoute('album', array('action'=>'add'));
    }
    $album = $this->getEntityManager()->find('Album\Entity\Album', $id);

    $builder = new AnnotationBuilder();
    $form    = $builder->createForm(new \Album\Entity\Album());
    $form->add(new \MyVendor\Form\MyFieldset());
    $form->setBindOnValidate(false);
    $form->bind($album); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:28:50.173

好吧，这很容易！

诀窍是将您的对象转换为数组并使用`setData()`而不是绑定。

[我在这里](http://zf2.readthedocs.org/en/latest/modules/zend.form.quick-start.html#validating-forms)找到了解决方案提示。

您仍然需要`bind()`保存更改。如果您将其忽略，则不会发生错误，但也不会保存它。

```
 $album = $this->getEntityManager()->find('Album\Entity\Album', $id);
 ...
 $form->bind($album);
 $form->setData($album->getArrayCopy()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-27T20:52:09.170

hydrator`ClassMethods`实际上对 bind 起作用，但表单元素名称需要匹配小写下划线格式（例如： object property`$moduleDisplayName`和`ClassMethods`hydrator`ObjectProperty`期望表单元素 Name `module_display_name`。

`Zend\Form\Annotation`默认情况下会生成一个名为 的表单元素`moduleDisplayName`。因此，将对象提取到表单中不起作用。

解决方案 1：将`@Name`注释添加到属性以`ClassMethods`使其工作。

例子：

```
/**
* @Form\Name("module_display_name")
protected $moduleDisplayName 
```

解决方案 2：将`ClassMethods`hydrator 实例化，将可选参数`underScoreSeperatedKeys`设置为`false`（默认为`true`）或使用`ClassMethods::setUnderScoreSeperatedKeys(false)`. 然后`ClassMethods`将像任何其他保湿剂一样工作。

`ObjectProperty`hydrator 仅适用于声明的属性`public`。但命名与with相同`ArraySerializable`（即property `$moduleDisplayName`，form element Name `moduleDisplayName`）。

`Reflection`保湿剂适用于所有属性。命名与 with 相同`ArraySerializable`。

结论：`ClassMethods`是期望不同的表单元素命名方案的四个水合器之一。不太酷。

# batch-file - 如何将命令的结果存储在bat脚本的变量中

> ID：14019274
> 
> 赞同：0
> 
> 时间：2012-12-24T09:05:51.277
> 
> 标签：batch-file

```
FOR /F "tokens=1 delims=" %%A in ('netstat -ano | findstr 7001') do SET   myVar=%%A 
echo %myVar% 
```

`|`指挥部说以前不认识`findstr`，谁能帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:49:33.947

在 IN() 子句中时，必须对特殊字符（例如`|`）进行转义或引用。请注意，不需要 TOKENS=1 选项 - 这是默认选项。

你可以使用

```
for /f "delims=" %%A in ('netstat -ano ^| findstr 7001') do set myVar=%%A 
```

或者

```
for /f "delims=" %%A in ('"netstat -ano | findstr 7001"') do set myVar=%%A 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:11:27.187

```
@echo off
set portnumber=?

FOR /F "tokens=1,2,3,4,* delims= " %%a in ('netstat -ano') do call :handleline %%a %%b %%c %%d %%e

goto :eof

:handleLine
call :portcheck %1 %2 %2 %4 %5

rem you can have your check here
rem if %portnumber%==7001 do whatever
echo pid %4 uses port %portnumber%

goto :eof

:portcheck
set prot=%1
set ipandport=%2
set pid=%4

set pn1=%ipandport:~-1%
set pn2=%ipandport:~-2%
set pn3=%ipandport:~-3%
set pn4=%ipandport:~-4%
set pn5=%ipandport:~-5%

if !%pn2:~0,1%!==!:! set portnumber=%pn1% & goto :bailout
if !%pn3:~0,1%!==!:! set portnumber=%pn2% & goto :bailout
if !%pn4:~0,1%!==!:! set portnumber=%pn3% & goto :bailout
if !%pn5:~0,1%!==!:! set portnumber=%pn4% & goto :bailout
set portnumber=%pn5%
:bailout

goto :eof 
```

# java - 从列名包含空格的 SQLite 读取数据

> ID：14019275
> 
> 赞同：13
> 
> 时间：2012-12-24T09:05:53.980
> 
> 标签：java, android, sqlite

我有一个名为“条件名称”的名称（.sql 文件已从服务器生成）

但是在android中，我在从该表中读取数据时遇到了异常。

> 12-24 14:34:00.870: W/System.err(269): android.database.sqlite.SQLiteException: 没有这样的列: 条件: ,

编译时：

> SELECT 条件、类别、子类别、条件名称、本地路径、远程路径、标题、content_type FROM library WHERE category = ?

它无法识别整个表名并在空间中断。如果您有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-25T15:06:08.910

对于引用表/列名称等标识符，SQLite 支持反引号以与 MySQL 兼容，并支持方括号以与 SQL Server 兼容，但可移植的方式是使用双引号：

```
SELECT "condition name" FROM library 
```

（单引号将用于字符串值。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2021-03-22T12:31:25.017

然后将表名放在引号之外，如下所示：

表名。“列名”

并不是

“表名.列名”

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-08-12T23:43:02.230

使用单引号

```
SELECT 'condition name' FROM library 
```

或双引号

```
SELECT "condition name" FROM library 
```

* * *

在某些情况下，表的名称可以包含空格甚至单字母，例如：

```
SELECT condition's name FROM library 
```

在这种情况下，用表名替换`'`为`''`：

```
SELECT 'condition''s' name FROM library 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2021-07-21T13:07:38.603

```
String someName = "The pig";
String sql = 
"SELECT * FROM " + TABLE + " WHERE " + COL_TITLE + "=" + '"' + someName + '"'; 
```

# css - Div 样式 - IE 的问题

> ID：14019281
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:06:28.753
> 
> 标签：css, internet-explorer, html, border

我有这个简单的 DIV，它在 Firefox、Chrome 等中显示良好，但在 IE 中却没有。我有以下html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <style>
      div.example {
        position:absolute; 
        color:black; 
        text-align:left;
        border:2px solid#000;  
        border-radius:15px; 
        -moz-border-radius:15px; 
      }
    </style>
  </head>
  <body>
    <div class="example" style="height:15em;width:10em;"></div>
  </body>
</html> 
```

在 Firefox 中，我得到一个圆形的 2px 黑色边框。在 IE 中一无所获。从我读过的内容来看，直到 IE9 才支持圆角边框，但我想要 2px 黑色边框，即使它不是圆角的。有没有办法让它在 Firefox、Chrome、IE 和 Safari 中看起来一样？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:18:18.137

您在边框样式中缺少空格。
这是一个[工作演示](http://jsbin.com/uhajiq/4/edit)。

**HTML**

```
<div class="example">&nbsp;</div> 
```

**CSS**

```
div.example {
    position: absolute;
    color: black;
    text-align: left;
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border: 2px solid #000;
    width: 10em;
    height: 15em;
} 
```

另外，作为旁注，

`border-radius`应始终在 之后调用`-prefix-border-radius`，
例如顺序：

```
...
-moz-border-radius:10px;
-webkit-border-radius:10px;
border-radius:10px;
... 
```

# java - 如何为多值分层枢轴面正确设计 solr4 模式

> ID：14019283
> 
> 赞同：1
> 
> 时间：2012-12-24T09:06:31.603
> 
> 标签：java, user-interface, faceted-search, solr4

我将创建一个应用程序，该应用程序将允许搜索具有某种“生活”在其上的机器人的行星。当然，我收到的带有数据的 XML 是从[Vogsphere](http://en.wikipedia.org/wiki/Vogsphere#Vogsphere)发送给我的，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<planet>
    <name>Iota Draconis b</name>
    <constellation>Draco</constellation>
    <meanRadius unit="km">44500</meanRadius>
    <robots>
        <robot category="autobot">
            <name>Optimus Prime</name>
            <properties>
                <property category="weapons">
                    <name>minigun</name>
                    <name>laser</name>
                </property>
                <property category="color">
                    <name>white</name>
                    <name>red</name>
                </property>
                <property category="energy">
                    <name>solar</name>
                    <name>battery</name>
                </property>
            </properties>
        </robot>
        <robot category="decepticon">
            <name>Megatron</name>
            <properties>
                <property category="weapons">
                    <name>minigun</name>
                    <name explanation="heat seaking missiles">rockets</name>
                </property>
                <property category="color">
                    <name>black</name>
                </property>
                <property category="movement">
                    <name>legs</name>
                    <name>wheels</name>
                </property>
            </properties>
        </robot>
    </robots>
</planet> 
```

上面的示例仅针对一个行星，其中有超过 200.000 个。因此，这场令人讨厌的战斗锦标赛的组织者希望使用从上述 XML 数据创建的构面进行浏览。

我已经阅读了一些关于分层枢轴分面的地球文档，但我发现没有一个也涉及多值字段。

你看，每个机器人都有一个类别（10 个）、名称（200 个）和许多属性。

每个属性都有一个类别（300 个中的一个，但基于机器人名称的子集）和名称（几个，但至少百分之一个，但基于属性类别的子集）。

这是用户界面的图片： ![浏览植物以寻找机器人](../Images/7d19e3ebe0e56228cb5ab91c776b15fb.png)

为了捍卫地球的智慧，有人可以帮我创建 solr4 模式吗？

# gwt - 将 gwt 项目转换为 maven gwt 项目

> ID：14019284
> 
> 赞同：3
> 
> 时间：2012-12-24T09:06:36.737
> 
> 标签：gwt, maven

我想将 gwt 项目转换为 maven 项目。我确实配置-> 转换为 Maven。那只是在我的项目中创建了 pom.xml 和 target 文件夹。文件夹结构保持不变，因为 maven 项目结构是 src->main->java。然后我想创建一个war文件，谁能帮我做这个工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T06:37:43.837

**您没有完全的 AUTOMagic 解决方案。**

## Configure->Convert to maven 之后的步骤

1）识别项目中使用的每个库jar和版本，并在maven pom中为其添加相应的依赖部分。

2）在你的pom中创建一个构建部分，你可以指定任何文件夹结构（建议你更喜欢 src/main/java

3) 在 build 下添加相关插件部分，用于 gwt 编译。使用 gwt 示例项目作为模板。

4）文件夹之间的大量复制/粘贴（如果您迁移到maven' src/main/java ）。使用 Eclipse 重构功能避免手动访问每个文件。

坚持 maven pom 文件的 GWT 示例项目方法。使用 Maven 和 GPE 插件的 GWT Dev 部分的常见问题解答更容易进行故障排除。

**更新**- 半自动化解决方案

*   我遇到了一个名为 [tera-form](http://code.google.com/p/teraform-mvn/)的自动 maven pom 生成概念。
*   [Google Groups 对此的讨论](https://groups.google.com/forum/?fromgroups=#!topic/gwt-steering/RNDuj74LblQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:37:23.393

我会使用原型来创建一个新的 Maven 项目，并设置所有内容。然后将所有源文件复制到该`src/main/java`文件夹​​，并将您的测试复制到`src/test/java`.

通常我使用`gwtquery`原型，但您可以使用任何其他的或`webAppCreator`与 gwt sdk 一起分发的官方。

```
mvn archetype:generate  \
    -DarchetypeGroupId=com.googlecode.gwtquery \
    -DarchetypeArtifactId=gquery-archetype  \
    -DarchetypeVersion=1.2.0 \
    -DgroupId=com.mycompany \
    -DartifactId=myproject \
    -DprojectName=MyProject 

webAppCreator -noant -maven -overwrite \
    -out myproject \
     com.mycompany.MyProject 
```

# ruby - 如何在 Ruby 中获取本地机器的 IP 地址？

> ID：14019287
> 
> 赞同：13
> 
> 时间：2012-12-24T09:06:57.173
> 
> 标签：ruby, ip-address

我正在 Ubuntu 12.04LTS 操作系统中进行 Rails 开发。

我想在一个文件中捕获我的本地 IP 地址，而不是我使用的环回 127.0.0.1 `ifconfig`。请提出解决方案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-24T09:13:27.733

使用[Socket::ip_address_list](http://www.ruby-doc.org/stdlib/libdoc/socket/rdoc/Socket.html#method-c-ip_address_list)。

```
Socket.ip_address_list #=> Array of AddrInfo 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T09:31:12.060

这是我的第一种方式：

```
require 'socket' 
    def local_ip
  orig, Socket.do_not_reverse_lookup = Socket.do_not_reverse_lookup, true  # turn off reverse DNS resolution temporarily

  UDPSocket.open do |s|
    s.connect '64.233.187.99', 1
    s.addr.last
  end
ensure
  Socket.do_not_reverse_lookup = orig
end

# irb:0> local_ip
# => "192.168.0.127" 
```

这是我的第二种方式，不推荐：

```
require 'socket'
 Socket::getaddrinfo(Socket.gethostname,”echo”,Socket::AF_INET)[0][3] 
```

第三种方式：

```
 UDPSocket.open {|s| s.connect('64.233.187.99', 1); s.addr.last } 
```

第四种方式：

```
Use Socket#ip_address_list

Socket.ip_address_list #=> Array of AddrInfo 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T10:29:43.733

写下方法

```
def self.local_ip
    orig, Socket.do_not_reverse_lookup = Socket.do_not_reverse_lookup, true
    UDPSocket.open do |s|
      s.connect '64.233.187.99', 1
      s.addr.last
    end
    ensure
      Socket.do_not_reverse_lookup = orig
 end 
```

然后调用 local_ip 方法，你会得到你机器的 ip 地址。

```
Eg: ip_address= local_ip 
```

# ruby-on-rails - 带有自定义设计路线的 link_to

> ID：14019292
> 
> 赞同：0
> 
> 时间：2012-12-24T09:07:42.437
> 
> 标签：ruby-on-rails, devise, routes, link-to

干杯! 我有这样的路线代码：

```
 user_photo GET    /users/:user_id/photos/:id(.:format)      photos#show 
```

我有一个 link_to 助手：

```
= link_to 'Show', ... 
```

如何链接它以显示当前用户上传的照片？

```
user_photo_path 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:12:33.597

```
link_to 'Show', user_photo_path(@user, @photo) 
```

（这是假设您在视图中有可用的 @user 和 @photo 对象 - 在您的控制器中设置它们）

有关更多信息，请参阅[http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects](http://guides.rubyonrails.org/routing.html#creating-paths-and-urls-from-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:13:26.147

尝试这个：

我们可以指定自己的路径。

```
<%= link_to "show", "/users/"+user_id.to_s+"/photos/"+id.to_s %> 
```

# jquery - DataTables jQuery插件服务器端处理，通过ajax删除后智能分页

> ID：14019297
> 
> 赞同：0
> 
> 时间：2012-12-24T09:08:11.683
> 
> 标签：jquery, datatables

**任务：**使用 ajax 从表行中的链接删除数据库中的记录，并在（真棒：）DataTables jQuery 插件（[链接](http://datatables.net/)）中维护过滤器、排序、分页。

如果当前页面上的最后一项被成功删除，我希望分页返回，而不是显示“未找到匹配记录”之类的消息和愚蠢的分页信息，如*“显示 10 行中的 11 到 10 行”*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:08:11.683

我将从您准备好 DataTables 的步骤开始，完成[服务器端](http://datatables.net/usage/server-side)数据、过滤、分页。

**脚步：**

*   在您的行中添加一个删除链接等，（可能）来自 db.
*   触发该链接后，执行 ajax 调用以从 db 中删除该行。出于我们的目的，我们只关心删除操作的成功/失败。
*   在 jQuery ajax 调用的成功块中，我们将：
    *   在删除之前获取当前页面上的行数
    *   如果它是 1，那么我们将获得`iDisplayStart`当前页面的行数 ( ) 以及当前显示的行数 ( `iDisplayLength`)。如果它们的差异 >= 0，那么我们将使用一个小插件来重绘表格（一个 ajax 调用），或者对行进行简单的本地删除。
    *   否则，只需删除该行。

**代码：**

```
// delete user
$("a.deleteUser").live("click", function(e){
e.preventDefault();
var isDelete = confirm("Delete sub-user? This cannot be undone.");
if (isDelete == true){
    var uid = $(this).attr('uid');
    var i = $(this).attr('i');
    $.ajax({ 
        url: baseUrl + 'user/delete?uid=' + uid, 
        dataType:'json', 
        beforeSend: function() {
            listTable.fnProcessingIndicator();
        },
        success: function(response){
            if (response == 'SUCCESS'){
                var rowsOnThisPageBeforeDelete = listTable.fnGetData().length;

                if (rowsOnThisPageBeforeDelete == 1){
                    var numberOfRowsOnPage = listTable.fnSettings()._iDisplayLength;
                    var startOfRows = listTable.fnSettings()._iDisplayStart;
                    var newStartOfRows = startOfRows - numberOfRowsOnPage;

                    if (newStartOfRows >= 0){
                        listTable.fnDisplayStart(newStartOfRows);
                    }
                    else{
                        listTable.fnDeleteRow(i);
                    }
                }
                else{
                    listTable.fnDeleteRow(i);
                }                   
            }
            else{
                alert('Could not delete user. Try again later.');
            }
        },
        error: function(){
            alert('Could not delete user. Try again later.');
        },
        complete: function() {
            listTable.fnProcessingIndicator(false);
        },
    });
}
}); 
```

您需要的插件是[http://datatables.net/plug-ins/api#fnDisplayStart](http://datatables.net/plug-ins/api#fnDisplayStart)。如果您是新手，请对如何将插件与 DataTables 一起使用进行一些研究（链接中的说明）：

```
$.fn.dataTableExt.oApi.fnDisplayStart = function ( oSettings, iStart, bRedraw )
{
if ( typeof bRedraw == 'undefined' )
{
    bRedraw = true;
}

oSettings._iDisplayStart = iStart;
oSettings.oApi._fnCalculateEnd( oSettings );

if ( bRedraw )
{
    oSettings.oApi._fnDraw( oSettings );
}
};

// sample use:
/*
oTable.fnDisplayStart( 10 );
*/ 
```

**参考：**

*   [http://datatables.net/forums/discussion/comment/4527#Comment_4527](http://datatables.net/forums/discussion/comment/4527#Comment_4527)

# winforms - 如何按用户创建工作流？

> ID：14019298
> 
> 赞同：0
> 
> 时间：2012-12-24T09:08:12.450
> 
> 标签：winforms, .net-4.0, workflow, workflow-foundation-4, workflow-foundation

> **可能重复：**
> [如何在 Winforms 应用程序中托管 WorkflowFoundation 4 的 WorkflowDesigner？](https://stackoverflow.com/questions/5045971/how-can-i-host-the-workflowdesigner-of-workflowfoundation-4-in-a-winforms-applic)

我正在开发 Windows 应用程序，但遇到问题，请帮助我。

在业务规则中，多个组织之间存在合同。每个合约都有很多规则，使得系统的支持和设计变得困难。根据每个合同，合同计算有不同的系统工作流程。

我决定使用 WF4.0 让用户为每个合约设计一个工作流程，我认为这是最好的方式。

现在我的问题是：我可以在 Windows 窗体上安装 WF4.0 吗？

事实上，我可以设计一个表单，让用户通过一些拖动或选择来制作工作流程吗？

# python - Python Django httpd - 【注意】child pid XXXXX exit signal Segmentation fault（11）

> ID：14019303
> 
> 赞同：5
> 
> 时间：2012-12-24T09:08:22.980
> 
> 标签：python, django, apache

有时它会像魅力一样响应，但有时我会收到错误“未收到数据”。我四处搜寻，但没有任何效果。建议使用“ `gdb`”来调试 apache 可能出现的错误的帖子，好吧，我没有机会用 gdb 测试它，因为在我正在处理的服务器中，没有任何开发软件或库（除了python），我无法安装它们。另一半帖子建议了与使用 PHP 的网络服务器兼容的解决方案——我不知道它是否对问题有任何影响。

我的httpd配置是这样的：

```
Apache/2.2.11 (Unix) DAV/2 
mod_ssl/2.2.11 OpenSSL/0.9.8b 
mod_jk/1.2.15 
PHP/5.1.6 
mod_wsgi/2.1-BRANCH 
Python/2.4.3 configured 
```

我使用 Django，因此使用 mod_wsgi。除了使用 gdb 之外，还有其他方法可以调试此问题吗？

请注意，在我的应用程序的以前版本中，我没有收到任何这样的错误，从来没有。对于较新的版本，我没有更改技术，只是将 Django 升级到 1.3，在 CentOS5 上开始使用 ZSI 2.1。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:21:49.453

正如上面 Graham-Dumpleton 评论的那样，这似乎是一个**众所周知的问题**，`mod_wsgi`即`expat`库版本兼容性。

[这里描述](http://code.google.com/p/modwsgi/wiki/IssuesWithExpatLibrary)了失败的原因（以及解决它的步骤）

## tl;博士解决方案（来自上面的链接）：

> 请注意，这只适用于 Python 2.5 之前的 Python 版本。从 Python 2.5 开始，与 Python 捆绑在一起的“expat”库的副本以名称空间为前缀，从而避免与之前加载的“expat”库发生名称冲突。

# python - Python 和 SQLite：如果我插入具有相同主键的两行会发生什么？

> ID：14019306
> 
> 赞同：-3
> 
> 时间：2012-12-24T09:08:37.680
> 
> 标签：python, sql, sqlite

这是我的桌子：

```
drop table if exists stocks;
create table stocks (
  stock_id integer primary key not null,
  stockname string not null
); 
```

Python代码：

```
import sqlites3    
rows = [(1, 'IBM'),
          (2, 'MSOFT'),
          (1, 'GOOG'),
         ]
#c.executemany('insert into stocks values (?,?)', rows )
connection.commit() 
```

在 中`rows`，第 1 和第 3 具有相同的主键。

如果我这样做会发生什么？会有例外吗？我能做些什么来捕捉异常？

实际上，它们`rows`是动态输入的，所以我一开始无法对它们进行排序或编辑`rows`。我正在 Ubuntu 10.04 上使用 Flask 0.9 和 Python 2.6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:13:46.593

会有例外；`sqlite3.IntegrityError`将提出：

```
>>> c.executemany('insert into stocks values (?,?)', [(1, 'IBM'), (2, 'MSOFT'), (1, 'GOOG')])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
sqlite3.IntegrityError: PRIMARY KEY must be unique 
```

引发异常之前的任何插入都将成功，因此您希望`connection.rollback()`在发生异常时调用。更好的是，使用连接作为[上下文管理器](http://docs.python.org/2/library/sqlite3.html#using-the-connection-as-a-context-manager)来自动回滚或提交：

```
try:
    with connection:
        c = connection.cursor()
        c.executemany('insert into stocks values (?,?)', rows)
    # insertion succeeded, `connection.commit()` is called automatically
except sqlite3.IntegrityError:
    # insertion failed, `connection.rollback()` is called automatically 
```

# asp.net - 如果输入文本为空，如何将 NULL 插入 DB

> ID：14019313
> 
> 赞同：1
> 
> 时间：2012-12-24T09:09:46.503
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我正在尝试使用 AJAX (POST) 将 HTML 表单传递给服务器。该表单包含多个文本字段。如果这些字段为空，则控制器接收诸如 field1=""、field2=""、field3="" 之类的值。然后我尝试向数据库添加值（使用 EntityFramework 4.1），如下所示：

```
NewObject newobject = new NewObject { _field1 = field1, _field2 = field2, _field3 = field3};
myDBContext.NewObjects.Add(newobject);
myDBContext.SaveChanges(); 
```

*我怎样才能使空字符串存储`NULL`在数据库中？*

唯一想到的：

```
f1 = (field1!= "") ? field1 : null;
f2 = (field2!= "") ? field2 : null;
f3 = (field3!= "") ? field3 : null;
NewObject newobject = new NewObject { _field1 = f1, _field2 = f2, _field3 = f3};
myDBContext.NewObjects.Add(newobject);
myDBContext.SaveChanges(); 
```

是否有更好的解决方案（在任何级别（EntityFramework，使用数据注释，Sql Server））？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:17:51.120

使用 Sql Server 时可以使用`DBNull.Value`设置空值。对于实体框架，我认为如果值为空，它会在数据库中将其设置为空。

你可以稍微缩短你的代码。

```
NewObject newobject = new NewObject 
                     {
                         _field1 = (field1=="") ? null : field1,
                         _field2 = (field2=="") ? null : field2,
                         _field3 = (field3=="") ? null : field3
                      };
myDBContext.NewObjects.Add(newobject);
myDBContext.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:36:24.067

您可以创建扩展方法。

```
public static class StringExtensions {
    public static string NullIfEmpty(this string text) {
        return string.IsNullOrEmpty(text)? null : text;
    }
} 
```

然后只需调用该方法

```
NewObject newobject = new NewObject 
                     {
                         _field1 = field1.NullIfEmpty(),
                         _field2 = field2.NullIfEmpty(),
                         _field3 = field3.NullIfEmpty()
                      };
myDBContext.NewObjects.Add(newobject);
myDBContext.SaveChanges(); 
```

# android - 无法在 android.R.layout.simple_list_item_checked 中选择项目

> ID：14019317
> 
> 赞同：1
> 
> 时间：2012-12-24T09:10:09.303
> 
> 标签：android, listview

我在我的应用程序中使用`android.R.layout.simple_list_item_checked`a `listview`。但我无法选择已选中的列表项。

这是代码

```
 ArrayAdapter<String> arrayadapter = new ArrayAdapter<String>(Selectfarmer.this,    android.R.layout.simple_list_item_checked,arraylistfarmer);
    lvselectfarmer.setAdapter(arrayadapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:19:13.543

我找到了，你需要使用

```
lvselectfarmer.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:18:07.880

试试下面的代码，

```
ArrayAdapter<String> adapter=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice,arraylistfarmer);
lvselectfarmer.setAdapter(arrayadapter);
int len = lvselectfarmer.getCount();
SparseBooleanArray checked = lvselectfarmer.getCheckedItemPositions();
for (int i = 0; i < len; i++)
 if (checked.get(i)) {
  String item = lvselectfarmer.get(i);
  /* do whatever you want with the checked item */
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:48:01.157

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    CheckedTextView textview = (CheckedTextView)v;
    textview.setChecked(!textview.isChecked());
} 
```

# ruby-on-rails - 安装 nokogiri - 无法构建 gem 原生扩展

> ID：14019318
> 
> 赞同：1
> 
> 时间：2012-12-24T09:10:12.947
> 
> 标签：ruby-on-rails, ruby, gem, nokogiri

在 Ubuntu 12 上安装 Nokogiri 时，出现错误：

```
Installing nokogiri (1.4.4) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb                                                           
extconf.rb:10: Use RbConfig instead of obsolete and deprecated Config.                          
checking for libxml/parser.h... yes                                                             
checking for libxslt/xslt.h... yes                                                              
checking for libexslt/exslt.h... yes                                                            
checking for iconv_open() in iconv.h... yes                                                     
checking for xmlParseDoc() in -lxml2... yes                                                     
checking for xsltParseStylesheetDoc() in -lxslt... yes                                          
checking for exsltFuncRegister() in -lexslt... yes                                              
checking for xmlFirstElementChild()... yes                                                      
checking for xmlRelaxNGSetParserStructuredErrors()... yes                                       
checking for xmlRelaxNGSetParserStructuredErrors()... yes                                       
checking for xmlRelaxNGSetValidStructuredErrors()... yes                                        
checking for xmlSchemaSetValidStructuredErrors()... yes                                         
checking for xmlSchemaSetParserStructuredErrors()... yes                                        
creating Makefile                                                                               

make                                                                                            
compiling html_sax_parser_context.c                                                             
compiling xml_io.c                                                                              
compiling xml_entity_reference.c                                                                
compiling xml_schema.c                                                                          
compiling xml_element_content.c                                                                 
compiling xml_reader.c                                                                          
compiling xml_sax_push_parser.c                                                                 
compiling xml_sax_parser.c                                                                      
compiling xslt_stylesheet.c                                                                     
compiling xml_element_decl.c                                                                    
compiling xml_node.c                                                                            
compiling xml_cdata.c                                                                           
compiling xml_processing_instruction.c
compiling xml_entity_decl.c
compiling xml_attribute_decl.c
compiling xml_xpath_context.c
xml_xpath_context.c: In function ‘xpath_generic_exception_handler’:
xml_xpath_context.c:184:3: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [xml_xpath_context.o] Error 1

Gem files will remain installed in /home/alex/.bundler/tmp/22194/gems/nokogiri-1.4.4 for inspection.
Results logged to /home/alex/.bundler/tmp/22194/gems/nokogiri-1.4.4/ext/nokogiri/gem_make.out
An error occurred while installing nokogiri (1.4.4), and Bundler cannot continue.
Make sure that `gem install nokogiri -v '1.4.4'` succeeds before bundling. 
```

我已经安装了 libxslt-dev 和 libxml2-dev，但正如你所见，它没有帮助。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T20:42:21.547

我偶然发现了这个试图在 ubuntu 13.04 上安装 bigbluebutton

我解决了这个技巧来编译恢复系统范围内的 -Wformat-security gcc 标志

**小心做第一个`rm`。它可以破坏你的整个系统！**

```
rm /usr/bin/gcc
nano /usr/bin/gcc
    ## contents of /usr/bin/gcc
    #!/bin/sh
    gcc-4.7 $* -Wno-format-security
    ## save and exit
chmod u+x /usr/bin/gcc
gem install nokogiri -v '1.4.4' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:14:12.057

您需要 1.4.4 而不是最新的 1.5.6 是否有特定原因？否则我建议升级。

Nokogiri[变更日志](https://github.com/sparklemotion/nokogiri/blob/master/CHANGELOG.rdoc)显示他们在 1.5.4 中修复了这个问题：

> 在使用 `-Werror=format-security`. 第680章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:15:05.543

@Confusion 有正确的想法。

Bundler 可能在 Gemfile 和/或 Gemfile.lock 中锁定到 nokogiri-1.4.4。@Confusion 运行包更新的答案应该允许您的 Ruby Bundler 环境使用成功安装的 nokogiri-1.5.6。

# c# - 如何使用 linq to xml 检查 xml 文件是否包含特定元素

> ID：14019319
> 
> 赞同：0
> 
> 时间：2012-12-24T09:10:12.117
> 
> 标签：c#, xml, exception, linq-to-xml

在我的 XML 文件中，我想检查我的 xml 文件中是否有和设备元素

我试试这段代码，但 `Null Reference Exception`如果它没有找到设备元素，请给我

```
public bool HaveAnyDevice()
{
    XDocument doc = XDocument.Load(path);
    return !doc.Element("Settings").Elements("Device").Any();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:11:28.957

您的代码应该可以工作。我认为您的 xml 中没有元素`Settings`。因此，只需在尝试获取它的元素之前验证它是否存在：

```
 public bool HaveAnyDevice()
 {
     XDocument doc = XDocument.Load(path);
     var settings = doc.Element("Settings");
     return (settings != null) && settings.Elements("Device").Any();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:13:26.013

如果您正在获得 NRE，那么您的`doc.Element("Settings")`为空。您可以在检查下一个元素之前检查它。

```
return doc.Element("Settings") != null && 
       doc.Element("Settings").Elements("Device").Any(); 
```

# opengl-es - opengl中灯光的位置

> ID：14019322
> 
> 赞同：0
> 
> 时间：2012-12-24T09:10:43.427
> 
> 标签：opengl-es, opengl-es-2.0, opengl-es-lighting

我正在尝试绘制一个旋转立方体并在该立方体前面的固定位置添加一个聚光灯。但是因为我在 z 轴上设置了错误的值，所以灯光不显示。在我尝试了不同的光线位置后，立方体终于如我所愿地显示出来了。但我仍然不知道为什么这个值有效。

这是错误的代码。但我认为价值是合理的。

```
 Matrix.setIdentityM(mLightModelMatrix, 0);
    Matrix.translateM(mLightModelMatrix, 0, 0.0f, 0.0f, 0.5f);
    Matrix.multiplyMV(mLightPosInWorldSpace, 0, mLightModelMatrix, 0, mLightPosInModelSpace, 0);
    Matrix.multiplyMV(mLightPosInEyeSpace, 0, mViewMatrix, 0, mLightPosInWorldSpace, 0);
    GLES20.glUniform3f(muLightPosHandler,
            mLightPosInEyeSpace[0],
            mLightPosInEyeSpace[1],
            mLightPosInEyeSpace[2]); 
```

这是正确的代码。但我不知道为什么它有效。

```
 Matrix.setIdentityM(mLightModelMatrix, 0);
    Matrix.translateM(mLightModelMatrix, 0, 0.0f, 0.0f, 2.8f);
    Matrix.multiplyMV(mLightPosInWorldSpace, 0, mLightModelMatrix, 0, mLightPosInModelSpace, 0);
    Matrix.multiplyMV(mLightPosInEyeSpace, 0, mViewMatrix, 0, mLightPosInWorldSpace, 0);
    GLES20.glUniform3f(muLightPosHandler,
            mLightPosInEyeSpace[0],
            mLightPosInEyeSpace[1],
            mLightPosInEyeSpace[2]); 
```

这两个片段之间的区别仅在于光位置的 z 轴。[您可以从这里](https://github.com/ufo22940268/Android_RollingBall/blob/master/src/hongbosb/rollingball/model/GLEnvironmentEntity.java#L261)获取所有源代码。

我认为`0.0f, 0.0f, 0.5f`位置合理的原因是立方体正面的中心点`0.0f, 0,0f, 0.5f`在变换之前。所以它会给立方最强的光。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:38:33.903

这是因为您有一个由光锥定义的聚光灯。在 2.8 之前的任何距离，锥形都不足以照亮整个立方体，如下图所示：

![在此处输入图像描述](../Images/898f87c97a46f8f1f2783e43001cd6ce.png)

要使立方体的整个面都被照亮，您需要将光移得更远（如您所见）或加宽光锥。

每个面只有两个三角形，在第一种情况下你不会得到太多的照明，因为没有一个顶点被照亮。顶点上的光决定了面上的光。如果您将模型分解为更多面，您将看到效果。

# javascript - 更改表单输入 onload 然后 onhover 的值，fade onclick 最后删除类型？

> ID：14019327
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:11:06.267
> 
> 标签：javascript, jquery, forms

希望我没有把这个头衔吓跑太多人：-$

使用 Javascript 或 jQuery，我们如何进行表单文本输入：

1.  显示默认值/占位符文本
2.  悬停时，用不同的文本替换默认值/占位符文本
3.  单击时，稍微淡出不同的文本
4.  最后，当用户开始输入时，完全删除默认/占位符文本

**以下是图像中这个问题的主要内容：**

![行动#1](../Images/4fe078669c0545725d586c8dcf73229a.png)

此步骤只是在文本输入框中放置一个漂亮的默认文本或占位符。十分简单。

![行动 #2](../Images/93c17963c2056990fbbb61509ffcd332.png)

现在，用户将鼠标悬停在输入框上。我们想给他们一个关于他们可以搜索什么的建议。从 Action #1 中的文本到该文本的一个很好的淡入淡出效果将是惊人的。

![行动#3](../Images/388358451c1ba9afb7a8dbf284446b03.png)

在这里，我们淡化了建议文本，鼓励用户输入他们自己的搜索词。

![行动#4](../Images/28af3b6126db5436a8e383ccd058223a.png)

最后，用户开始输入，建议文本被完全删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:19:44.630

它只是基本的 HTML、jQuery 和 CSS。

**HTML**：

```
<input type="text" placeholder="Search..." data-placeholder-hover="Search for stuff!" />​ 
```

**JavaScript**：

```
$('input[data-placeholder-hover]').on('mouseenter mouseleave', function() {
    var $this = $(this);

    $this.toggleClass('hovered');

    var temp = $this.prop('placeholder');

    $this.prop('placeholder', $this.data('placeholder-hover'))
    $this.data('placeholder-hover', temp);
});​ 
```

**CSS**：

```
input.hovered::-webkit-input-placeholder {
    color: red;
}

input.hovered:-moz-placeholder {
    color: red;
}

input.hovered:-ms-input-placeholder {
    color: red;
}​ 
```

**演示：http: [//jsfiddle.net/b94mb/](http://jsfiddle.net/b94mb/)**

`:focus`您可以使用和其他伪选择器更多地设置文本框的样式：http: [//jsfiddle.net/b94mb/4/](http://jsfiddle.net/b94mb/4/)

# parent-child - db4o - 一个子列表的性能问题，每个子列表都引用了他的父节点

> ID：14019328
> 
> 赞同：0
> 
> 时间：2012-12-24T09:11:08.187
> 
> 标签：parent-child, db4o

我有一个父/子关系，如下所示，我使用 C# 和 db4o 进行持久性。

```
class Parent{
    List<Child> children = new List<Child>();
}

class Child{
    Parent parent;
} 
```

检索类型的对象需要很长时间`Child`。
有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:00:14.127

我不知道您的数据编码的图形。但看起来您正在为每个对象加载图表的完整/大部分。

在没有特殊配置的情况下，Db4o 加载与加载的对象有关系的所有对象。

如果您想要延迟加载，您应该查看[透明激活](http://community.versant.com/documentation/reference/db4o-8.0/java/tutorial/docs/TransparentActivation.html)。它需要更多的配置。

# ios - 信息灯按钮动画

> ID：14019329
> 
> 赞同：2
> 
> 时间：2012-12-24T09:11:11.960
> 
> 标签：ios, uibarbuttonitem, uianimation

我无法显示`infobutton`导航到信息页面/视图。

我已经写了这段代码。

```
UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithCustomView:infoButton];
toolBar.items = [NSArray arrayWithObjects:infoButtonItem, nil]; 
```

我有`infolight`按钮，但我现在不知道如何执行动画和导航操作方法以翻转到信息页面。

我还希望信息按钮留在中心，目前它在左角。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:38:54.267

```
This will create ur info button in center.
UIButton *infoButton = [UIButton buttonWithType:UIButtonTypeInfoLight];
    UIBarButtonItem *infoButtonItem = [[UIBarButtonItem alloc] initWithCustomView:infoButton];
    [infoButton addTarget:self action:@selector(goToRechercherView) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *flexibleLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    toolbar.items = [NSArray arrayWithObjects:flexibleLeft,infoButtonItem,flexibleLeft, nil];

This is for swipe animation. add your view inside.
-(void)goToRechercherView{
    [UIView beginAnimations:@"flipview" context:nil];
    [UIView setAnimationDuration:2];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft
                           forView:self.view cache:YES];
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:20:53.090

有两种方法可以做到这一点...

第一个是……

```
newView setFrame:CGRectMake( 0.0f, 480.0f, 320.0f, 480.0f)]; //notice this is OFF screen!
[UIView beginAnimations:@"animateView" context:nil];
[UIView setAnimationDuration:0.4];
[newView setFrame:CGRectMake( 0.0f, 0.0f, 320.0f, 480.0f)]; //notice this is ON screen!
[UIView commitAnimations]; 
```

第二种选择是使用内置动画作为翻转和卷曲：

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:1.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight
                               forView:newView
                                cache:YES];

    [self.navigationController.view addSubview:settingsView.view];
    [UIView commitAnimations]; 
```

# windows - 使用 MSVC 2010 构建 OpenSSL 1.0.1c 时出错

> ID：14019336
> 
> 赞同：2
> 
> 时间：2012-12-24T09:12:04.207
> 
> 标签：windows, visual-c++, openssl, visual-studio-2010

我已经成功配置 OpenSSL 进行构建，但是当我运行时，`nmake`我得到了这个：

```
c:\Development\Qt\5\OpenSSL>nmake -f ms\ntdll.mak test

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01
Copyright (C) Microsoft Corporation.  All rights reserved.

cl /Fotmp32dll\md4test.obj -Iinc32 -Itmp32dll /MD /Ox /O2 /Ob2 -DOPENSSL_THREADS  -DDSO_WIN32
-W3 -Gs0 -GF -Gy -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -D_CRT_SECURE_NO_DEPRECATE
-DOPENSSL_USE_APPLINK -I. -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_KRB5 -DOPENSSL_NO_JPAKE
-DOPENSSL_NO_STATIC_ENGINE /Zi /Fdtmp32dll/app -c .\crypto\md4\md4test.c

.\crypto\md4\md4test.c : fatal error C1033: cannot open program database 'c:\development\qt\5\openssl\tmp32dll\app.pdb'
NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\cl.EXE"' : return code '0x2'
Stop. 
```

建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-13T18:57:37.533

这通常发生在其他一些应用程序同时尝试访问该文件时。对我来说，它就是 Dropbox。所以，我不得不禁用同步。

另一个在编译期间访问 PDB 文件的程序是 mspdbsrv.exe。该程序由构建过程自动启动。杀死它，并删除 tmp32dll 文件夹中的所有文件。它可能是以前的构建尝试遗留下来的。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T23:35:40.537

当我不小心使用“ms\nt.mak”构建时，我遇到了这个错误，但后来尝试使用“ms\ntdll.mak”进行测试。确保使用相同的 make 文件进行构建和测试。

# c++ - C++ (2012 Express) CString 问题

> ID：14019339
> 
> 赞同：1
> 
> 时间：2012-12-24T09:12:21.737
> 
> 标签：c++, visual-studio

> **可能重复：**
> [使用 VS Express 时在控制台应用程序中使用 CString](https://stackoverflow.com/questions/5760186/use-cstring-in-console-app-when-using-vs-express)

我对C非常生疏，自从我上次使用它以来似乎发生了很多变化。

我正在尝试构建一个用 VS2008 编写的程序，但我使用的是 2012 Express。所以，很自然，错误无处不在。

列表中的第一个是 CString。不断出现作为未声明的标识符。据我所知，该库不包含在 VS2012 Express 中。所以我需要找到一个解决方法。到目前为止，谷歌给了我我无法理解的结果（如前所述，我很生疏）。

谁能在下面的代码中给我一个更简单的 CString 替代方案？谢谢！

```
bool Decoder::decode(LPCWSTR theCaption, TABLE_SUMMARY& table)
{

 // If the caption doesn't contain the word "You" return false
CString strCaption = theCaption;

if (-1 == strCaption.Find(L"You"))
    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:16:45.093

我没有使用 MFC 已经很久了，所以我不能确定这个建议不会导致死路......

您需要自己编译 MFC。[在这里](http://www.codeproject.com/Articles/30439/How-to-compile-MFC-code-in-Visual-C-Express)我找到了一些详细的建议。正如我所说，我现在不能尝试。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T00:38:48.820

请参阅可以替代 MFC 的[WTL](http://sourceforge.net/projects/wtl/)，或者切换到 STL，如果您只需要处理 CString，则可以使用（例如）std::string，添加接口中缺少的内容。

我认为最有趣的是 CString*自动*转换为 ANSI 程序的 LPCSTR 或 Unicode 的 LPCWSTR。

即类似的东西

```
class CString : std::string {
public:

  operator PCSTR() const { return c_str(); }
  operator PCWSTR() const { return c_wstr(); }
}; 
```

可以解决您的直接问题（未经测试的代码......）

请注意，这种隐式运算符允许将 CString**直接**传递给 WINAPI。

如果您将它与智能复制分配（写入时）配对，该 MFC 实现（对不起，我不确定 std::string ），您会喜欢 CString。

您将需要实现任何缺少的 CString 成员（如果受到限制应该相当容易......）

当然，任何其他 MFC 参考都是不同的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:09:13.613

为什么不使用基本的 CRT 功能？

```
bool Decoder::decode(LPCWSTR theCaption, TABLE_SUMMARY& table)
{
    if (wcsstr(theCaption, L"You") == NULL)
        return false;
    ...
} 
```

如果您需要不区分大小写，我推荐这个[wcsistr](http://www.codeproject.com/Articles/383185/SSE-accelerated-case-insensitive-substring-search)实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:22:49.330

```
#include <cwchar>

...

if (std::wcsstr(theCaption, L"You") == 0)
    return false 
```

# javascript - 延续和回调有什么区别？

> ID：14019341
> 
> 赞同：152
> 
> 时间：2012-12-24T09:12:26.150
> 
> 标签：javascript, continuations, callcc, continuation-passing

我一直在浏览整个网络以寻找关于延续的启示，令人难以置信的是，最简单的解释如何完全让像我这样的 JavaScript 程序员感到困惑。当大多数文章用 Scheme 中的代码解释延续或使用 monad 时，尤其如此。

现在我终于认为我已经理解了延续的本质，我想知道我所知道的是否真的是事实。如果我认为是真的不是真的，那是无知而不是开悟。

所以，这就是我所知道的：

在几乎所有语言中，函数都显式地将值（和控制）返回给它们的调用者。例如：

```
var sum = add(2, 3);

console.log(sum);

function add(x, y) {
    return x + y;
}
```

现在在具有一流函数的语言中，我们可以将控制权和返回值传递给回调，而不是显式返回给调用者：

```
add(2, 3, function (sum) {
    console.log(sum);
});

function add(x, y, cont) {
    cont(x + y);
}
```

因此，我们不是从一个函数返回一个值，而是继续另一个函数。因此这个函数被称为第一个函数的延续。

那么延续和回调有什么区别呢？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-12-24T14:02:43.947

我相信延续是回调的特例。一个函数可以回调任意数量的函数，任意次数。例如：

```
var array = [1, 2, 3];

forEach(array, function (element, array, index) {
    array[index] = 2 * element;
});

console.log(array);

function forEach(array, callback) {
    var length = array.length;
    for (var i = 0; i < length; i++)
        callback(array[i], array, i);
}
```

但是，如果一个函数回调另一个函数作为它所做的最后一件事，那么第二个函数称为第一个函数的延续。例如：

```
var array = [1, 2, 3];

forEach(array, function (element, array, index) {
    array[index] = 2 * element;
});

console.log(array);

function forEach(array, callback) {
    var length = array.length;

    // This is the last thing forEach does
    // cont is a continuation of forEach
    cont(0);

    function cont(index) {
        if (index < length) {
            callback(array[index], array, index);
            // This is the last thing cont does
            // cont is a continuation of itself
            cont(++index);
        }
    }
}
```

如果一个函数调用另一个函数作为它做的最后一件事，那么它被称为尾调用。像 Scheme 这样的一些语言会执行尾调用优化。这意味着尾调用不会产生函数调用的全部开销。相反，它被实现为一个简单的 goto（调用函数的堆栈帧被尾调用的堆栈帧替换）。

**奖金**：继续传球风格。考虑以下程序：

```
console.log(pythagoras(3, 4));

function pythagoras(x, y) {
    return x * x + y * y;
}
```

现在，如果每个操作（包括加法、乘法等）都以函数的形式编写，那么我们将有：

```
console.log(pythagoras(3, 4));

function pythagoras(x, y) {
    return add(square(x), square(y));
}

function square(x) {
    return multiply(x, x);
}

function multiply(x, y) {
    return x * y;
}

function add(x, y) {
    return x + y;
}
```

此外，如果我们不允许返回任何值，那么我们将不得不使用延续，如下所示：

```
pythagoras(3, 4, console.log);

function pythagoras(x, y, cont) {
    square(x, function (x_squared) {
        square(y, function (y_squared) {
            add(x_squared, y_squared, cont);
        });
    });
}

function square(x, cont) {
    multiply(x, x, cont);
}

function multiply(x, y, cont) {
    cont(x * y);
}

function add(x, y, cont) {
    cont(x + y);
}
```

这种不允许返回值（因此您必须求助于传递延续）的编程风格称为延续传递风格。

然而，延续传递风格存在两个问题：

1.  传递延续会增加调用堆栈的大小。除非您使用像 Scheme 这样消除尾调用的语言，否则您将面临堆栈空间不足的风险。
2.  编写嵌套函数很痛苦。

第一个问题可以通过异步调用延续在 JavaScript 中轻松解决。通过异步调用延续，函数在调用延续之前返回。因此调用堆栈大小不会增加：

```
Function.prototype.async = async;

pythagoras.async(3, 4, console.log);

function pythagoras(x, y, cont) {
    square.async(x, function (x_squared) {
        square.async(y, function (y_squared) {
            add.async(x_squared, y_squared, cont);
        });
    });
}

function square(x, cont) {
    multiply.async(x, x, cont);
}

function multiply(x, y, cont) {
    cont.async(x * y);
}

function add(x, y, cont) {
    cont.async(x + y);
}

function async() {
    setTimeout.bind(null, this, 0).apply(null, arguments);
}
```

第二个问题通常使用一个名为的函数来解决，该函数`call-with-current-continuation`通常缩写为`callcc`. 不幸的是`callcc`不能在 JavaScript 中完全实现，但我们可以为它的大多数用例编写一个替换函数：

```
pythagoras(3, 4, console.log);

function pythagoras(x, y, cont) {
    var x_squared = callcc(square.bind(null, x));
    var y_squared = callcc(square.bind(null, y));
    add(x_squared, y_squared, cont);
}

function square(x, cont) {
    multiply(x, x, cont);
}

function multiply(x, y, cont) {
    cont(x * y);
}

function add(x, y, cont) {
    cont(x + y);
}

function callcc(f) {
    var cc = function (x) {
        cc = x;
    };

    f(cc);

    return cc;
}
```

该`callcc`函数接受一个函数`f`并将其应用于`current-continuation`（缩写为`cc`）。`current-continuation`是一个延续函数，它在调用`callcc`.

考虑函数的主体`pythagoras`：

```
var x_squared = callcc(square.bind(null, x));
var y_squared = callcc(square.bind(null, y));
add(x_squared, y_squared, cont); 
```

第二`current-continuation`个`callcc`是：

```
function cc(y_squared) {
    add(x_squared, y_squared, cont);
} 
```

同样`current-continuation`，第一个`callcc`是：

```
function cc(x_squared) {
    var y_squared = callcc(square.bind(null, y));
    add(x_squared, y_squared, cont);
} 
```

由于`current-continuation`第一个`callcc`包含另一个`callcc`，因此必须将其转换为继续传递样式：

```
function cc(x_squared) {
    square(y, function cc(y_squared) {
        add(x_squared, y_squared, cont);
    });
} 
```

因此，从本质`callcc`上讲，将整个函数体从逻辑上转换回我们的起点（并将这些匿名函数命名为`cc`）。使用 callcc 实现的 pythagoras 函数变为：

```
function pythagoras(x, y, cont) {
    callcc(function(cc) {
        square(x, function (x_squared) {
            square(y, function (y_squared) {
                add(x_squared, y_squared, cont);
            });
        });
    });
} 
```

同样，您不能`callcc`在 JavaScript 中实现，但您可以在 JavaScript 中实现延续传递样式，如下所示：

```
Function.prototype.async = async;

pythagoras.async(3, 4, console.log);

function pythagoras(x, y, cont) {
    callcc.async(square.bind(null, x), function cc(x_squared) {
        callcc.async(square.bind(null, y), function cc(y_squared) {
            add.async(x_squared, y_squared, cont);
        });
    });
}

function square(x, cont) {
    multiply.async(x, x, cont);
}

function multiply(x, y, cont) {
    cont.async(x * y);
}

function add(x, y, cont) {
    cont.async(x + y);
}

function async() {
    setTimeout.bind(null, this, 0).apply(null, arguments);
}

function callcc(f, cc) {
    f.async(cc);
}
```

该函数`callcc`可用于实现复杂的控制流结构，例如 try-catch 块、协程、生成器、[fibers](https://github.com/aaditmshah/fiber)等。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-09-19T10:42:26.530

尽管写得很精彩，但我认为您有点混淆了您的术语。例如，当调用是函数需要执行的最后一件事时发生尾调用是正确的，但就延续而言，尾调用意味着函数不会修改调用它的延续，只是它更新传递给延续的值（如果需要）。这就是为什么将尾递归函数转换为 CPS 如此简单（您只需将延续作为参数添加并在结果上调用延续）。

将延续称为回调的特殊情况也有点奇怪。我可以看到它们是如何轻松组合在一起的，但延续并不是因为需要与回调区分开来。延续实际上表示***完成计算的剩余指令***，或从*该*时间点开始的剩余计算。您可以将延续视为需要填充的洞。如果我可以捕获程序的当前延续，那么我可以准确地回到我捕获延续时程序的状态。（这肯定会使调试器更容易编写。）

在这种情况下，您的问题的答案是，*回调*是一种通用的东西，它在由调用者 [回调的] 提供的某些合同指定的任何时间点被调用。回调可以有尽可能多的参数，并且可以以任何它想要的方式构造。那么，一个*continuation*必然是一个单参数过程，它解析传递给它的值。延续必须应用于单个值，并且应用程序必须在最后发生。当延续完成执行表达式时，表达式就完成了，并且根据语言的语义，可能会或可能不会产生副作用。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-10-24T22:22:47.320

简短的回答是，延续和回调之间的区别在于，在调用（并完成）回调之后，执行会在调用它的点恢复，而调用延续会导致执行在创建延续的点恢复。换句话说：*延续永远不会返回*。

考虑函数：

```
function add(x, y, c) {
    alert("before");
    c(x+y);
    alert("after");
} 
```

（我使用 Javascript 语法，即使 Javascript 实际上不支持一流的延续，因为这是您提供示例的内容，对于不熟悉 Lisp 语法的人来说，它会更容易理解。）

现在，如果我们向它传递一个回调：

```
add(2, 3, function (sum) {
    alert(sum);
}); 
```

然后我们将看到三个警报：“之前”、“5”和“之后”。

另一方面，如果我们要向它传递一个与回调做同样事情的延续，就像这样：

```
alert(callcc(function(cc) {
    add(2, 3, cc);
})); 
```

那么我们只会看到两个警报：“之前”和“5”。调用`c()`inside`add()`结束执行`add()`并导致`callcc()`返回；返回的`callcc()`值是作为参数传递给`c`（即总和）的值。

从这个意义上说，即使调用延续看起来像一个函数调用，它在某些方面更类似于返回语句或抛出异常。

事实上， call/cc 可以用来给不支持的语言添加返回语句。例如，如果 JavaScript 没有 return 语句（相反，像许多 Lisp 语言一样，只返回函数体中最后一个表达式的值）但有 call/cc，我们可以像这样实现 return：

```
function find(myArray, target) {
    callcc(function(return) {
        var i;
        for (i = 0; i < myArray.length; i += 1) {
            if(myArray[i] === target) {
                return(i);
            }
        }
        return(undefined); // Not found.
    });
} 
```

调用`return(i)`会调用一个延续，该延续终止匿名函数的执行并导致`callcc()`返回`i`在`target`中找到的索引`myArray`。

（注意：在某些方面，“返回”类比有点简单化。例如，如果延续从创建它的函数中逃脱 - 通过保存在全局某处，例如 - 该函数可能即使它只*被调用一次，它也可以返回多次*。）

Call/cc 可以类似地用于实现异常处理（throw 和 try/catch）、循环和许多其他控制结构。

为了消除一些可能的误解：

*   为了支持一流的延续，无论如何都不需要尾调用优化。考虑到即使是 C 语言也有一种（受限制的）形式的延续`setjmp()`，它创建一个延续，并且`longjmp()`调用一个延续！

    *   另一方面，如果你天真地尝试在没有尾调用优化的情况下以连续传递风格编写程序，那么你注定最终会溢出堆栈。
*   没有特别的理由继续需要只接受一个参数。只是延续的参数成为 call/cc 的返回值，而 call/cc 通常被定义为具有单个返回值，因此延续自然必须恰好取一个。在支持多个返回值的语言中（如 Common Lisp、Go 或实际上是 Scheme），完全有可能拥有接受多个值的延续。

# php - Javascript 内存管理

> ID：14019345
> 
> 赞同：2
> 
> 时间：2012-12-24T09:12:37.447
> 
> 标签：php, jquery, kendo-ui

我目前正在使用 Kendo UI、jQuery 和 Symfony 1.4 开发一个项目，并且我有一些全局变量。

```
<script type="text/javascript">
  var addURL = '<?php echo url_for('dashboard/addEmployee') ?>';
  var deleteURL = '<?php echo url_for('dashboard/deleteEmployee') ?>';
  var editURL = '<?php echo url_for('dashboard/editEmplouee') ?>';
  var viewURL = '<?php echo url_for('dashboard/viewEmployees') ?>';
      ... some other URLs follow here.
</script> 
```

我会使用这些变量如下：

```
$.ajax({
  url: addURL,
  .. other options here
}); 
```

例如，假设我有很多全局变量，可能有一百个，我是否需要担心“破坏”这些变量？因为我在某处读到 javascript 是垃圾收集的。当我更改页面时，这些变量会被 GC 收集吗？

最后关于剑道用户界面，我使用剑道用户界面小部件窗口作为我项目中的对话框，关闭后我将如何处理对话框？因为我正在重用从信息消息到错误消息的同一个对话框。如果元素的点击处理程序结束，它是否会丢失/销毁（超出范围）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:29:18.830

> “……我需要担心‘破坏’这些变量吗？”

我不知道您是否需要担心，但是用 定义的全局变量`var name = expression`不能用 手动删除，也不能通过`delete`垃圾收集（GC）删除。

如果您想以可以单独删除的方式定义字符串，请将它们定义为对象的属性。如果您想了解更多关于使用 javascript 的信息`delete`，请阅读[此](http://perfectionkills.com/understanding-delete/)。

如果您想确保您的字符串可供 GC 使用，则在函数内定义它们，并确保该函数（更准确地说，由执行该函数生成的任何“执行上下文”）不是一个或多个“闭包”的一部分" 范围链。通过这样做，函数（和 GC）将不得不做更多的工作，因此在内存和 CPU 负载之间存在权衡。

> “当我更改页面时，这些变量会被 GC 收集吗？”

与 DOM 一样，javascript 的整个`window`对象（全局命名空间和其中的所有内容）在页面更改/重新加载时被销毁。我不确定说 GC 进行破坏是否正确，但它是学术性的——它要么是 GC，要么是非常类似的东西。

# oracle - dbms_scheduler 中未发生调度作业

> ID：14019346
> 
> 赞同：0
> 
> 时间：2012-12-24T09:12:40.357
> 
> 标签：oracle, plsql, oracle10g, oracle11g

下面是我创建的 dbms_scheduler，根据我创建的工作，它必须在我提到的时间从 empp 表中删除员工“simon”，程序成功执行但行没有被删除，请帮我解决。

```
begin
 dbms_scheduler.create_job
 (job_name => 'test_full_job_def',
 job_type => 'PLSQL_BLOCK',
 job_action=> 
   'begin 
    delete from empp where NAME="simon"; 
    commit; 
   end;',
   repeat_interval => 'FREQ=DAILY; BYHOUR=13; BYMINUTE=30',
   enabled=>true,
   auto_drop=>false,
   comments=>'Delete simon matches from the empp table');
end; 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:15:38.237

请尝试使用此代码

```
begin
 dbms_scheduler.create_job
 (job_name => 'test_full_job_def',
 job_type => 'PLSQL_BLOCK',
 job_action=> execute immediate('delete from empp where NAME='simon''),
   repeat_interval => 'FREQ=DAILY; BYHOUR=13; BYMINUTE=30',
   enabled=>true,
   auto_drop=>false,
   comments=>'Delete simon matches from the empp table');
end; 
```

# c# - MVC3 razor 中已经存在的用户

> ID：14019348
> 
> 赞同：-3
> 
> 时间：2012-12-24T09:12:56.267
> 
> 标签：c#, sql-server, asp.net-mvc-3

我正在做项目 MVC3 razor whaen 我正在插入将保存在数据库中的数据。如果用户已经在数据库中，则用户名不应该保存在数据库中并且必须显示一个错误消息我该如何编写代码这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:17:31.490

你打开你最喜欢的代码编辑器并输入。除非你没有手指——在这种情况下我不知道。

（预期-1）

*不过，说真的（这应该是一个评论，但因为我已经添加了一个答案，所以我将把它放在这里）——你怎么能指望这里的任何人给你一个直接的答案。你没有提供任何代码，没有关于你的数据库模式的信息，你没有展示你尝试过的东西（所以我们假设你什么都没试过）。最终，这是一种在 SO 上重复很多次的问题，它总是被以同样的方式对待 - 偶尔会有讽刺性的评论 - 我真的尽量不再这样做，在这种情况下很抱歉 - 并在大约 5 内关闭分钟。*

# nhibernate - NHibernate - 无法编译映射文件

> ID：14019354
> 
> 赞同：0
> 
> 时间：2012-12-24T09:13:43.250
> 
> 标签：nhibernate, nhibernate-mapping

这是我的域类：

```
public class User
{
    public Guid id { get; set; }

    public string firstName { get; set; }

    public string lastName { get; set; }

    public string mailAddress { get; set; }
} 
```

这是我的映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="Test" namespace="Test.model">

  <class name="User" >
    <id name="id">
      <generator class="guid"/>
    </id>
    <property name="firstName"  />
    <property name="lastName" />
    <property name="mailAddress" />
  </class>

</hibernate-mapping> 
```

这是我的 hibernate-cfg 文件：

```
<?xml version="1.0" encoding="utf-8" ?> 
```

```
<property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
<property name="dialect">NHibernate.Dialect.MySQLDialect</property>
<property name="connection.driver_class">NHibernate.Driver.MySqlDataDriver</property>
<property name="connection.connection_string">Server=localhost;Database=vbook;User ID=root;Password=ziben</property>
<!--<property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>-->

<property name="hbm2ddl.auto">update</property>
<property name="generate_statistics">true</property>
<property name="show_sql">true</property>

<mapping file="data/mapping/User.hbm.xml" /> 
```

这就是我创建会话工厂的方式：

```
 var configuration = new Configuration();
 configuration.Configure();

 _sessionFactory = configuration.BuildSessionFactory(); 
```

我收到以下异常：无法编译映射文档：data/mapping/User.hbm.xml

我不明白为什么。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:09:43.367

您的实体的任何 C# 属性都必须声明为**virtual**。以这种方式更改您的课程：

```
public class User
{
    public virtual Guid id { get; set; }
    public virtual string firstName { get; set; }
    public virtual string lastName { get; set; }
    public virtual string mailAddress { get; set; }
} 
```

# lisp - 当应用于 Common Lisp 中的函数参数时，函数 nth 访问哪个对象？

> ID：14019365
> 
> 赞同：2
> 
> 时间：2012-12-24T09:14:16.637
> 
> 标签：lisp, common-lisp

我在使用访问器函数**nth 时遇到**了一些问题。我将一个列表传递给某个函数，并使用**nth**对函数中的列表元素进行新的绑定，然后当我从函数中调用列表时，它被修改了，这不是我想要的！发生什么了？

一些例子

```
(defun test (x) (incf x)) => TEST
(setq a 1) => 1
(test a) => 2
a => 1 
```

我明白上面发生了什么，但是如果我们将所有内容都更改为列表，就会发生一些我无法理解的事情

```
(defun test (x) (incf (nth 0 x))) => TEST
(setq a '(1)) => (1)
(test a) => 2
a => (2) 
```

我预计 a 是 (1)，为什么它被修改了？我还尝试了其他功能，例如**car**和**first**，结果是一样的。

PS，我在 Lispworks 和 SBCL 中试过，结果一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:11:53.177

```
(defun test (x) (incf x)) => TEST
(setq a 1) => 1
(test a) => 2
a => 1 
```

你`1`传给`test`. 在 test 中，您修改了局部变量`x`。`a`没有改变，也不能那样改变——我们传递的值`a`不是对`a`.

```
(defun test (x) (incf (nth 0 x))) => TEST
(setq a '(1)) => (1)
(test a) => 2
a => (2) 
```

您通过列表`(1)`进行测试。该列表不会被复制。局部变量`x`指向列表中的第一个 cons 单元格。然后将第一个 cons 单元的*car*修改为 2。由于未复制列表，因此您修改传递的列表。`a`还指向该列表的第一个 cons 单元格。所以它也是`(2)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:19:07.530

如果您不想修改任何内容，请不要使用`incf`. 使用`1+`. 使用的唯一原因`incf`是因为你想要它的副作用。

至于为什么会发生这种情况，参数在传递给函数之前会被评估。当您`test`以`a`1 调用时，您传递的值是 1，该值无法修改。解析为列表时`a`，您传递的是一个列表，`setf`如果您选择使用破坏性功能，则可以在整个商店中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T09:45:23.780

请参阅有关[nth](http://www.lispworks.com/documentation/HyperSpec/Body/f_nth.htm)的文档。 `nth`返回一个`setq`可以操作的地方。

> nth 可用于指定 setf 的位置。具体来说， (setf (nth n list) new-object) == (setf (car (nthcdr n list)) new-object)

# solr - Solr 4.0 按_version_查询和过滤

> ID：14019369
> 
> 赞同：1
> 
> 时间：2012-12-24T09:14:48.477
> 
> 标签：solr, solrj

我有一个使用 Solrj 每隔几个小时更新一次的索引。该更新包含新的文档，并且还更新了索引中的删除文档。有些根本不会更新（考虑在更新后删除）。

在每次更新中，我想更改所有已更新文档中的*版本*字段。目前我正在使用：

```
<field name="_version_" type="long" indexed="true" stored="true" /> 
```

问题是每个 Doc 都获得了其创建的 unix 时间。有没有办法自动增加所有新/更新文档的*版本字段，并按最新**版本*过滤搜索查询中的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T07:11:57.993

关于`_version_`字段的详细信息：

*   `_version_`由 Solr 在内部使用/控制
*   `_version_`每当文档发生任何字段值更新时，字段值都会自动递增。所以索引中只存在一个更新的文档
*   发出搜索查询时，Solr 默认返回更新的文档版本

*`Realtime`获取处理程序并`updateLog`定义时需要此字段。*

我希望它能解释并提供方向。

*注意：部分参考尚未根据 wiki 提交*

如果您想明确处理“部件引用”，请参阅 Solr wiki [Update Semantics](http://wiki.apache.org/solr/Per%20Steffensen/Update%20semantics)。

# jquery - Jquery 与 CSS 工具提示的性能？

> ID：14019370
> 
> 赞同：5
> 
> 时间：2012-12-24T09:14:49.683
> 
> 标签：jquery, css

我想知道，如果我说 - 100 个工具提示，如果它们是基于 jquery 或 css 的，性能比较会是什么？据我了解，使用 CSS 工具提示，为每个项目创建物理工具提示并隐藏在视图中，直到用户将鼠标悬停在它上面 - 而 jquery 工具提示应该只是一个在其悬停时更改内容的项目。还是我错了？你觉得我应该怎么走？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:22:06.187

这完全取决于有多少元素具有工具提示以及它们显示的频率。例如，如果您要应用工具提示的元素很少并且它们经常显示，那么您的 CSS 方法会更好。如果您有很多元素要应用工具提示并且它们不经常显示，那么您的 JS 方法会更好。

它还取决于工具提示的大小。回答您的问题的唯一方法是实际尝试两者，看看哪个表现最好。还要考虑 JS 在某些浏览器中要慢得多。IE 6/7 在 50tooltips/s 使用 JS 时表现不佳。CSS 仍然不会很好，但可能比 JS 更好。您需要尝试两种实现并在各种浏览器版本上进行测试。

# php - php数组合并和组合

> ID：14019372
> 
> 赞同：1
> 
> 时间：2012-12-24T09:14:54.707
> 
> 标签：php, arrays

我有三个数组，我喜欢将它转换为一个多维数组。

```
$array1=array('Kathy', 'Adam', 'Jenny');
$array2=array('student','teacher','driver');
$array3=array(2, 5, 8);

$mix=array(); 
$mix['name']=array_values( $array1);
$mix['profession']=array_values( $array2);
$mix['SL']=array_values( $array3); 
```

＆从这些数组中，我可以得到以下输出：

```
Array
(
[name] => Array
    (
        [0] => Kathy
        [1] => Adam
        [2] => Jenny
    )

[profession] => Array
    (
        [0] => student
        [1] => teacher
        [2] => driver
    )

[SL] => Array
    (
        [0] => 2
        [1] => 5
        [2] => 8
    )

   ) 
```

现在我想从上面得到下面的输出......有人请帮我怎么做？

```
 [0]=>Array
      (
         [name] =>  Kathy
         [profession] =>student
         [SL] => 2
    )

    [1]=>Array
    (    
         [name] => Adam
         [profession] =>teacher
         [SL] =>  5
     )

    [2]=>Array
    (
         [name] => Jenny
         [profession] =>driver
         [SL] =>  8
    ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:22:42.733

您可以使用 array_map 函数来做到这一点：

```
<?php

$array1 = array('Kathy', 'Adam', 'Jenny');
$array2 = array('student','teacher','driver');
$array3 = array(2, 5, 8); 

$mix = array_map(
    function ($name, $profession, $sl) {
        return array('name' => $name, 'profession' => $profession, 'SL' => $sl);
    },  
    $array1,
    $array2,
    $array3
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:25:05.657

```
$array1=array('Kathy', 'Adam', 'Jenny');
$array2=array('student','teacher','driver');
$array3=array(2, 5, 8);
$mix = array();

foreach ($array1 as $index => $val)
{
    $mix[] = array(
    'name' => $val, 
    'profession' => $array2[$index], 
    'SL' => $array3[$index]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:20:39.863

用这个：

```
 $array1=array('Kathy', 'Adam', 'Jenny');
  $array2=array('student','teacher','driver');
  $array3=array(2, 5, 8);
  $mix=array();

  for($i=0;$i<count($array1);$i++){
         $mix[$i]=array('name'=>$array1[$i],'profession'=>$array2[$i],'SL'=>$array3[$i]);
   }

  print_r($mix); 
```

如果所有数组的大小相同，请使用此选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:25:02.987

没问题，您可以使用以下代码：

```
$array1=array('Kathy', 'Adam', 'Jenny');
$array2=array('student','teacher','driver');
$array3=array(2, 5, 8);

$mix=array();

if (count($array1)==count($array2) && count($array2)==count($array3)){
    $count = count($array1);
    for ($i=0;$i<$count;$i++){
        $mix[] = array(
            'name' => isset($array1[$i]) ? $array1[$i] : '',
            'profession' => isset($array2[$i]) ? $array2[$i] : '',
            'SL' => isset($array3[$i]) ? $array3[$i] : '',
        );
    }
} 
```

# sql - 条件 SQL 查询

> ID：14019374
> 
> 赞同：1
> 
> 时间：2012-12-24T09:15:15.967
> 
> 标签：sql, sql-server, database

我有一个需要设置条件的 SQL 查询，这是我目前的 SQL 查询：

```
-- IF the video count is 1
    UPDATE tbl_Video SET
    [Featured] = 1
    WHERE [VideoId] = 1
    GO
-- ELSE IF Video Count is greater than 1
    UPDATE tbl_Video SET
    [Featured] = 0
    WHERE [Featured] = 1
    GO
    -- Set the top 5 viewed videos as featured as default
    UPDATE tbl_Video SET
    [Featured] = 1
    WHERE VideoId In (SELECT TOP 5 VideoId FROM tbl_Video
    ORDER BY Views DESC)
    GO
-- END 
```

希望上面查询中的评论能够解释我想要实现的目标，场景是：

> *如果视频计数为 1，则在视频 Id = 1
> 的情况下将精选列设为真。如果视频计数大于 1，则将所有精选列标记为假，然后将观看次数最多的 5 个视频设为精选。*

数据库是 SQL Server。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:19:33.130

如果这是在 sql server 过程中，您可以执行以下操作：

```
declare @videoCount integer

--this is just a guess at what video count is
select @videoCount = count(*) from tbl_video

if (@videoCount = 1)
    UPDATE tbl_Video SET
    [Featured] = 1
    WHERE [VideoId] = 1
ELSE IF (@videoCount > 1)
BEGIN
    UPDATE tbl_Video SET
    [Featured] = 0
    WHERE [Featured] = 1

    UPDATE tbl_Video SET
    [Featured] = 1
    WHERE VideoId In (SELECT TOP 5 VideoId FROM tbl_Video ORDER BY Views DESC)
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:35:40.617

如果你已经有`@videoCount`变量是`not null`

```
--Using case
update tbl_Video SET
    [Featured] = case when @videoCount = 1 then 0 
                      when @videoCount > 0 end --else [Featured] end
where [VideoId] = 1

--Using cte
;with cte as 
(
    select top (5) * 
    from tbl_Video
    order by Views desc
)
update cte set [Featured] = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:18:49.370

```
DECLARE @VideoCount INT

SELECT @VideoCount = COUNT(*) FROM tbl_Video

IF @VideoCount = 1
BEGIN
   UPDATE tbl_Video SET
   [Featured] = 1
    WHERE [VideoId] = 1
   GO
END
ELSE IF @VideoCount > 1
BEGIN
   UPDATE tbl_Video SET
   [Featured] = 0
   WHERE [Featured] = 1
   GO
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:38:12.887

您也许可以在一个查询中做到这一点：

```
update  tv
set     Featured = case when rn <= 5 then 1 else 0 end
from    (
        select  row_number() over (order by ViewCount desc) as rn
        ,       *
        from    tbl_Video
        ) tv 
```

如果只有一个视频，它必须在前 5 个观看的视频中，所以不需要特殊情况。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!6/75f94/2/0)

# python - 使用不能为空的 ListField 定义 mongoengine 模型

> ID：14019379
> 
> 赞同：5
> 
> 时间：2012-12-24T09:15:53.927
> 
> 标签：python, flask, mongoengine, wtforms

我正在使用 flask-mongoengine 并且我的模型有`Post`字段`title`,`slug`和. 每个都有一个唯一的，每个都需要至少有 1 个标签。至少有 1 个元素的 a也是如此。`body``tags``Post``slug``Post``tags``list``strings`

```
class Post(db.Document):
    created_at = db.DateTimeField(default=datetime.datetime.now, required=True)
    title = db.StringField(max_length=255, required=True)
    slug = db.StringField(max_length=255, required=True, unique=True)
    body = db.StringField(required=True)
    tags = db.ListField(db.StringField(max_length=255), required=True)   #each post should have at least one tag

    def get_absolute_url(self):
        return url_for('post', kwargs={"slug": self.slug})

    def __unicode__(self):
        return self.title

    meta = {
        'allow_inheritance': False,
        'indexes': ['-created_at', 'slug', 'title', 'tags'],
        'ordering': ['-created_at'],
        'collection': 'posts',
    } 
```

当我在模板中创建用于输入新帖子的表单时，每个标签都输入到一个带有名称的新文本框中，`tags`所以如果我有 3 个标签，`Post`那么将有 3 个文本框，每个都有名称`tags` 这是视图的方式

```
from flask.ext.mongoengine.wtf import model_form
class CreateEdit(MethodView):

    form = model_form(Post)    #Gets object of class PostForm which is a subclass of ModelForm, ModelForm is a subclass of Form
    def post(self, slug = None):
        form = self.form(request.form)   #Populate PostForm with data from the request
        post = Post()
        form.populate_obj(post)
        post.save()
        flash('Update successful') 
```

现在我在浏览器中遇到`mongoengine.base.ValidationError`错误。我在发布请求中传递的数据（礼貌：Firebug）

```
title: third post
slug: 3rd
body: this is the 3rd post
tags: third
tags: last 
```

当我在调试器中检查时`request.form`显示

```
werkzeug.datastructures.ImmutableMultiDict({'body': u'this is the 3rd post    \r\n  ', 'title': u'third post', 'slug': u'3rd', 'tags': u'third'}) 
```

现在表格中有多个`tags`，但字典中只有一个。这没关系，因为它是一个字典，所以不能有多个具有相同名称的键。但是当我检查`form.data`它显示

```
{'body': u'this is the 3rd post    \r\n  ', 'title': u'third post', 'created_at': datetime.datetime(2012, 12, 24, 14, 7, 18, 97273), 'tags': [], 'slug': u'3rd'  } 
```

该`tags`字段是一个空列表，这是荒谬的，因为它应该填充`tags`from `request.form`。另外，如果我进入`print request.form`调试器，我会得到

```
ImmutableMultiDict([('body', u'this is the 3rd post    \r\n  '), ('title', u'third post'), ('slug', u'3rd'), ('tags', u'third'), ('tags', u'last')]) 
```

因此，这意味着`request`对象保留了同名的多个值以在representation( `__repr__`)中显示它，但只将一个值传递给`ModelForm`对象。但我`ModelForm`的没有任何价值`tags`。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:29:21.757

你的代码对我有用

Werkzeug 使用 MultiDict 可以包含多个具有相同名称的键[http://werkzeug.pocoo.org/docs/datastructures/](http://werkzeug.pocoo.org/docs/datastructures/)

当我尝试使用相同名称的 3 个输入字段并在调试器中检查 request.form 时，我得到：`ImmutableMultiDict([('tag', u'1'), ('tag', u'2'), ('tag', u'3')])`

并且可以通过`request.form.getlist('tag')`

可能是由于旧版本的烧瓶/werkzeug？

# json - 如何使用 json.net 将命名数据表转换为 json

> ID：14019383
> 
> 赞同：0
> 
> 时间：2012-12-24T09:16:43.583
> 
> 标签：json

我需要使用 json.net 在 DataTable 和 json 之间进行 Serialize\Deserialze。

我发现 json.net 忽略了“TableName”属性。我该如何添加它？

像这样的代码。

```
DataTable table = new DataTable();
table.TableName = "TestTable";
table.Columns.Add("id", typeof(int));
table.Columns.Add("name", typeof(string));
var dr = table.NewRow();
dr["id"] = 1;
dr["name"] = "foo";
table.Rows.Add(dr);

var json = JsonConvert.SerializeObject(table);
var o = JsonConvert.DeserializeObject<DataTable>(json); 
```

序列化时，得到 json [{"id":1,"name":"foo"}]。这个json没有表名，反序列化，表也没有表名。

所以，我需要 TableName ，我怎么能拿着它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:11:28.413

我已经为 JSON.NET 创建了一个自定义 DataTable 转换器来执行此操作。从这里获取源代码：[https ://github.com/chris-herring/DataTableConverter](https://github.com/chris-herring/DataTableConverter)

像这样使用它：

```
string json = JsonConvert.SerializeObject(table, new Serialization.DataTableConverter());
var o = JsonConvert.DeserializeObject<DataTable>(json, new Serialization.DataTableConverter()); 
```

它以这种格式序列化/反序列化 System.Data.DataTable：

```
{
    "TableName": "TestTable",
    "Columns": [
        {
            "AllowDBNull": false,
            "AutoIncrement": true,
            "AutoIncrementSeed": 2,
            "AutoIncrementStep": 1,
            "Caption": "PrimaryKey",
            "ColumnName": "PrimaryKey",
            "DataType": "Int32",
            "DateTimeMode": "UnspecifiedLocal",
            "DefaultValue": null,
            "MaxLength": -1,
            "Ordinal": 0,
            "ReadOnly": false,
            "Unique": true
        }
    ],
    "Rows": [
        [
            1
        ],
        [
            2
        ],
        [
            3
        ]
    ],
    "PrimaryKey": ["PrimaryKey"]
} 
```

# php - Joomla 2.5 中未显示的文章

> ID：14019386
> 
> 赞同：2
> 
> 时间：2012-12-24T09:17:01.753
> 
> 标签：php, joomla1.5, joomla2.5

将我的 Joomla 网站从 1.5 升级到 2.5 后，我网站上的文章不再显示。仅显示文章的标题。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T06:43:28.690

转到 jupgrade/template/html 文件夹并删除或重命名 com_content 文件夹

然后它将正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:19:24.803

如果你有一个*用户*链接到一个*未发表*的联系人，这个用户写的文章就不会显示在前面。这可能是文章未显示的原因。

请检查您是否有未发布的联系人链接到撰写文章的用户。还要检查已删除的联系人。解决方案是发布联系人或完全删除他们，因此*清空垃圾箱*。

检查此[链接](https://docs.joomla.org/Disappearing_articles_after_2.5_upgrade)

# c# - 从 Webclient 调用标签 javascript click 函数

> ID：14019388
> 
> 赞同：1
> 
> 时间：2012-12-24T09:17:10.303
> 
> 标签：c#, .net, httprequest, webclient, httpresponse

我在 C# 4.0 中创建了一个网络抓取应用程序。我在此应用程序中使用 Web 客户端。

现在我在 A 标签点击事件中遇到问题。请看下面的代码

`<a href="javascript:document.pagination.pageNumber.value=2;submitSearchForm('pagination');">2</a>`

![在此处输入图像描述](../Images/02d81541f4d833d6b4a9f0f0ab4225be.png)

请看这张图片。

我尝试下载该页面中的 html。如何从 Webclient 执行此 href 代码。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:29:44.497

您不能从`WebClient`. 您可以模拟此类请求并从服务器获得所需的响应，但这需要一些逆向工程。

要了解如何首先从服务器获得所需的响应，您必须通过浏览器执行此操作并记录通过单击该链接生成的请求（为此，您可以使用 Fiddler Web 调试器）。比您必须从您的 重新创建此类请求`WebClient`，即 - 将所有必需的数据连同 cookie 和正确的请求类型（GET 或 POST - 同步或异步）一起发送到正确格式化的服务器。

为什么你不能使用`WebClient`javascript 执行在这里很好地描述**[了](https://stackoverflow.com/questions/5372277/webclient-runs-javascript)**

以及如何创建一个类似于由 javascript click 创建的请求，可以由此**[推断](https://stackoverflow.com/questions/13743293/webclient-downloadingstring-changing-url-requested/13743403#13743403)**。

# iphone - 带有线性渐变的 Chrome 文本效果会产生锯齿状边缘

> ID：14019396
> 
> 赞同：0
> 
> 时间：2012-12-24T09:18:13.097
> 
> 标签：iphone, ios, uikit, core-graphics

我正在尝试在核心图形中生成 chrome 文本效果，但在让它看起来正确时遇到了一些麻烦。

这是我想要达到的效果：

![所需效果](../Images/f2b2e6a936c1279ccfe8a538add7c6fb.png)

这是我设法得到的：

![在此处输入图像描述](../Images/a0f95b643cce7852f3cb25ec53470c9f.png)

如您所见，渐变边缘非常参差不齐。有没有办法在不使用静态 png 进行纹理填充的情况下实现这种效果？

这是我的代码：

```
- (void)setGradientFill:(UILabel*)label
{
    CGSize textSize = [label.text sizeWithFont:label.font];
    CGFloat width = textSize.width;         // max 1024 due to Core Graphics limitations
    CGFloat height = textSize.height;       // max 1024 due to Core Graphics limitations

    // create a new bitmap image context
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(width, height), YES, 0.0);

    // get context
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetAllowsAntialiasing(context, true);
    CGContextSetShouldAntialias(context, true);

    // push context to make it current (need to do this manually because we are not drawing in a UIView)
    UIGraphicsPushContext(context);

    CGContextSetAllowsAntialiasing(context, YES);
    CGContextSetShouldAntialias(context, YES);

    //draw gradient
    CGGradientRef glossGradient;
    CGColorSpaceRef rgbColorspace;
    size_t num_locations = 5;
    CGFloat locations[5] = { 0.0, 0.5, 0.5, 0.65, 1};
    CGFloat components[20] = {
        1.0, 1.0, 1.0, 1.0,
        1.0, 1.0, 1.0, 1.0,
        0.878, 0.878, 0.878, 0.878,
        0.78, 0.78, 0.78, 1.0,
        1, 1, 1, 1.0
    };
    rgbColorspace = CGColorSpaceCreateDeviceRGB();
    glossGradient = CGGradientCreateWithColorComponents(rgbColorspace, components, locations, num_locations);
    CGPoint start = CGPointMake(0, 0);
    CGPoint end = CGPointMake(width/4, height*1.2);
    CGContextDrawLinearGradient(context, glossGradient, start, end, kCGGradientDrawsAfterEndLocation);

    CGGradientRelease(glossGradient);
    CGColorSpaceRelease(rgbColorspace);

    // pop context
    UIGraphicsPopContext();

    // get a UIImage from the image context
    UIImage *gradientImage = UIGraphicsGetImageFromCurrentImageContext();

    // clean up drawing environment
    UIGraphicsEndImageContext();

    label.textColor = [UIColor colorWithPatternImage:gradientImage];
} 
```

**编辑lefteris的建议：**

我尝试了您制作的扩展名（左下图）。出于某种原因，我得到了一些非常模糊的文本，边缘有人工制品。

![在此处输入图像描述](../Images/74e35ed6642886cb7ee1d94990b1613e.png)

我将 UIImage 框架调整为图像的大小以避免内容拉伸：

```
_test.frame = CGRectMake(_test.frame.origin.x, _test.frame.origin.y, image.size.width, image.size.height);
_test.image = image; 
```

**编辑最近的解决方案：**

lefteris 的解决方案是最接近的，但您无法真正避免锯齿状渐变边缘。如果可以的话，您应该使用在 Photoshop 中生成的静态 png 来处理纹理（不仅仅是填充的文本），但您可能需要多个版本（就像我一样）才能在每个屏幕上获得正确的效果，因为纹理是根据大小应用的框架不是包含的文本。动态地执行它是可能的，但它似乎有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:34:06.667

使用比例因子设置为[的`UIGraphicsBeginImageContextWithOptions`函数](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIGraphicsBeginImageContextWithOptions)`0.0`。

即使在 Retina (@2x) 设备上，该`UIGraphicsBeginImageContext`函数也无条件地调用该函数并将比例因子设置为。`1.0`在 Retina 设备上，您需要 2.0。`0.0`将自动检测正确的比例因子以使用和使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:48:10.603

您还应该平滑渐变。

改用这个：

```
CGFloat locations[5] = { 0.0, 0.45, 0.55, 0.65, 1}; 
```

我编辑我的答案以提供不同的解决方案/建议：

我创建了一个渲染 3D 文本的 3D 文本渲染 UIImage 扩展，[可以在这里找到](https://stackoverflow.com/questions/13766268/3d-text-effect-in-ios/13808947#13808947)

使用该类别扩展，并进行一些修改，我最终得到了这张图片：

![在此处输入图像描述](../Images/e7ec4bacdfbca42762481360d7d50c4f.png)

我相信您不应该将渐变创建为背景颜色并将其作为一个整体应用到标签上，因为它也在背景上添加渐变，这使得它看起来不那么逼真。

我使用以下设置创建了上面的图像：

```
UIImage *my3dImage = [UIImage create3DImageWithText:@"61" Font:[UIFont fontWithName:@"Helvetica-Bold" size:180] ForegroundColor:[UIColor colorWithRed:(255/255.f) green:(255/255.f) blue:(255/255.f) alpha:1.0] ShadowColor:[UIColor blackColor] outlineColor:[UIColor lightGrayColor] depth:4 useShine:YES]; 
```

我修改了我的源代码以应用不同的闪耀效果：

```
 size_t num_locations = 5;
    CGFloat locations[5] = { 0.0, 0.49, 0.51, 0.65, 1};
    CGFloat gradientComponents[20] = {
        1.0, 1.0, 1.0, 1.0,
        1.0, 1.0, 1.0, 1.0,
        0.878, 0.878, 0.878, 0.878,
        0.78, 0.78, 0.78, 1.0,
        1, 1, 1, 1.0
    };

    CGGradientRef glossGradient = CGGradientCreateWithColorComponents(genericRGBColorspace, gradientComponents, locations, num_locations);
    CGPoint start = CGPointMake(0, expectedSize.height/4);
    CGPoint end = CGPointMake(expectedSize.width/4, expectedSize.height); 
```

原因，我相信我的方法更好，因为它实际上是从文本创建蒙版，然后应用渐变，这意味着只有文本得到渐变而不是背景。

# php - jquery通过php echo命令返回值

> ID：14019398
> 
> 赞同：3
> 
> 时间：2012-12-24T09:18:30.493
> 
> 标签：php, javascript, jquery, html

我有这些代码：

**main.php**的内容：

**Javascript**

```
function grab()
{
    $("#div_id").load("/test.php");
} 
```

**HTML 和 PHP**

```
<? $original_value = 'Original content'; ?>

<div id='div_id'><?=original_value;?></div>

<form action="javascript:grab($('#div_id').val())">

    <input name="submit" type="submit" value="submit">

</form> 
```

还有**test.php**

```
<?... 
$update_value = "Update content";
echo $update_value;?> 
```

test.php 的结果将被写入#div_id，div 内容的结果是：

```
Original content
Update content 
```

但我喜欢覆盖原始 div 值，结果应该是：

```
Update content 
```

我的意思是`echo`在#div_id 中追加一个新行，但我喜欢覆盖现有的#div_id 内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:29:19.003

在您的代码中更改以下内容。

1.  删除 action 属性中的 javascript。它看起来不正确。

    ```
    <form action="">

        <input name="submit" type="submit" value="submit">

    </form> 
    ```

2.  添加以下 javascript。

    ```
    $(document).ready(function () {
        $('form').on('submit', function (e) {
            e.preventDefault(); // Prevents the default submit action. 
            // Otherwise the page is reloaded.

            grab();
        });
    }); 
    ```

`grab`提交表单时将调用该函数。我不确定这是否是您想要的，但您应该在 div 中看到新内容。

**更新 1：**

我已经删除了参数，`grab`因为该函数不需要一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:39:17.833

You need to replace the content while the current code appends it, change code to:

```
$("#div_id").empty().load("/test.php"); 
```

# asp.net - 80070005 访问被拒绝，当带有水晶报表的asp.net网站部署在专用服务器上时

> ID：14019401
> 
> 赞同：8
> 
> 时间：2012-12-24T09:19:07.997
> 
> 标签：asp.net, hosting, crystal-reports-2008

我有一个 asp.net 应用程序，它使用水晶报告显示报告。该应用程序在我的本地 PC 上正常工作。我在我们的专用服务器上部署了这个应用程序，并且还在专用服务器上安装了水晶报告运行时间引擎。当我尝试按报告以查看报告，我收到上述错误。我将文件夹“C:\Windows\Temp”的权限更改为完全控制（通过选择“临时”文件夹的属性，所有用户的完全控制权限（IIS用户，网络..等））。我不确定这是否是授予此文件夹完全控制权限的正确方法（我不太了解网络概念）。但我仍然遇到同样的错误.错误是：

> 由于以下错误，检索具有 CLSID {4DB2E2BB-78E6-4AEA-BEFB-FDAAB610FD1B} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：检索具有 CLSID {4DB2E2BB-78E6-4AEA-BEFB-FDAAB610FD1B} 的组件的 COM 类工厂失败，原因是以下错误：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的复选框。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T00:20:34.357

我在运行 IIS6 的客户端的 windows server 2003 机器上遇到了同样的问题。与普通服务器相比，他们的服务器非常锁定，锁定中的某些东西可能是问题所在。我在其他几十个客户的服务器上都没有遇到过这个问题。我还没有解决这个问题，但这里是我迄今为止学到的一些步骤......

首先要做的是仔细检查您的应用程序在哪个应用程序池下运行，然后检查应用程序池正在使用哪个标识（例如网络服务或应用程序池标识或......）。这对于确保您向正确的用户授予权限非常重要。在您确定这一点之前，不要再进一步。

接下来检查您是否使用[IIS Impersonation](http://msdn.microsoft.com/en-us/library/134ec8tc%28v=vs.80%29.aspx)（除非您知道它是什么，否则您可能不会使用）。这是应用程序池以用户身份运行的地方......只有在您使用 Windows 身份验证并且在 web.config 中您拥有`<identity impersonate="true" />`. 如果您使用模拟，那么您*可能*必须为最终用户提供所有必要的文件和/或 COM 访问权限。如果不是（在我的情况下），它应该只是检查权限是否适合您的应用程序池的用户或 IIS 用户组。

一旦您知道权限的正确身份，请尝试以下步骤：

*   如果它是 64 位机器，请检查您是否已`Enable 32-bit applications`启用应用程序池（或者您是否安装了 64 位运行时）
*   检查应用程序池身份是否可以访问该`C:\Windows\Temp`文件夹（您已经提到您已经完成了此操作，但我想我会为遇到问题的其他人列出它）。
*   检查应用程序池身份是否可以访问 Crystal Reports 文件夹，例如`C:\Program Files\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\`. 您可以通过打开 regedit.exe 找到该文件夹​​并导航到`HKEY_CLASSES_ROOT\CLSID\{4DB2E2BB-78E6-4AEA-BEFB-FDAAB610FD1B}\InProcServer32`. 从该注册表项的（默认）值获取路径，并检查该路径的父文件夹的权限。尝试将完全控制权授予正确身份的文件夹，看看是否能解决问题。
*   我不确定这是否相关，但可能添加`<startup useLegacyV2RuntimeActivationPolicy="true">`到 web.config 可能会有所帮助......在[这篇文章](http://seagullscientific.invisionzone.com/index.php?/topic/1349-unable-to-load-the-seagullbartenderprint-using-aspnet-40/)中提出了与具有类似问题的不同 COM 应用程序相关的建议，因此值得一试吗？所以你可以在 web.config 的标签中添加这个：

    ```
    <startup useLegacyV2RuntimeActivationPolicy="true"> 
         <supportedRuntime version="v4.0"/> 
    </startup> 
    ```

*   检查服务器上的 COM 权限：

    *   从控制面板 > 管理工具打开组件服务
    *   展开组件服务 > 计算机 > 我的电脑，然后右键单击 > 属性
    *   单击 COM 安全选项卡
    *   在 Launch and Activation Permissions 点击 Edit Default... 按钮
    *   检查列出的启动和激活权限。如果您的应用程序池用户未列出，可以尝试添加所有 4 允许权限并重新测试。如果这不能解决问题，则撤消任何更改。
*   如果这些都没有解决它，那么我建议下载[Process Monitor](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx)并尝试确定它正在尝试做什么来达到拒绝访问。这是我在这个问题上的下一步，所以如果我发现任何东西，我会更新这个答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-03T00:23:57.247

我刚刚将我的网站移至默认应用程序池，它就可以工作了。我将 32 位应用程序配置为启用并标识到 NetworkService。

# android - Android Wheel 数据选择器

> ID：14019403
> 
> 赞同：0
> 
> 时间：2012-12-24T09:19:13.740
> 
> 标签：android

我想使用 android wheel 从一些项目中进行选择。我刚刚从谷歌下载了一些库代码。我在我的应用程序中使用它，但它给出了一些错误。

```
import kankan.wheel.widget.OnWheelChangedListener;
import kankan.wheel.widget.OnWheelScrollListener;
import kankan.wheel.widget.WheelView;
import kankan.wheel.widget.adapters.AbstractWheelTextAdapter;
import kankan.wheel.widget.adapters.ArrayWheelAdapter; 
```

给出以下错误：

```
The import kankan.wheel.widget cannot be resolved 
```

谁能告诉我为什么会出现这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:21:38.447

我还在我的代码中使用了该库，它工作正常。

错误的可能性

1.  您无法正确配置 lib

2.  在构建路径中添加库

3.  干净的日食。

4.  重启日食

    ```
    import kankan.wheel.widget.OnWheelChangedListener;
    import kankan.wheel.widget.OnWheelScrollListener;
    import kankan.wheel.widget.WheelView;
    import kankan.wheel.widget.adapters.NumericWheelAdapter;

    WheelView wheel = getWheel(id); 
    ```

# php - 不同 php 文件的多个虚 URL？

> ID：14019411
> 
> 赞同：0
> 
> 时间：2012-12-24T09:19:56.127
> 
> 标签：php, .htaccess, web

我正在尝试建立一个具有以下页面的网站，这些页面需要虚荣网址，

*   帐户.php
*   问题.php
*   配置文件.php

我需要显示

www.mysite.com/account?req=settings
www.mysite.com/account?req=questions
www.mysite.com/account?req=answers

如下

www.mysite.com/account/settings
www.mysite.com/account/questions
www.mysite.com/account/answers

对于其他文件，我需要以下内容，

等：- www.mysite.com/questions?id=0484684

作为

www.mysite.com/questions/0484684

和

www.mysite.com/profile?id=123456

作为

www.mysite.com/profile/123456

有人会帮助我吗，因为我真的需要让这成为可能。

我也想从 url 中删除 .php 扩展名。

我想说我对 htaccess 文件没有经验。

感谢您的帮助，它成功了！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:25:07.417

在您的`.htaccess`文件中，添加以下规则：

```
RewriteEngine on
RewriteBase /

RewriteRule ^account/([^/\.]+)/?$ account.php?req=$1 [L,NC,QSA]
RewriteRule ^questions/([^/\.]+)/?$ questions.php?id=$1 [L,NC,QSA]
RewriteRule ^profile/([^/\.]+)/?$ profile.php?id=$1 [L,NC,QSA] 
```

如果您将来需要它们，您应该能够根据这些规则的工作方式添加新规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:23:07.617

您将希望使用`.htaccess`与 PHP 相结合的文件进行复杂的操作，我在 SO 上提出了类似的问题后写了一篇关于重写 URL 的文章：

[http://tomsbigbox.com/elegant-url-rewriting/](http://tomsbigbox.com/elegant-url-rewriting/)

# matlab - 如何在执行后从函数的工作区停止 MATLAB 计时器对象

> ID：14019412
> 
> 赞同：1
> 
> 时间：2012-12-24T09:20:02.960
> 
> 标签：matlab, timer

假设我有一个评估为：

```
function test_timer()
a = timer ;
set(a, 'executionMode', 'fixedRate','TimerFcn','disp(rand)')
start(a)

end 
```

..我不小心在函数的子句中遗漏了“stop(a)”。如何在不使用命令窗口关闭 MATLAB 的情况下停止运行计时器对象（或所有计时器对象）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:32:25.733

您可以使用[`timerfind`](http://www.mathworks.com/help/matlab/ref/timerfind.html)查找要停止的计时器。

像这样：

```
tmr = timer('Name', 'timer1', 'TimerFcn', @(x,y)disp('Timer running'));
start(tmr);
stop(timerfind('Name', 'timer1')); 
```

您基本上可以搜索可以在计时器函数中定义的任何属性。

**编辑：**您可以使用该[`delete`](http://www.mathworks.com/help/matlab/ref/deletetimer.html)功能删除计时器。

让我们创建几个计时器来查找和删除它们：

```
tmr1=timer('Name', 'timer1', 'Period', 5, 'TimerFcn', @(x,y)disp('Timer 1 running'));
tmr2=timer('Name', 'timer2', 'Period', 5, 'TimerFcn', @(x,y)disp('Timer 2 running'));
start(tmr1);
start(tmr2);
tmrList=timerfind('Period', 5); % Find the timers whose periods are 5 seconds.
stop(tmrList);
timerfind

Timer Object Array

   Index:  ExecutionMode:  Period:  TimerFcn:               Name:
   1       singleShot      5        1x1 function_handle arraytimer1
   2       singleShot      5        1x1 function_handle arraytimer2

delete(tmrList);
timerfind

ans =

     [] 
```

# spring - 带有 @Bean 注释的 BeanPostProcessor 不起作用

> ID：14019413
> 
> 赞同：3
> 
> 时间：2012-12-24T09:20:04.037
> 
> 标签：spring, spring-ioc

我正在尝试创建一个`BeanPostProcessor`用于将一些值注册到地图。

如果我通过 xml 定义创建 bean 实例，则工作正常`BeanPostProcessor`，但如果我将 bean 定义更改为`@Configuration`它不起作用。

后处理器

```
public class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {

  public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
      return bean;
  }

  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
      System.out.println("Bean '" + beanName );
      return bean;
  }
} 
```

豆配置

```
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.Bean;

@org.springframework.context.annotation.Configuration
public class Configuration {
    @Bean
    public @Qualifier("InstantiationTracingBeanPostProcessor")
    InstantiationTracingBeanPostProcessor activitiConfigurationBeanPostProcessor() {
        return new InstantiationTracingBeanPostProcessor();
    }
} 
```

组件扫描配置

```
<context:component-scan base-package="xyz.config"/>
<context:annotation-config/> 
```

如果我使用上述配置，应用程序就会挂起。但是，如果我使用下面给出的基于 xml 的配置，它就可以正常工作。

```
<bean class="xyz.bean.InstantiationTracingBeanPostProcessor"/> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T03:20:23.407

[在春季论坛](http://forum.springsource.org/showthread.php?133596-BeanPostProcessor-with-Bean-annotation-not-working)提出另一个问题后，我得到了解决方案。

bean 工厂方法应定义为 a`static method`以使其工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T19:06:47.173

我认为这样做的方法是用以下方式注释`BeanPostProcessor`您`Component`：

```
@Component
public class InstantiationTracingBeanPostProcessor implements BeanPostProcessor {
    //...
} 
```

这将在组件扫描期间由 Spring 自动处理（因此无需`@Bean`在配置中添加 -annotated 方法）。

# android - android中的BaseAdapter

> ID：14019414
> 
> 赞同：0
> 
> 时间：2012-12-24T09:20:12.947
> 
> 标签：android, button

如何`getView(int position, View convertView,ViewGroup arg2)`根据位置获取当前项目？每个项目都有一个按钮。单击按钮时，我将获取按钮对象并更改属性。如何获得？

关于他们可以监控的所有按钮。现在的问题是关于单个按钮。

# jquery - jquery - 下拉导航菜单打开内部菜单

> ID：14019418
> 
> 赞同：0
> 
> 时间：2012-12-24T09:20:40.213
> 
> 标签：jquery

我无法处理内部菜单，只有外部菜单可以正常打开，有人知道如何处理吗？

html:

```
<nav id="menu-nav">
        <ul>
            <li class="top">
                <a href="#">Reports</a>
                <ul>
                    <li>
                        <a href="#">Credit Balance</a>
                        <ul>
                            <li>Sales</li>
                            <li>Float Credit</li>
                            <li>Consumed Credit</li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Calls</a>
                        <ul>
                            <li>Client Calls</li>
                            <li>Expert Calls</li>
                            <li>Current Calls</li>
                            <li>Errors</li>
                        </ul>
                    </li>
                    <li>
                        <a href="#">Users/Experts</a>
                        <ul>
                            <li>Users Report</li>
                            <li>Expertest Report</li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="top">
                <a href="#">Support</a>
                <ul>
                    <li>New Tickets</li>
                    <li>Open Tickets</li>
                    <li>Archived Tickets</li>
                </ul>
            </li>
            <li>User Management</li>
            <li>Packages Managments</li>
            <li class="top">
                <a href="#">Application Managments</a>
                <ul>
                    <li>Notification Manager</li>
                    <li>Application Settings</li>
                </ul>
            </li>
        </ul>
    </nav> 
```

jQuery：

```
$(document).ready(function() {
    $("#menu-nav").click(function(e){
        e.stopPropagation(); // this stops the bubbling from going any higher
    });
    $('body').click(function(){ // this is only reached if the clicks comes outside the #menu-nav
        $("#menu-nav ul ul").slideUp('fast');
    });
    $("#menu-nav ul li.top").click(function() {
        $("#menu-nav ul ul").slideUp("fast", function(){});

        $("ul:first", this).slideDown("fast", function(){
            $("ul", this).slideUp("fast");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:02:56.440

看到这个：http: [//jsfiddle.net/5ehK6/2/](http://jsfiddle.net/5ehK6/2/)

```
$(document).ready(function() {
$("#menu-nav").click(function(e) {
    e.stopPropagation(); // this stops the bubbling from going any higher
});
$('body').click(function(){ // this is only reached if the clicks comes outside the #menu-nav
    $("#menu-nav ul ul").slideUp('fast');
});
$("#menu-nav ul ul").hide();
$("#menu-nav ul li.top li").click(function() {
    $("#menu-nav ul ul ul").slideUp("fast", function() {});

    $("ul:first", this).slideDown("fast", function() {
        $("ul", this).slideUp("fast");
    });
    return false;
});
$("#menu-nav ul li.top").click(function() {
    $("#menu-nav ul ul").slideUp("fast", function() {});

    $("ul:first", this).slideDown("fast", function() {
        $("ul", this).slideUp("fast");
    });
    return false;
});
});​ 
```

# php - Symfony 2.1 安全登录检查错误

> ID：14019419
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:20:42.580
> 
> 标签：php, symfony, symfony-2.1, symfony-forms

我正在构建登录表单，如 symfony 2.1 文档中所示。我也在做同样的事情。我在简单授权中获得了成功，但是当我创建简单的登录表单时，我找不到 login_check 路由。如果我把 login_check 路由然后我得到 login_check 错误。
文档对此只字未提。我的 security.yml 是

```
# app/config/security.yml
security:
  providers:
    in_memory:
        memory:
            users:
                ryan:  { password: ryanpass, roles: 'ROLE_USER' }
                admin: { password: kitten, roles: 'ROLE_ADMIN' }

firewalls:
    login:
        pattern:  ^/login$
        security: false
    secured_area:
        pattern:    ^/admin
        anonymous: false
        form_login:
            login_path: /login
            check_path: /login_check
            always_use_default_target_path: false
            default_target_path:            /admin/content/index
            target_path_parameter:          _target_path
            use_referer:                    false
            username_parameter:             _username
            password_parameter:             _password
            csrf_parameter:                 login[_token]
        logout: 
            path: /admin/logout
            target: /login
access_control:
    - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin, roles: ROLE_ADMIN }

encoders:
    Symfony\Component\Security\Core\User\User: plaintext 
```

和 routing.yml 是

```
login:
pattern:  /login
defaults: { _controller: AcmeTaskBundle:Default:login}

login_check:
pattern: /login_check        
defaults: { _controller: AcmeTaskBundle:Default:loginCheck}

logout:
pattern: /admin/logout
defaults: { _controller: AcmeTaskBundle:Default:logout}
content_index:
pattern: /admin/content/index
defaults: { _controller: AcmeTaskBundle:Default:index } 
```

我的控制器登录操作是

```
namespace Acme\TaskBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Acme\TaskBundle\Entity\Product;
use Acme\TaskBundle\Entity\CmsContentMst;
use Acme\TaskBundle\Entity\CmsSectionsMst;

// use Acme\TaskBundle\Entity\ProductType;
use Symfony\Component\HttpFoundation\Response;
use Acme\TaskBundle\Form\Type\AddContent;
use Symfony\Component\Security\Core\SecurityContext;

class DefaultController extends Controller
{   
public function loginAction()
{
    $request = $this->getRequest();
    $session = $request->getSession();

    // get the login error if there is one
    if ($request->attributes->has(SecurityContext::AUTHENTICATION_ERROR)) {
        $error = $request->attributes->get(
            SecurityContext::AUTHENTICATION_ERROR
        );
    } else {
        $error = $session->get(SecurityContext::AUTHENTICATION_ERROR);
        $session->remove(SecurityContext::AUTHENTICATION_ERROR);
    }

    return $this->render(
        'AcmeTaskBundle:Default:login.html.twig',
        array(
            // last username entered by the user
            'last_username' => $session->get(SecurityContext::LAST_USERNAME),
            'error'         => $error,
        )
    );
  }
public function panelAction(Request $request)
{   

}
public function loginCheckAction()
  { 

    return new Response('true');

  } 
```

和 login.html.twig 是

```
{# src/Acme/SecurityBundle/Resources/views/Security/login.html.twig #}
{% if error %}
  <div>{{ error.message }}</div>
{% endif %}

 <form action="{{ path('login_check') }}" method="post">
<label for="username">Username:</label>
<input type="text" id="username" name="_username" value="{{ last_username }}" />

<label for="password">Password:</label>
<input type="password" id="password" name="_password" />

{#
    If you want to control the URL the user is redirected to on success (more details      below)
    <input type="hidden" name="_target_path" value="/account" />
   #}

 <button type="submit">login</button>
 </form> 
```

我应该在登录 check.controller 中输入什么...如果有人在 symfony 2.1 中有完整的登录示例，请把它放在答案中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T09:52:06.300

您不必为 login_check 创建控制器。Symfony 已经默认定义了它的功能。我想你不会想惹它的。如果您想在登录后执行操作，您可以在服务等上定义它。

这可能对 [Symfony2 有所帮助：成功登录事件后，执行一组操作](https://stackoverflow.com/questions/11180351/symfony2-after-successful-login-event-perform-set-of-actions)

# c - pCap 捕获传出数据包

> ID：14019420
> 
> 赞同：2
> 
> 时间：2012-12-24T09:20:44.393
> 
> 标签：c, linux, networking, network-programming, libpcap

问题是，pCap 库是否允许捕获本地系统生成的数据包？类似于 netfitler 钩子`NF_IP_LOCAL_OUT`但在用户空间中的东西？
如果 pCap 不能支持这一点，是否有任何支持良好的库可以？

在网上看到有人提到pCap有一个叫setDirection的函数，它可以根据流量方向来设置我们正在捕获的流量，但是很多人说这个函数只有在Windows上；而且我学习 pCap 的时间有点有限，只是为了测试它是否可以做我需要做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T22:38:57.957

> 问题是，pCap 库是否允许捕获本地系统生成的数据包？

是的。事实上，它默认捕获它们。在较新版本的 libpcap 中，您可以通过调用*禁用*`pcap_setdirection()`它，但默认情况下，它会在您捕获的接口上捕获传入和传出数据包。 `pcap_setdirection()`存在于较新版本的 WinPcap 中，但它只是返回错误；WinPcap-only 有一个标志`pcap_open()`，可让您禁用捕获传出数据包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:34:06.423

我当然使用 tcpdump（在 linux 上）来捕获本地接口上的流量并来自自己的机器。由于 tcpdump 使用 libpcap，这一定是可能的。

恐怕这是一个相当垃圾的答案，因为我无法准确告诉您如何配置 libpcap 以捕获本地数据包。但是，我建议 tcpdump 是一个很好的起点——要么简单地使用 tcpdump 本身，要么查看代码 [当然，这可能相当大和复杂，但如果你能弄清楚你需要什么设置来制作 tcpdump做你想做的事，然后你也许可以向 tcpdump 添加一些代码来打印它用于同一件事的设置]。

再次，为没有“给你代码”道歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:57:35.133

此外[， dumpcap](http://linux.die.net/man/1/dumpcap) -i < capture interface> 捕获实时流量，

Dumpcap 是一个网络流量转储工具。它允许您从实时网络捕获数据包数据并将数据包写入文件。Dumpcap原生的抓包文件格式是libpcap格式，也是Wireshark、tcpdump等各种工具使用的格式。

# html - 选择的填充在 IE7 中不起作用

> ID：14019423
> 
> 赞同：2
> 
> 时间：2012-12-24T09:21:09.483
> 
> 标签：html, css, internet-explorer-7

这是我的 HTML：

```
<SELECT> 
    <OPTION selected value=1>Date</OPTION> 
    <OPTION value=2>Instrument ID</OPTION> 
    <OPTION value=3>Efile ID</OPTION>
</SELECT> 
```

这是我的CSS：

```
select
{
    border: 1px solid #CCCCCC;
    font-size: 16px;
    padding: 5px;
    font-family: "open sans", "Lucida Grande", Tahoma, Verdana, 
                  Arial, sans-serif;
} 
```

谁能告诉我为什么选择填充在 IE7 中不起作用？它似乎也适用于 IE8、9、FFX 11 及更高版本以及 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:25:30.333

### 你需要给一个`DOCTYPE`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

### 而且，给这个CSS：

```
select {display: inline; zoom: 1;} 
```

* * *

### 另一种选择是使用[jNice](http://www.whitespace-creative.com/jquery/jNice/)。

* * *

### 另一个想法：

`select`用给它来包装它`label`并设置它的样式。`label``border`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:27:46.147

尝试这个

```
select
{
    border: 1px solid #CCCCCC;
    font-size: 16px;
    padding: 5px !important;
    font-family: "open sans", "Lucida Grande", Tahoma, Verdana, 
                  Arial, sans-serif;
} 
```

# selenium - 超时重试？

> ID：14019425
> 
> 赞同：10
> 
> 时间：2012-12-24T09:21:14.657
> 
> 标签：selenium, cucumber, capybara

我有一个用于测试 UI 功能的 Cucumber 场景。有时由于几个问题之一，网页需要大量时间来响应，并且 Capybara 超时并出现以下错误。

```
ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill'
ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:140:in `rbuf_fill'
ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'
ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'
ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'
ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:2551:in `read_new' 
```

我的问题是——

我可以`Capybara`在超时错误时以某种方式强制 Cucumber 场景或重试（恒定次数）整个场景或步骤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:38:10.057

也许，你可以这样做：

```
Around do |scenario, block|
  for i in 1..5
    begin
      block.call
      break
    rescue Timeout::Error
      next
    end
  end
end 
```

但是我不知道这段代码是否因为这个错误而有效（[在 Around 钩子中不能多次调用 block](https://groups.google.com/forum/?fromgroups=#!topic/cukes/YsbX8QdDscg)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:15:33.637

来自[黄瓜书](http://pragprog.com/book/hwcuc/the-cucumber-book)：

添加一个`eventually method`不断尝试运行代码块的代码块，直到它停止引发错误或达到时间限制。

这是该方法的代码：

```
module AsyncSupport
  def eventually
    timeout = 2
    polling_interval = 0.1
    time_limit = Time.now + timeout
    loop do
      begin 
        yield
      rescue Exception => error
      end
      return if error.nil?
      raise error if Time.now >= time_limit sleep polling_interval
    end
  end
end
World(AsyncSupport) 
```

从 step_definition 调用的方法如下：

```
Then /^the balance of my account should be (#{CAPTURE_CASH_AMOUNT})$/ do |amount|
  eventually { my_account.balance.should eq(amount) }
end 
```

# css - 我怎样才能使正确的列（ ) 占用其余的正确空间？（包括小提琴）

> ID：14019433
> 
> 赞同：3
> 
> 时间：2012-12-24T09:22:06.780
> 
> 标签：css, layout, html

我遇到了一个我还无法解决的问题。如果您查看以下内容：http: [//jsfiddle.net/WnmLc/2/](http://jsfiddle.net/WnmLc/2/)

```
<div id="top">top</div>
<div id="bottom">
    <div id="left">left</div>
    <div id="right">
        <div id="head">head</div>
        <div id="content">content</div>
        <div id="footer">footer</div>
    </div>
</div>​ 
```

这是我到目前为止得到的：

```
#top
{
    height: 50px;
}
#bottom
{
    position: absolute;
    top: 50px;
    bottom: 0;
}
#left
{
    float: left;
    height: 100%;
    width: 100px;
}
#right
{  
    float: left;
    height: 100%;
}
#content
{
    height: 100%;
    overflow: auto;
}
​ 
```

我希望#right 将所有可用空间置于其右侧，并且页脚位于#right 的范围内，它本身不应超出#bottom。#content 可以是任意大小，并且在需要时应该只显示一个滚动条，#head 和 #footer 应该在一个固定的位置，即。#right 的顶部/底部。

恐怕我的javascript比css更流利，所以我可以在这里使用一些指针:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:51:19.513

您可以调整 和 的`#left`百分比`#right`。只要它们加起来`100%`，这将起作用。`#head`,`#content`和 也是如此`#footer`。我假设您希望内容更大，所以我`80%`为您设置了它。

```
#bottom {
width: 100%;
}

#left {
width: 20%;
}

#right {
width: 80%; 
}

#head, #footer {
height: 10%;
}

#content {
height: 80%;
} 
```

在这里查看小提琴：http: [//jsfiddle.net/WnmLc/4/](http://jsfiddle.net/WnmLc/4/)

编辑：

如果要为 设置手动宽度`#left`，可以通过制作`#bottom`表格`#left`以及`#right`表格单元格来解决此问题。然后你需要包裹`#right`在一个外部的div（表格）中，这样里面的内容就可以显示为表格行。为了避免溢出，`#top`必须将其移入。`#bottom`但是，我建议不要使用表格......它们已经过时并且在某些浏览器中缺乏支持。

见小提琴：http: [//jsfiddle.net/WnmLc/8/](http://jsfiddle.net/WnmLc/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:09:00.197

嗨，我在小提琴上使用了这个代码你也可以在那里试试

```
 div
{
    border: 1px solid red;
}
#top
{
    height: 50px;
}
#bottom
{
    position: absolute;
    top: 50px;
    width:100%;
    bottom: 0;
}
#left
{
    float: left;
    height: 100%;
    width: 10%;
}
#right
{  
    float: left;
    width:89%;
    height: 100%;

}
#content
{
    height: 87%;    
    overflow: auto;
}
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:33:19.613

尽管 Michelle 建议的 table 选项在小提琴中运行良好，但事实证明，当在#top 部分输入数据时，存在一些关于列跨度的严重问题。

我设法让它在没有表格样式代码的情况下使用 css 工作，你可以在这里找到一个例子：http: [//jsfiddle.net/WnmLc/11/](http://jsfiddle.net/WnmLc/11/)

html:

```
<div id="top">top</div>
<div id="left">left</div>
<div id="head">head</div>
<div id="content">
    <div id="scroll">content</div>
</div>
<div id="footer">footer</div> 
```

CSS：

```
div
{
    position: absolute;
    box-shadow: inset 0 0px 3px red;
}
#top
{
    left: 0;
    top: 0;
    right: 0;
    height: 50pt;
}
#left
{
    left: 0;
    top: 50pt;
    width: 100pt;
    bottom: 0;
}
#head, #footer
{
    height: 12pt;
}
#head
{
    top: 50pt;
    left: 100pt;
    right: 0;
}
#footer
{
    bottom: 0;
    left: 100pt;
    right: 0;
}
#content
{
    top: 62pt;
    left: 100pt;
    right: 0;
    bottom: 12pt;
}
#scroll
{
    width: 100%;
    height: 100%;
    overflow: auto;
}
​ 
```

# mysql - mysql权限

> ID：14019437
> 
> 赞同：1
> 
> 时间：2012-12-24T09:22:43.190
> 
> 标签：mysql

执行以下mysql语句创建数据库并赋予用户权限后无法访问mysql

```
create database my_db;
GRANT ALL PRIVILEGES ON my_db.* TO 'user'@'%' IDENTIFIED BY 'mypasswd';
GRANT SELECT ON my_db.* TO 'user'@'%' IDENTIFIED BY 'mypasswd';
FLUSH PRIVILEGES;

mysql -u user -p mypasswd drops me 
Access denied for user 'user'@'localhost' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:29:50.553

您需要分别授予用户从 localhost 连接的权限。％ 不管用。

```
`GRANT ALL PRIVILEGES ON my_db.* TO 'user'@'localhost' IDENTIFIED BY 'mypasswd';
 GRANT SELECT ON my_db.* TO 'user'@'localhost' IDENTIFIED BY 'mypasswd';` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:25:28.213

`-p`和您的密码之间没有空格。

由于您仅授予数据库权限`my_db`，因此也添加数据库以直接连接到它。

```
mysql -u user -pmypasswd my_db 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:37:22.537

我试过这个：

```
GRANT ALL ON my_db.* TO 'user'@'%' IDENTIFIED BY 'mypasswd';
FLUSH PRIVILEGES; 
```

之后

```
./mysql -uuser -pmypasswd 
```

对我来说没问题。

如果没有，请尝试使用 localhost：

```
GRANT ALL ON my_db.* TO 'user'@'localhost' IDENTIFIED BY 'mypasswd';
FLUSH PRIVILEGES; 
```

# iphone - UILabel 字体：粗体和斜体

> ID：14019441
> 
> 赞同：7
> 
> 时间：2012-12-24T09:23:15.550
> 
> 标签：iphone, objective-c, ios, uilabel, uifont

> **可能重复：**
> [如何在 iPhone/iPad 的 UILabel 上设置粗体和斜体？](https://stackoverflow.com/questions/4713236/how-do-i-set-bold-and-italic-on-uilabel-of-iphone-ipad)

我正在尝试使用系统字体使 UILabel 字体粗体和斜体，但我不能同时使用这两种样式。那么是否可以使用系统字体使字体变为粗体和斜体？这是我的代码，

```
lblTitle.font = [UIFont italicSystemFontOfSize:[UIFont systemFontSize]]; 
```

或者

```
lblTitle.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]]; 
```

我想要我的字体粗体和斜体。谁能帮我？先感谢您。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-24T09:25:52.067

试试这个代码...

```
UIFont *yourFont = [UIFont fontWithName:@"Helvetica-BoldOblique" 
                                   size:[UIFont systemFontSize]];
lblTitle.font = yourFont; 
```

你也可以为 BoldItalik 使用另一个字体名称。

`Optima-BoldItalic`, `TimesNewRomanPS-BoldItalicMT`, `Baskerville-BoldItalic`,`HelveticaNeue-BoldItalic`等等...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-24T09:26:16.013

有几种字体本身包含 Bod+Italic，您可以使用这些字体......一个经常举例的例子是

```
lblTitle.font = [UIFont fontWithName:@"Arial-BoldItalicMT" size:16.0f]; 
```

其他是：

**- TrebuchetMS-粗体**

**- Helvetica-BoldOblique**

**- 这个[链接](http://iphonedevsdk.com/forum/iphone-sdk-development/6000-list-uifonts-available.html)会帮助你。**

# android-linearlayout - onSizeChanged 只执行一次

> ID：14019442
> 
> 赞同：1
> 
> 时间：2012-12-24T09:23:18.700
> 
> 标签：android-linearlayout

在我的项目中，我将几个视图循环添加到一个垂直扩展`LinearLayout`（名为MyLinearLayout）中，但是在循环之后，该方法`onSizeChanged`最终执行了，并且它只执行了一次。

为什么？

# django - 如何将 django ManyToManyField 转换为 Django-nonrel 字段？

> ID：14019445
> 
> 赞同：2
> 
> 时间：2012-12-24T09:23:37.000
> 
> 标签：django, google-app-engine, many-to-many, django-nonrel

我在 django 中构建了一个应用程序，但是因为我发现 google 应用程序引擎不支持开箱即用的 Django（免费，云 sql 不能免费使用对吧？）。

我决定转移到 Django-nonrel，所以需要转换的数据库字段很少，我不知道如何：

```
class Cate(models.Model):
    name = models.CharField(max_length = 100)
    description = models.TextField()
    create_by = models.ForeignKey(User)
    create_date = models.DateTimeField('cate created date')

    def __unicode__(self):
        return self.name

class Product(models.Model):
    product_name = models.CharField(max_length = 200)
    owner = models.ForeignKey(User)

    cate = models.ManyToManyField(Cate)

    timestamp = models.DateTimeField('product added date')
    view = models.IntegerField(default = 0)

    def __unicode__(self):
        return self.product_name 
```

这是从用户模型扩展的 user_profile 模型

```
 class UserProfile(models.Model):
     user = models.OneToOneField(User)

     cates = models.ManyToManyField('shop.Cate') 
```

Cate 模型由管理员创建，UserProfile 可以有多个 cate，同一个 cate 可以属于多个用户，与 product 相同。

请帮助构建这些模型，也许还有一些关于如何使用 Django-nonrel 的提示

我对数据库真的很陌生

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-25T15:50:11.920

有两种方法可以做到这一点。更便宜的版本是使用 ListFields

```
from djangotoolbox.fields import ListField

class UserProfile(models.Model):
    user = models.OneToOneField(User)
    cates = ListField(models.ForeignKey(shop.Cate)) 
```

ListField 只存储一个 Cate id 列表。这有一些重要的限制。

1.  您的实体限制为 1MB，因此这会限制列表中的实体数量。在这种情况下，它仍然是一个相当大的数字，尤其是因为您的实体中没有其他内容。

2.  如果已编入索引，您可以对 cates 字段进行数据存储查询。但是，每个实体的索引限制为 5000 个。您将使用一个作为用户属性，因此在这种情况下，您的 cates 列表将被限制为 5000 个条目。我以前没有打过这个，所以我不知道它会如何失败，我想你在写你的实体时会遇到一个例外。

更昂贵的选择是使用中间映射实体。这为您提供了无限的关系，以支付创建/查询映射实体的额外费用。

```
class UserCateMapping(models.Model)
    user = models.ForeignKey(UserProfile)
    cate = models.ForeignKey(Cate) 
```

在这种情况下，您需要为每个关系创建一个新实体，并在获取您实际想要使用的实际 Cate 或 UserProfile 实体之前查询 UserCateMapping 实体。这将比第一个选项更昂贵，但您将拥有无限的映射。

# asp.net - 页面生命周期中的渲染事件

> ID：14019447
> 
> 赞同：1
> 
> 时间：2012-12-24T09:23:43.723
> 
> 标签：asp.net

我的项目文件中有以下文件。

1.  用户控制
2.  内容页
3.  站长

我正在检查页面生命周期中的`Render`事件。`Render`事件正在按以下顺序执行。

1.  内容页
2.  母版页
3.  用户控制

显然，它是预定义的。

**问题**是，为什么是内容页，然后是母版页，最后是用户控制？

我的意思是如何合并完整的 Html 以发送到浏览器？它不应该首先包含母版页吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:20:45.527

渲染不是一个事件。它是一种调用方法来生成要发送给客户端的输出。
渲染渲染它自己和它的孩子。

顺序为 Render RenderChildren

[从ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)中可以清楚地看到。

在您的控件层次结构中，页面是父级。MasterPage 是 Page 控件的子控件。根据您放置用户控件的位置，它将是 Page 或 MasterPage 的子级。

如果创建自定义控件，通常会覆盖此方法以输出控件的标记

每个控件`HtmlTextWriter`从其父控件接收 a 并将其输出写入此编写器。客户端收到的最终输出是控件写入的输出及其所有子级写入器。

由于页面必须启动此过程，因此必须首先调用其 Render。

# django - 从麦克风录制音频并保存为 .wav django web app

> ID：14019449
> 
> 赞同：2
> 
> 时间：2012-12-24T09:23:47.060
> 
> 标签：django, flash, audio

我使用 django、html 和 jquery（和 js）创建了一个 Web 应用程序。我需要从麦克风录制音频并将其存储为 .wav 文件。这样做的最佳方法是什么？（如果大多数浏览器都支持它，如 chrome、firefox、safari 则更好）如果它易于理解和使用，我不介意使用 flash 插件。请提出好的想法和链接。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:28:18.117

如果您使用从麦克风获取数据的传统方式，Flash 在发送音频数据之前会对其进行高度压缩。也就是说，如果您使用带有麦克风的[NetStream.publish() 。](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/flash/net/NetStream.html#publish%28%29)我实际上不确定格式，但可以想象它是专有的……可能是 MP3。但它也可能是 Speex ......至少我知道 Flash 支持这种格式。

现在，[Microphone 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html)能够在应用程序中公开原始声音数据。您需要侦听`sampleData`从其实例调度的事件。但是，由于某种原因，文档并没有涵盖这一点……这是一个*相对较*新的功能，所以，也许他们只是忘记在文档中添加它。[然而，在这里](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html)，他们发布了一个如何做到这一点的示例（滚动到“捕获麦克风声音数据”段落）。您需要自己编写 WAV 数据的“编码器”，但它输出音频的格式已经是某种 PCM，因此您只需要编写正确的标题（或者我认为）。

# postgresql - Postgresql，查询结果到新表

> ID：14019452
> 
> 赞同：2
> 
> 时间：2012-12-24T09:24:12.803
> 
> 标签：postgresql

Windows/NET/ODBC

我想以某种方便的方式将查询结果获取到新表，我可以通过数据适配器看到，但我找不到办法。
周围没有太多例子可以满足初学者的水平。
不知道是否是临时的，但是在看到不再需要该表的结果后，我可以“手动”删除它，也可以自动删除它。

这是我尝试的：

```
 mCmd = New OdbcCommand("CREATE TEMP TABLE temp1 ON COMMIT DROP AS " & _
  "SELECT dtbl_id, name, mystr, myint, myouble FROM " & myTable & " " & _
  "WHERE myFlag='1' ORDER BY dtbl_id", mCon)

  n = mCmd.ExecuteNonQuery 
```

*这次运行没有错误，并且在“n”中我得到了正确的匹配行数！！*

但是使用 pgAdmin 我看不到那些表在哪里？无论我是在打开的交易下还是在交易关闭后查看。
其次，我应该先为 temp1 表定义列，还是可以根据查询结果自动生成它们（那太好了！）。

请用最小的例子来说明我如何根据上面的代码来获取充满查询结果的新表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:34:36.967

执行当前代码执行相同操作的更短方法是使用`CREATE TEMPORARY TABLE AS SELECT ...`. 请参阅[手册中的](http://www.postgresql.org/docs/current/static/sql-createtableas.html)[条目`CREATE TABLE AS`](http://www.postgresql.org/docs/current/static/sql-createtableas.html)。

临时表在创建它们的会话（“连接”）之外**不**可见，它们旨在作为会话将在以后的查询中使用的数据的临时位置。如果您希望其他会话可以访问创建的表，请不要使用`TEMPORARY`表。

也许您想要`UNLOGGED`（9.2 或更高版本）生成不需要持久但必须对其他会话可见的数据？

参见相关：[有没有办法在 PostgreSQL 中访问其他会话的临时表？](https://dba.stackexchange.com/questions/5236/is-there-a-way-to-access-temporary-tables-of-other-sessions-in-postgres)

# facebook - Facebook可以授权Web app和Native App吗

> ID：14019454
> 
> 赞同：0
> 
> 时间：2012-12-24T09:24:25.013
> 
> 标签：facebook

我不了解 Facebook App Config Advance。带有身份验证部分：有用户可以选择的选项：Web 或 Native/Desktop。

Facebook 表示“只有在您的客户端应用程序中嵌入了应用程序密码时，才选择本地/Destop。” 这是否意味着当我将其设置为 Native/Desktop App 时，我无法使用 web sdk 进行授权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T13:01:26.723

有一个 API 调用可以为长期令牌扩展短期令牌 [https://graph.facebook.com/oauth/access_token?client_id=x&client_secret=x&grant_type=fb_exchange_token&fb_exchange_token=x](https://graph.facebook.com/oauth/access_token?client_id=x&client_secret=x&grant_type=fb_exchange_token&fb_exchange_token=x)

我认为该选项可以启用此调用，但对此不太确定。基本上，如果您想仅使用您的桌面应用程序（而不在服务器代码中实现此调用）获得长期访问令牌，您应该检查这一点。

# php - Yii 中相同 AR 模型的不同规则

> ID：14019455
> 
> 赞同：1
> 
> 时间：2012-12-24T09:24:26.110
> 
> 标签：php, mongodb, activerecord, yii, yii-validation

我有一个模型扩展了具有特定规则的 AR 类。但现在我需要在这个表中插入行，但是有其他规则。我是否需要使用新规则创建其他模型，或者可以定义其他规则？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:31:48.440

您可以设置验证方案。例如：

```
$model = new Post(); 
$model->scenario = 'new_line';
$model->attributes = $_GET['data'];
if ($model->validate()){
    $model->save(false);
} 
```

在您的模型中：

```
public function rules()
{
    return array(
        array('username, text', 'required','on' => 'new_line')
    );
} 
```

在模型规则中，所有数组行都必须有键“on”，否则此规则将不适用。

[在这里](http://www.yiiframework.com/wiki/266/understanding-scenarios/)阅读更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:35:02.047

如果您正在扩展您的课程（活动记录），那么您实际上可以覆盖您的 rules() 函数，即：

```
class User extends ActiveRecord(){
    function rules(){
        return array(array(
            // Nomrally a rule
        ))
    }
} 
```

然后让你的下一节课：

```
class User_extended extends ActiveRecord(){
    function rules(){
        return array(array(
            // Nomrally a rule
        ))
    }
} 
```

应该就是这样。然后您可以调用`User_extended`该类，您的规则将应用于父`User`类，因为 Yii 在`$this`上下文中获取规则`$this`并将成为您的子类。

但是你也可以在这里使用场景，但它可能会变脏，特别是如果你需要覆盖其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:43:22.113

谢谢。现在我正在尝试使用它

```
/**
 * @param string $attribute fields names wich should be validated
 * @param array $params additional params for validation
 */
public function ValidatorName($attribute,$params) { … } 
```

# activerecord - yii中没有主外键关系的关系Ado

> ID：14019462
> 
> 赞同：1
> 
> 时间：2012-12-24T09:25:16.860
> 
> 标签：activerecord, yii

我有 2 张桌子。一个是组，另一个是框架。groups 有 id、name、owner 作为列。grouppage 有 id、name 和 user_id。用户可以拥有群组页面。如果用户是组的所有者，则他们可以编辑页面。意味着 user_id = 所有者。否则用户无法编辑群组页面。因此，我有一个名为 can_edit 的公共属性。如果 user_id = owner，则为 true。现在我想使用关系 ADO 连接这两个表。但我该怎么做？因为我必须将 grouppage 表中的 user_id 连接到组中的所有者。owner 和 group_id 都不是主键？

任何解决方案/想法

感谢所有史密斯

# python - PyQT4 和瓷砖动画

> ID：14019468
> 
> 赞同：0
> 
> 时间：2012-12-24T09:25:59.937
> 
> 标签：python, animation, pyqt4, tiles

我刚刚开始学习 PyQT4。

如何定义一个类，其实例将是动画图像？我有几个 png 文件，所以我希望该对象在一个循环中在某个时刻渲染一个这样的文件，而在另一个时刻渲染另一个文件。我应该使用 QMovie，还是 Qt Animation Framework，还是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:33:42.467

这段[代码](http://www.daniweb.com/software-development/python/threads/116827/pyqt-and-gif)应该可以帮助你。你应该使用`QMovie`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:19:53.363

实际上，我在[http://python.su/forum/topic/15679/?page=1#post-94136找到了更适合我的东西](http://python.su/forum/topic/15679/?page=1#post-94136)

```
# -*- coding: utf-8 -*-
import sys
import time

from PyQt4 import QtGui, QtCore

class SpriteAnimation(object):
    def __init__(self, image_path, sprite_width, sprite_height, label):
        pixmap = QtGui.QPixmap(image_path)

        width, height = pixmap.width(), pixmap.height()
        self.pixmaps = []
        for x in range(0, width, sprite_width):
            for y in range(0, height, sprite_height):
                self.pixmaps.append(pixmap.copy(x, y, 
                                                sprite_width, sprite_height))
        self._current_frame = 0
        self.label = label

    def play(self, interval=100):
        self._timer = QtCore.QTimer(interval=interval,
                                    timeout=self._animation_step)
        self._timer.start()
    def _animation_step(self):
        self.label.setPixmap(self.pixmaps[self._current_frame])
        self.label.update()
        self._current_frame += 1
        if self._current_frame >= len(self.pixmaps):
            self._current_frame = 0

class Window(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.resize(100, 100)
        layout = QtGui.QVBoxLayout(self)
        label = QtGui.QLabel()
        layout.addWidget(label)
        # http://content.makeyourflashgame.com/pbe/tutorials/star-green.png
        self.animation = SpriteAnimation('star-green.png', 80, 80, label)
        self.animation.play()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

我通过以下方式使用了这个想法：

```
class PowerUp(QtGui.QGraphicsRectItem):
    def __init__(self):
        QtGui.QGraphicsRectItem.__init__(self)
        self.images = ['data/images/objects/bonus_block/full-0.png',
                       'data/images/objects/bonus_block/full-1.png',
                       'data/images/objects/bonus_block/full-2.png',
                       'data/images/objects/bonus_block/full-3.png',
                       'data/images/objects/bonus_block/full-4.png']
        self.image = self.images[0]
        self.current = 0
        self.position()
        self.timer = QtCore.QTimer()
        self.timer.timeout.connect(self.animation_step)
        self.timer.start(175)
        #random.choice([slide(), ghost()])

    def position(self):
        self.pos_x = random.randint(-300, 300)
        self.pos_y = random.randint(-200, 200)

    def boundingRect(self):
        return QtCore.QRectF(0, 0, 32, 32)

    def paint(self, painter, option, widget):
        painter.setBrush(QtGui.QBrush(self.image))
        painter.setPen(QtGui.QPen(QtCore.Qt.NoPen))
        painter.drawRect(0, 0, 32, 32)
        self.setPos(self.pos_x, self.pos_y)

    def animation_step(self):
        self.image = QtGui.QPixmap(self.images[self.current])
        self.current += 1
        if self.current == len(self.images):
            self.current = 0 
```

# javascript - 如何停止这个移动的 div

> ID：14019469
> 
> 赞同：2
> 
> 时间：2012-12-24T09:26:12.247
> 
> 标签：javascript, animation, html

这是我的 Javascript 函数

```
 <script type="text/javascript">
    var foo = null; // object
    function doMove() {
      foo.style.left = parseInt(foo.style.left)+1+'px';
      setTimeout(doMove,0); // call doMove in 20msec
      document.getElementById("foo").innerHTML = foo.style.left;
    if(foo.style.left=='100px'){
     alert(foo.style.left);
    }}
    function init() {
      foo = document.getElementById('foo'); // get the "foo" object
      foo.style.left = '0px'; // set its initial position to 0px
      doMove(); // start animating
    }
    window.onload = init;
    </script>
    <div id="foo" style="width:100px;background:#99ccff;position: relative;">I am moving box</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:30:09.037

检查您是否`<div>`已达到所需的端点（例如 100px），如果是，则不再调用该`setTimeout()`函数：

```
function doMove() {
  foo.style.left = parseInt(foo.style.left)+1+'px';
  document.getElementById("foo").innerHTML = foo.style.left;
  if(foo.style.left=='100px'){
    alert("Finished");
  } else {
    setTimeout(doMove,20); // call doMove in 20msec
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:31:50.447

在这里，我为您创建了[jsfiddle](http://jsfiddle.net/xmHMc/8/)。看css：

```
#foo { left: 100px!Important; }​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T09:32:09.427

这是一个带有停止按钮[的示例：](http://jsfiddle.net/YYCUy/)

单击停止时，设置一个标志以指示您希望动画停止。在触发下一阶段动画之前检查此标志。

JS：

```
var foo = null; // object
var bAnimate = true;
function doMove() {
  foo.style.left = parseInt(foo.style.left)+1+'px';
  if (bAnimate) {
      setTimeout(doMove,0); // call doMove in 20msec
  }
  document.getElementById("foo").innerHTML = foo.style.left;
if(foo.style.left=='100px'){
 alert(foo.style.left);
}}
function init() {
  foo = document.getElementById('foo'); // get the "foo" object
  foo.style.left = '0px'; // set its initial position to 0px
  doMove(); // start animating
}
function stop() {
    bAnimate = false;
}
    window.onload = init;​ 
```

HTML：

```
<div id="foo" style="width:100px;background:#99ccff;position: relative;">I am moving box</div>
<input type="button" onclick="stop();" value="stop" /> 
```

​</p>

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T09:32:44.727

嗯...这行得通吗？

```
 function doMove() {
      foo.style.left = parseInt(foo.style.left)+1+'px';
      if (!stop) setTimeout(doMove, 0); // if stop is false then call doMove in 20msec
      document.getElementById("foo").innerHTML = foo.style.left;
    if(foo.style.left=='100px'){
      alert(foo.style.left);
    }
  } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T09:37:20.367

[你去吧](http://codepen.io/joe/pen/GyClk)，尽管我不鼓励这种模拟动画的方式。

```
function getLeftPx() {
  console.log(left+"px");
  return left + "px";
}

function init() {
  window.left = 0;

  var foo = document.getElementById('foo'); // get the "foo" object
  foo.style.left = getLeftPx(); // set its initial position to 0px
  doMove(); // start animating
}
window.onload = init;

function doMove() {

  window.moveInterval = setInterval( function() {
    left++;
    foo.style.left = getLeftPx();
    foo.innerHTML = left;

    if( left == 100 ) {
      clearInterval( moveInterval );
    }
  }, 20 );
} 
```

# spring - Spring Security 3 SavedRequestAwareAuthenticationSuccessHandler 对 POST 和 GET 没有影响

> ID：14019472
> 
> 赞同：1
> 
> 时间：2012-12-24T09:26:36.310
> 
> 标签：spring, spring-security

有这样的问题：使用spring security 3时，尝试在应该登录时询问资源（通过GET）或提交表单（通过POST）。所以我重定向到登录表单，然后spring恢复我的原始请求，但它总是恢复为GET 请求（即使我尝试发出 POST 请求）。所以我想知道我该如何解决它？或者可能是我如何允许 spring security 只存储 GET 请求并跳过 POST？

我在 DefaultSavedRequest 中找到了这样的代码：

```
public boolean doesRequestMatch(HttpServletRequest request, PortResolver portResolver) {

    ...

    if (!"GET".equals(request.getMethod()) && "GET".equals(method)) {
        // A save GET should not match an incoming non-GET method
        return false;
    } 
```

据我了解，此方法比较缓存请求和传入请求，它表明仅当传入请求不是 GET 并且存储请求是 GET 时请求不相等。所以在我的情况下，存储请求是 POST，传入的是 GET，所以它返回是相等的，所以它工作错误。我能用它做什么？在这种特定的比较中是错误还是有某种意义？

**更新。** 我重新运行错误，发现我的主要描述不完整。我试着更详细地描述它。我有 GET url，它打开表单并通过 AJAX 提交与带有弹出消息窗口的 POST 相同的 URL。我执行 GET URL，表单打开。比我注销，并尝试提交表单。弹出窗口输出错误。我登录并重定向到 URL（与 GET/POST 请求相同），但在屏幕上看到的不是表单，而是我的 AJAX 请求的 JSON 响应，在 Firebug 中我看到登录后执行 POST 请求。当我在登录后删除缓存过滤器时，我重定向到相同的 URL，但它不像 POST 请求那样工作，而是像往常一样 GET 请求并打开表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:31:11.530

正如[手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#request-caching)所说，保存请求处理是一种“尽力而为”的方法。不可能是所有人的全部。它会在执行登录时缓存一个请求（无论是什么请求方法、GET、POST 等），然后在登录后重定向到缓存的 URL。

重定向后的传入请求将是 GET（例如，您不能重定向到 POST），因此它会尽力将其与缓存的请求相匹配，并决定是否应使用缓存的请求来替换它，因此继续进行，就好像登录从未发生过一样。

您发布的代码是指用户尝试发出 GET 请求然后被提示登录的情况。如果对同一 URL 的后续请求不是 GET，则*不是*登录后重定向的结果，因此不应使用缓存的请求*来*替换它。

您可以自定义`RequestCache`使用[`request-cache`](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-request-cache)命名空间元素，或将其替换为无操作实现。如果您不想使用缓存请求，可以设置配置的`always-use-default-target`属性`form-login`。

# c - 无法在交叉引用中增加行数

> ID：14019479
> 
> 赞同：1
> 
> 时间：2012-12-24T09:27:42.577
> 
> 标签：c, struct, kernighan-and-ritchie

我正在尝试编写一个交叉引用器，它打印一个单词列表和它们出现的行号，忽略诸如 a、an、the 等“噪音”单词。（Kernighan 和 Ritchie，ANSI 版 p 143 问题6-3)。以下是代码：

```
#include<stdio.h>

#include<stdlib.h>

#include<string.h>

#include"getch.h"

#include"search_tools.h" /*this contains the binsearch function*/

#include"getword.h"

#define MAXWORD 100

char* noise[] = {"a","and","if","is","the"}; /*noise words that we need to exclude*/

int linecount = 1;

struct tnode {

        int line_number;

        char* word;

        struct tnode* left; /*for all those words lexicographically less than word*/

        struct tnode* middle; /*for all those words lexicographically equal to word*/

        struct tnode* right; /*for all those words lexicographically greater than word*/

              };

/*this function tells you where you should put your new word*/

struct tnode* addtree (struct tnode* p, char* w) {

        int cond;

        if (p == NULL) {

                p = (struct tnode*)malloc(sizeof(struct tnode));

                p -> word = strdup(w);

                p -> line_number = linecount;

                p -> left = p -> right = p -> middle = NULL;

                        }

        else if ((cond = strcmp(w,p->word)) == 0) {

                p -> middle = addtree(p -> middle,w);

                                                   }

        else if (cond > 0) {

                p -> right = addtree(p -> right,w);

                            }

        else if (cond < 0) {

                p -> left = addtree(p -> left, w);

                            }

        else {

                ;

             }

        return p;
                                                   }

void treeprint (struct tnode* p) {

        struct tnode* q;

        if (p != NULL) {

                treeprint(p->left);

                printf("%s occurs in the following lines:\n",p -> word);

                for (q = p; q != NULL; q = q->middle)

                        printf("%4d ",q -> line_number);

                printf("\n\n");

                treeprint(p->right);
                        }

                                  }

int main (int argc, char* argv[]) {

        struct tnode* root;

        char word[MAXWORD];

        root = NULL;

        int c;

        while ((c = getword(word,MAXWORD)) != EOF) {

                if (isalpha(word[0]) && binsearch(word,noise,5) == -1)

                        root = addtree(root,word);

                else if (c == '\n')

                        linecount++;

                                                    }

        treeprint(root);

        return 0;

                                   } 
```

这是我使用的 getword 函数：

```
int getword (char* word, int lim) {

    int c;

    char* w;

    w = word;      

    while (isspace(c = getch())) /*skip white spaces*/

            ;

    if (c != EOF)

            *w++ = c;

    if (!isalpha(c)) { /*the first character in a word can be a #, as in #define or   #include*/

            *w = '\0';

            return c;

    }

    while(isalnum(c = getch()) && --lim > 0)

            *w++ = c;

    ungetch(c);

    *w = '\0';

    return word[0]; /*signal that a word has been collected*/
} 
```

以下是用于搜索 char 指针的 binsearch：

```
int binsearch (char * word, struct key tab[], int n) {

        int cond;

        int low, high, mid;

        low = 0;

        high = n -1;

        while (low <= high) {

                mid = (low+high)/2;

                if ((cond = strcmp(word,tab[mid].word)) < 0)

                        high = mid - 1;

                else if (cond > 0)

                        low = mid + 1;

                else /*found it*/

                        return mid;
                            }

        return -1;

} 
```

如果 getword 遇到非字母（单词的第一个字符）或非数字字符，它应该返回它。因此，我将 lincecount 设置为在 getword 返回“\n”时递增。但这似乎不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:18:22.857

`getword`您在函数中遇到问题。

```
while (isspace(c = getch())) /*skip white spaces*/

        ; 
```

因为`'\n'` 是将被跳过的空白字符之一。所以试图计算行数的代码永远不会看到它。

# javascript - 如何为 json 数组创建 javascript 分页？

> ID：14019482
> 
> 赞同：0
> 
> 时间：2012-12-24T09:27:50.940
> 
> 标签：javascript, json

我想知道如何使用 javascript 对 json 数组进行分页？这是我需要分页的json数组。这是一个小数组，但我必须对一个包含 2000 条记录的大数组进行分页。

```
    {"类型":[["TF_OTHER","Other"],["TF_TRIP","Trip"],["TF_LUNCH","Lunch"]]}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:23:55.803

你可以尝试这样的事情：（虽然我没有测试过）

```
<script>

var arr
function onLoad(jsonArr) {
    arr = eval(jsonArr);
}

function paginate(offset, max)
{
    var demo = document.getElementById('demo');
    for(var n=0; n<demo.childNodes.length; n++){
        demo.removeChild(demo.childNodes[0]);
    }

    for(var i=0; i<max; i++){
        var ele=document.createTextNode(arr[i+offset]);
        demo.appendChild(ele);
    }

    var next = document.getElementById('next');
    next.setAttribute("onclick","paginate("+(offset+max)+","+max+")");
    var pre = document.getElementById('pre');
    pre.setAttribute("onclick","paginate("+(offset-max)+","+max+")");
}

</script> 
```

# windows - 用于删除 Windows 2003 服务器中超过 24 小时/1 天的临时文件和文件夹的 Windows shell 脚本

> ID：14019485
> 
> 赞同：1
> 
> 时间：2012-12-24T09:28:05.453
> 
> 标签：windows, shell, scripting, windows-server-2003, windows-shell

想出可以在我的 Windows 2003 服务器上运行的确切脚本一直很困惑。

我尝试过的脚本如下：

```
forfiles.exe /p C:\Windows\Temp /s /m *.* /d - /c "cmd /c del @file

forfiles -p "C:\Windows\Temp" -s -m *.* -d -1 -c "cmd /c del /Q @path 
```

**删除所有内容，而不是删除超过 24 小时或 1 天的文件**

```
@echo off
cd /d "C:\Windows\Temp"
rd /s /q "C:\Windows\Temp" 
```

**任务计划程序中没有删除超过 X 小时的文件和文件夹的选项**

注意：我不是在寻找 Powershell、VB 或 Python

请帮忙。

# position - 宽度：自动和固定位置

> ID：14019488
> 
> 赞同：0
> 
> 时间：2012-12-24T09:28:35.290
> 
> 标签：position, width, fixed

我想在我的网站顶部有菜单，但是当我将宽度设置为“自动”并将位置设置为“固定”时， `width:auto;` 菜单的宽度没有改变，就`position:fixed;`完成了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-07T10:25:29.913

这个派对有点晚了，但要获得全宽菜单，只需使用

```
position: fixed;
left: 0;
right: 0; 
```

您可以根据需要设置填充，同时保持全宽条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T13:49:31.427

也许你应该试试

```
#menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T15:33:10.127

尝试添加：

```
white-space: nowrap; 
```

在您固定位置的 div 中。但请注意，当 div 小于窗口的宽度时，此解决方案不会导致行换行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:35:33.597

当您希望自动宽度时，请尝试此操作。

```
width: auto; 
min-width: 100px; 
overflow:hidden; 
```

看看我在问题中的回答

[拉伸液体容器和漂浮的内容物](https://stackoverflow.com/questions/13206542/stretch-liquid-container-along-with-floated-contents/13206625#13206625)

希望这可以帮助...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T09:44:03.117

尝试这个

```
#menu {
    width: 100%;
    position:fixed  
} 
```

# java - 如何从 Struts2 中的自定义动作映射器返回全局结果

> ID：14019489
> 
> 赞同：1
> 
> 时间：2012-12-24T09:28:35.213
> 
> 标签：java, struts2

如何在自定义操作映射器中返回自定义全局结果。

```
public class MyCustomActionMapper implements ActionMapper {

  public ActionMapping getMapping(HttpServletRequest request, 
                                  ConfigurationManager configManager) {
    ....
    ....
    return ????
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:38:42.753

ActionMapping getMapping(javax.servlet.http.HttpServletRequest request, ConfigurationManager configManager)

```
Expose the ActionMapping for the current request

Parameters:
    request - The servlet request
    configManager - The current configuration manager 
Returns:
    The appropriate action mapping String or null if mapping cannot be determined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:03:49.570

你确定这真的是你需要做的吗？Struts2 为您提供开箱即用所需的所有工具，以实现几乎所有结果。

但是如果你真的想实现你的自定义动作映射器，那么看看[Ian Roughley 的 Struts2 Web 2.0 项目](http://books.google.it/books?id=HrFGgg3fPwsC&pg=PA266&dq=creating%20a%20custom%20action%20mapper&hl=it&sa=X&ei=aSbYULvnDKiK4gTko4CIBg&ved=0CDcQ6AEwAA#v=onepage&q=creating%20a%20custom%20action%20mapper&f=false)的第 9 章，第 266 到 269 页；

> ActionMapper 接口提供两种方法：一种将 URL 转换为动作映射，另一种将另一种方式从动作映射转换为 URL。

因此，您照常从 struts.xml 映射您的操作和结果类型，而不是在您的操作映射器中。

也看一下[DefaultActionMapper 源代码](http://www.jarvana.com/jarvana/view/org/apache/struts/struts2-core/2.3.1.1/struts2-core-2.3.1.1-sources.jar!/org/apache/struts2/dispatcher/mapper/DefaultActionMapper.java?format=ok)......任何地方都没有结果类型，这不是管理它们的地方。

```
public ActionMapping getMapping(HttpServletRequest request,
                                ConfigurationManager configManager) {
    ActionMapping mapping = new ActionMapping();
    String uri = getUri(request);

    int indexOfSemicolon = uri.indexOf(";");
    uri = (indexOfSemicolon > -1) ? uri.substring(0, indexOfSemicolon) : uri;

    uri = dropExtension(uri, mapping);
    if (uri == null) {
        return null;
    }

    parseNameAndNamespace(uri, mapping, configManager);

    handleSpecialParameters(request, mapping);

    if (mapping.getName() == null) {
        return null;
    }

    parseActionName(mapping);

    return mapping;
} 
```

# php - 在表格中永久隐藏行

> ID：14019490
> 
> 赞同：0
> 
> 时间：2012-12-24T09:28:38.383
> 
> 标签：php, javascript, html, css

我正在使用此代码显示表格

```
 <table>
        <tr>
            <th style="height: 25px">NAME</th>
            <th style="height: 25px">EMAIL</th>
            <th style="height: 25px">CELL NO</th>
            <th style="height: 25px">CITY</th>                   
            <th>Hide Candidate</th>
        </tr>
    </table>

    <?php
    while($data_set1 = mysql_fetch_array($result))
    {
        echo "<tr>";
        echo "<td>{$data_set1['ename']}</td>";
        echo "<td>{$data_set1['eemail']}</td>";
        echo "<td>{$data_set1['ecell']}</td>";
        echo "<td>{$data_set1['ecity']}</td>";

        echo "<td><input type=\"checkbox\" name=\"hide_cand\" id=\"hide_cand\" onclick=\" return hideRow(this)\"/></td>";
\"/></td>";
        echo "</tr>";
    }
    ?> 
```

并使用这个javascript我可以暂时隐藏表格行，当表格加载到页面上时如何永久隐藏它

```
function hideRow(checkbox)
{
    if(confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? '))
    {
        checkbox.parentNode.parentNode.style.display = "none";
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:39:32.617

你看过 jQuery (http://jquery.com/) 吗？学习起来非常简单，您只需：

在您的 HTML 标头中，只需添加

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

然后修改你的功能

```
function hideRow(checkbox)
{
    if(confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? '))
    {
        $(this).closest("tr").remove();
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:24:50.637

不使用 jQuery 删除

```
function hideRow(checkbox)
{
    if(confirm('This action can not be recovered, are you sure you want to HIDE this Candidate? '))
    {
        var row = checkbox.parentNode.parentNode , table = row.parentNode;
        table.removeChild(row);
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T09:50:52.697

您通过将样式显示设置为无来暂时隐藏该行。您的问题是一旦该行被隐藏，那么在重新加载操作完成后它不应该再次出现。

因此，为了永久隐藏该行，您必须从数据库本身中删除相应的用户记录。如果在数据库中删除，那么您将无法从数据库中获取相同的记录，因此在重新加载页面时不会显示该行。

希望这个建议对你有用。

# javascript - 如何像在javascript中一样调用jquery函数

> ID：14019494
> 
> 赞同：5
> 
> 时间：2012-12-24T09:28:55.183
> 
> 标签：javascript, jquery, javascript-events

我有这个 jQuery 函数：

```
$('.scrollToLoginBox').click(function(){
    $('html, body').animate({scrollTop: $("#LoginBox").offset().top-5}, 'slow');                
}); 
```

我不希望它作为一个类，我希望能够这样称呼它：`onClick="scrollTo(id);"`

那么，我怎样才能把函数放在 javascript 格式中：

```
function scrollTo(id){
    $('html, body').animate({scrollTop: $("#'+id+'").offset().top-5}, 'slow');
} 
```

出版商编辑：

我不恨你们 ;o) 我感谢你们所有的回答，但我不是想得到身份证。另一方面，我正在尝试构建我在上面发布的相同功能。因此，单击时我将发送 id（我有例如 Login 或 LoginBox），以便该功能将缓慢滚动到锚点（id=Login 或 LoginBox）。

现在我必须这样称呼它：class="scrollToLoginBox"，而不是我想称之为 onClick="scrollTo('LoginBox');

我有 20 个与上述相同的函数，每个 id 一个。我拥有但我不想要的另一个示例是：class="scrollToSettings"，而不是我想将其称为 onClick="scrollTo('LoginBox'); 或 onClick="scrollTo('Settings');

```
 $('.scrollToSettings').click(function(e){
        $('html, body').animate({scrollTop:$("#settings").offset().top-5}, 'slow');         
        return false;       
    });

    $('.scrollToFaqs').click(function(e){
        $('html, body').animate({scrollTop:$("#formCode").offset().top-5}, 'slow');         
        return false;       
    }); 
```

我只想要一个接受 id 的函数。我只是不知道如何将 id 传递给这个 jQuery 函数；o)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T09:29:50.807

如果您想将 id 传递给被点击的项目，那么您需要使用`this.id`

**[现场演示](http://jsfiddle.net/rajaadil/3YM7S/)**

```
onClick="scrollTo(this.id);" 
```

如果你想传递 id ，`some other control`那么你只需将 id 作为字符串传递。

```
onClick="scrollTo('idOfHTMLElement');" 
```

**根据注释进行****编辑，用于将值从 html 元素传递到 javascript 函数。****

 **> 数据属性用于保存自定义属性，可以在 jQuery 函数中使用[data()](http://api.jquery.com/jQuery.data/)函数访问。

**html**

```
<div class="scrollToCal" data-idtopass="Anchor">click me to go to Anchor</div>​ 
```

**Javascript**

```
jQuery(document).ready(function($) {

    $('.scrollToCal').click(function() {

        $('html, body').animate({
            scrollTop: $('#' + $(this).data('idtopass')).offset().top - 5
        }, 'slow');
        return false;
    });

});​ 
```**

# jquery - 在打印预览的每一页上添加不同的页脚

> ID：14019497
> 
> 赞同：-4
> 
> 时间：2012-12-24T09:29:08.273
> 
> 标签：jquery, html, css, printing

我有包含课程的页面，我想打印此页面，并且我想在打印模式下的每个页面中添加页脚（当前课程名称，当前课程创建日期）。

```
<html>
<head>
<style>
.footer {
    display:none;
}
@media print {
.Lesson
{
page-break-after:always;
}
.footer {
    display:Block;
}
}
</style>
</head>
<body>
<div id="lesson1" class="Lesson">
lesson text
<div id="print-footer print-footer1" class="footer">footer 1 content</div>
</div>
<div id="lesson2" class="Lesson">
lesson text
<div id="print-footer print-footer2" class="footer">footer 2 content</div>
</div>
<div id="lesson3" class="Lesson">
lesson text
<div id="print-footer print-footer3" class="footer">footer 3 content</div>
</div>
<div id="lesson4" class="Lesson">
lesson text
<div id="print-footer print-footer4" class="footer">footer 4 content</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:07:03.923

它在 css 中是不可能的选择。您需要根据您的要求使用其他一些语言进行动态变化或使用 jquery。

这里的html

```
 <span>Hello</span>
 <div></div>
 <div></div>
 <div></div> 
```

这里的jquery

```
 var htmlStr = $('span').html();
  $('div').text(htmlStr); 
```

演示：[jsfiddle](http://jsfiddle.net/TvmxD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:22:33.777

这不是一个好方法，但它会起作用。您可以将所需的所有页脚 DIV 添加到每个页面，如下所示：

```
<div class="print-footer print-footer1">footer 1 content</div>
<div class="print-footer print-footer2">footer 2 content</div>
<div class="print-footer print-footer3">footer 3 content</div>
<div class="print-footer print-footer4">footer 4 content</div>
<div class="print-footer print-footer5">footer 5 content</div> 
```

然后使用 CSS 隐藏它们：

```
.print-footer {
    display:none;
} 
```

然后在每个页面上的 BODY 标签中添加一个类，如下所示：

```
<body class="lesson1">
<body class="lesson2">
<body class="lesson3">
<body class="lesson4">
<body class="lesson5"> 
```

并在使用该 BODY 类打印时显示正确的页脚：

```
@media print {

body.lesson1 .print-footer1 {
    display:block;
}

body.lesson2 .print-footer2 {
        display:block;
}

body.lesson3 .print-footer3 {
        display:block;
}

body.lesson4 .print-footer4 {
        display:block;
}

body.lesson5 .print-footer5 {
        display:block;
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:01:15.613

我已经正确地重新阅读了您的问题，并尝试了以下方法：

```
<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Print footer test</title>
        <style>
        .print-footer {
            display: none;
        }
        @media print {
            /* put the page-break after the footer! */
            .print-footer {
                display:block;
                page-break-after: always;
            }
        }
        </style>
    </head>
    <body>
        <div class="lesson" id="lesson1">lesson 1 content</div>
        <div class="print-footer">footer 1 content</div>
        <div class="lesson" id="lesson2">lesson 2 content</div>
        <div class="print-footer">footer 2 content</div>
        <div class="lesson" id="lesson3">lesson 3 content</div>
        <div class="print-footer">footer 3 content</div>
    </body>
</html> 
```

这适用于 Windows 上最新版本的 Firefox、Chrome 和 IE10 的打印预览。基本上，我在打印模式下显示了一个 print-footer，并确保在*footer 之后*`page-break-after: always;`，而不是在课程之后。

 *请注意，某些旧版本的 Internet Explorer（当然还有其他浏览器）不太支持打印 CSS，尤其是类似的内容`page-break-after`，因此请务必彻底测试！

（另外，请确保[验证您的 HTML](http://validator.w3.org/)，否则您不能责怪浏览器出错。您缺少 a `DOCTYPE`， a`<title>`并且您的`id`属性无效 - 它们不能包含空格。）*

# ios6 - iOS：UINavigation 按钮

> ID：14019507
> 
> 赞同：0
> 
> 时间：2012-12-24T09:30:44.580
> 
> 标签：ios6, uinavigationbar, uinavigationitem

虽然我试图把导航按钮放在`UINavigationController`它不显示的地方，但是导航栏是可见的！代码如下，

```
leftbtn = [UIButton buttonWithType:UIButtonTypeCustom];
[leftbtn setFrame:CGRectMake(0.0f, 0.0f, 25.0f, 25.0f)];
[leftbtn addTarget:self action:@selector(hom) forControlEvents:UIControlEventTouchUpInside];
[leftbtn setImage:[UIImage imageNamed:@"home.png"] forState:UIControlStateNormal];
UIBarButtonItem *random = [[UIBarButtonItem alloc] initWithCustomView:leftbtn];
rigtbtn = [UIButton buttonWithType:UIButtonTypeCustom];
[rigtbtn setFrame:CGRectMake(0.0f, 0.0f, 25.0f, 25.0f)];
[rigtbtn addTarget:self action:@selector(edity) forControlEvents:UIControlEventTouchUpInside];
[rigtbtn setImage:[UIImage imageNamed:@"edite.png"] forState:UIControlStateNormal];
UIBarButtonItem *random1 = [[UIBarButtonItem alloc] initWithCustomView:rigtbtn];
navigationController.navigationItem.leftBarButtonItem=random;
navigationController.navigationItem.rightBarButtonItem=random1; 
```

这段代码有什么问题？请帮我解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:36:37.000

您必须设置其根视图控制器的属性，而不是设置导航控制器的导航项（也许`self`如果您的代码是这样组织的）。所以，如果`rootViewController`是一个视图控制器，你用它来初始化导航控制器，你必须这样写：

```
rootViewController.navigationItem.leftBarButtonItem = random;
rootViewController.navigationItem.rightBarButtonItem = random1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T20:40:53.107

代替，

```
navigationController.navigationItem.leftBarButtonItem=random;
navigationController.navigationItem.rightBarButtonItem=random1; 
```

利用，

```
self.navigationItem.leftBarButtonItem=random;
self.navigationItem.rightBarButtonItem=random1; 
```

您不必`UINavigationController`在导航栏上创建或访问设置栏按钮项目。如果您正在推送当前视图控制器，那么您可以使用上面的代码来设置这些按钮。推送的视图控制器已经具有设置它的属性。

# c# - 计算方法的执行时间

> ID：14019510
> 
> 赞同：631
> 
> 时间：2012-12-24T09:30:51.500
> 
> 标签：c#, .net, timer, io, stopwatch

> **可能重复：**
> [如何测量函数运行的时间？](https://stackoverflow.com/questions/10107140/how-to-measure-how-long-is-a-function-running)

我有一个 I/O 计时方法，可以将数据从一个位置复制到另一个位置。计算执行时间的最佳和最真实的方法是什么？`Thread`? `Timer`? `Stopwatch`? 还有其他解决方案吗？我想要最准确的，并且尽可能简短。

* * *

## 回答 #1

> 赞同：1313
> 
> 时间：2012-12-24T09:32:31.397

[`Stopwatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)是为此目的而设计的，并且是在 .NET 中测量时间执行的最佳方法之一。

```
var watch = System.Diagnostics.Stopwatch.StartNew();
// the code that you want to measure comes here
watch.Stop();
var elapsedMs = watch.ElapsedMilliseconds; 
```

[**不要**使用 DateTime](https://stackoverflow.com/questions/28637/is-datetime-now-the-best-way-to-measure-a-functions-performance)来测量 .NET 中的时间执行。

* * *

更新：

正如@series0ne 在评论部分指出的那样：如果您想要对某些代码的执行进行真正精确的测量，您将不得不使用操作系统中内置的性能计数器。以下[答案](https://stackoverflow.com/questions/1409762/creating-a-perfmon-counter-to-record-an-average-per-call-c/1409833#1409833)包含一个很好的概述。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-12-24T09:54:28.733

根据个人经验，`System.Diagnostics.Stopwatch`该类可用于测量方法的执行时间，但是，**请注意**：它并不完全准确！

**考虑以下示例：**

```
Stopwatch sw;

for(int index = 0; index < 10; index++)
{
    sw = Stopwatch.StartNew();
    DoSomething();
    Console.WriteLine(sw.ElapsedMilliseconds);
}

sw.Stop(); 
```

**示例结果**

```
132ms
4ms
3ms
3ms
2ms
3ms
34ms
2ms
1ms
1ms 
```

现在你想知道；*“嗯，为什么第一次需要 132 毫秒，而其余时间明显更少？”*

答案是`Stopwatch`它不能补偿 .NET 中的“背景噪音”活动，例如 JITing。因此，当您第一次运行您的方法时，首先要使用 .NET JIT。执行此操作所需的时间会添加到执行时间中。同样，其他因素也会导致执行时间发生变化。

您真正应该寻找的绝对准确性是**性能分析**！

**看看以下内容：**

RedGate ANTS Performance Profiler 是一种商业产品，但会产生非常准确的结果。-[使用 .NET 分析提高应用程序的性能](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)

这是一篇关于分析的 StackOverflow 文章： -[有哪些好的 .NET 分析器？](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)

我还写了一篇关于使用秒表进行性能分析的文章，您可能想看看 - [.NET 中的性能分析](https://stackoverflow.com/questions/12629032/performance-profiling-in-net)

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-12-24T09:33:35.033

[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)类寻找您的最佳解决方案。

```
Stopwatch sw = Stopwatch.StartNew();
DoSomeWork();
sw.Stop();

Console.WriteLine("Time taken: {0}ms", sw.Elapsed.TotalMilliseconds); 
```

它还有一个名为[`Stopwatch.IsHighResolution`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.ishighresolution.aspx). 当然，这是硬件和操作系统的问题。

> 指示计时器是否基于高分辨率性能计数器。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-12-24T09:32:49.527

如果您有兴趣了解性能，最好的答案是使用分析器。

否则，[System.Diagnostics.StopWatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)提供高分辨率计时器。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-24T09:33:44.683

[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)将使用高分辨率计数器

> 秒表通过计算底层计时器机制中的计时器滴答来测量经过的时间。如果安装的硬件和操作系统支持高分辨率性能计数器，则 Stopwatch 类使用该计数器来测量经过的时间。否则， Stopwatch 类使用系统计时器来测量经过的时间。使用频率和 IsHighResolution 字段来确定秒表计时实现的精度和分辨率。

如果您正在测量 IO，那么您的数据可能会受到外部事件的影响，我会非常担心。*准确性*（正如您在上面指出的那样）。相反，我会进行一系列测量并考虑这些数字的平均值和分布。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-06-18T05:35:10.300

在此[Microsoft Doc](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch?view=netcore-3.1)之后：

```
using System;
using System.Diagnostics;
using System.Threading;
class Program
{
    static void Main(string[] args)
    {
        Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();
        Thread.Sleep(10000);
        stopWatch.Stop();
        // Get the elapsed time as a TimeSpan value.
        TimeSpan ts = stopWatch.Elapsed;

        // Format and display the TimeSpan value.
        string elapsedTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}",
            ts.Hours, ts.Minutes, ts.Seconds,
            ts.Milliseconds / 10);
        Console.WriteLine("RunTime " + elapsedTime);
    }
} 
```

输出： `RunTime 00:00:09.94`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-08-30T19:12:32.517

您还可以使用“获取自系统启动以来经过的毫秒数”。

```
System.Environment.TickCount 
```

例如

```
static void method1()
{
    for (int i = 1; i <= 100; i++)
    {
        Console.WriteLine("Test1 " + i);
    }
}
static void Main(string[] args)
{
    var startTime = Environment.TickCount;
    method1();
    var endTime = Environment.TickCount;
    Console.WriteLine("RunTime " + (endTime - startTime));
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-02-14T14:11:02.023

```
 using System.Diagnostics;
 class Program
 {
    static void Test1()
    {
        for (int i = 1; i <= 100; i++)
        {
            Console.WriteLine("Test1 " + i);
        }
    }
  static void Main(string[] args)
    {

        Stopwatch sw = new Stopwatch();
        sw.Start();
        Test1();
        sw.Stop();
        Console.WriteLine("Time Taken-->{0}",sw.ElapsedMilliseconds);
   }
 } 
```

# c++ - 如何对与其他数组元素对应的数组元素进行排序？

> ID：14019516
> 
> 赞同：1
> 
> 时间：2012-12-24T09:31:28.950
> 
> 标签：c++, arrays, sorting

我有 2 个数组，其中第一个数组的第 i 个元素对应于另一个数组的第 i 个元素。也就是说，如果我将第一个数组的第 i 个元素移动到第 j 个位置，那么我必须对第二个数组执行相同的操作。

我知道我可以使用`pair<int, int>`然后使用该`sort`功能来做到这一点，但这不是一个选择。

所以，我在想可能是`sort`函数的第三个参数可以用于此目的：类似于：

```
int a[4] = {2,3,1,0}, b[4] = {10,9,6,4};  //2 corresponds to 10, 3 corrspond to 9 and so on...

sort(a,a+10); // a = {0,1,2,3}
sort(b, b+10, compare);  //->should change b to {4,6,10,9} 
```

可以这样做吗？如果是，比较功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:37:16.150

是的，可以这样做。您的比较器需要是一个对象，其中包含从 b 中的元素到 a 中相应元素的映射，您可以使用它来确定排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:40:13.823

您必须实现比较，以便它在给定 b 中的两个元素的情况下比较 a 中的相应元素。`int index = element - b;`您可以通过在比较函数中获取元素是您的项目之一来确定索引是什么。

我会认真建议使用`pair<>`or a`struct/class`同时保持你的 a、b 值 - 也可以节省时间。

# iphone - 从 Plist 填充的图形 (ECGraph)

> ID：14019524
> 
> 赞同：0
> 
> 时间：2012-12-24T09:32:11.547
> 
> 标签：iphone, ios, graph, plist

我有一个 plist（比如列表`date and distance`）。现在我希望将此 Plist 值填充到..但是`Bar Graph`从`ECGraph`ECGraph 的示例代码..打印我需要每次分配`ECGRaphItem`但 Plist 值正在变化。它可能会有所不同在数字中......我无法分配 `ECGRaphItem`......bcz plist值每次都会增加......

ECGraph 代码取自 [http://code.google.com/p/ecgraph/downloads/detail?name=ECGraphSample.zip](http://code.google.com/p/ecgraph/downloads/detail?name=ECGraphSample.zip)

那么如何处理`ECGraphItem *item1 = [[ECGraphItem alloc] init];`plist 值...

```
-(void)ViewDidLoad{
CGContextRef _context = UIGraphicsGetCurrentContext();
ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(10,10, 480, 320) 
                                    withContext:_context isPortrait:NO];
ECGraphItem *item1 = [[ECGraphItem alloc] init];
item1.isPercentage = YES;
item1.yValue = 80;
item1.width = 35;
item1.name = @"A";

ECGraphItem *item2 = [[ECGraphItem alloc] init];
item2.isPercentage = YES;
item2.yValue = 35.3;
item2.width = 35;
item2.name = @"B";

ECGraphItem *item3 = [[ECGraphItem alloc] init];
item3.isPercentage = YES;
item3.yValue = 45;
item3.width = 35;
item3.name = @"C";

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,item3,item4,item5,nil];
[graph setXaxisTitle:@"name"];
[graph setYaxisTitle:@"Percentage"];
[graph setGraphicTitle:@"Histogram"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];
[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor black]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:31:06.700

希望它会对您有所帮助.. 首先，您必须将值转换为 int intValues 并将这些值传递到数组中..

```
 NSArray *percentage;

- (id)initWithFrame:(CGRect)frame {
if ((self = [super initWithFrame:frame]))
{
    percentage=[[NSArray alloc]init];
    // Initialization code
}
return self; 
```

}

```
-(void)setPercentage:(NSArray *)array
{
percentage =array;
}

- (void)drawRect:(CGRect)rect
{

NSLog(@"scoreforcelieng..%@",scoreforcelieng);
     // Drawing code
CGContextRef _context = UIGraphicsGetCurrentContext();

ECGraph *graph = [[ECGraph alloc] initWithFrame:CGRectMake(20,20,700, 423)
                                    withContext:_context isPortrait:YES];
ECGraphItem *item1 = [[ECGraphItem alloc] init];
item1.isPercentage = YES;

item1.yValue = [[percentage objectAtIndex:0]intValue];

item1.width = 35;
item1.name = @"whtever";

ECGraphItem *item2 = [[ECGraphItem alloc] init];
item2.isPercentage = YES;
 item2.yValue = [[percentage objectAtIndex:1]intValue];

item2.width = 35;
item2.name = @"whtever";

ECGraphItem *item3 = [[ECGraphItem alloc] init];
item3.isPercentage = YES;
 item3.yValue = [[percentage objectAtIndex:2]intValue];

item3.width = 35;
item3.name = @"whtever";

ECGraphItem *item4 = [[ECGraphItem alloc] init];
item4.isPercentage = YES;
 item4.yValue = [[percentage objectAtIndex:3]intValue];

item4.width = 35;
item4.name = @"whtever";

NSArray *items = [[NSArray alloc] initWithObjects:item1,item2,item3,item4,nil];
[graph setXaxisTitle:@"name"];
[graph setYaxisTitle:@"Percentage"];
[graph setGraphicTitle:@"Histogram"];
[graph setDelegate:self];
[graph setBackgroundColor:[UIColor colorWithRed:220/255.0 green:220/255.0 blue:220/255.0 alpha:1]];
[graph drawHistogramWithItems:items lineWidth:2 color:[UIColor blackColor]]; 
```

}

然后在你想用来显示图表的地方使用这些线

```
 NSArray *valueArray = [[NSArray alloc]initWithObjects:intValue1,intValue2,intValue3,intValue4,nil];
  NSLog(@"valueArray..%@",valueArray);
DisplayView *dView = [[DisplayView alloc]initWithFrame:CGRectMake(0, 0, 1024, 748)];
[dView setBackgroundColor:[UIColor whiteColor]];
 [dView setPercentage:valueArray] 
```

# sql - 改革运动时间表。甲骨文

> ID：14019531
> 
> 赞同：1
> 
> 时间：2012-12-24T09:32:50.277
> 
> 标签：sql, oracle

通过执行以下查询（我正在使用`Oracle 11g`）

```
SELECT EVENTARCHIVE.VEHID vehicle
      , to_char(EVENTARCHIVE.EVENTTIME, 'Dy DD-Mon-YYYY  HH24:MI:SS') occured_on
      , EVENTARCHIVE.EVENTDESCR description
FROM EVENTARCHIVE
     , (SELECT POX
               , POY
               , AREARAD 
        FROM POINTOBJECTS
        WHERE POID = 'PB') PO
WHERE POWER(X - PO.POX, 2) + POWER(Y - PO.POY, 2) < POWER(PO.AREARAD, 2) 
AND   EVENTARCHIVE.EVENTGROUP = 2 
```

我得到这样的数据集

```
vehicle | occred_on   | description
017     | .. 08:35:12 | stopped moving
021     | .. 09:40:00 | stopped moving
021     | .. 10:00:00 | started moving 
```

如您所见，第 21 辆车有两种状态显示其停止时间。停工时间长达 20 分钟。`stop.mv`这是和`started.mv`标志之间的最小跨度。

我想据此对其进行改革

```
vehicle | stopped_moving | started_moving
021     | .. 09:40:00    | .. 10:00:00 
```

我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:26:52.247

可能是这样的？

```
SQL> create table EVENTARCHIVE ( VEHID number, EVENTTIME date, EVENTDESCR  varchar2(20));

Table created.

SQL> REM vehice 17 has no started moving record.
SQL> insert into EVENTARCHIVE values(17, to_date('24/12/2012 08:35:12', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> REM vehice 21 has multiple stop / starts
SQL> insert into EVENTARCHIVE values(21, to_date('24/12/2012 09:40:00', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> insert into EVENTARCHIVE values(21, to_date('24/12/2012 10:00:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> insert into EVENTARCHIVE values(21, to_date('24/12/2012 10:22:00', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> insert into EVENTARCHIVE values(21, to_date('24/12/2012 12:00:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> REM vehice 25 has multiple stop / starts records start with a started moving record.
SQL> insert into EVENTARCHIVE values(25, to_date('23/12/2012 16:35:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> insert into EVENTARCHIVE values(25, to_date('23/12/2012 22:59:00', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> insert into EVENTARCHIVE values(25, to_date('24/12/2012 07:00:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> REM vehice 33 has some duplicate stopped data (possible?)
SQL> insert into EVENTARCHIVE values(33, to_date('23/12/2012 16:35:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> insert into EVENTARCHIVE values(33, to_date('23/12/2012 22:59:00', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> insert into EVENTARCHIVE values(33, to_date('23/12/2012 23:02:00', 'dd/mm/yyyy hh24:mi:ss'), 'stopped moving');

1 row created.

SQL> insert into EVENTARCHIVE values(33, to_date('24/12/2012 07:00:00', 'dd/mm/yyyy hh24:mi:ss'), 'started moving');

1 row created.

SQL> commit;

Commit complete.

SQL> select vehid, eventtime stopped_moving, next_time started_moving
  2    from (select vehid, eventtime, eventdescr,
  3         case
  4           when lead(eventdescr) over (partition by vehid order by eventtime) != eventdescr
  5           then
  6             lead(eventtime)  over (partition by vehid order by eventtime)
  7         end next_time
  8  from EVENTARCHIVE)
  9   where eventdescr = 'stopped moving'
 10     and next_time is not null;

     VEHID STOPPED_MOVING       STARTED_MOVING
---------- -------------------- --------------------
        21 24-dec-2012 09:40:00 24-dec-2012 10:00:00
        21 24-dec-2012 10:22:00 24-dec-2012 12:00:00
        25 23-dec-2012 22:59:00 24-dec-2012 07:00:00
        33 23-dec-2012 23:02:00 24-dec-2012 07:00:00 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:47:35.663

您可以使用子查询来做到这一点，也许这样的工作：

```
SELECT 
    e1.VEHID vehicle, 
    to_char(e1.EVENTTIME, 'Dy DD-Mon-YYYY  HH24:MI:SS') stopped, 
    to_char(e2.EVENTTIME, 'Dy DD-Mon-YYYY  HH24:MI:SS') started 
FROM 
    EVENTARCHIVE e1, 
    EVENTARCHIVE e2 
WHERE 
    e1.EVENTDESCR = 'stopped moving' 
    AND e2.ID IN (
        SELECT ID 
        FROM EVENTARCHIVE 
        WHERE 
            EVENTTIME<e1.EVENTTIME 
            AND EVENTDESCR = 'started moving' 
            AND VEHID = e1.VEHID 
        ORDER BY e1.EVENTTIME DESC LIMIT 1
    ) 
```

（我假设有一个列`ID`。）
这也应该适用于车辆的多个停止/启动条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:37:38.387

你可以做这样的事情，

```
select min(occred_on) stopped_moving,max(occred_on) started_moving
from table group by vehicle; 
```

希望这会有所帮助，

```
SELECT EVENTARCHIVE.VEHID vehicle
      , min(to_char(EVENTARCHIVE.EVENTTIME, 'Dy DD-Mon-YYYY  HH24:MI:SS')) stopped_moving,
        max(to_char(EVENTARCHIVE.EVENTTIME, 'Dy DD-Mon-YYYY  HH24:MI:SS')) started_moving,
      , EVENTARCHIVE.EVENTDESCR description
FROM EVENTARCHIVE
     , (SELECT POX
               , POY
               , AREARAD 
        FROM POINTOBJECTS
        WHERE POID = 'PB') PO
WHERE POWER(X - PO.POX, 2) + POWER(Y - PO.POY, 2) < POWER(PO.AREARAD, 2) 
AND   EVENTARCHIVE.EVENTGROUP = 2 group by vehicle 
```

# javascript - 被 setMap(null) 隐藏后多边形不再出现在地图上

> ID：14019532
> 
> 赞同：1
> 
> 时间：2012-12-24T09:32:52.367
> 
> 标签：javascript, google-maps

我的问题是我必须按需隐藏和显示多边形。我可以通过隐藏它们`setMap(null)`，但是当我它们时它们不会出现`setMap(map)`。

我检查了范围，全局变量。我不知道为什么会这样。

```
polygon[i] = new google.maps.Polygon({
                            paths:  polygonCoordinates,
                            strokeColor: "#000",
                            strokeOpacity: 0.5,
                            strokeWeight: 2,
                            fillColor: "#ff44dd",
                            fillOpacity: 0.15
                        });
                        polygon[i].setMap(map);
                        polygonCoordinates.splice(0,polygonCoordinates.length); 
```

# java - 查找包含给定时刻的区间

> ID：14019544
> 
> 赞同：6
> 
> 时间：2012-12-24T09:35:09.103
> 
> 标签：java, algorithm, tree, intervals

我正在尝试解决以下问题：给定 N 个时间间隔，每个时间间隔指定为（开始，结束），不重叠，基于开始排序 - 找到一个包含给定日期的时间间隔。例如给出：

```
[1,4] [5,8] [9,10][11,20] 
```

3 属于第一个区间，15 属于第四个区间，以此类推。

到目前为止，我有以下基本想法：

1.  我们可以使用二分查找找到对应的区间（Log N）
2.  由于可能只有少数间隔较大，其余间隔较小，因此可能值得根据其持续时间对迭代进行排序。然后，从统计上讲，大多数时候我们会“达到”最长的间隔 (O(1))，只是有时这会导致 N 的最坏情况复杂度。

我在想是否有结合这两种方法的空间。另一种想法是根据持续时间进行排序并将所有间隔插入树中，并按开始日期进行比较，在最坏的情况下，当最长持续时间按时间顺序排列时，这种方法的性能等于 2。

我想象的理想解决方案是有一棵树（或一些类似的数据结构），它在顶部包含最长的间隔，然后两个分支将具有接下来的两个最长间隔等。但是，我看不出有什么方法可以分支那棵树，即由于我们明确假设我们根据长度插入，我们不能真正丢弃树的左侧或右侧。

任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:08:53.667

`O(1)`在大多数情况下和最坏的情况下，这两种方法的天真组合提供了 a `O(logN)`，但大 O 表示法中的隐藏常数将是双倍的：

1.  让原始数组为`intervals`
2.  创建第二个数组，按照建议按间隔长度降序排序。随它去`lengths`
3.  对于每个查询，`intervals`使用二分搜索和`lengths`线性搜索进行搜索。搜索将并行¹完成，第一个完成 - 将导致另一个也停止。

因为在第 3 步中，我们可能会在 中进行最多`c*log(n)`步骤的二分查找`intervals`，所以我们将整体进行最多`2*c*log(n)`步骤。如果我们在 中更快地找到元素`lengths`，它将导致二分查找在中间结束，我们将减少操作次数，（但使用双常量，然后是原始方法）。

* * *

(1) 不需要并行计算机，可以通过逐步搜索，模拟单线程并行计算，直到找到答案。（一般信息，理解答案不需要：S.Even、A.Itai 和 A.Shamir 在他们的文章[On the Complexity of TimeTable and Multi Commodity Flow Problems](http://www.cs.technion.ac.il/~itai/publications/Algorithms/multi-commodity-timetables.pdf)中介绍了“并行搜索”的概念）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:06:23.067

您可以优先考虑二叉搜索树中的某些节点并使其保持平衡：

从您的组合方法开始（将较长的间隔放置在靠近顶部的位置）并使用一系列旋转来使二叉搜索树平衡（在破坏*一些*优先级的同时，如果它们不破坏，它应该保留靠近根的高优先级节点余额）。

要平衡树，请尝试以下策略（未经测试）：

*   平衡左半部分（根的子树）
*   平衡右半边
*   如果右半边比左半边高 1 以上（AVL 平衡条件
    *   虽然这是真的
        *   如果右-左四分之一（右半的左半部分）高于右-右四分之一，则将右子树向右旋转（启动 AVL 双旋转）
        *   将树向左旋转（完成一次 AVL 旋转）
        *   平衡左半部分（左半部分已经平衡 - 从 #3 开始）
*   否则，如果左半边比右半边高 1 以上
    *   做另一种情况的相反

这应该会产生一个尽可能尊重原始优先级的 AVL 平衡树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:51:22.700

有可能将两者结合在一起。这是我的想法，

根据范围的长度构建二叉树，假设我们有以下范围，

a: [0, 1), b: [1, 2), c: [3, 10), d: [11, 12), e: [13, 14)

我们从底部构建树，我们根据范围大小组合叶子，所以第一轮我们可以得到内部叶子，

(a, b), c, (d, e)

然后，

(a, b, c), (d, e)

根将是，

(a, b, c, d, e)

在每一轮中，我们结合具有最小范围长度的节点，保持在树的深度。

每个节点指向左、右子节点，并保持子节点的最小值、最大值。

如有不妥请指出..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:06:02.393

我会这样做：

使用第一个和最后一个间隔的数据（平均持续时间和时间），从统计上估计您希望时间处于哪个间隔。如果该间隔不包含目标，请使用估计的间隔重新执行估计数组结束（另一端将是最近的实际结束）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:13:03.377

我使用[JodaTime](http://joda-time.sourceforge.net/)和 TimeSlots（几乎等同于 Joda Period）实现了类似的东西。Period 是我的自定义类，具有 DateTime 类型的开始和结束。我持有一个按结束日期排序的期间树集。

时隙类：

```
public class TimeSlot<T> {
    private DateTime start;
    private DateTime end;

    // accessors
    ...
} 
```

实用方法：

```
public TimeSlot<T> getTimeSlot(DateTime pointInTime) {
    for (TimeSlot<T> ts : getCounterTimeSlotSet()) {
        if (ts.getPeriod().isDateInRange(pointInTime)) {
            return ts;
        }
    }
    return null;
}

public boolean isDateInRange(DateTime date) {
    if (date == null) {
        return false;
    }

    return date.isAfter(this.start.minusMillis(1)) 
        && date.isBefore(this.end.plusMillis(1));
} 
```

最近我找到了实现[艾伦区间代数的](http://en.wikipedia.org/wiki/Allen%27s_interval_algebra#Relations)[库](http://code.google.com/p/allenintervalrelationships/)，你可能会觉得它很有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T11:05:16.950

你可能是对的，二进制搜索不会是最优的，奇数分布。虽然，N = 10 亿的 log_2(N) 仅为 30 左右。

如果要搜索的列表中的每个元素的可能性相同，则元素的二进制搜索是最佳的。

因此，多级二分搜索在这里可能是理想的，其中每个级别的间隔大小大致相同。使用给出的示例：

```
First Level: [1-10] [11-20] # Size = 10
Second Level: [1-10] = [1,4] [5,8] [9,10] # Size = 4 
```

如果在 11 到 20 之间，则完成，否则展开 [1-10] 并检查区间 [1,4] [5,8] [9,10]。

设置搜索结构需要考虑 O(N log(N)) 向上的一些额外成本，并且对于小间隔来说成本更高，但如果最大和之间有足够大的差距，它应该有一个相当好的平均搜索时间最小的区间大小。

在最坏的情况下，您将拥有 log(N) 级别。

# c# - C# - WPF - 从另一个类更新进度条

> ID：14019545
> 
> 赞同：0
> 
> 时间：2012-12-24T09:35:12.783
> 
> 标签：c#, wpf, progress-bar

我在这里寻求有关 C# 尤其是 WPF 的帮助。:D

我有一个 WPF 项目，我需要从另一个类更新进度条的值。进度条在“NdWindow”类中，我需要从“Automator”类更新它的值。

我已经尝试了一些东西，但对我没有任何效果。

在“NdWindow”类中：

```
public partial class NdWindow : Window
{
    public NdWindow()
    {
        InitializeComponent();
    }

    public NdWindow(int progress)
    {
        InitializeComponent();
        setprogress(progress);
    }

    public void setprogress(int progress)
    {
        this.progressBar.Value = progress;
        MessageBox.Show(Convert.ToString(progress));
    } 
```

在“Automator”类中：

```
public static void post()
{
    NdWindow test = new NdWindow();
    test.setprogress(10);
} 
```

如果我运行程序，MessageBox 会弹出并显示我在 setprogress() 中发送的值。我也尝试在构造函数中发送值，但没有帮助。

如果可以，请你帮助我。:D

谢谢！

PS：“发布”功能是通过单击按钮执行的。我没有在这里写那个代码。我希望这对你来说不是问题。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T09:43:41.947

在您`post`创建 new 的方法`NdWindow`中，witch 不是您要更改进度条值的窗口。

你应该以某种方式`NdWindow`上课`Automator`。

```
public class Automator
{
   private NdWindow ndWindow;
   public Automator(NdWindow ndwindow)
   {
       this.ndWindow = ndwindow;
   }

   public void Post()
   {
       ndWindow.setprogress(10);
   }
}

public partial class NdWindow : Window
{
    private Automator automator;
    public NdWindow()
    {
        InitializeComponent();
        this.automator = new Automator(this);
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Automator.Post();
    }
} 
```

或者您可以将 NdWindow 发送到您的`post`方法

```
public class Automator
{
   public static void Post(NdWindow ndWindow)
   {
       ndWindow.setprogress(10);
   }
}

public partial class NdWindow : Window
{
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        Automator.Post(this);
    }
} 
```

# sql - 测试异常块的失败过程

> ID：14019546
> 
> 赞同：0
> 
> 时间：2012-12-24T09:35:20.773
> 
> 标签：sql, oracle, exception, plsql, procedures

我正在测试一些正在生产中的程序，并在异常块中添加了一些部分。我在测试环境中制作了这些程序的副本，我需要提出测试例外。

什么是使程序进入异常块的简单方法或代码更改最少？

我们只是`others`在捕获所有异常的异常块中。例如：

```
DECLARE
   -- something
BEGIN
   -- I need some operation to do here which will make control go to exception
EXCEPTION
   WHEN others THEN
      -- handling error (Need to check these changes)
END; 
```

我创建了一个程序来测试控制流以防出现异常，但它给了我错误。代码如下

```
CREATE OR REPLACE Procedure Exception_Check
AS
BEGIN

  dbms_output.put_line('step 1..........');
  raise_application_error(-20111, 'Step 2...........');
  dbms_output.put_line('step 3..........');

EXCEPTION
WHEN OTHERS THEN
    dbms_output.put_line('step 4, In to the exception block..........');
  raise_application_error(-20112, 'Step 5........... In raising application error');
END; 
```

我在做什么错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:50:56.160

首先，捕捉*一切*使用`EXCEPTION WHEN OTHERS`不一定是最佳实践。如果你处理一个异常，你应该确切地知道你将如何处理它。您不太可能有能力使用 OTHERS 正确处理每个 Oracle 异常，如果这样做，您可能应该将它们记录在会被注意到的地方。

引用 Oracle 的[避免和处理异常指南](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/errors.htm#BCFEBJBF)：

> *   尽可能为命名异常编写异常处理程序，而不是使用 OTHERS 异常处理程序。
>     
>     
>     
>     了解预定义异常的名称和原因。如果您知道您的数据库操作可能会引发特定的内部定义的没有名称的异常，请给它们命名，以便您可以专门为它们编写异常处理程序。

要回答您的问题，您可以使用该[`raise_application_error`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/errors.htm#LNPLS99960)过程在代码中的任何位置引发错误：

```
RAISE_APPLICATION_ERROR (-20000, 'an exception'); 
```

用户定义的例外是介于 20,000 和 20,999 之间的例外，因此请确保使用此范围内的数字。

一个例子可能是：

```
begin

   raise_application_error(-20500, 'an exception occurred');

exception when others then
   do_something;
end;
/ 
```

您还可以定义自己的[预定义异常](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/exception_declaration.htm#CJABADFA)，然后可以捕获：

```
declare
   my_exception EXCEPTION;
   PRAGMA EXCEPTION_INIT( my_exception, -20001 );
begin
   raise_application_error( -20001, 'an exception' );
exception when my_exception then
   do_something;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:44:37.243

要引发异常，请使用以下代码：

```
raise_application_error(-20111, 'Custom error message'); 
```

Oracle 文档：[处理 PL/SQL 错误](http://docs.oracle.com/cd/B10501_01/appdev.920/a96624/07_errs.htm)

# php - 不使用 PHP 对数组进行排序

> ID：14019547
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:35:28.417
> 
> 标签：php, sorting

我有对数组进行排序的 PHP 代码：

```
arsort($chart); 
```

但我不想对其进行排序，有任何解决方案使其未排序吗？`sort oppossite unsort`那么它有函数unsort（）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:36:41.287

您可以使用[**`shuffle($chart)`**](http://php.net/manual/en/function.shuffle.php)随机化数组内的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:42:56.410

在排序之前创建原始数组的副本；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:42:32.630

```
 <?php
       function cmp($a, $b)
    {
        if ($a == $b) {
            return 0;
        }
        return ($a < $b) ? -1 : 1;
    }

    $a = array(3, 2, 5, 6, 1);

    usort($a); // this is the unsort function

    foreach ($a as $key => $value) {
        echo "$key: $value\n";
    }

        ?>

       0: 3 
       1: 2
       2: 5
       3: 6
       4: 1
// yuo can user with user defined function 
<?php
function my_sort($a, $b)
  {
  if ($a == $b) return 0;
  return ($a > $b) ? -1 : 1;
  }

$arr = array("Peter", "glenn","Cleveland",
"peter","cleveland", "Glenn");

usort($arr, "my_sort");

print_r ($arr);
?> 
```

# iphone - iOS 5 中 UIImagePickerController 的内存警告，但 ios 4.x 中没有

> ID：14019550
> 
> 赞同：2
> 
> 时间：2012-12-24T09:35:49.103
> 
> 标签：iphone, objective-c, ios5, ios4, uiimagepickercontroller

这似乎是`UIImagePickerController`iOS 5 中的一个问题。

我有一个开发的应用程序 xcode4.3 我在两部 iPhone（iOS 4.3 和 5.1）上对其进行了测试

```
{

UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.view.tag = tag;
            imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            if ( imagePicker.view.tag == 1) 
            { //Editing doent allowed for biz card
                  imagePicker.allowsEditing = YES;
                  [Flurry logEvent:@"Edit Contacts:Attempt to add an image for the Contact picture using the camera"];
            }
            else {
                  [Flurry logEvent:@"Edit Contacts:Attempt to add an image for the Business Card picture using the camera"];
            }
            [self presentModalViewController:imagePicker animated:YES];
            [imagePicker release];

} 
```

如果设备是 iOS 4.1

拍摄照片或从照片库中选择照片时（在运行 iOS 4.1 的设备上测试）没有泄漏/没有内存警告。

在运行 iOS 5.1 的设备上测试的相同代码在从相机捕获的照片中经常遇到内存警告级别 1。

你..？&如何解决这个问题..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:57:31.160

试试这个并检查：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
   [picker dismissModalViewControllerAnimated:YES];
} 
```

添加此方法并检查。

也像这样添加并检查：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
            imagePicker.delegate = self;
            imagePicker.view.tag = tag;
            imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
            if ( imagePicker.view.tag == 1) 
            { //Editing doent allowed for biz card
                  imagePicker.allowsEditing = YES;
                  [Flurry logEvent:@"Edit Contacts:Attempt to add an image for the Contact picture using the camera"];
            }
            else {
                  [Flurry logEvent:@"Edit Contacts:Attempt to add an image for the Business Card picture using the camera"];
            }
            [self presentViewController:imagePicker animated:YES completion:nil]; 
```

# entity-framework - 入门实体框架数据库开发（代码优先）

> ID：14019551
> 
> 赞同：1
> 
> 时间：2012-12-24T09:35:58.640
> 
> 标签：entity-framework, azure, ef-code-first

关于目标是 Azure 的事实，使用**代码优先**方法创建具有实体框架的数据库是否有任何严重的缺点？我对 Azure 知之甚少（还 :)），但我知道我会为每笔交易付费。

所以现在我有点担心，如果我不用费心手动编写 SQL 语句，实体框架代码是否仍然会为我生成“成本友好”的 SQL 映射？或者当涉及到 Azure 数据库时，代码优先是一种不好的做法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:02:28.997

与 Azure 存储表不同，Azure SQL 数据库的成本不基于事务运行。

`Azure Storage Table`：数据大小 + 事务计数 + 输出带宽

`Azure SQL Databases`：数据大小 + 输出带宽

# sockets - 阻止对主机的请求

> ID：14019560
> 
> 赞同：0
> 
> 时间：2012-12-24T09:36:55.470
> 
> 标签：sockets, network-programming, request, block, host

免责声明：我**不是**在制作恶意软件。

我想知道是否可以阻止本地 PC 上的任何程序向 Internet 上的某个特定主机发送请求。是否可以在高于网卡驱动程序的级别上。

如我所见，例如浏览器打开一个套接字并通过它发送一些数据。我可以以某种方式访问​​它并*用它做一些事情*来阻止数据的发送吗？

如果可能的话，我应该走哪条路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T07:26:26.500

您可以使用虚假路由规则从命令提示符轻松执行此操作。下面我将展示如何在 Windows 上执行此操作。您还可以修改此解决方案以在 Linux/Unix 上工作。

从以**管理员身份运行的 CMD shell 提示符**

**第 1 步**- 使用 nslookup 查找要阻止的主机的 IP 地址

```
C:\>nslookup www.stackoverflow.com
Server:  myrouter.home
Address:  192.168.1.1

Non-authoritative answer:
Name:    stackoverflow.com
Address:  69.59.197.21
Aliases:  www.stackoverflow.com 
```

在这里我们看到 www.stackoverflow.com 的 IP 地址为 69.59.197.21

**第 2 步**- 使用 打印系统的当前路由表`route print -4`。查找“0.0.0.0 目的地”行并确定 Internet 的网关地址。

```
C:\>route print -4
IPv4 Route Table
===========================================================================
Active Routes:
Network Destination        Netmask          Gateway       Interface  Metric
          0.0.0.0          0.0.0.0      192.168.1.1     192.168.1.10     10
        127.0.0.0        255.0.0.0         On-link         127.0.0.1    306
        127.0.0.1  255.255.255.255         On-link         127.0.0.1    306
  127.255.255.255  255.255.255.255         On-link         127.0.0.1    306
      192.168.1.0    255.255.255.0         On-link      192.168.1.10    266
     192.168.1.10  255.255.255.255         On-link      192.168.1.10    266
    192.168.1.255  255.255.255.255         On-link      192.168.1.10    266
        224.0.0.0        240.0.0.0         On-link         127.0.0.1    306
        224.0.0.0        240.0.0.0         On-link      192.168.1.10    266
  255.255.255.255  255.255.255.255         On-link         127.0.0.1    306
  255.255.255.255  255.255.255.255         On-link      192.168.1.10    266
=========================================================================== 
```

现在您可以看到我的网关是 192.168.1.1（我家路由器的 IP 地址）。很明显，我的网络子网是 192.168.1.*。`ipconfig`（如果您还不知道子网的所有属性，也可以键入以发现它。）

**第 3 步**- 为您要阻止的 IP 地址插入虚假路由规则。诀窍是在不是网关的同一子网上选择一个 IP 地址。在这种情况下，192.168.1.2 是我子网上不存在的主机。

```
C:\> route add  69.59.197.21 MASK 255.255.255.255 192.168.1.2
 OK! 
```

您现在可以`route print -4`再次键入以确认表中的虚假路由规则。这个条目说的是“当这个主机需要发送到 69.59.197.21 时，尝试通过 192.168.1.2 发送它”。这将迫使主机发送到不存在的无法路由的主机。

这就是它的全部。当我输入这个时，我实际上阻止了我的机器访问 www.stackoverflow.com。现在要撤消此操作，只需键入：

```
C:\>route delete  69.59.197.21
 OK! 
```

精美的印刷品：

许多站点将有超过 1 个 IP 地址。如果 NSLookup 不能一次告诉你所有的 IP 地址，那么你可能需要每隔几分钟定期调用 NSLookup 来查看更多的 IP 地址。通过一些实验，您可以使用此技术来阻止整个网络。

如果您的浏览器配置为使用代理服务器，此技术可能不起作用。

此外，这种技术不太可能在重新启动后继续存在。您可能会编写一个插入到 Windows 任务计划程序（或您的操作系统的其他适当的自动启动机制）中的脚本，该脚本在操作系统启动或用户登录时执行添加路由的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T17:52:02.390

我通过编辑我的`C:\Windows\System32\drivers\etc\hosts`文件来做到这一点（阻止我的网络浏览器）。

您需要“以管理员身份运行”来编辑此文件。

我添加如下条目：

```
127.0.0.1   bad-domain.com
127.0.0.1   www.bad-domain.com 
```

这会将请求重定向到 localhost。

编辑在系统重新启动后仍然存在。

# jquery - 使用 jquery 加载方法刷新许多 div

> ID：14019563
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:37:01.990
> 
> 标签：jquery, html, ajax, comet

我有一个保存一些数据的 sql 数据库，并且我有一个包含一堆 div（如 30+）的页面显示这些数据。每个 div 都持有不同的数据库值。我想要实现的是使用 jquery item.load() 函数自动刷新所有 div，以便用户可以实时查看数据库中的更改。如果有 100 个用户使用这个系统，这是一个好的技术还是真的会减慢服务器的速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:38:58.027

您需要向`minimum`服务器发送调用以`bring`获取 div 的数据以`reduce`加快`transport`刷新速度。您可以发送`single call`并带来数据并用于`javascript / jquery`更新 div。

如果刷新所需的数据很大，那么您可以发送更多调用来刷新页面，以便您的 GUI 在接收所有数据之前开始更新。`Sending 30 calls for 30 div seems not a good solution.`

# html - 为什么 IE9 使用 span + :first-letter + text-transform:capitalize 进入兼容模式？

> ID：14019572
> 
> 赞同：1
> 
> 时间：2012-12-24T09:37:57.757
> 
> 标签：html, css, internet-explorer, internet-explorer-9

这是一个简单的测试用例：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>why</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
        body:first-letter {
            text-transform: capitalize;
        }
    </style>
</head>
<body>
    <span>*</span>
    œ blablabla (non-latin character on a new-line is also triggers that problem just like a single span with * without any characters following it)
</body>
</html> 
```

出于某种原因，IE9 报告它在显示该页面时出现问题，并以兼容模式重新加载该页面。为什么？该代码有什么问题？

如果`<span>`更改为`<div>`，则可以正常工作。如果它更改为`<div>`with `display:inline`（与 span 相同），则它会再次重新加载页面。如果`*`更改为`&nbsp;`，则一切正常，即使在`<span>`. 那么 IE9 在该代码中不喜欢什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:27:16.860

代码很奇怪（尽管是正确的），因为它告诉浏览器将不包含字母的元素的第一个字母大写。`:first-letter`当元素内容的第一个字符不是字母时，浏览器有不同的解释；在这件事上，规范模糊不清。但这种怪异是非常奇怪的。这是一个很容易被规避的怪癖。据推测，IE 9 在尝试确定第一个字母时有一个插入的内联元素。

在我的 IE 9 上，页面在“标准模式”下显示为全黑。将浏览器切换到 quirks 模式使页面显示正常。在您的情况下，可能使用 IE 9 的不同次要版本，浏览器可能会以某种方式检测到在标准模式下运行时出现问题，因此会退回到怪癖模式。

使用`*a`作为`span`元素内容使 IE 9 正确显示带有“*A”的页面。因此，该错误似乎是由通常不会发生的罕见组合引起的——通常*在*您使用`text-transform: capitalize`.

# php - YouTube API：错误 400（错误请求）

> ID：14019577
> 
> 赞同：4
> 
> 时间：2012-12-24T09:38:44.830
> 
> 标签：php, youtube-api

我的本地主机上有一个页面，用户可以从中上传视频。现在我想实现该功能，管理员可以将这些视频公开（用户必须将它们作为私人视频上传）。现在为此，首先我需要获取频道上所有视频的列表（包括私人视频）。我试过这段代码：

```
 $data = '<?xml version="1.0"?>
                <entry xmlns="http://www.w3.org/2005/Atom"
                  xmlns:media="http://search.yahoo.com/mrss/"
                  xmlns:yt="http://gdata.youtube.com/schemas/2007">
                </entry>';
    $headers = array( "Authorization: GoogleLogin auth=".$authvalue,
                 "GData-Version: 2",
                 "X-GData-Key: key=".$youtube_key,
                 "Content-length: ".strlen( $data ),
                 "Content-Type: application/atom+xml; charset=UTF-8");
    $curl = curl_init( "https://gdata.youtube.com/feeds/api/users/default/uploads");
    curl_setopt( $curl, CURLOPT_USERAGENT, $_SERVER["HTTP_USER_AGENT"] );
curl_setopt( $curl, CURLOPT_RETURNTRANSFER, true );
curl_setopt( $curl, CURLOPT_TIMEOUT, 10 );
curl_setopt( $curl, CURLOPT_SSL_VERIFYPEER, false );
curl_setopt( $curl, CURLOPT_POST, 1 );
curl_setopt( $curl, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt( $curl, CURLOPT_HTTPHEADER, $headers );
curl_setopt( $curl, CURLOPT_POSTFIELDS, $data );
curl_setopt( $curl, CURLOPT_REFERER, true );
curl_setopt( $curl, CURLOPT_FOLLOWLOCATION, 1 );
curl_setopt( $curl, CURLOPT_HEADER, 0 );
    $response = curl_exec($curl);
 curl_close($curl); 
```

返回此错误：

```
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 400 (Bad Request)!!1</title>
  <style>
    *{margin:.... 
```

我找不到请求用户视频列表的正确格式的标题，所以我使用了我申请上传视频的标题（并且有效，所以我确定用户身份验证没有问题）。

如果你能告诉我我做错了什么，或者只是给我指出一个工作视频列表的例子，我将非常感激。

编辑： curl_error 返回一个空字符串， curl_info 返回这个：

```
array (size=26)
  'url' => string 'https://uploads.gdata.youtube.com/feeds/api/users/.../uploads' (length=80)
  'content_type' => string 'text/html; charset=UTF-8' (length=24)
  'http_code' => int 400
  'header_size' => int 597
  'request_size' => int 1747
  'filetime' => int -1
  'ssl_verify_result' => int 20
  'redirect_count' => int 1
  'total_time' => float 0.639
  'namelookup_time' => float 0.047
  'connect_time' => float 0.078
  'pretransfer_time' => float 0.172
  'size_upload' => float 0
  'size_download' => float 925
  'speed_download' => float 1447
  'speed_upload' => float 0
  'download_content_length' => float 925
  'upload_content_length' => float 0
  'starttransfer_time' => float 0.203
  'redirect_time' => float 0.436
  'certinfo' => 
    array (size=0)
      empty
  'primary_ip' => string '173.194.70.117' (length=14)
  'primary_port' => int 443
  'local_ip' => string '10.0.0.33' (length=9)
  'local_port' => int 53639
  'redirect_url' => string '' (length=0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T02:29:20.507

参考上面的评论，使用[Zend_Gdata](http://framework.zend.com/manual/1.12/en/zend.gdata.html) ( version >= 1.7.7 ) 扩展安装 Zend 库解决了这个问题。还要注意 PHP 版本必须 >= 5.1.4 。

参考：[Google YouTube API - PHP](https://developers.google.com/youtube/2.0/developers_guide_php#Authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:51:53.130

我认为您必须在此 cURL 调用中发送的每个参数上尝试 php trim 功能。像

```
"Authorization: GoogleLogin auth=".trim($authvalue),
                 "GData-Version: 2",
                 "X-GData-Key: key=".trim($youtube_key),
                 "Content-length: ".trim(strlen($data)), 
```

它应该工作。

# django - Python/Django SMTP DebugServer 不捕获电子邮件

> ID：14019578
> 
> 赞同：2
> 
> 时间：2012-12-24T09:38:46.453
> 
> 标签：django, smtp, python-2.x, smtpd

我以这种方式启动服务器（在mac上）：

```
python -m smtpd -n -c DebuggingServer localhost:9999 
```

而且我没有收到任何错误或任何其他通知。我想这意味着一切都很好，如果我错了，请纠正我。

但是当我从 django shell 或我的应用程序发送电子邮件时，使用带有 fail_silently=False 的 send_mail/mail_managers，我在 smtpd 调试服务器上看不到任何输出。我没有收到任何 SMTPErrors，并且 send_mail/mail_managers 返回 1。

我跑了：

```
lsof -i | grep LISTEN 
```

看看是否有人监听端口 9999，不，没有人监听。这是否意味着 smtp 调试服务器有问题？它应该显示在听众名单上吗？

我的电子邮件设置：

```
EMAIL_BACKEND = 'django.core.mail.backends.dummy.EmailBackend'
EMAIL_HOST = 'localhost'
EMAIL_PORT = 9999 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T10:30:08.293

我认为您需要使用默认的 smtp 后端

```
EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend' 
```

# android - Android 非 UI 片段

> ID：14019580
> 
> 赞同：0
> 
> 时间：2012-12-24T09:38:55.500
> 
> 标签：android, fragment

最近在开发android app的时候，查了一下官方文档，里面写了一个fragment，不允许提供UI，所以不想问能不能用非UI的fragment做点什么，因为我不会知道如果我添加一个片段，它会花费很多 cpu 时间或内存吗？这是一种低效的行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:51:16.253

可能是您想了解片段的性能。

检查这个

[关于 Fragment 的 UI 性能](https://stackoverflow.com/questions/8176680/ui-performance-about-fragment?rq=1)

或阅读：- [http://assets.en.oreilly.com/1/event/68/Fragments%20for%20All%20Presentation.pdf](http://assets.en.oreilly.com/1/event/68/Fragments%20for%20All%20Presentation.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T14:32:33.453

片段是提供轻量级服务或在应用程序中维护某些状态的绝佳方式。您可以不使用它们，将所有内容捆绑到您的 Activity 中，但这对于非平凡的应用程序来说会变得笨拙。片段比将您的应用程序拆分为多个活动更轻量级（尽管这有其自身的优势）。

另请参阅对[没有 UI 的 Fragment 的用例是什么](https://stackoverflow.com/questions/11531648/what-is-the-use-case-for-a-fragment-with-no-ui)的回复。

# php - preg_match 随机行为

> ID：14019587
> 
> 赞同：1
> 
> 时间：2012-12-24T09:39:23.993
> 
> 标签：php, preg-match

除其他外，我有以下字符串：“boards/”、“localhost”、“mysql”、“0”、“1”、“Testing Board”、“PLAIN”。

我从表单中接收它们作为发布数据。其中一些可以有多字节字符，但使用的测试字符串都没有多字节字符。

我运行它们`if (!preg_match('/^./u', $str))`。

if check 主要评估为假，即 preg_match 返回 1。但有时它评估为 true，即来自该 preg_match 的 0。

真正的 (0) 似乎完全随机。但是，如果其中一个字符串的计算结果为 true，那么它们都可以。要么全部，要么没有。

有人对这种看似随机的行为有某种解释吗？也许有一个解决方案来解决它？

干杯贾里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:46:40.180

查看文档中的警告。[http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

> **警告** 此函数可能返回布尔值 FALSE，但也可能返回计算结果为 FALSE 的非布尔值。请阅读有关布尔值的部分以获取更多信息。使用 === 运算符测试此函数的返回值。

当您运行`preg_match`on 值时`0`，`1`它将返回该匹配项。`true`如果处理不当，将导致评估。

```
1 == true   //true
1 === true  //false
0 == false  //true
0 === false //false
1 == false  //false
1 === false //false
0 == true   //false
0 === true  //false 
```

# mysql - 如何从一条记录的两个字段中获取最大值

> ID：14019589
> 
> 赞同：1
> 
> 时间：2012-12-24T09:39:42.417
> 
> 标签：mysql, max

我想从表（mysql）中一条记录的两个字段中给出最大值。
我的桌子是：

```
CREATE TABLE `testtbl` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `startdate` date NOT NULL,
  `enddate` date NOT NULL,
  PRIMARY KEY (`userid`)
) 
```

例如我的数据是：

> 1、'2012-12-04'、'2013-02-02'

但是当我使用下面的 sql 时，我遇到了错误。
sql代码是：

```
select max(startdate,enddate) from `testtbl` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:42:30.197

该[`MAX()`](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_max)函数用于获取所有行的字段的最大值，您正在寻找该[`GREATEST()`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_greatest)函数：

```
select GREATEST(startdate,enddate) from `testtbl` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:44:23.873

对于您的情况，您最好使用[`IF`](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)-construct，因为您将数据放在单独的字段中。也许是这样的：

```
select if(startdate>enddate,startdate,enddate) 
from `testtbl`; 
```

另一种方法是使用[`GREATEST()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_greatest).

[`MAX`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_max)当您在同一列中的不同行中拥有所有数据时，您最好使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T09:46:16.873

```
Select case when startdate > enddate then startdate 
            else enddate end as GreaterDate 
from 'testtb1' 
```

# javascript - 文件查询内容更改事件未触发

> ID：14019593
> 
> 赞同：2
> 
> 时间：2012-12-24T09:39:48.690
> 
> 标签：javascript, file-io, windows-8, microsoft-metro, windows-runtime

我有一个后台任务尝试使用“contentschanged”事件跟踪本地文件夹中的更改，由于某种原因，大多数情况下该事件不会触发。

**几点：**

*   似乎在开发模式下问题不太常见甚至消失，可能与添加断点有关。
*   添加文件或删除文件时都不会触发该事件。
*   我添加了著名的*fileQuery.getFilesAsync();* 添加事件侦听器后。

# sql - 提高从 View 获取数据的查询性能

> ID：14019597
> 
> 赞同：3
> 
> 时间：2012-12-24T09:40:16.130
> 
> 标签：sql, sql-server, view

我有一个 sql 查询，它只从 View 中获取一条记录。我的观点是由很多功能组成的。它返回大约 60,000 条记录。我想从这个视图中获取的最高记录需要 8-9 秒。我如何优化我的视图，使其最多需要 1-2 秒。这是我的视图和sql查询。请帮忙！任何建议都将是可观的。提前致谢。

```
CREATE View dbo.OMOrderPrePaymentINT    
As    

select   
   dbo.int_payment_customer_number_out('','OMOrderPaymentMasterINT',payment_id)  
   as customer_number,    
   dbo.int_customer_name_out('','OMOrderPaymentMasterINT',payment_id)     
   as customer_name,    
   dbo.int_FormatDate('','OMOrderPaymentMasterINT',document_date)      
   as payment_date,    
   dbo.int_payment_amount_out('','OMOrderPaymentMasterINT',document_amount)   
   as payment_amount,    
   dbo.int_checkbook_id_out('','OMOrderPaymentMasterINT',null)                         
   as checkbook_id,    
   dbo.int_cheque_number_out('','OMOrderPaymentMasterINT',payment_id)     
   as cheque_number,    
   dbo.int_cc_type_out ('','OMOrderPaymentMasterINT',payment_id)      
   as cc_type,    
   dbo.int_cc_number_out('','OMOrderPaymentMasterINT',payment_id)      
   as cc_number,    
   dbo.int_cc_authcode_out('','OMOrderPaymentMasterINT',payment_id)     
   as cc_authcode,    
   dbo.int_ach_account_type_out('','OMOrderPaymentMasterINT',payment_id)    
   as ach_account_type,    
   dbo.int_ach_account_number_out('','OMOrderPaymentMasterINT',payment_id)    
   as ach_account_number,    
   dbo.int_ach_authcode_out('','OMOrderPaymentMasterINT',payment_id)     
   as ach_authcode,    
   dbo.int_expiration_date_out('','OMOrderPaymentMasterINT',payment_id)    
   as creditcard_expiration_date,    
   dbo.int_order_payment_type_out('','OMOrderPaymentMasterINT',payment_id)          
   as payment_type,    
   dbo.int_payment_method_out('','OMOrderPaymentMasterINT',payment_id)     
   as payment_method,    
   dbo.int_erp_payment_action_out('','OMOrderPaymentMasterINT',null)     
   as [action],    
   dbo.int_modified_user_id_out('','',null)           
   as modified_user_id,    
   'NOT MAPPED'                  
   as void_date,    
   export_completed                 
   as exportcompleted,    
   dbo.int_ordergroup_id_out('','OMOrderPaymentMasterINT',payment_id)     
   as ordergroup_id,    
   'ECOM'                    
   as USRDEFND1,    
   dbo.int_ResponseToken_out('','OMOrderPaymentMasterINT',payment_id)     
   as USRDEFND4,    
   dbo.int_transaction_id_out('','OMOrderPaymentMasterINT',payment_id)     
   as USRDEFND5  
from PaymentLine 
where dbo.int_exportPayment(payment_id) = 1 
```

**SQL查询**

```
select top 1  * 
from OMOrderPrePaymentINT 
where ordergroup_id = '943177C1-50B6-4E7C-A442-BA90CF2A03F6'     
order by payment_date desc 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:44:48.713

哎哟。

众所周知，用户定义的函数是SQL Server 中[性能最差的，您的视图使用](http://sqlserverplanet.com/optimization/user-defined-functions-and-performance)**了很多**。UDF 以[逐行](http://www.simple-talk.com/sql/t-sql-programming/rbar--row-by-agonizing-row/)模式工作，因此需要一段时间。

尝试用内联 SQL 尽可能多地替换它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:47:20.467

内联 sql 不能执行哪些功能？每个函数调用都将使用该给定函数的查询执行计划。如果您使用内联 SQL 代替函数调用，则将使用一个整体（预计最有效）查询执行计划。

# android - android项目的选项卡+滑动应用程序中不同选项卡的不同菜单

> ID：14019599
> 
> 赞同：11
> 
> 时间：2012-12-24T09:40:22.247
> 
> 标签：android, tabs, android-fragments, swipe, android-menu

我是 android 应用程序和 java 的初学者，基本上我是一名 PHP 开发人员。

我有一个选项卡+滑动应用程序的项目，

## ***经销商.java***

```
package com.idevoc.onsitereseller;

import java.util.ArrayList;
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuInflater;

public class Reseller extends FragmentActivity {

    FragmentTransaction transaction;
    static ViewPager mViewPager;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_reseller);

    Fragment tabOneFragment = new TabOne();
    Fragment tabTwoFragment = new TabTwo();

    PagerAdapter mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mPagerAdapter.addFragment(tabOneFragment);
    mPagerAdapter.addFragment(tabTwoFragment);

    //transaction = getSupportFragmentManager().beginTransaction();

    mViewPager = (ViewPager) findViewById(R.id.pager);
            mViewPager.setAdapter(mPagerAdapter);
            mViewPager.setOffscreenPageLimit(2);
        mViewPager.setCurrentItem(0);

            mViewPager.setOnPageChangeListener(
                new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        // When swiping between pages, select the
                        // corresponding tab.
                        getActionBar().setSelectedNavigationItem(position);
                    }
                });

    ActionBar ab = getActionBar();
    ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    Tab tab1 = ab.newTab().setText("Tab One")
                    .setTabListener(new TabListener<TabOne>(
                    this, "tabone", TabOne.class));

            Tab tab2 = ab.newTab().setText("Tab Two")
                            .setTabListener(new TabListener<TabTwo>(
                    this, "tabtwo", TabTwo.class));

            ab.addTab(tab1);
            ab.addTab(tab2);         
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
    return true;
}

public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }

            public void onTabReselected(Tab arg0,
                            android.app.FragmentTransaction arg1)
            {

            }

            public void onTabSelected(Tab arg0, android.app.FragmentTransaction arg1)
            {

                    mViewPager.setCurrentItem(arg0.getPosition());
            }

            public void onTabUnselected(Tab arg0,
                            android.app.FragmentTransaction arg1)
            {

            }
}

public class PagerAdapter extends FragmentPagerAdapter{

    private final ArrayList<Fragment> mFragments = new ArrayList<Fragment>();

    public PagerAdapter(FragmentManager manager){
        super(manager);
    }

    public void addFragment(Fragment fragment){
        mFragments.add(fragment);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mFragments.size();
    }

    @Override
    public Fragment getItem(int position) {
        return mFragments.get(position);
    }
  }

 } 
```

## ***TabOne.java***

```
 package com.idevoc.onsitereseller;

 import android.os.Bundle;
 import android.support.v4.app.Fragment;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;

public class TabOne extends Fragment
{
public static final String ARG_SECTION_NUMBER = "section_number";
     @Override
    public void onActivityCreated(Bundle savedInstanceState) {
       super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState)
    {
            View view = inflater.inflate(R.layout.tab_a, container, false);
            return view;
    }

} 
```

## ***TabTwo.java***

```
 package com.idevoc.onsitereseller;

 import android.os.Bundle;
 import android.support.v4.app.Fragment;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;

 public class TabTwo extends Fragment
 {

     @Override
        public void onActivityCreated(Bundle savedInstanceState){
        super.onActivityCreated(savedInstanceState);
        }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState)
    {
            View view = inflater.inflate(R.layout.tab_a, container, false);

            return view;
    }
  } 
```

在这里，我正在为应用程序加载两个选项卡并加载一个通用菜单，但我需要为不同的选项卡加载不同的菜单，例如：

如果选项卡是 TabOne，则加载 menu_a，如果选项卡是 TabTwo，则加载具有不同选项的 menu_b。我不想加载常用菜单。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-24T09:54:45.050

在 res/menu 文件夹中为 menu_a.xml 和 menu_b.xml 创建一个菜单 xml 文件。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_item_search"
        android:icon="@drawable/ic_action_search"
        android:title="@string/description_search"
        android:orderInCategory="1"
        android:showAsAction="ifRoom" />
    <item android:id="@+id/menu_item_share"
        android:icon="@drawable/ic_action_share"
        android:title="@string/description_share"
        android:orderInCategory="1"
        android:showAsAction="ifRoom" />
</menu> 
```

要为当前显示的 Fragment 创建选项菜单，请添加 setHasOptionsMenu(true); 到 Fragment onCreate() 方法。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setHasOptionsMenu(true);

} 
```

然后您必须通过覆盖 onCreateOptionsMenu() 方法来扩充相应的选项菜单（menu_a.xml 或 menu_b.xml）。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_a, menu);
    super.onCreateOptionsMenu(menu, inflater);
} 
```

处理菜单选择覆盖 onOptionsItemSelected()

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case R.id.menu_item_search:                
              //do something
            return true;

        case R.id.menu_item_share:
              //do something
            return true;
    }
    return super.onOptionsItemSelected(item);
} 
```

有关详细信息，请参阅创建选项菜单： http: [//developer.android.com/guide/topics/ui/menus.html 。](http://developer.android.com/guide/topics/ui/menus.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T05:26:50.827

是的，我得到了这些代码的输出，

在 TabOne.java 和 TabTwo.java 我添加了

```
 setHasOptionsMenu(true); 
```

在 onCreateView() 函数和具有不同菜单的菜单函数之后，从主类中删除了菜单函数。

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState)
    {
            View view = inflater.inflate(R.layout.tab_a, container, false);
            setHasOptionsMenu(true);
            return view;
    }
    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        // TODO Auto-generated method stub
        //super.onCreateOptionsMenu(menu, inflater);
         inflater.inflate(R.menu.menu_b, menu);
    } 
```

# javascript - 简单的 JavaScript 在 Chrome 中不起作用

> ID：14019608
> 
> 赞同：4
> 
> 时间：2012-12-24T09:41:00.967
> 
> 标签：javascript, google-chrome

为什么这在 Chrome 中不起作用？

HTML：

```
<div class="deo" id="a1">
<form id="formaA1" name="formaA1">
 KOLIKO JE 3-1+5? //It`s simple equation, it says: How much is 3-1+5?
<br/>
<input type="text" id="pitanjeA1" name="pitanjeA1" />
<br/>
<button onClick="return a1();">Odgovor</button>             
</form>
</div> 
```

CSS：

```
 .deo  {
    width: 24%;
    height: 30%;
    background-color: #808080;
    float: left;
    text-align: center;
    }

img {
    width: 100%;
    height: 100%;
    margin: auto;
    } 
```

JavaScript：

```
function a1() {
    if (parseInt(document.formaA1.pitanjeA1.value) == 7) {
        document.getElementById("a1").innerHTML = "<img src='zmaj_01.jpg'>";
        return true;
    } else {
        alert("Netacan odgovor. \nPokusajte ponovo.");
        return false;
    }
}​ 
```

这是一个简单的程序，每次孩子回答正确的图像出现。它在 FireFox 和 IE 中运行良好，但在 Chrome 中它什么也不做。此外，感谢任何对代码的批评。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:55:43.940

用于`.addEventListener`附加您的事件，并`event.preventDefault();`防止在用户单击按钮时实际提交表单。此外，在注释 HTML 代码时，请使用 html 注释语法“ `<!-- -->`”而不是“ `//`”

html:

```
<div class="deo" id="a1">
<form id="formaA1" name="formaA1">
 KOLIKO JE 3-1+5? <!-- It`s simple equation, it says: How much is 3-1+5? -->
<br/>
<input type="text" id="pitanjeA1" name="pitanjeA1" />
<br/>
<button id="submitButton">Odgovor</button>             
</form>
</div>​​​​​​​​​​​​​​ 
```

JS：

```
/* http://dustindiaz.com/rock-solid-addevent */
function addEvent(obj, type, fn) {
    if (obj.addEventListener) {
        obj.addEventListener(type, fn, false);
        EventCache.add(obj, type, fn);
    }

    else if (obj.attachEvent) {
        obj["e" + type + fn] = fn;
        obj[type + fn] = function() {
            obj["e" + type + fn](window.event);
        }
        obj.attachEvent("on" + type, obj[type + fn]);
        EventCache.add(obj, type, fn);
    }
    else {
        obj["on" + type] = obj["e" + type + fn];
    }
}
var EventCache = function() {
    var listEvents = [];
    return {
        listEvents: listEvents,
        add: function(node, sEventName, fHandler) {
            listEvents.push(arguments);
        },
        flush: function() {
            var i, item;
            for (i = listEvents.length - 1; i >= 0; i = i - 1) {
                item = listEvents[i];
                if (item[0].removeEventListener) {
                    item[0].removeEventListener(item[1], item[2], item[3]);
                };
                if (item[1].substring(0, 2) != "on") {
                    item[1] = "on" + item[1];
                };
                if (item[0].detachEvent) {
                    item[0].detachEvent(item[1], item[2]);
                };
                item[0][item[1]] = null;
            };
        }
    };
}();
addEvent(window, 'load', function() {
    addEvent(document.getElementById("submitButton"), "click", function(event) {
        event.preventDefault ? event.preventDefault() : event.returnValue = false;
        if (parseInt(document.formaA1.pitanjeA1.value) == 7) {
            document.getElementById("a1").innerHTML = "<img src='zmaj_01.jpg'>";
            return true;
        } else {
            alert("Netacan odgovor. \nPokusajte ponovo.");
            return false;
        }
    });
});​ 
```

​<a href="http://jsfiddle.net/ZrfAr/5/show/" rel="nofollow">现场演示 | [来源](http://jsfiddle.net/ZrfAr/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:23:10.107

您的问题是您正在重用函数名称的 a1 ID

更改或`<div id="a1"`更改`<div= id="a1Div"`调用和功能

`<button onClick="return a1Func();">Odgovor</button>`

和

`function a1Func ...`

这是内联版[DEMO](http://jsfiddle.net/mplungjan/ne3PP/)

```
<div class="deo" id="a1Div">

<button onClick="return a1(this.form);">Odgovor</button> 
```

使用

```
function a1(theForm) {
  if (parseInt(theForm.pitanjeA1.value,10) === 7) {
    document.getElementById("a1Div").innerHTML="<img src='zmaj_01.jpg'>";
    return true;
  } else {
    alert("Netacan odgovor. \nPokusajte ponovo.");
    return false;
  }
}​ 
```

同版本不显眼的[DEMO](http://jsfiddle.net/mplungjan/GtSbh/)

```
<button id="testBut">Odgovor</button> 
```

使用

```
window.onload=function() {
    document.getElementById("testBut").onclick=function() {
      if (parseInt(this.form.pitanjeA1.value,10) === 7) {
        document.getElementById("a1").innerHTML="<img src='zmaj_01.jpg'>";
        return true;
      } else {
        alert("Netacan odgovor. \nPokusajte ponovo.");
        return false;
      }
    }
}    ​ 
```

# sencha-touch-2 - 在水平列表中显示多个项目

> ID：14019609
> 
> 赞同：6
> 
> 时间：2012-12-24T09:41:02.863
> 
> 标签：sencha-touch-2, horizontallist

我是煎茶触摸的新手。在这里我遇到了一个问题，我怎样才能显示每行只包含 3 或 4 项？

请看下面我的屏幕截图 ![在此处输入图像描述](../Images/3f03b276cd2c8909ef23d90af50848e0.png)

我需要显示如下示例的列表 ![在此处输入图像描述](../Images/05a9cda4534973de4e5ee7e87eaa172d.png)

这是我的视图js文件

```
 Ext.define('bluebutton.view.BlueButton.CouponList', {
        extend: 'Ext.dataview.DataView',
        xtype: 'couponlist',
        requires: [
            'Ext.field.Select',
            'Ext.field.Search',
            'bluebutton.view.BlueButton.MemberDetail',
             'Ext.plugin.ListPaging',
            'Ext.plugin.PullRefresh'

        ],
        config: {

            styleHtmlContent: true,
            scrollable: 'vertical',

             store : { xclass : 'bluebutton.store.BlueButton.MemberList'},
            grouped: true,
            indexBar: true,
             autoLoad: false,
           disclosure: true,
           cls:'customHeader',

            id :'memberlist',
            items: [
                {

                }

            ],
inline: { wrap: false },
            emptyText: '<p class="no-search-results">No member record found matching that search</p>',
            itemTpl: Ext.create(
                'Ext.XTemplate',

    //             '<div class="image" style="background-image:url(http://resources.shopstyle.com/static/mobile/image2-iPad/{urlId}.png)"></div>',
    //            '<div class="name">{memberId}</div>'

                   '<div class="demo-weather">',
                                '<tpl for=".">',
                                    '<div class="day">',
                                        '<div class="date">{memberId}</div>',
                                        '<tpl for="weatherIconUrl">',
                                            '<img src="{value}">',
                                        '</tpl>',
                                        '<span class="temp">{memberId}&deg;<span class="temp_low">{memberId}&deg;</span></span>',
                                    '</div>',
                                '</tpl>',
                            '</div>'

            ),

        },

    });

My sass file

    .demo-weather {
      text-align: center;
    }
    .day {
      display: inline-block;
      background-color: #f9f9f9;
      color: rgba(0, 0, 0, .6);
      text-shadow: #fff 0 1px 0;
      width: 8em;
      text-align: center;
      @include border-radius(15px);
      @include box-shadow(inset 0 0 4px #888);
      box-shadow: inset 0 0 4px #888;
      padding: 1em;
      margin: .5em;

      .x-android & {
        @include box-shadow(none);
      }
    }
    .date {
      font-size: .8em;
    }
    .icon img {
      @include border-radius(10px);
      margin: .6em;
      width: 3.5em;
    }
    .temp {
      margin-top: .2em;
      display: block;
      font-size: 2.2em;
      line-height: .5em;
    }
    .temp_low {
      display: inline;
      font-size: .5em;
      color: rgba(30, 30, 30, .5);
    }

Please guild me solution. Thanks in advance 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T10:08:19.203

我有类似的问题，我的每个图像都附有几个处理程序，所以基本上这就是我想要做的：

1.  就我而言，列表实际上是轮播。
2.  每页轮播包含 4-8 个基于屏幕尺寸的图像。
3.  每个图像实际上都是一个带有图像的面板，以及工具栏和文本之类的更多内容。点击这些图像应该会打开一个模态详细信息窗口，其中包含有关该项目的更多详细信息。

这是我所做的：

1.  定义了一个视图 ListItemView，它是一个以图像和工具栏为项目的面板。点击图像 showDetails 事件被触发，打开视图。这可以使用在构造函数中传递的数据对象来实例化。

    ```
    Ext.define('myshop.view.ListItemView', {
        extend : 'Ext.Panel',
        alias : 'widget.listitemview',
        xtype : 'listitemview',
        config : {
            layout : 'fit'
        },
        initialize : function() {
            var me = this;
            var data = me.config.data;
            var w = Ext.Viewport.getWindowWidth()/2;
            var pHtml = data.price;
            var pi = [{
                xtype : 'toolbar',
                title : data.styleName,
                top : 0,
                left : 0,
                width : w,
                cls : 'x-toolbar-transparent-top'
            },{
                xtype: 'image',
                layout: 'fit',
                flex : 1,
                rec : me.config.data,
                src : data.searchImage,
                width : w,
                listeners: {
                    tap: function (self, e, eOpts, einfo)
                    {
                        me.fireEvent('loadDetailsCommand', me.parent.parent.parent, data);
                    }
                }
            },{
                xtype : 'toolbar',
                html : pHtml,
                bottom : 40,
                left : 0,
                width : w,
                cls : 'x-toolbar-transparent-top'
            }];
            this.setItems(pi);
            this.callParent(arguments);
        }
    }); 
    ```

2.  为页面定义了另一个视图 ListPage，它又是一个面板，并使用数据对象数组进行了初始化。基于初始化函数中的这个数组，项目（ListItemView）被添加到这个面板的项目中。

    ```
    Ext.define('myshop.view.ListPage', {
        extend : 'Ext.Panel',
        requires : [ 'myshop.view.ListItemView' ],
        alias : 'widget.listpage',
        xtype : 'listpage',
        config : {
            layout : 'fit',
            width : '100%'
        },
        initialize : function() {
            var me = this;
            var data = me.config.data;
            var items = {
                    xtype : 'panel',
                    layout: 'hbox',
                    items : [{
                        xtype : 'panel',
                        layout: 'vbox',
                        flex: 1,
                        items : [{
                            xtype : 'listitemview',
                            data : data[0],
                            detailsView : Properties.details_view_type_CATALOG,
                            container : hccontainer,
                            flex : 1
                        }, {
                            xtype : 'listitemview',
                            data : data[1],
                            detailsView : Properties.details_view_type_CATALOG,
                            container : hccontainer,
                            flex : 1
                        }]
                    }, {
                        xtype : 'panel',
                        layout: 'vbox',
                        flex: 1,
                        items : [{
                            xtype : 'listitemview',
                            data : data[2],
                            detailsView : Properties.details_view_type_CATALOG,
                            container : hccontainer,
                            flex : 1
                        }, {
                            xtype : 'listitemview',
                            data : data[3],
                            detailsView : Properties.details_view_type_CATALOG,
                            container : hccontainer,
                            flex : 1
                        }]
                    }]
                };
            this.setItems(items);
            this.callParent(arguments);
        }
    }); 
    ```

3.  定义了一个存储，它将从远程服务加载分页数据，并在加载时创建/使用轮播视图并将记录传递给它。

    ```
    Ext.define('myshop.store.CatalogListStore',{
        extend:'Ext.data.Store',
        requires: [
                   'myshop.model.CatalogListItem',
                   'Ext.data.proxy.JsonP'
               ],
        config:{
            model:'myshop.model.CatalogListItem',
            storeId: 'catalogListStore',
            autoLoad :false,
            listeners : {
                load: function( me, records, successful, operation, eOpts ){ 
                    console.log(operation.getRequest().getUrl());
                    if(successful){
                        var itemsList = Ext.getCmp("ilid");
                        if(itemsList == undefined || itemsList == null){
                            bossController.createCatalogList(records, me);
                        } else {
                            bossController.setMaskOnSearchList();
                            bossController.fillCatalogList(records, itemsList);
                        }
                    }
                }
            }
        },
        filterParam: undefined,

        initialize: function() {
            console.log("CatalogListStore Initializing");
            var me = this;
            var qstring = this.config.q;
            if(qstring != undefined){
                qstring = qstring.replace(/ /g,"-");
            }
            this.setProxy({
                type: 'jsonp',
                url: Properties.PORTAL_SERVICE_BASE_URL+'test/catalog/list',
                callbackKey: 'callback',
                startParam: false, //to remove param "start"
                limitParam: false, //to remove param "limit"
                pageParam: 'page',
                extraParams: {
                    limit : 20,
                    start : 0,
                    _type : 'json',
                    q : qstring,
                    filter : this.config.f
                },
                reader: {
                    type: 'json',
                    rootProperty: 'catalogSearchResponse.data'
                }
            });
            this.load();
            this.callParent();
        }
    }); 
    ```

4.  定义了轮播视图，该视图使用记录数组并将其分成 4 条记录的块，并使用这些块中的每一个创建 ListPage 并将其添加到轮播项目中。风景：

    ```
    Ext.define('myshop.view.CatalogList', {
    extend : 'Ext.carousel.Carousel',
    alias : 'widget.cataloglistview',
    xtype : 'cataloglistview',
    config : {
        id : 'ilid',
        masked: {
            xtype: 'loadmask',
            message: 'Loading'
        },
        directionLock : true,
        indicator : false
    },
    listeners: {
        activeitemchange: function(container, value, oldValue, eOpts) {
            var activeItemIndex = container.getActiveIndex();
            var galleryTotal = container.getInnerItems() ? container.getInnerItems().length : 0;
            if ((activeItemIndex + 1 == galleryTotal)) {
                var store = this.config.store;
                store.nextPage({ addRecords: true });
            }
        }
    }
    }); 
    ```

    从控制器：

    ```
    createCatalogList : function(records, store){
        console.log("createCatalogList called");
        var hccontainer = Ext.getCmp('hccontainer');
        var itemsList = Ext.create('myshop.view.CatalogList', {
            store : store
        });

            //itemsList.setItems(panels);
            itemsList = this.fillCatalogList(records,itemsList);
            hccontainer.setItems([itemsList]);
    },
    fillCatalogList : function(records, list){
        var hccontainer = Ext.getCmp('hccontainer');
        console.log("filling started");
        var datas = [];
        if(list == undefined || list == null){
            list = Ext.getCmp("ilid");
        }
            for(var i=0; i<records.length; i++){
                datas.push(records[i].getData());
            }
            var panels = [];
            while(datas.length){
                panels.push({
                    xtype : 'listpage',
                    data : datas.splice(0,4),
                    detailsView : Properties.details_view_type_CATALOG,
                    container : hccontainer
                });
            }
            list.add(panels);
            this.removeMaskFromSearchList();
            return list;
    }, 
    ```

5.  为了支持分页，在轮播中使用了 activeitemchange 监听器。

    ```
    listeners : {
        activeitemchange: function(container, value, oldValue, eOpts) {
            var activeItemIndex = container.getActiveIndex();
            var galleryTotal = container.getInnerItems() ? container.getInnerItems().length : 0;
            if ((activeItemIndex + 1 == galleryTotal)) {
                var store = this.config.store;
                store.nextPage({ addRecords: true });
            }
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:00:54.063

而不是**列表**使用**数据视图**

前任：

```
 xtype:'dataview',
        id:'thumbs',
        itemId:'dataview',
        flex:1,
        itemTpl:'<div style="float:left;width=33%;margin:2px;"><div class="demo-weather">',
                            '<tpl for=".">',
                                '<div class="day">',
                                    '<div class="date">{memberId}</div>',
                                    '<tpl for="weatherIconUrl">',
                                        '<img src="{value}">',
                                    '</tpl>',
                                    '<span class="temp">{memberId}&deg;<span class="temp_low">{memberId}&deg;</span></span>',
                                '</div>',
                            '</tpl>',
                        '</div>'</div>',    
        store: this.myStore 
```

代码未经测试，但我这样使用并为我工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T10:58:29.307

我认为这就是您正在寻找的
[http://try.sencha.com/touch/2.0.0/demos/Ext.List.inline/](http://try.sencha.com/touch/2.0.0/demos/Ext.List.inline/)

```
 Ext.create('Ext.List', {
            fullscreen: true,
            inline: true,
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T04:10:30.923

`display: inline-block !important;`在 CSS 中使用

# c# - 在windwos8中创建文件夹访问被拒绝

> ID：14019610
> 
> 赞同：1
> 
> 时间：2012-12-24T09:41:03.337
> 
> 标签：c#, windows-8, io, windows-runtime, local-storage

我使用下面的代码在应用程序安装文件夹中创建文件夹，但我总是收到拒绝访问异常。

```
StorageFolder appFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
        if (!await CheckIfFolderExist(appDataFolderName))
        {                
            StorageFolder appDataFolder = await appFolder.CreateFolderAsync(appDataFolderName);
            StorageFolder userFolder = await appDataFolder.CreateFolderAsync(userFolderName);
            StorageFolder contactFolder = await appDataFolder.CreateFolderAsync(contactFolderName);
        }
        else
        {
            StorageFolder appDataFolder = await appFolder.GetFolderAsync(appDataFolderName);
            if (!await CheckIfSubFolderExis(appDataFolderName, userFolderName))
            {
                await appDataFolder.CreateFolderAsync(userFolderName);
            }
            if (!await CheckIfSubFolderExis(appDataFolderName, contactFolderName))
            {
                await appDataFolder.CreateFolderAsync(contactFolderName);
            }
        }

 // Check if the app folder exists
    private async Task<bool> CheckIfFolderExist(string folderName )
    {
        bool folderExist = false;
        try
        {
            StorageFolder appFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
            StorageFolder appDataFolder = await appFolder.GetFolderAsync(folderName);                
            folderExist = true;
            return folderExist;
        }
        catch (FileNotFoundException ex)
        {
            return folderExist;
        }
    }

    // Check if the app subfolder exists
    private async Task<bool> CheckIfSubFolderExis(string folderName,string subFolderName)
    {
        bool subFolderExist = false;
        try
        {
            StorageFolder appFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
            StorageFolder subFolder = await appFolder.GetFolderAsync(subFolderName);
            subFolderExist = true;
            return subFolderExist;
        }
        catch (FileNotFoundException ex)
        {
            return subFolderExist;
        }
    } 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T09:59:15.337

您无法在应用数据文件夹中创建文件夹。您必须使用 LocalFolder、RomaingFolder 或 TemporaryFolder（都可以在[ApplicationData](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.aspx)类中找到）

这样做的原因是为了支持软件升级等。为什么要保存在 appdata 文件夹中 - 也许我可以建议使用上面的最佳文件夹。

# jquery - CSS 过渡 Chrome 问题

> ID：14019611
> 
> 赞同：2
> 
> 时间：2012-12-24T09:41:10.357
> 
> 标签：jquery, css, css-transitions

我`image-effect`使用 jQuery`addClass`方法添加了类，它的 CSS 如下：

```
.image-effect img
{
  height:350px;
  transition: height 2s;
  -moz-transition: height 2s; /* Firefox 4 */
  -webkit-transition: height 1s; /* Safari and Chrome */
  -o-transition: height 2s;
   transition-timing-function: ease-in-out;
   -moz-transition-timing-function: ease-in-out
   -webkit-transition-timing-function: ease-in-out;
   -o-transition-timing-function: ease-in-out;
   } 
```

jquery 是

```
 <script type="text/javascript">
     var jq = $.noConflict();
     jq(document).ready(function(){
     jq(".package-images").mouseover(function(){
     jq(this).addClass("image-effect");
     jq(".package-images").mouseout(function(){
     jq(this).removeClass("image-effect");
     });
    });
   });
   </script> 
```

图像的高度在所有浏览器上都平滑增加，但不是在 chrome 上。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:56:17.480

请不要使用jquery。因为它使用伪类：悬停

```
<div class="package-images">
    <img src="..." />
</div> 
```

像这样的CSS：

```
.package-images img{
  height:200px;
  transition: height 2s ease-in-out;
  -moz-transition: height 2s ease-in-out; /* Firefox 4 */
  -webkit-transition: height 2s ease-in-out; /* Safari and Chrome */
  -o-transition: height 2s ease-in-out;
}
.package-images img:hover{
  height:350px;
}​ 
```

无论如何，如果你需要添加一个类名，你的 javascript 代码可以被重写：

```
var jq = $.noConflict();
jq(document).ready(function(){
    jq(".package-images").mouseover(function(){
        jq(this).addClass("image-effect");
    }).mouseout(function(){
        jq(this).removeClass("image-effect");
    });
});​ 
```

[http://jsfiddle.net/UZJdM/3/](http://jsfiddle.net/UZJdM/3/)

# objective-c - iOS 本地化不加载语言

> ID：14019612
> 
> 赞同：2
> 
> 时间：2012-12-24T09:41:10.790
> 
> 标签：objective-c, ios, cocoa-touch, localization

今天想试试`localization`iOS的功能。我在我的项目中添加了一个`Localizable.strings`文件，内容如下：

```
"TP_Start_Button" = "Workout Plan";
"TL_Start_Button" = "Training Log";
"Calc_Start_Button" = "Calculator"; 
```

我这样设置三个的标题`UIButtons`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.tp_start_button setTitle:NSLocalizedString(@"TP_Start_Button", nil) forState:UIControlStateNormal];
    [self.tl_start_button setTitle:NSLocalizedString(@"TL_Start_Button", nil) forState:UIControlStateNormal];
    [self.calc_start_button setTitle:NSLocalizedString(@"Calc_Start_Button", nil) forState:UIControlStateNormal];
} 
```

之后，我通过选择我的项目并在本地化下按“+”按钮添加了另一种语言。O 选择了德语并`Localizable.strings`创建了另一个。我用德语翻译替换了内容。然后我有以下内容：

```
Localizable.strings
    Localizable.strings (English)
    Localizable.strings (German) 
```

在我的项目文件夹中`de.lproj`，这些文件夹`en.lproj` 是用`Localizable.strings`里面创建的。

但是，在启动 iPhone 模拟器后，英语被加载为默认语言。将语言设置为德语后，我的应用程序的语言没有改变。即使从我的设备删除并重新安装该应用程序后，它也无法正常工作。

更改设置中的语言时，我需要做什么才能自动切换语言？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:00:12.717

正如我在评论中所述，Clean & Re-build 将解决问题。

对于本地化功能，您必须`clean & rebuild`经常这样做，因为此功能由 XCode 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T17:33:20.230

您是否将 localizable.strings 添加到目标？

# java - 调用两个数据库服务器的最佳方法

> ID：14019618
> 
> 赞同：2
> 
> 时间：2012-12-24T09:42:16.077
> 
> 标签：java, mysql, select

我想一次调用不同数据库的两个表。数据库 A 的表包含用户 ID，数据库 B 的表包含用户位置和用户 ID，所以我想加入这两个表并获取与 user_id.database A 对应的位置和 B 在两个不同的服务器中。那么我怎样才能加入这两个表。如果无法加入，是否有任何有效的方法可以做到这一点。请帮助。我正在尝试使用 java、mysql 来做到这一点。

```
 ps = con.prepareStatement("SELECT user_id FROM A.users");
 rs = ps.executeQuery();
 while(rs.next())
    {
    //call select statement for database B to get the location for each user id             

    } 
```

请提出一种有效的方法来做到这一点

```
Id  User_id
===========
1   44
2   23

User_id     location
====================
44          india
23          us 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:05:53.307

假设`user_id`是一个`long`。

```
PreparedStatement psUserLocation = conB.prepareStatement("SELECT location FROM B.users WHERE user_id = ?");
while(rs.next()) {
    //call select statement for database B to get the location for each user id
    long userId = rs.getLong(user_id);
    psUserLocation.setLong(1, userId)
    ResultSet userLocation = ps.executeQuery();
    // Do whatever with the location(s)
} 
```

**编辑**：对所有用户进行一次查询，而不是对每个用户进行一次查询：

```
private final static String QUERY = "SELECT user_id, location FROM B.users WHERE user_id IN (%a)";

StringBuilder userList = new StringBuilder();
while(rs.next()) {
    long userId = rs.getLong(user_id);
    userList.append(userId);
    if (!rs.isLast()) {
        userList.append(",");
    }
}

String usersLocationQuery = QUERY.replaceAll("%a", userList.toString());
PreparedStatement psUsersLocation = conB.prepareStatement(usersLocationQuery);
ResultSet usersLocation = psUsersLocation.executeQuery();
// Do whatever with the locations 
```

`IN`请记住，这可能会失败/工作错误，因为大多数数据库对 SQL子句可以包含的项目数都有限制。此外，第二种方法可能允许对`%a`替换进行 SQL 注入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:53:04.150

您可以使用[FEDERATED Storage Engine](http://dev.mysql.com/doc/refman/5.1/en/federated-storage-engine.html)。FEDERATED 存储引擎允许您访问远程 MySQL 数据库中的数据，而无需使用复制或集群技术。查询本地 FEDERATED 表会自动从远程（联合）表中提取数据。本地表上不存储任何数据。这可能不是很有效，但它会完成工作（JOIN）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:23:11.717

如果可以取消连接，一种可能的方法是一次性从 tableA 中获取所有 user_id，然后将 user_id 一次性传递给 tableB。当然，这种方法也需要您更改代码。

就像是：

```
select user_id from tableA (of databaseA); 
```

和

```
select user_id, location from tableB (of database B) where user_id in (<result_from_above_query) 
```

上述过程将需要两个查询。

# qt - Qt 如何处理 QList > 在 Q_PROPERTY 中？

> ID：14019622
> 
> 赞同：1
> 
> 时间：2012-12-24T09:42:57.517
> 
> 标签：qt, properties, wizard

在我的班级中，我想要一个类型 `QList<QList<QByteArray> >`为属性的成员，如果`Q_PROPERTY`调用是：

```
Q_PROPERTY(QList myData READ myData) 
```

或者

```
typedef QList<QList<QByteArray> > TYPE_LLB;
Q_PROPERTY(TYPE_LLB myData READ myData) 
```

?

实际上我正在尝试`QWizard`和`QWizardPage`类，`QList<QList<QByteArray> >`需要在页面之间传播具有类型的数据，Qt 手册说`registerField`和`field`方法有帮助，但这两种方法需要正确定义小部件属性。

请帮忙。谢谢！

# ios - sqlite查询以查找给定日期的一年总和

> ID：14019624
> 
> 赞同：1
> 
> 时间：2012-12-24T09:43:06.307
> 
> 标签：ios, sqlite, ios6

我已经写了一个查询： `SELECT YEAR(Date),SUM(replace(price, ',', '')) FROM example GROUP BY year(date);` 。我正在尝试获取那一年的所有价格的总和，但我收到一个错误 - 没有这样的功能：年份。请指导我。我是 db 的菜鸟。再次感谢。

```
12/10/11        377,245.67
12/19/11        5,104,245.00
12/28/11        23,332.98
12/24/10        126,875.21
12/24/10        5,112,225.14
12/23/10        4,552.54
11/24/10        402.82
10/15/09        132,875.32
9/19/09     126,334,123.32
9/23/09     345,887.21
9/29/09     16,520.11
9/28/09     388,902.02
11/12/08        24,622.43
10/25/08        278,916.52
10/12/08        42.22
9/22/08     17,234.01
9/16/08     377,245.67
12/15/07        5,104,245.00
12/18/07        23,332.98
12/19/07        126,875.21
12/22/07        23,332.98
12/28/07        126,875.21 
```

我正在寻找的格式：

```
Year(Date)               price
8           438483479.3
9           8774343479
10          5654389.34
11          5654354646
12          23434483479 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:49:20.587

我建议这个语法：

```
SELECT strftime('%Y',Date), SUM(replace(price, ',', '')) FROM example GROUP BY strftime('%Y',Date); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:49:41.557

试试这个

```
SELECT strftime('%Y', Date),SUM(replace(price, ',', '')) FROM example GROUP BY strftime('%Y', Date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:50:55.030

sqlite中没有函数`year()`。您必须改用函数`strftime()`。

例如，要获取字段 Date 的年份值，您可以使用`strftime("%Y", Date)`.

因此，您必须`year(Date)`在查询中替换为`strftime("%Y", Date)`.

# android - 当应用程序处于 onPause() 时，我继续在 LogCat 上接收错误消息

> ID：14019630
> 
> 赞同：0
> 
> 时间：2012-12-24T09:43:59.087
> 
> 标签：android, android-asynctask, httpclient, android-logcat

谢谢你的帮助和圣诞快乐。

好的。

现在我有以下类，我在我的主要活动中对其进行实例化，以便从互联网上检索一些数据。

如您所见，该类包含一个 AsyncTask，它执行来自 Internet 的数据收集。

当我的活动暂停时（通过模拟器上的 BACK 按钮），我停止 AsyncTask。

尽管如此，LogCat 继续显示消息，因为 AsyncTask 仍在继续尝试从 Internet 获取数据。

这是 LogCat，它永远不会停止......

```
12-24 09:36:48.806: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.816: E/grabXML(698): Exception fetching data
12-24 09:36:48.816: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.836: E/grabXML(698): Exception fetching data
12-24 09:36:48.836: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.846: E/grabXML(698): Exception fetching data
12-24 09:36:48.846: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.856: E/grabXML(698): Exception fetching data
12-24 09:36:48.856: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.966: E/grabXML(698): Exception fetching data
12-24 09:36:48.966: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down.
12-24 09:36:48.996: E/grabXML(698): Exception fetching data
12-24 09:36:48.996: E/grabXML(698): java.lang.IllegalStateException: Manager is shut   down.
12-24 09:36:49.037: E/grabXML(698): Exception fetching data
12-24 09:36:49.037: E/grabXML(698): java.lang.IllegalStateException: Manager is shut down. 
```

这是我的课

```
public class Grab{
    public String url;
    public String srt = "cav";
    public boolean flag = false;
    public GrabXml g;
    public Grab (String u){
        url = u;
    } 

    public String vai(){
        g = new GrabXml();
        g.execute();
        Log.e("", srt);
        while(!flag){
            // nothing
        };
        g.cancel(true);
        return srt;
    }

    public void fermaGrab() {
        g.cancel(true); 
    }

    public class GrabXml extends AsyncTask<Void, String, Void>{
        @Override
        protected Void doInBackground(Void... arg0) {
            Log.e("", "arrivo al do in background");
            Log.e("", url);
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet getMethod = new HttpGet(url);
            try {
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                srt = client.execute(getMethod, responseHandler);
                Log.e("", "passo per GrabXML");
            }
            catch (Throwable t) {
                android.util.Log.e("grabXML", "Exception fetching data", t);
            }
            flag = true;
            client.getConnectionManager().shutdown();
            return null;
        }

        @Override
        protected void onProgressUpdate(String... item) {
            // nothing
        }

        @Override
        protected void onPostExecute(Void unused) {
            flag = true;      
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:24:36.257

我认为下面行内的问题

```
 client.getConnectionManager().shutdown(); 
```

你会发现更多[关于你的解决方案的描述](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/IJv8Z6HMwpE)

[这是原始的 Apache 文档](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e646)，也有助于更好地理解。

希望它会有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T13:17:00.310

找到谜语解法：见[Activity被销毁后我继续收到消息](https://stackoverflow.com/q/14020795/1815311)

该服务实际上被正确地杀死了。

关键是服务包含一个无限循环，即使服务被取消/销毁，循环也会继续。

祝大家圣诞快乐！！

# android - 用图像加载我的gridview时出现OutOfMemoryError

> ID：14019634
> 
> 赞同：1
> 
> 时间：2012-12-24T09:44:22.483
> 
> 标签：android, memory, gridview

处理 java.lang.OutOfMemoryError 时遇到问题：位图大小超出 VM 预算错误。原始图片永远不会大于 250x250 像素。并从可绘制文件夹加载。我在互联网上找到了一些关于“inJustDecodeBounds”的解决方案，但我无法让它工作。关于如何解决这个问题的任何想法？头疼了两天了。。。

现在，我正在通过基于父宽度计算的因子重新缩放图像..

```
@Override
    public View getView(int position, View v, ViewGroup parent) {
        View mView = v;
        this.parent = parent;

        if (mView == null) {

            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(R.layout.caa_xml, null);
        }

        ImageView image = (ImageView) mView.findViewById(R.id.iv_caarow);

        String name = getItem(position).getFile();
        int resId = C.getResources().getIdentifier(name, "drawable",
                "com.test.com");
        int imageWidth = (int) calculateImageWidth();
        // load the origial BitMap (250 x 250 px)
        Bitmap bitmapOrg = BitmapFactory
                .decodeResource(C.getResources(), resId);

        int width = bitmapOrg.getWidth();
        int height = bitmapOrg.getHeight();
        int newWidth = imageWidth;
        int newHeight = imageWidth;

        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;

        // create a matrix for the manipulation
        Matrix matrix = new Matrix();
        // resize 
        matrix.postScale(scaleWidth, scaleHeight);
        // recreate the new Bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0, width,
                height, matrix, true);

        BitmapDrawable bmd = new BitmapDrawable(resizedBitmap);

        image.setImageDrawable(bmd);

        if (mView != null) {

            //additional code here

        }
        return mView;
    }

    private float calculateImageWidth() {
        // TODO Auto-generated method stub
        int parentW = parent.getWidth() - parent.getPaddingLeft()
                - parent.getPaddingRight();
        Resources r = C.getResources();
        float pxPaddingBetweenItem = TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_DIP, 2, r.getDisplayMetrics());
        float pxPaddingInItem = TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_DIP, 10, r.getDisplayMetrics());

        int totalImageWidth = (parentW - (int) (3 * pxPaddingBetweenItem) - (int) (8 * pxPaddingInItem)) / 4;
        float imageWidth = (float) totalImageWidth;
        return imageWidth;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:00:51.597

问题是，您使用旧的大位图创建了一个缩放位图。之后，您的内存中有两个位图，您甚至不回收旧的。

无论如何，有一个更好的方法：

```
ImageView imageView = (ImageView) findViewById(R.id.some_id);
String pathToImage = "path";

BitmapFactory.Options bmOptions = new BitmapFactory.Options();
bmOptions.inJustDecodeBounds = true;
BitmapFactory.decodeFile(pathToImage, bmOptions);
int photoW = bmOptions.outWidth;
int photoH = bmOptions.outHeight;

// Determine how much to scale down the image
int scaleFactor = Math.min(photoW/50, photoH/50);

// Decode the image file into a Bitmap sized to fill the View
bmOptions.inJustDecodeBounds = false;
bmOptions.inSampleSize = scaleFactor;
bmOptions.inPurgeable = true;

Bitmap bitmap = BitmapFactory.decodeFile(pathToFile, bmOptions);
imageView.setImageBitmap(bitmap); 
```

**编辑：**

当您想使用资源 Id 而不是文件路径时，请使用[decodeResource](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int,%20android.graphics.BitmapFactory.Options%29)并像这样执行最后一部分：

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), resourceId, bmOptions);
imageView.setImageBitmap(bitmap); 
```

希望这段代码能帮到你！

# android - 将图像从 res 文件夹设置为 android 中的图像视图时出现意外行为

> ID：14019637
> 
> 赞同：1
> 
> 时间：2012-12-24T09:44:33.473
> 
> 标签：android, android-4.0-ice-cream-sandwich

我在我的 xml 中使用 imageview 并将图像从 res/drawable-xhdpi 设置为它。我的图像大小为 354x404，当我在 10" 三星平板电脑上运行代码时，它显示图像为 177x202。

这是我正在使用的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false" >

    <ImageView
        android:id="@+id/img_view"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/app_name"
        android:src="@drawable/android1" />

</LinearLayout> 
```

这是我正在使用的图像：

![在此处输入图像描述](../Images/e78089639ccdf09769c14b29a638246b.png)

这是平板电脑的屏幕截图：

![在此处输入图像描述](../Images/c47f5e3c5c03f22669ad7de63026bd48.png)

请告诉它为什么会发生以及解决此问题的解决方案是什么。

**更新：**当我将此图像放入“res/drawable”文件夹而不是 xhdpi 时，它会正确显示图像，即 354x404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:47:39.750

**评论后编辑：**

ImageView 将以适合设备的正确分辨率呈现其中的图像。根据有关[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)的文档，您必须确保以正确的 DPI 为每种分辨率类型提供资源。Android 会为您选择最佳的资源分辨率，但如果只存在一种资源，那么它会选择该资源并尝试以设备分辨率进行渲染。

三星平板电脑虽然有一个大屏幕，但它是 MDPI（至少是 Galaxy Tab 2），即使它有一个大屏幕，它也是标准密度。它的资源应该放在`res/drawable`.

# scala - 是作为参数传入时执行的匿名函数

> ID：14019640
> 
> 赞同：0
> 
> 时间：2012-12-24T09:44:47.173
> 
> 标签：scala

在以下 Scala 代码中：

```
object Timer
{
  def oncePerSecond(callback: () => Unit): Unit =
  {
    while (true)
    {
      callback()
      Thread.sleep(1000)
    }
  }

  def main(args: Array[String]): Unit =
  {
    oncePerSecond(() => 
      Console.println("Time flies... oh, you get the idea."))
  }
} 
```

当作为参数传入时，匿名函数是否首先执行，然后在循环中每秒执行一次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:48:16.130

它作为其中的一部分执行：

```
while (true)
{
  callback()
  Thread.sleep(1000)
} 
```

所以它会每秒执行一次，从它传入的时候开始。它只在循环中执行。它在传入时不会正常执行，例如

```
def oncePerSecond(callback: () => Unit): Unit = {
   if (....) {
      callback()
   }
} 
```

只有满足特定条件时才会执行该方法。

# mpdf - mPDF 在首页禁用页码、页眉和页脚

> ID：14019643
> 
> 赞同：9
> 
> 时间：2012-12-24T09:45:08.013
> 
> 标签：mpdf

我刚刚在我的项目中使用了 mPDF，现在遇到了这个问题。首先让我描述一下我的 PDF 结构：

1.  第一页是封面。
2.  第二页是目录页。
3.  第三页是内容页。

**所以问题是：**

1.  封面页和目录页有页眉、页脚、页码。我该如何删除它？
2.  内容页码以no 3开头。如何将其重置为no 1？

下面是用于包含页眉和页脚的代码

```
$mpdf->SetHeader('{DATE j-m-Y}|{PAGENO}/2|My document');
$mpdf->SetFooter('{PAGENO}');    /* defines footer for Odd and Even Pages - placed at Outer margin */
$mpdf->SetFooter(array(
      'L' => array(
        'content' => 'Text to go on the left',
        'font-family' => 'sans-serif',
        'font-style' => 'B',      /* blank, B, I, or BI */
        'font-size' => '10',      /* in pts */
       ),
      'C' => array(
        'content' => '- {PAGENO} -',
        'font-family' => 'serif',
        'font-style' => 'BI',
        'font-size' => '18',      /* gives default */
       ),
      'R' => array(
        'content' => 'Printed @ {DATE j-m-Y H:m}',
        'font-family' => 'monospace',
        'font-style' => '',
        'font-size' => '10',
       ),
       'line' => 1,            /* 1 to include line below header/above footer */
  ), 'E'      /* defines footer for Even Pages */
  ); 
```

对于 TOC 页面，我在 html 中添加了这个标签

```
<tocpagebreak /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-21T12:41:51.767

您可以先将页脚设置为不可见，然后在您希望编号开始时将其重置。例如（使用 html 标签）：

```
<!-- sets up the footer -->
<pagefooter name="footer" content-center="{PAGENO}"></pagefooter>

<!-- disables it -->
<setpagefooter value="off"></setpagefooter>

<p>Some content for the first pages</p>

<!-- activates the footer and resets the numbering --> 
<pagebreak odd-footer-name="footer" odd-footer-value="on" resetpagenum="1"></pagebreak> 
```

我很确定使用等效的 mpdf 方法可以实现相同的效果。

# c# - 失去焦点时清除 MaskedTextBox

> ID：14019646
> 
> 赞同：0
> 
> 时间：2012-12-24T09:45:24.937
> 
> 标签：c#, windows

我必须`MaskedTextBox`输入一个蒙面属性设置为“99/99/9999”的日期。当我运行应用程序并在 MaskedTextBox 中输入日期时，该值在失去焦点后消失。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T09:54:07.967

此链接可以帮助您找到解决方案：

[http://www.c-sharpcorner.com/uploadfile/mahesh/maskedtextbox-in-C-Sharp/](http://www.c-sharpcorner.com/uploadfile/mahesh/maskedtextbox-in-C-Sharp/)

您是否将 MaskTxtb​​ox 的属性设置为如下图

![在此处输入图像描述](../Images/d874466a845cdb18eb677860466fa6a7.png)

和

![在此处输入图像描述](../Images/5e979c90123cb75a77b3263075c4897b.png)

# c# - 如何发送数据源参数来选择函数

> ID：14019647
> 
> 赞同：1
> 
> 时间：2012-12-24T09:45:29.147
> 
> 标签：c#, asp.net

**编辑**

这是我的新尝试：

现在我得到`ObjectDataSource 'MenuDataSource' could not find a non-generic method 'GetData' that has no parameters.`

```
 <asp:ObjectDataSource 
     ID="GridDataSource"            
      SelectMethod="GetData"
      TypeName="Model.GridProvider"
      runat="server"  > 
     <SelectParameters>
        <asp:Parameter Name="MenuItemID" Type="Int32" DefaultValue="10"  />
      </SelectParameters>
      </asp:ObjectDataSource>

public int DbToAccess
    {
        get
        {
            return SiteMaster.Current_MenuItemID;
        }
    }

[DataObject(true)]
public static class MyMenuProvider
{
        [DataObjectMethod(DataObjectMethodType.Select)]
        public static HierarchicalCollection GetData(int inputMenuItemID)
        {
            return GetCollection(inputMenuItemID);
        } 
```

}

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:51:59.547

您可以使用公共参数，其 get 调用转到 DataSource 并取回它的设置参数。或者甚至更好的是一个公共参数，它将其值存储在会话变量中，并且选择函数和数据源都访问参数。像这样的东西：

```
 public string MyParam
    {
           get
           {
                 return Session["MyParamStr"].ToString();
           } 
           set 
           {
                Session["MyParamStr"] = value;
           }
    } 
```

然后在您的标记中

```
 <asp:Parameter value='<%# MyParam %>' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:33:50.950

答案是我很愚蠢 `TypeName="Model.GridProvider"` ，我把选择方法放在上面的类是 `MyMenuProvider`

变成

```
public static class GridProvider
{
    [DataObjectMethod(DataObjectMethodType.Select)]
    public static DataTable GetData(int MenuItemId)
    {
        return GuiCreators.getDataTable("");

    }

    public static void GetCommand(int id)
    {

    }

} 
```

解决了我所有的麻烦

# java - 从 flex 应用程序连接到 red5 远程共享对象

> ID：14019650
> 
> 赞同：0
> 
> 时间：2012-12-24T09:45:40.600
> 
> 标签：java, apache-flex, red5, shared-objects

我正在编写一个 Flex 应用程序。

服务器端应用程序是基于 Red5 1.0 的 Java 应用程序。该连接是通过 RTMPE 协议建立的。（结果与 RTMP 或 RTMPE 相同）。

我能够正确连接到服务器并进入和离开房间，但我无法连接到房间中的共享对象。使用非持久共享对象。

我使用以下代码在服务器端的房间中创建了一个共享对象：

```
private void createSharedObject (IScope scope, String soName, boolean persistent) {
    ISharedObjectService service= (ISharedObjectService) ScopeUtils
            .getScopeService(scope,
                    ISharedObjectService.class,
                    false);
    service.createSharedObject(scope, soName, persistent);
}

private ISharedObject getSharedObject(IScope scope, String soName,boolean persistent) {
    ISharedObjectService service = (ISharedObjectService) ScopeUtils
            .getScopeService(scope,
                    ISharedObjectService.class,
                    false);
    return service.getSharedObject(scope, soName,persistent);
}

   public ISharedObject getRoomSharedObject() {
        final String soName = "room_" + this._scope.getName();

            log.debug("application found. creating shared object");
                log.debug("shared object: {} not found for scope: {}. creating one",new Object[]{soName,this._scope.getContextPath()});
            createSharedObject(this._scope, soName, XpoConstants.persistentSharedObjects);
            ISharedObject so = getSharedObject(this._scope,soName, XpoConstants.persistentSharedObjects);
            so.clear();

            return so;

    } 
```

然后用户进入我得到连接的正确房间，并在他的最后调用一个函数并提供共享对象名称，这样他就会知道要使用以下代码连接什么：

```
 IConnection conn = Red5.getConnectionLocal();
    IServiceCapableConnection sc = (IServiceCapableConnection) conn;
    sc.invoke("<function name>", new Object[]{this._so.getName(),...}); 
```

现在在客户端，我在 flex 应用程序中使用以下代码来获取远程共享对象：

```
var roomSharedObject:SharedObject = SharedObject.getRemote(soName,   SharedUtils.getNetConnection().uri, Finals.persistentSharedObject);

roomSharedObject.addEventListener(NetStatusEvent.NET_STATUS, this._parse);

roomSharedObject.addEventListener(SyncEvent.SYNC,this._parse2);
roomSharedObject.connect(SharedUtils.getNetConnection());

...

    private function _parse(e:NetStatusEvent):void {
        trace("NETSTATUSEVENT");
        trace("########## EVENT INFO CODE: " + e.info.code);
    }

    private function _parse2(e:SyncEvent):void {
        trace("SYNCEVENT");

    } 
```

我从 red5 得到的唯一消息如下：

```
[INFO] [pool-8-thread-12] org.red5.server.so.SharedObject - Deleting shared object room_3963 because all clients disconnected and it is no longer acquired. 
```

我猜想应该触发 NetStatusEvent 会出现某种错误消息，但我根本没有收到任何跟踪消息！我从 red5 得到的唯一信息是共享对象被删除，这意味着该客户端尝试连接一秒钟并断开连接。

我厌倦了google，厌倦了red5 google group。我迷路了！任何有关该问题的信息将不胜感激。

谢谢你！

# 更新

好的，我创建了一个较小的客户端和服务器..

在服务器端，appConnect 函数只返回 true。

该客户端是具有以下代码的 flex 4.6 客户端：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark"
xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" creationComplete="init()"
minHeight="600">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<fx:Script>
    <![CDATA[
    import mx.controls.Alert;

    private var nc:NetConnection = new NetConnection();

    private function init():void {

        nc.proxyType = "best";
        nc.objectEncoding = ObjectEncoding.AMF0;
        nc.addEventListener (NetStatusEvent.NET_STATUS,checkConnect);                    
        nc.connect("rtmpe://127.0.0.1/ufktest");

    }

    private function checkConnect (event:NetStatusEvent):void
    {
        switch (event.info['code']) {
            case 'NetConnection.Connect.Success':
            {   
                _red5Connected();
                trace('connected succesfully');
                break;
            }
            case 'NetConnection.Connect.Closed':
            {   
                _red5Disconnected();
                trace('connection closed');
                break;
            }
            case 'NetConnection.Connect.Rejected':
            {
                _red5Disconnected();
                trace('connection rejected' );
                break;
            }
            case 'NetConnection.Connect.Failed':
            {
                _red5Disconnected();
                trace('connection failed');
                break;
            }
            case 'NetConnection.Connect.AppShutDown':
            {
                trace('app shut down');
                _red5Disconnected();
                break;
            }
            default:
            {
                trace("unknown netconenction status: " + event.info['code']);                   
                break;
            }               
        }

    }

        private function _red5Connected():void {
            trace("red5 connection was successful");
            var roomSharedObject:SharedObject = SharedObject.getRemote("moshe",nc.uri,false);
            roomSharedObject.addEventListener(NetStatusEvent.NET_STATUS, _parse);
            roomSharedObject.addEventListener(SyncEvent.SYNC,_parse2);
            roomSharedObject.connect(nc);

        }
    private function _parse(e:NetStatusEvent):void {
        trace("NETSTATUSEVENT");
        trace("########## EVENT INFO CODE: " + e.info.code);
    }

    private function _parse2(e:SyncEvent):void {
        trace("SYNCEVENT");

    }

        private static function _red5Disconnected():void {
            trace("disconnected from red5");
            Alert.show("could not connect to server, please try again later");
        }

    ]]>
</fx:Script> 
```

当我运行客户端应用程序时，它仍然连接到服务器并给我以下错误：

```
[INFO] [pool-8-thread-15] org.red5.server.so.SharedObject - Deleting shared object moshe because all clients disconnected and it is no longer acquired. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:59:57.443

还有日志吗？但是，您的日志表明共享对象已在服务器上成功创建。尝试使用 acquire() 方法在内部`roomStart()`或创建共享对象的任何位置创建共享对象（`roomStart()`尽管应该是正确的位置）。如果没有客户端连接，服务器默认会销毁任何共享对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:04:56.803

这似乎是一种过于复杂的方法。如果您使用 Flex 方法`SharedObject::getRemote`，所有这些都会为您处理好。如果对象存在，客户端将获得一个副本。如果它不存在，则将创建该对象。因此，“房间”中的第一个人创建了该对象，之后出现的任何人都将获得一份副本。

# ios - iphone应用程序终止时删除文档文件夹中的文件

> ID：14019659
> 
> 赞同：0
> 
> 时间：2012-12-24T09:46:53.080
> 
> 标签：ios, ipad, automatic-ref-counting, uiapplicationdelegate, uiapplication

我的 iPhone 应用程序将在运行应用程序时将多个内容下载到 Documents 文件夹。我想在应用程序终止时删除下载的文件。我的应用程序在目标 4.3 或更高版本上运行并启用了 ARC。从文档文件夹中删除内容的最佳位置是什么？

```
- (void)applicationWillTerminate:(UIApplication *)application 
```

应用程序终止时未调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:50:20.073

寻找[– applicationDidEnterBackground:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)而不是`applicationWillTerminate`.

> 在 iOS 4.0 及更高版本中，当用户退出支持后台执行的应用程序时，将调用此方法而不是 applicationWillTerminate: 方法。

`applicationWillTerminate`代表在 iOS4 之前的世界中“退出”应用程序的含义。

在现代（即 iOS4+）应用程序中，当用户退出应用程序时，应用程序会进入后台并暂停（因此用户可以快速重新进入）。因此，应用程序实际上并没有终止，如果需要恢复内存，iOS 仍然可以随时终止它。这种情况经常发生，这意味着如果您暂停您的应用程序并在第二天返回它，您会发现该应用程序已终止。坏事是暂停的应用程序在终止时**不会**收到`applicationWillTerminate`消息，因此`applicationDidEnterBackground:`当用户退出应用程序时，您必须自己清理的最后“保证”机会也是如此。

无论如何，如果您在应用程序 plist 文件中进行`applicationWillTerminate`设置，当用户退出您的应用程序（并且您的应用程序相应终止）时，您仍然可以被调用。`UIApplicationExitsOnSuspend`

为了完整起见，我还要补充一点 `applicationWillTerminate`：

> 可能在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下调用。

但这是一个实际在后台运行的应用程序的特定用例（这是计算数量的应用程序类型的情况）。

总结一下，清理文档的正确位置是：

1.  `applicationDidEnterBackground`如果您正在运行 iOS4+ 并且未`UIApplicationExitsOnSuspend`在您的应用 plist 文件中设置；

2.  `applicationWillTerminate`如果您在 iOS3 上运行**并**`UIApplicationExitsOnSuspend`在您的应用 plist 文件中进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:53:06.053

as you will not get an `applicationWillTerminate:` if you are running on iOS 4+ (and app does not quit forcefully on entering background) if you really looking for cleanup the stuff only if the application gets terminated, you should do it in `applicaitonDidFinishedLaunching:`

# java - 如何将 JRadioButton 添加到 JTable 和 ButtonGroup 的两个列中。

> ID：14019660
> 
> 赞同：2
> 
> 时间：2012-12-24T09:47:11.990
> 
> 标签：java, swing, jtable, jradiobutton, buttongroup

我想要一个`JTable`由 2 列（具有`RadioButton`） Active 和 Inactive 组成的，这样如果 Active Column 是`Selected`那么 Inactive RadioButton 就会得到`Unselected`，反之亦然意味着在单行中只能从 2 个单选按钮中选择 1 个单选按钮。单选按钮的代码如下。我无法为这 2 列添加 2 个按钮组。

```
 public class NewJFrame extends javax.swing.JFrame {
    DefaultTableModel dt;
    public JRadioButton radioButton=new JRadioButton();

       public class RadioButtonCellEditorRenderer extends AbstractCellEditor implements TableCellRenderer, TableCellEditor, ActionListener {

            public RadioButtonCellEditorRenderer() {

                radioButton.addActionListener(this);
                radioButton.setOpaque(false);
            }

            @Override
            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
                radioButton.setSelected(Boolean.TRUE.equals(value));
                return radioButton;
            }

            @Override
            public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
                radioButton.setSelected(Boolean.TRUE.equals(value));
                return radioButton;
            }

            @Override
            public void actionPerformed(ActionEvent e) {
                stopCellEditing();
            }

            @Override
            public Object getCellEditorValue() {
                return radioButton.isSelected();
            }

        }

        public NewJFrame() {
            initComponents();

            for(int i=0;i <10;i++)
            {

                  //ButtonGroup bp[i]= new ButtonGroup();
            dt.addRow(new Object[]{null,false,false});

            }
           // jTable1.setValueAt(false, 5, 1);

        }

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated Code">
        private void initComponents() {

            buttonGroup1 = new javax.swing.ButtonGroup();
            jScrollPane4 = new javax.swing.JScrollPane();
            jTable1 = new javax.swing.JTable();

            setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

            dt= (new javax.swing.table.DefaultTableModel(new Object[][]{{null,null,null}},new String [] {"Name","Select", "Unselect"})
                {
                    Class[] types = new Class [] {java.lang.Integer.class,java.lang.String.class, java.lang.String.class};

                    public Class getColumnClass(int columnIndex) {
                        return types [columnIndex];
                    }
                    public boolean isCellEditable(int r,int c)
                    {

                        return true;
                    }
                });

                //JTextField textBox= new JTextField();
                jTable1.setModel(dt);
                TableColumn column = jTable1.getColumnModel().getColumn(1);
                column.setCellEditor(new RadioButtonCellEditorRenderer());
                column.setCellRenderer(new RadioButtonCellEditorRenderer());
                TableColumn column1 = jTable1.getColumnModel().getColumn(2);
                column1.setCellEditor(new RadioButtonCellEditorRenderer());
                column1.setCellRenderer(new RadioButtonCellEditorRenderer());
                jTable1.getTableHeader().setReorderingAllowed(false);
                jScrollPane4.setViewportView(jTable1);

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
                getContentPane().setLayout(layout);
                layout.setHorizontalGroup(
                    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(12, 12, 12)
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 375, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap(13, Short.MAX_VALUE))
                );
                layout.setVerticalGroup(
                    layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(28, 28, 28)
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 243, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addContainerGap(29, Short.MAX_VALUE))
                );

                pack();
            }// </editor-fold>

        /**
         * @param args the command line arguments
         */
        public static void main(String args[]) {
            /* Set the Nimbus look and feel */
            //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
            /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
             * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
             */
            try {
                for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                    if ("Nimbus".equals(info.getName())) {
                        javax.swing.UIManager.setLookAndFeel(info.getClassName());
                        break;
                    }
                }
            } catch (ClassNotFoundException ex) {
                java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (InstantiationException ex) {
                java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (IllegalAccessException ex) {
                java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            } catch (javax.swing.UnsupportedLookAndFeelException ex) {
                java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
            }
            //</editor-fold>

            /* Create and display the form */
            java.awt.EventQueue.invokeLater(new Runnable() {
                public void run() {
                    new NewJFrame().setVisible(true);
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T13:52:39.060

这是我拥有的示例代码，我对其进行了修改并将另一个`JRadioButton`放在第 2 列中以满足您的要求。第一列和第二列都像 ButtonGroup 一样按行分组。

**输出：**

![在此处输入图像描述](../Images/337f80086fcc50ee828bd4578d8d890a.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.ArrayList;
import java.util.List;

import javax.swing.DefaultCellEditor;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

 /** Dialog class **/
public class DisplayTable extends JDialog {
   public void initialize() {

   SourceTableModel stm = new SourceTableModel();
   JTable sourceTable = new JTable(stm);

   sourceTable.getColumnModel().getColumn(0).setCellRenderer(new RadioButtonRenderer());
   sourceTable.getColumnModel().getColumn(0).setCellEditor(new RadioButtonEditor(new JCheckBox()));

sourceTable.getColumnModel().getColumn(1).setCellRenderer(new RadioButtonRenderer());
sourceTable.getColumnModel().getColumn(1).setCellEditor(new RadioButtonEditor(new JCheckBox()));

JPanel panel = new JPanel();
panel.add(new JScrollPane(sourceTable));
add(panel, BorderLayout.CENTER);

JPanel btnPanel = new JPanel();
JButton btnApply = new JButton("Close");
btnPanel.add(btnApply);

btnApply.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent arg0) {
        System.exit(0);
    }
});

add(btnPanel, BorderLayout.SOUTH);

setTitle("Radio Button in JTable Example");
setModal(true);
pack();
setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new DisplayTable().initialize();
        }
    });
}

}

/** Table Model class for the Table **/
class SourceTableModel extends AbstractTableModel  {

private static final long serialVersionUID = 1L;

private List<SourceModel> sourceList = new ArrayList<SourceModel>(); 
private String[] columnNamesList = {"Active", "InActive", "One", "Two"};

public SourceTableModel() {
    this.sourceList = getSourceDOList();
}

@Override
public String getColumnName(int column) {
    return columnNamesList[column];
}

@Override
public int getRowCount() {
    return sourceList.size();
}

@Override
public int getColumnCount() {
    return columnNamesList.length;
}

@Override
public Class<?> getColumnClass(int columnIndex) {
    return ((columnIndex == 0 || columnIndex == 1) ? Boolean.class : String.class);
}

@Override
public boolean isCellEditable(int rowIndex, int columnIndex) {
    return ((columnIndex == 0 || columnIndex == 1) ? true : false);
}

/**
     **Important:** Here when ever user clicks on the column one then other column values should be made false. Similarly vice-versa is also true.
**/
@Override
public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
    SourceModel model = (SourceModel) sourceList.get(rowIndex);
    switch (columnIndex) {
case 0: 
        model.setSelect(true);
        model.setInActive(false);
        fireTableRowsUpdated(0, getRowCount() - 1);
        break;
case 1:
        model.setSelect(false);
        model.setInActive(true);
        fireTableRowsUpdated(0, getRowCount() - 1);
        break;
case 2: 
    model.setFactory((String) aValue);
    break;
case 3: 
    model.setSupplier((String) aValue);
    break;
}
fireTableCellUpdated(rowIndex, columnIndex);
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
SourceModel source = sourceList.get(rowIndex);
//SourceModel source = getSourceDOList().get(rowIndex);
switch(columnIndex){
case 0:
    return source.isSelect();
case 1:
    return source.isInActive();    
case 2:
    return source.getFactory();
case 3:
    return source.getSupplier();
default:
    return null;
}
}

/**
 * List for populating the table.
 * @return list of sourceDO's.
 */
private List<SourceModel> getSourceDOList() {
   List<SourceModel> tempSourceList = new ArrayList<SourceModel>();
   for (int index = 0; index < 5; index++) {

    SourceModel source = new SourceModel();
    source.setSelect(false);
    source.setInActive(false);
    source.setFactory("One " + index);
    source.setSupplier("Two " + index);

    tempSourceList.add(source);
}
return tempSourceList;
}
}

/** Class that is holding the model for each row **/
class SourceModel {

private boolean active;
private boolean inActive;
private String factory;
private String supplier;

public SourceModel() {
    // No Code;
}

public SourceModel(boolean select, boolean inActive, String factory, String supplier) {
    super();
    this.active = select;
    this.inActive = inActive;
    this.factory = factory;
    this.supplier = supplier;
}

public boolean isSelect() {
    return active;
}

public void setSelect(boolean select) {
    this.active = select;
}

public String getFactory() {
    return factory;
}

public boolean isInActive() {
    return inActive;
}

public void setInActive(boolean inActive) {
    this.inActive = inActive;
}

public void setFactory(String factory) {
    this.factory = factory;
}

public String getSupplier() {
    return supplier;
}

public void setSupplier(String supplier) {
    this.supplier = supplier;
}
}

/** Renderer class for JRadioButton **/
class RadioButtonRenderer implements TableCellRenderer {

    public JRadioButton btn = new JRadioButton();
    public Component getTableCellRendererComponent(JTable table, Object value,
      boolean isSelected, boolean hasFocus, int row, int column) {

      if (value == null) 
          return null;
      btn.setSelected((Boolean) value);
      return btn;
  }
}

/** Editor class for JRadioButton **/
class RadioButtonEditor extends DefaultCellEditor implements ItemListener {

public JRadioButton btn = new JRadioButton();

public RadioButtonEditor(JCheckBox checkBox) {
    super(checkBox);
}

public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {

    if (value == null) 
        return null;

    btn.addItemListener(this);

    if (((Boolean) value).booleanValue())
        btn.setSelected(true);
    else
        btn.setSelected(false);

    return btn;
}

public Object getCellEditorValue() {
    if(btn.isSelected() == true)
        return new Boolean(true);
    else 
        return new Boolean(false);
}

public void itemStateChanged(ItemEvent e) {
    super.fireEditingStopped();
}
} 
```

**编辑：** 在表模型中定义列后，您需要使用`Rendering and Editing`以下语句用于列 0 和 1。

```
sourceTable.getColumnModel().getColumn(1).setCellRenderer(new RadioButtonRenderer());
sourceTable.getColumnModel().getColumn(1).setCellEditor(new RadioButtonEditor(new JCheckBox())); 
```

同样，您也需要对第二列和第三列（根据需要）进行操作。您必须查看的一个重要步骤是`setValueAt(..)`TableModel 中的方法，您需要对列 (0, 1) 和 (2, 3) 进行分组，因此当第 0 列`selected`成为第 1 列时，第`deselected`2 列和第 3 列也是如此。查看`setValueAt(..)`下面案例 2 的方法代码。当用户选择第二列时，我们将该列设为真，第三列设为假。您只需要对第 2 列和第 3 列执行相同的操作。

```
 case 2:
        model.setSelect(true);
        model.setInActive(false);
        break; 
```

# powershell - 如何修改输出格式

> ID：14019662
> 
> 赞同：2
> 
> 时间：2012-12-24T09:47:12.927
> 
> 标签：powershell

当我执行以下操作时，我得到的格式为“@{xxx}”......我如何才能获得计算机描述而没有其他格式？

> $CompDes = Get-WmiObject -Class Win32_OperatingSystem |选择描述
> 
> 写入主机“计算机描述 $CompDes”

输出：

```
Computer Description @{Description=TESING_SERVER} 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:25:25.177

```
$CompDes = Get-WmiObject -Class Win32_OperatingSystem | Select -exp Description
Write-Host "Computer Description $CompDes" 
```

`-exp`是 的缩写`-ExpandProperty`。它获取指定属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:19:42.767

其他方式：

```
$CompDes = Get-WmiObject -Class Win32_OperatingSystem | Foreach-Object {$_.Description} 
```

# java - Struts2 不能使用验证？

> ID：14019665
> 
> 赞同：0
> 
> 时间：2012-12-24T09:47:34.347
> 
> 标签：java, jakarta-ee, struts2

请原谅，因为我对 Struts2 很陌生。

我创建了一个非常简单的表单，并创建了以下 LoginAction-validation.xml：

```
<validators>
  <field name="username">
    <field-validator type="requiredstring">
      <message key="username.required"/>    
   </field-validator>
    </field>
       <field name="password">
     <field-validator type="requiredstring">
     <message key="password.required"/> 
   </field-validator>  
  </field>
</validators> 
```

我已将此 xml 文件放在 WEB-INF/classes 下。当我运行 jsp 页面并将用户名和密码字段留空时，我不会收到警告消息，而是将我重定向到 error.jsp。

我查看了控制台，它显示在此过程中有一些警告：

```
 WARNING: Parameter [username] is not on the excludeParams list of patterns and will be appended to action!
 WARNING: Parameter [password] is not on the excludeParams list of patterns and will be appended to action! 
```

我怀疑我可能将validation.xml 放在了错误的文件夹中，但我不确定正确的位置在哪里。感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:15:23.600

验证 xml 文件必须与其验证的操作类位于同一 Java 包中。在你的war文件`LoginAction-validation.xml`文件里面应该是`WEB-INF/classes/your_loginAction_package`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:23:15.963

正如 AleksandrM 回答中所说，每个 action-validation.xml 文件必须与对应的 Action 位于同一位置。

访问者验证器有一个例外，其中 object-validation.xml 文件必须位于您正在验证的对象的同一文件夹中，这不是一个操作。

一些信息：

*   你必须为你的动作定义一个输入结果，
*   当您的字段引发一个或多个验证错误时，您的 Action 方法（例如，execute()）未达到（仅执行 prepare() 方法，如果存在），因此如果您始终需要完成一些填充，例如组合框加载，使用 prepare() 或 session；
*   要查看 JSP 中的错误，您需要将标记`<s:fielderror />`放入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T12:29:29.130

我认为问题是你`validation.xml`没有正确放置。

意味着不要将validation.xml文件放在文件`web-inf/classes`夹中，而是放在

动作类所在的动作包。

例如：对于某些动作类，您的包名是`com.insert`和`your class name is`

`Insert.java`＆您的验证文件必须在`same pacakge`名称中

`Insert-validation.xml`那么它将正常工作。

```
Bottom Line Is:action class and validation file should be present in a same package. 
```

# javascript - 如何防止选择被更改？

> ID：14019670
> 
> 赞同：6
> 
> 时间：2012-12-24T09:47:47.667
> 
> 标签：javascript, html, jquery

我想防止在满足特定条件而不禁用选择元素的情况下更改选择。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T10:07:34.983

试试这个：[JSBin 演示](http://jsbin.com/ozotaq/1/edit)

```
<select id="mySelect" data-value="" onfocus="this.setAttribute('data-value', this.value);" 
onchange="this.value = this.getAttribute('data-value');"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:56:29.600

当您不想在您的条件下更改选择时，您可以保留`last`选择的更改值和它。`reassign`

**[现场演示](http://jsfiddle.net/rajaadil/6w7QH/)**

*html*

```
<select id="select">
   <option>1</option>
   <option>2</option>
   <option>3</option>
</select>​ 
```

*Javascript*

```
preval = $('#select').val();
$('#select').change(function() {
    if ($(this).val() == "2") {  $(this).val(preval); return;}
    preval = ($(this).val();    
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T09:49:14.353

```
old_value = $('#select :selected').val();
$('#select').change(function() {
  if($(this).val() == 'option 3') {//your specific condition
     $('#select').val(old_value);
  } else {
    old_value = $('#select :selected').val();
  }
}); 
```

[演示](http://jsfiddle.net/AY5q3/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T09:54:12.527

你想做什么的例子

```
var select = $('select'), option = $('whatyouwanttotest');
if (option.val() == 'value') {
  select.attr('disabled', 'disabled');
} else {
  select.removeAttr('disabled');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:00:46.700

```
(function () {
    var previousIndex;

    $("select[name=test]").focus(function () {
        // Store the current value on focus, before it changes
        previousIndex= this.selectedIndex;
    }).change(function(e) {
        e.target.selectedIndex = previousIndex;
    });
})();​ 
```

这是一个尝试的小提琴：http: [//jsfiddle.net/x5PKf/700/](http://jsfiddle.net/x5PKf/700/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T10:46:07.143

您可以在`SELECT`元素上动态应用一些选择规则。

例如，您可以将选择限制为当前选择的值，或者您可以限制用户可以选择的选项。

查看[现场演示](http://jsfiddle.net/YanickRochon/rVcCN/)：

### HTML

```
<select id="selectElement">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
    <option value="5">Option 5</option>
    <option value="6">Option 6</option>
    <option value="7">Option 7</option>
</select>

<select id="restrictOptions">
    <option value="">Do not restrict options</option>
    <option value="3,4,6,7">Restrict options to 1, 2 and 5</option>
    <option value="1,2,7">Restrict options to 3 to 6</option>
    <option value="other">Restrict to currently selected option</option>
</select> 
```

### JavaScript

```
function applySelectRule(selector, rule) {
    var el = $(selector);
    var currentValue = el.val();
    var valuesRestricted = (rule == 'other' ? '' : rule).split(RegExp('\\s*,\\s*'));

    el.unbind('change.restrictedRule')  // remove old binding
      .bind('change.restrictedRule', function() {
          if (rule == 'other') {
               if (el.val() != currentValue) el.val(currentValue);
          }              
    }).find('option').each(function() {
        var opt = $(this);
        if (valuesRestricted.indexOf(opt.val()) == -1) {
            opt.removeAttr('disabled');
        } else {
            opt.attr('disabled', true);
        }
    }).end().find('option[value="'+currentValue+'"]:disabled').each(function() {
        // set first value that is not disabled
        el.val(el.find('option:not(disabled)').text());
    });
};

$('#restrictOptions').change(function() {
    applySelectRule('#selectElement', $(this).val());
});​ 
```

代码应该足够清晰，但是如果您需要，我可以澄清它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T10:22:38.897

试试这个：http: **[//jsfiddle.net/Csamn/](http://jsfiddle.net/Csamn/)**

```
function selectIt() {
    $('#select option:eq(0)').attr('selected', 'selected');
}
$('#select').change(function() {
    if ($(this).val() != "1") {
        setTimeout(function() {
            selectIt();
        }, 0);
    }

}); 
```

它永远不会让您选择 1 以外的选项。`Checkout the fiddle.`

# azure - Azure WASABi + 自定义 AppDomains = System.DllNotFoundException

> ID：14019673
> 
> 赞同：3
> 
> 时间：2012-12-24T09:48:05.747
> 
> 标签：azure, autoscaling

我的应用程序中有 2 个工作人员和自动扩缩器 (WASABi)。每个工作人员在手动创建的 AppDomain（`AppDomain.CreateDomain()`等等）中计算一些数据。一个域用于一项计算任务。

有时完成的任务很少。一切正常，没有异常发生。

但有时有很多任务要完成。在这些时刻，自动扩缩器必须再添加一名工作人员（使用反应规则制作）。加载新实例后，神奇的事情发生了：在自定义 AppDomain 中有这样的异常：

```
State: Error System.TypeInitializationException: The type initializer for 'Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment' threw an exception. --->
System.DllNotFoundException: Unable to load DLL 'kernel32.dll': The filename or extension is too long. (Exception from HRESULT: 0x800700CE)
 at Microsoft.Win32.SafeNativeMethods.OutputDebugString(String message)
 at System.Diagnostics.DefaultTraceListener.Write(String message, Boolean useLogFile)
 at System.Diagnostics.TraceListener.WriteHeader(String source, TraceEventType eventType, Int32 id) at System.Diagnostics.TraceListener.TraceEvent(TraceEventCache eventCache, String source, TraceEventType eventType, Int32 id, String format, Object[] args)
 at System.Diagnostics.TraceSource.TraceEvent(TraceEventType eventType, Int32 id, String format, Object[] args) at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment..cctor()
 --- End of inner exception stack trace
 --- at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.get_CurrentRoleInstance()
 at Tailspin.Shared.Infrastructure.Helpers.LogError(Exception ex, String message, Object[] args) at Tailsping.Workers.Processor.ChannelUpdater.Update()
 at Tailsping.Workers.Processor.AppdomainHelper.b__1[T]()
 at System.AppDomain.DoCallBack(CrossAppDomainDelegate callBackDelegate)
 at Tailsping.Workers.Processor.AppdomainHelper.RunInAppDomain[T](Func`1 func)
 at Tailsping.Workers.Processor.ProcessorService.ExecWrapperInternal(String wrapperXml) 
```

它无法加载一些名为 ' **kernel32.dll** ' 的 DLL :)

谷歌表示注意到。有什么建议么？

# jquery - 使用带有 SOAP 的 jquery 调用 Web 服务时出现 400 错误请求错误

> ID：14019675
> 
> 赞同：0
> 
> 时间：2012-12-24T09:48:13.723
> 
> 标签：jquery, web-services, soap

这是我的客户端代码。调用此函数时，我收到 400 错误请求错误。谁能帮助我。

```
var req_params="<?xml version=\"1.0\" encoding=\"utf-8\"?>";
              req_params = req_params + "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">";
              req_params = req_params + "<soap:Header>";
             req_params = req_params + "<UserDetails>";
             req_params = req_params + "<Lastname>Abubakar</Lastname>";
             req_params = req_params + "<Othernames>Uju, Ayo</Othernames>";
             req_params = req_params + "<Email>me@me.com</Email>";
              req_params = req_params + "<Phone>08032458829</Phone>";
             req_params = req_params + "</UserDetails>";
             req_params = req_params + "</soap:Body>";
             req_params = req_params + "</soap:Envelope>";
             console.log(req_params);
    $.ajax({
    type: "POST",
    url: "http://testservices.interswitchng.com/quicktellerservice/quickteller.svc/CreateUser",
    data: req_params, 
    processData:false,
    contentType: "text/xml; charset=\"utf-8\"",
    dataType: "xml",
    success: function (data) {
        console.log(data);
    },        
    error: function (xhr, status, error) {
        alert(error);
    } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:41:29.730

这样做的原因是您不能在不修改您正在使用的 Web 服务的情况下进行跨域调用。如果你用谷歌搜索“jquery cross domain ajax”，你可以找到更多关于这个的信息。

在这里您可以阅读更多相关信息：[http ://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/](http://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-json-response-for-iefirefoxchrome-safari-jquery/)

在这里你会找到一个跨域 XML 调用的例子：[http ://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-xml-response-for-iefirefoxchrome-safari-jquery/](http://www.cypressnorth.com/blog/programming/cross-domain-ajax-request-with-xml-response-for-iefirefoxchrome-safari-jquery/)

# javascript - 如何将两个参数传递给主干中的 model.fetch()？

> ID：14019678
> 
> 赞同：0
> 
> 时间：2012-12-24T09:48:21.880
> 
> 标签：javascript, node.js, mongodb, backbone.js, database

我正在制作一个非常简单的用户身份验证系统。我正在尝试将`username`和`password`作为参数的组合传递给后端nodejs服务器。所以这个组合将在我的数据库查询中用于获取用户详细信息。

这是我在前端尝试的：

```
var user = new UserModel({id:['username', 'password']});
user.fetch(); 
```

我在我的模型中定义了一个 urlRoot 属性，如下所示：`/api/users`

后端将处理以下 url：`/api/users/:id`

在这里，由于我已将 id 作为数组传递，因此我尝试通过执行此操作来访问“用户名” `req.params.id[0]`。相反，它返回“用户名”的第一个字母。但我想获取整个用户名字符串。当然，我可以使用 split() 函数将它们分开，但我相信有更好的方法来做到这一点。

请告诉我我的方法是否有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:20:13.447

这是因为 Backbone 将您的数组序列化为字符串，然后将其编码为 URI 组件。

如此有效地发送一个字符串`'username%2Cpassword'`而不是一个数组。

我遇到了同样的问题，并决定登录过程并不真正代表任何“物理”资源，并且很可能不应该由用户模型处理。登录时不会对用户进行 CRUD。

我所做的是创建一个单独的模型`SignIn`：

```
SignInModel = Backbone.Model.extend({
    urlRoot: 'api/sign_in',
    defaults: {
        'username' : '',
        'password': ''
    }
}); 
```

静态映射到`api/sign_in`（这里没有id），然后通过请求正文中传递给`api/sign_in`处理程序的用户名和密码查询数据库。

`UserModel`然后可以留给处理用户的 CRUD。

# queue - 我如何排队 KineticJS 转换？

> ID：14019679
> 
> 赞同：0
> 
> 时间：2012-12-24T09:48:21.850
> 
> 标签：queue, kineticjs, transitions

我想将一些具有可变持续时间的 kineticJS 转换排队，例如：

```
scrub.transitionTo({
      x:400,
      duration: 4,
      callback: function() {

        console.log('complete 400');
        scrub.transitionTo({
        x:500,
        duration: 1,
        callback: function() {
          console.log('complete 100');
        }
      });

      }
    }); 
```

这些只是同一对象的两个嵌套转换，但我想为 10 个或更多嵌套回调自动执行此过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:34:33.867

您可以创建一个新对象并将转换数据放入其中。

```
 var transition1 = {
     x:400,
     duration: 4,
     callback: function(){
        console.log('complete 400');
         ....
     }
 };

var transition2 = {
   x:500,
   duration: 1,
   callback: function() {
        console.log('complete 100');
   }
}; 
```

然后，您可以创建一个 while 循环来调用转换，而无需回调。

但是由于您确实需要回调，因此您需要创建一个回调将调用的函数并检查条件。

```
 function callFunction(scrub, numberOfExecutions){
     if(condition == myCondition){
         scrub.transitionTo(transition1);
         numberOfExecutions--;
     }
     else if(condition2 == myCondition2){
         scrub.transitionTo(transition2);
         numberOfExecutions--;
     }
     if(numberOfExecutions < 1) return 0;
     else return 0;
 }; 
```

请注意，执行这些嵌套递归调用是不明智的，因为某些浏览器会自动认为脚本陷入无限循环并且不会执行。

# asp.net - 在 Asp.net MVC 中编码 html 字符串

> ID：14019681
> 
> 赞同：1
> 
> 时间：2012-12-24T09:48:55.290
> 
> 标签：asp.net, asp.net-mvc-3

```
<%= Html.TextArea("text", "This is <b>Zeb</b>") %> 
```

从上面的语句中，我期望将文本框中的字符串显示为：

这是**泽布**。

但我实际上得到的是

```
This is <b> Zeb </b> 
```

我的字符串未正确编码。那么请有人告诉我问题出在哪里？

![在此处输入图像描述](../Images/cef925fbb196792948fdc20fedffff0d.png)

我从 Professional ASP.NET MVC 4 一书中读过它。它在第 100 页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:16:12.017

没有问题，这是预期的行为。这是同样的问题：[ASP.NET MVC3, Html.TextAreaFor without encoding?](https://stackoverflow.com/questions/4245431/asp-net-mvc3-html-textareafor-without-encoding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:01:40.177

您的问题与编码无关。您正在告诉 MVC（和浏览器）显示一个文本区域来编辑该字符串，这就是它正在做的事情。

如果您想要一个 HTML 编辑器，您的用户可以使用它来编辑 HTML（同时看到它正确呈现），您应该查看这篇文章： [使用 ASP.NET MVC 框架时最好的 WYSIWYG 编辑器是什么？](https://stackoverflow.com/questions/590960/whats-the-best-wysiwyg-editor-when-using-the-asp-net-mvc-framework)

基本上，您通常必须包含所选编辑器的 .js 和 .css，并在您当前发送到 broser 的文本区域中激活它。例如，这将创建一个类似于您在 Wordpress 中找到的编辑器。

* * *

编辑：

现在您已经编辑了您的问题，我认为您误解了这本书所指的内容。当它说您的文本已被编码时，这意味着 < > 字符已被翻译成 & lt; 和> 这样浏览器就不会将它们视为“打开 HTML 标记”和“关闭标记”。

如果您在浏览器中查看源 HTML，您会看到该字符串已被正确编码（如 & lt; 和 & gt;）。

# php - Joomla - 如何从管理仪表板隐藏版本更新选项

> ID：14019682
> 
> 赞同：5
> 
> 时间：2012-12-24T09:48:59.290
> 
> 标签：php, joomla, joomla2.5

我想在 joomla 2.5.6 的管理仪表板中隐藏版本更新选项。

![在此处输入图像描述](../Images/be77bbac5936147abed47b7548dc5dff.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-24T10:02:37.417

您需要禁用一个插件-

去`plugins->Quick Icon - Joomla! Update Notification`

![在此处输入图像描述](../Images/4812707a3ba3921ee8420ec5bfb3f612.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T10:25:33.650

去

插件-> 快捷图标-Joomla! 扩展更新通知

插件-> 快捷图标-Joomla! 更新通知

禁用插件。

# java - 在android中删除特定号码的通话记录

> ID：14019684
> 
> 赞同：3
> 
> 时间：2012-12-24T09:49:06.970
> 
> 标签：java, android, calllog

我正在尝试删除特定号码的所有通话记录。

```
try {
    String strNumberOne[] = {number};
    Cursor cursor = getContentResolver().query(CallLog.Calls.CONTENT_URI, null, CallLog.Calls.NUMBER + "=? ", strNumberOne, "");
    boolean bol = cursor.moveToFirst();
    if (bol) {
        do {
            int idOfRowToDelete = cursor.getInt(cursor.getColumnIndex(CallLog.Calls._ID));                            
            getContentResolver().delete(Uri.withAppendedPath(CallLog.Calls.CONTENT_URI, String.valueOf(idOfRowToDelete)), "", null);
        } while (cursor.moveToNext());
    }
} catch (Exception ex) {
    System.out.print("Exception here ");
} 
```

我想发起一个`LIKE`查询，因为 callLog 中保存的 mobNum 是 +916666666666，我传递的号码是 6666666666。所以它不匹配。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-26T04:07:50.550

尝试使用此代码从历史记录中删除任何特定数字

```
String number="4666";//any number
Uri CALLLOG_URI = Uri.parse("content://call_log/calls"); 
context.getContentResolver().delete(CALLLOG_URI,CallLog.Calls.NUMBER +"=?",new String[]{number}); 
```

您还可以通过执行此操作按用户名删除通话记录

```
context.getContentResolver().delete(CALLLOG_URI,CallLog.Calls.CACHED_NAME +"=?",new String[]{name}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:02:57.253

检查以下链接：

*   [Android中的通话记录删除](http://www.mobisoftinfotech.com/blog/android/androidcalllogdeletion/)
*   [SO：通话结束后从通话记录中删除通话](https://stackoverflow.com/questions/5361429/delete-call-from-call-log-after-call-end)

# java - 如何在 Web 应用程序中配置 Spring Security？

> ID：14019692
> 
> 赞同：7
> 
> 时间：2012-12-24T09:50:09.213
> 
> 标签：java, spring-security

如何在 Web 应用程序中配置 Spring Security？
我在我的库中添加了三个 JAR 文件：security-core、security-web 和 security-config。现在我需要在带有自定义登录页面的配置 XML 文件中添加什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T10:05:23.597

参考：[http ://www.mkyong.com/spring-security/spring-security-form-login-example/](http://www.mkyong.com/spring-security/spring-security-form-login-example/)

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <display-name>Spring</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>Spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/app-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Spring</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/spring-security.xml                          
        </param-value>
    </context-param>
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
</web-app> 
```

弹簧安全.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <http auto-config="true">
        <intercept-url pattern="/login.jsp" access="ROLE_ANONYMOUS" />
        <intercept-url pattern="/**" access="ROLE_USER" />
        <form-login login-page="/login.jsp" default-target-url="/" />
        <logout logout-url="/logout" logout-success-url="/login.jsp"/>
        <intercept-url pattern="/css/**" filters="none"/>
        <intercept-url pattern="/js/**" filters="none"/>
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="admin" password="admin"  authorities="ROLE_USER" />
            </user-service>
        </authentication-provider>
    </authentication-manager>

</beans:beans> 
```

应用程序配置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">
    <mvc:annotation-driven />
    <task:annotation-driven/>

    <bean id="viewResolver"   class= "org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
        <property name="cache"  value= "true"/>
        <property name="prefix" value= ""/>
        <property name="suffix" value=".ftl"/>
        <property name="contentType" value="text/html;charset=UTF-8"/>
        <property name="exposeSpringMacroHelpers" value="true"/>
        <property name="requestContextAttribute" value="rc"/>
    </bean>

</beans> 
```

# .htaccess - 使用 .htaccess 或 tomcat 保护外部用户限制 Solr Admin url

> ID：14019694
> 
> 赞同：3
> 
> 时间：2012-12-24T09:50:13.210
> 
> 标签：.htaccess, solr, restriction

我最近在服务器上安装了 Solr，我想限制只有本地用户可以访问它`.htaccess`

```
site.com:8983/solr/admin    [ restrict all user] 
```

下面是 .htaccess 代码

```
RewirteRule on
<FilesMatch "127.0.0.1:8983/solr/admin">
    Order Deny, Allow
    Deny form all
    Allow 127.0.0.1
</FilesMatch> 
```

或者有什么方法可以保护/限制 Solr Admin`site.com:8983/solr/admin`从其他用户访问只有本地 ip 用户可以使用它..

我试过这个，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:23:56.443

您的`<FilesMatch "127.0.0.1:8983/solr/admin">`行将永远不会匹配任何内容，因为您已将主机名和端口卡在正则表达式中。尝试改用`Location`容器：

```
<Location "/solr/admin">
    Order Deny, Allow
    Deny from all
    Allow 127.0.0.1
</Location> 
```

或者更好的是`Directory`：

```
<Directory "/path/to/your/document/root/solr/admin"> 
    Order Deny, Allow
    Deny from all
    Allow 127.0.0.1
</Directory> 
```

您需要填写 solr/admin 目录的完整路径。

去掉这`RewirteRule on`条线，它什么都不做，甚至拼写不正确，会导致 500 错误。

但是，这些指令都不能在 htaccess 文件中使用。您需要在虚拟主机配置的任一服务器中使用这些。如果你*必须*使用 htaccess 文件，那么在你的 solr/admin 目录中创建一个 htaccess 文件，并简单地将这些指令放入其中：

```
Order Deny, Allow
Deny from all
Allow 127.0.0.1 
```

或者，在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REMOTE_ADDR} !127.0.0.1
RewriteRule ^/?solr/admin - [L,F] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T09:58:44.013

检查以下链接。希望他们会帮助你。

*   [限制 Solr 管理员访问](http://www.findbestopensource.com/article-detail/restrict-solr-admin-access)
*   [Solr 安全](http://wiki.apache.org/solr/SolrSecurity)
*   [保护 Solr 管理控制台](http://drupal.org/node/658466)
*   [如何保护 Apache Solr 管理控制台](http://www.knackforge.com/blog/sivaji/how-protect-apache-solr-admin-console)

# ios6 - 在 IAP 托管内容中下载失败时，IAP 是否完成？

> ID：14019695
> 
> 赞同：0
> 
> 时间：2012-12-24T09:50:16.347
> 
> 标签：ios6, in-app-purchase, iap-hosted-content

我在 iOS6 中使用新的托管内容选项。

我的问题是 - 即使下载失败，Apple 也会向用户收费吗？

或者换句话说，我需要让用户重新购买产品还是重新下载？

谢谢沙妮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T11:04:26.720

首先，用户需要为购买付费，然后，他可以下载您托管的内容。

# jquery - 无法覆盖 asp.net 菜单控件 css 以在 UP 方向显示菜单

> ID：14019697
> 
> 赞同：0
> 
> 时间：2012-12-24T09:50:26.367
> 
> 标签：jquery, asp.net, css, menu

我在页面底部有 asp.net 菜单控件，我有一个问题，如果菜单控件有子菜单，然后如果屏幕很小，它们会隐藏，我无法解决这个问题，我试图更改菜单控件的 css 以显示向上方向而不是向下方向的菜单，这对我不起作用。现在我正在寻找一个简单的解决方案悬停，即使我想向下滚动到页面底部，以便所有菜单都可见。

[例子](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)

我尝试了不同的东西，比如

```
 var $elem = $('#Container');
   $(".popout level1 static selected").hover(function () {
        $(document).scrollTop($(document).height());
        return false;
    }); 
```

到目前为止，我什至无法使用任何类来捕获，我不是 jquery 或 CSS 类型的人，我确信我做错了一些事情。我将不胜感激在这方面的帮助。

我要么希望菜单以向上滚动到页面底部的方向显示，以便所有菜单都可见。

**可能的解决方案**

在 ddMenuSlider.js 文件中更改以下两行代码

更改`top`为`bottom`_`top:''`

```
$subul.css({bottom:this.istopheader && setting.orientation!='v'? this._dimensions.h+"px" : 0}) 

$mainmenu.find("ul").css({ display: 'none', visibility: 'visible', top:''}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:13:21.660

一个简单的解决方案是`ul`打开并按住弹出菜单以**删除** `top`并使用**24px**`bottom`的菜单高度（实际上是 26，但放置 24 或 25 以看起来线连接）。

 **您具有内联样式，因此内联更改是`style="bottom:24px;"`（以及样式的其余部分）

[![](../Images/6b6720abaed22ce9e9f3931160572089.png)](https://i.stack.imgur.com/U93zK.jpg)
[（来源：[planethost.gr](http://www.planethost.gr/so/MenuUp9923.jpg)）]

这样菜单就会打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T11:20:58.970

也许你可以试试这个：

只需在以下位置找到这个`ddsmoothmenu.js`：

```
`$subul.css({top:this.istopheader`
   //--------^^^-------------------change this to bottom 
```

尝试更改此设置，看看是否有帮助。**

# android - Windows 7 上的 adb Android 外壳

> ID：14019698
> 
> 赞同：0
> 
> 时间：2012-12-24T09:50:39.020
> 
> 标签：android, shell

我刚刚在 Windows 7 上安装了 ADT，但对 Linux 和 ash shell 命令知之甚少。

那么你是怎么做到的呢？（最好不要生根设备）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T09:53:17.303

Android设备上通常没有`sudo`，如果设备是root的，你会发现`su`以root身份登录。

这在很大程度上取决于您尝试访问的设备。

顺便说一句，这与 Windows 7 是否具有 shell 命令无关，当您运行时`adb`，这些是在设备本身上运行的命令。

如果设备没有root并且访问`/data`受到限制，您将无法访问它。

# iphone - 在 IMessage 中正确显示视频

> ID：14019702
> 
> 赞同：6
> 
> 时间：2012-12-24T09:50:47.157
> 
> 标签：iphone, objective-c, ios6, mfmessagecomposeview, imessage

目前，我正在开发一个应用程序，我必须在其中通过 IMessage 发送照片/视频。照片

发送代码工作正常，但是当我通过 IMessage 发送视频时，我只得到

作曲家中没有视频的图标显示如下：

![在此处输入图像描述](../Images/9dbbd715fcc6444a1718e6deb43edefb.png)

我正在使用此代码在 IMessage 中显示视频以进行发送：

```
if (ver_float < 6.0)
        {
            UIPasteboard *pasteboard;
            pasteboard = [UIPasteboard generalPasteboard];
            NSString *filePath =pathToVideo;
            NSData *datavideo = [NSData dataWithContentsOfFile:filePath ];
            [pasteboard setData:datavideo forPasteboardType:[UIPasteboardTypeListImage objectAtIndex:0]];
        }
        else
        {
            UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
            NSString *filePath =pathToVideo;
            NSData *videoData = [NSData dataWithContentsOfFile:filePath];
            [pasteboard setData:videoData forPasteboardType:[UIPasteboardTypeListImage objectAtIndex:0]];

        }
    NSURL *urlstr = [NSURL URLWithString:@"sms:"];
    [[UIApplication sharedApplication] openURL:urlstr]; 
```

我该如何解决这个问题？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T18:48:10.623

可悲的是，（正如 simonbs 建议的那样）UIPasteboard SDK 无法帮助您解决此问题，它目前不支持视频和音频。可悲的是，我可能会补充。

可能重复： [将视频复制到 uipasteboard](https://stackoverflow.com/questions/13989625/copy-video-to-uipasteboard)

# azure - 将 XP 32 位托管为 Azure 虚拟机

> ID：14019703
> 
> 赞同：1
> 
> 时间：2012-12-24T09:50:52.837
> 
> 标签：azure, windows-xp-sp3

出于测试/调试的原因，我们希望在 Azure 上复制客户端环境。唯一的问题是它是 32 位 XP。

有谁知道我是否可以在 Azure 上托管它？

塔

罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:59:01.470

Azure 中只能使用 Windows Server 实例（从技术上讲，它们是一种特殊的 Azure 来宾操作系统，但实际上它们是 Windows Server 的版本）。如果您需要 XP，那么我建议您在 VirtualBox 或 VMware Workstation 中使用本地虚拟机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-22T14:18:38.297

为什么需要“本地 VM”才能在 Azure 上运行 Windows XP？为什么不在 Azure 中选择任何现代操作系统，然后在 Azure 上安装 Windows XP 作为 Hyper-V 虚拟机。这样，用户可以连接到 Azure 服务器，然后启动 Windows XP VM...

请参阅：http: [//fabriccontroller.net/running-a-legacy-os-in-a-windows-azure-virtual-machine-windows-xp-windows-server-2003/](http://fabriccontroller.net/running-a-legacy-os-in-a-windows-azure-virtual-machine-windows-xp-windows-server-2003/)

和

[http://morgansimonsen.com/2014/03/05/will-it-run-how-to-run-your-favorite-legacy-os-in-a-windows-azure-vm/](http://morgansimonsen.com/2014/03/05/will-it-run-how-to-run-your-favorite-legacy-os-in-a-windows-azure-vm/)

# java - Wicket Junit 测试用例

> ID：14019711
> 
> 赞同：0
> 
> 时间：2012-12-24T09:51:29.773
> 
> 标签：java, testing, junit, wicket

在我的检票口应用程序中，我想检查我的主页（HomePage.java）是否正确呈现。

我写了一个测试用例

```
public class TestMerchantProductPage extends TestCase {
private WicketTester tester = null;

@BeforeClass
public void testSetUp(){
    tester = new WicketTester();
    tester.startPage(HomePage.class);
}

@SuppressWarnings("deprecation" )
@Test
public void testPage(){
    tester.assertRenderedPage(HomePage.class);
    tester.startPanel(ItemOrderPanelBySearch.class);

}
} 
```

我收到这样的错误

```
org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor 'public com.zipgrocery.pages.HomePage(org.apache.wicket.request.mapper.parameter.PageParameters)' and argument ''. Might be it doesn't exist, may be it is not visible (public).
at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:196)
at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:77)
at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:47)
at org.apache.wicket.DefaultMapperContext.newPageInstance(DefaultMapperContext.java:103)
at org.apache.wicket.request.handler.PageProvider.resolvePageInstance(PageProvider.java:264)
at org.apache.wicket.request.handler.PageProvider.getPageInstance(PageProvider.java:165)
at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider.get(BaseWicketTester.java:2682)
at org.apache.wicket.util.tester.BaseWicketTester$LastPageRecordingPageRendererProvider.get(BaseWicketTester.java:2669)
at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:166)
at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:645)
at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:565)
at org.apache.wicket.util.tester.BaseWicketTester.processRequest(BaseWicketTester.java:537)
at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1209)
at org.apache.wicket.util.tester.BaseWicketTester.startPage(BaseWicketTester.java:1182)
at com.zipgrocery.TestMerchantProductPage.testSetUp(TestMerchantProductPage.java:23)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:173)
... 38 more
Caused by: java.lang.ClassCastException: org.apache.wicket.protocol.http.WebSession cannot be cast to com.zipgrocery.ZipSession
at com.zipgrocery.ZipSession.get(ZipSession.java:45)
at com.zipgrocery.pages.HomePage.<init>(HomePage.java:65)
... 43 more 
```

我的 HomePage.java 中没有默认构造函数。那么我应该如何编写我的测试用例呢？

任何帮助或建议表示赞赏。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:17:30.913

也许这个旧线程中的解决方案仍然有效：[http ://apache-wicket.1842946.n4.nabble.com/Passing-parameters-to-a-page-in-WicketTester-td1933884.html](http://apache-wicket.1842946.n4.nabble.com/Passing-parameters-to-a-page-in-WicketTester-td1933884.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:20:48.140

从 Wicket 1.5 开始，您只需使用参数调用构造函数，因此在您的情况下

```
WicketTester tester = new WicketTester(YourApplication);
tester.startPage(new HomePage(YourParameter));
tester.assertRenderedPage(HomePage.class); 
```

# android - 如何将短信保存在数据库中

> ID：14019712
> 
> 赞同：-1
> 
> 时间：2012-12-24T09:51:38.547
> 
> 标签：android, sms

我正在尝试使用 XML 解析器从远程服务器将一些 SMS 保存在 SQLite 数据库中。我`urlencode()`在服务器端（PHP）和`URLDecoder.decode()`Android 上使用。某些特殊字符在数据库中被替换为 �。

我搜索了很多，发现我们需要将 UTF-8 转换为 GSM 7 位编码和一些类似的帖子。有谁知道如何解决这个问题？

## 编辑：

这是一个使用编码的 SMS 示例`urlencode()`

> I+Am+Da+见证+2+His+Fearless+Death+I+Am+A+Token+Of+His+Last+Promise+ **%96** +4giveness+I+Am+Da+CROSS+Blessings+On+Good+星期五...

%96 不受支持`URLDecoder.decode()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T18:44:00.963

更改了要使用的文本编辑器`utf-8 without BOM`，它起作用了！

# jsf - AsyncSupportListenerAdapter primefaces 异常

> ID：14019714
> 
> 赞同：3
> 
> 时间：2012-12-24T09:52:00.100
> 
> 标签：jsf, tomcat, primefaces

我是 jsf 的新手，我正在尝试使用 primefaces 做一些示例，当我尝试运行这个时， [http://www.primefaces.org/showcase-labs/push/chat.jsf](http://www.primefaces.org/showcase-labs/push/chat.jsf) 我得到了一个例外，比如这个。

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/primefaces] threw exception [org/atmosphere/cpr/AsyncSupportListenerAdapter] with root cause
java.lang.ClassNotFoundException: org.atmosphere.cpr.AsyncSupportListenerAdapter 
```

我想我必须有一个气氛 jar 文件，但我不确定。任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:19:18.350

这个可以帮助我解决我的问题。

[https://github.com/Atmosphere/atmosphere/wiki/Structure-of-an-Atmosphere%27s-Application](https://github.com/Atmosphere/atmosphere/wiki/Structure-of-an-Atmosphere%27s-Application)

# mysql - 共同的朋友 - MySQL

> ID：14019715
> 
> 赞同：1
> 
> 时间：2012-12-24T09:52:02.463
> 
> 标签：mysql, database, mutual-friendship

我正在尝试开发一个功能，它可以显示朋友的朋友，以及我与这些用户有多少共同的朋友。到目前为止，我已经能够单独执行这些功能，但不能一起执行。

这是我使用的名为**userfriends**的主要视图。其中 user1 是第一个用户，user2 是朋友。

![在此处输入图像描述](../Images/fb86ff5e310abd1f2074870d5606873d.png)

这是我开发的用于查看两个用户之间的共同朋友的功能

```
SELECT id FROM users
WHERE id IN (
    SELECT user2 FROM userfriends WHERE user1 = me
) AND id IN (
    SELECT user2 FROM userfriends WHERE user1 = second
) 
```

Users 是一个主表，它可以将在 userfriends 表中找到的用户 id 链接到有关用户的信息。Me 和 second 是存储过程中的变量，用于模拟搜索第一个和第二个用户。此功能按计划工作。

我的第二个功能是查看所有与我的朋友成为朋友的用户，但不是与我成为朋友的用户。

```
SELECT user2 AS id
FROM userfriends
    WHERE user1 IN (
        #Selects my friends
        SELECT user2 FROM userfriends
        WHERE user1 = me
    ) 
    AND user2 <> me #Makes sure is not me
    AND user2 NOT IN ( #Makes sure not already friend
        SELECT user2 FROM userfriends
        WHERE user1 = me
    ) 
```

同样，所有的计划工作和我都代表用户 ID。这将返回我所有朋友的列表。

我希望能够获得的不是共同用户列表，或者我的朋友朋友列表是：

一张表，其中包含我的朋友朋友用户 ID 以及我和该用户共享的共同朋友的数量。等：用户：1，friends_in_common：103。如果我不够清楚，请询问，我会尝试使其更清楚。这两个功能自己做，但我只是不知道如何将它合并在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:02:31.597

```
-- use a self-join of userfriend*userfriend
-- to find all the friends that moi&toi have in common
-- , and count them.
-- (optionally) suppress the rows for (toi<=moi)
-- , because there are basically the same as the corresponding rows with
-- (toi>moi)
-- -----------------------------------
SELECT DISTINCT 
   uf1.user1 AS moi
   , uf2.user1 AS toi
   , COUNT(*) AS cnt
   FROM userfriend uf1
   JOIN userfriend uf2 ON uf1.user2 = uf2.user2
   WHERE uf1.user1 < uf2.user1 -- Tie breaker, symmetry remover
   GROUP BY uf1.user1, uf2.user1
   ; 
```

# python - 如何为 Python 程序分配更多内存？它在 4GB RAM 上消耗的空间不超过 64MB

> ID：14019716
> 
> 赞同：4
> 
> 时间：2012-12-24T09:52:07.020
> 
> 标签：python, ubuntu, memory-management, mapreduce, mrjob

我有一个 Python 程序在 4GB RAM 32 位 12.04 Ubuntu 上运行一些输入数据。该程序的时间和空间复杂度均为 O(n)。当输入数据约为 100 kb 时，它在大约 4 秒内完成执行，峰值 RAM 消耗为 0.5%（在 LINUX 中使用“top”命令）。但是，当我尝试输入大小为 500kB、2.5MB 和 16 MB 的数据时，该过程并未在 1 小时内完成（在每种情况下，我都必须使用 Cntrl C 取消）并且内存消耗停留在 1.6%（即每种情况下大约 64MB）。我可以以某种方式为这个 Python 进程分配更多的 RAM 内存吗？

注意：我正在使用 Python 制作的“mrjob”库在 Python 中实现 Map Reduce 作业。

以下是输入 csv 文件为 100 kB 时成功执行的日志。

```
 ankit@ubuntu:~/mrj/mrjo/mrjob/examples$ python mt1.py as.txt > asop.txtusing configs in /home/ankit/.mrjob.conf
creating tmp directory /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269
> /usr/bin/python mt1.py --step-num=0 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-mapper_part-00000
> /usr/bin/python mt1.py --step-num=0 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/input_part-00001
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-mapper_part-00001
Counters from step 1:
  (no counters found)
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-mapper-sorted
> sort /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-mapper_part-00000 /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-mapper_part-00001
> /usr/bin/python mt1.py --step-num=0 --reducer /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-0-reducer_part-00000
Counters from step 1:
  (no counters found)
> /usr/bin/python mt1.py --step-num=1 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-1-mapper_part-00000
Counters from step 2:
  (no counters found)
Moving /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/step-1-mapper_part-00000 -> /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/output/part-00000
Streaming final output from /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269/output
removing tmp directory /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.094809.251269 
```

这是输入 csv 文件为 2.5 MB 时的执行日志和回溯。

```
ankit@ubuntu:~/mrj/mrjo/mrjob/examples$ python mt1.py matlabsample.csv > matsamop.txt
using configs in /home/ankit/.mrjob.conf
creating tmp directory /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221
> /usr/bin/python mt1.py --step-num=0 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-mapper_part-00000
> /usr/bin/python mt1.py --step-num=0 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/input_part-00001
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-mapper_part-00001
Counters from step 1:
  (no counters found)
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-mapper-sorted
> sort /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-mapper_part-00000 /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-mapper_part-00001
> /usr/bin/python mt1.py --step-num=0 --reducer /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-0-reducer_part-00000
Counters from step 1:
  (no counters found)
> /usr/bin/python mt1.py --step-num=1 --mapper /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/input_part-00000
writing to /home/ankit/mrj/mrjo/examples/mt1.ankit.20121224.065246.700221/step-1-mapper_part-00000
^CTraceback (most recent call last):

  File "mt1.py", line 311, in <module>
    Motion_Tagging.run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/job.py", line 545, in run
    mr_job.execute()
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/job.py", line 561, in execute
    self.run_job()
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/job.py", line 631, in run_job
    runner.run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/runner.py", line 490, in run
    self._run()
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/local.py", line 193, in _run
    combiner_args=combiner_args)
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/local.py", line 488, in _invoke_step
    self._wait_for_process(proc_dict, step_num)
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/local.py", line 657, in _wait_for_process
    tb_lines = find_python_traceback(stderr_lines)
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/parse.py", line 171, in find_python_traceback
    for line in lines:
  File "/usr/local/lib/python2.7/dist-packages/mrjob-0.3.5-py2.7.egg/mrjob/local.py", line 680, in _process_stderr_from_script
    for line in stderr:
KeyboardInterrupt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T09:57:33.217

您不会“为 Python 进程分配内存”，而是在 Python 程序中使用更大的结构。从根本上讲，您的算法可能存在缺陷，以至于它没有利用可用的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:11:27.193

仅供参考，这不是代码级解决方案。但是，您可以通过下面的链接深入了解 python 内存实现是如何工作的，以及问题是如何解决的。它还讨论了可以改进 Python 内存管理的其他领域。希望它会有用。

[http://www.evanjones.ca/memoryallocator/](http://www.evanjones.ca/memoryallocator/)

# iphone - UISearchbar 的取消按钮的图像

> ID：14019719
> 
> 赞同：10
> 
> 时间：2012-12-24T09:52:32.243
> 
> 标签：iphone, ios, uibutton, uiimage, uisearchbar

> **可能重复：**
> [在 UISearchBar 中设置取消按钮的样式](https://stackoverflow.com/questions/1200149/styling-the-cancel-button-in-a-uisearchbar)

我正在尝试为搜索栏设置图像，我可以使用搜索栏的子视图为搜索`UISearchBarBackground`栏设置图像，但我无法为搜索栏的取消按钮设置图像。我得到按钮的搜索栏子视图`UINavigationButton`，但我不知道如何设置图像`UINavigationButton`。谁能帮我？

先感谢您

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-24T09:56:37.107

试试这个代码...

```
 for (UIView *searchbuttons in searchBar.subviews)
    {
        if ([searchbuttons isKindOfClass:[UIButton class]])
        {
            UIButton *cancelButton = (UIButton*)searchbuttons;
            cancelButton.enabled = YES;
            [cancelButton setBackgroundImage:[UIImage imageNamed:@"yourImageName"] forState:UIControlStateNormal];
            break;
        }
    } 
```

# header - GXT（不是 Ext-JS）网格标题中的过滤器图标

> ID：14019729
> 
> 赞同：0
> 
> 时间：2012-12-24T09:53:23.540
> 
> 标签：header, grid, icons, gxt

我正在 GXT（不是 Ext JS）2.4 中的网格上工作，但遇到了以下问题。

我正在尝试在设置过滤器后立即使用动态图标标记列，以便用户可以知道他/她已在该列上应用了过滤器。它与 Excel 中的内置功能非常相似，其中在过滤列上设置了过滤图标。

我无法这样做，也无法找到一篇文章指出我正确的方向来修复它。我已尝试按照各种论坛中的建议更改 CSS，但没有帮助。不过，CSS 更改确实同样影响所有标题。我想要的只是过滤后的列与其他列不同。

任何帮助将非常感激。我会说将我视为新手，并逐步指导我如何修复它。对不起，如果我听起来太绝望了，但我是，我想我可能花了太多时间来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:09:13.083

**GXT 2**已经有了这个功能，你可以看看[Filter Grid Demo](http://www.sencha.com/examples-2/#filtergrid)。`bold`并且`italic`默认用于过滤列，这是来自的片段`gxt-all.css`

```
.x-grid3-hd-row .x-filtered-column {
    font-style: italic !important;
    font-weight: bold !important;
} 
```

您需要覆盖此 css 定义以应用您自己的样式。

# pivot - 枢轴控制操作已完成

> ID：14019731
> 
> 赞同：0
> 
> 时间：2012-12-24T09:53:26.660
> 
> 标签：pivot, windows-phone-8

ManipulationCompleted 事件在 WP8 SDK 中不起作用。解决此问题的替代方法是什么？

包括检测左右滑动，或通过单击枢轴标题选择其他枢轴项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:52:52.430

您可以使用 SelectedIndex 来识别选定的数据透视页面。例如，您可以用作：

```
private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    switch (((Pivot)sender).SelectedIndex)
    {
        case 0:
            ApplicationBar = ((ApplicationBar)Resources["AppBar1"]);
            break;
        case 1:
            ApplicationBar = ((ApplicationBar)Resources["AppBar2"]);
            break;
        case 2:
            ApplicationBar = ((ApplicationBar)Resources["AppBar3"]);
            break;
        case 3:
            ApplicationBar = ((ApplicationBar)Resources["AppBar4"]);
            break;
    }
} 
```

希望这有帮助

# c# - 为什么我无法打印此列表？

> ID：14019732
> 
> 赞同：0
> 
> 时间：2012-12-24T09:53:29.953
> 
> 标签：c#, web-services

这是我第一次处理 Web 服务。我是一名新的 C# 开发人员，我正在尝试从 Web 服务中检索用户信息。我可以连接到网络服务并检索信息。现在，我正在尝试打印公司不同级别的用户列表。我遇到这种错误但我不知道的问题： ***foreach 语句无法对“UserLib.UserDate”类型的变量进行操作，因为“UserLib.UserData”不包含“GetEnumerator”的公共定义。***

我有一个名为 UserLib 的类库项目，其中有两个类。

**用户数据类代码：**

```
namespace UserLib
{
    public class UserData
    {
        public string username { get; set; }
        public string fullName { get; set; }
        public string email { get; set; }
        public string jobTitle { get; set; }
        public string levelCode { get; set; }
    }
} 
```

**GetUserData 类代码：**

```
namespace UserLib
{
    public class GetUserData
    {
        public UserData getUserData(string login)
        {

            var dat = new UserData //UserData object
            {
                username = response.Username,
                fullName = response.FullName,
                email = response.Email,
                jobTitle = response.Title,
                levelCode = levelCode,
                           };
            return dat;
        }
    }
} 
```

程序类代码：

```
class Program
    {
        static void Main(string[] args)
        {
                        Console.WriteLine("Please enter the username: ");
                        Console.WriteLine(" ");
                        Console.Write("Username: ");
                        var login = Console.ReadLine();

                            var getUser = new GetUserData();
                            var dat = getUser.getUserData(login);  // <== class library call

                            Console.WriteLine("Username:   " + dat.username);
                            Console.WriteLine("Full Name:   " + dat.fullName);
                            Console.WriteLine("Email:   " + dat.email);
                            Console.WriteLine("Job Title:   " + dat.jobTitle);
                            Console.WriteLine("Level Code:   " + dat.levelCode);
                            Console.WriteLine("------------------------");
                            printAll(login);
} 
```

**你能告诉我如何解决这个问题并打印这个用户列表吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:57:55.713

`UserData`不是`IEnumerable`like `List<UserData>`，它只是一个对象。您需要一个`getUsersData`返回`IEnumerable<UserData>`

嗯也..你`switch`看起来多余。

第一个`case`级联到第二个`case`..第二个`case`与第三个相同..所以为什么不直接拥有`output.Add(users.userName);`

假设真正的代码是你粘贴的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:59:07.523

您的`getUserData`方法不返回用户列表，它返回单个`UserData`（一个用户的详细信息），因此您不能期望像集合一样迭代此返回值。

另一方面，使用 PascalCase 作为方法名和你的属性名`UserData`。

# iphone - iPhone 的滑动抽屉，就像在 Android 上一样

> ID：14019739
> 
> 赞同：2
> 
> 时间：2012-12-24T09:54:31.917
> 
> 标签：iphone, ios, slidingdrawer

有没有像 android 上那样滑动抽屉的现成示例。不是从左到右拆分视图或菜单滚动，我需要从下到上滑动抽屉。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:57:39.227

在这里你可以找到源代码，这可能会对你有所帮助

[https://github.com/crocodella/PullableView](https://github.com/crocodella/PullableView)

# memory-leaks - WebGL 内存泄漏

> ID：14019742
> 
> 赞同：1
> 
> 时间：2012-12-24T09:54:45.407
> 
> 标签：memory-leaks, textures, webgl, three.js

我知道有很多关于内存泄漏的话题，但我尝试了解决方案，但它仍然不起作用。

我正在研究这个[例子](http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html)

所以我有

```
materialPano=new THREE.MeshFaceMaterial( materials );
materialPano.needsUpdate=true;
mesh = new THREE.Mesh( new THREE.CubeGeometry( 400, 400, 400, 7, 7, 7 ), materialPano  ); 
```

当我单击按钮时，我正在添加一些功能来更改纹理。问题是之前的纹理没有被删除，并且每个新纹理使用的内存都增加了。

所以当我点击按钮时，它会执行一个函数：

```
materials = [loadTexture(myNewTexture1 ), loadTexture( myNewTexture2),loadTexture( myNewTexture3 ),loadTexture( myNewTexture4 ),loadTexture( myNewTexture5), loadTexture( myNewTexture6)]; 
```

`myNewTexureK`是随按钮更改的新图像文件。我更新了网格材料。

```
materialPano.materials=materials;
mesh.material=materialPano; 
```

问题是我不知道如何删除以前的纹理。我尝试了很多这样的事情：

```
for(var k=0;k<materials.length;k++){
    materials[k].deallocate();
    scene.remove(materials[k]);
    renderer.deallocateTexture(materials[k]);
    renderer.deallocateMaterial(materials[k]);
    renderer.deallocateObject(materials[k]);
    delete materials[k];
    materials[k]=null;
}
renderer.deallocateMaterial(materials);
renderer.deallocateObject(materials);
delete materials;
materials=null; 
```

我在这里`materials=[loadTexture(newTexture,...)];`

我改变了`loadTexture`这样的功能：

```
function loadTexture( path ) {

            var texture = new THREE.Texture( texture_placeholder );
            var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true } );

            var image = new Image();
            image.onload = function () {

                texture.needsUpdate = true;
                material.map.image = this;

                render();
            };

            image.src = path;

            texture.deallocate();//new line
            renderer.deallocateTexture( texture );//new line

            return material;

        } 
```

但它不会删除任何东西！[并且没有对示例](http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html)进行任何修改，我注意到当我刷新页面时，内存也增加了，所以示例中存在内存泄漏？

有没有办法真正删除纹理以避免内存泄漏？

非常感谢！

没人有解决办法吗？:(我编辑消息以尝试更准确。我有：

```
var mesh;

function loadTexture( path ) {

var texture = new THREE.Texture( texture_placeholder );
var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true } );

var image = new Image();
image.onload = function () {

    texture.needsUpdate = true;
    material.map.image = this;

    render();
};
image.src = path;

texture.deallocate();
renderer.deallocateTexture( texture );

return material;

}

function init(){
 //some initializations, create scene, webgl renderer, ...

 var materiales = [
loadTexture( '1.jpg' ), 
loadTexture( '2.jpg'),
loadTexture( '3.jpg' ),
loadTexture( '4.jpg' ),
loadTexture( '5.jpg'), 
loadTexture( '6.jpg' )
];

mesh = new THREE.Mesh( new THREE.CubeGeometry( 400, 400, 400, 7, 7, 7 ),new THREE.MeshFaceMaterial( materiales ) );
scene.add( mesh );
} 
```

当我点击一个按钮时，我会：

```
updateTexture(){

 var materiales = [
loadTexture( 'new1.jpg' ), 
loadTexture( 'new2.jpg'),
loadTexture( 'new3.jpg' ),
loadTexture( 'new4.jpg' ),
loadTexture( 'new5.jpg'), 
loadTexture( 'new6.jpg' )
];

 mesh.material=new THREE.MeshFaceMaterial( materiales );
} 
```

问题是每次点击时内存都会增加。只有那个代码，这是正常的，没有什么会删除以前的mesh.material。但我尝试了很多东西，比如：

```
mesh.deallocate(mesh.material);
mesh.geometry.deallocate(mesh.material);
scene.deallocate(mesh.material);
renderer.deallocateMaterial(mesh.material);
renderer.deallocateTexture(mesh.material);
renderer.deallocateObject(mesh.material);
scene.remove(mesh.material); 
```

而且内存还在增加。我确切地说我在 Firefox v 17.0.1 上工作。泄漏也出现在 Chrome 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:12:35.897

如果您使用的是 r51 - r53，请尝试添加 texture.deallocate()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:01:27.130

这是我对[http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html所做的修改](http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html)

[我从http://mrdoob.github.com/three.js/examples/canvas_geometry_panorama.html](http://mrdoob.github.com/three.js/examples/canvas_geometry_panorama.html)添加了 loadTexture 函数，这是执行 changeTexture() 函数的按钮。

```
<!DOCTYPE html>

<head>
<title>three.js webgl - equirectangular panorama demo</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style>
    body {
        background-color: #000000;
        margin: 0px;
        overflow: hidden;
    }

    #info {
        position: absolute;
        top: 0px; width: 100%;
        color: #ffffff;
        padding: 5px;
        font-family:Monospace;
        font-size:13px;
        font-weight: bold;
        text-align:center;
    }

    a {
        color: #ffffff;
    }
</style>
</head>
<body>

<div id="container"></div>
<div id="info"><a href="http://threejs.org" target="_blank">three.js webgl</a> - equirectangular panorama demo. photo by <a href="http://www.flickr.com/photos/jonragnarsson/2294472375/" target="_blank">Jón Ragnarsson</a>.<input id="changeTexture" type="button" value="Memory leak test" onclick="changeTexture();"> </div>

<script src="./build/three.min.js"></script>

<script>

    var idTexture='id1';

    var camera, scene, renderer;

    var fov = 70,
    texture_placeholder,
    isUserInteracting = false,
    onMouseDownMouseX = 0, onMouseDownMouseY = 0,
    lon = 0, onMouseDownLon = 0,
    lat = 0, onMouseDownLat = 0,
    phi = 0, theta = 0;

    var materialsT, materialPano;

    init();
    animate();

    function init() {

        var container, mesh;

        container = document.getElementById( 'container' );

        camera = new THREE.PerspectiveCamera( fov, window.innerWidth / window.innerHeight, 1, 1100 );
        camera.target = new THREE.Vector3( 0, 0, 0 );

        scene = new THREE.Scene();

        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        //put here your 6 textures, one per face. Of course, you can use the same texture for all the faces
        materialsT = [
            loadTexture( idTexture+'.jpg' ), 
            loadTexture( idTexture+'.jpg' ),
            loadTexture( idTexture+'.jpg'  ),
            loadTexture(idTexture+'.jpg' ),
            loadTexture( idTexture+'.jpg' ), 
            loadTexture( idTexture+'.jpg' )
        ];

        materialPano=new THREE.MeshFaceMaterial( materialsT );
        mesh = new THREE.Mesh( new THREE.CubeGeometry( 256, 256, 256, 7, 7, 7 ),materialPano );
        mesh.scale.x = -1;
        scene.add( mesh );

        container.appendChild( renderer.domElement );

        document.addEventListener( 'mousedown', onDocumentMouseDown, false );
        document.addEventListener( 'mousemove', onDocumentMouseMove, false );
        document.addEventListener( 'mouseup', onDocumentMouseUp, false );
        document.addEventListener( 'mousewheel', onDocumentMouseWheel, false );
        document.addEventListener( 'DOMMouseScroll', onDocumentMouseWheel, false);

        window.addEventListener( 'resize', onWindowResize, false );

    }

    function loadTexture( path ) {

        var texture = new THREE.Texture( texture_placeholder );
        var material = new THREE.MeshBasicMaterial( { map: texture, overdraw: true } );

        var image = new Image();
        image.onload = function () {

            texture.needsUpdate = true;
            material.map.image = this;

            render();

        };
        image.src = path;

        texture.deallocate();
        renderer.deallocateTexture( texture );

        return material;

    }

    function changeTexture(){

        idCourant=(idTexture=='id1')?'id2':'id1';

        //you can use the same texture, there is still the memory leak
        materialsT = [
            loadTexture( idTexture+'.jpg' ), 
            loadTexture( idTexture+'.jpg'),
            loadTexture( idTexture+'.jpg' ),
            loadTexture( idTexture+'.jpg' ),
            loadTexture( idTexture+'.jpg'), 
            loadTexture( idTexture+'.jpg' )
        ];

        materialPano.materials=materialsT;//without this line, I don't have memory leak but I can't change the texture. So it means that loadTexture doesn't have memory leak since the memory doesn't increase when I click on the button with only materialsT=[loadTexture(...),...] in the changeTexture() function.

        //I try with the following (put before materialPano.materials=materialsT; of course) to deallocate materialPano but it doesn't do anything
        /*
        renderer.deallocateTexture(materialPano.materials);
        renderer.deallocateMaterial(materialPano.materials);
        renderer.deallocateObject(materialPano.materials);

        renderer.deallocateTexture(materialPano);
        renderer.deallocateMaterial(materialPano);
        renderer.deallocateObject(materialPano);
        //*/

    }

    function onWindowResize() {

        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

    }

    function onDocumentMouseDown( event ) {

        event.preventDefault();

        isUserInteracting = true;

        onPointerDownPointerX = event.clientX;
        onPointerDownPointerY = event.clientY;

        onPointerDownLon = lon;
        onPointerDownLat = lat;

    }

    function onDocumentMouseMove( event ) {

        if ( isUserInteracting ) {

            lon = ( onPointerDownPointerX - event.clientX ) * 0.1 + onPointerDownLon;
            lat = ( event.clientY - onPointerDownPointerY ) * 0.1 + onPointerDownLat;

        }
    }

    function onDocumentMouseUp( event ) {

        isUserInteracting = false;

    }

    function onDocumentMouseWheel( event ) {

        // WebKit

        if ( event.wheelDeltaY ) {

            fov -= event.wheelDeltaY * 0.05;

        // Opera / Explorer 9

        } else if ( event.wheelDelta ) {

            fov -= event.wheelDelta * 0.05;

        // Firefox

        } else if ( event.detail ) {

            fov += event.detail * 1.0;

        }

        camera.projectionMatrix.makePerspective( fov, window.innerWidth / window.innerHeight, 1, 1100 );
        render();

    }

    function animate() {

        requestAnimationFrame( animate );
        render();

    }

    function render() {

        lat = Math.max( - 85, Math.min( 85, lat ) );
        phi = ( 90 - lat ) * Math.PI / 180;
        theta = lon * Math.PI / 180;

        camera.target.x = 500 * Math.sin( phi ) * Math.cos( theta );
        camera.target.y = 500 * Math.cos( phi );
        camera.target.z = 500 * Math.sin( phi ) * Math.sin( theta );

        camera.lookAt( camera.target );

        renderer.render( scene, camera );

    }

</script>
</body> 
```

我不知道如何以及在哪里使用 mesh.material.materials[ i ].map = texture; 纹理.needsUpdate = true; 正如你告诉我的。

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T10:32:22.160

解决了 webgl 版本的问题。

添加 ：

```
for(var k=0;k<materialsT.length;k++){
    renderer.deallocateTexture(materialsT[k].map);
    renderer.deallocateTexture(materialsT[k]);
    materialsT[k].deallocate();
    materialsT[k].map.deallocate();
} 
```

在 materialT=[ loadTexture(...), ...]. 之前的 changeTexture 函数中，和

```
texture.deallocate();
renderer.deallocateTexture( texture ); 
```

在返回之前的 loadTexture 函数中。

但是，画布版本仍然存在泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:27:00.057

抱歉，久等了。你可以在这里测试代码：http: [//jodyj.com/test/](http://jodyj.com/test/) 有canvas版本和webgl版本。只需单击按钮即可查看内存增加（例如在进程窗口中）。

对于画布版本，内存泄漏出现在 Firefox 和 Chrome 而不是 IE 上。对于 webgl 版本（不是 IE），Firefox 和 Chrome 存在内存泄漏。我对代码进行了注释，并指出了哪一行造成了泄漏（materialPano.materials=materialsT; ）。我在网格、材料上使用 deallocate 函数进行了测试，但它并没有改变任何东西。

谢谢！

# python - 从某个位置打开文件并获取其文本

> ID：14019746
> 
> 赞同：-2
> 
> 时间：2012-12-24T09:55:35.490
> 
> 标签：python, python-2.7

我在某个位置（当前位于 C:\dropbox）中有一个文件“Reference.txt”，我试图从该位置打开它并获取其内容，“Reference.txt”的内容只是一个词，如“E4567ABCDE16220 .1"，我需要使用以下方法获取这些数据，任何人都可以提供有关如何完成此操作的输入吗？

```
file="Reference.txt" 
pL="ab1234"

def location(file,pL):
    if pL is 'ab1234':
        file = open('C:\dropbox\' + file,'r')
        print file
    else:
        file = open('C:\dropbox\' + pL + file,'r')

def main ():
    data=location(file,pL)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:11:31.380

您的问题源于您如何在`C:\Dropbox\`. 当您使用 a`\`时，它充当转义字符以将下一个字符从其字面意义中转义。因此，如果您想使用双引号创建一个字符串，该字符串本身包含双引号，您需要转义字符串中的所有双引号。
例如：

假设您想将字符串保存在变量中`Alice told Bob "Mallory knows what we're up to"`。
如果你把它放在一个字符串中，如下所示：

```
myStr = "Alice told Bob "Mallory knows what we're up to"" 
```

然后 Python 认为`"Alice told Bob "`是一个字符串，然后不知道那里`Mallory knows what we're up to`在做什么。因此，翻译会抱怨。

为了理解双引号是字符串本身的一部分，您应该将它们转义如下：

```
myStr = "Alice told Bob \"Mallory knows what we're up to\"" 
```

但是如果你想要 a`\`作为你的字符串的一部分会发生什么呢？
然后你需要`\`用另一个来逃避`\`：

```
myStr = "this is a backslash: \\" 
```

因此，当您尝试 open 时`"C:\Dropbox\somefile"`，python 将其解释为具有两个转义序列：`\D`and `\s`，替换该字符串中这些转义序列的值并尝试打开结果文件名，该文件名在您的文件系统中不存在。要正确避免这种情况，您应该执行以下操作：

```
myfile = open("C:\\Dropbox\\somefile.txt") 
```

但是，有时这可能难以阅读。因此，您可能希望使用原始字符串（以 为前缀`r`）。原始字符串不会替换字符串中的转义序列：

```
myfile = open(r"C:\Dropbox\somefile.txt") 
```

因此，`r"C:\Dropbox\somefile.txt"`等价于`"C:\\Dropbox\\somefile.txt"`

关于您正在做的事情的另一条评论：在将文件`os.path.join`路径的各个部分连接在一起时，您应该真正使用。而你会做

```
 myfile = open('C:\\dropbox\\' + pL + file,'r') 
```

你真的应该做

```
 myfile = open(os.path.join("C:\\dropbox", pL, filename),'r') 
```

最后一点：
不要命名您的变量`file`或`str`或`list`或实际上任何其他内置类型 - 这会扰乱解释器的行为并在未来产生不需要的结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T09:59:45.747

不要用于测试是否相等*；*`is`改为使用`==`。`is`测试对象*身份*，这是一个完全不同的鱼壶。

使用该[`os.path.join()`函数](http://docs.python.org/2/library/os.path.html#os.path.join)构建路径。`r''`并对包含反斜杠的路径使用原始字符串，将反斜杠`\`加倍或使用正斜杠（），在python字符串中表示“在此处的字符串中插入文字字符”，当您真正想要的是*关闭*时，这不起作用而是字符串。`\``\\``/``\'``'`

 *```
import os.path

def location(filename, pL):
    if pL == 'ab1234':
        filename = os.path.join(r'C:\dropbox', filename)
    else:
        filename = os.path.join(r'C:\dropbox', pL, filename)
    with open(filename, 'r') as f:
        return f.read() 
```

`open()`仅*打开*文件，要获取数据，您还需要调用`.read()`打开的文件。由于`file`已经是内置名称，所以最好不要将其用作变量，所以我在上面的代码中对其进行了重命名。最后但并非最不重要的一点是，通过使用`with`构造，当我们读取数据并从函数返回它时，文件对象将自动关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:45:21.760

您需要阅读文件的内容，您可以这样做：

```
file="Reference.txt" 
pL="ab1234"

def location(file,pL):
    if pL == 'ab1234':
        file = open('C:\dropbox\' + file,'r')
    else:
        file = open('C:\dropbox\' + pL + file,'r')

    return file.readlines()

def main ():
    data=location(file,pL)
    print data

if __name__ == '__main__':
    main() 
```

要阅读文件的内容，您可以根据需要在对象上使用, `read()`, `readline()`。Google应该可以帮助您`readlines()``file`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T19:14:09.270

以下修复了问题

```
import os.path

def location(filename, pL):
    if pL == 'ab1234':
        filename = os.path.join(r'C:\dropbox', filename)
    else:
        filename = os.path.join(r'C:\dropbox', pL, filename)
    with open(filename, 'r') as f:
        return f.read() 
```*

# java - 如何将两个列表字符串组合成一个列表

> ID：14019751
> 
> 赞同：3
> 
> 时间：2012-12-24T09:56:08.340
> 
> 标签：java, list, collections

我有两个不同的列表字符串，

```
List<String> A= [1,2,3,4]; 
List<String> B= [1,2,5,6]; 
```

我想合并两个列表，在列表中的新列表字符串 C = new Arraylist ();

如何组合两个列表字符串，例如：

```
 C = [1,2,3,4,5,6]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T09:57:34.857

使用[Collection.addAll()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#addAll%28java.util.Collection,%20T...%29)和[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)删除重复项并保持结果排序。

```
Set<String> c = new TreeSet<String>(a); //create a Set with all the elements in a
c.addAll(b); //add all the elements in b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T09:58:33.097

这将使它们结合在一起

```
combined = new ArrayList<String>();
combined.addAll(A);
combined.addAll(B); 
```

这将获得唯一的

```
List<String> uniques = new ArrayList<String>(new HashSet<String>(combined)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-24T10:27:13.827

像这样做 ：

```
listOne.removeAll(listTwo);
listTwo.addAll(listOne);
Collections.sort(listTwo); 
```

如果不想对其进行排序，可以删除第三行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T09:57:26.507

有两种方法可以合并两个列表的结果：使用`List#addAll`或`Set#addAll`。两者之间的主要区别在这里进行了大量解释：[Set 和 List 有什么区别？](https://stackoverflow.com/q/1035008/1065197)

根据您的要求，您应该合并两个列表，而无需使用`Set`

```
List<String> lstA = new ArrayList<String>();
lstA.add("1");
lstA.add("2");
lstA.add("3");
lstA.add("4");
List<String> lstB = new ArrayList<String>();
lstA.add("1");
lstA.add("2");
lstA.add("5");
lstA.add("6");
Set<String> lstC = new LinkedHashSet<String>();
lstC.addAll(A);
lstC.addAll(B);
List<String> lstAB = new ArrayList(lstC); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T09:59:12.283

A 和 B 的声明似乎是错误的。

但是，给定两个列表 A 和 B，要将它们组合成 C，您可以使用以下代码： C.addAll(A); C.addAll(B);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-24T10:00:58.643

```
List<String> A= new ArrayList<String>();
List<String> B= new ArrayList<String>();

Set<String> set = new TreeSet<String>(A);
set.addAll(B);
System.out.println(new ArrayList<String>(set)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-24T10:02:07.993

```
 Set<String> set = new TreeSet<String>(A); // for keeping the output sorted else you can also use java.util.HashSet
  set.addAll(B);
  List<String> finalList = new ArrayList<String>(set); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-24T10:08:22.610

要获得`List<String>`排序顺序，请使用这段代码

```
 String a[] = {"1","2","3","4"};
    String b[] = {"1","2","5","6"};
    List<String> A= Arrays.asList(a); 
    List<String> B= Arrays.asList(b); 

    Set<String> CTemp = new TreeSet<>();  
    CTemp.addAll(A);
    CTemp.addAll(B);

    List<String> C = new ArrayList<>(CTemp); 
```

# scope - 如何让 ng-disabled 指令在隔离范围内工作

> ID：14019752
> 
> 赞同：14
> 
> 时间：2012-12-24T09:56:25.997
> 
> 标签：scope, angularjs

最近我必须让 Input 元素同时使用 ng-disabled 和自定义指令，它使用隔离范围来评估表达式，就像 ng-disabled 正在做的那样，不知何故，自定义指令可以正常工作，但 ng-disabled 不能，因为它只评估孤立范围内的表达式。

自定义指令非常简单，例如：

```
angular
  .module('directives', [])
  .directive('conditionalAutofocus', function () {
    return {
        restrict:'A',
        scope:{
            condition:'&conditionalAutofocus'
        },
        link:function (scope, element, attrs) {
            if (scope.condition()) {
                attrs.$set('autofocus','true');
            }
        }
    }
}); 
```

而页面看起来像：

```
<input name="pin"
       ng-model="pin"
       type="password"
       required
       ng-disabled="names == null"
       conditional-autofocus="names != null" /> 
```

有人已经有这个问题的解决方案了吗？

提前致谢！雅尼

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-20T13:51:46.543

我有同样的问题，最简单的解决方案恕我直言。就是利用隔离作用域继承ngDisabled的属性。

```
angular.module('directives', [])
.directive('conditionalAutofocus', function () {
    return {
        restrict:'A',
        scope:{
            condition:'&conditionalAutofocus',
            disabled:'=ngDisabled'
        },
        link:function (scope, element, attrs) {
            if (scope.condition()) {
                attrs.$set('autofocus','true');
            }
            if(scope.disabled){
                //is disabled
            }
        }
    }
}); 
```

**可能只适用于限制：'E'。没有测试过其他人**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T08:22:03.220

我最近遇到了类似的问题。我想禁用孤立范围内的按钮并使用这个漂亮的角度`ng-disabled`指令。经过一番挖掘，我得出了这样的解决方案：

```
link: function($scope, element, attrs){

    $scope.$parent.$watch(attrs.ngDisabled, function(newVal){
        element.prop('disabled', newVal);
    });

    //...
} 
```

要评估`ng-diabled`表达式，而不是`$scope`仅仅跳转到`$scope.$parent`，您的所有变量都将可用。不幸的是，需要手动设置 disabled 属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T03:08:32.097

好的，对于我自己的情况，我的解决方案是更改指令的实现，不再使用隔离范围：

```
angular.module('directives', [])
.directive('conditionalAutofocus', function () {
    return {
        restrict:'A',
        link:function (scope, element, attrs) {
            scope.$watch(attrs.conditionalAutofocus, function(){
                if (scope.$eval(attrs.conditionalAutofocus)) {
                    element.focus();
                }else{
                    element.blur();
                }
            });
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-14T19:59:38.363

您可以在隔离范围定义中设置与父范围的双向绑定。然后在隔离范围属性上添加一个监视。这只是复制了 ngReadonly 指令中的代码。

```
angular.module('directives', [])
.directive('conditionalAutofocus', function () {
    return {
        restrict:'A',
        scope:{
            condition: '&conditionalAutofocus',
            isReadonly: '=ngReadonly'
        },
        link:function (scope, element, attrs) {
            if (scope.condition()) {
                attrs.$set('autofocus','true');
            }

            scope.$watch('isReadonly', (value) => {
                attrs.$set('readonly', !!value);
            });
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-08T19:00:58.643

您不需要其他答案的任何复杂性。问题是您的指令甚至不知道 wtf ng-Disabled 是。如果您想在模板中使用 ng-Disabled，则必须将其注入您的范围或需求中。例如，这**将**不起作用：

```
.directive('myDirective', function () {
    return {
        restrict: 'E',
        template: '<input type="text" ng-disabled="fieldDisabled" />',
        scope:{ something: '=' },
        link: function (scope, element, attrs) {
            scope.something = attrs.something;
        },
        controller: function($scope) {
            $scope.fieldDisabled = false;
            $scope.myAction = function() {
                $scope.fieldDisabled = true;
            };
        }
    }
}); 
```

但以下**将**起作用：

```
.directive('myDirective', function () {
    return {
        restrict: 'E',
        template: '<input type="text" ng-disabled="fieldDisabled" />',
        scope:{ something: '=', lol: '=ngDisabled' },
        link: function (scope, element, attrs) {
            scope.something = attrs.something;
        },
        controller: function($scope) {
            $scope.fieldDisabled = false;
            $scope.myAction = function() {
                $scope.fieldDisabled = true;
            };
        }
    }
}); 
```

请注意，唯一的变化是`lol: '=ngDisabled'`. 这使它起作用，因为现在您的指令知道 ngDisabled 是什么。您不必使用`lol`或进行任何其他特殊接线。您现在可以像使用任何其他控制器一样使用您自己的变量来使用您的控制器。

# mysql - 将数据加载到MySql中的表时如何获取成功和失败插入的计数？

> ID：14019755
> 
> 赞同：0
> 
> 时间：2012-12-24T09:56:41.303
> 
> 标签：mysql, sql-loader

我正在使用 LOAD 函数将数据从文件加载到表中。我想知道插入表的成功和失败计数。此外，一旦我们遇到故障，加载过程将停止或继续进一步加载会发生什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:11:28.503

我怀疑你在谈论 LOAD DATA INFILE。如果是这样，这是它的文档：http: [//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

基本上，如果指定了 LOCAL，则所有错误都被视为应用了 IGNORE，这意味着它们将转换为警告。如果未指定 LOCAL，则在重复唯一键值时会发生错误，但对于其余错误，则会发出警告。如果发生错误，文件的其余部分将被忽略，并且从那里导入失败。

根据您正在操作的 sql_mode、数据类型等，可能会出现其他错误。

最后，您可以获得带有 SHOW WARNINGS 的警告（错误）列表。这应该提供有关失败和成功的信息。

# javascript - var = var && "*" 在 Javascript 中是什么意思

> ID：14019756
> 
> 赞同：5
> 
> 时间：2012-12-24T09:56:44.203
> 
> 标签：javascript

我试图通过阅读它来解决一些混淆的代码，我做得很好，直到遇到这个：

```
a = a && "*" 
```

现在我对 Javascript 还是很陌生，这些缩短的不常见的 javascript 代码对我来说仍然很陌生，这是我第一次遇到它们。

有人知道这是做什么的吗？我在刚刚返回 * 的 javascript 代码测试器广告中尝试过它，所以我不知道。

另外，如果有人知道我在哪里可以找到这些不常见的代码行的作用，那将非常有帮助。它们都被缩短了，就像这样的东西

```
a = a || b 
```

（我知道那个是做什么的）

但是，如果这种 javascript 有某种名称或我可以查看的参考资料，那将非常有帮助，我已经在 Google 上搜索了几个小时。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T10:03:36.217

如果`a`为真，则分配`"*"`给`a`。

如果`a`是假的，它保持不变。

* * *

`&&`具有短路语义：复合表达式`(e1) && (e2)`——where`e1`和`e2`是任意表达式本身——计算为

*   `e1`如果在布尔上下文中`e1`计算为 false—***不***计算`e2`
**   `e2`如果`e1`在布尔上下文中计算为真*

 *这并不***意味着***or`e1`和`e2`整个表达式`(e1) && (e2)`需要评估为真或假！

在布尔上下文中，以下值`false` [**根据规范**](http://es5.github.com/x9.html#x9.2)计算：

*   空值
*   不明确的
*   ±0
*   钠
*   错误的
*   空字符串

考虑所有^(1 个)其他值`true`。

上述值被简洁地称为“虚假”，其他值被称为“真实”。

**应用于您的示例**：`a = a && "*"`

根据上述对 的短路求值规则`&&`，表达式求值为`a`if`a`为*falsy*，然后依次赋值给`a`，即语句简化为`a = a`。

但是，如果`a`为*真*，则右侧的表达式的计算结果为`*`，而后者又被分配给`a`。

* * *

**至于你的第二个问题**：`(e1) || (e2)`具有相似的语义：

整个表达式的计算结果为：

*   `e1`如果`e1`是真的
*   `e2`如果`e1`是假的

^(¹ [例外](https://stackoverflow.com/questions/10348995/al))*

# c++ - 为什么我的文件是空的？

> ID：14019757
> 
> 赞同：0
> 
> 时间：2012-12-24T09:56:48.760
> 
> 标签：c++, ifstream, ofstream

为什么我的文件 'database2' 是空的并且没有文件被重命名？在注释中说明问题的部分之后，文件“database2”变为 0 字节。文件“database2”也没有被重命名，文件“database”也没有被删除。请帮助我，这是我的代码的一部分：

```
int edit(){
    char KeyStroke;
    std::string strings;
    string name;
    string name1;
    std::string dummy;
    std::string strings2;
    std::string strings3;
    ifstream myfile;
    ofstream myfile1;
    bool found = false;

    myfile.open("database");
    cout << endl << "What is the name of the contact you wish to go in detail?" << endl;
    getline(cin, name);
    while ( !found && getline (myfile ,strings) ) {
        if (strings.find(name) != std::string::npos) {
            cout << endl << "Name:\t\t" << strings<<endl;
            std::getline( myfile, strings );
            cout << "Address:\t" << strings<<endl;
            std::getline( myfile, strings );
            cout << "Handphone:\t" << strings;
        }
    }

    start:
    cout << endl <<endl;
    cout << "What do you wish to edit?"<<endl;
    cout << "1) Name"<<endl;
    cout << "2) Address"<<endl;
    cout << "3) Handphone"<<endl;
    cout << "4) Nothing" << endl;
    myfile.close();

/*--Main part of this code is from here onwards--*/

    lol:
    myfile.open("database");
    myfile1.open("database2");
    KeyStroke = getch();
    switch(KeyStroke){
        case '1':
            cout << "What is the new name: ";
            getline(cin, name1);
            while ( !myfile.eof()) {
                getline (myfile ,strings);
                if (strings.find(name) != std::string::npos) {
                    myfile1 << name1 << endl;
                }
                else{
                    if(strings[0] == ' '){
                        continue;
                    }
                myfile1 << strings << endl;
                }
            }
        myfile1 << " ";
        myfile1.close();        /*Once the file closes here, the data written in earlier dissapears*/
        myfile.close();
        remove("database");
        pause1();
        rename("database2","database");
        goto start; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T11:39:05.160

这是正在发生的事情：

你有一个“循环”，带有“开始”标签和最后的 goto。所以这将是循环的第一部分：

```
 cout << endl <<endl;
    cout << "What do you wish to edit?"<<endl;
    cout << "1) Name"<<endl;
    cout << "2) Address"<<endl;
    cout << "3) Handphone"<<endl;
    cout << "4) Nothing" << endl;
    myfile.close();

/*--Main part of this code is from here onwards--*/

    lol:
    myfile.open("database");
    myfile1.open("database2");
    cin.get (&KeyStroke,256); 
```

请参阅循环的第一部分，您打开/创建两个名为“database”和“database2”的文件（请注意，如果文件不存在，ofstream open 方法会创建该文件），然后等待用户输入。

假设用户按 1 来更改名称，在 case 1 语句的末尾你有这个：

```
 myfile1 << " ";
        myfile1.close();        /*Once the file closes here, the data written in earlier dissapears*/
        myfile.close();
        remove("database");
//      pause1(); // undefined
        rename("database2","database");
        goto start; 
```

您关闭文件，删除数据库，并将 databese2 重命名为数据库，它按预期工作，然后使用 goto 返回“循环”的开头，这再次执行这部分代码：

```
cout << endl <<endl;
cout << "What do you wish to edit?"<<endl;
cout << "1) Name"<<endl;
cout << "2) Address"<<endl;
cout << "3) Handphone"<<endl;
cout << "4) Nothing" << endl;
myfile.close();

lol:
myfile.open("database");
myfile1.open("database2"); 
```

您打开数据库文件，因为您将旧的 database2 重命名为 database（database2 现在不存在），它会创建一个新的（当然是空的）。

希望能帮助到你。

# ios - IOS-viewheaderInSection in AQGridView

> ID：14019759
> 
> 赞同：1
> 
> 时间：2012-12-24T09:56:58.010
> 
> 标签：ios, aqgridview

我在 AQGridView 中插入第 2 部分，[就像这个 url image 一样](http://mocku.ps/qb6o64)。如果您看到 url 图片，现在我可以正常工作 AQGridView 中的所有数据，

当我向下滚动 AQGridView 时，我想要第 1 部分：图像将滚动到第 2 部分：第 2 部分将停止，如果您仍然滚动 AQGridView 第 3 部分：数据将滚动（将第 2 部分保持在顶部）。

如果使用 uitable i 使用函数：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

但在 AQGridView 我不知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:38:42.577

```
gridView.gridHeaderView = YOUR_VIEW_HEADER; 
```

# eclipse-jdt - JDT 搜索引擎抛出 NullPointerException

> ID：14019761
> 
> 赞同：3
> 
> 时间：2012-12-24T09:57:02.437
> 
> 标签：eclipse-jdt

我正在尝试使用 JDT SearchEngine 来查找对给定对象的引用。但是在调用 org.eclipse.jdt.core.search.SearchEngine 的“搜索”方法时，我得到了一个“NullPointerException”。

以下是错误跟踪：

> java.lang.NullPointerException at org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:214) at org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:515 ) 在 org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:582)

以下是我用来执行搜索的方法：

```
private static void search(String elementName) { //elementName -> a method Name
        try {
            SearchPattern pattern = SearchPattern.createPattern(elementName, IJavaSearchConstants.METHOD,
                    IJavaSearchConstants.REFERENCES, SearchPattern.R_PATTERN_MATCH);

            IJavaSearchScope scope = SearchEngine.createWorkspaceScope();

            SearchRequestor requestor = new SearchRequestor() {
                @Override
                public void acceptSearchMatch(SearchMatch match) {
                    System.out.println("Element - " + match.getElement());
                }
            };

            SearchEngine searchEngine = new SearchEngine();
            SearchParticipant[] searchParticipants = new SearchParticipant[] { SearchEngine
                    .getDefaultSearchParticipant() };
            searchEngine.search(pattern, searchParticipants, scope, requestor, null);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

请参阅以下快照的“变量”窗口以检查传递给“searchEngine.search()”的参数值：

![在此处输入图像描述](../Images/5f7678d8dfadbe445783b411c97b175d.png)

我认为问题在于“范围”的价值[在上面的“黑色”中突出显示]。这意味着“SearchEngine.createWorkspaceScope()”在这种情况下不会返回预期值。

**注意：**请注意，这是我的程序的一部分，它作为独立的 java 程序（不是 eclipse 插件）运行，使用 JDT API 来解析给定的源代码（使用 JDT-AST）。

在这种情况下（非eclipse插件程序）是否可以使用JDT SearchEngine，或者这个问题是由于其他原因造成的？非常感谢您对此的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T18:19:19.097

不可以。如果不打开工作区，您将无法使用搜索引擎。原因是 SearchEngine 依赖于 eclipse 文件系统抽象（`IResource`、`IFile`、`IFolder`等）。这仅在工作区打开时可用。

# java - Java 的 ImageIO.read() 返回空值

> ID：14019770
> 
> 赞同：0
> 
> 时间：2012-12-24T09:57:34.983
> 
> 标签：java, android, image, javax.imageio

所以我尝试从一个字节数组创建一个图像，但我无法弄清楚为什么 ImageIO.read() 方法返回一个空指针，没有任何异常。

```
@Override
public int setParam(byte[] buffer) {
    mFlag = buffer[0];  //TODO
    mX = Convertor.convert2BytesToInt(buffer[1], buffer[2]);
    mY = Convertor.convert2BytesToInt(buffer[3], buffer[4]);    
    mWidth = Convertor.convert2BytesToInt(buffer[5], buffer[6]);
    mHeight = Convertor.convert2BytesToInt(buffer[7], buffer[8]);
    mLength = Convertor.convert4BytesToInt(buffer[9], buffer[10], buffer[11], buffer[12]);

    byte[] bufferpix = Arrays.copyOfRange(buffer, 13, 13+mLength);
    ByteArrayInputStream in = new ByteArrayInputStream(bufferpix);
    try {
        mImage = ImageIO.read(in);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return 13+mLength;
}

@Override
public void draw(Graphics2D g, ArrayList<Color> palette) {
    System.out.print("Draw Image\n");
    g.drawImage(mImage, mX, mY, mWidth, mHeight, null);
} 
```

缓冲区似乎没问题，它包含数据 RGBA（每个 1 个字节，因此每个像素 4 个字节）。你觉得这种用法有什么问题吗？谢谢

顺便说一句，如果你想知道，这个缓冲区以前是由 Android 类 Bitmap 创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:36:55.817

我没有使用正确的方法：

```
 int[] bufferpix = new int[mLength];
    for(int i=0; i<mLength;i++){
        bufferpix[i] = buffer[i+13];
    }
    mImage = new BufferedImage(mWidth, mHeight, BufferedImage.TYPE_4BYTE_ABGR_PRE);
    mImage.getRaster().setPixels(0, 0, mWidth, mHeight, bufferpix); 
```

这正确地填充了我的图像。太糟糕了，setPixels 不能将字节数组作为参数，这使得转换变得丑陋（我还没有寻找更好的方法将字节数组复制到 int 数组中，可能有一个）。

# iphone - 使用 iPhone 创建约会并检测碰撞

> ID：14019771
> 
> 赞同：1
> 
> 时间：2012-12-24T09:57:35.770
> 
> 标签：iphone, mysql, ios, appointment

我尝试为 iPhone 创建一个应用程序，您可以在其中设置约会。一切都保存到 MySQL 数据库中，我目前通过 JSON 将数据获取到我的应用程序中。这是一个工作流程

1.  User1 定义他工作的时间。例如上午 8 点至下午 4 点。
2.  用户 2 想与用户 1 约会，例如上午 8 点到上午 9 点。

当当前没有约会时，可以保存。如果已经有一个，例如 8.15am - 8.45am，则会显示错误。

你能给我一个提示吗？我正在考虑一个带有 NSDate“startDate”和“endDate”的类，但我不确定如何**检测这些约会冲突。**

非常感谢，每一个提示都表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:09:50.277

符合以下条件的任命有效：

*   约会在用户的工作时间内；和

*   它不会与现有任命发生冲突，这可能以三种可能的方式发生：

    *   冲突预约在新预约期间开始；和/或

    *   冲突预约在新预约期间结束；或者

    *   冲突约会在新约会之前开始，在新约会之后结束。

您可以使用以下行在纯 SQL 中查询此内容：

```
SELECT EXISTS (
  SELECT *
  FROM   appointments a JOIN workhours h USING (user_id)
  WHERE  user_id = 1
     AND h.start <= '08:00:00' AND h.end >= '09:00:00'
     AND (
               a.start BETWEEN '08:00:00'  AND  '09:00:00'
           OR  a.end   BETWEEN '08:00:00'  AND  '09:00:00'
           OR (a.start < '08:00:00' AND a.end > '09:00:00')
         )
  LIMIT  1
) 
```

请注意在事务中使用锁定读取来执行此`SELECT`操作，以防止并发问题。

# gwt - 注释中消息的 GWT 验证框架国际化

> ID：14019777
> 
> 赞同：1
> 
> 时间：2012-12-24T09:57:59.227
> 
> 标签：gwt, internationalization, gwt-validation

阅读[此页面](http://code.google.com/p/gwt-validation/wiki/GWT_INTERNATIONALIZATION)后，我找到了一种国际化验证消息的方法。这是通过将每种错误类型的翻译放入`ValidationMessages.properties`文件中来完成的。

```
javax.validation.constraints.Size.message=The property must be between {min} and {max}
javax.validation.constraints.NotNull.message=The property must not be null 
```

它是特定于错误类型的，它不是我在我的应用程序中需要的。我需要为经过验证的 bean 中的每个字段提供唯一的消息。在没有国际化的情况下，可以使用注释来完成。

```
@Pattern(regexp = UiLogicUtils.EMAIL_REGEX, message = "Email is invalid.")
private String requesterEmail; 
```

那么，如何仅针对该特定字段翻译“电子邮件无效”文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:34:56.917

我不知道这是否是答案，因为我没有使用过@Pattern，但是在文档中，它说@Pattern 的消息字段不是文本，而是消息文件的键。看这里：

[http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Pattern.html#message](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/Pattern.html#message) ()

默认情况下 message="{javax.validation.constraints.Pattern.message}" 看起来像 ValidationMessages.properties 文件中的有效键。我想你只需要指定一个自定义键并使用它。

# javascript - 所有事件的单个事件处理程序 javascript/jQuery

> ID：14019780
> 
> 赞同：8
> 
> 时间：2012-12-24T09:58:33.217
> 
> 标签：javascript, jquery, html, events

我知道我可以让一个处理程序使用 jQuery 处理多个事件，例如：

```
$('#myID').bind('blur mousedown mouseup focus', function (e) {} 
```

此外，我可以使用 jQuery 从所有元素中注册一个事件，例如：

```
$(document).on("click", "*", function(event) {
    console.log("Click");
}); 
```

我有两个问题：

1.  如何在纯 javascript 中为多个事件注册单个侦听器？

2.  有没有办法使用 JS 或 jQuery 为文档中的所有事件提供单个处理程序，例如将事件委托给我的其他处理程序的主处理程序？

我正在看这样的东西：

```
$(document).on("*", "*", function(event) {
    console.log("I am the master handler...");
    // call delegates
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T11:12:55.170

这是我可以通过 javascript 获得的最接近的值：**[JSBIN-Demo](http://jsbin.com/odolog/3/edit)**

```
<input type="text" id="myText" />

var allEvents = ['focus','blur','mouseover','mousedown','mouseup','mousemove', 'click'];

function masterHandler(){
    var event = event || window.event;
    switch(event.type){
        case 'click':
            console.log('cliked');
            break;
        case 'mouseover':
            console.log('mouseover');
            break;
    }
}

function bindAllEvents(selector, handler) {
    var elements = document.querySelectorAll(selector);
    for(var i=0;i<elements.length;i++){
        for (var key in allEvents){
            elements[i].addEventListener(allEvents[key], handler, false);
        }
    }
}

bindAllEvents('*', masterHandler); 
```

# java - Struts2 - SessionMonitor - 页面没有正确重定向

> ID：14019782
> 
> 赞同：0
> 
> 时间：2012-12-24T09:58:41.953
> 
> 标签：java, jsp, servlets, struts2, struts

我已经开发了 struts2 web 应用程序。我需要做会话监视器。如果用户没有登录系统/或会话超时，自动需要重定向到登录页面。

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>

    <filter>
        <filter-name>SessionMonitor</filter-name>
        <filter-class>com.xont.tracker.security.filters.ApplicationSessionMonitor</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>SessionMonitor</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <description>This listener class will listen to user session and assigns session for 30 minutes </description>
        <listener-class>com.xont.tracker.listeners.SessionListener</listener-class>
    </listener>

    <listener>
        <description>This listener class will listen for context listeners </description>
        <listener-class>com.xont.tracker.listeners.ContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>401</param-name>
        <param-value>Not Authorized</param-value>
    </context-param>

    <context-param>
        <param-name>401:timeout</param-name>
        <param-value>Your session timed out. Please login again</param-value>
    </context-param>

    <context-param>
        <param-name>300</param-name>
        <param-value>You don't have permission to access the page</param-value>
    </context-param>

    <context-param>
        <param-name>403</param-name>
        <param-value>You must login to continue</param-value>
    </context-param>

    <error-page>
        <error-code>404</error-code>
        <location>/error_pages/error_404.jsp</location>
    </error-page>

    <error-page>
        <exception-type>java.lang.Exception</exception-type>
        <location>/error_pages/unexpected_error.jsp</location>
    </error-page>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>login.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

这是我的 ApplicationSessionMonitor

```
 public class ApplicationSessionMonitor extends ApplicationMonitor {
        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain) throws IOException, ServletException {
        try {
            HttpServletRequest request = (HttpServletRequest) servletRequest;
            HttpSession session = request.getSession();
            Object user = session.getAttribute("loged-user");

            if (user == null) {
                buildTempPath(session, requestedPath(request));
                ((HttpServletResponse) servletResponse).sendRedirect(contextPath);
            } else {
                goAhead(servletRequest, servletResponse, chain);
            }
        } catch (Exception e) {
            e.printStackTrace();;
        }
    }
} 
```

这是我的 struts.xml

```
<package name="default" extends="struts-default" namespace="/">
    <action name="login" class="com.xont.tracker.login.action.LoginAction">
        <result name="success" type="redirect">index.jsp</result>
        <result name="temp_url" type="redirect">${temp_url}</result>
        <result name="error">login.jsp</result>
        <result name="input">login.jsp</result>
    </action> ..... 
```

总是这么说`The page isn't redirecting properly`。它无法正确重定向。请任何人指导我有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:34:09.007

我无法帮助您调试应用程序监视器，但是如果您使用的是 Struts2，为什么不使用 Struts2 组件，例如[Interceptors](http://struts.apache.org/2.x/docs/interceptors.html)（也基于拦截过滤器技术）？

我已经编写了一个拦截器来完全按照您的描述进行操作，请随时[阅读这篇文章](http://andrealigios.blogspot.it/2012/08/struts2-write-your-own-interceptor-for.html)。

希望有帮助

# jquery - 重新开始旋转角度

> ID：14019784
> 
> 赞同：0
> 
> 时间：2012-12-24T09:58:44.573
> 
> 标签：jquery, rotation, autorotate, image-rotation

我正在使用 Jquery Rotate Plugin 来旋转图片并保存它的新旋转角度。当有人重新开始旋转这张图片时，我想以相同的角度重新开始，但旋转停止在它的原点，并且不会像我旋转它一样循环。

谢谢你的帮助:)

```
var anglestop = 0;
$('.rotate').click(function() {
    var rotation = function (){

    $('#image').rotate({
      angle:anglestop,           
      animateTo:360, 
      duration: 3000,
      callback: rotation,
      easing: function (x,t,b,c,d){
        return c*(t/d)+b;       
    },
      bind: {
        click: function(){
          $(this).stopRotate();
          anglestop=$(this).getRotateAngle();
      }}
     });
  }

  rotation();  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:23:34.507

看一下这个：

```
var anglestop = 0;
var rotating = false;

function toggleRotate(event) {
    if (event && event.type == "click") {
        if (rotating) {
            $(this).stopRotate();
            anglestop = $(this).getRotateAngle();
            rotating = false;
            return;
        }
    } else {
        anglestop = 0;
    }        

    $(this).rotate({
      angle:anglestop,           
      animateTo:360,
      duration: 3000 * (360 - anglestop) / 360,
      easing: function (x,t,b,c,d){
        return c*(t/d)+b;       
      },
      callback: toggleRotate
    });
    rotating = true;
}

$("#image").click(toggleRotate); 
```

这是[工作示例](http://jsfiddle.net/beradrian/cc4Yx)。

# jquery - 将 JS 数组传递给 MVC 控制器动作

> ID：14019786
> 
> 赞同：3
> 
> 时间：2012-12-24T09:58:51.117
> 
> 标签：jquery, asp.net-mvc, json

在我的页面中，我有一些输入供用户输入值，然后我将获取所有值并将它们发送到服务器。现在我可以获取值并如下所示显示它们：

```
Cylinder: 0.00    Sphere: 0.00    Quantity:1
Cylinder: -0.25    Sphere: 0.00    Quantity:2
Cylinder: -0.50    Sphere: 0.00    Quantity:33
Cylinder: -0.75    Sphere: 0.00    Quantity:2
Cylinder: -1.00    Sphere: 0.00    Quantity:2
Cylinder: -1.25    Sphere: 0.00    Quantity:33
Cylinder: -1.50    Sphere: 0.00    Quantity:4
Cylinder: -1.75    Sphere: 0.00    Quantity:5
Cylinder: -2.00    Sphere: 0.00    Quantity:4 
```

但我不知道如何让他们采取行动进行保存。我正在使用mvc。

在视图中，我编写了以下 JavaScript：

```
 var orderModel={};
 $(".bulkOrderNumericInput").each(function (index,element) {
        if ($(this).val().length!=0) {
            orderModel[i]={Cylinder:$(this).attr('valuex'),Sphere:$(this).attr('valuey'),Quantity:$(this).val()};
            i++;
        }
    }); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T08:24:09.997

```
 var orderModel = [];
//loop all the inputs in the page to get values, let's say you give all the inputs a class named'.orderinput'
$('#checkout').click(function(){
    $(".orderinput").each(function(){
    orderModel.push({Cylinder:$(this).val(),Sphere:blah,Quantity:blah,...);
    });
  });

//not all values are sotred into the orderModel, the do the post
$.ajax({
        url: 'your url',
        data:JSON.stringify(orderModel),
        type: 'POST',
        contentType: 'application/json; charset=utf-8',//this is important!!
        success : function(msg) {
            //blah..
        },
        error: function (xhr, ajaxOptions, thrownError) {
            //blah...
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T08:04:32.570

我使用了以下[教程](http://theycallmemrjames.blogspot.fr/2010/05/aspnet-mvc-and-jquery-part-4-advanced.html])，我在这个[SO 问题](https://stackoverflow.com/questions/2203912/asp-net-mvc-ajax-json-post-array)中找到了这个教程来写这个答案。虽然此代码尚未经过测试，但希望它能让您走上正轨。如果您还有其他问题，请随时提出。

在 javascript中填充`orderModel`数组后，您剩下的就是使用 jquery 发布该数据。jquery 对象包含一个`ajax`方法（[文档](http://api.jquery.com/jQuery.ajax/)），可以让您方便地做到这一点。下面的代码放在您的 javascript 代码的末尾应该可以解决问题：

```
$.ajax({
    type: 'POST',
    traditional: true,
    data: { models: orderModel }
}); 
```

请注意，此 ajax 调用将在显示页面的 URL 上执行。要选择不同的 URL，请使用以下代码：

```
$.ajax(URL, { /* same data as above */ }); 
```

在服务器端，根据教程，您应该有一个包含`models`属性的类定义。该属性将填充您在脚本中收集的 javascript 数组数据。

圣诞节快乐！

# ios - ios modal 到以前的视图控制器正在产生内存问题

> ID：14019789
> 
> 赞同：0
> 
> 时间：2012-12-24T09:59:08.770
> 
> 标签：ios, memory-leaks, uistoryboardsegue

我有一个非常糟糕的视图系统。我浏览了几个模态视图，然后想跳回我的原始视图（循环回自身）。唯一的问题是它会一直在其他视图之上分配新视图，直到我用完内存并且应用程序崩溃。我如何告诉我的应用程序我永远不会回到预览视图控制器并且它应该释放内存块？我想做这样的事情： self.presentingViewController = nil; 但它是只读的，我越想它就是不能那样工作。这是我的故事板。 ![在此处输入图像描述](../Images/1aa22f58660ce47b0c574b0cd19e6234.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:21:14.357

目前尚不完全清楚您在做什么以及为什么它不能按预期工作，但我认为以下方法应该适合您：

1.  *我从“根表视图”开始，然后我做一个模态*

2.  *然后从带有“占位符”文本的视图中模态到游戏控制器

3.  然后我想模态回到导航控制器/根表视图。

我假设你正在做 1\. 和 2 使用`– presentViewController:animated:completion:`（或现在已弃用`– presentModalViewController:animated:`）。

为了执行 3.，您必须调用：

`[self.presentingController dismissViewControllerAnimated:ZZZ completion:nil];`

这会将所有模式视图控制器从根表视图中解散到您要解散的那个。

如果您已经在这样做并且它不能按您的意愿工作，我认为这可能是因为您正在关闭模态视图控制器并在同一个运行循环周期内呈现一个新的。要解决这个问题，只需在根控制器中定义一个方法，例如：

```
 - (void)presentFirstViewController {
        [self presentViewController:xxxxx animated:YES completion:nil];
    } 
```

稍后您解雇模态控制器：

```
self.presenting.Controller dismissViewControllerAnimated:YES completion:nil]; 
```

并展示新的做：

```
[rootController performSelector:@selector(presentFirstViewController) withObject:nil afterDelay:0.0]; 
```

这最后一步将为运行循环提供一些时间来清理关闭时的内容，并依次呈现模态控制器。

希望这会有所帮助。

# functional-testing - 如何在功能上测试遗传算法

> ID：14019794
> 
> 赞同：0
> 
> 时间：2012-12-24T09:59:20.763
> 
> 标签：functional-testing, genetic-algorithm, non-deterministic

我用 Java 制作了一个遗传算法，它是一个库的形式，可以添加到多个应用程序中。在开发过程中，我做了一些可能是功能测试的（jUnit）测试，但它们没有断言，因为算法是不确定的。所以，它们不适合自动测试，当运行一段时间后你必须花时间看看解决方案。

解决方案是车辆路线，可以打印为 XLS 格式，并在必要时进行实际测试，因此您知道在那一刻要寻找什么。它们有一个距离值和一个时间值，每个示例都有一个合理的值，以及路线本身，不能有某些锯齿形，尽管有时必须有锯齿形。

我可以断言这些值在那个合理的范围内，但这些并不清楚，我不确定我不会陷入糟糕的解决方案。很高兴知道人们在做什么，或者您对此事有何看法。

编辑：澄清目标：

*   单元测试已经解决了。我可以将随机数生成代码与不同函数中的逻辑代码隔离开来，并且我测试逻辑函数，将它们从测试代码中传递给非随机数。
*   我想进行一些功能测试，比如 Cucumber 或 Selenium 测试，没有虚假数据。产生真实输出的真实输入。（我并不是说我想专门使用 Cucumber 或 Selenium，只是说我要求的不是单元测试，并且算法的行为必须是真实的，并且不能以任何方式伪造）

该库用于不同的项目，每个项目的输入数据遵循相同的模型，但偏向不同。一个项目数据可以有很多相同点的重复，而另一个项目则没有。可以让车辆非常快地达到极限容量，而在其他情况下，这个极限几乎无法达到。

目标是从插入的每个项目中获取样本数据，以便在修改算法时快速反馈算法的行为（例如修改或添加变异或交叉运算符，或添加新的参数化）。因此，不得以任何方式伪造其行为。

鉴于这一切，我要问的问题是找到一种方法来对整个行为做出有效的断言。我想问一下其他人是如何处理这个问题的，或者你们对此有什么看法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T12:10:56.820

在一般使用中，您的伪随机数生成器会植入一些攻击者难以准确预测的内容——通常基于计算机的时钟或正常运行时间。但是，如果您使用常数为伪随机数生成器播种 - 它将始终返回相同的结果。因此，您可以使用种子 pRNG 进行单元测试。这将提供一个体面的 - 不是完美的，但体面的 - 防止回归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:03:58.930

单元测试用于测试代码中单元的行为。即使整个算法是不确定的，这些也是完全可测试的。你想要实现的（我相信）是有一种自动化集成测试的方法。为此，您需要设置一个结果是确定性的场景（当然可能，例如，我的实现是否可以解决 2 个字节总和的最大值），或者您需要将您的算法伪装成确定性（通过固定输入、输出和随机生成的值）。

根据您的编辑：

我的 GA 实现从未包含实际测试，只有单元和集成测试。第一个将证明实现的理论正确性，而第二个将证明实现的凝聚力。这两个因素都告诉我一些关于代码质量的信息，但不告诉我性能（其中性能是从最佳输出生成的输出）。

如果我说对了，那么您想衡量实现的性能以查看修改的效果。为此，您首先需要样本输入数据和最佳输出数据。我想你有第一个。第二个可能更棘手。其次，您需要为每个测试集运行多次。由于 GA 是不可预测的（基于您配置的突变率）。这一切都可能归结为一个简单的样本测试集会更有效的地步。

无论如何，至于回答您的问题：多次运行后，您的断言应验证平均误差（与最佳输出相比）是否在可接受的范围内。

# objective-c - Cocoa：在模型中使用观察者

> ID：14019795
> 
> 赞同：1
> 
> 时间：2012-12-24T09:59:22.213
> 
> 标签：objective-c, ios

我试图了解如何实现真正的 Cocoa MVC，如图 4-7 所示。

这是一个链接

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW1](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW1)

图 4-7 显示模型使用模式观察器来通知控制器（被动 MVC）。我以这种方式在我的模型中实现观察者

```
@interface IADataManager : NSObject

//MARK: Parsed Feed With IANewsDataObj
@property (nonatomic,retain) NSMutableArray *feedArray;

//MARK: Model use Singelton Pattern
+ (IADataManager *) sharedInstance;

//MARK: Observation methods
- (void) addListener:(id<IADataManagerListener>) listener;
- (void) removeListener:(id<IADataManagerListener>) listener;

//MARK: Business Logic
- (void) loadFeedFromNetwork;
- (void) loadFeedFromDataBase;
- (void) loadImageForTarget:(id<IADataManagerListener>) target
                AtIndexPath:(NSIndexPath *) indPath;
- (void) saveFeedToDataBase;

@end

@protocol IADataManagerListener <NSObject>

- (void) IADataManager            :(IADataManager *) dataMng
         didRefreshWithError      :(NSError *) error;

- (void) IADataManager            :(IADataManager *) dataMng
         didLoadImageForIndexPath :(NSIndexPath *) indexPath;

- (void) IADataManager            :(IADataManager *) dataMng
         didLoadWithError         :(NSError *) error;

@end

  - (void) addListener:(id<IADataManagerListener>) listener
{
    if([self.listeners indexOfObject:listener] == NSNotFound && listener)
        [self.listeners addObject:listener];
}
- (void) removeListener:(id<IADataManagerListener>) listener
{
    if([self.listeners indexOfObject:listener] !=NSNotFound && listener)
        [self.listeners removeObject:listener];
}

//Notification example
- (void) handleLoadedNews:(NSArray *) loadedNews
{
    [self.feedArray   addObjectsFromArray:loadedNews];
    [self.listeners enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        objc_msgSend(obj, @selector(IADataManager:didRefreshWithError:),self,nil);
    }];

} 
```

我想知道，是否有更好的方法在模型中实现观察者？例如使用 KVO 或 NSNotificationCenter。但问题是，在 KVO 和 NSNotificationCenter 的帮助下，我不能使用超过 1 个参数的选择器。例如，

```
 - (void) DataManager:(DataManager *) dm withObj1:(Obj1*) obj1  Obj1:(Obj2*) obj2  Obj3:(Obj3*) obj3 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:12:21.737

`But problem is that with the help of KVO and NSNotificationCenter i can not use selectors with more than 1 argument.`

你可以！！！

将所有选择器存储在数组或字典中，然后传递该单个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:34:23.667

KVO 通常是更好的选择。例子：

在 IDataManager 中：

```
- (void) handleLoadedNews:(NSArray *) loadedNews
{
    [self willChangeValueForKey:@"feedsArray"]; //Also, see - (void)willChange:(NSKeyValueChange)changeKind valuesAtIndexes:(NSIndexSet *)indexes forKey:(NSString *)key
    [self.feedsArray addObjectsFromArray:arr];
    [self didChangeValueForKey:@"feedsArray"]; //Also, see - (void)didChange:(NSKeyValueChange)changeKind valuesAtIndexes:(NSIndexSet *)indexes forKey:(NSString *)key
} 
```

并且，在 ViewController 中：

```
- (void) viewDidLoad {
    ....
    [[IADataManager sharedInstance] addObserver:self forKeyPath:@"feedsArray" options:0 context:NULL];
}

- (void) viewWillUnload {
    ....
    [[IADataManager sharedInstance] removeObserver:self forKeyPath:@"feedsArray"];
}

- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    //if keyPath is "feedsArray", refresh my views
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:19:52.677

我认为使用委托或块将是理想的。要在视图控制器中获得回调，您可以使用委托方法或块。我认为这将是 MVC 设计模式的理想方法。

# javascript - 如何激活/停用移动设备上输入字段的预测文本？

> ID：14019796
> 
> 赞同：3
> 
> 时间：2012-12-24T09:59:27.577
> 
> 标签：javascript, jquery, html

我有：

```
<input type="text" /> 
```

我想使用 Javascript 或任何代码自动关闭预测文本，而无需转到设置并将其关闭，所以任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:08:11.357

我也经历过这种情况。

尝试这个

```
<input type="text" name="some_name" autocorrect="off"> 
```

[阅读本文了解更多详情](http://css-tricks.com/snippets/html/autocomplete-off/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:21:18.247

这并不能完全回答您的问题，但 HTML5 引入了一系列新的输入类型，例如“电子邮件”、“网址”、“搜索”等。使用最佳语义“类型”，然后让平台做出决定如何处理该类型通常比以与平台通常处理该类型输入的方式不一致的方式更改输入类型的行为更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T10:12:15.673

使用 jQuery，您可以执行以下操作：

```
 // using a JavaScript object literal to change multiple attributes at once:
      $(document).find('input')
                 .attr({
                      autocorrect: 'off',
                      autocapitalize: 'off'
                  }); 
```

# javascript - 如何在 mxGraph 的 Iframe 中获取选定的单元格值？

> ID：14019801
> 
> 赞同：0
> 
> 时间：2012-12-24T10:00:01.863
> 
> 标签：javascript, html, iframe, mxgraph, jgraph

我们如何在框架中获取选定的单元格值？我通过单击链接调用 iframe。在 Iframe 中，我想获取所选单元格的属性值。

```
 <script>
        function main(container) {
            if (!mxClient.isBrowserSupported()) {
                mxUtils.error('Browser is not supported!', 200, false);
            }
            else {
                var graph = new mxGraph(container);
                var cell = graph.getSelectionCell();
            }
  </script>

<body onload="main(window.parent.document.getElementById('graphContainer'))">
    <form id="form1" runat="server">

    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T01:14:49.170

如果您使用的是按钮之类的东西

您可以从 evt 获得大部分信息

例如：

```
 graph.addListener(mxEvent.DOUBLE_CLICK, function(sender, evt)
    {
        var cell = evt.getProperty('cell');
        if (cell != null && cell.parent != main_class) {
                main_class = cell.edges[0].value.slice(14, cell.edges[0].value.indexOf('-') ); 
```

ETC....

您显然可以使用 Firefox 中的调试器来确定您要查找的属性在分类中的位置

# c - 如何在 Netbeans IDE 中以 C 编程语言触发 EOF（文件结尾）

> ID：14019804
> 
> 赞同：0
> 
> 时间：2012-12-24T10:00:20.130
> 
> 标签：c, netbeans, eof

> **可能重复：**
> [C：如何模拟 EOF？](https://stackoverflow.com/questions/1118957/c-how-to-simulate-an-eof)

我目前正在尝试使用 C 编程语言。我学过java，所以对代码风格等都比较熟悉，但显然还是有区别的。

这是我目前拥有的代码。它来自教科书，所以我假设代码没有问题。

```
#include <stdio.h>

int main(void)
{
    long numberOfCharacter;

    numberOfCharacter = 0;

    while(getchar() != EOF)
    {
        ++numberOfCharacter;
    }

    printf("%1d\n", numberOfCharacter);
} 
```

我认为我必须触发 EOF 才能获得我想要的输出。我看到其他一些帖子，他们说要按 Ctrl+Z 来触发 EOF，我已经尝试过，但它不起作用。我假设是因为它是 Netbeans。那么，问题是如何在 Netbeans 中触发 EOF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:36:08.890

如果您使用的是 Linux 系统，请尝试使用 CTRL-D 而不是 CTRL-Z。

# ios - iOS 中 Speech to Text 的示例

> ID：14019806
> 
> 赞同：5
> 
> 时间：2012-12-24T10:00:31.080
> 
> 标签：ios, cocoa-touch, speech-to-text

我是 iOS 编程新手。你能告诉我如何在 iOS 中将语音转换为文本吗？是否调用了任何 API？请建议我如何进行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T10:14:03.283

这种转换有几个库——我在 GitHub 上托管了两个库：[libsprec](http://github.com/H2CO3/libsprec)（它使用 Google 语音识别 API，因此它支持多种语言）和[VocalKit](https://github.com/H2CO3/VocalKit)，它使用高质量的开源 PocketSphinx 库（但是，它目前仅支持英文）。

[OpenEars 也](http://www.politepix.com/openears/)使用 PocketSphinx。

还有一些商业解决方案：[Dragon Dication SDK](http://www.nuance.com/for-developers/dragon/index.htm)是一种流行但相当昂贵的框架。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T10:05:50.077

[OpenEars](http://www.politepix.com/openears/)是最好的图书馆之一。

您可以从他们的网站上找到所有详细信息。

# jquery - Jquery 选项卡 MVC 避免重复选项卡

> ID：14019808
> 
> 赞同：0
> 
> 时间：2012-12-24T10:00:40.333
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, model-view-controller, jquery-selectors

单击使用 jquery 添加选项卡时，我有一系列链接。

```
function addTab(title, uri) {
    var newTab = $("#tabs").tabs("add", uri, title);
} 
```

我想要每个链接只有一个标签。如果用户不断按下链接，它会不断向该 div 添加新选项卡。

我在想的一种方法是添加一个 id 到由 jquery 在 Tab 的 li 内创建的锚点，但我不知道该怎么做

```
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-4"><span>Ncollison Collison</span></a></li> 
```

而不是jquery给出的justtab数字，我想添加具有唯一值的id，我将传递给该方法。所以这 `<a href="#ui-tabs-4">` 变成`<a href="#ui-tabs-4" id="12323">` 了我可以在添加另一个选项卡之前检查这个 ID。在 addTab(title, uri, uniquevlaue) 上面的方法中添加选项卡后，我不确定如何将此唯一值添加到选项卡锚点。

**编辑1**

```
$(function () {

    $('#tabs').tabs(
        { cache: true },
        {
            ajaxOptions: {
                cache: false,
                error: function (xhr, status, index, anchor) {
                    $(anchor.hash).html("Couldn't load this tab.");
                },
                data: {},
                success: function (data, textStatus) { }
            },
            add: function (event, ui) {
                //select the new tab
                $('#tabs').tabs('select', '#' + ui.panel.id);
            }
        });
});

function addTab(title, uri) {
    // If tab already exist in the list, return
    if ($("#" + title).length != 0)
        return;
    var newTab = $("#tabs").tabs("add", uri, title);
}

function closeTab() {
    var index = getSelectedTabIndex();
    $("#tabs").tabs("remove", index)
}

function getSelectedTabIndex() {
    return $("#tabs").tabs('option', 'selected');
}

function RefershList() {
    $('#frmPeopleList').submit();
}

    <div id="tabs">
        <ul>
        </ul>
    </div> 
```

我有类似于下面的链接

```
 <input id="btnAddTab" type="button" onclick="addTab('Add Person','<%= Url.Action("Create", "People")  %>')" value='Add New Person' /> 
```

**编辑 2** 生成的 HTML

```
<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
        <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        <li class="ui-state-default ui-corner-top"><a href="#ui-tabs-2"><span>Rwestbrook Westbrook</span></a></li><li class="ui-state-default ui-corner-top"><a href="#ui-tabs-4"><span>Rwestbrook Westbrook</span></a></li><li class="ui-state-default ui-corner-top"><a href="#ui-tabs-6"><span>Rwestbrook Westbrook</span></a></li><li class="ui-state-default ui-corner-top"><a href="#ui-tabs-8"><span>Rwestbrook Westbrook</span></a></li><li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-10"><span>Rwestbrook Westbrook</span></a></li></ul><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"><h2>Chat</h2>
<input type="text" value=" " id="msg">
<input type="button" value="send" id="send">
<ul id="message">
</ul></div><div id="ui-tabs-4" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"><h2>Chat</h2>
<input type="text" value=" " id="msg">
<input type="button" value="send" id="send">
<ul id="message">
</ul></div><div id="ui-tabs-6" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"><h2>Chat</h2>
<input type="text" value=" " id="msg">
<input type="button" value="send" id="send">
<ul id="message">
</ul></div><div id="ui-tabs-8" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"><h2>Chat</h2>
<input type="text" value=" " id="msg">
<input type="button" value="send" id="send">
<ul id="message">
</ul></div><div id="ui-tabs-10" class="ui-tabs-panel ui-widget-content ui-corner-bottom"><h2>Chat</h2>
<input type="text" value=" " id="msg">
<input type="button" value="send" id="send">
<ul id="message">
</ul></div>
    <div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-3" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div><div id="ui-tabs-5" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div><div id="ui-tabs-7" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div><div id="ui-tabs-9" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div></div> 
```

发送的 URI 是 '/Chat/AddChat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:26:25.647

您应该检查是否有链接到该 URL 的选项卡。一种方法是：

```
$('a.ui-tabs-anchor[href="' + uri + '"]').length > 0; 
```

.ui-tabs-anchor 是分配给选项卡的“a”标签的类，至少在当前的 jquery UI 版本中是这样。

-- 之前的代码是针对 JQuery-UI 1.9，针对 1.8（可能还有之前的版本）：

```
function urlExists(uri) {
    var exists = false; 
    $.each($('#tabs a'), function() { 
        exists = exists || $(this).data('href.tabs') == uri }
     );
    return exists;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:52:40.983

试试这个，遍历标签，检查标题是否存在 ..create

```
function addTab(title, uri) {
   var tabNameExists = false;
  $('#tabs ul li a').each(function(i) {
    if (this.text == title) {
     tabNameExists = true;
    }
  });

 if (!tabNameExist){
    var newTab = $("#tabs").tabs("add", uri, title);
 }

} 
```

# android - 如何在指定时间段内从下到上移动图像？

> ID：14019816
> 
> 赞同：1
> 
> 时间：2012-12-24T10:01:48.993
> 
> 标签：android, animation, imageview

我的 android 活动页面上有一张图片。我希望图像从底部移动到顶部，然后它应该消失并直接当前活动调用下一个活动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:14:16.043

尝试这个：

```
TranslateAnimation tAnimation = new TranslateAnimation(0, 0, 0, -250);
        tAnimation.setDuration(5000);
        tAnimation.setRepeatCount(0);
        tAnimation.setInterpolator(new AccelerateDecelerateInterpolator());
        tAnimation.setFillAfter(true);
        tAnimation.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
                i.setVisibility(View.GONE);
                startNewAct();
            }
        });

        i.startAnimation(tAnimation); 
```

* * *

```
public void startNewAct() {
        startActivity(new Intent(this, NextActivity.class));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:07:10.810

您可以为您的图像设置一个向上移动的翻译动画并为其设置一个动画侦听器，在负责动画结束的侦听器部分您可以放置​​一个将您转移到其他活动的意图。

# php - 试图获取自定义厨房中的图像总数？

> ID：14019817
> 
> 赞同：0
> 
> 时间：2012-12-24T10:01:52.237
> 
> 标签：php, wordpress

我在 WordPress 中安装了一个自定义图片库，我想在其中一个页脚框中显示它们的数量？我已经尝试了很多，但这是唯一实际显示结果但错误的代码！

```
<?php
$numposts = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->posts WHERE post_status =       'publish'");
if (0 < $numposts) $numposts = number_format($numposts);

echo 'We have published '.$numposts.' since our launch.';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T16:18:09.803

Your query is going to count posts, pages, and custom post types-- anything set to 'publish'. I imagine that that is why you think it is "wrong". Edit the query to restrict it to the post type you want to count. I do not know what post type your "custom image gallery" uses, but here is an example with basic WordPress posts...

```
$numposts = $wpdb->get_var("
    SELECT COUNT(*) 
    FROM {$wpdb->posts} 
    WHERE post_status = 'publish' 
    AND post_type = 'post'"); 
```

# android - 当活动被销毁时，保存列表视图项目的最佳方法是什么？

> ID：14019820
> 
> 赞同：1
> 
> 时间：2012-12-24T10:02:15.187
> 
> 标签：android, database, listview

我正在制作一个应用程序，在该应用程序中，我在列表视图中向用户显示联系人。我想向用户显示相同的列表视图，直到并且除非对联系人列表进行了一些更改。这里出现的问题是，当活动被破坏，直到用户回到具有联系人列表视图的活动，`Where shall i store the items of the listview as to show them to the user again`？我认为有 3 个选项可用：

```
1\. Sqlite database
2\. SdCard
3\. Shared Preferences 
```

我无法决定`which will be the best option for saving the items`稍后检索它们。在我的情况下，列表视图中的项目数可能高达 1000。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:09:28.020

您可以使用受保护的 SQLite 数据库，您还可以使用 sdcard 和任何文件格式（如属性文件、csv ...等）来保存您的列表详细信息，但是 sdcard 媒体与所有应用程序共享并且用户也可以访问。如此多的联系我不会推荐共享首选项，因为无法像 SQLite 中那样获取详细信息和运行查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:23:19.203

在您的情况下，您绝对应该使用 SQLite。

以下是在什么时间使用哪个存储选项的简要说明：

**共享首选项：** 这些基本上适用于存储应用程序首选项和其他少量数据。SharedPreferences 是一个键/值存储，您可以在其中将数据保存在某个键下。要从存储中读取数据，您必须知道数据的键。因此，读取数据变得容易。但是对于大型数据集，这可能会变得有点困难，因为您必须为数据集中的每个键定义一个唯一键。例如：在 SharedPreferences 中存储用户登录的会话密钥。

**内部存储：** 这有利于存储用户不需要访问的应用程序数据。可能适用于存储日志或应用程序将创建/更新/删除的任何内容。

**SQLite：** 大量相同的结构化数据应存储在 SQLite 数据库中，因为数据库是为此类数据设计的。由于数据是由数据库结构化和管理的，因此可以使用 SQL 等查询语言对其进行查询以获取符合特定条件的数据子集。在这里搜索变得很容易。虽然 SQLite 的扩展性可能不如专用数据库那么大，但它对于较小的应用程序（如 Android 应用程序）来说非常快速和方便。例如：存储您的列表视图项目或存储食谱应用程序的食谱。

希望这可以帮助！！！

# dynamics-crm-4 - 更新约会出错

> ID：14019823
> 
> 赞同：0
> 
> 时间：2012-12-24T10:02:32.830
> 
> 标签：dynamics-crm-4

我正在尝试添加更多必需的与会者。但是我遇到了错误，代码是-2146233087。

```
activityparty activityParty = new activityparty();         
activityParty.partyid = new Lookup();            
activityParty.partyid.Value = contact.contactid.Value;     
appointment.requiredattendees = new activityparty[] { activityParty };   
service.Update(appointment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:08:34.350

嗨 atlast 我发现了问题，我错过了实体的类型并解决了问题。但它只是将错误作为异常抛出而不告诉它，并且在添加类型之后它是固定的。

```
activityparty activityParty = new activityparty();         
activityParty.partyid = new Lookup();            
activityParty.partyid.Value = contact.contactid.Value;     
**activityParty.partyid.type = "contact";**
appointment.requiredattendees = new activityparty[] { activityParty };   
service.Update(appointment); 
```

# php - 使用联接表插入值

> ID：14019826
> 
> 赞同：-2
> 
> 时间：2012-12-24T10:02:46.087
> 
> 标签：php, database, join, insert, phpmyadmin

我有 3 个表，**table1**有名称，**table2**有项目。我的**table3**是连接**table1**和**table2**的表。

表1（信息）

```
|  id  |  firstname  |  lastname   |
+------+-------------+-------------+
|  1   |  John       |  Davis      |
+------+-------------+-------------+ 
```

表2（项目）

```
|  id  |  itemname   |
+------+-------------+
|  1   |  Shovel     |
+------+-------------+
|  2   |  Hammer     |
+------+-------------+
|  3   |  Wrench     | 
```

表 3（信息项）

```
|  id  |  info_id  |  item_id  |
+------+-----------+-----------+
|  1   |     1     |     1     |
+------+-----------+-----------+
|  2   |     1     |     2     |
+------+-----------+-----------+
|  3   |     1     |     3     | 
```

问题是当我添加新信息时，**table3**仍然是空的，无法显示值。**我应该使用什么 INSERT 语句从table1**和**table2**获取 id ？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:07:47.137

```
insert into login_table table1 tb
INNER JOIN table2 tb2 ON tb.some_id = tb2.id
(field1, field2, field3, field4) 
values
('value1', 'value2', 'value3', 'value4') 
```

# c++ - 哈希算法的测试平台流程是什么？

> ID：14019827
> 
> 赞同：2
> 
> 时间：2012-12-24T10:02:48.860
> 
> 标签：c++, unit-testing, hash, cryptography, steganography

假设我编写了一个标准算法的实现，例如 MD* 或 SHA*：我怎么知道它是正确的？相同算法的不同实现必须产生相同的摘要？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:24:56.083

参考文档本身包含少量的示例案例，可以使用。（例如，所有参考文档中都有 的哈希值。）此外，Aaron Gifford 在[http://www.adg.us/computers/sha.html](http://www.adg.us/computers/sha.html)`"abc"`上提供了许多测试用例。特别是，他对一些边界情况进行了测试（其中文本正好是块的长度，或者更少，以及其他一些特殊长度。如果您的实现为所有这些计算了正确的值，则有很有可能它是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:17:09.777

是的，情况就是这样。但是，一些哈希算法带有变体/设置，因此如果是这种情况，您将需要匹配这些算法。

一个很好的例子是如何经常提供 MD5 以允许您验证您的下载是否正确。为了使其工作，MD5 哈希实现需要为所有实现产生相同的结果。

# c# - TableLayoutPanel 的自动滚动属性不起作用

> ID：14019828
> 
> 赞同：2
> 
> 时间：2012-12-24T10:02:49.633
> 
> 标签：c#, .net, winforms, tablelayout

我想`TableLayoutPanel`在 GUI 的固定区域中动态添加行。因此，如果记录数量增加，那么我想要一个垂直滚动条来帮助用户查看更多记录。为此，我设置了属性`AutoScroll = true;`，但它不起作用。

```
CheckBox c = new CheckBox();
c.Text = "Han";
tableLayoutPanel1.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.AutoSize));
this.tableLayoutPanel1.RowCount = 1; this.tableLayoutPanel1.Controls.Add(c, 0, 0);
tableLayoutPanel1.AutoScrollPosition = new Point(0, tableLayoutPanel1.VerticalScroll.Maximum);
this.tableLayoutPanel1.AutoScroll = true;
tableLayoutPanel1.Padding = new Padding(0, 0, SystemInformation.VerticalScrollBarWidth, 0); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-24T14:14:53.050

从另一个问题的评论中查看您的代码，您似乎在每一行添加行样式，尝试添加行而不添加样式或先添加一种样式然后添加所有行。

```
 tableLayoutPanel1.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
            tableLayoutPanel1.RowStyles.Add(new RowStyle(SizeType.AutoSize));

            this.tableLayoutPanel1.Controls.Add(c);
            this.tableLayoutPanel1.Controls.Add(c1);
            this.tableLayoutPanel1.Controls.Add(c2);
tableLayoutPanel1.VerticalScroll.Maximum = 200;
            this.tableLayoutPanel1.AutoScroll = true; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T10:16:43.540

因此你没有发布你的代码，我不能说你做错了什么。但这是您应该向表格布局面板添加控件的方式：

```
tableLayoutPanel.GrowStyle = TableLayoutPanelGrowStyle.AddRows;
tableLayoutPanel.RowStyles.Add(new RowStyle(SizeType.AutoSize));
tableLayoutPanel.RowCount = tableLayoutPanel.RowStyles.Count;
YourCountrol control = new YourControl();
// setup your control properties
tableLayoutPanel.Controls.Add(control);
// scroll to the bottom to see just added control
tableLayoutPanel.AutoScrollPosition = 
    new Point(0, tableLayoutPanel.VerticalScroll.Maximum); 
```

当然你应该有`tableLayoutPanel.AutoScroll = true`

顺便说一句，为了避免烦人的水平滚动条，您应该在表格布局面板中添加右填充：

```
tableLayoutPanel.Padding = 
     new Padding(0, 0, SystemInformation.VerticalScrollBarWidth, 0); 
```

`AutoSize`应该为 tableLayoutPanel 禁用UPDATE 。否则滚动将不会出现 - 表格布局面板会变大。

# asp.net - 数据集为空

> ID：14019831
> 
> 赞同：0
> 
> 时间：2012-12-24T10:03:02.333
> 
> 标签：asp.net, ado.net

我想将值放入数据集中，我的代码如下

```
 public DataSet GetMemberById(int memberId)
        {

            using (SqlConnection con = new SqlConnection(connectionString))
            {
                using (SqlCommand cnn = new SqlCommand("selectmemberByID", con))
                {
                    cnn.CommandType = CommandType.StoredProcedure;
                    cnn.Parameters.Add(new SqlParameter("@id", SqlDbType.Int, 4));
                    cnn.Parameters["@id"].Value = memberId;

                    using (DataSet ds = new DataSet())
                    {
                        try
                        {
                            con.Open();
                            cnn.ExecuteNonQuery();
                            SqlDataAdapter da = new SqlDataAdapter(cnn);
                            da.Fill(ds);

                        }

                        catch (Exception e)
                        {
                        }
                        return ds;
                    }
                }
            }
        }

protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.QueryString["MemberId"].ToString() != string.Empty)
            {
                int memberId=Convert.ToInt32(Request.QueryString["MemberId"]);
                DataSet ds = new DataSet();
                ds = utility.GetMemberById(memberId);
                GdMember.DataSource = ds;
                GdMember.DataBind();
                //txtFirstName.Text = ds.Tables[0].Rows[0][1].ToString();
            }
        } 
```

在最后一种方法中，它向我显示一个错误，数据集中没有表。

```
stored procedure:

Alter proc [dbo].[selectmemberByID]
(
@memberId int=2
)
as 
begin
select * from dbo.MemberDetail
where id=@memberId
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T11:00:07.987

如果您使用的是数据适配器，那么需要打开连接吗？. 还要检查参数是否正确传递给您的 sp。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:44:27.937

您可以尝试使用以下代码而不是使用“@Id”吗

```
cnn.Parameters.Add(new SqlParameter("@memberId", SqlDbType.Int, 4)); 
```

# c# - 如何在 WinRT 中将富文本块滚动到末尾

> ID：14019832
> 
> 赞同：2
> 
> 时间：2012-12-24T10:03:01.003
> 
> 标签：c#, .net, windows, xaml, winrt-xaml

如何将富文本块滚动到末尾？我尝试了这个和其他一些东西，但它不起作用。这有时会滚动，但永远不会滚动到底部:(

```
 <ScrollViewer Name="OutputScroll" Grid.Row="1" VerticalScrollBarVisibility="Auto"  HorizontalScrollBarVisibility="Disabled">
        <RichTextBlock Name="ouputRichTextBlock" />
    </ScrollViewer> 
```

在我附加文本之后

```
this.OutputScroll.ScrollToVerticalOffset(this.OutputScroll.ActualHeight); 
```

# c# - 从行中逐字拆分

> ID：14019833
> 
> 赞同：0
> 
> 时间：2012-12-24T10:03:04.860
> 
> 标签：c#, parsing

这是示例行，

```
(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100) 
```

我想分割上面的线，如下所示，

```
(
(
(
EXAMPLE_WORD1
-
EXAMPLE_WORD2
)
/
EXAMPLE_WORD2
)
*
100
) 
```

如何在 C# 代码中完成上述任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:06:12.330

你可以这样做：

```
string str=  "(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)";
string[] arr = str.Split(new char[]{'/','*','(',')'},SplitOption.RemoveEmpty); 
```

**UPDATE1**：在以前的解决方案中，分隔符将从 arr 中删除。也许更好的解决方案在这里：

```
string str=  "(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)";
str = str.replace("(","#(#").replace("/","#/#").replace(")","#)#").replace("*","#*#");
string[] arr = str.Split(new char[]{'#'},SplitOption.RemoveEmpty); 
```

这些解决方案是想法，我没有检查这些解决方案。编辑它们以获得更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:18:14.817

这似乎有效：

```
var regex = new Regex(@"(?=(\b|[^a-zA-Z_0-9])+)");
var split = regex.Split("(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)"); 
```

编辑：现在工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:18:38.703

如果您想要的是基于多个规则的通用分词器，那么这不是一项简单的任务。首先，您需要定义什么是适合您的*词*。喜欢：

*   单词是一系列字母（a-zA-Z），带有可接受的分隔符（'_'）
*   单词是符号 ('(',')','-', '*')
*   word 是一系列带有/不带可接受分隔符的数字（',','.' - 基于文化）

等等

只有在你定义了应该被视为*单词*的严格规则之后，你才应该开始编码。如果是这种情况，您可以根据任务的复杂性
阅读[有限自动机或类似的内容。](http://en.wikipedia.org/wiki/Finite-state_machine)

**编辑：**如果提供了您需要的所有模式，那么 Bert Evans 提供的链接就是您的解决方案的答案，即 Regex 模式：

```
string youString = @"(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)";
string[] parts = Regex.Split(yourString, @"(?<=[()-/*])"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:28:27.880

我扩展了 Ali's Answer 以获得准确的输出

```
(
(
(
EXAMPLE_WORD1
-
EXAMPLE_WORD2
)
/
EXAMPLE_WORD2
)

*
 100
)

    string str = "(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)";
    str = str.Replace("(", "{(}");
    str = str.Replace("*", "{*}");
    str = str.Replace(")", "{)}");
    str = str.Replace("/", "{/}");
    str = str.Replace("-", "{-}");
    string[] arr = str.Split(new char[] { '{', '}' }, StringSplitOptions.RemoveEmptyEntries);
    foreach (string strs in arr)
    {
         Console.WriteLine(strs.Trim());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-24T10:55:46.530

虽然正则表达式会让您到达那里，但您可能需要考虑指定某种标记器以实现灵活性和/或可扩展性：

这是一个天真的例子：

```
static IEnumerable<string> Tokenize(string str)
{
    var sb = new StringBuilder();
    foreach (var c in str)
    {
        if(char.IsLetterOrDigit(c) || c == '_')
        {
            sb.Append(c);
        }
        else if (char.IsPunctuation(c))
        {
            if (sb.Length > 0)
            {
                yield return sb.ToString();
                sb.Clear();
            }
            yield return c.ToString(CultureInfo.InvariantCulture);

        }
    }
    if (sb.Length > 0) yield return sb.ToString();
}
static void Main(string[] args)
{
    const string st = "(((EXAMPLE_WORD1 - EXAMPLE_WORD2)/EXAMPLE_WORD2) * 100)";
    Tokenize(st).ToList().ForEach(Console.WriteLine);
} 
```

# android - 当我单击 mainactivity 中的按钮时，我想显示一个 xml 文件

> ID：14019843
> 
> 赞同：0
> 
> 时间：2012-12-24T10:04:09.350
> 
> 标签：android, android-layout, android-activity, try-catch, android-xml

这是我的`mainactivity.java`

```
public class MainActivity extends Activity {
Button iol;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    iol=(Button)findViewById(R.id.iolCalculation);
    try{
        iol.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent iolIntent=new Intent(MainActivity.this,Selection.class);
                startActivity(iolIntent);
            }
        });
    }finally{

    }

} 
```

* * *

这是我的主要 xml，其中要单击 id=button1 的按钮

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    tools:context=".FullscreenActivity" 
    android:id="@+id/frame_layout">

        <LinearLayout
            android:id="@+id/fullscreen_content_controls"
            style="@style/ButtonBar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom|center_horizontal"
            android:background="@color/black_overlay"
            android:orientation="horizontal"
            tools:ignore="UselessParent" >
        </LinearLayout>

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="75dp"
            android:background="@color/black"
            android:paddingLeft="20dp"
            android:id="@+id/iolCalculation"
            android:text="@string/Button"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:layout_marginLeft="45dp"
            android:id="@+id/sHelp"
            android:layout_marginTop="139dp"
            android:background="@color/Black"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:text="@string/Button1"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" />

        <Button
            style="@style/ButtonBarButton"
            android:layout_width="222dp"
            android:layout_height="62dp"
            android:id="@+id/sAbout"
            android:layout_marginLeft="45dp"
            android:layout_marginTop="203dp"
            android:background="@color/Black"
            android:paddingLeft="10dp"
            android:text="@string/Button2"
            android:textColor="@color/WhiteSmoke"
            android:textStyle="bold" >

        </Button>
</FrameLayout> 
```

* * *

**这是我的第二个 xml 布局，当单击 button1 时，它将与它的内容一起显示**

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/black"
    android:orientation="vertical" 
    android:id="@+id/form_layout">

    <Spinner
        android:id="@+id/formulae"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginRight="50dp"
        android:background="@color/LightSkyBlue"
        android:prompt="@string/prompt"
        android:entries="@array/formulas" />

    <TextView
        android:id="@+id/k2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/k1"
        android:layout_below="@+id/k1"
        android:layout_marginTop="38dp"
        android:text="@string/K2"
        android:textColor="@color/White"
        android:textSize="25sp" />

    <TextView
        android:id="@+id/al_const"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/al"
        android:layout_below="@+id/al"
        android:layout_marginTop="44dp"
        android:text="@string/Rx"
        android:textColor="@color/White"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/al"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/k2"
        android:layout_below="@+id/k2"
        android:layout_marginTop="38dp"
        android:text="@string/AL"
        android:textColor="@color/White"
        android:textSize="25sp" />

    <EditText
        android:id="@+id/k2_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/al"
        android:layout_alignRight="@+id/al_editText"
        android:layout_alignTop="@+id/k2"
        android:layout_marginLeft="120dp"
        android:background="@color/black"
        android:ems="10"
        android:inputType="numberDecimal"
        android:textColorLink="@color/white" />

    <EditText
        android:id="@+id/al_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/formulae"
        android:layout_alignTop="@+id/al"
        android:layout_marginLeft="120dp"
        android:ems="10"
        android:inputType="numberDecimal" />

    <EditText
        android:id="@+id/al_const_editText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/al_const"
        android:layout_alignRight="@+id/al_editText"
        android:layout_marginLeft="120dp"
        android:ems="10"
        android:inputType="numberDecimal" />

    <Button
        android:id="@+id/result"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:background="@color/LightSkyBlue"
        android:text="@string/Result" />

    <EditText
        android:id="@+id/k1_editText"
        android:layout_width="wrap_content"
        android:layout_height="37dp"
        android:layout_alignLeft="@+id/k2_editText"
        android:layout_alignRight="@+id/formulae"
        android:layout_below="@+id/formulae"
        android:layout_marginTop="30dp"
        android:background="@color/black"
        android:ems="10"
        android:inputType="numberDecimal"
        android:textColorLink="@color/White" />

    <TextView
        android:id="@+id/k1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/k1_editText"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="27dp"
        android:text="@string/K1"
        android:textColor="@color/white"
        android:textSize="25sp" />

</RelativeLayout> 
```

* * *

**清单文件**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.iolcalci"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.iolcalci.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="Selection"
            android:exported="false"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
          </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

**用于在选择类中使用 setcontentview 的 logcat**

```
 12-24 08:13:52.456: E/AndroidRuntime(766): FATAL EXCEPTION: main
12-24 08:13:52.456: E/AndroidRuntime(766): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.iolcalci/com.example.iolcalci.Selection}: android.content.res.Resources$NotFoundException: Resource ID #0x7f090005 type #0x12 is not valid
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.os.Looper.loop(Looper.java:137)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-24 08:13:52.456: E/AndroidRuntime(766):  at java.lang.reflect.Method.invokeNative(Native Method)
12-24 08:13:52.456: E/AndroidRuntime(766):  at java.lang.reflect.Method.invoke(Method.java:511)
12-24 08:13:52.456: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-24 08:13:52.456: E/AndroidRuntime(766):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-24 08:13:52.456: E/AndroidRuntime(766):  at dalvik.system.NativeStart.main(Native Method)
12-24 08:13:52.456: E/AndroidRuntime(766): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f090005 type #0x12 is not valid
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2144)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.content.res.Resources.getLayout(Resources.java:853)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-24 08:13:52.456: E/AndroidRuntime(766):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.Activity.setContentView(Activity.java:1881)
12-24 08:13:52.456: E/AndroidRuntime(766):  at com.example.iolcalci.Selection.onCreate(Selection.java:12)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.Activity.performCreate(Activity.java:5104)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-24 08:13:52.456: E/AndroidRuntime(766):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-24 08:13:52.456: E/AndroidRuntime(766):  ... 11 more 
```

* * *

执行上述代码后，我可以看到显示的空白布局。单击 button1 后，我应该如何从第二个 xml 显示微调器、文本视图、编辑框等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T12:44:56.143

```
in androidmainfest.xml just write <activity
            android:name="Selection"></activity>
instead of
 <activity
            android:name="Selection"
            android:exported="false"
            android:configChanges="orientation|keyboardHidden|screenSize"
            android:label="@string/app_name">
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
          </intent-filter>
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:11:58.197

如果您尝试使用新视图和 XML 移动到另一个屏幕，您需要参考创建一个新的 Java 类扩展`Activity`类。哪个`setContentView()`方法将采用参数作为`R.layout.somexml`将放置在**res**中的布局目录中的方法。要了解更多信息，请阅读以下链接。

1.  [安卓文档](http://developer.android.com/reference/android/app/Activity.html)

2.  [例子](https://stackoverflow.com/questions/4186021/how-to-start-new-activity-on-button-click)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:24:46.647

您正在尝试创建具有两个不同屏幕的小型应用程序

[这是实现这一目标的简单教程](http://rdcworld-android.blogspot.in/2012/04/start-activity-from-activity.html)

所以你需要..

**项目中的**两项活动****

 **1.  MainActivity.java
2.  选择.java

**两个布局**文件

1.  activity_main.xml
2.  activity_second.xml

**看你的Selection.java(Activity)文件应该是这样的，来处理spinner**

```
public class Selection extends Activity implements OnItemSelectedListener {

    private Spinner spinner = null;

    // to show the list in spinner we need to create a list of items
    private String[] androidBooks = { "Hello, Android", "Professional Android",
            "Unlocking Android", "Android App Development", "Pro Android",
            "Beginning Android ", "Android Programming Tutorials",
            "Android Wireless App Development", "Pro Android Games", };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_item, androidBooks);

        // get the spinner id what we decleared in xml layout file
        // (activity_second.xml)
        spinner = (Spinner) findViewById(R.id.formulae);

        spinner.setAdapter(adapter);
        spinner.setOnItemSelectedListener(this);

           //.... same way you can get id of button etc. and work on them

    }

    // implement the item selected listener for spinner
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position,
            long id) {
        int item = spinner.getSelectedItemPosition();
        Toast.makeText(getBaseContext(),
                "You have selected the book: " + androidBooks[item],
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

} 
```

和 PL 以这种方式在清单文件的应用程序标记中为这两个活动创建条目

**AndroidManifest.xml**

```
<application
        android:icon="@drawable/icon"
        android:label="@string/app_name">
        <activity
            android:name=".MainActivity "
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Selection"
            android:label="@string/app_name">
            <intent-filter>             
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application> 
```

有什么问题就说清楚！！很高兴能帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:34:31.113

发生此错误是因为您忘记在清单文件中注册您的选择类。在那里注册它，我相信你的应用程序会工作。**

# c# - 将 .Net 对象绑定到 Crystal Report 未找到属性

> ID：14019847
> 
> 赞同：1
> 
> 时间：2012-12-24T10:04:53.010
> 
> 标签：c#, crystal-reports

我有一个名为的类`Letter`，它有 2 个公共属性`Letter_Header`和`Letter_Details`. 我已成功将 .Net Linq 对象绑定到 Crystal 报表，但是当我绑定此对象时，未检测到属性。如何将`Letter_Header`和绑定`Letter_Details`到报告？

```
public class Letter
{
    public Letter_Header _header;
    public List<Letter_Details> _details;

    public Letter()
    {
    }
}

public class Letter_Header
{
    public Int32 ProductID;
    public String ProductName;
    public String BrokerName;

}

public class Letter_Details
{
    public Int32 ID;
    public Int32 PolicyID;
    public Int32 PersonName;
    public Decimal Amount;
    public DateTime DateTime;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T20:29:14.797

这个问题似乎早就死了，但是为了完整起见，这里有一个答案：

正如我在 Visual Studio 中遇到的 Crystal Reports 不接受自己的类，只接受基本的内置类，此外它不能处理任何形式的集合。

# java - 无法在 SSLSocket 上写入数据？

> ID：14019862
> 
> 赞同：1
> 
> 时间：2012-12-24T10:06:52.217
> 
> 标签：java, jsse

我编写了一个使用 SSL 套接字的客户端/服务器套接字程序。服务器和客户端之间正在建立连接，但我无法在流上写入数据。以下是服务器和客户端的一段代码

服务器（这将创建 SSLServerSocket 并为每个客户端创建新线程）

```
System.setProperty("javax.net.ssl.keyStore", "D:\\client\\server_keystore.jks");
System.setProperty("javax.net.ssl.keyStorePassword", "helloworld");
boolean listening = true;
SSLServerSocketFactory sslserversocketfactory = null;
SSLServerSocket sslserversocket = null;

try {

    sslserversocketfactory =
        (SSLServerSocketFactory) SSLServerSocketFactory.getDefault();
    sslserversocket =
        (SSLServerSocket) sslserversocketfactory.createServerSocket(Integer.parseInt(args[0]));

} catch (IOException e) {

    System.out.println("Input/output error occured :" + e.getMessage());
    System.exit(-1);
}

while (listening) {
    try {
        Thread t = new Thread(new DeprovisionServerThread(sslserversocket.accept()));
        if (t != null) {
            System.out.println("New thread created: " + t.getName());
        }

        t.start();
    } catch (IOException ex) {
        Logger.getLogger(DeprovisionServer.class.getName()).log(Level.SEVERE, null, ex);
    }
}
try {
    sslserversocket.close();
} catch (IOException ex) {
    Logger.getLogger(DeprovisionServer.class.getName()).log(Level.SEVERE, null, ex);
} 
```

服务器（线程处理代码）

```
 DeprovisionServerThread(Socket socket) {
    //  throw new UnsupportedOperationException("Not yet implemented");

    sslsocket = (SSLSocket) socket;

}

@Override
public void run() {
    //throw new UnsupportedOperationException("Not supported yet.");
    System.out.println("New client socket connection accpeted from: " +  sslsocket.getInetAddress() + " : " + sslsocket.getLocalPort());
    try {
        //PrintWriter out = new PrintWriter(sslsocket.getOutputStream(), true);

        BufferedWriter w = new BufferedWriter(new OutputStreamWriter(sslsocket.getOutputStream()));
        BufferedReader in = new BufferedReader(
                new InputStreamReader(
                sslsocket.getInputStream()));

        String inputLine, outputLine;

      //  out.println(outputLine);

        while ((inputLine = in.readLine()) != null) {
        // System.out.println(inputLine);
         if(inputLine!= null)System.out.println("command received" + inputLine);
         w.write("success");

        }
       // out.close();
        in.close();
        sslsocket.close();

    } catch (IOException e) {
        e.printStackTrace();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

客户端代码：

```
System.setProperty("javax.net.ssl.trustStore", "D:\\server\\server_keystore.jks");
        System.setProperty("javax.net.ssl.trustStorePassword", "helloworld");
        BufferedReader in = new BufferedReader(
                new InputStreamReader(System.in));
        PrintStream out = System.out;
        SSLSocketFactory f =
                (SSLSocketFactory) SSLSocketFactory.getDefault();
        try {
            SSLSocket c =
                    (SSLSocket) f.createSocket("localhost", 4444);
          //  c.s
            c.addHandshakeCompletedListener(new MyListener());

           c.startHandshake();
           Thread.sleep(5000l);
           printSocketInfo(c);
            BufferedWriter w = new BufferedWriter(
                    new OutputStreamWriter(c.getOutputStream()));
            BufferedReader r = new BufferedReader(
                    new InputStreamReader(c.getInputStream()));

            w.write("deprovision command",0, 10);
            System.out.println("send..");
            w.flush();
            String m ;
            while ((m = r.readLine()) != null) {
            System.out.println("status received: " + m);

            }
            System.out.println("after while");
            w.close();
            r.close();
            c.close();
        } catch (IOException e) {
            System.err.println(e.toString());
        }
    }

    private static void printSocketInfo(SSLSocket s) {
        System.out.println("Socket class: " + s.getClass());
        System.out.println("   Remote address = "
                + s.getInetAddress().toString());
        System.out.println("   Remote port = " + s.getPort());
        System.out.println("   Local socket address = "
                + s.getLocalSocketAddress().toString());
        System.out.println("   Local address = "
                + s.getLocalAddress().toString());
        System.out.println("   Local port = " + s.getLocalPort());
        System.out.println("   Need client authentication = "
                + s.getNeedClientAuth());
        SSLSession ss = s.getSession();
        System.out.println("   Cipher suite = " + ss.getCipherSuite());
        System.out.println("   Protocol = " + ss.getProtocol());

    }
} 
```

我在本地系统上测试此代码。我还使用监听器检查握手是否没有问题。当新客户端到来时，服务器接受来自客户端的连接并打印所有在 printSocketInfo() 方法中打印的信息。握手侦听器也收到通知。但是当我将数据从客户端套接字写入服务器时，什么也没发生，也不例外。请帮忙 。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:50:52.120

您从“deprovision command”字符串中仅写入 10 个前字符，并且服务器需要以换行符结尾的字符串。将您的客户端代码更改为以下内容：

```
w.write("deprovision command",0, 10);
w.newLine();
System.out.println("send..");
w.flush(); 
```

# php - 如何在uploadify中的特定javascript事件中停止文件上传

> ID：14019865
> 
> 赞同：0
> 
> 时间：2012-12-24T10:07:27.817
> 
> 标签：php, uploadify

我有以下代码。上传工作正常。现在，当我不输入视频标题并选择要上传的视频文件时，它会给我 javascript 消息以输入视频标题，但之后立即通过 uploadify 开始视频上传。因此，如果未选择视频标题，我想停止视频上传过程。请帮助解决这个问题。

```
function frm_add_validateform()
{
    with(document.frm_add)
    {
        if(trim(txt_title.value)=="")
        {
            alert("Please enter video clip title.");
            txt_title.focus();
            return false;
        }
    }
    return true;
}

<form name="frm_add" action="video_clip_add_p.php?pkid=<?php print($int_pkid);?>" method="post" onSubmit="return frm_add_validateform();" enctype="multipart/form-data">
<input type="text" id="txt_title" name="txt_title" class="clsTextBox" size="100" maxlength="100">
<input type="file" id="file_upload" name="file_upload" placeholder="Select your file to upload"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:09:25.540

尝试这个：

```
 function frm_add_validateform()
    {
        with(document.frm_add)
        {
            if(trim(txt_title.value)=="")
            {
                alert("Please enter video clip title.");
                txt_title.focus();
                $('#file_upload').uploadify('stop'); //stop video upload
                return false;
            }
        }
        return true;
    } 
```

# jquery - 使用jquery的垂直菜单三级

> ID：14019868
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:07:35.320
> 
> 标签：jquery, html, treeview

我使用 html 编码和 jquery 创建了一个菜单，例如

```
<ul>
    <li>
        level 2
        <ul>
            <li>level 2.1
            <ul>
                <li>a1
                 <li>a2
                    </ul></li>
            <li>b</li>
        </ul>
    </li>
    <li>
        level 3
        <ul>
            <li>
                level 4
                <ul>
                    <li>c</li>
                    <li>d</li>
                </ul>
            </li>

            <li>e</li>
            <li>f</li>
        </ul>
    </li>
</ul> 
```

​上面是html编码，下面是jquery：

```
$('li').click(function(ev) {
    $(this).find('>ul').slideToggle();
    ev.stopPropagation();              
});​ 
```

我得到了输出，例如当我单击第 2 级时，它被展开，但是当我展开第 3 级时，第 2 级也应该折叠，如果在第 2 级，如果第 2.1 级被展开，那么它应该被展开。请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:09:17.353

### 传播仅在您添加结束标签时起作用。

看这部分：

```
<li>level 2.1
<ul>
    <li>a1
     <li>a2
        </ul></li> 
```

没有结束`</li>`标签。

### 小提琴：http: [//jsbin.com/ibiceh/1](http://jsbin.com/ibiceh/1)

* * *

### 初始折叠

`$('li > ul').hide();`在`$(document).ready()`函数中添加：

```
$(document).ready(function(){
    $('li').click(function(ev) {
        $(this).find('>ul').slideToggle();
        ev.stopPropagation();              
    });
    $('li > ul').hide();
}); 
```

### 小提琴：http: [//jsbin.com/ibiceh/2/](http://jsbin.com/ibiceh/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:05:58.503

我想你正在寻找这个：

```
$(document).ready(function(){
   $('li').click(function(e) {
    e.stopPropagation();
      $(this).children('ul').show();
      $(this).prev().children('ul').hide();
      $(this).siblings().children('ul li ul').hide();
      $(this).next().children('ul').hide();
  }); 
  $('li > ul').hide();
}); 
```

检出垃圾箱：http: [//jsbin.com/ebapay/1/edit](http://jsbin.com/ebapay/1/edit)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-26T07:48:32.197

我的问题是通过编辑以前给定的代码来解决的。但现在我面临一个不同的问题。因为我的 HTML 代码是：

```
 <body>
            <ul>
                <li><a href="#">Academic Programme</a>
                <ul>
                    <li><a href="#">Under Graduate</a></li>
                    <li><a href="#">Post Graduate</a></li>
                    <li><a href="#">Ph. D</a></li>
                </ul>
            </li>
            <li><a href="#">People</a>
                <ul>
                    <li><a href="#">Director</a>
                    <li><a href="#">Faculty</a>
                            <ul>
                                <li><a href="#">Computer Engineering</a></li>
                                <li><a href="#">Information Technology</a></li>
                                <li><a href="#">Electronics & Communication Engineering</a></li>
                                <li><a href="#">Civil Engineering</a></li>
                                <li><a href="#">Mechanical Engineering</a></li>
                                <li><a href="#">Automobile Engineering</a></li>
                                <li><a href="#">Electrical Engineering</a></li>

                            </ul>
                    <li><a href="#">Technical Staff</a>
                    <li><a href="#">Administrator Staff</a>
                    <li><a href="#">Supporting Staff</a>

                </ul>
            </li>

            <li><a href="#">Department</a>
                    <ul>
                                <li><a href="#">Computer Engineering</a></li>
                                <li><a href="#">Information Technology</a></li>
                                <li><a href="#">Electronics & Communication Engineering</a></li>
                                <li><a href="#">Civil Engineering</a></li>
                                <li><a href="#">Mechanical Engineering</a></li>
                                <li><a href="#">Automobile Engineering</a></li>
                                <li><a href="#">Electrical Engineering</a></li>

                    </ul>
             </li>
             <li><a href="#">Amenities</a></li>
            <li><a href="#">Library

            <li><a href="#">Admission</a>
                    <ul>
                                <li><a href="#">UTU</a></li>
                                <li><a href="#">GTU</a></li>

                    </ul>
            </li>
            <li><a href="#">Student Corner</a></li>
            <li><a href="#">Circular</a></li>
            <li><a href="#">News&Events</a></li>

         </ul> 
```

我的jQuery是：

```
 <script src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
       $(document).ready(function(){
                $('li').click(function(ev) {
                 ev.stopPropagation();
           $(this).children('ul').fadeIn();
         $(this).prev().children('ul').children('li').children('ul').fadeOut();    
                   $(this).prev().children('ul').fadeOut();
          $(this).next().children('ul').fadeOut();
         $(this).next().children('ul').children('li').children('ul').fadeOut();    

        }); 

       $('li > ul').hide();

     });

    </script>

    But now i am facing problem of prev and next. Suppose in given HTML form if i had expnaded people then if i will expand admission then people is not collapsed so do any have alternative for prev() and next(). Thank you. 
```

# firebase - 安全 API auth 和 $ 变量不相等

> ID：14019873
> 
> 赞同：2
> 
> 时间：2012-12-24T10:07:57.247
> 
> 标签：firebase

我为我的应用程序尝试了以下安全规则，但遇到了问题。我的 Firebase 中有一个用户，唯一 ID 为 2。

```
{
  "rules": {
    "users": {
      "$user": {
        ".read": "$user == auth.id",
        ".write": "$user == auth.id"
      }
    }
  }
} 
```

我已经检查过，当我这样做时`".write": "$user == 2"`，我将无法在 firebase 上写作，但是当我这样做时`".write": "$user == '2'"`，我将能够在 firebase 上写作。

另一方面，当我这样做时`".write": "auth.id == 2"`，我将能够在 firebase 上写作。

似乎 $user 被视为字符串，而 auth.id 被视为数字。我已经检查了[https://www.firebase.com/docs/security/](https://www.firebase.com/docs/security/)上的文档，但事实证明它对这个问题没有帮助。

在绝望的尝试中，我尝试`".write": "$user == auth.id.toString()"`了这当然给了我这个错误：“6:29：类型错误：目标上的函数调用不是一个函数。”

任何人都可以就这件事给我一些建议吗？

我能想到的唯一解决方法是将“userId”作为 $user 的子项包含在内，这将被读取为数字值而不是字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-02T01:18:17.167

需要解决方法（在另一个答案的评论中提到）才能在 Firebase 模拟器中为我工作：

`$user == '' + auth.id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T16:18:57.047

There are two non-obvious details that may be tripping you up.

**Security rules are always evaluated using `===`**

Your `==` is automatically converted to `===` by the security rules; to read more about it, check out the "[rules expressions](https://www.firebase.com/docs/security/rule-expressions/index.html)" section of the document.

**Record IDs are converted to strings**

The user ID you inserted (2) is being converted to a string (I can't find the doc on that but remember reading it). In other words, the record ID is `"2"` and not `2` so your value in the auth data needs to match that.

Hope this helps :)

# java - 获取 XML 包中返回的 SQLException 消息？

> ID：14019879
> 
> 赞同：0
> 
> 时间：2012-12-24T10:08:46.307
> 
> 标签：java, sql, servlets, exception-handling

我目前正在尝试调试在与 JDBC 连接池交互时遇到问题的 Java servlet。

注意：我的 servlet 三天前工作正常，但现在它停止工作，所以我假设它是我的 Sun One 网络服务器或数据库问题，但没有错误消息，我不知道发生了什么。

我的 servlet 通常会通过浏览器返回一个 XML 响应，但是由于发生了这个错误，我什么都没有返回，只是一个黑色文件。

在我的代码中煞费苦心地设置断点后，我已经隔离了错误发生的位置，但我没有返回有关此错误的信息。

它发生在我的 getData() 方法的这一行。

```
Statement stmt = conn.createStatement(); 
```

这是完整的数据库类

**数据库逻辑类**

```
 public class DatabaseLogic
{
    private static Connection conn;

    public static void openDatabase() throws IOException, SQLException,
            NamingException
    {

        Context initialContext = new InitialContext();
        Context envContext = (Context) initialContext.lookup("java:comp/env");
        // servlet looks up for a connection pool called "jdbc/POOL"
        DataSource ds = (DataSource) envContext.lookup("jdbc/POOL");
        // connection is then made/requests to connection pool

        try
        {
            conn = ds.getConnection();
        }
        catch (SQLException e)
        {
            String message = "Unable to connect to archive database : " + e;
            XMLBuilder.dbError(message);            
        }
    }

    public static String getData(String queryId, int requestNumber)
            throws SQLException
    {
        String result = "";
        if (queryId != null)
        { 

            try
            {

                // prepare a statement for use in query;
                try
                {
                    result = "This is where it breaks";
                    Statement stmt = conn.createStatement();
                    result = "This message does not get returned";

                    // query parameratised with queryId
                    String qry = "SELECT RECORD_ID, USER_ID, OPERATION_CD, BUSCOMP_NAME, OPERATION_DT, FIELD_NAME, OLD_VAL, NEW_VAL, AUDIT_LOG, ROW_ID, BC_BASE_TBL FROM S_AUDIT_ITEM WHERE RECORD_ID='"
                            + queryId + "'";

                    try
                    {
                        ResultSet results = stmt.executeQuery(qry);

                        result = XMLBuilder.xmlBuilder(results, queryId,
                            requestNumber);

                        // close the connection
                        stmt.close();
                        results.close();
                    }
                    catch (SQLException e)
                    {
                        String message = "A database error occurred : " + e;
                        XMLBuilder.dbError(message);
                    }

                }
                catch (SQLException e)
                {
                    String message = "A database error occurred : " + e;
                    XMLBuilder.dbError(message);
                }

            }
            catch (Exception e)
            {
                // log.error("Cannot connect to database :" + e);

                String message = "Unable to query the archive database : " + e;
                XMLBuilder.dbError(message);            
            }
        }
        else
        {
            // not sure if ever reached
            result = "The query parameter  is a null value";
        }
        return result;
    } 
```

* * *

返回的所有信息都被发送到**XMLBuilder**以打包成 XML，但没有返回任何内容。这意味着在处理异常时不会调用我的类中的函数。

**XMLBuilder.dbError()**

```
public static String dbError(String message)
{
    //added uniquestring generator for id 
            String uniqueId = UUID.randomUUID().toString();

    String result = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\" ?> "
            + "<SMessage MessageId=\"" + uniqueId + "\" MessageType=\"Integration Object\" IntObjectName=\"Test\" IntObjectFormat=\"Siebel Hierarchical\""
            + " ReturnCode=\"1\" ErrorMessage=\"Database error" + message + ".\">" +
    "</SMessage>";
    return result;
} 
```

如何获得返回的错误消息，以便确定这是服务器错误还是我的 servlet

谢谢

圣诞快乐，节日快乐！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:10:34.830

您正在调用此方法：

```
XMLBuilder.dbError(message); 
```

但不使用它的结果。所以`result`变量保持空白，这就是你返回给客户端的内容。

我宁愿将所有 execptions（您无法从中恢复）抛出到顶级请求处理程序方法（否则您将复制所有 XML 编组调用）。只有这样，您才应该：

1.  在您的服务器日志中记录该异常
2.  向客户端显示错误（通过 XML）

这将为您提供一种更一致（更少重复）的错误处理方式，并且您不必从代码的深处呈现 XML 包装的错误。

顺便说一句，您的代码不是线程安全的。您在类上调用“静态”方法来设置连接等。最好在一个服务方法中获取连接、语句等。

# three.js - 由three.js创建的立方体是干涉的，当旋转相机时，这些立方体的一部分变成透明的，

> ID：14019880
> 
> 赞同：1
> 
> 时间：2012-12-24T10:08:49.517
> 
> 标签：three.js

我用three.js CanvasRender 创建了一些立方体。我遇到了一个问题，旋转相机时这些立方体的一部分变成透明的，请看图片（[http://imgur.com/fAY6B](http://imgur.com/fAY6B)）。当我将 CanvasRender 更改为 WebGLRender 时，无法重现该问题。我必须使用 CanvasRender。

有什么想法吗？任何帮助都感激不尽。

```
for (....){
  var material = new THREE.MeshPhongMaterial({ color: color.getHex(), shading: THREE.FlatShading, overdraw: true});
  var geometry = new THREE.CubeGeometry(width, height, depth, 1, 1, 1);
  var cube = new THREE.Mesh(geometry, material);
  cube.position = position;
  scene.add(cube);
} 
```

我尝试将 heightSegments 值设置为更高，它看起来确实不错，但仍然无法达到我想要的效果。jsfiddle 链接在这里。 [http://jsfiddle.net/qcy1121/xn7ad/](http://jsfiddle.net/qcy1121/xn7ad/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:17:08.177

您所看到的是`CanvasRenderer`由于它处理深度排序的方式的限制。

在`WebGLRenderer`像素级别`CanvasRenderer`排序时，在多边形级别排序。

您可以做的最好的事情是像这样增加立方体的镶嵌：

```
var geometry = new THREE.CubeGeometry(width, height, depth, 1, 10, 1); 
```

更新小提琴：http: [//jsfiddle.net/xn7ad/1/](http://jsfiddle.net/xn7ad/1/)

性能会受到影响。

三.js r.53

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:37:44.067

我希望这会奏效。

用于`side: THREE.DoubleSide`材料

[jsfiddle](http://jsfiddle.net/jFyFJ/2/)

# objective-c - 目标 C 中的 TCP/IP？

> ID：14019884
> 
> 赞同：1
> 
> 时间：2012-12-24T10:09:06.757
> 
> 标签：objective-c, c, sockets, tcp-ip, cfnetwork

我只想在目标 C 或 C 中模仿下面的 PHP，

```
<?php
$host="192.168.1.4";
$port = 1000;
$message="Hi";

// open a client connection

$fp = fsockopen ($host, $port, $errno, $errstr);

if (!$fp){

$result = "Error: could not open socket connection";

}
else{

fputs ($fp, $message);

fputs ($fp, "END");

fclose ($fp);

}

?> 
```

我在Objective C中实现了以下功能，但这并不是那么可靠和快速，只有第一条消息被传递，我需要重新连接第二个数据（我已经尝试过[https://github.com/robbiehanson/CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)，但反映了结果与以下代码相同）。我需要打开数据->发送数据->关闭连接（需要即时无延迟）

```
NSString *ipaddress =[NSString stringWithFormat:@"192.168.1.4"];

        CFReadStreamRef readStream;
        CFWriteStreamRef writeStream;
        CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)ipaddress, 1000, &readStream, &writeStream);

        inputStream = (NSInputStream *)readStream;
        outputStream = (NSOutputStream *)writeStream;
        [inputStream setDelegate:self];
        [outputStream setDelegate:self];
        [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

        [inputStream open];
        [outputStream open]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:17:49.760

我强烈建议使用更高级别的框架进行网络通信。在我的大部分项目中，我一直在使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket) - 比直接使用 iOS 的网络 API 的脑损伤要小得多。

# c - 结构范围

> ID：14019886
> 
> 赞同：0
> 
> 时间：2012-12-24T10:09:17.007
> 
> 标签：c, scope, structure

```
#include <stdio.h>
#include "prique.h"

void main()
{
    _pqueue *test;
    queue_init(&test);
    ... 
```

我不知道为什么我会收到这个错误。

> 错误：在 '{' 标记 | 之前应为 '='、','、';'、'asm' 或 ' **attribute '**

头文件中的结构是

```
typedef struct _pqueue
{
    int size;
    struct queue_node *first;
}_pqueue; 
```

我已经正确定义了结构。我看到一些讨论说这个错误与范围有关，但不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:38:32.317

你必须知道你也可以编译你的 *.h 文件。做这个：

`gcc -Wall prique.h`

确保您的头文件声明都是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:16:28.967

不确定这是否是问题所在，但某些编译器无法识别 void main()，因此：

```
int main() 
```

否则它可能是你的 prique.h 模块中的东西......

此外，如果您的 queue_node 以相同的方式定义（typedef struct queue_node {...} queue_node），那么您可能不需要 struct 关键字：

```
typedef struct _pqueue
{
    int size;
    queue_node *first;
} _pqueue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T01:43:47.963

我猜这`queue_node`和`pqueue`. 如果是这种情况，那么这应该可以解决问题。如果不是，则`queue_node`可能未在您的包含文件中定义。

下面的代码可能是您想要的。

```
typedef struct pqueue {
    int size;
    struct pqueue *first;
} pqueue_t;

void
main()
{
    pqueue_t *test;

} 
```

# amazon-s3 - 文件如何存储在 Amazon S3 中 ..？

> ID：14019887
> 
> 赞同：1
> 
> 时间：2012-12-24T10:09:20.527
> 
> 标签：amazon-s3

我们都知道 Dropbox 使用 Amazon S3 来备份文件，据说每 15 分钟就有 100 万个文件由 Dropbox 处理。那么 Amazon S3 的读取和写入必须是巨大的。

任何人都知道 S3 如何处理这么多文件描述符..？S3 后面是否有任何不同的文件系统？我的意思是 S3 是否为每个文件创建一个新的文件描述符..？或者打开一个文件，写入许多文件，直到它达到某个大小，比如 1 GB 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:24:11.310

（免责声明：我实际上并不知道 S3 的任何实现细节）：

听起来您正在做出两个错误的假设：

1.  每个保管箱“文件”==一个操作系统“文件”。
2.  所有文件都在一台机器上读/写。

每个 DropBox 文件都可能映射到单个 OS 文件，但它们也可能执行类似[Google File System 的](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/archive/gfs-sosp2003.pdf)操作，这会将文件分解为多个具有固定最大大小的较小文件。

其次，这些文件不会全部存储在一台机器上，而是存储在许多不同的机器上。因此，您不会在任何给定的机器上打开那么多文件描述符。

第三，您可能忘记了在任何给定时间打开的文件描述符的默认最大数量可以由 ulimit（来自命令行）或[setrlimit](http://linux.die.net/man/3/setrlimit)（来自 C 代码）提高。如果将限制提高到超出标准默认值以最大化可用描述符，我不会感到惊讶。

# shell - 使用 curl 上传本地目录中的所有文件

> ID：14019890
> 
> 赞同：24
> 
> 时间：2012-12-24T10:09:35.183
> 
> 标签：shell, curl, ftp, terminal

我想上传一个目录中的所有文件，我知道如何使用 curl 上传一个文件，如下所示：

```
curl -T "local/xxx.suffix" -u xxx:psw "ftp://192.168.1.158/public/demon_test/xxx.suffix" 
```

如何将当前目录中的所有文件（子目录）上传到 FTP 服务器？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-24T10:22:41.060

使用`curl`with`find`递归上传特定目录中的所有文件：

```
find mydir -type f -exec curl -u xxx:psw --ftp-create-dirs -T {} ftp://192.168.1.158/public/demon_test/{} \; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-18T22:05:15.217

使用 wput 代替 curl（不要与 wget 混淆）。

# java - Java日历添加不递增年份

> ID：14019893
> 
> 赞同：3
> 
> 时间：2012-12-24T10:10:15.157
> 
> 标签：java, android, calendar

我有一个存储周开始日期的变量，但是当我从 2012 年前进到 2013 年时，它不会更新年份。

正确添加日期和月份，因此它正确地从 26/12 到 02/01，但它保持为 2012。

```
// roll one week forward
Calendar cal = Calendar.getInstance();
cal.setTimeInMillis(mPrefsHelper.getWeekStart());
cal.add(Calendar.WEEK_OF_YEAR, 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:41:13.180

来自[java.util.Calendar的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)

> ```
> First Week 
> ```
> 
> Calendar 使用两个参数定义特定于语言环境的一周 7 天：一周的第一天和第一周的最少天数（从 1 到 7）。这些数字是在构造日历时从语言环境资源数据中获取的。它们也可以通过设置它们的值的方法明确指定。
> 
> 在设置或获取 WEEK_OF_MONTH 或 WEEK_OF_YEAR 字段时，Calendar 必须确定月份或年份的第一周作为参考点。一个月或一年的第一周定义为从 getFirstDayOfWeek() 开始并至少包含该月或该年的 getMinimalDaysInFirstWeek() 天的最早 7 天时间段。周数 ..., -1, 0 在第一周之前；第 2 周、第 3 周、... 跟随它。请注意，get() 返回的标准化编号可能不同。例如，一个特定的日历子类可以将一年中第 1 周的前一周指定为上一年的第 n 周。

它是特定于语言环境的。在您的情况下，如果该周包含新年的几天，则将其计为新年的第 1 周。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T12:14:07.647

道歉，并感谢您的所有回复。我的问题特定于我的代码，在某些时候我正在这样做：

```
mCalendar.clear();
mCalendar.setFirstDayOfWeek(Calendar.MONDAY);
mCalendar.set(Calendar.WEEK_OF_YEAR, week);
mCalendar.set(Calendar.YEAR, year); 
```

并使用我从以前的代码获得的日期获得的值。

所以它得到了一个日期（比如 1 月 2 日星期三），它有 1 周和 2013 年。它会清除日历并正确设置周和年，但是我然后再次调用这个位，它正在设置年份以某种方式成为 2012 年。在大多数情况下，我基本上已经删除了这段代码，现在它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-23T02:12:06.567

# mysql - 是否可以从单个查询中检索来自不同数据库的数据？

> ID：14019895
> 
> 赞同：0
> 
> 时间：2012-12-24T10:10:25.927
> 
> 标签：mysql, database, oracle, select

我并不是真的在寻找一个像弹出的问题那样可能与这个问题重复的工会。

我想要做的是使用来自另一个数据库的数据查询我的数据库。像，

```
SELECT * 
FROM ORACLE_DB.A_TABLE
WHERE SERIAL_NUMBER
IN (
    SELECT SERIAL_NUMBER
    FROM MYSQL_DB.A_TABLE
) 
```

我使用 SQL Developer 作为我的 IDE，似乎对于我创建的每个查询表，它仅适用于单个数据库。

是这么简单还是我需要向查询中添加更多值，例如凭据和东西？还是我需要对特定主题进行一些研究？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:19:59.287

要从 Oracle DB 中访问非 Oracle 数据库，您需要配置[Heterogeneous Services](http://docs.oracle.com/cd/A58617_01/server.804/a58247/hs_ch6.htm "异构服务")。然后您只需创建一个数据库链接并像访问普通表一样访问该表，例如 select * from table@mysql_db

# c# - 编写扩展方法来调用控件的更好方法？

> ID：14019896
> 
> 赞同：3
> 
> 时间：2012-12-24T10:10:27.013
> 
> 标签：c#, c#-4.0, lambda, type-inference, method-invocation

我有这个通用函数来调用 WinForm 控件：

```
public static void Invoke(this Control c, Action action)
{
    if (c.InvokeRequired)
        c.TopLevelControl.Invoke(action);
    else
        action();
} 
```

我正在考虑通过引入更严格的约束来防止无意义的事情变得更好，可能就像：

```
button1.Invoke(() => list.Add(1)); 
```

也可能有多余的打字，如：

```
button1.Invoke(() => button1.Hide()); 
```

因为我们已经指定了`this`is `button1`。

所以我做到了：

```
public static void Invoke<T>(this T c, Action<T> action) where T : Control
{
    if (c.InvokeRequired)
        c.TopLevelControl.Invoke(action);
    else
        action(c);
} 
```

现在我得打电话了，

```
button1.Invoke((c) => c.Hide()); 
```

或者

```
button1.Invoke((c) => button1.Hide()); 
```

现在我有点觉得即使这样也有一些超出要求的打字。如果我指定`this`is `button1`，那么在 lambda 表达式中我不想`c`再次指定一个虚拟变量来告诉在哪里进行操作。无论如何我可以再次缩短这个时间吗？也许喜欢

```
button1.Invoke(Hide); 
```

或者

```
button1.Hide.Invoke(); 
```

或者在 C# 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-22T19:16:04.757

为了建立其他答案，我会将其放入一个单独的扩展类中。

```
public static void Invoke<T>(this T c, Action<T> action) where T : Control
    {
        if (c.InvokeRequired)
            c.Invoke(new Action<T, Action<T>>(Invoke), new object[] { c, action });
        else
            action(c);
    } 
```

这将防止`TargetParameterCountException`跨线程时抛出 a 。

致电：

```
button1.Invoke(x => x.Hide()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T10:41:32.920

首先让我说你可能想多了 - 短代码是一件很棒的事情，但是对于任何试图阅读代码的人来说，它开始变得混乱。

现在，您的第一个建议：

```
button1.Invoke(Hide); 
```

可以工作，如果你做到了：

```
button1.Invoke(button1.Hide); 
```

因为否则编译器无法知道在哪里寻找方法 Hide()。它甚至可能导致一些奇怪的行为，例如，如果所有这些代码都在某个派生类中，如下所示：

```
class A : Control {
    public A() {
         Button button1=new Button();
         button1.Invoke(Hide);
    }
} 
```

现在它可以编译了，但是 Hide() 方法将是整个控件的 Hide() 方法，而不是按钮！实现这一目标的方法很简单：

```
public static void Invoke(this Control c, Action action) {
    c.Invoke(action);
} 
```

后一种方式：

```
button1.Hide().Invoke(); 
```

即使不添加扩展方法也可以工作，你只需要做到：

```
((Action)button1.Hide).Invoke(); 
```

这当然意味着 Hide() 方法在当前线程中被调用，这可能不是你想要的。所以让它：

```
((Action)button1.Hide).Invoke(button1);
public static void Invoke(this Action action, Control c) {
    c.Invoke(action);
} 
```

抱歉回答太长，希望对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T11:41:22.930

您可以使用[SynchronizationContext.Post](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)或[SynchronizationContext.Send](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)让框架将操作封送到 UI 线程，无论是 Windows 窗体还是 WPF。静态[SynchronizationContext.Current](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.current.aspx)方法将为您的应用程序类型返回适当的同步上下文。

Post 异步执行，而 Send 阻塞直到操作完成。

以下代码将异步隐藏按钮：

```
SynchronizationContext.Current.Post(_=>button1.Hide(),null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-25T05:08:47.597

我会去：

```
public static void Invoke<T>(this T c, Action<T> action) where T : Control
{
    if (c.InvokeRequired)
        c.TopLevelControl.Invoke(action);
    else
        action(c);
} 
```

和

```
button.Invoke(c => c.Hide()); 
```

它是最干净的（为您提供最初指定的按钮以执行操作）和最安全的（您不必指定`button1`两次...它作为 lambda 的参数返回给您） . 我相信这是优雅的语法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T11:08:59.493

它绝对不能像`button1.Invoke(Hide);`或`button1.Hide.Invoke();`因为 C# 语法限制而完成。

但是如果你愿意放弃 IntelliSense，你可以把它缩短一点。不利的一面是，通常可以在编译时检测和修复的一些错误（如拼写错误或参数不匹配）将成为运行时错误。有时可以接受，有时不能。

展望未来，这是一个**示例用法**：

```
button1.Invoke("Hide"); 
```

或者

```
button1.Invoke("ResumeLayout", true); 
```

**解决方案：**

```
internal static class ExtensionMethods
{
    internal static object Invoke<TControl>(this TControl control,
        string methodName, params object[] parameters)
        where TControl : Control
    {
        object result;

        if (control == null)
            throw new ArgumentNullException("control");

        if (string.IsNullOrEmpty(methodName))
            throw new ArgumentNullException("methodName");

        if (control.InvokeRequired)
            result = control.Invoke(new MethodInvoker(() => Invoke(control,
                methodName, parameters)));
        else
        {
            MethodInfo mi = null;

            if (parameters != null && parameters.Length > 0)
            {
                Type[] types = new Type[parameters.Length];
                for (int i = 0; i < parameters.Length; i++)
                {
                    if (parameters[i] != null)
                        types[i] = parameters[i].GetType();
                }

                mi = control.GetType().GetMethod(methodName,
                    BindingFlags.Instance | BindingFlags.Public,
                    null,  types, null);
            }
            else
                mi = control.GetType().GetMethod(methodName,
                    BindingFlags.Instance | BindingFlags.Public);

            if (mi == null)
                throw new InvalidOperationException(methodName);

            result = mi.Invoke(control, parameters);
        }

        return result;
    } 
```

# php - PHP - PDO - 我应该在 try{} 块中放入什么

> ID：14019897
> 
> 赞同：1
> 
> 时间：2012-12-24T10:10:33.193
> 
> 标签：php, pdo

尝试捕获异常时，应将 prepare 和 bindParam 语句放在 try{} 块中。可以准备和 bindParam 导致/生成/whatever-the-proper-term-is 异常吗？

现在我只在 try{} 中放了 execute()，我不知道这是否是正确的做事方式。

那么，我应该这样做：

```
$s = $dbh->prepare("select * from products where id=:p_id");
$s->bindParam(":p_id",$p_id,PDO::PARAM_INT);
try {
    $s->execute();
} catch (PDOException $e) {
    log_error("MySQL error: ".$e->getMessage());
} 
```

或者

```
try {
    $s = $dbh->prepare("select * from products where id=:p_id");
    $s->bindParam(":p_id",$p_id,PDO::PARAM_INT);
    $s->execute();
} catch (PDOException $e) {
    log_error("MySQL error: ".$e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:19:07.743

通常它根本不应该在应用程序代码中使用。

许多使用`try.. catch`的草图代码只是草图，以显示一些想法。并且不应该照原样复制。

应该有一个应用程序范围的异常处理程序，负责捕获所有异常并采取适当的措施（记录错误消息并正常抛出 503 HTTP 错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:14:09.403

关于尝试的事情 - 你应该把可以抛出异常的东西放在那里。
我所看到的 - 将所有连接到 execute/... 的语句放入这个块中，很容易被误导什么会抛出异常......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:27:39.800

我认为有一个 try/catch 子句是为了捕获任何可能抛出的语句引发的异常，这是颠倒的世界。相反，您想要的是显式地为您事先知道可能发生异常的语句提供回退机制，您可以从中恢复。

您可以选择在日志文件中写下异常并继续执行路径，但这会带来麻烦（如果不在测试中，它将在发布之后），因为这会使会话处于未定义状态。在给出的示例中，您就是这样做的，您在日志文件中写下一些内容，之后您的行为就像世界没有发生任何变化一样。现在，如果查询本身试图插入您现在丢失的财务记录，而您显然不知道该怎么办？

# eclipse - 调用层次结构和查找引用 eclipse 有什么区别？

> ID：14019906
> 
> 赞同：48
> 
> 时间：2012-12-24T10:11:57.867
> 
> 标签：eclipse, eclipse-plugin

`eclipse` `Ctrl`在++和`Shift`++中使用这两个命令时，我感到困惑，两者都返回相同的结果。`G``Ctrl``Alt``H`

**场景**：

想要找到方法“ **findUsage** ”被调用的地方。

**样本类**

![在此处输入图像描述](../Images/152fefc92d65c0448e7b724486aa754e.png)

**调用层次结构输出`Ctrl``Alt``H`**( **++** **)** **。**

![在此处输入图像描述](../Images/30f606fe4929b5bce95501fff776c5b1.png)

**查找参考 ( `Ctrl`++ `Shift`)`G`输出**

![在此处输入图像描述](../Images/921e964164764aaf799c939700840c68.png)

两者都显示相同的结果。谁能知道这两个命令有什么区别？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-24T12:36:02.840

“查找引用”向您显示所选方法的所有**直接调用者。**相比之下，“呼叫层次结构”还显示了那些直接呼叫者的呼叫者，以及那些……的呼叫者，等等。

因此，如果您选择的方法的直接调用者本身没有任何调用者，则输出是相同的。只需在一些更大的代码库上尝试这两个命令，您就会立即看到不同之处，如下图所示：

![调用层次结构](../Images/bd60137a56219fe99a5abd168e22b493.png)

如果您想知道为什么有两个这样的功能，如果“查找引用”基本上只是“调用层次结构”的一个子集：查找引用的工作速度非常快，因此您可以一直使用它而无需等待结果。另一方面，调用层次结构需要更多的计算时间，因此可能会中断您的编码工作流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-25T01:59:17.440

*   **`Ctrl`+ `Shift`+`G`**：工作区中的引用。它仅显示源代码中所选类或方法或变量的 **引用。**
*   **`Ctrl`+ `Alt`+`H`**：调用**层次**结构。它显示了直到根类的所有**层次结构。**

# opengl - glTexImage2DMultisample 如何工作？

> ID：14019910
> 
> 赞同：2
> 
> 时间：2012-12-24T10:12:05.657
> 
> 标签：opengl, textures, opengl-3, fragment-shader, multisampling

我想使用多重采样纹理。

片段着色器是什么以及如何将多个采样器传递给着色器？

另外，可以使用哪个 API 来加载纹素数据？

我想为此使用默认的 FBO。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T12:16:03.197

您的主题仍然很广泛，很难在这里给出深入的答案。事实上，您在这里提出了 3 个不那么琐碎的问题，您应该阅读相关文献。而对您来说最好的方法是从[这里](http://www.arcsynthesis.org/gltut/)开始并可能获得[这](http://www.starstonesoftware.com/OpenGL/)本书也。我的答案假设您使用的是现代（可编程）OpenGL：

> 我想使用多重采样纹理。

假设您在使用自己的帧缓冲区来使用默认帧缓冲区时需要它，您不需要多重采样，因为它是自动为您完成的。您所需要的只是在创建 OpenGL 上下文时定义多个样本（例如使用[GLFW](http://www.glfw.org/)库）。因此，如果您有一个自定义帧缓冲区对象 (FBO) 并且想要对纹理进行多重采样以消除锯齿边缘，您应该创建一个多重采样纹理对象：

```
glTexImage2DMultisample(GL_TEXTURE_2D_MULTISAMPLE, 4, GL_RGBA, FRAMEBUFFER_SIZE.x, FRAMEBUFFER_SIZE.y, GL_TRUE); 
```

将其附加到 FBO。然后实际的渲染过程是这样的：

您将您的 FBO 与 MS 纹理附件绑定。渲染您的几何图形。然后您将多重采样纹理解析为常规纹理，或通过 blitting 直接解析为默认后缓冲区：

```
glBlitFramebuffer(
    0, 0, FRAMEBUFFER_SIZE.x, FRAMEBUFFER_SIZE.y, 
    0, 0, FRAMEBUFFER_SIZE.x, FRAMEBUFFER_SIZE.y, 
    GL_COLOR_BUFFER_BIT, GL_NEAREST); 
```

整个渲染过程应该是这样的：

```
void display()
{
glProgramUniform1i(ProgramName, UniformDiffuse, 0);

// Clear the framebuffer
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glClearBufferfv(GL_COLOR, 0, &glm::vec4(1.0f, 0.5f, 0.0f, 1.0f)[0]);

glUseProgram(ProgramName);

// Pass 1
// Render the scene in a multisampled framebuffer
glEnable(GL_MULTISAMPLE);
renderFBO(ProgramName, FramebufferRenderName);
glDisable(GL_MULTISAMPLE);

// Resolved multisampling
glBindFramebuffer(GL_READ_FRAMEBUFFER, FramebufferRenderName);
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glBlitFramebuffer(
    0, 0, FRAMEBUFFER_SIZE.x, FRAMEBUFFER_SIZE.y, 
    0, 0, FRAMEBUFFER_SIZE.x, FRAMEBUFFER_SIZE.y, 
    GL_COLOR_BUFFER_BIT, GL_NEAREST);

swapBuffers();
} 
```

顺便说一句，这些代码片段取自[这个很棒的站点](http://www.g-truc.net/) ，您可以在其中找到 OpenGL 代码示例，其中展示了许多一般问题（包括您的问题）的解决方案。

> 片段着色器是什么以及如何将多个采样器传递给着色器？

从上述站点下载示例并查看**ogl-330-fbo-multisample.cpp**和随附的片段着色器。

> 另外，可以使用哪个 API 来加载纹素数据？使用哪些 API 来应用此纹理？

您可以使用 GLFW 轻松加载 TGA 纹理。如果您想加载几乎任何可能的图像格式，请查看[DevIL](http://openil.sourceforge.net/)

# php - 设置下载文件的路径

> ID：14019913
> 
> 赞同：0
> 
> 时间：2012-12-24T10:12:28.840
> 
> 标签：php, csv, download

我想使用 php.ini 将所有下载的下载路径设置为特定文件（目标文件主要是 excel 的 csv 文件）。有没有人对此有任何解决方案？我试过 file_put_contents 但失败了。

感谢所有回复。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:58:51.740

您可以告诉浏览器应该下载一个文件（即它是一个附件），并使用 Content-Disposition HTTP 响应标头提供一个默认文件名。

```
Content-Disposition: attachment; filename=example.csv 
```

例如

```
<?php
header('Content-Type: text/csv');
header('Content-Disposition: attachment; filename=example.csv');
readfile('/foo/bar/baz.csv'); 
```

您无法指定文件应保存到客户端系统上的哪个目录。

# visual-studio-2010 - Web 设置（msi 安装程序）和 iis 7（applicationhost.config）

> ID：14019915
> 
> 赞同：0
> 
> 时间：2012-12-24T10:12:51.020
> 
> 标签：visual-studio-2010, iis-7, web, windows-installer, installation

当我运行通过 vs2010 的 Web 设置创建的 msi 安装程序时。它正确安装了 Web 应用程序，但是 **

> 错误配置应用程序的物理路径。

** 任何人都知道为什么会这样，例如它有如下额外的正斜杠

![在此处输入图像描述](../Images/d69a93f09476ecbd5d6ff9895ff8124e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:31:53.203

如果您自己无法在其中找到问题，请尝试创建[详细日志并将其发布。](http://support.microsoft.com/kb/223300)

# ios - -[NSCalendar components:fromDate:toDate:options] 总是返回 0 diff

> ID：14019921
> 
> 赞同：2
> 
> 时间：2012-12-24T10:13:21.770
> 
> 标签：ios, nscalendar, nsdatecomponents

我已经阅读了一些关于如何在 iOS 中计算 2 个日期之间的差异的线程，这是一个似乎也由 Apple 文档提供的示例，我用它来确定 2 个日期是否相同（忽略时间）。但是组件：方法总是返回年=0，月=0，日=0，即使两个日期不同。我不知道为什么......我会很感激你的想法......

```
+ (BOOL)isSameDate:(NSDate*)d1 as:(NSDate*)d2 {
if (d1 == d2) return true;
if (d1 == nil || d2 == nil) return false;

NSCalendar* currCal = [NSCalendar currentCalendar];

// messing with the timezone - can also be removed, no effect whatsoever:
NSTimeZone* tz = [NSTimeZone timeZoneForSecondsFromGMT:0];
[currCal setTimeZone:tz];

NSDateComponents* diffDateComps =
[currCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
        fromDate:d1 toDate:d2 options:0];

return ([diffDateComps year] == 0 && [diffDateComps month] == 0 && [diffDateComps day] == 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T07:12:21.283

好的，我发现了问题，不是每个日期都发生，只有连续的日期发生。事实证明，'isSameDate' 没有正确实现，因为组件：fromDate:toDate 将在 12 月 23 日 8:00、12 月 24 日 07:59 返回 0，即使时间组件不在组件标志中！但它会在 12 月 23 日 8:00、12 月 24 日 8:01 返回 1。

要修复我的方法，我需要执行其他操作：

```
NSDateComponents* c1 =
    [currCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
        fromDate:d1];

NSDateComponents* c2 =
    [currCal components:NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit
        fromDate:d2];

return ([c1 day] == [c2 day] && [c1 month] == [c2 month] && [c1 year] == [c2 year]); 
```

# c# - 我们可以在同一个水晶报表中同时使用存储过程和数据集吗？

> ID：14019932
> 
> 赞同：0
> 
> 时间：2012-12-24T10:14:25.217
> 
> 标签：c#, visual-studio-2010, crystal-reports

我在 VS 2010 中使用 Crystal Reports。我有两个子报告。在第一个子报告中我必须使用存储过程，而在另一个子报告中我必须使用数据集。

我知道要使用数据集或过程，但不能同时使用。

在我们设置的数据集的情况下

```
CrystalReport rpt=new CrystalReport(); 
```

一个新的报告文件被创建，结果程序被删除

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T06:05:41.493

我几乎不怀疑这是可能的，您可以使用存储过程或数据集，但不能同时使用

# opengl - OpenGL 2D 形状问题

> ID：14019936
> 
> 赞同：1
> 
> 时间：2012-12-24T10:15:39.323
> 
> 标签：opengl, java, lwjgl

我正在尝试在 LWJGL 中使用 OpenGL 制作形状，但每次我这样做时，都会使这个三角形凹进去。

编码：

```
//The Window Is 800 Wide And 600 Tall
GL11.glBegin(GL11.GL_QUADS);
GL11.glVertex2i(0, 0);
GL11.glVertex2i(800, 0);
GL11.glVertex2i(0, 600);
GL11.glVertex2i(800, 600);
GL11.glEnd(); 
```

结果：

![OpenGL 失败](../Images/1171c6ccc712e70ed6dbd8391b0904d7.png)

此外，代码要大得多。我只是放了绘制形状的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T11:05:10.267

操作顺序在 OpenGL 中确实很重要。这段代码如下：

放下一支“铅笔”（我建议你用一支真正的铅笔在一张实际的纸上做这个，一边阅读，即按照说明，放下铅笔并在不抬起铅笔的情况下做以下动作）——画一个四边形

```
GL11.glBegin(GL11.GL_QUADS); 
```

第一个角左下角

```
GL11.glVertex2i(0, 0); 
```

右下角第二个角

```
GL11.glVertex2i(800, 0); 
```

Thid 角落左上角

```
GL11.glVertex2i(0, 600); 
```

右上角第四角

```
GL11.glVertex2i(800, 600); 
```

通过将铅笔返回到第一点来完成四边形。

```
GL11.glEnd(); 
```

OpenGL 期望您以一致的缠绕方式提供凸几何体，即顶点是按顺时针或逆时针方向绘制的。您在两者之间切换方向，这使得您定义的形状是非凸的。

我强烈建议你保持逆时针缠绕：

1.  左下方
2.  右下角
3.  右上
4.  左上方

这也是你用铅笔画四边形的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-24T10:43:42.017

尝试交换这两个：

```
 GL11.glVertex2i(0, 600);
 GL11.glVertex2i(800, 600); 
```

所以你有这个：

```
GL11.glBegin(GL11.GL_QUADS);
GL11.glVertex2i(0, 0);
GL11.glVertex2i(800, 0);
GL11.glVertex2i(800, 600);
GL11.glVertex2i(0, 600);
GL11.glEnd(); 
```

因此，在您的代码中，四边形中的顶点顺序为：左上、右上、左下、右下。这不是凸形。正确的顺序是：左上、右上、右下、左下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:54:06.917

解决它。我画左上、右上、右下、左下。不是左上、右上、左下、右下。

# gdb - 在 MAC 上调试 32 位 NACL exe？

> ID：14019937
> 
> 赞同：0
> 
> 时间：2012-12-24T10:15:39.477
> 
> 标签：gdb, google-nativeclient

我希望在 mac 平台上调试 32 位 nacl exe。我无法调试它，因为在 mac 平台上我找不到 32 位 nacl-gdb。有没有人成功做到过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:47:50.267

GDB for Native Client 是在 Pepper 23 中发布的，所以首先检查您使用的是 NaCl SDK 的 Pepper 23 版本或更高版本。（要下载任何新版本的 SDK，`./naclsdk update`请从您的`nacl_sdk`目录发出。完成后，您应该会看到一个`pepper_23`目录（或更新的目录）。使用该目录中的工具。）

在 SDK 中，GDB 二进制文件位于以下位置（基于 Pepper 23 的示例）：

```
nacl_sdk/pepper_23/toolchain/mac_x86_glibc/bin/i686-nacl-gdb
nacl_sdk/pepper_23/toolchain/mac_x86_glibc/bin/x86_64-nacl-gdb
nacl_sdk/pepper_23/toolchain/mac_x86_newlib/bin/i686-nacl-gdb
nacl_sdk/pepper_23/toolchain/mac_x86_newlib/bin/x86_64-nacl-gdb 
```

这两者`i686-nacl-gdb`实际上只是两者的符号链接`x86_64-nacl-gdb`。二进制文件将`x86_64-nacl-gdb`允许您调试 32 位和 64 位 x86 NaCl 目标。但是，在 Mac 上，Chrome 始终是 32 位的，并且将始终运行 32-bit `.nexe`，即使您的操作系统或机器是 64 位的。

newlib 和 glibc 工具链都包含一整套工具；这就是为什么你有两个`x86_64-nacl-gdb`二进制文件。目前，这两者没有区别，但为了您自己的理智，在与构建所用工具相同的目录中使用 GDB 可能是最简单的。

[https://developers.google.com/native-client/devguide/devcycle/debugging#gdb](https://developers.google.com/native-client/devguide/devcycle/debugging#gdb)有一些额外的指导。最重要的是将标志传递`--enable-nacl-debug`给 Chrome 或在 Chrome 中的 about:flags 下激活它。这将导致 Chrome 在执行 Native Client 内容之前等待调试器连接。

# javascript - window.orientation 在 iOS 和 Android 中返回不同的值

> ID：14019939
> 
> 赞同：6
> 
> 时间：2012-12-24T10:15:48.933
> 
> 标签：javascript, android, ios, orientation

我正在**iPad** *（Safari 浏览器）*和**Samsung Tab 2** *（默认浏览器）*上测试我的 Web 应用程序。*window.orientationchange*在两个设备中返回不同的值。

```
$(document).ready(function() {
            window.addEventListener("orientationchange", centerLoginBox);
            window.addEventListener("load", centerLoginBox);
        });

        function centerLoginBox() {
            if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode
                $('#loginbox').css('margin-top', '20%');
                alert(window.orientation);
            }
            else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode
                $('#loginbox').css('margin-top', '40%');
                alert(window.orientation);
            } 
```

*在选项卡 2 中，对于横向*模式，警报会抛出“0”和“180”，对于*纵向*模式会抛出值“90”和“-90” （**在 iPad 中只是相反的行为**）。

这是iOS和Android的某种设计差异吗？这个问题的常见解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T05:49:00.053

好的，这就是我所做的。我查询了用户代理信息并检查了设备是否基于 Android。如果是这样，请更改纵向和横向模式的*window.orientation条件。*

**代码**

```
function centerLoginBox() {
        var ua = navigator.userAgent.toLowerCase();
        var isAndroid = ua.indexOf("android") > -1; // Detect Android devices
        if (isAndroid) {
            //window.orientation is different for iOS and Android
            if (window.orientation == 0 || window.orientation == 180) { //Landscape Mode
                $('#loginbox').css('margin-top', '20%');
            }
            else if (window.orientation == 90 || window.orientation == -90) { //Portrait Mode
                $('#loginbox').css('margin-top', '40%');
            }
        }
        else {
            if (window.orientation == 90 || window.orientation == -90) { //Landscape Mode
                $('#loginbox').css('margin-top', '20%');
            }
            else if (window.orientation == 0 || window.orientation == 180) { //Portrait Mode
                $('#loginbox').css('margin-top', '40%');
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:48:11.500

[如本](https://stackoverflow.com/questions/1649086/detect-rotation-of-android-phone-in-the-browser-with-javascript)问题的第二个答案中所述，您可以分配两个侦听器：一个用于方向更改，一个用于调整屏幕宽度/高度值的大小。这样您就不必依赖旋转的值，因为它们在不同的设备中是不一致的。

# c# - 无法使用 SqlBulkCopy 从 Excel 中读取第一行

> ID：14019940
> 
> 赞同：5
> 
> 时间：2012-12-24T10:15:51.430
> 
> 标签：c#, asp.net, .net, sqlbulkcopy

我正在使用以下代码将 Excel 文件更新到 SQL Server 中。代码正在运行，但无法将第一行插入表中。

```
OleDbConnection OleDb = new OleDbConnection(ConnectionString);
OleDbCommand OleDbCmm = new OleDbCommand(Query,OleDb);
OleDbDataReader OleDbdr;
OleDb.Open();

if (OleDb.State == ConnectionState.Open)
{
    OleDbdr = OleDbCmm.ExecuteReader();
    SqlBulkCopy BulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["connstring"].ToString());
    BulkCopy.DestinationTableName = "TempTable";

    if (OleDbdr.Read())
    {
       BulkCopy.WriteToServer(OleDbdr);
    }
 }

 OleDb.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-04-27T20:38:42.027

即使我面临同样的问题，这是因为我使用了`Read()`如下方法。

```
while (dr.Read()) {
    bulkcopy.WriteToServer(dr);
} 
```

上述问题的解决方案是删除`dr.Read()`方法和while循环使用 `bulkcopy.WriteToServer(dr)` 没有任何条件和`Read()`方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:22:49.517

一个可能的原因可能是您在连接字符串中指出第一行包含列名 ( `HDR=YES`)，因此该行不被视为包含数据。

**编辑**

另一个可能的原因是在将读取器传递给对象`OleDbDataReader.Read()`之前调用方法。[MSDN 状态](http://msdn.microsoft.com/en-us/library/434atets%28v=vs.100%29.aspx)：`SqlBulkCopy`

> 复制操作从阅读器中的下一个可用行开始。大多数情况下，读取器只是由 ExecuteReader 或类似调用返回，因此下一个可用行是第一行。

因此，在您的情况下，您不应该打电话`OleDbdr.Read()`，因为这会将读者带到第一行；你应该`BulkCopy`打电话`Read()`，它会从第一行开始读取。您的代码应该是：

```
OleDbdr = OleDbCmm.ExecuteReader();
SqlBulkCopy BulkCopy = new SqlBulkCopy(ConfigurationManager.ConnectionStrings["connstring"].ToString());
BulkCopy.DestinationTableName = "TempTable";
BulkCopy.WriteToServer(OleDbdr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T10:18:24.130

您需要将 Excel 的标题设置为 sql，就像我在我的

```
string conn = "Provider=Microsoft.Jet.OLEDB.4.0;" +
"Data Source=" + Your D S+ ";" +
"Extended Properties=Excel 8.0;";
OleDbConnection sSourceConnection = new OleDbConnection(conn);
using (sSourceConnection)
{
   DataTable dtExcelData = new DataTable();
   string[] SheetNames = GetExcelSheetNames(strFileName);
   string[] preColumnHeader = new string[]{ "CarrierId", "StateId", "TerrCd", "ProgramId", "ClassId",
   "PremTypeID","Limit50_100", "Limit100_100", "Limit100_200", "Limit300_300", "Limit300_600", 
   "Limit500_500","Limit500_1mil", "Limit1mil_1mil", "Limit1mil_2mil", "OtherParameter" };
   sSourceConnection.Open();
   string strQuery = string.Empty;
   strQuery = "SELECT * FROM [" + SheetNames[0] + "]";

   OleDbDataAdapter oleDA = new OleDbDataAdapter(strQuery, sSourceConnection);
   oleDA.Fill(dtExcelData);
   sSourceConnection.Close();
   string[] colName = new string[dtExcelData.Columns.Count];
   int i = 0;
   foreach (DataColumn dc in dtExcelData.Columns)
   {
       colName[i] = dc.ColumnName;
       i++;
   }
   using (SqlBulkCopy bulkCopy = new SqlBulkCopy(connStr))
   {
       bulkCopy.DestinationTableName = "tbl_test";
       bulkCopy.WriteToServer(dtExcelData);
   }
} 
```

# android - Android GCM注册设备

> ID：14019941
> 
> 赞同：1
> 
> 时间：2012-12-24T10:16:01.853
> 
> 标签：android, google-cloud-messaging

我正在开发一个应用程序，我必须向 GCM 注册我的设备，但它没有注册我的设备。我已授予清单中的应用程序的所有权限我的日志在这里

注册onGCM的方法是

```
 public void register()
        {
            GCMRegistrar.checkDevice(this);
            GCMRegistrar.checkManifest(this);

            if (GCMRegistrar.isRegistered(this))
                {
                    Log.d("info", GCMRegistrar.getRegistrationId(this));
                }

            final String regId = GCMRegistrar.getRegistrationId(this);
            System.out.println("registration ID is " + regId);
            if (regId.equals(""))
                {
                    System.out.println("registration ID is " + regId);
                    GCMRegistrar.register(this, CommonUtilities.SENDER_ID);
                    Log.d("info", GCMRegistrar.getRegistrationId(this));
                    System.out.println("Get Reg ID: " + GCMRegistrar.getRegistrationId(this));
                }
            else
                {
                    Log.d("info", "already registered as" + regId);
                }
        } 
```

我的 GCM 服务是

```
public class GCMService extends GCMBaseIntentService
{
    public GCMService()
        {

            super(CommonUtilities.SENDER_ID);
        }

    public void generateNotification(Context context, String message)
        {
            long when = System.currentTimeMillis();
            NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(R.drawable.ic_launcher, message, when);
            String title = context.getString(R.string.app_name);

            Intent notificationIntent = new Intent(context, OffersActivity.class);
            PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK);
            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            notification.setLatestEventInfo(context, title, message, intent);
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notification.defaults |= Notification.DEFAULT_SOUND | Notification.DEFAULT_LIGHTS;
            notificationManager.notify(0, notification);
        }

    @Override
    protected void onError(Context arg0, String arg1)
        {
        }

    @Override
    protected void onMessage(Context arg0, Intent arg1)
        {
            Log.d("GCM", "RECIEVED A MESSAGE");             
            generateNotification(arg0, "New Offers Are Available");
        }

    @Override
    protected void onRegistered(Context arg0, String arg1)
        {
        }

    @Override
    protected void onUnregistered(Context arg0, String arg1)
        {
        }
} 
```

我的清单是

```
 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<!-- Map Location permissions -->
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<!-- Notification permissions -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="android.permission.READ_OWNER_DATA" />    

<permission
    android:name="myPackage.permission.C2D_MESSAGE"
    android:protectionLevel="signature" /> 
```

```
<!-- Storage permissions -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<!-- Internet permissions -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Call Phone permissions -->
<uses-permission android:name="android.permission.CALL_PHONE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="cmyPackage.SplashScreen"
        android:label="AppName"
        android:theme="@android:style/Theme.NoTitleBar" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="myPackage.CatagoriesActivity"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name="myPackage.OffersActivity"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name="myPackage.SettingsActivity"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name="myPackage.OfferDetailsAtivity"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <activity
        android:name="myPackage.DealInfoActivity"
        android:configChanges="keyboardHidden|orientation|keyboard"
        android:theme="@android:style/Theme.NoTitleBar" >
    </activity>
    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="myPackage" />
        </intent-filter>
    </receiver>
    <service android:name=".GCMService" />        

    <uses-library android:name="com.google.android.maps" />
</application>    

I/System.out(17369): Registering
D/GCMRegistrar(17369): resetting backoff for packageName
V/GCMRegistrar(17369): Registering app packageName of sendersID xxxxxxxxxxxxxx
registration id     Still Empty
(17369): Not yet registered 
```

我的应用程序中有多个包

```
public final class CommonUtilities
{
    public static final String SENDER_ID = "xxxxxxxxxxxxx";
    static final String TAG = "AndroidHive GCM";

    public static final String DISPLAY_MESSAGE_ACTION = "myPackage.pushNotifications.DISPLAY_MESSAGE";
    static final String EXTRA_MESSAGE = "message";
    static void displayMessage(Context context, String message)
        {
            Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
            intent.putExtra(EXTRA_MESSAGE, message);
            context.sendBroadcast(intent);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:04:20.883

如果它还没有解决..我想这可能是问题的原因......添加这个

```
 <uses-permission android:name="my_app_package.permission.C2D_MESSAGE" /> 
```

到您的 android 清单 xml。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T16:51:14.913

您应该包含您的日志输出，以便我们知道您运行应用程序时会发生什么。您还应该查看 GCM 演示并将其用作您的基础，因为您似乎缺少一些重要的代码：[http ://code.google.com/p/gcm/source/browse/samples/gcm-demo-客户端/src/com/google/android/gcm/demo/app/DemoActivity.java](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/DemoActivity.java)

如果您从 GCM 获得注册 ID，则您已在 GCM 注册（您是否获得了注册 ID？），下一步是在您的服务器上注册。这应该发生在以下 If 块的 else 中：

```
if (regId.equals("")) 
```

并且在您的 GCM 服务中的 onRegistered 中也是如此。这是当您的应用成功注册到 GCM 时将触发的回调。尝试注册后立即获取注册 ID 不会输出任何内容，因为与 GCM 的注册是异步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:45:54.287

您必须输入您的**unique_ID**（即 12 个字符）[CommonUtilities.java](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/CommonUtilities.java)

```
/**
* Google API project id registered to use GCM.
*/
static final String SENDER_ID = 123456789012; <---- 
```

# json - Json反序列化空引用

> ID：14019952
> 
> 赞同：0
> 
> 时间：2012-12-24T10:16:44.160
> 
> 标签：json

我有一个 Json 字符串，类似于以下内容：

```
{
   EventID: 4,
   CalendarEntry : 
   {
      CalendarID: 4,
      AreaID: 41,
      Name: "My Event Entry #4"
   }
} 
```

我将顶级结构反序列化为代码中的事件实体，该实体将 (4) 正确添加到 Id：

```
public class Event
{
    [DataMember(Name = "EventID")]
    public int Id { get; set; }
} 
```

但是，当我将 Calendar 作为属性添加到 Event 时，这两个 Id 总是返回 null？

```
public class EventCalendar
{
    [DataMember(Name = "CalendarID")]
    public int Id { get; set; }

    [DataMember(Name = "AreaID")]
    public int AreaId { get; set; }

    [DataMember(Name = "Name")]
    public string Name { get; set; }
}

public class Event
{
    [DataMember(Name = "EventID")]
    public int Id { get; set; }

    [DataMember(Name = "CalendarEntry")]
    public EventCalendar Calendar { get; set; }
} 
```

令我烦恼的是，如果我从 Id 或 AreaId 中删除 [DataMember] 属性，并为其命名与我的 JSON 字符串中的名称完全相同，它会返回正确的结果。但是，我不想在我的实体中使用相同的名称，并且希望 [DataMember] 正确带回数据？

我在 .Net 4.5 中使用 JsonSerializer。

我也用 Newtonsoft.Json 试过这个，它做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:31:10.627

```
{
   EventID: 4,
   CalendarEntry : 
   {
      CalendarID: 4,
      AreaID: 41,
      Name: "My Event Entry #4"
   }
} 
```

也许 ：-？

```
{
   EventID: 4,
   CalendarEntry : 
   [{
      CalendarID: 4,
      AreaID: 41,
      Name: "My Event Entry #4"
   }]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:08:23.273

这对我来说很好。验证您的输入 JSON 字符串是否有效。在这个例子中，我使用`System.Web.Script.Serialization`和 `System.Runtime.Serialization`

```
public static void Main (string[] args)
{
        JavaScriptSerializer ser = new JavaScriptSerializer();          
        string json = ser.Serialize(new Event { 
            Id =  4,
            Calendar = new EventCalendar {
                Id = 5,
                AreaId = 55,
                Name = "Some name"
            }
        });

        Console.WriteLine(string.Format("json  = {0}", json));
        Event fromJsonEvent = ser.Deserialize<Event>(json);

        Console.WriteLine(string.Format ("Event.Id = {0}", fromJsonEvent.Id));
        Console.WriteLine(string.Format ("Event.EventCalendar.Name = {0}", fromJsonEvent.Calendar.Name));
        Console.WriteLine(string.Format ("Event.EventCalendar.Id = {0}", fromJsonEvent.Calendar.Id));
    }
}

public class EventCalendar
{
    [DataMember(Name = "CalendarID")]
    public int Id { get; set; }

    [DataMember(Name = "AreaID")]
    public int AreaId { get; set; }

    [DataMember(Name = "Name")]
    public string Name { get; set; }
}

public class Event
{
    [DataMember(Name = "EventID")]
    public int Id { get; set; }

    [DataMember(Name = "CalendarEntry")]
    public EventCalendar Calendar { get; set; }
} 
```

# objective-c - 目标 C：使用 NSDates 时输出不正确

> ID：14019954
> 
> 赞同：0
> 
> 时间：2012-12-24T10:16:43.717
> 
> 标签：objective-c, nsdate, nscalendar, nsdatecomponents

我正在尝试获取当月的开始和结束日期。这里有一些类似的问题，但我在使用它们时得到了意想不到的结果。这是我所做的：

```
NSDate *monthStart,*monthEnd;   
NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];          
NSDateComponents *comps = [cal components:NSDayCalendarUnit fromDate:[NSDate date]];
[comps setDay:1];
[comps setHour:0];
[comps setMinute:0];
[comps setSecond:0];
monthStart = [cal dateFromComponents:comps];
[comps setDay:[[NSCalendar currentCalendar]
               rangeOfUnit:NSDayCalendarUnit
               inUnit:NSMonthCalendarUnit
               forDate:[NSDate date]].length];
[comps setHour:23];
[comps setMinute:59];
[comps setSecond:59];
monthEnd = [cal dateFromComponents:comps];
NSLog(@"%@",monthStart);
NSLog(@"%@",monthEnd); 
```

不幸的是，输出是：

```
2012-12-24 15:39:28.159 Popup[1010:403] 0001-12-31 18:06:32 +0000
2012-12-24 15:39:28.160 Popup[1010:403] 0001-01-31 18:06:31 +0000 
```

顺便说一句，我机器中配置的时区是 +5:30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:25:58.957

我对你的代码做了一点修改，以获得正确的答案

```
NSDate *monthStart,*monthEnd;
NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *currentDate = [NSDate date];
NSDateComponents *comps = [cal components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:currentDate];
[comps setDay:1];
[comps setHour:0];
[comps setMinute:0];
[comps setSecond:0];
[cal setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:19800]];
monthStart = [cal dateFromComponents:comps];

[comps setDay:[[NSCalendar currentCalendar] rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:[NSDate date]].length];
[comps setHour:23];
[comps setMinute:59];
[comps setSecond:59];
monthEnd = [cal dateFromComponents:comps];

NSLog(@"Start %@",monthStart);
NSLog(@"End   %@",monthEnd); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:54:57.597

如果您想知道当月的开始和结束日期...

开始总是第一天，结束可以按月名计算！！！

然后是非常简单的日期算术，

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];

NSMutableArray *months=[NSMutableArray arrayWithObjects:@"Jan",@"Feb",@"Mar",@"Apr",@"May",@"Jun",@"Jul",@"Aug",@"Sep",@"Oct",@"Nov",@"Dec", nil];
NSMutableArray *days=[NSMutableArray arrayWithObjects:@"31",@"28",@"31",@"30",@"31",@"30",@"31",@"31",@"30",@"31",@"30",@"31", nil];
//check if leap
[dateFormat setDateFormat:@"YYYY"];
NSInteger year=[[dateFormat stringFromDate:[NSDate date]]integerValue];
if(((year%4==0)&&(year%100!=0))||(year%400==0)) {
    [days replaceObjectAtIndex:1 withObject:@"29"];
}

NSMutableDictionary *daysInMonthDict=[[NSMutableDictionary alloc]initWithObjects:days forKeys:months];

[dateFormat setDateFormat:@"MMM"];
NSLog(@"Starting date is 1 and ending date is %@",[daysInMonthDict objectForKey:[dateFormat stringFromDate:[NSDate date]]]); 
```

# jquery - 验证时的 ScrollTo 元素

> ID：14019959
> 
> 赞同：0
> 
> 时间：2012-12-24T10:17:14.030
> 
> 标签：jquery, jquery-validate, scrollto

我有一个表单，它的功能很像这里的
[http://jsfiddle.net/Gajotres/TthG9/](http://jsfiddle.net/Gajotres/TthG9/)
但由于表单很长，我需要页面平滑滚动到出现错误的第一个元素，请采取看看我的代码：

```
highlight: function(label) {
        $(label).parent().find('.valid').each(function(){
            $('label[class^="valid"]').remove();       
        });
    },        
    success: function(label) {
        if(label.text('OK!').parent().find('.valid').html() == null) {
            label.removeClass('error').addClass('valid');  
        } else {
            label.remove();
        }
    },
     errorPlacement: function(error, element) {
        if (element.attr("name") == "firstname")
            {
                error.insertAfter("lastname");
            }
            else
            {
                error.insertAfter(element);
            }
        $.scrollTo(element, {duration: 750});
        }
    });

$("#frmsubmit").validate().form();
    $('label[class^="error"]:not(.valid)').remove(); 
```

因此，如您所见，我必须在页面加载时验证表单以检查标记正确的字段（根据客户要求），因此 scrollTo 使页面在加载时摆动然后在验证时摆动，我猜那是因为它验证了两次。我怎样才能以正确的方式做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:15:29.050

好的，我找到了一个技巧，但它会做，例如，我在页面顶部设置了一个全局变量

```
var firstcheck = 0 
```

在错误处理程序内部

```
if (firstcheck == 1){
$.scrollTo(element, {duration: 750});
} 
```

在我调用 form() 之后，我将其设置为 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:27:27.350

这可以通过多种方式完成。假设您要滚动到第一个错误，然后这样做：

```
$(document).ready(function(){
    $('#contact-form').validate(
    {
        rules: {
            name: {
                minlength: 2,
                required: true
            },
            email: {
                required: true,
                email: true
            },
            subject: {
                minlength: 2,
                required: true
            },
            message: {
                minlength: 2,
                required: true
            }
        },
        highlight: function(label) {
            $(label).parent().find('.valid').each(function(){
                $('label[class^="valid"]').remove(); 
                $(label).offset().top                
            });
        },        
        success: function(label) {
            if(label.text('OK!').parent().find('.valid').html() == null) {
                label.removeClass('error').addClass('valid');  
            } else {
                label.remove();
            }
        }        
    });
    $("#contact-form").validate().form();
    $('label[class^="error"]:not(.valid)').remove();
});
​ 
```

[JSFiddle](http://jsfiddle.net/TthG9/6/)

# sql - 删除 SQL Server 数据 ID 不存在

> ID：14019960
> 
> 赞同：1
> 
> 时间：2012-12-24T10:17:19.400
> 
> 标签：sql, sql-server

我不是精通 SQL 查询，但我正在尝试构建一个查询以删除任何基于使用 ID 匹配的另一个表（用户）的连接的数据（报告的评论），下面是一个示例模式：

```
create table tbl_reported_comment(id int, commentId int, reported_by_userid int);

insert tbl_reported_comment values
  (1, 1, 101),
  (2, 2, 131),
  (3, 3, 101),
  (4, 4, 101),
  (5, 5, 24),
  (6, 6, 201),
  (7, 7, 1),
  (8, 8, 24),
  (9, 9, 23),
  (10, 10, 16),
  (11, 11, 31);

Create table tbl_user(userId int, Username varchar(50));

insert tbl_user values
  (1, 'admin'),
  (101, 'test1'),
  (131, 'test2'),
  (24, 'test3'),
  (201, 'test4'); 
```

在这种情况下，我要实现的目标如下：

> *删除 tbl_reported_comment 表中的任何数据，其中 [reported_by_userid] 列在用户表中不作为 [userId] 存在*

以下是带有此示例架构的 SQLFIDDLE 的链接：[SQLFiDDLE](http://sqlfiddle.com/#!3/e0f90)。我使用 SQL Server 作为数据库。

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:23:03.420

这个怎么样？

```
 DELETE FROM dbo.tbl_reported_comment
  OUTPUT DELETED.id, DELETED.commentId, DELETED.reported_by_userid
  WHERE reported_by_userid NOT IN 
             (SELECT UserID FROM dbo.tbl_user) 
```

这将删除这些行并将其删除的行输出到屏幕（在 SQL Server Management Studio 中），以便您查看删除的内容。

Ben 是对的——一旦你这样做了，你应该在这两个表之间建立一个外键关系，以避免将来像这样的*僵尸数据！*

```
-- make your "UserID" column NOT NULL
ALTER TABLE dbo.tbl_user
ALTER COLUMN UserID INT NOT NULL

-- so that we can use it as the PRIMARY KEY for that table!
ALTER TABLE dbo.tbl_user
ADD CONSTRAINT PK_user PRIMARY KEY CLUSTERED(UserID)

-- so that we can then establish a FK relationship between those two tables....
ALTER TABLE dbo.tbl_reported_comment
ADD CONSTRAINT FK_reported_comment_user
FOREIGN KEY (reported_by_userid) REFERENCES dbo.tbl_user(UserID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:03:17.573

使用该函数的替代子查询`EXISTS`如下：

```
DELETE x
FROM  tbl_reported_comment x 
WHERE 
   NOT EXISTS 
    (
    SELECT 1
    FROM tbl_user y
    WHERE 
       x.reported_by_userid = y.userId
    ) 
```

# php - 如何找到每个月的第一个星期日

> ID：14019961
> 
> 赞同：-3
> 
> 时间：2012-12-24T10:17:21.787
> 
> 标签：php

我需要使用 php 代码每个月的第一个星期日日期。

请帮帮我。

```
getSunday(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-05T08:37:35.980

这是获得每月第一个星期日的最佳方式

```
echo date("Y-m-d", strtotime("first Sunday of ".date('M')." ".date('Y')."")); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-24T10:49:44.357

您可以使用[日期/时间扩展](http://php.net/datetime)。

```
$start    = new DateTime('2012-12-31');
$end      = new DateTime('2013-12-31');
$interval = DateInterval::createFromDateString('first sunday of next month');
$period   = new DatePeriod($start, $interval, $end, DatePeriod::EXCLUDE_START_DATE);
foreach($period as $time) {
    echo $time->format("F jS") . "<br>\n";
}
/*
January 6th 
February 3rd 
March 3rd 
April 7th 
May 5th 
June 2nd 
July 7th 
August 4th 
September 1st 
October 6th 
November 3rd 
December 1st
*/ 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-10T16:58:01.957

我正在寻找 DTS 日期，所以这是我找到它们的方法：

```
$dtsStart = date('Y-m-d 02:00:00', strtotime('Second Sunday Of March 2015'));
$dtsEnd = date('Y-m-d 02:00:00', strtotime('First Sunday Of November 2015')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-24T10:20:16.643

```
function firstSunday($DATE)
    {
        $date = strftime("%Y-%m",$DATE);
        $day = trim(strftime("%e",$DATE));

        for($day; $day <= '7'; $day++){
            $dd = strftime("%A",strtotime($date.'-'.$day));
            if($dd == 'Sunday'){
                return strftime("%Y-%m-%d",strtotime($date.'-'.$day));
            }
        }
    } 
```

# php - 在 foreach 循环中使用 PHP 常量

> ID：14019963
> 
> 赞同：2
> 
> 时间：2012-12-24T10:17:28.270
> 
> 标签：php

我需要在 foreach 循环中使用 PHP 内容：

```
define('WEBS', 'http://google.com, http://yahoo.com');
foreach (WEBS as $a) {
    //do something
} 
```

但是我设法通过以下代码做到了这一点，虽然它工作正常，但 aptana 编辑器显示语法错误。请指导我如何以正确的方式做到这一点。

```
foreach (get_defined_constants(true)['user']['WEBS'] as $w) {
//do something
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-24T10:20:00.783

您必须先`explode`了解价值观

```
foreach (explode(', ', WEBS) as $url) { ... 
```

[`explode()`](http://php.net/manual/en/function.explode.php)将一个字符串分解成一个数组，以便您可以遍历它

* * *

或者，您甚至可以使用`preg_split`.

```
foreach(preg_split('/,\s*/', WEBS) as $url) { ... 
```

[`preg_split()`](http://php.net/manual/en/function.preg-split.php)允许您根据正则表达式拆分字符串。它返回一个数组。例如，使用这个正则表达式，逗号后面的空格是可选的。

```
# a string like this
foo.com, hello.com,world.com,  test.com

# would still split properly to
[
  'foo.com',
  'hello.com',
  'world.com',
  'test.com'
] 
```

正则表达式方法并不总是必要的。但我想我会告诉你，在必要时可以进行更多控制。

* * *

Aptana 向您显示一个错误，因为在 PHP 5.4 之前的版本`[]`之后您无法使用。`func()`为了解决这个问题，您可以执行以下操作：

```
$constants = get_defined_constants(true);
$constants['user']['WEBS']; 
```

但在这种情况下`WEBS`应该没问题。您遇到的唯一问题是您需要先将字符串转换为数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:25:11.800

看起来像滥用常量。

看来您需要一个数组类型的常规变量。

```
$webs = array('http://google.com', 'http://yahoo.com');
foreach ($webs as $a) {
    //do something
} 
```

如果你仍然认为常量是你需要的——最好再问一个问题，解释为什么会这样，并被告知你做错了什么

# mysql - MySQL如何按年和月分组

> ID：14019964
> 
> 赞同：22
> 
> 时间：2012-12-24T10:17:49.243
> 
> 标签：mysql, group-by

我想从源表中测量 ID 和 ATTRIBUTE 的计数，并将数据显示在下面的“所需报告”中。我正在使用 MySQL。

**资源：**

```
ID  |  DATE        |  ATTRIBUTE
--------------------------------
1   |  2012-01-14  |   XYZ
2   |  2012-03-14  |   
3   |  2012-03-15  |   XYZ
4   |  2012-04-24  |   ABC
5   |  2012-04-10  |   
6   |  2012-05-11  |   ABC 
```

**所需报告：**

> **属性计数**

```
 YEAR | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC
   ---------------------------------------------------------------------------
   2010 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2011 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2012 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
```

> **身份证件数**

```
 YEAR | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC
   ---------------------------------------------------------------------------
   2010 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2011 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2012 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
```

> **完成百分比（属性计数/ ID 计数）**

```
 YEAR | JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC
   ---------------------------------------------------------------------------
   2010 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2011 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
   2012 |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0  |  0 
```

这是我到目前为止的代码。谢谢！另外请记住，我需要从数据中的日期字段中提取月份，但不确定如何。谢谢。

```
SELECT YEAR(document_filing_date),MONTH(document_filing_date),COUNT(aif_id)
FROM (a_aif_remaining)
GROUP BY YEAR(document_filing_date),MONTH(document_filing_date); 
```

建议的答案不起作用！不知道为什么，这是我得到的错误：

```
"#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' COUNT(CASE WHEN MONTH(document_filing_date) = 1 THEN aif_id END) AS Jan, CO' at line 1"

SELECT YEAR(document_filing_date,
  COUNT(CASE WHEN MONTH(document_filing_date) = 1 THEN aif_id END) AS Jan,
  COUNT(CASE WHEN MONTH(document_filing_date) = 2 THEN aif_id END) AS Feb,
  COUNT(CASE WHEN MONTH(document_filing_date) = 3 THEN aif_id END) AS Mar,
  COUNT(CASE WHEN MONTH(document_filing_date) = 4 THEN aif_id END) AS Apr,
  COUNT(CASE WHEN MONTH(document_filing_date) = 5 THEN aif_id END) AS May,
  COUNT(CASE WHEN MONTH(document_filing_date) = 6 THEN aif_id END) AS Jun,
  COUNT(CASE WHEN MONTH(document_filing_date) = 7 THEN aif_id END) AS Jul,
  COUNT(CASE WHEN MONTH(document_filing_date) = 8 THEN aif_id END) AS Aug,
  COUNT(CASE WHEN MONTH(document_filing_date) = 9 THEN aif_id END) AS Sep,
  COUNT(CASE WHEN MONTH(document_filing_date) = 10 THEN aif_id END) AS Oct,
  COUNT(CASE WHEN MONTH(document_filing_date) = 11 THEN aif_id END) AS Nov,
  COUNT(CASE WHEN MONTH(document_filing_date) = 12 THEN aif_id END) AS Dec,
FROM a_aif_remaining
GROUP BY YEAR(document_filing_date); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-24T10:24:41.360

此查询将计算所有行，并且还将仅计算`Attribute`不为空的行，按行中的年和月分组：

```
SELECT
  Year(`date`),
  Month(`date`),
  Count(*) As Total_Rows,
  Count(`Attribute`) As Rows_With_Attribute
FROM your_table
GROUP BY Year(`date`), Month(`date`) 
```

（这是因为 Count(*) 计算所有行，Count(Attibute) 计算 Attribute 不为空的所有行）

如果您需要 PIVOT 中的表，您可以使用它来仅计算 Attribute 不为空的行：

```
SELECT
  Year(`date`),
  Count(case when month(`date`)=1 then `Attribute` end) As Jan,
  Count(case when month(`date`)=2 then `Attribute` end) As Feb,
  Count(case when month(`date`)=3 then `Attribute` end) As Mar,
  ...
FROM your_table
GROUP BY Year(`date`) 
```

这要计算所有行：

```
SELECT
  Year(`date`),
  Count(case when month(`date`)=1 then id end) As Jan,
  Count(case when month(`date`)=2 then id end) As Feb,
  Count(case when month(`date`)=3 then id end) As Mar,
  ...
FROM your_table
GROUP BY Year(`date`) 
```

（或者，您可以使用kander 的回答中的日期，而不是计算 id）`Sum(Month(`。`)=1)`当然，您可以将这两个查询组合成这样：

```
SELECT
  Year(`date`),
  Count(case when month(`date`)=1 then id end) As Jan_Tot,
  Count(case when month(`date`)=1 then `Attribute` end) As Jan_Attr,
  Count(case when month(`date`)=2 then id end) As Feb_Tot,
  Count(case when month(`date`)=2 then `Attribute` end) As Feb_Attr,
  Count(case when month(`date`)=3 then id end) As Mar_Tot,
  Count(case when month(`date`)=3 then `Attribute` end) As Mar_Attr,
  ...
FROM your_table
GROUP BY Year(`date`) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:28:51.867

我想出了以下方法，但感觉可能有更有效的方法来解决这个问题......

```
select
year(`date`) as 'YEAR',
sum(month(`date`) = 1) as 'JAN',
sum(month(`date`) = 2) as 'FEB',
sum(month(`date`) = 3) as 'MAR',
    -- Repeat until december
FROM `source`
WHERE `ATTRIBUTE` = 'XYZ'
GROUP BY 1; 
```

# c# - google 的从 c# 到 java 的协议缓冲区 - 协议消息标签的线路类型无效

> ID：14019966
> 
> 赞同：2
> 
> 时间：2012-12-24T10:17:51.010
> 
> 标签：c#, java, exception, protocol-buffers

我正在 C# 中创建一个流并尝试在 java 中读取它，但我收到错误消息：“协议消息标签的线路类型无效。” 当我在我的 java 代码中读取它时，在 c# 中创建的对象。

**详细信息：** 我从一个相等的 .proto 文件（见下文）开始创建对应的 .java 文件和 .cs 文件（使用版本“protobuf-2.4.1”中的 java 协议和 protobuf-csharp-port-2.4 进行编译.1.473-full-binaries for c#)。我成功创建了 addressbook.java 和 addressbook.cs。

该对象在 c# 中创建并使用以下 c# 代码写入文件：

```
[...]
byte[] bytes;

        //Create a builder to start building a message
        Person.Builder newContact = Person.CreateBuilder();

        //Set the primitive properties
        newContact.SetId(1)
                  .SetName("Foo")
                  .SetEmail("foo@bar");

        //Now add an item to a list (repeating) field
        newContact.AddPhone(
            //Create the child message inline
            Person.Types.PhoneNumber.CreateBuilder().SetNumber("555-1212").Build()
            );

        //Now build the final message:
        Person person = newContact.Build();

        newContact = null;
        using(MemoryStream stream = new MemoryStream())
        {
            //Save the person to a stream
            person.WriteTo(stream);
            bytes = stream.ToArray();

            //save this to a file (by me)
            ByteArrayToFile("personStreamFromC#", bytes);
[...] 
```

我将创建的文件“personStreamFromC#”复制到我的 java 解决方案并尝试使用以下 java 代码读取它：

```
 AddressBook.Builder addressBook = AddressBook.newBuilder();

// Read the existing address book.
try {
    FileInputStream input = new FileInputStream(args[0]);
    byte[] data = IOUtils.toByteArray(input);
    addressBook.mergeFrom(data);
  // Read the existing address book.
  AddressBook addressBookToReadFrom =
          AddressBook.parseFrom(new FileInputStream(args[0]));
  Print(addressBookToReadFrom);
} 
```

但我收到以下消息：

> *线程“main”com.google.protobuf.InvalidProtocolBufferException 中的异常：协议消息标签的线路类型无效。在 com.google.protobuf.InvalidProtocolBufferException.invalidWireType(InvalidProtocolBufferException.java:78) 在 com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:498) 在 com.google.protobuf.GeneratedMessage$Builder.parseUnknownField(GeneratedMessage .java:438) 在 com.example.tutorial.AddressBookProtos$Person$Builder.mergeFrom(AddressBookProtos.java:1034) 在 com.example.tutorial.AddressBookProtos$Person$Builder.mergeFrom(AddressBookProtos.java:1) 在 com。 google.protobuf.CodedInputStream.readMessage(CodedInputStream.java:275) 在 com.example.tutorial.AddressBookProtos$AddressBook$Builder.mergeFrom(AddressBookProtos.java:1715) 在 com.example。*

**.proto 文件下方：** 包教程；消息人 { 必需的字符串名称 = 1; 必需的 int32 id = 2; // 此人的唯一 ID 号。可选字符串电子邮件 = 3；

```
 enum PhoneType {
   MOBILE = 0;
   HOME = 1;
   WORK = 2;
 }

 message PhoneNumber {
   required string number = 1;
  optional PhoneType type = 2 [default = HOME];
 }

 repeated PhoneNumber phone = 4;
 }

message AddressBook {
  repeated Person person = 1;
  } 
```

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T12:43:02.107

您用**C#**`Person`将对象写入文件，然后用**Java**读取，我认为这是不正确的。尝试在您的 Java 代码中执行以下操作：**`AddressBook`**

 ****```
Person.parseFrom(new FileInputStream(args[0])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:36:37.527

可能导致无效线型错误（*尤其是*在使用文件时）的一个常见错误是：覆盖现有文件而不截断它。我们看不到您的 ByteArrayToFile，但坦率地说，`File.WriteAllBytes`这可能是一个更简单的选择。问题是如果新数据**小于**原始内容，任何剩余的额外字节本质上都是*垃圾*。

我的建议：

*   检查是否可以在 c# 中反序列化它；如果不能，则错误肯定在文件处理中
*   如果它在 c# 中工作，请检查您如何将文件获取到 java 代码：您是否在任何地方复制它？
*   并检查您是否在所有阶段都使用二进制（而非文本）处理****

# android - 如何将多个变量传递给 Android 中的按钮 onClick 方法？

> ID：14019968
> 
> 赞同：0
> 
> 时间：2012-12-24T10:17:57.980
> 
> 标签：android, variables, onclick

我知道我可以使用 传递单个变量`android:tag="x"`并使用`view.getTag()`.

我怎样才能传递和检索多个？

编辑：我试图做的是使用`tag`按钮中的属性将值传递给单击它时调用的方法。我想知道是否可以在一个`Button`元素中使用两个或多个标签。从那以后我发现我做错了（我是一个安卓菜鸟）。`Button`当我应该给它一个id时，我试图在xml中使用它来存储按钮特定的数据，然后在代码中使用id来区分按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:29:18.993

您可以声明全局变量并设置该变量的值，并且可以在按钮`onClick(...)`方法中使用

# ios - UIViewController 子视图发布？

> ID：14019973
> 
> 赞同：1
> 
> 时间：2012-12-24T10:18:18.023
> 
> 标签：ios, uiviewcontroller

```
UIViewController *viewController = [[UIViewController alloc] init];
UIView *view1 = [[UIView alloc] init];
[viewController.view addSubview:view1];
[view1 release]; 
```

如果我想释放 viewController；

```
[viewController release]; 
```

我需要在发布 viewController 之前手动发布 view1 吗？

```
UIView *view = (UIView *)[[viewController.view subviews] objectAtIndex:0];
[view release];
[viewController release]; 
```

我应该这样做吗？或者只是释放viewController？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:21:34.917

不，你不必那样做。只需发布`viewController`，它将在`subviews`内部发布所有内容。其余的将由框架处理。

如果您不使用 ARC，您的代码将如下所示，

```
UIViewController *viewController = [[UIViewController alloc] init];
UIView *view1 = [[UIView alloc] init];
[viewController.view addSubview:view1];
[view1 release];

[viewController release]; 
```

由于您已经分配了`viewController`一次`view1`，因此您必须释放一次，如上所示。你不必再次发布，因为在那之后你没有做任何`retain`事情。

如果你这样做，

```
UIView *view = (UIView *)[[viewController.view subviews] objectAtIndex:0];
[view release]; 
```

它主要会在发布时导致崩溃，`viewController`因为您要发布它两次，并且`viewController's`子视图也在内部发布。

在这里，您必须注意的是，`addSubview`保留`view1`如[Apple 文档中所述。](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

> 要添加的视图。该视图由接收方保留。添加后，此视图显示在任何其他子视图之上。

这将在发布后`viewController`发布，您不必手动发布它，因为您不拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:26:17.353

这是正确的方法。

```
UIViewController *viewController = [[UIViewController alloc] init];
UIView *view1 = [[UIView alloc] init];
[viewController.view addSubview:view1];
[view1 release];
[viewController release]; 
```

当您将视图添加为子视图时，视图控制器将保留它。添加子视图：

将视图添加到接收者的子视图列表的末尾。

> `- (void)addSubview:(UIView *)view`
> 
> **参数**
> 
> **看法**
> 
> ```
> The view to be added. This view is retained by the receiver. After being added, this view appears on top of any other subviews. 
> ```
> 
> **讨论**
> 
> 此方法保留视图并将其下一个响应者设置为接收者，这是它的新超级视图。
> 
> 视图只能有一个超级视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。

参考[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

> 重要提示：视图控制器是其视图及其创建的任何子视图的唯一所有者。它负责创建这些视图并在适当的时候放弃它们的所有权，例如当视图控制器本身被释放时

参考：[UIViewController 类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

```
UIView *view = (UIView *)[[viewController.view subviews] objectAtIndex:0];
[view release]; 
```

当您在 viewController 上调用 release 时，它​​肯定会崩溃。

# jquery - 我如何为这个工具提示调用 :parent ？

> ID：14019974
> 
> 赞同：1
> 
> 时间：2012-12-24T10:18:36.593
> 
> 标签：jquery, css

我正在尝试将 Jquery 工具提示附加到表`tr`标记。`tr`但是，正如您[在此处](http://jsfiddle.net/7LaQQ/)看到的那样，我无法使其正常工作。如果我要说将`class`and`title`标记添加到`td`元素，我将如何将其应用于`:parent`css 以便在行中的任何位置显示工具提示？

目前，我正在使用这个不起作用

```
<tr class="normalTip" title="Hello, I am aToolTip"> 
```

这没有问题

```
<a href="#" class="normalTip" title="Hello, I am aToolTip">Normal Tooltip</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:20:31.033

### 尝试这个：

```
$('a.normalTip').parent().aToolTip(); 
```

* * *

我试过了，它奏效了。

```
$('tr').aToolTip(); 
```

### 小提琴：http: [//jsfiddle.net/7LaQQ/2/](http://jsfiddle.net/7LaQQ/2/)

* * *

### 添加到更多选择器：

使用这种方式：

```
$('tr, a').aToolTip(); 
```

或者如果您使用的是课堂方式，那么

```
$('.normalTip').aToolTip(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:22:16.487

可以这样做

```
$('.normalTip').aToolTip(); 
```

这将启动所有具有`.normal`css 类的实例。`a`然后标签是或`tr`或其他任何东西都无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:21:41.080

您需要调用[parent()](http://api.jquery.com/parent/)来获取当前元素的父级

**[现场演示](http://jsfiddle.net/rajaadil/7LaQQ/3/)**

```
$('a.normalTip').parent().aToolTip(); 
```

# java - 不比较日期

> ID：14019979
> 
> 赞同：-1
> 
> 时间：2012-12-24T10:19:01.683
> 
> 标签：java, android, date

在我的应用程序中，我想比较两个日期，我的 next_due 日期必须等于和大于当前日期。我对其进行了编码，但它不起作用:(代码中的更正是什么，以便我达到所需的结果请帮助

我的 Java 代码

```
public void CompareDates(){
      Calendar date = Calendar.getInstance();
      Calendar next_due_on = Calendar.getInstance();

    if(date.before(next_due_on))
    System.out.print("Current date(" + new SimpleDateFormat("dd/MM/yyyy").
    format(next_due_on.getTime()) + ") is greater than the given date " + new
    SimpleDateFormat("dd/MM/yyyy").format(date.getTime()));
          else
      System.out.print("Both date are equal.");
      }

 date_txtbx = (EditText) findViewById(R.id.date_txtbx);
        date_txtbx.setText(" " 
        + String.valueOf(java.text.DateFormat.getDateTimeInstance()
                                    .format(Calendar.getInstance().getTime())));

        next_due_on_txtbx = (EditText) findViewById(R.id.next_due_on_txtbx);
        next_due_on_txtbx.setText(non_ticket_task.next_due_on); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T12:18:24.543

在大多数情况下，当您进行日期操作时，您应该使用**joda-time**。您可以在以下网址找到主页：http: [//joda-time.sourceforge.net/quickstart.html](http://joda-time.sourceforge.net/quickstart.html)

![在此处输入图像描述](../Images/b9a1f1ee0a97782a99fadf93270d4603.png)

您可以轻松地将日期与方法`.isBefore()`和`isAfter()`

```
public boolean hasWordEnded(){

    String today = "24/12/2012";
    String endOfMayanCalendar = "21/12/2012";
    DateTimeFormatter fmt = DateTimeFormat.forPattern("dd/MM/yyyy");

    DateTime todayDate = fmt.parseDateTime(today);
    DateTime endOfWorldDate = fmt.parseDateTime(endOfMayanCalendar);

    if (todayDate.isAfter(endOfWorldDate)){
        return true;
    }
    return false;
} 
```

愿原力与你同在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T10:47:31.150

```
 public boolean dateCompare(Date date1 , Date date2){

    Calendar date = Calendar.getInstance();
    date.setTime(date1);
    Calendar next_due_on = Calendar.getInstance();
    next_due_on.setTime(date2);
    int temp = date.compareTo(next_due_on);
    if (temp == 0 || temp == -1)
        return false;
    return true;
} 
```

temp 将为 1,0,-1 您可以做出选择并从中获取布尔值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T10:44:42.113

```
Calendar date = Calendar.getInstance();
Calendar next_due_on = Calendar.getInstance(); 
```

来得太快，试试

```
Calendar date = Calendar.getInstance();
Calendar next_due_on = Calendar.getInstance();
System.out.println(date.getTimeInMillis());
System.out.println(next_due_on.getTimeInMillis()); 
```

你会看到以毫秒为单位的时间是一样的

```
1356345814527
1356345814527 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T10:49:38.723

试试下面的代码。

```
public static void main(String[] args)
{

    Calendar dueDate = Calendar.getInstance();
    System.out.println(isDueDateValid(dueDate));

    dueDate.add(Calendar.MONTH, -1);    
    System.out.println(isDueDateValid(dueDate));

    dueDate.add(Calendar.MONTH, 2); 
    System.out.println(isDueDateValid(dueDate));
}

public static boolean isDueDateValid(Calendar dueDate)
{
    Calendar currDate = Calendar.getInstance();

    return dueDate.after(currDate); 

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-24T10:46:21.920

```
Date date1;
Date date2;
[...]
Calendar c1 = Calendar.getInstance();
c1.setTime(date1);
Calendar c2 = Calendar.getInstance();
c2.setTime(date2);
int result = c1.compareTo(c2); // 0 if equal, < 0 if c1 before c2, > 0 if c1 after c2 
```

# php - 网址编码 - 解码

> ID：14019980
> 
> 赞同：3
> 
> 时间：2012-12-24T10:19:04.900
> 
> 标签：php, urlencode

我像这样将电子邮件传递到我的 URL：

```
http://www.mysite.com?email=external%2Bcustomer%40gmail.com 
```

但是当打印`$_REQUEST`它给我以下输出：

```
external^customer%40gmail.com /* console output */ 
```

我想要这样的输出：

```
external%2Bcustomer%40gmail.com 
```

请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:25:37.413

如果您希望输出与 URL 中传递的完全相同，请尝试以下操作：

```
print_r(urlencode($_REQUEST['email'])); 
```

`$_REQUEST`是自动解码的，所以需要重新编码。

# java - 适用于所有 API 级别的 Android 中的 Tabs+Swipe

> ID：14019981
> 
> 赞同：7
> 
> 时间：2012-12-24T10:19:06.700
> 
> 标签：java, android, actionbarsherlock

我的计划是为所有 Android 版本创建一个包含 Tabs+Swipe 的 Activity。如果我们从默认的 Android 项目中设置它，它至少支持 API 11。

在[Sherlock](http://actionbarsherlock.com/)中，我们有两个项目名为：Tab Navigation，Tab Navigation(collapsed) 包括 Tabs 但不包括 Swipe。They have Issue #240 in their samples that has a bug (swipe left/right when the tabs are in collapsed mode (landscape) and the selected item does not update).

你知道解决这个问题的任何示例代码吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T10:30:35.480

您现在使用默认的 Android 支持库（或 ABS）使用 a`ViewPager`和 a 进行了此操作`PagerTabStrip`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <android.support.v4.view.PagerTabStrip
            android:id="@+id/tabStrip"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"/>

    </android.support.v4.view.ViewPager>

</LinearLayout> 
```

然后创建一个`Adapter`to `ViewPager`that extends of `FragmentStatePagerAdapter`(for example) 并覆盖该方法`public CharSequence getPageTitle(int position)`以提供每个选项卡的标题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-24T12:00:51.023

我也碰巧有同样的情况。按照以下链接，您将获得所需的一切。

请参阅本教程 [http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html](http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html)

并从这里获取演示代码 [https://github.com/zmdominguez/vpi-abs-demo](https://github.com/zmdominguez/vpi-abs-demo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T10:44:46.087

我发现这些链接可能会对您有所帮助。

1.  [翻页器控件 - 类似于 android 主屏幕](https://stackoverflow.com/questions/5052324/a-page-flipper-control-like-the-android-home-screens)
2.  [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

# c# - 如何重定向到 FluentSecurity 中的特定页面？

> ID：14019985
> 
> 赞同：3
> 
> 时间：2012-12-24T10:19:38.027
> 
> 标签：c#, asp.net, .net, asp.net-mvc, fluent-security

您好我正在使用[FluentSecurity](https://github.com/kristofferahl/FluentSecurity)在我的 MVC 应用程序中验证和验证用户权限。在基本设置中，当用户想要访问拒绝`Action`时，它会引发异常。我想知道我应该如何重定向到另一个页面（例如登录页面）而不是显示黄色异常页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T20:19:19.030

我知道这个问题已经得到解答，但我不喜欢在处理这种情况的每个动作中都尝试捕获。

Fluent Security 允许您注册违反策略的处理程序（请参阅[https://github.com/kristofferahl/FluentSecurity/wiki/Policy-violation-handlers](https://github.com/kristofferahl/FluentSecurity/wiki/Policy-violation-handlers)）。您必须有一个从 IPolicyViolationHandler 继承的类。惯例是给你的班级命名`<PolicyViolationName>PolicyViolationHandler`

这是注册 DenyAnonymousAccessPolicyViolationHandler 的处理程序示例

```
 /// <summary>
    /// Custom Policy Violation Handler. See http://www.fluentsecurity.net/wiki/Policy-violation-handlers
    /// </summary>
    public class DenyAnonymousAccessPolicyViolationHandler : IPolicyViolationHandler
    {
        public ActionResult Handle(PolicyViolationException exception)
        {
            Flash.Error("You must first login to access that page");
            return new RedirectResult("/");
        }
    } 
```

您将遇到的另一个警告是您必须使用 IOC 容器来注册这些处理程序。我不会争论使用和 IOC 容器是好是坏，但如果我没有，我宁愿不使用。在他们的网站上有一篇关于如何在不使用 IOC 容器的情况下执行此操作的博客，但我也不太喜欢这种方法。这就是我所做的。

```
public static class SecurityConfig
    {
        public static void Configure()
        {
            SecurityConfigurator.Configure(c =>
                {
                    c.GetAuthenticationStatusFrom(() => HttpContext.Current.User.Identity.IsAuthenticated);
                    c.GetRolesFrom(() => (HttpContext.Current.Session["Roles"] as string[]));
                        // Blanked Deny All
                    c.ForAllControllers().DenyAnonymousAccess();

                    // Publicly Accessible Areas
                    c.For<LoginController>().Ignore();

                    // This is the part for finding all of the classes that inherit
                    // from IPolicyViolationHandler so you don't have to use an IOC
                    // Container.
                    c.ResolveServicesUsing(type =>
                        {
                            if (type == typeof (IPolicyViolationHandler))
                            {
                                var types = Assembly
                                    .GetAssembly(typeof(MvcApplication))
                                    .GetTypes()
                                    .Where(x => typeof(IPolicyViolationHandler).IsAssignableFrom(x)).ToList();

                                var handlers = types.Select(t => Activator.CreateInstance(t) as IPolicyViolationHandler).ToList();

                                return handlers;
                            }
                            return Enumerable.Empty<object>();
                        });
                });
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T10:28:06.587

我从不使用`FluentSecurity`，但您可以按照这种方式重定向您的操作。例如;

```
public ActionResult YourActionName()
{
   try
   {

   }
   catch ( Exception )
   {       
       return RedirectToAction("Index", "Home");
   }            
} 
```

您还可以使用[`HandleError`](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute%28v=vs.108%29.aspx)控制器类上的属性来捕获任何未处理的异常，它会自动返回`Error.aspx`共享文件夹中的视图。您也可以自定义它。

有关更多信息，请查看 ScottGu 的帖子。 [http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-24T11:56:06.030

目前[FluentSecurity](https://github.com/kristofferahl/FluentSecurity)稳定版（1.4）没有任何内置功能可以处理`PolicyViolationException`，但您可以创建一个过滤器来执行此操作，如下所示：

```
public class PolicyViolationExceptionHandler : IExceptionFilter
{
    public void OnException(ExceptionContext filterContext)
    {
        if (filterContext.Exception.GetType() == typeof(PolicyViolationException))
        {
            var routeDictionary = new RouteValueDictionary(new
            {
                area = "",
                controller = "account",
                action = "login"
            });

            // Redirect to specific page
            filterContext.HttpContext.Response.RedirectToRoute(routeDictionary);

            // Prevent to handle exceptions
            // Of 'PolicyViolationException' by default filters
            filterContext.ExceptionHandled = true;
        }
    }
} 
```

# sql - 食品数据库的数据库结构

> ID：14019986
> 
> 赞同：0
> 
> 时间：2012-12-24T10:19:40.103
> 
> 标签：sql, database

我写了一个网站供用户登录并将食物添加到他们自己的食物数据库中，以后可以将其作为“现有食物”列表引用

每个用户都有以下选项：

1.  在他们的数据库中添加新食物
2.  在他们的每日摄入量中添加新食物（来自每个用户独有的现有食物数据库）
3.  修改他们的设置页面（设置每日卡路里是目前唯一的选择）

到目前为止，我所拥有的（理论上）是：

```
users
=====
UID (primary key)
username
password

food
====
FID
name
description
calories
carbs
protein
fat

settings
========
SID
dailyCalories 
```

我如何将这些链接在一起，以便每个用户都有一个特定的食物和设置页面数据库？

我也不确定如何处理每日摄入量。我正在考虑手动添加按钮“开始日”和“结束日”来重置每日跟踪周期，这似乎是目前最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:41:51.423

添加一个新表，该表将包含`UID`并在表中`FID`添加一个字段，该字段将包含每个用户的设置。`settings``UID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T10:29:04.283

您添加第四个表，将每个 3 链接在一起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:34:41.667

我会建议

```
settings
=========
SID - PK - you dont really need it 
UID
setName
setValues 
```

这样，每次弹出新设置时，您都不必更改表架构

我还会添加表格

```
group - so user can specify food for different days/meals etc
=========
GID - PK
UID 
name 
desc 

groupFood
=========
GID - PK
FID - PK 
```

----如果你想要的只是简单的加入食物和用户使用

```
userFood
========
UID - PK 
FID - PK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T10:53:16.060

仅根据您上面描述的内容，我可能会使用下表。但我重申我的评论：架构取决于数据的用途。

```
Users
    UName (PKey)
    Password

Foods
    UName (FKey)
    FName 
    OtherColumsYouHave
    Primary Key: UName, FName

Settings
    UName
    FName
    DailyIntake
    Primary Key: UName, FName
    Foreign Key: Uname, FName => Foods(UName, FName) 
```

# asp.net - 为什么母版页没有 OnInitComplete 事件？

> ID：14019989
> 
> 赞同：0
> 
> 时间：2012-12-24T10:20:09.490
> 
> 标签：asp.net

为什么Master pages不需要确认初始化完成？

虽然，母版页可以有控件并且需要初始化，就像在内容页中一样，确认来自 Init-Complete 事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T10:30:12.877

当控件的子控件完成初始化时不会触发 InitComplete，而是在页面上的所有控件都完成时触发。

MasterPage 作为一个控件本身，加载在页面中，当所有其他控件都完成初始化时，它自身无法检测到。

如果任何控件（包括母版页）需要知道页面初始化何时结束，它可以订阅页面的[InitComplete](http://msdn.microsoft.com/en-us/library/system.web.ui.page.initcomplete%28v=vs.100%29.aspx)事件。

```
 protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        Page.InitComplete += Page_InitComplete;
    }

    void Page_InitComplete(object sender, EventArgs e)
    {
        //initialization complete
        //take necessary action
    } 
```

# asp.net - 如何在 Caption 中使用 Datetime 创建垂直 gridView 列

> ID：14019994
> 
> 赞同：0
> 
> 时间：2012-12-24T10:20:32.663
> 
> 标签：asp.net, gridview

我有两个文本框作为开始日期和结束日期，还有一个没有列的 DevExpress GridView。当用户选择开始日期和结束日期并单击“加载”时，我想为开始日期和结束日期之间的每个日期创建单独的 GridView 列。我试图在我的数据表中创建列，然后将我的 Gridview 的 AutoGenerateColumns 设置为 True，但这并没有帮助。因为我想手动设置标题和字段名，除了这些 Gridview 列需要有垂直标题。另外我不知道如何为每个日期创建新的 DataColumn。

关于如何实现它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:44:03.673

可能这会对你有所帮助 - [http://www.codeproject.com/Articles/13461/how-to-create-columns-dynamically-in-a-grid-view](http://www.codeproject.com/Articles/13461/how-to-create-columns-dynamically-in-a-grid-view)？

```
DataTable dt = new DataTable();
for loop for every date b/w start and end date
dt.Column.add("date");

//for inserting values into it... use DataRow row = new Datarow;
row["date1"] = xyx;
row["date2"] = abc and so on.....
gridview1.Datasource = dt; 
```

# python - Tkinter 的 overrideredirect() 行为异常（Python 3.2，Win7）

> ID：14019999
> 
> 赞同：1
> 
> 时间：2012-12-24T10:20:52.063
> 
> 标签：python, tkinter

我希望我的应用程序使用`Toplevel`没有框架的窗口，但是当我在创建 Toplevel 后立即尝试使用时`overrideredirect`，它根本不显示。如果我`overrideredirect`单独调用，例如通过按下一个为最后创建的调用它的按钮，`Toplevel`它会按预期工作。这种行为是否出于某种目的，或者至少是明智的？我该如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T04:08:32.377

找到了一个链接，它为我解决了他的问题。

[http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/toplevel.html](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/toplevel.html)

> 请务必在设置此标志之前调用 .update_idletasks() 方法（参见第 26 节，“通用小部件方法”）。如果您在进入主循环之前调用它，您的窗口将在它出现之前被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T16:42:38.113

I experienced the same problem on macOS 10.12.5 with Python 3.6.1 and tcl/tk 8.5.18 (see [this question](https://stackoverflow.com/questions/44802456/tkinter-splash-screen-multiprocessing-outside-of-mainloop/44851222#44851222)). As suggested in comments above, calling `.lift()` on the toplevel window right after `.overrideredirect(True)` is called fixed the problem for me.