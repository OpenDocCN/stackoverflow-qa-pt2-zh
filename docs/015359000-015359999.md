# StackOverflow 问答 15359000-15359999

# sql - 按月分组条款问题

> ID：15359000
> 
> 赞同：0
> 
> 时间：2013-03-12T10:42:22.660
> 
> 标签：sql, sql-server, date, group-by

我有一个 SQL 查询来按月对添加到系统中的一些产品进行分组。我上周运行了这个查询，今天又运行了一次。今天，结果似乎以不同的顺序排列。是否可以运行此查询并有第二列显示月份？

这是我的原始查询：

```
SELECT COUNT(*)
FROM dbo.Products p
WHERE YEAR(t.CreatedDate) = '2013' 
  AND t.Deleted = 0 
  AND t.RemovedFromSale = 0
GROUP BY MONTH(t.CreatedDate) 
```

这将返回以下内容：

```
 | (No Column Name)
1| 2009
2| 161
3| 98 
```

理想情况下，我想要这样的东西：

```
 | (No Column Name) | Month Name
1| 2009             |  
2| 161              |
3| 98               | 
```

这可以通过更改我的查询来实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:45:02.953

如果要返回`MONTH(t.CreatedDate)`，则需要在`SELECT`列表中包含该列：

```
SELECT COUNT(*) as Total,
  MONTH(t.CreatedDate) as Month
FROM dbo.Products p
WHERE YEAR(t.CreatedDate) = '2013' 
  AND t.Deleted = 0 
  AND t.RemovedFromSale = 0
GROUP BY MONTH(t.CreatedDate) 
```

`MONTH()`将以整数形式返回月份。如果您想返回月份的名称，那么您将需要使用[`DATENAME()`](http://msdn.microsoft.com/en-us/library/ms174395.aspx)

```
SELECT COUNT(*) as Total,
  DATENAME(month, t.CreatedDate) as Month
FROM dbo.Products p
WHERE YEAR(t.CreatedDate) = '2013' 
  AND t.Deleted = 0 
  AND t.RemovedFromSale = 0
GROUP BY DATENAME(month, t.CreatedDate) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:44:53.660

将您的 SQL 更改为

```
SELECT COUNT(*), MONTH(t.CreatedDate)
  FROM dbo.Products p
  WHERE YEAR(t.CreatedDate) = '2013' AND t.Deleted = 0 AND t.RemovedFromSale = 0
  GROUP BY MONTH(t.CreatedDate) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:47:46.373

尝试：

```
SELECT 
    COUNT(*), DATENAME(m, CreatedDate) [MonthName]
FROM dbo.Products p
WHERE YEAR(t.CreatedDate) = '2013' AND t.Deleted = 0 AND t.RemovedFromSale = 0
GROUP BY DATENAME(m, CreatedDate) 
```

# ios - AVAssetImageGenerator 不从视频 url 生成图像

> ID：15359007
> 
> 赞同：3
> 
> 时间：2013-03-12T10:42:32.507
> 
> 标签：ios, thumbnails, image-generation, avasset

我正在使用 AVAssetImageGenerator 为视频播放按钮生成缩略图。当我通过服务器视频 url 生成图像时，它正在重新调整 null。

```
 AVAsset *asset = [AVAsset assetWithURL:url];
    AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:asset];
    CMTime time = CMTimeMake(51,1);
    CGImageRef imageRef = [imageGenerator copyCGImageAtTime:time actualTime:NULL error:NULL];
    UIImage *thumbnail =[[UIImage alloc]initWithCGImage:imageRef];
    CGImageRef cgref = [thumbnail CGImage];
    CIImage *cim = [thumbnail CIImage];

    if (cim == nil && cgref == NULL)
    {
        NSLog(@"no underlying data");
    }
     CGImageRelease(imageRef); 
```

我总是得到空数据。很少我只得到一张图像。我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:03:55.527

你可以试试下面的代码。它为我工作

```
AVURLAsset *as = [[AVURLAsset alloc] initWithURL:url options:nil];
AVAssetImageGenerator *ima = [[AVAssetImageGenerator alloc] initWithAsset:as];
NSError *err = NULL;
CMTime time = CMTimeMake(0, 60);
CGImageRef imgRef = [ima copyCGImageAtTime:time actualTime:NULL error:&err];
[ima release];
UIImage *currentImg = [[UIImage alloc] initWithCGImage:imgRef]; 
```

我得到一个参考，最简单的方法是将图像生成器上的 applyPreferredTrackTransform 属性设置为 YES，然后它应该会自动为您进行转换。

希望这可以帮助 ！！！

# java - Threads Executor 非阻塞列表

> ID：15359009
> 
> 赞同：0
> 
> 时间：2013-03-12T10:42:35.863
> 
> 标签：java, multithreading, executor

我有一个遍历链接列表的类。对于每个链接我都想做一个处理。所以我必须为每个链接创建一个线程。

这是代码（主要）：

```
ThreadProcessing  tp;
for(int i = 0; i < listUrl.size(); i++)
{
    tp.add(string_url);
} 
```

对于 ThreadProcessing 类，我必须使用 Executor 接口。关键是：我必须创建一个包含 30 个线程的池。ThreadP 类包含一个非阻塞线程列表（当然它可以包含 30 多个线程）。您可以根据需要添加任意数量的线程，并且该类将负责执行所有这些线程。

这就是我试图做的（它不起作用）。 ThreadProcessing 类：

```
public class ThreadProcessing {
    List<Runnable> runnables = new ArrayList<Runnable>();
    ExecutorService pool;

    @PostConstruct
    public void init()
    {
        pool = Executors.newFixedThreadPool(30);
    }

    public void add(String url)
    {   
        runnables.add(createRunnable(url));
        executeRunnables(pool, runnables);
    }

    public static void executeRunnables(final ExecutorService service, List<Runnable> runnables){
        for(Runnable r : runnables){
            service.execute(r);
        }
        service.shutdown();
    }

    private Runnable createRunnable(final String url){

        Runnable getContentFromURL = new Runnable(){
            public void run(){
                //My treatment with url
            }
        };
        return getContentFromURL;
    }
} 
```

我希望我的解释没有太含糊，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:55:05.687

尝试类似：

```
public void main() {
    ExecutorService es = Executors.newFixedThreadPool(30);

    BlockingQueue<String> urls = 
        new ArrayBlockingQueue<String>(listUrl.size(), false, listUrl);
    LinkedList<Future<?>> futures = new LinkedList<Future<?>>();
    for(int i = 0 ; i < 30 ; ++i) {
        futures.add(es.submit(new URLRunnable(urls)));
    }

    // Wait for all the futures to return
    for(Future<?> f : futures) {
        f.get();
    }
}

public class URLRunnable() implements Runnable() {
    private final BlockingQueue<String> urls;
    URLRunnable(BlockingQueue<String> urls) { this.urls = urls; }

    @Override
    public void run() {
        String url = null;
        while((url = urls.poll()) != null) {
            // do something with url
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:49:26.757

```
public void add( String url) {
    Runnable job = createRunnable(url); 
    runnables.add( job);
    pool.execute( job);
} 
```

此外，除非您完成提交/添加作业，否则不要关闭池。当然，在这个例子中，你并不真的需要 runnables 列表。

# html - 自定义菜单上的 Wordpress 样式活动菜单项

> ID：15359010
> 
> 赞同：0
> 
> 时间：2013-03-12T10:42:36.987
> 
> 标签：html, css, wordpress

我正在创建一个 wordpress 模板，目前我正在处理菜单，我做了以下工作：

[http://jsfiddle.net/skunheal/Umkyr/](http://jsfiddle.net/skunheal/Umkyr/)

有2个小问题我真的不知道如何解决。Wordpress 为当前活动的菜单项提供类 .current_page_item。我该如何设计这个？

我在想类似的事情：

普通菜单项：

```
ul.dropdown a {
text-decoration : none;
font-family : verdana;
color : #3f89d2;
display : inline-block;
background : #FFF;
padding : 8px 15px 0 15px;
box-shadow : 0 0 10px #CCC inset;
width : auto;
height : 25px;
} 
```

活动菜单项：

```
.current_page_item a {
background : #096;

} 
```

但它似乎不起作用。有谁知道为什么？

提前感谢，梅林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:58:00.147

像这样写

```
 li.current_page_item a {
    color:#096
} 
```

**[演示](http://jsfiddle.net/Umkyr/5/)**

# sql - 如何对两个聚合函数求和

> ID：15359012
> 
> 赞同：1
> 
> 时间：2013-03-12T10:42:42.380
> 
> 标签：sql, visual-studio, visual-studio-2005

我正在 Visual Studio 中构建报告，并对总计等内容进行各种计算。

我现在正试图找到两个总数的百分比，但我很挣扎，因为它不允许我在一个表达式中使用 2 个聚合函数。

我拥有的功能是：

```
=Sum(Fields!Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services") 
```

和

```
=Sum(Fields!Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services") 
```

它们是相同的函数，但作用于 2 个不同的总数，所以为了找出百分比，我必须将这两个函数除以彼此，见下文：-

```
=Sum(Fields!Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services")/=Sum(Fields! Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services") 
```

谁能建议一个更好的方法来做到这一点？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:07:35.843

我最终设法弄清楚了。

我这样做的方式是使用下面的代码来引用确切的文本框，而不是尝试执行单独的聚合函数。这样我只需要对两个总数进行除法。

见下面的代码： -

```
=(ReportItems!textbox20.Value) / 
(ReportItems!textbox22.Value) 
```

无论如何，感谢您对原始问题的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:50:35.397

您可以使用 Val 函数

试试这个

```
=Val(Sum(Fields!Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services"))/Val(Sum(Fields! Quantity.Value, "AccruedHours") + Sum(Fields!Quantity.Value, "Services")) 
```

# awk - AWK 搜索字符串并在字符串出现的地方打印全文

> ID：15359013
> 
> 赞同：1
> 
> 时间：2013-03-12T10:42:53.547
> 
> 标签：awk

我有一个包含多行文本的文档。

**示例（非实际）：**

> *准备 42 从表中锁定删除，其中 type='test' and user_id='099'and number='+66719919*

我希望能够在文档中出现的任何地方搜索 user_id（不遵循模式）并将输出为：

> user_id=009

或者

> 009

请问如何使用awk实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:47:22.197

```
awk '/user_id/{for(i=1;i<=NF;i++){if($i~/user_id/){split($i,a,"=");print a[2]}}}' your_file 
```

测试：

```
> echo "*Prepare type='test' and user_id='099' and number='+66719919*" | awk '/user_id/{for(i=1;i<=NF;i++){if($i~/user_id/){split($i,a,"=");print a[2]}}}'
'099' 
```

另一个：

```
> echo "*Prepare type='test' and user_id='099' and number='+66719919*" | awk '/user_id/{for(i=1;i<=NF;i++){if($i~/user_id/){ print $i}}}'
user_id='099' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:21:44.307

你也可以使用 grep：

```
grep -o "user_id='\?[0-9]*'\?" 
```

附加`tr`以删除引号：

```
grep -o "user_id='\?[0-9]*'\?" | tr -d \' 
```

# javascript - 在句子中用分号匹配正则表达式

> ID：15359025
> 
> 赞同：0
> 
> 时间：2013-03-12T10:43:14.420
> 
> 标签：javascript, regex

这是一个匹配正则表达式的程序

```
string="Mozilla/5.0 (Series40; NOKIA311/03.81; Profile/MIDP-2.1 Configuration/CLDC-1.1) Gecko/20100401 S40OviBrowser/2.2.0.0.31";
regex=/(nokia).*([a-zA-Z0-9]+)/i
regex.exec(string) 
```

我的问题是它与诺基亚和 311 不匹配

任何人都可以帮助。请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:48:33.467

问题是`.*`，它试图尽可能地匹配。它实际上最终匹配整个字符串的其余部分，并且只`1`从最后离开以满足`[a-zA-Z0-9]+`. 您可能需要一个更具体的正则表达式：

```
/nokia(\d+)/i
/nokia(.*?)\//i 
```

`.*?`使得`.*`不情愿，所以它只会匹配第一个斜线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:46:42.220

使用正则表达式`/NOKIA([\d\w]*)/i`

这将匹配模式 NOKIA 和任何没有空格的数字或单词

# postgresql - 如何列出使用第二旧火车的火车运营商 (PostgreSQL)

> ID：15359029
> 
> 赞同：1
> 
> 时间：2013-03-12T10:43:24.720
> 
> 标签：postgresql

火车运营商：

```
| train_operator_id |  name  |  
------------------------------
| 1                 | Virgin |
| 2                 |  First | 
```

旅程：

```
| journey_id | train_operator | train_type |
--------------------------------------------
| 1          | 2              | 2          |
| 2          | 2              | 1          |
| 3          | 1              | 3          |
| 4          | 1              | 2          | 
```

火车类型：

```
| train_type_id | date_made  |
------------------------------
| 1             | 1999-02-15 |
| 2             | 2001-03-11 |
| 3             | 2000-12-05 | 
```

您将如何编写查询来查找所有使用第二古老类型列车的列车运营商？

使用给定的模式，查询应该只使用 Virgin，因为它是唯一使用第二旧火车类型的火车运营商

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:59:05.850

尝试这个：

```
select distinct train_operator from journeys 
    inner join (Select * from train_types order by date_made LIMIT 1 OFFSET 1) sectrain 
    on sectrain.train_type_id = journeys.train_type 
```

你进入英国铁路网络是吗？我曾经在 Funkwerk IT 工作，后者又为 Network Rail 提供时间表规划软件……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:11:36.123

在 pg 中使用窗口函数的强大功能非常容易

```
SELECT DISTINCT train_operator_id, 
                name 
FROM   (SELECT t.train_operator_id, 
               t.name, 
               Rank() OVER (ORDER BY tt.date_made) AS rank 
        FROM   train_operators AS t 
               JOIN journeys AS j 
                 ON j.train_operator = t.train_operator_id 
               JOIN train_types AS tt 
                 ON tt.train_type_id = j.train_type) AS q 
WHERE  rank = 2; 
```

[http://sqlfiddle.com/#!12/98816/8](http://sqlfiddle.com/#!12/98816/8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:48:23.707

```
select to.name
from
    train_operators to
    inner join
    journeys j on to.train_operator_id = j.train_operator
where
    j.train_type = (
        select train_type_id
        from train_types
        order by date_made
        limit 1 offset 1
    ) 
```

# google-app-engine - 如何在本地主机和 AppEngine 上使用 DataNucleus 为 Google Cloud SQL 自动生成数据库架构？

> ID：15359030
> 
> 赞同：0
> 
> 时间：2013-03-12T10:43:35.603
> 
> 标签：google-app-engine, datanucleus

我正在将我的 webapp 迁移到 Google AppEngine。我以前使用过 Hibernate。由于 AppEngine 与 DataNucleus 一起工作，这对我来说是新的，所以我在生成数据库模式时遇到了问题。我如何实现这一目标？在hibernate中，我曾经使用hibernate.cfg.xml中的属性来做`hbm2ddl.auto`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:46:13.153

当学习新东西时，[看文档是很正常的](http://www.datanucleus.org/products/accessplatform_3_1/schema.html)。

# git - Symfony2，AWS Beanstalk：如何将供应商作为文件而不是 git-submodules 推送到 repo

> ID：15359035
> 
> 赞同：2
> 
> 时间：2013-03-12T10:43:47.483
> 
> 标签：git, symfony, amazon-web-services, git-submodules, amazon-elastic-beanstalk

我们在 AWS Beanstalk 应用程序上使用 Symfony2。对于部署，我们调整了部署脚本以在应用程序上传后进行*作曲家安装。*

尽管这在理论上可行，但它也有一些缺点——主要是不断增加的部署时间（有时会导致服务器超时）以及对其他服务器可用性的依赖性增加。

我读到有些人将其复制`vendor/*`到 tmp-dir 并在部署后将其移回以[加快](https://github.com/spy23/AWS-Elastic-Beanstalk-deployment-scripts-for-Symfony2-applications)部署速度。

它确实很有帮助，但我们`composer.json`经常更新我们的，所以我们仍然必须在我们的部署过程中*安装一个 composer 。*我们认为最好的方法是将所有依赖项 ( `vendor/*`) 作为文件包含在 repo 中，并在部署期间跳过*composer 安装*。

不幸的是，大多数库都包含在 git-submodules 中，AWS 不支持子模块（所有文件都必须在 repo 中）。

**所以我的问题来了：**

*删除所有 git-submodules 并提交真实文件的最佳方法是什么？*

我试过结合：

```
git submodules --recursive foreach 
```

与[如何删除子模块？](https://stackoverflow.com/questions/1260748/how-do-i-remove-a-git-submodule)但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T12:33:09.627

你可以试试这个工作流程：

*   创建一个新的发布文件夹
*   在新文件夹中签出最新版本的代码
*   将“供应商”从当前活动的发布文件夹复制到新的发布文件夹
*   运行“composer.phar 安装”

这样，composer 只会更新版本之间发生变化的库。

我成功地将它与[capistrano](https://github.com/capistrano/capistrano/wiki)一起使用（还有一个名为[capifony](http://capifony.org/)的 Symfony 特定版本）可以帮助你。特别是因为它可以保留您的 git 存储库的克隆，因此推出新版本要快得多，并且部署和回滚是单行的。

# php - MySQL查询以获取电子邮件等于某个变量的用户

> ID：15359037
> 
> 赞同：3
> 
> 时间：2013-03-12T10:43:50.333
> 
> 标签：php, mysql, sql-like

首先，我不知道从哪里开始这样做。这就是我发布这个问题的原因。也许你们会反对或关闭或标记它。

这是问题所在。

```
<?php
    $gmail = "dipesh@some.com"
    $split = explode('@',$service['User']['email']);
?> 
```

上面的代码输出一个包含两个元素的数组：一个 for `dipesh`，另一个 for `some.com`。正如预期的那样，这是正确的。

现在我想要一个`MySQL`查询`select query`来获取记录`dipesh@.`

**例子**

```
SELECT * FROM users WHERE users.email LIKE 'dipesh'; 
```

上面的代码返回所有包含 的记录`dipesh`，但我只想要包含 的记录`dipesh@`。

`SELECT * FROM users WHERE users.email LIKE '%dipesh';`行得通吗？

如果是这样，那么两者之间有什么区别？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:45:56.123

您的 PHP 代码似乎与您的问题无关，但听起来像您想要的，字面上`email = 'dipesh@'`匹配。`dipesh@`如果你想`dipesh@`跟着任何东西，使用`email LIKE 'dipesh@%'`. 这`%`是一个通配符，意思是“匹配零个或多个任意字符”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T10:45:47.270

试试这个

```
 SELECT * FROM users WHERE users.email LIKE 'dipesh@'; 
```

如果你想`dipesh@`跟随其他任何事情

用这个

```
 SELECT * FROM users WHERE users.email LIKE 'dipesh@%'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:49:57.460

你可能想试试这个

```
"SELECT * FROM users WHERE users.email LIKE 'dipesh@%'"; 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:01:45.033

```
SELECT * FROM users WHERE email LIKE 'dipesh@%'; 
```

# jquery - 使用jquery检查其他人时如何取消选中框

> ID：15359039
> 
> 赞同：0
> 
> 时间：2013-03-12T10:43:57.570
> 
> 标签：jquery, forms, checkbox

我有这个 html -

```
<ol class="subproduct">
<li>
    <input type="checkbox" name="extra2" value="Multidispositivo" />
    <p class="checkbox"></p>
    <h3>test<span class="price"><span>+2</span>€&lt;/span></h3>
    <p>test words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="Multidispositivo" />
    <p class="checkbox"></p>
    <h3>test</h3>
    <p>test words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="15 min extra" />
    <p class="checkbox"></p>
    <h3>test/h3>
    <p>test words</p>
</li>
<li>
    <input type="checkbox" name="extra2" value="Multidispositivo" />
    <p class="checkbox"></p>
    <h3>test</h3>
    <p>test words</p>
</li>
</ol> 
```

我需要在“检查”复选框时向 li 添加一个类。目前我用这个

```
$(document).ready(function() {
  $('.subproduct input:checkbox').change(function(){
     if($(this).is(":checked")) {
         $(this).parent().toggleClass("checked");
     }
  });
}); 
```

但我需要它，以便用户只选中一个复选框，所以如果他们选中另一个框，它会删除任何其他的类

*   这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:48:42.337

看到这个：**[样本](http://jsfiddle.net/TRsra/1/)**

```
$(document).ready(function() {
 $('.subproduct input:checkbox').change(function(){
   $('.subproduct input:checkbox').not(this).attr("checked",false);
   $(".subproduct li").removeClass("checked");
   if($(this).is(":checked")) {
       $(this).parent().toggleClass("checked");
   }
 });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:48:50.883

试试这个**[演示](http://jsfiddle.net/pintu31/4g74n/2/)**

```
$(document).ready(function() {
  $('.subproduct input:checkbox').change(function(){
    if($(this).is(":checked")) {
       $(':checkbox').prop('checked',false);
       $('ol li').removeClass('checked');
       $(this).prop('checked',true);
       $(this).parent().addClass('checked');
    } else {
       $(this).parent().removeClass('checked');
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:49:24.207

使用 ;...删除所有`<li>`'s on chnage 事件的类`removeClass()`...然后如果检查`toggleClass()`了`<li>`

试试这个

```
$(document).ready(function() {
  $('.subproduct input:checkbox').change(function(){
   $(".subproduct li").removeClass("checked"); //<---here
    if($(this).is(":checked")) {
     $(this).parent().toggleClass("checked"); // and using addClass("checked") here is better .. 
    }
  });
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T10:49:51.913

试试这个 [http://jsfiddle.net/QHuV9/4/](http://jsfiddle.net/QHuV9/4/)

```
 $(document).ready(function() {
  $('.subproduct input:checkbox').change(function(){
     if($(this).is(":checked")) {
         $(this).parent("li").addClass("checked");
     }

      else {
      $(this).parent("li").removeClass("checked");
      }
  });
}); 
```

我希望我接受你的提问仪式

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T10:52:25.283

最简单的解决方案是：

```
$(document).ready(function() {
  $('.subproduct input:checkbox').change(function(){
     if($(this).is(":checked")) {
         $(this).parent().siblings().removeClass('checked');
         $(this).parent().addClass("checked");
     }
  });
}); 
```

我建议使用`<input type="radio">`，以便用户理解行为。

# css - IE 中的图像、字体和外观与 chrome 和 firefox 不同

> ID：15359041
> 
> 赞同：-2
> 
> 时间：2013-03-12T10:44:03.473
> 
> 标签：css, cross-browser, ruby-on-rails-3.2, twitter-bootstrap-rails

我在 Rails 应用程序中使用引导 CSS。图像以正确的尺寸显示（在 CSS 或代码中配置），但在 IE 中它们以原始尺寸显示。

在 IE8 Bootstrap 版本 - 2.3 上测试

**垫片：**

```
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

**HTML：**

```
<div class="row bottom">
  <div class="container">
    <div class="toptext3 pull-left">
      Designed By 
      <%=link_to "Exaltech Solutions Pvt. Ltd.", "http://www.exaltech.co.in" , target: "_blank"%>
     </div>
     <div class="toptext2 pull-right">
       Follow Us on:
       <%= link_to image_tag("Facebook.png", size:'30x30'),"https://www.facebook.com/computerzcom", target: "_blank" %>
       <%= link_to image_tag("Twitter.png", size:'30x30'), "https://twitter.com/computerzcom", target: "_blank" %>
       <%= link_to image_tag("ebay.png", size: '30x60'), "http://www.ebay.co.uk/sch/computerzhh/m.html?_nkw=&_armrs=1&_from=&_ipg=&_trksid=p3686", target: "_blank" %>&nbsp;
       <dfn><a href="#myModal"  data-toggle="modal">Testimonial</a></dfn>&nbsp;&nbsp;
       <dfn><a href="#myModal2"  data-toggle="modal">Terms</a></dfn>&nbsp;&nbsp;
       Computerz.com &#169; 2013
    </div> 
  </div>
</div> 
```

我在 CSS 中没有与这部分相关的任何内容，而且它太长了，所以我不会把它放在这里。在这个 ebay 图标中，巨大的（原始大小）而不是小图标。

很抱歉之前没有添加代码。谢谢你纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:41:05.860

我有很多图像被扭曲并在 IE 中以原始大小显示，而不是我在 ruby​​ 代码中给出的大小。

解决方法 - 我将所有图像的大小调整为它们在 Photoshop 中所需的大小，然后将它们用作资产。

# javascript - 在 onBeforeRequest 上更改 URL

> ID：15359042
> 
> 赞同：1
> 
> 时间：2013-03-12T10:44:03.903
> 
> 标签：javascript, google-chrome, google-chrome-extension

我有以下代码：

```
chrome.webRequest.onBeforeRequest.addListener(
  function(details) {         

    return { redirectUrl: "http://yahoo.com"};
  },
  {
    urls: [
      'http://google.com'
    ],
    types: ['main_frame']
  },
  ['blocking']); 
```

这是将 google.com 重定向到 yahoo.com。我的问题现在是如何保存`google.com`在地址栏中，显示 yahoo.com。

我的第一次尝试是使用

`chrome.tabs.update(tab.id, {url: details.url});`

但这会导致网站重新加载。

* * *

**为什么？**

我正在为[pdf.js](https://chrome.google.com/webstore/detail/pdf-viewer/pdbekdpgndlhjmiobbgcnoagbghfdkfa)请求这个，因为它会破坏 PDF URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:31:48.780

这是不可能的，您可以通过使用 100%x100% 帧来模拟这种效果 - 但是，您的问题听起来很恶意。

# html - Ruby on rails, html/script for loop

> ID：15359054
> 
> 赞同：0
> 
> 时间：2013-03-12T10:44:58.257
> 
> 标签：html, ruby-on-rails

我正在[为 Ruby on Rails 使用此文件上传示例](https://github.com/tors/jquery-fileupload-rails-paperclip-example)。我有以下模板来显示可供下载的文件：

```
 <script id="template-download" type="text/x-tmpl">
      {% for (var i=0, file; file=o.files[i]; i++) { %}
        <tr class="template-download fade">          

          <td class="name">
           <a href="{%=file.url%}" download="{%=file.name%}">{%=file.name%}</a>
          </td>            
          <td class="File_info">
            <a href="{%=file.url_file_info%}" class= "btn btn-mini btn-info">File Info</a>       
          </td>
          <td class="Hist">
          <a href="{%=file.url_hist_image%}" class= "btn btn-mini btn-info">Hist</a>        
          </td>   

          <td class="delete">
            <button class="btn btn-mini btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"> 
              <i class="icon-trash icon-white"></i>              
            </button>
            <input type="checkbox" name="delete" value="1">
          </td>
        </tr>
        {% } %}
    </script> 
```

我从未见过如此奇怪的 for 循环：{% for (var i=0, file; file=o.files[i]; i++) { %} blabla {% } %}

这些括号是什么意思（ {%} {%} ）？这种 html/脚本模板是否有 if 循环（只是 for 循环的模拟）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:47:33.227

这些块是客户端模板，请查看[此处的文档](https://github.com/jquery/jquery-tmpl)

# iphone - 应用程序在 iOS 6.1.2 中的 [TestFlight takeOff:@""] 上崩溃

> ID：15359057
> 
> 赞同：3
> 
> 时间：2013-03-12T10:45:07.353
> 
> 标签：iphone, ios, testflight

我已将 TestFlight SDK 集成到我的 iOS 应用程序中。在 iOS 6.1.2 中，有时应用程序在 TestFlight 的 -takeOff: 方法首次启动时会崩溃。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:  (NSDictionary *)launchOptions
{

#ifdef TESTING
    [TestFlight takeOff:@"MY_TESTFLIGHT_TEAM_TOKEN"];
    [TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]];
#endif

// Override point for customization after application launch.
ProductListViewController *products=[[ProductListViewController alloc] initWithNibName:@"ProductListViewController" bundle:nil];
UINavigationController *navigationController=[[UINavigationController alloc] initWithRootViewController:products];
[products release];

navigationController.toolbarHidden = YES;
navigationController.navigationBarHidden = YES;

self.rootViewController = navigationController;
[self.window setRootViewController:rootViewController];

[navigationController release];

[self.window makeKeyAndVisible];

return YES;
} 
```

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:44:17.320

这是 Testflight SDK 中的一个错误。他们要求您更新到最新的测试版。

请参阅[iOS 异常 EXC_GUARD](https://stackoverflow.com/questions/13058329/ios-exception-exc-guard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:58:01.713

会不会是您忘记正确包含 TestFlight SDK 文件夹？

# c - 解码字节数组中一个字节的 FOUR_BITS（在 C 中）

> ID：15359060
> 
> 赞同：0
> 
> 时间：2013-03-12T10:45:12.960
> 
> 标签：c

我正在编写一个代码来根据用户输入（一次 EIGHT_BITS 或一次 FOUR_BITS）解码字节数组。我实际上已经设法根据 EIGHT_BITS 解码字节数组。现在我想用 FOUR_BITS 对它们进行解码。

```
INT DecodeElem(UINT8 *decodeBuf, UINT8 elemlen, UINT8 *tempBuf, UINT8 elemlength){

  if (elemlength== EIGHT_BITS){
    *tempBuf = getByte(decodeBuf + decodeByteCount);
     decodeOffset = 0;
     decodeByteCount++;
  }
} 
```

即，如果elemlength= FOUR_BITS，我需要解码字节数组中特定字节的前四位。有人可以让我知道如何在不修改我上面写的 EIGHT_BITS 的情况下做同样的事情吗？

我基本上需要的是另一个带有 if (elemlength == FOUR_BITS) 的 if 语句

注意： tempBuf 是 CHAR * 类型，我不能更改类型。decodeByteCount 和 decodeOffset 是全局变量；*decodeBuf 是已经编码的需要解码的字节数组。elemlen 供将来使用，我会照顾它。

**这是我的 getByte 函数：**

```
UINT8 getByte(UINT8 *byteBuf)
{
  return ((UINT8)*byteBuf);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:56:34.417

我不确定 decodeOffset 和 decodeByteCount 是做什么的......
应该是这样的（假设每个字节有 2 个 4 位值。如果假设错误，请从代码中删除“/2”）：

```
if (elemlength== FOUR_BITS){  
    *tempBuf = getByte(decodeBuf + decodeByteCount / 2);
    if(decodeByteCount % 2)
        *tempBuff = (*tempBuff & 0xF0) >> 4;
    else
        *tempBuff = (*tempBuff & 0Xf);
    // ???decodeOffset = 0;
    // ???decodeByteCount++;
} 
```

# c# - 在 Winforms 应用程序中支持多种语言

> ID：15359064
> 
> 赞同：5
> 
> 时间：2013-03-12T10:45:31.367
> 
> 标签：c#, winforms, internationalization, resources, globalization

我几乎完成了我的 C# 应用程序；剩下要做的就是实现多语言支持。

我已经为屏幕上显示的所有文本创建了包含几种语言的字符串的资源文件。

我的英语资源文件示例：

```
Name                    |  Value                       | Comment
------------------------------------------------------------------------------
lblName                 |   Name:                      |  Name EN 
```

我的荷兰语资源文件示例：

```
Name                    |  Value                       | Comment
------------------------------------------------------------------------------
lblName                 |  Naam:                       | Name NL 
```

如何将字段绑定`Value`到我的( ) 的[`Text`](http://msdn.microsoft.com/en-us/library/0cs4xb3d.aspx)属性？[`Label`](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)`lblName`

我正在使用 .NET Framework 3.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-16T20:45:40.410

我知道这个问题很久以前就被问过了，但由于没有答案，我建议：

要访问 C# 中的资源文件，您可以使用[ResourceManager](https://msdn.microsoft.com/en-us//library/system.resources.resourcemanager(v=vs.110).aspx)。首先根据当前语言创建资源管理器。您有两种选择。您可以使用 switch 或 if 语句（如果语言由菜单确定）或使用本地化来使用计算机的当前文化。最后，通过这两种方式，您可以调用 GetString() 方法，提供我认为在您的情况下是 lblName 的密钥。

注意：在下面的示例中，我使用第一种方法，即从菜单中检索语言。

```
string selectedLanguage = comboBoxLang.Text; // Comes from a menu option
string resourceFile = string.Empty;

/***/
Logic to retrieve the proper resourceFile depending on the selectedLanguage.
/***/

ResourceManager rm = new ResourceManager(resourceFile, Assembly.GetExecutingAssembly());

// Set your label text.
lblName.Text = rm.GetString("lblName"); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-12T10:50:52.100

尝试这个：

```
<asp:Label runat="server" Text="<%$ Resources:DutchLanguage, Value %>"></asp:Label> 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-12T10:48:26.603

将不同语言的值放在一个数据库表中。

让用户选择语言。

根据语言的选择从数据库中获取有关特定语言的数据。

然后将其与标签文本绑定。

# java - 如何获取 Bing Ads API 的开发者密钥

> ID：15359066
> 
> 赞同：1
> 
> 时间：2013-03-12T10:45:32.710
> 
> 标签：java, bing, bing-api

我正在尝试在 java 中使用 BING ADS API 创建应用程序，但演示程序需要开发人员密钥。

我有 bing 广告帐户 ( [https://secure.bingads.microsoft.com](https://secure.bingads.microsoft.com) )

但我无法生成任何开发人员密钥（`devToken="something"`）

任何人都可以帮助api吗？任何教程或任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:02:16.687

如果您的帐户已经启用 API 访问，您可以通过单击“获取 API 访问密钥”在 adCenter 的“用户”选项卡中的“帐户和计费”下获取此信息。

如果您的帐户未启用 API 访问，请通过以下方式请求访问 API：

[http://advertising.microsoft.com/small-business/request-adcenter-api-access](http://advertising.microsoft.com/small-business/request-adcenter-api-access)

然后设置`devToken=#api_key`

这里还有一个教程：http: [//msdn.microsoft.com/en-US/library/hh854970.aspx](http://msdn.microsoft.com/en-US/library/hh854970.aspx)

# jquery - jQuery 自动完成样式在 Chrome 中工作，但不适用于 Firefox 或 IE

> ID：15359067
> 
> 赞同：0
> 
> 时间：2013-03-12T10:45:38.567
> 
> 标签：jquery, css, google-chrome, firefox, autocomplete

我在我的网络表单上实现了一个 jquery 自动完成输入框。

它可以在所有平台上完美运行。我的问题是我正在使用 jquery ui 进行样式设置。javascript 生成的下拉列表在 chrome 中的样式正确，但在 Firefox 和 IE 中，它是一个完全没有样式的 li 列表。

为什么会这样，我该如何纠正？

如果没有原因，我如何为 li 列表生成自己的样式，这种样式应该从哪里来？

我的头语法是：

```
 <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
   <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
   <script src="<?php echo base_url() ?>application/scripts/customer_autocomplete.js" type="text/javascript"></script> 
```

`customer_autocomplete.js`很简单：

```
$(function(){
  $("#customer").autocomplete({
    source: "sales_orders/get_customers" 
  });
}); 
```

下面显示的每个浏览器的示例图像，所有完全相同的代码和标题信息。

火狐13.1 ![火狐](../Images/322d3eaf5fd5e7c35f2f64ecf96678b2.png)

IE 10 ![IE浏览器](../Images/1d9fa8188aa9b60641d73f9868ac9063.png)

铬 25.0 ![谷歌浏览器](../Images/295f806ddb99cccd5ea9b285906215b9.png)

一如既往的帮助

**呈现的 HTML**

```
<html>
   <head>
      <title>
         test
      </title>
   <link rel='shortcut icon' type='image/x-icon' href='http://domain.com/application/assets/images/favicon.ico' />
   <meta name="viewport" content="width=device-width, initial-scale=1">      
   <script src="http://domain.com/application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
   <script src="http://domain.com/application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
   <script src="http://domain.com/application/scripts/customer_autocomplete.js" type="text/javascript"></script> 
<link href="http://domain.com/application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">

   </head>
<body>
      <div  data-role="page"  data-theme="a">
      <div class="wrap-header">
         <div data-role="header" data-mini="true"  data-ajax="false">
            <a data-icon="grid" data-mini="true"  data-theme="a" onclick="window.location.href='/sales'">Menu</a>
            <h3>New Sales Order</h3>
         </div>
      </div>   
      <div data-role="content">

         <label for="customer">Customer</label>
         <input type="text" id="customer" name="customer"/>

      </div>

   </div>
</div>

</body>
</html> 
```

即使我的输入在任何元素之外，同样的问题也适用。所以就在身体里。

我还必须提到这是一个 codeigniter 应用程序，不确定它是否起作用。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:56:46.697

主要问题是您应该为下拉菜单设置背景颜色（例如白色），因为它处于绝对位置并且您需要指定背景（并且至少是 z-index:1）。

顺便提供一些 css 和 html 来找出任何问题。

# javascript - 使用 Javascript 创建按钮时如何包含变量？

> ID：15359070
> 
> 赞同：0
> 
> 时间：2013-03-12T10:45:55.450
> 
> 标签：javascript, variables

我通过添加此代码从 javascript for 循环动态创建按钮。

```
var container = document.getElementById('myList');
var new_element = document.createElement('li');
new_element.innerHTML = '<button type="button" id="">label</button>'; 
```

我需要将数组中的元素添加到按钮 id 和标签中。比如像这样；

```
arrMarkers[i].title 
```

**如何将这些数组值包含在创建按钮的字符串中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:48:03.317

```
newElement.innerHTML = '<button type="button" id="' + arrMarkers[i].id + '">' + arrMarkers[i].title + '</button>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:48:10.673

据我了解，您正在寻找字符串连接：

```
new_element.innerHTML = '<button type="button" id="' + arrMarkers[i].id + '">' + arrMarkers[i].title + '</button>'; 
```

# linqpad - 如何在 Visual Studio 中使用 LinqPad 生成的上下文

> ID：15359089
> 
> 赞同：6
> 
> 时间：2013-03-12T10:46:39.137
> 
> 标签：linqpad, devart

这是这个问题的后续：

[从 LINQpad 迁移到合适的 Visual Studio 项目？](https://stackoverflow.com/questions/8140385/moving-from-linqpad-to-a-proper-visual-studio-project)

..但我无法让它正常工作。

该问题的答案建议将上下文程序集作为 dll 转储，但尽管我已经这样做了，但当我将其作为参考导入时，我并不清楚如何创建该上下文的实例，将其指向数据库并实际对其运行查询，如下所示：

var db = new ContextFromThatDLL(myconnectionstring);

var query = from a in db.MYTABLE where a.ID == 1 select a;

* * *

额外的信息：

我正在使用 LinqPad 中的 IQ 驱动程序连接到 Oracle。

我*已经*拥有 DevArt 的许可证（IQ 驱动程序使用该许可证），但我知道 IQ 驱动程序从 LINQ 生成自己的 SQL - 我更喜欢它。另外，我在 LinqPad 中开发了非常适合我的工作流程的查询，但我发现 DevArt 生成的 SQL 并不总是像 IQ 一样好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:01:11.003

首先，提取 LINQPad 中的类型化数据上下文，如下所示：

```
string dcPath = GetType().BaseType.Assembly.Location;
string targetFolder = @"c:\temp";
File.Copy (dcPath, Path.Combine (targetFolder, Path.GetFileName (dcPath))); 
```

然后在 Visual Studio 中，引用类型化数据上下文 DLL，以及驱动程序文件夹中的以下 DLL：

*   IQDriver.dll
*   IQToolkit.dll
*   IQToolkit.Data.dll
*   IQToolkit.Data.（提供者）.dll

加上 DevArt 驱动程序。

然后，您可以按如下方式实例化类型化数据上下文（这说明了如何为 SQLite 执行此操作）：

```
var dc = new LINQPad.User.TypedDataContext (IQToolkit.Data.DbEntityProvider.From
   ("IQToolkit.Data.Sqlite", @"Data Source=D:\SQLite.NET\nutshell.db",
    "LINQPad.User.TypedDataContext"));

var customerCount = dc.Customers.Count(); 
```

这应该让你开始。请记住警告，如您链接的答案中所述！

# batch-file - 如何在win7中记录未完成/无响应/挂起命令的输出？

> ID：15359093
> 
> 赞同：1
> 
> 时间：2013-03-12T10:46:47.597
> 
> 标签：batch-file, command-prompt, gnuwin32

我想要重定向命令的控制台输出。
问题是**命令中途挂起（或多或少）**，即使它输出到控制台，日志文件也是空的。我也尝试过这样的 wtee.exe：com.exe | %pat%wtee.exe log.txt 但它不起作用。我需要一些可以实时转储控制台的东西。我对几乎任何解决方案持开放态度，包括 c++ 和 powershell csript 等。

作为记录，我需要它发布一些详细的输出（[https://superuser.com/questions/564468/how-can-i-store-encfs6-xml-in-another-location-and-still-make-it-可检测](https://superuser.com/questions/564468/how-can-i-store-encfs6-xml-in-another-location-and-still-make-it-detectable)）

提前致谢

更新：

哇哦，它的工作原理。
显然，我必须在运行批处理脚本之前删除日志文件 + 在管道到 wtee.exe 之前，我必须将 stderr 重定向到 stdout，如下所示：

```
mycommand.exe  2>&1  | wtee.exe %abspath%log.txt 
```

如果我使用

```
mycommand.exe  2>&1  | wtee.exe -a %abspath%log.txt 
```

那么我不必每次都删除文件。
有趣的想法是带光尾的，但现在不需要它。流被发送到控制台和日志文件。

谢谢一堆

UPDATE2：我也使用了 gnuwin32 标签，因为 tee 和 wtee 几乎相同，所以这适用于 tee.exe，我想！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:52:07.193

它究竟是如何“不起作用”的？如果将 STDOUT 和 STDERR 重定向到文件 ( `command >log.txt 2>&1`) 会发生什么？你还在控制台上得到输出吗？如果是这样，该命令不会写入 STDOUT，因此`tee`（或`wtee`就此而言）不会获得任何输入，因为管道将 STDOUT`command`与`tee`. 在这种情况下，尝试重定向句柄 3-9，直到找到命令写入的句柄。例子：

```
command 3>log.txt 
```

[您可以通过在寻呼机（例如baretail](http://www.baremetalsoft.com/baretail/)）中显示日志文件来弥补缺少的控制台输出。

找到句柄后，您可以将其重定向到 STDOUT，然后将其通过管道传输到`tee`：

```
command 5>&1 | tee log.txt 
```

# java - Java中的日期时间解析

> ID：15359096
> 
> 赞同：3
> 
> 时间：2013-03-12T10:46:49.447
> 
> 标签：java, date, timezone

鉴于此代码...

```
 String date = "11:00 AM";

 SimpleDateFormat sdf = new SimpleDateFormat("h:mm a");

 sdf.setTimeZone(TimeZone.getTimeZone("US/Eastern")); // --> should be GMT-4

 TimeZone.setDefault(TimeZone.getTimeZone("GMT"));

 Date parse = sdf.parse(date); // -- gives Thu Jan 01 16:00:00 GMT 1970 
```

为什么日期解析给我 16:00 而不是 15:00？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:17:11.890

您不能`java.util.Date`仅用于存储时间。它将分配 1970 年，这在某些情况下是不正确的。我建议使用`org.joda.time.LocalTime`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:03:58.103

还要考虑日光节约。这应该给你你所期望的

sdf.setTimeZone(TimeZone.getTimeZone("EST5EDT"));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:47:07.083

如果您在默认情况下不提供任何日期部分，则会为其分配默认值`Epoche standard date(01 Jan 1970 00:00 Hours`，`Epoche standard time`并将其作为标准来衡量所有与时间相关的计算作为基准时间）。

`getTime()`java.util.Date 类的方法返回给定`date(including time also)`和之间的总毫秒数`Epoche standard( 01 Jan 1970 00:00 Hours)`。尽管您没有使用`getTime()`方法，但在这里无关紧要。所以很简单，你得到了那个时间。根据格林威治标准时间，这是正确的。

我认为它会帮助你。

# macos - 仅使用 Interface Builder 在父视图中显示视图控制器的内容？

> ID：15359097
> 
> 赞同：1
> 
> 时间：2013-03-12T10:46:50.873
> 
> 标签：macos, cocoa, appkit, nsviewcontroller

我想知道是否可以仅使用 Interface Builder 中的连接在“父母”视图中显示 ViewController 的内容（无论 NS 或 UI）（有时它很方便）。

例如，看看这个基本设置。

1 - 使用 XIB 创建的 MyViewController 类。

![MyViewController 文件](../Images/1405b621c03a9270b62ed453ea5a0238.png)

2 - MyViewController 的 XIB 包含它的 UI 布局

![MyViewController 的 XIB 布局](../Images/a2e216dc07ddc661a73c9f42f41586fe.png)

3 - 添加到 MainMenu XIB 的自定义 ViewController 实例

![自定义 ViewController 添加到 MainMenu XIB](../Images/ffdc1981720a6882f7c11749af9004f7.png)

并且它的类设置为 MyViewController

![自定义类设置为 MyViewController](../Images/75ff8bb17a07663f024326f903d68fd5.png)

4 - 我想要的是在 MainWindow 的视图中显示 MyViewController 的 xib 布局，而不使用`[mainWindow.view addSubview:myViewController.view]`. 我可以使用 IB 连接来实现这一点吗？

![主窗口视图](../Images/83047a1b93a8fcb072518e532a99d974.png)

可能吗？

6 - 结果应该是这样的，但没有单行代码:)

![结果](../Images/e6b9a94d579011a3523d52dc73e282d9.png)

# jms - Spring JMSTemplate - 丢失消息

> ID：15359098
> 
> 赞同：1
> 
> 时间：2013-03-12T10:46:51.173
> 
> 标签：jms, activemq, messaging, spring-jms, jmstemplate

我们正在使用 Spring JMSTemplate 3.0.1RELEASE 将 JMS 消息发送到 ActiveMQ 集群。

我正在使用 useAsynSend=true 来发送异步请求，因为这些都是 Fire and Forget。但是它们仍然是持久的，我可以确认它们确实首先在 AMQ Kaha-DB 上持久化，然后转发到消息侦听器。没有 CorelationID 或 JMSReplyTo，因为我没有回听任何响应。

```
 <amq:connectionFactory id="amqJmsFactory"
    brokerURL="failover:(tcp://MY-SERVER-01:61616,tcp://MY-SERVER-02:61616)?randomize=true&jms.useAsyncSend=true" />

<!-- JMS Producer Configuration -->
<bean id="jmsProducerTemplate" class="org.springframework.jms.core.JmsTemplate"
    p:connectionFactory-ref="amqJmsFactory" />

  <bean id="activeMQBinding" class="com.my.company.activemq.ActiveMQProductBinding">
    <property name="template" ref="jmsProducerTemplate" />
</bean> 
```

在 ActiveMQProductBinding 类中，我们有以下方法

```
 public void sendActiveMQMessageAsync(final Object message, String qName) {
    log.info("About to send message");
    template.send(qName, new MessageCreator() {
        public Message createMessage(Session session) throws JMSException {
            ObjectMessage objectMessage = session.createObjectMessage((Serializable) message);

            log.info("Sending message: " + objectMessage);

            return objectMessage;
        }
    });
} 
```

现在我可以在日志中看到正在打印日志。不抛出异常。仍然有些消息完全丢失了。它可能没有达到 ActiveMQ。我已将 Mule JMS 侦听器配置为侦听上面由“qName”定义的 ActiveMQ 队列上的消息。大多数消息都可以很好地传递到 AMQ，Mule 会在几分之一秒内接收到它们。然而，丢失的只是一些消息。当我检查 ActiveMQ 上的队列时，我可以看到收到的所有消息都已发送到 Mule。因此，我怀疑消息根本没有到达 ActiveMQ，或者 AMQ 正在拒绝。但是在 JMSTemplate spring 或 ActiveMQ 上没有日志。

创建的消息如下所示（在上面的方法中打印）。

```
 2013-03-11 16:33:11,752 INFO [com.my.company.activemq.ActiveMQProductBinding$1] Sending message: ActiveMQObjectMessage {commandId = 0, responseRequired = false, messageId = null, originalDestination = null, originalTransactionId = null, producerId = null, destination = null, transactionId = null, expiration = 0, timestamp = 0, arrival = 0, brokerInTime = 0, brokerOutTime = 0, correlationId = null, replyTo = null, persistent = false, type = null, priority = 0, groupID = null, groupSequence = 0, targetConsumerId = null, compressed = false, userID = null, content = org.apache.activemq.util.ByteSequence@61408493, marshalledProperties = null, dataStructure = null, redeliveryCounter = 0, size = 0, properties = null, readOnlyProperties = false, readOnlyBody = false, droppable = false} 
```

我在 JMSTemplate 配置或 AMQ 上的某些行为中遗漏了什么？请帮忙！

有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:55:57.427

2 我能想到的可能原因。1）我们使用了错误的连接工厂。我们应该使用带有 JMSTemplate 的池连接工厂来发送消息。org.apache.activemq.pool.PooledConnectionFactory

2) 我们使用 useAsyncSend=true - 即发送者发送消息并且不等待确认并且有消息丢失的机会。这似乎更有可能，但不确定。

仍然不接受这是答案，因为有人可能有更具体的解释。与此同时，如果有人偶然发现这个问题，可能会从这个线索中受益。

# c++ - 提升向量的序列化，在发布版本中崩溃

> ID：15359099
> 
> 赞同：1
> 
> 时间：2013-03-12T10:46:58.597
> 
> 标签：c++, serialization, boost, boost-serialization

我正在尝试基本的 Boost 序列化示例。在尝试传递向量时，我遇到了此代码的问题：

```
#include <iostream>
#include <vector>
#include <fstream>
#include <sstream>
#include <queue>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/list.hpp>
#include <boost/serialization/vector.hpp>

using namespace std;
stringstream ss (stringstream::in | stringstream::out);

void save()
{
  boost::archive::text_oarchive oa(ss);

  vector<int> v;
  v.push_back( 228 );
  v.push_back( 322 );

  oa << BOOST_SERIALIZATION_NVP(v);
}

void load()
{
  boost::archive::text_iarchive ia(ss);
  vector<int> tV;
  ia >> BOOST_SERIALIZATION_NVP(tV) ;
  std::cout << "Hello" << std::endl ;
}

int main()
{    
    save();
    load();

   return 0;
} 
```

**在发布模式下：**程序崩溃而不打印 Hello 消息。

**在调试模式下：**程序打印 Hello 消息并正常关闭。我在调试模式下看到了向量 tV 的值，它显示了正确填充的值。

我可能做错了什么？

PS：我确实在 SO 上检查了类似的问题，但与我的问题并没有真正的关系。

* * *

**根据评论编辑：**

```
void save()
{
  boost::archive::text_oarchive oa(ss);

  vector<int> v;
  v.push_back( 228 );
  v.push_back( 322 );

  oa << v;
}

void load()
{
  boost::archive::text_iarchive ia(ss);
  vector<int> ;
  ia >> v ;
  std::cout << "Hello" << std::endl ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:39:42.230

我的猜测是您在发布模式下违反了 ODR。

确保使用与构建`serialization`lib 完全相同的宏来构建程序。尤其要注意`_SECURE_SCL`宏观。

# php - 获取 json 并使用多个参数进行排序

> ID：15359100
> 
> 赞同：3
> 
> 时间：2013-03-12T10:47:01.793
> 
> 标签：php, json

好吧，我的问题很复杂。

我有那个json文件：

```
{
"books": [
    {
        "book": [
            {
                "Title": "Java How to Program",
                "Author": "Deitel & Deitel",
                "Edition": "2007"
            }
        ]
    },
    {
        "book": [
            {
                "Title": "Patterns of Enterprise Application Architecture",
                "Author": "Martin Fowler",
                "Edition": "2002"
            }
        ]
    },
    {
        "book": [
            {
                "Title": "Head First Design Patterns",
                "Author": "Elisabeth Freeman",
                "Edition": "2004"
            }
        ]
    },
    {
        "book": [
            {
                "Title": "Internet & World Wide Web: How to Program",
                "Author": "Deitel & Deitel",
                "Edition": "2007"
            }
        ]
    }
] 
```

}

在我的 PHP 中，我有这个：

```
 $file = file_get_contents('books.json');
    $json = json_decode($file, true); 
```

如何按倍数规则对数组进行排序？例如：

```
echo sort_my_array('Title', ASC, 'Author', DESC, $json); 
```

我已经尝试了很多方法，但我认为我的错误是在我尝试使用 array_multidimensional 时。

有人可以向我解释如何创建这个吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:08:56.687

试试这个

```
 $file = file_get_contents('books.json');
    $json = json_decode($file, true);
   $json = array_map(function($a) { return $a['book'][0]; }, $json['books']);
 foreach ($json as $key => $row) {
    $title[$key] = $row['Title'];
   $author[$key] = $row['Author'];
 }
 array_multisort($title, SORT_ASC,  $author, SORT_DESC, $json);
 echo "<pre>";
 print_r($json);
 echo "</pre>"; 
```

我已经尝试过它及其工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:53:59.153

采用`array_multisort`

```
<?php
$json = '{
"books": [
{
    "book": [
        {
            "Title": "Java How to Program",
            "Author": "Deitel & Deitel",
            "Edition": "2007"
        }
    ]
},
{
    "book": [
        {
            "Title": "Patterns of Enterprise Application Architecture",
            "Author": "Martin Fowler",
            "Edition": "2002"
        }
    ]
},
{
    "book": [
        {
            "Title": "Head First Design Patterns",
            "Author": "Elisabeth Freeman",
            "Edition": "2004"
        }
    ]
},
{
    "book": [
        {
            "Title": "Internet & World Wide Web: How to Program",
            "Author": "Deitel & Deitel",
            "Edition": "2007"
        }
    ]
}
]
}';

$json = json_decode($json,true);
echo "<pre>";
//print_r($json);

$sort = array();
foreach($json['books'] as $k=>$v) {
$sort['title'][$k] = $v['book'][0]['Title'];
$sort['author'][$k] = $v['book'][0]['Author'];
}
//print_r($sort);
array_multisort($sort['title'], SORT_DESC, $sort['author'], SORT_ASC,$json['books']);
print_r($json['books']); 
```

输出[http://codepad.viper-7.com/dXjDLg](http://codepad.viper-7.com/dXjDLg)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:59:38.300

使用[array_multisort](http://php.net/manual/en/function.array-multisort.php) — 对多个或多维数组进行排序。

**例子：**

```
<?php
// Obtain a list of columns
foreach ($book as $key => $row) {
    $Title[$key]  = $row['Title'];
    $Author[$key] = $row['Author'];
}

// Sort the data with volume descending, edition ascending
// Add $data as the last parameter, to sort by the common key
array_multisort($Title, SORT_ASC, $Author, SORT_DESC, $book);
?> 
```

这可以帮助你。

# javascript - 如何从客户端javascript调用特定的node.js方法

> ID：15359105
> 
> 赞同：3
> 
> 时间：2013-03-12T10:47:23.960
> 
> 标签：javascript, node.js

在我的应用程序中，我在 node.js 文件中创建了许多方法。如何从客户端 JavaScript 调用特定方法。

下面是我的 node.js 文件

```
 exports.method1=function(){

          }

        exports.method2=function(){

          }

         exports.method3=function(){

          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:50:46.453

您的客户应该发送一条消息，例如：

```
socket.emit("callMethod", {"methodName":"method3"}); 
```

在您的服务器中：

```
socket.on("callMethod", function(data) {
    if(data["methodName"] == "method3") {
        exports.method3();
    }
}); 
```

您不直接调用方法，而是发送事件/消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T02:22:09.177

除非你真的需要，否则我会避免使用套接字，根据我的经验，它们可能很昂贵。套接字非常适合用户长时间参与的密集型应用程序，否则我建议使用带有 javascript 和 node.js 的 RESTful 设置，例如：

[http://blog.modulus.io/nodejs-and-express-create-rest-api](http://blog.modulus.io/nodejs-and-express-create-rest-api)

这样，套接字不必总是打开，这无论如何都会导致更多开销。REST 将使用 http 请求，而套接字将通过 TCP 直接连接。如果您的应用程序不会不断地吸引用户，而是在各处进行更新，则 REST 会更好。

# wpf - 如何将 wpf 扩展的 takeit 图表线系列设置为顶线系列？

> ID：15359106
> 
> 赞同：0
> 
> 时间：2013-03-12T10:47:25.320
> 
> 标签：wpf, charts, wpftoolkit, lineseries

有什么方法可以将我的图表组件中显示的任何线条系列放在前面？我试过 Focus()，但这不起作用。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:43:43.130

```
var series = (Series)chart.Series[0]; // you can replace 0 by a more appropriate index
series.SetValue(Panel.ZIndexProperty, 99); 
```

我为 ZIndex 使用了任意值 99，实际上您可以使用任何大于 0 的值。

这是有关此属性[的官方文档。](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.zindex.aspx)

# css - 居中对齐在 IE 浏览器中不起作用

> ID：15359108
> 
> 赞同：0
> 
> 时间：2013-03-12T10:47:32.717
> 
> 标签：css

它适用于除一种之外的所有浏览器。我希望这个 div 位于页面的中心

```
<div style="padding-left: 800px;">
    <a class="works-top" href="/page/1"></a>
    <a class="free-top" href="/page/2"></a> 
    <a class="faq-top" href="/page/3"></a> </div> 
```

这就是我在css中定义它的方式

```
a.free-top {
   display:block;
   cursor:pointer;
   background:url(../img/free.png) no-repeat left top;
   width:100px;
   height:20px;
   text-indent:-5000px;
   margin-left:0px;
   margin-top:0px;
   margin-bottom:4px;
   float:left;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T10:50:08.043

而不是`padding-left:800px;`开

```
<div style="padding-left: 800px;"> 
```

采用`margin:0 auto; and width:1000px;`

请记住，`margin:0 auto;`只有在指定宽度时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:49:46.453

您可以使用`margin: 0 auto;`以使您的 div 居中对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:20:46.323

不引入新代码的简单逻辑，试试 `<div style="padding-left: 50%;">`

# sql - 仅在两列中获取结果集的 SQL 查询

> ID：15359121
> 
> 赞同：1
> 
> 时间：2013-03-12T10:48:09.483
> 
> 标签：sql, sql-server-2008, unpivot

我有这张桌子：

```
id  fName  lName   Address    PostCode  ContactNumber
-----------------------------------------------------
1  Tom     Daley   London     EC1 4EQ   075825485665
2  Jessica Ennis   Sheffield  SF2 3ER   075668956665
3  Joe     Bloggs  Glasgow    G3 2AZ    075659565666 
```

我想要一个查询给我这样的结果：

```
id | label
1  | Tom
1  | Daley
1  | London
1  | EC1 4EQ
1  | 075825485665
2  | Jessica
2  | Ennis
2  | Sheffied 
```

依此类推。

请就如何执行此操作提出任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:53:06.470

您可以使用该[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数将列转换为行：

```
select id, value
from yourtable
unpivot
(
  value
  for col in ([fName], [lName], [Address], [PostCode], [ContactNumber])
) unpiv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/aa9e0/1)。

unpivot将要求所有列上的数据类型相同*。*因此，您可能必须对具有与此类似的不同数据类型的任何列执行`cast`/ ：`convert`

```
select id, value
from
(
  select id, [fName], [lName], [Address], [PostCode],
    cast([ContactNumber] as varchar(15)) [ContactNumber]
  from yourtable
) src
unpivot
(
  value
  for col in ([fName], [lName], [Address], [PostCode], [ContactNumber])
) unpiv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/d597a/1)。

从 SQL Server 2008 开始，这也可以使用 a`CROSS APPLY`和 a来编写`VALUES`：

```
select t.id,
  c.value
from yourtable t
cross apply
(
  values(fName), 
    (lName), 
    (Address), 
    (PostCode), 
    (cast(ContactNumber as varchar(15)))
) c (value) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d597a/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:50:21.700

像这样的东西怎么样：

```
SELECT
 id, fName as label
FROM
 table

UNION ALL

SELECT
 id, lName
FROM
 table

UNION ALL

SELECT
 id, Address
FROM
 table

...etc 
```

# android - 如果后台堆栈中已经存在，则恢复 Activity 而不是启动

> ID：15359124
> 
> 赞同：33
> 
> 时间：2013-03-12T10:48:10.840
> 
> 标签：android, back-stack

`Activity_1`经过很多步骤后，我说

`Activity_2` **>** `Activity_3` .... 在某些情况下，`Activity_n`我更改了一些相关的数据`Activity_1`并使用它来调用它

```
Intent intent = new Intent(Activity_n.this, Activity_1.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

刷新内容。但后来我可以一直回到`Activity_1`我开始的地方，那里有旧数据。

相反，我希望使用上面的代码调用初始`Activity_1`的 's 。`onResume()`或适当**的标志**

**FLAG_ACTIVITY_CLEAR_TOP**

> 考虑一个由以下活动组成的任务：A、B、C、D。如果 D 调用 startActivity() 并带有解析为活动 B 的组件的 Intent，则 C 和 D 将完成并且 B 接收给定的 Intent，从而导致堆栈现在是：A，B。

这就是文档所说的，但不是我得到的。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-12T10:53:19.187

您可以添加这两行并尝试

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

将其写入 Activity 内的清单文件中

```
<activity
     android:name=".SettingsActivity"
     android:launchMode="singleInstance"
     android:screenOrientation="portrait" >
</activity> 
```

“singleTask”和“singleInstance”活动只能开始一个任务。它们始终位于活动堆栈的根部。此外，设备一次只能保存一个活动实例——只有一个这样的任务。

您可以使用 SingleTask 或 SingleInstance

“singleTask” - 系统在新任务的根目录创建活动并将意图路由到它。但是，如果活动的实例已经存在，系统会通过调用其 onNewIntent() 方法将意图路由到现有实例，而不是创建一个新实例。

“singleInstance” - 与“singleTask”相同，只是系统不会在持有该实例的任务中启动任何其他活动。活动始终是其任务的唯一且唯一的成员。

请参阅此链接 [http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-11T15:31:55.210

```
intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT); 
```

访问：http: [//developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_REORDER_TO_FRONT)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-24T13:49:05.520

如果存在则从 backstack 中恢复`Activity`，如果不存在则创建一个新的

```
android:launchMode="singleTask" 
```

将此行添加到您应用的 AndroidManifest.xml 并以正常的`Intent`.

# android - 在 AlertBox 中膨胀视图时出现 ClassNotFound 异常

> ID：15359130
> 
> 赞同：0
> 
> 时间：2013-03-12T10:48:29.993
> 
> 标签：android, android-custom-view

我正在尝试在 AlertBox 中填充 XML(Layout)。

这是我要膨胀的 XML...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/update_information" />

    <CheckBox
        android:id="@+id/chbDisplay"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Don't Show Again"
        android:checked="true" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/btnCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel" />

        <Button
            android:id="@+id/btnOk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Ok" />

    </LinearLayout>

</LinearLayout> 
```

这是我用来膨胀 XML 的代码...

```
private void display_Update_Info() {
        // TODO Auto-generated method stub

        LayoutInflater in = new LayoutInflater(this) {

            @Override
            public LayoutInflater cloneInContext(Context newContext) {
                // TODO Auto-generated method stub
                return null;
            }//This code is auto generated. I have no idea what is this...
        };

        final View update = in.inflate(R.layout.updateinformation, null);

        AlertDialog.Builder updateInfo = new Builder(this);
        updateInfo.setView(update);
        updateInfo.show();

    } 
```

这是 Logcat 跟踪...

```
03-12 16:15:38.929: E/AndroidRuntime(9021): FATAL EXCEPTION: main
03-12 16:15:38.929: E/AndroidRuntime(9021): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mobilevoiceapps.advancedvoicecalculatorfree/com.mobilevoiceapps.advancedvoicecalculatorfree.MainActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class CheckBox
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.os.Looper.loop(Looper.java:130)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread.main(ActivityThread.java:3687)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at java.lang.reflect.Method.invoke(Method.java:507)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at dalvik.system.NativeStart.main(Native Method)
03-12 16:15:38.929: E/AndroidRuntime(9021): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class CheckBox
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at com.mobilevoiceapps.advancedvoicecalculatorfree.MainActivity.display_Update_Info(MainActivity.java:469)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at com.mobilevoiceapps.advancedvoicecalculatorfree.MainActivity.onCreate(MainActivity.java:160)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
03-12 16:15:38.929: E/AndroidRuntime(9021):     ... 11 more
03-12 16:15:38.929: E/AndroidRuntime(9021): Caused by: java.lang.ClassNotFoundException: android.view.CheckBox in loader dalvik.system.PathClassLoader[/data/app/com.mobilevoiceapps.advancedvoicecalculatorfree-1.apk]
03-12 16:15:38.929: E/AndroidRuntime(9021):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.createView(LayoutInflater.java:471)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
03-12 16:15:38.929: E/AndroidRuntime(9021):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
03-12 16:15:38.929: E/AndroidRuntime(9021):     ... 19 more 
```

另外，如果有人可以告诉我，自动生成的代码有什么用...

```
@Override
public LayoutInflater cloneInContext(Context newContext) {
// TODO Auto-generated method stub
return null;
} 
```

当我尝试运行应用程序时，我被强制关闭...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:02:46.153

而不是这个

```
 LayoutInflater in = new LayoutInflater(this) {

        @Override
        public LayoutInflater cloneInContext(Context newContext) {
            // TODO Auto-generated method stub
            return null;
        }//This code is auto generated. I have no idea what is this...
    }; 
```

用这个

```
 LayoutInflater in = getLayoutInflater(); 
```

对于第二部分，请参阅 api 文档[http://developer.android.com/reference/android/view/LayoutInflater.html#cloneInContext(android.content.Context)](http://developer.android.com/reference/android/view/LayoutInflater.html#cloneInContext(android.content.Context))。

# algorithm - Pinterest 如何计算和检索热门 Pin 图？

> ID：15359135
> 
> 赞同：1
> 
> 时间：2013-03-12T10:48:37.377
> 
> 标签：algorithm, pinterest

Pinterest 如何计算和检索热门 Pin 图？我想它必须与重复/喜欢/点击与每个完成的时间有某种关系。但由于这些项目的加载速度非常快，我猜他们会预处理这个排名。

# grails - grails 服务中 cxf-bean / 客户端的依赖注入不起作用 - 可能是因为它是在我的插件 config.groovy 中配置的？

> ID：15359140
> 
> 赞同：0
> 
> 时间：2013-03-12T10:48:49.277
> 
> 标签：grails, groovy, cxf, grails-plugin, grails-2.0

我正在为 grails 框架开发一个支付插件。我正在使用一个支付提供商，它给了我一个 SOAP API (WSDL)，我需要一个 cxf-client 来与 web 服务进行通信。

我在我的 grails 插件项目（2.2）中安装了[https://github.com/ctoestreich/cxf-client](https://github.com/ctoestreich/cxf-client)（cxf-client 插件），并希望使用我在 grails 服务中添加到我的 config.groovy 的 cxf-client。

在我刚刚添加的服务类中

```
RecurringPortType recurringPaymentClient 
```

我不直接启动插件项目，而是将它包含在我的主项目中，在那里我使用插件服务的一些方法（也自动连接到我的主项目中）。

使用自动装配插件服务（有效）后，我使用在插件服务类中使用自动装配 cxf-client 的方法得到一个空指针异常。cxf-client bean reuccringPaymentClient 为空。

但为什么？我是否必须将 cxf-client 配置也包含到我的 mainprojects config.groovy 中？或者是否有我的主项目可以合并或也使用我的新插件的 config.groovy 的解决方案？此时 cxf-configuration 被放在 plugins config.groovy 中——也许这就是问题所在？

使用

```
RecurringPortType recurringPaymentClient = ApplicationHolder.application.mainContext.getBean("recurringPaymentClient") 
```

如 cxf-client 文档中所述，没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:41:58.653

The `Config.groovy` file in a plugin only applies when the plugin is run as a standalone application itself. It is not read when the plugin is used in another application. A trick I've seen some plugins use (and which I have stolen for one of my own plugins) is to manipulate the configuration in the plugin descriptor's `doWithSpring`, which is usually early enough to have the required effect. In your case you'd have to make your plugin `loadBefore` the `cxf-client` plugin to ensure that your `doWithSpring` (creating the config) happens before that of `cxf-client` (which is where the settings will be used).

```
class MyCleverGrailsPlugin {
  def version = "0.1-SNAPSHOT"

  def loadBefore = ['cxfClient']

  def doWithSpring = {
    application.config.cxf.client.recurringPaymentClient.clientInterface = com.example.MyClientPortType
    // etc. etc.
  }
} 
```

Or you can use `ConfigSlurper` by hand

```
def doWithSpring = {
  ConfigObject pluginConf = new ConfigSlurper(Environment.current.name).parse(com.example.MyPluginDefaultConfig)
  application.config.cxf = pluginConf.cxf.merge(application.config.cxf)
} 
```

This loads a `Config.groovy`-style script from the plugin's `src/groovy/com/example/MyPluginDefaultConfig.groovy`, and merges the `cxf` section of that config into the `cxf` section of the main application's configuration, with settings in the app overriding the defaults supplied by the plugin.

# android - 如何在 Android 中使用远程控制网站

> ID：15359143
> 
> 赞同：0
> 
> 时间：2013-03-12T10:48:51.540
> 
> 标签：android, web

我想在 android 机顶盒模型中打开我的网站：Q1 Himedia

但我不能从网站上选择任何项目？现在我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:50:11.683

我不太清楚，但下面的链接可以帮助你

[http://web.airdroid.com/](http://web.airdroid.com/)

[http://thecodepost.in/internet/remote-control-android-device-anywhere](http://thecodepost.in/internet/remote-control-android-device-anywhere)

# javascript - 获取 iframe 的当前位置/url 并分配给一个变量

> ID：15359144
> 
> 赞同：0
> 
> 时间：2013-03-12T10:48:52.500
> 
> 标签：javascript, jquery, url, dom, iframe

我有一些内容托管在我自己的服务器上，我正在动态地向用户显示这些内容。但是内容有几层深，我需要 iframe 的 url/位置，以便将其分配给链接。

结果应该是当用户点击链接时，它会将他们带到带有 iframe 的页面，并在 iframe 中显示正确的页面/图层。

如何通过 javascript 或 jquery 实现这一点？或者这也需要xpath？如果您不同意，请不要对这个问题投反对票，但请解释为什么我不应该发布它，因为投反对票太多会被禁止。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:56:16.030

尝试为此使用`jquery`，例如：

```
$(document).ready(function(){
    $("#iframeid").load(function(){
      alert(this.contentWindow.location);// do what you want with this location
    });
}); 
```

**注意：**首先添加最新版本的jquery

# cluster-analysis - 数据聚类 - 数据预处理

> ID：15359145
> 
> 赞同：0
> 
> 时间：2013-03-12T10:48:56.067
> 
> 标签：cluster-analysis

这些天我正在使用一些聚类算法，我只是想问一个与这个领域相关的问题。也许在这个领域工作的人已经有了这个答案。

在聚类期间，我需要一些要聚类的训练数据。迭代次数（例如 K-Means 算法）取决于训练数据的数量（向量的数量）。有什么方法可以从训练数据中找到最重要的数据。我的意思是：不是用所有数据训练 K-Means，也许有一种方法可以只找到重要的向量（那些影响最多集群的向量）并使用这些“重要”向量（来自训练数据）来训练算法。

我希望你能理解我。感谢您阅读并尝试回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:06:50.823

“训练”和“测试”数据是分类的概念，而不是聚类分析的概念。

K-means 是一种统计方法。如果你想加快速度，在足够大的随机样本上运行它应该会给你几乎相同的结果。

# java - 字节[] 编码

> ID：15359147
> 
> 赞同：2
> 
> 时间：2013-03-12T10:48:59.853
> 
> 标签：java, encoding, utf-8

我收到一个字节 [] 的输入。

byte[] 包含一个 xml。

**xml 声明说文档的编码是“Cp1255”，但我怀疑不是！**

**你建议用什么方法来检查 byte[] 的实际编码是什么？**

我可以手动测试它，但这不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:58:06.883

我前段时间为这些页面添加了书签，也许它们对您有用：

*   [检测字符编码](http://www.ahristov.com/tutorial/Java+Short+Recipes/Detect-character-encoding.html)
*   [如何自动检测文件的编码](http://www.java2s.com/Code/Java/I18N/Howtoautodetectafilesencoding.htm)

# java - 将图像转换为灰度图像时应用程序没有响应

> ID：15359148
> 
> 赞同：0
> 
> 时间：2013-03-12T10:49:01.163
> 
> 标签：java, android, multithreading, image, image-processing

我正在尝试开发一个可以对现有图像应用一些基本效果的应用程序。我对它很好。但是当我开始玩像素时，它就停止了工作。有人可以帮我解决吗？我应该使用另一个线程而不是主线程来编写以下代码吗？

```
 int[] imagePixels = new int[picWidth * picHeight];
         bitmap.getPixels(imagePixels, 0, picWidth, 0, 0, picWidth, picHeight);

         for (int y = 0; y < picHeight; y++) {

             for (int x = 0; x < picWidth; x++) {

                 int index = y * picWidth + x;
                 int red = (imagePixels[index] >> 16) & 0xff;     
                 int green = (imagePixels[index] >> 8) & 0xff;
                 int blue = imagePixels[index] & 0xff;

                 red = (int) Math.abs(red-255);
                 green = (int) Math.abs(green-255);
                 blue = (int) Math.abs(blue-255);

                 imagePixles[index] = 0xff000000 | (red << 16) | (green << 8) | blue;

                 }
        }
        bitmap.setPixels(imagePixels, 0, picWidth, 0, 0, picWidth, picHeight); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:13:52.777

如果您正在编写 GUI 代码（AWT/Swing/等），则第一条规则是永远不要在调度线程中执行任何 CPU 密集型操作。

如果您正在响应用户输入（例如鼠标单击、触摸或菜单选择）并且您计划执行一些会占用大量处理器时间的操作，请分离一个单独的线程来完成工作，并将事件提交给作业完成时的事件队列。

这样，UI 是响应式的，并且当您在应用效果后想要刷新部分显示时，它将响应用户生成的事件和以编程方式生成的事件。

这是对任何 UI 编码的一般建议，有人可能会添加更多关于 Android 特定功能的信息；我的猜测是，Android 操作系统没有得到对它注入事件处理队列的事件的响应，因此假设你的应用程序已经死了，而实际上它还活着，只是忙于在调度线程中做一些事情。不是。

希望有帮助。

# javascript - 谷歌地图：检查折线是否通过圆圈

> ID：15359150
> 
> 赞同：3
> 
> 时间：2013-03-12T10:49:17.723
> 
> 标签：javascript, google-maps, google-maps-api-3

我想问我如何检查某个折线是否通过一个圆？在下图中，红色折线穿过绿色圆圈内。我知道可以确定标记是否在一个圆圈内，但我不知道该怎么做，或者它是否适用于折线。

我还有 8 个声望点，所以我不能发布图片，这是图片的链接：http: [//i.stack.imgur.com/0fzXu.png](http://i.stack.imgur.com/0fzXu.png)

提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:27:10.470

我可能会做以下事情：

1.  得到圈子的界限。
2.  过滤折线坐标并找到落入该边界的点。
3.  计算圆心和每个点之间的距离。（圆形/边界中心可以通过一些内置方法轻松获得）
4.  如果任何距离<圆半径，它会给你结果。

这个算法的唯一问题是，如果你的折线穿过圆圈，但你的 popyline 坐标列表不包含落在边界内的坐标。我还没有想出解决方案:)

# android - Android 生命周期/多线程

> ID：15359151
> 
> 赞同：-2
> 
> 时间：2013-03-12T10:49:17.937
> 
> 标签：android, multithreading, android-intent, lifecycle, onresume

我正在开发一个使用 NFC 的应用程序。

当发现一个新的intent（NFC）时，Activity进入onStop状态，然后执行onNewIntent代码，该代码执行一个新的Thread，在Thread执行过程中，主Activity进入onResume状态，然后线程继续运行与它的执行。

有没有办法控制这个顺序，我的意思是：有没有办法在线程之前执行 onResume，或者至少可以确保在线程完成之前执行 onResume？

编辑：

* * *

为了解决这个问题，我在 2000 毫秒内将线程置于睡眠模式，这样主要活动将获得控制权并执行 onResume，但这听起来像是肮脏的解决方法。

这样就出现了另一个问题，在这 2000 毫秒内，可以发现一个新的意图，执行另一个线程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:06:23.893

当您的线程完成时，它可以将某些东西（`Runnable`也许是 a ）排入队列。然后，`onResume()`您可以查看队列，如果有任何内容，您可以运行它。

# tfs - 如何结合 TFS 2010 和 TFS 2012 的概念时间表？

> ID：15359156
> 
> 赞同：1
> 
> 时间：2013-03-12T10:49:44.497
> 
> 标签：tfs, tfs-2010

我们设置了 TFS 2010 和 TFS 2012。我们希望[概念时间表](http://www.imaginet.com/Solutions/ALM/Pages/Notion-Timesheet.aspx)显示来自 TFS 2010 和 TFS 2012 的工作项。

我们暂时没有计划从 2010 迁移到 2012，所以我想知道我们是否可以更改存储过程以从 TFS 2010 和 TFS 2012 数据库中提取**数据**。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:54:02.343

从上面的链接看来，Notion Timesheets 通过 TFS Reporting Warehouse Service 与 TFS 中的 SSAS 多维数据集集成。也许您可以使用不同的网址？

# ios - 如何在多个场景中通过步进器更改 FontSize？

> ID：15359158
> 
> 赞同：2
> 
> 时间：2013-03-12T10:49:47.253
> 
> 标签：ios, xcode, uistepper

我正在使用步进器来控制文本视图的字体大小，但是在我按下步进器两次之前不会触发任何操作。为什么会这样？

以下代码用于“mystepper”IBAction：

```
- (IBAction) changeFontSize:(id)sender
{

    [myStepper setMinimumValue:14.0]
    self.myStepper.maximumValue =20.0;

    UIFont newSize = [myTextView fontWithSize:self.stepper.value];
    self.myTextView.font = newSize;

} 
```

我发现问题是我需要将步进器的当前值设置为最小值。但是，我希望 size 的值可以在多个场景中传递，这样 fontSize 就不需要按超时。我怎么才能得到它？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:59:22.473

在 viewDidLoad 中：

```
[myStepper setMinimumValue:14.0]
[myStepper setMaximumValue:20.0]

UIFont newSize = [myTextView fontWithSize:self.stepper.value]; // provide some default value to myStepper
self.myTextView.font = newSize; 
```

// 将一种方法分配给步进器 - 值更改事件

```
- (IBAction)stepperValueChanged:(id)sender
{
    double stepperValue = ourStepper.value;

    [self.myTextView setFont:[self.myTextView.font fontWithSize:stepperValue]];
} 
```

这是核心逻辑，但可能需要进行细微的更改以满足您的要求。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:24:14.477

因为您想在多个屏幕中设置大小。所以一种做法是使用 userDefaults。

在您的 viewDidLoad 方法中，您需要读取 userDefaults 并检查是否没有相同的保存数据，保存 minValue 和 maxValue。

在你的方法中

```
- (IBAction)stepperValueChanged:(id)sender{
    double stepperValue = ourStepper.value;
   ...
} 
```

使用新值并更新 userDefaults 值。

并获取 userDefaults 值并在整个应用程序中使用该大小。

# android - Ninepatch Drawable 与 ColorFilter

> ID：15359159
> 
> 赞同：3
> 
> 时间：2013-03-12T10:49:48.067
> 
> 标签：android, nine-patch, android-drawable, porter-duff, statelistdrawable

我正在创建一些日历视图，我想做的是为可点击的 LineairLayout 创建一个背景。

因此，我创建了一个包含两个图像的 StateListDrawable：

1.  背景图像
2.  按下项目时的图像

到目前为止，这适用于这段代码：

```
 NinePatchDrawable background = (NinePatchDrawable) context.getResources().getDrawable(R.drawable.calendar_item);
    Drawable backgroundFocus = context.getResources().getDrawable(R.drawable.calendar_focus);

    int stateFocused = android.R.attr.state_focused;
    int statePressed = android.R.attr.state_pressed;

    StateListDrawable sld = new StateListDrawable();
    sld.addState(new int[]{ stateFocused,  statePressed}, backgroundFocus);
    sld.addState(new int[]{-stateFocused,  statePressed}, backgroundFocus);
    sld.addState(new int[]{-stateFocused}, background);
    return sld; 
```

但我想做一些额外的事情。我希望用户能够传递他想要用来显示背景的颜色。所以背景var必须是可变的，但必须是基于九个补丁的drawable。

所以我想我可以做这样的事情：

```
background.setColorFilter(Color.RED, PorterDuff.Mode.DST_IN); 
```

其中 Color.RED 必须替换为用户选择的颜色。

但这似乎不起作用。九个补丁创建完美，但没有应用颜色过滤器。

我还尝试了其他 PoterDuff.Mode 的：

*   SRC
*   SRC_ATOP
*   DST_IN
*   ...

如果您有任何线索我做错了什么或者我可以做些什么来解决我的问题，请告诉我！:-)

氪，

短剑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T15:12:14.527

我认为您不能为 StateListDrawable 中的每个 Drawable 分配 ColorFilters。原因：当 StateListDrawable 改变状态时，ColorFilter 将被移除/替换。要查看实际情况，请更改语句的顺序，以便：

```
background.setColorFilter(Color.RED, PorterDuff.Mode.DST_IN); 
```

在创建 StateListDrawable 之后出现。您会看到已应用 ColorFilter。但是，一旦状态发生变化（单击，然后释放），ColorFilter 就不再存在了。

StateListDrawables 允许您设置 ColorFilter: `StateListDrawable#setColorFilter(ColorFilter)`。这是使用提供的（或空的）ColorFilter 的方式：

**StateListDrawable#onStateChange(int[])**：

```
@Override
protected boolean onStateChange(int[] stateSet) {
    ....
    if (selectDrawable(idx)) {    // DrawableContainer#selectDrawable(int)
        return true;
    }
    ....
} 
```

**DrawableContainer#selectDrawable(int)**：

```
public boolean selectDrawable(int idx) {
    ....
    if (idx >= 0 && idx < mDrawableContainerState.mNumChildren) {
        Drawable d = mDrawableContainerState.mDrawables[idx];
        mCurrDrawable = d;
        mCurIndex = idx;

        if (d != null) {
            ....

            // So, at this stage, any ColorFilter you might have supplied
            // to `d` will be replaced by the ColorFilter you
            // supplied to the StateListDrawable, or `null`
            // if you didn't supply any.                 
            d.setColorFilter(mColorFilter);

            ....
        }
    } else {
        ....
    }
} 
```

**解决方法**：

如果可能，请使用 ImageView（尺寸为 match_parent）进行视觉交流。将您创建的 StateListDrawable 设置为 ImageView 的背景。为覆盖创建另一个 StateListDrawable：

```
StateListDrawable sldOverlay = new StateListDrawable();

// Match Colors with states (and ultimately, Drawables)
sldOverlay.addState(new int[] { statePressed }, 
                         new ColorDrawable(Color.TRANSPARENT));

sldOverlay.addState(new int[] { -statePressed }, 
                         new ColorDrawable(Color.parseColor("#50000000")));

// Drawable that you already have
iv1.setBackground(sld);

// Drawable that you just created
iv1.setImageDrawable(sldOverlay); 
```

另一种可能性：使用 FrameLayout 代替 LinearLayout。LinearLayouts 没有前景属性。

```
// StateListDrawable
frameLayout.setBackground(sld);

// For tint
frameLayout.setForeground(sldOverlay); 
```

它确实涉及透支，使其成为次优解决方案/解决方法。也许你可以看看扩展 StateListDrawable 和 DrawableContainer。而且由于您没有为 StateListDrawable 使用 ColorFilter，因此您可以`d.setColorFilter(mColorFilter);`从overridden 中删除`DrawableContainer#selectDrawable(int)`。

# java - 通过 vb.net 将焦点设置为 webbrowser 内的 java-inputdialog

> ID：15359160
> 
> 赞同：0
> 
> 时间：2013-03-12T10:49:51.507
> 
> 标签：java, vb.net, browser, setfocus

我有一个带有网络浏览器的小应用程序。在这个网络浏览器中，一个网页加载了一个 JAVA 小程序。此 java 小程序具有输入提示，如图像中所示

我需要能够通过 vb.net 按钮在此输入对话框中键入文本。但我无法以编程方式将焦点设置在此输入上。

任何帮助表示赞赏！

![在此处输入图像描述](../Images/cff0ce584921e23e4e8efd7e7b033ece.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T17:09:55.277

有几种方法可以通过使用钩子来做到这一点。第一个是使用 SetWindowsHookEx 创建本地挂钩

```
SetWindowsHookEx(WH_CALLWNDPROCRET, NativeMethods.HookProc,
                        IntPtr.Zero, (uint)AppDomain.GetCurrentThreadId()); 
```

并收听 WM_INITDIALOG windows 消息，然后找到输入文本框并插入所需的文本。[抑制托管 WebBrowser 控件对话框](http://www.codeproject.com/Articles/31163/Suppressing-Hosted-WebBrowser-Control-Dialogs)中的示例代码

第二种方法是使用 SetWinEventHook 函数和 hook EVENT_SYSTEM_DIALOGSTART 事件，其余处理是一样的。[您可以在https://github.com/jsulak/Switcheroo/blob/master/ManagedWinapi/AccessibleObjectListener.cs](https://github.com/jsulak/Switcheroo/blob/master/ManagedWinapi/AccessibleObjectListener.cs)中找到示例代码

# ios - 过滤其他 NSDictionary 中的 NSDictionary

> ID：15359162
> 
> 赞同：0
> 
> 时间：2013-03-12T10:49:57.187
> 
> 标签：ios, json, nsarray, nsdictionary

我有一本从解析 JSON 中提取的其他字典中包含子项的字典。结构如下所示：

```
 {
        children =             (
                            {
                children =                     (
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = biological;
                        urlId = 9950000123891;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = White;
                        urlId = 9950000123892;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = "various flavors";
                        urlId = 9950000123893;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = "different tastes creamy";
                        urlId = 9950000123894;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = "yogurt drinks";
                        urlId = 9950000123895;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = "Yogurt mix";
                        urlId = 9950000123896;
                    },
                                            {

                );
                hasArticles = 0;
                hasWideIcon = 0;
                label = "types of yogurt"; //those above are the children of the "types of yogurt" 
                urlId = 9950000123890;
            },

                            {
                children =                     (
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = White;
                        urlId = 9950000123906;
                    },
                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = "various flavors";
                        urlId = 9950000123907;
                    },

                                            {
                        hasArticles = 1;
                        hasWideIcon = 0;
                        label = Pappareale;
                        urlId = 9950000123909;
                    }
                );
                hasArticles = 0;
                hasWideIcon = 0;
                label = "yogurt healthy"; //those above are the children of the yogurt healthy 
                urlId = 9950000123905;
            },

                            {
                hasArticles = 1;
                hasWideIcon = 0;
                label = "puddings and creams";
                urlId = 9950000123911;
            },
                            {
                hasArticles = 1;
                hasWideIcon = 0;
                label = "Snack dessert";
                urlId = 9950000123913;
            },
                            {
                hasArticles = 1;
                hasWideIcon = 0;
                label = "various Dessert";
                urlId = 9950000123914;
            }
        );
        hasArticles = 0;
        hasWideIcon = 0;
        label = "Yogurt and Dessert ";
        urlId = 9950000123889;
    }, 
```

我的代码

```
 -(void)connectionDidFinishLoading:(NSURLConnection *)connection{

        NSLog(@"%d", [webData length]);

       NSString *strResult =[[NSString alloc]initWithData:webData encoding:NSUTF8StringEncoding];
       NSDictionary *result =[strResult JSONValue];
           for (id obj in result){
                  NSLog(@"%@", result);
                  /*A part of the result is written above, but in reality is much 
                    longer and includes all possible products in a supermarket*/

           }

   } 
```

如何提取“yogurtDessert”的孩子  

*   酸奶的种类（有小孩的）
*   yogurt-healthy（谁有孩子）
*   布丁和面霜（不含儿童）
*   点心甜点（不含儿童）
*   各种甜点（不含儿童）

那我怎么提取给不知道提前知道的yogurtDessert的孩子们呢？

我需要创建一个包含超市产品类别的字典数组（在这个例子中只有酸奶和甜点，总共 23 个元素），然后我必须创建另一个字典数组，每个字典都包含每个产品的子类别，那是成千上万。我考虑过使用 NSPredicate ，但它是字典。我必须过滤其他字典中的字典

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:07:33.740

字典的层次结构似乎包含两种类型的字典：代表类别的字典和代表产品的字典。

我在这里猜测叶子词典（没有孩子）总是产品。具有 children 键的字典始终是类别。这可能不是真的——它看起来`hasArticles`是 1 代表产品，0 代表类别——但同样，这是未知的。

这是提取所有产品的代码：

```
static void collectProducts(NSDictionary *dictionary, NSMutableArray *results)
{
    NSArray *children == dictionary[@"children"];

    if (children == nil) {
        [results addObject:dictionary];
        return;
    }

    for (NSDictionary *subDict in children)
        collectProducts(subDict, results);
}

NSArray *findProducts(NSDictionary *dictionary)
{
    NSMutableArray *result = [NSMutableArray array];
    collectProducts(dictionary, result);
    return array;
} 
```

`findProducts`使用您的 JSON调用`result`以获取所有叶字典。

# sql - 如何在分组结果中获取特定行

> ID：15359164
> 
> 赞同：1
> 
> 时间：2013-03-12T10:49:59.747
> 
> 标签：sql, oracle-sqldeveloper

我需要对一些数据进行分组，但因为有 4 个商店图像，sql 查询为每个商店返回 4 个结果。如何使用 sql 查询只为商店获取一个？

```
select s.name,si.SHOP_IMG_PATH,count(*) amount  from stab t 
inner join shop s on (s.shop_id = t.shop_id) 
inner join SHOP_IMG si on (s.shop_id= si.SHOP_ID) 
where t.acct_id = 111 and t.CR_DATE >= sysDate - 1
group by s.name,si.SHOP_IMG_PATH 
order by 3 desc,1 asc 
```

**正如您在下图中看到的那样，有 4 张图像，因此查询可以给出随机图像**

![在此处输入图像描述](../Images/cb2c5cfa06e899b63342544fa06250d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:10:27.150

您按 s.name、si.SHOP_IMG_PATH 进行分组，它将考虑 s.name、si.SHOP_IMG_PATH 的所有可能组合作为单独的组，您只需要按 s.name 保持分组

尝试这个

```
SELECT a.NAME, a.PATH, a.AMOUNT
FROM (select 
     s.name AS 'NAME', si.SHOP_IMG_PATH AS 'PATH', count(*) AS 'AMOUNT',
     ROW_NUMBER() OVER(PARTITION BY s.name
                             ORDER BY type si.SHOP_IMG_PATH) AS rk 
from 
     stab t 
inner join shop s on (s.shop_id = t.shop_id) 
inner join SHOP_IMG si on (s.shop_id= si.SHOP_ID) 
where t.acct_id = 111 and t.CR_DATE >= sysDate - 1
group by s.name
order by 3 desc,1 asc) a
WHERE a.rk = 1; 
```

替代方案您将获得结果，但这只是解决问题的一种解决方法和简单的替代方案，但不是一个好的解决方案。

```
select s.name AS 'NAME', min(si.SHOP_IMG_PATH) AS 'PATH', count(*) AS 'AMOUNT',
from 
     stab t 
inner join shop s on (s.shop_id = t.shop_id) 
inner join SHOP_IMG si on (s.shop_id= si.SHOP_ID) 
where t.acct_id = 111 and t.CR_DATE >= sysDate - 1
group by s.name
order by 3 desc,1 asc 
```

第二个查询将根据您的需要返回结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:53:30.430

```
group by s.name, si.SHOP_IMG_PATH 
```

您是在告诉它根据`SHOP_IMG_PATH`. 因此，它显示了 4 个结果，每个结果一个。

如果您不让它使用它，您将不得不`SHOP_IMG_PATH`从该子句中删除。`select`

# 编辑

得到你的评论。您正在寻找的是**随机聚合**。这是在不同的 SQL 引擎上以不同方式实现的。谷歌搜索你正在使用的那个。

如果是 Oracle，如问题标签所示，[这里](https://stackoverflow.com/questions/3066700/oracle-aggregate-function-to-return-a-random-value-for-a-group)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:30:26.170

我通过使用以下查询解决了我的问题，

```
select s.name,t.shop_id,(select min(SHOP_IMG_PATH) from SHOP_IMG si where shop_id =t.shop_id),count(*) amount  from stab t 
inner join shop s on (s.shop_id = t.shop_id) 
where t.acct_id = 111 and t.CR_DATE >= sysDate - 1
group by s.name,t.shop_id
order by 4 desc,1 asc 
```

# javascript - Javascript 获取 Cookie 问题

> ID：15359168
> 
> 赞同：0
> 
> 时间：2013-03-12T10:50:12.473
> 
> 标签：javascript, cookies, cross-domain

我在为该域的域和子域设置 cookie 时遇到困难。虽然我不能透露域名，但我可以将其命名为“domain.com”并提供代码。

我正在尝试实现以下目标：访问者来到 domain.com 并设置了某些 cookie。当他到达 subdomain.domain.com 上的某个页面时，必须读取这些 cookie。

如果用户直接登陆子域页面，cookie 设置正确，一切正常，但如果他登陆主域页面，则没有设置 cookie。你能帮助我吗？

我必须再次重申，当子域设置 cookie 但主域访问没有设置 cookie 时，以下代码有效（是的，脚本也在主域页面中）。我已经用 firebug 和 firecookie 进行了测试。

这是我设置 cookie 的代码：

```
function setCookie(c_name,value) {
    var now = new Date();
    var time = now.getTime();
    time += 3600 * 1000;
    now.setTime(time);
    var c_value=escape(value);
    document.cookie=c_name + "=" + c_value + '; path=/;domain=.domain.com';
} 
```

这是我获取 cookie 值的代码：

```
function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++) {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");
        if (x==c_name) {
            return unescape(y);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:14:36.813

您的顶级用户是否使用子域？甚至“www”？

如果不是，我认为（老实说，这是一个猜测），问题可能在于您指定 cookie 在所有子域中都有效，但在顶级域中无效。尝试取出前面的“点”。

例如，如果您的用户正在点击“ [http://domain.com](http://domain.com) ”，那么我认为不会返回为“.domain.com”设置的 cookie。另一方面，如果他们点击“www.domain.com”，那么“www”只是另一个子域，所有这些都应该有效。

有道理？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:31:07.833

对我来说这是一个新手错误。set cookie 函数在该过程的早期被调用，并且根本没有设置任何 cookie。

Thanks Jim Davis, your persistence made me look more closely to my code.

# c - 如何从源代码创建 libhidapi.dylib？

> ID：15359169
> 
> 赞同：1
> 
> 时间：2013-03-12T10:50:21.047
> 
> 标签：c, macos, firemonkey, dylib, hidapi

我有正在进行的跨平台项目（Win 和 Mac），我需要访问 USB 设备。我找到了完全符合我所有要求的 HIDAPI 库。由于没有用于 HIDAPI 库的 Delphi Firemonkey 包装器（至少我不知道），我正在编写自己的。

HIDAPI 项目网站[http://www.signal11.us/oss/hidapi/](http://www.signal11.us/oss/hidapi/)说：“在 Windows 上，可以选择将 HIDAPI 构建到 DLL 中。“

这是真的，因为我已经使用 Visual Studio 成功编译了源代码并创建了在 Windows 上完美运行的 DLL。现在，由于我不是 C 程序员并且 OSX 不是我最强的技能，我想知道这是否可能以及如何从给定的源代码创建 libhidapi.dylib？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:31:24.630

也许我错过了你的问题......但看起来就像在你提供的那个链接上，有你需要编译`.so`为 Linux/Mac 平台的说明。然后您可以使用 Mac 中的链接：

*   [ld(1)](http://developer.apple.com/mac/library/DOCUMENTATION/Darwin/Reference/ManPages/man1/ld.1.html)和[dlopen(3)](http://developer.apple.com/Mac/library/documentation/Darwin/Reference/ManPages/man3/dlopen.3.html)
*   [动态库编程主题](http://developer.apple.com/Mac/library/documentation/DeveloperTools/Conceptual/DynamicLibraries/000-Introduction/Introduction.html)
*   [Mach-O 编程主题](http://developer.apple.com/mac/library/documentation/DeveloperTools/Conceptual/MachOTopics/0-Introduction/introduction.html)

编译为 Mac 动态库 (.dylib)。

> 构建说明
> 
> ...
> 
> Mac OS X：切换到 mac/ 目录并运行 make。
> 
> 要构建测试 GUI：
> 
> 在 Linux 和 Mac 上，从 hidtest/ 目录运行 make。确保首先按照 README.txt 中的描述安装 fox-toolkit

然后 README 本身会告诉你为 mac 构建有哪些先决条件，以及如何生成最终的共享对象库：

> ```
> Prerequisites:
> --------------- 
> ```
> 
> 苹果电脑：
> 
> 在 Mac 上，如果您希望构建测试 GUI，则需要安装 Fox-Toolkit。有两种方法可以做到这一点，每一种都有轻微的复杂性。您使用哪种方法取决于您的用例。
> 
> 如果您希望构建测试 GUI 只是为了在您自己的计算机上进行自己的测试，那么最简单的方法是使用端口安装 Fox-Toolkit：sudo port install fox
> 
> 如果您希望构建 TestGUI 应用程序包以重新分发给其他人，则需要从源代码安装 Fox-toolkit。这是因为使用端口安装的 fox 版本使用与 Apple X11 库不兼容的端口 X11 库。如果您使用端口安装 Fox，然后尝试分发您构建的应用程序包，它将无法在其他系统上运行。要手动安装 Fox-Toolkit，请从 [http://www.fox-toolkit.org](http://www.fox-toolkit.org)下载源代码包，解压缩它，然后从解压缩的源代码中运行以下命令： ./configure && make && make install

以及如何生成.so：

> 将 HIDAPI 构建到 Unix 平台上的共享库中：
> 
> 在 Linux、FreeBSD、Mac 甚至 Windows 等类 Unix 系统上，使用 Mingw 或 Cygwin，构建标准系统安装共享库的最简单方法是使用 GNU Autotools 构建系统。如果您从 git 存储库中签出源代码，请运行以下命令：
> 
> ./bootstrap ./configure make make install <----- 以 root 身份，或使用 sudo
> 
> 如果您下载了源包（即：如果您没有运行 git clone），您可以跳过 ./bootstrap 步骤。
> 
> ./configure 可以接受几个控制构建的参数。最可能使用的两个是： --enable-testgui 启用测试 GUI 的构建。这需要安装 Fox 工具包。在每个平台上安装 Fox-Toolkit 的说明在上面的先决条件部分。
> 
> --prefix=/usr 指定输出头文件和库的安装位置。上面的示例将头文件放在 /usr/include 中，将二进制文件放在 /usr/lib 中。默认是安装到 /usr/local 中，这在大多数系统上都可以。

因此，您应该能够按照这些说明进行操作，但可以修改`.dylib`扩展并添加构建标志：`-dynamiclib`和`-fPIC`

# java - 如何将错误消息表与 Spring Validation 模块相关联

> ID：15359173
> 
> 赞同：0
> 
> 时间：2013-03-12T10:50:24.173
> 
> 标签：java, mysql, spring-mvc, spring-validator

到目前为止，我们一直在使用消息资源包向最终用户显示错误消息。但是，最近的设计修改要求从数据库中的错误消息表中而不是从 messages.properties 中获取错误消息。在 springs 框架中是否有可能，或者我们需要使用自定义实现？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:30:20.123

您绝对可以使您的资源包成为数据库表。 [这是 StackOverflow 上](https://stackoverflow.com/questions/5498998/database-driven-resource-bundle-in-spring)有关该主题的帖子，它使用[ReloadableResourceBundleMessageSource](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/context/support/ReloadableResourceBundleMessageSource.html)。

# c# - 为 2 个链接表创建模型的 ASP.Net MVC 错误

> ID：15359177
> 
> 赞同：4
> 
> 时间：2013-03-12T10:50:31.573
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在使用现有数据库，希望更新到 asp.net MVC 4。我很难为其中两个表创建模型。Rule 和 RuleApply 表。

我希望使用类似的东西来查询它：

```
var rules = db.Rules.Include("RulesApply").Where(t => t.rule_active == 1).ToList(); 
```

RuleApply 表没有主键（它只是用作查找表） - 所以当我尝试编译时，我得到了错误：

> EntityType 'RuleApply' 没有定义键。定义此 EntityType 的键。

有什么方法可以将 Rule.id 与 RuleApply.rule_id 联系起来吗？还是现有表必须添加主键才能让我使用 EF/Linq 等？

```
namespace emc.Models
{
public class Rule
{
    [Key]
    public int id { get; set; }
    public int type_id { get; set; }
    public int rule_active { get; set; }
    public DateTime rule_start { get; set; }
    public DateTime rule_end { get; set; }
    public virtual ICollection<RuleApply> RulesApply { get; set; }
}

public class RuleApply
{
    public int type_id { get; set; }
    public int rule_id { get; set; }
    public virtual Rule Rule { get; set; }

}
} 
```

感谢您的任何建议，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T10:54:44.420

只需将 key 属性添加到`RuleApply`type （`Id`将按约定视为 Key，您不需要使用 标记具有此类名称的属性`KeyAttribute`）。还使用`ForeignKey`属性将`rule_id`属性与`Rule`：

```
public class RuleApply
{
    public int Id; // entity should have primary key
    public int type_id { get; set; }
    public int rule_id { get; set; }
    [ForeignKey("rule_id")]
    public virtual Rule Rule { get; set; } 
} 
```

或从现有属性制作复合键：

```
public class RuleApply
{
    [Key, Column(Order=0)]
    public int type_id { get; set; }
    [Key, Column(Order=1)]
    public int rule_id { get; set; }
    [ForeignKey("rule_id")]
    public virtual Rule Rule { get; set; }    
} 
```

*顺便说一句*，在 C# 中，我们使用 PascalCase 命名属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:58:56.097

是否有某些原因您不能组合`type_id`和`rule_id`的主键`RuleApply`？如果这些字段被索引，事情会运行得更快，主键会这样做。

我不能 100% 确定，因为我所有的表通常都有键，但我相信如果 EF 没有主键，它会拒绝更新表。它不知道如何区分一张唱片和另一张唱片。

但是，您可以在 EF 中指出`type_id`并且`rule_id`是主键，`RuleApply`即使没有在基础数据库中这样做。

# jquery - jQuery 数据表插件。bStateSave 不起作用

> ID：15359181
> 
> 赞同：0
> 
> 时间：2013-03-12T10:50:43.800
> 
> 标签：jquery, mysql, view, datatable

我使用 jquery 数据表来显示数据

```
$('#datatable').dataTable({ 
    "bJQueryUI": true,
    "bSaveState": true
}) 
```

当我显示来自 mysql 表的数据时，bStateSave 有效。我可以在浏览器中重新加载页面并导致数据表保持不变（页面、每页行数、过滤器等）

当我显示来自 mysql VIEW 的数据时 - 它根本不起作用。我在 1 页和默认设置（每页的行数、清除过滤器等）上获得结果表

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:54:37.077

您的 HTML 生成可能取决于数据的来源 - 那么您可能有两种不同的 HTML 表格布局。

使用插件文档中提供的 HTML 模板并用您的数据填充它并应用设置以在 cookie 中保存状态。如果可行，请添加您的样式并根据您的需要更改 HTML。如果可以，请使用 HTML 验证器以确保始终使用具有有效 HTML 的 jQuery DataTables 插件。

暂时禁用 jQuery UI ThemeRoller 支持并专注于 HTML 标记 DataTables 基本上需要工作。如果“状态保存”有效，请重新启用它并更改标记以支持 ThemeRoller。

文档摘录：[http ://www.datatables.net/usage/features](http://www.datatables.net/usage/features)

```
"bJQueryUI": true

Enable jQuery UI ThemeRoller support (required as ThemeRoller requires some slightly different and additional mark-up from what DataTables has traditionally used) 
```

如果您有不同的 HTML 生成方法（mysql 表与 VIEWS），请在此处更详细地记录它以及生成的 HTML 和您正在使用的 DataTables 版本。

# c# - C# 服务作为具有单服务的 debian 中的守护进程

> ID：15359190
> 
> 赞同：0
> 
> 时间：2013-03-12T10:51:15.110
> 
> 标签：c#, service, mono, debian, daemon

我似乎找不到让 C# 服务在 debian 中作为“服务”运行的方法。我究竟做错了什么？

我按照 msdn 的这篇文章创建了一个示例 Windows 服务： http: [//msdn.microsoft.com/en-us/library/zt39148a (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/zt39148a(v=vs.80).aspx)

我可以在我的 Windows 机器上运行该服务，启动和停止该服务并查看它是否写入 MyNewLog。

然后我将它（.exe 文件）复制到我的 debian 机器并尝试使用（作为 root）单服务 MyNewService.exe 运行它

Syslog 告诉我服务已经启动！

我没有错误，并且在系统中看不到任何新创建的日志文件。我究竟做错了什么？

如果有帮助，这里是代码：Program.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceProcess;
using System.Text;

namespace MyNewService
{
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    static void Main()
    {
        System.ServiceProcess.ServiceBase[] ServicesToRun;
        ServicesToRun = new System.ServiceProcess.ServiceBase[]
        { 
            new MyNewService() 
        };
        System.ServiceProcess.ServiceBase.Run(ServicesToRun);
    }
}
} 
```

服务.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;

namespace MyNewService
{
public partial class MyNewService : ServiceBase
{
    public MyNewService()
    {
        InitializeComponent();
        if (!System.Diagnostics.EventLog.SourceExists("MySource"))
        {
            System.Diagnostics.EventLog.CreateEventSource(
                "MySource", "MyNewLog");
        }
        myEventLog.Source = "MySource";
        myEventLog.Log = "MyNewLog";
    }

    protected override void OnStart(string[] args)
    {
        myEventLog.WriteEntry("Service Started: OnStart");
    }

    protected override void OnStop()
    {
        myEventLog.WriteEntry("Service Halted: OnStop.");
    }
}
} 
```

/干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:29:14.760

尝试使用 System.Diagnostics.EventLog 以外的其他地方记录日志，可能是文本文件或类似文件。

我找不到任何最近的东西，但是这篇[文章](http://mono.1490590.n4.nabble.com/About-Event-Log-td1492504.html)表明在 Linux 上运行时 EventLog 被简单地丢弃了；这是有道理的。

编辑：

调查 Mono 源似乎证实了这一点。事件记录有三种可能的选项：win32、local 和 null。如果 MONO_EVENTLOG_TYPE 环境变量设置为本地，那么在 Linux 上，日志应该默认写入 /var/lib/mono/eventlog。

您确实需要将您的日志记录代码与您的期望隔离 - 看起来您的服务运行良好，但日志记录是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-26T10:43:34.577

设置环境 MONO_EVENTLOG_TYPE [https://man.cx/mono(1)](https://man.cx/mono(1))

/lib/systemd/system/order-log-writer.service

```
[Service]
Environment=MONO_EVENTLOG_TYPE=local:/var/lib/mono/eventlog
User=root
Group=root
Type=forking
PIDFile=/run/order-log-writer.pid
ExecStart=/usr/bin/mono-service -l:/run/order-log-writer.pid /usr/bin/rmq-bot/order-log-writer.exe
ExecStop=/bin/kill -HUP $MAINPID 
```

C＃

```
try
{    }
catch (Exception e)
{
    EventLog.WriteEntry(this.GetType().FullName, " error[.] " + e.Message);
} 
```

Linux

```
user@host:/var/lib/mono/eventlog/Application$ ls
1.log  2.log  3.log  Application  EDAClasses.OrderLogWriterClass
user@host:/var/lib/mono/eventlog/Application$ cat 1.log
InstanceID: 0
EntryType: 4
Source: EDAClasses.OrderLogWriterClass
Category: 0
TimeGenerated: 20170926140803456
ReplacementStrings: 1
 error[.] Error converting value 1 to type 'OrderLog'. Path '', line 1, position 1. 
```

# jakarta-ee - EAR 部署组装选项

> ID：15359191
> 
> 赞同：0
> 
> 时间：2013-03-12T10:51:22.333
> 
> 标签：jakarta-ee, classpath, manifest, ear

我想用一个 EJB 项目和一个 WAR 项目设置一个新的裸 EAR。据我了解，所有库都应该在 EarContent/APP-INF/lib 中，并在两个依赖项目中导出为“EAR 库”。然而，仅仅将 JARs 放在 lib 目录中并不能完成任何事情。

我读到我必须编辑 MANIFEST.MF 文件以包含 JAR 的类路径；为了避免手动编辑文件，我在这里阅读-> [http://pl.cs.jhu.edu/oose/resources/j2ee-tutorial/page.php?p=6](http://pl.cs.jhu.edu/oose/resources/j2ee-tutorial/page.php?p=6)我应该找到部署程序集->清单条目和从那里添加所需的 JAR。问题是，我没有 Manifest Entries 选项卡，也没有任何“添加清单条目”按钮或类似按钮！

那么，如何自动生成清单条目呢？或者，是否有其他最佳方式将库添加到 EAR 项目及其依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:58:41.567

我的错。"Ear library" 属性被错误地设置为**"lib"**而它应该是**"APP-INF/lib"**。

这使得 EAR 库按预期工作，但我仍然没有“清单条目”选项！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T13:08:43.057

使用maven进行依赖管理和打包，它会为你生成ear

# css - HTML 元素单向拉伸？

> ID：15359192
> 
> 赞同：4
> 
> 时间：2013-03-12T10:51:26.100
> 
> 标签：css

如果我想让一个 HTML 元素只填充一个方向怎么办？通常 width:100% 只会填满整个页面，所以如果我想让一个元素在一个方向结束并且永远不会在另一个方向结束怎么办。我做了一个小例子来解释我的意思。

我试着想一些方法来做这件事，这样我就可以在这里分享它们并且更有用，但我无论如何都想不出如何做到这一点。

![在此处输入图像描述](../Images/a57280b1d5e41dafca7dc41887fe9acf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:01:12.580

这样的东西有用吗？

```
.funny-box{
  width: 100%;
  position: relative;
  right: 80%;
 } 
```

或者，如果您想在页面的同一行显示更多内容。

```
<div class="special-row">
  <div class="funny-box"></div>
  <div class="regular-box"></div>
</div>

.special-row{
  position: relative;
}

.funny-box{
  width: 100%; /** or any width you want, but it needs a width **/
  position: absolute;
  right: 80%;
}
.regular-box{
  margin-left: 20%; /* flow normally, leave room for .funny-box */
} 
```

要记住的重要一点是 .funny-box 需要一个明确的宽度。如果您愿意，您可以使用 javascript 始终确保它至少到达窗口的最左边缘。

在 jQuery（其他库以及不使用库的选项可用）中，您可以执行以下操作：

```
$('.funny-box').width($(window).width()); 
```

这意味着该框始终是窗口的宽度，因此，如果您按照建议的方式放置它，它将始终超出窗口的左侧。正如 Jon 非常正确地指出的那样，在 css 中没有“永远”这样的东西，但是你可以给用户一种使用这种方法永远持续下去的*印象。*

我建议在 .funny-box 内设置一个内部 div，向右浮动并清除，这样你的东西就一直在屏幕上。

# java - 如何使用 XMLOutputter 禁用转义

> ID：15359198
> 
> 赞同：4
> 
> 时间：2013-03-12T10:51:44.167
> 
> 标签：java, xml, jdom

我使用 XMLOutputter 编写 xml 文件以在 android 中使用它。写入文件时，字符串

```
<string name="sname"><u>Text</u></string> 
```

写成

```
<string name="sname">&lt;u&gt;Text&lt;u&gt;</string> 
```

我从数据库中读取“<u>Text<u>”，然后将其放入 jdom 文档中。然后我使用

```
XMLOutputter outputter = new XMLOutputter(Format.getPrettyFormat());
Writer writer = new OutputStreamWriter(new FileOutputStream(file), "utf-8");
outputter.output(doc, writer);
writer.close(); 
```

如何防止转义并将确切的字符串从数据库放入文件？（我想要'<'，不在`&lt;`那里）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:38:28.283

您应该能够通过以下方式防止逃逸：

*   扩展`XMLOutputer`和覆盖`escapeElementEntities`方法

    ```
    XMLOutputter outputter = new XMLOutputter(Format.getPrettyFormat()) {
            @Override
            public String escapeElementEntities(String str) {
                return str;
            }
        };
    Writer writer = new OutputStreamWriter(new FileOutputStream(file), "utf-8");
    outputter.output(doc, writer);
    writer.close(); 
    ```

我在[这里找到了这个](https://forums.oracle.com/forums/thread.jspa?threadID=1248248)

*   `EscapeStrategy`在 上设置自定义`Format`以防止转义某些字符

无论哪种方式，您都应该小心生成有效的 XML。

希望这可以帮助。

# c# - 无法使用 javascript 使用 WCF 服务（readyState 从 1 变为 4）

> ID：15359200
> 
> 赞同：0
> 
> 时间：2013-03-12T10:51:52.450
> 
> 标签：c#, javascript, wcf

每当我尝试在外部文件中使用下面的 javascript 使用 WCF 时，readyState 从 1 变为 4。在任何情况下，ResponsText 始终为空。

每当我尝试使用相同的代码使用 WCF 时，但这次是在项目本身中，它按预期工作。

我究竟做错了什么？提前致谢。

我有一个界面

```
namespace CeviService
{
     [ServiceContract(Namespace = "CeviService")]
    public interface ICeviSpotter
    {

         [WebInvoke(ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Wrapped)]
          String EchoWithPost(string n1, string n2);
  }

} 
```

有一个实现

```
namespace CeviService
{
public class CeviSpotter : ICeviSpotter
{
     public String EchoWithPost(String n1, String n2)
    {
        return n1;
    }
}} 
```

使用以下 web.config

```
<?xml version="1.0"?>
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="MyServiceTypeBehaviors">
                    <serviceMetadata httpGetEnabled="true"/>
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
                <behavior name="AjaxBehavior">
                    <webHttp/>
                </behavior>
            </endpointBehaviors>
        </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
        <services>
            <service name="CeviService.CeviSpotter" behaviorConfiguration="MyServiceTypeBehaviors">
                <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex"/>
                <endpoint address="ajaxEndpoint" behaviorConfiguration="AjaxBehavior" binding="webHttpBinding" contract="CeviService.ICeviSpotter"/>
            </service>
        </services>
    </system.serviceModel>
    <system.web>
        <compilation debug="true"/></system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

使用以下 javascript 调用：

```
 function makeCall(operation) {

        // Create HTTP request
        var xmlHttp;
        try {
            xmlHttp = new XMLHttpRequest();
        } catch (e) {
            try {
                xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
            } catch (e) {
                try {
                    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                } catch (e) {
                    alert("This sample only works in browsers with AJAX support");
                    return false;
                }
            }
        }

        // Create result handler
        xmlHttp.onreadystatechange = function () {
            alert(xmlHttp.readyState);
              //  alert(xmlHttp.responseText);

        }

        // Build the operation URL
        var url = "http://localhost:49456/CeviSpotter.svc/ajaxendpoint/EchoWithPost";
        //url = url + operation;

        // Build the body of the JSON message
        var val1 = document.getElementById("num1").value;
        var val2 = document.getElementById("num2").value;

        var body = '{"n1":';
        body = body + val1 + ',"n2":';
        body = body + val2 + '}';

        // Send the HTTP request
        xmlHttp.open("POST", url, true);
        xmlHttp.setRequestHeader("Content-type", "application/json");
        xmlHttp.send(body);

    } 
```

主机配置如下：

```
<%@ServiceHost 
    language="C#"
    Debug="true"
    Service="CeviService.CeviSpotter"
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:54:21.827

如果未从`http://localhost:49456`（包括端口号）提供包含 JavaScript 的页面，则问题是您正在尝试进行跨域调用，该调用被[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)阻止。因此，例如，如果您在文件资源管理器中双击打开的文件中使用该 JavaScript（因此它的协议是`file://`），或者您正在从`http://localhost`（不使用端口 49456）加载它，等等.

您可以通过处理飞行前呼叫并使用适当的标头响应来启用使用[跨域资源共享的访问（前提是您使用的](http://www.w3.org/TR/access-control/)[是支持 CORS 的浏览器](http://caniuse.com/#feat=cors)）。

# perl - 如何检查我的服务器中是否安装了 libwww-perl

> ID：15359201
> 
> 赞同：-4
> 
> 时间：2013-03-12T10:51:54.223
> 
> 标签：perl, centos, libwww-perl

如何检查我的服务器中是否安装了 libwww-perl。

并告诉我 libwwww-perl 有什么用。如果我们删除会影响的事情，如何删除它。

libwww-perl 与 perl 模块或 lighttpd 连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:55:51.063

> 如何检查我的服务器中是否安装了 libwww-perl

尝试使用它提供的东西是最简单的方法。

如果`perl -MLWP::UserAgent`抛出错误，则未安装。

> 还有告诉我 libwwww-perl 有什么用

[它的手册](http://search.cpan.org/dist/libwww-perl/lib/LWP.pm)可以比我更全面地做到这一点。

> 如何删除这个

这首先取决于您如何安装它。

> 如果我们删除会影响的事情。

潜在的：许多不同的东西（包括您的操作系统提供的管理脚本）。提供一个全面的清单是不可行的。

> libwww-perl 与 perl 模块或 lighttpd 连接。

它提供 Perl 模块。它们可能被通过 Lighttpd 运行的脚本使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:55:32.707

libwww-perl 包应该对应 LWP::UserAgent Perl 模块。它是 HTTP 用户代理的纯 Perl 实现，正如您可能想象的那样，它用于通过 HTTP 检索文档。因此，如果您的服务器上没有运行任何使用 HTTP 的脚本，那么删除它可能是相当安全的。

# image - Flash 导入的图像文件大小不正确

> ID：15359205
> 
> 赞同：0
> 
> 时间：2013-03-12T10:52:20.350
> 
> 标签：image, flash, import, compression, filesize

我刚刚使用“保存为 Web”功能从 Photoshop 导出了 JPG 图像。我把图像缩小到 58kb。

当我将它导入 Flash 并进入它的属性以更改压缩时，原始文件大小被指定为 1884.5kb，因此我必须应用大约 40% 的压缩以将其降低到大约 60kb，这当然意味着我松了我在 Photoshop 中保存的质量。

有谁知道解决这个问题的任何方法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:13:32.923

如果您将**压缩**设置为“照片 (JPEG)”并将**质量**设置为“使用导入的 JPEG 数据”，那应该可以满足您的需要。我相信“原始”文件大小实际上是在以每像素 32 位描述原始位图数据。

# ios - 使用 Google Analytics 2.0 B4 时出现错误的 exc 错误

> ID：15359208
> 
> 赞同：7
> 
> 时间：2013-03-12T10:52:26.897
> 
> 标签：ios, exc-bad-access, google-analytics-api

示例项目，使用 Google Analytics [Xcode 项目][1]

实际上我已经为谷歌分析创建了一个phoneplugin。我的代码似乎工作正常，但是当我尝试将我的代码添加到现有项目时，我遇到了错误的 exc 错误。我真的找不到为什么代码可以在新项目上工作，但不能在旧项目上工作。

代码在新项目中运行良好。我可以在分析仪表板中看到数据，并且一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:44:58.307

遵循文档：

首先，您需要一个 Google Analytics 跟踪 ID 来跟踪 SDK 的应用程序使用情况。

其次，继续将头文件（GAI.h、GAITracker.h、GAITransaction.h 和 GAITransactionItem.h）和 libGoogleAnalytics.a 添加到您的 XCode 项目中。您的应用必须链接以下框架： 1- CoreData.framework 2- SystemConfiguration.framework

注意：要使用带有完整调试符号的库版本，请链接 libGoogleAnalytics_debug.a 而不是 libGoogleAnalytics.a。如果您遇到源自 SDK 的异常或崩溃，这可能会很有用。

BR

# android - 如何在列表视图项的单击上显示特定的单行项以及android中的上一个/下一个按钮？

> ID：15359210
> 
> 赞同：1
> 
> 时间：2013-03-12T10:52:39.507
> 
> 标签：android

我有两个活动A和B。

在 A 活动中，我正在显示`listview`. 当用户单击 Activity A 上列出的任何项目时，它应该重定向到下一个 Activity B，并且它应该显示该特定的单个项目以及 Next/Previous 按钮。

当用户单击“下一个”或“上一个”按钮时，该项目应相应更改。

我应该使用`listview`还是简单地使用 textview 来显示活动 B 上的特定记录，这些记录会更改上一个/下一个的单击。如何做到这一点？

请帮帮我。这是我的活动 A

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_giga);
     StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
     System.out.println("My Exception 333: ");

      loadNews();
}
private void loadNews(){    
      try{
             BaseFeedParserGiga parser = new BaseFeedParserGiga();
                messages = parser.parsse();
                final String title[]= new String[messages.size()] ;
                final String pubdate[]= new String[messages.size()] ;
                final String link[]= new String[messages.size()] ;
                final String Long[]= new String[messages.size()] ;
                final String image[]= new String[messages.size()] ;
                list = new ArrayList<String>(messages.size());
                mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
                for (com.example.newsworld.MessageGiga msg : messages){
                    list.add(msg.getTitle());
                    title[j]=msg.getTitle();
                    pubdate[i]=msg.getPubdate();
                    link[m]=msg.getLink();
                    Long[l]=msg.getDesc();
                    Document doc = Jsoup.parse(Long[l]);
                     Elements links = doc.getElementsByTag("img");
                     String src = links.attr("src");
                    image[k]=src;       
                 setListAdapter(new ArrayAdapter<String>(GigaActivity.this, R.layout.rows, list ){
                            @Override
                            public View getView(final int j, View convertView, ViewGroup parent) {
                                            View row;
                                            ViewHolder holder;      
                                            if (convertView == null) {
                                                    convertView = mInflater.inflate(R.layout.row, parent, false);
                                                    System.out.println("My Exception 5: ");
                                                    holder = new ViewHolder();
                                                    holder.txtclick= (TextView) convertView.findViewById(R.id.textView1);
                                                    holder.txtTitle = (TextView) convertView.findViewById(R.id.textView2);
                                                    convertView.setTag(holder);
                                            } else {
                                                    holder = (ViewHolder) convertView.getTag();
                                            }
                                            String s=image[j];

                                            holder.txtTitle.setText(title[j]+"\n\n"+pubdate[j]);
                                            holder.txtclick.setOnClickListener( new OnClickListener()
                                               {
                                                    public void onClick(View viewParam)
                                                    {
                                                    Intent in = new Intent(GigaActivity.this,GigaPage.class);
                                                 in.putExtra("title", title[j]);
                                                 in.putExtra("pubdate", pubdate[j]);
                                                 in.putExtra("link", link[j]);
                                              startActivity(in);
                                            overridePendingTransition(R.anim.grow_from_middle,R.anim.shrink_to_middle);   
                                                    }
                                                   });
                                            return convertView;
                             }  

                            class ViewHolder {
                                    TextView txtLat;
                                    TextView txtTitle; 
                                    TextView txtPubdate; 
                                    ImageView txtLink;
                                    TextView txtclick;
                            }
                    });  

                         j++;
                         i++;
                         m++;
                         l++;
                         k++;
                    }

           }catch(Exception exc){
               System.out.println("My Exception : "+exc.getMessage());
           }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:07:27.077

我想我会按照你的建议布局 B 页面，就像 TextViews 的集合一样，两边都有一些箭头连接他们的 onClick 方法，通过遍历页面 A 的列表视图后面的光标来获取它的索引来检索适当的对象。我可能还会让侧滑手势做同样的事情。

```
ViewGroup pageB = (ViewGroup) ViewGroup.inflate(this, R.layout.pageB, null);
TextView textView = (TextView) pageB.findViewById(R.id.a_text_view);

listViewAdapter = new SimpleCursorAdapter(this, R.layout.listitem, listCursor, tableFromColumns, toListItemViews, 0);
listView.setAdapter(listViewAdapter);
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    listCursor.moveToPosition(position);
        textView.setText(listCursor.getString(0)); //set textview on pageB with record data
        setContentView(pageB);
    }
});

void onClickNextRecord() {
    listCursor.moveToNext(); // go to next record
    textView.setText(listCursor.getString(0)); //update textview on pageB with next record data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:36:07.367

取一个字段 Hashmap

```
HashMap<String,com.example.newsworld.MessageGiga> messages=new HashMap<String,com.example.newsworld.MessageGiga>(); 
```

在 for 循环中

```
 for (com.example.newsworld.MessageGiga msg : messages){
messages.put(msg.getTitle(),msg);

} 
```

将其作为额外的意图发送，确保您的消息已序列化

```
intent.putExtra("messages",messages); 
```

在 GigaPage 中得到它是这样的

```
if (getIntent().getSerializableExtra("messages") != null)
            messages= (HashMap<String, com.example.newsworld.MessageGiga>) getIntent().getSerializableExtra("messages"); 
```

您还发送了用于填充列表视图的列表

首先像这样获取所选项目的索引

```
 int index = yourlist.indexOf(title)  //here title is selected item title 
```

像这样获取当前标题的数据

```
com.example.newsworld.MessageGiga  msg=messges.get(ttile); 
```

它将返回包含消息相关标题的所有信息的消息对象

对于**以前**的onClick，像这样减少索引

```
index=index-1;
title=yourlist.get(index);
com.example.newsworld.MessageGiga  msg=messges.get(ttile); 
```

**对下一次**增加索引值执行相同的操作；

# python - Python 日期时间

> ID：15359212
> 
> 赞同：2
> 
> 时间：2013-03-12T10:52:42.333
> 
> 标签：python, django, datetime

我有一个 Django 模型：

```
class Measurement(models.Model):
   """
   Saves the measurment data for every subdevice
   """
   node = models.ForeignKey('Node', related_name='measurements')
   value = models.CharField(_(u'Value'), max_length=255)
   begin = models.DateTimeField(editable=True)
   end = models.DateTimeField(editable=True) 
```

现在值是 True/False 或像 00123 这样的数字。现在我要做的是创建一个 csv 表：

```
Day, Time, node1, node2, node3
1, 00:00, 0, 1, 0
1, 00:05, 0, 1, 1
1, 00:10, 1, 0, 0
...
7, 24:00, 0, 0, 0 
```

节点是一个设备，如电视或桌面灯。值 (0/1) 定义设备是否打开。开始/结束看起来像这样：

```
begin: 2012-12-01 00:00:00, end: 2012-12-01 08:32:33 
```

现在我想知道的是如何检查时间/日期的值： 2012-12-01 at 00:30 ？我是否创建一个包含可能时间的列表：

```
times = [00:00, 00:05, ... 12:00, 12:05, ... 23:50, 23:55, 24:00] 
```

遍历它并检查项目是在开始还是结束？我怎样才能最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:13:26.737

以干净的方式迭代时间间隔很容易 - 你可以编写一个迭代器函数，如下所示：

```
def itertime(start, end, int_step):
    current_time = start
    step = datetime.timedelta(0, int_step)
    while current_time < end:
        yield current_time
        current_time += step 
```

并在语句中使用它`for`来获取 CSV 文件每一行的 tme 测量值：

```
for time in itertime(start_time, end_time, step=5 * 60):
     ... 
```

现在，您需要的并不是那么简单——它很棘手，并且有一种“旧时不得不思考的问题”的感觉。但是，让我尝试总结一下您必须实现的步骤。我不会编码，或者我会为你工作，我认为 Python 会邀请

```
Read all the measurements you want to take in account 
(use a simple query like Measurement.objects.filter(end__gte=begin_time,
     begin__lte=end_time) )
get all the nodes in your query
for each node:     
    - get the initial state of each node at "begin_time" and annotate it in
       a dictionary with the current state of each node
    - calculate a "next_change" time in each node - determine the time
        of next state change (either its begin, or its end, if the begin is in the past)
    - push then into a n ordered data structure, such as a list 
          maintained with Python's heapq based on this 
          next_state_change" time-stamp

Then start your CSV files, with headers and first value line (from the dictionary
         with the current state)
Loop through your time stamps along the snippet above, and for
               each timestamp:
      - pick measurements from your list until "nest_state_change" is
              after your timestamp. For each of them:
            - if "end" is in the future, annotate that as "next_state_change" and 
                  push it back on the heapq
            - update the device state on your nodes dictionary
      - write a new row to your CSV file 
```

这就是它。在这里查看我的答案：[heapq with custom compare predicate](https://stackoverflow.com/questions/8875706/python-heapq-with-custom-compare-predicate)是一种使用 Python 的 heapq 的实用方法

# javascript - 脏矩形 - 清除的矩形不再出现

> ID：15359213
> 
> 赞同：3
> 
> 时间：2013-03-12T10:52:44.827
> 
> 标签：javascript, html

我想加快我的游戏速度，而不是清除所有画布，我只清除部分（动画的地方）。这是我的代码的一部分：

```
this.draw = function(context) {
        context.clearRect(this.oldx, this.oldy, this.width, this.width);
        if (this.type == "square") {
            context.fillRect(this.x, this.y, this.width, this.height);
        } 
        this.oldx = this.x;
        this.oldy = this.y;
} 
```

ClearRect 有效，但不能清除整个矩形。所有的正方形都应该是黑色的，但它们不是（看起来 fillRect 不起作用，但我认为它起作用）。在那里你可以看到发生了什么： ...我使用这个函数（clearRect）错了吗？为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:26:28.347

1.  clearRect 没有清除整个矩形可能是因为您的浏览器中的抗锯齿实现。我认为将 clearRect 区域扩大一个像素会对您有所帮助。还要尽量避免为画布设置宽度/高度，这会改变视图并且某些对象可能会显示模糊

2.  关于您的代码，地面矩形永远不会是黑色的，因为在*drawMap*函数中您只为一个对象调用*this.obiekt1.draw*方法，因此您可以循环清除先前绘制的区域。尝试为每个地图块提取*清除*方法或创建单独的对象。

# java - JavaFX FXML 应用程序作为小程序

> ID：15359216
> 
> 赞同：1
> 
> 时间：2013-03-12T10:52:51.863
> 
> 标签：java, applet, javafx-2, fxml

我有一个非常简单的 JavaFX FXML 应用程序（一个带有两个按钮和一个标签的锚窗格：一个按钮打印一个字符串，另一个按钮打印一个退出应用程序）。

我想将此应用程序作为小程序运行以进行测试。

由于我对这个过程完全陌生，有人可以帮助我了解如何以及如何将我的应用程序部署在服务器 Web 空间中，以便客户端可以在不下载应用程序的情况下使用它？

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:24:52.850

在 .FXML 中

```
..xmlns:fx="http://javafx.com/fxml" fx:controller="DIRECTORY.controler"> //controler.java 
```

在 .java (Main.java)

```
public static void main(String[] args) {
    launch(args);
}

@Override
public void start(final Stage primaryStage) {

    BorderPane pane = null;
    try {
        pane = (BorderPane) FXMLLoader.load(MAIN.class.getResource("FILE.fxml"));
        pane.getStyleClass().add("main");
    } catch (IOException ex) {

        Logger.getLogger(MAIN.class.getName()).log(Level.SEVERE, null, ex);
        System.exit(-1);
    }

    primaryStage.setScene(new Scene(pane, 1100, 620));
    primaryStage.getScene().getStylesheets().add(MAIN.class.getResource("FILE.css").toExternalForm());
    primaryStage.centerOnScreen();
    primaryStage.setTitle("Title");
    primaryStage.show();

} 
```

在 .java (controler.java)

```
public class controler implements Initializable {

@FXML
private WebView browser;
@FXML
private Button back, refresh, home;
@FXML
private ComboBox CB; 
```

# spring - “资源”属性值不刷新

> ID：15359217
> 
> 赞同：1
> 
> 时间：2013-03-12T10:52:52.333
> 
> 标签：spring

**//乔布斯.xml**

```
<bean id="deptartmentReader" class="org.springframework.batch.item.file.FlatFileItemReader">        
       <property name="resource" value="file:C:\TO-DEV\dept.data" />    
       <property name="lineMapper" ref="deptLineMapper" />      
    </bean> 
```

**//tasklet.java**

```
ConfigurableApplicationContext context = new ClassPathXmlApplicationContext("Jobs.xml"); 
```

当我从 unix 脚本运行此 java 文件时，出现以下**错误**：

```
Caused by: java.lang.IllegalStateException: Input resource must exist (reader is in 'strict' mode): URL [file:C:\TO-DEV\OHM-Utils\dept.data]
        at org.springframework.batch.item.file.FlatFileItemReader.doOpen(FlatFileItemReader.java:250)
        at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.open(AbstractItemCountingItemStreamItemReader.java:134)
        ... 15 more 
```

请对此提出建议...

# email - 如何将 MailChimp 设计的活动转换为 Mandrill 中的模板？

> ID：15359218
> 
> 赞同：5
> 
> 时间：2013-03-12T10:52:55.950
> 
> 标签：email, mailchimp, transactional-email, mandrill

我想将我的 MailChimp 活动转换为 Mandrill 模板。这样我就可以使用 MailChimp 模板发送 Mandrill 交易电子邮件。我在 Mailchimp 中使用拖放工具设计了该活动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-10T13:21:06.690

要将 MailChimp 活动复制到 Mandrill 模板中，您必须：

1.  登录 MailChimp 并进入“活动”
2.  点击“我的模板”
3.  继续您要在 Mandril 上复制的模板，然后选择“编辑代码”
4.  复制代码并将其粘贴到[http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)
5.  转换代码并复制
6.  继续使用新的 Mandrill 模板并粘贴代码 ^^

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:55:10.520

抱歉，您无法将 Drag-N-Drop 设计的 mailchimp 活动转换为模板。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-09T15:57:34.987

根据当前 Mailchimp 界面（2014 年 10 月），我发现该`Send to Mandrill`选项的唯一地方是：

1.  单击`Templates`左侧菜单栏中的
2.  对于给定的模板，`Send to Mandrill`在右侧的下拉列表中（`Edit`按钮旁边）找到选项。

# java - 如何在客户端处理动态错误字符串以进行国际化

> ID：15359219
> 
> 赞同：1
> 
> 时间：2013-03-12T10:53:06.137
> 
> 标签：java, templates, frameworks

我在 REST 服务器端工作。

我将在响应客户端时更新 HTTP 标头中的 `error_code`and 。`error_message`这很好，直到 error_message 是静态的。

```
e.g. error_code    : PC_USER_007
     error_message : You are logged out! 
```

客户端将查看`error_code(PC_USER_007)`; 在相应的属性中，他们将进行本地化。因此，如果用户属于中国，现在 GUI 将向您显示相同的中文 error_message。

如果是如下动态错误字符串，

```
e.g. error_code    : PC_USER_008
     error_message : You have tried 2 attempts; only 1 attempts is remaining. 
Here 2, 1 are dynamic values.. 
```

现在 GUI 端我们如何将此错误消息转换为其他语言。

任何框架（struts、spring ...）已经支持这种本地化？

[这与如何替换 Java 字符串中的一组标记](https://stackoverflow.com/questions/959731/how-to-replace-a-set-of-tokens-in-a-java-string)正好相反？

服务器端我按照上面的链接；现在我想要客户端的相反情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T06:13:43.147

让服务器传递完整的 error_message 不是很合适。

通常，服务器会传递 error_code 和一组错误值。例如

```
error_code: PC_USER_008
error_values: "42", "a value" 
```

客户端以多种语言保存该 error_code 的模板，看起来像

```
"This is argument {1} and arg {2}" 
"Ceci est argument {1} et arg {2}" 
```

ETC..

然后客户端使用接收到的值执行占位符 {1}...{n} 的简单字符串替换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T05:52:32.537

如果我是你，我会首先将错误代码从 HTTP 标头移动到响应内容中的结构（比如 json）。标头不是分层的，也没有结构。您最好将它们包含在带有适当状态代码的响应中。

至于本地化消息及其模板，我没有遇到任何返回错误响应但没有错误消息的 REST 服务。例如，看一下[zoho](https://writer.zoho.com/public/help/show.api/fullpage#Error%20Codes)、[django](http://django-rest-framework.org/api-guide/exceptions.html)（REST API）、[S3](http://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html)。它们都返回代码和消息。

1.  不返回消息的问题是您的客户永远不会立即知道问题所在。这使得调试更加困难。
2.  客户端也无法访问您稍后在服务器代码中引入的新错误代码，这加强了#1。
3.  弃用错误代码或更改其错误消息不再由您控制。

实现模板，但在服务器端进行。要求客户向您发送一个标识其区域设置的 ID。根据语言环境，可以更改错误消息。您的客户永远不必因为服务器端的更改而更新他们的代码，并且您将始终有正确的本地化消息显示给客户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T11:58:49.290

通常，如果您正在处理多语言应用程序，您应该使用 ID 来识别服务器和 GUI 中的文本，并且您应该在 error_message 字段中使用文本 ID。有一些框架使用英文文本作为 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T11:06:18.800

在响应标头中发送整个错误消息不是一个好习惯。您可以发送错误代码并为这些代码实施特定于语言环境的消息。

在 javascript 中请求成功后，使用回调方法跟踪失败响应代码。创建一个包以读取特定语言环境用户的不同属性文件并读取键值并显示正确的错误消息。

前任：

```
Properties file/ JS file
1\. EnglishLabels.properties
2\. MexicanLabels.properties
3\. JapaneseLabels.properties

var bundle = read the specific property file and save the map (key : 0001 , value : Invalid Login) 
```

在成功请求之后，使用回调方法显示特定于语言环境的错误消息。

问候普尼斯

# caching - Grails / Tomcat：避免拒绝服务攻击

> ID：15359221
> 
> 赞同：2
> 
> 时间：2013-03-12T10:53:11.130
> 
> 标签：caching, tomcat, grails, denial-of-service

我有一个在 Tomcat 上运行的 Grails 应用程序，使用 MySQL 作为数据库服务器。

我通过测试发现很容易在站点上创建拒绝服务攻击，只需多次刷新页面（即按住F5）。这会导致服务器上的负载随着与 MySQL 数据库的连接数一起迅速增加。

最终，该站点变得无响应，并且可能需要几分钟才能恢复正常。

任何人都可以推荐调试方法吗？

我应该看看缓存吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:00:32.583

我不建议在 grails 层处理 DOS 攻击。我总是建议在 Java Web 应用程序前面放置一个像 nginx 或 apache 这样的服务器。然后可以将 Web 服务器配置为代理您的 Web 应用程序。Web 服务器前面的防火墙创建了另一层安全性。如果您尝试在 Web 应用程序层解决 DOS 攻击，您很可能为时已晚。

关于 DOS 的快速参考在这里：[http ://en.wikipedia.org/wiki/Denial-of-service_attack](http://en.wikipedia.org/wiki/Denial-of-service_attack)

缓存并不意味着修复 DOS 攻击顺便说一句。它旨在提高应用程序性能。许多 DOS 攻击发生在套接字级别。

同样，我不建议在 Web 应用程序级别阻止 DOS。不管你用什么语言写作。

我的另一个问题是您是否对您的应用程序进行了负载测试？您可能会遇到基本性能问题。我建议查看商业工具或基于 Web 的负载调整服务。我猜您实际上看到的是自定义 Web 应用程序性能问题，而不是 DOS 问题。

# r - 将文本文件转换为矩阵

> ID：15359224
> 
> 赞同：-10
> 
> 时间：2013-03-12T10:53:14.380
> 
> 标签：r, matrix

我有一个输入文本文件，可以在这里下载：[下载](http://thebrain.bwh.harvard.edu/uniprobe/downfile.php?gene=Egr1&folder=SCI09&type=primary&RC=0)

我想将文本文件转换为如下所示的 count.matrix：

```
 1 2 3 4 5 6
  A 3 0 0 0 0 0
  C 0 3 0 0 0 0
  T 0 0 3 0 0 0
  G 0 0 0 3 3 3 
```

这给出了以下感兴趣的序列：ACTGGG

文本文件包含概率分数（计数/ N）我需要过滤掉所有具有 A 的值，这将是矩阵的第一行，第二行将是 C，然后是 C 持有的所有值，等等！任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:35:06.640

我会尝试猜测被问到的内容。

假设您的数据框已命名`df`，您可以将每列转换为矩阵并将其放入列表中`lapply()`。例如，我转换为具有两列的矩阵。

`seq_len(ncol(df)`将使数字序列从 1 到列数，因此转换将遍历所有列。然后`matrix()`将每一列转换为矩阵。

```
lapply(seq_len(ncol(df)),function(i) matrix(df[,i],ncol=2))
[[1]]
          [,1]      [,2]
[1,] 0.1682512 0.1589936
[2,] 0.1583613 0.1583613
[3,] 0.2294395 0.1401881

[[2]]
          [,1]      [,2]
[1,] 0.1654002 0.1563962
[2,] 0.1423133 0.1283551
[3,] 0.1913303 0.1068051

[[3]]
          [,1]      [,2]
[1,] 0.2558522 0.3320734
[2,] 0.2304359 0.1847167
[3,] 0.2934963 0.1893830 
```

# c++ - 将指针分配给指针时出现分段错误

> ID：15359227
> 
> 赞同：0
> 
> 时间：2013-03-12T10:53:21.187
> 
> 标签：c++, pointers, segmentation-fault

我有

```
struct Node{
    Node* father;
    Node* left_son;
    Node* right_son;
    char content;
};

void build_tree(Node* node){
    Node* left;
    left->father=node; //segfault
}

void init(){
    Node* root;
    build_tree(root);
} 
```

我在`build_tree()`. 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:55:34.237

```
Node* left; 
```

这*只是*声明了一个指针。没有其他的。没有`Node`对象。指针可以指向一个`Node`对象，但它不会自动给你一个。事实上，它`left`是未初始化的，并且不能在不调用未定义行为的情况下取消引用。

您需要以`Node`某种方式分配一个对象，也许是`new`：

```
Node* left = new Node(); 
```

但是，请确保您不要忘记`delete`它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:54:12.853

你没有初始化`left`，所以它指向一个看似随机的位置。取消引用随机指针会导致*未定义的行为*，这通常会导致崩溃。

这同样适用`root`于`main`函数。

您需要在使用它们之前分配节点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:00:06.770

函数中的left在`bulid_tree()`你使用它指向父亲之前没有被分配一个有效的值。

不知道是干什么`build_tree()`用的。但只是为了解决这个问题，您将代码更改为：

```
void build_tree(Node* node)
{
    Node * left = (struct Node *)malloc(sizeof(struct Node));
    left->father=node;     
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T04:29:01.607

当有一条指令试图访问无效/不正确的内存地址时，通常会发生分段错误。

在你的函数中： void build_tree(Node* node) {

```
Node* left; 
```

-- 这会创建一个指针，该指针未初始化为指向应该存在的某个对象。

```
left->father=node; //segfault 
```

- 在这里，您试图访问指针已初始化为的对象的成员，但实际上该对象不存在（不存在新的构造函数语句），因此访问是无效访问，导致分段错误。

```
} 
```

要更正上述问题，作为 SO 成员之一（sftrabbit）之前已回答，您需要在指针初始化之前添加以下语句 :: Node* left = new Node();

就这样。希望这可以帮助

# java - 在 Java 服务器中接收 ios 套接字数据

> ID：15359229
> 
> 赞同：0
> 
> 时间：2013-03-12T10:53:28.250
> 
> 标签：java, ios, sockets

我必须实现一个从智能手机上运行的 ios 应用程序接收数据（字符串）的 java 服务器。

不幸的是，我从来没有在类似的情况下工作过，所以我想知道是否有人可以给我一些从哪里开始的指示（或信息资源来研究）。

我这里有用于创建套接字和发送数据的 ios 代码：

```
-(bool)createSocket {
    sock = 0;
    if ((sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)) == -1) {
        NSLog(@"Failed to create socket, error=%s", strerror(errno));
        return false;}
    else {
        return true;
        NSLog(@"Socket created");
    }
}

-(bool) send:(NSString*) msg ipAddress:(NSString*) ip port:(int) p
{
    struct sockaddr_in destination;
    unsigned int echolen;
    int broadcast = 1;

    if (socketCreated==false) {
        NSLog(@"Socket assente");
        return false;
    }
    else
    {
        /* Construct the server sockaddr_in structure */
        memset(&destination, 0, sizeof(destination));

        /* Clear struct */
        destination.sin_family = AF_INET;

        /* Internet/IP */
        destination.sin_addr.s_addr = inet_addr([ip UTF8String]);

        /* IP address */
        destination.sin_port = htons(p);

        /* server port */
        setsockopt(sock,
                   IPPROTO_IP,
                   IP_MULTICAST_IF,
                   &destination,
                   sizeof(destination));
        char *cmsg = [msg UTF8String];
        echolen = strlen(cmsg);

        // this call is what allows broadcast packets to be sent:
        if (setsockopt(sock,
                       SOL_SOCKET,
                       SO_BROADCAST,
                       &broadcast,
                       sizeof broadcast) == -1)
        {
            perror("setsockopt (SO_BROADCAST)");
            exit(1);
        }
        if (sendto(sock,
                   cmsg,
                   echolen,
                   0,
                   (struct sockaddr *) &destination,
                   sizeof(destination)) != echolen)
        {
            printf("Mismatch in number of sent bytes\n");
            return false;
        }
        else
        {
            NSLog([NSString stringWithFormat:@"-> Tx: %@",msg]);
            return true;
        }

    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:00:36.163

这可能是一个很好的起点：[Java 网络编程常见问题解答](http://www.davidreilly.com/java/java_network_programming/)。另外，请记住，当您通过网络进行通信时，字符串只是字符串。这不像你会以某种方式在 java 中获得一个 NSString ;)

# excel - 根据一天计算不同小时的时间？

> ID：15359232
> 
> 赞同：0
> 
> 时间：2013-03-12T10:53:38.477
> 
> 标签：excel

我试图计算从 X 日期到今天的日期已经过去了多少“小时”。这很简单，因为一天有 24 小时，但是我需要用每个工作日的不同小时数来计算。

我只需要计算周一到周五 0600 到 2000、周六 0600 到 1800 以及周日 0900 到 1700 之间的时间。还有银行假日 0900 至 1730，不包括圣诞节和节礼日。

例如，如果日期是 27/02/2013 12:00:00，则大约有 9 个工作日和 2 个星期六和 2 个星期日。因此，这将使总数达到（假设日期是 12/03/2013 12:00）：166 小时（126 + 24 + 16），相当于 3.9 个“周期”

这有意义吗？

编辑：我实际上可以通过取所述日期来简单地做到这一点，计算出自所述日期以来有多少个工作日、周六、周日和银行假日，然后减去小时数乘以刚才提到的天数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:07:47.150

我不知道您所说的期间是什么意思，但是如果您想要时间，应该这样做：

```
//NOTE: Adjust the order to match the rules priorities
float hoursOfDay(Date d) {
    if (isHoliday(d))
        return 8.5;
    elsif (isRegular(d))
        return 14;
    elsif (isSaturday(d))
        return ;
    elsif (isSunday(d))
    ...         
} 
```

这些函数只是检查日期类型（根据语言，这些函数应该已经存在） isSaturday(d) = d.dayOftheWeek == DayOfTheWeek.SUNDAY

然后，您只需要遍历它们：

```
DateTime d1;
DateTime d2;
//NOTE: according to language, d2-d1 is a timespan object
float hours = 0;
for (Date d: d2-d1)
    hours+=hoursOfDay(d);

convertHoursToPeriods(hours); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:14:30.067

用不同的方法想通了。计算日期之间的天数并将其乘以小时差

B2 是今天的日期，C8 是开始日期。

**平日**

> =SUM(INT((WEEKDAY(C8-{2,3,4,5,6})+$B$2-C8)/7))

**星期六**

> =SUM(INT((平日(C8-7)+$B$2-C8)/7))

**星期日**

> =SUM(INT((平日(C8-1)+$B$2-C8)/7))

然后我可以计算出在工作日，我想计算 14 个小时。所以工作日数字乘以 14 就得到了我想要的数字。重复其他日子:)

# delphi - firemonkey 和全局热键？

> ID：15359235
> 
> 赞同：4
> 
> 时间：2013-03-12T10:53:41.633
> 
> 标签：delphi, firemonkey, firemonkey-fm2

我正在寻找一种在 firemonkey 应用程序中缓存全局热键的方法（仅限 Windows，至少目前如此）。经过一些挫折和谷歌搜索后，这应该可以工作：用winapi调用注册热键

```
RegisterHotKey(FmxHandleToHWND(form1.Handle), 0 , MOD_CONTROL, $41); 
```

它返回真。
然后在表单程序中捕获热键

```
procedure WMHotKey(var Msg: TWMHotKey); message WM_HOTKEY; 
```

但是这个永远不会被调用。我以前在 vcl 应用程序中这样做过，所以我的猜测是 firemonkey 以不同的方式处理消息。所以问题是：如何在 firemonkey 应用程序中捕获全局热键？

编辑：应用该解决方案的一些示例。我创建了一个班级很少的单元

```
unit fire_hotkey;

interface

uses windows, messages,allocatehwnd;

type
  TMsgHandler = procedure (var Msg: TMessage) of object;

  THotClass = class(TObject)
    fMsgHandlerHWND : HWND;
    proc:TMsgHandler;
    constructor Create;
    procedure init;
    destructor Destroy; override;
  end;

implementation

{ hotClass }

constructor THotClass.Create;
begin
  inherited;

end;

destructor THotClass.Destroy;
begin
  ThreadDeallocateHWnd(fMsgHandlerHWND);
  inherited;
end;

procedure THotClass.init;
begin
   fMsgHandlerHWND := ThreadAllocateHWnd(proc,true);
end;

end. 
```

然后我的主窗体有一个处理热键事件的过程：

```
procedure TformEditor.WMHotKey(var Msg: TMessage);
begin
  if Msg.Msg = WM_HOTKEY then
  begin
    //call lua function or sth
    //...
  end
  else
    Msg.Result := DefWindowProc(hotkeyGrabber.fMsgHandlerHWND, Msg.Msg, Msg.wParam, Msg.lParam);
end; 
```

并且有一个全局 hotkeyGrabber:THotClass; 在表单创建时初始化：

```
 hotkeyGrabber:=THotClass.Create;
  hotkeyGrabber.proc:=WMHotKey;
  hotkeyGrabber.init; 
```

之后，您应该像在通常的 vcl 应用程序中一样注册热键，它们将被咳嗽 [http://www.swissdelphicenter.ch/torry/showcode.php?id=147](http://www.swissdelphicenter.ch/torry/showcode.php?id=147) 希望它有意义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:11:44.030

FMX 框架不会将消息路由到您的表单。所以，你`WMHotKey`永远不会被调用，因为 FMX 框架永远不会调用`Dispatch`. `WndProc`通过检查在单元的实现部分中声明的方法，您可以看到这种情况`FMX.Platform.Win`。

解决此问题的最简单方法是通过调用创建自己的窗口`CreateWindow`。然后为该窗口实现一个窗口过程来处理`WM_HOTKEY`消息。

我已经像这样包装了那些低级 API 调用：

```
unit AllocateHWnd;

interface

uses
  System.SysUtils, System.Classes, System.SyncObjs, Winapi.Messages, Winapi.Windows;

function ThreadAllocateHWnd(AMethod: TWndMethod; MessageOnly: Boolean): HWND;
procedure ThreadDeallocateHWnd(Wnd: HWND);

implementation

const
  GWL_METHODCODE = SizeOf(Pointer)*0;
  GWL_METHODDATA = SizeOf(Pointer)*1;
  ThreadAllocateHWndClassName = 'MyCompanyName_ThreadAllocateHWnd';

var
  ThreadAllocateHWndLock: TCriticalSection;
  ThreadAllocateHWndClassRegistered: Boolean;

function ThreadAllocateHWndProc(Window: HWND; Message: UINT; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  Proc: TMethod;
  Msg: TMessage;
begin
  Proc.Code := Pointer(GetWindowLongPtr(Window, GWL_METHODCODE));
  Proc.Data := Pointer(GetWindowLongPtr(Window, GWL_METHODDATA));
  if Assigned(TWndMethod(Proc)) then begin
    Msg.Msg := Message;
    Msg.wParam := wParam;
    Msg.lParam := lParam;
    Msg.Result := 0;
    TWndMethod(Proc)(Msg);
    Result := Msg.Result
  end else begin
    Result := DefWindowProc(Window, Message, wParam, lParam);
  end;
end;

function ThreadAllocateHWnd(AMethod: TWndMethod; MessageOnly: Boolean): HWND;

  procedure RegisterThreadAllocateHWndClass;
  var
    WndClass: TWndClass;
  begin
    if ThreadAllocateHWndClassRegistered then begin
      exit;
    end;
    ZeroMemory(@WndClass, SizeOf(WndClass));
    WndClass.lpszClassName := ThreadAllocateHWndClassName;
    WndClass.hInstance := HInstance;
    WndClass.lpfnWndProc := @ThreadAllocateHWndProc;
    WndClass.cbWndExtra := SizeOf(TMethod);
    Winapi.Windows.RegisterClass(WndClass);
    ThreadAllocateHWndClassRegistered := True;
  end;

begin
  ThreadAllocateHWndLock.Acquire;
  Try
    RegisterThreadAllocateHWndClass;
    if MessageOnly then begin
      Result := CreateWindow(ThreadAllocateHWndClassName, '', 0, 0, 0, 0, 0, HWND_MESSAGE, 0, HInstance, nil);
    end else begin
      Result := CreateWindowEx(WS_EX_TOOLWINDOW, ThreadAllocateHWndClassName, '', WS_POPUP, 0, 0, 0, 0, 0, 0, HInstance, nil);
    end;
    Win32Check(Result<>0);
    SetWindowLongPtr(Result, GWL_METHODDATA, NativeInt(TMethod(AMethod).Data));
    SetWindowLongPtr(Result, GWL_METHODCODE, NativeInt(TMethod(AMethod).Code));
  Finally
    ThreadAllocateHWndLock.Release;
  End;
end;

procedure ThreadDeallocateHWnd(Wnd: HWND);
begin
  Win32Check(DestroyWindow(Wnd));
end;

initialization
  ThreadAllocateHWndLock := TCriticalSection.Create;

finalization
  ThreadAllocateHWndLock.Free;

end. 
```

这是 VCL 的线程安全版本，因`AllocateHWnd`在主线程之外无法使用而臭名昭著。

您需要做的是创建一个带有窗口过程的类，即实现`TWndMethod`. 它可以是实例方法或类方法。然后只需调用`ThreadAllocateHWnd`创建窗口，并将该窗口传递给`RegisterHotKey`. 当需要解开这一切时，取消注册您的热键，然后调用`ThreadDeallocateHWnd`.

# mysql - “#1242 - 插入时子查询返回多于 1 行”

> ID：15359241
> 
> 赞同：2
> 
> 时间：2013-03-12T10:54:01.863
> 
> 标签：mysql, select, insert, subquery

我有一个 MySQL 数据库，想插入一些数据。在我的数据库中，有两个名为`tx_yes_cantons`和的表`tx_yes_areas`。

在 cantons 表中，我想获得一个地区的 ID（在我的情况下是 uid）。现在当我尝试这个时：

```
INSERT INTO `tx_yes_cantons` (tx_yes_areas_uid, cantonname, code)
    VALUES (
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Genferseeregion'), 'Genf', 'ge'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Mittelland'), 'Freiburg', 'fr'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Nordwestschweiz'), 'Basel-Stadt', 'bs'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Zentralschweiz'), 'Obwalden', 'ow'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Tessin'), 'Tessin', 'ti'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Zürich'), 'Zürich', 'zh'),
        ((SELECT `uid` FROM `tx_yes_areas` WHERE `areaname` Like 'Ostschweiz'), 'Schaffhausen', 'sh'); 
```

我得到标题中的错误。为什么？我看不出有什么问题.. :S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:04:09.667

尝试在数据库中运行以下查询：

```
select areaname, count(*) from tx_yes_areas group by (areaname) having count(*)>1; 
```

返回的所有结果都将显示可能的重复项，以防任何 areaname 与插入查询中的一个相似，然后尝试从 tx_yes_areas 表中删除冗余条目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:04:19.420

某些查询返回不止一行。如果您需要在`tx_yes_cantons`表中插入所有行，您可能需要这样的东西：

```
INSERT INTO `tx_yes_cantons` (tx_yes_areas_uid, cantonname, code)
SELECT `uid`, 'Genf', 'ge'
FROM `tx_yes_areas` WHERE `areaname` = 'Genferseeregion'
UNION ALL
SELECT `uid`, 'Freiburg', 'fr'
FROM `tx_yes_areas` WHERE `areaname` = 'Mittelland'
UNION ALL
SELECT `uid`, 'Basel-Stadt', 'bs'
FROM `tx_yes_areas` WHERE `areaname` = 'Nordwestschweiz'
UNION ALL
SELECT `uid`, 'Obwalden', 'ow'
FROM `tx_yes_areas` WHERE `areaname` = 'Zentralschweiz'
UNION ALL
SELECT `uid`, 'Tessin', 'ti'
FROM `tx_yes_areas` WHERE `areaname` = 'Tessin'
UNION ALL
SELECT `uid`, 'Zürich', 'zh'
FROM `tx_yes_areas` WHERE `areaname` = 'Zürich'
UNION ALL
SELECT `uid`, 'Schaffhausen', 'sh'
FROM `tx_yes_areas` WHERE `areaname` = 'Ostschweiz' 
```

或者也：

```
INSERT INTO `tx_yes_cantons` (tx_yes_areas_uid, cantonname, code)
SELECT tx_yes_areas.uid, codes.cantonname, codes.code
FROM
  tx_yes_areas INNER JOIN (
    SELECT 'Genferseeregion' areaname, 'Genf' cantonname, 'ge' code
    UNION ALL SELECT 'Mittelland', 'Freiburg', 'fr'
    UNION ALL SELECT 'Nordwestschweiz', 'Basel-Stadt', 'bs'
    UNION ALL SELECT 'Zentralschweiz', 'Obwalden', 'ow'
    UNION ALL SELECT 'Tessin', 'Tessin', 'ti'
    UNION ALL SELECT 'Zürich', 'Zürich', 'zh'
    UNION ALL SELECT 'Ostschweiz', 'Schaffhausen', 'sh') codes
  ON tx_yes_areas.areaname = codes.areaname 
```

# sql - Sql 使用 Group by 函数

> ID：15359243
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:54:03.083
> 
> 标签：sql

这是我的数据表。我需要得到每一个`Employee` `BasicSalary`, `Code`, `Travel`, `Phone`,`ESI.PF`

有人能帮忙吗？

```
year | month | EmpID | Component | Amount | Remarks
2013 | 3     | 2     | Basicsal  | 15000  | dsf
2013 | 3     | 2     | CODE      | 2      | dsf
2013 | 3     | 2     | Travel    | 0      | dsf
2013 | 3     | 2     | Phone     | 1500   | dsf
2013 | 3     | 2     | Internet  | 500    | dsf
2013 | 3     | 2     | Bus Allo  | 0      | dsf
2013 | 3     | 2     | BF        | 0      | dsf
2013 | 3     | 2     | ESI       | 0      | dsf
2013 | 3     | 2     | Medic     | -500   | dsf
2013 | 3     | 2     | Cress     | 101752 | af
2013 | 3     | 2     | Net       | 101552 | asf
etc. | ..    | ..    | ...       | ....   | ... 
```

但我需要这样的输出

```
Year | Month | EmpID | Basicsalary | CODE | Travel | Phone | cress  | net 
2013 | 3     | 2     | 15000       | 2    | 0      | 1500  | 101752 | 101552 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:58:21.750

由于您没有指定您使用的 RDBMS，请尝试以下操作：

```
SELECT 
  year,
  month,
  EmpID,
  MAX(CASE WHEN Component = 'Basicsalary' THEN Amount END) AS Basicsalary,
  MAX(CASE WHEN Component = 'Code'        THEN Amount END) AS Code,
  MAX(CASE WHEN Component = 'Travel'      THEN Amount END) AS Travel,
  MAX(CASE WHEN Component = 'Phone'       THEN Amount END) AS Phone,
  MAX(CASE WHEN Component = 'Chress'      THEN Amount END) AS Chress,
  MAX(CASE WHEN Component = 'net'         THEN Amount END) AS net,
FROM tablename
GROUP BY year, 
         month,
         EmpId; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:05:57.047

如果您使用 SQL Server 或 Oracle 作为数据库，则可以应用该`PIVOT`函数来获取结果。

您的代码将类似于以下内容：

```
select year, 
  month, 
  empid,
  Basicsal, 
  Code, 
  Travel, 
  Phone, 
  Cress, 
  Net
from
(
  select year, month, empid, component, amount
  from yourtable
) src
pivot
(
  max(amount)
  for component in (Basicsal, Code, Travel, Phone, Cress, Net)
) piv 
```

# android - 如何使用 Android 查找连接到我的家庭网络的所有设备？

> ID：15359249
> 
> 赞同：0
> 
> 时间：2013-03-12T10:54:28.070
> 
> 标签：android

作为项目的一部分，我正在构建一个映射家庭网络的应用程序，我找到了以下代码，但我找不到所有连接到网络的设备（IP 地址）的帮助。

```
protected String doInBackground(String... aurl) {
    LoopCurrentIP = 0;

    String IPAddress = "";
    String[] myIPArray = aurl[0].split("\\.");
    InetAddress currentPingAddr;

    for (int i = 0; i <= 255; i++) {
        try {
            // build the next IP address
            currentPingAddr = InetAddress.getByName(myIPArray[0] + "." +
                    myIPArray[1] + "." +
                    myIPArray[2] + "." +
                    Integer.toString(LoopCurrentIP));
            IPAddress = currentPingAddr.toString();
            publishProgress(""+(int)((i*100)/255));                         
            Log.d("MyApp",IPAddress);  

            // 50ms Timeout for the "ping"
            if (currentPingAddr.isReachable(1000)) {
                textView.setText(currentPingAddr.toString());
                ret.add(currentPingAddr);

                Log.d("MyApp",IPAddress);                     
            }
        } catch (UnknownHostException ex) {
        } catch (IOException ex) {
        }

        LoopCurrentIP++;
    }

    return null;
} 
```

# sql-server - 我可以在派生列转换中使用自定义查询吗？

> ID：15359261
> 
> 赞同：0
> 
> 时间：2013-03-12T10:55:02.793
> 
> 标签：sql-server, sql-server-2008, ssis

我正在将一个 csv 文件读入几个父子数据库表。

我需要在我的输入中添加 2 个派生列（Id 和 Reference）。这些必须基于数据库中现有表的值 - 同步。我想获取 Id 值（一个整数），用它来构造一个参考号，然后递增该值以准备下一个输入行。Id 和 Reference 是目标表中的唯一键。

在 tsql 我会做这样的事情：

```
SELECT TOP 1 @ObjectId = value 
FROM [mydb].[dbo].[Sync] 
WHERE Name='Employee'               
UPDATE [mydb].[dbo].[Sync] SET value=value+1 WHERE name='Employee'  

SELECT @Reference = 'EMP' + cast(value AS VARCHAR(50)) 
```

然后 Object Id 和 Reference 应该用作派生列。

我不知道如何在 SSIS 中执行此操作 - 我可以直接在派生列转换编辑器中执行此操作吗？如果没有，我应该使用哪个组件？

# asp.net - 在 ASP.NET 中使用母版页，如何有效地更新子页？

> ID：15359264
> 
> 赞同：1
> 
> 时间：2013-03-12T10:55:17.433
> 
> 标签：asp.net, visual-studio

我不久前开始使用 Visual Studio 开发我的网页。我暂时不需要建动态网站，但是我习惯了vs环境，所以也可以。

我的问题是，如果我首先创建一个母版页，然后创建几个子页，vs 可以轻松地将母版页添加到这些子页中，并为您添加正确的内容标签。

如果稍后我决定更改我的母版页并添加更多内容占位符，这些内容占位符在大多数子页面中都有空内容。那么根据这个线程，子页面不会自动更新为空的内容标签。

[ASP.NET 母版页不更新子页](https://stackoverflow.com/questions/11979196/asp-net-master-page-not-updating-child-page)

我想知道专业人士如何有效地使用母版页。我的意思是他们是否也进入每个子页面并手动添加内容标签。如果有很多子页面使用该母版页怎么办？

也许专业人士会提前计划并使用许多子母版页和 Web 用户控件来缓解问题。也许他们有另一种方法。什么是好的计划？

# javascript - 如果不使用，为什么要返回布尔值？

> ID：15359270
> 
> 赞同：1
> 
> 时间：2013-03-12T10:55:35.220
> 
> 标签：javascript, jquery

我遇到了开发人员返回布尔值的多个函数，即使未检查此布尔值：

```
function  getPage()
{        
    return false;
}

<a onclick="getPage();"><img src="/myimage.gif"/> 
```

这个开发者已经搬家了，为什么在这种情况下返回一个布尔值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:56:16.743

他在那里返回 false ，否则浏览器会跟随点击的链接。通过返回 false，点击事件被有效地“取消”。它相当于事件对象上的 preventDefault。

但在这种情况下它不起作用，目的可能是：

```
<a onclick="return getPage();"><img src="/myimage.gif"/> 
```

# mongodb - MongoDB 的低内存消耗

> ID：15359271
> 
> 赞同：0
> 
> 时间：2013-03-12T10:55:38.750
> 
> 标签：mongodb

有人能告诉我为什么 Mongo 在有 2GB 可用内存且 dataSize 目前大约 4GB 且文档数略低于 500 万时消耗的内存不超过 300-400MB 吗？

即使使用处理大量文档的查询，内存消耗也不会激增。我在同一台服务器上运行的其他进程很少，但是当我观看 New Relic 时，内存消耗永远不会超过 500MB。

不知道在这种情况下是否重要，但服务器是用 KVM 虚拟化的。我们使用的是 64 位版本，所以没有 32 位限制。

*编辑*猫 /proc/meminfo

```
MemTotal:        2051488 kB
MemFree:          205420 kB
Buffers:            8472 kB
Cached:          1346496 kB
SwapCached:        43224 kB
Active:          1208548 kB
Inactive:         551952 kB
Active(anon):     162448 kB
Inactive(anon):   243196 kB
Active(file):    1046100 kB
Inactive(file):   308756 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:       4194300 kB
SwapFree:        4041128 kB
Dirty:               812 kB
Writeback:             0 kB
AnonPages:        397844 kB
Mapped:           222180 kB
Shmem:                72 kB
Slab:              40728 kB
SReclaimable:      28304 kB
SUnreclaim:        12424 kB
KernelStack:        1800 kB
PageTables:        13832 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:     5220044 kB
Committed_AS:    1404372 kB
VmallocTotal:   34359738367 kB
VmallocUsed:        9888 kB
VmallocChunk:   34359728471 kB
HardwareCorrupted:     0 kB
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:       53228 kB
DirectMap2M:     2043904 kB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:57:08.577

如果你运行`free -m`or `cat /proc/meminfo`，你应该能够看到内存使用的细分。

缓冲区与使用多少 RAM 来缓存磁盘块有关。Cached 类似于缓冲区，除了它是从读取文件中缓存的页面。

如果这些值很高，则表明您的预读设置太大并且 MongoDB 无法使用剩余内存 - 降低了性能。

# lua - 如何将函数参数解析为 Lua（Corona SDK）中的变量？

> ID：15359272
> 
> 赞同：2
> 
> 时间：2013-03-12T10:55:39.807
> 
> 标签：lua, coronasdk

例如，我有一个功能：

```
myFunction = function(a1,a2,a3)
end; 
```

而且我想通过代码将 myFunction 给出的所有参数保存在其中，该代码在更改 myFunction 参数的数量及其名称后将是正确的。在我看来，它可以通过 for 循环来完成，但我不知道如何在其中调用 arguments 和#arguments。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:59:59.037

```
local saved_arguments

myFunction = function(...)
  -- save the arguments
  saved_arguments = {...}
  local a1, a2, a3 = ...
  -- main code of function
end;

-- Use saved arguments
local last_a1, last_a2, last_a3 = unpack(saved_arguments)
-- do something with last_a1, last_a2, last_a3
-- or use it directly: saved_arguments[1], saved_arguments[2], saved_arguments[3] 
```

# php - PHP从包含括号将字符串拆分为2个变量

> ID：15359273
> 
> 赞同：3
> 
> 时间：2013-03-12T10:55:40.140
> 
> 标签：php

我正在使用正则表达式[，](https://stackoverflow.com/a/196645/560287)虽然这只会提取括号内的文本，但我想完全删除它：

```
if( preg_match( '!\(([^\)]+)\)!', $text, $match ) )
    $text = $match[1]; 
```

例如我有：`my long text string (with another string)`

我怎样才能得到：

```
$var1 = "my long text string";
$var2 = "with another string"; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T11:06:07.187

```
// This is all you need
<?php $data = explode('(' , rtrim($str, ')')); ?> 
```

例子：

```
<?php
$str = 'your long text string (with another string)';
$data = explode('(' , rtrim($str, ')'));    

print_r($data);

// output 

// Array
// (
//     [0] => my long text string 
//     [1] => with another string
// )
// profit $$$$

?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T11:07:33.193

```
$data = preg_split("/[()]+/", $text, -1, PREG_SPLIT_NO_EMPTY); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:01:02.293

您可以使用下面的代码。但请记住，您确实需要一些额外的检查来查看是否真的存在`$out[0][0]`和`$out[0][1]`

```
 <?php
    $string = "my long text string (with another string)";
    preg_match_all("/(.*)\((.*)\)/", $string, $out, PREG_SET_ORDER);
    print_r($out);
    /*
    Array
    (
            [0] => Array
                    (
                            [0] => my long text string (with another string)
                            [1] => my long text string 
                            [2] => with another string
                    )

    )
    */

    $var1 = $out[0][1];
    $var2 = $out[0][2];
    //$var1 = "my long text string";
    //$var2 = "with another string";
    ?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:01:33.757

我的正则表达式不太好，但是你可以试试这个......

```
$exp=explode("(", $text);
$text1=$exp[0];
$text2=str_replace(array("(",")"), array('',''), $exp[1]); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T11:03:04.317

```
'([^\)]+)\(([^\)]+)\)' 
```

只需删除 !-chars 并添加另一个变量字段（括号区域的名称？）并准备好:)

[http://www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)值得知道快速完成一些测试！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T11:09:18.027

这是一个非常详细的代码......你可以做得更短......

```
<?php
$longtext = "my long text string (with another string)";
$firstParantheses = strpos($longtext,"(");

$firstText = substr($longtext,0,$firstParantheses);

$secondText = substr($longtext,$firstParantheses);

$secondTextWithoutParantheses = str_replace("(","",$secondText);
$secondTextWithoutParantheses = str_replace(")","",$secondTextWithoutParantheses);

$finalFirstPart = $firstText;
$finalSecondPart = $secondTextWithoutParantheses;

echo $finalFirstPart." ------- ".$finalSecondPart;
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T11:00:17.813

你为什么不使用这个解决方法：

```
$vars = explode('@@', str_replace(array('(', ')'), '@@', $text)); 
```

它将用@@ 替换括号，然后将文本分解为一个数组。此外，您可以使用 array_filter 删除可能的空位置。

# java - 如何在 Swing 中绘制相邻的矩形？

> ID：15359274
> 
> 赞同：0
> 
> 时间：2013-03-12T10:55:40.627
> 
> 标签：java, swing, jpanel, paintcomponent

我正在尝试在 Swing 中实现俄罗斯方块，因为我试图绘制与每个矩形相邻的矩形，但第二个矩形不与第一个矩形相邻。

此外，如果 getPreferredSize() 返回小于 50,50 的值，则屏幕上不会显示任何内容。这段代码有什么问题以及如何绘制相邻的矩形。

```
public class Tetris extends JFrame
{

    public Tetris(String string)
    {
        super(string);
    }
    public static void main(String[] args)
    {
        Tetris tetris = new Tetris("Tetris");
        tetris.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel mainPanel = new JPanel();
        tetris.getContentPane().add(mainPanel);
        tetris.setVisible(true);
        tetris.setLocationRelativeTo(null);
        tetris.pack();
        tetris.setSize(500, 500);
        tetris.setResizable(false);
        tetris.paintBoard(mainPanel);
    }

    public void paintBoard(JPanel mainPanel)
    {
        Piece p1 = new Piece(10,10,50,50,Color.GREEN);
        Piece p2 = new Piece(60,10,50,50,Color.RED);
        mainPanel.add(p1);
        mainPanel.add(p2);
    }
}

public class Piece extends JComponent
{
    private int X = 0;
    private int Y = 0;
    private int H = 0;
    private int W = 0;
    private Color c;

    public Piece(int X, int Y, int W, int H, Color c)
    {
        this.X = X;
        this.Y = Y;
        this.W = W;
        this.H = H;
        this.c = c;
    }

    @Override
    public void paintComponent(Graphics g)
    {
        g.setColor(c);
        g.drawRect(X, Y, W, H);
        g.fillRect(X, Y, W, H);
        System.out.println("g.drawRect("+X+", "+Y+", "+W+", "+H+")");
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(50, 50);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:08:43.513

> 如果 getPreferredSize() 返回小于 50,50 的值，则屏幕上不会显示任何内容

这是因为您已将“红色”的 X 坐标设置为 60，`Piece`但组件的首选尺寸宽度为 50，因此组件被绘制到屏幕外。

要添加组件，您可以简单地绘制所有`Piece`组件`0, 0`并让布局管理器负责定位。除此之外，鉴于这是一款俄罗斯方块游戏，您应该考虑在单个组件上绘制所有组件，并使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来操作这些组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:12:23.233

*   覆盖`getPreferredSize`for `JPanel`，否则`JPanel`返回零`Dimension`

*   把所有`Objects`的东西放到数组中

*   内部`paintComponent`循环仅在数组中

*   使用`Swing Timer`（仅一个实例）动画

*   [关于所有上午点的示例](https://stackoverflow.com/a/5854752/714968)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:13:21.380

总体问题是 Swing 布局问题。您的 mainPanel JPanel 有一个默认布局 FlowLayout，它会尝试排列您添加到其中的每个事物（片段）。每个 Piece 的 paintComponent 只会控制绘画本身，​​而不是在整个 mainPanel 上。因此，您的 Pieces 没有相对于整个 mainPanel 进行绘制。

就像是：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Tetris extends JFrame
{

    public Tetris(String string)
    {
        super(string);
    }
    public static void main(String[] args)
    {
        Tetris tetris = new Tetris("Tetris");
        tetris.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel mainPanel = new JPanel();
        mainPanel.setLayout(new BorderLayout());
        tetris.getContentPane().setLayout(new BorderLayout());
        tetris.getContentPane().add(mainPanel, BorderLayout.CENTER);
        tetris.setLocationRelativeTo(null);
        tetris.pack();
        tetris.setSize(500, 500);
        tetris.setResizable(false);
        tetris.setVisible(true);
        tetris.paintBoard(mainPanel);
    }

    public void paintBoard(JPanel mainPanel)
    {
        Piece p1 = new Piece(10,10,50,50,Color.GREEN);
        Piece p2 = new Piece(60,10,50,50,Color.RED);

        Board board = new Board();

        board.addPiece(p1);
        board.addPiece(p2);

        mainPanel.add(board, BorderLayout.CENTER);
    }

    private class Board extends JComponent
    {
        private List<Piece> pieces = new ArrayList<Piece>();

        public void addPiece(Piece piece)
        {
            pieces.add(piece);
        }

        @Override
        public void paintComponent(Graphics g)
        {
            for(Piece piece : pieces)
            {
                g.setColor(piece.c);
                g.drawRect(piece.X, piece.Y, piece.W, piece.H);
                g.fillRect(piece.X, piece.Y, piece.W, piece.H);
            }
        }
    }

    private class Piece
    {
        private int X = 0;
        private int Y = 0;
        private int H = 0;
        private int W = 0;
        private Color c;

        public Piece(int X, int Y, int W, int H, Color c)
        {
            this.X = X;
            this.Y = Y;
            this.W = W;
            this.H = H;
            this.c = c;
        }   
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:29:08.993

这里有一个逻辑错误。您正在`Piece`使用`paintComponent()`方法绘画，但是您给出的起始 x 和 y 坐标可能在`mainPanel`(10, 10 或 60, 10) 的上下文中，而您需要在当前组件的上下文中给出它们`Piece`，例如试试这个：

```
 @Override
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g.setColor(c);
    g.drawRect(0, 0, W, H);
    g.fillRect(0, 0, W, H);
    System.out.println("g.drawRect("+X+", "+Y+", "+W+", "+H+")");
} 
```

它正确显示了您想要的内容。

它还解释了为什么较小的尺寸不起作用，在当前组件而不是父组件的上下文中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T11:11:26.340

如果您希望添加的 Pieces 显示在您指定的坐标上，则需要将 JPanel 的 LayoutManager 设置为 null。

```
public void paintBoard(JPanel mainPanel)
{
    Piece p1 = new Piece(10,10,50,50,Color.GREEN);
    Piece p2 = new Piece(60,10,50,50,Color.RED);
    mainPanel.setLayout(null)
    mainPanel.add(p1);
    mainPanel.add(p2);
} 
```

# debugging - strace 打印声音 ioctl

> ID：15359277
> 
> 赞同：1
> 
> 时间：2013-03-12T10:56:01.470
> 
> 标签：debugging, alsa, strace

我的 strace 往往会混淆一些`ioctl`值（我确信`SNDRV`ioctls 没有被很好地识别......）

我如何识别正确的`ioctl`价值？

一个小例子：

`$ strace aplay -l`

```
...
fcntl64(4, F_SETFD, FD_CLOEXEC)         = 0
ioctl(4, UI_DEV_CREATE, 0xbfaa6e74)     = 0
close(4)                                = 0
... 
```

那`UI_DEV_CREATE`是一个`SNDRV_CTL_IOCTL_CARD_INFO`

（另一个例子）

```
ioctl(4, USBDEVFS_CONTROL or USBDEVFS_CONTROL32, 0xbfaa6f94) = 0
ioctl(4, UI_DEV_CREATE, 0xbfaa71f0)     = 0
ioctl(4, 0x80045530, 0xbfaa73ac) 
```

`USBDEVFS_CONTROL`是一个`SNDRV_CTL_IOCTL_PVERSION` ，我真的不知道宏扩展是什么`0x80045530`...

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:52:51.233

正如您在 中看到的[`Documentation/ioctl/ioctl-number.txt`](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/ioctl/ioctl-number.txt#n170)，值 0x55 ( `'U'`) 被多个子系统使用。 `strace`不知道设备文件属于几个子系统中的哪一个，并且可能无法识别一些较新的 ioctl 代码。

最新`strace`版本知道`SNDRV_CTL_IOCTL_PCM_NEXT_DEVICE`.

# ruby-on-rails - 为每个页面设计身份验证

> ID：15359283
> 
> 赞同：2
> 
> 时间：2013-03-12T10:56:21.473
> 
> 标签：ruby-on-rails, devise

我网站上的每个页面都需要用户身份验证（用户必须登录才能访问它）。我在设计文档中找到了这个，但它似乎对我不起作用......

[https://github.com/plataformatec/devise/wiki/How-To:-Require-authentication-for-all-pages](https://github.com/plataformatec/devise/wiki/How-To:-Require-authentication-for-all-pages)

我已经复制粘贴了这个：

```
 authenticated :user do
   root :to => 'home#index'
 end
 root :to => redirect('/users/sign_in') 
```

我怎样才能实现这个非常自然的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T21:43:26.747

这是我所做的：

在`app/controllers/application_controller.rb`中，添加如下一行：

```
class ApplicationController < ActionController::Base
    # Prevent CSRF attacks by raising an exception.
    # For APIs, you may want to use :null_session instead.
    protect_from_forgery with: :exception

    before_action :authenticate_user!

    # ...
end 
```

这将强制`authenticate_user!`在任何操作之前运行。

如果您有一些不需要身份验证的操作/控制器，您可以将以下行添加到它们的控制器文件中：

```
class StaticPagesController < ApplicationController
    prepend_before_filter :require_no_authentication

    # ...
end 
```

该`require_no_authentication`函数还接受一个可选参数，一个名为 的数组`only`，其中包含不需要身份验证的操作列表。

nb 我知道这是高级死灵术，但这个问题没有答案，我花了很多时间寻找正确的答案。

# javascript - 如何使用 jquery 库将鼠标移动限制到 div

> ID：15359284
> 
> 赞同：1
> 
> 时间：2013-03-12T10:56:25.530
> 
> 标签：javascript, jquery, html, mousemove

当在此 div 中按下右键时，我尝试使用 jquery 库将鼠标移动限制在 div 区域。我该怎么做？或者我能做到的最好的问题？类似于限制屏幕部分的移动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:05:10.213

答案是：你不能。

您无法控制用户在哪个区域移动鼠标。毕竟是他的鼠标（笑话）。严肃地说 - 它可能是安全/可用性/常识功能。想象一下互联网，Web 开发人员可以在其中控制用户可以移动光标的区域。

# java - Hibernate 为组合器外键插入 NULL 值

> ID：15359289
> 
> 赞同：1
> 
> 时间：2013-03-12T10:56:34.117
> 
> 标签：java, hibernate, hibernate-mapping

我有以下表结构。

```
Region table {
`RegionId` int(11) NOT NULL AUTO_INCREMENT,
`RegionName` varchar(45) DEFAULT NULL,
PRIMARY KEY (`RegionId`) }

Client table {
`RegionId` int(11) NOT NULL,
`ClientName` varchar(45) NOT NULL,
PRIMARY KEY (`RegionId`, `ClientName`) ,
KEY `Client_RegionId_FK` (`RegionId`),
CONSTRAINT `Client_RegionId_FK` FOREIGN KEY (`RegionId`) REFERENCES `Region` (`RegionId`) ON DELETE NO ACTION ON UPDATE NO ACTION
}

Product table {
`RegionId` int(11) NOT NULL ,
`ProductId` varchar(45) NOT NULL,
`ProductName` varchar(45) DEFAULT NULL, 
PRIMARY KEY (`RegionId`, `ProductId`),
KEY `Product_RegionId_FK` (`RegionId`),
CONSTRAINT `Product_RegionId_FK` FOREIGN KEY (`RegionId`) REFERENCES `Region` (`RegionId`) ON DELETE NO ACTION ON UPDATE NO ACTION
}

Order table {
`OrderId` int(11) NOT NULL AUTO_INCREMENT,
`RegionId` int(11) DEFAULT NULL,
  `ClientName` varchar(45) DEFAULT NULL,
`ProductId` int(11) DEFAULT NULL,
`OrderDate` datetime DEFAULT NULL,
 `OrderValue` int(11) DEFAULT NULL,
PRIMARY KEY (`OrderId`) ,
 KEY `Order_RegionId_FK` (`RegionId`),
KEY `Order_ClientName_FK` (`RegionId`,`ClientName`),
KEY `Order_ProductId_FK` (`RegionId`,`ProductId`),
CONSTRAINT `Order_RegionId_FK` FOREIGN KEY (`RegionId`) REFERENCES `Region` (`RegionId`) ON DELETE NO ACTION ON UPDATE NO ACTION,
CONSTRAINT `Order_ClientName_FK` FOREIGN KEY (`RegionId`, `ClientName`) REFERENCES `Client` (`RegionId`, `ClientName`) ON DELETE NO ACTION ON UPDATE NO ACTION,
CONSTRAINT `Order_ProductId_FK` FOREIGN KEY (`RegionId`, `ProductId`) REFERENCES `Product` (`RegionId`, `ProductId`) ON DELETE NO ACTION ON UPDATE NO ACTION
} 
```

订单表有 3 个引用 RegionId 的不同外键约束。一种是直接的，另一种是通过客户和产品的。

下面是 Order 表的休眠映射文件

```
<hibernate-mapping>
<class name="com.test.model.Order" table="Order">
    <id name="orderId" type="java.lang.Integer">
        <column name="OrderId" />
        <generator class="identity" />
    </id>
    <many-to-one name="Region" class="com.test.model.Region" fetch="select">
        <column name="RegionId" />
    </many-to-one>
    <many-to-one name="product" class="com.test.model.Product" update="false" insert="false" fetch="select">
        <column name="RegionId" />
        <column name="ProductId" />
    </many-to-one>
    <many-to-one name="client" class="com.test.model.Client" update="false" insert="false" fetch="select">
        <column name="RegionId" />
        <column name="ClientName" length="45" />
    </many-to-one>
    <property name="orderDate" type="timestamp">
        <column name="OrderDate" length="19" />
    </property>
    <property name="orderValue" type="java.lang.Integer">
        <column name="OrderValue"  />
    </property>
</class>
</hibernate-mapping> 
```

我遇到的问题是，当我将新订单插入 DB NULL 时，插入了 clientName 和 ProductId。我已经验证我在持久化之前将 Client 和 Product 对象提供给 Order Model 对象。但由于某种原因，NULL 被插入。我对正确添加的区域信息没有任何问题。

我尝试调试和检查 Hibernate 的 SQL，我看到 hibernate 正在尝试在插入之前读取 Client 和 Product 表，但令人惊讶的是 clientName 和 productId 不是插入顺序语句的一部分。

下面是 Hibernate sql 的输出

```
Hibernate: 
/* get current state com.test.model.Product */ select
    product_.RegionId,
    product_.ProductId,
    product_.ProductName as ProductName12_
from
    testdb.product product_ 
where
    product_.RegionId=? 
    and product_.ProductId=?
Hibernate: 
/* get current state com.test.model.Client */ select
    client_.RegionId,
    client_.ClientName 
from
    testdb.client client_ 
where
    client_.RegionId=? 
    and client_.ClientName=?
Hibernate: 
/* insert com.test.model.Order
    */ insert 
    into
        testdb.order
        (RegionId, OrderDate, OrderValue) 
    values
        (?, ?, ?) 
```

请让我知道可能出现的问题以及解决问题的建议。

# python - 处理异常的 Python 线程池

> ID：15359295
> 
> 赞同：23
> 
> 时间：2013-03-12T10:56:46.850
> 
> 标签：python, multithreading, exception-handling, threadpool

我一直在寻找一个简单的python线程池模式的良好实现，但真的找不到任何适合我需要的东西。我正在使用 python 2.7 并且我发现的所有模块都不起作用，或者没有正确处理工作人员中的异常。我想知道是否有人知道可以提供我正在搜索的功能类型的库。非常感谢帮助。

# 多处理

我的第一次尝试是使用内置`multiprocessing`模块，但由于它不使用线程而是使用子进程，我们遇到了无法腌制对象的问题。不去这里。

```
from multiprocessing import Pool

class Sample(object):
    def compute_fib(self, n):
        phi = (1 + 5**0.5) / 2
        self.fib = int(round((phi**n - (1-phi)**n) / 5**0.5))

samples = [Sample() for i in range(8)]
pool = Pool(processes=8)
for s in samples: pool.apply_async(s.compute_fib, [20])
pool.join()
for s in samples: print s.fib

# PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed 
```

# 期货

所以我看到这里有 python 3.2 的一些很酷的并发特性的后[端口](https://pypi.python.org/pypi/futures)。这似乎完美且易于使用。问题是，当您在其中一名工作人员中遇到异常时，您只能获得异常类型，例如“ZeroDivisionError”，但没有回溯，因此没有指示哪一行导致了异常。代码变得无法调试。不去。

```
from concurrent import futures

class Sample(object):
    def compute_fib(self, n):
        phi = (1 + 5**0.5) / 2
        1/0
        self.fib = int(round((phi**n - (1-phi)**n) / 5**0.5))

samples = [Sample() for i in range(8)]
pool = futures.ThreadPoolExecutor(max_workers=8)
threads = [pool.submit(s.compute_fib, 20) for s in samples]
futures.wait(threads, return_when=futures.FIRST_EXCEPTION)
for t in threads: t.result()
for s in samples: print s.fib

#    futures-2.1.3-py2.7.egg/concurrent/futures/_base.pyc in __get_result(self)
#    354     def __get_result(self):
#    355         if self._exception:
#--> 356             raise self._exception
#    357         else:
#    358             return self._result
#
# ZeroDivisionError: integer division or modulo by zero 
```

# 工人池

[我在这里](http://code.google.com/p/workerpool/)找到了这种模式的另一个实现。这次发生异常时，它会被打印出来，但是我的 ipython 交互式解释器处于挂起状态，需要从另一个 shell 中终止。不去。

```
import workerpool

class Sample(object):
    def compute_fib(self, n):
        phi = (1 + 5**0.5) / 2
        1/0
        self.fib = int(round((phi**n - (1-phi)**n) / 5**0.5))

samples = [Sample() for i in range(8)]
pool = workerpool.WorkerPool(size=8)
for s in samples: pool.map(s.compute_fib, [20])
pool.wait()
for s in samples: print s.fib

# ZeroDivisionError: integer division or modulo by zero
# ^C^C^C^C^C^C^C^C^D^D
# $ kill 1783 
```

# 线程池

[这里](https://pypi.python.org/pypi/threadpool)还有另一个实现。这次发生异常时，它会打印到 ，`stderr`但脚本不会中断，而是继续执行，这违背了异常的目的，并且会使事情变得不安全。还是不能用。

```
import threadpool

class Sample(object):
    def compute_fib(self, n):
        phi = (1 + 5**0.5) / 2
        1/0
        self.fib = int(round((phi**n - (1-phi)**n) / 5**0.5))

samples = [Sample() for i in range(8)]
pool = threadpool.ThreadPool(8)
requests = [threadpool.makeRequests(s.compute_fib, [20]) for s in samples]
requests = [y for x in requests for y in x]
for r in requests: pool.putRequest(r)
pool.wait()
for s in samples: print s.fib

# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
# ZeroDivisionError: integer division or modulo by zero
#---> 17 for s in samples: print s.fib
#
#AttributeError: 'Sample' object has no attribute 'fib' 
```

# - 更新 -

看来，关于`futures`库，python 3 的行为与 python 2 不同。

`futures_exceptions.py`：

```
from concurrent.futures import ThreadPoolExecutor, as_completed

def div_zero(x):
    return x / 0

with ThreadPoolExecutor(max_workers=4) as executor:
    futures = executor.map(div_zero, range(4))
    for future in as_completed(futures): print(future) 
```

**Python 2.7.6**输出：

```
Traceback (most recent call last):
  File "...futures_exceptions.py", line 12, in <module>
    for future in as_completed(futures):
  File "...python2.7/site-packages/concurrent/futures/_base.py", line 198, in as_completed
    with _AcquireFutures(fs):
  File "...python2.7/site-packages/concurrent/futures/_base.py", line 147, in __init__
    self.futures = sorted(futures, key=id)
  File "...python2.7/site-packages/concurrent/futures/_base.py", line 549, in map
    yield future.result()
  File "...python2.7/site-packages/concurrent/futures/_base.py", line 397, in result
    return self.__get_result()
  File "...python2.7/site-packages/concurrent/futures/_base.py", line 356, in __get_result
    raise self._exception
ZeroDivisionError: integer division or modulo by zero 
```

**Python 3.3.2**输出：

```
Traceback (most recent call last):
  File "...futures_exceptions.py", line 11, in <module>
    for future in as_completed(futures):
  File "...python3.3/concurrent/futures/_base.py", line 193, in as_completed
    with _AcquireFutures(fs):
  File "...python3.3/concurrent/futures/_base.py", line 142, in __init__
    self.futures = sorted(futures, key=id)
  File "...python3.3/concurrent/futures/_base.py", line 546, in result_iterator
    yield future.result()
  File "...python3.3/concurrent/futures/_base.py", line 392, in result
    return self.__get_result()
  File "...python3.3/concurrent/futures/_base.py", line 351, in __get_result
    raise self._exception
  File "...python3.3/concurrent/futures/thread.py", line 54, in run
    result = self.fn(*self.args, **self.kwargs)
  File "...futures_exceptions.py", line 7, in div_zero
    return x / 0
ZeroDivisionError: division by zero 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-28T11:09:07.033

我个人使用`concurrent.futures`的界面非常简单。对于回溯问题，我找到了一种解决方法来保留它。查看我对另一个问题的回答：

[在 concurrent.futures 中获取异常的原始行号](https://stackoverflow.com/questions/19309514/how-to-get-correct-line-number-where-exception-was-thrown-using-concurrent-futur/24457608#24457608)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-04-07T20:47:01.167

如果您想获取有关线程中未处理异常的信息并使用 ThreadPoolExecutor，您可以这样做：

```
import time
import traceback

from concurrent.futures import ThreadPoolExecutor

def worker():
    a = 2 / 0

def worker_callbacks(f):
    e = f.exception()

    if e is None:
        return

    trace = []
    tb = e.__traceback__
    while tb is not None:
        trace.append({
            "filename": tb.tb_frame.f_code.co_filename,
            "name": tb.tb_frame.f_code.co_name,
            "lineno": tb.tb_lineno
        })
        tb = tb.tb_next
    print(str({
        'type': type(e).__name__,
        'message': str(e),
        'trace': trace
    }))

executor = ThreadPoolExecutor(max_workers=1)
executor.submit(worker).add_done_callback(worker_callbacks) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:00:52.753

简单的解决方案：使用最适合您的任何替代方案，并`try-except`在您的工人中实施您自己的块。如果必须的话，围绕根呼叫。

我不会说这些库“错误地”处理异常。它们有一个默认行为，无论多么原始。如果默认设置不适合您，您应该自己处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-08T18:54:58.430

对于像我这样遇到这个问题并正在使用的人`threading.ThreadPool`：如果您希望能够处理异常，`apply_async`并且`map_async`两者都有一个`error_callback`关键字参数，您可以将一个函数传递给它来处理发生的异常。

以防万一它帮助任何人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-24T09:38:45.553

受这里 se7entyse7en的[回答的启发：](https://stackoverflow.com/a/24457608/595305)

```
class NonSilentThreadPoolExecutor(ThreadPoolExecutor):
    def submit(self, fn, *args, **kwargs):
        # Submits the wrapped function instead of `fn`
        return super().submit(self._function_wrapper, fn, *args, **kwargs)

    def _function_wrapper(self, fn, *args, **kwargs):
        try:
            return fn(*args, **kwargs)
        except BaseException as e:
            logger.exception(e) # or your way of dealing with any exceptions... 
            # is the following really necessary? 
            # raise sys.exc_info()[0](traceback.format_exc())
            raise e 
```

...我个人不太明白行号有什么问题（se7entyse7en 试图在他的回答中解决）：`logger.exception(e)`似乎打印出引发异常的精确行号，以及堆栈的其余部分痕迹貌似还行。

在他的回答中，se7entyse7en 正确地谈到了使用`Future`from `concurrent.futures`。但是很多时候你会发现自己实际上调用线程（例如 PyQt5 中的 Gui 线程）*不能*等待`result`来自`Future`. 因此，如果您想等待该结果，则必须`submit`对该（或另一个）执行者执行另一项任务并等待`Future`那里的结果……但这会完全破坏对象，因为在等待时再次引发任何异常因为结果也会被默默吞下。

如果您等不及`Future`.

但至少您通常希望**记录**任何引发的异常：当在此并发上下文之外发生未处理的异常时，您**总是**按照标准将堆栈跟踪打印到控制台。因此，在某种程度上，我确实认为`ThreadPoolExecutor`该类至少应该允许您将“异常时打印堆栈跟踪”指定为 的可选参数`submit`，或者最好仍然包含可选的“on_exception”回调参数，如下所示：

```
class ExceptionAwareThreadPoolExecutor(ThreadPoolExecutor):
    def submit(self, fn, *args, on_exception='console', **kwargs):
        self.on_exception = on_exception
        return super().submit(self._function_wrapper, fn, *args, **kwargs)

    def _function_wrapper(self, fn, *args, **kwargs):
        try:
            return fn(*args, **kwargs)
        except BaseException as e:
            if self.on_exception == 'console':
                # print stack to console:
                logging.error(f'Exception class {e.__class__.__name__} raised', exc_info=True)
            elif self.on_exception != None:
                self.on_exception(e)
            raise e 
```

然后像这样调用以达到与上面相同的结果：

```
executor.submit(task_to_be_performed, on_exception=logger.exception) 
```

或者这样，异常的堆栈跟踪将被打印到控制台（NB 也使它成为一个插件`ThreadPoolExecutor`，无需更改代码）：

```
executor.submit(task_to_be_performed) 
```

或抑制堆栈跟踪输出：

```
executor.submit(task_to_be_performed, on_exception=None) 
```

`logging.error`（即使您没有设置记录器，NB也可以工作）

# javascript - 使用 Blob 时显示错误

> ID：15359299
> 
> 赞同：0
> 
> 时间：2013-03-12T10:57:10.587
> 
> 标签：javascript, blob, web-worker

我在 javascript 中使用了 Blob() 来生成一个 url。这个 url 应该在 web worker 即 Worker() 中使用。

我写了这段代码：

```
var workerJs = $('#worker').html()
var blob = new Blob([workerJs], {type: 'mimeString'})
var blobURL = window.URL.createObjectURL(blob)
var worker = new Worker(blobURL) 
```

但我不断收到此错误：

此 URL 中的资源不是文本：blob:30b85aca-40e3-465a-94b1-32947ac8f45

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:56:11.427

构造函数的`type`选项`Blob`应该是 mime 类型，不知道你从哪里得到了使用它的想法`mimeString`。如果您使用它应该可以工作`text/javascript`：

```
var blob = new Blob([workerJs], {type: 'text/javascript'}) 
```

# sql - 更改表内容以匹配查询而不删除所有行

> ID：15359303
> 
> 赞同：1
> 
> 时间：2013-03-12T10:57:13.587
> 
> 标签：sql, oracle

我有一个表 ( `tblA`) 和一个查询 ( `queryB`)。的输出`queryB`与 的架构匹配`tblA`。我想更新`tblA`，使其内容等于`queryB`

一个明显的解决方案可能是：

```
TRUNCATE TABLE tblA

INSERT INTO tblA
(queryB) 
```

但是，我想尽量减少我所做的删除和插入的次数。

将有三种情况，其结果来自`queryB`：

*   在`queryB`，不在`tblA`：插入
*   在`queryB`, 在`tblA`: 什么都不做
*   在`tblA`，不在`queryB`：删除

到目前为止，我发现 MS SQL 的 MERGE 支持一个`[NOT] PRESENT IN TARGET/SOURCE`非常适合这个的 - 但还没有找到一个 Oracle 等价物。

有没有一种优雅的方式来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:11:03.467

```
delete from tblA where
  (col1, col2, ...) not in (queryB);

insert into tblA 
  (queryB) minus (select * from tblA); 
```

* * *

**编辑：**
如果将创建小型临时表（将包含 < 10% 的表 tblA 行），则可以计算一次 queryB。
假设 queryB.col1 永远不会为空

```
create table diff as
   select 
      ta.rowid ta_rid, 
      tb.*
   from tblA ta 
      full join (queryB) tb 
         on ta.col1 = tb.col1 
         and ta.col2 = tb.col2 
         and ta.col3 = tb.col3 
   where 
      ta.rowid is null or tb.col1 is null; 

delete from tblA ta 
  where ta.rowid in (select d.ta_rid from diff d where d.ta_rid is not null);
insert into tblA ta 
  select d.col1, d.col2, d.col3 from diff d where d.ta_rid is null; 
```

# java - 如何在 Spring Controller 中获取与 JPA 和 Hibernate 的 FetchType.LAZY 关联

> ID：15359306
> 
> 赞同：164
> 
> 时间：2013-03-12T10:57:18.953
> 
> 标签：java, spring, hibernate, jpa, spring-data

我有一个 Person 类：

```
@Entity
public class Person {

    @Id
    @GeneratedValue
    private Long id;

    @ManyToMany(fetch = FetchType.LAZY)
    private List<Role> roles;
    // etc
} 
```

具有惰性的多对多关系。

在我的控制器中，我有

```
@Controller
@RequestMapping("/person")
public class PersonController {
    @Autowired
    PersonRepository personRepository;

    @RequestMapping("/get")
    public @ResponseBody Person getPerson() {
        Person person = personRepository.findOne(1L);
        return person;
    }
} 
```

而 PersonRepository 就是这段代码，按照[这个指南写的](http://blog.springsource.org/2011/02/10/getting-started-with-spring-data-jpa/)

```
public interface PersonRepository extends JpaRepository<Person, Long> {
} 
```

但是，在这个控制器中，**我实际上需要惰性数据。我怎样才能触发它的加载？**

尝试访问它会失败

> 无法延迟初始化角色集合：no.dusken.momus.model.Person.roles，无法初始化代理 - 没有会话

或其他例外情况，具体取决于我的尝试。

我的[xml-description](https://gist.github.com/Matsemann/958b29aef642fa1c2f95)，以备不时之需。

谢谢。

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-03-12T11:47:24.410

您必须对惰性集合进行显式调用才能对其进行初始化（通常的做法是`.size()`为此目的调用）。在 Hibernate 中有一个专门的方法来处理这个（`Hibernate.initialize()`），但是 JPA 没有对应的方法。当然，当会话仍然可用时，您必须确保调用已完成，因此使用`@Transactional`. 另一种方法是在 Controller 和 Repository 之间创建一个中间服务层，它可以公开初始化惰性集合的方法。

### 更新：

请注意，上述解决方案很简单，但会导致对数据库的两个不同查询（一个针对用户，另一个针对其角色）。如果您想获得更好的性能，请将以下方法添加到您的 Spring Data JPA 存储库接口：

```
public interface PersonRepository extends JpaRepository<Person, Long> {

    @Query("SELECT p FROM Person p JOIN FETCH p.roles WHERE p.id = (:id)")
    public Person findByIdAndFetchRolesEagerly(@Param("id") Long id);

} 
```

此方法将使用 JPQL 的[fetch join](http://docs.oracle.com/html/E24396_01/ejb3_langref.html#ejb3_langref_fetch_joins)子句在到数据库的单次往返中急切地加载角色关联，因此将减轻上述解决方案中两个不同查询导致的性能损失。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-01-10T17:54:09.777

虽然这是一篇旧文章，但请考虑使用 @NamedEntityGraph (Javax Persistence) 和 @EntityGraph (Spring Data JPA)。这种组合有效。

例子

```
@Entity
@Table(name = "Employee", schema = "dbo", catalog = "ARCHO")
@NamedEntityGraph(name = "employeeAuthorities",
            attributeNodes = @NamedAttributeNode("employeeGroups"))
public class EmployeeEntity implements Serializable, UserDetails {
// your props
} 
```

然后是如下的春季回购

```
@RepositoryRestResource(collectionResourceRel = "Employee", path = "Employee")
public interface IEmployeeRepository extends PagingAndSortingRepository<EmployeeEntity, String>           {

    @EntityGraph(value = "employeeAuthorities", type = EntityGraphType.LOAD)
    EmployeeEntity getByUsername(String userName);

} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-12T11:58:23.400

你有一些选择

*   在存储库上编写一个方法，该方法返回 RJ 建议的初始化实体。

更多的工作，最好的表现。

*   使用 OpenEntityManagerInViewFilter 为整个请求保持会话打开。

更少的工作，通常在 Web 环境中是可以接受的。

*   需要时使用帮助类来初始化实体。

更少的工作，当没有选择 OEMIV 时很有用，例如在 Swing 应用程序中，但在存储库实现中也很有用，可以一次性初始化任何实体。

对于最后一个选项，我编写了一个实用程序类[JpaUtils](http://sourceforge.net/p/jdal/code/ci/master/tree/core/src/main/java/info/joseluismartin/dao/jpa/JpaUtils.java)来在某个深度初始化实体。

例如：

```
@Transactional
public class RepositoryHelper {

    @PersistenceContext
    private EntityManager em;

    public void intialize(Object entity, int depth) {
        JpaUtils.initialize(em, entity, depth);
    }
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-05-12T12:50:38.220

## 弹簧数据`JpaRepository`

Spring Data`JpaRepository`定义了以下两种方法：

*   `getOne`，它返回一个[实体代理](https://vladmihalcea.com/how-does-a-jpa-proxy-work-and-how-to-unproxy-it-with-hibernate/)，适合[在持久化子实体时](https://vladmihalcea.com/manytoone-jpa-hibernate/)`@ManyToOne`设置或`@OneToOne`父关联。
*   `findById`，它在运行从关联表中加载实体的 SELECT 语句后返回实体 POJO

但是，就您而言，您没有致电`getOne`or `findById`：

```
Person person = personRepository.findOne(1L); 
```

因此，我假设该`findOne`方法是您在`PersonRepository`. 但是，该`findOne`方法在您的情况下不是很有用。由于您需要`Person`与`roles`集合一起获取，因此最好使用`findOneWithRoles`方法。

## 自定义 Spring Data 方法

您可以定义一个`PersonRepositoryCustom`接口，如下所示：

```
public interface PersonRepository
    extends JpaRepository<Person, Long>, PersonRepositoryCustom { 

}

public interface PersonRepositoryCustom {
    Person findOneWithRoles(Long id);
} 
```

并像这样定义它的实现：

```
public class PersonRepositoryImpl implements PersonRepositoryCustom {

    @PersistenceContext
    private EntityManager entityManager;

    @Override
    public Person findOneWithRoles(Long id)() {
        return entityManager.createQuery("""
            select p 
            from Person p
            left join fetch p.roles
            where p.id = :id 
            """, Person.class)
        .setParameter("id", id)
        .getSingleResult();
    }
} 
```

就是这样！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-03-12T11:51:11.580

它只能在事务中延迟加载。所以你可以访问你的存储库中的集合，它有一个事务——或者[我通常做的是一个`get with association`，或者将 fetchmode 设置为 eager。](https://stackoverflow.com/q/14327166/106261)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-03-12T11:51:50.237

我认为您需要[OpenSessionInViewFilter](http://forum.springsource.org/showthread.php?83293-OpenSessionInViewFilter-Spring-3-Hibernate-3-LazyLoadException)在视图呈现期间保持会话打开（但这不是很好的做法）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-06T11:08:14.637

你可以这样做：

```
@Override
public FaqQuestions getFaqQuestionById(Long questionId) {
    session = sessionFactory.openSession();
    tx = session.beginTransaction();
    FaqQuestions faqQuestions = null;
    try {
        faqQuestions = (FaqQuestions) session.get(FaqQuestions.class,
                questionId);
        Hibernate.initialize(faqQuestions.getFaqAnswers());

        tx.commit();
        faqQuestions.getFaqAnswers().size();
    } finally {
        session.close();
    }
    return faqQuestions;
} 
```

只需在您的控制器中使用 faqQuestions.getFaqAnswers().size()，如果延迟初始化列表，您将获得大小，而无需获取列表本身。

# qt - 使用 QGraphicsScene 和 Qt::X11Bypasswindowmanagerhint 在 X11 中产生 BadMatch 错误

> ID：15359309
> 
> 赞同：0
> 
> 时间：2013-03-12T10:57:22.090
> 
> 标签：qt, x11, qgraphicsview

我正在使用 QGraphicsScene 和 QGraphicsViews 为每个监视器在 Qt 4.8 中开发适用于 Linux（RHEL、Gnome、Compiz）的应用程序。每个 QGraphicsView 都有 Qt::X11Bypasswindowmanagerhint 窗口提示。为了恢复键盘焦点，我有一个事件处理程序，它在每个事件的恰好一个 QGraphicsViews 上调用 activateWindow() （我意识到这可能是矫枉过正而且效率极低）。该应用程序是用户可能要求经常隐藏和显示它的应用程序；当我在事件处理程序中激活的同一特定 QGraphicsView 上调用 show() 时，会发生 X11 错误事件。特别是，该错误的错误代码为 8，对应于 BadMatch 错误，主要操作代码为 42，我认为对应于 XSetInputFocus()。

首先，这是一个可以通过自定义 x11 事件处理程序简单地忽略的错误吗（因为应用程序实际上可以工作）？其次，在将这个特定的窗口提示与 QGraphicsView 一起使用时，是否有更好的方法来调用 activateWindow？如果没有，至少有办法避免这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:53:04.177

好吧，我想我解决了我自己的问题。发生的事情是调用 show() 当然会导致 QEvent::show() 事件，事件过滤器会选择该事件。因此，我试图在调用 show 后立即激活窗口，根据我在[这里](https://bugreports.qt-project.org/browse/QTBUG-13315)所做的一些研究，这可能会导致观察到 X11 错误。解决方案是只为 QEvent::Enter 事件调用 activateWindow()，这些事件在为小部件调用 show() 之后发生。这不仅效率更高，而且正确地将键盘焦点赋予文本字段，并且到目前为止，在我的测试中，不会产生任何 X11 错误。

# c# - 无法从 C# 连接到 EC2 上的 OpenFire

> ID：15359312
> 
> 赞同：0
> 
> 时间：2013-03-12T10:57:25.697
> 
> 标签：c#, azure, amazon-ec2, openfire

我有一个运行 OpenFire XMPP 服务器的 EC2 微型实例。我正在尝试使用`Jabber-net`本地计算机中的库将我的 c# + ASP.NET 应用程序连接到服务器。不幸的是，我收到一条错误消息“ `A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond ***.***.***.***:5222`”。我怀疑这是 PORT 的问题，但我无法弄清楚。这个应用程序是一个 Azure 云应用程序，那么是否可以从 Azure 云应用程序连接到端口 5222 上的 EC2？

我正在使用下面的代码；

```
JabberClient JClient = new JabberClient();   JID jid = new JID("user1", "im.domain.com", "");
JClient.User = "user1";
JClient.Password = "admin";
JClient.AutoLogin = false;
JClient.SSL = false;
JClient.OnError += JClient_OnError;
JClient.OnConnect += JClient_OnConnect;
JClient.OnLoginRequired += JClient_OnLoginRequired;
JClient.OnRegisterInfo += JClient_OnRegisterInfo;
JClient.OnRegistered += JClient_OnRegistered;
JClient.OnMessage += JClient_OnMessage;
JClient.Connect();
JClient.Register(jid);
JClient.Close(true); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:01:55.270

我已经解决了这个问题。我仍然不知道原因，但以下是我所做的更改；

*   创建了一条 A 记录来指向 EC2 实例
*   为 Jabber 服务添加了 SRV 记录
*   将库更改为 agsXMPP

# java - 将十六进制数转换为长整数

> ID：15359314
> 
> 赞同：0
> 
> 时间：2013-03-12T10:57:32.097
> 
> 标签：java, decimal, hex

我正在尝试将十六进制数转换为十进制数，但它不适用于非常大的值（十进制超过 2,147,483,647），因为那里的 int 类型是有限的。

这是我的代码，适用于整数

```
String nombreHexa = h2d.getText().toString();
            if (isHex(nombreHexa) == true) {
                int deciInt = Integer.parseInt(nombreHexa, 16);
                String newDeci = String.valueOf(deciInt);
                resulth2d.setText(newDeci);
            } 
```

我试图让 deciInt a`long`但它不是那么简单。问题似乎来自 parseInt 函数（parseLong 也不存在）

有人知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:59:18.750

正如[这个答案所暗示](https://stackoverflow.com/a/5153956/51197)的，使用[`Long.decode(str)`](http://download.oracle.com/javase/6/docs/api/java/lang/Long.html#decode%28java.lang.String%29)：

> 将 String 解码为 Long。接受十进制、十六进制和八进制数。

如果您需要大于[`Long.MAX_VALUE`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#MAX_VALUE)，[您可能应该使用 BigInteger](https://stackoverflow.com/a/5153956/51197)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:01:24.723

怎么了`Long.parseLong(String num, int radix)`？

```
String nombreHexa = h2d.getText().toString();
        if (isHex(nombreHexa) == true) {
            long deciLong = Long.parseLong(nombreHexa, 16);
            String newDeci = String.valueOf(deciLong);
            resulth2d.setText(newDeci);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:00:51.667

[parseLong](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)也存在。只要只是大小问题，都可以使用。

# java - selenium webdriver 似乎忽略了超时

> ID：15359316
> 
> 赞同：0
> 
> 时间：2013-03-12T10:57:53.623
> 
> 标签：java, selenium, timeout

我在测试的设置部分有以下超时

```
driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
driver.manage().timeouts().setScriptTimeout(60, TimeUnit.SECONDS);
driver.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS); 
```

然而，他们似乎都没有受到尊重。如果我理解正确，如果在 60 秒内没有任何操作，setScriptTimeout 应该会抛出错误。情况似乎并非如此。为了强制执行这些超时，我是否需要在每个 @Test 开始时特别做一些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T17:27:29.497

解决。使用 @Test(Timeout = 300000) 开始每个测试解决了这个问题。如果需要的时间超过指定的时间，每个测试现在都会超时。

# javascript - 在 JavaScript 中使用 ASP.Net Request.QueryString 安全吗？

> ID：15359317
> 
> 赞同：3
> 
> 时间：2013-03-12T10:57:53.950
> 
> 标签：javascript, asp.net, xss

考虑以下代码：

```
function redirect() {
    window.location = "../../index.aspx?<%=Request.QueryString%>";
} 
```

这段代码是安全的还是可以被 XSS 攻击利用？

如果是这样：

1.  如何？
2.  如何预防？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:23:56.143

Consider this as a querystring:

```
Xx"; alert('pwned'); window.location ="whatever 
```

Basically, you are allowing completely arbitrary JavaScript to be injected.

Best solution: never take direct user input and use it this way.

Second best solution: encode it for use in a JavaScript string before using it there. A simple " breaks out here.

Also; do not mistakenly do HTML encoding for this. That won't work right and will still be vulnerable.

# eclipse-plugin - 基于 Xtext 的编辑器的某些功能不适用于项目外的文件

> ID：15359321
> 
> 赞同：2
> 
> 时间：2013-03-12T10:58:09.300
> 
> 标签：eclipse-plugin, xtext

我编写了一个基于 Xtext 的插件，当我在工作区的一个项目中打开文件时，它运行良好；但是，当我在工作区外打开文件时（通过文件 -> 打开文件...），某些功能无法正常工作：

*   我得到语法着色，但没有语法错误。
*   Quickfix 选项不起作用，可能是因为`context.getXtextDocument()`退货`null`，我依靠它来提出我的 quickfix 建议。

我可能还缺少其他东西，但大多数其他功能，例如内容辅助、悬停定义、事件标记等，都可以正常工作。

**有没有办法可以使工作区外部源文件的行为与内部文件相同？**或者，是否有一种解决方法可以让我“欺骗”Xtext，以某种方式说服它该文件是当前项目的内部文件，例如通过以编程方式从项目创建指向它的链接？

[这是关于工作空间外部文件行为的相关问题](https://stackoverflow.com/questions/8239458/cannot-open-workspace-external-file-in-xtext-based-plugin)，但是我成功打开这些文件就好了，只是某些功能不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:39:13.507

据我所知，目前没有办法让工作区外部源文件的行为与内部文件相同。

以下是验证失败的解决方法：

*   在 xxx.ui 插件中，XxxUiModule.java 添加

    ```
    public Class<? extends IResourceForEditorInputFactory> bindIResourceForEditorInputFactory() {
        return MyJavaClassPathResourceForIEditorInputFactory.class;
    }

    @Override
    public Class<? extends IXtextEditorCallback> bindIXtextEditorCallback() {
        return MyNatureAddingEditorCallback.class;
    } 
    ```

*   创建 MyJavaClassPathResourceForIEditorInputFactory.java

    ```
    // Reenable validation
    public class MyJavaClassPathResourceForIEditorInputFactory extends JavaClassPathResourceForIEditorInputFactory {

        @Override
        protected Resource createResource(java.net.URI uri) {
            XtextResource resource = (XtextResource) super.createResource(uri);
            resource.setValidationDisabled(false);
            return resource;
        }
    } 
    ```

*   创建 MyNatureAddingEditorCallback.java

    ```
    // With reenabled validation the syntax validation starts to work only after the first change made
    // Run the validation manually to show the syntax errors straight away
    // - CheckMode.ALL below should be probably changed to something else to improve the performance
    public class MyNatureAddingEditorCallback extends NatureAddingEditorCallback {
        @Inject
        private IResourceValidator resourceValidator;
        @Inject 
        private MarkerCreator markerCreator;
        @Inject
        private MarkerTypeProvider markerTypeProvider;
        @Inject
        private IssueResolutionProvider issueResolutionProvider;

        @Override
        public void afterCreatePartControl(XtextEditor editor) {
            super.afterCreatePartControl(editor);
            validate(editor);
        }

        private void validate(XtextEditor xtextEditor) {
            if (xtextEditor == null) {
                return;
            }
            if (xtextEditor.getInternalSourceViewer() == null) {
                return;
            }
            IValidationIssueProcessor issueProcessor;
            IXtextDocument xtextDocument = xtextEditor.getDocument();
            IResource resource = xtextEditor.getResource();
            if(resource != null)
                issueProcessor = new MarkerIssueProcessor(resource, markerCreator, markerTypeProvider);
            else
                issueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);
            ValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,
                    CheckMode.ALL); // Consider changing the CheckMode here
            validationJob.schedule();
        }
    } 
    ```

另请参阅相应的错误报告： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=388399](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388399)

# android - 行为类似于浏览器的 Android 实现（缩放/平移）

> ID：15359322
> 
> 赞同：3
> 
> 时间：2013-03-12T10:58:09.937
> 
> 标签：android, layout, zooming, pan

我想知道是否有可能创建一个行为与 Android 手机上的任何浏览器相同的 Android 应用程序，包括：

*   （捏）缩放
*   平移/滚动

**我已经尝试了几件事**

*   [ZoomView](https://code.google.com/p/android-zoom-view/source/browse/src/pl/polidea/view/ZoomView.java)负责第一点，但当布局大于屏幕时无法正常工作（滚动/平移部分进入：如果在屏幕外，布局会被切断，并且在放入 a 时表现奇怪`ScrollView`） .
*   对于平移/滚动，我尝试了一个[TwoDScrollView](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)，但是这个和上面的不能相处，就像一个正常的`ScrollView`.
*   [ZoomableRelativeLayout](https://stackoverflow.com/questions/10013906/android-zoom-in-out-relativelayout-with-spread-pinch)确实有效，即使实现了捏合，但这仅适用于图像。例如，可点击区域在缩放/平移时不会移动。所以这也是不行的。

**选择**

*   使用`WebView`/ `PhoneGap`，但我真的不是`HTML(5)`or方面的专家`JavaScript`。

**问题**

*   如果我的布局可以比屏幕大，并使其完全可缩放和可平移，最好是原生的，那么最好的方法是什么？

**我读过的帖子**

*   [在相对布局中缩放内容](https://stackoverflow.com/questions/9192424/zoom-content-in-a-relativelayout)
*   [Android 开发缩放动画](http://developer.android.com/training/animation/zoom.html)
*   [关于完全缩放视图的博客](http://myandroidnote.blogspot.nl/2011/03/zooming-view-completely.html)
*   [Wiki 关于 android-zoom-view.jar](https://stackoverflow.com/questions/14254076/wiki-about-android-zoom-view-jar)
*   [适用于 Android 的 Java 平移/缩放监听器](http://code.cheesydesign.com/?p=723)
*   [安卓捏缩放](https://stackoverflow.com/questions/5375817/android-pinch-zoom/5376108#5376108)
*   然而，关于这个主题的其他帖子，到目前为止还没有答案解决我的问题。

**当前的实现和缺点**

```
View zoomableLayout = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.actuallayout, null, false);
zoomableLayout.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));

zoomView = new ZoomView(this);
zoomView.addView(zoomableLayout);
LinearLayout main_container = (LinearLayout) findViewById(R.id.main_container);
main_container.addView(zoomView); 
```

只要未缩放的布局适合屏幕，这效果就很好。一旦它变大，我需要实现 a `ScrollView`，功能就不像希望的那样或预期的那样。例如，如果我向下滚动并放大，我不能一直向上滚动，只能滚动到放大时可见的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T13:54:01.357

我强烈建议`HTML5`通过PhoneGap。这并不难。

编辑：需要几个步骤：

1.  将cordova添加为库（在我的情况下是`cordova-2.5.0.jar`）
2.  创建一个将处理返回的 javascript 调用的类（见`JSComm.java`下文）
3.  使用 webview 创建一个活动`DroidGap`（见下文）；请注意，Apache`CordovaActivity` 在较新的版本中将其重命名为）
4.  创建一个 javascript 文件（如下）
5.  创建一个 HTML 页面（如下），其中包含对您的 javascript 文件和 cordova javascript 文件的引用（在我的例子中`cordova-2.5.0.js`）
6.  添加一些xml（见下文）`/res/xml/config.xml`
7.  不要忘记将您的活动添加到清单中。

**JSComm.java**

```
public class JSComm extends CordovaPlugin {     
    public boolean execute(final String action, final JSONArray args, CallbackContext callbackContext) {
        final CallbackContextWrapper callbackContextWrapper = new CallbackContextWrapper(callbackContext);
        if (action.equals("MyString")
            return handleIt(args.getJSONObject(0));
        else 
            return false;
    }
} 
```

**MyCordovaActivity.java**

```
public class FormViewer extends DroidGap {
    @SuppressLint("SetJavaScriptEnabled")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.init();
        super.appView.getSettings().setJavaScriptEnabled(true);
        super.appView.getSettings().setSupportZoom(true);
        super.appView.getSettings().setBuiltInZoomControls(true);
        super.appView.getSettings().setDisplayZoomControls(false);
        super.appView.getSettings().setUseWideViewPort(true);
        super.appView.getSettings().setLoadWithOverviewMode(true);
        super.loadUrl("file:///" + myHTMLFilePath);
    }

    public void nextPage() {
        this.sendJavascript("nextPage()"); //example
    }
} 
```

**JSComm.js**

```
function nextPage() {
  var inputted = trytogetinputs(); //some method: get all html input elements
  cordova.exec(
      null, //what to execute when success? Nothing in this case.
      function(args) {
          addErrorBorders(args); //What to do if fail? add some error borders in this case.
      },
      "JSComm", //name of CordovaPlugin class
      "MyString", //to identify what method was run
      [inputted] //some data you can send along.
  );
} 
```

**你的 HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="common.css">
    <script type="text/javascript" src="../../jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../../cordova-2.5.0.js"></script><!--Cordova js file-->
    <script type="text/javascript" charset="utf-8" src="../../javacomm.js"></script><!--Your js file-->
    <script type="text/javascript" src="../../jquery-ui.min.js"></script>
    <script type="text/javascript" src="../../jquery.signature.min.js"></script>
  </head>
  <body background="0.png">...etc...</body></html> 
```

**xml**

```
<?xml version="1.0" encoding="utf-8"?>
<!--
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<cordova>
    <!--
    access elements control the Android whitelist.
    Domains are assumed blocked unless set otherwise
     -->

    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->

    <!-- <access origin="https://example.com" /> allow any secure requests to example.com -->
    <!-- <access origin="https://example.com" subdomains="true" /> such as above, but including subdomains, such as www -->
    <access origin=".*"/>

    <!-- <content src="http://mysite.com/myapp.html" /> for external pages -->
    <content src="index.html" />

    <log level="DEBUG"/>
    <preference name="useBrowserHistory" value="true" />
    <preference name="exit-on-suspend" value="false" />
    <preference name="fullscreen" value="false" />
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>
    <plugin name="Echo" value="org.apache.cordova.Echo" />
    <plugin name="Globalization" value="org.apache.cordova.Globalization"/>
    <plugin name="InAppBrowser" value="org.apache.cordova.InAppBrowser"/>
    <plugin name="JSComm" value="com.example.application.JSComm"/>
</plugins>
</cordova> 
```

# database - 打开标准 Jet DB 4.0 文件 (*.vmd)

> ID：15359323
> 
> 赞同：5
> 
> 时间：2013-03-12T10:58:12.187
> 
> 标签：database, windows, standards, jet

我下载了一个扩展名为“VMD”的数据库文件。现在我正在寻找一个可以打开这个文件的 Windows 软件，这样我就可以看到所有包含的表格，以便（稍后）导出其中一些信息 csv。

当我用普通的文本编辑器打开下载的文件时，文件的标题告诉我

> 标准 Jet DB 4.0

当我尝试使用常用的数据库软件（如 Microsoft Access）打开它时，出现如下错误

> 无法识别的数据库格式

我有点困惑。该文件具有“Standard Jet DB 4.0”标头，但无法使用常规软件打开。

是什么软件可以打开这个文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-20T02:35:41.720

将文件重命名为 .mdb 后缀，然后再次尝试在 Access 中打开。您可能需要使用密码，在这种情况下，请按照[此答案](https://superuser.com/a/180400/157229)中的建议尝试[访问 PassView](http://www.nirsoft.net/utils/accesspv.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-18T09:15:14.127

快速添加到这个线程，

为了将来参考，在这篇文章的最新 MSAccess 中，您需要将文件类型更改为“所有文件 (*)”才能选择您的 MSAccess db 文件。然后你可以选择任何文件，然后它应该正常打开，忽略扩展名；

[![在此处输入图像描述](../Images/424c2d03731d1a71158a11bd473c1e65.png)](https://i.stack.imgur.com/CtHow.png)

# sql-server-2005 - 为什么我的 CASTS 在 SSIS 中似乎被忽略了？

> ID：15359326
> 
> 赞同：4
> 
> 时间：2013-03-12T10:58:17.880
> 
> 标签：sql-server-2005, ssis, sql-server-2008-r2, truncation

我在 SSIS 中使用**数据流任务**将数据从一台服务器 (SQL Server 2005) 获取到另一台服务器 (SQL Server 2008 R2)。在**OLE DB Source**连接中，我使用 SQL 命令来获取数据。在这个命令中，我已经将内容转换为某种数据类型：

```
SELECT
CAST(column1 AS VARCHAR(10)) AS NameColumn1
,CAST(column2 AS INT) AS NameColumn2
,CAST(REPLACE(REPLACE(REPLACE(REPLACE(column3, CHAR(10), ''), CHAR(13), ''), CHAR(9), ''), ';', '-') AS VARCHAR(100)) AS NameColumn3
,CAST(REPLACE(REPLACE(REPLACE(REPLACE(column4, CHAR(10), ''), CHAR(13), ''), CHAR(9), ''), ';', '-') AS VARCHAR(255)) AS NameColumn4
...
FROM (etc.) 
```

（请注意，转换是转换为源数据库中列值的原始数据类型。因此 column1 的数据类型最初`VARCHAR(10)`是 ，column4的数据类型最初是`VARCHAR(255)`，等等。）

之所以使用这些强制转换，是因为在包中我收到了以下关于`column3`and的警告`column4`：

> 验证警告。[...] 由于将数据从长度为 8000 的数据流列“column4”插入到长度为 255 的数据库列“column4”，可能会发生截断。

似乎强制转换不起作用，因为 column3 和 column4 的截断警告不断出现。（我已经将**OLE DB Source**中的截断警告设置为*Ignore failure*，但这似乎没有什么区别。）

我在网上找不到任何东西，暂时将通过将列导入为`VARCHAR(8000)`. 但我很想知道 SSIS 中这种行为的原因是什么。有人有线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:29:19.713

进入源组件的高级属性并验证第 3 列和第 4 列的大小（在输入和输出属性中）。如果它们已经被计算为 varchar(8000) 那么您将不得不手动更改它们。

或者，删除该组件并从一开始就使用您的 Select / Cast 添加一个新组件 - 这应该正确分配正确的字段长度。

# assembly - GDB 不显示 EFlags 助记符

> ID：15359329
> 
> 赞同：2
> 
> 时间：2013-03-12T10:58:26.143
> 
> 标签：assembly, gdb, nasm, flags, mnemonics

我目前正在使用 GDB 和 NASM 进行汇编编程。

不幸的是，我无法在 GDB 中看到 EFlags 寄存器助记符（ZF、AF、PF 等）。

我正在显示一个十进制值：`eflags 0x246 582`

我确信我可以将十进制转换为二进制并自己计算标志，但这对于其他人似乎都有的功能来说似乎需要做很多工作？

操作系统：`Mountain Lion 10.8.2`

GDB 版本：

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1824) (Thu Nov 15 10:42:43 UTC 2012)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:05:42.553

您的 gdb 版本非常旧。如果它没有实现该功能，这是我用来打印 eflags 内容的 gdb 函数：

```
define eflags
    printf "     OF <%d>  DF <%d>  IF <%d>  TF <%d>",\
           (($eflags >> 0xB) & 1), (($eflags >> 0xA) & 1), \
           (($eflags >> 9) & 1), (($eflags >> 8) & 1)
    printf "  SF <%d>  ZF <%d>  AF <%d>  PF <%d>  CF <%d>\n",\
           (($eflags >> 7) & 1), (($eflags >> 6) & 1),\
           (($eflags >> 4) & 1), (($eflags >> 2) & 1), ($eflags & 1)
    printf "     ID <%d>  VIP <%d> VIF <%d> AC <%d>",\
           (($eflags >> 0x15) & 1), (($eflags >> 0x14) & 1), \
           (($eflags >> 0x13) & 1), (($eflags >> 0x12) & 1)
    printf "  VM <%d>  RF <%d>  NT <%d>  IOPL <%d>\n",\
           (($eflags >> 0x11) & 1), (($eflags >> 0x10) & 1),\
           (($eflags >> 0xE) & 1), (($eflags >> 0xC) & 3)
end
document eflags
Print EFLAGS register. (x86)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:04:45.427

要查看设置的标志：

```
info registers eflags 
```

# excel - 从另一个应用程序导出到 Excel 时未选择默认 Excel 模板

> ID：15359330
> 
> 赞同：0
> 
> 时间：2013-03-12T10:58:39.050
> 
> 标签：excel, templates, export, vba

我制作了一个 Excel 模板，让用户默认使用一些宏。
当我打开一个**新的 Excel 工作簿**时，一切顺利，宏显示在宏列表中，我可以正确使用它。

当我**从另一个应用程序生成工作簿时**（例如，将数据从 MS Access 导出到 Excel），宏在生成的工作簿中不可用，所以我认为模板没有被选中。

我的模板是 MS Excel 2010 `Macro-Enabled template (.xltm)`。
我命名它`Book.xltm`。
我把它放在`XLStart`我个人资料的文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:52:08.693

默认模板仅在从 Excel 中创建新工作簿时使用，而不是从其他应用程序中创建。

要将宏添加到在 VBA 中创建的工作表中，首先将宏表保存为 XLAM 类型（或 XLA 以与 Excel 2003 兼容）。

假设宏保存为*MyMacro.xlam*并且您的工作簿由变量*MyWb引用*

```
Set MyAddin = MyWb.Application.Addins.Add("MyMacro.xlam")
MyAddin.Installed=True 
```

您现在可以在新工作簿中引用宏。

# c# - KeyEventArgs.Key 到 char

> ID：15359336
> 
> 赞同：14
> 
> 时间：2013-03-12T10:58:58.323
> 
> 标签：c#, wpf, textbox, keyeventargs

有什么方法可以将 WPF 转换`KeyEventArgs.Key`为`Char`.

我尝试使用`KeyInterop`：

```
var x = (Char)KeyInterop.VirtualKeyFromKey(e.Key); 
```

对于数字和字母，它可以正常工作，但对于其他字符则不行。例如，`OemComma`它返回 '1/4' 而不是 ','。

我需要它来防止用户输入`TextBox`除数字和分隔符（即逗号或句点）以外的任何字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-01T01:40:44.503

更新：下面的评论找到了原始[http://stackoverflow.com/a/5826175/187650](http://stackoverflow.com/a/5826175/187650)

在我忘记的地方找到了这个。仍在使用它，不知道它有什么漏洞，但据我所知它是有效的。

```
public static class KeyEventUtility
{
    // ReSharper disable InconsistentNaming
    public enum MapType : uint
    {
        MAPVK_VK_TO_VSC = 0x0,
        MAPVK_VSC_TO_VK = 0x1,
        MAPVK_VK_TO_CHAR = 0x2,
        MAPVK_VSC_TO_VK_EX = 0x3,
    }
    // ReSharper restore InconsistentNaming

    [DllImport( "user32.dll" )]
    public static extern int ToUnicode(
        uint wVirtKey,
        uint wScanCode,
        byte[] lpKeyState,
        [Out, MarshalAs( UnmanagedType.LPWStr, SizeParamIndex = 4 )] 
        StringBuilder pwszBuff,
        int cchBuff,
        uint wFlags );

    [DllImport( "user32.dll" )]
    public static extern bool GetKeyboardState( byte[] lpKeyState );

    [DllImport( "user32.dll" )]
    public static extern uint MapVirtualKey( uint uCode, MapType uMapType );

    public static char GetCharFromKey( Key key )
    {
        char ch = ' ';

        int virtualKey = KeyInterop.VirtualKeyFromKey( key );
        var keyboardState = new byte[256];
        GetKeyboardState( keyboardState );

        uint scanCode = MapVirtualKey( (uint)virtualKey, MapType.MAPVK_VK_TO_VSC );
        var stringBuilder = new StringBuilder( 2 );

        int result = ToUnicode( (uint)virtualKey, scanCode, keyboardState, stringBuilder, stringBuilder.Capacity, 0 );
        switch ( result )
        {
        case -1:
            break;
        case 0:
            break;
        case 1:
            {
                ch = stringBuilder[0];
                break;
            }
        default:
            {
                ch = stringBuilder[0];
                break;
            }
        }
        return ch;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-15T10:57:27.227

我的第一个建议是使用**PreviewTextInput**和**TextCompositionEventArgs**。但是，这会“吃掉”空格字符。对于这个“空间”问题，请参阅：

*   [如何防止输入控件从 TextCompositionManager 中窃取空格字符？](https://stackoverflow.com/questions/1053533/how-can-i-prevent-input-controls-from-stealing-the-space-character-from-the-text)
*   [为什么 PreviewTextInput 不处理空格？](https://stackoverflow.com/questions/7971559/why-does-previewtextinput-not-handle-spaces)

另一种解决方案是在**KeyUp**事件中使用**KeyConverter ：**

 **```
 KeyConverter kc = new KeyConverter();
  var str = kc.ConvertToString(e.Key); 
```

对于**WPF**：[https](https://msdn.microsoft.com/en-us/library/system.windows.input.keyconverter(v=vs.110).aspx) ://msdn.microsoft.com/en-us/library/system.windows.input.keyconverter(v=vs.110).aspx 对于**Winforms**：[https ://msdn.microsoft.com/en-我们/图书馆/system.windows.forms.keysconverter.aspx](https://msdn.microsoft.com/en-us/library/system.windows.forms.keysconverter.aspx)

请注意，KeyConverter 将为您提供字符串“Space”而不是“”。（按 Esc 键时的“Esc”也是如此。

另一个 WPF 解决方案是在**KeyUp**事件中使用它：

```
((char)KeyInterop.VirtualKeyFromKey(e.Key)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:06:06.237

为什么采用这种方法？有多种方法可以阻止用户执行此类输入。例如，为`TextBox.TextChanged`-event 定义一个事件处理程序，当输入不是小数或分隔符时，撤消输入。

```
private void textChangedEventHandler(object sender, TextChangedEventArgs args){
//args contains a property `Changes` where you can see what happened
//check for invalid characters and revoke them
} 
```

请参阅[TextChangedEventArgs](http://msdn.microsoft.com/de-de/library/system.windows.controls.textchangedeventargs.aspx)和[事件](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.textboxbase.textchanged.aspx)。**

# angularjs - AngularJS - 使用 RequireJS 或内置的东西进行模块化开发？

> ID：15359341
> 
> 赞同：6
> 
> 时间：2013-03-12T10:59:14.597
> 
> 标签：angularjs, requirejs, amd

我一直在编写一个 angularjs 应用程序，并且我有许多控制器，我将它们放在一个 1 JS 文件中。我希望有一些更模块化的东西，并将我的控制器分成自己的文件。

我想到了RequireJS，但这是推荐的方式吗？或者 angularjs 是否提供了其他东西以及解释它的任何线索？

拥有所有这些文件也非常适合调试，但是一旦需要生产构建，angularJS 是否提供某种将模块合并到一个文件中并最小化结果？

如果有人可以解释最好的解决方法，那将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T12:13:44.950

Angular 依赖注入真的很棒，你应该创建很多小模块。

在文件组织方面，拥有很多小文件（每个模块可能一个）要容易得多，但是您会遇到您正在谈论的问题：我该如何处理所有这些文件？我如何加载它们？

**值得看看这两个来源：[Brian Ford 的博客](http://briantford.com/blog/huuuuuge-angular-apps.html)和[这个 Github repo](https://github.com/angular-app/angular-app)。**它帮助我改善了工作流程并更好地理解/使用 Angular 模块。

# TL;博士

我为我的项目所做的是使用**[Grunt](http://gruntjs.com/)**来**连接**（如果需要则**缩小**）所有 js 文件（以及更多：**更少的 css 编译、资产管理、javascript 模板编译**）。
上面的 Github repo 给出了一个很好的例子。

> **我不建议将 RequireJS 与 AngularJS 一起使用。**虽然这当然是可能的，但我还没有看到任何 RequireJS 在实践中有益的例子。[布赖恩福特]

# 文件组织

我的应用程序文件夹如下所示：

```
www
|-dist/         = Created by Grunt. Generated files (served by my web server).
|-node_modules/ = node modules (ie. Grunt modules. Grunt is based on NodeJS)
|-src/          = My workspace
|-test/         = Some tests
|-vendor        = External libraries (AngularJS, JQuery, Bootstrap, D3, ... Whatever you need)
|-gruntFile.js  = The Grunt configuration file: contains all the jobs for Grunt.
|-package.json  = App infos + dependencies (Grunt modules) I use (concat, uglify, jshint, ...) 
```

所以我处理的所有不同文件都在`src`文件夹中，看起来像这样：

```
www/src
|-app              = Folder for my controllers
| |-Controller1.js
| |-Controller2.js
| |-...
|-assets           = Folder for the static assets (img, css, ...)
| |-img/
| |-css/
| |-favicon.ico
|-common           = Folder for the shared modules (directives, resources, services, ...)
| |-directives
| | |-chart.js
| | |-map.js
| | |-...
| |-resources
| | |-users.js
| | |-another-cool-resource.js
| | |-...
| |-services
| | |-service1.js
| | |-...
|-views            = Folder for my templates
| |-profile.tpl.html
| |-search.tpl.html
| |-...
|-index.html       = The main and unique html file. 
```

# 咕噜声

然后我使用 Grunt 将所有内容“编译”到`dist`文件夹中。可以在[此处](https://github.com/angular-app/angular-app/blob/master/client/gruntFile.js)
找到 a 的示例。我有一份一次性的部署工作和一些开发观察员。 `gruntFile`

### 您需要更多解释吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T11:04:58.237

Angular 允许您定义可以注入控制器的模块，请参见此处：

[http://docs.angularjs.org/api/angular.module](http://docs.angularjs.org/api/angular.module)

这些模块可以依赖于可以像这样注入的其他模块：

```
app.factory('module2', ['module1', function (module1) {
   var functions = {
       myModule2Function: function (variable) {
          return  module1.testfunction(variable);
       }
   }
    return functions;
}]); 
```

然后在控制器中：

```
function MyController($scope, module2) { 
      $scope.aControllerFunction = function (variable) {
         return module2.myModule2Function(variable);
     }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T23:16:43.243

按需加载模块是我们真正大型应用程序所需要的，例如交易应用程序。我认为这是一种处理行为的聪明方法，至少在我们不想在 3G 连接上加载整个应用程序的移动设备上。在这些情况下，RequireJS 最适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T04:06:16.143

将 RequireJS 与 AngularJS 一起使用是有意义的，但前提是您了解它们各自在**依赖注入**方面的工作原理，因为尽管它们都注入依赖项，但它们注入的东西却截然不同。

AngularJS 有自己的依赖系统，可以让你将 AngularJS 模块注入到新创建的模块中，以便重用实现。假设您创建了一个实现 AngularJS 过滤器“greet”的“第一个”模块：

```
angular
  .module('first', [])
  .filter('greet', function() {
    return function(name) {
      return 'Hello, ' + name + '!';
    }
  }); 
```

现在假设您想在另一个名为“second”的模块中使用“greet”过滤器，该模块实现了“goodbye”过滤器。您可以将“第一个”模块注入“第二个”模块：

```
angular
  .module('second', ['first'])
  .filter('goodbye', function() {
    return function(name) {
      return 'Good bye, ' + name + '!';
    }
  }); 
```

问题是，为了在没有 RequireJS 的情况下正常工作，您必须确保在创建“第二个”AngularJS 模块之前在页面上加载了“第一个”AngularJS 模块。引用文档：

> 依赖于模块意味着需要在加载所需模块之前加载所需模块。

从这个意义上说，这里是 RequireJS 可以帮助您的地方，因为 RequireJS 提供了一种将脚本注入页面的干净方式，帮助您组织彼此之间的脚本依赖关系。

回到“第一个”和“第二个”AngularJS 模块，这里是如何使用 RequireJS 分离不同文件上的模块以利用脚本依赖加载：

```
// firstModule.js file
define(['angular'], function(angular) {
  angular
    .module('first', [])
    .filter('greet', function() {
      return function(name) {
        return 'Hello, ' + name + '!';
      }
    });
}); 
```

```
// secondModule.js file
define(['angular', 'firstModule'], function(angular) {
  angular
    .module('second', ['first'])
    .filter('goodbye', function() {
      return function(name) {
        return 'Good bye, ' + name + '!';
      }
    });
}); 
```

您可以看到，在执行 RequireJS 回调的内容之前，我们依赖于要注入的“firstModule”文件，这需要加载“第一个”AngularJS 模块以创建“第二个”AngularJS 模块。

旁注：需要在“firstModule”和“secondModule”文件上注入“angular”作为依赖项，以便在 RequireJS 回调函数中使用 AngularJS，并且必须在 RequireJS 配置中配置它以将“angular”映射到库代码。您可能也以传统方式（脚本标记）将 AngularJS 加载到页面，尽管这会破坏 RequireJS 的好处。

更多关于从我的博客文章 2.0 版本的 AngularJS 核心获得 RequireJS 支持的详细信息。

**根据我的博*文“用 AngularJS 理解 RequireJS”*，这里是[链接](http://leog.me/log/making-sense-of-requirejs-with-angularjs/)。**

# java - 布尔测试在应该为真时返回假？

> ID：15359342
> 
> 赞同：3
> 
> 时间：2013-03-12T10:59:17.517
> 
> 标签：java, boolean

我正在浏览一份过去试卷上的问题清单。其中一个问题是布尔类型。

如果名字不是 Thomas，它应该返回 false，如果是，则返回 true。

这是我的代码：

```
public class QuestionTwo
{   
String name;

public static void main(String [] args){

    System.out.println(nameTest("Thomas"));   
}
public static boolean nameTest(String name){
    if(!name.equals("Thomas"));
    return false; 
 }
} 
```

如您所见，我的代码应该返回 true，但它一直返回 false？有人可以告诉我我的代码似乎哪里出了问题吗？请原谅我仍在学习中发现的任何愚蠢错误。非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:59:56.553

去掉分号

```
 if(!name.equals("Thomas")) return false; 
```

您编写它的方式是两个单独的语句。首先，如果 name 不等于 Thomas，则什么也不做。其次，返回false。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T11:00:09.390

去掉末尾的**分号**`if statement`。

```
 if(!name.equals("Thomas")) 
```

同样好的做法是这样做`equals test`：

```
 if(!"Thomas".equals(name)) 
```

在这种情况下，如果 name 为**null**你不会得到**NPE**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T11:03:48.810

> 如果名称不是 Thomas，[方法] 应该返回 false，如果是，则返回 true。

你根本不需要`if`：

```
 public static boolean nameTest(String name){
     return name.equals("Thomas");
 } 
```

一般来说，没有s 和/的`boolean`表达式更容易阅读。每次你看到返回或从一个分支返回时，你应该考虑在没有语句的情况下重写它。`if``== true``== false``true``false``if``if`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:02:44.770

在 if 和 return 语句之后放置分号使它们成为单独的语句。代码应该是这样的：

```
public class QuestionTwo {   
    String name;

    public static void main(String [] args){
        System.out.println(nameTest("Thomas"));   
    }

    public static boolean nameTest(String name){
        if(!"Thomas".eqauals(name)) {
            return false;
        }
        return true;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T11:04:10.773

最好的办法是准确返回名称是否等于 Thomas。无需执行 if 语句

```
public static boolean nameTest(String name){
  return name.equals("Thomas"); 
} 
```

另一个建议的解决方案：

```
if(!name.equals("Thomas")) return false; 
```

不会编译，因为如果名称不是 Thomas，则没有返回值。

# postgresql - 使用 psql 命令运行批处理文件，无需密码

> ID：15359348
> 
> 赞同：29
> 
> 时间：2013-03-12T10:59:25.807
> 
> 标签：postgresql, shell, connection, psql

我正在尝试`psql`使用批处理脚本执行此命令：

```
psql --host=localhost --dbname=<dbname> --port=<Port Number>
     --username=<dbuser> --file=C:\PSQL_Script.txt --output=C:\PSQL_Output.txt 
```

问题是每次我执行批处理脚本时它都要求输入密码。如何通过批处理文件输入密码参数？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-23T23:01:13.607

继续阅读，***最好的选择排在最后***。但是，让我们首先澄清几件事。

### 仅使密码请求静音

如果您的问题只是密码提示，您可以将其静音。我在这里引用[手册](https://www.postgresql.org/docs/current/static/app-psql.html)：

> `-w`
> `--no-password`
> 
> 永远不要发出密码提示。如果服务器需要密码验证，而密码不能通过文件等其他方式获得`.pgpass`，则连接尝试将失败。此选项在没有用户输入密码的批处理作业和脚本中很有用。(...)

### 您可能不需要密码

通常这是不必要的。默认的数据库超级用户`postgres`通常对应同名的系统用户。[如果身份验证方法](https://www.postgresql.org/docs/current/static/auth-methods.html#AUTH-PEER)或在您的文件中设置，则从此帐户运行`psql`不需要密码。你可能有这样的一行：[**`peer`**](https://www.postgresql.org/docs/current/static/auth-methods.html#AUTH-PEER)`ident`**`pg_hba.conf`**

```
local    all    postgres    peer 
```

通常还有：

```
local    all    all         peer 
```

这意味着，每个*本地*用户都可以以同名数据库用户的身份登录到*所有数据库，而无需密码。*
**但是**，这里有一个常见的误解。[再次引用](https://www.postgresql.org/docs/current/static/auth-methods.html#AUTH-PEER)：

> 此方法仅在**本地连接**上受支持。

大胆强调我的。
您正在连接到**`localhost`**，这**不是“本地连接”**，即使其中包含“本地”一词。这是到 127.0.0.1 的 TCP/IP 连接。[本地主机上的维基百科](https://en.wikipedia.org/wiki/Localhost)：

> 在现代计算机系统上，主机名通常会转换为（环回）网络块`localhost`中的 IPv4 地址，或者在 IPv6 中。`127.0.0.0/8``127.0.0.1``::1`

### 本地连接的简单解决方案

`-h`从`psql`调用中省略参数。再次引用[手册：`psql`](https://www.postgresql.org/docs/current/static/app-psql.html#R2-APP-PSQL-CONNECTING)

> 如果省略主机名，psql 将**通过 Unix 域套接字**连接 到本地主机上的服务器，或通过 TCP/IP 连接到`localhost`没有 Unix 域套接字的机器上。

### 视窗

... 没有 Unix 域套接字，`pg_hba.conf`以开头的行`local`不适用于 Windows。在 Windows 上，您`localhost`默认通过连接，这使我们回到开始。

如果您的安全要求不严格，您可以通过以下方式信任所有连接`localhost`：

```
host    all    all    127.0.0.1/32     trust 
```

我只会在关闭远程连接的情况下进行调试。为了获得更高的安全性，您可以在 Windows 上使用[SSPI 身份验证。](https://www.postgresql.org/docs/current/static/auth-methods.html#SSPI-AUTH)将此行添加到`pg_hba.conf`“本地”连接：

```
host    all    all    127.0.0.1/32     sspi 
```

### 如果您确实需要密码

您*可以*设置**环境变量**，但***不鼓励***这样做，尤其是对于 Windows。[手册：](https://www.postgresql.org/docs/current/static/libpq-envars.html)

> `PGPASSWORD`行为与[密码](https://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-CONNECT-PASSWORD)连接参数相同。出于安全原因，不建议使用此环境变量，因为某些操作系统允许非 root 用户通过 ps 查看进程环境变量；而是考虑使用该`~/.pgpass`文件（参见[第 32.15 节](https://www.postgresql.org/docs/current/static/libpq-pgpass.html)）。

[手册`psql`](https://www.postgresql.org/docs/current/static/app-psql.html#R2-APP-PSQL-CONNECTING)：

字符串[**`conninfo`**](https://www.postgresql.org/docs/current/static/libpq-connect.html#LIBPQ-PARAMKEYWORDS)是指定连接参数的替代方法：

```
 $ psql "user=myuser password=secret_pw host=localhost port=5432 sslmode=require" 
```

或[**URI**](https://www.postgresql.org/docs/current/static/libpq-connect.html#id-1.7.3.8.3.6)，用于代替数据库名称：

```
 $ psql postgresql://myuser:secret_pw@localhost:5432/mydb?sslmode=require 
```

## 密码文件

但通常最好设置一个[**`.pgpass`文件**](https://www.postgresql.org/docs/current/static/libpq-pgpass.html)，而不是将密码放入脚本文件中。
仔细阅读[手册中的简短章节](https://www.postgresql.org/docs/current/static/libpq-pgpass.html)。特别要注意的是，这里...

> 主机名`localhost`匹配来自本地机器的TCP（主机名`localhost`）和 Unix 域套接字（空或默认套接字目录）连接。`pghost`

确切路径取决于系统。此文件可以存储角色和端口（数据库集群）的多种组合的密码：

```
localhost:5432:*:myadmin:myadminPasswd
localhost:5434:*:myadmin:myadminPasswd
localhost:5437:*:myadmin:myadminPasswd
... 
```

在**Windows**机器上查找文件：

```
%APPDATA%\postgresql\pgpass.conf 
```

`%APPDATA%`通常解析为：`C:\Documents and Settings\My_Windows_User_Name\Application Data\`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T10:12:22.463

我遇到了同样的问题：

```
psql -hlocalhost -d<myDB> -U<myUser> 
```

总是提示我输入密码。正如@Erwin 解释的那样，因为`-hlocalhost`它是通过 TCP 连接而不是通过 Unix 域套接字（对于基于 Unix 的操作系统）。因此，即使您已将您的配置`local`为受信任：

```
local   all    all                     trust 
```

它仍然会提示输入密码。因此，为了配置`-hlocalhost`通过 TCP 工作，我必须配置`host`localhost 地址，如下所示：

```
host    all    all    127.0.0.1/32     trust
host    all    all    ::1/128          trust 
```

但这对我不起作用。我所要做的就是将这两者结合起来：

```
host    all    all    localhost        trust 
```

一些额外的阅读：

*   [配置 pg_hba.conf 文件](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)
*   [认证方式：trust、peer、ident等](http://www.postgresql.org/docs/current/interactive/auth-methods.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-16T23:24:44.200

我发现了这种将连接字符串传递给命令的技巧，即

```
$ psql postgresql://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME} 
```

`例子：

```
$ psql postgresql://user:password@127.0.0.1:5432/database 
```

这样，如果您必须传递数据库密码但又不想在提示符中继续传递它，您可以在 bash 文件中执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-28T12:28:25.887

postgres 文档 - [https://www.postgresql.org/docs/9.6/static/app-psql.html](https://www.postgresql.org/docs/9.6/static/app-psql.html)

-w --no-password 从不发出密码提示。如果服务器需要密码验证并且密码不能通过其他方式（例如 .pgpass 文件）获得，则连接尝试将失败。此选项在没有用户输入密码的批处理作业和脚本中很有用。

# android - 当按钮按下两次android时应用程序停止

> ID：15359349
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:59:28.033
> 
> 标签：android, crash

我最近开始 android 开发并面临不幸应用程序已停止的错误。该应用程序非常简单，它在按下按钮时从 twitter 获取提要并将其显示在文本框中。多次按下按钮时会发生错误。这是我的代码：

```
package com.example.newsfeed;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class NewsFeed extends Activity {

    AsyncTask<Void, Void, Void> mTask;
    String jsonString;
    String url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=50cent&count=3";
    Button b;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_news_feed);
        b = (Button) findViewById(R.id.getFeedBtn);
        final TextView tv = (TextView) findViewById(R.id.newsfeedEdit);

        mTask = new AsyncTask<Void, Void, Void> () {

            @Override
            protected Void doInBackground(Void... arg0) {
                // TODO Auto-generated method stub
                try {
                    jsonString = getJsonFromServer(url);
                } catch(IOException e) {
                    e.printStackTrace();
                }
                return null;
            }

            protected void onPostExecute(Void result) {
                super.onPostExecute(result);
                try {
                    JSONArray jArray = new JSONArray(jsonString);
                    String text="";

                    for( int i=0; i<jArray.length(); i++ ) {
                        JSONObject e = (JSONObject) jArray.getJSONObject(i);

                        JSONObject f = (JSONObject) jArray.getJSONObject(i).get("user");

                        text = text + "User : "+f.getString("name")+"\n";

                        text = text + "ID : "+e.getString("id")+"\n";
                        text = text + "SOURCE: "+e.getString("source")+"\n";
                        text = text + "TEXT : "+e.getString("text")+"\n";
                    }
                    tv.setText(text);
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

        };

        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                mTask.execute();
            }
        });
    }

    public static String getJsonFromServer(String url) throws IOException {
        BufferedReader inputStream = null;

        URL jsonUrl = new URL(url);
        URLConnection dc = jsonUrl.openConnection();

        dc.setConnectTimeout(5000);
        dc.setReadTimeout(5000);

        inputStream = new BufferedReader(new InputStreamReader(
                dc.getInputStream()));

        String jsonResult = inputStream.readLine();
        return jsonResult;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_news_feed, menu);
        return true;
    }

} 
```

这是我的日志：

```
03-12 11:01:17.172: E/AndroidRuntime(10297): FATAL EXCEPTION: main
03-12 11:01:17.172: E/AndroidRuntime(10297): java.lang.IllegalStateException: Cannot execute task: the task has already been executed (a task can be executed only once)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:578)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.os.AsyncTask.execute(AsyncTask.java:534)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at com.example.newsfeed.NewsFeed$2.onClick(NewsFeed.java:83)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.view.View.performClick(View.java:4202)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.view.View$PerformClick.run(View.java:17340)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.os.Handler.handleCallback(Handler.java:725)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.os.Looper.loop(Looper.java:137)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at android.app.ActivityThread.main(ActivityThread.java:5039)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at java.lang.reflect.Method.invokeNative(Native Method)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at java.lang.reflect.Method.invoke(Method.java:511)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-12 11:01:17.172: E/AndroidRuntime(10297):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:03:53.817

在该`onClick`方法中，您必须检查您的任务是否已经在运行。如果您尝试多次启动一个任务，那么您的应用程序将会崩溃。我建议您将任务的声明分离到一个私有类中，然后在 onClick 方法中将该类实例化（在您检查它是否正在运行之后）。

您可以参考[AsyncTask 文档](https://developer.android.com/reference/android/os/AsyncTask.html)了解更多详细信息。那里也有例子。

如果随后单击按钮，我修改了您的代码以重新创建任务。[在这里](http://paste.ubuntu.com/5607547/)找到它。您将不得不对其进行一些修改，因为一直取消它是没有意义的，但我还是决定举一个例子来说明如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:39:28.930

根据您的代码，当您单击按钮时，它将执行异步任务，如果您尝试多次单击按钮，它也会多次执行任务并崩溃。所以在执行期间禁用按钮。

# vb6 - 我们可以使用 While 循环而不是 Do While

> ID：15359353
> 
> 赞同：1
> 
> 时间：2013-03-12T10:59:46.657
> 
> 标签：vb6

```
Open App.Path & "\employee.txt" For Input As #3

Do While (Not EOF(3))
    Input #3, strEmployeeRead
    lstEmployee.AddItem (strEmployeeRead)
Loop
Close #3 
```

我可以用 While 循环替换 DO While (...) 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:02:06.800

在您的情况下，不需要`Do While`循环，您将使用`While`循环获得相同的结果

```
While (Not EOF(3))
    ...
Wend 
```

通常，当您需要在检查条件状态*之前*至少进行 1 次迭代时，您会选择`Do..While`循环而不是循环，例如`While`

 *```
Do
    ...
Loop While (Not EOF(3)) 
```*

# javascript - 通话期间自动显示数字键盘

> ID：15359354
> 
> 赞同：0
> 
> 时间：2013-03-12T10:59:53.837
> 
> 标签：javascript, ios, iphone, cordova, phone-call

我正在为多个平台开发一个 Phonegap 应用程序。

应用程序需要拨打电话，在 Javascript 中完成的操作如下：

```
document.location.href = 'tel:0111111111'; 
```

这个在 iPhone 上运行良好，当通话挂断时，我的应用程序可以很好地按预期检索焦点。

但是，在通话期间，用户必须通过触摸 iPhone 数字键盘的星号键来回答来自 SVI 的语音消息。为了帮助用户，我希望在电话呼叫期间自动显示数字键盘，而无需用户显式显示。

有可能有这个控制水平吗？

# ms-access - MS Access 客户端：在 Oracle 表中存储文档

> ID：15359355
> 
> 赞同：1
> 
> 时间：2013-03-12T10:59:55.130
> 
> 标签：ms-access, oracle10g, ole

我想尝试将文档存储在 MS Access 的附加 Oracle 表中，就像使用 Access 表中的 OLE 对象字段一样。
那行得通吗？Oracle 中使用哪种字段类型？斑点？BFILE 也能正常工作吗？
谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:49:54.373

您可能自己发现的一种方法是在 Access 中创建这样的表，然后通过 ODBC 连接将其导出到 Oracle。如果该过程成功，那么您可以查看创建的 Oracle 表并查看用于存储嵌入文档的列类型。

# jquery - dojo 饼图无法在移动设备上呈现

> ID：15359362
> 
> 赞同：1
> 
> 时间：2013-03-12T11:00:12.557
> 
> 标签：jquery, html, jquery-mobile, dojo, dojox.charting

我用[它](http://dojotoolkit.org/documentation/tutorials/1.8/charting/demo/monthly-sales-moveslice.php)在我的移动应用程序上呈现饼图。当我在桌面上的浏览器模拟器上测试它时它工作正常，但是当我在移动设备上运行它时，图表没有呈现，相反，我得到一个空白 div。任何线索我可能会出错？

它可能不相关，但我正在使用 jQuery Mobile 框架作为前端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:37:55.757

## 介绍

测试：

1.  桌面 Firefox 和 Chrome
2.  安卓 4.1.1 铬
3.  iPad 3 6.0

## 解决方案

jQuery Mobile 在这里有点特别，你需要非常了解它才能做一些特定的事情。

由于其不寻常的页面处理，图表或任何其他可视化框架（需要绘图）只能在 pageshow 事件期间使用。

我为您做了一个工作示例： http: [//jsfiddle.net/Gajotres/XJDYU/](http://jsfiddle.net/Gajotres/XJDYU/)，它是由您自己的示例制作的：

```
$(document).on('pageshow', '#index', function(){       
        require([
             // Require the basic chart class
            "dojox/charting/Chart",

            // Require the theme of our choosing
            "dojox/charting/themes/Claro",

            // Charting plugins: 

            //  We want to plot a Pie chart
            "dojox/charting/plot2d/Pie",

            // Retrieve the Legend, Tooltip, and MoveSlice classes
            "dojox/charting/action2d/Tooltip",
            "dojox/charting/action2d/MoveSlice",

            //  We want to use Markers
            "dojox/charting/plot2d/Markers",

            //  We'll use default x/y axes
            "dojox/charting/axis2d/Default",

            // Wait until the DOM is ready
            "dojo/domReady!"
        ], function(Chart, theme, Pie, Tooltip, MoveSlice) {

            // Define the data
            var chartData = [10000,9200,11811,12000,7662,13887,14200,12222,12000,10009,11288,12099];

            // Create the chart within it's "holding" node
            var chart = new Chart("chartNode");

            // Set the theme
            chart.setTheme(theme);

            // Add the only/default plot 
            chart.addPlot("default", {
                type: Pie,
                markers: true,
                radius:170
            });

            // Add axes
            chart.addAxis("x");
            chart.addAxis("y", { min: 5000, max: 30000, vertical: true, fixLower: "major", fixUpper: "major" });

            // Add the series of data
            chart.addSeries("Monthly Sales - 2010",chartData);

            // Create the tooltip
            var tip = new Tooltip(chart,"default");

            // Create the slice mover
            var mag = new MoveSlice(chart,"default");

            // Render the chart!
            chart.render();

        });
}); 
```

还要考虑一件事，dojo.js**必须**在 jQuery Mobile 初始化之后加载/初始化。

如果您想更好地了解 jQuery Mobile 页面事件，请查看我的其他**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**（我的个人博客），或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

此外，如果您对此示例有更多疑问，请随时给我发电子邮件。

# jenkins - 在SVN中添加jenkins生成的文件

> ID：15359366
> 
> 赞同：2
> 
> 时间：2013-03-12T11:00:20.033
> 
> 标签：jenkins, tortoisesvn

我的 selenium webdriver 测试脚本生成屏幕截图。我们通过 jenkins 运行脚本。每次在詹金斯中运行脚本时，我都希望这些屏幕截图在 SVN 中更新。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:16:07.417

您可能想查看[Jenkins SVN Publisher 插件](https://wiki.jenkins-ci.org/display/JENKINS/SVN+Publisher)。它应该做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:12:37.913

您可以在源代码控制块中添加图像的存储库和存储库列表，并将 shell 脚本添加到“svn add”和“svn commit”（如果您的路径上必须有命令行 svn 工具，则您使用的是 Windows，请查看[http://www.sliksvn.com/en/download](http://www.sliksvn.com/en/download)

# android - 从 Android 中的 ListView 中删除项目

> ID：15359369
> 
> 赞同：0
> 
> 时间：2013-03-12T11:00:26.060
> 
> 标签：android, android-listview

我正在尝试使用列表中的删除按钮从列表视图中删除列表项。我的应用程序必须使用删除按钮。

数据存储在 中`ArrayList<HashMap<String, String>>`，因此当我单击删除按钮时，数组列表中的数据会从该特定位置删除，然后`notifyDataSetChanged()`被调用。但在此之后，我得到了一个**索引超出范围的异常**，因为我的列表视图中只有一个项目。

请让我知道，当数据被删除时，如何阻止我的应用程序崩溃并显示一个空列表。

这是我的代码请看一下。

```
View vi = convertView;
if (convertView == null)
            vi = inflater.inflate(R.layout.notification_list, null);
        TextView name = (TextView)vi.findViewById(R.id.NotifScreenName);
        TextView message = (TextView)vi.findViewById(R.id.NotifScreenText);
        TextView time = (TextView)vi.findViewById(R.id.NotifScreenTime);
        ImageView image = (ImageView)vi.findViewById(R.id.NotifScreenPic);
        Button accept = (Button)vi.findViewById(R.id.NotifScreenAccept);
        Button decline = (Button)vi.findViewById(R.id.NotifScreenDecline);
        name.setText(data.get(position).get("name"));
        message.setText(data.get(position).get("text"));
        long dv = Long.valueOf(data.get(position).get("sentTime"))*1000;
        Date df = new java.util.Date(dv);
        String date = new SimpleDateFormat("MMM dd, hh:mm a").format(df);
        time.setText(date);
        imageLoader.DisplayImage(data.get(position).get("image"), image);
        accept.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

            }
        });
        decline.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                data.remove(position);
                notifyDataSetChanged();
            }
        }); 
```

这是 Logcat 输出：

```
03-12 11:04:32.784: E/AndroidRuntime(1150): FATAL EXCEPTION: main
03-12 11:04:32.784: E/AndroidRuntime(1150): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-12 11:04:32.784: E/AndroidRuntime(1150):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at java.util.ArrayList.get(ArrayList.java:304)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at com.pnf.myevent.ListAdapter.getView(ListAdapter.java:95)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.AbsListView.obtainView(AbsListView.java:2143)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.ListView.makeAndAddView(ListView.java:1831)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.ListView.fillSpecific(ListView.java:1320)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.ListView.layoutChildren(ListView.java:1630)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.AbsListView.onLayout(AbsListView.java:1994)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:985)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:985)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:985)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.View.layout(View.java:14003)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewGroup.layout(ViewGroup.java:4375)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.Choreographer.doFrame(Choreographer.java:532)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.os.Handler.handleCallback(Handler.java:725)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.os.Looper.loop(Looper.java:137)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at java.lang.reflect.Method.invokeNative(Native Method)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at java.lang.reflect.Method.invoke(Method.java:511)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-12 11:04:32.784: E/AndroidRuntime(1150):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:59:55.540

请尝试此代码

```
data.remove(position-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:15:52.793

`data.remove(position)`在调用拒绝变量的 onClickListener之前检查数据是否为空。

编辑：它应该是 data.get(position) 您应该在创建视图时进行检查的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:06:45.277

我做了类似的事情，但使用了 onContextItemSelected。

```
public boolean onContextItemSelected(MenuItem item) {
    int itemId = item.getItemId();
    AdapterContextMenuInfo aInfo = (AdapterContextMenuInfo) item.getMenuInfo();
    planetsList.remove(aInfo.position)
    aAdpt.notifyDataSetChanged();
    return true;
} 
```

其中planetList 是一个ArrayList，aAdpt 是我的自定义适配器。[您可以在此处](http://www.survivingwithandroid.com/2012/10/android-listviewarrayadapter-and.html)和[此处](http://www.survivingwithandroid.com/2012/09/listviewpart-1.html)获取有关我的博客的更多信息。希望这对您有所帮助。

# r - 如何在 R 中执行 p.adjust？

> ID：15359372
> 
> 赞同：1
> 
> 时间：2013-03-12T11:00:34.000
> 
> 标签：r

我有一个带有`p.value`s 的数据框，我想调整`p.values`. 我用了这个逗号：

```
Padjust = p.adjust(pvalues, "fdr") 
```

`pvalues`是我的缺少值的数据框，`fdr`也是我希望使用的方法。但是，我收到以下错误：

```
Error in p.adjust(pvalues, "fdr") : 
 (list) object cannot be coerced to type 'double 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:04:04.227

的第一个参数`p.adjust`应该是一个向量，见

```
?p.adjust 
```

在您的特定情况下，您需要从数据框中选择值并将它们传递给函数，例如：

```
p.adjust(pvalues$p.values, "fdr") 
```

如果列名是`p.values`. 然后，您可以通过以下方式将调整后的 p 值添加到数据框中：

```
pvalues$adjust = p.adjust(pvalues$p.values, "fdr") 
```

# javascript - 如何将javascript全局变量传递给requirejs，ruby on rails

> ID：15359379
> 
> 赞同：0
> 
> 时间：2013-03-12T11:01:00.927
> 
> 标签：javascript, ruby-on-rails-3, requirejs, recurly

我在一个项目中实施了定期付款，该项目正在使用 requirejs，并且有 requirejs 2 个 javascript 文件，1 个名为“front.js.coffee”用于面向客户的站点，第二个名为“admin.js.coffee”用于 CMS。我创建了一个全局变量作为渲染到网站标题中的部分变量，然后我需要 front.js 文件来提取此值以构建 Recurly 交易表单。我必须这样做，因为我需要服务器生成签名，因此必须通过“*html.erb”文件。

所以这是共享视图文件中的全局变量：

```
<%= javascript_tag do %>
   signature_value: '<%= j RECURLY_SIGNATURE %>'
<% end %> 
```

所以这里是front.js文件里面的JS：

```
Recurly.config
 subdomain: 'iewebinar'
 currency: 'USD'
 country: 'US'
Recurly.buildTransactionForm
 target: '#recurly-transaction'
 successURL: '/webinars/thank_you.html'
 signature: 'signature_value' 
```

我是 Ruby on Rails 开发的新手，我不完全理解 Requirejs，所以简单的说明会很棒:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:05:43.393

在需要 js 文件之前，您可以添加

```
<script>
  window.signature_value = '<%= j RECURLY_SIGNATURE %>'
</script> 
```

然后只需`window.signature_value`在您的配置中使用。

```
successURL: '/webinars/thank_you.html'
signature: window.signature_value 
```

另一种选择是将文件名更改为`admin.js.coffee.erb`. 这将使您可以访问 ruby​​ 函数，因此您~~**可以**~~访问常量~~（对不起，我不确定）。~~

```
successURL: '/webinars/thank_you.html'
signature: '<%= RECURLY_SIGNATURE %>' 
```

# javascript - 从 vb.net 中的 vb 窗口窗体调用 html javascript 函数

> ID：15359382
> 
> 赞同：1
> 
> 时间：2013-03-12T11:01:09.060
> 
> 标签：javascript, html, vb.net

我有一个带有 javascript 函数的 html 文件，称为`JsInHtml()`

我想`JsInHtml()`从一个调用的 VB 窗口窗体调用`form1.vb`而不使用 Web 浏览器控件。

谁能解释一下如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:03:37.147

如果您想在单击 ASP.NET 按钮控件时调用 JavaScript 函数，请使用 Button 控件的 OnClientClick 属性 ( [http://msdn.microsoft.com/en-us/library/system.web.ui。 webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)）。

我提供的网页上有一个示例，展示了如何从 ASP.NET 调用名为 Navigate 的 JavaScript 函数。

如果这没有帮助，那么请发布更多详细信息，解释何时应该调用 JavaScript 函数，我会进一步提供帮助。

# perl - 如果没有提供选项，运行子程序的最佳方式是什么？Perl getOpt

> ID：15359386
> 
> 赞同：1
> 
> 时间：2013-03-12T11:01:13.517
> 
> 标签：perl, options

例如，

如果我跑

```
./program -i 
```

做亚甲

如果我跑

```
./program 
```

做subB

我的代码目前看起来像这样

```
subB if(!$opt_a && !$opt_b && !opt_b); 
```

但这看起来很乱。如果没有提供选项而不是检查每个单独的选项，是否有让它运行 subB ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:08:57.980

您可以将选项存储在散列中并检查散列的计算结果是真还是假：

```
use strict;
use warnings;

use Getopt::Long;

my %options;
GetOptions( \%options, 'opt_a=i', 'opt_b', 'opt_c' );

if ( %options ) {

    # Season with option validation ..
    # Usage : $options{opt_a} instead of $opt_a

    subA();
}

else {

    subB();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:15:20.423

当工具仅对一个（或特定组合）选项进行操作时，我有时会使用删除哈希习语，以便我可以让用户知道所有内容是否按预期使用。更新：只需用您的子调用替换打印语句。

```
use strictures;
use Getopt::Long;

GetOptions( \my %opt, "int=i", "str=s", "bool" );

print "OPTIONS, I HAZ DEM\n" if %opt;

if ( delete $opt{int} )
{
    print "* I HAZ A INT\n";
}
elsif ( delete $opt{str} )
{
    print "* I HAZ STRING\n";
}
elsif ( delete $opt{bool} )
{
    print "* I HAZ A TRUTH\n";
}
else
{
    print "I CAN HAZ OPTION?\n";
}

print "DO NOT WANT: ", join(", ", keys %opt), $/
    if %opt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:53:15.067

无论如何，我会检查每个单独的选项。对于必须在三年内修改程序的人来说，这让事情变得更加清晰......甚至可能是你。

咬紧牙关，完整编码。它很乏味，但从长远来看可以节省时间。

```
 if ($opt_a) 
  {
    # do whatever
  }
elsif ($opt_b)      
  {
    # do whatever
  }
else
  {
    # default behaviour if no arguments passed from command line
  } 
```

# java - 使用 java poi 版本 2 读取 csv 文件

> ID：15359392
> 
> 赞同：0
> 
> 时间：2013-03-12T11:01:34.240
> 
> 标签：java, csv

我正在使用 java 库 poi 版本 2 读取 csv 文件，但出现错误

```
"Invalid header signature; read 1688935826934608, expected -2226271756974174256" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:12:52.393

我得到了修复。这是简单的逗号分隔缓冲读取。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:07:25.083

此错误的原因之一：您必须将文件另存为，`.csv`而不是`.xls`在读取`CSV`文件时

# ios - 在情节提要中调整弹出框控制器的大小

> ID：15359393
> 
> 赞同：1
> 
> 时间：2013-03-12T11:01:36.787
> 
> 标签：ios, storyboard, uipopovercontroller

我有 2 个视图控制器，第二个视图控制器中有一个表格视图，我为此目的使用了故事板，并且为了从第一个视图控制器到第二个视图控制器的转换，我正在使用弹出框控制器。问题是因为我在第二个视图控制器中使用表视图控制器，当我单击在索引路径处选择行时，会出现一个视图，但与之前的弹出框大小一起出现。我被困在当我点击单元格时如何动态调整大小，任何可能的帮助将不胜感激？

ps-请注意，我没有使用任何 IBOUlet 来弹出控制器，也没有通过代码创建它。Earloer 我已经使用 setcontentsize 来调整弹出框的大小，但使用故事板我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:35:21.717

以下是您可以尝试的方法

1.  创建将放置在弹出窗口中的 ViewController，选择它并导航到 Utilities 窗格 > Attributes Inspector > Set Size to Freeform

2.  选择popover segue并导航到Utilities面板> Attributes Inspector > Set Identifier to "yourIdentifier"

**第一次尝试**

通过选择 ViewController 的 View 并导航到 Utilities 窗格->Size Inspector 来更改 ViewController 的大小 [**看看你是否可以获得预期的大小**]

**第二次尝试**- 在您调用 popOverViewController 的视图中尝试此操作

```
 UIPopoverController *popover; // define this in .h as ivar

    - (IBAction)buttonPressed:(id)sender 
    {
         UIButton *anchor = (UIButton*)sender;
         UIViewController *viewControllerForPopover = [self.storyboard instantiateViewControllerWithIdentifier:@"yourIdentifier"];    
         popover = [[UIPopoverController alloc] 
               initWithContentViewController:viewControllerForPopover];
         [popover setPopoverContentSize:CGSizeMake(width, height)]; // here see if you can get expected size
         [popover presentPopoverFromRect:anchor.frame 
                                  inView:anchor.superview 
                permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    } 
```

**第三次尝试**

Please look at Trick by krasnyk (accepted answer) for [Forcing Popover Size](https://stackoverflow.com/questions/2752394/popover-with-embedded-navigation-controller-doesnt-respect-size-on-back-nav)

# java - 为什么proceed()会报错

> ID：15359395
> 
> 赞同：4
> 
> 时间：2013-03-12T11:01:46.613
> 
> 标签：java, eclipse, aspectj

我有以下方面：

```
aspect NullifyNoResultException {

    Object around(..) : execution(public Object com.example.*.*(..) {
        try { return proceed();    
            } catch (NoResultException e) { 
                return null;
            }                  
        }
    }
} 
```

由于某种原因，继续调用在 Eclipse 中出现错误：

> 未定义 NullifyNoResultException 类型的方法 continue()

当我在 Maven 中构建时 ->`mvn install`我没有收到任何错误。但这没有任何意义，因为我仍然缺少导入，`NoResultException`所以 maven 应该抱怨这一点。
相反，它只是构建而不抱怨。

如何让 Eclipse 停止抱怨`proceed()`？
以及如何构建这个方面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:16:51.787

我在您的代码示例中发现了一些语法错误。当我更正它们时，以下示例运行良好。顺便说一句，我定义了自己的`NoResultException`，因为我没有安装 Java EE。

```
package javax.persistence;

public class NoResultException extends RuntimeException {
    private static final long serialVersionUID = 1L;
} 
```

```
package com.example.stackoverflow;

import javax.persistence.NoResultException;

public class Application {
    public static void main(String[] args) {
        Application app = new Application();
        System.out.println(app.valueReturningMethod(1, "two"));
        System.out.println(app.exceptionThrowingMethod(1, "two"));
    }

    public Object valueReturningMethod(int i, String string) {
        return "normal result";
    }

    public Object exceptionThrowingMethod(int i, String string) {
        throw new NoResultException();
    }
} 
```

```
package com.example.stackoverflow;

import javax.persistence.NoResultException;

aspect NullifyNoResultException {
    Object around() : execution(public Object com.example..*(..)) {
        try {
            return proceed();
        } catch (NoResultException e) {
            return null;
        }
    }
} 
```

输出如预期：

```
normal result
null 
```

# android - Monogame 项目不会编译发布版本

> ID：15359396
> 
> 赞同：1
> 
> 时间：2013-03-12T11:01:58.237
> 
> 标签：android, xamarin.android, monogame

我有一个我创建的 MonoGame android 项目。一切正常，调试仍在构建，但是当我尝试构建游戏的发布版本时，我收到此错误：

```
Error 1 Could not load file or assembly 'Mono.Android, Version=0.0.0.0, Culture=neutral,
PublicKeyToken=c4c4237547e4b6cd' or one of its dependencies. Strong name validation failed.
(Exception from HRESULT: 0x8013141A) C:\Users\Dominick\documents\visual studio 2010\Projects\AndroidPong\AndroidPong\SGEN
AndroidPong 
```

有谁知道如何解决这一问题？我环顾四周，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:03:14.080

There are many SO posts describing the same problem. Check out the following links:

*   [Add Assembly to GAC](https://stackoverflow.com/a/14197563/1108036)
*   [Error building a Release version](https://stackoverflow.com/q/5792193/1108036)

# sql - HIVE 检查表 1 中的数据，而表 2 中没有这些数据

> ID：15359398
> 
> 赞同：11
> 
> 时间：2013-03-12T11:02:07.357
> 
> 标签：sql, hive

我正在寻找创建一个 HIVE SQL 查询来查找表 1 中不存在于表 2 中的所有值。我知道我需要使用连接但是我不知道如何在这种情况下实现它......

谢谢，詹姆斯

例如：

```
Table1

url                  number
xe.com               5
google.com           2
ebay.co.uk           6

Table2

url                  visits
facebook.com         8
google.com           4
ebay.co.uk           15 
```

因此，例如，查询应返回 Table1 中存在于 Table2 中的所有值，即

```
url                  number         visits
google.com           2              4
ebay.co.uk           6              15 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T12:54:14.147

LEFT JOIN 将返回所有行，`Table1`无论是否存在匹配项。在不匹配的情况下，来自的列`Table2`将具有值`NULL`- 这些是您想要的行：

```
SELECT Table1.url, Table1.number
FROM Table1
LEFT OUTER JOIN Table2 ON Table1.url = Table2.url
WHERE Table2.url IS NULL 
```

# php - Symfony2 - 使用 HTML2PDF 生成 PDF

> ID：15359399
> 
> 赞同：1
> 
> 时间：2013-03-12T11:02:12.540
> 
> 标签：php, symfony, html2pdf

我是 Symfony2 的新用户，我想生成一个 PDF，但我没有成功使用 HTML2PDF 创建正确的[PDF](http://html2pdf.fr/en/default)。事实上，我有一个 pdf，其中 1 页包含这样的垃圾字符串：“HTTP/1.0 200 OK Cache-Control: no-cache Date: Mon, 11 Mar 2013 19:37:29 GMT”我还有一些额外的行-休息...

我想知道我生成pdf的方法是否正确，即返回一个使用HTML2PDF生成pdf的php模板。

这是我的控制器代码：

```
public function exec_cuAction($id)
{
//CU 4 : imprimer toutes les factures
switch ($id){
    case 2: 
        $infos = null;
        $html= $this->render('PeriscopeAdminBundle:Admin:FactureVide.html.twig',array('infos'=> $infos)); //les content pour le pdf
        $name = 'factureVide.pdf';                      
        return $this->render('PeriscopeAdminBundle:Admin:afficher_factures_pdf.html.php', array('name'=>$name, 'html'=>$html));
        break;
} 
```

这是我的 PDF 内容：

```
<page orientation="portrait" format="A4" style="font-size: 18px">
   <div id="wrapper">
            <div id="left_informations">

                <br><br><br>

                <div id="fields">
                    <div id="invoice_id">
                        <span>Facture n____ </span>
                        <span>____________</span>
                        <span>Date : ___/___/______</span>
                    </div><br>
                    <div>Nom de l'enfant :</div><br>
                    <div>Primaire/Maternelle : </div><br>
                    <div>Date de naissance : </div><br>
                    <div>Classe : </div><br>
                    <div>Enseignant : </div><br>
                    <div>Taux horaire :</div><br>
                    <div>Heures matin : </div><br>
                    <div>Heures soir : </div><br>
                    <div>Total heures : </div>
                    <h4>Net  payer du mois : </h4>
                    <br>
                    <div>Votre retard  la fin du mois precédent : </div><br>
                    <h4>RETARD : </h4>
                    <div>Votre situation nette : </div>
                    <br>
                    <div> Association loi 1901, SIRET 39217524600017    Code APE 913 E <br>
                          Exonr de TVA Article 261 du CGI
                    </div>
                    <div><i>Partie  conserver</i></div>
                    <div style="width:610px;">---------------------------------------------------------------------------------------------------------</div>
                    <br>
                    <div id="invoice_id">
                        <span>Facture n____ </span>
                        <span>____________</span>
                        <span>Date: __/__/_____</span>
                    </div>
                    <div>Nom de l'enfant :</div>
                    <br>
                    <div>Votre situation nette : </div>
                    <br>
                    <div>Payer en espce la somme de :</div>
                    <br>
                    <div>Payer par chque  l'ordre de Priscope n</div>
                    <div style="margin-left:100px;">Banque : </div>
                    <div style="margin-left:100px;">Somme : </div>
                    <br><br>
                    <div style="margin-left:100px;"> 
                        <span><u>Date:</u> ___/___/______</span>
                        <span><u>Signature :</u> </span>
                    </div>
                    <br><br><br>

                </div>
            </div>

            <div id="right_ads">
            </div>

   </div> 
</page> 
```

还有我的模板，我的控制器的返回：

```
<?php       
    ob_start();
    try
    {
        $html2pdf = new \Html2Pdf_Html2Pdf('P', 'A4', 'fr');
        $html2pdf->pdf->SetDisplayMode('fullpage');
            $html2pdf->writeHTML($html);
        $html2pdf->Output($name);
            exit;
    }
    catch(HTML2PDF_exception $e) {
        echo $e;
        exit;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:01:28.917

渲染助手方法返回一个[响应](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html)对象，这就是您的 PDF 包含 HTTP 标头的原因。要仅获取响应的内容（您的 HTML），请调用[getContent()](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Response.html#method_getContent)方法，例如

```
return $this->render('PeriscopeAdminBundle:Admin:afficher_factures_pdf.html.php', 
                        array('name'=>$name, 'html'=>$html->getContent())
                    ); 
```

# php - 发布用 img 隐藏的 PHP 脚本

> ID：15359401
> 
> 赞同：1
> 
> 时间：2013-03-12T11:02:32.143
> 
> 标签：php, jquery, html, ajax

我有一个带有图像的页面，图像上有一个收藏图像的按钮。如果他们单击该按钮，我将有一个 PHP 脚本将图像添加到他们的收藏夹中。

我想在不使用 PHP 脚本的页面的情况下执行 PHP 代码。

我的html是这样的：

```
 <div id="image">
    <form action="favoriet.php" method="post">
            <input type="hidden" name="aid" value="<?php echo $subimgid?>">
            <input type="image" src="/media/img/icons/twitter.png" alt="Submit button">
            </form>
                </div> 
```

所以我将 subimgid 发布到 favouriet.php 并在 favouriet.php 中运行脚本，该脚本使用发布的值辅助会话用户 ID 将其插入数据库。一切正常，但我不希望在屏幕中打开页面 favouriet.php。

我认为需要 jQuery/ajax，不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:08:50.180

我要做的是向 img 添加一个类`favimg`，然后添加另一个名为的属性`data-id`，该属性包含 id。然后你可以直接在图像上使用 jQuery 而不需要表单。

`favoriet.php`下面的代码将使用存储在属性中的 ID`data-id`提交一个 POST 请求

```
<img class='favimg' data-id="<?php echo $subimgid?>" src="/media/img/icons/twitter.png" alt="Submit button">

<script>
$('.favimg').click(function() {
  $.post('favoriet.php', { aid: $(this).attr('data-id')});
});
</script> 
```

附带说明：替代文字应该说明图像的一些内容。因此，如果图像是 twitter 徽标，我会使用“twitter”作为替代文本。这将为搜索引擎创建更好的索引。

`submit button`如果页面上只有一个图像并且其目标是提交完整的表单，则alt of很有用。您要提交的是“我点击了 twitter 按钮”，所以我的用户必须知道它包含 twitter 徽标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:41:05.520

只是为了添加一个避免需要发布或 AJAX 的答案，以表明这可以在没有任何一个的情况下完成。

### 图像标签通信

您可以使用图像标签与服务器通信：

```
<div class="image">
  <img src="image/to/be/favourited.jpg" data-aid="123" />
  <a href="favoriet-fallback.php?aid=123">
    <img src="/media/img/icons/twitter.png" />
  </a>
</div>

<script>
  jQuery(function(){
    jQuery('.image > a').click(function(){
      var
        img = $(this).siblings('img'),
        src = img.attr('src'),
        aid = img.attr('data-aid'),
        esc = window.encodeURIComponent ? encodeURIComponent : escape
      ;
      /// here you have the choice of using the image to be favourited or
      /// the twitter icon. I chose the favourited image for this example.
      img.attr('src', 'favoriet.php?src=' + esc(src) + '&aid=' + esc(aid) );
      return false;
    });
  });
</script> 
```

使用此代码，您需要进行修改`favoriet.php`，以便它可以`src`使用简单的`readfile`方法返回指定的图像，并且创建一个`favoriet-fallback.php`虽然不是 100% 必要的，但它会很好。

### 脚本/图像标签注入

您还可以注入新的脚本或图像标签来执行您的请求。

```
<script>
  jQuery(function(){
    jQuery('.image > a').click(function(){
      var
        img = $(this).siblings('img'),
        src = img.attr('src'),
        aid = img.attr('data-aid'),
        esc = window.encodeURIComponent ? encodeURIComponent : escape
      ;
      /// you could build a script tag or a pixel image here
      var script = document.createElement('script');
          script.src = 'favoriet.php?src=' + esc(src) + '&aid=' + esc(aid);
      jQuery('body').append(script);
      return false;
    });
  });
</script> 
```

这个例子显然意味着`favoriet.php`应该返回可以与现有页面交互的成熟的 JavaScript。

以上只是一些使用 GET 请求代替 POST 的愚蠢示例——这确实有它的好处，也有它自己的缺点。这些示例都不需要 jQuery，我只是为了速度和清晰度而使用它。

Hugo 的设计要优雅得多，但我只提到这些只是为了证明 AJAX 不是唯一的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:13:21.017

是的，你是对的，Ajax 是必需的。Jquery 是 javascript 的框架。

所以回到你的问题。

这是您需要做的。将函数绑定到图像按钮的 onclick="" （无论您使用过什么），并将图像的 id 作为参数传递。

```
onclick="add_fav('2')" 
```

当用户单击它时，您的 add_fav 函数会很有趣，并且图像的 id 将作为参数发送。在函数内部将此值发布到您的收藏夹.php。

```
function add_fav(id){
    var data={'image_id':id}
    var url="favorite.php";

    $.ajax({type:"POST",url,data,function(response){ // handle the response
    }});

} 
```

您可以使用以下方法检索 favouriete.php 中的值

```
$id=$_POST['image_id']; 
```

然后将其保存在数据库中并回显成功消息。

# dynamics-crm-2011 - CRM 中的数据库无缘无故变得庞大

> ID：15359411
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:02:56.063
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

我们接管了一位客户并检查了他们的数据库。它几乎已满，并且以每天 50 MB 的速度增长。它没有明显的理由这样做，我们在其中找不到任何巨大的东西。解决方案是在线的，所以我们不能摆弄数据库。

我们已经检查了通常的嫌疑人。

*   电子邮件、附件、笔记。
*   许多实体的自定义字段。
*   自定义实体。
*   系统作业和循环工作流程。
*   审计系统范围。
*   一堆我们能想到的其他东西。

他们与 Visma 进行了集成，可以将 PDF 生成（或应该生成）到系统中。但是，我们也找不到那些。

我们已经运行了许多报告并提出了深蹲。

关于可能导致它的任何建议？或者至少还有其他地方可以看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:29:41.537

不知道您的客户是否可以处理此问题……但也许在下班时间，您可以用虚拟数据完全填满数据库，并查看在尝试将数据添加到数据库时哪些隐藏进程正在中断。

我曾经在 Big Box Chain 工作，在感恩节期间（一年中不是遇到麻烦的好时机），我们的网站运行非常缓慢。每个人都指责网络服务器，但服务器上的 CPU 仅占 25%。经理们争先恐后地向农场添加更多的网络服务器。相反，我建议我们删除一些，看看网络服务器发生了什么。正如我所预料的那样，当我们移除两台服务器时，另一台的负载会上升到正确的数学百分比。它最终成为一个网络设置，其中最大数据包大小设置为非常小的数字。

有时最好是强迫问题，而不是试图避免它......

# css - 防止需要：在内容换行之后

> ID：15359412
> 
> 赞同：0
> 
> 时间：2013-03-12T11:02:59.827
> 
> 标签：css

我们目前在表单上使用 label.required:after 来指示必填字段，如下所示：

```
<tr>
    <td><label for="loginName" tag="" class="required">Login name:</label></td>
    <td><input type="text" name="loginName" id="loginName" value="" maxlength="64" required="required" /></td>
    <td></td>
</tr> 
```

这是使用以下 CSS 标记的：

```
label.required:after {
    content:" *";
} 
```

随着表格大小的改变，它会将一些星号推到自己的新行上。有没有办法阻止它这样做（除非标签本身换到第二行）。

如果可以的话，宁愿只修改 label.required 类，但如果它们很好地解决了问题，则可以使用其他方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:04:57.270

在 * 之前放置一个不间断空格，而不是普通空格。由于您使用的是 CSS，因此您需要使用转义序列`\00a0`而不是 HTML 实体`&nbsp;`：

```
label.required:after {
    content:"\00a0*";
} 
```

# validation - FactoryGirl 似乎没有填写字段

> ID：15359413
> 
> 赞同：1
> 
> 时间：2013-03-12T11:03:03.397
> 
> 标签：validation, factory-bot, sti

我使用单表继承，其中模型生产者派生自模型用户，而模型用户又派生自联系。联系人和用户有一些验证：

```
 validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence:   true, 
                    format:     { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false } 
```

对于联系人和

```
 validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true 
```

在用户模型中。

在我的 factory.rb 中，我让 FactoryGirl 构建了一系列“生产者”记录，如下所示：

```
factory :producer do
  sequence(:name)  { |n| "Producer #{n}" }
  sequence(:email) { |n| "producer_#{n}@example.com"}   
  password "foobar"
  password_confirmation "foobar"
end 
```

然后在我做的规范中

```
 let(:producer) { FactoryGirl.create(:producer) } 
```

这似乎没有通过验证：

```
 1) Client
     Failure/Error: let(:producer) { FactoryGirl.create(:producer) }
     ActiveRecord::RecordInvalid:
       Validation failed: Name can't be blank, Email can't be blank,  
       Email is invalid, Password digest can't blank, Password is too short  
       (minimum is 6 characters), Password confirmation can't be blank 
```

FactoryGirl中没有分配字段吗？

# nginx - nginx - 如何阻止自定义标头

> ID：15359423
> 
> 赞同：0
> 
> 时间：2013-03-12T11:03:34.817
> 
> 标签：nginx, http-headers, security

我在`nginx`本地运行，与我的本地测试一起运行`SOAP server`。我正在使用`SoapUI`通过 nginx 向该服务器发送肥皂请求，例如`SoapUI -> Nginx:80 -> SoapSever:9338`。

我的目标是去除非标准标题，以加强安全性。我想保留`content-type`,`accept`等，但我想去除`myHeader1`, 或`abc=xyz`.

作为测试的一部分，我正在发送自定义标头，我可以看到它们到达我在远端的服务器，因此 nginx 没有进行任何过滤。我尝试`ignore_invalid_headers on;`在我的`/etc/nginx/nginx.conf`文件中使用`http {}`，但我认为它的含义与我认为的不同，因为它不会去除任何标题。

我可以从文档中看到您可以添加标头或更改特定标头，但是我可以去掉所有非标准/自定义标头，还是可以指定我只想接受的标头列表？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:21:02.487

该`ignore_invalid_headers`指令仅忽略格式错误的标头。
要清除某些标题，您可以查看`more_clear_headers`指令。

有关详细信息，请参阅[http://wiki.nginx.org/NginxHttpHeadersMoreModule#more_clear_headers 。](http://wiki.nginx.org/NginxHttpHeadersMoreModule#more_clear_headers)

**它不是标准 nginx 发行版的一部分，因此您必须手动安装它。**

*例子*

```
more_clear_headers 'X-*'; 
```

将清除所有以`X-`

# java - HttpURLConnection 产生大量进程？

> ID：15359425
> 
> 赞同：4
> 
> 时间：2013-03-12T11:03:35.443
> 
> 标签：java, http

我有一些相当基本的代码来从给定的 URL 获取 HTTP 状态代码：

```
URL url = new URL(args[0]);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("GET");
connection.setConnectTimeout(10000);
connection.setReadTimeout(10000);
connection.setInstanceFollowRedirects(true);

int code = connection.getResponseCode();
connection.disconnect();

System.out.print(code);
System.exit(0); 
```

显然，一切都在 try/catch 块中，但他们所做的只是退出并出现错误。该代码似乎有效，因此我针对它运行了一个 URL 列表。我监控了进程并注意到在一些 URL 上，为同一个 URL 生成了大约 10 个 Java 实例。

换句话说，我会运行：

```
java -jar HTTP.jar {URL} 
```

当我运行 htop 时，看到该命令大约 10 次。它们看起来像常规进程，而不是线程，并且在 htop 中我打开了“隐藏用户态线程”。到底是怎么回事？是发送多个请求还是仅发送一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:47:55.053

您无意中多次运行该命令。如果您未能`&`在 shell 命令中的 URL 中转义，则可能会发生这种情况。Bash 将该`&`字符解释为“在后台运行此命令”，并且您返回 shell 提示符，但您的进程仍在运行。

将 URL 放在单引号中，您将不会遇到问题。

# actionscript-3 - 错误 ActionScript3：找不到类型或不是编译时常量：CheckBox

> ID：15359431
> 
> 赞同：1
> 
> 时间：2013-03-12T11:03:51.883
> 
> 标签：actionscript-3, intellij-idea

好吧，我在尝试使用其他类的某些组件时遇到了一些麻烦。！

我有一个类型为 CheckBox 的数组。此类 CheckBox 来自我已导入到我的项目中的另一个模块项目。我第一次执行时它工作得很好，但现在，它不再工作了......

`//class scope`

 `private var _combinationArray:Array.CheckBox;

//constructor scope

_combinationArray = new Array.CheckBox();
_combinationArray[0] = _checkBoxPvrtc;
_combinationArray[1] = _checkBoxEtc1;
_combinationArray[2] = _checkBoxDxt15;`  `当我执行我的程序时，我收到此错误：找不到类型或不是编译时常量：CheckBox。正是这条线的错误点 `private var _combinationArray:Array.CheckBox;`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:46:03.390

`private var _combinationArray:Vector.<CheckBox>;`

`_combinationArray = new Vector.<CheckBox>();`

应该做。只是 Array 是严格无类型的，而 Vector 是严格类型的。`

# c# - 可枚举连接 - 连接两个列表

> ID：15359437
> 
> 赞同：0
> 
> 时间：2013-03-12T11:04:01.610
> 
> 标签：c#

我有两个包含以下数据的列表（列表）：

**清单一**

```
James
Jack
Laura
Harry 
```

**清单二**

```
Jeffery
Peters
Smith 
```

是否可以使用 Enumerable Join 来执行以下操作：

```
James Jeffery
James Peters
James Smith
Jack Jeffery
Jack Peters
Jack Smith
Laura Jeffery
Laura Peters
Laura Smith
Harry Jeffery
Harry Peters
Harry Smith
Harry Jeffery 
```

这是什么类型的Join？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:06:56.843

这是一个交叉连接：

```
List<string> textLines1 = new List<string>() {
    "Kames", "Jack", "Laura", "Harry"
};
List<string> textLines2 = new List<string>() {
    "Jeffery", "Peters", "Smith"
};

var query = from t1 in textLines1
            from t2 in textLines2
            select string.Format("{0} {1}", t1, t2);

var results = query.ToList(); 
```

返回您所期望的。

也可以使用基于方法的查询来完成：

```
var query2 = textLines1.SelectMany(t1 => textLines2, (t1, t2) => string.Format("{0} {1}", t1, t2));

var results2 = query2.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:06:37.780

在 Linq 中，它将是：

```
List<string> TabOne = new List<string>() { "Kames", "Jack", "Laura", "Harry" };
List<string> TabTwo = new List<string>() { "Jeffery", "Peters", "Smith" }; 

var combo = from p in TabOne
        from c in TabTwo
        select new
        {
            Name = p,
            SurName = c
        }; 
```

它被称为交叉连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:07:31.680

```
var l1 = new []{ "James", "Jack", "Laura", "Harry" };
var l2 = new []{ "Jeffery", "Peters", "Smith" };

var result = from i1 in l1
             from i2 in l2
             select i1 + " " + i2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:10:16.933

这也被称为`Cartesian Product`Eric 有[一篇关于它的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T11:11:41.767

您可以尝试这种方式：

```
var result = list1.SelectMany(i1 => list2.Select(i2 => i1 + " " + i2)); 
```

例子 ：

```
class Program
{
    public static void Main()
    {
        string[] list1 = new[] { "James", "Jack", "Laura", "Harry" };
        string[] list2 = new[] { "Jeffery", "Peters", "Smith" };
        var result = list1.SelectMany(i1 => list2.Select(i2 => i1 + " " + i2));

        foreach (string s in result)
        {
            Console.WriteLine(s);
        }
    }
} 
```

应用输出：

```
James Jeffery
James Peters
James Smith
Jack Jeffery
Jack Peters
Jack Smith
Laura Jeffery
Laura Peters
Laura Smith
Harry Jeffery
Harry Peters
Harry Smith 
```

# compilation - 什么触发了重新编译linux内核模块

> ID：15359439
> 
> 赞同：2
> 
> 时间：2013-03-12T11:04:04.330
> 
> 标签：compilation, linux-kernel, dependencies, kernel-module

Linux 内核的模块如此“脆弱”并且需要经常重新编译，这让我有点惊讶。在两台不同的机器（例如不同版本的 gcc）上使用相同的源代码树会产生不与内核（机器 B）一起工作的模块（机器 A）。

如果我不想要臭名昭著的`no symbol version for module_layout`错误消息，添加虚拟系统调用显然也需要重新编译。

更令我惊讶的是，在 kernel/ 中添加了一个仅 .c 文件，它不涉及任何 ABI（即一个独立的函数，它不会导出、使用或更新任何内部结构）。

在那个新的 .c 文件中添加一个虚拟文本字符串让所有模块都保持不变。

那么这里的规则和理由到底是什么？（我专注于 x86，32 位架构，如果重要的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:28:48.957

您似乎过于关注重建内核和（可加载）模块的编译方面，而忘记了链接。我怀疑当您声明需要“重新编译”时您可能夸大了。

> 更令我惊讶的是，在 kernel/ 中添加了一个仅 .c 文件，它不涉及任何 ABI（即一个独立的函数，它不会导出、使用或更新任何内部结构）

当您将*.c*文件（又名源模块）添加到内核时，新编译的目标文件将需要使用链接器构建新的内核映像。由于没有评估哪些全局内核符号移动或未移动，因此所有（可加载）模块都必须使用新符号映射重新构建（实际上只是重新链接）。不需要对所有内核模块进行“重新编译”；只需使用新的内核符号映射将*.o*目标文件重新构建到可加载模块中。

为确保（可加载）模块使用匹配的内核和符号映射执行，在加载内核模块时验证版本控制和构建信息。您所说的“脆弱”实际上是一种安全措施，用于确保在特权模式下执行的代码的完整性。

# php - ZF2 - 前进后停止执行

> ID：15359444
> 
> 赞同：1
> 
> 时间：2013-03-12T11:04:11.930
> 
> 标签：php, zend-framework2

如果验证后有任何错误，我转发回输入控制器，如果没有错误，继续成功控制器。

在 ZF1 中，我能够做到这一点，因为 preDispatch() 中的转发不会执行如下调用的操作：

```
public function preDispatch()
{
    parent::preDispatch();
    if ($action == 'success' && $this->validate() === false) {
        $this->_forward('input');
    }
}

public function successAction()
{
}

public function inputAction()
{
} 
```

在 ZF2 中，如果有任何错误，我会尝试在分派和转发时附加验证，但 ZF2 会继续执行，因此会调用 inputAction 和 successAction。

```
$events->attach('dispatch', function (MvcEvent $e) use ($controller) {
    $result = $this->validate($controller);
    if ($result->isValid() === false) {
        $callingClassName = get_class($this);
        $test = $controller->forward()->dispatch($callingClassName, array('action' => 'input'));
    }
} 
```

有什么解决方案吗？我只想在前进后停止执行......

我知道在 successAction 中返回 ViewModel 不再读取，但我想让它普遍可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:56:51.780

我猜你正在寻找

```
$e->stopPropagation(); 
```

这会阻止进一步的事件传播。

# c - 从 HTML 文件中提取纯文本

> ID：15359449
> 
> 赞同：1
> 
> 时间：2013-03-12T11:04:30.010
> 
> 标签：c, parsing

美好的一天，我希望你能帮助我。我必须编写这段代码（用 C 语言）来下载网站的页面源并将其保存到 html 文件中（我已经这样做了）。下一部分是使用保存的 html 文件从该站点提取文本。

我脑子里有这个算法步骤：

假设我们有一个 html 文件，其中包含：

<这里的东西><开始><文本>你好<文本>再见！<结束>

1.  找到“”字符串，跳过“”字符串。（这可以用 strstr() 来实现）
2.  将指针设置为“”的第一个“>”。（使用 strchr()??）
3.  检查字符串中的下一个字符是否为“<”：（忽略空格） a.) 如果是，则将指针设置为下一个“>”。重复检查 (3)。b.) 如果否，则获取字符串直到下一个“<”。然后将其存储（附加）到一个大字符串中。
4.  最后，我想将字符串保存到 file.txt。（fwite？或 fopen() 中的选项 a+）。

从逻辑上讲，这是正确的，对吧？作为编程的初学者，我总是会出错。我写了一个代码，但它总是导致分段错误。

请帮助我/告诉我我的代码有什么问题：Dummy - 包含 html 代码的文件

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <unistd.h>
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <time.h>

    int get_fileSize(FILE*);

    int main(){

        FILE *dummy = fopen("Dummy2","r");

        int filesize = get_fileSize(dummy);
        printf("Size of dummy = %d Bytes.\n", filesize);

        char *newString = (char*)malloc((sizeof(char*))*(filesize));

        if(dummy){
            fread(newString, sizeof(char*), filesize, dummy);
        }   

        char *tempString = (char*)malloc((sizeof(char*))*(filesize));
        char *finalString = (char*)malloc((sizeof(char*))*(filesize));
        finalString = "\0";

        tempString = strtok(newString, "<");
        do{

            //printf("%s\n",tempString);
            tempString = strtok(NULL, ">");

            if(tempString[1]!='<'){
                    sprintf(finalString,"%s%s",finalString,tempString);            
            }else continue;

        }while(*(newString++)!='\0');

        puts(finalString);

        return 0;
    }

    int get_fileSize(FILE *dummy){

        int size;
        struct stat file;
        fstat(fileno(dummy), &file);
        size = file.st_size;

        return size;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:08:54.377

乍一看您的代码，第一个错误是您这样做`sizeof(char*)`了，而不仅仅是`char`

```
char *newString = (char*)malloc((sizeof(char*))*(filesize)); 
```

应该

```
char *newString = (char*)malloc((sizeof(char))*(filesize)); 
```

您不希望字符串中有指针，但是`char`s.

你`malloc`在上面，从不打电话`free(newString)`，这意味着你至少有 1 次泄漏，可能更多。

同样在这里：

```
fread(newString, sizeof(char*), filesize, dummy); 
```

应该：

```
fread(newString, sizeof(char), filesize, dummy);

finalString = "\n"; //reassigns the pointer to another string, doesn't write into allocated memory. 
```

用于`strcpy`将字符串复制到分配的内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:22:06.527

您的代码中有一些错误，这些错误比 Tony The Lion 的回答中提到的更严重。考虑一下：

```
 char *tempString = (char*)malloc((sizeof(char*))*(filesize));
    char *finalString = (char*)malloc((sizeof(char*))*(filesize));
    finalString = "\0";
    tempString = strtok(newString, "<"); 
```

最后两行有效地使前两行无用。您将常量字符串重新分配给变量。当你然后`sprintf`到 时`finalString`，你会得到一个 sig 错误，因为字符串是常量（并且存储在具有预定义大小的静态内存中 - 1 个字符）。

我建议使用一些标准的解析库。您必须注意，HTML 的格式并不总是正确的，允许嵌套标签，必须忽略某些文本（例如 inside `script`、`style`标签等）。

如果你仍然想自己做，你最好遍历输入，跟踪你是在标签内，跳过这些字符，还是在纯文本内，将此文本添加到你的 finalString 之类的东西中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:31:26.637

如果您正在获取文件大小，请使用它来控制循环（读取文件并不能保证在您读取的内容末尾会有一个零字节）：

```
for (toggle = 0, i = 0; i < filesize; ++i) {
      if      (filearray[ i ] == '<')                toggle = 1;
      else if (filearray[ i ] == '>' && toggle != 0) toggle = 0;
      else if (!toggle) {
           printf("\nText char '%c' at %d", filearray[ i ], i);
      }
} 
```

# php - XAMPP PHP日期函数时间与本地机器时间不同

> ID：15359451
> 
> 赞同：29
> 
> 时间：2013-03-12T11:04:32.053
> 
> 标签：php, xampp

我的电脑当地时间是`12-03-2013 4:30pm`。

我的 XAMPP 日期函数将时间打印为`12-03-2013 10:49:56`.

如何设置 XAMPP 服务器时间以显示系统时间？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-12T11:09:53.423

转到`C:\xampp\php\php.ini`，或您的自定义路径`php.ini`，打开它。

查找以下内容：`date.timezone = "Europe/Warsaw"`。可能你的价值与我的不同`Europe/Warsaw`。所以只搜索字符串：`date.timezone`。

将值更改`Europe/Warsaw`为适当的值，例如`date.timezone = "Asia/Kolkata"`

如果有人在寻找他的位置，请检查有效值[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

不要忘记重新启动您的 XAMPP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-20T15:15:41.930

在您的 XAMPP 中，您可以更改 php.ini 并搜索

```
date.timezone 
```

并将其更改为您喜欢的时区

```
date.timezone = Asia/Jakarta 
```

那是给 XAMPP 的。如果您无法更改远程服务器上的 Web 服务器时间，请尝试将此 date_default_timezone_set() 函数放在您的 php.ini 文件中。像这样 ：

```
<?php date_default_timezone_set('Asia/Jakarta'); ?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-13T08:33:01.960

对于其他对应该使用什么时区 (date.timezone) 感到困惑的人（就像我刚才一样），请参阅 PHP 中的本手册

[http://php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:08:08.667

您必须相应地定义时区

```
date-default-timezone-set('GMT'); 
```

更多阅读[这里](http://php.net/manual/en/function.date-default-timezone-set.php)

但我建议使用 mysql`now()`或`curdate()`占用服务器时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T10:19:20.920

无需更改 xampp 的`php.ini`文件。`date_default_timezone_set()`在获取当前时间之前添加函数。

```
date_default_timezone_set('Asia/Kolkata');
echo date("Y-m-d H:i:s"); 
```

使用这种方式，因为如果您托管您的网站，时间将根据主机服务器显示。所以使用这种方法来避免未来的错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-08T02:56:11.767

我建议使用

> date_default_timezone_set('UTC');

为您的 PHP 应用程序。它在所有服务器上为您提供相同的时间。

我有一个 CI 应用程序及其到服务器的主机，因此 apache 遵循其他时区，并且在本地它遵循不同的方式。

我添加 date_default_timezone_set('UTC'); 在我的 config.php 文件中并像冠军一样工作。

# java - 如何在 JScrollPane 中调用另一个 JPanel 的实例

> ID：15359452
> 
> 赞同：0
> 
> 时间：2013-03-12T11:04:34.313
> 
> 标签：java, swing, jpanel, jscrollpane, mouseclick-event

我在 JFrame 的borderlayout 的中心插入了一个jscrollpane 我已经将一个名为“UI”的JPANEL 插入到了jscrollpane 我想在单击UI Jpanel 中的按钮时将一个新的JPanel 名称“OUTPUTPAGE1”插入到jscrollpane

```
class OutputPage1 extends JPanel 
{
//JButton jb;
XDash xd;
Plain p;
YourPersonal yp;
    Heading sp; 
StartTalkTable sTalk;
AtGlance g;
BlueIndex in;
    JLabel image1,image2,image3,image4,image5;
    MemberInfo mi;
    OrangeBorder o1;
    Footer f;
OutputPage1()
{

    //jb=new JButton("HI");
    xd=new XDash();
    p=new Plain();
    yp=new YourPersonal();
    sp=new Heading("Statement Period: Jan 1, 2013 to Mar 31, 2013","#000000","#C7D9F1",13);           //Heading(String t,String fg,String bg,int size)//
            sp.setHorizontalAlignment(sp.CENTER);
            sp.setFont(new Font("Segoe UI",Font.BOLD,13));
    sTalk=new StartTalkTable();
    g=new AtGlance();
    in=new BlueIndex();
            image1=new JLabel(new ImageIcon("D:/Syntel_Java/images/firstimage.jpg"));
    image2=new JLabel(new ImageIcon("D:/Syntel_Java/images/secondimage.jpg"));
            image3=new JLabel(new ImageIcon("D:/Syntel_Java/images/thirdimage.jpg"));
            image4=new JLabel(new ImageIcon("D:/Syntel_Java/images/fourthimage.jpg"));
            image5=new JLabel(new ImageIcon("D:/Syntel_Java/images/secondimage.jpg"));
            mi=new MemberInfo();
            o1=new OrangeBorder();
            f=new Footer();

    this.setLayout(null);

    //this.add(jb);
    //jb.setBounds(50,800,100,100);         //setBounds(int x, int y, int width, int height)//

    this.add(xd);
            xd.setBounds(50,33,150,150);           //setBounds(int x, int y, int width, int height)//

            this.add(p);
            p.setBounds(100,36,150,150);            //setBounds(int x, int y, int width, int height)//

            this.add(yp);
            yp.setBounds(50,80,400,90);          //setBounds(int x, int y, int width, int height)//

    this.add(sp);
    sp.setBounds(420,120,335,27);           //setBounds(int x, int y, int width, int height)//

    this.add(sTalk);
    sTalk.setBounds(230,160,457,314);           //setBounds(int x, int y, int width, int height)//

    this.add(g);
    g.setBounds(230,481,457,36);            //setBounds(int x, int y, int width, int height)//

    this.add(in);
    in.setBounds(230,525,458,429);          //setBounds(int x, int y, int width, int height)//

            this.add(image1);
            image1.setBounds(50,187,138,138);           //setBounds(int x, int y, int width, int height)//

            this.add(image2);
            image2.setBounds(50,320,138,138);           //setBounds(int x, int y, int width, int height)//

            this.add(image3);
            image3.setBounds(50,453,138,138);           //setBounds(int x, int y, int width, int height)//

            this.add(image4);
            image4.setBounds(50,580,138,138);           //setBounds(int x, int y, int width, int height)//

            this.add(image5);
            image5.setBounds(50,700,138,138);           //setBounds(int x, int y, int width, int height)//

            this.add(mi);
            mi.setBounds(50,840,168,116);           //setBounds(int x, int y, int width, int height)//

            this.add(f);
            f.setBounds(220,1000,270,100);          //setBounds(int x, int y, int width, int height)//

            this.add(o1);
            o1.setBounds(20,980,700,200);           //setBounds(int x, int y, int width, int height)//

    this.setBackground(Color.white);
    this.setPreferredSize(new Dimension(getWidth(),1500));          //Dimension(int width, int height) //
    this.setBorder(BorderFactory.createLineBorder(Color.decode("#C1FC79"),20));
}
 }

    class UI extends JPanel implements ActionListener,MouseListener
     {
    JButton account,member_details,loadTemplate,viewSummary;
    JLabel member_xplain1,member_xplain2;
    JTextField userID,memberID,firstName,lastName;
    JPasswordField password;
    Image bg1,bg2;
    JComboBox fdate,fmonth,fyear,tdate,tmonth,tyear;
    static int CURRENT=1;
    String[] dates,months,years;
UI()
    {
        account=new JButton(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/account.jpg"));
        member_details=new JButton(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/member.jpg"));
        loadTemplate=new JButton(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/load_normal.jpg"));
        viewSummary=new JButton(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/view_normal.jpg"));
        member_xplain1=new JLabel(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/member_xplain.jpg"));
        member_xplain2=new JLabel(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/member_details.jpg"));
        memberID=new JPasswordField(10);
        firstName=new JTextField("ENTER YOUR NAME",10);
        lastName=new JTextField("ENTER YOUR SURNAME",10);
        userID=new JTextField("Enter your UserID",10);
        password=new JPasswordField(10);
        dates=new String[]{"1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"};
        months=new String[]{"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"};
        years=new String[]{"2000","2001","2002","2003","2004","2005","2006","2007","2008","2009","2010","2011","2012","2013","2014"};
        fdate=new JComboBox(dates);
        fmonth=new JComboBox(months);
        fyear=new JComboBox(years);
        tdate=new JComboBox(dates);
        tmonth=new JComboBox(months);
        tyear=new JComboBox(years);

        this.setLayout(null);

        this.add(account);
        account.setBounds(352,582,266,45);         //setBounds(int x, int y, int width, int height)//

        this.add(member_details);
        member_details.setBounds(618,582,266,45);          //setBounds(int x, int y, int width, int height)//

        this.add(userID);
        userID.setBounds(610,160,160,28);          //setBounds(int x, int y, int width, int height)//

        this.add(password);
        password.setBounds(610,216,160,28);          //setBounds(int x, int y, int width, int height)//

        this.add(memberID);
        memberID.setBounds(610,160,160,28);          //setBounds(int x, int y, int width, int height)//

        this.add(firstName);
        firstName.setBounds(610,216,160,28);          //setBounds(int x, int y, int width, int height)//

        this.add(lastName);
        lastName.setBounds(610,272,160,28);          //setBounds(int x, int y, int width, int height)//

        this.add(fdate);
        fdate.setBounds(605,327,51,28);          //setBounds(int x, int y, int width, int height)//

        this.add(fmonth);
        fmonth.setBounds(656,327,100,28);          //setBounds(int x, int y, int width, int height)//

        this.add(fyear);
        fyear.setBounds(756,327,65,28);          //setBounds(int x, int y, int width, int height)//

        this.add(tdate);
        tdate.setBounds(605,382,51,28);          //setBounds(int x, int y, int width, int height)//

        this.add(tmonth);
        tmonth.setBounds(656,382,100,28);          //setBounds(int x, int y, int width, int height)//

        this.add(tyear);
        tyear.setBounds(756,382,65,28);          //setBounds(int x, int y, int width, int height)//

        this.add(loadTemplate);
        loadTemplate.setBounds(424,425,420,58);          //setBounds(int x, int y, int width, int height)//
        loadTemplate.setBorderPainted(false);

        this.add(viewSummary);
        viewSummary.setBounds(425,495,420,58);          //setBounds(int x, int y, int width, int height)//
        viewSummary.setBorderPainted(false);

         this.add(member_xplain1);
        member_xplain1.setBounds(350,96,551,485);          //setBounds(int x, int y, int width, int height)//

        this.add(member_xplain2);
        member_xplain2.setBounds(350,96,551,485);          //setBounds(int x, int y, int width, int height)//

        //ACTION LISTENER//
        viewSummary.addActionListener(this);
        loadTemplate.addActionListener(this);
        account.addActionListener(this);
        member_details.addActionListener(this);

        //MOUSE LISTENER//
        viewSummary.addMouseListener(this);
        loadTemplate.addMouseListener(this);

    }
    public void actionPerformed(ActionEvent e)              //public void actionPerformed(ActionEvent e)//
    {
        if(e.getSource()==account)
        {
            if(CURRENT==1)
            {
               //DO NOTHING//
            }
            if(CURRENT==2)
            {
                CURRENT=1;
                this.repaint();
            }
        }
        if(e.getSource()==member_details)
        {
            if(CURRENT==1)
            {
                CURRENT=2;
                this.repaint();
            }
            if(CURRENT==2)
            {
                //DO NOTHING//
            }
        }
    }
    public void mouseClicked(MouseEvent e)
    {

    }
    public void mouseEntered(MouseEvent e)
    {
        if(e.getSource()==loadTemplate)
        {
            loadTemplate.setIcon(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/load_hover.jpg"));
        }
        if(e.getSource()==viewSummary)
        {
            viewSummary.setIcon(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/view_over.jpg"));
        }
    }
    public void mouseExited(MouseEvent e)
    {
        if(e.getSource()==loadTemplate)
        {
            loadTemplate.setIcon(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/load_normal.jpg"));
        }
        if(e.getSource()==viewSummary)
        {
            viewSummary.setIcon(new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/view_normal.jpg"));
        }
    }
    public void mousePressed(MouseEvent e)
    {
    }
    public void mouseReleased(MouseEvent e)
    {
    }
    public void paintComponent(Graphics g)
    {
        if(CURRENT==1)
        {
            bg1=new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/1.jpg").getImage();
            g.drawImage(bg1,0,0,getWidth(),getHeight(),this);

             //SETTING PAGE2 ELEMENTS TO FALSE//
                memberID.setVisible(false);
                firstName.setVisible(false);
                lastName.setVisible(false);
                fdate.setVisible(false);
                fmonth.setVisible(false);
                fyear.setVisible(false);
                tdate.setVisible(false);
                tmonth.setVisible(false);
                tyear.setVisible(false);
                loadTemplate.setVisible(false);
                viewSummary.setVisible(false);
                member_xplain2.setVisible(false);

                //SETTING PAGE1 ELEMENTS TO TRUE//
                userID.setVisible(true);
                password.setVisible(true);
                member_xplain1.setVisible(true);
        }
        if(CURRENT==2)
        {
            member_xplain1.setVisible(false);
            userID.setVisible(false);
            password.setVisible(false);
            bg1=new ImageIcon("D:/SYNTEL_JAVA_PROJECT/images/2.jpg").getImage();
            g.drawImage(bg1,0,0,getWidth(),getHeight(),this);

             //SETTING PAGE2 ELEMENTS TO TRUE//
                memberID.setVisible(true);
                firstName.setVisible(true);
                lastName.setVisible(true);
                fdate.setVisible(true);
                fmonth.setVisible(true);
                fyear.setVisible(true);
                tdate.setVisible(true);
                tmonth.setVisible(true);
                tyear.setVisible(true);
                loadTemplate.setVisible(true);
                viewSummary.setVisible(true);

                //SETTING PAGE1 ELEMENTS TO FALSE//
                userID.setVisible(false);
                password.setVisible(false);
        }
    }
}

     class Demo extends JFrame implements AdjustmentListener,MouseListener
      {
      Demo x;
      UI ui;
      OutputPage1 op1;
      JScrollPane jsp,jsp2;
      Demo()
      {
          ui=new UI();
          op1=new OutputPage1();
          jsp=new JScrollPane(ui,JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
          jsp.setViewportView(ui);

          this.setLayout(new BorderLayout());

          this.add(new BlackPanel(),BorderLayout.WEST);
          this.add(new BlackPanel(),BorderLayout.EAST);
          this.add(new BlackPanel(),BorderLayout.NORTH);
          this.add(new BlackPanel(),BorderLayout.SOUTH);
          this.add(jsp,BorderLayout.CENTER);

          ui.loadTemplate.addMouseListener(this);
          jsp.getVerticalScrollBar().addAdjustmentListener(this);
          jsp.getHorizontalScrollBar().addAdjustmentListener(this);
          this.setVisible(true);
          this.setDefaultCloseOperation(EXIT_ON_CLOSE);
          this.setExtendedState(MAXIMIZED_BOTH);
          x=this;
      }

      public void mouseClicked(MouseEvent e)
      {
          if(e.getSource()==ui.loadTemplate)
          {

                jsp.setViewportView(op1);
                jsp.setVisible(false);
                op1.setVisible(true);
                jsp.getViewport().revalidate();

             // new Demo();
              //jsp.getViewport().repaint();

          }
      }
      public void mouseEntered(MouseEvent e)
      {}
      public void mouseExited(MouseEvent e)
      {}
      public void mousePressed(MouseEvent e)
      {}
      public void mouseReleased(MouseEvent e)
      {}

      //ADJUSTMENT LISTENER//
      public void adjustmentValueChanged(AdjustmentEvent e)           //adjustmentValueChanged(AdjustmentEvent e) //
      {
          jsp.getVerticalScrollBar().setEnabled(true);
          jsp.getVerticalScrollBar().setBlockIncrement(10);
          jsp.getVerticalScrollBar().setUnitIncrement(10);
      }
      public static void main(String args[])
      {
          Demo z=new Demo();
      }
} 
```

我通过编写一个更简单的代码得到了解决方案，该代码执行了我想用复杂的代码执行的任务....希望它可以帮助所有遇到同样麻烦的人:) :) `

```
 class Panel1 extends JPanel
      {
      JLabel jb1;
      JButton but;
      Panel1()
      {
        jb1=new JLabel("I AM ON PANEL 1");
        but=new JButton("click me to go to PANEL2");
        this.setLayout(new BorderLayout());

        this.add(jb1,BorderLayout.CENTER);
        this.add(but,BorderLayout.SOUTH);
     }
   }
        class Panel2 extends JPanel
        {
           JLabel jb2;
           Panel2()
           {
             jb2=new JLabel("NOW PANEL 2 SHOULD APPEAR");

             this.setLayout(new BorderLayout());

            this.add(jb2,BorderLayout.CENTER);
           }
    }
  class Trial extends JFrame implements MouseListener
 {
   JFrame mainFrame;
   Panel1 p1;
 Panel2 p2;
 JScrollPane jsp;
Trial()
{
    p1=new Panel1();
    p2=new Panel2();
    jsp=new JScrollPane(p1);

    this.setLayout(new BorderLayout());

    p1.but.addMouseListener(this);

    this.add(jsp,BorderLayout.CENTER);
    this.setVisible(true);
    this.setExtendedState(MAXIMIZED_BOTH);
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);

}
public void mouseEntered(MouseEvent e)
{}
public void mouseExited(MouseEvent e)
{}
   public void mousePressed(MouseEvent e)
   {}
  public void mouseReleased(MouseEvent e)
  {}
  public void mouseClicked(MouseEvent e)
  {
    if(e.getSource()==p1.but)
    {
        jsp.setViewportView(p2);
        jsp.getViewport().revalidate();
        System.out.println("YES I AM LISTENING TO YOU");
    }
   }
  public static void main(String args[])
  {
    new Trial();
  }
}` 
```

它成功了。

# mysql - 未生成 mysql-slow-log 文件

> ID：15359461
> 
> 赞同：0
> 
> 时间：2013-03-12T11:04:57.317
> 
> 标签：mysql, logging, mysql-slow-query-log

```
log_slow_queries  = "C:\Program Files\MySQL\MySQL Server 5.1\mysql-slow.log" 
long_query_time  = 1 
```

我在 my.ini 文件中写了上面的行。但是在运行我的查询（执行时间超过 1 秒）后，没有生成日志文件。我究竟做错了什么？

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:16:51.237

请`restart mysql service`。请执行并检查：`SHOW VARIABLES LIKE '%slow_query_log%';`这将帮助您识别 mysql 慢查询日志文件的位置。

# linux-kernel - Linux 中共享 IRQ 的并发中断处理

> ID：15359464
> 
> 赞同：1
> 
> 时间：2013-03-12T11:05:07.637
> 
> 标签：linux-kernel, linux-device-driver, interrupt, interrupt-handling, irq

[在ISR](http://en.wikipedia.org/wiki/Interrupt_handler)处理程序的上半部分可以做或需要做的事情是什么。我看到中断首先被禁用，所以当这完成后，我们不会错过在处理当前中断时可能到达的其他中断（在同一 IRQ 线上）吗？

或者是否有任何“实体”跟踪丢失的中断，以便在当前运行的 ISR 结束时为该行再次启用中断后处理它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:27:38.150

关于共享中断的简短说明：共享中断线应始终使用对电平敏感的设备，这些设备也应该是相同的电平（高电平与低电平）。对于边沿触发的中断，无法保证在一个设备触发之后，但在它返回其稳定状态之前，另一个设备不会触发。它成为一种无法避免的竞争条件。

另一方面，电平触发的中断保持活动状态，直到设备上触发它的标志被清除。在处理第一个设备时，如果第二个设备触发，那么它将等待 IRQ 线保持活动状态，直到处理程序再次启用 IRQ 线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T17:03:45.927

您应该正确地确认中断以避免 IRQ 风暴。处理中断本身 - 如果您有大量工作要做，请卸载到下半部分。

禁用中断时会发生什么：在 x86 上，该`cli`指令禁用当前运行 ISR 的[CPU上的中断。](http://en.wikipedia.org/wiki/Central_processing_unit)一个 IRQ 被缓冲，因此当使用 恢复中断时`sti`，它会被传递。

当使用 APIC 中断时，缓冲发生在内核本身。`enable_irq`内核确认 APIC 中断并在被调用时再次触发它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:09:55.680

中断处理程序应尽可能少。

并不总是需要禁用中断。一些架构使用嵌套中断。无论如何，如果您禁用中断，您应该为一两个命令执行此操作，而不是更多。这将造成延迟并可能错过中断。

当我处理中断时，我通常会做两件事。一是清除引起中断的标志。二是事后触发一些功能（tasklet、workqueue等）

请注意不要在可能休眠的中断处理程序中使用任何方法，例如 printf 或获取[mutex](http://en.wikipedia.org/wiki/Mutual_exclusion)。

# mysql - bugzilla 安装错误：“InnoDB 已禁用您的 MySQL 安装。Bugzilla 需要启用 InnoDb。” 即使启用了innodb

> ID：15359467
> 
> 赞同：1
> 
> 时间：2013-03-12T11:05:14.577
> 
> 标签：mysql, innodb, bugzilla

我已经在我的 windows7 机器上安装了 bugzilla4.2.5。当我运行 bugzilla 的 checksetup.pl 脚本时，它显示

```
Use of uninitialized value $innodb_on in string ne at Bugzilla/DB/Mysql.pm line no 330."InnoDB is disabled your MySQL installation. Bugzilla requires InnoDb to be enabled. Please enable it and then re-runchecksetup.pl". 
```

Mysql.pm 中的行号表示的代码段如下

```
 my ($innodb_on) = @{$self->selectcol_arrayref(
    q{SHOW VARIABLES LIKE '%have_innodb%'}, {Columns=>[2]})};
if ($innodb_on ne 'YES') {
    die install_string('mysql_innodb_disabled');
} 
```

我的 Mysql 安装版本是 5.6.4-m7 。我发现该命令`SHOW VARIABLES LIKE '%have_innodb%`返回一个空集。但是`SHOW ENGINES`shwing innodb 并且它已启用并设置为默认值。

我想 bugzilla 显示错误是因为`SHOW VARIABLES LIKE '%have_innodb%` 在 Mysql.pm 文件的代码中也返回了空集。

[http://bugs.mysql.com/bug.php?id=63383](http://bugs.mysql.com/bug.php?id=63383)此链接显示“have_innodb”变量已从 MySQL 5.6.1 中删除。这是否意味着我需要安装包含“have_innodb”变量的旧版本的 mysql？请帮我解决bugzilla安装中的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T12:19:23.557

这是使用 MySQL 5.6 或更高版本时的 bugzilla 源代码更改

请**更换**：

```
my ($innodb_on) = @{$self->selectcol_arrayref(
q{SHOW VARIABLES LIKE '%have_innodb%'}, {Columns=>[2]})};
if ($innodb_on ne 'YES') {
    die install_string('mysql_innodb_disabled');
} 
```

和：

```
my ($innodb_on) = 
    grep{ $_->{engine} =~ m/InnoDB/i }
    map  {
        my %hash;
        @hash{ map { lc $_ } keys %$_ } = values %$_;
        \%hash;
    }
    @{$self->selectall_arrayref("SHOW ENGINES", {Slice=>{}}) };
if ( $innodb_on ) {
    if ( !$innodb_on->{support} =~ m/YES|DEFAULT/i ) {
        die install_string('mysql_innodb_disabled');
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T07:45:58.953

I finally fixed the problem. There are two options for solve this issue: One is install a lower version of MySQL than MySQL5.6 or Change the Bugzilla source code. In the Mysql.pm, instead of using the command **SHOW VARIABLES LIKE '%have_innodb%'** use the **SHOW ENGINES** to check if innodb is enabled and set the the value to $innodb_on variable.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-02T18:24:40.233

我只是将检查从“ne”更改为“eq”，这是完全错误的，但显然给出了正确的行为。

# maven - 如何将默认的 Maven Surefire 插件更改为更高版本？

> ID：15359469
> 
> 赞同：7
> 
> 时间：2013-03-12T11:05:29.637
> 
> 标签：maven, maven-surefire-plugin

现在我正在运行`Maven 3.0.3`并且它使用`maven-surefire-plugin:2.7.2`，但我希望 Maven 使用更高版本的`maven-surefire-plugin`……</p>

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T17:49:35.023

声明插件版本的更好方法是使用 pluginManagement：

```
<build>
  <pluginManagement>
   <plugins>
     <plugin>
       <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-surefire-plugin</artifactId>
       <version>2.22.0</version>
     </plugin>
     ...
   </plugins>
 </pluginManagement>
</build> 
```

此外，最好在父 pom（通常是公司 pom）中通过 pluginManagement 声明所有插件及其适当版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:07:18.940

只需在您指定surefire插件的POM中声明所需的版本。

我记得，如果您没有为每个插件明确指定所需的版本，Maven 3 实际上会抱怨。

例如：

```
<plugin>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>X.X.X</version>
</plugin> 
```

# java - 使用 java 检查 selenium 中是否存在模型对话框

> ID：15359470
> 
> 赞同：2
> 
> 时间：2013-03-12T11:05:32.143
> 
> 标签：java, selenium-webdriver

无论如何要检查 Selenium Web 驱动程序中是否存在模型对话框？我正在使用以下代码：

```
public boolean isAlertPresent()
{
    try
    {
        driver.switchTo().alert();
        robotClass();
        System.out.println("Model dialog is present");
        return true;
    } 
    catch (NoAlertPresentException Ex)
    {
        System.out.println("Model dialog is not present");
        return false;
    } 
} 
```

此代码在检查警报对话框是否存在时工作正常。我想使用 java 检查 selenium 中是否存在模型对话框。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T20:30:29.623

我相信这个问题的第二个答案是您正在寻找的答案：[如何使用 WebDriver 检查是否存在警报？](https://stackoverflow.com/questions/11467471/webdriver-how-to-check-if-an-alert-exists)

# android - 在android中使用KSoap时出错？

> ID：15359474
> 
> 赞同：0
> 
> 时间：2013-03-12T11:05:42.850
> 
> 标签：android

我正在使用以下代码调用 webservice。我对在 android 中使用 Ksoap 非常陌生。我已经设法调用 1 个 web 服务并解析数据。但是当我使用相同的代码时（我已经更改了参数 soapaction、命名空间......）解析另一个 web 服务我得到以下错误。我设置了 Soapaction、命名空间..的参数都设置正确。我做了一个调用网络服务的方法；

```
public void showdetails()
    {

        String result = "";
        SoapObject resultRequestSOAP = null;
        SoapObject resultRequestSOAPbody =null;

        SoapObject request = new SoapObject(NAMESPACE_Transaction, METHOD_NAME_Transaction);

        request.addProperty("TransactionType","payment");
        request.addProperty("MerchantId","543");
        request.addProperty("amount","0.02");
        request.addProperty("CCNo","4111111111111111");
        request.addProperty("CCExpMonth","11");
        request.addProperty("CCExpYear","22");
        request.addProperty("Source","aa");
        request.addProperty("profileId","788");
        //request.addProperty("ClientIPAddress","120.138.99.2");
       //request.addProperty("GEOCode","0.000000,0.000000");

            //Some more fields that are not mandatory

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL_Transaction);
        androidHttpTransport.debug = true;

        try
        {
            androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding= \"UTF-8\"?>");
            androidHttpTransport.call(SOAP_ACTION_Transaction, envelope);
            String requestDumpString = androidHttpTransport.requestDump;
            System.out.println("requestDump : " + requestDumpString);

            resultRequestSOAP = (SoapObject) envelope.bodyIn;
            //  resultRequestSOAP = (SoapObject) envelope.getResponse(); // Output received
            result = resultRequestSOAP.toString(); // Result string
            System.out.println("OUTPUT : " + result);

            if (envelope.bodyIn instanceof SoapFault) 
            {
                String str= ((SoapFault) envelope.bodyIn).faultstring;
                Log.i("TAG", str);
            } else {
                SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
                Log.d("WS", String.valueOf(resultsRequestSOAP));
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

我在以下声明中遇到了问题：

```
resultRequestSOAP = (SoapObject) envelope.bodyIn; 
```

错误如下：

```
java.lang.ClassCastException: org.ksoap2.SoapFault cannot be cast to org.ksoap2.serialization.SoapObject 
```

有人可以在这个问题上帮助我吗？我已经搜索了很多但无法解决它。当我调用其他网络服务时，它会返回我的信封.bodyIn。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T11:16:55.313

我编辑了您的代码，请尝试这样

```
SoapObject request = new SoapObject(NAMESPACE_Transaction,
            METHOD_NAME_Transaction); // set up request
    request.addProperty("TransactionType","payment");
    request.addProperty("MerchantId","543");
    request.addProperty("amount","0.02");
    request.addProperty("CCNo","4111111111111111");
    request.addProperty("CCExpMonth","11");
    request.addProperty("CCExpYear","22");
    request.addProperty("Source","aa");
    request.addProperty("profileId","788");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11); // put all required data into a soap
    // envelope
    // envelope.dotNet = true; This is needed else gives error - 42,
    // parameter is not recognised!!
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request); // prepare request
    AndroidHttpTransport httpTransport = new AndroidHttpTransport(
            URL_Transaction);
    httpTransport.call(SOAP_ACTION_Transaction, envelope);

    SoapObject result = (SoapObject) envelope.getResponse();
      System.out.println(result.toString()); 
```

# java - 隐藏后片段不会显示？

> ID：15359483
> 
> 赞同：0
> 
> 时间：2013-03-12T11:06:16.547
> 
> 标签：java, android, android-fragments

我今天只是学习片段。我按下一个按钮，它隐藏了一个片段。但是，如果我尝试显示片段没有任何反应，为什么？我正在关注本教程，在中间我决定尝试在按下按钮时让片段消失/出现[http://www.vogella.com/articles/AndroidFragments/article.html](http://www.vogella.com/articles/AndroidFragments/article.html)

Button2 片段：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.button2_fragment,
            container, false);
        Button button = (Button) view.findViewById(R.id.button2);
        button.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
              ButtonFragment fragment = (ButtonFragment) getFragmentManager()
                        .findFragmentById(R.id.ButtonFragment);  
              if (fragment != null && fragment.isInLayout()) {
                 FragmentManager fragmentManager = getFragmentManager(); 
                 FragmentTransaction transaction = fragmentManager.beginTransaction(); 
                 transaction.hide(fragmentManager.findFragmentById(R.id.ButtonFragment)); 
                 transaction.commit(); 
              }
              else 
              {
                  FragmentManager fragmentManager = getFragmentManager(); 
                  FragmentTransaction transaction = fragmentManager.beginTransaction(); 
                  transaction.show(fragmentManager.findFragmentById(R.id.ButtonFragment)); 
                  transaction.commit(); 
              }       

          }
        });
        return view;
      } 
```

我在xml中有三个这样的片段：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#123456" >

    <fragment
        android:id="@+id/ButtonFragment"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.example.myfragment.ButtonFragment" ></fragment>

    <fragment
        android:id="@+id/TimeFragment"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="match_parent"
        class="com.example.myfragment.TimeFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

    <fragment
        android:id="@+id/Button2Fragment"
        android:layout_width="0dp"
        android:layout_weight="3"
        android:layout_height="match_parent"
        class="com.example.myfragment.Button2Fragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

代码在我的 button2 片段中，我应该在主要活动中放一些东西吗？

```
package com.example.myfragment;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity implements ButtonFragment.OnItemSelectedListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    // if the wizard generated an onCreateOptionsMenu you can delete
    // it, not needed for this tutorial

  @Override
  public void onRssItemSelected(String link) {
    TimeFragment fragment = (TimeFragment) getFragmentManager()
            .findFragmentById(R.id.TimeFragment);
        if (fragment != null && fragment.isInLayout()) {
          fragment.setText(link);
        } 
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:15:38.197

控制似乎总是在这个里面

`if (fragment != null && fragment.isInLayout())`

因此，碎片总是被隐藏起来，一旦隐藏起来，就永远不会显示出来。

尝试有一个切换，它将不断切换每个`onClick()`事件。这样，控件将交替流向`if`和`else`块，从而隐藏和显示片段。

尝试使用`isVisible()`而不是`isInLayout()`

# bash - 如何列出所有导出的 bash 函数？

> ID：15359489
> 
> 赞同：4
> 
> 时间：2013-03-12T11:06:32.030
> 
> 标签：bash, shell

在 bash 中，我们可以通过以下方式导出函数：

```
fname(){
  echo "Foo"
}

export -f fname 
```

在这种情况下，函数`fname`被导出。但是如何列出这个或其他导出的函数呢？AFAIK，命令`export`或`export -p`可用于显示所有导出/包含的变量，但这不包括函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:15:37.260

下面将按名称列出所有导出的函数：

```
declare -x -F 
```

如果您还想查看功能代码，请使用：

```
declare -x -f 
```

详情请参阅`help declare`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:26:21.003

`declare`是要使用的命令。

这是一个设置和导出一些函数并将它们全部列出或仅列出一个特定函数的示例：

```
$ foo() { echo "Foo"; }
$ export -f foo
$ bar() { echo "Bar"; }
$ export -f bar
$
$ declare -f
bar ()
{
    echo "Bar"
}
declare -fx bar
foo ()
{
    echo "Foo"
}
declare -fx foo
$
$ declare -f foo
foo ()
{
    echo "Foo"
}
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-20T13:36:28.790

所选解决方案的输出是：

```
declare -fx exported_function_one declare -fx exported_function_two 
```

就我而言，因为我只想要函数的名称，所以我这样做了：

```
exported_functions=$(declare -x -F | sed 's/declare -fx//') 
```

哪个输出：

```
exported_function_one exported_function_two 
```

希望它对某人有所帮助：D

# javascript - 使用 JavaScript 访问 div 的子节点

> ID：15359493
> 
> 赞同：1
> 
> 时间：2013-03-12T11:06:37.933
> 
> 标签：javascript, html

我使用以下代码创建了一个 div ...

```
var bannerBox = document.createElement("div");
bannerBox.id = "bannerBox"; 
```

...和第二个 div 如下...

```
var bannerAd = document.createElement("div");
bannerAd.className = "bannerAd"; 
```

上述 div 已在一个函数中创建。现在在另一个函数中，我尝试按如下方式访问第一个 div...

```
var allAds = document.getElementById("bannerBox").childNodes; 
```

...但它会产生此错误： **未捕获的错误无法读取 null 的属性子节点**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:09:07.420

您必须将`bannerBox`div 实际放入文档中，方法是将其传递到文档中的某个元素（例如）中`appendChild`或上：`insertBefore``document.body`

```
document.body.appendChild(bannerBox); 
```

（但它可以是文档中的任何元素，不一定是`body`.）

一旦它在文档中，您可以`id`按照您显示的方式检索它。

当然（这不是您遇到的问题，但它可能是*下一个*问题），`bannerBox`要拥有任何子节点（例如，`childNodes`不为空`NodeList`），您需要在其中放入一些东西。从您的变量名称中，我想您可能想将其放入`bannerAd`其中，例如：

```
bannerBox.appendChild(bannerAd); 
```

# c# - 为什么非通用任务 (C# 4.0+) 的任务结果属性不可用？

> ID：15359494
> 
> 赞同：12
> 
> 时间：2013-03-12T11:06:41.447
> 
> 标签：c#, .net, multithreading, c#-4.0, task-parallel-library

我正在尝试掌握 .NET 4.0+ 任务并行库的概念...

在以下 C# 4.0 代码片段中：

```
Task t = Task.Factory.StartNew(() =>
{
   Console.WriteLine("I am the task");
   return "res1";
}); 
```

如果返回不能使用，为什么编译器（和运行时）不会产生任何错误，除非使用通用任务代替：

```
Task<string> t = Task.Factory.StartNew(() =>
{
   Console.WriteLine("I am the task");
   return "res1";
}); 
```

还是可以使用它（返回的对象）？

我是否正确理解`<string>`in`Task<string>`仅用于检测或确保返回（ed 对象）或的类型`t.Result`？
或者除了这个之外，还有什么对我隐藏的必需品？

为什么无法从返回对象的类型中确定该类型？
即为什么非通用任务的任务的结果属性不可用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T11:08:46.460

非泛型`Task`没有`Result`属性，因为它表示*不*产生结果的过程。

您的代码在这两种情况下都创建了 a `Task<string>`，但在第一种情况下，您将其转换为 a `Task`(`Task<string>`派生自`Task`，因此这是合法的)，因此您无法引用结果。

你可以直接看到这个：

```
Task t = Task.Factory.StartNew(() =>
{
   Console.WriteLine("I am the task");
   return "res1";
});

var genericTask = t as Task<string>; // genericTask will be non-null
var result = genericTask.Result;     // and you can access the result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:11:34.327

`Task<T>`继承自`Task`。在这两种情况下，您实际上是在创建 a `Task<T>`，但在第一种情况下，您将其隐式转换为`Task`，它不具有该`Result`属性。

# c++ - 使用来自 USB 令牌的证书和密钥进行数字签名

> ID：15359496
> 
> 赞同：5
> 
> 时间：2013-03-12T11:06:43.823
> 
> 标签：c++, cryptography, digital-signature, x509, hsm

我想使用来自 USB 令牌（加密狗）的用户密钥和证书签署文件。

我已经在 stackoverflow 和其他网站上搜索了一段时间，但除了 .NET 框架中的一些好的功能（我没有使用）之外，没有得到任何有用的东西。

似乎由于密钥没有暴露，加密是由硬件本身完成的。这是否意味着每个硬件制造商都提供了自己的 API，并且没有通用的方法来解决这个问题？

另外，我读到，一旦将令牌插入计算机，其证书就会加载到系统存储中。是否可以使用商店的证书？如何在商店中识别和访问此类证书？那么私钥呢？

当可以从 .p12 或 .pfx 文件中提取证书时，我使用 OpenSSL 进行数字签名。

如果我在某个地方错了，请纠正我，我是这个话题的新手。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-12T05:31:04.437

我不知道我会将 OpenSSL 引擎的任何方面描述为“相当简单”。命令行版本乱七八糟，我自己在代码中做了之后才能弄清楚命令行在做什么。操作顺序和生命周期没有很好地说明（我仍然不完全知道它们是什么，但我的系统正在运行并且不再泄漏内存，所以是的。）

我已经在 github 上发布了功能版本： [https ://github.com/tkil/openssl-pkcs11-samples](https://github.com/tkil/openssl-pkcs11-samples)

以下是相关部分的导览`tok-sign.c`：

首先，一些帮手：

```
#define FAIL( msg, dest )                      \
    do {                                       \
        fprintf( stderr, "error: " msg "\n" ); \
        goto dest;                             \
    } while ( 0 )

/* mandatory is "not optional"... */
const int CMD_MANDATORY = 0; 
```

该引擎最奇怪的地方可能`dynamic`在于它实际上是一个元引擎：您向它提供各种参数，当您向它提供各种参数时`LOAD`，它会加载动态库并提供一个新引擎。一旦您知道正确的操作顺序，它的代码就很简单了。在这里，我们可以访问动态引擎，对其进行配置，然后要求它引入`pkcs11`引擎：

```
ENGINE_load_dynamic();
ENGINE * dyn = ENGINE_by_id( "dynamic" );
if ( ! dyn )
    FAIL( "retrieving 'dynamic' engine", free_out_sig_file );

// this is the bridge between OpenSSL and any generic PCKS11 provider:
char * engine_pkcs11_so = "/opt/crypto/lib/engines/engine_pkcs11.so";

if ( 1 != ENGINE_ctrl_cmd_string( dyn, "SO_PATH", engine_pkcs11_so, CMD_MANDATORY ) )
    FAIL( "dyn: setting so_path <= 'engine_pkcs11.so'", free_dyn );

if ( 1 != ENGINE_ctrl_cmd_string( dyn, "ID", "pkcs11", CMD_MANDATORY ) )
    FAIL( "dyn: setting id <= 'pkcs11'", free_dyn );

if ( 1 != ENGINE_ctrl_cmd( dyn, "LIST_ADD", 1, NULL, NULL, CMD_MANDATORY ) )
    FAIL( "dyn: setting list_add <= 1", free_dyn );

if ( 1 != ENGINE_ctrl_cmd( dyn, "LOAD", 1, NULL, NULL, CMD_MANDATORY ) )
    FAIL( "dyn: setting load <= 1", free_dyn ); 
```

此时，如果所有这些调用都成功，您的 OpenSSL 实例现在可以访问一个名为“pkcs11”的新引擎。现在我们需要访问那个新引擎，正确配置它，并让它自己初始化：

```
ENGINE * pkcs11 = ENGINE_by_id( "pkcs11" );
if ( ! pkcs11 )
    FAIL( "pkcs11: unable to get engine", free_dyn );

// this is the actual pkcs11 provider we're using.  in this case, it's
// from the OpenSC package.
char * opensc_pkcs11_so = "/opt/crypto/lib/opensc-pkcs11.so";

if ( 1 != ENGINE_ctrl_cmd_string( pkcs11, "MODULE_PATH", opensc_pkcs11_so, CMD_MANDATORY ) )
    FAIL( "setting module_path <= 'opensc-pkcs11.so'", free_pkcs11 );

if ( 1 != ENGINE_ctrl_cmd_string( pkcs11, "PIN", key_pin, CMD_MANDATORY ) )
    FAIL( "setting pin", free_pkcs11 );

if ( 1 != ENGINE_init( pkcs11 ) )
    FAIL( "pkcs11: unable to initialize engine", free_pkcs11 ); 
```

现在我们可以访问令牌，我们可以获取用于 OpenSSL 操作的私钥：

```
EVP_PKEY * key = ENGINE_load_private_key( pkcs11, key_id, NULL, NULL );
if ( ! key )
    FAIL( "reading private key", free_pkcs11 ); 
```

但是想不通怎么通过ENGINE接口提取对应的证书，所以直接去LibP11：

```
PKCS11_CTX * p11_ctx = PKCS11_CTX_new();
if ( ! p11_ctx )
    FAIL( "opening pkcs11 context", free_key );

if ( 0 != PKCS11_CTX_load( p11_ctx, opensc_pkcs11_so ) )
    FAIL( "unable to load module", free_p11_ctx );

PKCS11_SLOT * p11_slots;
unsigned int num_p11_slots;
if ( 0 != PKCS11_enumerate_slots( p11_ctx, &p11_slots, &num_p11_slots ) )
    FAIL( "enumerating slots", free_p11_ctx_module );

PKCS11_SLOT * p11_used_slot =
  PKCS11_find_token( p11_ctx, p11_slots, num_p11_slots );
if ( ! p11_used_slot )
    FAIL( "finding token", free_p11_slots );

PKCS11_CERT * p11_certs;
unsigned int num_p11_certs;
if ( 0 != PKCS11_enumerate_certs( p11_used_slot->token, &p11_certs, &num_p11_certs ) )
    FAIL( "enumerating certs", free_p11_slots ); 
```

最后，我们开始为 CMS_Sign 请求收集数据。我们查看令牌上的所有证书，挑选出与私钥对应的证书，然后将其余证书存储在 OpenSSL 中`STACK_OF(X509)`：

```
STACK_OF(X509) * extra_certs = sk_X509_new_null();
if ( ! extra_certs )
    FAIL( "allocating extra certs", free_p11_slots );

X509 * key_cert = NULL;
for ( unsigned int i = 0; i < num_p11_certs; ++i )
{
    PKCS11_CERT * p11_cert = p11_certs + i;

    if ( ! p11_cert->label )
        continue;

    // fprintf( stderr, "p11: got cert label='%s', x509=%p\n",
    //         p11_cert->label, p11_cert->x509 );

    if ( ! p11_cert->x509 )
    {
        fprintf( stderr, "p11: ... no x509, ignoring\n" );
        continue;
    }

    const char * label = p11_cert->label;
    const unsigned int label_len = strlen( label );

    if ( strcmp( label, key_label ) == 0 )
    {
        // fprintf( stderr, "p11: ... saving as signing cert\n" );
        key_cert = p11_cert->x509;
    }
    else if ( strncmp( label, "encrypt", 7 ) == 0 &&
              label_len == 8 &&
              '0' <= label[7] && label[7] <= '3' )
    {
        // fprintf( stderr, "p11: ... ignoring as encrypting cert\n" );
    }
    else
    {
        // fprintf( stderr, "p11: ... saving as extra cert\n" );
        if ( ! sk_X509_push( extra_certs, p11_cert->x509 ) )
            FAIL( "pushing extra cert", free_extra_certs );
    }
}

if ( ! key_cert )
    FAIL( "finding signing cert", free_extra_certs ); 
```

最后，我们可以对数据进行签名，然后将签名输出到 DER 格式的文件中：

```
CMS_ContentInfo * ci = CMS_sign( key_cert, key, extra_certs, in_data_file,
                                 CMS_DETACHED | CMS_BINARY );
if ( ! ci )
    FAIL( "could not create signing structure", free_extra_certs );

if ( 1 != i2d_CMS_bio( out_sig_file, ci ) )
       FAIL( "could not write signature in DER", free_ci ); 
```

之后，它只是清理：

```
free_ci:
    CMS_ContentInfo_free( ci );

free_extra_certs:
    /* these certs are actually "owned" by the libp11 code, and are
     * presumably freed with the slot or context. */
    sk_X509_free( extra_certs );

free_p11_slots:
    PKCS11_release_all_slots( p11_ctx, p11_slots, num_p11_slots );

free_p11_ctx_module:
    PKCS11_CTX_unload( p11_ctx );

free_p11_ctx:
    PKCS11_CTX_free( p11_ctx );

free_key:
    EVP_PKEY_free( key );

free_pkcs11:
    ENGINE_free( pkcs11 );

free_dyn:
    ENGINE_free( dyn ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-25T20:44:26.883

您可以通过使用 OpenSSL 的引擎并为其提供 PKCS#11 引擎来做到这一点。

这可以从命令行（-engine 标志）或通过设置引擎来完成。openssl 发行版的 /apps/ 中的 apps.c 有很好的例子。

命令行的典型调用形式如下

```
usr/bin/openssl << EOM
engine dynamic -pre SO_PATH:/Library/OpenSC/lib/engines/engine_pkcs11.so  -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:opensc-pkcs11.so
req -engine pkcs11 -batch -subj "/CN=moi" -new -key slot_$SLOT-id_$KID -keyform engine -x509 -out cert.pem -text
EOM 
```

它在设备上创建并签署一个请求。

签署某事：

```
${OPENSSL} << EOM || exit 1
engine -vvvv dynamic \
    -pre SO_PATH:/Library/OpenSC/lib/engines/engine_pkcs11.so  \
    -pre ID:pkcs11 \
    -pre LIST_ADD:1 \
    -pre LOAD \
    -pre MODULE_PATH:$PKCS \
    -pre PIN:$PIN  \
    -pre VERBOSE 

x509 -engine pkcs11 -req -in req.csr -out signed.pem \
    -CAfile $CA \
    -keyform engine -key $SLOT:$CAKID \
    -cert $CAKID.pem 
```

请注意，尽管对于后者，未修补的 openssl 不允许引用卡上的证书（仅密钥）。因此，需要先将其提取并存储为文件。

并使用卡上的密钥将客户端身份验证连接到服务器：

```
${OPENSSL} << EOM || exit 1
engine -vvvv dynamic \
    -pre SO_PATH:/Library/OpenSC/lib/engines/engine_pkcs11.so  \
    -pre ID:pkcs11 \
    -pre LIST_ADD:1 \
    -pre LOAD \
    -pre MODULE_PATH:$PKCS \
    -pre PIN:$PIN  \
    -pre VERBOSE 

s_client -engine pkcs11 -connect localhost:1443 \
    -CAfile $CA \
    -keyform engine -key $SLOT:$KID \
    -cert $KID.pem

EOM 
```

这很容易翻译成本机代码——只需在 openssl apps.c 文件中的 apps.c 中搜索引擎——看看它是如何完成的。在大多数情况下，它是一些

```
pkey = ENGINE_load_private_key(e, file, 
```

与旧的相反

```
BIO_read_filename(key,file)
pkey=d2i_PrivateKey_bio(key, NULL); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-12T11:49:49.567

存在2个选项：

1.  PKCS#11。几乎每个 USB 加密令牌和智能卡供应商都为您可以调用的 PKCS#11 提供驱动程序 DLL。我需要注意 PKCS#11 接口规范非常松散，这会导致不同供应商之间的怪癖和不兼容。即，您可能需要在一台设备中使用一组证书属性，而在另一台设备中使用不同的一组属性。
2.  加密API。大多数供应商提供一个 CryptoAPI 模块 (CSP)，它将证书“映射”到 Windows 证书存储中，并且您使用它进行签名的方式与在 Windows 证书存储中使用任何证书的方式相同。这意味着在 Windows API 中使用各种 Crypt* 、 Cert* 和类似函数。

我认为 OpenSSL 不能用于您的任务 - 您需要使用 CryptoAPI 或 PKCS#11。

我们的[SecureBlackbox](http://www.eldos.com/sbb/desc-pki.php)产品提供统一的高级接口，用于根据各种加密标准并使用 PKCS#11 和/或 CryptoAPI 对数据进行签名。仍然在 PKCS#11 的情况下，您（或完成签名的系统的操作员）需要知道 PKCS#11 驱动程序 DLL 的路径。SecureBlackbox 可以使用其库版本从 C++ 中使用。

# c# - 事件触发多次，但代码应该只执行一次

> ID：15359498
> 
> 赞同：1
> 
> 时间：2013-03-12T11:06:46.860
> 
> 标签：c#, winforms, events, event-handling

我有一个触发 6 次的事件，我希望我的弹出窗口只出现一次而不是 6 次。我尝试使用标志，但无法从同一事件中重置它。我试图比较值，但没有奏效，因为我一直得到相同的结果。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:10:48.807

我假设这是在单线程的 winforms 应用程序中：您可以使用静态布尔变量“EventReceived”，在显示弹出窗口后的第一个事件中设置为 true；只要“EventReceived”为真，就不再显示弹出窗口；如果弹出窗口关闭，则将“EventReceived”设置回 false。

当然，问题是，为什么你会多次收到事件。也许您可以避免这种情况或以不同的方式处理它 - 但您必须向我们提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:19:47.653

尝试使用静态标志变量。然后您可以从同一事件中重置标志。在应用程序第一次执行 onEvent 代码段时，您需要标记该标志。在 inEvent 代码段中，您可以包含您的操作，并且在到达该部分代码之前，您必须检查您的标志。（通过 if 子句）。如果您需要在 6 次后重置标志，您可以维护一个计数器变量，并通过计数器值计算您所处的触发周期。当计数器达到 6 时，您可以重置标志变量。

# wpf - 与 scrollviewer 和 minWidth 结合使用时，gridsplitter 的行为不符合预期

> ID：15359502
> 
> 赞同：3
> 
> 时间：2013-03-12T11:07:03.143
> 
> 标签：wpf, scrollviewer, gridsplitter

*   我有一个网格作为背景容器
*   此网格包含一个滚动查看器，因此当我向上调整窗口大小时，内容会随之扩展，但是当我向下调整窗口大小时，当我达到 sv 内容的 minWidth 时，滚动条会出现在滚动查看器上
*   此滚动查看器包含一个包含两列的网格
*   该网格在每一列中包含一个滚动查看器，每个滚动查看器又包含一个网格。
*   我在第一列上有一个网格拆分器，以便我可以调整列的大小

**免责声明：**我知道这不是组织此布局的最佳方式，但这实际上是我发现的最简单的表示形式，可以重现我在更复杂的布局中遇到的问题，因此请不要提供会重新组织层的解决方案

这是 xaml ：

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Text Project">

    <!--background grid-->
    <Grid>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

            <!--two columns layout-->
            <Grid MinWidth="600">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <Grid MinWidth="200" Background="Red"/>
                </ScrollViewer>

                <GridSplitter HorizontalAlignment="Right" VerticalAlignment="Stretch" Width="6"/>

                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <Grid MinWidth="200" Background="Blue"/>
                </ScrollViewer>
            </Grid>

        </ScrollViewer>

    </Grid>

</Window> 
```

目标如下： - 如果我向上调整窗口大小，一切都会缩放 - 如果我向下调整大小，当我达到 minWidth 时，最上面的滚动查看器上的滚动条出现并且其内容停止收缩。（这部分工作正常） - 无论最上面的滚动查看器的大小如何，我都可以使用 gridsplitter 调整两列的大小 - 当我达到一列的最小宽度时，滚动条出现在该列的滚动查看器上并且其内容停止收缩

问题：第二部分永远不会发生。我得到的是我可以调整大小直到达到两个子网格之一的 minWidth，然后 gridsplitter 停止移动，我无法进一步缩小并且滚动条永远不会出现。

我注意到，如果我删除最顶层的网格及其关联的滚动查看器，它会按预期工作：

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Text Project">

            <!--two columns layout-->
            <Grid MinWidth="600">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>

                <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <Grid MinWidth="200" Background="Red"/>
                </ScrollViewer>

                <GridSplitter HorizontalAlignment="Right" VerticalAlignment="Stretch" Width="6"/>

                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                    <Grid MinWidth="200" Background="Blue"/>
                </ScrollViewer>
            </Grid>

</Window> 
```

我不明白为什么我将内部网格放入滚动查看器这一事实会改变 gridsplitter 和内部滚动查看器的行为，所以我有人知道解决方案，我会很高兴

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:33:19.583

`Width`尝试将两列的绑定`Grid`到`ActualWidth`外部的`ScrollViewer`，如下所示：

```
<!--two columns layout-->
<Grid MinWidth="600" Width="{Binding RelativeSource={RelativeSource AncestorType=ScrollViewer}, Path=ActualWidth}"> 
```

# c# - 无法同时运行 kinect 语音、姿势和手势识别

> ID：15359504
> 
> 赞同：0
> 
> 时间：2013-03-12T11:07:10.983
> 
> 标签：c#, c++, kinect, speech-recognition, gesture-recognition

我正在做一个使用 kinect 的项目。

我有这个使用三个 dll 的主要项目。一个dll用于c++中的语音识别，另一个用于c++中的姿势识别，第三个dll用于c#中的手势识别。

Speech 使用 kinect 音频流，pose 使用颜色和骨架流，手势使用骨架流。

现在的问题是在初始化 kinect 使用的所有三个流之后，音频和姿势 dll 可以正常工作，但是手势部分是用 C# 编写的，它需要重新初始化 kinect 的骨架流以在其骨架准备好的方法中使用它。

如果我只调用手势 dll 它运行良好，如果我只调用音频和姿势而不调用手势它们也运行良好。

但是调用所有三个只会导致最后一个调用（手势或姿势+音频）运行。

那么请如果有人知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:09:36.873

> 但是手势部分是用 C# 编写的，它需要重新初始化 kinect 的骨架流以在其骨架中使用它，从方法中准备好。

这不应该发生。无论是手势库还是姿势库，都不需要初始化 Kinect 的数据流。您应该做所有这些，然后将数据传递给这些库。如果这些库中的任何一个负责初始化流，则应将其替换。

为什么他们不应该初始化流本身的最好例子正是你遇到的。

如果一个或两个都在初始化骨架流时遍历另一个，那么您将需要获取代码并修复它们，使用不同的库或编写自己的库。除非库中有一个只查看数据的函数，否则您错过了该函数，并且不会初始化流。

# asp.net - sql 2008 r2 倒数计时器

> ID：15359505
> 
> 赞同：1
> 
> 时间：2013-03-12T11:07:11.727
> 
> 标签：asp.net, sql-server-2008, datetime

我的表中有一个名为 TimeLeft 的列，类型为 datetime，days:hours:minutes（即：1:12:30 为 1 天 12 小时 30 分钟）

我需要做的是通过 .net 页面提取这些数据，我需要它从输入到 0 实时倒计时。

另外，如果我只想在列中表示 dd:hh:mm 应该使用什么数据类型（即：07:00:00 将是 7 天）

如何去做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:52:02.727

您不应该保存当前的倒计时时间，而是保存倒计时的结束时间。然后计算结束时间之前的剩余时间。这会给你倒计时。

# .net - 内存中的单元测试 - sql server

> ID：15359506
> 
> 赞同：4
> 
> 时间：2013-03-12T11:07:13.017
> 
> 标签：.net, sql-server, unit-testing, connection-string

我有一个连接到 SQL Server 数据库的应用程序。数据库配置有连接字符串。

我有一些单元测试，一切正常。但它连接到我的真实数据库（通过读取 connectionString）并且我的测试填充了这个数据库。我不希望这样，我宁愿连接到内存数据库，对我的数据库没有影响。

它是否存在解决方案？如何配置我的 connectionString 以进行测试？

问候。

# javascript - 让我的文本框理解 html img 标签

> ID：15359508
> 
> 赞同：2
> 
> 时间：2013-03-12T11:07:19.697
> 
> 标签：javascript, html

在我的文本框中插入一个新的表情符号时，我想显示为表情符号图像而不是表情符号符号我怎么能这样做而不是（`':)'`-> 将图像表示在我的文本框中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:27:46.330

一种方法：代替文本框，使用`<div contenteditable="true"></div>`. 当用户键入时，更改图像笑脸的出现次数。提交表单时，您的 javascript 需要将该 div 的内容转换回纯文本并将其放入字段中以供提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T11:34:34.090

如果您想使用图像，则需要您显着更改 HTML。您需要在诸如 a 之类的东西上使用[Content Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)`<span>`功能，而不是常规输入框。然后，您需要 JavaScript 代码来监视按键事件，并且每当它看到 a `:)`（或其他）时，它都会将代码替换为适当的`<img>`.

但是，与您的文本框保持一致的快速而肮脏的解决方案是使用相同的方法，但使用[Unicode 表情符号字符](http://en.wikipedia.org/wiki/Emoji#Emoji_in_the_Unicode_standard)（而不是图像）。这仅适用于具有适当字体字形的平台——尽管常见的表情符号得到更广泛的支持——但它给了你这个想法：

HTML：

```
<input class="emojify" type="text" /> 
```

JavaScript（使用 jQuery，让每个人的生活更轻松）：

```
$(document).ready(function() {
  // Map plaintext smilies to Unicode equivalents
  var emoji = {
                ':)': '\u263a',
                ':(': '\u2639'
              },

      // Function to escape regular expressions
      reEscape = function(s) {
                   return s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
                 };

  $('input.emojify').keyup(function() {
    var text = $(this).val();

    // See if any of our emoji exist in the text and replace with Unicode
    $.each(emoji, function(plaintext, unicode) {
       text = text.replace(new RegExp(reEscape(plaintext), 'g'), unicode);
    });

    // Replace text with new values
    $(this).val(text);
  });
}); 
```

这是关于 jsFiddle的[工作演示。](http://jsfiddle.net/EJJuM/)请注意，每次`keyup`触发事件时都会重置插入符号的位置。我相信你可以以某种方式解决这个问题，但是这段代码足以说明这个过程。

# .htaccess - 使用 .htaccess 将非 www URL 重定向到 www (301) 的子域出现问题

> ID：15359509
> 
> 赞同：2
> 
> 时间：2013-03-12T11:07:22.173
> 
> 标签：.htaccess, redirect

我通过 .htaccess 重写规则将非 www 请求重定向到 www。

> RewriteCond %{HTTP_HOST} !^www
> 
> 重写规则 (.*) www.%{HTTP_HOST}/$1 [L,R=301]

但是现在我遇到了子域的问题。当我访问时`touch.111.com`，上述规则重定向到`touch.www.111.com`（无法访问），并且网站在触摸设备上中断。

请告诉我如何解决上述问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:00:58.643

如果您只想重定向`domain.com`到`www.domain.com`并保留子域（例如`touch.domain.com`），则必须具体说明：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain\.com [NC]
RewriteRule ^(.*) http://www.domain.com/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T21:07:42.290

这是适用于任何域名的通用解决方案：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

见[http://www.htaccessredirected.com/force-redirecting-non-www-to-www-htaccess.htm](http://www.htaccessredirected.com/force-redirecting-non-www-to-www-htaccess.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-09T08:50:16.720

```
# For sites running on a port other than 80
RewriteCond %{HTTP_HOST}   !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteCond %{SERVER_PORT} !^80$
RewriteRule ^/(.*)         http://www.example.com:%{SERVER_PORT}/$1 [L,R]

# And for a site running on port 80
RewriteCond %{HTTP_HOST}   !^www\.example\.com [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/(.*)         http://www.example.com/$1 [L,R]

http://httpd.apache.org/docs/2.0/misc/rewriteguide.html 
```

# c# - 交叉发布时不显示目标aspx页面

> ID：15359511
> 
> 赞同：2
> 
> 时间：2013-03-12T11:07:25.263
> 
> 标签：c#, asp.net, webforms, cross-page-posting

我是 ASP.NET 的新手。我正在尝试使用网络表单。我有 2 个页面：NewOrder.aspx 捕获用户的订单，然后交叉发布到 SaveOrder.aspx，我想在其中保存订单并向用户显示一些信息。

```
 <telerik:RadButton ID="BtnSubmirOrder" runat="server" ButtonType="StandardButton" AutoPostBack="true"
                Text="Place order" PostBackUrl="SaveOrder.aspx">
 </telerik:RadButton> 
```

加载 SaveOrder.aspx 时，下面的代码设置其控件值并保存订单。但是浏览器停留在 NewOrder.aspx。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (PreviousPage==null || !PreviousPage.IsCrossPagePostBack)
            Response.Redirect("~/Default.aspx");

        var referencingPage = PreviousPage as NewOrder;
        int id = Int32.Parse(referencingPage.SelectedPublicationId);

        DateTime neededBy = referencingPage.SelectedOrderDate;

        LblSummaryIsbn.Text = referencingPage.SelectedIsbn;
        LblSummaryNbrCopies.Text = referencingPage.NbrOfOrderedCopies;
        DateTime orderDate = DateTime.Now;
        LblSummaryOrderDate.Text = orderDate.ToShortDateString();
        LblSummaryTitle.Text = referencingPage.SelectedPublicationTitle;
        int quantity = Int32.Parse(referencingPage.NbrOfOrderedCopies);
        StockContainer _context = new StockContainer();
        Order newOrder = Order.CreateOrder(orderDate, quantity, neededBy, id);
        _context.Orders.AddObject(newOrder);
        _context.SaveChanges();
    } 
```

我可以从 javascript 中看到单击按钮时表单的操作设置为 SaveOrder.aspx 那么为什么浏览器不显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:28:36.820

我认为您的浏览器停留在 NewOrder.aspx 上的原因是您没有与按钮关联的按钮单击事件。在没有看到您的其余代码的情况下，我不确定为什么表单的操作看起来不同。

您可以执行以下操作来引入按钮单击事件。重定向逻辑可以进入那里。

**标记：**

```
<telerik:RadButton ID="btnSubmit" runat="server" Text="Place Order" 
OnClick="btnSubmit_Click" /> 
```

代码：

```
public class NameOfPage
{
    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        // You could do validation here and display an error message if something is not right.
        // For simplicity I am assuming the data comes from a set of textboxes.
        if (!PageIsValid())
        {
            return;
        }

        StockContainer _context = new StockContainer();
        Order newOrder = Order.CreateOrder(txtOrderDate.Text, txtQuantity.Text, txtNeededBy.Text, id);
        _context.Orders.AddObject(newOrder);
        _context.SaveChanges();
        // Add your redirect logic here.
    }

    private bool PageIsValid()
    {
        if (string.IsNullOrEmpty(txtOrderDate.Text))
        {
            return false;
        }

        if (string.IsNullOrEmpty(txtQuantity.Text))
        {
            return false;
        }

        // and so on for the other fields that are required.
        return true;
    }
} 
```

# asp.net - asp.net 项目中会话数据的位置

> ID：15359512
> 
> 赞同：1
> 
> 时间：2013-03-12T11:07:26.330
> 
> 标签：asp.net, authentication, session-variables

我正在 asp.net 中做一个项目。它使用我用 2 个文本框和一个按钮实现的登录功能。没有什么花哨。

所以现在我必须区分登录的是哪种用户，因为有不同的角色，如管理员、用户、访客......

所以我需要知道的是 Session["UserAuthentication"] 是什么以及它的作用...我认为我可以将此数据添加到一个额外的表中以记录所有会话...这是一个好方法吗？

这是我的身份验证方法：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string username = tbUsername.Text;
            string pwd = tbPassword.Text;
            string s;
            s = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            SqlConnection con = new SqlConnection(s);
            con.Open();
            string sqlUserName;
            sqlUserName = "SELECT Username, UserPassword FROM Benutzer WHERE Username ='" + username + "' AND UserPassword ='" + pwd + "'";
            SqlCommand cmd = new SqlCommand(sqlUserName, con);
            string CurrentName;
            CurrentName = (string)cmd.ExecuteScalar();
            if (CurrentName != null)
            {
                Session["UserAuthentication"] = username;
                Session.Timeout = 1;
                Response.Redirect("Default.aspx");
            }
            else
            {
                lblStatus.ForeColor = System.Drawing.Color.Red;
                lblStatus.Text = "Benuztername/Password ungültig!";                               
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:18:27.753

> `Session["UserAuthentication"]`是一个变量，它将在`username`该特定当前用户的所有页面中全局保存 的值。

是的，您可以将数据添加到`SQL Table`. 为此，您需要将其添加到您的`web.config`文件中。

```
<sessionState mode="SQLServer" sqlConnectionString="data source=yourDataSource;user id=username;password=password" cookieless="false" timeout="20" /> 
```

> 以防万一您想知道变量的 存储在`Database`哪里`SessionId`- 为此您需要`ASPState Database`在服务器上安装 。`web.config`并如上所述在文件上相应地传递连接字符串。
> 
> 如何添加数据库 ASPState？
> 1\. 转到这个路径：**C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319** 2.
> 在这里你会找到一个你需要在你的.`script``InstallSqlState.sql``SQL server`

# c# - 实体框架：包含不同乘法实体的公共数据的表

> ID：15359514
> 
> 赞同：2
> 
> 时间：2013-03-12T11:07:29.367
> 
> 标签：c#, entity-framework, ef-code-first, mapping

我的数据库中有很多表，其中一个需要为所有这些表保存公共数据。如何使用 EntityFramework CodeFirst 映射这些表，以便我可以使用普通查询 Lazy 或 Eager 加载此类数据？

这就是我的意思：

实体：

```
public class Table1 
{
  [Key]
  public int Id { get; set; }

  ...etc data
}

public class Table2 
{
  [Key]
  public Guid Id { get; set; }

  ...etc data
}

public class Table3 
{
  [Key]
  public string Id { get; set; }

  ...etc data
} 
```

还有一张包含所有这些数据的表格：

```
public class CommonDataTable
{
   [Key]
   public Guid Id { get; set; }
} 
```

通常我会通过创建如下表来映射它：

```
public class CommonDataMappingTable
{
  [Key]
  public Guid Id { get; set; }
  public string Mask { get; set; } // like: typeof(Table3).Name
  public string MappedID { get; set; } // like: Table3.Id.ToString()
  public virtual CommonDataTable MappedData { get; set; }    
} 
```

但是一旦我对实体框架不熟悉，我就是不知道如何在 EF CodeFirst 模型中映射这种关系。感谢您的宝贵时间，并为我糟糕的英语感到抱歉。

# ios - 上传到 youtube 的视频具有低质量的预览缩略图

> ID：15359517
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:07:33.293
> 
> 标签：ios, objective-c, youtube-api

我有一个将视频上传到 youtube 的 iphone 应用程序。它可以毫无问题地上传视频文件。但是存在缩略图预览图像质量非常低的问题。

我的问题是，是否可以使用 youtube api 设置不同的预览图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:27:36.997

不，这对于标准 API 是不可能的。

有关可能的前进方式，请参阅此答案。[Youtube API - 设置视频缩略图](https://stackoverflow.com/questions/7654719/youtube-api-set-the-thumbnail-of-video-python)

# mysql - 在 Excel 中运行 SQL 查询

> ID：15359524
> 
> 赞同：0
> 
> 时间：2013-03-12T11:00:25.237
> 
> 标签：mysql, reporting, excel

我在一家公司工作，出于某种原因，我被甩去做统计数据。

我得到了大量的数据转储，我不得不做一些真正重复的数据按摩。

显然，第一个解决方案是编写一个脚本来为我执行此操作。我不能。我不允许将服务器下载到我的 PC 中，作为一名 PHP 程序员，我不能这样做。

其次，我想将这些 txt 文件导入 MySQL 数据库并对其运行查询。再说一次，我不能。我什至不允许在我的 PC 中拥有 MySQL 数据库。

**首先，让我描述一下我希望实现的目标。** 我得到了一个数据转储，我正在尝试运行类似于以下的查询：

```
SELECT SUM `price` FROM <this excel sheet> WHERE `date`>`somedate` AND `type`=`sometype` 
```

我尝试对在 Excel 上运行查询进行一些研究，这给了我不错的结果。我可以使用自动过滤器/高级过滤器来过滤掉与我无关的结果。然后我可以使用 autosum 来实现价格的总和。

然而，这是一个太漫长的过程。这比手动完成要好得多，但对我来说还不够好。我正在寻找一种编程方式来解决这个问题。

条件：我无法在我的 PC 中安装任何 apache/mySQL 服务器。但是，我被允许安装软件。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:12:25.273

Excel 并不是执行“重复数据按摩”的最差工具（实际上，它通常是我处理此类任务的首选）。关键是您学习使用公式和 VBA 编程。使用 VBA，您可以在 Excel 中自动执行（好的，几乎）**所有**您可以手动执行的操作。像上面这样的查询需要在 VBA 中多写几行，以程序样式编写，但您可以立即将结果存储在聚合表中，格式化它，添加一些代码以预先将转储加载到 Excel 表中等等自动化整个过程，而不仅仅是查询部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:20:55.870

您可以使用[FreeSQLEditor 之](http://www.werysoft.com/FreeSQLEditor.aspx)类的工具与Excel 文件建立 ODBC 连接。在这种情况下，您的工作表将变成表格，然后您可以对其执行查询。

更新：FreeSQLEditor 是共享软件。您可以改用ODBC[查询工具](http://sourceforge.net/projects/odbcquerytool/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:34:45.170

您绝对应该尝试[DBxtra](http://www.dbxtra.com/)，它可以轻松连接到 Excel（和其他数据库），您可以针对 Excel 工作表创建 SQL 查询，就像它们是表格一样，让您可以轻松地将数据输出回 Excel。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T16:06:42.077

您不需要 SQL-Server。您可以在 Excel 中轻松完成。

1.  连接日期和类型。
2.  Vlookup 查找您的新主题标签（日期和类型）

这里有一个最小的例子：

[https://docs.google.com/spreadsheet/ccc?key=0AgBAVSqx4789dHA2M1lQd0JaY0hidkVfQmNqbmZjX2c&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AgBAVSqx4789dHA2M1lQd0JaY0hidkVfQmNqbmZjX2c&usp=sharing)

如果要求和，可以使用 Sumifs 函数。

# iphone - UITableView 上显示的多个附件复选标记

> ID：15359527
> 
> 赞同：0
> 
> 时间：2013-03-12T11:08:02.503
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个 UITableView，它在选择一行时显示复选标记。问题是当表格视图滚动时，当只选择一个行时会显示多个复选标记。当表格滚动和出队过程发生时，问题就出现了。这是我的 cellForRowAtIndexPath: 方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];

        cell.selectedBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];

        cell.selectedBackgroundView.backgroundColor = [UIColor colorWithRed:204.0/255.0 green:56.0/255.0 blue:55.0/255.0 alpha:1];

    }

    // Get item from tableData
    NSDictionary *item = (NSDictionary *)[displayItems objectAtIndex:indexPath.row];

    cell.textLabel.text = [item objectForKey:@"key"];

    [cell.textLabel setFont:[UIFont fontWithName: @"Asap-Bold" size: 14.0f]];

    return cell;
} 
```

和 didSelect 方法：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    selectedCityTableString = cell.textLabel.text;

    cellAccessoryImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon-tick.png"]] ;
    cellAccessoryNoneImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@""]] ;

    if (cell.accessoryType==UITableViewCellAccessoryNone)
    {
        //        cell.accessoryType=UITableViewCellAccessoryCheckmark;

        cell.accessoryView = cellAccessoryImageView;

        if (prev!=indexPath.row) {
            cell=[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:prev inSection:0]];
            //cell.accessoryType=UITableViewCellAccessoryNone;
            cell.accessoryView = cellAccessoryNoneImageView;

            prev=indexPath.row;
        }
    }
    else{
        //        cell.accessoryType=UITableViewCellAccessoryNone;
        cell.accessoryView = cellAccessoryNoneImageView;

    }

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

    NSString *mutCityStr = [[selectedCityTableString stringByReplacingOccurrencesOfString:@" " withString:@"+"] lowercaseString];

   // NSString *mutCityStr = @"c";

    [prefs setObject:mutCityStr forKey:@"selectedCityTableString"];
    [prefs synchronize];

#ifdef DEBUG    
    NSLog(@"mutCityStr is %@",mutCityStr);
    NSLog(@"selectedCityTableString is %@",selectedCityTableString);
    NSLog(@"posting notification from TWO TABLES");
#endif

    [[NSNotificationCenter defaultCenter] postNotificationName:@"TTSelectedList" object:selectedCountryTableString];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:15:09.470

假设您有一个名为的属性（属性），`selectedRow`请使用以下方法的组合：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...

    if (indexPath.row == self.selectedRow) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // If there is a cell selected deselect
    if (self.selectedRow != NSNotFound) {
        NSIndexPath *previousIndexPath = [NSIndexPath indexPathForRow:self.selectedAQIType inSection:0];
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:previousIndexPath];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

    // Select the touched cell
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
    self.selectedRow = indexPath.row;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:24:26.547

In your .h file

```
int selectedRow; 
```

In your .m file

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
        // your other code for cell init,etc
        int row = [indexPath row];
        cell.accessoryType = (row == selectedRow) ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;

        cell.textLabel.textColor= (row == selectedRow) ? [UIColor colorWithRed:242.0f/255.0f green:104.0f/255.0f blue:42.0f/255.0f alpha:1] : [UIColor blackColor] ;

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    selectedRow = [indexPath row];
    [tableView reloadData];
} 
```

Hope this helps!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:10:42.253

`UITableView`的委托方法`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`基于重用标识符重用单元格。因此，您需要将整个单元格内容重置为默认值。

在您的情况下，在返回单元格之前取消选中单元格的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:14:27.080

要解决此问题，请将您选择的行索引存储在一个*`NSArray`*. （在*`didSelectRowAtIndexPath`*方法中）

在*`cellForRowAtIndexPath`*方法中，检查*`indexPath.row`*该数组中是否可用，然后启用您的复选标记，否则禁用。

*注意：为检查取消检查事件维护数组*

希望这会帮助你。

# java - 自动生成的 javascript jax-rs 客户端

> ID：15359530
> 
> 赞同：6
> 
> 时间：2013-03-12T11:08:09.697
> 
> 标签：java, javascript, rest, jax-rs

我想为我生成一些基于 JAX-RS 注释的 Javascript 服务存根。

我在[RESTEasy](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/AJAX_Client.html)中找到了一些东西，但是在使用 SpringMVC 上配置的 RESTEasy 时无法使其工作。似乎只有将 RESTEasy 配置为 servlet 时它才有效。

但是，我希望在构建时而不是运行时生成 JS 代码。

你知道任何可能做这样的事情的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:50:54.013

Netbeans 在“Web 服务”内有一个向导“RESTful JavaScript Client”，它生成一个包含所有所需 javascript 的 html 页面。这可能是一个很好的起点。

您将需要一个描述您的宁静 Web 服务的 wadl。你可以试试[这个](http://tomayac.de/rest-describe/latest/RestDescribe.html)来生成这个 wadl 文件。

# ios - 在 FXLabel 中获取换行符

> ID：15359531
> 
> 赞同：0
> 
> 时间：2013-03-12T11:08:15.470
> 
> 标签：ios, objective-c, uilabel

我正在使用`FXLabel`& 我想要换行的索引或字符（换行）。我还想要`FXLabel`. 我用谷歌搜索但没有得到任何运气。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:18:55.617

为什么不直接调用 FXLabel 内部使用的方法呢？这是 FXLabel 声明为 NSString 上的一个类别的私有方法，但您可以通过在另一个类别中声明它来在代码中公开它，如下所示：

```
@interface NSString (FXLabel_Private)

- (NSArray *)FXLabel_linesWithFont:(UIFont *)font
                 constrainedToSize:(CGSize)size
                     lineBreakMode:(NSLineBreakMode)lineBreakMode
                       lineSpacing:(CGFloat)lineSpacing
                  characterSpacing:(CGFloat)characterSpacing
                      kerningTable:(NSDictionary *)kerningTable
                      allowOrphans:(BOOL)allowOrphans

@end 
```

然后，您可以在标签字符串上调用该方法并传入与您的标签设置匹配的参数。它返回一个包含字符串每一行的数组。

# jquery - jquery检查所选页面是否为当前页面

> ID：15359533
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:08:22.240
> 
> 标签：jquery

如果在下拉菜单中选择的页面是我已经打开的页面，如何使用 jquery 检查它不会再次加载？这是一个片段：

```
$('select').change(function () {    
    window.location.href = $(this).val();
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:10:44.373

使用`if`语句：

```
$('select').change(function() {
    if(window.location.href != this.value)
        window.location.href = this.value;
}); 
```

# ios - 在使用绝对路径加载图像时需要一点帮助

> ID：15359535
> 
> 赞同：2
> 
> 时间：2013-03-12T11:08:37.777
> 
> 标签：ios, uiimageview, imageview, imagenamed

我有 400 张具有重复名称的图像，在我的项目中包含的文件夹中分层划分，现在我想加载具有绝对路径`imagenamed`的图像，我尝试使用但不是加载图像，而是显示空框。现在我需要一点帮助来了解如何使用绝对路径显示图像。

我的项目的层次结构

```
Project
     -> Project Files (i-e App Deligate and view controllers)
     -> Resources
            ->Images
                  ->1
                      ->1.jpg
                      ->2.jpg
                      ->3.jpg
                  ->2
                      ->1.jpg
                      ->2.jpg
                      ->3.jpg 
```

我用来加载图像的方法

```
[self.leftImage setImage:[UIImage imageNamed:@"Images/1/1.jpg"] forState:UIControlStateNormal]; 
```

等等......任何一个，帮助。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:18:27.317

根据您的评论

以下方法可能对您有所帮助

```
- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)ext inDirectory:(NSString *)subpath;
- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)ext inDirectory:(NSString *)subpath forLocalization:(NSString *)localizationName;

- (NSArray *)pathsForResourcesOfType:(NSString *)ext inDirectory:(NSString *)subpath;
- (NSArray *)pathsForResourcesOfType:(NSString *)ext inDirectory:(NSString *)subpath forLocalization:(NSString *)localizationName; 
```

你可以试试这段代码

```
NSString * sample=[[[NSBundle mainBundle]pathForResource:[NSString stringWithFormat:@"1"] ofType:@".jpg" inDirectory:@"foldername"];
[self.leftImage setImage:[UIImage imageWithContentsOfFile:sample] forState:UIControlStateNormal]; 
```

而且你不能有 2 个同名的图像。在构建您的应用程序时，您将收到重复符号警告。

为了节省内存，请使用 pathforresource 类型而不是为 UIImage 命名的图像，因为它将在 ViewControllers 上有一些缓存。

希望能帮助到你 ！！！

# html-parsing - jsoup 的 java 或 jdk 版本要求

> ID：15359544
> 
> 赞同：3
> 
> 时间：2013-03-12T11:08:59.120
> 
> 标签：html-parsing, jsoup, jdk1.4

Jsoup 支持 jdk 1.4 吗？jsoup需要的jdk最低版本是多少？如果 jsoup 不支持 jdk 1.4，那么是否有任何其他 html 解析器可以与 jdk 1.4 一起使用来编辑我的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:33:46.310

jsoup 需要 Java 1.5。有关更多信息，请参阅[jsoup 下载页面](http://jsoup.org/download)。它不会在较低的 JRE 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T00:16:28.007

从理论上讲，您可以使用 jsoup 的*二进制文件（！）*到 java 1.2 .. 但是那是不可取的。如果可以，请使用 JDK 1.5+。

您访问的大多数（如果不是全部）接口都与之前的 1.5 兼容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-24T13:25:16.407

从版本 1.11.1 开始，Jsoup 需要 Java 7。

从版本 1.14.1 开始，Jsoup 需要 Java 8。

# jquery - ie7中的动画重复

> ID：15359545
> 
> 赞同：3
> 
> 时间：2013-03-12T11:09:03.737
> 
> 标签：jquery, jquery-animate

如何在 ie7 和 8 中制作 Jquery 连续循环动画？（ie9/chrome 工作正常）

这是我的代码

```
$(document).ready(function() {
        var $grower = $('#rain'); 

        function runIt() {
            $grower.animate({left:'48%',top:'800px',opacity:'0'}, 1000, function() {
                $grower.removeAttr("style");

                setTimeout(function() {
                    runIt();
                }, 100);
            });
        }

        runIt();
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:49:35.293

我在 IE 8 中试过这个，它对我[有用 http://jsfiddle.net/8EtKy/2/](http://jsfiddle.net/8EtKy/2/)

看一看。

**HTML**

```
<div id="rain"></div> 
```

**jQuery**

```
$(document).ready(function() {
        var $grower = $('#rain'); 
        function runIt() {
            $grower.animate({left:'48%',top:'800px',opacity:'0'}, 1000, function() {
                $grower.removeAttr("style");

            });
        }
            setInterval(runIt,100);
    }); 
```

**CSS**

```
#rain{
    width:50px;
    height:50px;
    background-color:#000;
} 
```

# lwuit - 关闭代号一中按钮操作的对话框

> ID：15359549
> 
> 赞同：1
> 
> 时间：2013-03-12T11:09:14.853
> 
> 标签：lwuit, codenameone

我制作了一个对话框，其中有一些按钮。

在该按钮之一的操作上，我想完成对话框。

我不想在其中添加任何命令。

请帮忙。

这是我的代码。

```
 `Form form = (Form) createContainer("/theme", "MYDialog1");
    Container container = (Container) findByName("Container", form);

    button = new Button(new Command("Close"),i));
    try 
    { 
        button.setUIID("LabelButton"); 
    }
    catch (Exception exception) 
    {
        exception.printStackTrace(); 
    }
    button.addActionListener(new ActionListener() 
    { 
        public void actionPerformed(ActionEvent evt) 
        {
        ??????
            }
    });
    container.addComponent(button);
    Dialog.show("", form, null);` 

            回答 #1

赞同：4

时间：2013-03-15T13:12:44.693

如果您将命令添加到对话框，它将默认处理对话框。

您可以手动调用`dialog.dispose()`以关闭对话框，以获取当前对话框只需使用`Dialog dlg = (Dialog)Display.getInstance().getCurrent();`

            回答 #2

赞同：0

时间：2013-03-12T15:10:08.990

您在对话框和容器之间没有任何关系。因为这个原因你不能处理对话框。

我从你的问题中了解到的是你不会使用命令，因为你想要你的 gui 按钮。

我的建议是创建这样的对话框（我认为可以工作）：

```
Dialog dialog = new Dialog();
    Display.getInstance().callSerially(new Runnable() {
        public void run() {
            dialog.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
            ...
            dialog.addComponent(dialog);

            button = new Button(new Command("Close"),i));
             try 
             { 
               button.setUIID("LabelButton"); 
              }
            catch (Exception exception) 
             {
            exception.printStackTrace(); 
             }
             button.addActionListener(new ActionListener() 
              { 
                  public void actionPerformed(ActionEvent evt) 
                    {
                        dialog.dispose();//???????????
                    }

            dialog.addCommand(okCommand);
            ...
            dialog.show();
        }
    }); 
```

此对话框需要是类成员才能被按钮识别。

```

# c++ - std::bind - 在 Visual Studio 中编译意外（未声明的标识符）错误

> ID：15359553
> 
> 赞同：4
> 
> 时间：2013-03-12T11:09:22.223
> 
> 标签：c++, visual-studio-2010, c++11, stdbind

对我来说，另一个令人不安的错误消息，如果我正确理解 std::bind 我可以像`_1`定义一个未给定的参数一样争论吗？正确的？考虑以下行：

```
std::function<bool(value_type, const std::string &)> 
                             func(std::bind(&Pred, _1, "name")); 
```

这应该有效，对吧？这将用于 std::find_if() 函数，因此第一个参数应该是值类型，第二个参数应该是字符串。

然而，Visual Studio 2010 抱怨这一点并显示以下错误消息：

> 错误 C2065：“_1”：未声明的标识符

这很奇怪，我怎么能在 Visual Studio 中说“嘿，第一个参数没有绑定”。Pred 是一个以`value_type, const std::string&`参数为参数的简单函数 - 返回一个布尔值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T11:18:00.733

在你的情况下，你想要这个：

```
std::function<bool(value_type, const std::string &)> 
                         func(std::bind(&Pred, std::placeholders::_1, "name")); 
```

# mustache - 检查助手中 mustache 变量的值

> ID：15359560
> 
> 赞同：1
> 
> 时间：2013-03-12T11:09:42.253
> 
> 标签：mustache, mustache.php

我有带有价格和货币名称的 JSON，如下所示：

```
[{"price": 123, "currency": "RUR"},
{"price": 456, "currency": "USD"},
{"price": 789, "currency": "EUR"}] 
```

另外，我使用 Mustache.php 来渲染它们。{{price}} {{currency}} 作为模板并获得：123 RUR 456 USD 789 EUR

但是，我想将“RUR”、“USD”、“EUR”替换为“Russian rubles”、“US Dollar”、“Euro”并得到

```
123 Russian rubles
456 US dollars
789 Euro 
```

我想，我可以使用助手

```
$mustache->addHelper('_curstyle', function($text) {
if ($text == "RUR") {return ("Russian rubles")};
if ($text == "USD") {return ("US dollars")};
if ($text == "EUR") {return ("Euro")};
}); 
```

但**$text 等于 "{{currency}}"**。而且我不能使用**if**构造。如何将 {{currency}} 转换为值，或将其预渲染以在方程式中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:51:16.223

假设您使用 Mustache.php v2.1，您可以使用作为可选第二个参数传递给您的助手的 LambdaHelper 来呈现原始块体：

```
$mustache->addHelper('_curstyle', function($text, $mustache) {
    switch($mustache->render($text)) {
        case 'RUR':
            return 'Russian rubles';
        case 'USD':
            return 'US dollars';
        case 'EUR':
            return 'Euro';
        default:
            return $text;
    }
}); 
```

# scala - Scala 惰性集合增长

> ID：15359561
> 
> 赞同：2
> 
> 时间：2013-03-12T11:09:49.447
> 
> 标签：scala, collections, lazy-evaluation

这个问题有点理论化。我有一个对象，其中包含一个私有可变列表或映射，其增长仅是附加的。我相信我可以争辩说对象本身是功能性的，在功能上是透明的，并且对于所有外观而言，是不可变的。所以例如我有

```
import scala.collection.mutable.Map

case class Foo(bar:String)

object FooContainer {
  private val foos = Map.empty[String, Foo]

  def getFoo(fooName:String) = foos.getOrElseUpdate(fooName, Foo(fooName))
} 
```

我可以用列表做一个类似的案例。现在我想象要真正发挥功能，我需要确保线程安全，我想我可以简单地使用锁、同步或原子引用来做到这一点。我的问题是这一切都是必要的和充分的，这是一种常见的做法，这种行为是否有既定的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:39:30.047

我会说“功能”确实是错误的术语。上面显示的确切示例可以称为“纯”，因为它的输出仅由其输入定义，因此没有任何（可见的）副作用。但实际上它是不纯的，因为它具有隐藏的内部状态。

> 给定相同的参数值，该函数始终评估相同的结果值。函数结果值不能依赖于任何可能随着程序执行或程序的不同执行而改变的隐藏信息或状态，也不能依赖于来自 I/O 设备的任何外部输入。[维基百科](http://en.wikipedia.org/wiki/Pure_function)

但是，如果您使`Foo`类可变，那么明显的杂质就会消失：

```
case class Foo(bar:String) {
    private var mutable:Int = 1
    def setFoo(x:Int) = mutable = x
    def foo = mutable
} 
```

类的可变性`Foo`导致`getFoo`不纯：

```
scala> FooContainer.getFoo("test").foo
res5: Int = 1

scala> FooContainer.getFoo("bla").setFoo(5)

scala> FooContainer.getFoo("bla").foo
res7: Int = 5 
```

为了使函数看起来是纯的，`FooContainer.getFoo("bla").foo`必须始终返回相同的值。因此，所描述的构造的“纯度”充其量是脆弱的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:39:34.197

作为一般规则，与持有可变类型`var`相比，持有不可变集合类型会在更新时被替换，这会更好。`val`前者从不处理创建后可能发生变化的值（除了拥有不断变化的值本身的类）。然后，您只需要适度注意何时将更新的值`var`发布给它，但是由于更新引用通常是原子的（除了在 32 位机器上将 a`long`或 a存储到 RAM 之类的事情），几乎没有风险`double`.

# c# - 启用窗口窗体 C# 的大小调整

> ID：15359564
> 
> 赞同：-4
> 
> 时间：2013-03-12T11:09:55.727
> 
> 标签：c#, winforms

我正在尝试启用调整我的窗口窗体的大小，因为将窗口拖到更大或更小的窗口中的选项应该可供用户使用。我已经设置了我的 FormBorderStyle = Sizable 并尝试像这样设置 max 和 MinimumSize：

```
 this.MaximumSize = new System.Drawing.Size(1680, 1050);
    this.MinimumSize = new System.Drawing.Size(995, 765); 
```

在 max 和 minimumsize 设置为 0,0 之前。但它仍然不起作用。

我有一个表单作为插入“shell 表单”的 3 个用户控件的 shell。这会影响调整大小的能力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:54:00.000

我已将表单设置为 MDI 容器。将我的 IsMdiContainer 设置为 false 后，我可以调整表单的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:16:05.463

确保您没有设置MaximumSize 和MinimumSize 布局属性。

# java - 如何使 lite/pro 版本的应用程序功能与引用的库略有不同

> ID：15359572
> 
> 赞同：0
> 
> 时间：2013-03-12T11:10:35.810
> 
> 标签：java, android, shared-libraries, multiple-apk

现在我有3个项目：

1.  包含我所有代码的库
2.  临空壳
3.  精简版空壳

我需要能够做四件事：

1.  `int`根据用户是否拥有专业版或精简版来更改库中
2.  `long`根据用户是否拥有专业版或精简版来更改库中
3.  `ads`在 lite shell 中添加
4.  更改`launch icon`. 不知道把这个放在哪里。将两个图标都放在库中还是将它们都放在库中？
5.  我有 2 个`Google Analytic`代码 - 一个用于跟踪 pro，另一个用于跟踪 lite
6.  我现在有一个`TextView`图书馆，里面有专业版的链接。我应该把它留在图书馆里，还是让它在专业版中不可见，或者把它从图书馆里拿出来，只放在精简版中？

我很难找到一个很好的例子来说明如何为这类事情设置代码。我只是将逻辑语句放在库中的某个位置，还是在 shell 中创建一些 java/xml 文件？所以现在空的 pro/lite 项目只是引用库，但没有 jars、xml 文件、java 文件、png 或其他任何东西。我已将两个 shell`AndroidManifest`包名称更改为对每个项目都是唯一的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:20:06.820

创建一个枚举怎么样？

```
public enum LibType
{
  PRO(
    0,
    1L,
    "PRO"
  ),
  LITE(
    10,
    20L,
    "LITE"
  );

  public final int intVal;
  public final long longVal;
  public final String analyticsCode;

  ...

  private LibType(
      int intVal,
      long longVal,
      String analyticsCode
    )
  {
    this.intVal = intVal;
    ...
  }
} 
```

# android - android onPrepareOptionsMenu 没有第二次按下菜单按钮

> ID：15359575
> 
> 赞同：0
> 
> 时间：2013-03-12T11:10:41.777
> 
> 标签：android, android-actionbar, menubar

我注意到在我的活动中实现 onPrepareOptionsMenu() 时 - 第一次按下效果很好 - 来自 onPrepareOptionsMenu() 的回调开始。但是当它仍然可见时（打开一些对话框）并且我希望第二次按下关闭它（触发回调以关闭对话框） - 菜单按钮上的第二次按下不会触发 onPrepareOptionsMenu()。不知道为什么

这就是我实现它的方式：

```
 @Override
public boolean onPrepareOptionsMenu(Menu menu) {

    if (onDoneListener != null) {
        onDoneListener.OnDone();

    }
    return false;
} 
```

编辑1：

我在评论者帮助后添加了下一个功能，但仍然没有运气。OnKeyDown() 也没有收到下一个菜单按钮按下。看起来菜单按钮在我按下后退按钮之前不会收到事件。这是代码：

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_MENU) {
        if (onDoneListener != null)
            onDoneListener.onDone();

    }
    return super.onKeyDown(keyCode, event);
} 
```

我也试图返回真假，但不是运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:19:49.943

What you are seeing is the exact intended behavior of `OnPrepareOptionsMenu`. It runs **before** the menu is shown, not after.

# android - GridLayout 膨胀异常

> ID：15359579
> 
> 赞同：1
> 
> 时间：2013-03-12T11:10:54.250
> 
> 标签：android, android-layout, android-widget

我想用一个非常简单的方法构建一个小部件`GridLayout`，但我得到了一个 InflateException：

```
Binary XML file line #2: Error inflating class android.widget.GridLayout 
```

只发生在 4.0 和 4.2 上是没有问题的（版本之间有区别吗？）有人知道吗？

堆栈跟踪

```
03-12 12:27:49.100: W/AppWidgetHostView(528): updateAppWidget couldn't find any view, 
using error view
03-12 12:27:49.100: W/AppWidgetHostView(528): android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.GridLayout
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.createView(LayoutInflater.java:606)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.RemoteViews.apply(RemoteViews.java:1581)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.appwidget.AppWidgetHostView.updateAppWidget(AppWidgetHostView.java:289)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.appwidget.AppWidgetHost.createView(AppWidgetHost.java:238)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.home.widget.WidgetManager.getWidgetView(WidgetManager.java:142)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.home.layer.AdapterHelper.getWidgetInfoView(AdapterHelper.java:280)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.home.layer.desktop.DesktopAdapter.getView(DesktopAdapter.java:100)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.paneview.PaneView.ensureItemView(PaneView.java:2343)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.paneview.PaneView.layoutItem(PaneView.java:2294)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.sonyericsson.paneview.PaneView.onLayout(PaneView.java:1199)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:930)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:930)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:930)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.RelativeLayout.onLayout(RelativeLayout.java:930)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.FrameLayout.onLayout(FrameLayout.java:444)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1653)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1511)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.LinearLayout.onLayout(LinearLayout.java:1416)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.widget.FrameLayout.onLayout(FrameLayout.java:444)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.View.layout(View.java:11390)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewGroup.layout(ViewGroup.java:4332)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1490)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2455)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.os.Looper.loop(Looper.java:137)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.app.ActivityThread.main(ActivityThread.java:4424)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at java.lang.reflect.Method.invokeNative(Native Method)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at java.lang.reflect.Method.invoke(Method.java:511)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:817)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:584)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at dalvik.system.NativeStart.main(Native Method)
03-12 12:27:49.100: W/AppWidgetHostView(528): Caused by: android.view.InflateException: Binary XML file line #2: Class not allowed to be inflated android.widget.GridLayout
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.failNotAllowed(LayoutInflater.java:618)
03-12 12:27:49.100: W/AppWidgetHostView(528):   at android.view.LayoutInflater.createView(LayoutInflater.java:558)
03-12 12:27:49.100: W/AppWidgetHostView(528):   ... 49 more 
```

布局 XML

```
<?xml version="1.0" encoding="utf-8"?>
 <GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="match_parent"

    android:useDefaultMargins="true"
    android:alignmentMode="alignBounds"
    android:columnOrderPreserved="false"

    android:columnCount="4"
    >

<TextView
        android:text="Email setup"
        android:textSize="32dip"

        android:layout_columnSpan="4"
        android:layout_gravity="center_horizontal"
        />

<TextView
        android:text="You can configure email in just a few steps:"
        android:textSize="16dip"

        android:layout_columnSpan="4"
        android:layout_gravity="left"
        />

<TextView
        android:text="Email address:"

        android:layout_gravity="right"
        />

<EditText
        android:ems="10"
        />

<TextView
        android:text="Password:"

        android:layout_column="0"
        android:layout_gravity="right"
        />

<EditText
        android:ems="8"
        />

<Space
        android:layout_row="4"
        android:layout_column="0"
        android:layout_columnSpan="3"
        android:layout_gravity="fill"
        />

<Button
        android:text="Next"

        android:layout_row="5"
        android:layout_column="3"
        /> 
```

```
 package com.path.testwidget;

 import android.appwidget.AppWidgetManager;
 import android.appwidget.AppWidgetProvider;
 import android.content.Context;
 import android.widget.RemoteViews;

public class TestWidget extends AppWidgetProvider {

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        final int N = appWidgetIds.length;

        RemoteViews rvs= new RemoteViews(context.getPackageName(), R.layout.balance_widget);

        //update all N widgets
        for (int i=0; i<N; i++) {

            int appWidgetId = appWidgetIds[i];
            appWidgetManager.updateAppWidget(appWidgetId, rvs);
        }

    }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:08:41.070

**RemoteView**仅允许某些布局在其内容中膨胀，您可以在[此处查看列表](http://developer.android.com/guide/topics/appwidgets/index.html#CreatingLayout)

例如，您可以看到不允许使用**TableView 。**您的 logcat 消息说不允许使用**GridView ，而文档说是。**我猜这个功能是相当新的，它在 4.2 之前的版本上是不允许的。或 4.1。

您可能应该在远程视图中使用另一种布局类型。

# c# - 找不到默认端点...但它就在那里？

> ID：15359580
> 
> 赞同：3
> 
> 时间：2013-03-12T11:10:59.007
> 
> 标签：c#, asp.net, web-services, asmx

正如标题所暗示的那样，我的项目一直告诉我它找不到默认端点元素，但它就在那里。我的意思是显然我一定错过了一些东西，但我无法弄清楚？？？！！！

完整错误消息：错误消息是“在 ServiceModel 客户端配置部分中找不到引用合同“WebChatSvc.ChatServiceSoap”的默认端点元素。这可能是……

WebChatSvc 是我在创建 Web 引用时选择的命名空间。

我的应用配置：

```
...
<appSettings>
<add key="ChatServiceSoap" value="http://localhost:1856/ChatService/ChatService.asmx" />
<add key="LogFilePath" value="" />
<add key="ConString" value="W2K8R2_SQL2K8R2;XXX;YYYY;TTTTT" />
<add key="ClientSettingsProvider.ServiceUri" value="http://localhost:1856/ChatService/ChatService.asmx" />
</appSettings>
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="ChatServiceSoap" />
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://localhost:1856/ChatService/ChatService.asmx" binding="basicHttpBinding" bindingConfiguration="ChatServiceSoap" contract="WebChatSvc.ChatServiceSoap" name="ChatServiceSoap" />
</client>
</system.serviceModel>

<applicationSettings>
<ChatClientControl.Properties.Settings>
  <setting name="ChatServiceSoap" serializeAs="String">
    <value>http://localhost:1856/ChatService/ChatService.asmx</value>
  </setting>
</ChatClientControl.Properties.Settings>
</applicationSettings>
</configuration> 
```

我已经尝试了许多不同的命名可能性变体，但无法完全弄清楚，因此任何指针都将不胜感激。

TIA JB

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T14:00:11.830

您创建了一个服务引用。您需要创建一个网络参考。

删除您当前添加的服务参考。这将删除您的端点配置。

在您的解决方案资源管理器中，右键单击引用，然后选择“添加服务引用”，然后单击“高级”（左下方按钮）。然后单击“添加 Web 引用”（左下方按钮）

然后添加服务。这将为带有 URL 的 Web 服务设置不同的配置。

虽然您可以使用服务参考来完成此操作，但需要做更多的工作。我认为，如果您只是将 asmx Web 服务添加为 Web 参考，它会为您省去一些麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-11T13:20:06.353

我也有这个错误。我的解决方案中有一个 asp.net mvc“Web”项目和一个“服务”项目。我将我的服务引用添加到我的服务项目中，该项目`<system.serviceModel>`向服务 app.config 添加了一个配置节点。`<system.serviceModel>`我通过将 app.config 复制到我的 Web 项目的 web.config 文件来修复它。

# css - 获取 GWT 标签的计算字体大小

> ID：15359582
> 
> 赞同：4
> 
> 时间：2013-03-12T11:11:03.213
> 
> 标签：css, gwt, label, font-size

我希望能够访问 GWT 标签的字体大小。我试过了：

```
String fontSize = label.getElement().getStyle().getFontSize() 
```

但这似乎只适用于以编程方式设置的字体大小（而不是由 CSS 规则决定的字体大小）。有任何想法吗？

谢谢，

~欧文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T09:07:21.423

如果它是您要查找的[计算大小](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)，GWT 不会开箱即用地提供它，但您应该能够使用简单`JSNI`的方法来检索它。就像是：

```
public static native String getComputedStyleProperty(Element element, String property)  /*-{
  if ($doc.defaultView && $doc.defaultView.getComputedStyle) {
    return $doc.defaultView.getComputedStyle(element, null).getPropertyValue(property);
  }
  return "";
}-*/; 
```

未经测试，但应该让你开始。请注意，`property`应该是`camelCase`，对于 IE < 9，您还应该检查`currentStyle`. 还应返回基于`element`'s style 属性的后备，而不是空字符串。另请参阅[获取 JS 中 DOM 元素的计算字体大小](https://stackoverflow.com/questions/1955048/get-computed-font-size-for-dom-element-in-js)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:35:47.207

不， [getFontSize](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/dom/client/Style.html#getFontSize%28%29) () 返回`CSS property only`。

尝试如下：

```
 String fontsize= DOM.getStyleAttribute(label.getElement(), "font-size"); 
```

# spring - Spring：返回 xml 以进行休息呼叫响应与预期不符

> ID：15359585
> 
> 赞同：1
> 
> 时间：2013-03-12T11:11:16.340
> 
> 标签：spring, rest, xstream

我正在尝试遵循以下教程： http: [//pfelitti87.blogspot.be/2012/07/rest-services-with-spring-3-xml-json.html](http://pfelitti87.blogspot.be/2012/07/rest-services-with-spring-3-xml-json.html)

这基本上是一个关于如何自动将你的 spring 控制器响应转换为 JSON\XML 的教程。后者使用 xstream。

而且我的配置和他的一模一样（除了要扫描的包明显）。

我的 JSON url 看起来像我期望的那样，但是 .xml url 没有返回我期望的结果。它开始于：

```
 <?xml version="1.0"?>
    <org.springframework.validation.BeanPropertyBindingResult><nestedPath/>
    <nestedPathStack serialization="custom"><unserializable-parents/><vector>
<default><capacityIncrement>0</capacityIncrement><elementCount>0</elementCount>
<elementData><null/><null/><null/><null/><null/><null/><null/><null/><null/><null/></elementData></default></vector></nestedPathStack><objectName>coursesTakenForDealer</objectName>-<messageCodesResolver class="org.springframework.validation.DefaultMessageCodesResolver"><prefix/><formatter class="org.springframework.validation.DefaultMessageCodesResolver$Format">PREFIX_ERROR_CODE</formatter></messageCodesResolver> 
```

并且只包含最后实际返回的对象。

此外，它似乎忽略了`@XmlAttribute`和`@XmlElement`注释。

我的 Person 类上有一个名称实例变量，标记为 @XmlAttribute 但它被转换为：

```
<person>
    <name>Jack</name>
</person> 
```

任何关于如何解决这个\引用更好的教程（可能使用 jaxb）的建议将不胜感激。

编辑：根据要求，我的部分输出（它不完全适合这里）。它是使用调用的：`http://localhost:8080/restTestApp/interestingPeople.xml`

编辑2：控制器：

```
@Controller
public class InterestingPeopleController {

    @RequestMapping(value="interestingPeople", method = GET)
    public InterestingPeople getCoursesTakenByDealers() {   
        InterestingPeople interestingPeople;
        //some logic (service calls etc) to fill it in
        return interestingPeople;
    }
} 
```

编辑3：我能够通过添加来解决这个问题：

```
<property name="supportedClasses">
    <list>                             
        <value>com.jackdans.model.InterestingPeople</value>
    </list>
</property> 
```

到我的`XStreamMarshaller`bean 配置。

# c++ - 'cout' 不是 'std' 的成员 & 'cout' 未在此范围内声明

> ID：15359589
> 
> 赞同：3
> 
> 时间：2013-03-12T11:11:29.243
> 
> 标签：c++, compiler-construction, g++

我意识到有几个这样的重复，但到目前为止它们都没有为我工作。我正在尝试使用 g++ 在 Ubuntu 上编译一个非常简单的 C++ 程序，但它给了我范围错误。

```
#include <iostream>
using namespace std;

int main()
{
  cout << "Hello world";
} 
```

**这给了我这个错误：**

```
sudo g++ -v test.c
test.c: In function ‘int main()’:
test.c:7:3: error: ‘cout’ was not declared in this scope 
```

我也尝试像许多其他帖子所说的那样定义范围，但这也不起作用，但给了我一个不同的错误：

```
#include <iostream>

int main()
{
  std::cout << "Hello world";
} 
```

**给出错误：**

```
test.c: In function ‘int main()’:
test.c:6:3: error: ‘cout’ is not a member of ‘std’ 
```

大多数在线建议都建议“使用命名空间 std;”、“#include”和“std::cout”。所以我一起尝试了所有3个，仍然没有运气:(

```
#include <iostream>
using namespace std;

int main()
{
  std::cout << "Hello world";
} 
```

**给出错误：**

```
test.c: In function ‘int main()’:
test.c:7:3: error: ‘cout’ is not a member of ‘std’ 
```

* * *

我已经浏览了几个在线论坛，但它们似乎都不适合我:(

这是一个更大问题的一部分，因为我的一个 linux make 不起作用。

顺便说一句，我使用的是 g++ 而不是 gcc，因为一些帖子搞砸了。

* * *

编辑1：

我将名称更改为 .cpp，并在没有 sudo 的情况下执行。这是详细的输出：

```
pranoy@pranoyubuntu1210:~/Desktop/SIP/SIPp/sipp-3.3$ g++ -v test.cpp -o test
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-2ubuntu1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Ubuntu/Linaro 4.7.2-2ubuntu1) 
COLLECT_GCC_OPTIONS='-v' '-o' 'test' '-shared-libgcc' '-mtune=generic' '-march=x86-64'
 /usr/lib/gcc/x86_64-linux-gnu/4.7/cc1plus -quiet -v -imultiarch x86_64-linux-gnu -D_GNU_SOURCE test.cpp -quiet -dumpbase test.cpp -mtune=generic -march=x86-64 -auxbase test -version -fstack-protector -o /tmp/cczzibvL.s
GNU C++ (Ubuntu/Linaro 4.7.2-2ubuntu1) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
ignoring nonexistent directory "/usr/local/include/x86_64-linux-gnu"
ignoring nonexistent directory "/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../x86_64-linux-gnu/include"
#include "..." search starts here:
#include <...> search starts here:
 /usr/include/c++/4.7
 /usr/include/c++/4.7/x86_64-linux-gnu
 /usr/include/c++/4.7/backward
 /usr/lib/gcc/x86_64-linux-gnu/4.7/include
 /usr/local/include
 /usr/lib/gcc/x86_64-linux-gnu/4.7/include-fixed
 /usr/include/x86_64-linux-gnu
 /usr/include
End of search list.
GNU C++ (Ubuntu/Linaro 4.7.2-2ubuntu1) version 4.7.2 (x86_64-linux-gnu)
    compiled by GNU C version 4.7.2, GMP version 5.0.2, MPFR version 3.1.0-p3, MPC version 0.9
GGC heuristics: --param ggc-min-expand=100 --param ggc-min-heapsize=131072
Compiler executable checksum: 521527ea42f0901bf839bcaad0cb13e6
test.cpp: In function ‘int main()’:
test.cpp:5:3: error: ‘cout’ is not a member of ‘std’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:35:42.793

您所写的内容在我的 Ubuntu 系统上运行良好，使用相同版本的 g++。

听起来您还没有为 C++ 环境安装所有必要的文件，或者有些地方不太对劲。试试这个：

```
$ sudo apt-get remove g++ libstdc++-6.4.7-dev
$ sudo apt-get install build-essential g++-multilib 
```

`dpkg -l | grep libstdc++`（如果上述失败，请运行以获取 libstdc++ 的确切版本）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-18T10:39:54.167

这不是这种情况，但可能是对“错误：'cout'不是'std'的成员”的答案。我来这里寻求帮助，所以这可能对其他人有帮助。

如果您有一个头文件 (header.h)，其中最后一个函数/类声明后面没有分号：

```
#include <string>

function(std::string str) 
```

并且您的 c++ 文件之前包含此内容`iostream`：

```
#include "header.h"
#include <iostream> 
```

函数/类（`function`在这种情况下）弄乱了`iostream`. `#include`基本上只是将文本粘贴到代码中。添加分号可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:19:10.607

使用 .cpp 重命名文件扩展名。

通过命令编译源代码

```
gcc source.cpp -o output.out 
```

GCC 会自动将其编译为 C++ 程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-21T13:39:05.357

对于 C++ 程序，使用 g++，而不是 gcc。如果您收到提示您的编译器找不到标准库的错误，那是因为您可能使用了 gcc。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-22T13:24:48.057

（C++，Linux 终端，没有编译错误，**但没有打印到终端**），也许试试：

```
$ g++ yourcode.cpp
$ ./a.out 
```

第一行：*g++ 编译你的代码。*
第二行：*运行您编译的代码。*

# ember.js - Ember.js - 绑定到另一个控制器的模型

> ID：15359590
> 
> 赞同：0
> 
> 时间：2013-03-12T11:11:33.137
> 
> 标签：ember.js

在我的项目中，我有以下三个模型：

*   **俱乐部模型**：代表一个体育俱乐部。它有一个`clubMeta`和多个`customCourts`。
*   **ClubMeta 模型**：与应用程序相关的俱乐部相关信息。
*   **CustomCourt 模型**：属于`club`. 一个**俱乐部**应该有**customCourts** 仅当`clubMeta.customCourtsEnabled`是`true`。

**俱乐部**

```
var Club = DS.Model.extend({
    ... bunch of properties ...

    clubmeta: DS.belongsTo('App.Clubmeta'),
    customCourts: DS.hasMany('App.CustomCourt')
});

module.exports = Club; 
```

**俱乐部元**

```
var Clubmeta = DS.Model.extend({
    ... bunch of properties ...
    customCourtsEnabled: DS.attr('boolean'),

    club: DS.belongsTo('App.Club')
});

module.exports = Clubmeta; 
```

**海关法庭**

```
var CustomCourt = DS.Model.extend({
    name: DS.attr('string'),
    glass: DS.attr('boolean'),
    indoor: DS.attr('boolean'),
    single: DS.attr('boolean'),

    club: DS.belongsTo('App.Club')
});

module.exports = CustomCourt; 
```

我需要做的是一个模板，俱乐部（即登录用户）**只有**在. 正如我在[另一个 SO question](https://stackoverflow.com/questions/15337602/ember-js-action-not-receiving-parameters)中被告知的那样，我应该使用 an来处理。`clubmeta.customCourtsEnabled``true``ArrayController``CustomCourts`

到目前为止一切都很好，问题来了，因为`CustomCourtsController`需要了解**club**和**clubmeta**。我已经尝试过了，绑定路径有一些变化：

```
var ClubCourtsController = Ember.ArrayController.extend({
        needs: ['currentClub'],
        customCourtsEnabledBinding: Ember.Binding.oneWay("App.currentClubController.content.clubmeta.customCourtsEnabled"),
        ...
}); 
```

**当前俱乐部控制器**

```
var CurrentClubController = Ember.ObjectController.extend({
    init: function() {
        this._super();
        console.log('Retrieving club ' + App.clubId);
        this.set('content', App.Club.find(App.clubId));
    }
});

module.exports = CurrentClubController; 
```

但`ClubCourtsController.customCourtsEnabled`总是返回未定义。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:39:26.207

> ClubCourtsController.customCourtsEnabled 总是返回 undefined。这样做的正确方法是什么？

你在正确的轨道上。对于初学者来说，进行绑定的正确方法是通过`controllers`属性：

```
var ClubCourtsController = Ember.ArrayController.extend({
    needs: ['currentClub'],
    customCourtsEnabledBinding:     Ember.Binding.oneWay("controllers.currentClub.clubmeta.customCourtsEnabled"),
}); 
```

除此之外，通常最好的做法是在路由的 setupController 挂钩中而不是控制器 init 中将事物连接在一起。因此，即使您拥有该绑定权，也可能是其他问题导致 customCourtsEnabled 属性未定义。我在这里发布了一个关于 jsbin 的工作示例：http: [//jsbin.com/ubovil/1/edit](http://jsbin.com/ubovil/1/edit)

```
App = Ember.Application.create({
  clubId: 1
});
App.Router.map(function() {
  this.route("customCourts", { path: "/" });
});
App.Club = Ember.Object.extend({});
App.Club.reopenClass({
  find: function(id) {
    return App.Club.create({
      id: id, 
      clubmeta: App.ClubMeta.create({
        customCourtsEnabled: true
      })
    });
  }
});
App.ClubMeta = Ember.Object.extend({});
App.CurrentClubController = Ember.ObjectController.extend({});

App.ApplicationController = Ember.Controller.extend({
  needs: ['currentClub']
});

App.ApplicationRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('controllers.currentClub.content', App.Club.find(App.clubId));
  }
});

App.CustomCourtsController = Ember.ArrayController.extend({
  needs: ['currentClub'],
  customCourtsEnabledBinding: Ember.Binding.oneWay("controllers.currentClub.clubmeta.customCourtsEnabled")
});

App.CustomCourtsRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', ['Court a', 'Court b', 'Court c']);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:21:30.867

您需要通过`controllers`属性访问控制器

```
ClubCourtsController = Ember.ArrayController.extend({
  needs: ['currentClub'],
  customCourtsEnabledBinding: Ember.Binding.oneWay("controllers.currentClub.clubmeta.customCourtsEnabled"),
  ...
}); 
```

# java - 休眠：通用 JDBC 异常 - 时间 '838:59:59' 的格式错误

> ID：15359595
> 
> 赞同：5
> 
> 时间：2013-03-12T11:11:43.557
> 
> 标签：java, mysql, hibernate

我有如下的休眠映射：

```
<property formula="(Timediff(ifnull(sttime,now()),sstime))" insert="false" name="duration" update="false" />
where sstime is of type Timestamp 
```

这里这个公式从我的数据中以这种格式“838:59:59”返回一些值。

当我尝试在具有“java.sql.Time”类型的“持续时间”字段中加载此值时出现异常，它给了我这个异常。

```
"Generic JDBC exception - Bad format for Time '838:59:59'" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:31:43.263

这确实不是一个有效的时间。您不应该使用 java.sql.Time 来表示持续时间，特别是如果此持续时间可能超过 24 小时，因为 Time 表示日期的时间部分。请改用自定义类型，或者仅使用您自己解析的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:32:05.153

从源头

[http://www.microshell.com/database/mysql/getting-around-mysql-timediff-maximum-value-of-8385959/](http://www.microshell.com/database/mysql/getting-around-mysql-timediff-maximum-value-of-8385959/)

在公式中使用 TIMESTAMPDIFF 而不是 TIMEDIFF

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:45:18.697

按照 MySQL 文档，您应该使用 TIMESTAMPDIFF() 和 UNIX_TIMESTAMP()：

> TIMEDIFF() 返回的结果限制在 TIME 值允许的范围内。或者，您可以使用函数 TIMESTAMPDIFF() 和 UNIX_TIMESTAMP()，这两个函数都返回整数。

查询可能看起来像这样，但取决于您使用的结果数据类型：

```
SELECT FROM_UNIXTIME(TIMESTAMPDIFF(SECOND,sstime,NOW())) FROM time_table;

SELECT FROM_UNIXTIME(UNIX_TIMESTAMP() - UNIX_TIMESTAMP(sstime)) FROM time_table; 
```

[演示](http://sqlfiddle.com/#!2/ed5872/17)

# javascript - decodeURIComponent(encodeURIComponent(string)) 的结果是什么？

> ID：15359597
> 
> 赞同：2
> 
> 时间：2013-03-12T11:11:44.663
> 
> 标签：javascript

当我在工作中处理一些奇怪的 JavaScript 代码时，我发现了这个：

```
string = decodeURIComponent(encodeURIComponent(string)); 
```

在我看来，这段代码没用，我必须删除它。但对于一些非常具体的情况，这可能是一种黑客攻击。谷歌向我展示了该指令存在其他程序。

那么，你知道这是什么结果吗？只是一个字符串的慢速内存副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:40:42.993

单看它，我会说它们相互抵消，返回的字符串是原始输入字符串。除非我错过了什么，否则它没有副作用。

但是，我以前见过这样的代码

```
return unescape( encodeURIComponent( s ) ); 
```

和

```
return decodeURIComponent( escape( s ) ); 
```

它使用了 encodeURIComponent/decodeURIComponent 与 UTF8 绑定而 escape/unescape 没有绑定的事实。

取消除 UTF-8 编码/解码部分之外的所有部分是一种技巧，这些部分发生在高度优化的浏览器本机代码中，而不是手写的 javascript 代码中。

有关详细说明，请参阅[http://monsur.hossa.in/2012/07/20/utf-8-in-javascript.html](http://monsur.hossa.in/2012/07/20/utf-8-in-javascript.html)。

# javascript - Javascript：始终小于任何其他日期的最小日期

> ID：15359598
> 
> 赞同：0
> 
> 时间：2013-03-12T11:11:52.843
> 
> 标签：javascript, string, date, compare

我想比较日期字符串

```
if (user_date < date) 
```

date 有`yyyy-mm-dd`格式，所以如果用户输入了`user_date`这个格式的有效日期，可以将日期作为字符串进行比较。

不幸的是，`user_date`是用户输入的，所以它可能是无效的。如果它无效（或留空），我希望 (user_date < date) 始终为真。

`var user_date='';`如果用户的日期无效，我发现要设置。这是制作`(user_date < date)`任何有效日期的好方法吗？

`(user_date > date)`（比任何日期都多）同样的问题。我发现设置`var user_date='A';`

我需要它

```
if (date1 <= date && date2>= date)
//do something 
```

**所以它无需任何额外`if then`的 .**

PS 我不想进入`var user_date='2222-12-31';`，因为算法将在不到 210 年的时间内停止正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:16:12.137

为什么不将您的最小值设置为 0000-01-01 并将最大值设置为 9999-12-31 ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:32:57.767

我认为这是不可能的。但是有可能得到一个比较总是错误的日期——所以在功能上它的行为与`NaN`对数字的行为相同。因此，如果您反转测试，从而替换`(a <= b)`为`!(a > b)`，它将起作用。

```
$date = new Date(NaN);
if (!($date1 > $date) && !($date2 < $date))  ... 
```

ps 美元符号是怎么回事？您是否将 Javascript 与 PHP 或 Perl 混淆了？:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:14:43.243

我认为你可以做一些类似的事情

```
var date = '2013-03-12';
var $date = new Date(date);
function onChange(el){
    var user_date = el.value;
    var udate = new Date(user_date);
    if(isNaN(udate.getTime()) || udate < $date){
        alert('less')
    }

} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/ZRWp2/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T16:01:06.323

就我个人而言，我会首先验证用户输入的日期 - 不要让它碰运气。

我在这里使用我自己的日期扩展库来处理这种东西：

[DP_DateExtensions](http://depressedpress.com/javascript-extensions/dp_dateextensions/)

parseFormat() 方法可以让您轻松验证您的输入。这样的事情做得很好：

```
Date.parseFormat(InputString, "YYYY-M-D") 
```

如果输入的字符串与格式匹配，则该函数返回一个有效的 JavaScript 日期，否则返回 null。如果您有想要应用的默认行为，您显然不必基于此发送用户消息 - 但代码本身应该“知道”。

在这种情况下 - 如果您希望无效日期小于另一个已知的好日期，那么有很多方法可以做到这一点。最简单的是这样的：

```
InputDate = Date.parseFormat(InputString, "YYYY-M-D");
if ( InputDate || InputDate < GoodDate ) {
     Input Date is Invalid or Falls before good date
} else {
     Input Date is Falls after good date
}; 
```

您无需设置“错误日期”或使用正确的验证和布尔逻辑进行猜测，它会一直工作到世界停止旋转（理论上）。

您可以使用库中的 compare() 方法对任何精度进行任何类型的大于/小于比较。

希望这可以帮助。

# ios - Google Analytics 集成在 iOS 应用程序中不起作用

> ID：15359600
> 
> 赞同：1
> 
> 时间：2013-03-12T11:12:00.647
> 
> 标签：ios, ios6, google-analytics, google-analytics-api

我正在将 Google 分析集成到 iOS 应用程序中。我制作了一个单独的示例项目，并且工作正常。但是当我在我的应用程序中实现相同的功能时，它不起作用。

*   是否有任何框架会限制应用程序不运行 Google Analytics？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:30:20.013

首先，没有任何框架会限制应用程序运行 Google Analytics。但是如果您不添加某些框架，您将无法编译代码。

看看这些链接，因为这些可能会有所帮助

[https://developers.google.com/analytics/devguides/collection/ios/](https://developers.google.com/analytics/devguides/collection/ios/)

[https://developers.google.com/analytics/devguides/collection/ios/resources](https://developers.google.com/analytics/devguides/collection/ios/resources)

主要是下面这个

[https://developers.google.com/analytics/devguides/collection/ios/v2/](https://developers.google.com/analytics/devguides/collection/ios/v2/)

除此之外，如果您是第一次使用 Google Analytics（分析）。让我告诉您，您只会在一段时间后才能在 Google Analytics（分析）仪表板上找到您的数据。如果是第一次，也可能需要一天的时间。所以如果能够编译代码并运行应用程序，请耐心等待。第一次之后很快。即数据显示得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T09:59:47.770

最后，我已经能够按预期执行 Google Analytics (GA)。

问题不是由于任何框架不兼容，也不是项目构建设置，也不是 plist 选项。可以肯定的是，我将相同的配置重新创建到另一个项目中。

从我的角度来看，我遇到的第一个问题是尝试在 Xcode v4.6.3 中使用 GA SDK v3，而需要 Xcode v5。然后将 GA SDK 版本降级到 2 beta4 并没有直接解决问题，因为可能 GA SDK 的持久数据保存在我的应用程序中（用户默认或核心数据）。

@BhargaviShamukh，如果你仍然有这个问题，解决它的方法应该是清理项目（菜单产品>清理）并从模拟器和设备上卸载应用程序，以确保删除任何 GA SDK 的数据。至少对我来说，这个过程已经解决了这个问题。

# sql - 在 Oracle 上使用 rownum 更新具有递增 ID 的表是否安全？

> ID：15359605
> 
> 赞同：2
> 
> 时间：2013-03-12T11:12:26.103
> 
> 标签：sql, database, oracle, auto-increment, rownum

与[MySql](https://stackoverflow.com/questions/7989342)类似，我想用增量值更新（填充）一个空列——使用*Oracle*。即之后

```
ALTER TABLE data ADD
(
  id  number
); 
```

我希望该`ID`列的所有记录都接收唯一值。之后，我将启用*Not Null*和*唯一*约束以使其成为*主键*。

我很快想出了

```
UPDATE TABLE data SET id = rownum; 
```

但我对此有不好的预感。它在我的测试中按预期工作，但一个例子不能证明:-)

**`rownum`在 - 语句中以这种方式使用是否安全`update`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:38:11.343

是的，我从来没有遇到过这种方法的问题，但是启用非空和唯一约束不会使其成为主键——添加主键约束使其成为主键；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:26:49.267

可能，您的方法是安全的。如果没有，如果唯一约束失败，您会收到通知:-)。

防弹方法如下：

```
lock table data in exclusive mode;

merge into data t
using (select t.rowid rid, t.rownum id from data t) s
on (t.rowid = s.rid)
when matched then update set
  t.id = s.id;

commit; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-12T12:58:13.450

不，这不安全，因为 ROWNUM 是伪列。意味着它不保证顺序，尤其是与 ORDER BY 一起使用时。如果必须，请使用 ROW_NUMBER() OVER (ORDER BY your_field) 而不是 ROWNUM。您还可以使用 PL/SQL 在循环中更新您的表一次。

# javascript - 将双字节整数转换为单字节-Javascript

> ID：15359612
> 
> 赞同：3
> 
> 时间：2013-03-12T11:12:52.483
> 
> 标签：javascript, double

是否可以使用 java 脚本将双字节整数转换为单字节？我需要将双字节数字转换为单字节，当它输入到文本框中时。jQuery或javascript中有没有可用的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:28:34.160

没有内置方法可以将 １ ( [U+FF11](http://unicode.org/cldr/utility/character.jsp?a=FF11) ) 转换为 1 ( [U+0031](http://unicode.org/cldr/utility/character.jsp?a=0031) )。您可以使用正则表达式*专门*针对您提到的字符执行此操作：

```
var rex = /[\uFF10-\uFF19]/g;
var str = "１２３４";

console.log("Before: " + str);  
str = str.replace(rex, function(ch) {
    return String.fromCharCode(ch.charCodeAt(0) - 65248);
});

console.log("After: " + str); 
```

[Live Example](http://jsbin.com/ikutah/1)（一定要打开 JavaScript 控制台）| [来源](http://jsbin.com/ikutah/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T08:41:04.370

为什么不能转换？65296 是你的神奇数字，表格永远不会改变，所以只需上下运行它，你就可以通过这种方式转换数字。

这会将单字节转换为双字节并再次转换回来。

示例需要 Jquery，但您可以轻松编写它。

```
<input type="text" id="one" value="1234567890"><br/>
<input type="text" id="two"><br/>
<input type="text" id="three">

<script>
    symbolsToEntities=function(sText){
        var sNewText = "";
        var iLen = sText.length;
        for (i=0; i<iLen; i++){
        iCode = sText.charCodeAt(i);
            sNewText += (iCode > 256? "&#" + iCode + ";": sText.charAt(i));
        };
        return sNewText;
    };

    ConvertNumber=function(num){
        var O='';
        for (var i = 0, len = num.length; i < len; i++){
            O+='&#'+(parseInt(num[i])+65296)+';';
        };
        return O;
    };

    ConvertNumberagain=function(num){
        var O='';
        var res = num.split(';');
        $.each(res, function( key, value ){
            if (value.length!=0){
                O+=parseInt(value.replace('&#',''))-65296;
            };
        });
        return O;
    };
    var doublebyte=ConvertNumber($('#one').val());
    doublebyte = $('<div>').html(doublebyte).text();
    $('#two').val(doublebyte);
    var singlebyte=symbolsToEntities($('#two').val());
    singlebyte=ConvertNumberagain(singlebyte);
    $('#three').val(singlebyte);
</script> 
```

现场示例：http: [//jsfiddle.net/399EM/](http://jsfiddle.net/399EM/)

# php - PHP / MySQL - 显示一年中所有星期一的日期列表

> ID：15359618
> 
> 赞同：0
> 
> 时间：2013-03-12T11:13:21.487
> 
> 标签：php, mysql, select, dayofweek

我需要在表单上填充下一年所有星期一的日期的下拉列表吗？

做这个的最好方式是什么？使用填充有日期的 MySQL 表，或者是否有更智能的方法来生成这些日期而不需要 MySQL？

所需的输出将类似于：

![在此处输入图像描述](../Images/c42e769c141f7eaf52ff1ea9d426ad88.png)

所选选项的值将只是开始日期，因此对于图像中的第一个选项，`11 Mar 13`将是值。

如果这是一个愚蠢的问题，感谢您的帮助和道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:41:57.467

**编辑：**修改为支持传入开始日期而不是简单的一年

```
function getDays($year, $startMonth=1, $startDay=1, $dayOfWeek='monday') {
    $start = new DateTime(
        sprintf('%04d-%02d-%02d', $year, $startMonth, $startDay)
    );
    $start->modify($dayOfWeek);
    $end   = new DateTime(
        sprintf('%04d-12-31', $year)
    );
    $end->modify( '+1 day' );
    $interval = new DateInterval('P1W');
    $period   = new DatePeriod($start, $interval, $end);

    foreach ($period as $dt) {
        echo $dt->format("d/m/Y") . '<br />';
    }
}

getDays(2013, 3, 12, 'monday'); 
```

将输出格式化为下拉列表应该是一个简单的练习

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:19:15.460

您可以简单地使用`PHP`，然后使用[DateTime::add](http://www.php.net/manual/en/datetime.add.php)方法。然后可以取一年中的第一个星期一，用 7 天加 52 次的方法。这会给你整个星期一。如果您添加 6 天，您将获得截止日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:31:54.637

此代码将输出您想要的日期列表

```
for($i = 0; $i <= 365; $i ++){
  $startdate = strtotime("today + $i day");
  $enddate = strtotime("today + " . ($i + 6) . " day");
  if(date('D', $startdate) == 'Mon'){
      echo date('d M y', $startdate) . " to " . date('d M y', $enddate) . "\n";
  }
} 
```

要将此显示为下拉列表，您需要像这样将 HTML 添加到其中

```
<select id="date" name="date"> 
  <?
    for($i = 0; $i <= 365; $i ++){
      $startdate = strtotime("today + $i day");
      $enddate = strtotime("today + " . ($i + 6) . " day");
      if(date('D', $startdate) == 'Mon'){
          echo '<option value="' . date('d-m-Y', $startdate) . '">' .date('d M y', $startdate) . " to " . date('d M y', $enddate) . "</option>";
      }
    } 
  ?> 
</select> 
```

我已经`value`以格式为选择选项的日期提供了星期一的日期，`dd-mm-yyyy`因此在处理提交后的表格时，您将拥有被选中的星期一。因此，如果您要选择行`27 May 13 to 02 Jun 13`并提交表单，则表单另一端的 php 文件将具有变量`$_POST['date']`，其值为`27-05-2013`.

# c# - 将字符串替换添加到必需属性错误消息中

> ID：15359635
> 
> 赞同：0
> 
> 时间：2013-03-12T11:14:45.603
> 
> 标签：c#, resource-files

我有以下代码

```
[Required("SalesChannel", SeenSalesChannelString, 
            ErrorMessageResourceType = typeof(ErrorMessages), ErrorMessageResourceName = ErrorMessagesErrors.FieldConditionallyRequired)] 
```

该字段`FieldConditionallyRequired`需要几个替换`{0}`和`{1}`. 我如何提供这些？

# perl - 将路径添加到全局 PERL @INC，系统范围，不在我的脚本中，而是在全局范围内。在 Mac 上

> ID：15359637
> 
> 赞同：0
> 
> 时间：2013-03-12T11:14:50.240
> 
> 标签：perl, cpan

我遇到了以下问题，我不知道是什么介绍了它，但是 Mac 上的 perl 包含路径总是一场噩梦；

```
cpan[1]> install DateTime::Event::Recurrence
Going to read '/Users/Hristo/.cpan/Metadata'
  Database was generated on Tue, 08 Jan 2013 11:07:23 GMT
Fetching with LWP:
http://ftp.belnet.be/mirror/ftp.cpan.org/authors/01mailrc.txt.gz
Catching error: "Can't locate HTML/HeadParser.pm in \@INC (\@INC contains: /opt/local/lib/perl5/site_perl/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/site_perl/5.12.4 /opt/local/lib/perl5/vendor_perl/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/vendor_perl/5.12.4 /opt/local/lib/perl5/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/5.12.4 /opt/local/lib/perl5/site_perl /opt/local/lib/perl5/vendor_perl /Users/Hristo) at /opt/local/lib/perl5/site_perl/5.12.4/LWP/UserAgent.pm line 663, <FIN> line 1\. at /opt/local/lib/perl5/site_perl/5.12.4/LWP/UserAgent.pm line 915, <FIN> line 1.\cJ" at /opt/local/lib/perl5/5.12.4/CPAN.pm line 391, <FIN> line 1.
    CPAN::shell() called at /opt/local/lib/perl5/5.12.4/App/Cpan.pm line 295
    App::Cpan::_process_options('App::Cpan') called at /opt/local/lib/perl5/5.12.4/App/Cpan.pm line 364
    App::Cpan::run('App::Cpan') called at /opt/local/bin/cpan line 11
Fetching with LWP:
http://ftp.belnet.be/mirror/ftp.cpan.org/authors/01mailrc.txt.gz
Terminal does not support GetHistory.
Lockfile removed.
Can't locate HTML/HeadParser.pm in @INC (@INC contains: /opt/local/lib/perl5/site_perl/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/site_perl/5.12.4 /opt/local/lib/perl5/vendor_perl/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/vendor_perl/5.12.4 /opt/local/lib/perl5/5.12.4/darwin-thread-multi-2level /opt/local/lib/perl5/5.12.4 /opt/local/lib/perl5/site_perl /opt/local/lib/perl5/vendor_perl /Users/Hristo) at /opt/local/lib/perl5/site_perl/5.12.4/LWP/UserAgent.pm line 663, <FIN> line 1\. at /opt/local/lib/perl5/site_perl/5.12.4/LWP/UserAgent.pm line 915, <FIN> line 1. 
```

**我**在 /opt/local/lib/perl5/site_perl/5.12.4/darwin-multi-2level/HTML CPAN 中有 HTML::HeadParser 在此之前已经工作了几个月。

如何更改`@INC` ***系统范围内***的内容，以便 IDE (Eclipse) 和 CPAN 都知道如何查看。我一直在对 Makefile.PL 进行全局文件搜索，使用诸如`sudo find / -name "*.PL" | xargs grep "Makefile"`在各种情况下尝试找到它并尝试[此建议](http://www.perlhowto.com/extending_the_library_path)等命令，但到目前为止没有成功。（哦，我多么讨厌这个操作系统 :)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:59:31.383

我不知道确切的解决方案，可能这个链接会有所帮助..

[Perl 的@INC 是如何构造的？（又名影响 Perl 模块搜索位置的所有方法是什么？）](https://stackoverflow.com/questions/2526804/how-is-perls-inc-constructed-aka-what-are-all-the-ways-of-affecting-where-pe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:21:34.627

如果`$Config{usesitecustomize}`已定义，您可以查找`sitecustomize.pl`at `$Config{sitelib}\\sitecustomize.pl`。见[**`perlrun`**](http://perldoc.perl.org/perlrun.html#%2a-f%2a)。

`%Config`变量告诉你 perl 是如何*编译*运行的，所以需要重新编译来改变它。

除此之外，您还可以更改任何正在运行的通用登录脚本——如果有的话——以便环境变量`PERL5LIB`包含你的路径——我相信环境变量`PERLLIB`仍然可以正常工作。

# android - 如何从通话记录中获取最近三个未接来电的详细信息

> ID：15359638
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:14:50.470
> 
> 标签：android

我想获得最后三个未接电话的详细信息。我还想获得这些（值、人名电话号码和通话时间、日期）。

请帮帮我谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:48:22.377

**文件**

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    call = (TextView) findViewById(R.id.call);

    StringBuffer sb = new StringBuffer();
    Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI, null,
            null, null, null);
    int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER);
    int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE);
    int date = managedCursor.getColumnIndex(CallLog.Calls.DATE);
    int duration = managedCursor.getColumnIndex(CallLog.Calls.DURATION);
    sb.append("Call Details :");
    while (managedCursor.moveToNext()) {
        String phNumber = managedCursor.getString(number);
        String callType = managedCursor.getString(type);
        String callDate = managedCursor.getString(date);
        Date callDayTime = new Date(Long.valueOf(callDate));
        String callDuration = managedCursor.getString(duration);
        String dir = null;
        int dircode = Integer.parseInt(callType);
        switch (dircode) {

        case CallLog.Calls.MISSED_TYPE:
            dir = "MISSED";
            break;
        }
        sb.append("\nPhone Number:--- " + phNumber + " \nCall Type:--- "
                + dir + " \nCall Date:--- " + callDayTime
                + " \nCall duration in sec :--- " + callDuration);
        sb.append("\n----------------------------------");
    }
    managedCursor.close();
    call.setText(sb);
} 
```

**xml文件**

```
<TextView
         android:id="@+id/call"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" /> 
```

**允许**

```
<uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.READ_LOGS"/> 
```

# c# - 实体框架，如何让 Sum<> 接受一个方法？

> ID：15359641
> 
> 赞同：0
> 
> 时间：2013-03-12T11:14:58.653
> 
> 标签：c#, sql, entity-framework, methods, func

我有点卡住了，我不确定这是可能的。我正在 Entity Framework 中编写一个数据库，并且我想创建一个可供 dataconext 使用的方法。

所以我想写一些类似的东西......

```
double total = db.FlightEntries().Sum(f => f.GetTotalflightTimes()); 
```

所以我知道 EF 到 Sql 不会理解“ `GetTotalflightTimes()`。

所以我写了这个...

```
public static class MyFlightEntryExtentions
{
    public static Expression< Func<FlightEntry, double>> GetTotalFlightTimes(this FlightEntry flightEntry)
    {
        double value
         ...........
         ..........
        return x => value;
    }
} 
```

错误 4 无法转换类型

> 'System.Linq.Expressions.Expression>' 到 'double'

我知道我可能会走错路，所以有人可以告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:29:54.950

有点不清楚你想要实现什么，但如果你想执行一些自定义求和逻辑，而不仅仅是指向数据库中的属性/列，你需要先完成查询，而不是已经读取的对象，你可以执行求和：

```
db.FlightEntries().ToArray().Sum(f => f.GetTotalflightTimes()); 
```

并且您的扩展方法必须为此返回 double ；

另一方面，如果您的目标是有一些逻辑来自定义总和下的列，那么您不能拥有将实体作为参数的方法，您必须构建表达式，只知道您的实体的类型，也许还有一些未保存的相关鉴别器实体内部。

# .htaccess - 在htaccess中匹配字符串的两个部分

> ID：15359642
> 
> 赞同：0
> 
> 时间：2013-03-12T11:15:00.110
> 
> 标签：.htaccess, mod-rewrite

我在使用正则表达式对以下内容进行排序时遇到问题……</p>

```
http://www.example.com/directory/listings/nostell-priory-2/
http://www.example.com/directory/listings/somerton-court-2/
http://www.example.com/directory/listings/shervage-court-2/ 
```

看起来像下面......</p>

```
http://www.example.com/directory/listings/nostell-priory/
http://www.example.com/directory/listings/somerton-court/
http://www.example.com/directory/listings/shervage-court/ 
```

我只是想`-2`从 url 中删除位，但前提是 url 包含单词`listings`。

任何人都可以帮忙吗？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:18:59.133

就像是

```
RewriteRule ^directory/listings/(.*)-2/$ http://www.example.com/directory/listings/$1/ [R] 
```

# ruby-on-rails - 如何使用多个框架呈现水平页面布局

> ID：15359643
> 
> 赞同：1
> 
> 时间：2013-03-12T11:15:07.253
> 
> 标签：ruby-on-rails, routes

我们有一个简单的应用程序，它具有水平布局（左侧面板和右侧的内容），带有页眉和页脚。因此，如果您单击左侧的某个对象，则会在右侧呈现视图，并在页眉和页脚链接中使用导航面板。对于左侧的任何操作，布局实际上在同一页面上呈现内容，左侧的内容将根据标题中选择的部分而有所不同。在这些情况下，我们应该如何设计路线，这与每个动作都呈现在不同页面上的基本导航不同。

我的路线看起来像这样..

```
 resources :foos do
    resources :foo_bars do
    end
  end 
```

我需要在左侧面板上显示所有 foos，如果用户选择 a`foo`它需要在右侧面板上的表格中显示`foo`和的属性。`foo_bars`视图将如何寻找我以及浏览器中的 URL 如何寻找我？我们将在顶部有几个选项卡，基于这些选项卡您将显示`foos`或类似的顶级对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:51:18.850

If your question is:

> how should we go about designing routes

The way you have it is just fine if you want to utilize nested resources, and in your case it seems logical. [http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)

Currently, your url will be as follows: `/foos/:foos_id/foo_bars/some_action`

Let me rename these so things make more sense. Lets say foos is categories, and foo_bars is actions.

Personally, I would override the to_param in the categories model file.

```
to_param
  #return a more readable attribute here
  name
end 
```

In this way, your URL would be more closely tied with the names of all the categories on the left side of your page.

So now, if you had a record in the categories table which had the name animal, your URL would look like this: `/categories/animal/actions/some_action`

That seems pretty logical to me. Make sure in your controller you fetch the record via the proper attribute if you use to_param.

I would apply the same principal to the nested resource as well, then your whole URL would be accurately representing what tab is selected on the page. If you had a record in actions with the name "running", and you had things setup properly, then you could have your url look similar to: `categories/animal/actions/running`.

You could play around with all the options in your routes file, then use `rake routes` in terminal to see what changes and what your urls will look like before you even touch the browser.

Here are some extra resources for you.

[http://apidock.com/rails/ActiveRecord/Integration/to_param](http://apidock.com/rails/ActiveRecord/Integration/to_param) [http://guides.rubyonrails.org/action_controller_overview.html](http://guides.rubyonrails.org/action_controller_overview.html)

Hope this helps.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:31:09.870

路线保持不变。你需要ajaxify你的电话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T00:03:16.167

如果我正确理解您的问题，那么说需要 Ajax 的答案是不正确的。我有一个古老的 Perl 应用程序（写于 1999 年）可以做到这一点。我目前在 Rails 中重新实现，并且工作正常。框架使得在菜单保持固定时允许数据滚动变得特别容易。

您确实需要使用 HTML5 中已弃用的 HTML4 框架，可以将 IFRAME 用于数据呈现框架并符合 HTML5，但结果不如 HTML4 中的 FRAME 解决方案可用，至少在某些浏览器中是这样。

正如其他人所说，您的路线很好。

诀窍是使用 中的`target`字段`form`将提交响应定向到渲染帧。我的“命令”框架的haml代码是

```
= form_tag admin_menu_path, :method => :put, :target => 'data_frame' do
   ... 
```

其余的只是一个正常的形式。这种形式在（我的情况）左框架中保持不变，而响应在右框架中相互替换`data_frame`。

匹配的框架 HTML 是：

```
<frameset cols="360,*">
  <frame name="menu_frame" src="...">
  <frame name="data_frame" src="admin.htm">
</frameset> 
```

您必须使用外部框架集来获取页眉和页脚，但这应该很简单。

我准备好接受评论说框架远非最佳实践。但是对于这个特定的应用程序，它们是完美的：简单、易于理解，并且*非常*独立于浏览器。例如，我 1999 Perl 生成的代码在 IE 2.0 和 Netscape（Firefox 的祖先，朋友们）上运行良好。在我能找到的每一个现代浏览器上，它仍然是完美的。希望阿贾克斯也能这么说……

如果我误解了您的问题，我很乐意删除此回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:15:34.113

您的问题没有很好的答案 - 这完全取决于您的应用程序的布局。此外，这里有关于 to_param 和使用 AJAX 的有效答案，它们添加了重要的细节。但是，给你一个良好的开端。

对于您的视图/foos，将您的 index.html.erb 重写为：

```
<%= render partial: "show_foos", locals: { foos: @foos, selected_foo: nil }%> 
```

而你的 show.html.erb 为：

```
<%= render partial: "show_foos", locals: { foos: @foos, selected_foo: @foo }%> 
```

在 show 方法中的 foos_controller.rb 中，您需要同时获取 @foos 和 @foo，例如：

```
@foos = Foo.all
@foo = Foo.find(params[:id]) 
```

现在，到有趣的部分。返回views/foos 目录。创建一个名为“_show_foos.erb”的部分（我们从#index 和#show 调用的部分）。执行以下操作：

```
<table>
  <tr>
    <td>
      <%= render partial: "show_foos_list", locals: { foos: foos, selected_foo: selected_foo }%>
    </td>
    <td>
      <%= render partial: "show_foo_props", locals: { selected_foo: selected_foo }%>
    </td>
  </tr>
</table> 
```

请注意，这是一个非常粗暴和丑陋的示例，它创建了一个包含两列的表：一列用于左侧“面板”中的 foo 列表，另一列用于在右侧“面板”中显示所选 foo 的结果。在现实生活中使用 div 和样式。此外，考虑将布局推送到它所属的位置 - 适当的布局文件 - 并在那里使用命名收益。但是，正如我所说，一个先机 - 简单的表。

现在，只需定义这里提到的两个部分。首先，“_show_foos_list.erb”列出了左侧的 foo。假设每个 foo 都有一个“title”属性，例如：

```
<% foos.each do |foo| %>
  <%= link_to_unless selected_foo && (foo.id == selected_foo.id), foo.title, foo %><br />
<% end %> 
```

其次，右边的 foo & foo_bars - “_show_foo_props.erb”：

```
<% if selected_foo %>
  # Here display the Foo attributes
  <h2> Foo: <%= selected_foo.title %> </h2>
  <% selected_foo.foo_bars.each do |foo_bar| %>
    # Here display each FooBar that belongs to Foo
    <h3>FooBar <%= foo_bar.title %></h3>
    <%= foo_bar.description %>
  <% end %>
<% end %> 
```

再次，非常粗略的例子。将 'title'、'description' 替换为正确的参数集，使用部分显示 FooBars。使用 CSS 进行样式设置。等等，等等……根据您的需要进行重构。

谈论路线。当您访问“www.yourapp.com/foos”网址时，您得到的是左侧所有 foo 的列表，右侧没有任何内容。按下左栏中的任何 foo 后，您将转到“www.yourapp.com/foos/:id”，其中 :id 是所选 foo 的 ID（并从此处的其他答案或更高级的技术中考虑 to_param使这部分有意义）并在左侧获取 foos 列表，在右侧获取所选 foo 和所有属于它的 foo_bars 的属性。

希望这有助于根据此处提出的粗略想法开始布局您自己的实现。

# java - 在java中指定模式之后和之前从字符串中提取子字符串

> ID：15359646
> 
> 赞同：-5
> 
> 时间：2013-03-12T11:15:20.093
> 
> 标签：java

我想从字符串中提取在所需部分之后和之前满足特定模式的部分：

例子 ：

```
String [] s1 = my name is ankit kapoor , my name is mayank gupta , my name is preeti singh ; 
```

在这里，我只需要名字，即 ankit 、mayank 、 preeti ，即在第一个空格出现之后和之前。

我到目前为止使用的代码是

```
String [] final_reult = s1[i].substring((s1.indexof("is")+3) , (s1.lastindexof(" "))); 
```

显然我使用循环即`for(int i=o;i<s1.length;i++)`

我得到的输出是：ankit kapoor // 而不是 ankit mayank gupta // 而不是 mayank preeti singh // 而不是 preeti

请帮忙 ！！我只想使用这种格式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:20:28.493

您可以使用简单的正则表达式轻松完成此操作：

```
public static void main(String[] args) {
    String[] s1 = {"my name is ankit kapoor", "my name is mayank gupta", "my name is preeti singh"};
    final Pattern pattern = Pattern.compile("is ([a-zA-Z]+) ");
    for (final String string : s1) {
        final Matcher matcher = pattern.matcher(string);
        matcher.find();
        System.out.println(matcher.group(1));
    }
} 
```

输出：

```
ankit
mayank
preeti 
```

**编辑**

如果你想用它`substring`来查找名字，你需要模拟正则表达式的作用，即找到第一个模式（“is”），然后沿着`String`找到一个空格。

```
public static void main(String[] args) {
    String[] s1 = {"my name is ankit kapoor", "my name is mayank gupta", "my name is preeti singh"};
    for (final String string : s1) {
        final int start = string.indexOf("is ") + 3;
        int end = start;
        for (final char c : string.substring(start).toCharArray()) {
            if (c == ' ') {
                break;
            }
            ++end;
        }
        System.out.println(string.substring(start, end));
    }
} 
```

输出：

```
ankit
mayank
preeti 
```

# android - ViewPager 指示器不起作用

> ID：15359648
> 
> 赞同：0
> 
> 时间：2013-03-12T11:15:36.853
> 
> 标签：android, android-layout, android-viewpager

我还是 android 新手，正在开发我的第一个应用程序。到目前为止，一切都很好。除其他外，该应用程序将包含一个 ViewPager 以通过滑动在不同的 xml 布局之间切换。这很好用。但是我想使用[ViewPagerIndicator](http://viewpagerindicator.com/#introduction)来指示显示模板的位置。

所以我尝试将基于不同教程/说明的代码包含到我的项目中，但模板/ ViewPager 不再显示，应用程序在那时中断。感谢您提前提供任何提示；）

这是[代码+ logCat](http://pastebin.com/mdfC7ZBt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:18:35.610

如果它不是错字，那么您在这一行中缺少一个括号：

```
UnderlinePageIndicator indicator = UnderlinePageIndicator)findViewById(R.id.indicator); 
```

应该

```
UnderlinePageIndicator indicator = (UnderlinePageIndicator)findViewById(R.id.indicator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:20:19.890

在xml中你有：

```
 <com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    /> 
```

但是你`UnderlinePageIndicator`在你的代码中使用，所以它应该是：

```
 <com.viewpagerindicator.UnderlinePageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    /> 
```

# jquery - 具有 tr id 错误的表遍历

> ID：15359651
> 
> 赞同：3
> 
> 时间：2013-03-12T11:15:49.890
> 
> 标签：jquery

[演示](http://jsfiddle.net/WVQ5p/2/)

```
$(function (){                
    selectServiceRow(1) ;
    $(document).on('click', '#tableList', function (e){
         var index = parseInt($(e.target).closest('tr').index());
         if(index==0){return;}
         selectServiceRow(index);
    });
});

function selectServiceRow(rowIndex){                 
     $('#tableList').find('tr').eq(rowIndex)
          .removeClass('csstrred').addClass('csstablelisttdselected');
} 
```

从上面的小提琴你看到，当我点击表中的任何行时，默认选择第一行我必须显示任何具有 id 'error' 的行都是红色的，但点击的行必须具有类 csstablelistselected' **示例：* *默认情况下第一行被选中。如果我单击第 4 行，则第 1 行类显示为红色，因为 tr id 是“错误”我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:21:49.397

您正在使用 的多个 ID `error`，您应该**真正**使用一个类（使用重复的 ID 不是一个好习惯，并且在选择它们时会证明是一场噩梦）。

无论如何，这将解决它：

```
function selectServiceRow(rowIndex)
{
    var found = $("#tableList tr:eq(" + rowIndex + ")");
    $("#tableList tr").removeClass("csstablelisttdselected");
    $("#tableList tr[id='error']").addClass("csstrred");
    found.addClass('csstablelisttdselected').removeClass("csstrred");   
} 
```

小提琴：http: [//jsfiddle.net/WVQ5p/5/](http://jsfiddle.net/WVQ5p/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:25:40.330

试试这个：

```
$(function ()
{                
    selectServiceRow(1) 

    $(document).on('click', '#tableList', function (e)
    {
        $('#tableList tr.csstablelisttdselected').each(function(){
            $(this).removeClass('csstablelisttdselected');
        });
        var index = parseInt($(e.target).closest('tr').index());
        if(index==0){return;}
        selectServiceRow(index);
    });
}); 
```

**小提琴：http:** [//jsfiddle.net/WVQ5p/4/](http://jsfiddle.net/WVQ5p/4/)

# ios - 可以点击的UIView“下雨”透明覆盖？

> ID：15359653
> 
> 赞同：3
> 
> 时间：2013-03-12T11:15:52.903
> 
> 标签：ios, objective-c, uiview

我想创建一个`UIView`动画下雨的动画，它应该在所有其他视图之上，在最前面，但透明，它根本不应该注册点击或交互，所以点击它后面的 UI 应该完全正确就像现在一样，在我实施它之前。它会作为一个覆盖，仅此而已。

这就像设置一样简单`UserInteractionEnabled`，`NO`还是还有更多？我是否需要子类化`UIView`或覆盖某些东西等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:20:05.507

是的，设置`userInteractionEnabled = NO;`不需要继承 UIView。例如：

```
UIView *overlay = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
overlay.backgroundColor = [UIColor colorWithWhite:0 alpha:.5];
[self.view addSubview:overlay]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:00:19.527

正如@zenith 解释的那样，您可以在添加透明子视图后使用hittest。

在 UIResponder 中 hitTest:withEvent: 的实现做了以下事情：

它调用 pointInside:withEvent: of self

如果返回为 NO，hitTest:withEvent: 返回 nil。故事的结局。

如果返回是 YES，它会发送 hitTest:withEvent: 消息到它的子视图。它从顶级子视图开始，并继续到其他视图，直到子视图返回非零对象，或者所有子视图都收到消息。

如果子视图第一次返回非零对象，则第一个 hitTest:withEvent: 返回该对象。故事的结局。

如果没有子视图返回非nil对象，则第一个hitTest:withEvent:返回self这个过程递归地重复，所以通常最终返回视图层次结构的叶子视图。

但是，您可能会覆盖 hitTest:withEvent 以执行不同的操作。在许多情况下，覆盖 pointInside:withEvent: 更简单，并且仍然提供足够的选项来调整应用程序中的事件处理。

# c++ - 显式析构函数调用后此分配无效吗？

> ID：15359654
> 
> 赞同：4
> 
> 时间：2013-03-12T11:15:54.227
> 
> 标签：c++

我遇到了一些旨在在不重新分配内存的情况下就地替换对象的代码：

```
static void move(void* const* src, void** dest) {
   (*reinterpret_cast<T**>(dest))->~T();
   **reinterpret_cast<T**>(dest) = **reinterpret_cast<T* const*>(src);
} 
```

这对我来说看起来像 UB，因为对象被销毁然后分配给没有被构造，即它需要只是复制分配（仅第二行）或显式破坏（第一行），然后是放置新复制构造而不是分配。

我之所以这么问，是因为尽管这对我来说似乎是一个明显的错误，但它在[boost::spirit::hold_any](http://www.boost.org/doc/libs/1_53_0/boost/spirit/home/support/detail/hold_any.hpp)[`cdiggins::any`](http://www.codeproject.com/Articles/11250/High-Performance-Dynamic-Typing-in-C-using-a-Repla)和它所基于的原始版本中已经存在了一段时间。（我已经在 Boost 开发者邮件列表中询问过它，但在等待回复时，如果它确实不正确，希望在本地解决这个问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:24:01.867

Assuming the `reinterpret_cast`s are well-defined (that is, `dest` really is a pointer to pointer to `T`), the standard defines the end of an object's lifetime as:

> The lifetime of an object of type T ends when:
> 
> *   if T is a class type with a non-trivial destructor (12.4), the destructor call starts, or
> *   the storage which the object occupies is reused or released.

It then gives some restrictions over what can be done with the glvalue `**reinterpret_cast<T**>(dest)`:

> Similarly, [...] after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any glvalue that refers to the original object may be used but only in limited ways. [...] The program has undefined behavior if:
> 
> *   an lvalue-to-rvalue conversion (4.1) is applied to such a glvalue,
> *   **the glvalue is used to access a non-static data member or call a non-static member function of the object**, or
> *   the glvalue is implicitly converted (4.10) to a reference to a base class type, or
> *   the glvalue is used as the operand of a static_cast (5.2.9) except when the conversion is ultimately to cv char& or cv unsigned char&, or
> *   the glvalue is used as the operand of a dynamic_cast (5.2.7) or as the operand of typeid.

Emphasis added.

If the object doesn't end up in this after-life state because it has a trivial destructor, there is no problem. However, for any `T` which is a class type with non-trivial destructor, we know that the assignment operator is considered a member function `operator=` of that class. Calling a non-static member function of the object through this glvalue results in undefined behaviour.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:20:38.547

> 这对我来说看起来像 UB，因为对象被销毁然后分配给没有被构造，即它需要只是复制分配（仅第二行）或显式破坏（第一行），然后是放置新的复制构造而不是分配。

没有必要修复任何东西，尽管如果没有进一步的限定，这段代码肯定是不安全的（但在使用它的上下文中肯定是安全的）。

对象 at`dest`被销毁，然后支持对象 at 的内存`src`被复制到对象 at`dest`曾经存在的位置。最终结果：您已经销毁了一个对象，并在第一个对象曾经存在的地方放置了另一个对象的浅克隆。

如果您只进行复制分配，则第一个对象不会被破坏，从而导致资源泄漏。

使用放置`new`来填充内存`dest`是一种选择，但它的语义与现有代码有很大不同（创建一个全新的对象，而不是对现有对象进行浅层克隆）。放置 new 和使用复制构造函数也有不同的语义：对象需要有一个可访问的复制构造函数，并且您不再控制结果将是什么（复制构造函数做任何它想要的）。

# javascript - 为什么这些绑定函数的“this”上下文在每个新实例中都相同？

> ID：15359659
> 
> 赞同：1
> 
> 时间：2013-03-12T11:16:08.117
> 
> 标签：javascript, prototype, this

（开放编辑以获得更好的问题标题 - 很难说出我在寻找什么）

你好，

我一直在使用原型，但最近发现需要在原型中使用命名空间来对相关功能进行分组。代码最简单的形式如下所示：

```
// Base grid functions.
Grid.prototype = {

    init: function init() {
        document.getElementById("output").innerHTML += "<br>" + this.id;

        this.Rows.init();

        this.Test.init();

        document.getElementById("output").innerHTML += "<br><br>";
    },

    Test: {
        init: function init() {
            document.getElementById("output").innerHTML += "<br>" + this.id;
        }
    }

};

// Additional row-related and row utility functions.
Grid.prototype.Rows = {

    init: function init() {
        document.getElementById("output").innerHTML += "<br>" + this.id;
    }
}; 
```

在我的`Rows`“命名空间”中，我想维护上下文，`this`以便开发人员可以调用函数`gridInstance.Rows.get()`，例如，而不必每次都传递上下文（通过调用或应用）。

为此，我使用 LoDash 的`_.bind`函数将每个新`Grid`实例的上下文设置为每个与行相关的函数的上下文。

请注意，`Test`“命名空间”纯粹是为了看看，当嵌套在`Grid`原型中时，它是否会产生不同的结果。

```
var Grid = function Grid(id) {
    var t = this;

    // Assign an id to the control.

    if (!id) {
        // Assign a custom id if the control does not have one.
        id = "grid-" + new Date().getTime();
    }

    t.id = id;

    _.each(t.Rows, function (rowFn, key) {
        t.Rows[key] = _.bind(rowFn, t);
    });

    _.each(t.Test, function (rowFn, key) {
        t.Test[key] = _.bind(rowFn, t);
    });

    t.init();
}; 
```

[这里](http://jsfiddle.net/Lk3vF/3/)有一个小提琴，显示输出：

```
x x x

y x x

z x x 
```

我的问题是，为什么`Rows`原型没有被实例化为新的（就像`Grid.prototype`你每次调用时一样`new Grid()`，我该如何解决这个问题？

### 额外的想法

我的想法是，`Grid.prototype`作为任何新`Grid`实例的蓝图，它将包含命名空间`Rows`作为其中的一部分。

因此，在构造函数中，当我应用to`Grid`的新上下文时，最初将是蓝图的副本，而不是仅属于该实例的引用。`this``this.Rows``this.Rows``Grid.prototype.Rows`

在`Grid`构造函数中，我想我会修改`this.Rows`，例如，绑定到的上下文`this`，而不是原型本身。

### 发布答案

我的额外想法很愚蠢，因为我忘记了原型被继承自它的所有对象引用，而不是被用作对象实例的蓝图。

[这里](http://jsfiddle.net/T865Q/)的小提琴说明了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:36:03.073

因为这就是原型的用途：它的所有成员对于每个实例都是相同的。例如，您可以调用`this.Rows = Object.create(Grid.prototype.Rows);`Grid 初始化函数，但您必须自己进行。JavaScript 不知道您需要为每个 Grid 实例创建一个新实例。

# javascript - 根据文本输入值更新显示的 div 数

> ID：15359664
> 
> 赞同：0
> 
> 时间：2013-03-12T11:16:23.903
> 
> 标签：javascript, jquery, html, filter

我想我正朝着正确的方向前进我似乎只是缺少一些简单的东西

我正在使用 jquery 旋钮插件来更新输入字段

```
$('document').ready(function() {

    $(".knob").knob({
                    change : function (value) {
                        //console.log("change : " + value);
                    },
                    release : function (value) {
                        //console.log(this.$.attr('value'));
                        console.log("release : " + value);

                        var num = parseInt($("#sitesinput").val());
                        var total = $(".one").length;
                        alert(num + ' ' + total);

                              $(".one").slice(1,value).fadeToggle();

                    },
                    cancel : function () {
                        console.log("cancel : ", this);
                    }
                });

}); 
```

```
<div class="item box one">1</div>
<div class="item box one">2</div>
<div class="item box one">3</div>
<div class="item box one">4</div>
<div class="item box two"></div>
<div class="item box two"></div>
<div class="item box two"></div>
<div class="item box two"></div>
<div class="item box three"></div>
<div class="item box three"></div>
<div class="item box three"></div>
<div class="item box three"></div> 
```

我附上了我一直在做的[演示的链接](http://jsfiddle.net/Jrand/HYt4Z/4/)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:37:41.797

将淡入淡出切换更改为：

```
$('.one').slice(0,value).fadeOut();
$('.one').slice(value).fadeIn(); 
```

这就是说隐藏低于该值的那些并显示高于它的那些。你很接近，但淡入淡出切换隐藏/显示了你不想的。

JSFiddle：http: [//jsfiddle.net/HYt4Z/6/](http://jsfiddle.net/HYt4Z/6/)

# javascript - jquery如何删除ui-state-focus

> ID：15359665
> 
> 赞同：0
> 
> 时间：2013-03-12T11:16:30.420
> 
> 标签：javascript, jquery

使用 jquery 和按钮使用了我的样式，但是当我单击按钮时，ui-state-focus 上的样式发生了变化。我尝试删除 jquery 样式

```
$("button").mousedown(function () {
      $('button').removeClass("ui-state-focus");
}); 
```

但它没有奏效。如何删除 jquery 样式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:33:52.393

我在焦点中添加了 removeClass 并为我工作。

```
$("button").focus(function () {
    $(this).removeClass("ui-state-focus");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:18:16.103

你应该使用`$(this)`而不是`$('button')`

```
$("button").mousedown(function () {
      $(this).removeClass("ui-state-focus");
}); 
```

# c++ - 重载 ->* 运算符时会发生什么？

> ID：15359668
> 
> 赞同：3
> 
> 时间：2013-03-12T11:16:46.403
> 
> 标签：c++, operator-overloading

我正在经历这个重载 ->* 运算符的特殊示例。我努力克服为什么我们需要重载 () 运算符，但经过大量谷歌搜索和 reerences 后无法得到它。Eckel 说，当调用 operator ->* 时，编译器立即转身并调用 operator()对于 operator ->* 的返回值。现在我知道我们想要使用这个 ->* 运算符的目的是充当类的智能指针，它应该能够像普通指针一样引用成员函数。所以我们像 (w->* pmf)(1) 那样做，在这里我认为 ->* 需要知道 () 中 int 的返回值，这就是它在 ->* 运算符之上重载的原因. 在嵌套迭代器的情况下，我有另一个疑问，为什么我们需要在声明嵌套类之前声明它为友元，同时重载 -> 以使其像嵌套迭代器一样？我是 C++ 的初学者，这就是为什么这些问题可能看起来太天真以至于有些人对此感到抱歉，但是是的，我想对这些东西有非常深入的了解，因为到目前为止我一直在为重载 -> 和 ->* 苦苦挣扎.

```
#include <iostream>
using namespace std;
class Dog {
    public:
    int run(int i) const {
        cout << "run\n";
        return i;
    }
    int eat(int i) const {
        cout << "eat\n";
        return i;
    }
    int sleep(int i) const {
        cout << "ZZZ\n";
        return i;
    }
    typedef int (Dog::*PMF)(int) const;
    // operator->* must return an object
    // that has an operator():
    class FunctionObject {
        Dog* ptr;
        PMF pmem;
        public:
        // Save the object pointer and member pointer
        FunctionObject(Dog* wp, PMF pmf): ptr(wp), pmem(pmf) {
            cout << "FunctionObject constructor\n";
        }
        // Make the call using the object pointer
        // and member pointer
        int operator()(int i) const {
            cout << "FunctionObject::operator()\n";
            return (ptr->*pmem)(i); // Make the call
        }
    };
    FunctionObject operator->*(PMF pmf) {
        cout << "operator->*" << endl;
        return FunctionObject(this, pmf);
    }
};
int main() {
    Dog w;
    Dog::PMF pmf = &Dog::run;
    cout << (w->*pmf)(1) << endl;
    pmf = &Dog::sleep;
    cout << (w->*pmf)(2) << endl;
    pmf = &Dog::eat;
    cout << (w->*pmf)(3) << endl;
} 
```

# c++ - protobuf 必填字段和默认值

> ID：15359669
> 
> 赞同：6
> 
> 时间：2013-03-12T11:16:47.333
> 
> 标签：c++, protocol-buffers

我是 protobuf 的新手，我已经开始考虑以下简单的示例

```
message Entry {
  required int32 id = 1;
} 
```

由 c++ 代码使用

```
#include <iostream>
#include "example.pb.h"
int main() {
  std::string mySerialized;
  {
    Entry myEntry;
    std::cout << "Serialization succesfull " 
              << myEntry.SerializeToString(&mySerialized) << std::endl;
    std::cout << mySerialized.size() << std::endl;
  }
  Entry myEntry;
  std::cout << "Deserialization successfull "
            << myEntry.ParseFromString(mySerialized) << std::endl;
} 
```

即使需要“id”字段，由于尚未设置，因此序列化缓冲区的大小为0（？？）。

当我反序列化消息时发生错误：

```
[libprotobuf ERROR google/protobuf/message_lite.cc:123] Can't parse message of type "Entry" because it is missing required fields: id 
```

这是正常行为吗？

弗朗切斯科

ps-如果我用值0初始化“id”，行为是不同的

pps-`SerializeToString`函数返回true，`ParseFromString`返回false

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:29:32.717

*我不认为我完全理解你的问题，但无论如何我都会尝试回答。希望这对您有所帮助:)*

是的，这是正常行为。`required`仅当该字段对消息很重要时才应添加。这在语义上是有意义的。（为什么要跳过必填字段）。为了强制执行此操作，protobuf 不会解析消息。

它看到标有数字 1 的字段是必需的，并且该`has_id()`方法返回 false。所以它根本不会解析消息。

在[开发人员指南](https://developers.google.com/protocol-buffers/docs/proto)中，建议不要使用必填字段。

> **必填项是永久**的 您应该非常小心地根据需要标记字段。如果在某些时候您希望停止写入或发送必填字段，则将该字段更改为可选字段会出现问题——老读者会认为没有此字段的消息不完整，可能会无意中拒绝或丢弃它们。您应该考虑为您的缓冲区编写特定于应用程序的自定义验证例程。Google 的一些工程师得出的结论是，使用 required 弊大于利。他们更喜欢只使用可选的和重复的。然而，这种观点并不普遍。

还

> 您添加的任何新字段都应该是可选的或重复的。这意味着使用“旧”消息格式的代码序列化的任何消息都可以由新生成的代码解析，因为它们不会丢失任何必需的元素。您应该为这些元素设置合理的默认值，以便新代码可以与旧代码生成的消息正确交互。类似地，新代码创建的消息可以由旧代码解析：旧二进制文件在解析时会忽略新字段。但是，未知字段不会被丢弃，如果消息稍后被序列化，未知字段也会随之序列化——因此，如果将消息传递给新代码，新字段仍然可用。请注意，未知字段的保存当前不适用于 Python

# vim - 如何告诉 Vim 不要使用 ~/.vim

> ID：15359670
> 
> 赞同：3
> 
> 时间：2013-03-12T11:16:49.427
> 
> 标签：vim, settings

默认情况下，Vim 会在`~/.vim`.

有没有办法告诉 Vim 搜索插件等`~/.other_folder`并强制它`~/.vim`完全忽略？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:29:44.157

Vim 使用逗号分隔的路径 from`'runtimepath'`来确定在哪里查找`:runtime`'d 文件。

您可以在`~/.vimrc`（作为第一个脚本的来源）或通过`set rtp=...`在 Vim 的命令行上传递命令来更改该选项（传递`--cmd`的命令`-c`仅在启动后应用）。

# jquery - 退格/删除在 Jquery 字母数字验证中不起作用

> ID：15359677
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:17:01.947
> 
> 标签：jquery, keycode, alphanumeric, backspace

Backspace/Delete 在**Mozilla Firefox**中无法用于 Jquery 字母数字验证。

```
<input type="text" id="myTextBox" />
$("#myTextBox").bind("keypress", function(event) { 
    var charCode = event.which;

    var keyChar = String.fromCharCode(charCode); 
    return /[a-zA-Z0-9]/.test(keyChar); 
}); 
```

[点击这里进行演示](http://jsfiddle.net/cLaDH/219/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:24:15.877

使用此代码

```
<input type="text" id="myTextBox" />
$("#myTextBox").bind("keypress", function(event) { 
        var charCode = event.which;

        if(charCode == 8 || charCode == 0)
        {
             return;
        }
        else
        {
            var keyChar = String.fromCharCode(charCode); 
            return /[a-zA-Z0-9]/.test(keyChar); 
        }
    }); 
```

# xml - XML 未在 Windows Server 2008 上使用 XSL 样式表显示

> ID：15359678
> 
> 赞同：1
> 
> 时间：2013-03-12T11:17:05.737
> 
> 标签：xml, xslt, vbscript, msxsl

嗨，我知道这可能是模棱两可的，但我真的需要帮助。

我正在尝试使用 XSL 样式表显示 XML 数据，但在我的 IE 上收到以下错误消息。

无法显示 XML 页面 无法使用 XSL 样式表查看 XML 输入。请更正错误，然后单击“刷新”按钮，或稍后重试。

关键字 xsl:choose 不能包含 P。

* * *

我无法使用 xsl 显示我的 xml 数据，有人遇到过这个错误吗？或修复它？

下面是“xsl:choose”的快照代码。

```
<xsl:choose>
  <xsl:when test="/Object/Contract/TeleUWInd[.= 'True']">
    <P align="center">
      <FONT face="Century Gothic" size="2" style="BORDER-BOTTOM-STYLE: solid">Application for what what(Tele interview)</FONT>
    </P>
  </xsl:when>
  <xsl:otherwise>
    <P align="center">
      <FONT face="Century Gothic" size="2" style="BORDER-BOTTOM-         STYLE: solid">Application for Assurance Summary</FONT>
    </P>
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:15:01.403

正如评论中所揭示的，问题出在错误中，`p`元素直接位于`xsl:choose`元素内部：

```
<xsl:choose>
  ...
  <xsl:otherwise>
    <xsl:if test="...">

      ....
    </xsl:if>
  </xsl:otherwise>
  <p> On clicking the ... </p>
</xsl:choose> 
```

# html - 如何用类覆盖我网站的链接颜色？

> ID：15359679
> 
> 赞同：0
> 
> 时间：2013-03-12T11:17:11.657
> 
> 标签：html, css

我在覆盖我网站的默认链接颜色时遇到了一些麻烦。尝试查找类似的问题，但仍然碰壁。

这就是我定义的基本链接颜色：

```
a:link, a:visited, a:hover { color: #0279aa } 
```

这是我对特定元素的样式覆盖。

```
a:link.slideshow-navigate { 
  background : #37ab4f;
  color : #fff;
} 
```

我已将链接定义如下：

```
<a href="#" class="slideshow-navigate">Link name</a> 
```

但是，我的链接颜色仍然显示为`#0279aa`而不是`#fff`. 我想尽可能避免使用“！important”。

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:18:33.527

应该是这样的

```
a.slideshow-navigate{
    background : #37ab4f;
    color : #fff;
} 
```

**[演示](http://jsfiddle.net/HN37L/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:20:25.007

做这个：

```
a.slideshow-navigate
    {
        color:#fff;
    } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-12T11:21:39.257

你可以这样做

```
a:link:not[href^="http"]{

background : #37ab4f;
  color : #fff;
} 
```

不需要在每个链接中添加一个类

这将为所有内部链接设置样式，并避免从`http`.

# jquery - 通过 jQuery 的 css 转换在 Firefox 中不起作用

> ID：15359681
> 
> 赞同：1
> 
> 时间：2013-03-12T11:17:24.420
> 
> 标签：jquery, firefox, css

当您将鼠标悬停在 li 元素上时，我正在尝试移动水平列表。动画涉及一些新 div 的显示/隐藏和调整大小以及 ul 的 X 平移。除了 Firefox 上的 X 翻译外，Everyting 工作正常。

实际的脚本太大了，无法在 Jsfiddle 上发布，但这里是“麻烦制造者”

JS代码是：

```
var translation="translateX("+next_move+"px)";
console.log("translation: "+translation);
$('#carousel').css({"top":"10px","-moz-transform":translation});
$('#carousel').css({"top":"10px","-webkit-transform":translation}); 
```

CSS 为`#carousel`

```
#carousel{
    position:relative;
    webkit-transition: -webkit-transform 0.2s linear;
   -moz-transition: -moz-transform 0.2s linear; 
   -ms-transition: -ms-transform 0.2s linear;  
    -o-transition: -o-transform 0.2s linear;  
    transition: transform 0.2s linear; 
} 
```

有人能指出我正确的方向吗？谢谢

# iphone - 在 iOS 应用上使用 android shape xml 资源

> ID：15359684
> 
> 赞同：3
> 
> 时间：2013-03-12T11:17:32.387
> 
> 标签：iphone, ios, objective-c, xml, image

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我从我做的一个 Android 应用程序中获得了这个资源：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/gauge_background">

     <gradient
                android:startColor="#449def"
                android:endColor="#2f6699"
                android:angle="270" />

     <stroke
         android:width="1dp"
         android:color="#2f6699" />

     <corners android:radius="30dp" />

     <padding
         android:bottom="10dp"
         android:left="10dp"
         android:right="10dp"
         android:top="10dp" />
</shape> 
```

并想在我的 iOS 应用程序中使用它。

**你知道是否有办法加载这个 xml 并将其显示为 UIView backgroundColor？**

像这样的东西：

```
self.backgroundColor =
    [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:imageName]]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:20:43.390

如果不将原始的 android 形状定义转换为可以在 UIView 中显示的内容（即笔尖或核心图形绘制指令），就无法做到这一点。

据我所知，不存在这样的转换工具。

我建议你看看像[paintcodeapp](http://paintcodeapp.com)这样的工具来简化为你的 iOS 项目创建动态图形的过程。（它将导入 SVG 并将它们转换为绘图代码）

例如，如果您需要锚定/拉伸形状而不扭曲关键部分，这非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:25:24.213

是的，正如@Slomojo 所说，没有办法。

如果可以，您可以将 xml 数据转换为一个`UIImage`，然后像您`UIcolor`提到的那样加载该图像

```
self.backgroundColor =[[UIColor alloc] initWithPatternImage:[UIImage imageNamed:imageName]]; 
```

# passwords - 如何在需要以纯文本形式传递给第三方的 webapp 中存储密码？

> ID：15359687
> 
> 赞同：1
> 
> 时间：2013-03-12T11:17:43.293
> 
> 标签：passwords, password-encryption, gnupg

我有一个简单的 web 应用程序，用户登录以访问第三方 API，该 API 还需要纯文本用户名和密码（没有 OAuth 或任何东西）的个人凭据。存储这些第三方密码的正确、安全和直接的方法是什么，以便我可以在需要时将它们解密为纯文本并最大限度地减少这些密码的泄漏？

我正在考虑只是硬编码 GPG 密钥以在 webapp 中加密以进行存储，并在需要时从防火墙后面的另一台机器解密。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:45:09.503

我认为这不是 GPG 特有的问题。您可以考虑如下方案（不需要公钥加密）：

1.  生成随机密码以加密您要保护的明文凭据
2.  派生一个密钥以保护此随机密码免受用户密码的影响
3.  使用步骤 2 中的密码加密步骤 1 中的密码

现在，您可以在用户登录后访问受保护的凭据（因为您知道用户输入的密码）。当用户更改他的密码时，您只需从步骤 1 重新加密密钥（以防您在多个地方使用此密钥；因此您不能错过任何一个）。

对于第 2 步，您应该使用一些（慢）密钥派生函数，如 PBKDF2。这确保了在发生安全漏洞的情况下，不可能对加密凭据进行简单的字典攻击。

# ruby-on-rails - 为什么在使用 button_to 时出现错误？

> ID：15359688
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:17:45.493
> 
> 标签：ruby-on-rails

给我错误的代码行是：

```
<%= button_to 'Search', static_pages/gallery %> 
```

错误是：

> 未定义的局部变量或方法“static_pages”

这是我的路线：

```
match "/home" => "static_pages#home"
match "/gallery" => "static_pages#gallery"

get "static_pages/home"
get "static_pages/gallery"
post "static_pages/gallery" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:53:24.963

这是无效的语法：

```
<%= button_to 'Search', static_pages/gallery %> 
```

Ruby 将寻找不存在的变量`static_pages`and 。`gallery`它应该是一个字符串：

```
<%= button_to 'Search', 'static_pages/gallery' %> 
```

# cakephp - 如何在 cakephp 中路由用户生成的路径，例如 mysite.com/username1？

> ID：15359689
> 
> 赞同：0
> 
> 时间：2013-03-12T11:17:47.850
> 
> 标签：cakephp

我正在制作一个 cakephp 2.3 应用程序并拥有这些“页面”：

```
mysite.com/demo
mysite.com/admin 
```

以上是固定的。生成以下内容：

```
mysite.com/johnsmith
mysite.com/cooluser88 
```

我已经更新了路线：

```
Router::connect(
'/*/',
array('controller' => 'pages', 'action' => 'redirect') 
```

);

我在正确的轨道上吗？页面控制器中的重定向方法？我正在使用官方文档，但我无法找到具体的例子。

我会继续努力，如果找到答案，我会更新！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:51:33.297

你最好的选择 IMO 是做类似 reddit 的事情，其中​​每个 slug 都带有前缀`/r/`.

例子：

```
mysite.com/u/johnsmith 
```

然后，在您的路线中，您可以执行以下操作：

```
Router::connect('/u/:uname/*', array('controller'=>'users', 'action'=>'display'), 
    array('pass'=>array('uname'))); 
```

如果你真的不想这样做，你可以使用类似的东西：

```
Router::connect('/:uname/*', array('controller'=>'users', 'action'=>'display'), 
    array('pass'=>array('uname'))); 
```

但请记住，任何其他控制器、插件......等等等等都需要它们自己的路由，因为它会认为 ANYTHING`mysite.com/`在`uname`. IMO 不是最好的主意。

# java - Java BufferedImage 不起作用

> ID：15359690
> 
> 赞同：0
> 
> 时间：2013-03-12T11:17:49.250
> 
> 标签：java, bufferedimage

```
public class image {
    JFrame pen = new JFrame();

    public image () {
        pen.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pen.setBounds(150, 100, 613, 231);
        pen.setVisible(true);

        try {
            URL url = new URL("http://images2.layoutsparks.com/1/56178/castle-stone-window-grey.jpg");
            BufferedImage bI = ImageIO.read(url);
            ImageIO.write(bI, "jpg", new File("C:\\kibAr.jpg"));
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

我没有错误但为什么不工作？（我想使用 BufferedImage）

以及如何设置此图形的窗口背景？

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:19:53.290

如果通过工作您的意思是在框架上显示 BufferedImage，那是因为您根本没有将其实际添加到框架的代码！

您可能希望在[此处](https://stackoverflow.com/questions/299495/java-swing-how-to-add-an-image-to-a-jpanel)查看有关如何执行此操作的一些示例。

最快的方法可能是这样的：

```
JLabel picLabel = new JLabel(new ImageIcon(bI));
pen.add(picLabel); 
```

# android - SQLITE 数据查询

> ID：15359691
> 
> 赞同：0
> 
> 时间：2013-03-12T11:17:53.920
> 
> 标签：android, sqlite

有谁知道为什么它不起作用

```
 bd.rawQuery("SELECT * FROM TABLE_NAME WHERE date(date_start)=?",new String[]{"date('now')"}); 
```

我对其进行了测试，我认为问题在于它不能将 date('now') 识别为 sqlite 函数，而只是将其识别为字符串。

我可以解决这个问题吗？

谢谢

# php - jQuery UI Datepicker - 能够选择日期或月份

> ID：15359693
> 
> 赞同：10
> 
> 时间：2013-03-12T11:17:54.900
> 
> 标签：php, jquery, jquery-ui, jquery-ui-datepicker

我想知道是否有任何方法可以在 jQuery UI 中选择一整月，`Datepicker`同时仍然可以选择一天。

我尝试通过在页面加载后`onClick`向标题添加一个事件来“破解”它`div`，但切换月份似乎完全取代了 div，从而丢失了`onClick`.

还有其他解决方案吗？或者也许是提供此选项的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:59:33.450

你的`onClick`活动应该足够了。您只需要使用适用于动态链接的 jQuery 事件处理程序。

如果 < jQuery 1.7，使用：[live()](http://api.jquery.com/live/)
否则如果 >= jQuery 1.7，使用：[on()](http://api.jquery.com/live/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T18:55:23.140

如果您不一定需要它在一个日期选择器中发生，那么拥有其中两个可能不会那么混乱。使用一个选择开始日期，使用另一个选择结束日期。选择日期后，您将需要验证以确保所选结束日期不早于开始日期（假设您想要该行为）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T02:55:46.200

将 jQuery 日期选择器转换为 mont 选择器将导致您使用庞大的代码。有很多方法可以做到这一点，最好的一种是通过函数覆盖方法隐藏日期块。您可以通过任何方式将此插件用于月/年选择器。 [http://lucianocosta.info/jquery.mtz.monthpicker/](http://lucianocosta.info/jquery.mtz.monthpicker/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-24T00:25:05.220

我可以，但是 div id="anything" 中的 Datepicker 然后像这样使用实时事件点击而不破解任何原始代码

```
 $("#anything .ui-datepicker-month").live('click',function(){
        do any thing :) ;
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-28T00:58:50.427

我认为这已经发布在这里 [jQuery UI DatePicker 仅显示月份年份](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only) 非常相似但效果基本相同 月份中选择的任何日期仅显示月份

# c++ - 为什么在 exe 中发现名称错误？

> ID：15359696
> 
> 赞同：3
> 
> 时间：2013-03-12T11:17:58.063
> 
> 标签：c++, linker, name-mangling

我有一个 MS C/C++ 静态链接的发布 exe（没有调试信息），它**不导出任何符号**，但是当用十六进制查看器浏览它时，我看到类似

```
.?AVElxInterface@@
.?AV?$CBufferRefT@H@@
.?AV?$CBufferT@H@@
.?AV?$CBufferRefT@PAVElxInterface@@@@ 
```

当然，它们是内部 C++ 模块提供的某些类/成员的错误名称。

他们为什么在那里？如何避免暴露他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:27:34.107

就个人而言，我认为没有任何理由过度隐藏这些数据，因为它无法为查看它的人提供有关如何利用这些符号做“坏事”的线索。但是，如果这对您来说确实是一个大问题，即您害怕以某种方式进行逆向工程，那么您可能会选择代码混淆。例如，[Semantic Designs](http://www.semdesigns.com/Products/Obfuscators/CppObfuscationExample.html)为这些目的提供产品，并声称它是高质量的。我自己从来没有机会尝试过这些东西。请记住，它是商业的。

# javascript - 将 js var 作为属性传递给 jquery 操作

> ID：15359699
> 
> 赞同：0
> 
> 时间：2013-03-12T11:18:07.837
> 
> 标签：javascript, jquery, html

```
var temp="path.png" 
```

如何将 temp var 传递给 jquery 函数，如下所示

```
$('#mapfoto').prepend('<img id="theImg"  src="http://path.gr/"+temp />') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:19:13.027

```
$('#mapfoto').prepend('<img id="theImg"  src="http://path.gr/' + temp + '" />'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:19:06.203

在字符串连接中使用正确的引号位置：

```
$('#mapfoto').prepend('<img id="theImg" src="http://path.gr/' + temp + '" />'); 
```

# django - 如何处理属性错误？

> ID：15359700
> 
> 赞同：1
> 
> 时间：2013-03-12T11:18:08.517
> 
> 标签：django, django-urls

我有这三个功能，我把它们安排得很远

```
def show_order(request,id):
    order = Order.objects.get(pk=id)
    if request.method == 'POST':
        postdata = request.POST.copy()
        if postdata['submit'] == 'Remove':
            order.remove_from_order(request)
        if postdata['submit'] == 'Update':
            order.update_order(request)
        if postdata['submit'] == 'checkout':
            """once confirmed order, click checkout and redirect to checkout_form"""
            return HttpResponseRedirect(urlresolvers.reverse('checkout',kwargs={'id':order.id}))
    ....

def show_checkout(request,id):
    if request.method == 'POST':
        resto = Restaurant.objects.get(pk=id)
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            """create order after validating form"""
            order_created = create_order(request,resto)
            order_number = order_created.id
            if order_number:
                request.session['order_number'] = order_number
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    ......

def create_order(request,obj):
    """create new online_order containing each orderitem instance,save order and empty the order."""
    anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
    resto = Restaurant.objects.get(pk=obj.id)
    orders = Order()

    checkout_form = forms.CheckoutForm(request.POST,instance=orders)
    checkout = checkout_form.save(commit=False)

    checkout.created_by = anon_user
    checkout.modified_by = anon_user
    checkout.restaurant = resto
    checkout.status = Order.SUBMITTED
    checkout.save()

    if checkout.pk:
        """if the order save suceeded"""
        for ci in cart_items:
            """create order for each order_item"""
            ........ 
```

这是网址

```
url(r'^your_order/(?P<id>\d+)/$',show_order,name="order_index"),
url(r'^checkout/(?P<id>\d+)/$',show_checkout,name="checkout"), 
```

我明白了`AttributeError`，`'Order' object has no attribute 'get_order_items'`当我尝试重定向`show_order`到`show_checkout`

一般来说，我试图做的是为两个视图（`show_checkout`，`show_order`）设计网址，但这并不奏效。

`order=Order.objects.get(pk=id)`问题是，变量in`show_order`和我没有包含在上面的代码中`order.get_order_items(request)`的行之间存在冲突。`show_checkout`所以我将变量更改`order`为. 这解决了一切。诚实的错误..`show_order``orders`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:49:10.790

问题是，show_order 中的变量`order=Order.objects.get(pk=id)`和 show_checkout 中的一行之间存在冲突`order.get_order_items(request)`，我没有包含在上面的代码中。所以我将 show_order 中的变量顺序更改为订单。这解决了一切。老实人的错误。。

# c# - 如何使用 .NET 和 C# 将数据集对象转换为 JSON 对象？

> ID：15359701
> 
> 赞同：1
> 
> 时间：2013-03-12T11:18:10.957
> 
> 标签：c#, .net, json, asp-classic, dataset

我将数据从数据库中获取到数据集对象，然后在服务器端我想将数据集绑定到 jQuery 表，但该表接受[JSON](http://en.wikipedia.org/wiki/JSON)对象。

如何将 DataSet 对象转换为 JSON 以传递给 jQuery 表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:23:14.627

You can use [Newtonsofts Json.Net](http://james.newtonking.com/pages/json-net.aspx) and see [this example](http://www.west-wind.com/weblog/posts/2008/Sep/03/DataTable-JSON-Serialization-in-JSONNET-and-JavaScriptSerializer) which is using datatable serialization to JSON.

# java - 获取 JAR 文件的位置

> ID：15359702
> 
> 赞同：14
> 
> 时间：2013-03-12T11:18:11.643
> 
> 标签：java, class, jar, path, directory

我正在尝试获取 Runnable JAR 文件的运行位置。我试着做

```
try {
    String path = new java.io.File(".").getCanonicalPath();
} catch (IOException e) {
    e.printStackTrace();
} 
```

但这会返回：

```
C:\Users\Kevin\Desktop/server/Server 
```

而 JAR 文件位于

```
C:\Users\Kevin\Desktop 
```

我也试过做

```
return new file(Server.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

但这会返回：

```
C:\Users\Kevin\Desktop\server.jar/server/Server 
```

所以基本上我想要没有文件名而不是 ClassPath 的 JAR 文件的路径。

有什么办法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-12T11:32:08.653

**更新**

由于它在某些测试用例中不起作用，我将更新答案。

正确的方法应该是`ClassLoader`：

```
File jarDir = new File(ClassLoader.getSystemClassLoader().getResource(".").getPath());
System.out.println(jarDir.getAbsolutePath()); 
```

在各种类路径上测试，输出是正确的。

* * *

**旧答案**

这应该工作

```
File f = new File(System.getProperty("java.class.path"));
File dir = f.getAbsoluteFile().getParentFile();
String path = dir.toString(); 
```

它对我有用，我的程序在：

```
C:\Users\User01\Documents\app1\dist\JavaApplication1.jar 
```

它返回

```
C:\Users\User01\Documents\app1\dist 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-01-06T15:34:09.000

这是我计算jar目录的版本

```
/**
 * Compute the absolute file path to the jar file.
 * The framework is based on http://stackoverflow.com/a/12733172/1614775
 * But that gets it right for only one of the four cases.
 * 
 * @param aclass A class residing in the required jar.
 * 
 * @return A File object for the directory in which the jar file resides.
 * During testing with NetBeans, the result is ./build/classes/,
 * which is the directory containing what will be in the jar.
 */
public static File getJarDir(Class aclass) {
    URL url;
    String extURL;      //  url.toExternalForm();

    // get an url
    try {
        url = aclass.getProtectionDomain().getCodeSource().getLocation();
          // url is in one of two forms
          //        ./build/classes/   NetBeans test
          //        jardir/JarName.jar  froma jar
    } catch (SecurityException ex) {
        url = aclass.getResource(aclass.getSimpleName() + ".class");
        // url is in one of two forms, both ending "/com/physpics/tools/ui/PropNode.class"
        //          file:/U:/Fred/java/Tools/UI/build/classes
        //          jar:file:/U:/Fred/java/Tools/UI/dist/UI.jar!
    }

    // convert to external form
    extURL = url.toExternalForm();

    // prune for various cases
    if (extURL.endsWith(".jar"))   // from getCodeSource
        extURL = extURL.substring(0, extURL.lastIndexOf("/"));
    else {  // from getResource
        String suffix = "/"+(aclass.getName()).replace(".", "/")+".class";
        extURL = extURL.replace(suffix, "");
        if (extURL.startsWith("jar:") && extURL.endsWith(".jar!"))
            extURL = extURL.substring(4, extURL.lastIndexOf("/"));
    }

    // convert back to url
    try {
        url = new URL(extURL);
    } catch (MalformedURLException mux) {
        // leave url unchanged; probably does not happen
    }

    // convert url to File
    try {
        return new File(url.toURI());
    } catch(URISyntaxException ex) {
        return new File(url.getPath());
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-30T13:31:54.133

在我终于找到一个可行的解决方案之前，我不得不搞砸了很多。
可能`jarLocation`带有前缀`file:\`或`jar:file\`，可以使用删除`String#substring()`。

```
URL jarLocationUrl = MyClass.class.getProtectionDomain().getCodeSource().getLocation();
String jarLocation = new File(jarLocationUrl.toString()).getParent(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:28:05.670

如果你知道的话

```
file(Server.class.getProtectionDomain().getCodeSource().getLocation().getPath()); 
```

返回

```
C:\Users\Kevin\Desktop\server.jar/server/Server 
```

而且您知道您的 Jar 名称是 server.jar 或任何 .jar 文件，您的意图是获取 C:\Users\Kevin\Desktop ，直接的方法是进行字符串操作。

使用检索到的输出，基于 File.separator 对字符串进行标记并构造路径（通过将字符串与 File.separator 连接起来），直到获得包含 .jar 的标记

# java - onListItemClick 在另一个活动中将项目添加到 ListView

> ID：15359707
> 
> 赞同：0
> 
> 时间：2013-03-12T11:18:21.643
> 
> 标签：java, android, eclipse

如果这个问题已经存在，我很抱歉，但我找不到我的问题的任何答案。我的应用程序的想法是购物清单。用户可以看到食物列表，点击一个项目，它应该自动添加到列表中。

我已经拥有的是从原始文件夹中的 xml 文件生成的 ListView。这是我的食物，我没有将它存储在 SQLite 数据库中。
我现在想要做的是，当我单击此列表中的一个项目时，它会添加到另一个名为“ShoppingList.java”的 Activity 中的 ListView 中。它不应该立即打开，因此用户可以添加更多项目。

现在，当我单击一个项目时，它会添加到屏幕顶部同一活动中名为“选择”的 TextView。如何将一项活动从一个活动添加到另一个活动？非常感谢您的帮助！

```
 public class FishOk extends ListActivity {
    TextView selection;
    ArrayList<String> items=new ArrayList<String>();

    @Override
    public void onCreate(Bundle icicle) {
     super.onCreate(icicle);
     setContentView(R.layout.foodok_list);
     selection=(TextView)findViewById(R.id.selection);

    try {
     InputStream in=getResources().openRawResource(R.raw.fish);
     DocumentBuilder builder=DocumentBuilderFactory
                            .newInstance()
                            .newDocumentBuilder();
    Document doc=builder.parse(in, null);
     NodeList words=doc.getElementsByTagName("product");

    for (int i=0;i<words.getLength();i++) {
    items.add(((Element)words.item(i)).getAttribute("value"));
    }

    in.close();
    }

    catch (Throwable t) {
     Toast
     .makeText(this, "Exception: "+t.toString(), 2000)
     .show();
    }

    ListView lstView = getListView(); 
 lstView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
 lstView.setTextFilterEnabled(true); 

    setListAdapter(new ArrayAdapter<String>(this,
                              android.R.layout.simple_list_item_1,
                              items));
    }

    public void onListItemClick(ListView parent, View v, int position,
              long id) {
     selection.setText(items.get(position).toString());
    }

        public void onClick(View view) {
            ListView lstView = getListView(); 

            String itemsSelected = "Selected items: \n"; 
            for (int i=0; i<lstView.getCount(); i++) {
                if (lstView.isItemChecked(i)) {
            itemsSelected += lstView.getItemAtPosition(i) + "\n"; 
        }
    }
            Toast.makeText(this, itemsSelected, Toast.LENGTH_LONG).show(); 

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:27:48.013

将项目添加到用户不可见且尚不存在的项目是没有意义的`ListView`。`Activity`您应该有一个存储数据的地方，它可以是 SQLite 数据库、纯文本文件，或者`SharedPreferences`如果没有太多数据。当您单击`Button`当前的内部时`Activity`，您应该将信息存储到数据存储中，然后`ListView`在第二个`Activity`开始时检索它以填充。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:11:25.627

**Activity**是一个**窗口，**您可以在其中放置**UI 内容，以便**用户**可以与应用程序进行交互**。

现在，要在整个应用程序的活动中**使用数据，您必须****使用 Collections 或 Database**。

但根据**您的要求**，我认为您应该使用**Collections**。

*   **根据您的数据**维护一个 Arraylist 或 HashTable 。****

***   **将该数据从一个活动传递到另一个活动。**** 

 **或者

*   **维护一个单例类**并**更新该类中的数据**。**访问来自其他活动的数据。**

我希望这可以帮助你。**

# c++ - 按值传递数组

> ID：15359713
> 
> 赞同：2
> 
> 时间：2013-03-12T11:18:34.837
> 
> 标签：c++

是否可以按值将数组传递给 C++ 函数？

如果是，我会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:27:54.517

如果*数组*是指**原始** *数组*，那么答案是**否定**的。您不能在 C 或 C++ 中按值传递它们。

这两种语言都提供了一种解决方法，您可以在其中包装`struct`该数组并传递其对象。例子：

```
struct MyArray { int a[100]; };
...
struct MyArray obj; // `obj.a[]` is the array of your interest
foo(obj);  // you have passed the `a[]` by value 
```

在 C++ 中，此类结构很容易以`std::vector`和的形式获得`std::array`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T11:20:18.040

确实：

```
void foo(std::array<int, 42> x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:21:09.280

通常将数组传递给函数会使其衰减为`pointer`. 您将数组的（开始）地址隐式传递给函数。所以你实际上不能按值传递数组。`va_args`如果要按值传递内容，为什么不使用？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:24:20.630

是的你可以。你可以通过使用指针作为参数来实现它，但是在函数体中，你可以使用copy mothord（确切的名字我不记得了）来复制它。

# c - C代码，其中我有一个整数变量的值，在预增量操作之后我需要得到输出

> ID：15359716
> 
> 赞同：-6
> 
> 时间：2013-03-12T11:18:44.077
> 
> 标签：c, pre-increment

```
i=2;

i= ++i + ++i + ++i;

printf(i) 
```

请给出解释的输出？
我得到的答案是**12**但应该是**13**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:22:36.490

根据 C 标准，您的代码的行为是*未定义*的，因为您不允许在同一个表达式中多次使用预增量运算符。输出可以是任何东西。

有关该主题的更全面处理，请参阅[此问题](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)的答案。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-12T11:48:56.090

虽然行为未定义，但在 UR 的情况下，它已被执行，考虑到解析是从左开始的，i = 5 + 4 + 3 = 12

为了解释，i = (++i) + (++i) + (++i) 现在 i = 2，所以首先 ++i 扩展为 3 并且 i 变为 i=3 i = (++i) + ( ++i) + 3

现在 i = 3，所以 ++i 扩展为 4 并且 i 变为 i=4 i = (++i) + 4 + 3

现在 i = 4，所以首先 ++i 扩展为 4 并且 i 变为 i=5 i = 5 + 4 + 3

# javascript - 下拉框 selectedIndex 属性

> ID：15359723
> 
> 赞同：1
> 
> 时间：2013-03-12T11:19:10.177
> 
> 标签：javascript, jquery

```
$.fn.fillSelect = function (data) {
    return this.clearSelect().each(function () {
        if (this.tagName == 'SELECT') {
            var dropdownList = this;
            $.each(data, function (index, optionData) {
                var option = new Option(optionData.Text, optionData.Value);
                if ($.browser.msie) {
                    dropdownList.add(option);
                } else {
                    dropdownList.add(option, null);
                }
            });
            // code for access "selectedindex" 
        }
    });
}; 
```

以上是使用 jQuery 动态生成下拉列表的代码片段。

我需要动态设置**selectedIndex**属性值，以便更早地显示保存的值。我将把该代码插入到`// code for access "selectedindex"`上面的代码中。那么如何设置**selectedIndex**属性`dropdownList`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:29:39.210

您应该能够将属性设置为`selectedIndex`与其他属性相同。

假设这`dropdownList`是一个[HTMLSelectElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLSelectElement)，`dropdownList.selectedIndex = 5;`, 应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:30:47.580

我会在这段代码中这样做：

```
$.each(data, function (index, optionData) {
    var option = new Option(optionData.Text, optionData.Value);
    if (/* code to determine if this is the chosen one */) {
        option.setAttribute("selected", "selected");
    }
    if ($.browser.msie) { /* etc */ 
```

您正在相关选项上设置 selected 属性。

# neo4j - 通用 Cypher 性能

> ID：15359732
> 
> 赞同：3
> 
> 时间：2013-03-12T11:19:44.710
> 
> 标签：neo4j, cypher

在参加了一个非常有趣的以 Cypher 为重点的教程之后，我对 Cypher 查询语言的声明性感到惊喜。在我看来，这是从 Neo4J 中检索数据的一种非常自然的方式。

在此之前，我只使用过原生 API。虽然这不是声明性的，但你会在一段时间后习惯它。复杂的结构都非常相似，仅在我的特定项目的细节上有所不同。

尽管如此，Cypher 对我来说看起来更自然，所以我正在考虑构建我的应用程序的第二个版本，主要使用 Cypher 查询来与我的数据库进行交互。但是我遇到了一个问题。

有很多方法可以将我的应用程序转换为 Cypher，在尝试了几个可能的查询后，所有查询都得到了预期的结果，看起来即使是最快的查询仍然比原生 API 慢大约 20 倍。

现在，我不介意为了声明性而放弃一些性能，但是在一个已经在性能上苦苦挣扎的应用程序中，20 倍对我来说有点过分了。是否有解决此问题的方法，还是我只需要坚持使用本机 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:32:11.637

你的结论对我来说听起来很熟悉。当我同时使用 Neo4j 和 Spring Data Neo4j 时，我也遇到了性能问题。在性能真正重要的部分，我切换到核心 Traversal API，它现在比普通的 Cypher 查询快得多。这与没有处理查询的事实以及您控制遍历的各个方面的事实有很大关系。Cypher 只能猜测最优策略是什么。我相信它会在（不久的）将来加快速度，但如果性能真的很重要，我会说坚持使用核心 API。

此外，如果您将使用 java 和 spring data neo4j，请考虑使用比简单映射模式快得多的高级映射模式 (AspectJ)。

# html - 在 Bing 地图多边形中显示标记

> ID：15359733
> 
> 赞同：1
> 
> 时间：2013-03-12T11:19:45.257
> 
> 标签：html, bing, markers, polygons

我正在使用 Bing 地图在地图上显示标记。

现在我添加了一个功能，允许用户围绕他选择的任何标记画一个圆圈，并让他以公里为单位指定圆的半径。

我希望圆圈（多边形）包含该圆圈的纬度/经度范围内的标记，并且圆圈外的标记消失。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T08:09:04.133

您没有提供任何代码。

但是，我参与了一个类似的项目，所以我知道你在说什么。因为您正在寻找自定义多边形，您可以查看此[链接](http://www.bingmapsportal.com/isdk/ajaxv7#Shapes8)。

另一种方法是使用标记的 x,y 坐标并使用 Javascript 在地图周围画一个圆圈。

这个 JAVASCRIPT 应该有帮助

```
function drawCircle(radius, origin) {
    var RadPerDeg = Math.PI / 180;
    var earthRadius = 3959;  
    var lat = origin.latitude * RadPerDeg;
    var lon = origin.longitude * RadPerDeg;
    var locs = new Array();
    var AngDist = parseFloat(radius) / earthRadius;
    for (x = 0; x <= 360; x++) { //making a 360-sided polygon
        var pLatitude, pLongitude;
        // With a nice, flat earth we could just say p2.Longitude = lon * sin(brng) and p2.Latitude = lat * cos(brng)
        // But it ain't, so we can't.  See http://www.movable-type.co.uk/scripts/latlong.html
        brng = x * RadPerDeg;
        pLatitude = Math.asin(Math.sin(lat) * Math.cos(AngDist) + Math.cos(lat) * Math.sin(AngDist) * Math.cos(brng)); //still in radians
        pLongitude = lon + Math.atan2(Math.sin(brng) * Math.sin(AngDist) * Math.cos(lat), Math.cos(AngDist) - Math.sin(lat) * Math.sin(pLatitude));
        pLatitude = pLatitude / RadPerDeg;
        pLongitude = pLongitude / RadPerDeg;
        locs.push(new MM.Location(pLatitude, pLongitude));
    };
    circle = new MM.Polyline(locs, { visible: true, strokeThickness: 2, strokeDashArray: "1", strokeColor: new MM.Color(200, 0, 0, 200, 0) });
    map.entities.push(circle);
}; 
```

# c++ - 遍历在节点中找到一个顶点并返回索引

> ID：15359734
> 
> 赞同：0
> 
> 时间：2013-03-12T11:19:45.397
> 
> 标签：c++, tree, depth-first-search

我正在使用树分解，并试图**在树节点中找到一个顶点**。

如果找到顶点，我想**返回该节点的索引。**我正在尝试以 DFS 方式遍历树。我能够遍历所有节点，但是一旦找到具有顶点的节点，它就不会返回索引。

以下是我尝试过的。有人可以指出我哪里出错了吗？

```
Node* Tree::traversing(Node* node, int v) {

    vector<Node*> s;
    s.push_back(node);  

    while(!s.empty()) {

        Node* nn = s.back();
        s.pop_back();
        int i = nn->point_in_bag(v);
        if(i != -1) { return nn;}

        for(int i=0; i<node->children.size(); i++) {
            Node* n = node->children[i];
            s.push_back(n); 
        }

    }
} 
```

如果找到并且未找到顶点，该函数`point_in_bag`将返回正整数。`-1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:38:12.817

我得到了它！！！您只需要更改代码：

```
for(int i=0; i<node->children.size(); i++) 
```

到：

```
for(int i=0; i< nn->children.size(); i++) 
```

并且也在体内。你知道为什么吗？

# sql - 如果源值不在目标表 sql 中，则插入目标表

> ID：15359739
> 
> 赞同：1
> 
> 时间：2013-03-12T11:19:58.803
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试将数据从一个表插入到另一个表，但我正在寻找一个查询，该查询可以首先查看源值是否存在于目标中，如果存在则不应加载。

假设我在源代码中有以下内容

```
ID|EMAIL|COUNTRY|PHONE
1|s@s.com|US|1212 
```

现在检查目标表中是否存在上述电子邮件，如果没有加载它。

等待您的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:23:23.327

您可以使用`MERGE`声明

```
MERGE table2 AS target
USING table1 AS source
    ON (target.email = source.email)  
WHEN NOT MATCHED BY TARGET 
    THEN INSERT (
        email, 
        country, 
        Phone
    ) VALUES (
        source.email, 
        source.country, 
        source.phone
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:27:52.287

简单加入也可以完成这项工作

```
INSERT INTO <TblDestination>
SELECT src.Email
FROM <TblSource> src
    LEFT JOIN <TblDestination> dst ON src.Email = dst.Email
WHERE dst.Email IS NULL 
```

# android - Android：共享 CSV 文件

> ID：15359743
> 
> 赞同：5
> 
> 时间：2013-03-12T11:20:00.007
> 
> 标签：android, csv, share

我的应用程序可以生成我想要共享的 CSV 文件。我正在使用 MIME type `text/comma_separated_values/csv`，但是当我发送`Intent`选择器时没有显示，我猜我的设备不知道如何处理文件。我应该使用哪种类型？

这是我的代码：

```
 Uri csv = lh.createDailyCSV();

    if(csv == null){
         Toast.makeText(this, getString(R.string.error_creating_csv), Toast.LENGTH_LONG).show();
    }
    else{
        Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
        sharingIntent.setType("text/comma_separated_values/csv");
        sharingIntent.setData(csv); 
        startActivity(Intent.createChooser(sharingIntent, getResources().getText(R.string.send_to)));
    } 
```

我在我的清单中声明：

```
 <intent-filter>
        <action android:name="android.intent.action.SEND" />

        <category android:name="android.intent.category.DEFAULT" />

        <data android:mimeType="text/comma_separated_values/csv" />
    </intent-filter> 
```

我得到了例外

```
03-12 12:19:23.430: E/ActivityThread(24011): Activity com.android.internal.app.ChooserActivity has leaked IntentReceiver com.android.internal.app.ResolverActivity$1@412fc920 that was originally registered here. Are you missing a call to unregisterReceiver()? 
```

我已经阅读了此异常，当Chooser中没有或仅1个选项时就会发生这种异常。

[编辑]

我更改了将数据附加到 Intent 的方式。而不是sharingIntent.setData(csv) 我使用：

```
sharingIntent.putExtra(Intent.EXTRA_STREAM, csv); 
```

现在选择器工作正常，但如果我尝试通过电子邮件发送文件，我会收到错误消息：无法显示文件。

[/编辑]

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T11:32:15.870

正确的 MIME 类型是`text/csv`. 如果这不起作用，您可以使用`text/plain`它将允许用户从*许多*应用程序中进行选择，包括 Evernote 等。

**更新 更新**后，您似乎不想与任意其他应用程序“共享”文件而只通过电子邮件发送？请澄清。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T20:36:25.377

就我而言，以下在 Goo 中有效：

```
intent.setType("text/*"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-06T21:30:05.750

```
<intent-filter>
    <action android:name="android.intent.action.SEND"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="image/*"/>
    <data android:mimeType="text/*"/>
</intent-filter> 
```

# delphi - 如何下载消息，将其存储并在不同的文件夹中重新创建？

> ID：15359744
> 
> 赞同：2
> 
> 时间：2013-03-12T11:20:00.247
> 
> 标签：delphi, imap, indy

我正在使用 Delphi 2006、Indy 10（版本 4957）、IMAP4。

我想下载一封电子邮件，存储它，几周后我想在不同的文件夹中重新创建它。（这是一种存档和恢复，所以在文件夹之间简单移动不起作用，因为我会删除原始邮件。）我下载邮件，存储它，然后用`AppendMsg`.

它一直有效，直到我检查目标 Temp2 文件夹，其中大部分消息都包含

> 这是一条 MIME 格式的多部分消息

```
unit Mail_Test;

interface

uses
  Windows,
  Messages,
  SysUtils,
  Variants,
  Classes,
  Graphics,
  Controls,
  Forms,
  Dialogs,
  StdCtrls;

type
  TForm1 = class( TForm )
    memLog: TMemo;
    btn1: TButton;
    procedure btn1Click( Sender: TObject );
  private
    procedure Log( LogMsg: string );
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
  IdIMAP4,
  IdMessage,
  IdExplicitTLSClientServerBase,
  IdSSLOpenSSL;

{$R *.dfm}

procedure TForm1.btn1Click( Sender: TObject );
var
  IMAPClient: TIdIMAP4;
  UsersFolders: TStringList;
  OpenSSLHandler: TIdSSLIOHandlerSocketOpenSSL;
  res: Boolean;
  i: integer;
  inbox, currUID: string;
  cntMsg: integer;
  msg, msg2: TIdMessage;
  BodyTexts: TStringList;
  flags: TIdMessageFlagsSet;
  fileName_MailSource, TmpFolder: string;
begin

  IMAPClient := TIdIMAP4.Create( nil );
  try
    OpenSSLHandler := TIdSSLIOHandlerSocketOpenSSL.Create( nil );
    try
      IMAPClient.Host := 'imap.gmail.com';
      IMAPClient.Port := 993;
      IMAPClient.Username := '....@gmail.com';
      IMAPClient.Password := '....';

      if Pos( 'gmail.com', IMAPClient.Host ) > 0 then begin
        OpenSSLHandler.SSLOptions.Method := sslvSSLv3;
        IMAPClient.IOHandler := OpenSSLHandler;
        IMAPClient.UseTLS := utUseImplicitTLS;
      end;

      try
        res := IMAPClient.Connect;
        if not res then begin
          Log( '  Unsuccessful connection.' );
          exit;
        end;

      except
        on e: Exception do begin
          Log( '   Unsuccessful connection.' );
          Log( '  (' + Trim( e.Message ) + ')' );
          exit;
        end;
      end;

      try
        UsersFolders := TStringList.Create;
        try
          res := IMAPClient.ListMailBoxes( UsersFolders );
          if not res then begin
            Log( '  ListMailBoxes error.' );
            exit
          end;
        except
          on e: Exception do begin
            Log( '  ListMailBoxes error.' );
            Log( '  (' + Trim( e.Message ) + ')' );
            exit;
          end;

        end;

        Log( 'User folders: ' + IntToStr( UsersFolders.Count ) );
        for i := 0 to UsersFolders.Count - 1 do begin
          Log( '  [' + inttostr( i + 1 ) + '/' + inttostr( UsersFolders.Count ) + '] Folder: "' + UsersFolders[ i ] + '"' );
        end;

        IMAPClient.RetrieveOnSelect := rsDisabled;
        inbox := 'INBOX';
        Log( 'Opening folder "' + inbox + '"...' );
        res := IMAPClient.SelectMailBox( inbox );
        cntMsg := IMAPClient.MailBox.TotalMsgs;
        Log( 'E-mails to read: ' + IntToStr( cntMsg ) );

    //    res := IMAPClient.RetrieveAllEnvelopes( AMsgList );

        msg := TIdMessage.Create( nil );
        msg2 := TIdMessage.Create( nil );
        BodyTexts := TStringList.Create;
        TmpFolder := 'c:\';
        res := IMAPClient.CreateMailBox( 'Temp2' )
        try

          for I := 0 to cntMsg - 1 do begin

            Log( '  [' + inttostr( i + 1 ) + '/' + inttostr( cntMsg ) + '] E-mail...' );

            IMAPClient.GetUID( i + 1, currUID );

            Log( '(Downloading message...)' );
            IMAPClient.UIDRetrieve( currUID, msg );

            fileName_MailSource := TmpFolder + 'Log_Mail_' + currUID + '.eml';
            msg.SaveToFile( fileName_MailSource, false );

            // In the final version I will delete the original message 
            // so I have to recreate it from the archived file

            msg2.LoadFromFile( fileName_MailSource );

            res := IMAPClient.AppendMsg( 'Temp2', msg2, msg2.Headers, [] );
          end;
        finally
          FreeAndNil( msg );
          FreeAndNil( msg2 );
          FreeAndNil( BodyTexts )
        end;

      finally
        IMAPClient.Disconnect;
      end;
    finally
      OpenSSLHandler.Free;
    end;
  finally
    IMAPClient.Free;
  end;
end;

procedure TForm1.Log( LogMsg: string );
begin
  memLog.Lines.Add( LogMsg );
  Application.ProcessMessages;
end;

end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T21:17:24.950

您正在调用`AppendMsg()`允许您指定替代电子邮件标题的版本。在我能想到的几乎所有情况下，您永远都不想这样做（我什至不知道为什么 TIdIMAP4 会公开该功能）。

原因是因为将电子邮件`AppendMsg()`保存`TIdMessage`到内部`TStream`，然后将电子邮件正文从内部发送`TStream`到服务器。如果您指定备用标题，它们将按原样发送，并且与用于创建电子邮件正文的标题数据不匹配。最重要的是，用于分隔电子邮件正文中的 MIME 部分的 MIME 边界与实际发送到服务器的标头中指定的边界不匹配，这将解释您所看到的症状。该边界值是在编码时随机生成的，因此在调用之前`TIdMessage`它在属性中不可用。`TIdMessage.Headers``AppendMsg()`

因此，话虽如此，我强烈建议您更改代码以将`AAlternativeHeaders`参数设置为 nil（或使用根本没有参数`AppendMsg()`的重载版本），以便发送编码时自身生成的实际标头上传前：`AppendMsg()``AAlternativeHeaders``AppendMsg()``TIdMessage`

```
res := IMAPClient.AppendMsg( 'Temp2', msg2, nil, [] ); 
```

或者：

```
res := IMAPClient.AppendMsg( 'Temp2', msg2, [] ); 
```

# java - 发现第一个错误后停止编译的 javac 命令行选项

> ID：15359747
> 
> 赞同：4
> 
> 时间：2013-03-12T11:20:06.803
> 
> 标签：java, command-line-arguments, javac

有时你只是在代码中做了一些错字，但编译器会输出几十个错误，（实际上它只是在第一个错字之后编译失败）。因此，有时将编译器输出限制为检测到的第一个错误会非常方便。**GCC/Clang**会接受`-Wfatal-errors`，可以`javac`这样做吗？我正在为 Windows 使用 JDK7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:23:29.793

看到这个答案：[https ://stackoverflow.com/a/3115546/500478](https://stackoverflow.com/a/3115546/500478)

您可以使用`-Xmaxerrs`和设置放弃`-Xmaxwarns`前的最大错误/警告数。`javac`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T02:04:05.227

每当 javac 产生错误时，它会在“不久之后”停止，不管有没有 -Xmaxerrs。

-Xmaxerrs 和 -Xmaxwarns 只是限制生成的消息数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:26:09.710

这对我有用：

```
javac -Xmaxerrs 1 Test.java 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T11:23:54.533

`javac`有`-Xmaxerrors`选项，在手册页中描述为

```
-Xmaxerrors number
   Set the maximum number of errors to print. 
```

但我不知道`-Xmaxerrors 1`在遇到第一个错误后是否真的会导致它放弃，或者它是否继续，但最后实际上只*打印*一个错误。

# c# - 使用 MVC4 + Entity Framework 4 更新模型

> ID：15359750
> 
> 赞同：4
> 
> 时间：2013-03-12T11:20:20.227
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4, visual-studio-2012

我正在尝试学习 MVC 和 EF 以摆脱 WebForms 和 ADO.NET。我只是在整理我的第一个试用站点，所以看看它是如何运行的，遇到了一个绊脚石。

我正在页面上编辑记录并按保存。我没有返回任何错误，但是数据没有更新。

正在更新的文章模型

```
 public class Article
{
    [Key]
    public int Id { get; set; }

    public string Author { get; set; }
    public string Title { get; set; }
    public DateTime DateCreated { get; set; }
    public string Body { get; set; }
    public int Likes { get; set; }
    public int Dislikes { get; set; }
    public List<Comment> Comments { get; set; }
    public string Tags { get; set; }
    public int Category { get; set; }
} 
```

Controller 上的编辑代码，articleId 来自查询字符串。

```
 [HttpPost]
    public ActionResult Edit(int articleId, FormCollection collection)
    {
        var result = from i in db.Articles
                     where i.Id == articleId
                     select i;

        if (TryUpdateModel(result))
        {
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(result.First());

    } 
```

调试时，TryUpdateModel() 返回 true 并调用 db.SaveChanges。不返回任何错误。当被引导回控制器上的 Index 方法时，文章显示没有变化。

是不是很明显？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:06:17.320

我忘了从可枚举中选择模型。添加 .First() 以选择修复它的记录。只是我无法从树上看到木头的那些场合之一！

```
 [HttpPost]
    public ActionResult Edit(int articleId, FormCollection collection)
    {
        var result = from i in db.Articles
                     where i.Id == articleId
                     select i;

        if (TryUpdateModel(result.First()))
        {

            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(result.First());

    } 
```

# c++ - C++ 与 gcc 和 Visual Studio 不同的编译错误，“在此上下文中”

> ID：15359756
> 
> 赞同：0
> 
> 时间：2013-03-12T11:20:37.023
> 
> 标签：c++, visual-studio-2010, gcc, compiler-errors

我之前发布了一个类似的问题，但我在代码中有一个小错误，所以它被忽略了，让我再问一次。

在 Gcc 中，我得到了确切的编译错误行在 VS2010/2012 中，我不知道编译错误在哪里，有人可以帮忙吗？** 在 VS 中，我应该如何知道调用它的是哪一行？

我有以下代码：

```
#include "ObjectHolder.h"

int main()
{
    ObjectHolder first(1);
    ObjectHolder second(first);
    return 0;
}
#ifndef NonCopyableObject_Included
#define NonCopyableObject_Included

class NonCopyableObject 
{
    public:
        virtual ~NonCopyableObject () {}

        NonCopyableObject(int i) { m_index = i;}
        int m_index;
        private:
        NonCopyableObject(const NonCopyableObject& other) {}
};
#endif

#ifndef ObjectHolder_Included
#define ObjectHolder_Included
#include "NonCopyableObject.h"

class ObjectHolder 
{
    public:
        virtual ~ObjectHolder ();
        ObjectHolder(int i) : obj(i) {}

        NonCopyableObject obj;
};
#endif 
```

VS错误：

```
1>d:\users\user\documents\visual studio 2012\projects\tester\tester\objectholder.h(13): 

     error C2248: 'NonCopyableObject::NonCopyableObject' : cannot access private member declared in   class 'NonCopyableObject'
               d:\users\user\documents\visual studio 2012\projects\tester\tester  
     \noncopyableobject.h(13) : see declaration of 'NonCopyableObject::NonCopyableObject'
            d:\users\user\documents\visual studio 2012\projects\tester\tester
     \noncopyableobject.h(6) : see declaration of 'NonCopyableObject'
            This diagnostic occurred in the compiler generated function    
     'ObjectHolder::ObjectHolder(const ObjectHolder &)' 
```

海合会：

```
$ g++ -Wall -Werror --std=c++0x main.cpp -o test_no_copy
In file included from main.cpp:2:0:

     NonCopyableObject.h: In copy constructor `ObjectHolder::ObjectHolder(const ObjectHolder&)':
     NonCopyableObject.h:13:3: error: `NonCopyableObject::NonCopyableObject(const NonCopyableObject&)' is private
     ObjectHolder.h:7:1: error: within this context
     main.cpp: In function `int main()':
     main.cpp:8:27: note: synthesized method `ObjectHolder::ObjectHolder(const ObjectHolder&)' first required here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:22:48.810

The compiler cannot generate (synthesize) a copy-constructor in `ObjectHolder` because it contains an object of class `NonCopyableObject` which has a private copy-contructor.

By default the generated copy-constructor is invoking the copy-constructor of all member- and parent objects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:32:27.227

使用不同的编译器进行编译是一个好主意，因为它们之间的错误可能会有很大差异，其中一个可能比另一个更有帮助。在大多数情况下，我发现[Clang](http://clang.llvm.org/)的错误报告是最好的。在您的示例中：

> ```
> source.cpp:9:48: error: unused parameter 'other' [-Werror,-Wunused-parameter]
>     NonCopyableObject(const NonCopyableObject& other) {}
>                                                ^
> source.cpp:25:18: error: call to implicitly-deleted copy constructor of 'ObjectHolder'
>     ObjectHolder second(first);
>                  ^      ~~~~~
> source.cpp:18:23: note: copy constructor of 'ObjectHolder' is implicitly deleted because field 'obj' has an inaccessible copy constructor
>     NonCopyableObject obj; 
> ```

[在这里看到它](http://liveworkspace.org/code/2ns87O%241)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:22:26.683

您正在尝试复制`ObjectHoder`

```
ObjectHolder second(first); 
```

但是它包含一个不可复制的对象，所以它不能被复制。您正在尝试执行您的代码在编译时不允许执行的操作。两个编译器都在告诉你这一点。

# c# - 它是 MSDN 文章中关于 PLINQ 查询中订购的 10 个第一个项目的错字还是..？

> ID：15359758
> 
> 赞同：0
> 
> 时间：2013-03-12T11:20:38.527
> 
> 标签：c#, .net, concurrency, task-parallel-library, plinq

MSDN 文章“ [PLINQ 中的订单保留](http://msdn.microsoft.com/en-us/library/dd460677%28v=vs.100%29.aspx)”指出：

> 以下示例通过对源序列使用 AsOrdered 运算符来覆盖默认行为。这样可以确保 Take 方法返回源序列中满足条件的前 10 个城市
> 
> ```
> var orderedCities = (from city in cities.AsParallel().AsOrdered()
>                      where city.Population > 10000
>                      select city)
>                        .Take(1000); 
> ```

是否可以返回多于（或少于）10 个在 PLINQ 查询中排序的第一个项目以及如何返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:39:28.640

`Take(1000)`将尝试返回`cities`满足中定义的条件的前 1000 个元素`where city.Population > 10000`。

当没有足够的元素满足您的要求（或者您的集合中没有足够的元素开始时）时，您可能会收到*少于1000 个元素。*
但是，除非您特别要求更多元素，否则您将无法获得超过 1000 个元素，例如`Take(1001)`，它将尝试返回 1001 个元素。

有关更多信息`Take`，请访问[MSDN](http://msdn.microsoft.com/en-us/library/bb503062.aspx)

# android - ActionBar Sherlock、Fragment 和 SearchWidget

> ID：15359759
> 
> 赞同：0
> 
> 时间：2013-03-12T11:20:38.473
> 
> 标签：android, actionbarsherlock, options-menu, searchview, oncreateoptionsmenu

正如标题所说，我在某些片段中实现搜索小部件时遇到问题。我的问题是，当我使用 inflater 为 onCreateOptionsMenu 中的自定义视图充气时，我发现 SearchView 它始终为空！
如果有人有相同或类似的问题，我将不胜感激！:)
在过去的两天里，我一直在努力解决这个问题……这是布局：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/menu_search"
        android:title="Search"
        android:icon="@drawable/abs__ic_search"
        android:showAsAction="always|collapseActionView"
        android:orderInCategory="0"
        android:actionViewClass="com.actionbarsherlock.widget.SearchView"/>

    <item android:id="@+id/menu_settings"
        android:title="Settings"
        android:icon="@drawable/jk_uma_button_settings_normal"
        android:showAsAction="always"
        android:orderInCategory="1"
         />
</menu> 
```

代码

```
Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_explore, menu);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {

        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if(hasFocus){
                Log.i(TAG, "======================FOCUS TRUE============");
            }else{
                Log.i(TAG, "======================FOCUS FALSE===========");
            }
        }

    });
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i(TAG, "onCreate");
    api_key = Configuration.get_prefereence_string(getActivity(), "user_activation_key", null);
    user_id = Configuration.get_prefereence_string(getActivity(), "user_id", null);
    setHasOptionsMenu(true);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:47:23.500

据我所知，onCreateOptionsMenu 是在 onCreate 期间调用的，但是您在方法结束时启用了选项菜单功能。尝试在 Fragment 的构造函数中设置 setHasOptionsMenu(true)。

```
public YourFragment() {
    this.setHasOptionsMenu(true);
} 
```

要从 Activity 中捕获硬件搜索按钮按下

```
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_SEARCH) {
        this.onSearchClicked();
        return true;
    }
    return false;
} 
```

# django - Django 1.5 - 使用新的 StreamingHttpResponse

> ID：15359768
> 
> 赞同：7
> 
> 时间：2013-03-12T11:21:17.823
> 
> 标签：django, django-views

如果我`StreamingHttpResponse` [按照此处所示](https://stackoverflow.com/questions/2922874/how-to-stream-an-httpresponse-with-django#13429719)的方式实现，则在 10 秒结束之前不会显示“流式传输”响应。关于[djangoproject](https://docs.djangoproject.com/en/1.5/ref/request-response/#streaminghttpresponse-objects)的信息不多，只是说它对于生成大型 CSV 文件很有用，同时警告说应该在请求-响应周期之外执行昂贵的任务。

但是，我看不到它使用时间密集型代码完全可以工作。生成器对象有什么东西可以防止这种情况发生吗？这是复制的代码以供参考。

```
import time
from django.http import StreamingHttpResponse

def stream_response(request):
    resp = StreamingHttpResponse(stream_response_generator())
    return resp

def stream_response_generator():
    for x in range(1,11):
        yield '{} <br />\n'.format(x)
        time.sleep(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-20T13:37:51.720

[OP的解决方案转换为下面的答案]

Pavel 的评论指出，我的示例的问题在于浏览器的缓冲，这是通过修改发送的数据量来解决的，例如

```
yield '{} <br /> {}'.format(x, ' '*1024) 
```

# iphone - UINavigationController 必须在 3.5 英寸屏幕上将视图高度设置为 548

> ID：15359769
> 
> 赞同：0
> 
> 时间：2013-03-12T11:21:18.193
> 
> 标签：iphone, objective-c, ios6

我认为这里有一个特殊情况，因为我有一个 IB 视图设置为 4 英寸大小的 UIViewController 并添加了一个带有 addChildViewController 的 UINavigationController（Facebook/Path 类似滑块菜单）。我现在面临的问题是，如果我运行应用程序，设置时 UINavigationController 视图的高度为 372

```
containerViewController.view.frame = CGRectMake(0, 0, 320, 460); 
```

我必须将高度设置为 548，才能在 3.5 英寸设备上获得 460 的正确高度。我该如何解决？

![模拟器截图](../Images/118aacced127208e58db7ca30d82b59f.png)

我还在 UIBarButtonItem 上注册了一个事件以滑开屏幕

```
[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
            self.navigationController.view.frame = CGRectMake(268, 0, 320, 460);
        } completion:^(BOOL finished){ }]; 
```

单击按钮时，UIView 设置为正确的高度，但我使用的`(268, 0, 320, 460)`CGRectMake 大小完全相同。

当我设置框架后

```
[self.window makeKeyAndVisible]; 
```

它通过使用 460 作为高度来工作，为什么这样工作，我认为 iOS 只是在执行显示尺寸调整之后`makeKeyAndVisible`

# mysql - 在 sql 过程中运行两条语句

> ID：15359775
> 
> 赞同：1
> 
> 时间：2013-03-12T11:21:36.457
> 
> 标签：mysql, sql

前两个小时之前，我对程序一无所知。到目前为止，我只学习了一个查询过程。但是，如果我需要在一个过程中运行多个查询假设有两个查询，那么我该怎么做呢？假设我想在我的地区表中插入一个地区，然后想从该表中选择所有地区名称，包括我现在插入的最后一个地区。那我应该怎么写我的程序呢？这是我在下面给出的选择和插入查询。请记住，我正在使用 sqlyog。我的查询如下：

选择查询>>>

```
SELECT * FROM district; 
```

插入查询>>>

```
INSERT INTO district(district_name) VALUES('District'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:27:46.797

您可以在正文中编写一个语句，在这种情况下，程序可以是这样的（没有 BEGIN...END 子句） -

```
CREATE PROCEDURE procedure1()
INSERT INTO table1 VALUES(NULL); 
```

对于某些语句，您需要使用 BEGIN...END 子句 -

```
DELIMITER ||
CREATE PROCEDURE procedure1()
BEGIN
  INSERT INTO table1 VALUES(NULL);
  INSERT INTO table1 VALUES(NULL);
  INSERT INTO table1 VALUES(NULL);
END|| 
```

这是一篇关于分隔符的文章 - [MySQL 中的 DELIMITER 是什么以及它的用途](http://buysql.com/mysql/42-delimiter-mysql.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:27:44.243

您可以在一个存储过程中一个接一个地运行多个 SQL 语句。您可以创建这样的过程。

```
CREATE PROCEDURE MyProcedure()
    BEGIN
        INSERT INTO district(district_name) VALUES('District');
        SELECT * FROM district;
    END; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:28:00.370

在 mysql 中，您可以简单地将多个语句放入 proc 中，用 ; 分隔。

像这样的东西应该工作：

```
delimiter //
CREATE PROCEDURE myProc  ( )
BEGIN
    INSERT INTO district(district_name) VALUES('District');
    SELECT * FROM district;
END// 
```

# html - 浮动留下一对物品

> ID：15359783
> 
> 赞同：2
> 
> 时间：2013-03-12T11:21:58.000
> 
> 标签：html, css, css-float

我有一个无法更改的给定 html：

```
<ul>
    <li class="item1">2 lines text</li>
    <li class="item2">3 lines text</li>
    <li class="item3">1 line text</li>
    <li class="item4">4 lines text </li>
    <li class="item5">4 lines text </li>
    <li class="item6">2 lines text</li>
</ul> 
```

现在我需要它们看起来像这样：

```
 | Item 1  | Item 3 | Item 5 |
 | Item 1  | Item 4 | Item 5 |
 | Item 2  | Item 4 | Item 5 |
 | Item 2  | Item 4 | Item 5 |
 | Item 2  | Item 4 | Item 6 |
                    | Item 6 | 
```

如果我只是将它们全部向左浮动，它就像一张桌子，第二行将垂直定位以匹配第一行最长列的高度。我希望这些项目与我拥有的 HTML 之间的垂直距离仅为 20 像素。

到目前为止，我尝试的是浮动：左；奇数和清晰：左；偶数，但我得到的只是一列一个接一个。

编辑：我需要支持 IE8+

我不想只更改项目的顺序，我想避免浮动的样子，我将使用虚拟文本编辑问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:28:31.287

看到[这个小提琴](http://jsfiddle.net/yW7wA/)。

您可以通过使用`column-count`属性来做到这一点。

## HTML

```
<ul>
    <li class="item1">Item 1</li>
    <li class="item2">Item 2</li>
    <li class="item3">Item 3</li>
    <li class="item4">Item 4</li>
    <li class="item5">Item 5</li>
    <li class="item6">Item 6</li>
</ul> 
```

## CSS

```
ul {

    margin:0;padding:0;
    -webkit-column-count: 3;
    -moz-column-count: 3;
    column-count: 3;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:33:47.173

可以的，加几条看下面的链接`div` [http://jsfiddle.net/kUd8Y"/](http://jsfiddle.net/kUd8Y)

# google-app-engine - 在 Google Appengine 上使用 Spring Data JPA

> ID：15359784
> 
> 赞同：4
> 
> 时间：2013-03-12T11:22:02.780
> 
> 标签：google-app-engine, spring-data, spring-data-jpa

我正在尝试在 GAE 上使用 Spring 3.2 和 Spring Data，但在正确配置时遇到了一些麻烦。它很小，但从 Spring Data 文档看来，您不需要的不仅仅是 entitymanagerfactory bean。

这是我的配置和我在启动时遇到的异常。有人可以为我收到的 Datanucleus JPA 2.0 异常提供解决方案吗？

**pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <packaging>war</packaging>
    <version>1.0.0-SNAPSHOT</version>

    <groupId>com.foo</groupId>
    <artifactId>bar</artifactId>

    <properties>
        <appengine.version>1.7.5</appengine.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>

        <slf4j.version>1.7.2</slf4j.version>
        <datanucleus.version>3.0.6</datanucleus.version>
        <spring.version>3.2.1.RELEASE</spring.version>
        <spring-data.version>1.3.0.RELEASE</spring-data.version>
    </properties>

    <dependencies>
        <!-- Compile/runtime dependencies -->
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-1.0-sdk</artifactId>
            <version>${appengine.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>${spring-data.version}</version>
        </dependency>

        <!-- Logging dependencies -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-jdk14</artifactId>
            <version>${slf4j.version}</version>
        </dependency>

        <!-- JPA 2.0 for GAE -->
        <dependency>
            <groupId>com.google.appengine.orm</groupId>
            <artifactId>datanucleus-appengine</artifactId>
            <version>2.0.0</version>
        </dependency>
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-api-jpa</artifactId>
            <version>${datanucleus.version}</version>
        </dependency>
        <dependency>
            <groupId>org.datanucleus</groupId>
            <artifactId>datanucleus-core</artifactId>
            <version>${datanucleus.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.geronimo.specs</groupId>
            <artifactId>geronimo-jpa_2.0_spec</artifactId>
            <version>1.0</version>
        </dependency>

        <!-- Test Dependencies -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.9.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-testing</artifactId>
            <version>${appengine.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-stubs</artifactId>
            <version>${appengine.version}</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <version>2.5.1</version>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <archiveClasses>true</archiveClasses>
                    <webResources>
                        <!-- in order to interpolate version from pom into appengine-web.xml -->
                        <resource>
                            <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                            <filtering>true</filtering>
                            <targetPath>WEB-INF</targetPath>
                        </resource>
                    </webResources>
                </configuration>
            </plugin>

            <plugin>
                <groupId>com.google.appengine</groupId>
                <artifactId>appengine-maven-plugin</artifactId>
                <version>${appengine.version}</version>
            </plugin>
        </plugins>
    </build>

</project> 
```

**JPA 配置**

```
@Configuration
@EnableJpaRepositories("com.foo.bar.domain")
@EnableTransactionManagement
class JpaApplicationConfig {
    private static final Logger logger = Logger
            .getLogger(JpaApplicationConfig.class.getName());

    @Bean
    public EntityManagerFactory entityManagerFactory() {
        logger.info("Loading Entity Manager...");
        return Persistence
                .createEntityManagerFactory("eventual-reads-short-deadlines");
    }

    @Bean
    public PlatformTransactionManager transactionManager() {
        logger.info("Loading Transaction Manager...");
        final JpaTransactionManager txManager = new JpaTransactionManager();
        txManager.setEntityManagerFactory(entityManagerFactory());
        return txManager;
    }
} 
```

**例外**

```
[INFO] SEVERE: Context initialization failed
[INFO] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
[INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
[INFO]  at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
[INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
[INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
[INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
[INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
[INFO]  at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
[INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
[INFO] Caused by: java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1506)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.access$000(AbstractAutowireCapableBeanFactory.java:116)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$5.run(AbstractAutowireCapableBeanFactory.java:1468)
[INFO]  at java.security.AccessController.doPrivileged(Native Method)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1466)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
[INFO]  ... 30 more
[INFO] 
[INFO] Mar 12, 2013 11:10:49 AM com.google.apphosting.utils.jetty.JettyLogger warn
[INFO] WARNING: Failed startup of context com.google.appengine.tools.development.DevAppEngineWebAppContext@2912ee3c{/,/home/tim/workspace-me/Dating/target/dating-1.0.0-SNAPSHOT}
[INFO] org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
[INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
[INFO]  at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
[INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
[INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
[INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
[INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
[INFO]  at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
[INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
[INFO] Caused by: java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1506)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.access$000(AbstractAutowireCapableBeanFactory.java:116)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$5.run(AbstractAutowireCapableBeanFactory.java:1468)
[INFO]  at java.security.AccessController.doPrivileged(Native Method)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1466)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
[INFO]  ... 30 more
[INFO] 
[INFO] Mar 12, 2013 11:10:49 AM com.google.apphosting.utils.jetty.JettyLogger warn
[INFO] WARNING: Nested in org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0': Initialization of bean failed; nested exception is java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.:
[INFO] java.lang.IllegalStateException: No persistence exception translators found in bean factory. Cannot perform exception translation.
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:142)
[INFO]  at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.<init>(PersistenceExceptionTranslationInterceptor.java:79)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationAdvisor.<init>(PersistenceExceptionTranslationAdvisor.java:70)
[INFO]  at org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor.setBeanFactory(PersistenceExceptionTranslationPostProcessor.java:103)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeAwareMethods(AbstractAutowireCapableBeanFactory.java:1506)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.access$000(AbstractAutowireCapableBeanFactory.java:116)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$5.run(AbstractAutowireCapableBeanFactory.java:1468)
[INFO]  at java.security.AccessController.doPrivileged(Native Method)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1466)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
[INFO]  at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
[INFO]  at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
[INFO]  at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
[INFO]  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
[INFO]  at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
[INFO]  at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
[INFO]  at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
[INFO]  at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
[INFO]  at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
[INFO]  at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
[INFO]  at org.mortbay.jetty.Server.doStart(Server.java:224)
[INFO]  at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
[INFO]  at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
[INFO]  at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
[INFO]  at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
[INFO]  at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
[INFO]  at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
[INFO]  at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245)
[INFO] 
[INFO] Mar 12, 2013 11:10:49 AM com.google.apphosting.utils.jetty.JettyLogger debug 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:12:15.113

我找到了一个解决方案，但在我看来这不是最有利的。我添加到我的配置中：

```
@Bean
    public PersistenceExceptionTranslator persistenceExceptionTranslator() {
        return new OpenJpaDialect();
    } 
```

我还没有开始测试这是否有效，但它会阻止抛出异常。我更喜欢使用 Datanucleus 特定的翻译器，但我不知道是否存在。欢迎提供其他解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:50:09.993

在独立环境中，我们建议使用 Spring 支持类来设置`EntityManagerFactory`. 因此，如果您将配置更改为以下内容，则不需要额外的 bean 声明：

```
 @Bean
 public AbstractEntityManagerFactoryBean entityManagerFactory() {

   LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
   factory.setPersistenceUnitName("eventual-reads-short-deadlines");
   return factory;
 }

 @Bean
 public PlatformTransactionManager transactionManager() {

    JpaTransactionManager txManager = new JpaTransactionManager();
    txManager.setEntityManagerFactory(entityManagerFactory().getObject());
    return txManager;
} 
```

关键部分是在实现时将`FactoryBean`实现作为 Spring bean 提供`PersistenceExceptionTranslator`。

# asp.net - 谷歌地图中使用asp.net的地区边界？

> ID：15359789
> 
> 赞同：1
> 
> 时间：2013-03-12T11:22:12.133
> 
> 标签：asp.net, google-maps

地图中是否有任何地区边界代码。我正在使用 asp.net 页面，你能帮帮我吗，我做了小地图应用程序，代码是

```
 <script type="text/javascript"    
     src="http://maps.googleapis.com/maps/api  /js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">      
    </script>
 <script type="text/javascript">

var myCenter=new google.maps.LatLng(51.508742,-0.120850);

function initialize()
 {
  var mapProp = {
 center: myCenter,
  zoom:5,
 mapTypeId: google.maps.MapTypeId.ROADMAP
};

 var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

 var marker = new google.maps.Marker({
  position: myCenter,
  title:'Click to zoom'
   });

   marker.setMap(map);

  // Zoom to 9 when clicking on marker
   google.maps.event.addListener(marker,'click',function() {
    map.setZoom(9);
     map.setCenter(marker.getPosition());
     });
     }
     google.maps.event.addDomListener(window, 'load', initialize);
   </script>

   <div id="googleMap" style="width:500px;height:380px;"></div> 
```

但是我想要像这样的地区边界/州边界的代码，你能帮我吗？

# jquery - success callback handler not called in jquery

> ID：15359801
> 
> 赞同：1
> 
> 时间：2013-03-12T11:22:54.903
> 
> 标签：jquery, padrino

I am working on a `Padrino app` running on my `local server(localhost:3000)`. I am exposing a get call /location which is returning a json response. I am hitting this API from the javascript code written separately. Here is what i am writing:

```
$.get("http://localhost:3000/location", function(data) {    
    alert("Inside callback" + data); 
}); 
```

(PS : using `jquery 1.9.1`, tried getJSON also) The http end point is getting hit and returning sucess code 200 with json response but the success call back handler is not being called in the javascript. Why is that happening? Any way to do so?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:26:12.993

You are missing an ) at the end, like:

```
$.get("http://localhost:3000/location", function(data) {    
alert("Inside callback" + data); 
}); 
```

For JSON you might want to consider using getJSON instead, and catch the error if something went wrong.

You can also use the low-level ajax call and check if there was an error:

```
$.ajax({
    url: 'http://localhost:3000/location',
    type: 'GET',
    success: function(data){ 
        alert('success');
    },
    error: function(request,error) {
        alert(request.responseText); 
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:28:04.697

试试看：

```
$(document).ready(function(){
    $.get("http://localhost:3000/location", function(data) {    
        alert("Inside callback" + data); 
    });// here you are missed closed parenthesis ')'
}); 
```

# c# - C++ CLI 中的 C# 动态关键字等效项是什么？

> ID：15359802
> 
> 赞同：6
> 
> 时间：2013-03-12T11:22:59.840
> 
> 标签：c#, .net, visual-c++, c++-cli

有两个项目，一个是 C++ CLI，另一个是 C#。
C# 项目引用了 C++ CLI 项目。

在 C# 中，我想这样做：

```
//method signature is somemethod(dynamic data);
somemethod("haaaii"); 
```

现在 C++ CLI 项目中的方法必须处理这个问题。

如何在 C++ CLI 中声明此方法？
另外如何检测 C++ CLI 中的数据类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T06:24:39.997

要获得 C# 视为的方法签名`dynamic`：

```
void TestMethod( [System::Runtime::CompilerServices::DynamicAttribute] System::Object^ arg )
{
} 
```

但是如果你只想接受所有类型，你可以简单地使用`System::Object^`. 该属性具有误导性，因为它暗示了您将很难提供的语义。

要发现实际的数据类型，请使用`arg->GetType()`. 然后，您可以使用反射和/或 DLR 的所有功能在运行时发现和调用成员。

稍微有用的是在返回类型上使用属性，因为这样 C# 将在使用关键字`dynamic`时推断语义。`var`

```
[returnvalue: System::Runtime::CompilerServices::DynamicAttribute]
System::Object^ TestReturn( void )
{
    return 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:24:56.817

您可能必须通过`System::Dynamic::DynamicObject`类型获得动态

`void somemethod(ref System::Dynamic::DynamicObject data) { }`

# android - 如何对android SQLite数据库中的文本数据进行算术运算

> ID：15359804
> 
> 赞同：0
> 
> 时间：2013-03-12T11:23:03.417
> 
> 标签：android, database, sqlite, android-widget

我正在开发一个已经为 sqlite 提供数据库的 android 应用程序。

在此数据库中，有一个表，其中包含格式为“DD.MM.YYYY”的“startDate”和“endDate”字段，其数据类型为“TEXT”。

我使用 datapicker 获取用户的 DOB 并将其转换为“DD.MM.YYYY”格式。

现在我想在上表上触发选择查询以获取 dob 位于“startDate”和“endDate”之间的所有行

我的问题是如何对文本数据类型执行算术运算，我无法修改我的数据库。

我尝试了以下查询，但没有成功：

```
SELECT * FROM TABLE_NAME WHERE startData >= dob AND endDate <= dob; 
```

请指导我。我进行了很多搜索，但无法成功。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:25:10.863

您可以使用 BETWEEN 进行日期范围检查。

```
//Note that the date format is "YYYY-MM-DD"
SELECT * FROM test WHERE date BETWEEN startDate AND endDate; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:34:01.677

在您的 sqlite 查询中编写以下函数...

```
String[] getWeekCount(String start, String end)
{

    int i=0;
    String[] text=null;
    String selectQuery ="select * from tablename where date_col BETWEEN date ('" + start + "') and date('" + end + "')";
    SQLiteDatabase db = this.getReadableDatabase();

    try
    {
        Cursor cursor = db.rawQuery(selectQuery, null);
        if (cursor.moveToFirst()) 
        {  
            do 
            {
                 text[i]=cursor.getString(0).toString();
                             i++;
            }while (cursor.moveToNext());
        }
        else
            return 0;
        db.close();

    }
    catch (Exception e) 
    {
        System.out.println("Exception throw in SQLiteDBHandler"+e);
    }
    return text;
} 
```

# xcode - iphone - How to identify a device via bluetooth

> ID：15359806
> 
> 赞同：1
> 
> 时间：2013-03-12T11:23:15.697
> 
> 标签：xcode, bluetooth

my question is about bluetooth ids of a device. My idea is identify a device by bluetooth id. I do not need bluetooth communication, only know the ids. It is possible? I read that using gamekit library it is possible some communication between iOS devices, but I need to only identify ids of any device (not only the iOS ones).

thanks in advance for any suggestion.

# c - Ruby 中的有符号和无符号整数

> ID：15359807
> 
> 赞同：6
> 
> 时间：2013-03-12T11:23:17.153
> 
> 标签：c, ruby, integer

像 C 一样，ruby 是否有有符号和无符号整数，如果有，那么这是否意味着 String 类的长度方法返回有符号整数？（因为如果未指定，则在 C 整数中表示有符号）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T11:27:04.283

Ruby 实现整数的方式使得有符号/无符号的区别无关紧要，因为 Ruby 整数在适用时会自动扩展为 BigNum（任意长度整数）。

这有效地防止了整数溢出，恕我直言，这是人们关心具有固定大小整数的语言（如 C）的符号性的主要原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T11:27:45.467

不。

正如[文档](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_stdtypes.html)告诉您的那样：

> Ruby 支持整数和浮点数。整数可以是任意长度（最大长度取决于系统上的可用内存量）。

这些整数总是有符号的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:27:21.473

由于 Ruby 中的类型是动态的，因此强制 Ruby 将数值存储为特定格式是没有意义的。

Ruby 将通过其内部机制存储整数。因此，让 Ruby 决定如何存储您的号码。

# jinja2 - 我可以在 jinja 中为 dict 对象使用“最后一个”过滤器吗？

> ID：15359811
> 
> 赞同：0
> 
> 时间：2013-03-12T11:23:33.803
> 
> 标签：jinja2

```
messages = {
    '1': "hi i m here",
    '2': "how r u"
}
// in jinja template: 
{{ messages | last }} 
```

我不知道我得到的大小是多少`dict`，我想访问它的最后一个元素。我可以这样做吗？我在使用这个时遇到错误

```
return iter(reversed(seq)).next() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:39:29.193

不，a`dict`不是序列（它没有顺序），因此`last`过滤器将无法处理它。如果顺序很重要，您应该在将其传递给模板之前将其转换为排序列表，或者单独传递最新消息。

如果您必须进行就地排序，您可以使用`dictsort`过滤器生成（键，值）对的排序列表。

# c++ - 转换 STL 容器 到容器

> ID：15359813
> 
> 赞同：5
> 
> 时间：2013-03-12T11:23:41.407
> 
> 标签：c++, stl

我正在寻找一种方法来制定一个具有：

*   使用具有最大“常量”的指针的 STL 容器的接口
*   但它在内部改变了指向的对象
*   与非常量模拟相比，没有额外的运行时开销

理想情况下，与非 const 版本相比，该解决方案不会编译为额外的代码，因为 const/non-const-ness 只是对程序员的帮助。

这是我到目前为止所尝试的：

```
#include <list>
#include <algorithm>

using namespace std;
typedef int T;

class C
{
public:
    // Elements pointed to are mutable, list is not, 'this' is not - compiles OK
    list<T *> const & get_t_list() const { return t_list_; }

    // Neither elements nor list nor' this' are mutable - doesn't compile
    list<T const *> const & get_t_list2() const { return t_list_; }

    // Sanity check: T const * is the problem - doesn't compile
    list<T const *> & get_t_list3() { return t_list_; }

    // Elements pointed to are immutable, 'this' and this->t_list_ are
    // also immutable - Compiles OK, but actually burns some CPU cycles
    list<T const *> get_t_list4() const {
        return list<T const *>( t_list_.begin() , t_list_.end() );
    }

private:
    list<T *> t_list_;
}; 
```

如果没有类型转换的解决方案，我想要关于如何制定具有所描述属性的类的替代建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:46:33.153

让我们假设您可以转换`list<T*>&`为`list<T const *>&`. 现在考虑以下代码：

```
list<char*> a;
list<char const*>& b = a;

b.push_back("foo");

a.front()[0] = 'x'; // oops mutating const data 
```

转换`T**`为`T const**`.

如果您想提供对底层数据的只读访问，则需要提供一些自定义视图，可能使用自定义迭代器。

类似于以下内容。

```
template <typename It>
class const_const_iterator {
private:
    using underlying_value_type = typename std::iterator_traits<It>::value_type;

    static_assert(std::is_pointer<underlying_value_type>(),
                  "must be an iterator to a pointer");

    using pointerless_value_type = typename std::remove_pointer<underlying_value_type>::type;

public:
    const_const_iterator(It it) : it(it) {}

    using value_type = pointerless_value_type const*;

    value_type operator*() const {
        return *it; // *it is a T*, but we return a T const*,
                    // converted implicitly
                    // also note that it is not assignable
    }

    // rest of iterator implementation here
    // boost::iterator_facade may be of help

private:
    It it;
};

template <typename Container>
class const_const_view {
private:
    using container_iterator = typename Container::iterator;

public:
    using const_iterator = const_const_iterator<container_iterator>;
    using iterator = const_iterator;

    const_const_view(Container const& container) : container(&container) {}

    const_iterator begin() const { return iterator(container->begin()); }
    const_iterator end() const { return iterator(container->end()); }

private:
    Container const* container;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:03:05.647

不要退回容器。返回迭代器。

# javascript - 如何访问 a4j:jsFunction 的 oncomplete 属性中的参数

> ID：15359815
> 
> 赞同：1
> 
> 时间：2013-03-12T11:23:46.280
> 
> 标签：javascript, jsf-2, richfaces

有没有办法在不使用属性和的情况下访问它`<a4j:jsFunction>`的属性中的参数？`oncomplete=""``action=""``assingTo=""``<a4j:param>`

```
<a4j:jsFunction name="refreshTableFilter" render="table,scroller" execute="@form" oncomplete="setCursor(componentId);">
    <a4j:param name="componentId" />
</a4j:jsFunction> 
```

我正在寻找一种`<a4j:param>`直接访问的方法。我不需要 BackingBean 中的参数，也不需要`action=""`属性。

**更新**

我目前的代码是：

```
 <rich:extendedDataTable id="table"
        rowKeyVar="index" selectionMode="single"
        selection="#{cc.attrs.controller.selection}"
        displayColumnsOrder="#{cc.attrs.configController.currentColumnConfig}"
        rowClasses="light-table-row,dark-table-row"
        value="#{cc.attrs.controller.entities}" var="entity"
        rows="#{cc.attrs.rows}">

        <a4j:ajax event="rowclick" onbegin="tableRowClick(#{index})"/> 

        <rich:column id="cShipName" styleClass="segment"
            filterValue="#{cc.attrs.controller.vesselNameFilter}"
            filterExpression="#{fn:containsIgnoreCase(entity.vesselName, fn:trim(cc.attrs.controller.vesselNameFilter))}"
            width="140px">
            <f:facet name="header" id="headerShipName">
                <div style="margin-top: 5px;">
                    <h:inputText id="shipnameFilter" style="width:99.9%" value="#{cc.attrs.controller.vesselNameFilter}" />
                </div>
            </f:facet>
            <h:outputText value="#{entity.vesselName}" />               
        </rich:column>

  ...

    </rich:extendedDataTable> 
```

以及调用 a4j:jsFunction 的 javascript：

```
 $(document).bind('keypress', function(e) {
         if(e.keyCode==13){
            var elementId = document.activeElement.id;
            if (elementId.indexOf('shipnameFilter') != -1) {
                refreshTableFilter();
                return false;
            }                
            return true;
         }
      }); 
```

a4j:js功能：

```
<a4j:jsFunction name="refreshTableFilter" render="table@body, scroller" execute="@form" /> 
```

`@body`如果我删除属性中的 jsFunction 可以正常工作`render=""`，但是表格在渲染后不显示任何内容（如果我按 F5，表格中将显示正确的数据）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:27:20.393

根据截断的代码，您正在尝试重新呈现有关过滤器更改的表格，然后将焦点重新设置为过滤器输入。我猜过滤器输入放置在表格标题中（一旦重新渲染表格，它们就会失去焦点）。

使其工作的一种方法（更有效）是不重新渲染输入，您可以使用元组件仅渲染表格的页眉/正文/页脚：

```
<a4j:jsFunction name="refreshTableFilter" render="table@body table@footer scroller" execute="@form"/> 
```

关于你最初的问题。如果不将其分配给服务器端的某些东西，似乎不可能在 oncomplete 处理程序中获取参数。例如：

```
 <a:jsFunction name="refreshTableFilter" render="table,scroller" execute="@form"
                 oncomplete="setCursor(event.data);"
                 data="#{refreshTableFilterParam}">
      <a:param name="paramName" assignTo="#{refreshTableFilterParam}"/>
    </a:jsFunction> 
```

# mysql - 使用 Active Record 进行分层查询

> ID：15359817
> 
> 赞同：0
> 
> 时间：2013-03-12T11:23:47.943
> 
> 标签：mysql, arrays, codeigniter, activerecord

我的数据库表中有名为**pages的记录**

结构如：

```
id | parent_id | title 
```

如果**parent_id == 0**则表示该行是父行

如果**parent_id != 0**则表示该行是子行

我可以使用 CodeIgniter activerecord 获取所有记录，例如：

```
$query = $this->db->get('pages'); 
```

结果是这样的：

```
Europe
Mexico
Spain
Africa
Germany
Canada
America
Egypt
France 
```

但是我需要使用一些 groupby 或其他东西对结果重新排序，以便它将 db 中具有相同 parent_id 的所有行分组，然后生成 get()，所以结果如下：

```
Africa
    Egypt
America
    Canada
    Mexico
Europe
    Germany
    France
    Spain 
```

**其中 parent_id = 0 是非洲、美洲和欧洲**

和

**埃及有例如 parent_id = 1 加拿大和墨西哥 parent_id = 2 等根据其父母的 id**

怎么做？

顺便提一句。文本缩进和css没问题，我只是对foreach循环本身的结果数组感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:58:39.580

这个查询应该这样做：

```
select 
    c2.id, c1.title as continent, c2.name as country
from
    country as c1
        left outer join country as c2 ON (c1.id = c2.parent_id)
where
    c2.parent_id != 0
order by c1.title , c2.title 
```

给定您的样本数据，这将产生：

```
8   Africa  Egypt
6   America Canada
2   America Mexico
9   Europe  France
5   Europe  Germany
3   Europe  Spain 
```

更新：如果您想在同一领域混合使用各大洲和国家：

```
select 
    c2.id, c2.title as country
from
    country as c1
    left outer join
        country as c2 ON (c1.id = c2.parent_id or c1.id = c2.id and c2.parent_id = 0)
where
    c2.title is not null
order by 
    case 
        when c2.parent_id = 0 then c2.id else c2.parent_id end,
        c2.parent_id 
```

这将为您提供以下输出：

```
1   Europe
3   Spain
9   France
5   Germany
4   Africa
8   Egypt
7   America
6   Canada
2   Mexico 
```

对于在 codeigniter 中使用，最简单的方法是不使用活动记录，只需一个简单的查询：

```
$sql = 'select 
    c2.id, c2.title as country
from
    country as c1
    left outer join
        country as c2 ON (c1.id = c2.parent_id or c1.id = c2.id and c2.parent_id = 0)
where
    c2.title is not null
order by 
    case 
        when c2.parent_id = 0 then c2.id else c2.parent_id end,
        c2.parent_id'

$result = $this->db->query($sql)->result(); 
```

# java - MySQL 集群中的 XA 事务支持？

> ID：15359820
> 
> 赞同：4
> 
> 时间：2013-03-12T11:23:54.907
> 
> 标签：java, mysql, xa

MySQL 集群是否支持 XA 事务？我正在使用 NDBCLUSTER 引擎。我有一个应用程序需要为一个事务更新多个数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:32:07.513

引用[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/xa-restrictions.html)：

> XA 事务支持仅限于 InnoDB 存储引擎。

所以答案是否定的，NDBCLUSTER 引擎不支持 XA 事务。

# java - 我无法在以独立模式配置的 hadoop 上执行 map-reduce 作业

> ID：15359824
> 
> 赞同：3
> 
> 时间：2013-03-12T11:24:02.690
> 
> 标签：java, hadoop, heap-memory

我正在尝试在本地文件系统（独立模式）上的计算机（MacOS 10.7）上测试一个非常简单的 hadoop map-reduce 作业。该作业采用 .csv 文件 (data-01) 并计算某些字段的出现次数。

我下载了 CDH4 hadoop，运行了作业，它似乎正常启动，但在处理完所有拆分后，我收到以下错误：

```
13/03/12 12:11:18 INFO mapred.MapTask: Processing split: file:/path/in/data-01:9999220736+33554432
13/03/12 12:11:18 INFO mapred.MapTask: Map output collector class = org.apache.hadoop.mapred.MapTask$MapOutputBuffer
13/03/12 12:11:18 INFO mapred.LocalJobRunner: Starting task: attempt_local2133287029_0001_m_000299_0
13/03/12 12:11:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
13/03/12 12:11:18 INFO mapred.MapTask: Processing split: file:/path/in/data-01:10032775168+33554432
13/03/12 12:11:18 INFO mapred.MapTask: Map output collector class = org.apache.hadoop.mapred.MapTask$MapOutputBuffer
13/03/12 12:11:18 INFO mapred.LocalJobRunner: Starting task: attempt_local2133287029_0001_m_000300_0
13/03/12 12:11:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
13/03/12 12:11:18 INFO mapred.MapTask: Processing split: file:/path/in/data-01:10066329600+33554432
13/03/12 12:11:18 INFO mapred.MapTask: Map output collector class = org.apache.hadoop.mapred.MapTask$MapOutputBuffer
13/03/12 12:11:18 INFO mapred.LocalJobRunner: Starting task: attempt_local2133287029_0001_m_000301_0
13/03/12 12:11:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
13/03/12 12:11:18 INFO mapred.MapTask: Processing split: file:/path/in/data-01:10099884032+33554432
13/03/12 12:11:18 INFO mapred.MapTask: Map output collector class = org.apache.hadoop.mapred.MapTask$MapOutputBuffer
13/03/12 12:11:18 INFO mapred.LocalJobRunner: Starting task: attempt_local2133287029_0001_m_000302_0
13/03/12 12:11:18 INFO mapred.Task:  Using ResourceCalculatorPlugin : null
13/03/12 12:11:18 INFO mapred.MapTask: Processing split: file:/path/in/data-01:10133438464+32025555
13/03/12 12:11:18 INFO mapred.MapTask: Map output collector class = org.apache.hadoop.mapred.MapTask$MapOutputBuffer
13/03/12 12:11:19 INFO mapred.LocalJobRunner: Map task executor complete.
13/03/12 12:11:19 WARN mapred.LocalJobRunner: job_local2133287029_0001
java.lang.Exception: java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:399)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.init(MapTask.java:949)
    at org.apache.hadoop.mapred.MapTask.createSortingCollector(MapTask.java:389)
    at org.apache.hadoop.mapred.MapTask.access$100(MapTask.java:78)
    at org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:668)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:740)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:338)
    at org.apache.hadoop.mapred.LocalJobRunner$Job$MapTaskRunnable.run(LocalJobRunner.java:231)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
13/03/12 12:11:19 INFO mapreduce.Job: Job job_local2133287029_0001 failed with state FAILED due to: NA
13/03/12 12:11:19 INFO mapreduce.Job: Counters: 0 
```

无论输入文件有多小，我都会收到相同的错误...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T13:57:20.137

碰巧默认选项取代了我的本地配置（我仍然不明白为什么）。

```
export HADOOP_CLIENT_OPTS="-Xmx1024m" 
```

解决了这个问题。

# python - Sqlalchemy 批量删除表单创建

> ID：15359825
> 
> 赞同：0
> 
> 时间：2013-03-12T11:24:07.010
> 
> 标签：python, sql, sqlalchemy

如何在 sqlalchemy orm 中编写表达以下查询？

```
DELETE FROM ACCESS_STRING_DETAILS WHERE MENU_ID IN(SELECT MENU_ID FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM TIME_DETAILS WHERE MENU_ID IN(SELECT MENU_ID FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM REDIRECTOR_INPUT_PARAMS WHERE COMMAND_ID IN(SELECT KEYWORD FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM REDIRECTOR_COMMANDS WHERE COMMAND_ID IN(SELECT KEYWORD FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM RANGE_DETAILS WHERE COMMAND_ID IN(SELECT KEYWORD FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM CLIENT_RSP_DETAILS WHERE KEYWORD IN(SELECT KEYWORD FROM REDIRECTOR WHERE SERVICE=122)
DELETE FROM REDIRECTOR WHERE SERVICE=122 
```

我基本上需要的是从表中删除所有匹配的记录以及表`MENU_ID`中 的特定`KEYWORD`记录`SERVICE``REDIRECTOR`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:29:27.847

`SERVICE=122`您可以先单独捕​​获过滤器；我假设您有所有与表名匹配的表的模型，使用驼峰命名法。

menu_id 和关键字选择也被存储以供重用：

```
service_filter = Redirector.service == 122
menu_id_select = session.query(Redirector.menu_id).filter(service_filter)
keyword_select = session.query(Redirector.keyword).filter(service_filter) 
```

现在您可以将这些选择应用于所有删除查询：

```
(session
    .query(AccessStringDetails)
    .filter(AccessStringDetails.menu_id.in_(menu_id_select))
    .delete(False))
(session
    .query(TimeDetails)
    .filter(TimeDetails.menu_id.in_(menu_id_select))
    .delete(False))
(session
    .query(RedirectorInputParams)
    .filter(RedirectorInputParams.command_id.in_(keyword_select))
    .delete(False))
# etc.

session.query(Redirector).filter(service_filter).delete(False) 
```

这些示例使用带有 select 语句的[`Column.in_`方法，将后者转换为子选择，以生成如下查询：](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#sqlalchemy.schema.Column.in_)

```
DELETE FROM access_string_details WHERE access_string_details.menu_id IN (SELECT redirector.menu_id AS redirector_menu_id 
FROM redirector 
WHERE redirector.service = :service_1) 
```

`:service_1`参数设置为`122`.

# itext - iText ImgCCITT and Velocity

> ID：15359828
> 
> 赞同：2
> 
> 时间：2013-03-12T11:24:16.703
> 
> 标签：itext, velocity

I created a QRCode barcode in iText and I want to save this file to disk. It appears to create a ImgCCITT type. It saves down to the disk but the file is corrupted. I also tried to save it as .jpg. Any ideas of how to save an uncorrupted barcode image to disk.

```
BarcodeQRCode qrcode = new BarcodeQRCode("292035-1", 4, 4, null);
Image qrImg = qrcode.getImage();

qrImg.setUrl(new URL("...images/" + i + ".CCITT"));

OutputStream out1 = new FileOutputStream("C:/Program Files (x86)/images/" + i + ".CCITT");
out1.write(qrImg.getRawData());
out1.flush();
out1.close(); 
```

What I'm trying to do is use velocity templates to create html passing java objects but having an issue with passing a 128 and QRcode barcode image from jav.a

To get around it I thought of saving it to disk, setting the url and getting that back in the velocity template, but the saved file seems to be corrupted.

Velocity Template:

```
 <img src="${qrcode.getUrl()}"/> 
```

Thanks, Martin

# c++ - win32 gui 应用程序需要一个健壮的错误系统

> ID：15359833
> 
> 赞同：5
> 
> 时间：2013-03-12T11:24:34.143
> 
> 标签：c++, windows, mfc, error-handling

我有一些代码如下所示：

```
void MyClass::OnButtonClick()
{
    int retVal = SomeDialog.DoModal();
    if(retVal == MYCLASS_ERROR)
    {
        MessageBox("Error"...blah ...blah);
    }
    else if(retVal == IDOK)   // IDOK is returned on clicking the 'OK' button
    {
        MessageBox("All is well"...blah ...blah);
    }
} 
```

*   `SomeDialog`只显示一个进度条。出现任何错误时，进度条会通过调用自动关闭`EndDialog(MYCLASS_ERROR)`。只有在成功完成后，用户才能在此处单击“确定”。
*   `MYCLASS_ERROR`是一个`enum`包含各种返回类型和状态的值。

我发现在点击确定时`SomeDialog`，仍然显示错误信息！我挖得更深了，发现`MYCLASS_ERROR`= `IDOK`= 1。

所以我的问题是，我应该如何定义所有这些返回状态，使其不会与任何其他实现的状态发生冲突？这意味着，我的函数应该返回**任何**其他函数（或尽可能少的其他函数）不返回的值。

我想修改我的设计，使所有函数只返回 TRUE 或 FALSE。但是，这并非在所有情况下都是可行的。我也搜索了很多答案，但到目前为止还没有找到任何答案。

感谢您的关注！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:50:38.973

有一些方法可以解决这个问题，但它们有点难看。

最简洁的设计通常是避免与标准 Win32 习惯用法发生冲突的设计，在 Win32 的世界中，模式对话框返回`ID`值之一以指示用户在关闭它们时单击的按钮（就像消息框一样）。严格来说，它`nResult`是传递给`EndDialog`用于关闭模态对话框的函数的参数。

我建议不要试图用额外的意义重载这个返回值。尝试这样做只会给您带来麻烦（例如，您可能*还*没有注意到返回值 -1 意味着创建对话框失败）。

相反，在您的对话框类中定义一个附加成员变量并使用它来报告您的附加信息。成功后，您将从`IDOK`对话框返回。在失败（*任何*类型的失败）时，返回类似`IDCANCEL`. 然后，您的代码`OnButtonClick`将检查返回值是否为`IDOK`或`IDCANCEL`。如果是`IDCANCEL`，那么您*还*需要查询添加到对话框中的成员变量的值以获取更多信息。

希望这是有道理的。如果不是，也许这个代码示例将（假设这`m_errStatus`是您添加到子类的成员变量`CDialog`）：

```
void MyClass::OnButtonClick()
{
    if (SomeDialog.DoModal() == IDOK)
    {
        // Success!
        // The OK button was clicked, so IDOK was returned.
        MessageBox("All is well"...blah ...blah);
    }
    else
    {
        // Failure!
        // Some error occurred, so IDCANCEL (or any other value) was returned.
        // Determine what to do now, based on additional information that the
        // dialog set upon failure.
        switch (SomeDialog.m_errStatus)
        {
            case MYCLASS_ERROR_1:
                MessageBox("Error 1 occurred.");
                break;
            case MYCLASS_ERROR_2:
                MessageBox("Error 2 occurred.");
                break;
            // etc.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:14:27.300

您可以简单地将自定义错误代码定义为不与 Windows 返回值“冲突”。当然，你不知道微软什么时候会添加新的返回值，所以这总是有点古怪。

你可以尝试这样的事情：

```
enum MYERR
{
    MYERR_FIRST_ERROR   = 0x0F000000, /* large and unlikely to be used */
    MYERR_SECOND_ERROR,
    MYERR_THIRD_ERROR,
    /* and so on */
}; 
```

但是，正如 Cody Gray 上面所说，我认为你最好从 中返回标准错误代码`DoModal`，`IDABORT`而不是像那样重载返回代码。然后只需要有一个用户必须明确检索的辅助错误代码，这是您自己的“内部”错误代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:34:23.703

您可以使用枚举而不是宏定义的返回代码，并使用命名空间以避免名称冲突。查看[Boost 错误处理策略](http://www.boost.org/doc/libs/1_53_0/libs/math/doc/sf_and_dist/html/math_toolkit/policy/pol_ref/error_handling_policies.html)：

```
namespace boost { namespace math { namespace policies {

enum error_policy_type
{
   throw_on_error = 0, // throw an exception.
   errno_on_error = 1, // set ::errno & return 0, NaN, infinity or best guess.
   ignore_error = 2, // return 0, NaN, infinity or best guess.
   user_error = 3  // call a user-defined error handler.
};

}}} // namespaces 
```

# android - How to sort sqlite dataBase?

> ID：15359834
> 
> 赞同：-3
> 
> 时间：2013-03-12T11:24:38.010
> 
> 标签：android, sqlite

I tried to make, history of webview. When I set database on `listView` with `simpleCursorAdapter`, it show last added item in end of list, like that:

this is KEY_ID list:

```
 1
   2
   3 
   4 
   5 
```

but I want, that last added item show in start of list:

```
5 
4 
3 
2 
1 
```

How to do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:26:13.297

You need to use `DESC` for fetch result in descending order and `ASC` for ascending order.

```
Cursor c = db.query(DATABASE_TABLE, projection_column, null, null, null, null, KEY_ID + "DESC"); 
```

# asp.net - The parameterized query ... which was not supplied

> ID：15359836
> 
> 赞同：1
> 
> 时间：2013-03-12T11:24:39.833
> 
> 标签：asp.net, sql-server, ado.net

Im trying to query an UPDATE for my database, and it gives me an error :

> The parameterized query '(@naming nvarchar(7),@role nvarchar(3),@company nvarchar(3),@sal' expects the parameter '@link_company', which was not supplied.

This is my code :

```
<tr>
            <td><input type="text" name="name" value=" <%=dt.Rows[0][1].ToString() %>" /></td>
            <td><input type="text" name="role" value=" <%=dt.Rows[0][2].ToString() %>" /></td>
            <td><input type="text" name="company" value=" <%=dt.Rows[0][3].ToString() %>" /></td>
            <td><input type="text" name="salary_year" value=" <%=dt.Rows[0][4].ToString() %>" /></td>
            <td><input type="text" name="bonus" value=" <%=dt.Rows[0][5].ToString() %>" /></td>
            <td><input type="text" name="stock" value=" <%=dt.Rows[0][6].ToString() %>" /></td>
            <td><input type="text" name="other" value=" <%=dt.Rows[0][7].ToString() %>" /></td>
            <td><input type="text" name="alut_year" value=" <%=dt.Rows[0][8].ToString() %>" /></td>
            <td><input type="text" name="alut_monthly" value=" <%=dt.Rows[0][9].ToString() %>" /></td>
            <td><input type="text" name="net" value=" <%=dt.Rows[0][10].ToString() %>" /></td>
            <td><input type="text" name="link_name" value=" <%=dt.Rows[0][11].ToString() %>" /></td>
            <td><input type="text" name="link_company" value=" <%=dt.Rows[0][12].ToString() %>" /></td>
            <td><input type="text" name="last_year_alut" value=" <%=dt.Rows[0][13].ToString() %>" /></td>
            <td><input type="text" name="avg_salary" value=" <%=dt.Rows[0][14].ToString() %>" /></td>
            <td><input type="text" name="last_year_profit" value=" <%=dt.Rows[0][15].ToString() %>" /></td>

        </tr> 
```

and this is my code behind :

```
 string name = Request.Form["name"];
        string role = Request.Form["role"];
        string company = Request.Form["company"];
        string salary_year = Request.Form["salary_year"];
        string bonus = Request.Form["bonus"];
        string stock = Request.Form["stock"];
        string other = Request.Form["other"];
        string alut_year = Request.Form["alut_year"];
        string alut_monthly = Request.Form["alut_monthly"];
        string net = Request.Form["net"];
        string link_name = Request.Form["link_name"];
        string link_company = Request.Form["link_comapny"];
        string avg_salary = Request.Form["avg_salary"];
        string last_year_profit = Request.Form["last_year_profit"];
        string last_year_alut = Request.Form["last_year_alut"];

        if (IsPostBack)
        {

            sq.UpdateManager(update,name, role, company, salary_year, bonus, stock, other, alut_year, alut_monthly, net, link_name, link_company,last_year_profit, last_year_alut, avg_salary);
            Response.Redirect("insert.aspx");
        } 
```

and this is my "UpdateManager" function :

```
public void UpdateManager(string id, string name, string role, string company, string salary_year, string bonus, string stock, string other, string alut_year, string alut_monthly, string net, string link_name, string link_company, string last_year_profit, string last_year_alut, string avg_salary)
    {
        sql = "Update table_salary SET f_name =@naming , role_manager = @role, COMPANY = @company, SALARY_YEAR =@salary_year ,BONUSING = @bonus,STOCK =@stock ,OTHER = @other, ALUT_YEAR =@alut_year,ALUT_MONTH=@alut_monthly,NET_INCOME=@net,link_name = @link_name, link_company= @link_company,LAST_YEAR_ALUT=@last_year_alut, AVG_SALARY=@avg_salary, LAST_YEAR_PROFIT=@last_year_profit   where id =" + id;
        connection = new SqlConnection(conn);
        connection.Open();

        cmd = new SqlCommand(sql, connection);
        cmd.Parameters.AddWithValue("@naming", name);
        cmd.Parameters.AddWithValue("@role", role);
        cmd.Parameters.AddWithValue("@company", company);
        cmd.Parameters.AddWithValue("@salary_year", salary_year);
        cmd.Parameters.AddWithValue("@bonus", bonus);
        cmd.Parameters.AddWithValue("@stock", stock);
        cmd.Parameters.AddWithValue("@other", other);
        cmd.Parameters.AddWithValue("@alut_year", alut_year);
        cmd.Parameters.AddWithValue("@alut_monthly", alut_monthly);
        cmd.Parameters.AddWithValue("@net", net);
        cmd.Parameters.AddWithValue("@link_name", link_name);
        cmd.Parameters.AddWithValue("@link_company", link_company);
        cmd.Parameters.AddWithValue("@avg_salary", avg_salary);
        cmd.Parameters.AddWithValue("@last_year_profit", last_year_profit);
        cmd.Parameters.AddWithValue("@last_year_alut", last_year_alut);

        cmd.ExecuteNonQuery();

        connection.Close();
    } 
```

When I tried to run this query on my SQL management tool , it runs ok. and NO column is required (any column except of the ID..) allowing null..which is weird..

any thoughts ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:30:00.333

错字 Request.Form["link_comapny"];

# seo - 对搜索结果的评论

> ID：15359839
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:24:58.400
> 
> 标签：seo, metadata

我们的网站收集了所有客户的反馈，99% 是积极的。我看到网站在搜索结果下列出了他们自己的评论。例如，请看图片。

![在此处输入图像描述](../Images/6a384d08544aad19a901bf7aa4a8b2b5.png)

我想知道如何为我的网站做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:45:22.327

它被称为微数据。您需要[评级模式](http://schema.org/Rating)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:34:35.197

您正在搜索、注册、创建页面的“Google 商家”，客户将查看 :)

# php - Simple HTML DOM getting td content from tr where specific content is

> ID：15359841
> 
> 赞同：0
> 
> 时间：2013-03-12T11:25:04.260
> 
> 标签：php, simple-html-dom

Html what I am grabbing looks like this

```
<div id="table"><table>
<tr><td>Clubname</td><td>15</td><td>30</td></tr>
<tr><td>Clubname 2</td><td>15</td><td>30</td></tr>
<tr><td>Clubname 3</td><td>15</td><td>30</td></tr>
</table></div> 
```

What i want is to find the tr where Clubname 2 is in and get the data from td[1] and td[2] and output this.

I want this done with simple_html_dom.php

What I already have is

```
require('simple_html_dom.php');
$html = file_get_html('webpage.html');
foreach($html->find('div#table') as $e)
echo $e->innertext . '<br>'; 
```

How to find the specific clubname and get the specific content from the td's from same tr?

=================================================================================

Okay thanks, what I did now is like you told me, only with variable, because later I want to use a variable.

```
<?php
    $clubname = 'Ajax';
    require('phpQuery/phpQuery.php');         
    $result = array();
    $limit = 2; //you need only the next two sibling

    $dom = phpQuery::newDocumentFile('http://soccer.gijsve.nl/test2.php');        
    $match = $dom->find('td:contains("'.$clubname.'")');        
    while( 0 < count( $match = $match->next() ) && ( 0 < $limit-- )  ){
            $result[] = $match->text();
    }
    var_dump($result);

?> 
```

What I want now is to select the first td (td before the match) and the fourth and fifth for example. Because I need to know the scored goals, the points and the rank. See [http://soccer.gijsve.nl/test2.php](http://soccer.gijsve.nl/test2.php) for the table I am grabbing.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:13:59.120

我向您推荐另一个简单的 DOM 工具： [http](http://code.google.com/p/phpquery/) ://code.google.com/p/phpquery/ 据我所知，它速度更快，并且选择器工作得更好。这个项目没有完成喷气机。但是dom阅读部分效果很好。选择器就像在 jQuery 中一样工作；）

```
<?php
    require('phpquery/phpQuery.php');         
    $result = array();
    $limit = 2; //you need only the next two sibling

    $dom = phpQuery::newDocumentFile('webpage.html');        
    $match = $dom->find('td:contains("Clubname 2")');        
    while( 0 < count( $match = $match->next() ) && ( 0 < $limit-- )  ){
            $result[] = $match->text();
    }
    var_dump($result);

    // other example:
    $match = $dom->find('td:contains("Clubname 2")');        
    $loses = $match->siblings('.loses')->text(); //matches the siblings of the $match element, and has loses class
    $wins = $match->siblings('.wins')->text(); //matches the siblings of the $match element, and has wins class

?> 
```

这适用于您的示例 html，以及您评论的完整 html。

使用 simple_html_dom 您可以搜索文本，作为文本“标签”：

```
$textlist = $html->find('text'); 
```

这将返回所有文本块，您应该运行 foreach $textlist，如果元素的 html 等于您找到的内容，则将其保存到变量中，然后返回到它的父级（在完整的 html 中，第二个父）比到下一个兄弟，再到下一个兄弟，我认为比使用 phpQuery 更复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:32:27.940

Phpquery 也有兄弟选择器，让生活更轻松：

```
$dom->find('td:contains("Clubname 2") + td')->text(); # 15
$dom->find('td:contains("Clubname 2") + td + td')->text(); # 30
$dom->find('td:contains("Clubname 2") ~ td')->text(); # 15 30 
```

# utf-8 - How can I convert character encoding of Chameleon simulator to 'Utf-8' which is default 'latin-1'?

> ID：15359848
> 
> 赞同：2
> 
> 时间：2013-03-12T11:25:31.193
> 
> 标签：utf-8, hl7

I want to simulate japanese HL7 message over chameleon simulator. But when I select that message from file, japanese characters are being displayed as special characters into Chameleon simulator. I want it to be displayed as japanese characters.

How can I convert character encoding of Chameleon simulator to 'Utf-8' which is default 'latin-1'?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-19T05:35:59.620

在收到消息之前，试试这个：

```
ChameleonEncoding.SetCurrentTranslationLocale("utf-8");  // Tell Chameleon to use current Chameleon Locale 
```

或者您可以只使用本地语言环境：

```
 _currentLocale = ChameleonEncoding.GetCurrentTranslationLocale();   // Get the current Chameleon Locale
 ChameleonEncoding.SetCurrentTranslationLocale(_currentLocale);      // Tell Chameleon to use current Chameleon Locale 
```

# ruby-on-rails - How do cache finding object by id

> ID：15359850
> 
> 赞同：6
> 
> 时间：2013-03-12T11:25:39.567
> 
> 标签：ruby-on-rails, hibernate, dalli

```
select * from Foo where id = 200 
```

How to cache finding object by id, since we observe a select call being made all the time on a certain id. How should we enable this in rails in a non obtrusive fashion, so that we can switch between any cache store in the future (say memcached or redis)

EDIT:

Much similar to Hibernate based caching strategy `org.hibernate.annotations.CacheConcurrencyStrategy.READ_WRITE` which is applied on all Entity classes in Java EE.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T18:41:32.910

在你的 Foo 模型中，你可能想要这样的东西

```
class Foo < ActiveRecord::Base

  def self.find_some_foo(foo_id)
    Rails.cache.fetch("foo_#{foo_id}", expires_in: 7.days) do
      begin
        self.where(:id => foo_id)
      rescue Exception => e
        logger.info "Exception fetching Foo ID: #{e.to_s}"
        nil
      end
    end
  end

end 
```

`config.cache_store=`通过在文件中调用来设置应用程序的默认缓存存储`config/application.rb`，例如，Alex Ghiculescu 提供`config.cache_store = :memory_store`的[链接在第 2.1 节中有很好的信息。](http://guides.rubyonrails.org/caching_with_rails.html)

[当您尝试获取cache_store](http://api.rubyonrails.org/classes/ActiveSupport/Cache/Store.html)中不存在的键时，rails 缓存存储会自动填充。出于这个原因，为您的密钥制定一个好的命名约定很重要。一旦你建立了基础，通过在`config/application.rb`. 一些选择是[内存存储](http://api.rubyonrails.org/classes/ActiveSupport/Cache/MemoryStore.html)、[文件存储](http://api.rubyonrails.org/classes/ActiveSupport/Cache/FileStore.html)、[内存缓存](http://api.rubyonrails.org/classes/ActiveSupport/Cache/MemCacheStore.html)或缓存存储的任意组合。

要刷新 rails 内存缓存，请重新启动您的 rails 服务器。要刷新文件缓存，请键入`rake tmp:clear`。要刷新内存缓存，请参阅此[链接](https://serverfault.com/questions/259114/how-to-restart-clear-memcache-without-restarting-the-whole-web-server)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:53:01.397

您可以简单地使用 rails 的内置缓存

```
Rails.cache.fetch :cache_id_here, :expires_in => 1.days do
   Model.find(id)
end 
```

`:cache_id_here`随心所欲地进行更改，并将过期设置为您的偏好。您可以将此缓存与 memcached 或您想要的任何替代缓存存储一起使用。您只需在应用程序配置中进行设置。

**更新**

我正在开发一个通过扩展 Rail 的 .find 和 .save 方法以及缓存结果来解决这个问题的 gem。它是超级测试版，尚未在生产中进行测试，但如果您愿意尝试，请查看 repo：[https](https://github.com/johnkoht/cache-money-millionaire) ://github.com/johnkoht/cache-money-millionaire并告诉我您的想法。

本质上，如果您调用`Post.find(3)`它，它将自动查找并创建一个缓存版本，其缓存键`Post 3`将在保存或触摸时自动更新。就像我说的，它是测试版，但它解决了问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T17:12:54.527

以下 gem 提供直写缓存功能：

**[记录缓存](https://github.com/orslumen/record-cache)**

支持 Rails 3。积极开发。

**[缓存钱](https://github.com/ngmoco/cache-money)**

由 Twitter 构建，现在由社区维护。我不知道它是否支持 Rails 3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T08:54:03.870

身份图可以提供帮助：[http ://api.rubyonrails.org/classes/ActiveRecord/IdentityMap.html](http://api.rubyonrails.org/classes/ActiveRecord/IdentityMap.html)

它仍处于测试阶段，因此请小心使用。它也不会跟踪关联。

# html - 响应式布局未在 FireFox 中调整大小

> ID：15359852
> 
> 赞同：2
> 
> 时间：2013-03-12T11:25:43.643
> 
> 标签：html, css, responsive-design, media-queries, window-resize

我在这个网站和其他网站上搜索过，似乎找不到明确的答案。我正在创建一个响应式电子邮件。是的，我已经完成了我的研究等，我只是在这里寻求帮助，我知道这对于知道这一切如何运作的人来说很简单。我什至联系了 ZURB，我从那里获得了这个模板等等远无济于事。

这是一个响应性问题，我不确定是由于我使用的 Firefox 版本还是我的代码有问题...？我在每张桌子上放置了 100% 的宽度（以防万一那是罪魁祸首），并且它只有相应移动的标题。

我询问它是否是 CSS，但它在 Safari 中有效。我很感激帮助，看看问题是什么。

谢谢-下面的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
/* ------------------------------------- 
        GLOBAL 
------------------------------------- */
* { 
    margin:0;
    padding:0;
}
* { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; }

img { 
    max-width: 100%; 
}
.collapse {
    margin:0;
    padding:0;
}
body {
    -webkit-font-smoothing:antialiased; 
    -webkit-text-size-adjust:none; 
    width: 100%!important; 
    height: 100%;
}

/* ------------------------------------- 
        ELEMENTS 
------------------------------------- */
a { color: #0166b1;}

.btn {
    text-decoration:none;
    color: #FFF;
    background-color: #666;
    padding:10px 16px;
    font-weight:bold;
    margin-right:10px;
    text-align:center;
    cursor:pointer;
    display: inline-block;
}

p.callout {
    padding:15px;
    background-color:#ECF8FF;
    margin-bottom: 15px;
}
.callout a {
    font-weight:bold;
    color: #0166b1;
}

table.social {
/*  padding:15px; */
    background-color: #ebebeb;

}
.social .soc-btn {
    padding: 3px 7px;
    font-size:12px;
    margin-bottom:10px;
    text-decoration:none;
    color: #FFF;font-weight:bold;
    display:block;
    text-align:center;
}
a.fb { background-color: #3B5998!important; }
a.tw { background-color: #1daced!important; }
a.gp { background-color: #DB4A39!important; }
a.ms { background-color: #000!important; }

.sidebar .soc-btn { 
    display:block;
    width:100%;
}

p.topNote { border-top: 4px solid #1b3281; margin-top:-2px;}

/* ------------------------------------- 
        HEADER 
------------------------------------- */
table.head-wrap { width: 100%;}

.header.container table td.logo { padding: 15px; }
.header.container table td.label { padding: 15px; padding-left:0px;}

/* ------------------------------------- 
        BODY 
------------------------------------- */
table.body-wrap { width: 100%;}

/* ------------------------------------- 
        FOOTER 
------------------------------------- */
table.footer-wrap { width: 100%;    clear:both!important;
}
.footer-wrap .container td.content  p { border-top: 1px solid rgb(215,215,215); padding-top:15px;}
.footer-wrap .container td.content p {
    font-size:10px;
    font-weight: bold;

}

/* ------------------------------------- 
        TYPOGRAPHY 
------------------------------------- */
h1,h2,h3,h4,h5,h6 {
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; line-height: 1.1; margin-bottom:15px; color:#000;
}
h1 small, h2 small, h3 small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; text-transform: none; }

h1 { font-weight:bold; font-size: 30px; color:#1b3180;}
h2 { font-weight:200; font-size: 27px;}
h3 { font-weight:500; font-size: 22px; color:#0166b1;}
h4 { font-weight:500; font-size: 20px;}
h5 { font-weight:900; font-size: 17px;}
h6 { font-weight:900; font-size: 14px; text-transform: uppercase; color:#444;}

.collapse { margin:0!important;}

p, ul { 
    margin-bottom: 10px; 
    font-weight: normal; 
    font-size:14px; 
    line-height:1.2;
}
p.lead { font-size:17px; }
p.last { margin-bottom:0px;}

ul li {
    margin-left:5px;
    list-style-position: inside;
}

/* ------------------------------------- 
        SIDEBAR 
------------------------------------- */
ul.sidebar {
    background:#ebebeb;
    display:block;
    list-style-type: none;
}
ul.sidebar li { display: block; margin:0;}
ul.sidebar li a {
    text-decoration:none;
    color: #666;
    padding:10px 16px;
/*  font-weight:bold; */
    margin-right:10px;
/*  text-align:center; */
    cursor:pointer;
    border-bottom: 1px solid #777777;
    border-top: 1px solid #FFFFFF;
    display:block;
    margin:0;
}
ul.sidebar li a.last { border-bottom-width:0px;}
ul.sidebar li a h1,ul.sidebar li a h2,ul.sidebar li a h3,ul.sidebar li a h4,ul.sidebar li a h5,ul.sidebar li a h6,ul.sidebar li a p { margin-bottom:0!important;}

/* --------------------------------------------------- 
        RESPONSIVENESS
        Nuke it from orbit. It's the only way to be sure. 
------------------------------------------------------ */

/* Set a max-width, and make it display as block so it will automatically stretch to that width, but will also shrink down on a phone or something */
.container {
    display:block!important;
    max-width:640px!important;
    margin:0 auto!important; /* makes it centered */
    clear:both!important;
}

/* This should also be a block element, so that it will fill 100% of the .container */
.content {
    padding:15px;
    max-width:600px;
    margin:0 auto;
    display:block; 
}

.panelcontent {
    padding:15px;
    max-width:600px;
    margin:0 auto;
    display:block; 
}

/* Let's make sure tables in the content area are 100% wide */
.content table { width: 100%; }

/* Odds and ends */
.column {
    width: 300px;
    float:left;
}
.column tr td { padding: 15px; }
.column-wrap { 
    padding:0!important; 
    margin:0 auto; 
    max-width:600px!important;
}
.column table { width:100%;}
.social .column {
    width: 280px;
    min-width: 279px;
    float:left;
}

/* Be sure to place a .clear element after each set of columns, just to be safe */
.clear { display: block; clear: both; }

/* ------------------------------------------- 
        PHONE
        For clients that support media queries.
        Nothing fancy. 
-------------------------------------------- */
@media only screen and (max-width: 600px) {

    a[class="btn"] { display:block!important; margin-bottom:10px!important; background-image:none!important; margin-right:0!important;}

    div[class="column"] { width: auto!important; float:none!important;}

    table.social div[class="column"] {
        width:auto!important;
    }

}

</style>
<!-- If you delete this tag, the sky will fall on your head -->
<meta name="viewport" content="width=device-width" />

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Crystal Template</title>

<link rel="stylesheet" type="text/css" href="stylesheets/email.css" />

</head>

<body bgcolor="#ececec">

<!-- HEADER -->
<table class="head-wrap" bgcolor="#FFFFFF" width="100%">
    <tr>
        <td></td>
        <td class="header container">

                <div class="content">
                    <table bgcolor="#999999">
                    <tr>
                        <td><img src="http://placehold.it/200x50/" /></td>
                        <td align="right"><h6 class="collapse">Hero</h6></td>
                    </tr>
                </table>
                </div>

        </td>
        <td></td>
    </tr>
</table><!-- /HEADER -->

<!-- BODY -->
<table class="body-wrap"  width="100%">
    <tr>
        <td></td>
        <td class="container" bgcolor="#FFFFFF">

            <div class="content" width="100%">
            <table>
                <tr>
                    <td>
                        <!-- A Real Hero (and a real human being) -->
                        <p><img src="http://placehold.it/600x300" /></p><!-- /hero -->
                        <p class="topNote"></p>
                        <!-- Callout Panel -->
                        <h1>Welcome Mr Smith,</h1>
                        <p class="callout">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.
                        </p><!-- /Callout Panel -->

                        <h3>Subheader 1</h3>

                        <p class="lead">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et.</p>

                    <!--   panel content   -->            
                        <div class="panelcontent">
                    <table bgcolor="#cad9e4"  width="100%">
                    <tr>
                        <td class="small" width="20%" style="vertical-align: top; padding-right:10px;"><img src="http://placehold.it/75x75" /></td>
                        <td>
                            <h4>Title Ipsum <small>This is a note.</small></h4>
                            <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </p>
                            <a class="btn">Clickity Click &raquo;</a>
                        </td>
                    </tr>
                </table>

            </div><!-- panel content -->
        <!--   panel contentcad9e4   -->            

                <div class="panelcontent">
                <table bgcolor="#cad9e4"  width="100%">
                    <tr>
                        <td class="small" width="20%" style="vertical-align: top; padding-right:10px;"><img src="http://placehold.it/75x75" /></td>
                        <td>
                            <h4>Title Ipsum <small>This is a note.</small></h4>
                            <p class="">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </p>
                            <a class="btn">Clickity Click &raquo;</a>
                        </td>
                    </tr>
                </table>

            </div><!-- /panel content -->

                        <!-- Callout Panel -->
                        <!--<p class="callout">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. <a href="#">Do it Now! &raquo;</a>
                        </p>--><!-- /Callout Panel -->

                        <h3>Title Ipsum <small>This is a note.</small></h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                        <a class="btn">Click Me!</a>

                        <br/>
                        <br/>                           

                        <!-- social & contact -->
                        <table class="social" width="100%">
                            <tr>
                                <td>

                                    <!--- column 1 -->
                                    <table align="left" class="column">
                                        <tr>
                                            <td>                

                                                <h5 class="">Connect with Us:</h5>
                                                <p class=""><a href="#" class="soc-btn fb">Facebook</a> <a href="#" class="soc-btn tw">Twitter</a> <a href="#" class="soc-btn gp">Google+</a></p>

                                            </td>
                                        </tr>
                                    </table><!-- /column 1 -->  

                                    <!--- column 2 -->
                                    <table align="left" class="column"  width="100%">
                                        <tr>
                                            <td>                

                                                <h5 class="">Contact Info:</h5>                                             
                                                <p>Phone: <strong>408.341.0600</strong><br/>
                Email: <strong><a href="emailto:hseldon@trantor.com">hseldon@trantor.com</a></strong></p>

                                            </td>
                                        </tr>
                                    </table><!-- /column 2 -->

                                    <span class="clear"></span> 

                                </td>
                            </tr>
                        </table><!-- /social & contact -->

                    </td>
                </tr>
            </table>
            </div>

        </td>
        <td></td>
    </tr>
</table><!-- /BODY -->

<!-- FOOTER -->
<table class="footer-wrap"  width="100%">
    <tr>
        <td></td>
        <td class="container">

                <!-- content -->
                <div class="content">
                <table>
                <tr>
                    <td align="center">
                        <p>
                            <a href="#">Terms</a> |
                            <a href="#">Privacy</a> |
                            <a href="#"><unsubscribe>Unsubscribe</unsubscribe></a>
                        </p>
                    </td>
                </tr>
            </table>
                </div><!-- /content -->

        </td>
        <td></td>
    </tr>
</table><!-- /FOOTER -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:55:34.927

您的 600x300 图像可防止身体缩小。使此图像的宽度灵活，它将起作用。

将此添加到媒体查询块中。

```
.container img { width:100% !important; } 
```

它会使图像弯曲。

**您的旧媒体查询。**

```
@media screen and (max-width: 600px) {

    a[class="btn"] { display:block!important; margin-bottom:10px!important; background-image:none!important; margin-right:0!important;}

    div[class="column"] { width: auto!important; float:none!important;}

    table.social div[class="column"] {
        width:auto!important;
    }

} 
```

**具有灵活图像的媒体查询**

```
@media screen and (max-width: 600px) {

    a[class="btn"] { display:block!important; margin-bottom:10px!important; background-image:none!important; margin-right:0!important;}

    div[class="column"] { width: auto!important; float:none!important;}

    table.social div[class="column"] {
        width:auto!important;
    }

    /* flex the image */
    .container img {width:100% !important;}

} 
```

# mongodb - Mongo db selection

> ID：15359853
> 
> 赞同：0
> 
> 时间：2013-03-12T11:25:50.563
> 
> 标签：mongodb

I have a collection like the following

```
array(

'Pinned' => 
  array (
    '0' => 
    array (
      'PageId' => '511b6b482284a5481d000000',
      'PageTitle' => 'VOIP Business',
    ),
    '1' => 
    array (
      'PageId' => '511b6b482284a5481d000001',
      'PageTitle' => 'Dialers',
    ),
  ),
  'ReportAbuse' => 0,

) 
```

"Pinned" can contain multiple arrays inside it. I need find those documents that have

```
'PageId' => '511b6b482284a5481d000000' 
```

inside Pinned.

So i tried

```
'Pinned' => array(
      'PageId' => '511b6b482284a5481d000000'
) 
```

But i didn't work. I hope my question is clear :). Please help me if any one knows the answer. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:57:06.417

目前仅顶级数组支持查询和操作数组元素，嵌套数组不支持 - 请参阅[http://docs.mongodb.org/manual/reference/operator/positional/中的 $ position 运算符](http://docs.mongodb.org/manual/reference/operator/positional/)

这可能会在未来发生变化，请参阅[https://jira.mongodb.org/browse/SERVER-831](https://jira.mongodb.org/browse/SERVER-831)

同时，嵌套数组的查询和更新必须在客户端完成：

*   将文档读入变量
*   操作数组
*   更新文档，重写整个数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:44:54.200

You need your language's equivalent of :

```
find({'Pinned.PageId': '511b6b482284a5481d000000'}) 
```

Note that this only works for the top level array.

# android - Holoeverywhere 片段不显示

> ID：15359855
> 
> 赞同：0
> 
> 时间：2013-03-12T11:25:55.360
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock, android-holo-everywhere

我正在创建一个应用程序并偶然发现了一个问题。我的应用程序片段应在选择时显示文本，但事实并非如此。这是我的代码：

这个类是我的片段，它应该在选择时显示文本。

TestFragment.class：

```
public class TestFragment extends SherlockFragment {

public static final String EXTRA_TITLE = "title";

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    TextView txt = new TextView(inflater.getContext());
    txt.setGravity(Gravity.CENTER);
    txt.setText("Fragment");

    if (getArguments() != null && getArguments().containsKey(EXTRA_TITLE)) {
        txt.setText(getArguments().getString(EXTRA_TITLE));
    }
    return txt;
}

public static Bundle createBundle(String title) {
    Bundle bundle = new Bundle();
    bundle.putString(EXTRA_TITLE, title);
    return bundle;
} 
```

}

这是我的主要课程，从我的标签中添加。它扩展了我之前制作的 TabSwipeActivity。主类：

```
public class TaskMain extends TabSwipeActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    addTab("Urgent", TestFragment.class,
            TestFragment.createBundle("TestFragment"));
    addTab("Due", TestFragment.class,
            TestFragment.createBundle("Fragment 2"));
    addTab("Unimportant", TestFragment.class,
            TestFragment.createBundle("Fragment 3"));
    addTab("Shopping", TestFragment.class,
            TestFragment.createBundle("Fragment 4"));
    addTab("Notes", TestFragment.class,
            TestFragment.createBundle("Fragment 5"));

}

@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    super.onCreateOptionsMenu(menu);

    MenuInflater inflate = getSupportMenuInflater();
    inflate.inflate(R.menu.activity_task_main, menu);

    return true;
} 
```

}

这是我的主要活动扩展的 TabSwipeActivity。TabSwipeActivity.class：

```
public abstract class TabSwipeActivity extends SherlockFragmentActivity {

private ViewPager mViewPager;
private TabsAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    /*
     * Create the ViewPager and our custom adapter
     */
    mViewPager = new ViewPager(this);
    adapter = new TabsAdapter(this, mViewPager);
    mViewPager.setAdapter(adapter);
    mViewPager.setOnPageChangeListener(adapter);

    /*
     * We need to provide an ID for the ViewPager, otherwise we will get an
     * exception like:
     * 
     * java.lang.IllegalArgumentException: No view found for id 0xffffffff
     * for fragment TestFragment{40de5b90 #0 id=0xffffffff
     * android:switcher:-1:0} at
     * android.support.v4.app.FragmentManagerImpl.moveToState
     * (FragmentManager.java:864)
     * 
     * The ID 0x7F04FFF0 is large enough to probably never be used for
     * anything else
     */
    mViewPager.setId(0x7F04FFF0);

    super.onCreate(savedInstanceState);

    /*
     * Set the ViewPager as the content view
     */

    setContentView(mViewPager);
}

/**
 * Add a tab with a backing Fragment to the action bar
 * 
 * @param titleRes
 *            A string resource pointing to the title for the tab
 * @param fragmentClass
 *            The class of the Fragment to instantiate for this tab
 * @param args
 *            An optional Bundle to pass along to the Fragment (may be null)
 */
protected void addTab(int titleRes,
        Class<? extends SherlockFragment> fragmentClass, Bundle args) {
    adapter.addTab(getString(titleRes), fragmentClass, args);
}

/**
 * Add a tab with a backing Fragment to the action bar
 * 
 * @param titleRes
 *            A string to be used as the title for the tab
 * @param fragmentClass
 *            The class of the Fragment to instantiate for this tab
 * @param args
 *            An optional Bundle to pass along to the Fragment (may be null)
 */
protected void addTab(CharSequence title,
        Class<? extends SherlockFragment> fragmentClass, Bundle args) {
    adapter.addTab(title, fragmentClass, args);
}

private void setContent() {

setContentView(R.layout.activity_task_new);
}

private static class TabsAdapter extends FragmentPagerAdapter implements
        TabListener, ViewPager.OnPageChangeListener {

    private final SherlockFragmentActivity mActivity;
    private final ActionBar mActionBar;
    private final ViewPager mPager;

    /**
     * @param fm
     * @param fragments
     */
    public TabsAdapter(SherlockFragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        this.mActivity = activity;
        this.mActionBar = activity.getSupportActionBar();
        this.mPager = pager;

        mActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    }

    private static class TabInfo {
        public final Class<? extends SherlockFragment> fragmentClass;
        public final Bundle args;

        public TabInfo(Class<? extends SherlockFragment> fragmentClass,
                Bundle args) {
            this.fragmentClass = fragmentClass;
            this.args = args;
        }
    }

    private List<TabInfo> mTabs = new ArrayList<TabInfo>();

    public void addTab(CharSequence title,
            Class<? extends SherlockFragment> fragmentClass, Bundle args) {
        final TabInfo tabInfo = new TabInfo(fragmentClass, args);

        Tab tab = mActionBar.newTab();
        tab.setText(title);
        tab.setTabListener(this);
        tab.setTag(tabInfo);

        mTabs.add(tabInfo);

        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public SherlockFragment getItem(int position) {
        final TabInfo tabInfo = mTabs.get(position);
        return (SherlockFragment) SherlockFragment.instantiate(mActivity,
                tabInfo.fragmentClass.getName(), tabInfo.args);
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    public void onPageScrollStateChanged(int arg0) {
    }

    public void onPageScrolled(int arg0, float arg1, int arg2) {
    }

    public void onPageSelected(int position) {
        /*
         * Select tab when user swiped
         */
        mActionBar.setSelectedNavigationItem(position);

    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        /*
         * Slide to selected fragment when user selected tab
         */
        TabInfo tabInfo = (TabInfo) tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tabInfo) {
                mPager.setCurrentItem(i);
            }
        }

    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:44:59.103

> 扩展了 SherlockFragment

您应该从 org.holoeverywhere.app.Fragment 扩展

> 扩展 SherlockFragmentActivity

org.holoeverywhere.app.Activity

# nosql - HBase: Regarding schema design

> ID：15359856
> 
> 赞同：4
> 
> 时间：2013-03-12T11:26:00.207
> 
> 标签：nosql, schema, hbase

I was reading/studying about HBase and trying to create a Schema. I'm from RDBMS background and this is the first time trying a nosql db. I've a simple question about schema design:

Assume there are three tables => album, photo, comment

*   album <= Created by the user

*   photo <= Contains all photos uploaded to an album

*   comments <= Contains commenrs on an album or photo

    A photo should be fetched with all of comments under it. An album should be fetched with all the photos in it but not comments.

user is identified by the email. The schema that I came up with:

### tbl_user

```
email || info: {password : ..., name : ...} 
```

### album

```
<email>:album:<timestamp> || info {title:..., cover: photo-row-key} 
```

### photo

```
<album-row-key>:<timestamp> || info {caption:..., exif: ...} 
```

### comment

```
<album-row-key or photo-row-key> || comments {
    comment:<timestamp>: {user: <email>, text:...}
    comment:<timestamp>: {user: <email>, text:...}
    comment:<timestamp>: {user: <email>, text:...}
    ...
} 
```

*   Does this design look okay? I just want to know the modifications that should/must be done and why.
*   Should the photo-row-key not prepended with the album-row-key (might be to save space)?
*   Regarding **comment's** table, should a comment row-key be created like `<album-row-key or photo-row-key>:comment:<timestamp>`? As per above schema whenever a user creates a comment, I need to read comments column, update it with new comment and update the row with tha. Does it sound fine?

It'll be very helpful if you could share some link(s) which has/have examples of schemas that suit more for RDBMS :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:47:39.787

一种替代方法是将评论、照片和相册放在同一个表中 还将照片和照片评论放在一个列族中，将相册评论放在另一个列族中

*   相册行有密钥 email:album:0:0:timestamp 照片行有密钥
*   电子邮件：相册：照片：0：时间戳照片评论行键
*   电子邮件：专辑：照片：评论：时间戳专辑评论行键
*   电子邮件：专辑：评论：时间戳

然后，您可以根据需要在一次访问中获取数据。例如。：

*   一次按前缀扫描即可为您提供包含所有照片及其所有评论的相册
*   通过前缀和最后一个键进行一次扫描将为您提供包含所有照片但没有评论的相册
*   通过电子邮件进行一次扫描：第二列系列的相册将为您提供包含所有评论的相册
*   通过电子邮件扫描一次：album:photo 前缀将为您提供一张包含所有评论的照片
*   通过电子邮件进行一次扫描：包含所有列族的专辑将为您提供所有数据
*   通过电子邮件扫描 endkey by album.max：将为您提供用户的所有专辑
*   等等

# service-broker - No enabled application monitor is on behalf of queue XYZ

> ID：15359859
> 
> 赞同：1
> 
> 时间：2013-03-12T11:26:10.907
> 
> 标签：service-broker

I created a console application which will be used by "Service Broker External Activator" service. The configuration file in "C:\Program Files\Service Broker\External Activator\Config" has been changed, but it writes an exception to log file as bellow

**EXCEPTION ERROR = 32, No enabled application monitor is on behalf of queue**

Here is my configuration

```
<NotificationServiceList>
    <NotificationService name="ExternalActivatorService" id="100" enabled="true">
      <Description>My test notification service</Description>
      <ConnectionString>
        <!-- All connection string parameters except User Id and Password should be specificed here -->
        <Unencrypted>Data Source=localhost;Initial Catalog=Chapter4_ExternalActivation;Application Name=External Activator;Integrated Security=True;</Unencrypted>
      </ConnectionString>
    </NotificationService>
  </NotificationServiceList>
  <ApplicationServiceList>
        <ApplicationService name="ProcessingApplication" enabled="true">
      <OnNotification>
        <ServerName>localhost</ServerName>
        <DatabaseName>Chapter4_ExternalActivation</DatabaseName>
        <SchemaName>dbo</SchemaName>
        <QueueName>ExternalActivatorQueue</QueueName>
      </OnNotification>
      <LaunchInfo>
        <ImagePath>D:\Temp\ServiceBroker\9781590599990\Samples\Chapter4\02 ExternalProcessingApplication\ProcessingApplication\bin\Debug\ProcessingApplication.exe</ImagePath>
        <CmdLineArgs></CmdLineArgs>
        <WorkDir>D:\Temp\ServiceBroker\9781590599990\Samples\Chapter4\02 ExternalProcessingApplication\ProcessingApplication\bin\Debug</WorkDir>
      </LaunchInfo>
      <Concurrency min="1" max="1" />
    </ApplicationService>
  </ApplicationServiceList> 
```

**And here is the SQL**

```
CREATE DATABASE Chapter4_ExternalActivation
GO

ALTER DATABASE Chapter4_ExternalActivation
      SET ENABLE_BROKER;
GO

USE Chapter4_ExternalActivation
GO

--*********************************************
--*  Create the message type "RequestMessage"
--*********************************************
CREATE MESSAGE TYPE
[http://ssb.csharp.at/SSB_Book/c04/RequestMessage]
VALIDATION = WELL_FORMED_XML
GO

--*********************************************
--*  Create the message type "ResponseMessage"
--*********************************************
CREATE MESSAGE TYPE
[http://ssb.csharp.at/SSB_Book/c04/ResponseMessage]
VALIDATION = WELL_FORMED_XML
GO

--************************************************
--*  Create the contract "HelloWorldContract"
--************************************************
CREATE CONTRACT [http://ssb.csharp.at/SSB_Book/c04/HelloWorldContract]
(
    [http://ssb.csharp.at/SSB_Book/c04/RequestMessage] SENT BY INITIATOR,
    [http://ssb.csharp.at/SSB_Book/c04/ResponseMessage] SENT BY TARGET
)
GO

 --********************************************************
--*  Create the queues "InitiatorQueue" and "TargetQueue"
--*********************************************************
CREATE QUEUE InitiatorQueue
WITH STATUS = ON
GO

CREATE QUEUE TargetQueue
GO

 --**************************************************************
--*  Create the services "InitiatorService" and "TargetService"
--***************************************************************
CREATE SERVICE InitiatorService
ON QUEUE InitiatorQueue 
(
    [http://ssb.csharp.at/SSB_Book/c04/HelloWorldContract]
)
GO

CREATE SERVICE TargetService
ON QUEUE TargetQueue
(
    [http://ssb.csharp.at/SSB_Book/c04/HelloWorldContract]
)
GO

 --******************************************************************
--*  Deactivate the internal activation on the queue (if necessary)
--*******************************************************************
ALTER QUEUE TargetQueue
    WITH ACTIVATION (DROP)
GO

--*********************************************
--*  Create the event notification queue
--*********************************************
CREATE QUEUE ExternalActivatorQueue
GO

--*********************************************
--*  Create the event notification service
--*********************************************
CREATE SERVICE ExternalActivatorService
ON QUEUE ExternalActivatorQueue
(
    [http://schemas.microsoft.com/SQL/Notifications/PostEventNotification]
)
GO

--***********************************************************************
--*  Subscribe to the QUEUE_ACTIVATION event on the queue "TargetQueue"
--***********************************************************************
CREATE EVENT NOTIFICATION EventNotificationTargetQueue
    ON QUEUE TargetQueue
    FOR QUEUE_ACTIVATION
    TO SERVICE 'ExternalActivatorService', 'current database';
GO 
```

When I send a message to TargetService, new message arrives on ExternalActivatorQueue. When I start the "Service Broker External Activator" service, error appears. Any idea to find out the source of this problem?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T10:32:48.650

如果问题仍然存在，这可能会对您有所帮助。

如果所有 SSSB 对象和事件通知设置正确，则需要查看消息是如何推送到通知队列的。

以下是您必须使用并将其发送到通知队列的消息格式，

```
DECLARE @RequestMsg XML
SELECT @RequestMsg = N'<EVENT_INSTANCE>
   <EventType>QUEUE_ACTIVATION</EventType>
   <PostTime>' + CONVERT(CHAR(24),GETDATE(),126) + '</PostTime> 
   <SPID>' + CAST(@@SPID AS VARCHAR(9)) + '</SPID> 
   <ServerName>ServerName</ServerName>   -- use @@SERVERNAME to eliminate hard code 
   <LoginName></LoginName>    -- you can skip this element 
   <UserName></UserName>      -- you can skip this element 
   <DatabaseName>DatabaseName</DatabaseName> -- use DB_NAME() to eliminate hard code 
   <SchemaName>dbo</SchemaName>
   <ObjectName>NotifyQueue</ObjectName>
   <ObjectType>QUEUE</ObjectType>
</EVENT_INSTANCE>'; 
```

还要注意消息的每个部分中的值，它应该与 [EAService.config] 的配置值匹配，请参阅上面 XML 结构中的注释。

```
 <ApplicationService name="myMessageApp" enabled="true">
  <OnNotification>
    <ServerName>ServerName</ServerName>
    <DatabaseName>DatabaseName</DatabaseName>
    <SchemaName>dbo</SchemaName>
    <QueueName>NotifyQueue</QueueName>
  </OnNotification>
  <LaunchInfo> 
```

这样做的原因是，服务中有逻辑将 SSSB 消息值与 EAService.Config 的值匹配，成功匹配给定的应用程序正在执行。

如果您遇到同样的问题，希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-21T19:43:04.470

更可能的原因是您在 ServerName 元素中使用了“localhost”。我只是通过将 ServerName 更改为 localhost 在我的工作示例中复制了它。

ServerName 和 ConnectionString 的服务器必须是*实际的计算机名*，特别是机器名，也不能是 DNS 名。

如果将 ConnectionString 的服务器设为 localhost，则服务启动后将不会发生任何事情。您不会收到错误消息，但不会发生激活。

# asp.net - ASP.NET（WebForms 或 MVC）应用程序中的哪个代码组件为图像等网站资源提供服务？

> ID：15359862
> 
> 赞同：7
> 
> 时间：2013-03-12T11:26:13.640
> 
> 标签：asp.net, asp.net-mvc, http, caching, http-headers

当您的应用程序中有图像标签时，如下所示：

```
<img src = @Url.Content("~/foo/bar.jpg") /> 
```

或者像这样：

```
<asp:image src = "~/foo/bar.jpg" /> 
```

或者像这样：

```
<input type = "image" ...> 
```

如果这恰好是一个 ASP.NET 应用程序（我认为 Web 窗体或 MVC 与问题无关，因为提供图像的代码必须相同），哪个特定组件为图像请求提供服务？

它是 Web 服务器（IIS 或 Visual Studio 的内部 Web 服务器）还是微软编写的 ASP.NET HttpHandler。

我记得曾经有一个处理程序用于在 ASP.NET 2.0 中提供资源文件。那也是提供图像的吗？它叫什么？

**我为什么要问这个问题/我想做什么**

我有一个 ASP.NET MVC 应用程序，我想编写自己的自定义 HttpHandler 或 Controller 来提供图像等静态资产，以便它们被缓存。

我打算做的事情几乎与[http://blog.hompus.nl/2011/03/11/make-your-browser-cache-the-output-of-an-httphandler/](http://blog.hompus.nl/2011/03/11/make-your-browser-cache-the-output-of-an-httphandler/)和[http:// /archive.msdn.microsoft.com/ResourceCache](http://archive.msdn.microsoft.com/ResourceCache)

我想确保如果 Microsoft 已经编写了一个，我可能需要在响应中发送回 Http 标头时采取一些预防措施，以使 Microsoft 内置的 httpHandler 集的标头与我设置的标头不矛盾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:02:19.470

默认情况下，所有对 ASPX 页面的请求（包括其中的静态资源，如图像）都由 default 提供服务`HttpHandler`，它是[类](http://msdn.microsoft.com/en-us/library/system.web.ui.pagehandlerfactory.aspx)[的`PageHandlerFactory`](http://msdn.microsoft.com/en-us/library/system.web.ui.pagehandlerfactory.aspx)一个实例：

> 动态创建实例以处理对 ASP.NET 文件的请求。PageHandlerFactory 类是 ASP.NET 页面的默认处理程序工厂实现。

正如您从[MSDN 关于 HttpHandlers 和 HttpModules 的文章](http://msdn.microsoft.com/en-us/library/bb398986.aspx#Background)中看到的那样，主要的“内置”处理程序是那些用于

*   标准 ASP.NET 文件 (.aspx)，
*   网络服务 (.asmx),
*   通用的非 UI 处理程序 (.ashx)，以及
*   一种用于处理跟踪 (trace.axd)。

没有一个专门处理图像请求。所以你应该好好去=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:25:43.643

好的，在我看来，ASP.NET 不太关心任何静态资源，因此，它不会为任何这些资源向 IIS 注册 ISAPI 过滤器。

这意味着，作为想要为静态资源编写特定处理程序的开发人员，您几乎可以自由地做任何您想做的事情。

# html - IE 10 中的锚标记显示为空文本节点

> ID：15359863
> 
> 赞同：0
> 
> 时间：2013-03-12T11:26:16.870
> 
> 标签：html, text, internet-explorer-10

IE 10 中的锚标记显示为空文本节点，我在这里找到的解决方案是添加显示块和缩放 1，但这些都不起作用：

```
<ul style="list-style-position:outside;list-style-type:none;">
    <li><a href="http://google.com/" style="display:block;zoom:1;">Google</a></li> <!-- nothing is being displayed -->
    <li><a href="http://google.com/" style="display:block;zoom:1;"><b>Google</b></a></li> <!-- the link is being displayed as bold as aspected -->
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:17:13.103

肮脏的解决方法：

```
<meta http-equiv="X-UA-Compatible" content="IE=9"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T04:06:53.473

在锚标记的文本之后、结束 </a> 标记之前添加一个空格。

```
<ul style="list-style-position:outside;list-style-type:none;">
  <li><a href="http://google.com/" style="display:block;zoom:1;">Google </a></li> <!-- nothing is being displayed -->
  <li><a href="http://google.com/" style="display:block;zoom:1;"><b>Google</b> </a></li> <!-- the link is being displayed as bold as aspected -->
</ul> 
```

# gwt - 使用 GWT 创建圆形按钮

> ID：15359865
> 
> 赞同：0
> 
> 时间：2013-03-12T11:26:21.193
> 
> 标签：gwt

我已经按照 [gwt](https://stackoverflow.com/questions/1193249/imagebutton-in-gwt) 中的这篇 ImageButton 帖子的说明创建了我自己的圆形按钮，它在视觉上看起来还不错。我现在要做的是为这个新类添加点击处理程序。我该怎么办？我是否需要两个图像和标签的点击处理程序？然后我必须怎么做才能使用 CSS 配置这个组件？

到目前为止，这是我的代码。

```
 public class RoundButton extends Composite
    {
        protected final Label textHolder = new Label("helasdfasdf");
        protected final Image leftSide = new Image( "/icons/left.ico" );
        protected final Image rightSide = new Image( "/icons/right.ico" );
        protected final HorizontalPanel contentTable;

        public RoundButton()
        {
            contentTable = new HorizontalPanel();
            initWidget( contentTable );
            contentTable.add(leftSide);
            contentTable.add(textHolder);
            contentTable.add(rightSide);
        }

        public void setText( String text )
        {
            textHolder.setText(text);
        }   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:39:39.727

为了使您的 RoundButton 更加标准化，我将实现`com.google.gwt.event.dom.client.HasClickHandlers`界面并将单击事件添加到整个组件（即包装器小部件）：

```
public class RoundButton extends Composite implemens HasClickHandlers
{
    protected final Label textHolder = new Label("helasdfasdf");
    protected final Image leftSide = new Image( "/icons/left.ico" );
    protected final Image rightSide = new Image( "/icons/right.ico" );
    protected final HorizontalPanel contentTable;

    public RoundButton()
    {
        contentTable = new HorizontalPanel();
        initWidget( contentTable );
        contentTable.add(leftSide);
        contentTable.add(textHolder);
        contentTable.add(rightSide);
    }

    public void setText( String text )
    {
        textHolder.setText(text);
    }   

    public HandlerRegistration addClickHandler(ClickHandler handler)
    {
        return addDomHandler(handler, ClickEvent.getType());         
    }  

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:39:30.307

您可以像这样捕捉复合材料上的点击：

```
public RoundButton()
{
    ...
    sinkEvents(Event.ONCLICK);
}

@Override
public void onBrowserEvent(Event event)
{
    super.onBrowserEvent(event);
    if (DOM.eventGetType(event) == Event.ONCLICK)
    {
        ...
    }
} 
```

# php - 可恢复的错误：方法 ::__toString() 必须返回一个字符串值

> ID：15359867
> 
> 赞同：0
> 
> 时间：2013-03-12T11:26:25.823
> 
> 标签：php, magento

当我加载产品页面时，它在系统日志文件中显示错误，如下所示..

```
2013-03-12T10:28:56+00:00 ERR (3): Recoverable Error: Method SM_Vendors_Model_Mysql4_Vendor_Collection::__toString() must return a string value  in C:\xampp\htdocs\magento\app\code\local\SM\Vendors\Block\Adminhtml\Catalog\Product\Render\Vendor.php on line 21 
```

我的代码就像..

app\code\local\SM\Vendors\Block\Adminhtml\Catalog\Product\Render\vendor.php

```
class SM_Vendors_Block_Adminhtml_Catalog_Product_Render_Vendor extends Varien_Data_Form_Element_Abstract
{
 public function getElementHtml()
 {
 $vendorCollection = $this->getVendorCollection(); //line#21
 }

 public function getVendorCollection()
 {
  $collection = Mage::getResourceModel('smvendors/vendor_collection')->__toString();
  return $collection;
 }
} 
```

app\code\local\SM\Vendors\Model\Mysql4\Vendor\Collection.php

```
class SM_Vendors_Model_Mysql4_Vendor_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract 
{
 public function _construct() 
 {
  parent::_construct();
  $this->_init('smvendors/vendor');
 }
 public function __toString()
 {
    return $this->_init('smvendors/vendor');
 }
} 
```

我想解决magento系统日志文件中这种类型的错误显示。如果您知道，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:30:45.357

确保 $this->_init('smvendors/vendor'); 返回一个字符串。或在 __toString 中返回其他字符串：

```
public function __toString(){
    return $this->_init('smvendors/vendor');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:31:12.080

您的代码中似乎对`__toString()`方法的使用不正确。
看来这里这个方法是用来获取集合的，而不是字符串。

```
public function getVendorCollection()
 {
  $collection = Mage::getResourceModel('smvendors/vendor_collection')->__toString();
  return $collection;
 } 
```

这是不正确的，也是一个非常糟糕的主意。
你需要重构你的代码，否则你永远不会摆脱这个警告。

**该怎么办**

例如，您可以执行以下操作.. 将`__toString`方法重命名为`getCollection`并将使用的地方替换`_toString`为`getCollection`.
替换直到日志中的消息不会消失。

在此处阅读有关您的问题的更多信息：[http ://www.php.net/manual/en/language.oop5.magic.php#object.tostring](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)

**所以这里是固定代码：**

```
class SM_Vendors_Model_Mysql4_Vendor_Collection extends Mage_Core_Model_Mysql4_Collection_Abstract 
{
 public function _construct() 
 {
  parent::_construct();
  $this->_init('smvendors/vendor');
 }
 public function getCollection()
 {
    return $this->_init('smvendors/vendor');
 }

 public function __toString()
 {
    return $this->_init('smvendors/vendor');
 }

} 
```

还有二等...

```
class SM_Vendors_Block_Adminhtml_Catalog_Product_Render_Vendor extends Varien_Data_Form_Element_Abstract
{
 public function getElementHtml()
 {
 $vendorCollection = $this->getVendorCollection(); //line#21
 }

 public function getVendorCollection()
 {
  $collection = Mage::getResourceModel('smvendors/vendor_collection')->getCollection();
  return $collection;
 }
} 
```

# c# - 无法导航到“IF”

> ID：15359868
> 
> 赞同：0
> 
> 时间：2013-03-12T11:26:27.957
> 
> 标签：c#, sql, c#-3.0, windows-forms-designer

我正在使用此代码添加和编辑员工。首先，我通过验证进行检查，然后将图像添加到数据库中，如果 U 在运行时编辑意味着显示错误“**无法导航到 'IF'** ”。编码有问题吗？

```
private void btn_submit_Click(object sender, EventArgs e)
{
    if (employeevalidate() == true)
    {
        toproperties();
        if (cpbempadd.employeesave(cpemp) == true)
        {
            if (saveImageInDataBase(cpemp.Empid) == true)
            {
                MessageBox.Show("Employee Details are Saved Sucessfully....");
                grid();
                pnl_addedit.Visible = false;
                pnl_grid.Visible = true;
            }
        }
    }
    else
    {
        MessageBox.Show("Error in Saving Employee Details... ");
    }
} 
```

验证编码是：

```
public  bool employeevalidate()
{
    if (cpbempadd.textboxnull(txt_empid) == false) { return false; }
    if (cpbempadd.textboxnull(txt_empname) == false) { return false; }
    if (cpbempadd.textboxnull(txt_mobno) == false) { return false; }
    if (cpbempadd.textboxnull(txt_proofdetails) == false) { return false; }
    if (cpbempadd.textboxnull(txt_upload) == false) { return false; }
    if (txt_add2.Text == string.Empty) { txt_add2.Text = "-"; }
    if (txt_add3.Text == string.Empty) { txt_add3.Text = "-"; }
    if (txt_bg.Text == string.Empty) { txt_bg.Text = "-"; }
    if (txt_email.Text == string.Empty) { txt_email.Text = "-"; }
    if (txt_pf.Text == string.Empty) { txt_pf.Text = "-"; }
    if (txt_status.Text == string.Empty) { txt_status.Text = "-"; }
    return true; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:23:36.277

问题已解决。错误出在 SQL 语法中。非常感谢

# jquery - 在可搜索网格中排序的 Div 元素

> ID：15359871
> 
> 赞同：0
> 
> 时间：2013-03-12T11:26:48.460
> 
> 标签：jquery, datagrid

我想做以下事情，但不知道如何开始，因为我对网络编程很陌生：

我有一些对象存储在数据库中，基本上`css`是在 div 元素之间存储/显示的框。这些框是根据数据库中的一些数据创建的。现在我想在可搜索和可滚动的网格中显示这些框。每行必须有 4 个盒子。当苹果列出您可以购买的所有产品时，就像这样：[Apple](http://store.apple.com/us/browse/home/shop_ipad/ipad_accessories/cases)

刚刚固定到最大尺寸并带有插入滚动条。我希望我能以一种可以理解的方式描述我的问题，你们可以给我一个提示如何解决这个问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:53:27.903

好的，我用css解决了它。我创建了一个 mainGrid，我可以在 jquery 的帮助下动态添加新的 div。添加到添加的 div 中，我在 css 代码中添加了这个：float:left。之后我确实创建了一个自定义搜索功能。

# javascript - 使用 jQuery 在 div 中加载需要 javascript 的页面

> ID：15359873
> 
> 赞同：1
> 
> 时间：2013-03-12T11:26:51.600
> 
> 标签：javascript, jquery

我创建了一个简单的函数来将浮动的可调整大小的内容附加到页面：

```
function CreateFloatingWindow(id) {
        var win = document.createElement('div');
        $(win).attr('id', id);
        $(win).height(100).width(300).css('background-color', 'red');
        $(win).resizable().draggable();
        $(win).appendTo($('body'));
        $(win).load('http://www.fantasy-mmorpg.com/fowiki/#1419~2');
}

CreateFloatingWindow('first'); 
```

代码可以正常工作，除非加载的页面内部有某种 javascript，在这种情况下，结果是这样的“请激活 javascript” [消息](http://imgur.com/pP38Sqh)

我认为消息是由目标页面本身处理的，但我无权访问它的源。

有没有办法让目标页面明白我启用了我的 javascript，即使它是通过 jQuery 加载到 div 中的？

注意上面的代码需要 jQuery 和 jQuery-UI 才能正常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:11:46.693

我一直在研究，有几点需要注意：

[首先， jQuery .load() 文档](http://api.jquery.com/load/)中的这个子句可能会有所启发：

> **脚本执行**
> 
> `.load()`使用不带后缀选择器表达式的 URL调用时，会`.html()`在删除脚本之前传递内容。这会在脚本块被丢弃之前执行它们。但是，如果 `.load()`调用附加到 URL 的选择器表达式，则脚本会在 DOM 更新之前被剥离，***因此不会被执行***。两种情况的示例如下所示：
> 
> 在这里，作为文档的一部分加载到#a 中的任何 JavaScript 都将成功执行。
> 
> 1`$('#a').load('article.html');`
> 
> 但是，在以下情况下，正在加载到 #b 的文档中的脚本块被剥离并且不被执行：
> 
> 1`$('#b').load('article.html #target');`

检查不同的浏览器是否有消息“请激活 JavaScript”，我不确定这是在脚本级别还是浏览器级别。但我很确定“*请启用 JavaScript* ”可能是[HTML 后备`<noscript>`](https://developer.mozilla.org/en-US/docs/HTML/Element/noscript)- 如果它根本不执行任何 JavaScript。

# mysql - JOIN 后选择 DISTINCT 值（asp 经典）

> ID：15359879
> 
> 赞同：0
> 
> 时间：2013-03-12T11:27:13.120
> 
> 标签：mysql, sql, join, asp-classic, distinct

我正在尝试从 table 中选择 distinct(tr.item_id) `term_relationships`。如果帖子与许多标签相关，我想避免两次列出帖子。

有人能指出我正确的方向吗？

查询：

```
tag_inject = "tr.taxonomy_id = 94 or tr.taxonomy_id = 92 or tr.taxonomy_id = 93"

SELECT * FROM term_relationships tr" + _
" INNER JOIN term_taxonomy tax ON tr.taxonomy_id = tax.taxonomy_id" + _
" INNER JOIN post po ON tr.item_id = po.post_id" + _
" where tr.cpa_id = " & cpa_id & " and (" & tag_inject & ")" + _
" and po.cpa_id = " & cpa_id & " and po.post_status = 1" + _
" order by po.post_start_date desc limit " & amount_1 
```

* * *

## 我在这里回答，因为评论字段很小，我不想等 6 个小时

多谢你们，

我试图在一个查询中完成整个事情，但是当我需要不同的 item_id 时，我认为这是不可能的？

所以我决定在得到不同的项目列表后，用子查询来获取帖子数据。

有点像这样：

```
sql_tags = "SELECT distinct tr.item_id" + _
" FROM term_relationships tr" + _
" INNER JOIN term_taxonomy tax ON tr.taxonomy_id = tax.taxonomy_id" + _
" INNER JOIN post po ON tr.item_id = po.post_id" + _
" where tr.cpa_id = " & clng(cpa_id) & " and (" & tag_inject & ")" + _
" and po.cpa_id = " & clng(cpa_id) & " and po.post_status = 1" + _
" order by po.post_start_date desc limit " & clng(content_amount_1)
set rs_plist = conn.execute(sql_tags) 
```

接着..

```
while not rs_plist.eof 

get_item_id = rs_plist("item_id")

sql = "select rec_id, post_id, post_title, post_line_desc, post_image_1, post_image_1_width from " & app_database & ".post" + _
" where cpa_id = " & clng(cpa_id) & " and post_id = " & get_item_id
set rs_post = conn.execute(sql) 
```

..等等..

有没有更好的选择，或者这是这样做的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:37:51.783

嗨，用于选择不同记录的 Sql 查询。如果您只想将输出作为与表 term_relationships 不同的 term_id 输出，您可以编写以下查询

```
SELECT DISTINCT term_id FROM term_relationships 
```

或者

```
SELECT term_id FROM term_relationships GROUP BY term_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:37:37.067

您应该指定要检索的字段列表，不能使用`DISTINCT`关键字 with `*`。

你应该使用这样的东西来获得唯一的 post_id

```
tag_inject = "tr.taxonomy_id = 94 or tr.taxonomy_id = 92 or tr.taxonomy_id = 93"

SELECT DISTINCT po.post_id FROM term_relationships tr" + _
" INNER JOIN term_taxonomy tax ON tr.taxonomy_id = tax.taxonomy_id" + _
" INNER JOIN post po ON tr.item_id = po.post_id" + _
" where tr.cpa_id = " & cpa_id & " and (" & tag_inject & ")" + _
" and po.cpa_id = " & cpa_id & " and po.post_status = 1" + _
" order by po.post_start_date desc limit " & amount_1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:37:59.880

更具体地使用您的字段名称 - 使用 * 在技术上是不好的做法。为此，您需要删除指定标签名称的字段，并仅将它们包含在您的`WHERE`子句中。这种方式`DISTINCT`实际上会奏效。

# javascript - Javascript查询字符串代码问题

> ID：15359884
> 
> 赞同：0
> 
> 时间：2013-03-12T11:27:27.213
> 
> 标签：javascript

我正在编写一些javascript（不是jquery，只是普通的javascript）来操作查询字符串。

我目前有以下内容：

```
// no viewid in querystring so append as new
if (newUrl.indexOf("viewid") == -1) {
    newUrl += "?viewid=" + viewId;
}
else if (newUrl.indexOf("viewid") > -1) // there is a view id or another key e.g. there is a linkid
{
    newUrl = newUrl.replace(/viewid=\d*/i, "viewid=" + viewId);
} 
```

因此，它将 viewid 作为新的查询字符串键附加，否则将附加它 (&)。

我需要做的是检查 URL 中是否有查询字符串值（任何，例如“blah”），如果是，则附加`&viewid=(number)`.

如果下拉列表中的选择（调用此 javascript）发生更改，则更改 viewid（但不要附加新的`viewid`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:48:48.600

您可以使用`window.location.search`仅获取查询字符串。

然后，您可以使用`split('&')`来获取一组单独的`key=value`对。

然后您可以将每对（字符串）拆分为正确的对象。

然后您可以找到该`viewid`值，更改它并重建查询字符串。

这里的示例代码（[http://jsfiddle.net/tMBpM/](http://jsfiddle.net/tMBpM/)）：

```
var locationHost = 'http://wwwdomain.com';
var locationPath = '/something';
var locationSearch = '?test=1&viewid=2';

var searches = locationSearch.replace('?', '').split('&');

for (var i in searches) {
    searches[i] = searches[i].split('=');
}

for (var j in searches) {
    if (searches[j][0] == 'viewid') {
        //we search for viewid
        console.log('old VIEWID =', searches[j][1]);
        //if we find one then we update it
        searches[j][1] = 5;
    }
}
locationSearch = "?";
for (var k in searches) {
    var separator = k == 0 ? "" : "&";
    locationSearch += separator + searches[k][0] + "=" + searches[k][1];
}

console.log(locationHost + locationPath + locationSearch);
//for production use window.location.host instead of locationHost
//and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T09:20:16.687

[您可以使用这个名为Query String Manager](http://npmjs.com/package/qsm)的漂亮小程序包 ，并像这样使用它：

```
var qsm = require('qsm');
newUrl = qsm.add(newUrl, { viewId: 1 }); 
```

如果没有其他查询字符串，这将创建您的 viewId=1，如果有其他查询字符串，则附加它。

# c# - VS 2012“添加服务引用”为一些共享程序集生成部分类

> ID：15359886
> 
> 赞同：0
> 
> 时间：2013-03-12T11:27:40.203
> 
> 标签：c#, wcf, visual-studio, visual-studio-2012, datacontract

这个问题可能看起来很熟悉，但我与那些已经在这里和互联网上回答过的人一起工作，但没有找到答案：

**编辑** 目前，服务参考再次正常工作，但我仍在寻找长期解决方案。

在与 WCF Web 服务通信的 Windows Phone 应用程序上工作时，我注意到有时在 VS 2012 中的“添加服务引用”选项在 Reference.cs 中生成部分类，即使原始类位于由客户和服务通过项目参考。这似乎每隔几次服务再次发布或客户端编译时随机发生。可以想象，这会让很多“无法隐式转换类型”错误。大多数时候我只是在玩一些选项，再次删除和添加服务引用，重新启动 VS 等等，希望一些神秘的魔法会发生，迟早会发生。但这不是一种让我满意或我想永远使用的方式。尤其是昨天问题又出现了，一直到现在，奥术魔法都没有发生。所以这是我到目前为止所尝试的：

1.  使用不同的选项和名称再次删除和添加服务引用（如共享所有程序集、共享指定程序集......）
2.  在有和没有管理员权限的情况下重新启动 VS
3.  从共享程序集中删除导致问题的整个类并再次添加它（在两者之间编译和发布）
4.  查看 WCFTestClient 中与 VS 生成的命名空间不同的命名空间
5.  以上所有在不同的机器上

我还在这里仔细研究了[这个](https://stackoverflow.com/questions/8286775/wcf-common-types-not-reused)问题和其他类似问题。

尽管我学到了很多东西，但这些都没有让我能够自己解决问题。现在我正在使用 SVCUtil 生成代理类，但由于我对整个 WCF-Stuff 还很陌生，所以这还没有成功。如果我真的很感激

1.  有人能够启发我究竟是什么让“添加服务引用”选项生成那些不需要的部分类以及如何避免它。
2.  提供了有关如何正确使用 SVCUtil 工具来生成代理类并在 VS 项目中重用它的描述
3.  有一种方法可以避免整个“从元数据生成代码”，我的意思是，我可以访问这两种实现

我真的很想在 VS 中解决这个问题，但随着越来越绝望，我愿意尝试做很多工作，如果这个问题以后不再发生的话。目前我正在研究第二种可能的解决方案。考虑到第三个，我正在阅读[这篇文章](http://www.netfxharmonics.com/2008/11/understanding-wcf-services-in-silverlight-2)，但在尝试之前，我想在这里提出第二个意见，这是否是解决我的问题的好方法，也许可以看看最近一篇涵盖该主题的文章。

对不起，文字墙，我已经在这方面工作了很长一段时间，而且知识很少，而且经过大量的尝试，得到了很多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:58:52.813

尝试取消选中“在引用的程序集中重用类型”以查看是否有帮助。

![尝试取消选中](../Images/544ec6397b4b724f5fa57c17d36ca556.png)

# c# - C#中的日期时间添加天数

> ID：15359887
> 
> 赞同：79
> 
> 时间：2013-03-12T11:27:40.457
> 
> 标签：c#, date, c#-4.0, datetime, add

我想在某个日期添加天数。我有这样的代码：

```
DateTime endDate = Convert.ToDateTime(this.txtStartDate.Text); 
Int64 addedDays = Convert.ToInt64(txtDaysSupp.Text); 
endDate.AddDays(addedDays); 
DateTime end = endDate; 
this.txtEndDate.Text = end.ToShortDateString(); 
```

但是这段代码不起作用，天数不加！我在做什么愚蠢的错误？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-03-12T11:30:34.333

日期时间是不可变的。这意味着您不能更改它的状态，并且必须将操作的结果分配给变量。

```
endDate = endDate.AddDays(addedDays); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-12T11:28:35.967

您需要捕获返回值。

[DateTime.AddDays](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)方法返回一个对象，该对象的值是实例的日期和时间与相加值的总和。

```
endDate = endDate.AddDays(addedDays); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-12T11:28:46.020

这是因为该`AddDays()`方法返回一个新`DateTime`的，您没有在任何地方分配或使用它。

使用示例：

```
DateTime newDate = endDate.AddDays(2); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-12-19T10:25:31.060

您可以将日期添加到这样的日期：

```
// add days to current **DateTime**
var addedDateTime = DateTime.Now.AddDays(10);

// add days to current **Date**
var addedDate = DateTime.Now.Date.AddDays(10);

// add days to any DateTime variable
var addedDateTime = anyDate.AddDay(10); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-12T11:33:55.587

将 enddate 分配给某个日期变量，因为`AddDays`方法返回新的 Datetime 作为结果。

```
Datetime somedate=endDate.AddDays(2); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-05T16:00:27.417

用这个：

```
DateTime dateTime =  DateTime.Now;
DateTime? newDateTime = null;
TimeSpan numberOfDays = new TimeSpan(2, 0, 0, 0, 0);
newDateTime = dateTime.Add(numberOfDays); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-12T11:30:15.450

你为什么用`Int64`？`AddDays`要求`double`添加一个 - 值。然后你需要使用`AddDays.`See [here](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)的返回值。

# c# - 用一个黑斜杠替换双反斜杠不起作用

> ID：15359888
> 
> 赞同：1
> 
> 时间：2013-03-12T11:27:41.147
> 
> 标签：c#, .net, xml, linq-to-xml

我正忙着创建一个`XDocument`对象。在其中 1 个元素中，我需要添加域名和服务帐户。服务帐户如下：

```
MyDomainName\\MyServiceAccount 
```

我需要标签看起来像：

```
<ChangeRunAsName>MyDomainName\MyServiceAccount</ChangeRunAsName> 
```

不管我如何尝试用 替换`\\`，`\`它仍然是`\\`.

这是我目前拥有的：

```
XDocument xDocument = new XDocument(
     new XDeclaration("1.0", "utf-8", null),
     new XElement("MyAppsTable",
          myApplications.Select(component => new XElement("MyApps",
               new XElement("ChangeResult", string.Empty),
               new XElement("ChangeRunAsName", serviceAccount.DomainServiceAccount.Replace("\\\\", "\\")
          ))
     )
); 
```

myApplications 和 serviceAccount 输入参数如下所示：

```
IEnumerable<MyApplication> myApplications
ServiceAccount serviceAccount 
```

我尝试了以下方法：

```
serviceAccount.DomainServiceAccount.Replace("\\\\", "\\")
serviceAccount.DomainServiceAccount.Replace(@"\\", @"\") 
```

...它仍然是：

```
<ChangeRunAsName>MyDomainName\\MyServiceAccount</ChangeRunAsName> 
```

我不知道该怎么办了。

我在上面的代码之后有这个：

```
string xml = xDocument.ToString(); 
```

调试时，我查看 xml 的内容，然后看到`\`和`\\`. 我需要将此 xml 字符串传递给另一个方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:19:05.897

You are correctly replacing the backslashes.

However, when you view the results in the Visual Studio Debugger, it is escaping the backslashes (adding extra backslashes) which is giving you the impression that it didn't work.

To see the *actual* string in the debugger, you must use the "Text Visualizer".

To do so from the "Autos and locals" display: Look closely to the right of the displayed string and you'll see a little magnifying glass. Select the little drop arrow next to it then click "Text Visualizer". This will display the text *without* additional backslashes.

You can also do this if you view the variable from Quickwatch (where you right-click a variable and select "Quickwatch"). The same little magnifying glass icon with a drop arrow next to it will appear, and you can click the drop arrow and select "Text Visualizer".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:05:11.750

我准备了以下示例。请将您的代码的调试值与我提供的进行比较。默认情况下，域名以 XML 格式保存，正如您所希望的**“域\用户名”**格式。

```
XDocument xdoc = new XDocument();
xdoc.Add(new XElement("user",System.Security.Principal.WindowsIdentity.GetCurrent().Name));
xdoc.Save(@"d:\test.xml",SaveOptions.None); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:05:32.160

我认为问题在于 DomainServiceAccount 是如何实现的。因为您没有发布此详细信息，所以我做了一些假设，并将缺少的类定义如下

```
class MyApplication { public ServiceAccount component { get; set; } }
class ServiceAccount { public string DomainServiceAccount { get; set; } } 
```

然后我在 LinqPad 中创建了以下代码：

```
static void Main()
{
    IEnumerable<MyApplication> myApplications=
        new System.Collections.Generic.List<MyApplication>();
    ServiceAccount serviceAccount=new ServiceAccount();
    serviceAccount.DomainServiceAccount=@"test\\account";
    ((List<MyApplication>)myApplications).Add(new MyApplication() { 
        component=serviceAccount });
    XDocument xDocument = new XDocument(
        new XDeclaration("1.0", "utf-8", null),
        new XElement("MyAppsTable",
                myApplications.Select(component => new XElement("MyApps",
                    new XElement("ChangeResult", string.Empty),
                    new XElement("ChangeRunAsName", 
                        serviceAccount.DomainServiceAccount.Replace("\\\\", "\\"))
                    )
                )
        )
    );
    xDocument.Dump();   
} 
```

这会产生以下输出：

```
<MyAppsTable>
  <MyApps>
    <ChangeResult></ChangeResult>
    <ChangeRunAsName>test\account</ChangeRunAsName>
  </MyApps>
</MyAppsTable> 
```

如您所见，`\`您需要的只有一个。你可以在这里找到**LinqPad**：[下载链接](http://www.linqpad.net/)（如果你想在我使用过的相同环境中试用它，在 LinqPad 中试用代码片段通常比在 Visual Studio 中更快，因为你不需要创建项目第一的）。

**更新：**我也使用**Visual Studio 2010 Ultimate**进行了尝试，看看是否有任何差异。所以我创建了一个控制台应用程序，将`xDocument.Dump();`语句替换为

```
string xml = xDocument.ToString(); 
```

并在那里创建了一个断点 - 正如你所做的那样。当断点被击中时，我在 XML 可视化器中查看了 xml 字符串，并得到了与在 LinqPad 中相同的结果（如上所示）。文本可视化器显示了相同的结果（只有一个反斜杠）。

# ruby-on-rails - ：所选值在页面提交中重置

> ID：15359896
> 
> 赞同：2
> 
> 时间：2013-03-12T11:27:52.237
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

下拉列表中的选定值正在页面提交中重置。这是正在使用的代码

```
<%=select_tag 'num_id', options_for_select(@numbers.collect{ |t| [t.firstno]}),:prompt => "Select"%> 
```

我们如何在 ruby​​ on rails 的 select_tag 中设置选定的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:30:17.020

您可以传递另一个参数来`options_for_select`设置选定的选项

```
<%= select_tag 'num_id', options_for_select(@numbers.map(&:firstno), params[:num_id]), prompt: 'Select' %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:40:23.853

**select_tag 选定值 -**

```
options_for_select(@options, @selected_val) 
```

例子：

```
 options_for_select(1..8, 5)  # creates options from range 1..8, with 5 as selected by default. 
```

# php - 在 PHP 中更新表和插入表问题

> ID：15359898
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:27:55.100
> 
> 标签：php, insert

如果单击添加链接，则必须在表格中输入数据，并且单击编辑链接时必须更新现有数据。

$_POST 在任一条件下接收数据。但是根据天气，它应该执行编辑（更新）或添加（插入）我的查询。

我很困惑我应该怎么做。

这是代码的一部分。（目前 EDIT 也运行插入查询，因为它总是在 else 部分）

```
if ($count==0)
    {
        if(mysql_query('SELECT SRNO from names where SRNO='.$SRNO) === true)

            //if($addval == 1)
            {
             mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');    
                     $addval=1;
            }
        else
           //if ($addval == 1)
             {
             mysql_query("INSERT INTO names (fname,lname,phone,email,comments,address) VALUES ('$fname', '$lname','$phone','$email','$comments','$address')");
             }
             header('Location:'.$page);
             }

       } 
```

完整的代码是

```
<!DOCTYPE html>
<html>
    <head>
        <title>List of users</title>
    </head>
<body>
    <?php
        $page='index.php';  
        $addval=6;

        mysql_connect("localhost","root","") or die (mysql_error());
        mysql_select_db("list") or die (mysql_error());

        if (empty($_POST) === false)
        {
            $count=0;
            $fname= $_POST['fname'];
            $lname= $_POST['lname'];
            $srno=  $_POST['SRNO'];
            $address=$_POST['address'];
            $comments=$_POST['comments'];
            $email=$_POST['email'];
            $phone=$_POST['phone'];

                if (empty($lname) === true || empty($fname) === true || empty($address) === true || empty($comments) === true || empty($email) === true || empty($phone) === true) 
                {
                    echo '<h3>All fields are mandatory</h3>';

                }
                else
                {
                        if (filter_var($email,FILTER_VALIDATE_EMAIL) === false)
                        {
                            echo '<h3>This is not a valid e-mail address.</h3><br />';
                            $count=$count+1;
                        }
                        if (ctype_alpha($fname) === false || ctype_alpha($lname) === false)
                        {
                            echo '<h3>Name should contain character only!</h3><br />';
                            $count=$count+1;
                        }
                        if( !is_numeric($phone) ) 
                        {
                                echo '<h3>Please enter a valid phone number</h3><br />';
                                $count=$count+1;
                        }
                        if ($count==0)
                        {
                            if(mysql_query('SELECT SRNO from names where SRNO='.$SRNO) === true)

                            //if($addval == 1)
                            {
                                mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');   
                                $addval=1;
                            }
                            else
                            //if ($addval == 1)
                            {
                                mysql_query("INSERT INTO names (fname,lname,phone,email,comments,address) VALUES ('$fname', '$lname','$phone','$email','$comments','$address')");
                            }
                            header('Location:'.$page);
                        }

                }
        }

        if(isset($_GET['delete']))
        {

            mysql_query('DELETE from names where SRNO='.mysql_real_escape_string((int)$_GET['delete']));
            header('Location:'.$page);
        }

        if(isset($_GET['edit']))
        {
            $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));

            echo '<table border=0>';
            while ($get_row=mysql_fetch_assoc($getedit))
                {
                    echo '<form method="POST" action="">';

                    echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
                    echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
                    echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
                    echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
                    echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
                    echo '<tr><td>Address:</td><td><textarea name="address" rows=4>'.$get_row['address'].'</textarea></td></tr>';
                    echo '<tr><td>Comments:</td><td><textarea name="comments" rows=4>'.$get_row['comments'].'</textarea></td></tr>';
                    echo '<tr><td><input type="submit" name="submit" value="save"></td><td><a href="index.php">Cancel</a></td></tr>';
                    echo '</form>';                                 
                }
            echo '</table>';

        }

        if(isset($_GET['add']))
        {
            echo '<table border=0>';

                    echo '<form method="POST" action="">';

                    echo '<tr><td>Sr.No:</td><td><input type="text"  name="SRNO" readonly="readonly"></td></tr>';
                    echo '<tr><td>First Name:</td><td><input type="text"  name="fname"></td></tr>';
                    echo '<tr><td>Last Name:</td><td><input type="text"  name="lname"></td></tr>';
                    echo '<tr><td>Phone No:</td><td><input type="text"  name="phone"></td></tr>';
                    echo '<tr><td>E-mail address:</td><td><input type="text"  name="email"</td></tr>';
                    echo '<tr><td>Address:</td><td><textarea name="address" rows=4></textarea></td></tr>';
                    echo '<tr><td>Comments:</td><td><textarea name="comments" rows=4></textarea></td></tr>';
                    echo '<tr><td><input type="submit" name="submit" value="save"></td><td><a href="index.php">Cancel</a></td></tr>';
                    echo '</form>';                                 

            echo '</table>';

        }

        echo '<a href=index.php?add=add>Add new entry...</a>';

        $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

        if (mysql_num_rows($get)==0)
        {
            echo 'There are no entries';
        }
            else
        {
            echo '<table border=0 cellspacing=25 cellpadding=1>';
            echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th><th>Delete!</th></tr>';      
            while($get_row=mysql_fetch_assoc($get))
                {
                    echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td><td><a href="index.php?delete='.$get_row['SRNO'].'">Delete</a></td></tr>';

                }
            echo '</table>';
        }       
    ?>

</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:34:33.137

```
if (mysql_query('SELECT SRNO from names where SRNO='.$SRNO) === true) 
```

是检查数据库值的错误方法。
请阅读[mysql_query()](http://php.net/mysql_query)的手册条目以查看实际返回此函数的内容

更不用说您的代码对 SQL 注入开放

此外，您必须打开错误报告，以便通知变量名称中的所有拼写错误：

```
error_reporting(E_ALL); 
```

在所有脚本的顶部

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T11:40:22.970

我试图修改代码...希望这有帮助..请尝试

```
 <!DOCTYPE html>
<html>

<head>
    <title>List of users</title>
  </head>
<body>

   <?php
       $page='index.php';  
       $addval=6;

    mysql_connect("localhost","root","welcome") or die (mysql_error());
    //mysql_select_db("list") or die (mysql_error());

    if (empty($_POST) === false)
    {
        $count=0;
        $fname= $_POST['fname'];
        $lname= $_POST['lname'];
        $srno=  $_POST['SRNO'];
        $address=$_POST['address'];
        $comments=$_POST['comments'];
        $email=$_POST['email'];
        $phone=$_POST['phone'];

            if (empty($lname) === true || empty($fname) === true || empty($address) === true || empty($comments) === true || empty($email) === true || empty($phone) === true) 
            {
                echo '<h3>All fields are mandatory</h3>';

            }
            else
            {
                    if (filter_var($email,FILTER_VALIDATE_EMAIL) === false)
                    {
                        echo '<h3>This is not a valid e-mail address.</h3><br />';
                        $count=$count+1;
                    }
                    if (ctype_alpha($fname) === false || ctype_alpha($lname) === false)
                    {
                        echo '<h3>Name should contain character only!</h3><br />';
                        $count=$count+1;
                    }
                    if( !is_numeric($phone) ) 
                    {
                            echo '<h3>Please enter a valid phone number</h3><br />';
                            $count=$count+1;
                    }
                    if ($count==0)
                    {
                        if(mysql_query('SELECT SRNO from names where SRNO='.$SRNO) === true)
                      // condition for update
                        if(isset($_GET['edit']))
                        {
                            mysql_query('update names set fname="'.$fname.'", lname="'.$lname.'", address="'.$address.'", comments="'.$comments.'", email="'.$email.'", phone="'.$phone.'"  where SRNO="'.$srno.'"');   
                            $addval=1;
                        }
             //condition for add  
                        else if(isset($_GET['add']))
                        {
                            mysql_query("INSERT INTO names (fname,lname,phone,email,comments,address) VALUES ('$fname', '$lname','$phone','$email','$comments','$address')");
                        }
                        header('Location:'.$page);
                    }

            }
    }

    if(isset($_GET['delete']))
    {

        mysql_query('DELETE from names where SRNO='.mysql_real_escape_string((int)$_GET['delete']));
        header('Location:'.$page);
    }

    if(isset($_GET['edit']))
    {
        $getedit=mysql_query('SELECT SRNO, fname, lname, phone, email, address, comments from names where SRNO='.mysql_real_escape_string((int)$_GET['edit']));

        echo '<table border=0>';
        while ($get_row=mysql_fetch_assoc($getedit))
            {
                echo '<form method="POST" action="">';

                echo '<tr><td>Sr.No:</td><td><input type="text" value='.$get_row['SRNO'].' name="SRNO" readonly="readonly"></td></tr>';
                echo '<tr><td>First Name:</td><td><input type="text" value='.$get_row['fname'].' name="fname"></td></tr>';
                echo '<tr><td>Last Name:</td><td><input type="text" value='.$get_row['lname'].' name="lname"></td></tr>';
                echo '<tr><td>Phone No:</td><td><input type="text" value='.$get_row['phone'].' name="phone"></td></tr>';
                echo '<tr><td>E-mail address:</td><td><input type="text" value='.$get_row['email'].' name="email"</td></tr>';
                echo '<tr><td>Address:</td><td><textarea name="address" rows=4>'.$get_row['address'].'</textarea></td></tr>';
                echo '<tr><td>Comments:</td><td><textarea name="comments" rows=4>'.$get_row['comments'].'</textarea></td></tr>';
                echo '<tr><td><input type="submit" name="submit" value="save"></td><td><a href="index.php">Cancel</a></td></tr>';
                echo '</form>';                                 
            }
        echo '</table>';

    }

    if(isset($_GET['add']))
    {
        echo '<table border=0>';

                echo '<form method="POST" action="">';

                echo '<tr><td>Sr.No:</td><td><input type="text"  name="SRNO" readonly="readonly"></td></tr>';
                echo '<tr><td>First Name:</td><td><input type="text"  name="fname"></td></tr>';
                echo '<tr><td>Last Name:</td><td><input type="text"  name="lname"></td></tr>';
                echo '<tr><td>Phone No:</td><td><input type="text"  name="phone"></td></tr>';
                echo '<tr><td>E-mail address:</td><td><input type="text"  name="email"</td></tr>';
                echo '<tr><td>Address:</td><td><textarea name="address" rows=4></textarea></td></tr>';
                echo '<tr><td>Comments:</td><td><textarea name="comments" rows=4></textarea></td></tr>';
                echo '<tr><td><input type="submit" name="submit" value="save"></td><td><a href="index.php">Cancel</a></td></tr>';
                echo '</form>';                                 

        echo '</table>';

    }

    echo '<a href=index.php?add=add>Add new entry...</a>';

    $get=mysql_query('SELECT  SRNO, fname, lname, email, phone, address, comments from names ORDER BY SRNO ASC');

    if (mysql_num_rows($get)==0)
    {
        echo 'There are no entries';
    }
        else
    {
        echo '<table border=0 cellspacing=25 cellpadding=1>';
        echo'<tr><th>Sr. No</th><th>First Name</th><th>Last Name</th><th>Phone No</th><th>E-mail</th><th>Address</th><th>Comments!!</th><th>Modify</th><th>Delete!</th></tr>';      
        while($get_row=mysql_fetch_assoc($get))
            {
                echo '<tr><td>'.$get_row['SRNO'].'</td><td>'.$get_row['fname'].'</td><td>'.$get_row['lname'].'</td><td>'.$get_row['phone'].'</td><td>'.$get_row['email'].'</td><td>'.$get_row['address'].'</td><td>'.$get_row['comments'].'</td><td><a href="index.php?edit='.$get_row['SRNO'].'">Edit</a></td><td><a href="index.php?delete='.$get_row['SRNO'].'">Delete</a></td></tr>';

            }
        echo '</table>';
    }       
?> 
```

# c++ - 对库的某些非内联方法的“未定义引用”错误

> ID：15359903
> 
> 赞同：1
> 
> 时间：2013-03-12T11:28:09.117
> 
> 标签：c++, linker, cmake, mingw

解决[了这个](https://stackoverflow.com/questions/15338879/using-a-c-library-in-a-c-project-causes-a-long-list-of-errors)问题后，我有了一个新问题：

**情况：**我有一个使用 C++ 编写的库的 C 项目。从 C 中只有对函数的调用，但是这些函数的实现使用类。

**细节：**

该库编译没有错误，但编译 C 项目返回以下错误：

```
...
Start.cpp:(.text+0x860): undefined reference to `InitialCondition::Load(std::string, bool)'
Start.cpp:(.text+0x227b): undefined reference to `InitialCondition::SetMachIC(double)'
... 
```

*一般的：*

```
<calling library implementation>:(...): undefined reference to <a class>::<a method> 
```

这通常表明缺少该库，但在这种情况下，我可以使用该库的大部分功能——只有在实现中使用了一些类时它才会失败。

这是一个例子：

**在 C++ 库中：**

*开始.h*

```
...

#ifdef __cplusplus
extern "C"
{
#endif

    void start();
    ...
#ifdef __cplusplus
}
#endif 
```

*启动.cpp*

```
#include "Start.h"
#include "InitialCondition"

InitialCondition* initCond;

void start()
{
    // initCond is set somewhere here
    ...
    initCond->SetMachIC(1.0);     // (A) has no reference
    initCond->SetAlphaDegIC(2.0); // (B) has a reference
} 
```

*初始化条件.h*

```
// includes etc.

class InitialCondition : public ABaseClass
{
public:

    void SetMachIC(double mach);

    void SetAlphaDegIC(double a)
    {
        // inline implementation
    }   
}; 
```

**从 C 调用：**

```
#include "Start.h"

void example()
{
    start();
} 
```

由于该库是使用 构建`cmake`的，因此这是相关的部分`CMakeLists.txt`：

```
set(INITIALISATION_SRC InitialCondition.cpp)
set(INITIALISATION_HDR InitialCondition.h)

add_library(Init ${INITIALISATION_HDR} ${INITIALISATION_SRC})
set_target_properties (Init PROPERTIES
                            VERSION "${LIBRARY_VERSION}")

if(BUILD_SHARED_LIBS)
  set_target_properties (Init PROPERTIES
                              SOVERSION ${LIBRARY_SOVERSION}
                              FRAMEWORK ON)
endif()

install(TARGETS Init LIBRARY DESTINATION lib
                     ARCHIVE DESTINATION lib
                     RUNTIME DESTINATION lib
                     # For Mac
                     FRAMEWORK DESTINATION "/Library/Frameworks")
install(FILES ${INITIALISATION_HDR} DESTINATION include/Project/initialization) 
```

*（有很长的文件列表，`.cpp`我`.h`已经缩短了一点）*

**注意：**顺便说一句。仍然有一些非行方法调用没有这样的错误。

**注意：**此文件位于子目录中。它添加使用`add_subdirectory(initialization)`

**注意：** `nm`编译库列表包含：`InitialCondition9SetMachICEd`

为什么从 C 调用时没有引用这些方法——即使库已链接并且方法的实现可用？

* * *

**编辑：**

以下是用于 C 的命令：

*编译：*

```
gcc -I"<include dir>" -O0 -g -Wall -c -fmessage-length=0 -MMD -MP -MF"src/Test.d" -MT"src/Test.d" -o "src/Test.o" "../src/Test.c" 
```

*关联：*

```
gcc -L"<searchpath>" -shared -o "libTest.dll"  ./src/Test.o   -l<library name> -lstdc++ 
```

`Test.d`包含所有文件的列表`#include`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:35:40.637

C++ 会破坏名称，而 C 不会。C++ 函数用类似的东西装饰

`__someletters_function_name_`

要获得 C 样式名称修饰，您应该使用`extern "C" { ... }`但老实说，我不确定它如何与类或 C++ 项目（包括您的库）交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:46:44.630

看来问题是由损坏的*cmake*列表引起的。经过几次更改，我现在可以编译两者。然而，这对我来说真的很奇怪，因为所有文件都存在于 cmakelists 中。

# javascript - 横幅广告在 html 页面中不可见

> ID：15359905
> 
> 赞同：0
> 
> 时间：2013-03-12T11:28:16.683
> 
> 标签：javascript, banner-ads

我有一个文件banners.js

```
function addEvent(object, evName, fnName, cap) {
    if (object.attachEvent)
        object.attachEvent("on" + evName, fnName);
    else if (object.addEventListener)
        object.addEventListener(evName, fnName, cap);
}

var nextAd;

function makeBannerAds() {
    var bannerBox = document.createElement("div");
    bannerBox.id = "bannerBox";
    document.body.appendChild(bannerBox);
    for (var i=0; i<adsURL.length; i++) {
        var bannerAd = document.createElement("div");
        bannerAd.className = "bannerAd";
        bannerAd.style.zIndex = i;
        var urlLink = document.createElement("a");
        urlLink.href = adsURL[i];
        var bannerIndex = document.createElement("img");
        bannerIndex.src = "banner" + i +".jpg";
        bannerIndex.style.width="290px";
        bannerIndex.style.height="55px";
        bannerBox.appendChild(bannerAd);
    }
    bannerBox.appendChild(bannerAd);
    setInterval("changeBannerAd()", 10000);
}

function changeBannerAd() {
    var allAds = document.getElementById("bannerBox").childNodes;
    alert('work');
    for(var i=0; i<num; i++) {
        if(allAds.style.zIndex == 0) {
            allAds.style.top = "-50px";
            nextAd = allAds;
        }
    }

    for(var i=0; i<num; i++) {
        allAds.style.zIndex--;

        if(allAds.style.zIndex < 0)
            allAds.style.zIndex = num-1;
    }

    var timeDelay = 0;
    for(var i=-50; i<=0; i++) {
        setTimeout("moveNextAd(" + i + ")", timeDelay);
        timeDelay += 15;
    }
}

function moveNextAd(top) {
    nextAd.style.top = top + ".px" 
}

addEvent(window, "load", makeBannerAds(), false); 
```

第二个文件 ads.js

```
var adsURL = new Array();

//this stores each item in the array using a index place holder
adsURL[0] = "testpage0.htm";
adsURL[1] = "testpage1.htm";
adsURL[2] = "testpage2.htm";
adsURL[3] = "testpage3.htm";
adsURL[4] = "testpage4.htm";
adsURL[5] = "testpage5.htm";
adsURL[6] = "testpage6.htm";
adsURL[7] = "testpage7.htm";
adsURL[8] = "testpage8.htm";
adsURL[9] = "testpage9.htm";
adsURL[10] = "testpage10.htm";
adsURL[11] = "testpage11.htm";
//and an html file where these are included. 
```

javascript 没有显示任何错误，并且所有语句都在运行，但图像在页面上不可见。我想不出问题。从最近 2 天开始工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:55:06.457

## 新答案：

我认为您的某些代码必须修改。我只是根据我认为它应该看起来的样子编辑了这个。

检查新的**[jsFiddle](http://jsfiddle.net/5R3rz/14/)** 我认为它可能会让你更接近。

简而言之，问题是`childNodes()`返回一个元素数组，因此您需要像引用数组一样引用该变量

其次，您没有所需的所有附加信息。

```
var adsURL = new Array();
adsURL[0] = "testpage0.htm";
...
adsURL[11] = "testpage11.htm";

var nextAd;

var moveNextAd = function (top) {
    nextAd.style.top = top + ".px"
}; //changed this to function as variable, answer explained below

var changeBannerAd = function () {
    var num = adsURL.length
    var allAds = document.getElementById("bannerBox")
    allAds = allAds.childNodes;
    //^^^ here is what was wrong
    // Child nodes returns an array of elements
    // So for allAds, you should reference it with allAds[i]
    for (var i = 0; i < num; i++) {
        if (allAds[i].style.zIndex == 0) {
            allAds[i].style.top = "-50px";
            nextAd = allAds[i++];
        }
    }

    for (var i = 0; i < num; i++) {
        allAds[i].style.zIndex--;

        if (allAds[i].style.zIndex < 0) allAds[i].style.zIndex = num - 1;
    }

    var timeDelay = 0;
    for (var i = -50; i <= 0; i++) {
        setTimeout((function () {
            moveNextAd(" + i + ");
        }()), timeDelay);
        timeDelay += 15;
    }
}; //changed this to function as variable too.

function addEvent(object, evName, fnName, cap) {
    if (object.attachEvent) object.attachEvent("on" + evName, fnName);
    else if (object.addEventListener) object.addEventListener(evName, fnName, cap);
}

function makeBannerAds() {
    var bannerBox = document.createElement("div");
    bannerBox.id = "bannerBox";
    document.body.appendChild(bannerBox);
    for (var i = 0; i < adsURL.length; i++) {
        var bannerAd = document.createElement("div");
        bannerAd.className = "bannerAd";
        bannerAd.style.zIndex = i;
        bannerAd.style.position = "absolute";
        var urlLink = document.createElement("a");
        urlLink.href = adsURL[i];
        var bannerIndex = document.createElement("img");
        bannerIndex.src = "banner" + i + ".jpg";
        bannerIndex.style.width = "290px";
        bannerIndex.style.height = "55px";
        urlLink.appendChild(bannerIndex); //Here is the other problem
        bannerAd.appendChild(urlLink); //All these weren't appended
        bannerBox.appendChild(bannerAd); // to each other
    }
    setInterval((function () {
        changeBannerAd();
    }()), 10000);
}

addEvent(window, "load", makeBannerAds(), false); 
```

其次，不要挑剔或任何东西，但您可能应该将传入的函数声明`setInterval`为`setTimeout`变量，而不是显式函数，或者像我所做的那样通过匿名函数运行它们。这两个函数使用了一种 eval 的形式，我们都知道[eval is evil](http://javascript.crockford.com/code.html)，[eval is evil](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)，[eval is evil](http://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)

## 旧答案；忽视

**问题**：您的 ads.js 是在banners.js 之前还是之后添加的？尝试在banners.js 之前添加脚本标签我只是将`ads.js`内容放在`banners.js`脚本上方的**[jsFiddle](http://jsfiddle.net/5R3rz/2/)**中，它对我来说效果很好

检查顶部的完整代码的 JS Fiddle。

# flash - socket.io 没有在 flashsocket 上向客户端发送连接消息

> ID：15359907
> 
> 赞同：1
> 
> 时间：2013-03-12T11:28:20.400
> 
> 标签：flash, node.js, socket.io, flashsocket

我正在使用带有 socket.io 插件的 node.js 服务器在不同设备上的两个客户端（flash 和 js）之间进行连接

对于闪存集成，我使用[FlashSocket.IO](https://github.com/simb/FlashSocket.IO)库并`io.set('transports', ['websocket', 'flashsocket']);`在我的 .js 服务器文件上

虽然在大多数计算机上一切正常 - 在某些计算机上（我不知道它是否相关，但我检查的两台计算机都运行 Windows 8） - 连接不起作用

在服务器上启用调试时，我看到对于工作的客户端，服务器发送`1::`消息而对于不工作的客户端 - 它没有

这是工作客户端日志的一部分：

```
 debug - client authorized
  info  - handshake authorized 8JVqPB6MuJYJeMR3RVN_
  debug - setting request GET /socket.io/1/flashsocket/8JVqPB6MuJYJeMR3RVN_
  debug - set heartbeat interval for client 8JVqPB6MuJYJeMR3RVN_
  debug - client authorized for
  debug - flashsocket writing 1::
  connected - //my console.log call on io.sockets.on('connection', ...
  debug - flashsocket received data packet 5:0+::{"args":"7087623252","name":"register"} 
```

对于不工作的客户：

```
 debug - client authorized
  info  - handshake authorized 0nztNzwvw260Pa-bRHef
  debug - setting request GET /socket.io/1/flashsocket/0nztNzwvw260Pa-bRHef
  debug - set heartbeat interval for client 0nztNzwvw260Pa-bRHef
  debug - client authorized for
  connected - //my console.log call on io.sockets.on('connection', ... 
```

ps

这似乎不是防火墙问题 - 即使防火墙关闭，问题也会不断发生

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:47:43.440

我认为这是与浏览器相关的问题。从[socket.io github 页面](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)：

> `flashsocket`不会在 Chrome 或其他完全支持 WebSockets 的浏览器上激活，即使 flashsocket 被指定为唯一的传输。要测试 flashsocket，请使用 IE 8 或 IE 9，或其他本身不支持 WebSockets 的浏览器。

因此，如果您想确保 flashsocket 正常工作，请使用 IE 8/9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:41:27.033

最终这是一个与防病毒相关的问题

在我发疯前一秒，我发现安装在该计算机上的 Avast 阻止了连接 - 当 Web Shield 被禁用时 - 一切都像魅力一样

（在我的 Win7 机器上安装相同的防病毒软件并没有重现问题 - 可能是 Win8+Avast 问题）

不管怎么说，还是要谢谢你

# php - php onchange onload 选择

> ID：15359912
> 
> 赞同：1
> 
> 时间：2013-03-12T11:28:37.043
> 
> 标签：php, html, select

如果我有一个 html 表单和 select 语句，例如，

```
<form method="post">
<select name="sortOrder" onchange="form.submit()">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select></form> 
```

然后是一个 php switch 语句，它根据选择运行一些东西，

```
switch($_POST['sortOrder']){
case '1':
//execute this
break;
case '2':
//execute this
break;
case '3':
//execute this
break; 
```

我希望在页面加载时默认加载选项 1。不幸的是，当页面加载时，它不会显示任何内容，直到我选择一个选项，然后它始终默认为选项 1，所以我也无法对选项 1 执行 onchange 选择。我尝试同时使用 onload 和 onchange ，但我认为这可能是一种糟糕的方法，而且它对我不起作用。我一直在搜索，但找不到特定于我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:34:15.437

```
<form method="post">
<select name="sortOrder" onchange="form.submit()">
<option value="0">-</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
</select></form> 
```

php：

```
if(!isset($_POST['sortOrder']) {
 $sortOrder = 1;
} else {
 $sortOrder = $_POST['sortOrder'];
}
switch($sortOrder){
case '1':
//execute this
break;
case '2':
//execute this
break;
case '3':
//execute this
break; 
```

因此，您告诉 PHP，如果选择的内容使用该选择编号，则默认值为 1，因此您不需要使用选项值 0；

您想在加载此页面时加载另一个页面吗？或者你想在 1 之后放一些东西？

# c# - 带有中继器控制的 IE9 中的幽灵单元

> ID：15359913
> 
> 赞同：4
> 
> 时间：2013-03-12T11:28:39.227
> 
> 标签：c#, asp.net, internet-explorer-9

IE9 生成空白单元格，或者您可以说 Ghost Cell，带有 ASP.Net Repeater 控件。我尝试使用 javascript 正则表达式。渲染函数以运行 reg。exp。但是该页面包含很少的更新控件并产生错误。

**错误：sys.webforms.pagerequestmanagerservererrorexception 无法解析从服务器接收到的消息。脚本资源.axd**

我尝试了所有众所周知的链接来解决这个错误。如果你真的有，请建议我...

谢谢你

```
protected override void Render(HtmlTextWriter writer)
    {
      using (HtmlTextWriter htmlwriter = new HtmlTextWriter(new System.IO.StringWriter()))
      {
        base.Render(htmlwriter);
        string html = htmlwriter.InnerWriter.ToString();
         if ((ConfigurationManager.AppSettings.Get("RemoveWhitespace") + string.Empty).Equals("true", StringComparison.OrdinalIgnoreCase))
          {
            //html = Regex.Replace(html, @"(?<=[^])\t{2,}|(?<=[>])\s{2,}(?=[<])|(?<=[>])\s{2,11}(?=[<])|(?=[\n])\s{2,}", string.Empty);
            html = Regex.Replace(html, @"(?<=<td[^>]*>)(?>\s+)(?!<table)|(?<!</table>\s*)\s+(?=</td>)", string.Empty);
            html = html.Replace(";\n", ";");
          }
         writer.Write(html.Trim());
      } 
```

**另一个解决方案是，但中继器失败**

```
var expr = new RegExp('>[ \t\r\n\v\f]*<', 'g'); 
document.body.innerHTML = document.body.innerHTML.replace(expr, '><'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:33:02.230

您可以直接访问 Repeater 控件（在将其写入页面并由 IE 呈现之前）并根据其索引删除单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T10:38:45.717

需要去掉“< /td >”和“< td >”之间的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T09:57:20.570

找到了一个非常**有用**的脚本，可以**防止在****IE9 浏览器**中呈现时 html 表格中出现不需要的单元格。

```
function removeWhiteSpaces()
{
   $('#myTable').html(function(i, el) {
      return el.replace(/>\s*</g, '><');
   });
} 
```

当页面加载时你应该调用这个 javascript 函数（即 onload 事件）

# ios - 为 arm6 添加第三个库时出现重复符号错误

> ID：15359917
> 
> 赞同：0
> 
> 时间：2013-03-12T11:28:48.560
> 
> 标签：ios, objective-c

添加 3rd 方库时出现以下错误：`UMSNSLibrary.a`

请帮忙，谢谢！

> " ld：在 /Users/macbookpro/Downloads /UMSNSLibrary.a(UMSNSJsonParser.o) 和 /Users/macbookpro/Downloads/HeXuanDemo EN/Build/Products/Debug- iphoneosbThree20UI.a(UMSNSJsonParser.o) 中重复符号 _OBJC_IVAR_$_UMSNSJsonParser.c ) 对于架构 armv6"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:57:51.993

只需尝试从您不需要的位置之一删除文件：来自

```
 /Users/macbookpro/Downloads /UMSNSLibrary.a(UMSNSJsonParser.o) 
```

或者 `/Users/macbookpro/Downloads/HeXuanDemo EN/Build/Products/Debug- iphoneosbThree20UI.a(UMSNSJsonParser.o)`

清理构建并重置模拟器并再次启动。我认为它会解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:33:23.770

Target->Build Setting->Header Search Path / Library Search Path ：从那里删除不需要的路径。

# actionscript-3 - Flash AS3 - 将多个对象拖放到一个目标？

> ID：15359919
> 
> 赞同：3
> 
> 时间：2013-03-12T11:28:59.337
> 
> 标签：actionscript-3, flash, drag-and-drop

![我的目标示例](../Images/e375fd015c4f1039021c2e11faddc4be.png)

标题或多或少是不言自明的，我一直在学习许多不同的教程，老实说，我对 AS3 不太擅长。（上图显示了我的目标）

无论如何，我在看到的大多数在线教程中都注意到，拖放教程要么基于一个对象到一个目标，要么基于多个对象到多个目标，所以我想知道是否有人能帮助我并解释如何我可以让多个对象连接到一个目标。

并且，如果可能使其可切换，例如，当我将对象 2 拖到上方时，如果对象 1 已经在目标上，那么对象 1 将返回到其原始位置，而对象 2 将取而代之。

一个更简单的解释方法是说我正在尝试创建一个游戏，其中有三个雕像，用户可以选择三个雕像中的一个放置在设定的目标区域中。

如果我说的话没有多大意义，我很抱歉，如果这引起混乱，我会澄清任何事情。这是我目前正在使用的 AS3 代码。

```
var startX:int;
var startY:int;

circle1_mc.addEventListener(MouseEvent.MOUSE_DOWN, pickUp);
circle1_mc.addEventListener(MouseEvent.MOUSE_UP, dropIt);
circle2_mc.addEventListener(MouseEvent.MOUSE_DOWN, pickUp);
circle2_mc.addEventListener(MouseEvent.MOUSE_UP, dropIt);
circle3_mc.addEventListener(MouseEvent.MOUSE_DOWN, pickUp);
circle3_mc.addEventListener(MouseEvent.MOUSE_UP, dropIt);

function pickUp(event:MouseEvent):void {
    startX = event.target.x;
    startY = event.target.y;
    event.target.startDrag(true);
    event.target.parent.addChild(event.target);

}

function dropIt(event:MouseEvent):void {
    event.target.stopDrag();

    var theTargetName:String = "target" + event.target.name;
    var theTarget:DisplayObject = getChildByName(theTargetName);
    if (event.target.dropTarget != null && event.target.dropTarget.parent == theTarget){    
        event.target.buttonMode = false;
        event.target.x = theTarget.x;
        event.target.y = theTarget.y;
    }

else{

    event.target.x = startX;
    event.target.y = startY;

circle1_mc.buttonMode = true;
circle2_mc.buttonMode = true;
circle3_mc.buttonMode = true; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T13:43:24.757

除了检查 之外`dropTarget`，您还可以使用`hitTestObject`来查看放置的对象是否“接触” `theTarget`。否则，任何其他已被丢弃的项目都`theTarget`可能被报告为`dropTarget`. 此外，由于`MovieClip`是动态的，您可以在每个实例中存储`startX`和值。`startY`

以下修改后的代码将使用单个`target_mc`作为放置目标。当一个物品掉在上面时，任何其他物品都将被移回原来的位置：

```
// create an array as @David suggested to keep track of your draggable items
var circles:Array = [circle1_mc, circle2_mc, circle3_mc];
for each(var circleMC:MovieClip in circles)
{
    circleMC.addEventListener(MouseEvent.MOUSE_DOWN, pickUp);
    circleMC.addEventListener(MouseEvent.MOUSE_UP, dropIt);
    circleMC.startX = circleMC.x;
    circleMC.startY = circleMC.y;
}

function pickUp(event:MouseEvent):void
{
    // no longer need to keep track of startX & startY here because that's already been done up above
    event.target.startDrag(true);
    event.target.parent.addChild(event.target);

}

function dropIt(event:MouseEvent):void
{
    event.target.stopDrag();
    // check to see if the event target is touching target_mc using hitTestObject
    if(event.target.hitTestObject(target_mc)){
        event.target.buttonMode = false;
        event.target.x = target_mc.x;
        event.target.y = target_mc.y;
        // move all circles OTHER than the current target back to their original positions
        for each(var circleMC:MovieClip in circles)
        {
            if(event.target != circleMC)
            {
                circleMC.x = circleMC.startX;
                circleMC.y = circleMC.startY;
            }
        }
    }
    else
    {
        // only need to move the event target back if it was dropped outside of target_mc
        event.target.x = event.target.startX;
        event.target.y = event.target.startY;
        event.target.buttonMode = true;
    }
} 
```

# android - Eclipse中的Android背景图像

> ID：15359921
> 
> 赞同：0
> 
> 时间：2013-03-12T11:29:08.353
> 
> 标签：android, eclipse

嗨，我正在做一个基本的 android 应用程序，并希望将类中的背景设置为图像。我不想在 XMl 文件中这样做，因为该类没有从另一个文件引用的 XML 文件。任何人都可以对此有所了解。

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:32:12.710

你的问题不是很清楚。你的班级是 View 吗？如果是这样，您可以使用 setBackgroundResource() ：

```
yourView.setBackgroundResource(R.id.your_image); 
```

# delphi - 在delphi中创建NonContinuable异常

> ID：15359923
> 
> 赞同：-3
> 
> 时间：2013-03-12T11:29:10.473
> 
> 标签：delphi, exception-handling, stack-overflow, delphi-2006, exception-code

我有一个异常，它的`raise`命令导致堆栈溢出。我阅读这篇文章是为了知道我应该怎么做： http: [//www.debuggingexperts.com/modeling-exception-handling](http://www.debuggingexperts.com/modeling-exception-handling)

我的理解是异常`0xc0000025`意味着尝试捕获禁止捕获的异常（`EXCEPTION_NONCONTINUABLE_EXCEPTION`）。我对吗？

如果是这样，我想知道是什么导致异常被定义为不可持续的。异常在 Pascal 中定义并从`Exception`对象派生。

另外我没找到这个异常处理的地方，自己加了一个`try-catch`block。异常捕获成功。为什么？

**编辑**

我想解释一下我需要帮助的具体情况：
有一个C++代码调用Pascal代码，它有异常定义，`raise`命令发生在其中。
在我将`try-catch`块放入 C++ 代码之前，Pascal 中的`raise`in Pascal 会导致 1000 次异常，`EXCEPTION_NONCONTINUABLE_EXCEPTION`直到堆栈溢出。
在我`try-catch`在 C++ 代码中添加块后，`raise`in Pascal 代码返回到`catch`C++ 代码中的块。

现在我有两个问题：

1.  为什么进程没有在第一个`NONCONTINUABLE`异常时停止？
2.  为什么`catch`C++ 代码中的块没有导致此异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:07:46.957

您是正确的， EXCEPTION_NONCONTINUABLE_EXCEPTION 意味着程序试图从一个不可继续的异常继续。但是，在 Delphi 中无法定义这样的异常，因此问题的根源在其他地方。

考虑调试自定义异常类型的创建、引发、捕获和销毁。如果您的程序中涉及到外部库，尤其是任何用 Delphi 以外的东西编写的库，请确保它们知道如何处理外部异常，或者完全不受异常影响。

# javascript - $('#' + CommentBoxId).val(); 不接

> ID：15359925
> 
> 赞同：3
> 
> 时间：2013-03-12T11:29:13.720
> 
> 标签：javascript, jquery, asp.net, html

用户在评论框中输入数据并点击相应的提交btn。我试图将 id、CompanyId、WorkId、CommentBoxId 传递给后面的代码以更新记录。到目前为止，这一切都很好，但我也想传递在评论框中输入的数据。

```
JavaScript runtime error: Sys.Net.WebServiceFailedException: The server method 'CommentBox' failed with the following error: System.InvalidOperationException-- Invalid web service call, missing value for parameter: 'CommentBoxContents'. 
```

id、CompanyId、WorkId 和 CommentBoxId 的值都传递正确。那么我怎样才能传递在文本框中输入的内容呢？谢谢你

* * *

编辑：

```
<script type="text/javascript" language="javascript">
   var commentBoxData
   function SubmitButton(id, CompanyId, WorkId, CommentBoxId) 
   {
       var commentBoxData = $('#'+CommentBoxId).val();
        Functions.CommentBox(id, CompanyId, WorkId, commentBoxData);
   }
</script> 
```

//在中继器内部：

```
<th style="width:200px;">
     <input id="Comments" name='<%# GetIdOfCommentBox((int)Eval("id")) %>' 
             type="text" runat="server" value='<%# Bind("Comment") %>' />
    <input id="SubmitComments" type="button"
           onclick="SubmitButton('<%# Eval("id") %>','<%# Eval("CompanyId") %>',
                        '<%# Eval("WorkId") %>','<%# Eval("CommentId") %>');"  />
</th> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:58:56.653

看起来您的输入的 ID 为“Comments”，但您正尝试在通话中使用“CommentId”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:31:59.880

您使用`$(CommentBoxId).val()`的是错误的。

```
 function SubmitButton(id, CompanyId, WorkId, CommentBoxId) 
     {
         $('#'+CommentBoxId).val();

        Functions.CommentBox(id, CompanyId, WorkId,  $('#'+CommentBoxId).val(), Test);  
     } 
```

请`$('#'+CommentBoxId).val()`在`Functions.CommentBox`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:32:54.877

您可以尝试像这样重写您的代码：

```
function SubmitButton(id, CompanyId, WorkId, CommentBoxId) 
{
   var commentBoxId = $('#'+ CommentBoxId).val();
   Functions.CommentBox(id, CompanyId, WorkId,  commentBoxId, Test);  
} 
```

****更新****

在中继器内部，文本框 id 应该与`SubmitButton`'s`CommentBoxId`参数相同：

```
<th style="width:200px;">
     <input id="CommentId" name='<%# GetIdOfCommentBox((int)Eval("id")) %>' 
             type="text" runat="server" value='<%# Bind("Comment") %>' />
    <input id="SubmitComments" type="button"
           onclick="SubmitButton('<%# Eval("id") %>','<%# Eval("CompanyId") %>',
                        '<%# Eval("WorkId") %>','<%# Eval("CommentId") %>');"  />
</th> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:33:24.280

此行没有任何效果，因为您没有存储`val()`调用的结果

```
$('#'+CommentBoxId).val(); 
```

对第四个参数的调用`Functions.CommentBox`将为空值，因为您没有在 id 前加上哈希值。

尝试这个：

```
var commentBoxIdVal = $('#'+CommentBoxId).val();
Functions.CommentBox(id, CompanyId, WorkId, commentBoxIdVal, Test); 
```

# c++ - 如何为 Scoped Allocator 模型启用自定义容器

> ID：15359927
> 
> 赞同：2
> 
> 时间：2013-03-12T11:29:17.037
> 
> 标签：c++, c++11

这是一篇很长的帖子，所以我想在顶部写下唯一的问题：

似乎我需要为一个自定义容器实现“分配器扩展”构造函数，该容器本身不使用分配器，但将其传播到它的内部实现，它是一个变体类型，其允许的类型可能是一个容器，如 std:: map，也是一种不需要分配器的类型，比如布尔值。

独自一人，我不知道如何做到这一点。

非常感谢您的帮助！;)

“自定义容器”是一个类模板`value`，它是 JSON 数据结构表示的实现。

类模板`value`是一个可区分联合的薄包装器：类模板`variant`（类似于 boost 变体）。此变体允许的类型表示 JSON 类型 Object、Array、String、Number Boolean 和 Null。

类模板`value`有一个可变参数模板模板参数包`Policies`，它基本上定义了 JSON 类型的实现方式。默认情况下，JSON 类型使用`std::map`（对于 Object）、`std::vector`（对于 Array）、std::string（对于 JSON 数据字符串）和一些代表剩余 JSON 类型的自定义类来实现。

中定义的类型机器用于根据给定和自身`value`创建容器类型的*递归类型定义。*（例如，当变体类使用 std::map 或 std::vector 时，变体类不需要使用“递归包装器”来实现 JSON 容器）。也就是说，这种类型机制创建了用于表示 JSON 类型的实际类型，例如一个for Array 其equals和一个for Object 其equals 。（是的，在生成类型时实际上是不完整的）。`Policies``value``std::vector``value_type``value``std::map``mapped_type``value``value`

类模板`value`基本上看起来像这样（大大简化）：

```
template <template <typename, typename> class... Policies>
class value
{
    typedef json::Null                          null_type;
    typedef json::Boolean                       boolean_type;
    typedef typename <typegenerator>::type      float_number_type;
    typedef typename <typegenerator>::type      integral_number_type;
    typedef typename <typegenerator>::type      string_type;
    typedef typename <typegenerator>::type      object_type;
    typedef typename <typegenerator>::type      array_type;

    typedef variant<
        null_type
      , boolean_type
      , float_number_type
      , integral_number_type
      , string_type
      , object_type
      , array_type
    > variant_type;

public:

    ...

private:
    variant_type value_;
}; 
```

`value`实现通常的嫌疑人，例如构造函数、赋值、访问器、比较器等。它还实现转发构造函数，以便可以使用参数列表构造变体的某种实现类型。

typegenerator*基本上*会找到相关的实现策略并使用它，除非它没有找到，然后它使用一个默认的实现策略（这里没有详细显示，但是如果有什么不清楚的地方请询问）。

例如 array_type 变为： `std::vector<value, std::allocator<value>>` 并且 object_type 变为
`std::map<std::string, value, std::less<std::string>, std::allocator<std::pair<const std::string, value>>>`

到目前为止，这按预期工作。

现在，这个想法是让用户能够指定一个*自定义分配器*，用于“容器”内的所有分配和所有构造，即`value`. 例如，竞技场分配器。

为此，我扩展了以下模板参数`value`：

```
template <
    typename A = std::allocator<void>,
    template <typename, typename> class... Policies
>
class value ... 
```

并且还调整了类型机制，以便在适当的时候使用 scoped_allocator_adaptor。

请注意，模板参数`A`不是-*的*allocator_type，`value`而是仅在类型机器中使用以生成正确的实现类型。也就是说，没有嵌入`allocator_type`-`value`但它会影响实现类型的allocator_type。

现在，当使用有状态的自定义分配器时，这只工作了一半。更准确地说，它可以工作——除了作用域分配器的传播不会正确发生。例如：

假设有一个有状态的自定义分配器，其属性`id`为整数。它不能是默认构造的。

```
 typedef test::custom_allocator<void> allocator_t;
    typedef json::value<allocator_t> Value;
    typedef typename Value::string_type String;
    typedef Value::array_type  Array;

    allocator_t a1(1);
    allocator_t a2(2);

    // Create an Array using allocator a1:
    Array array1(a1);
    EXPECT_EQ(a1, array1.get_allocator());

    // Create a value whose impl-type is a String which uses allocator a2:
    Value v1("abc",a2);

    // Insert via copy-ctor:
    array1.push_back(v1);

    // We expect, array1 used allocator a1 in order to construct internal copy of value v1 (containing a string):
    EXPECT_EQ(a1, array1.back().get<String>().get_allocator());
  --> FAILS !! 
```

原因似乎是，array1 不会通过值 v1 的副本将其分配器成员（即 a1）传播到其当前的 imp 类型，即字符串的实际副本。

也许这可以通过值中的“分配器扩展”构造函数来实现，尽管它本身不使用分配器——而是需要在需要时适当地“传播”它们。

但我怎样才能做到这一点？

编辑：揭示类型生成的一部分：

“策略”是一个模板模板参数，其第一个参数是 value_type（在这种情况下`value`），第二个参数是分配器类型。“策略”定义了如何根据值类型和分配器类型来实现 JSON 类型（例如数组）。

例如，对于 JSON 数组：

```
template <typename Value, typename Allocator>
struct default_array_policy : array_tag
{
private:
    typedef Value value_type;
    typedef typename Allocator::template rebind<value_type>::other value_type_allocator;
    typedef GetScopedAllocator<value_type_allocator> allocator_type;
public:
    typedef std::vector<value_type, allocator_type> type;
}; 
```

其中`GetScopedAllocator`定义为：

```
template <typename Allocator>
using GetScopedAllocator = typename std::conditional<
    std::is_empty<Allocator>::value,
    Allocator,
    std::scoped_allocator_adaptor<Allocator>
>::type; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:25:24.417

决定是否将分配器传递给子元素的逻辑在标准中称为*使用分配器构造*，请参见 20.6.7 [allocator.uses]。

有两个使用 uses-allocator 协议的标准组件：`std::tuple`和`std::scoped_allocator_adaptor`，您还可以编写用户定义的分配器（但通常更容易使用`scoped_allocator_adaptor`为现有分配器添加对协议的支持。）

如果你在`scoped_allocator_adaptor`内部使用，`value`那么你需要做的就是让作用域分配器工作是确保`value`支持使用分配器构造，这是由`std::uses_allocator<value, Alloc>`trait 指定的。`value::allocator_type`如果已定义且为真，则该特征将自动`std::is_convertible<value::allocator_type, Alloc>`为真。如果`value::allocator_type`不存在，您可以将特征专门化为真实（这是`std::promise`做`std::packaged_task`什么）：

```
namespace std
{
  template<typename A, typename... P, typename A2>
    struct uses_allocator<value<A, P...>, A2>
    : is_convertible<A, A2>
    { };
} 
```

这意味着当 a`value`由支持使用分配器构造的类型构造时，它将尝试将分配器传递给`value`构造器，因此您还需要添加分配器扩展的构造器以便可以传递它。

为此，如您所愿：

> ```
> // Insert via copy-ctor:
> array1.push_back(v1); 
> ```

`custom_allocator`模板必须支持 uses-allocator 构造，或者您必须将其包装好，也就是说，`Value::array_type::allocator_type`我`scoped_allocator_adaptor<custom_allocator<Value>>`无法从您的问题中判断这是否属实。

当然，标准库实现必须支持范围分配器才能正常工作，您使用的是什么编译器？我只熟悉 GCC 在这方面的地位，GCC 4.7`std::vector`只支持它。对于 GCC 4.8，我也添加了支持`forward_list`。我希望剩下的容器都为 GCC 4.9 完成。

注意您的类型还应该`std::allocator_traits`用于所有与分配器相关的操作，而不是直接在分配器类型上调用成员函数。

> 是的，在生成类型的那一刻，值实际上是不完整的

除非另有说明，否则在实例化标准模板组件时使用不完整类型作为模板参数是未定义的行为，请参阅 17.6.4.8 [res.on.functions]。它可能适用于您的实现，但不是必需的。

# .net - 将客户端配置文件 .net dll 与非客户端配置文件 .dll 链接？

> ID：15359928
> 
> 赞同：2
> 
> 时间：2013-03-12T11:29:18.180
> 
> 标签：.net

我开发了一个使用 .net 4.0 客户端配置文件 (CP) 的 .dll。但是，我也有一个 .dll，我想将它与我的 .dll 链接，并且另一个 .dll (DotNetOpenAuth) 与客户端配置文件不兼容，因为它使用 System.Web。

我知道您不能在 CP 兼容项目中引用非 CP .dll。问题是我该怎么做:) 我知道很多事情乍一看是不可能的，但有一些调整？..

我不明白为什么编译器没有给我警告说我的目标为 CP 的项目链接非 CP .dll。如果它以这种方式工作，我将能够拥有在大多数情况下都可以使用的 CP 兼容的 .DLL，除非调用了使用 DotNetOpenAuth 的功能。

简而言之，我想将 CP 兼容性检查从编译时移到运行时。这是因为我的 .dll 有很多功能，大多数人永远不会使用需要 DotNetOpenAuth 的那部分。那些需要 DotNetOpenAuth 的人必须使用完整的 .net 框架。但这绝不能成为其他人的阻碍。

我的意思是 AllowPartiallyTrustedCallersAttribute 之类的东西，它允许您将一些编译时检查移至运行时。

我不想维护 .dll 的两个单独版本（一个用于 Web 应用程序，另一个用于客户端配置文件），因为它增加了用户选择 .dll 的复杂性。我宁愿保持简单。

当然，有一种通过反射动态加载 .dll 的方法，但这需要运行代码具有相当高的权限（如果是 Web 应用程序，它们可能没有足够的权限）。

# java - 如何在 TextBox 上以编程方式设置 css 错误样式

> ID：15359931
> 
> 赞同：0
> 
> 时间：2013-03-12T11:29:28.290
> 
> 标签：java, css, gwt

为什么我不能将自定义 CSS 样式应用于单个 TextBox？

我正在尝试在单个 TextBox 上设置一些错误样式。以下实现有什么问题？

在里面：

```
static final String STYLES = ErrorRes.INSTANCE.css().style();

@UiField TextBox box;
box.setStylePrimaryName(STYLES); 
```

资源接口

```
interface ErrorRes extends ClientBundle {
    static final ErrorRes INSTANCE = GWT.create(ErrorRes.class);

    @Source("Error.css")
    Style css();

    interface Style extends CssResource {
        @ClassName("gwt-TextBox-error")
        String style();
    }
} 
```

错误.css

```
.gwt-TextBox-error {
     border: 1px solid red !important;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:26:29.003

如果您想在小部件上获取 gwt-TextBox-error 样式名称，则需要设置`box.setStylePrimaryName("gwt-TextBox");`- 默认情况下。当发生错误时，使用`box.setStyleDependentName("error", true);`HTML 将是*class="gwt-TextBox gwt-TextBox-error"*。并清除错误样式，使用`box.setStyleDependentName("error", false);`

**或者**

您可以以相同的方式使用`addStyleName("gwt-TextBox-error")`和`removeStyleName("gwt-TextBox-error")`。

**- -更新 - -**

因此，我尝试运行您的案例，并且效果很好。首先，您需要在运行时将 css 从资源注入页面：

```
ErrorRes.INSTANCE.css().ensureInjected(); 
```

我在开始时使用它`onModuleLoad()`

然后，添加错误样式使用： `box.addStyleName(STYLES);` 并`box.removeStyleName(STYLES);`删除它。

You can't use pair `setStylePrimaryName()` and `setStyleDependentName()` with bundled css becouse css name will be obfuscated.

# c# - 将带有参数的 StoredProcedure 传递给 c# 中的函数

> ID：15359932
> 
> 赞同：0
> 
> 时间：2013-03-12T11:29:30.437
> 
> 标签：c#, sql-server

如何将带参数的存储过程传递给函数。

我实际上有一个将数据插入数据库的函数。我正在寻找一种方法，可以将带有参数的 SP 传递给该插入函数，以便重用插入数据代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:32:22.773

将对存储过程的调用放在一个方法中，并从您想要调用它的任何地方调用此方法。将参数（字符串、整数、双精度......）传递给此方法，并将这些值放入存储过程的参数中。

这样您就可以将所有 SP 代码保存在一个地方。

```
public class CustomerProvider
{
    public int UpdateCustomer(int id, string name, string address)
    {
        using(connection = new
            SqlConnection("Server=localhost;DataBase=Northwind;Integrated Security=SSPI"))
        {
            connection.Open();

            var command = new SQLCommand("csp_updatecustomer", connection);
            command.CommandType = CommandType.StoredProcedure;

            command.Parameters.Add(
            new SqlParameter("@CustomerID", id));
            command.Parameters.Add(
                new SqlParameter("@CustomerName", name));
            command.Parameters.Add(
                new SqlParameter("@CustomerAddress", address));
            var result = command.ExecuteNonQuery();
            return result;
        }
    }
} 
```

# backbone.js - ItemView 事件未触发

> ID：15359934
> 
> 赞同：0
> 
> 时间：2013-03-12T11:29:38.960
> 
> 标签：backbone.js, marionette

# **我想做的事：**

渲染一个带有选项标签的下拉选择，当用户在下拉列表中选择一个选项时，获取新选择的模型并对其进行处理。

# **问题：**

我很难在通过 CompositeView 调用的 ItemView 中触发更改事件。

出于某种原因，正在触发 CompositeView:change (log: Holy moses)，但是它对我没有多大帮助，因为它不会给我选择的模型。

我尝试了很多东西，但都没有真正奏效。

任何帮助将不胜感激！

## **代码：**

```
Configurator.module('Views.Ringsizes', function(Views, Configurator, Backbone, Marionette, $, _) {

    Views.DropdownItem = Marionette.ItemView.extend({
        tagName: 'option',
        template: "#dropdown-item",

        modelEvents: {
            'change': 'modelChanged'
        },

        onRender: function(){
            console.log('tnt');
            this.$el = this.$el.children();
            this.setElement(this.$el);                
        },

        modelChanged: function(model) {

            console.log("holy mary");

        }            
    });

    Views.DropdownView = Marionette.CompositeView.extend({
        template: "#dropdown-collection",
        className: 'configurator-ringsizes-chooser',
        itemView: Views.DropdownItem,
        itemViewContainer: '.product_detail_ring_sizes',

        events: {
            "change": "modelChanged"
        },
        initialEvents: function(){},
        initialize: function(){
            console.log(this.model);
            this.collection = new Backbone.Collection(this.model.getRingsizes());

        },
        modelChanged: function(model) {
            console.log("holy moses");
        }

    });

    Views.List = Marionette.CollectionView.extend({
        className: 'configurator-ringsizes',
        itemView: Views.DropdownView
    });
}); 
```

## **模板代码：（如果需要）**

```
<script type="text/template" id="dropdown-item">
  <option value="<@- code @>" <@ if(current) { @> selected="selected" <@}@> ><@- name @>    </option>
</script>

<script type="text/template" id="dropdown-collection">
   <div class="accordionContent accordionContent_ringsizes">
     <div class="configurator-ringsizes-chooser-ringsizes-region">
        <select class="product_detail_ring_sizes"></select>
     </div>
   </div>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:14:55.847

好的，我终于让这个工作了。

我有点失望，我不得不为此依赖数据属性，但这是我找到的唯一方法。已经花了我足够长的时间了:)

这是我现在的做法：

## 模板代码：

```
<script type="text/template" id="dropdown-item">
  <option data-cid="<@- cid @>" value="<@- code @>" <@ if(current) { @> selected="selected" <@}@> ><@- name @></option>
</script>

<script type="text/template" id="dropdown-collection">
    <div class="configurator-ringsizes-chooser-ringsizes-region">
      <select class="product_detail_ring_sizes"></select>
    </div>
</script> 
```

## 代码：

```
Configurator.module('Views.Ringsizes', function(Views, Configurator, Backbone, Marionette, $, _) {

    Views.DropdownItem = Marionette.ItemView.extend({
        tagName: 'option',
        template: "#dropdown-item",

        serializeData: function() {

            var data = {
                cid: this.model.cid,
                code: this.model.get('code'),
                name: this.model.get('name'),
                current: this.model.get('current')
            };

            return data;
        },            
        onRender: function(){
            this.$el = this.$el.children();
            this.setElement(this.$el);                
        }        
    });

    Views.DropdownView = Marionette.CompositeView.extend({
        template: "#dropdown-collection",
        className: 'configurator-ringsizes-chooser',
        itemView: Views.DropdownItem,
        itemViewContainer: '.product_detail_ring_sizes',

        events: {
            "change select": "modelChanged"
        },

        initialEvents: function(){},

        initialize: function(){
            this.collection = new Backbone.Collection(this.model.getRingsizes());
        },

        modelChanged: function(e) {

            var cid = $(e.currentTarget+"option:selected").data('cid');

            var currentModel = this.collection.find(function(elem) {
                return elem.get('current');
            });

            var model = this.collection.find(function(elem) {
                return elem.cid === cid;
            });

            currentModel.set({
                current: false
            });

            model.set({
                current: true
            });

            // AND here i'm doing my stuff, getting the overall model through this.model, the collection of options through this.collection and the currently selected model through currentModel.
        }         

    });

    Views.List = Marionette.CollectionView.extend({
        className: 'configurator-ringsizes',
        itemView: Views.DropdownView,
        model: this.model
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:40:18.260

当您选择一个选项时，“更改”事件不会触发它，而是在您更改选择的选项时触发选择（这就是它在复合视图上触发的原因）。

所以你应该在你的 itemView 中使用它：

```
events: {
    'click' : 'modelChanged'
} 
```

# json - 0x800a1391 - JavaScript 运行时错误：“JSON”在 IE 10 中未定义

> ID：15359938
> 
> 赞同：9
> 
> 时间：2013-03-12T11:29:44.607
> 
> 标签：json, visual-studio-2012, internet-explorer-10, iis-8

我在 Windows 8 上使用 IE 10 兼容性，在调试模式下运行 WebApp（VS 2012）时出现此错误。0x800a1391 - JavaScript 运行时错误：“JSON”未定义 下面的代码

```
var data = JSON.stringify(GetUserDetails());

function GetUserDetails() {
    var userData = {};
    userData.userName = $('#txtUserName').val();
    userData.password = $('#txtPassword').val();
    return userData;
} 
```

此外，奇怪的事实是 IIS 8 中托管的相同代码在 IE 10 浏览器中运行良好。有什么输入吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T11:32:00.347

IE8 及以上[只有](http://caniuse.com/#feat=json)[*标准*](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)[模式下](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)的`JSON`对象。因此，您需要确保文档具有 doctype。[](http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx)

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-05T11:49:26.183

我发现这是**IE 10**兼容性的 Intranet 设置为我的 Intranet 站点引发了此异常：

**“在兼容性视图中显示 Intranet 站点”**

要更改此标志，或者只是简单地禁用它，请在 IE 10 中显示“*命令栏”，然后选择“**工具*”>“*兼容性视图设置*”并取消选中该选项 - 倒数第二个。立即修复了问题。

![在此处输入图像描述](../Images/43747bfa43cbf4159ce1eb8c084922d2.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T15:14:15.087

您需要包含 json2.js

见[json2 包含](http://www.blakepell.com/Blog/?p=405#comment-2181)

更多细节。在某些情况下，我们必须处理客户使用 IE7 标准的情况。所以我们的代码也必须迎合这种情况。我们的零售网站可供数百名使用 IE7 标准的客户访问。包含 json2 解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T19:31:28.667

在尝试使用 Visual Studio 2010 开发 Web 服务器运行 ASP .NET 应用程序时，我在运行 Windows 8 和 IE 10 时遇到了相同的“JavaScript 运行时错误 ...JSON 未定义”。当我打开浏览器时，单击“Alt”以显示菜单，然后单击“工具”->“兼容性视图设置”并取消选中“以兼容性视图显示所有网站”，我不再收到错误消息。*

# jquery - 如何在 jquery 中直接读取 HTML

> ID：15359939
> 
> 赞同：2
> 
> 时间：2013-03-12T11:29:45.700
> 
> 标签：jquery, html

请注意，这个问题是这个问题的后续[问题](https://stackoverflow.com/questions/15356112/how-to-modify-yahoo-weather-appearance-on-my-page#15356356)

我的页面上有以下代码（或多或少 - 数据定期更改）。

```
<div class="weather-feed">
    <img src="http://l.yimg.com/a/i/us/we/52/28.gif"/><br />
    <b>Current Conditions:</b><br />
    Mostly Cloudy, 19 C<BR />
    <BR /><b>Forecast:</b><BR />
    Tue - PM Thunderstorms. High: 26 Low: 16<br />
    Wed - Mostly Sunny. High: 27 Low: 16<br />
    <br />
    <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a><BR/><BR/>
    (provided by <a href="http://www.weather.com" >The Weather Channel</a>)<br/>
</div> 
```

我想设置这个样式，所以我想通过`<div>`在每个部分周围添加 s 来修改呈现的 HTML（所需的代码在上一个问题的链接中。

我编写了以下 jquery（在很多人的帮助下）来帮助我到达现在的位置：

```
$(document).ready(function() {
    var src = $(".weather-feed");

    // remove line feeds
    var result = src.find("br").remove();

    //var condition = src.html().match(/<b>Current Conditions:<\/b>([^<]*)<b>/)[1].trim());

    // modify weather icon
    result += "<div class=\"weather-icon\"><img src=\"" + src.find("img").attr("src") + "\" /></div>";

    // modify weather conditions
    result += src.find("b:nth-child(1)").before("<div class=\"weather-conditions\">") + ;
    result += src.find("b:eq(1)").before("</div><div class=\"weather-forecast\">");
    result += src.find("a:nth-child(1)").before("</div><div class=\"weather-detail\">");
    result += src.find("a:nth-child(1)").after("</div");

    $("#weather-feed").append(result);
}); 
```

但目前，所有的渲染都是这样的：

[对象对象]
![图像](../Images/303eec832f8b3e7ead1f292f0fd3f247.png)
[对象对象][对象对象][对象对象][对象对象]

我真的不明白 jquery 到底在做什么。我的目标是基本上获得 html 的字符串表示形式，并用修改后的字符串替换 html。

在我看来，它正在获取文字 html 并将其扔到页面上……但我真的不知道。

那么如何修改此代码以将 html 代码写入`src`我`result`需要的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:34:20.860

您应该将html内容进一步处理..

```
var src = $(".weather-feed").html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:37:29.547

您正在尝试连接一个字符串和一系列 jQuery 对象。JavaScript 正在调用该`.toString()`对象的函数，该函数返回`[Object object]`，因此可以发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:38:53.793

您遇到的问题是将对象附加到字符串，从而获得对象的字符串表示形式。

将您拥有的内容更改为以下内容，

```
$(document).ready(function() {
    var src = $(".weather-feed");
    var result = src.find("br").remove();
    result += "<div class=\"weather-icon\"><img src=\"" + src.find("img").attr("src") + "\" /></div>";
    result += src.find("b:nth-child(1)").before("<div class=\"weather-conditions\">").html();
    result += src.find("b:eq(1)").before("</div><div class=\"weather-forecast\">").html();
    result += src.find("a:nth-child(1)").before("</div><div class=\"weather-detail\">").html();
    result += src.find("a:nth-child(1)").after("</div").html();
    $("#weather-feed").append(result);
}); 
```

这样，您将在每个元素中找到的 HTML 内容附加到字符串中，这就是您要查找的结果。

# php - php 获取代码中的注释行数

> ID：15359940
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:29:50.730
> 
> 标签：php

我正在为 svn 跟踪系统编写代码。我想计算开发人员发表的评论行数。

是否有一个 php 函数来获取两个字符之间的行数？我想获取 /* 和 */ 之间的行数

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:12:25.777

您可以使用[Tokenizer](http://www.php.net/manual/en/book.tokenizer.php)解析 PHP 源文件，然后计算评论。

**例子**

```
$source = file_get_contents('source.php');
$tokens = token_get_all($source);
$comments = array_filter($tokens, function($token) {
    return $token[0] === T_COMMENT;
});

echo "Number of comments: " . count($comments); 
```

请注意，这会计算评论的数量，要计算行数，您必须另外计算换行符`$token[1]`（实际评论）。

**更新**

我想试试看，给你：

```
$source = <<<PHP
<?php
/*
 * comment 1
 */
function f() {
  echo 'hello'; // comment 2
  // comment 3
  echo 'hello'; /* OK, this counts as */ /* three lines of comments */ // because there are three comments
}
PHP;

$tokens = token_get_all($source);
$comments = array_filter($tokens, function($token) {
    return $token[0] === T_COMMENT;
});
$lines = array_reduce($comments, function(&$result, $item) {
    return $result += count(explode("\n", trim($item[1])));
}, 0);

echo "Number of comments: ", count($comments), "\n";
echo "Lines of comments: ", $lines; 
```

**输出**

```
Number of comments: 6
Lines of comments: 8 
```

**[在线演示](http://phpfiddle.org/main/code/phn-u6c)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:38:23.947

您可以使用`preg_replace`删除`/* */`标签之间的所有内容，然后计算行数。

```
<?php
$string = <<<END
just a test with multiple line

/*
some comments

test
*/

and some more lines
END;

$lines = explode(chr(10), $string);
echo 'line count: ' . (count($lines)+1) . '<br>';
//line count: 10

$pattern = '/\/\*(.*)\*\//s';
$replacement = '';
$string = preg_replace($pattern, $replacement, $string);

$lines = explode(chr(10), $string);
echo 'line count: ' . (count($lines)+1);
//line count: 6
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:38:47.640

作为起点，您可以尝试使用[PHP 反射库 getDocComment()](http://php.net/manual/en/reflectionclass.getdoccomment.php)但是可能不会获取内联注释。

# android - 触摸事件流

> ID：15359941
> 
> 赞同：0
> 
> 时间：2013-03-12T11:29:53.873
> 
> 标签：android, events, frameworks, touch

Android中触摸屏幕时的完整事件流程是什么？

据我了解，当用户触摸屏幕时：

1.  触摸驱动程序将找到坐标并将它们传递给内核
2.  内核会将其传递给框架
3.  框架将要求图形库执行缩放和渲染（在确定缩放多少之后）

驱动程序、内核、本机库、框架和应用程序如何交互以实现所需的操作？我很高兴能对此有所了解。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-27T11:12:57.300

希望这会帮助你

[Android中的触摸事件流](http://processors.wiki.ti.com/index.php/Capacitive_touch_integration_with_android)

# forms - c# windows窗体如何使用两种不同形式的变量

> ID：15359945
> 
> 赞同：0
> 
> 时间：2013-03-12T11:30:01.307
> 
> 标签：forms, variables

我的应用程序中有 5 个表单，我想从中使用一个表单中的变量并在另一个表单上调用它。我有洗车表格和以旧换新表格。如果我想调用洗车总数并将其与交易总额相加以进行日终销售，我将如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:54:02.590

您必须使用 Form getter 和 setter 来访问和修改这些变量。

```
public class CarWash: Form
{
   ...
   public type carWashVariable { get; set; }
   ...           
}

From Trade form:    
public void button1_Click(object sender, EventArgs e)
{
   MessageBox.Show(CarWash.carWashVariable);
} 
```

# android - “R 无法解析为变量”错误

> ID：15359946
> 
> 赞同：1
> 
> 时间：2013-03-12T11:30:03.670
> 
> 标签：android, eclipse

我认为这些帖子是 stackoverflow 上与我的问题相关的最好的帖子：

[“R 无法解析为变量”？](https://stackoverflow.com/questions/7824730/r-cannot-be-resolved-to-a-variable)

[R 无法解决 - Android 错误](https://stackoverflow.com/questions/885009/r-cannot-be-resolved-android-error?lq=1)

我在这些帖子上尝试了所有答案，但我仍然没有修复我的“R 无法解析为变量”错误。在这一点上我真的很绝望。有趣的是，我昨天遇到了同样的问题，我用干净的项目 + 重启 IDE 方法修复了它，但今天它不起作用。在我将 ADT 更新到 ADT 21.1.0 之前，我从来没有遇到过这个问题。我知道我的 res 文件不允许有任何错误，但它们有一些警告。这些警告是否会导致问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:33:16.150

`R.java``res/`只要文件夹或文件中存在任何编译错误，就会被删除`AndroidManifest.xml`。您必须检查文件夹中的*每个文件**并*解决问题。`res/` *`AndroidManifest.xml`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:06:13.420

有时会在内存缓存没有清除以前的数据时发生。只需简单地清除您的项目，它就会起作用。

程序：在eclipse go项目中，你会看到清楚的......

然后按 clear 并选择您的项目并按 ok 。希望它会奏效。祝你好运*

# ruby-on-rails - 如何正确测试？

> ID：15359948
> 
> 赞同：1
> 
> 时间：2013-03-12T11:30:06.520
> 
> 标签：ruby-on-rails, testing

例如，我想验证名称只是字母并且长度在 4 到 14 个字母之间。我在模型中有以下代码：

```
 validates: name, :format => { :with => /^[a-zA-Z]+$/,
                                  :message => 'Name should be letters only. },
                     :length => { :minimum => 4, :maximum => 14 } 
```

所以它显然让我做我想做的事。
但至于单元测试，我有点过于完美主义，所以我设置了类似的东西

```
invalid_names = ['1234',
                 'qwe',
                 '1%#$#$',
                 'Sam1',
                 '%',
                 random_string(15)] #I also have a test method to create random string with parametrized length

valid_names = %w['test',
                 'Travis',
                 'John',
                 random_string(5),
                 random_string(14),
                 random_string(4)] 
```

并使用断言在循环中测试它们中的每一个，例如

```
invalid_names.each do |name|
    user = User.new(:name => name)
    user.save
    assert user.errors[:name].any?, "#{name} is valid."
end 
```

所以它肯定工作得很好。但这太冗长了，我也不能确定我的测试实际上测试了所有可能的符号及其组合以及所有长度和东西，即使我确信它按预期工作。
那么，什么是可以接受的测试我的验证的方法，而不是过于完美主义者，但又要对大部分逻辑进行测试？
我是否只是想编写一个完美的代码只是为了编写一个完美的代码而忘记了主要的完成目标：工作产品？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:37:43.350

我是这样想的：你想测试什么？你对你的正则表达式有多确定（在这种情况下是非常简单的）？

随机字符串测试是毫无意义的，IMO，对读者来说毫无意义，因为生成函数的名称很糟糕，因为它并不表示它只会生成与正则表达式匹配的名称，我可以从上下文中收集到，但它仍然是*假设*。

TDD 的人会打我的脸，但我不相信在初始开发后离开这些测试具有持久的价值。我什至不相信为此进行测试*是否*有价值，因为逻辑很简单，而且它让我觉得更多的是测试 Rails 而不是我的验证。

Delta 我对字符串生成方法的评论，但是，我对你展示的测试没有任何问题。如果要进行测试，这是一种合理的编写方式，很容易添加用例，除了测试时间略有增加外，它们没有任何害处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:40:39.157

无论您进行多少测试，一旦程序变得更加复杂，您将永远无法达到路径覆盖率。因此，与其尝试测试任何给定的组合，不如尝试测试在结构上与已经尝试过的组合**不同的每个组合。**因此，例如，如果您有一个算法，它采用三个整数并以整数作为边长构造一个三角形，请仅尝试一个可能的解决方案，但由于解决方案可能错误的各种原因尝试一个不可能的解决方案，对于三角形，这可能是非数字输入，还有不满足勾股定理的三角形。因此，对于您的示例，不要测试随机字符串，而是测试 null、溢出、特殊字符等。

# javascript - 在 asp.net 中不使用 ScriptManager 从 JavaScript 调用 WebServices

> ID：15359949
> 
> 赞同：2
> 
> 时间：2013-03-12T11:30:08.173
> 
> 标签：javascript, asp.net, ajax, web-services

我为我的 Asp.net 项目创建了一个 Web 服务。目前，我通过在`ScriptManager`. 但我不想添加一个`ScriptManager`以便我可以在任何 HTML 页面中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:44:31.910

Ok. so you want to make ajax call to some web-service method and pass parameters to it. And you are going to pass the parameters as JSON format

```
function CallWebServiceMethod() {
     var requestedData = "{ 'LifeCycleN': '" + var_LifeCycleN +//var_LifeCycleN some var represent your data that you want to send
            "', 'LiOrder': '" + var_LiOrder +//var_LiOrder again some var represent your data that you want to send
            "'}";
    $.ajax({
        type: "POST",
        url: "Services/YouWebServiceName.asmx/WebServiceMethodName",
        data: requestedData,
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {// I 'll assume that your web-service 'll return bool value indicate if the operation done successfully or not.
        //do here what you want to do is the request was successful.
        }
    });

    } 
```

# c# - 为动态创建的文本框插入查询

> ID：15359952
> 
> 赞同：0
> 
> 时间：2013-03-12T11:30:13.030
> 
> 标签：c#, sql-server

我已经动态生成了文本框，我需要将插入查询写入我的`SQL server 2005`数据库。问题是当我编写插入查询时，我不能包含文本框名称，因为文本框将在运行时生成。

我尝试使用以下逻辑：

**请注意，我希望生成动态文本框，然后生成动态 SQL 查询。**

```
 String str=//will contain a data fetched from all the textboxes generated dynamically and will be seprated using a ','(as in an insert statement). 
```

该字符串`str`将直接传递给插入查询，以便直接获取所有值。

但逻辑不成立。

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:39:36.740

几点

1.  您的方法使您容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。这是一件坏事。您应该使用 sqlCommand 对象来执行 SQL，使用参数对象传入要插入的值，这样可以防止 SQL 注入攻击。
2.  在您插入的表格中的每一列之后命名您的文本框。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:54:53.660

您需要在生成文本框时对其进行跟踪。

```
List<TextBox> TextBoxes = new List<TextBox>(); 
```

...

```
TextBox DynamicBox1 = new TextBox();
...
TextBoxes.Add(DynamicBox1); 
```

然后，如果您在某处有列的名称

```
string Columns = "@col0, @col1, @col2"; //etc

string Query = @"INSERT INTO [Table]
                 (" + Columns.Replace("@", "") + ")
                 VALUES (" + Columns+ ")"; 
```

使用参数化命令

```
SqlCommand Command = new SqlCommand(Query, Connection);

for (int i=0; i<TextBoxes.Count; i++)
{
    Command.Parameters.AddWithValue("@col" + i, TextBoxes[i].Text);
}

Connection.Open()
Command.ExecuteNonQuery();
Connection.Close() 
```

我没有添加错误处理

# asp.net-mvc-3 - asp.net MVC教程所需的引擎盖下解释

> ID：15359962
> 
> 赞同：1
> 
> 时间：2013-03-12T11:30:42.737
> 
> 标签：asp.net-mvc-3

参考asp.net MVC教程： [http ://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examineing-the-edit-methods-and-edit-view](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view)

关于自动生成的 Views\Movies\SearchIndex.cshtml

问题一：

```
<p>
@Html.ActionLink("Create New", "Create")

@using (Html.BeginForm())
{
    <p>
        Genre: @Html.DropDownList("movieGenre", "All")
        Title: @Html.TextBox("SearchString", "Movies", FormMethod.Get)
        <input type="submit" value="Filter" />
    </p>
}
</p> 
```

**movieGenre**是如何引用**@ViewBag.movi​​eGenre**的，这显然是在 Controllers/MoviesController.cs 中定义的

问题2：

```
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Title)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ReleaseDate)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Genre)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.Price)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.ID }) |
        @Html.ActionLink("Details", "Details", new { id=item.ID }) |
        @Html.ActionLink("Delete", "Delete", new { id=item.ID })
    </td>
</tr>
} 
```

**modelItem**在哪里定义？VS2010 向我展示了 modelItem 是

```
IEnumerable <MvcMovie.Model.Movie> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:33:27.710

看起来你已经回答了你的第二个问题，所以我只回答你的第一个问题：

如果没有提供数据，助手将默认绑定到它`Html.DropDownList`。只是字典周围的动态包装器，因此当您设置时，您实际上是在设置.`ViewData``ViewBag``ViewData``ViewBag.movieGenre = new SelectList()``ViewData["movieGenre"] = new SelectList()`

现在您的 中已包含此`SelectList`内容`ViewData`，以下内容将自动将其绑定到下拉列表：

```
@Html.DropDownList("movieGenre") 
```

这种隐式绑定没有很好的记录。浏览此处获取更多信息：

[http://weblogs.asp.net/pjohnson/archive/2012/10/26/mvc-s-html-dropdownlist-and-quot-there-is-no-viewdata-item-of-type-ienumerable-lt- selectlistitem-gt-that-has-the-key.aspx](http://weblogs.asp.net/pjohnson/archive/2012/10/26/mvc-s-html-dropdownlist-and-quot-there-is-no-viewdata-item-of-type-ienumerable-lt-selectlistitem-gt-that-has-the-key.aspx)

# c# - 带有布局引擎的自定义面板

> ID：15359969
> 
> 赞同：8
> 
> 时间：2013-03-12T11:30:51.583
> 
> 标签：c#, winforms, custom-controls

我正在尝试使用我自己的布局引擎创建自定义面板控件。我需要添加到我的面板的每个控件都添加到下面并采用全宽（-padding），如下所示： ![在此处输入图像描述](../Images/e961089661828fe6a947a398b07f9934.png)

下面是我的代码：

```
using System.Drawing;
using System.Windows.Forms;
using System.Windows.Forms.Layout;

namespace VContainer
{
    internal class VerticalFillList : Panel
    {
        public VerticalFillList()
        {
            AutoScroll = true;
            MinimumSize = new Size(200, 200);
            Size = new Size(200, 300);
            Padding = new Padding(10);
        }

        private readonly VerticalFillLayout _layoutEngine = new VerticalFillLayout();

        public override LayoutEngine LayoutEngine
        {
            get { return _layoutEngine; }
        }

        private int _space = 10;

        public int Space
        {
            get { return _space; }
            set
            {
                _space = value;
                Invalidate();
            }
        }
    }

    internal class VerticalFillLayout : LayoutEngine
    {
        public override bool Layout(object container, LayoutEventArgs layoutEventArgs)
        {
            var parent = container as VerticalFillList;

            Rectangle parentDisplayRectangle = parent.DisplayRectangle;
            Point nextControlLocation = parentDisplayRectangle.Location;

            foreach (Control c in parent.Controls)
            {
                if (!c.Visible)
                {
                    continue;
                }

                c.Location = nextControlLocation;
                c.Width = parentDisplayRectangle.Width;
                nextControlLocation.Offset(0, c.Height + parent.Space);
            }
            return false;
        }
    }
} 
```

上面的代码工作正常，除了一件事：当我将控件添加到我的容器时，它们被正确添加（父级下方的新控件，100% 宽度），但是当控件的高度大于我的容器高度时，我得到水平滚动条，但之后添加几个控件更多的滚动条被删除。 ![添加组件](../Images/f899285e7266a0f8e7c1ada00eacbc3d.png)

当我想调整容器大小时也会发生同样的事情： ![调整容器大小](../Images/939ea0c1648f4d75553ab85b374181a1.png)

如何解决这个问题？我只需要删除那个水平滚动条。

当然，欢迎所有改进:)

**我不想使用表格布局或流布局，因为这正好在我需要的时候给了我。**

我需要一个简单的容器，从上到下对所有子控件进行排序并水平拉伸它们，以便它们占用尽可能多的宽度，因此不需要容器水平滚动条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T16:57:23.530

这是一个工作示例，不幸的是，它不使用您的布局引擎类。它仅依赖于 OnControlAdded 和 OnControlRemoved 方法，并锚定和设置 AutoScrollMinSize 属性以专门确保水平滚动条永远不会出现：

```
internal class VerticalPanel : Panel {
  private int space = 10;

  public int Space {
    get { return space; }
    set {
      space = value;
      LayoutControls();
    }
  }

  protected override void OnControlAdded(ControlEventArgs e) {
    base.OnControlAdded(e);
    LayoutControls();
  }

  protected override void OnControlRemoved(ControlEventArgs e) {
    base.OnControlRemoved(e);
    LayoutControls();
  }

  private void LayoutControls() {
    int height = space;
    foreach (Control c in base.Controls) {
      height += c.Height + space;
    }
    base.AutoScrollMinSize = new Size(0, height);

    int top = base.AutoScrollPosition.Y + space;
    int width = base.ClientSize.Width - (space * 2);
    foreach (Control c in base.Controls) {
      c.SetBounds(space, top, width, c.Height);
      c.Anchor = AnchorStyles.Left | AnchorStyles.Top | AnchorStyles.Right;
      top += c.Height + space;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T11:41:47.123

您可以在您的按钮上设置 AnchorProperty，例如：

```
button1.Anchor = AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top; 
```

所以他们会水平调整大小

# c# - WPF 选项卡数据模板 - 创建新选项卡时控件保留值

> ID：15359970
> 
> 赞同：2
> 
> 时间：2013-03-12T11:31:05.277
> 
> 标签：c#, wpf, xaml, tabcontrol

我的 WPF 选项卡控件有问题。

我有一个 TabControl，ItemsSource 绑定到 ObservableCollection。我为选项卡的标题/内容部分创建了一个数据模板。内容部分包含一个自定义控件，带有一堆标签和文本框。对于在创建新选项卡时可编辑的文本框，数据会继续并出现在新选项卡中。不确定这是否是我的 XAML 或视图模型中的问题。这是我的 XAML 代码：

```
<UserControl.Resources>
  <DataTemplate x:Key="TabItemHeaderTemplate">
    <StackPanel Orientation="Horizontal">
      <TextBlock Text="{Binding AdFile.Name}" />
    </StackPanel>
  </DataTemplate>
  <DataTemplate x:Key="TabItemContentTemplate">
    <MyView:MyCustomControl/>
  </DataTemplate>
  <Style x:Key="TabItemContainerStyle" TargetType="TabItem">
    <Setter Property="Header" Value="{Binding}"/>
    <Setter Property="HeaderTemplate" 
    Value="{StaticResource TabItemHeaderTemplate}"/>
    <Setter Property="Content" Value="{Binding}"/>
    <Setter Property="ContentTemplate" 
    Value="{StaticResource TabItemContentTemplate}"/>
  </Style>
</UserControl.Resources>

<TabControl Grid.Row="3" ItemsSource="{Binding OpenedFiles}" x:Name="_myTabControl" SelectedItem="{Binding Path=CurrentDataControlViewModel, Mode=TwoWay}" SelectionChanged="TabControlSelectionChanged" ItemContainerStyle="{StaticResource TabItemContainerStyle}"/> 
```

不确定我应该提供哪些其他信息。也许这是一个常见问题，我只是没有正确设置一些东西？基本上我只想能够为每个选项卡创建一个新的控件实例......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:29:29.393

听起来好像您的 ViewModel 是单例，正在被克隆，或者您正在尝试使用现有 ViewModel 填充新选项卡。

如果您使用的是 MEF，请记住将 [PartCreationPolicy] 属性设置为 NonShared。

# entity-framework - 强制从数据库重新加载导航属性

> ID：15359973
> 
> 赞同：2
> 
> 时间：2013-03-12T11:31:12.440
> 
> 标签：entity-framework, entity-framework-5

我在刷新数据库中的数据时遇到问题。请参阅下面的代码。我在这里尝试完成的是：我创建一个 ProductProtocol (p) 并将一个 ProductProtocolContent 添加到 ProductProtocolContents 列表中。然后我将所有内容保存到数据库中。之后，我模拟了我要撤消的更改（添加另一个 ProductProtocolContent ），并且我想在使用我的存储库刷新对象后进行测试

```
var p = new ProductProtocol { Name = "test1" };

p.ProtocolContents.Add(new ProductProtocolContent { ValidFrom = DateTime.Now, Value = "9_qwe2341" });

var r = RepositoryFactory.Create<ProductProtocol>(unitOfWork);
r.Add(p);
unitOfWork.Commit();

// add another ProductProtocolContent, p.ProductProtocolContents.Count == 2
p.ProtocolContents.Add(new ProductProtocolContent { ValidFrom = DateTime.Now, Value = "9_truf7461" });

// undo the changes to the object
r.Refresh(p);

// reload the ProductProtocolContents from the database
r.LoadPropertySet(p, pc => pc.ProtocolContents);

// p.ProductProtocolContents.Count should be 1
Assert.IsTrue(p.ProtocolContents.Count == 1); 
```

我的问题是调用 Assert.IsTrue 时 p.ProtocolContents.Count == 0 。

r.LoadPropertySet() 的实现如下：

```
public void LoadPropertySet<Y>(T target, Expression<Func<T, ICollection<Y>>> spec) where Y : BaseBusinessObject
{
    context.Entry(target).Collection(spec).CurrentValue.Clear();
    context.Entry(target).Collection(spec).Load();
} 
```

使用 Entity Framework 4（使用 ObjectContext 而不是 DbContext）我只是做了这个并且有效：

```
context.LoadProperty(target, spec, MergeOption.OverwriteChanges); 
```

我将如何使用 DbSet 来执行此操作，我必须转换回 ObjectContext 还是有 DbSet 的等价物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:35:54.787

如果您不能在 DBContext 上执行此操作，则始终可以转换为 ObjectContext 并使用它的功能。

MSDN：DbContext 包装了 ObjectContext，并通过使用简化和更直观的 API 公开了 ObjectContext 最常用的功能。每当您需要使用 DbContext 不支持的功能时，您都可以访问底层 ObjectContext。

# php - PHP：在“$this”中使用“$this”？

> ID：15359977
> 
> 赞同：0
> 
> 时间：2013-03-12T11:31:20.770
> 
> 标签：php, mysql, class, join, this

可能是一个新手问题，但我是自学成才的，我正在尝试编辑一些超出我舒适区的代码，并且无法解决问题。请帮忙！

它是一个从 MySQL 数据库中选择数据并返回数组的函数。它使用其他几个“核心”功能来帮助数据库连接。

原始脚本如下所示：

```
class Core{
    protected $db, $result;
    private $rows;

    public function __construct() {
        $this->db = new mysqli('localhost', 'root', 'password', 'db');
    }

    public function query($sql){
        $this->result = $this->db->query($sql);
    }

    public function rows(){
        for($x = 1; $x <= $this->db->affected_rows; $x++){
            $this->rows[] = $this->result->fetch_assoc();
        }
    return $this->rows;
    }
}

class Chat extends Core{
    public function fetchMessages(){
        $this->query("
            SELECT  `chat`.`message`,
                    `users`.`username`,
                    `users`.`user_id`
            FROM    `chat`
            JOIN    `users`
            ON      `chat`.`user_id` = `users`.`user_id`
            ORDER BY `chat`.`timestamp`
            DESC
        ");
        return $this->rows();
    }
} 
```

问题是，在 Chat 类的 fetchMessages() 函数中，有一个 SELECT 子句将“chat”表与“users”表连接起来以获取用户名。如果出于某种原因（删除、禁止、退出等），用户表中不存在用户 ID，则 SELECT 子句不返回任何结果。

如果用户不存在，为了让它仍然返回消息，我想我需要将 JOIN 分成 2 个选择子句：

*   首先， SELECT `message`, `user_id`FROM `chat`ORDER BY `timestamp`DESC;

*   然后，SELECT `username`FROM `users`WHERE `user_id`=`$user_id`如果没有找到行，则返回“Guest”。

（我脑子里有伪代码或逻辑，我就是不会编码！）

我的问题是，因为我使用的是 $this-> 表示法，所以我不知道如何在函数中包含第二个实例。我想做的是这样的：

```
public function fetchMessages(){
    $this->query("
        SELECT `message`, `user_id` FROM `chat` ORDER BY `chat`.`timestamp` DESC
    ");
    $rows = $this->rows();
    foreach ($rows as $row) {
        $uid = $row['user_id'];

        $this[2]->query("
            SELECT `username` FROM `users` WHERE `user_id` = `$uid`;
        ");
        $user = $this[2]->rows();

        if ( $user['username'] == "" ) {
            $username = "Guest";
        } else {
            $username = $user['username'];
        }
        $return_array[] = array($row['message'],$username);
    }
    return $return_array;
} 
```

任何人都可以理解我想要做什么，并重新编写我的伪代码，使其不使用两个 '$this->' 并且实际工作吗？

我真的很感激任何帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:34:00.273

您只需更改`JOIN users`为`LEFT JOIN users`.

您当前的代码执行`INNER JOIN`，仅当*两个*表上都有要连接的行时才会生成结果行。A`LEFT JOIN`将为左侧表中存在的*所有*`NULL`行生成结果，当右侧表中不存在相应行时，替换右侧表中的值。

在您的情况下，这意味着您将获得所有消息的行，即使其中一些消息没有相应的用户。

另请参阅[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

# weblogic - 使用 Jaspic/JSR196 模块的 weblogic 中的会话失效

> ID：15359981
> 
> 赞同：1
> 
> 时间：2013-03-12T11:31:24.813
> 
> 标签：weblogic, jaspic, jsr196

我们开发了一个 jsf web 应用程序，其中包含一个由 webapp 以编程方式注册的 Jaspic/JSR196 模块。

我们按照以下博客中的说明来实现这一点： http: [//arjan-tijms.blogspot.pt/](http://arjan-tijms.blogspot.pt/)

该解决方案适用于验证用户：我们有一个接收用户名和密码并调用 request.authenticate 方法的 bean。该请求在服务器身份验证模块 (SAM) 中得到验证，并且用户通过了身份验证。

问题是，在 webapp 中导航时，会话似乎经常失效，这使得用户被重定向到登录页面。当 request.getUserPrincipal 在访问受保护的资源时返回 null 时，SAM 模块实现将用户重定向到登录页面。我们没有找到这种行为的模式。

在分析日志时，我们发现了一些抛出的异常：（有时这些异常会显示在网页中。）

**HttpSession 无效**

```
<Feb 26, 2013 5:13:30 PM GMT> <Error> <HTTP> <BEA-101020> <[ServletContext@1361767580[app:web-richfaces module:web-richfaces path:null spec-version:3.0]] Servlet failed with an Exception
java.lang.IllegalStateException: HttpSession is invalid
at weblogic.servlet.internal.session.SessionData.isNew(SessionData.java:891)
at weblogic.servlet.security.internal.SecurityModule.login(SecurityModule.java:252)
at weblogic.security.jaspic.servlet.JaspicSecurityModule.checkUserPerm(JaspicSecurityModule.java:85)
at weblogic.servlet.security.internal.SecurityModule.checkAccess(SecurityModule.java:95)
at weblogic.servlet.security.internal.SecurityModule.isAuthorized(SecurityModule.java:543)
at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:499)
at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:463)
at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2119)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

**会话失效正在使用不同的线程进行**

```
<Feb 26, 2013 5:16:12 PM GMT> <Error> <HTTP> <BEA-101020> <[ServletContext@1361767580[app:web-richfaces module:web-richfaces path:null spec-version:3.0]] Servlet failed with an Exception
    java.lang.IllegalStateException: Session invalidation is in progress with different thread
    at weblogic.servlet.internal.session.SessionData.invalidate(SessionData.java:880)
    at weblogic.servlet.internal.ServletRequestImpl$SessionHelper.updateSessionId(ServletRequestImpl.java:3215)
    at weblogic.servlet.internal.ServletObjectsFacadeImpl.updateSessionId(ServletObjectsFacadeImpl.java:54)
    at weblogic.servlet.security.internal.SecurityModule.generateNewSession(SecurityModule.java:265)
    at weblogic.servlet.security.internal.SecurityModule.login(SecurityModule.java:253)
    at weblogic.security.jaspic.servlet.JaspicSecurityModule.checkUserPerm(JaspicSecurityModule.java:85)
    at weblogic.servlet.security.internal.SecurityModule.checkAccess(SecurityModule.java:95)
    at weblogic.servlet.security.internal.SecurityModule.isAuthorized(SecurityModule.java:543)
    at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:499)
    at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:463)
    at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2119)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
    at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

**响应已提交**

```
<Feb 26, 2013 5:06:16 PM GMT> <Error> <HTTP> <BEA-101020> <[ServletContext@1361767580[app:web-richfaces module:web-richfaces path:null spec-version:3.0]] Servlet failed with an Exception
java.lang.IllegalStateException: Response already committed
at weblogic.servlet.internal.ServletResponseImpl.objectIfCommitted(ServletResponseImpl.java:1651)
at weblogic.servlet.internal.ServletResponseImpl.sendError(ServletResponseImpl.java:658)
at weblogic.security.jaspic.servlet.JaspicSecurityModule.checkUserPerm(JaspicSecurityModule.java:87)
at weblogic.servlet.security.internal.SecurityModule.checkAccess(SecurityModule.java:95)
at weblogic.servlet.security.internal.SecurityModule.isAuthorized(SecurityModule.java:543)
at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:499)
at weblogic.servlet.security.internal.WebAppSecurity.checkAccess(WebAppSecurity.java:463)
at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2119)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2089)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2074)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1513)
at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:254)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

以下日志条目显示未找到有效会话，因此用户被重定向到登录页面：

```
<HttpRequest@207744527 - /prototype-web-richfaces/pages/customer/customer.jsf: SessionID: MmGLRsrCKrVs2ms2ZYcJbxB1LLngk7pZcjPP4Fd071b1JJLPyLTg!1600091307 found in cookie header>
<HttpRequest@207744527 - /prototype-web-richfaces/pages/customer/customer.jsf: SessionID= MmGLRsrCKrVs2ms2ZYcJbxB1LLngk7pZcjPP4Fd071b1JJLPyLTg found for WASC=ServletContext@1361767580[app:web-richfaces module:web-richfaces path:/prototype-web-richfaces spec-version:3.0]>
<HttpRequest@207744527 - /prototype-web-richfaces/pages/customer/customer.jsf: Trying to find session: MmGLRsrCKrVs2ms2ZYcJbxB1LLngk7pZcjPP4Fd071b1JJLPyLTg!1600091307>
<HttpRequest@207744527 - /prototype-web-richfaces/pages/customer/customer.jsf: Trying other contexts to find valid session for id: MmGLRsrCKrVs2ms2ZYcJbxB1LLngk7pZcjPP4Fd071b1JJLPyLTg!1600091307>
<HttpRequest@207744527 - /prototype-web-richfaces/pages/customer/customer.jsf: Couldn't find valid session for id: MmGLRsrCKrVs2ms2ZYcJbxB1LLngk7pZcjPP4Fd071b1JJLPyLTg!1600091307>
[[ACTIVE] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)'] INFO authentication.jaspic.TestServerAuthModule - Request URI: /prototype-web-richfaces/pages/customer/customer.jsf
[[ACTIVE] ExecuteThread: '6' for queue: 'weblogic.kernel.Default (self-tuning)'] DEBUG authentication.jaspic.TestServerAuthModule - Principal is null. Redirecting to login page. 
```

似乎容器使 Http Sessions 无效。但我们无法理解为什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:00:36.080

添加到Lan的问题；您使用的是什么版本的 WebLogic？如果您不进行身份验证，您是否也有这些会话问题？

此外，您是只有一个应用程序在 WebLogic 上运行，还是很多？请注意，该博客在注册时提到了“null”解决方法；如果您完全遵循该方法，您将为在该 WebLogic 实例上运行的*所有应用程序注册该模块。*或者，您可以尝试该模式`server [space] [context path]`，例如`"server /prototype-web-richfaces"`（参见博文第 10 步中的表格）。请注意，Java EE 7 的 JASPIC MR[修复了这个问题](http://java.net/jira/browse/JASPIC_SPEC-1)。

如果您正在调用`request.authenticate`，请意识到您的 SAM 将在请求中间被调用（如果您只是请求受保护的资源，它将在请求开始时被调用）。如果您尝试创建新会话并使用`request.authenticate`. JSF 操作方法通常可以工作，但要警惕您已安装的任何可能在此之前编写某些内容的 Servlet 过滤器。

在“响应已提交”的情况下，看起来 WebLogic 正在尝试发送错误页面，但该页面无法发送，因为已经将某些内容写入响应。您可能想检查那个根错误是什么。

对于 OmniFaces 项目（实际上是 OmniSecurity 子项目），我们[创建了一个 SAM](https://github.com/omnifaces/omnisecurity/blob/master/src/org/omnifaces/security/jaspic/OmniServerAuthModule.java)，它可能会给您另一个示例。不幸的是，那个特定的 SAM 有点复杂，所以它可能不是最好的学习例子，但如果你想看到它在实际应用程序中的使用；还有[一个例子](https://github.com/javaeekickoff/java-ee-kickoff-app)（我已经在 WebLogic 12c 等上测试过）。

# android - 如何隐藏和显示状态栏

> ID：15359982
> 
> 赞同：4
> 
> 时间：2013-03-12T11:31:28.127
> 
> 标签：android, statusbar

只是它，我找到了如何隐藏标题栏，但我没有找到如何隐藏/显示按下按钮的状态栏示例。有可能的？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:33:45.307

我将使用以下内容添加和删除全屏标志：

```
// Hide status bar
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
// Show status bar
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:23:10.367

隐藏状态栏

在您的活动中使用此代码

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

在 Manifest 文件中更改应用程序主题，如下所示

```
 android:theme="@android:style/Theme.Black.NoTitleBar" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-03T22:17:14.773

对于表演部分不起作用的人，您可以尝试以下代码

**显示状态栏**

```
 if (Build.VERSION.SDK_INT < 16) {
              getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
    }
    else {
       View decorView = getWindow().getDecorView();
      // show the status bar.
       int uiOptions = View.SYSTEM_UI_FLAG_VISIBLE;
       decorView.setSystemUiVisibility(uiOptions);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T08:10:14.793

参考 - [https://developer.android.com/training/system-ui/immersive.html](https://developer.android.com/training/system-ui/immersive.html)

```
// This snippet shows the system bars. It does this by removing all the flags
// except for the ones that make the content appear under the system bars.
private void showSystemUI() {
    mDecorView.setSystemUiVisibility(
            View.SYSTEM_UI_FLAG_LAYOUT_STABLE
            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN);
} 
```

虽然操作栏与状态栏重叠。

# database - 从返回空输入的表单中搜索数据库

> ID：15359985
> 
> 赞同：1
> 
> 时间：2013-03-12T11:31:31.003
> 
> 标签：database, forms, search, string

我想使用表单填写的某些字段在我的数据库中进行搜索，但如果某些字段留空，我不想包含它们，哪种查询可以帮助我实现这一目标？目前我正在使用如下查询：

```
 Select * from DATABASE where COLUMN='form_input'; 
```

但是由于我的表单将返回空，它会尝试选择具有空条目的行，但这次我想查看数据库中所有行的结果，即我想通过以下方式使过滤器无效`COLUMN='form_input'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:37:23.457

由于我们不知道您的服务器端脚本语言 - psheuducode 应该是 -

```
if(request['form_input']!=null)
    Select * from DATABASE where COLUMN='form_input';
else
    Select * from DATABASE; 
```

此外，如果 form_input 有很多字段，那么我们可以设计我们的代码，例如 -

```
String wherequery = "";

if(request['form_input1']!=null)
{
    wherequery = wherequery + " COLUMN='form_input1' ";
}
if(request['form_input2']!=null)
{
    wherequery = wherequery + " And "
    wherequery = wherequery + " COLUMN='form_input2' ";
}
if(request['form_input3']!=null)
{
    wherequery = wherequery + " And "
    wherequery = wherequery + " COLUMN='form_input3' ";
}
....
And so on
....

String selectQuery = "";
if(wherequery == "")
{
       selectQuery = "Select * from TABLE";
}
else
{
       selectQuery = "Select * from TABLE where" + wherequery ;
}

execute (selectQuery); 
```

请注意我们在`pseudo code`这里使用。我们可以采用表单输入并为每个不为空的输入连接查询。

如果我们发现连接的字符串是空白字符串，我们将选择整个表。

否则

我们将使用 where 子句查询进行选择。

希望，这可以帮助你。

# android - 取消 ProgressDialog 并停止线程

> ID：15359989
> 
> 赞同：4
> 
> 时间：2013-03-12T11:31:52.487
> 
> 标签：android, multithreading, progressdialog

我有一个线程运行多个操作一次，我想在用户取消`ProgressDialog`.

```
public void run() {

    //operation 1

    //operation 2

    //operation 3

    //operation 4
} 
```

这个线程只运行一次，所以我不能实现一个循环来检查他的线程是否应该还在运行。

这是我的 ProgressDialog ：

```
//Wait dialog
m_dlgWaiting = ProgressDialog.show(m_ctxContext, 
                                    m_ctxContext.getText(R.string.app_name), 
                                    m_ctxContext.getText(R.string.msg_dlg_analyse_pic), 
                                    true, //indeterminate
                                    true,
                                    new OnCancelListener() {
                                        @Override
                                        public void onCancel(DialogInterface dialog) {
                                            m_bRunning = false;
                                        }
                                    }); 
```

由于我不知道如何停止线程，通过循环对线程的操作进行排序以查看它是否仍应运行是否正确，或者有更好的方法吗？

```
public void run() {
    int op = 0;
    while(m_bRunning) {
       switch(op) {
          case 0 :
              //operation 1
              break;
          case 1 :
              //operation 2
              break;
          case 2 :
              //operation 3
              break;
          case 3 :
              //operation 4
              break;
       }
       op++;
    }
} 
```

即使使用此解决方案，如果线程中的操作过多，也可能难以对操作进行排序。有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T11:38:48.820

使用回调或 AsyncTask

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
final AsyncTask<Void, Void, Void> task = new AsyncTask<Void, Void, Void>() {
        private ProgressDialog dialog;

        @Override
        protected void onPreExecute()
        {
            this.dialog = new ProgressDialog(context);
            this.dialog.setMessage("Loading...");
            this.dialog.setCancelable(true);
            this.dialog.setOnCancelListener(new DialogInterface.OnCancelListener()
            {
                @Override
                public void onCancel(DialogInterface dialog)
                {
                    // cancel AsyncTask
                    cancel(false);
                }
            });

            this.dialog.show();

        }

        @Override
        protected Void doInBackground(Void... params)
        {
            // do your stuff
            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {
            //called on ui thread
            if (this.dialog != null) {
                this.dialog.dismiss();
            }
        }

        @Override
        protected void onCancelled()
        {
            //called on ui thread
            if (this.dialog != null) {
                this.dialog.dismiss();
            }
        }
};
task.execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:47:04.043

您可以像下面这样使用 Asynctask

```
FetchRSSFeeds fetchRss = new FetchRSSFeeds()
fetchRss.execute();

private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage(getResources().getString(
                R.string.Loading_String));
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Write your RUN method code here
             */
           if (isCancelled()) {

             if (dialog.isShowing()) {
                dialog.dismiss();
             }
           }

            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

    }
} 
```

当您想取消后台进程时，请执行以下操作

```
if (fetchRss.getStatus() == AsyncTask.Status.RUNNING) {
    fetchRss.cancel(true);
} 
```

# java - 片段删除问题

> ID：15359993
> 
> 赞同：2
> 
> 时间：2013-03-12T11:32:01.720
> 
> 标签：java, android, fragment

我今天只是学习片段。我按下一个按钮，它会添加/删除一个片段。但是，如果我尝试删除片段，除了我想要删除的片段之外的每个片段都被删除，为什么？第一次按下正确添加了一个片段。

```
Button2 fragment:

 Button button = (Button) view.findViewById(R.id.button2);
        button.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {

              ButtonFragment fragment = new ButtonFragment();
              if (fragment != null && fragment.isVisible()) {

                  FragmentManager fragmentManager = getFragmentManager();

                  FragmentTransaction transaction =  fragmentManager.beginTransaction(); 
                  transaction.remove(fragment).commit();

              }
              else if(!fragment.isVisible())
              {
                  FragmentManager fragmentManager = getFragmentManager();

                  FragmentTransaction transaction =  fragmentManager.beginTransaction(); 
                  transaction.add(R.id.fragment_container, fragment ).commit();
  }       

          }
        });
        return view;
      }
} 
```

我在 xml 中有两个这样的片段：当我单击按钮时，我希望添加未在 xml 中定义的片段，它是。但是，下次我按下按钮时，应该会删除该片段。除了那个片段之外，一切都被删除了。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:background="#123456"
    android:id="@+id/fragment_container"  >

    <fragment
        android:id="@+id/TimeFragment"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="match_parent"
        class="com.example.myfragment.TimeFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

    <fragment
        android:id="@+id/Button2Fragment"
        android:layout_width="0dp"
        android:layout_weight="3"
        android:layout_height="match_parent"
        class="com.example.myfragment.Button2Fragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:39:21.693

您不能删除`Framgnet`使用 XML 添加的。如果你想通过`.remove`方法移除片段，你应该首先通过方法将它添加到你的布局中`.add`，而不是将它嵌入到 XML 文件中。在这种情况下，您只能`.show`或.`.hide``Fragments`

**更新：**

要`ButtonFragment`动态添加，请执行以下操作：

```
ButtonFragment buttonsFragment = new ButtonFragment();
newfragmentTransaction = fragmentManager.beginTransaction();
newfragmentTransaction.add(R.id.containerForFragments, buttonsFragment ).commit(); 
```

**更新2：** 此代码：

```
 Button button = (Button) view.findViewById(R.id.button2);
    button.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {

          ButtonFragment fragment = new ButtonFragment();
          if (fragment != null && fragment.isVisible()) {

              FragmentManager fragmentManager = getFragmentManager();

              FragmentTransaction transaction =  fragmentManager.beginTransaction(); 
              transaction.remove(fragmentManager.findFragmentById(R.layout.activity_main)).commit();

          }
          else if(!fragment.isVisible())
          {
              FragmentManager fragmentManager = getFragmentManager();

              FragmentTransaction transaction =  fragmentManager.beginTransaction(); 
              transaction.add(R.layout.activity_main, fragment ).commit();
          }       

      }
    }); 
```

应该从`Activity`而不是从运行`Fragment`。

# javascript - 擦除画布中的功能

> ID：15359997
> 
> 赞同：0
> 
> 时间：2013-03-12T11:32:06.407
> 
> 标签：javascript, html, canvas

我需要擦除画布上的内容。我可以通过使用'globalCompositeOperation =“destination-out”'来实现这一点。我已经将绘制坐标存储在我的 json 对象中，但是在擦除之后我需要更新我的 json 对象。我试图在鼠标移动时（擦除时）捕捉它的 x,y 坐标。然后我将相同的内容与我以前的商店对象匹配并更新了相同的内容。但这是一个相当大的过程，会导致我的表现下降。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T21:40:26.007

这将清除画布的所有内容。（假设 ctx 是您的上下文，而 width 和 height 是画布的宽度和高度。

```
ctx.clearRect(0, 0, width, height) 
```