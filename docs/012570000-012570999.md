# StackOverflow 问答 12570000-12570999

# scala - scala 否则怎么写

> ID：12570005
> 
> 赞同：24
> 
> 时间：2012-09-24T17:34:25.610
> 
> 标签：scala

我是 scala 的新学习者，我正在尝试运行此示例代码

```
 def isLast(c: Int, r: Int):Int ={
   if(r == 1)
   {
   return 1;
   }

  else if (r == c){
   return 1
    }
   } 
```

但它给了我编译时错误，说

```
Multiple markers at this line
- type mismatch;  found   : Unit  required: Int
- type mismatch;  found   : Unit  required: Int 
```

请帮助我，并建议我一些学习 scala 的好网站。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-24T17:36:51.973

首先，让我们稍微清理一下您的代码：

```
def isLast(c: Int, r: Int):Int = {
  if(r == 1)
    return 1
  else if (r == c)
    return 1
  // but what about when r is neither 1 nor c ??
} 
```

所以你告诉 scala 如果`r`是 1，则返回 1，如果是，则`r == c`返回 1。这很好。但是，如果您希望该方法返回一个 Int，则它必须在*每种*情况下都返回一个。所以 Scala 抱怨是因为它不知道 Int 在`r`既不是 1 也不是时要返回什么`c`。

解决方法是添加一个`else`子句而不是返回一些其他 Int。

作为附加说明，您可以并且应该在`return`此处省略关键字，让 Scala 隐式知道 if-else 表达式的结果，作为函数体中的最后一个表达式，应该返回：

```
def isLast(c: Int, r: Int):Int = {
  if(r == 1)
    1
  else if (r == c)
    1
  else
    0 // or some other Int
} 
```

最后一点，如果您有一个名称以 开头的函数`is`，那么它可能应该返回一个布尔值。换句话说，如果输入*是 last*，则返回 true，否则返回 false。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-24T18:08:30.043

我怀疑你是想`1`作为`true`. 不; 它不是。

你的逻辑是：

```
def isLast(c: Int, r: Int): Boolean = r == 1 || r == c 
```

`: Boolean`类型注释是可选的。在这里省略它是安全的，因为从右侧的简短表达式和您对方法的命名中，返回类型是什么非常明显。当 1 行时不要使用 10 行代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T17:37:01.567

你没有“else”子句，只有一个“else if”，所以你的函数不能保证返回一个整数。如果它同时满足这两个条件，您将什么也不返回，这是一个“单位”返回类型。你需要明确地说`else 0`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-24T11:26:23.323

我们可以简单地编写 If Else 语句：

```
scala> object TestIfElse{
def main(args: Array[String]){
var id = 10
if(id == 10)
println("Id is "+id)
else
println("Id is different")
}    } 
```

使用以下方法调用 Main 方法：

```
scala>TestIfElse.main(Array()) 
```

输出是：

```
Id is 10 
```

# php - 将纯字符串转换为xml

> ID：12570011
> 
> 赞同：0
> 
> 时间：2012-09-24T17:35:01.797
> 
> 标签：php, xml, string

我正在使用图书网站 biblio 中的 API，在输入参数并查询一本书后，我得到了一个正常的字符串返回，由于某种原因，他们没有以 xml 格式返回字符串，我的问题......有没有简单的方法在 php 中将纯字符串转换为 xml？

**纯字符串示例**

```
Book ID: 524072799
Author: George R. R. Martin
Title: A Song of Ice and Fire, 7 Volumes 
Description: Harper Voyager, 2012\. New and in stock.. Paperback. New. Book. 
ISBN: 9780007477159
Publisher: Harper Voyager
Date: 2012
Currency: GBP
Price: 55.00
Bookseller: El Pinarillo Books 
Bookseller_Location: GBR
URL: http://www.biblio.com/details.php?dcx=524072799
Shipping Ground: 3.15 
Shipping Expedited: 3.95 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:47:43.383

这是另一种选择，您可以利用 php 数组（不需要 preg_match 或 XML）：

```
// The string returned;
$string = <<<STRING
Book ID: 524072799
Author: George R. R. Martin
......
Shipping Ground: 3.15 
Shipping Expedited: 3.95
STRING; 
```

您可以从每行拆分开始

```
$lines = explode("\n",$string); 
```

然后将其保存为数组中的键对值

```
$result = array();
foreach($lines as $line){
   list($key,value) = explode(":",$line);
   $result[trim($key)] = trim($value);
} 
```

现在你可以像这样访问anyline

```
echo $result['Book ID']; // 524072799
echo $result['Author']; //  George R. R. Martin 
```

等等。我希望这就是你要找的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:48:28.590

只需使用`explode("\n",$text)`and`foreach()`循环来写入文件：

```
$xml="<book>";
$rows = explode("\n",$text);
foreach($rows as $row){
   $pieces = explode(':',$row); //get the tag and value
   $tag = str_replace(' ','_',strtolower($pieces[0])); //make sure the tag is valid
   if (!isset($pieces[1])){$pieces[1]="";} //make sure there is a value
   $xml.="<$tag>".$pieces[1]."</$tag>\n";//add it to the xml
}
$xml.="</book>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:57:06.310

如果您确定没有选项可以取回 xml 或 json，您可以这样做。

**从响应中创建一个数组：**

```
<?php 
$str = 'Book ID: 524072799
Author: George R. R. Martin
Title: A Song of Ice and Fire, 7 Volumes 
Description: Harper Voyager, 2012\. New and in stock.. Paperback. New. Book. 
ISBN: 9780007477159
Publisher: Harper Voyager
Date: 2012
Currency: GBP
Price: 55.00
Bookseller: El Pinarillo Books 
Bookseller_Location: GBR
URL: http://www.biblio.com/details.php?dcx=524072799
Shipping Ground: 3.15 
Shipping Expedited: 3.95
';

$lines = explode('<br />',nl2br($str));

$array = array();
foreach($lines as $line){
    $line = trim($line);
    if(empty($line)){continue;}
    $line_parts = explode(':',$line);
    $array[$line_parts[0]] = $line_parts[1];
}
/*
You now have Array
(
    [Book ID] =>  524072799
    [Author] =>  George R. R. Martin
    [Title] =>  A Song of Ice and Fire, 7 Volumes
    [Description] =>  Harper Voyager, 2012\. New and in stock.. Paperback. New. Book.
    [ISBN] =>  9780007477159
    [Publisher] =>  Harper Voyager
    [Date] =>  2012
    [Currency] =>  GBP
    [Price] =>  55.00
    [Bookseller] =>  El Pinarillo Books
    [Bookseller_Location] =>  GBR
    [URL] =>  http
    [Shipping Ground] =>  3.15
    [Shipping Expedited] =>  3.95
)
*/
?> 
```

**然后从该数组创建 XML：**

```
<?php
//To create and output xml from the given array
header('Content-Type: text/xml');
$xml = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><books/>');

$node = $xml->addChild('book');
foreach($array as $key=>$value){
    $node->addChild(str_replace(' ','_',$key), trim($value));
}

//DOMDocument to format code output
$dom = new DOMDocument('1.0');
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($xml->asXML());

echo $dom->saveXML();
/*
<?xml version="1.0" encoding="UTF-8"?>
<books>
  <book>
    <Book_ID>524072799</Book_ID>
    <Author>George R. R. Martin</Author>
    <Title>A Song of Ice and Fire, 7 Volumes</Title>
    <Description>Harper Voyager, 2012\. New and in stock.. Paperback. New. Book.</Description>
    <ISBN>9780007477159</ISBN>
    <Publisher>Harper Voyager</Publisher>
    <Date>2012</Date>
    <Currency>GBP</Currency>
    <Price>55.00</Price>
    <Bookseller>El Pinarillo Books</Bookseller>
    <Bookseller_Location>GBR</Bookseller_Location>
    <URL>http</URL>
    <Shipping_Ground>3.15</Shipping_Ground>
    <Shipping_Expedited>3.95</Shipping_Expedited>
  </book>
</books>
*/
?> 
```

# asp.net-mvc-3 - 使用 AJAX 创建 Razor 单选按钮

> ID：12570014
> 
> 赞同：0
> 
> 时间：2012-09-24T17:35:13.107
> 
> 标签：asp.net-mvc-3, razor, razor-declarative-helpers

我目前有一个 Razor 视图，可以进行 AJAX (getJSON) 调用。Ajax 调用请求与我们合作的学校列表，并将数据“附加”到名为 schoolID 的@Html.DropDownListFor。

```
$.getJSON('/Account/ajaxGetSchools', function (result) {

    SchoolID.empty();
    $(result).each(function () {
        SchoolID.append(
            $('<option/>', {
                value: this.Id
            }).html(this.Nome)
        );

    }); 
```

我的新要求是用动态创建的单选按钮替换下拉列表。

如果我只是使用 html 控件，这将很容易。我会创建一组输入收音机。但从剃刀模型绑定范式来看，这似乎是草率的。但我认为我不能在 JS 中进行 @Html.RadioButton 调用。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:20:14.273

一种选择是让 AJAX 调用返回您使用 Html.RadioButton Razor 语法构建的部分视图。

当主表单提交时，您可以只解析您动态插入的单选按钮值的输入。

# c - 有人可以解释一下 C 中 signal() 语法的含义吗？

> ID：12570020
> 
> 赞同：0
> 
> 时间：2012-09-24T17:35:45.010
> 
> 标签：c, syntax, process

> **可能重复：**
> [标准信号库中的 C 声明](https://stackoverflow.com/questions/4332743/c-declaration-from-standard-signal-library)

这是对语法链接的参考。我只了解指向函数的指针的语法。但这太复杂了，请解释一下。

[http://www.cplusplus.com/reference/clibrary/csignal/signal/](http://www.cplusplus.com/reference/clibrary/csignal/signal/)

我试图理解给出的精确语法（一些我无法解决的指针混淆）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:07:25.083

`signal()`我在注释中提到的链接中的示例代码很容易理解：

```
//This is a signal handling function. When your main program gets a signal, it
// will call this function. The function just prints a message.
static void catch_function(int signal) {
    printf("Interactive attention signal caught.");
}

int main(void) {
    //register to catch the interrupt signal.
    if (signal(SIGINT, catch_function) == SIG_ERR) {
        printf("An error occurred while setting a signal handler.\n");
        return EXIT_FAILURE;
    }
    while(1)
    {
      printf("do stuff\n");
      sleep(1);
    }
} 
```

现在这段代码将永远循环（做某事），直到它得到一个 ^C (ctrl+C) 中断信号。在那个时间点，它会做我们告诉它做的任何事情：

```
mike@linux-4puc:~> ./a.out 
do stuff
do stuff
^CInteractive attention signal caught.do stuff
do stuff
do stuff
do stuff
do stuff
^CInteractive attention signal caught.do stuff 
```

信号函数定义为：

```
typedef void (*sighandler_t)(int); //this just means a pointer to a function
                                   //that looks like:  void sighandler(int)

sighandler_t signal(int signum, sighandler_t handler); 
```

意思是：

1.  指向处理信号的函数的指针可以称为“sighandler_t”
2.  满足 sighandler_t 类型的函数需要什么都不返回，并且取一个 int
3.  然后信号函数获取信号类型的参数来捕获，以及一个满足“sighandler_t”类型定义的函数。

然后在系统级别，当我们的程序运行时，如果有信号进来并且我们已经对其进行了处理，我们就会这样做，如果我们没有适当的处理，操作系统会采取默认操作。

如果您从上面的示例中删除信号调用，您会看到 ctrl+C 现在会杀死程序，而不是只允许信号处理程序运行。

回答你的问题？

# symfony - SQLSTATE[HY000]：symfony2 中的一般错误

> ID：12570025
> 
> 赞同：0
> 
> 时间：2012-09-24T17:35:56.030
> 
> 标签：symfony

当我在 symfony2 中调用存储过程时出现以下错误

SQLSTATE[HY000]：一般错误 500 内部服务器错误 - PDOException

我在控制器中有以下代码：

```
public function indexAction($name) {
    $em = $this->getDoctrine()->getEntityManager();
    $query = $em->createNativeQuery('CALL sp_demoproc_insert ()', new ResultSetMapping());
    $result = $query->execute();
    $em->flush();

    return $this->render('HomeHomeBundle:Default:index.html.twig', array('name' => $name));
} 
```

存储过程如下，

如果存在则删除过程 tmp.sp_demoproc_insert; 创建过程 tmp。`sp_demoproc_insert`() 插入`tmp`。`details`( `id`, `name` ) 值 ('11', 'xyz' );

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:35:08.357

我在尝试调用存储过程时遇到了同样的错误。然后我看到了[这个页面](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/native-sql.html#examples) 所以我尝试了这个，它对我有用：

$em->getConnection()->executeUpdate('CALL YourStoredProc ()');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-01T00:04:49.833

检查[https://github.com/doctrine/orm/issues/5497#issuecomment-162372454](https://github.com/doctrine/orm/issues/5497#issuecomment-162372454)

> **createNativeQuery() 仅适用于 SELECT 语句。**
> 
> 对 UPDATE、DELETE 或 INSERT 语句使用 $em->getConnection()->executeUpdate()。
> 
> 这是一个文档问题。

# sql - Oracle 10g SQL 排序 VARCHAR2

> ID：12570026
> 
> 赞同：6
> 
> 时间：2012-09-24T17:35:57.037
> 
> 标签：sql, oracle, sorting, oracle10g, varchar2

我在使用 oracle 10g 时遇到排序问题。不确定它是否特定于 10g。

我有下表：

```
ID  NAME
 1  A.1
 2  A.3
 3  A.4
 4  A.5
 5  A.2
 6  A.5.1
 7  A.5.2
 8  A.5.10
 9  A.5.10.1
10  A.5.3 
```

执行泛型`SELECT NAME FROM table_name ORDER BY 1`会产生：

```
A.1
A.2
A.3
A.4
A.5
A.5.1
A.5.10
A.5.10.1
A.5.2
A.5.3 
```

当这些部分的数字大于 9 时，我希望它能够正确排序，如下所示：

```
A.1
A.2
A.3
A.4
A.5
A.5.1
A.5.2
A.5.3
A.5.10
A.5.10.1 
```

我有比这更多的数字条目，长度不同，许多部分的数字段大于 10。我试图在 order by 子句中弄乱 regexp_replace() 但没有运气。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:26:16.813

试试这个

```
WITH t AS
(
  SELECT id,name,
  xmltype('<r><c>' ||replace(NAME, '.', '</c><c>')||'</c></r>') AS xmlname
  FROM table1
)

SELECT name ,id
FROM t
ORDER BY lpad(extract(xmlname,'//c[1]/text()').getstringval(), 5, '0')
||lpad(extract(xmlname,'//c[2]/text()').getstringval(), 5, '0')
||lpad(extract(xmlname,'//c[3]/text()').getstringval(), 5, '0')
||lpad(extract(xmlname,'//c[4]/text()').getstringval(), 5, '0') 
```

[这](http://www.sqlfiddle.com/#!4/03ecd/70)是一个小提琴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:55:39.507

以下内容可能会让您知道该怎么做。要对“A.”形式的值进行排序，您可以按表达式的长度后跟表达式进行排序。所以，A.1 和 A.2 在 A.10 之前，因为它们的长度更短。

您可以按以下顺序扩展它：

```
order by substr(val, 1, instr('.')),
         len(substr(val, 1, instr('.', 1, 2)),
         substr(val, 1, instr('.', 1, 2)),
         len(substr(val, 1, instr('.', 1, 3)),
         substr(val, 1, instr('.', 1, 3)) . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:09:53.403

这是一种方法。我并不是说这是唯一甚至最好的方法，但它是**一种**方法：

```
SELECT ID,
       NAME
FROM
  (SELECT ID, NAME,
       INSTR(NAME, '.', 1, 1) AS FIRST_DOT_INDEX,
       INSTR(NAME, '.', 1, 2) AS SECOND_DOT_INDEX,
       INSTR(NAME, '.', 1, 3) AS THIRD_DOT_INDEX,
       INSTR(NAME, '.', 1, 4) AS FOURTH_DOT_INDEX
     FROM test_table)
ORDER BY SUBSTR(NAME, 1, FIRST_DOT_INDEX-1),
         TO_NUMBER(SUBSTR(NAME, FIRST_DOT_INDEX+1, (CASE WHEN SECOND_DOT_INDEX>0
                                                      THEN SECOND_DOT_INDEX-1
                                                      ELSE LENGTH(NAME)
                                                    END - FIRST_DOT_INDEX))),
         TO_NUMBER(CASE WHEN SECOND_DOT_INDEX = 0 AND THIRD_DOT_INDEX = 0
                     THEN '0'
                     ELSE SUBSTR(NAME, SECOND_DOT_INDEX+1, (CASE WHEN THIRD_DOT_INDEX>0
                                                              THEN THIRD_DOT_INDEX-1
                                                              ELSE LENGTH(NAME)
                                                            END - SECOND_DOT_INDEX)) 
                   END),
         TO_NUMBER(CASE WHEN THIRD_DOT_INDEX > 0
                     THEN SUBSTR(NAME, THIRD_DOT_INDEX+1, LENGTH(NAME) - THIRD_DOT_INDEX)
                     ELSE '0'
                   END); 
```

分享和享受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T15:50:32.180

使用正则表达式可以解决您的问题，

```
select *
from new_table
  order by to_number(regexp_replace(name,'[[:alpha:].]*')); 
```

这个查询意味着我正在替换字母字符 + '。' NAME 列中的字符，转换为数字然后排序。

我希望这是有帮助的，享受！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-25T17:00:29.537

我的问题实际上在我针对类似但不相关的问题发布的另一篇文章中得到了回答。

```
Oracle SQL doesn't support lookaround assertions, which would be useful for this case:

s/([0-9](?<![0-9]))/0\1/g

You'll have to use at least two replacements:

REGEXP_REPLACE(REGEXP_REPLACE(col, '([0-9]+)', '0\1'), '0([0-9]{2})', '\1')` 
```

感谢 acheong87 的解决方案。 [Oracle SQL Regexp_replace 匹配](https://stackoverflow.com/questions/12584261/oracle-sql-regexp-replace-matching)

# tomcat - 尝试在 tomcat 上运行项目时未反映 web.xml 的更改

> ID：12570028
> 
> 赞同：0
> 
> 时间：2012-09-24T17:36:19.207
> 
> 标签：tomcat

我创建了一个简单的基于 Web 的项目，其中我将一个`jsp`文件定义为`web.xml`.

`<web-app>
<welcome-file-list> <welcome-file>welcome.html</welcome-file> </welcome-file-list> </web-app>`

我还在文件夹中创建了`welcome.html`文件。`web-content`项目在`tomcat7`.

现在我更改了`web.xml`声明`index.jsp`为默认文件

`<web-app>
<welcome-file-list> <welcome-file>index.jsp</welcome-file> </welcome-file-list> </web-app>`

我已经创建了`index.jsp`in`web-content`文件夹。但是浏览器仍然显示相同的welcome.html。我已经清理了项目。我也尝试过创建服务器的新实例。但一切都是徒劳的。我也尝试打开chrome中的URL也是如此，但它显示`HTTP 404`错误。

# c# - DbModelBuilder 并发问题

> ID：12570029
> 
> 赞同：0
> 
> 时间：2012-09-24T17:36:20.833
> 
> 标签：c#, multithreading, entity-framework, thread-safety

我写的一些代码有一个奇怪的并发问题。您首先要问的是为什么我要使用 CF 和 DbModelBuilder……嗯，我有这样的情况，我可以拥有第 N 个相同的数据库，并且我必须保持数据的分离。我正在使用 CF 来防止多个开发人员使用他们的 GUI 对我的模型进行操作时出现大量模型生成问题。唉，这是我正在做的事情的基本代码。

这两个控制台写行永远不应该被击中，但它们确实如此。

你能试试这个，让我知道问题出在哪里吗？

这是测试工具控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        for (int i = 0; i < 100; i++)
        {
            var workerObject = new Worker();
            var workerThread = new Thread(workerObject.DoWork);
            workerThread.Start();
        }
    }
}

public class Worker
{
    public void DoWork()
    {
        var connections = new List<KeyValuePair<string, DynamicDb>>
            {
                new KeyValuePair<string, DynamicDb>("db1", new MyDynamicEntityLayer("db1").DynamicDb()),
                new KeyValuePair<string, DynamicDb>("db2", new MyDynamicEntityLayer("db2").DynamicDb())
            };

        foreach (var db in connections)
        {
            if (db.Key == "db1" && db.Value.ConnectionString.Contains("db2"))
                Console.WriteLine("THIS SHOULD NEVER HAPPEN!!! db1 : " + db.Value.ConnectionString);
            if (db.Key == "db2" && db.Value.ConnectionString.Contains("db1"))
                Console.WriteLine("THIS SHOULD NEVER HAPPEN!!! db2 : " + db.Value.ConnectionString);
        }
    }
} 
```

这是实体类：

```
public class MyDynamicEntityLayer
{
    public static string ConnectionString { get; set; }
    public MyDynamicEntityLayer(string db = null)
    {
        MakeAConnectionString(db);
        Database.SetInitializer<DynamicDb>(null);
    }

    public void MakeAConnectionString(string db)
    {
        var sqlBuilder = new SqlConnectionStringBuilder();
        if (db == "db1")
        {
            sqlBuilder.DataSource = "MySqlServer";
            sqlBuilder.InitialCatalog = "db1";
            sqlBuilder.ConnectTimeout = 180;
            sqlBuilder.IntegratedSecurity = true;
        }
        else
        {
            sqlBuilder.DataSource = "MySqlServer";
            sqlBuilder.InitialCatalog = "db2";
            sqlBuilder.ConnectTimeout = 180;
            sqlBuilder.IntegratedSecurity = true;
        }

        ConnectionString = sqlBuilder.ToString();
    }

    public DynamicDb DynamicDb()
    {
        var builder = new DbModelBuilder(DbModelBuilderVersion.Latest);
        TableMappingToBuilder(builder);
        var compiled = builder.Build(Database.DefaultConnectionFactory.CreateConnection(ConnectionString)).Compile();
        return new DynamicDb(compiled);
    }

    public void TableMappingToBuilder(DbModelBuilder builder)
    {
        builder.Configurations.Add(new EntityTypeConfiguration<ConcurrencyTest>());
        builder.Entity<ConcurrencyTest>().ToTable("ConcurrencyTest", "dbo");
    }
} 
```

和我的 DbContext CS 文件：

```
public class DynamicDb : DbContext
{
    public string ConnectionString { get; set; }
    public DynamicDb(DbCompiledModel model)
        : base(MyDynamicEntityLayer.ConnectionString, model)
    {
        ConnectionString = MyDynamicEntityLayer.ConnectionString;
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 100;
    }
    public DbSet<ConcurrencyTest> ConcurrencyTests { get; set; }
}

public class ConcurrencyTest
{
    public int ID { get; set; }
    public string MyColumn { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:03:34.040

你的问题是：

```
public class MyDynamicEntityLayer
{
    public static string ConnectionString { get; set; } // STATIC PROPERTY
    ...

} 
```

所有工作线程共享存储在此属性中的单个值并争取对其进行修改。

# actionscript-3 - AS3 文本和文本框宽度

> ID：12570031
> 
> 赞同：0
> 
> 时间：2012-09-24T17:36:25.897
> 
> 标签：actionscript-3, flash, text, textbox, width

我有一个动态警报方法，它会弹出一个警报影片剪辑，告诉用户他们的搜索不成功。

```
alert("Map [" + inputTxt + "] not found."); 
```

现在，我想做一些类似的事情

```
if (alertText.textWidth > myText.text.width) {
    myText.text = "Map not found.";
} 
```

如果文本框中的总文本超过文本框本身的大小，那么这应该做的是不显示 inputTxt 变量。

我所拥有的不起作用。我愿意接受任何建议（只要它们保持简短和简洁）。

更多信息：alertText 是输入对象的字符串。myText.text 是一个文本框。我想在将它放入文本框之前检查 alertText 是否适合 myText.text 。

-奥林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:13:43.913

字符串没有 textWidth 属性。没有（简单的）方法可以提前知道您的文本是否适合，除非您使用每个字符都具有相同宽度的字体。

这是实现此目的的一种方法：

```
myText.text = alertText; //put the text in the box

if(myText.textHeight > myText.height || myText.textWidth > myText.width){
    //the text does not fit in it's entirety.
    myText.text = "Map not found.";
} 
```

这假设您不使用`autoSize`textField 的属性并且明确设置宽度/高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:17:26.987

如果要在将字符串分配给目标文本字段之前检查字符串，可以创建另一个并使用其 textFormat

```
var someShortText : String = "short string";
var someLongText : String = "very, very, very, very, long text";

function checkStringWidth(string : String, tMaxWidth : Number, tFormat : TextFormat) : Boolean {
    var tField : TextField = new TextField();
    tField.autoSize = TextFieldAutoSize.LEFT;
    tField.multiline = false;
    tField.wordWrap = false;
    tField.defaultTextFormat = tFormat;
    tField.text = string;
    return tField.width<=tMaxWidth;
}

trace(checkStringWidth(someShortText, someTF.width, someTF.defaultTextFormat));         
trace(checkStringWidth(someLongText , someTF.width, someTF.defaultTextFormat)); 
```

# php - 如何在 ajax 调用后调用 php 脚本来更新数据库以刷新列表

> ID：12570033
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:36:42.467
> 
> 标签：php, ajax, jquery

在我的应用程序中，我正在使用 jQuery ajax 在图片中显示好友列表（#LIST）。该列表正在从数据库条目中填充。

现在当我标记一个新朋友时，我需要更新数据库中的条目。然后刷新好友列表（#LIST）。

我试图通过使用 form.submit() 调用 php 脚本来更新数据库中的列表，然后我将脚本重定向到原始页面。但是，我实际上不想刷新整个页面，而只想刷新#LIST。

我不明白，如何运行 php 脚本来更新数据库，结束后，将使用 ajax 刷新我的#LIST。

我的代码如下所示：

```
 // JQuery
 $("#list").load("taggedfriends.php");
 $("#list_of_friends").load("facebookfriends.php");

 //HTML
 <div id="list"></div> // list of tagged friends
 <form id="form_update" action="updatevalues.php" method="post"  enctype="multipart/form-data">
    <div id="list_of_friends"></div> // my facebook friends
    <button type="submit" id="btn_update">Update</button>
 </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:40:30.687

是的，使用 jquery ajax 函数，并在其回调中，刷新 #list 元素。那应该做，你需要什么。

```
 $.ajax({
      url : 'your_php_script.php',
      type: 'POST'
      data : data, //json_object to send as a parameter
      success : function(returned_data){
       //refresh #list
      }
     }); 
```

# youtube-api - 如何以编程方式找出哪些频道是给定 YouTube 网络的一部分？

> ID：12570034
> 
> 赞同：10
> 
> 时间：2012-09-24T17:36:45.820
> 
> 标签：youtube-api, youtube-channels

看起来没有官方的 YouTube API 来查找 YouTube 网络列表或哪些频道是给定网络的一部分。任何想法如何找到该信息？

如果没有直接的方法，socialblade.com 使用什么算法获取近似列表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-26T02:53:42.193

我不知道这是否是诸如 socialblade 或 channelmeter 之类的网站获取网络频道的方式。但我就是这样做的。

假设我访问此视频链接：[http ://www.youtube.com/watch?v=_8AZT40gH5E](http://www.youtube.com/watch?v=_8AZT40gH5E)

在联网频道的元标记信息中，有一个属性`<meta name=attribution content=JamieOliver/>`（例如），它实际上指定了该频道所属的网络。所以我所做的是来自我正在使用的频道的一个视频，并使用这样的小功能：

```
$tags = get_meta_tags("http://www.youtube.com/watch?v=_8AZT40gH5E");
echo $network = $tags['attribution']; 
```

并且您拥有与频道关联的网络。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T03:10:53.087

目前您似乎无法使用 v3 API 获取此信息，但我相信 socialblade 所称的*网络*是内容所有者或“合作伙伴名称”。

> `<media:credit>`在 API 响应中，如果提要条目包含yt:type 属性值为合作伙伴 的标签，则该条目包含合作伙伴视频。`<media:credit role='uploader' scheme='urn:youtube' yt:display='partner_name' yt:type='partner'>`合作伙伴名称`</media:credit>`

此处描述：[https ://developers.google.com/youtube/2.0/reference#Video_Feeds](https://developers.google.com/youtube/2.0/reference#Video_Feeds)

这*可能只是将**仅*包含不同合作伙伴的视频的频道分配给该合作伙伴的“网络”的问题。（或者就像*任何*视频一样。）

编辑：由于这显然看起来不准确，我会指出分析 API 似乎确实有这些信息，但从描述来看，它似乎只允许报告您自己的“网络”频道。*话虽如此，SocialBlade 必须从某个地方*获取有关其他网络的信息：

> 参与 YouTube 合作伙伴计划的内容所有者还可以使用 API 来检索报告，这些报告汇总了与其内容所有者帐户相关联的所有 YouTube 频道的分析数据。

# objective-c - 可拉取的视图目标 c

> ID：12570037
> 
> 赞同：0
> 
> 时间：2012-09-24T17:36:53.813
> 
> 标签：objective-c, ios, view, uiview, pull

我喜欢做一个pullableview，显示一个按钮，但不像通知中心，它是一个像这样的自定义按钮： ![第一阶段](../Images/174dfbd0c3478fe4f4702d677c41a6bf.png)

第二阶段也是最后阶段：

![第二阶段](../Images/fc6eab2239b20e97129b71badecea1b2.png)

任何人都知道一个图书馆，实现这一目标的控制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:40:26.140

你为什么需要一个图书馆呢？只需自己实施即可。将自定义子视图添加到表视图或其父视图。向其添加滑动手势识别器，或实现触摸处理程序方法以通过向下移动视图来响应拉动。最后添加一个带有背景图像的按钮。

# c++ - 使用 C++ 和 QML 的 Qt 应用程序

> ID：12570038
> 
> 赞同：1
> 
> 时间：2012-09-24T17:36:57.443
> 
> 标签：c++, qt, qml

我是 Qt 新手，正在使用 Qt Creator 2.4.1 进行开发。

**问题**- 我在哪里可以找到（或有哪些）使用 QML 和 C++ 构建的示例？

我一直在寻找，但结果并不好。就像我发现使用纯 QML 的示例一样。或者演示“samegame”使用带有 QML 的 javascript。

只是为了尝试，这是我在 main.cpp 中编写的一些代码 -

```
QDeclarativeView view;
view.rootContext()->setContextProperty("game", new Game);
view.setSource(QUrl("qml/hangman/main.qml"));

view.show(); 
```

与代码相关的**问题**- 如果我使用 C++ 和 QML，main() 中的代码应该是这样的吗？

在**main.qml 中**，我将制作所需的所有不同类型的按钮和鼠标区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:48:48.403

[这是](http://doc.qt.digia.com/4.8-snapshot/qdeclarativeexamples.html)来自 Qt 文档的示例。您可能会在大多数示例中看到 C++ 代码。
通常，主要功能如下：

```
 QApplication app(argc, argv);

 QmlApplicationViewer viewer;
 viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
 viewer.setMainQmlFile(QLatin1String("path_to_qml"));
 viewer.showExpanded();

 return app.exec(); 
```

[使用 C++ 扩展 QML 功能](http://qt-project.org/doc/qt-4.8/qml-extending.html)也是一篇好文章。

# c# - c#中的实体关系使用mongodb实践

> ID：12570041
> 
> 赞同：0
> 
> 时间：2012-09-24T17:36:59.383
> 
> 标签：c#, mongodb

我正在使用 C# 中的 mongodb。

我有一个实体定义，我想从这个实体中引用另一个实体。（注意嵌入不是一个选项）

我知道我可以在第一个字段中插入一个带有另一个实体 ID 的字段。那是这样的：

```
class Person
{
    public object Id { get; set; }
    public string Name { get; set; }
    public object Pet { get; set; }  // note here I have the pet Id and not the pet.
}

class Pet
{
    public object Id{get;set;}
    .....
} 
```

现在，我在我的领域逻辑业务中插入一些罕见的机制。

然后我的问题是：是否有一些实践可以让我将此类问题隐藏到我的域层，我的意思是在我的域中我只想拥有类似的东西：

```
class Person
{
   public object Id { get; set; }
   public string Name {get; set; }
   public Pet Pet { get; set; }  // note here I have the pet.
}

class Pet
{
   public object Id{get;set;}
   .....
} 
```

在我的领域中，我希望专注于编码而不是机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:37:54.117

我的建议是不要使用 mongodb 作为关系数据库，它是一个 nosql aka document based db。在 nosql 中建模数据的推荐方法是将每个文档视为一个聚合根 (http://lostechies.com/jimmybogard/2008/05/21/entities-value-objects-aggregates-and-roots/) 即制作一个实体和值对象的区别非常关键 值对象不应该有 id。在 [http://www.codeproject.com/Articles/87757/MongoDB-and-C下面的mongodb教程中](http://www.codeproject.com/Articles/87757/MongoDB-and-C)

注释是值对象。所以主要问题是宠物一个值对象并且需要一个ID。如果没有，则从 Pet 类中删除 ID 并将 pet 嵌入到 Person 类中。如果它需要一个 ID，则在 Pet 类中保留 ID 字段，将其保存为自己的文档并将 Pet ID 存储在 Person 类中。这是 nosql 数据建模的推荐模式。

评估您的数据模型是否适合 nosql 的一个巧妙技巧是问自己此文档是否在一次旅行或文档中提供了上下文中的人（拥有宠物的人）的完整信息，那么通常您使用它不正确。尽管对于不同的 nosql 数据库，以下文章很好地传达了这个概念

[http://ayende.com/blog/4465/that-no-sql-thing-the-relational-modeling-anti-pattern-in-document-databases](http://ayende.com/blog/4465/that-no-sql-thing-the-relational-modeling-anti-pattern-in-document-databases) http://ayende.com/blog/4466/that-no -sql-thing-modeling-documents-in-a-document-database

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:56:46.257

Best practice in this regard would be to have a mapping layer between the objects that hold data and your business entities. Your business entities can have the Nested Pet object fully available while your data objects simply have an Id.

You need to be very careful in this instance that you don't end up with an N+1 select problem.

I'm curious as to why embedding a document is not an option, as that is generally the best way to address this.

# c# - 如何调试 WCF 服务 REST 类型，而无需使用元数据？

> ID：12570044
> 
> 赞同：1
> 
> 时间：2012-09-24T17:37:33.220
> 
> 标签：c#, wcf, service, wcf-data-services, wcf-client

我正在 C# Visual Studio 2010 中使用 WCF 创建服务 REST 类型。该服务接收一个 JSON 文件，然后用另一个 JSON 回复。我已经构建了一个 Windows 窗体应用程序，并通过创建通道来使服务正常工作。我只是通过 POST 发送 JSON，然后获取内容。我想将应用程序绑定为 Windows 服务（控制面板中的服务）。因此，我创建了一个 WCF 服务应用程序，但是当我调试它时，它会打开 WCF 测试客户端实用程序，但是它失败了，因为它要求提供元数据。但是，由于我使用的是 REST 架构，我认为我根本不需要使用元数据，因为我什至不想公开服务，我只想让知道服务的用户使用它们。所以，我的问题更像是如何调试 WCF 服务 REST 类型，而不必使用元数据？对我来说，

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:44:07.173

我的偏好是将 WCF 服务放在一个库中，制作一个单独的简单控制台应用程序，并在控制台应用程序中[自行托管该服务](http://msdn.microsoft.com/en-us/library/ms750530.aspx)。这使得调试非常简单。

稍后，当您想将其作为服务（在服务中）时，您可以创建一个 Windows 服务项目，只需引用服务库并将其托管在 Windows 服务应用程序中即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:44:32.010

你是对的，WcfTestClient 不适用于 WCF REST 服务。有很多方法可以做到这一点：您可以使用 Fiddler（而不是 WcfTestClient）；您可以按照您的说法创建自己的客户；您可以在测试中使用任何 HttpClient...

关于必须安装/卸载 Windows 服务的问题：除非您对 Windows 服务环境（例如用户帐户）有任何依赖，否则出于测试目的，您可以在与运行测试相同的进程中自托管您的服务. 这应该足以在大多数情况下测试服务逻辑本身。

# c# - 应用程序池停止时如何保持 FileSystemWatcher 运行

> ID：12570048
> 
> 赞同：2
> 
> 时间：2012-09-24T17:37:43.463
> 
> 标签：c#, iis, timeout, application-pool, file-structure

是否有可行的方法允许 FileSystemWatcher 类的实例继续运行，即使应用程序池由于不活动而关闭，比如一夜之间？.NET 默认为 20 分钟不活动。

理想情况下，我希望 FileSystemWatcher**始终**监听文件系统更改，因为当我们的应用程序池由于不活动而关闭时，文件被传入/传出文件存储或被修改的可能性甚至在一夜之间就存在。

谢谢。

**编辑：**对于更多上下文，我最初的想法是在我的 C# Web 应用程序中实现一个 FileSystemWatcher 实例，该实例将由 IIS 部署和运行。它的功能将是相当标准的：监听文件创建、文件删除和文件重命名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:46:17.080

IIS 确实旨在处理传入的请求，并且不适合这种类型的活动。

如果您希望`FileSystemWatcher`始终工作，最好将您的代码移动到标准 Windows 服务中。这将导致它在系统启动时执行，并继续运行，即使 IIS 未运行或处于空闲状态。

# ruby - todolist rake 中止！没有要加载的文件——调度程序

> ID：12570049
> 
> 赞同：2
> 
> 时间：2012-09-24T17:37:47.940
> 
> 标签：ruby, rake, redmine

尝试安装[https://github.com/dalyons/redmine-todos-scrum-plugin](https://github.com/dalyons/redmine-todos-scrum-plugin)插件，但是当我这样做时：

```
rake db:migrate_plugins RAILS_ENV=production 
```

发生错误：

```
rake aborted!
no such file to load -- dispatcher

Tasks: TOP => db:migrate_plugins => redmine:plugins:migrate => environment 
```

并带有痕迹：

```
rake db:migrate_plugins RAILS_ENV=production -trace
rake aborted!
no such file to load -- ace
/usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
/usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:357:in `standard_rake_options'
/usr/local/lib/ruby/1.8/optparse.rb:1298:in `call'
/usr/local/lib/ruby/1.8/optparse.rb:1298:in `parse_in_order'
/usr/local/lib/ruby/1.8/optparse.rb:1254:in `catch'
/usr/local/lib/ruby/1.8/optparse.rb:1254:in `parse_in_order'
/usr/local/lib/ruby/1.8/optparse.rb:1248:in `order!'
/usr/local/lib/ruby/1.8/optparse.rb:1339:in `permute!'
/usr/local/lib/ruby/1.8/optparse.rb:1360:in `parse!'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:425:in `handle_options'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:74:in `init'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:72:in `init'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:64:in `run'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/local/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
/usr/local/bin/rake:23:in `load'
/usr/local/bin/rake:23 
```

宝石环境：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.8.7 (2012-02-08 patchlevel 358) [amd64-freebsd7]
  - INSTALLATION DIRECTORY: /usr/local/lib/ruby/gems/1.8
  - RUBY EXECUTABLE: /usr/local/bin/ruby18
  - EXECUTABLE DIRECTORY: /usr/local/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - amd64-freebsd-7
  - GEM PATHS:
     - /usr/local/lib/ruby/gems/1.8
     - /home/redmine/gems
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "gem" => "--no-ri --no-rdoc"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

和redmine v2.1.0。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:48:21.527

我没有深入研究跟踪，因为如果您在需求部分查看 github 上的 README：

> Redmine 0.8.5 或更高版本（可能适用于早期版本，但未经测试） - 在 0.9.x 上效果最佳
> 
> Rails 2.2.1 或更高版本（注意 - 如果您使用的是 0.8.x，则必须手动安装更新的 rails 版本并编辑您的 config/enviroment.rb）

许多使用 Redmine 2.0.x 的插件不适用于 Redmine 2.1。

因此，为 0.8、0.9 版本设计的插件无法在新的 2.1.x 版本上运行/安装，我并不感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:50:41.077

您可以尝试安装 'ace' gem：

```
$ gem install ace 
```

或者将“ace”添加到 Gemfile。

# tomcat6 - Win7上的Tomcat 6用完命令行并且没有服务

> ID：12570053
> 
> 赞同：0
> 
> 时间：2012-09-24T17:37:57.737
> 
> 标签：tomcat6

上次我使用的是 Tomcat，它是 v5 或 5.5，不记得了，但我记得可以不将它作为服务安装，而只是从命令行运行它（附带一个批处理文件）或者你必须把一个放在一起，反正很容易）。浏览 T6 文档，似乎除了通过服务别无选择。

有人可以告诉我这是错误的以及如何将其作为服务运行吗？

谢谢

PS：如果您想知道，我使用 6 而不是 7 的原因是因为它是我公司软件包存储库中唯一可用的，我们必须保留在其中，即不要从 Internet 获取软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:31:24.917

我的错，`bin`包含启动批处理脚本的目录位于：

```
TOMCAT_ROOT\www\approot\default\bin>tomcat_startup.bat start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:44:35.757

> 有人可以告诉我这是错误的以及如何将其作为服务运行吗？

那么您真正想要的是：作为服务运行还是从命令行运行？如果您不喜欢该服务，只需`<Tomcat Dir>\bin\startup.bat`用于启动和`shutdown.bat`终止 Tomcat 实例。

# spring - ServiceMix中的spring异常解析camel-config.xml

> ID：12570054
> 
> 赞同：1
> 
> 时间：2012-09-24T17:38:09.470
> 
> 标签：spring, osgi, restlet, apache-servicemix

尝试在 ServiceMix 中安装和启动项目时出现以下异常。该项目在 ServiceMix 之外使用`mvn jetty:run`. 所以我知道这不是 xml 本身的问题。但我不知道问题是什么。有人能告诉我这个错误是什么意思，我该如何解决？提前致谢。

```
13:16:23,983 | ERROR | l Console Thread | ContextLoader                    | 114 - org.springframework.web - 3.0.6.RELEASE | Context initialization failed
org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [camel-config.xml]; nested exception is org.springframework.beans.FatalBeanException: Class [org.springframework.jdbc.config.JdbcNamespaceHandler] for namespace [http://www.springframework.org/schema/jdbc] does not implement the [org.springframework.beans.factory.xml.NamespaceHandler] interface
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:124)[114:org.springframework.web:3.0.6.RELEASE]
    at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:93)[114:org.springframework.web:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)[65:org.springframework.context:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467)[65:org.springframework.context:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)[65:org.springframework.context:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)[114:org.springframework.web:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)[114:org.springframework.web:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)[114:org.springframework.web:3.0.6.RELEASE]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext$1.call(HttpServiceContext.java:168)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext$1.call(HttpServiceContext.java:164)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.swissbox.core.ContextClassLoaderUtils.doWithClassLoader(ContextClassLoaderUtils.java:60)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext.addEventListener(HttpServiceContext.java:161)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.JettyServerImpl.addEventListener(JettyServerImpl.java:242)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl$Started.addEventListener(ServerControllerImpl.java:276)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.jetty.internal.ServerControllerImpl.addEventListener(ServerControllerImpl.java:127)[111:org.ops4j.pax.web.pax-web-jetty:1.0.7]
    at org.ops4j.pax.web.service.internal.HttpServiceStarted.registerEventListener(HttpServiceStarted.java:286)[113:org.ops4j.pax.web.pax-web-runtime:1.0.7]
    at org.ops4j.pax.web.service.internal.HttpServiceProxy.registerEventListener(HttpServiceProxy.java:133)[113:org.ops4j.pax.web.pax-web-runtime:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.RegisterWebAppVisitorWC.visit(RegisterWebAppVisitorWC.java:276)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.model.WebApp.accept(WebApp.java:561)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.register(WebAppPublisher.java:170)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:155)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher$HttpServiceListener.serviceChanged(WebAppPublisher.java:119)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.setService(ReplaceableService.java:114)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.access$100(ReplaceableService.java:28)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService$CollectionListener.serviceAdded(ReplaceableService.java:183)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection$Tracker.addingService(ServiceCollection.java:181)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.osgi.util.tracker.ServiceTracker$Tracked.customizerAdding(ServiceTracker.java:896)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.AbstractTracked.trackAdding(AbstractTracked.java:261)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.AbstractTracked.trackInitial(AbstractTracked.java:184)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:339)[karaf.jar:2.2.4]
    at org.osgi.util.tracker.ServiceTracker.open(ServiceTracker.java:273)[karaf.jar:2.2.4]
    at org.ops4j.pax.swissbox.tracker.ServiceCollection.onStart(ServiceCollection.java:139)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.tracker.ReplaceableService.onStart(ReplaceableService.java:146)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle$Stopped.start(AbstractLifecycle.java:121)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.lifecycle.AbstractLifecycle.start(AbstractLifecycle.java:49)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebAppPublisher.publish(WebAppPublisher.java:81)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.doPublish(WebXmlObserver.java:304)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.web.extender.war.internal.WebXmlObserver.addingEntries(WebXmlObserver.java:153)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.register(BundleWatcher.java:186)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher.access$000(BundleWatcher.java:45)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.ops4j.pax.swissbox.extender.BundleWatcher$1.bundleChanged(BundleWatcher.java:127)[122:org.ops4j.pax.web.pax-web-extender-war:1.0.7]
    at org.apache.felix.framework.util.EventDispatcher.invokeBundleListenerCallback(EventDispatcher.java:807)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireEventImmediately(EventDispatcher.java:729)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.util.EventDispatcher.fireBundleEvent(EventDispatcher.java:610)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:3761)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1787)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:918)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:905)[org.apache.felix.framework-3.0.9.jar:]
    at org.apache.karaf.shell.osgi.InstallBundle.doExecute(InstallBundle.java:55)[19:org.apache.karaf.shell.osgi:2.2.4]
    at org.apache.karaf.shell.console.OsgiCommandSupport.execute(OsgiCommandSupport.java:38)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.commands.basic.AbstractCommand.execute(AbstractCommand.java:35)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:78)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:474)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:400)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)[25:org.apache.karaf.shell.console:2.2.4]
    at org.apache.karaf.shell.console.jline.Console.run(Console.java:218)[25:org.apache.karaf.shell.console:2.2.4]
    at java.lang.Thread.run(Thread.java:619)[:1.6.0_18]
Caused by: org.springframework.beans.FatalBeanException: Class [org.springframework.jdbc.config.JdbcNamespaceHandler] for namespace [http://www.springframework.org/schema/jdbc] does not implement the [org.springframework.beans.factory.xml.NamespaceHandler] interface
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:126)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1333)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1328)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)[66:org.springframework.beans:3.0.6.RELEASE]
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)[66:org.springframework.beans:3.0.6.RELEASE]
    ... 67 more 
```

# javascript - 如何在警报框中显示数组中的所有项目？

> ID：12570055
> 
> 赞同：0
> 
> 时间：2012-09-24T17:38:20.913
> 
> 标签：javascript, jquery

这是我的代码片段：

```
onclick : function(){           // default button function 
                           form = new Object(); 
                           field = new Object();
                           form.vald = 0;
                           field.first = $('input[name$="sf_name"]');
                           field.last = $('input[name$="sf_last"]');
                           field.title = $('input[name$="sf_title"]');
                           field.company = $('input[name$="sf_company"]');
                           field.email = $('input[name$="sf_email"]');
                           field.phone = $('input[name$="sf_phone"]');
                           field.key = $('input[name$="sf_key"]');
                           fields = new Array();

                           if (!field.first.val()) {

                               fields.push("First Name");

                           }
                           if (!field.last.val()) {
                               fields.push("Last Name")

                           }
                           if (!field.title.val()) {
                               fields.push("Title")

                           }
                           if (!field.company.val()) {
                               fields.push("Company")

                           }
                           if (!field.email.val()) {
                               fields.push("Email")

                           }
                           if (!field.phone.val()) {
                               fields.push("Phone")

                           }
                           console.log(fields);
                           if (form.valid == 0) {
                               window.location = "<?php bloginfo('url'); ?>/download?viewkey="+field.key.val();
                           } else {
                               alert('Please correct the following fields before continuing: ');
                               //$('#form_487940 input').css("box-shadow", "inset #BBB 0px 0px 5px");
                           } 
```

如您所见，任何无效字段都被推入数组中，我需要在“请在继续之前更正以下字段：”之后在警报框中显示所有无效字段。

任何帮助将不胜感激，也许我可以以不同的方式获得相同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:39:12.170

[`array.join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)像这样使用：

```
alert('Please correct the following fields before continuing: \n' 
    + fields.join(", "));​​​​ 
```

会输出一个逗号分隔的列表，如

> 请在继续之前更正以下字段：
> 
> 名字，姓氏，公司

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T17:41:21.357

试试下面，

```
alert('Please correct the following fields before continuing: ' + fields.join()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T17:42:32.623

```
alert('Please correct the following fields before continuing: ' + fields.join(", ")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T17:54:42.207

您可以使用 javascript 数组的 join 方法，但验证您的代码是否更好地排序：

```
onclick: function() { // default button function 
    var
        form = {
           vald: true
        },
        field = {
            'first': $('input[name$="sf_name"]'),
            'last': $('input[name$="sf_last"]'),
            'title': $('input[name$="sf_title"]'),
            'company': $('input[name$="sf_company"]'),
            'email': $('input[name$="sf_email"]'),
            'phone': $('input[name$="sf_phone"]'),
            'key': $('input[name$="sf_key"]')
        },
        fields = [];

    var addValue = function(el, value) {
        if (!el.val()) {
            form.valid = false;
            fields.push(value);
        }
    };

    addValue(field.first, "First Name");
    addValue(field.last, "Last Name");
    addValue(field.title, "Title");
    addValue(field.company, "Company");
    addValue(field.email, "Email");
    addValue(field.phone, "Phone");

    if (form.valid) {
        //not recommended to do this, for example could be an input value
        window.location = "<?php bloginfo('url'); ?>/download?viewkey=" + field.key.val();
        //recommended  
        //window.location = $('#url').val() + '/download?viewkey=' + field.key.val();

        return;
    }

    var fieldsString = field.join(" \n ");
    alert("Please correct the following fields before continuing: \n" + fieldsString);

} 
```

或者：

```
onclick: function() { // default button function 
    var
        field = {
            'First Name': $('input[name$="sf_name"]'),
            'Last Name': $('input[name$="sf_last"]'),
            'Title': $('input[name$="sf_title"]'),
            'Company': $('input[name$="sf_company"]'),
            'Email': $('input[name$="sf_email"]'),
            'Phone': $('input[name$="sf_phone"]'),
            'key': $('input[name$="sf_key"]')
        },
        fields = [];

    $.each(field, function(i, v) {
        if (i != 'key' && !v.val()) {
            fields.push(i);
        }
    };

    if (fields.length == 0) {
        window.location = $('#url').val() + '/download?viewkey=' + field.key.val();
        return;
    }

    var fieldsString = field.join(" \n ");
    alert("Please correct the following fields before continuing: \n" + fieldsString);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:46:12.747

尝试这个

```
var field = ['Name Invalid', 'Email Invalid' , 'Phone Invalid' 
              , 'Address Invalid'];​​​​​
var alertStr = '';
$.each(field , function(i) {
    alertStr += field[i] + '\n'
 })

 alert(alertStr) 
```

检查[小提琴](http://jsfiddle.net/B4ctg/)

​这将确保每个错误都在单独的行中

如果是这种情况，您也可以使用

```
fields.join('\n'); 
```

# c# - 显示带有标签的下拉列表选择

> ID：12570057
> 
> 赞同：1
> 
> 时间：2012-09-24T17:38:23.150
> 
> 标签：c#, asp.net

我过得很开心，我想要的就是这个。

label.text = 下拉列表.text

如何使用在 Visual Studio 设计器中填充数据源的下拉列表来执行此操作？

我有一个从 dropdownlist.text 获取参数值的更新语句，为什么我不能以同样的方式设置标签的 text 属性？我想我错过了一些非常简单的东西，但我找不到它。

```
<asp:DropDownList ID="ddlEditFruit" style="Z-INDEX: 159;
        LEFT:780px; POSITION: absolute; TOP: 280px;"
        runat="server" DataSourceID="update" 
        DataTextField="fruit_id" DataValueField="fruit_id" 
        AppendDataBoundItems="True" AutoPostBack="True">
    <asp:ListItem Selected ="True" Text="" Value ="">(Select)</asp:ListItem>
</asp:DropDownList>

private void btnUpdate_Click(object sender, System.EventArgs e)
{
    if (bxStarch.Text.Trim().Length == 0)
    {
        this.lblError.Visible = true;
    }
    else
    {
        this.lblError.Visible = false;
        //string id = ddlEditFruit.SelectedValue.ToString();
        this.lblId.Visible = true;

        this.lblId.Text = ddlEditFruit.SelectedItem.Text;
        edit_fruit();
        reset_dropdowns();
        resest_dropdowns_2();
        fill_grd_fruit_id();
        fill_grd_size();
        fill_grd_progress();
        SetFocus(ddlGrade);
        change_back();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:39:54.460

在你的代码隐藏中，试试这个：

```
label.Text = dropdownlist.SelectedItem.Text 
```

`SelectedItem`将标签文本放到一些文本中，例如“John”

`SelectedValue`会将标签文本设置为某个值，例如“5”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:39:51.040

您可以尝试`SelectedValue`使用`DropDownList`:

```
label.Text = dropdownlist.SelectedValue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:00:56.417

```
label.Text = dropdownlist.SelectedValue 
```

会为你做的:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T19:04:44.117

我自己修好了。我试图在错误的点击事件中更改标签值。愚蠢的错误。

# c# - 动态类型的 MonoTouch UIViewController

> ID：12570058
> 
> 赞同：1
> 
> 时间：2012-09-24T17:38:23.870
> 
> 标签：c#, uiviewcontroller, xamarin.ios, monodevelop, dynamictype

我在 MonoTouch 中有一个 UIViewController，与 .xib 一起定义为 iPad 视图控制器。

如果我将 UIViewController 更改为使用这样的动态类型：

```
public partial class CustomCount : UIViewController<tUnit> where tUnit : struct
    {

        private tUnit someVariable;
     ... (rest of class goes here) ... 
```

然后，monoTouch 似乎不再在它的 xCode 项目中为此视图控制器生成相应的 .h 和 .m 文件。

因此，我无法再访问任何 UI 插座（因为它们在 .m 文件中定义）

如果我删除`tTUnit`动态类型，一切正常。

该`where tUnit : struct`部分对 MonoTouch 没有任何影响。

是否有任何已知的解决方案，或者我应该为我期望的每种类型创建我的班级的单独版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:19:27.437

是`struct`必需品吗？否则，您可以使用接口。

你可以这样做吗：

```
public partial class CustomCount : UIViewController
{
    //Use a static method here
    public static CustomCount Create(ISomeInterface yourVariable) { return new Customcount() { someVariable = yourVariable }; }

    //Private Constructor
    private CustomCount() { }

    private ISomeInterface someVariable;
} 
```

你可以事件只是制作`someVariable`一个公共财产或其他东西。

# php - 将 JSON 提要解析为 PHP，然后处理数据？

> ID：12570066
> 
> 赞同：0
> 
> 时间：2012-09-24T17:39:09.250
> 
> 标签：php, parsing, json

我有一个私有的 JSON 提要（按 IP 地址），我可以使用命令对其进行解析

```
$json = file_get_contents("http://#"); 
```

这就是提要的样子，并且该命令有效 - 使用 json_decode($json); 时它会正确转储数据；或 json_decode($json,true); 我做了一个 var 转储。

```
 {
    "Holder": [
        {
            "name": "Subholder One",
            "operators": [
        {
          "username": "User1",
          "status": 3
        },
        {
          "username": "User2",
          "status": 3
        },
        {
          "username": "User3",
          "status": 3
        },
        {
          "username": "User4",
          "status": 1
        }
      ]
    },
    {
      "name": "Subholder Two",
      "operators": [
        {
          "username": "User5",
          "status": 3
        }
      ]
    },
    {
      "name": "Subholder Three",
      "operators": [
        {
          "username": "User6",
          "status": 3
        }
      ]
    },
    {
      "name": "Subholder Four",
      "operators": [
        {
          "username": "User7",
          "status": 1
        },
        {
          "username": "User8",
          "status": 3
        },
        {
          "username": "User9",
          "status": 1
        }
      ]
    }
  ]
} 
```

当我使用简单的以下代码和一行数据时，**没有**file_get_contents 而是一行数据，它可以工作：

```
$obj = json_decode($json);
echo $obj->username;
echo $obj->status; 
```

当我使用 file_get_contents 它不起作用。

**我想要做的就是显示所有数据的用户名和状态（数字转换为我已经完成的短语），并单独显示用户名。**

例如，在用户 1 的个人资料页面上，我想解析他们的“用户名”和“状态”，将状态编号转换为相应的短语并显示在屏幕上。

我在这里摸不着头脑......所以感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T20:41:22.217

尝试这个：

```
$request_url ="http://mysamplefeed.com/";
$requests = file_get_contents($request_url);
$my_response = json_decode($requests);
foreach($my_response->Holder as $item){
'<p>' .$item->username; . '</p>'
'<p>' .$item->status; . '</p>'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:51:40.210

尝试

```
 $obj = json_decode($json, true);

  echo $obj['username'];
  echo $obj['status']; 
```

# mongodb - 需要为 MongoDb 建立一个适当的组合索引

> ID：12570072
> 
> 赞同：1
> 
> 时间：2012-09-24T17:39:37.417
> 
> 标签：mongodb

我有数百万条记录的庞大集合，将有 4 个字段用于获取数据，比如说`f1, f2, f3`用于过滤和`f4`数据排序。将有 3 种类型的查询：

```
1) filter by f1 AND f2, and sort by f4
2) filter by f1 AND f2 AND f3, and sort by f4
3) filter by f1 AND f2 AND few additional fields, and sort by f4 
```

所以排序总是按f4。主要使用前两种类型的查询。案例 3 中的其他字段可能是集合中的任何字段（搜索功能），因此我不会将它们用于索引。

我的建议是唯一的组合键`(f1, f2, f3, f4)`可能是最好的解决方案，但由于我几乎没有 mongoDb 的经验，所以我决定问你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:55:54.427

从前两个查询`{f1:1,f2:1,f4:1}`开始`{f1:1,f2:1,f3:1,f4:1}`。您始终可以使用`.find(...).sort({f4:1}).explain()`, 来评估给定查询的所选索引的适当性。此外，您可能会发现您对 query 的某些`f1 AND f2 AND few additional fields`查询可能会受益于其他索引，例如`{f1:1,f2:1,addField1:1,f4:1}`.

另外，请注意您是否使用`f4:1`或`f4:-1`，这取决于您是否始终按`f4`升序或降序排序。

# regex - Perl：正则表达式匹配额外的字符串

> ID：12570078
> 
> 赞同：0
> 
> 时间：2012-09-24T17:40:04.107
> 
> 标签：regex, perl

我有以下字符串案例：

*   我的 $str = "Warehouse.13.s01e01.hdtv.xor.avi";
*   我的 $str = "Warehouse.13.01x01.hdtv.xor.avi";
*   我的 $str = "Warehouse.13.season01episode01.hdtv.xor.avi";

上述情况下的 delimiter( `.`) 可以替换为`_ - \s`. 现在为了匹配上述情况，我创建了以下正则表达式，它工作正常：

```
my $regex_object = qr{.*?\d{1,2}(?:e|edosipe)?[._\- x]?\d{1,2}(?:s|nosaes)?[._\- ]?(?=\d+)(.*)}; 
```

您可以看到我必须反转要处理的字符串，`\d+`因为在后视中应该有绝对长度匹配，所以我将其转换为前瞻。

现在对于上述情况，输出`Warehouse 13`是我需要的输出。

现在的问题是，如果我`series name`不包含`numbers(13,24)`我不希望我上面的正则表达式匹配并确保我使用了`(?=\d+)`i,e if`s|season`前面是否有数字。

现在，如果我`$str`的 is`'how.i.met.your.mother.s03e13.hdtv.mkv'`它匹配上面的正则表达式和输出

```
how.i.met.your.mother.s0 
```

现在，我不知道为什么即使在使用后视以及如何纠正它之后它仍然匹配这个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:50:06.313

> 我不知道为什么它匹配这个字符串

```
.*?               "vkm.vtdh."
\d{1,2}           "31"
(?:e|edosipe)?    "e"
[._\- x]?         ""
\d{1,2}           "3"
(?:s|nosaes)?     ""
[._\- ]?          ""
(?=\d+)           "0"
(.*)              "0s.rehtom.ruoy.tem.i.woh" 
```

一个可能的解决方案是改变（两者）

```
\d{1,2} 
```

到

```
\d{1,2}(?!\d)  # Don't match just "3" of "30".
               # Bonus: Can't match part of "123". 
```

或者

```
(?>\d{1,2})    # Prevents it from matching just
               # one digit if there are two.
               # Note: Can match "12" of "123". 
```

当然，那么这`(?=\d+)`将导致整体失败。我不知道为什么它首先存在。也许你的意思是`(?!\d+)`？（在这两种情况下，`+`都是无用的。）

# php - restler 返回所有转义的双引号字符？

> ID：12570084
> 
> 赞同：0
> 
> 时间：2012-09-24T17:40:40.840
> 
> 标签：php, restler

K，所以我有这样的东西。我试图弄清楚如何*不*逃避双引号。我认为这是restler 做的......但我无法在restler 代码中找到关于我需要更改什么的文档或提示。如果我执行 str_replace('"', '*', jason_encode...)，它会很好地显示星星...所以不是 json_encode 搞砸了...：

```
....
$thisDeal = new deals_search_element();
$thisDeal->deal_name="name2";
$thisDeal->venue_address="address2";
$thisDeal->latlong=$latlong;

$myDeals[] = $thisDeal;
return json_encode( array( "deals_search"=>$myDeals )); 
```

我的输出是这样的：

```
"{\"deals_search\":[{\"deal_name\":\"test name 1\",\"deal_venue\":\"\",\"venue_address\":\"test address 1\",\"venue_city\":\"\",\"venue_state\":\"\",\"latlong\":\"1... 
```

我知道数据与代码不匹配……但请相信我，关键是……双引号被转义了。我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:27:19.993

知道了。我试图在restler自动处理它的地方对自己进行编码。我对那部分很敏感。哈哈

所以线：

```
return json_encode( array( "deals_search"=>$myDeals )); 
```

...必须变得...

```
return array( "deals_search"=>$myDeals ); 
```

# android - 从后台线程调用单独的 android 活动

> ID：12570086
> 
> 赞同：1
> 
> 时间：2012-09-24T17:40:55.123
> 
> 标签：android, android-asynctask, jetty

我一直在尝试将其嵌入到`Jetty WebServer`我的 android 应用程序中，以便该应用程序可以充当`WebServer`.

我已经能够这样做，`AsyncTask`以便它在后台运行。然后，我还能够实例化一些按预期运行的 servlet。

现在在其中一个 servlet 中，我希望 servlet 调用 an`Activity`以允许用户登录并提供一些数据并将这些数据返回给 servlet，以便可以将它们发送回用户。由于 servlet 在后台运行，我很难从 servlet 调用活动。

现在，我想知道是否有任何方法可以这样做。

任何帮助或建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:45:56.600

在 AsyncTask 的构造函数中，将 Context 对象作为参数并将其存储在本地。现在，当您需要启动下一个 Activity 时，请使用：

```
Intent intent = new Intent(mContext, Next.class);
mContext.startActivity(intent); 
```

AsyncTask 将类似于：

```
public AsyncTask MyTask...... {

    Context mContext;

    public MyTask(Context context) {
        mContext = context;
    }

} 
```

并创建它使用：

```
MyTask myTask = new MyTask(getBaseContext());
myTask.execute(); 
```

# objective-c - UINavigationController 内的 UITabBarController 中的间隙

> ID：12570087
> 
> 赞同：2
> 
> 时间：2012-09-24T17:41:07.917
> 
> 标签：objective-c, ios, ios6

我有一个包含 UITabBarController 的 UINavigationController 的根视图。标签栏控制器有两个简单的视图。当它首次在 iOS 6 模拟器或设备上启动时，第一个视图上方会出现一个间隙。切换到第二个选项卡并返回会导致间隙消失。这只是从 iOS 6 开始发生。iOS 5 工作得很好。任何想法发生了什么变化？

截屏：

![截屏](../Images/1b71638a6a9113299a0c18139c4cdfd5.png)

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];
    UIView *dummyView1 = [[UIView alloc] init];
    [dummyView1 setBackgroundColor:[UIColor redColor]];
    UIViewController *dummyViewController1 = [[UIViewController alloc] init];
    [dummyViewController1 setView:dummyView1];

    UIView *dummyView2 = [[UIView alloc] init];
    [dummyView2 setBackgroundColor:[UIColor blueColor]];
    UIViewController *dummyViewController2 = [[UIViewController alloc] init];
    [dummyViewController2 setView:dummyView2];

    NSArray *viewControllers = [NSArray arrayWithObjects:dummyViewController1, dummyViewController2, nil];

    [tabBarController setViewControllers:viewControllers];

    UINavigationController *rootNavController = [[UINavigationController alloc] initWithRootViewController:tabBarController];
    [[self window] setRootViewController:rootNavController];

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T21:33:32.713

Apple 在我相信应用程序编程指南（或者可能是 ViewController 指南）中明确告诉我们 tabBarController 不应该放在导航控制器中。您需要颠倒顺序。您可以通过切换它的控制器数组并让一组隐藏 tabBar 来使用 tabBarController。但是，任何像现在这样使用命令的尝试都注定会在某些时候失败——你可以让它在 iOS5.1 中工作，然后在 6、6.1 或 7 中看到它中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T17:04:26.387

不，您不需要颠倒顺序，Apple 需要解释原因。我浏览了他们的所有文档，但找不到这样做的合理理由。

我可以想到一个非常合理的使用这个配置。假设我想创建一个应用程序，以显示有关一组实体的类别信息，例如体育联盟中的球队。我可以使用导航控制器作为封装控制器，并使用标签栏为每个团队显示各种统计数据，例如团队或球员统计数据。你为什么要以其他方式做这样的事情？这是完全合乎逻辑的。当然，除了安抚苹果的众神。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T14:49:58.990

不知道为什么他们不允许这样做或为什么会发生“差距”，但我找到了解决方法：

```
tabController.SelectedIndex=1;
tabController.SelectedIndex=0; 
```

将选项卡推到导航控制器上后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T13:06:12.210

我找到的最佳解决方法是创建没有根控制器的 UINavigationController，将其添加到窗口，然后推送 UITabBarController：

```
navigationController = [[UINavigationController alloc] init];

[[self window] setRootViewController:navigationController];

[navigationController pushViewController:tabBarController animated:NO]; 
```

# asp.net-mvc-3 - 隐藏 ASP.NET_SessionId Cookie

> ID：12570093
> 
> 赞同：0
> 
> 时间：2012-09-24T17:41:26.410
> 
> 标签：asp.net-mvc-3, cookies, session-cookies, sessionid, sql-session-state

我编写了一个 ASP.Net MVC 应用程序，将会话信息存储在数据库中，但我可以看到会话 ID 存储在浏览器 cookie“ASP.NET_SessionId”中。这是安全风险吗？id 可以用来破解/窃取用户的会话吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:57:03.457

cookie 中的会话 ID 用于将无状态 Web 请求与服务器上存储的状态相关联。

关于安全性，我认为 ASP.NET_SessionId 不包含身份验证详细信息 - 那是 .ASPXAUTH（如果您使用的是内置的 .NET 成员资格提供程序）。我认为它可以在某些情况下被用来窃取用户会话。

特洛伊·亨特 (Troy Hunt) 的博客对此进行了很好的阅读，特别是这篇文章[对传输层保护不足的攻击的剖析，](http://www.troyhunt.com/2011/11/owasp-top-10-for-net-developers-part-9.html)其中他的数据包嗅探了麦当劳中 wifi 用户的 cookie 并以他们的身份登录。

# android - logcat 显示延迟过大设置亮度

> ID：12570094
> 
> 赞同：1
> 
> 时间：2012-09-24T17:41:28.027
> 
> 标签：android, logcat, avd, android-logcat

我在 Eclipse 中创建了一个简单的 android 应用程序，并在模拟器上运行它。它真的很慢，当我检查 logcat 时，我看到了几条“过度延迟”行。

编辑：澄清一下，该应用程序确实运行并显示了预期**的 'Enter a message sir'**。我正在研究为什么它这么慢，并认为过度延迟与滞后有关。

这是我的文件：

**模拟器设置：**

```
Target: Android 4.1 - API Level 16
CPU: ARM (armeabi-v7a)
SD Card: 9MiB
Max VM application heap size: 1024
Device Ram Size: 1024 
```

**MainActivity.java：**

```
package com.example.my.first.app;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

**AndroidManifest.xml：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.my.first.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**活动主.xml：**

```
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="horizontal" >

    <EditText android:id="@+id/welcome_message"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/welcome_message_text" 
        android:layout_weight="1"/>

    <Button android:id="@+id/editor_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/editor_button_text"   
        android:layout_weight="0"/>

</LinearLayout > 
```

**LOGCAT 日志：**

```
09-24 17:26:00.363: E/PowerManagerService(158): Excessive delay setting brightness: 420ms, mask=2
09-24 17:26:00.584: E/PowerManagerService(158): Excessive delay setting brightness: 218ms, mask=2
09-24 17:26:01.602: I/Choreographer(1750): Skipped 48 frames!  The application may be doing too much work on its main thread.
09-24 17:26:32.856: I/Choreographer(1750): Skipped 39 frames!  The application may be doing too much work on its main thread.
09-24 17:26:52.942: E/PowerManagerService(158): Excessive delay setting brightness: 158ms, mask=2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T03:09:16.480

由于您在计算机上使用模拟器，这很常见，并且与运行模拟器的计算机的性能有关，而不是与您的应用程序有关。

在插入计算机并用作模拟器的手机上，有时仍会发生这种情况，但 FAR 的发生频率较低且很少见。

很可能您的应用程序很好。

您可以通过将手机插入计算机来确认这一点，然后在没有应用程序的情况下使用手机。您将在系统的 logcat 中看到许多异常。

您还可以在手机本身上安装[Catlog](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat "目录")，并直接在手机上查看错误报告，而无需将其插入计算机。您可以在运行您的应用程序时查看是否发生这种情况，而无需运行以查看是否确实存在问题。

*注意：*在 Android 4.1+ 上，Catlog 需要 root，但在早期的 4.0 及更低版本上不需要。

# javascript - 如何检查是否设置了 Google Analytic 自定义变量（会话范围）

> ID：12570096
> 
> 赞同：3
> 
> 时间：2012-09-24T17:41:37.713
> 
> 标签：javascript, google-analytics

我正在尝试使用自定义变量在会话范围内跟踪用户类型。在每个页面加载时，我想检查 GA 变量是否存在，如果不存在，则根据 cookie（访问者、注册、高级）将其设置为 3 个值之一。

```
 TrackUser: function () {
        var index = 5; //slot 5
        var scope = 2; //set scope to session level
        var key = "UserType";
        var value;
        if (_gaq != undefined) {
            _gaq.push(function () { //this is async
                var pageTracker = _gat._getTrackerByName();    //Gets the default tracker.
                var vis = pageTracker._getVisitorCustomVar(5); //this should return the 'usertype' if its been set
                //if no GA variable exists then lets set it
                if (vis == undefined) {    // !? THIS IS ALWAYS 'undefined' ?!

                    value = getUserType(); //get the users type

                    //send custom var to GA
                    _gaq.push(['_setCustomVar',
                     index,   // This custom var is set to slot #1\.  Required parameter.
                     key,     // The name acts as a kind of category for the user activity.  Required parameter.
                     value,   // This value of the custom variable.  Required parameter.
                     scope    // Sets the scope to session-level.  Optional parameter.
                    ]);
                }
            });
            }

    } 
```

此函数在轨道事件推送“_trackEvent”之前被调用，因此它可能在调用“_trackEvent”之前未完成。即便如此，它不会在下一页加载时发送吗？

还是我误解了 GA 如何使用带有自定义变量的 cookie？

**顺便说一句**：如果有更简单的方法来获取自定义变量（也许不必向 Google 发送请求），那将是理想的。

## 更新

在阅读更多文档后，我意识到“_getVisitorCustomVar”仅在将自定义变量设置在“访问者范围”（3）时才返回。谷歌显然在他们的服务器上跟踪“会话范围”(2) 变量并且不设置客户端 cookie。在我找到更优雅的解决方案之前，我只是设置自己的会话 cookie 来检查我是否已向 GA 发送有关用户类型的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T23:20:58.143

只能从谷歌 API 调用中获取“访问者范围”值`_getVisitorCustomVar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T14:42:24.247

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'xxxxxxxxxxxxxxxx']);

   _gaq.push(function() {
        var pageTracker = _gat._getTrackerByName();
        var userTypeVar = pageTracker._getVisitorCustomVar(1);
        if ( userTypeVar == 'Guest' ) {

        }
    });

  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

# xcode - Xcode Version Controll GIT - 在提交之后有未提交的更改

> ID：12570098
> 
> 赞同：1
> 
> 时间：2012-09-24T17:41:47.497
> 
> 标签：xcode, git

当我在 Xcode 中提交我在我的项目中所做的更改，然后想将它们推送到服务器上时，xcode 说我会有未提交的更改，但我只是在提交......

因此我不能推或拉到服务器:-(

我没有足够的声誉来发布图片，所以我将其上传到 imageshack [http://imageshack.us/a/img268/7136/bildschirmfoto20120924u.png](http://imageshack.us/a/img268/7136/bildschirmfoto20120924u.png)

我已经将 .dsstore 文件添加到 .gitignore

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:33:07.933

好的，我想我明白了。Xcode 没有列出像 .DS_Store 这样的隐藏文件，所以我不得不使用 .DS_Store 从版本控制中删除该文件`git rm --cached .DS_Store`。`git status`谢谢

# java - Java 显示一个数的素数分解

> ID：12570099
> 
> 赞同：8
> 
> 时间：2012-09-24T17:41:50.580
> 
> 标签：java, factorization

因此，对于我的任务，我必须编写一个程序，要求用户输入整数，然后打印出该数字的素数分解。这就是我所拥有的：

```
import java.util.Scanner;

public class PrimeFactor {
    public static void main(String[] args) {
        System.out.print("Enter a positive number: ");
        Scanner scanner = new Scanner (System.in);
        int number = scanner.nextInt();
        int count;
        for (int i = 2; i<=(number); i++) {
            count = 0;
            while (number % i == 0) {
                number /= i;
                count++;
                if (count == 0) {
                    continue;
                }
            }
            System.out.println(i+ "**" + count);
        }
    }
} 
```

我现在遇到的问题是，每当我使用数字 15453 运行它时，我都会得到一个从 1 到 100 的每个因子及其指数的列表，当我只想要主要因子时，我不知道如何继续。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:53:48.903

你快到了！将`if-continue`块移到`for`循环之外。否则，它会“继续”最里面的循环，而不是您想要的循环。

```
while (number % i == 0) {
    number /= i;
    count++;
}
if (count == 0) {
    continue;
}
System.out.println(i+ "**" + count); 
```

或者，您可以将`System.out.println`调用包含在 中`if (count != 0)`，因为它是 : 之后的唯一语句`continue`：

```
while (number % i == 0) {
    number /= i;
    count++;
}
if (count != 0) {
    System.out.println(i+ "**" + count);
} 
```

您在 ideone 上的程序：[链接](http://ideone.com/fGkcA)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-27T10:00:53.367

```
public class _03_LargestPrimeFactor {

public static void main(String[] args) {

    long a = 600851475143L;

    for(int i=2; i<(a/i); i++){                         // no factors would exist beyond a/i for a particular i

        while( a%i == 0){                               // if i is a factor 
            a = a/i;                                    // divide a by i else we wont get a prime number
            System.out.print(a + " x " + i + "\n");
        }
    }

    if(a > 1)
    System.out.println("largest prime factor: " + a);
}

} 
```

安慰：

8462696833 x 71

10086647 x 839

6857 x 1471

最大素数：6857

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-04T16:28:59.047

一方面，你`continue`在 while 循环内，它没有任何作用。最小的修复是

```
public class PrimeFactor {
    public static void main(String[] args) {
        System.out.print("Enter a positive number: ");
        Scanner scanner = new Scanner (System.in);
        int number = scanner.nextInt();
        int count;
        for (int i = 2; i<=(number); i++) {
            count = 0;
            while (number % i == 0) {
                number /= i;
                count++;
            }
            if (count == 0) {
                 continue;
            }
            System.out.println(i+ "**" + count);
        }
    }
} 
```

但是您还有其他一些问题：

*   您的代码没有正确“分解”（具有讽刺意味的是，在这种情况下，“分解”意味着它没有分解为函数
*   变量名选择不当
*   `continue`当 an`if`足够时，您使用 goto （在这种情况下）

更好的代码将是

```
public class PrimeFactor {
    public static void main(String[] args) {
        System.out.print("Enter a positive number: ");
        Scanner scanner = new Scanner (System.in);
        printFactors(scanner.nextInt());
    }
    public static void printFactors(int product) {
        for (int factor = 2; factor <= product; factor++) {
            int exponent = 0;
            while (product % factor == 0) {
                product /= factor;
                exponent++;
            }
            if (exponent > 0) {
                System.out.println(factor+ "**" + exponent);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T20:00:24.470

不知道为什么要打印两次乘法！这是清理后的代码：

```
public static void printPrimeNumbers(int prime) {

    int n;

    for (int i = 2; i <= prime; i++) {
        n = 0;
        while (prime % i == 0) {
            prime /= i;
            n++;

        }

        if (n != 0) {
            for (int j = n; j > 0; j--) {
                System.out.print(i);

                if (prime != 1) {
                    System.out.print("*");
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:51:05.403

你很接近：

1.  System.out.println 语句必须在你的 for 循环内，并且只显示`count>0`
2.  删除`if(count == 0) { continue; }`，它没用，因为你只是增加了`count`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-04T15:14:00.337

您还可以从以下功能中获得一些帮助。

```
public int getPrimeNumber(double number) {
    int j = 0;
    while (number % 2 == 0) {
        number = number / 2;
        j = 2;
    }

    for (int i = 3; i <= number; i = i + 2) {
        while (number % i == 0) {
            number = number / i;
            j = i;
        }
    }

    return j == 0 ? 1 : j;
} 
```

此函数将返回给定数字的最大素数。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-31T18:33:24.227

从 while 循环中删除 if (count == 0) {continue;} 语句并将其放在 for 循环中。:)

```
for (int i = 2; i<=(number); i++) {
        count = 0;
        while (number % i == 0) {
            number /= i;
            count++;
        }
        if(count==0) continue;
        System.out.println(i+ "**" + count);
    } 
```

# php - 使用ckeditor编辑页面上的许多div，然后将HTML保存到文件

> ID：12570108
> 
> 赞同：1
> 
> 时间：2012-09-24T17:43:05.797
> 
> 标签：php, javascript, codeigniter, ckeditor, wkhtmltopdf

嘿伙计们，我正在实现一个页面，上面有大约 9 个单独的 div，我希望每个 div 都可以使用 ckeditor 单独编辑。该页面是通过带有 codeigniter 的 php 动态生成的，但我希望用户能够在完成 HTML 之前对其进行更改。我目前已经实现了 ckeditor 来编辑 div，如下所示：http: [//nightly.ckeditor.com/7614/_samples/divreplace.html](http://nightly.ckeditor.com/7614/_samples/divreplace.html)

但是，在用户完成后，我希望能够将 HTML 保存在我的服务器上，因为我将使用 wkhtmltopdf 将页面转换为 PDF。正如您在示例中看到的那样，一旦您单击任何 div，它就会打开一个新编辑器。当用户完成编辑页面时，我需要一种方法来提交更改，并且因为我试图将生成的 HTML pdf 格式，所以我不能包含按钮或类似元素。我也担心，因为在这个例子中你不能隐藏所有的编辑器，你只能打开一个新的，PDF 将显示 ckeditor 框。我在想我可以在 javascript 事件中获取文档并通过 ajax 请求将其发送到 php 函数，该函数会将其保存到文件中，然后 PDF 文件，但我不确定如何触发 html 提交事件或替换剩余的编辑框。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:47:35.070

为什么不制作第二页并将数据发布到其中？

您可以免费获得预览和返回编辑选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T08:23:36.677

您可以简单地将要转换为 PDF 的内容包装到 div 中，并在提交表单时将其序列化为隐藏字段：

```
<form id="yourForm" method="post" action="foo">
    <!-- This DIV will be serialized... -->
    <div id="yourContentToBeSaved">
        <!-- Your editors go here... -->
        <div class="editable">
            Foo
        </div>
        <div class="editable">
            Bar
        </div>
        ...
    </div>
    <input id="hidden" type="hidden" />
    <button type="submit">Serialize the DIV, then save the form</button>
</form> 
```

jQuery代码：

```
$( '#yourForm' ).submit(function() {
    // Destroy all the editors.
    for( var instance in CKEDITOR.instances )
        CKEDITOR.instances[ instance ].destroy();

    // Store #yourContentToBeSaved HTML in a hidden field. You can 
    // retrieve these data with PHP on the server-side once the form is submitted.
    $( '#hidden' ).val( $( '#yourContentToBeSaved' ).html() );
}); 
```

瞧！

# android - 在同一个应用中实现 mobfox 和 admob

> ID：12570109
> 
> 赞同：1
> 
> 时间：2012-09-24T17:43:08.520
> 
> 标签：android, admob, mobfox

我有一个使用 MobFox 和 AdMob 的应用程序。如果 MobFox 广告未展示，则会显示 AdMob 广告。我最近将 android sdk 升级到 20，除了许多错误和减慢的 eclipse 之外，mobfox 向我展示了很多错误。我升级了 mobfox sdk 并更改了代码以显示 mobfox 广告。然后我想让 admob 广告工作，但我不断收到错误。我将其更新为最新的 sdk，6.1.0。 **问题是，MobFox 和 AdMob 都使用 AdView。**

如果我添加`import com.adsdk.sdk.banner.AdView;`MobFox 广告有效，但 AdMob 代码中出现错误。如果我添加`import com.google.ads.AdView;`Admob 广告，但 MobFox 代码中出现错误：

```
The import com.google.ads.AdView collides with another import statement 
```

仅导入相关 MobFox AdView 时出现 AdMob 错误示例：

```
The method loadAd(AdRequest) is undefined for the type AdView

  AdView ad = (AdView)findViewById(R.id.admobContent);
  ad.loadAd(new AdRequest()); //error 
```

我导入 com.google.ads.*；徒劳，因为它不识别 admob AdView：

```
The constructor AdView(MainActivity, AdSize, String) is undefined 
```

由于这个导入错误，我无法在我的应用中同时实现这两个广告网络。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:10:57.330

Are you using AdMob Mediation? If so, you just pop in the MobFox SDK and adapter, and you don't have to write any of the code yourself.

If you aren't using a mediation solution (I would recommend one btw), you can avoid this issue by removing on the of the imports, and referencing the class by it's fully qualified class. For example:

```
com.google.ads.AdView ad = (com.google.ads.AdView)findViewById(R.id.admobContent); 
```

Then you won't need to `import com.google.ads.AdView`.

# utf-8 - 零宽度/不可见字符强制自定义排序

> ID：12570110
> 
> 赞同：8
> 
> 时间：2012-09-24T17:43:12.453
> 
> 标签：utf-8

UTF-8 中存在哪些不被视为空格的零宽度字符[1](http://en.wikipedia.org/wiki/List_of_Unicode_characters)？我对那些不在主流浏览器上呈现的字形特别感兴趣：永远不应该显示未找到的矩形。

有许多网络服务按字母顺序排列用户输入的数据（例如 Gmail 的标签）。我想使用那些不可见的字符来强制执行自定义排序。

[1](http://en.wikipedia.org/wiki/List_of_Unicode_characters) *视为空格*：不被常用的实现`trim`和类似的删除。在 gmail 示例中，`U+202F`（Narrow no-break space）被修剪。

**编辑：**只有一个隐形字符就足够了。毕竟，它们可以重复而不影响视觉表示（假设下面是较低的代码 ascii 文本）：

```
[char]Z on first position
[char][char]B on second position
[char][char][char]C on third position 
```

不幸的是，我能想到的所有字符要么被立即修剪，要么被排序函数忽略。

**编辑：**我浏览了所有似乎零宽度/不可见且没有按要求工作的[UTF-8 字符。](http://en.wikipedia.org/wiki/List_of_Unicode_characters)`U+0 - U+20`, `DEL`, 控制字符，甚至像 U+034F: 这样的符号`COMBINING GRAPHEME JOINER (alias CGJ)`，都被正确处理，因此无法用于我的目的。不过我一直在寻找。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:57:52.533

您可以尝试以下方法：

```
U+200B ZERO WIDTH SPACE 
U+200C ZERO WIDTH NON-JOINER  
U+200D ZERO WIDTH JOINER 
```

# c++ - Qt5 Beta - 找不到 serviceframework.pro

> ID：12570111
> 
> 赞同：4
> 
> 时间：2012-09-24T17:43:15.247
> 
> 标签：c++, linux, qt, installation, qml

我正在尝试在 Ubuntu i386 上安装 Qt5 - Beta。 [http://qt-project.org/wiki/Qt_5.0](http://qt-project.org/wiki/Qt_5.0)

我运行命令：

```
./configure -prefix $PWD/qtbase -opensource -nomake tests
make 
```

也试过

```
./configure -prefix $PWD/qtbase -opensource -nomake tests
./build -j 4 
```

我分别有以下错误：

```
make[2]: Entering directory `/home/qt-everywhere-opensource-src-5.0.0/qtbase/examples'
cd serviceframework/ && /home/qt-everywhere-opensource-src-5.0.0/qtbase/bin/qmake  /home/qt-everywhere-opensource-src-5.0.0/qtbase/examples/serviceframework   /serviceframework.pro -spec /home/qt-everywhere-opensource-src-5.0.0/qtbase/mkspecs/linux-g++ -o Makefile
Cannot find file: /home/qt-everywhere-opensource-src-5.0.0/qtbase/examples/serviceframework/serviceframework.pro.
make[2]: *** [serviceframework/Makefile] Error 2
make[2]: Leaving directory `/home/qt-everywhere-opensource-src-5.0.0/qtbase/examples'
make[1]: *** [sub-examples-make_default-ordered] Error 2
make[1]: Leaving directory `/home/qt-everywhere-opensource-src-5.0.0/qtbase'
make: *** [module-qtbase-make_default] Error 2 
```

和

```
Cannot find file: /home/qt-everywhere-opensource-src-5.0.0/qtbase/examples/serviceframework/serviceframework.pro.
make[1]: *** [serviceframework/Makefile] Error 2
make[1]: *** Waiting for unfinished jobs....
Cannot find file: /home/qt-everywhere-opensource-src-5.0.0/qtbase/examples/publishsubscribe/publishsubscribe.pro.
make[1]: *** [publishsubscribe/Makefile] Error 2
make[1]: Leaving directory `/home/qt-everywhere-opensource-src-5.0.0/qtbase/examples'
make: *** [sub-examples-make_default-ordered] Error 2
cd qtbase && make -j 4 exited with status 512 at ./build line 64
    Qt::Build::exe('Qt::Build=HASH(0x8dae8b8)', 'cd qtbase && make -j 4') called at ./build line 114
    Qt::Build::exeLowPriv('Qt::Build=HASH(0x8dae8b8)', 'cd qtbase && make -j 4') called at ./build line 377
    Qt::Build::build_project('Qt::Build=HASH(0x8dae8b8)', 'qtbase') called at ./build line 408
    Qt::Build::build_qt('Qt::Build=HASH(0x8dae8b8)') called at ./build line 437
    Qt::Build::run('Qt::Build=HASH(0x8dae8b8)') called at ./build line 446
'cd qtbase && make -j 4' failed: 512 at ./build line 377. 
```

好吧，我也在 Windows 8 上试过。做了类似的方法：

```
 set PATH=%PATH%;%CD%\qtbase\bin;
 configure -prefix %CD%\qtbase -opensource -nomake tests
 mingw32-make 
```

和

```
 set PATH=%PATH%;%CD%\qtbase\bin;
 configure -prefix %CD%\qtbase -opensource -nomake tests
 perl build 
```

分别有以下错误：

```
 codecs\qtextcodec.cpp: In function 'void setup()':
 codecs\qtextcodec.cpp:288:16: error: expected type-specifier before 'QIconvCodec
 '
codecs\qtextcodec.cpp:288:16: error: expected ';' before 'QIconvCodec'
mingw32-make[4]: *** [tmp/obj/debug_shared/qtextcodec.o] Error 1
mingw32-make[4]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src/corelib'
mingw32-make[3]: *** [debug-all] Error 2
mingw32-make[3]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src/corelib'
mingw32-make[2]: *** [sub-corelib-make_first] Error 2
mingw32-make[2]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src'
mingw32-make[1]: *** [sub-src-make_first] Error 2
mingw32-make[1]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase'
mingw32-make: *** [module-qtbase-make_first] Error 2 
```

和

```
codecs\qtextcodec.cpp:288:16: error: expected ';' before 'QIconvCodec'
mingw32-make[3]: *** [tmp/obj/debug_shared/qtextcodec.o] Error 1
mingw32-make[3]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src/corelib'
mingw32-make[2]: *** [debug-all] Error 2
mingw32-make[2]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src/corelib'
mingw32-make[1]: *** [sub-corelib-make_first] Error 2
mingw32-make[1]: Leaving directory `C:/2_install/qt-everywhere-opensource-src-5.
0.0-beta1/qtbase/src'
mingw32-make: *** [sub-src-make_first] Error 2
'cd qtbase && "C:\MinGW\bin\mingw32-make.exe" ' failed: 512
Fatal failure building qtbase at build line 443.
    Qt::Build::build_project('Qt::Build=HASH(0x5a711c)', 'qtbase') called at
  build line 484
    Qt::Build::build_qt('Qt::Build=HASH(0x5a711c)') called at build line 544

    Qt::Build::run('Qt::Build=HASH(0x5a711c)') called at build line 553 
```

所以，显然这是包中的一个错误。

一些评论？任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-26T23:38:13.557

而不是运行静态二进制文件，而是从源代码构建它，很可能你会解决这种奇怪的错误。我遇到了类似的问题，只有在构建后才解决。在这里检查一下：

*   [从 Git 构建 Qt 5](http://qt-project.org/wiki/Building_Qt_5_from_Git)

# python - 将列表拆分为多个列表

> ID：12570113
> 
> 赞同：-2
> 
> 时间：2012-09-24T17:43:27.397
> 
> 标签：python, list

我已经生成了一个大小为 6“乘 1”的列表。但我想将列表分成 3 个“列”，以便大小应该是 2“乘 3”。我怎样才能做到这一点？

例如：

```
[1,1,2,2,3,3] # -> [[1,1],[2,2],[3,3]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:47:53.147

假设您当前的列表称为`flat`：

```
col_width = len(flat) // 3
nested = [flat[i:i+col_width] for i in range(0, len(flat), col_width)] 
```

# c# - 有没有办法在 .NET 中获取闪存控制中的所有变量？

> ID：12570114
> 
> 赞同：3
> 
> 时间：2012-09-24T17:43:29.013
> 
> 标签：c#, .net, vb.net, actionscript-3, flash

我有一个 Windows 窗体中的 Flash 控件。我想知道是否有办法获取其中的所有变量。我知道我可能可以使用 getValue(variablename) “猜测”（蛮力）变量，但如果有办法获得变量而不必猜测它们，我更喜欢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:48:32.977

你可以试试

```
foreach(objectType flashVar in axShockwaveFlash1.FlashVars)
{
    System.Console.WriteLine(flashVar.VarName + " = " + flashVar.VarValue);
} 
```

# ios - ARM7和ARM7s有什么区别

> ID：12570116
> 
> 赞同：17
> 
> 时间：2012-09-24T17:43:45.250
> 
> 标签：ios, xcode, arm

我意识到 xcode 4.5 在有效架构中带有 ARM7 和 ARM7s。我收到链接错误。经过一段时间的挖掘，我移除了 arm7s，一切又开始工作了。

我需要了解什么是 ARM7s，我假设这与 iPhone5 有关？

谢谢你。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-24T17:50:56.673

是的，关于 armv7s 是关于 iPhone 5，你是对的。这是我在网上找到的一些摘要信息：

*   ARMv6 ISA（由 iPhone 2G 和 iPhone 3G 中的 ARM11 内核使用）
*   ARMv7（由现代 ARM 内核、iPhone 3GS、iPhone 4 和 4S 使用）
*   ARMv7s（适用于 iPhone 5 的新 A6 SoC）。

参考：[那里](http://www.anandtech.com/show/6292/iphone-5-a6-not-a15-custom-core)和[那里](http://theiphonewiki.com/wiki/index.php?title=Armv7)。

# iphone - 类似于 App Store 的特色横幅的旋转横幅

> ID：12570118
> 
> 赞同：0
> 
> 时间：2012-09-24T17:43:51.703
> 
> 标签：iphone, objective-c, ios

我想在 iOS6 版本的 App Store 中添加一个类似于“精选”部分顶部的旋转横幅。用户可以通过 4 或 5 个不同的横幅无限左右滚动。此外，横幅在没有互动时会自动滚动。

我尝试使用水平滚动视图来执行此操作，但是当您滚动到最后一个横幅时，滚动视图会停止 - 它应该让您继续滚动，再次显示第一个横幅。

仍在尝试找出最好的方法 - 你能用表格视图单元格进行分页吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:12:57.563

我会使用“循环表视图”技巧来做到这一点。它通过重复相同的单元格来伪造循环滚动：

1.  使`tableView:numberOfRowsInSection:`返回一些较大的值，例如 50000；

2.  在`tableView:cellForRowAtIndexPath:`我会做

    ```
    int actualRowNumber = indexPath.row % visibleRowsNumber;
    // fill cell with data for 'actualRowNumber'th object 
    ```

3.  然后在`viewDidLoad`我将这个表格视图滚动到中间，以便向后滚动可以立即工作。

您可以通过将表格视图逆时针旋转 90 度，然后将每个单元格顺时针旋转 90 度来使表格视图水平。

# events - GtkEntry 激活信号还是激活默认属性？

> ID：12570125
> 
> 赞同：0
> 
> 时间：2012-09-24T17:44:33.620
> 
> 标签：events, user-interface, gtk

在具有多个`GtkEntry`小部件和`GtkButton`小部件的窗口中，当它们的对应`GtkEntry`被激活时应该触发，我应该`GtkButton`使用信号中的焦点切换哪个是默认小部件，还是应该直接处理小部件的激活信号`GtkEntry`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:13:12.483

`activated`在我看来，如果您直接处理每个条目的信号，它将产生更清晰的代码。

# verilog - Verilog 有限状态机

> ID：12570126
> 
> 赞同：1
> 
> 时间：2012-09-24T17:44:34.660
> 
> 标签：verilog, hdl

我正在尝试在 verilog 中创建一个有限状态机。该系统有 4 个`1-bit` *输入* `rst`,和1个*输出*`clk`, 。`A``B`*`Z`*

 *Z 等于 1，如果： A 在最后两个时钟沿具有相同的值。

或 B 自上一条规则成立以来在每个时钟沿都为高 (1)。

否则`z=0`；

我没有工具来模拟我的尝试 atm。所以我想知道这是否是正确的方法，如果我走在正确的轨道上？

```
module StateMachine( R, A, B, clk, Z);
   input R, A, B, clk;
   output reg Z;

   reg ATemp;
   reg state;

   always @ (posedge clk or A)
      if (A == 1'b1) 
      /////////////////
      begin
         if (ATemp == 1'b1) state <= 1'b1; 
         else ATemp <= A;
       end
       ////////////////
       else
       ////////////
       begin
          if (ATemp == 1'b0) state <= 1'b1;
          else ATemp <= A;
       end

   always @ (state)
      case(state)
         1'b0: Z=0;
         1'b1: Z=1;

         default: Z=0;
      endcase

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:58:11.737

您可以使用以下工具：

[GHDL](http://ghdl.free.fr/)是 VHDL 语言的开源模拟器（[用户指南](http://ghdl.free.fr/site/pmwiki.php?n=Main.UserGuide)）

此外，这些是最流行的模拟**工具**：

*   [主动高密度脂蛋白](https://stackoverflow.com/questions/1516876/when-to-use-ref-vs-out)
*   [Altera 模型SIM](http://www.altera.com/products/software/quartus-ii/modelsim/qts-modelsim-index.html)
*   [Riviera pro ISE 模拟器](http://www.aldec.com)

**更多资源：**

还有stackexchange[电子](http://electronics.stackexchange.com)社区和[codereview](https://codereview.stackexchange.com/)。

*   [Overmapped](http://www.overmapped.com/) : 关于 VHDL 主题的论坛

此外，注意[C 到 HDL](http://en.wikipedia.org/wiki/C_to_HDL)编译器工具

（.. 我怀疑很多人可以在 3 分钟内查看您的代码，我也不想要它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:54:41.007

你对触发器的定义有点错误。你有`always @ (posedge clk or A)`. 不应将边沿触发和非边沿触发结合使用。它可能在模拟中工作，但你不会在综合中得到你想要的。

如果您只希望值在时钟边沿发生变化，则使用`always @( posedge clk)`or 用于组合输入，即输出随输入使用`always @( A )`或更现代的版本而变化`always @*`。@* 将触发任何更改。敏感度列表中缺少项目是合成代码无法模拟 RTL 的主要原因。

说如果你正在构建一个触发器，你应该包括一个复位。`always @ (posedge clk or negedge rst_n)`

另请注意，状态永远不会设置为 0，因此第一印象是这将锁定到特定的状态/输出。我很难看到代码是如何实现被问到的问题的。我的解决方案是这样的：

```
module statemachine(
  input      rst,
  input      A,
  input      B,
  input      clk,
  output reg Z
);

  reg  [1:0] a_last_two;
  wire      rule_one;

  always @ (posedge clk or negedge rst) begin
    if (~rst) begin
      a_last_two <= 2'b0;
    end
    else begin
      a_last_two <= {a_last_two[0] ,A}; 
    end
  end

  assign rule_one = (a_last_two[1] == a_last_two[0]); 
  //rule one could be written as ~^a_last_two (xnor reduction operator)

  reg rule_two;
  always @ (posedge clk or negedge rst) begin
    if (~rst) begin
      rule_two <= 1'b0 ;
    end
    else begin
      //rule 2 resets when rule_one is true
      if (rule_one) begin
        rule_two <= 1'b1 ;
      end
      else begin
        rule_two <= rule_two & B ;
      end
    end
  end

  assign Z = rule_one | rule_two ;

endmodule 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:58:52.147

您没有下一个状态逻辑，因此状态永远不会改变，并且没有重置，因此状态将以 1'bz 开始。我建议在编码状态机时从[Xilinx 指南开始。](http://www.xilinx.com/support/documentation/sw_manuals/xilinx11/xst.pdf)*

# php - php(?) 在大字符串上插入一个空格

> ID：12570128
> 
> 赞同：1
> 
> 时间：2012-09-24T17:44:46.363
> 
> 标签：php, string, whitespace

我有一个很大的表单，可以将包含其内容的电子邮件发送给站点管理员。我遇到的问题是在某些时候插入了一个空格，这会导致标记问题。发送的电子邮件是 HTML 电子邮件，有时会在标签之间插入随机空格字符，因此`<li>`我得到的不是`< li>`. 这是一个问题，因为列表项确实会被呈现为列表项，而是呈现为包含`< li>`标签的普通文本。

我至少有一次注意到这种行为。有一次，当我在论坛上发帖时，在我输入的单词中间添加了一个空格。奇怪的是，这个词是岳母，（西班牙语中的苏格拉）。当时很好笑，因为我第一次教的是，由于婆婆名声不好，管理员开了个玩笑，但这一次不好笑。这次这个问题真的是个问题，因为标记都搞砸了。

有谁知道为什么要添加空格？似乎是随机的。但是，如果我从表单上的一个字段中删除一个字符，则似乎没有添加空格，或者它可能是在不同的位置添加的，比如就在`<`< 和 li 之间而不是在 < 和 li 之间标记。此外，如果我只是回显应该在电子邮件中发送的消息，则在电子邮件中添加它的位置的字符串中没有空格。

*编辑* 这是相关的代码。它很大，但大部分只是构造一个字符串：

```
$subject = "New Quote Request";

$message = '<html><head></head><body>';

$message .= "<h1>New Quote Request.</h1>";
$message .= "<p>A new quote request has been submitted. Find all the submitted information bellow:</p>";

extract($_POST);
$message .= "<ul>";
$message .= "<li><strong>Company Name:</strong> $company</li>";
$message .= "<li><strong>Contact:</strong> $contact</li>";
$message .= "<li><strong>Email:</strong> $email</li>";
$message .= "<li><strong>Phone:</strong> $phone</li>";
$message .= "<li><strong>Alt. Phone:</strong> $cell</li>";
$message .= "<li><strong>Fax:</strong> $company_fax</li>";
$message .= "<li><strong>Address:</strong> $company_address</li>";
$message .= "<li><strong>City:</strong> $company_city</li>";
$message .= "<li><strong>State:</strong> $company_state</li>";
$message .= "<li><strong>Zip:</strong> $company_zip</li>";
$message .= "</ul>";

$message .= "<h2>Shipping Information</h2>";

$message .= "<li><strong>Mailing Address:</strong> $mailing</li>";
$message .= "<li><strong>City:</strong> $city</li>";
$message .= "<li><strong>State:</strong> $state</li>";
$message .= "<li><strong>Zip:</strong> $zip</li>";

$message .= "<h2>Project Infomration</h2>";

$message .= "<ul>";
$message .= "<li><strong>Project Name:</strong> $pname</li>";
$message .= "<li><strong>Due Date:</strong> $duedate</li>";
$message .= "</ul>";

$message .= "<h2>Project Specifications</h2>";

$message .= "<ul>";
$message .= "<li><strong>Quantities:</strong> $quantities</li>";
$message .= "<li><strong>Flat Size:</strong> $flat_size</li>";
$message .= "<li><strong>Finished Size:</strong> $finished_size</li>";
$message .= "<li><strong>Number of Pages:</strong> $num_of_pages</li>";
$message .= "<li><strong>Cover Options:</strong> </li>";//TODO self cover options
$message .= "</ul>";

$message .= "<h2>Cover</h2>";
$message .= "<ul>";
$message .= "<li><strong>Weight:</strong> {$cover['weight']}</li>";
$message .= "<li><strong>Color:</strong> {$cover['color']}</li>";
$message .= "<li><strong>Name:</strong> {$cover['name']}</li>";
$message .= "<li><strong>Finish:</strong> {$cover['finish']}</li>";
$message .= "</ul>";

$message .= "<h2>Text</h2>";
$message .= "<ul>";
$message .= "<li><strong>Weight:</strong> {$text['weight']}</li>";
$message .= "<li><strong>Color:</strong> {$text['color']}</li>";
$message .= "<li><strong>Name:</strong> {$text['name']}</li>";
$message .= "<li><strong>Finish:</strong> {$text['finish']}</li>";
$message .= "</ul>";

$message .= "<h2>Other</h2>";
$message .= "<ul>";
$message .= "<li><strong>Weight:</strong> {$other['weight']}</li>";
$message .= "<li><strong>Color:</strong> {$other['color']}</li>";
$message .= "<li><strong>Name:</strong> {$other['name']}</li>";
$message .= "<li><strong>Finish:</strong> {$other['finish']}</li>";
$message .= "</ul>";

$message .= "<h2>Coating</h2>";
$message .= "<ul>";
$message .= "<li><strong>Coating:</strong> {$coating['option']}</li>";
if(isset($coating['varnish']) && is_array($coating['varnish'])){
    foreach($coating['varnish'] as $val){
        $message .= "<li><strong></strong> $val</li>";
    }
}
$message .= "<li><strong>Additional Information:</strong> {$coating['aditional']}</li>";
$message .= "</ul>";

$message .= "<h2>Cover</h2>";
$message .= "<ul>";
$message .= "<li><strong>Number of Colors:</strong> {$cover['num_of_colors']}</li>";
$message .= "<li><strong>PMS#:</strong> {$cover['pms']}</li>";
$message .= "<li><strong>Bleeds:</strong> {$cover['bleeds']}</li>";
$message .= "</ul>";

$message .= "<h2>Text</h2>";
$message .= "<ul>";
$message .= "<li><strong>Number of Colors:</strong> {$text['num_of_colors']}</li>";
$message .= "<li><strong>PMS#:</strong> {$text['pms']}</li>";
$message .= "<li><strong>Bleeds:</strong> {$text['bleeds']}</li>";
$message .= "</ul>";

$message .= "<h2>Other</h2>";
$message .= "<ul>";
$message .= "<li><strong>Number of Colors:</strong> {$other['num_of_colors']}</li>";
$message .= "<li><strong>PMS#:</strong> {$other['pms']}</li>";
$message .= "<li><strong>Bleeds:</strong> {$other['bleeds']}</li>";
$message .= "</ul>";

$message .= "<h2>Art</h2>";
$message .= "<ul>";
$message .= "<li><strong>Electronic Artwork Supplied:</strong> {$art['electronic_artwork_supplied']}</li>";
$message .= "<li><strong>Platform:</strong> {$art['platform']}</li>";
$message .= "<li><strong>Type of File:</strong> {$art['scans_required']}</li>";
if(isset($art['corrections']) && is_array($art['corrections'])){
    foreach($art['corrections'] as $val){
        $message .= "<li><strong>Corrections:</strong> {$val}</li>";
    }
}
if(isset($art['design_needed'])){
    $message .= "<li><strong>Design Needed:</strong> Yes</li>";
}
$message .= "</ul>";

$message .= "<h2>Bindery</h2>";
$message .= "<ul>";
if(isset($bindery) && is_array($bindery)){
    foreach($bindery as $val){
        $message .= "<li>$val</li>";
    }
}
$message .= "<li><strong>Number of Drill Holes:</strong> {$bindery_['drill_holes']}</li>";
$message .= "<li><strong>Number of Pockets:</strong> {$bindery_['pockets']}</li>";
$message .= " <li><strong>Position: </strong> {$bindery_['position']}</li>";
$message .= "<li><strong>Size:</strong> {$bindery_['size']}</li>";
$message .= "<li><strong>Glue Pockets:</strong> {$bindery_['glue_pockets']}</li>";
$message .= "<li><strong>Business Cards Slits:</strong> {$bindery_['business_cards_slits']}</li>";
$message .= "</ul>";

$message .= "<h2>Packaging</h2>";
$message .= "<ul>";
if(isset($packaging['type']) && is_array($packaging['type'])){
    foreach($packaging['type'] as $val){
        $message .= "<li><strong>Type:</strong> {$val}</li>";
    }
}
$message .= "<li><strong>Additional Instructions:</strong> {$packaging['aditional_shiping']}</li>";
$message .= "</ul>";

$message .= "<h2>Fullfillment</h2>";
$message .= "<ul>";
if(isset($fullfillment) && is_array($fullfillment)){
    foreach($fullfillment as $val){
        $message .= "<li>{$val}</li>";
    }
}
$message .= "<li><strong>Fullfillment Requirements:</strong> " . nl2br($packaging['fullfillment_requirements']) . "</li>";
$message .= "</ul>";

$message .= "<h2>Mail Services</h2>";
$message .= "<ul>";
if(isset($mail_services['type']) && is_array($mail_services['type'])){
    foreach($mail_services['type'] as $val){
        $message .= "<li><strong>Type:</strong> {$val}</li>";
    }
}
$message .= "<li><strong>Number of Inserts:</strong> {$mail_services['num_of_inserts']}</li>";
$message .= "<li><strong>Size of Outgoing:</strong> {$mail_services['size_of_outgoing']}</li>";
$message .= " </ul>";

$message .= "<h2>Shipping Instructions</h2>";
$message .= "<ul>";
if(isset($shipping_instructions['type']) && is_array($shipping_instructions['type'])){
    foreach($shipping_instructions['type'] as $val){
        $message .= "<li><strong>Type:</strong> {$val}</li>";
    }
}
$message .= "<li><strong>Ship Via:</strong> {$shipping_instructions['ship_via']}</li>";
$message .= "<li><strong>FOB:</strong> {$shipping_instructions['fob']}</li>";
$message .= "</ul>";

$message .= "<h2>Additional Instructions</h2>";
$message .= "<p>" . nl2br($additional_instructions) . "</p>";

$message .= "</body></html>";

$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

global $request_quote_email;
mail($request_quote_email, $subject, $message, $headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:13:25.350

我认为最有可能的情况是线路由于太长而被打破。

尝试`\n`在其中插入一些，最好在每个之后插入`<li>`以保持合理的行长。

# wpf - 即使在应用程序空闲后等待光标卡住，直到鼠标移动

> ID：12570129
> 
> 赞同：0
> 
> 时间：2012-09-24T17:44:48.773
> 
> 标签：wpf, cursor

（我的 WPF 代码实际上是在一个 DLL 中，并且由非 CLR 代码启动并与之交互，所以这不是标准的 WPF 应用程序。我从未在纯 WPF 应用程序中看到过这种行为，但我不确定如果问题与此有关）

如果我的视图模型在一段时间内快速变化并且 UI 线程花费大量时间试图跟上它（我有几个转换器和一些复杂的布局必须在 VM 更改时刷新，例如 DataGrids 调整大小添加行时它们的列等），会自动显示等待光标（我猜是操作系统）我在我的代码或 XAML 中没有做任何事情来更改光标。`Cursors.Wait`当您在 WPF中将光标设置为时，它也与您获得的等待光标不同。它是箭头光标，但它旁边有一个等待圆圈。

我不希望这种情况发生，因为程序并不是真的“等待”。大多数事情都在后台线程中进行，UI 线程只是花费大量时间试图跟上它，但是 UI 并非没有响应。更令人讨厌的是，即使在应用程序（包括后台线程）变得空闲之后，这个光标仍然保持不变 - 直到鼠标移动。鼠标一移动，它就消失了，但如果用户不移动鼠标，他可能会在不经意间认为应用程序仍然很忙，而实际上它是完全空闲的。

使用 WPF 函数设置光标的任何方式都无法覆盖此光标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:53:57.057

终于想通了，至少在应用程序空闲时隐藏等待光标（但只是因为我的视图模型明确知道何时发生这种情况，在更复杂的情况下，VM 可能不知道自己何时处于“空闲”状态）

```
using System.Windows.Input;

...

Mouse.OverrideCursor = Cursors.Arrow;
Mouse.OverrideCursor = null; 
```

但是我仍然想首先摆脱这个等待光标，如果不离开`Mouse.OverrideCursor = Cursors.Arrow`设置，这种方法是不可能的，这意味着光标在需要时永远不会改变（比如在文本框上悬停时链接到 ibeam 等）。

# scala - 无法更新播放！Scala 应用到 CloudFoundry

> ID：12570130
> 
> 赞同：0
> 
> 时间：2012-09-24T17:44:54.100
> 
> 标签：scala, playframework, cloud-foundry, vmc

我和这个用户有同样的问题： [Cloud Foundry Playframework : Error 310: Staging failed:](https://stackoverflow.com/questions/12161698/cloud-foundry-playframework-error-310-staging-failed)

我在我的应用程序中添加了一个 mysql 服务。我使用以下命令更新了应用程序：

```
vmc update app-name --path=dist/my-dist.zip 
```

它回应说更新是好的。当我转到我的应用程序视图时，它说应用程序已停止。当我尝试执行

```
vmc start app-name 
```

它崩溃并出现相同的错误：

```
vmc start app-name
Staging Application 'app-name': ...Error 310: Staging failed: 'Staging task failed:
Staging plugin failed: /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod': No such file or directory - /var/vcap/data/stager/tmp/d20120924-9953-1jfgi5c/staged/app/start (Errno::ENOENT)
from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:1231:in `chmod'
from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:879:in `block in chmod'
from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `each'
from /var/vcap/data/packages/ruby/6.1/lib/ruby/1.9.1/fileutils.rb:878:in `chmod'
from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.63/lib/vcap/staging/plugin/play/plugin.rb:10:in `block in stage_application'
from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.63/lib/vcap/staging/plugin/play/plugin.rb:7:in `chdir'
from /var/vcap/packages/stager/vendor/bundle/ruby/1.9.1/gems/vcap_staging-0.1.63/lib/vcap/staging/plugin/play/plugin.rb:7:in `stage_application'
from /var/vcap/packages/stager/bin/run_plugin:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:30:01.730

**上一篇文章的更新（专门针对 scala）：**

1.  此时请避免使用清单
2.  vmc 推送
3.  更改应用程序后：

`play clean dist && vmc update <app> --path <app dist path>`

这是我的例子：

```
play clean dist && vmc update ghelloworld --path "/Users/ggross/Dropbox/play-work/helloworld-scala/dist" 
```

**原始答案（解决java部署）：**

好的，我没有专门的应用程序，所以这就是我所做的。使用[Start Cloudfoundry中的示例](http://docs.cloudfoundry.com/frameworks/play/java-getting-started.html)

我创建了示例 Play！应用程序，并部署到 Cloudfoundry。我小心翼翼地选择了“2 - 创建一个简单的 Java 应用程序”。

然后我对“Application.java”做了一个简单的更改。

接下来我做了以下事情：

```
$vmc dist
$vmc update garyhelloplay --path=dist/garyhello-java-1.0-SNAPSHOT.zip 
```

这成功完成，我能够从浏览器查看结果。注意：第一次部署需要*很长时间*（几分钟），因此需要一些耐心。如果您希望我们专门审查您的应用程序，请在[Cloudfoundry 支持](http://support.cloudfoundry.com)处开票，我们将查看并在此处发布结果。

# python - Django 中的自定义 WSGIRequestHandler.log_message？

> ID：12570131
> 
> 赞同：1
> 
> 时间：2012-09-24T17:45:13.517
> 
> 标签：python, django, logging, request

我想从成功的静态请求中过滤掉请求日志，但是，这似乎不像我预期的那么简单。我最终更改了已安装的代码，但我希望有更好的解决方案。我该怎么做？

[GitHub上的原始代码](https://github.com/django/django/blob/master/django/core/servers/basehttp.py#L199)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:59:15.073

我最终得到了带有SlimWSGIRequestHandler[的](https://github.com/dcramer/django-devserver/blob/master/devserver/utils/http.py#L26)[django-devserver](https://github.com/dcramer/django-devserver)

# ruby-on-rails - Rails 3.2.8，只有重新启动服务器才会取消缓存模型

> ID：12570137
> 
> 赞同：3
> 
> 时间：2012-09-24T17:45:48.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, model

我有一个在 rails 3.2.8 上运行的 rails 应用程序。

只有当我重新启动服务器时，模型才会更新，对它们所做的任何更改都不会在服务器重新启动之前显示出来。

我正在开发中运行，缓存类已关闭。

有没有其他人有这个问题，我真的很感激一些帮助。谢谢。

我已经重新安装了 rvm、ruby 和我的 gemset。

我已经尝试了我能想到的一切来修复它。感谢大家的关注。

编辑：我在下面添加了大量配置细节......

发展.rb

```
XXXXX::Application.configure do
  config.cache_classes = false
  config.whiny_nils = true
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false
  config.action_mailer.raise_delivery_errors = true
  config.action_mailer.perform_deliveries = true
  config.action_mailer.delivery_method = :sendmail
  config.active_support.deprecation = :log
  config.action_dispatch.best_standards_support = :builtin
  config.active_record.mass_assignment_sanitizer = :strict
  config.active_record.auto_explain_threshold_in_seconds = 0.5
  config.assets.compress = false
  config.assets.debug = true
  config.action_mailer.default_url_options = { :host => 'yyyy.xxxx.net' }

  #this is an attempt to fix the issues, didn't work
  config.to_prepare do
    ['algorithm', 'key_dates', 'roles', 'status'].each do | file_name |
      require "#{Rails.root}/app/models/user/#{file_name}.rb"
    end
  end

end 
```

我的用户模型包含一些模块，如下所示：

```
class User < ActiveRecord::Base
  include Status, Roles, KeyDates, Algorithm
  #.....
end 
```

模块是这样定义的

```
module User::Status

  def self.included(base)
    base.class_eval do
      extend ClassMethods
      include InstanceMethods
    end
  end
  #.....
end 
```

应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'csv'
require 'rails/all'

if defined?(Bundler)
  Bundler.require(*Rails.groups(:assets => %w(development test)))
end
module XXXXX
  class Application < Rails::Application
    config.encoding = "utf-8"
    config.filter_parameters += [:password]
    config.active_record.whitelist_attributes = true
    config.assets.enabled = true
    config.assets.version = '1.0'
    config.autoload_paths += Dir["#{config.root}/app/models/**/"]
    config.to_prepare do
      Devise::Mailer.layout "mailout"
      Devise::Mailer.helper :application
    end
  end
end 
```

宝石锁：

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.8)
      actionpack (= 3.2.8)
      mail (~> 2.4.4)
    actionpack (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.3)
    activemodel (3.2.8)
      activesupport (= 3.2.8)
      builder (~> 3.0.0)
    activerecord (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.8)
      activemodel (= 3.2.8)
      activesupport (= 3.2.8)
    activesupport (3.2.8)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    addressable (2.2.8)
    arel (3.0.2)
    aws-sdk (1.5.2)
      httparty (~> 0.7)
      json (~> 1.4)
      nokogiri (>= 1.4.4)
      uuidtools (~> 2.1)
    bcrypt-ruby (3.0.1)
    builder (3.0.0)
    cocaine (0.2.1)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    devise (2.1.0)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.7)
      railties (~> 3.1)
      warden (~> 1.1.1)
    devise_invitable (1.0.2)
      devise (>= 2.0.0)
      rails (~> 3.0)
    erubis (2.7.0)
    execjs (1.3.2)
      multi_json (~> 1.0)
    faker (1.0.1)
      i18n (~> 0.4)
    heroku (2.25.0)
      launchy (>= 0.3.2)
      netrc (~> 0.7.1)
      rest-client (~> 1.6.1)
      rubyzip
    hike (1.2.1)
    httparty (0.8.3)
      multi_json (~> 1.0)
      multi_xml
    i18n (0.6.0)
    journey (1.0.4)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.7.5)
    launchy (2.1.0)
      addressable (~> 2.2.6)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.19)
    multi_json (1.3.6)
    multi_xml (0.5.1)
    mysql2 (0.3.11)
    netrc (0.7.1)
    nokogiri (1.5.2)
    orm_adapter (0.0.7)
    paperclip (2.7.0)
      activerecord (>= 2.3.0)
      activesupport (>= 2.3.2)
      cocaine (>= 0.0.2)
      mime-types
    pg (0.13.2)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.8)
      actionmailer (= 3.2.8)
      actionpack (= 3.2.8)
      activerecord (= 3.2.8)
      activeresource (= 3.2.8)
      activesupport (= 3.2.8)
      bundler (~> 1.0)
      railties (= 3.2.8)
    railties (3.2.8)
      actionpack (= 3.2.8)
      activesupport (= 3.2.8)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    redcarpet (1.17.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rubyzip (0.9.8)
    sass (3.1.18)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    sequel (3.20.0)
    sinatra (1.0)
      rack (>= 1.0)
    sprockets (2.1.3)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    sqlite3 (1.3.6)
    taps (0.3.24)
      rack (>= 1.0.1)
      rest-client (>= 1.4.0, < 1.7.0)
      sequel (~> 3.20.0)
      sinatra (~> 1.0.0)
    thor (0.16.0)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    uuidtools (2.1.2)
    warden (1.1.1)
      rack (>= 1.0)

PLATFORMS
  ruby

DEPENDENCIES
  aws-sdk
  coffee-rails (~> 3.2.1)
  devise
  devise_invitable
  faker
  heroku
  jquery-rails
  mysql2
  paperclip (~> 2.7)
  pg
  rails (= 3.2.8)
  redcarpet (= 1.17.2)
  sass-rails (~> 3.2.3)
  sqlite3
  taps
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:44:29.217

您的问题可以通过 reload! 部分取消。在这里，您有一个不兼容的 gem（使用 rails 3.2）仅在 dev Env 中为修改后的类充电。你可能会找到一个等价物。或者让它兼容。

[https://github.com/paneq/active_reload](https://github.com/paneq/active_reload)

你也可以结合重装！带警卫。 [https://github.com/guard/guard](https://github.com/guard/guard)

服务器启动时是否显示开发模式？（我猜你是在要求他以开发模式开始，但它真的以开发模式开始吗？）。

**更新 ：**

关于rails 3.2（官方网站）的说明：

> 最引人注目的新功能是开发模式的速度提高了一吨半。受 Active Reload 的启发，我们现在只从您实际更改的文件中重新加载类。在更大的应用程序中，差异是巨大的。cf：[http ://weblog.rubyonrails.org/2012/1/20/rails-3-2-0-faster-dev-mode-routing-explain-queries-tagged-logger-store/](http://weblog.rubyonrails.org/2012/1/20/rails-3-2-0-faster-dev-mode-routing-explain-queries-tagged-logger-store/)

因此，由于某种原因，rails 无法检测到文件系统上的更改。

**更新 2：**

检查您的源代码是否不在无效文件夹中（从 linux 的角度来看）。我的意思是如果 rails 使用相对路径（不确定），C:\invalid linux folder\something\rails\my_apps 可能会起作用。但是，如果导轨重新加载使用绝对路径，无论出于何种原因，你都被搞砸了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-29T22:22:26.230

如果不查看您的项目文件（尤其是 Gemfile、config/environments/development.rb、application.rb），很难提出明确的建议，但您始终可以生成全新的 rails 项目并在几分钟内将您当前的项目一一传输文件到最近创建的一个，以确定导致问题的确切 gem 或文件。在那之后它会更容易修复它，我希望。这是一种蛮力，但可以在击倒情况下提供帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:52:03.877

比较你`config/environments/development.rb`和我的：

```
SampleApp::Application.configure do

  config.cache_classes = false
  config.whiny_nils = true
  config.consider_all_requests_local       = true
  config.action_controller.perform_caching = false
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.delivery_method = :letter_opener
  config.active_support.deprecation = :log
  config.action_dispatch.best_standards_support = :builtin
  config.active_record.mass_assignment_sanitizer = :strict
  config.active_record.auto_explain_threshold_in_seconds = 0.5
  config.assets.compress = false
  config.assets.debug = true
  config.domain = '.lvh.me'
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-14T19:37:32.053

在 development.rb 上试试这个：

config.reload_classes_only_on_change = false

# java - 带有 IIS7.5（阳光直通）的 Glassfish 3.1.2 不适用于 https

> ID：12570139
> 
> 赞同：2
> 
> 时间：2012-09-24T17:45:57.017
> 
> 标签：java, jakarta-ee, ssl, iis-7, glassfish

我已经建立了一个带有 2 个本地实例的 Glassfish 3.1.2 集群并部署了一个应用程序。当直接通过 IP 地址而不是通过 IIS（我使用默认端口 28080/81 28181/82）访问 glassfish 时，可以从机器访问该应用程序以获取 http 和 https(ssl) 流量。但是，当我尝试通过 IIS 访问该站点时，它仅适用于 http 流量，而适用于 https。

我已按照 oracle 指南设置 IIS 以与负载平衡器插件一起使用。我已经设置了一个自签名证书并将其添加到 IIS。我已经创建了一个负载均衡器并正确导出了 xml 配置文件。我已经创建了 ISAPI 过滤器和虚拟目录。我知道这行得通，因为它适用于 http 流量。但是由于某种原因，每当我尝试通过 https 访问时，它都会死掉。

即使对于 https，ISAPI 过滤器实际上也在工作并试图切换到 glassfish，因为错误页面来自 sun-passthrough 虚拟目录，而不是标准的 IIS 错误。问题似乎是从 IIS（http-listener 2）切换到 glassfish ssl 侦听器。

lb.log 有一个 NSS 错误，它说它可能无法找到 sec_db 文件。但是这些文件存在并且可以访问，而且我还读到 glassfish 无论如何都不再支持 NSS，所以我不确定这是问题所在。

我找不到任何文档。任何帮助将不胜感激。

# javascript - JavaScript 构造函数中的返回语句

> ID：12570142
> 
> 赞同：1
> 
> 时间：2012-09-24T17:46:08.847
> 
> 标签：javascript, constructor

到底有什么区别

```
function ObjA() {
  this.a = 'text';
}

var obj = new ObjA(); 
```

和

```
function ObjB() {
  return {
    a: 'text'
  };
}

var obj = new ObjB(); 
```

我之所以问，是因为我正在阅读[这个问题](https://stackoverflow.com/questions/5731454/alternatives-for-definegetter)，并且在其中一个答案中注意到以下内容：

```
function Test() {
  this.a = 1;

  return {
    get A() { return this.a; },
    set A(v) { this.a = v; }
  };
} 
```

所以我问自己这与以下有什么区别：

```
function Test() {
    this.a = 1;
}

Test.prototype = { 
    get A() { return this.a; },
    set A(v) { this.a = v; }
}; 
```

他们在评论中说，前者“占用内存，因为每个对象的 getter 和 setter 都是“唯一的””。有人可以详细说明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:55:03.907

你的最后一个例子不起作用。

```
function Test() {
    var a = 1;
}

Test.prototype = { 
    // This code has no clue what a is
    get A() { return a; },
    set A(v) { a = v; }
}; 
```

但如果是

```
function Test() {
    this.a = 1;
}

Test.prototype = { 
    get A() { return this.a; },
    set A(v) { this.a = v; }
}; 
```

那么这两段代码将是相似的，除了使用`Test.prototype`创建`Test`第一个示例（模块模式）的实例的代码总是`Object`通过使用工厂方法创建基本类型的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:58:15.967

你实际上是在问几个不同的问题。所以让我专注于第一个（修改变量名称以更容易地引用它们而不是覆盖`Object`）：

究竟有什么区别：

```
function ObjA() {
  this.a = 'text';
}

var objA = new ObjA(); 
```

和

```
function ObjB() {
  return {
    a: 'text'
  };
}

var objB = new ObjB(); 
```

不同的是，前一个版本维护了原型链，而后一个版本丢弃了它。考虑以下代码行：

```
ObjA.prototype.b = "something";
ObjB.prototype.b = "something"; 
```

那么以下情况变为真：

```
objA.b; //is "something"
objB.b; //is undefined 
```

原因是“构造函数”返回的对象没有附加 ObjB 的原型链。这是一个全新的对象。这就是“差异”。

第二个例子（使用`.prototype`vs. 返回一个对象）实际上~~据我所知，并没有真正“浪费”记忆~~（见更新）。因为在`new`函数上调用操作符的过程会创建对象原型的副本，然后调用它的函数。好的部分是原型方法将在您使用时在“构造函数”函数中可用`.prototype`，并且您将使用该版本维护原型链。但我不知道使用基于返回的方法真的有什么“错误”。

**更新：**

我查看了有关该主题的 ECMAScript 规范（并为我的思维工具上油了一点），看来我对内存浪费的看法是错误的。看起来“类”函数的原型属性的方法/属性是通过引用链接的。所以它实际上确实浪费了一点内存来生成一个新对象而不是使用原型。此外，在返回对象中声明的任何属性都是实例级别的，而在原型对象中声明的属性对于“类”是静态的（即由所有实例共享）。

~~正如其他人所指出的那样，您的示例有一个小错误（`a`原型对象不可用）。但这对手头的问题有点无关紧要，所以我忽略了它。~~（我看到你修复了这个错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:10:36.680

和...之间的不同

```
function Obj () {
  this.a = 'text';
}

var obj = new Obj(); 
```

和

```
function Obj () {
  return {
    a: 'text'
  };
}

var obj = new Obj(); 
```

是第一个被认为是不安全的。也就是说，如果您忘记使用`new`运算符，您将使用属性污染全局命名空间。

**定义对象的第二种方法要好得多**。你都可以这样做`var obj = new Obj();`，`var obj = Obj();`结果将完全相同。

此外`var`，在构造函数中使用 s 将导致无法从构造函数本身的范围之外访问它们。因此，您可以将它们用作**私有**并定义作为 getter/setter 工作的函数，例如：

```
function Obj () {
    var privateVar = 'xxx';

    return {
        getPrivateVar: function () {
            return privateVar;
        },
        setPrivateVar: function (val) {
            privateVar = val;
        }
    };
} 
```

这样，您将可以从构造函数外部访问该变量，但如果不调用正确的函数（setter），您将无法修改它。

使用*原型*是一个广泛的话题。它允许您节省内存（方法在对象实例之间共享，而不是每次创建新对象时都创建），它允许您仅通过修改原型来修改对象的所有实例中的方法。此外原型可以用来模拟继承（寻找“原型链”）。

我推荐阅读[“JavaScript：好的部分”](http://shop.oreilly.com/product/9780596517748.do)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:54:22.487

允许您创建没有私有方法/函数的对象（模拟但确实如此）

```
 function Object() {
      // a can be change via OBJECTs API
      this.a = 7;
    } 
```

允许在代码中无法访问的“内部工作”中使用函数和变量

```
 function Object() {
      // b CAN BE CHANGED FROM OBJECTs  API 
      var b = 125;          
      return {
        a: 7+b
      };
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:58:36.073

```
function Object() {
  this.a = 'text';
}
var obj = new Object();

function Object() {
  return {
    a: 'text'
  };
}
var obj = new Object(); 
```

每个都会像这样使用：

```
console.log(obj.a); // 'text' 
```

然而，

```
function Test() {
  var a = 1;

  return {
    get A() { return a; },
    set A(v) { a = v; }
  };
}
var obj = new Test(); 
```

会像

```
console.log(obj.A); // 1
obj.A = "banana";
console.log(obj.A) // 'banana' 
```

它正在私有化，并为/它`a`创建一个外部属性。这样做的好处是它允许您在获取/设置时创建属性或进行计算，以及许多其他事情。`A``get``set``static``readonly`

# android - 在 bash 中使用 adb 给出的结果与预期不同

> ID：12570150
> 
> 赞同：1
> 
> 时间：2012-09-24T17:46:40.253
> 
> 标签：android, bash, adb

我有一个 bash 脚本，用于卸载一些加载到我们设备上的软件。

```
#!/bin/bash
APKS=`adb shell pm list packages projects`

for apk in $APKS
do
    apk=${apk##package:}
    echo "Uninstalling: $apk"
    adb uninstall $apk
done 
```

当我运行这个脚本时，所有卸载 apk 的命令都失败了。`adb uninstall projects.abd.def`但是，当我在 bash 脚本之外运行完全相同的命令 ( ) 时，它会成功执行。

我在 bash 脚本中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:59:47.543

我弄清楚了这个问题。我假设变量中有一个回车，并对此进行了测试，但它仍然无法正常工作。

然而，在谷歌搜索多一点之后，我意识到我错误地切断了回车。

这是正确的方法：

```
apk=`echo -n ${apk} | tr -d "\r"` 
```

# php - php日期函数，用于前一天/后一天

> ID：12570153
> 
> 赞同：0
> 
> 时间：2012-09-24T17:46:49.563
> 
> 标签：php, html, date

有没有什么简单的方法可以用php中的日期函数显示前几天和后几天

```
<?php
echo date ("M m, l")
?> 
```

例如

那只会显示 9 月 9 日，星期一

但是有什么方法可以让它通过单击按钮（下一个）它会显示 9 月 10 日，星期二？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T17:51:58.420

查看[DateTime 相关格式](http://php.net/manual/en/datetime.formats.relative.php)：

```
<?php
$date = new DateTime('2006-12-12');
$date->modify('tomorrow');
echo $date->format('M m, l');

$date->modify('yesterday');
echo $date->format('M m, l');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:05:57.157

```
$tomorrow  = mktime(0, 0, 0, date("m")  , date("d")+1, date("Y"));
$tomorrow = date("F j, l",$tomorrow); 
$yesterday=mktime(0, 0, 0, date("m")  , date("d")-1, date("Y"));
$yesterday=date("F j, l",$yesterday);
echo $tomorrow; 
echo $yesterday; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:59:08.307

```
 $cd = strtotime(date ("M m, l"));
 $mth = 1; // adding 1 day with the current date
 $retDAY = date('Y-m-d', mktime(0,0,0,date('m',$cd)+$mth,date('d',$cd),date('Y',$cd))); 
echo $retDAY ; // Output 2012-10-10 
```

检查[这个](http://php.net/manual/en/function.date-add.php)页面，有很多像上面这样的例子，可以清楚地了解上述功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T17:51:19.773

使用[mktime](http://php.net/manual/pt_BR/function.mktime.php)函数：

`echo date ("M m, l", mktime(0, 0, 0, 9, 10, 2012))`

从[日期](http://php.net/manual/en/function.date.php)手册页：

```
$tomorrow  = mktime(0, 0, 0, date("m")  , date("d")+1, date("Y"));
$lastmonth = mktime(0, 0, 0, date("m")-1, date("d"),   date("Y"));
$nextyear  = mktime(0, 0, 0, date("m"),   date("d"),   date("Y")+1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T17:51:52.347

这可能有助于显示第二天：

```
<?php
$tomorrow = time() + (24 * 60 * 60); // current time + 24 hours * 60 minutes * 60 seconds
echo 'Tomorrow: '. date('M m, l', $nextWeek) ."\n";
?> 
```

或者`time() - (24 * 60 * 60)`昨天。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T17:52:27.140

您可以使用 strtotime 添加时间

```
date('Y-m-d', strtotime(' +1 day')) 
```

以上将增加 1 天到当前日期....

查看更多信息 [http://www.brightcherry.co.uk/scribbles/php-adding-and-subtracting-dates/](http://www.brightcherry.co.uk/scribbles/php-adding-and-subtracting-dates/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T17:53:32.660

```
date('M m,l',strtotime('+1 day'))
date('M m,l',strtotime('-1 day')) 
```

# unit-testing - 如何使用 SolrJ 禁用 solr 日志记录？

> ID：12570154
> 
> 赞同：2
> 
> 时间：2012-09-24T17:46:51.867
> 
> 标签：unit-testing, maven, logging, solr, solrj

我将 SolrJ 用于我的单元测试的嵌入式 solr 服务器。

问题是我的 maven 输出充满了我并不真正想要的 solr 日志。例如，作为测试的一部分，我有意触发错误查询。我的测试通过了，但很难看到，因为屏幕上充满了 Solr 错误。

我不清楚如何使用 SolrJ 解决这个问题。我想将此作为我的 POM 文件的一部分，以便如果测试失败，开发人员可以编辑 POM 以公开更多信息。

编辑：

Solr 是这样实例化的：

```
System.setProperty("solr.solr.home", "solr/")
def coreInitter = new CoreContainer.Initializer()
def core = coreInitter.initialize()
this.server = new EmbeddedSolrServer(core, "") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:11:35.070

Solr wiki 解释说[SLF4J](http://www.slf4j.org/)是 1.4 以上版本使用的日志框架

*   [http://wiki.apache.org/solr/SolrLogging](http://wiki.apache.org/solr/SolrLogging)

您还没有提供项目的 POM 依赖项，所以我自己编写了：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb.demo</groupId>
    <artifactId>demo</artifactId>
    <version>1.0-SNAPSHOT</version>
    <dependencies>
        <dependency>
               <groupId>org.apache.solr</groupId>
               <artifactId>solr-solrj</artifactId>
               <version>3.6.1</version>
               <exclusions>
                    <exclusion>
                        <groupId>commons-logging</groupId>
                        <artifactId>commons-logging</artifactId>
                    </exclusion>
               </exclusions>
        </dependency>
        <dependency>
               <groupId>org.apache.solr</groupId>
               <artifactId>solr-core</artifactId>
               <version>3.6.1</version>
        </dependency>
    </dependencies>
</project> 
```

这具有以下依赖关系树：

```
$ mvn dependency:tree
..
..
[INFO] com.myspotontheweb.demo:demo:jar:1.0-SNAPSHOT
[INFO] +- org.apache.solr:solr-solrj:jar:3.6.1:compile
[INFO] |  +- commons-httpclient:commons-httpclient:jar:3.1:compile
[INFO] |  +- commons-io:commons-io:jar:2.1:compile
[INFO] |  +- org.codehaus.woodstox:wstx-asl:jar:3.2.7:runtime
[INFO] |  +- org.slf4j:jcl-over-slf4j:jar:1.6.1:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:1.6.1:compile
[INFO] \- org.apache.solr:solr-core:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-core:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-analyzers:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-highlighter:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-kuromoji:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-memory:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-misc:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-phonetic:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-queries:jar:3.6.1:compile
[INFO]    |  \- jakarta-regexp:jakarta-regexp:jar:1.4:compile
[INFO]    +- org.apache.lucene:lucene-spatial:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-spellchecker:jar:3.6.1:compile
[INFO]    +- org.apache.lucene:lucene-grouping:jar:3.6.1:compile
[INFO]    +- commons-codec:commons-codec:jar:1.6:compile
[INFO]    +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO]    +- commons-lang:commons-lang:jar:2.6:compile
[INFO]    +- com.google.guava:guava:jar:r05:compile
[INFO]    \- javax.servlet:servlet-api:jar:2.4:compile 
```

这些都不是日志记录实现 jar。您会注意到 SolrJ 添加了“jcl-over-slf4j”，以确保将公共日志记录 API 调用重定向到 SLF4J。

要完全禁用 SLF4J 日志记录，请添加特殊的 NOP 依赖项：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-nop</artifactId>
    <version>1.6.1</version>
    <scope>runtime</scope>
</dependency> 
```

注意范围声明。编译代码不需要记录实现 jar，如果另一个项目使用您项目的 POM，可能会导致问题。

# java - Java - 获取资源文件的字符串路径

> ID：12570155
> 
> 赞同：0
> 
> 时间：2012-09-24T17:47:01.477
> 
> 标签：java, url, jar, resources, path

我想访问以获取我的资源密钥文件的字符串路径。如果我在 Eclipse 中调试项目，一切都会像魅力一样工作，但如果我将项目导出到可运行的 .jar 文件 - 项目无法访问关键文件，因为路径错误。

```
PUBLIC_KEY_PATH = "src/resources/public.key";
PRIVATE_KEY_PATH = "src/resources/private.key"; 
```

但是如何获得可运行的 .jar 文件的正确路径？我不想获取 URL 或其他任何内容 - 我想获取字符串路径。

我希望有人能帮助我。

* * *

**解决方案：**

```
public static String PUBLIC_KEY_PATH = "/resources/public.key";
public static String PRIVATE_KEY_PATH = "/resources/private.key"; 
```

我正在使用`InputStream`读取文件内容：

```
InputStream in = ExampleClass.class.getResourceAsStream(PUBLIC_KEY_PATH);
ObjectInputStream oin = new ObjectInputStream(new BufferedReader(in)); 
```

我们走了；）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:49:48.917

您可以[`inputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)通过[`Class#getResourceAsStream()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29). 例如：

```
InputStream is = FooClass.class.getResourceAsStream("public.key"); 
```

您将`public.key`文件保存在同一目录中的位置。~~`FooClass.java`~~ `FooClass.class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T17:56:58.180

您可以将这些密钥复制到`WEB-INF/classes`加载这些密钥的任何位置，请致电

`this.getClass().getClassloader().getResourceAsStream(fileName)`.

# c# - 数据集未执行

> ID：12570158
> 
> 赞同：0
> 
> 时间：2012-09-24T17:47:15.570
> 
> 标签：c#, asp.net, database, vb.net

```
<WebMethod(Description:="JSON Hierarchy Object")> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function xmlData() As Object

        Using _ds As DataSet = db.ExecuteDataSet(CommandType.Text, "Select NodeID, NodeName,ParentID from Nodes WHERE ParentID=1")
            _ds.DataSetName = "Menus"
            _ds.Tables(0).TableName = "Menu"
            Dim relation As New DataRelation("ParentChild", _ds.Tables("Menu").Columns("NodeID"), _ds.Tables("Menu").Columns("ParentID"), True)
            relation.Nested = True
            _ds.Relations.Add(relation)
            Dim StrDc As String() = New String(_ds.Tables(0).Columns.Count - 1) {}
            Dim HeadStr As String = String.Empty
            For i As Integer = 0 To _ds.Tables(0).Columns.Count - 1
                StrDc(i) = _ds.Tables(0).Columns(i).Caption
                HeadStr += """" + StrDc(i) + """ : """ + StrDc(i) + i.ToString() + "¾" + ""","
            Next
            HeadStr = HeadStr.Substring(0, HeadStr.Length - 1)
            Dim Sb As New StringBuilder()
            Sb.Append("{""" + _ds.Tables(0).TableName + """ : [")
            For i As Integer = 0 To _ds.Tables(0).Rows.Count - 1
                Dim TempStr As String = HeadStr
                Sb.Append("{")
                For j As Integer = 0 To _ds.Tables(0).Columns.Count - 1
                    TempStr = TempStr.Replace(_ds.Tables(0).Columns(j).ToString + j.ToString() + "¾", _ds.Tables(0).Rows(i)(j).ToString())
                Next
                Sb.Append(TempStr + "},")
            Next
            Sb = New StringBuilder(Sb.ToString().Substring(0, Sb.ToString().Length - 1))
            Sb.Append("]}")
            Return Sb.ToString
        End Using

    End Function 
```

我正在使用上面的函数返回 a`JSON String`但是当我`ParentID=1`在这个 sql 查询中使用时，`Select NodeID, NodeName,ParentID from Nodes WHERE ParentID=1`我得到以下错误

```
System.ArgumentException: This constraint cannot be enabled as not all values have corresponding parent values.
   at System.Data.ConstraintCollection.AddForeignKeyConstraint(ForeignKeyConstraint constraint)
   at System.Data.ConstraintCollection.Add(Constraint constraint, Boolean addUniqueWhenAddingForeign)
   at System.Data.DataRelationCollection.DataSetRelationCollection.AddCore(DataRelation relation)
   at System.Data.DataRelationCollection.Add(DataRelation relation)
   at Haggler.xmlData() in D:\2008VS\Haggler\EntLib5\App_Code\Haggler.vb:line 114 
```

**表结构：**

![在此处输入图像描述](../Images/c59e7c2183cea866c2b33ed32f2b10d4.png)

当我从 Sql 查询中删除 Where 子句时，它工作正常。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:04:10.773

您可以用此代码替换`(Replace True with False)`

```
Dim relation As New DataRelation("ParentChild", _ds.Tables("Menu").Columns("NodeID"), _ds.Tables("Menu").Columns("ParentID"), False) 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/9ae5a582%28v=vs.80%29.aspx](http://msdn.microsoft.com/fr-fr/library/9ae5a582%28v=vs.80%29.aspx)

# c++ - 具有所有键的下限和上限迭代的多键映射

> ID：12570159
> 
> 赞同：1
> 
> 时间：2012-09-24T17:47:16.613
> 
> 标签：c++, algorithm, data-structures, stl

假设我正在使用一个使用三个字符串作为键的映射。这是一个简单的示例结构：

```
struct ExampleMapKey
{
 std::string key0;
 std::string key1;
 std::string key2;

 bool operator<(const ExampleMapKey& other) const
 {
  if (key0 < other.key0) return true;
  else if (key0 > other.key0) return false;

  if (key1 < other.key1) return true;
  else if (key1 > other.key1) return false;

  return key2 < other.key2;
 }
} 
```

现在，这可以正常工作，直到我决定要使用`lower_bound`and `upper_bound`。如果我想找到由任何 key0、任何以“ab”开头的 key1 和任何以“cd”开头的 key2 形成的值的范围，分别使用这两个函数和`ExampleMapKey("", "ab", "cd")`和`ExampleMapKey("", "ac", "ce")`将让我遍历不满足我的键要求。或者我会错过这样做的钥匙吗？无论哪种方式，都是错误的。

看来我需要的是一个数据结构，它可以按每个键显式索引，并且还允许我执行潜在的复杂`lower_bound`和`upper_bound`迭代。有这样的事吗？我不一定使用字符串，也不限于只有 3 个键，所以它需要是 STL 样式或类似的通用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:53:45.577

1.  [Boost 多索引容器库](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/index.html)可以提供帮助。

    **更新：**重读您的问题后，我认为您可能必须做 db 课程中所教的内容；您必须使用其中一个索引来创建临时结果，并根据您的第二个约束修剪该结果（或者，您可以在每个索引上运行每个约束，加入结果）。Boost Multi-index Containers AFAIK 一次只允许查找一个索引。

2.  对于您询问的特定类型的查询，您可以通过在索引分区上添加索引来提供非常专业的数据结构来提供帮助。也就是说，例如，您取第二个索引，将其分成两半，为前半部分和第二部分重写第三个索引。然后你将每一半分开并重复。这样，您可以选择第二个索引的一部分，然后选择第三个索引的一部分（大约）在第二个索引的该部分内。但我不知道有任何图书馆这样做。

3.  另一种方法可能是某种多维数据结构，尽管我不熟悉将这种结构与非数字键一起使用。例如，假设您的键是整数，您可以使用 3D [kd-tree](http://en.wikipedia.org/wiki/K-d_tree)或其他空间索引，并查询三次范围。例如：（使用[libssrckdtree](http://www.savarese.com/software/libssrckdtree/)，似乎它也可能适用于字符串）：

(3) 的代码：

```
#include <ssrc/spatial/kd_tree.h>

#include <cstdlib>
#include <ctime>
#include <iostream>
#include <algorithm>
#include <cassert>

#include <string>

typedef std::array<std::string, 3> Point;

typedef ssrc::spatial::kd_tree<Point, Point> Tree;

int main()
{
  Tree tree;

  Point point = {{"any1","aa1","cc1"}};
  tree[point] = point;

  point = {{"any2","ab1","cc1"}};
  tree[point] = point;

  point = {{"any3","ab1","cd1"}};
  tree[point] = point;
  point = {{"any4","ab1","cd2"}};
  tree[point] = point;
  point = {{"any5","ab1","cd3"}};
  tree[point] = point;

  point = {{"any22","ac1","cc1"}};
  tree[point] = point;

  point = {{"any33","ac1","cd1"}};
  tree[point] = point;
  point = {{"any44","ac1","cd2"}};
  tree[point] = point;
  point = {{"any55","ac1","cd3"}};
  tree[point] = point;

  point = {{"any6","aa1","cd2"}};
  tree[point] = point;
  point = {{"any7","aa1","cd3"}};
  tree[point] = point;

  Point lower{ { "any0", "ab", "cd" } }, upper{ { "any9", "ac", "cd2" } };

  for(Tree::const_iterator it = tree.begin(lower, upper), end = tree.end();
      it != end; ++it)
  {
    Point point = it->first;
    Point value = it->second;
    std::cout << point[0] << ", " << point[1] << ", " << point[2] << std::endl;
  }

  return 0;
} 
```

输出：

```
any3, ab1, cd1
any4, ab1, cd2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:02:59.483

在这种`std::map`情况下，不会有一个范围，而是一组范围。

考虑这样的键（按您的比较器对象定义的排序）：

```
#0 {"aa", "aa", "cb" },
#1 {"aa", "ab", "cd" },
#2 {"aa", "abb", "cdd" },
#3 {"ab", "aa", "cb" },
#4 {"ab", "ab", "cd" },
#5 {"ab", "abb", "cdd" }, 
```

与您的约束匹配的范围是：{1.2} 和 {4,5}。

`std::map<>`你必须找到每个key0的范围，然后在给定的key0内 - 为key1做lower/upper_bound，然后对key2做同样的事情。但要这样做 - 从以下位置重新定义您的地图：

```
std::map<ExampleKey, T> 
```

至

```
std::map<std::string, std::map<std::string, std::map<std::string, T> > >: 
```

要查找所有匹配范围，请执行以下操作：

```
for (auto it0 = theMap.begin(); it0 != theMap.end(); ++it0)
{
    auto it1lower = it0->second.lower_bound("ab");
    auto it1upper = it0->second.upper_bound("ac");
    for (auto it1 = it1lower; it1 != it1upper; ++it)
    {
       auto it2lower = it1->second.lower_bound("cd");
       auto it2upper = it1->second.upper_bound("ce");
       // and now we have on of matching ranges:
    }
} 
```

# google-visualization - 如何从 Google Charts API 将颜色应用于饼图切片

> ID：12570161
> 
> 赞同：19
> 
> 时间：2012-09-24T17:47:24.797
> 
> 标签：google-visualization

嗨，我正在尝试在我的饼图切片中应用颜色。我正在使用谷歌图表 API。

在这里你得到了所有的饼图信息：[https ://google-developers.appspot.com/chart/interactive/docs/gallery/piechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)

这是我在说什么的捷径：

> slices 对象数组，或带有嵌套对象的对象 {} 对象数组，每个对象描述饼图中对应切片的格式。要使用切片的默认值，请指定一个空对象 {}。如果未指定切片或值，则将使用全局值。每个对象都支持以下属性：
> 
> color - 用于此切片的颜色。指定一个有效的 HTML 颜色字符串。textStyle - 覆盖此切片的全局 pieSliceTextSlice。您可以指定一个对象数组，每个对象按给定顺序应用于切片，或者您可以指定一个对象，其中每个子对象都有一个数字键，指示它适用于哪个切片。例如，以下两个声明是相同的，将第一个切片声明为黑色，第四个切片声明为红色：
> 
> 切片：[{color: 'black', {}, {}, {color: 'red'}] 切片：{0: {color: 'black'}, 3: {color: 'red'}}

不知道我应该把这段代码放在哪里，这里是操场：[https ://code.google.com/apis/ajax/playground/?type=visualization#pie_chart](https://code.google.com/apis/ajax/playground/?type=visualization#pie_chart)

这是我的尝试（不起作用）

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['Task', 'Hours per Day'],
    ['Work', 11],
    ['Eat', 2],
    ['Commute', 2],
    ['Watch TV', 2],
    ['Sleep', 7]
  ]);

  // Create and draw the visualization.
  new google.visualization.PieChart(document.getElementById('visualization')).
      draw(data, {title:"So, how was your day?", slices: [{color: 'black', {color: 'blue'}, {color: 'green'}, {color: 'red'}, {color: 'white'}]});
}
​ 
```

谢谢你的时间。///////////////////////////////////////// /////////////////////////////////

**编辑：**

```
<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     11],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]);

        var options = {
          title: 'My Daily Activities',
          slices: {0: {color: '#006EFF'}, 1:{color: '#00FF08'}, 2:{color: 'blue'}, 3: {color: 'red'}, 4:{color: 'grey'}}
        };

        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

注：我用过

```
slices: {0: {color: '#006EFF'}, 1:{color: '#00FF08'}, 2:{color: 'blue'}, 3: {color: 'red'}, 4:{color: 'grey'}} 
```

反而

```
slices: [{color: 'black', {}, {}, {color: 'red'}] 
```

再见。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-10-26T21:42:22.923

您可以使用以下方法更改饼图切片的默认颜色：

```
var options = {
  width: 400,
  height: 240,
  title: 'Toppings I Like On My Pizza',
  colors: ['#e0440e', '#e6693e', '#ec8f6e', '#f3b49f', '#f6c7b6']
}; 
```

# c# - 从不使用标签控件的对话框中获取文本？

> ID：12570167
> 
> 赞同：12
> 
> 时间：2012-09-24T17:47:41.097
> 
> 标签：c#, delphi, winapi, messagebox

这是我之前的问题[如何抑制 Inproc COM 服务器显示的对话框](https://stackoverflow.com/questions/12532812/how-to-supress-a-dialog-box-an-inproc-com-server-displays)的延续。

* * *

## 背景：

回顾一下我的情况：我有一个来自第三方的用 Delphi 编写的 Inproc COM 服务器。如果捕获特定类型的错误，我调用的函数之一将显示错误消息对话框。问题是我正在尝试批量处理数据，而我正在使用的数据源导致该错误对话框弹出很多（感谢我之前的问题的答案，它现在自动关闭并且我能够运行它完成，它会显示对话框并要求有人按 OK 9923 次）。进程阻塞，直到消息框关闭。

* * *

## 问题：

我想更好地记录错误对话框所说的内容。但是，任何获取对话框正文的尝试都失败了。

![对话框的图像](../Images/5c0153e7cd2813dbf5457930254c3964.png)

```
//Snip

private void StartWindowListener()
{
    //Queue the watcher on the message pump if we are not watching.
    if (_watcherRunning == false)
    {
        _watcherRunning = true;
        _dummyForm.BeginInvoke(new Action(() =>
        {
            _watcherRunning = false;

            //If we are not inside the com object don't enumerate.
            if (_insideCom == false) return;

            // Enumerate windows to find dialogs
            EnumThreadWndProc callback = new EnumThreadWndProc(CheckWindow);
            EnumThreadWindows(GetCurrentThreadId(), callback, IntPtr.Zero);
            GC.KeepAlive(callback);
        }));
    }
}

private bool CheckWindow(IntPtr hWnd, IntPtr lp)
{
    // Checks if hWnd is the expected dialog
    StringBuilder sb = new StringBuilder(260);
    GetClassName(hWnd, sb, sb.Capacity);
    if (sb.ToString() == "TMessageForm")
    {
        //This returns the dialog box's title
        GetWindowText(hWnd, sb, sb.Capacity);

        //This returns IntPtr.Zero
        var hDialogText = GetDlgItem(hWnd, 0xFFFF);
        if (hDialogText != IntPtr.Zero)
            GetWindowText(hDialogText, sb, sb.Capacity);

        //This returns a empty string
        GetDlgItemText(hWnd, 0xFFFF, sb, sb.Capacity);

        //Only sees the OK button.
        IntPtr hCtl = IntPtr.Zero;
        HashSet<IntPtr> seen = new HashSet<IntPtr>();
        while ((hCtl = GetNextDlgGroupItem(hWnd, hCtl, false)) != IntPtr.Zero)
        {
            //When we see the same control twice, break out of the loop.
            if (seen.Add(hCtl) == false)
                break;

            GetClassName(hCtl, sb, sb.Capacity);
            SendMessage(hCtl, WM_GETTEXT, sb.Capacity, sb)

            //Close the dialog by sending WM_CLOSE to the window
            SendMessage(hWnd, WM_CLOSE, IntPtr.Zero, IntPtr.Zero);
        }

         //Snip...
    }
    return true;
}

//Snip...

// P/Invoke declarations
const int WM_CLOSE = 0x0010;
private delegate bool EnumThreadWndProc(IntPtr hWnd, IntPtr lp);
[DllImport("user32.dll")]
private static extern bool EnumThreadWindows(int tid, EnumThreadWndProc callback, IntPtr lp);
[DllImport("user32.dll")]
private static extern int GetClassName(IntPtr hWnd, StringBuilder buffer, int buflen);
[DllImport("user32.dll")]
private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);
[DllImport("kernel32.dll")]
private static extern int GetCurrentThreadId(); 
```

我想我可能在向它添加文本之前中断了对话框（当我中断上面的代码时，它还没有完全绘制）。但是，`Application.DoEvents`在开始枚举之前放置一个 StartWindowListener 可以让对话框完全绘制，但我仍然得到与使用上述代码发布的结果相同的结果。

在对话框上执行 Ctrl-C 可以正常工作，因此我可以在紧要关头使用它，但由于我必须重复这 9923 次，我想避免以编程方式使用它。

有没有其他方法可以尝试从消息框中获取文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T20:29:59.560

感谢[Sertac 的评论](https://stackoverflow.com/questions/12570167/getting-the-text-from-a-dialog-box-that-does-not-use-a-label-control#comment16942982_12570167)，我发现 Delphi 消息框中的文本不是窗口对象，它们是使用“DrawText”方法绘制的。我使用[EasyHook](http://easyhook.codeplex.com/)拦截了 Windows API 调用，现在我可以抓取我关心的文本了。

```
////It appears that DrawText always calls DrawTextEx so it is getting intercepted twice.
//// Only need to hook DrawTextEx
static EasyHook.LocalHook _drawTextExAHook;

//Snip...

public override void Run()
{
    //Snip...

    IntPtr drawTextExAPtr = EasyHook.LocalHook.GetProcAddress("user32", "DrawTextExA");
    _drawTextExAHook = EasyHook.LocalHook.Create(drawTextExAPtr, new DrawTextExDelegate(DrawTextEx_Hooked), null);

    //The COM stuff must be run in a STA Thread so we can intercept the message boxes that it throws up.
    var staThread = new Thread(() =>
        {
            try
            {
                var threadID = new[] { GetCurrentThreadId() };
                //Enable the hook on the current thread.
                _drawTextExAHook.ThreadACL.SetInclusiveACL(threadID);

                //Tell the dummy form to start ComThread
                _dummyForm = new DummyForm(ComThread);
                Application.Run(_dummyForm);
            }
            finally
            {
                if(_drawTextExAHook != null)
                    _drawTextExAHook.Dispose();
            }
        });
    staThread.SetApartmentState(ApartmentState.STA);
    staThread.Name = "Com Thread";
    staThread.Start();

    //Wait for the Com Thread to finish.
    staThread.Join();

}

//Snip...

private delegate int DrawTextExDelegate(IntPtr hdc, string lpchText, int cchText,
                ref Rect lprc, uint dwDTFormat, ref DRAWTEXTPARAMS lpDTParams);

private int DrawTextEx_Hooked(IntPtr hdc, string lpchText, int cchText, ref Rect lprc, 
                                     uint dwDTFormat, ref DRAWTEXTPARAMS lpDTParams)
{
    LogErrorText(lpchText);
    return DrawTextEx(hdc, lpchText, cchText, ref lprc, dwDTFormat, ref lpDTParams);
}

[DllImport("user32.dll")]
static extern int DrawTextEx(IntPtr hdc, string lpchText, int cchText,
                             ref Rect lprc, uint dwDTFormat, ref DRAWTEXTPARAMS lpDTParams); 
```

# bdd - 我们如何处理 BDD 场景的小排列？

> ID：12570169
> 
> 赞同：6
> 
> 时间：2012-09-24T17:47:44.063
> 
> 标签：bdd, acceptance-testing

我很喜欢 BDD 的开发方法，但我遇到了一个问题，就是要走多远。来自 ThoughtWorks 最近的[Radar](http://thoughtworks.fileburst.com/assets/thoughtworks-tech-radar-march-2012-us-color.pdf)的评论让我停顿了一下：

> “像 Cucumber 这样的行为驱动设计 (BDD) 测试框架的出现，与像 Selenium 这样的浏览器自动化工具相结合，鼓励了在浏览器级别广泛使用验收测试。不幸的是，这鼓励了在运行成本较高的情况下进行大量测试。测试是最大的。相反，我们应该在适当的级别进行测试，尽可能接近代码，这样才能以最高的效率运行测试。浏览器级别的测试应该是锦上添花，有验收和单元支持在适当的层执行测试。”

所以这是我的场景（双关语）：

我有一个基本的 CRUD 应用程序，其业务要求是根据允许最终用户选择的标准过滤显示的数据。为了便于讨论，假设它是电力公司的应用程序，我正在显示每个客户当前的当月至今的用电量。此应用程序的用户可以通过选择单个客户、多个客户、无客户或“所有客户”来缩小数据范围。显示的数据将根据他们选择的内容而变化。

对于产品利益相关者来说，这些实际上代表了 4 个不同的场景。但是从开发人员的角度来看，它们实际上是相同的，唯一的区别是传递给数据库的参数。所以问题就变成了：说明每个排列的好处是否超过了运行和维护它们的成本？

我认为 BDD 原则可能会说“是”，因为预期行为的沟通更加明确，但我不确定。这对我来说肯定有矫枉过正的感觉。这些场景可能是大量的复制粘贴，并进行了微小的更改。

我的倾向是用一个捕获核心业务价值的场景来覆盖这个功能（“当我选择一个客户时，我会看到用电量数据”），然后用一组非基于 UI 的集成测试来覆盖其他排列验证服务/查询返回正确的数据。这种想法是错误的吗？在不放弃 BDD 优势的情况下，确保涵盖这些场景的最佳答案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:12:24.883

我对 BDD 的规则是，开发人员应该能够轻松地从所描述的任何行为中推导出场景，如果他们不能，请用场景来说明行为。

BDD 在描述棘手的事情时最有用。要么将专业知识传递给开发人员，要么缩小行为范围，直到发现不确定性。在具有基本过滤器的 CRUD 应用程序中，行为非常容易理解。

您所描述的可能最好地涵盖了 Dan North 的“姜饼”模式：采用其他方法的配方，但行为的一个方面与另一个不同（或者在这种情况下，还有一个额外的、易于理解的行为方面）。他也使用了一些复制粘贴，我特别怀疑这种行为。

所以，你的倾向是完全正确的。如果自动化，我可能只自动化一个示例，让单元和集成测试涵盖其余部分。

我也想知道为什么要开展这个项目。它必须有*一些*有趣的东西，否则它就不会发生。找到它，这可能是开始讨论场景的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:42:11.333

如果您正在重构场景，通常是通过从重复脚本中提取小表，那么维护成本可能根本不会伤害您。但是，这并不能解决执行时间成本的问题。

在这种情况下，我可能会建议自动化最简单的场景（没有客户）和最复杂的场景（许多客户匹配过滤器，但不是全部），并将其他排列留给更集中的程序员测试。我会包括“没有客户”的情况，只是因为人们倾向于把这个问题弄得很糟糕，比如偶尔会导致程序崩溃。（你没有运行种子数据脚本？！）

# analytics - Piwik 分析跟踪器返回 403

> ID：12570171
> 
> 赞同：0
> 
> 时间：2012-09-24T17:48:21.870
> 
> 标签：analytics, http-status-code-403, matomo

我刚刚在 HostGator 服务器上安装了 Piwik，但是在安装过程中我收到一条错误通知，指出跟踪器正在返回 403 状态代码。然后它说要更改一些权限，我可能需要联系网络主机来执行此操作 + 之后重新启动服务器。

我联系了我的虚拟主机，他们更改了它，但是当我在共享主机上运行分析时，他们无法重新启动服务器。所以跟踪器不工作，如果我查看控制台日志，我会看到以下错误：

```
Failed to load resource: the server responded with a status of 403 (Forbidden)
http://analytics.mysite.com/piwik.php?action_name=... 
```

有没有人遇到过类似的问题？在联系支持人员后，我之前在同一个 HostGator 经销商帐户上安装了 Piwik，但这次没有用......我能做些什么来解决这个问题吗？

**修正：**我今天再次与他们交谈，并要求他们做与我昨天要求的相同的事情，但这次成功了。不知道他们昨天在做什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:14:00.223

要求 Hostgator 将您的帐户从 mod_security 列入白名单。

# postgresql - 如何只记录查询而不执行 Postgres 服务器？

> ID：12570172
> 
> 赞同：1
> 
> 时间：2012-09-24T17:48:20.977
> 
> 标签：postgresql

有什么办法可以让 postgres 服务器只记录传入的语句而不执行它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:52:17.417

不，任何半理智的程序都会在几次查询后发疯，这些查询没有返回任何有意义的数据并且对未来的查询没有影响。

您试图以这种方式解决的问题是什么？

# heroku - Heroku 创建了十几个 sh 和 ruby 进程

> ID：12570178
> 
> 赞同：0
> 
> 时间：2012-09-24T17:48:49.230
> 
> 标签：heroku

我已经在 Mac 上成功安装了 Heroku Toolbelt，一切都运行良好，除了 Heroku 创建多重 sh 和 ruby​​ 进程，这会`heroku`在终端中每次使用应用程序时冻结我的 mac。

帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T16:44:33.797

为了解决问题，我们需要首先删除 Heroku Tollbelt：

```
rm -rf /usr/local/heroku
rm -rf /usr/bin/heroku 
```

[并使用brew](http://mxcl.github.com/homebrew/)安装 Heroku ：

```
brew install heroku 
```

您可能需要安装额外的 gem 才能充分使用 Heroku，如果有这种需要，您会在命令行中收到通知。

**编辑**

问题已在较新版本中得到解决。

# asp.net-mvc - 大型 ajax 请求授权失败

> ID：12570180
> 
> 赞同：1
> 
> 时间：2012-09-24T17:49:06.660
> 
> 标签：asp.net-mvc, authorization

我可以通过 ajax 成功地将 POST 发送到具有 [Authorize] 属性的控制器并传入一个数组（JSON 编码）。

当我使用大型数组（大约 3,000 个）数字 ID 发出相同的请求时，我立即得到 Authorize 属性返回的 401，并且操作方法永远不会被执行。

为什么大负载会影响授权属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:51:59.777

您需要将此添加到您的 web.config

```
 <system.web>
    <httpRuntime maxRequestLength="2097151" executionTimeout="1200" /> 
```

因为你很可能超过默认限制（[4mb](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)），上面将其设置为 2gb

# multithreading - perl如何使用is_running

> ID：12570184
> 
> 赞同：1
> 
> 时间：2012-09-24T17:49:18.387
> 
> 标签：multithreading, perl

我的程序是这样的：

```
use strict;
use threads;
use threads::shared;

my @thr;
for (my $i = 0; $i < $ARGV[0]; $i++) {
    $thr[$i] = threads->create(\&Iteration, $i);
}

foreach (@thr) {
    if ($_->is_running()) {
        print "no";
    }
    else{
        $_->join;
    }
}

sub Iteration {
    my $in = shift;
    print "test$in\n";
} 
```

但是当我用 $ARGV[0] 运行它时，比如 5，输出是

```
test2
test1
test0
test3
test4
Can't locate auto/threads/is_running.al in @INC 
```

那么，如何使用 is_running() 语句来检查我的一个线程的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:59:46.620

看起来不错。该消息表明 sub 不存在，因此我怀疑您使用的是旧版本的线程，它没有这种方法。如果是这样，只需升级您的线程模块。

```
cpan threads 
```

以下应该为您提供您已安装的版本（当前为 1.86，`is_running`似乎已添加到 1.34）：

```
perl -Mthreads -le'print $threads::VERSION' 
```

以下内容应为您提供已安装版本的文档：

```
perldoc threads 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:38:35.103

如果您真的无法升级，您可以`is_running`使用线程 ID 的共享表自己实现类似簿记。就像是：

```
package Untested::Workaround;
#
# my $thr = Untested::Workaround->spawn(\&routine, @args);
# ...
# if (Untested::Workaround->is_running($thr)) ...
#
#
...
our %Running : shared;        # Keys are "running" tids

sub _bookkeeping {
  my ($start_routine, @user_args) = @_;
  my $ret;

  { lock(%Running); $Running{ threads->tid() } = 1; }
  $ret = $code->(@args);
  { lock(%Running); delete $Running{ threads->tid() }; }

  $ret;
}

sub spawn {
  shift; #ignore class
  threads->create(\&_bookkeeping, @_);
}

sub is_running { lock %Running; $Running{ $_[1]->tid() }; } 
```

上述内容再次未经测试。它可以被改进，要么继承`threads`或修改`threads`' 命名空间以提供更现代、更自然的 API。（它也忽略了调用者上下文，它`threads`保留了它的启动例程。）

# winapi - 如何从 SYSTEMTIME 获取本地化日期和时间

> ID：12570185
> 
> 赞同：4
> 
> 时间：2012-09-24T17:49:22.413
> 
> 标签：winapi

我有一个 SYSTEMTIME，我正在尝试从中获取包含日期和时间值的本地化字符串。像 GetDateFormat/GetTimeFormat 这样的 API 可以获取日期或时间，但不能同时获取两者。

是否有可用的 API 可以为我提供来自 SYSTEMTIME 的日期和时间的本地化字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:28:44.347

Windows API 没有日期/时间格式字符串。它有单独的日期和时间格式字符串。

.Net 确实有`DateTimeFormatInfo.FullDateTimePattern`，但是在 Reflector 中看起来这似乎被初始化为：

```
LongDatePattern + " " + LongTimePattern 
```

这就是它对我的 Windows 7 PC 上所有 354 种文化的价值。如果程序创建了自定义 .Net 文化并对其进行了不同的定义，您只会看到不符合此模式的内容。

我开发过的软件销往世界各地，从来没有人抱怨过我们使用空格分隔的日期和时间。

# atk4 - AGILETOOLKIT :: 如何在 CRUD 弹出窗口中添加下拉菜单？

> ID：12570186
> 
> 赞同：1
> 
> 时间：2012-09-24T17:49:24.440
> 
> 标签：atk4, agiletoolkit

我有 3 个表，即用户、项目和购买。

购买 hasMany('Users') 和 hasMany('Item')。现在当你

```
class Model_Purchase extends Model_Table {
public $table = 'purchase';
function init(){
    parent::init();

    $this->hasMany('Users');
    $this->hasMany('Item');

    $users = $this->join('users.id', 'users_id', 'left' );
    $users->addField('user_name');

    $users = $this->join('item.id', 'item_id', 'left' );
    $users->addField('item_name');

}
} 
```

现在，当我单击“添加”时，会打开一个带有文本字段的表单。我想要的是所有用户和所有项目的下拉列表。

我是否需要通过分别查询每个表并从一个表中选择用户然后从另一个表中选择项目来实现它？

我怎样才能在那个“CRUD”弹出窗口中进行更改？

这是参考 URL，用于检查我的实施：http: [//qambarraza.com/projects/purchaseitem/ ?page=purchase](http://qambarraza.com/projects/purchaseitem/?page=purchase)

谢谢，

坎巴尔·拉扎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T08:47:54.713

在您的情况下，购买 hasOne 项目和 hasOne 用户。这应该会给你弹出窗口。

# asp.net-ajax - 在 ASP.NET 中动态创建子域

> ID：12570187
> 
> 赞同：0
> 
> 时间：2012-09-24T17:49:32.877
> 
> 标签：asp.net-ajax, subdomain

我想使用 C# 动态创建一个子域。

例如，域名是`www.example.com`. 如何根据地区动态创建国家子域。例如，我想使用 C# 将 India 添加为子域`www.india.example.com`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:38:43.513

这是简单的替代方法：

*   [http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx](http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx)
*   [http://lukesampson.com/post/303245177/subdomains-for-a-single-application-with-asp-net-mvc](http://lukesampson.com/post/303245177/subdomains-for-a-single-application-with-asp-net-mvc)

# c# - 如何更改 Kendo UI Grid 上的文本销毁或删除命令操作？

> ID：12570188
> 
> 赞同：14
> 
> 时间：2012-09-24T17:49:35.013
> 
> 标签：c#, javascript, jquery, telerik, kendo-ui

我正在使用 KendoUI KendoGrid。我有一个带有删除按钮或“销毁”操作的列。Kendo 会显示一个警告框，其中包含文本“您确定要删除此记录吗？” 我需要这个文本更具体地针对我的情况。您如何自定义此文本？

任何帮助，将不胜感激。

我添加列的代码是：

```
$reports.kendoGrid(
{
    dataSource: dataSource,
    pageable: {
        refresh: true,
        pageSizes: true
    },
    toolbar: [{ name: "create", text: "Add" }],
    columns:
    [
        { field: 'name', title: 'Report', sortable: true },
        { command: ["edit", "destroy"], title: "&nbsp;", width: "180px", } 
    ],
    editable: "inline",
    selectable: true, 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-12T19:29:53.097

如果你使用的是 ASP.NET MVC 的 Kendo UI，你可以使用 DisplayDeleteConfirmation

```
 @(Html.Kendo().Grid<OrdersViewModel>()
              .Name("Orders")
              .HtmlAttributes(new {style = "height: 100%; border-width: 0;"})
              .Columns(c =>
                  {
                     c.Bound(p => p.Id)
                     .Width(50)
                  }
             .Editable(editable =>
                  {
                     editable.Mode(GridEditMode.InLine);
                     editable.DisplayDeleteConfirmation("Your Message here");
                  })) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-24T17:56:18.277

根据[剑道网格文档](http://docs.kendoui.com/api/web/grid)：

**editable.confirmation**布尔值 | 细绳

定义删除项目时将在确认框中使用的文本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-19T05:52:46.840

代替

```
editable: "inline" 
```

和

```
editable: {
    confirmation: "Your custom message",
    mode: "inline"
}, 
```

# c# - Visual Studio 2012。对象不存在，但项目构建良好

> ID：12570191
> 
> 赞同：0
> 
> 时间：2012-09-24T17:49:49.153
> 
> 标签：c#, asp.net, visual-studio

我的项目中的 1 个 aspx 文件有问题，我希望有人有一些想法来解决它。

我不断得到

> 对象在当前上下文中不存在

在所有控件上，但是当我构建项目时，它构建时没有错误。

如果我在构建后尝试在后面的代码中输入一些东西，那么 Visual Studio 会将标记中的所有控件标记为“对象没有..”

甚至`document.getElementById('<%=specificControl.ClientID%>').value`标记中的所有内容都被标记为“对象不存在......”

我尝试使用不同的名称创建一个新的 aspx 文件，但是如果我将内容背后的标记和代码复制到该文件，则会出现相同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:24:57.020

Apparently I managed to confuse Visual Studio or somthing. As I said it did build without problems, but after renaming the class for the current page I was having issues with, then everything is working.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:04:10.100

这通常发生在文件名后面的代码和 @Page 指令上的 Inherits 属性不匹配时。两者都应该匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T05:53:31.357

您可以通过从下拉列表中选择调试选项来解决此问题，它被选为发布。

# file-upload - 如何在上传表单以及每个单独的文件上传中提交输入字段

> ID：12570197
> 
> 赞同：0
> 
> 时间：2012-09-24T17:50:12.893
> 
> 标签：file-upload, blueimp

我正在使用 blueimp 的 fileupload 插件来实现多个文件上传。

我的样本表格：

```
 <form id="fileupload" action="<?php echo base_url() . 'index.php/main/upload_img'; ?>" method="POST" enctype="multipart/form-data">
<input type="text" name="foldername">
</form> 
```

我还在上传模板中添加了额外的文本输入：

```
<input type="text" name="tags[]"> 
```

为了将标签值发送到服务器，我必须使用 formData 选项；将我的文件夹名称输入值呈现为空。如何将两个输入值都发送到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:02:32.423

我相信这里已经介绍过了：[https ://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-Form-Data](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-Form-Data)

您可以做的是使用 JQuery 的 serializeArray 方法，该方法创建一个 JavaScript 对象数组：

```
 var formData = $('form').serializeArray(); 
```

# java - 无法显示图像

> ID：12570199
> 
> 赞同：0
> 
> 时间：2012-09-24T17:50:20.417
> 
> 标签：java, mysql

我正在创建 Web 应用程序，我在 MYSQL DB 中将图像存储为 MEDIUMBLOB 并在浏览器上显示它们。

```
PreparedStatement psmt = con.prepareStatement("SELECT pdfImage FROM pdfInfo WHERE pdfinfoid=?");
psmt.setString(1, what);
ResultSet rs1 = psmt.executeQuery();

while (rs1.next()) {
    System.out.println("inside rs1.mext");
    String imgLen = rs1.getString(1);
    System.out.println(imgLen.length());
    int len = imgLen.length();
    System.out.println("length inside == " + len);
    byte[] rb = new byte[len];
    InputStream readImg = rs1.getBinaryStream(1);
    InputStream inputStream = readImg;
    int index = readImg.read(rb, 0, len);
    System.out.println("index----------------" + index);
    response.reset();
    response.setHeader("Content-Length", String.valueOf(len));
    response.setHeader("Content-disposition", "inline;filename=/file.png");
    response.setContentType("image/png");
    response.getOutputStream().write(rb, 0, len);
    response.getOutputStream().flush();
} 
```

问题是我能够在本地看到图像以及当我进行项目时。问题仅在于一张图像。

sout 语句的输出如下。

```
INFO: inside rs1.mext
INFO: 5942414
INFO: length inside == 5942414
INFO: index----------------5942414
INFO: leng here is 5942414 
```

当此信息在**本地主机上时，我可以查看图像**，但是当**我将此项目联机时，我无法查看图像**。

我是否需要在任何地方设置任何参数才能看到图像。

其他 sout 语句如下，我可以看到图像。

```
INFO: inside rs1.mext
INFO: 204999
INFO: length inside == 204999
INFO: index----------------204999
INFO: leng here is 204999

INFO: inside rs1.mext
INFO: 515274
INFO: length inside == 515274
INFO: index----------------515274
INFO: leng here is 515274 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:27:33.617

你的问题可能是这样的：

```
int index = readImg.read(rb, 0, len); 
```

该`read`方法不能保证读取您请求的所有数据。

http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read(byte[],%20int,%20int)

“从输入流中读取最多 len 个字节的数据到一个字节数组中。尝试读取 len 个字节，但可以读取较小的字节数。实际读取的字节数以整数形式返回。 "

# c++ - 仅带有取消按钮的消息框

> ID：12570201
> 
> 赞同：2
> 
> 时间：2012-09-24T17:50:25.357
> 
> 标签：c++, visual-c++

我们可以有一个只有取消按钮的消息框吗？如果有，有什么提示吗？是否有内置的 api 方法仅获取带有取消按钮的消息框/

如何创建自定义模式对话框？任何链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:36:32.593

您可以根据需要使用线程本地 CBT 挂钩`SetWindowsHookEx()`来自定义`MessageBox()`对话框。

例如，您可以将“确定”按钮的文本更改为“取消”，例如：

```
HHOOK hHook = NULL;

LRESULT CALLBACK CBTHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode < 0)
        return CallNextHookEx(hHook, nCode, wParam, lParam);

    if (nCode == HCBT_ACTIVATE)
    {
        HWND hWnd = reinterpret_cast<HWND>(wParam);
        SetWindowText(GetDlgItem(hWnd, IDOK), TEXT("Cancel"));
        return 0;
    }

    return CallNextHookEx(hHook, nCode, wParam, lParam);
}

{
    ...
    hHook = SetWindowsHookEx(WH_CBT, reinterpret_cast<HOOKPROC>(&CBTHookProc), NULL, GetCurrentThreadId());
    int iResult = MessageBox(..., MB_OK);
    if (iResult == IDOK) iResult = IDCANCEL;
    UnhookWindowsHookEx(hHook);
    ...
} 
```

或者您可以隐藏标准的“确定”按钮，让对话框仍然使用其原生的“取消”按钮：

```
HHOOK hHook = NULL;

LRESULT CALLBACK CBTHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode < 0)
        return CallNextHookEx(hHook, nCode, wParam, lParam);

    if (nCode == HCBT_ACTIVATE)
    {
        HWND hWnd = reinterpret_cast<HWND>(wParam);
        ShowWindow(GetDlgItem(hWnd, IDOK), SW_HIDE);
        // optionally reposition the IDCANCEL child window as well....
        return 0;
    }

    return CallNextHookEx(hHook, nCode, wParam, lParam);
}

{
    ...
    hHook = SetWindowsHookEx(WH_CBT, reinterpret_cast<HOOKPROC>(&CBTHookProc), NULL, GetCurrentThreadId());
    int iResult = MessageBox(..., MB_OKCANCEL);
    UnhookWindowsHookEx(hHook);
    ...
} 
```

**更新：**在 Vista 及更高版本上，您可以（并且应该）使用[`TaskDialog()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760540.aspx)or[`TaskDialogIndirect()`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760544.aspx)代替`MessageBox()`. 任务对话框更加灵活，包括让您指定对话框上的按钮，甚至使用自定义按钮的能力。因此，您可以轻松地显示仅取消对话框，而无需使用任何挂钩，例如：

```
TaskDialog(..., TDCBF_CANCEL_BUTTON, ..., &iResult); 
```

```
TASKDIALOGCONFIG TaskConfig = {0};
TaskConfig.cbSize = sizeof(TaskConfig);
TaskConfig.dwCommonButtons = TDCBF_CANCEL_BUTTON;
...
TaskDialogIndirect(&TaskConfig, &iResult, ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:56:48.850

对于只显示通知的消息框，我相信使用“确定”框是惯例。取消似乎有点多余？

但我想如果你想这样做，你可以通过定义自己的消息框对象并使用“取消”作为文本属性自己指定按钮来做到这一点。

C++ 或任何其他语言都具有用于定义消息框的内置函数，只需再次“取消”即可，因为“OK”是惯例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:03:09.800

我认为 MessabeBox 不可能。您可以简单地创建自己的对话框并添加一个取消按钮。

你也可以看看这个链接

[消息框](http://www.codeproject.com/Articles/1239/XMessageBox-A-reverse-engineered-MessageBox)

它可能会解决您的问题

# java - 如何创建一个小程序来创建从 Oracle 数据库中提取的下拉菜单

> ID：12570205
> 
> 赞同：0
> 
> 时间：2012-09-24T17:50:55.360
> 
> 标签：java, database, swing, applet

这是我目前的程序：

```
import java.applet.Applet;
import java.awt.Graphics;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import javax.swing.JComboBox;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Timestamp;
import java.util.Properties;

public class CodesApplet extends Applet 
{
    private Properties properties;
    private String configFilePath;
    private FileInputStream fis;
    private String driverName;
    private String userName;
    private String password;
    private String url;

    private Connection conn;
    private Statement st;
    private Timestamp created = new Timestamp(System.currentTimeMillis());

    private JComboBox codes1;
    private JComboBox codes2;
    private JComboBox otherCodes;

    public void init() 
    {
        try 
        {
            //Loads the values from the properties file 
            try 
            {
                properties = new Properties();
                configFilePath="C:\\scriptProps.properties";
                fis = new FileInputStream(configFilePath);

                properties.load(fis);

                if (fis != null)
                {
                    fis.close();
                }
            } 
            catch (FileNotFoundException e) 
            {
                System.err.println("init(): FileNotFoundException(): " + e.getMessage());
            }

            driverName=properties.getProperty("driverName");
            userName=properties.getProperty("userName");
            password=properties.getProperty("password");
            url=properties.getProperty("url");

            //Establishes the connection to the database
            System.out.println("init(): loading OracleDriver for applet created at " + created.toString());
            Class.forName(driverName);
            System.out.println("init(): getting connection");
            conn = DriverManager.getConnection(url, userName, password);
            st = conn.createStatement();

            //Instantiates the previously declared variables for the drop-downs.
            codes1 = new JComboBox();
            codes2 = new JComboBox();
            otherCodes = new JComboBox();
        }
        catch (ClassNotFoundException e)
        {
            System.err.println("init(): ClassNotFoundException: " + e.getMessage());
        } 
        catch (SQLException e)
        {
            System.err.println("init(): SQLException: " + e.getMessage());
        } catch (IOException e) 
        {
            System.err.println("init(): IOException. " + e.getMessage());
        }
    }

    public void start() 
    {
        System.out.println("start(): ");
    }

    public void stop()
    {
        System.out.println("stop(): ");
    }

    //Returns the first drop-down...
    public JComboBox getComboBox1() 
    {
        codes1.removeAllItems();
        codes1.addItem("Please Select...");

        try 
        {
            ResultSet rs = st.executeQuery("select codes from myTable");

            while (rs.next()) 
            {
                codes1.addItem(rs.getString("codes"));
            }

            rs.close();
            st.close();
        } 
        catch (SQLException sqle)
        {
            System.out.println(sqle);
        }

        return codes1;
    }

    //Returns the second drop-down...
    public JComboBox getComboBox2() 
    {
        codes2.removeAllItems();
        codes2.addItem("Please Select...");

        try 
        {
            ResultSet rs = st.executeQuery("select codes from myTable");

            while (rs.next()) 
            {
                codes2.addItem(rs.getString("codes"));
            }

            rs.close();
            st.close();
        } 
        catch (SQLException sqle)
        {
            System.out.println(sqle);
        }

        return codes2;
    }

    //Returns the third drop-down...
    public JComboBox getComboBox3() 
    {
        otherCodes.removeAllItems();
        otherCodes.addItem("Please Select...");

        try 
        {
            ResultSet rs = st.executeQuery("select otherCodes from myTable2");

            while (rs.next()) 
            {
                otherCodes.addItem(rs.getString("otherCodes"));
            }

            rs.close();
            st.close();
        } 
        catch (SQLException sqle)
        {
            System.out.println(sqle);
        }

        return otherCodes;
    }

    public void paint(Graphics g)
    {
        System.out.println("paint(): creating the drop-downs...");

        getComboBox1();
        getComboBox2();
        getComboBox3();
    }

    public void destroy() 
    {
        System.out.println("destroy(): closing connection for applet created at " + created.toString());

        try 
        {
            conn.close();
        } 
        catch (SQLException e) 
        {
            System.err.println("destroy: SQLException: " + e.getMessage());
        }
    }
} 
```

本质上，我想做的是让这个小程序从多个表中提取数据并用该数据填充下拉框。我已经看到了一些关于如何通过一个下拉菜单执行此操作的示例（因此您会看到一个涉及代码 1 的返回语句）。

我的主要问题是：

*   一般来说，我这样做对吗？这是从多个表中提取多个字段的最佳方式吗？
*   另外，我知道这只会填充组合框。如果我想允许用户在从下拉列表中选择适当的值后（在它们被填充之后）点击一个按钮，并将这些值存储到数据库中的一个单独的表中，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T20:20:31.787

你的小程序有很多问题：

*   您永远不会将组合框添加到顶级容器层次结构中
*   如果您想收到用户选择更改的通知，可以将[ActionListener 添加到 JComboBoxes](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#listeners)
*   你不应该覆盖油漆
*   每次调用paint 时，您都在重新创建组合框的内容。您应该在小程序初始化时创建和添加组合框
*   小程序通常通过网页/服务器分发：您的属性文件将不可用
*   除非您的数据库允许远程访问，否则这是行不通的。
*   要将按钮添加到显示中，只需调用 new JButton("My button") 并将其添加到组件层次结构中
*   ...

这是[Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/index.html)的链接。我认为很多章节可以帮助你

# php - Incutio XML-RPC 服务器以 HTML 而非 XML 形式发送响应

> ID：12570209
> 
> 赞同：2
> 
> 时间：2012-09-24T17:51:20.243
> 
> 标签：php, xml-rpc, server-configuration

我正在使用[Incutio XML-RPC 库](http://scripts.incutio.com/xmlrpc/)在应用程序和位于服务器上的数据库之间交换数据。

我已经在 2 个不同的服务器上测试了我的 Incutio XML-RPC 服务器端实现：

第一个服务器完全按照它应该做的事情做。它执行被调用的函数并通过 XML 向调用者返回响应。

相同的代码正在另一个 Ubuntu-Server 上运行。这里的实现获得了相同的方法调用，但它以服务器端的 HTML 响应而不是 XML 响应：

```
XML-RPC server accepts POST requests only. 
```

所以最后，调用者会抛出一个解析错误，因为它需要 XML 响应。服务器配置过程中可能出了什么问题？(PHP, Apache, ..., ?, ?)

# c++ - 将宽字符串或宽字符数组转换为简单字符数组的最简单方法？

> ID：12570211
> 
> 赞同：2
> 
> 时间：2012-09-24T17:51:33.567
> 
> 标签：c++, arrays, widestring, character-arrays

我的变量在一个宽字符串的特定内部实现中，但我可以很容易地将它变成一个宽字符数组。问题是我需要将它提供给只接受字符数组的库函数。

所以我最终得到了这样的结果：

```
wchar_t* wstr;

// char* str = "need some processing here";

function(str); 
```

那么，有没有一种简单的方法，或者我应该逐个字符地手动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:53:26.720

char* 可能意味着很多事情。如果采用 char* 的函数实际上采用 UTF8，则有办法将 UTF16 或 UTF32 转换为 UTF8。wchar_t 通常用于存储 UTF16 (windows) 或 UTF32 (macosx) 以及其他编码。

在这里查看 ConvertUTF.c/.h

[unicode.org 代码](http://cpansearch.perl.org/src/MJEVANS/DBD-ODBC-1.39/)

# jquery - 验证是否检查了所有单选按钮组

> ID：12570218
> 
> 赞同：0
> 
> 时间：2012-09-24T17:52:11.163
> 
> 标签：jquery, html

我从这个 SF 链接中进行了编辑：[StackOverflow 链接](https://stackoverflow.com/questions/10706925/jquery-ensuring-all-radio-groups-are-checked)，用户 Blazemonger 在其中展示了一个演示，[JFiddle Demo](http://jsfiddle.net/mblase75/aVVW9/6/)

从上面： 1）如何在提交按钮而不是警报框下方的 DIV 语句中显示所有错误，而不是一次显示一个错误？2）一旦错误正确并再次按下提交按钮，我如何将bg颜色改回白色？

我为问题 2 编辑了这样的小提琴，但它不起作用：

```
$("form").submit(function() {
    var submitme = true;
    $(':radio').each(function() {
        nam = $(this).attr('name');
        if (submitme && !$(':radio[name="'+nam+'"]:checked').length) {
            alert(nam+' group not checked');
            $(':radio[name="'+nam+'"]+label').addClass('error');
            submitme = false;
        }
        if (submitme && $(':radio[name="'+nam+'"]:checked').length <> 0) {
                $(':radio[name="'+nam+'"]+label').addClass('noerror');
        }
    });
    return submitme;
}); 
```

CSS：

```
.error {
    background-color: red;
}
.noerror {
    background-color: white;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:54:57.263

单击按钮时，您可以检查是否选择了每个组中的一个值，如果不显示 div ..

检查这个[更新的小提琴](http://jsfiddle.net/aVVW9/18/)

```
$("form").submit(function() {
    var html = '';
    var submitme = true;
    $(':radio').each(function() {
        nam = $(this).attr('name');
        if (!$(':radio[name="'+nam+'"]:checked').length) {
            $(':radio[name="'+nam+'"]+label').addClass('error');
            if(html.indexOf(nam) < 0){
                html += nam +' group not checked' + '</br>';
            }
            submitme = false;
        }
    });
    if(submitme == false){
       $('.errorDiv').empty().append(html).show().addClass('error');
    }
    else{
      $('.errorDiv').hide();
    }

    return submitme;
});
​
        ​
        .error {
            background-color: red;
            display:none;
        } 
```

​</p>

# svn - 用于发送电子邮件通知的 VisualSVN Server 提交后挂钩脚本

> ID：12570219
> 
> 赞同：2
> 
> 时间：2012-09-24T17:52:12.940
> 
> 标签：svn, visualsvn, visualsvn-server, svn-hooks

有人可以帮助我发布一些 VisualSVN 提交后挂钩脚本以在存储库中的文件发生某些更改时发送邮件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T05:38:41.850

请参阅 KB18（在 VisualSVN 服务器中配置电子邮件通知）： http: [//www.visualsvn.com/support/topic/00018/](http://www.visualsvn.com/support/topic/00018/)

# android - Android中的自定义Textview，height = fill_parent，但背景仅填充wrap_content

> ID：12570220
> 
> 赞同：0
> 
> 时间：2012-09-24T17:52:12.893
> 
> 标签：android, android-layout, textview, android-custom-view

所以，标题有点混乱，我知道，但我想要的基本上是一个通知框，它有彩色背景和边框，出现在屏幕中央，但没有拉伸。

我已经有了自定义视图，制作背景和边框，但是如果我制作“宽度：fill_parent”和“高度：wrap_content”，它将出现在屏幕顶部，如果我将高度设置为fill_parent，则整个屏幕将充满背景（我有点知道它会发生）。

我还尝试了一种更简单的方法，将 layout_gravity 设置为中心，但没有帮助。该视图位于垂直线性布局内，并且它是其中唯一可见的视图（所有其他元素的可见性 = View.GONE）。

我应该如何编码自定义视图的 onDraw() 以便能够放置 height: fill_parent 并让背景遵守 wrap_content 规则？更简单、更好的解决方案也总是受欢迎的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:58:58.883

我认为问题在于它嵌套在 LinearLayout 中。

[在FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)中尝试

> “旨在阻止屏幕上的一个区域以显示单个项目”

然后，您应该能够将自定义视图居中于透明背景 FrameLayout

编辑：澄清为什么我认为 LinearLayout 是问题所在。LinearLayout 像堆栈一样填满，这就是为什么当您尝试通过重力居中时项目位于顶部的原因。如果你想象一堆盘子......你不能从中间开始:-)

# node.js - 是否可以递归使用 MongooseJS 的 query#populate 方法？

> ID：12570223
> 
> 赞同：1
> 
> 时间：2012-09-24T17:52:28.433
> 
> 标签：node.js, mongodb, mongoose

假设我们有一个模式 A，它看起来像：

`{ b: { type: Schema.Types.ObjectId, ref: 'B' }`,

一个 B 型，看起来像：

`{ c: { type: Schema.Types.ObjectId, ref: 'C' }`,

和一个 C 类型，它看起来像：

`{ name: String }`.

有什么方法可以使用 MongooseJS 的填充实用程序通过多个引用获取文档？在示例中，我们可以通过以下方式找到 A 的 b

```
A.findOne({ id: someId })
    .populate('b')
    ... 
```

但是我们可以通过 A 到达 b 的 c 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:07:54.180

不是现在。对此的一些支持即将推出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T14:34:00.100

我认为两年后情况发生了变化。下面的 Model.populate() 使用怎么样：

```
A.findOne({id: someId})
 .populate('b')
 .exec()
 .then(function(data) {
         // returns a promise about populating a.b.c:
         return C.populate(data, {path: 'b.c'});
     }); 
```

详细信息可以在 3.6' 发行说明中找到： [https ://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#added-modelpopulatedocs-opts-cb](https://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#added-modelpopulatedocs-opts-cb)

# c - 为什么这个 C 程序可以工作？（字符类型相关查询）

> ID：12570225
> 
> 赞同：0
> 
> 时间：2012-09-24T17:52:29.477
> 
> 标签：c

这是我在解决一本书问题时提出的代码，我被要求编写一个程序，该程序以 12 小时格式输入并以 24 小时格式输出。

有效输入为例如下午 1:11、下午 1:11、下午 1:11、下午 1:11、下午 1:11、下午 1:11、下午 1:11、下午 1:11

这是代码：

```
#include<stdio.h>

int main (void)
{
int hr=0,min=0; char time;

scanf("%d : %d %c", &hr, &min, &time);

if(time =='p' || time == 'P' || time == 'PM' || time == 'pm' && hr >= 12)
{
    hr +=12;
}

printf("The 24 hour format time is = %d : %d", hr, min);

printf("% Test result = c", test);

return 0;
} 
```

在 if 条件下，我写道：

```
if(time =='p' || time == 'P' || time == 'PM' || time == 'pm' && hr >= 12) 
```

**据我所知，*char*类型只允许存储 1 个字符。那么，当我在晚上 9:11 给出这样的输入时，为什么这会起作用。在这种情况下它是如何工作的？**

```
time == 'pm' || time == 'PM' 
```

输出是：

```
The 24 hour format time is =21:11 
```

编辑 1：

使用 GNU GCC 编译器。代码在单个文件中，而不是在项目中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T17:57:34.470

即使没有您收到（或至少应该收到）的警告，您的条件`time == 'P'`也被评估为真，并且您已经完成了。

另请注意，您应该将所有的或包装在 中`()`，否则`>= 12`甚至不会检查。例如：

```
((time =='p' || time == 'P') && hr >= 12) 
```

# ruby-on-rails - 使用 INOUT 在 Rails 中进行 Proc

> ID：12570226
> 
> 赞同：0
> 
> 时间：2012-09-24T17:52:34.030
> 
> 标签：ruby-on-rails, stored-procedures

Mysql2::Error: OUT or INOUT argument 3 for routine database_name.proc_name is not a variable or NEW pseudo-variable in BEFORE trigger

所以，我基本上只是通过做来调用一个过程

```
connection = Mysql2::Client.new(config)
result = connection.query('call proc_name(1, 2, 3, 4, 5)') 
```

proc 有 5 个参数，前 2 个是 IN，后 3 个是 INOUT。现在，我认为它在抱怨，因为它希望 INOUT 成为它可以分配给/更改值的变量。

因此，由于我的 connection.query 正在调用一个字符串（事先已对其进行了清理），是否有不同的方法来调用 proc，以便 INOUT 可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:11:06.347

所以，mysql应该是这样的：

```
@variable1=1;
call proc_name( @variable1, 2, 3, 4, 5 );
select @variable1; 
```

（假设第一个变量是唯一的 INOUT ）

基本上每个 INOUT 变量都需要定义，然后用作 arg，然后选择，对吗？

# objective-c - 核心数据：为什么我不能用我的谓词获取任何东西

> ID：12570228
> 
> 赞同：1
> 
> 时间：2012-09-24T17:52:42.770
> 
> 标签：objective-c, core-data

代码有问题吗？使用这个谓词我什么也得不到。注释掉谓词，然后我可以从实体“BankDetail”中获取所有对象。所以我认为问题在于这两行。

```
// self.bankInfo.name is set in prepareForSegue in first view controller
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"info.name = %@",self.bankInfo.name];
[request setPredicate:predicate]; 
```

我的模型包括两个实体，它们是一对一的关系

银行信息.h

```
@class BankDetail;

@interface BankInfo : NSManagedObject

@property (nonatomic, retain) NSString * city;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * state;
@property (nonatomic, retain) BankDetail * detail;

@end 
```

银行明细.h

```
@class BankInfo;

@interface BankDetail : NSManagedObject

@property (nonatomic, retain) NSString * closeDate;
@property (nonatomic, retain) NSString * updateDate;
@property (nonatomic, retain) NSString * zip;
@property (nonatomic, retain) NSString * acquiringInstitution;
@property (nonatomic, retain) BankInfo * info;

@end 
```

**编辑：**

要提供更多详细信息：

*   `self.bankInfo.name`绝对设置，我 NSLog 它就在谓词行之前

*   我这样做`viewDidLoad`：

    ```
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"BankDetail" inManagedObjectContext:context];
    NSLog(@"[entity description] is %@",[entity description]); 
    ```

在控制台中获取：

```
info = "(<NSRelationshipDescription: 0x6d3eb30>), name info, isOptional 1, isTransient 0, entity BankDetail, renamingIdentifier info, validation predicates (\n), warnings (\n), versionHashModifier (null)\n userInfo {\n}, destination entity BankInfo, inverseRelationship detail, minCount 1, maxCount 1, isOrdered 0, deleteRule 2"; 
```

**EDIT2：** 结果**predicate 没有任何问题**。该错误是由其他地方的粗心错误引起的（请参阅已接受的答案，它与重命名有关）。如果您对谓词有疑问，请忽略此帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:52:23.000

如果它是一对一的关系，并且您已经有了`self.bankInfo.name`要匹配的字符串，为什么不获取`BankInfo`具有该名称的对象并访问该对象的`.detail`属性呢？这就是建立关系的全部意义，不是吗？

但是，您的谓词应该有效。虽然是什么`self.bankInfo`？你确定这`self.bankinfo.name`是一个有效的字符串吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:14:17.843

您的谓词结构没问题。请参阅我的其他[答案](https://stackoverflow.com/a/12617712/1347502)，了解一个简单的项目来证明基本原理。

根据对其他答案的响应，听起来您正在将其传递`NSFetchRequest`给 a`NSFetchedResultsController`并使用其行为来确定您的谓词不起作用。

我的第一个建议是记录谓词并查看它是否符合预期：

```
NSLog(@"%@", predicate); 
```

如果没问题，那么为了测试谓词不起作用的理论，您应该`NSFetchRequest`在构建请求后立即执行，并检查结果，例如

```
// self.bankInfo.name is set in prepareForSegue in first view controller
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"info.name = %@",self.bankInfo.name];
[request setPredicate:predicate];

NSArray *results = [myMangedObjectContext executeFetchRequest:request error:nil]; 
```

如果这不能说明问题，那么我建议您从请求中删除谓词，执行请求，并使用以下日志语句检查完整结果：

```
NSLog(@"%@", self.bankInfo.name);
NSLog(@"%@", [results valueForKeyPath:@"info.name"]); 
```

最后一条日志语句实际上记录了所有银行名称的数组，因此您可以查看 in 中的值`self.bankInfo.name`是否如您所愿地出现在完整结果中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:01:33.890

您最初发布的谓词代码是正确的。下面是一个测试基本原理的快速测试项目：（正确记录“银行名称”）

```
// Xcode 4.5:
// Create a new iOS Master-Detail project called "BankInfoTest" tick the "Use Core Data" check box (and ARC).
// Delete all files except the AppDelegate and the BankInfoTest data model (leave supporting files).
// Delete all properties and methods from AppDelegate.h
// Paste this code into AppDelegate.m
// Delete the default entity from the data model
// Add "BankInfo" entity, add attribute "name" of type string.
// Add "BankDetail" entity, add relationship called "info" to BankInfo (leave default 1 to 1 type).
// On BankInfo entity add inverse relationship "detail" to BankDetail (leave default 1 to 1 type).
// Select both entities then select "Editor -> Create NSManagedObject Subclass" to create subclasses.
// Run.

#import "AppDelegate.h"
#import "BankDetail.h"
#import "BankInfo.h"

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    /////////////////////////////////////////////////////////////////////////////////////
    // Setup the core data stack.
    /////////////////////////////////////////////////////////////////////////////////////
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"BankInfoTest" withExtension:@"momd"];
    NSManagedObjectModel *model = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    NSURL *appDocsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    NSURL *storeURL = [appDocsDirectory URLByAppendingPathComponent:@"BankInfoTest"];

    NSPersistentStoreCoordinator *coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:model];
    [coordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:nil];

    NSManagedObjectContext *context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    context.persistentStoreCoordinator = coordinator;

    /////////////////////////////////////////////////////////////////////////////////////
    // Load some test data and reset the context.
    /////////////////////////////////////////////////////////////////////////////////////
    BankDetail *detailObject = [NSEntityDescription insertNewObjectForEntityForName:@"BankDetail" inManagedObjectContext:context];
    BankInfo *infoObject = [NSEntityDescription insertNewObjectForEntityForName:@"BankInfo" inManagedObjectContext:context];

    infoObject.name = @"bank name";
    detailObject.info = infoObject;

    [context save:nil];
    [context reset];

    /////////////////////////////////////////////////////////////////////////////////////
    // Test the Predicate
    /////////////////////////////////////////////////////////////////////////////////////
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"BankDetail"];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"info.name = %@", @"bank name"];
    [request setPredicate:predicate];

    NSArray *results = [context executeFetchRequest:request error:nil];
    BankDetail *fetchedObject = [results lastObject];
    NSLog(@"%@", fetchedObject.info.name);

    return YES;
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T08:52:58.023

最后我不得不使用一个不太优雅的解决方法。我最终也添加了一个`name`属性`BankDetail`。所以一个BankInfo.name 对应一个BankDetail.name。然后我使用谓词：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name = %@",self.bankInfo.name]; 
```

它做了我想做的事：`BankDetail`为相应的对象获取一个`BankInfo`对象。我想知道这是最好的做法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T23:20:56.630

据我所知，您的谓词没有任何问题。我的应用程序中有一个非常相似的应用程序，它运行良好：

```
@class Hospital;

@interface Patient : NSManagedObject
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) Hospital *hospital;

@end 
```

和

```
@class Patient;

@interface Hospital : NSManagedObject
@property (nonatomic, retain) NSString *name;
@property (nonatomic, retain) NSSet *patients;

@end 
```

我的谓词：

```
request.predicate = [NSPredicate predicateWithFormat:@"hospital.name = %@", self.hospital.name]; 
```

所以你的代码没有问题。问题一定是因为`self.bankInfo`or`self.bankInfo.name`为空，或者因为`info`您的`BankDetail`对象中没有任何内容（未设置关系）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T10:28:56.613

我终于修复了这个错误。这根本与谓词无关。我将实体从Xcode 编辑`BankDetails`器`BankDetail`中的 .xcdatamodeld 重命名为，只需按回车键并更改它，就像重命名任何其他文件一样。

然后我继续手动重命名自动生成的 NSManagedObject 子类文件和其他引用它的类文件中的各个部分，直到所有警告消失。我想我已经重命名了所有必要的，但我没有。该程序没有像我在问题中描述的那样运行，但是没有错误，没有警告，Xcode 只是编译并运行。

一段时间后，当我终于尝试重新生成子类文件以修复错误时，旧的`BankDetails`显示为类名，并且出现了很多命名错误。起初我认为这是 Xcode 的一些错误。所以我再次清理构建并重新生成子类文件。然而，它仍然是旧的`BankDetails`。经过几次尝试，我在 Data Model Inspector 中发现了问题（见下面的截图）。更改类名称，一切运行完美。

道德：总是非常谨慎地重命名！

![在此处输入图像描述](../Images/3a9228191d1e7d08431cd38591e78ef7.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-26T19:11:37.377

问题可能是`=`在谓词字符串中使用了运算符。

根据文档，`LIKE`运算符用于字符串比较，例如

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"info.name like %@",self.bankInfo.name]; 
```

该文档还提供了一个在谓词中遍历关系的示例，因此您应该能够获得所需的结果。从`NSPredicate`文档中：

> 您可以为关系创建谓词，例如：
> 
> *   group.name 像“工作*”

# php - Adobe AIR 应用程序导航到系统浏览器以获取某些链接，而不是来自其他链接

> ID：12570229
> 
> 赞同：1
> 
> 时间：2012-09-24T17:52:42.693
> 
> 标签：php, actionscript-3, air

我正在 Flash AS3 (AIR 2) 上开发桌面应用程序。我正在使用 HTMLLoader 从我的服务器填充 html 内容，在 HTML 内容上有一个单独的输入字段和一个按钮，用户可以在其中输入电子邮件，当按下提交时（使用 html 表单）然后应用程序内容更改为带有缩小的一周日历的欢迎屏幕，突出显示该用户单独的活动（从数据库中提取）。这个缩小的日历是可点击的，这就是我的冲突所在。

为了使表单按钮正常工作，我必须将 navigateInSystemBrowser 设置为 false，但是当 usr 单击某个日期链接时，我必须将 navigateInSystemBrowser 设置为 true ... 显然我不能让它同时进行这两种操作，或者我可以吗？ ...所以我尝试将表单字段元素放在 flash 中以在 var 中发送电子邮件，以便 php 可以处理并发送到缩小的日历，但我无法让它工作。

应该有一个类型或名称之类的标签，您知道 openIn="" 为每个链接或锚点提供在应用程序内部或外部打开的选项，而不是依赖于 navigateInSystemBrowser。

搜索我发现了一些几乎有用的链接。

[http://forums.adobe.com/message/3230376](http://forums.adobe.com/message/3230376)

但它没有说明可能的解决方案。

这是我上次发布的代码，希望那里的文字有助于更好地描述我的冲突。感谢您提供的任何帮助。

```
 import flash.html.*;
    import flash.net.*;

    var cargador:HTMLLoader = new HTMLLoader();
    var url:URLRequest = new URLRequest("myhtmlcontent.php");
    cargador.load(url);

    addChild(cargador);
    cargador.paintsDefaultBackground = false;
    cargador.width = stage.stageWidth - 0;
    cargador.height = stage.stageHeight - 0;
    cargador.cacheResponse = true;
    cargador.navigateInSystemBrowser  = true; //
    cargador.useCache = true;
    cargador.authenticate = false;
    cargador.manageCookies = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T05:10:24.160

好的，我找到了答案，至少它对我有用，这就是我解决问题的方法。在最初的帖子中，我写道：

应该有一个类型或名称之类的标签，您知道 openIn="" 为每个链接或锚点提供在应用程序内部或外部打开的选项，而不是依赖于 navigateInSystemBrowser。好吧，碰巧有类似的东西，并且在这里[http://forums.adobe.com/thread/435864得到了很好的评论](http://forums.adobe.com/thread/435864)

可能有几种方法可以做到这一点。本质上，您需要捕获对链接（或相关事件）的点击，获取目标 URL 并使用 flash.net.navigateToURL() 函数。

它对我有用，这就是我所做的：

在您想在系统浏览器上打开的每个链接上：

```
<a href="javascript: airBrowseInDefault('https://yourSite.com/yourPage.html');">Blabla</a> 
```

而AS3如下：

```
import flash.html.*;
import flash.net.*;
var myVar:HTMLLoader = new HTMLLoader();
myVar.addEventListener(Event.HTML_DOM_INITIALIZE, onDomInit);
function onDomInit(event:Event):void { myVar.window.airBrowseInDefault = browseInDefault; }
function browseInDefault(url:String):void { navigateToURL(new URLRequest(url)); }
var url:URLRequest = new      URLRequest("http://yoursite.com/yourpage.php");

myVar.load(url); 
addChild(myVar);
myVar.paintsDefaultBackground = false;
myVar.width = stage.stageWidth - 0;
myVar.height = stage.stageHeight - 0;
myVar.cacheResponse = true;
myVar.useCache = true;
myVar.authenticate = false;
myVar.manageCookies = true; 
```

在这里，我将代码留给那些可能需要类似东西的人。

# asp.net - 在没有回发的情况下调用 ASP.NET 代码隐藏函数？

> ID：12570231
> 
> 赞同：0
> 
> 时间：2012-09-24T17:52:50.490
> 
> 标签：asp.net, vb.net

我正在开发一个使用 javascript 和 ajax 进行所有数据查询和前端工作的网页，并且我正在尝试编写 excel 导出功能。看到在 javascript 中执行此操作的唯一方法似乎是使用仅在 IE 中可用的 ActiveXControl，我想将其作为 Sub 包含在我的网页后面的代码文件中。

这似乎是个好主意，但是每当我单击按钮时，页面就会返回，并且所有要导出的数据都消失了。如果我`OnClientClick="return false;"`在我的 asp:Button 中包含该按钮，则该按钮不会回发，但 Sub 也不会执行。有什么方法可以在这里完成我的目标而不必使用注册客户端脚本块？任何帮助是极大的赞赏。

谢谢！

- 编辑 -

对于方法调用，我在 $.ajax 上得到 404。这是相关的代码。

```
//server side
Partial Class Report
    Inherits System.Web.UI.Page

    <System.Web.Services.WebMethod()>
    Public Sub toXL()
        Response.Write("<br><br>Here<br><br>")
    End Sub
End Class

//client side
    function toExcel() {
        $.ajax({
            type: "POST",
            url: "/report.aspx/toXL",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.error) {
                    alert(msg.error);
                }
                return false;
            }
        });
    }

//button
<asp:Button ID="MyButton" runat="server" AutoPostBack="false" type="button" OnClientClick="toExcel(); return false;" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T17:54:40.040

您可以将方法描述为 WebMethod 并将其作为 Web 服务从 jquery ajax 调用。并在运行 ajax 调用后返回 false 。

```
<asp:button OnClientClick="DoAction();" id="myid" runat="server"/>

     public partial class _Default : Page 
        {
          [WebMethod]
          public static string MyMethod()
          {
    .......
          }
        }

function DoAction(){
    $.ajax({
      type: "POST",
      url: "PageName.aspx/MethodName",
      data: "{}",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function(msg) {
        if(msg.error){
    //show  error 
        }
    return false;
      }
    });
} 
```

# visual-c++ - VC++ 通过 ref 传递 Platform::String^

> ID：12570232
> 
> 赞同：3
> 
> 时间：2012-09-24T17:52:51.600
> 
> 标签：visual-c++, windows-runtime, c++-cx

我在这里想念什么？我认为 ^ 是一个智能指针，我可以通过 ref 将字符串传递给函数。其他帽子对象呢？

```
// calling code
MyClass::GetString(_str1, _str2);
// both strings are nullptr at this point

/* static */ 
MyClass::GetStrings(String^ str1, String^ str2)
{
    // Read from Local Settings
    auto value = localSettings->Values->Lookup(kKey);
    String^ temp = ref new String(value->ToString()->Data());
    str1 = temp;

    // same for str2
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T21:39:04.840

A`T^`类似于指针类型；当你有一个带`T^`参数的函数（比如你的`GetStrings`静态成员函数）时，帽子是*按值*传递的，就像指针是*按值*传递一样。

如果你想`String^`通过引用传递，你需要使用引用：

```
void MyClass::GetStrings(String^& str1, String^& str2) 
```

请注意，引用是 C++ 语言功能，不是 Windows 运行时类型系统的一部分。Windows 运行时类型系统也不支持通过引用参数输入/输出；仅支持输出参数。

因此，如果`MyClass`是公共的 Windows 运行时引用类型并且`GetStrings`是公共或受保护的成员函数（基本上，如果`MyClass::GetStrings`出现在元数据中并且可以跨 Windows 运行时 ABI 调用），则需要使用指针：

```
void MyClass::GetStrings(String^* str1, String^* str2) 
```

这些指针是输出参数：您可以写入指向的`String^`s，但不能从中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T23:23:42.797

事实证明，我必须使用 ^& 作为函数签名中的参数类型。^% 是 CLI 的一部分，但我使用的是 CX。当我使用 ^% 时，编译器会抱怨它并用 & 替换 % 以继续。手动将它们更改为并且效果很好。

# python - 如何使用 uncompyle / uncompyle2

> ID：12570235
> 
> 赞同：0
> 
> 时间：2012-09-24T17:53:11.287
> 
> 标签：python

我已经安装了 uncompyle (https://github.com/gstarnberger/uncompyle)，但我不确定我是否做得对。在 C:\Python27\Lib\site-packages\uncompyle2 中有一个目录，我想运行这个命令。

键入 uncompyle -h 也无济于事（尽管根据自述文件推荐）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:04:46.467

你没有解释你所说的“没有帮助”是什么意思——它到底是做什么的？但我可以猜到它的作用是告诉你没有这样的程序。

从文档：

> 用法
> 
> * * *
> 
> uncompiler -h 打印简短的用法
> 
> uncompiler --help 打印长时间使用

问题是您输入了`uncompyle -h`，而不是`uncompyler -h`.

我没有方便测试的 Windows 盒子，但是在 Mac 上安装它时，我看到了这个：

```
 changing mode of /usr/local/bin/uncompyler.py to 755 
```

在 POSIX 系统上，您必须键入`uncompyler.py -h`来测试它（并且可能应该修复文档以反映这一点）。但在 Windows 上，`uncompyler`基本上`uncompyler.py`意思是一样的。

因此，假设您让 Python 安装程序将其 bin/scripts 目录放在您的路径上并进行设置，以便`.py`Python 打开文件，那么`uncompyler -h`它将正常工作。否则，您可能需要输入类似`C:\Python27\bin\Python C:\Python27\scripts\uncompyler -h`.

如果我没有猜到您的实际问题，请澄清，我会删除这个答案。

# backbone.js - 访问 heroku 部署修订

> ID：12570237
> 
> 赞同：2
> 
> 时间：2012-09-24T17:53:20.007
> 
> 标签：backbone.js, heroku, reload, revision, single-page-application

Heroku Activity 跟踪您的应用程序的发布版本，如 v1、v2 等。应用程序如何以编程方式读取其版本？我有一个使用主干的单页应用程序，并且希望使用部署版本的更改来自动通知基于主干的客户端，当部署的服务器版本更改时，它应该重新加载自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:55:03.447

目前无法访问 Heroku 上的当前版本。

一个缓慢的解决方法是使用 Heroku gem 来获取版本： [https ://stackoverflow.com/a/10973984/699304](https://stackoverflow.com/a/10973984/699304)

您可以在启动应用程序时异步获取当前版本，然后将其缓存到下一次部署。
让客户端每分钟轮询一次版本，如果它与已知的重新加载不匹配。

如果他们在您不知道的情况下获取它，则将其视为与他们必须避免过多客户端重新加载的相同。

# php - 多个 php.ini 文件

> ID：12570238
> 
> 赞同：3
> 
> 时间：2012-09-24T17:53:31.020
> 
> 标签：php, webserver, cherokee

我想在某个 PHP 实例中使用多个 .ini 文件。

> php-cgi -c /etc/php5/cgi/php.ini -c /var/www/php_oc.ini

我试过这样的东西，但它使用最后定义的配置文件。我想使用默认的 ini 作为基础，然后在不使用 ini_set() 的情况下覆盖第二个指令。

我也在用切诺基。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T08:50:58.893

尝试：

```
PHP_INI_SCAN_DIR=/var/www
export PHP_INI_SCAN_DIR 
```

# objective-c - 如何重新开始游戏

> ID：12570245
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:53:49.913
> 
> 标签：objective-c, ios, xcode, ios4

我在做ticTacToe

当我按下iphone中的返回按钮时它会正常退出但是当我回到游戏时它会自动重置

我没有在 viewDidLoad 方法中输入任何代码来重置它

但我现在需要的是这个

如何通过按 iphone 中的 [reset button] 来做同样的事情？我试着做这个

```
 ViewController *SP=[[SinglePlayer alloc]init];
   [SP viewDidUnload]; 
   [SP viewDidLoad]; 
```

但它没有成功，但它向我显示了一个 NSLog，我在每个日志中都输入了它，因此 videDidLoad 和 viewDidUnload 成功运行

所以我想释放所有已保存的数据并在按下 [reset] 时开始一个新游戏，因为它在按下时自动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:02:01.580

您的应用程序是否配置为**Suspend**而不是**Exit**？

如果您不确定这里有一个简短的解释[，这里](http://devgirl.org/2011/06/24/exit-vs-suspend-your-ios-application/)有一个相关的 SO[问题](https://stackoverflow.com/questions/3531014/ios-4-resume-from-background)。

最后，请参阅[iOS App Programming Guide 中的](https://stackoverflow.com/questions/3531014/ios-4-resume-from-background)*“App States and Multitasking”* 。

# apache-flex - Flex SDK 和 Flash 播放器版本问题？

> ID：12570246
> 
> 赞同：0
> 
> 时间：2012-09-24T17:53:56.623
> 
> 标签：apache-flex, flex4, flex3, flash

我在 flex4 中开发了项目。后来导入到flex3版本。导入后，我将 Flash Player 版本更改为 10。在此期间，我收到以下错误

**注意：项目从 sdk 4.x 导入到 sdk 3.x**

**类型未找到或不是编译时常量：SolidColorStroke**

这里重要的是，这个错误是在 SWC 文件中抛出的，我无法编辑。

我需要让它在 flex 3.x SDK 中工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:09:46.840

首先，为什么要降级应用程序？Flex 4 向后兼容旧的 SDK

其次，Spark 组件在 Flex3 中不可用。因此，您的库项目可能会使用`s:SolidColorStroke`iso `mx:SolidColorStroke`，因此无法找到它。

SWC 基本上是一个包含 .swf 的 zip 文件。这是一种二进制（编译）格式，您无法对其施加影响。在您的项目中导入的任何 SWC 都应使用与您的项目相同的 SDK 进行编译，或者明确说明其他允许的 SDK 版本，通常是以前的版本。

长话短说，您将需要库项目 (swc) 的源代码，以便能够使用 3.x SDK 重新编译它并相应地进行调整以修复错误。您也可以尝试反编译 .swc 文件中的 .swf，但我不建议这样做。

干杯

# iphone - 在 iPhone 上的 GTM 中解析“@”键时避免崩溃

> ID：12570249
> 
> 赞同：1
> 
> 时间：2012-09-24T17:54:25.967
> 
> 标签：iphone, objective-c, json, special-characters, google-toolbox-for-mac

我正在提供要在不同平台上解析的 JSON 对象。基于几个来源（例如[1](http://www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html)、[2](http://apigee.com/docs/enterprise/content/policies/convert-xml-json-format)、[3](https://www.p6r.com/articles/2010/04/05/xml-to-json-and-back/)），我决定使用`@`以元数据开头的键，它在 XML 中具有对应的属性。

现在，一位 iPhone 开发人员告诉我，需要更改当前结构，因为该`@`标志会导致 GTM 崩溃。他声称根本不可能解析这样的结构：`{"@name": "value"}`

我的困境是我也在为其他客户端和语言提供服务，并且我希望数据的 XML 和 JSON 表示之间保持一致，而不是希望以对应于逻辑模型的方式进行编码。由于需要单一语言，我希望避免重新设计结构，特别是因为`@`在键中放置符号不会违反正确 JSON 的规则。

如果诸如 GTM 之类的工具不能处理不仅遵守标准而且遵循常见建议和准则的 JSON 结构，我觉得很奇怪。*该开发人员的批评是否合理，或者有没有办法在客户端解决他的问题？*

# java - 扩展 JPA 实体以添加属性和逻辑

> ID：12570251
> 
> 赞同：16
> 
> 时间：2012-09-24T17:54:36.840
> 
> 标签：java, hibernate, jpa, composition

我需要知道是否可以通过扩展某些 POJO JPA 实体（使用**休眠**提供程序）来添加一些属性和行为，然后使 entityManager 返回扩展对象而不仅仅是 pojo 实体，如下例所示：

POJO JPA 实体类

```
@Entity
@Table("test")
public class Test implements Serializable {
} 
```

扩展类

```
public class ExtendedTest extends Test {
...
} 
```

获取扩展类的对象

```
List<ExtendedTest> extendedList = entityManager.createNamedQuery("ExtendedTest.findByFoo").setParameter("foo", "bar").getResultList(); 
```

我正在评估的另一种可能的方式是使用复合实体扩展功能并委托所有 setter 和 getter，但这可能意味着需要大量使用大型表：

```
public class ExtendedTest2 {
    private Test test;

    public ExtendedTest2(Test test) {
        this.test = test;
    }

    public getFoo() {
        return test.getFoo();
    }

    public getBar() {
        return test.getBar();
    } 

    ...
} 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-24T18:22:50.843

使用`@Inheritance`

```
@Entity
@Table(name="TEST")
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
public class Test {
    ...
}

@Entity
public class ExtendedTest 
    extends Test {
    ...
} 
```

或者`@MappedSuperclass`

```
@MappedSuperclass
public class Test {
    ...
}

@Entity
public class ExtendedTest 
    extends Test {
    ...
} 
```

# android - 如何在android上制作listview过滤器？

> ID：12570253
> 
> 赞同：-1
> 
> 时间：2012-09-24T17:54:37.667
> 
> 标签：android, filter, baseadapter

现在我想制作过滤器，但我真的不知道该怎么做。我已经阅读了一些教程并尝试过，但它仍然无法正常工作。请帮我！我想实现搜索功能。

类 apdater 的代码：

```
public class PlaceAdapter extends BaseAdapter {
private static ArrayList<Place> searchArrayList;

private LayoutInflater mInflater;

public PlaceAdapter(Context context, ArrayList<Place> results) {
    searchArrayList = results;
    mInflater = LayoutInflater.from(context);
}

public int getCount() {
    return searchArrayList.size();
}

public Object getItem(int position) {
    return searchArrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.txtName = (TextView) convertView
                .findViewById(R.id.label_place);
        holder.txtAddress = (TextView) convertView
                .findViewById(R.id.label_address);
        holder.txtPhone = (TextView) convertView
                .findViewById(R.id.label_distance);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txtName.setText(searchArrayList.get(position).getName());
    holder.txtAddress.setText(searchArrayList.get(position).getAddress());
    holder.txtPhone.setText(searchArrayList.get(position).getPhone());

    return convertView;
}

static class ViewHolder {
    TextView txtName;
    TextView txtAddress;
    TextView txtPhone;
} 
```

}

班级活动代码

```
public class ServiceDetail extends Activity {

private String DB_NAME = "Danang Travel.sqlite";
private PlaceAdapter adapter = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.servicedetail);

    final ArrayList<Place> searchResults = GetSearchResults();

    final EditText filterEditText = (EditText) findViewById(R.id.filter_text);
    final ListView lvPlace = (ListView) findViewById(R.id.listView1);

    adapter = new PlaceAdapter(this, searchResults);
    lvPlace.setAdapter(adapter);
    lvPlace.setTextFilterEnabled(true);

    // Set Focus*****************************************
    lvPlace.setFocusableInTouchMode(true);
    lvPlace.requestFocus();
    lvPlace.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View arg0, boolean arg1) {
            // TODO Auto-generated method stub
            // arg0.setBackgroundColor(arg1 ? Color.GRAY : Color.BLACK);
            // lvPlace.setItemsCanFocus(true);
        }

    });

    // lvPlace.setClickable(true);

    /******************************************************/
    // filter search
    filterEditText.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence cs, int arg1, int arg2,
                int arg3) {
            // When user changed the Text
            //ServiceDetail.this.adapter.getFilter().filter(cs);

        }

        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    });

    lvPlace.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {
            Object o = lvPlace.getItemAtPosition(position);
            Place fullObject = (Place) o;
            Toast toast = Toast.makeText(ServiceDetail.this,
                    "You have chosen: " + " " + fullObject.getName(),
                    Toast.LENGTH_SHORT);
            toast.setGravity(Gravity.BOTTOM|Gravity.CENTER_HORIZONTAL, 0, 0);
            toast.show();
        }
    });

}

private ArrayList<Place> GetSearchResults() {
    ArrayList<Place> results = new ArrayList<Place>();

    SQLiteDatabase DB = null;
    Intent t = getIntent();
    Bundle extra = t.getExtras();
    String temp = extra.getString("k");
    try {
        DB = this.openOrCreateDatabase(DB_NAME, MODE_PRIVATE, null);

        Cursor c = DB.rawQuery(
                "SELECT Name,Address,TypeID FROM ServiceDetail Where SerID = '"
                        + temp + "' ORDER BY Name", null);

        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            Place k = new Place();
            // The Cursor is now set to the right position
            String n = c.getString(c.getColumnIndex("Name"));
            String a = c.getString(c.getColumnIndex("Address"));
            String p = c.getString(c.getColumnIndex("TypeID"));

            k.setName(n);
            k.setAddress(a);
            k.setPhone(p);
            results.add(k);
        }

    } catch (SQLiteException se) {
        Log.e(getClass().getSimpleName(),
                "Could not create or Open the database");

    } finally {
        DB.close();
    }

    return results;
} 
```

}

现在我想制作过滤器，但我真的不知道该怎么做。我已经阅读了一些教程并尝试过，但它仍然无法正常工作。请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:59:53.880

干得好 ：）

```
 //Firstly here is your edittext on which you want to filter
    EditTextfilterText = (EditText) findViewById(R.id.search_box);
    filterText.clearComposingText();
    //Give the edittext the watcher as a text listener
    filterText.addTextChangedListener(filterTextWatcher);

//This will listen to key events such as you entering something inside the edit text
private TextWatcher filterTextWatcher = new TextWatcher() {

    public void afterTextChanged(Editable s) {
        //Called after text changed
    }

    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    //Called each time you enter something into the edittext to filter your list or whatever
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

                //Adapter creating code
                      //......
                //Filter calling code
                adapter.getFilter().filter(s, new FilterListener() {
                @Override
                public void onFilterComplete(int count) {
                    //Just for fun do something here once filtering is done
                }
            });

        }
    }

}; 
```

**现在在您的自定义适配器中，您将拥有以下内容：**

* * *

```
 public Filter getFilter() {

        filter = new DrugListFilter();

    return filter;
}

private class MyFilterName extends Filter{

    @Override
    protected FilterResults performFiltering(CharSequence constraint) {
        FilterResults retval = new FilterResults();
                    ArrayList<something> filt = new ArrayList<something>();

                    //... Some code to filter your current Adapter data by the constaint
                    //Pass the results to retval
                    retval.count = filt.size();
                    retval.values = filt;
                       }
                    //return retval
                return retval;
        }

    //This is called once performFiltering is done
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        filteredItems.clear();
                    //This is your array of filtered items
        filteredItems.addAll((ArrayList)results.values);
        doneFilter = true;
                    //Notify the dataset that it needs to update
        notifyDataSetChanged();

    }
} 
```

# ruby-on-rails - Rails：将内容作为参数传递给部分

> ID：12570256
> 
> 赞同：0
> 
> 时间：2012-09-24T17:54:41.287
> 
> 标签：ruby-on-rails, parameter-passing, partial-views

我知道可以将参数作为字符串传递给部分视图。

但我想将大的多行内容作为参数传递。换句话说 - 我需要在类似于 HTML 标签的结构中调用 partial：

```
<open_tag>
   contents
   contents
   contents
   contents
   contents
   contents
   contents
<close_tag> 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:01:00.880

你可以通过渲染的本地哈希传递任何你想要的东西：

```
<%= render :partial => "my_partial" , :locals => { :my_var => "anything you want" } %> 
```

# java - 致命例外：主要在 Android 4.x 上，但不是 Android 2.X

> ID：12570258
> 
> 赞同：0
> 
> 时间：2012-09-24T17:54:45.623
> 
> 标签：java, android, nullpointerexception, fatal-error

尝试在运行任何版本的 Android 4.x 的模拟器上运行我的 android 应用程序时遇到一些错误，但它在任何版本的 Android 2.X 上都可以正常工作。

```
package com.EXCLUDED_FOR_PRIVACY.EXCLUDED_FOR_PRIVACY;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabHost.TabSpec;
import android.widget.ImageView;
import android.graphics.Color;

public class EXCLUDED_FOR_PRIVACY extends Activity {

    public int WebView1Bool=0;
    public int WebView2Bool=0;
    public int WebView3Bool=0;
    public int WebView4Bool=0;
    private TabHost tabs;

    private void setupTabHost() {
        tabs = (TabHost) findViewById(R.id.my_tabhost);
        tabs.setup();
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setupTabHost();
        tabs.getTabWidget().setDividerDrawable(R.drawable.tab_divider);

        setupTab(new ImageView(this), 1);
        setupTab(new ImageView(this), 2);
        setupTab(new ImageView(this), 3);
        setupTab(new ImageView(this), 4);

        WebView mWebView1;
        mWebView1 = (WebView) findViewById(R.id.webview1);
        mWebView1.setBackgroundColor(Color.parseColor("#a3a3a3"));
        mWebView1.setBackgroundColor(0);
        mWebView1.getSettings().setJavaScriptEnabled(true);
        mWebView1.setWebViewClient(new MobileClient());
        mWebView1.loadUrl("EXCLUDED_FOR_PRIVACY");
        WebView1Bool=1;

        tabs.getTabWidget().getChildAt(0).setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                tabs.setCurrentTab(0);
                if(WebView1Bool==0){
                    WebView mWebView1;
                    mWebView1 = (WebView) findViewById(R.id.webview1);
                    mWebView1.setBackgroundColor(Color.parseColor("#a3a3a3"));
                    mWebView1.setBackgroundColor(0);
                    mWebView1.getSettings().setJavaScriptEnabled(true);
                    mWebView1.setWebViewClient(new MobileClient());
                    mWebView1.loadUrl("EXCLUDED_FOR_PRIVACY");
                    WebView1Bool=1;
                }
            }
        });

        tabs.getTabWidget().getChildAt(2).setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                tabs.setCurrentTab(1);
                if(WebView2Bool==0){
                    WebView mWebView2;
                    mWebView2 = (WebView) findViewById(R.id.webview2);
                    mWebView2.setBackgroundColor(Color.parseColor("#a3a3a3"));
                    mWebView2.setBackgroundColor(0);
                    mWebView2.getSettings().setJavaScriptEnabled(true);
                    mWebView2.setWebViewClient(new MobileClient());
                    mWebView2.loadUrl("EXCLUDED_FOR_PRIVACY");
                    WebView2Bool=1;
                }
            }
        });

        tabs.getTabWidget().getChildAt(4).setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                tabs.setCurrentTab(2);
                if(WebView3Bool==0){
                    WebView mWebView3 = (WebView) findViewById(R.id.webview3);
                    mWebView3.setBackgroundColor(Color.parseColor("#a3a3a3"));
                    mWebView3.setBackgroundColor(0);
                    mWebView3.getSettings().setJavaScriptEnabled(true);
                    mWebView3.setWebViewClient(new MobileClient());
                    mWebView3.loadUrl("EXCLUDED_FOR_PRIVACY");
                    WebView3Bool=1;
                }
            }
        });

        tabs.getTabWidget().getChildAt(6).setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v){
                tabs.setCurrentTab(3);
                if(WebView4Bool==0){
                    WebView mWebView4;
                    mWebView4 = (WebView) findViewById(R.id.webview4);
                    mWebView4.setBackgroundColor(Color.parseColor("#a3a3a3"));
                    mWebView4.setBackgroundColor(0);
                    mWebView4.getSettings().setJavaScriptEnabled(true);
                    mWebView4.setWebViewClient(new MobileClient());
                    mWebView4.loadUrl("EXCLUDED_FOR_PRIVACY");
                    WebView4Bool=1;
                }
            }
        });
    }

    private class MobileClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    }

    private void setupTab(final View view, final int i) {
        View createTabView_view = LayoutInflater.from(tabs.getContext()).inflate(R.layout.tabs_bg, null);
        ImageView createTabView_tv = (ImageView) createTabView_view.findViewById(R.id.tabsImage);
        if(i==1){
            TabSpec tabSpec = tabs.newTabSpec("EXCLUDED_FOR_PRIVACY");
            createTabView_tv.setImageResource(R.drawable.ic_discounts);
            tabSpec.setIndicator(createTabView_view);
            tabSpec.setContent(R.id.webview1);
            tabs.addTab(tabSpec);
        } else if(i==2){
            TabSpec tabSpec = tabs.newTabSpec("EXCLUDED_FOR_PRIVACY");
            createTabView_tv.setImageResource(R.drawable.ic_specials);
            tabSpec.setIndicator(createTabView_view);
            tabSpec.setContent(R.id.webview2);
            tabs.addTab(tabSpec);
        } else if(i==3){
            TabSpec tabSpec = tabs.newTabSpec("EXCLUDED_FOR_PRIVACY");
            createTabView_tv.setImageResource(R.drawable.ic_directory);
            tabSpec.setIndicator(createTabView_view);
            tabSpec.setContent(R.id.webview3);
            tabs.addTab(tabSpec);
        } else if(i==4){
            TabSpec tabSpec = tabs.newTabSpec("EXCLUDED_FOR_PRIVACY");
            createTabView_tv.setImageResource(R.drawable.ic_membership);
            tabSpec.setIndicator(createTabView_view);
            tabSpec.setContent(R.id.webview4);
            tabs.addTab(tabSpec);
        }
    }
} 
```

这是我看到的错误

```
09-24 13:11:25.329: E/Trace(1151):              error opening trace file: No such file or directory (2)
09-24 13:11:25.539: D/dalvikvm(1151):           GC_FOR_ALLOC freed 43K, 4% free 8316K/8583K, paused 42ms, total 45ms
09-24 13:11:25.549: I/dalvikvm-heap(1151):      Grow heap (frag case) to 8.829MB for 691216-byte allocation
09-24 13:11:25.669: D/dalvikvm(1151):           GC_CONCURRENT freed <1K, 4% free 8990K/9287K, paused 75ms+6ms, total 124ms
09-24 13:11:25.829: D/gralloc_goldfish(1151):   Emulator without GPU emulation detected.
09-24 13:11:26.209: I/Choreographer(1151):      Skipped 42 frames!  The application may be doing too much work on its main thread.
09-24 13:11:26.379: I/Choreographer(1151):      Skipped 44 frames!  The application may be doing too much work on its main thread.
09-24 13:11:27.509: I/Choreographer(1151):      Skipped 54 frames!  The application may be doing too much work on its main thread.
09-24 13:11:28.319: D/AndroidRuntime(1151):     Shutting down VM
09-24 13:11:28.319: W/dalvikvm(1151):           threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-24 13:11:28.379: E/AndroidRuntime(1151):     FATAL EXCEPTION: main
09-24 13:11:28.379: E/AndroidRuntime(1151):     java.lang.RuntimeException: Unable to start activity ComponentInfo{com.EXCLUDED.EXCLUDED/com.EXCLUDED.EXCLUDED.EXCLUDED}: java.lang.NullPointerException
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.os.Looper.loop(Looper.java:137)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at java.lang.reflect.Method.invokeNative(Native Method)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at java.lang.reflect.Method.invoke(Method.java:511)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at dalvik.system.NativeStart.main(Native Method)
09-24 13:11:28.379: E/AndroidRuntime(1151):     Caused by: java.lang.NullPointerException
09-24 13:11:28.379: E/AndroidRuntime(1151):     at com.EXCLUDED.EXCLUDED.EXCLUDED.onCreate(EXCLUDED.java:85)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.Activity.performCreate(Activity.java:5008)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-24 13:11:28.379: E/AndroidRuntime(1151):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-24 13:11:28.379: E/AndroidRuntime(1151):     ... 11 more
09-24 13:11:30.289: I/Process(1151):            Sending signal. PID: 1151 SIG: 9 
```

如果这是任何 Java 开发人员都知道的非常简单的事情，我深表歉意，我不得不承认我几乎不知道我在 Java 中做什么，但我正在努力构建它。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:03:32.920

摆脱所有`tabs.getTabWidget().getChildAt(...).setOnClickListener()`废话，将其替换为`TabHost.OnTabChangeListener`您在 中注册的单曲`TabHost`，以了解用户何时更改选项卡。您现有的代码假定 a 的特定内部结构`TabWidget`，并且正如您所发现的那样，该假设是不可靠的。

# ruby-on-rails - 在 Rails 中，是否可以修复模型内部的模型验证错误？

> ID：12570262
> 
> 赞同：3
> 
> 时间：2012-09-24T17:54:52.427
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation, model

假设一个模型捕获了一个验证错误，通常这是由控制器处理的，但是模型可以自动处理它吗？

实际上，我想`uid`为每个生成一个唯一的 id `Note`，模型如下所示：

```
class Note < ActiveRecord::Base
  validates_uniqueness_of :uid
  # ... some code to generate uid on after_initialize
end 
```

我得到的最接近的是：

```
class Note < ActiveRecord::Base
  validates_uniqueness_of :uid
  # ... some code to generate uid on after_initialize

  after_rollback :repair

  protected

  def repair
    if self.errors[:uid].size > 0
      self.uid = generate_uid
    end
    self.save # Try again
  end
end 
```

我的解决方案的一些直接问题：（1）模型实例仍然有控制器可以看到的错误，我不确定如何清除错误。(2)修复方法是递归的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:10:04.193

虽然我确信有一种方法可以捕获和处理模型中的错误（也许`after_validation`回调可能有用），但也许您可以通过确保`uid`您在创建它时生成的唯一性来避免这种情况下的问题。

[Ryan Bates 提供了这种在 RailsCast 中生成唯一令牌的方法](http://railscasts.com/episodes/274-remember-me-reset-password)：

```
def generate_token(column)
  begin
    self[column] = SecureRandom.urlsafe_base64
  end while User.exists?(column => self[column])
end 
```

使用`before_create`回调，即`before_create { generate_token(:uid) }`，每个模型将有一个唯一的 id。

综上所述，@Beerlington 提出了一个关于 UUID 的非常好的观点。

**更新：**请注意，给定的方法预计将在`User`模型中定义。对于您的示例，您希望将其更改为`...while Note.exists?...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:03:19.953

我会使用一个真正的 UUID，它保证是唯一的，并且不会给你的模型增加开销。在模型中进行唯一性验证会增加一些开销，因为它必须访问数据库才能确定是否存在某些东西，而且它甚至还不能保证。

查看这个 Ruby 项目以生成 UUID：[https ://github.com/assaf/uuid/](https://github.com/assaf/uuid/)

# r - 在一个轴上应用两个变换

> ID：12570270
> 
> 赞同：3
> 
> 时间：2012-09-24T17:55:13.563
> 
> 标签：r, ggplot2

我找到了`coord_trans`，但我想将`log10`和 `reverse`应用于我的 x 轴。我尝试应用两个转换

```
ggplot(table) + aes(color=Vowel, x=F1, y=F2) + geom_point() + coord_trans(x="log10", y="log10") + coord_trans(x="reverse", y="reverse") 
```

但只应用了第一个。所以我尝试链接它们

```
ggplot(table) + aes(color=Vowel, x=F2, y=F1) + geom_point() + coord_trans(x=c("log10", "reverse"), y=c("log10", "reverse")) 
```

这给了我一个明显的错误。

```
'c("log10_trans", "reverse_trans")' is not a function, character or symbol 
```

我如何链接它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:20:04.257

您可以使用 定义新的转换`trans_new`。

```
library(scales)
log10_rev_trans <- trans_new(
  "log10_rev",
  function(x) log10(rev(x)),
  function(x) rev(10 ^ (x)),
  log_breaks(10),
  domain = c(1e-100, Inf)
)

p <- ggplot(mtcars, aes(wt, mpg)) +
   geom_point()   

p + coord_trans(y = log10_rev_trans) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:15:40.900

一种快速简便的方法是将其中一种转换直接应用于数据，并将另一种转换与绘图功能一起使用。

例如

```
ggplot(iris, aes(log10(Sepal.Length), log10(Sepal.Width), colour = Species)) + 
geom_point() + coord_trans(x="reverse", y="reverse") 
```

注意：反向转换不适用于虹膜数据，但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T17:59:28.920

我在这里徘徊寻找“比例组合”功能。我认为一个人可以写这样的东西如下：

```
# compose transforms a and b, applying b first, then a:
`%::%`  <- function(atrans,btrans) {
  mytran <- scales::trans_new(name      = paste(btrans$name,'then',atrans$name),
                              transform = function(x) { atrans$transform(btrans$transform(x)) },
                              inverse   = function(y) { btrans$inverse(atrans$inverse(y)) },
                              domain    = btrans$domain,  # this could use improvement...
                              breaks    = btrans$breaks,  # not clear how this should work, tbh
                              format    = btrans$format)

}

ph <- ggplot(mtcars, aes(wt, mpg)) +
  geom_point() +
  scale_y_continuous(trans=scales::reverse_trans() %::% scales::log10_trans())
print(ph) 
```

# c# - 从方法 .NET 4.0 写入控制台

> ID：12570272
> 
> 赞同：1
> 
> 时间：2012-09-24T17:55:18.353
> 
> 标签：c#

以下是《c# 中的keyprogramming》一书中的一个简短的时钟程序。我对 Timers 库一点也不熟悉，所以有些语法我真的不明白。我想了解而我不了解的是`Console.Write(str)`这个小程序中方法中的那一行。如何`Main`知道要打印到控制台的内容？是`Console.WriteLine()`让时间每秒打印出来的空调用吗？当我阅读这些概念时，事后似乎很容易理解发生了什么。根据我的问题，我还不太了解 C# 的哪些内容？

```
using System;
using System.Timers;    // Requires System.dll

class Clock
{
    static int iStringLength;

    static void Main()
    {
        Console.WriteLine("Press Enter to end program");
        Console.WriteLine();

        Timer tmr = new Timer();
        tmr.Elapsed += new ElapsedEventHandler(TimerHandler);
        tmr.Interval = 1000;
        tmr.Start();

        Console.ReadLine();
        tmr.Stop();
    }
    static void TimerHandler(object obj, ElapsedEventArgs eea)
    {
        Console.Write(new String('\b', iStringLength));

        string str = String.Format("{0} {1} ", 
                                eea.SignalTime.ToLongDateString(), 
                                eea.SignalTime.ToLongTimeString());
        iStringLength = str.Length;

        Console.Write(str);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:57:33.487

`Main()`除了初始的空白行之外，不会向控制台打印任何内容。

`Console.Write()`在`TimerHandler()`回调中每秒运行一次并打印时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T17:58:27.103

`str`包含调用 String.Format() 函数后字符串的值。该功能记录在这里：http: [//msdn.microsoft.com/en-us/library/b1csw23d.aspx](http://msdn.microsoft.com/en-us/library/b1csw23d.aspx)

在您的代码中，{0} 替换为 eea.SignalTime.ToLongDateString() 的格式化表示，而 {1} 替换为 eea.SignalTime.ToLongTimeString() 的格式化表示。

所以来回答

> 我想了解但我不了解的是这个小程序的方法中的 Console.Write(str) 行。Main 如何知道要打印到控制台的内容？

答案是“它写入任何 String.Format() 函数确定“str”的值在这一行中的内容：”

```
string str = String.Format("{0} {1} ",  
                                eea.SignalTime.ToLongDateString(),  
                                eea.SignalTime.ToLongTimeString()); 
```

WriteLine() 函数只打印一个空行，实际上与您询问的显示日期/时间的字符串无关。

作为记录， Console.Write 和 Console.Writeline 分别记录[在此处](http://msdn.microsoft.com/en-us/library/system.console.write.aspx)和[此处](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:57:57.323

没有任何参数的[Console.WriteLine()就像它听起来的那样，只是打印出一个空行（换行符）。](http://msdn.microsoft.com/en-us/library/zdf6yhx5.aspx)

> 将当前行终止符写入标准输出流。

[带有任何参数的Console.WriteLine(xxx)](http://msdn.microsoft.com/en-us/library/system.console.writeline.aspx)将参数打印在一行上，然后是一个新行。

> 将指定的数据（后跟当前行终止符）写入标准输出流。

在您的 TimerHandler 方法中，您使用的是[Console.Write(xxx)](http://msdn.microsoft.com/en-us/library/zcwe8sfx.aspx)，它只打印参数的文本表示，没有换行符。

> 将指定对象的文本表示形式写入标准输出流。

# java - 抽象类java中的静态变量

> ID：12570277
> 
> 赞同：1
> 
> 时间：2012-09-24T17:55:49.990
> 
> 标签：java, class, static

如果我有一个具有形式变量的抽象类

```
protected static final int blah;
protected static final int blah2; 
```

我有两个扩展这个抽象类的类，并将这些变量设置为它们构造函数中常量文件中的“静态最终 int”值，它们会破坏彼此的值吗？如果我想做这样的事情，你会建议我做什么？

所以，例如，如果我有

impl1 类：

```
public impl1 extends absClass{
    public impl1(){
        this.blah = CONSTANTS.impl1_blah;
        this.blah2 = CONSTANTS.impl1_blah2;
    }
} 
```

impl2 类：

```
public impl2 extends absClass{
    public impl2(){
        this.blah = CONSTANTS.impl2_blah;
        this.blah2 = CONSTANTS.impl2_blah2;
    }
} 
```

这是允许的吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T17:59:45.340

```
this.blah = CONSTANTS.impl2_blah;
this.blah2 = CONSTANTS.impl2_blah; 
```

> 这允许吗？

这*是*不允许的，因为您的`blah`变量被声明为`final`. 您必须在类初始化期间对它们进行初始化，无论是在它们的声明中还是在静态初始化块中。

此外，这些变量是`static`，因此使用它们访问它们`this`将不起作用：变量属于*类*而不是*实例*。

> 如果没有，我该怎么办？

在超类中使用非最终变量，或在子类中使用特定常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:09:48.473

如果扩展该抽象类的类应该为这些变量提供自己的值，那么您应该考虑使用几个受保护的抽象方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:23:39.120

Java 中的多态性不适用于属性。请改用一些受保护的抽象 getMethods()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:00:28.057

`static final`变量必须在声明它们的类被初始化时被初始化。这是在创建类（或任何子类）的任何实例之前。`blah`如果没有对and进行某种初始化，您的代码将无法编译 - 无论`blah2`是初始化表达式：

```
protected static final int blah = 42;
protected static final int blah2 = 1; 
```

或在静态初始化程序块中：

```
protected static final int blah;
protected static final int blah2;
static {
    blah = 42;
    blah2 = 1;
} 
```

在任何一种情况下，子类都没有发言权`blah`并被`blah2`分配。

从您的示例代码看来，您需要可以在每个实例基础上变化的常量。它们是静态的没有意义。你可以这样做：

```
public AbsClass {
    protected final int blah;
    protected final int blah2;
    protected AbsClass(int blah, int blah2) {
        this.blah = blah;
        this.blah2 = blah2;
    }
    . . .
}

public class Impl1 extends AbsClass {
    public Impl1() {
        super(CONSTANTS.impl1_blah, CONSTANTS.impl1_blah2);
    }
}

public class Impl2 extends AbsClass {
    public Impl1() {
        super(CONSTANTS.impl2_blah, CONSTANTS.impl2_blah2);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T19:44:32.223

首先这是final+static，这意味着与OOP无关，如果你让它们不是静态的，那么在上面谈论OOP是有意义的。如果您不将它们设为私有并使用 getter/setter 访问它们，那么您正在破坏封装。

而你正在使它成为最终的，这意味着它只能被初始化一次。当您尝试更改 final attr 的值时，您将得到异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T17:57:01.380

`static`变量不能被覆盖。这些将与您定义它们的类相关联。

# java - Float/Int/Double 的空间替换

> ID：12570278
> 
> 赞同：1
> 
> 时间：2012-09-24T17:55:52.877
> 
> 标签：java, floating-point

今天早上我正在做课堂作业，我想尝试解决迄今为止我在所有队友计划中注意到的问题；int/float/double 中的空格会导致 Java 崩溃。

为了解决这个问题，我有一个非常疯狂的想法，但它在某些情况下确实有效。然而问题是它并不总是有效，我不知道为什么。这是我的“主要”方法：

```
import java.util.Scanner;    //needed for scanner class

public class Test2
{
  public static void main(String[] args) 
  {

      BugChecking bc = new BugChecking();
      String i;
      double i2 = 0;

      Scanner in = new Scanner(System.in);   

      System.out.println("Please enter a positive integer");

      while (i2 <= 0.0)
      {
             i = in.nextLine();

             i = bc.deleteSpaces(i);  

            //cast back to float
            i2 = Double.parseDouble(i);

            if (i2 <= 0.0)
            {
                System.out.println("Please enter a number greater than 0.");
            }
      }

      in.close();
      System.out.println(i2);       
 }
} 
```

所以这是类，请注意我正在使用浮点数，但我做了它以便它可以用于任何类型，只要它可以转换为字符串：

```
public class BugChecking
{
    BugChecking()
    {

    }

    public String deleteSpaces(String s)
    {  

        //convert string into a char array
        char[] cArray = s.toCharArray();

        //now use for loop to find and remove spaces
        for (i3 = 0; i3 < cArray.length; i3++)
        {
            if ((Character.isWhitespace(cArray[i3])) && (i3 != cArray.length)) //If current element contains a space remove it via overwrite
            {
                for (i4 = i3; i4 < cArray.length-1;i4++)
                {
                    //move array elements over by one element
                    storage1 = cArray[i4+1];
                    cArray[i4] = storage1;                  
                }
            }
        }

        s = new String(cArray);

        return s; 
    }  

    int i3; //for iteration
    int i4; //for iteration
    char storage1; //for storage
} 
```

现在，我们的目标是从数组中删除空格，以解决帖子开头所述的问题，并且据我所知，这段代码应该可以实现这一点并且确实可以做到，但前提是输入的第一个字符是空间。

例如，如果我输入“2.0332”，则输出为“2.0332”。

但是，如果我输入“2.03 445”，则输出为“2.03”，其余部分会丢失在某处。

这第二个例子是我试图弄清楚如何解决的问题。

编辑：

下面大卫的建议能够解决这个问题。绕过发送一个 int。直接将其作为字符串发送，然后转换（我总是听说这被描述为强制转换）为所需的变量类型。更正了上面 Main 方法中的代码。

附带说明一下，如果您打算使用它，即使替换要容易得多，请务必在 deleteSpaces 中的 if 语句中添加一个 && 检查，以确保 if 语句仅在您不在最终数组元素上时执行数组。如果您通过 i3 将最后一个元素值传递给下一个将 i4 设置为 i3 的值的 for 循环，我认为它将触发 OutOfBounds 错误，因为它只会检查最后一个元素 - 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:03:05.043

如果您想摆脱`String`use[`replaceAll(String regex,String replacement)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)或之间的所有空格[`replace(char oldChar, char newChar)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)：

```
 String sBefore = "2.03 445 ";

    String sAfter = sBefore.replaceAll("\\s+", "");//replace white space and tabs
    //String sAfter = sBefore.replace(' ', '');//replace white space only
    double i = 0;

    try {
        i = Double.parseDouble(sAfter);//parse to integer
    } catch (NumberFormatException nfe) {
        nfe.printStackTrace();
    }
    System.out.println(i);//2.03445 
```

**更新：**

查看您的代码片段，问题可能是您直接将其读取为 float/int/double （因此输入空格会停止`nextFloat()`），而不是将输入读取为`String`using `nextLine()`，删除空格然后尝试将其转换为适当的格式.

这对我来说似乎很好用：

```
public static void main(String[] args) {

    //bugChecking bc = new bugChecking();
    float i = 0.0f;
    String tmp = "";

    Scanner in = new Scanner(System.in);

    System.out.println("Please enter a positive integer");

    while (true) {

        tmp = in.nextLine();//read line
        tmp = tmp.replaceAll("\\s+", "");//get rid of spaces

        if (tmp.isEmpty()) {//wrong input
            System.err.println("Please enter a number greater than 0.");
        } else {//correct input

            try{//attempt to convert sring to float
            i = new Float(tmp);
            }catch(NumberFormatException nfe) {    
                System.err.println(nfe.getMessage());
            }

            System.out.println(i);
            break;//got correct input halt loop
        }

    }
    in.close();
} 
```

**编辑：**

作为旁注，请以大写字母开头所有班级名称，即`bugChecking`班级应该`BugChecking`相同，适用于`test2`班级应该是`Test2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:05:42.420

`String`对象上有允许你做这种事情的方法。你特别想要的是[`String.replace`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29). 这几乎可以完成您尝试为您做的事情。

```
String input = " 2.03 445 ";
input = input.replace(" ", ""); // "2.03445" 
```

您还可以使用正则表达式来替换不仅仅是空格。例如，要删除不是数字或句点的所有内容：

```
String input = "123,232 . 03 445 ";
input = input.replaceAll("[^\\d.]", ""); // "123232.03445" 
```

这将替换任何非数字、非句点字符，以便您在输入中只剩下这些字符。请参阅 javadocs[`Pattern`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)以了解一些关于正则表达式的知识，或搜索在线提供的众多教程之一。

**编辑：**另一句话，[`String.trim`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#trim%28%29)将删除字符串开头和结尾的所有空格以`" 2.0332"`变成`"2.0332"`：

```
String input = " 2.0332 ";
input = input.trim(); // "2.0332" 
```

**编辑 2：**通过您的更新，我现在看到了问题。`Scanner.nextFloat`是什么打破了空间。如果您将代码更改为这样使用`Scanner.nextLine`：

```
while (i <= 0) {
    String input = in.nextLine();
    input = input.replaceAll("[^\\d.]", "");
    float i = Float.parseFloat(input);

    if (i <= 0.0f) {
        System.out.println("Please enter a number greater than 0.");
    }

    System.out.println(i);        
} 
```

该代码将正确接受您输入的内容，例如`"123,232 . 03 445"`. 使用任何解决方案代替我的`replaceAll`，它都会起作用。

`Scanner.nextFloat`将根据空格自动拆分您的输入。`Scanner`构造时可以带分隔符（例如，`new Scanner(System.in, ",./ ")`将在`,`、`.`、`/`和上分隔`）” 默认构造函数`new Scanner(System.in)`, 自动基于空格分隔。`

 `* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:12:16.270

我猜您正在使用 main 方法中的第一个参数。如果您的主要方法看起来像这样：

```
public static void main(String[] args){
  System.out.println(deleteSpaces(args[0]);
} 
```

您的问题是，空格将传递给您的主要方法的参数分开。所以像这样运行你的课程：

```
java MyNumberConverter 22.2 33 
```

第一个参数 arg[0] 是“22.2”，第二个参数 arg[1] 是“33”

但就像其他人建议的那样，[String.replace](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)无论如何都是一种更好的方法。`

# jquery - 数据表服务器端没有正确排序带有数字的文本

> ID：12570279
> 
> 赞同：3
> 
> 时间：2012-09-24T17:55:53.580
> 
> 标签：jquery, datatable

我在处理同时包含文本和数字的数据时遇到了一些困难。我正在使用数据表服务器端插件，并且正在尝试包含自然排序插件。

我有一列包含这样的数据：

```
Unit #1
Unit #10
Unit #2 
```

当我对列进行排序时，它会排序，但排序不是我希望它显示的方式。这就是我需要的：

```
Unit #1    
Unit #2
Unit #10 
```

我看到其他一些帖子，人们使用了这里的“自然排序”插件：[datatables natural sort](http://www.datatables.net/plug-ins/sorting)

我将 javascript 放入自然排序功能的 main.js 文件中。

这就是我初始化数据表的方式：

```
<script type="text/javascript">     
    var oTable = $("table.datatable_ss_1348508281").dataTable( {

        "oLanguage": {"sSearch": "Search these results:"},
        "aLengthMenu": [[10,20,50,100,500,1000], [10,20,50,100,500,1000]],          
        "sPaginationType": "full_numbers",
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "includes/units_dropdown_dt_process.php?id=1532&cont_id=unit_id",
         "fnDrawCallback": function() {
                                //$('span.paginate_active').trigger('click');
                            },      
        "aoColumnDefs":[],
        "aoColumns": [{"sType": "natural"}, null, null],
        "aaSorting": [[ 0,"asc" ]],
        "sScrollY": "300px",

            } ).fnSetFilteringDelay(500);

    jQuery.extend( jQuery.fn.dataTableExt.oSort, {
        "natural-asc": function ( a, b ) {
            return naturalSort(a,b);
        },

        "natural-desc": function ( a, b ) {
            return naturalSort(a,b) * -1;
        }
    } );

</script> 
```

问题是它仍然使用文本进行排序并且不考虑数字......关于如何解决这个问题的任何想法？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T22:45:15.490

我知道我在某处看到的是您必须用数值​​替换文本，单元 #1 变为 1

# xcode - 我可以在 Xcode 中分配我自己的“线程名称”吗？

> ID：12570281
> 
> 赞同：10
> 
> 时间：2012-09-24T17:55:56.903
> 
> 标签：xcode, multithreading, nsthread

Xcode 的“线程列表”窗格显示了几个特殊线程的类似英文的名称：com.apple.main-thread、com.apple.libdispatch-manager、com.dispatchfractal.opencl、com.dispatchfractal.opengl、com.apple.root。低优先级，...但是对于用户创建的线程，该字段只是空白。

有没有办法从我的应用程序中以编程方式设置“线程名称”字段？例如，如果我有一个专门用于网络 I/O 的线程，我希望它在调试器中显示为“com.example.network-io”；如果我产生五个工作线程，我希望能够将它们命名为“worker A”、“worker B”等。Xcode 是否从一些我可以挂钩的 API 中提取它的线程名称？也许像`CFAssignDebuggerNameToCurrentThread`什么？:)

![在此处输入图像描述](../Images/78c955e4e126c624ac2608df8e92fa57.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T17:58:03.937

可能不**完全**是您想要的，但 NSThread 具有`setName:`允许您设置线程名称的方法，您可以将有意义的名称附加到线程，因此您将在调试器中获得以下信息：

```
[[NSThread mainThread] setName:@"That is main thread!"]; 
```

![在此处输入图像描述](../Images/1aaaf4caf56d9ff731209132e2ee3074.png)

还请记住，某些 api（如大型中央调度）与线程池一起操作，因此您无法保证您的操作将在哪个线程上执行

**编辑：** `com.apple.main-thread`等`com.apple.libdispatch-manager`是相应调度队列的标签。您可以在使用函数创建队列时设置标签值，`dispatch_queue_create`然后使用函数从队列中获取它`dispatch_queue_get_label`。

似乎没有 API 可以更改现有调度队列的标签值，我也不建议更改系统队列的标签。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T18:23:20.960

如果您可以获得对要更改名称的线程的引用，则可以在调试器控制台中更改它。为当前线程执行此操作的两种方法：

*   `(lldb) po [[NSThread currentThread] setName:@"foo"]`

*   `(lldb) expression (void)[(NSThread*)[NSThread currentThread] setName:@"foo"];`

我猜你可以从一个有关联表达式的断点做同样的事情。如果您有一个知道将在您感兴趣的线程中运行的方法，您可以设置一个包含上述命令之一的断点，并让它在运行该命令后自动继续。这将产生每次运行代码时自动设置线程名称的效果，这对于调试可能很方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-17T16:37:58.347

我在 Swift 5 中使用以下代码重命名当前线程：

```
 pthread_setname_np("myThreadName") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-23T14:39:58.780

-[NSThread setName:] 的伪代码

```
- (void) setName:(NSString*)thname {
    if (self == [NSThread currentThread])
    {
        pthread_setname_np([thname UTF8String]);
    }
    else { ... }
    ...
} 
```

因此，设置名称的最简单方法是调用*pthread_setname_np*。

# javascript - 如何强制图像具有均匀的高度

> ID：12570283
> 
> 赞同：0
> 
> 时间：2012-09-24T17:56:02.970
> 
> 标签：javascript, html, css

让我解释一下这个问题。我正在开发一个需要根据窗口宽度缩放图像的响应式网站。我是否都用这种风格设置了这些图像

```
.bgImg{width:100%; height:auto; display:block; position:relative;} 
```

我做了一个这样的 3 列组

![在此处输入图像描述](../Images/0adff69bf3e50b6720d0ba25b823d97d.png)

问题是当窗口的高度变得奇数时，两个 25% 列的底部现在都有 1px 的边距

![在此处输入图像描述](../Images/df187588e6dfeb1d48829720b8a3a2bf.png)

您需要放大上面的图像，因为它只有 1px。

我想知道是否有办法解决这个问题或任何 javascript 可以强制图像高度四舍五入到最接近的偶数，这样我所有图像的高度都将是偶数并解决这个问题。

**添加了一个小提琴[http://jsfiddle.net/2QneE/3/](http://jsfiddle.net/2QneE/3/)**

# php - 为 php5.4.6 加载扩展 apc

> ID：12570284
> 
> 赞同：0
> 
> 时间：2012-09-24T17:56:04.563
> 
> 标签：php, apc

恐怕我在我的开发计算机上弄得一团糟，我需要一些帮助。基本上，我在 ubuntu 上安装了 php5.3.2，并安装了 apt-get 包，并将 apc 作为动态扩展加载。

今天，我决定使用这个 PPA 升级到 php5.4.6：[https](https://launchpad.net/~ondrej/+archive/php5) ://launchpad.net/~ondrej/+archive/php5 。所以，我现在运行 php5.4.6 但 apc 将不再加载。

所以我做了

```
pecl uninstall apc 
```

然后

```
pecl install apc-3.1.13 
```

以确保我获得了与 php5.4 兼容的 apc 版本。

一切似乎都很顺利，但扩展仍然无法加载。它不会显示在 phpinfo() 上。我当然在 php.ini 中添加了 extension=apc.so 。

我想我找到了问题的根源，但我不知道如何解决它：

根据我的 phpinfo()：

```
PHP API                 20100412
PHP Extension           20100525
Zend Extension          220100525
Zend Extension Build    API220100525,NTS
PHP Extension Build     API20100525,NTS 
```

当我这样做时，pecl install apc，我得到了：

```
54 source files, building
running: phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626 
```

因此 apc.so 将安装在 /usr/lib/php5/20090626 而不是 /usr/lib/php5/20100525 中。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T13:38:30.040

只需将您的 php 二进制源代码中 zend_modules.h 中的 API 版本更改为 phpinfo() 中指示的 PHP 扩展 API 编号。

例如，如果 phpinfo() 中的 php 扩展 API 为 20100525，则必须将 zend_modules.h 文件中的 API 编号更改为 20100525，然后重新编译您的项目。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-26T11:34:48.453

我找到了解决这个问题的方法。一个简单的

```
sudo apt-get install php-apc 
```

会成功的。

# java - .classpath 内容在 Eclipse 中更新

> ID：12570286
> 
> 赞同：4
> 
> 时间：2012-09-24T17:56:13.300
> 
> 标签：java, eclipse, classpath

我下载了一个 .classpath 的 Eclipse 项目，其中包含需要更新的类条目。

这到底是做什么的？我可以在 Eclipse 中更改 .classpath 的内容吗？

我`User Libraries`在 Eclipse 中打开，期望它具有与 .classpath 相同的内容，但其中没有任何内容。

![在此处输入图像描述](../Images/5ad07c526d51c3da593cb4696939e1fe.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:03:44.153

可以通过修改项目 Java Build Path 参数来更改 .classpath 文件的内容。

例如，在 Package Explorer 中，右键单击项目并选择 Properties... 在 Properties 对话框中，导航到树中的 Java Build Path。通常 Source 和 Libraries 选项卡面板提供 .classpath 文件中的大部分信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:41:20.060

.classpath 文件存储有关项目的类路径元数据信息。

有两种编辑方式： 1.通过UI：右键项目->构建路径，在这里修改，你会看到.classpath的变化

2.（不建议）：编辑.classpath文件，小心小错误cud损坏项目。编辑，保存然后 build/refresh 。您应该在 buildpath ui 中看到它已更新。如果没有，重新启动 Eclipse 它将选择新的 .classpath 。

# ios - iOS 6 与 iAD 一起崩溃

> ID：12570288
> 
> 赞同：2
> 
> 时间：2012-09-24T17:56:18.913
> 
> 标签：ios, iad

这个应用程序是几个月前发布的，在 iOS 4/5 中完美运行。现在在 iOS 6 中的某些屏幕上出现崩溃。

相当容易实施。在 xib 中有一个 AdBannerView。我把它连到了代表处。让我的 delagate 方法显示/隐藏广告。这是崩溃数据。

异常类型：EXC_CRASH (SIGABRT)

最后异常回溯：

```
0   CoreFoundation                  0x36d9b29e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x350ab97a objc_exception_throw + 26
2   CoreFoundation                  0x36cec55a -[__NSPlaceholderDictionary initWithObjects:forKeys:count:] + 130
3   CoreFoundation                  0x36d230ce +[NSDictionary dictionaryWithObjects:forKeys:count:] + 46
4   iAd                             0x3594c23e -[ADBannerView setDelegate:] + 126
5   Foundation                      0x347b49cc -[NSObject(NSKeyValueCoding) setValue:forKey:] + 208
6   UIKit                           0x382101dc -[UIView(CALayerDelegate) setValue:forKey:] + 156
7   Foundation                      0x347b071e -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 294
8   CoreFoundation                  0x36d21616 -[NSArray makeObjectsPerformSelector:] + 174
9   UIKit                           0x38209240 -[UINib instantiateWithOwner:options:] + 1036
10  UIKit                           0x38208abe -[UIViewController _loadViewFromNibNamed:bundle:] + 230
11  UIKit                           0x38101020 -[UIViewController loadView] + 88
12  UIKit                           0x3808b468 -[UIViewController loadViewIfRequired] + 64
13  UIKit                           0x380e0136 -[UIViewController contentScrollView] + 22
14  UIKit                           0x380e007c -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 24
15  UIKit                           0x380dff60 -[UINavigationController _layoutViewController:] + 28
16  UIKit                           0x380dfe84 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 268
17  UIKit                           0x380df5c4 -[UINavigationController _startTransition:fromViewController:toViewController:] + 60
18  UIKit                           0x380df4ac -[UINavigationController _startDeferredTransitionIfNeeded:] + 320
19  UIKit                           0x380cdb8e -[UINavigationController pushViewController:transition:forceImmediate:] + 854
20  UIKit                           0x380cd82e -[UINavigationController pushViewController:animated:] + 34
21  Hurricane                       0x00002d9a -[TrackerViewController buttonPressed:] (TrackerViewController.m:111)
22  UIKit                           0x381570a8 -[UIApplication sendAction:to:from:forEvent:] + 68
23  UIKit                           0x3815705a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
24  UIKit                           0x38157038 -[UIControl sendAction:to:forEvent:] + 40
25  UIKit                           0x381568ee -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
26  UIKit                           0x38156de4 -[UIControl touchesEnded:withEvent:] + 484
27  UIKit                           0x3807f5f4 -[UIWindow _sendTouchesForEvent:] + 520
28  UIKit                           0x3806c804 -[UIApplication sendEvent:] + 376
29  UIKit                           0x3806c11e _UIApplicationHandleEvent + 6150
30  GraphicsServices                0x3721f59e _PurpleEventCallback + 586
31  GraphicsServices                0x3721f1ce PurpleEventCallback + 30
32  CoreFoundation                  0x36d7016e __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
33  CoreFoundation                  0x36d70112 __CFRunLoopDoSource1 + 134
34  CoreFoundation                  0x36d6ef94 __CFRunLoopRun + 1380
35  CoreFoundation                  0x36ce1eb8 CFRunLoopRunSpecific + 352
36  CoreFoundation                  0x36ce1d44 CFRunLoopRunInMode + 100
37  GraphicsServices                0x3721e2e6 GSEventRunModal + 70
38  UIKit                           0x380c02fc UIApplicationMain + 1116
39  Hurricane                       0x00002082 main (main.m:14)
40  Hurricane                       0x0000203c start + 36 
```

如果我取消连接 AdBannerView，它就可以工作。重新接线并崩溃。我在这个特定的控制器中没有任何字典。实际上，它只有 6 个通向其他屏幕的按钮。真正奇怪的是，代码在其他屏幕的其他地方使用，但工作正常。显然，它以前工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T11:05:51.770

让我澄清一下，在 iOS 6 中，AdBannerView 不推荐使用一些属性和方法。我认为这应该是你崩溃的原因。

请检查这个

> [http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/ADBannerView_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40009562-CH1-DontLinkElementID_9](http://developer.apple.com/library/ios/DOCUMENTATION/UserExperience/Reference/ADBannerView_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40009562-CH1-DontLinkElementID_9)

# timeout - Redis 连接超时：来自客户端的协议错误：

> ID：12570289
> 
> 赞同：1
> 
> 时间：2012-09-24T17:56:18.323
> 
> 标签：timeout, redis

我们正在 Redis 上执行 Set Operations 以提取和过滤数据以进行定位。这些集合即以下列方式表示

```
fruits={'orange','lemon','apple'}
vegetables={'tomato'}
citric={'orange','lemon','tomato'} 
```

我们正在使用 Jedis 客户端进行 SUNION 和 SINTER，但是当晚我们观察到并发 100 时，Redis 服务返回超时，即使使用像 SMEMBERS 这样的简单操作该集合包含不超过 7 个项目

```
jedisPoolConfig = new JedisPoolConfig();
jedisPoolConfig.maxActive = 1000;//Arguably High
jedisPoolConfig.minIdle = 300;//Arguably High
jedisPoolConfig.maxIdle = 500; //Arguably High
jedisPool = new JedisPool(jedisPoolConfig, "localhost", 6379, 1000);
jedis = jedisPool.getResource();
availableAds = new ArrayList<String>( jedis.smembers("fruits"));
jedisPool.returnResource(jedis); 
```

# Java 异常

> redis.clients.jedis.exceptions.JedisConnectionException ：似乎服务器已关闭连接。

# Redis 错误日志

> 来自客户端的协议错误：addr=xxxx:xxxx fd=270 idle=0 flags=N db=0 sub=0 psub=0 qbuf=96 obl=47 oll=0 events=rw cmd=smembers
> 
> 测试在 Amazon EC2 中型实例 (C1.medium) 上运行，servlet 使用 blitz.io 作为负载测试工具进行测试

# objective-c - 分组 UITableView 上的自定义背景图像

> ID：12570292
> 
> 赞同：0
> 
> 时间：2012-09-24T17:56:44.873
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我将如何为 UITableView 设置自定义背景图像。工作中的扳手是表格是分组样式（第一个单元格的圆顶角和最后一个单元格的圆角底角）。我想尽可能多地在代码中做到这一点，而不是过多地依赖图像。

理想情况下，这是解决方案，但我不知道这是否可行：

1.  创建一张自定义背景图片
2.  将相同的自定义背景图像应用于每个单元格
3.  舍入会自动发生，因为它是分组表格样式
4.  利润。

这就是它的运作方式（除了利润部分......毕竟我是一名应用程序开发人员）？我是否需要重新考虑我的方法，或者这可能吗？如何在 iOS 5+ 特定的代码中执行我所描述的（或其他方法）？

***更新***

为了澄清一点，我要问的主要问题是：即使您使用的是矩形图像，顶部和底部单元格是否仍会出现舍入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:07:17.220

好吧，我认为您所说的没问题，但我建议在 .nib 文件中创建一个独特的单元格布局并在那里应用背景。然后，使用 initWithNibName，您可以在 ViewController 上的 UITableView 方法中管理每个单元格。

# regex - 在正则表达式中搜索任何字符串列表

> ID：12570294
> 
> 赞同：0
> 
> 时间：2012-09-24T17:56:57.213
> 
> 标签：regex

我想从 FTP 站点获取 32 个文件中的 6 个，但是我使用的第 3 方 ETL 工具只允许我使用目标目录和正则表达式过滤器来获取文件。

虽然我可以使用 6 个单独的 FTP 步骤并专门命名一个文件来获取，但这很草率。有没有一种使用正则表达式的方法，我可以说给我所有与该集合中的项目匹配的文件：{. *XYZ仪器。*, .*XSYFund 等 }?

例如，匹配 XYZFund.txt/zip 和 XYZInstrument.txt/zip，但不匹配 Index.txt/zip 或任何其他碰巧存在的文件：

```
SomeName_XYZFund.txt
SomeName_XYZFund.zip
SomeName_XYZIndex.txt
SomeName_XYZIndex.zip
SomeName_XYZInstrument.txt
SomeName_XYZInstrument.zip 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:00:00.677

如果我正确理解您的问题，您可以使用`()`and `|`。例如，要匹配 file.*、*.txt 或 *.pdf：

`(^file\.|\.txt$|\.pdf$)`

**w00te - 编辑帖子以做出明确的答案：**

就我而言： `.*XYZFUND.* | .*XYZINSTRUMENT.*`完成这项工作。

# winrt-xaml - Windows 应用商店应用程序：在网格布局中使用 XAML 路径 (C#/XAML)

> ID：12570298
> 
> 赞同：1
> 
> 时间：2012-09-24T17:57:02.563
> 
> 标签：winrt-xaml

我开始使用 VS2012 提供的模板之一来设计我的应用程序，其中一些文本块旁边显示了一个图像。我希望用户能够选择一张照片或类似的照片作为图像，但如果他们没有这样做，我想提供一个默认图标。

我最初的想法是创建不同默认图标的PNG，以图像图标出现的不同大小，如果用户没有指定图像，则只从绑定中返回它们，但我想到如果我可以使用XAML 路径，默认图标将显得更清晰，因为它们将被绘制为矢量而不是位图。

我不确定这个决定是否是一个错误，但这让我有些头疼:-(。

我尝试解决的第一个挑战是如何使用绑定来显示图像或 XAML 路径。我的解决方案是使用 Button 而不是 Image，并绑定 Content。Content 绑定返回一个 Canvas 对象，该对象包含图像或定义图标的一组路径。

这一直有效，直到我更改为捕捉视图，然后它具有比未捕捉视图更小的图像/按钮元素。

所以第二个挑战，也是这个问题的主要原因，是就如何最好地处理不同尺寸的按钮寻求建议。在未捕捉的视图中，按钮为 110x110。在快照视图中，按钮为 60x60。在我所做的研究中，调整路径大小的最简单方法似乎是在 Canvas 上使用 Transform 但由于 Canvas 是从 Binding 调用返回的，因此代码隐藏不一定知道父级的大小按钮是，因此将无法包含变换。

我不能使用 DrawingBrush，因为它们在 Windows 应用商店应用程序中无效。

是否有一个干净的解决方案，或者我应该回到使用预先创建的 PNG 的更简单但质量稍低的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:18:40.503

我最终采用的解决方案是使用两个项目 - 一个按钮和一个图像 - 每个都包裹在一个边框中，这使我只能使其中一个项目可见，具体取决于位图图像是否可用：

```
 <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Width="250" Height="250" Visibility="{Binding ImageIsAvailable, Converter={StaticResource HideIfTrue}}">
            <Button Content="{Binding ImageContent}" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="20,20,0,0" Style="{StaticResource UnstyledGraphicsButtonStyle}" Width="{Binding ImageWidth210}" Height="{Binding ImageHeight210}" Foreground="white" Padding="0" Background="Transparent" BorderBrush="{x:Null}" IsEnabled="False" />
        </Border>
        <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Visibility="{Binding ImageIsAvailable, Converter={StaticResource DisplayIfTrue}}">
            <Image Source="{Binding Image250}" Stretch="{Binding Stretch250}" AutomationProperties.Name="{Binding Title}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
        </Border> 
```

在此示例中，我希望项目为 250 像素 x 250 像素。Stretch 的绑定是为了让我可以处理大于和小于 250px 的图像并进行相应的拉伸。

对于按钮，内容实际上来自声明的字符串资源，例如：

```
<x:String x:Key="building">M13.982995,32.651007L13.982995,37.332006 18.665994,37.332006 18.665994,32.651007z M5.3319988,32.440006L5.3319988,37.332006 10.225996,37.332006 10.225996,32.440006z M34.665606,29.33198L34.665606,37.313 37.332797,37.313 37.332797,29.33198z M29.332198,29.33198L29.332198,37.340984 31.999405,37.340984 31.999405,29.33198z M13.923995,24.000005L13.923995,28.740005 18.665994,28.740005 18.665994,24.000005z M5.3319988,24.000005L5.3319988,28.839005 10.171997,28.839005 10.171997,24.000005z M34.665606,18.665992L34.665606,26.684976 37.332797,26.684976 37.332797,18.665992z M29.332198,18.665992L29.332198,26.644998 31.999405,26.644998 31.999405,18.665992z M13.331995,16.000003L13.331995,18.666003 15.998995,18.666003 15.998995,16.000003z M7.9989967,16.000003L7.9989967,18.666003 10.665997,18.666003 10.665997,16.000003z M26.665998,13.331976L39.998998,13.331976 39.998998,42.666973 26.665998,42.666973z M13.331995,10.666002L13.331995,13.332002 15.998995,13.332002 15.998995,10.666002z M7.9989967,10.666002L7.9989967,13.332002 10.665997,13.332002 10.665997,10.666002z M10.665997,0L13.331995,0 13.331995,5.3340011 15.998995,5.3340011 18.665994,10.666002 18.665994,18.666003 21.331993,18.666003 23.998992,21.332004 23.998992,42.667007 0,42.667007 0,21.332004 2.6659985,18.666003 5.3319988,18.666003 5.3319988,10.666002 7.9969978,5.3340011 10.665997,5.3340011z</x:String> 
```

这来自地铁工作室。

高度和宽度绑定是因为我的不同 SVG 项目具有不同的宽度和高度比率，所以我绑定到代码隐藏以返回所需大小的正确数字。不幸的是，因为您不能传递参数，我最终会根据 XAML 对不同的 XXX 值进行不同的“ImageHeightXXX”调用。

关于如何定义字符串的建议可以在这里找到：[http ://www.jayway.com/2012/11/27/styling-windows-8-4-the-button/](http://www.jayway.com/2012/11/27/styling-windows-8-4-the-button/)

# java - 有没有办法扩展 SmartGit 使其与 Gerrit 一起使用？

> ID：12570300
> 
> 赞同：1
> 
> 时间：2012-09-24T17:57:15.200
> 
> 标签：java, version-control, gerrit, smartgit

我们在与 Git 的大部分交互中使用 SmartGit。SmartGit 不允许您为远程分支指定自定义 URI。它喜欢您从列表中进行选择，该列表不包括 refs/for/master 下列出的更改。我想知道是否有某种方法可以向 SmartGit 添加自定义菜单操作以从 Gerrit 中签出。我猜没有办法在 SmartGit 中添加宏？我知道我总是可以使用命令行或 eGit，但如果可能的话，我试图将所有 git 管理放在一个工具下。

## 更新

忘了提一下，我也有兴趣让结帐工作。对于代表变化的特定参考。例如：refs/changes/10/35020/1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:03:59.850

在 SmartGit 中，您可以使用**Push Advanced**，选择**Into a non-default remote branch** there 并输入`refs/for/master`。SmartGit 目前不允许拉取任意引用，也不允许显示除`refs/heads`,`refs/remotes`和之外的任何其他引用`refs/tags`。

# unix - 蚂蚁脚本。在构建期间获取磁盘可用空间

> ID：12570301
> 
> 赞同：2
> 
> 时间：2012-09-24T17:57:25.980
> 
> 标签：unix, ant, space, disk

我们有一个相当复杂的系统，可以在多个 *nix PC 上同时运行多个 ANT 构建。我们认为有时磁盘会在清理脚本运行之前填满和/或 PC 上的负载高到足以在连接到外部服务器（签名服务器等）时导致问题。

我们想要的是每 2 分钟将这样的输出记录到文件中：

```
df . --direct -P --block-size=1m | tail -n 1 | awk {'printf("Free %dMb (%d%% Full)\t", $4, $5)'}; uptime 
```

这在 ANT（或 ANT-contrib）中是否可行，还是我必须执行外部脚本？

到目前为止，我最好的解决方案是：

```
<target name="my_target">
    <parallel>
        <exec ... pc_status_every_2_mins_logger.sh />
        <sequential>
             ... rest of very large ANT script ...
        </sequential>
    </parallel>
</target> 
```

我认为这相当笨拙，并希望 ant 可能有更清洁的方法来处理此类问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T19:10:28.183

您可以尝试相反的方式 - 意味着不检查有多少空间，而是检查是否有足够的空间 - 并使用[hasfreespace 条件](http://ant.apache.org/manual/Tasks/conditions.html)（自 Ant 1.7.0 起）

# android - 出现软键盘时如何捕捉事件

> ID：12570312
> 
> 赞同：0
> 
> 时间：2012-09-24T17:57:59.320
> 
> 标签：android, android-widget

有什么方法可以捕捉事件吗？

我的意思是当我单击编辑框内部时，会出现软键盘。

软键盘出现回调函数。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:38:32.157

```
//Clicking on the text box     

   edittext.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
        InputMethodManager imm = (InputMethodManager) getSystemService(
                INPUT_METHOD_SERVICE);
        imm.showSoftInput(getCurrentFocus().getWindowToken(), //some flag here);
        }

   });

     //Being inside the box and pressing a key
     edittext.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            //If the event is a key-down event on the "enter" button
            //If enter is pressed while inside the textbox
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                (keyCode == KeyEvent.KEYCODE_ENTER)) {

                    InputMethodManager imm = (InputMethodManager) getSystemService(
                        INPUT_METHOD_SERVICE);
                    //Example of hiding keyboard inside enter pressed check
                    imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0); 
```

...........

# java - 我应该使用什么异常类型？

> ID：12570319
> 
> 赞同：5
> 
> 时间：2012-09-24T17:58:19.413
> 
> 标签：java, exception, coding-style

我正在编写一个执行矩阵运算的程序，并且试图弄清楚在无效维度的情况下应该使用哪种例外。是否有一些已经存在的异常类型可以让我的操作抛出；还是我应该实现自己的异常类型？我知道几乎任何异常类型都会做我想做的事，但问题是要确保异常确实描述了导致它的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:00:57.117

最适合您正在寻找的是[`IndexOutOfBoundsException`](http://docs.oracle.com/javase/6/docs/api/java/lang/IndexOutOfBoundsException.html). 您可以按原样使用它，也可以从中派生出您自己的`MatrixIndexOutOfBoundsException`异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:00:12.313

就像其他人说的那样，您可能不需要。但是由于客户永远是对的 -[您应该创建自己的异常类型。](http://docs.oracle.com/javase/tutorial/essential/exceptions/creating.html)

不过，这是一个相关的 SO 问题：[线程“main”中的异常 java.lang.RuntimeException: Matrix is single](https://stackoverflow.com/questions/6290459/exception-in-thread-main-java-lang-runtimeexception-matrix-is-singular)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T18:01:00.293

您可以抛出一个[IllegalArgumentException(String message)](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)，其中包含描述矩阵维度不适合您要执行的操作的消息。

例如，如果您的库用户尝试调用仅适用于`nXn`带有`nXm`矩阵参数的矩阵的方法，您应该抛出这样的异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:07:50.250

如果您可以使用自己的例外。那么您自己的异常应该扩展 java.lang.RuntimeException 或 RuntimeException 的子类。RuntimeException 是未经检查的异常。在这种情况下，您应该使用未经检查的异常。

# c# - C# 每 X 分钟运行一个线程，但前提是该线程尚未运行

> ID：12570324
> 
> 赞同：69
> 
> 时间：2012-09-24T17:58:40.507
> 
> 标签：c#, timer

我有一个 C# 程序需要每 X 分钟分派一个线程，*但前提是先前分派的线程（从 X 分钟开始）当前尚未运行*。

一个普通的旧的`Timer`单独是行不通的（因为它每 X 分钟分派一个事件，无论先前分派的进程是否已经完成）。

将要分派的进程在执行其任务所需的时间上有很大的不同——有时可能需要一秒钟，有时可能需要几个小时。如果它从上次启动时仍在处理，我不想再次启动该过程。

任何人都可以提供一些有效的 C# 示例代码吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-01-30T00:17:57.027

在我看来，在这种情况下的方法是使用`System.ComponentModel.BackgroundWorker`类，然后在`IsBusy`每次要调度（或不调度）新线程时简单地检查它的属性。代码很简单；这是一个例子：

```
class MyClass
{    
    private BackgroundWorker worker;

    public MyClass()
    {
        worker = new BackgroundWorker();
        worker.DoWork += worker_DoWork;
        Timer timer = new Timer(1000);
        timer.Elapsed += timer_Elapsed;
        timer.Start();
    }

    void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        if(!worker.IsBusy)
            worker.RunWorkerAsync();
    }

    void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        //whatever You want the background thread to do...
    }
} 
```

在这个例子中，我使用`System.Timers.Timer`了 ，但我相信它也应该与其他计时器一起使用。该类`BackgroundWorker`还支持进度报告和取消，并使用事件驱动模型与调度线程进行通信，因此您不必担心易失性变量之类的...

**编辑**

这是更详细的示例，包括取消和进度报告：

```
class MyClass
{    
    private BackgroundWorker worker;

    public MyClass()
    {
        worker = new BackgroundWorker()
        {
            WorkerSupportsCancellation = true,
            WorkerReportsProgress = true
        };
        worker.DoWork += worker_DoWork;
        worker.ProgressChanged += worker_ProgressChanged;
        worker.RunWorkerCompleted += worker_RunWorkerCompleted;

        Timer timer = new Timer(1000);
        timer.Elapsed += timer_Elapsed;
        timer.Start();
    }

    void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        if(!worker.IsBusy)
            worker.RunWorkerAsync();
    }

    void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker w = (BackgroundWorker)sender;

        while(/*condition*/)
        {
            //check if cancellation was requested
            if(w.CancellationPending)
            {
                //take any necessary action upon cancelling (rollback, etc.)

                //notify the RunWorkerCompleted event handler
                //that the operation was cancelled
                e.Cancel = true; 
                return;
            }

            //report progress; this method has an overload which can also take
            //custom object (usually representing state) as an argument
            w.ReportProgress(/*percentage*/);

            //do whatever You want the background thread to do...
        }
    }

    void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        //display the progress using e.ProgressPercentage and/or e.UserState
    }

    void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        if(e.Cancelled)
        {
            //do something
        }
        else
        {
            //do something else
        }
    }
} 
```

然后，为了取消进一步的执行，只需调用`worker.CancelAsync()`. 请注意，这是完全由用户处理的取消机制（它不支持线程中止或类似的开箱即用的东西）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-02T17:19:09.817

您可以只维护一个 volatile bool 来实现您的要求：

```
private volatile bool _executing;

private void TimerElapsed(object state)
{
    if (_executing)
        return;

    _executing = true;

    try
    {
        // do the real work here
    }
    catch (Exception e)
    {
        // handle your error
    }
    finally
    {
        _executing = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-24T17:59:43.577

您可以在其经过的回调中禁用和启用您的计时器。

```
public void TimerElapsed(object sender, EventArgs e)
{
  _timer.Stop();

  //Do Work

  _timer.Start();
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-30T22:09:06.237

您可以在处理数据/方法之前使用`System.Threading.Timer`并将其设置为`Timeout`，`Infinite`然后在完成后重新启动`Timer`准备下一次调用。

```
 private System.Threading.Timer _timerThread;
    private int _period = 2000;

    public MainWindow()
    {
        InitializeComponent();

        _timerThread = new System.Threading.Timer((o) =>
         {
             // Stop the timer;
             _timerThread.Change(-1, -1);

             // Process your data
             ProcessData();

             // start timer again (BeginTime, Interval)
             _timerThread.Change(_period, _period);
         }, null, 0, _period);
    }

    private void ProcessData()
    {
        // do stuff;
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-06T17:06:16.897

使用我在[这里的帖子中的 PeriodicTaskFactory](https://stackoverflow.com/a/14945407/222434)

```
CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();

Task task = PeriodicTaskFactory.Start(() =>
{
    Console.WriteLine(DateTime.Now);
    Thread.Sleep(5000);
}, intervalInMilliseconds: 1000, synchronous: true, cancelToken: cancellationTokenSource.Token);

Console.WriteLine("Press any key to stop iterations...");
Console.ReadKey(true);

cancellationTokenSource.Cancel();

Console.WriteLine("Waiting for the task to complete...");

Task.WaitAny(task); 
```

下面的输出显示，即使间隔设置为 1000 毫秒，每次迭代都不会开始，直到任务操作的工作完成。这是使用`synchronous: true`可选参数完成的。

```
Press any key to stop iterations...
9/6/2013 1:01:52 PM
9/6/2013 1:01:58 PM
9/6/2013 1:02:04 PM
9/6/2013 1:02:10 PM
9/6/2013 1:02:16 PM
Waiting for the task to complete...
Press any key to continue . . . 
```

***更新***

如果您想要 PeriodicTaskFactory 的“跳过事件”行为，只需不要使用同步选项并像 Bob 在这里所做的那样实现 Monitor.TryEnter [https://stackoverflow.com/a/18665948/222434](https://stackoverflow.com/a/18665948/222434)

```
Task task = PeriodicTaskFactory.Start(() =>
{
    if (!Monitor.TryEnter(_locker)) { return; }  // Don't let  multiple threads in here at the same time.

    try
    {
        Console.WriteLine(DateTime.Now);
        Thread.Sleep(5000);
    }
    finally
    {
        Monitor.Exit(_locker);
    }

}, intervalInMilliseconds: 1000, synchronous: false, cancelToken: cancellationTokenSource.Token); 
```

的`PeriodicTaskFactory`好处是返回的 Task 可以与所有 TPL API 一起使用，例如`Task.Wait`，延续等。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-24T18:00:33.543

您可以在任务之前停止计时器并在任务完成后重新启动它，这可以使您的拍摄在均匀的时间间隔内定期执行。

```
public void myTimer_Elapsed(object sender, EventArgs e)
{
    myTimer.Stop();
    // Do something you want here.
    myTimer.Start();
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-24T18:06:18.833

如果您希望计时器的回调在后台线程上触发，您可以使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/2x96zfy7.aspx)。这个 Timer 类允许您“指定`Timeout.Infinite`禁用周期性信号”。作为[构造函数](http://msdn.microsoft.com/en-us/library/2x96zfy7.aspx)的一部分，这会导致计时器仅触发一次。

然后，您可以在第一个计时器的回调触发并完成时构造一个新计时器，从而防止多个计时器被调度，直到您准备好它们发生。

这里的优点是您无需创建计时器，然后反复取消它们，因为您一次安排的时间永远不会超过“下一个事件”。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-01-28T21:37:37.080

至少有 20 种不同的方法可以实现这一点，从使用计时器和信号量，到 volatile 变量，再到使用 TPL，再到使用 Quartz 等开源调度工具。

创建线程是一项昂贵的工作，所以为什么不直接创建 ONE 并让它在后台运行，因为它将大部分时间都用于空闲，它不会对系统造成真正的消耗。定期醒来并做工作，然后在一段时间内重新入睡。无论任务需要多长时间，在开始新任务之前，您总是会在完成后至少等待“waitForWork”时间跨度。

```
 //wait 5 seconds for testing purposes
    static TimeSpan waitForWork = new TimeSpan(0, 0, 0, 5, 0);
    static ManualResetEventSlim shutdownEvent = new ManualResetEventSlim(false);
    static void Main(string[] args)
    {
        System.Threading.Thread thread = new Thread(DoWork);
        thread.Name = "My Worker Thread, Dude";
        thread.Start();

        Console.ReadLine();
        shutdownEvent.Set();
        thread.Join();
    }

    public static void DoWork()
    {
        do
        {
            //wait for work timeout or shudown event notification
            shutdownEvent.Wait(waitForWork);

            //if shutting down, exit the thread
            if(shutdownEvent.IsSet)
                return;

            //TODO: Do Work here

        } while (true);

    } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-01-31T06:15:57.547

您可以使用 System.Threading.Timer。诀窍是仅设置初始时间。当上一个间隔完成或作业完成时再次设置初始时间（当作业花费的时间比间隔长时会发生这种情况）。这是示例代码。

```
class Program
{

    static System.Threading.Timer timer;
    static bool workAvailable = false;
    static int timeInMs = 5000;
    static object o = new object(); 

    static void Main(string[] args)
    {
        timer = new Timer((o) =>
            {
                try
                {
                    if (workAvailable)
                    {
                        // do the work,   whatever is required.
                        // if another thread is started use Thread.Join to wait for the thread to finish
                    }
                }
                catch (Exception)
                {
                    // handle
                }
                finally
                {
                    // only set the initial time, do not set the recurring time
                    timer.Change(timeInMs, Timeout.Infinite);
                }
            });

        // only set the initial time, do not set the recurring time
        timer.Change(timeInMs, Timeout.Infinite);
    } 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2013-09-06T20:18:00.657

为什么不使用计时器`Monitor.TryEnter()`？如果`OnTimerElapsed()`在前一个线程完成之前再次调用，它将被丢弃，并且在计时器再次触发之前不会再次发生另一次尝试。

```
private static readonly object _locker = new object();

    private void OnTimerElapsed(object sender, ElapsedEventArgs e)
    {
        if (!Monitor.TryEnter(_locker)) { return; }  // Don't let  multiple threads in here at the same time.

        try
        {
            // do stuff
        }
        finally
        {
            Monitor.Exit(_locker);
        }
    } 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-15T07:59:25.970

这个问题已经有很多很好的答案，包括[一个](https://stackoverflow.com/a/18662986/3538012)基于 TPL 中一些特性的稍新的答案。但我觉得这里缺乏：

1.  基于 TPL 的解决方案 a) 并没有真正完全包含在这里，而是指另一个答案，b) 没有显示如何使用`async`/`await`以单一方法实现计时机制，以及 c) 引用的实现是相当复杂，这有点混淆了*这个*特定问题的潜在相关点。
2.  这里的原始问题对所需实现的具体参数有些模糊（尽管其中一些在评论中得到了澄清）。同时，其他读者可能有相似但不相同的需求，没有一个答案可以解决可能需要的各种设计选项。
3.  `Task`我特别喜欢使用and `async`/`await`这种方式实现周期性行为，因为它简化了代码。`async`/`await`特性在获取本来会被延续/回调实现细节破坏的代码并在单个方法中保留其自然的线性逻辑方面特别*有价值。*但是这里没有答案可以证明这种简单性。

所以，有了这个理由，我想为这个问题添加另一个答案……

对我来说，首先要考虑的是“这里需要什么*确切的行为？”* 这里的问题从一个基本前提开始：定时器启动的周期任务不应该并发运行，即使任务花费的时间比定时器周期长。但是有多种方式可以满足前提，包括：

1.  甚至不要在任务运行时运行计时器。
2.  运行定时器（这个和我在这里展示的其余选项都假设定时器在任务执行期间继续运行），但如果任务花费的时间超过定时器周期，请在任务完成后立即再次运行上一个计时器滴答声。
3.  仅在计时器滴答时启动任务的执行。如果任务花费的时间超过定时器周期，则在当前任务执行时不要启动新任务，即使当前任务完成后，也不要在下一个定时器滴答时启动新任务。
4.  如果任务花费的时间超过了计时器间隔，不仅要在任务完成后立即再次运行任务，还要根据需要多次运行，直到任务“赶上”。即随着时间的推移，尽最大努力为*每个*计时器滴答执行一次任务。

根据评论，我的印象是#3 选项最接近 OP 的原始请求，尽管听起来#1 选项可能也可以工作。但是选项 #2 和 #4 可能比其他人更可取。

在下面的代码示例中，我使用五种不同的方法实现了这些选项（其中两个实现了选项 #3，但方式略有不同）。当然，人们会根据自己的需要选择适当的实现。您可能不需要所有五合一程序！:)

关键在于，在所有这些实现中，它们自然而然地以一种非常简单的方式，以周期但非并发的方式执行任务。也就是说，他们有效地实现了基于计时器的执行模型，同时确保任务一次只能由一个线程执行，根据问题的主要请求。

此示例还说明了如何`CancellationTokenSource`使用中断周期任务，以`await`干净、简单的方式处理基于异常的模型。

```
class Program
{
    const int timerSeconds = 5, actionMinSeconds = 1, actionMaxSeconds = 7;

    static Random _rnd = new Random();

    static void Main(string[] args)
    {
        Console.WriteLine("Press any key to interrupt timer and exit...");
        Console.WriteLine();

        CancellationTokenSource cancelSource = new CancellationTokenSource();

        new Thread(() => CancelOnInput(cancelSource)).Start();

        Console.WriteLine(
            "Starting at {0:HH:mm:ss.f}, timer interval is {1} seconds",
            DateTime.Now, timerSeconds);
        Console.WriteLine();
        Console.WriteLine();

        // NOTE: the call to Wait() is for the purpose of this
        // specific demonstration in a console program. One does
        // not normally use a blocking wait like this for asynchronous
        // operations.

        // Specify the specific implementation to test by providing the method
        // name as the second argument.
        RunTimer(cancelSource.Token, M1).Wait();
    }

    static async Task RunTimer(
        CancellationToken cancelToken, Func<Action, TimeSpan, Task> timerMethod)
    {
        Console.WriteLine("Testing method {0}()", timerMethod.Method.Name);
        Console.WriteLine();

        try
        {
            await timerMethod(() =>
            {
                cancelToken.ThrowIfCancellationRequested();
                DummyAction();
            }, TimeSpan.FromSeconds(timerSeconds));
        }
        catch (OperationCanceledException)
        {
            Console.WriteLine();
            Console.WriteLine("Operation cancelled");
        }
    }

    static void CancelOnInput(CancellationTokenSource cancelSource)
    {
        Console.ReadKey();
        cancelSource.Cancel();
    }

    static void DummyAction()
    {
        int duration = _rnd.Next(actionMinSeconds, actionMaxSeconds + 1);

        Console.WriteLine("dummy action: {0} seconds", duration);
        Console.Write("    start: {0:HH:mm:ss.f}", DateTime.Now);
        Thread.Sleep(TimeSpan.FromSeconds(duration));
        Console.WriteLine(" - end: {0:HH:mm:ss.f}", DateTime.Now);
    }

    static async Task M1(Action taskAction, TimeSpan timer)
    {
        // Most basic: always wait specified duration between
        // each execution of taskAction
        while (true)
        {
            await Task.Delay(timer);
            await Task.Run(() => taskAction());
        }
    }

    static async Task M2(Action taskAction, TimeSpan timer)
    {
        // Simple: wait for specified interval, minus the duration of
        // the execution of taskAction. Run taskAction immediately if
        // the previous execution too longer than timer.

        TimeSpan remainingDelay = timer;

        while (true)
        {
            if (remainingDelay > TimeSpan.Zero)
            {
                await Task.Delay(remainingDelay);
            }

            Stopwatch sw = Stopwatch.StartNew();
            await Task.Run(() => taskAction());
            remainingDelay = timer - sw.Elapsed;
        }
    }

    static async Task M3a(Action taskAction, TimeSpan timer)
    {
        // More complicated: only start action on time intervals that
        // are multiples of the specified timer interval. If execution
        // of taskAction takes longer than the specified timer interval,
        // wait until next multiple.

        // NOTE: this implementation may drift over time relative to the
        // initial start time, as it considers only the time for the executed
        // action and there is a small amount of overhead in the loop. See
        // M3b() for an implementation that always executes on multiples of
        // the interval relative to the original start time.

        TimeSpan remainingDelay = timer;

        while (true)
        {
            await Task.Delay(remainingDelay);

            Stopwatch sw = Stopwatch.StartNew();
            await Task.Run(() => taskAction());

            long remainder = sw.Elapsed.Ticks % timer.Ticks;

            remainingDelay = TimeSpan.FromTicks(timer.Ticks - remainder);
        }
    }

    static async Task M3b(Action taskAction, TimeSpan timer)
    {
        // More complicated: only start action on time intervals that
        // are multiples of the specified timer interval. If execution
        // of taskAction takes longer than the specified timer interval,
        // wait until next multiple.

        // NOTE: this implementation computes the intervals based on the
        // original start time of the loop, and thus will not drift over
        // time (not counting any drift that exists in the computer's clock
        // itself).

        TimeSpan remainingDelay = timer;
        Stopwatch swTotal = Stopwatch.StartNew();

        while (true)
        {
            await Task.Delay(remainingDelay);
            await Task.Run(() => taskAction());

            long remainder = swTotal.Elapsed.Ticks % timer.Ticks;

            remainingDelay = TimeSpan.FromTicks(timer.Ticks - remainder);
        }
    }

    static async Task M4(Action taskAction, TimeSpan timer)
    {
        // More complicated: this implementation is very different from
        // the others, in that while each execution of the task action
        // is serialized, they are effectively queued. In all of the others,
        // if the task is executing when a timer tick would have happened,
        // the execution for that tick is simply ignored. But here, each time
        // the timer would have ticked, the task action will be executed.
        //
        // If the task action takes longer than the timer for an extended
        // period of time, it will repeatedly execute. If and when it
        // "catches up" (which it can do only if it then eventually
        // executes more quickly than the timer period for some number
        // of iterations), it reverts to the "execute on a fixed
        // interval" behavior.

        TimeSpan nextTick = timer;
        Stopwatch swTotal = Stopwatch.StartNew();

        while (true)
        {
            TimeSpan remainingDelay = nextTick - swTotal.Elapsed;

            if (remainingDelay > TimeSpan.Zero)
            {
                await Task.Delay(remainingDelay);
            }

            await Task.Run(() => taskAction());
            nextTick += timer;
        }
    }
} 
```

最后一点：在将其作为另一个问题的副本之后，我遇到了这个问答。在另一个问题中，与此处不同的是，OP 特别指出他们正在使用该`System.Windows.Forms.Timer`课程。当然，使用这个类主要是因为它具有`Tick`在 UI 线程中引发事件的好特性。

现在，它和这个问题都涉及在后台线程中实际执行的任务，因此该计时器类的 UI 线程相关行为在这些场景中并不是特别有用。这里的代码被实现以匹配“启动后台任务”范例，但它可以很容易地更改，以便`taskAction`直接调用委托，而不是在 a 中运行`Task`并等待。除了我上面提到的结构优势之外，使用`async`/的好处是它保留了类所需的线程相关行为。`await``System.Windows.Forms.Timer`

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-01-24T19:15:27.187

如果我对您的理解正确，您实际上只是想确保您的线程在调度另一个线程之前没有运行。假设您在类中定义了一个线程，*如下所示*。

```
private System.Threading.Thread myThread; 
```

*你可以做：*

```
//inside some executed method
System.Threading.Timer t = new System.Threading.Timer(timerCallBackMethod, null, 0, 5000); 
```

*然后像这样添加回调*

```
private void timerCallBackMethod(object state)
{
     if(myThread.ThreadState == System.Threading.ThreadState.Stopped || myThread.ThreadState == System.Threading.ThreadState.Unstarted)
     {
        //dispatch new thread
     }
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-01-30T16:04:31.777

前段时间我遇到了同样的问题，我所做的只是使用[lock{}](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)语句。这样一来，即使 Timer 想要做任何事情，他也被迫等待，直到 lock-Block 结束。

IE

```
lock
{    
     // this code will never be interrupted or started again until it has finished
} 
```

这是确保您的过程将一直工作到最后而不会中断的好方法。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-01-26T10:03:36.803

这就是`ExecuteTaskCallback`方法的胆量。这个位负责做一些工作，但前提是它还没有这样做。为此，我使用了最初设置为在方法中发出信号的`ManualResetEvent`( ) 。`canExecute``StartTaskCallbacks`

注意我使用的方式`canExecute.WaitOne(0)`。零表示`WaitOne`将立即返回`WaitHandle`( [MSDN](http://msdn.microsoft.com/en-us/library/cc189907%28v=vs.90%29) ) 的状态。如果省略零，您最终将每次调用`ExecuteTaskCallback`最终运行该任务，这可能是相当灾难性的。

另一个重要的事情是能够干净地结束处理。我选择阻止`Timer`执行任何进一步的方法，`StopTaskCallbacks`因为这样做似乎更可取，而其他工作可能正在进行中。这确保不会进行任何新工作，并且后续调用`canExecute.WaitOne();`确实会覆盖最后一项任务（如果有的话）。

```
private static void ExecuteTaskCallback(object state)
{
    ManualResetEvent canExecute = (ManualResetEvent)state;

    if (canExecute.WaitOne(0))
    {
        canExecute.Reset();
        Console.WriteLine("Doing some work...");
        //Simulate doing work.
        Thread.Sleep(3000);
        Console.WriteLine("...work completed");
        canExecute.Set();
    }
    else
    {
        Console.WriteLine("Returning as method is already running");
    }
}

private static void StartTaskCallbacks()
{
    ManualResetEvent canExecute = new ManualResetEvent(true),
        stopRunning = new ManualResetEvent(false);
    int interval = 1000;

    //Periodic invocations. Begins immediately.
    Timer timer = new Timer(ExecuteTaskCallback, canExecute, 0, interval);

    //Simulate being stopped.
    Timer stopTimer = new Timer(StopTaskCallbacks, new object[]
    {
        canExecute, stopRunning, timer
    }, 10000, Timeout.Infinite);

    stopRunning.WaitOne();

    //Clean up.
    timer.Dispose();
    stopTimer.Dispose();
}

private static void StopTaskCallbacks(object state)
{
    object[] stateArray = (object[])state;
    ManualResetEvent canExecute = (ManualResetEvent)stateArray[0];
    ManualResetEvent stopRunning = (ManualResetEvent)stateArray[1];
    Timer timer = (Timer)stateArray[2];

    //Stop the periodic invocations.
    timer.Change(Timeout.Infinite, Timeout.Infinite);

    Console.WriteLine("Waiting for existing work to complete");
    canExecute.WaitOne();
    stopRunning.Set();
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-09-24T18:32:05.030

这应该做你想要的。它执行一个线程，然后加入该线程直到它完成。进入计时器循环以确保它不会过早执行线程，然后再次关闭并执行。

```
using System.Threading;

public class MyThread
{
    public void ThreadFunc()
    {
        // do nothing apart from sleep a bit
        System.Console.WriteLine("In Timer Function!");
        Thread.Sleep(new TimeSpan(0, 0, 5));
    }
};

class Program
{
    static void Main(string[] args)
    {
        bool bExit = false;
        DateTime tmeLastExecuted;

        // while we don't have a condition to exit the thread loop
        while (!bExit)
        {
            // create a new instance of our thread class and ThreadStart paramter
            MyThread myThreadClass = new MyThread();
            Thread newThread = new Thread(new ThreadStart(myThreadClass.ThreadFunc));

            // just as well join the thread until it exits
            tmeLastExecuted = DateTime.Now; // update timing flag
            newThread.Start();
            newThread.Join();

            // when we are in the timing threshold to execute a new thread, we can exit
            // this loop
            System.Console.WriteLine("Sleeping for a bit!");

            // only allowed to execute a thread every 10 seconds minimum
            while (DateTime.Now - tmeLastExecuted < new TimeSpan(0, 0, 10));
            {
                Thread.Sleep(100); // sleep to make sure program has no tight loops
            }

            System.Console.WriteLine("Ok, going in for another thread creation!");
        }
    }
} 
```

应该产生类似的东西：

在定时器功能中！睡一会儿！好的，继续创建另一个线程！在定时器功能中！睡一会儿！好的，继续创建另一个线程！在定时器功能中！……

希望这可以帮助！SR

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-07-19T19:34:44.167

我建议使用 Timer 而不是线程，因为它是更轻的对象。为了实现您的目标，您可以执行以下操作。

```
using System.Timers;

namespace sample_code_1
{
    public class ClassName
    {
        Timer myTimer;
        static volatile bool isRunning;

        public OnboardingTaskService()
        {
             myTimer= new Timer();
             myTimer.Interval = 60000;
             myTimer.Elapsed += myTimer_Elapsed;
             myTimer.Start();
        }

        private void myTimer_Elapsed(object sender, ElapsedEventArgs e)
        {
            if (isRunning) return;
            isRunning = true;
            try
            {
                //Your Code....
            }
            catch (Exception ex)
            {
                //Handle Exception
            }
            finally { isRunning = false; }
        }
    }
} 
```

让我知道它是否有帮助。

# python - Selenium：列表索引超出范围错误

> ID：12570329
> 
> 赞同：2
> 
> 时间：2012-09-24T17:59:12.143
> 
> 标签：python, selenium

我正进入（状态

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: list index out of range 
```

每当我尝试运行此代码时都会出错。我只是想打印此页面上的所有 URL。请有人告诉我，我做错了什么？

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.tour-india.net/best-of-india.htm")
cities=browser.find_elements_by_css_selector(".posts1>a>h2")
for i in range(0,len(cities)):
    cities1=browser.find_elements_by_css_selector(".posts1>a>h2")[i]
    cities1.click()
    title=browser.find_elements_by_xpath("//title")
    content=browser.find_elements_by_css_selector(".tours_text_innerpage.content_margin_top")
    currentUrl=browser.current_url
    print currentUrl
    browser.back() 
```

编辑：我正在对代码进行一些修改，我在 for 循环之后再次添加了**city=browser.find_elements_by_css_selector(".posts1>a>h2")并且突然索引错误停止出现。**现在我很困惑为什么会这样。？？？

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.tour-india.net/best-of-india.htm")
cities=browser.find_elements_by_css_selector(".posts1>a>h2")
for i in range(0,len(cities)):
    cities=browser.find_elements_by_css_selector(".posts1>a>h2")
    cities1=browser.find_elements_by_css_selector(".posts1>a>h2")[i]
    cities1.click()
    title=browser.find_elements_by_xpath("//title")
    content=browser.find_elements_by_css_selector(".tours_text_innerpage.content_margin_top")
    currentUrl=browser.current_url
    print currentUrl
    browser.back() 
```

编辑：我的整个追溯

```
>>> import traceback
>>> from selenium import webdriver
>>> browser = webdriver.Firefox()
>>> browser.get("http://www.tour-india.net/best-of-india.htm")
>>> cities=browser.find_elements_by_css_selector(".posts1>a>h2")
>>> for i in range(0,len(cities)):      
...     try:
...             #cities=browser.find_elements_by_css_selector(".posts1>a>h2")
...             cities1=browser.find_elements_by_css_selector(".posts1>a>h2")[i]
...             cities1.click()
...             title=browser.find_elements_by_xpath("//title")
...             content=browser.find_elements_by_css_selector(".tours_text_innerpage.content_margin_top")
...             currentUrl=browser.current_url
...             print currentUrl
...             browser.back()
...     except:
...             print traceback.format_exc()
... 
http://www.tour-india.net/golden-triangle.htm
http://www.tour-india.net/golden-triangle-varanasi.htm
http://www.tour-india.net/magnificent-rajasthan.htm
http://www.tour-india.net/northindia-rajasthan-tour.htm
http://www.tour-india.net/north_india_himalaya_tour.htm
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
IndexError: list index out of range

http://www.tour-india.net/southindia-panorma.htm
http://www.tour-india.net/classical-rajasthan-tours.htm
http://www.tour-india.net/rajasthan-forts.htm
http://www.tour-india.net/india-nepal-tour.htm
http://www.tour-india.net/southindia-glimpses.htm
http://www.tour-india.net/enchanting-southindia.htm
http://www.tour-india.net/shekhawati-tours.htm
http://www.tour-india.net/delhi-tour.htm
http://www.tour-india.net/bombay-goa.htm
http://www.tour-india.net/royal-rajasthan.htm
http://www.tour-india.net/grand-mughal.htm
http://www.tour-india.net/north_india_himalaya_tour.htm
http://www.tour-india.net/northindia-images.htm
http://www.tour-india.net/karnataka-heritage.htm
http://www.tour-india.net/leh-ladakh.htm
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
IndexError: list index out of range

http://www.tour-india.net/darjeeling-sikkim.htm
http://www.tour-india.net/himalayan-heritage.htm
Traceback (most recent call last):
  File "<stdin>", line 4, in <module>
IndexError: list index out of range

http://www.tour-india.net/rajasthan-goa.htm
http://www.tour-india.net/rajasthan-forts-palaces.htm
http://www.tour-india.net/rajasthan-mp.htm
http://www.tour-india.net/rajasthan-nepal.htm
http://www.tour-india.net/splendid-gujarat.htm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T10:47:41.790

城市解决问题后再次调用城市变量。我仍然不知道为什么。但它工作正常。因为没有人发布答案。接受我自己的答案

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get("http://www.tour-india.net/best-of-india.htm")
cities=browser.find_elements_by_css_selector(".posts1>a>h2")
for i in range(0,len(cities)):
    cities=browser.find_elements_by_css_selector(".posts1>a>h2")
    cities1=browser.find_elements_by_css_selector(".posts1>a>h2")[i]
    cities1.click()
    title=browser.find_elements_by_xpath("//title")
    content=browser.find_elements_by_css_selector(".tours_text_innerpage.content_margin_top")
    currentUrl=browser.current_url
    print currentUrl
    browser.back( 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T19:27:37.693

所以，你点击每个链接，打印它，然后返回？这是非常低效的。您可以使用 .get_attribute 方法非常快速地获取页面上所有链接的 url。

```
links = [i.get_attribute('href') for i in driver.find_elements_by_xpath('.//a')]
for i in links:
    print i 
```

将打印页面上所有链接的列表。要选择页面的较小区域，请找到要从中选择的“框架”元素，然后使用

```
frame.find_elements_by_xpath('//a') 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:50:34.163

使用`len(cities)-1`，`len`返回比 Python 看到的列表长度多 1 的长度。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-24T18:37:01.563

```
for i in range(len(cities)): 
```

Range 只接受一个参数:)

你可以修改你的循环：

```
for city in cities:
    city.click()
    # rest is the same 
```

它更“pythonic”

# c++ - 对“类”的未定义引用 ：：班级'

> ID：12570338
> 
> 赞同：0
> 
> 时间：2012-09-24T17:59:50.800
> 
> 标签：c++, stack, binary-tree, undefined-reference

> **可能重复：**
> [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

我以前碰到过这堵墙，但我不知道如何修复它。在 g++ 中，每当我尝试创建 BinaryTree 类的对象时，都会出现此错误：

```
/home/bej0843/cs261/Assignment1/main.cpp:9: undefined reference to `BinaryTree<char>::BinaryTree()' 
```

这是头文件的代码：

```
#ifndef BINARYTREE_H
#define BINARYTREE_H
#include <iostream>
#include <cstring>
#include <stack>
using namespace std;

template<typename Type>
class BinaryTree
{
    public:
        struct TreeNode
        {
                Type nodeinfo;
                BinaryTree<Type> *left;
                BinaryTree<Type> *right;
        };
        BinaryTree();
        void setInfo(Type a);
        void setSubtree(Type a);
        bool isEmpty();
        Type Info();
        void inOrder();
        void preOrder();
        void postOrder();
        virtual ~BinaryTree();
    protected:
        TreeNode *root;
        stack<TreeNode*> s;
        stack<TreeNode*> temp;
    private:
      void postOrder(TreeNode *r);
};

#endif  /* BINARYTREE_H */ 
```

这是它的实现代码：

```
#include "BinaryTree.h"

template <typename Type>
BinaryTree<Type>::BinaryTree(){

    root = NULL;
}

template <typename Type>
void BinaryTree<Type>::setInfo(Type a){
  root->nodeinfo = a;
  root->left = NULL;
  root->right = NULL;
  s.push(root);
}

template <typename Type>
void BinaryTree<Type>::setSubtree(Type a){
  root->nodeinfo = a;
  root->left->root = s.top();
  s.pop();
  root->right->root = s.top();
  s.pop();
  s.push(root);
}

template <typename Type>
bool BinaryTree<Type>::isEmpty(){
  return (root==NULL);
}

template <typename Type>
Type BinaryTree<Type>::Info(){
  return root->nodeinfo;
}

template <typename Type>
void BinaryTree<Type>::inOrder(){

  TreeNode *c;
  c = s.top();

  while (c!=NULL || (!temp.empty())){
    if (c!=NULL)
    {
    temp.push(c);
    c = c->left;
    }
    else{
      c = temp.top();
      temp.pop();
      cout << c->nodeinfo +" ";
      c = c->right;
    }
  }

}

template <typename Type>
void BinaryTree<Type>::postOrder(){
  postOrder(s.top());
}

template <typename Type>
void BinaryTree<Type>::postOrder(TreeNode *r){
  temp.push(s.top());
  TreeNode *c = temp.top();
  s.pop();
  postOrder(c->left->root);
  postOrder(c->right->root);
  cout << c->nodeinfo + " ";

}

template <typename Type>
void BinaryTree<Type>::preOrder(){
  TreeNode*c = s.top();
  while (c!=NULL||(!temp.empty())){
    if (c!=NULL){
      cout << c->nodeinfo + " ";
      temp.push(c);
      c=c->left;
    }
    else{
      c=temp.top();
      temp.pop();
      c=c->right;
    }
  }
}

template <typename Type>
BinaryTree<Type>::~BinaryTree(){

} 
```

我主要打电话给：

```
BinaryTree<char> tree; 
```

并得到错误。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:04:16.013

在使用模板类时，您必须将类的实现和声明放在同一个文件中。

编译器需要在使用模板类的地方生成代码。

[模板类构造函数中的动态分配](https://stackoverflow.com/questions/12540928/dynamic-allocation-in-template-class-constructor)

你可以这样做。

```
template <typename T>
class myClass
{
   //public and private interface. 
} ;

//Here the implementation of the interface goes, just beneath the declaration. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:07:50.047

当您编写模板化函数时

```
template <typename Type>
BinaryTree<Type>::BinaryTree(){

    root = NULL;
} 
```

编译器在看到模板参数的实例化之前实际上不会为该函数生成代码。

这就是为什么没有`BinaryTree<char>::BinaryTree()`; 编译器从未为此生成代码！原因是您的`char`实例位于定义此模板函数的单独编译单元（目标文件）中。

要解决此问题，请将您的`main()`函数放在定义所有`BinaryTree`成员函数的同一文件中，或者将成员函数放在声明类的头文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:06:08.790

该错误意味着链接器没有找到该类型的构造函数的定义。模板化代码中的主要原因是函数的定义（在这种情况下为构造函数）在实例化的位置不可用，并且没有执行显式实例化。简单的解决方案是在标题中提供模板的定义以使其可用。

# excel - 如何从表中返回列标题而不是过滤

> ID：12570340
> 
> 赞同：0
> 
> 时间：2012-09-24T17:59:55.027
> 
> 标签：excel, excel-formula

我正在尝试对表格中的数据进行分组。该表是根据数据透视表构建的，如果员工是否参与过项目，则返回的值等于 1。

我尝试了 Hlookup，vlookup ......无法弄清楚。

表中的“1”值表示该人从事该特定项目。我需要一个公式来说明，如果 L.Bish="1"，则返回所有也等于“1”的名称

很长的路要走的是过滤每个人下的表值以获取值“1”，以查找其他团队成员是否与该人一起工作。

然后，我需要将此公式应用于所有其他团队成员，以查看谁在项目上一起工作过和没有一起工作过。

任何帮助或方向都会很棒

如您所见，Bish 与以下人员合作过：Carl Good 等。

表如下：

![桌子](../Images/d989826b09cda480a4a58d99becaf26a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:42:45.040

我假设您在行和列中有员工和项目，反之亦然。如果您要“取消透视”您的表格，您将能够将其放回透视表并按照您想要的方式进行分组。

[在此处](http://tduhameau.wordpress.com/2012/09/24/the-unpivot-add-in/)查看我的 Table2DB 加载项。

在您的情况下，您可以简单地运行下面的宏并根据您的新工作表创建一个数据透视表

```
Sub UnPivot()
Dim lLastCol As Long, lLastRow As Long
Dim rgCell As Range, shtOrg As Worksheet, shtDest As Worksheet
Dim lRowDest As Long

'turn off updates to speed up code execution
With Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
End With

Set shtOrg = ActiveSheet

lLastRow = Cells(Rows.Count, 1).End(xlUp).Row
lLastCol = Cells(48, Columns.Count).End(xlToLeft).Column

Set shtDest = Sheets.Add
lRowDest = 2

shtDest.Cells(1, 1) = "Project"
shtDest.Cells(1, 2) = "Employee"

With shtOrg
    For Each rgCell In .Range(.Cells(49, 2), .Cells(lLastRow, lLastCol)).SpecialCells(xlCellTypeConstants)

        If rgCell.Value = 1 Then
            shtDest.Cells(lRowDest, 1) = .Cells(rgCell.Row, 1)
            shtDest.Cells(lRowDest, 2) = .Cells(48, rgCell.Column)
            lRowDest = lRowDest + 1
        End If

    Next rgCell
End With

With Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
End With

End Sub 
```

要获得没有一起工作的人，请构建如下所示的表格并使用公式： =IF(COUNTIFS(OFFSET($A$49:$A$78,0,MATCH($A2,$48:$48,0)- 1,,),1,OFFSET($A$49:$A$78,0,MATCH(B$1,$48:$48,0)-1,,),1)>0,"Did","没有" ） ＆ “ 一起工作”

![在此处输入图像描述](../Images/8f4bfd33bb2ed25d5e8c7849002435f2.png)

# mysql - SQLSTATE [HY000]：尝试使用 PDO 更新 MYSQL 记录时出现一般错误

> ID：12570345
> 
> 赞同：0
> 
> 时间：2012-09-24T18:00:25.373
> 
> 标签：mysql, pdo, passwords

我正在尝试创建一个页面，用户可以在其中更新他们的信息，例如他们的姓名/电子邮件和密码。下面是更新函数：

```
 public function update() {
        $correct = false;
        try {
            $con = new PDO( DB_DSN, DB_USERNAME, DB_PASSWORD );
            $con->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
            $sql = "UPDATE users SET `username` = :username, `password` = :password, `name` = :name, `email` = :email WHERE `userID` = :userID";

            $stmt = $con->prepare( $sql );
            $stmt->bindValue( "username", $this->username, PDO::PARAM_STR );
            $stmt->bindValue( "password", hash("sha256", $this->password . $this->salt), PDO::PARAM_STR );
            $stmt->bindValue( "name", $this->name, PDO::PARAM_STR );
            $stmt->bindValue( "email", $this->email, PDO::PARAM_STR );
            $stmt->bindValue( "userID", $this->userID, PDO::PARAM_STR );
            $stmt->execute();

            print("PDO::FETCH_ASSOC: ");
            print("Return next row as an array indexed by column name\n");
            $result = $stmt->fetch(PDO::FETCH_ASSOC);
            print_r($result);
            print("\n"); 
```

这是页面上的表格：

```
<?php
                        echo '<form method="post" action="' . $_SERVER['PHP_SELF'] . '">
                             <ul>
                                     <li>
<label for="usn">Name : </label>
                                             <input type="text" id="usn" maxlength="36" required autofocus name="name" value="' . $row['name'] . '" />
                                             <input type="text" name="userID" value="' . $row['userID'] . '" class="displaynone"/>
                                     </li>
                                     <li>
<label for="usn">Email : </label>
                                             <input type="text" id="usn" maxlength="46" required autofocus name="email" value="' . $row['email'] . '" />
                                     </li>
                                     <li>

                                             <label for="usn">Username : </label>
                                             <input type="text" id="usn" maxlength="30" required autofocus name="username" disabled="disabled" value="' . $row['username'] . '" />
                                     </li>

                                     <li>
                                             <label for="passwd">Password : </label>
                                             <input type="password" id="passwd" maxlength="30" required name="password" />
                                     </li>

                                            <li>
                                             <label for="conpasswd">Confirm Password : </label>
                                             <input type="password" id="conpasswd" maxlength="30" required name="conpassword" />
                                     </li>
                                     <li class="buttons">
                                             <input type="submit" name="update" value="Update" />
                                                    <input type="button" name="cancel" value="Cancel" />
                                     </li>

                             </ul>
                     </form>';                  
$usr = new Users; //create new instance of the class Users
$usr->storeFormValues( $_POST ); //store form values     //if the entered password is match with the confirm password then register him
if( $_POST['password'] == $_POST['conpassword'] ) {
echo $usr->update($_POST); 
} else {
//if not then say that he must enter the same password to the confirm box.
echo "Password and Confirm password not match"; 
}
                    ?> 
```

这将返回以下错误：

```
PDO::FETCH_ASSOC: Return next row as an array indexed by column name SQLSTATE[HY000]: General error 
```

我真的被困在这里了。我不知道如何进一步解决此问题。

# php - 使用下拉列表过滤数据表

> ID：12570347
> 
> 赞同：-1
> 
> 时间：2012-09-24T18:00:32.037
> 
> 标签：php, mysql

我正在寻找一个由 mysql 数据库“过滤器”填充到下拉框中选择的选项的数据表。没有提交按钮。

基本上把它想象成一个歌曲列表，乐队名称的标题会有一个下拉菜单，如果你选择一个乐队，它只会显示该乐队的歌曲。

```
$sql="SELECT DISTINCT Band FROM Music"; 
$result=mysql_query($sql); 

$options=""; 

while ($row=mysql_fetch_array($result)) { 

$options.="<OPTION VALUE=\"$row["Band"]\">".$row["Band"]; 
} 

echo '<table border="1"; spacing="0"; padding="10px">
<tr>

<th><SELECT NAME=Band> 
<OPTION VALUE=0>Band 
'.$options.'
</SELECT></th>
<th>Album</th>
<th>Song</th>
</tr>';
$result = mysql_query("SELECT * FROM music");
while($row = mysql_fetch_array($result))
{
echo "<td><center>" . $row['Band'] . "</center></td>";
echo "<td><center>" . $row['Album'] . "</center></td>";
echo "<td><center>" . $row['Song'] . "</center></td>";
  echo "</tr>";
}
echo "</table><br><br><br>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:18:01.760

对不起，你不能这样做。PHP 是一种服务器端语言，不能执行客户端任务。您可以将艺术家选择设置为表单项，将艺术家姓名/ID 提交给数据库，然后返回所选艺术家的歌曲，但它的工作方式与您希望的方式不同。

# android - 根据手机的 API 版本设置 SimpleCursorAdapter？

> ID：12570351
> 
> 赞同：2
> 
> 时间：2012-09-24T18:00:38.290
> 
> 标签：android

我有一个使用`SimpleCursorAdapter`

`API level 9` 当我想使用时，我有最小值，`SimpleCursorAdapter`我使用以下构造函数：

```
SimpleCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to) 
```

但后来我得到消息，这是**不推荐使用**的。

所以我将其更改为较新的版本：

```
SimpleCursorAdapter(Context context, int layout, Cursor c, String[] from, int[] to, int flags) 
```

但是我的最低 API 级别应该是 11，但我不想更改它。

**是否可以让 android 检查版本，例如：如果 api level >= 11 使用新版本，否则使用旧版本？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:03:06.147

尝试[支持类中的 SimpleCursorAdapter](http://developer.android.com/reference/android/support/v4/widget/SimpleCursorAdapter.html)。它与 API 11+ 版本一样使用，并且已经向后兼容。

很可能你已经下载了支持库（如果你*真的*没有下载的话），所以你只需要更改导入：

```
import android.support.v4.widget.SimpleCursorAdapter; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:05:49.010

```
if (Android.os.Build.VERSION.RELEASE==Build.VERSION_CODES.HONEYCOMB){
...
} else {
...
} 
```

# javascript - 使用 contenteditable div 时在移动设备上隐藏软键盘

> ID：12570362
> 
> 赞同：4
> 
> 时间：2012-09-24T18:01:18.557
> 
> 标签：javascript, android, ios, keyboard, contenteditable

我正在使用 contenteditable div 来让移动设备查看页面以获取某些内容的输入。我希望软键盘在用户按下回车时隐藏，而不是在 div 中回车的正常操作。我第一次尝试让它工作看起来像这样：

```
if event.keyCode == 13 #enter
  event.preventDefault() #to prevent the normal behaviour of enter
  @$("#the_editable_div").blur() 
```

但是，这似乎不像输入那样起作用。div 失去焦点，但键盘在 iOS 或 android 上都没有隐藏。

我还尝试了[在 div contenteditable 中关闭 iPad 上的键盘](https://stackoverflow.com/questions/8949222/closing-keyboard-on-ipad-in-div-contenteditable)的解决方案，但发现它不起作用。如果我专注于另一个文本字段并模糊 iOS 的东西它仍然不会关闭键盘，而在 android 上我发现它会将键盘更改为用于常规字段的键盘，再次按 enter 将关闭键盘，但那是当在 contenteditable div 字段中按下 enter 时，它不会立即关闭的预期行为。这对我来说似乎很奇怪，因为如果我自己点击该输入字段，然后通过 javascript 对其进行模糊处理，那么键盘就会正确关闭。

有没有办法让内容可编辑的 div 在该 div 获得焦点时按下回车键时关闭 android 和 iOS 设备上的软键盘？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T17:31:18.807

这种解决方法可以正常工作，至少在 Android 上是这样（我无法在 iPad 上测试）：

```
<input type="text" id="ghostInput" style="position:absolute;top:-50px" />
<div id="myDiv" contenteditable="true" style="width:100%;height:100px;background-color:yellow"></div>
<script>
    var ghostInput = document.getElementById("ghostInput");
    ghostInput.onfocus = function () {
        ghostInput.blur();
    }
    document.getElementById("myDiv").onkeydown = function (e) {
        if (e.keyCode == 13) ghostInput.focus();
    }
</script> 
```

# svn - 我可以让 Microsoft Team Foundation Server 使用 Subversion 和 Jenkins 吗？

> ID：12570365
> 
> 赞同：4
> 
> 时间：2012-09-24T18:01:34.183
> 
> 标签：svn, tfs, jenkins

（我试图做我的功课，但还没有真正找到这个问题的答案。）

有没有办法让 Microsoft Team Foundation Server 直接将 Subversion 用于需要报告或以其他方式显示在其界面中的任何源代码相关活动？

同样，有没有办法让它使用 Jenkins 进行持续构建？

我看过各种描述如何“另辟蹊径”的文章——即让 Jenkins 查询 TFS 源存储库，但这不是我想做的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:24:32.353

No, TFS uses its own proprietary version control and build systems. It doesn't allow other systems like Subversion and Jenkins to be "plugged-in" on the backend. What is the overall scenario you are trying to achieve? Are you trying to use TFS work items with these other services?

*EDIT*

As pointed out below, it probably is worth mentioning that you can have Jenkins build TFS sources but that is more like plugging TFS into Jenkins.

# javascript - 停止 setInterval

> ID：12570366
> 
> 赞同：0
> 
> 时间：2012-09-24T18:01:51.987
> 
> 标签：javascript

我正在玩弄“ID”，试图让自己舒服些。我知道 jQuery 有一个非常快速的解决方案，但我想知道如何通过 js 来实现。

```
 var startTimer = function init(){
                var n = 0;
                var e = document.getElementById("output");
                var myTimer = setInterval (function() {e.innerHTML = n++;},100);
                // clearInterval(myTimer);
                if(myTimer === 10){
                    clearInterval(myTimer);
                    return;

                }
            }                  

           startTimer(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:08:44.897

你真的想要这个吗？

```
function initTimer(){
    var n = 0;
    var e = document.getElementById("output");
    var timerid = setInterval( function() {
        e.innerHTML = n;
        if (n < 10) // count until ten
            n++;
        else
            clearInterval(timerid); // this happens somewhen later
    }, 100);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:03:12.193

您将 myTimer 与 10 进行比较，您应该比较 n：

```
if(n===10) ... 
```

# php - PHP显示由3个CSS列内的两个连接变量组成的mysql查询结果

> ID：12570369
> 
> 赞同：1
> 
> 时间：2012-09-24T18:02:07.260
> 
> 标签：php, mysql, css

标题显示了我需要完成的工作，但随着页面的构建，我得到的是 3 列，每行的结果相同。每一行都是不同的，但每一行的每一列都重复相同的内容，而不是第一列、第二列和第三列的不同内容。

我在下面的代码中遗漏了一些东西来完成这项工作，任何帮助将不胜感激。

谢谢你。

```
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$results = mysql_query("SELECT title,link FROM syndicate ORDER BY popularity DESC LIMIT 75");
while ($row = mysql_fetch_array($results)){

$title = $row['title'];
$link = $row['link'];

if ($divtest = 1){
//insert in div col1;
echo '<div class="col1">';
///<!-- Column 1 start -->
echo '<a href="' . $link . '" target="_blank">' . $title . '</a><br><br>'; /// add all links here
///<!-- Column 1 end -->
echo '</div>';

$divtest = 2;
}

if ($divtest = 2){
//insert in div col2;
echo '<div class="col2">';
///<!-- Column 2 start -->
echo '<a href="' . $link . '" target="_blank">' . $title . '</a><br><br>'; /// add all links here
///<!-- Column 2 end -->
echo '</div>';

$divtest = 3;
}

if ($divtest = 3){
//else {
//insert in div col3;
echo '<div class="col3">';
///<!-- Column 3 start -->
echo '<a href="' . $link . '" target="_blank">' . $title . '</a><br><br>'; /// add all links here
///<!-- Column 3 end -->
echo '</div>';

$divtest = 1;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:06:04.323

`=`您在`if`语句中错误地使用了赋值运算符，而您可能指的是`==`运算符。

更改以下行：

```
if ($divtest = 1){
..
if ($divtest = 2){
..
if ($divtest = 3){ 
```

对于正确的：

```
if ($divtest == 1){
..
if ($divtest == 2){
..
if ($divtest == 3){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:59:32.533

因为

```
$divtest = 2; 
$divtest = 3; 
$divtest = 1; 
```

在每个 if 语句的最后一个，每三个 if 在一个 while 循环中运行。

我认为你应该在 while 中设置 $divtest 值并使用这些更改 if 条件

```
if ($divtest == 1){}

if ($divtest == 2){}

if ($divtest == 3){} 
```

# ios - UIGestureRecognizer 无法识别

> ID：12570370
> 
> 赞同：2
> 
> 时间：2012-09-24T18:02:19.630
> 
> 标签：ios, cocoa-touch, uilabel

我试图创建一个应该可以拖动的标签。但是拖动的事件没有触发（用断点检查）。下面是代码。

```
 - (IBAction)InsertText:(UIBarButtonItem *)sender {

    UILabel *lblWatermark = [[UILabel alloc] initWithFrame:currentImage.frame];
    lblWatermark.text = @"Copyright";
    lblWatermark.userInteractionEnabled = YES;
    [lblWatermark sizeToFit];

    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc]
                                       initWithTarget:self
                                       action:@selector(labelDragged:)];
    [lblWatermark addGestureRecognizer:gesture];
    [currentImage addSubview:lblWatermark];
}
- (void)labelDragged:(UIPanGestureRecognizer *)gesture
{
    UILabel *label = (UILabel *)gesture.view;
    CGPoint translation = [gesture translationInView:label];

    // move label
    label.center = CGPointMake(label.center.x + translation.x,
                               label.center.y + translation.y);
        [gesture setTranslation:CGPointZero inView:label];
} 
```

先感谢您，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:51:34.993

发现了错误。其实我也得做

userInteractionEnabled = 是

不仅适用于标签，而且适用于我在其中添加标签的 Imageview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:11:31.680

确保您的 ViewController 是带有（.h 文件）的 UIGestureRecognizer 的委托：

```
@interface View : UIView <UIGestureRecognizerDelegate> 
```

然后设置：

```
 gesture.delegate = self; 
```

# c++ - 面向对象编程：在 GUI 中启动 ab 对象

> ID：12570373
> 
> 赞同：1
> 
> 时间：2012-09-24T18:02:33.843
> 
> 标签：c++, qt, oop, user-interface

我是基于 OO 的编程新手，所以这是一个愚蠢的问题：

我创建了一个名为**algorithmObject**的类。基本上，它有一堆与之相关的功能。

我创建了一个 QT GUI，我想创建一个 algorithmObject 类型的公共对象，因为我希望能够访问各种 onClick 事件中的成员函数。

所以在我的**GUI.h**文件中，我有：

```
public:

algorithmObject Object1; 
```

在我的**GUI.cpp**文件中，我试图通过以下方式对其进行初始化：

```
 Object1 = algorithmObject(); 
```

我正在使用 MS VS 2010，但出现编译器错误：

错误 C1903：无法从先前的错误中恢复；停止编译错误 C2065：'Object1'：未声明的标识符

如果我不包括：

```
Object1 = algorithmObject(); 
```

在我的 GUI.cpp 文件中，只希望 GUI 构造函数为我创建对象，我得到了同样的错误。

我想，我没有以某种方式在 .cpp 文件中正确初始化我的对象。有人可以建议什么是正确的过程吗？

我的 algorithmObject 文件概述如下：

**算法对象.h**

```
#include <iostream>
#include <fstream>

class algorithmObject 
{

public:

algorithmObject (void);
~algorithmObject (void);

void function1 (int parameter);
void function2 ();
} 
```

**算法对象.cpp**

```
#include "algorithmObject.h"

algorithmObject::algorithmObject(void)
{
}

void algorithmObject::function1(int parameter)
{
//do something
}

void algorithmObject::function2()
{
//do something
}

algorithmObject::~algorithmObject(void)
{
} 
```

但是，如果我不在 GUI.h 文件中包含任何定义，而只是在 GUI 中的单个函数 (algorithmObject Object1;) 中定义我的 algorithmObject，我就能够正确访问我的类的功能。但问题是该对象是该函数的本地对象，我无法从 GUI.cpp 文件的任何其他函数访问它，这对我来说非常重要......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:32:16.277

您需要包含`algorithmObject.h`in `gui.h`，因此当编译器看到尝试使用 an 的代码时`algorithmObject`，它已经看到了`algorithmObject`该类的声明。

在您尝试使用它*之前*，始终包含在源文件中*可以避免*这种情况，因此您需要：`algorithmObject.h`

 *```
#include "algorithmObject.h"
#include "gui.h" 
```

尽管长期以来这在很多 C 语言中都是相当标准的做法，但我（个人）认为它相当容易出错且脆弱，所以我通常更喜欢如果一个头文件依赖于其他头文件，它本身包含它们，所以有将其包含在源文件中时无需满足任何先决条件。*

# c - 'int main(){ return(0); 上的浮点异常 (SIGFPE); }'

> ID：12570374
> 
> 赞同：72
> 
> 时间：2012-09-24T18:02:35.640
> 
> 标签：c, linux, gcc, elf, sigfpe

我正在尝试为两种不同的 Linux 环境构建一个简单的 C 程序。在一台设备上程序运行良好，在另一台设备上程序生成浮点异常。该程序除了从 main 返回 0 之外什么都不做，这让我相信启动代码可能与 ABI 有一些不兼容？

该程序使用 gcc 编译，具有以下构建规范：

> 使用内置规范。目标：i386-redhat-linux 配置：../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads =posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++,objc,obj-c++ ,java,fortran,ada --enable-java-awt=gtk --disable-dssi --disable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4。 2.0/jre --with-cpu=generic --host=i386-redhat-linux 线程模型：posix gcc 4.1.2 20080704 (Red Hat 4.1.2-52)

程序源码如下：

```
int main()
{
        return(0);
} 
```

在 Celeron 设备上，该程序在 GDB 下生成以下内容：

```
[root@n00200C30AA2F jrn]# /jrn/gdb fail GNU gdb Red Hat Linux (5.3post-0.20021129.18rh) (gdb) run Starting program: /jrn/fail 

Program received signal SIGFPE, Arithmetic exception. 0x40001cce in ?? () (gdb) bt
#0  0x40001cce in ?? ()
#1  0x4000c6b0 in ?? ()
#2  0x40000cb5 in ?? () 
```

以下是我可以收集的详细信息，以帮助了解正在发生的事情：

```
CELERON:  ( fails on this device )
2.6.8 #21 Mon Oct 1 11:41:47 PDT 2007 i686 i686 i386 GNU/Linux
============
[root@n00200C30AA2F proc]# cat cpuinfo 
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 9
model name      : Intel(R) Celeron(R) M processor          600MHz
stepping        : 5
cpu MHz         : 599.925
cache size      : 512 KB
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 2
wp              : yes
flags           : fpu vme de pse tsc msr mce cx8 sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 tm pbe
bogomips        : 1179.64

GNU C Library stable release version 2.3.2, by Roland McGrath et al.
Compiled by GNU CC version 3.2.2 20030222 (Red Hat Linux 3.2.2-5).
Compiled on a Linux 2.4.20 system on 2003-03-13.
Available extensions:
        GNU libio by Per Bothner
        crypt add-on version 2.1 by Michael Glad and others
        linuxthreads-0.10 by Xavier Leroy
        BIND-8.2.3-T5B
        libthread_db work sponsored by Alpha Processor Inc
        NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk

ATOM:  ( works fine on this device )
2.6.35 #25 SMP Mon Mar 12 09:02:45 PDT 2012 i686 i686 i386 GNU/Linux
==========
[root@n00E04B36ECE5 ~]# cat /proc/cpuinfo 
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 28
model name      : Genuine Intel(R) CPU N270   @ 1.60GHz
stepping        : 2
cpu MHz         : 1599.874
cache size      : 512 KB
fdiv_bug        : no
hlt_bug         : no
f00f_bug        : no
coma_bug        : no
fpu             : yes
fpu_exception   : yes
cpuid level     : 10
wp              : yes
flags           : fpu vme de tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe nx constant_tsc up arch_perfmon pebs bts aperfmperf pni dtes64 monitor ds_cpl est tm2 ssse3 xtpr pdcm movbe lahf_lm
bogomips        : 3199.74
clflush size    : 64
cache_alignment : 64
address sizes   : 32 bits physical, 32 bits virtual
power management:

GNU C Library stable release version 2.5, by Roland McGrath et al.
Compiled by GNU CC version 4.1.2 20080704 (Red Hat 4.1.2-44).
Compiled on a Linux 2.6.9 system on 2009-09-02.
Available extensions:
        The C stubs add-on version 2.1.2.
        crypt add-on version 2.1 by Michael Glad and others
        GNU Libidn by Simon Josefsson
        GNU libio by Per Bothner
        NIS(YP)/NIS+ NSS modules 0.19 by Thorsten Kukuk
        Native POSIX Threads Library by Ulrich Drepper et al
        BIND-8.2.3-T5B
        RT using linux kernel aio
Thread-local storage support included. 
```

我可以做些什么来确定是什么导致了这个问题？尝试静态链接到某个版本的 libc 怎么样？

在 GDB 下发生故障后，我执行：

> ```
> (gdb) x/1i $eip
> 0x40001cce:     divl   0x164(%ecx) 
> ```

```
(gdb) info reg
eax            0x6c994f 7117135
ecx            0x40012858       1073817688
edx            0x0      0
ebx            0x40012680       1073817216
esp            0xbffff740       0xbffff740
ebp            0xbffff898       0xbffff898
esi            0x8049580        134518144
edi            0x400125cc       1073817036
eip            0x40001cce       0x40001cce
eflags         0x10246  66118
cs             0x73     115
ss             0x7b     123
ds             0x7b     123
es             0x7b     123
fs             0x0      0
gs             0x0      0
(gdb) x/1wx 0x164+$ecx
0x400129bc:     0x00000000
(gdb) 
```

根据我收到的帮助，由于某种原因，libc 启动代码似乎被 0 除。

现在的问题是，是什么导致了这种明显的不良行为？某些东西必须与其他东西不兼容？

**装配输出：**

```
[jrn@localhost ~]$ more fail.s
        .file   "fail.c"
        .text
.globl main
        .type   main, @function
main:
        leal    4(%esp), %ecx
        andl    $-16, %esp
        pushl   -4(%ecx)
        pushl   %ebp
        movl    %esp, %ebp
        pushl   %ecx
        movl    $0, %eax
        popl    %ecx
        popl    %ebp
        leal    -4(%ecx), %esp
        ret
        .size   main, .-main
        .ident  "GCC: (GNU) 4.1.2 20080704 (Red Hat 4.1.2-52)"
        .section        .note.GNU-stack,"",@progbits 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-25T01:22:21.917

这听起来像是一个很长的镜头......但是你可以试试下面的吗？

```
$ readelf -a fail 
```

并寻找 GNU_HASH 动态标签？我的猜测是二进制文件使用`GNU_HASH`，而您的`ld.so`年龄太小，无法理解。对 GNU hash 部分的支持在 2006 年左右被添加到 glibc 中，并且主线发行版在 2007 年或 2008 年左右开始仅支持 GNU-hash。您的 Centrino`glibc`是从*2003 年开始*的，它早于 GNU hashing。

如果`ld.so`它不理解 GNU 哈希，它将尝试使用旧的 ELF 哈希部分来代替，它是空的。特别是，我怀疑您的崩溃发生在[以下行`elf/do-lookup.h`](http://repo.or.cz/w/glibc.git/blob/85c54a327d4c05381603eb49792afa5ad5dbe46c:/elf/do-lookup.h#l74)：

```
for (symidx = map->l_buckets[hash % map->l_nbuckets]; 
```

由于链接器可能不理解 GNU 哈希，`l_nbuckets`因此将为 0，从而导致崩溃。请注意，这`map`是一个包含大约 100 个结构元素的大型结构，并且`l_nbuckets`在较新的结构中大约是第 90 个成员`ld.so`( `0x164 = 4*89`，所以在较旧的`ld.so`情况下，它可能正是这个成员)。

要查看这是否确实是*问题*`-Wl,--hash-style=sysv`所在，请使用or构建`-Wl,--hash-style=both`并查看崩溃是否消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T22:37:27.953

由于它适用于 ATOM 但不适用于较旧的 Celeron，我认为问题可能出在编译器优化生成的 Celeron 无法执行的代码上。尝试使用标志 -O0 进行编译。此外，我建议添加 -march=i686 以明确说明架构。此外，为了帮助隔离问题，我还建议禁用与 C++ 运行时和 JAVA 的链接。

您是否构建了这个测试程序并在每个设备上运行它，或者您是否为每个设备构建了不同的可执行文件？如果您正在构建一个可执行文件，您可能在两台设备上或在设备与您的构建机器上具有不同版本的 libc、libstdc++。

# facebook - 无法访问的 URL，在 Facebook 评论插件上。App ID 是正确的...不知道该怎么做

> ID：12570375
> 
> 赞同：0
> 
> 时间：2012-09-24T18:02:36.257
> 
> 标签：facebook, iframe, meta-tags, facebook-comments

[http://www.escapingaspinningroom.com/photos/photo/193](http://www.escapingaspinningroom.com/photos/photo/193) 是我对 iFrame 进行评论的网页。从字面上看，页面上唯一改变的是描述和图像ID。其他一切都几乎相同。

[http://www.escapingaspinningroom.com/photos/photo/192](http://www.escapingaspinningroom.com/photos/photo/192)

此页面显示错误。我不知道我在这里做错了什么。

这是我的元标记：

```
<meta property="og:type" content="easroom:photo" /> 
<meta property="og:title" content="Escaping A Spinning Room | Photo" /> 
<meta property="og:image" content="<?php echo URL . "images/" . $photo->url ?>" /> 
<meta property="og:description" content="<?echo $photo->disc?>" /> 
<meta property="og:url" content="http://www.escapingaspinningroom.com/photos/photo/<? echo    $this->picid?>" />
<meta property="fb:app_id" content="{36532270688XXXX}"/> 
```

以及它们在我的网页上的样子（X 是故意的），

这就是他们在完成页面上的样子

```
<meta property="og:type" content="easroom:photo" /> 
<meta property="og:title" content="Escaping A Spinning Room | Photo" /> 
<meta property="og:image" content="http://www.escapingaspinningroom.com/images/13479919974.jpg" /> 
<meta property="og:description" content="Barry looking at the city after a long night of drinking. Actor Michael Souto." /> 
<meta property="og:url" content="http://www.escapingaspinningroom.com/photos/photo/189" />
<meta property="fb:app_id" content="{36532270688XXXX}"/>
<meta charset="utf-8"> 
```

它位于`<body>`标签之后

```
 <div id="fb-root"></div>
   <script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=36532270688XXXX";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

这是注释代码所在的位置。

```
 <div class="fb-comments" data-href="http://www.escapingaspinningroom.com/photos/photo/<? echo $this->picid ?>" data-num-posts="4" data-width="310" data-colorscheme="dark"></div> 
```

我尝试使用他们的调试器工具，但它不会抓取我的网站。

我对这些 Facebook 评论有很多麻烦。如果你们有任何不错的选择，而不是 Disqus，那就太好了。太免费了哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T23:34:57.773

首先，您的 fb:app_id 值不正确，您有

```
<meta property="fb:app_id" content="{365322706881496}"/> 
```

它应该是

```
<meta property="fb:app_id" content="365322706881496"/> 
```

尝试修复该问题，然后查看[Facebook 的调试工具](https://developers.facebook.com/tools/debug)是否可以正确访问该页面

# ios - 我的应用没有出现在 iOS6 的位置设置列表中

> ID：12570376
> 
> 赞同：0
> 
> 时间：2012-09-24T18:02:44.323
> 
> 标签：ios, core-location, cllocationmanager, ios6

我怎样才能让它出现在那个列表中？启动位置服务不起作用。我的 CLLocationManager 在 iOS6 中没有收到任何东西。在 iOS 4 和 5 中运行良好。

怎么了？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:16:28.593

将 CFBundleDisplayName 添加到您的 info.plist（这就是为我们所做的）。当你在那里时，你可能想要为 NSLocationUsageDescription 添加一个条目。

此外，您可能需要更新您的 CLLocationManagerDelegate`locationManager:didUpdateLocations:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:27:40.773

我尝试了 plist 文件中的所有内容、清理、重建、新目标、配置等，等等。没有任何效果。但最后我已经修好了。我必须从头开始创建一个新的 Xcode 4.5 项目，重新配置它，逐个文件和逐个框架地手动添加框架。似乎我的旧 XCode 项目在内部与上一个 XCode 或其他东西不兼容......也许是一个错误。我还不知道发生了什么，但我在这里写这篇文章是因为也许它可以节省某人接下来 10 个小时的工作。

# php - 如何将额外的参数传递给 routeMatch 对象？

> ID：12570377
> 
> 赞同：1
> 
> 时间：2012-09-24T18:02:45.410
> 
> 标签：php, zend-framework2

我正在尝试对控制器进行单元测试，但不知道如何将一些额外的参数传递给 routeMatch 对象。

[我在http://devblog.x2k.co.uk/unit-testing-a-zend-framework-2-controller/](http://devblog.x2k.co.uk/unit-testing-a-zend-framework-2-controller/)和[http://devblog.x2k.co.uk/getting-the-](http://devblog.x2k.co.uk/getting-the-servicemanager-into-the-test-environment-and-dependency-injection/)关注了 tomoram 的帖子[servicemanager-into-the-test-environment-and-dependency-injection/](http://devblog.x2k.co.uk/getting-the-servicemanager-into-the-test-environment-and-dependency-injection/)，但是当我尝试向 /album/edit/1 发送请求时，例如，它会引发以下异常：

```
Zend\Mvc\Exception\DomainException: Url plugin requires that controller event compose a router; none found 
```

这是我的 PHPUnit 引导程序：

```
class Bootstrap
{
    static $serviceManager;
    static $di;

    static public function go()
    {
        include 'init_autoloader.php';

        $config = include 'config/application.config.php';
        // append some testing configuration
        $config['module_listener_options']['config_static_paths'] = array(getcwd() . '/config/test.config.php');

        // append some module-specific testing configuration
        if (file_exists(__DIR__ . '/config/test.config.php')) {
            $moduleConfig = include __DIR__ . '/config/test.config.php';
            array_unshift($config['module_listener_options']['config_static_paths'], $moduleConfig);
        }

        $serviceManager = Application::init($config)->getServiceManager();

        self::$serviceManager = $serviceManager;

        // Setup Di
        $di = new Di();

        $di->instanceManager()->addTypePreference('Zend\ServiceManager\ServiceLocatorInterface', 'Zend\ServiceManager\ServiceManager');
        $di->instanceManager()->addTypePreference('Zend\EventManager\EventManagerInterface', 'Zend\EventManager\EventManager');
        $di->instanceManager()->addTypePreference('Zend\EventManager\SharedEventManagerInterface', 'Zend\EventManager\SharedEventManager');

        self::$di = $di;
    }

    static public function getServiceManager()
    {
        return self::$serviceManager;
    }

    static public function getDi()
    {
        return self::$di;
    }

}

Bootstrap::go(); 
```

基本上，我们正在创造一个`Zend\Mvc\Application`环境。

My`PHPUnit_Framework_TestCase`包含在一个自定义类中，如下所示：

```
abstract class ControllerTestCase extends TestCase
{
    /**
     * The ActionController we are testing
     *
     * @var Zend\Mvc\Controller\AbstractActionController
     */
    protected $controller;

    /**
     * A request object
     *
     * @var Zend\Http\Request
     */
    protected $request;

    /**
     * A response object
     *
     * @var Zend\Http\Response
     */
    protected $response;

    /**
     * The matched route for the controller
     *
     * @var Zend\Mvc\Router\RouteMatch
     */
    protected $routeMatch;

    /**
     * An MVC event to be assigned to the controller
     *
     * @var Zend\Mvc\MvcEvent
     */
    protected $event;

    /**
     * The Controller fully qualified domain name, so each ControllerTestCase can create an instance
     * of the tested controller
     *
     * @var string
     */
    protected $controllerFQDN;

    /**
     * The route to the controller, as defined in the configuration files
     *
     * @var string
     */
    protected $controllerRoute;

    public function setup()
    {
        parent::setup();

        $di = \Bootstrap::getDi();

        // Create a Controller and set some properties
        $this->controller = $di->newInstance($this->controllerFQDN);

        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => $this->controllerRoute));
        $this->event      = new MvcEvent();

        $this->event->setRouteMatch($this->routeMatch);

        $this->controller->setEvent($this->event);
        $this->controller->setServiceLocator(\Bootstrap::getServiceManager());
    }

    public function tearDown()
    {
        parent::tearDown();
        unset($this->controller);
        unset($this->request);
        unset($this->routeMatch);
        unset($this->event);
    }
} 
```

我们创建了一个控制器实例和一个带有 RouteMatch 的请求。

测试代码：

```
public function testEditActionWithGetRequest()
{
    // Dispatch the edit action
    $this->routeMatch->setParam('action', 'edit');
    $this->routeMatch->setParam('id', $album->id);
    $result = $this->controller->dispatch($this->request, $this->response);

    // rest of the code isn't executed
} 
```

我不确定我在这里缺少什么。它可以是测试引导程序的任何配置吗？或者我应该以其他方式传递参数？还是我忘记实例化某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:34:24.280

我为解决这个问题所做的是将`Application::init()`配置从方法`Bootstrap`移至`setUp()`方法。加载需要一段时间，但它可以工作。

我`Bootstrap`只有配置自动加载器所需的代码，而该`setUp()`方法与旧`Bootstrap::go()`代码类似。

# opengl-es - OpenGL ES 2.0 GLSL texture2D 未绑定时返回值

> ID：12570379
> 
> 赞同：2
> 
> 时间：2012-09-24T18:03:04.357
> 
> 标签：opengl-es, return, default, shader, textures

在以下代码中：

```
gl_FragColor = vColor * texture2D(u_Texture, v_TexCoordinate); 
```

我注意到如果 u_Texture 未绑定，则 texture2D 返回的默认值是白色 (1,1,1,1)。

将我的着色器基于这个事实是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:29:56.333

我不会这么想的。

我见过默认值为黑色的其他实例。在采样器使用的内存是一段未初始化的视频内存的情况下，它理论上可以是任何颜色，这取决于 opengl 实现

# asp.net - 更新 Web 代码会导致 Designer.cs 文件将 WebControls.ListItem 替换为 HtmlControls.HtmlGenericControl

> ID：12570380
> 
> 赞同：3
> 
> 时间：2012-09-24T18:03:04.823
> 
> 标签：asp.net, visual-studio-2010, designer

我有一个在 Visual Studio 2005 中创建的旧版 Web 项目，该项目最近已升级到 Visual Studio 2010。它针对 .net 2.0 构建

它包含一个 ascx 用户控件，其中包含一个看起来像

```
<select runat="server" id="foo">
    <option runat="server" id="bar" value="1">1</option>
</select> 
```

原始设计器代码如下所示：

```
protected global::System.Web.UI.WebControls.ListItem bar; 
```

每当我编辑 .ascx 文件中的任何内容（甚至添加换行符）时，设计器都会自动更新为如下所示：

```
protected global::System.Web.UI.HtmlControls.HtmlGenericControl bar; 
```

此时，页面停止工作并为我提供以下运行时错误：

> 说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。
> 
> 解析器错误消息：基类包含字段“bar”，但其类型 (System.Web.UI.HtmlControls.HtmlGenericControl) 与控件类型 (System.Web.UI.WebControls.ListItem) 不兼容。

然后我必须手动编辑 ascx.designer.cs 文件以修复 Visual Studio 造成的损坏。

除了将所有遗留选项选择片段重写为 asp listcontrol 对象之外，我能做些什么来阻止 Visual Studio 吃掉我的设计器文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-20T19:33:05.287

我有同样的问题。我更改了我的 ASP.net 项目的某些部分，然后我遇到了这个问题：

```
The base class includes the field 'Option1', 
but its type (System.Web.UI.HtmlControls.HtmlGenericControl) is not compatible 
with the type of control (System.Web.UI.WebControls.ListItem). 
```

为了解决这个问题，我修改了这个文件`<MyFileName>.aspx.designer.cs`，我搜索`Option1`并替换了

```
protected global::System.Web.UI.HtmlControls.HtmlGenericControl.ListItem Option1; 
```

和

```
protected global::System.Web.UI.WebControls.ListItem Option1; 
```

最后，我建立了我的解决方案，我的问题已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:15:11.177

您的 HTML 不正确。

`<option>`是 的孩子`<select>`，但您`<select>`是 的孩子`<option>`，这是错误的。

它应该是：

```
<select runat="server" id="foo">
    <option runat="server" id="bar" value="1">1</option>
</select> 
```

请注意，该`title=""`属性对`<option>`元素没有影响。

# html - 元素可以包含链接和标题吗？

> ID：12570386
> 
> 赞同：2
> 
> 时间：2012-09-24T18:03:20.720
> 
> 标签：html

我可以在表格内的元素中填充`<a>`和`<h2>`元素吗？`<caption>`在浏览器中看起来不错，但可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:07:57.900

当然。任何流内容——即你可以直接拥有的相同元素`<body>`——除了`<table>`在`<caption>`元素中都可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:45:20.833

根据规范，[`caption`元素](http://www.w3.org/TR/html401/struct/tables.html#edef-CAPTION)只能包含内联元素。所以`<a>`可以，`<h2>`不是。应该没有理由在此处使用`h2`标记，因为`caption`元素本身是类似标题的；使用 CSS，您可以根据需要在视觉上将其样式设置为更像标题。

# c# - 不能两次存根 ReadOnly 属性？

> ID：12570393
> 
> 赞同：1
> 
> 时间：2012-09-24T18:03:47.623
> 
> 标签：c#, .net, nunit, rhino-mocks

我有以下代码。我有一些合理的理由对该属性进行两次存根（参见下面的解释）。看起来它只让我存根一次。

```
private IStatus _status;

[SetUp()]
public void Setup() {
  this._status = MockRepository.GenerateStub<IStatus>();
  this._status.Stub(x => x.Connected()).Return(true);
  // This next line would usually be in the Setup for a subclass
  this._status.Stub(x => x.Connected()).Return(false);
}

[Test()]
public void TestTheTestFramework() {
  Assert.IsFalse(this._status.Connected()); // Fails...
}

public interface IStatus {
  bool Connected { get; }
} 
```

我尝试下载最新[版本](http://builds.hibernatingrhinos.com/builds/Rhino-Mocks)（3.6 build 21），但仍然有同样的问题。关于为什么我不能这样做的任何想法？我尝试将`Connected`属性更改`IStatus`为函数，但测试仍然失败。我在 VB.Net 中得到相同的行为......错误？

**双截断的解释**

我正在围绕继承构建我的测试。这样我就可以只做一次通用设置代码，使用注入的模拟依赖项来模拟不同的条件。我可能会提供一个基本/默认存根值（例如，是的，我们已连接），我想在子类中覆盖它，以在连接断开时测试 SUT 的行为。我通常会得到这样的代码。

```
[TestFixture()]
public class WhenPublishingAMessage {

  // Common setup, inject SUT with mocked dependencies, etc...

  [Test()]
  public void ShouldAlwaysWriteLogMessage {
    //Example of test that would pass for any sub-condition
  }

  [TestFixture()]
  public class AndNoConnection : WhenPublishingAMessage {
    // Do any additional setup, stub dependencies to simulate no connection
    // Run tests for this condition
  }

  [TestFixture()]
  public class AndHaveConnection : WhenPublishingAMessage {
    // Do any additional setup and run tests for this condition
  }
} 
```

**编辑**

Rhino Mocks google group 上的这篇[文章](https://groups.google.com/d/msg/RhinoMocks/cJcF_EAjrb8/jU7NKZm_ZLgJ)可能会有所帮助。看起来我可能需要打电话`this._status.BackToRecord();`来重置状态，可以这么说......另外，`.Repeat.Any()`加入第二个存根语句似乎也有帮助。稍后我将不得不发布更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:49:14.073

您可以在第一个结果上指定 .Repeat.Once() ，以便将其使用一次，然后再使用下一个，如其他[堆栈溢出问题中所述](https://stackoverflow.com/questions/5609589/ordering-method-return-values-with-rhino-mock-stubs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T16:57:37.863

总而言之，可能有三个不同的答案：

### 塔尔马里斯的回答：

`.Repeat.Times(n)`使用、`.Repeat.Once()`、等指定在第一个存根上返回的特定次数`.Repeat.Twice()`。例如：

`this._status.Stub(x => x.Connected()).Return(true).Repeat.Once();` `this._status.Stub(x => x.Connected()).Return(false);`

如果我知道在我改变它的行为之前存根将被调用的次数（例如，它只在构造函数中被调用一次），这个方法就会很好地工作。

### 重置模拟对象

我不喜欢这种方法，因为我想避免（至少对我而言）更麻烦的 Expect/Verify Record/Replay 类型语法。它是为了[回应](https://groups.google.com/d/msg/RhinoMocks/Kfio_v-8Fbs/hUD1oonKI34J)我在 Rhino Mocks Google 小组中与此问题同名的帖子而向我推荐的。

```
this._status.Stub(x => x.Connected).Return(true);

this._status.GetMockRepository().BackToRecordAll();
this._status.GetMockRepository().ReplayAll();

this._status.Stub(x => x.Connected).Return(false); 
```

### 使用神奇的 Repeat.Any

我发现`.Repeat.Any()`在第二个存根上使用会覆盖第一个存根......我感觉有点糟糕添加一些额外的“魔术”代码以使其工作，但在你不知道多久告诉第一个存根的情况下要返回，此选项将起作用。

```
this._status.Stub(x => x.Connected()).Return(true);
this._status.Stub(x => x.Connected()).Return(false).Repeat.Any(); 
```

注意：你不能做`.Repeat.Any()`超过一次。

# macos - 如何使用 GLFW 轮询 libdispatch 块中的事件？

> ID：12570394
> 
> 赞同：2
> 
> 时间：2012-09-24T18:03:47.857
> 
> 标签：macos, opengl, glfw, libdispatch

跟进[如何将 GLUT 与 libdispatch 一起使用的答案？](https://stackoverflow.com/q/12553563/64860), 我现在改用 GLFW —</p>

以下代码设置了一个窗口，设置了一个计时器来轮询事件，并且随着时间的推移，将渲染更新排入队列：

```
#include <dispatch/dispatch.h>
#include <GL/glfw.h>

float t=0;

int main(void)
{
    dispatch_async(dispatch_get_main_queue(), ^{
        glfwInit();
        glfwDisable(GLFW_AUTO_POLL_EVENTS);
        glfwOpenWindow(320,200,8,8,8,8,8,0,GLFW_WINDOW);
    });

    // Periodically process window events --- this isn't working.
    dispatch_source_t windowEventTimer;
    windowEventTimer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, dispatch_get_main_queue());
    uint64_t nanoseconds = 100 * NSEC_PER_MSEC;
    dispatch_source_set_timer(windowEventTimer, dispatch_time(DISPATCH_TIME_NOW, nanoseconds), nanoseconds, 0);
    dispatch_source_set_event_handler(windowEventTimer, ^{
        glfwPollEvents();
    });
    dispatch_resume(windowEventTimer);

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        for(int i=0;i<200;++i)
        {
            // Enqueue a rendering update.
            dispatch_async(dispatch_get_main_queue(), ^{
                glClearColor (0.2f, 0.2f, 0.4f, 1.0f);
                glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

                glColor3f (1.0, 0.7, 0.7); 
                glBegin( GL_LINES );
                    glVertex3f(0,0,0);
                    glVertex3f(t+=0.02,.1,0);
                glEnd();

                glfwSwapBuffers();
            });
            // Wait a bit, to simulate complex calculations.
            sleep(1);
        }
    });

    dispatch_main();
} 
```

动画按预期更新，但窗口框架不绘制，窗口不响应事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:54:33.860

通过GLFW源码挖掘，我想我发现了问题：GLFW创建的Cocoa窗口的runloop需要从Thread 0执行，但是GLFW并不能保证发生在Thread 0上。（[关于执行这个问题](https://stackoverflow.com/questions/9761953/running-a-cocoa-gui-in-a-non-main-thread)`_glfwPlatformPollEvents()`报告了相同的症状[非 0 线程上的 Cocoa GUI](https://stackoverflow.com/questions/9761953/running-a-cocoa-gui-in-a-non-main-thread)。）

一种解决方法是使用与 CoreFoundation 相同的私有接口从`CFRunLoop`.

如果我将`dispatch_main()`上述代码中的调用替换为：

```
while(1)
{
    _dispatch_main_queue_callback_4CF(NULL);
    usleep(10000);
} 
```

...它按预期工作 - 窗口框架绘制，窗口处理事件。

* * *

为了改善这种骇人听闻的情况，我：

*   [提交功能请求以使其成为公共 libdispatch API](http://libdispatch.macosforge.org/trac/ticket/38)
*   [要求更新 GLFW 文档以提及 Mac 事件需要哪个线程](https://sourceforge.net/tracker/?func=detail&aid=3571373&group_id=72569&atid=534938)。

# c# - 使用实体框架将记录从一个实体复制到另一个实体的最简单方法是什么？

> ID：12570396
> 
> 赞同：1
> 
> 时间：2012-09-24T18:04:00.333
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个 SQL 表，其中包含我想使用 Entity Framework 移动到几乎相同的表的记录。即将记录从主表移动到存档表。

第二个表是原始表的超集，因为它有一些额外的字段来指定存档日期等......

是否有更简单的方法来完成此操作，然后手动匹配从原始实体到存档实体的每个字段？我查看了 Automapper，但发现它仅适用于内存实体，而不适用于我的 Iqueryable 数据。

TIA John（英孚新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:14:21.247

一种方法是使用 2 个实体类（一个用于事务表，一个用于存档表）并使用[AutoMapper](http://automapper.org/)从事务对象填充存档对象，并调用 SaveChanges。

# asp.net-mvc-3 - ASP.Net 异常显示文件路径

> ID：12570401
> 
> 赞同：1
> 
> 时间：2012-09-24T18:04:22.717
> 
> 标签：asp.net-mvc-3, exception

当我的 ASP.Net MVC 应用程序遇到错误时，即使我只部署了二进制文件，c# 类的完整文件路径也会显示在异常中。例如

在：C:\DevelopmentServer\MVC_Project\AccountManagement.cs 第 45 行

这个路径信息存储在哪里？它是否在编译的dll中，有没有办法删除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:06:08.293

我相信这存储在编译期间生成的 PDB 文件中，它反映了构建机器上代码的路径。

# autotools - 抑制不必要的输出到 config.h.in

> ID：12570402
> 
> 赞同：2
> 
> 时间：2012-09-24T18:04:23.203
> 
> 标签：autotools, autoconf, m4

当在 m4_foreach_w 中调用 AC_CHECK_HEADERS 时，autoheader(2.65) 似乎生成了一个伪造的模板。例如：

```
m4_foreach_w([hdr],[[foo.h] [bar.h]],
    [AC_DEFINE([HAVE_]m4_translit(m4_toupper(hdr),[/.],[__]),[1],
        [Define to 1 if ]hdr[ is available])]
    [AC_CHECK_HEADERS([hdr])]
) 
```

导致`config.h.in`（假设`AC_CONFIG_HEADERS([config.h])`）有一个模板：

```
/* Define to 1 if you have the <hdr> header file.*/
#undef HAVE_HDR 
```

有什么办法可以避免那个伪造的模板吗？请注意，`m4_foreach_w`正在宏内部调用，实际文本是`m4_foreach_w([hdr],[$1],`，我想知道我是否有 m4 引用问题，但我怀疑问题更根本。也就是说，我一直认为我错误地引用了 m4——但这似乎不是这里的问题。相反，`autoheader`正在扫描文本而不尊重`m4_foreach_w`. 我不认为模板会导致任何问题，但在最终的`config.h`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T08:23:31.560

注意`autoheader`不“扫描” `configure.ac`。相反，它以跟踪模式运行`configure.ac`，以便捕获对（由 间接调用）和对（由 调用）`m4`的低级调用。所以因为一切都经历过，不予理睬。但是，它以宏实际接收参数的方式查看参数。`AC_DEFINE_TRACE_LITERAL``AC_DEFINE``AH_OUTPUT``AC_CHECK_HEADERS``m4``autoheader``m4_foreach`

`AC_DEFINE`您可以通过跟踪对您的调用和`AC_CHECK_HEADERS`您的调用来查看代码中的问题`configure.ac`：

```
% 猫配置.ac
AC_INIT（somelib.so，1.0，someone@somewhere.com）
m4_foreach_w([hdr],[[foo.h] [bar.h]], [
     AC_DEFINE([HAVE_]m4_translit(m4_toupper(hdr),[/.],[__]),[1],
        [如果 ]hdr[ 可用，则定义为 1])
     AC_CHECK_HEADERS([hdr])
])
AC_CONFIG_HEADERS([config.h])
AC_OUTPUT
% 自动配置 -t AC_DEFINE -t AC_CHECK_HEADERS
configure.ac:3:AC_DEFINE:HAVE_FOO_H:1:如果 foo.h 可用，则定义为 1
配置.ac:3:AC_CHECK_HEADERS:hdr
如果您有 ANSI C 头文件，则 configure.ac:3:AC_DEFINE:STDC_HEADERS:1:Define 为 1。
configure.ac:3:AC_CHECK_HEADERS:sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h inttypes.h stdint.h unistd.h:::$ac_includes_default
configure.ac:3:AC_DEFINE:HAVE_BAR_H:1:如果 bar.h 可用，则定义为 1
配置.ac:3:AC_CHECK_HEADERS:hdr

```

所以我们看到它被作为参数`AC_CHECK_HEADERS`调用了两次。`hdr`在调用 AC_DEFINE 时，`hdr`已正确展开。那是因为`hdr`在您对 的调用中又被引用了一次`AC_CHECK_HEADERS`，从而阻止了它的扩展。

我会这样修复它：

```
m4_foreach_w([hdr],[[foo.h] [bar.h]], [
     AC_DEFINE([HAVE_]m4_translit(m4_toupper(hdr),[/.],[__]),[1],
        [Define to 1 if ]hdr[ is available])
     AC_CHECK_HEADERS(hdr)
]) 
```

（但这仍然假设名称 foo.h 和 bar.h 永远不会触发任何宏。）

# android - 警报管理器启动服务时，如何使用意图更新发送到服务的数据？

> ID：12570404
> 
> 赞同：5
> 
> 时间：2012-09-24T18:04:28.433
> 
> 标签：android, service, android-intent, alarmmanager

我正在编写一个 Android 应用程序，用户可以在其中选择几只股票来观看，如果预定义的警报条件匹配，则会收到警报。库存数据保存到自定义 Parcelable 类“警报”的 5 个对象（每个库存和条件一个对象）。定期数据更新是通过由 AlarmManager 启动的服务完成的。警报对象通过将它们放入 Intent 中传递给服务，该 Intent 放入 AlarmManager 的 PendingIntent 中。

```
 Intent intent = new Intent(this, UpdateService.class);
    Bundle b = new Bundle();
    saveAlertsToBundle(b);      
    intent.putExtras(b);
    intent.setData(Uri.parse("updateManager"));
    PendingIntent pendIntent = PendingIntent.getService(this,0,intent,0);

    // 1min intervall
    long intervall = DateUtils.MINUTE_IN_MILLIS * 1;
    // time of first start
    long firstStartDelay = DateUtils.SECOND_IN_MILLIS * 30;
    long firstStart = System.currentTimeMillis() + firstStartDelay;

    AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    // kill running
    am.cancel(pendIntent);
    //start new
    am.setRepeating(AlarmManager.RTC_WAKEUP,firstStart,intervall,pendIntent); 
```

我的问题是：

第一次启动服务时，只有一个警报对象传递给服务，一切正常。一旦存在更多警报对象，它们也需要传递给服务，但这不适用于上面的代码。服务不会收到带有额外警报对象的更新意图，而只会收到只有一个警报对象的初始意图。上面的代码正确地创建了一个包含附加警报对象的 Intent，但它们从未访问过服务。

所以我的问题是，如何将更新的意图传递给已经运行的 AlarmManager。

我已经尝试停止 AlarmManager（在 // kill running 注释处的行）并重新启动它，但这不起作用。也许是因为意图与他被创建时不持有相同的警报对象？我试图通过在意图的数据部分设置一个uri来解决这个问题，但这也没有帮助。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:33:50.757

你的问题是工作方式`PendingIntent`。系统管理一个`PengingIntent`s 池。当您的代码执行以下操作时：

```
PendingIntent pendIntent = PendingIntent.getService(this,0,intent,0); 
```

这会导致系统搜索`PendingIntent`与您传入的参数匹配的 a（在本例中为您的`Intent`. 但是，`PendingIntent`使用的匹配算法仅比较 的某些字段`Intent`以确定它是否是您要查找的字段。特别是，它**不比较 extras** . 所以这意味着在你创建了第一个`PendingIntent`之后，调用`PendingIntent.getService()`总是会`PendingIntent`从池中返回相同的（而不是创建一个新的，这是你想要的）。

为了在每次调用时都`PendingIntent.getService()`创建一个新的调用，请尝试使传递给调用的参数唯一，如下所示：`PendingIntent`

```
int requestCode = (int) System.currentTimeMillis(); // Create unique request code
PendingIntent pendIntent = PendingIntent.getService(this, requestCode, intent, 0); 
```

由于`requestCode`每次调用都会有所不同`PendingIntent.getService()`，这应该可以解决您的问题。

**编辑基于以下OP的评论**

您想取消现有警报并使用新数据创建一个新警报。在这种情况下，您不需要使用唯一标识符，因为您只想`PendingIntent`在池中有一个。但是，您想为此更改数据。尝试这个：

```
// Create a PendingIntent (or update the existing PendingIntent with new values
PendingIntent pendIntent = PendingIntent.getService(this, 0, intent,
                      PendingIntent.FLAG_UPDATE_CURRENT);

AlarmManager am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
// cancel any pending alarms
am.cancel(pendIntent);
//start new
am.setRepeating(AlarmManager.RTC_WAKEUP,firstStart,intervall,pendIntent); 
```

# salesforce - 创建子视觉力页面

> ID：12570407
> 
> 赞同：0
> 
> 时间：2012-09-24T18:04:50.300
> 
> 标签：salesforce, visualforce

我*在联系人记录中有一个名为“Gift_ c”的自定义对象。我想*用 visualforce 页面替换标准的“Gift _c”页面，以便我可以有选择地隐藏某些字段。

一切都非常简单。

```
<apex:page standardController="Gift__c" showHeader="true"   >
<apex:form >      
<apex:pageBlock title="" mode="Edit">
    <apex:pageMessages />
    <apex:pageBlockButtons >
        <apex:commandButton value="Save" action="{!save}"/>
        <apex:commandButton value="Cancel" action="{!cancel}"/>               
    </apex:pageBlockButtons>
    <apex:pageBlockSection title="Basic Information" columns="1">
        <apex:inputField value="{!Gift__c.Contact__c}"/>
        <apex:inputField value="{!Gift__c.GiftAmount__c}"/>
    </apex:pageBlockSection>        
</apex:pageBlock>
</apex:form> 
```

**挑战：**

通常，当您在联系人上并且我单击“新礼物”按钮*时，礼物*_c 对象中的 Contact_c 字段被填充为我刚来的人。如何确保在新的 Visual Force 页面上仍然发生这种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:20:58.213

实际上，只要您覆盖“新建/编辑”按钮以指向新页面，此功能就会开箱即用。

![覆盖按钮](../Images/9ce5b0faba122f4b46fa53da9e513f5a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T23:01:44.713

有所谓的 lkid hack。这是一个未记录的功能，即父级的值作为 GET 参数从相关列表上的“新建”按钮传递。因此，您可以通过这种方式提取参数，但人们普遍认为这是一个非常脆弱的解决方案。

或者这里发布了一个非常简洁的解决方案：[hack-to-find-field-ids-allows-a-default-ui-new-page-to-be-pre-populated](http://force201.wordpress.com/2012/01/22/hack-to-find-field-ids-allows-a-default-ui-new-page-to-be-pre-populated/)

此解决方案是屏幕抓取页面 html 中所有 lkid 值的标准编辑页面。这可能有朝一日停止工作的原因有很多，但它可能比逆向工程获取参数更强大。

# app-store - 路由应用覆盖文件

> ID：12570409
> 
> 赞同：56
> 
> 时间：2012-09-24T18:05:12.327
> 
> 标签：app-store, app-store-connect, appstore-approval

我最近向 App Store 提交了我的游戏。它最近已获得批准，并且正在“为 App Store 处理”。当我单击我的应用程序时，它会显示“路由应用程序覆盖文件”。只是好奇这到底意味着什么？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-09-24T22:16:15.053

“路由应用程序覆盖文件”是一个 GeoJSON 文件，它描述了公共交通路由应用程序的覆盖区域（用于 iOS 6 地图）。iTunes Connect 开发者指南说：

> 路由应用程序覆盖文件是`.geojson`指定应用程序支持的地理区域的文件。该文件只能有一个 MultiPolygon 元素。MultiPolygon 元素由至少一个 Polygon 组成。多边形至少包含四个坐标点。多边形起点和终点坐标点必须相同。

当然，如果您的应用与公共交通路线没有任何关系，您可以忽略这一点。

# php - 获取表的所有内容并使用 ajax 和 jquery 附加它

> ID：12570412
> 
> 赞同：0
> 
> 时间：2012-09-24T18:05:27.240
> 
> 标签：php, jquery, ajax

我做了一个简单的示例，说明如何使用 AJAX 插入并检索它，然后在获取它后将其附加到一个中`<div>`。但是我在获取表的所有内容时遇到了麻烦，它返回了一个空值。

```
<div id="wrap-body">
  <form action method="post">
    <input type="text" name="username" id="username">
    <input type="text" name="msg" id="msg">
    <input type="button" id="submit" value="Send">
  </form>
  <div id="info">
  </div>
</div> 
```

**jQuery：**

```
<script>
    $(document).ready(function (){
        $('#submit').click(function (){
            var username = $('#username').val();
            var msg = $('#msg').val();

            $.ajax({
                type: 'POST',
                url: 'get.php',
                dataType: 'json',
                data:'username='+username+'&msg='+msg,
                success: function (data){
                    $('#info').append("<p> you are:"+data.username+"</p> <p> your message  is:"+data.mesg);
                }
            });
        });
    });
</script> 
```

**PHP：**

```
<?php 
$host='localhost';
$username='root';
$password='12345';
$db = 'feeds';

$connect = mysql_connect($host,$username,$password) or die("cant connect");
mysql_select_db($db) or die("cant select the".$db);

$username = $_POST['username'];
$msg = $_POST['msg'];

$insert = "INSERT INTO info(user_name,message) VALUES('$username','$msg')";

if(@!mysql_query($insert)){
    die('error insertion'.mysql_error());
}

$get = "SELECT * FROM info ";

$result=mysql_query($get)or die(mysql_error());

while ($row = mysql_fetch_array($result))
{
    $return  = $row['user_name'];
    $return = $row['message'];
}
echo json_encode($return);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:10:24.820

您的 while 应该**创建数组，然后执行 json_encode**

试试下面的代码

```
$data=array();
while ($row = mysql_fetch_array($result))
{
$data[] = array(
   'username'=>$row['user_name'],
   'mesg'=>$row['message']
);
}

echo json_encode($data);
exit 
```

现在编写您的 javascript 成功处理程序，如下所示

```
$.ajax({
                type: 'POST',
                url: 'get.php',
                dataType: 'json',
                data:'username='+username+'&msg='+msg,
                success: function (data){
                   $.each(data, function(i, item) {
                     $('#info').append("<p> you are:"+data[i].username+"</p> <p> your message  is:"+data[i].mesg);
                   });​

                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:11:45.990

您必须解决几个问题，但您必须从返回与 ajax 调用所期望的类型相同的类型开始：

```
$return = array()
if ($row = mysql_fetch_array($result))
{
  $return['username']  = $row['user_name'];     
  $return['mesg'] = $row['message'];

}

echo json_encode($return); 
```

# python - Python：为两个列表的交集查找相应的索引

> ID：12570417
> 
> 赞同：5
> 
> 时间：2012-09-24T18:05:54.857
> 
> 标签：python, indices, set-intersection

这与我今天不久前提出的一个问题有些相关。我将两个列表的交集如下：

```
 inter = set(NNSRCfile['datetimenew']).intersection(catdate) 
```

我取交集的两个组件属于两个冗长的列表。是否可以获得相交值的索引？（即原始列表的索引）。

我不太确定从哪里开始。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T18:09:25.253

我会创建一个字典来保存原始索引：

```
ind_dict = dict((k,i) for i,k in enumerate(NNSRCfile['datetimenew'])) 
```

现在，像以前一样构建你的集合：

```
inter = set(ind_dict).intersection(catdate) 
```

现在，要获取索引列表：

```
indices = [ ind_dict[x] for x in inter ] 
```

# date - Silverlight MultiScaleTileSource（或 DeepZoom） - 可以换行日期线（无限水平平移）？

> ID：12570423
> 
> 赞同：0
> 
> 时间：2012-09-24T18:06:11.083
> 
> 标签：date, silverlight, word-wrap, deepzoom

我想知道是否可以使用 MultiScaleTileSource 实现约会的包装（或在您平移 'edge' 时包装地图）？或者任何使用它的实现？深度变焦？深地？

我真的需要 SilverLight 中的这个功能（以及离线模式 - 所以 Bing Maps Control 不会在这里做）。

所以我想知道是否有人成功地使用该控件实现了日期线的换行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:20:30.553

这个问题有一个解决方案：

[http://research.microsoft.com/en-us/um/redmond/groups/ivm/HDViewSL/](http://research.microsoft.com/en-us/um/redmond/groups/ivm/HDViewSL/)

HDViewSL 提供此功能。

# c++ - 如何在不将它们作为参数传递的情况下获取调用者的文件名和行号？

> ID：12570425
> 
> 赞同：1
> 
> 时间：2012-09-24T18:06:19.100
> 
> 标签：c++, java-native-interface

我有三个文件`foo1`,`foo2`和`foo3`.

`foo2`并`foo3`调用`foo1`.

我试图让 foo1 检测调用者的文件名和行号，而不将它们作为参数传递给函数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:09:47.977

这高度依赖于平台和编译器，通常无法完成。您的系统*可能*具有扩展功能，例如 GNU[`backtrace`](http://linux.die.net/man/3/backtrace)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:57:35.050

在运行本机程序时，文件和行的概念不再适用。程序只是发往处理器的命令流——函数名、变量名、行号、文件名，在编译过程中都丢失了。

从程序中提取调试信息几乎是不可能的。该程序必须经过专门编译才能附加调试信息。有时（如 Visual C++），调试信息被提取到一个单独的文件中 - 但您需要该文件并知道其格式，才能提取该信息。你只会得到调试信息。不是编译后的代码。

参数是要走的路。

# node.js - 如何让 zappajs 处理所有请求

> ID：12570426
> 
> 赞同：0
> 
> 时间：2012-09-24T18:06:23.477
> 
> 标签：node.js, coffeescript, express, zappa

express可以`app.all`像这样处理任何端点的所有方法

```
app.all '*', (req, res) ->
    # code goes here 
```

我找不到对应的 zappa。如果我尝试它会引发错误`@all`。zappajs中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:17:52.403

这适用于我的 Zappa 0.4.12 服务器：

```
@all '*': ->
    console.log( "all requests" ) 
```

# crystal-reports - 按摘要分组

> ID：12570427
> 
> 赞同：1
> 
> 时间：2012-09-24T18:06:25.670
> 
> 标签：crystal-reports

所以我想知道有多少货物运送了多少不同的物品。例如：我有一份按装运对数据进行分组的报告。即每次装运多件商品。现在我要做的是按物品数量对它们进行分组以回答这个问题：“有多少批货物运送了 4 件物品？”

像这样的东西：

```
5 Shipments with 2 items <--------------------- How do I get these groups?
    Shipment # 123443     Number of items: 2  \
    Shipment # 342312     Number of items: 2   \
    Shipment # 218245     Number of items: 2    = These are already groups with a
    Shipment # 342523     Number of items: 2   /   count of items per shipment
    Shipment # 345234     Number of items: 2  /

2 Shipments with 3 items  
    Shipment # 218154     Number of items: 3
    Shipment # 1518451    Number of items: 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:05:07.777

您必须在数据库端或通过 CR 中的 SQL 命令或 SQL 表达式来实现这一点。例如，类似下面的 SQL 表达式就可以工作：

```
(select count(item)
from shipment
where shipmentID = "shipment"."shipmentID") 
```

然后只需对这个新表达式进行分组，它将为您提供报告中每一行的每批货物的数量。

# html - HTML 流体（百分比宽度）无法正确缩放

> ID：12570429
> 
> 赞同：0
> 
> 时间：2012-09-24T18:06:30.867
> 
> 标签：html, css, responsive-design

我的 HTML 流畅网站无法在 iPhone 4/S/5 和 iPad 设备上正确缩放。我的最小容器 div 比例设置为 480px。我不明白为什么它不能正确缩放。可能在我的元数据中：initial-scale=1.0？

jsfiddle在这里：http: [//jsfiddle.net/CtPpg/2/](http://jsfiddle.net/CtPpg/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:19:24.707

难道你正在为你的最小宽度设置一个像素宽度？如果我错了，请纠正我，但它应该是一个百分比值，以使其真正流动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:39:54.150

ipad 的最大设备宽度为 1024，而 iphone 的最大设备宽度为 480 像素。您可能需要使用媒体查询来处理这两个设备。

平板电脑：`@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {`

苹果手机：`@media only screen and (max-device-width: 480px) {`

看看这个[jsfiddle](http://jsfiddle.net/CtPpg/6/)

变化：

```
 max-width: 480px; 
 /*max-width: 800px;  #### set your max width here #### */ 
```

# forms - 申请自动接受表格

> ID：12570430
> 
> 赞同：1
> 
> 时间：2012-09-24T18:06:40.370
> 
> 标签：forms, web

我学校的“开放式无线”网络让用户在登录网络之前接受协议。我每天都使用这个网络进行正常的学校工作，在我去其他任何地方之前这样做很烦人。

我想在我上网之前制作一个应用程序来自动接受这个。最好我想使用 Python 或 Java（因为我可以非常快速地用这两种语言输入一些东西）。

这是我想绕过的屏幕的屏幕截图。![在此处输入图像描述](../Images/80cd927c27e0699bdd2a002e0ac814be.png)

# c# - 计算 dataGridView 中列的可用宽度

> ID：12570432
> 
> 赞同：0
> 
> 时间：2012-09-24T18:06:45.133
> 
> 标签：c#, datagridview

我的问题很简单——数据绑定后我想设置所有列的宽度，这样它就不会水平滚动。像这样的东西：

```
 columnWidth = grid.width/grid.Columns.Count 
```

但是这个表达式不考虑我可以选择行的“gridView 的左侧部分”，它显示当前行。如何计算它的宽度？[(grid.width - X)/grid.Columns.Count]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:23:07.263

很容易做到这一点。只需将[DataGridView.AutoSizeColumnMode](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.autosizecolumnsmode.aspx)属性设置为`Fill`.

```
grid.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill; 
```

您可能需要明确要求网格调整列间距。我记不清了。但这很简单：

```
grid.AutoResizeColumns(); 
```

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewautosizecolumnsmode.aspx)，`Fill`将执行以下操作：

> 列宽调整，以便所有列的宽度完全填满控件的显示区域，只需要水平滚动以保持列宽高于 DataGridViewColumn.MinimumWidth 属性值。相对列宽由相对 DataGridViewColumn.FillWeight 属性值确定。

所以基本上，只要您没有任何带有 a 的列`MinimumWidth`会阻止它，这个属性就会完全符合您的要求。

**编辑：解决OP的评论：**

您始终可以创建一个简单的属性来向您报告该信息。就像是...

```
public int DataGridViewDeadSpaceWidth
{
    get
    {
        int x = grid.Width;
        foreach (DataGridViewColumn column in grid.Columns)
            x -= column.Width;

        return x;
    }
} 
```

您还可以使用它从 a 继承`DataGridView`并将属性自己添加到控件中。请注意，`DataGridView`您需要考虑的边界可能还有一些其他死区。

# c - 将数据从本地网页发送到本地运行的 C 程序

> ID：12570433
> 
> 赞同：0
> 
> 时间：2012-09-24T18:06:50.937
> 
> 标签：c, windows, web, cross-platform, ipc

我正在寻找最简单的（跨平台，但不一定是跨浏览器）代码，以**将**数据从本地网页发送到本地运行的 C（*不是*C++）应用程序。基本上，我有一个带有表单的 HTML 页面，我想以最简单的方式将数据从该表单发送到另一个进程。（我知道我可以相对轻松地从网页读取本地数据，尤其是现在使用 HTML5，但在 javascript 沙箱之外编写是一个谜。）

我知道出于安全考虑，浏览器很难做到这一点，我不想让我的机器受到攻击，但也许我可以在 C 应用程序中运行一个非常简单的服务器来接收提交的数据......要么方式，我不能运行任何标准的网络服务器，所以我需要一个 C 库/应用程序来为我做这件事。

我查看了 .hta 文件（似乎只适用于 Windows）和一些 C Web 服务器（我发现的都是 *nix 特定的）。一个类似的问题是如何[将数据从网页传输到服务器 c 程序](https://stackoverflow.com/questions/6826345/transfer-of-data-from-webpage-to-a-server-c-program)，除了用户允许使用 Java 和其他网络服务器平台（我必须使用 C）。

更新：有前途的图书馆：[https ://stackoverflow.com/questions/175507/cc-web-server-library](https://stackoverflow.com/questions/175507/c-c-web-server-library)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:54:53.430

你考虑过 FastCGI 吗？我有一个用 C 语言编写的快速 CGI 库，可能会有所帮助。它仍然需要大量工作，我不确定我是否想在生产环境中使用。

如果您发现任何错误或进行任何改进，请分享它们，以便它可以帮助其他人。

[https://github.com/manvscode/shrewd-cgi](https://github.com/manvscode/shrewd-cgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:22:04.083

如果你必须使用 c，你将不得不去底层处理所有关于*套接字*库的漂亮细节。（人们用高级语言抽象它是有原因的）。[在此处查看](http://www.pcs.cnu.edu/~dgame/sockets/sockets.html)带有服务器和客户端的 C 中 RPC 的一些示例代码。如果你能负担得起绑定到 C，例如使用 Tcl，我会在 tcl 脚本中实现服务器并将你的 C 函数绑定为 Tcl 命令。这样，您可以将内容直接传递给您的 c 方法，同时避免编写所有低级套接字代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:05:44.560

将所需数据从 Web 发送到系统的特定端口（例如端口 X）。然后使用以下命令在后台运行您的应用程序（例如 APP）：

```
nc -l X | ./APP 
```

当然你需要[nc](http://linux.die.net/man/1/nc)包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:41:19.363

您可以用 C 编写一个*非常简单*的Web 服务器，从中提供页面（避免安全问题），然后将表单发布到它。

# jquery - 从 JQuery 访问 MVC 3 Razor 对象值

> ID：12570435
> 
> 赞同：2
> 
> 时间：2012-09-24T18:06:57.570
> 
> 标签：jquery, asp.net-mvc-3, razor

我正在尝试在访问它的属性的 Razor 对象中嵌入一个 JQuery 字符串......像这样：

```
var propertyID = $(this).attr('id');  
var modelData = “@Model.InitialHistory.” + propertyID; 
```

modelData 应该看起来像这样：@Model.InitialHistory.Property_1;

（如果我输入 @Model.InitialHistory.Property_1; 在我的代码中它工作正常，只需要动态选择 razor 属性）

这样的事情甚至可能吗，还是我必须创建一个ajax调用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:10:37.463

我只是让 Model.InitialHistory 成为一个列表，然后在视图中循环遍历它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:10:20.267

你不能！

javascript-jQuery 是客户端脚本，而 razor 是服务器端代码。

# php - 上一个/下一个记录按钮 php/mysql 问题

> ID：12570438
> 
> 赞同：0
> 
> 时间：2012-09-24T18:07:18.087
> 
> 标签：php, mysql, html, sql

我的问题涉及我的下一个/上一个按钮。我可以让我的更新/删除按钮工作，但我已经准备好在处理下一个/上一个按钮时撕掉我的头发。任何帮助都会很壮观！这是我的代码。另外，我对 PHP 很陌生，所以如果这是不好的编码，请让我知道并指出正确的方向，以便我可以修复我的错误。谢谢！！！

```
session_start();

include "connectionfile.php";

if (isset($_POST['fname']) &&
isset($_POST['lname']) &&
isset($_POST['email']) &&
isset($_POST['login']) &&
isset($_POST['password']) &&
isset($_POST['super']) &&
isset($_POST['foldername']))
{
$id = get_post('id');
$fname = get_post('fname');
$lname = get_post('lname');
$email = get_post('email');
$login = get_post('login');
$password = hash('sha256', get_post('password'));
$super = get_post('super');
$foldername = get_post('foldername');

if ($_POST['submit']==0){

$query = mysql_query("SELECT * FROM `Logins` WHERE ID < '".$id."'  ORDER BY ID DESC LIMIT 1;");
while($row = mysql_fetch_array($query)){
   $id = $row['ID'];
   $fname = $row['fname'];
   $lname = $row['lname'];
   $email = $row['email'];
   $login = $row['login'];
   $password = $row['password'];
   $super = $row['super'];
   $foldername = $row['foldername'];

}
}else if ($_POST['submit']==1){
$query = "UPDATE Logins SET fname = '$fname', lname='$lname', email='$email".'@carouselclinical.com'."', login='$login', password='$password', super='$super', foldername='$foldername'";
$query .= "WHERE ID = '$id';";
if (!mysql_query($query, $connect))
echo "INSERT failed: $query<br />" .
mysql_error() . "<br /><br />";

}else if($_POST['submit']==2){

$delete_query = "DELETE FROM Logins WHERE ID = '".$id."';";
mysql_query($delete_query);
$rc = mysql_affected_rows();
echo "Rows Affected " . $rc;

}

if ($_POST['submit']==3){

$query = mysql_query("SELECT * FROM `Logins` WHERE ID= '". $id ."' ORDER BY ID ASC LIMIT 1;");
while($row = mysql_fetch_array($query)){
   $id = $row['ID'];
   $fname = $row['fname'];
   $lname = $row['lname'];
   $email = $row['email'];
   $login = $row['login'];
   $password = $row['password'];
   $super = $row['super'];
   $foldername = $row['foldername'];

}

}
}

mysql_close($connect);

function get_post($var)
{
return mysql_real_escape_string($_POST[$var]);
}
?>

<form action="" method="post"><pre>
id <input type="text" readonly="readonly" name="id" value="<?php echo "$id"; ?>" />
First Name <input type="text" name="fname" value="<?php echo "$fname"; ?>" />
Last Name <input type="text" name="lname" value="<?php echo "$lname"; ?>" />
Email <input type="text" name="email" value="<?php echo "$email"; ?>" /> There's no need to put @carouselclinical.com.
Login <input type="text" name="login" value="<?php echo "$login"; ?>"/>
Password <input type="text" name="password" value="<?php echo "$password"; ?>"/>
Super? <input type="text" name="super" value="<?php echo "$super"; ?>" />
foldername <input type="text" name="foldername" value="<?php echo "$foldername"; ?>" />
<button name="submit" value="0">Previous</button>
<button name="submit" value="1">UPDATE</button>
<button name="submit" value="2">Delete</button>
<button name="submit" value="3">Next</button>
</pre>
<a href="super.php">Home</a> <br />
<a href="logout.php">Log out</a>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:40:32.960

尝试在`else`上面添加一个 right `mysql_close($connect);`。我的猜测是，在初始页面加载时，您没有发布任何值，因此没有采取任何措施。`ID`如果您的 top 中没有定义，这将创建一个默认值`if`。

```
else{
$query = mysql_query("SELECT * FROM `Logins` ORDER BY ID ASC LIMIT 1;");
while($row = mysql_fetch_array($query)){
  $id = $row['ID'];
  $fname = $row['fname'];
  $lname = $row['lname'];
  $email = $row['email'];
  $login = $row['login'];
  $password = $row['password'];
  $super = $row['super'];
  $foldername = $row['foldername'];
} 
```

此外，在您的 上`if ($_POST['submit']==3)`，您需要将您的 更改`=`为`>`，`$query`以便获得下一条记录。当前，您将选择相同的 ID，而不是下一个更高的 ID。

```
$query = mysql_query("SELECT * FROM `Logins` WHERE ID > '". $id ."' ORDER BY ID ASC LIMIT 1;"); 
```

最后，在执行 Previous/Next 时，您还需要考虑`Previous`在第一个`ID`和`Next`最后一个时如何处理`id`，因为您将返回一个空的结果集`MySQL`。

# c++ - SDL 忽略我的主文件

> ID：12570440
> 
> 赞同：0
> 
> 时间：2012-09-24T18:07:25.940
> 
> 标签：c++, c, mingw, sdl, eclipse-cdt

我正在使用 MinGW 和 SDL 运行 Eclipse CDT 64 位。我已经读过 SDL '聪明地' 重新定义了 main 方法，并且有时添加 #undef main 以使用我自己的 main cpp 是精确的。我已经这样做了，但是当我尝试运行我的应用程序时，我的 main 完全被忽略了（我设置了一些断点以实现这一点）。

我的主要方法是这样的：

```
#include "SDL/SDL.h"
#include "SDL/SDL_image.h"

#undef main

using namespace std;

int main(int argc, char* argv[])
{

    if (SDL_Init(SDL_INIT_EVERYTHING) == -1) {
        printf("Error: %s\n", SDL_GetError());
        return 1;
    }

        SDL_WM_SetCaption( "MarioKong", NULL ); 
```

我在我的项目属性上定义了 MinGW C++ 链接器库，如下所示：mingw32、SDLMain、SDL、SDL_image。[我按照 ( lazyfoo](http://lazyfoo.net/SDL_tutorials/lesson01/windows/eclipse/index.php) )中所述的 SDL 安装说明进行操作

如何运行我的主文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-14T11:36:09.467

重新定义 main 的巧妙方法是在所有平台上都有相同的 main 函数，并且可以在任何地方使用相同的函数。所以没有#ifdef win32 WinMain else main 等。您可以在所有平台上平等地使用命令行参数。所以我的建议是坚持使用“int main(int argc, char* argv[])”，不要使用#undef main 命令

# mysql - 字符串查找优化建议

> ID：12570441
> 
> 赞同：0
> 
> 时间：2012-09-24T18:07:26.563
> 
> 标签：mysql, django, algorithm, lookup, backend

我们有以下 MySQL 数据库表，其中包含大约 75,000 个条目。表中的每个条目都代表系统中的一个符号，可以为其检索更多数据。出于自动完成目的查询此表 - 用户查找一个符号，然后将其与符号的名称或其标签（分号分隔的字符串列表）匹配。当用户选择正确的符号时，会获取相关数据。这是表的描述：

```
CREATE TABLE `symbols` (  
  `id` int(11) NOT NULL AUTO_INCREMENT,   
  `name` varchar(512) NOT NULL,  
  `tags` varchar(512) DEFAULT NULL,  
  `type` enum('1','2','3','4','5','6','7','8','9') NOT NULL,  
  `popularity` int(11) DEFAULT '0',  
  PRIMARY KEY (`id`),  
  UNIQUE KEY `uc_symbol_name` (`type`,`symbol`),  
  KEY `symbol_idx` (`symbol`),  
  KEY `type_popularity_idx` (`type`,`popularity`)  
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

上表与大量数据一起存储在后端机器上，后端机器通过 JSON API 提供这些数据。目前，我们的前端 JavaScript 代码直接在 AJAX 中查询后端服务器以进行自动完成。相反，为了加快速度，我们希望在提供前端服务的服务器上创建符号表的本地缓存版本（前端是用 django 编写的）。这是可能的，因为该表包含不到 100,000 个符号，并且该表大约每分钟更新一次。此外，它将允许我们实现更好的匹配算法，如 Levenshtein 距离。

您将如何创建这种类型的缓存符号表？显然，查找必须在代码中进行（可能是 Python），但是您将如何存储数据，以及如何每分钟同步一次？我们在 django 前端服务器上运行了一个 Redis 服务器，但这引入了持久性问题......任何想法都非常欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:12:37.030

只需使用一个简单的哈希表，以及“最后更新时间”。每次在哈希中查找时，请检查“最后更新”时间。如果超过一分钟，则转储散列中的数据并从数据库重新加载。当然，你必须确保避免竞争条件......

还有其他选择，但这是最简单的方法，并且最容易正确编码。如果您发现无法接受每分钟处理一个事务而导致大型数据库操作的额外延迟是不可接受的，那么您可以想出一些更复杂的东西（例如在后台线程上异步运行数据库操作）。要为这种可能性做准备，请将此代码封装在一个类中。（然后，如果它太慢，您可以在不影响任何其他代码的情况下使用实现。）

当然，如果您需要更高的性能，您还可以做其他事情。您可以在数据库记录中添加一`updated_time`列，然后仅加载自上次以来已更新的记录。这真的会让事情变得更快吗？如果是这样，差异是否会大到足以影响？除非您尝试一下，否则无法知道。这就是为什么最好先尝试更简单的解决方案，看看它是否达到您的性能目标。

# c# - 如何使用 MVVM 模型根据从字典中获取的单元格值更改 WPF Datagrid 的行颜色？

> ID：12570443
> 
> 赞同：0
> 
> 时间：2012-09-24T18:07:42.727
> 
> 标签：c#, wpf, mvvm, wpfdatagrid

**背景：**

我有一个`ItemSource`绑定到`ObservableCollection<Dictionary<string, object>>`类型的 DataGrid。这背后的想法是允许 DataGrid 显示来自不同来源的一堆对象（这是一个日志收集程序，因此字段都因一种类型的日志而异）。我已经通过行为处理了列的生成，所以直到运行时我才知道这些列将是什么。

**问题：**

我想有一种方法来显示基于字段（列）的条目之间的共性，同时保持来自不同列的排序顺序。为此，我正在考虑使用颜色编码系统。如果 columnA 下的 cellA 中的值与 columnA 中 cellB 的值匹配，则单元格所属的两行对于在两个单元格中找到的值将获得相同的唯一颜色。用户还应该能够将列更改为颜色代码。

我一直在尝试使用一种风格来获得预期的效果，但遇到了一些麻烦。这是有问题的代码。

**主窗口.xaml**

```
<DataGrid...>
   <DataGrid.CellStyle>
      <Style TargetType="DataGridCell">
         <Setter Property="Background">
            <Setter.Value>
               <MultiBinding Converter="{StaticResource RowBackgroundConverter}">
                  <MultiBinding.Bindings>
                     <Binding RelativeSource="{RelativeSource Self}"/>
                     <Binding Path="ColumnName"/>
                     <Binding Path="."/>
                  </MultiBinding.Bindings>
               </MultiBinding>
            </Setter.Value>
         </Setter>
      </Style>
   </DataGrid.CellStyle>
</DataGrid> 
```

**行背景转换器**

```
/// <summary>
/// A converter that changes the background of a DataGrid based on a cell value
/// </summary>
public class RowBackgroundConverter : IMultiValueConverter
{

    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values[0] is DataGridCell)
        {
            DataGridCell cell= (DataGridCell)values[0];
            string columnName = (string)values[1];
            Dictionary<string, object> dataGridValues = (Dictionary<string, object>)values[2];

            // Check the cell's column name and compare it against the desired column name (columnName) Get the index of the value and get the mapped brush. (dataGridValues[columnName]) 

            return new SolidColorBrush(ColorMap.ColorDictionary[0]);

        }

        return SystemColors.AppWorkspaceColor;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在我的 ViewModel 中，我有一个 ColumnName 属性，用于对所需的列进行颜色编码。

问题是当我的多重绑定的上下文是数据网格单元格时，如何在视图模型中访问属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:58:46.607

如果我正确理解您的问题，您应该能够通过将绑定的相对源设置为 Window 来访问 ColumnName 属性。

这假定 Window 的 DataContext 已设置为包含 ColumnName 属性的 ViewModel。

像这样的东西应该工作：

```
{Binding Path=DataContext.ColumnName, 
         RelativeSource={RelativeSource AncestorType=Window}} 
```

# c# - 键是一对整数的字典

> ID：12570444
> 
> 赞同：11
> 
> 时间：2012-09-24T18:07:43.963
> 
> 标签：c#, .net, collections, dictionary

我需要使用字典，其中 TKey 是一对整数。

我想使用 KeyValuePair 作为我的键类型，我想知道**这是否是最好的方法**。

我也很想知道 Dictionary 是否会为两个具有相同整数的不同 KeyValuePair 对象创建单独的条目，**以及为什么**。

例如：

```
var myDictionary = new Dictionary<KeyValuePair<int,int>, string>();
myDictionary.Add(new KeyValuePair<int,int>(3, 3), "FirstItem");
myDictionary.Add(new KeyValuePair<int,int>(3, 3), "SecondItem");
// does the dictionary allow this? 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-24T18:09:21.217

也许你应该考虑使用`Tuple`

```
var myDictionary = new Dictionary<Tuple<int,int>, List<string>>(); 
myDictionary.Add(new Tuple<int,int>(3, 3), "FirstItem"); 
myDictionary.Add(new Tuple<int,int>(5, 5), "SecondItem"); 
```

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/dd270346.aspx)，`Tuple`对象`Equals`方法将使用两个`Tuple`对象的值。这将在`Tuple`外部字典中产生一个条目，并允许您存储每个键的值列表。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-01T13:58:23.973

只需使用 a`long`作为键并将两个`int`键组合起来

```
public class IntIntDict<T> : Dictionary<long, T>
{
    public void Add(int key1, int key2, T value)
    {
        Add((((long)key1) << 32) + key2, value);
    }

    //TODO: Overload other methods
} 
```

* * *

*更新*

C# 7 引入了新的[ValueTuple Struct](https://docs.microsoft.com/en-us/dotnet/api/system.valuetuple?view=netframework-4.8)以及[简化的元组语法](https://blogs.msdn.microsoft.com/mazhou/2017/05/26/c-7-series-part-1-value-tuples/)。这些元组对于复合键非常有用。您可以声明您的字典并添加如下条目：

```
var myDictionary = new Dictionary<(int, int), string>();
myDictionary.Add((3, 3), "FirstItem"); 
myDictionary.Add((5, 5), "SecondItem"); 
```

并查找这样的值

```
string result = myDictionary[(5, 5)]; 
```

或者

```
if (myDictionary.TryGetValue((5, 7), out string result)) {
    //TODO: use result
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-24T18:17:03.197

为了性能，字典需要一个生成唯一 GetHashValue 的键。

KeyValuePair 是一种值类型，不建议用于键。

[ValueType.GetHashCode](http://msdn.microsoft.com/en-us/library/system.valuetype.gethashcode.aspx)

> 如果调用派生类型的 GetHashCode 方法，则返回值不太可能适合用作哈希表中的键。此外，如果其中一个或多个字段的值发生变化，则返回值可能不适合用作哈希表中的键。无论哪种情况，请考虑编写您自己的 GetHashCode 方法实现，以更接近地表示该类型的哈希码的概念。

Point 也是一种值值类型，也不推荐用于键。
Tuple 还会生成很多重复的 GetHashCode，并不是一个好键。

最佳密钥是生成唯一密钥的密钥。

将 UInt16 i 和 UInt j 视为两个键。
它们如何组合并生成唯一的哈希？
轻松将它们组合成 UInt32。
UInt32 本身会生成一个完美的散列。

将两个 UInt16 打包成 UInt32 的算法是

```
(i * (UInt16.MaxValue + 1)) + j; 
```

但它甚至更快

```
(UInt32)i << 16 | j;

myDictionary = new Dictionary<UInt32, string>(); 
```

使用完美的哈希，字典是 O(1)。
由于哈希值不佳，字典变为 O(n)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:18:08.390

更新：根据您对其他响应者的评论，下面的代码回答了您的问题。是的，重复会产生异常 System.ArgumentException

您列出的代码可以使用，但不会接受重复的 KeyValuePairs。如果您添加字典中已存在的 KeyValuePair，则会引发 System.ArgumentException 或类似情况。

例如，这段代码

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace test{

    public class App {

        public static void Main(string[] args) {
            var myDictionary = new Dictionary<KeyValuePair<int,int>, string>(); 

            Console.WriteLine("Adding 2 items...");
            myDictionary.Add(new KeyValuePair<int,int>(3, 3), "FirstItem"); 
            myDictionary.Add(new KeyValuePair<int,int>(5, 5), "SecondItem"); 
            Console.WriteLine("Dictionary items: {0}", myDictionary.Count);

            Console.WriteLine("Adding 2 duplicate items...");
            myDictionary.Add(new KeyValuePair<int,int>(3, 3), "FirstItem"); 
            myDictionary.Add(new KeyValuePair<int,int>(5, 5), "SecondItem"); 
            Console.WriteLine("Dictionary items: {0}", myDictionary.Count);
        }
    }
} 
```

给出以下

适用于 Microsoft (R) .NET Framework 4.5 的 Microsoft (R) Visual C# 编译器版本 4.0.30319.17626 版权所有 (C) Microsoft Corporation。版权所有。

添加 2 项... 字典项：2 添加 2 个重复项...

> 未处理的异常：System.ArgumentException：已添加具有相同键的项目。在 System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add) at test.App.Main(String[] args)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T18:46:13.473

> [字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)需要一个相等的实现来确定键是否相等。您可以`IEqualityComparer<T>`使用接受比较器参数的构造函数来指定通用接口的实现；如果您不指定实现，则使用默认的泛型相等比较器`EqualityComparer<T>.Default`。

所以，在你的情况下，因为你没有指定`IEqualityComparer<T>`，默认将被使用。

> [`EqualityComparer<T>.Default`](http://msdn.microsoft.com/en-us/library/ms224763.aspx)检查类型 T 是否实现了`System.IEquatable<T>`接口，如果是，则返回使用该实现的 EqualityComparer 。否则，它返回一个`EqualityComparer<T>`使用 T 的覆盖`Object.Equals`和`Object.GetHashCode`由 T 提供的覆盖。

T is struct`KeyValuePair`没有实现`System.IEquatable<T>`，所以它使用struct 的`Equal`and`GetHashCode`方法`KeyValuePair`。这两种方法都使用`Key`and`Value`来检查相等并生成哈希码：

```
public override int GetHashCode()
{
    return Key.GetHashCode() ^ Value.GetHashCode();
} 
```

因此，总而言之，在您的示例字典中不允许。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-24T18:31:09.460

使用 KeyValuePair 作为字典的键：

它在功能上可以使用 KeyValuePair 作为字典中的键；但是，从概念上讲，这可能不是您的应用程序的最佳选择，因为它暗示了两个整数之间的键值关系。

相反，正如 Mike 建议的那样，您应该使用 Tuple 作为您的密钥。

对于第二个问题：

```
var myDictionary = new Dictionary<KeyValuePair<int,int>, string>();  
myDictionary.Add(new KeyValuePair<int,int>(3, 3), "FirstItem");  
myDictionary.Add(new KeyValuePair<int,int>(3, 3), "SecondItem");  
// does the dictionary allow this? 
```

字典不允许这样做，字典本身是一组键值对，其中键必须是唯一的。如果您希望能够将多个值映射到同一个键，一种选择是将值设置为另一个集合：

```
var myDictionary = new Dictionary<KeyValuePair<int,int>, List<string>>(); 
```

但是您仍然无法像示例中那样使用 myDictionary.Add 。相反，您必须提供额外的功能来确定它们的键是否是字典的一部分并采取相应的行动：

```
public static class DictionaryHelper
{

    public static void Add(this Dictionary<Tuple<int,int>, List<string>> dict,Tuple<int,int> key, string value)
    {
        if(dict.ContainsKey(key))
        {
            dict[key].Add(value);
        }
        else
        {
            dict.Add(key, new List<string>{value});
        }
    } 
} 
```

# scala - 抽象类型类

> ID：12570449
> 
> 赞同：1
> 
> 时间：2012-09-24T18:07:59.377
> 
> 标签：scala, typeclass

从一些简单的代码开始：

```
trait Moveable[A] {
  def move(a: A): A
}
trait Animal {
  def kick[A <: Animal: Moveable](a: A): A = implicitly[Moveable[A]] move a
}
object Cat {
  implicit object CatMoveable extends Moveable[Cat] {
    def move(cat: Cat): Cat = cat copy (pos = cat.pos + 4)
  }
}
case class Cat(pos: Int) extends Animal
case class Dog(pos: Int) extends Animal
val someAnimal: Animal = Dog(0)
val kickedCat: Cat = someAnimal kick Cat(0)
println(kickedCat) // Cat(4) 
```

我决定区分动物`Quadruped`和`Biped`动物：

```
trait FourFeetMoveable[A] {
  def moveWithFourFeets(a: A): A
}
trait TwoFeetMoveable[A] {
  def moveWithTwoFeets(a: A): A
}
trait Animal {
  def kick[A <: Animal /*: ??? */](a: A): A
}
trait Quadruped extends Animal {
  def kick[A <: Animal: FourFeetMoveable](a: A): A = implicitly[FourFeetMoveable[A]] moveWithFourFeets a
}
trait Biped extends Animal {
  def kick[A <: Animal: TwoFeetMoveable](a: A): A = implicitly[TwoFeetMoveable[A]] moveWithTwoFeets a
}
object Chicken {
  implicit object ChickenTwoFeetMoveable extends TwoFeetMoveable[Chicken] {
    def moveWithTwoFeets(chicken: Chicken): Chicken = chicken copy (pos = chicken.pos + 2)
  }
}
case class Dog(pos: Int) extends Quadruped
case class Chicken(pos: Int) extends Biped
val someAnimal: Animal = Dog(0)
val kickedChicken: Chicken = someAnimal kick Chicken(0)
println(kickedChicken) // Chicken(2) 
```

必须有两个完全不同的类型类`FourFeetMoveable`和`TwoFeetMoveable`，所以我**不能**用这样的东西抽象它们：

```
trait Moveable[A] {
  def move(a: A): A
} 
```

那么如何抽象出用作上下文绑定`kick`在 trait中的方法的类型类`Animal`（参见参考资料`???`）？

**编辑**

对不起，我应该让我的例子更清楚。可以说被踢的效果可以是某种运动或某种其他动作。我想用类型类抽象出这种效果。在下面的代码中，我展示了我的意思，并且还使用了抽象类型成员`KickingEffect`来抽象所需的类型类，如[0__](https://stackoverflow.com/users/515054/0)建议的那样：

```
trait StumbleEffect[A <: Animal] {
  def stumble(a: A): A
}
trait GlideEffect[A <: Animal] {
  def glide(a: A): A
}
trait Animal {
  type KickingEffect[A <: Animal]
  def kick[A <: Animal: KickingEffect](a: A): A
}
trait Biped extends Animal {
  type KickingEffect[A <: Animal] = StumbleEffect[A]
  override def kick[A <: Animal: StumbleEffect](a: A): A = implicitly[StumbleEffect[A]] stumble a
}
trait Quadruped extends Animal {
  type KickingEffect[A <: Animal] = GlideEffect[A]
  override def kick[A <: Animal: GlideEffect](a: A): A = implicitly[GlideEffect[A]] glide a
}
object Dog {
  implicit object DogGlideEffect extends GlideEffect[Dog] {
    def glide(dog: Dog): Dog = dog copy (pos = dog.pos + 4)
  }
}
case class Dog(pos: Int) extends Quadruped
case class Cat(pos: Int) extends Quadruped
case class Chicken(pos: Int) extends Biped 
```

但是当涉及到动物序列时，我遇到了另一个问题：

```
type Beast[A <: Animal, KE[_ <: Animal]] = A { type KickingEffect[X <: Animal] = KE[X] }
val dogBeast: Beast[Dog, GlideEffect] = Dog(0) // fine

type GlideBeasts[A <: Quadruped] = Beast[A, GlideEffect]
val glideBeasts: Seq[GlideBeasts[Quadruped]] = Seq(Dog(0), Cat(0)) // fine

def kickAll[A <: Animal, KE[_ <: Animal], KA <: Animal](kicker: Beast[A, KE])(animals: Seq[KA])(implicit ev: kicker.KickingEffect[KA]): Seq[KA] = {
  for (a <- animals) yield kicker kick a
}
val cat = Cat(0)
val dog = Dog(0)
kickAll(cat)(Seq(dog)) // wrong inferred kinds of type arguments
kickAll[Cat, GlideEffect, Dog](cat)(Seq(dog)) // missing implicit evidence 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:40:12.890

像这样？

```
trait Moveable[A] {
  def move(a: A): A
}
trait FourFeetMoveable[A] extends Moveable[A]
trait TwoFeetMoveable[A] extends Moveable[A]

trait Animal {
  type CanKick[A] <: Moveable[A]
  def kick[A <: Animal : CanKick](a: A): A = implicitly[CanKick[A]] move a
}
trait Quadruped extends Animal {
  type CanKick[A] = FourFeetMoveable[A]
}
trait Biped extends Animal {
  type CanKick[A] = TwoFeetMoveable[A]
} 
```

* * *

关于您的**编辑**：我建议此时不要进一步尝试使用类型对其进行建模，除非它确实是您的应用程序中非常关键的点或纯粹的思想实验。使用类型安全的设计很容易变得过于雄心勃勃，那么设计工作量与应用价值之间的比例就会越来越大；我会放弃一些编译时安全性并去寻找模式匹配和运行时错误。

如果您*确实*想遵循类型路线，一旦您拥有集合，您将需要[HLists](https://github.com/milessabin/shapeless)之类的东西来保留集合成员的各个类型。

* * *

无论如何，您可以使您的示例工作（使用显式类型参数）：

```
def kickAll[A <: Animal, KE[_ <: Animal], KA <: Animal](
   kicker: Beast[A, KE])(animals: Seq[KA])(implicit effect: KE[KA]): Seq[KA] = {
      for (a <- animals) yield kicker kick a
}

val cat = Cat(0)
val dog = Dog(0)
kickAll(cat)(Seq(dog)) // still doesn't figure out the types
kickAll[Cat, GlideEffect, Dog](cat)(Seq(dog)) // ok! 
```

如前所述，当您尝试使用异构列表（例如，需要不同的效果）时，会出现棘手或不可能的部分。相反，您可能会为序列的元素使用辅助类型类，以便之前可以按项目解析隐式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T09:49:16.330

作为旁注，我发现在真正需要它们之前*不引入类型边界总是有用的。*您不仅可以确保大量打字（没有双关语），而且可以保持选项打开（例如，用于以后的差异注释）。以下是完全足够的：

```
trait StumbleEffect[A] {
  def stumble(a: A): A
}
trait GlideEffect[A] {
  def glide(a: A): A
}
trait Animal {
  type KickingEffect[A]
  def kick[A : KickingEffect](a: A): A
}
trait Biped extends Animal {
  type KickingEffect[A] = StumbleEffect[A]
  override def kick[A : StumbleEffect](a: A): A = 
    implicitly[StumbleEffect[A]] stumble a
}
trait Quadruped extends Animal {
  type KickingEffect[A] = GlideEffect[A]
  override def kick[A : GlideEffect](a: A): A = implicitly[GlideEffect[A]] glide a
} 
```

等等

# php - Amazon S3 启用版本控制

> ID：12570451
> 
> 赞同：0
> 
> 时间：2012-09-24T18:08:20.137
> 
> 标签：php, api, amazon-s3

我在我的应用程序中使用 AWS for PHP 与亚马逊 S3 进行通信。我想启用版本控制，这样我就不会用相同的键覆盖对象。我不知道如何实际启用该功能...

S3 文档：

> 以下请求对存储桶 bucketName 启用版本控制。

```
PUT /?versioning HTTP/1.1
Host: bucketName.s3.amazonaws.com
Date: Wed, 12 Oct 2009 17:50:00 GMT
Authorization: AWS AKIAIOSFODNN7EXAMPLE:xQE0diMbLRepdf3YB+FIEXAMPLE=
Content-Type: text/plain
Content-Length: 124

<VersioningConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
  <Status>Enabled</Status>
</VersioningConfiguration> 
```

我不确定在 php 中的何处或如何执行它，并且 S3 管理控制台中没有启用版本控制的选项。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T09:05:08.497

您可以`enable_versioning`像这样使用 PHP API 的方法：

```
$s3 = new AmazonS3();
$s3->enable_versioning($bucket); 
```

还有`disable_versioning`一种禁用版本控制的方法。

# mysql - 仅使用 MySQL 将数据提取为每个月的列

> ID：12570454
> 
> 赞同：0
> 
> 时间：2012-09-24T18:08:31.810
> 
> 标签：mysql

我有一个看起来像这样的数据库：

```
Year    Month        New Visitor?
2011    Jan            Yes
2011    Jan            No
2012    Feb            No
2012    Feb            No
2012    Feb            Maybe 
```

我希望每个月将 Yes 和 No 分开列，这样我就可以将其打印为图表。我知道要做到这一点，我需要这样的结果：

```
Year    Month         Yes       No     Maybe
2011    Jan            1         1       0
2012    Feb            0         2       1 
```

我怎么可能只使用 MySQL 来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:13:20.577

尝试：

```
SELECT `Year`, `Month`,
    COUNT(IF (`New Visitor?` = 'Yes', 1, NULL)) AS `Yes`,
    COUNT(IF (`New Visitor?` = 'No', 1, NULL)) AS `No`,
    COUNT(IF (`New Visitor?` = 'Maybe', 1, NULL)) AS `Maybe`
    FROM `table`
    GROUP BY `Year`, `Month`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:20:08.560

您可以使用以下内容（参见[SQL Fiddle with demo](http://sqlfiddle.com/#!2/6971a/1)）：

```
select year, month,
  sum(case when newVisitor = 'yes' then 1 else 0 end) yes,
  sum(case when newVisitor = 'No' then 1 else 0 end) no,
  sum(case when newVisitor = 'Maybe' then 1 else 0 end) maybe
from yourtable
group by year, month 
```

# mysql - 如何在 MySQL 中使用透明数据加密？

> ID：12570457
> 
> 赞同：7
> 
> 时间：2012-09-24T18:08:41.557
> 
> 标签：mysql, database-security, tde, ecryptfs

我想在 MySQL 上启用[透明数据加密 (TDE) 。](http://en.wikipedia.org/wiki/Transparent_Data_Encryption)我不介意整个数据库是否被加密（而不是几列、几行或几张表）。我正在使用它进行研究，所以我正在寻找开放和免费的东西。我找到[了 zNcrypt](http://www.gazzang.com/products/zncrypt)，但它是一个商业产品。他们本质上使用的是开源的[eCryptfs](https://launchpad.net/ecryptfs)，但找不到为 MySQL 正确配置它的方法。任何有关在 MySQL 中使用 eCryptfs 或任何其他使用 MySQL 启用 TDE 的解决方案的指示都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T22:11:34.543

我看到这个问题比较老，但以防万一：

eCryptfs 可以被认为是一个文件系统，所以，你应该只需要挂载它，然后将你的 MySQL[`datadir`](http://dev.mysql.com/doc/refman/5.6/en/server-options.html#option_mysqld_datadir)指向挂载的目录。唯一的缺点是它似乎不支持 O_DIRECT，但我认为 MySQL 不会使用它，是吗？

# r - 在 Windows 中安装 RGraphviz 的问题

> ID：12570461
> 
> 赞同：4
> 
> 时间：2012-09-24T18:09:04.147
> 
> 标签：r, graphviz

我已阅读 RGraphviz 页面上的 README 并查看了 R 帮助列表和此处的许多问题，但我仍然找不到无法在 R 2.14.0 上安装 Rgraphviz 包的原因。

1.  我已经下载并安装了 Graphviz 2.20.3（虽然开始菜单显示它是 2.21）

2.  我已将 Graphviz bin 文件夹添加到我的用户路径中。

    > strsplit(Sys.getenv("PATH"), ";") [[1]] [1] "C:\Program Files\R\R-2.14.0\bin\x64"
    > [2] "C:\Program Files\Common Files\Microsoft Shared\Windows Live"
    > [3] "C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live"
    > [4] "C:\Windows\system32"
    > [5] "C: \Windows"
    > [6] "C:\Windows\System32\Wbem"
    > [7] "C:\Windows\System32\WindowsPowerShell\v1.0\"
    > [8] "C:\Program Files\Intel\WiFi\bin\ "
    > [9] "C:\Program Files\Common Files\Intel\WirelessCommon\"
    > [10] "C:\Program Files\Intel\DMIX"
    > [11] "C:\Program Files (x86)\NTRU Cryptosystems\NTRU TCG 软件堆栈\bin\"
    > [12] "C:\Program Files\NTRU Cryptosystems\NTRU TCG 软件栈\bin\"
    > [13] "C:\Program Files (x86)\Intel\Services\IPT\"
    > [14] "C:\Program Files\Dell\Dell Data Protection\Access\Advanced\Wave\Gemalto\Access Client\v5\" [15] "C:\Program Files (x86)\Windows Live\Shared"
    > [16] "c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\"
    > [17] "c:\Program Files\Microsoft SQL Server\100\Tools\Binn\"
    > [18] "c:\Program Files\Microsoft SQL Server\100\DTS\Binn\"
    > [19] "C:\Program Files (x86)\Graphviz2.20 \bin"

3.  使用 bioconductor 安装 Rgraphviz 包。

    > source("http://bioconductor.org/biocLite.R") biocLite("Rgraphviz") BioC_mirror: 'http://www.bioconductor.org' 使用 R 版本 2.14，BiocInstaller 版本 1.2.1。安装包“Rgraphviz”将包安装到“C:/Users/Abraham/R/win-library/2.14”（因为“lib”未指定）尝试 URL 'http://www.bioconductor.org /packages/2.9/bioc/bin/windows/contrib/2.14/Rgraphviz_1.32.0.zip' 内容类型 'application/zip' 长度 933734 字节 (911 Kb) 打开 URL 下载 911 Kb

    包 'Rgraphviz' 成功解包并检查了 MD5 和

    下载的包位于 C:\Users\Abraham\AppData\Local\Temp\RtmpYNFDxs\downloaded_pa​​ckages 警告信息：'boot' 无法更新，安装目录 'C:/Program Files/R/R-2.14.0/library' not writeable 'class' 无法更新，安装目录 'C:/Program Files/R/R-2.14.0/library' not writeable 'cluster' 无法更新，安装目录 'C:/Program Files/R/R- 2.14.0/library'不可写'foreign'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写'KernSmooth'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写'lattice'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写'MASS'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写'Matrix'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写' mgcv'无法更新，安装目录'C:/Program Files/R/R-2.14.0/library'不可写'nlme'无法更新，安装目录'C:/Program Files/R/R-2.14.0 /library'不可写'n [...截断]不可写'n [...截断]不可写'n [...截断]

现在它表明 Rgraphviz 已成功解包。但是，当我尝试使用库导入包时，我收到一条错误消息。

```
> library("Rgraphviz")
Error : .onLoad failed in loadNamespace() for 'Rgraphviz', details:
  call: value[[3L]](cond)
  error: unable to load shared object 'C:/Users/Abraham/R/win-library/2.14/Rgraphviz/libs/x64/Rgraphviz.dll':
  LoadLibrary failure:  %1 is not a valid Win32 application.

  Check that (1) graphviz is installed on your system; (2) the installed version of graphviz matches '2.20.3'; this is
  the version used to build this Rgraphviz package; (3) graphviz is accessible to R, e.g., the path to the graphviz
  'bin' directory is in the system 'PATH' variable.  See additional instructions in the 'README' file of the Rgraphviz
  'source' distribution, available at

  http://bioconductor.org/packages/release/bioc/html/Rgraphviz.html

  Ask further questions on the Bioconductor mailing list

  http://bioconductor.org/docs/mailList.html

Error: package/namespace load failed for ‘Rgraphviz’ 
```

有人知道可能出了什么问题吗？我已经在不同版本的 R 上尝试过这个，并且发生了同样的问题。

仅供参考：

```
> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] graph_1.32.0        BiocInstaller_1.2.1

loaded via a namespace (and not attached):
[1] tools_2.14.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:27:51.010

就个人而言，我建议 (a) 更新到 R-2.15.1，然后 (b) 使用 Bioconductor 的“开发”版本（“开发”版本将在 10 月 2 日成为发布版本，因此对于患者而言，建议是等到那时）。(b)*在全新的 R 安装*中使用

```
source("http://bioconductor.org/biocLite.R")
BiocInstaller::useDevel() 
```

[更详细的说明](http://bioconductor.org/developers/useDevel/)涵盖了您希望同时使用 Bioconductor 的发布版本和开发版本的情况。然后安装`Rgraphviz`为

```
biocLite("Rgraphviz") 
```

故事结束，没有要安装的graphviz等。

# codeigniter - 如何使用 CodeIgniter 链接到 pdf？

> ID：12570463
> 
> 赞同：0
> 
> 时间：2012-09-24T18:09:12.343
> 
> 标签：codeigniter, hyperlink, download

这是一个如此简单的任务，但我似乎无法让它加载 pdf。

我的视图上有一个简单的链接，该链接指向存储在下载文件夹中的 pdf。

在 CodeIgniter 中做这件事我有什么遗漏吗？

```
<div class="node_title_grant">
  <a href="<?php echo base_url();?>index.php/downloads/grant.pdf" target="_blank">
    Grant
  </a>
</div> 
```

然后我将grant.pdf 存储在我的应用程序文件夹的下载文件夹中。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:11:04.883

只需做正常的路径...

```
href="<?php echo base_url(); ?>application/downloads/grant.pdf" 
```

或者：

```
href="/application/downloads/grant.pdf" 
```

编辑：

我相信 .htaccess 是问题所在。将下载文件夹从应用程序内部移动到根目录解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:14:23.617

您想在[`anchor`](http://codeigniter.com/user_guide/helpers/url_helper.html)此处使用该功能：

```
<div class="node_title_grant">
    <?php echo anchor('downloads/grant.pdf', 'Grant', 'target="_blank"); ?>
</div> 
```

或者，您可以将文件名传递给[`base_url`](http://codeigniter.com/user_guide/helpers/url_helper.html)：

```
<div class="node_title_grant">
    <a href="<?php echo base_url('downloads/grant.pdf');?>" target="_blank">
        Grant
    </a>
</div> 
```

# python - 如何在不创建临时本地文件的情况下将文件上传到 S3

> ID：12570465
> 
> 赞同：38
> 
> 时间：2012-09-24T18:09:12.983
> 
> 标签：python, amazon-s3, amazon

是否有任何可行的方法可以直接将动态生成的文件上传到亚马逊 s3，而无需先创建本地文件然后上传到 s3 服务器？我用蟒蛇。谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-06-11T17:18:00.273

这是一个下载图像（使用请求库）并将其上传到 s3 的示例，而不写入本地文件：

```
import boto
from boto.s3.key import Key
import requests

#setup the bucket
c = boto.connect_s3(your_s3_key, your_s3_key_secret)
b = c.get_bucket(bucket, validate=False)

#download the file
url = "http://en.wikipedia.org/static/images/project-logos/enwiki.png"
r = requests.get(url)
if r.status_code == 200:
    #upload the file
    k = Key(b)
    k.key = "image1.png"
    k.content_type = r.headers['content-type']
    k.set_contents_from_string(r.content) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-08-09T01:31:16.240

您可以使用Python 标准库中的[BytesIO](https://docs.python.org/2/library/io.html#io.BytesIO)。

```
from io import BytesIO
bytesIO = BytesIO()
bytesIO.write('whee')
bytesIO.seek(0)
s3_file.set_contents_from_file(bytesIO) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-24T18:19:53.407

[boto](http://docs.pythonboto.org/)库的Key[对象](http://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.key.Key)有几个您可能感兴趣的方法：

*   [发送文件](http://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.key.Key.send_file)
*   [set_contents_from_file](http://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_file)
*   [set_contents_from_string](http://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_string)
*   [set_contents_from_stream](http://docs.pythonboto.org/en/latest/ref/s3.html#boto.s3.key.Key.set_contents_from_stream)

有关使用 set_contents_from_string 的示例，请参阅boto 文档的[存储数据](http://docs.pythonboto.org/en/latest/s3_tut.html#storing-data)部分，为了完整起见，粘贴在此处：

```
>>> from boto.s3.key import Key
>>> k = Key(bucket)
>>> k.key = 'foobar'
>>> k.set_contents_from_string('This is a test of S3') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T18:17:12.993

我假设你正在使用`boto`. `boto`'s`Bucket.set_contents_from_file()`将接受一个`StringIO`对象，并且您为将数据写入文件而编写的任何代码都应该很容易适应写入`StringIO`对象。或者，如果您生成一个字符串，您可以使用`set_contents_from_string()`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-07T06:53:31.207

```
def upload_to_s3(url, **kwargs):
    '''
    :param url: url of image which have to upload or resize to upload
    :return: url of image stored on aws s3 bucket
    '''

    r = requests.get(url)
    if r.status_code == 200:
        # credentials stored in settings AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY
        conn = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, host=AWS_HOST)

        # Connect to bucket and create key
        b = conn.get_bucket(AWS_Bucket_Name)
        k = b.new_key("{folder_name}/{filename}".format(**kwargs))

        k.set_contents_from_string(r.content, replace=True,
                                   headers={'Content-Type': 'application/%s' % (FILE_FORMAT)},
                                   policy='authenticated-read',
                                   reduced_redundancy=True)

        # TODO Change AWS_EXPIRY
        return k.generate_url(expires_in=AWS_EXPIRY, force_http=True) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-05T01:10:13.787

在boto3中，有一种上传文件内容的简单方法，无需使用以下代码创建本地文件。我已经修改了 boto3 的 JimJty 示例代码

```
import boto3
from botocore.retries import bucket
import requests
from io import BytesIO
# set the values
aws_access_key_id=""
aws_secret_access_key=""
region_name=""
bucket=""
key=""

session = boto3.session.Session(aws_access_key_id=aws_access_key_id,aws_secret_access_key=aws_secret_access_key, region_name=region_name)
s3_client = session.client('s3')
#download the file
url = "http://en.wikipedia.org/static/images/project-logos/enwiki.png"
r = requests.get(url)
if r.status_code == 200:    
    #convert content to bytes, since upload_fileobj requires file like obj
    bytesIO = BytesIO(bytes(r.content))    
    with bytesIO as data:
        s3_client.upload_fileobj(data, bucket, key) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-03T11:10:52.823

我有一个 dict 对象，我想将其存储为 S3 上的 json 文件，而不创建本地文件。下面的代码对我有用：

```
from smart_open import smart_open

with smart_open('s3://access-key:secret-key@bucket-name/file.json', 'wb') as fout:
    fout.write(json.dumps(dict_object).encode('utf8')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-28T18:10:24.243

您可以尝试使用`smart_open`（[https://pypi.org/project/smart_open/](https://pypi.org/project/smart_open/)）。我正是为此使用它：直接在 S3 中写入文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-14T08:55:59.260

鉴于静态加密现在是一个非常需要的数据标准，smart_open 不支持这个 afaik

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-01T09:02:20.793

此实现是将图像列表（NumPy 列表、OpenCV 图像对象）直接上传到 S3 的示例

> 注意：您需要在上传文件时将图像对象转换为字节或缓冲区转换为字节，这样您就可以上传文件而不会出现损坏错误

```
#Consider you have images in the form of a list i.e. img_array
import boto3

s3 = boto3.client('s3')
res_url = []

for i,img in enumerate(img_array):
        s3_key = "fileName_on_s3.png"
        response = s3.put_object(Body=img.tobytes(), Bucket='bucket_name',Key=s3_key,ACL='public-read',ContentType= 'image/png')
        s3_url = 'https://bucket_name.s3.ap-south-1.amazonaws.com/'+s3_key
        res_url.append(s3_url)
#res_url is the list of URLs returned from S3 Upload 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-09-05T04:10:50.693

boto3的更新：

```
aws_session = boto3.Session('my_access_key_id', 'my_secret_access_key')
s3 = aws_session.resource('s3')
s3.Bucket('my_bucket').put_object(Key='file_name.txt', Body=my_file) 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-12-03T18:26:04.233

我遇到了类似的问题，想知道是否有最终答案，因为使用下面的代码，“starwars.json”会继续在本地保存，但我只想将每个循环的 .json 文件推送到 S3 中并且没有文件存储在本地。

```
for key, value in star_wars_actors.items():

response = requests.get('http:starwarsapi/' + value)

data = response.json()

with open("starwars.json", "w+") as d:
    json.dump(data, d, ensure_ascii=False, indent=4)

s3.upload_file('starwars.json', 'test-bucket',
               '%s/%s' % ('test', str(key) + '.json')) 
```

# c#-4.0 - 3人纸牌游戏

> ID：12570469
> 
> 赞同：1
> 
> 时间：2012-09-24T18:09:34.307
> 
> 标签：c#-4.0, visual-studio-2012, playing-cards

> **可能重复：**
> [3人纸牌游戏回合系统](https://stackoverflow.com/questions/12570162/3-player-card-game-turn-system)

我正在制作一个 GUI 3 玩家纸牌游戏（1 人和 2 台计算机）。每个玩家手上有3张牌。在每一轮中都有一个庄家，第一个打牌的玩家是庄家右边的玩家。每个玩家只能在左边的玩家玩完后才能玩。（这是纸牌游戏的基础）

在每个玩家都把 3 张牌放在桌子上之后。庄家按钮传给右边的玩家，新一轮开始。

我需要帮助来做一个控制转弯的功能，它可以看到轮到谁玩。我轮到人类了，它等待输入。如果是电脑转，则调用类的动作函数。

我现在拥有的是一个带有 Suit 和 Value 的 Card 类。

作为卡片列表的 Deck 类（此类具有 suffle 功能和抽牌功能）

我有一个包含卡片列表的 Table 类（这是玩家玩卡片时卡片所在的位置）

我有一个 Player 类（同一类适用于人类和计算机玩家 - 这很好吗？）

Player 类有一个 Hand 类（那是玩家的 3 张牌所在的位置）

游戏类有一张牌、一张桌子和 3 名玩家。

我的功能是人类先玩并将一张牌移到桌子上，然后2个电脑玩家各移一张牌。这只有在人类玩家是第一个玩的时候才有效。一旦每个玩家的3张牌被打出，开始另一轮，在这一轮中不是玩家而是计算机首先玩。

我不知道如何制作一个系统来控制它。我不想要代码，而是想法本身。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:30:43.937

我的**Player**类中会有一些如下属性：

```
public bool IsComputer { get; set; }
public bool IsCurrentTurn { get; set; }
public int TurnOrder { get; set; } 
```

这样，您可以根据他们是否是人类以及是否轮到他们来编写逻辑。您将使用 TurnOrder 属性来确定下一个轮到谁。

因此，如果您要像这样创建 Player 对象：

```
Player player1 = new Player(); 
```

您可以在主逻辑中添加如下内容：

```
if (player1.IsComputer) 
{
   PerformTurn();
}
else //Human
{
   //Logic to wait and allow human player to do his or her turn here
} 
```

**编辑：**

为了确定轮到谁，我首先将我的球员列入球员名单。例子：

```
List<Player> players = new List<Player>
{
new Player {Name = "Player 1", IsComputer = false, TurnOrder = 0, IsCurrentTurn = true},
new Player {Name = "Player 2", IsComputer = true, TurnOrder = 1, IsCurrentTurn = false},
new Player {Name = "Player 3", IsComputer = true, TurnOrder = 2, IsCurrentTurn = false}
}; 
```

其次，我将创建一个函数，该函数使用每个玩家的 TurnOrder 属性来确定下一个轮到谁。像这样的方法可以做到这一点：

```
public Player GetNextPlayer()
{
   Player currentPlayer = players.First(x => x.IsCurrentTurn);

   //if player is last in the turn order return first player
   if (currentPlayer.TurnOrder == players.Max(x => x.TurnOrder).TurnOrder)
   {
       return players.Min(x => x.TurnOrder);
   }
   else 
   {
      return players.First(x => x.TurnOrder == (currentPlayer.TurnOrder + 1));
   }

} 
```

当然，您可以只使用列表的索引，而完全跳过使用 TurnOrder，尽管如果您想扩展您的游戏，使用索引作为回合顺序可能会在以后伤害您。我认为 TurnOrder 属性要灵活得多。

要在回合中获得下一个玩家，只需使用以下命令：

```
Player currentPlayer = GetNextPlayer(); 
```

# c# - Web 服务能够在本地计算机上返回 IDictionary，但不能在服务器上返回

> ID：12570475
> 
> 赞同：0
> 
> 时间：2012-09-24T18:10:01.180
> 
> 标签：c#, asp.net, json, web-services, asmx

我有一个`asmx`带有返回字典对象的方法的 Web 服务，在我的本地机器上使用测试服务器它工作正常。但是，当我将它发布到生产服务器时，我收到一个错误，它不受支持，因为它实现了`IDictionary`. 我环顾四周，似乎默认情况下是这种情况（不支持它），所以我猜这是正确的行为。我想知道它为什么可以在我的本地机器上运行，以及是否可以应用一些设置来让它在服务器上运行。

如果它有所不同，则字典使用字符串作为键，使用自定义对象数组作为值。

现在我可以通过将我的字典序列化为字符串（使用`JavaScriptSerializer.Serialize`）并返回它来解决它，但理想情况下我想直接返回字典（或者除非至少了解发生了什么）。

# c# - 删除 PresentationML 文档中的换行符

> ID：12570482
> 
> 赞同：1
> 
> 时间：2012-09-24T18:10:17.363
> 
> 标签：c#, openxml, openxml-sdk

我正在尝试使用格式化的 PPTX 文件将我自己的数据插入到标签中。然而，在某些情况下，我需要删除标记并备份 <problem> 和 <problemNoTab> 部分中的一行。然而，在 OOXML 中，xml 标记用于处理这种情况，因此“\n”字符不可见。我不确定如何进行，因为我也无法进行典型的标签匹配。

模板的代码如下：

```
 <p:txBody>
   <a:bodyPr>
    <a:normAutofit />
   </a:bodyPr>
  <a:lstStyle />
  <a:p>
   <a:r>
    <a:rPr lang="en-US" b="1" dirty="0" smtClean="0" />
    <a:t>Problem</a:t>
   </a:r>
  </a:p>
  <a:p>
    <a:pPr marL="914400" indent="-914400" />
    <a:r>
     <a:rPr lang="en-US" sz="1000" smtClean="0" />
     <a:t>&lt;Problem&gt;</a:t>
    </a:r>
    <a:endParaRPr lang="en-US" sz="1000" dirty="0" smtClean="0" />
  </a:p>
  <a:p>
     <a:pPr marL="0" indent="0" />
     <a:r>
      <a:rPr lang="en-US" sz="1000" dirty="0" smtClean="0"/>
          <a:t>&lt;ProblemNoTab&gt;</a:t>
     </a:r>
     <a:endParaRPr lang="en-US" sz="1000" dirty="0" smtClean="0" />
  </a:p> 
```

任何有关如何删除断线或其他地方的提示将不胜感激。我在字符串替换中尝试了基本的转义字符，例如“\b”和删除字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:45:41.810

我找到了我的解决方案。在 C# 中，我有一组`DocumentDrawing.Text`对象，我想要删除的对象，我只是使用`textPart.Parent.Parent.Remove()`它删除了段落，基本上删除了新行。

不知道这是否对任何人有用，但它对我有用。

# ios - iOS6大下载超时

> ID：12570483
> 
> 赞同：3
> 
> 时间：2012-09-24T18:10:19.263
> 
> 标签：ios, asihttprequest, ios6

似乎所有使用 ASIHTTPRequest 的 iOS6 上的大型下载都超时。

有谁知道已经为 iOS6 更新了这个库的任何分支。我喜欢这个库，真的不想切换。

**编辑：** 此问题并非特定于 ASIHTTPRequest。在测试 FSNetwork、MKNetwork、AFNetwork 和 NSURLConnection 时，它们都失败了。

可以从这里下载示例项目： [https ://github.com/BLamy/NetworkTest](https://github.com/BLamy/NetworkTest)

它必须构建到运行 iOS6 的实际设备上（我使用的是 iPad2，不确定这是否会有所不同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T00:45:46.207

我在上传时遇到问题。我找到的解决方案是`cachePolicy`将 urlRequest 设置为`NSURLRequestReloadIgnoringLocalAndRemoteCacheData`. （我还遇到了一些其他网络错误，这些错误只发生在 iPhone 5 上。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:50:27.217

iOS6 存在与 Wi-Fi 相关的严重问题。我们使用 ASIHTTPREQUEST。我们发现小文件下载工作正常，在某些情况下也可以下载大文件（10MB 以上），但下载后，我们让设备闲置一分钟，再次尝试将操作添加到队列中。应用程序崩溃。

最初，尽管互联网可用，但我们收到了许多网络不可用警报。后来，我们将 Wi-Fi 设置安全模式 WAP 更改为 NONE。然后有一段时间我们没有发现网络不可用错误，下载也正常..

但是，当服务器本身被加载时，连接和下载会在进度中途停止。我注意到了这种行为，即使在本机 SDK facebook 应用程序中也是如此。

模拟器运行良好，即使是 iPad1、iO5.0、iPhone 4 等 iOS5.0 设备也不会崩溃。

我总结一下..苹果半生不熟的iOS6.0，可能是iOS6.0只适用于iPhone 5，新的天线结构。除非Apple修复iOS6.0问题，否则可能无法解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T03:01:25.560

您是否在针对在 iOS 6 上运行的 iOS SDK 5.x 构建的应用程序超时（即您的旧版本。如果您无法访问旧版本，那么您在 App Store 上现有的版本怎么样？ ）。
还是您的症状仅出现在针对 iOS SDK 6.0 的 Xcode 4.5 新版本中？如果是后者，并且您真的不想放弃 ASI（并且您不想实现任何新的 iOS 功能），那么您可以考虑针对 iOS SDK 5.x 而不是 6.0 构建。请在此处查看我的[答案](https://stackoverflow.com/a/12580494/470879)以获取说明。

如果您需要实现新的 iOS 6 功能，或者 iOS 6 实际上破坏了您的 ASIHTTP 实现（针对 iOS SDK 5.x 构建），那么您应该考虑其他网络选项。一年多以来，[Ben](http://allseeing-i.com/%5Brequest_release%5D;)有充分的理由建议开发商寻求其他选择。

# django - modelForm 中的 ModelMultipleChoiceField 未保存

> ID：12570484
> 
> 赞同：1
> 
> 时间：2012-09-24T18:10:19.350
> 
> 标签：django, django-views, django-orm, django-forms

我是 Python/Django 新手，几天来一直面临以下问题。我有 2 个 ModelForms 用于一个模型，这个想法是一个模型的数据将有助于填充第二个的多项选择字段。第二种形式的多项选择字段可以填充，但问题是用户的选择没有得到保存。我已经尝试过`save(commit=false)`，`save_m2m()`但它并没有解决问题。

模型.py：

```
class Question(models.Model):
    asker = models.ForeignKey(Student, related_name='asker+')
    suggestedHelpers = models.ManyToManyField(Student, related_name='suggested')
    chosenHelpers = models.ManyToManyField(Student, related_name='chosen')

class QuestionForm(ModelForm):
    class Meta:
        model = Question
        exclude = ('chosenHelpers','suggestedHelpers', 'asker',)

class HelpersForm(ModelForm):
        def suggesthelpers(self, question):
            # populate chosenHelpers field according to data from QuestionForm
        class Meta:
            model = Question
            exclude = ('suggestedHelpers', 'asker', 'questionSubj', 'Qtext',) 
```

视图.py

```
def askq_page(request):
    question = Question(asker=Student.objects.get(user=request.user))
    if request.method == 'POST':
        form = QuestionForm(request.POST, instance=question)
        if form.is_valid():
            question = form.save()
            # process data
            question.save()
            form2 = HelpersForm(instance=question)
            form2.suggesthelpers(question)
            variables = {'form':form2, 'qid':question.id}
            return render_to_response('choosehelper.html',      variables,context_instance=RequestContext(request))
    else:
        variables = RequestContext(request, {'form': QuestionForm()})
    return render_to_response('askq.html', RequestContext(request, {'form': QuestionForm(instance=question)}))

def choosehelper_page(request, form='', qid=''):
    question = Question.objects.get(id=qid)
    if request.method == 'POST':
        form2 = HelpersForm(request, instance=question)
        # here lies the problem- the data gathered from form2 is not saved i.e. the multiple choices chosen by user are not returned
        if form2.is_valid():
            question = form2.save()
            form2.save_m2m()

            helpers = question.chosenHelpers.all()
            for helper in helpers:
                sentQ = ReceivedQ(question=question)
                sentQ.student = helper
                sentQ.save()

            return render_to_response('questionsent.html', {'helpers': helpers, 'qid':    question.id, 'qtext': q}, context_instance=RequestContext(request))

    else:
        form2 = HelpersForm(instance=question)
        form2.suggesthelpers(question)
    return render_to_response('choosehelper.html', RequestContext(request, {'form': form2,    'qid': qid})) 
```

# python - 我无法弄清楚我在 python 赋值中的全局变量做错了什么

> ID：12570489
> 
> 赞同：-7
> 
> 时间：2012-09-24T18:10:31.930
> 
> 标签：python, variables, global-variables

我的 python 学校作业有问题，我不知道我做错了什么。我要么得到一个未定义的全局名称，要么如果我改变周围的东西，我会得到不同的 sythax 错误。我希望有人能够帮助我解决我做错的事情。

这是分配详细信息的图像： ![在此处输入图像描述](../Images/16d80b889d58994043e366bd6ab4dd2c.png)

```
def main():
  x = int(input("Give me integer #1: "))
  y = int(input("Give me integer #2: "))
  z = input("Give me a string: ")
  print("min:",min(x,y))
  print("max:",max(x,y))
  print("equal:",equal(x,y))
  print("is_even:",is_even(x))
  print("is_odd:",is_odd(x))
  print("format_dollar:",format_dollar(x))
  print("lab_grade:",lab_grade(x))
  print("is_unlucky:",is_unlucky(x))
  print("is_lucky:",is_lucky(x))
  print("pluralize:",pluralize(z)) 

#1 This function will figure out the min of 2 integer arguments and return the smaller one
def min(num1,num2):
    if num1 >= num2: return num1
    else: return num2

#2 This function will figure out the max of 2 integer arguments and return the smaller one
def max(num1,num2):
    if num1 <= num2: return num1
    else: return num2

#3 This function will figure out if the 2 numbers are equal
def equal(x,y):
    if x == y: True
    else: False

#4 This function will find out if the number is even
def is_even(num1,num2):
    is_even = x
    if x % 2 == 0: return ("True")
    else: return ("False")

#5 This function will find out if the number is odd
def is_odd(num1,num2):
    is_odd = x
    if x % 2 == 1: return ("True")
    else: return even

#6 This function will format the returned string
def format_dollar(num1,num2):
    x**('.2f')

#7 This function will fin out a lab grade
def lab_grade(x):
    lab_grade = int(raw_input("Enter the student's grade: "))
    if grade >= 90:
        return 'A'
    if grade >= 80:
        return 'B'
    if grade >= 70:

       return 'C'
    if grade >= 60:
        return 'D'
    else:
        return 'F'
#8 This will determine if the function is un_lucky
def is_unlucky(x):
    if x == 4:
        return ('True')
    if x == 13:
        return ('True')
    if x == 7:
        return ('True')
    else: ('False')
    print()

#9 This will determine if the function is lucky
def is_lucky(x):
    if x == 3:
        return ('True')
    if x == 4:
        return ('True')
    if x == 8:
        return ('True')
    if x == 7:
        return ('True')
    else:
        return ('False')

    print('')

#10 This function will pluralize
def pluralize(z):
    if not z:
        return plural
    print('')
main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:17:27.133

你的`is_even()`和`is_odd()`功能看起来`evenly-odd`..

好吧，那只是个玩笑.. 抱歉.. 但是您使用了两个不同的参数`num1`，`num2`而您使用的变量`x`被分配给了一个未知变量`is_even`，我不明白那里在做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:32:14.893

如果我不得不猜测，我会说你所做的是一次编写所有 10 个函数，然后将整个混乱烧毁，看看它是否有效。在前半个小时用头撞它之后，你可能已经到了这样的程度，你只是随机改变东西，看看是否奇迹般地烟雾会消失。

由于这似乎是一项非常基本的任务，我将避免建议使用测试驱动开发之类的东西，但您可以通过采用更渐进的方法让您的生活更轻松。

首先从您的 main 开始并让它运行，以便您的所有函数调用都可以正常工作而不会产生错误，例如：

```
def main():
    x = int(input("Give me integer #1: "))
    y = int(input("Give me integer #2: "))
    z = input("Give me a string: ")
    print("min:", min(x, y))
    print("max:", max(x, y))
    print("equal:", equal(x, y))
    print("is_even:", is_even(x))
    print("is_odd:", is_odd(x))
    print("format_dollar:", format_dollar(x))
    print("lab_grade:", lab_grade(x))
    print("is_unlucky:", is_unlucky(x))
    print("is_lucky:", is_lucky(x))
    print("pluralize:", pluralize(z))

def min(x, y):
    return x

def max(x, y):
    return x

# Fill in all the other functions here in the same fashion.

main() 
```

对所有函数执行相同的操作，只需返回传入的第一个参数。一旦获得它，您的代码就会运行而不会产生任何错误。逐个修复每个函数以返回正确的结果。让你的生活更轻松的一个技巧是将 main() （仅用于测试）破解为：

```
def main():
    #x = int(input("Give me integer #1: "))
    #y = int(input("Give me integer #2: "))
    #z = input("Give me a string: ")
    x = 5
    y = 8
    z = 'foobar'

    print("min:", min(x, y))
    print("max:", max(x, y))
    print("equal:", equal(x, y))
    print("is_even:", is_even(x))
    print("is_odd:", is_odd(x))
    print("format_dollar:", format_dollar(x))
    print("lab_grade:", lab_grade(x))
    print("is_unlucky:", is_unlucky(x))
    print("is_lucky:", is_lucky(x))
    print("pluralize:", pluralize(z)) 
```

这样您就可以快速运行程序，而无需每次都输入。一旦你让它运行良好，你就可以从输入前面删除注释并删除你的硬编码值并在 main() 不变的情况下将其提交。

返回 True/False 时，您应该使用实际的布尔值 True 和 False，而不是它们的字符串表示形式。此外，作为专门调用 elif 的作业，您可能应该使用 if/elif/else 语句，而不是像您的代码那样使用一堆谨慎的 if。

```
#9 This will determine if the function is lucky
#  x = number to test
# returns True if number is lucky, else False
def is_lucky(x):
    if x == 3:
        return True
    elif x == 4:
        return True
    elif x == 8:
        return True
    elif x == 7:
        return True
    else:
        return False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:00:58.860

甚至改变：

```
def is_even(num1,num2):
    is_even = x
    if x % 2 == 0: return ("True")
    else: return ("False") 
```

至：

```
def is_even(num1):
    if num1 % 2 == 0: 
        return ("True")
    else: 
        return ("False") 
```

为什么？：

*   你只需要一个输入
*   你不应该使用全局 x
*   您不应该将函数 is_even 设置为一个值。

是奇怪的，而 format_dollar 也有类似的问题。

# c# - Parallel.ForEach 问题 - 文件上的读写 - 文件正在使用错误

> ID：12570495
> 
> 赞同：2
> 
> 时间：2012-09-24T18:11:24.943
> 
> 标签：c#, file, windows-applications, read-write, parallel.foreach

我对 Parallel.ForEach 真的很困惑......它是如何工作的？
下面的代码有错误->`File Is In Use`

```
Parallel.ForEach(list_lines_acc, (line_acc, list_lines_acc_state) =>
{
     FileStream file = 
         new FileStream(GPLfilePath, FileMode.Open, FileAccess.ReadWrite);
     StreamReader reader = new StreamReader(file);
     var processed = string.Empty;
     Ok_ip_port = string.Empty;
     while (reader.EndOfStream)
     {
         if (string.IsNullOrEmpty(Ok_ip_port))
         {
             Ok_ip_port = reader.ReadLine();
         }
         else
         {
             string currentLine = reader.ReadLine();
             processed += currentLine + Environment.NewLine;
         }
     }
     StreamWriter writer = new StreamWriter(file);
     writer.Write(processed);

     reader.Close();
     writer.Close();
     file.Close();
}); 
```

你能告诉我如何解决这个问题吗？此代码只是一个示例。

我想在 Parallel.ForEach 中使用字符串数组和列表，但添加或编辑这些集合总是存在问题。你能举个例子吗？我正在使用 Visual Studio 2010 + .NET Framework 4.0

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T18:32:37.197

在您的代码中，如所写，每个线程都*使用相同的文件*，并有效地尝试附加到它。即使这可行，您也会遇到糟糕的竞争条件（因为线程会尝试同时附加到同一个文件）。

您看到的错误纯粹是因为您在每次循环迭代中使用相同的文件，所以当您尝试打开文件（在第一次迭代之后）时，它会出错，因为它是由不同的循环迭代打开的。

此外，您从不使用循环变量 ( `line_acc`)，因此这里根本不需要循环。这可以在没有 的情况下编写`Parallel.ForEach`，并且您有相同的结果，没有问题。

话虽如此 - 如果这是示例代码，您会发现纯粹由文件 I/O 绑定的循环往往不能很好地并行化。实际使用的驱动器将成为限制因素，因此运行纯粹并行读取和写入文件的代码通常会导致生成的代码运行得比顺序运行更慢，而不是更快。

> 我想在 Parallel.ForEach 中使用字符串数组和列表，但添加或编辑这些集合总是有问题

您“作为示例”显示的代码没有执行此操作，因此很难看出您的问题可能发生在哪里。您可以写入数组或`List<T>`按索引，但不能在没有额外同步（例如 a `lock`）的情况下在并行循环中添加到列表，因为`List<T>`写入不是线程安全的。如果您尝试从集合中读取和写入，您可能会考虑查看命名空间，其中包含您可以在循环[`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)中安全使用的线程安全集合。`Parallel.ForEach`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:16:34.180

如[本问题](https://stackoverflow.com/questions/9913251/file-copy-in-parallel-foreach)所述：

> 您没有同步对索引的访问，这意味着您有一场比赛。这就是为什么你有错误。出于说明目的，您可以通过使用 Interlocked.Increment 来避免竞争并保持此特定设计。

```
private static void Func<T>(IEnumerable<T> docs)
{
    int index = -1;
    Parallel.ForEach(
        docs, doc =>
        {
            int nextIndex = Interlocked.Increment(index);
            CreateFolderAndCopyFile(nextIndex);
        }
    );
} 
```

> 但是，正如其他人所建议的那样，提供循环索引的 ForEach 的替代重载显然是解决此特定问题的更清洁的解决方案。
> 
> 但是当你让它工作时，你会发现复制文件是 IO 绑定而不是处理器绑定，我预测并行代码会比串行代码慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-25T14:01:29.897

在有问题的代码周围使用一个`lock`对象......执行将等待锁被释放，您将永远不会有多个线程访问资源......并行 ForEach 在这种情况下不会增加性能。这是一个简单的例子：

```
private Object fileLock = new Object();
private void WriteLog(string line)
{
    lock (fileLock)
    {
        string strNomLog = @".\MyFile.log";
        System.IO.File.AppendAllText(strNomLog, line);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:28:17.467

要消除文件使用中的错误（假设它正在使用，因为另一个线程正在写入它），您必须同步对文件的访问。这通常意味着每个并行执行都在等待其他执行完成写入，从而违背了并行运行的目的。

# c# - protobuf-net 是否支持 System.Collections.Queue？

> ID：12570496
> 
> 赞同：2
> 
> 时间：2012-09-24T18:11:29.063
> 
> 标签：c#, .net, protobuf-net

我使用 protobuf-net 而不是 binaryformatter 运行我的客户端/服务器应用程序，我得到下一个异常：**"No serializer defined for type: System.Collections.Queue"**。我不完全确定，可能是我做错了什么的原因......因为我已经询问过 Dictionary/List 并且支持这些类型（[我可以序列化一个对象（包含成员：​​字典、列表......等）在 Mono 中并在 MS.NET 中反序列化它，反之亦然，使用 protobuf-net？](https://stackoverflow.com/questions/12504275/can-i-serialize-an-object-containing-members-dictionary-list-etc-in-mono)）。

我刚刚读到：[http ://code.google.com/p/protobuf-net/wiki/GettingStarted](http://code.google.com/p/protobuf-net/wiki/GettingStarted) *“支持： **任何实现 IEnumerable 并具有 Add(T) 方法的类型**”* 和队列[http://msdn.microsoft .com/en-us/library/system.collections.queue.aspx](http://msdn.microsoft.com/en-us/library/system.collections.queue.aspx)没有 Add(T)...

**问：** 但我想完全确定。protobuf-net 是否支持**System.Collections.Queue**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:44:27.777

目前，不：它没有。为了序列化的目的，我建议将数据视为列表。作为参考，`XmlSerializer`也讨厌它 - 这是`XmlSerializer`输出`Queue<string>`：

> “您必须在 System.Collections.Generic.Queue`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] 上实现默认访问器，因为它继承自 ICollection。”

# php - 此 SQL/PHP 代码中的语法错误是什么？

> ID：12570497
> 
> 赞同：-3
> 
> 时间：2012-09-24T18:11:29.407
> 
> 标签：php, mysql

Dreamweaver 在以下代码的第 3 行报告错误：

```
if (isset($_POST['sitename']))
    {
        $query = "INSERT INTO dllist (name, url, pr) VALUES ( "$_REQUEST['sitename'], $_REQUEST['siteurl'], $_REQUEST['pagerank']" )";
        $result = mysql_query($query) 
            or die("Query Failed".mysql_error());

        echo "<br />Website Has been added<br />";

    } 
```

另外，在我的浏览器中运行代码时会报以下错误

`Parse error: syntax error, unexpected '$_REQUEST' (T_VARIABLE)`

谁能告诉我错误在哪里？我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:13:22.807

逗号（以及您缺少值周围的容器（例如单引号）的事实），它应该是：

```
 $query = "INSERT INTO dllist (name, url, pr) VALUES ('".$_REQUEST['sitename']."', '".$_REQUEST['siteurl']."', '".$_REQUEST['pagerank']."')"; 
```

虽然这仍然是不好的做法，而且它没有 SQL 注入保护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:13:14.210

您需要连接字符串。更改`VALUES ("`为`VALUES (" .`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:14:21.807

您在插入查询中输入的值需要单独引用，如下所示： `$query = "INSERT INTO dllist (name, url, pr) VALUES ( '$_REQUEST['sitename']', '$_REQUEST['siteurl']', '$_REQUEST['pagerank']' )";`

# ios - iOS6 和 Armv7 的 iOS 链接问题

> ID：12570500
> 
> 赞同：1
> 
> 时间：2012-09-24T18:12:06.770
> 
> 标签：ios, xcode, frameworks, ios6, armv7

我最近打开了我以前工作的应用程序（在我升级到适用于 iOS6 的新 Xcode 之前）并且我遇到了一些错误。我已经重新下载了消除错误的框架，但这些相同的框架现在似乎给我带来了更多麻烦。下面是错误...

```
Ld /Users/JohnSlater/Library/Developer/Xcode/DerivedData/iFestApp-avmgjnvetjnjecdjprczkbgdkfas/Build/Intermediates/iFestApp.build/Debug-iphoneos/iFestApp.build/Objects-normal/armv7/iFestApp normal armv7
    cd "/Users/JohnSlater/Desktop/iOS Apps/iFestival for V 2012"
    setenv IPHONEOS_DEPLOYMENT_TARGET 5.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/JohnSlater/Library/Developer/Xcode/DerivedData/iFestApp-avmgjnvetjnjecdjprczkbgdkfas/Build/Products/Debug-iphoneos "-L/Users/JohnSlater/Desktop/iOS Apps/iFestival for V 2012/iFestApp/Resources/Frameworks/Airship" -F/Users/JohnSlater/Library/Developer/Xcode/DerivedData/iFestApp-avmgjnvetjnjecdjprczkbgdkfas/Build/Products/Debug-iphoneos -filelist /Users/JohnSlater/Library/Developer/Xcode/DerivedData/iFestApp-avmgjnvetjnjecdjprczkbgdkfas/Build/Intermediates/iFestApp.build/Debug-iphoneos/iFestApp.build/Objects-normal/armv7/iFestApp.LinkFileList -dead_strip -fobjc-link-runtime -miphoneos-version-min=5.0 -framework QuartzCore -framework Security -framework AudioToolbox -framework MessageUI -framework StoreKit -framework CoreTelephony -lsqlite3 -framework AVFoundation -lz -framework MobileCoreServices -framework SystemConfiguration -framework CFNetwork -framework CoreLocation -framework MapKit -framework UIKit -framework Foundation -framework CoreGraphics -lUAirship-1.3.3 -lUAirshipPush-1.3.3 -o /Users/JohnSlater/Library/Developer/Xcode/DerivedData/iFestApp-avmgjnvetjnjecdjprczkbgdkfas/Build/Intermediates/iFestApp.build/Debug-iphoneos/iFestApp.build/Objects-normal/armv7/iFestApp

Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_TestFlight", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_FlurryAnalytics", referenced from:
      objc-class-ref in AppDelegate.o
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

谁能给我一些指导，因为我一直无法找到一个直接的答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:35:04.573

如果您想支持 iPhone 5 配置，您必须重新配置整个项目并使其使用 armv7s 架构运行。

如果您只是想摆脱错误，您应该删除所有 armv7s 引用，包括所有库。

这可能会有所帮助：[Moving to iOS6 I get this linker error with most external packages](https://stackoverflow.com/questions/12398201/moving-to-ios6-i-get-this-linker-error-with-almost-all-external-packages/12410978#12410978)

# regex - CleanName 不清理 Excel VBA 中的“？

> ID：12570504
> 
> 赞同：0
> 
> 时间：2012-09-24T18:12:18.417
> 
> 标签：regex, string, vba, excel

在从此处添加行之前，我正在更新问题以显示我已经拥有的内容...

```
Function CleanName(strName As String) As String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/", "")
    CleanName = Replace(CleanName, "*", "")
    CleanName = Replace(CleanName, ".", "")
    CleanName = Replace(strName, "\", "")

End Function 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T00:25:38.987

[您可以使用正则表达式](http://msdn.microsoft.com/en-us/library/k9z80300%28v=VS.84%29.aspx)，而不是多个字符串替换

```
Function KillChars(strIn As String) As String
Dim objRegex As Object
Set objRegex = CreateObject("vbscript.regexp")
With objRegex
.Global = True
.Pattern = "[\/\*\.\\""""]+"
KillChars = .Replace(strIn, vbNullString)
End With
End Function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T18:23:17.920

**更新**

马特，在您更新的帖子中，将代码更改为：

```
Function CleanName(strName As String) As String
'will clean part # name so it can be made into valid folder name
'may need to add more lines to get rid of other characters

    CleanName = Replace(strName, "/", "") '-> only use strName the first time, since you are passing that string to the Function
    CleanName = Replace(CleanName, "*", "")
    CleanName = Replace(CleanName, ".", "")
    CleanName = Replace(CleanName, "\", "") '-> if you use strName here, you lose your first 3 replacments
    CleanName = Replace(CleanName, """", "") '-> this is the correct syntax to remove the "
    '-> to Sid's point, this should work too
    'CleanName = Replace(CleanName, Chr(34), "")

End Function 
```

既然别人都在回答，那我就把评论改成回答入党了！

尝试

`CleanName = Replace(CleanName, """", "")`

您需要将引号括在双引号中，以告诉 VBA 您要查找实际的实际引号，而不是它自动识别的特殊字符。 *（丹尼尔库克下面的评论也涉及到它。）*

为了他人的利益，CleanName 是一个自定义函数，用于清除不需要的字符串。有关更多信息，请参阅此链接：[CleanName](https://stackoverflow.com/questions/10803834/is-there-a-way-to-create-a-folder-and-sub-folders-in-excel-vba)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T18:18:05.800

将其粘贴到模块中

```
Public Function CleanName(rng As Range) As Variant
    CleanName = Replace(rng.Value, Chr(34), "")
End Function 
```

**跟进**

```
Option Explicit

Public Function CleanName(rng As Range) As Variant
    On Error GoTo Whoa

    Dim vVal As Variant

    vVal = rng.Value
    vVal = Replace(vVal, Chr(34), "") ' "
    vVal = Replace(vVal, Chr(42), "") ' *
    vVal = Replace(vVal, Chr(46), "") ' .
    vVal = Replace(vVal, Chr(47), "") ' /
    vVal = Replace(vVal, Chr(92), "") ' \

    CleanName = vVal
Whoa:
End Function 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-24T19:21:45.977

这是另一种选择:)

```
Option Explicit

    Function CleanName(ByRef str As String) As String
    Dim removeChars As String
    Dim i As Long
        removeChars = "/*."""

        For i = 1 To Len(removeChars)
            str = Replace(str, Mid(removeChars, i, 1), vbNullString)
        Next i
        CleanName = str

    End Function 
```

并测试

```
Sub Test()
Dim messyString As String

    messyString = "/*It Works!""."
    Debug.Print CleanName(messyString)

End Sub 
```

# sql - 另一个游标内的游标没有返回正确的结果

> ID：12570505
> 
> 赞同：1
> 
> 时间：2012-09-24T18:12:18.977
> 
> 标签：sql, cursor

最近在一个站点，我们有很多丢失的图像，我必须恢复。该站点是一家医院，我能够恢复所有图像并将所有内容放入一个临时表中，其中包括受影响的：遭遇、病历编号、文档和字幕。我现在正在尝试创建一个长文本文件来显示每个受影响的遭遇，如果该遭遇有多个文档，它将显示该遭遇的所有文档。每个受影响的帐户将在文件中以 %%START 开头并以 %%END 结尾。我想要做到这一点，最好做一个游标来对这张表中的遭遇进行排序。然后....光标浏览该遭遇的所有文件以包括该遭遇。我的脚本如下所示：

```
declare
@name varchar(40),
@mrn varchar(20),
@encounter varchar(20),
@document varchar(30),
@subtitle varchar(30),
@cmd varchar(255),
@count int

declare find_affected cursor for 
select distinct p.name, m.mrn, m.encounter from mck_hpf..missing_documents m
join his..patients p on m.mrn=p.mrn

open find_affected

fetch next from find_affected into @mrn, @name, @encounter while
@@FETCH_STATUS=0

begin
select @mrn = mrn from mck_hpf.dbo.missing_documents where encounter = @encounter
select @name=name from his.dbo.patients where mrn=@mrn
select @encounter = encounter from mck_hpf.dbo.missing_documents where encounter = @encounter
Print '%%START'
Print ''
Print 'Name:               ' + @name
Print 'MRN:                ' + @mrn
Print 'Encounter:          ' + @encounter
Print 'Possible affected documents in this chart:'

declare find_document cursor for 
select distinct(document), subtitle from mck_hpf..missing_documents m
join his..encounters e on e.encounter=m.encounter where @mrn=m.mrn and @encounter=m.encounter

open find_document
fetch next from find_document into @document, @subtitle 
while @@FETCH_STATUS=0
begin
select @document = document from mck_hpf.dbo.missing_documents where encounter = @encounter 
select @subtitle = subtitle from mck_hpf.dbo.missing_documents where encounter = @encounter and document=@document
Print @document + '-' + @subtitle
fetch next from find_document into @document, @subtitle 
end
close find_document
deallocate find_document
Print ''
Print ''
Print '%%END'

fetch next from find_affected into @mrn, @name, @encounter
end
close find_affected
deallocate find_affected
go 
```

该脚本运行良好，并且可以正确循环遇到……但由于某种原因，它不适用于文档。示例....遇到 123 在 missing_documents 表中有 2 个文档让我们说称为 UB04 和 1500....当脚本完成时，而不是说：

```
Name:               Mickey Mouse                           
MRN:                11111111          
Encounter:          123456789 
```

此图表中可能受影响的文档：

```
UB04                             
1500 
```

它会说：

```
Name:               Mickey Mouse                           
MRN:                11111111          
Encounter:          123456789 
```

此图表中可能受影响的文档：

```
UB04                             
UB04 
```

就像光标知道有 2 个丢失的文档，但它一遍又一遍地重复找到的第一个文档。IT 对所有遭遇执行此操作……如果缺少 6 个文档，它会拾取第一个并不断重复。

我花了一段时间才达到这一点并让它工作，我只是不知道从哪里开始，因为我认为我的代码看起来是正确的。我在这里搜索但没有找到任何可以帮助我的东西。任何帮助，将不胜感激。非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:21:20.947

您正在重置 print 语句正上方的 @subtitle 。. .

```
select @document = document from mck_hpf.dbo.missing_documents where encounter = @encounter 
select @subtitle = subtitle from mck_hpf.dbo.missing_documents where encounter = @encounter and document=@document
Print @document + '-' + @subtitle 
```

如果要查看第二个光标的值，请在选择*之前*执行打印：

```
Print @document + '-' + @subtitle;
select @document = document from mck_hpf.dbo.missing_documents where encounter = @encounter ;
select @subtitle = subtitle from mck_hpf.dbo.missing_documents where encounter = @encounter and document=@document; 
```

# javascript - Chrome 阻止了 Google Drive 授权弹出窗口

> ID：12570507
> 
> 赞同：0
> 
> 时间：2012-09-24T18:12:26.223
> 
> 标签：javascript, google-drive-api

我以这种方式插入 Drive SDK 的 javascript 代码：

```
function upload_click(){
  jQuery(this).toggle();
  jQuery.getScript("https://apis.google.com/js/client.js?onload=handleClientLoad");
}

jQuery(document).ready(function(){
  var upload_button = {
    'style': 'height: 30px; width: 100px;',
    'id': 'upload-btn'
  },
      div = 'body',
      $div = jQuery(div);
  $div.append('<input type="file" id="filePicker" style="visibility: hidden" />');
  $div.append('<button style="'+upload_button['style']+'" id="'+upload_button['id']+'">Upload</button>');
  jQuery('#'+upload_button['id']).click(upload_click);

}); 
```

用户点击上传按钮后，Chrome 有什么办法不阻止身份验证弹出窗口？AFAIK，它的工作方式，它总是会被阻止，对吧？

要复制它，请点击“在您的网站中预览”并输入您的客户端 ID：[http ://siteapps.com/app/google_drive_upload_widget-342](http://siteapps.com/app/google_drive_upload_widget-342)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:16:34.110

通常，如果弹出窗口来自按钮单击，chrome 将允许它。我没有安装它来预览它，所以你可能需要通知用户取消阻止弹出窗口。

# ember.js - EmberJS {{#with}} 块不显示

> ID：12570514
> 
> 赞同：0
> 
> 时间：2012-09-24T18:13:08.663
> 
> 标签：ember.js, towerjs

控制器看起来像这样

```
class App.ContactsController extends Tower.Controller
  index: (params) ->
    @set('person', App.HighrisePerson.create())
    @render "index" 
```

视图看起来像这样

```
App.ContactsEditView = Ember.View.extend
  templateName: 'contacts/edit'
  resourceBinding: 'controller.person'
  init: (args...) ->
    @._super(args...)
    console.log(@.get('resource'))
    console.log('inited') 
```

使用上面的块，我在控制台中看到资源设置为我的 Ember.Object 的一个实例

但使用以下视图代码

```
div class: "row-fluid", ->
  text "{{#with resource}}"
  text "Hello"
  text "{{/with}}" 
```

父视图的相关部分

```
div class: "row-fluid contact-form", ->
  div class: "row-fluid", ->
    h1 "Want to work with us?"
    p "So...you want to be kohactivated!?!? Please take a few moments to fill out the form below and provide us with some details about your project, company or start-up."
  text "{{view App.ContactsEditView}}" 
```

我没有看到 hello 的渲染输出

如果我将你好移到#with 块之外，我会看到你好，

所以我认为由于某种原因它没有识别资源

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:24:46.587

没错——它`resource`在当前的车把上下文而不是视图中寻找（我相信从 ember.js 0.9.8 开始，它不再是默认上下文）。您将需要`view.resource`。

（旁注：相反，要从视图中引用车把上下文，请使用`context.whatever`）

# java - Spring 内容集成渠道

> ID：12570518
> 
> 赞同：1
> 
> 时间：2012-09-24T18:13:27.680
> 
> 标签：java, spring, integration, spring-integration

我已经在当前成功地使用了 Spring Integration 来满足一些需求。惊人的..

在重负载时观察到一些奇怪的行为，其中同一条消息似乎被处理了不止一次。我可以确认，因为数据库中有多行，这通常是通过通道配置的链上的最后一个命令。

进一步深入手册，看起来负载平衡似乎是由 spring 自动完成的。该手册说消息在多个消息处理程序之间是平衡的。

问题是：

1.  默认情况下，一个通道上有多少个处理程序？加载的 spring XML 似乎没有该配置。我所做的就是这个（根据手册中的建议）：

> ```
> <int:channel id="SwPath.Channel"/>
> <int:chain id="SwPath.chain" input-channel="SwPath.Channel">
> </int:chain> 
> ```

我可以禁用故障转移，但我很想知道默认情况下存在多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:19:24.660

自从我研究这些负载平衡器已经有一段时间了，但我记得线程池中的默认线程数在 2 到 10 之间。

您可能发现了并发错误。

如果您打开 TRACE 日志记录，负载均衡器将为您提供大量信息，但这很容易隐藏问题。

如果您要使用 JUnit 测试用例创建 JIRA 问题，我相信更容易弄清楚究竟发生了什么。

# android - Android动态加载资源

> ID：12570519
> 
> 赞同：4
> 
> 时间：2012-09-24T18:13:37.570
> 
> 标签：android, android-resources, dex

我正在尝试使用[DexClassLoader](http://developer.android.com/reference/dalvik/system/DexClassLoader.html)在我的应用程序中下载 JAR/APK。我想模块化我的应用程序，以便我可以下载用户可能会按需进行的 UI 流，而不是将它们全部一起发送到我的主应用程序中。

加载实际的类工作正常，我设法加载了一些 UI 组件，我可以将它们添加到我的主机活动中。

我的问题是，显然我无法访问或添加资源（字符串、可绘制对象、布局）到我下载的包中，因为它们没有随我的主机 APK 一起提供。是否可以为我的可下载 JAR/APK 动态加载资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:04:21.450

您可以“动态”下载任何您想要的资源，将它们放在您选择的目录中，然后在您的应用程序中使用它们。这是我目前在应用程序中所做的。我认为您不能将它们与项目中的资源放在同一目录中，但这有关系吗？

# c# - 验证 texboxes 并弹出错误消息和传递变量

> ID：12570520
> 
> 赞同：0
> 
> 时间：2012-09-24T18:13:38.407
> 
> 标签：c#, asp.net, validation, dynamic

好吧，所以我完全不知道如何做到这一点。我需要做的是使用正则表达式验证文本框的某些字段和所有字段的必填字段。我已经设置好了，所以当用户单击按钮时，每次都会显示一组新的输入字段，这样如果他们有多个工作经验，他们就可以无限地输入。我试过的代码不起作用。还可能要注意，由于遇到此问题，到目前为止我只完成了地址一。一旦我弄清楚了，我就可以做剩下的了。

我遇到的一个主要问题是我希望它在显示下一个面板之前在按钮单击上进行验证。但我不能通过对象，我可能很笨，但我不知道该怎么做。就像我在 ASP.net 页面中拥有对象一样，这不会有问题，但因为我是在 c# 代码中创建这些对象，所以我不知道该怎么做。另外，我需要在弹出窗口中显示错误消息，这样它就不会占用面板上的空间。

我知道我问了很多，但我真的迷路了。

**ASP.net 代码只是一个按钮。**

**C#代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    // Add any controls that have been previously added dynamically

    for (int i = 0; i < TotalNumberAdded; ++i)
    {
        addcontrolsemployment(i + 1);
    }

}

private void addcontrolsemployment(int controlNumber)
    {

        var newPanel = new Panel();

        var employerLabel = new Label();
        var addressLabel = new Label();
        var phoneLabel = new Label();
        var fromDateLabel = new Label();
        var toDateLabel = new Label();
        var supervisorLabel = new Label();
        var jobTitleLabel = new Label();
        var dutiesLabel = new Label();
        var hoursLabel = new Label();
        var wageLabel = new Label();
        var leavingLabel = new Label();

        var employerTextbox = new TextBox();
        var addressTextbox = new TextBox();
        var phoneTextbox = new TextBox();
        var fromDateTextbox = new TextBox();
        var toDateTextbox = new TextBox();
        var supervisorTextbox = new TextBox();
        var jobTitleTextbox = new TextBox();
        var dutiesTextbox = new TextBox();
        var hoursTextbox = new TextBox();
        var wageTextbox = new TextBox();
        var leavingTextbox = new TextBox();

        // textbox needs a unique id to maintain state information
        employerTextbox.ID = "EmployerTextBox_" + controlNumber;
        addressTextbox.ID = "AddressTextbox_" + controlNumber;
        phoneTextbox.ID = "phoneTextbox_" + controlNumber;
        fromDateTextbox.ID = "fromDateTextbox_" + controlNumber;
        toDateTextbox.ID = "toDateTextbox_" + controlNumber;
        supervisorTextbox.ID = "supervisorTextbox_" + controlNumber;
        jobTitleTextbox.ID = "jobTitleTexbox_" + controlNumber;
        dutiesTextbox.ID = "dutiesTextbox_" + controlNumber;
        dutiesTextbox.Width = 250;
        hoursTextbox.ID = "hoursTexbox_" + controlNumber;
        wageTextbox.ID = "wageTexbox_" + controlNumber;
        leavingTextbox.ID = "leavingTexbox_" + controlNumber;
        leavingTextbox.Width = 250;
        //Label text
        employerLabel.Text = "Employer: ";
        addressLabel.Text = "Address: ";
        phoneLabel.Text = "Phone #: ";
        toDateLabel.Text = "To Date: ";
        fromDateLabel.Text = "From Date: ";
        supervisorLabel.Text = "Supervisor: ";
        jobTitleLabel.Text = "Job Title: ";
        dutiesLabel.Text = "Major Duties: ";
        hoursLabel.Text = "Hours Per Week:";
        wageLabel.Text = "Final Wage: $";
        leavingLabel.Text = "Reason for Leaving: ";

        //Regular Expression and Required field validators
        var addressRegEx = new RegularExpressionValidator();
        var addressRequired = new RequiredFieldValidator();
        addressRequired.Text = "Address is Required";
        addressRequired.ErrorMessage = " Please Enter less than 50 characters for address";
        addressRequired.ID = "addressRequired" + controlNumber; addressRequired.ControlToValidate = addressTextbox.Text;
        addressRegEx.ValidationExpression = ".{0,50}"; 
        addressRegEx.ControlToValidate = addressTextbox.Text;

        // add the label and textbox to the panel, then add the panel to the form
        newPanel.Controls.Add(new LiteralControl("<table><tr>"));
        newPanel.Controls.Add(new LiteralControl("<br />"));
        newPanel.Controls.Add(new LiteralControl("<td class='title-text'  >"));
        newPanel.Controls.Add(employerLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
        newPanel.Controls.Add(employerTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text' >"));
        newPanel.Controls.Add(addressLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(addressTextbox); newPanel.Controls.Add(addressRegEx); newPanel.Controls.Add(addressRequired);
        newPanel.Controls.Add(new LiteralControl("</td>"));

        newPanel.Controls.Add(new LiteralControl("<td class='title-text'>"));
        newPanel.Controls.Add(phoneLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(phoneTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(fromDateLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(fromDateTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(toDateLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(toDateTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(supervisorLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(supervisorTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(jobTitleLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(jobTitleTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(dutiesLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
        newPanel.Controls.Add(dutiesTextbox);

        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(hoursLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(hoursTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(wageLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(wageTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(leavingLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
        newPanel.Controls.Add(leavingTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr></table>"));
        form1.Controls.Add(newPanel);

    }

    protected int TotalNumberAdded
    {
        get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
        set { ViewState["TotalNumberAdded"] = value; }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        // Increase the number added and add the new label and textbox
        TotalNumberAdded++;
        addcontrolsemployment(TotalNumberAdded);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:23:00.487

您可以尝试使用此代码

```
<asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>

<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server"
    ControlToValidate="TextBox1" ErrorMessage="Please Enter good values" 
    ValidationExpression="^.....$" >
</asp:RegularExpressionValidator> 
```

注意：调整你的`ValidationExpression`

# jquery - 添加所有链接的宽度

> ID：12570526
> 
> 赞同：0
> 
> 时间：2012-09-24T18:14:03.650
> 
> 标签：jquery

我需要计算一个div内所有链接的with。

```
var myWidth = 0;

$("#myDiv a").each(function() {
    myWidth = myWidth + $("#myDiv a").width();
}); 
```

我得到的宽度似乎不准确......我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:15:12.253

你需要在这里使用它代表函数迭代 `$(this)`中的当前项目，总是会给你 div 中第一个锚点的宽度。`each``$("#myDiv a").width()`

```
var myWidth = 0; 
$("#myDiv a").each(function() {
    myWidth = myWidth + $(this).width();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:15:18.047

你应该得到`this`元素的宽度（即 current `<a>`）：

```
var myWidth = 0;

$("#myDiv a").each(function() {
    myWidth = myWidth + $(this).width();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T18:15:23.087

```
$("#myDiv a").each(function() {
    myWidth += $(this).width(); // USE `this` WIDTH!
}); 
```

或以不同的方式进行选择（仅供参考）：

```
$("a", "#myDiv").each(function() {
    myWidth += $(this).width(); 
}); 
```

# java - 线程“Thread-1”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jnivideoInputLib

> ID：12570533
> 
> 赞同：1
> 
> 时间：2012-09-24T18:14:35.800
> 
> 标签：java, opencv, javacv

> **可能重复：**
> [UnsatisfiedLinkError 的原因是什么？](https://stackoverflow.com/questions/2446426/what-is-the-cause-of-an-unsatisfiedlinkerror)

我是 Java 编程新手。我正在使用 javacv 和 opencv 进行面部识别。我在 linux 12.04 上使用 eclipse，带有 javacv-0.1 和 opencv-2.4.0.tar.bz2。

这是我一直在尝试的代码

```
import static com.googlecode.javacv.cpp.opencv_core.cvFlip;

import static com.googlecode.javacv.cpp.opencv_highgui.cvSaveImage;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import com.googlecode.javacv.VideoInputFrameGrabber;
import com.googlecode.javacv.cpp.opencv_core.IplImage;

public class Grabbershow implements Runnable {
//final int INTERVAL=1000;///you may use interval
IplImage image;
CanvasFrame canvas = new CanvasFrame("Web Cam");
public Grabbershow() {
    canvas.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);
}
@Override
public void run() {
    FrameGrabber grabber = new VideoInputFrameGrabber(0); // 1 for next camera
    int i=0;
    try {
        grabber.start();
        IplImage img;
        while (true) {
            img = grabber.grab();
            if (img != null) {
                cvFlip(img, img, 1);// l-r = 90_degrees_steps_anti_clockwise
                cvSaveImage((i++)+"-aa.jpg", img);
                // show image on window
                canvas.showImage(img);
            }
             //Thread.sleep(INTERVAL);
        }
    } catch (Exception e) {
    }
} 
```

我收到了这个错误

```
Exception in thread "Thread-1" java.lang.UnsatisfiedLinkError: no jnivideoInputLib in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at com.googlecode.javacpp.Loader.loadLibrary(Loader.java:444)
    at com.googlecode.javacpp.Loader.load(Loader.java:368)
    at com.googlecode.javacpp.Loader.load(Loader.java:315)
    at com.googlecode.javacv.cpp.videoInputLib.<clinit>(videoInputLib.java:81)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
    at com.googlecode.javacpp.Loader.load(Loader.java:334)
    at com.googlecode.javacpp.Loader.load(Loader.java:315)
    at com.googlecode.javacv.cpp.videoInputLib$videoInput.<clinit>(videoInputLib.java:193)
    at com.googlecode.javacv.VideoInputFrameGrabber.start(VideoInputFrameGrabber.java:96)
    at com.googlecode.javacv.VideoInputFrameGrabber.start(VideoInputFrameGrabber.java:93)
    at Grabbershow.run(Grabbershow.java:21)
    at java.lang.Thread.run(Thread.java:679) 
```

我在论坛上阅读了一些答案，但我不理解它们并且无法解决这个问题。我需要你的帮助！我很绝望。

请帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T10:52:06.497

This line appears at the top of your error log :

```
no jnivideoInputLib in java.library.path 
```

Make sure that you have configured your environment correctly with the `-Djava.library.path` option.

# msbuild - 通过 BACPAC 将 SQL Server 2012 数据库复制到 SQL Azure（用于持续集成）

> ID：12570545
> 
> 赞同：4
> 
> 时间：2012-09-24T18:15:24.397
> 
> 标签：msbuild, azure-sql-database, sql-server-2012, dac, bacpac

我正在创建一个持续集成 MSBuild 脚本，它将本地 SQL Server 2012 中的数据库复制到 SQL Azure。

容易吧？

**方法**

经过大量研究，我遇到了以下方法：

1.  [使用 PowerShell 直接访问 DAC 库](http://www.sqlskills.com/BLOGS/BOBB/post/Using-PowerShell-with-DAC-30.aspx)，然后使用[MSBuild PowerShell 扩展来包装脚本](http://www.msbuildextensionpack.com/help/4.0.5.0/html/6a9ca4a5-ff2d-8493-8046-8de21bb0f4e9.htm)。这将需要安装 PowerShell 3 并研究如何使 MSBuild PowerShell 扩展与它一起工作，因为[显然 MS 将 DAC API 移动](http://social.msdn.microsoft.com/Forums/en-GB/sqlkjmanageability/thread/0bc0a167-9faa-4dfc-bfa0-1b54f6e7b8dc)到了最新版本库中的不同命名空间。PowerShell 将提供对 API 的直接访问，但可能需要相当多的样板文件。

2.  [使用示例 DAC 框架客户端工具](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Client%20Side%20Tools)，这需要自己编译，因为 Codeplex 提供的下载仅包括[托管版本](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation)。它还需要修复它们以使用 DAC 3.0 类，因为它们当前似乎使用的是早期版本的 DAC。`<Exec Command="" />`然后我可以从MSBuild 脚本中调用这些工具。更少的样板，如果我在路上遇到任何颠簸，我可以对源代码进行更改。

**流程**

无论使用哪种方法，该过程都可以是：

1.  从本地 SQL Server 2012 导出到本地 BACPAC
2.  将 BACPAC 上传到博客存储
3.  [通过托管 DAC](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation)将 BACPAC 导入 SQL Azure

或者：

1.  从本地 SQL Server 2012 导出到本地 BACPAC
2.  [通过客户端 DAC](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Client%20Side%20Tools)将 BACPAC 导入 SQL Azure

**问题**

对于似乎是标准功能的东西，以上所有内容似乎都付出了很多努力......所以在我开始重新发明轮子并记录结果以供所有人查看之前，是否有一些非常明显的东西我错过了这里？是否有我尚未发现的 MS 已发布的预先编写的脚本？

SQL Server Management Studio 2012 的 GUI 中有一个命令完全符合我的要求（右键单击本地数据库，单击“任务”，单击“将数据库部署到 SQL Azure”）。当然，如果在 GUI 中单击几下，它一定是某处命令行上的单个命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T21:08:31.413

所以我决定使用 PowerShell（因为这实际上更像是一个脚本），只有[客户端 DAC](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Client%20Side%20Tools)。[这里](http://www.sqlskills.com/BLOGS/BOBB/post/Using-PowerShell-with-DAC-30.aspx)的例子非常有用。

使用[MSBuild 扩展包](http://msbuildextensionpack.codeplex.com/)允许创建任务来包装 PowerShell 样板。

请注意，您必须安装 PowerShell 3 才能访问 DAC 3.0，最好通过安装 Windows Management Framework 3.0 来实现。

TaskFactory 包装器如下：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- This custom task encapsulates DAC Framework 3.0 BACPAC import and export routines,
       which are compatible with SQL Server 2012 and later, and SQL Azure -->

  <!-- Required Import to use MSBuild Extension Pack -->
  <PropertyGroup>
    <AssemblyFile>$(MSBuildExtensionsPath)\ExtensionPack\4.0\MSBuild.ExtensionPack.TaskFactory.PowerShell.dll</AssemblyFile>
    <SqlServerDacDll>C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin\Microsoft.SqlServer.Dac.dll</SqlServerDacDll>
  </PropertyGroup>

  <UsingTask TaskFactory="PowershellTaskFactory" TaskName="ExportBacpac" AssemblyFile="$(AssemblyFile)">
    <ParameterGroup>
      <ConnectionString Required="true" ParameterType="System.String" />
      <BacpacFile Required="true" ParameterType="System.String" /> 
      <DatabaseName Required="true" ParameterType="System.String" />
    </ParameterGroup>
    <Task>
      <![CDATA[
            #write progress to activity log
            $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High","Starting export of database '$databasename' to '$bacpacfile' with connection string '$connectionstring' ")

            # load in DAC DLL (requires config file to support .NET 4.0)
            # change file location for a 32-bit OS
            add-type -path "$(SqlServerDacDll)"

            # make DacServices object, needs a connection string
            $d = new-object Microsoft.SqlServer.Dac.DacServices $connectionstring

            # register events, if you want 'em
            register-objectevent -in $d -eventname Message -source "msg" -action { $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High", $Event.SourceArgs[1].Message.Message) }

            # Export schema and data from database $databasename
            $d.exportbacpac($bacpacfile, $databasename)

            # clean up event
            unregister-event -source "msg"

            $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High","Completed export of database '$databasename' to '$bacpacfile'")
      ]]>
    </Task>
  </UsingTask>

  <UsingTask TaskFactory="PowershellTaskFactory" TaskName="ImportBacpac" AssemblyFile="$(AssemblyFile)">
    <ParameterGroup>
      <ConnectionString Required="true" ParameterType="System.String" />
      <BacpacFile Required="true" ParameterType="System.String" /> 
      <DatabaseName Required="true" ParameterType="System.String" /><!-- Not relevant for Azure import, which uses the Bacpac file name as the database name -->
    </ParameterGroup>
    <Task>
      <![CDATA[
            #write progress to activity log
            $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High","Starting import of database '$databasename' from '$bacpacfile' with connection string '$connectionstring' ")

            # load in DAC DLL (requires config file to support .NET 4.0)
            # change file location for a 32-bit OS
            add-type -path "$(SqlServerDacDll)"

            # make DacServices object, needs a connection string
            $d = new-object Microsoft.SqlServer.Dac.DacServices $connectionstring

            # register events, if you want 'em
            register-objectevent -in $d -eventname Message -source "msg" -action { $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High", $Event.SourceArgs[1].Message.Message) }

            # Load bacpac from file & import to database named $databasename
            $bp = [Microsoft.SqlServer.Dac.BacPackage]::Load($bacpacfile)
            $d.importbacpac($bp, $databasename)

            # clean up event
            unregister-event -source "msg"

            $log.LogMessage([Microsoft.Build.Framework.MessageImportance]"High","Completed import of database '$databasename' from '$bacpacfile'")
      ]]>
    </Task>
  </UsingTask>

</Project> 
```

调用这些包装器的示例目标如下所示：

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="BacpacImportExport.xml"/>

  <PropertyGroup>
    <TempBacpacFile>$(ReleaseFolderPublish)\$(DestinationDBName).bacpac</TempBacpacFile>
  </PropertyGroup>

  <Target Name="CopyAndReplaceDatabaseViaBacpac">
    <Message Text="Clean bacpac directory"/>
    <Exec Command="mkdir $(ReleaseFolderPublish)\" IgnoreExitCode="true"></Exec>
    <Exec Command="del /Q $(ReleaseFolderPublish)\*.bacpac " IgnoreExitCode="true"></Exec>

    <MSBuild Projects="$(MSBuildProjectFile)" Targets="ReportBuildProgress" Properties="Message=Exporting database to BACPAC from source"/>
    <ExportBacpac
      ConnectionString="$(SourceConnectionString)"
      BacpacFile="$(TempBacpacFile)"
      DatabaseName="$(SourceDBName)"
    />

    <MSBuild Projects="$(MSBuildProjectFile)" Targets="ReportBuildProgress" Properties="Message=Dropping database from destination (does not fail on error)"/>
    <MSBuild.ExtensionPack.SqlServer.SqlCmd TaskAction="Execute" Server="$(DestinationDBServer)" Database="master"
                                            LogOn="$(DestinationDBUser)" Password="$(DestinationDBPass)"
                                            CommandLineQuery="DROP DATABASE [$(DestinationDBName)];"
                                            RedirectStandardError="true" SeverityLevel="1" />

    <MSBuild Projects="$(MSBuildProjectFile)" Targets="ReportBuildProgress" Properties="Message=Importing database from BACPAC to destination"/>
    <ImportBacpac
      ConnectionString="$(DestinationConnectionString)"
      BacpacFile="$(TempBacpacFile)"
      DatabaseName="$(DestinationDBName)"
    />

  </Target>
</Project> 
```

这可以通过调用参考实现[控制台应用程序](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation)来轻松修改为使用[托管 DAC](http://sqldacexamples.codeplex.com/wikipage?title=Import%20Export%20Service%20Client&referringTitle=Documentation) ，而不是调用.`<Exec Command="" />``<ImportBacpac />`

如果您发现任何改进，请告诉我！

# asp.net-mvc - Kendo UI MVC Grid - 即使创建项目也总是发出 Get 请求

> ID：12570546
> 
> 赞同：1
> 
> 时间：2012-09-24T18:15:25.520
> 
> 标签：asp.net-mvc, kendo-ui

我有如下所示的 KendoUI 网格实现，它将数据拉入并显示到网格中，但是在创建或更新时它不起作用，因为它总是向服务器发出 Get 请求，

控制器方法标记为 post 用于创建和更新 - [AcceptVerbs(HttpVerbs.Post)] 我们可以从客户端代码中指定 Http 方法吗？

排序也有同样的问题，Kendo UI 显示的示例演示应用程序都使用 Post 方法，但这一个使用 get，所以它没有正确地将排序相关的对象传递给控制器​​方法

```
@(Html.Kendo().Grid<Model.Storage>()    
.Name("Grid")    
.Columns(columns => {        
    columns.Bound(p => p.Id);
    columns.Bound(p => p.Name);
    columns.Bound(p => p.Path);
    columns.Bound(p => p.Default);
    columns.Command(command => { command.Edit(); });
})
.ToolBar(toolbar => toolbar.Create())
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Pageable()
.Sortable()
.Scrollable()
.DataSource(dataSource => dataSource        
    .Ajax()                 
    .Events(events => events.Error("error_handler"))
    .Model(model => model.Id(p => p.Id))
    .Create(update => update.Action("EditingInline_Create", "Storage"))
        .Read(read => read.Action("EditingInline_Read", "Storage"))
        .Update(update => update.Action("EditingInline_Update", "Storage"))
)
) 
```

对此的帮助将不胜感激..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:29:18.350

检查故障排除帮助主题：[http ://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/troubleshooting)

您没有包含**kendo.aspnetmvc.min.js**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T20:57:51.730

是的，您可以从客户端代码中指定 HttpMethod。将您的 DataSource 方法更改为如下所示：

```
.Create(update => update.Action("EditingInline_Create", "Storage").Type(HttpVerbs.Post))
.Read(read => read.Action("EditingInline_Read", "Storage").Type(HttpVerbs.Post))
.Update(update => update.Action("EditingInline_Update", "Storage").Type(HttpVerbs.Post)) 
```

！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:35:37.067

确保你没有使用 jQuery 1.8，我的控件也有类似的问题，结果证明是 1.8 的兼容性问题。

# ruby - 使用 Rack & Faraday 转发请求

> ID：12570552
> 
> 赞同：0
> 
> 时间：2012-09-24T18:16:09.967
> 
> 标签：ruby, http, rack, faraday

我想编写一个将请求转发到不同域的 Rack 应用程序。法拉第宝石可能适用于此。像这样的东西会很好：

我的`config.ru`文件：

```
...
my_app = lambda do |env|
  conn = Faraday.new(env)
  conn.url = "http://some-other-domain.com"
  env.get? ? conn.get : conn.post
end

run my_app 
```

会不会这么简单？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T01:21:33.487

您可能想查看 rack-rewrite ( [https://github.com/jtrupiano/rack-rewrite](https://github.com/jtrupiano/rack-rewrite) )。您可以使用它来定义和应用重写和重定向规则。适合您的用例的 rack-rewrite 的可能用法如下：

```
require 'rack/rewrite'
use Rack::Rewrite do
  r301 %r{.*}, 'http://mynewdomain.com$&', :if => Proc.new {|rack_env|
    rack_env['SERVER_NAME'] != 'mynewdomain.com'
  }
end
# rest of your app 
```

重写规则的签名是 rewrite_method(request_url_expression, rewrite_url_expression, options)。在此示例中，方法 #r301 将为与给定正则表达式匹配的所有请求 url 提供永久重定向到具有请求 URI 的新域（使用 $& 替换运算符）。文档中有更多信息。

# jquery - 遍历数组并比较值

> ID：12570553
> 
> 赞同：1
> 
> 时间：2012-09-24T18:16:11.550
> 
> 标签：jquery

使用 jQuery，我试图迭代一个数组并与一个值进行比较，但遇到了困扰我的问题。这是代码：

```
var cF = ['first','last','email'];
var fFound = 0;
cj(this).children('.section').each(function(f){
  var fId = cj(this).attr('class');
  fId = fId.replace('-section', '');
  console.log('fId: ',fId);
  cj.each(cF, function( cFi, cFv ){
    console.log('cFv: ',cFv);
    if ( cFv == fId ) {
      console.log('found!');
      fFound = 1;
    }
  });
  console.log('fFound: ',fFound);
}); 
```

基本上，我正在做的是搜索一系列 div（通过 'this' 传递），检索类名，剥离类的后缀，然后将其与我的 cF 数组进行比较。如果找到，我想将 fFound 设置为 1（这是我的标志，表示该值存在）。

最初我使用的是 jQuery.inArray() 但运气不佳。当我将 fId 和 cFv 发送到控制台时——它们匹配——但比较不会将它们识别为匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:25:31.557

试试这个

```
cj.each(cF, function( cFi, cFv ){
    console.log('cFv: ',cFv);
    if ( $.inArray( fId, cF )  > -1 ) {
      console.log('found!');
      fFound = 1;
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:23:08.830

**遍历数组并比较值**

```
var cF = ['first','last','email'];
var bla = 'anything'
var fFound = 0;

for (j in cF) {
    if (bla.indexOf(cF[j]) > -1) {
        fFound = 1;
    }
} 
```

操作...你想要 jQuery...从头开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:23:42.630

```
var cF = ['first','last','email'];
var fFound = 0;
cj(this).children('.section').each(function(f){       
  var fId = cj(this).attr('class');
  fFound = 0; // reset 
  fId = fId.replace('-section', '').trim();
  console.log('fId: ',fId);
  if( $.inArray( fId, cF ) !== -1 ) {
      console.log('found!');          
   }
   console.log('fFound: ',fFound);
}); 
```

# actionscript-3 - FLEX 在视图之间传递多个数据 - 使用接收到的数据来查询数据库

> ID：12570554
> 
> 赞同：1
> 
> 时间：2012-09-24T18:16:11.830
> 
> 标签：actionscript-3, apache-flex

在我的 flex 移动项目中，我有 2 个视图

1.  是调查列表
2.  是调查问题列表

每个调查对对象都有不同的问题，从视图 1 的列表中选择一个调查，并将记录 ID 传递到视图 2 以根据 ID 查询数据。

我正在努力的地方是获取调查 ID 并将其传递到第 2 页上的操作脚本，我将从那里检索参数化数据。

所有提示表示赞赏。

我的第 1 页代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:surveynameservice="services.surveynameservice.*"
    title="surveyMaster">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        import spark.events.IndexChangeEvent;

        protected function          list_creationCompleteHandler(event:FlexEvent):void
        {
            getAllSurveynameResult.token = surveynameService.getAllSurveyname();
        }

        protected function surveySelected(event:IndexChangeEvent):void
        {
            // TODO Auto-generated method stub
            var tmpObj:Object = new Object();
            tmpObj.sID = list.selectedItem.surveyID;
            tmpObj.sName = list.selectedItem.surveyName;
            (this.parentDocument as cp_dbHomeView).rightNav.activeView.data=tmpObj;

        }

    ]]>
</fx:Script>
<fx:Declarations>
    <s:CallResponder id="getAllSurveynameResult"/>
    <surveynameservice:SurveynameService id="surveynameService"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:List id="list" x="-1" y="0" width="171" height="100%" change="surveySelected(event)"
        creationComplete="list_creationCompleteHandler(event)"  labelField="surveyName">
    <s:AsyncListView list="{getAllSurveynameResult.lastResult}"/>
</s:List>
</s:View> 
```

我的第 2 页代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:surveyquestionsservice="services.surveyquestionsservice.*"
    creationComplete="init()" title="{data.sID}">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;
        import spark.components.DataRenderer;
        public function init():void{

        }
        protected function list_creationCompleteHandler(event:FlexEvent):void
        {
            getSurveyQuestionsResult.token = surveyquestionsService.getSurveyQuestions(data);
        }
    ]]>
</fx:Script>
<s:layout>
    <s:VerticalLayout paddingTop="15" paddingBottom="15" paddingLeft="15" paddingRight="15" gap="5"
                      horizontalAlign="center" verticalAlign="top"/>
</s:layout>
<fx:Declarations>
    <s:CallResponder id="getSurveyQuestionsResult"/>
    <surveyquestionsservice:SurveyquestionsService id="surveyquestionsService"/>
</fx:Declarations>
<s:Label text="Click on a location on the left to explore!" visible="{data==null?true:false}"/>
<s:Label text="Information about {this.data.surveyID}" visible="{data!=null?true:false}"/>

<s:TextArea text="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur accumsan felis ac tortor aliquam iaculis. Phasellus hendrerit viverra enim, sit amet scelerisque lectus dictum at. Aenean sodales nisi sed leo congue et porttitor ligula vehicula. 
            Pellentesque turpis massa, suscipit vel fermentum quis, dignissim sed ipsum. Nulla aliquet libero adipiscing risus lobortis eleifend quis at velit. Duis at leo urna. 
            Praesent facilisis faucibus neque, ut ullamcorper lacus gravida a. Donec vel iaculis sapien."  width="90%" editable="false" visible="{data!=null?true:false}"/> 
<s:List id="list" width="659" creationComplete="list_creationCompleteHandler(event)" click="init()"
        labelField="questionDesc">
    <s:AsyncListView list="{getSurveyQuestionsResult.lastResult}"/>
</s:List>
</s:View> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:27:54.853

好的，感谢您澄清那部分，所以我的理解是 MXML 中的绑定工作正常，您根本不知道如何检索您传递给服务第二次调用的参数？如果是这样，您应该能够在 PHP 中使用 $_REQUEST 或 $_POST 或 $_GET ，具体取决于您在服务上设置的 HTTP 方法（或者默认情况下使用的任何方法，我相信 AS3 服务类默认情况下通常是 GET ）。

相反，如果您的问题只是您想知道数据何时进入并在那时进行调用，那么您只需要覆盖设置数据，例如

```
override public function set data(value:Object):void
{
    super.data = value;
    if(!data || data == value)
         return;
    getSurveyQuestionsResult.token = surveyquestionsService.getSurveyQuestions(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T11:26:49.340

我在搜索一种方法以将多个参数传递给 pushView 方法调用的另一个视图时偶然发现了这里。我通过这个问题发现的是，我可以传递一个 Object 类型的参数，并为这个参数创建我需要的任意数量的自定义属性。

例如，我需要传递一个字符串和一个数组，我这样做了：

在调用者视图中：

```
var viewParameters:Object = new Object();
viewParameters.stringParam = myString;
viewParameters.listParam = myList;
navigator.pushView(CalledView, viewParameters); 
```

在被调用的视图中：

```
var myString:String = data.stringParam;
var myList:Array = data.listParam as Array; 
```

此处不需要覆盖集数据功能，因为我正在调用已填充数据的 pushView。

# asp.net-mvc - 如何在显示模板中显示下拉列表的选定文本而不是选定值？

> ID：12570556
> 
> 赞同：2
> 
> 时间：2012-09-24T18:16:24.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

所以我的显示模板中有这段代码：

```
@Html.DropDownListFor(blah => blah.InputtedData, ddv) 
```

我得到一个实际的下拉列表。我试过这段代码：

```
@Html.DisplayFor(blah => blah.InputtedData, ddv) 
```

我得到`1`（第一名），selectedvalue。但我想显示`Yes`选定的文本。那么如何在显示模板的下拉列表中显示选定的文本而不是选定的值？

根据请求：

```
namespace TESTMVC.ViewModels
{
    public class CtrlInputDataModel
    {
        public CtrlTypeModel RowCtrl { get; set; }
        public long InputtedDataID { get; set; }
        public string InputtedData { get; set; }
        public DateTime InputtedDate { get; set; }

        public CtrlInputDataModel()
        {

        }

        public CtrlInputDataModel (CtrlTypeModel newRowCtrl, long newInputtedDataID, string newInputtedData, DateTime newInputtedDate)
        {
            RowCtrl = newRowCtrl;
            InputtedDataID = newInputtedDataID;
            InputtedData = newInputtedData;
            InputtedDate = newInputtedDate;
        }
    }
} 
```

ViewModel`ddv`基于：

```
namespace TESTMVC.ViewModels
{
    public class DefaultValueModel
    {
        public string Label { get; set; }
        public string Value { get; set; }

        public DefaultValueModel()
        {

        }

        public DefaultValueModel(string newLabel, string newValue)
        {
            Label = newLabel;
            Value = newValue;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T19:09:56.877

您无法使用内置的`Html.DisplayFor`. 但是，您可以创建自定义显示模板，例如`/Views/Shared/DisplayTemplates/DropdownListTest.cshtml`，您可以根据您的属性从下拉列表值中手动选择文本：

```
@model string
@((IEnumerable<SelectListItem>)ViewData["ddv"])
    .Where(s => Model == s.Value)
    .Select(s => s.Text).SingleOrDefault() 
```

然后您可以使用以下（有点复杂）语法：

```
@Html.DisplayFor(blah => blah.InputtedData, 
     "DropdownListTest", //template name
     new { ddv = ddv } // aditional view data: the property name needs to be ddv
}) 
```

但是，如果不打算重用此功能，只需内联您的逻辑并使用它而不是`Html.DisplayFor`：

```
@ddv.Where(s => s.Value == Model.InputtedData)
    .Select(s => s.Text).SingleOrDefault() 
```

# layout - 是否可以仅使用 Bootstrap 创建类似 pinterest 的布局？

> ID：12570559
> 
> 赞同：64
> 
> 时间：2012-09-24T18:16:35.410
> 
> 标签：layout, twitter-bootstrap, grid, jquery-masonry

我正在努力解决这个问题已经有一段时间了：

是否可以仅使用 Twitter Bootstrap 创建 pinterest 布局？我知道有像 Masonry 这样的 jQuery 插件，但是没有它们就没有办法吗？

谢谢

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-01-27T20:41:39.810

[在http://bragthemes.com/demo/pinstrap/](http://bragthemes.com/demo/pinstrap/)找到一个（免费）模板。它应该有你所要求的一切。不过还没来得及检查。

**编辑 2016-03-15 ：Bootstrap 4 允许在**[这里](http://v4-alpha.getbootstrap.com/components/card/#card-columns)开箱即用。它仍处于 alpha 阶段，但我们正在到达那里。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-05-04T07:28:07.107

找到了这个解决方案，在引导程序中工作（即使没有定义列大小也可以工作），不需要 javascript——我将它捕捉到一个项目中，它工作得很好：

[http://www.bootply.com/118335](http://www.bootply.com/118335)

祝福你[@katiejones](https://twitter.com/katiejones)！

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-10-24T17:02:34.857

**[编辑：这现在在 boostrap 4 http://v4-alpha.getbootstrap.com/components/card/#card-columns](http://v4-alpha.getbootstrap.com/components/card/#card-columns)**中开箱即用****

 **确定的事情。我花了一段时间来锻炼。希望这可以帮助！

为代码转储道歉，但有必要显示网格工作。

```
<head>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/masonry.js"></script>
<script type="text/javascript" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/123941/imagesLoaded.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

</head>

  <div class="container">

        <div class="row masonry-container">

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolosit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipdolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor ctetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

             <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipdolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eliLorem ipsum dolor sit amet, consectetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

          <div class="col-xs-6 col-sm-3 col-md-3 item">
            <div class="thumbnail">
              <img src="http://lorempixel.com/150/200/abstract" alt="">
              <div class="caption">
                <h3>Thumbnail label</h3>
                <p>Lorem ipsumLorem ipsum dolor ctetur adipisicing eli dolor sit amet, consectetur adipisicing elit. </p>

              </div>
            </div>
          </div><!--/.item  -->

        </div> <!--/.masonry-container  -->
      </div><!--/.tab-panel -->

<style type="text/css">
body {

  padding-top: 50px;
}

.main-container {
  padding: 10px 15px;
}

.p {
  text-align: center;
}

</style>

<script type="text/javascript">

/* Demo Scripts for Making Twitter Bootstrap 3 Tab Play Nicely With The Masonry Library
* on SitePoint by Maria Antonietta Perna
*/

//Initialize Masonry inside Bootstrap 3 Tab component 

(function( $ ) {

  var $container = $('.masonry-container');
  $container.imagesLoaded( function () {
    $container.masonry({
      columnWidth: '.item',
      itemSelector: '.item'
    });
  });

  //Reinitialize masonry inside each panel after the relative tab link is clicked - 
  $('a[data-toggle=tab]').each(function () {
    var $this = $(this);

    $this.on('shown.bs.tab', function () {

      $container.imagesLoaded( function () {
        $container.masonry({
          columnWidth: '.item',
          itemSelector: '.item'
        });
      });

    }); //end shown
  });  //end each

})(jQuery);

</script> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-24T18:35:36.070

是的，这是可能的，但有一些限制。

### 原则

*   每列是一个`div`（或`section`取决于您的布局的含义）
*   根据您的设计，在每一列中，每个图块也是一个`div`或等。`img`

### 实践

要制作列，您可以使用以下各种技术：

*   `float`列
*   `display: inline-block`列
*   使用新的[灵活框 API](http://www.w3.org/TR/css3-flexbox/)（非标准实现正在蔓延到现代浏览器中）
*   使用新的[网格定位 API](http://www.w3.org/TR/css3-grid/)（尽管我暂时避免使用它，因为它几乎不受支持）

`div`然后在每列中放置各种瓷砖（ s）。同样，根据您的设计/布局，您可以将 column-divs 替换为`ul`s，并拥有一个图块列表 ( `li`s)。我不能说这在语义上是否适合您的设计。

### 限制

*   调整 Pinterest 页面的大小可以保持大多数元素的一般位置，即列顶部的元素通常保持在顶部附近，即使根据浏览器宽度调整列数 -**纯 CSS 解决方案不会这样做盒子**。

### 变通办法

*   虽然不是一个完美的解决方案，但您可以使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来影响各种元素的位置。

一段时间后，人们可能会非常接近 Pinterest 布局——也就是说，他们选择使用 JavaScript 实现所述布局可能是有充分理由的。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-12-10T04:37:54.867

我知道我的回答迟到了。但只是想更新这个常见问题。我发现了 3 个最新的实现。

*   [同位素](http://isotope.metafizzy.co/)。在引导程序网站上找到了这个。也适用于[无限滚动](http://www.infinite-scroll.com/)以构建无限滚动网页。
*   [萨尔瓦托](http://webdesign.tutsplus.com/tutorials/build-a-dynamic-grid-with-salvattore-and-bootstrap-in-10-minutes--cms-20410)。这是通过纯 CSS 和 JS 实现的。JS 只用于拉取数据。
*   [masonry.desandro.com](http://masonry.desandro.com/)。这是一个 JS 密集型实现。但它有自己的特点。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-04-17T13:31:00.847

自**Bootstrap 4**以来，`.card-columns`该类可用。[此处](https://getbootstrap.com/docs/4.1/components/card/#card-columns)的文档中的规格。它制作了一个漂亮的类似 Pinterest 的网格。

```
<div class="card-columns">
 <div class="card" id="card1"></div>
 <div class="card" id="card2"></div>
 <div class="card" id="card3"></div>
 <div class="card" id="card4"></div>
 <div class="card" id="card..."></div>
</div> 
```

但是，关于列数，我很难适应不同的屏幕尺寸。我终于设法做到了：

```
@media (max-width: 575.98px){ 
    .card-columns {
        column-count: 1; }
}
@media (min-width: 576px){
    .card-columns {
        column-count: 2; }
}
@media (min-width: 768px){
    .card-columns {
        column-count: 3; }
}
@media (min-width: 992px){
    .card-columns {
        column-count: 4; }
}
@media (min-width: 1200px){
    .card-columns {
        column-count: 4; }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-05-29T02:49:40.820

我们有一个名为：bootstrap-waterfall： http:
[//mystist.github.io/bootstrap-waterfall/](http://mystist.github.io/bootstrap-waterfall/)

但事实上，这个插件不需要引导程序，因为它是依赖项。这取决于您是想使用 bootstrap 作为 pin 的标记还是自己设置样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-03T15:49:08.740

```
<div class="card-deck">
  <div class="card">
    <img class="card-img-top" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">Card title</h4>
      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
    </div>
    <div class="card-footer">
      <small class="text-muted">Last updated 3 mins ago</small>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">Card title</h4>
      <p class="card-text">This card has supporting text below as a natural lead-in to additional content.</p>
    </div>
    <div class="card-footer">
      <small class="text-muted">Last updated 3 mins ago</small>
    </div>
  </div>
  <div class="card">
    <img class="card-img-top" src="..." alt="Card image cap">
    <div class="card-block">
      <h4 class="card-title">Card title</h4>
      <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This card has even longer content than the first to show that equal height action.</p>
    </div>
    <div class="card-footer">
      <small class="text-muted">Last updated 3 mins ago</small>
    </div>
  </div>
</div>
```

* * *

## 回答 #9

> 赞同：-23
> 
> 时间：2013-03-11T13:04:12.687

对于不想经历跨浏览器兼容性麻烦的每个人，这里有一个 PHP 解决方案。假设您将数据放在数组中，

```
<?php $iColumns = 4;?>
<?php for($i=0; $i < $iColumns; ++$i):?>

    <div class="span3">
        <?php
        $j=$i;
        while( isset( $aData[$j] ) ):
        $oItem = $aData[$j]
        ?>
            <div class="thumbnail" style="margin-top:10px;">
                <a href="">
                    <img src="" alt=""/>
                </a>

                <h3>title</h3>
                <p>caption</p>
            </div>
        <?php
        $j=$j+$iColumns;
        endwhile;?>
    </div>
<?php endfor;?> 
```**

# php - 不同的数组值取决于 if 语句

> ID：12570567
> 
> 赞同：0
> 
> 时间：2012-09-24T18:17:12.117
> 
> 标签：php

我正在构建一个网络爬虫，它从提交的一个 url 中找到的链接中扫描链接、标题和元描述

我认为这个if语句是正确的。$description 是保存数组 $link 中所有描述的变量。但我注意到并非所有网站都有元描述（例如维基百科），所以我决定如果描述为空，我希望前 20 个字符作为描述。（顺便说一句，一切的功能和调用都有效，我只是想让你看看）

```
 if ($description == '') {
    $html = file_get_contents($link);    
    preg_match('%(<p[^>]*>.*?</p>)%i', $html, $re);
    $res = get_custom_excerpt($re[1]);
    echo "\n";
    echo $res;
    echo "\n";

    } 
```

但是，在数组中，链接存储在 [link] 中，链接的标题存储在 [title] 中，描述存储在 [description] 中。但我不知道如何处理将 $res 添加到我的数组并且仅在 if 语句有效时使用。

```
$output = Array();

   foreach ($links as $thisLink) {
   $output[] = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink), getMetas($res));
     } 
    print_r($output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:25:44.737

You can use array_push() to add $res back to your array and then evaluate the array however you need to; not 100% sure what you're trying to do...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:35:01.827

从你的措辞我认为你想这样做：

```
$outputs = array();

foreach ($links as $thisLink) {
    $output = array("link" => $thisLink, "title" => Titles($thisLink), "description" => getMetas($thisLink));

    if ($output['description'] == null) {
        $output['description'] = getMetas($res);
    }

    $outputs[] = $output;
} 
```

您可能需要调整 if 语句，因为我不知道 getMetas() 在没有描述时返回什么。

# android - PreferenceActivity 扩展以支持所有标准首选项类型

> ID：12570569
> 
> 赞同：0
> 
> 时间：2012-09-24T18:17:15.200
> 
> 标签：android, sharedpreferences

众所周知，`PreferenceActivity`它的`EditText-`,`List-`和其他`***Preference`类仅支持 type 的首选项`String`。目前尚不清楚为什么（事实上，这`SharedPreferences`严重降低了 Android 的标准），但确实如此，而且似乎与此无关。

我想无缝支持所有标准类型的共享首选项（`Boolean`, `Float`, `Int`, `Long`, `String`, `String Set`），并保留`PreferenceActivity`. 可能有必要的情况之一是应用程序中确实已经存在某些首选项并且它们不是字符串的情况。

当然，有一种将现有偏好转换为字符串的简单方法，但它很丑陋，是一种不得已的方法。另一种方法是从头开始创建一个模拟`PreferenceActivity`功能并处理所有类型的活动。这似乎有太多的日常工作。

有人知道并且可以建议`***Preference`支持所有标准类型的这种扩展后代的现有实现吗？`EditTextPreference`，并且`ListPreference`模板化为所需的类型就足够了。

如果还有其他一些方法可以轻松地在 UI 中使用不同类型的偏好，请同时提及它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:27:27.443

创建自己的 MyPreferenceActivity 相当容易，不是吗？在该活动中，您可以实现您想要的所有类型的偏好，甚至可以发明新的偏好。将标准 SharedPreferences 包装在应用程序首选项层中是一种很好的编程实践，因此您的应用程序不依赖于首选项的实现，除了在这个包装类中。在该类中，您可以使用 SharedPreferences 具有的标准首选项创建所需的每种首选项。或者，您可以将它们存储在数据库、文件或云中。如果您在活动中使用 SharedPreferences，则很难切换到使用数据库或云的实现。

# html - iOS5 Safari 仅将日期选择器附加到一个输入元素

> ID：12570570
> 
> 赞同：0
> 
> 时间：2012-09-24T18:17:15.800
> 
> 标签：html, css, forms, ios5, datepicker

在网页上的以下代码中，仅在第一个输入时显示 iPhone 日期选择器。

```
<form action="#" method="post" ...>
    <input type="date" name="date-from" placeholder="10/08/2012"> 
    <input type="date" name="date-to" placeholder="10/08/2012">
</form> 
```

有没有其他人遇到过这个？我猜这是一个移动 Safari 错误，但我找不到其他有同样问题的人，也找不到任何关于只有第一个日期字段附有日期选择器的文档。

以下截图供参考

![iPhone 4S、iOS5截图](../Images/0a5f371cd89c3e67cc7ef7c7c6226cdc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:51:41.123

再次查看开发代码，重复的类型属性覆盖了初始声明。菜鸟错误！

# r - Weka 从决策树中运行 R 中的统计测试

> ID：12570571
> 
> 赞同：1
> 
> 时间：2012-09-24T18:17:23.897
> 
> 标签：r, machine-learning, weka

我试图弄清楚如何做到这一点，但谷歌似乎没有找到我的答案。

我有一个很好的数据集，我能够在 Weka 中生成修剪和未修剪的决策树。从这里我可以得到很好的 10 倍交叉验证信息。

但我想使用 R 在两个决策树之间运行统计测试，即 T-Test 或 Wilcoxon。有人建议我使用 DMwR 和 RWeka 包，但由于我没有使用这种语言的经验，请阅读 RWeka 文档和谷歌搜索教程或其他解释，我空手而归。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:09:26.237

据我所知，您可以使用 WEKA 的 Experimenter 进行 t 检验。在哪里选择数据集和算法（它们可能是具有不同参数的相同算法），然后执行 t 检验。

关于 Wilcoxon 测试，我通常做的是“保存”由 WEKA 生成的每个模型（它们将是 Java 对象），我在我的 Java 程序中读取这些对象（也许你可以在 R 中完成），然后我在一个Java 程序。

# coding-style - 用于检查 IDE/编辑器语法突出显示的“通用”源代码示例/片段（使用不同的编程语言）

> ID：12570574
> 
> 赞同：1
> 
> 时间：2012-09-24T18:17:37.697
> 
> 标签：coding-style, ide, editor, syntax-highlighting, universal-code

互联网上是否有这样的“通用”示例源代码编译 - 使用不同的编程语言 - 用于检查 IDE/编辑器中代码的语法突出显示是否有效？

源代码示例，它使用每种可用语言的关键字和语句来检查语法突出显示是否正常工作。

它应该看起来像[Octopress 的“语法高亮测试”](http://octopress.org/docs/blogging/code/test/)测试页面。但是，在少数示例中，语言语法并未得到充分利用，无法向用户展示全部潜力。

# heroku - 如何从应用程序内部获取 Heroku 应用程序名称/URL

> ID：12570579
> 
> 赞同：60
> 
> 时间：2012-09-24T18:18:08.140
> 
> 标签：heroku

我正在为[http://www.dif.io](http://www.dif.io)开发一个注册代理，以启用对 Heroku 上部署的应用程序的跟踪。我缺少已部署应用程序的一些信息。注册代理是一个脚本（通常以应用程序本地语言编写），旨在在部署后执行（例如，heroku 运行或通过一些部署后挂钩自动运行）。

如何从应用程序内部获取应用程序名称、URL 和一些 UUID 标识符，最好是从一些 ENV 变量中获取？我需要它可以在语言之间移植。

我探索了一个示例 Python 应用程序，但上述所有信息都丢失了。只有几个与 Python 相关的 ENV 变量。然而，测功机主机名看起来像一个 UUID。

我可以使用这样的东西，但没有用户/密码要求： [https ://addons.heroku.com/provider/resources/technical/reference/app-info](https://addons.heroku.com/provider/resources/technical/reference/app-info)

请指出正确的文档。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-11-02T18:49:49.733

该命令`app:info`似乎不再是`heroku`命令，而是`info`会做同样的事情：

```
heroku info -s | grep web_url | cut -d= -f2 
```

或设置变量

```
heroku config:set HEROKU_URL=$(heroku info -s | grep web_url | cut -d= -f2) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-12-24T17:10:13.623

Dyno 元数据于 2015 年 12 月推出。它目前是必须首先启用的实验室功能。

> Dyno 元数据使 dyno 可以轻松访问有关应用程序和环境的信息。可用测功元元数据的示例包括有关版本、测功机大小、应用程序名称以及特定运行测功机的唯一标识符的详细信息。

[https://devcenter.heroku.com/articles/dyno-metadata](https://devcenter.heroku.com/articles/dyno-metadata)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-11-02T01:33:46.977

2016 年 8 月推出了一个实验室插件，它将所有这些都放在您的环境中：

```
~ $ env
HEROKU_APP_ID:                   9daa2797-e49b-4624-932f-ec3f9688e3da
HEROKU_APP_NAME:                 example-app
HEROKU_DYNO_ID:                  1vac4117-c29f-4312-521e-ba4d8638c1ac
HEROKU_RELEASE_CREATED_AT:       2015-04-02T18:00:42Z
HEROKU_RELEASE_VERSION:          v42
HEROKU_SLUG_COMMIT:              2c3a0b24069af49b3de35b8e8c26765c1dba9ff0
HEROKU_SLUG_DESCRIPTION:         Deploy 2c3a0b2 
```

[https://devcenter.heroku.com/articles/dyno-metadata](https://devcenter.heroku.com/articles/dyno-metadata)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-09-14T20:18:46.777

据我所知，Dynos 本身没有关于它们正在运行的应用程序名称或 URL 的任何信息。[Dynos 上](https://devcenter.heroku.com/articles/dynos#local-environment-variables)的文档列出了设置了哪些本地环境变量，但它只有 PORT 和 DYNO。

我们在[hubot](https://github.com/github/hubot)中使用的一种解决方法是要求用户添加一个带有应用程序主机名的配置，例如 HEROKU_URL。

我发现您可以编写大部分脚本，通过使用shell 友好`heroku app:info`的标志，并进行一些 grepping 和切割：`-s`

```
$ heroku apps:info -s  | grep web_url | cut -d= -f2
http://hubotio-campfire.herokuapp.com/ 
```

并从中设置HEROKU_URL：

```
$ heroku config:set HEROKU_URL=$(heroku apps:info -s  | grep web_url | cut -d= -f2) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-21T16:51:25.707

以下是仅适用于应用名称的方法：

```
heroku info -s | grep git-url | sed 's#.\+\.com/\(.\+\)\.git$#\1#g' 
```

我的用例是查找应用程序名称，以便在需要应用程序名称（而不是域名）的 shell 脚本中使用。YMMV

我使用了，`git-url`而不是`web-url`因为域名可以被覆盖为自定义的东西，但应用程序名称将始终保持映射到 git url。如果要查找域名，请检查其他答案之一。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-17T09:21:08.740

应用名称存储在您的网址中，例如`appname.herokuapp.com`.

您可以通过多种方式获取它，例如`ENV['URL'].split(".").first`在 python 中，当被“。”分割时，获取第一个值形式的 url。代表您的应用名称

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-01-13T11:38:03.447

对于那些来到这里，试图找到一种方法来获取 Heroku 中评论应用程序的应用程序 URL 的人，我们有两个额外的环境变量可用：

1.  HEROKU_BRANCH
2.  HEROKU_APP_NAME

所以推断 URL 只是：“http(s)://HEROKU_APP_NAME.herokuapp.com”

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-22T14:00:12.903

对我来说，这很简单：

```
heroku info 
```

```
heroku info
=== secure-inlet-07449
Addons:         heroku-postgresql:hobby-dev
Auto Cert Mgmt: false
Dynos:          web: 1
Git URL:        https://git.heroku.com/secure-inlet-07449.git
Owner:          some.one@example.com
Region:         us
Repo Size:      45 KB
Slug Size:      33 MB
Stack:          heroku-20
Web URL:        https://secure-inlet-07449.herokuapp.com/ 
```

最后一行显示了应用程序的 url：[https ://secure-inlet-07449.herokuapp.com/](https://secure-inlet-07449.herokuapp.com/)

# java - 如果表列是 NULL 我想设置 Long 变量 NULL 而不是 0

> ID：12570589
> 
> 赞同：1
> 
> 时间：2012-09-24T18:18:49.270
> 
> 标签：java, android, sqlite

我正在开发一个使用 SQLite 的 Android 3.1 平板电脑。

一个表允许在列上使用 NULL 值。如果我执行以下操作并且`COLUMN_ARTICLE_QUANTITY_GOODS_NON_PACKET`为 NULL，则`c.getLong`返回 0，并且我想获得 NULL 而不是 0。

```
int goodsNonPckIdx =
            c.getColumnIndex(SqlConstants.COLUMN_ARTICLE_QUANTITY_GOODS_NON_PACKET);
articleQty.setGoodsNonPacket(c.getLong(goodsNonPckIdx)); 
```

顺便说一句`GoodsNonPacket`，是一个`Long`（对象）。

**如何从数据库中获取空值？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:27:10.507

`c.getLong(goodsNonPckIdx)`将始终返回一个`long`（原始数据类型）值，该值不能是`null`.

您可能可以使用[isNull](http://developer.android.com/reference/android/database/Cursor.html#isNull%28int%29)方法来检查它是否为空，并根据它设置值。

# glassfish - 使用 OppenSSL 创建证书并导入 Glassfish 3.1 所需的教程

> ID：12570590
> 
> 赞同：1
> 
> 时间：2012-09-24T18:18:54.263
> 
> 标签：glassfish, openssl, certificate

我的任务是使用 OpenSSL 为 web 服务项目创建证书，然后将证书导入 glassfish 3.1。我无权访问 Apache。（正在创建的应用程序使用用户名/密码验证，但我们要添加证书）

我已经用谷歌搜索并阅读了许多教程，但还没有让证书工作。有谁知道典型的教程来指点我吗？

我使用 OpenSSL 创建了 CA、CSR 和 CRT，并尝试了多种方法将它们导入 Glassfish 的密钥库，但最接近成功的是以下日志消息

> [#|2012-09-21T16:14:05.859-0500|警告|glassfish3.1.1|com.sun.grizzly.config.GrizzlyServiceListener|_ThreadID=17;_ThreadName=Thread-2;|GRIZZLY0007：无法配置 SSL 支持！java.io.IOException: SSL 配置无效，因为没有可用的证书或密钥对应于已启用的 SSL 密码套件。

# javascript - Phonegap：图片库加载非常缓慢

> ID：12570594
> 
> 赞同：0
> 
> 时间：2012-09-24T18:19:11.940
> 
> 标签：javascript, android, jquery, cordova, android-sdcard

我正在从 sd 卡读取图像并将其显示在我的 phonegap 应用程序的图库中。我有两个从中读取内容的文件夹。一种是同步文件夹和非同步文件夹。代码如下：

```
 listGalleryContents(synchedsdcardfolder, function() {
    listGalleryContents(unsynchedsdcardfolder, function() {
        showGalleryPage();
    });
 });

function listGalleryContents(directoryEntry, onComplete) {
var directoryReader = directoryEntry.createReader();
directoryReader.readEntries(function(entries) { // success get files and folders
    for(var i=0; i<entries.length; ++i) {
        if(entries[i].name.indexOf(".") > 0 && entries[i].isFile) {
            imagesArray.push(entries[i].fullPath);
        }
    }
    onComplete();
} , function(error){ 
    alert("Error: = " + error.code);
});
} 
```

当我有太多图像无法从 SD 卡中读取时，问题就出现了。当我单击图库视图时，加载图像需要很长时间。请问有什么方法可以使其响应更快并提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:13:49.910

Javascript 是单线程的，因此回调将在阻塞 UI 的同一主线程中触发。尝试将您的代码更改为：

```
listGalleryContents(synchedsdcardfolder, loadUnSyncedFolder);

function loadUnSynchedFolder() {
   setTimeout(function() {
       listGalleryContents(unsynchedsdcardfolder, allFoldersLoaded);
   }, 0);
}

function allFoldersLoaded() {
   setTimeout(showGalleryPage, 0);
}

function listGalleryContents(directoryEntry, onComplete) {
var successCallback = onComplete;
var directoryReader = directoryEntry.createReader();
directoryReader.readEntries(
     function(entries) { readSuccess(entries, successCallback); } , 
     function(error){ 
        alert("Error: = " + error.code);
     });
}

function readSuccess(entries, onComplete) { // success get files and folders
    var i = 0, length = entries.length; 
    for(; i < length ; ++i) { // why are you using ++i and not i++ ??
        if(entries[i].name.indexOf(".") > 0 && entries[i].isFile) {
            imagesArray.push(entries[i].fullPath);
        }
    }
    onComplete();
   }
} 
```

**我没有测试过这段代码。如果您看到错误，您可能需要对其进行少量修改。**

# asp.net - cshtml不流行有什么原因吗

> ID：12570597
> 
> 赞同：6
> 
> 时间：2012-09-24T18:19:25.390
> 
> 标签：asp.net, asp.net-mvc, razor, webmatrix

首先，我最近才尝试使用 Webmatrix 在 cshtml 中使用 razor 进行构建，我发现它比构建 aspx Web 表单耗时少得多。习惯了之后，我现在可以更快地完成我以前在我的 aspx 项目中所做的所有事情，而且代码更少......

现在，我今天花了很多时间在使用 cshtml 的公司查看谷歌等，他们将其用于什么等，但我找不到大量的示例。也许我只是看错了地方，使这个问题的标题不正确，但我只是有一种感觉，公司仍在使用 aspx 而不是 cshtml 是有原因的。

我将在下个月为一个大客户启动一个项目，我无法决定是否采取这种方式构建它（他们需要一个自定义博客、登录区域等）。有什么想法吗？我发现与辩论有关的唯一其他堆栈线程是：[Razor/CSHTML - 对我们拥有的任何好处？](https://stackoverflow.com/questions/3423732/razor-cshtml-any-benefit-over-what-we-have)

谢谢，

亚当

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T18:23:04.010

很多与 ASP（经典）有关的问题已经存在了很长时间，并且（取决于项目规模）迁移可能会产生过多的成本。

还有一些注意事项，例如：

1.  当前的网络员工知道什么（他们精通什么？）
2.  哪些库（专有或其他）已经依赖于 ASP（包括自定义控件）。
3.  您要转换多少 SEO 命中（一些网站可以通过更改路由的行为方式来模仿经典的 aspx 页面后缀，但实际上是使用 cshtml）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:54:35.150

经验丰富的 ASP.NET 开发人员从 Web 窗体或 MVC 迁移到 Web Pages (Razor) 并没有令人信服的理由。作为一个框架，它旨在吸引那些可能发现 Web 表单或 MVC 学习曲线过多的人。例如，来自 Classic ASP 或 PHP 的那些。

我在 ASP.NET 论坛上回答了很多关于 Web Pages 框架的问题，而且我确实看到试用该框架的人数有所增加。在功能和安全性方面，您拥有整个 ASP.NET 框架，因此您可以使用 Web 页面执行任何可以使用 MVC 或 Web 窗体执行的操作 - 很多都更容易。

Web Pages 框架在设计时并未考虑可测试性，并且由于一定数量的服务器逻辑与 HTML 嵌入在同一个文件中，因此团队组织起来可能会更加困难。

如果你是一个孤独的开发者并且乐于使用网页，那就去吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T19:22:52.787

关于这个话题有很多讨论。它只是意见，是正确工作的正确工具。请查看以下意见和答案：

*   [MVC 3 ASPX VS RAZOR 视图引擎](https://stackoverflow.com/questions/6569809/mvc-3-aspx-vs-razor-view-engine)
*   [用于新 ASP.NET MVC 3 站点的 Razor 与 Webforms 视图引擎](https://stackoverflow.com/questions/5261124/razor-vs-webforms-view-engine-for-new-asp-net-mvc-3-site)
*   [Razor 和 ASPX 有什么区别？](https://stackoverflow.com/questions/4702231/what-is-the-difference-between-razor-and-aspx)

希望这可以帮助

# reporting-services - ssrs iif 语法

> ID：12570601
> 
> 赞同：1
> 
> 时间：2012-09-24T18:19:36.207
> 
> 标签：reporting-services, iif

在我的查询设计器中，我尝试使用以下查询：

```
SELECT        Site, LegalConfigNumber, COUNT(*) AS Total
FROM            EPSInfoLive
 iif(@LegalConfigNum  =  0,
WHERE        (InputDate >= @rundate) AND (InputDate <= DATEADD(day, 1, @rundate)),
WHERE        (InputDate >= @rundate) AND (InputDate <= DATEADD(day, 1, @rundate)) AND LegalConfigNumber = @LegalConfigNum)
GROUP BY LegalConfigNumber, Site
ORDER BY Site, LegalConfigNumber 
```

当我尝试对其进行测试时，我收到一条关于 @LegalConfigNum 语法错误的消息。我似乎无法找到那会在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:32:29.877

SSRS 查询需要用 SQL 编写。您正在使用“@iif”混合 SQL 和 Visual Basic。SQL 支持 CASE 语句而不是 IIF。但是你不需要这个来展示你所展示的东西。下面的陈述在逻辑上应该是等价的：

```
SELECT
   Site,
   LegalConfigNumber,
   COUNT(*) AS Total
FROM
   EPSInfoLive
WHERE
   (InputDate >= @rundate) AND (InputDate <= DATEADD(day, 1, @rundate))
   AND (LegalConfigNumber = @LegalConfigNum OR @LegalConfigNum  =  0)
GROUP BY LegalConfigNumber, Site
ORDER BY Site, LegalConfigNumber 
```

# html - 网站应用程序全屏而不是全屏的 CSS 样式表

> ID：12570602
> 
> 赞同：1
> 
> 时间：2012-09-24T18:19:36.747
> 
> 标签：html, css, ipad, safari, media-queries

我正在建立一个网站，它将在 iPad 上使用。问题是，我需要有 2 个样式表：

一种用于用户以全屏模式（没有地址栏）查看，另一种用于网站在 Safari 中打开标准。

是否可以制作如下一行：

```
@media only screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) {} 
```

但是当它在全屏时不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:32:09.303

您提到的媒体查询根据屏幕宽度工作，即`device screen dimensions (width)`，不考虑其 Safari 还是全屏（如您所描述的没有地址栏）。希望这是有道理的。

我快速搜索了一下，找到了[链接](http://menacingcloud.com/?c=iPhoneAddressBar)。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:38:38.000

在 iOS 5 中，您应该能够在没有菜单栏的情况下定位屏幕大小（完全占据`18px`），这样您就会知道它是全屏的，因为它应该更大，因为菜单栏不会在那里：

```
@media only screen and  (min-device-width: 672px) and (max-device-width: 1024px) and (orientation:portrait) {} 
```

如果这行得通，我不是 100%，但我知道顶部的黑条占据了`18px`. 尺寸如下：

```
landscape:1024x672 
portrait: 768x928 
```

* * *

**更新**

我发现了我们如何使用 jQuery 来做到这一点，它依赖于`window.navigator.standalone`

```
$(document).ready(function(){
  if (("standalone" in window.navigator) && !window.navigator.standalone) {
    $('head').append("<link href='fullscreen.css' type='text/css' rel='stylesheet' />")
  }
}); 
```

现在这假设移动 safari 支持`window.navigator.standalone`并且应该支持。试试看。

# objective-c - 获取按值排序的 NSDictionary 键的 NSArray，然后按键

> ID：12570603
> 
> 赞同：1
> 
> 时间：2012-09-24T18:19:36.983
> 
> 标签：objective-c, cocoa-touch, cocoa, nsdictionary, nssortdescriptor

假设我有一个包含键（单词）和值（分数）的字典，如下所示：

```
GOD    8
DONG   16
DOG    8
XI     21 
```

我想创建一个字典键（单词）的 NSArray，它首先按分数排序，然后按字母顺序排序。从上面的示例中，这将是：

```
XI
DONG
DOG
GOD 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:28:41.150

我会使用 NSDictionaries 和 NSArray，然后使用 NSSortDescriptors 实现它：

```
NSSortDescriptor *sdScore = [NSSortDescriptor alloc] initWithKey:@"SCORE" ascending:NO];
NSSortDescriptor *sdName = [NSSortDescriptor alloc] initWithKey:@"NAME" ascending:YES];
NSArray *sortedArrayOfDic = [unsortedArrayOfDic sortedArrayUsingDescriptors:[NSArray arrayWithObjects: sdScore, sdName, nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:46:36.867

卡洛斯的回答是正确的，我只是发布了我最终得到的完整代码，以防万一有人感兴趣：

```
NSDictionary *dataSourceDict = [NSDictionary dictionaryWithObjectsAndKeys:
                      [NSNumber numberWithInt:8], @"GOD",
                      [NSNumber numberWithInt:16], @"DONG",
                      [NSNumber numberWithInt:8], @"DOG",
                      [NSNumber numberWithInt:21], @"XI", nil];

NSSortDescriptor *scoreSort = [NSSortDescriptor sortDescriptorWithKey:@"SCORE" ascending:NO];
NSSortDescriptor *wordSort = [NSSortDescriptor sortDescriptorWithKey:@"WORD" ascending:YES];
NSArray *sorts = [NSArray arrayWithObjects:scoreSort, wordSort, nil];

NSMutableArray *unsortedArrayOfDict = [NSMutableArray array];

for (NSString *word in dataSourceDict)
{
    NSString *score = [dataSourceDict objectForKey:word];
    [unsortedArrayOfDict addObject: [NSDictionary dictionaryWithObjectsAndKeys:word, @"WORD", score, @"SCORE",  nil]];
}
NSArray *sortedArrayOfDict = [unsortedArrayOfDict sortedArrayUsingDescriptors:sorts];

NSDictionary *sortedDict = [sortedArrayOfDict valueForKeyPath:@"WORD"];

NSLog(@"%@", sortedDict); 
```

相关：[NSDictionary 分成两个数组（对象和键），然后按对象数组（或类似的解决方案）排序](https://stackoverflow.com/questions/3785778/nsdictionary-split-into-two-arrays-objects-and-keys-and-then-sorted-both-by-th?rq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T20:47:13.730

我无法对此进行测试，因为我不在 Mac 上（对不起，如果我拼错了什么），但是：

```
NSDictionary *dic1 = [NSDictionary dictionaryWithObjectsAndKeys:@"GOD", @"WORD", [NSNumber numberWithInt:8], @"SCORE", nil];
NSDictionary *dic2 = [NSDictionary dictionaryWithObjectsAndKeys:@"DONG", @"WORD", [NSNumber numberWithInt:16], @"SCORE", nil];
NSDictionary *dic3 = [NSDictionary dictionaryWithObjectsAndKeys:@"DOG", @"WORD", [NSNumber numberWithInt:8], @"SCORE", nil];
NSDictionary *dic4 = [NSDictionary dictionaryWithObjectsAndKeys:@"XI", @"WORD", [NSNumber numberWithInt:21], @"SCORE", nil];

NSSortDescriptor *scoreSort = [NSSortDescriptor sortDescriptorWithKey:@"SCORE" ascending:NO];
NSSortDescriptor *wordSort = [NSSortDescriptor sortDescriptorWithKey:@"WORD" ascending:YES];

NSArray *sortedArrayOfDic = [[NSArray arrayWithObjects:dic1, dic2, dic3, dic4, nil] sortedArrayUsingDescriptors:[NSArray arrayWithObjects:scoreSort, wordSort, nil]];

NSLog(@"%@", [sortedArrayOfDict valueForKeyPath:@"WORD"]); 
```

这会做同样的事情，但会有所减少并避免迭代。

# asp.net-mvc - 如何使用嵌套类编写 viewModel

> ID：12570604
> 
> 赞同：1
> 
> 时间：2012-09-24T18:19:46.330
> 
> 标签：asp.net-mvc, controller, viewmodel, asp.net-mvc-viewmodel

我的网页/视图将有 1 到多个导入记录。在每个导入记录中将是 0 到以下许多：

*   订单
*   海运集装箱
*   产品
*   发票

我将我的视图模型编码如下：

```
namespace LemansCorpIntranet.Models
{    
    public class ImportWebViewModel
    {
        public string button { get; set; }
        public string status_filter { get; set; }
        public string import_id_filter { get; set; }
        public DateTime date_filter { get; set; }
        public string vendor_filter { get; set; }
        public string port_filter { get; set; }
        public string whse_filter { get; set; }
        public Boolean not_released_filter { get; set; }
        public int release_gap { get; set; }
        public List<import_row> import_rows;
    }

    public class import_row
    {
        public string update_switch { get; set; }
        public string id { get; set; }
        public IEnumerable<SelectListItem> ship_via { get; set; }
        public string broker_number { get; set; }
        public string voyage { get; set; }
        public string vessel { get; set; }
        public decimal shipment_value { get; set; }
        public int cartons { get; set; }
        public decimal weight { get; set; }
        public decimal volume { get; set; }
        public string clearance_port { get; set; }
        public string warehouses_in_shipment { get; set; }
        public string payment_type { get; set; }
        public string insurance { get; set; }
        public DateTime ship_date { get; set; }
        public DateTime close_date { get; set; }
        public DateTime customs_date { get; set; }
        public string customs_entry { get; set; }
        public DateTime pl_2_whse_date { get; set; }
        public DateTime estimated_arrival_date { get; set; }
        public DateTime wire_transfer_request_done_date { get; set; }
        public DateTime approved_broker_bill_date { get; set; }
        public DateTime product_released_date { get; set; }
        public List<Invoice> Invoices;
        public List<PurchaseOrder> PurchasOrders;
        public List<Product> Products;
        public List<Container> Containers;
    }

    public class Invoice
    {
        public string invoice_number { get; set; }
    }

    public class PurchaseOrder
    {
        public string id { get; set; }
        public string whse { get; set; }
        public string vendor_code { get; set; }
        public string vendor_name { get; set; }
    }

    public class Product
    {
        public int line_number { get; set; }
        public string description { get; set; }
    }

    public class Container
    {
        public int line_number { get; set; }
        public int size { get; set; }
        public string id { get; set; }
        public string seal { get; set; }
        public DateTime received_date { get; set; }
        public int cartons { get; set; }
    }  
} 
```

以上可以吗？类是否正确嵌套？

我可以让视图正确显示来自服务器的数据，但是当我“发布”表单时，嵌套类中的数据为空。

我相信这是因为输入控件没有按需要构建。

我的观点类似于以下：

```
<table>
<% if (Model.import_rows != null)
   { %>
<%    for (int row = 0; row < Model.import_rows.Count; row++)
      { %>
        <tr><td>
                <%=Html.HiddenFor(x=>x.import_rows[row].id) %>
                <%=Html.TextBoxFor(x => x.import_rows[row].id)%>
            </td>
        </tr>
<%    } %>
<% } %>
</table> 
```

任何建议将不胜感激....

更新：我已经改变了我的观点以包括“hiddenFor”项目。

“import_rows”在控制器中不再为空，但计数为“0”。我仍然必须错过一些东西......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:52:04.223

我试图在 RedirectToAction 中传递视图模型..

发现这行不通。

感谢大家的帮助。

# java - JSF 动态输入

> ID：12570606
> 
> 赞同：0
> 
> 时间：2012-09-24T18:19:58.647
> 
> 标签：java, jsf, primefaces

我正在尝试做一些我认为相对容易的事情。基本上我有一个看起来像这样的对象：

```
public class Attribute {
   public UIInput getInput();
   public void setInput(UIInput input);
   public String getName();
   public void setName(String name);
} 
```

我在 bean 上有一个列表，我试图遍历列表并显示它。

这是一个示例（我也尝试过 p:dataTable）

```
<ui:repeat value="#{someBean.attributes}" var="a">
   <div>#{a.name} <ui:fragment binding="#{a.input}" /> </div>
</ui:repeat> 
```

但是 ui:fragment 不是这样工作的，它是在请求值阶段之前绑定的（显然）。我也尝试过创建一个支持 DataTable 并以这种方式添加数据，但似乎我无法使用这种方法添加自定义行：

```
for (Attribute attr : bean.getAttributes) {
   Row r = new Row();
   r.setCell(0, attr.getName());
   r.setCell(1, attr.getInput());
   table.getRows().add( r );
} 
```

我已经搜索到死了，我找不到任何东西！我想避免编写自己的组件，它只是另一个组件的包装器......但是如果我必须走那条路，我会的。

# php - 在 opencart 中安装模块时创建表

> ID：12570608
> 
> 赞同：3
> 
> 时间：2012-09-24T18:20:04.770
> 
> 标签：php, opencart

我知道如何在安装插件时在 wordpress 中创建表格。但是在opencart中我不知道。请帮助了解如何在安装模块时创建新表。我已经粘贴了用于安装模块的 test.php 代码。

```
 <?php
    class ControllerModuletest extends Controller {
        private $error = array(); 

        public function index() {   
            $this->load->language('module/test');

            $this->document->setTitle($this->language->get('heading_title'));

            $this->load->model('setting/setting');

            if (($this->request->server['REQUEST_METHOD'] == 'POST') && $this->validate()) {            
                $this->model_setting_setting->editSetting('test', $this->request->post);        

                $this->session->data['success'] = $this->language->get('text_success');

                $this->redirect($this->url->link('extension/module', 'token=' . $this->session->data['token'], 'SSL'));
            }

            $this->data['heading_title'] = $this->language->get('heading_title');

            $this->data['text_enabled'] = $this->language->get('text_enabled');
            $this->data['text_disabled'] = $this->language->get('text_disabled');
            $this->data['text_content_top'] = $this->language->get('text_content_top');
            $this->data['text_content_bottom'] = $this->language->get('text_content_bottom');       
            $this->data['text_column_left'] = $this->language->get('text_column_left');
            $this->data['text_column_right'] = $this->language->get('text_column_right');

            $this->data['entry_product'] = $this->language->get('entry_product');
            $this->data['entry_limit'] = $this->language->get('entry_limit');
            $this->data['entry_image'] = $this->language->get('entry_image');
            $this->data['entry_layout'] = $this->language->get('entry_layout');
            $this->data['entry_position'] = $this->language->get('entry_position');
            $this->data['entry_status'] = $this->language->get('entry_status');
            $this->data['entry_sort_order'] = $this->language->get('entry_sort_order');

            $this->data['button_save'] = $this->language->get('button_save');
            $this->data['button_cancel'] = $this->language->get('button_cancel');
            $this->data['button_add_module'] = $this->language->get('button_add_module');
            $this->data['button_remove'] = $this->language->get('button_remove');

            if (isset($this->error['warning'])) {
                $this->data['error_warning'] = $this->error['warning'];
            } else {
                $this->data['error_warning'] = '';
            }

            if (isset($this->error['image'])) {
                $this->data['error_image'] = $this->error['image'];
            } else {
                $this->data['error_image'] = array();
            }

            $this->data['breadcrumbs'] = array();

            $this->data['breadcrumbs'][] = array(
                'text'      => $this->language->get('text_home'),
                'href'      => $this->url->link('common/home', 'token=' . $this->session->data['token'], 'SSL'),
                'separator' => false
            );

            $this->data['breadcrumbs'][] = array(
                'text'      => $this->language->get('text_module'),
                'href'      => $this->url->link('extension/module', 'token=' . $this->session->data['token'], 'SSL'),
                'separator' => ' :: '
            );

            $this->data['breadcrumbs'][] = array(
                'text'      => $this->language->get('heading_title'),
                'href'      => $this->url->link('module/test', 'token=' . $this->session->data['token'], 'SSL'),
                'separator' => ' :: '
            );

            $this->data['action'] = $this->url->link('module/test', 'token=' . $this->session->data['token'], 'SSL');

            $this->data['cancel'] = $this->url->link('extension/module', 'token=' . $this->session->data['token'], 'SSL');

            $this->data['token'] = $this->session->data['token'];

            if (isset($this->request->post['test_product'])) {
                $this->data['test_product'] = $this->request->post['test_product'];
            } else {
                $this->data['test_product'] = $this->config->get('test_product');
            }   

            $this->load->model('catalog/product');

            if (isset($this->request->post['test_product'])) {
                $products = explode(',', $this->request->post['test_product']);
            } else {        
                $products = explode(',', $this->config->get('test_product'));
            }

            $this->data['products'] = array();

            foreach ($products as $product_id) {
                $product_info = $this->model_catalog_product->getProduct($product_id);

                if ($product_info) {
                    $this->data['products'][] = array(
                        'product_id' => $product_info['product_id'],
                        'name'       => $product_info['name']
                    );
                }
            }   

            $this->data['modules'] = array();

            if (isset($this->request->post['test_module'])) {
                $this->data['modules'] = $this->request->post['test_module'];
            } elseif ($this->config->get('test_module')) { 
                $this->data['modules'] = $this->config->get('test_module');
            }       

            $this->load->model('design/layout');

            $this->data['layouts'] = $this->model_design_layout->getLayouts();

            $this->template = 'module/test.tpl';
            $this->children = array(
                'common/header',
                'common/footer'
            );

            $this->response->setOutput($this->render());
        }

        private function validate() {
            if (!$this->user->hasPermission('modify', 'module/test')) {
                $this->error['warning'] = $this->language->get('error_permission');
            }

            if (isset($this->request->post['test_module'])) {
                foreach ($this->request->post['test_module'] as $key => $value) {
                    if (!$value['image_width'] || !$value['image_height']) {
                        $this->error['image'][$key] = $this->language->get('error_image');
                    }
                }
            }

            if (!$this->error) {
                return true;
            } else {
                return false;
            }   
        }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T20:12:22.963

您可以在控制器中添加一个 install() 方法，该方法将在安装发生时运行。只需在其中执行您的 SQL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-28T03:01:04.887

[09/08/2013] 你可以在这里看到[http://www.opencartnews.com/tutorials/creating-a-custom-page-in-opencart-final/](http://www.opencartnews.com/tutorials/creating-a-custom-page-in-opencart-final/)，希望这也能帮助人们解决这个问题..

问候

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-30T16:49:36.313

可能这可以帮助您在安装模块期间创建表。

[http://kvcodes.com/2013/11/creating-table-while-installing-module-in-opencart/](http://kvcodes.com/2013/11/creating-table-while-installing-module-in-opencart/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-22T10:49:18.017

上面提到的两个页面都有一个小错误：它们`ENGINE...`在末尾丢失`query`，所以修复：

```
$this->db->query("CREATE TABLE IF NOT EXISTS `" . DB_PREFIX . "table_Name` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `date_added` datetime NOT NULL,
      `status` tinyint(1) NOT NULL,
      `fieldName` text(2) NOT NULL,
      PRIMARY KEY (`id`)
    ) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=0;"); 
```

# java - 递归返回错误结果的霍纳算法

> ID：12570613
> 
> 赞同：2
> 
> 时间：2012-09-24T18:20:22.453
> 
> 标签：java, algorithm, recursion

> **可能重复：**
> [Horner 的小数部分递归算法 - Java](https://stackoverflow.com/questions/12444587/horners-recursive-algorithm-for-fractional-part-java)

我正在为 Horne'r 算法编写程序，老实说，我对递归没有太多经验。我将此方法设置为仅接受分数（还有另一种方法接受并返回整数），它将返回从基数“r”转换为基数 10 的结果。我不确定为什么，但该方法不似乎正在经历最后的迭代。任何关于我需要做什么来纠正这个问题的建议将不胜感激。

```
(ex: c = 011, xFinal = 2, i = 2)
Expected answer = .375
Actual answer returned = .75

public static double getHornerFraction(long[] c, int xFinal, int i) {
    if (i == 0) {
        return ((double)c[i])/xFinal; 
    }
    return (getHornerFraction(c, xFinal, i-1) + c[i])/xFinal;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:30:33.123

通过查看您指定的内容和期望的内容，我认为问题在于您`c`在错误的方向上行走数组或以其他方式错误地指定它。我认为您想要做的实际上是将数组从 index`0`移动到`c.length`.

```
public static double getHornerFraction(long[] c, int xFinal, int i) {
    if (i == c.length) {
        return 0;
    }
    return (getHornerFraction(c, xFinal, i+1) + c[i])/xFinal;
} 
```

调用上面的函数，`c = {0,1,1}, xFinal = 2, i = 0`它应该给出你所期望的。

# java - jsp页面中的交互式JFreeChart

> ID：12570614
> 
> 赞同：0
> 
> 时间：2012-09-24T18:20:29.357
> 
> 标签：java, jfreechart, linechart

我能够在 jsp 页面中使用 JFreeChart 创建折线图。我是 JFreeChart 新手，想知道我们是否可以让这个图表在 JSP 页面中交互。我搜索了谷歌，发现很少有链接似乎使用摆动并使它们具有交互性。如果可能的话，请引导我朝着正确的方向前进，或者让我知道是否有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:13:05.677

[API](http://www.jfree.org/jfreechart/api/javadoc/index.html)中支持 HTML 图像映射，但是通过[*Java Web Start*](https://stackoverflow.com/tags/java-web-start/info)部署丰富的 Swing 应用程序会获得*更有*吸引力的结果。[](https://stackoverflow.com/tags/java-web-start/info)

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:06:42.810

这取决于您所说的交互式。如果您需要一个图表来更改其数据以响应页面上的其他控件，请查看 CeWolf (http://cewolf.sourceforge.net/)。它将使用 java 服务器端生成您想要的任何图表，并将其作为图像提供给客户端浏览器。如果您希望能够单击图表以与点和线进行交互，然后放下 jFreechart 并坚持在 javascript 中完成客户端的操作。*

# sql - 在 Oracle 中按相关性搜索和显示结果

> ID：12570616
> 
> 赞同：7
> 
> 时间：2012-09-24T18:20:38.990
> 
> 标签：sql, oracle

我是 Oracle 数据库查询开发的初学者。我正在为我的项目开发搜索功能，以按**Zip**或**Name**或**City**搜索 Stores ，其中将向用户提供“一个 HTML 输入框”来输入搜索词。只有一个名为 Stores 的表

显示搜索结果的条件是

1.  如果与结果匹配的搜索词`ZIP`应该是`GROUP`和`SORT BY ZIP DESC`
2.  如果与结果匹配的搜索词`NAME`应该是 group 和 sort by`NAME IN ASC`并且与 to 相同`CITY`
3.  如果搜索词与`ZIP`,`NAME`和`CITY`(to all) 匹配，则首先匹配的结果`ZIP`应显示在 中`DESC order`，`CITY`然后是 The`NAME`

我试过这样的事情

```
SELECT s.uuid AS uuid, COUNT(*) over() AS rowcount
FROM Stores s
WHERE s.postalcode LIKE '%87%'
      OR s.city LIKE '%87%'
      OR CONCAT(CONCAT(s.firstname, ' '),s.lastname) LIKE '%87%'            
GROUP BY s.city, s.postalcode, 
      CONCAT(CONCAT(s.firstname, ' '),s.lastname), s.uuid
ORDER BY CASE WHEN s.postalcode LIKE '%87%'
              THEN s.postalcode END DESC,
         CASE WHEN CONCAT(CONCAT(s.firstname, ' '),s.lastname) LIKE '%87%'
              THEN CONCAT(CONCAT(s.firstname, ' '),s.lastname) 
              ELSE s.postalcode END ASC,
         CASE WHEN s.city LIKE '%87%'
              THEN s.city END 
```

此查询未按预期显示结果（我的意思是它显示没有顺序的结果，而不是像第一个 zip，下一个城市后跟名称）。

如何进行查询以满足上述要求，我是否需要使用存储过程来做到这一点？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:38:44.397

我的回答可能不适合您的架构，但我知道它可以提供帮助。

我有一个`address`有列的表`addressid, address1, address2, address3, city, zip, province, countryid, regionid, modified, modifiedby, VERSION, created, createdby`。

我的要求是按相关性搜索，不区分大小写。列的相关性最高`CITY`。然后是`ADDRESS3`和。`ADDRESS2``ADDRESS1`

我有`:searchKey`一个要由用户输入的绑定变量（我在 Oracle 数据库上使用 SQL Developer）。我已成功使用以下内容：

```
 SELECT addressid, address1, address2, address3, city, zip
         , province, regionid, countryid
    FROM address
   WHERE UPPER(address1||' '||address2||' '||address3||' '||city)
         LIKE '%' || UPPER(:searchKey) || '%' -- << Makes search case insensitive
ORDER BY CASE
              WHEN UPPER(city) = UPPER(:searchKey)                THEN 10 
              WHEN UPPER(city) LIKE UPPER(:searchKey) || '%'      THEN 9 
              WHEN UPPER(city) LIKE '%'|| UPPER(:searchKey) ||'%' THEN 8
              ELSE 0
          END DESC -- << Highest priority given to cities that match the best
         , CASE WHEN UPPER(address3) LIKE UPPER(:searchKey) ||'%'       THEN 5 
                WHEN UPPER(address3) LIKE '%'|| UPPER(:searchKey) ||'%' THEN 4
                ELSE 0
           END DESC
         , CASE WHEN UPPER(address2) LIKE UPPER(:searchKey) ||'%'       THEN 3
                WHEN UPPER(address2) LIKE '%'|| UPPER(:searchKey) ||'%' THEN 2
                ELSE 0
           END DESC
         , CASE WHEN UPPER(address1) LIKE UPPER(:searchKey) ||'%'       THEN 2 
                WHEN UPPER(address1) LIKE '%'|| UPPER(:searchKey) ||'%' THEN 1
                ELSE 0
           END DESC
; 
```

您可以`CASE`根据您的优先级更改构造中的值以允许相关性。

# java - 持续检查Android中互联网连接是否可用的有效方法

> ID：12570621
> 
> 赞同：7
> 
> 时间：2012-09-24T18:21:00.947
> 
> 标签：java, android, service, android-asynctask

> **可能重复：**
> [如何在 Android 中监控网络连接状态？](https://stackoverflow.com/questions/3307237/how-can-i-monitor-the-network-connection-status-in-android)

我需要不断检查互联网是否连接，并使用适当的消息相应地更新文本区域。现在，如果我创建一个**异步任务**，它将执行一次并停止，这不是我想要的。我想随时检查，显然这不应该在主线程上。所以**服务**也不是一个好的选择。任何人都可以帮助我处理这个问题的最佳和有效方法是什么。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T18:28:16.240

用接收器来做。您可以收到有关网络状态更改的通知。例如，

```
private BroadcastReceiver networkReceiver = new BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
     super.onReceive(context, intent);
     if(intent.getExtras()!=null) {
        NetworkInfo ni=(NetworkInfo) intent.getExtras().get(ConnectivityManager.EXTRA_NETWORK_INFO);
        if(ni!=null && ni.getState()==NetworkInfo.State.CONNECTED) {
            // we're connected
        }
     }
     // we're not connected 
   }
} 
```

在您的`onResume()`中注册，然后在`onPause()`.

```
@Override
protected void onPause() {
    super.onPause();
    unregisterReceiver(networkReceiver);
}

@Override
protected void onResume() {
    super.onResume();
    IntentFilter filter = new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION);
    registerReceiver(networkReceiver, filter);
} 
```

此外，要在您的接收器注册之前获取初始状态，请在您的`onResume()`方法中调用它，

```
public boolean isNetworkConnected() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    } 
```

确保您的应用请求此权限，

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:25:47.313

您无需不断询问操作系统是否有网络连接。只需检查连接是否存在，`onResume()`然后[`CONNECTIVITY_ACTION`](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)在连接更改时使用 BroadcastReceiver 从 ConnectivityManager 侦听 Intent 并检查[`EXTRA_NO_CONNECTIVITY`](http://developer.android.com/reference/android/net/ConnectivityManager.html#EXTRA_NO_CONNECTIVITY).

# python - 获取数据限制之外的 matplotlib 颜色条刻度以与边界关键字一起使用

> ID：12570627
> 
> 赞同：6
> 
> 时间：2012-09-24T18:21:36.847
> 
> 标签：python, matplotlib, colorbar

我正在尝试使用颜色条来标记使用 imshow 绘制的离散编码值。`boundaries`我可以使用and关键字来实现我想要的颜色`values`条，这使得颜色条的最大值实际上比正在绘制的数据的最大值大 1。

现在我希望刻度位于颜色栏中每个颜色范围的中间，但无法为颜色栏中最大的颜色块指定刻度位置，似乎是因为它超出了数据值限制。

这是一个快速的代码块来演示这个问题：

```
data = np.tile(np.arange(4), 2)
fig = plt.figure()
ax = fig.add_subplot(121)
ax.imshow(data[None], aspect='auto')
cax = fig.add_subplot(122)
cbar = fig.colorbar(ax.images[0], cax=cax, boundaries=[0,1,2,3,4], values=[0,1,2,3])
cbar.set_ticks([.5, 1.5, 2.5, 3.5])
cbar.set_ticklabels(['one', 'two', 'three', 'four']) 
```

请注意“四”应该在哪里的缺失勾号。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T13:38:04.313

总而言之，这对我有用：

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib import cm
from matplotlib import colors

data = np.tile(np.arange(4), 2)
fig = plt.figure()
ax = fig.add_subplot(121)
cmap = cm.get_cmap('jet', 4)
bounds = np.arange(5)
vals = bounds[:-1]
norm = colors.BoundaryNorm(bounds, cmap.N)
ax.imshow(data[None], aspect='auto', interpolation='nearest', cmap=cmap, norm=norm)

cax = fig.add_subplot(122)
cbar = fig.colorbar(ax.images[0], cax=cax, boundaries=bounds, values=vals)
cbar.set_ticks(vals + .5)
cbar.set_ticklabels(['one', 'two', 'three', 'four']) 
```

`get_cmap`解决方案是使用并以 为边界为图像明确指定颜色图`BoundaryNorm`。然后指定刻度位置就可以了。结果图是：

![离散颜色条示例](../Images/ced2e2baf1ffd60df63e069aaecd9af5.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T07:27:25.870

您`colormap`在`imshow`和中没有使用相同的内容`cbar`。由于您的`data`and`cbar`以相同的方式定义（相同的限制等），因此您没有意识到上面示例中的不一致。你应该定义第`colormap`一个。

假设您要将数据划分为 4 种离散颜色，那么您可以使用

```
import numpy as np
import pylab as plt
from matplotlib import colors, cm

data = np.tile(np.arange(4), 2)
fig = plt.figure()
ax = fig.add_subplot(121)
cax = fig.add_subplot(122)
cmap = cm.get_cmap('jet', 4) # 4 discrete color
im=ax.imshow(data[None], aspect='auto',cmap=cmap)
cbar = fig.colorbar(ax.images[0], cax=cax, cmap=cmap)
plt.show() 
```

![在此处输入图像描述](../Images/0d4663e26f46173a23f9ac41c5a440cf.png)

您现在可以`ticks`根据需要放置。

如果您想定义边界以及这些边界中的颜色，则可以使用`ListedColormap`如下：

```
data = np.tile(np.arange(4), 2)
fig = plt.figure()
ax = fig.add_subplot(121)
cax = fig.add_subplot(122)
cmap = colors.ListedColormap(['b','g','y','r'])
bounds=[0,1,2,3,4]
norm = colors.BoundaryNorm(bounds, cmap.N)
im=ax.imshow(data[None], aspect='auto',cmap=cmap, norm=norm)
cbar = fig.colorbar(im, cax=cax, cmap=cmap, norm=norm, boundaries=bounds, ticks=[0.5,1.5,2.5,3.5],)
plt.show() 
```

![在此处输入图像描述](../Images/fb16cbbecfd7fa075712204115095ac6.png)

# php - Flex：通过 POST 将带有 HTML 实体的 XML 内容发送到 PHP

> ID：12570629
> 
> 赞同：1
> 
> 时间：2012-09-24T18:21:40.300
> 
> 标签：php, xml, apache-flex, post

我开发了一个桌面 AIR 应用程序，它将数据在本地保存为 XML 文件。当用户单击一个按钮时，xml 内容被发布到一个 PHP 应用程序，在该应用程序中处理数据（插入或更新）。

问题是，当我发布一些包含 & 或 > 等 html 实体的数据时，不会解析 xml 内容。

我正在使用这个类来解析 xml 内容： [https ://sites.google.com/site/floweringmind/home](https://sites.google.com/site/floweringmind/home)

这是输入：

```
<companie_ps>
  <denCompanie>Company &amp; Friends</denCompanie>
  <email>abc@abc.ro</email>
</companie_ps> 
```

这是想要的结果：

```
Array
(
    [0] => Array
        (
            [denCompanie] => Company & Friends
            [email] => abc@abc.ro
        )

) 
```

这是实际结果：

```
Array
(
    [0] => Array
        (
            [denCompanie] => Array
                (
                    [@content] => Company
                )

        )

) 
```

错误消息：第 5 行第 28 列（字节索引 63）处的 XML 解析错误 68“XML_ERR_NAME_REQUIRED”。

**编辑**：问题来自于帖子将 xml 标签内容中的 html 实体转换为实际字符的事实。因此，我使用正则表达式将特殊字符替换为它们的 html 实体。这是代码，以防有人需要它：

```
function _handle_match($match)
{
  return '<' . $match[1] . '>' . htmlentities($match[2]) . '</' . $match[3] . '>';
}

$pattern = "/\<(.*)\>(.*?)\<\/(.*)\>/imU";
$xml = preg_replace_callback($pattern, '_handle_match', $xml); 
```

# c# - Nullable 类型之间未定义 Equal 和 Int32

> ID：12570634
> 
> 赞同：1
> 
> 时间：2012-09-24T18:22:00.393
> 
> 标签：c#, sqlite, nullable, dblinq, dbmetal

我正在编写一个无聊的应用程序来管理患者及其临床病史。我将 SQLite 与 DbLinq 库和 DbMetal 代码生成实用程序结合使用。以下是从底层数据库中提取的生成代码中的两个类：

```
[Table(Name="main.Patients")]
public partial class Patient : System.ComponentModel.INotifyPropertyChanging, System.ComponentModel.INotifyPropertyChanged
{

    private static System.ComponentModel.PropertyChangingEventArgs emptyChangingEventArgs = new System.ComponentModel.PropertyChangingEventArgs("");

    private long _birthday;

    private string _firstName;

    private int _hasChildren;

    private System.Nullable<int> _id;

    private int _isMarried;

    private string _lastName;

    private string _profession;

    private EntitySet<ClinicCase> _clinicCases;

    private EntitySet<PatientAddress> _patientsAddresses;

    private EntitySet<PatientPhoneNumber> _patientsPhoneNumbers;

    #region Extensibility Method Declarations
    partial void OnCreated();

    partial void OnBirthdayChanged();

    partial void OnBirthdayChanging(long value);

    partial void OnFirstNameChanged();

    partial void OnFirstNameChanging(string value);

    partial void OnHasChildrenChanged();

    partial void OnHasChildrenChanging(int value);

    partial void OnIDChanged();

    partial void OnIDChanging(System.Nullable<int> value);

    partial void OnIsMarriedChanged();

    partial void OnIsMarriedChanging(int value);

    partial void OnLastNameChanged();

    partial void OnLastNameChanging(string value);

    partial void OnProfessionChanged();

    partial void OnProfessionChanging(string value);
    #endregion

    public Patient()
    {
        _clinicCases = new EntitySet<ClinicCase>(new Action<ClinicCase>(this.ClinicCases_Attach), new Action<ClinicCase>(this.ClinicCases_Detach));
        _patientsAddresses = new EntitySet<PatientAddress>(new Action<PatientAddress>(this.PatientsAddresses_Attach), new Action<PatientAddress>(this.PatientsAddresses_Detach));
        _patientsPhoneNumbers = new EntitySet<PatientPhoneNumber>(new Action<PatientPhoneNumber>(this.PatientsPhoneNumbers_Attach), new Action<PatientPhoneNumber>(this.PatientsPhoneNumbers_Detach));
        this.OnCreated();
    }

    [Column(Storage="_birthday", Name="Birthday", DbType="integer", AutoSync=AutoSync.Never, CanBeNull=false)]
    [DebuggerNonUserCode()]
    public long BirthdayBinaryDate
    {
        get
        {
            return this._birthday;
        }
        set
        {
            if ((_birthday != value))
            {
                this.OnBirthdayChanging(value);
                this.SendPropertyChanging();
                this._birthday = value;
                this.SendPropertyChanged("Birthday");
                this.OnBirthdayChanged();
            }
        }
    }

    [Column(Storage="_firstName", Name="FirstName", DbType="text", AutoSync=AutoSync.Never, CanBeNull=false)]
    [DebuggerNonUserCode()]
    public string FirstName
    {
        get
        {
            return this._firstName;
        }
        set
        {
            if (((_firstName == value) 
                        == false))
            {
                this.OnFirstNameChanging(value);
                this.SendPropertyChanging();
                this._firstName = value;
                this.SendPropertyChanged("FirstName");
                this.OnFirstNameChanged();
            }
        }
    }

    [Column(Storage="_hasChildren", Name="HasChildren", DbType="integer", AutoSync=AutoSync.Never, CanBeNull=false)]
    [DebuggerNonUserCode()]
    public int HasChildren
    {
        get
        {
            return this._hasChildren;
        }
        set
        {
            if ((_hasChildren != value))
            {
                this.OnHasChildrenChanging(value);
                this.SendPropertyChanging();
                this._hasChildren = value;
                this.SendPropertyChanged("HasChildren");
                this.OnHasChildrenChanged();
            }
        }
    }

    [Column(Storage="_id", Name="ID", DbType="integer", IsPrimaryKey=true, IsDbGenerated=true, AutoSync=AutoSync.OnInsert)]
    [DebuggerNonUserCode()]
    public System.Nullable<int> ID
    {
        get
        {
            return this._id;
        }
        set
        {
            if ((_id != value))
            {
                this.OnIDChanging(value);
                this.SendPropertyChanging();
                this._id = value;
                this.SendPropertyChanged("ID");
                this.OnIDChanged();
            }
        }
    }

    [Column(Storage="_isMarried", Name="IsMarried", DbType="integer", AutoSync=AutoSync.Never, CanBeNull=false)]
    [DebuggerNonUserCode()]
    public int IsMarried
    {
        get
        {
            return this._isMarried;
        }
        set
        {
            if ((_isMarried != value))
            {
                this.OnIsMarriedChanging(value);
                this.SendPropertyChanging();
                this._isMarried = value;
                this.SendPropertyChanged("IsMarried");
                this.OnIsMarriedChanged();
            }
        }
    }

    [Column(Storage="_lastName", Name="LastName", DbType="text", AutoSync=AutoSync.Never, CanBeNull=false)]
    [DebuggerNonUserCode()]
    public string LastName
    {
        get
        {
            return this._lastName;
        }
        set
        {
            if (((_lastName == value) 
                        == false))
            {
                this.OnLastNameChanging(value);
                this.SendPropertyChanging();
                this._lastName = value;
                this.SendPropertyChanged("LastName");
                this.OnLastNameChanged();
            }
        }
    }

    [Column(Storage="_profession", Name="Profession", DbType="text", AutoSync=AutoSync.Never)]
    [DebuggerNonUserCode()]
    public string Profession
    {
        get
        {
            return this._profession;
        }
        set
        {
            if (((_profession == value) 
                        == false))
            {
                this.OnProfessionChanging(value);
                this.SendPropertyChanging();
                this._profession = value;
                this.SendPropertyChanged("Profession");
                this.OnProfessionChanged();
            }
        }
    }

    #region Children
    [Association(Storage="_clinicCases", OtherKey="PatientID", ThisKey="ID", Name="fk_ClinicCases_0")]
    [DebuggerNonUserCode()]
    public EntitySet<ClinicCase> ClinicCases
    {
        get
        {
            return this._clinicCases;
        }
        set
        {
            this._clinicCases = value;
        }
    }

    [Association(Storage="_patientsAddresses", OtherKey="PatientID", ThisKey="ID", Name="fk_PatientsAddresses_0")]
    [DebuggerNonUserCode()]
    public EntitySet<PatientAddress> Addresses
    {
        get
        {
            return this._patientsAddresses;
        }
        set
        {
            this._patientsAddresses = value;
        }
    }

    [Association(Storage="_patientsPhoneNumbers", OtherKey="PatientID", ThisKey="ID", Name="fk_PatientsPhoneNumbers_0")]
    [DebuggerNonUserCode()]
    public EntitySet<PatientPhoneNumber> PhoneNumbers
    {
        get
        {
            return this._patientsPhoneNumbers;
        }
        set
        {
            this._patientsPhoneNumbers = value;
        }
    }
    #endregion

    public event System.ComponentModel.PropertyChangingEventHandler PropertyChanging;

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanging()
    {
        System.ComponentModel.PropertyChangingEventHandler h = this.PropertyChanging;
        if ((h != null))
        {
            h(this, emptyChangingEventArgs);
        }
    }

    protected virtual void SendPropertyChanged(string propertyName)
    {
        System.ComponentModel.PropertyChangedEventHandler h = this.PropertyChanged;
        if ((h != null))
        {
            h(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }

    #region Attachment handlers
    private void ClinicCases_Attach(ClinicCase entity)
    {
        this.SendPropertyChanging();
        entity.Patient = this;
    }

    private void ClinicCases_Detach(ClinicCase entity)
    {
        this.SendPropertyChanging();
        entity.Patient = null;
    }

    private void PatientsAddresses_Attach(PatientAddress entity)
    {
        this.SendPropertyChanging();
        entity.Patient = this;
    }

    private void PatientsAddresses_Detach(PatientAddress entity)
    {
        this.SendPropertyChanging();
        entity.Patient = null;
    }

    private void PatientsPhoneNumbers_Attach(PatientPhoneNumber entity)
    {
        this.SendPropertyChanging();
        entity.Patient = this;
    }

    private void PatientsPhoneNumbers_Detach(PatientPhoneNumber entity)
    {
        this.SendPropertyChanging();
        entity.Patient = null;
    }
    #endregion
}

[Table(Name="main.PatientsAddresses")]
public partial class PatientAddress : System.ComponentModel.INotifyPropertyChanging, System.ComponentModel.INotifyPropertyChanged
{

    private static System.ComponentModel.PropertyChangingEventArgs emptyChangingEventArgs = new System.ComponentModel.PropertyChangingEventArgs("");

    private string _address;

    private string _domicileStatus;

    private System.Nullable<int> _patientID;

    private EntityRef<Patient> _patients = new EntityRef<Patient>();

    #region Extensibility Method Declarations
    partial void OnCreated();

    partial void OnAddressChanged();

    partial void OnAddressChanging(string value);

    partial void OnDomicileStatusChanged();

    partial void OnDomicileStatusChanging(string value);

    partial void OnPatientIDChanged();

    partial void OnPatientIDChanging(System.Nullable<int> value);
    #endregion

    public PatientAddress()
    {
        this.OnCreated();
    }

    [Column(Storage="_address", Name="Address", DbType="text", IsPrimaryKey=true, AutoSync=AutoSync.Never)]
    [DebuggerNonUserCode()]
    public string Address
    {
        get
        {
            return this._address;
        }
        set
        {
            if (((_address == value) 
                        == false))
            {
                this.OnAddressChanging(value);
                this.SendPropertyChanging();
                this._address = value;
                this.SendPropertyChanged("Address");
                this.OnAddressChanged();
            }
        }
    }

    [Column(Storage="_domicileStatus", Name="DomicileStatus", DbType="text", AutoSync=AutoSync.Never)]
    [DebuggerNonUserCode()]
    public string DomicileStatus
    {
        get
        {
            return this._domicileStatus;
        }
        set
        {
            if (((_domicileStatus == value) 
                        == false))
            {
                this.OnDomicileStatusChanging(value);
                this.SendPropertyChanging();
                this._domicileStatus = value;
                this.SendPropertyChanged("DomicileStatus");
                this.OnDomicileStatusChanged();
            }
        }
    }

    [Column(Storage="_patientID", Name="PatientID", DbType="integer", IsPrimaryKey=true, IsDbGenerated=true, AutoSync=AutoSync.Never)]
    [DebuggerNonUserCode()]
    public System.Nullable<int> PatientID
    {
        get
        {
            return this._patientID;
        }
        set
        {
            if ((_patientID != value))
            {
                if (_patients.HasLoadedOrAssignedValue)
                {
                    throw new System.Data.Linq.ForeignKeyReferenceAlreadyHasValueException();
                }
                this.OnPatientIDChanging(value);
                this.SendPropertyChanging();
                this._patientID = value;
                this.SendPropertyChanged("PatientID");
                this.OnPatientIDChanged();
            }
        }
    }

    #region Parents
    [Association(Storage="_patients", OtherKey="ID", ThisKey="PatientID", Name="fk_PatientsAddresses_0", IsForeignKey=true)]
    [DebuggerNonUserCode()]
    public Patient Patient
    {
        get
        {
            return this._patients.Entity;
        }
        set
        {
            if (((this._patients.Entity == value) 
                        == false))
            {
                if ((this._patients.Entity != null))
                {
                    Patient previousPatients = this._patients.Entity;
                    this._patients.Entity = null;
                    previousPatients.Addresses.Remove(this);
                }
                this._patients.Entity = value;
                if ((value != null))
                {
                    value.Addresses.Add(this);
                    _patientID = value.ID;
                }
                else
                {
                    _patientID = null;
                }
            }
        }
    }
    #endregion

    public event System.ComponentModel.PropertyChangingEventHandler PropertyChanging;

    public event System.ComponentModel.PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanging()
    {
        System.ComponentModel.PropertyChangingEventHandler h = this.PropertyChanging;
        if ((h != null))
        {
            h(this, emptyChangingEventArgs);
        }
    }

    protected virtual void SendPropertyChanged(string propertyName)
    {
        System.ComponentModel.PropertyChangedEventHandler h = this.PropertyChanged;
        if ((h != null))
        {
            h(this, new System.ComponentModel.PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

我使用以下代码向患者添加地址：

```
PatientAddress address = new PatientAddress();
address.Address = txtAddress.Text;
address.DomicileStatus = cmbDomicileStatus.Text;
currentPatient.Addresses.Add(address);

Database.Source.PatientsAddresses.InsertOnSubmit(address);
Database.Source.SubmitChanges(); 
```

Database.Source 是在生成的代码中扩展 DataContext 的类的实例。在 SubmitChanges 上，我收到此异常：

“在 Nullable(Of Int32) 和 Int32 之间未定义相等运算符。”

消息不是逐字报告的，但意思是一样的。堆栈跟踪指向 DbLinq 代码，更准确地说是源文件 DbLinq.Data.Linq.DataContext.cs 的第 709 行。您可以在此处找到源文件：http: [//dblinq.codeplex.com/SourceControl/changeset/view/16800#314775](http://dblinq.codeplex.com/SourceControl/changeset/view/16800#314775)（在方法 SetEntityRefQueries(object entity) 的主体下）。我发现问题是在将外键值与表达式树中的常量进行比较时出现的，但我无法获得其他信息。你能帮我找到问题吗？

注意：在调用 SubmitChanges 之前，字段 address.PatientID（外键）实际上设置为正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:25:46.437

正如我在上面的评论中提到的（我在这里重复，以便我可以链接图像），你的主键不应该为空。你的映射中应该有一个属性，你可以更改设置它，虽然我不使用 DbLinq，所以我不能直接给你截图。相反，它位于 LINQ-2-SQL DBML 设计器（左）和实体框架 EDMX 设计器（右）中。

![在此处输入图像描述](../Images/a3f5056282ba16b734d21b344042b627.png) ![在此处输入图像描述](../Images/b78df831f6c9859e0e7c1fb0c041d655.png)

* * *

我不太确定您的删除问题 - 这似乎对我有用。您可以编辑您的问题以包含整个删除代码块吗？作为初步猜测，您要么创建一个新对象（而不是加载一个对象）然后尝试删除它，要么您正在删除关联而不删除对象。

作为一般规则，当我可以避免时，我永远不会从数据库中删除它——我只是标记为非活动状态。以这种方式“取消删除”要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:25:37.273

您是否尝试过：`address.Patient = currentPatient` 而不是：`currentPatient.Addresses.Add(address)`？

```
PatientAddress address = new PatientAddress();
address.Address = txtAddress.Text;
address.DomicileStatus = cmbDomicileStatus.Text;
address.Patient = currentPatient;

Database.Source.PatientsAddresses.InsertOnSubmit(address);
Database.Source.SubmitChanges(); 
```

# asp.net - SQL 将 OUTPUT 检索为 asp.net 表单

> ID：12570636
> 
> 赞同：0
> 
> 时间：2012-09-24T18:22:07.817
> 
> 标签：asp.net, sql

我有一个 SQL 存储过程，它在插入几条记录后将数字输出到一行。不过，该查询效果很好，并返回了我需要的内容。我想从查询中获取输出并将其读入标签。有人可以发光吗？谢谢。

```
 cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add(new SqlParameter("@spName", txt_Name.Text));
            cmd.Parameters.Add(new SqlParameter("@spSource", txt_Source.Text));
            cmd.Parameters.Add(new SqlParameter("@spDateCreated", txt_DateCreated.Text));

            paramReturnNumber = cmd.Parameters.AddWithValue("@out", SqlDbType.NVarChar);
            paramReturnNumber.Direction = ParameterDirection.Output;

            cmd.ExecuteNonQuery(); 
```

查询：

```
ALTER PROCEDURE [dbo].[usps_InsertIntoMedia]
@spName varchar(100),
@spSource varchar(100),
@spDateCreated datetime
AS
SET NOCOUNT ON;  
DECLARE @out nvarchar
BEGIN
INSERT INTO Media (Name, Source, DateCreated)
OUTPUT inserted.Number 
VALUES(@spName,@spSource,@spDateCreated )   

Select @out = Media.Number
FROM Media  
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:36:35.167

我正在使用以下技术：

```
 Hashtable ht = new Hashtable();
    foreach (SqlParameter sqlp in cmd.Parameters)
    {
         if ((sqlp.Direction == ParameterDirection.InputOutput) || 
             (sqlp.Direction == ParameterDirection.Output))
         {
             ht.Add(sqlp.ParameterName, sqlp.Value);
         }
    }
    <lblName>.Text = (string)ht["@out"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T12:40:47.753

此问题的解决方案是使用 SET 语句指定 OUTPUT 参数。

# c# - 什么是更好的编码标准 x != null 或 null != x？

> ID：12570642
> 
> 赞同：0
> 
> 时间：2012-09-24T18:22:42.740
> 
> 标签：c#, java, c

> **可能重复：**
> [条件语句差异](https://stackoverflow.com/questions/4957770/conditional-statements-difference)

我想知道什么是编写代码的好方法：

```
X != null 
```

或者

```
null != X 
```

他们两个都会做同样的事情，但有时我看到人们写作`null != X`，所以我不确定什么是写作的好方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T18:28:41.410

反转比较的约定`null != X`主要来自 C 其中

```
if(X == NULL) { 
```

很容易与

```
if(X = NULL) { 
```

这是一个有效的语句，它用 NULL 覆盖 X 而不是检查它是否为 NULL。

反过来比较；

```
if(NULL == X) { 
```

效果一样好，但将等于运算符与赋值混淆了

```
if(NULL = X) { 
```

实际上会给出编译错误。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T18:25:57.880

通常的做法是将变量放在左侧：`X != null`. 将变量放在右侧通常称为“[尤达条件](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T18:28:52.657

将文字放在左侧意味着如果您不小心使用 = 而不是 == 编译器会抱怨。它还可以节省显式空检查，例如（在 Java 中）

```
if("hello".equals(someString)) 
```

`someString`如果为 null，则返回 false 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T18:25:16.513

我总是使用格式

```
<VAR> (!)= <VAL> 
```

并且永远不要颠倒顺序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T18:25:24.930

正如你已经说过的，他们两个都会做同样的事情。问题是关于风格的。我个人会说 x!=null 更具可读性。

# java - Java - 如何在 Apache Ivy 中创建 JavaDocs

> ID：12570644
> 
> 赞同：0
> 
> 时间：2012-09-24T18:22:49.737
> 
> 标签：java, ant, ivy

我知道如何在**Apache Ant Build**`javadocs`中为我的源文件创建。

 **```
 <target name="doc" description="generate documentation">
    <delete dir="${doc.dir}"/>
    <mkdir dir="${doc.dir}"/>
    <javadoc sourcepath="${source.dir}" destdir="${doc.dir}"/>
 </target> 
```

但我不知道如何在**Apache Ivy**中创建它们。

有人可以给我看一个示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:57:44.603

Apache Ivy 是一个依赖管理库，用于（而不是替代）Apache Ant。因此，您将一如既往地使用相同的`<javadoc>`任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:56:36.343

Apache Ivy 是与 Ant（构建管理器）一起使用的依赖管理器。Apache Ivy 通常（或可能总是？）与 Ant 一起用于处理构建。由于创建 javadoc 是构建任务而不是依赖任务，因此使用 Ivy 生成 javadoc 是没有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T22:05:39.997

看起来你在这里转了一圈。Ivy 与 Ant 合作。您仍然有一个`build.xml`用于构建的文件。该`ivy.xml`文件仅包含您的项目构建所需的第三方 jar 列表。因此，您的问题的直接答案是：

将以下内容放入您的`build.xml`:

```
<target name="doc" description="generate documentation">
    <delete dir="${doc.dir}"/>
    <mkdir dir="${doc.dir}"/>
    <javadoc sourcepath="${source.dir}" destdir="${doc.dir}"/>
</target> 
```

* * *

当你使用 Ivy 时，你仍然使用 Ant。而且，你还有一个`build.xml`文件。而且，您仍然使用各种 Ant 任务编写您的构建。

下载[这个项目](http://seantheflexguy.com/blog/2009/02/25/simple-spring-example-project/)。这是一个简单的构建，包含三个类文件和一个`build.xml`文件。您会注意到有一个 jar 目录，其中包含以下两个 jar：

*   commons-logging-1.1.1.jar
*   spring.jar

如果您查看文件的第 36 到 40 行`build.xml`，该项目正在创建一个编译类路径，如下所示：

```
 <path id="java">
     <fileset file="jar/spring.jar"/>
     <fileset file="jar/commons-logging-1.1.1.jar"/>
 </path> 
```

所以，当他编译时，他这样做：

```
 <javac destdir="bin">
     <src path="${src}"/>
     <classpath refid="java"/>
 </javac> 
```

* * *

现在，让我们看看 Ivy 会如何改变这种情况。在 Ivy 中，我创建了一个`ivy.xml`文件，其中包含我需要的 jar 的描述。但是，我只需要指定我直接使用的类。在这种情况下，我只需要`spring.jar`. 这是我的`ivy.xml`：

```
<ivy-module version="1.0>
     <info organisation="com.seantheflexguy"  
         name="ContextExample"
         revision="1.0"/>

    <configurations>
        <conf="default" visibility="public"/>
        <conf="compile" visibility="public"/>
    </configurations>

    <dependencies>
        <dependency org="org.springframework" name="spring"
            rev="2.0.4"   conf="compile->default"/>
    </dependencies>
</ivy-module> 
```

现在，`jar`我将不再使用目录中的 jar，而是让 Ivy 构造类路径：

```
 <ivy:resolve/>
 <ivy:cachepath pathid="java"/>

 <javac destdir="bin">
     <src path="${src}"/>
     <classpath refid="java"/>
 </javac> 
```

请注意，我没有`<path>`使用任务来创建类路径，而是使用了 Ivy 使用的两个 Ant 任务。`<ivy:resolve/>`看着我并解决了我对我请求的 jar的`ivy.xml`依赖。这些罐子将被下载到我的`$HOME/.ivy2/cache`目录中。

该`<ivy:cachepath>`任务创建了一个类路径，我将其称为类路径`java`，因为它以前是这样调用的。

通过这两个 Ivy 任务，我创建了一个可以用于该`<javac>`任务的类路径。事实上，我什至懒得改变`<javac>`任务。

所以，在常春藤：

*   我仍然需要我的`build.xml`. 这就是我定义我需要做的各种构建任务的方式。事实上，Ivy 在我的`build.xml`文件中定义了更多我需要的 Ant 任务。
*   该`ivy.xml`文件只是定义了我的 jar 依赖项。当我在这个项目中实现 Ivy 时，我可以删除该`jar`目录。

这是否有助于您了解 Ivy 的工作原理？**

# c# - 如何通过c#发布表单

> ID：12570649
> 
> 赞同：1
> 
> 时间：2012-09-24T18:23:15.600
> 
> 标签：c#, asp.net, .net

我想使用 C# 从操作中发布一个表单。

```
<form method=post action=controller.php>
....
</form> 
```

我已经制作了一个显示在 apsx 页面上的表格。

我的问题是我们如何通过 C# 使用 POST 方法发送表单。注意：我想从 aspx 页面中使用单独的 C# 文件。

是否可以在按钮事件上以编程方式向 controller.php 发送表单？我们在操作页面上收到表单的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:42:57.880

这是我用来从与网页无关的代码中进行 HTTP 发布的代码。它是否适用于你，我不确定。

```
 public static string HTTP_Post(string url, string data, DataType type = DataType.XML)
    {
        byte[] arr = System.Text.Encoding.UTF8.GetBytes(data);
        return new StreamReader(HTTP_Post_Response(url, arr, type)).ReadToEnd();
    }
    public static string HTTP_Post(string url, FileInfo file, DataType type = DataType.XML)
    {
        StreamReader fs = new StreamReader(file.OpenRead());
        byte[] arr = System.Text.Encoding.UTF8.GetBytes(fs.ReadToEnd());
        fs.Close();
        return new StreamReader(HTTP_Post_Response(url, arr, type)).ReadToEnd();
    }

    private static Stream HTTP_Post_Response(string url, byte[] data, DataType type)
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Method = "POST";
        switch (type)
        {
            case DataType.Text:
                request.ContentType = "text/text"; break;
            case DataType.XML:
                request.ContentType = "text/xml"; break;
        }
        request.ContentLength = data.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(data, 0, data.Length);
        dataStream.Close();
        return request.GetResponse().GetResponseStream();

    }

    public enum DataType
    {
        Text = 0,
        XML,
    } 
```

只需`HTTP_Post(url, content)`从您的代码中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:30:31.143

在 PHP 中，您将表单发布到不同的页面以处理用户输入。

但是，在 asp.net 表单中将 Posts 返回到自身，并且您在代码隐藏文件中的提交按钮的事件处理程序内部进行表单处理。

假设在 Default.aspx 中您没有指定 action 属性，

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="WebApplication3.Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:TextBox runat="server" ID="yourTextBox"/>
        <asp:Button ID="yourButton" Text="Submit" runat="server" OnClick="yourButton_Click"/>        
    </div>
    </form>
</body>
</html> 
```

当您查看页面源时，操作将填充为相同的页面名称。

**代码背后**

```
public partial class Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //IsPostBack false when page loads first time
            if (!IsPostBack)  //same as $_POST['Submit'] in PHP
            {
                //use this if block to initialize your controls values
                yourTextBox.Text = "Please enter value";
            }
        }

        protected void yourButton_Click(object sender, EventArgs e)
        {
            //obtain control values
            //do form prcessing
            string userInput = yourTextBox.Text;

            //write your business logic here, 

            //redirect to next page
            Response.Redirect("action.aspx");
        }
    } 
```

有关如何在页面之间传递数据的更多详细信息，请查看此 msdn 链接 -

[http://msdn.microsoft.com/en-us/library/6c3yckfw(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/6c3yckfw(v=vs.100).aspx)

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:31:03.703

您可以尝试使用此代码 - 基于`Socket class`

```
IPHostEntry ipHost = Dns.GetHostEntry("....your adress");//Adjust your adress
IPAddress  ipAddr = ipHost.AddressList[0];
IPEndPoint ipEndPoint = new IPEndPoint(ipAddr, 11000);

// Create a TCP socket.
Socket client = new Socket(AddressFamily.InterNetwork,
        SocketType.Stream, ProtocolType.Tcp);

// Connect the socket to the remote endpoint.
client.Connect(ipEndPoint);

// There is a text file test.txt located in the root directory. 
string fileName = "C:\\YourAspx.aspx";

// Send file fileName to remote device
Console.WriteLine("Sending {0} to the host.", fileName);
client.SendFile(fileName);

// Release the socket.
client.Shutdown(SocketShutdown.Both);
client.Close(); 
```

# objective-c - 新手试图理解 .h 文件中的多个@interface

> ID：12570654
> 
> 赞同：6
> 
> 时间：2012-09-24T18:23:29.297
> 
> 标签：objective-c, ios, interface

我是一个新手，试图使用一个免费软件应用程序，最后一次更新是在 2008 年，并且因为（显然）被没有回复我的电子邮件的程序员抛弃了，并且既为当前的 MacOS 更新它，也为苹果手机。我想这将是一个漫长且有点噩梦的过程，但我期待学习。

现在我正处于起步阶段，我正在查看原始文件中的以下 GeniusPair.h 文件：

```
#import <Foundation/Foundation.h>

@class GeniusItem;
@class GeniusAssociation;

extern const int kGeniusPairDisabledImportance;
extern const int kGeniusPairMinimumImportance;
extern const int kGeniusPairNormalImportance;
extern const int kGeniusPairMaximumImportance;

@interface GeniusPair : NSObject <NSCoding, NSCopying> {
GeniusAssociation * _associationAB; //!< Stats for standard learning mode directional relationship. 
GeniusAssociation * _associationBA; //!< Stats for Jepardy style learning mode directional relationship.

NSMutableDictionary * _userDict;
}

+ (NSArray *) associationsForPairs:(NSArray *)pairs useAB:(BOOL)useAB useBA:(BOOL)useBA;

- (id) initWithItemA:(GeniusItem *)itemA itemB:(GeniusItem *)itemB userDict:(NSMutableDictionary *)userDict;

//various other methods declared

@end

@interface GeniusPair (GeniusDocumentAdditions)

- (BOOL) disabled;
//various other methods declared

@end

@interface GeniusPair (TextImportExport)

- (NSString *) tabularTextByOrder:(NSArray *)keyPaths;
//various other methods declared

@end 
```

我的问题是（问题是）：为什么 .h 文件中有多个接口？`@interface GeniusPair : NSObject`和有什么区别`@interface GeniusPair (TextImportExport)`？`@interface`在括号中加上后跟的东西与`@interface`后跟冒号的作用是什么？

非常感谢您的帮助解释。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T18:26:12.930

它被称为一个**类别**。类别对于扩展类（当您没有它们的源代码，如 UIKit 或 Foundation 类时）或将类的扩展/高级功能与其基方法分离（这是您遇到的情况）很有用。

当在文件的实现（而不是声明）上下文中使用时，它们也可以用于模拟私有方法`.m`。

更多关于[Apple Developer 的主题。](https://developer.apple.com/library/ios/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html#//apple_ref/doc/uid/TP40008195-CH5-SW1).

# node.js - Node.js 中的 MongoDB 索引

> ID：12570656
> 
> 赞同：0
> 
> 时间：2012-09-24T18:23:40.253
> 
> 标签：node.js, mongodb, mongoose

嗨，我有以下代码作为我的应用程序的一部分，我必须在其中启用索引

```
var db = mongoose.createConnection(config.database.address, config.database.dbName);
var testSchema = new mongoose.Schema({
      status                  : String,
      loc                     : {lon: Number,  lat: Number },
      createDate              : {type: Date, default: Date.now}
});
exports.registerEmployee = function   (objEmployee , callback)
{
 var employee = db.model(objEmployee.categoryName, testSchema );
// Saves data     
} 
```

如何为上述模式启用索引？由于集合名称（objEmployee.categoryName）是动态创建的，所以我有点卡在这里，因为对于不同的类别，将会创建一个新的集合。当我们创建新集合时，我们还必须启用索引。

这该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T04:51:14.763

集合名称是动态的这一事实不会影响您如何在`loc`. 您将索引声明为`loc`字段定义的一部分`testSchema`，Mongoose 将负责在您为 via 注册架构的每个集合上创建该索引`db.model`。至于索引定义，您可以在架构中指定该权限：

```
 loc: {type: {lon: Number,  lat: Number}, index: '2d'}, 
```

# python - 如何在 Python 3 循环中改变对象的名称？

> ID：12570658
> 
> 赞同：-1
> 
> 时间：2012-09-24T18:23:43.817
> 
> 标签：python, variables, python-3.x, while-loop, calculator

我正在尝试创建一个简单的计算器，并且我需要在循环中更改对象的名称。

```
RoR = RoR + 1
"C{0}R{1}".format(CoC, RoR) = int(input("What is your row {0} Column {1} number?: ".format(RoR, CoC))) 
```

这是我尝试过的，但没有奏效。我希望对象看起来像 C1R1 = 18 C1R2 = 88 等。我不太擅长 Python，所以非常感谢一些帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:05:40.960

使用 Woobles 评论中提到的字典！

```
mydict = {
           'a' : 1,
           'b' : 2,
          ...
         } 
```

在 'mydict' 中提取/修改 'a' 的数据很容易：

```
>>>print( mydict['a'] )
1
>>>mydict['a'] = 2
>>>print( mydict['a'] )
2 
```

所以在你的情况下，它会是这样的：

```
mydict = {}
RoR = RoR + 1

mydict["C{0}R{1}".format(CoC, RoR)] = int(input("What is your row {0} Column {1} number?:  ".format(RoR, CoC))) 
```

# windows-8 - 尝试重新打包 APPX 包时出现 SignTool 内部错误？

> ID：12570659
> 
> 赞同：10
> 
> 时间：2012-09-24T18:23:47.513
> 
> 标签：windows-8, package, windows-runtime, signtool, windows-store

我正在分析现有的 Windows 应用商店应用程序并对其进行修改，以确保我公司的混淆器可以与它们一起使用。

不过，我在这样做时遇到了一些问题。我可以很容易地从商店获取一个 APPX 包（需要 Fiddler 来获取 URL）。然后我可以使用任何解压缩程序将 appx 解压缩到一个文件夹中。然后我可以在 APPX 中获取程序集并稍微修改 IL。然后我重新制作并签署包：

```
makeappx pack /d "mypackage" /p "mypackage.appx"
signtool sign /fd sha256 /f temporarykey.pfx mypackage.appx 
```

然后我得到一个signtool错误：

```
SignTool Error: An unexpected internal error has occured
Error information: "Error: SignerSign() failed." (-2147024885/0x800700b) 
```

然后在尝试使用 Visual Studio 创建的用于安装/旁加载任何 APPX 包的标准 powerscript 文件安装它时当然会出错。

```
Found package: C:\....mypackage.appx 
Error: The package is not digitally signed or its signature is corrupted 
```

我已经对从 Visual Studio 生成的包使用了这个确切的过程。临时密钥是否绑定到特定包或其他东西？我错过了什么？这是signtool中的错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T20:12:18.910

显然，您不能只拿任何临时密钥并用它签署 APPX。特别是证书主题行必须匹配（“发布者名称”）。我不知道确定主题行实际上是什么的更好方法。首先，尝试使用 signtool 并使用任何临时密钥对 APPX 文件进行签名。现在转到事件查看器。然后是应用程序和服务，然后是 Microsoft，然后是 Windows，然后是 AppxPackaging，最后是 Microsoft-Windows-AppxPackages/Operational。应该有一个刚刚从该构建中发生的错误事件。核实。它应该说类似

```
Error 0x800700B: The app manifest publisher name (CN=random-hex-number) must match the subject name of the signing certificate (CN=MyWrongName) 
```

所以，现在请确保抓住那个随机十六进制数。这需要是证书的主题行，并且是错误的原因。要生成工作证书：

```
makecert.exe mycert.cer -r -n "CN=random-hex-number" -$ individual  -sv private.pkv -pe -cy end
pvk2pfx -pvk private.pkv -spc mycert.cer -pfx mytemporarykey.pfx 
```

现在最后，您应该有一个可以与 signtool 一起使用的临时密钥！

希望这个答案能很好地服务于其他人。

# ruby-on-rails - 在模型编辑表单中以不同的方式格式化日期？

> ID：12570660
> 
> 赞同：1
> 
> 时间：2012-09-24T18:23:50.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我的一个模型中有一个日期列

```
 create_table "jobs", :force => true do |t|
    t.date     "due_date"
  end 
```

当我创建一个工作然后尝试编辑它时，日期的格式不是我想要的格式。我想看到的是“2012 年 9 月 27 日”。我实际看到的是：

![在此处输入图像描述](../Images/99172c38dcf99851b740d2ed2933d2c1.png)

我发现[这个问题](https://stackoverflow.com/a/2443595/574190)意味着我可以在初始化程序中更改默认日期格式。在`config/initializers/date_time_formats.rb`我有：

```
Date::DATE_FORMATS[:default] = "%d %B %Y"
Date::DATE_FORMATS[:db] = "%d %B %Y" 
```

当我运行 rails 控制台并检查 Date::DATE_FORMATS 哈希时，我看到了这个（看起来正确）：

```
{:short=>"%e %b", :long=>"%B %e, %Y", :db=>"%d %B %Y", :number=>"%Y%m%d", :long_ordinal=>#<Proc:0x007fce4509f9c8@/Users/davidtuite/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.7/lib/active_support/core_ext/date/conversions.rb:12 (lambda)>, :rfc822=>"%e %b %Y", :default=>"%d %B %Y"} 
```

自从制作初始化程序以来，我已经重新启动了我的服务器。

我究竟做错了什么？我正在使用 Rails 3.2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:36:53.543

使用时间而不是日期：

```
Time::DATE_FORMATS[:default] = "%d %B %Y"
Time::DATE_FORMATS[:db] = "%d %B %Y" 
```

你也可以使用

```
@job.due_date.to_s(:default) 
```

强制显示日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:02:45.357

我似乎可以让它工作的唯一方法是伪造`form_for`输入格式并更改默认日期格式。

```
# config/initializers/date_time_format.rb
Date::DATE_FORMATS[:default] = "%d %B %Y"

# jobs/edit.html.erb
<%= form_for @job do |f| %>
  <%= text_field_tag 'job[due_date]', f.object.due_date %>
<% end %> 
```

# desktop - 如何使用 xdg-desktop-icon 创建 Linux 桌面图标跨桌面（KDE、GNOME）？

> ID：12570662
> 
> 赞同：2
> 
> 时间：2012-09-24T18:23:58.870
> 
> 标签：desktop, shortcut, gnome, kde, xdgutils

我想使用 xdg-desktop-icon 工具，因为它可以编写脚本并且可以跨桌面工作（至少在带有 Gnome 和 KDE 的 Linux 上）。至少根据 freedesktop.org 应该这样做。[1](http://standards.freedesktop.org/desktop-entry-spec/latest/index.html)

制作了一个最小的文件：test.desktop

```
[Desktop Entry]

Encoding=UTF-8
Type=Application

Exec=test
Icon=test

Name=test 
```

使用 xdg-desktop-icon...

```
xdg-desktop-icon install --novendor test.desktop 
```

退出代码为 0。（成功。）但是... 我在桌面上没有看到任何新图标。重启后也不行。这在带有 KDE 的 Ubuntu Precise 12.04 和带有 KDE 的 Debian Wheezy 上失败了。

如何正确使用 xdg-desktop-icon 工具？

KDE 的问题与桌面设置有关。文件夹视图、报纸视图等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:52:03.567

`xdg-desktop-icon`依赖于`xdg-user-dir`确定用户桌面目录。您可以检查该命令和文件管理器（或处理桌面的程序）的设置。

假设默认情况下它是`/home/user/Desktop`，那么您必须在那里检查文件名。如果文件在那里，`xdg-desktop-icon`则按预期工作。

您必须考虑必须`test`使用单独安装图标（在您的情况下）`xdg-icon-resource`。也就是说，如果您没有使用已安装的股票图标或自定义图标，或者您没有使用图标的绝对路径。

不要忘记`xdg-desktop-icon`仅将`.desktop`文件复制到特定目录中。不多不少。

如果我正在处理 ~/myapp 目录，我会通过以下方式进行检查：

```
$ xdg-user-dir
/home/user/Desktop
$ ls `xdg-user-dir`/test.desktop
ls: cannot access /home/user/Desktop/test.desktop: No such file or directory
$ xdg-desktop-icon install --novendor test.desktop
$ ls `xdg-user-dir`/test.desktop
/home/user/Desktop/test.desktop 
```

最终，您可以使用任何`xdg-`脚本运行：

```
$ XDG_DEBUG_LEVEL=1 xdg-desktop-icon ... 
```

这将为您提供额外的一行，告诉您桌面文件的安装位置。此时，如果该图标尚未安装，它可能会出现一个难看的默认图标。

# c# - 在加载时从服务器端填充 jQuery 变量

> ID：12570665
> 
> 赞同：0
> 
> 时间：2012-09-24T18:24:03.973
> 
> 标签：c#, asp.net, jquery

我现在在互联网上寻找了超过 2 小时，试图找到如何在加载 asp.net 页面时从服务器端代码填充 jQuery 变量的简单示例。

到目前为止我所拥有的：

我有一个调用此 jquery 代码的按钮：

```
 function GetListOfQuestions() {
        $.ajax({
            type: "POST",
            url: 'UserProfile.aspx/getQuestions',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: OnAjaxError,
            success: AjaxSucceeded
        });
        //$.getJSON('UserProfile.aspx/getQuestions', {}, function (data) {
        //    alert(data);
        //});
    }

    function AjaxSucceeded(result) {

        alert(result);

    } 
```

GetListOfQuestions 调用服务器端：

```
 [WebMethod]
    public static List<Question> getQuestions(){

        var userGuid = (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
        IEnumerable<Question> list = Question.getQuestionsForUser(userGuid).Select(x => new Question
        {
            Uid = x.Uid,
            Content = x.Content
        });

        return list.ToList();
    } 
```

如果我提醒它，结果会返回一个对象，因此它必须包含某种数据，但我找不到任何关于如何在客户端再次检索数据的示例。

我不确定我现在所做的是否正确（我是 jQuery 新手）。那么如何再次从结果变量中检索数据呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:34:46.837

可能有更好的方法，但这是我知道的一种方法：

```
[WebMethod]
    public static string getQuestions(){

        var userGuid = (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
        IEnumerable<Question> list = Question.getQuestionsForUser(userGuid).Select(x => new Question
        {
            Uid = x.Uid,
            Content = x.Content
        });

        return new JavaScriptSerializer().Serialize(list.ToList())
    } 
```

在您的 jQuery 方法中，您可以

```
result = $.parseJSON(data) ; 
```

做一个`console.log(result)`看看如何遍历结果，应该只是一个 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:37:23.200

在页面上放置一个隐藏字段并在那里设置变量值，稍后从 js 读取隐藏值。

另一种选择是使用 ScriptManager.RegisterStart UpScript 将您的变量直接作为 js 写入页面。

# javascript - jQuery 解构 | ES 5 中的 JQuery 对象？

> ID：12570666
> 
> 赞同：4
> 
> 时间：2012-09-24T18:24:05.053
> 
> 标签：javascript, jquery

这将返回一个 jQuery 对象。什么是 jQuery 对象。它是一个对象、一个数组还是两者的某种组合？

```
$("#id") 
```

我在[这里寻找源代码](http://code.jquery.com/jquery-latest.js)，但找不到它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T18:39:24.400

***首先，它不是什么。***

jQuery 对象不是数组。

在 JavaScript 中，有内置的原生构造函数。其中之一是`Array`。但最终`Array`构造函数会创建对象。jQuery 对象不是从 Array 构造函数构建的。

* * *

***那么 Object 与 Array 有什么不同呢？***

由于`Object`和`Array`是内置的本机构造函数，因此从构造函数创建的对象具有内部`[[Class]]`属性。你可以像这样看到它的价值。

```
Object.prototype.toString.call({}); // [object Object]
Object.prototype.toString.call([]); // [object Array] 
```

所以你可以看到这些对象有区别。

* * *

***还有哪些不同之处？***

两个对象的原型链是不同的。对于一个普通的对象，它可以像这样可视化。

```
{} ---> Object.prototype ---> null 
```

而对于一个数组，像这样。

```
[] ---> Array.prototype ---> Object.prototype ---> null 
```

因此，您可以看到它们的继承也将它们区分开来。

* * *

***那么jQuery对象呢？***

jQuery 对象更像是一个普通的对象，而不是一个数组。但是 JavaScript 允许您定义自定义*（非内置）*构造函数。

`toString`值将与 Object 相同，`[object Object]`但原型链将不同。

```
function Foo() {

}

new Foo() ---> Foo.prototype ---> Object.prototype ---> null 
```

所以 jQuery 的原型链将与此类似，但使用`jQuery`构造函数而不是`Foo`.

* * *

***那么，这意味着什么？***

JavaScript 中的所有对象都相似，因为它们都继承自`Object.prototype`*，但是您可以拥有具有扩展原型链的不同对象，也可以拥有具有内部`[[Class]]`属性的本地对象，从而使它们与众不同。

所以要回答“什么类型的对象是jQuery对象”的问题，答案是它是一个`Object.prototype`像每个对象一样继承自的对象，但也继承自`prototype`其自定义构造函数的。

[* 请注意，在 ES5 中，您也可以拥有一个没有原型链的对象。它的链立即以 终止`null`。]

* * *

***但是 jQuery 对象在数字索引处存储 DOM 元素，并且有一个`.length`属性。这不是使它成为一个数组吗？***

不，这只是使它成为具有数字属性和名为`length`.

```
var myObj = {};
myObj[0] = "foo";
myObj[1] = "bar"; 
```

数组的属性并不特殊。它们*与*对象的属性相同。

```
var myArr = [];
myArr[0] = "foo";
myArr[1] = "bar"; 
```

这两个代码示例正在做完全相同的事情。

* * *

***他们在做同样的事情？真的吗？***

差不多吧。Array 对象和 Object 对象之间的属性本身没有什么不同，但是 Array 有一些特殊的行为。

例如，如果我在比当前`.length`帐户更高的索引处添加属性，`.length`则会自动调整。

```
myArr.length; // 2
myArr[9] = "baz";
myArr.length; // 10 
```

在一个阵列上，`.length`它本身具有一些“魔法”能力，比如能够通过设置`.length`一个较低的值来截断阵列。

```
myArr.length = 1;
myArr[1]; // undefined 
```

因此，虽然 jQuery 对象具有数字属性和`.length`属性，但它的行为与原生 Array 的行为不同。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-24T18:26:12.520

`$()`返回 jQuery 类 ( `new jQuery()`) 的实例。
因此它继承了所有标准 jQuery 方法，以及所有插件，来自`jQuery.prototype`（别名为`jQuery.fn`）

此外，构造函数通过添加属性以及集合中每个元素的索引属性，`jQuery()`将每个实例转换为*类似数组的对象。*`length`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T18:27:11.837

返回的*对象*（请参阅[EcmaScript §4.2.1](http://es5.github.com/#x4.2.1)了解这意味着什么）是 jQuery 内部构造函数的一个实例（`jQuery.fn.init`- 有关 jQuery 实例化模式的详细信息，请参阅[此答案](https://stackoverflow.com/a/12143833/1048572)），继承自`$.fn`原型对象。

当然，它是`Object`JavaScript 中几乎所有对象的一个​​实例。

而且，因为每个 jQuery 元素都代表一个 [DOM] 元素的集合，所以它看起来像一个`Array`带有数字索引属性的 —— 尽管该`length`属性不会自动自我更新，但您可以在其上应用大多数 Array 方法。它不是一个真实的`Array`实例（[什么是数组](http://javascriptweblog.wordpress.com/2010/07/12/understanding-javascript-arrays/)，[什么是 JS？](http://javascript.about.com/od/problemsolving/a/notarrays.htm)）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T18:26:48.693

jquery 对象是 jquery 库的一个对象，基本上所有的 jquery 方法和属性都附加到该 jquery 对象上，您不能将其用作普通的 javascript 对象。它也与它是哪个 jquery 对象不同。

# c# - 如何处理网址中的日文名称？

> ID：12570667
> 
> 赞同：3
> 
> 时间：2012-09-24T18:24:06.843
> 
> 标签：c#, seo, slug

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:04:07.483

我建议你不要使用第二种选择`2./user/1/アウロン.`

原因是，如果我的机器上没有安装日语语言（我使用的是 Windows 7），而你给我发了一个类似 www.abc.com/user/1/アウロン 的链接，它将显示一个指向[www.abc 的链接。 com/user/1/](http://www.abc.com/user/1/)而不是[www.abc.com/user/1/アウロン](http://www.abc.com/user/1/%E3%82%A2%E3%82%A6%E3%83%AD%E3%83%B3)。

当我在 Skype 上向我的同事发送包含泰语字符的链接时，我注意到了这种行为。它链接到不正确的链接，就像我在上一段中所说的那样。

# java - 运行 Android Support v4 库演示程序

> ID：12570669
> 
> 赞同：4
> 
> 时间：2012-09-24T18:24:29.390
> 
> 标签：java, android, eclipse, android-support-library

我有兴趣为 v4 库运行 Android 支持库演示项目。使用 Android SDK 管理器，我安装了 Eclipse 插件和从 2.2 到 4.0.1 的 API。涉及到几个问题，并且提供的示例项目远未在我下载的配置上运行。

要重现此错误：

*   安装 SDK 和 Eclipse Juno

*   使用 File --> New --> New Project 导入示例 v4 兼容性项目，然后选择“from existing code”，例如，目标中的`Support4Demos`文件夹`<Android-sdk-path>/extras/android/support`

![在此处输入图像描述](../Images/9cfef9ee00cb5de42e355a1681d039d2.png)

*   打开文件`AccessibilityManagerSupportActivity.java`。出现以下错误。

![在此处输入图像描述](../Images/59b0c550907c4baa5074cd5931818378.png)

*   打开`res/values-v11/styles.xml`. 出现以下错误。 ![在此处输入图像描述](../Images/b671aabfc04363094c7eed4869fdee79.png)

如何摆脱这些错误？我还想了解它们出现的原因，以便将来修复它们。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:56:20.360

清洁解决方案是：

*   右键单击您的项目。
*   选择“安卓工具”
*   选择“添加支持库”。
*   安装合适的支持库（最新的）

我无法真正回答为什么会出现这个问题，但我猜 Android 团队不提供 Android 支持库，因为它一直在变化，所以不要卡在一些旧版本上，他们想要我们自己提供。

如果错误仍然存​​在或出现新错误，请再次右键单击项目并选择“Android工具”->“修复项目属性”

**更新：**结合我的回答，消除其余错误的方法是以不同于您的方式导入项目。

*   选择文件 -> 新建 -> 其他
*   点击下一步
*   编写 Android 示例
*   选择 Android 示例项目，然后单击下一步

现在如上所述添加 Android 支持库。但是，您仍然会收到错误。要解决这些问题，请执行以下操作：

*   右键单击您的项目并选择“属性”
*   选择安卓
*   选择 SDK 版本等于 3.0 或以上
*   选择 Ok 并从项目菜单中清理项目。
*   全部做完 ;-）

现在您将无法在低于 Android 3.0 的设备上运行示例项目。原因是由于对某些主题和设置的一些依赖，这显然是在 Android 3.0 之前没有添加的。

谷歌为什么这样做是没有道理的，但他们确实做到了。您可以尝试删除 SDK +11 (Android 3.0) 特定依赖项，但这需要一些时间 - 错误比您实际看到的要多 - 特别是在 XML 文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:39:12.280

您必须添加 v4 支持库。

为此，请按照以下步骤操作：

*   选择您的项目。
*   从菜单中单击**项目。**
*   选择**属性**。
*   单击**Java 构建路径**。
*   选择**库**选项卡。
*   单击**添加外部 JAR**。
*   选择您安装的 Android SDK 的**主目录**，然后转到**extras** -> **android** -> **support** -> **v4**，然后选择**android-support-v4.jar**并单击**Open**。
*   单击**确定**。

这应该消除错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:42:14.277

请检查您的 libs 文件夹是否存在 android-support-v4.jar。如果不在 libs 文件夹中添加这个 jar 文件。只需从任何项目中复制 android-support-v4.jar 并将其粘贴到项目的 libs 文件夹中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-13T15:07:21.760

我花了整整一个晚上，但无法解决这个问题。我终于偶然解决了：在演示中更改一些文件并保存，然后将其更改回来，这清除了所有错误。我认为当您更改某些文件并保存时，eclipse 构建项目并生成 R.java。

# matlab - generate synthetic data 2d x t x v using matlab

> ID：12570678
> 
> 赞同：-2
> 
> 时间：2012-09-24T18:24:59.670
> 
> 标签：matlab, 3d, simulation, mesh, synthetic

i am trying to generate/simulate a set of synthetic/ simulated data set to generate a synthetic blood flow image in matlab. but i dont know how or where to starts from...

i know i should use the mesh function but how do i make it so it could be in time dimension?

I will be very thankful if anybody could help/ guide me through. I want to generate a data set of size 25x25x10x4\. Which is X x Y x t x V. The image should be something similar to this:

![this is an image of supposedly vessel in the brain](../Images/32f382d33e9aacef909fda3cb8052558.png)

or like this:

![enter image description here](../Images/cf6679615012ccd2785f26f4df932d97.png)

thank you in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:51:02.317

### 数据集#1：

使用您最喜欢的线表示（极坐标、线性等）并为您的线随机生成参数。例如，如果您选择`y = mx + c`，随机生成`m`和`c`。现在你已经定义了你的线，[使用这个 SO 方法](https://stackoverflow.com/a/1941310/71131)在图像上绘制它。

![在此处输入图像描述](../Images/c3ba33a181b1ac6aa2d21ece3a574307.png)

### 数据集#2：

它们看起来像二维高斯人。按以下方式使用[`mvnpdf`](http://www.mathworks.com/help/stats/mvnpdf.html)。

```
[X Y] = meshgrid(x_range,y_range);
Z = reshape(  mvnpdf([X(:) Y(:)],MU,SIGMA)   ,size(X));
imagesc(Z); 
```

使用一些随机生成的`MU`和位于 和 中的`SIGMA`等。例如和`MU``x_range``y_range``x_range = -3:0.1:3;y_range = x_range;`

> 亩=
> 
> ```
> 0.9575    0.9649 
> ```
> 
> 适马 =
> 
> ```
> 1.2647    0.3760
> 0.3760    1.0938 
> ```

![在此处输入图像描述](../Images/103d2150fbfb944eec3d8eca4fa407af.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:41:31.633

只是为了补充@Jacob 的非常具体的答案，您需要一个 4D`MxNxTxV`矩阵。在此，根据帖子，`MxN`是每个图像的维度，`T`是时间维度，V 是每个时间帧的通道数或样本数（RGB 为 3，任何光谱图像为 >3）。

*   对于每个 T，生成 V 图像。
*   使用数据集 #1 和数据集 #2 的随机参数模拟 V 图像。
*   将所有内容放在每个数据集的一个 4D 矩阵中（即使用双精度表示或连接）

根据@Jacob 的建议，替换`rand()`为以下内容，即生成所需结构类型的随机样本的函数：`generate_image()`

```
M = 25; N = 25;
T = 10; V = 4;

DataSet1 = zeros(M,N,T,V);
DataSet2 = zeros(M,N,T,V);

for t = 1:T
   for v = 1:V
        DataSet1(:,:,t,v) = randn(M,N);
        DataSet2(:,:,t,v) = randn(M,N);
    end
end 
```

# ruby - How to implement INSTREAM protocal for clamd in Ruby?

> ID：12570680
> 
> 赞同：1
> 
> 时间：2012-09-24T18:25:00.913
> 
> 标签：ruby, sockets, daemon

I am struggling to implement the INSTREAM command of clamd daemon in Ruby. Here is the document of [clamd](http://www.clamav.net/doc/latest/html/node28.html)

```
@file = File.open("input.txt")
socket = TCPSocket.new(HOST, PORT)
#writing the command
socket.write("zINSTREAM\0")
#streaming the chunk
socket.write(1024) #size of chunk
socket.write(@file.read(1024)) #chunk of data
#end the streaming
socket.write(0)
puts "Reading from the scoket"
puts socket.recv(1024)
socket.close 
```

But I am always receiving the error response "INSTREAM size limit exceeded. ERROR" What I doing wrong here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:24:10.297

经过长期的斗争，我找到了解决方案。

块的大小必须以[网络字节顺序的 4 字节无符号整数表示](https://stackoverflow.com/questions/12571715/how-to-convert-32-bit-integer-to-network-byte-order/12571746#12571746)

所以

```
socket.write(1024) 
```

应该

```
socket.write([1024].pack("N")) 
```

# mysql - What affects the score MySQL gives returned results when using fulltext indexes?

> ID：12570688
> 
> 赞同：0
> 
> 时间：2012-09-24T18:25:37.477
> 
> 标签：mysql, full-text-search

Ok, I am using the below query to do a fulltext query search:

```
SELECT city,state_prefix FROM zip_code3 WHERE MATCH (zip_code,city,state_prefix,state_full) AGAINST ('birmingham al') LIMIT 1; 
```

Now, on my development server this works like a treat, rows with the city as "Birmingham" and the state as "AL" are given the highest scores, that being `9.7016019821167` and another similar record with the same city but from a different state of "IA" is given a score of `5.988482475280762`.

However, on the production server it is totally different, both results have an equal score of `6.05505323410034`.

This is causing chaos as I only need the first result and that result needs to be the correct city/state.

So I'm wondering why am I getting different results and why does the production servers scoring seem to be out of whack?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:37:54.093

如果没有看到您的配置文件，很难知道问题出在哪里，所以我会尽力猜测。

我认为问题出在[ft_min_word_len](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)上。默认值为 4，因此您的生产服务器可能设置为默认值并忽略该状态。

# jquery - Fractional width points

> ID：12570690
> 
> 赞同：0
> 
> 时间：2012-09-24T18:25:44.360
> 
> 标签：jquery, css

> **Possible Duplicate:**
> [Are the decimal places in a CSS width respected?](https://stackoverflow.com/questions/4308989/are-the-decimal-places-in-a-css-width-respected)

Normally in CSS when we set a size we use while values in points or pixels. However, sometimes it is not possible to know the exact widths, so I jQuery to calculate it with .width() function and then perform some math, like divide by the number of elements etc.

Sometimes the results has decimal points. Do browsers support such values or is it better to round-up to whole values, for example using something like Math.floor(), before using the values?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:27:40.850

浏览器确实支持小数点，例如你可以有 20.5% 或 .5% 等

但是 - 这往往仅限于百分比，因为你不能真正拥有半个像素。

看，因为这基本上是重复的。

[是否尊重 CSS 宽度中的小数位？](https://stackoverflow.com/questions/4308989/are-the-decimal-places-in-a-css-width-respected)

# javascript - jquery刷新div中的内容

> ID：12570697
> 
> 赞同：0
> 
> 时间：2012-09-24T18:26:11.637
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

我在 HTML 页面中有 2 个 div - 触发事件时需要刷新。一个 div，如果`display:none`并且不会用新数据刷新。

不能刷新`display:none`div吗？我的 JavaScript 在下面，

```
$('#messages_send').live('click', function() {
$.ajax({
    url: base_url + 'ajax/send_message',
    data: {
        username: $('#messages_username').val(),
        message: $('#messages_message').val(),
        saveid: $('#messages_savedid').val(),
    },
    success: function(data) {
        sending_message();

        var x = jQuery.parseJSON(data);

        if(x) {
            if(x.gp_id==80)
            {
                    $('#spn_ucredit').load(base_url + 'ajax/userdata/credits');
                    $('#overlay_credits').load(base_url + 'ajax/userdata/credits');
            }
        }
        //$('#spn_ucredit').html($('#ncd_id').val());
        //tmp_cost = $('#spn_ucredit').html()-$('#ncd_id').val();
        //$('#ncd_id').val($('#ncd_id').val()-tmp_cost);
        //alert(data);
        setTimeout(message_sent, 2000);
        setTimeout(remove_modal_box, 3000);
        setTimeout(message_revert, 3500);
        $("#saved_messages").load(base_url + 'messages #saved_messages > form');
        //setTimeout($("#messages_content").load(base_url + 'messages #messages_content > form'), 1000);
        //$.get(base_url + 'messages #saved_messages > form', null, function(result){ $("#saved_messages").html(result) });
        //$("#messages_content").css("visibility","hidden").show();
        //$.get(base_url + 'messages #messages_content > form', null, function(result){ $("#messages_content").html(result) });
        //$("#messages_content").css("visibility","visible").hide();
    }
});

return false; 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:36:34.013

使用 .hide() 可以编辑 div ，而设置 display:none 使它更难

> "匹配的元素会立即隐藏，没有动画。这大致相当于调用.css('display', 'none')，只是display属性的值保存在jQuery的数据缓存中，以便稍后显示恢复到初始值。如果一个元素的显示值为inline，然后被隐藏并显示，它将再次被显示为inline。

因此，如果您能够恢复到以前的 display 值很重要，您最好使用 hide()，因为这样可以记住以前的状态。除此之外没有任何区别。

来自 jQuery 的`.hide()` [资源](http://api.jquery.com/hide/)

另外，关于这个也有一些问题 -[这是一个例子](https://stackoverflow.com/questions/4396983/hide-or-display-none-jquery)

# hover - 鼠标移出时淡出，而不是悬停时

> ID：12570700
> 
> 赞同：0
> 
> 时间：2012-09-24T18:26:17.403
> 
> 标签：hover, fadeout, mouseout

我有一个菜单，我试图让子菜单在鼠标悬停时淡入，并在鼠标离开时淡出。我尝试了几种解决方案，其中大多数导致菜单在悬停时立即消失，而不是在 mouseleave/mouseout 时。下面的代码是我认为最有意义的代码。但结果是菜单淡入，但不淡出。

```
<script type="text/javascript">
$(document).ready(function(){

      //When hovering a top-level link, submenu fadein. 
      $('.toppunkt a').mouseenter(function(){
      $('ul.sub-menu').fadeIn();
      });

      //When leaving the submenu, fadeout.  
      $('.ul.sub-menu').mouseleave(function(){
      $('ul.sub-menu').fadeOut();
      });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:35:44.480

这可能会或可能不会帮助您，但您似乎在 mouseleave 上检查了错误的项目......

[http://jsfiddle.net/Mutmatt/3ppr8/14/](http://jsfiddle.net/Mutmatt/3ppr8/14/)

更好的是，您可能希望这个菜单系统的行为方式就像这个 jsfiddle：

[http://jsfiddle.net/Mutmatt/3ppr8/23/](http://jsfiddle.net/Mutmatt/3ppr8/23/)

看看那个。不要忘记标记正确答案以供将来参考

代码：JS：

```
jQuery(document).ready(function() {
    jQuery('#topmenu li').hover(
        //When hovering a top-level link, submenu fadein. 
        function() {
            jQuery('ul', this).stop().fadeIn();
        },
        //When leaving the submenu, fadeout.  
        function() {
            jQuery('ul', this).stop().fadeOut();
        }
    );
});​ 
```

HTML：

```
<ul id="topmenu">
    <li><a href="yep">yep</a>
        <ul class="sub-menu" style="display: none;">
            <li><a href="derp">derp</a></li>
            <li><a href="yerp">yerp</a></li>
        </ul>
    </li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:58:05.293

Could be the extra '.' in getting the sub-menu in the mouse leave function. I wrote up a solution using divs.

Here is the fiddle: [http://jsfiddle.net/PAWQr/12/](http://jsfiddle.net/PAWQr/12/)

Hopefully this helps.

HTML:

```
<div  class="toppunkt">
    <a href="" action="">Here is a list</a>
    <div class="sub-menu" style="width:70px; border: 1px dotted gray; display: none;">    
        <ul>
            <li>Option1</i>
            <li>Option2</i>
        </ul>
    </div>       
</div> 
```

Script:

```
$(document).ready(function(){

  //When hovering a top-level link, submenu fadein. 
  $('.toppunkt a').mouseenter(function(){
      //alert('mouse enter');
      $('.sub-menu').fadeIn();
  });

  //When leaving the submenu, fadeout.  
  $('.sub-menu').mouseleave(function(){
      $('.sub-menu').fadeOut();
  });
​}); 
```

# sed - Sed - 如果模式不匹配，则停止多部分命令？

> ID：12570701
> 
> 赞同：0
> 
> 时间：2012-09-24T18:26:18.280
> 
> 标签：sed

所有，我正在尝试运行一个`sed`命令来从某些文件中删除卡号。我试图在单行中做到这一点，我认为一切进展顺利 - 但我意识到如果我的第一个替代品与模式不匹配，它会继续进入下一个命令。如果没有匹配，有没有办法让它退出？

我们的系统上有 16-22 长度的卡号，所以我写这个时考虑到了可变长度。我的规范是保留任何 16+ 位数字的前 6 位和后 4 位，并且将中间的任何内容都去掉（星号）。

```
sed 'h;s/[0-9]\{6\}\([0-9]\{5\}\)\([0-9]*\)[0-9]\{4\}/\1\2/;s/./*/g;x;s/\([0-9]\{6\}\)[0-9]*\([0-9]\{4\}\)/\1\2/;G;s/\n//;s/\([0-9]\{6\}\)\([0-9]\{4\}\)\(.*\)/\1\3\2/' 
```

问题在于如果这部分命令：

```
s/[0-9]\{6\}\([0-9]\{5\}\)\([0-9]*\)[0-9]\{4\}/\1\2/ 
```

什么也没找到，模式空间仍然是输入。它继续到下一个命令，然后用星号替换所有内容。我最终得到的是输入后跟相同数量的星号（如果它与我的第一个替代品中的“卡号资格”不匹配）。如果它*被*认为是可能的卡号，它就可以完美地工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:03:01.743

> 但我意识到，如果我的第一个替代品与模式不匹配，它会继续执行下一个命令。如果没有匹配，有没有办法让它退出？

您可以使用分支命令。我在适当的位置添加并评论了它们：

```
sed '
    h;
    s/[0-9]\{6\}\([0-9]\{5\}\)\([0-9]*\)[0-9]\{4\}/\1\2/;

    ## If last substitution command succeeds, go to label "a".
    t a
    ## Begin next cycle (previous substitution command didn't succeed).
    b
    ## Label "a".
    :a

    s/./*/g;
    x;
    s/\([0-9]\{6\}\)[0-9]*\([0-9]\{4\}\)/\1\2/;
    G;
    s/\n//;
    s/\([0-9]\{6\}\)\([0-9]\{4\}\)\(.*\)/\1\3\2/
' 
```

* * *

**由于评论而**更新。****

 **所以你想改造

```
texttexttext111111222223333texttexttext 
```

在

```
texttexttext111111*****3333texttexttext 
```

尝试：

```
echo "texttexttext111111222223333texttexttext" | 
sed -e '
    ## Add newlines characters between the characters to substitute with "*".
    s/\([0-9]\{6\}\)\([0-9]\{5\}\)\([0-9]*\)\([0-9]\{4\}\)/\1\n\2\3\n\4/;
    ## Label "a".
    :a; 
    ## Substitute first not-asterisk character between newlines with "*".
    s/\(\n\**\)[^\n]\(.*\n\)/\1*\2/; 
    ## If character before second newline is not an asterisk, repeat
    ## the substitution from label "a".
    /^.*\*\n/! ta; 
    ## Remove artificial newlines.
    s/\n//g
    ## Implicit print.
' 
```

输出：

```
texttexttext111111*****3333texttexttext 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T20:00:13.047

来自`man sed`：

```
t label
      If  a  s///  has  done  a successful substitution since the last
      input line was read and since the last  t  or  T  command,  then
      branch to label; if label is omitted, branch to end of script.

T label
      If  no  s///  has  done a successful substitution since the last
      input line was read and since the last  t  or  T  command,  then
      branch  to  label; if label is omitted, branch to end of script.
      This is a GNU extension. 
```

所以我认为你可以`T;`在你的第一个`s`命令之后添加。**

# ios - 故事板如何处理表格单元格的两个转场？

> ID：12570702
> 
> 赞同：1
> 
> 时间：2012-09-24T18:26:17.913
> 
> 标签：ios, xcode, segue, master-detail

我想要一个主/详细信息类型的 UI，但可以选择根据表格单元格中的数据转到不同的详细信息页面。故事板可以做到这一点吗？如果是这样，是否有教程或解释的地方？作为替代方案，如果我在同一个表格中混合表格单元格类型，我可以这样定义不同的详细信息页面吗？

另外，只是观察一下，有没有人发现 Apple 教程很快变得非常复杂？即使是第一个 iOS 应用程序教程，我也很难通过。如此多的控制点击和命令拖动以及任何非直观目标。就像，谁会期望从图形元素拖动到源文件中的特定行？这没有任何意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:44:47.690

我认为您正在寻找的是 didSelectRowAtIndexPath。在你有你的 UITableView 的视图控制器的 .m 文件中，每当用户单击一行时，它都会触发 didSelectRowAtIndexPath 中的代码。通常，您有一个 if 块来检查单击了哪一行，并执行不同的操作（例如显示不同的详细信息视图）。

就详细教程而言，我发现 YouTube 是最容易学习的，尤其是对于简单或常见的任务。如果您在那里搜索“Master-Detail Xcode”，我相信您会找到大量结果（[http://www.youtube.com/watch?v=S_J_r8AKw0k](http://www.youtube.com/watch?v=S_J_r8AKw0k)我认为这是我认为有用的结果之一）。

# python - 如何在 BeautifulSoup Python 中将内容编码为 HTML

> ID：12570705
> 
> 赞同：0
> 
> 时间：2012-09-24T18:26:24.290
> 
> 标签：python, html, beautifulsoup, encode

我尽我所能对页面进行编码，然后使用 BeautifulSoup。但是，当我运行时，它会显示 unicode 结果。谁能帮我如何在 BeautifulSoup 下编码

我的代码：

```
import httplib
import urllib
import urllib2
from BeautifulSoup import BeautifulSoup
import HTMLParser

headers={
'Host': 'digitalvita.pitt.edu',
'Connection': 'keep-alive',
'Origin': 'https://digitalvita.pitt.edu',
'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1',
'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8',
'Accept': 'text/javascript, text/html, application/xml, text/xml, */*',
'Referer': 'https://digitalvita.pitt.edu/index.php',
'Accept-Encoding': 'gzip,deflate,sdch',
'Accept-Language': 'en-US,en;q=0.8',
'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
'Cookie': 'PHPSESSID=lvetilatpgs9okgrntk1nvn595'
}

data={
'action':'search',
'xdata':'<search id="1"><context type="all" /><results><ordering>familyName</ordering><pagesize>100000</pagesize><page>1</page></results><terms><name>d</name><school>All</school></terms></search>',
'request':'search'
}

data = urllib.urlencode(data)
print data
req = urllib2.Request('https://digitalvita.pitt.edu/dispatcher.php', data, headers)
response = urllib2.urlopen(req)
the_page = response.read()

htmlCodes = [
    ['&', '&amp;'],
    ['<', '&lt;'],
    ['>', '&gt;'],
    ['"', '&quot;'],
]
htmlCodesReversed = htmlCodes[:]
htmlCodesReversed.reverse()

def htmlEncode(s, codes=htmlCodes):
    """ Returns the HTML encoded version of the given string. This is useful to
        display a plain ASCII text string on a web page."""
    for code in codes:
        s = s.replace(code[1], code[0])
    return s
s=htmlEncode(the_page,codes=htmlCodes)

h = HTMLParser.HTMLParser()
s=h.unescape(s)

s.encode("utf-8")

soup=BeautifulSoup(s,convertEntities=BeautifulSoup.HTML_ENTITIES)
print soup 
```

简单的结果如下：

```
¬¨‚Ä†&amp;lt;a href="#local" onclick="dvSearch.ToggleInterests(141432);"&gt;&lt;span class="iToggle" id="toggle_141432"&gt;more...&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Znati, Taieb&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:znati@pitt.edu"&gt;znati@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Computer Science, University of Pittsburgh&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zoffer, H&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zoffer@pitt.edu"&gt;zoffer@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;"KGSB-Dean, Office of", University of Pittsburgh&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zorn, Kristin&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:kzorn@mail.magee.edu"&gt;kzorn@mail.magee.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zou, Chunbin&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:chz4@pitt.edu"&gt;chz4@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="researchInterest"&gt;&lt;b&gt;Research Interests: &lt;/b&gt;fatty liver disease; tyrosine kinase receptor; proteasome endopeptidase complex; phosphatidylcholines; trypanosome; Fas; ubiquitin; pulmonary surfactants; HGF/Met&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zou, Xiuying&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:xiz42@pitt.edu"&gt;xiz42@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zrust, Marilyn&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zrustm@pitt.edu"&gt;zrustm@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Clinical Instructor, Acute/Tertiary Care, University of Pittsburgh School of Nursing&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zubieta, Juan&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zubietajc@upmc.edu"&gt;zubietajc@upmc.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zuccoli, Giulio&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:giz3@pitt.edu"&gt;giz3@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zuckerman, Daniel&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:ddmmzz@pitt.edu"&gt;ddmmzz@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Computational Biology, University of Pittsburgh&lt;/div&gt;&lt;div class="researchInterest"&gt;&lt;b&gt;Research Interests: &lt;/b&gt;structural biology; stochastic processes; computer simulation; coarse-grained models; protein dynamics and fluctuations; models, theoretical&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zuckoff, Allan&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zuckoffa@pitt.edu"&gt;zuckoffa@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Psychology, University of Pittsburgh&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zuckoff, Allan&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:ZuckoffAM@UPMC.EDU"&gt;ZuckoffAM@UPMC.EDU&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Psychiatry, University of Pittsburgh&lt;/div&gt;&lt;div class="researchInterest"&gt;&lt;b&gt;Research Interests: &lt;/b&gt;psychotherapy; substance-related disorders; motivational interviewing; grief treatment ; diagnosis, dual (psychiatry); treatment adherence; patient compliance; traumatic grief and substance abuse&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zukor, Tevya&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:tez5@pitt.edu"&gt;tez5@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zuley, Margarita&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zuleyml@upmc.edu"&gt;zuleyml@upmc.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zunino, Paolo&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:paz13@pitt.edu"&gt;paz13@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Mech Eng and Materials Sci, University of Pittsburgh&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zureikat, Amer&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:zureikatah@upmc.edu"&gt;zureikatah@upmc.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zutter, Chad&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:czutter@pitt.edu"&gt;czutter@pitt.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;KGSB-Business Admin, University of Pittsburgh&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;div&gt;&lt;table width="100%" cellspacing="5" cellpadding="0"&gt;&lt;tr valign="top"&gt;&lt;td&gt;&lt;img width="70" height="70" src="http://digitalvita.pitt.edu/digital-vitaUI.profileimages/na.jpg" /&gt;&lt;/td&gt;&lt;td width="99%"&gt;&lt;div&gt;&lt;span class="name"&gt; Zyczynski, Halina&lt;/span&gt;&lt;span class="email"&gt; (&lt;a href="mailto:hzyczynski@mail.magee.edu"&gt;hzyczynski@mail.magee.edu&lt;/a&gt;) &lt;/span&gt;&lt;/div&gt;&lt;div class="professionalPosition"&gt;Obstetrics, Gynecology and Reproductive Sciences, University of Pittsburgh&lt;/div&gt;&lt;div class="researchInterest"&gt;&lt;b&gt;Research Interests: &lt;/b&gt;pelvic floor reconstruction; rectocele; uterine prolapse; sacralcolpopexy; bladder diseases; colpocleisis; pelic organ prolapse; urinary incontinence&lt;/div&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt; 
```

]]>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:16:58.723

看起来问题在于您正在混淆字符集。

我要做的第一件事就是改变你的`Accept-Charset`，所以你只接受 utf-8。

```
'Accept-Charset': 'utf-8;q=0.7,*;q=0.3', 
```

接下来，结果`response.read()`是一个 8 位字符串，您必须对其进行解码。由于我们现在知道它是 utf-8，因此您可以这样做：

```
the_page = response.read().decode('utf-8') 
```

通过这两个更改，当我运行您的脚本时，相同的片段返回为：

```
 … Self Care&lt;/span&gt;
                                            &lt;a href="#local" onclick="dvSearch.ToggleInterests(… 
```

不再有垃圾 Unicode 字符。

当然，这只是因为服务器愿意返回 utf-8 才有效。对于更一般的情况，您有一些只能执行 utf-8 的服务器和其他只能执行 Latin-1 的服务器，您需要做一些更复杂的事情。不理会标`Accept-Charset`头，然后更改读取以查看响应标头。像这样的东西：

```
response = urllib2.urlopen(req)
charset = response.info().getencoding()
the_page = response.read().decode(charset) 
```

有许多配置不当的服务器实际上不会返回字符集，即使它们没有返回纯 7 位 ASCII。在这种情况下，您需要检查服务器返回的内容并硬编码正确的答案，或者编写代码以尝试动态检测正确的字符集。希望你永远不会遇到这种情况……</p>

# javascript - 尝试向每个动态列表项添加复选框时使用 JSON

> ID：12570709
> 
> 赞同：0
> 
> 时间：2012-09-24T18:27:07.723
> 
> 标签：javascript, asp.net, json

我正在尝试用前面的复选框填充一行，因为它是动态构建的。我是 Json 的新手。

这是我动态格式化列的地方：

```
 while(reader.Read()) {
    if(i>=startRead&&i<maxCount) {
      var actionBtns=new StringBuilder("");
      jsonWriter.WriteStartObject();
      jsonWriter.WritePropertyName("id");
      jsonWriter.WriteValue("a"+i);
      jsonWriter.WritePropertyName("cell");
      jsonWriter.WriteStartObject();

 //trying to add checkboxes here but not sure what to  put as Value????

//need help with this part: i want to add a checkbox here ----------------
      jsonWriter.WritePropertyName("exhibitCheckBox");

      jsonWriter.WritePropertyName("actionBtns");
      jsonWriter.WriteValue(actionBtns.ToString());
      jsonWriter.WritePropertyName("ExhibitMovementID");
      jsonWriter.WriteValue(reader["ExhibitMovementID"].ToString());
      jsonWriter.WritePropertyName("Location");
      jsonWriter.WriteValue(reader["Location"].ToString());
      jsonWriter.WritePropertyName("TrackingNumber");
      jsonWriter.WriteValue(reader["TrackingNumber"].ToString());
      jsonWriter.WritePropertyName("MovedBy");
      jsonWriter.WriteValue(reader["MovedBy"].ToString());
      jsonWriter.WritePropertyName("ShipperName");
      jsonWriter.WriteValue(reader["ShipperName"].ToString());
      jsonWriter.WritePropertyName("ReceiverName");
      jsonWriter.WriteValue(reader["ReceiverName"].ToString());
      jsonWriter.WritePropertyName("Company");
      jsonWriter.WriteValue(reader["Company"].ToString());
      jsonWriter.WritePropertyName("Reason");
      jsonWriter.WriteValue(reader["Reason"].ToString());
      jsonWriter.WriteEndObject();
      jsonWriter.WriteEndObject();
      sb.Append(",");
    } 
```

我的 javascript 中的复选框称为“exhibitCheckBox”：

```
$('#viewExhibitMoveHistoryGrid').flexigrid({
            url: url,
            dataType: 'json',
            method: 'get',
            colModel: [
            //{ display: 'Actions', name: 'actionBtns', width: 50, sortable: true, align: 'center' },
                {display: '<input type="checkbox" class="exhibitCheckBox" id="checkAllExhibits" />', name: 'checkbox', width: 20, sortable: false, align: 'left', process: caseFileRowSelected },
                { display: 'Move ID', name: 'ExhibitMovementID', width: 100, sortable: true, hide: false, align: 'center' },
                { display: 'Reason', name: 'Reason', width: 120, sortable: true, align: 'center' },
                { display: 'Moved By', name: 'MovedBy', width: 120, sortable: true, align: 'center' },
                { display: 'Moved To', name: 'ExhibitLocation', width: 120, sortable: true, align: 'center' },
                { display: 'Date', name: 'ExhibitMoveDate', width: 100, sortable: true, align: 'center' },
                { display: 'Time', name: 'ExhibitMoveTime', width: 100, sortable: true, align: 'center' },                    
                { display: 'Receiver', name: 'ReceiverName', width: 120, sortable: true, align: 'center' },
                { display: 'Company', name: 'Company', width:120, sortable: true, align: 'center' },
                { display: 'Shipper', name: 'ShipperName', width: 120, sortable: true, align: 'center' },
                { display: 'Tracking #', name: 'TrackingNumber', width: 120, sortable: true, align: 'center' },
                { display: 'Cost', name: 'ShippingCost', width: 120, sortable: true, align: 'center' }
            ], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:50:41.477

弄清楚了：

```
jsonWriter.WritePropertyName("checkbox");
      jsonWriter.WriteValue("<input class=\"exhibitMoveCheckBox\" id=\"exhibitMoveCheckBox_"+reader["ExhibitID"].ToString()+"\" type=\"checkbox\">"); 
```

# .net - 有没有办法可以创建自己想要形状的窗户？

> ID：12570713
> 
> 赞同：0
> 
> 时间：2012-09-24T18:27:15.333
> 
> 标签：.net, wpf

我正在尝试学习 WPF，因为我想创建具有良好视觉效果的应用程序。我刚刚完成了它的概述，但我不确定它是否符合我的目的。有人可以指导我正确的方向吗，从现在开始我有大约 1 个半月的时间来尽可能多地学习形式和设计，然后我必须开始我的项目。它与图形无关，但我不希望它像其他人无聊的窗口形式一样错字。学习WPF会有好处吗？或者只是使用一些第三方工具/软件会是一个不错的选择？对不起，我忘了提到标题——我想要的最大的事情是在我的项目表单中不要有带有通常十字按钮的矩形窗口。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:33:52.607

这是一个关于如何在 WPF 中创建不规则形状窗口的精彩教程：http: [//buksbaum.us/2009/02/28/irregular-shape-windows-in-wpf/](http://buksbaum.us/2009/02/28/irregular-shaped-windows-in-wpf/)

基本上，您需要在`<Window>`类上设置这些属性：

```
AllowsTransparency="True"
WindowStyle="None"
Background="Transparent" 
```

`Border`然后用 a或 a之类的东西构建您的窗口`Path`，然后为关闭、最小化和单击/拖动窗口等事件构建您自己的处理程序

```
 private void Window_MouseDown(object sender, MouseButtonEventArgs e)
  {
      if (e.ChangedButton == MouseButton.Left)
          DragMove();
  }

  private void btnExit_Click(object sender, RoutedEventArgs e)
  {
      Close();
  }

  private void btnMinimize_Click(object sender, RoutedEventArgs e)
  {
      WindowState = WindowState.Minimized;
  } 
```

# inno-setup - Inno 设置快捷方式问题

> ID：12570719
> 
> 赞同：3
> 
> 时间：2012-09-24T18:27:27.230
> 
> 标签：inno-setup

我有一个小而令人沮丧的问题。我为可执行文件创建了具有快捷方式的安装程序，但是如果可执行文件不在主文件夹中，比如说 MyProgram\bin\myprogram.exe，则安装程序会在主程序文件夹中复制 .exe 并且快捷方式路径不是 MyProgram \bin\myprogram.exe 就像它应该的那样，但它的 MyProgram\myprogram.exe 当然它不会运行，直到我从 bin 文件夹中创建手动快捷方式。希望你们理解我的问题并告诉我可以在脚本中哪里解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:10:40.707

您的 [Icon] 条目可能有错误，请尝试以下操作：

```
Name:"{group}\MyProgram";Filename:"{app}\bin\myprogram.exe 
```

# java - 使用 GAE Java 的漂 亮 JSON 格式

> ID：12570721
> 
> 赞同：0
> 
> 时间：2012-09-24T18:27:31.567
> 
> 标签：java, json, google-app-engine

> **可能重复：**
> [Java 中的漂亮打印 JSON？](https://stackoverflow.com/questions/4105795/pretty-print-json-in-java)

我正在使用谷歌为谷歌应用引擎提供的 Java JSON 库。我的 JSON 输出有点像这样：

```
{"data":[{"name":"John"},{"age":10}],"status":"success"} 
```

不可读且难以调试。我怎样才能把输出变成这样的东西？

```
{
   "data":[
      {
         "name":"John"
      },
      {
         "age":10
      }
   ],
   "status":"success"
} 
```

或其他形式，而不是“单行输出”。

# sql - PostgreSQL 中 pg_catalog 表的外键

> ID：12570724
> 
> 赞同：3
> 
> 时间：2012-09-24T18:27:44.130
> 
> 标签：sql, postgresql

是否可以有一个指向系统目录（pg_catalog）表字段的外键？

当我尝试以下操作时：

```
ALTER TABLE my_table ADD CONSTRAINT fk_my_table FOREIGN KEY (role_name) REFERENCES pg_roles(rolname) ON UPDATE CASCADE; 
```

我得到：

```
ERROR:  referenced relation "pg_roles" is not a table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T07:34:40.390

这是不可能的。
如果您正在尝试使用系统表，您将收到类似的错误

```
 ********** Error **********
    ERROR: permission denied: "pg_attribute" is a system catalog
    SQL state: 42501 
```

即使您覆盖权限，系统也不会强制执行约束。所以我们不能用系统表引用创建约束。

如果您的角色很少，则进行手动检查或从 pg_roles 创建临时表，然后进行约束。

```
create temp table test1 as select * from pg_roles 
```

# graph - AI Snake BFS 问题

> ID：12570728
> 
> 赞同：2
> 
> 时间：2012-09-24T18:27:57.013
> 
> 标签：graph, artificial-intelligence, robotics, breadth-first-search

我正在努力解决蛇拳本身的问题。我相信如果我使用广度优先搜索（BFS）进行移动，它可以大大降低被装箱的风险。我的问题是我应该寻找多少可能的空白空间（连接）以确保这一举动不会导致自己拳击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:19:14.270

您必须查看的距离以查看您是否被装箱始终取决于蛇的大小/位置。100%确定的唯一方法是提前搜索所有动作，并避免导致蛇被装箱的动作。也就是说，[深度优先搜索](http://en.wikipedia.org/wiki/Depth-first_search)可能比广度优先搜索更好，因为它可以快速找到死胡同（如果存在）。然后避免这些动作。在您的第二个示例中，深度优先会很快发现“向上”移动是一条死胡同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T00:16:37.813

我认为搜索游戏树所需的移动深度与蛇环绕自身时可以包含的正方形区域有关。例如，一条长度为 12 的蛇：

```
----
|00|
|00|
91-- 
```

如果蛇向上（向北），它仍然可以生存，但前提是它向东移动。如果它再次向北移动，它就会死去。

一条蛇可以包含的最大面积是：(length/4 - 1)^2。当这是小数时，您可能想要四舍五入。

# javascript - 拖放上传器

> ID：12570731
> 
> 赞同：1
> 
> 时间：2012-09-24T18:28:33.657
> 
> 标签：javascript

我正在尝试制作拖放上传器。我已经制作了拖放部分，但现在我必须制作 PHP 并且我被卡住了，不知道该怎么做。我的问题是，我不能使用 move_uploaded_file(); 因为没有

```
<input type="file"> 
```

已提交。有没有办法解决这个问题，我应该使用/做什么？

我不是在要求一个完整的代码示例，而只是对我接下来要做的事情的一个线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:33:24.843

查看[此实现](https://github.com/valums/file-uploader/blob/master/server/php.php#L33)以获得一个想法：

```
/**
 * Save the file to the specified path
 * @return boolean TRUE on success
 */
function save($path) {    
    $input = fopen("php://input", "r");
    $temp = tmpfile();
    $realSize = stream_copy_to_stream($input, $temp);
    fclose($input);

    if ($realSize != $this->getSize()){            
        return false;
    }

    $target = fopen($path, "w");        
    fseek($temp, 0, SEEK_SET);
    stream_copy_to_stream($temp, $target);
    fclose($target);

    return true;
} 
```

我在我的一个项目中使用了这样的实现：

```
$savePath = '/home/user/uploaded_files/picture.png';

if(!isset($_FILES['qqfile']['tmp_name'])) {
    $input = fopen('php://input', 'r');
    $temp = tmpfile();
    stream_copy_to_stream($input, $temp);
    fclose($input);
    $target = fopen($savePath, 'w');
    fseek($temp, 0, SEEK_SET);
    stream_copy_to_stream($temp, $target);
    fclose($target);
} else {
    move_uploaded_file($_FILES['qqfile']['tmp_name'], $savePath);
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-24T18:33:46.730

使用 PHP，您很可能必须实际提交一个表单，即使它是通过框架中的 javscript 完成的，这样它实际上不会移动您所在的页面。

一旦你提交了一个你*就*可以使用的真实表单`move_uploaded_file()`，只是不要忘记标签`enctype="multipart/form-data"`中的属性！`form`

# java - Java 插件不附加到 Eclipse 中的调试会话

> ID：12570738
> 
> 赞同：1
> 
> 时间：2012-09-24T18:29:09.010
> 
> 标签：java, eclipse, debugging, plugins

这个功能以前可以工作，现在似乎坏了，我不知道如何诊断它。我正在开发一个在浏览器中运行的 java Applet。我曾经在java控制台中设置运行时参数为（Windows平台）：

-Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=n,suspend=n

此设置同时出现在 Java 控制台的“用户”和“系统”选项卡中。

然后我会在 eclipse 中为我的 applet 项目启动一个调试会话，并将其设置为侦听端口 8000。当我启动浏览器并加载 applet 时，它将附加到 eclipse，我能够调试和设置断点等。

现在，这似乎不再发生了。当我在 Eclipse 中启动调试会话时，我确实看到端口处于 LISTENING 模式并由 javaw.exe 拥有，这是正确的。唯一的问题是，当浏览器加载 Java 插件时，它不遵守“运行时参数”，也没有连接到 eclipse 中的侦听调试会话。

我安装了最新的 Java 更新。

我还应该研究什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:44:10.593

我刚刚解决了我的问题。我编辑了： C:\users\\AppData\LocalLow\Sun\Java\Deployment\deployment.properties 并添加了如下参数：

deployment.javaws.jre.0.args=-Djava.compiler\=NONE -Xnoagent -Xdebug -Xrunjdwp\:transport\=dt_socket,address\=8000,server\=n,suspend\=n

当我通过 UI 添加运行时参数时，它们转到“deployment.javaws.jre.1.args”，所以我将它们复制到“deployment.javaws.jre.0.args”

# wordpress - Wordpress - 通过没有插件的视图获得 5 个热门帖子

> ID：12570746
> 
> 赞同：2
> 
> 时间：2012-09-24T18:29:42.937
> 
> 标签：wordpress

你好，

我有来自帖子的图像的自定义字段，我想显示按视图排序的前 5 个帖子。我正在使用WordPress，你能帮帮我吗？

对不起，我的英语不好。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T20:47:55.580

[Xhynk 的参考文献](http://www.wpbeginner.com/wp-tutorials/how-to-track-popular-posts-by-views-in-wordpress-without-a-plugin/)有一个错误：

它运行的查询按字母顺序（1、2、20、23、3、4 等）返回帖子

你只需要改变

```
'orderby' => 'wpb_post_views_count' 
```

到

```
'orderby' => 'meta_value_num' 
```

对于前 5 名，请使用：

```
$popularpost  = new WP_Query(array(
    'posts_per_page' => 5,
    'meta_key' => 'wpb_post_views_count',
    'orderby' => 'meta_value_num',
    'order' => 'DESC'
)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-31T08:29:10.600

这很容易。只需将此代码用于您的functions.php

```
/*
 * Set post views count using post meta
 */
function setPostViews($postID) {
    $countKey = 'post_views_count';
    $count = get_post_meta($postID, $countKey, true);
    if($count==''){
        $count = 0;
        delete_post_meta($postID, $countKey);
        add_post_meta($postID, $countKey, '0');
    }else{
        $count++;
        update_post_meta($postID, $countKey, $count);
    }
} 
```

把single.php

```
setPostViews(get_the_ID()); 
```

这是您的热门帖子查询：

```
 <?php
      query_posts('meta_key=post_views_count&posts_per_page=5&orderby=meta_value_num&
      order=DESC');
      if (have_posts()) : while (have_posts()) : the_post();
   ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title();
     ?></a>
   </li>
   <?php
   endwhile; endif;
   wp_reset_query();
   ?> 
```

详情[请前往](http://www.codexworld.com/wordpress-how-to-display-most-popular-posts-by-views/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T18:57:15.617

[http://www.wpbeginner.com/wp-tutorials/how-to-track-popular-posts-by-views-in-wordpress-without-a-plugin/](http://www.wpbeginner.com/wp-tutorials/how-to-track-popular-posts-by-views-in-wordpress-without-a-plugin/)

基本上它为每个帖子添加一个元字段 - 并在查看旧记录时删除它，然后将其替换为“旧记录 + 1”

# sql - 如何：SQL Server 根据其他字段中的最大值选择不同的字段

> ID：12570747
> 
> 赞同：2
> 
> 时间：2012-09-24T18:29:48.520
> 
> 标签：sql, sql-server, distinct, max

```
id   tmpname      date_used        tkt_nr
---|---------|------------------|--------|
1  | template| 04/03/2009 16:10 | 00011  |
2  | templat1| 04/03/2009 16:11 | 00011  |
5  | templat2| 04/03/2009 16:12 | 00011  |
3  | diffname| 03/03/2009 15:11 | 00022  |
4  | diffname| 03/03/2009 16:12 | 00022  |
6  | another | 03/03/2009 16:13 | NULL   |
7  | somethin| 24/12/2008 11:12 | 00023  |
8  | name    | 01/01/2009 12:12 | 00026  | 
```

我想要结果：

```
id   tmpname      date_used        tkt_nr
---|---------|------------------|--------|
5  | templat2| 04/03/2009 16:12 | 00011  |
4  | diffname| 03/03/2009 16:12 | 00022  |
7  | somethin| 24/12/2008 11:12 | 00023  |
8  | name    | 01/01/2009 12:12 | 00026  | 
```

所以我正在寻找的是`tkt_nr`基于 datetime 的最大值具有不同的值，不包括 NULL。

我尝试了几种选择，但总是失败

```
SELECT *
FROM  templateFeedback a 
JOIN (
      SELECT ticket_number, MAX(date_used) date_used
      FROM   templateFeedback
      GROUP BY ticket_number
     ) b 
ON a.ticket_number = b.ticket_number AND a.date_used = b.date_used 
```

我将不胜感激任何帮助。不幸的是，我需要代码与 SQL Server 兼容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:42:53.650

自从我发现了窗口函数后，我就不再以这种方式做事了。很多时候，有两条记录具有相同的时间戳，我在结果集中得到两条记录。这是 tSQL 的代码。甲骨文类似。我认为 mySQL 还不支持这一点。

```
Select id, tmpname, date_used, tkt_nbr
From 
(
    Select id, tmpname, date_used, tkt_nbr,
        rownum = Row_Number() Over (Partition by tkt_nbr Order by date_used desc)
) x
Where row_num=1 
```

# zsh - zsh完成差

> ID：12570749
> 
> 赞同：16
> 
> 时间：2012-09-24T18:30:06.343
> 
> 标签：zsh, zshrc, zsh-completion

我见过很多人这样做 ，其他人这样做 我想知道区别。我应该使用哪一个？
`autoload -Uz compinit
compinit`

`autoload -U compinit
compinit -i`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T03:38:40.033

`autoload`, 从[`man zshbuiltins`](http://linux.die.net/man/1/zshbuiltins):

> 标志`-z`和`-k`标记要在本机或 ksh 仿真中自动加载的函数，就好像该选项`KSH_AUTOLOAD`分别未设置或已设置一样。

该`-U`标志可以追溯：`autoload`等价于`function -u`，即等价于`typeset -f`。`typeset`，简而言之，用于：

> 设置或显示壳参数的属性和值。

何时`-f`与 结合使用`-U`：

> [-f 标志导致] 名称指的是函数而不是参数。... -u 和 -U 标志使函数被标记为自动加载；-U 还会导致在加载函数时抑制别名扩展。

`compinit``compsys`是“较新”的 Z-Shell 补全系统使用的补全初始化函数。详情请参阅[`man zshcompsys`](http://linux.die.net/man/1/zshcompsys)。

该`-i`标志用于：

> 要使 compinit 静默忽略所有不安全的文件和目录，请使用选项 -i

一般来说，`autoload -Uz`根据[这篇有趣的阅读](http://bewatermyfriend.org/p/2012/003/)，您应该使用.

# javascript - JavaScript：window.setTimeout()，强制提前过期

> ID：12570750
> 
> 赞同：2
> 
> 时间：2012-09-24T18:30:13.910
> 
> 标签：javascript, jquery, settimeout

我的页面上有一个`<div>`更新的日志条目每两分钟自动刷新一次。当我第一次加载我的网页时，我调用了以下函数。

```
function getLogs() {
    var filter = $('#filter').val();
    $.get("index-ajax.asp", { queryType: "getLogs", filter: filter, 
        uTime: new Date().getTime() },

        function(data){
            $("#logEntries").html(data);
            window.setTimeout("getLogs()",120000);
    });
} 
```

我知道上面的代码可以更干净，`window.setInterval(...);`但我只是喜欢`window.setTimeout(...);`.

我的问题，是否可以取消下一次超时执行？如果我更改过滤器，我想取消下一次超时，并立即调用该函数，这将重新安排超时函数。有没有更好的方法来达到这个结果？

请注意，上面的代码是在 jQuery 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T18:31:53.560

是的，使用[clearTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。

前任：

```
var clr = window.setTimeout(getLogs,120000); 
```

当你想清除它时：

```
clearTimeout(clr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:33:09.850

[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)返回一个`timerID`你可以传递给的[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)：

```
// Note we are passing the *function* rather than a string
// Also note the lack of () - we are *not* calling the function
// setTimeout will do that for us
var timerID = setTimeout(getLogs, 120000);
// Fake condition - we cancel the timer if the timerID is even
if (timerID % 2 === 0) {
    clearTimeout(timerID);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:37:11.343

您始终可以根据过滤器值定义一个新变量，如果设置了该过滤器值，请使用 while 语句省略超时：

```
if(filter == "whatevs"){
    var i=true;
}
function(data){
    $("#logEntries").html(data);
    while(i!=true){
        window.setTimeout("getLogs()",120000);
    }
} 
```

# serial-port - 通过连接到远程机器的互联网访问串行端口

> ID：12570751
> 
> 赞同：0
> 
> 时间：2012-09-24T18:30:22.223
> 
> 标签：serial-port, cloud, javafx, sensors, m2m

我有一个连接到串行端口的传感器网关。我的 java 程序基本上是一个桌面应用程序，它收集传感器数据并存储在公共 mysql 数据库中。现在我想通过使用相同公共 mysql 数据库的 Web 应用程序通过 Internet 访问串行端口。我想了一下，但我认为这不是一个正确的方法。如果我要在数据库中保留一个表，如果任何命令是通过 Web 应用程序通过 Internet 生成的，则该表将命令存储一段时间，如果数据可用，我的桌面应用程序会持续监视该表获取数据并通过串行传递它港口。我正在寻找一种通过连接到远程机器或类似专家意见的互联网/云来访问串行端口的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:44:29.377

这当然是最简单的方法。比说将其存储在内存中或再次存储在数据库中的 Web 服务要简单得多，并且您可以获得如果仅依靠文件系统锁定文件就无法获得的安全性。您可能需要某种方法来清除数据库中的输出。

# magento - 如何在自定义数据库中选择 Magento 中的单行以显示在块中？

> ID：12570752
> 
> 赞同：0
> 
> 时间：2012-09-24T18:30:23.543
> 
> 标签：magento

我不想使用`foreach`循环遍历多行数组，因为我计划只显示*一行*并使用变量。我在网上找不到这方面的信息。

什么不起作用

```
 $param = $this->getRequest()->getParam('manufacturer');
    $extrabrand = Mage::getModel('brands/brands')->getCollection();
    $extrabrand->addFieldToFilter('attributelabelid', $param);
    //$extrabrand->setAttributelabelid($param);
    $extrabrand->load(); 
```

> 致命错误：在第 20 行的 /home/desbest/public_html/clients/magentofull/app/design/frontend/default/default/template/Desbest_Brands/brand_info.phtml 中调用未定义的方法 Desbest_Brands_Model_Mysql4_Brands_Collection::getDescription()

另外没有EAV。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T18:37:19.067

如果没有看到其中的代码，`brand_info.phtml`很难说出问题所在，但我猜你正在使用该集合，`$extrabrand`就好像它是一个模型一样。试试这个

```
//get the parameter from the request
$param = $this->getRequest()->getParam('manufacturer');

//instantiate the brand/brand model, and use 
//its `getCollection` method to return a collection
//object
$collection = Mage::getModel('brands/brands')->getCollection();

//add the paramater as a filter
$collection->addFieldToFilter('attributelabelid', $param);

//get the first item of the collection (load will be called automatically)
$extrabrand = $collection->getFirstItem();

//look at the data in the first item
var_dump($extrabrand->getData()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:43:31.733

如果您只需要从集合中获取 1 个元素（第一个），请使用`current()`函数：

```
$param = $this->getRequest()->getParam('manufacturer');
$extrabrandCollection = Mage::getModel('brands/brands')->getCollection()
    ->addFieldToFilter('attributelabelid', $param);

$extrabrand = current($extrabrandCollection->getItems()); 
```

# javascript - jQuery Mobile 单选按钮，onclick 事件有问题吗？

> ID：12570758
> 
> 赞同：2
> 
> 时间：2012-09-24T18:30:51.783
> 
> 标签：javascript, jquery, jquery-mobile

我在平板电脑上的单选框上获得了多次点击，在桌面上一切正常，但在平板电脑上，selectCompany 被调用了两次，平板电脑上的点击是否有问题？

这是代码：

```
<div class="formcontent" id="formContent">
    <div data-role="fieldcontain" id="companyContainer" class="ui-field-contain ui-body ui-br">
        <fieldset data-role="controlgroup" class="ui-corner-all ui-controlgroup ui-controlgroup-vertical">
            <div role="heading" class="ui-controlgroup-label">Empresa:</div>
            <div class="ui-controlgroup-controls">
                <div class="ui-radio">
                    <input type="radio" onclick="selectCompany(1)" name="company_select" id="company_select_0" value="0">
                    <label for="company_select_0" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="radio-off" data-theme="c" class="ui-btn ui-btn-icon-left ui-corner-top ui-btn-up-c ui-radio-off"><span class="ui-btn-inner ui-corner-top"><span class="ui-btn-text">Google</span><span class="ui-icon ui-icon-shadow ui-icon-radio-off">&nbsp;</span></span>
                    </label>
                </div>
                <div class="ui-radio">
                    <input type="radio" onclick="selectCompany(2)" name="company_select" id="company_select_1" value="1">
                    <label for="company_select_1" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="radio-off" data-theme="c" class="ui-btn ui-btn-icon-left ui-radio-off ui-btn-up-c"><span class="ui-btn-inner"><span class="ui-btn-text">Amazon</span><span class="ui-icon ui-icon-shadow ui-icon-radio-off">&nbsp;</span></span>
                    </label>
                </div>
                <div class="ui-radio">
                    <input type="radio" onclick="selectCompany(4)" name="company_select" id="company_select_2" value="2">
                    <label for="company_select_2" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="radio-off" data-theme="c" class="ui-btn ui-btn-icon-left ui-corner-bottom ui-controlgroup-last ui-radio-on ui-btn-up-c"><span class="ui-btn-inner ui-corner-bottom ui-controlgroup-last"><span class="ui-btn-text">Apple</span><span class="ui-icon ui-icon-shadow ui-icon-radio-on">&nbsp;</span></span>
                    </label>
                </div>
            </div>
        </fieldset>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:37:27.803

我会检查[这个](https://stackoverflow.com/questions/8503453/click-event-called-twice-on-touchend-in-ipad)问题。基本上，似乎点击事件正在触发几个触摸事件。也许检测浏览器（即如果在平板电脑上）并以不同的方式处理绑定将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T11:25:20.287

我所做的是取消绑定变量...

```
$("#foodiv").bind("click", function( event ) {
  functionCalledOnce();
  $(this).unbind( event );
}); 
```

它很干净，效果很好。

# virtualhost - 如何将 xip.io 与多个虚拟主机和服务器名称一起使用？（本地开发）

> ID：12570759
> 
> 赞同：4
> 
> 时间：2012-09-24T18:30:56.670
> 
> 标签：virtualhost, apache, web-testing

使用具有不同服务器名称的虚拟主机时，是否可以使用 xip.io 访问本地网站？（我在 linux 上，fedora）。

例如，假设我有 3 个可以在本地访问的网站，如下所示：

```
- http://localsite1
- http://localsite2
- http://localsite3 
```

我想通过 xip.io 用其他设备访问它们：

```
- http://localsite1.192.168.0.15.xip.io
- http://localsite2.192.168.0.15.xip.io
- http://localsite3.192.168.0.15.xip.io 
```

我不知道如何使这项工作，甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T14:25:06.790

是的，这应该是可能的。我认为您可以拥有任意数量的本地站点域。检查您的主机和 httpd-vhosts.conf 文件。

我为我工作的服务器别名`/etc/apache2/extra/httpd-vhosts.conf`。我在网络首选项中使用 a`*`而不是当前 IP。

请记住在进行更改后重新启动 Apache 服务器。

例如，我当前来自 Mac OS System Preferences > Network 的本地 IP 显示：Wi-Fi 已连接到 Workalicious2011，并且 IP 地址为 10.0.1.118。

所以我的`/etc/apache2/extra/httpd-vhosts.conf`文件有以下内容：

```
# Ensure that Apache listens on port 80
Listen 80
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

<VirtualHost *:80>
  DocumentRoot "/Users/davekaplan/Sites/workalicious.com"
  ServerName dev.workalicious.com
  ServerAlias dev.workalicious.com.*.xip.io
  ErrorLog "/private/var/log/apache2/dev.workalicious.com-error_log"
  CustomLog "/private/var/log/apache2/dev.workalicious.com-access_log" common
</VirtualHost> 
```

我的`/etc/hosts`文件有：

```
##
Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1         localhost
255.255.255.255   broadcasthost
::1               localhost
fe80::1%lo0       localhost

127.0.0.1         dev.workalicious.com 
```

在我的本地网络上，我可以浏览到以下内容并查看我的本地开发站点： [http ://dev.workalicious.com.10.0.1.118.xip.io/](http://dev.workalicious.com.10.0.1.118.xip.io/)

我有一个类似的问题，我正在使用一台 Mac 并想在计算机和其他设备上进行测试。当您无法访问主机文件（例如平板电脑）时，使用 .xip.io 非常有用。

如果您可以访问计算机上的 hosts 文件，您可以添加本地开发主机的 IP，然后浏览到相同的 url。它非常适合 PC 或其他 Mac。例如，我将添加`100.0.1.118 dev.workalicious.com`到测试计算机的主机文件中，只要我在本地网络上，我就可以浏览到该测试计算机上的 dev.workalicious.com 并查看托管在开发计算机上的站点。

我在 .xip.io 之前使用的另一种方法是[Charles](http://www.charlesproxy.com/)，它效果很好，并且有一些关于如何设置的不错的博客文章。目前 1-4 位用户的费用为 50 美元。

（我正在尝试弄清楚如何将[Pow 和 Apache](https://github.com/37signals/pow/wiki/Running-Pow-with-Apache)用于类似的方法，但我认为它在本地开发机器之外无法工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T14:24:31.470

对我来说，服务器别名工作。
前任：

```
<VirtualHost *:80>
    <Directory "/home/michelangelo/www/mysite">
    Options Indexes FollowSymLinks
    Order allow,deny
    Allow from all
    </Directory>
    ServerAdmin michelangelo@mystie.com
    DocumentRoot /home/michelangelo/www/mysite
    ServerName mysite.local
    ServerAlias mysite.local.192.168.0.6.xip.io
    ErrorLog /home/michelangelo/public_html/logs/mysite_error_log
    CustomLog /home/michelangelo/public_html/logs/mysite_access_log common
</VirtualHost> 
```

在 lubuntu 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T13:24:55.970

我今天正在处理我的项目并卡住了一段时间，但我发现了一个非常简单的设置，它就像一个魅力。

您像以前一样设置您的虚拟主机（今天完全不必使用别名 xip.io） 这里是有趣的部分，当您编辑主机主机文件时，在您的域名之前输入您分配的本地 IP 号码，例如192.168.10.110 myawesomewebsite.com - 您可以访问 myawesomewebsite.com.192.168.10.110.xip.io

# android - 如何处理会话？我们什么时候创建会话 id

> ID：12570763
> 
> 赞同：2
> 
> 时间：2012-09-24T18:31:02.840
> 
> 标签：android

大家好，我面临一个问题，我需要专家的建议。我的项目中有使用 webservice 的购物车模块。工作流程是

1.  创建会话 ID。（我有一个 xml 输入，它返回一个长字符串作为会话 ID）
2.  将产品添加到购物车（我使用上面的会话 ID 和产品唯一代码作为 xm 输入）
3.  获取购物车（这里 xml 中的输入参数是 sessionid。意味着我将在该会话中获取列表产品）
4.  从购物车中删除（这里的 xml 参数是会话 id 和产品唯一代码）

我所做的是在加载启动画面时，我编写了代码来生成会话 ID，并将其保存在列表的第一个位置以供以后使用。

```
 CartService cartService=new CartServiceImpl();
    SterviceResponse ob = cartService.createPartnerSession();
    Session session = new Session();
    session.setSessionId(ob.getStringValue()); 
```

Session.getSessionId() 将返回会话 ID 如果没有互联网问题，程序可以正常工作，但是如果我在程序之间关闭 wifi，程序会崩溃。现在我必须重新启动应用程序才能开始新会话。另外如果电话在特定时间段内空闲，我想使会话到期。

在程序中存储和处理会话 id 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:37:40.190

有几种方法可以做到这一点。1\. 如果您使用的是 JSP，那么在页面显示后您可以使用 session.invalidate()。你的jsp中有这样的东西-

```
<%  
    session.invalidate();  
%>  
<h2>Session Destroyed successfully.. </h2> 
```

1.  您可以在 web.xml 文件中设置会话超时

> ```
> <session-config>
> <session-timeout>1</session-timeout>
> </session-config> 
> ```

# xml - 使用 Dreamweaver 中的正则表达式将 xml 属性中的“0”替换为“nan”

> ID：12570767
> 
> 赞同：0
> 
> 时间：2012-09-24T18:31:07.323
> 
> 标签：xml, regex, dreamweaver, replace

我有一个包含错误的**xml 。**
基本上，如果*'nan'*出现在属性中，则将其替换为*'0'*。
例如，*nancy*变成*0cy*

```
<user firstname="0cy" lastname="Ferguson" id="01234"></user> 
```

我需要搜索文档并将所有*'0'*替换为*'nan'*，**但不是用户 id**。
我想最好的方法是通过 Dreamweaver 中的正则表达式，但我不知道具体如何。

我可以用 搜索所有名字`firstname="([\s\S]*?)"`，但这会返回所有名字，而不仅仅是那些包含*'0' 的*名字。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:43:47.160

这并不优雅，但它有效。

**搜索：** ([az])[0]
**替换：** $1nan

如果有人有更好的解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T09:37:02.903

尝试

```
(?<!\sid=\"\d*)0 
```

用。。。来代替

```
nan 
```

* * *

解释：

```
(?<! subexpression)    Zero-width negative lookbehind assertion. 
```

例如：

```
(?<!19)\d{2}\b 
```

匹配`51`，`03`在`1851 1999 1950 1905 2003`

# java - Maven：将生成的 tomcat-maven-plugin 资源放在哪里？

> ID：12570768
> 
> 赞同：14
> 
> 时间：2012-09-24T18:31:08.177
> 
> 标签：java, tomcat, maven, maven-plugin, maven-tomcat-plugin

我的项目目录中有 CSS 和 JavaScript 文件`src/main/webapp`。我想加入将这些资源的加入和缩小版本添加到我的 WAR 文件和`tomcat-maven-plugin`获取它的位置。

我使用 yuicompressor-maven-plugin 创建文件并将其放入`${project.build.directory}/${project.build.finalName}`. 它适用于 maven 包，并且这些资源进入 WAR 文件，但不知何故`tomcat-maven-plugin`根本看不到这些。我应该为它使用不同的目录吗？

我的pom：

```
 <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>tomcat-maven-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <path>/MyApp</path>
                <warDirectory>${project.build.directory}/${project.build.finalName}</warDirectory>
            </configuration>
        </plugin>
        <plugin>
            <version>2.5.1</version>
            <inherited>true</inherited>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <optimize>true</optimize>
                <debug>true</debug>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>${basedir}/src/main/resources/META-INF</directory>
                        <filtering>true</filtering>
                        <targetPath>META-INF</targetPath>
                        <includes>
                            <include>context.xml</include>
                        </includes>
                    </resource>
                </webResources>
                <archive>
                    <addMavenDescriptor>false</addMavenDescriptor>
                    <manifest>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                        <addClasspath>true</addClasspath>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>net.alchim31.maven</groupId>
            <artifactId>yuicompressor-maven-plugin</artifactId>
            <version>1.3.0</version>
            <executions>
                <execution>
                    <phase>process-resources</phase>
                    <configuration>
                        <excludes>
                            <exclude>**/*</exclude>
                        </excludes>
                        <aggregations>
                            <aggregation>
                                <output>${project.build.directory}/${project.build.finalName}/js/commons-pack.js</output>
                                <includes>
                                    <include>${project.build.sourceDirectory}/../webapp/js1.js</include>
                                    <include>${project.build.sourceDirectory}/../webapp/js2.js</include>
                     ... 
```

我应该怎么做才能 `mvn tomcat:run`提取我生成的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:25:31.133

使用`warSourceDirectory`：

```
<warSourceDirectory>${project.build.directory}/${project.build.finalName}</warSourceDirectory> 
```

而不是这个配置属性（`warDirectory`）`tomcat-maven-plugin`：

```
<warDirectory>${project.build.directory}/${project.build.finalName}</warDirectory> 
```

根据[tomcat-maven-plugin 文档](http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html)，`warSourceDirectory`是获取网络资源的地方，其默认值为`${basedir}/src/main/webapp`. 这意味着如果您不设置该属性，则需要在`${basedir}/src/main/webapp`.

如果设置`warSourceDirectory`为输出文件夹，这意味着您需要在启动 Tomcat 之前生成此文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:53:44.113

或者，您也可以使用`run-war`目标来代替`run`，例如`mvn tomcat6:run-war`。这将使用构建目录中的爆炸战争（因此过滤资源）。看到[这个网站](http://tomcat.apache.org/maven-plugin-2.1/tomcat6-maven-plugin/run-war-mojo.html)。还有`run-war-only`一个跳过包装阶段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-25T15:28:24.703

请注意，插件现在由 Apache 维护（所以升级一点 :-)）请参阅[http://tomcat.apache.org/maven-plugin-2.0/](http://tomcat.apache.org/maven-plugin-2.0/)。

即使它可以使用 install 我不确定它是否是最佳解决方案（关于 io 和构建时间）。

tomcat 运行必须能够使用来自多个目录的资源（我不确定当前的 tomcat 嵌入 api 是否可行）。

您可以在此处添加功能请求吗[https://issues.apache.org/jira/browse/MTOMCAT](https://issues.apache.org/jira/browse/MTOMCAT)

谢谢

# css - Chrome 不显示更新的页面

> ID：12570771
> 
> 赞同：4
> 
> 时间：2012-09-24T18:31:35.263
> 
> 标签：css, image, macos, google-chrome, caching

我正在开发 Rails 应用程序并正在更新页面。

该页面有一大堆在 css 中定义的背景图像。当我刷新页面（`cmd+r`在 Mac 上）时，没有任何改变。当我进入 Chrome 检查器并取消选中然后重新检查 css 规则时，图像出现了。此外，如果我打开一个新的私人浏览窗口 ( `cmd+shift+n`)，图像都正确显示。

我遇到了一些奇怪的缓存问题吗？

铬：版本 21.0.1180.89

Mac OS X：10.8.2

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T19:00:15.740

您需要执行绕过浏览器缓存的硬刷新。我不知道 mac 上的组合键，但它可能类似于 Windows：`ctrl`- `shift`- `R`。这与不绕过缓存的正常刷新（ Windows 上的`ctrl`- ）不同。`r`

Aparently 在 Mac 上，等效的组合键是`cmd`- `shift`- `r`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T18:40:18.783

尝试强制浏览器加载新的 css 文件。我通常会在链接中添加一个查询字符串 (?v=1.0)，如下所示：

```
<link rel="stylesheet" href="style.css?v=1.0" "type="text/css"/> 
```

然后我每次在css文件中进行一些更改时都会更改数字（？= 1.1）。

这通常会在 Chrome 中修复它。

希望有帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T18:36:47.820

我自己有时也会遇到这个问题，尤其是当我进行大量更改时，我发现清除浏览器缓存效果最好，除非您专门设置了某种缓存。

还要确保检查“禁用缓存”是检查器设置。

[![在此处输入图像描述](../Images/437adb1b47f3511238f55a2cd47e4e82.png)](https://i.stack.imgur.com/PWfhw.png)

屏幕截图于 2016 年 10 月 10 日拍摄。如果 Google 实施了更改，请更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T18:42:47.037

Command + Shift + 删除

从“时间的开始”清空缓存

# cordova - 在 Vault 中管理 Phonegap 跨平台项目的源代码

> ID：12570772
> 
> 赞同：1
> 
> 时间：2012-09-24T18:31:36.043
> 
> 标签：cordova, version-control, sourcegear-vault

我目前正在开发我的第一个带有 phonegap 的移动应用程序，并想知道 Vault 用户如何管理他们跨多个平台的项目的源代码。

我看过关于如何在 Git 中构建和创建子模块的文章，但没有看到关于 Vault 的任何内容。

我希望能够执行此处建议的操作：[跨平台 phonegap 项目的目录结构](https://stackoverflow.com/questions/7273097/directory-structure-for-cross-platform-phonegap-project)我只是不确定保险库中是否可行。

# notepad++ - 如何在记事本++中搜索@之前：

> ID：12570773
> 
> 赞同：1
> 
> 时间：2012-09-24T18:31:37.353
> 
> 标签：notepad++

我有一些这样的台词

```
aaaaa:bbbbb
cccc@yahoo.com:hjgg
dddd:ggfdgfg@hotmail.com 
```

我想搜索具有字符`@`之前`:`而不是`@`之后的行`:`

换句话说，搜索应该`cccc@yahoo.com:hjgg`只产生该行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:34:33.187

在正则表达式中，那将是`\@.*?\:`

如果要排除 @ 和 之间的空格：`\@\S*?\:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:39:55.427

搜索子句应该是`@.*:`

不要忘记启用正则表达式搜索。您还可以用于`^[^:@]*@[^:@]*:[^:@]*$`搜索具有精确一个双冒号和一个“at”符号的行。

# ios - 在 iOS 6 中无法访问设备上的联系人源

> ID：12570774
> 
> 赞同：14
> 
> 时间：2012-09-24T18:31:47.917
> 
> 标签：ios, addressbook

此代码在 iOS 5.1 上运行良好，并且在 iOS 6 的 iPhone 模拟器中也可以运行。它在运行 iOS 6 的 iPhone 4 上静默失败。最终结果是我无法将人员添加到联系人应用程序。以下代码片段都不起作用（每个都跟在日志后面）：

```
ABRecordRef defaultSource = ABAddressBookCopyDefaultSource(_addressBook);
NSLog(@"2 - defaultSource = %@", defaultSource); 
```

AB：无法编译查询语句（ABCCopyArrayOfAllInstancesOfClassInSourceMatchingProperties）：SELECT ROWID、名称、ExternalIdentifier、Type、ConstraintsPath、ExternalModificationTag、ExternalSyncTag、AccountID、Enabled、SyncData、MeIdentifier、Capabilities FROM ABStore WHERE Enabled = ?;

2012-09-24 11:00:36.731 QR vCard[193:907] 2 - defaultSource = (CPRecord: 0x1f59fd50 ABStore)

当我尝试将一个人添加到通讯簿时，我得到了这个（似乎是因为来源无效，即使从上面看起来它可能是好的）：

2012-09-24 11:18:32.231 QR vCard[220:907] ABAddressBookAddRecord 错误 = 操作无法完成。（ABAAddressBookErrorDomain 错误 1。）

* * *

我以为我可以获取所有来源，然后选择一个，但以下内容根本没有返回：

```
CFArrayRef allSources = ABAddressBookCopyArrayOfAllSources (_addressBook);
NSLog(@"2 - allSources = %@", allSources); 
```

AB：无法编译查询语句（ABCCopyArrayOfAllInstancesOfClassInSourceMatchingProperties）：SELECT ROWID、名称、ExternalIdentifier、Type、ConstraintsPath、ExternalModificationTag、ExternalSyncTag、AccountID、Enabled、SyncData、MeIdentifier、Capabilities FROM ABStore WHERE Enabled = ?;

2012-09-24 10:58:09.908 QR vCard[177:907] 2 - allSources = ()

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T01:52:11.680

我遇到了同样的问题，我无法弹出允许访问联系人警报。

Kyle 在这里发布了答案： [https ://stackoverflow.com/a/12648938/480415](https://stackoverflow.com/a/12648938/480415)

```
 // Request authorization to Address Book
  ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

  if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
          // First time access has been granted, add the contact
    });
  }
  else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
        // The user has previously given access, add the contact
  }
  else {
        // The user has previously denied access
        // Send an alert telling user to change privacy setting in settings app
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:58:25.787

此日志消息表明您的应用程序未被（可能尚未）允许访问联系人。iOS 6 允许用户拒绝应用程序访问地址簿的权限。

一旦用户允许您的应用程序访问联系人，该消息就会消失 - 通过弹出对话框或转到设置 -> 隐私 -> 联系人。

有关此主题的更多信息，请参阅 WWDC 2012 会议 710“iOS 和 OS X 中的隐私支持”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T17:54:17.903

如果您从 Google 来到这里，并且正在使用 iOS 的新`CNContactStore`框架，并且遇到这些错误，请继续阅读：

我认为让我的 CNContactStore 成为使用类实例初始化的成员变量会更干净：

```
class foo {
    var contactStore = CNContactStore()

    func findByIdentifier(identifier: String) -> CNContact {
        let contact = try self.contactStore.unifiedContactWithIdentifier(identifier...
        return contact
    }
} 
```

在我打了大约五十次之后，它开始出错

> AB：无法编译查询语句 (ABCCopyArrayOfAllInstancesOfClassInSourceMatchingProperties)

我尝试对我的通话进行限速，但这并没有帮助。事实证明，为**每次**调用实例化一个新的 CNContactStore 对性能的影响为零，并且完全解决了我的问题：

```
class foo {

    func findByIdentifier(identifier: String) -> CNContact {
        let contactStore = CNContactStore()
        let contact = try contactStore.unifiedContactWithIdentifier(identifier...
        return contact
    }
} 
```

希望这可以帮助！

# z3 - 如何使用 Z3 C++ api 读取 smtlib2 字符串？

> ID：12570784
> 
> 赞同：4
> 
> 时间：2012-09-24T18:32:28.427
> 
> 标签：z3

我想`expr`从给定的 SMTLIB2 文件创建一个对象。我可以`Z3_parse_smtlib_string`在 C 示例中看到一个函数。课堂上是否有包装器`expr`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T13:02:06.830

Z3 C++ API 没有明确提供此功能作为 expr 类的一部分。但是，C++ API 可以与 C API 一起使用，即函数`Z3_parse_smtlib_string`（或 ... `_file`）可以用来实现这一点。请注意，此函数返回 a `Z3_ast`，必须将其转换为`expr`对象才能返回 C++“世界”。

一个简单的例子：

```
#include <z3++.h>

...

context ctx;
Z3_ast a = Z3_parse_smtlib2_file(ctx, "test.smt2", 0, 0, 0, 0, 0, 0);    
expr e(ctx, a);
std::cout << "Result = " << e << std::endl; 
```

由于这些`Z3_parse_smtlib2_*`函数不执行错误检查，因此不会在错误时引发异常。这可以通过调用来实现`context::check_error()`。

# build - 在文件更改时自动运行构建

> ID：12570786
> 
> 赞同：0
> 
> 时间：2012-09-24T18:32:33.717
> 
> 标签：build

有没有办法在我的项目中更改文件后自动触发重建？我想做一些类似于 SASS 的事情，它监视 scss 文件的目录并立即编译新的 css 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T21:23:42.860

有多种良好的构建系统具有不同的依赖项和要求。

来自“老派”建设者的一些样本是：[Ant](http://en.wikipedia.org/wiki/Apache_Ant)、[Make](http://en.wikipedia.org/wiki/Make_%28software%29)

如果您构建 Web 应用程序，或者以防万一使用 nodejs，您可以尝试基于 javascript 的构建器，只需一小部分名称：[Bower](https://github.com/bower/bower)、[Grunt](https://github.com/gruntjs/grunt)、[GearJS](http://gearjs.org/)、[Shifter (YUI3)](https://github.com/yui/shifter)。

因此，只需衡量您的需求/能力，并根据该衡量标准选择更好的套件。

# oauth - 流星访问令牌

> ID：12570793
> 
> 赞同：5
> 
> 时间：2012-09-24T18:33:24.293
> 
> 标签：oauth, meteor

使用[Meteor](http://meteor.com)时，使用新的[身份验证](https://github.com/meteor/meteor/tree/auth)系统，使用包登录时如何获取 facebook**访问令牌**`accounts-facebook`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-29T22:15:24.577

从 Meteor.method 获取它：

```
// server
Meteor.methods({
  getAccessToken : function() {
    try {
      return Meteor.user().services.facebook.accessToken;
    } catch(e) {
      return null;
    }
  }
}); 

// client
Meteor.call("getAccessToken", function(error, accessToken){
   console.log(accessToken);
}) 
```

或发布它：

```
//server
Meteor.publish("currentUserAccessToken", function(){
    var self = this;
    if (this.userId()){
        handle = Meteor.users.find(this.userId()).observe({
            added: function(user){
                self.set("currentUserAccessToken", user._id, {value: user.services.facebook.accessToken});
                self.flush();
            },
            changed: function(user){
                self.set("currentUserAccessToken", user._id, {value: user.services.facebook.accessToken});
                self.flush();
            }
        });

        this.onStop(function() {
            handle.stop();
        });
    }
});

//client
var AccessToken = new Meteor.Collection("currentUserAccessToken");
Meteor.subscribe("currentUserAccessToken");

//access the value
var accessToken = AccessToken.findOne().value; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T16:19:48.880

更新和简化[劳埃德的答案](https://stackoverflow.com/a/12656991/599991)，我们得到：

# 服务器

```
Meteor.publish("currentAccessToken", function(){
  return Meteor.users.find(this.userId, {fields: {'services.facebook.accessToken': 1}});
}); 
```

# 客户

```
Meteor.autosubscribe(function(){
  var newUser = Meteor.user();
  Meteor.subscribe('currentAccessToken');
}); 
```

每次您的用户更改状态时它都会更新，并且可以通过以下方式访问访问令牌（如果存在）`Meteor.user().services.facebook.accessToken`

# iphone - UINavigationController popViewControllerAnimated：在 iOS 6 中崩溃

> ID：12570799
> 
> 赞同：4
> 
> 时间：2012-09-24T18:33:57.387
> 
> 标签：iphone, objective-c, xcode, uitableview, ios6

下面的代码在 iOS 4 和 5 中运行良好，但在带有`EXC_BAD_ACCESS`. 我将不胜感激任何帮助解决它。`UITableViewController`此代码在处理我的应用程序的搜索逻辑中被调用：

```
CATransition *transition = [CATransition animation];
transition.duration = 0.3f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionFade;

[self.navigationController.view.layer addAnimation:transition forKey:nil];
[self.navigationController popViewControllerAnimated:NO]; 
```

我添加的`tableView`方式类似，调用时不会崩溃：

```
SearchTVC *searchTable = [[SearchTVC alloc] init];
searchTable.detailViewController = self.detailViewController;

CATransition *transition = [CATransition animation];
transition.duration = 0.3f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
transition.type = kCATransitionFade;

[self.navigationController.view.layer addAnimation:transition forKey:nil];
[self.navigationController pushViewController:searchTable animated:NO]; 
```

可能是什么问题呢？

***编辑**

`[self.navigationController popViewControllerAnimated:YES];`有趣的是，如果我使用(`YES`而不是`NO`) ，则不会发生崩溃。但这当然违背了使用自定义弹出动画的目的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-06T21:44:59.627

检查您的视图控制器代码中是否有类似以下的行：

```
self.navigationController.delegate=self; 
```

如果是这样，那么您必须将其重新设置

```
self.navigationController.delegate=nil; 
```

在你说之前

```
[self.navigationController popViewControllerAnimated:YES]; 
```

否则，`popViewControllerAnimated`将首先解除分配委托，然后尝试调用它 - 导致崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-25T13:16:02.263

我知道我的问题含糊不清，但我没有太多要说的了。我知道线路`[self.navigationController popViewControllerAnimated:NO];`是问题，但我不知道为什么。然后我遇到了[这个问题](https://stackoverflow.com/questions/8995146/frustrating-uiwebview-delegate-crash-issue)，第一个答案建议我让我的搜索表成为一个实例变量，而不是每次我想展示它时都创建一个新的，这确实有效。这一定是我无法解决的记忆问题。

***tl;博士***：

**确保`UIViewController`被推送和弹出的是实例变量。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-11T20:06:31.710

虽然聚会迟到了……希望这对将来的人有所帮助。我打开了一个非常古老的代码......

`Enabling ARC mode`然后解决所有编译器警告/错误自动修复它。

# javascript - onbeforeunload 和 onunload 让一个接一个地工作

> ID：12570800
> 
> 赞同：1
> 
> 时间：2012-09-24T18:33:58.337
> 
> 标签：javascript, onbeforeunload, onunload

我在卸载前打开和卸载方法时遇到了一些问题。我以为我根据 onload 方法设置了正确的代码，只有在 onbeforeunload 的确认方法设置为 true 后才会启动。但遗憾的是，情况并非如此，即使 onbeforeunload 方法设置为 false 并且该人想留在网站上，卸载方法仍在启动。这是我正在处理的代码，自从我开始希望它没问题以来，它已经发生了很大变化。我确信它不是因为它没有按照我想要的方式工作。

```
 var validNavigation = false;

 function wireUpEvents() {

     var leave_message = 'Leaving the page ?';

        jQuery(function goodbye() {
jQuery(window).bind('onbeforeunload', function() {
    setTimeout(function() {
        setTimeout(function() {
            jQuery(document.body).css('background-color', 'red');
        }, 10000);
    },1);
    return leave_message;
});
}); 

     function leave() {
         if(!validNavigation) {
             killSession();
         }
     }

     //set event handlers for the onbeforeunload and onunloan events
     window.onbeforeunload = goodbye;
     window.onunload=leave;
 }
 // Wire up the events as soon as the DOM tree is ready
 jQuery(document).ready(function () {
     wireUpEvents();
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:37:34.357

`onbeforeunload`不像你想象的那样工作。您可以从处理程序返回一个字符串，它会提示一条消息，或者`undefined`什么都不做。

```
window.onbeforeunload = goodbye;

function goodbye(e) {
    if (!validNavigation) {
        return leave_message;
    } else {
        return undefined;
    }
} 
```

相关：[如何知道用户是否在 Javascript onbeforeunload 对话框上单击了取消？](https://stackoverflow.com/questions/4650692/way-to-know-if-user-clicked-cancel-on-a-javascript-onbeforeunload-dialog)

# php - 删除的 PHP 会话仍然存在于第二个 ajax 请求中

> ID：12570801
> 
> 赞同：2
> 
> 时间：2012-09-24T18:34:04.170
> 
> 标签：php, ajax, session

在页面加载时，我正在执行 ajax 请求并在发生某些情况时删除 PHP 会话。就这个：

```
function load_page(){
console.log("page load function")
$.ajax({
    url: "ajax/page_load.php",
    type: "POST",
    data: "rand="+Math.random()*10000,
    cache: false,
    success: function (result) {
       load_content(window.location.hash);
    }
}); 
```

}

这是`page_load.php`：

```
session_start();
require_once("../lib/connect.php");
require_once("../lib/users.php");
$user=new user();
if(isset($_SESSION['igames_user']))
{
    if(!$user->check_logged_in($_SESSION['user']))
    {
        $_SESSION = array();
        session_unset();
        session_destroy();
        print_r($_SESSION);
    }

} 
```

它返回`Array()`，这意味着会话是明确的。在`load_content()`函数中，我正在执行另一个 ajax 请求：

```
function load_content(hash){
hash=hash.replace("#","");
$("#wrapper").fadeOut(function(){
    var that=$(this);
    that.html('');
    that.addClass("loader");
    that.addClass("loading_center");
    that.fadeIn(function(){
        var data=hash
        $.ajax({
            url: "ajax/get_page.php",
            type: "GET",
            data: data,
            cache: false,
            success: function (html) {
                that.fadeOut(function(){
                    that.html(html);
                    that.removeClass("loader");
                    that.removeClass("loading_center");
                    that.fadeIn();
                });
            }
        });
    });
}); 
```

}

get_page.php 只这样做：

```
session_start();
print_r($_SESSION); 
```

这不会按预期返回空数组。问题是什么？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:05:30.667

我的猜测是，由于您正在进行“异步”调用，因此第二个 js 函数在会话重置之前执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T03:55:35.810

我通过不调用第一个 ajax 请求以及检查条件和删除`get_page.php`文件中的会话来解决问题。感谢您的回复。

# c# - 将鼠标事件绑定到 C# DataGridView 中的特定对象

> ID：12570804
> 
> 赞同：0
> 
> 时间：2012-09-24T18:34:10.660
> 
> 标签：c#, events, datagridview

我正在使用 DataGridView 处理 ac# 项目并遇到了问题。

基本上，我有一个从任意数量的地方更新的网格，并且有一个按钮列。

我想捕获按钮点击（当然）并做一些涉及该按钮行中其他单元格的事情。据我所知，将单击与网格行关联的唯一方法是通过 EventArgs 的 RowIndex。

我担心的是网格可能会在用户单击和传递的事件之间发生变化，导致不正确的行看起来像是被单击了。

这会发生还是我是偏执狂？如果可能的话，无论如何我可以绑定对按钮或事件参数中的行的引用，以便即使它的索引已经更改，我也可以区分原始行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:44:40.887

WinForms 中的 GUI 控件与 UI 线程“绑定”。

当您单击该行时，网格实现会处理此问题，并且作为单击处理的一部分会引发一个事件——所有这些都在同一个 UI 线程上。即使其他线程更改了网格内容，也必须将其序列化到 UI 线程（通常在后台发布 Windows 消息，或`BeginInvoke`使用 WinForms 术语 - 不完全相同，但很接近）。

这意味着即使有并发更改，如果您的点击已经注册，则事件不会因 UI 更新而中断。

但是请注意，后台线程可能会在您的处理程序运行时或在单击发生和事件处理之间更改该行绑定到的数据对象。尽管如此，它对您没有任何影响，因为网格 UI 更新需要序列化并且仍然会在您的事件处理程序之后发生。

# mysql - GROUP_CONCAT 不合并字段

> ID：12570805
> 
> 赞同：2
> 
> 时间：2012-09-24T18:34:13.577
> 
> 标签：mysql

我在使用 GROUP_CONTACT 时遇到语法问题。

使用如下所示的 sql 语句：

```
SELECT 

     s.school_code
    , s.school_name
    ,st.subject
    ,sg.subgroup
    ,GROUP_CONCAT(IF(r.year=2012,a.proficiency_index,NULL)) AS pi_2012
    ,GROUP_CONCAT(IF(r.year=2013,a.proficiency_index,NULL)) AS pi_2013

FROM 
    ayp_data a
        INNER JOIN 
            report_year r ON
                a.report_year_id = r.id
        INNER JOIN
            school s ON
                a.school_code_id = s.id
        INNER JOIN
            sub_group sg ON
                a.subgroup_id = sg.id
        INNER JOIN
            `subject` st ON
                a.subject_id = st.id

GROUP BY
      report_year_id,
      s.school_code
    , s.school_name
    ,st.subject
    ,sg.subgroup
HAVING 
s.school_name = 'Moody Elementary School' AND 
`subject` = 'Mathematics' AND 
`subgroup` = 'All Students' 
```

我得到这样的结果：

```
SCHOOL_CODE     SCHOOL_NAME     SUBJECT     SUBGROUP    PI_2012     PI_2013
0065    Moody Elementary School     Mathematics     All Students    9.640000343322754   (null)
0065    Moody Elementary School     Mathematics     All Students    (null)  10.920000076293945 
```

我想将两行合并为一行，并将非空字段值 PI_2012 和 PI_2013 放在同一行。

我*想*我可以用 GROUP_CONTACT 做到这一点；但它并没有像我想象的那样做。

如何使用 GROUP_CONCAT 合并这些字段？

或者，有没有更聪明的方法来做到这一点？

我[在 SQL Fiddle 上](http://sqlfiddle.com/#!2/387d7/17)有完整的架构和查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:37:31.843

如果您不希望单独的年份出现在单独的行中，则需要`report_year_id`从`GROUP BY`子句中删除。那就是——你需要改变这个：

```
GROUP BY
      report_year_id,
      s.school_code
    , s.school_name
    ,st.subject
    ,sg.subgroup 
```

对此：

```
GROUP BY
      s.school_code
    , s.school_name
    ,st.subject
    ,sg.subgroup 
```

# c# - 将字符串格式化为 3 位数字

> ID：12570807
> 
> 赞同：83
> 
> 时间：2012-09-24T18:34:20.537
> 
> 标签：c#, string, numbers, format

而不是这样做，我想利用`string.format()`来完成相同的结果：

```
if (myString.Length < 3)
{
    myString =  "00" + 3;
} 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-09-24T18:39:38.317

如果您只是格式化一个数字，您可以提供正确的[自定义数字格式](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)，使其直接成为 3 位字符串：

```
myString = 3.ToString("000"); 
```

或者，或者，使用[标准 D 格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)：

```
myString = 3.ToString("D3"); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-11-25T09:16:03.910

```
 string.Format("{0:000}", myString); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-24T18:38:17.913

它被称为[填充](http://msdn.microsoft.com/en-us/library/66f6d830%28v=vs.110%29.aspx)：

```
myString.PadLeft(3, '0') 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-08-15T00:50:16.390

这就是使用字符串插值 C# 7 完成的方法

```
$"{myString:000}" 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-03-21T08:03:43.420

*（不能以足够的声誉发表评论，让我添加一个旁注）*

以防万一您的输出需要固定长度为 3 位，即数字运行高达 1000 或更多（保留固定长度），不要忘记在其上添加 **mod 1000**。

```
yourNumber=1001;
yourString= yourNumber.ToString("D3");        // "1001" 
yourString= (yourNumber%1000).ToString("D3"); // "001" truncated to 3-digit as expected 
```

Fiddler 上的跟踪示例[https://dotnetfiddle.net/qLrePt](https://dotnetfiddle.net/qLrePt)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-12-11T13:54:26.327

这是一个简写字符串[格式](https://docs.microsoft.com/en-us/dotnet/standard/base-types/standard-numeric-format-strings) [Interpolation](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/strings/)：

```
$"{value:D3}" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-24T18:39:42.913

“如何：用前导零填充数字” [http://msdn.microsoft.com/en-us/library/dd260048.aspx](http://msdn.microsoft.com/en-us/library/dd260048.aspx)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-24T18:40:44.213

它必须是`String.Format`吗？

这看起来像是一份工作`String.Padleft`

```
myString=myString.PadLeft(3, '0'); 
```

或者，如果您直接从 int 转换：

```
myInt.toString("D3"); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-08-03T15:25:57.730

你也可以这样做： string.Format("{0:D3}, 3);

# r - ggplot 两组的散点图，带有 X 和 Y 误差条的叠加平均值

> ID：12570816
> 
> 赞同：2
> 
> 时间：2012-09-24T18:34:46.557
> 
> 标签：r, ggplot2

如何生成两个组的 ggplot2 散点图，其均值与 X 和 Y 误差线一起指示，像这样？

![散点图](../Images/6565d11c72b4cef4efd85f070d40f478.png)

这是一个简化的示例（`dput`用于重新创建 data.frame `df`），其中包含两组单元格和三个度量值，我想说 plot `Peak`against`Rise`或`Peak`against `Decay`。这很简单，但我想用 X 和 Y 误差线 (+/- sem) 添加表示组均值的点。

有没有办法在 ggplot2 中做到这一点，还是我需要先生成均值和 sem 值？[这篇](https://stackoverflow.com/questions/9231702/ggplot2-adding-two-errorbars-to-each-point-in-scatterplot)文章引起了我的注意，`geom_errorbarh`但我仍然不确定最好的方法。

```
library(ggplot2)

df<-structure(list(Group = c("A", "A", "A", "A", "A", "A", "A", 
"A", "B", "B", "B", "B", "B", "B", "B", "B"), Peak = c(102.975, 
37.805, 64.996, 66.36, 199.354, 7.425, 34.137, 366.59, 10.165, 
14.833, 702.525, 39.086, 8.286, 122.783, 105.762, 37.018), Rise = c(0.346855, 
0.24165, 0.24028, 0.461548, 0.194016, 0.164047, 0.484375, 0.307861, 
0.438538, 0.488083, 0.549423, 0.365448, 0.511551, 0.33596, 0.331467, 
0.270096), Decay = c(1.3874, 1.07407, 1.88787, 2.64408, 1.1462, 
0.615963, 4.04641, 1.48701, 3.61397, 4.1838, 1.92746, 3.64329, 
4.21354, 0.812695, 1.14611, 1.28279)), .Names = c("Group", 
"Peak", "Rise", "Decay"), class = "data.frame", row.names = c(NA, 
-16L))

ggplot(df, aes(Peak, Rise)) + 
  geom_point(aes(colour=Group)) +
  theme_bw(14) 
```

我试过类似的东西：

```
library(doBy)

sem <- function(x) sqrt(var(x)/length(x))
z<-summaryBy(Peak+Rise+Decay~Group, data=df, FUN=c(mean,sem))
z 
```

获取值，但轻松（灵活地）将它们合并到 ggplot 代码中打败了我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T19:23:41.190

我倾向于将**plyr**用于这些类型的摘要：

```
z <- ddply(df,.(Group),summarise,
            Peak = mean(Peak),
            Rise = mean(Rise),
            PeakSE = sqrt(var(Peak))/length(Peak),
            RiseSE = sqrt(var(Rise))/length(Rise))

ggplot(df,aes(x = Peak,y = Rise)) + 
    geom_point(aes(colour = Group)) + 
    geom_point(data = z,aes(colour = Group)) +
    geom_errorbarh(data = z,aes(xmin = Peak - PeakSE,xmax = Peak + PeakSE,y = Rise,colour = Group,height = 0.01)) + 
    geom_errorbar(data = z,aes(ymin = Rise - RiseSE,ymax = Rise + RiseSE,x = Peak,colour = Group)) 
```

![在此处输入图像描述](../Images/8aa79ba6a09e82b7856320eef7334392.png)

我承认我有点失望，因为我不得不手动调整横杆高度。但仔细想想，我想实施起来可能相当具有挑战性。

# c++ - 自定义异常并不总是执行 what()

> ID：12570819
> 
> 赞同：1
> 
> 时间：2012-09-24T18:35:05.870
> 
> 标签：c++, exception

我开始使用异常并更精确地处理一些事件或错误，我创建了自己的异常类型，它从`std::exception`. 到目前为止一切顺利，但我刚刚注意到有时该方法`what()`不会打印任何内容。异常被很好地抛出和捕获，但该方法正常打印的解释消息`what()`并不总是显示在屏幕上。它可能发生在与之前结束打印消息的执行相同的参数下，并且似乎是完全随机的。

这是我的例外：

```
class MyException : public std::exception
{
    public:
        MyException() throw() {}
        ~MyException() throw() {}
        virtual const char *what() const throw()
        {
            return "general exception\n";
        }
};

class FileError : public MyException
{
    public:
        FileError(std::string nFileName) : MyException(), fileName(nFileName) { }
        ~FileError() throw (){ }
        virtual const char *what()
        {
            std::ostringstream oss;
            oss << "Error with file : \"" << fileName << "\"." << std::endl;
            return (oss.str()).c_str();
        }
    protected:
        std::string fileName; 
}; 
```

以及引起我问题的上下文：

```
try
{
    QFile sourceFile(sourceFileName);
    if(!sourceFile.open(QIODevice::ReadOnly))
        throw FileError(sourceFileName.toStdString());
    sourceFile.close();
}
catch(FileError &e)
{
    std::cout << "error file catch " << std::endl;
    std::cout << e.what();
    terminate();
} 
```

“错误文件捕获”总是打印，但有时“文件错误......”。知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:44:14.260

您正在返回一个指向临时 std::string 内容的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:40:58.577

您`std::cout`在调用之前没有冲洗`terminate`（假设是`std::terminate`）。我建议`std::endl`在它的输出点使用（这是一个换行符和一个刷新），而不是在里面`FileError::what()`

```
catch(FileError &e)
{
    std::cout << "error file catch " << std::endl;
    std::cout << e.what() << std::endl;
    terminate();
} 
```

此外，正如@Yuri Kilocheck 所指出的，您正在返回一个指向临时字符串的指针，调用UB。通常的解决方案是在执行时构建一个字符串成员`what()`（如果构建字符串失败，则返回一些预定义的版本）。

# ios - UISwipeGestureRecognizer 没有可见界面声明选择器“touchesMoved:withEvent:”

> ID：12570821
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:10.767
> 
> 标签：ios, uigesturerecognizer, uiswipegesturerecognizer

我有一个错误。***“UISwipeGestureRecognizer 没有可见界面声明选择器'touchesMoved:withEvent:'”***

我查看了文档并在 UIGestureRecognizer 类中找到了 touchesMoved:withEvent。我该如何解决这个错误？

```
@interface MySwipeRecognizer : UISwipeGestureRecognizer

@implementation MySwipeRecognizer

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
 [super touchesMoved:touches withEvent:event];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:28:29.843

除非我误解了这个问题，否则 UISwipeGestureRecognizer 会为您完成所有的触摸处理。您的代码将如下所示：

```
UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(onSwipe:)];

// set a direction for the swipe
[swipe setDirection:UISwipeGestureRecognizerDirectionLeft];

// self is a view to add the recognizer to:
[self addGestureRecognizer:swipe];

.
.
.

- (void) onSwipe:(id)sender
{
 // a swipe has been recognized!
} 
```

UIGestureRecognizer 是一个 ABSTRACT 类，因此 UISwipeGestureRecognizer 等具体实现会为您完成所有触摸事件处理。如果您尝试创建自己的自定义手势识别器，您可以继承 UIGestureRecognizer。

# php - 通过 Img Src 忽略标题的 PHP REST 调用？

> ID：12570822
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:12.390
> 
> 标签：php, rest

我有一个休息电话，其工作是返回图像数据。

它是

服务/图像/测试

此 REST 调用返回具有预设路径的硬编码图像。

我正在使用 file_get_contents 来读取数据。

```
protected function processOutput($result, $success=false) {
        header('Content-Type: image/'.$result->imageType);
        echo $result->imageBytes; 
```

processOutput() 是在进行 REST 调用之后调用的，以确定要返回浏览器的内容。只有上面的代码与问题相关，请不要要求此处粘贴的项目。:P

当我在浏览器中进行休息调用时，我看到了我的 content-type: image/png 集。

**http://myProject/service/userImage/test**

```
Response Headersview source
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:Keep-Alive
Content-Length:4363
Content-Type:image/png 
```

正如预期的那样，有一个 JS 错误（因为这没有返回任何内容供浏览器直接呈现（我猜？）

这是我在做的时候看到的

```
<img src="http://myProject/service/userImage/test"/> 
```

在网络选项卡中返回：

```
Cache-Control:no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection:Keep-Alive
Content-Length:2856
Content-Type:text/html 
```

为什么它忽略我所有的标题设置？我什至可以输入一个 404 标头字符串，它仍然显示为 200 OK 请求... :(

这一切的关键是我在进行休息时看不到图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:07:46.643

解决方案：我的代码中有一个 PHP 解析错误（省略了 $），我不知道设置 header() 会对我隐藏这个/更改我设置的内容类型。我以为没有消息就是好消息。PHP新手！

# objective-c - UIPickerView 中的滚动组件（xcode

> ID：12570826
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:36.463
> 
> 标签：objective-c, xcode, uipickerview

是否有机会通过按下按钮或更改组件中的另一行来使 UIPickerView 自动滚动其组件？我的意思是我在 UIPickerView 中有两个组件，当我选择第一个组件时，我希望第二个组件自动滚动到另一个对象。甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:27:38.543

这是可能的，甚至很容易 - 您所要做的就是实现以下方法`UIPickerViewDelegate`：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if (row==3 && component==1) [pickerView selectRow:2 inComponent:0 animated:YES];
} 
```

# javascript - 在显示图像之前预加载图像的 JavaScript 方法不起作用

> ID：12570827
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:43.297
> 
> 标签：javascript, jquery, javascript-objects

在对象构造函数中有一个名为*addToViewport()*的方法，它的作用是在预加载图像后简单地显示图像：

```
window.onload = function(){

            function ViewportObject(){
                this.src = "https://chart.googleapis.com/chart?cht=qr&chs=500x500&chl=asdasdasd&choe=UTF-8&chld=L|0";
                this.addToViewport = function(){
                    // Determine the DOM object type to create
                        var DOM_elem = "img",
                            obj = $(document.createElement(DOM_elem)),
                            img = new Object();

                            obj.addClass("object");
                            obj.css({"z-index":"100","width":"300px","height":"auto"});

                            // Preload the image before rendering it and computing its size
                            img.src = this.src;
                            img.onload = function(){

                                obj.attr("src",this.src);
                                obj.appendTo("body");
                            }                       

                }
            }

            var o = new ViewportObject();   
            o.addToViewport();
        } 
```

我遇到的问题是脚本没有进入“onload”事件处理程序块，所以图像没有显示。[我在http://picselbocs.com/test/](http://picselbocs.com/test/)上整理了一个与上述脚本相同的网页，供您实时查看。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:38:48.453

尝试这个：

改变这个

```
img = new Object();
....
img.src = this.src;
img.onload = function(){

    obj.attr("src",this.src);
    obj.appendTo("body");
} 
```

至

```
img = new Image();
....
img.onload = function(){

    obj.attr("src",this.src);
    obj.appendTo("body");
} 
img.src = this.src; 
```

# html - 打开手风琴时div向下推页脚？

> ID：12570831
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:52.767
> 
> 标签：html

ie7 再次出现 - 我的手风琴在所有其他浏览器中都可以使用，但在 ie7 中它不会向下推页脚，而是将其重叠并向下移动到页面。知道我能做些什么来做到这一点，以便当我打开其中一个手风琴时，div 会展开并向下推页脚吗？

提前致谢！

哎呀对不起。这是链接

```
http://184.172.137.64/~laserlof/temp/services.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:43:39.440

IE就是这样一种痛苦。我建议将 div 显示在一个块中，并在其底部添加填充或边距。我在我的一个网站上有这个，它在 IE 中将页脚向下推：

```
div {
    display: block;
    padding-bottom: 20px;
} 
```

编辑：

好的，删除高度：在您的 css 中的手风琴 id 上 100%

你有这个在你的CSS某处

```
 #accordion {
      float:left;
      height:100%;
      margin-left:auto;
      margin-right:auto;
      position:relative;
      width:950px;
    } 
```

如果您删除

```
 height:100%; 
```

它将允许手风琴正确展开

# c# - wp7中的铃声选择器

> ID：12570832
> 
> 赞同：0
> 
> 时间：2012-09-24T18:35:58.023
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我正在开发需要创建一些警报和提醒的应用程序。我在市场上看到一个可以设置警报和提醒的应用程序。用户也可以分配铃声。当用户按下分配铃声按钮时。打开的铃声列表是该应用程序的本地铃声，这意味着不是本机 windows phone 7 铃声。用户可以选择任何铃声并播放铃声。它与原生 wp7 中的相同屏幕用于铃声选择，带有铃声列表和播放按钮来收听铃声。这是 wp7 中工具包的任何控件，例如 listpicker，我们可以在其中绑定铃声列表并从那里播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:14:22.740

默认 SDK 中没有任何内容。你必须自己建造一个。

# javascript - 上传前获取文件大小、图片宽度和高度

> ID：12570834
> 
> 赞同：104
> 
> 时间：2012-09-24T18:36:08.567
> 
> 标签：javascript, jquery, html, dimensions, image-size

在上传到我的网站之前，如何使用 jQuery 或 JavaScript 获取文件大小、图像高度和宽度？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-09-24T18:37:52.203

# 使用信息数据预览上传多张图片

使用**HTML5 和[文件 API](http://www.w3.org/TR/FileAPI/)**

### [使用URL API](https://developer.mozilla.org/en-US/docs/Web/API/URL#Static_methods)的示例

图像源将是[表示 Blob 对象的 URL](https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL)
`<img src="blob:null/026cceb9-edr4-4281-babb-b56cbf759a3d">`

```
const EL_browse  = document.getElementById('browse');
const EL_preview = document.getElementById('preview');

const readImage  = file => {
  if ( !(/^image\/(png|jpe?g|gif)$/).test(file.type) )
    return EL_preview.insertAdjacentHTML('beforeend', `Unsupported format ${file.type}: ${file.name}<br>`);

  const img = new Image();
  img.addEventListener('load', () => {
    EL_preview.appendChild(img);
    EL_preview.insertAdjacentHTML('beforeend', `<div>${file.name} ${img.width}×${img.height} ${file.type} ${Math.round(file.size/1024)}KB<div>`);
    window.URL.revokeObjectURL(img.src); // Free some memory
  });
  img.src = window.URL.createObjectURL(file);
}

EL_browse.addEventListener('change', ev => {
  EL_preview.innerHTML = ''; // Remove old images and data
  const files = ev.target.files;
  if (!files || !files[0]) return alert('File upload not supported');
  [...files].forEach( readImage );
});
```

```
#preview img { max-height: 100px; }
```

```
<input id="browse" type="file" multiple>
<div id="preview"></div>
```

### [使用FileReader API](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)的示例

如果您需要像 Base64 编码数据字符串一样长的图像源
`<img src="data:image/png;base64,iVBORw0KGg... ...lF/++TkSuQmCC=">`

```
const EL_browse  = document.getElementById('browse');
const EL_preview = document.getElementById('preview');

const readImage = file => {
  if ( !(/^image\/(png|jpe?g|gif)$/).test(file.type) )
    return EL_preview.insertAdjacentHTML('beforeend', `<div>Unsupported format ${file.type}: ${file.name}</div>`);

  const reader = new FileReader();
  reader.addEventListener('load', () => {
    const img  = new Image();
    img.addEventListener('load', () => {
      EL_preview.appendChild(img);
      EL_preview.insertAdjacentHTML('beforeend', `<div>${file.name} ${img.width}×${img.height} ${file.type} ${Math.round(file.size/1024)}KB</div>`);
    });
    img.src = reader.result;
  });
  reader.readAsDataURL(file);  
};

EL_browse.addEventListener('change', ev => {
  EL_preview.innerHTML = ''; // Clear Preview
  const files = ev.target.files;
  if (!files || !files[0]) return alert('File upload not supported');
  [...files].forEach( readImage );
});
```

```
#preview img { max-height: 100px; }
```

```
<input id="browse" type="file"  multiple>
<div id="preview"></div> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-09T14:59:15.087

# [演示](http://jsfiddle.net/9Lk11e8c/)

不确定它是否是您想要的，但只是简单的示例：

```
var input = document.getElementById('input');

input.addEventListener("change", function() {
    var file  = this.files[0];
    var img = new Image();

    img.onload = function() {
        var sizes = {
            width:this.width,
            height: this.height
        };
        URL.revokeObjectURL(this.src);

        console.log('onload: sizes', sizes);
        console.log('onload: this', this);
    }

    var objectURL = URL.createObjectURL(file);

    console.log('change: file', file);
    console.log('change: objectURL', objectURL);
    img.src = objectURL;
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-02-18T20:57:45.630

如果你可以使用 jQuery 验证插件，你可以这样做：

**html:**

```
<input type="file" name="photo" id="photoInput" /> 
```

**JavaScript：**

```
$.validator.addMethod('imagedim', function(value, element, param) {
  var _URL = window.URL;
        var  img;
        if ((element = this.files[0])) {
            img = new Image();
            img.onload = function () {
                console.log("Width:" + this.width + "   Height: " + this.height);//this will give you image width and height and you can easily validate here....

                return this.width >= param
            };
            img.src = _URL.createObjectURL(element);
        }
}); 
```

该函数作为 ab onload 函数传递。

代码取自[这里](http://www.codeproject.com/Answers/566451/javascriptplusforplusvalidatepluswidthplusandplush#answer2)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-04T03:02:29.983

这是一个纯 JavaScript 示例，它选择一个图像文件，显示它，遍历图像属性，然后将画布中的图像重新调整为 IMG 标记，并将调整大小的图像类型显式设置为 jpeg。

如果您在画布标签中右键单击顶部图像，然后选择将文件另存为，它将默认为 PNG 格式。如果您右键单击并将文件另存为下部图像，它将默认为 JPEG 格式。任何宽度超过 400 像素的文件都会缩小到 400 像素的宽度，并且高度与原始文件成比例。

## HTML

```
<form class='frmUpload'>
  <input name="picOneUpload" type="file" accept="image/*" onchange="picUpload(this.files[0])" >
</form>

<canvas id="cnvsForFormat" width="400" height="266" style="border:1px solid #c3c3c3"></canvas>
<div id='allImgProperties' style="display:inline"></div>

<div id='imgTwoForJPG'></div> 
```

## 脚本

```
<script>

window.picUpload = function(frmData) {
  console.log("picUpload ran: " + frmData);

var allObjtProperties = '';
for (objProprty in frmData) {
    console.log(objProprty + " : " + frmData[objProprty]);
    allObjtProperties = allObjtProperties + "<span>" + objProprty + ": " + frmData[objProprty] + ", </span>";
};

document.getElementById('allImgProperties').innerHTML = allObjtProperties;

var cnvs=document.getElementById("cnvsForFormat");
console.log("cnvs: " + cnvs);
var ctx=cnvs.getContext("2d");

var img = new Image;
img.src = URL.createObjectURL(frmData);

console.log('img: ' + img);

img.onload = function() {
  var picWidth = this.width;
  var picHeight = this.height;

  var wdthHghtRatio = picHeight/picWidth;
  console.log('wdthHghtRatio: ' + wdthHghtRatio);

  if (Number(picWidth) > 400) {
    var newHeight = Math.round(Number(400) * wdthHghtRatio);
  } else {
    return false;
  };

    document.getElementById('cnvsForFormat').height = newHeight;
    console.log('width: 400  h: ' + newHeight);
    //You must change the width and height settings in order to decrease the image size, but
    //it needs to be proportional to the original dimensions.
    console.log('This is BEFORE the DRAW IMAGE');
    ctx.drawImage(img,0,0, 400, newHeight);

    console.log('THIS IS AFTER THE DRAW IMAGE!');

    //Even if original image is jpeg, getting data out of the canvas will default to png if not specified
    var canvasToDtaUrl = cnvs.toDataURL("image/jpeg");
    //The type and size of the image in this new IMG tag will be JPEG, and possibly much smaller in size
    document.getElementById('imgTwoForJPG').innerHTML = "<img src='" + canvasToDtaUrl + "'>";
};
};

</script> 
```

这是一个jsFiddle：

[jsFiddle 选择、显示、获取属性和调整图像文件大小](http://jsfiddle.net/Blueprinter/hu79y/)

在 jsFiddle 中，右键单击作为画布的顶部图像不会为您提供与右键单击 IMG 标记中的底部图像相同的保存选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T18:47:00.550

据我所知，没有一种简单的方法可以做到这一点，因为 Javascript/JQuery 无法访问本地文件系统。html 5 中有一些新功能允许您检查某些元数据，例如文件大小，但我不确定您是否真的可以获得图像尺寸。

这是我发现的一篇关于 html 5 功能的文章，以及涉及使用 ActiveX 控件的 IE 解决方法。[http://jquerybyexample.blogspot.com/2012/03/how-to-check-file-size-before-uploading.html](http://jquerybyexample.blogspot.com/2012/03/how-to-check-file-size-before-uploading.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-18T06:24:15.643

因此，我开始尝试 FileReader API 必须提供的不同功能，并且可以创建带有 DATA URL 的 IMG 标签。

缺点：不能在手机上运行，​​但在谷歌浏览器上运行良好。

```
$('input').change(function() {

    var fr = new FileReader;

    fr.onload = function() {
        var img = new Image;

        img.onload = function() { 
//I loaded the image and have complete control over all attributes, like width and src, which is the purpose of filereader.
            $.ajax({url: img.src, async: false, success: function(result){
            		$("#result").html("READING IMAGE, PLEASE WAIT...")
            		$("#result").html("<img src='" + img.src + "' />");
                console.log("Finished reading Image");
        		}});
        };

        img.src = fr.result;
    };

    fr.readAsDataURL(this.files[0]);

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="file" accept="image/*" capture="camera">
<div id='result'>Please choose a file to view it. <br/>(Tested successfully on Chrome - 100% SUCCESS RATE)</div>
```

（请参阅 http://jsfiddle.net/eD2Ez/530/ 的 jsfiddle 上的此内容[）](http://jsfiddle.net/eD2Ez/530/)（请参阅我在[http://jsfiddle.net/eD2Ez/](http://jsfiddle.net/eD2Ez/)
上添加的原始 jsfiddle ）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-15T22:33:36.890

一个有效的 jQuery 验证示例：

```
 $(function () {
        $('input[type=file]').on('change', function() {
            var $el = $(this);
            var files = this.files;
            var image = new Image();
            image.onload = function() {
                $el
                    .attr('data-upload-width', this.naturalWidth)
                    .attr('data-upload-height', this.naturalHeight);
            }

            image.src = URL.createObjectURL(files[0]);
        });

        jQuery.validator.unobtrusive.adapters.add('imageminwidth', ['imageminwidth'], function (options) {
            var params = {
                imageminwidth: options.params.imageminwidth.split(',')
            };

            options.rules['imageminwidth'] = params;
            if (options.message) {
                options.messages['imageminwidth'] = options.message;
            }
        });

        jQuery.validator.addMethod("imageminwidth", function (value, element, param) {
            var $el = $(element);
            if(!element.files && element.files[0]) return true;
            return parseInt($el.attr('data-upload-width')) >=  parseInt(param["imageminwidth"][0]);
        });

    } (jQuery)); 
```

# c++ - main() 总是返回 int？

> ID：12570837
> 
> 赞同：2
> 
> 时间：2012-09-24T18:36:17.133
> 
> 标签：c++

> **可能重复：**
> [main() 在 C/C++ 中应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)
> [为什么我们在 C++ 中给出 int main 而不是 void main？](https://stackoverflow.com/questions/449851/why-do-we-give-int-main-in-c-and-not-void-main)

我已经开始学习 C++，我想到了以下问题：**main()**总是返回 int？我不能声明**void main()**而不是**int main()**吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:38:32.577

是的，`main()`必须返回`int`。返回值传回操作系统，表示程序是否运行成功：零表示成功。

但是，如果您愿意，您可以（且仅）将该`return`语句排除在外；在这种情况下，它将返回零。`main``main`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:39:28.240

它必须返回一个整数值。返回的值告诉计算机有什么错误代码（如果有的话）。返回 0 将告诉它程序中没有错误。

# rest - 列出顶级域的 API

> ID：12570838
> 
> 赞同：8
> 
> 时间：2012-09-24T18:36:17.693
> 
> 标签：rest

任何人都推荐任何好的 Web 服务来查询和列出所有可能的 TLD。

我目前正在查看[http://domainapi.com/](http://domainapi.com/)。我可以查询 TLD，但我找不到列出它们的方法。如果有人能想到任何其他更新 TLD 的好例子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-11-30T20:08:49.487

看起来 ICANN 确实提供了所有有效 TLD 的计算机可读列表：
[https](https://data.iana.org/TLD/tlds-alpha-by-domain.txt) ://data.iana.org/TLD/tlds-alpha-by-domain.txt （通过[此页面](https://www.icann.org/resources/pages/tlds-2012-02-25-en)找到）

我不确定它的更新频率，但我检查过的几次都没有超过 24 小时。

我不知道您可以多久查询一次而不打扰他们，所以我不会经常这样做。这不像列表经常更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T19:00:24.367

您可以直接从 IANA 获取此信息。数据在这里[http://www.iana.org/domains/root/db](http://www.iana.org/domains/root/db)并且 HTML 看起来很容易抓取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-27T23:10:31.113

您可以使用此 API 查询并获取 TLD 的完整列表： [https ://rapidapi.com/casper15155/api/tld1/](https://rapidapi.com/casper15155/api/tld1/)

# c# - 回发后Jquery自动完成扩展器不起作用

> ID：12570839
> 
> 赞同：4
> 
> 时间：2012-09-24T18:36:24.310
> 
> 标签：c#, asp.net, jquery

我在 ASP.Net 中使用 Web 服务使用 jQuery 自动完成。我使用自动完成来过滤员工代码。当页面加载时自动完成工作正常，但是当我单击搜索按钮后自动完成无法正常工作。

我认为问题在于 document.ready 功能，所以当页面加载时它工作正常，但我也必须在 buttonclick 事件之后使用自动完成。我怎样才能做到这一点 ？？？

这是我的 jQuery 自动完成

```
<link href="../AutoComplete/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="../AutoComplete/jquery.min.js" type="text/javascript"></script>
<script src="../AutoComplete/jquery-ui.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
    $("#<%=txtEmpcode.ClientID %>").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '<%=ResolveUrl("~/MyWebService.asmx/FetchEmpCode") %>',
                data: "{ 'Empcode': '" + request.term + "'}",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data.d, function (item) {
                        return {
                            label: item.split('-')[1],
                            //val: item
                        }
                    }))
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        },
        minLength: 1
    });
});
</script> 
```

标记

```
<td align="right">
<asp:Label ID="lblEmpCodeSrch" runat="server" Text="EmpCode" CssClass="label">   </asp:Label>
 </td>
 <td>
  <asp:TextBox ID="txtEmpCodeSrch" runat="server" Width="250px" ToolTip="Enter Employeecode"></asp:TextBox>
   &nbsp;&nbsp;<asp:Button ID="bttnSearch" runat="server" CssClass="submit" Height="23px" Text="Search" onclick="bttnSearch_Click" />
  </td> 
```

ButtonSearch 代码隐藏

```
protected void bttnSearch_Click(object sender, EventArgs e)
{
    clsEmp.EMPLOYEEID =txtEmpCodeSrch.Text.Trim()==""?                                                                                   0:Convert.ToInt32(hFieldEmpId.Value);
    DataTable dtEmp = clsEmp.GetDetails();
    if (dtEmp.Rows.Count > 0)
    {
        hFieldEmpId.Value = "";
       // txtEmpCodeSrch.Text = "";
        if (ViewState["Sort"] != null)
        {
            DataView dView = new DataView(dtEmp);
            dView.Sort = ViewState["Sort"].ToString();
            gdView.DataSource = dView;
            gdView.DataBind();
        }
        else
        {
            gdView.DataSource = dtEmp;
            gdView.DataBind();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T19:37:05.167

当你有一个UpdatePanel时，数据更新后，你还需要重新初始化javascript，因为旧的不再工作了，因为你的html页面的struct发生了变化，dom发生了变化。

UpdatePanel 在客户端提供了一些功能来执行此操作，您的代码将如下所示：

```
<script type="text/javascript"> 
   // if you use jQuery, you can load them when dom is read.
   $(document).ready(function () {
       var prm = Sys.WebForms.PageRequestManager.getInstance();    
       prm.add_initializeRequest(InitializeRequest);
       prm.add_endRequest(EndRequest);

       // Place here the first init of the autocomplete
       InitAutoCompl();
    });        

    function InitializeRequest(sender, args) {
    }

    function EndRequest(sender, args) {
       // after update occur on UpdatePanel re-init the Autocomplete
       InitAutoCompl();
    }

   function InitAutoCompl() {
      $("#<%=txtEmpcode.ClientID %>").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '<%=ResolveUrl("~/MyWebService.asmx/FetchEmpCode") %>',
                data: "{ 'Empcode': '" + request.term + "'}",
                dataType: "json",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    response($.map(data.d, function (item) {
                        return {
                            label: item.split('-')[1],
                            //val: item
                        }
                    }))
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        },
        minLength: 1
   });
  }    
  </script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-05T15:37:34.407

我告诉你，我可以通过在 UpdatePanel 标记中添加触发器来解决问题，从而在我的情况下实现所需的行为。我希望你能像我帮助我一样为你服务。

```
<ajax:UpdatePanel>
    <ContentTemplate>
        //My label fire autocomplete
        <asp:TextBox id="MyLabelForAutoComplete" runat="server"/>
        // Other Html Tags...

    <Triggers>
        <ajax:PostBackTrigger ControlID="MyLabelForAutoComplete">
    </Triggers>
</ajax:UpdatePanel> 
```

# android - 如何在android中添加壁纸？

> ID：12570840
> 
> 赞同：1
> 
> 时间：2012-09-24T18:36:26.260
> 
> 标签：android, add, wallpaper, desktop-wallpaper

如何在 Android 的桌面上添加壁纸以运行滚动。要添加我正在使用的壁纸：

```
for(int i = 0; i<list.length; i++)
    {
        ImageView iw = (ImageView)findViewById(list2[i]);
        iw.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View arg0)
            {
                for(int j = 0; j<list2.length; j++)
                {
                    if(arg0.getId() == list2[j])
                    {
                        WallpaperManager wallpaperManager = WallpaperManager.getInstance(Main.this);
                         try {
                            wallpaperManager.setResource(list[j]);
                        } catch (IOException e)
                        {
                            e.printStackTrace();
                        }
                         return;
                    }
                }
            }
        });
    } 
```

这工作，但如果你改变桌面壁纸是不动的。（我很抱歉我的英语不好。）

# javascript - for循环中实例化的多个回调的访问索引

> ID：12570841
> 
> 赞同：2
> 
> 时间：2012-09-24T18:36:29.770
> 
> 标签：javascript

我在 for 循环中多次调用一个 API 函数 - 它需要一个回调。我的回调需要做一些特定于索引的事情。我无法更改 willCallBack 函数（它是 API 的一部分），并且我想避免创建全局变量。

下面的代码片段说明了这个问题。第一个 for 循环是我的第一次尝试，但它为所有回调返回 i==4。第二个 for 循环有效 - 但它很丑陋并且感觉“hackish”

将“i”的值放入回调函数定义中的更简洁的方法是什么？

```
var result = '', result2 = '';

// doesn't work; i == 4 for all
for(var i=0; i<4; i++) {
    willCallBack(function(msg) {
        result += msg + i + '\n';
    });
}

// works, but kinda ugly
for(var i=0; i<4; i++) {
    willCallBack(function(i) {
        return function(msg) {
            result2 += msg + i + '\n';
        };
    }(i));
}

// part of API, cant change
function willCallBack(cb) {
    window.setTimeout(cb, 500, "can't change me");
}

// show the results
window.setTimeout(function(){
        alert(result + '\n\n' + result2)
    }, 1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:42:43.673

您的“有点丑陋”版本的替代方法是让命名函数返回回调，而不是匿名的自执行函数。也许你会发现它不那么难看？

```
for(var i=0; i<4; i++) {
    willCallBack(createCallback(i));
}

function createCallback(index) {
    return function(msg) {
        result2 += msg + index + '\n';
    };
} 
```

# c# - APDU 更改 Mifare Ultralight C 身份验证

> ID：12570849
> 
> 赞同：0
> 
> 时间：2012-09-24T18:36:53.780
> 
> 标签：c#, tags, nfc, mifare, apdu

我是 NFC 编程的新手，想知道如何更改 Mifare 超轻 C 标签上的身份验证访问。

我的意思是，我是否可以像使用 Mifare Classic 1k 一样使用密钥对标签进行写保护，然后进行身份验证以再次写入新数据？

那里没有太多文档解释如何执行此过程...我有一个 ACR122 读卡器来处理这个问题，并且我正在使用 C# 构建一个 Windows 应用程序。

任何帮助将不胜感激，和/或如果您有示例代码，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T17:04:02.340

我想发布我的发现，以防将来有人需要。虽然我仍然无法弄清楚如何暂时写保护 Mifare Ultralight C 标签。因此，如果有人知道该怎么做，请告诉我。任何示例代码都会有所帮助。

因此，找到了我需要更熟悉 Mifare Ultralight C 标签及其安全实现所需的文档，如果有人需要，这里是链接。

[http://www.nxp.com/documents/application_note/1303.pdf，http://www.nxp.com/documents/short_data_sheet/MF0ICU2_SDS.pdf，http://csrc.nist.gov/publications/nistpubs/](http://www.nxp.com/documents/application_note/1303.pdf) _ [_](http://www.nxp.com/documents/short_data_sheet/MF0ICU2_SDS.pdf) _ [_ 800-67-Rev1/SP-800-67-Rev1.pdf](http://csrc.nist.gov/publications/nistpubs/800-67-Rev1/SP-800-67-Rev1.pdf)， [http: //www.nxp.com/search?q=137631&type=keyword&rows=10](http://www.nxp.com/search?q=137631&type=keyword&rows=10)

# javascript - 强制 Safari 双击以放大特定的 div

> ID：12570851
> 
> 赞同：2
> 
> 时间：2012-09-24T18:37:09.100
> 
> 标签：javascript, ios, safari, zooming

有没有办法让（或欺骗）Mobile Safari 在双击时放大到特定的 div？

我有很多 div 是我布局的一部分，但经过多次尝试后，我仍然无法理解 Safari 双击算法的工作原理。它似乎更喜欢放大作为子元素而不是父元素的 HTML 元素。

我尝试创建一个具有高 z-index 且没有背景（因此它变得透明）的空 div，该 div 覆盖了当用户双击该区域时我希望 safari 放大的区域，但它不起作用。

# c# - 用户代码未处理 XslTransformException

> ID：12570854
> 
> 赞同：0
> 
> 时间：2012-09-24T18:37:13.743
> 
> 标签：c#, asp.net, visual-studio-2010, xslt, runtime-error

我收到了一个过去没有遇到过的错误（搜索后找不到解决方案）。

错误消息：用户代码未处理 XslTransformException：找不到与命名空间**'uri:PhysKare.Framework.Authentication.IUserAuthenticate'**关联的脚本或扩展对象。

错误详情：

```
 at System.Xml.Xsl.Runtime.XmlQueryContext.InvokeXsltLateBoundFunction(String name, String namespaceUri, IList`1[] args)
   at <xsl:template match="/">(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime)
   at Root(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime)
   at Execute(XmlQueryRuntime {urn:schemas-microsoft-com:xslt-debug}runtime)
   at System.Xml.Xsl.XmlILCommand.Execute(Object defaultDocument, XmlResolver dataSources, XsltArgumentList argumentList, XmlSequenceWriter results)
   at System.Xml.Xsl.XmlILCommand.Execute(Object defaultDocument, XmlResolver dataSources, XsltArgumentList argumentList, XmlWriter writer)
   at System.Xml.Xsl.XslCompiledTransform.Transform(IXPathNavigable input, XsltArgumentList arguments, XmlWriter results, XmlResolver documentResolver)
   at System.Xml.Xsl.XslCompiledTransform.Transform(IXPathNavigable input, XsltArgumentList arguments, XmlWriter results) 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:36:11.563

您的 XSLT 在命名空间中使用自定义函数`uri:PhysKare.Framework.Authentication.IUserAuthenticate`，并且您没有将实现这些函数的对象传递给 XSLT 处理器 - 即您应该执行以下操作：

```
 XsltArgumentList args = new XsltArgumentList();
  args.AddExtensionObject("uri:PhysKare.Framework.Authentication.IUserAuthenticate", new PhysKare());
  compiledXslt.Transfor(source, args, dest) 
```

其中`PhysKare`是实现 XSLT 中使用的自定义函数的类。

# wxpython - 如何将变量提供给事件处理程序？

> ID：12570856
> 
> 赞同：1
> 
> 时间：2012-09-24T18:37:14.057
> 
> 标签：wxpython

绑定某些东西时，如何将变量赋予函数？举个简单的例子：

```
def test(self):
    self.MyTextCtrl.Bind(wx.EVT_TEXT, self.something, AnyVariable)

def something(self, event, x)
    # do something
    print x 
```

如您所见，我想将值“AnyVariable”赋予函数“something”，以便将其用作“x”。我怎样才能做到这一点？这个例子不起作用。

编辑：@Paul McNett：是的，我想做的更像是：

```
def test(self):
    self.MyTextCtrl1.Bind(wx.EVT_TEXT, self.something, Variable1)
    self.MyTextCtrl2.Bind(wx.EVT_TEXT, self.something, Variable2)
    self.MyTextCtrl3.Bind(wx.EVT_TEXT, self.something, Variable3)

def something(self, event, x)
    # do something by including x 
```

x=Variable1，当编辑“MyTextCtrl1”时，x=Variable2，当编辑“MyTextCtrl2”时，x=Variable3，当编辑“MyTextCtrl3”时。

当然，我也可以编写 3 个不同的函数（“def something1”、“def something2”、“def something3”）并将它们绑定到“MyTextCtrl1”、“MyTextCtrl2”或“MyTextCtrl3”。但我认为当我改用这个变量时会容易得多；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:08:00.350

以下方法之一应该这样做：

*   引入一个全局变量（在模块级别的函数范围之外的变量声明）。

    ```
    x = None
    def test(self):
        self.MyTextCtrl.Bind(wx.EVT_TEXT, self.something)

    def something(self, event):
        global x
        x = ... # alter variable on event 
    ```

*   引入一个类的成员变量。

*   此外[`wx.EVTHandler`](http://wxpython.org/docs/api/wx.EvtHandler-class.html#Bind)，建议将任何东西作为可调用的事件处理程序。对于这种情况，我编写了一个简单的类来保存一个值（可扩展为多个值）并实现一个`__call__`方法。干扰特殊方法是一个高级主题，对于这种情况，我整理了示例代码：

    ```
    import wx

    class TestFrame(wx.Frame):
        def __init__(self, *args, **kwargs):
            wx.Frame.__init__(self, None, -1, *args, **kwargs)
            sizer = wx.BoxSizer(wx.VERTICAL)
            self.SetSizer(sizer)
            b = wx.Button(self, -1, "Test")
            sizer.Add(b)
            b.Bind(wx.EVT_BUTTON, TestHandler("foo"))
            self.Show()

    class TestHandler:
        def __init__(self, value):
            self.value = value

        def __call__(self, event):
            print event
            print "My value is:", self.value

    if __name__ == "__main__":
        app = wx.App()
        TestFrame("")
        app.MainLoop() 
    ```

# python - 如何在屏幕上显示 PIL 图像？

> ID：12570859
> 
> 赞同：98
> 
> 时间：2012-09-24T18:37:24.263
> 
> 标签：python, image, python-imaging-library

我正在使用 PIL 库进行一些图像编辑。关键是，我不想每次都将图像保存在我的硬盘上以在资源管理器中查看它。是否有一个小模块可以让我简单地设置一个窗口并显示图像？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-09-24T19:15:29.440

从[PIL 教程](https://web.archive.org/web/20200705080256id_/http://effbot.org/imagingbook/introduction.htm)的开头：

> 一旦有了**Image**类的实例，就可以使用该类定义的方法来处理和操作图像。例如，让我们显示我们刚刚加载的图像：
> 
>      `>>> im.show()`

**更新：**

如今，该`Image.show()`方法已[正式记录](https://pillow.readthedocs.io/en/latest/reference/Image.html#PIL.Image.Image.show)在[PIL 的 Pillow fork 中，](https://pypi.org/project/Pillow/)并解释了它是如何在不同的操作系统上实现的。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-03-14T17:37:48.103

我对此进行了测试，对我来说效果很好：

```
from PIL import Image
im = Image.open('image.jpg')
im.show() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-09T03:58:47.217

如果您发现 PIL 在某些平台上存在问题，使用本机图像查看器可能会有所帮助。

```
img.save("tmp.png") #Save the image to a PNG file called tmp.png. 
```

对于 MacOS：

```
import os
os.system("open tmp.png") #Will open in Preview. 
```

对于大多数带有 X.Org 和桌面环境的 GNU/Linux 系统：

```
import os
os.system("xdg-open tmp.png") 
```

[对于 Windows：](https://superuser.com/questions/246825/open-file-from-the-command-line-on-windows)

```
import os
os.system("powershell -c tmp.png") 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-24T18:43:48.760

也许您可以为此使用 matplotlib，也可以使用它绘制普通图像。如果您调用 show()，图像会在窗口中弹出。看看这个：

[http://matplotlib.org/users/image_tutorial.html](http://matplotlib.org/users/image_tutorial.html)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-14T16:20:09.587

您可以使用 Tkinter 在自己的窗口中显示图像，不依赖于系统中安装的图像查看器：

```
import Tkinter as tk
from PIL import Image, ImageTk  # Place this at the end (to avoid any conflicts/errors)

window = tk.Tk()
#window.geometry("500x500") # (optional)    
imagefile = {path_to_your_image_file}
img = ImageTk.PhotoImage(Image.open(imagefile))
lbl = tk.Label(window, image = img).pack()
window.mainloop() 
```

对于 Python 3，替换`import Tkinter as tk`为`import tkinter as tk`.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-05-01T12:50:40.870

您可以使用 pyplot 显示图像：

```
from PIL import Image
import matplotlib.pyplot as plt
im = Image.open('image.jpg')
plt.imshow(im) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-12T09:11:25.820

是的，[PIL.Image.Image.show()](https://github.com/python-pillow/Pillow/blob/9688507/src/PIL/Image.py#L2260-L2287)简单方便。

但是如果你想把图像放在一起，做一些比较，那么我建议你使用[matplotlib](https://github.com/matplotlib/matplotlib)。下面是一个例子，

```
import PIL
import PIL.IcoImagePlugin
import PIL.Image
import matplotlib.pyplot as plt

with PIL.Image.open("favicon.ico") as pil_img:
    pil_img: PIL.IcoImagePlugin.IcoImageFile  # You can omit. It helps IDE know what the object is, and then it will hint at the method very correctly.
    out_img = pil_img.resize((48, 48), PIL.Image.ANTIALIAS)

    plt.figure(figsize=(2, 1))  # 2 row and 1 column.
    plt.subplots_adjust(hspace=1)  # or you can try: plt.tight_layout()
    plt.rc(('xtick', 'ytick'), color=(1, 1, 1, 0))  # set xtick, ytick to transparent
    plt.subplot(2, 1, 1), plt.imshow(pil_img)
    plt.subplot(2, 1, 2), plt.imshow(out_img)
    plt.show() 
```

[![在此处输入图像描述](../Images/b10c94aef934bf834ee125def808d83e.png)](https://i.stack.imgur.com/iUzj7.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-16T11:49:04.437

这对我有用：

```
roses = list(data_dir.glob('roses/*'))
abc = PIL.Image.open(str(roses[0]))
PIL.Image._show(abc) 
```

# python - 使用 asyncmongo 从 MongoDB 返回不同的键

> ID：12570862
> 
> 赞同：1
> 
> 时间：2012-09-24T18:37:29.737
> 
> 标签：python, mongodb, tornado, pymongo

我正在将 asyncmongo 与 Tornado + gen.engine 一起使用，只是想知道等效于的语法是什么`db.collection.distinct("mykey")`？

我认为它类似于

```
result, error = yield gen.Task(settings.DB.my_data.find, {}, distinct=[("key","mykey")]) 
```

但这行不通。无论出于何种原因，我都无法在网上找到任何此类示例。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T16:47:24.213

问题是，“distinct”不是查询的选项，它是一个单独的命令：

[http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct](http://www.mongodb.org/display/DOCS/Aggregation#Aggregation-Distinct)

所以使用 AsyncMongo 的 command() 方法：

```
>>> from tornado.ioloop import IOLoop
>>> import asyncmongo
>>> db = asyncmongo.Client(pool_id='mydb', host='127.0.0.1', port=27017, maxcached=10, maxconnections=50, dbname='test')
>>> def callback(result, error):
...     print result
...     IOLoop.instance().stop()
...
>>> db.command('distinct', 'my_data', key='my_key', callback=callback)
>>> IOLoop.instance().start()
{u'stats': {u'cursor': u'BasicCursor', u'timems': 0, u'nscannedObjects': 5, u'nscanned': 5, u'n': 5}, u'values': [1.0, 2.0], u'ok': 1.0} 
```

您需要的数据在 result['values'] 中。

更多使用 AsyncMongo 命令的示例在其测试套件中：

[https://github.com/bitly/asyncmongo/blob/master/test/test_command.py](https://github.com/bitly/asyncmongo/blob/master/test/test_command.py)

以及有关 MongoDB 命令的一般信息（示例使用 PHP，但即使对于像我们这样的 Python 编码人员也很容易理解）：

[http://www.kchodorow.com/blog/2011/01/25/why-command-helpers-suck/](http://www.kchodorow.com/blog/2011/01/25/why-command-helpers-suck/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:20:53.303

原来我将切换到 Motor，它支持 distinct() 作为查询，加上[http://emptysquare.net/motor/pymongo/api/motor/generator_interface.html#generator-interface](http://emptysquare.net/motor/pymongo/api/motor/generator_interface.html#generator-interface)非常方便等待在触发回调之前完成多个查询。

# jsf - ResourceDependency 注释在 UIComponent 中不起作用并在 src 中生成“RES_NOT_FOUND”错误

> ID：12570872
> 
> 赞同：3
> 
> 时间：2012-09-24T18:38:21.907
> 
> 标签：jsf, jsf-2, annotations

我正在开发一个 UIComponent，它使用带有 @ResourceDependency 注释的 javascript 文件，但不是生成文件的链接，而是在 src 属性中打印“RES_NOT_FOUND”，如下所示：

`<script type="text/javascript" src="RES_NOT_FOUND"></script>`

按照java代码：

```
@ResourceDependency(name="file.js")
public class ComponenteTest extends UIComponentBase { 
```

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:43:13.873

此特定注释配置要求文件位于`/resources/file.js`公共 Web 内容中。

这与您在视图中使用以下内容完全相同：

```
<h:outputScript name="file.js" /> 
```

如果文件位于其他位置，或者`name`(或`library`) 实际上是错误的，那么它将准确生成此`RES_NOT_FOUND`URL。

# cuda - 如何理解“一个块永远不会被多个 MP 分割。”？

> ID：12570873
> 
> 赞同：-3
> 
> 时间：2012-09-24T18:38:21.687
> 
> 标签：cuda

对于 CUDA，我理解“一个块永远不会被多个 MP 分割”。（http://llpanorama.wordpress.com/2008/06/11/threads-and-blocks-and-grids-oh-my/）。

为了测试这一点，我为内核分配了一个非常大的块大小：

```
__global__ void dummy()
{
}

int main()
{
        int N=21504*40000; //21504 is the total threads I found for my Tesla M2070
        dim3 grids(1,2);
        dim3 thres(N,N);
        dummy<<<grids,thres>>>();
        return 0;
} 
```

但是，没有编译或运行时错误，并且不确定发生了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:27:52.843

如果在 dummy<<<>>> 调用之后添加 cudaGetLastError()，您将收到 CUDA Launch Failure 错误（您可以使用 cudaGetErrorString(err_code) 将错误代码转换为字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:00:18.210

这些错误不是编译错误，运行后您将面临运行时错误。要理解这句话，您应该了解架构。它旨在通过一个 MP (SM) 的共享内存来加快放置在同一线程块中的线程的通信。所以，他们都驻留在同一个SM中，并没有被派遣。

# java - Java、Mac OS、Windows 和 Linux

> ID：12570880
> 
> 赞同：0
> 
> 时间：2012-09-24T18:38:40.590
> 
> 标签：java, windows, linux, macos

我已经从 Linux (Ubuntu) 迁移到 Mac OS。我用 Java (swing) 编写了一个应用程序。我已经在 windows 和 linux 中成功运行了相同的代码，但在 mac os 中我遇到了一些问题。

以下是注释中的代码和问题：

```
public MainForm() {
    setResizable(false);
    setAutoRequestFocus(false); // This method is undefined for type MainForm
    initComponents();
} 
```

其他：

```
Object[] industries = jList1.getSelectedValuesList().toArray(); //  This method is undefined... 
```

最后一个：

```
setType(Type.UTILITY); // Type can't be resolved as variable 
```

我当然不能编译它。

Java 版本： Ubuntu：

java 版本 "1.7.0_07" Java(TM) SE Runtime Environment (build 1.7.0_07-b10) Java HotSpot(TM) Server VM (build 23.3-b01, 混合模式)

苹果系统：

java 版本“1.6.0_35”Java(TM) SE 运行时环境（构建 1.6.0_35-b10-428-11M3811）Java HotSpot(TM) 64 位服务器 VM（构建 20.10-b01-428，混合模式）

我无法更新 java（因为它似乎是 mac 的最新版本）。我现在想在mac上开发这个应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:50:53.477

在对给您带来问题的方法进行了一些挖掘之后，很明显您并没有在每个平台上运行相同的 JDK。具体来说，您的 Windows 和 Linux 机器正在运行 JDK 1.7，而您的 Mac OS X 机器正在运行 JDK 1.6 或更早版本。有关在 Mac 上使用 JDK 1.7 的信息，请参阅[此问题](https://stackoverflow.com/questions/6267392/how-do-i-use-jdk-7-on-mac-osx)。

事实上，您不需要在每个平台上编译您的应用程序。Java 是一种“编译一次，到处运行”的语言。编译器生成的字节码适用于每个平台，无论是哪个平台编译的，只要您自己没有在代码中引入任何系统依赖项。

换句话说，只要您的代码与平台无关，Java 本身就是与平台无关的。您的问题只是 JDK 版本错误，因此将 Mac 的 JDK 版本升级到 1.7 即可解决此问题。

请注意，您不能在 Java 6 或更低版本中运行使用 1.7 源目标编译的二进制文件。您可以在编译时将源目标更改为 1.6，但这会阻止您使用 Java 7 API（例如`getSelectedValuesList`方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:43:42.003

`executable jar`在**Linux**上创建，在**Mac**上执行。它应该运作良好。
如果您想在另一个操作系统上开发您的应用程序，请检查 JDK 是否具有相同的版本。
完整版应该是平等的。1.6_31**也**应该等于

# google-chrome - 引导“英雄”模板在 Chrome 中无响应？

> ID：12570884
> 
> 赞同：0
> 
> 时间：2012-09-24T18:38:51.277
> 
> 标签：google-chrome, twitter-bootstrap

[我从这个](http://twitter.github.com/bootstrap/examples/hero.html)页面复制了 html并尝试在本地运行它，以便我可以修改它，但没有 twitter 引导下拉菜单或其他任何工作。该页面已设置样式，但是当我尝试单击“查看源代码”中的 css 或 js 文件时，文件 css/js 代码都不会打开。

我想也许引导文件没有正确链接，但页面显示引导样式。然而下拉菜单不想工作..

这是我的项目目录

引导 /css /js /assets mypage.html

我相应地更改了所有指向 css/js 的链接，这是我的最终 html。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bootstrap, from Twitter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Project name</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Action</a></li>
                  <li><a href="#">Another action</a></li>
                  <li><a href="#">Something else here</a></li>
                  <li class="divider"></li>
                  <li class="nav-header">Nav header</li>
                  <li><a href="#">Separated link</a></li>
                  <li><a href="#">One more separated link</a></li>
                </ul>
              </li>
            </ul>
            <form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
      </div>

      <!-- Example row of columns -->
      <div class="row">
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div>
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
       </div>
        <div class="span4">
          <h2>Heading</h2>
          <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
        </div>
      </div>

      <hr>

      <footer>
        <p>&copy; Company 2012</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T00:32:32.067

我发现我的 jquery 库链接不正确，

它是

但是我发现找到并使用了正确的链接，现在一切都好！

# objective-c - IOS动态设置分组TableView的header高度

> ID：12570886
> 
> 赞同：0
> 
> 时间：2012-09-24T18:38:59.363
> 
> 标签：objective-c, ios, uitableview, header

我正在从服务器解析一些字符串并将这些字符串放在分组表的标题中，我在一个视图上有多个分组表。

我的 gropued tableview 的常规结构是

```
Header:
String1
string2
String3 

TableviewCells
.
.
. 
```

有时，其中一两个字符串返回 null。所以这意味着行是空的，但因为我声明我的高度像

```
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {
    return 90;
} 
```

我无法动态安排标题的高度

**如果其中一个字符串为空，如何减少标题的总高度？** 所以而不是这个

```
String1
String2

Tableview 
```

这应该发生：

```
String1
String2

TableViewCells 
```

我到底要问的是

```
if [string3 length]==0 
    set heightForHeaderInSection: 60
else
    set heightForHeaderInSection: 90 
```

我的代码是：

```
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {
    return 90;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection: (NSInteger)section {
      NSString * presenter = [[self agenda] getBriefingPresenter:section];
      NSString * time = [[self agenda] getBriefingTime:section];
     NSString * subject = [[[[self agenda] getMeetingBriefings] objectAtIndex:section] objectForKey:@"subject"];

    UILabel *subjectLabel = [[UILabel alloc] initWithFrame:CGRectMake(45, 0, 484, 23)];
    subjectLabel.textColor = [UIColor colorWithRed:0/256.0 green:84/256.0 blue:129/256.0 alpha:1.0];
    subjectLabel.font = [UIFont fontWithName:@"Helvetica-Bold" size:25];
    subjectLabel.text = subject;
    subjectLabel.backgroundColor = [UIColor clearColor];
    [subjectLabel sizeToFit];

    UILabel *timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(45, subjectLabel.frame.size.height, 484, 23)];
    timeLabel.textColor = [UIColor colorWithRed:51/256.0 green:51/256.0 blue:51/256.0 alpha:1.0];
    timeLabel.font = [UIFont fontWithName:@"Century Gothic" size:21];
    timeLabel.text = time;
    timeLabel.backgroundColor = [UIColor clearColor];
    [timeLabel sizeToFit];

    // Create label with section title
    UILabel *presenterLabel = [[UILabel alloc] initWithFrame:CGRectMake(45, timeLabel.frame.origin.y + timeLabel.frame.size.height, 484, 23)];
    presenterLabel.textColor = [UIColor colorWithRed:71/256.0 green:71/256.0 blue:71/256.0 alpha:1.0];
    presenterLabel.font = [UIFont fontWithName:@"Century Gothic" size:18];
    presenterLabel.text = presenter;
    presenterLabel.backgroundColor = [UIColor clearColor];
    [presenterLabel sizeToFit];

    // Create header view and add label as a subview
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(100, 300, 320, 400)];

    [view addSubview:subjectLabel];
    [view addSubview:timeLabel];
    [view addSubview:presenterLabel];

    return view;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T15:58:24.390

在这里这应该可以工作，您可以将返回值的高度更改为您想要的任何内容，它们不必是常量

```
// set header height of gropued tableview
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {

    NSString * presenter = [[self agenda] getBriefingPresenter:section];
    NSString * time = [[self agenda] getBriefingTime:section];
    NSString * subject = [[[[self agenda] getMeetingBriefings] objectAtIndex:section] objectForKey:@"subject"];

    //possible incoming data scenes
    if ([time length]==0 || [presenter length]==0 || [subject length]==0) {
        return 60;
    }
    else if(([time length]==0 && [presenter length]==0 ) || ([time length]==0 && [subject length]==0 ) || ([presenter length]==0 && [subject length]==0 )){
        return 45;
    }
    else if ([time length]==0 && [presenter length]==0 && [subject length]==0){
        return 30;
    }
    else{
        return 90;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:59:49.963

就像 H2CO3 说的那样，假设您在 NSArray (myArray) 中有字符串，并且在相应的部分标题中显示每个字符串，您可以通过以下方式执行此操作：

```
-(CGFloat)tableView:(UITableView*)tableView heightForHeaderInSection:(NSInteger)section {
    if ([[myArray objectAtIndex:[section intValue]] length] == 0) {
        return 60;
    } else {
        return 90;
    }
} 
```

希望这可以帮助。

# google-chrome - 使用 WebGL + Google Chrome 的亚像素动画？

> ID：12570889
> 
> 赞同：1
> 
> 时间：2012-09-24T18:39:19.283
> 
> 标签：google-chrome, webgl, antialiasing, subpixel

当我慢慢平移一个三角形时，它会逐个像素地移动。有什么办法可以强制谷歌浏览器使用抗锯齿平滑移动？

对于示例检查：

[https://dl.dropbox.com/u/4571/musicope2/index.html](https://dl.dropbox.com/u/4571/musicope2/index.html)

PS：我想知道这个答案是否也适用于 webgl 以及答案是否仍然有效？：

[Chrome Canvas 中的亚像素渲染](https://stackoverflow.com/questions/6720977/sub-pixel-rendering-in-chrome-canvas)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T00:23:43.307

我不确定你到底在问什么。

创建 WebGL 上下文时可以请求抗锯齿

```
gl = canvas.getContext("webgl", { antialias: true }); 
```

但它是否真正打开抗锯齿以及达到什么级别取决于浏览器。例如，由于驱动程序错误，某些浏览器不允许在某些 GPU 上进行抗锯齿。

否则，您可以将画布设置为更大的尺寸并使用 css 将其显示为更小的尺寸。浏览器很可能会使用 GPU 双线性过滤来显示结果，从而为您提供一种抗锯齿效果。为此，请将画布的大小设置为要显示的大小的两倍，并将 css 的大小设置为要显示的大小。例子：

```
desiredWidth = 640;
desiredHeight = 480;
canvas.width = desiredWidth * 2;
canvas.height = desiredHeight * 2;
canvas.style.width = desiredWidth + "px";
canvas.style.height = dsiredHeight + "px";
gl = canvas.getContext("webgl", { antialias: false }); 
```

这将使您的画布的drawingBuffer 使其在页面中显示的大小增加一倍，并可能使其看起来具有抗锯齿效果。

# php - 过滤搜索结果 sphinx

> ID：12570890
> 
> 赞同：0
> 
> 时间：2012-09-24T18:39:20.797
> 
> 标签：php, search, sphinx

我已经设置了 sphinx 并且可以使用 php api 执行搜索。但我有两个问题。

1.  在这个测试数据库中，我有许多产品，每个产品都有一个类别 ID。我将如何创建过滤功能，以便搜索后的用户只能从特定类别中检索结果。也就是说，首先我搜索汽车并获得 10 个匹配项，然后我选择福特类别并仅获得 3 个匹配项，即具有福特类别的汽车。

2.  我对 sphinx 是搜索我的索引还是直接搜索 db 感到有点困惑。我以为它搜索了索引，但后来我更改了数据库中的一个文本并在没有重新索引的情况下进行了搜索，我对文本所做的更改显示在结果中。

一如既往，非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:45:56.653

要创建过滤器，您必须将属性添加到数据源（不要忘记在 SQL 查询中选择它 `SELECT category_id, ...`）：

```
sql_attr_uint = category_id 
```

然后你就可以从你的 PHP 代码中添加一个过滤器：

```
$s->SetFilter('category_id', array(43)); 
```

对于第二个问题，您需要运行索引器来更新数据。

# ruby-on-rails-3 - IIS 反向代理未发送完整的响应正文

> ID：12570893
> 
> 赞同：2
> 
> 时间：2012-09-24T18:39:26.353
> 
> 标签：ruby-on-rails-3, iis, reverse-proxy

我有一个 IIS 反向代理，它提供一个带有 RoR 3 后端的应用程序。该应用程序显示我们数据库中所选时间段的信息，为您提供各种图表。当不通过反向代理运行时，无论显示什么时间段，一切都会正常运行。但是当通过反向代理运行时，如果发送了足够多的信息，响应主体就会被切断。

查看 rails 后端，所有信息都已发送出去。在浏览器端，我可以查看响应正文以查看它突然中断的位置。如果我使用一个小的时间窗口，将发送完整的响应并正常工作，但是一旦达到一定的大小范围，它就会停止正常工作。即使我正在查看相同的时间范围，截止点也会发生变化。

那么，为什么 IIS 没有完全发送响应正文？或者是什么控制着它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T22:20:16.140

我只是在使用 Apache/Tomcat 后端服务器时遇到了这个问题。我找到了这个解决方案，它非常适合我的应用程序：

> 您需要增加 ARR 响应缓冲区阈值。请按照以下步骤操作：
> 
> 1.  打开 IIS 管理器，导航到服务器级别。
> 2.  在功能视图中，双击“应用程序请求路由缓存”功能。
> 3.  单击操作窗格上的服务器代理设置...。
> 4.  在缓冲区设置部分，根据您的需要将响应缓冲区阈值设置为适当的值。

（[**来源**](http://forums.iis.net/t/1183906.aspx)）

# objective-c - 修复 iPhone 应用程序中自定义安装字体的水平对齐

> ID：12570896
> 
> 赞同：2
> 
> 时间：2012-09-24T18:39:32.273
> 
> 标签：objective-c, fonts, uifont

我正在尝试在我的应用程序中使用 Helvetica Condensed 字体。通过调整上升器（如本答案中所述），我已经克服了垂直对齐的问题。

但是，我也有水平对齐的问题——当文本向左对齐时，UILabel 中的文本会一直向右移动一点（移动的“长度”取决于标签中有多少文本）。

我相信可以使用相同的技术解决它，但我不知道应该调整哪个参数。

[https://stackoverflow.com/a/8314285/963881](https://stackoverflow.com/a/8314285/963881)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:12:57.220

如果您只想移动标签而不编辑上升器，您可以调整 UIButton contentEdgetInsets 属性。

```
yourButton.contentEdgeInsets = UIEdgeInsetsMake(0, -10, 0, 0); 
```

这行代码会将您的标签向右移动。输入与 CGRects 的不同之处在于（上、左、下、右）。

可能有点破解，但它的工作原理。

# php - 访问 PHP 对象属性的语法是什么？

> ID：12570899
> 
> 赞同：29
> 
> 时间：2012-09-24T18:39:38.100
> 
> 标签：php, oop, properties, getter-setter

**如何访问 PHP 对象的属性？**

`$this->$property1`另外，使用vs.访问对象的属性有什么区别 `$this->property1`？

当我尝试使用时`$this->$property1`，出现以下错误：

> 'PHP：无法访问空属性'。

PHP 关于对象属性的[文档](http://php.net/manual/en/language.oop5.properties.php)有一条评论提到了这一点，但评论并没有真正深入解释。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-24T18:54:48.783

1.  `$property1`// 具体变量
2.  `$this->property1`// 具体属性

类的一般用途是没有，`"$"`否则你调用一个`$property1`可以取任何值的变量。

例子：

```
class X {
  public $property1 = 'Value 1';
  public $property2 = 'Value 2';
}
$property1 = 'property2';  //Name of attribute 2
$x_object = new X();
echo $x_object->property1; //Return 'Value 1'
echo $x_object->$property1; //Return 'Value 2' 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-24T18:43:56.123

`$this->property1`方法：

使用该对象并获取绑定到该对象的变量 property1

`$this->$property1`方法：

评估字符串 $property1 并使用结果来获取由 $property1 结果命名的变量绑定到此对象

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T18:46:02.103

`property1`是一个字符串，`$property1`而是一个变量。因此，当访问`$this->$property1`PHP 时会查找名为的变量的内容，`$property1`并且因为它（可能）不存在，所以它是空的，所以这就是您收到`Cannot access empty property`错误的原因。

# c# - 即使使用“System.Collections.ObjectModel”也找不到“ObservableCollection”

> ID：12570902
> 
> 赞同：2
> 
> 时间：2012-09-24T18:39:41.937
> 
> 标签：c#, visual-studio, visual-studio-2012

`System.Collections.ObjectModel`已经包括了。Visual Studio 2012 仍然说`Type or namespace name 'ObservableCollection' could not be found.`

类似于[这个问题](https://stackoverflow.com/questions/6685448/the-type-or-namespace-name-observablecollection-could-not-be-found)

代码：

```
class ObservableClass : ObservableCollection<OtherClass>
{
} 
```

编辑：这是 .NET Framework 3.5，是一个控制台应用程序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T18:47:18.383

您可能缺少程序集参考...根据您所针对的框架，可能会找到此类：

*   在 WindowsBase.dll (.NET 3.x) 中
*   在 System.dll (.NET 4.x)
*   在 System.Windows.dll (Silverlight/Windows Phone 7)
*   在 System.ObjectModel.dll (WinRT) 中（包含在“.NET for Windows Store apps”中）

# php - 通用 PHP <=> Javascript 命令框架？

> ID：12570903
> 
> 赞同：0
> 
> 时间：2012-09-24T18:39:52.560
> 
> 标签：php, javascript, ajax

是否有任何框架编写了“所有样板”代码，有助于简化 PHP <=> JS（又名“AJAX”）通信？

我假设是这样编写的库，但我发现的是

1.  [APE](http://www.ape-project.org/)，即 JS <=> JS
2.  Drupal 内置[ajax.inc](http://api.drupal.org/api/drupal/includes!ajax.inc/group/ajax_commands/7)，在非 Drupal 项目中不容易使用。

其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:57:39.510

As the comments have mentioned: use jQuery's `$.ajax` for JS side, and `json_encode` and `json_decode` for your PHP side. Not really much more to it than that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:59:51.280

I like Ext Direct from Sencha.

To be used with Ext JS.

# javascript - javascript中的作用域

> ID：12570907
> 
> 赞同：-4
> 
> 时间：2012-09-24T18:40:01.113
> 
> 标签：javascript, global-variables, local-variables, scoping

```
<html>
  <head>
    <title></title>
  <script type="text/javascript">  
    var a = 1;
function b() {
    a = 10;
    return;
    function a() {}
}

</script>
  </head>
  <body>
<script type="text/javascript">
b();
alert(a);
</script>
  </body>
</html> 
```

我来自 c 和 java 背景。作用域规则在 java 脚本中是不同的。我想知道为什么这个程序给出输出 1。这个程序是如何工作的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:43:24.093

JavaScript 使用函数作用域。此外，函数被“提升”到其范围的顶部（最近的函数）。

```
function b() {
    a = 10;
    return;
    function a() {}
} 
```

这被解释为：

```
function b() {
    function a() {}  // function was hoisted
    a = 10;
    return;
} 
```

当使用`function a(){}`它声明一个函数时，就像那里有一个`var`；它正在制作一个局部变量。因此，`a=10`是局部的`a`，而不是全局的`a`。

参考： http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T18:46:24.787

这里发生了两件事；变量的范围，以及函数和变量在函数内部的声明方式。

`b`您在名为的函数内声明了一个局部函数`a`，因此这与在函数内声明一个局部变量的效果相同，该局部变量在全局范围内以相同的名称隐藏变量。

在函数内创建局部变量/函数的位置无关紧要，它仍然会在函数中的代码开始之前创建，所以这样做：

```
function b() {
  a = 10;
  return;
  function a() {}
} 
```

基本上是一样的：

```
function b() {
  var a = function(){};
  a = 10;
  return;
} 
```

当函数中的代码将值赋给`10`变量`a`时，它实际上会覆盖本地函数并将其替换为数字。由于 Javascript 中的函数引用是一等成员，它们可以像任何其他值一样被传递，也可以被任何其他值替换。

由于函数中的代码仅更改局部变量`a`，因此全局变量`a`不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:42:58.503

在 javascript 中，作用域单元是一个函数。在你的`b`函数中，`a`是一个局部函数。因此，全局`a`变量不受影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T18:43:07.470

关于 Javascript 语言的作用域，你可以在这里找到：http: [//www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

# c++ - 在 Xcode 3 中链接库

> ID：12570910
> 
> 赞同：0
> 
> 时间：2012-09-24T18:40:17.510
> 
> 标签：c++, xcode, linker

我只将 Xcode 3 用于独立程序。这次虽然我必须使用大数字库。我已经下载了 gmp 并试图将它与 Xcode 3 链接。老实说，我几乎不知道我在做什么。你们能彻底解释一下如何链接像 gmp 这样的大数字库，以便我可以用它来计算巨大的数字吗？

编辑：我在 C++ 中工作，我需要能够进行任何数学运算，例如加法、平方根、指数等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:55:20.297

根据依赖的用途和所需的平台，有很多方法可以合并该代码。但这似乎是一个非常可靠的起点。

[https://github.com/bmorton/GMPInt](https://github.com/bmorton/GMPInt)

如果这不是你想要的，你能告诉我们你正在使用什么语言和平台吗？

# internet-explorer-9 - 如何转换文本阴影以便 IE9 可以工作

> ID：12570912
> 
> 赞同：0
> 
> 时间：2012-09-24T18:40:24.853
> 
> 标签：internet-explorer-9, css

我将如何在 ie9 中设置 text-shadow 属性以匹配其他浏览器，就像我在下面得到的一样？

如何使用 .sysMenu-item 文本阴影

```
.sysMenu-item{padding:8px;padding-top:7px;height:110%;float:left; 
              border-right:.2em groove #fff;margin-top:-2px; cursor:  pointer;
              text-shadow: 0 1px 0 rgba(255, 255, 255, 0.64);
} 
```

——在 ie9 中？

我需要上面的文本阴影在下面的 css3 中工作

```
html.ie9 .sysMenu-item {
    background-color: white;
    filter: progid:DXImageTransform.Microsoft.Chroma(color=rgba(255, 255, 255, 0.64)) 
            progid:DXImageTransform.Microsoft.Alpha(opacity=100) 
            progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=1,offY=1)
            progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=-1,offY=1)
            progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=1,offY=-1)
            progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=-1,offY=-1);
    zoom: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:56:45.173

我相信您将需要使用 jquery，例如[http://kilianvalkhof.com/2008/javascript/text-shadow-in-ie-with-jquery/](http://kilianvalkhof.com/2008/javascript/text-shadow-in-ie-with-jquery/)

也可以查看这篇文章：[http ://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/](http://coding.smashingmagazine.com/2010/04/28/css3-solutions-for-internet-explorer/)

# c++ - 如何为所有 basic_string 实例编写通用模板

> ID：12570921
> 
> 赞同：2
> 
> 时间：2012-09-24T18:41:19.783
> 
> 标签：c++, templates, c++11

我正在尝试编写这样的模板。

```
template <char c,typename Options, 
   basic_string<class,class,class> Options::* member> 
   struct option_string; 
```

但是我不断收到编译错误。我想知道如何编写一个包含三个选项的模板：a `char`、任何类和指向该类成员的指针，该成员必须是`basic_string`特化的。我想避免为`basic_string`.

我的目标是创建一个通用的命令行选项库。以下是我想如何使用它。

```
class Options : public Command_Line_Options_Parser<Options> {
public:
  int integer = 0;
  float real_number = 0.0;
  bool boolean = false;
  bool make_true = false;
  bool make_false = true;
  std::string string;
  typedef Options O;
  typedef Command_Line_Options<
            option_int<'i',&O::integer>,
            option_float<'f',&O::real_number>,
            option_bool<'b',&O::boolean>,
            option_true<'t',&O::make_true>,
            option_false<'t',&O::make_true>,
            option_string<'s',&O::string>
           >
  option_list;
};

int main(int argc,char**argv ) {

  Options options;

  options.parse(argc,argv);
  std::cout << "integer : " << options.integer <<endl;
  std::cout << "real_number : " << options.real_number <<endl;
  std::cout << "boolean : " << options.boolean <<endl;
  std::cout << "make_true : " << options.make_true <<endl;
  std::cout << "make_false : " << options.make_false <<endl;
  std::cout << "string : " << options.string <<endl;
}; 
```

我宁愿`option_string`接受所有专业`basic_string`而不是仅仅接受`std::string`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T19:05:45.413

您不必直接指定返回类型。在那种情况下，为什么要`basic_string`直接在课堂上打扰呢？只需采取`typename String`并完成：

```
template<char C, class Options, class String, String Options::* Member>
struct option_string; 
```

如果您仍然想确保它`String`确实是 的专业化`basic_string`，那么，请使用这个小助手和`static_assert`它：

```
#include <type_traits>
#include <string>

template<class T>
struct is_basic_string : std::false_type{};

template<class Ch, class Tr, class Al>
struct is_basic_string<std::basic_string<Ch,Tr,Al>> : std::true_type{};

// in 'option_string'
static_assert(is_basic_string<String>::value,
    "Data member must be a 'basic_string' specialization."); 
```

* * *

由于似乎不需要将成员指针作为模板参数传递，我建议只在构造函数中传递它：

```
template<char C, class Option, class String>
struct option_string{
  static_assert(is_basic_string<String>::value,
      "Data member must be a 'basic_string' specialization.");
  typedef String Option::*member_type;

  option_string(member_type m, ...) : member(m), ... { ... }
private:
  member_type member;
};

template<char C, class Option, class String>
option_string<C, Option, String> make_option_string(String Option::*member, ...){
  return {member, ...};
}

// in code:
auto os = make_option_string<'H'>(&some_type::a_string_member); 
```

# node.js - express 3.0 如何使用 app.locals.use 和 res.locals.use

> ID：12570923
> 
> 赞同：7
> 
> 时间：2012-09-24T18:41:39.120
> 
> 标签：node.js, express

我在 express3.0rc2 上。如何使用`app.locals.use`（是否仍然存在）和`res.locals.use`

我看到了这个[https://github.com/visionmedia/express/issues/1131](https://github.com/visionmedia/express/issues/1131)但 app.locals.use 抛出一个错误。我假设一旦我把函数放在 app.locals.use 中，我就可以在路由中使用它。

我正在考虑添加

```
app.locals.use(myMiddleware(req,res,next){res.locals.uname = 'fresh'; next();}) 
```

然后在任何路由中调用这个中间件

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T19:39:10.907

我正在使用 Express 3.0，这对我有用：

```
app.use(function(req, res, next) {
  res.locals.myVar = 'myVal';
  res.locals.myOtherVar = 'myOtherVal';
  next();
}); 
```

然后我可以访问`myVal`和`myOtherVal`在我的模板中（或直接通过`res.locals`）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-24T19:23:45.627

如果我理解正确，您可以执行以下操作：

```
app.configure(function(){
  // default express config
  app.use(function (req, res, next) {
    req.custom = "some content";
    next();
  })
  app.use(app.router);
});

app.get("/", function(req, res) {
    res.send(req.custom)
}); 
```

您现在可以在每个路由中使用 req.custom 变量。确保将 app.use 函数放在路由器之前！

编辑：

好的，下次尝试:) 您可以使用中间件并在您想要的路由中指定它：

```
function myMiddleware(req, res, next) {
    res.locals.uname = 'fresh';
    next();
}

app.get("/", myMiddleware, function(req, res) {
    res.send(req.custom)
}); 
```

或者您可以“全局”设置它：

```
app.locals.uname = 'fresh';

// which is short for

app.use(function(req, res, next){
  res.locals.uname = "fresh";
  next();
}); 
```

# sql - 不使用 CTE（或游标！）的迭代查询

> ID：12570925
> 
> 赞同：5
> 
> 时间：2012-09-24T18:41:49.563
> 
> 标签：sql, sql-server-2008

我的表中有一些类似于此的数据：

```
项目 日期 价格
2012 年 8 月 29 日 3 美元
B 2012 年 8 月 29 日 23 美元
C 2012 年 8 月 29 日 10 美元
2012 年 8 月 30 日 4 美元
B 2012 年 8 月 30 日 25 美元
C 2012 年 8 月 30 日 11 美元
2012 年 8 月 31 日 3 美元
B 2012 年 8 月 31 日 22 美元
C 2012 年 8 月 31 日 8 美元
2012 年 9 月 1 日 3 美元
B 2012 年 9 月 1 日 26 美元
C 2012 年 9 月 1 日 9 美元
2012 年 9 月 2 日 3 美元
B 2012 年 9 月 2 日 24 美元
C 2012 年 9 月 2 日 9 美元

```

我需要编写一个查询来标识 A 的价格自 2012 年 8 月 30 日以来没有改变，商品 C 的价格自 2012 年 9 月 1 日以来没有改变，并返回两者经过的天数（我们'正在寻找价格不变的商品）。由于此 sql 需要在其中运行的 Web 报告工具的限制，我不能使用 CTE、游标或单独创建的临时表（选择进入等）。我只能使用“基本”单通道选择查询（子查询将起作用）。有没有人对如何实现这一目标有任何狡猾的想法？

我的第一次尝试是按项目和价格分组，其中价格与最新价格相同`having count > 2`，确定最小日期并在最小日期和 getdate 之间进行 datediff。然而，这只是识别该价格的第一个实例，它没有考虑任何可能具有不同价格的后续行。希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:52:14.960

***[用小提琴](http://sqlfiddle.com/#!3/ed891/3)更新：***

这行得通吗？

```
SELECT ct.Item,
    ct.Price,
    datediff(day, max(yt.[Date]), ct.[Date]) AS ChangeDays
FROM
    (SELECT Item, max(Date) as LastDate FROM YourTable GROUP BY Item) maxdata
    INNER JOIN YourTable ct on ct.Item = maxdata.Item and ct.[Date] = maxdata.LastDate
    INNER JOIN YourTable yt on yt.Item = ct.Item and yt.[Date] < ct.[Date] and yt.Price <> ct.Price
GROUP BY ct.Item, ct.Price, ct.[Date] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T19:52:39.703

我已经给出了这两种类型的年龄，并说明了表中仅存在一次的项目（它们没有旧日期）。请让我们知道这有多接近。

更新：我必须更正“PriceAgeToNow”中的日期计算，并且我还尝试过滤掉只有 1 天的新价格的记录。这是[SQL 小提琴](http://sqlfiddle.com/#!3/d41d8/4633)。

```
-- Get the age of the current price
select *
    , datediff(d, c.OldDate, getdate()) as PriceAgeToNow
    , datediff(d, c.OldDate, c.NewDate) as PriceAgeToNewestDate
from (
    select *
        -- Get max date of former price
        , isnull(
            (select max(Date) from PricingTable where Item = b.Item and Date < b.NewDate and Price != b.NewPrice), b.NewDate
        ) as OldDate
    from (
        -- Get current price
        select *
            , (select Price from PricingTable where Item = a.Item and Date = a.NewDate) as NewPrice
        from (
            -- Get current date
            select Item
                , max(Date) as NewDate
            from PricingTable
            group by Item
        ) a
    ) b
) c
-- Attempt to filter out price changes that have only lasted 1 day
where datediff(d, c.OldDate, c.NewDate) > 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T20:15:40.547

我倾向于在最合适的地方使用 Windows 功能。而且，在这种情况下，有一个有趣的技巧可以找到相同的事物序列。在所有数据上枚举它们（使用 row_number），按项目分区并按日期排序。然后在所有数据上枚举它们，按项目和价格分区并按日期排序。

对于 A，你会得到

```
A 8/29 $3 1 1
A 8/30 $4 2 1
A 8/31 $3 3 2
A 9/1  $3 4 3
A 9/3  $3 5 4 
```

对于在数据中保持不变的任何价格序列，最后两列之间的差异是不变的。然后我们可以使用它来查找该序列何时开始。以下查询采用这种方法：

```
select item, price, (id_seqnum - ipd_seqnum) as groupid, min(date) as mindate
from (select p.*,
             row_number() over (partition by item order by date) id_seqnum,
             row_number() over (partition by item, price order by date) as ipd_seqnum,
             max(date) over (partition by item) as maxdate
      from prices p
     ) t
group by item, price, (id_seqnum - ipd_seqnum)
having max(date) = max(maxdate) 
```

它还查找每个项目的最大日期，然后选择具有最大日期的分组。

# c# - 使用 OleDbCommand 时，指定的强制转换无效

> ID：12570926
> 
> 赞同：0
> 
> 时间：2012-09-24T18:41:50.860
> 
> 标签：c#, excel, oledb

它是如何与 excel 一起工作的

```
decimal LTLPrice = Decimal.Parse(sheet.get_Range("H27").Value.ToString());
decimal mathLTLPrice = Math.Round(LTLPrice, 2);
sheet.get_Range("C29").Value = SumToTextFormatProvider.SumToText(mathLTLPrice, "Lt", "ct"); 
```

OleDb 在我的想象中应该是怎样的

```
myCommand = new OleDbCommand("SELECT * FROM [Sheet1$H27:H27]", MyConnection);
myReader = myCommand.ExecuteReader();
while (myReader.Read())
{
    decimal LTLPrice = Decimal.Parse(myReader.GetString(0));
    decimal mathLTLPrice = Math.Round(LTLPrice, 2);
    myCommand = new OleDbCommand("UPDATE [Sheet1$C29:C29] SET F1='" + SumToTextFormatProvider.SumToText(mathLTLPrice, "Lt", "ct") + "'", MyConnection);
    myCommand.ExecuteNonQuery();
}
myReader.Close(); 
```

怎么样

```
System.InvalidCastException: Specified cast is not valid.
at System.Data.OleDb.ColumnBinding.ValueString()
at System.Data.OleDb.OleDbDataReader.GetString(Int32 ordinal)
at Trains.invoiceForm.invoiceGenerateXls_Click(Object sender, EventArgs e) in D:\Users\Nullified\Documents\Visual Studio 2010\Projects\Trains\Trains\invoiceForm.cs:line 592 
```

错误在这一行

```
decimal LTLPrice = Decimal.Parse(myReader.GetString(0)); 
```

我试过 GetInt32 / GetDecimal 但没有结果。:(

更新

使用 GetDouble 我没有收到错误，但 myReader 返回 0，然后在 excel 中它是“3,49”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:13:17.987

我有类似的问题，这是我对您的问题的修复：

```
 decimal LTLPrice = Convert.ToDecimal(myReader.GetValue(0).ToString()); 
```

通过抓住“价值”，你不必处理你正在拉动的细节，直到你尝试用它做点什么。

当然，我的问题与您的问题略有不同，因为我只需要将所有内容都转换为字符串。然而，这种方法仍然适用于您，因为 Convert.ToDecimal 将适用于字符串，如果该值当然是可转换的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:54:08.077

您可以添加此代码

```
if(myReader.GetString(0) != null)
{
    decimal LTLPrice = Decimal.Parse(myReader.GetString(0).Replace(",",".").Trim());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T06:40:51.257

发现了问题，我通过 oledb 将数字作为文本存储在 excel 中，尽管事实上如果我们在 excel 中打开 xls 文件，我们仍然可以读取它，并且 excel 会正常计算所有内容，如果是，oledb 无法从 excel 中获取正确的双精度值根据存储为文本的数字计算得出。现在只剩下找到如何在c#中将double存储为excel作为数字，问题就解决了。

# maven - 在maven上的多个模块项目中部署war

> ID：12570928
> 
> 赞同：0
> 
> 时间：2012-09-24T18:41:56.740
> 
> 标签：maven, maven-2, bamboo

我有一个项目结构，就像

```
家长
|-- 子Project1（制作战争project.war）
| `-- pom.xml
|-- 子项目
| `-- pom.xml
`-- 子项目N
    `-- pom.xml

```

子项目具有对父项目的引用。我已经分三个阶段配置了我的竹子计划

-- 获取授权

-- 默认（执行单元测试）

-- 部署战争（部署和发布战争）

我的战争文件是在 Child Project1 中制作的，它包含对父级的引用。在第三阶段，想配置我的竹计划以自动化战争制造过程。我面临的问题是当我从“父”级别检查我们的时，它没有得到上传目标。如果我从孩子结帐并尝试进行战争，那么它会给出无法找到父母的错误

***注意***：父 pom.xml 有对子模块的引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:27:36.900

使用“父”级别运行完整构建

`mvn install`

然后有第二个任务运行

`mvn upload -pl childfolder`

或者你甚至可以运行

`mvn upload -am -pl childfolder`

这应该为子文件夹构建一个反应器，首先构建所有依赖项。

查看 maven 的 -am 和 -pl 标志，它们可能会做你想做的事。

# php - MySQL中的匿名函数？

> ID：12570929
> 
> 赞同：3
> 
> 时间：2012-09-24T18:42:03.530
> 
> 标签：php, mysql, sql

我为使用存储过程的客户端编写了一个查询。结果他们不能授予我的用户对数据库的写访问权限，所以我不能存储我的过程。我可以在查询中将存储过程转换为匿名函数，以便在不使用存储过程的情况下保留该功能吗？

```
$establishFunction = mysql_query("DROP FUNCTION IF EXISTS fn_distance_cosine;
CREATE FUNCTION fn_distance_cosine (
    latitude_1 DOUBLE,
    longitude_1 DOUBLE,
    latitude_2 DOUBLE,
    longitude_2 DOUBLE
)
RETURNS DOUBLE
DETERMINISTIC
SQL SECURITY INVOKER
RETURN ACOS(
      SIN(RADIANS(latitude_1)) * SIN(RADIANS(latitude_2))
      + COS(RADIANS(latitude_1)) * COS(RADIANS(latitude_2))
      * COS(RADIANS(longitude_2 - longitude_1))
    ) * 3956.547;
");

mysql_query("SET @input_lat :=" . $lat . ";");
mysql_query("SET @input_lon :=" . $lon . ";");

mysql_query("SET @max_latitude := @input_lat + DEGREES(50.0/3956.547);");
mysql_query("SET @min_latitude := @input_lat - DEGREES(50.0/3956.547);");
mysql_query("SET @max_longitude := @input_lon + DEGREES(50.0/3956.547/COS(RADIANS(@input_lat)));");
mysql_query("SET @min_longitude := @input_lon - DEGREES(50.0/3956.547/COS(RADIANS(@input_lat)));");

if($result = mysql_query("SELECT
      *,
      fn_distance_cosine(lat, lon, @input_lat, @input_lon) AS distance_in_miles,
      COUNT(*) AS store_number_count
    FROM stores
    JOIN items_stores
    ON stores.store_number=items_stores.store_number
    WHERE `lat` BETWEEN @min_latitude AND @max_latitude
      AND `lon` BETWEEN @min_longitude AND @max_longitude
    GROUP BY stores.store_code
    HAVING store_code_count > 1
    ORDER BY distance_in_miles
    LIMIT 10;
    ")){  
        while ($r = mysql_fetch_assoc($result)){
        $rows[] = $r;
    }
}else{
    //failed.
    echo (mysql_error ());
}

print json_encode($rows); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T18:48:28.307

如果你不能做存储过程，你可能也不能做函数，因为它们也没有安全权限。

选项 #1 - 让他们自己的 DBA 审查 SQL 语句，然后对数据库进行修改以容纳存储过程。

选项 #2 - 您的另一个选项是将代码移出数据库并移入 PHP。所以是的，您可以将它移到 PHP 中，但它不会像使用数据库引擎那样快速或高效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T18:55:16.570

不，你不能有匿名函数。如果您的客户无法授予您添加此功能的适当权限，那么他们为什么要您编写一个？如果您的 DB 用户帐户无法安装该功能，那么肯定有拥有适当用户帐户的人能够根据您的 SQL 为您创建此功能。

还有为什么是函数而不是存储过程？您可以将您在多个数据库查询中执行的所有逻辑放在一个调用中，例如：

`call give_me_my_data(lat, long)`

您会使用一些基于 db 的逻辑和一些基于 php 的逻辑（带有许多不必要的查询）来获取您需要的数据，而不是一路走来定义一个可以清理的存储过程，这似乎很奇怪您的 PHP 代码只进行一次查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:53:17.687

你能在同一个mysql服务器上获得一个单独的数据库吗？然后，您可以在其中声明该过程，然后通过显式添加数据库名称前缀在查询中使用它。我不完全确定它是否真的有效，但我猜它确实有效。

# android - 使用 Linkify 处理显示 URL 和实际 URL

> ID：12570930
> 
> 赞同：2
> 
> 时间：2012-09-24T18:42:05.220
> 
> 标签：android, linkify

我正在尝试找到实现以下内容的最佳方法：

*   一个普通的 URL 看起来像 `https://www.google.com/something/somethingmore/a_lot_more_stuff.html`

*   我想`google.com/...`在我的 TextView 中显示这个（为了更好的可读性）

*   当用户在 TextView 中单击时`google.com/...`，应自动使用实际的长 URL 进行进一步操作

假设我同时拥有显示 URL 和实际 URL，我如何使用 Linkify（或任何其他技术）来确保可以短时间显示很长的 URL，但是当用户单击Linkified URL，实际使用的长URL？

# iphone - 尝试为通用 iOS 开发创建优化图像，我从哪里开始？

> ID：12570933
> 
> 赞同：1
> 
> 时间：2012-09-24T18:42:15.697
> 
> 标签：iphone, ios, xcode, image, photoshop

所以我明白，为了创建一个通用应用程序并让它在所有苹果设备上看起来都很好，我需要确保每个图像都有多个版本。

这样做的最佳方法是什么？我需要为每台设备使用哪些分辨率？我真的需要为 Iphone/Iphone 4/Iphone Retina/Iphone 5/Ipad/Ipad Retina 提供单独的图像吗？

我有一个 .ai 文件中的所有图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:45:25.527

你需要知道的都在这里：

[iOS 人机界面指南：自定义图标和图像创建指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:52:48.003

您需要创建 4 组图像：

-iPhone 3g、iPod touch 2g、iPod touch 3g。

-iPhone 4、iPhone 5、iPod touch 4、iPod touch 5。（视网膜）

-iPad 1，iPad 2。

- 新 iPad。（视网膜）

**首先创建最高分辨率的图像。**

[UIImage imageNamed:@"customBackground"];

您应该有 2 张图片：

自定义背景.png

customBackground@2x.png（视网膜显示）

# java - 元素类型“Host”必须由匹配的结束标签“”终止

> ID：12570934
> 
> 赞同：1
> 
> 时间：2012-09-24T18:42:19.220
> 
> 标签：java, jakarta-ee, tomcat

我正在创建简单的网络应用程序。而且我在服务器配置方面遇到了问题。当我尝试启动服务器时，我收到一个错误**元素类型“主机”必须由匹配的结束标签“”终止**
但我的主机标签看起来像以下方式（并且，是的，它已关闭）：

```
<?xml version="1.0" encoding="UTF-8"?>
<Server port="${base.shutdown.port}" shutdown="SHUTDOWN">
    <Listener className="org.apache.catalina.core.JasperListener" />
    <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
    <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
    <Listener 
        className="com.springsource.tcserver.serviceability.deploy.TcContainerDeployer" />
    <Listener accessFile="${catalina.base}/conf/jmxremote.access"
        authenticate="true" bind="127.0.0.1"
        className="com.springsource.tcserver.serviceability.rmi.JmxSocketListener"
        passwordFile="${catalina.base}/conf/jmxremote.password" port="${base.jmx.port}"
        useSSL="false" />
    <GlobalNamingResources>
        <Resource auth="Container" description="User database that can be updated and saved"
            factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase"
            pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase" />
    </GlobalNamingResources>
    <Service name="Catalina">
        <Executor maxThreads="300" minSpareThreads="50" name="tomcatThreadPool"
        namePrefix="tomcat-http--" />
        <Engine defaultHost="localhost" name="Catalina">
            <Realm className="org.apache.catalina.realm.LockOutRealm">
                <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase" />
            </Realm>
            <Host appBase="webapps" autoDeploy="true" deployOnStartup="true"
            deployXML="true" name="localhost" unpackWARs="true">
                <Valve directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log."
                suffix=".txt" className="org.apache.catalina.valves.AccessLogValve"/>
                <Context docBase="SimpleBlog" path="/simpleblog" reloadable="true"
                source="org.eclipse.jst.jee.server:SimpleBlog"/>
            </Host>
        </Engine>
        <Connector acceptCount="100" connectionTimeout="20000"
            executor="tomcatThreadPool" maxKeepAliveRequests="15" port="${bio.http.port}"
            protocol="org.apache.coyote.http11.Http11Protocol" redirectPort="${bio.https.port}" />
    </Service>
    <Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" />
</Server> 
```

我有以下错误：

无法清理过时文件的服务器：元素类型“主机”必须由匹配的结束标记“”终止。

元素类型“主机”必须由匹配的结束标记终止`"</Host>".**` 但是，如果我正在运行具有管理员权限的应用程序（win7），这怎么可能呢？

完整的堆栈跟踪是：

```
SEVERE: Parse Fatal Error at line 22 column 11: The element type "Host" must be terminated by the matching end-tag "</Host>".
org.xml.sax.SAXParseException; systemId: file:/C:/Program%20Files/Spring%20Tool%20SUite/vfabric-tc-server-developer-2.7.1.RELEASE/spring-insight-instance/conf/server.xml; lineNumber: 22; columnNumber: 11; The element type "Host" must be terminated by the matching end-tag "</Host>".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1375)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1708)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2898)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:601)
    at org.apache.catalina.startup.Catalina.load(Catalina.java:649)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:281)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:450) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T18:56:02.830

问题是基础实例 server.xml 没有得到更新。所以手动更新基本实例下的 server.xml 例如 C:\sw\STS\vfabric-tc-server-developer-2.7.2.RELEASE\base-instance\conf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-06T00:31:13.267

我遇到了这个问题，并发现我定义了一个未在任何用户中使用的角色。当我删除角色时，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-09T02:43:26.060

对于后代，@user1575688 的回答是非常正确的，它可能被搁置的原因之一是您的磁盘是否已满（可能是由于崩溃导致的突然核心转储）。您可以将 server.xml（或导致错误的其他 xml 文件）从您复制`workspace/Servers/<server-config>/conf/`到`$CATALINA_BASE/conf/`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-24T20:23:31.007

现在 c in `className`(in element Valve) 是一个 16 位字符。那会使解析器崩溃。

# ruby-on-rails - Rails 3教程第6章奇怪的Rspec失败

> ID：12570935
> 
> 赞同：0
> 
> 时间：2012-09-24T18:42:23.733
> 
> 标签：ruby-on-rails, ruby, rspec

我正在与 Rails 教程战斗。我一直卡在第6章。这是我运行测试时的问题：

```
bundle exec rspec spec/models/user_spec.rb

I get few failures:

 Failures:

 1) User
 ←[31mFailure/Error:←[0m ←[31mit { should be_valid }←[0m
 ←[31mexpected valid? to return true, got false←[0m
 ←[36m     # ./spec/models/user_spec.rb:31:in `block (2 levels) in <top (required
 )>'←[0m

 2) User when email format is valid should be valid
 ←[31mFailure/Error:←[0m ←[31m@user.should be_valid←[0m
   ←[31mexpected valid? to return true, got false←[0m
 ←[36m     # ./spec/models/user_spec.rb:64:in `block (4 levels) in <top (required
 )>'←[0m
 ←[36m     # ./spec/models/user_spec.rb:62:in `each'←[0m
 ←[36m     # ./spec/models/user_spec.rb:62:in `block (3 levels) in <top (required
 )>'←[0m

 3) User return value of authenticate method with valid password
 ←[31mFailure/Error:←[0m ←[31mit { should == found_user.authenticate(@user.p
 assword) }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:99:in `block (4 levels) in <top (required
 )>'←[0m

 4) User return value of authenticate method with invalid password
 ←[31mFailure/Error:←[0m ←[31mlet(:user_for_invalid_password) { found_user.a
 authenticate("invalid") }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:103:in `block (4 levels) in <top (require
 d)>'←[0m
 ←[36m     # ./spec/models/user_spec.rb:105:in `block (4 levels) in <top (require
 d)>'←[0m

 5) User return value of authenticate method with invalid password
 ←[31mFailure/Error:←[0m ←[31mlet(:user_for_invalid_password) { found_user.a
 uthenticate("invalid") }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:103:in `block (4 levels) in <top (require
 d)>'←[0m
 ←[36m     # ./spec/models/user_spec.rb:106:in `block (4 levels) in <top (require
 d)>'←[0m

 6) User return value of authenticate method with valid password
 ←[31mFailure/Error:←[0m ←[31mit { should == found_user.authenticate(@user.e
 mail) }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:120:in `block (4 levels) in <top (require
 d)>'←[0m

 7) User return value of authenticate method with invalid password
 ←[31mFailure/Error:←[0m ←[31mlet(:user_for_invalid_password) { found_user.a
 uthenticate("invalid") }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:124:in `block (4 levels) in <top (require
 d)>'←[0m
 ←[36m     # ./spec/models/user_spec.rb:126:in `block (4 levels) in <top (require
 d)>'←[0m

 8) User return value of authenticate method with invalid password
 ←[31mFailure/Error:←[0m ←[31mlet(:user_for_invalid_password) { found_user.a
 uthenticate("invalid") }←[0m
 ←[31mNoMethodError:←[0m
   ←[31mundefined method `authenticate' for nil:NilClass←[0m
 ←[36m     # ./spec/models/user_spec.rb:124:in `block (4 levels) in <top (require
 d)>'←[0m
 ←[36m     # ./spec/models/user_spec.rb:127:in `block (4 levels) in <top (require
 d)>'←[0m

 9) User with a password that's too short
 ←[31mFailure/Error:←[0m ←[31mit { should be_valid }←[0m
   ←[31mexpected valid? to return true, got false←[0m
 ←[36m     # ./spec/models/user_spec.rb:112:in `block (3 levels) in <top (require
 d)>'←[0m

 Finished in 8.5 seconds
 ←[31m23 examples, 9 failures←[0m

 Failed examples:

 ←[31mrspec ./spec/models/user_spec.rb:31←[0m ←[36m# User ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:60←[0m ←[36m# User when email format is va
 lid should be valid←[0m
 ←[31mrspec ./spec/models/user_spec.rb:99←[0m ←[36m# User return value of authent
 icate method with valid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:105←[0m ←[36m# User return value of authen
 ticate method with invalid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:106←[0m ←[36m# User return value of authen
 ticate method with invalid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:120←[0m ←[36m# User return value of authen
 ticate method with valid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:126←[0m ←[36m# User return value of authen
 ticate method with invalid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:127←[0m ←[36m# User return value of authen
 ticate method with invalid password ←[0m
 ←[31mrspec ./spec/models/user_spec.rb:112←[0m ←[36m# User with a password that's
 too short ←[0m 
```

我的 User_spec.rb

```
require 'spec_helper'

describe User do

before  do
    @user = User.new(name: "Example User", email: "user@example.com",
                     password: "foobar", 
    password_confirmation: "foobar") 
end

subject { @user }

it { should respond_to(:name) }
it { should respond_to(:email) }
it { should respond_to(:password_digest) }
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:authenticate) }

it { should be_valid }

describe "When name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
end

describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid}
end

describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
end

describe "when email format is invalid" do
    it "should be invalid" do
        addresses = %w[user@foo,com user_at_foo.org example.user@foo.   
                        foo@bar_baz.com foo@bar+baz.com]
        addresses.each do |invalid_address|
            @user.email = invalid_address
            @user.should_not be_valid
        end
    end
end

describe "when email format is valid" do
    it "should be valid" do
        addresses  = %w[user@foo.COM A_US-ER@f.b.org frst.lst@foo.jp 
 a+b@baz.cn]
        addresses.each do |valid_address|
            @user.email = valid_address
            @user.should be_valid
        end
    end
end

describe "when email addresses is already taken" do
    before do
        user_with_same_email = @user.dup
        user_with_same_email.email = @user.email.upcase
        user_with_same_email.save
    end

    it { should_not  be_valid }
end

describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " "}
    it  { should_not be_valid }
end

describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
end

describe "when password confirmation is nil" do 
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
end

describe "return value of authenticate method" do
    before { @user.save } 
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
        it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
        let(:user_for_invalid_password) { 
found_user.authenticate("invalid") }

        it { should_not == user_for_invalid_password }
        specify { user_for_invalid_password.should be_false }
    end
end

describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_valid }
end

describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }    

    describe "with valid password" do
        it { should == found_user.authenticate(@user.email) }
    end

    describe "with invalid password" do
        let(:user_for_invalid_password) { 
found_user.authenticate("invalid") }

        it { should_not == user_for_invalid_password }
        specify { user_for_invalid_password.should be_false }
    end
end
end

 My user.rb model:

   class User < ActiveRecord::Base
   attr_accessible :email, :name, :password, :password_confirmation
   has_secure_password

   before_save { |user| user.email = email.downcase }

   validates :name,  presence: true, length: { maximum: 50 }
   VALID_EMAIL_REGEX = /\A[w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
   validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }, uniqueness: 
   { case_sensitive: false }
   validates :password, presence: true, length: { minimum: 6 }
   validates :password_confirmation, presence: true

  end 
```

请任何人帮助！我已经在这个问题上坚持了大约两个星期，但仍然不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:01:04.227

我认为它是您的 VALID_EMAIL_REGEX 区域

你有：

```
VALID_EMAIL_REGEX = /\A[w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i 
```

Github 有：

```
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i 
```

[https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/models/user.rb](https://github.com/railstutorial/sample_app_2nd_ed/blob/master/app/models/user.rb)

从评论中编辑——如果我是你，我会从 github 复制相关位，或者至少比较有错误的位。

来自 github：

```
describe "with a password that's too short" do
  before { @user.password = @user.password_confirmation = "a" * 5 }
  it { should be_invalid }
end 
```

从您的应用程序

```
describe "with a password that's too short" do
  before { @user.password = @user.password_confirmation = "a" * 5 }
  it { should be_valid }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T19:51:39.503

还要检查您是否已正确初始化@user，在第 6 章末尾，在 user_spec.rb 中，初始化应该如下所示，

在做之前

```
 @user = User.new(name: "Example User", email: "user@example.com",password: "foobar", password_confirmation: "foobar")
  end 
```

请注意，应传递所有必需的用户属性（在本例中为 name、email、password 和 password_confirmation）

# web-crawler - 使用 Jena 库的 Java 中链接数据的 Web 爬虫

> ID：12570936
> 
> 赞同：1
> 
> 时间：2012-09-24T18:42:23.917
> 
> 标签：web-crawler, rdf, semantic-web, linked-data

我必须实现一个访问 Web 上的链接数据的 Web Cralwer。我为此构建了一个简单的功能。我对此有三个疑问：

1.  我应该使用什么种子 URI。以 RDF 格式提供数据并遵循 Tim Berners Lee[链接数据原则](http://www.w3.org/DesignIssues/LinkedData.html)的网站？
2.  一般来说，Web-Cralwers 的基于回合的方法是什么意思？我阅读了有关一般网络爬虫的信息，发现应该遵循基于循环的方法。
3.  我只能解析可以返回 RDF/XML 数据的网页。是否足以抓取链接数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T22:25:08.097

1.  有几个选项，例如使用在[Billion Triples Challenge 转储](http://km.aifb.kit.edu/projects/btc-2012/)中找到的所有 URI作为起点，或者[使用 Data Hub 上 lodcloud 组中](http://thedatahub.org/group/lodcloud)列出的所有资源（可以通过[CKAN API](http://wiki.ckan.org/API)检索）。
2.  对不起，我不知道。
3.  不，RDF/XML 是不够的，因为许多作为链接数据发布的数据集使用其他格式。您还需要[Turtle](http://www.w3.org/TR/turtle/)和[RDFa](http://www.w3.org/TR/xhtml-rdfa-primer/)。您可以使用[Apache Any23](http://any23.apache.org/)，它了解以上所有内容。[LDSpider](http://code.google.com/p/ldspider/)是一个使用 Any23 的爬虫。

# python - Python：TypeError：不能将序列乘以“浮点”类型的非整数

> ID：12570937
> 
> 赞同：11
> 
> 时间：2012-09-24T18:42:26.463
> 
> 标签：python

我是新手程序员，试图制作一个解析 xml 并将其内容粘贴到频道的 irc 机器人。通常我在谷歌上找到我的答案，但这次我找不到我的答案。

```
q0tag = dom.getElementsByTagName('hit')[0].toxml()
q0 = q0tag.replace('<hit>','').replace('</hit>','')

q1 = (q0 * 1.2) 
```

当我试图乘以 q0 它总是显示

```
TypeError: can't multiply sequence by non-int of type 'float'. 
```

我试图使 q0 int 或 float 但它只会犯另一个错误

```
AttributeError: 'NoneType' object has no attribute 'replace' 
```

q0 值是一个没有小数的整数。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-24T18:45:02.063

您的 q0 值仍然是一个字符串。这基本上就是你正在做的事情：

```
>>> q0 = '3'
>>> q1 = (q0 * 1.2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't multiply sequence by non-int of type 'float' 
```

要修复它，请先将字符串转换为数字：

```
>>> q1 = (float(q0) * 1.2)
>>> q1
3.5999999999999996 
```

您可能还想查看用于解析 XML的[lxml](http://lxml.de/)和[BeautifulSoup模块。](http://www.crummy.com/software/BeautifulSoup/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:49:33.120

`Toxml()`产生字符串（参见例如[http://docs.python.org/library/xml.dom.minidom.html](http://docs.python.org/library/xml.dom.minidom.html)）。`Replace`也产生一个字符串，所以`q0`是一个字符串。

# java - 从 AppleScript 访问 Java 应用程序中的本机窗口？

> ID：12570939
> 
> 赞同：1
> 
> 时间：2012-09-24T18:42:30.720
> 
> 标签：java, macos, applescript, osx-mountain-lion

我有一些基于 Java 的应用程序似乎在使用（在某种程度上）本机窗口，并带有熟悉的窗口管理按钮甚至全屏模式按钮。但是，我似乎无法使用传统方式从 AppleScript 访问这些窗口。有没有办法做到这一点？

目前我有一个在本机可可应用程序上运行良好的现有脚本，但是当它尝试访问 Java 应用程序的窗口时，它没有找到任何脚本（计算窗口数将返回 0）。

以 IntelliJ IDEA 为例。我如何访问各个窗口以便对它们执行操作（比如单击最小化或全屏按钮）？

**更新：** 这是一个适用于可可应用程序的快速示例，但不适用于 Java 应用程序。在这种情况下，我收到消息“每个窗口都不理解计数消息”

```
tell application "Safari"
    activate
    set wins to count of windows
    display dialog wins
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:33:17.627

您可以告诉应用程序执行您正在尝试的操作的唯一时间是该应用程序是否是可编写苹果脚本的，例如它是否有一个applescript 字典并且该字典是否具有您需要的命令。我怀疑您的 java 应用程序是可编写脚本的，因此这种方法行不通。

你很幸运，你需要一个窗口命令，因为系统事件理解窗口命令，并且通常可以给你进程的窗口。尝试这个。只需将进程名称更改为您想要的进程，看看它是否有效。如果没有的话，applescript 就没有什么可以帮助你的了。

```
tell application "System Events"
    tell process "Safari"
        set wins to count of windows
    end tell
end tell
display dialog (wins as text) 
```

仅供参考：如果您需要找到您的申请流程的名称，您可以使用它...

```
tell application "System Events" to return name of application processes 
```

# ios - tableViewHeader 子视图上的 setFrame 不起作用

> ID：12570958
> 
> 赞同：2
> 
> 时间：2012-09-24T18:43:28.940
> 
> 标签：ios, uitableview, frame

我有一个 tableViewHeader UIView，其中包含一些动态元素（确切地说是大小不同的 UILabel）。我在 IB 中设置了 UIView，将所有内容都连接起来，并尝试在 sizeToFit 之后根据我的标签大小更改框架原点。

如果我在 setFrame 调用后记录新帧，它实际上会显示更新的来源，但它们不会显示在模拟器上。标签会改变高度，但原点不会改变。

```
- (void)viewDidLoad
{
[super viewDidLoad];
CGRect frame;
CGFloat baseOffset = titleLbl.frame.origin.y;
offset = titleLbl.frame.size.height;
self.titleLbl.text = destObject.title;
self.titleLbl.font = [UIFont fontWithName:@"Avenir-Heavy" size:22];
[self.titleLbl sizeToFit];
frame = titleLbl.frame;
frame.origin.y = baseOffset;
//Get any change in size from the label
offset = titleLbl.frame.size.height - offset;

frame = imageView.frame;
frame.origin.y = frame.origin.y + offset;
self.imageView.frame = frame;

frame = photosBtn.frame;
frame.origin.y = frame.origin.y + offset;
[self.photosBtn setFrame:frame];

frame = detailLbl.frame;
frame.origin.y = frame.origin.y + offset;
self.detailLbl.frame = frame;
baseOffset = self.detailLbl.frame.origin.y;
CGFloat detailOffset = self.detailLbl.frame.size.height;
self.detailLbl.text = destObject.description;
[self.detailLbl sizeToFit];
frame = detailLbl.frame;
frame.origin.y = baseOffset;
self.detailLbl.frame = frame;
detailOffset = self.detailLbl.frame.size.height - detailOffset;
offset = offset + detailOffset;

frame = blueLine.frame;
frame.origin.y = frame.origin.y + offset;
self.blueLine.frame = frame;

self.whereToDiveLbl.font = [UIFont fontWithName:@"Avenir-Heavy" size:22];
frame = whereToDiveLbl.frame;
frame.origin.y = frame.origin.y + offset;
self.whereToDiveLbl.frame = frame;

frame = grayLine.frame;
frame.origin.y = frame.origin.y + offset;
self.grayLine.frame = frame;

frame = CGRectMake(headerView.frame.origin.x, headerView.frame.origin.y, headerView.frame.size.width, grayLine.frame.size.height + grayLine.frame.origin.y + 5);
self.headerView.frame = frame;
} 
```

我试过四处寻找类似的问题，但找不到任何问题。任何人都可以对此有所了解吗？

我应该指出 UIView 本身（即本例中的 headerView）确实反映了模拟器上对其框架的更改，但它的子视图没有。如果它有任何区别，我启用了自动调整子视图，但我启用或禁用了相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:31:08.290

我发现我在 IB 中的 UIView 在身份和类型下检查了“使用自动布局”...取消选择这解决了我的问题。

# php - 如何截取 FORM 结果

> ID：12570967
> 
> 赞同：0
> 
> 时间：2012-09-24T18:44:11.940
> 
> 标签：php, javascript, ajax, codeigniter

我需要在外部网站上远程提交/处理表单并将结果返回到我的网站上。用户无法意识到这种交互。

我能够使用 HTML PHP/Simple_Html_Dom 获取数据

```
<?php
require "DOM/simple_html_dom.php";

$html = file_get_html('website.com/pricing');
foreach ($html->find('div[id=Price]') as $result)
{
    echo $result->innertext;
}

?> 
```

它正在返回，PRICE 为 N/A。我需要能够传递字段的值。我希望将它们作为隐藏值传递，例如`<input type="hidden" name="QTY" value="100" />`

什么是正确的语法和/或我如何完成这项任务？

我试过了：

```
$html->load('<html><body
<form action="website.com/..." method="post" name="Pricing" > 
#all hidden fields & values
</form></body></html>') 
```

有任何想法吗？谢谢您的帮助。理想情况下，我正在尝试在我的页面上重新创建表单并使用 AJAX 实时获取查询结果。

--更多数据--此页面正在使用会话：（这对 POST 有何影响？）

```
{
"headers": {
"Date": "Mon, 24 Sep 2012 19:23:58 GMT",
"Server": "Apache",
"Set-Cookie": "JSESSIONID=01987F6C188624B08885FE26644300DA.worker2; Path=/g",
"Cache-Control": "no-cache",
"Pragma": "no-cache",
"P3P": "CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"",
"Vary": "Accept-Encoding",
"Connection": "close",
"Transfer-Encoding": "chunked",
"Content-Type": "text/html;charset=UTF-8"
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:29:25.020

您不能访问或修改来自另一个域的通过 AJAX 传入的数据。此类请求具有[相同的域策略](http://en.wikipedia.org/wiki/Same_origin_policy)，因此可以防止各种类型的黑客攻击（例如嗅探某人的浏览器以获取其银行帐户详细信息）。

如果您无法控制有问题的页面，那么（正如您的研究建议的那样）您可以选择[PHP Proxy](http://merchantos.com/makebeta/php/scraping-links-with-php)。但是，这样做的缺点是无法处理 JavaScript 本身，从而使远程表单中的所有动态字段对您的 PHP 脚本不可见。

关于 cookie，cURL 应自动为您处理 cookie。查看[curl_setopt() 手册](http://us.php.net/manual/en/function.curl-setopt.php)以获取有关 cURL 设置的信息。

# jquery - PrimeFaces selectOneMenu 未禁用

> ID：12570975
> 
> 赞同：0
> 
> 时间：2012-09-24T18:44:43.627
> 
> 标签：jquery, jsf, primefaces, selectonemenu

我有一个 selectOneMenu 并试图在页面加载时禁用。我有几个其他 inputText 元素在触发 onLoad 时会被禁用。在网上搜索时，我确实发现了一些关于这个主题的其他问题，但没有答案。任何人都知道这是否是一个已知问题，或者是否有办法让 selectOneMenu 被禁用/启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:56:43.993

INMO 无法以您所描述的 ( `$j(PrimeFaces.escapeClientId('question')).attr('disabled',true);`) 方式查看其呈现的内容.... 可能是某种复杂的表格...

如果您需要在页面加载时禁用它，只需使用该`disabled`属性...如果您稍后需要从客户端禁用它，请使用[primeface blockUI](http://www.primefaces.org/showcase-labs/ui/blockUI.jsf)

# c# - 图像未在运行时显示

> ID：12570978
> 
> 赞同：2
> 
> 时间：2012-09-24T18:44:59.897
> 
> 标签：c#, asp.net

我正在尝试显示在项目目录下创建的文件夹中的图像，名称为 Images。

我正在尝试访问`star.gif`Images 文件夹中的内容。

这是我用于访问图像的一小段代码

```
TableCell tc=new TableCell();                  

for (int j = 0; j < i; j++)
{

    System.Web.UI.WebControls.Image rating = new System.Web.UI.WebControls.Image();
    rating.ImageUrl = Server.MapPath("~/Images/star.gif");
    rating.ID = j.ToString();
    rating.AlternateText = "No image";

    tc.Controls.Add(rating);
} 
```

我什至设置了授权，`web.config`但它没有用。

请告诉我在代码中的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T18:50:01.697

只需删除[**Server.MapPath**](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)。此调用将返回**服务器上的物理位置**，*客户端无法访问该*位置！

**MSDN 服务器.MapPath**

> MapPath 方法将指定的相对或虚拟路径映射到服务器上相应的物理目录。

**新代码**

```
TableCell tc=new TableCell();  
for (int j = 0; j < i; j++)
{
    System.Web.UI.WebControls.Image rating = new  System.Web.UI.WebControls.Image();
    rating.ImageUrl = "~/Images/star.gif"; // no need for Server.MapPath
    rating.ID = j.ToString();
    rating.AlternateText = "No image";
    tc.Controls.Add(rating);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:51:23.197

`Server.MapPath`将返回服务器上的本地路径，例如`C:\Images\star.gif`. 您的浏览器将无法解析该网址。

只需使用相对网址：

```
rating.ImageUrl = "~/Images/star.gif"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T18:49:00.903

尝试添加 runat 属性以便它从根目录解析？

```
rating.Attributes.Add("runat", "server");
rating.ImageUrl = "~/Images/star.gif"; 
```

# c++ - 如何从 C++ 中的标准堆中删除任意元素？

> ID：12570981
> 
> 赞同：7
> 
> 时间：2012-09-24T18:45:09.593
> 
> 标签：c++, heap

我有一些代码可以不断地从堆中提取最大值对象并对其进行处理。但是，在处理最大值期间，堆中的其他对象会受到影响，可能需要被删除。大致：

```
vector<HeapEntry*> myHeap = vector<HeapEntry*>();
fillHeap(myHeap, someData);
make_heap(myHeap.begin(), myHeap.end());
while (!myHeap.empty())
{
    HeapEntry* hp = myHeap.front();
    HeapEntry* neighbor = hp->getNeighbor();
    if (someCondition)
    {
        remove(myHeap, neighbor);
    }
    //more processing of hp
} 
```

和删除功能：

```
void remove(vector<HeapEntry*> myHeap, HeapEntry* toRemove)
{
    for (it = myHeap.begin(); it != myHeap.end(); it++)
    {
        if (*it == hp)
        {
            myHeap.erase(it);
            break;
        }
    }
    make_heap(myHeap.begin(), myHeap.end());
} 
```

这运行并给出正确的输出。但它非常慢：处理一个 40kb 的文件需要 2 分钟（堆的大小与文件的大小成线性关系）。无论如何，它需要更有效率。

remove 函数最终会被调用大约 n 次，其中 n 是堆的大小。因此，进行线性搜索会使整个算法变为 O(n^2)。我认为这就是问题所在，我相信这可以在 O(n*log(n)) 中运行。

我的目标是在 O(log(n)) 时间内完成删除功能。就像是：

*   直接进入目标元素
*   用最后一个元素切换它
*   pop_heap(myHeap.begin(), myHeap.end()); myHeap.pop_back();
*   make_heap(myHeap.begin(), myHeap.end());

我不太确定如何实现这一点（我对 stl 堆几乎不熟悉）。有谁知道如何在不进行线性搜索的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:36:01.707

简单的方法是**不要**删除您认为要删除的元素。相反，您将维护一个优先级队列来确定下一个最大元素和一个`std::set<HeapEntry*>`已删除元素。获取最大元素时，您检查它是否在已删除元素的集合中，然后将其从堆中删除，然后尝试下一个元素。根据可能删除的元素的数量，您可能还希望在从堆中删除元素时从已删除元素集中删除该元素。

您只需将它们添加到已删除元素的集合中，而不是从堆中删除元素。这样，堆元素仍然保持对数，并且您可能对元素集进行多达 O(n log n) 的操作。

另一种选择是使用基于节点的优先级队列来有效地找到节点在堆中的位置。例如，Boost 提供了一个斐波那契堆作为 Boost Graph Library 的一部分。您可以在那里跟踪元素的位置。然而，基于节点的堆在实际问题大小上往往执行较慢，因为它们在重新排列元素时会产生开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:42:56.330

感谢你的回复。我决定采用一种实际上在 HeapEntries 不再有效时删除它们的方法。实际上，我尝试向 HeapEntry 添加一个有效标志，我认为如果不是因为我已经修复了一些其他错误，这会起作用。无论如何，这就是我最终解决它的方式。

重申一下，我需要能够从堆中删除一个元素，只需一个指向该元素的指针。问题是，指针没有告诉我任何关于*位置的信息*堆中的元素。因此，我决定存储位置，在元素移动时保持更新，并编写一个函数从给定位置的堆中删除。简单来说，堆存储为数组，元素的位置定义了父子关系。元素的父元素应位于位置 floor((myPos - 1) / 2)，其子元素应位于位置 2*myPos+1 和 2*myPos+2。我意识到我可以编写一个 remove(position) 函数，并且在交换元素以维护堆属性的同时，也可以交换它们存储的位置。这是结果的链接，它将执行速度提高了 5 或 10 倍：

[https://github.com/yankrasny/CC-Heap-with-random-delete](https://github.com/yankrasny/CC-Heap-with-random-delete)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T18:55:42.313

The stl philosophy is to reflect on your algorithm first, and then choose your data structure. Your're doing it the other way around.

If you plan to remove elements from your data structure in a 'random' order, you're probably better with a `priority_queue` or even a linked `list`. (Be careful, though: iterators may be invalidated after removing from some stl containers).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-13T06:25:24.100

我已经晚了将近 7 年，但希望它能对其他人有所帮助。上面已经讨论了一些不错的选择，我想再添加一个。

如果您使用平衡的 BST（即`set<HeapEntry*>`），您可以在 O(log n) 中找到最大值并删除一个元素。这将使你的整个算法 O(n log n)。

注意 1：如果您有重复项，请`multiset`改为使用并删除使用`<ms>.erase(<ms>.find(<obj>))`以仅删除一次出现的`<obj>`. `<ms>.erase(<obj>)`删除所有出现的`<obj>`.

注意 2：使用以下事实可以使 find max 变为 O(1)：如果删除了一个元素，则所有迭代器、指针和对其他元素的引用仍然有效（[source](http://www.cplusplus.com/reference/set/set/erase/)）。如果需要，您将迭代器缓存到最大元素并为每次插入或删除更新它。

# ios - 使用 CFDictionary 跟踪 UITouch

> ID：12570987
> 
> 赞同：1
> 
> 时间：2012-09-24T18:45:39.230
> 
> 标签：ios

我正在寻找一些示例代码来使用 CFDictionary 跟踪 UITouches。不幸的是，apple-docs 没有完整的示例。

[http://developer.apple.com/library/IOs/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html#//apple_ref/doc/uid/TP40009541-CH3-SW7](http://developer.apple.com/library/IOs/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/MultitouchEvents/MultitouchEvents.html#//apple_ref/doc/uid/TP40009541-CH3-SW7)

我目前正在使用 NSMutable 数组，但我想存储完整的 UITouch 对象，以便获取时间戳。

```
NSMutableArray *touchArray_val;

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    touchArray_val = [[NSMutableArray alloc] init];             
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{ 

     for(UITouch *t in touches){
         CGPoint currentPoint = [t locationInView:self];
         [touchArray_val addObject:[NSValue valueWithCGPoint: currentPoint]];    
     }

}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{        
    NSLog(@"%i",[touchArray count]);

    for(NSValue *val in touchArray_val){        
        NSLog(@"%@",val);      
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:21:55.117

UITouch 的指针在触摸的整个生命周期内不会改变。您可以从指针创建一个 NSValue。

```
 // NSMutableDictionary * touchLookup; set up somewhere else...
 NSValue * key = [NSValue valueWithPointer:touch];
 [touchLookup setObject:touch forKey:key]; 
```

# java - 我的 Java 代码上的访问限制错误

> ID：12570992
> 
> 赞同：5
> 
> 时间：2012-09-24T18:46:06.350
> 
> 标签：java

我正在尝试从我的网络摄像头捕获图像，但我的`saveJPG`方法出现错误。

**错误：**

```
Multiple markers at this line
    - Access restriction: The type JPEGCodec is not accessible due to restriction on required library C:\Program Files\Java\jre7\lib\rt.jar
    - Access restriction: The method createJPEGEncoder(OutputStream) from the type JPEGCodec is not accessible due to restriction on required library C:
     \Program Files\Java\jre7\lib\rt.jar
    - Access restriction: The type JPEGImageEncoder is not accessible due to restriction on required library C:\Program Files\Java\jre7\lib\rt.jar 
```

此错误发生在我的`saveJPG`方法中

```
JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bi);  
param.setQuality(0.5f,false);   
encoder.setJPEGEncodeParam(param); 
```

**代码：**

```
JButton startC = new JButton("Capturar");
    startC.setPreferredSize(new Dimension(100,22));

    startC.addActionListener(new ActionListener()
            {

                @Override
                public void actionPerformed(ActionEvent e)
                {                   
                      // Grab a frame   
                      FrameGrabbingControl fgc = (FrameGrabbingControl) 
                      player.getControl("javax.media.control.FrameGrabbingControl");    
                      buf = fgc.grabFrame();       

                      // Convert it to an image 
                      btoi = new BufferToImage((VideoFormat)buf.getFormat());   
                      img = btoi.createImage(buf);       

                      // show the image 
                      //imgpanel.setImage(img);       

                      // save image 
                      saveJPG(img,"c:\\test.jpg");
                }
            });     

    public static void saveJPG(Image img, String s) 
          { 
            BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null), BufferedImage.TYPE_INT_RGB);  
            Graphics2D g2 = bi.createGraphics();    
            g2.drawImage(img, null, null);  
            FileOutputStream out = null;

            try 
            {   
              out = new FileOutputStream(s);    
            }   
            catch (java.io.FileNotFoundException io)    
            {   
              System.out.println("File Not Found"); 
            }   

            JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);

            JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bi);  
            param.setQuality(0.5f,false);   
            encoder.setJPEGEncodeParam(param);     

            try 
            {   
              encoder.encode(bi);   
              out.close();  
            }   
            catch (java.io.IOException io)  
            {   
              System.out.println("IOException");    
            }
          } 
```

**进口：**

```
import static com.googlecode.javacv.jna.highgui.cvCreateCameraCapture;
import static com.googlecode.javacv.jna.highgui.cvGrabFrame;
import static com.googlecode.javacv.jna.highgui.cvReleaseCapture;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.FrameGrabber;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.zip.ZipEntry;
import java.util.zip.ZipFile;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JComponent;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import com.colorfulwolf.webcamapplet.gui.LabelPanel;
import com.colorfulwolf.webcamapplet.gui.LoadingScreen;
import com.googlecode.javacv.jna.highgui.CvCapture;
import java.awt.BorderLayout;
import javax.media.*;
import javax.media.protocol.*;
import javax.media.util.BufferToImage;
import javax.swing.*;
import java.awt.*;
import java.util.*;
import javax.media.control.*;
import javax.media.format.*;
import com.sun.image.codec.jpeg.*; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T19:16:19.687

Eclipse Java 编译器试图阻止您使用非公共 API。在经典 Java 中，可见性概念是相当原始的，因此库设计者经常不得不放入仅为内部使用而创建的公共空间类。对于 OSGi 等更进化的框架，情况并非如此。

如果你仍然想访问这个类，你可以按照[这篇博文中的](http://notepad2.blogspot.com.es/2011/05/eclipse-access-restriction-method.html)描述进行。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-06T05:48:06.227

通过遵循以下建议，我能够摆脱此错误：

1.  打开项目属性。
2.  选择 Java 构建路径节点。
3.  选择库选项卡。
4.  删除 JRE 系统库。
5.  添加库 JRE 系统库。

# javascript - 如何将多个 PDF 文件从 RESTful 服务返回到 Javascript 客户端？

> ID：12570994
> 
> 赞同：0
> 
> 时间：2012-09-24T18:46:16.213
> 
> 标签：javascript, jquery, json, pdf, jax-ws

有谁知道如何将单个对象中的一系列 PDF 文件从 RESTful WebService 返回到 Javascript 客户端？

我尝试在 JSON 对象中将 PDF 作为字节数组返回，但这似乎不起作用，或者我对 JS 端的字节数组做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:56:23.597

First you need encode your binary files( your pdf files). The base 64 encoding is designed to make binary data survive transport through transport layers that are not 8-bit clean.

I would suggest you to create a function to return one document and return a json object with some of the attributes of the file( name, extension, date,...etc.., content) and in the content field of the json object, just put the base64 string that you obtained from applying the base64 enconding function to the pdf file. In this way you can (in the client side) decode this string and get the original file without any problem.

Base64-encoded data takes about 33% more space than the original data.

Because of this I suggest you to return only one document on each call to the RESTful web service. Becasue a pdf file can be small, but it can also be huge, and combining several documents on the response json object could make your transfer very heavy. But this is up to you.

# iphone - UITableView 粘页脚/自定义工具栏实现

> ID：12570996
> 
> 赞同：0
> 
> 时间：2012-09-24T18:46:22.810
> 
> 标签：iphone, ios, delegates, uitableview

我正在使用`UITableViewController`，我想做的是在`UIView`.

我已经尝试启用`navigationController`（下面的代码）的工具栏，但它似乎无法正常工作。`UITextField`不会调用代表，并且文本字段的按键不会显示在文本字段本身中。

使用这样的工具栏不是我的第一选择，我希望在我的 UITableViewController 下有我的自定义视图，我可以在其中放置我的项目，它就像一个 UIToolbar。（保留为 UIView 页脚）

**代码：**

```
 self.navigationController.toolbarHidden = NO;
    // create toolbar objects
    UITextField *inputField = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 230, 31)];
    inputField.backgroundColor = [UIColor clearColor];
    inputField.borderStyle = UITextBorderStyleRoundedRect;
    inputField.inputAccessoryView = self.navigationController.toolbar;
    inputField.returnKeyType = UIReturnKeyDone;
    inputField.delegate = self;

    UIButton *sendButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 50, 30)];
    sendButton.titleLabel.text = @"Send";
    sendButton.backgroundColor = [UIColor greenColor];

    // add objects into navigation controller
    self.toolbarItems = [NSArray arrayWithObjects:
                         [[UIBarButtonItem alloc] initWithCustomView:inputField],
                         [[UIBarButtonItem alloc] initWithCustomView:sendButton], nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T19:55:51.993

与为您的实现子类化不同`UITableViewController`，您可能会发现将一个普通的子类化`UIViewController`并添加一个更容易`UITableView`。这将使您在自定义布局方面具有更大的灵活性。

基本上步骤是：

1.  让你的类继承自 UIViewController（而不是 UITableViewController）
2.  让你的班级实现 UITableViewDelegate 和 UITableViewDataSource 协议
3.  在您的类中实现 UITableViewDelegate 和 UITableViewDataSource 方法（例如 cellForRowAtIndexPath:、didSelectRowAtIndexPath: 等）
4.  在 IB 中，将 UITableView 作为子视图添加到视图控制器的视图中
5.  将刚刚添加的表视图的委托和数据源属性设置为视图控制器类
6.  调整 UITableView 的框架大小以在底部为 inputField 和按钮留出空间

这样，您可以将 inputField 和按钮添加到 viewController 的视图（在底部），并且它们不会滚动，因为它们与 tableview 是分开的。

# c++ - 跨平台 C++ 项目的 SVN 存储库结构

> ID：12570997
> 
> 赞同：0
> 
> 时间：2012-09-24T18:46:24.053
> 
> 标签：c++, svn, version-control, cross-platform

我们第一次致力于跨平台项目。

两个平台的源代码显然是相同的，但是我们不确定如何处理项目的配置（VS 解决方案、Unix makefile 等）。

我很想听听在类似情况下工作过的人的来信。我们计划让一名开发人员关注 Windows，另一名关注 Unix（稍后是 Mac ;-)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:50:46.367

我在一个非常大的跨平台 C++ 项目集中使用 SVN。我将 Makefiles 和 VS 项目放在包含源代码的文件夹中，并修改输出目录以构建到相对于主干线的 Binaries 文件夹中（即在与源/项目不同的树中）。在您开发时，VS 会输出一些奇怪的东西，最终会出现在源代码树中，但您可以使用 SVN 忽略它们。效果相当好。