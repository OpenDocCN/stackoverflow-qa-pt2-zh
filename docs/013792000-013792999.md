# StackOverflow 问答 13792000-13792999

# c++ - 为模板类制作makefile

> ID：13792001
> 
> 赞同：5
> 
> 时间：2012-12-09T21:25:30.323
> 
> 标签：c++, templates, makefile

所以我有几个文件要一起编译。其中之一是包含 stack.cpp 的 stack.h。

以下是我的头文件：

```
#include<iostream>
#ifndef STACK_H
#define STACK_H 
template <class ItemType>
class StackType
{
public:
    //code

private:
    //code   
};
#include "stack.cpp"
#endif 
```

以下是stack.cpp：

```
#include "stack.h"
#include <iostream>
using namespace std;

template<class ItemType>
StackType<ItemType>::StackType(){
    top = -1;
    MAX_ITEMS = 200;
}

//other codes
} 
```

当我说我正在重新定义 stack.cpp 中的代码时

以下是我的 Makefile：

```
main.o: main.cpp stack.h
    g++ $(CFLAGS) -c -o main.o main.cpp
stack.o: stack.cpp stack.h
    g++ $(CFLAGS) -c -o stack.o stack.cpp 
```

我不明白问题是什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-09T21:27:19.623

您不应尝试编译`stack.o`. 这是模板代码，需要包含在客户端代码中，无法构建。只需将`stack.cpp`依赖项添加到`main.o`规则中（假设 main.cpp 包含`stack.h`，然后删除`stack.o`规则：

```
main.o: main.cpp stack.h stack.cpp
    g++ $(CFLAGS) -c -o main.o main.cpp 
```

您还有一个问题，那就是您包含`stack.h`in `stack.cpp`，反之亦然。您应该删除`#include stack.h`from `stack.cpp`。

由于模板代码不应该自己编译，我建议将后缀更改`stack.cpp`为其他内容，例如`.icpp`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:30:13.890

分离接口和实现的想法，即使是模板，也是一个值得尊重的立场。我是否可以建议您不要将模板实现文件称为 .cpp 文件。Boost 在这种情况下使用 ipp，这对我来说似乎是合理的。

您在包含它时做了正确的事情，只是在编译它时做了错误的事情...... .cpp 表明您应该这样做。

# ruby-on-rails - Hartl Rails 书籍章节快照

> ID：13792009
> 
> 赞同：1
> 
> 时间：2012-12-09T21:25:56.330
> 
> 标签：ruby-on-rails, snapshot, railstutorial.org

我正在阅读[Micahel Hartl 的 Ruby on Rails 教程书](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)，我匆匆通过第 5 章到第 6 章。我在某个地方犯了一个错误，然后尝试通过编辑更多文件来解决错误，提交错误的更改，现在我一团糟。

有人有第 6 章开头的书应该在哪里的快照目录，所以我可以从那里重新开始吗？我可以从第 1 章中复制/粘贴到那里，但这正是第 5 章给我带来麻烦的原因。

我想一种恢复到任何章节开头的方法是最好的答案，这样在不同章节中遇到相同问题的人就可以重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:41:12.650

如上所述，您应该返回并找出问题所在 - 如果您确实按照建议使用了 git，那么您应该能够“回滚”到以前的提交并取回您的代码。去做这个：

```
git log 
```

这将向您显示所做的提交列表 - 您将看到如下内容：

```
commit 89915b4cc0810a9c9e67b3706a2850c58120cf75
Author: Tom Smith <suppressed>
Date:   Wed Aug 18 20:15:01 2010 -0300

Added a proper layout. 
```

然后，您可以使用以下命令恢复到“工作”版本：

```
git reset --hard 89915b4cc0810a9c9e67b3706a2850c58120cf75 
```

或者

```
git rm -r .
git checkout 89915b4cc0810a9c9e67b3706a2850c58120cf75 
```

您现在回到了有效的提交，并且可以使用工作文件继续本教程。

# google-apps-script - EmbeddedChart 和 Adwords 脚本

> ID：13792017
> 
> 赞同：4
> 
> 时间：2012-12-09T21:26:52.603
> 
> 标签：google-apps-script, google-sheets, google-ads-api

我正在尝试使用 Adwords 脚本（来自 Adwords 平台）在 Google 电子表格中创建图表。我使用此代码制作图表：

```
var range2 = sheet.getRange("A1:C7");
ssNew.setActiveRange(range2);

var chart = sheet.newChart()
    .setPosition(5, 6, 5, 5)
    .setChartType(Charts.ChartType.COLUMN)
    .addRange(sheet.getActiveRange())
    .build();
sheet.insertChart(chart); 
```

此代码在我从脚本编辑器运行时有效，但在我从 Adwords 脚本运行时无效。发生错误：

> ReferenceError：未定义“图表”。（第 XX 行）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T01:29:52.133

图表服务是 Google Apps 脚本的一部分，当您在“脚本编辑器”中运行代码时，您可以访问该服务提供的所有服务。

Adwords IDE 看起来很相似，但无法访问这些服务。这就是您看到错误的原因 - 没有可以包含的 javascript 库让您可以通过 Apps 脚本服务直接访问您的电子表格。

但是，您可以通过其[SpreadsheetApp 界面](https://developers.google.com/apps-script/service_spreadsheet)将电子表格用作 Adwords 脚本的数据源，这样您就可以在 Adwords 的电子表格图表中写入您想要的数据。当然，图表本身将在电子表格中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T20:25:21.857

似乎图表现已添加到 AdWords 脚本中，再试一次！

# linker - 如何在 NS3 中使用 yaml-cpp

> ID：13792022
> 
> 赞同：1
> 
> 时间：2012-12-09T21:27:02.670
> 
> 标签：linker, build-automation, waf, ns-3

有谁知道如何在 NS3 模块中使用 yaml-cpp 库？

我已经完成了源代码，但是我很难弄清楚如何链接它，因为它在`undefined reference to`使用 waf 构建时出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:52:12.957

要使用 yaml-cpp，您只需编写如下内容：

```
def options(opt):
    opt.load("cxx_compiler")

def configure(conf):
    conf.load("cxx_compiler")
    conf.check_cfg(package = "yaml-cpp", args = ["--cflags",  "--libs", ], uselib_store = "YAMLCPP")

def build(bld):
    bld.program(source = "main.cpp", use = "YAMLCPP") 
```

waf 使用 pkg-config 获取所有选项。main 是使用 yaml-cpp 的源文件。

# macos - 检测何时单击链接 WebView (Mac)

> ID：13792023
> 
> 赞同：4
> 
> 时间：2012-12-09T21:27:11.933
> 
> 标签：macos, webview, delegates

我试图检测何时单击 WebView 中的链接。我将代表设置为

```
[_WebCont delete:self];
_WebCont.policyDelegate = self; 
```

和

```
WebPolicyDecisionListener 
```

我用这个作为我的听众：

```
- (void)_WebCont:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request frame:(WebFrame *)frame decisionListener:(id<WebPolicyDecisionListener>)listener {
    NSString *url = request.URL.absoluteString;
    url = [NSString stringWithFormat:@"*load %@",url];
    [self sendMessage:url];
    NSLog([NSString stringWithFormat:@"Click: %@",url]);

} 
```

但是，当我单击视图中的链接时，它永远不会记录任何内容。解决这个问题有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T06:19:03.987

要实现策略侦听器，您需要执行以下操作：

WebPolicyDecisionListener.h：

```
// ...
@interface WebPolicyDecisionListener: NSObject {
// ...
}

// Implement PolicyDelegate
-(void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation
                                                          request:(NSURLRequest *)request
                                                            frame:(WebFrame *)frame
                                                 decisionListener:(id<WebPolicyDecisionListener>)listener;

-(void)webView:(WebView *)webView decidePolicyForNewWindowAction:(NSDictionary *)actionInformation
                                                         request:(NSURLRequest *)request
                                                    newFrameName:(NSString *)frameName
                                                decisionListener:(id <WebPolicyDecisionListener>)listener;
// ...
@end 
```

WebPolicyDecisionListener.m

```
@implementation WebPolicyDecisionListener
// ...
- (void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation
                                                           request:(NSURLRequest *)request
                                                             frame:(WebFrame *)frame
                                                  decisionListener:(id<WebPolicyDecisionListener>)listener
{
  if (WebNavigationTypeLinkClicked == [[actionInformation objectForKey:WebActionNavigationTypeKey] intValue])
  {
    // link was clicked do something with it...
  }
  [listener use]; // Say for webview to do it work...
}

-(void)webView:(WebView *)webView decidePolicyForNewWindowAction:(NSDictionary *)actionInformation
                                                         request:(NSURLRequest *)request
                                                    newFrameName:(NSString *)frameName
                                                decisionListener:(id <WebPolicyDecisionListener>)listener
{
  if (WebNavigationTypeLinkClicked == [[actionInformation objectForKey:WebActionNavigationTypeKey] intValue])
  {
    // link was clicked and webview want to open it in new window do something with it...
  }
  [listener ignore]; // ignore webview default implementation...
}
// ...
@end 
```

在你的代码中的某个地方是这样的：

```
WebPolicyDecisionListener* listener = [[WebPolicyDecisionListener alloc] init];
// ...
[_WebCont setPolicyDelegate:listener]; 
```

# magento - Magento 产品加载事件

> ID：13792028
> 
> 赞同：1
> 
> 时间：2012-12-09T21:27:35.323
> 
> 标签：magento

每当加载产品时，是否有一个事件会触发，无论是单独加载还是作为集合的一部分？

我需要保证无论何时何地加载产品模型，我都可以访问该事件以附加其他对象。无论是前端还是管理员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:14:19.557

`Mage_Catalog_Model_Product::load()`将导致发射`catalog_product_load_before`和`catalog_product_load_after`。

`Mage_Catalog_Model_Resource_Product_Collection::load()`将导致发射`catalog_product_collection_load_before`和`catalog_product_collection_load_after`。

# java - RMI ConnectException：连接被拒绝，非常奇怪的行为

> ID：13792029
> 
> 赞同：1
> 
> 时间：2012-12-09T21:27:41.823
> 
> 标签：java, rmi

我知道这个问题已经被问过好几次了，但我还没有找到适合我的答案。基本上我已经用 RMI 实现了一个客户端/服务器解决方案。我唯一的问题是与服务器的连接有时非常慢。

当服务器启动并且客户端第一次连接时，它需要几秒钟才能连接（有时它甚至不连接而是得到 ConnectException），之后我会在尝试与服务器。更令人难以置信的是，当我断开第一个失败的客户端并再次连接时，它工作得非常好。然后客户端在一秒钟内连接，所有通信都完美无缺。

我已经尝试手动启动 rmiregistry，我已经仔细检查了我的 PATH。我无法使用 telnet 连接到该端口，但是当我在该端口上玩我的 Othello 游戏（未使用 RMI）时它可以工作。值得一提的是，我在同一网络和计算机上执行此操作，因此我使用的是 localhost。

TL;DR：当我第一次连接到服务器时，它需要很长时间，但我能够连接。然后当我尝试与它崩溃的方法通信时，我收到“java.rmi.ConnectException：连接拒绝主机：192.xxx.xxx.x；嵌套异常是：java.net.ConnectException：连接超时：连接”。如果我然后关闭该客户端并尝试与另一个客户端连接，则连接大约需要一秒钟，然后一切正常。这是为什么？

客户端代码：

```
public class NetworkClient {
private Registry registry;
private IArenaServer server;

public NetworkClient(String ipAddress, int port) throws RemoteException {

    if (System.getSecurityManager() == null) {
        System.setSecurityManager(new RMISecurityManager());
    }

    try {

        registry = LocateRegistry.getRegistry(ipAddress, port);
        server = (IArenaServer)(registry.lookup("arenaServer"));
        System.out.println("Client successfully connected to server at " + ipAddress + ":" + "port");

    } catch (NotBoundException ex) {
        Logger.getLogger(NetworkClient.class.getName()).log(Level.SEVERE, null, ex);
    } catch (AccessException ex) {
        Logger.getLogger(NetworkClient.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

服务器代码：

```
public class ArenaServer extends UnicastRemoteObject implements IArenaServer {

private int port = 9029;
private String ipAddress;
private Registry registry;

public ArenaServer() throws RemoteException {

    if(System.getSecurityManager() == null){
        System.setSecurityManager(new RMISecurityManager());
    }

//  try {
        //ipAddress = (InetAddress.getLocalHost()).toString();
        registry = LocateRegistry.createRegistry(port);
        registry.rebind("arenaServer", this);

        System.out.println("Server successfully started...");
        //System.out.println("Server's IP address is: " + ipAddress);

//  } catch (UnknownHostException ex) {
//      ErrorHandler.getInstance().reportError("Cannot get IP address", "");
//  }
} 
```

第一次连接后尝试与服务器通信时得到的一般示例：

```
java.rmi.ConnectException: Connection refused to host: 192.xxx.xxx.x; nested exception is: 
java.net.ConnectException: Connection timed out: connect
at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
at sun.rmi.server.UnicastRef.invoke(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unknown Source)
at java.rmi.server.RemoteObjectInvocationHandler.invoke(Unknown Source)
at $Proxy0.getInstalledGames(Unknown Source)
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:26:22.613

这听起来像是 java.rmi.server.hostname 的一个案例。请参阅 RMI 常见问题解答中的 A.1 项，可通过 RMI 主页访问。

# ruby-on-rails - 橡胶宝石 + 每当宝石 = 错误无法加载此类文件 - 捆绑器/设置

> ID：13792030
> 
> 赞同：2
> 
> 时间：2012-12-09T21:27:43.103
> 
> 标签：ruby-on-rails, cron, whenever

我希望您对我如何拥有橡胶 cron 以及何时 cron 一起生活有建议？正如您在下面的 crontab -l 输出中看到的那样，橡胶 cron 作业想要设置 PATH 变量。这会导致每当 gem 创建的 cron 作业失败。如果我注释掉 PATH 变量，那么橡胶 cron 作业会失败，因为它们无法找到 rvm。任何帮助将不胜感激。

这是我的 crontab -l 的输出

```
# cron clears out environment variables, but Rubber.root/script/rubber uses
# "rvm do default" to run, so no longer any need to setup ruby env vars here,
# all we need is PATH
PATH=/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
# don't need to set RUBBER_ENV for each script since we set it for all cron here
RUBBER_ENV=production
RAILS_ENV=production

# Roll all rails logs at midnight
0 0 * * * /mnt/stats-production/releases/20121209201953/script/rubber cron --task util:rotate_logs --directory=/mnt/stats-production/releases/20121209201953/log
# rubber-nginx-start

# Roll the nginx logs at midnight
0 0 * * * /mnt/stats-production/releases/20121209201953/script/rubber cron --task util:rotate_logs --directory=/mnt/nginx/logs
# rubber-nginx-end

# Begin Whenever generated tasks for: stats
0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57 * * * * /bin/bash -l -c 'cd /mnt/stats-production/releases/20121209201953 && script/rails runner -e production '\''Region.queue_worker'\'''

# End Whenever generated tasks for: stats 
```

我收到的错误：

```
stdin: is not a tty
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- bundler/setup (LoadError)
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /mnt/stats-production/releases/20121209201953/config/boot.rb:6:in `<top (required)>'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from script/rails:5:in `<main>' 
```

# ruby-on-rails - 在 ERB 中添加 2 个类 - Rails

> ID：13792034
> 
> 赞同：1
> 
> 时间：2012-12-09T21:28:06.557
> 
> 标签：ruby-on-rails, ruby, erb

我想向表单中的提交按钮添加多个类。

我知道你可以通过做添加一个类，`:class => "btn"`但我如何添加 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:32:57.677

用空格分隔你的类

```
:class => "btn some other classes go crazy" 
```

# c - 如何扩展 makefile 以编写库？

> ID：13792036
> 
> 赞同：0
> 
> 时间：2012-12-09T21:28:14.410
> 
> 标签：c, compilation, makefile, static-libraries

我有一个makefile，它可以完成我想要的编译，但我也希望它可以创建一个库，而不仅仅是目标文件。

```
CC=gcc
CFLAGS=-g -Wall
DEPS = tree.h
OBJ = main.o tree.o 

%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

tree: $(OBJ)
    $(CC) -o $@ $^ $(CFLAGS)

clean:
    rm -f *.o tree 
```

现在我希望makefile是这样的：

```
gcc -Wall -g -c tree.c
ar -r libtree.a tree.o
gcc main.c -o main -ltree -L.
./main 
```

我必须在现有的 makefile 中添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:57:06.993

这应该做你想要的：

```
%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

lib%.a: %.o
    ar -r $@ $^

main: $(OBJ) $(DEPS:%.h=lib%.a)
    $(CC) -o $@ $^ $(CFLAGS) $(DEPS:%.h=-l%) -L. 
```

请注意，这只适用于 GNU Make（特别是`%`in`$(DEPS:%.h=lib%.a)`是 GNU 特定的扩展）。

# android - 接到电话后Activity重新启动

> ID：13792042
> 
> 赞同：1
> 
> 时间：2012-12-09T21:28:46.197
> 
> 标签：android

我有一个活动，它基本上是一个标签式活动，用于保持纸牌游戏的得分。

问题是，当我接到电话并回到我的应用程序时，分数就被清除了！

似乎活动已重新启动，收到了电话。为什么会发生这种情况，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:31:33.577

Android 设备内存有限，一次只能运行这么多应用程序。电话通话是移动设备硬件上最繁重的任务之一，因为音频流在内存使用方面并不是非常少。

因此，我认为您的应用程序的当前实例被杀死以释放 RAM，这会导致您失去分数。

要解决此问题，您可以将分数的值写入Activity 中的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)`onPause()` ，然后在`onResume()`.

# python - Networkx 随机几何图限制半径 r 内的节点

> ID：13792046
> 
> 赞同：3
> 
> 时间：2012-12-09T21:29:09.600
> 
> 标签：python, graph, networkx

所以我有来自networkx示例的这段代码，但我试图弄清楚如何将节点限制在半径'r'内，以便在圆的范围内绘制随机几何图。我知道我会如何在逻辑上做到这一点，但我有点困惑一切是如何运作的，并且一直试图自己解决这个问题，但到目前为止还没有解决方案。谢谢您的帮助！

```
import networkx as nx
import matplotlib.pyplot as plt

G = nx.random_geometric_graph(1000,0.1)

# position is stored as node attribute data for random_geometric_graph
pos = nx.get_node_attributes(G,'pos')

# find node near center (0.5,0.5)
dmin =1
ncenter =0
for n in pos:
    x,y = pos[n]
    d = (x-0.5)**2+(y-0.5)**2
    if d<dmin:
        ncenter = n
        dmin = d

# color by path length from node near center
p = nx.single_source_shortest_path_length(G,ncenter)

plt.figure(figsize=(8,8))
#node_color=p.values()
nx.draw_networkx_edges(G,pos,nodelist=[ncenter],alpha=0.4)
nx.draw_networkx_nodes(G,pos,nodelist=p.keys(),
                   node_size=80,
                   node_color='#0F1C95',
                   cmap=plt.cm.Reds_r)

plt.xlim(-0.05,1.05)
plt.ylim(-0.05,1.05)
plt.axis('off')
plt.savefig('random_geometric_graph.png')
plt.show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:50:05.197

您可以使用 dict 理解，例如

```
p = {node:length for node, length in nx.single_source_shortest_path_length(G,ncenter).items()
     if length < 5} 
```

将字典限制为距离`ncenter`小于 5 的节点。

对于 Python2.6 或更早版本，您可以使用

```
p = dict((node, length) for node, length in nx.single_source_shortest_path_length(G,ncenter).items()
     if length < 5) 
```

* * *

你也可以更换

```
dmin =1
ncenter =0
for n in pos:
    x,y = pos[n]
    d = (x-0.5)**2+(y-0.5)**2
    if d<dmin:
        ncenter = n
        dmin = d 
```

单线：

```
ncenter, _ = min(pos.items(), key = lambda (node, (x,y)): (x-0.5)**2+(y-0.5)**2) 
```

* * *

要仅绘制距离`ncenter`小于 5 的节点，请定义子图：

```
H = G.subgraph(p.keys())    
nx.draw_networkx_edges(H, pos, alpha = 0.4)
nx.draw_networkx_nodes(H, pos, node_size = 80, node_color = node_color,
                       cmap = plt.get_cmap('Reds_r')) 
```

* * *

```
import networkx as nx
import matplotlib.pyplot as plt
G = nx.random_geometric_graph(1000, 0.1)

# position is stored as node attribute data for random_geometric_graph
pos = nx.get_node_attributes(G, 'pos')

# find node near center (0.5,0.5)
ncenter, _ = min(pos.items(), key = lambda (node, (x, y)): (x-0.5)**2+(y-0.5)**2)

# color by path length from node near center
p = {node:length
     for node, length in nx.single_source_shortest_path_length(G, ncenter).items()
     if length < 5}

plt.figure(figsize = (8, 8))
node_color = p.values()
H = G.subgraph(p.keys())    
nx.draw_networkx_edges(H, pos, alpha = 0.4)
nx.draw_networkx_nodes(H, pos, node_size = 80, node_color = node_color,
                       cmap = plt.get_cmap('Reds_r'))

plt.xlim(-0.05, 1.05)
plt.ylim(-0.05, 1.05)
plt.axis('off')
plt.savefig('random_geometric_graph.png')
plt.show() 
```

![在此处输入图像描述](../Images/3abd17e33b022c80c6edf7080d330da6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:34:36.777

[NetworkX Random Geometric Graph Implementation using KD Trees](https://stackoverflow.com/questions/13796782/networkx-random-geometric-graph-implementation-using-k-d-trees)的问题的答案 可以用来更有效地做到这一点，例如

```
import numpy as np
from scipy import spatial
import networkx as nx
import matplotlib.pyplot as plt
n = 100
radius = 0.4
# random sample n points in disc using rejection
positions =  np.random.uniform(low=-radius, high=radius, size=(n*2.0,2))
disc = np.array([p for p in positions if np.linalg.norm(p) < radius][0:n])
# kdtree data structure of points in disc
kdtree = spatial.KDTree(disc)
# make graph
G = nx.Graph()
G.add_nodes_from(range(n))
r = 0.1 # connect nodes if distance < r
pairs = kdtree.query_pairs(r)
G.add_edges_from(list(pairs))
# draw
pos = dict(zip(range(n),disc))
nx.draw(G,pos,with_labels=False,node_size=25)
circ=plt.Circle((0,0),radius=radius,alpha=0.1)
ax=plt.gca()
plt.axis('equal')
ax.add_patch(circ)
plt.savefig('disc.png')
plt.show() 
```

![在此处输入图像描述](../Images/05129042e91b116e364e27355d4e9b93.png)

# apl - NARS2000 没有关于如何动态定义函数的文档

> ID：13792054
> 
> 赞同：3
> 
> 时间：2012-12-09T21:30:14.937
> 
> 标签：apl

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T17:18:45.947

Good news! As of version 0.4.0.29 (2 Aug 2013) NARS2000 supports Anonymous Functions (a.k.a. dynamic functions). For more details, see [the Wiki](http://wiki.nars2000.org/index.php/Anonymous_Functions/Operators).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T17:38:11.400

Omega ( ⍵ ) is an identifier in NARS2000\. You create a function either with the del operator or with the )EDIT command. So if you wanted to define an avg function:

```
)edit avg 
```

[0] r←avg arg
[1] r←(+/arg)÷⍴arg

Control E to save, then do

```
 a←5 10 15 20
   avg a 
```

12.5

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T21:39:50.147

Darn it.

NARS2000 doesn't support dynamic functions.

The feature is on the main page under `Wish List of Features`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T16:41:54.443

Actually, there is some implementation of omega/alpha dynamic functions.

Here is an example:

```
 ⎕SYSVER
0.4.0.29  Fri Aug 02 06:09:58 2013  Win/32

      AVG←{(+/⍵)÷⍴⍵} ⍝ computes the average
      AVG 2 3 5
3.333333333 
```

# ios - 在 iOS 6.0 中找不到 AVAudioPlayer

> ID：13792059
> 
> 赞同：1
> 
> 时间：2012-12-09T21:30:57.430
> 
> 标签：ios, objective-c, ios6, avfoundation, avaudioplayer

我需要在项目中添加 AVAudioPlayer 框架但没有找到它。它在 iOS 6 中是否已弃用？如果是，那么我应该用什么来播放音频文件 mp3。mediaplayer 框架是否可以播放音频文件 mp3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T21:35:16.817

> AVAudioPlayer 框架

不，不。AVAudioPlayer 是一个*类，*而不是一个框架。如果你打算使用这个类，你必须链接到 AVFoundation*框架*——如果你使用 Xcode，你可以在“与库链接”部分的“构建阶段”选项卡上添加这个框架。

# javascript - 如何使用 asp.net4 从网页启动 EXE

> ID：13792060
> 
> 赞同：-1
> 
> 时间：2012-12-09T21:30:58.867
> 
> 标签：javascript, internet-explorer, wsh, jscript

我使用这个代码：

```
<script>
function LaunchApp() {
    if (!document.all) {
        alert("Available only with Internet Explorer.");
        return;
    }
    var ws = new ActiveXObject("WScript.Shell");
    ws.Exec("C:\\Windows\\notepad.exe");
} 
```

```
<a href="javascript:LaunchApp()">Launch the executable</a> 
```

但这不起作用。（链接被禁用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:43:24.403

1.  您指向的不是同一个 JavaScript 函数。尝试这个：

    `<button onclick="LaunchApp()">Run Exe File</button>`

2.  您的 Internet 设置必须设置为可能的**最低安全级别**，以允许您运行此类代码。

# java - 为什么 Eclipse 使用 Cp1252 编码？

> ID：13792061
> 
> 赞同：46
> 
> 时间：2012-12-09T21:31:02.343
> 
> 标签：java, eclipse, encoding, utf-8, cp1252

抱歉，如果这是一个非常业余的问题！我知道 Eclipse 使用 Cp1252 作为其编码的默认值。
我最近创建了一个程序，使用哈希映射将输入的字母转换为盲文。为此，我不得不将编码方法更改为 UTF-8。

我对这两者都知之甚少，但我读过的所有内容都表明 UTF-8 可以表示 Unicode 中的每个字符，并且具有更大的可识别符号库。

那么为什么它不是 Eclipse 的首选编码风格呢？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-09T21:41:44.537

当您针对一个全新的工作空间启动 Eclipse 时，Eclipse 必须决定在默认情况下在处理某些类型的基于文本的文件时使用哪种编码：文本文件、Java 源文件、JSP 文件、XML 等等。

然后，默认情况下，Eclipse 使用默认平台编码，该编码源自您的操作系统设置。

至于*为什么 UTF-8 不是文本文件的默认编码*，原因在于，在世界范围内，仍有大量纯文本文件无法向后兼容 UTF-8。虽然 UTF-8 与大多数西方编码向后兼容，但其他编码并非如此。

您可以通过修改工作区的设置来更改这些默认编码。但请记住，这些设置存储在工作区级别；如果您稍后启动新工作区，则新工作区将设置默认编码。

要更改默认编码，只需转到 Workspace -> Preferences，然后在对话框左上角的搜索框中键入“encoding”。Eclipse 将过滤首选项对话框以包含与编码相关的项目。

# php - 共享主机上的 PHP 超时

> ID：13792062
> 
> 赞同：0
> 
> 时间：2012-12-09T21:31:02.077
> 
> 标签：php

我有一个脚本，但我在共享主机上的服务器在 5 分钟后超时，有没有办法在超时后继续执行脚本？该脚本更新我的 MySQL 数据库。运行脚本一段时间并停止然后自动继续但不是从头开始？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:35:04.963

终止执行后无法自动继续脚本。在共享主机环境中，一段时间后终止脚本是很常见的，您应该检查允许在主机的公司 wiki/faq 上运行多长时间。如果您想模拟持续的脚本执行，您必须自己编写代码，检测已完成的操作并仅处理其余数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:32:29.980

即使在共享主机上，您也应该能够使用`set_time_limit`（[PHP 文档](http://php.net/manual/en/function.set-time-limit.php)）

```
set_time_limit(0); // infinite 
```

# spring - 在持久性单元中找不到 ObjectTypeConverter

> ID：13792064
> 
> 赞同：1
> 
> 时间：2012-12-09T21:31:14.190
> 
> 标签：spring, jpa, eclipselink, converter

在我的项目中，我在某些实体中使用了枚举。枚举将作为整数存储在数据库中。为此，我使用 EclipseLink 的[ObjectTypeConverter](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/annotations/ObjectTypeConverter.html)。

我想使用注释，因为我使用 Spring 省略了 persistence.xml。`ObjectTypeConverter`必须在实体上指定用于配置的注释。我觉得没有必要在所有使用这个枚举的类上指定注释，因为这是多余的并且不可维护。在某个实体上指定一次会起作用，但这在 OOP 设计（或该母校的任何设计）中没有意义。一个解决方案是用 注释枚举`@ObjectTypeConverter`，但这不起作用，因为枚举不是实体。

无效但理想的示例：

```
@Entity
public class ExampleEntity
{
    @Id
    private Long id;
    @Convert("exampleenum")
    private ExampleEnum ee;
}

@ObjectTypeConverter(name = "exampleenum", objectType = ExampleEnum.class, dataType = Integer.class,
    conversionValues =
        {
            @ConversionValue(objectValue = "A", dataValue = "100"),
            @ConversionValue(objectValue = "B", dataValue = "200"),
            @ConversionValue(objectValue = "C", dataValue = "300")
        })
public enum ExampleEnum
{
    A, B, C;
} 
```

示例导致以下异常：

> 异常描述：在持久性单元中找不到与类 [class com.example.ExampleEntity] 中的元素 [field ee] 一起使用的名称为 [exampleenum] 的转换器。请确保您提供了正确的转换器名称。

由于我使用的是 Spring、JPA 和 EclipseLink，因此我接受使用这些框架的任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T15:07:35.730

在阅读文档后（我应该首先更仔细地做），我注意到：

> ObjectTypeConverter 必须由名称唯一标识，并且可以在类、字段和属性级别定义，并且可以在**Entity**、**MappedSuperclass**和**Embeddable**类中指定。

我不能用`@Entity`（因为这需要一个表格）或`@MappedSuperclass`（因为这没有意义）来注释枚举，但`@Embeddable`在某种程度上是有意义的。用标记枚举`@Embeddable`做了诀窍：

```
@Embeddable
@ObjectTypeConverter(...)
public enum ExampleEnum
... 
```

# azure - 用 azure 连接本地网络

> ID：13792070
> 
> 赞同：0
> 
> 时间：2012-12-09T21:31:45.917
> 
> 标签：azure, network-programming, gateway

我不知道如何从以下开始。我将用下面的图片解释我想要做什么。

像你一样，你有两个部分。本地部分和天蓝色部分。天蓝色的部分是我的部分。本地网络可能是客户，...

我要做的是在 PC 上运行服务并将该数据发送到本地服务器/网关。但是我怎样才能检测到它需要连接的服务器。我没有在本地电脑上安装任何服务，客户本身就是这样做的。但我不希望他需要进行配置。就像他们安装服务器/网关部分一样。

我将在 azure 上运行一个从本地网络上的服务器/网关获取信息的 web 服务。所以那没问题。在 azure 上，还有一些其他应用程序可以处理消息。

另外，您如何将一些消息发送回本地网络？当您在 azure 上说 ping 网络上的另一台本地计算机时。您应该向本地网络上的服务器/网关发送消息。但是怎么做？

所以我有 2 个问题（有关更多信息，请参见上文）：

*   从客户端连接到服务器/网关

*   将一些信息发送回本地网络

![架构](../Images/34e00a3775bcb97ea8b1744f98e66b2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:31:57.060

您可以使用虚拟网络、Azure Connect 在 PC 和 Azure 云之间创建“连接”或“混合云”。但是，如果您谈论的是基于 Web 的/简单消息传递并且 PC 具有 Internet 连接，为什么不通过安全 (SSL/TLS) 连接将消息路由到云？

对于广播/推送类型的通知，请查看 SignalR (http://signalr.net/)。Microsoft 正在将其作为 ASP.NET 平台的一部分： http: [//channel9.msdn.com/Events/Build/2012/3-034](http://channel9.msdn.com/Events/Build/2012/3-034)

它有一些非常好的功能，比如优雅，如果服务器/客户端不支持 WebSockets 等高级功能，则可以使用多种机制。这是一个理想的解决方案并且具有超强的可扩展性，因为它是基于服务器的并且在客户端上非常轻量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T13:04:51.520

如果您只需要连接在本地网络上运行的一项或多项服务，并通过 azure 云使它们公开可用。

我发现最直接的解决方案是使用服务总线。它几乎不需要对您的业务网络进行任何修改。

# asp.net-mvc - MVC Web 应用程序中的内存泄漏

> ID：13792072
> 
> 赞同：1
> 
> 时间：2012-12-09T21:32:02.443
> 
> 标签：asp.net-mvc, out-of-memory

我构建的 MVC 3 应用程序中存在内存泄漏。我已经使用 DebugDiag 来获取一些调试信息，但很难理解结果。结果指向 clr!EEHeapAlloc+cb，每次刷新页面时，它的内存使用量都会不断上升。任何帮助将不胜感激。结果如下：

**功能详情**

```
Function   clr!EEHeapAlloc+cb 
Allocation type   Heap allocation(s) 
Allocation Count   1507120 allocation(s) 
Allocation Size   1.13 GBytes 
Leak Probability   79% 
```

**调用堆栈示例 1**

```
Address   0x214734a0 
Allocation Time   00:05:02 since tracking started 
Allocation Size   64 Bytes 
```

**函数源目标**

```
clr!EEHeapAlloc+cb      ntdll!RtlAllocateHeap 
clr!EEHeapAllocInProcessHeap+5c      clr!EEHeapAlloc 
clr!operator new+2b      clr!EEHeapAllocInProcessHeap 
clr!CPropertyArray::Set+48      clr!operator new 
clr!CAssemblyName::SetProperty+109      clr!CPropertyArray::Set 
clr!FusionBind::CreateFusionName+2ee       
clr!FusionBind::LoadAssembly+9c      clr!FusionBind::CreateFusionName 
clr!AssemblySpec::FindAssemblyFile+f4       
clr!AppDomain::BindAssemblySpec+2f2      clr!AssemblySpec::FindAssemblyFile 
clr!AssemblySpec::LoadDomainAssembly+2bc       
clr!AssemblySpec::LoadAssembly+19      clr!AssemblySpec::LoadDomainAssembly 
clr!AssemblyNative::Load+297       
System.Resources.ResourceManager.InternalGetResourceSet(System.Globalization.CultureInfo, Boolean, Boolean, System.Threading.StackCrawlMark ByRef)      0x1E7B66 
System.Resources.ResourceManager.GetString(System.String, System.Globalization.CultureInfo)       
System.Environment+ResourceHelper.GetResourceStringCode(System.Object)       
clr!CallDescrWorker+33       
clr!CallDescrWorkerWithHandler+8e      clr!CallDescrWorker 
clr!MethodDesc::CallDescr+194      clr!CallDescrWorkerWithHandler 
clr!MethodDesc::CallTargetWorker+21      clr!MethodDesc::CallDescr 
clr!MethodDescCallSite::Call+1c      clr!MethodDesc::CallTargetWorker 
clr!ExecuteCodeWithGuaranteedCleanupHelper+bb       
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+138      clr!ExecuteCodeWithGuaranteedCleanupHelper 
clr!CallDescrWorker+33       
clr!CallDescrWorkerWithHandler+8e      clr!CallDescrWorker 
clr!MethodDesc::CallDescr+194      clr!CallDescrWorkerWithHandler 
clr!MethodDesc::CallTargetWorker+21      clr!MethodDesc::CallDescr 
clr!GetResourceStringFromManaged+198       
clr!GetResourceFromDefault+e2      clr!GetResourceStringFromManaged 
clr!CallDescrWorker+33       
clr!RuntimeTypeHandle::CreateInstance+61e       
clr! ?? ::FNODOBFM::`string'+42e78       
System.Collections.Generic.HashSet`1[[System.__Canon, mscorlib]].UnionWith(System.Collections.Generic.IEnumerable`1<System.__Canon>)      0x1EB0BA 
Glimpse.Mvc3.Plumbing.GlimpseDependencyResolver.GetService(System.Type)      0x86A4B2 
System_Core_ni+1cbb28       
System.Web.Mvc.ControllerTypeCache.GetControllerTypes(System.String, System.Collections.Generic.HashSet`1<System.String>)       
System.Collections.Generic.HashSet`1[[System.__Canon, mscorlib]].System.Collections.Generic.IEnumerable<T>.GetEnumerator()       
System_Core_ni+1d0f28       
System_Web_Mvc_ni+110c18       
System.Web.Mvc.DefaultControllerFactory.CreateController(System.Web.Routing.RequestContext, System.String)       
Castle.Proxies.Invocations.DefaultControllerFactory_CreateController.InvokeMethodOnTarget()       
clr! ?? ::FNODOBFM::`string'+65d52       
Castle.DynamicProxy.AbstractInvocation.Proceed()       
Castle.Proxies.DefaultControllerFactoryProxy.CreateController(System.Web.Routing.RequestContext, System.String)      Castle.DynamicProxy.AbstractInvocation.Proceed() 
System.Collections.Hashtable.InitHash(System.Object, Int32, UInt32 ByRef, UInt32 ByRef)       
System.Web.SiteMapNode.IsAccessibleToUser(System.Web.HttpContext)       
System.Web.StaticSiteMapProvider.GetChildNodes(System.Web.SiteMapNode)       
System.Web.SiteMapNode.get_ChildNodes()       
System.Web.SiteMapNode.get_HasChildNodes()       
MvcSiteMapProvider.Web.Html.MenuHelper.BuildModel(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean)       
MvcSiteMapProvider.Web.Html.MenuHelper.BuildModel(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean)      MvcSiteMapProvider.Web.Html.MenuHelper.BuildModel(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean) 
MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.String, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean)      MvcSiteMapProvider.Web.Html.MenuHelper.BuildModel(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean) 
MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean)      MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.String, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean) 
MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, Boolean, Boolean, Boolean)      MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, System.Web.SiteMapNode, Boolean, Boolean, Int32, Boolean) 
ASP._Page_Views_Shared__SubMenu_cshtml.Execute()      MvcSiteMapProvider.Web.Html.MenuHelper.Menu(MvcSiteMapProvider.Web.Html.MvcSiteMapHtmlHelper, Boolean, Boolean, Boolean) 
System.Web.WebPages.WebPageBase.ExecutePageHierarchy()       
0xB373A48       
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase)       
System.Web.Mvc.BuildManagerCompiledView.Render(System.Web.Mvc.ViewContext, System.IO.TextWriter)       
System.Web.Mvc.Html.PartialExtensions.Partial(System.Web.Mvc.HtmlHelper, System.String, System.Object, System.Web.Mvc.ViewDataDictionary)       
ASP._Page_Views_Shared__Layout_cshtml.Execute()       
System.Web.WebPages.WebPageBase.ExecutePageHierarchy()       
0xB3738BC       
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase)       
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter)      System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase) 
System.Web.WebPages.WebPageBase+<>c__DisplayClass7.<RenderPageCore>b__6(System.IO.TextWriter)      System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter) 
System.Web.WebPages.HelperResult.WriteTo(System.IO.TextWriter)       
System.Web.WebPages.WebPageExecutingBase.WriteTo(System.IO.TextWriter, System.Web.WebPages.HelperResult)      System.Web.WebPages.HelperResult.WriteTo(System.IO.TextWriter) 
System.Web.WebPages.WebPageBase.Write(System.Web.WebPages.HelperResult)      System.Web.WebPages.WebPageExecutingBase.WriteTo(System.IO.TextWriter, System.Web.WebPages.HelperResult) 
System.Web.WebPages.WebPageBase.RenderSurrounding(System.String, System.Action`1<System.IO.TextWriter>)       
System.Web.WebPages.WebPageBase.PopContext()      System.Web.WebPages.WebPageBase.RenderSurrounding(System.String, System.Action`1) 
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase)      System.Web.WebPages.WebPageBase.PopContext() 
System.Web.Mvc.BuildManagerCompiledView.Render(System.Web.Mvc.ViewContext, System.IO.TextWriter)       
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult)       
Castle.Proxies.ControllerActionInvokerProxy.InvokeActionResult_callback(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult)      System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult) 
Castle.Proxies.Invocations.ControllerActionInvoker_InvokeActionResult.InvokeMethodOnTarget()       
Castle.DynamicProxy.AbstractInvocation.Proceed()       
Castle.Proxies.ControllerActionInvokerProxy.InvokeActionResult(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult)      Castle.DynamicProxy.AbstractInvocation.Proceed() 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()       
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1<System.Web.Mvc.ResultExecutedContext>)       
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()      System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(System.Web.Mvc.ControllerContext, System.Collections.Generic.IList`1<System.Web.Mvc.IResultFilter>, System.Web.Mvc.ActionResult)       
System.Web.Mvc.ControllerActionInvoker.InvokeAction(System.Web.Mvc.ControllerContext, System.String)       
System.Web.Mvc.ControllerBase.Execute(System.Web.Routing.RequestContext)       
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(System.Web.Routing.RequestContext)       
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass1.<MakeVoidDelegate>b__0()       
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass8`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].<BeginSynchronous>b__7(System.IAsyncResult)       
System.Web.Mvc.Async.AsyncResultWrapper+WrappedAsyncResult`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].End()       
System_Web_Mvc_ni+49938       
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(System.Action)       
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(System.Action)       
System.Web.Mvc.MvcHandler.EndProcessRequest(System.IAsyncResult)      System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(System.Action) 
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(System.IAsyncResult)       
System.Web.HttpApplication.ResumeStepsFromThreadPoolThread(System.Exception)       
System.Web.HttpApplication+AsyncEventExecutionStep.OnAsyncEventCompletion(System.IAsyncResult)      System.Web.HttpApplication.ResumeStepsFromThreadPoolThread(System.Exception) 
System.Web.HttpAsyncResult.Complete(Boolean, System.Object, System.Exception, System.Web.RequestNotificationStatus)       
System.Web.SessionState.SessionStateModule.PollLockedSessionCallback(System.Object)      System.Web.HttpAsyncResult.Complete(Boolean, System.Object, System.Exception, System.Web.RequestNotificationStatus) 
0x8CFA453       
System.Threading._TimerCallback.TimerCallback_Context(System.Object)       
System.Threading.ExecutionContext.runTryCode(System.Object)       
clr!CallDescrWorker+33       
clr!CallDescrWorkerWithHandler+8e      clr!CallDescrWorker 
clr!MethodDesc::CallDescr+194      clr!CallDescrWorkerWithHandler 
clr!MethodDesc::CallTargetWorker+21      clr!MethodDesc::CallDescr 
clr!MethodDescCallSite::Call+1c      clr!MethodDesc::CallTargetWorker 
clr!ExecuteCodeWithGuaranteedCleanupHelper+bb       
clr!ReflectionInvocation::ExecuteCodeWithGuaranteedCleanup+138      clr!ExecuteCodeWithGuaranteedCleanupHelper 
clr!CallDescrWorker+33       
clr!CallDescrWorkerWithHandler+8e      clr!CallDescrWorker 
clr!DispatchCallBody+20      clr!CallDescrWorkerWithHandler 
clr!DispatchCallDebuggerWrapper+75      clr!DispatchCallBody 
clr!DispatchCallNoEH+53      clr!DispatchCallDebuggerWrapper 
clr!AddTimerCallback_Worker+70      clr!DispatchCallNoEH 
clr!Thread::DoExtraWorkForFinalizer+114       
clr! ?? ::FNODOBFM::`string'+36051       
clr!DebuggerU2MCatchHandlerFrame::`vftable'       
clr!_except_handler4       
clr! ?? ::FNODOBFM::`string'+366e2       
clr!Thread::RaiseCrossContextException+3e1       
0x1089228       
clr!`string'+3c       
clr!`string'+3c       
clr! ?? ::FNODOBFM::`string'+36051       
clr!DebuggerU2MCatchHandlerFrame::`vftable'       
clr!_except_handler4       
clr! ?? ::FNODOBFM::`string'+29219       
clr!ThreadpoolMgr::AsyncTimerCallbackCompletion+83       
clr!UnManagedPerAppDomainTPCount::DispatchWorkItem+195       
clr!ThreadpoolMgr::WorkerThreadStart       
clr!SlowClrFlsSetValue+42       
clr! ?? ::FNODOBFM::`string'+41b4f       
clr!ThreadpoolMgr::WorkerThreadStart       
clr!ThreadpoolMgr::WorkerThreadStart       
clr!operator delete+41       
clr!ThreadpoolMgr::WorkerThreadStart       
clr! ?? ::FNODOBFM::`string'+41bd8       
clr!Thread::intermediateThreadProc+4b       
kernel32!BaseThreadInitThunk+e       
ntdll!__RtlUserThreadStart+70       
ntdll!_RtlUserThreadStart+1b      ntdll!__RtlUserThreadStart 
clr!Thread::intermediateThreadProc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T23:14:13.180

您的应用程序是否使用 COM/Interops？如果是这样，那么 CLR 可能会通过这些非托管对象导致泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-09T23:41:32.777

如果没有看到 MVC 代码，就很难确切地知道是什么导致了问题。.NET 的堆分配与 C 中的标准堆不同。由于内存是根据对象具有的引用数来管理的，因此 .NET 框架在大多数情况下会处理管理此内存。不过要记住的一件事是，您没有无限量的内存，这是对托管运行时的一个很大误解。

本质上，这里发生的是您的应用程序正在尝试为托管堆上的对象分配内存。堆被分配了一定的内存，当该分配中没有更多内存时，就会发生垃圾收集。在垃圾回收期间，托管运行时将构建仍然被引用的项目的图表。仍然“活着”并正在使用的项目。然后垃圾收集器将遍历并移动仍在使用的项目彼此靠近。它还将在每次传递时分配一代，这背后的原因是 .NET 假设已经存在较长时间的事物将继续存在。.NET 然后将释放堆上不再引用的项目。如果在此之后仍然没有空间分配你的内存'

现在，您的应用程序中最有可能发生的事情是您没有正确地释放内存。有几个地方可以看。首先查看是否将大量数据加载到字符串中，然后查看是否过度使用随时间增长的静态数据结构。静态数据结构为每个进程创建一次，因此如果您不断地向它们插入项目而不减小它们的大小，它们可以快速创建 OutOfMemoryExceptoin。查看您是否在应用程序的任何地方使用非托管或不安全代码，这将包括引用 COM 互操作，这些肯定会泄漏内存，如果您确实使用它们，您应该在 IDisposable 模式中使用 Marshall.Release [http：/ /msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.release(v=vs.](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.release(v=vs.110).aspx)这将确保 .NET 框架在垃圾收集发生时释放 COM。最后看看您是否可以实现 IDisposable 并使用“使用”语句子对象来实现 IDisposable 模式来正确处理它们。

# webgl - 在 Three.js 中渲染具有大量对象的多个场景的最佳方式

> ID：13792083
> 
> 赞同：5
> 
> 时间：2012-12-09T21:32:40.627
> 
> 标签：webgl, three.js

想象一下，您要绘制两个场景，每个场景都有数百个球体，并提供在这些场景之间切换的能力。执行此操作的最佳方法是什么？

目前，一个开关大约需要 4 到 5 秒，因为我正在删除、创建和绘制每个开关上的所有球体。下面是在场景切换上运行的代码示例。

```
clearObjects();
resetCamera();  

for(var i = 0; i < 500; i++) {
    var geometry = new THREE.SphereGeometry(radius, 50, 50);
    var material = new THREE.MeshLambertMaterial({color: 0xFFCC33});
    var sphere = new THREE.Mesh(geometry, material);
    sphere.position.set(randX, randY, randZ);

    scene.add(sphere);
    objects.push(sphere);   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T22:07:27.313

再说一次，你为什么不只使用一个场景，将它分成两部分，设置你的相机 FOV（视野），这样你一次只能看到一个场景部分，然后移动你的相机位置......听起来不是更有效率吗？

如果没有使用 2 个场景的特殊原因，您始终可以只使用一个场景来实现您的代码。所以尝试我上面描述的方法或解释你使用2个场景的原因。

**编辑：**您还可以使用两个`THREE.Object3D`容器来表示您的 2 个场景，您可以在其中存储所有特定场景对象，然后一次只显示/隐藏其中一个容器。您可以使用`yourContainer.children[n]`.

所以一般来说，这就是你想要做的：

```
var scene1Container = new THREE.Object3D();
var scene2Container = new THREE.Object3D();

scene1Container.add(firstObjectFromScene1);
//.....
scene1Container.add(nObjectFromScene1);

scene2Container.add(firstObjectFromScene2);
//.....
scene2Container.add(nObjectFromScene2); 
```

现在您可以一次只显示/隐藏一个容器`scene1Container.visible = true/false;`（并设法`scene1Container.traverse`将可见性更改应用于对象的所有子对象）。

# algorithm - 递归算法的时间复杂度

> ID：13792088
> 
> 赞同：3
> 
> 时间：2012-12-09T21:33:00.407
> 
> 标签：algorithm, data-structures, time-complexity, runtime-compilation

每当我看到一个递归解决方案，或者我为一个问题编写递归代码时，我真的很难弄清楚时间复杂度，在大多数情况下我只是说它是指数级的？它实际上是如何指数化的？人们怎么说它是 2^n，当它是 n!，当它是 n^n 或 n^k。

我有一些疑问——

1.  假设找到字符串的所有排列（O（n！））
2.  在一个数组中找到所有总和为 k 的序列（指数，我该如何计算）。
3.  找到所有大小为 k 且总和为 0 的子集（k 会出现复杂度的某个地方，它应该会出现吗？）。

任何人都可以帮助我如何计算此类问题的确切复杂度，我可以为它们编写代码，但很难理解确切的时间复杂度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:01:24.863

> 在一个数组中找到所有总和为 k 的序列（指数，我该如何计算）。

让`F(a, n, k)`是所有子集的数量，`S ⊂ {0, 1, ..., n-1}`使得

```
 ∑ a[i] == k
i∈S 
```

然后我们可以`F(array, length of array, k)`通过将问题拆分为两个子问题（对于`n > 0`）来递归计算。

的子集`{0, 1, ..., n-1}`可以分为两类，包含`n-1`的和不包含的。

我们得到递归

```
F(a,n,k) = F(a,n-1,k) + F(a,n-1, k-a[n-1]) 
```

让`T(n)`是计算所需的时间`F(_,n,_)`（下划线表示`T(n)`仅取决于`n`，而不取决于数组或`k`[尽管对于特定数组和`k`更快的算法是可能的]。然后的递归`F`立即意味着

```
T(n) = 2 * T(n-1) 
```

为`n > 0`.

对于`n == 0`，我们可以在常数时间内计算解，

```
F(a, 0, k) = k == 0 ? 1 : 0 
```

所以我们有`T(n) = 2^n * T(0)`归纳。

如果不仅要计算子集，还要输出子集，那么复杂度就会变大，并且边界很紧（对于所有s`O(n * 2^n)`的数组，其中，所有子集都满足条件，并且打印它们需要时间）。`0``k == 0``Θ(n * 2^n)`

> 找到所有大小为 k 且总和为 0 的子集（k 会出现复杂度的某个地方，它应该会出现吗？）。

是的，该问题的复杂性取决于`n`和`k`。

让是基数`F(a,n,k,s)`子集的数量，使得`S ⊂ {0, 1, ..., n-1}``k`

```
 ∑ a[i] == s
i∈S 
```

对于`k == 0`，我们再次有一个恒定时间的答案，如果 有一个这样的子集（空集）`s == 0`，否则没有。因为`k > n`集合`{0, 1, ..., n-1}`没有基数的子集`k`，所以`F(a,n,k,s) = 0`如果`k > n`.

如果`0 < k <= n`，我们可以像上面一样，`n-1`分别考虑包含和不包含的子集，给出

```
F(a,n,k,s) = F(a,n-1,k,s) + F(a,n-1,k-1,s - a[n-1]) 
```

对于我们发现的时间复杂度

```
T(n,k) = T(n-1,k) + T(n-1,k-1) 
```

从二项式系数中可以知道递归，我们有

```
T(n,k) = n `choose` k = n! / (k! * (n-k)!) 
```

（与`T(n,0) = 1`）。

再一次，如果集合不仅要计算，还要输出，时间复杂度增加，这里所有集合都有基数`k`，所以它变成

```
k * n! / (k! * (n-k)!) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:44:14.010

看看[大师定理](http://en.wikipedia.org/wiki/Master_theorem)。教授完美地解释了这一点。Tim Roughgarden 的[算法：设计与分析：第一部分](https://class.coursera.org/algo/lecture/preview)，来自斯坦福。这是我推荐的在线课程，但您无需注册即可观看视频。如果您有兴趣，还有本课程的第二部分。

# mysql - 检查字段组合是否存在

> ID：13792091
> 
> 赞同：0
> 
> 时间：2012-12-09T21:33:11.457
> 
> 标签：mysql

我有一个查询，显示可供学生注册的模块并将它们显示在列表中。如果学生注册的模块没有显示在列表中，我希望它。一旦学生注册了一个模块，它就会存储在一个名为 tbl_studentModule 的表中，该表有两个字段，regNum ($studentID) 和 moduleID。

我需要在此查询中添加什么以仅显示 tbl_studentModule 中尚未包含相关 regNum 的模块。

例如，如果 tbl_studentModule，我希望查询说明 regNum 和 moduleID 的组合不存在的情况。

这是我到目前为止...

```
SELECT DISTINCT am.moduleID, m.moduleName, am.type, s.regNum, s.award
FROM tbl_awardModules am
LEFT OUTER JOIN tbl_module m ON am.moduleID = m.moduleID
INNER JOIN tbl_awardLevels al ON am.awardLevelID = al.awardLevelID
INNER JOIN tbl_award a ON al.awardID = a.awardID
INNER JOIN tbl_student s ON a.awardID = s.award
LEFT JOIN tbl_studentModules sm ON s.regNum = sm.regNum
WHERE am.type <> 'C' AND sm.regNum = '$student_id' AND m.moduleName <> 'A_null_Choice' AND m.moduleName NOT LIKE '%Not Running%' 
```

希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:23:29.103

好吧，我猜到了。。

我添加了

```
AND NOT EXISTS (SELECT * FROM tbl_studentModules WHERE regNum = '$student_id' AND moduleID = am.moduleID) 
```

如果查询到最后，那么现在它只显示表中尚未包含该值组合的行

# image - htaccess 重写桌面/移动设备的多个条件

> ID：13792092
> 
> 赞同：0
> 
> 时间：2012-12-09T21:33:11.583
> 
> 标签：image, apache, .htaccess, mobile, web

我正在使用服务器端图像调整器来自动提供正确尺寸的图像。

图像调整器从请求 URL 中获取调整大小的参数，因此我设置了一些 .htaccess 重写规则以使图像的 URL 更漂亮：

```
RewriteRule ^.*photos/homehero/(.*)$ /v2/imgr/w1140-h640-c16x9-q100-p1/v2/photos/$1 [R=301] 
```

使用上述内容，我可以`http://example.com/photos/homehero/file.jpg`在我的代码中使用它并返回正确尺寸的照片。这可以完美地工作，并且大小调整器会在生成图像后自动将图像缓存在服务器上，因此网站速度相当快。我目前有 5 张不同尺寸的图片。

考虑到屏幕尺寸和带宽的考虑，我想为移动用户提供一组单独的图像，其宽度/高度降低（`w1140-h640`上图）并且质量也降低（`q100`上图）。

我添加了一个重写条件来检测具有第二组重写规则的用户代理。这低于原始规则，例如：

```
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/homehero/(.*)$ /v2/imgr/w570-h320-c16x9-q50-p1/v2/photos/$1 [R=301] 
```

但是，这似乎不起作用。我尝试将第二个块放在第一个块之上，但这也不起作用，我还尝试`%{HTTP_USER_AGENT} "!(android|`在“正常”重写规则块之前为用户代理（...）使用 not 标志，但这并没有不工作。

我用谷歌搜索并搜索了 StackOverflow 并发现了类似但不是问题，所以我想知道这是否真的可以在 .htaccess 中实现？我的完整规则块如下，任何帮助将不胜感激。

```
#Image Resizer Standard sizes   
RewriteRule ^.*photos/homehero/(.*)$        /v2/imgr/w1140-h640-c16x9-q100-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/tile-small/(.*)$      /v2/imgr/w504-h252-c6x3-q100-p1/v2/photos/$1    [R=301]
RewriteRule ^.*photos/hero/(.*)$            /v2/imgr/w1140-h200-c57x10-q100-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/productshot/(.*)$     /v2/imgr/w1140-h640-c16x9-q100-p1/v2/photos/$1  [R=301]
RewriteRule ^.*photos/gallerythumb/(.*)$    /v2/imgr/w160-h90-c16x9-q100-p1/v2/photos/$1    [R=301]

# mobile site redirection
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/homehero/(.*)$        /v2/imgr/w570-h320-c16x9-q50-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/tile-small/(.*)$      /v2/imgr/w504-h252-c6x3-q50-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/hero/(.*)$            /v2/imgr/w570-h100-c57x10-q100-p1/v2/photos/$1  [R=301]
RewriteRule ^.*photos/productshot/(.*)$     /v2/imgr/w570-h320-c16x9-q100-p1/v2/photos/$1   [R=301]
RewriteRule ^.*photos/gallerythumb/(.*)$    /v2/imgr/w160-h90-c16x9-q100-p1/v2/photos/$1    [R=301] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:19:46.417

您应该将移动规则置于桌面规则之上。此外，您需要为每个 RewriteRule 重复 RewriteCond。

所以

```
# mobile site redirection
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/homehero/(.*)$        /v2/imgr/w570-h320-c16x9-q50-p1/v2/photos/$1 [R=301]
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/tile-small/(.*)$      /v2/imgr/w504-h252-c6x3-q50-p1/v2/photos/$1 [R=301]
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/hero/(.*)$            /v2/imgr/w570-h100-c57x10-q100-p1/v2/photos/$1  [R=301]
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/productshot/(.*)$     /v2/imgr/w570-h320-c16x9-q100-p1/v2/photos/$1   [R=301]
RewriteCond %{HTTP_USER_AGENT} "(android|blackberry|googlebot-mobile|iemobile|iphone|ipod|opera mobile|palmos|webos)" [NC]
RewriteRule ^.*photos/gallerythumb/(.*)$    /v2/imgr/w160-h90-c16x9-q100-p1/v2/photos/$1    [R=301]

#Image Resizer Standard sizes   
RewriteRule ^.*photos/homehero/(.*)$        /v2/imgr/w1140-h640-c16x9-q100-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/tile-small/(.*)$      /v2/imgr/w504-h252-c6x3-q100-p1/v2/photos/$1    [R=301]
RewriteRule ^.*photos/hero/(.*)$            /v2/imgr/w1140-h200-c57x10-q100-p1/v2/photos/$1 [R=301]
RewriteRule ^.*photos/productshot/(.*)$     /v2/imgr/w1140-h640-c16x9-q100-p1/v2/photos/$1  [R=301]
RewriteRule ^.*photos/gallerythumb/(.*)$    /v2/imgr/w160-h90-c16x9-q100-p1/v2/photos/$1    [R=301] 
```

# php - PHP多文件上传问题

> ID：13792098
> 
> 赞同：1
> 
> 时间：2012-12-09T21:33:46.893
> 
> 标签：php, file-upload

好的，所以我有一个具有多个文件输入的表单。当我提交表单时，文件没有上传。谁能帮忙。先感谢您。如果您需要更多信息，请告诉我...

HTML：

```
<input type="file" multiple="mulitple" id="image_file[]" name="image_file[]" /> 
```

PHP：

```
if (isset($_POST['submit'])) {
$target_path = ABSPATH . 'wp-content/uploads/portfolio-images/';
$target_file = $target_path . basename( $_FILES['image_file']['name']);
foreach ($_FILES['image_file']['error'] as $key => $error) {
      if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES['image_file']['tmp_name'][$key];
        $name = $_FILES['image_file']['name'][$key];
        if (move_uploaded_file($tmp_name, $target_path)){
            echo 'uploaded';
        }
        else {
            echo 'failed';
        }
    }
    }
} 
```

# c# - 在loginform中登录并在form2中查看

> ID：13792103
> 
> 赞同：0
> 
> 时间：2012-12-09T21:34:07.223
> 
> 标签：c#, mysql, phpmyadmin

好的，我有一个名为 Form2 的表单，这是您应该查看所有内容并从 phpmyadmin 数据库中更新所有内容的表单。

然后是调用 loginFrm 的第二个表单，它是从 Form2 激活的。

我需要的唯一代码或解决方案是，如果您登录到登录表单，它应该保持状态 en 如果登录为 TRUE 或 FALSE，则可以从 FORM2 调用。

loginFrm.cs 代码：

```
 private void connectBtn_Click(object sender, EventArgs e)
    {
        MySqlConnection sconn = new MySqlConnection("User ID=root;Password=;Initial Catalog=cmstt;Data Source=localhost");

        sconn.Open();

        DataSet ds = new DataSet();

        MySqlDataAdapter da = new MySqlDataAdapter("select * from users where email ='" + UsrName.Text + "' and pass='" + PassWrd.Text + "'", sconn);

        da.Fill(ds);

        int count = ds.Tables[0].Rows.Count;

        if (count == 0)
        {

            MessageBox.Show("Invalid UserID/Password");

        }

        else
        {

            this.Visible = false;
            MessageBox.Show("gelukt");

        }

        sconn.Close(); 

    } 
```

如果你给我帮助，你想清楚我在哪里放了哪些代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:51:32.927

那么在你的 Form2 中，它会显示 loginFrm，你可以这样提示：

```
if (loginFrm.ShowDialog() == Windows.Forms.DialogResult.OK)
{
    //Only move on if logged in succeeded
    MessageBox.Show("gelukt");
    DoOtherStuff();
}
else
{
    MessageBox.Show("Invalid UserID/Password");
} 
```

在您的登录表单中：

```
if (count == 0)
{
    this.DialogResult = Windows.Forms.DialogResult.Cancel;
}
else
{
    this.DialogResult = Windows.Forms.DialogResult.OK;
} 
```

# java - Java 枚举返回 Int

> ID：13792110
> 
> 赞同：79
> 
> 时间：2012-12-09T21:35:08.347
> 
> 标签：java, enums

我在声明枚举时遇到了麻烦。我要创建的是“DownloadType”的枚举，其中有 3 种下载类型（AUDIO、VIDEO、AUDIO_AND_VIDEO）。

我已经实现了如下代码：

```
private enum DownloadType {
    AUDIO(0), VIDEO(1), AUDIO_AND_VIDEO(2);
    private final int value;

    private DownloadType(int value) {
        this.value = value;
    }
} 
```

如果我像这样使用它，这很好用：

```
DownloadType.AUDIO_AND_VIDEO.value; 
```

但是，我希望这样我就不必要求“价值”。我可能弄错了，但这是几个类在 Java 中的工作方式，例如 Font，例如要设置字体样式，您可以使用：

```
Font.PLAIN 
```

它返回一个 int 值，我们不使用：

```
Font.PLAIN.value 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-09T21:39:52.027

[Font.PLAIN](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html#PLAIN)不是*枚举*。它只是一个`int`. 如果您需要从枚举中取出值，则无法避免调用方法或使用 a `.value`，因为枚举实际上是其自身类型的对象，而不是原语。

如果您真的只需要一个`int`，*并且*您已经接受类型安全丢失，用户可能会将无效值传递给您的 API，那么您*也可以*将这些常量定义为`int`：

```
public final class DownloadType {
    public static final int AUDIO = 0;
    public static final int VIDEO = 1;
    public static final int AUDIO_AND_VIDEO = 2;

    // If you have only static members and want to simulate a static
    // class in Java, then you can make the constructor private.
    private DownloadType() {}
} 
```

顺便说一句，该`value`字段实际上是多余的，因为还有一个`.ordinal()`方法，因此您可以将其定义`enum`为：

```
enum DownloadType { AUDIO, VIDEO, AUDIO_AND_VIDEO } 
```

并使用

```
DownloadType.AUDIO_AND_VIDEO.ordinal() 
```

* * *

**编辑**：更正了代码..`static class`在Java中是不允许的。请参阅[此 SO 答案](https://stackoverflow.com/a/7486111/8295283)，其中包含有关如何在 Java 中定义静态类的说明和详细信息。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-12-09T21:39:03.370

如果您需要获取 int 值，只需为您的 ENUM 中的值设置一个 getter：

```
private enum DownloadType {
    AUDIO(1), VIDEO(2), AUDIO_AND_VIDEO(3);
    private final int value;

    private DownloadType(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }
}

public static void main(String[] args) {
    System.out.println(DownloadType.AUDIO.getValue());           //returns 1
    System.out.println(DownloadType.VIDEO.getValue());           //returns 2
    System.out.println(DownloadType.AUDIO_AND_VIDEO.getValue()); //returns 3
} 
```

或者您可以简单地使用该`ordinal()`方法，该方法将返回枚举常量在枚举中的位置。

```
private enum DownloadType {
    AUDIO(0), VIDEO(1), AUDIO_AND_VIDEO(2);
    //rest of the code
}

System.out.println(DownloadType.AUDIO.ordinal());            //returns 0
System.out.println(DownloadType.VIDEO.ordinal());            //returns 1
System.out.println(DownloadType.AUDIO_AND_VIDEO.ordinal()); //returns 2 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-03-12T11:39:41.900

首先你应该问自己以下问题：**你真的需要一个 int 吗？**

枚举的目的是拥有一组项目（常量），它们在代码中具有意义，而不依赖于外部值（如 int）。Java 中的枚举可以用作 switch 语句的参数，并且可以使用“==”等式运算符（以及其他）安全地比较它们。

**建议 1（不需要 int）：**

通常它后面不需要一个整数，然后简单地使用它：

```
private enum DownloadType{
    AUDIO, VIDEO, AUDIO_AND_VIDEO
} 
```

用法：

```
DownloadType downloadType = MyObj.getDownloadType();
if (downloadType == DownloadType.AUDIO) {
    //...
}
//or
switch (downloadType) {
  case AUDIO:  //...
          break;
  case VIDEO: //...
          break;
  case AUDIO_AND_VIDEO: //...
          break;
} 
```

**提案2（需要int）：**

然而，有时将枚举转换为 int 可能很有用（例如，如果外部 API 需要 int 值）。在这种情况下，我建议使用`toXxx()`-Style 将方法标记为转换方法。用于打印覆盖`toString()`。

```
private enum DownloadType {
    AUDIO(2), VIDEO(5), AUDIO_AND_VIDEO(11);
    private final int code;

    private DownloadType(int code) {
        this.code = code;
    }

    public int toInt() {
        return code;
    }

    public String toString() {
        //only override toString, if the returned value has a meaning for the
        //human viewing this value 
        return String.valueOf(code);
    }
}

System.out.println(DownloadType.AUDIO.toInt());           //returns 2
System.out.println(DownloadType.AUDIO);                   //returns 2 via `toString/code`
System.out.println(DownloadType.AUDIO.ordinal());         //returns 0
System.out.println(DownloadType.AUDIO.name());            //returns AUDIO
System.out.println(DownloadType.VIDEO.toInt());           //returns 5
System.out.println(DownloadType.VIDEO.ordinal());         //returns 1
System.out.println(DownloadType.AUDIO_AND_VIDEO.toInt()); //returns 11 
```

**概括**

*   如果不需要，不要将整数与枚举一起使用。
*   不要依赖于使用`ordinal()`获取枚举的整数，因为如果您更改顺序（例如通过插入值），此值可能会更改。如果您正在考虑使用`ordinal()`它可能会更好地使用提案 1。
*   通常不要使用 int 常量而不是枚举（如在接受的答案中），因为您将失去类型安全性。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-09T21:40:33.213

只需`ordinal()`在枚举值上调用该方法，即可检索其对应的数字。没有必要用它的值声明一个附加属性，每个枚举值默认都有自己的数字，从零开始分配，每个值按照声明的顺序递增一。

您不应该依赖 a 的`int`值，而应该`enum`只依赖于它的实际值。Java 中的枚举是一种不同的怪物，它不像 C 中的枚举，您依赖于它们的整数代码。

关于您在问题中提供的示例，`Font.PLAIN`因为这只是 Font 类的整数常量。如果您绝对需要（可能会更改）数字代码，那么 an`enum`不是该工作的正确工具，最好坚持使用数字常量。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-23T10:24:18.400

你可以试试这段代码。

```
private enum DownloadType {
    AUDIO , VIDEO , AUDIO_AND_VIDEO ;

} 
```

您可以像这样使用此枚举：`DownloadType.AUDIO.ordinal()`。希望此代码段对您有所帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-09T21:48:03.270

如果要将枚举与字符串连接，则可以覆盖 toString 方法以返回 int：

```
public String toString() {
    return value + "";
} 
```

然后你可以简单地使用：

```
String something = "foo" + DownloadType.AUDIO; 
```

并且 toString() 方法将被调用。

请注意，以编程方式使用 toString() 通常被认为是不好的做法 - 它仅适用于人眼，但这是实现您所要求的唯一方法。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-03-26T08:19:45.390

你想要这个代码吗？

```
public static enum FieldIndex {
    HDB_TRX_ID,     //TRX ID
    HDB_SYS_ID      //SYSTEM ID
}

public String print(ArrayList<String> itemName){
    return itemName.get(FieldIndex.HDB_TRX_ID.ordinal());
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-23T09:49:39.803

在我看来，最易读的版本

```
public enum PIN_PULL_RESISTANCE {
    PULL_UP {
        @Override
        public int getValue() {
            return 1;
        }
    },
    PULL_DOWN {
        @Override
        public int getValue() {
            return 0;
        }
    };

    public abstract int getValue();
} 
```

# c - 递归删除目录

> ID：13792116
> 
> 赞同：1
> 
> 时间：2012-12-09T21:35:55.663
> 
> 标签：c, unix

我已经尝试过多次编写一个函数来删除目录和目录中的文件，例如`rm -r`，但我没有设法做到这一点。我尝试过的技术是：

```
/* rm command */
#include <fts.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/stat.h>
#include <sys/types.h>

#define DEBUG

int rm_file(const char **argv);
int rm_tree(const char **argv);
void usage(void);

int rflag = 0;

int main(int argc, char *argv[])
{
    int ch;

    while((ch = getopt(argc, argv, "Rr")) != -1) {
        switch(ch) {
            case 'R':
            case 'r':
                rflag = 1;
                break;
            default:
                usage();
        }
    }
    argc -= optind;
    argv += optind;

    while(*argv) {
        if(rflag)
            rm_tree(argv);
        else
            rm_file(argv);
        argv++;
    }

    return 0;
}

int rm_tree(const char **argv)
{
    FTS *ftsp;
    FTSENT *ftsent;

    if((ftsp = fts_open(argv, 0, NULL)) == NULL) {
        fprintf(stderr, "error: rm: can't stat directory\n");
        return 1;
    }

    while((ftsent = fts_read(ftsp)) != NULL) {
        switch(ftsent->fts_info) {
            case FTS_DNR:
                fprintf(stderr, "error: rm: can't stat directory\n");
                break;
#ifndef DEBUG
            case FTS_D:
                rm_tree(&ftsent->fts_accpath);
                break;
#endif
            case FTS_F:
                if(unlink(ftsent->fts_accpath) == -1) {
                    fprintf(stderr, "error: rm: can't remove file\n");
                }
                break;
            case FTS_SL:
                if(unlink(ftsent->fts_accpath) == -1) {
                    fprintf(stderr, "error: rm: can't remove file\n");
                }
                break;
            default:
                if(unlink(ftsent->fts_accpath) == -1) {
                    fprintf(stderr, "error: rm: can't remove file\n");
                }
                break;
        }
    }

    if(rmdir(*argv) == -1) {
        fprintf(stderr, "error: rm: can't remove directory\n");
        return 1;
    }

    return 0;
}

int rm_file(const char **argv)
{
    struct stat st;

    if(lstat(*argv, &st) == -1) {
        fprintf(stderr, "error: rm: can't stat file\n");
        return 1;
    }

    if(S_ISDIR(st.st_mode)) {
        fprintf(stderr, "error: rm: can't remove directory\n");
        return 1;
    }

    if(unlink(*argv) == -1) {
        fprintf(stderr, "error: rm: can't remove file\n");
        return 1;
    }

    return 0;
}

void usage(void) 
{
    fprintf(stderr, "usage: rm file1 file2\n");
    exit(1);
} 
```

但总是会出现分段错误，或者它不起作用。我在寻找正确的方向吗？我已经尝试过使用`ftw()`函数和`opendir()`函数，但我只是无法弄清楚如何让它工作。如果有人可以提供帮助，我将不胜感激。

调试标签中包含的代码往往会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:40:13.360

通过分析`rm`开源操作系统的源代码，例如[OpenBSD](http://www.openbsd.org/cgi-bin/cvsweb/src/bin/rm/rm.c?rev=1.27)（查找`rm_tree`），看看它在实践中是如何完成的。

# mysql - 我的 MySQL 查询似乎破坏了 MySQL 服务器（也许它只需要优化）

> ID：13792117
> 
> 赞同：0
> 
> 时间：2012-12-09T21:36:27.430
> 
> 标签：mysql, select, insert, query-optimization

当我运行这个查询时，它似乎从来没有做任何事情，cpu 使用率上升到 30% 并保持在那里，最终 mysql 工作台超时。有没有办法更有效地做到这一点？

```
insert ignore into tbl_sub_model_image
select sub_model_sk,tbl_image.image_id
from tbl_sub_model sm
inner join autotalk_identicar_old.ad_vehicle av on av.vehiclekey=sm.oldid
inner join autotalk_identicar_old.id_ad_link al on av.vehiclekey=al.rbvehiclekey
inner join autotalk_identicar_old.id_features f on f.vehiclekey=al.idvehiclekey
inner join autotalk_identicar_old.id_images i on i.id_vehiclekey=f.vehiclekey
inner join tbl_image im on i.id_images.image=im.img_lnk
where substring(id_images.image,-4) <> '.tif'; 
```

基本上在旧数据库中，ad_vehicle 中的一条记录链接到 id_ad_link 中的一条（？）。id_ad_link 中的许多都与 id_features 中的一个相关联，并且 id_features 和 id_images 是一一对应的。在 tbl_sub_model（位于新数据库中）中，我有一个名为 oldid 的字段，它是 ad_vehicle 的主键。

我想要做的是，我有一个 tbl_image 但图像已分配新的自动编号，所以我需要将旧数据库连接在一起，以找出我需要将哪些图像分配给新模型中的哪个子模型。文件路径。

所有的表都没有超过 60,000 条记录，但它似乎永远无法执行，奇怪的是在过去的几个月里，我一直在另一个虚拟机上很好地执行它，但现在在一个新的它只是行不通。它要么陷入循环，要么永远持续下去。

有人可以帮我修复/改进它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:41:52.267

找出问题所在。连接上使用的一些列没有被索引，所以这就是为什么要花很长时间来进行查询。

所以这个故事的寓意是......索引是你的朋友

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:14:02.907

好像你可以剪掉一些连接......

```
insert ignore into tbl_sub_model_image
select sub_model_sk,tbl_image.image_id
from tbl_sub_model sm
inner join autotalk_identicar_old.ad_vehicle av on av.vehiclekey=sm.oldid
inner join autotalk_identicar_old.id_images i on i.id_vehiclekey=av.vehiclekey
inner join tbl_image im on i.id_images.image=im.img_lnk
where substring(id_images.image,-4) <> '.tif'; 
```

# string - KMP 前缀表

> ID：13792118
> 
> 赞同：43
> 
> 时间：2012-12-09T21:36:30.487
> 
> 标签：string, algorithm, data-structures, pattern-matching

我正在阅读有关`KMP`字符串匹配的信息。
它需要通过构建前缀表对模式进行预处理。
例如，对于字符串`ababaca`，前缀表是： `P = [0, 0, 1, 2, 3, 0, 1]`
但我不清楚数字显示的是什么。我读到它有助于在模式变化时找到匹配的模式，但我无法将此信息与表中的数字联系起来。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-09T21:40:09.190

每个数字都属于相应的前缀（“a”，“ab”，“aba”，...），并且对于每个前缀，它表示该字符串与前缀匹配的最长后缀的长度。我们在这里不把整个字符串算作后缀或前缀，它被称为自后缀和自前缀（至少在俄语中，不确定英语术语）。

所以我们有字符串“ababaca”。让我们看看它。KMP 为每个非空前缀计算前缀函数。让我们定义`s[i]`为字符串，`p[i]`作为前缀函数。前缀和后缀可能重叠。

```
+---+----------+-------+------------------------+
| i |  s[0:i]  | p[i]  | Matching Prefix/Suffix |
+---+----------+-------+------------------------+
| 0 | a        |     0 |                        |
| 1 | ab       |     0 |                        |
| 2 | aba      |     1 | a                      |
| 3 | abab     |     2 | ab                     |
| 4 | ababa    |     3 | aba                    |
| 5 | ababac   |     0 |                        |
| 6 | ababaca  |     1 | a                      |
|   |          |       |                        |
+---+----------+-------+------------------------+ 
```

计算字符串 S 的前缀函数的简单 C++ 代码：

```
vector<int> prefixFunction(string s) {
    vector<int> p(s.size());
    int j = 0;
    for (int i = 1; i < (int)s.size(); i++) {
        while (j > 0 && s[j] != s[i])
            j = p[j-1];

        if (s[j] == s[i])
            j++;
        p[i] = j;
    }   
    return p;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-19T01:12:31.940

此代码可能不是最短的，但易于理解的代码流。用于计算前缀数组的简单 Java 代码

```
 String pattern = "ababaca";
    int i = 1, j = 0;
    int[] prefixArray = new int[pattern.length];
    while (i < pattern.length) {

        while (pattern.charAt(i) != pattern.charAt(j) && j > 0) {
            j = prefixArray[j - 1];

        }
        if (pattern.charAt(i) == pattern.charAt(j)) {
            prefixArray[i] = j + 1;
            i++;
            j++;

        } else {
            prefixArray[i] = j;
            i++;
        }
    }

    for (int k = 0; k < prefixArray.length; ++k) {
        System.out.println(prefixArray[k]);
    } 
```

它产生所需的输出-

0 0 1 2 3 0 1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-11T09:42:48.880

# Python 实现

```
p='ababaca'

l1 = len(p)

j = 0
i = 1
prefix = [0]

while len(prefix) < l1:
    if p[j] == p[i]:
        prefix.append(j+1)
        i += 1
        j += 1
    else:
        if j == 0:
            prefix.append(0)
            i += 1
        if j != 0:
            j = prefix[j-1]

print prefix 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-04T21:04:18.407

我已经尝试过使用 Javascript，请打开以获取建议。

```
const prefixArray = function (p) {
let aux = Array(p.length).fill(0);

// For index 0 the matched index will always be 0, so we will we start from 1
let i = 1;
let m = 0; // mismatched index will be from 0th

// run the loop on pattern length
while ( i < p.length) {

    // 3 Cases here
    // First when we have a match of prefix and suffix of pattern
    if(p.charAt(i) === p.charAt(m)) {
        // increment m
        m++;
        // update aux index
        aux[i] = m;
        // update the index.
        i++;
    } 
    // Now if there is no match and m !=0 means some match happened previously
    // then we need to move back M to that index
    else if(p.charAt(i) !== p.charAt(m) && m !== 0) {
        m = aux[m-1];
        // we dont want to increment I as we want to start comparing this suffix with previous matched
    } else {
        // if none of the above conditions then
        // just update the current index in aux array to 0
        aux[i] = 0; // no match
        i++; // shift to the next char
    }
}

return aux; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-13T20:49:04.440

## 无偏移版本

这是基于我所说的*todo indexing*的想法：

```
int confix[1000000];

void build_confix(char *pattern) {
    // build len %
    int len_pat = strlen(pattern);

    // i, j using todo-indexing.
    int j, i;
    confix[j = 1] = i = 0;

    while (j < strlen(pattern)) {
        whlie (i && pattern[j] != pattern[i])
            // length -> length mapping, no offset
            i = confix[i];
        confix[++j] = pattern[j] == pattern[i]?
            ++i:
              0;
    }
} 
```

然后你可以使用这个`confix[]`表找到`needle`中间的 s ( `test`)

```
int kmp_find_first(char *test, char *needle) {
    int j = 0, i = 0;
    while (j < strlen(test)) {
        while (i && test[j] != needle[i])
            i = confix[i];
        ++j; test[j] == needle[i]?
            ++i:
              0;
        if (i == strlen(needle))
            return j - strlen(needle);
    }
    return -1;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-02T20:01:14.870

字符串文本 = "ababbabbababbabbabbabb"; 静态 int arr[30];

```
int i = 1;
while (i < text.length())
{
    int j = 0;
    int value = 0;
    while (((i + j) < text.length()) && (text[j] == text[i + j]))
        val[i + j] = ++value, j++;
    i += j + 1;
} 
```

存储在 val[] 中的所需输出

# python - 意外的 Python 打印行为

> ID：13792119
> 
> 赞同：1
> 
> 时间：2012-12-09T21:36:32.450
> 
> 标签：python

刚刚遇到了以下我无法理解的 Pythonic 行为：

```
names = ["Paul", "Mary", "Susan"]
names.sort()

def valuate(string):
    print ord('A')
    return sum(ord(s) for s in string)

i = 1
for name in names:
    print i, name, valuate(name)
    i += 1 
```

我希望输出：

```
65
1 Mary 409
65
2 Paul 402
65
3 Susan 522 
```

而是输出：

```
1 Mary 65
409
2 Paul 65
402
3 Susan 65
522 
```

似乎 print 语句已经尝试输出 3 个元素，并且当调用 print ord('A') 时，是否将其作为第三条语句？

我没有找到对这种行为的任何引用，也不知道如何在谷歌上搜索它。顺便说一句，我在这里使用 Python 2.7.3。Anyhoo，我在这里很困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T21:41:43.920

这不仅仅是`print`语句，而是函数调用。

```
print i, name, valuate(name) 
```

打印`i`, then `name`, 然后调用`valuate`打印 65 （和一个新行）然后在返回时`print`语句继续打印返回值（和另一个换行符）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T21:42:39.400

事件顺序如下：

```
print i,
print name,
val = valuate(name) # prints ord('A')
print val 
```

这可以通过查看生成的字节码来确认`print i, name, valuate(name)`：

```
 11          19 LOAD_FAST                0 (i)
             22 PRINT_ITEM          
             23 LOAD_FAST                1 (name)
             26 PRINT_ITEM          
             27 LOAD_GLOBAL              1 (valuate)
             30 LOAD_FAST                1 (name)
             33 CALL_FUNCTION            1
             36 PRINT_ITEM          
             37 PRINT_NEWLINE 
```

我不知道这个评估顺序是否得到保证（快速搜索没有发现任何东西）。我绝对不会依赖它，因此不会编写这样的代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T21:41:45.947

这很简单。您的 print 语句懒惰地评估参数。它首先打印 i，然后是 name，然后调用 valuate。评估打印 65。然后您的打印语句打印评估的结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T21:53:26.257

您遇到的惊喜是该[`print`语句](http://docs.python.org/2/reference/simple_stmts.html#the-print-statement)会在计算下一个表达式之前打印出它给出的每个表达式。也就是说，类似的语句`print A, B, C`等同于：

```
print A, # note, the trailing comma suppresses the newline
print B,
print C 
```

正如您对单独的语句所期望的那样，在评估 B 或 C 之前写出 A。

这个惊喜可能是 Python 3 取消了`print`支持内置`print`函数的声明的部分原因，该函数的行为更像您的预期（它的所有参数都在函数运行之前进行评估）。

`print`在 Python 2 中，如果您想使用`future`导入，您可以获得 Python 3 样式：

```
from __future__ import print_function 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-09T21:47:26.177

我认为一个小的“，”会让事情更容易掌握。

```
names = ["Paul", "Mary", "Susan"]
names.sort()

def valuate(string):
    print ord('A'),
    return sum(ord(s) for s in string)

i = 1
for name in names:
    print i, name, valuate(name)
    i += 1 
```

现在输出：

```
1 Mary 65 409
2 Paul 65 402
3 Susan 65 522 
```

后面的逗号`print`使其不在末尾打印换行符。所以现在你可以看到它`valuate`首先打印`ord('A')`然后返回外部打印的输出。（我也缩进了`i += 1`行）

# php - 为什么 get_memory_usage 会保留内存？

> ID：13792125
> 
> 赞同：1
> 
> 时间：2012-12-09T21:38:44.480
> 
> 标签：php, php-internals

如果我在我的计算机上运行以下 PHP 程序

```
echo memory_get_usage();
echo "|";
echo memory_get_usage();
echo "|";
echo memory_get_usage(); 
```

我得到输出

```
635048|635080|635080 
```

由此看来，最初的调用似乎`memory_get_usage`是保留 32KB 的内存。`echo`我在没有声明的情况下尝试了这个

```
echo memory_get_usage();
echo memory_get_usage();
echo memory_get_usage(); 
```

并得到了类似的结果

```
634504634536634536
//broken out 634504, 634536, 634536 
```

虽然删除`echo`语句减少了脚本的整体内存使用量，但在初始调用`memory_get_usage`. 为什么是这样？

我已经在多台计算机上尝试过，虽然实际数字不同，但差距保持不变。

如果我看一下（我认为是）这个函数的来源

```
//File: php-5.3.19/ext/standard/var.c
PHP_FUNCTION(memory_get_usage) {
    zend_bool real_usage = 0;

    if (zend_parse_parameters(ZEND_NUM_ARGS() TSRMLS_CC, "|b", &real_usage) == FAILURE) {
        RETURN_FALSE;
    }

    RETURN_LONG(zend_memory_usage(real_usage TSRMLS_CC));
} 
```

我在那里看不到任何必须说“将这个变量保留在内存中”的东西。然而，我已经好几年没有认真地写过 C 语言了，我也从来没有专业地破解过 PHP 源代码，而且我跟踪执行的能力是零。

所以，我的问题是，是什么保留了 32KB 的内存，这在 PHP 源代码中发生在哪里和/或我如何从`memory_get_usage`入口点跟踪它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:05:24.060

这可能是必须创建输出的结果。也许涉及一些输出缓冲？

在命令提示符处：

```
[charles@lobotomy /tmp]$ php --version
PHP 5.4.9 (cli) (built: Nov 22 2012 12:59:04)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    with Xdebug v2.2.0rc1, Copyright (c) 2002-2012, by Derick Rethans
[charles@lobotomy /tmp]$ cat test.php
<?php
#echo '|';
echo memory_get_usage();
echo '|';
echo memory_get_usage();
echo '|';
echo memory_get_usage();
echo '|';

[charles@lobotomy /tmp]$ php test.php
227024|227056|227056| 
```

当 test.php 在第一次测量之前修改为 echo 时，我们得到

```
[charles@lobotomy /tmp]$ cat test.php
<?php
echo '|';
echo memory_get_usage();
echo '|';
echo memory_get_usage();
echo '|';
echo memory_get_usage();
echo '|';

[charles@lobotomy /tmp]$ php test.php
|227192|227192|227192| 
```

# c - 在 C 中搜索、排序和打印已排序的 2D 整数数组

> ID：13792126
> 
> 赞同：0
> 
> 时间：2012-12-09T21:38:48.520
> 
> 标签：c, sorting, search, multidimensional-array, max

我无法在二维整数数组中打印最大值的位置。即元素数组[33][2] 的值为500 是最大值，其中[33] 表示第33 周，[2] 表示第2 天。我想 printf （“最大值为 500，在第 : X 天找到”）以及 printf （“最大的一周是 : Y”）（对于第一周，它是连续 7 天之内的最大总和达到的一周）

此外，当我尝试对整数的二维数组进行排序时，排序后的版本的打印没有排序......我正在使用带 temp 的冒泡排序：

```
for (i=0; i<100;i++){
for(j=0;j<7;j++){
fscanf(filetoreadfrom,"%d\n",&array[i][j]);

    if(array[i][j] < array[i][j+1]){

    temp=array[i][j];
    array[i][j]=array[i][j+1];
    array[i][j+1]=temp;
    }}} 
```

我搞不清楚了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:48:24.797

您在读取所有数据之前对数据进行排序。首先读取数据：

```
for (i=0; i<100;i++){
  for(j=0;j<7;j++){
    fscanf(filetoreadfrom,"%d\n",&array[i][j]);
  }
 } 
```

然后进行排序：

```
for (i=0; i<100;i++){
  for(j=0;j<7;j++){
    if(array[i][j] < array[i][j+1]){
      temp=array[i][j];
      array[i][j]=array[i][j+1];
      array[i][j+1]=temp;
    }
  }
} 
```

而且您的排序算法不正确。例如，当`j`为 6 时，该语句`array[i][j]=array[i][j+1];`尝试读取`array[i][7]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:02:15.607

只是一些随机的想法：索引总是从 0 开始。不需要排序来找到最大的数字。您是否考虑过几天或几周可能具有相同值的可能性？如果您对数组进行排序，您希望如何知道数据从哪里开始？

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:51:14.357

在冒泡排序中，您必须不断循环整个数组，直到您不必在特定循环上交换任何元素。您只循环一次，除非数组几乎开始排序，否则它将不起作用。

`[i][j+1]`此外，在for 循环完成之前，您不会读取元素`[i][j]`，因此您将`[i][j]`与存储在`[i][j+1]`. 在对它们进行排序之前阅读所有元素！

# linux - 比解析 /proc/net/tcp 更快的方法

> ID：13792129
> 
> 赞同：1
> 
> 时间：2012-12-09T21:39:35.297
> 
> 标签：linux

我从 /proc/net/tcp src ip、dest ip、src 端口、dest 端口、uid 读取有关当前 tcp 连接的信息，我使用此信息获取用户 id，它是 pcap lib 捕获的 ip 数据包的所有者。

有没有更快的方法来做到这一点？如何从linux内核读取这些信息，任何lib？在创建、关闭连接时可能有一些事件可用？

# android - Android 模拟器：如何以编程方式刷新图片库？

> ID：13792137
> 
> 赞同：1
> 
> 时间：2012-12-09T21:40:26.567
> 
> 标签：android, refresh, android-sdcard, android-gallery, android-image

我被卡住了，所以我希望有人能提供帮助:) 我有一个活动，我可以从画廊加载图像，然后它会显示在屏幕上。在该屏幕上，我可以选择删除该图像。当我选择删除图像的选项时，图像已成功删除，但当我选择加载另一张图像时，它仍显示在图库中。因此，用户仍然可以从图库中选择旧图片，但在这种情况下，它不会显示在屏幕上，因为它已被删除。图片删除后如何刷新图库？

我已经尝试过了，但它似乎不起作用：

```
sendBroadcast(new Intent(
            Intent.ACTION_MEDIA_MOUNTED,
            Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

我想避免每次删除某些图像时手动扫描 SD 卡。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T03:47:44.557

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
        Uri.parse("file://" +  Environment.getExternalStorageDirectory()))); 
```

我在 froyo 中使用了上面的代码，结果代码在 froyo 中运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:35:47.840

问题是我在删除时传递的是图像 URI 而不是绝对路径，所以它不成功。代码应如下所示。

```
File file = new File("some URI I received as a result of one method")
path = file.getAbsolutePath();
File f = new File(path);
    if (f.exists()) {
        if (f.delete()) {
            Log.w("DELETED","file Deleted");
        } else {
            Log.w("NOT DELETED","file not Deleted");
        }
    }

    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED,
            Uri.parse("file://" +  Environment.getExternalStorageDirectory())));

    imageViewField.setImageBitmap(null); 
```

因此，该方法有效，但文件根本没有被删除，所以它仍然在图库中。

# html - iPhone 5 的 homescreen-webapp 的适配高度

> ID：13792140
> 
> 赞同：18
> 
> 时间：2012-12-09T21:40:33.907
> 
> 标签：html, height, meta-tags, iphone-web-app

我在拟合 webapp（主屏幕）的高度时遇到问题。我使用以下元标记：

```
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" /> 
```

我的问题是，屏幕顶部和底部都有黑条。首先我认为这是 iPhone 5 的错误，因为屏幕更高。但是今天我看到了一个 webapp (apps.ft.com/)，它非常适合 iphone5 的屏幕。

任何想法，我做错了什么？

这是我完整的相关元标签

```
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" href="img/icons/ios_icon_52.png">
<link rel="apple-touch-icon" href="img/icons/ios_icon_52.png">
<link rel="apple-touch-icon" sizes="72x72" href="img/icons/ios_icon_72.png">
<link rel="apple-touch-icon" sizes="114x114" href="img/icons/ios_icon_114.png"> 
```

**编辑：**经过一个小时的搜索，我找到了如何强制浏览器适应全高度的解决方案。当我定义启动图像（apple-touch-startup-image）时，我的 iphone 只适合高度。这是我的代码：

```
<!-- iPhone 4 (Retina) -->
<link href="img/icons/apple-touch-startup-image-640x920.png" 
      media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" 
      rel="apple-touch-startup-image">
<!-- iPhone 5 -->
<link href="img/icons/apple-touch-startup-image-640x1096.png" 
      media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" 
      rel="apple-touch-startup-image"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-12T19:05:33.490

我也为此苦苦挣扎了好几个小时，直到我终于发现是我的视口元标记中的“宽度”定义导致了这个问题！删除宽度为我解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:58:23.690

用这个

```
<meta name="viewport" content="user-scalable=0, initial-scale=1.0" /> 
```

对于启动图像和触摸图标，请阅读此 [iOS Web 应用程序（尤其是 iPad）的多个“apple-touch-startup-image”分辨率？](https://stackoverflow.com/questions/4687698/mulitple-apple-touch-startup-image-resolutions-for-ios-web-app-esp-for-ipad/10011893#10011893)

;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T15:53:34.707

完全移除视口宽度会导致比它解决的问题更多的问题。为了让 webapps 有正确的视口高度，视口宽度需要大于 320（不幸的是，这是`device-width`向浏览器报告的值）。这就是我更新视口元标记的方式：

```
<meta name="viewport" content="width=320.1, user-scalable=0, initial-scale=1.0" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-19T00:54:55.553

我也有这个问题，我通过删除 width=device-width 解决了

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-19T13:51:13.887

以下是其他人在同一主题上发布的针对此问题的一些很好的答案：

*   [流浪者](https://stackoverflow.com/questions/12656200/how-can-i-make-my-web-app-iphone-5-compatible)
*   [向量](https://stackoverflow.com/questions/15850646/webapp-on-iphone-5-shows-wrong-height)

# javascript - 使用名为anchor的URL通过javascript打开一个div

> ID：13792141
> 
> 赞同：1
> 
> 时间：2012-12-09T21:40:36.123
> 
> 标签：javascript, anchor

我的页面上有一个 div 隐藏溢出文本（具有固定高度）。在同一页面上，我有一个包含以下代码的链接，单击该链接时，将最大化 div 的高度并显示全文：

```
javascript:showcontent('content2') 
```

我只是想知道如何设置一个命名的锚点，例如[http://site.com/jobs#showcontent](http://site.com/jobs#showcontent)，它也会自动打开 div。当然，如果 #showcontent 没有添加到 URL 中，它的行为也是一样的。

有任何想法吗？

谢谢！

# express - 为什么我的 Express / Jade 应用程序呈现空白页面？

> ID：13792142
> 
> 赞同：0
> 
> 时间：2012-12-09T21:40:38.237
> 
> 标签：express, pug

我刚刚在我的 express 项目中添加了另一个 Jade 模板，现在它呈现空白页面，带有空的 head 和 body 标签。它在 index.jade 扩展 layout.jade 时有效，但如果 layout.jade 扩展 logo.jade 则中断。控制台中没有错误。

这是该项目的简化版本，效果很好。

应用程序.js：

```
var express = require('express'),
    http = require('http'),
    path = require('path'),
    request = require('request');

var app = express();

app.configure(function(){
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view options', {'layout': false});
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
    app.use(express.errorHandler());
});

app.get('/', function(req, res){
    res.render('index', {title: 'A Title'});
});

http.createServer(app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

意见/index.jade：

```
extends layout

block content
    p Hello 
```

意见/layout.jade：

```
doctype 5
html(xmlns='http://www.w3.org/1999/xhtml')
    head
        title= title
        link(rel='stylesheet', href='/stylesheets/style.css')
    body
        h1= title
        block content 
```

**添加 logo.jade 并从 layout.jade 扩展它会破坏 Jade 渲染。**

```
GET http://localhost:3000/ 
```

回应

```
200 OK
content-length: 0 
```

修改意见/layout.jade：

```
extends logo

doctype 5
html(xmlns='http://www.w3.org/1999/xhtml')
    head
        title= title
        link(rel='stylesheet', href='/stylesheets/style.css')
    body
        block logo
        h1= title
        block content 
```

新观点/logo.jade：

```
block logo
    svg(xmlns='http://www.w3.org/2000/svg')
        rect(
            stroke='black'
            fill='blue'
            x='45'
            y='45'
            width='20px'
            height='30px'
            stroke-width='1') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:46:31.670

注意布局、模板和局部。

当您告诉 express 使用 Jade 渲染页面时，它会查找匹配的模板文件（例如 logo.jade）。这是入口点，并从那里呈现页面。

如果你想使用一个布局，你必须在你的模板文件中告诉它。如果你查看 index.jade，它说 layout.jade 应该被扩展。在你的 logo.jade 中没有这样的声明，所以没有任何东西可以渲染，因为 logo 块没有定义。如果你想使用partials（包括在jade中），你必须在模板文件中说明。

布局文件中的块只是可以扩展或覆盖甚至留空的占位符。我建议将徽标直接添加到您的布局中或包含它。有关更多信息，请参阅[有关包含的 Jade 文档](https://github.com/visionmedia/jade#includes)。

所以你的 layout.jade 应该是这样的：

```
doctype 5
html(xmlns='http://www.w3.org/1999/xhtml')
    head
        title= title
        link(rel='stylesheet', href='/stylesheets/style.css')
    body
        include includes/logo
        h1= title
        block content 
```

而新的includes/logo.jade：

```
svg(xmlns='http://www.w3.org/2000/svg')
    rect(
        stroke='black'
        fill='blue'
        x='45'
        y='45'
        width='20px'
        height='30px'
        stroke-width='1') 
```

# java - 将数千行插入mysql数据库的最快方法？

> ID：13792146
> 
> 赞同：0
> 
> 时间：2012-12-09T21:41:01.287
> 
> 标签：java, mysql, optimization

谁能建议将数千/数十万行插入mysql表的最快方法？现在我正在使用 executeBatch，但我想知道是否有更快的方法来做到这一点？

```
try {
        Connection con = dataSource.getConnection();
        Statement statement = con.createStatement();

        for(int i = 0; i < value; i++) {
            DateTime f = DateTime.now().minusDays(i % 28);
            String q1 = "INSERT INTO table1_test (txid, time, badgeid, event_type, sensorid, shift, unitid) VALUES ('"+i+"', '"+f.toString("yyyy-MM-dd HH:mm:ss")+"', 'NA', 'EN', '100', 'A', '1')";
            String q2 = "INSERT INTO table2_test (txid, time, badgeid, sensorid, shift, unitid) VALUES ('"+i+"', '"+f.toString("yyyy-MM-dd HH:mm:ss")+"', 'NA', '100', 'A', '1')";
            String q3 = "INSERT INTO table3_test (txid, badgeid, time, shift, compliant, sensorid, unitid) VALUES ('"+i+"', 'NA', '"+f.toString("yyyy-MM-dd HH:mm:ss")+"', 'A', 1, '100', '1')";
            statement.addBatch(q1);
            statement.addBatch(q2);
            statement.addBatch(q3);
        }
        statement.executeBatch();
        statement.close();
        con.close();
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:04:31.073

尝试使用 'LOAD DATA INFILE' 查询类型将数据导入数据库。我认为，使用 jdbc 也应该是可能的。

# algorithm - 计算数组中索引对的总数，使得 arr[i] < arr[j] 和 i < j

> ID：13792147
> 
> 赞同：0
> 
> 时间：2012-12-09T21:41:07.540
> 
> 标签：algorithm

[本来想在这里](https://stackoverflow.com/questions/13791288/count-all-pairs-of-indices-in-array-such-that-arri-arrj)问这个，但因为我忘了提到指数上的条件，所以提出了一个新问题。

问题是给定一个未排序的数组，找到和的索引`i, j`对的总数。复杂性应该是线性的或尽可能接近它。`i < j``arr[i] < arr[j]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:44:34.760

如果目标要找到`i < j`这样的对数`arr[i] > arr[j]`，则它将是反转计数，这可以通过对数组进行合并排序并计算每个项目移过多少值来确定。

在这里，如果我们按降序排序，我们也可以这样做。

```
int pairs_count(int[] arr, int lo, int hi) {
    if (hi <= lo) return 0;
    int mid = (lo+hi)/2;
    int count = pairs_count(arr, lo, mid);
    count += pairs_count(arr, mid+1,hi);
    count += merge(arr, lo, mid, hi);
    return count;
}

int merge(int[] arr, int lo, int mid, int hi) {
    int[] scratch = new int[hi-lo+1];
    int l = lo, r = mid+1, k = 0, count = 0;
    while(l <= mid && r <= hi) {
        if (arr[r] > arr[l]) {
            scratch[k++] = arr[r++];
            count += mid-l+1;
        } else {
            scratch[k++] = arr[l++];
        }
    }
    while(l <= mid) {
        scratch[k++] = arr[l++];
    }
    while(r <= hi) {
        scratch[k++] = arr[r++];
    }
    for(k = 0; k < scratch.length; ++k) {
        arr[lo+k] = scratch[k];
    }
    retrun count;
} 
```

调用它`pairs_count(arr, 0, arr.length - 1);`。

# hibernate - 休眠对象复制

> ID：13792149
> 
> 赞同：1
> 
> 时间：2012-12-09T21:41:14.707
> 
> 标签：hibernate, orm

例如，我有以下两个表的数据库：Home 和 Person。这些表之间存在一对多的关系。许多人住在一个​​房子里。

现在，假设以下情况。我从数据库加载一个人，结果我加载了这个人居住的房子。然后我加载另一个住在同一家的人。问题是我正在加载什么：一个新的家庭对象或为第一人加载的相同对象？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:01:22.797

同一个 Home 对象。Hibernate 通过 PRIMARY KEY 跟踪它已经拥有哪些对象，当 Person 构造函数来填充 Home 时，将使用对现有对象的引用。

另一方面，您应该注意 Home 可能会“懒惰地”获取，在这种情况下，只有这个 Home 的代理（占位符）将是两个 Person 的字段。

# backbone.js - Backbone.js：this.collection.models 返回空数组

> ID：13792150
> 
> 赞同：3
> 
> 时间：2012-12-09T21:41:16.647
> 
> 标签：backbone.js

我正在使用 Backbone.js 显示来自 API 请求的项目（站）列表。

我的问题似乎被问了很多，我已经尽可能多地解决了其他问题的解决方案，但我仍然有一个问题。

下面是代码：

```
(function($) {

    _.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g
    };
//  models
    var Station = Backbone.Model.extend({
        urlRoot: '../api/admin/stations/',
        idAttribute: "_id",
        defaults: {
            _id: null,
            country: 'ZA'
        }
    });

//  collections
    var StationList = Backbone.Collection.extend({
        model: Station,
        url: '../api/admin/stations/'
});

//  views
/*
 * Station View
 */
    var StationView = Backbone.View.extend({
        tagName: 'article',
        className:  'station-container',
        template: $("#stationListTemplate").html(),

        render: function() {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }
    });

/*
 * Master View (Station List)
 */
    var StationListView = Backbone.View.extend({
        el: $("#stationListView"),

        initialize: function() {
            this.collection = new StationList();
            this.collection.fetch({
                success: this.render()
            });
        },
        render: function() {
            var that = this;
            console.log(this.collection.models); // RETURNS EMPTY ARRAY
            _.each(this.collection.models, function (item) {
// NOTHING HAPPENS AS THE ARRAY IS EMPTY
                that.renderStation(item);
            }, this);
        },
        renderStation: function (item) {
            var stationView = new StationView({
                model: item
            });
            console.log(stationView);
            this.$el.append(stationView.render().el);
        }
    });

//  load views
    var _stationList = new StationListView;
} (jQuery)); 
```

我已经在上面的 CAPS 中添加了我收到错误的注释。当我`console.log(that)`或`console.log(this.collection)`我可以看到该集合，但在那之后我无法立即访问它的模型。

我只是不知道我做错了什么导致我无法访问模型。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:49:07.660

我引用你的代码：

```
success: this.render() 
```

我很确定你应该写

```
success:this.render 
```

或者

```
success:function(){
 this.render()
} 
```

因为当您定义成功回调（并根据您的代码执行它）时，尚未获取该集合。虽然可能还有其他错误，但这一个很明显

# c# - 指定哪个程序集用于具有相同名称和命名空间的类

> ID：13792156
> 
> 赞同：2
> 
> 时间：2012-12-09T21:41:52.427
> 
> 标签：c#, windows-phone-7, windows-phone-8

> **可能重复：**
> [两个程序集中具有相同名称的类（故意）](https://stackoverflow.com/questions/3018419/class-with-same-name-in-two-assemblies-intentionally)

假设有两个不同的程序集，它们都包含一个具有相同名称和相同命名空间的类。

有没有办法指定我想使用哪个版本的类？

这是实际情况。我有一个为 wp7 创建的应用程序，我想升级到 wp8。我使用了 WP7 Toolkit 中的 LongListSelector，它现在包含在 WP8 标准 SDK 中，但有一些相当大的变化。我想尽量减少代码更改，所以我想继续使用 WP7 Toolkit 中的那个，但是相同的类 (LongListSelector) 包含在 WP8 应用程序所需的程序集中，所以我不得不删除对 Toolkit 的引用. 我想将这两个程序集都保留在项目中，并使用 WP7 工具包中的 LongListSelector 类。

这可能吗？

# asp.net - Umbraco 神奇地恢复到“看起来还有更多工作要做”

> ID：13792160
> 
> 赞同：4
> 
> 时间：2012-12-09T21:42:27.637
> 
> 标签：asp.net, umbraco

我有一个客户，他报告了 5/6 次，该网站以某种方式返回到未发布模式。我们不确定是什么原因造成的，通常会在根本没有人在网站上工作时发生。他们确实有一些人过去曾有过并且可能仍然有恶意关闭网站的意图（因此这也可能是一个问题）。

1.  Umbraco 中是否存在任何已知的安全问题，用户可以恶意取消发布整个网站？

2.  Umbraco 中是否有任何错误可能导致这种情况发生？

3.  Umbraco 是否检查数据库中的已发布标志，还是仅在选择显示“还有更多工作要做”消息之前检查 XML 文件的存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:04:23.200

您所指的消息存在于 /install/noNodes.aspx 文件中。

这将表明该站点或至少该站点的主页未发布。这将表明某人或某个进程正在取消发布该站点或主页。首先，我会检查主页上的“属性”选项卡中是否没有设置“取消发布”日期。

还要检查 Umbraco 日志以检查谁取消发布了哪些节点以及何时取消发布。您还可以查看主页的审核历史记录，看看是谁编辑了它。

如果您怀疑有恶意，那么在考虑 Umbraco 的安全问题之前，您肯定需要确定自己的安全性。您需要考虑更改服务器 RDC、SQL 的 sa 和任何 Umbraco 特定密码的密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:25:15.620

如果无法连接到数据库，Umbraco 将显示此页面。

在旧版本的 Umbraco 中，一旦发生这种情况，站点将保持此状态，直到重新发布 - 这似乎已修复（我不确定来自哪个版本）。如果您遇到这种情况并且无法升级，那么解决方法是将以下代码放在 /config/splashes/noNodes.aspx 的顶部：

```
<script runat="server">    
    protected void Page_Load(object sender, EventArgs e)
    {
        Server.ScriptTimeout = 100000;
        var cacheFile = IOHelper.MapPath("/App_Data/umbraco.config");
        try
        {
            var r = XmlReader.Create(cacheFile, new XmlReaderSettings() { DtdProcessing = DtdProcessing.Ignore });
            var d = new XmlDocument();
            d.Load(r);
            var n = d.SelectSingleNode("//root");
            r.Close();
            if (n.ChildNodes.Count == 0)
            {
                Response.Write("Republishing Site......");
                Response.Flush();
            }
            else
            {
                Response.Write("Site Was Already Published......");
                return;
            }
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
            Response.Write("Cache missing, republishing.....");
            Response.Flush();
        }

        Document.RePublishAll();
        library.RefreshContent();

        Response.Write("Completed");
        Response.Flush();

        Response.Redirect("/");

        Response.End();
    }
</script> 
```

(This code wasn't originally mine - I can't remember where I got it from). The code attempts to republish the site so that as soon as the database connection becomes available again the site comes back up.

You may also want to edit the content of /config/splashes/noNodes.aspx to show your users a site maintenance or error message which is more appropriate.

Are you aware of any planned database maintenance around the time your client's site suffered from this? If not, you may need to take a look at their hosting.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T10:05:38.937

我会回应 Digbyswift 所说的一切，此外，网站页面实际上是否在后台显示为未发布？如果它们仍然显示为已发布（即它们未变灰）但未显示在前端，则可能有人在属性选项卡中设置了取消发布日期。如果它是灰色的，那么可能是通过后台办公室的人物理上未发布它）。

如果它显示为已发布，但前端没有任何内容，则 cmsContentXml 表也可能出现问题。发生这种情况时，请检查该表中是否有记录。如果没有，站点会认为它是空的，因为站点 XML 缓存会在站点启动时从该表中重建。如果桌子是空的，则有人或某物正在清理它，这不应该是。

如果您怀疑是恶意用户，请重置系统的所有密码（后台用户和数据库）并确保有权访问 CMS 的每个人都有自己的用户名和密码（并确保他们不知道彼此的详细信息） ，这样您就可以使用审计跟踪将更改锁定到特定用户。

# html - 为什么伪元素 :before 和 :after 出现在我的 DIV 元素前面而不是后面？

> ID：13792161
> 
> 赞同：0
> 
> 时间：2012-12-09T21:42:29.373
> 
> 标签：html, css, pseudo-element

我有这个给定类的 DIV 元素：

```
.slideshow { background: white; width: 700px; height: 300px; padding:10px; margin: 0 auto; position: relative; box-shadow: 0px 0px 5px grey, 0px 10px 20px rgba(0,0,0,.1) inset; } 
```

我定义了这两个伪元素（**:before**和**:after**）：

```
.slideshow:before, .slideshow:after { content: " "; background: green; width: 50%; height: 50%; position: absolute; z-index: -10; } 
```

我的问题是这两个伪元素出现在我的 DIV 前面而不是后面。这种行为有什么具体原因吗？

这是一个示例：[示例](http://jsfiddle.net/XRVGD/)

Javascript 部分有点乱，但我仍在努力。

我还注意到，如果我删除所有 JS 部分，我就不再有这个问题了，但我认为代码中没有任何内容应该修改**幻灯片**DIV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:42:13.847

**已解决：**问题出在我拥有的javascript部分：

```
$('.slideshow').css('-webkit-transform', 'rotate(0deg)'); 
```

删除这条线解决了我的问题。

我猜伪元素**:before**和**:after与属性****transform**不是 100% 兼容。

# c++ - 将一组 QuadTree 节点递归地折叠到它们的父节点中？

> ID：13792166
> 
> 赞同：1
> 
> 时间：2012-12-09T21:43:46.143
> 
> 标签：c++, recursion, quadtree

我无法将四叉树中的一组子节点递归折叠到它们的父节点中。添加、删除和细分工作正常，但是当从树中删除足够多的元素时，树不会将未满的节点折叠到父节点中然后删除它们。

谢谢。

[编辑]

已解决的问题是最终代码。多谢你们。

```
#ifndef QUADTREETEST_QUADTREE_H
#define QUADTREETEST_QUADTREE_H

#include <algorithm>
#include <vector>
#include <a2de_graphics.h>
#include <a2de_math.h>

template<typename T>
class QuadTree {

public:
    QuadTree(a2de::Rectangle bounds);
    ~QuadTree();

    bool Add(std::vector<T>& elems);
    bool Add(T& elem);
    bool Remove(T& elem);
    bool Move(T& elem);
    unsigned long Height();
    unsigned long Divisions();
    void Draw(BITMAP* dest);
    unsigned long NumberOfElementsInTree();

    std::vector<T> Query(a2de::Rectangle area);

    std::vector<QuadTree<T>*> GetSiblings(QuadTree<T>* node);
    static unsigned long GetMaxElementsPerNode();
    static void SetMaxElementsPerNode(unsigned long max_elements);

protected:
private:
    enum CHILD_ELEMENTS {
        CHILD_UPPER_LEFT,
        CHILD_UPPER_RIGHT,
        CHILD_LOWER_LEFT,
        CHILD_LOWER_RIGHT,
    };
    static unsigned long MAX_ELEMENTS;
    QuadTree(QuadTree<T>* parent_node, a2de::Rectangle bounds);
    QuadTree(QuadTree<T>* parent_node, a2de::Rectangle bounds, std::vector<T>& elems);
    void SubDivide();
    void UnSubDivide();
    bool IsLeaf(QuadTree<T>* node);
    std::vector<T> QueryNode(QuadTree<T>* node, a2de::Rectangle area);
    bool RemoveElement(T& elem);

    std::vector<T> _elements;
    a2de::Rectangle _bounds;
    QuadTree<T>* _parent;
    std::vector<QuadTree<T>*> _children;

};

template<typename T>
bool QuadTree<T>::Add(std::vector<T>& elems) {
    for(std::vector<T>::iterator _iter = elems.begin(); _iter != elems.end(); ++_iter) {
        this->Add(*_iter);
    }
}

template<typename T>
std::vector<QuadTree<T>*> QuadTree<T>::GetSiblings(QuadTree<T>* node) {

    std::vector<QuadTree<T>*> siblings;

    //Bad pointer.
    if(node == nullptr) return siblings;

    //Root node can't have siblings. Return queried node.
    if(node->_parent == nullptr) {
        siblings.push_back(node);
        return siblings;
    }
    for(std::size_t i = 0; i < 4; ++i) {
        siblings.push_back(_parent->_children[i]);
    }
    return siblings;

}

template<typename T>
std::vector<T> QuadTree<T>::QueryNode(QuadTree<T>* node, a2de::Rectangle area) {
    std::vector<T> contained_elements;
    if(node->_bounds.Intersects(area)) {
        for(std::vector<T>::iterator _iter = _elements.begin(); _iter != _elements.end(); ++_iter) {
            contained_elements.push_back(*_iter);
        }
        if(IsLeaf(node) == false) {
            std::vector<T> ul_elements = QueryNode(_children[CHILD_UPPER_LEFT], area);
            std::vector<T> ur_elements = QueryNode(_children[CHILD_UPPER_RIGHT], area);
            std::vector<T> ll_elements = QueryNode(_children[CHILD_LOWER_LEFT], area);
            std::vector<T> lr_elements = QueryNode(_children[CHILD_LOWER_RIGHT], area);
            for(std::vector<T>::iterator _iter = ul_elements.begin(); _iter != ul_elements.end(); ++_iter) {
                contained_elements.push_back(*_iter);
            }
            ul_elements.clear();

            for(std::vector<T>::iterator _iter = ur_elements.begin(); _iter != ur_elements.end(); ++_iter) {
                contained_elements.push_back(*_iter);
            }
            ur_elements.clear();

            for(std::vector<T>::iterator _iter = ll_elements.begin(); _iter != ll_elements.end(); ++_iter) {
                contained_elements.push_back(*_iter);
            }
            ll_elements.clear();

            for(std::vector<T>::iterator _iter = lr_elements.begin(); _iter != lr_elements.end(); ++_iter) {
                contained_elements.push_back(*_iter);
            }
            lr_elements.clear();
        }
    }
    return contained_elements;
}

template<typename T>
std::vector<T> QuadTree<T>::Query(a2de::Rectangle area) {
    return QueryNode(this, area);
}

template<typename T>
unsigned long QuadTree<T>::MAX_ELEMENTS = 2;

template<typename T>
unsigned long QuadTree<T>::GetMaxElementsPerNode() {
    return MAX_ELEMENTS;
}

template<typename T>
void QuadTree<T>::SetMaxElementsPerNode(unsigned long max_elements) {
    MAX_ELEMENTS = max_elements;
}

template<typename T>
unsigned long QuadTree<T>::NumberOfElementsInTree() {
    if(IsLeaf(this)) return _elements.size();
    unsigned long num_elements = _elements.size();
    for(std::size_t i = 0; i < 4; ++i) {
        num_elements += _children[i]->NumberOfElementsInTree();
    }
    return num_elements;
}

template<typename T>
unsigned long QuadTree<T>::Divisions() {
    if(IsLeaf(this)) return 0;
    unsigned long num_divisions = 4;
    for(std::size_t i = 0; i < 4; ++i) {
        num_divisions += _children[i]->Divisions();
    }
    return num_divisions;
}

template<typename T>
unsigned long QuadTree<T>::Height() {

    if(IsLeaf(this)) return 0;
    unsigned long height = 1;
    for(std::size_t i = 0; i < 4; ++i) {
        height += _children[i]->Height();
    }
    return height;
}

template<typename T>
bool QuadTree<T>::IsLeaf(QuadTree<T>* node) {
    for(std::size_t i = 0; i < 4; ++i) {
        if(node->_children[i] == false) continue;
        return false;
    }
    return true;
}

template<typename T>
QuadTree<T>::~QuadTree() {
    _elements.clear();
    _parent = nullptr;
    for(std::size_t i = 0; i < 4; ++i) {
        delete _children[i];
        _children[i] = nullptr;
    }
}

template<typename T>
void QuadTree<T>::Draw(BITMAP* dest) {
    if(IsLeaf(this)) {
        _bounds.Draw(dest, _bounds.GetColor(), _bounds.IsFilled());
        return;
    }
    for(std::size_t i = 0; i < 4; ++i) {
        _children[i]->Draw(dest);
    }
}

template<typename T>
QuadTree<T>::QuadTree(a2de::Rectangle bounds) : _elements(), _bounds(bounds), _parent(nullptr), _children(4) {
    _bounds.SetColor(a2de::LIME_GREEN);
    _bounds.SetFill(false);
}

template<typename T>
QuadTree<T>::QuadTree(QuadTree<T>* parent_node, a2de::Rectangle bounds) : _elements(), _bounds(bounds), _parent(parent_node), _children(4) {
    _bounds.SetColor(a2de::LIME_GREEN);
    _bounds.SetFill(false);
}

template<typename T>
QuadTree<T>::QuadTree(QuadTree<T>* parent_node, a2de::Rectangle bounds, std::vector<T>& elems) : _elements(elems), _bounds(bounds), _parent(parent_node), _children(4) {
    _bounds.SetColor(a2de::LIME_GREEN);
    _bounds.SetFill(false);
    Add(elems);
}

template<typename T>
void QuadTree<T>::SubDivide() {
    try {
        //Define 
        double half_width = _bounds.GetWidth() / 2.0;
        double half_height = _bounds.GetHeight() / 2.0;
        if(half_width <= 1.0 || half_height <= 1.0) return;

        a2de::Vector2D dimensions(half_width, half_height);
        a2de::Vector2D ul_pos(this->_bounds.GetPosition());
        a2de::Vector2D ur_pos(ul_pos + a2de::Vector2D(half_width, 0.0));
        a2de::Vector2D ll_pos(ul_pos + a2de::Vector2D(0.0, half_height));
        a2de::Vector2D lr_pos(ul_pos + dimensions);
        int color = _bounds.GetColor();
        bool filled = _bounds.IsFilled();

        a2de::Rectangle ul(ul_pos, dimensions, color, filled);
        a2de::Rectangle ur(ur_pos, dimensions, color, filled);
        a2de::Rectangle ll(ll_pos, dimensions, color, filled);
        a2de::Rectangle lr(lr_pos, dimensions, color, filled);

        _children[CHILD_UPPER_LEFT] = new QuadTree(this, ul);
        _children[CHILD_UPPER_RIGHT] = new QuadTree(this, ur);
        _children[CHILD_LOWER_LEFT] = new QuadTree(this, ll);
        _children[CHILD_LOWER_RIGHT] = new QuadTree(this, lr);

        //Give elements of mine to children, may or may not accept them.
        for(std::size_t i = 0; i < 4; ++i) {
            for(std::vector<T>::iterator _iter = _elements.begin(); _iter != _elements.end(); ++_iter) {
                _children[i]->Add(*_iter);
            }
        }
        _elements.clear();

    } catch(...) {
        for(std::size_t i = 0; i < 4; ++i) {
            if(_children[i]) {
                delete _children[i];
                _children[i] = nullptr;
            }
        }
    }
}

template<typename T>
void QuadTree<T>::UnSubDivide() {

    for(std::size_t i = 0; i < 4; ++i) {
        QuadTree<T>* curNode = _children[i];
        QuadTree<T>* curNodeParent = curNode->_parent;
        for(std::vector<T>::iterator _iter = curNode->_elements.begin(); _iter != curNode->_elements.end(); ++_iter) {
            curNodeParent->_elements.push_back(*_iter);
        }
        delete _children[i];
        _children[i] = nullptr;
    }
}

template<typename T>
bool QuadTree<T>::Add(T& elem) {

    if(elem.Intersects(_bounds) == false) return false;

    if(IsLeaf(this) == false) {
        for(std::size_t i = 0; i < 4; ++i) {
            _children[i]->Add(elem);
        }
        return false;
    }
    _elements.push_back(elem);
    if(_elements.size() > MAX_ELEMENTS) {
        SubDivide();
    }
    return true;

}

template<typename T>
bool QuadTree<T>::RemoveElement(T& elem) {
    std::vector<T>::iterator _iter = _elements.begin();
    _iter = std::find(_elements.begin(), _elements.end(), elem);
    if(_iter != _elements.end()) {
        _elements.erase(_iter);
        return true;
    }
    return false;
}

template<typename T>
bool QuadTree<T>::Remove(T& elem) {

    if(elem.Intersects(_bounds) == false) return false;

    if(IsLeaf(this)) {
        return RemoveElement(elem);
    }

    for(std::size_t i = 0; i < 4; ++i) {
        _children[i]->Remove(elem);
    }

    bool all_children_are_leaves = true;
    for(std::size_t i = 0; i < 4; ++i) {
        if(IsLeaf(_children[i])) continue;
        all_children_are_leaves = false;
        break;
    }

    if(all_children_are_leaves) {
        unsigned long elements_in_children = 0;
        for(std::size_t i = 0; i < 4; ++i) {
            elements_in_children += _children[i]->NumberOfElementsInTree();
        }
        if(elements_in_children < MAX_ELEMENTS) {
            UnSubDivide();
        }
    }
    return true;
}

template<typename T>
bool QuadTree<T>::Move(T& elem) {

    return false;
}

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:15:13.317

你的`Remove`代码是错误的。`this`如果不是叶子，您首先对子节点进行递归调用。但是，只能折叠非叶子。你检查当`this`是一片叶子时你是否必须折叠。

要解决此问题，请在递归调用和`return true`.

下一个问题是您检查`this`. 然而，正如已经说过的，它不是叶子，因此不承载元素。相反，元素位于子节点中。

为了解决这个问题，我们必须总结孩子的元素数量。我们可以证明，如果我们必须折叠`this`，所有 4 个子节点都是叶子，否则我们已经折叠了它们（您可以通过递归来证明这一点）。所以我们首先要检查是否所有 4 个子节点都是叶子。如果没有，我们不必崩溃。如果是，我们总结它们`_elements.size()`并将其与阈值进行比较（请参阅我对您的问题的第一条评论，了解为什么不应该这样做`MAX_ELEMENTS`）。

我认为你的方法`UnSubDivide`应该是正确的。

# bit-manipulation - 什么是按位 | 操作员

> ID：13792167
> 
> 赞同：-4
> 
> 时间：2012-12-09T21:43:53.497
> 
> 标签：bit-manipulation, bitwise-operators

用跛脚的话来说，按位是什么| 运算符在 Javascript 中执行，为什么是：

```
8 | 1 ; //9 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T21:45:57.083

*二进制中的8 = 1000
二进制中的 1 = 0001*

如果你取每个二进制数字并将它们视为 if 语句（1 为真，0 为假），你会得到：

```
1 || 0 = 1
0 || 0 = 0
0 || 0 = 0
0 || 1 = 1 
```

结果是 1001，即十进制的 9

如果它是 8 和 1，它会是这样的：

```
1 && 0 = 0
0 && 0 = 0
0 && 0 = 0
0 && 1 = 0 
```

结果是0

**下面是一个快速示例，说明如何使用这些：**

如果您想组合掩码，您将使用 OR 运算符 -

使用文件权限的示例，您可能具有以下标志：

```
1st bit - execute (bin - 001, dec - 1)
2nd bit - write (bin - 010, dec - 2)
3rd bit - read (bin - 100, dec - 4) 
```

如果你想创建一个用于读取和执行的掩码，你会做类似`read value | execute value`which is `1 | 4`which would give you `5`(101 in bin)

现在您有了一个掩码，您可以使用`&`运算符检查文件的权限以查看它是否具有这两个权限：

*示例文件 1（已读取、写入和执行）*

它的权限值为 7（bin 中的 111）：111 & 101 = 101，所以它确实有这些权限

*示例文件 2（已读取和写入）*

它的权限值为 6（bin 中的 110）：110 & 101 = 100，所以它只有 mask 提供的两者中的 100（4 in dec）perms（读取）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T21:47:31.340

计算机上的所有值都以二进制格式存储在硬件上。

```
1 = 0001
2 = 0010
3 = 0011
4 = 0100
etc. 
```

`|`是 OR 运算符，它结合了两个值的所有位：

```
8 - 1000
1 = 0001
--------
9 = 1001 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T21:46:01.697

`|`运算符是按位或。

8（以 10 为底）是 1000（以 2 为底；二进制）。1 是 0001

所以，8 | 1（以 10 为底）等于 1000 | 0001 二进制，即 1001 二进制，即 9（以 10 为底）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-09T21:48:24.707

它采用两个数字的二进制表示，并找到它们之间的并集（“或”）。

考虑一下你给的两个：

```
binary(8) = 1000
binary(1) = 0001 
```

因此，如果第一个数字 (8) 或第二个数字 (1) 中的某个位为 1，或者两者都为 1，则将其传递到结果中。

所以, `8 | 1 = 9`, 因为`1001`二进制是“或”运算的结果，十进制是 9

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-09T21:46:15.480

好吧，在您的示例中，采用二进制表示：

```
8 = 0b1000
1 = 0b0001 
```

然后对每个位应用逻辑或（因此“按位”）：对于每个位，如果其中一个、另一个或两者都为 1，则结果为 1，否则结果为 0。

```
8|1 = 0b1001 
```

这是9。

# drag-and-drop - 如果标题栏被禁用，使 Inno Setup WizardForm 可移动

> ID：13792168
> 
> 赞同：3
> 
> 时间：2012-12-09T21:44:01.327
> 
> 标签：drag-and-drop, window, inno-setup, draggable, pascalscript

我想制作一个具有自定义外观的安装程序，并通过`BorderStyle`将`bsNone`.

现在我不能再移动窗口了。我环顾四周，找到了德尔福的解决方案：http:
[//www.chami.com/tips/delphi/010397D.html](http://www.chami.com/tips/delphi/010397D.html)

这可以在 Inno Setup 中完成吗？

我已经`WM_NCHITTEST`在 MSDN 上查找了这个东西，但我不知道我是否以及如何使它工作。

编辑：在环顾四周并使用[高级编译器](http://restools.hanzify.org/article.asp?id=89 "高级编译器")高级编译器编译它之后，我想出了这个，但它不起作用。它可以编译，但是当我在窗口内单击时，我无法拖动它。

```
procedure Dragg(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
  SendMessage(WizardForm.Handle, $F112, $F012, 0);
end;

procedure InitializeWizard();
begin
  WizardForm.OnMouseDown := @Dragg;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T21:51:28.727

不，没有办法处理消息或更改`WndProc`for 控件。有一点机会像 in 那样实现未记录的拖动移动[`this post`](https://stackoverflow.com/a/3980475/960757)，但不幸的是 InnoSetup 没有发布用于脚本的鼠标按下事件，所以如果没有一些外部库，你会很不走运。

* * *

使用您提到的库和代码；你错过了`ReleaseCapture`函数调用。请改用此脚本代码（不要忘记，向导表单的唯一裸露部分位于左下角）：

```
[Code]
function ReleaseCapture: BOOL;
  external 'ReleaseCapture@user32 stdcall';

const
  SC_DRAGMOVE = $F012;
  WM_SYSCOMMAND = $0112;

procedure OnMouseDown(Sender: TObject; Button: TMouseButton; 
  Shift: TShiftState; X, Y: Integer);
begin
  ReleaseCapture;
  WizardForm.Perform(WM_SYSCOMMAND, SC_DRAGMOVE, 0);
end;

procedure InitializeWizard;
begin
  WizardForm.OnMouseDown := @OnMouseDown;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T11:00:05.563

我正在用最新知识更新这个问题，以供将来参考。

此功能（拖动无边框安装程序窗口）现在可以在 Inno Setup 中使用，但它是 Inno Setup 扩展的**Graphical Installer的一部分。**

有关详细信息，请查看网站[http://www.graphical-installer.com](http://www.graphical-installer.com)。

注意：Graphical Installer 是 Inno Setup 和 NSIS 的商业扩展，它提供了新功能并支持创建皮肤安装程序。我是这个扩展的开发者。

# jquery - jQuery使用自动完成限制文本框输入

> ID：13792173
> 
> 赞同：3
> 
> 时间：2012-12-09T21:44:45.533
> 
> 标签：jquery, forms, jquery-ui, jquery-autocomplete

我正在使用 jQuery UI 的自动完成功能来尝试为表单传播正确的输入，其中包含超过 1000 个值。

自动完成工作正常，但是如何将字段的值限制为这些值？

表单中的自动完成代码：

```
$('#animal').autocomplete({
    source: "search_species.php",
    minLength: 3,
    select: function(event, ui) {
        $('#animal').val(ui.item.postcodes);
        $('#code').val(ui.item.code);
        $('#family').val(ui.item.family);
    }
}); 
```

自动完成源代码：

```
$conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
mysql_select_db($dbname);
$return_arr = array();

if ($conn){
    $fetch = mysql_query(
        "SELECT * FROM animals where animals like '%" . mysql_real_escape_string($_GET['term']) . "%'"
    ); 

    /* Retrieve and store in array the results of the query.*/
    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
        $row_array['id'] = $row['id'];
        $row_array['value'] = $row['animals'];
        $row_array['family'] = $row['family'];
        $row_array['code'] = $row['code'];
        array_push($return_arr,$row_array);
    }
}  

mysql_close($conn);
echo json_encode($return_arr); 
```

正如我所说，自动完成功能有效。我只需要知道如何将文本字段中的值限制为搜索中的值，以便人们无法输入自己的值。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:08:28.803

有几种方法可以解决这个问题。

一种方法是如果没有从下拉列表中选择任何内容，则清除输入值，并在提交时强制该字段为非空。清除该值的一个好方法是在菜单更改或关闭时使用自动完成事件，该事件名为[change](http://api.jqueryui.com/autocomplete/#event-change)。如果选择了某个项目，或者输入失去焦点，则会触发此事件。如果用户没有从菜单中选择项目，则该`ui.item`值将为空，您可以清除输入中留下的键入值。

您可以像这样实现该方法：

```
$('#animal').autocomplete(
    {
        source: "search_species.php",
        minLength: 3,
        select: function(event, ui) {
            $('#animal').val(ui.item.postcodes);
            $('#code').val(ui.item.code);
            $('#family').val(ui.item.family);
        },
        change: function(event, ui) {
            if(ui.item === null || !ui.item)
               $(this).val(''); /* clear the value */
        }
    }); 
```

从这里可以直接在表单验证中添加一个检查，或者您正在使用的任何内容，以防止用户继续前进，除非选择了一个项目——通过确保输入值不为空。

# ruby-on-rails - 将现有变量设置为自身的第一个元素

> ID：13792179
> 
> 赞同：0
> 
> 时间：2012-12-09T21:45:25.260
> 
> 标签：ruby-on-rails, ruby, cucumber

我不确定为什么这在 Rails 中不起作用，但它在 IRB 中起作用。

我正在做类似的事情：

```
response = response.first 
```

`response`是一个带有哈希的数组。

在 irb 中，当试图模拟这个时，它工作正常。

例如：

```
>> a = [{'a'=>3}]
=> [{"a"=>3}]    
>> a = a.first   
=> {"a"=>3} 
```

但是在调试器模式下，在黄瓜中（在我的步骤定义中），我在执行上述语句时得到了这个：

例如：

```
(rdb:1) response = response.first
NoMethodError Exception: undefined method `first' for nil:NilClass
(rdb:1) response
nil 
```

然后，`response`设置为`nil`.

为什么行为不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:41:14.533

你 100% 确定这`response`是一个*局部变量*吗？如果`response`是一种可以解释您所看到的行为的方法：*局部**变量* `response`会影响*方法* `response`。如果要调用该`response`方法，则需要通过提供参数列表或接收器来明确告诉 Ruby 想要该方法：

```
response = response().first
# or
response = self.response.first 
```

# jquery - jQuery：通过滑动旋转的图像/文本的垂直列表（第一个图像将转到最后一个，等等）

> ID：13792181
> 
> 赞同：3
> 
> 时间：2012-12-09T21:45:35.727
> 
> 标签：jquery, slider, slideshow

我一直在尝试我能想到的每一个幻灯片脚本，但我想不出一种方法来做到这一点：

我有一个垂直的图像列表，其中包含一些我想向上滑动（或向下，不重要）的文本 - 所以第一个项目会转到列表的末尾，第二个项目会向上滑动，依此类推。*但是，所有列表项都始终显示，因此不会只是显示几个然后滚动*我希望这是有道理的，我认为这很简单。我也希望它自动滚动/滑动。我真的很感激任何帮助，我已经花了很长时间努力解决这个问题。

为了清楚起见，这是一个原始的文本表示：

列出李的：

```
[1]
[2]
[3]
[4]
[5] 
```

变成：

```
[2]
[3]
[4]
[5]
[1] 
```

和循环。

[更新：我让它部分使用 jCarousel：http: [//jsfiddle.net/Y9Esg/](http://jsfiddle.net/Y9Esg/)]

[唯一的问题是它在滚动后仍然在顶部显示部分 img，这应该在最后。而且这个名单似乎还在不断增长？它应该只够 10 个项目。唔。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T21:50:48.340

试试 jCarousel：[http ://sorgalla.com/projects/jcarousel/examples/static_vertical.html](http://sorgalla.com/projects/jcarousel/examples/static_vertical.html)

您可以通过一些设置使其垂直并循环播放。

```
jQuery('#mycarousel').jcarousel({
    vertical: true,
    scroll: 1, 
    wrap: 'circular'
}); 
```

**编辑 1**

您需要保留以下高度并溢出 css 以修复高度：

**CSS**

```
.jcarousel-skin-tango .jcarousel-container-vertical {
    width: 75px;
    height: 850px; // This fixes the height
    padding: 40px 20px;
}

.jcarousel-skin-tango .jcarousel-clip {
    overflow: hidden; // This prevents the overflow
}

.jcarousel-skin-tango .jcarousel-clip-vertical {
    width:  75px;
    height: 850px; // This fixes the height
} 
```

**[演示](http://jsfiddle.net/Y9Esg/2/)**

# android - 在 Beaglebone 上构建的带有 Android (Rowboat) 的外设？

> ID：13792182
> 
> 赞同：1
> 
> 时间：2012-12-09T21:45:36.907
> 
> 标签：android, linux, beagleboard

如果我使用 Texas Instrument 为 Beaglebone (Rowboat) 预构建的 Android 映像，我是否仍然能够通过 Linux 内核访问 Sitara AM355x 外围设备（PWM、I2C、GPIO 等）？我以前从未使用过 Android，但我最终想编写自己的 UI 来与一些自定义设备驱动程序交互。

我知道 Android 是建立在 Linux 之上的，但我想知道与 Android 一起打包的内核是否包含 AM355x 外围设备（例如，Angstrom 内核包含）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T05:07:47.643

`BeagleBone`家庭附带**`User Space Drivers`**所有外围设备。

因此开发人员可以使用操作轻松访问外围设备**`"Echo" & "Cat"`**。

如果你要和你一起去，`Android platform`你必须使用`JNI for read/write`options 。

您[将从这里获得 AM335x PSP 的用户指南，以便](http://processors.wiki.ti.com/index.php/AM335x_PSP_User's_Guide)从用户空间访问所有外围设备。

用于`fcntl.h`执行`open/close/read/write`操作。

# mongodb - 多次调用 find() 的回调

> ID：13792192
> 
> 赞同：1
> 
> 时间：2012-12-09T21:46:50.980
> 
> 标签：mongodb, mongoose

我在搞乱猫鼬，我注意到我的`find`回调在保存无效项目时被多次调用：

**坚持.js**

```
mongoose.model('ContentTag', new mongoose.Schema({
    content:   requiredString,
    tag:       requiredString
})); 
```

**test.js**（使用摩卡）

```
describe('content tag', function() {
    it('should not save an empty content tag', function(done) {
        persist.ContentTag().save(function(err) {
            assert.ok(err);

            persist.ContentTag.find(function(err, items) {
                assert.equal(0, items.length);
                done();
            });
        });
    }); 
```

这会产生以下错误输出：

```
Save err: ValidatorError: Validator "required" failed for path tag
Save err: ValidatorError: Validator "required" failed for path content
Find err: null
Find err: null 
```

并出现以下错误：

```
 1) Persist content tag should not save an empty content tag:
     Error: done() called multiple times
      at multiple (/usr/local/lib/node_modules/mocha/lib/runnable.js:168:31)
      at done (/usr/local/lib/node_modules/mocha/lib/runnable.js:174:26)
      at Runnable.run.duration (/usr/local/lib/node_modules/mocha/lib/runnable.js:190:9)
      at persist.ContentTag.content (path/test/server-test.js:21:21)
      at Query.execFind (path/node_modules/mongoose/lib/mongoose/query.js:572:26)
      at Cursor.toArray (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:122:15)
      at Cursor.each (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:167:11)
      at Cursor.nextObject (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:467:28)
      at Cursor.close (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:625:17)
      at Cursor.nextObject (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:467:10)
      at Cursor.nextObject.commandHandler (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/cursor.js:452:15)
      at EventEmitter.emit (events.js:96:17)
      at Db.open.self.serverConfig.connection.addListener.self.state (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/db.js:90:12)
      at EventEmitter.emit (events.js:93:17)
      at Connection.open.receiveListener (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/connection.js:82:16)
      at Socket.Connection.open.receiveListener (path/node_modules/mongoose/support/node-mongodb-native/lib/mongodb/connection.js:85:16)
      at Socket.EventEmitter.emit (events.js:93:17)
      at TCP.onread (net.js:391:31) 
```

**看起来当有多个验证错误时，每个错误都会调用一次保存回调。**

当我删除`new`关键字时，我收到以下错误：

```
 1) Persist content tag should not save an empty content tag:
     TypeError: Object #<Object> has no method 'buildDoc'
      at Object.Document (../node_modules/mongoose/lib/mongoose/document.js:26:19)
      at Object.Model (../node_modules/mongoose/lib/mongoose/model.js:24:12)
      at Object.model [as ContentTag] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:43:56.193

`save`每次验证都会调用一次回调`err`。因此，我`done()`多次打电话。回想起来，断言`err`既定的定义和`find()`空的调用是没有意义的。

# r - 如何有条件地更改 R 的 Shiny 包中图表的纵横比？

> ID：13792195
> 
> 赞同：13
> 
> 时间：2012-12-09T21:47:08.193
> 
> 标签：r, shiny

[只是和Shiny](http://rstudio.github.com/shiny/tutorial/)一起玩并且已经爱上了它。但是，如何根据绘制的图表使 reactivePlot / plotOutput 组合中的图表具有不同的大小？

在第一个示例中，我选择了“产量曲线”分析并获得了我想要的纵横比：

![在此处输入图像描述](../Images/39b22f03fb3be8cb24ebfb7de8c93e3b.png)

但是当我选择另一个分析时，在这种情况下是热图，它现在与扭曲它的“收益率曲线”图表的大小相同（单元格应该是正方形，而不是矩形）。

![在此处输入图像描述](../Images/4797c65e018086ecee748a8962be5b9e.png)

如何根据选择的图表更改图表大小？我尝试将高度参数 = NA、NULL 或“”，但它不喜欢其中任何一个。

分开，但在同一个应用程序中，如何在顶部 selectInput 和侧边栏面板中的 textInputs 之间获得一些空白？我已经尝试过 h4(" ") 但不起作用。

这是我的 ui.R：

```
library(shiny)

shinyUI(pageWithSidebar(
    headerPanel(h1("SAGB Relative Value Tool")),
    sidebarPanel(
        h4("Choose analysis:"),
        selectInput("analysis1", "", 
            choices = c("Yield curve", "Optical asset swap spreads", 
                        "Cheap dear box", "Cheap dear charts", "Switch signaliser", 
                        "Barbells")),
        h4(" "),
        h4("Yield override:"),
        lapply(bondNames, function(x)
            textInput(paste(x, "bond"), x, last(sagb$sagb)[x]))
    ),
    mainPanel(
        h3(textOutput("AnalysisHeader")),
        plotOutput("AnalysisOutput", height = "10in"))
)) 
```

这是我的 server.r

```
library(shiny)

shinyServer(function(input, output) {

    output$AnalysisHeader  <- reactiveText(function() {
        input$analysis1
    })

    output$AnalysisOutput <- reactivePlot(function() {
        switch(input$analysis1,
            "Yield curve" = wo(whichOut = 1),
            "Optical asset swap spreads" = wo(whichOut = 2),
            "Cheap dear box" = wo(whichOut = 3),
            "Cheap dear charts" = wo(whichOut = 4),
            "Switch signaliser" = wo(whichOut = 5),
            "Barbells" = wo(whichOut = 6)
        )

    })

}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T12:09:23.337

[（有时对RTFM](http://cran.r-project.org/web/packages/shiny/shiny.pdf)来说是个好主意（也自言自语，参见我对 OP 的评论）

```
reactivePlot(func, width = "auto", height = "auto", ...)

width    The width of the rendered plot, in pixels; or ’auto’ to use the offsetWidth of
         the HTML element that is bound to this plot. You can also pass in a function
         that returns the width in pixels or ’auto’; in the body of the function you may
         reference reactive values and functions.
*height* The height of the rendered plot, in pixels; or ’auto’ to use the offsetHeight
         of the HTML element that is bound to this plot. You can also pass in a function
         that returns the width in pixels or ’auto’; in the body of the function you may
         reference reactive values and functions.
...      Arguments to be passed through to png. These can be used to set the width,
         height, background color, etc. 
```

但是，到目前为止，我无法设法使工作（与`height="15in"`）...

```
Error in switch(units, `in` = res, cm = res/2.54, mm = res/25.4, px = 1) *  : 
  non-numeric argument to binary operator 
```

**编辑**：它现在可以工作了，`height`必须是数字的，可选的`units="px"`，`res`当然还有要转换`units`为像素的东西。

**编辑 2**：别忘了更新 Shiny [到最新版本]，它修复了我遇到的一些错误。

**编辑 3**：这是一个动态更改高度的示例：

```
getVarHeight <- function() {
    return(getNumberOfPlots() * 400)
}
output$out <- reactivePlot(doPlots, height=getVarHeight) 
```

您可以将片段与此[屏幕截图](http://i.stack.imgur.com/liY3O.png)相关联，其中`getNumberOfPlots`返回要绘制的图形数量。

**编辑4**：如果你想显示*多*张图片，你也应该改变`height`'ui.R'：这个值直接传递给CSS，默认值是`400px`。因此，如果您的图像更大，它们将重叠，并且只有 400px 可见...

```
plotOutput(outputId = "plot_rain", height="100%")) 
```

# jquery - 如何找到两个相同的文本节点

> ID：13792197
> 
> 赞同：1
> 
> 时间：2012-12-09T21:47:10.137
> 
> 标签：jquery

我有一个包含数据的表。为简单起见，可以说它只有一列，没有标题。我希望 JQuery 遍历所有行以查看同一列中任何单元格中的文本是否在另一行中重复。有没有一种简单的方法可以做到这一点？

```
<tr><td>one</td></tr>
<tr><td>two</td></tr>
<tr><td>three</td></tr>
<tr><td>four</td></tr>
<tr><td>five</td></tr>
<tr><td>one</td></tr>   <!--It is doubled-->
<tr><td>six</td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T21:56:17.683

你可以使用这样的东西：

```
var contents = new Array();
$("td").each(function(idx) {
    var value = $(this).html();
    if($.inArray(value, contents) == -1) {
        contents.push(value);
    } else {
        console.log("Row '" + idx + "' : duplicate value '" + value +"'");
    }
}); 
```

这将逐一获取您的每一行并检索值，如果该值已存在，则检查先前的值（存储在数组中），如果不存在，则将其添加到数组中，否则它将在控制台中显示一条消息。

而不是`console.log()`你可以做你需要的，把它存储在某个地方，改变类等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T21:56:46.950

```
var nodeArr = [];
$('tr td').each(function () {
    var textStr = $(this).text();
    if (typeof nodeArr[textStr] === 'undefined') {  
        nodeArr[textStr] = $(this);
    } else { // we have a duplicate
        var el1 = nodeArr[textStr],
            el2 = $(this);
        // and do something with them!
    }        
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:49:20.563

```
SELECT col FROM mytable GROUP BY col HAVING COUNT(*) > 1 
```

# eclipse - 创建新的远程分支时出现有趣的 refname 错误

> ID：13792205
> 
> 赞同：14
> 
> 时间：2012-12-09T21:47:56.067
> 
> 标签：eclipse, git, github, egit

所以我在 github 上建立了一个项目，一切都很花哨。现在我想创建一个新分支。

这是我所做的：

1.  创建了一个新的本地分支
2.  将新分支推送到 github

这是问题所在：在推送到我的遥控器期间，我收到此错误：

```
Repository ssh://git@github.com/<username>/ProjectColossus.git

funny refname
error: refusing to create funny ref 'workingBranch' remotely 
```

我的远程仓库被称为 origin，所以我尝试按照 stackoverflow 上的另一个答案中的建议使用该引用名，但我得到了同样的错误。我还尝试在远程推送之前的“目标引用名称：”字段中使用与我的新本地分支相同的名称，但我真的不确定我现在在做什么。我知道有一些关于 git 远程推送我没有得到的东西，所以一点解释会非常有帮助。我对 git 和版本控制很陌生，但我是一名中级程序员（从 1 月份的第二年 CS 开始）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-21T13:07:38.777

在 Target Ref Name 中，您可能必须添加 refs/heads：

```
refs/heads/name_of_your_new_branch 
```

在您的具体情况下：

```
refs/heads/workingBranch 
```

（至少，它是 Bitbucket 的方式 - egit，Eclipse 的 Eclipse 插件）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T14:23:47.943

我发现 EGit 在创建标签时期望*V0.0.1 之*类的东西有点愚蠢（将标签放置到本地存储库中的 /refs/tags/V0.0.1 位置）并且它希望提供像*/refs/这样的引用名tags/V0.0.1*将标签推送到远程存储库时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-10T11:02:27.940

值得一提的是，我们刚刚遇到了这个问题 - 我们正在使用 VS2013 并使用 /refs/heads/ 创建一个分支时出现错误。我们最终从 Atlassian 下载了 Source Tree（我们使用 Stash 来存放我们的代码）。这显示了一个“未提交的更改”，即 DesignTimeResolveAssemblyReferencesInput.cache 文件被更改 - VS2013 正在做的事情。我们撤消了此更改并创建了一个新分支，这解决了问题。

如果上述方法不起作用，希望这将为某人指明正确的方向。

# java - 可以将 Spring 中的 JpaRepository 暴露给客户吗？

> ID：13792209
> 
> 赞同：2
> 
> 时间：2012-12-09T21:48:08.613
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我有一个关于在 Spring 中使用 JpaRepository 的概念性 OO 问题。是否可以将 JpaRepository 暴露给调用者并让他们在该实例上调用 CRUD 方法，或者我必须包装每个方法并仅从服务中调用相应的 JpaRepository 方法？

在代码中：

```
public interface MyJpa extends JpaRepository<MyEntity, Long> 
```

然后：

```
@Repository
public class MyDbService{

    @Autowired
    private MyJpa myJpa;

    public Iterable<MyEntity> findAll()
    {
        return myJpa.findAll()
    }

    ... other CRUD methods

} 
```

那么客户会这样做：

```
Iterable<MyEntity> entities = myDbService.findAll(); 
```

相对于：

```
@Repository
public class MyDbService{

    @Autowired
    private MyJpa myJpa;

    public MyJpa getJpa() {
        return myJpa 
    };
} 
```

那么客户会这样做：

```
Iterable<MyEntity> entities = myDbService.getJpa().findAll(); 
```

不使用第二种方法的主要问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:42:36.347

我更喜欢后一种方法。在我处理的应用程序中，我通常具有以下层（可能有更多或更少的层 - 这是一个非常粗略的指南）：

**第 1 层 - 客户层**

也许是 Spring MVC`@Controller`或`@Service`. 例如：

```
@Controller
public class MyController {
  @Autowired private MyManager myManager; // see Layer 2
} 
```

**第 2 层 - 业务层**

第 2 层提供了客户端层和 DAO 之间的分离。它通常是超过 1 个或多个 DAO 的外观。你可以把业务逻辑/规则放在这里，或者委托，或者添加另一个层。例如：

```
@Component
public class MyManagerImpl implements MyManager {
  @Autowired private MyDao myDao; // see layer 3
} 
```

**第 3 层 - DAO 层**

第 3 层是您的 DAO 或`@Repository`类。根据您的示例：

```
public interface MyDao extends JpaRepository<MyEntity, Long> {
  // Spring Data JPA magic here!
} 
```

一些一般性的建议：

*   没有严格的规定，每个应用程序都是不同的。在您的应用程序要求的上下文中做对您有意义的事情
*   每一层应该只有一个职责。如果您发现一个具有多种职责的层（例如数据访问和客户端 API），那么最好将其分为两部分

最后，我在你的例子中做的一个小改动是用注释`MyDbService`而`@Component`不是`@Repository`. `@Repository`应该仅限于 DAO。

希望漫谈是有道理的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:51:14.717

在您的情况下，中间层已过时。如果您只是重新公开依赖项（无论如何这都是一种反模式）或发现自己除了委托给依赖项之外做任何事情，只需将依赖项注入您的客户端即可。因此，例如，我认为从 SpringMVC 控制器等使用存储库可能绝对没问题。

但是有两点需要考虑：

1.  我们通常不建议扩展`JpaRepository`，因为它公开了 JPA 特定的方法，并且客户端实际上不应该知道底层的持久性技术。所以宁可使用`CrudRepository`,`PagingAndSortingRepository`或类似的东西。

2.  绝对*要*使用中间层，以防您需要协调多个调用，因此可能需要划定更广泛的事务边界。或者，如果您想避免客户端直接使用存储库，请将其封装在服务中受保护和更高级别的方法，这可能会执行额外的业务功能（例如密码编码等）

# java - 爪哇作业。我有助于理解为什么我的代码会编译但在编译器中留下关于数组问题的注释？

> ID：13792212
> 
> 赞同：5
> 
> 时间：2012-12-09T21:48:29.310
> 
> 标签：java

注意：ArrayOperation.java 使用未经检查或不安全的操作。注意：使用 -Xlint:unchecked 重新编译以获取详细信息。

```
public class ArrayOperation{
public static void sort(Comparable[] c){
    for (int i=1;i<c.length;i++){
    Comparable key = c[i];
    int p = i;
    while (p>0 && key.compareTo(c[p-1])<0){
        c[p]=c[p-1];
        p--;
    }
    c[p] = key;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T21:50:19.223

你必须为**java.lang.comparable提供****类型参数**，如果你检查 java.lang.Comparable 的API **，**[**它**](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)需要一个类型参数。**[](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)**

 ******```
Interface Comparable<T> 
```

因此，如果您希望编译时警告消失，您的方法签名应该是。

```
public static void sort(Comparable<SomeType>[] c){ 
```******

# python - Python中生成括号模型列表的算法

> ID：13792213
> 
> 赞同：7
> 
> 时间：2012-12-09T21:48:41.407
> 
> 标签：python, algorithm

我正在尝试制作一个简单的递归函数，它将在 Python 中生成嵌套列表的列表。最终结果将代表一个单场淘汰的锦标赛括号。我希望创建这样的列表能让我轻松生成所需的内容。这稍后将用于创建锦标赛比赛的模型。

因此，如果有 4 人参加的锦标赛：

```
[[1,4],[2,3]] 
```

7人参赛：

```
[[1,[4,5]],[[2,7],[3,6]]] 
```

或 8 人参加的锦标赛：

```
[[[1,8],[4,5]],[[2,7],[3,6]]] 
```

我还没有一个算法课（我希望这个课最终会帮助解决这样的事情）所以我不完全确定如何解决这个问题。以下是我迄今为止的尝试。

```
def decide_rounds(list_to_fill, player_nums):
    if len(player_nums) < 3:
        for num in player_nums:
            list_to_fill.append(num)
        return

    left = []
    decide_rounds(left, ??????) #Tried passing various things to these with no avail.
    list_to_fill.append(left)
    right = []
    decide_rounds(right, ???????)
    list_to_fill.append(right) 
```

任何有关如何解决此问题的帮助或解释将不胜感激！

编辑：目前我正在调用这样的函数：

```
rounds = []
decide_rounds(rounds, range(1, size +1))
print rounds 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T01:35:28.943

试试这个：

```
def divide(arr, depth, m):
    if len(complements) <= depth:
        complements.append(2 ** (depth + 2) + 1)
    complement = complements[depth]
    for i in range(2):
        if complement - arr[i] <= m:
            arr[i] = [arr[i], complement - arr[i]]
            divide(arr[i], depth + 1, m)

m = int(raw_input())

arr = [1, 2]
complements = []

divide(arr, 0, m)
print arr 
```

我们注意到，对于一个有 2^n 个玩家的括号，每对的总和是相同的数字。对于每一对，右项由左元素和递归深度决定，所以我们可以先生成数组深度。我们记住补语以稍微改善运行时间。它适用于任何人`m > 1`，因为一旦补码太大，它就会停止递归。

在行动中看到它：http: [//ideone.com/26G1fB](http://ideone.com/26G1fB)

# ios - 单例模式是否适合我的情况？需要在 iOS App 中全局访问大量数据

> ID：13792216
> 
> 赞同：1
> 
> 时间：2012-12-09T21:49:04.127
> 
> 标签：ios, xcode, algorithm, design-patterns, memory-management

我想存储从远程服务器检索到的关于我的应用程序的演示数据。演示数据将包括我的 iOS 应用程序的每个屏幕（视图控制器）的文本颜色、大小、控件位置等。将从每个屏幕访问演示数据以实际呈现页面本身。

单例模式是否适合这种情况？我担心这里的内存警告和性能。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:06:21.430

我认为你正朝着正确的方向前进，但不要被术语所困扰。

您确实希望通过已知类的静态方法或单例类的实例方法使其可用来封装数据。在这种情况下，您不是将 Singleton 用于数据本身，而是用于其实例提供对数据的访问的类。

一旦定义了该方法，就可以考虑性能增强，如延迟初始化、缓存，以及如 lapatus 建议的那样，如果数据非常大，还可以考虑文件存储。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T23:54:38.307

这些听起来像是你应该保存在用户默认值中的东西。这就像一个单例（也许是，我不确定），因为您通过共享实例 standardUserDefaults 访问它。

# java - 如何在android中显示bmp图像

> ID：13792217
> 
> 赞同：3
> 
> 时间：2012-12-09T21:49:04.223
> 
> 标签：java, android, avd

我是 java 和 android 开发的新手。我试图找到这个问题的答案，但似乎很明显，所以没有人问这个问题。我用这个例子来显示一个图像：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String str="http://logproj.500mb.net/image.php?id=8";
    ImageView imView;
    imView = (ImageView)findViewById(R.id.image);
     try{
    url = new URL(str);
    }
    catch(MalformedURLException e)
    {
            e.printStackTrace();
    }
    try{
            HttpURLConnection conn =  (HttpURLConnection)url.openConnection();
            conn.setDoInput(true);

            conn.connect();
            int length = conn.getContentLength();

            int[] bitmapData =new int[length];
            byte[] bitmapData2 =new byte[length];

            InputStream is = conn.getInputStream();

            bmp = BitmapFactory.decodeStream(is);
            imView.setImageBitmap(bmp);
            } catch (IOException e)
            {
                    e.printStackTrace();
            }

} 
```

它适用于 jpg 图像，但我的图像是 bmp 并且应用程序崩溃或“意外停止”。

我希望你能帮助解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:46:03.180

尝试使用 apaches Web 客户端。这应该有效。让我知道。

```
public static Bitmap decodeFromUrl(HttpClient client, URL url, Config bitmapCOnfig)
{
    HttpResponse response=null;
    Bitmap b=null;
    InputStream instream=null;

    BitmapFactory.Options decodeOptions = new BitmapFactory.Options();
    decodeOptions.inPreferredConfig = bitmapCOnfig;
    try
    {
    HttpGet request = new HttpGet(url.toURI());
        response = client.execute(request);
        if (response.getStatusLine().getStatusCode() != 200)
        {
            Log.d("Bad response on " + url.toString());
            Log.d("http response: " + response.getStatusLine().toString());
            return null;
        }
        BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(response.getEntity());
        instream = bufHttpEntity.getContent();

        return BitmapFactory.decodeStream(instream, null, decodeOptions);
    }
    catch (Exception ex)
    {
        Log.d("error decoding bitmap from:" + url, ex);
        if (response != null)
        {
            Log.d("http status: " + response.getStatusLine().getStatusCode());
        }
        return null;
    }
    finally
    {
        if (instream != null)
        {
            try {
                instream.close();
            } catch (IOException e) {
                Log.d("error closing stream", e);
            }
        }
    }
} 
```

不要忘记从异步任务内部调用此函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T23:52:38.720

首先 - 您不应该在主 UI 线程上运行 http 连接。在较新版本的 android 上，这将引发导致强制关闭的 networkOnUIThreadException。

我建议编写一个`AsyncTask`在后台线程上运行您的下载。WIIJBD 编写的 decodeFromUrl 看起来应该可以正常工作，因此如果您调用该函数，您可以让它将位图返回给 UI 线程 onPostExecute() 并在 ImageView 中设置

异步任务教程：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

有更多问题请告诉我

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:45:18.583

不要使用 .bmp 文件。请改用 .png 文件。或者 .gif - 这在 android 上不太可取，但确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T23:54:48.243

我在一些带有图像的android应用程序上工作过，如果图像很大，应用程序崩溃了很多，所以我用谷歌搜索并在android开发者网络上找到了这个，非常好。

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

我要向您推荐的是，您可以下载图像并将其保存到外部存储设备（如 SD 卡），然后加载并显示，这一次您可以根据内存使用情况降低其质量。

另外下载图像在您的应用程序中是耗时的部分，因此最好将这些代码放到另一个线程或`AsyncTask`（更好，IMO），这样在从互联网下载图像时它不会停止 UI 主线程，完成后您可以显示它也是。

希望能帮助到你。

# javascript - 用ajax发送图片和文字

> ID：13792219
> 
> 赞同：1
> 
> 时间：2012-12-09T21:49:13.340
> 
> 标签：javascript, ajax, jquery, multipartform-data

我正在使用 javascript 的“formData”来发送带有 ajax 的图像文件。如何将其他数据附加到 formData，例如文本字符串？

JS：

```
$("#post-image").click(function(){
    $.ajax({
        url: "../../build/ajaxes/upload-photo.php",
        type: "POST",
        data: formdata,
        processData: false,
        contentType: false,
        success: function (response) {
            console.log(response);
        }
    });
}); 
```

PHP：

在我的 PHP 中，我可以使用`$_FILES["images"]`. 我不知道用什么来处理我通过 formdata 传递的附加数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:55:33.797

如果要向 FormData 添加参数，请使用[`FormData.append`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData#append%28%29)

```
$("#post-image").click(function(){
    formdata.append('name', 'value');
    $.ajax({
        url: "../../build/ajaxes/upload-photo.php",
        type: "POST",
        data: formdata,
        processData: false,
        contentType: false,
        success: function (response) {
            console.log(response);
        }
    });
}); 
```

在 PHP 中用于`$_POST["name"]`获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:51:36.917

您需要将表单作为多部分提交。这是您问题的 SO 解决方案：[Making an HTTP POST call with multipart/form-data using jQuery?](https://stackoverflow.com/questions/3537774/making-an-http-post-call-with-multipart-form-data-using-jquery)

不是完全相同的副本，因此我没有将其标记为这样，但它是对您问题的解决方案的直接引用。

编辑：您会注意到一些答案也将 FormData 引用为解决方案。一旦你得到正确发布的数据，你就可以在 PHP 中使用普通的 $_FORM 集合来访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T03:58:33.167

如果您有带有多个文件上传的大表单，则不要使用[MALSUP JQUERY PLUGIN 。](http://jquery.malsup.com/form/)它只会发送您的所有表单字段

```
 $(form).ajaxSubmit(); 
```

# ruby-on-rails - 在操作邮件程序中附加远程 URL 文件作为附件

> ID：13792220
> 
> 赞同：5
> 
> 时间：2012-12-09T21:49:19.230
> 
> 标签：ruby-on-rails, actionmailer

我有一个 ActionMailer 设置，可以从 S3 发送带有附件的电子邮件。我这样做是这样的：

```
def job_apply(current_tenant, applicant)
   @current_tenant = current_tenant
   @applicant = applicant

   file = open(applicant.resume.url).read
   attachments[applicant.resume] = file

   email_with_name = "#{@current_tenant.name} <#{@current_tenant.help_email}>"
   mail(from: email_with_name, to: applicant.job.apply_email, subject: "New Job Application")
 end 
```

application.resume.url 返回一个正确的 URL，我可以在浏览器中打开它并检索文件，但是我收到以下错误：

```
Message undefined method `ascii_only?' for #<ApplicantResumeUploader:0x007fe6bc5c28a8>
File    /Users/cmalpeli/.rvm/gems/ruby-1.9.3-p194@job_board/gems/mail-2.4.4/lib/mail/encodings.rb
Line    103 
```

这是 encodings.rb 中的代码：

```
 98     def Encodings.decode_encode(str, output_type)
 99       case
 100       when output_type == :decode
 101         Encodings.value_decode(str)
 102       else
 103         if str.ascii_only?
 104           str
 105         else
 106           Encodings.b_value_encode(str, find_encoding(str))
 107         end
 108       end 
```

我有点不知所措从这里去哪里......

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T00:40:36.433

问题出在您的`applicant.resume`字符串中`attachments[applicant.resume]`。如果这不是字符串（如 JavaScript 对象），也不是可以代表您附加到电子邮件的文件的文件名，那么这将导致 ActionMailer 出现问题。

在继续之前验证该`applicant.resume`字符串确实是一个文件名`foo.pdf`或类似。`resume.doc`

# android - 有没有办法取消 onCompletionListener？

> ID：13792222
> 
> 赞同：4
> 
> 时间：2012-12-09T21:49:21.307
> 
> 标签：android

我正在编写一个具有自动播放功能的应用程序，基本上就像一本故事书。我为每个活动（页面）设置了一个媒体播放器`onCompletionListener`，这样当叙述完成时，它就会开始下一个活动（页面）。有一个选项可以关闭自动播放（因此您可以按照自己的节奏阅读）...但是将其关闭会导致活动——当前页面——“记住”上一个`onCompletionListener`呼叫（因为后退按钮用于导航回上一个活动）。随后的活动（页面）工作正常......因为启动的逻辑检查`onCompletionListener`阻止它被执行。

我还尝试将该逻辑检查移至`onStart()`[而不是`onCreate`]，因为切换自动播放的菜单会占据全屏并导致上一个活动（页面）执行`onStop()`。虽然这个设置阻止了`onCompletionListener`再次执行......它仍然没有“取消”前一个`onCompletionListener`. 注意：仅当活动（页面）以`autoplay=on`.

我还曾短暂尝试`super.recreate()`过该特定活动，以尝试“重新启动”所有内容（希望包括`onCompletionListener`. 然而，结果并不漂亮（活动被屏蔽并且从未重新初始化）。

我没有包含任何代码，因为（对我而言）这更像是一个程序问题。1\. 可以`onCompletionListener`“取消”。如果是这样，怎么做？2\. 如果不是，（因为我对 java/android 比较陌生）重新创建方法是否可以接受/有益于“重置”整个活动（及其`onCompletionListener`内部）？

我的目标是 API 11 及更高版本。任何想法/建设性的批评将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:38:02.920

这里有一些可能的解决方案：

1.  对于 onDestroy，使用 setOnCompletionListener(null)。

2.  在所需设置更改时，还设置一个全局标志（也将在创建应用程序时设置），并在侦听器事件中检查该标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:01:31.690

那么“取消”它的方法是使用释放方法。当您打开一个新页面（活动）时，您应该考虑这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:18:35.517

如果你想取消之前的设置`onCompletionListener`，你可以简单地设置一个不做任何事情的新设置。

# iphone - 从服务器下载视频时，将视频本地保存为 iPhone 应用程序

> ID：13792225
> 
> 赞同：0
> 
> 时间：2012-12-09T21:49:45.050
> 
> 标签：iphone, caching

您可以使用 MySQL 数据库从具有 WIFI 或 Internet 连接的服务器下载视频，然后将视频保存并存储在 iPhone 本地以使用缓存进行时间限制。

**或者，**当使用 MySQL 数据库下载视频并播放后，关闭视频。这个视频会永远消失还是我必须再次下载相同的视频？

我正在使用 MySQL、PHP 和 HTML 以及 CSS3、JS 和 jQuery 来创建一个使用 Cordova 框架的应用程序。它是 iPhone 应用程序。

请指教？

# java - 使用 AWS Java 开发工具包设置过期和其他杂项 HTTP 标头

> ID：13792227
> 
> 赞同：0
> 
> 时间：2012-12-09T21:49:46.750
> 
> 标签：java, amazon-s3, amazon-web-services

我的一些用户正在使用不支持 Cache-Control HTTP 标头的旧浏览器。因此，除了确保尽可能缓存我的内容之外，我还想设置 Expires 标头。

我正在使用 Java SDK，我发现[这个问题](https://stackoverflow.com/questions/9797276/set-expires-header-for-an-existing-s3-object-using-aws-java-sdk)说在上传时使用 ObjectMetadata 中的 setHeader 方法。

这似乎工作正常，但我注意到在 JavaDocs 中它声明 setHeader 方法仅供内部使用。从我自己的代码中调用此方法可能会出现任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:40:33.397

> 这似乎工作正常，但我注意到在 JavaDocs 中它声明 setHeader 方法仅供内部使用。从我自己的代码中调用此方法可能会出现任何问题吗？

这个有点令人惊讶的问题已经再次出现，请参阅[bkirkbri 的评论](https://stackoverflow.com/questions/9797276/set-expires-header-for-an-existing-s3-object-using-aws-java-sdk#comment12492383_9807565)- 这是[我的回复](https://stackoverflow.com/questions/9797276/set-expires-header-for-an-existing-s3-object-using-aws-java-sdk#comment12493688_9807565)：

> 嗯，我确实不知道这个限制，但回想一下曾经使用过 Expires: 在不久前的某个时候；不过我可能是错的，因为我经常使用其他 SDK 与 S3 交互（例如 C#/Python，它们确实支持这一点）并且可能将其混为一谈 - 代码本身与当前的其他 setXYZHeader() 方法没有区别（请参阅[ObjectMetadata.java](https://github.com/amazonwebservices/aws-sdk-for-java/blob/8d0a1be0b9d8dcf49d645dd2cc0acd64264741c9/src/main/java/com/amazonaws/services/s3/model/ObjectMetadata.java#L141)），因此限制将基于不可见的副作用（如果有）。

这似乎仍然成立，即如果您分析代码，则没有任何其他指示 - 因此，[bkirkbri 的结论](https://stackoverflow.com/questions/9797276/set-expires-header-for-an-existing-s3-object-using-aws-java-sdk#comment12494853_9807565)似乎正确地总结了事态：

> 它可能在内部和内部的其他标头方法中使用，因为只有某些标头才能工作。他们应该在 ObjectMetadata 上添加一个 setExpires 方法，因为它是唯一没有自己方法的标头

除此之外，恐怕只有 AWS SDK for Java 团队本身才能提供明确的答案：像往常一样，您可能会在各自的[AWS 论坛](https://forums.aws.amazon.com/forum.jspa?forumID=70)中提问，但最近他们也在他们移动的[GitHub 存储库](https://github.com/aws/aws-sdk-java)中接受了问题，这可能会为此类与代码相关的问题提供更快、更明确的结果。

# android - 防止多点触控时查看器移动

> ID：13792228
> 
> 赞同：0
> 
> 时间：2012-12-09T21:49:48.310
> 
> 标签：android, android-viewpager

我有一个 ViewPager 图像，我希望能够使用它进行一些多点触控工作。这包括捏缩放和旋转，这两者都是双指操作。当我执行这些操作时，ViewPager 开始来回移动，一旦开始，它就会中断我正在进行的任何操作。

由于我想为某些操作保留两指手势，我只希望 ViewPager 在单指按下时做出反应。如何控制寻呼机滑动需要多少个手指？还是我必须禁用 ViewPager 的内置手势检测并自己编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T21:56:40.277

您将不得不重写`onTouchEvent`.`ViewPager`

在`MotionEvent`你得到的，你应该检查手指的数量。如果它只有 1 则调用 super，如果不是，则随心所欲。

**编辑**：您可以检查手指的数量`event.getPointerCount()`。

# eclipse - PermGen 空间 myeclipse

> ID：13792233
> 
> 赞同：1
> 
> 时间：2012-12-09T21:50:39.510
> 
> 标签：eclipse, out-of-memory, myeclipse, permgen

我`myeclipse`使用工件类型“JPA Entities”运行向导 MyEclipse/Scaffold Spring CRUD 应用程序。之前，我添加了一个实体类（只是一个`Pojo`带有 setter 和 getter 的基本类，一个用 @Id 注释的 id 字段，以及用 @Entity 注释的类），启动 derby 网络服务器，然后我总是得到这个错误：

```
a stack trace with "OutOfMemoryError: PermGen space". 
```

我试过这样启动myeclipse：

```
MEM_ARGS="-Xms512m -Xmx512m";export MEM_ARGS
./myeclipse4spring
and like this
./myeclipse4spring -Xms512m -Xmx512m 
```

也可以通过右键单击`myeclipse4spring`MyEclipse Tomcat 并选择 Manage Launch Configuration/Add 然后输入：

```
-XX:PermSize=1024M -XX:MaxPermSize=1024M 
```

在神奇出现的文本框中，但是当我点击 Enter 时，一切都消失了，确定按钮变灰。有没有人让这个向导工作？我正在运行 Linux Mint。

# css - Django - CSS 问题

> ID：13792243
> 
> 赞同：0
> 
> 时间：2012-12-09T21:52:00.477
> 
> 标签：css, django

这更像是“为什么会发生这种情况”的问题，因为这没什么大不了的。让它停下来会很棒，但我可以接受它。

我有一个用 Django 制作的 webapp。我有两台服务器：开发服务器和生产服务器。我已正确加载所有 CSS/img/js 文件，并且在两台服务器上一切正常。有点。生产服务器工作正常（CSS/imgs/Javascript 的所有内容都应该加载）

我在开发服务器上进行所有开发，并在编写代码时使用 Django 的测试服务器。当我第一次执行`runserver`命令时，我打开了我的浏览器（特别是 Chrome）。我导航到我的`192.1.1.123:8080`地址，那里有我的 Django Web 应用程序，但没有加载任何 CSS。然后我要做的是打开第二个选项卡（让第一个选项卡保持打开状态）`192.1.1.123:8080`再次导航到我的选项卡，然后加载所有 CSS（无需重新启动 django Web 服务器）。我相信这是一个浏览器特性——关于缓存的东西。但我不确定。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:13:16.200

当我在处理几个 Django 项目并在它们之间切换时，我遇到了类似的问题。浏览器缓存了所有静态内容，并没有注意到文件因切换到另一个项目而改变。使用 CTRL+F5 重新加载页面应该可以解决它。

# php - 如何隐藏/禁用在 php 生成的列表中显示特定数组？

> ID：13792247
> 
> 赞同：1
> 
> 时间：2012-12-09T21:52:54.227
> 
> 标签：php, arrays

我有这个 PHP 代码：

```
<?
$shopsite_templates = array(
    array('tmpl_1', 'Template 1'),
    array('tmpl_2', 'Template 2'),
    array('tmpl_3', 'Template 3'),
    array('tmpl_4', 'Template 4')

);
?> 
```

以及创建这些模板列表的 html 和 php 代码：

```
<? foreach ($shopsite_templates as $value) {?>
    <? for ($i = 0; $i < count($shopsite_templates); $i++){ ?>
        <div style="float: left;">
            <div id="reg_web_tmp_box">
            <div class="temp_name"><strong><? echo $shopsite_templates[$i][1]; ?></strong>
        </div>
        <div class="select">
            <div class="reg_selectradio"><input name="edittmpl" type="radio" id="tmpl_<? echo $i; ?>" value="<? echo $shopsite_templates[$i][0]; ?>"<? if ($formitems['tmpl'] == $shopsite_templates[$i][0]) { ?> checked="checked"<? }; ?> /> <? echo $langdata['registshop_temp_select']; ?></div>
        </div>
        <div class="clear"></div>
    </div>
</div>
    <? }; ?>
<? }; ?> 
```

一切正常，但我希望例如 tmpl_4（模板 4）不在列表中。我无法删除它，它必须出现在 $shopsite_templates 但不在此列表中。

我需要这个，因为我有几个免费模板提供给我的客户，并且我有一些我不想提供给他们的模板，但我需要将它用于进一步的业务。

我希望各位大师能理解我的问题。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:03:01.487

您可以将不希望显示在数组中的项目像这样：

```
$hide=array(1,5); 
```

然后在 for 循环中执行以下操作：

```
<? for ($i = 0; $i < count($shopsite_templates); $i++){ 
        if(!in_array($i,$hide)){
         //echo your templates html or whatever
  ?> 
```

# actionscript-3 - 如何以正确的方式从实例对象触发 Main 函数？

> ID：13792248
> 
> 赞同：1
> 
> 时间：2012-12-09T21:53:00.190
> 
> 标签：actionscript-3, reference, singleton, main, movieclip

**我想从Main** MovieClip 和其他任何地方完全控制我的游戏。但是我不想通过构造函数传递它的实例，也不想从它的孩子那里引用任何*.parent的东西。*似乎太变通和不稳定。

示例情况：

```
public class Main extends MovieClip {
    public function Main() {
        addChild(new MainMenu());
    }

    public function startGame():void {
        trace("Game started");
    }
} 
```

```
public class MainMenu extends Sprite {
    public function MainMenu() {
        var option:Option = new Option(); // Some BitmapData library linkage
        option.addEventListener(MouseEvent.CLICK, clicked);
        addChild(option);
    }

    public function destroy():void {
        // set null/dispose/removeChildren/removeEventListener/etc.
    }

    private function clicked(evt:MouseEvent):void {
        // Should trigger startGame() here (how?) to keep the flow at Main,
        destroy(); // since this has nothing to do with it anymore
    }
} 
```

我希望有一些类似 Singleton 的解决方案，但 AS3 中没有静态类。从我的研究来看，这似乎是一种不好的做法（或者是吗？）。

好吧，我只想从**Main**角度用*优雅的代码*或至少*官方实践*来做所有事情。我怎样才能做到这一点？（请告诉我这是可能的...... **：s**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:26:00.210

对于单身人士，我使用 Grant Skinner 的[单身人士类](http://gskinner.com/blog/archives/2006/07/as3_singletons.html)，效果很好。

但是，对于您的需求，我认为 Singleton 不是解决方案。相反，我会让子对象调度父对象将侦听的自定义事件。这是一个简短的示例，使用出色的[AS3 信号](https://github.com/robertpenner/as3-signals)库而不是自定义事件：

```
public class Main extends MovieClip {
    public function Main() {
        var mainMenu:MainMenu new MainMenu();
        addChild(mainMenu);
        mainMenu.destroyed.add(startGame);
    }

    public function startGame():void {
        trace("Game started");
    }
} 
```

和孩子：

```
public class MainMenu extends Sprite {

    public var destroyed:Signal;

    public function MainMenu() {
        destroyed= new Signal();
        var option:Option = new Option(); // Some BitmapData library linkage
        option.addEventListener(MouseEvent.CLICK, clicked);
        addChild(option);
    }

    public function destroy():void {
        // set null/dispose/removeChildren/removeEventListener/etc.
    }

    private function clicked(evt:MouseEvent):void {
       // Tell any class that is listening that this is being destroyed
       destroyed.dispatch();
       destroy();
    }
} 
```

这样 MainMenu 类就​​不需要知道关于 Main 的任何信息；相反，它只是在适当的时候发送信号，指示监听类采取行动。

可能有更优雅的方法来处理这个问题（我很好奇自己有什么方法可以解决这个问题），但这是我通常使用的方法，我发现它运作良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:38:46.860

我认为您可以考虑另外两种方法：静态实例：

```
public static var main:Main;
public function Main() {
    main = this;
    ...
} 
```

然后：

```
public function MainMenu() {}

private function clicked(evt:MouseEvent):void {
    Main.main.startGame();
} 
```

如果您的应用程序不是太大，或者使用一些静态调度程序：

```
public static var dsp:EventDispatcher = new EventDispatcher();
public function Main() {
    dsp.addEventListener("StartGame",stageGame);
    ...
} 
```

在主菜单中：

```
 private function clicked(evt:MouseEvent):void {
    Main.dsp.dispatchEvent(new Event("StartGame"));
 } 
```

在这里，您始终可以创建额外的类来处理事件调度/侦听。

# benchmarking - phoronix 测试套件从另一个系统中提取结果

> ID：13792249
> 
> 赞同：2
> 
> 时间：2012-12-09T21:53:03.020
> 
> 标签：benchmarking, test-suite

我正在使用 phoronix 测试套件对各种系统进行基准测试。我已经将许多系统的结果收集到我的电脑上，我想将结果提取为文本格式，然后进行比较。

选项*result-file-to-text*查看 phoronix 存储结果并生成输出的默认路径。问题是我已将结果收集到与运行基准测试的测试套件不同的机器上，并且选项*result-file-to-text*在默认目录中找不到结果。

如何将结果提取到文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T15:56:40.373

您可以将结果上传到[http://openbenchmarking.org/](http://openbenchmarking.org/)，我认为您可以在那里将结果转换为 pdf 格式，或者只是将结果复制并粘贴到文本文件中

# android - MediaPlayer 之上的 Android Webview

> ID：13792252
> 
> 赞同：1
> 
> 时间：2012-12-09T21:53:52.983
> 
> 标签：android, webview, media-player

我正在创建一个网站，该网站使用可以启动 MediaPlayer 实例和流式传输内容的 web 视图。在播放期间，我有 HTML 元素来控制开始/停止等。

我一生都无法弄清楚如何使这项工作。我想要的是将视频放在 webview 后面，这样我就可以在 HTML 对象同时在屏幕上时看到视频播放。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:14:19.307

我不确定我是否明白你到底想要什么。控制布局使用中视图的顺序`View.bringToFront()`。并使视图透明使用`View.setAlpha(0)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T03:36:52.727

答案是 Android 中存在一个错误，该错误会阻止在启用硬件加速时在 web 视图后面看到内容。

错误：[https ://code.google.com/p/android/issues/detail?id=14749](https://code.google.com/p/android/issues/detail?id=14749)

解决方法：在不需要视频下方的内容时启用硬件加速，并在需要时禁用。

# go - 删除使用 go get 安装的软件包

> ID：13792254
> 
> 赞同：331
> 
> 时间：2012-12-09T21:54:05.563
> 
> 标签：go

我跑去`go get package`下载一个包，然后才知道我需要设置我的包，`GOPATH`否则这个包会污染我的根 Go 安装（我更愿意保持我的 Go 安装干净并将核心与自定义分开）。如何删除以前安装的软件包？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2012-12-09T22:02:30.493

只删除源目录和编译的包文件是安全的。找到下的源码目录`$GOPATH/src`和下的包文件`$GOPATH/pkg/<architecture>`，例如：`$GOPATH/pkg/windows_amd64`.

* * *

## 回答 #2

> 赞同：207
> 
> 时间：2015-10-27T15:58:53.187

您可以删除`go install`（或`go get`）为带有`go clean -i importpath...`. 它们通常分别位于`$GOPATH/pkg`和下`$GOPATH/bin`。

确保包含`...`在导入路径中，因为看起来，如果包包含可执行文件，`go clean -i`则只会删除该可执行文件，而不是归档子包`gore/gocode`的文件，如下例所示。

然后需要从`$GOPATH/src`.

`go clean`有一个`-n`空运行标志，它打印将运行的内容而不执行它，因此您可以确定（请参阅 参考资料`go help clean`）。它还有一个诱人的`-r`标志来递归清理依赖项，你可能不想实际使用它，因为你会从空运行中看到它会删除许多标准库存档文件！

一个完整的示例，如果您愿意，您可以基于该示例编写脚本：

```
$ go get -u github.com/motemen/gore

$ which gore
/Users/ches/src/go/bin/gore

$ go clean -i -n github.com/motemen/gore...
cd /Users/ches/src/go/src/github.com/motemen/gore
rm -f gore gore.exe gore.test gore.test.exe commands commands.exe commands_test commands_test.exe complete complete.exe complete_test complete_test.exe debug debug.exe helpers_test helpers_test.exe liner liner.exe log log.exe main main.exe node node.exe node_test node_test.exe quickfix quickfix.exe session_test session_test.exe terminal_unix terminal_unix.exe terminal_windows terminal_windows.exe utils utils.exe
rm -f /Users/ches/src/go/bin/gore
cd /Users/ches/src/go/src/github.com/motemen/gore/gocode
rm -f gocode.test gocode.test.exe
rm -f /Users/ches/src/go/pkg/darwin_amd64/github.com/motemen/gore/gocode.a

$ go clean -i github.com/motemen/gore...

$ which gore

$ tree $GOPATH/pkg/darwin_amd64/github.com/motemen/gore
/Users/ches/src/go/pkg/darwin_amd64/github.com/motemen/gore

0 directories, 0 files

# If that empty directory really bugs you...
$ rmdir $GOPATH/pkg/darwin_amd64/github.com/motemen/gore

$ rm -rf $GOPATH/src/github.com/motemen/gore 
```

请注意，此信息基于`go`Go 版本 1.5.1 中的工具。

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2021-05-20T12:45:20.713

可以按如下方式删除一个 go 包

```
go get package@none 
```

这`@none`是此处设置为的版本部分`none`。从而卸下包装。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2021-05-09T15:08:01.727

您可以使用`go mod tidy`清理未使用的包

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-04-27T20:04:08.543

```
#!/bin/bash

goclean() {
 local pkg=$1; shift || return 1
 local ost
 local cnt
 local scr

 # Clean removes object files from package source directories (ignore error)
 go clean -i $pkg &>/dev/null

 # Set local variables
 [[ "$(uname -m)" == "x86_64" ]] \
 && ost="$(uname)";ost="${ost,,}_amd64" \
 && cnt="${pkg//[^\/]}"

 # Delete the source directory and compiled package directory(ies)
 if (("${#cnt}" == "2")); then
  rm -rf "${GOPATH%%:*}/src/${pkg%/*}"
  rm -rf "${GOPATH%%:*}/pkg/${ost}/${pkg%/*}"
 elif (("${#cnt}" > "2")); then
  rm -rf "${GOPATH%%:*}/src/${pkg%/*/*}"
  rm -rf "${GOPATH%%:*}/pkg/${ost}/${pkg%/*/*}"
 fi

 # Reload the current shell
 source ~/.bashrc
} 
```

用法：

```
# Either launch a new terminal and copy `goclean` into the current shell process, 
# or create a shell script and add it to the PATH to enable command invocation with bash.

goclean github.com/your-username/your-repository 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-13T10:57:02.030

大哥，我昨天也遇到了同样的问题。中找不到任何东西`$GOPATH/pkg/<architecture>`。然后，我意识到我的 $HOME 中有一个 go 目录。所以，我搬到`$HOME/<username>/go/pkg/mod/github.com`并看到了我从 github 安装的所有包`go get`

# c++ - 在 openGL 中翻译茶壶

> ID：13792256
> 
> 赞同：1
> 
> 时间：2012-12-09T21:54:18.147
> 
> 标签：c++, opengl, graphics, 3d

这是我的 reshape func 的最后代码：

```
 glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        gluLookAt(0,0,-10,
                  0,0,0,
                  0,1,0);

} 
```

这是我的显示功能：

```
glPushMatrix();
glTranslatef(0,5,0);
glutSolidTeapot(2);
glPopMatrix(); 
```

茶壶的顶部会崩溃，似乎绕x轴旋转向后？为什么我得到这个？我怎样才能在不崩溃的情况下翻译茶壶？

![在此处输入图像描述](../Images/d8b87c8128200bad6dd9d9f3b4b2497d.png)

# jquery-mobile - Jquery Mobile changePage 加载网站而不切换标题

> ID：13792259
> 
> 赞同：2
> 
> 时间：2012-12-09T21:54:25.777
> 
> 标签：jquery-mobile, header, slide

此时，当我使用幻灯片转换调用 changePage() 时，整个页面都在滑动，标题也是如此。是否有可能，在 changePage 上，标题是静态的，只有标题的按钮和标题在变化，但标题作为本机应用程序保持静态。

我的意思是，我在某处读到，JQM 中的页面是由 Ajax 加载的。但是在我的应用程序上，我看到页面是如何切换完成的，这看起来很弱。

是否可以以某种方式进行切换，就好像标题是静态的并且只有内容被切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:45:47.393

使用 changePage 是不可能的，但您可以将新内容加载到内容 div，如下所示：

```
 <div data-role="page" id="main_page">
      <div data-role="header">
        <h1 id="page_title">My Title Here</h1>
      </div>
      <div data-role="content">
        <div id="page_data">
            <button id="changepage">ChangePage</button>
          <h3>Some stuff</h3>
            <input type="text" value="sometext" /><br />
          <ul data-role="listview">
           <li>Some other stuff</li>
          </ul>
          </div>
      </div>
    </div> 
```

然后当你想改变页面时：

```
$("#page_title").html("New page title!");
$("#page_data").html("<h3>my awesome markup</h3>"); // this could come from ajax'ing
$("#page_data").trigger('create'); 
```

请记住，标题栏上的任何按钮也需要隐藏和显示。您可以通过拥有多个内容 div 并使用`$.animate`or来转换新内容`$.fadeIn`。

编辑：这是一个工作示例： http: [//jsfiddle.net/Y9PVC/2/](http://jsfiddle.net/Y9PVC/2/)（现在有淡出和淡入）。

# facebook - 服务器端的方式来确保客户端已经授予了某些权限并且没有撤销它们？

> ID：13792261
> 
> 赞同：0
> 
> 时间：2012-12-09T21:54:41.583
> 
> 标签：facebook, asp.net-mvc-4, facebook-c#-sdk, facebook-oauth, facebook-login

好的，让我们假设以下工作流程：

```
Client ----> Server (I Want to login via-facebook, here is the Auth Token from Js Sdk)
Server ----> Facebook (Get permissions list)
Server ----> Client (Redirect-login, to OK ALL DONE) 
```

您如何从这里开始，以确保客户在向他们展示另一个页面**之前**拥有特定的权限？IE：

```
Client ----> Server (I want page at url XXX)
Server ----> Database (Permission list has the needed permissions for this url, so ok)
Server ----> Client (Permission list was ok, here is the page) 
```

但是，客户端可能在某些时候撤销了某些权限，甚至完全从服务器中删除了访问权限。因此，我们需要在每次需要确保访问权限时实际询问 facebook，而不是将权限存储到数据库，如下所示：

```
Client ----> Server (I want page at url XXX)
Server ----> **Facebook** (Permission list has the needed permissions for this url, so ok)
Server ----> Client (Permission list was ok, here is the page) 
```

当然，此工作流程无法扩展，会使加载时间变得非常长，并且通常是错误的。是否有另一种方法可以确保在加载页面之前客户端已获得授权（以及特定权限）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:22:55.063

可以查询当前权限，`/userid/permissions`。（您也可以使用字段扩展来请求特定权限）。

[并且您可以使用实时更新](https://developers.facebook.com/docs/reference/api/realtime/)来获取用户授予您应用程序的权限更改的自动更新。（这样，您可以将它们存储在数据库中并保持最新状态，而无需每次都询问。）

# javascript - jQuery 代码在 v1.8.3 中不再工作

> ID：13792267
> 
> 赞同：0
> 
> 时间：2012-12-09T21:55:35.403
> 
> 标签：javascript, jquery, html, css

我正在关注 jQuery[教程](http://tutorialzine.com/2010/11/better-select-jquery-css3/)，它的代码似乎适用于 jQuery 1.4.3，但我需要它才能适用于 jQuery 1.8.3。

**jsfiddle：http:** [//jsfiddle.net/auBbz/](http://jsfiddle.net/auBbz/)

**问题：**当我将使用的jQuery版本切换到1.8.3版本后，用 替换后`className`，窗格中`class`显示的选择`Result`框里面没有任何文本`<div class="selectBox"></div>`。

**做出改变后的jsfiddle：http:** [//jsfiddle.net/auBbz/1/](http://jsfiddle.net/auBbz/1/)

我错过了哪些其他变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:06:07.273

1.4 和 1.6 之间更重大的变化之一是`attr()`方法和方法的引入，`prop()`用于不是真正的属性的属性。

`selectedIndex`将被视为属性而不是属性。您的代码正在返回`undefined`. 改为`attr('selectedIndex')`使用`prop('selectedIndex')`

演示：http: [//jsfiddle.net/auBbz/3/](http://jsfiddle.net/auBbz/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:06:25.570

您正在遵循的教程很糟糕且已过时。

删除此条件：

```
if(i==select.attr('selectedIndex')){
          selectBox.html(option.text());
      } 
```

在循环之前添加以下内容：

```
selectBox.html(select.find('option:selected').text()); 
```

[http://jsfiddle.net/oceog/auBbz/2/](http://jsfiddle.net/oceog/auBbz/2/)

该教程很糟糕，因为它使用`attr`了 html 的非标准属性，并且正如他们所知，1.4.2 引入了该`data()`方法，涵盖了这一点。好。每个`option`选择的`select`都有`selected`属性，所以当有标准属性存在时，我不理解使用自定义属性的原因。

# objective-c - 加载视图后运行代码

> ID：13792268
> 
> 赞同：0
> 
> 时间：2012-12-09T21:55:36.373
> 
> 标签：objective-c

我的项目有问题。视图需要永远打开，因为我正在从数据库下载信息，当我单击按钮打开新视图时，它会在视图打开之前从数据库加载所有信息并填充表格单元格，然后打开视图。

我想让它打开视图，显示一个加载符号，然后将数据加载到表中，有什么提示吗？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:01:44.987

你真的应该考虑在后台做一些事情。[这个链接应该让你去。](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:05:41.070

使用 -(void)viewDidAppear:animated 方法显示加载符号，然后开始下载。

尽管您应该在后台执行此操作。

# javascript - 最后没有调用iOS滚动事件？

> ID：13792270
> 
> 赞同：0
> 
> 时间：2012-12-09T21:55:45.660
> 
> 标签：javascript, jquery, javascript-events

当用户在我的页面上可滚动的特定 div 上拖动时，我试图调用一个函数。以下对我不起作用：

```
document.addEventListener("scroll", scroll, false);
$("#content").on("scroll", scroll, false);
$(document).on("scroll", scroll, false);

function scroll(){
    alert("scrolled");
} 
```

我试图捕捉滚动的 div 是`#content`. 我认为上述其中之一会起作用，但它们不会产生任何错误，也不会被称为正确。

第一个根本不运行`scroll`。第二个在用户滚动时调用该函数，而不是在最后。第三个只调用`body`元素上的函数。

**这是一个演示**： http: [//www.codekraken.com/snow/app_testing/test2.html](http://www.codekraken.com/snow/app_testing/test2.html)

完整代码：

```
$(document).ready(function () {

    var extra = $("#content").height() - $("#list").height();
    if (extra > 0) {
        $("#list").css("margin-bottom", extra);
    }
    $("#content").scrollTop("50");

    var removeTransition = function () {
        content.style['-webkit-transition-duration'] = 0;
    };
    content = document.getElementById('content');
    pullToRefresh = document.getElementById('pull_to_refresh');
    refreshing = document.getElementById('refreshing');

    function success(callback) {
        // simulate a network request that takes 2 seconds
        window.setTimeout(function () {
            var l = document.getElementById('list');
            for (var i = 0; i < 5; i++) { // insert 5 new items
                var li = document.createElement('li');
                li.innerHTML = 'List Item ' + Math.floor(Math.random() * 100);
                li.style.opacity = 0;
                l.insertBefore(li, l.firstChild);
            }
            window.setTimeout(function () {
                for (var i = 0; i < 5; i++) {
                    l.children[i].style.opacity = 1;
                }
            }, 0);
            callback(); // pull callback when finished
        }, 2000);
    }

    function start() {
        console.log('start');
    }

    function cancel() {
        console.log('cancel');
    }
    $("#content").on('scroll', function (e) {
        var test = $("#list li").eq(1).offset().top - $("#list li").outerHeight();
        if (test > 0) {
            $("#content").scrollTop("50");
        }
    });
    document.getElementById('content').addEventListener('touchend', function (e) {
        if (refresh) {
            content.style['-webkit-transition-duration'] = '.5s';
            $("#content").scrollTop("0");
            pullToRefresh.style.display = 'none';
            refreshing.style.display = '';
            success(function () { // pass down done callback
                pullToRefresh.style.display = '';
                refreshing.style.display = 'none';
                $("#content").scrollTop("50");
                content.addEventListener('transitionEnd', removeTransition);
            });
            refresh = false;
        } else {
            content.style['-webkit-transition-duration'] = '.25s';
            $("#content").scrollTop("50");
            content.addEventListener('transitionEnd', removeTransition);
            cancel();
        }
    });
    document.getElementById('content').addEventListener('touchmove', function (e) {
        var test = $("#list li").eq(1).offset().top - $("#list li").outerHeight();
        if (test === 0) {
            refresh = true;
        } else {
            refresh = false;
        }
    });
    document.getElementById('content').onscroll = function(){
        alert("test");
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:59:38.193

据我了解，您想知道用户何时停止滚动？如果是这样，我会尝试以下方法。

```
var timeoutId = null;
$("#content").on("scroll", scroll, false);

function scroll(){
    if(timeoutId != null){
        clearTimeout(timeoutId);
    }
    timeoutId = setTimeout("scrollEnd()", 100);
}

function scrollEnd(){
    timeoutId = null;
} 
```

然后当用户停留 100ms 时调用函数 scrollEnd。

# c++ - Map C++ 的散列函数

> ID：13792271
> 
> 赞同：0
> 
> 时间：2012-12-09T21:56:07.447
> 
> 标签：c++, data-structures, hash, hashmap, hashtable

我试图确定一个哈希函数，它接受输入 (i, k) 并确定一个唯一的解决方案。

(i, k) 的可能输入范围从 0 到 100。将每个 (i, k) 视为一个节点在三叉树中的位置。

```
Ex: (0, 0) can diverge to (1, 1) (1, 0) (1, -1). 
    (1, 1) can diverge to (2, 2) (2, 1) (2, 0). 
```

此处给出的示例：

```
http://www.google.com/imgres?imgurl=http://sfb649.wiwi.hu-berlin.de/fedc_homepage/xplore/tutorials/stfhtmlimg1156.gif&imgrefurl=http://sfb649.wiwi.hu-berlin.de/fedc_homepage/xplore/tutorials/stfhtmlnode41.html&h=413&w=416&sz=4&tbnid=OegDZu-yeVitZM:&tbnh=90&tbnw=91&zoom=1&usg=__9uQWDNYNLV14YioWWbrqPgfa3DQ=&docid=2hhitNyRWjI_DM&hl=en&sa=X&ei=xAfFUIbyG8nzyAHv2YDICg&ved=0CDsQ9QEwAQ 
```

我正在使用地图

```
map <double, double> hash_table 
```

我需要从对 (i, k) 中确定一个键值以散列到该 (i, k) 的值

到目前为止，我只能提出线性函数，例如： double Hash_function(int i, int k)

```
{
    //double val = pow(i, k) + i;
    //return (val % 4294967296);
    return (i*3.1415 + k*i*9.12341); 
} 
```

但是，我无法确定具有某个（i，k）的唯一键。我可以使用哪些功能来帮助我这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:47:59.967

从数学上讲，您正在寻求[双射](http://en.wikipedia.org/wiki/Bijection)。这不是计算机科学意义上的散列函数，因为散列函数有时会产生冲突（除非它是[完美的散列函数](http://en.wikipedia.org/wiki/Perfect_hash_function)）。

您标记`hash_table`的不是哈希表。`std::map`是一种不同的数据结构，称为有序映射，它能够使用小于运算符`<`为其提供[严格弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)的任何键类型。实际上，您可以[`std::pair`](http://www.cplusplus.com/reference/utility/pair/)从`utility`标题中使用：

```
std::map<std::pair<int, int>, double> table; 
```

要插入表中，您将使用：

```
table[std::make_pair(i, j)] = value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:18:45.593

@Grizzly 是正确的，使用 double 作为键是有问题的。也许使用基于字符串的散列技术会更好？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:01:20.610

如果 i & k 是 0-100，那么您的密钥可以是一个简单的短（甚至签名），并且是唯一生成的，例如`short key = i | k << 8`.

# c# - 返回 C# 中 Blog.ID == id 的帖子列表

> ID：13792273
> 
> 赞同：0
> 
> 时间：2012-12-09T21:56:19.570
> 
> 标签：c#, linq

这就是我现在所拥有的。

```
 public ViewResult Index(string id)
    {
        var posts = db.Posts.Include(p => p.Blog.Id);
        return View(posts.ToList());
    } 
```

这是返回所有帖子，我如何做 linq 查询只给我 postw`Blog.id == id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T21:57:22.613

我相信您只需要使用 .Where() 过滤您的帖子。下面，我假设 Blog.Id 是一个字符串。如果没有，你将不得不适当地投射。

```
public ViewResult Index(string id)
{
    var posts = db.Posts.Where(p => p.Blog.Id == id);
    return View(posts.ToList());
} 
```

# c# - 通过单个套接字同时传输 2 个文件？

> ID：13792275
> 
> 赞同：0
> 
> 时间：2012-12-09T21:56:36.870
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio, sockets

如果我想通过 TCP 套接字（到单个客户端）同时传输 2 个文件，是否可以通过单个套接字执行此操作，还是需要 2 个套接字才能这样做？我不希望文件#2 在传输之前等待文件#1 传输。我希望他们同时转移。

如果我需要 2 个插座，最好的方法是什么？我不认为可以只复制套接字并通过它进行传输吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T21:59:44.023

是的，这是可能的，但排队理论告诉我们，根据大多数速度指标，先传输一个然后传输另一个更好。而且还需要更少的逻辑。

那么为什么需要并行传输它们呢？文件在传输过程中是否在增长，或者您无法先完成传输的其他原因？

# javascript - 在 D3 中渲染更新图表的 Javascript 问题

> ID：13792277
> 
> 赞同：0
> 
> 时间：2012-12-09T21:56:44.913
> 
> 标签：javascript, jquery, graph, d3.js

我正在尝试绘制图表，当我在这里使用代码时，它呈现得很好：http: [//jsfiddle.net/skzBt/1/](http://jsfiddle.net/skzBt/1/)。但是下面的代码不起作用。

```
ws = new WebSocket("ws://localhost:8888/dh");

var buffer = [['1', [0]], ['2', [0]], ['3', [0]], ['4', [0]]];
var data = [];

var w = 500;
var h = 300;
var barPadding = 1;

var chart = d3.select("#chart").append("svg:svg")
//.attr("class", "chart");
.attr("width", w).attr("height", h);

function draw() {
    chart.selectAll("rect").data(data).enter().append("svg:rect").attr("x", function(d, i) {
        return i * (w / data.length);
}).attr("y", function(d) {
    return h - (d * 4);
}).attr("width", w / data.length - barPadding).attr("height", function(d) {
    return d * 4;
}).attr("fill", function(d) {
    return "rgb(0, 0, " + (d * 10) + ")";
});

chart.selectAll("text").data(data).enter().append("svg:text").text(function(d) {
    return d;
}).attr("text-anchor", "middle").attr("x", function(d, i) {
    return i * (w / data.length) + (w / data.length - barPadding) / 2;
}).attr("y", function(d) {
    return h - (d * 4) + 14;
}).attr("font-family", "sans-serif").attr("font-size", "11px").attr("fill", "white");

};

//draw();     
ws.onmessage = function(evt) {
    data.length = 0;
    var distances = JSON.parse(evt.data);
    console.log(distances);
    for (var i = 0; i < buffer.length; i++) {
        if (buffer[i][0] == distances.miles) {
            buffer[i][1][0]++; //add the new miles to the total from previous iteration
        }
    }
    console.log(buffer);

    for (var i = 0; i < buffer.length; i++) {
        data.push(buffer[i][1][0]);
        console.log(data);
        draw(); //redraw the graph
    }
} 
```

我认为它必须对 data.length = 0; 做一些事情，因为没有它，图形会呈现但每个项目都会添加额外的列。我希望每次更新数组数据时都重新绘制图表。我知道数据正在使用递增的值进行更新。

我真的很困惑并被困在这里，非常感谢您的帮助。

谢谢

编辑：

在对函数 draw() 进行更多测试后，我可以看到“数据”数组中的值正确递增，并且似乎发生的情况是该函数仅被调用一次，因为它仅绘制一次值然后停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:08:33.987

您应该能够简化 .onmessage 处理程序，如下所示：

```
var data = [0, 0, 0, 0];
...
ws.onmessage = function(evt) {
    var distances = JSON.parse(evt.data);
    data[distances.miles-1]++;
    draw();
} 
```

所有其他问题必须在`draw()`函数内部。恐怕我不是**d3**方面的专家，所以你将不得不放弃这一点。广泛的[API](https://github.com/mbostock/d3/wiki/API-Reference)文档将是您最好的朋友。

# php - 时钟计数 javascript/php 错误

> ID：13792280
> 
> 赞同：1
> 
> 时间：2012-12-09T21:57:22.713
> 
> 标签：php, javascript, jquery

[http://www.juriseodesign.com/clock/Sydney.php](http://www.juriseodesign.com/clock/Sydney.php)

我的时钟计数 javascript 显示错误。我有我的背景更改工作，但在添加计数时钟 javascript 后，时钟不起作用。我猜这是由 Mootools 和常规 jQuery 的“冲突”引起的，但我不知道如何修复它。有人可以帮我吗？另外，当我单击下拉菜单中的城市之一时，如何连接到其他页面？

太感谢了！

// JavaScript 文档

```
//initial time
var h_current = -1;
var m1_current = -1;
var m2_current = -1;
var s1_current = -1;
var s2_current= -1;

function flip (upperId, lowerId, changeNumber, pathUpper, pathLower){
    var upperBackId = upperId+"Back";
    $(upperId).src = $(upperBackId).src;
    $(upperId).setStyle("height", "64px"); 
```

Uncaught TypeError: Object # has no method 'setStyle' (repeated 315 times) $(upperId).setStyle("visibility", "visible"); $(upperBackId).src = pathUpper+parseInt(changeNumber)+".png";

```
 $(lowerId).src = pathLower+parseInt(changeNumber)+".png";
    $(lowerId).setStyle("height", "0px");
    $(lowerId).setStyle("visibility", "visible");

    var flipUpper = new Fx.Tween(upperId, {duration: 200, transition: Fx.Transitions.Sine.easeInOut});
    flipUpper.addEvents({
        'complete': function(){
            var flipLower = new Fx.Tween(lowerId, {duration: 200, transition: Fx.Transitions.Sine.easeInOut});
                flipLower.addEvents({
                    'complete': function(){ 
                        lowerBackId = lowerId+"Back";
                        $(lowerBackId).src = $(lowerId).src;
                        $(lowerId).setStyle("visibility", "hidden");
                        $(upperId).setStyle("visibility", "hidden");
                    }               });                 
                flipLower.start('height', 64);

        }
                        });
    flipUpper.start('height', 0);

}//flip

function retroClock(){

    // get new time
     now = new Date();
     h = now.getHours();
     m1 = now.getMinutes() / 10;
     m2 = now.getMinutes() % 10;
     s1 = now.getSeconds() / 10;
     s2 = now.getSeconds() % 10;
     if(h < 12)
        ap = "AM";
     else{ 
        if( h == 12 )
            ap = "PM";
        else{
            ap = "PM";
            h -= 12; }
     }

     //change pads

     if( h != h_current){
        flip('hoursUp', 'hoursDown', h, 'Single/Up/'+ap+'/', 'Single/Down/'+ap+'/');
        h_current = h;
    }

    if( m2 != m2_current){
        flip('minutesUpRight', 'minutesDownRight', m2, 'Double/Up/Right/', 'Double/Down/Right/');
        m2_current = m2;

        flip('minutesUpLeft', 'minutesDownLeft', m1, 'Double/Up/Left/', 'Double/Down/Left/');
        m1_current = m1;
    }

     if (s2 != s2_current){
        flip('secondsUpRight', 'secondsDownRight', s2, 'Double/Up/Right/', 'Double/Down/Right/');
        s2_current = s2;

        flip('secondsUpLeft', 'secondsDownLeft', s1, 'Double/Up/Left/', 'Double/Down/Left/');
        s1_current = s1;
    }

}

setInterval('retroClock()', 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:02:17.427

我只是查看了 jQuery 参考，setStyle 方法不存在。您应该改用`css`方法：

```
$(upperId).css('height','64px;'); 
```

查看这段代码，有很多东西与 jQuery 方法不匹配。

例如：如果你想将`src`属性更改为`upperId`元素，在 jQuery 中你应该使用`attr`方法：

```
// $(upperId).src = $(upperBackId).src;  // WRONG
$(upperId).attr('src', $(upperBackId).attr('src'));   // CORRECT 
```

如果要引用带有 id 的元素，则必须`#`在元素 id 之前添加：

```
var upperBackId = "#" + upperId + "Back"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:13:44.607

像其他人建议你应该使用 $(..).css( ...) 函数，因为 setStyle 在 jQuery 中不存在。

我通常也更喜欢使用 $(...).hide() 和 $(...).show() 而不是 $(...).css("visibility","hidden") 或 $(. ..).css("visibility","visible") 因为“visibility”仍然占用空间并且与将 opacity 设置为 0 相同 - 如果我隐藏元素，我不希望它使用任何空间...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:05:32.193

您尝试将 Mootools 方法与 jQuery 一起使用。jQuery 中没有 setStyle() 方法。

# android - Android 中各种语言环境的自定义日期时间格式

> ID：13792282
> 
> 赞同：0
> 
> 时间：2012-12-09T21:57:47.247
> 
> 标签：android, localization

我正在寻找有关如何在我的 Android 应用程序中为各种语言环境（例如芬兰语、法语等）格式化日期和时间的文档。我在 Android 的文档中找不到此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:12:55.693

```
// (1) get today's date
Date today = Calendar.getInstance().getTime();

// (2) create our date "formatter" (the date format we want)
SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd hh:mm:ss yyyy");

// (3) create a new String using the date format we want
String result = formatter.format(today);

// (4) this prints "Result = Sun Sep 06 08:32:51 2009" in English and will be translated depending on phone Locale
System.out.println("Result = " + result); 
```

资料来源：[http ://alvinalexander.com/java/simpledateformat-convert-date-to-string-formatted-parse](http://alvinalexander.com/java/simpledateformat-convert-date-to-string-formatted-parse)

# html - 填充/绝对定位的 div 的问题

> ID：13792284
> 
> 赞同：3
> 
> 时间：2012-12-09T21:57:54.487
> 
> 标签：html, css, padding

我遇到了以前从未遇到过的问题。它开始发生在几个月前，对于我的生活，我无法弄清楚发生了什么。我在应该没有的地方有填充，绝对定位的 div 不会定位在我告诉它们的位置。这是网站：

[http://www.underthebelljar.com/](http://www.underthebelljar.com/)

我已经在有问题的区域添加了背景颜色，以便您了解我的意思。在上面写着“在钟罩下”的顶部，我有一个相对 div（棕褐色），其中有一个绝对定位的 div（红色），定位到底部：0；。绝对 div 上没有任何填充，但正如您所看到的，顶部和底部填充都不像与 div 一样应该与 div 齐平的侧面。过去我已经做过一百万次了，直到几个月前开始这样做之前，我从来没有遇到过最严重的问题。与主要和侧边栏区域相同。侧面与 div 齐平，但顶部有填充，我没有放置填充。

感谢您提供的任何帮助：o）

# javascript - Chrome 扩展程序开发以更改网页中的锚点的问题

> ID：13792288
> 
> 赞同：0
> 
> 时间：2012-12-09T21:58:58.230
> 
> 标签：javascript, json, google-chrome-extension

我正在尝试构建一个 chrome 扩展程序，它检查用户当前查看的页面的所有链接，并检查该链接的目标，如果它是“http://www.youtube.com”，那么扩展程序将改变它到“https://www.youtube.com”

但我的扩展程序不起作用！

这是我的 manifest.json

```
{
  "name": "Youtube Host Changer",
  "version" : "1.0",
  "manifest_version" : 2,
  "description" : "It changes Youtube HTTP host to HTTPS",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "content_scripts": [
      {
     "matches": ["file:///*/*","http://*/*","https://*/*"],
     "js": ["jquery.js", "youtube_host.js"]
   }
    ]
  } 
```

这是我的 youtube_host.js

```
/*
* Part of the Youtube Host Change Project.
* Author : Ahmad Faiyaz
*/
function change_links(){
var nodes = document.getElementsByTagName("a");
    for(var i = 0; i < nodes.length; i++) {
        var link= nodes[i].href;
        link=link.replace("http://www.youtube","https://www.youtube");
        nodes[i].href=link;
 };
}

window.onload = change_links(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:00:16.467

我认为你需要写

```
...
link = link.replace("http://www.youtube","https://www.youtube");
... 
```

`string.replace`不会更改原始值，但会返回一个新的结果字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:06:27.103

添加后即可使用

```
"permissions":["<all_urls>"] 
```

`manifest.json`归档。

**最终 manifest.json 文件**

```
{
  "name": "Youtube Host Changer",
  "version" : "1.0",
  "manifest_version" : 2,
  "description" : "It changes Youtube HTTP host to HTTPS",
  "browser_action": {
    "default_icon": "icon.png"
  },
  "content_scripts": [
      {
     "matches": ["file:///*/*","http://*/*","https://*/*"],
     "js": ["jquery.js","youtube_host.js"]
   }
    ],
    "permissions":["<all_urls>"]
  } 
```

如果您需要更多信息，请与我们联系。

# java - Java RegEx 循环引用模式

> ID：13792289
> 
> 赞同：4
> 
> 时间：2012-12-09T21:59:09.810
> 
> 标签：java, regex

我想学习如何在 Java 中使用正则表达式并找到了以下任务：编写一个类来检查给定的输入字符串是否是基于 BNF 形式的这些标准的有效算术项：

```
term = [Vz]summand|[Vz]summand addOp term
summand = factor | factor mulOp summand
factor = number | '('term')'
number = digit | digit number
digit = '0'|'1'|...|'9'
vz = '+'|'-'
addOp = '+'|'-'
mulOp = '*'|'/' 
```

使用这些规则，我编写了一些模式，类似于不同的类型：

```
static Pattern vz = Pattern.compile("[+-]");
static Pattern addOp = Pattern.compile("[+-]");
static Pattern multOp = Pattern.compile("[*/]");
static Pattern digit= Pattern.compile("[0-9]");
static Pattern number = Pattern.compile(digit.pattern()+"+");
static Pattern factor = Pattern.compile(number.pattern()+"|("+term.pattern()+")");
static Pattern summand = Pattern.compile(factor.pattern()+"|"+factor.pattern()+ multOp.pattern()+"\n");
static Pattern term = Pattern.compile(vz.pattern()+"?"+summand.pattern()+"|"
        +vz.pattern()+"?"+summand.pattern()+addOp.pattern()+"\n"); 
```

你已经看到了我的问题：我在 factor 的定义中引用了术语，而没有先定义它。不幸的是，我无法以任何方式切换它。所以我的问题是：

是否有可能以这种方式引用模式？或者任何其他参考模式并在以后定义它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:06:06.140

问题是，BNF 定义了一种上下文无关文法（它描述的语言比正则表达式描述的更复杂）。您将不得不想出一种不同的方法，而不是直接将 BNF 规则用作正则表达式模式。

特别是，括号的正确嵌套是不规则的。一些正则表达式引擎支持允许匹配这些的（非常规）功能，但正则表达式通常变得非常长且不可维护。而且我现在不确定Java是否具有这些功能（例如PCRE和.NET）。

如果要解决手头的任务，则必须手动编写解析。如果您想学习正则表达式，您将不得不使用另一种语言或寻找不同的任务。然而，这里有一个[很好的资源来提高你的正则表达式技能](http://www.regular-expressions.info/tutorial.html)。

为了它的乐趣（并且向您展示为什么正则表达式不是正确的工具，即使引擎支持必要的功能），这里是对应于上述 BNF 的正则表达式（除了`Vz`规则，对于某些我无法让它工作的奇怪原因）：

```
^(((\d+|[(](?1)[)])|(?3)[*\/](?2))|(?2)[+-](?1))$ 
```

`(?n)`递归地尝试匹配子模式（通过`nth`从左到右打开括号来计算）。

它在 PHP 中不起作用，但我相信他们的 PCRE 实现在使用递归时存在一些回溯问题。一个在线 PCRE 测试仪似乎正确处理了一些示例输入。这里它处于自由间距模式 ( `x`) 并带有一些注释：

```
^
(                # term (?1)
  (              # summand (?2)
    (            # factor (?3)
      \d+        # number
    |
      [(](?1)[)] # (term)
    )            # end of factor
  |
    (?3)[*/](?2) # factor mulOp summand
  )              # end of summand
|
  (?2)[+-](?1)   # summand addOp term
)                # end of term
$ 
```

# google-maps-api-3 - 无法关闭信息窗口并显示街景

> ID：13792290
> 
> 赞同：0
> 
> 时间：2012-12-09T21:59:33.033
> 
> 标签：google-maps-api-3, infowindow, google-street-view

我正在尝试关闭一个显示街景的信息窗口。当我点击地图时，信息窗口没有关闭。此外，当我单击其他标记时，会打开一个信息窗口，但街景会在前一个信息窗口中打开。所以我需要关闭信息窗口并显示街景。这是代码：感谢您的帮助。

最好的祝福。

```
function paradascamiones() {
google.maps.event.addListener(map, 'click', function() {
infowindow.close();
});
var Boton = document.getElementById('Boton').value;
var textboxImei = document.getElementById('imei').value;
var textboxFecha = document.getElementById('fecha').value;
var textboxFechaFin = document.getElementById('fechaFin').value;
var textboxDesdeHora = document.getElementById('desdeHora').value;
var textboxHastaHora = document.getElementById('hastaHora').
downloadUrl("paradas.asp?imei="+textboxImei+"&fecha="+textboxFecha+" "+textboxDesdeHora+"&fechaFin="+textboxFechaFin+" "+textboxHastaHora, 
function(data) {
    var xml = xmlParse(data);
    var markersParadas = xml.documentElement.getElementsByTagName("marker");    
    var position = [];

    for (var i = 0; i < markersParadas.length; i++) {

    var lat = parseFloat(markersParadas[i].getAttribute("lat"));
    var lng = parseFloat(markersParadas[i].getAttribute("lng"));
    var myLatlngParadas = new google.maps.LatLng(lat, lng);

    var fechaInicio = markersParadas[i].getAttribute("fechaInicio");
    var fechaFinal = markersParadas[i].getAttribute("fechaFinal");
    var diferencia = markersParadas[i].getAttribute("diferencia");

    var datearray = diferencia.split("/"); 

    var newDate = datearray[1] + '/' + datearray[0] + '/' + datearray[2];
    var aFecha = new Date(newDate);
        var hours = aFecha.getHours();
        var minutes = aFecha.getMinutes();
        var seconds = aFecha.getSeconds();

    var markerParadas = createMarkerParadas(myLatlngParadas, hours, minutes, seconds, fechaInicio);
    myMarkersParadas.push(markerParadas);

  }//finish loop

}); //end download url

}

 function createMarkerParadas(myLatlngParadas, hours, minutes, seconds, fechaInicio) {

    var contentString = '<div id="content" style="width:350px;height:300px;"> </div>';
    var infoWindow = new google.maps.InfoWindow({
      content: contentString
   });
  var image2 = '/artworks/icons/stop.png';
  var markerParadas = new google.maps.Marker({
  position: myLatlngParadas,
  map: map,
  title: " my info ",
  icon: image2

});

    google.maps.event.addListener(markerParadas, "click", function () {

            infoWindow.open(map, markerParadas);

            var pano = null;
            google.maps.event.addListener(infoWindow, 'domready', function () {

                if (pano != null) {
                    pano.unbind("position");
                    pano.setVisible(false);
                }
                pano = new  google.maps.StreetViewPanorama(document.getElementById("content"), {
                    navigationControl: true,

                    enableCloseButton: false,
                    addressControl: true,
                    linksControl: false
                });
                pano.bindTo("position", markerParadas);
                pano.setVisible(true);
            });

            google.maps.event.addListener(infoWindow, 'closeclick', function () {
                pano.unbind("position");
                pano.setVisible(false);
                pano = null;
            });

    }); 

   return markerParadas;

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T03:33:27.037

在您的代码中，至少您应该更改将 infowindow 变量定义为全局范围的做法。

**你的代码**

```
function createMarkerParadas() {
    var infoWindow = new google.maps.InfoWindow({
      content : contentString
    });
    ...
} 
```

改成这样；

```
<script type="text/javascript">
    var map, infowindow;
    ...

    function createMarkerParadas() {
        infoWindow = new google.maps.InfoWindow({
          content : contentString
        });
        ....
    }
</script> 
```

# webserver - 在减少网络服务器查找 inode 编号的磁盘访问次数方面是否有任何优化？

> ID：13792301
> 
> 赞同：3
> 
> 时间：2012-12-09T22:00:19.063
> 
> 标签：webserver, inode, document-root

Web 服务器通常有一个文档根，表示通过 Web 可见的文件系统子树。[因此，例如，如果文档根目录是：/home/foouser/public_html/，那么网络服务器会将http://www.foo.com/pics/foo.jpg](http://www.foo.com/pics/foo.jpg)的请求映射 到 /home/foouser/ public_html/pics/foo.jpg。这会导致一系列磁盘请求以获取 foo.jpg 的 inode-number。

网络服务器是否进行任何优化以减少磁盘访问次数（或）是服务器管理员的角色将文档根设置为尽可能接近“/”，以减少磁盘访问次数文件名到 inode 号的翻译？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:29:57.983

我知道这不是您问题的直接答案，但是通过设置缓存策略，您可以大大减少磁盘读取。特别是如果您的静态内容未托管在您的服务器上。

选项：

*   在 CDN 上托管静态内容：
    *   优点：将所有负载卸载到其他人的网络上。成本？
    *   缺点：可能控制较少。成本？
*   使用 Contendo/Akamai，它也是一个 CDN，但有一些不同。
    *   优点：托管您的内容，但在第一次阅读后，cdn 将根据您随内容发送的标题（静态或非静态）处理缓存
    *   缺点：有时标题管理起来真的很烦人。当您想要替换旧内容时，缓存破坏（破坏您自己的缓存）可能会很烦人。
*   在本地缓存东西。例如，如果您正在发出数据库请求，您可以缓存该请求。下次运行您的代码时，首先检查您的内存缓存（而不是立即发出 db 请求）。您可以缓存整个页面，然后在应用程序控制器/路由级别检查是否存在页面/资产的缓存版本并提供服务。
    *   优点：控制力强。你几乎可以缓存任何东西。
    *   缺点：为每件小事设置缓存需要做大量工作。您需要为网站的每个部分制定策略。

我的建议是首先将您的资产转移到 AmazonS3 或 Rackspace 之类的。Joyent 也有这方面的东西。然后，您可以为 s3 启用 cloudfront，这将打开 cdn，它在各个区域缓存内容。这是一个非常便宜的解决方案（取决于您拥有的文件数量）。

你也可以走竞争路线。

应用程序端路由上的缓存需要相当多的工作，并且完全取决于您的服务器/语言/数据库/配置。

# c++ - 在Arduino中除以两个整数

> ID：13792302
> 
> 赞同：4
> 
> 时间：2012-12-09T22:00:22.457
> 
> 标签：c++, arduino

我正在尝试将两个整数值相除并存储为浮点数。

```
void setup()
{
    lcd.begin(16, 2);

    int l1 = 5;
    int l2 = 15;
    float test = 0;
    test = (float)l1 / (float)l2;

    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print(test);
} 
```

出于某种原因，我期望相当明显，我似乎无法存储和显示正确的值。“测试”变量始终设置为 0。

如何转换整数值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T18:29:43.950

它必须是您的 LCD 打印程序，因此您使用的模型是正确的。

我在 Arduino 上使用[串行打印](http://arduino.cc/en/Serial/Print)而不是 LCD 进行了尝试。以下完整代码示例的预期结果出现在串行监视器中（由菜单*Tools* -> *Serial Monitor启动）：*

```
Start...

5
15
0.33
0.33333334922790 
```

最后一个结果行确认它是一个具有 7-8 个有效数字的[4 字节浮点数。](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)

### 完整的代码示例

```
/********************************************************************************
 * Test out for Stack Overflow question "Divide two integers in Arduino",       *
 * <http://stackoverflow.com/questions/13792302/divide-two-integers-in-arduino> *
 *                                                                              *
 ********************************************************************************/

// The setup routine runs once when you press reset:
void setup() {
    // Initialize serial communication at 9600 bits per second:
    Serial.begin(9600);

    //The question part, modified for serial print instead of LCD.
    {
        int l1 = 5;
        int l2 = 15;
        float test = 0;
        test = (float)l1 / (float)l2;

        Serial.println("Start...");
        Serial.println("");
        Serial.println(l1);
        Serial.println(l2);
        Serial.println(test);
        Serial.println(test, 14);
    }

} //setup()

void loop()
{
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:05:17.710

`lcd.print`不知道如何打印 a `float`，因此您最终会打印整数。

# performance - 分析以下for循环的时间复杂度

> ID：13792304
> 
> 赞同：0
> 
> 时间：2012-12-09T22:00:37.993
> 
> 标签：performance, algorithm, runtime, sum, time-complexity

我需要帮助解决以下问题：

对于 i <- 5 到 m 做 P(i)

其中 P(i) 执行 (mi) 次，前提是 m >= 3

我意识到这是总和![在此处输入图像描述](../Images/d0e2c4b12d3224184df440f50dc7a4ec.png)

但我不确定如何从中计算运行时间。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:07:00.327

如果您将复杂性计算`P(i)`为常数，那么您只有循环`m - 5`时间 - 它会给您带来复杂性`O(m)`

# php - 想要使用 Facebook Connect 从我的网站发送通知

> ID：13792305
> 
> 赞同：0
> 
> 时间：2012-12-09T22:01:08.787
> 
> 标签：php, facebook

我想向通过 Facebook Connect 授权我的应用程序的用户发送通知。但无法发送。这里有问题：

**1，当我在自己的用户 ID 上运行此代码时，什么都没有出现，没有错误，也没有通知。**

**2，当我将此代码运行给授权我的应用程序的其他用户时，它会给出错误：**

```
[error] => Array
(     
[message] => (#606) You do not have permission to fetch notifications for this user
[type] => OAuthException
[code] => 606
) 
```

**这是我用来发送通知的代码：**

```
$url='http://www.thecreativeblink.com/'.base_url().'trees/'.$schoolfirstname[0]."-".$schoolcity;

$app_token_url = "https://graph.facebook.com/oauth/access_token?client_id=".FB_APP_ID."&client_secret=".FB_SECRET."&grant_type=client_credentials";

$response = file_get_contents($app_token_url);
$params = null;
parse_str($response, $params);
$access_token = $params['access_token'];

$this->facebook->api("/USER_ID/notifications?access_token=$access_token&href=$url&template=message"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:26:18.213

> [message] => (#606) 你没有权限**获取**这个用户的通知

那应该已经给你一个线索了……</p>

您需要发出 POST 请求以*发送*通知。

# lucene.net - 为什么缺少定义？Lucene.Net 3.0.3 - 快速矢量荧光笔

> ID：13792307
> 
> 赞同：2
> 
> 时间：2012-12-09T22:01:19.720
> 
> 标签：lucene.net, lucene-highlighter

作为 Lucene.Net/Lucene 和 C# 的新手，我能够输入几行代码并运行搜索。

现在我想取回找到的区域的片段。我找到了下面的代码，但 Visual Studio 一直告诉我 a）“Searcher 确实包含 getIndexReader 的定义”和 b）“ScoreDoc 不包含 doc 的定义”——我不明白问题所在！

有没有人可以提供帮助。

我在 Visual Studio 2010 Express 上使用 Lucene.Net 3.0.3 和 Lucene Contrib 3.0.3。

请参阅下面的代码。

谢谢你的帮助！

钢筋混凝土

* * *

```
IndexReader indexReader = IndexReader.Open(directory, true);
            Searcher indexSearch = new IndexSearcher(indexReader);

            var queryParser = new QueryParser(Version.LUCENE_30, "text", analyzer);
            var query = queryParser.Parse("\"system AKZ\"~10");

            Console.WriteLine("Searching for: " +  query);

            TopDocs hits = indexSearch.Search(query,500);
            /// Highlighter 

            FastVectorHighlighter fvHighlighter = new FastVectorHighlighter(true, true);
            for (int i = 0; i < hits.ScoreDocs.Length; i++)
                {
                    string bestfragment fvHighlighter.GetBestFragment(fvHighlighter.GetFieldQuery(query),indexSearch.getIndexReader(), hits.ScoreDocs[i].doc, "text", 20);
                    MessageBox.Show(bestfragment);
                }

            Console.WriteLine("Results Found: " + hits.TotalHits); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T12:48:59.647

这只是方法名称的问题。例如，它是 GetIndexReader()，而不是 getIndexReader()。您可能基于 Java 实现的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T16:22:29.623

在 Lucene.net 中，此方法的名称是 IndexReader。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T02:44:20.717

我会拿出像 ILSpy 这样的东西来检查实际可用的方法。

# jquery - 在网页上实现 WOW 滑块时如何解决 jQuery 冲突

> ID：13792312
> 
> 赞同：0
> 
> 时间：2012-12-09T22:01:37.263
> 
> 标签：jquery

我在http: [//integritywoodcrafts.c​​om/有一个网站](http://integritywoodcrafts.com/)

有一个 WOW Slider Style sheet`<link href="/slider/engine2/style.css" rel="stylesheet" type="text/css" />`和 WOW Slider 的存在`jQuery engine`。

我的站点有一个鼠标悬停菜单，只要 WOW 滑块样式表和 jQuery 引擎不存在，它就可以工作——查看站点中除主页之外的任何页面。

然而，在主页上，当 WOW 滑块样式表和 jQuery 引擎出现时，鼠标悬停菜单不起作用。

我已将问题缩小到导致鼠标悬停菜单无法正常工作的 jQuery 引擎。

有谁知道可能导致问题的原因以及我如何纠正它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:22:26.857

它几乎肯定是原型和 jQuery 冲突的。

要解决它，请使用 jQuery `noConfict()`( [docs](http://api.jquery.com/jQuery.noConflict/) )

[您的 wowslider 在这里](http://integritywoodcrafts.com/slider/engine2/script.js)被调用，并且它已经使用**jQuery**而不是**$**，因此只需将`$.noConflict();`您对其他库的引用和 jQuery 脚本引用放在后面即可解决问题，假设 wow 滑块是页面上唯一使用 jQuery 的东西

至于 z-index 问题，把它放在某个地方：

```
#nav                     {z-index: 100;}
#wowslider-container2    {z-index: 1;}
.ws-title                {z-index: 1;} 
```

![在此处输入图像描述](../Images/ccf01ed983b43ac53703d8bf483234a9.png)

应该工作 100%

# ios - 通过用户设置自定义 ui 本地通知

> ID：13792315
> 
> 赞同：0
> 
> 时间：2012-12-09T22:02:16.710
> 
> 标签：ios, uilocalnotification, appdelegate

我知道如何在 AppDelegate 的 applicationDidEnterBackground 函数中发出本地通知。

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
```

{

```
UILocalNotification * uln = [[UILocalNotification alloc] init];
uln.fireDate = [NSDate dateWithTimeIntervalSinceNow:10];
uln.timeZone = [NSTimeZone defaultTimeZone];

uln.alertBody = @"Did you forget something?";
uln.alertAction = @"Show me";
uln.soundName = UILocalNotificationDefaultSoundName;
//uln.applicationIconBadgeNumber = 0;
uln.repeatInterval = NSMinuteCalendarUnit;
application.scheduledLocalNotifications = [NSArray arrayWithObject:uln]; 
```

}

但是，用户是否可以为 fireDate 设置一个时间，并设置一个请勿打扰的时间，比如午夜晚些时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:06:09.793

是的，您可以将 firedate 属性设置为将来的任何日期。请勿打扰可以让用户在 iOS6 的设置中自行触发。

# ruby-on-rails - 将多输入虚拟属性移动到 SimpleForm 自定义输入组件

> ID：13792318
> 
> 赞同：13
> 
> 时间：2012-12-09T22:02:21.863
> 
> 标签：ruby-on-rails, simple-form

高度以英寸为单位存储在数据库中。

然而，英尺和英寸需要它们自己的单独输入，格式为：

```
Height: [_______] feet [_______] inches 
```

所以我使用了虚拟属性，并让它工作。这是我的模型的简化版本：

```
class Client < ActiveRecord::Base
  attr_accessible :name, :height_feet, :height_inches

  before_save :combine_height

    def height_feet
      height.floor/12 if height
    end

    def height_feet=(feet)
      @feet = feet
    end

    def height_inches
      if height && height%12 != 0
        height%12
      end
    end

    def height_inches=(inches) #on save?
      @inches = inches
    end

  def combine_height
    self.height = @feet.to_d*12 + @inches.to_d #if @feet.present?
  end

end 
```

`_form`部分使用 simple_form ：

```
<%= simple_form_for(@client) do |f| %>
  <ul>
    <%= f.error_notification %>
    <%= f.input :name %>
    <%= f.input :weight %>
    <li>
      <%= f.input :height_feet, :label => 'Height', :wrapper => false %>
      <span>feet</span>
      <%= f.input :height_inches, :label => false, :wrapper => false %>
      <span>inches</span>
    </li>
    <%= f.error :base %>
  </ul>
    <%= f.button :submit %>
<% end %> 
```

这行得通。不过这是不理想的。

我想把它干掉并创建一个[自定义输入组件](https://github.com/plataformatec/simple_form/wiki/Adding-custom-input-components)，这样我就可以为表单添加高度`<%= f.input :height, as: :feet_and_inch %>`- 因此任何其他遵循相同模式的输入，例如`<%= f.input :wingspan, as: :feet_and_inch %>`.

我已经尝试过自定义组件，但我无法显示两个输入 - 而且我不确定将“转换”逻辑从英尺和英寸转换为英寸（同样从英寸返回到英尺和英寸）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T18:05:36.093

据我所知，除了渲染到自定义输入之外，您不能真正移动任何东西。提交表单后，SimpleForm 不会被调用，因此它不会以任何方式真正干扰值。我很想错了，因为我过去也需要它。无论如何，这是一个将转换逻辑保留在模型中的版本。

自定义 SimpleForm 输入：

```
# app/inputs/feet_and_inch_input.rb
class FeetAndInchInput < SimpleForm::Inputs::Base
  def input
    output           = ""
    label            = @options.fetch(:label) { @attribute_name.to_s.capitalize }

    feet_attribute   = "#{attribute_name}_feet".to_sym
    inches_attribute = "#{attribute_name}_inches".to_sym

    output << @builder.input(feet_attribute, wrapper: false, label: label)
    output << template.content_tag(:span, " feet ")
    output << @builder.input(inches_attribute, wrapper: false, label: false)
    output << template.content_tag(:span, " inches ")

    output.html_safe
  end

  def label
    ""
  end
end 
```

表格。请注意，我没有将`<li>`标签放在自定义输入中，我认为这种方式更灵活，但可以随意更改。

```
# app/views/clients/_form.html.erb
<li>
  <%= f.input :height, as: :feet_and_inch %>
</li> 
```

所有这一切都依赖于这样一个事实，即对于每个`height`属性，您还拥有`height_feet`和`height_inches`属性。

现在对于模型，老实说，我不确定这是否是要走的路，也许有人可能会想出一个更好的解决方案，但它是这样的：

```
class Client < ActiveRecord::Base
  attr_accessible :name

  ["height", "weight"].each do |attribute|
    attr_accessible "#{attribute}_feet".to_sym
    attr_accessible "#{attribute}_inches".to_sym

    before_save do
      feet  = instance_variable_get("@#{attribute}_feet_ins_var").to_d
      inches = instance_variable_get("@#{attribute}_inches_ins_var").to_d

      self.send("#{attribute}=", feet*12 + inches)
    end

    define_method "#{attribute}_feet" do
      value = self.send(attribute)
      value.floor / 12 if value
    end

    define_method "#{attribute}_feet=" do |feet|
      instance_variable_set("@#{attribute}_feet_ins_var", feet)
    end

    define_method "#{attribute}_inches=" do |inches|
      instance_variable_set("@#{attribute}_inches_ins_var", inches)
    end

    define_method "#{attribute}_inches" do
      value = self.send(attribute)
      value % 12 if value && value % 12 != 0
    end
  end
end 
```

它基本上做同样的事情，但动态地定义了方法。您可以在顶部看到您希望为其生成这些方法的属性列表。

请注意，所有这些都没有经过彻底的测试，可能会杀死你的猫，但希望能给你一些想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T12:03:04.317

我的拙见是，如果用户只在一个字段中输入数据，您将提供更好的用户体验。以下是我的担忧：

假设您使用的是有限范围内的高度（可能是人类的高度），您可以编写一个验证来检测用户输入的内容 - 英寸或英尺。然后你可以做一个验证链接（或者更好的按钮）询问输入是否是它的意思（检测到英寸或英尺）。

所有这些（包括尺寸转换，只是英寸 -> 英尺）都可以在 javascript 中完成，您可以通过 Ajax 调用获取当前尺寸，避免重新加载页面的整个代码。

编辑：我发现了一个与复杂输入相关的[有趣观点。](http://ui-patterns.com/patterns/ForgivingFormat)另一个关于用户交互的[有用资源](https://ux.stackexchange.com/questions/10256/whats-the-best-and-most-intuitive-way-to-have-a-user-enter-a-height-value-in-fe)，用英尺和英寸填写表格。

你的问题真的很有趣，我很想看看你选择的解决方案。

# python - Python + Sqlite：无法确定提供的绑定数量不正确的原因错误

> ID：13792320
> 
> 赞同：1
> 
> 时间：2012-12-09T22:02:46.150
> 
> 标签：python, sqlite

我会直接进入它 - 我首先为自己创建了一个本地数据库：

```
import sqlite3

conn = sqlite3.connect("tofire.db") #

cursor = conn.cursor()

# create a table

cursor.execute("""CREATE TABLE incidents
                  (Id INTEGER PRIMARY KEY, prime_street text, cross_street text, dispatch_time text, 
                   incident_number text, incident_type text, alarm_level text, area text, dispatched_units text, date_added text)
               """) 
```

这很顺利——下一部分是我的函数，它使用漂亮的汤将一张桌子刮成一个列表。然后我尝试将每个子列表中的信息写入 sqlite 数据库。

```
# Toronto Fire Calls

import urllib2
import sqlite3
import time
import csv
import threading
from bs4 import BeautifulSoup

# Beautiful Soup imports the URL as html
def getincidents ():

    response = urllib2.urlopen('http://www.toronto.ca/fire/cadinfo/livecad.htm')

    html = response.read()

    # We give the html its own variable.

    soup = BeautifulSoup(html)

    # Find the table we want on the Toronto Fire Page

    table = soup.find("table", class_="info")

    # Find all the <td> tags in the table and assign them to variable.

    cols = table.find_all('td')

    # Find the length of rows, which is the number of <font> tags, and assign it to a variable num_cols.

    num_cols = len(cols)

    # Create an empty list to hold each of the <font> tags as an element

    colslist = []
    totalcols = 0
    # For each <font> in cols, append it to colslist as an element.

    for col in cols:
        colslist.append(col.string)
        totalcols = len(colslist)

    # Now colslist has every td as an element from [0] to totalcols = len(colslist)

    # The First 8 <font> entries are always the table headers i.e. Prime Street, Cross Street, etc.

    headers = colslist[0:8]

    # Prime Street
    # Cross Street
    # Dispatch Time
    # Incident Number
    # Incident Type
    # Alarm Level
    # Area
    # Dispatched Units

    # Get the indexes from 0 to the length of the original list, in steps of list_size, then create a sublist for each.
    # lists = [original_list[i:i+list_size] for i in xrange(0, len(original_list), list_size)]
    list_size = 8
    i = 0
    incidents = [colslist[i:i+list_size] for i in xrange(0, len(colslist), list_size)]

    # Works!

    num_inci = len(incidents) # Get the number of incidents
    added = time.strftime("%Y-%m-%d %H:%M")
    update = 'DB Updated @ ' + added

    # SQL TIME, Connect to our db.
    conn = sqlite3.connect("tofire.db")
    cursor = conn.cursor()
    lid = cursor.lastrowid

    # Now we put each incident into our database.

    for incident in incidents[1:num_inci]:
        incident.append(added)
        to_db = [(i[0:10]) for i in incident]
        import ipdb; ipdb.set_trace()
        cursor.executemany("INSERT INTO incidents (prime_street, cross_street, dispatch_time, incident_number, incident_type, alarm_level, area, dispatched_units, date_added) VALUES (?,?,?,?,?,?,?,?,?)", to_db)
    conn.commit()
    print update
    print "The last Id of the inserted row is %d" % lid
    threading.Timer(300, getincidents).start()

getincidents() 
```

我总是以错误消息“提供的绑定数量不正确”结束 - 它声称我在提供 10 时试图在我的声明中使用 9。我试图缩小造成这种情况的原因，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:56:20.770

正如 Ned Batchelder 最近所说，“调试的第一条规则：如有疑问，请打印更多内容。” 附加`added`到后`incident`，`incident`它本身有 9 个项目：

```
print(incident)
# [u'NORFINCH DR, NY', u'FINCH AVE W / HEPC', u'2012-12-09 17:32:57', u'F12118758', u'Medical - Other', u'0', u'142', u'\r\nP142, \r\n\r\n', '2012-12-09 17:46'] 
```

所以看起来你真正需要做的就是`incident`用作`cursor.execute`. 或者，如果您想摆脱像 之类的项目周围的一些空白`u'\r\nP142, \r\n\r\n'`，您可以使用

```
 to_db = [i.strip() for i in incident] 
```

* * *

```
for incident in incidents[1:num_inci]:
    incident.append(added)
    to_db = [i.strip() for i in incident]
    import ipdb; ipdb.set_trace()
    cursor.execute(
        """INSERT INTO incidents
           (prime_street, cross_street, dispatch_time, incident_number,
            incident_type, alarm_level, area, dispatched_units, date_added)
           VALUES (?,?,?,?,?,?,?,?,?)""", to_db)
    lid = cursor.lastrowid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:07:53.913

您正在为您定义为仅采用 9 个元素的插入语句提供 10 个元素

任何一个

```
to_db = [(i[0:9]) for i in incident]  #or
to_db = [(i[1:10]) for i in incident] 
```

会给你九个元素...匹配的数量？插入语句中的标记（以及您要填充的字段数）...

我假设这是你想要的

# asp.net - VS2012 ASP.NET 网站运行 System.Exception

> ID：13792322
> 
> 赞同：1
> 
> 时间：2012-12-09T22:03:00.630
> 
> 标签：asp.net, debugging, visual-studio-2012, visual-studio-debugging

我的 VS2012 Ultimate RC 有问题。

当我单击开始调试在 ASP.NET 4.5 Web 表单中构建的网站应用程序时，网站构建，没有错误，但我收到错误消息“System.Exception”页面不在浏览器中运行。

如果我单击 Ctrl+F5 (Debug=false)，我会在浏览器中看到该页面，并且它运行良好。

我得到的系统异常来自VS，我在网页上没有任何输出，我什至没有想到网页在浏览器中显示它不是来自代码！代码很棒，我猜它是 VS2012 中的一般错误

这是我得到的图片：![在此处输入图像描述](../Images/aae4e31014616457769640469e0b9097.png)

# objective-c - Xcode 静态分析器没有检测到泄漏？

> ID：13792324
> 
> 赞同：3
> 
> 时间：2012-12-09T22:03:21.487
> 
> 标签：objective-c, memory-management, memory-leaks, automatic-ref-counting

我整理了以下最小示例，其中 Xcode (4.5.2) 静态分析器显然没有检测到泄漏，以验证我对静态分析器所做的一些观察：

```
#import <Foundation/Foundation.h>

@interface Foo : NSObject {
    NSArray *array;
}
@property (nonatomic, retain) NSArray *array;
- (void)bar;
@end

@implementation Foo
@synthesize array;
- (void)bar
{
    // Shouldn't the static analyzer flag this as a leak?
    array = [[NSArray alloc] initWithObjects:@"hello", @"world", nil];
}
@end

int main(int argc, const char *argv[])
{
    @autoreleasepool {
        Foo *foo = [[Foo alloc] init];

        [foo bar];
        [foo bar];
        [foo bar];

        [foo release];
    }

    return 0;
} 
```

如果我没记错的话，`bar`重复调用会泄漏实例。当它的名字暗示它不会时创建一个具有 +1 保留计数的实例。先前分配给实例变量的实例被泄露，因为它从未被释放。`NSArray``bar``NSArray``array`

然而，真正让我担心的是，我在某处读到 ARC 基本上使用与静态分析器相同的算法。这是否意味着这段代码也会在 ARC 下泄漏？或者 ARC 是否默认将所有实例变量视为强变量，即使没有`__strong`限定符或相应的`(strong)`属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:22:59.227

**无弧：**

它没有检测到泄漏，因为数组是一个实例变量。因此将其分配给保留计数为 1 的对象不被视为泄漏，因为实例变量数组仍然可访问且有效。
即使您多次调用该方法，静态分析器也不够聪明，无法知道数组指向保留变量。
静态分析器只是帮助您了解对象何时在单个方法中泄漏。
但是尝试以这种方式更改方法：

```
- (void)bar
{
    // Shouldn't the static analyzer flag this as a leak?
    NSArray* array2 = [[NSArray alloc] initWithObjects:@"hello", @"world", nil];
} 
```

这将被静态分析器检测到。

**关于弧**

使用 ARC，此代码不会泄漏，因为当您说 array= 时，就像您：

1.  释放数组：
2.  保留新创建的对象；
3.  将其分配给实例变量。

所以如果可以的话，我建议转向 ARC。

# php - 将值从 Javascript 传递到脚本 PHP，并生成 JSON 到其他页面

> ID：13792325
> 
> 赞同：0
> 
> 时间：2012-12-09T22:03:28.420
> 
> 标签：php, javascript, json, cordova

我正在eclipse中做一个android应用程序（使用phonegap + json + php），我遇到了一些麻烦......我真的不知道如何......

*   我有一个生成 json 的 php 文件（**consulta.php**），它位于我的服务器中（**192.168.1.200/test/consulta.php**：

    ```
    header('content-type: application/json');

    mysql_connect("localhost","jhonatan","jsandoval");
    mysql_select_db("tesis");

    $array = array();

    $query = mysql_query("SELECT * FROM GRIFO");

    while($fila = mysql_fetch_object($query)){
        //echo $fila['id'] . " " . $fila['grifo'] . " " . $fila['distrito'] . "<br/>";
        $array[] = array('id'=>$fila->id,
                        'grifo'=>$fila->grifo,
                        'distrito'=>$fila->distrito,
                        'latitud'=>$fila->latitud,
                        'longitud'=>$fila->longitud);
    }

    echo json_encode($array); 
    ```

因此，在我的 index.html（来自 android 应用程序，eclipse 中的 phonegap）中，有一个表单，它有 2 个选择（HTML）。

```
<form id="combustibleForm" method="get">
        <select id="combustibleSelect" name="combustibleSelect" data-theme="a">
        <option value="gnv" >Gas Natural Vehicular</option>
        <option value="glp" >Gas Licuado de Petróleo</option>
        </select>

        <br/>

        <select id="distritoSelect" name="distritoSelect" data-theme="a">
        <option value="SJL" >San Juan de Lurigancho</option>
        <option value="Miraflores" >Miraflores</option>
        <option value="Chorrillos" >Chorrillos</option>
        <option value="Surquillo" >Surquillo</option>
        </select>

        <br/>

        <input type="submit" data-role="button" id="continuarBtn" value="Continuar.." />
</form> 
```

我必须将这些选择的值传递给上面的 php 文件并从那里生成一个 json：

```
// GET THE VALUE OF THE SELECTS ... I don't know if this is correct? :S
$tipo = $_GET['tipo'];
$distrito = $_GET['distrito'];
...
...
$query = mysql_query("SELECT * FROM GRIFO WHERE (tipo='$tipo' and distrito='$distrio')");
...
...
// Generate json
echo json_encode($array); 
```

这就是我要做的：在那之后......我有另一个html页面（**mapa.html**，在eclipse中），它从php（wtf！？）中获取json......如何做到这一点？:S ..

Also, when i Click the submit form (in **index.html**), must redirect to mapa.html , to get the json....

I really don't know and don't have any ideas to do this big problem...

Can someone please help me?...

**Sorry for bad english**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:16:13.400

You could pass the json as an url_encoded string appended to the url or a hidden field. if you need to communicate beteween pages, have the generating page echo the json into a hidden field. You could also do ajax or curl request for the json

Something like (in index.html)

```
<?php $data = url_encode(json_encode($array)) ?>
    <form action="mapa.html?data=<?php echo $data?>" method="get">
    ...
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:19:25.660

Your form element in the HTML has no action attribute. This is where the browser will send the request when the user clicks on submit. So, if you want to send the request to your PHP script you will need you need to set that in the `action` attribute of your form.

*Assuming consulta.php is located in the same directory as that of your HTML page...*

```
<form id="combustibleForm" method="get" action="consulta.php">
        <select id="combustibleSelect" name="combustibleSelect" data-theme="a">
        <option value="gnv" >Gas Natural Vehicular</option>
        <option value="glp" >Gas Licuado de Petróleo</option>
        </select>

        <br/>

        <select id="distritoSelect" name="distritoSelect" data-theme="a">
        <option value="SJL" >San Juan de Lurigancho</option>
        <option value="Miraflores" >Miraflores</option>
        <option value="Chorrillos" >Chorrillos</option>
        <option value="Surquillo" >Surquillo</option>
        </select>

        <br/>

        <input type="submit" data-role="button" id="continuarBtn" value="Continuar.." />
</form> 
```

Now, when this form is submitted the request will be directed to your PHP script, which will generate the JSON.

As for getting the values sent by the form in your PHP you need to use the `name` attributes you defined for those `SELECT` elements.

In your case that is `combustibleSelect` and `distritoSelect`.

```
$_GET['combustibleSelect']; // This will be the value of the 1st SELECT box
$_GET['distritoSelect'];    // This will be the value of the 2nd SELECT box 
```

Please do not use the old ext/mysql API to interface with your database as it has been deprecated and may be removed in future versions of PHP. Consider using the newer [PDO or MySQLi APIs](http://php.net/manual/en/mysqlinfo.api.choosing.php) instead to interface with your MySQL databse in PHP.

As for getting the data into javascript, you want to use [ajax to make an XHR request](http://api.jquery.com/category/ajax/) to your PHP script. This will allow you to populate whatever you want to populate in the DOM of your HTML with javascript, by asking javascript to go out and make a request to your PHP script in the background and then hand you back the JSON to do with as you please without the user ever having to leave the page.

# sql - 将表连接到另一个表上的子查询，然后对结果进行排序

> ID：13792327
> 
> 赞同：1
> 
> 时间：2012-12-09T22:04:26.310
> 
> 标签：sql, database, postgresql, join

我是新来的，对于我整天都在努力解决的问题，我将不胜感激。

考虑这两个表：

```
 albums (pkey: id)    years (pkey: album_id, year)

         id   genre_id       album_id  year
         ---  --------       --------  ---- 
         450      1           450      2000
         451      1           450      2001
         452      1           450      2002
         453      2           451      2005
         454      3           451      2012
                              452      1998 
```

这可能看起来很奇怪，但请假设一张专辑可以与多年相关联。

我想选择流派 1 中的所有专辑，按每张专辑的最新年份排序。（假设可以按年份排序）。

所以，我想要这个结果：

```
 id    year
-----  ----
 451   2012
 450   2002
 452   1998 
```

这就是我在...

显然，我需要在订购结果之前加入表格：

```
SELECT      id, year
FROM        albums INNER JOIN years ON albums.id = years.album_id
WHERE       genre_id = 1
ORDER BY    year; 
```

这将为流派 1 中的每张专辑选择每年的记录，而不是为流派 1 中的每张专辑选择最新的年份记录。

不知何故，我需要像这样合并一个子查询，以将加入专辑表的年份限制为该专辑的*最新年份*，然后再次排序：

```
SELECT year FROM years WHERE album_id = ??? ORDER BY year DESC LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:13:07.633

```
SELECT   album_id, max(year) latest
FROM albums INNER JOIN years ON id = album_id
WHERE genre_id = 1
GROUP BY album_id
ORDER BY latest DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:08:00.700

这应该很简单：

```
SELECT album_id, MAX(year) 
  FROM years
 GROUP BY album_id
 ORDER BY MAX(year) DESC; 
```

聚合功能`max()`允许您选择最近的一年。由于您使用的是聚合函数，因此您还需要一个`group by`子句。

如果您只需要某种类型的专辑，只需添加`join`声明即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:11:40.033

你可能想要的是

```
select
a.id,
( 
   select max(b.year) from years b where a.id = b.album_id
) as year
from 
albums a
where genre_id = 1
order by year 
```

# javascript - 如何通过 JSON 传递函数名并在 javascript/jQuery 中调用它？

> ID：13792329
> 
> 赞同：5
> 
> 时间：2012-12-09T22:05:14.600
> 
> 标签：javascript, jquery, function, parameters, triggers

我有一个 JSON 字符串，其中包含我需要调用的函数。

我的 JSON 看起来像这样：

```
{  
    "type":"listview",
    // the function I would like to call
    "content":"dynoData.getRetailers()",
    "custom_classes":["","nMT pickList","",""],
    "lib":"static_listview.html",
    "tmp":"tmp_listview_inset",
    "lang":"locale_search",
    ... 
```

我正在使用它在客户端上组装一个 jQuery Mobile 列表视图。要获取动态数据，我需要调用`dynoData.getRetailers()`.

但是我正在努力打电话:-)

这就是我正在尝试的：

```
var dyn = $.parseJSON( passed_JSON_string ),
    content = dyn.content; 
```

我曾希望调用它会触发该函数，但它只是将函数名称作为字符串返回。

**问题**：
如何才能触发实际功能？

谢谢！

**编辑**：
我将 JSON 字符串放在实际页面上的 HTML 元素上，我将用我正在构建的元素替换它。这是HTML：

```
<ul data-template="true" data-config='{  
    "type":"listview",
    "content":"dynoData.getRetailers()",
    "custom_classes":["","nMT pickList","",""],
    "lib":"static_listview.html",
    "tmp":"tmp_listview_inset",
    "lang":"locale_search",
    "theme":"c",
    "filter":"true"
    }'></ul> 
```

我可以将所有这些都放入`data-`属性中，但这会很混乱......

**解决方案**：这有效：

1) 将 JSON 更改为：

```
..."method":"getRetailers", ... 
```

2）从Javascript调用：

```
content = dynoData[ dyn.method ](); 
```

感谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:18:11.587

假设函数始终是`dyn`对象的一部分，您可以使用如下符号来调用函数：

```
dyn['dynoData']['getRetailers'](); 
```

因此，如果您能够调整 json，您可以发回如下内容：

```
"content":{ "mainObject": "dynoData" , "method" :"getRetailers"} 
```

并使用变量将其转换为您的动态函数：

```
 dyn[content.mainObject][content.method](); 
```

作为使用 jQuery 的示例，请尝试使用以下内容：

```
$('div')['hide'](); 
```

这与以下内容相同：

```
$('div').hide() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:28:34.170

正如 charlietfl 指出的那样，您可以使用对象表示法来调用函数。对于您的情况，您必须摆脱`()`并拆分它，然后这样称呼它；

```
jQuery(function($) {
    var temp = $('ul').data('config').content.replace(/\(\)/g, '').split('.');
    window[temp[0]][temp[1]]();
}); 
```

但是，这可以解决您的问题，如果您考虑未来，则必须对其进行一些扩展。这样即使你不知道深度，你也可以调用它；

```
jQuery(function($) {
    var temp = $('ul').data('config').content.replace(/\(\)/g, '').split('.'), func, i, il = temp.length;
    for(i = 0; i < il; i++) {
        if(func == null) {
            func = window[temp[i]];
            continue;
        }
        func = func[temp[i]];
    }
    func();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T23:14:18.547

试试 ConversationJS。它使动态调用非常容易，并且是解耦代码库的好方法：[https ://github.com/rhyneandrew/Conversation.JS](https://github.com/rhyneandrew/Conversation.JS)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T22:23:03.100

JSON 是纯粹的传递数据符号，因此很容易读取和解析，因此它没有函数的概念。但是，还有其他方法可以解决这个问题，如果您开始认为这是解决困境的唯一方法，那么请退后一步并检查您的设计。而不是使用这个：

```
eval(yourCode); 
```

尝试这个

```
var tempFun = new Function(yourCode);
tempFun(); 
```

# javascript - 如何以全高和可变宽度居中图像

> ID：13792335
> 
> 赞同：1
> 
> 时间：2012-12-09T22:05:36.180
> 
> 标签：javascript, html, css, windows-8, winjs

我试图在屏幕（也是任意宽度/高度）时全屏显示图像（任意宽度/高度）。我正在使用 HTML/CSS/JS。我希望图像始终占据全屏。如果图像的纵横比低于屏幕，那么我应该剪辑顶部和底部。如果图像的纵横比比屏幕高，那么我应该剪裁左右。我从不想在边缘看到黑色。我可以使用背景图像（和背景位置等）来做到这一点，但我有一个问题（图像在我更新时闪烁）。所以我想使用一个标签。有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:12:09.190

如果您使用 jQuery，请查看以下内容：http: [//vegas.jaysalvat.com/](http://vegas.jaysalvat.com/)

或更轻量级： [http ://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:18:09.647

我认为这个问题很好很清楚，显然 OP 没有任何代码......这就是他问这个问题的原因。

我以前遇到过这个确切的问题。如果您希望图像最终大于包含多余部分的包含元素，我认为没有办法使用 HTML/CSS 来实现，除非您可以将图像放在背景中。如果您需要按照您的说明使用标签，那么一个好的解决方案是强制执行此操作。这就是我所做的。

```
function setImagePosition() {
    var img = q(".viewCamera #viewport img");
    if (outerWidth/outerHeight > img.naturalWidth/img.naturalHeight) {
        img.style.width = format("{0}px", outerWidth);
        img.style.height = "";
        img.style.top = format("{0}px", (outerHeight - img.clientHeight) / 2);
        img.style.left = "0px";
    } else {
        img.style.width = "";
        img.style.height = format("{0}px", outerHeight);
        img.style.top = "0px";
        img.style.left = format("{0}px", (outerWidth - img.clientWidth) / 2);
    }
} 
```

让我解释...

结果`outerWidth/outerHeight`是窗口的纵横比。`img.naturalWidth/img.naturalHeight`是图像的纵横比。如果第一个更大，那么我们需要将图像的宽度设置为窗口的宽度并计算该`top`值以使图像垂直居中。如果第二个更大，那么我们需要设置图像的高度，然后使用 将`left`图像水平居中。

希望有帮助！[您可以在我位于 codeshow.codeplex.com 的codeSHOW项目和位于](http://aka.ms/codeshowapp)[aka.ms/codeshowapp](http://codeshow.codeplex.com)的 Windows Store 中找到一堆与 Windows 8 HTML/JS 相关的帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-09T22:10:35.073

如果你想让它拉伸使用背景大小，或者如果它必须是一个标签，使用 max-width:100%; 为了居中使用 display:block; 和保证金：0自动；

我不太确定你在追求什么……

如何更新图像使其闪烁？什么时候发生？这听起来像是背景位置的工作：中心。

# vb.net - 在 vb.net 中再次运行相同的线程

> ID：13792338
> 
> 赞同：1
> 
> 时间：2012-12-09T22:06:03.663
> 
> 标签：vb.net, multithreading

你好朋友我正在开发一些在 vb.net 中制作的会计应用程序。所以我正在从我的应用程序发出网络请求，但它阻止了我的应用程序，直到它从网络得到响应，所以我决定使用线程。但我需要多次发出网络请求，所以当我再次启动线程时，它只会让我的应用程序没有响应并关闭。我也尝试在整个互联网上搜索，但没有与我的解决方案相匹配。我也尝试过thread.suspend()、thread.abort()、thread.resume()、.....我的代码示例。

```
Dim MyThread As System.Threading.Thread

Private Sub CheckBoxX1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBoxX1.CheckedChanged

  If CheckBoxX1.Checked = True Then
        Try
            MyThread = New System.Threading.Thread(AddressOf sendsms)
            MyThread.Start()
        Catch ex As Exception
        msgbox(ex.message)
        End Try
   End If
End Sub

Private Sub sendsms()

    Dim settings As New Form5

    password = New System.Text.ASCIIEncoding().GetString(Convert.FromBase64String(password))

    Dim smsapi As String = Nothing

    smsapi = ini.GetString("Setting_SMS", "api", smsapi)

    settings.sendSMS(TextBoxX17.Text, msg, provider, username, password, smsapi)

    MyThread.Suspend()

End Sub 
```

当它第二次尝试时，它会使我的应用程序崩溃。我的示例代码如下所示，请有人帮帮我。

```
Public Class Form2
    Private Sub ButtonX4_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonX4.Click
        Dim ch As New System.Threading.Thread(AddressOf sendsms)
        ch.IsBackground = True
        ch.Start()
    End Sub

    Private Sub sendsms()
        msg = msg.Replace("{name}", TextBoxX18.Text)
        msg = msg.Replace("{totalprice}", TextBoxX4.Text)
        msg = msg.Replace("{id}", TextBoxX21.Text)
        msg = msg.Replace("{vehicalnum}", TextBoxX15.Text)
        password = New System.Text.ASCIIEncoding().GetString(Convert.FromBase64String(password))
        Dim smsapi As String = Nothing
        smsapi = ini.GetString("Setting_SMS", "api", smsapi)
        Dim settings As New sendsms
        settings.sendSMS(TextBoxX17.Text, msg, provider, username, password, smsapi)
    End Sub

End Class

Public Class sendsms
    Function sendSMS(ByVal numbers As String, ByVal msg As String, ByVal provider As String, ByVal username As String, ByVal password As String, ByVal api As String)
        Try
            If api = "" Then
                api = "http://ultimatesmsapi.tk/sms.php?provider=provider1&username=username1&password=password1&numbers=numbers1&msg=msg1"
            End If

            api = api.Replace("username1", username)
            api = api.Replace("password1", password)
            api = api.Replace("msg1", msg)
            api = api.Replace("numbers1", numbers)
            api = api.Replace("provider1", provider)
            Dim myReq As HttpWebRequest
            myReq = DirectCast(WebRequest.Create(api), HttpWebRequest)
            Dim myResp As HttpWebResponse = DirectCast(myReq.GetResponse(), HttpWebResponse)
            Dim respStreamReader As New System.IO.StreamReader(myResp.GetResponseStream())
            Dim responseString As String = respStreamReader.ReadToEnd()
            If responseString = 1 Then
                msg = "SMS sent successfully.."
            ElseIf responseString = -1 Then
                msg = "Username and password is incorrect"
            ElseIf responseString = -2 Then
                msg = "Some fields are missing!"
            ElseIf responseString = -3 Then
                msg = "Error while sending sms!"
            ElseIf responseString = -4 Then
                msg = "Invalid Provider!"
            ElseIf responseString = -5 Then
                msg = "Number is DND activated!"
            End If
            respStreamReader.Close()
            myResp.Close()
        Catch ex As Exception
            msg = "Problem in connection to server.."
        End Try
        MsgBox(msg)
        Return msg
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:18:54.047

这是您可以无限期地继续创建新线程的方法：

```
Do
    Dim MyThread As New System.Threading.Thread(AddressOf sendsms)
    MyThread.Start()
Loop 
```

请注意，如果不受控制，此循环将很快耗尽内存，并且您的应用程序可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T06:56:41.010

您将需要重新设计它。首先在 checkbox.checkchanged 上发送短信是个坏主意，用户可能会在完成之前多次选中和取消选中，提交按钮或类似按钮会更好。

接下来从线程访问 ui 元素是一个坏主意，Form5 类对我来说当然听起来像一个 ui 元素，还有 TextBoxX17。

如果没有看到你的代码的其余部分，它实际上不可能给出一个具体的答案，但我建议创建一个类来发送短信，这会启动一项任务。如果您需要对此任务的反馈，请提出一个事件并在您的主表单上订阅它。

# linux - 对于 Amazon Web Services 上的共享存储，最推荐的解决方案是什么？

> ID：13792342
> 
> 赞同：1
> 
> 时间：2012-12-09T22:06:15.733
> 
> 标签：linux, amazon-web-services

我即将在 AWS 基础设施上部署一个类似 nfs 的共享存储，大约 10-15 台 Linux 服务器将访问该共享存储。我可以检查的是 AWS 没有提供这样的解决方案（至少我知道我们不能在超过 1 个服务器上插入 ebs），我只是尝试使用一些 s3-fs 但我没有信任任何可用的解决方案，因为它们似乎都太不稳定了。你们一直在使用什么可以提供一些性能并同时提供安全性？

欢迎所有建议，我将不胜感激。

谢谢！

# c# - 指南针通常向我显示北方。但我想从中展示另一种方式（？）

> ID：13792346
> 
> 赞同：2
> 
> 时间：2012-12-09T22:06:40.157
> 
> 标签：c#, windows-phone-7, compass-geolocation

我正在为我的 windows phone 7 制作一个带有 c# 的应用程序。我想使用指南针向我展示朝拜方向（或我想要的方向）。我怎样才能做到？我可以用 lang 和 latitute 从我的位置计算朝拜方向的度数。（例如结果是北方以东 150 度）

但是，我无法为其绘制方向线。它显示的是北方，而不是我想要的方式。所以现在我使用这个代码来画线：

```
magneticLine.X2 = magneticLine.X1 - (200 * Math.Sin(MathHelper.ToRadians((float)compassReading.MagneticHeading)));

magneticLine.Y2 = magneticLine.Y1 - (200 * Math.Cos(MathHelper.ToRadians((float)compassReading.MagneticHeading))); 
```

你能帮我看看我怎么做这个吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:03:20.983

您当前构建它的方式只是使用屏幕的中心作为原点，然后渲染一条长度始终为 200 像素的线。您需要在画线之前调整/篡改度数读数（这就是为什么它没有为您指向正确的方向）。

此外，一旦您有您认为正确的东西，请使用 Windows Phone 模拟器在麦加的 Kaaba 周围绘制 GPS 点（即在 Kaaba 周围画一个点，然后运行模拟）。这将允许您查看您的解决方案是否适用于 360* 半径范围内的个人。

此外，这个增强现实工具包可以帮助您，因为它在根据您的 GPS 位置计算方向时为您做一些数学运算：http: [//gart.codeplex.com/](http://gart.codeplex.com/)

我希望这有帮助。如果您在阅读完上述内容后仍然卡住，我可以为您编写代码，以便您更好地理解。

最后，确定范围： http: [//www.jeffblankenburg.com/2011/11/04/31-days-of-mango-day-4-compass/](http://www.jeffblankenburg.com/2011/11/04/31-days-of-mango-day-4-compass/)

这是一个关于如何使用工作源代码制作指南针的教程，可在文章底部下载。祝你好运！

# c++ - write()-ing 数据，包括 C++ 中的 '\0'

> ID：13792347
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:06:42.390
> 
> 标签：c++, sockets

我正在尝试将 char 数组写入 C++ 中的套接字。但是，我希望写入的数据是原始图像数据，因此包含 '\0'，它表示字符串的终止。无论如何要发送所有数据，包括'\ 0'？

更新：问题在于使用`strlen()`，而不是`write()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:14:31.853

send() 函数不关心空字节。它发送您告诉它发送的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:14:16.867

两者都[`send()`](http://linux.die.net/man/2/send)取[`write()`](http://linux.die.net/man/2/write)一个`void*`缓冲区和要写入的字节数。因此，在 API 级别不会出现 NUL 终止符的问题。

就应用程序代码而言，不要使用 C 字符串来表示二进制数据，就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:14:06.670

将空字符写入 TCP 字符串是没有问题的。

我个人听说没有任何 TCP API 会将其视为任何事物的终止。通常，您指定缓冲区和长度，其他一切都无关紧要。

# xamarin.ios - 如何在 UICollectionViewController 中提供 GetSizeForItem 实现？

> ID：13792350
> 
> 赞同：7
> 
> 时间：2012-12-09T22:07:18.063
> 
> 标签：xamarin.ios, uicollectionview, xamarin

[UICollectionViewDelegateFlowLayout](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDelegateFlowLayout_protocol/Reference/Reference.html)有一个名为[sizeForItem](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionViewDelegateFlowLayout_protocol/Reference/Reference.html)的方法（ MonoTouch 中的[GetSizeForItem](http://iosapi.xamarin.com/index.aspx?link=M:MonoTouch.UIKit.UICollectionViewDelegateFlowLayout.GetSizeForItem%28MonoTouch.UIKit.UICollectionView,MonoTouch.UIKit.UICollectionViewLayout,MonoTouch.Foundation.NSIndexPath%29)）。

但我没有明确提供委托——而是从 UICollectionViewController 继承。
它混合了数据源和委托功能，但没有此方法可以覆盖。

我尝试将其添加到我的控制器中：

```
[Export ("collectionView:layout:sizeForItemAtIndexPath:")]
public virtual SizeF GetSizeForItem (UICollectionView collectionView, UICollectionViewLayout layout, NSIndexPath indexPath)
{
    return new SizeF (100, 100);
} 
```

它从未被调用过。

我如何提供这种方法而不诉诸分离委托和数据源？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T12:13:55.687

你不能。在 Obj-C 中，视图控制器（或任何类）对象可以采用委托协议。这在 Monotouch 中是不可能的。你给了使用委托实例。但这可以是私人课程

```
public class CustomCollectionViewController:UICollectionViewController
{
    public CustomCollectionViewController():base()
    {

        this.CollectionView.Delegate = new CustomViewDelegate();

    }

    class CustomViewDelegate: UICollectionViewDelegateFlowLayout
    {

        public override System.Drawing.SizeF GetSizeForItem (UICollectionView collectionView, UICollectionViewLayout layout, NSIndexPath indexPath)
        {
            return new System.Drawing.SizeF (100, 100);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-14T11:26:25.097

编辑：无需创建委托子类，将其添加到您的 UICollectionviewSource

```
/** Other methods such as GetItemsCount(), GetCell()... goes here **/

[Export ("collectionView:layout:sizeForItemAtIndexPath:"), CompilerGenerated]
public virtual CGSize GetSizeForItem (UICollectionView collectionView, UICollectionViewLayout layout, NSIndexPath indexPath)
{
    return new CGSize (width, height);
} 
```

# java - 带有 void 方法的 if 语句

> ID：13792351
> 
> 赞同：0
> 
> 时间：2012-12-09T22:07:19.360
> 
> 标签：java, if-statement, types

是否可以制作一个布尔 if 语句，也就是说`if (a method that has a void data type) = true { then do the following`？

还是该方法也需要是布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:12:47.853

if 表达式必须具有布尔类型。如果只是调用，则需要调用返回布尔值的方法。如果你要比较 true，通常是浪费时间，你还需要一个布尔表达式。

你想测试什么？如果您只想确定它是否正常完成，您可以使用：

```
try{
  method call
  code to execute if it does not throw an exception
} catch(ExceptionYouExpectItToThrow e) {
  code to execute if it does throw the exception
} 
```

如果您尝试测试有关方法执行的其他内容，则需要指定要测试的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:14:00.017

在 JS 中，一个不返回任何值的函数将`undefined`是一个假值，即它等价于`false`：

```
function foo() {
    }

    if (foo()) {
    console.log("TRUE:" + foo());
    }
        else {
        console.log("FALSE:" + foo()); // outputs: FALSE: undefined
        } 
```

​显然测试这样一个函数的值是多余的

# javascript - 在没有 ajax 调用的情况下，这个体育自动收报机上的分数如何自行更新？

> ID：13792353
> 
> 赞同：7
> 
> 时间：2012-12-09T22:07:35.137
> 
> 标签：javascript, ajax, javascript-events

[我之前在http://www.cbssports.com/nfl/scoreboard](http://www.cbssports.com/nfl/scoreboard)上查看分数，在检查代码后，我不太清楚他们是如何更新分数的。

我没有看到任何 ajax 调用，并且游戏似乎没有被包装到 iframe 等中。

谁能向我解释这是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:37:23.653

似乎他们正在使用 Flash 代码来更新分数。我在浏览器中禁用了 Flash 并收到以下消息：

![现场计分通知](../Images/b609150d0ea980fd580e07c6695371c5.png)

但是，如果你想在不使用插件的情况下实现类似的东西，你可以在 Javascript中使用[Websockets 。](http://en.wikipedia.org/wiki/WebSocket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:55:42.610

查看`scoreboard`文件的第 1884 行。该`storePlayers`函数会将该大字符串格式化为在股票行情中使用的标记集。

# html - 做一个透明的 对鼠标事件不透明

> ID：13792359
> 
> 赞同：2
> 
> 时间：2012-12-09T22:08:15.240
> 
> 标签：html, click, transparent

我想我前段时间问过相反的问题（允许鼠标事件通过图像上的透明区域 - 我最终为此使用了图像映射）但无论如何：

当对话框出现时，我需要一个掩码元素。过去我用过：

```
position:fixed;
left:0;top:0;right:0;bottom:0;
background:#000000;
opacity:0;
filter:alpha(opacity=0); 
```

它有效，但它有点像“黑客”。

我无法获得`background:transparent`用于拦截鼠标事件的元素。这是故意的吗？除了上述之外，还有什么办法可以解决吗？或者上面是这个问题的最佳解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:12:34.130

问题`background:transparent`似乎特定于 IE（在 IE7/8/9 中测试）。这在其他浏览器中不是问题。

它也特定于 HTML 表单元素。例如，它在 IE 中适用于段落标签内的文本，但不适用于按钮标签。这很可能是 IE 中的渲染错误，而不是 Microsoft 深思熟虑的工程决策的结果。在 IE6 中曾经存在过类似的问题，选择框与`position:absolute`.

在这种情况下使用它会更安全`opacity`。如果您更改蒙版以使其部分透明而不是完全透明，`background:transparent`则可能感觉不像是黑客攻击。`opacity`

# asp.net - 单击按钮后 ASP.NET 发布文本框

> ID：13792361
> 
> 赞同：0
> 
> 时间：2012-12-09T22:08:20.577
> 
> 标签：asp.net

所以我只是使用 ASP.NET atm

Iv 从工具箱 TextBox1、TextBox2、TextBox3、TextBox 4 和一个按钮“button1”中添加了 4 个文本框

我希望用户在文本框中输入数据，按 .length 比较它们并按顺序生成输出。

所以在订购它们之前，我只是想按文本框 1、文本框 2、文本框 3 的顺序显示它们。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        DatesInOrderTextBox.Text = "Dates in order are" + TextBox1 + ", " + TextBox2 + ", " + TextBox3; 
```

## }

之后我打算做类似以下的事情

```
 //date 1 is biggest
        if (date1.Length > date2.Length && date1.Length > date3.Length)
        {
            //date 2 is 2nd & date 3 is 3rd
            if (date2.Length > date3.Length)
            {
                FirstDateOrder = date1;
                SecondDateOrder = date2;
                ThirdDateOrder = date3;

              System.Windows.Forms.MessageBox.Show("Order is 1, 2, 3");

             //   System.Windows.Forms.MessageBox.Show("Order is:" + FirstDateOrder + ", " + SecondDateOrder + ", " + ThirdDateOrder);

                ViewBag.DateOrder = "Order is 1,2,3";

                return RedirectToAction("Index");
            }

            //date 3 is 2nd & date 2 is 3rd
            else
            {
                FirstDateOrder = date1;
                SecondDateOrder = date3;
                ThirdDateOrder = date2;

                System.Windows.Forms.MessageBox.Show("Order is 1, 3, 2");

                return RedirectToAction("Index");
            } 
```

## }

虽然当我单击按钮时 textbox4 正在显示

```
Dates in order areSystem.Web.UI.WebControls.TextBox, System.Web.UI.WebControls.TextBox, System.Web.UI.WebControls.TextBox 
```

可能是一些简单的事情，只是不知道如何解决它......谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:12:35.890

显示文本框值时缺少 .Text 。应该是 TextBox1.Text...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:14:32.187

`TextBox1`是一个控件，因此当您打印它时，它会显示该控件的类型。

如果您想要该控件中的文本，请使用`TextBox1.Text`.

# c - 分叉及其功能？

> ID：13792363
> 
> 赞同：2
> 
> 时间：2012-12-09T22:08:37.753
> 
> 标签：c, fork

我有以下代码，并被问到将打印多少次“A”、“B”、“C”、“D”、“E”

```
fun() {
  printf("A");
  fork();
  printf("B");
  if (fork() != 0) {
     printf("C");
     fork();
     printf("D");
  }
  printf("E");
} 
```

所以应该是：

```
A
A 
B
E 
```

我不确定我上面的回答是否正确？这条线`if(fork() !=0 )`做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T22:12:03.780

从[文档](http://linux.die.net/man/2/fork)中：

> 成功时，父进程返回子进程的PID，子进程返回0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T22:19:53.020

1 线程打印 a，2 线程打印 b。2 个 fork 中的每一个，但只有 2 个父级进入 if 语句并打印 c。这两个 fork 中的每一个和所有 4 个 proc 都打印 d。然后，6 个进程中的每一个（来自 if-fork 的两个子进程和来自 if print e 的 4 个线程。

您无法确定顺序，但每个字母的数量为：

一个 x1

乙×2

c x2

d x4

e x6

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T22:17:21.823

该行`if (fork() != 0) { ... }`正在检查以确保当前进程不是原始分叉进程的子进程。只有父进程会执行此块中的代码。

这是有效的，因为`fork()`在父进程中返回 PID，在子进程中返回 0，错误时返回 -1。

# testing - Testlink 1.9.4 和 Bugzilla 4.2.3 集成

> ID：13792364
> 
> 赞同：2
> 
> 时间：2012-12-09T22:08:46.533
> 
> 标签：testing, bugzilla, testlink

我已经在 Windows 机器上的 Apache 服务器中成功安装了 TestLink 1.9.4 和 Bugzilla 4.2.3。我发现为了将 TestLink 1.9.4 版与任何错误跟踪器连接起来，您不再需要使用该`.cfg`文件，因此可以使用“问题跟踪器管理”。

但是 TestLink 文档没有帮助，它包含旧版本的详细信息。

您如何将 TestLink 1.9.4 与 Bugzilla 集成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:27:50.787

安装*TestLink 1.9.4*并首次运行后，它会要求您创建一个测试项目。在该页面上，您被邀请关联一个问题跟踪器集成，但没有一个可供选择。

忽略它并继续创建您的测试项目。创建后，在主 TestLink 页面上查找“问题跟踪管理”选项。创建一个新的并选择 Bugzilla( Interface:xmlrpc) - 这是我认为最容易设置的一个。按照配置示例并保存。

然后再次进入主页面，选择“测试项目管理”。编辑您之前创建的测试项目，现在您将有一个问题跟踪器集成分配给项目（您是 Bugzilla xmlrpc 接口）。

设置应该到此结束，但不幸的是，TestLink 1.9.4 在 Bugzilla xmlrpc 接口集成上有一个错误，使您无法使用它。要纠正此错误，请按照[此处](https://stackoverflow.com/questions/13396750/testlink-1-9-4-buzzilla-interface-xmlrpc)的说明操作，一切都会好起来的。我现在使用它一个多月了。

# javascript - 将内容从多个文本框复制到剪贴板

> ID：13792374
> 
> 赞同：0
> 
> 时间：2012-12-09T22:10:36.513
> 
> 标签：javascript, html, copy-paste

我希望使用 HTML/JS 将内容从多个文本框复制到一个文本区域或直接复制到剪贴板。

例如 Text1 = 123 Text2 = 456 Text3 = 789 我需要将其输出为

123

456

789

没有空格 - 到目前为止我有

```
 function Copy1() {
 if(window.clipboardData) {
 window.clipboardData.clearData();
 window.clipboardData.setData("Text", document.getElementById('Text3').value); 
```

这可以复制 1 个文本框，但我需要复制多个文本框并换行内容这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:31:22.047

试试怎么样

```
function Copy1() {
     if(window.clipboardData) {
         window.clipboardData.clearData();
         window.clipboardData.setData("Text", document.getElementById('Text1').value+'\n'+
                                              document.getElementById('Text2').value+'\n'+
                                              document.getElementById('Text3').value);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T14:16:38.193

```
<script type="text/javascript">
    function kopyala() {
        //Ekrandaki text vb. alanların tümü uygun formatta kopyala değişkenine atılır.
        var kopyala = "";
        kopyala = document.getElementById('metin-alani').value + '\n' +
            document.getElementById('text-alani').value + '\n' +
            document.getElementById('text2-alani').value;

        //Clipboard için kopyala değişkenindeki veriler gizli-alana atılıyor.
        document.getElementById('gizli-alan').value = "";
        document.getElementById('gizli-alan').value = kopyala;                    

        console.log(kopyala ? 'Panoya Atıldı' : 'Panoya Atılamadı');
        console.log(kopyala);

        try {
            //Gizli alandaki veriler clipboarda atılıyor.
            //document.getElementById('gizli-alan').select();
            document.getElementById('gizli-alan').select();
            document.execCommand('copy');       

        } catch (err) {
            console.log(err);

        }

    }

</script> 
```

```
<textarea id="metin-alani" cols="30" rows="10"></textarea>
<br />
<input type="text" id="text-alani" />
<br />
<input type="text" id="text2-alani" />
<br />
<button onclick="kopyala()">Panoya Kopyala</button>

<textarea id="gizli-alan" style="width:1px;height:1px" /> 
```

# html - 如何使 XHTML Basic 1.1 忽略 data-original 属性？

> ID：13792376
> 
> 赞同：0
> 
> 时间：2012-12-09T22:11:14.447
> 
> 标签：html, xhtml

我有一个带有lazyLoading 图像的网站，它使用HTML5 特有的属性data-original。它在手机上运行良好，但验证器错误认为它无效。那么如何使数据原始在 XHTML Basic 1.1 中有效或使其被忽略或进行其他工作呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:22:24.500

XHTML Basic 1.1 定义了一种正式的语法。使该语法无效的属性的唯一方法是更改​​语法。这不会发生，因为没有人在研究 XHTML Basic，所以您甚至无法提出更改建议；制定规范的 XHTML2 工作组[于 2010 年关闭](http://www.w3.org/MarkUp/)。

# iphone - iOS 编译、警告和格式字符串

> ID：13792377
> 
> 赞同：1
> 
> 时间：2012-12-09T22:11:27.290
> 
> 标签：iphone, xcode, ipad, warnings, string-formatting

我在 Xcode 4 下，并使用激进的警告来识别代码中的潜在问题。该代码具有 C、C++ 和 Objective C 元素。有效的警告标志是：

`-Wall -Wextra -Wconversion -Wstrict-overflow -Wformat=2 -Wformat-security -Woverloaded-virtual -Wreorder -Wsign-promo -Wnon-virtual-dtor -Wstrict-selector-match -Wundeclared-selector -Wno-unused-parameter`

我从谷歌图书馆里得到了一些噪音。警告是“格式字符串不是字符串文字”。例如在包含 streamType 的语句中：

```
NSString *streamTypeTemplate = @"multipart/related; boundary=\"%@\"";
NSString *streamType = [NSString stringWithFormat:streamTypeTemplate,
  partBoundary]; 
```

有没有人有任何想法来消除这个警告。我把它踢给了谷歌，但他们没有修复它。我不想取消警告，因为我可能会在此过程中失去真正的警告。

我认为我的解决方案是在本地修复它。例如：

```
NSString *streamType = [NSString stringWithFormat:
  @"multipart/related; boundary=\"%@\"",
  partBoundary]; 
```

但我会欢迎不需要我复制/粘贴格式字符串和删除语句的东西。此外，Google 存储库是一个外部存储库，如果他们稍后接触代码，可能会使合并变得复杂。

就其价值而言，“干净编译”是一道安全门。我**不想**教开发人员可以取消警告，因为我们不想处理它们。它树立了一个可怕的先例，并以反例为先。

杰夫

# delphi - 使用的 DCPcrypt 加密和哈希算法

> ID：13792380
> 
> 赞同：6
> 
> 时间：2012-12-09T22:11:44.343
> 
> 标签：delphi, encryption, hash, cryptography

我正在使用 Delphi 2007 中的 DCPcrypt 库为内部应用程序加密文本。

我目前正在使用以下代码（不是我的实际密钥）：

```
 Cipher := TDCP_rijndael.Create(nil);
  try
    Cipher.InitStr('5t@ck0v3rf10w', TDCP_md5);
    Result := Cipher.EncryptString('Test string');
  finally
    Cipher.Burn;
    Cipher.Free;
  end; 
```

InitStr 的注释是：

> 根据密钥字符串的哈希进行密钥设置

将 MD5 算法换成 SHA2-256 或 SHA2-512 是否会对加密强度产生任何理论或实际差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T06:56:14.943

您的问题的直接答案是“不”——它不会对加密强度产生任何明显的影响。是的，MD5 被破坏了，但实际上它的弱点在这个特定的应用程序中没有任何区别。AES 的密钥大小为 128、192 和 256 位。您在这里所做的只是为密钥创建一个字符串假名（可以是 16 字节、24 字节或 32 字节）。当密码学专家说散列函数被[破坏时](http://cryptocrats.com/crypto/md5-the-hash-algorithm-is-now-broken/)，他们的意思是，给定一个已知的散列输出，计算与原始消息不同的消息是可行的，原始消息也散列到相同的输出。换句话说，为了使散列函数的加密强度或弱点具有任何意义，二进制密钥必须已经为恶意方所知，这意味着它仅在您的安全性已经完全失败时才相关。

散列算法的强度与非对称密码的强度完全无关。

## 然而...

但是，更严重的问题是您的代码中没有加盐。除非您打算手动加盐（不太可能），否则您的通信很容易受到重放攻击。如果您使用 ECB 模式，这将变得更糟，但如果不加盐，这对于任何模式都是一个主要的安全问题。“加盐”意味着在加密之前在 IV 或消息的头部注入足够大的不可预测的非重复值。

这凸显了 DCPCrypt 的一个巨大问题。大多数 DCPcrypt 用户对密码学的了解不足，无法理解正确加盐的重要性，并且会以您所拥有的方式使用密码组件。当您以这种方式使用 DCPcrypt（这很自然）时，DCPcrypt 不会**加盐**。事实上，它将 IV 设置为零。而且情况变得更糟...如果您选择了一种密钥流类型的链接模式（非常流行），并且您的 IV 习惯性为零，那么如果已知或猜到一条纯文本消息，您的安全性将完全被破坏, (**或者甚至只是消息的一部分被猜到**）。DCPcrypt 确实提供了另一种方法来初始化二进制密钥（不是从字符串），同时允许用户设置 IV（您必须自己生成一个随机 IV）。下一个问题是整个 IV 管理变得有点复杂。

## 披露

我是[TurboPower LockBox 3](http://lockbox.seanbdurkin.id.au/tiki-index.php)的作者。Dave Barton 的 DCPcrypt 是一部令人钦佩的综合性工程作品，是我编写 LockBox 3 的灵感之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T02:26:57.500

您应该指定加密的攻击类型；假设使用[已知明文攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)，并且入侵者使用预先计算的哈希值来查找密钥字符串 - 那么所使用的哈希算法之间应该没有区别，任何哈希算法都需要几乎相同的时间来查找密钥字符串。

# matlab - 使用数组中的多列的 Matlab 向量化

> ID：13792383
> 
> 赞同：2
> 
> 时间：2012-12-09T22:12:14.573
> 
> 标签：matlab, vectorization

我正在尝试对一些需要来自数组的两个相邻成员的输入的 Matlab 代码进行矢量化。本质上：

```
x=1:10;
for i=1:9
    y(i) = x(i)+x(i+1);
end 
```

有没有办法对这段代码进行矢量化，这样我就不需要使用 for 循环了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:16:02.680

我理解对吗？这是你需要的吗？

```
y = x(1:n-1) + x(2:n); 
```

?

# mysql - 一种组织 MySQL 数据库信息的实用方法？

> ID：13792385
> 
> 赞同：2
> 
> 时间：2012-12-09T22:12:36.917
> 
> 标签：mysql

我想知道最好的方法是什么：

1.  个人提交评论（姓名、电子邮件、虚拟主机、域名托管、排名数据 [五个数字因素] 等）

2.  PHP 将该评论插入到“SubmittedReviews”表中

3.  然后我在后端监督提交的评论，然后提交我想要的评论

4\. PHP 将该信息插入另一个名为“LiveReviews”的表（与“SubmittedReviews”具有相同的表结构）

（或者，最好让 PHP 为每个主机创建一个表，其中包含该主机的评论，因为会有很多主机，我将制作一个单独的表来预先计算我的“顶部”的排名数据主机”表）

因此，当我让 PHP 实时提交评论（为每个主机创建一个新表或只是在“LiveReviews”表中）时，我还将排名数据提交到另一个表中，将每个主机的所有排名数据相加，所以它很容易获得，所以我知道哪些主机排名最高。

或者当我想知道哪个主机排名最好时，我应该只使用PHP来计算现场的LiveReviews排名数据吗？由于首页会经常加载这些数据，似乎每次都计算它并不好。我宁愿事先计算好。

因此，如果我有这个“排名数据”表，那么似乎我应该为每个主机提供包含所有评论的表。否则，似乎只有一张大表（LiveReviews）更好。

希望这是有道理的！

什么是最好的方法？我对 MySQL 很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:38:25.707

我必须承认，我不完全了解您要达到的目标。您的用户究竟应该审查什么？

但是我确实有两条建议：永远不要通过将东西放在不同的桌子上来组织东西。在关系数据库的世界里，这是异端邪说！而且您的查询将变得非常复杂。并考虑在数据库中进行计算，而不是在 PHP 中。

学习数据库建模是个好主意。实体关系图并不难，但非常有用。

祝你好运。

# php - 剪切字符串 (UTF-8) (PHP)

> ID：13792386
> 
> 赞同：0
> 
> 时间：2012-12-09T22:12:39.773
> 
> 标签：php

如何在 UTF 8 中剪切字符串。

我从网上搜索了这个功能：

```
function cutString($str, $lenght = 100, $end = '&nbsp;&hellip;', $charset = 'UTF-8', $token = '~') {
    $str = strip_tags($str);
    if (mb_strlen($str, $charset) >= $lenght) {
        $wrap = wordwrap($str, $lenght, $token);
        $str_cut = mb_substr($wrap, 0, mb_strpos($wrap, $token, 0, $charset), $charset);   
        return $str_cut .= $end;
    } else {
        return $str;
    }
} 
```

但是这个函数的结果不是太好。因为如果我们设置剪切 200 个字母，它将返回大约 110 个，但我需要大约 200 个。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-09T22:28:40.613

我认为 wordwrap() 函数在这种情况下做错了手动剪切字符串。我使用这样的函数（只需将 'mb_' 和 $charset 添加到字符串函数）：

```
function str_cut_end_by_word($s, $max_len, $trailer = "...")
{
  if (strlen($s) <= $max_len)
    return $s;

  $s = trim($s);
  $s = substr($s, 0, $max_len);

  for ($i = strlen($s) - 1; $i >= 0; $i--)
  {
    if (in_array($s{$i}, array(" ", "\t", "\r", "\n")))
    {
      return rtrim(substr($s, 0, $i)).$trailer;
    }
  }

  return $s;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T22:21:59.257

我刚刚测试过它，它工作正常。如果你运行它

```
echo cutString($mystring, 200); 
```

它从我给它的字符串中返回 201 个字符。

# regex - 如何使用重写规则将 `.php` 替换为 `/`

> ID：13792390
> 
> 赞同：1
> 
> 时间：2012-12-09T22:13:07.600
> 
> 标签：regex, .htaccess, mod-rewrite

如何使用重写规则替换`.php`wth`/`

例如：

`search.php?k=background` 至 `search/?k=background`

到目前为止，我所拥有的是：

```
RewriteRule ^search/?k=([a-zA-Z0-9_-]+)$ search.php/?k=$1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:57:03.707

这是另一种选择：

```
RewriteEngine On
RewriteBase / 
#Rule applies only when the script is search.php
RewriteCond %{REQUEST_URI} ^.*search\.php.*$
#Query will be automatically appended to search/
RewriteRule .* http://mydomain.com/search/ [L] 
```

将重定向：

`http://mydomain.com/search.php?k=background`至

`http://mydomain.com/search/?k=background`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:24:25.470

尝试这个：

```
RewriteRule ^(.*)\.php(.*)$ $1/$2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T03:08:51.293

您需要从重写规则中删除查询字符串，该规则会自动附加：

```
RewriteRule ^search/?$ search.php [L] 
```

# git - 如何通过 http 启用对 git 存储库的匿名读取访问（拉取）但经过身份验证的写入访问（推送）？

> ID：13792391
> 
> 赞同：7
> 
> 时间：2012-12-09T22:13:07.440
> 
> 标签：git, apache, version-control

我想通过“智能” **HTTP**提供 git 存储库，只有我可以推送到该存储库，但任何人（或任何有帐户的人）都可以从中克隆/获取。

在[git-http-backend(1)](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)手册页中，可以找到以下 Apache Web 服务器的示例配置：

> 确保 mod_cgi、mod_alias 和 mod_env 已启用，适当设置 GIT_PROJECT_ROOT（或 DocumentRoot），并为 CGI 创建一个 ScriptAlias：
> 
> ```
> SetEnv GIT_PROJECT_ROOT /var/www/git
> SetEnv GIT_HTTP_EXPORT_ALL
> ScriptAlias /git/ /usr/libexec/git-core/git-http-backend/ 
> ```
> 
> 要启用匿名读取访问但经过身份验证的写入访问，需要使用 LocationMatch 指令进行授权：
> 
> ```
> <LocationMatch "^/git/.*/git-receive-pack$">
>         AuthType Basic
>         AuthName "Git Access"
>         Require group committers
>         #...
> </LocationMatch> 
> ```

不幸的是，这种配置不起作用。我可以毫无问题地获取/克隆存储库，无需身份验证，但推送失败：

```
$ git push origin master
error: Cannot access URL http://localhost/git/test.git/, return code 22
fatal: git-http-push failed 
```

检查`error.log`Apache Web 服务器没有帮助：

```
[...]服务未启用：'receive-pack'
[...] 不支持请求：'/var/www/git/test.git/'

```

`access.log`告诉我们，`git push`首先在基于查询的 URL 上使用 GET 方法`/git/test.git/info/refs?service=git-receive-pack`，LocationMatch 指令未涵盖该方法：

```
[...] "GET /git/test.git/info/refs?service=git-receive-pack HTTP/1.1" 403 304 "-" "git/1.7.10.4"
[...] "GET /git/test.git/info/refs HTTP/1.1" 200 267 "-" "git/1.7.10.4"
[...] "GET /git/test.git/HEAD HTTP/1.1" 200 337 "-" "git/1.7.10.4"
[...]“PROPFIND /git/test.git/HTTP/1.1”404 250“-”“git/1.7.10.4”

```

（以下几行是关于回退到基于“哑”WebDAV 的 HTTP 推送 - 是否可以禁用此回退？）。

* * *

[现在我使用以下解决方法：我需要有效的用户进行获取和推送（使用git-http-backend(1)](http://www.kernel.org/pub/software/scm/git/docs/git-http-backend.html)手册页中“读写身份验证”示例中的修改配置），并通过以下方式将推送限制为单个用户通过检查环境变量`pre-receive` [挂钩。](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)`REMOTE_USER`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:08:53.317

一种不那么复杂的替代方法是在 Apache-git 设置之外使用[**gitolite**](https://stackoverflow.com/questions/10888300/gitosis-vs-gitolite/10888358#10888358)。
您可以轻松地将 gitolite 插入 Apache（无需 ssh 配置）。

参见示例：[httpd.conf](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L95-L132)，结合本地[gitolite 安装脚本](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh)。

然后，您可以轻松地为写入访问和`@all`读取访问声明 Apache 登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-22T17:34:24.977

您必须`.git/config`使用以下值更新您的 repo 文件：

```
[http]
    receivepack = true 
```

# javascript - 在Javascript中将小数添加到数字将其乘以十

> ID：13792392
> 
> 赞同：0
> 
> 时间：2012-12-09T22:13:14.103
> 
> 标签：javascript, math, floor

我在 javascript 中添加数字时遇到问题。我有一个跟踪完整数字的变量（currentfloatx）和一个跟踪该数字的下限版本的变量（newintx）。我正在尝试将 0.25 添加到 currentfloatx，但由于某种原因，它将数字乘以 10。有谁知道它为什么这样做？关于javascript如何处理我丢失的这些数字有什么问题吗？谢谢。

```
//currentfloatx is currently set to 6
alert(currentfloatx + .25);   //returns 60.25
alert(currentfloatx);         //returns 6
newintx = Math.floor(currentfloatx + .25);
alert(newintx);           //returns 60.25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:23:44.490

我能想到的唯一方法是如果`currfloatx`持有一个字符串（例如，“6”）。这将`currfloatx + .25`相当于`"6" + "0.25"`, 或`"60.25"`。

# html - 提交按钮是否仅适用于页面上的表单或所有表单？

> ID：13792394
> 
> 赞同：0
> 
> 时间：2012-12-09T22:13:16.963
> 
> 标签：html, forms, submit, form-submit

我计划在一个页面上设置多个表单，并想确保这没问题。提交按钮是否只作用于它们所在的表单，或者它们是否适用于页面上的所有表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:35:20.313

提交按钮提交表单。似乎规范没有明确说明这意味着封闭`form`元素，可能是因为这被认为是不言而喻的。这当然是浏览器所做的。

HTML5 草案通过引入“<a href="http://www.w3.org/TR/html5/association-of-controls-and-forms.html" rel="nofollow"> 的概念使这一点更加清晰字段的表单所有者”（例如提交按钮）。默认情况下，表单所有者是封闭`form`元素，尽管`form`字段的建议属性可能会改变这一点。提交按钮被定义为提交表单所有者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:35:40.920

据我所知（我很确定），提交按钮/输入默认情况下只会作用于它的父表单。[您可以在W3 规范](http://www.w3.org/TR/html401/interact/forms.html#buttons)中阅读有关表单的更多信息。

因此，如果您只是想知道在您的页面中是否可以使用多个表单，那么可以。

# mysql - #1067 - 'membership' 的默认值无效

> ID：13792397
> 
> 赞同：4
> 
> 时间：2012-12-09T22:13:39.493
> 
> 标签：mysql, mysql-error-1067

我正在使用我的程序中包含的 SQL 文件，一旦我解决了一个问题，我可以在这里找到答案（谢谢）。我再次运行它并收到以下错误：

**SQL查询：**

```
# Create table structure for 'member' table
CREATE TABLE member(

memberID INT( 11 ) NOT NULL AUTO_INCREMENT ,  
title VARCHAR( 80 ) NOT NULL DEFAULT  '',  
firstname VARCHAR( 80 ) NOT NULL DEFAULT  '',  
lastname VARCHAR( 80 ) NOT NULL DEFAULT  '',  
email VARCHAR( 80 ) NOT NULL DEFAULT  '',  
address VARCHAR( 80 ) NOT NULL DEFAULT  '',  
suburb VARCHAR( 80 ) NOT NULL DEFAULT  '',  
state VARCHAR( 80 ) NOT NULL DEFAULT  '',  
country VARCHAR( 80 ) NOT NULL DEFAULT  '',  
postcode VARCHAR( 11 ) NOT NULL DEFAULT  '',  
mobile VARCHAR( 80 ) NOT NULL DEFAULT  '',  
phone VARCHAR( 80 ) NOT NULL DEFAULT  '',  
fax VARCHAR( 80 ) NOT NULL DEFAULT  '',  
membership INT( 2 ) NOT NULL DEFAULT  '',  
payment INT( 2 ) NOT NULL DEFAULT  '',  
startdate BIGINT( 14 ) NOT NULL DEFAULT 0,  
enddate BIGINT( 14 ) NOT NULL DEFAULT 0,  
userID INT( 11 ) NOT NULL ,  
PRIMARY KEY ( memberID ) ,  
UNIQUE (  
memberID  
)  
) ENGINE = MYISAM ; 
```

**MySQL 说：**

```
#1067 - Invalid default value for 'membership' 
```

我需要改变什么才能完成这项工作？这是一个较旧的脚本，但我不够了解 MySQL 5.5 版本需要更改的内容。

非常感谢你的帮助！

而且我确定在我修复这个之后还会出现其他错误..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T22:37:04.653

成员资格列是一个 int，但您给它一个默认字符串值 ''。所以改变

```
 membership INT( 2 ) NOT NULL DEFAULT '', 
```

至

```
 membership INT( 2 ) NOT NULL DEFAULT 0, 
```

（0 或您想要该字段的任何默认值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-07T02:09:33.260

我得到：

```
Incorrect integer value: '' for column 'column_name' at row 1 
```

我已经修复了它的编辑`/etc/mysql/my.cnf`或`/etc/mysql/mysql.conf.d/mysqld.cnf`文件。然后找到以下行：

```
sql-mode="STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION" 
```

并将其替换为

```
sql-mode="" 
```

并重新启动 MySQL：`service mysql restart`

# javascript - 解析jQuery元素的函数包含括号

> ID：13792399
> 
> 赞同：1
> 
> 时间：2012-12-09T22:13:44.653
> 
> 标签：javascript, nested, brackets

我有这个文字

```
( ) ( ( ) ( ( ) ) ( ( ) ) ) 
```

实际上每个括号都是一个跨度，我编写了这段代码来组织嵌套结构：

```
myobj.each(function(i) { 

    var isOpen = $( this ).text( ) == '(' ? true: false;

    if( isOpen ) {
        console.log( ' open at: ' + index  )
        index++;
        closer = index;
    } else {
       closer--;
       console.log( 'close at: ' + ( closer ) );
    }

}); 
```

假设 expeted 输出为：

```
0 0 1 2 2 3 4 4 3 5 6 6 5 1
( ) ( ( ) ( ( ) ) ( ( ) ) ) 
```

它给了我：

```
0 0 1 2 2 3 4 4 3 5 6 6 5 4
( ) ( ( ) ( ( ) ) ( ( ) ) ) 
```

注意最后一个括号.. 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:44:27.533

将未关闭（刚刚打开）括号的索引存储在一个数组中，然后[`pop`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop)在关闭时用于获取最后一个未关闭的索引。

```
var index = -1, unclosed = [], log = [];
myobj.each(function() {
    if ($(this).text() === '(') {
        index++;
        console.log('Open at: ' + index);
        unclosed.push(index);
        log.push(index);
    } else {
        var closer = unclosed.pop();
        console.log('Closed at: ' + closer);
        log.push(closer);
    }
});
console.log(log); //[0, 0, 1, 2, 2, 3, 4, 4, 3, 5, 6, 6, 5, 1] 
```

[**小提琴**](http://jsfiddle.net/C2GkL/2/)

以上`log`只是为了展示最终结果，这3行+声明可以稍后删除。

# database - 获取约束字段的有效输入

> ID：13792401
> 
> 赞同：1
> 
> 时间：2012-12-09T22:14:01.733
> 
> 标签：database, perl, informix

我有一个 Informix 数据库，我真的很希望有一个“枚举”字段。由于 Informix（至少在我受限的版本中）没有内置枚举类型，因此我使用了一些 Google-Foo 来发现我可以将 VARCHAR 字段限制为仅允许某些值，如下所示：

```
ALTER TABLE table ADD CONSTRAINT CHECK (type IN ('type1',  'type2', 'type3')); 
```

这似乎运作良好。现在我需要从一个 Perl 脚本连接到数据库，该脚本根据这些有效值检查用户输入。我当然可以在代码中检查它们并确保我的代码知道数据库需要的值是什么，但我想知道是否有任何方法可以让我的脚本查询数据库上的约束，因此如果我需要添加/删除稍后的有效输入我可以更改约束并且处理代码会适应。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:41:09.463

如果您将数据库访问封装在[DBIx::Class](https://metacpan.org/module/DBIx%3a%3aClass)模式中，您将获得这种“作为奖励”的验证。从预先存在的数据库生成模式的一种简单方法是通过 [dbicdump](https://metacpan.org/module/dbicdump)。

# java - 如何编写一个计算数字因数的 Java 程序？

> ID：13792404
> 
> 赞同：-3
> 
> 时间：2012-12-09T22:14:11.427
> 
> 标签：java, factorization

我需要帮助想出一个公式来找到一个数字的因素：

> 编写一个名为 printFactors 的方法，它接受一个整数作为其参数，并使用一个 fencepost 循环打印该数字的因数，用单词“和”分隔。例如，数字 24 的因数应打印为：
> 
> ```
> 1 and 2 and 3 and 4 and 6 and 8 and 12 and 24 
> ```
> 
> 您可以假设 number 参数的值大于 0。

请不要给我一个完整的程序，因为我想自己尝试一下。

我当前的代码有一个 for 循环来控制出现的“和”的数量，但是，我自己打印了最后一个数字，因为我不想要一个“24 和”附加到它......所以输出看起来目前是这样的：“1 and 2 and 3”（我还没有想出等式，因此是 1,2,3 ...）

我目前认为这些因素需要一种 % 的公式，对吗？我需要分工吗？我还考虑打印出 1 以及您要寻找因子的任何数字（在本例中为 24），因为 1 和数字本身始终是其自身的因子。我还缺少什么？

提前致谢！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:26:33.573

> 我目前认为这些因素需要一种 % 的公式，对吗？

是的。

> 我还考虑打印出 1 以及您要查找因子的任何数字（在本例中为 24），因为 1 和数字本身始终是其自身的因子。

如果您测试从 1 到 n（例如从 1 到 24）的每个数字，那么 1 和数字本身不需要是特殊情况（因为它们只会满足您普通的“% 种公式”）。

也许 1 是一个特例，因为它前面没有“and”这个词。

> 我还缺少什么？

这可能比您想要的更复杂，但要找到 n 的所有因数，您只需循环到 n 的平方根。

# sql - 如何将存储过程中的多个输出抓取到临时表中

> ID：13792412
> 
> 赞同：5
> 
> 时间：2012-12-09T22:14:36.450
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的存储过程返回两个输出。我想在另一个存储过程中使用其中一个。所以试图在临时表中获取第二个输出。但由于两个输出的结构不同，因此我总是得到“列名或提供的值的数量与表定义不匹配”。

即使我改变了输出的顺序（第一个输出第二个，第二个输出第一个），它也不起作用。

我正在建立一个全新的应用程序，我需要再次使用存储过程并在另一个存储过程中再次使用。如果我遇到这种情况，可能我需要重写很多代码。

有一个非常好的问题，但这仅涵盖一个输出。

[将存储过程的结果插入临时表](https://stackoverflow.com/questions/653714/how-to-select-into-temp-table-from-stored-procedure)

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T00:21:00.570

你不能，不能不修改存储过程。

在 SQL Server 中，您只能将存储过程的第一个结果集插入到另一个表中，通过`INSERT...EXEC`. 列数和位置必须完全匹配，`INSERT...EXEC`不能嵌套，即不能从proc1 插入proc2 的表，再从proc2 插入proc3 的表。`INSERT...EXEC`一个完全不令人满意的解决方案也是如此。

解决方法是修改过程以将结果插入到调用范围中定义的临时表中，例如：

```
create proc get_some_data as
insert #temp1 (col1, col2) select col1, col2 from table1
insert #temp2 (colA, colB) select colA, colB from table2
go
create table #temp1 (col1 int, col2 int)
create table #temp2 (colA int, colB int)
exec get_some_data
select * from #temp1
select * from #temp2
drop table #temp1
drop table #temp2
go 
```

如果不能修改程序，~~你不走运。~~ **更正**：正如 HABO 所指出的，您*可以*使用 CLR 来迭代结果集。有关详细信息，请参阅下面的链接。如果您知道自己在做什么，并且别无选择，那还不错。

有关在存储过程之间共享数据的更多详细信息，请参阅 Erland Sommarskog 的这篇非常全面的文章：http: [//www.sommarskog.se/share_data.html](http://www.sommarskog.se/share_data.html)

# c++ - enable_if 可以用作非额外参数（例如构造函数）吗？

> ID：13792413
> 
> 赞同：1
> 
> 时间：2012-12-09T22:14:38.973
> 
> 标签：c++, stl, template-meta-programming

我正在编写一个新容器，并试图遵守`N3485 23.2.3 [sequence.reqmts]/14`，其中指出：

> 对于本条和第 21 条中定义的每个序列容器：
> 
> *   如果构造函数
>     
>     
>     
>     ```
>     template <class InputIterator>
>     X(InputIterator first, InputIterator last, 
>          const allocator_type& alloc = allocator_type()) 
>     ```
>     
>     
>     
>     使用不符合输入迭代器条件的类型调用`InputIterator`，则构造函数不应参与重载决议。

（`/14`对于采用迭代器范围的成员函数几乎逐字重复）

`N3485 23.2.3 [sequence.reqmts]/15`说：

> 未指定实现确定类型不能作为输入迭代器的程度，但至少整数类型不应作为输入迭代器。

我的理解是“不应参与重载决议”这句话意味着容器实现者应该在模板参数推导期间使用 SFINAE 技巧来禁用该构​​造函数或成员函数。对于成员函数，这没什么大不了的；因为函数的返回类型是正常的使用方式`enable_if`。但是对于构造函数，没有`enable_if`可以应用的返回类型。这是我第一次尝试声明构造函数：

```
// The enable_if use below is to comply with 23.2.3 [sequence.reqmts]/14:
//     ... is called with a type InputIterator that does not qualify as an input iterator
//     then the constructor shall not participate in overload resolution.
template <typename InputIterator>
path(std::enable_if<!std::is_integral<InputIterator>::value, InputIterator>::type first,
     InputIterator last, Allocator const& allocator = allocator_type()); 
```

但是，boost 的[`enable_if`文档](http://www.boost.org/doc/libs/1_52_0/libs/utility/enable_if.html)建议使用初始化为的虚拟指针参数，`nullptr`而不是使用函数的实际参数。这是正确行为所必需的，还是前面`path`的迭代器范围构造函数声明可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:30:03.437

`enable_if`The Good Robot (R. Martinho Fernandes)在**[他的博客](http://flamingdangerzone.com/cxx11/2012/06/01/almost-static-if.html)**中用干净的 C++11 解决方案讨论了这个问题，即使用默认模板参数来应用。

但是，让我在这里指出，做

```
 template< class Type >
    void foo( typename Something< Type >::T ) 
```

***挫败论据演绎***。

通过显式提供模板参数，仍然可以调用该函数。但是在 C++ 中，编译器将简单地拒绝将`MyType`实际参数与形式参数类型匹配`Something<Blah>::T`，因为虽然在某些特殊情况下可以做到这一点，但它并不总是可以做到（可能有无数种选择`Blah`where `Something<Blah>::T`is `MyType`）。

所以，你目前的方法一般都行不通，但是规范要求的整个问题都是C++11的问题，所以C++11的具体解决方案就OK了！:-)

# function - 将回调参数传递给 cvCreateTrackbar

> ID：13792415
> 
> 赞同：2
> 
> 时间：2012-12-09T22:15:04.777
> 
> 标签：function, opencv, callback

我对函数 cvCreateTrackbar的*回调参数有疑问。*这是我得到的错误：

```
C:\Users\XELTINFO\ProjetVision\moyenetmedian.cpp:28: erreur : argument of type 'void (MoyenEtMedian::)(int)' does not match 'CvTrackbarCallback {aka void (*)(int)}' 
```

这是该类的代码：

```
int g_switch_value = 0;
int filterInt = 0;
int lastfilterInt = -1;

void MoyenEtMedian::switch_callback(int position)
{
    filterInt = position;
}

void MoyenEtMedian::exec(void)
{
    const char* name = "Filtres";
    IplImage* img = cvLoadImage( "image.png" );
    IplImage* out = cvCreateImage( cvGetSize(img), IPL_DEPTH_8U, 3 );
    cvNamedWindow( name, 1 );
    cvShowImage(name, out);

    // Create trackbar
    cvCreateTrackbar( "Filtre", name, &g_switch_value, 1,switch_callback );

    while( 1 ) {
        switch( filterInt ){
            case 0:
                cvSmooth( img, out, CV_BLUR, 7, 7 );
                break;
            case 1:
                cvSmooth( img, out, CV_MEDIAN, 7, 7 );
                break;
                    }
        if(filterInt != lastfilterInt){
            cvShowImage(name, out);
            lastfilterInt = filterInt;
        }
        if( cvWaitKey( 15 ) == 27 )
            break;
    }

    cvReleaseImage( &img );
    cvReleaseImage( &out );
    cvDestroyWindow( name );
} 
```

我打算通过插槽将 exec 功能连接到按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:22:06.467

您定义的回调函数 ( `void MoyenEtMedian::switch_callback(int position)`) 是 的成员函数`MoyenEtMedian`。因此，它获得了`MoyenEtMedian*`编译器添加的类型的隐式成员，而不是 type `void (*)(int)`。因此，您会收到此错误消息。

要解决此问题，您可以将成员函数定义`switch_callback`为`static`，但是您将无法在函数中使用类成员。您还可以定义一个不是类成员函数的回调函数。

# c# - XNA - 如何加载 .ini 文件的全部内容

> ID：13792419
> 
> 赞同：0
> 
> 时间：2012-12-09T22:15:43.263
> 
> 标签：c#, xna, ini

我设法从 .ini 文件中写入和读取特定参数。
我想知道是否有办法加载 .ini 文件的全部内容并将其存储在一个特殊的类中。这样，我只需加载 .ini 文件一次。这样，它应该会减少游戏的加载量。

我知道在小型游戏中，这可能无关紧要，但如果有人能指出我正确的方向，我仍然会很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:20:27.170

我相信 C# 的创建者倾向于将人们推向基于 XML 的配置文件而不是 INI 文件的方向 - 所以没有内置任何东西。我在 CodeProject 上找到了这篇文章，它把东西包装在一个很好的类中。这会有帮助吗？

[http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C](http://www.codeproject.com/Articles/1966/An-INI-file-handling-class-using-C)

我没有写它 - 也没有因此而受到赞扬，但它可能是你正在寻找的 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:17:21.343

假设 INI 是一个用新行拆分的简单键/值对，您是否可以使用类似的方法将整个 INI 文件作为字典或强类型对象提供。

该方法允许您将 ini 文件加载到这样的对象中。

```
class IniStructure
{
    public short Field1;
    public int Property1 { get; set; }
    public string Property2 { get; set; }
}

IniStructure ini = IniLoader.Load<IniStructure>(<fileName>); 
```

或者只是使用非 T 方法进入字典。

```
public static class IniLoader
    {
        public static T Load<T>(string fileName)
        {
            T results = (T)Activator.CreateInstance(typeof(T));

            PropertyInfo[] tProperties = typeof(T).GetProperties();
            FieldInfo[] tFields = typeof(T).GetFields();

            var iniFile = Load(fileName);

            foreach (var property in tProperties)
                if (iniFile.ContainsKey(property.Name))
                {
                    object s = System.Convert.ChangeType(iniFile[property.Name].ToString(), property.PropertyType);
                    property.SetValue(results, s, null);
                }
            foreach (var field in tFields)
                if (iniFile.ContainsKey(field.Name))
                {
                    object s = System.Convert.ChangeType(iniFile[field.Name].ToString(), field.FieldType);
                    field.SetValue(results, s);
                }

            return results;
        }

        public static Dictionary<string, object> Load(string fileName)
        {
            Dictionary<string, object> results = new Dictionary<string, object>();

            string fileText = File.ReadAllText(fileName);
            string[] fileLines = fileText.Split('\r');
            if (fileLines.Length > 0)
                for (int i = 0; i < fileLines.Length; i++)
                {
                    string line = fileLines[i].Trim();
                    if (!string.IsNullOrEmpty(line))
                    {
                        int equalsLocation = line.IndexOf('=');
                        if (equalsLocation > 0)
                        {
                            string key = line.Substring(0, equalsLocation).Trim();
                            string value = line.Substring(equalsLocation + 1, line.Length - equalsLocation - 1);

                            results.Add(key, value);
                        }
                    }
                }

            return results;
        }
    } 
```

# prestashop - Prestashop（管理面板）

> ID：13792426
> 
> 赞同：0
> 
> 时间：2012-12-09T22:16:49.327
> 
> 标签：prestashop

我已经安装了 Prestashop，当我要在管理面板上登录时，它会向我显示以下消息：

> 员工不存在或密码不正确。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:53:38.277

此错误的原因可能是 cookie 在您的密码的 MD5 哈希中不匹配。 [此链接可以帮助您解决问题](http://ken.edmonds-commerce.co.uk/others/prestashop/employee-does-not-exist-or-bad-password-prestashop-backend/)

# windows - 有没有办法使用 WScript.Shell 启动使用 VBScript 最小化的程序？

> ID：13792429
> 
> 赞同：6
> 
> 时间：2012-12-09T22:17:20.760
> 
> 标签：windows, command-line, vbscript, command-line-arguments

这是我现在启动应用程序的一些示例代码：

```
Set objShell = Wscript.CreateObject("WScript.Shell")     
objShell.Run """C:\Program Files\Handbrake\HandBrakeCLI.exe""" 
```

我尝试了以下方法来启动最小化的应用程序，但它不起作用。我假设这只适用于正常的命令提示符？

```
Set objShell = Wscript.CreateObject("WScript.Shell")     
objShell.Run "start /MIN ""C:\Program Files\Handbrake\HandBrakeCLI.exe""" 
```

我还尝试启动一个快捷方式（它只是给出了一个空错误并且脚本无法运行）以及尝试做一个`sendkeys`最小化它根本不起作用的。

顺便说一下，这是来自通过 cscript.exe 运行的 VBScript。

有谁知道我如何在 VBScript 中最小化这个应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T22:39:23.730

检查[文档](http://msdn.microsoft.com/en-us/subscriptions/d5fk67ky%28v=vs.80%29.aspx)并使用 .Run 方法的第二个参数。

证据：

```
set s = createobject("WScript.Shell")
s.run "notepad", 2 
```

启动记事本最小化。

# ruby-on-rails - 如何更好地管理多态模型？

> ID：13792430
> 
> 赞同：0
> 
> 时间：2012-12-09T22:17:25.613
> 
> 标签：ruby-on-rails, state-machine

假设我的模型`Campaign`可以同时具有多个布尔状态：

`drafted`: 只是草稿

`suspended`: 活跃后暂停

`pending`： 等待批准

`paused`：广告系列暂停，直到客户恢复它。

我考虑过使用状态机，我喜欢他们的 DSL 和他们提供的约定，但这只是针对一个并发状态，我不想失去以前的状态。例如状态机（一个字符串字段规则它们全部）：

如果我暂停了一个活动，那么客户端在暂停时暂停它，然后恢复它，它会变为活动状态并且暂停状态已经消失。

有谁知道如何处理这个问题？我喜欢 StateMachines 约定，但我仍然希望并发状态持续存在。

# java - java 程序 - 带可变性的可分性测试 - 我如何在 textpad 中写这个

> ID：13792435
> 
> 赞同：-4
> 
> 时间：2012-12-09T22:17:56.863
> 
> 标签：java, math, computer-science, division, integer-division

我已经编写了程序，但是我有两个问题，需要帮助来纠正。问题是

1）我不希望计数器 i 从 1 变为 x，因为它会尝试对每个小于实际用户输入的数字进行可分性测试。我需要它从 2 开始 i 一直到 12 以便您只尝试 2-12 的测试。2）整除性测试是正确的，它适用于每个数字，但这不是程序描述中所要求的。我需要为每个可分性测试实现上述算法。（我已经研究过，但不知道该怎么做）

这是我的代码，下面是作业：

```
import java.io.PrintStream;
import java.util.Scanner;

public class rwsFinalExam
{
    public static void main(String [] args)
    {
        Scanner scanner = new Scanner( System.in ); //allows input from concole
        PrintStream out = System.out;               //assigning System.out to PrintStream

        out.print( "Input a valid whole number: " ); //ouput directions for end user to enter a whole number

        String input = scanner.next();  //holds end user input
        int number;                     //data type and variable 

        try 
        {
            number = Integer.parseInt(input);   //assinging value to number //integer.parseInt method converts string to int
        }
        catch (Exception e)
        {
            out.println(input + " is not a valid number");
            return;
        }

        if (number < 0)
        {
            out.println(number + " is not a valid number");
            return;
        }

        printDivisors(number);
    }

    private static void printDivisors(int x)
    {
        PrintStream out = System.out;
        for (int i=1; i<x; i++) 
        {
            if (isDivisibleBy(x, i)) //checking divisibility 
            {
                out.println(x + " is divisible by " + i); //output when value is divisible 
            }
            else
            {
                out.println(x + " is not divisible by " + i); //output when value not divisible
            }//end if else
        }//end for
    }//end private static

    private static Boolean isDivisibleBy(int x, int divisor)
    {
        while (x > 0)
        {
            x -= divisor;
            if (x == 0)
            {
                return true;
            }
        }
        return false;
    }//end
}//end class rwsFinalExam 
```

我需要我的输出看起来像这样.. 不能使用 % 模数运算符

输入一个有效的整数：ABC

输出：ABC 不是有效数字 按任意键继续。. .

输入一个有效的整数：-1

输出：-1 is not a valid number 按任意键继续。. .

输入一个有效的整数：15

输出：15 不能被 2 整除。15 不能被 3 整除。15 不能被 4 整除。15 不能被 5 整除。15 不能被 6 整除。15 不能被 7 整除。15 不能被 8 整除。15不能被 9 整除。15 不能被 10 整除。15 不能被 11 整除。15 不能被 12 整除。按任意键继续。. .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:19:42.443

要测试是否可以在不使用的情况下`a`整除，您可以执行以下操作：`b``a % b`

```
boolean divisible = (a / b * b == a); 
```

这样做的原因`a / b`是整数（即截断）除法。

# ruby-on-rails - 在 Rails 中带有一个额外列的多对多表

> ID：13792436
> 
> 赞同：5
> 
> 时间：2012-12-09T22:18:02.273
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, many-to-many

是否可以仅使用两个 Rails 模型，用户和事件：

```
Users
|id        |name         |age         |
|1         |danilo       |26          |
|2         |joe          |23          |
|3         |carlos       |50          |
|4         |katy         |45          |

Events_Users
|event_id     |user_id        |confirmed       |
|1            |1              |1               |
|3            |3              |0               |
|4            |3              |1               |
|2            |3              |1               |

Events
|id           |name                     |date            |
|1            |the end of the year      |31/12/2012      |
|2            |the end of the world     |21/12/2012      |
|3            |Party                    |18/12/2012      |
|4            |Dinner                   |19/12/2012      | 
```

问题是，用户可以确认他们是否存在于事件中，为此我使用了表 Events_Users，列已确认（1 表示已确认）。我如何在没有模型“Event_User”的情况下使用 Rails ActiveRecord 做到这一点？如何操作 User 模型中的已确认列？

我正在使用 Rails 3.2.9 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T02:40:48.347

`User`并且`Event`有`many-to-many`关系，你不能只用2个模型建立这个关联，你必须有连接模型，或者连接表。

在您的情况下，您添加了属性`confirmed`，因此您需要一个名为**Confirmation**的连接模型（正如其他人推荐的那样）。您定义的关联将如下所示：

```
class User
  has_many :events, through: :confirmations
  has_many :confirmations
end

class Event
  has_many :users, through: :confirmations
  has_many :confirmations
end

class Confirmation
  belongs_to :user
  belongs_to :event
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T00:36:23.030

而不是用于用户模型，与关系

```
has_and_belongs_to_many :events 
```

并修改连接表Events_Users（有点脏）

最好使用具有两个**belongs_to**关系的模型 Confirmation：

```
belongs_to :user
belongs_to :event 
```

我希望这可以帮助你，亚历山德罗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T19:57:43.137

由于您在连接表上有额外的字段，因此您需要一个连接模型。看一下这个：

```
class User
  has_many :invitations
  has_many :invited_events,   -> {where(confirmed: false)}, class_name: 'Event', through: :invitations
  has_many :confirmed_events, -> {where(confirmed: true)},  class_name: 'Event', through: :invitations
end

class Event
  has_many :invitations
  has_many :invited_users,   -> {where(confirmed: false)}, class_name: 'User', through: :invitations
  has_many :confirmed_users, -> {where(confirmed: true)},  class_name: 'User', through: :invitations
end

class Invitation
  belongs_to :user
  belongs_to :event
end 
```

这样，`user.confirmed_events`将仅在连接表中已确认标志设置为 true 的情况下提供用户事件。

# coercion - 其中哪一个是强制的例子

> ID：13792443
> 
> 赞同：3
> 
> 时间：2012-12-09T22:18:57.437
> 
> 标签：coercion

我一直在思考关于强制的多项选择题。4 个示例 a、b、c 或 d 之一是强制示例。我将其缩小到 A 或 B。但我在两者之间进行选择时遇到了问题。甘蔗有人请解释为什么一个是强制而一个不是。

一个）

```
string s="tomat";
char c='o';
s=s+c; 
```

我认为 A 可能是正确的，因为我们添加了两种不同的类型，字符和字符串。这意味着 c 被提升为字符串，因此是强制的。

二）

```
double x=1.0;
double y=2.0;
int i=(int)(x+y); 
```

我还认为 B 是正确的答案，因为双 (x+y) 正在变成一个 int 以放置在 i 中。但我认为这可能是错误的，因为它是通过使用 (int) 主动完成的，而不是被动的，例如“int i = x + y”

我将列出其他两个选项，即使我相信这两个选项都不是正确答案

C）

```
char A=0x20;
A = A << 1 | 0x01;
cout << A << endl; 
```

D)

```
double x=1.0;
double y=x+1;
return 0; 
```

我不只是在寻找答案，而是在寻找解释。我已经阅读了大量关于强制的内容，A 和 B 看起来都是正确的答案。那么为什么一个正确而另一个不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:45:43.947

我不认为类型转换等同于类型强制，这就是为什么 A 可能是正确答案的原因。

B 接受一个 double 并将其强制转换为一个 int，这更像是转换而不是强制。在 A 中，您没有转换任何隐含的内容。您是在告诉运行时/编译器/无论“这两件事很相似，您能弄清楚如何连接它们吗？”

C 不是转换或强制，它只是位移。虽然 cout 可能是强制的......我不确定是否有强制字符串写入控制台。

D 可能包含一个强制，因为 1 是一个 int 并且您将它添加到一个 double 中。但是，您可以使用具有小数的整数进行浮点数学运算，这更加明确。

我认为 A 是最直接的强制示例。尽管 C 的 cout 声明似乎也很可疑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:48:50.200

我实际上认为它是 B。即使有显式`(int)`，它仍然是类型强制（只是不是自动类型强制）。您正在将浮点值（可能存储为 IEEE 浮点值）转换为整数值（可能存储在二进制补码中）。

而 A 只是将一个字符连接到一个字符串，其中一个字符串只是一个以空字符结尾的字符数组。那里没有数据类型转换，只是一些内存操作。

不过我可能是错的。

编辑：我不得不同意帕里斯。鉴于这是一个 C++ 字符串而不是 C 字符数组（我的错误），A 中的字符可能被强制转换为字符串。

# letter-spacing - 字母间距错误：Webkit 浏览器忽略小于 1 像素的字母间距

> ID：13792444
> 
> 赞同：1
> 
> 时间：2012-12-09T22:19:15.493
> 
> 标签：letter-spacing

像 Chrome 和 Safari 这样的 Webkit 浏览器会忽略小于 1px（或 0.1em）的字母间距，而 Firefox 则可以很好地显示 0.1px 步长：http: [//jsfiddle.net/d5y6n/2/](http://jsfiddle.net/d5y6n/2/)

是否有可能让 Webkit 浏览器识别小于 1px 的字母间距？

CSS

```
.spacing-1 {
    letter-spacing: 0.1px;
} 
```

HTML

```
<p class="spacing-1">This is some text …&lt;/p> 
```

# html - 在同一页面中休息 PHP

> ID：13792446
> 
> 赞同：0
> 
> 时间：2012-12-09T22:19:25.910
> 
> 标签：html, php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有一个数据库，当我汇总信息时，我收到此错误：

```
"Warning: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/mostra/html/noticias/publicacomentario.php:2) in /Applications/XAMPP/xamppfiles/htdocs/mostra/html/noticias/publicacomentario.php on line 14" 
```

我想在同一页面中休息当我将值插入数据库时​​，这是我的代码：

版本.PHP

```
<form action="noticias/publicacomentario.php" method="post" id="commentform"  onsubmit="MM_validateForm('usuario','','R','email','','RisEmail','comentario','','R');return document.MM_returnValue">
<fieldset>
    <input type="hidden" name="noticia_id" value="<?php echo $id;  ?>"><br>
    <p><label>NOMBRE *</label>
    <input type="text" name="usuario"></p>
    <p><label for="email">EMAIL (No se publicará) *</label>
    <input type="text" name="email"></p>

    <p><label for="comment">COMENTARIO</label>
    <textarea name="comentario" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>
    <p><input type="submit" name="submit" id="submit" tabindex="5" value="Enviar " /></p>
</fieldset>
</form> 
```

公共汽车评论.PHP

```
<?php

require ('connect.php');
$id=$_POST['noticia_id'];
$nick=$_POST['usuario']; 
$email=$_POST['email']; 
$comentario=$_POST['comentario']; 
$query = "INSERT INTO comentarios (usuario,email,comentario,noticia_id, fecha) VALUES('$nick','$email','$comentario','$id', NOW())";
mysql_query($query) or die(mysql_error());

$query = "UPDATE  noticias SET num_comentarios= num_comentarios+1 where id_noticia='".$id."'";
mysql_query($query) or die(mysql_error());
header("Location: ver.php?id=$id")

?> 
```

任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:24:47.910

它说的是第 2 行，但 PUBLICARCOMENTARIO.PHP 的第 2 行实际上没有任何内容。

确保在 PHP 开始标记之前的“PUBLICARCOMENTARIO.PHP”上方没有任何空格或换行符。

如果 PUBLICARCOMENTARIO.PHP 仅包含 PHP（无 HTML），那么您也不需要关闭 ?>。

基本上错误是说 header("xxx") 不能输出，因为你已经输出了其他东西。通常在开始 PHP 标记之前是一些 HTML 或一些空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:38:55.790

我把 PUBLICARCOMENTARIO.PHP 放到 VER.PHP

```
 <form action="" method="post" id="commentform"  onsubmit="MM_validateForm('usuario','','R','email','','RisEmail','comentario','','R');return document.MM_returnValue">
                                        <fieldset>
                                        <input type="hidden" name="noticia_id" value="<?php echo $id;  ?>"><br>
                                            <p><label>NOMBRE *</label>
                                            <input type="text" name="usuario"></p>
                                            <p><label for="email">EMAIL (No se publicará) *</label>
                                            <input type="text" name="email"></p>

                                            <p><label for="comment">COMENTARIO</label>
                                            <textarea name="comentario" id="comment" cols="100%" rows="10" tabindex="4"></textarea></p>
                                            <p><input type="submit" name="submit" id="submit" tabindex="5" value="Enviar " /></p>

                                        </fieldset>
                                    </form>
                                </div>

                                <?php
if ($_POST) {
require ('connect.php');
$id=$_POST['noticia_id'];
$nick=$_POST['usuario']; 
$email=$_POST['email']; 
$comentario=$_POST['comentario']; 
$query = "INSERT INTO comentarios (usuario,email,comentario,noticia_id, fecha) VALUES('$nick','$email','$comentario','$id', NOW())";
mysql_query($query) or die(mysql_error());

$query = "UPDATE  noticias SET num_comentarios= num_comentarios+1 where id_noticia='".$id."'";
mysql_query($query) or die(mysql_error());
}
header("Location: $_SERVER[PHP_SELF]?id=$id");
?> 
```

在 HEADER("location: ....) 里面我把 $_SERVER[PHP_SELF].

有了这个作品..但是在刷新页面之前不会显示输入的值..为什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:34:35.473

您应该在 PUBLICARCOMENTARIO.PHP 中删除“<?php”之前的空白行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T22:55:36.813

检查 PUBLICARCOMENTARIO.PHP 是否保存为 UTF8+BOM，如果是，则删除 BOM。您可以使用 Notepad++ 或任何其他优秀的编辑器来完成此操作。

# jquery - jQuery UI 动画

> ID：13792449
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:19:42.273
> 
> 标签：jquery, jquery-ui

我是 jQuery 新手，在获得我想要的结果时遇到了一些困难。

我在一个 div 中有一个图像，我想像在这个例子中那样在悬停它时制作动画。[http://thewebsitedeveloper.co.nz/thinkRedTest/pattonNz/optionOne.html](http://thewebsitedeveloper.co.nz/thinkRedTest/pattonNz/optionOne.html)

这很好用，但我希望图像不会不断反弹。我只想让图像向上移动并保持在一个凸起的位置，直到鼠标离开包含的 div。

这是目前正在为其设置动画的脚本：

```
$('.gHover').hover(function ()
{
    $(this).effect("bounce", { distance: 3, times:1 }, 900);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:26:21.840

使用[`mouseenter`](http://api.jquery.com/mouseenter/)事件而不是`hover`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:20:02.797

```
$('.gHover').hover(function() {
  $(this)
    .css('position', 'relative')
    .stop(true, false)
    .animate({ top: '-10px' }, 400);
}, function() {
  $(this)
    .stop(true, false)
    .animate({ top: 0 }, 400);
}); 
```

这也可以通过 CSS 来实现，不过它更适合用于支持过渡的现代浏览器。然后，您可以为那些不这样做的人回退到上述 JS。这里的例子：

[http://jsbin.com/omofis/2/edit](http://jsbin.com/omofis/2/edit)

# python - 定期提取特定进程的 CPU 使用率

> ID：13792450
> 
> 赞同：3
> 
> 时间：2012-12-09T22:19:43.803
> 
> 标签：python, regex, awk, cpu

我在 Linux 服务器上有一个正在运行的演示，它消耗了相当多的 CPU 和内存使用。这些参数会根据运行演示的负载不断变化。我想定期提取 CPU 使用率和内存使用率，即每 3-4 秒并创建提取结果的图。

将该过程视为“正在运行的演示”，在终端上我键入：

```
ps aux |grep Running Demo | awk '{print $3 $4}' 
```

这为我提供了 Running Demo 的 CPU 和内存使用情况。但我想要接下来的两件事，即 1) 每 3-4 秒输出一次此结果。2) 绘制生成的结果图。

任何帮助或建议将不胜感激。我是这个社区的初学者。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:21:51.197

您正在尝试做的是众所周知的现有项目：

见[穆宁](http://munin-monitoring.org/)

**例子**

![在此处输入图像描述](../Images/e7ae9420355e5081c92fdbd130112cce.png)

**笔记**

*   它得到了开源社区的支持，所以...
*   会更强大
*   不要运行奇怪的命令，比如`ps aux |grep Running Demo | awk '{print $3 $4}'`but`ps auxw | awk '/Running Demo/{print $3 $4}'`
*   许多插件存在并且适用于基础：CPU、RAM、FW、Apache 等等
*   如果您真的需要，请在护目镜搜索[http://blah.token.ro/post/249956031/using-gnuplot-to-graph-process-cpu-usage](http://blah.token.ro/post/249956031/using-gnuplot-to-graph-process-cpu-usage)`gnuplot`中查看前 3 名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T13:01:29.660

以下 python 脚本接受输出文件名 (png) 和一个或多个 pid。当您按下 ctrl-C 时，它会停止并使用 gnuplot 生成漂亮的图形。

```
#!/usr/bin/env python
import os
import tempfile
import time
import sys

def total(pids):
    return [sum(map(int, file('/proc/%s/stat' % pid).read().split()[13:17])) for pid in pids]

def main():
    if len(sys.argv) == 1 or sys.argv[1] == '-h':
        print 'log.py output.png pid1 pid2..'
        return
    pids = sys.argv[2:]
    results = []
    prev = total(pids)
    try:
        while True:
            new = total(pids)
            result = [(new[i]-prev[i])/0.1 for i, pid in enumerate(pids)]
            results.append(result)
            time.sleep(0.1)
            prev = new
    except KeyboardInterrupt:
        pass
    t1, t2 = tempfile.mkstemp()[1], tempfile.mkstemp()[1]
    f1, f2 = file(t1, 'w'), file(t2, 'w')
    print
    print 'data: %s' % t1
    print 'plot: %s' % t2
    for result in results:
        print >>f1, ' '.join(map(str, result))
    print >>f2, 'set terminal png size %d,480' % (len(results)*5)
    print >>f2, "set out '%s'" % sys.argv[1]
    print >>f2, 'plot ' + ', '.join([("'%s' using ($0/10):%d with linespoints title '%s'" % (t1, i+1, pid)) for i, pid in enumerate(pids)])
    f1.close()
    f2.close()
    os.system('gnuplot %s' % t2)

if __name__ == '__main__':
    main() 
```

# java - NetBean 为 Hibernate 生成的 revenge.xml 不包含关联

> ID：13792454
> 
> 赞同：1
> 
> 时间：2012-12-09T22:20:09.677
> 
> 标签：java, hibernate, netbeans-7

我是休眠的新手。我已经完成了[本教程](http://netbeans.org/kb/docs/web/hibernate-webapp.html)，并尝试“生成”我的第一个休眠应用程序。

我在 JDBC 上创建了四个表，帐户、课程、级别、主题。 **当然有参考关键帐户，水平和主题。**然后我尝试通过 NetBean 生成 revenge.xml。在向导中，表是相关的，但生成的 xml 不包含任何关联映射。

![向导](../Images/0a706677b545744b8507a3e9fe9ce38f.png)

hibernate.revenge.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering PUBLIC "-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd">
<hibernate-reverse-engineering>
  <schema-selection match-schema="APP"/>
  <table-filter match-name="ACCOUNT"/>
  <table-filter match-name="LEVEL"/>
  <table-filter match-name="COURSE"/>
  <table-filter match-name="SUBJECT"/>
</hibernate-reverse-engineering> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:35:39.597

`hibernate.reveng.xml`您在文件中没有关联。

如果您使用休眠注释，则您的关联在映射类中定义，`hbm`如果您使用经典`XML`映射，则在每个类的文件中定义。

# jquery - 如何隐藏所有类 div 并切换一个 id div？

> ID：13792465
> 
> 赞同：0
> 
> 时间：2012-12-09T22:21:59.807
> 
> 标签：jquery, html, hide, toggle

```
$("#btnSad").click(function() {
    $(".tgg").each(function () {
    if (.tgg.id != "sad") {$(.tgg).hide();
    $("#sad").slideToggle("slow");
};  
}); 
```

我想要什么：
对于每个带有类`.tgg`
的 div 如果 div`id`不是`#sad`- 然后隐藏它们，
div `#sad`- slideToggle （`#sad`也有类`.tgg`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:24:17.733

像这样的东西？

```
$('.tgg:not(#sad)').hide();
$('#sad').slideToggle('slow'); 
```

# android - 停止来自 Google Checkout 的购买取消电子邮件

> ID：13792467
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:22:17.783
> 
> 标签：android, google-play, android-pay

我知道这已经被讨论过，但到目前为止我真的找不到任何解决这个问题的方法。在新的 Checkuout/Wallet 集成之后，路径发生了变化。

每次客户取消应用程序时，我都会处理来自 Google 的大量每日电子邮件。有点像垃圾邮件...

我在哪里可以找到停止发送这些电子邮件的神奇复选框？

谢谢！

Google 取消了您最近从您的商店购买的商品。

原因：客户要求取消

请不要处理或运送此订单。以下是交易摘要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:19:01.173

*   登录 Android Market，点击使用新设计。
*   转到左侧的报告。
*   点击“访问您的商家帐户了解更多详情”
*   点击设置
*   单击首选项
*   取消选中“每次收到订单、取消或其他交易时给我发电子邮件”

# java - 使用 Java 和 Tomcat 7 的基本数据库连接池

> ID：13792469
> 
> 赞同：13
> 
> 时间：2012-12-09T22:22:25.567
> 
> 标签：java, mysql, jdbc, tomcat7, connection-pooling

我正在尝试创建我的第一个连接池。我正在使用 Tomcat 7 和 MySQL DB 创建一个 Java Web 应用程序，并且我想创建最简单的连接池。我看过几个教程，但对我来说并不是很清楚，所以我希望你确认我是否做得很好。

我编写了以下类作为连接池管理器：

```
package dao.mysql;

import java.sql.Connection;
import java.sql.SQLException;
import org.apache.tomcat.jdbc.pool.DataSource;
import org.apache.tomcat.jdbc.pool.PoolProperties;

public class MySQLConnectionPool {

    private static DataSource datasource;
    private static String driver = "com.mysql.jdbc.Driver";
    private static String url = "jdbc:mysql://localhost:3306/mydb";
    private static String username = "user";
    private static String password = "password";

    public MySQLConnectionPool() {
        datasource = new DataSource(configurePoolProperties(driver, url, username, password));
    }

    private PoolProperties configurePoolProperties(String driver, String url, String username, String password) {
        PoolProperties properties = new PoolProperties();
        properties.setDriverClassName(driver);
        properties.setUrl(url);
        properties.setUsername(username);
        properties.setPassword(password);
        return properties;
    } 

    public static synchronized Connection getConnection() {
        Connection connection = null;
        try {
            connection = datasource.getConnection();
        } catch (SQLException ex) {
            System.out.println("Error while getting a connection from the pool! \nSQL state:" + ex.getSQLState() + "\nMESSAGE" + ex.getMessage());
        }
        return connection;
    }
} 
```

我不确定**static**属性和**synchronized**。

而且我不确定池的“客户端”类。我知道他们只需要使用

```
Connection con = MySQLConnectionPool.getConnection(); 
```

最后使用关闭此连接

```
con.close(); 
```

就这样？而且，有没有更简单或更好的方法来做到这一点？

非常感谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-09T22:32:46.750

这是错误的做法。

`context.xml`Tomcat 已经有一个连接池，您可以通过目录中的任何代码进行配置和设置`conf`。

一旦在那里定义，您需要做的就是在您的代码中查找 JNDI 数据源。硬编码所有这些（并重新发明轮子）是一个非常糟糕的主意。

要了解如何配置 JNDI 数据源，请查看手册：http: [//tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

Tomcat 手册也有一个关于如何从池中获取连接的示例：

```
InitialContext cxt = new InitialContext();
DataSource ds = (DataSource) cxt.lookup( "java:/comp/env/jdbc/dsname" ); 
```

你在哪里`dsname`提供的名字`context.xml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:32:37.903

查看[JNDI 数据源 HOW-TO](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)和[Tomcat JDBC 连接池](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html)Tomcat 文档。最好让 Tomcat 来做这件事，尤其是因为它可以避免类加载器泄漏。

# regex - 在条件语句中查找意外赋值的正则表达式

> ID：13792472
> 
> 赞同：2
> 
> 时间：2012-12-09T22:22:48.337
> 
> 标签：regex, language-agnostic

我不止一次被一个错误所困扰，您不小心在条件语句中分配了一个变量，例如`if`.

我正在寻找我的资源以了解此类事件。我为简单的情况创建了一个在 PHP 中工作的表达式，但想知道是否有人可以优化它或处理更有趣的情况。

样品：

```
if ($var = 3)       //MATCH
if($var = 3)        //MATCH
if($var=3)          //MATCH
if ( $var = 3)      //MATCH
if ($var == $var2)  
if ($var = $var3)   //MATCH
if ( $var === 7)
if( $var == 8 || $var = 9) //MATCH
if (($var == 7 ) && ($var ==10)) 
```

简单的案例处理得很好，`if\s*\([\$a-zA-Z\d\s]*=[\$a-zA-Z\d\s]*\)`但如果在示例底部想出一些适用于扩展版本的东西会很好。

关于更好的表达方式的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:36:51.483

正则表达式不是解析代码的最佳工具。

对于大多数语言，都有检查代码的 linting 工具。我没有使用 PHP 的经验，但您会在这里找到很多建议：[是否有用于 PHP 文件的静态代码分析器 [如 Lint]？](https://stackoverflow.com/questions/378959/is-there-a-static-code-analyzer-like-lint-for-php-files)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:53:42.937

首先，假设您没有这样的情况（C 示例）：

```
if ((a = b) == c) 
```

因为理解这些情况需要一个实际的解析器。

现在，简单地说，你想匹配`=`但不匹配`==\+`。所以：

```
if\([^=]\|==\+\)*[^=]=[^=]\([^=]\|==\+\)*$ 
```

它说的是什么：

*   `if`: 匹配第一个 if。
*   `[^=]`: 任何字符，但`=`
*   `==\+`:`==`和`===`
*   `\([^=]\|==\+\)*`: 任何不是`=`或是`==`或的东西`===`。这包括所有的空格、开头`(`、结尾`)`等。这在 isolated 之前和之后都有`=`。
*   `[^=]=[^=]`: 孤立`=`的。

# ruby-on-rails - 如何使回形针 s3_host_alias 可用于每个环境

> ID：13792475
> 
> 赞同：1
> 
> 时间：2012-12-09T22:23:00.973
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

`has_attached_file`我目前在我的声明中有这样的内容，

```
# Photo.rb
...
:s3_host_alias => 'cdn.mydomain.com' 
```

由于`s3_host_alias`指向在每个环境中都不同的特定存储桶，我想知道如何设置`:s3_host_alias`读取取决于其环境的值。

我在想一种有组织的方法可能是保存在`aws.yml`像这样的同一个配置文件中，

```
development:
  bucket: development.mydomain.com
  access_key_id: <%= ENV['S3_KEY'] %>
  secret_access_key: <%= ENV['S3_SECRET'] %>
  s3_host_alias: cdn-dev.mydomain.com

production:
  bucket: media.mydomain.com
  access_key_id: <%= ENV['S3_KEY'] %>
  secret_access_key: <%= ENV['S3_SECRET'] %>
  s3_host_alias: cdn.mydomain.com

test:
  bucket: test.mydomain.com
  access_key_id: <%= ENV['S3_KEY'] %>
  secret_access_key: <%= ENV['S3_SECRET'] %>
  s3_host_alias: cdn-test.mydomain.com 
```

问题是我不知道如何从模型中调用这个`s3_host_alias`属性。`Photo.rb`

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-01T01:42:40.540

我有同样的问题，并通过发送一个 lambda 到`s3_host_alias`：

```
s3_host_alias: lambda {|p| p.s3_credentials[:s3_host_alias]} 
```

请务必同时设置`url:`选项：

```
url: ':s3_alias_url' 
```

# haskell - 递归 Haskell - 最小值函数

> ID：13792477
> 
> 赞同：2
> 
> 时间：2012-12-09T22:23:05.533
> 
> 标签：haskell, functional-programming

是否有另一种方法可以在不使用 haskell 函数的情况下执行此功能

```
 mymin :: (Ord a) => [a] -> a 
    mymin [] = error "empty list"
    mymin [x] = x  
    mymin (x:xs)   
          | x < mt = x  
          | otherwise = mt  
            where mt = mymin xs 
```

告诉我是什么`mymin :: (Ord a) => [a] ->a`意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T22:30:16.997

如果不允许您使用其他功能，您的方式很好。

你可以做

```
min' [] = error "empty list"
min' (x:xs) = minhelper x xs where
  minhelper m [] = m
  minhelper m (y:ys) | y < m = minhelper y ys
                     | otherwise = minhelper m ys 
```

但我不认为它比你的一般用途更好。它跟踪`m`递归调用中的最小值。

我们可以将 minhelper 的第二种情况重写为

```
 minhelper m (y:ys) = minhelper (if y<m then y else m) ys 
```

利用在 Haskell 中，if-then-else 作用于表达式而不是指令的事实。

* * *

```
mymin :: Ord a => [a] -> a 
```

`Ord a =>`意味着 mymin 函数适用于定义了`a`不等式的类型`(<=)`。（它[在这里](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aOrd)定义。）同样，如果它说`Eq a =>`这意味着它适用于在它们上定义了`a`相等性的类型。`(==)`

`[a] -> a`意味着它需要一个`a`s 列表并给你一个`a`支持。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-09T22:38:14.850

由于 AndrewC 已经解释了是什么`mymin :: Ord a => [a] -> a`意思。另一种功能可能是：

```
mymin :: (Ord a) => [a] -> a 
mymin [] = error "empty list"
mymin [x] = x  
mymin (x:y:xs) = if x < y then mymin(x:xs) else mymin(y:xs) 
```

或者

```
mymin :: (Ord a) => [a] -> a 
mymin [] = error "empty list"
mymin [x] = x  
mymin (x:y:xs) = mymin ((if x < y then x else y):xs) 
```

# jquery - jQuery text() 函数不接受 input.val()

> ID：13792479
> 
> 赞同：1
> 
> 时间：2012-12-09T22:23:26.737
> 
> 标签：jquery

我想设置一个预览区域，显示一些输入的文本在原位的样子。但是，我正在努力让这个带有 text() 的 jQuery 函数工作。

虽然这有效（在提交表单时在#preview 中显示“一些示例文本”：

```
$("form").submit(function () {
              $("#preview").text("some sample text").show();
              return false;
            }); 
```

这不起作用，当我尝试获取文本字段的内容并在预览框中使用它时，什么也不显示：

```
$("form").submit(function () {
              $("#preview").text($("input:first").val()).show();
              return false;
            }); 
```

知道为什么吗？可能很简单，我只是想念它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:37:49.717

该代码在小提琴中运行良好。确保`#preview`有一个声明的高度和宽度，否则它可能在视觉上不明显。

请参阅工作演示：http: [//jsfiddle.net/js4XU/](http://jsfiddle.net/js4XU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T20:01:56.563

最后，我将其重写为更多的“实时预览”，并使用该`keyup()`函数来捕获输入的 val，而不是在表单提交后请求。

# apache - mod_rewrite 在同一台服务器但不同的网站上

> ID：13792480
> 
> 赞同：0
> 
> 时间：2012-12-09T22:23:29.173
> 
> 标签：apache, mod-rewrite

我在位于以下文件夹中的服务器上有 2 个网站：

*   /var/www/site1.com/
*   /var/www/site2.com/

第二个站点上有一个文件夹“test”，里面有 php-scripts：

*   /var/www/site2.com/test/

所以这些脚本可以通过http访问：

*   [http://site2.com/test/script.php](http://site2.com/test/script.php)

我需要这些脚本也可以通过第一个域访问，如下所示：

*   [http://site1.com/test/script.php](http://site1.com/test/script.php)

但是没有将这些文件复制到 site1 的文件夹

这可能使用 mod_rewrite 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T00:03:44.760

只需对您的测试文件夹进行符号链接即可。

```
ln -s /var/www/site1.com/test /var/www/site2.com/test 
```

如果您`+FollowSymLinks`在该虚拟主机的 apache 配置中有选项，我想应该可以。

# opengl - OpenGL安装/初始化

> ID：13792486
> 
> 赞同：1
> 
> 时间：2012-12-09T22:23:56.157
> 
> 标签：opengl, visual-studio-2012, glut

我正在尝试在 Visual Studio 2012 中编写一些 openGL 代码。我查看了互联网以尝试正确设置，但我似乎无法解决这个问题。

```
#include <gl\GL.h>
#include <gl\GLU.h>
#include <gl\glut.h>

int main(int argc, char**argv){

    glutInit(&argc, argv);

} 
```

glutInit 行不起作用，说 glutInit 没有定义。有人可以指导我如何在 VS 2012 中正确设置吗？我在 2010 年之前做过这样的事情，我真的很想开始我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:48:07.480

您将 glut 目录添加到 VC++ 目录，这里：

![在此处输入图像描述](../Images/97c72f0a48c1357dcbb582f647d12d15.png)

然后你需要在 Additional Dependencies 下添加库的名称：

![在此处输入图像描述](../Images/c3fcec1364511a19647bdede68f51f7f.png)

# java - jcraft jsch + 在远程机器上执行命令

> ID：13792492
> 
> 赞同：0
> 
> 时间：2012-12-09T22:24:23.430
> 
> 标签：java, exception, jsch

尝试在远程机器上运行命令（例如：检查文件是否存在）但收到此错误。在这一步失败 -

> channel.connect(60000);com.jcraft.jsch.JSchException：无法在 com.jcraft.jsch.Request.write(Request.java:65) 在 com.jcraft.jsch.RequestExec.request(RequestExec. java:56) 在 com.jcraft.jsch.ChannelExec.start(ChannelExec.java:43) 在 com.jcraft.jsch.Channel.connect(Channel.java:152) 在 SampleTest.jcraftTest(SampleTest.java:143) 在SampleTest.main(SampleTest.java:23)

我正在使用的代码

```
JSch jsch = new JSch();
session = jsch.getSession("username", "host", 22);

Properties config = new Properties();
config.put("StrictHostKeyChecking", "no");
config.put("PreferredAuthentications", "password,keyboard-interactive");

session.setConfig(config);
session.setPassword("password");
session.connect(60000);

System.out.println("session connected");

channel = session.openChannel("exec");

System.out.println("channel opened");

((ChannelExec) channel).setCommand("uname -a && date && uptime && who");
channel.setInputStream(null);
((ChannelExec) channel).setErrStream(System.err);
InputStream in = channel.getInputStream();
channel.connect(60000);

System.out.println("channel connected");

byte[] tmp = new byte[1024];
while (true) {
    while (in.available() > 0) {
        int i = in.read(tmp, 0, 1024);
        if (i < 0) {
            break;
        }
        System.out.print(new String(tmp, 0, i));
    }
    if (channel.isClosed()) {
        System.out.println("exit-status: " + channel.getExitStatus());
        break;
    }
    try {
        Thread.sleep(1000);
    } catch (Exception ee) {
        ee.printStackTrace();
    }
} 
```

# python-3.x - 无法启动 Qt uic

> ID：13792502
> 
> 赞同：5
> 
> 时间：2012-12-09T22:25:21.093
> 
> 标签：python-3.x, qt4, pyside

我已经安装了 Qt 设计器 4.8.2、Pyside 和 Python 3.3。当我使用 Qt 设计器创建表单时，单击查看代码时看不到代码。错误消息是：“无法启动 C:\Qt\4.8.2\bin\uic”。我在 C:\Python33\Lib\site-packages\PyQt4\uic 下有 pyuic。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-08-25T07:48:50.503

只需创建一个目录，在其中搜索 uic.exe 文件并将现有的 uic.exe 文件复制到该目录。

我的示例：当我单击查看代码时，它显示在路径 C:\python374\Lib\site-packages\pyqt5_tools\Qt\bin\bin 中询问文件 uic.exe 时出错

但我发现 uicexe 文件位于 C:\python374\Lib\site-packages\pyqt5_tools\Qt\bin 文件夹中所以我创建了另一个 bin 文件夹并将 uic.exe 复制到该文件夹​​中。这解决了我的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T03:11:43.247

尽管您当然可以使用 Qt Designer 为 PySide/PyQt 创建 UI，但您应该知道它主要是一个 C++ 工具——它没有任何对 Python 的内置支持。因此，您所指的“查看代码...”命令只会生成 C++ 代码——如果您打算使用 PySide 或 PyQt，这对您来说可能没有多大用处。

Qt Designer UI 文件采用 XML 格式（它们通常具有 .ui 扩展名）。

要将它们与 Python 一起使用，基本上有两种选择：

1.  将 .ui 文件直接加载到您的应用程序中。
2.  使用外部工具将 .ui 文件转换为 Python 模块。

PySide 和 PyQt 在这两个选项的实现方式上有几个不同之处。

对于 PyQt，这两个选项的完整文档可以在[这里](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/designer.html)找到。

对于 PySide，可以在[此处](http://srinikom.github.com/pyside-docs/PySide/QtUiTools/QUiLoader.html#detailed-description)找到选项 1 的文档- 但似乎没有选项 2 的任何文档。但是，PySide 的外部工具（称为`pyside-uic`）的工作方式与 PyQt 的工具非常相似（即叫叫`pyuic4`)。

如果您需要有关如何开始使用 Qt 和 Python 的更多一般信息，请尝试[PySide Wiki](https://qt-project.org/wiki/Category%3aLanguageBindings%3a%3aPySide)或[PyQt Wiki](http://www.diotavelli.net/PyQtWiki/StartPage?action=show&redirect=FrontPage)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-13T22:34:20.257

如果您正在寻找生成 python 代码，您可以从控制台执行此操作。因此，如果您将程序中的文件保存为“无标题”（默认），请运行以下命令：

```
 pyuic5 -m untitled.ui -o untitled.py 
```

确保您的工作目录是“untitled.ui”的文件位置。然后它将 untitled.py 吐到同一个地方。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-21T14:13:43.923

在文件夹内创建一个名为 bin 的文件夹，并将 exe 移动到 uic.exe 中。它在单击 QT 设计器中的查看代码时显示代码。

[![在此处输入图像描述](../Images/41b9386681d67e79aee6708388b83484.png)](https://i.stack.imgur.com/psB2Q.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-06T11:08:53.117

做

> *表格*->*查看代码*

使用 Qt4 或 Qt5直接从*Qt Designer*工作，您只需从*Qt Designer*正在查找的位置创建一个符号链接，指向您的*pyuic5.exe*可执行文件所在的位置。以您的示例为例，它将是：

```
mklink /H "C:\Qt\4.8.2\bin\uic.exe" "C:\Python33\Lib\site-packages\PyQt4\pyuic4.exe" 
```

这是：

```
mklink /H "Path\to\uic.exe\file\Qt\designer\is\looking\for" "Path\to\actual\location\of\pyuic4.exe\or\pyuic5.exe\file" 
```

确保“C:\Qt\4.8.2\bin\uic.exe”所在的文件夹明显存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-11T17:05:44.807

### 对于 Linux 计算机

如果有人仍然遇到这个问题并且您正在使用 Linux。

`uic`您可以在`venv-path/python3.x/site-packages/PySide2/uic` 复制此文件中找到所需的文件，并`bin`在 Qt 文件夹中创建一个新文件夹。`venv-path/python3.x/site-packages/PySide2/Qt/bin`

现在将`uic`文件放在那里，这样，最终`uic`路径是： `venv-path/python3.x/site-packages/PySide2/Qt/bin/uic`

**注意**：：

*   *venv-path*是你的 python 虚拟环境的路径。
*   *3.x*是虚拟环境中 Python 的适当版本。（在我的情况下是3.8）

### 最后结果：

[![在此处输入图像描述](../Images/b7557d582208447d0a4820c7ce7da994.png)](https://i.stack.imgur.com/cV3u9.png)

# python - 在python中处理二进制文字

> ID：13792513
> 
> 赞同：0
> 
> 时间：2012-12-09T22:26:25.967
> 
> 标签：python, binary, hex

我正在尝试将代码从 php 转换为 python。我有一个二进制文字列表-

```
['0b0', '0b0', '0b0', '0b0', '0b0', '0b0', '0b100', '0b1001100'] 
```

这等于`0000000000000000000000000000000000000000000000000000010001001100`连接时。

```
int("0000000000000000000000000000000000000000000000000000010001001100",2) 
```

给`1100`

我如何从列表中制作这个。无法连接二进制文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:33:21.147

```
>>> l = ['0b0', '0b0', '0b0', '0b0', '0b0', '0b0', '0b100', '0b1001100']
>>> int("".join("%02x" % int(x,0) for x in l), 16)
1100 
```

Python 将其理解`0b0101`为二进制文字，因此我使用`int('0b0101', 0)`将每个部分转换为 int。然后我以方便的格式（两位十六进制）对其进行格式化，将它们连接起来，并将它们解释为十六进制整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:35:02.203

您需要 zfill 方法用正确数量的零填充您的元素

```
li = ['0b0', '0b0', '0b0', '0b0', '0b0', '0b0', '0b100', '0b1001100']
zero_padded = [x[2:].zfill(8) for x in li]
print ''.join(zero_padded) 
```

输出

```
0000000000000000000000000000000000000000000000000000010001001100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:29:03.547

只需剥离`0b`：

```
binary = ''.join(x[2:] for x in yourlist)
print binary
print int(binary, 2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T22:39:16.500

这对你来说够丑吗：

```
int(''.join([i for sl in [s[2:].zfill(8) for s in l] for i in sl]),2) 
```

（它似乎工作。）

也许这更具可读性：

```
l = ['0b0', '0b0', '0b0', '0b0', '0b0', '0b0', '0b100', '0b1001100']
n = 0
for s in l:
    n = n*256 + int(s,2)
print n 
```

# tomcat - 如何将 SHA256RSA 签名的服务器证书转换为 SHA1RSA？

> ID：13792514
> 
> 赞同：4
> 
> 时间：2012-12-09T22:26:28.707
> 
> 标签：tomcat, ssl-certificate, rsa, keystore, sha256

我正在使用 tomcat 密钥库生成一个私钥。生成并提交证书请求后，服务器证书似乎有签名 SHA256RSA 算法，最终给出“无法从回复错误建立链”。根证书和中间证书都是 SHA1RSA。在生成密钥对和证书请求时，已将其指定为 SHA1RSA 作为签名算法。

任何人都可以协助如何使用 SHA256RSA 生成服务器证书吗？

以下是我遵循的步骤（为了便于阅读，分成多行）：

```
keytool -genkey -dname "CN=xxxx, OU=Servers, O=xx, C=US" \
    -alias tomcat -keyalg RSA -sigalg SHA1withRSA -keysize 2048 \
    -keypass xxx -keystore tomcat2k.keystore

keytool -certreq -v -alias tomcat -keyalg RSA -sigalg SHA1withRSA \
    -keysize 2048 -keypass xxx -file certreq.csr -keystore tomcat2k.keystore 
```

收到的证书：根、中间（SHA1RSA）和服务器（SHA256RSA）根。

中间体被导入。服务器证书无法建立链。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T07:51:49.980

如果您可以访问 openssl，我建议使用它而不是 keytool。如果您生成证书签名请求，请使用选项 -sha256 设置您要查找的散列算法。

首先生成一个证书签名请求：

```
$ openssl genrsa -des3 -out server.key 4096
$ openssl req -new -key server.key -out server.csr -sha256 
```

让您选择的 CA 签署证书签名请求。如果你想要一个自签名证书，你可以使用以下，否则跳过这一步：

```
$ openssl genrsa -des3 -out ca.key 4096
$ openssl req -new -x509 -days 365 -key ca.key -out ca.pem
$ openssl x509 -req -days 365 -in server.csr -CA ca.pem -CAkey ca.key -set_serial 01 -out server.pem 
```

最后，将证书签名的 server.pem 证书转换为 p7b，这是 tomcat 所期望的，然后将 p7b 导入 tomcat 密钥库中。

```
$ openssl crl2pkcs7 -nocrl -certfile server.pem -out tomcat2k.p7b -certfile ca.pem
$ keytool -import -trustcacerts -alias server -file tomcat2k.p7b -keystore tomcat2k.jks 
```

# c++ - Boost优先级队列比较功能

> ID：13792517
> 
> 赞同：2
> 
> 时间：2012-12-09T22:26:35.103
> 
> 标签：c++, boost, comparison

如何使用 boost 库更改优先级队列上的比较功能？我有一个这样的结构：

```
struct decreasingOrderMyType
{
    bool operator() (const MyType & lhs, const MyType & rhs) const
    {
        return lhs.value > rhs.value;
    }
}; 
```

我想用它来比较我的元素。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T23:08:31.797

对于 std::priority_queue 我将其指定为：`std::priority_queue<DistanceTuple, std::vector<DistanceTuple>, SmallestOnTop > pq;`

`DistanceTuple`是一个`std::pair`并且`SmallestOnTop`是一个函子来比较`std::pair`

**更新：**我错了，它们不一样。boost 版本使用命名参数。像这样工作：

```
boost::heap::priority_queue<MyType,
                            boost::heap::compare<decreasingOrderMyType> > pq; 
```

# c# - 使用 FileIO.ReadTextAsync 从文件中读取文本时出现异常

> ID：13792518
> 
> 赞同：12
> 
> 时间：2012-12-09T22:26:47.903
> 
> 标签：c#, windows-runtime, windows-store-apps

尝试使用读取 locl 文本文件时出现以下异常

```
var text = await FileIO.ReadTextAsync(file); 
```

> 与此 oplock 关联的句柄已关闭。oplock现在坏了。（来自 HRESULT 的异常：0x80070323）

这发生在其中一个回归单元测试中，它也会不时发生在应用程序中。应用程序是 XAML + C#

任何想法可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-09T13:10:23.383

我遇到了同样的问题，这是由并发线程引起的。我试图同时在两个地方访问同一个文件，但没有意识到这一点。

尝试验证您的代码以寻找对同一文件的其他访问权限，并在读取后验证您是否正在关闭，并且不要忘记调用“等待”或在每次读取文件时使用锁定。我认为它可以解决你的问题。

# php - 求和数组PHP的问题

> ID：13792519
> 
> 赞同：0
> 
> 时间：2012-12-09T22:26:49.003
> 
> 标签：php, arrays

我正在尝试将 MySQL 数据转换为数组，然后计算该数组的总和。

```
$weight = ($product['av_id_1'])*$val; // get attribute values
$weightsub = explode(" ", $weight); // convert string to array
echo array_sum($weightsub); 
```

我得到了一个输出，但它不是我所期望的，而不是一个整数，而是它的间隔整数，如“30 40 50”。

我哪里错了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:39:02.677

```
$weightsub = explode(" ", $product['av_id_1']); // convert string to array
echo array_sum($weightsub)*$val; 
```

首先，您需要使用 提取所有数字`explode`。然后应用`array_sum`对数组中的所有数字求和，并将总和乘以`$val`.

如果这不能按预期工作，您可以通过在每个变量或结果上使用`echo`和轻松地进行一些基本调试：`print_r`

```
echo '$product[av_id_1] = <br>';
print_r($product['av_id_1']);
$weightsub = explode(" ", $product['av_id_1']); // convert string to array
echo '$weightsub = <br>';
print_r($weightsub);
echo "<br>\$val = $val<br>";
echo 'Sum = ' . array_sum($weightsub) . '<br>';
echo array_sum($weightsub)*$val; 
```

# c# - 在列表上使用 Rectangle.Intersection 进行查询

> ID：13792528
> 
> 赞同：1
> 
> 时间：2012-12-09T22:27:49.113
> 
> 标签：c#, linq

我有一个包含 Rectangle 的类，我用这些对象填充了一个列表。这是我正在尝试做的一个例子：

```
class Foo 
{ 
   Rectangle rect; 
   public Foo(Rectangle r) { rect = r; }
}

List<Foo> listFoo = new List<Foo>();
// Call the next three Rectangles 'A' 'B' and 'C'.
listFoo.Add(new Foo(new Rectangle(0, 0, 5, 5)));    // Rect 'A' intersects with B
listFoo.Add(new Foo(new Rectangle(3, 3, 5, 5)));    // Rect 'B' intersects with A & C
listFoo.Add(new Foo(new Rectangle(6, 6, 5, 5)));    // Rect 'C' intersects with B

var query = ???;

foreach (Rectangle r in query) 
{ 
    // Should give two results
    // Rectangle(3, 3, 2, 2);   A & B
    // Rectangle(6, 6, 2, 2);   B & C
} 
```

我可以编写一个使用 Rectangle.Intersect() 来返回 listFoo 中唯一交叉点列表的单个查询，而不会与 .Intersect(A,B) 和 .Intersect(B,A) 之类的内容重复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:43:33.407

```
 var q = (from f1 in listFoo
          from f2 in listFoo
          let r = Rectangle.Intersect(f1.rect,f2.rect)
          where f1 != f2 && r != Rectangle.Empty
          select r).Distinct(); 
```

# jquery - IE8 无法解析 XML

> ID：13792529
> 
> 赞同：0
> 
> 时间：2012-12-09T22:27:57.837
> 
> 标签：jquery, xml, internet-explorer-8

编辑：感谢 charlietfl，我意识到 IE < 9 将所有 XML 标记转换为大写。然而，即使有了这些知识，我也无法找到让 XML 在 IE8 中正确显示的解决方案。

我在所有优秀的浏览器 IE10 和 9 中都可以使用，但在 IE8 中没有解析/显示 xml 数据。

```
$("#Form").validate({
    submitHandler: function(form) {
        $('#prcs3').show();
        var dataString = $(form).serialize();
        $.ajax({
            type: $(form).attr('method'),
            url: form.action,
            data: dataString,
            clearForm: true,
            success: function(data) {
                $('#resultGenerate > li').remove();
                var answer = $(data).find("td:eq(3)").text();
                var message = $(data).find("td:eq(5)").html();
                var $xml = $( message );
                if (answer==="True") {
                    $('#prcs3').hide();
                    $xml.find('license').each(function(){
                        var CustomerID = $(this).find('CustomerID').text();
                        var License  = $(this).find('License').text();
                        var Log  = $(this).find('Log').text();
                        var ExpirationDate  = $(this).find('ExpirationDate').text();
                        $("#resultGenerate").show().removeClass('error').append($('<li><span class="ID">' + CustomerID + '</span><span class="L">' + License + '</span><span class="Log">' + Log + '</span><span class="Exp">' + ExpirationDate + '</span></li>'));
                    });
                } else {
                    $('#prcs3').hide();
                    $('#resultGenerate').show().html('<a class="close">X</a><ul><li>' + message + '</li></ul>');
                }
            }
        });
        return false;
    }
}); 
```

什么可能导致 IE8 不显示我返回/解析的 xml？我很感激任何建议，一如既往地谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:42:22.220

在没有看到返回响应的示例的情况下，我收集到 xml 是正在返回的 html 表中的文本。

您可能需要使用`$.parseXML()`

尝试：

```
var $xml = $( $.parseXML( message) ); 
```

API 参考：[http ://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

**编辑：**此外，低于 9 的 IE 版本会将标签转换为全部大写。你可以通过检查来解决这个问题`length`

```
if( $xml.find('LICENCES').length ){
    /* use all uppercase tagnames*/
}else{
    /* use all lowercase tagnames*/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:39:07.287

我认为问题在于`var $xml = $( message );`，因为我通过 JSlint 运行它，这是唯一与 jQuery 无关的错误。`var $xml = $(message);`修复它吗？

编辑：尝试删除`$`before `$(form).serialize();`，因为 jQuery 网站 (http://docs.jquery.com/Plugins/Validation) 有一个示例表明可能会出现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T00:58:13.717

我在这里做一个疯狂的猜测：

```
 success: function(data) {
        $('#resultGenerate > li').remove();
        var answer = $(data).find("td:eq(3)").text();
        var message = $(data).find("td:eq(5)").html();
        var $xml = $( message ); 
```

我认为你必须先`parseXML`数据。所以，

```
 success: function(data) {
        $('#resultGenerate > li').remove();
        var $data = $( $.parseXML(data) );
        var answer = $data.find("td:eq(3)").text();
        var message = $data.find("td:eq(5)").html();
        var $xml = $( message ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T07:07:43.823

我使用的是 IE10 并且遇到了同样的问题。[这里](http://forum.jquery.com/topic/jquery-ajax-doesn-t-return-xml-with-internet-explorer-10)的链接描述了我的问题。因此，简而言之，首先我检查了浏览器是否为 IE（因为其他浏览器已成功解析 xml），然后转换了我的响应字符串。希望以下代码片段对您有所帮助：

```
function getXMLData(str)
{
    var MSIE = jQuery.support.leadingWhitespace;//detects if browser is IE 
     if(MSIE)if browser is IE 
     {
      if ( ! $.isXMLDoc(str))//if str is not in XML, make it xml
       str = $.parseXML(str)
      var xmlDoc=str;
     }
     else//for other browsers, take the response string as it is
     {
      var html = XMLToString(str);//gives back string from xml string
      var xml = html;
      var xmlDoc = $.parseXML( xml );
     }

     var $xml =$( xmlDoc ),
     $title = $xml.find( "string" );//find the 'string' element from xml
     //do the rest of the processing
} 
```

# c - C Strncmp 返回部分输入

> ID：13792533
> 
> 赞同：1
> 
> 时间：2012-12-09T22:28:24.527
> 
> 标签：c, list, input, linked-list, strncmp

我目前正在运行一个链表结构，我需要找到一种方法让用户在结构中搜索某个字段。我已经这样做了，但问题是它必须是准确的。例如，如果用户输入“maggie”，它将返回结果，但如果用户输入“mag”，则不会像我想要的那样返回 Maggie 记录。

```
int counter = 0;
char search[MAX];
record_type *current = head;

printf("\n\n- - - > Search Records\n\n");
printf("\tSearch: ");
scanf("%s", search);

/* search till end of nodes */
while(current != (record_type*) NULL) {
    if(strncmp(current->name, search, MAX) == 0) {
        printf("\t%i. %s", counter, current->name);
        printf("\t%u", current->telephone);
        printf("\t%s\n", current->address);
        counter++;
    }
    current = current->next;
} 
```

有任何想法吗？我猜有一种方法可以与字符进行比较？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:30:06.883

你的问题并不完全清楚...

如果您只想返回完全匹配，请`strcmp`改用

```
if (strcmp(current->name, search) == 0) { 
```

如果要返回部分匹配，请使用`strncmp`与搜索字符串匹配的大小：

```
if (strncmp(current->name, search, strlen(search)) == 0) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:31:52.660

而不是`strncmp(current->name, search, MAX)`使用`strncmp(current->name, search, strlen(search))`或使用该`strstr`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:30:33.787

`strncmp`比较要比较的字符数。所以不要比较那么多。

首先比较字符串长度，或者只使用`strcmp()`.

# r - 将 ggplot grob 分配给具有在分配时解析所有值的变量

> ID：13792534
> 
> 赞同：2
> 
> 时间：2012-12-09T22:28:25.107
> 
> 标签：r, ggplot2

如果对象包含我希望在分配时解决的其他变量，那么将 ggplot2 grob 分配给变量的正确方法是什么。

例如：
`xpos`and`ypos`是我想要解析的值。我将 geom_text 分配给 ptext，然后我想将其添加到一些图中，比如 p1 和 p2。

```
xpos <- .2
ypos <- .7

ptext <- geom_text(aes(x = xpos, y = ypos, label = "Some Text")) 
```

我可以将 ptext 添加到另一个情节，一切都按预期工作

```
## adding ptext to a plot
p1 <- qplot(rnorm(5), rnorm(5))
p1 + ptext 
```

**但是，删除（或更改）`xpos`&`ypos`会产生不希望的结果。**

```
rm(xpos, ypos)

p2 <- qplot(rnorm(5), rnorm(5))
p2 + ptext
# Error in eval(expr, envir, enclos) : object 'xpos' not found 
```

解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:37:35.820

您应该将`xpos`and`ypos`放入数据框中。在您的示例中：

```
coords = data.frame(xpos=.2, ypos=.7)

ptext <- geom_text(data=coords, aes(x = xpos, y = ypos, label = "Some Text"))

## adding ptext to a plot
p1 <- qplot(rnorm(5), rnorm(5))
p1 + ptext   

# removing (or altering) the old coords data frame doesn't change the plot,
# because it was passed by value to geom_text
rm(coords)

p2 <- qplot(rnorm(5), rnorm(5))
p2 + ptext 
```

# c# - fnaddData 将 JSON 对象添加到 jQuery 数据表

> ID：13792536
> 
> 赞同：0
> 
> 时间：2012-12-09T22:28:37.663
> 
> 标签：c#, jquery, datatable

我只想添加这个（真正的 JSON 字符串示例）：

```
[
    {
        "Name" : "Test",
        "EmpID" : "3232",
        "Station" : "123",
        "Action" : "123"
    }
] 
```

到我的 jQuery 数据表`fnAddDate(jsonfile);`

但是当我这样做时，我得到了这个：

![图像错误](../Images/c7ba453d79cedfa1d1cdee0d9e82c92e.png)

这是 JSON 字符串的前 4 个字符。

感谢帮助！！！

# php - Javascript大文件上传器

> ID：13792538
> 
> 赞同：6
> 
> 时间：2012-12-09T22:28:43.087
> 
> 标签：php, javascript, html, file-upload

我在线复制了一个代码，将一个大文件上传到我的服务器。它基本上将大文件切成块并发送然后单独结束它们。所以第一个块成功发送到服务器，但其余块不起作用。我不确定哪个阶段导致问题，有人可以帮忙。

```
<html>
    <head>
        <title>Upload Files using XMLHttpRequest</title>
        <script type="text/javascript">

            window.BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;

            function sendRequest() {
                var blob = document.getElementById('fileToUpload').files[0];
                const BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
                const SIZE = blob.size;
                var start = 0;
                var i =0;
                var part = 0;
                while( start < SIZE ) {
                    var chunk = blob.slice(start, BYTES_PER_CHUNK);
                    //alert(chunk.size());
                    uploadFile(chunk,part);
                    //alert("here");
                    start = start + BYTES_PER_CHUNK;
                    part++;
                }
            }

            function fileSelected() {
                var file = document.getElementById('fileToUpload').files[0];
                if (file) {
                    var fileSize = 0;
                    if (file.size > 1024 * 1024)
                        fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
                    else
                        fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

                    document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
                    document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
                    document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
                }
            }

            function uploadFile(blobFile,part) {
                var file = document.getElementById('fileToUpload').files[0];  
                var fd = new FormData();
                fd.append("fileToUpload", blobFile);

                var xhr = new XMLHttpRequest();
                xhr.upload.addEventListener("progress", uploadProgress, false);
                xhr.addEventListener("load", uploadComplete, false);
                xhr.addEventListener("error", uploadFailed, false);
                xhr.addEventListener("abort", uploadCanceled, false);
                xhr.open("POST", "upload.php"+"?"+"file="+file.name+"&num=" + part);
                xhr.onload = function(e) {
                  //alert("loaded!");
                  };

                xhr.setRequestHeader('Cache-Control','no-cache');
                xhr.send(fd);
                return;
                //while(xhr.readyState!=4){}
                //alert("oen over");
            }

            function uploadProgress(evt) {
                if (evt.lengthComputable) {
                    var percentComplete = Math.round(evt.loaded * 100 / evt.total);
                    document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
                }
                else {
                    document.getElementById('progressNumber').innerHTML = 'unable to compute';
                }
            }

            function uploadComplete(evt) {
                /* This event is raised when the server send back a response */
                alert(evt.target.responseText);
            }

            function uploadFailed(evt) {
                alert("There was an error attempting to upload the file.");
            }

            function uploadCanceled(evt) {
                xhr.abort();
                xhr = null;
                //alert("The upload has been canceled by the user or the browser dropped the connection.");
            }
        </script>
    </head>
    <body>
        <form id="form1" enctype="multipart/form-data" method="post" action="upload.php">
            <div class="row">
                <label for="fileToUpload">Select a File to Upload</label><br />
                <input type="file" name="fileToUpload" id="fileToUpload" onchange="fileSelected();"/>
                <input type="button" value="cancel"  onClick="uploadCanceled();"/>
            </div>
            <div id="fileName"></div>
            <div id="fileSize"></div>
            <div id="fileType"></div>
            <div class="row">
                <input type="button" onclick="sendRequest();" value="Upload" />
            </div>
            <div id="progressNumber"></div>
        </form>
    </body>
</html> 
```

服务器上的代码

```
$target_path = "uploads/";
$tmp_name = $_FILES['fileToUpload']['tmp_name'];
$size = $_FILES['fileToUpload']['size'];
$name = $_FILES['fileToUpload']['name'];
$sports = $_GET['file'];
$part =(string)$_GET['num'];
//$part = split("/\=/", $part);
$target_file = $target_path .$part. $sports;

// Open temp file
$out = fopen($target_file, "wb");

if ( $out ) {
    // Read binary input stream and append it to temp file
    $in = fopen($tmp_name, "rb");
    if ( $in ) {
        while ( $buff = fread( $in, 1048576 ) ) {
            fwrite($out, $buff);
        }   
    }
    fclose($in);
    fclose($out);
}

  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:41:40.950

上面的代码有问题。您正在像这样在while循环中调用uploadFile ..

```
 while( start < SIZE ) {
                var chunk = blob.slice(start, BYTES_PER_CHUNK);
                //alert(chunk.size());
                uploadFile(chunk,part);
                //alert("here");
                start = start + BYTES_PER_CHUNK;
                part++;
            } 
```

您不是在等待块加载成功！您继续上传块直到结束。您可以等待一个块成功上传，然后加载下一个块。

我觉得你可以尝试以下..

```
 var blob;
     var start;
     var part;
     var chunk;
     const SIZE = blob.size;
     var xhr;
     function sendRequest() {
            blob = document.getElementById('fileToUpload').files[0];
            const BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
            const SIZE = blob.size;
            start = 0;                
            part = 0;
            xhr = new XMLHttpRequest();
            xhr.upload.addEventListener("progress", uploadProgress, false);
            xhr.addEventListener("load", uploadComplete, false);
            xhr.addEventListener("error", uploadFailed, false);
            xhr.addEventListener("abort", uploadCanceled, false);
            xhr.open("POST", "upload.php"+"?"+"file="+file.name+"&num=" + part);
            xhr.onload = function(e) {
              //alert("loaded!");
              };

            xhr.setRequestHeader('Cache-Control','no-cache');
            chunk = blob.slice(start, BYTES_PER_CHUNK);
            //alert(chunk.size());
            uploadFile(chunk,part);
            //alert("here");
            start = start + BYTES_PER_CHUNK;
            part++;                
        }
function uploadFile(blobFile,part) {
            var file = document.getElementById('fileToUpload').files[0];  
            var fd = new FormData();
            fd.append("fileToUpload", blobFile);

            xhr.send(fd);
            return;
            //while(xhr.readyState!=4){}
            //alert("oen over");
        }

function uploadComplete(evt) {
            /* This event is raised when the server send back a response */
            alert(evt.target.responseText);
            while( start < SIZE ) {
                chunk = blob.slice(start, BYTES_PER_CHUNK);
                //alert(chunk.size());
                uploadFile(chunk,part);
                //alert("here");
                start = start + BYTES_PER_CHUNK;
                part++;
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-18T03:24:39.513

此处的 .JS 脚本，成功地以块的形式上传 blob。

```
window.BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
        var blob; var blob_1;
        var start; var end;
        var num; var part;
        var SIZE; var size; var fileSize = 0;
        var BYTES_PER_CHUNK; var NUM_CHUNKS; var chunk; var chunk_size = 0;
        var xhr; var counter = 0;

        function sendRequest() {

            blob = document.getElementById('file').files[0];
            // blob = new Blob(blob_1, {type: 'video/mp4'}); 
                const BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
                const SIZE = blob.size;
                var i = 0;
                var start = 0;
                var end = BYTES_PER_CHUNK;
                var part = 0;
                var NUM_CHUNKS = Math.max(Math.ceil(SIZE / BYTES_PER_CHUNK), 1);

                while( start < SIZE ) {
                    var chunk = blob.slice(start, end);
                    uploadFile(chunk,part);
                    start = end;
                    end = start + BYTES_PER_CHUNK;
                    part++; counter++;
                }
        };

        function fileSelected() {
            var file = document.getElementById('file').files[0];
            if (file) {
                if (file.size > 1024 * 1024)
                    fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
                else
                    fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

                document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
                document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
                document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
            }

        };

        function uploadFile(blobFile,part) {

            var file = document.getElementById('file').files[0];  
            var fd = new FormData();
            fd.append("file", blobFile);  fd.append("chunk_num", NUM_CHUNKS);  
            var xhr = new XMLHttpRequest();
            xhr.upload.addEventListener("progress", uploadProgress, false);

            xhr.open("POST", "uploadhandler.php"+"?"+"filen="+file.name+"&num="+part+"&counter="+counter);

            xhr.addEventListener("load", uploadComplete, false);
            xhr.addEventListener("error", uploadFailed, false);
            xhr.addEventListener("abort", uploadCanceled, false);

            xhr.onload = function(e) {
              //alert("loaded!");
              };

            xhr.setRequestHeader('Cache-Control','no-cache');
            xhr.send(fd);
            return;
        }

        function uploadProgress(evt) {
            if (evt.lengthComputable) {
                var percentComplete = Math.round(evt.loaded * 100 / evt.total);
                document.getElementById('progressNumber').innerHTML = percentComplete.toString() + '%';
                document.getElementById('progressBar').style.backgroundColor="teal";                
            }else {
                document.getElementById('progressNumber').innerHTML = 'unable to compute';
            }
        }

    function uploadComplete(evt) {

            if( start < SIZE ) {
                chunk = blob.slice(start, end);

                uploadFile(chunk,part);

                start = end;
                end = start + BYTES_PER_CHUNK;
                part = part + 1;

            }
            document.getElementById("msgStatus").innerHTML = evt.target.responseText;
            //alert("complete");

        }

        function uploadFailed(evt) {
            alert("There was an error attempting to upload the file.");
        }

        function uploadCanceled(evt) {
            xhr.abort();
            xhr = null;
            //alert("The upload has been canceled by the user or the browser dropped the connection.");
        } 
```

这里的 .PHP 代码将每个块存储在“uploads/”文件夹中

```
session_start();

    $counter = 1;
    $_SESSION['counter'] = ($_REQUEST['num'] + 1);

  // changing the upload limits
   ini_set('upload_max_filesize', '100M');
   ini_set('post_max_size', '100M');
   ini_set('max_input_time', 300);
   ini_set('max_execution_time', 300);

    $filePath = "uploads/";
    if (!file_exists($filePath)) {
        if (!mkdir($filePath, 0777, true)) {
            echo "Failed to create $filePath";
        }
    }

    // $newfile = $newfile ."_". $_SESSION['counter'] .".mp4";
    $target_path = 'uploads/';
    $tmp_name = $_FILES['file']['tmp_name'];
    $filename = $_FILES['file']['name'];
    $newfile = substr(md5($_FILES['file']['name']), 0,10);
    $target_file = $target_path.$newfile;
    move_uploaded_file($tmp_name, $target_file.$_SESSION['counter'] ); 
```

但是以下 .PHP 代码不会合并这些块。

我真的不明白为什么它不适合阅读和写作...如果您有任何方法可以将这些块合并到一个完整的视频文件中，请在此处同样发布您的回复。

```
// count number of uploaded chunks
    $chunksUploaded = 0;
    for ( $i = 1; $i <= $_SESSION['counter']; $i++ ) {
        if ( file_exists( $target_file.$i ) ) {
             $chunksUploaded++;
        }
    }

    // if ($chunksUploaded === $num_chunks) {
    if ($chunksUploaded === $_SESSION['counter']) {

        // here you can reassemble chunks together 
        // for ($i = 1; $i <= $num_chunks; $i++) {
        for ($i = 1; $i <= $_SESSION['counter']; $i++) {
            // echo $i ."\n";
          $file = fopen($target_file.$i, 'rb');
          $buff = fread($file, 1048576);
          fclose($file);

          $final = fopen($target_file, 'ab');
          $write = fwrite($final, $buff);
          fclose($final);

          unlink($target_file.$i);
        }

    } 
```

希望您喜欢并感谢您的贡献。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-12-16T17:46:23.923

其余未上传的原因是您的切片循环不正确。将其更改为以下内容，您应该是金色的。

```
var start = 0;
var end = BYTES_PER_CHUNK;
var part = 0;
while( start < SIZE ) {
    var chunk = blob.slice(start, end);
    uploadFile(chunk,part);
    start = end;
    end = start + BYTES_PER_CHUNK;
    part++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-05T10:37:13.903

我找到了正确的 javascript 代码：（PHP 工作正常）

```
window.BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
var blob;
var start;
var end;
var part;
var SIZE;
var BYTES_PER_CHUNK;
var xhr;
var chunk;

function sendRequest() {

    blob = document.getElementById('fileToUpload').files[0];
        BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
        SIZE = blob.size;
        start = 0;                
        part = 0;
        end = BYTES_PER_CHUNK;

    chunk = blob.slice(start, end);
    uploadFile(chunk,part);
    start = end;
    end = start + BYTES_PER_CHUNK;
    part = part + 1;

};
//------------------------------------------------------------------------------------------------------------------------------------

function fileSelected() {
    var file = document.getElementById('fileToUpload').files[0];
            if (file) {
                var fileSize = 0;
                if (file.size > 1024 * 1024)
                    fileSize = (Math.round(file.size * 100 / (1024 * 1024)) / 100).toString() + 'MB';
                else
                    fileSize = (Math.round(file.size * 100 / 1024) / 100).toString() + 'KB';

                document.getElementById('fileName').innerHTML = 'Name: ' + file.name;
                document.getElementById('fileSize').innerHTML = 'Size: ' + fileSize;
                document.getElementById('fileType').innerHTML = 'Type: ' + file.type;
            }
};
//------------------------------------------------------------------------------------------------------------------------------------

function uploadFile(blobFile,part) {
            var file = document.getElementById('fileToUpload').files[0];  
            var fd = new FormData();
            fd.append("fileToUpload", blobFile);

            var xhr = new XMLHttpRequest();
            xhr.upload.addEventListener("progress", uploadProgress, false);
            xhr.addEventListener("load", uploadComplete, false);
            xhr.addEventListener("error", uploadFailed, false);
            xhr.addEventListener("abort", uploadCanceled, false);

            var php_file =  "/upload.php"

            xhr.open("POST", php_file +"?"+"file="+file.name+"&num=" + parseInt(part) );
            xhr.onload = function(e) {
              //alert("loaded!");
              };

            xhr.setRequestHeader('Cache-Control','no-cache');
            xhr.send(fd);
            return;

};
//------------------------------------------------------------------------------------------------------------------------------------

function uploadProgress(evt) {
            if (evt.lengthComputable) {
                var percentComplete = Math.round(evt.loaded * 100 / evt.total);
                document.getElementById('progressNumber').innerHTML = percentComplete.toString() + "%";
            }
            else {
                document.getElementById('progressNumber').innerHTML = 'unable to compute';
            }
    };
//------------------------------------------------------------------------------------------------------------------------------------

function uploadComplete(evt) {
            // This event is raised when the server send back a response 
            //alert(evt.target.responseText);

    if( start < SIZE ) {
            chunk = blob.slice(start, end);

            uploadFile(chunk,part);

            start = end;
            end = start + BYTES_PER_CHUNK;
            part = part + 1;
            }
};
//------------------------------------------------------------------------------------------------------------------------------------

function uploadFailed(evt) {
            alert("There was an error attempting to upload the file.");
};
//------------------------------------------------------------------------------------------------------------------------------------

function uploadCanceled(evt) {
            xhr.abort();
            xhr = null;
            alert("The upload has been canceled by the user or the browser dropped the connection.");
};
//------------------------------------------------------------------------------------------------------------------------------------ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-03T16:08:15.183

改变这个：

```
 var blob;
    var start;
    var end;
    var part;
    var SIZE;
    var BYTES_PER_CHUNK;
    var xhr;

 function sendRequest() {

         blob = document.getElementById('fileToUpload').files[0];
      //  var file = document.getElementById('fileToUpload').files[0];

         BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
         SIZE = blob.size;
        start = 0;                
        part = 0;
        end = BYTES_PER_CHUNK;

        while( start < SIZE ) {
                var chunk = blob.slice(start, end);
                //alert(chunk.size());
                 alert(start + ' - ' + end );
                uploadFile(chunk,part);
                //alert("here");

                 start = end;
                 end = start + BYTES_PER_CHUNK;
                part++;
            }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-27T08:22:57.013

我认为问题在于 xhr.onload 或 fileareader.onload 是异步方法，因此您不能在作为同步事件的 for/while 循环中使用它们。如果你想这样做，你必须使用递归方法并确保你正确地流式传输数据。这是我的答案，我在本地对其进行了测试，它适用于任何大文件。我使用了 fetch 而不是 XMLHTTPRequest。我还将等待服务器以“收到文件”文本进行响应，如果在 numberOfTries（我考虑了 5 次）之后我没有收到“收到文件”，那么我将中断递归。我想知道是否有人测试过其他方法。请让我知道任何更好的解决方案。

```
window.BlobBuilder = window.MozBlobBuilder || window.WebKitBlobBuilder || window.BlobBuilder;
const btnUpload= document.getElementById('button1')
var blob = document.getElementById('fileToUpload').files[0];
const BYTES_PER_CHUNK = 1048576; // 1MB chunk sizes.
const SIZE = blob.size;
const CHUNK_COUNT= parseInt(SIZE/BYTES_PER_CHUNK)
var start = 0;
var i =0;
var part = 0;
const numberOfTries=5

function uploadFile(start,chunkCount,CHUNK_SIZE,theFile,NumberofTry){
 // if you are done with recursive process then break
    if (start > chunkCount+1){
        fetch('/yourEndPoint',{
            // you don't need to send the body just header is enough to let the endpoint know that can close the stream pipeline 
            //"body":ev.target.result,
            "method":"POST",
            "headers":{
                "content-type":"application/octet-stream",
                "finished-stream":true
            }
        })
        return
    }

    var tmpBlob = theFile.slice(start*CHUNK_SIZE,(start+1)*CHUNK_SIZE)
    var newReader = new FileReader()
    newReader.onload = async ev=>{
        let fileName= start+'__'+ Math.random()*1000+'__'+theFile.name
         const serverResp= await fetch('/yourEndPoint',{
            "body":ev.target.result,
            "method":"POST",
            "headers":{
                "content-type":"application/octet-stream",
                "file-name":fileName
            }
        })
        let respText = await serverResp.text()
        if (respText!=='file is received' && NumberofTry<5){
            console.log('retry the upload again')
            uploadFile(start,chunkCount,CHUNK_SIZE,theFile,NumberofTry+1)
        }else if (respText!=='file is received' && NumberofTry===5){
            console.log('upload can not be complete...')
            return
        }

        uploadFile(start+1,chunkCount,CHUNK_SIZE,theFile,NumberofTry)

    }
    newReader.readAsArrayBuffer(tmpBlob)
}

btnUpload.addEventListener("click",()=>{
    uploadFile(i,CHUNK_COUNT,BYTES_PER_CHUNK,blob,numberOfTries)
}) 
```

# javascript - jQuery没有触发单选按钮更改

> ID：13792547
> 
> 赞同：2
> 
> 时间：2012-12-09T22:30:24.610
> 
> 标签：javascript, jquery, javascript-events

很抱歉打扰，但我是 jquery 的新手并试图解决这个问题。先谢谢了。

我有一个网页，里面有几组基于几个计算机组件的单选按钮。我的页面顶部有一些图像会触发某些单选按钮被按下。我为此使用的javascript是：

```
$( document ).ready( function() {
$('img#gaming').click(function () {
    $('.small_image').attr("src","../img/GamingPlain.png");
    $('input:radio[name=chasis]')[2].checked = true;
    $('input:radio[name=cpu]')[1].checked = true;
    $('input:radio[name=mobo]')[1].checked = true;
    $('input:radio[name=ram]')[1].checked = true;
    $('input:radio[name=gpu]')[1].checked = true;
    $('input:radio[name=psu]')[1].checked = true;
    $('input:radio[name=hdd]')[2].checked = true;
});
.
.
.
}); 
```

这可以正常工作。我还必须根据选择的单选按钮更改页面的一部分。它看起来像这样：

```
$( document ).ready( function() {
$('input[name=chasis]').change(function()  {
    var txt = $(this).parent().text();
    var price = txt.match(/(\$)([\d]+)/)
    $('span#chasisprice').text(price[0]);
});

$('input[name=cpu]').change(function()  {
    var txt = $(this).parent().text();
    var price = txt.match(/(\$)([0-9]+)/)
    $('span#cpuprice').text(price[0]);
});
.
.
.

}); 
```

这也可以正常工作。但是，当我使用第一段代码（用户单击“img#gaming”）选择自动选择单个单选按钮时，第二段代码不会触发（也就是未注册更改）。

是否有其他形式的 .change 可以注册新选择的单选按钮？或选择将注册更改的单选按钮的不同方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:32:00.650

您可以使用以下方式触发更改事件`.trigger()`：

```
...
$('input:radio[name=psu]')[1].checked = true;
$('input:radio[name=hdd]')[2].checked = true;

$('input:radio').trigger('change'); 
```

另外，不要使用`input:radio`. `input:radio`不是 CSS 选择器，不会被 支持`document.querySelector`，因此它的运行速度会比`input[type="radio"]`.

我建议你重新考虑你的布局。您不必每次都重复相同的代码块，只需进行微小的更改。

# excel - 经过天数小时分钟不包括周末和节假日时间

> ID：13792548
> 
> 赞同：1
> 
> 时间：2012-12-09T22:30:27.000
> 
> 标签：excel, excel-formula

这听起来很简单，但我一直在努力寻找解决方案。在我秃顶之前的任何帮助都会很棒。

我需要一个能够

*   计算两个日期\时间值（例如`05/12/2012 5:30 PM`，说）之间的持续时间（天、小时、分钟`07/12/2012 5:45 PM`）；
*   周末和节假日除外。

我希望公式的结果如下所示“例如`2 Days 0 Hrs and 15 Mins`”。

谢谢

链接到[示例工作簿](http://www.excelforum.com/attachment.php?attachmentid=199111&d=1355089580)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T05:38:09.107

您可以使用`NETWORKDAYS`and`NETWORKDAYS.INTL`来实现这一点

需要进行一些操作，因为这些返回整日*净值*：

*   使用这些函数计算非工作日数，然后减去开始日期和结束日期之间的差值

    ```
    =E3-D3-(NETWORKDAYS.INTL(D3,E3,"0000000")-NETWORKDAYS(D3,E3,$A$16:$A$24)) 
    ```

这将返回工作日差异，其中 1.0 = 1 天

*   `NETWORKDAYS.INTL(D3,E3,"0000000")`计算两个日期之间的全天（无周末，无节假日）

*   `NETWORKDAYS(D3,E3,"0000000",$A$16:$A$24)`计算两个日期之间的整个工作日天数（周六/周日周末、假期，根据您在 中的列表`$A$16:$A$24`）

*   两个日期之间的非工作日差异。

*   `E3-D3`是开始和结束日期/时间之间的时间（1.0 = 1 天）

* * *

使用自定义数字格式以您需要的格式显示您的结果

```
d "Days" h "Hours" mm "Mins" 
```

注意：此格式不适用于负值，当结束日期早于开始日期时，您需要另一种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:45:10.427

下面的公式就像一种享受，没有额外的格式或操作。

为了使它更稳定，我将英国 2012/13 的所有假期日期都转换为“Excel 序列号”格式，并将它们放在一个数组括号中。

将公式中的“D5”替换为课程或指标“结束日期”的单元格引用，将“E5”替换为“完成日期”的课程或指标。

```
=IF(E5<D5,"-"&TEXT(D5-E5,"h:mm"),NETWORKDAYS(D5,E5,({40910,41005,41008,41036,41064,41065,41148,41268,41269,41275,41362,41365,41400,41421,41512,41633,41634}))-1-(MOD(E5,1)<MOD(D5,1))&" days "&TEXT(E5-D5,"h:mm")) 
```

# python - 字典赋值“int() 的文字无效”错误

> ID：13792550
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:30:38.230
> 
> 标签：python, python-3.x

我正在尝试为字典中的键分配一个新值。但是得到“ValueError：int（）的无效文字，以10为基数：”这就是我所做的。

```
balance = {'beer':5, 'toast':2}
item = input("what did you eat?: ")
price = input("how much?: ")
if item not in balance:
   balance[item] = int(price)
else:
   balance[item] = balance[item] + int(price) 
```

我很困惑，因为我可以在 python shell 中做 balance['beer'] = 5，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:32:36.797

什么是价值`price`

它可能是一个字符串？

具有无法转换为的值[`int`](http://docs.python.org/3.2/library/functions.html#int)将导致此

```
>>> test = 'test'
>>> int(test)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'test' 
```

还请确保发布您的完整回溯，因为 python 在您的问题中提供给您，而不仅仅是错误字符串

这是了解数据验证的好机会，因为您可以看到您的程序需要一个整数。您可以自己处理这个问题，向用户显示您自己的消息，或者允许程序出错（假设您的程序的客户端会理解错误）

数据验证没有捷径

```
try:
  price = int(input("how much?: "))
catch ValueError:
  print('Please enter an integer') 
```

或类似的东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T22:33:37.517

再次阅读错误信息：

```
ValueError: invalid literal for int() with base 10 
```

这意味着，您向 function 传递了一个无效参数`int()`，即一个不代表有效十进制数的字符串。

检查什么`price`名称。由于它是从用户那里获取的，因此您的程序必须准备好处理垃圾的情况。我通常会创建一个函数来处理样板：

```
def input_int(prompt):
    while True:
        data = input(prompt)
        try:
            return int(data)
        except ValueError:
            print("That's not a valid number. Try again.") 
```

如果在您的程序中有意义，您还可以添加一些转义条件。

# maven - 当我尝试清理我的项目时，为什么 maven 会导致错误？

> ID：13792551
> 
> 赞同：0
> 
> 时间：2012-12-09T22:30:51.160
> 
> 标签：maven, spring-mvc, sts-springsourcetoolsuite

我正在使用 STS、Spring 3.1 RC 和 Maven。我正在关注本教程： http: [//manueljordan.wordpress.com/2011/12/12/creating-a-spring-web-mvc-project-with-springsource-tool-suite/](http://manueljordan.wordpress.com/2011/12/12/creating-a-spring-web-mvc-project-with-springsource-tool-suite/)
我正在尝试将我的项目清理为在教程中，在修改 Spring 版本并添加存储库之后。我收到此错误：

```
 Errors occurred during the build.
    Errors running builder 'Maven Project Builder' on project 'PracticeApp'.
    Could not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\Joe\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
    Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\Joe\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
    Could not calculate build plan: Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\Joe\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature)
    Failed to parse plugin descriptor for org.apache.maven.plugins:maven-war-plugin:2.1.1 (C:\Users\Joe\.m2\repository\org\apache\maven\plugins\maven-war-plugin\2.1.1\maven-war-plugin-2.1.1.jar): invalid LOC header (bad signature) 
```

这里出了什么问题？我试图重新启动教程并仔细遵循它，但没有任何改变。我会很感激这里的一点帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:51:24.257

您的 pom 文件似乎已损坏（缺少标签、拼写检查等）。您的错误片段提到战争插件配置错误。尝试解决这个问题。如果您使用 eclipse 或带有 maven 插件的 ide 会更容易，它可以告诉您 pom 的哪个部分不正确，有时也建议正确的解决方案。

# google-chrome - 排除 Glob 在 Chrome 扩展程序中不起作用？

> ID：13792552
> 
> 赞同：3
> 
> 时间：2012-12-09T22:30:53.377
> 
> 标签：google-chrome, google-chrome-extension, youtube

所以我正在编写自己的 chrome 扩展程序，并且我有以下 content_scripts：

```
"content_scripts": [{
    "matches": ["*://*.youtube.com/*"],
    "exclude_globs": ["*user*"],
    "css": ["youtube.css"]
}] 
```

如您所见，它在 youtube 上运行。然而，它不应该在 youtube.com/user/ 上运行，这就是我有一个 exclude_globs 字段的原因。但是，它不起作用，并且在查看用户频道时仍然运行。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:34:28.333

这是 Chrome 中的一个已知[错误](https://code.google.com/p/chromium/issues/detail?id=100106)，作为使用[insertCSS的解决方法](https://developer.chrome.com/extensions/tabs.html#method-insertCSS)

**前任：**

以下代码`background.js`将执行与中相同的工作`manifest.json`

```
//Use chrome.tabs.onUpdated.addListener(function(integer tabId, object changeInfo, Tab tab) {...}); as applicable to ensure it works on every page     
chrome.browserAction.onClicked.addListener(function (tab) {
        chrome.tabs.insertCSS(null, {
            code: "document.body.bgColor='red'",
            "all_frames": true
        });
    }); 
```

或者

```
//Use chrome.tabs.onUpdated.addListener(function(integer tabId, object changeInfo, Tab tab) {...}); as applicable to ensure it works on every page
 chrome.browserAction.onClicked.addListener(function (tab) {
    chrome.tabs.insertCSS(null, {
        file: {file:"content.css"},
        "all_frames": true
    });
}); 
```

确保您在清单中有足够的权限

```
/* in manifest.json */
"permissions": [
  "tabs", "http://*/*"
], 
```

**参考**

a)[插入CSS](https://developer.chrome.com/extensions/tabs.html#method-insertCSS)

b)[程序化注入](https://developer.chrome.com/extensions/content_scripts.html#pi)

希望这可以帮助。

# google-chrome-devtools - 在 Chrome 开发者工具中编写 JavaScript

> ID：13792553
> 
> 赞同：28
> 
> 时间：2012-12-09T22:31:21.523
> 
> 标签：google-chrome-devtools

在 Firebug 中，我可以在控制台选项卡中键入自己的 JavaScript 并执行它。有没有办法在 Chrome 开发者工具中输入 JavaScript 并执行它？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-10T08:30:55.480

1.  转到`chrome://flags/`，启用“启用开发人员工具实验”标志并重新启动 Chrome（或使用`--enable-devtools-experiments`命令行标志启动它。）
2.  打开 DevTools，转到`Settings`对话框，切换到`Experiments`选项卡。
3.  启用“Snippets support”实验，关闭并重新打开 DevTools。
4.  转到`Sources`面板。在左侧导航器侧边栏中，切换到`Snippets`选项卡。
5.  右键单击此选项卡中的 [empty] 树，选择`New`上下文菜单项。
6.  为新代码段指定您喜欢的任何名称，然后键入代码段正文。
7.  完成后，单击状态栏中的`Run`( `>`) 按钮以执行代码段正文。您可以在片段中设置断点并将它们作为普通脚本进行调试。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-03-04T05:30:13.937

第 1 步：打开 Google chrome 开发工具 [**按 f12** ]

第 2 步：点击**来源**选项卡

第 3 步：在左侧面板上，单击**Snippets**选项卡（可能隐藏，如果是，请单击**>>**会出现）

第 4 步：要创建新片段，请单击**+ 新片段**或在导航器中右键单击，然后选择**新建**

第 5 步：将您的代码开发到中间窗格中并保存。

第 6 步：要运行 Snippet，有三种方式

```
 A: Ctrl + Enter

       B: Click on Run button [ Into Right-side panel, Top-Left button ]

       C: Right-click on the snippet filename (in the pane on the left that lists
          all your snippets) and select Run. 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-06-03T09:48:24.650

**最近使用的 Chrome** 使用 Chrome 50，只需打开“控制台”选项卡并开始在控制台底部输入和执行代码。

向上箭头，回忆代码，ctrl-enter 给你一个新行：

[![在此处输入图像描述](../Images/37ac09b7a081ac825b04b71b2076cf58.png)](https://i.stack.imgur.com/xY9mY.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T22:53:46.360

您无法调试 Javascript，但您可以在 chrome 检查器的[REPL中执行它（包括 jquery）。](http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)

1.  打开检查器
2.  单击左下角的 3 行按钮 - 它的工具提示是“显示控制台”
3.  输入你的 javascript 然后按回车

请注意，您通常必须转到 Sources 选项卡并单击“暂停脚本执行”按钮才能对您的 javascript 进行评估。

# php - Heroku 的 Windows 工具带和 LD_LIBRARY_PATH

> ID：13792556
> 
> 赞同：2
> 
> 时间：2012-12-09T22:31:37.850
> 
> 标签：php, heroku, command-line-interface

我正在 Heroku 上部署一个 PHP 应用程序，我需要使用 CLI 运行一些任务。为此，我必须使用此命令设置 LD_LIBRARY_PATH 环境变量： `heroku config:add LD_LIBRARY_PATH=/app/php/ext:/app/apache/lib` 但每次我这样做时，工具带都会覆盖命令并且变量指向`C:\Program Files (x86)\Git\app\php\ext;C:\Program Files (x86)\Git\app\apache\lib`. 显然，这并不好。有谁知道如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:08:11.733

5天过去了，我仍然没有答案。调度程序使用 CLI 接口，因此我可以使用以下解决方法：

> 导出 LD_LIBRARY_PATH=/app/php/ext:/app/apache/lib && ~/bin/php ~/www/index.php cron

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T01:42:19.743

这实际上不是 Heroku 工具带的问题，它是[msys 记录的行为](http://www.mingw.org/wiki/Posix_path_conversion)（我假设您在 msysgit shell 中运行它）。您可以在不同的 shell（例如 Powershell）中运行命令，也可以在路径的开头使用“//”，如下所示：

```
heroku config:add LD_LIBRARY_PATH=//app/php/ext://app/apache/lib 
```

在 Linux 上使用该路径时，这不会导致问题。

# javascript - 将 data-mini=true 属性附加到动态创建的元素

> ID：13792559
> 
> 赞同：0
> 
> 时间：2012-12-09T22:31:53.750
> 
> 标签：javascript, jquery, jquery-mobile

我有以下代码：

```
$('<td>').append($('<input>').attr({ type: 'text', readonly: 'readonly', value: currentSet.weight })); 
```

稍后，我将其附加并应用样式：

```
.trigger('create'); 
```

代码工作得很好。但是，我也试图使该输入显示为 mini 的 jquery-mobile 样式（即，就好像附加`<input>`了属性一样）。`data-mini="true"`我无法成功地做到这一点。我尝试了以下方法：

```
$('<td>').append($('<input>').data('data-mini', 'true').attr({ type: 'text', readonly: 'readonly', value: currentSet.weight }));
$('<td>').append($('<input>').attr({ type: 'text', data-mini: 'true', readonly: 'readonly', value: currentSet.weight })); 
```

上面的两行导致文件中的任何 javascript 都不会被执行。我还尝试执行以下操作，其中包含我正在创建`.dynamicRow`的 a ：`<tr>``<td>`

```
$('.dynamicRow').find('<input>').data('data-mini', 'true'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T22:34:32.993

`data-`使用时不应该加上前缀`.data()`；

尝试这个;

```
$('<td>').append($('<input>').data('mini', true).attr({ type: 'text', readonly: 'readonly', value: currentSet.weight })); 
```

# assembly - ARM数字转换程序

> ID：13792564
> 
> 赞同：0
> 
> 时间：2012-12-09T22:32:26.483
> 
> 标签：assembly, arm, ieee

我正在尝试编写一个程序，将数字从 ieee 转换为 TNS（大端），反之亦然。一般来说，我对 ARM 和汇编很陌生。我没有收到错误，它只是没有按预期工作，如果有人可以查看它，我将不胜感激。每一行都有注释，这里实际讨论的子程序是“unpack ieee”程序，它没有按预期工作，我不明白为什么。编辑：IEEE 和 TNS 号码有 3 个部分，我正在尝试使用掩码“抓取”或分离这 3 个部分。解包过程使用掩码将每个部分放入单独的寄存器中，以便我可以操作每个部分以进行转换。目前我正在尝试通过调用它来确认解包过程是否有效，然后打印寄存器。*结束编辑*我还没有编写转换例程，但是如果您愿意，我可以发布一个伪代码算法。如果您还有其他想知道的，请告诉我。编码：

```
AREA Conversion, CODE
SWI_WriteC  EQU &0          ;output character in r0 
SWI_WriteL  EQU &2          ;output String in r0
SWI_Exit    EQU &11         ;finish program
    ENTRY

    ADR r0, STRING  ;load string
    SWI SWI_WriteL  ;print string
    LDR r1, IEEE    ;load IEEE num into r0
    BL  Print       ;print number
    BL  UnpackIEEE  ;call UnpackIEEE subroutine
    ADR r1, r4      ;
    BL  Print
    SWI     SWI_Exit    ;finish

UnpackIEEE
    LDR r1, SMASK   ;load the sign bit mask into r1 
    LDR r2, EMASK   ;load the exponent mask into r2
    LDR r3, GMASK   ;load the significand mask into r3
    AND r4, r0, r1  ;apply sign mask to IEEE and save into r4
    AND r5, r0, r2  ;apply exponent mask to IEEE and save into r5
    AND r6, r0, r3  ;apply significand mask to IEEE and save into r6
    MOV     pc, r14     ;return

ConvToTNS

Print   MOV r2,#8       ;count of nibbles = 8
LOOP    MOV r0,r1,LSR #28   ;get top nibble
    CMP     r0, #9      ;hexanumber 0-9 or A-F
    ADDGT   r0,r0, #"A"-10  ;ASCII alphabetic
    ADDLE   r0,r0, #"0" ;ASCII numeric
    SWI     SWI_WriteC  ;print character
    MOV r1,r1,LSL #4    ;shift left one nibble
    SUBS    r2,r2, #1   ;decrement nibble count
    BNE LOOP        ;if more nibbles,loop back
    MOV     pc, r14     ;return

IEEE    DCD 0x40280000  ;2.75 or 40,280,000
TNS     DCD 0x28000101  ;2.75 or 28,000,101
SMASK   DCD 0x80000000  ;Sign bit mask
EMASK   DCD 0x7F800000  ;Exponent mask
GMASK   DCD     0x007FFFFF  ;Significand mask
STRING  DCB "HI THERE",0
    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:36:43.790

我想我知道你想要达到的目标。

我编写了一个使用十进制数 15.75 的程序。
此编号以 IEEE754 格式存储。
它首先被转换为 TNS 格式，转换后的数字被打印到控制台。然后将数字转换回 IEEE745 格式。转换后的数字会打印到控制台，然后程序退出。

该程序是为 ARM7 编写的。

如果听起来这是您想要实现的目标，请查看代码：

```
ENTRY
        LDR r0, IEEE        ; Load IEEE formatted # into r0
        BL  ieeetotns       ; Branch to IEEE to TNS conversion subroutine
        BL  Print           ; Branch to print number to console
        BL  tnstoieee       ; Branch to TNS to IEEE conversion subroutine
        BL  Print           ; Branch to print number to console
        SWI     SWI_Exit    ; Exit Program

        ; Load IEEE Masks into registers
ieeetotns   LDR r1, SIGNMASK        ; Load sign mask into r1
            LDR r2, IEEEEXPMASK     ; Load IEEE exponent mask into r2
            LDR r3, IEEESIGMASK     ; Load IEEE significand mask into r3

            ; Convert from IEEE to TNS
            AND r4, r0, r1          ; unpack sign bit, store in R4
            AND r5, r2, r0          ; initial unpack of exponent, store in r5
            MOV r5, r5, LSR #23     ; shift exponent right 23 bits  
            ADD r5, r5, #129        ; add 129(10) to exponent to correct excess encoding for TNS
            AND r6, r3, r0          ; initial unpack of significand, store in r6
            ADD r6, r7, r6, LSL #8  ; shift significand left 8 bits, kill off LSB
            ORR r0, r4, r5          ; pack sign and exponent
            ORR r0, r0, r6          ; pack significand with sign and exponent, 
                                    ; r0 now holds IEEE to TNS converted word
            MOV PC, LR              ; Return to main subroutine 

        ; Load TNS Masks
tnstoieee   LDR r1, SIGNMASK        ; Load sign mask into r1
            LDR r2, TNSSIGMASK      ; Load TNS Significand mask into r2
            LDR r3, TNSEXPMASK      ; Load TNS Exponent mask into r3

        ; Convert back to IEEE
            AND r4, r0, r1          ; unpack sign bit
            AND r5, r2, r0          ; initial unpack of significand, store in r5
            MOV r5, r5, LSR #8      ; Shift significand right 8 bits
            AND r6, r3, r0          ; Initial unpack of exponent, store in r6
            SUB r6, r6, #129        ; Subtract 129 to correct excess encoding
            ADD r6, r7, r6, LSL #23 ; Shift exponent left 23 bits

        ; Pack the converted number into r0
            ORR r0, r4, r5          ; Pack sign and significand
            ORR r0, r0, r6          ; Pack exponent with sign and significand, 
                                    ; r0 now holds TNS to IEEE converted word
            MOV PC, LR              ; Return to main subroutine

Print       MOV r2, #8              ; Count of nibbles = 8
            MOV r1, r0              ; Move number to r1
            MOV r3, r0              ; Store converted number in r3 for later
LOOP        MOV r0, r1, LSR #28     ; Get top nibble
            CMP r0, #9              ; Hex number 0-9 or A-F?
            ADDGT   r0, r0, #"A"-10 ; ASCII A-F
            ADDLE   r0, r0, #"0"    ; ASCII 0-9
            SWI SWI_WriteC          ; Print character to console
            MOV r1, r1, LSL #4      ; Shift left one nibble
            SUBS    r2, r2, #1      ; Decrement nibble count
            BNE     LOOP            ; If more nibbles loop again
            MOV r0, #10             ; Load 10 into r0, ASCII code for carriage return
            SWI SWI_WriteC          ; Print carriage return to console
            MOV r0, r3              ; Move converted number back to r0
            MOV PC, LR              ; Return to main subroutine     

IEEE        DCW 0x0000, 0x417C  ; IEEE Representation of 15.75(10), 417C0000(16), 
                                ; 01000001011111000000000000000000(2)
TNS         DCW 0x0103, 0x7C00  ; TNS  Representation of 15.75(10), 7C000103(16), 
                                ; 01111100000000000000000100000011(2)
                                ; This is not used in program, simply here for comparison of conversions

SIGNMASK    DCW 0x0000, 0x8000  ; Mask for sign bit
IEEEEXPMASK DCW 0x0000, 0x7F80  ; Mask for IEEE Exponent
IEEESIGMASK DCW 0xFFFF, 0x007F  ; Mask for IEEE Significand
TNSSIGMASK  DCW 0xFE00, 0x7FFF  ; Mask for TNS Significand
TNSEXPMASK  DCW 0x01FF, 0x0000  ; Mask for TNS Exponent
END 
```

# c++ - 视觉工作室断点

> ID：13792568
> 
> 赞同：2
> 
> 时间：2012-12-09T22:32:37.400
> 
> 标签：c++, visual-studio-2010, debugging

我有一个关于在 Visual Studio 2010 Professional 中设置断点的问题。

在下面的结构中，我有一个`Update()`函数，它根据某些条件更新其成员的值`i`：

```
struct A
{
    A(int i) : i(i) {}

    void Update()
    {
        //Update i if some condition is met...
        if(something)
            i += 2;
    }

    int i;
};

int main()
{
    A a(2);

    //Update is usually called periodically...
    a.Update();

    return 0;
} 
```

我想在`i`等于 4 时设置一个断点。我知道如何做到这一点的唯一方法是像这样更改 Update() 函数：

```
void Update()
{
        //Update i if some condition is met...
        if(something)
            i += 2;

        if(i == 4)
            int dummy = 1;
} 
```

现在我可以在行上设置断点：

```
int dummy = 1; 
```

`i`当equals时我会遇到断点`4`。在这种情况下，是否有更简洁或更简单的方法来设置断点？我如何在不添加虚拟代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:35:31.340

用鼠标以通常的方式设置断点。这会在代码的左边距放置一个大红点。现在用鼠标右键单击大红点。您将看到可以更改断点的方法列表。选择“条件...”。然后您可以进入`i==4`条件框。您将有一个断点，该断点在`i`4 时中断。

# javascript - 在 Javascript 中创建和使用模块

> ID：13792570
> 
> 赞同：1
> 
> 时间：2012-12-09T22:32:39.007
> 
> 标签：javascript, module

我正在尝试使用 Javascript 中的现有对象并将其重写为模块。下面是我试图重写为模块的代码：

```
var Queue = {};
Queue.prototype = {
    add: function(x) {
        this.data.push(x);
    },
    remove: function() {
        return this.data.shift();
    }
};
Queue.create = function() {
    var q = Object.create(Queue.prototype);
    q.data = [];
    return q;
}; 
```

这是我制作模块的尝试：

```
var Queue = (function() {

    var Queue = function() {};

    // prototype
    Queue.prototype = {
        add: function(x) {
            this.data.push(x);
        },
        remove: function() {
            return this.data.shift();
        }
    };

    Queue.create = function() {
        var q = Object.create(Queue.prototype);
        q.data = [];
        return q;
    };

    return Queue;
})(); 
```

这是正确的吗？如果是，我如何在我的 js 代码中的其他功能或区域中调用它。我感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:40:08.240

有一个空的构造函数，然后使用该构造函数上的属性作为有效的构造函数似乎有点毫无意义。

为什么不直接利用构造函数...

```
var Queue = (function() {

    var Queue = function() {
        if (!(this instanceof Queue))
            return new Queue();

        this.data = [];
    };

    Queue.prototype = {
        add: function(x) {
            this.data.push(x);
        },
        remove: function() {
            return this.data.shift();
        }
    };

    return Queue;
})(); 
```

* * *

或者，如果您更喜欢使用`Object.create`，我会这样做：

```
var Queue = (function() {

    var Queue = function() {
        var o = Object.create(proto);

        o.data = [];

        return o;
    };

    var proto = {
        add: function(x) {
            this.data.push(x);
        },
        remove: function() {
            return this.data.shift();
        }
    };

    return Queue;
})(); 
```

在这两种情况下，您只需要使用`Queue`来创建新对象。

```
var q = Queue(); 
```

从技术上讲，第一个应该使用`new Queue()`，但它有`instanceof`允许`new`被省略的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:12:40.883

如果你想模块化你的代码，试试 ConversationJS。它允许您通过转义传统的函数调用来保持代码库的高度解耦： [https ://github.com/rhyneandrew/Conversation.JS](https://github.com/rhyneandrew/Conversation.JS)

# javascript - 使用 javascript 或 php 从 url 栏中获取 url

> ID：13792573
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:33:08.960
> 
> 标签：javascript

我正在使用隐式使用 OAuth 的 API。它重定向到 URL [http://exmaple.com/#access_token=38927491.4d15ef2.d4769148101a4a70a201c1c40b8acc40](http://exmaple.com/#access_token=38927491.4d15ef2.d4769148101a4a70a201c1c40b8acc40)

我如何通过 JavaScript 或 PHP 获取它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:35:44.870

在 javascript 中，`window.location.href`将为您提供当前页面的 url。

要获取访问令牌，请这样做：

```
window.location.hash.match("access_token=([^&]*)")[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:42:55.230

尝试这个

```
var hash = window.location.hash; 
```

# php - 将 PHP 网站与 Wordpress 用户身份验证集成

> ID：13792576
> 
> 赞同：3
> 
> 时间：2012-12-09T22:33:19.747
> 
> 标签：php, mysql, wordpress, authentication

我有一个现有的 Wordpress 网站，如果用户想要访问其他内容（完整故事、过去故事的存档等），他们需要登录。

我已经使用 PHP 和 MySQL 构建了一个新网站，该网站将托管在不同的服务器上。本网站适用于访问前面提到的文章网站的相同受众。

新网站将提供对不公开的数据库内容的访问，我想使用 Wordpress 网站已经使用的登录详细信息对访问者进行身份验证。

是否有 API 调用允许使用 PHP 从其他服务器对 Wordpress 用户帐户进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:45:07.413

您可以使用以下方式对它们进行身份验证： http: [//codex.wordpress.org/Function_Reference/wp_signon](http://codex.wordpress.org/Function_Reference/wp_signon)

# jquery - 错误 ashx 无法在 jquery-file-upload 中创建类型“jQueryUploadTest.Thumbnail”？

> ID：13792578
> 
> 赞同：3
> 
> 时间：2012-12-09T22:33:31.050
> 
> 标签：jquery, asp.net, file-upload, multifile-uploader

我想使用[jQuery 文件上传器](https://github.com/swhitley/jQuery-File-Upload)，并按照这个[示例](http://www.webtrendset.com/2011/06/22/complete-code-example-for-using-blueimp-jquery-file-upload-control-in-asp-net/)[在 Asp.Net 中使用 blueimp jQuery 文件上传控件的完整代码示例。]。

我将 css 、js 、图像和 *.ashx 文件复制到我的项目中，但是当我运行它时，我收到以下错误

> 无法在 Thumbnail.ashx 文件中创建类型“jQueryUploadTest.Thumbnail”

这是 ASHX 代码：

```
<%@ WebHandler Language="C#" CodeBehind="Thumbnail.ashx.cs" Class="jQueryUploadTest.Thumbnail" %> 
```

和 Thumbnail.ashx.cs 代码：

```
using System.Web;

namespace jQueryUploadTest {
    public class Thumbnail : IHttpHandler {

        public void ProcessRequest (HttpContext context) {
            context.Response.ContentType = "image/jpg";
            context.Response.WriteFile(context.Server.MapPath("~/JQueryFileUpload/images/default_thumb.jpg"));
        }

        public bool IsReusable { get { return false; } }
    }
} 
```

我也遇到了同样的“FileTransferHandler.ashx”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T08:22:05.590

我将 ashx.cs 文件复制到 app-code 目录。
一切正常。[已解决]

# sql - SQL - 两个地方的数据

> ID：13792585
> 
> 赞同：0
> 
> 时间：2012-12-09T22:34:34.113
> 
> 标签：sql

请看下面的 DDL：

```
CREATE TABLE Sport (ID int, Description varchar(50),primary key(ID))

CREATE TABLE Audit (AditID int, PersonID int, SportID int, AuditDate datetime,primary key(id))

CREATE Table Person (ID int not null, Name varchar(50), FavouriteSportID int, PRIMARY KEY (id),
FOREIGN KEY (FavouriteSportID) REFERENCES Sport(Id))

INSERT INTO Sport VALUES (1,'Football')
INSERT INTO Sport VALUES (2,'Basketball')
INSERT INTO Sport VALUES (3,'Squash')

INSERT INTO Person VALUES (1,'Ian',1)
INSERT INTO Audit VALUES (1,1,1,'2012-01-01')
INSERT INTO Audit VALUES (2,1,1,'2012-02-01')
INSERT INTO Audit VALUES (3,1,'2012-03-01') 
```

审计表显示了人们过去最喜欢的运动。

我知道这涉及将最喜欢的运动存储在两个地方，即 Person.FavouriteSportID 和最近的审计记录，即审计记录 ID 3 也表明 Ian 目前最喜欢的运动是壁球（因为它有最近的审计记录）。

我想知道对于这个简单的要求是否有更好的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:46:06.113

没关系。这很好，事实上。

或者，您*可以*使用 AuditId 代替 Person 中的 SportId，作为对带有 current 的最新审计行的引用`SportId`，但这会使 Audit 成为当前表示的活动部分。我更喜欢您的设计，因为当前的表示仅限于较少的表，而审计表是一个支腿。它也更容易实现自动化——`after update, delete`在 Person 上的一个简单触发器将可靠地维护审计表，而无需任何人的进一步努力。

编辑

如果您不需要在审计表中记录当前关联，那么不要，并且您没有两次存储相同的信息。如前所述，一个`after update, delete trigger`会做得很好

```
-- syntax assuming SQL Server 2008+, adapt as appropriate
create trigger tr_Person_Audit on Person 
after update, delete 
as begin
  insert Audit (PersonId, SportId, ExpirationDate)
  select PersonId, SportId, getdate() -- as expiration date
  from (
    select PersonId, SportId from deleted except 
    select PersonId, SportId from inserted -- control for updates where nothing changed
    ) this
end 
```

如果您*确实*需要在审计表中记录当前关联，它不是很干净，但`Audit`仍然是一个支腿，您仍然可以使用`after insert, update`触发器自动执行它：

```
-- syntax assuming SQL Server 2008+, adapt as appropriate
create trigger tr_Person_Audit on Person 
after insert, update
as begin
  insert Audit (PersonId, SportId, EffectiveDate)
  select PersonId, SportId, getdate() -- as effective date
  from (
    select PersonId, SportId from inserted except  
    select PersonId, SportId from deleted -- control for updates where nothing changed
    ) this
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:48:57.640

您还可以删除该列`Person.FavouriteSportID`并在需要时查询最近的审计。保持数据一致更容易。

```
SELECT TOP 1 SportID
FROM Audit
WHERE PersonID = @1
ORDER BY AuditDate DESC 
```

或者

```
SELECT
    Person.*,
    (SELECT TOP 1 Audit.SportID
     FROM Audit
     WHERE Audit.PersonID = Person.PersonID
     ORDER BY Audit.AuditDate DESC) AS FavouriteSportID
FROM
    Person 
```

# ruby-on-rails - Rails 设计无密码

> ID：13792590
> 
> 赞同：1
> 
> 时间：2012-12-09T22:35:23.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, devise

我正在使用设计，我试图允许用户在不提供信息的情况下修改他们的信息。我已按照教程[https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-edit-their-account-without-providing-a-password)。

我有这个链接允许用户更改他们自己的设置

```
<%= link_to "Account Settings", edit_user_registration_path(current_user) %> 
```

我做了什么

```
rails g controller Registration 
```

在注册控制器中，用这个替换内容

```
class RegistrationsController < Devise::RegistrationsController
  def update
    @user = User.find(current_user.id)
    email_changed = @user.email != params[:user][:email]
    password_changed = !params[:user][:password].empty?

    successfully_updated = if email_changed or password_changed
      @user.update_with_password(params[:user])
    else
      @user.update_without_password(params[:user])
    end

    if successfully_updated
      set_flash_message :notice, :updated
      # Sign in the user bypassing validation in case his password changed
      sign_in @user, :bypass => true
      redirect_to after_update_path_for(@user)
    else
      render "edit"
    end
  end
end 
```

在 route.rb 文件中我这样做了

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

但它仍然把我带到文件夹/views/devise/registration/edit.erb.html，而不是把我带到/views/registrations/edit.erb.html。我还重新启动了服务器和我的电脑，但不知道还能做什么

更新：注意（客户=用户）

```
Started GET "/customers/edit.2" for 127.0.0.1 at 2012-12-09 20:06:03 -0500
Processing by Devise::RegistrationsController#edit as 
  [1m[35mCustomer Load (0.3ms)[0m  SELECT `customers`.* FROM `customers` WHERE `customers`.`id` = 2 LIMIT 1
  [1m[36mPage Load (0.2ms)[0m  [1mSELECT `pages`.* FROM `pages` [0m
  [1m[35mTag Load (0.2ms)[0m  SELECT `tags`.* FROM `tags` 
  Rendered devise/registrations/edit.html.erb within layouts/application (0.1ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_iewrap.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_search_tags.html.erb (0.0ms)
  Rendered layouts/_navigation.html.erb (0.8ms)
  Rendered layouts/_thirdcol.html.erb (0.0ms)
  Rendered pages/_link.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 41ms (Views: 36.4ms | ActiveRecord: 0.7ms)

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-12-09 20:06:04 -0500
Served asset /application.css - 304 Not Modified (5ms)

Started GET "/assets/activity_managers.css?body=1" for 127.0.0.1 at 2012-12-09 20:06:04 -0500
Served asset /activity_managers.css - 304 Not Modified (0ms) 
```

这是我要走的路

```
http://localhost:3000/customers/edit.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:54:58.090

您的文件名称和位置错误。

1.  该文件应该被调用`edit.html.erb`，**而不是** `edit.erb.html`.

2.  该文件应本地化为`app/views/registrations`.

此外，只要`.id`在末尾附加了一个 url，就意味着您正在向 url 助手传递一些您不应该传递的东西。因此，在这种情况下，您可以删除`current_user`参数并使用您的链接，如下所示：

```
<%= link_to "Account Settings", edit_user_registration_path %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:46:05.780

在`config/initializers/devise.rb`中，取消注释该行，`config.scoped_views = true`然后重新启动 Rails 服务器。还要检查你`edit.erb.html`是否在正确的目录中，它可能需要在`app/views/users/registrations/`.

**更新**：您需要`edit`在您的方法中定义方法，`RegistrationsController`因为没有它将从 Devise 继承`RegistrationsController`并因此呈现 Devise 的视图。只需将这两行添加到控制器，它应该可以工作。

```
def edit
end 
```

# javascript - 用于可编辑 DIV 上的 Web 应用程序的带十进制的 iPhone 数字键盘

> ID：13792591
> 
> 赞同：2
> 
> 时间：2012-12-09T22:35:24.837
> 
> 标签：javascript, ios, css, html

我为移动设备构建了一个 webapp。

我的 DOM 有一个`<div contenteditable="true">`在触摸到容器时触发在 iOS 上显示的键盘。到目前为止一切顺利，但在特定情况下，我希望用户输入带小数的数字，所以我想在 iOS 上触发一个支持小数的小键盘（以后在所有移动浏览器上）。

谁能告诉我如何对我的容器进行 CSS 或属性以获得所需的数字键盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:47:11.957

我认为您应该将当前输入标签替换为以下标签

```
<input type="number" pattern="[0-9]*" /> 
```

这实际上是在告诉 iOS（和 Android）浏览器使用大数字键盘。

有关更多详细信息，请参见[此处](http://bradfrostweb.com/blog/mobile/better-numerical-inputs-for-mobile-forms/)。

# java - 在 Eclipse 中查找 MyClass.toString() 的引用，同时忽略 Object.toString()

> ID：13792592
> 
> 赞同：17
> 
> 时间：2012-12-09T22:35:28.467
> 
> 标签：java, eclipse, tostring

尝试这样做时，Eclipse 将显示项目中对任何`.toString()`方法的所有调用，这当然不是我的目标。

有什么方法可以过滤匹配项，以便只在结果窗格中显示某种类型的类？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-01-19T04:06:34.590

右键单击您的覆盖 toString() 方法并选择*References > Workspace*，或者在光标位于该方法上时直接按 Ctrl+Shift+G。

正如一些人所指出的，结果列表通常会包含对 Object 类的 toString() 方法的大量引用，这些引用可能是数千或数万次点击。这显然使整个搜索变得毫无用处。

幸运的是，您可以通过单击“搜索”选项卡右上角的小三角形并选择过滤掉所有*对 Overridden*的引用来过滤结果，这将只留下对具体类的方法覆盖的引用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-09T22:46:09.827

如果您的类覆盖`toString()`，请右键单击方法名称 > 参考 > 工作区。

如果您的课程不覆盖`toString()`，则不能。

隐式调用，例如当你的类的实例与 a 连接时`String`，永远不会显示。

# php - PHP降序函数

> ID：13792594
> 
> 赞同：0
> 
> 时间：2012-12-09T22:35:36.773
> 
> 标签：php, for-loop

我想把“for”函数的降序结果。 **示例：**我有这个 PHP 代码：

```
<?php
$field[1] = "Field 1"; // 1
$field[2] = "Field 2"; // 2
$field[3] = "Field 3"; // 3
$field[4] = "Field 4"; // 4
$field[5] = "Field 5"; // 5
$field[6] = "Field 6"; // 6
$field[7] = "Field 7"; // 7
$field[8] = "Field 8"; // 8
$field[9] = "Field 9"; // 9
$field[10] = "Field 10"; // 10

$i = "10";

for ($n=1 ; $n < $i ; $n++ ) {

echo $field[$n];

}
?> 
```

将显示：

```
Field 1
Field 2
Field 3
Field 4
Field 5
Field 6
Field 7
Field 8
Field 9
Field 10 
```

**我该怎么做才能显示降序？像这样：**

```
Field 10
Field 9
Field 8
Field 7
Field 6
Field 5
Field 4
Field 3
Field 2
Field 1 
```

有什么解决办法吗？**提前致谢！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T22:53:51.513

```
foreach(array_reverse(range(1, 10), TRUE) as $key => $value)
{
  echo 'Field ' . $value;
} 
```

从0开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T22:38:44.727

不要使用 for 循环遍历数组。PHP 有一个可爱的[foreach](http://php.net/foreach)结构，它做得更好，也更方便。

```
foreach (array_reverse($field) as $value) {
    echo "$value\n";
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T22:38:25.927

```
for ($n=$i; $n>=1; $n--) {
    echo $field[$n];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T22:38:12.353

查找`array_reverse`（[http://php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)）

我同意 GoogleGuy，您还应该将您的 for 语句更改为 foreach

```
<?php
$field[1] = "Field 1"; // 1
$field[2] = "Field 2"; // 2
$field[3] = "Field 3"; // 3
$field[4] = "Field 4"; // 4
$field[5] = "Field 5"; // 5
$field[6] = "Field 6"; // 6
$field[7] = "Field 7"; // 7
$field[8] = "Field 8"; // 8
$field[9] = "Field 9"; // 9
$field[10] = "Field 10"; // 10

$reversed = array_reverse($field); 

foreach ( $reversed AS $element )

 echo $element;

}
?> 
```

# c# - 如何反序列化这个 XML 文件？

> ID：13792598
> 
> 赞同：0
> 
> 时间：2012-12-09T22:35:40.067
> 
> 标签：c#, xml, xml-serialization, xml-deserialization

我需要从这个 XML 文件中获取数据，我认为反序列化将是可行的方法，但是，我不知道如何使用 .NET 来做到这一点。

```
<consoles>
    <console name ="snes">
        <year>1991</year>
        <manufacturer>Nintendo</manufacturer>
    </console>
    <console name = "wii">
        <year>2006</year>
        <manufacturer>Nintendo</manufacturer>
    </console>
    <console name = "ps3">
        <year>2006</year>
        <manufacturer>Sony</manufacturer>
    </console>
</consoles> 
```

基本上，我希望能够随意获取每个控制台的年份或制造商数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:52:43.153

```
XmlSerializer ser = new XmlSerializer(typeof(console[]),new XmlRootAttribute("consoles"));
var consoles = (console[])ser.Deserialize(stream);

public class console
{
    [XmlAttribute]
    public string name;
    public int year;
    public string manufacturer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:41:52.847

```
 XDocument doc= XDocument.Load(pathToXmlFilename);

  foreach(XElement element in doc.Root.Elements("console"))
  {
     Console.WriteLine(element.Element("year").Value);
  } 
```

# wpf - 为什么数据绑定我的图表系列颜色失败？

> ID：13792599
> 
> 赞同：2
> 
> 时间：2012-12-09T22:35:43.240
> 
> 标签：wpf, data-binding, charts, .net-4.5, wpftoolkit

我正在使用 WPF 工具包绘制简单的折线图。我的目标是通过数据绑定设置我的系列的线条颜色。这只是*部分*成功。问题是：为什么？

**设置**

命名空间：

```
xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit" x:Class="WpfApplication3.MainWindow"
xmlns:media="clr-namespace:System.Windows.Media;assembly=PresentationCore" 
```

图表：

```
<chartingToolkit:Chart x:Name="chart">
    <chartingToolkit:LineSeries x:Name="seriesEntries" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}" DataPointStyle="{StaticResource CommonLineSeriesDataPoint}">
        <chartingToolkit:LineSeries.Tag>
            <media:Brush>Green</media:Brush>
        </chartingToolkit:LineSeries.Tag>
    </chartingToolkit:LineSeries>
</chartingToolkit:Chart> 
```

暂时忽略`Tag`，后面会涉及到。

请注意，图表具有自定义数据点样式`CommonLineSeriesDataPoint`：

```
<Style x:Key="CommonLineSeriesDataPoint" TargetType="chartingToolkit:LineDataPoint">
    <Setter Property="Background">
        <Setter.Value>
            <media:Brush>Red</media:Brush>
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="chartingToolkit:LineSeries">
    <Setter Property="DataPointStyle" Value="{StaticResource CommonLineSeriesDataPoint}" />
</Style> 
```

正如预期的那样，这将我的系列系列**染成红色**：

![红线系列](../Images/121fd8887188779b8313f1efc010021d.png)

**突破性变化**

现在我想数据绑定我的数据点背景。我只做一个改变。我没有直接指定背景画笔，而是将它绑定到`Tag`my 的属性`LineSeries`，这也是一个画笔（参见前面`LineSeries`的声明，它是**绿色**的）。

```
<Style x:Key="CommonLineSeriesDataPoint" TargetType="chartingToolkit:LineDataPoint">
    <Setter Property="Background">
        <Setter.Value>
            <Binding Path="Tag" RelativeSource="{RelativeSource AncestorType={x:Type chartingToolkit:LineSeries}}" />
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="chartingToolkit:LineSeries">
    <Setter Property="DataPointStyle" Value="{StaticResource CommonLineSeriesDataPoint}" />
</Style> 
```

结果是这样的：

![在此处输入图像描述](../Images/db79f3b013ab93847ba92d33b2a06c4b.png)

所以点是绿色的。*但是线路没了*。

我的期望是也能看到一条绿线！它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:38:55.820

我在 WPF Toolkit Sources 中挖掘后找到了解决方案。

原来`Stroke`系列的属性通过`Polyline`绑定到属性。我怀疑这不适合我尝试绑定属性本身。`Background``TemplateBinding``Background`

[这个关于 SO 的答案](https://stackoverflow.com/a/1823547/56658)建议`TemplateBinding`在编译时进行评估。所以让我们摆脱 TemplateBinding 并将`Stroke`属性直接绑定到`Tag`my `LineSeries`（记住：`Tag`包含**绿色**画笔）。

从 WPF Toolkit Source **\Source\DataVisualization\Themes\generic.xaml**我复制了部分样式定义`LineSeries`并将其添加到我的`ResourceDictionary`：

```
<Style x:Key="CommonLineSeries" TargetType="chartingToolkit:LineSeries" BasedOn="{StaticResource {x:Type chartingToolkit:LineSeries}}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="chartingToolkit:LineSeries">
                <Canvas x:Name="PlotArea">
                    <Polyline Points="{TemplateBinding Points}" Stroke="{Binding Tag, RelativeSource={RelativeSource AncestorType={x:Type chartingToolkit:LineSeries}}}" Style="{TemplateBinding PolylineStyle}"/>
                </Canvas>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

`<!-- charting:LineSeries -->`（如果有兴趣，您可以在**generic.xaml**中搜索以找到我从中复制的源。）

我唯一修改的是`Stroke`. 在这里，我使用与数据点相同的绑定。

最后要做的事情：告诉`LineSeries`使用这种风格：

```
<chartingToolkit:LineSeries x:Name="seriesEntries" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}" DataPointStyle="{StaticResource CommonLineSeriesDataPoint}" Style="{StaticResource CommonLineSeries}"> 
```

你瞧，它有效。这条线又回来了，它是绿色的：

![图表 - 固定线颜色](../Images/798ba0ad2e55012ac364f55ef59b0886.png)

（如果您仔细观察，您会发现该系列的图例条目仍然有错误的颜色。但我认为解决方案将与上述非常相似。）

# neo4j - 如何将复杂的密码查询更改为 Neo4j 中的简单查询？

> ID：13792601
> 
> 赞同：0
> 
> 时间：2012-12-09T22:36:06.923
> 
> 标签：neo4j, cypher

我想找到最多朋友和最少朋友的用户。这是我的查询：

```
"start n=node:users({query}) match p=n-[?:Friend*]->x 
with distinct n,count(distinct x) as  cnt  "
+ "start n=node:users({query}) match p=n-[?:Friend*]->x 
with distinct n,count(distinct x) as cnt1, min(cnt) as minnumber "
+ "start n=node:users({query}) match p=n-[?:Friend*]->x
with distinct n,count(distinct x) as friendsNumber, max(cnt1) as 
maxnumber, minnumber  "
+ "where  friendsNumber=minnumber or friendsNumber=maxnumber  return n.name,
friendsNumber" 
```

n 是用户，x 是他的朋友。但我使用了三个嵌套查询，我认为它的性能不好。还有其他方法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:33:47.393

您不想在这里使用可变长度路径。也没有可选的关系，因为您对有朋友的人感兴趣。

我认为在这里运行两个查询可能是最明智的：

```
start n=node:users({query}) 
match p=n-[:Friend]->x
with ID(n),count(distinct x) as  cnt
with max(cnt) as max,min(cnt) as min

start n=node:users({query}) 
match p=n-[:Friend]->x
with n,count(distinct x) as  cnt
where cnt=max or cnt=min
return n.name 
```

像这样的东西也应该起作用：[http ://console.neo4j.org/r/xf3hm0](http://console.neo4j.org/r/xf3hm0)

```
start n=node(*) 
match p=n-[:KNOWS]-x 
with n,count(distinct x) as  cnt 
with collect([n,cnt]) as data, max(cnt) as max,min(cnt) as min 
return extract(pair in 
   filter(pair in data 
     where tail(pair)=max OR tail(pair)=min) : 
   head(pair)) as person 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T13:21:56.897

也许查询两次会更好

```
START n=node:users({query})
MATCH n-[:Friend]->x
WITH n,count(x) as cnt
RETURN n, cnt order by cnt desc limit 1;

START n=node:users({query})
MATCH n-[:Friend]->x
WITH n,count(x) as cnt
RETURN n, cnt order by cnt asc limit 1; 
```

# python - 三个对象的“==”运算符的用法

> ID：13792604
> 
> 赞同：8
> 
> 时间：2012-12-09T22:36:44.587
> 
> 标签：python, operators, equality

这两种检查三个对象是否相等的方法在计算上是否存在差异？

我有两个变量：`x`和`y`. 说我这样做：

```
>>> x = 5
>>> y = 5
>>> x == y == 5
True 
```

这与：

```
>>> x = 5
>>> y = 5
>>> x == y and x == 5
True 
```

如果他们是`False`怎么办？

```
>>> x = 5
>>> y = 5
>>> x == y == 4
False 
```

和：

```
>>> x = 5
>>> y = 5
>>> x == y and x == 4
False 
```

它们的计算方式有什么不同吗？

此外，如何`x == y == z`工作？

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-09T22:38:10.250

Python 有链式比较，所以这两种形式是等价的：

```
x == y == z
x == y and y == z 
```

除了在第一个中， y 只被评估一次。

这意味着您还可以编写：

```
0 < x < 10
10 >= z >= 2 
```

等等。你也可以写一些令人困惑的东西，比如：

```
a < b == c is d   # Don't  do this 
```

初学者有时会被这个绊倒：

```
a < 100 is True   # Definitely don't do this! 
```

这将始终是错误的，因为它与以下内容相同：

```
a < 100 and 100 is True   # Now we see the violence inherent in the system! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-02T13:50:29.610

[为已经接受的答案](https://stackoverflow.com/a/13792615/5735010)添加一点视觉演示。

用于测试三个值或变量的相等性。我们可以使用：

```
>>> print(1) == print(2) == print(3)
1
2
3
True

>>> print(1) == print(2) and print(2) == print(3)
1
2
2
3
True 
```

上述语句等效但不等于，因为访问只执行一次。Python 自然地链接关系运算符。请参阅[此](https://docs.python.org/3/reference/expressions.html#comparisons)文档：

> 比较可以任意链接，例如，x < y <= z 等价于 x < y 和 y <= z，除了 y 只计算一次（但在这两种情况下，当找到 x < y 时根本不计算 z是假的）。

如果调用的函数（并且您正在比较返回值）没有副作用，那么这两种方法是相同的。

在这两个示例中，如果第一个比较评估为假，则不会评估第二个比较。但是：小心添加括号。例如：

```
>>> 1 == 2 == 0
False
>>> (1 == 2) == 0
True 
```

看到[这个](https://stackoverflow.com/a/13805988/5735010)答案。

# javascript - ContentFlow javascript carousel - 如何向图像添加文本？

> ID：13792607
> 
> 赞同：0
> 
> 时间：2012-12-09T22:36:56.163
> 
> 标签：javascript, html, css, extjs, contentflow

我正在寻找使用名为 ContentFlow 的优秀 Javascript 小部件：

[http://jacksasylum.eu/ContentFlow/index.php](http://jacksasylum.eu/ContentFlow/index.php)

但是，在我的 ExtJS 应用程序中，我需要在滚动的图像中打印文本。不是 CSS 高手，我真的很难做到这一点。任何见解都将受到欢迎！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:59:20.323

我认为您应该在 .caption 类中添加以下样式。类似的东西可能会奏效。

```
.caption {
  position: relative;
  bottom: 125px;
} 
```

除此之外，这只是一个玩弄`bottom`价值的问题，可以随意定位它。另外，如果需要，不要忘记您也可以添加`left`,`right`和`top`属性。

# android - Android布局多屏

> ID：13792610
> 
> 赞同：0
> 
> 时间：2012-12-09T22:37:11.330
> 
> 标签：android, android-layout

抱歉，但我无法理解如何为正确的 android 手机尺寸绘制正确的图片。我阅读了android文档，他们说我只考虑屏幕尺寸和密度而不是分辨率，所以我的图片应该是什么尺寸？

例如，如果我有一部尺寸为 1000x400（愚蠢的例子）的手机，并且想要一个位于中间的按钮（40x40），我应该怎么做？40x40?? 但是在文档中他们说不要寻找解决方案：\

我很困惑...

ps：文档链接[Android多屏](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:45:21.623

基本上你必须意识到虽然*分辨率*、*屏幕尺寸*和*屏幕密度*是独立的属性，但它们仍然有些相关。如果您的按钮是 40x40，并且您发现在*hdpi*（高密度）设备的中心看起来不错的尺寸，您将必须对其进行缩放以使其适合 mdpi（中密度）和 xhdpi（额外高密度）设备。我喜欢做的是使用 PhotoShop 或其他图形编辑器并调整我的资产大小，以便它们适合我试图定位的任何密度设备。我确保始终使用 *WRAP_CONTENT* 作为我的高度和宽度属性，而不是固定值。

此外，如果您没有在 res/drawable 文件夹中包含这些缩放的替代品..您基本上是在说您依赖系统为您缩放它们，这可能是一场赌博。所以我总是去调整我的资产大小，以便我包含一个适用于所有密度的版本。你提出的链接很好地解释了一切

# c++ - C++，如何创建和绘制二叉树然后在预购中遍历它

> ID：13792612
> 
> 赞同：0
> 
> 时间：2012-12-09T22:37:46.197
> 
> 标签：c++, binary-tree, tree-traversal

如何创建二叉树并使用 Pre-Order Traversal 策略绘制它？根将是第一个进入的数字。

我有一组数字：`48 32 51 54 31 24 39`. 48 将是根。子节点如何在 Pre-Order 遍历中被推到二叉树上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:43:13.807

想象以下子问题。你有一组数字：

```
N A1...AX B1...BY 
```

你知道那`N`是对应树的根。您只需要知道左子树的数字。显然，其余的数字形成了正确的子树。

如果您还记得二叉搜索树的属性，您就会知道左侧子树的元素的值小于根（而右侧的元素的值更大）。

因此，左子树是小于（或可能等于）的数字序列`N`。其余的数字在右子树中。

递归求解

```
A1...AX 
```

和

```
B1...BY 
```

例如给出：

```
10 1 5 2 9 3 1 6 4 11 15 12 19 20 
```

你得到：

*   根：10
*   左子树：1 5 2 9 3 1 6 4
*   右子树：11 15 12 19 20

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T23:07:40.237

假设您有以下二叉树：

```
 A
      /    \  
    B        C   
   / \      / \
  D   E    F   G
     / \    
    H   I 
```

预购遍历是节点、左、右。

所以这个二叉树的 Pre-Order 将是：`A B D E H I C F G`

有关如何在 C++ 中实现此功能的更多详细信息： [https ://stackoverflow.com/a/17658699/445131](https://stackoverflow.com/a/17658699/445131)

# eclipse - 部署到 Windows Azure

> ID：13792618
> 
> 赞同：0
> 
> 时间：2012-12-09T22:38:14.820
> 
> 标签：eclipse, jsf, netbeans, azure, glassfish

我在 Netbeans 中创建了一个 JSF Web 应用程序以在 glassfish 上运行，我正试图将其部署到 Windows Azure。我将 .war 文件导入 Eclipse 并尝试部署到 Windows Azure，它显示一切正常，Windows Azure 显示它已上传并正在运行，但是当我尝试访问网站时，它给出了 404 错误。在 Eclipse 中推送到 Windows Azure 之前是否有任何必须完成的步骤？

# jquery - jQuery div 幻灯片过渡在 Chrome 和 Firefox 中无法正常工作

> ID：13792623
> 
> 赞同：0
> 
> 时间：2012-12-09T22:39:04.087
> 
> 标签：jquery, slide

我对一页的一般幻灯片动画有疑问。我花了半天时间试图解决这个问题，我就放弃了。也许更熟悉 jQuery 的人能够发现这个问题。当您尝试在最后 2 个子页面（div）之间切换时存在问题：图库和联系人... 基本上该页面是由 div（类似于子页面）组成的，它们根据用户的选择上下滑动。这是实际页面：（`http://4play.dj/home.html`对不起，我猜系统不允许 .dj 域）。该页面**在 IE 中运行良好**，这很奇怪，因为通常问题是另一种方式。我创建了一个 fiddle: [link](http://jsfiddle.net/tucado/mcCzF/4/)，但由于某种原因它对我不起作用。任何帮助将不胜感激。非常感谢您提前。

下面的jQuery代码（代码在这里：对不起，但问题可能到处存在，我一行一行地走了10000次，一无所获）：

```
 ;(function( $ ){

        var $scrollTo = $.scrollTo = function( target, duration, settings ){
            $(window).scrollTo( target, duration, settings );
        };

        $scrollTo.defaults = {
            axis:'xy',
            duration: parseFloat($.fn.jquery) >= 1.3 ? 0 : 1
        };

        // Returns the element that needs to be animated to scroll the window.
        // Kept for backwards compatibility (specially for localScroll & serialScroll)
        $scrollTo.window = function( scope ){
            return $(window)._scrollable();
        };

        // Hack, hack, hack :)
        // Returns the real elements to scroll (supports window/iframes, documents and regular nodes)
        $.fn._scrollable = function(){
            return this.map(function(){
                var elem = this,
                    isWin = !elem.nodeName || $.inArray( elem.nodeName.toLowerCase(), ['iframe','#document','html','body'] ) != -1;

                    if( !isWin )
                        return elem;

                var doc = (elem.contentWindow || elem).document || elem.ownerDocument || elem;

                return $.browser.safari || doc.compatMode == 'BackCompat' ?
                    doc.body : 
                    doc.documentElement;
            });
        };

        $.fn.scrollTo = function( target, duration, settings ){
            if( typeof duration == 'object' ){
                settings = duration;
                duration = 0;
            }
            if( typeof settings == 'function' )
                settings = { onAfter:settings };

            if( target == 'max' )
                target = 9e9;

            settings = $.extend( {}, $scrollTo.defaults, settings );
            // Speed is still recognized for backwards compatibility
            duration = duration || settings.speed || settings.duration;
            // Make sure the settings are given right
            settings.queue = settings.queue && settings.axis.length > 1;

            if( settings.queue )
                // Let's keep the overall duration
                duration /= 2;
            settings.offset = both( settings.offset );
            settings.over = both( settings.over );

            return this._scrollable().each(function(){
                var elem = this,
                    $elem = $(elem),
                    targ = target, toff, attr = {},
                    win = $elem.is('html,body');

                switch( typeof targ ){
                    // A number will pass the regex
                    case 'number':
                    case 'string':
                        if( /^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ) ){
                            targ = both( targ );
                            // We are done
                            break;
                        }
                        // Relative selector, no break!
                        targ = $(targ,this);
                    case 'object':
                        // DOMElement / jQuery
                        if( targ.is || targ.style )
                            // Get the real position of the target 
                            toff = (targ = $(targ)).offset();
                }
                $.each( settings.axis.split(''), function( i, axis ){
                    var Pos = axis == 'x' ? 'Left' : 'Top',
                        pos = Pos.toLowerCase(),
                        key = 'scroll' + Pos,
                        old = elem[key],
                        max = $scrollTo.max(elem, axis);

                    if( toff ){// jQuery / DOMElement
                        attr[key] = toff[pos] + ( win ? 0 : old - $elem.offset()[pos] );

                        // If it's a dom element, reduce the margin
                        if( settings.margin ){
                            attr[key] -= parseInt(targ.css('margin'+Pos)) || 0;
                            attr[key] -= parseInt(targ.css('border'+Pos+'Width')) || 0;
                        }

                        attr[key] += settings.offset[pos] || 0;

                        if( settings.over[pos] )
                            // Scroll to a fraction of its width/height
                            attr[key] += targ[axis=='x'?'width':'height']() * settings.over[pos];
                    }else{ 
                        var val = targ[pos];
                        // Handle percentage values
                        attr[key] = val.slice && val.slice(-1) == '%' ? 
                            parseFloat(val) / 100 * max
                            : val;
                    }

                    // Number or 'number'
                    if( /^\d+$/.test(attr[key]) )
                        // Check the limits
                        attr[key] = attr[key] <= 0 ? 0 : Math.min( attr[key], max );

                    // Queueing axes
                    if( !i && settings.queue ){
                        // Don't waste time animating, if there's no need.
                        if( old != attr[key] )
                            // Intermediate animation
                            animate( settings.onAfterFirst );
                        // Don't animate this axis again in the next iteration.
                        delete attr[key];
                    }
                });

                animate( settings.onAfter );            

                function animate( callback ){
                    $elem.animate( attr, duration, settings.easing, callback && function(){
                        callback.call(this, target, settings);
                    });
                };

            }).end();
        };

        // Max scrolling position, works on quirks mode
        // It only fails (not too badly) on IE, quirks mode.
        $scrollTo.max = function( elem, axis ){
            var Dim = axis == 'x' ? 'Width' : 'Height',
                scroll = 'scroll'+Dim;

            if( !$(elem).is('html,body') )
                return elem[scroll] - $(elem)[Dim.toLowerCase()]();

            var size = 'client' + Dim,
                html = elem.ownerDocument.documentElement,
                body = elem.ownerDocument.body;

            return Math.max( html[scroll], body[scroll] ) 
                 - Math.min( html[size]  , body[size]   );

        };

        function both( val ){
            return typeof val == 'object' ? val : { top:val, left:val };
        };

    })( jQuery );

    $(document).ready(function() {

        $('a.panel').click(function () {

            $('a.panel').removeClass('selected');
            $(this).addClass('selected');

            current = $(this);

            $('#wrapper').scrollTo($(this).attr('href'), 800);      

            return false;
        });

        $(window).resize(function () {
            resizePanel();
        });

    });

    function resizePanel() {

        width = $(window).width();
        height = $(window).height();

        mask_height = height * $('.item').length;

        $('#debug').html(width  + ' ' + height + ' ' + mask_height);

        $('#wrapper, .item').css({width: width, height: height});
        $('#mask').css({width: width, height: mask_height});
        $('#wrapper').scrollTo($('a.selected').attr('href'), 0);

    } 
```

HTML > [http://4play.dj/home.html](http://4play.dj/home.html) CSS > [http://4play.dj/_css/home.css](http://4play.dj/_css/home.css)

再次感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:08:30.187

```
 window.onload = function () {
 resizePanel()
 } 
```

希望这会起作用，因为当您实际调整页面大小时该功能正在工作

# asp.net - 联系表单问题从本地主机 (IIS) 发送电子邮件到我在 vb.net 中的 hotmail

> ID：13792626
> 
> 赞同：0
> 
> 时间：2012-12-09T22:39:20.237
> 
> 标签：asp.net, vb.net, visual-studio-2010, visual-studio, visual-studio-2005

我使用 Visual Studio 2005 设计了一个简单的联系表单，该页面运行良好，但是当我点击发送按钮时，我收到如下所示的错误：“mailclient.Send(message) 中的错误。我想从我的本地主机发送它我与visual studio一起使用到我的hotmail帐户，但它没有向我的hotmail帐户发送电子邮件，错误如下。

```
A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond  
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond

Source Error: 

Line 24:         Dim mailclient As SmtpClient = New SmtpClient
Line 25:         mailclient.Host = mailServerName
Line 26:         mailclient.Send(message)
Line 27:         message.Dispose()
Line 28:     End Sub 
```

这是我的控制器类：

```
Imports System.Net.Mail

Partial Class ContactUs
    Inherits System.Web.UI.Page
    Protected Sub textComments_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    End Sub
    Protected Sub textComments_TextChanged1(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtComments.TextChanged
    End Sub

    Protected Sub Send_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles txtSend.Click
        SendMail(txtEmail.Text, txtComments.Text)
    End Sub

    Private Sub SendMail(ByVal From As String, ByVal body As String)
        Dim mailServerName As String = "mail.hotmail.com"
        Dim message As MailMessage = New MailMessage(From, "Myaddress@hotmail.com", "Feedback", body)
        Dim mailclient As SmtpClient = New SmtpClient
        mailclient.Host = mailServerName
        mailclient.Send(message)
        message.Dispose()
    End Sub
End Class 
```

有人可以指出我的错误在哪里，并且对于“Dim mailServerName As String =”mail.hotmail.com”这行我放了“mail”，因为不知道如何获取我的本地邮件服务器名。您的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:42:54.780

您应该通过 smtp.live.com 发送邮件。请参阅[http://windows.microsoft.com/en-CA/hotmail/send-receive-email-from-mail-client](http://windows.microsoft.com/en-CA/hotmail/send-receive-email-from-mail-client)

如果您遇到 ISP 阻塞端口 25 的问题，它们似乎支持端口 587 上的安全连接。

编辑：

SMTP 使用端口 25；大多数住宅 ISP 都会阻止该端口。你的可能正在这样做。Telnet 是一种方便的测试方法。我的 ISP 正在这样做，所以当我尝试连接时，我看到：

```
C:\Users\foo>telnet smtp.live.com 25
Connecting To smtp.live.com...Could not open connection to the host, on port 25:
 Connect failed 
```

但是，如果我使用安全端口（587）：

```
C:\Users\foo>telnet smtp.live.com 587
220 BLU0-SMTP254.blu0.hotmail.com Microsoft ESMTP MAIL Service, Version: 6.0.379
0.4675 ready at  Mon, 10 Dec 2012 11:43:31 -0800 
```

请注意，我正在运行 Windows 7 并且未安装 telnet 客户端，因此我必须通过控制面板 > 程序 > 打开或关闭 Windows 功能来添加它。

# c - 进程 ID，waitpid

> ID：13792631
> 
> 赞同：0
> 
> 时间：2012-12-09T22:39:42.203
> 
> 标签：c, fork, wait

以下代码：

```
B() { 
   pid_t pid; 
   if ((pid=fork())!= 0) 
       waitpid(pid,NULL,0); 
   printf("2 "); 
   if (fork() == 0) 
      { printf("3 "); exit(0); } 
   printf("5 "); 
   exit(0); 
} 
```

可能有一个输出：我不确定哪一个是正确的输出。

```
232553
235325
232355
235253
252533 
```

这 2 行表示如果 pid 是父进程，那么等待什么？

```
if ((pid=fork())!= 0) 
           waitpid(pid,NULL,0); 
```

那么如果是子进程（fork = 0），那么打印 3.. 对吗？

```
 if (fork() == 0) 
              { printf("3 "); exit(0); } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:45:24.907

```
B() { 
   pid_t pid; 

   /* On success, fork() returns 0 to the child. It returns the child's process 
    * ID to the parent. So this block of code, executes a fork(), and has the
    * parent wait for the child.
    * Amusing sidenote: if the fork() fails, the parent will wait for *any* 
    * child process, since the return will be -1.
    */
   if ((pid=fork())!= 0) 
       waitpid(pid,NULL,0); 

   /* Both the parent and the child will print 2\. The parent, will, of course,
    * only print 2 after the child exits, because of the waitpid above.
    */
   printf("2 "); 

   /* Now we fork again. Both the parent and the child from the previous fork will
    * fork again, although the parent will do it *after* the child exit. The resulting 
    * child process will print a single 3 and then exit.
    */
   if (fork() == 0) 
      { printf("3 "); exit(0); } 

   /* Now both the parent and the child print a 5 and exit */
   printf("5 "); 
   exit(0); 
} 
```

正如大卫施瓦茨所说，这个程序的输出将由数字 2、3 和 5 的一些排列组成。没有一个输出是正确的，因为输出取决于进程执行的顺序，这是任意的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T22:43:36.583

该`waitpid`函数等待子进程终止。你说的其他一切都是正确的。像这样的程序没有一个正确的输出，因为它取决于进程执行的顺序，这是任意的。

```
 if ((pid=fork())!= 0) 
       waitpid(pid,NULL,0); 
```

好的，所以现在父母将等待孩子终止。

```
 printf("2 "); 
```

孩子会立即输出 2。在孩子终止后的某个时间，父母将输出 2 。

```
 if (fork() == 0) 
      { printf("3 "); exit(0); } 
```

父母和孩子都会分叉。他们的两个孩子都将打印 3 并退出。

```
 printf("5 "); 
```

父母和原始孩子都将打印 5。

```
 exit(0); 
```

父母和原始孩子都将刷新他们的输出缓冲区并终止。

# zend-framework - Zend 的问题

> ID：13792632
> 
> 赞同：0
> 
> 时间：2012-12-09T22:39:46.903
> 
> 标签：zend-framework, zend-server

我已经下载并安装了 Zend Server 社区版。我在一个mac上。我试图改变路径

```
 /usr/local/zend/apache2/conf/httpd.conf 
```

以便它指向我的文档文件夹中的一个测试文件。但是，当我输入

```
 http://localhost:10081/test.php 
```

进入我的浏览器，我只是得到 404- 找不到页面。

有什么建议么？我是网络新手，我真的不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:44:04.800

您可以找到在 Mac 上设置本地环境的分步说明：

[http://www.cmiwebstudio.com/blog/zend-server-ce-for-mac-osx-10-lion/](http://www.cmiwebstudio.com/blog/zend-server-ce-for-mac-osx-10-lion/)

以及其他一些在这里也可能有所帮助的帖子：

[http://www.cmiwebstudio.com/blog/tag/zend-server-ce/](http://www.cmiwebstudio.com/blog/tag/zend-server-ce/)

# linux - 告诉 Cmake 在哪里可以找到我从源代码构建的库

> ID：13792633
> 
> 赞同：2
> 
> 时间：2012-12-09T22:39:47.630
> 
> 标签：linux, cmake, point-cloud-library

我想在 Ubuntu 中从源代码构建*PCl 1.7*库，因此我从源代码下载并构建了它的一些依赖项：*VTK 5.8*、*Boost 1.51.0*和*FLANN 1.7.1*。

我已将它们构建在自定义目录中。它们都存储在目录*/home/c/pkg*下。该目录中的结构是：

对于升压：

*   提升-1.51.0
    *   build：我告诉*bjam*工具使用这个目录进行安装。这是*boost/bin.v2*文件夹。
    *   包括：头文件。
    *   lib：*.a*和*.so*对象。

对于 VTK：

*   VTK-5.8.0
    *   build：执行*CMake*的地方。
    *   包括：头文件。
    *   lib：共享对象。

对于弗兰：

*   法兰-1.7.1
    *   build: *CMake*在这里执行。
    *   包括：头文件。
    *   lib：共享对象。
    *   分享：文档。

*OpenNI*或*OpenSceneGraph*等其他依赖项已从源代码构建并安装在系统范围内（到 /usr/...）目录。

我已经用一个小程序测试了安装，我可以编译并链接到它们。所以，一切正常:)

**继续之前的注意事项：**我使用 Synaptics 工具在系统范围内安装了这些库的以前版本，例如*boost-1.4*或*pcl-1.6 。*我想保留它们，因为我只测试较新的版本。这就是我在该自定义位置构建库的原因。

问题是当我想编译*PCL 1.7*时，默认情况下，*CMake*只识别系统范围内安装的库。那么，我怎样才能告诉*CMake*使用我从源代码构建的较新的库呢？

谢谢你的时间！。

# ios - OpenGL ES 2.0 中的半透明

> ID：13792637
> 
> 赞同：0
> 
> 时间：2012-12-09T22:40:00.580
> 
> 标签：ios, opengl-es, glkit

我在 iOS 上遇到了 OpenGL ES 2.0 的半透明问题。我的场景比较简单。它由一个立方体网格组成，其中一些应该是实心的，而其他的应该是半透明的。我从下面的代码开始设置 OpenGL。

```
glEnable(GL_CULL_FACE);
glEnable(GL_DEPTH_TEST);
glDepthFunc(GL_LEQUAL);

glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

由于深度测试和剔除，这会导致某些角度的透明度不正确。请看下面的两张图片

![启用正确的透明度/剔除和深度测试](../Images/33a34bd71998ac743d8712346db9e8ce.png)

![不正确的透明度/启用了剔除和深度测试](../Images/00ed7adc596222998ed8b11b9475fc00.png)

我试图禁用卷曲和深度测试并启用 alpha 测试。结果是正确的透明度，但没有纹理（见下图）。

```
//glEnable(GL_CULL_FACE);
//glEnable(GL_DEPTH_TEST);
//glDepthFunc(GL_LEQUAL);

glAlphaFunc(GL_GREATER, 0.5);
glEnable(GL_ALPHA_TEST);

glEnable (GL_BLEND);
glBlendFunc (GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

![在此处输入图像描述](../Images/251bff667a0312587cba7b6be35ea805.png)

我正在使用 GLKit 加载纹理并使用 GLKBaseEffect 来渲染场景。是否有人提示如何在所有视角下以正确的透明度实现与第一张图像相同的结果？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:44:58.613

您的主要两个选择是：

1.  对场景中的所有多边形进行排序，并确保没有多边形与其他多边形相交（因为这样您就无法对它们进行排序）

2.  请改用与排序无关的混合模式，例如加法或减法混合。

如果您真的只想要一个立方体网格，那么将渲染顺序更改为适合任何视点应该不会太棘手，因为您只需要以不同的顺序遍历立方体而不是实际对任何东西进行排序。

# java - 搜索方法帮助，

> ID：13792641
> 
> 赞同：0
> 
> 时间：2012-12-09T22:40:31.857
> 
> 标签：java, if-statement, for-loop

一旦我正在搜索的项目在这种情况下显示为学生详细信息，我的搜索方法就有问题，它会输出 if 语句的“else”选项，下面是此方法中使用的代码

```
public  void search(String StudentlName)
{ 

    boolean found = true;   // set flag to true to begin first pass

    while ( found ==true )
    {

        for (int index = 0; index<= lName.length; index ++)
        {
            if (StudentlName.equalsIgnoreCase(lName[index])
            {
                System.out.println(course+"\n"+
                    "Student ID = \t"+index+"\n"+ 
                    unitTitle + "\n" +
                    fName[index] + "\n"  + 
                    lName[index] + "\n" + 
                    Marks[index] + "\n" + "\n" );
                found = false;
            }
            else
            {
                System.out.println("Student Not Found");
            }//End of If
        }// End of For
    }
}//end of search Method 
```

这是我的菜单类的一部分，

```
 case 7:
                    System.out.println("Please Enter The Students
                                        you wish to find Last Name ");
                    String templName = keyb.nextLine();
                    System.out.println("");
                    myUnit.search(templName);
                    option = menuSystem();
                    break; 
```

我认为它与 for 循环有关，但我无法理解。

一旦我输入了正确的姓氏（在本例中为“Scullion”），我想要在此出现：

```
HND Computing
Student ID = 0
Java
Daniel
Scullion
60
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException:
10 Student Not Found
Student Not Found
Student Not Found
Student Not Found
Student Not Found Student Not Found Student Not Found Student Not
Found Student Not Found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T22:41:43.620

```
 for (int index = 0; index<= lName.length; index ++) 
```

应该

```
 for (int index = 0; index<lName.length; index ++) 
```

数组索引从零开始。即，他们`start index is 0 and the end-index is Arraylength-1`。

示例：例如，您的数组长度为 10。

开始索引--->0

结束索引-----> 9

如果您尝试访问大于 9 的索引，则会在运行时抛出**ArrayIndexOutOfBounds 。**

## 编辑：

找到学生后，使用[**break 语句跳出 for 循环。**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

```
if (StudentlName.equalsIgnoreCase(lName[index])  )

      {
          System.out.println(course+"\n"+
                  "Student ID = \t"+index+"\n"+ 
                  unitTitle + "\n" +
                  fName[index] + "\n"  + 
                  lName[index] + "\n" + 
                  Marks[index] + "\n" + "\n" );
          found = false;
          break; //this will break outta the for-loop
      } 
```

# ios - Google Web 字体无法在 iOS 版 Chrome 中加载

> ID：13792642
> 
> 赞同：12
> 
> 时间：2012-12-09T22:40:54.290
> 
> 标签：ios, css, google-chrome, responsive-design, google-webfonts

当我使用 Google Webfonts 时，它们在我关心的每个浏览器上都能正常加载，除了 Chrome/iOS。这看起来很奇怪，因为它在 Mac 版 Chrome 和 iOS 版 Safari 上运行良好，所以我认为这不是 iOS 问题或 Google Chrome 问题。它似乎特定于 Chrome/iOS。

任何关于如何解决此问题的想法或想法都会很棒！

谢谢！

**编辑**

我正在使用托管在 Google 上的 Google Web Fonts，其中包含以下内容：

```
<link href="http://fonts.googleapis.com/css?family=Leckerli+One" rel="stylesheet" type="text/css" /> 
```

在我的字体（SASS）中，我使用以下内容：

```
h1
  font-family: "Leckerli One", cursive 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T14:39:58.423

我看到了同样的问题。在我自己的服务器上托管字体文件并重写 @font-face 规则以匹配解决了我的问题，无论是在我的本地开发服务器还是在产品中。

我不知道原因；我最好的猜测是在 UIWebViews 中执行不同的同源问题（由于 App Store 规则，iOS Chrome 是 UIWebView）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T17:38:20.303

IOS 设备仅使用 TTF 格式（或 OTF，如果它们遵循以下开发者指南）。该字体被用作 WOFF、EOT 和 OTF（可能不遵循指南）。有些[服务](http://fontsquirrel.com)会为您提供其他版本。尝试使用@font-face 指定字体，看看是否能解决问题！Fontsquirrel 有一个[@font-face 生成器](http://www.fontsquirrel.com/fontface/generator)来完成繁重的工作。

关于后续问题。Apple 提供了一些关于 TrueType 字体实现的开发人员文档。可以在[这里](https://developer.apple.com/fonts/TTRefMan/)找到。本质上，TTF 格式将字体存储为 sfnt 资源。唯一可以做到这一点的其他字体格式是 OpenType 的偏移表 sfnt 包装器。因为 IOS 使用 sfnt 包装器读取字体，所以您会遇到不以这种方式存储的字体的问题。（对不起所有的行话）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T02:12:52.147

You can use the [Google Fonts API Loader](https://developers.google.com/webfonts/docs/webfont_loader) which will detect the user's browser and send back appropriately formatted CSS.

Sample code is available in the first response on [this Stack Overflow question](https://stackoverflow.com/a/9683905/1445366).

This will allow both Safari and Chrome (and other [UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)-based browsers) to display the font correctly.

*Note*: if you want to store the fonts locally, as @Dave suggested, [this CSS](https://stackoverflow.com/a/7348733/1445366) should work.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-09T22:46:36.043

在**CSS**中你可以使用

```
!important 
```

例子：

```
@font-face {
  font-family: 'Monda' !important;
  font-style: normal !important;
  font-weight: 400 !important;
  src: local('Monda Regular'), local('Monda-Regular'), url(http://themes.googleusercontent.com/static/fonts/monda/v1/sk05J8GA1NvUxDnk43EgAQ.woff) format('woff') !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-13T21:27:32.067

对我来说，在 php 页面中添加作品：

```
<style type="text/css">
@import url('https://fonts.googleapis.com/css?family=Trocchi');
@import url('https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i');
</style> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-01T19:51:38.160

如果其他人仍然看到此问题 - iOS 9 或更早版本的 Chrome 中未加载字体 - 请仔细检查字体是否作为 css 文件而不是 js 文件导入。Fonts.com 将为您提供将字体导入为 js 的选项，这不会在 Chrome / iOS 9 或更低版本上获取。将我的导入更改为 css 为我解决了这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-12T17:04:11.523

我最近在 UIWebView 上遇到了类似的问题。我对 iOS 应用程序和 Web 源进行了额外的更改，但没有任何帮助。

**最后通过简单地将 Google Font 的链接更改为https**来修复它。

# c# - 从单个字符串列请求 1..N 个值时，QueryAsync() 返回什么？

> ID：13792645
> 
> 赞同：7
> 
> 时间：2012-12-09T22:40:59.493
> 
> 标签：c#, sqlite, linq-to-sql, async-await, return-type

使用此代码（带有或不带有“.ToList()”）：

```
public async Task<List<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    var groupNames = await db.QueryAsync<List<string>>("SELECT DISTINCT GroupName FROM SOs_Locations");
    return groupNames.ToList();
} 
```

...我明白了，“*无法将类型 'System.Collections.Generic.List>' 隐式转换为 'System.Collections.Generic.List'* ”

这有效：

```
public async Task<HashSet<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    var allLocations = await db.QueryAsync<SOs_Locations>("SELECT * FROM SOs_Locations ORDER BY GroupName");
    HashSet<string> hashsetGroupNames = null;
    foreach (var item in allLocations)
    {
        hashsetGroupNames.Add(item.GroupName);
    }
    return hashsetGroupNames;
} 
```

...但似乎很浪费（当我想要的只是 GroupName 列中的不同值时，获取所有记录）。

在我看来，当用“DISTINCT GroupName”替换 sql 查询中的“*”时，需要一个 List 甚至是 HashSet

那么，当返回多条记录中的一列时，究竟返回了什么？IOW，调用 QueryAsync<>() 的尖括号内应该是什么？

我认为这会起作用：

```
public async Task<List<String>> SelectDistinctGroupNames()
{
    var db = new SQLiteAsyncConnection(SQLitePath);
    List<string> allLocations = await db.QueryAsync<string>("SELECT DISTINCT GroupName FROM SOs_Locations ORDER BY GroupName");
    return allLocations;
} 
```

...但是我得到了，“ *'string' 必须是具有公共无参数构造函数的非抽象类型，才能将其用作泛型类型或方法 'SQLite.SQLiteAsyncConnection.QueryAsync(string,参数对象[])'* "

我上面有一个“字符串”与该方法的工作版本中的`<SOs_Locations`> （不是“List >”）相对应。`<SOs_Locations`当我将其更改为“列表`<string`>”时，我得到“无法将类型'System.Collections.Generic.List `<System.Collections.Generic.List`'隐式转换为'System.Collections.Generic.List `<string`>'”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T01:28:01.970

从[来源](https://github.com/praeclarum/sqlite-net/blob/master/src/SQLiteAsync.cs)：

```
public Task<List<T>> QueryAsync<T> (string sql, params object[] args)
        where T : new () 
```

因此，如果您想要`List<string>`结果，则需要通过`string`for `T`。正如您所注意到的，`string`不能满足`new()`约束（因为它没有无参数构造函数），所以这是不可能的。

我浏览了代码，在我看来`new()`约束是不必要的，所以我的第一站是 sqlite-net 的人要求他们删除它（并验证它`T=string`是否有效）。

同时，您应该能够为此查询的结果创建一个类型：

```
public sealed class DistinctGroupNamesResult
{
  public string GroupName { get; set; }
} 
```

并使用一个简短的转换：

```
public async Task<List<String>> SelectDistinctGroupNames()
{
  var db = new SQLiteAsyncConnection(SQLitePath);
  var result = await db.QueryAsync<DistinctGroupNamesResult>("SELECT DISTINCT GroupName FROM SOs_Locations");
  return result.Select(x => x.GroupName).ToList();
} 
```

可能有更简单的解决方案，例如，使用更高级别的 LINQ 提供程序（但不确定它是否支持`DISTINCT`）。或者可以使用`SOs_Locations`作为结果类型而不是`DistinctGroupNamesResult`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-17T08:45:25.837

尝试这个 ：

```
List<String> resultString = new List<string>(); 
var result = await db.QueryAsync<DistinctGroupNamesResult>("SELECT * FROM SOs_Locations");

foreach (string item in result.Select(x=> x.GroupName).Distinct())
{
    resultString.Add(item);
}

return resultString; 
```

# mysql - 使用 mySQL & php PDO 更新数据库

> ID：13792646
> 
> 赞同：0
> 
> 时间：2012-12-09T22:41:03.893
> 
> 标签：mysql, pdo

我已经为我的一个模拟酒店预订表格的课程创建了一个数据库。
我试图从中获取值的数据库表名是 tblNameRes，字段是 fldName 和 pkEmail 我已经从数据库中获取了值并将它们显示在此表中： [http ://www.uvm.edu/~cchessia/ cs148/assign4/strugg.php](http://www.uvm.edu/~cchessia/cs148/assign4/strugg.php)

我想添加一个列来更新和删除这些记录，但我不太明白怎么做。我有这个代码：

```
$updating = $db->prepare('UPDATE `tblNameRes` SET `name` = `name` + ? WHERE `id` = ?');
$updating->execute(array(20, $id)); 
```

但我希望能够单击一个显示“更新”的链接，它会将我带到另一个页面，该页面允许我编辑数据并将其提交回数据库。我也希望能够以同样的方式删除数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:12:41.200

我对您想要什么感到有些困惑，您是否希望 PDO 代码同时更新和删除数据库中的项目？如果是这样，我使用它，我也是 PDO 的新手。也尽量不要在表/字段名称周围使用 '。

```
/** Code to update */

$query = "UPDATE tblNameRes SET name ='$name' WHERE id = :id";
$stmt = $db->prepare($query);
$stmt->BindValue(':id', $id, PDO::PARAM_INT);
$stmt->execute();

/** Code to delete */

$query = "DELETE FROM tblNameRes WHERE id = :id";
$stmt = $db->prepare($query);
$stmt->BindValue(':id', $id, PDO::PARAM_INT);
$query->execute(); 
```

让我知道这是否有帮助，或者不是您想要的。我是新来的，所以我不能发表“评论”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T11:22:10.160

/* 更新代码并在开头和结尾删除这个 '*/

`$query = "UPDATE tblNameRes SET name =:fname WHERE id = :id"; $stmt = $db->prepare($query); $stmt->BindValue('fname',$fname); $stmt->execute();`

# c++ - 只要我不使用它，我可以安全地创建对可能无效内存的引用吗？

> ID：13792648
> 
> 赞同：8
> 
> 时间：2012-12-09T22:41:20.740
> 
> 标签：c++

我想用 C++ 解析 UTF-8。解析新字符时，我事先不知道它是 ASCII 字节还是多字节字符的前导，也不知道我的输入字符串是否足够长以包含剩余的字符。

为简单起见，我想将接下来的四个字节命名为`a`、和`b`，并且因为我在 C++ 中，所以我想使用引用来完成它。`c``d`

只要我在知道访问是安全的之前不访问它们，在函数的开头定义这些引用是否有效？例子：

```
void parse_utf8_character(const string s) {
    for (size_t i = 0; i < s.size();) {
        const char &a = s[i];
        const char &b = s[i + 1];
        const char &c = s[i + 2];
        const char &d = s[i + 3];

        if (is_ascii(a)) {
            i += 1;
            do_something_only_with(a);
        } else if (is_twobyte_leader(a)) {
            i += 2;
            if (is_safe_to_access_b()) {
                do_something_only_with(a, b);
            }
        }
        ...
     }
} 
```

上面的例子显示了我想要在语义上做的事情。它没有说明我为什么要这样做，但显然真正的代码会涉及更多，所以只有当我知道访问是安全的并且我需要它们时才定义 b、c、d 会太冗长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:54:04.823

对此有三种看法：

*   形式上
    很好，谁知道呢。我可以用相当长的时间为你找出答案，但是，你也可以。或任何读者。而且这并不是非常实用。
    **编辑**：好的，查一下，因为你似乎不高兴我提到正式而不为你查一下。形式上你不走运：
    **N3280 (C++11) §5.7/5** *“如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则评估不得产生溢出；否则，行为是未定义的。”*
    这可能会产生不希望的行为的两种情况：(1) 计算超出段末尾的地址，以及 (2) 在启用调试检查的情况下计算超出编译器知道大小的数组的地址。

*   从技术上讲
    ，只要您避免任何左值到右值的转换，您可能就可以了，因为如果引用被实现为指针，那么它与指针一样安全，并且如果编译器选择将它们实现为别名，那也是好的。

*   在经济
    上不必要地依赖微妙之处会浪费你的时间，然后也会浪费其他人处理代码的时间。所以，*不是一个好主意*。相反，在保证它们所指的内容存在时声明名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T23:09:13.570

在讨论对不可访问内存的引用的合法性之前，您的代码中还有另一个问题。您的调用`s[i+x]`可能会`string::operator[]`使用更大的参数调用 then `s.size()`。C++11 标准说`string::operator[]`（**[string.access], §21.4.5**）：

> 要求：pos <= size()。
> 
> 返回： *(begin()+pos) 如果 pos < size()，否则引用类型为 T 且值为 charT() 的对象；参考值不得修改。

这意味着调用`s[x]`是`x > s.size()`未定义的行为，因此实现可以很好地终止您的程序，例如通过断言的方式。

由于`string`现在保证是连续的，因此您可以使用 &s[i]+x 来解决该问题以获取地址。在实践中，这可能会奏效。

然而，不幸的是，严格来说这样做仍然是非法的。这样做的原因是，该标准只允许指针算术，只要指针位于同一数组内，或者在数组末尾之后。(C++11) 标准的相关部分在 [expr.add], §5.7.5 中：

> 如果指针操作数和结果都指向同一个数组对象的元素，或者超过数组对象的最后一个元素，则计算不应产生溢出；否则，行为是未定义的。

因此，生成指向无效内存位置的引用或指针可能适用于大多数实现，但它在技术上是未定义的行为，即使您从不取消引用指针/使用引用。依赖 UB 几乎**从来都不**是一个好主意，因为即使它适用于所有目标系统，也不能保证它在未来继续有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T22:51:00.653

原则上，对可能非法的内存地址进行引用的想法本身是完全合法的。引用只是引擎盖下的指针，并且指针算术在解除引用发生之前是合法的。

编辑：此声明是实际声明，而不是已发布标准涵盖的声明。已发布标准的许多角落是形式上未定义的行为，但在实践中不会产生任何类型的意外行为。

以在数组结束后计算指向第二个项目的指针的可能性为例（正如@DanielTrebbien 建议的那样）。该标准说溢出可能导致未定义的行为。实际上，只有当数组的上端刚好短于指针可寻址的空间时，才会发生溢出。不太可能发生的情况。即使它确实发生了，在大多数架构上也不会发生任何不好的事情。违反的是关于指针差异的某些保证，此处不适用。

@JoSo如果您使用的是字符数组，则可以通过在代码中用常量指针替换常量引用来避免一些关于引用语义的不确定性。这样你就可以确定没有编译器会对这些值起别名。

# google-chrome - Nivoslider 淡入淡出动画在 Chrome 中不起作用

> ID：13792649
> 
> 赞同：1
> 
> 时间：2012-12-09T22:41:22.017
> 
> 标签：google-chrome, fade, nivo-slider

我已经配置了 nivoslider 横幅

[http://my-architect.com.au/index.html](http://my-architect.com.au/index.html)

它设置为仅显示淡入淡出效果。我已经测试过了。它适用于除 Chrome 之外的所有浏览器。请帮我解决这个问题，因为我在互联网上找不到任何帮助。我以前用过这个插件好几次，从来没有遇到过这种问题。

# c# - 在鼠标滚轮事件期间获取图表中的光标位置

> ID：13792650
> 
> 赞同：1
> 
> 时间：2012-12-09T22:41:32.857
> 
> 标签：c#, charts, mousewheel

我试图在 MouseWheel 事件期间获取鼠标的位置。在 MouseMove 事件中，我已成功使用 HitTest 并以这种方式开展业务，但由于某种原因，在 MouseWheel 事件期间，我的 HitTest 始终为 HitTest 数据点返回值 -1。谁能帮我解决这个问题？我将在下面包含我的代码。
我想要完成的是一个带有鼠标滚轮的基本放大事件。我想查看光标的位置，然后在任一侧添加当前可查看图表的 1/4。

```
 private void chData_MouseWheel(object sender, MouseEventArgs e)
    {
        try
        {
            HitTestResult pos = chData.HitTest(e.X, e.Y);

            if (e.Delta < 0)
            {
                chData.ChartAreas[0].AxisX.ScaleView.ZoomReset();
                chData.ChartAreas[0].AxisY.ScaleView.ZoomReset();
            }
            if (e.Delta > 0)
            {
                double xMin = chData.ChartAreas[0].AxisX.ScaleView.ViewMinimum;
                double xMax = chData.ChartAreas[0].AxisX.ScaleView.ViewMaximum;
                double yMin = chData.ChartAreas[0].AxisY.ScaleView.ViewMinimum;
                double yMax = chData.ChartAreas[0].AxisY.ScaleView.ViewMaximum;

                double posXStart = pos.PointIndex - (xMax - xMin) / 4;
                double posXFinish = pos.PointIndex + (xMax - xMin) / 4;
                double posYStart = pos.PointIndex - (yMax - yMin) / 4;
                double posYFinish = pos.PointIndex + (yMax - yMin) / 4;

                chData.ChartAreas[0].AxisX.ScaleView.Zoom(posXStart, posXFinish);
                chData.ChartAreas[0].AxisY.ScaleView.Zoom(posYStart, posYFinish);
            }
        }
        catch { }

    } 
```

顺便说一下，我的图表被称为 chData。我希望这只是某个地方的一个简单的错字。
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:59:49.170

好吧，经过几天的实验，我终于找到了可行的方法。
我将包含我的整个代码，因为我知道我无法在任何地方找到这个解决方案，所以我希望这可能会在未来对其他人有所帮助。

```
private void chData_MouseWheel(object sender, MouseEventArgs e)
    {
        try
        {
            if (e.Delta < 0)
            {
                chData.ChartAreas[0].AxisX.ScaleView.ZoomReset();
                chData.ChartAreas[0].AxisY.ScaleView.ZoomReset();
            }

            if (e.Delta > 0)
            {
                double xMin = chData.ChartAreas[0].AxisX.ScaleView.ViewMinimum;
                double xMax = chData.ChartAreas[0].AxisX.ScaleView.ViewMaximum;
                double yMin = chData.ChartAreas[0].AxisY.ScaleView.ViewMinimum;
                double yMax = chData.ChartAreas[0].AxisY.ScaleView.ViewMaximum;

                double posXStart = chData.ChartAreas[0].AxisX.PixelPositionToValue(e.Location.X) - (xMax - xMin) / 4;
                double posXFinish = chData.ChartAreas[0].AxisX.PixelPositionToValue(e.Location.X) + (xMax - xMin) / 4;
                double posYStart = chData.ChartAreas[0].AxisY.PixelPositionToValue(e.Location.Y) - (yMax - yMin) / 4;
                double posYFinish = chData.ChartAreas[0].AxisY.PixelPositionToValue(e.Location.Y) + (yMax - yMin) / 4;

                chData.ChartAreas[0].AxisX.ScaleView.Zoom(posXStart, posXFinish);
                chData.ChartAreas[0].AxisY.ScaleView.Zoom(posYStart, posYFinish);
            }
        }
        catch { }            
    } 
```

所以这段代码基本上做的是放大你光标所在的图表。它本质上会将轴最大/最小值限制为您当前查看的值的一半，但以光标为中心。
我知道可能有一些方法可以优化这一点，但目前我认为这足以让人们开始。
我希望这有帮助！

# jquery - Superslides中滑动动画与分页活动项目符号变化的不同步

> ID：13792652
> 
> 赞同：0
> 
> 时间：2012-12-09T22:41:44.510
> 
> 标签：jquery, jquery-plugins, dom-events

我使用[Superslides](http://nicinabox.github.com/superslides/)在我的主页上滑动一些内容。问题是滑动动画在分页的活动项目符号更改之前完成。[您可以在此处](http://nicinabox.github.com/superslides/)的演示中注意到这一点。

滑动动画的开始和活动子弹的变化之间有一些延迟。此外，触发滑块的“slides.animated”事件也会发生同样的问题。我希望在滑动动画开始而不是在滑动动画完成后立即触发此事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:20:25.267

尝试 ConversationJS 来触发它们，或者一次调用它们。使用基于事件的模型来做这样的动态事情要容易得多：[https ://github.com/rhyneandrew/Conversation.JS](https://github.com/rhyneandrew/Conversation.JS)

# android - 如何在 android 中使用 getRunningAppProcesses()？

> ID：13792653
> 
> 赞同：2
> 
> 时间：2012-12-09T22:41:47.697
> 
> 标签：android, android-activity

我有以下代码：

```
package com.example.task;

import java.util.List;

import android.os.Bundle;
import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.RunningAppProcessInfo;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainTask extends Activity {

private Button BprocessesShow;
private TextView processesShow;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_task);

    ActivityManager manager =       (ActivityManager)getSystemService(ACTIVITY_SERVICE);
     final List<ActivityManager.RunningAppProcessInfo> runningProcesses = manager.getRunningAppProcesses();

    BprocessesShow=(Button) this.findViewById(R.id.BshowProcesses);
    processesShow=(TextView) this.findViewById(R.id.showProcesses);     

    BprocessesShow.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            processesShow.setText((CharSequence) runningProcesses);
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main_task, menu);
    return true;
}

} 
```

好吧，我想做的是，当用户按下我制作的按钮时，我想向他/她展示他/她手机上所有正在运行的进程......当我在手机上运行此应用程序时，应用程序崩溃并且所有我收到一条消息不幸的是任务（那是我的名字的应用程序）已停止......任何帮助都会非常有用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:11:52.617

在这一行

```
processesShow.setText((CharSequence) runningProcesses); 
```

您正在将 List 转换为 CharSequence。尝试以下方式：

```
StringBuilder b = new StringBuilder();
for (ActivityManager.RunningAppProcessInfo process: runningProcesses) {
    b.append(processs.processName);
    b.append("\n");
}
processesShow.setText(b.toString()); 
```

# java - 是否可以在最小化 JFrame 之前执行某些操作？

> ID：13792657
> 
> 赞同：4
> 
> 时间：2012-12-09T22:42:08.010
> 
> 标签：java, swing, user-interface, jframe, frame

在 Swing 中，有几种方法可以捕获最小化框架（图标化）的事件，但该事件发生在框架被 ICONIFIED 时，这意味着在框架从屏幕上变得不可见之后。

现在我希望在框架消失**之前运行一些代码 -****当我单击任务栏按钮时立即**运行。

换句话说，**当JFrame“即将”（NOT AFTER）被最小化时做一些事情**。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:57:19.517

使用`WindowStateListener`, 并调用`WindowEvent#getNewState()`检查`Frame.ICONIFIED`。

这是一个例子：

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Frame;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };

        frame.add(panel);

        frame.addWindowStateListener(new WindowAdapter() {
            @Override
            public void windowStateChanged(WindowEvent we) {
                if (we.getNewState() == Frame.ICONIFIED) {
                    System.out.println("Here");
                }
            }
        });

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:47:20.310

创建您自己的`JFrame`并覆盖`setExtendedState`方法。

```
public class MyFrame extends JFrame{

   ....
    setExtendedState(JFrame.ICONIFIED); 
   ....

@Override
public void setExtendedState(int state) {       
    // your code

    super.setExtendedState(state);
   };

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T19:45:42.877

回答“在最小化 JFrame 之前是否可以执行某些操作？”这个问题的答案。

不幸的是，我会说不，我检查了将这些事件发送到 java 空间的[框架](http://code.metager.de/source/xref/openjdk/jdk8/jdk/src/windows/native/sun/windows/awt_Frame.cpp)和[窗口的 openjdk (windows) 的本机代码。](http://code.metager.de/source/xref/openjdk/jdk8/jdk/src/windows/native/sun/windows/awt_Window.cpp)据我了解，它是来自 windows API [VM_SIZE message](https://msdn.microsoft.com/en-us/library/windows/desktop/ms632646(v=vs.85).aspx)的回调。并且`SIZE_MINIMIZED`在“窗口已最小化”时发送，并且在实际最小化之前没有收到任何消息。

# database - 如何使用 Heroku 在 PGAdminIII 上查看用户数据库？

> ID：13792658
> 
> 赞同：2
> 
> 时间：2012-12-09T22:42:17.853
> 
> 标签：database, postgresql, heroku, pgadmin

我用我的 Heroku 数据库设置了 PGAdmin III。

我想知道如何查看我的用户数据库。我仍在构建我的网站，所以我想测试它们是如何在数据库中注册的。

但是，我所看到的只是大量具有类似“d10abc111ldlapsaman”的奇怪名称的数据库。如何访问我的用户数据库？

如果 PGAdmin III 不是正确的工具——我应该用什么工具来查看我仍在开发中的 Heroku 应用程序的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T17:06:34.737

您现在可能已经解决了您的问题，但您想要做的是转到`[https://postgres.heroku.com](https://postgres.heroku.com)`. 查看数据库的默认连接设置。现在，使用这些设置在*pgAdmin III中执行以下操作：*

1.  *文件 -> 添加服务器*
2.  *名称：*任何您想要的
    *主机：* `ec2-xx-xxx-xxx-xxx.compute-1.amazonaws.com`
    *端口：* `5432`
    *维护数据库：（* `yourdbname`在您的示例中为`d10abc111ldlapsaman`）
    *用户名：（* `uiuskwljksjdkje`更改为您的）
    *密码：（* `sdjfj3#@f333edfs`更改为您的）
3.  其他设置可以保持最初的状态。
4.  您不应该连接到服务器。展开它并滚动长列表，直到找到您的数据库名称（您放置为*Maintenance DB*的名称）。
5.  你完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-07T22:35:53.703

为仍然需要它的人更新答案，比如我：

1.  转到您的 heroku 帐户并找到您的数据库凭据（您应该打开您的应用程序，然后在附加组件上打开 postgres，最后是设置）： [截图](https://i.stack.imgur.com/hKlV2.png)

2.  在 pgadmin 中，您应该右键单击“服务器”-> 创建-> 服务器并输入您的凭据：

*   General/Name：pgadmin 将显示的名称（仅供您使用）

*   连接/主机名：凭据中的*主机*

*   连接/端口：凭据中的*端口*（可能是 5432）

*   连接/维护数据库：凭据中的*数据库*

*   连接/用户名：凭据中的*用户*

*   连接/密码：凭据中的*密码*（提示：选中复选框以保存）

*   SSL/SSL 模式：需要

*   高级/数据库限制：您的数据库（与维护数据库相同）-> 如果您不这样做，这将仅过滤您的许多其他垃圾邮件的数据库。

# windows-phone-8 - Windows Phone 8 模拟器不显示其操作系统的实际状态

> ID：13792661
> 
> 赞同：1
> 
> 时间：2012-12-09T22:42:50.193
> 
> 标签：windows-phone-8, hyper-v, internet-connection, static-ip-address, windows-phone-8-emulator

**问题：**

当我启动 Windows Phone 8 模拟器时，它会在 Hyper-V 中启动一个虚拟机。几分钟后，Windows Phone 操作系统被加载（我可以通过 Hyper-V 管理器连接到它（虽然用这种方式玩 WP 很不方便）），但模拟器不断报告：“Windows Phone 操作系统正在启动......” .

一段时间后（显然发生超时），从 Visual Studio 部署失败并出现错误：“应用部署失败。请重试。”

**我是怎么到这里的？**

当我使用 wifi 连接并拥有动态 IP 地址时，一切正常。模拟器工作正常，我在 Windows Phone 操作系统中有互联网。

但不幸的是，大多数时候我必须使用带有静态 IP 地址的以太网连接（由互联网提供商根据我的 MAC 地址分配给我）。在这种情况下，Windows Phone 模拟器中没有互联网。据我了解，Hyper-v 中的虚拟机使用自己的以太网卡（另一个 MAC 地址）连接到网络，并具有不同的 IP 地址。在这种情况下，它不会从我的提供商那里获得任何互联网。即使模拟器具有相同的 MAC 和 IP 地址，它也会给互联网流量造成混乱。

所以我的笔记本电脑应该是WP模拟器的路由器。这就是为什么我使用 Windows Phone 模拟器交换机（vEthernet（内部以太网端口 Windows Phone 模拟器内部交换机））共享我的主要互联网 (ICS)。在这种情况下，我在 Windows Phone 上确实有互联网，但是当我仅通过 Hyper-V 管理器连接时。在模拟器中，它甚至不显示操作系统何时加载。

在我停止与 Windows Phone 模拟器开关共享互联网后，模拟器本身运行良好.. 但没有互联网。

任何想法如何使 Windows 手机模拟器与我的互联网连接类型一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:27:34.750

这是 Microsoft 提供的关于[Windows Phone 8 模拟器故障排除的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694(v=vs.105).aspx)好资源。

按照说明进行操作，希望它可以解决您的问题

链接的[无法连接到网络目标或 Internet 站点](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681694%28v=vs.105%29.aspx#BKMK_network)部分应该可以解决您的问题。

更新：

另一个站点的另一个解决方案，

“从开始屏幕进入 Hyper-V 管理器。进入虚拟交换机管理器。查看是否有名为“Windows Phone Emulator Internal Switch”的虚拟交换机，如果没有，则创建一个名为“Windows Phone Emulator Internal Switch”的虚拟交换机。并使其连接类型为“内部”。”

在启动模拟器之前执行所有这些操作。如果这不能解决您的问题，请移除现有开关并重新创建新开关。

如果仍然没有解决您的问题，这里有一个关于类似问题的很好的讨论......检查一下。 [Windows Phone 8 模拟器无法连接到互联网](https://stackoverflow.com/questions/13159947/windows-phone-8-emulator-cant-connect-to-the-internet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:33:51.787

我想我从微软论坛得到了这个问题的答案。

DHCP 显然是 windows phone 模拟器的要求（它被列为 SDK 的要求）。而且，如果您有一个静态 IP 地址，那么您的 Windows Phone 模拟器上就不可能有互联网。即使使用 Internet 连接共享也是如此。

我可以看到的可能解决方案：

1.  在其他虚拟机（VMware、VirtualBox）中安装带有 Hyper-V 和模拟器的 Windows 8
2.  安装一些代理（不确定它是否会工作。我认为配置起来会很困难。）
3.  买个路由器。这似乎是最简单的解决方案。我会向所有人推荐这个，而不是像我那样浪费太多时间:)

# sql - Access 中的 SQL 查询更新多个字段

> ID：13792662
> 
> 赞同：3
> 
> 时间：2012-12-09T22:42:50.550
> 
> 标签：sql, ms-access

使用 MS Access，我可以在一个 SQL 查询中运行多个 UPDATE 语句吗？

假设我有一个包含 AF 列的表。我想做的是：

```
UPDATE table SET C = NULL WHERE C = 0
UPDATE table SET D = NULL WHERE D = 0
UPDATE table SET E = NULL WHERE E = 0 
```

我知道对于 SQL Server，我可以在每行之后使用“GO”，但这似乎不适用于 Access。是否有替代方案，或者我只需要运行大量单独的查询？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T22:48:19.387

```
UPDATE table SET 
  C=IIF(C=0,NULL,C),
  D=IIF(D=0,NULL,D),
  E=IIF(E=0,NULL,E)
WHERE
  C=0 OR D=0 OR E=0 
```

# ios - 停止背景音乐

> ID：13792668
> 
> 赞同：0
> 
> 时间：2012-12-09T22:43:03.790
> 
> 标签：ios, iphone, objective-c, media-player, avfoundation

我有这个有几个视图控制器的应用程序。在应用程序委托中，我对其进行了设置，以便应用程序完成启动后，背景音乐就会开始播放。但是，在另一个视图控制器上，我有一个播放这个视频的按钮。我的问题是当我播放电影时，背景音频与电影重叠。我的问题是，我如何在播放电影时停止音乐并在电影结束后播放音乐。这是我的 app_delegate.h：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>

@interface App_Delegate : NSObject <UIApplicationDelegate> {

    UIWindow *window;
    UINavigationController *navigationController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *navigationController;

@end 
```

这是我的 App_Delegate.m

```
#import "App_Delegate.h"
#import "RootViewController.h"

@implementation App_Delegate

@synthesize window;
@synthesize navigationController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

    {NSString* soundFilePath = [[NSBundle mainBundle] pathForResource:@"beethoven_sym_5_i" ofType:@"mp3"];
        NSURL* soundFileURL = [NSURL fileURLWithPath:soundFilePath];
        AVAudioPlayer* player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
        player.numberOfLoops=-1;
        [player play];
    }

    // Override point for customization after application launch.

    // Set the navigation controller as the window's root view controller and display.
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];

    return YES;
}

- (void)dealloc {
    [navigationController release];
    [window release];
    [super dealloc];
}

@end 
```

我的 MovieViewController.h：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>
#import <AVFoundation/AVFoundation.h>

@interface MovieViewController : UIViewController {

    IBOutlet UIScrollView *sesamescroller;
}

- (IBAction)playsesamemovie:(id)sender;

@end 
```

最后，我的 MovieViewController.m

```
#import "MovieViewController.h"

@interface MovieViewController ()

@end

@implementation MovieViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad

- (void)viewDidUnload

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)playsesamemovie:(id)sender {
    NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"How to make Sesame chicken" ofType:@"mp4"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlaybackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:moviePlayerController];
    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.fullscreen = YES;
    [moviePlayerController play];
}

- (void)moviePlaybackComplete:(NSNotification *)notification
{
    MPMoviePlayerController *moviePlayerController = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayerController];
    [moviePlayerController.view removeFromSuperview];
    [moviePlayerController release];
}

- (void)dealloc {
    [sesamescroller release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T22:58:01.523

您显示的代码有一个指向该`player`对象的局部变量。要控制播放器，其他代码需要能够找到它。像这样：

在`App_Delegate.h`：

```
@property (strong) AVAudioPlayer *player; 
```

在`App_Delegate.m`：（这个下划线是从哪里来的？最不合常规的！）

```
self.player = [[AVAudioPlayer alloc] initWithContentsOfURL:soundFileURL error:nil];
self.player.numberOfLoops=-1;
[self.player play]; 
```

然后，无论你想控制它：

```
[((App_Delegate *)([UIApplication sharedApplication].delegate)).player pause];
// ...
[((App_Delegate *)([UIApplication sharedApplication].delegate)).player play]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T05:42:34.430

```
 set scalling mode to your player

for Paused :
 [moviePlayerController setScalingMode:MPMoviePlaybackStatePaused];

 for Stopped:
 [moviePlayerController setScalingMode:MPMoviePlaybackStateStopped]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T06:21:48.063

如果可能在 iOS 上，您可以使用脚本功能将消息发送到静音。我曾经在 Mac OS X 上做过这个，我曾经从另一个应用程序控制 iTunes。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-01T13:44:26.700

# 首先在应用程序委托中添加歌曲开始

*.h 应用程序委托*

```
 #import <UIKit/UIKit.h>
 #import <AudioToolbox/AudioToolbox.h>
 #import <AVFoundation/AVFoundation.h>
 @class ViewController;
 @interface AppDelegate : UIResponder <UIApplicationDelegate,AVAudioPlayerDelegate>
{
    AVAudioPlayer *myAudioPlayer;
    NSDictionary *config;
   NSMutableArray *ARRAY;

}
-(void)stop;
@property(retain,nonatomic) NSDictionary *config;
@property (nonatomic, retain) AVAudioPlayer *myAudioPlayer;
@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

@end 
```

*.m 应用程序委托*

```
 @implementation AppDelegate
  {
      AVAudioPlayer*  audioPlayer;
  }
  @synthesize myAudioPlayer;
   - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions
  {
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:&error];
        audioPlayer.delegate = self;
       [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
       [[AVAudioSession sharedInstance] setActive: YES error: nil];
       [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
      audioPlayer.numberOfLoops =  1;
      audioPlayer.delegate=self;
      [audioPlayer play];
 }
 -(void)stop
 {
     [audioPlayer stop];

 }
 -(void)star
 {
     [audioPlayer play];

 } 
```

# 在应用程序中使用所需的启动和停止背景音乐时

# 直接调用这个方法-start和-stop

# ..它真的有效

# jquery - 如何将 jquery ui 菜单栏项放到单行中

> ID：13792671
> 
> 赞同：0
> 
> 时间：2012-12-09T22:43:31.317
> 
> 标签：jquery, jquery-ui, menubar, jquery-ui-menubar

jquery ui 菜单栏被添加到应用程序。每个菜单项从下一行开始，IE9 中的项目符号出现在第一列：

![在此处输入图像描述](../Images/db5f570003cb12a514ee168c0393cac2.png)

在 Firefox 中，项目符号出现在每个菜单项之前。

如何强制同一行中的所有菜单栏项？

页面来源为：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="themes/base/jquery.ui.all.css" type="text/css" title="ui-theme" /> 
 <link href="../../Content/Css/Site.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="/Scripts/jquery/jquery-1.8.3.js"></script>
<script src="/Scripts/jquery-ui-1.9.2.custom.js" type="text/javascript"></script>
<script type="text/javascript" src="/Scripts/menubar.js"></script>
<script type="text/javascript">
$(function () {
            $("#bar1").menubar({
            autoExpand: true,
                select: function (event, ui) {
                    if (ui.item.context.href == null) {
                        // Enter is pressed
                        location.href = ui.item[0].firstChild.href;
                        return;
                    }
                    location.href = ui.item.context.href;
                }
            });
            $('#bar1').css('display', 'block');
        });
    </script>
</head>
<body>
    <div id="container">
    <ul id="bar1">
    <li><a href="#About">About</a></li>
    <li>
        <a href="#File">File</a>
        <ul>
            <li><a href="#Open...">Open...</a></li>
            <li class="ui-state-disabled"><a href="#">Open recent...</a></li>
            <li><a href="#Save">Save</a></li>
            <li><a href="#Save%20as...">Save as...</a></li>
            <li><a href="#Close">Close</a></li>
            <li><a href="#Quit">Quit</a></li>
        </ul>
    </li>
    <li>
        <a href="#Edit">Edit</a>
        <ul>
            <li><a href="#Copy">Copy</a></li>
            <li><a href="#Cut">Cut</a></li>
            <li class="ui-state-disabled"><a href="#">Paste</a></li>
        </ul>
    </li>
    <li>
        <a href="#View">View</a>
        <ul>
            <li><a href="#Fullscreen">Fullscreen</a></li>
            <li><a href="#Fit%20into%20view">Fit into view</a></li>
            <li>
                <a href="#Encoding">Encoding</a>
                <ul>
                    <li><a href="#Auto-detect">Auto-detect</a></li>
                    <li><a href="#UTF-8">UTF-8</a></li>
                    <li>
                      <a href="#UTF-16">UTF-16</a>
                      <ul>
                         <li><a href="#Option%201">Option 1</a></li>
                         <li><a href="#Option%202">Option 2</a></li>
                         <li><a href="#Option%203">Option 3</a></li>
                         <li><a href="#Option%204">Option 4</a></li>
                      </ul>
                   </li>
                </ul>
            </li>
            <li><a href="#Customize...">Customize...</a></li>
        </ul>
    </li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:22:58.247

您的页面未与菜单栏 CSS 链接。你可以在这里得到它：http: [//view.jqueryui.com/menubar/themes/base/jquery.ui.menubar.css](http://view.jqueryui.com/menubar/themes/base/jquery.ui.menubar.css)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T22:52:48.760

```
ul#bar1
{
list-style: none;
padding: 0;
margin: 0;
}

ul#bar1 li
{
float: left;
margin: 0 0.15em;
}

ul#bar1 li a
{
height: 2em;
line-height: 2em;
float: left;
width: 9em;
display: block;
text-decoration: none;
text-align: center;
} 
```

# python - 我需要一个算法，它将一个点返回到 Python 中的列表中

> ID：13792677
> 
> 赞同：4
> 
> 时间：2012-12-09T22:44:29.440
> 
> 标签：python, algorithm, graph, point

我正在使用 Zelle 的 Python 图形库，我需要一些帮助来创建一个算法来返回列表中的数字。

基本上我有 5x7 板分成 100x100 像素网格。这与这样的列表相对应。

```
| 0| 1| 2| 3| 4|  
| 5| 6| 7| 8| 9|  
|10|11|12|13|14|  
|15|16|17|18|19|  
|20|21|22|23|24|  
|25|26|27|28|29|  
|30|31|32|33|34| 
```

我需要一种算法，它可以通过鼠标单击获取网格的中心点并将其转换为与列表对应的数字。例如点 (50,50) 将返回 0，点 (150,150) 将返回 6，等等。

非常感谢您花时间帮助找出这个算法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T22:49:38.497

```
In [1]: def f(x, y):
   ...:     return y // 100 * 5 + x // 100
   ...: 

In [2]: f(50, 50)
Out[2]: 0

In [3]: f(150, 150)
Out[3]: 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T22:47:23.877

```
def point_to_xy(x_mouse,y_mouse):
    x_pos = math.floor(x_mouse/100) #or x_mouse // 100
    y_pos = math.floor(y_mouse/100) #or y_mouse // 100
    return x_pos,y_pos

def xy_to_index(x_pos,y_pos):
    array_0_width = 5 #the width of the 2d array
    #position is y*width + x_offset
    return y_pos*array_0_width+x_pos

x,y = point_to_xy(mouse.x,mouse.y)
print xy_to_index(x,y) 
```

我认为那会奏效

```
>>> x,y = point_to_xy(150,150) #x,y=1,1
>>> print xy_to_index(x,y)
6.0
>>> x,y = point_to_xy(50,50) # x,y=0,0
>>> print xy_to_index(x,y)
0.0 
```

# three.js - 哪个数组被geometry.faces.materialIndex 中的值索引？

> ID：13792686
> 
> 赞同：0
> 
> 时间：2012-12-09T22:45:24.837
> 
> 标签：three.js

我想通过将几何定义为一组顶点和面来创建自己的网格（三个.js，使用 CanvasRenderer）：

```
geometry = new THREE.Geometry();

...
geometry.vertices.push(new THREE.Vector3(0, 0, 0));
geometry.vertices.push(new THREE.Vector3(1, 0, 0));
geometry.vertices.push(new THREE.Vector3(2, 0, 0));
...

...
geometry.faces.push(new THREE.Face3(1, 4, 3));
geometry.faces.push(new THREE.Face3(1, 2, 4));
geometry.faces.push(new THREE.Face3(3, 4, 5));
...

geometry.computeFaceNormals(); 
```

因为我希望我的网格具有不同颜色的面，所以我生成了一组材质。正如我在一些教程中所读到的，我将此数组称为geometry.materials：

```
geometry.materials = [
new THREE.MeshBasicMaterial({ color: 0xFF00A0 }),
new THREE.MeshBasicMaterial({ color: 0x00FF00 }),
new THREE.MeshBasicMaterial({ color: 0x0000FF }),
...
]; 
```

然后，我将索引分配给 geometry.faces[i].materialIndex：

```
geometry.faces[0].materialIndex = 0;
geometry.faces[1].materialIndex = 2;
geometry.faces[2].materialIndex = 1;
... 
```

最后，我生成网格并将其添加到场景中：

```
mesh = new THREE.Mesh(geometry, new THREE.MeshFaceMaterial());
scene.add(mesh); 
```

好吧，这段代码不起作用。我得到的只是一个不可见的网格（看不到任何面孔）。我的问题是：

1.  'geometry.materials' 是定义材质数组的默认变量名吗？faces[i].materialIndex 中的值指的是哪个数组？
2.  为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:00:04.203

**教程几乎总是过时的。改为研究 three.js 示例。**

如果您正在使用教程，请务必查看迁移 wiki：[https](https://github.com/mrdoob/three.js/wiki/Migration) ://github.com/mrdoob/three.js/wiki/Migration 。

几何不再具有材料属性。

不要将`materials`数组添加到`geometry`，而是执行以下操作：

```
mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) ); 
```

三.js r.53

# codeigniter - 向杂货店添加/编辑表单添加“假”字段

> ID：13792687
> 
> 赞同：2
> 
> 时间：2012-12-09T22:45:38.027
> 
> 标签：codeigniter, grocery-crud

在我的用户表上，我有一个 128 字符的“hashed_pa​​ssword”字段。在我的 User_model 中，我具有加密和解密密码的功能。加密时，我随机生成一个盐，并将其存储在 hashed_pa​​ssword 字段的前 64 个字符中。散列后的 pw 结果存储在最后 64 个字符中。解密时我做相反的事情。

我猜几乎是通用的，永远不会显示明文密码。

因此，当我的用户（通过grocery_CRUD）添加/编辑用户时，我认为可以在添加和编辑表单中包含*虚假*字段：“password”和“passconf”：

```
$crud->fields('username', ... <other fields> ... 'password', 'passconf'); 
```

只是为了清楚 - 我的用户表上不存在“密码”和“密码”字段。我只希望我的用户在那里输入新密码，然后以我自己的方式处理它。

但它不起作用。我的意思是添加/编辑表单正确呈现了两个假字段（下面的验证正常工作）但是如果我尝试更新任何其他用户信息然后“更新更改”，该操作将失败，“加载”图形短暂旋转但没有更新数据库。

我已经尝试在一个非常简单的grocery_CRUD 表单上复制它，没有其他复杂性并获得相同的行为：表单正确呈现但不会更新数据库。

甚至可以使用*假*字段吗？我错过了什么吗？

杂货店_CRUD 是否试图在导致数据库更新失败的幕后处理这些字段？

我当时希望做以下事情：

```
$crud->set_rules('password', 'Password', 'callback_valid_password');
$crud->set_rules('passconf', 'Password Confirmation', 'matches[password]');

$crud->callback_before_insert(array($this,'encrypt_password_callback'));
$crud->callback_before_update(array($this,'encrypt_password_callback'));

function encrypt_password_callback($post_array, $primary_key = null){
    if ($post_array['password'] <> '') {
        $this->User_model->set_password($post_array['username'], $post_array['password']);
    }
}

function valid_password($str) {
    //do some pw validation
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T03:16:19.517

我已经使用插入和更新回调解决了这个问题，然后加密密码，然后在插入或更新数据库调用之前取消设置有问题的“密码”和“密码”字段。

# javascript - Chrome 扩展错误 tab.url

> ID：13792696
> 
> 赞同：0
> 
> 时间：2012-12-09T22:46:29.380
> 
> 标签：javascript, google-chrome-extension, tabs

如果他们在 youtube.com 上，我基本上只是想获取当前的标签 URL。我不断从脚本中收到错误消息。

> `Error:`
> 
> `Uncaught TypeError: Cannot call method 'getSelected' of undefined`

显现

```
{
    "name": "YouTube Fix",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "Fix some of the annoying little things in YouTube.",
    "icons": {
        "16": "icon.png",
        "48": "icon.png",
        "128": "icon.png"
    },
    "content_scripts": [{
        "matches": ["http://www.youtube.com/*"],
        "js": ["background.js"],
        "run_at": "document_start"
    }],
    "permissions": ["tabs"]
} 
```

背景.js

```
//this is what is giving me the error:
chrome.tabs.getSelected(null, function (tab) {
    myFunction(tab.url);
});

function myFunction(tablink) {
    if (tablink == "http://www.youtube.com") {
        window.location = "http://www.youtube.com/feed/subscriptions/u";
    }
    document.getElementById("comments-textarea").disabled = false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:57:40.953

以下分叉很好，不需要`chrome.tabs.getSelected(null, function (tab) {})`，因为您的页面总是运行`"matches": ["http://www.youtube.com/*"],`；

更多地将此条件添加到您的代码中`if(document.getElementById("comments-textarea") != null){`

**工作背景.js**

```
 if (window.location == "http://www.youtube.com") {
        window.location = "http://www.youtube.com/feed/subscriptions/u";
    }
    if (document.getElementById("comments-textarea") != null) {
        document.getElementById("comments-textarea").disabled = false;
    } 
```

**清单.json**

```
{
    "name": "YouTube Fix",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "Fix some of the annoying little things in YouTube.",

    "content_scripts": [{
        "matches": ["http://www.youtube.com/*"],
        "js": ["background.js"],
        "run_at": "document_start"
    }],
    "permissions": ["tabs"]
} 
```

如果您需要更多信息，请与我们联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:25:17.220

您将 background.js 作为内容脚本而不是背景或事件页面运行，并且[https://developer.chrome.com/extensions/content_scripts.html](https://developer.chrome.com/extensions/content_scripts.html)说“内容脚本有一些限制。它们不能......使用 chrome。 * API（chrome.extension 的一部分除外）"

相反，你应该把类似的东西

```
"background": {
  "scripts": ["background.js"],
  "persistent": false
}, 
```

进入你的清单。有关更多详细信息，请参阅[https://developer.chrome.com/extensions/event_pages.html](https://developer.chrome.com/extensions/event_pages.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T22:51:50.153

从这里引用： [https ://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/A5bMuwCfBkQ](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-extensions/A5bMuwCfBkQ)

> chrome.tabs.getSelected() 已弃用。以下页面说明了如何改用 chrome.tabs.query： [http](http://code.google.com/chrome/extensions/whats_new.html#16) ://code.google.com/chrome/extensions/whats_new.html#16相关的文本位是：“””方法 getAllInWindow() 和 getSelected () 已被弃用。要获取有关指定窗口中所有选项卡的详细信息，请使用带有参数 {'windowId': windowID} 的 chrome.tabs.query()。要获取在指定窗口中选择的选项卡，请使用 chrome .tabs.query() 带有参数 {'active': true}. """

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T23:24:47.627

`chrome.tabs.getSelected`已[弃用](https://developer.chrome.com/extensions/whats_new.html#16)。改用[`chrome.tabs.query`](https://developer.chrome.com/extensions/tabs.html#method-query)：

```
chrome.tabs.query({
    "active": true
}, function(tab){
    console.log(tab[0]);  //selected tab
}); 
```

此外，内容脚本[无法访问](http://developer.chrome.com/extensions/content_scripts.html) `chrome.tabs`API。做这个：

```
chrome.extension.getBackgroundPage().chrome.tabs.query(... 
```

（这可能不起作用。未经测试。）

# php - 将帖子元限制为特定模板

> ID：13792701
> 
> 赞同：0
> 
> 时间：2012-12-09T22:47:09.500
> 
> 标签：php, wordpress

我正在尝试将帖子元限制为特定模板。

这段代码似乎可以解决问题

```
$post_id = $_GET['post'] ? $_GET['post'] : $_POST['post_ID'] ;
$template_file = get_post_meta($post_id,'_wp_page_template',TRUE); 
```

但是在运行调试时，我得到了 Undefined index: post_ID/post 错误。

有其他选择吗？或者你能帮我解决这个问题吗？

编辑：

用`if (isset($_GET['post']))`并为我修复了整个代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:52:16.830

用你的三元来避免你可能想要的警告

```
$post_id = isset($_GET['post']) ? $_GET['post'] : $_POST['post_ID'] ; 
```

`$_GET['post']`在尝试执行此操作之前，它将检查值帖子是否存在，而不是发出警告。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-09T22:51:12.507

`Undefined index`不表示错误。它只是意味着该变量`$_POST['post_ID']`不存在。您应该添加它来隐藏通知：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

# c++ - 如何在基于 Windows 8 Xaml 的 ListView 中禁用缓存？

> ID：13792714
> 
> 赞同：1
> 
> 时间：2012-12-09T22:48:27.517
> 
> 标签：c++, windows-8, winrt-xaml

我要做的是用预加载的图像动态填充 Windows 8 Metro 应用程序中的 ListView。

对于每个项目（URI），我用这样的代码（C++）做的很简单：

```
Windows::UI::Xaml::Media::Imaging::BitmapImage^ bitmapSrc =
    ref new Windows::UI::Xaml::Media::Imaging::BitmapImage();

bitmapSrc->CreateOptions = Windows::UI::Xaml::Media::Imaging::BitmapCreateOptions::IgnoreImageCache;

bitmapSrc->UriSource = uri;

img->Source = bitmapSrc;

LoadListView->Items->Append(img); 
```

但是当我删除（在应用程序中）由 URI 描述的源图像并创建具有相同名称的新文件并尝试将其重新加载到列表中时，我失败了，并且显示的图像是旧的（已删除）。我认为这里有一些缓存工作。我试图避免通过 CreateOptions 中的 IgnoreImageCache 值进行缓存，但它不起作用。

任何线索如何在 Windows 8 应用程序中禁用可能绑定到 ListView 的 BitmapSource (Image) 缓存？

我尝试了几个受 Silverlight 和 WPF 启发的方向，但不幸的是没有一个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:40:38.163

受到评论的鼓舞，我提出了我自己找到的答案。

此处解释了更广泛的上下文（以及 C# 视角）：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/171dfe66-78b5-4340-bd78-244337f31287/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/171dfe66-78b5-4340-bd78-244337f31287/)

很快我相信这是引用计数的问题。只要 Uri 有效并分配给对象实例，WinRT 就会将图像加载（缓存）在 BitmapImage^ 中，在我的示例中将其添加到列表中。

在从列表中释放 Uri 之前从 BitmapImage^ 清除 Uri 解决了我的问题。

根据有问题的示例，以下代码解决了问题（包含在执行列表删除的部分中）：

```
auto item = (Image^)LoadListView->Items->GetAt(selected);
auto src = (Windows::UI::Xaml::Media::Imaging::BitmapImage^)item->Source;

src->UriSource = nullptr; //this line is critical

LoadListView->Items->RemoveAt(selected); 
```

# java - 实现接口java

> ID：13792715
> 
> 赞同：-1
> 
> 时间：2012-12-09T22:48:30.387
> 
> 标签：java, multithreading, oop

> **可能重复：**
> [Java 中的接口是什么？](https://stackoverflow.com/questions/1321122/what-is-an-interface-in-java)

我有对象语言和对象范式的经验，但我对“实现”声明有一个疑问。**怀疑它是否包含代码（功能）？所以要非常具体“MyClass 实现 XInterface”是否包含来自实现该接口的其他类的代码？**

类继承很简单，包括代码，在某种程度上，我知道“包括”可能不是正确的词，但当您使用“扩展”时，这就是谈论的地方。您包括来自父类的功能。

所以让我们以 Runnable 接口为例。它只有一次 run() 减速。这可能没有任何意义，只是 MyClass 将实现 run()。这让我感到困惑，比如在某个文件中实现一行减速会让我变得更好......我将通过使用“实现”获得的实际功能（和代码）在哪里？所以如果我使用：

```
MyClass implements Runnable {}

Runnable obj = new (Runnable) MyClass();

obj.run();//will call run() implementation from MyClass
obj.otherFunctions();/* so this calls functions from other classes that implement interface, but I don't know what functions from other classes are implementing, or even do I need them?*/ 
```

我还必须每个线程有一个类，比如`MyClass extends Thread implements Runnable`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:53:38.180

实现接口的类 Cl 意味着接口中定义的所有方法都必须在类 Cl 中实现。然后调用类可以调用这些方法，因为已知 Cl 实现（填充）接口。

例如查看 List 接口：ArrayList 和 LinkedList 都实现了 List，它们具有相同的公共方法（例如 add()、get()），但内部工作方式不同。

```
List list = new ArrayList();
list.add(3); 
```

稍后如果有人希望 ArrayList 被另一个类交换，该类也实现了 List，只需要交换一行

```
List list = new LinkedList();
list.add(3); 
```

如果对接口进行编程，则代码对特定类的依赖程度较低。当您稍后想要交换一个类以进行测试时，这具有优势，您可以通过测试用例控制该类。

# java - 如何在空的 ArrayList 中测试元素类型的类？

> ID：13792717
> 
> 赞同：1
> 
> 时间：2012-12-09T22:49:07.317
> 
> 标签：java

所以我有一个从参数传递的通用 ArrayList。

例如：

```
private <T> void testClass(ArrayList<T> data){
  if(data[0] instanceof Foo){
    //do something
  } eles if(data[0] instanceof Bar){
    //do something else
  }
} 
```

但是arraylist 不保证里面有一个元素并且可能为空，并且`get(0)`会引发异常。我怎样才能做到这一点？

* * *

编辑：

未启动的泛型数组怎么样？

例如：

```
private <T> void testClass(T[] data){
  if(data.get(0) instanceof Foo){
    //do something
  } eles if(data.get(0) instanceof Bar){
    //do something else
  }
} 
```

我试过`T.class.getName().equals("Foo")`了，但它不起作用......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:52:06.647

无法区分空`ArrayList<String>`和`ArrayList<Integer>`. 由于类型擦除，这是非常刻意的。（那是因为在运行*时*没有区别。）

数组不同。至少只要数组实际上是用字面量类型初始化的，就可以使用`array.getClass().getComponentType()`.

# php - 引导模式

> ID：13792721
> 
> 赞同：0
> 
> 时间：2012-12-09T22:49:46.827
> 
> 标签：php, twitter-bootstrap, modal-dialog

我对引导模式有疑问，我无法在该模式上定义一个 id 来显示一些信息。

`<a href=\"#likes\" data-toggle=\"modal\">test</a>`

其他代码

```
<div id="likes" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
   <h3 id="myModalLabel">People who like this</h3>
   </div>
   <div class="modal-body">
   <?php
   $quelike = mysql_fetch_array(mysql_query("SELECT * FROM likes WHERE statusid='$statusid'"));

   echo " <div class=\"modal-content\"> ".$quelike['firstname']." </a><br /> </div> <div class=\"spacelikes\"></div>";
   ?>
   </div>
   <div class="modal-footer">
   <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
   </div>
   </div> 
```

我只需要为每个帖子设置喜欢帖子的信息。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:00:01.830

首先，您的锚可能存在问题：

```
<a href="#likes" data-toggle="modal">test</a> 
```

应该：

```
<a data-target="#likes" data-toggle="modal">test</a> 
```

如果您打算它启动您的模态。

至于实际传递 statusId 这取决于。如果在页面的过程中 statusId 是相同的，那么你应该可以工作（尽管正如其他人提到的那样，你的代码中存在 SQL 注入漏洞并且 mysql_ 函数不应再使用）。

如果状态 id 在页面过程中可以更改（即可以通过 javascript 设置），那么您可能应该将获取详细信息的逻辑放置在新页面中并在模式中使用此页面：

```
<a href="page-which-takes-statusId.php" data-target="#likes" data-toggle="modal">test</a> 
```

它将在模式中加载该页面并显示您需要的信息。

# c# - 绘图应用程序使用哪种设计模式

> ID：13792726
> 
> 赞同：3
> 
> 时间：2012-12-09T22:50:41.373
> 
> 标签：c#, .net, oop, design-patterns

我正在为 autocad 编写一个插件，但我遇到了一个设计问题。我认为可以通过设计模式来解决。

我正在尝试绘制一张桌子，桌子有两个部分，一个框架和一个顶部/表面。所以我有这 3 个课程：

*   **Draw**：该类验证用户输入并请求插入点，创建框架和曲面，并将新创建的实例插入到 AutoCAD DB 中。
*   **Frame**：根据长度和深度计算框架。
*   **表面**：根据长度和深度计算表面。

我的问题是，如果用户给出的长度值大于最大值，那么我必须生成 2 个或更多表面。表面类还必须知道哪个表面是第一个和最后一个。并且**Draw**类还应该知道第一个在哪里结束以放置第二个表面。

我现在所做的是将名为 calcNumberOfSurface(int len) 的方法放入 Draw 类中，并在此方法中迭代表面的数量以每次创建 Surface 类的新状态。这个解决方案也有两个问题，Surface 类不知道它是第一个还是最后一个。并且无法定义第一个 Surface 的结束位置。我必须在 Draw 类中实现这一点。

是否有任何最佳实践或设计模式可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T06:22:19.063

我同意普雷斯顿的观点。在您在这里了解设计模式之前，我认为您必须首先考虑所有必需的类以及每个类将具有哪些成员。对于您的示例：

*   结束位置不是 Surface 类的成员吗？
*   另一类可能表示`List<Surface>`（表面列表）。此类将包含第一个和最后一个 Surfaces。

# jquery - 调整页面大小时，使用 jQuery 移动列以便下一个

> ID：13792728
> 
> 赞同：3
> 
> 时间：2012-12-09T22:50:57.750
> 
> 标签：jquery, html-table, multiple-columns

目前，我正在网站上列出这样的信息：

td1 td2 td3 td4
td5 td6 td7 td8

在调整第 4 和第 8 td 现在被切断的浏览器大小时，我希望发生这种情况：

td1 td2 td3
td4 td5 td6
td7 td8

...最终，如果您继续前进，它将如下所示：

td1
td2
td3
td4
等

有谁知道我如何使列向下移动到下一个 tr 并将前一列推过一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T01:01:33.390

我从来没有听说过这样的事情，这样做有点傻。

我很快就写了一些东西。你可以在这里查看

[http://jsfiddle.net/M2JBS/37/](http://jsfiddle.net/M2JBS/37/)

它确实需要更多的工作，但如果你真的需要使用表格，我想这是一个开始......

您必须考虑应用于表格的类，重新计算宽度并将它们再次放回页面。此外，您还需要使它们适合桌子本身。

**从表中提取所有 TD 并从中创建 div 会更容易。**

HTML

```
 <div id="tableContainer">
    <table class="destroy" border="1">
        <tr>
            <td>test 1</td>
            <td>test 2</td>
            <td>test 3</td>
        </tr>
        <tr>
            <td>test 4</td>
            <td>test 5</td>
            <td>test 6</td>
        </tr>
        <tr>
            <td>test 7</td>
            <td>test 8</td>
            <td>test 9</td>
        </tr>
        <tr>
            <td>test 10</td>
            <td>test 11</td>
            <td>test 12</td>
        </tr>
        <tr>
            <td>test 13</td>
            <td>test 14</td>
            <td>test 15</td>
        </tr>
    </table>
</div> 
```

​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

```
window.onresize = function() {
    customizeTables()
};

function customizeTables() {
    // new table
    var nt = new Array();
    // current table tds
    var elements = new Object();
    // table parent width
    var wrap = $('table').parent().width();
    // current generated width
    var ct = 0;
    var fw = 0;
    // col of new table
    var col = new Array();

    $('table.destroy td').each(function(index, ob) {

        fw = $(ob).width() + 2; //borders
        fw += parseFloat($(ob).css('padding-left').replace("px", ""));
        fw += parseFloat($(ob).css('padding-right').replace("px", ""));
        fw += parseFloat($(ob).css('margin-left').replace("px", ""));
        fw += parseFloat($(ob).css('margin-right').replace("px", ""));

        if ((ct + fw) <= wrap) {

            ct += fw;
        } else {

            nt.push(col);
            ct = fw;
            col = [];
        }

        col.push(ob);
        // all elements (all tds)
        elements[index] = ob;
    });
    nt.push(col);

    var $table = $('<table class="destroy" border="1">');
    var row = '';

    $.each(nt, function(row, cols) {

        var row = '<tr>';

        for (i in cols) {
            row += '<td>' + $(cols[i]).html() + '</td>';
        }

        $table.append(row + '</tr>');

    });

    $table.append('</table>');
    $('#tableContainer').empty();
    $table.appendTo('#tableContainer');
}
customizeTables();​ 
```

# internet-explorer - 出现 YUI 上下文菜单时，表格 tbody 的滚动条在 IE8、IE9 上意外滚动到顶部

> ID：13792730
> 
> 赞同：1
> 
> 时间：2012-12-09T22:51:09.013
> 
> 标签：internet-explorer, scrollbar, contextmenu, scrolltop, yui2

我在带有 YUI 上下文菜单和可滚动表的 IE8 和 IE9 上看到了一个奇怪的行为，如果有人能告诉我如何解决以下问题，我将不胜感激：

参考[http://jsfiddle.net/nguanon/yL5Sa/](http://jsfiddle.net/nguanon/yL5Sa/) 在IE8&IE9上让tbody可滚动时，滚动条滚动到底部后，右击一行出现contextmenu，观察滚动条自动跳到顶部.

代码取自 YUI 示例，添加了以下 CSS：

```
table#dataset thead {
 display: block;
}
table#dataset tbody {
 display: block;
 overflow: auto;
 max-height: 200px;
}
</style>
<!--[if IE]>
<style>
table#dataset tbody {
 position: absolute;
}
</style>
<![endif]--> 
```

在 YUI 2.6.0 中，跳转到顶部后，滚动条回到我们单击其他区域时的位置（隐藏上下文菜单） 在 YUI 2.9.0 中，滚动条跳转到顶部并停留在那里。两种方式都不是良好的用户体验，我想了解它为什么会跳跃以及我们是否可以防止这种情况发生。

调试显示，一旦执行上下文菜单的setFocus，滚动条就会自动跳转。从 menu.js 的实现中，也有关于此视口跳转的注释，但似乎计时器并未修复此行为：

/* 通过计时器设置焦点修复了 Firefox、IE 和 Opera 中的竞争条件，其中浏览器视口在尝试定位和聚焦菜单时会跳转。*/

在寻找这个问题的解决方案时，我也在[https://www.redhat.com/archives/freeipa-devel/2012-July/msg00240.html](https://www.redhat.com/archives/freeipa-devel/2012-July/msg00240.html)看到了类似的情况，其中保存了当前滚动条的位置并且是回到后来的位置。但是，我只是想看看我们是否可以完全阻止跳跃。我认为这是 YUI 特定的并且已经在 YUI 网站上提出了问题，但是如果任何 SO 用户体验过 YUI 2 代码并知道答案，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:22:57.177

不幸的是，YUI2 已经到了生命的尽头，所以不会发布任何版本。但是，有些问题有单独的补丁，通常可以在错误报告的票证中找到。许多剩余的问题以“无法修复”状态关闭，但它们仍被归档并可以检查。寻找与滚动相关的 DataTable 问题提供了[此列表](http://yuilibrary.com/projects/yui2/query?status%5B%5D=new&status%5B%5D=assigned&status%5B%5D=accepted&status%5B%5D=closed&component=DataTable&milestone=&sprint=&version=&priority=&severity=&location=&summary=scroll&description=&keyword=&owner=&type=&resolution=wontfix&reporter=&create_until_date=mm/dd/yy&create_since_date=mm/dd/yy&browser=&until_date=mm/dd/yy&since_date=mm/dd/yy&cc=&changed_days=&created_days=&col%5B%5D=id&col%5B%5D=type&col%5B%5D=priority&col%5B%5D=owner&col%5B%5D=milestone&col%5B%5D=status&col%5B%5D=summary&order=priority&dir=desc&order1=&dir1=desc&order2=&dir2=desc&max=100&report_name=&report_private=on&update=Update#report-result)。希望答案就在那里。

# jquery - 我无法将数据收集从淘汰赛发布到我的 webapi 服务

> ID：13792732
> 
> 赞同：4
> 
> 时间：2012-12-09T22:51:32.353
> 
> 标签：jquery, knockout.js, asp.net-web-api

我无法将数据收集从淘汰赛发布到我的 webapi 服务。

我的淘汰码：

```
 $.ajax("/api/tasks/PostTask", {
                    data: ko.toJSON({ tasks: self.tasks }),
                    type: "post", contentType: "application/json",
                    success: function (result) { alert(result) }
                });
            }; 
```

如果我将 ko.toJSON({ tasks: self.tasks }) 的输出放到 div 标签中，结果是：

{"tasks":[{"title":"task# 0","isDone":false},{"title":"task#1","isDone":false},{"title":"task# 2","isDone":false},{"title":"task# 3","isDone":false},{"title":"task# 4","isDone":false},{"title" :"task# 5","isDone":false}]}

所以，我正在发送数据。

我的 webapi 方法：

```
 public void PostTaskCollection(List<Task> tasks)
    {

        foreach (Task item in tasks)
        {
            string _title = item.title;
        }

    } 
```

当我放一个断点时，我看到任务变量为空。我究竟做错了什么？为什么集合没有传递给我的 webapi 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T06:38:25.710

您不需要将您`self.tasks`的对象包装在新对象中，否则 Web.Api 将由于`"tasks"`前缀而无法正确绑定。所以就写吧`ko.toJSON(self.tasks)`。

所以这个电话应该有效：

```
$.ajax("/api/tasks/PostTask", {
        data: ko.toJSON(self.tasks),
        type: "post",
        contentType: "application/json",
        success: function (result) { alert(result); }
    }); 
```

# c - 将文本文件读取到某个点并在该点输入数据

> ID：13792736
> 
> 赞同：-2
> 
> 时间：2012-12-09T22:52:30.997
> 
> 标签：c

基本上我在用 C 编程，我想做的是读取一个文本文件到某个点，然后一旦它在那里，然后打印我从程序计算的数据。

我已经阅读了所有`fread`, `fseek`,`fgets`函数等......但并不真正了解如何使用它们。我有一个要与谷歌地球一起使用的 .kml 文件。我的程序计算坐标，所以我想把它们放在文件的某个点上。这是文件中的一段数据：

```
/*******text file******/

Linestring

stlye

etc....

coordinates

3.0,36.8333333

1.986105,37.166788

0.963341,37.491533

-0.068231,37.807386

/*******eof*********/ 
```

所以它应该搜索直到它读取坐标，然后我的所有数据都应该输入。我想可能有类似的东西

```
char[25] = "coordinates";

if (function_that_searches_file == char){
    fprintf(myfile, "data%lf", data); // etc..
} 
```

某处，但找不到任何东西。因此，任何帮助或指出正确的方向将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:41:36.960

C 没有字符串，因此您不能将它们与这样的相等性进行比较。您必须使用`strcmp()`来比较两个字符串（[在此处阅读有关如何使用它的信息](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html)）。

例如，您可以创建一个循环来读取文件的每一行，并在该循环中放入：

```
if(!strcmp(lineFromFile, "coordinates"))
{
    // Do something here
} 
```

注意：`strcmp()`有点难以记住，因为它在相等时返回 0。这就是它被否定的原因，因为 0 在 C 中是假的。

# google-app-engine - Google App Engine - 从 doGet() 中的 URI 检索参数？

> ID：13792737
> 
> 赞同：1
> 
> 时间：2012-12-09T22:52:32.093
> 
> 标签：google-app-engine, servlets, get

在 servlet 的 doGet() 方法中，如何获取 URI 中给出的参数？例如，如果我有一个映射到的 servlet `/getContentServlet`，那么可以`$.get()`对 URI执行 jQuery `http://mysite.appspot.com/getContentServlet?var1=foo&var2=bar`：

```
public void doGet(HttpServletRequest request, HttpServletResponse response){
    // Get parameters "foo" and "bar" from the URI
} 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:10:54.207

您可以通过使用[getParameter](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)方法来实现：

```
public void doGet(HttpServletRequest request, HttpServletResponse response){
    String var1 = request.getParameter("var1"); // foo
    String var2 = request.getParameter("var2"); // bar
} 
```

# c++ - 如何在botan加密中检查输入的密码是否正确

> ID：13792739
> 
> 赞同：2
> 
> 时间：2012-12-09T22:52:44.510
> 
> 标签：c++, qt, encryption, aes, botan

我有一个加密和解密文件的代码，该代码运行良好，但问题是当我尝试使用不正确的密码解密文件时，而不是给出错误，执行解密导致文件与原始文件。是否可以检查在解密中输入的密码是否与加密中使用的密码相同？

```
void AES::Encrypt(SymmetricKey key, InitializationVector iv, string inFilename,  string outFilename)
{
    ifstream in(inFilename.c_str(),std::ios::binary);
    ofstream out(outFilename.c_str(),std::ios::binary);

    QFile* file = new QFile(inFilename.c_str());

    qint64 size = file->size();
    qint64 i = 0;
    percent = -1;

    Pipe pipe(get_cipher("AES-256/CBC", key, iv,ENCRYPTION),new DataSink_Stream(out));
    pipe.start_msg();
    SecureBuffer<byte, 4096> buffer;
    while(in.good())
    {
        in.read((char*)&buffer[0], buffer.size());
        const size_t got_from_infile = in.gcount();
        pipe.write(buffer, got_from_infile);
        i += got_from_infile;
        int p = ((i * 100) / size);
        if (p != percent)
        {
            percent = p;
            emit progress(percent);
        }
        if(in.eof()) pipe.end_msg();
        while(pipe.remaining() > 0)
        {
            const size_t buffered = pipe.read(buffer, buffer.size());
            out.write((const char*)&buffer[0], buffered);
        }
    }
    out.flush();
    out.close();
    in.close();

    qDebug() << "Encrypted!";
}

void AES::Decrypt(SymmetricKey key, InitializationVector iv, string inFilename,  string outFilename)
{
    ifstream in(inFilename.c_str(),std::ios::binary);
    ofstream out(outFilename.c_str(),std::ios::binary);

    QFile* file = new QFile(inFilename.c_str());

    qint64 size = file->size();
    qint64 i = 0;
    percent = -1;

    Pipe pipe(get_cipher("AES-256/CBC", key, iv,DECRYPTION),new DataSink_Stream(out));
    pipe.start_msg();
    SecureBuffer<byte, 4096> buffer;
    while(in.good())
    {
        in.read((char*)&buffer[0], buffer.size());
        const size_t got_from_infile = in.gcount();
        pipe.write(buffer, got_from_infile);
        i += got_from_infile;
        int p = ((i * 100) / size);
        if (p != percent)
        {
            percent = p;
            emit progress(percent);
        }
        if(in.eof()) pipe.end_msg();
        while(pipe.remaining() > 0)
        {
            const size_t buffered = pipe.read(buffer, buffer.size());
            out.write((const char*)&buffer[0], buffered);
        }
    }
    out.flush();
    out.close();
    in.close();

    qDebug() << "Decrypted!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:08:38.300

加密时，首先将未加密文件的全部内容的哈希附加到其末尾，然后对新文件进行加密。因此，加密文件将比未加密文件大几个字节。

解密后，首先检查最后的hash是否有效，然后从文件中剥离得到原始内容。

# python - 停止 Tkinter 菜单自动运行命令

> ID：13792743
> 
> 赞同：2
> 
> 时间：2012-12-09T22:53:20.050
> 
> 标签：python, python-3.x, tkinter

我正在学习 python，这周我掌握了 GUI 编码的基础知识。

我遇到的问题是底部的**f1handler1()**，请您帮我理解如何让菜单命令等到首先单击相关的菜单项？目前，只要我执行二次鼠标单击以调出菜单，它就会在我做出菜单选择之前自动删除所选项目:(（但由于某种原因，退出选项没有？）

非常感谢。
（抱歉，如果代码难以阅读，这是我的第一语言和 GUI，我正在从我正在做的课程和大量的网络搜索中慢慢学习。）

```
from tkinter import *

ALL = N+S+W+E

class Application(Frame):

    def __init__(self, master=None):
        #initiate the primary window.
        Frame.__init__(self, master)
        self.master.rowconfigure(0, weight=1)
        self.master.columnconfigure(0, weight=1)

        self.rowconfigure(0, weight=0)
        self.rowconfigure(1, weight=0)
        self.rowconfigure(2, weight=3)
        self.columnconfigure(0, weight=0)
        self.columnconfigure(1, weight=1)
        self.columnconfigure(2, weight=1)

        self.grid(sticky=ALL)
        self.frameset()

    def frameset(self):
        #define and setup frames with columns and rows for widgets
        #Colours added to framesets to help designing layout. delete them
        self.Frame1 = Frame(self, bg='blue')   # D
        self.Frame2 = Frame(self, bg='green')  # E
        self.Frame3 = Frame(self)              # L
        self.Frame4 = Frame(self, bg='green')  # E
        self.Frame5 = Frame(self, bg='orange') # T
        self.Frame6 = Frame(self, bg='yellow') # E colours

        self.Frame1.rowconfigure(0,weight=0)
        self.Frame2.rowconfigure(0,weight=0)
        self.Frame3.rowconfigure(0,weight=1)
        self.Frame4.rowconfigure(0,weight=1)
        self.Frame5.rowconfigure(0,weight=1)
        self.Frame6.rowconfigure(0,weight=1)

        self.Frame1.columnconfigure(0,weight=0)
        self.Frame2.columnconfigure(0,weight=0)
        self.Frame3.columnconfigure(0,weight=1)
        self.Frame4.columnconfigure(0,weight=1)
        self.Frame5.columnconfigure(0,weight=1)
        self.Frame6.columnconfigure(0,weight=1)

        self.Frame1.grid(row=0, column=0, rowspan=1, columnspan=1, sticky=ALL)
        self.Frame2.grid(row=0, column=1, columnspan=2, sticky=ALL)
        self.Frame3.grid(row=1, column=0, rowspan=2, sticky=ALL)
        self.Frame4.grid(row=1, column=1, columnspan=2, sticky=ALL)
        self.Frame5.grid(row=2, column=1, rowspan=1, columnspan=1, sticky=ALL)
        self.Frame6.grid(row=2, column=2, sticky=ALL)

        label4a = Label(self.Frame4, text='Accounts', bg='orange')
        label4b = Label(self.Frame4, text='Recent Payroll', bg='yellow')
        label4a.pack(side=LEFT)
        label4b.pack(side=RIGHT)

        self.objects()

    def objects(self):
        self.f3ListBox = Listbox(self.Frame3, selectmode='single')
        self.f3ListBox.insert(1,'Colchester 441')
        self.f3ListBox.insert(2,'Chelmsford 914')
        self.f3ListBox.insert(3,'London 123')
        self.f3ListBox.grid(sticky=ALL)
        self.f3ListBox.bind("<Button-3>", self.f1handler1)

        f5ListBox = Listbox(self.Frame5, selectmode='single')
        f5ListBox.insert(0,'Fred Asus')
        f5ListBox.insert(1,'Tom Yahoo')

        f5ListBox.grid(sticky=ALL)

        f6ListBox = Listbox(self.Frame6, selectmode='single')
        f6ListBox.insert(1,'S123456') # DELETE
        f6ListBox.grid(sticky=ALL)

        #Dropdown menu to use on the top left corner        
        var = StringVar()
        var.set('Costcode')
        dmenu1 = OptionMenu(self.Frame1,var, 'Costcode','Name')
        dmenu1.pack(side=TOP, fill=BOTH)

    def f1handler1(self,event):
        """Creates a popup menu for the alternative mouse button.
        Edit this to add more options to that popup"""
        select = self.f3ListBox.delete(ACTIVE)
        popup = Menu(self, tearoff=0)
        popup.add_command(label='Quit',command=self.quit)
        popup.add_command(label='delete',command=select) #add more of these for more options

        try:
            popup.post(event.x_root, event.y_root)
        except:
            pass

root = Tk()
app = Application(master=root)
app.mainloop() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T01:36:25.810

问题实际上是在添加命令之前，你有

```
select = self.f3ListBox.delete(ACTIVE) 
```

一旦执行此操作，它就会执行删除操作并将其结果分配给`select`. 你应该做类似的事情

```
select = lambda: self.f3ListBox.delete(ACTIVE) 
```

创建一个将`delete`在适当时间调用的函数。然后，您可以按照您`select`的操作将其作为菜单项的命令传递。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T23:17:11.980

有时在 tkinter 中设置按钮命令时，会自动调用该命令，而不是等待点击。一个可能的解决方案可能是添加 lambda

```
popup.add_command(label='Quit',command= lambda: self.quit) 
```

# vb.net - 从 .txt 文件中读取长度超过一定数量的行

> ID：13792752
> 
> 赞同：1
> 
> 时间：2012-12-09T22:54:44.530
> 
> 标签：vb.net, visual-studio-2010, listbox, readline

我已经在网上搜索了一段时间，试图找出如何简单地将 .txt 文件中超过 0 个字符的行读取到 VB 的列表框中。我正在使用 VS 2010，并且只想将包含内容的行读取到列表框中。

例如，我只想阅读标记为 1 的行。

```
1
1

1
1

1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T22:56:41.187

您可以结合使用[ReadAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)和 LINQ：

```
ListBox1.DataSource = IO.File.ReadAllLines("file.txt").Where(Function(x) x.Length > 0).ToList 
```

要从第 3 行开始，请使用`Skip`：

```
IO.File.ReadAllLines("file.txt").Skip(2).Where(Function(x) x.Length > 0).ToList 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:00:26.150

因此，您只想添加带有文本的行：

```
Dim notEmptyLines = From line In IO.File.ReadLines(path)
                    Where Not String.IsNullOrWhiteSpace(line)

For Each line In notEmptyLines
    ListBox1.Items.Add(line)
Next 
```

如果您还想计算空格，请替换`Not String.IsNullOrWhiteSpace(line)`为。`line.Length <> 0`

# objective-c - Obj-C 从字符串到浮点数（数学）

> ID：13792754
> 
> 赞同：-2
> 
> 时间：2012-12-09T22:55:14.270
> 
> 标签：objective-c, string, math

> **可能重复：**
> [评估字符串中的数学表达式？(NSString)](https://stackoverflow.com/questions/9651333/evaluate-math-expression-in-string-nsstring)

嘿，我有这个字符串，但我怎样才能使它成为浮点方程。

```
5+5*10+(5*2 + sinf(1)) 
```

我怎样才能从一个字符串计算这件作品。

```
NSString *stringvalue = @"5+5*10+(5*2 + sinf(1))"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:46:14.800

[正如在这个答案](https://stackoverflow.com/a/4892194/846273)中指出的那样，您可以使用[GCMathParser](http://apptree.net/parser.htm)或[DDMathParser](https://github.com/davedelong/DDMathParser)。

# javascript - 仅在元素之间显示边框网格线

> ID：13792755
> 
> 赞同：10
> 
> 时间：2012-12-09T22:55:19.730
> 
> 标签：javascript, html, css

我想使用 CSS属性在元素之间`border`制作精细的`1px`网格，就像这样。`span`

```
 |    
  1  |  2  
-----|-----
  3  |  4  
     | 
```

这是我目前拥有的。很明显，它并不完全有效。

```
<html>
<head>
<style>
  div {
    width: 204px;
  }
  span {
    display: inline-block;
    height: 100px;
    width: 100px;
    border: 1px solid #ccc;
    border-left-width: 0;
    border-top-width: 0;
  }
</style>
</head>
<body>
<div><span>1</span><span>2</span><span>3</span><span>4</span></div>
</body>
</html> 
```

当`div`设置为`306px`并且元素重排时，解决方案应该动态适应。

```
 |     |
  1  |  2  |  3
-----|-----|-----
  4  |
     | 
```

最好只有 CSS，或者纯 Javascript。可以忽略IE7等较旧的浏览器。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-12-20T21:35:44.317

我想出了这种方法，我认为它在使用最少的 CSS 和 hack 时效果很好：[https ://codepen.io/eriklharper/pen/JMKMqa](https://codepen.io/eriklharper/pen/JMKMqa)

```
<div class="border">
  <div class="grid">
    <div>Item 1</div>
    <div>Item 2</div>
    <div>Item 3</div>
    <div>Item 4</div>
  </div>
</div>

.border {
  background-color: gray;
}
.grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(auto, auto));
  grid-gap: 1px;
}
.grid > div {
  background-color: white;
  padding: 10px;
} 
```

It introduces an extra wrapping element around the whole grid (which isn't perfect either) but I've found this to be a worthwhile compromise, despite. The lack of ability to simply style the `grid-gap`s directly is a shortcoming with CSS Grid that should be addressed with the spec.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T23:27:35.780

## 1\. *HTML+CSS*解决方案

*HTML：*

```
<div>
    <i></i>
    <span>1</span>
    <span>2</span>
    <span>3</span>
    <span>4</span>
    <i></i>
</div>​ 
```

*CSS：*

```
div {
    position: relative;
    width: 202px;  /* or 303px (or 100px * n + n) */
    font-size: 0;
}

span {
    display: inline-block;
    height: 100px;
    width: 100px;
    border: 1px solid #ccc;
    border-left-width: 0;
    border-top-width: 0;
    font-size: 12px;
}

i {
    position: absolute;
    background: #fff;
    height: 1px;
    bottom: 0;
    left: 0;
    width: inherit;
}

​i:first-child {
    height: auto;
    width: 1px;
    top: 0;
    left: auto;
    right: 0;
}​ 
```

**演示：http:** [//jsfiddle.net/HTgKJ/](http://jsfiddle.net/HTgKJ/)

* * *

## 2\. *HTML+CSS+JavaScript*解决方案

*HTML+CSS：*

```
<!-- See approach 1\. --> 
```

*JavaScript：*

```
var block = document.querySelectorAll(".block");
for (var i = 0; i < block.length; i++) {
    var spanWidth = block[i].querySelector("span").clientWidth,
        n = Math.floor(block[i].clientWidth / spanWidth);

    block[i].querySelector("i:first-child").style.left =
        (n * spanWidth + (n - 1)) + "px";
}​ 
```

**演示：http:** [//jsfiddle.net/HTgKJ/1/](http://jsfiddle.net/HTgKJ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T03:05:59.343

我正在使用这个解决方案，它会自动设置边框。

[http://jsfiddle.net/aLz2T/3/](http://jsfiddle.net/aLz2T/3/)

HTML

```
<div><span>1</span><span>2</span><span>3</span><span>4</span></div>​ 
```

CSS

```
div {
    width: 204px; /* adjust to get less/more columns */
}

span {
    display: inline-block;
    height: 100px;
    width: 100px;
    border: 1px solid #ccc;
    border-left-width: 0;
    border-top-width: 0;
}​ 
```

JavaScript

```
var a = document.querySelector('div');

// columns
var b = parseInt(a.offsetWidth / (100 + 2), 10);

for(var c, d = document.querySelectorAll('span'), e = d.length, i = 0; c = d[i]; i++) {
    // column
    c.style.borderRightWidth = ((i + 1) % b) != 0 ? "1px" : "0";
    // row
    c.style.borderBottomWidth = parseInt(i / b, 10) * b < e - b ? "1px" : "0";
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-17T16:28:45.680

If you're looking for a solution without JavaScript that works with an irregular amount of "table cells" I've created a solution with css `border` and pseudo-classes.

See this post here: [https://stackoverflow.com/a/49309785/6560093](https://stackoverflow.com/a/49309785/6560093)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-10T00:08:18.213

在这里你可以找到我的 jQuery 解决方案。[http://jsfiddle.net/UZJmd/7/](http://jsfiddle.net/UZJmd/8/)

您只需输入所需的**跨度**数，然后定义所需的**列**数。其他一切都是动态定义的。

```
​1- var spanWidth = parseInt($("span").css("width")); 
2- var spanSize = $("span").size();
3- var nColumns = 2;
4- var nLines = Math.floor(spanSize/nColumns+0.5);
5- 
6- $(function() {
7-     $("div").css({"width": (spanWidth*nColumns + 1*(nColumns-1))+"px"});
8-     for(var i = 0; i <= spanSize; i++) {
10-         if((i+1)%nColumns == 0) {
11-             $('span').eq(i).css({"border-right": 0});
13-         }
14-         if(Math.floor(i/nColumns) >= nLines-1) {
15-             $('span').eq(i).css({"border-bottom": 0});
16-         }
17-     }
18- }); 
```

在**第 3 行**中，我们定义了我们想要的列数。在**第 10 行**，我们检查它是否是该行的最后一个跨度，我们将右边框设置为 0。在**第 14 行**，我们检查我们是否在最后一行，然后将下边框设置为 0。

# r - 一周内的值总和

> ID：13792756
> 
> 赞同：5
> 
> 时间：2012-12-09T22:55:33.750
> 
> 标签：r, time-series, xts, zoo

我想按周对帧的每一列中的值求和。我可以做到这一点，但由于某种原因，总和不起作用：

```
> zoo.data <- zoo(data.frame(x=11:20,y=1:10),as.Date(1:10,origin="1970-01-01"))
> apply.weekly(zoo.data, mean)
            x y
1970-01-04 12 2
1970-01-11 17 7
> apply.weekly(zoo.data, sum)
1970-01-04 1970-01-11 
        42        168 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T23:03:16.417

这是因为**xts**作者决定添加一种`mean.xts`方法来模仿基础 R 的旧行为（本质上是`colMeans`）。 `mean.xts`现在调度`xts`对象而不是`mean.default`，并`apply.weekly`临时将您的`zoo`对象转换为`xts`内部。

```
R> apply.weekly(zoo.data, mean)
            x y
1970-01-04 12 2
1970-01-11 17 7
R> apply.weekly(zoo.data, mean.default)
1970-01-04 1970-01-11 
         7         12 
```

* * *

但是，我认为这是你想要做的：

```
R> apply.weekly(zoo.data, colMeans)
            x y
1970-01-04 12 2
1970-01-11 17 7
R> apply.weekly(zoo.data, colSums)
             x  y
1970-01-04  36  6
1970-01-11 119 49 
```

# c++ - 使用 Serial.Read 输入在 Arduino 上设置液晶光标

> ID：13792760
> 
> 赞同：0
> 
> 时间：2012-12-09T22:56:02.553
> 
> 标签：c++, arduino, arduino-c++

我意识到您可以在 lcd.setCursor 中使用变量，但是当我尝试使用从串行端口读取的整数时，它对我不起作用。有可能的？

这是我的代码的相关部分的样子，目前没有打印：

```
int align

if( Serial.available() ) {
  align = Serial.read();
} 
if( Serial.available() ) {
  lcd.setCursor(align,0);
  lcd.print('test');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T02:13:03.393

看起来您阅读了串行，因此 Serial.available() 变为 0。第二个块不运行。取出

```
} 
if( Serial.available() ) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:50:15.293

你确定那是你想做的吗？如果您尝试读取一个数字然后移动光标，我认为您需要读取直到用户按下 enter('\r') 然后将您的字节从 read() 转换为整数。

```
char align[100];
while(Serial.available() && i< 99) {
  align[i++] = Serial.read();
}
align[i++]='\0';
lcd.setCursor(atoi(align),0); 
```

如果这不是您想要的，可以添加一些 sudo 代码注释，以便人们可以遵循您的思路。

# linux - 在 bash 中查找和替换

> ID：13792768
> 
> 赞同：1
> 
> 时间：2012-12-09T22:56:55.093
> 
> 标签：linux, bash, sed, replace

如何在`bash`脚本中编写简单的查找和替换，但替换来自运行 PHP 脚本。

例如，我需要在文件中查找：`{{KEY}}`并替换为：的输出。能做到这一点吗？`php -f generate_key.php``app.config``sed`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:33:43.617

我会建议这些方面的东西，而不是上面基于 sed 的解决方案：

```
KEY="$(php -f generate_key.php)" awk '{gsub("{{KEY}}", ENVIRON["KEY"]);print;}' < app.config > app.config.new && \
mv app.config.new app.config 
```

（**在 T+20h 编辑**使用`ENVIRON`而不是`awk -v VAR=VAL`由于后者处理转义序列`VAL`）

主要是因为它执行替换而不对 php 脚本的输出应用任何解释或转换。

如果您的 PHP 脚本的输出包含正斜杠，则基于 sed 的解决方案将失败，并且它们还将替换您的 PHP 脚本输出中存在的各种转义字符（`\n`s、`\t`s 等），这可能不是您想要的.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-09T23:21:04.417

试试这个

```
sed -e "s/{{KEY}}/`php -f generate_key.php`/g" app.config 
```

这将替换字符串替换为 PHP 脚本的输出。如果要就地修改 app.config，`-i`请在命令行中添加选项

```
sed -i -e "s/{{KEY}}/`php -f generate_key.php`/g" app.config 
```

正如@je4d 所观察到的，如果输出`generate_key.php`包含正斜杠`/`，则必须使用另一个分隔符，例如

```
sed -e "s;{{KEY}};`php -f generate_key.php`;g" app.config 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:12:01.967

尝试：

```
cat app.config|sed 's/{{KEY}}/something/g' 
```

# c++ - C++ DirectX FPS 相机怪异

> ID：13792772
> 
> 赞同：0
> 
> 时间：2012-12-09T22:57:40.227
> 
> 标签：c++, camera, directx, direct3d, frame-rate

嘿，最近我一直在尝试在 DirectX 9 中制作一个好的工作相机，但我遇到了问题。因此，让我向您展示我的一些代码。

我不使用该`D3DXMatrixLookAtLH`功能，因为我也想旋转相机。

```
D3DXMATRIX matView,
           matVTranslate,
           matVYaw,
           matVPitch,
           matVRoll;

D3DXTranslation(&matVTranslate, x, y, z);
D3DXRotationY(&matVYaw, yaw);
D3DXRotationX(&matVPitch, pitch);
D3DXRotationZ(&matVRoll, roll);

matView = matVTranslate * (matVPitch * matVYaw * matVRoll);

d3ddev->SetTransform(D3DTS_VIEW, &matView); 
```

它会产生非常奇怪的效果。有没有更好的方法来创建 fps 相机？如果您想运行该程序，这里是 exe。[Exe](http://www.gamefront.com/files/22729202/ZombieLand.exe)如果您想要代码，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:38:17.370

即使是 fps，您也可以轻松使用`D3DXMatrixLookAtLH`( [doc )。](http://msdn.microsoft.com/de-de/library/windows/desktop/bb205342%28v=vs.85%29.aspx)角色的眼睛位置是 pEye。对于视图的旋转，您可以保存一个向量，其中包含您的视图方向的归一化向量。这个你可以用你的旋转矩阵进行转换，然后将它添加到 pEye 中以获取 pAt。

```
D3DXMATRIX matView,
           matLook;

D3DXMatrixRotationYawPitchRoll(&matLook,pitch,yaw,roll);

D3DXVector3 lookdir;
// yaw,pitch,roll are assumed to be absolute, for deltas you must save the lookdir
lookdir = D3DXVector3(0.0,0.0,1.0);
D3DXVec3TransformCoord(&lookdir,&lookdir,&matLook);

D3DXVector3 at;
at = camerapos + lookdir;

D3DXMatrixLookAtLH(&matView,&camerapos,&at,&up);

d3ddev->SetTransform(D3DTS_VIEW, &matView); 
```

# asp.net - 如何将面板内的标签作为 DynamicContextKey 发送？

> ID：13792776
> 
> 赞同：0
> 
> 时间：2012-12-09T22:58:20.803
> 
> 标签：asp.net, ajax, jquery, asp.net-ajax

```
 <tr class="content" id="row1" onmouseover="$find('pce_1').showPopup();" onmouseout="$find('pce_1').hidePopup();">
<td class="style28">
    &nbsp;</td>
        <td class="style30">
            <asp:Panel ID="panel_player_1" runat="server">
            </asp:Panel>
        </td>
        <td class="style21" align="right">
            <asp:Panel ID="panel_table_1" runat="server" Width="50px">
            <ajaxToolkit:PopupControlExtender ID="PopupControlExtender1" runat="server" PopupControlID="Panel222" TargetControlID="panel_table_1"
               DynamicContextKey='<%# Eval("panel_table_1") %>' BehaviorID="pce_1"
               DynamicControlID="Panel222"
               DynamicServiceMethod="GetDynamicContent" Position="Bottom" OffsetX="-485" />
            </asp:Panel>
        </td>

</tr> 
```

我有十个这样的块...我通过代码隐藏在 panel_table_1 和 panel_player_1 中放置了一个标签...我想将 panel_table_1 内的文本 o 标签作为 DynamicContextKey 发送。我应该怎么做？

# intellij-idea - IntelliJ IDEA 12.0 调试器不适用于 Griffon 1.1.0 项目

> ID：13792778
> 
> 赞同：1
> 
> 时间：2012-12-09T22:59:10.103
> 
> 标签：intellij-idea, griffon

我正在尝试使用 InelliJ IDEA 12.0 调试 Griffon 1.1.0 项目，但没有命中断点。我正在执行的命令是`test-app -integration`. 它运行良好，但没有任何调试器交互。如果我使用默认的 JUnit Runner，则断点会按预期命中，但 Griffon 框架功能均不可用，这对我的集成测试有什么要求。

IntellyJ IDEA 中的“调试器”选项卡显示`Connecting to the target VM, address: '127.0.0.1:51778', transport: 'socket'`，但似乎没有连接到正在运行的 VM（它需要端口 5005 上的调试器）。

我是 IntelliJ IDEA 的新手，所以我可能在这里遗漏了一些东西......

谁能帮我？

提前致谢，

吉列尔莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:09:24.787

我在 IntelliJ 错误跟踪器上创建了问题：http: [//youtrack.jetbrains.com/issue/IDEA-97130](http://youtrack.jetbrains.com/issue/IDEA-97130) 这将在 12.0.1 或 12.0.2 中修复。

作为解决方法，您可以创建连接到 localhost:5005 的单独远程运行配置，并在运行 Griffon 运行配置后立即运行此远程运行配置。

# python - python列表的新手

> ID：13792781
> 
> 赞同：1
> 
> 时间：2012-12-09T22:59:23.767
> 
> 标签：python, arrays, list, input, numbers

这是我当前的代码：

```
while True:
        try:
            mylist = [0] * 7
            for x in range(7):
                    sales = float(input("Sales for day:"))
                    mylist[x] = sales
                    if  sales < 0:
                        print ("Sorry,invalid. Try again.")
        except:
            print ("Sorry, invalid. Try again.")
        else:
            break

print (mylist)

best = max(sales)
worst = min(sales)

print ("Your best day had", best, "in sales.")
print ("Your worst day had", worst, "in sales.") 
```

当我运行它时，我得到了这个：

```
Sales for day:-5
Sorry,invalid. Try again.
Sales for day:-6
Sorry,invalid. Try again.
Sales for day:-7
Sorry,invalid. Try again.
Sales for day:-8
Sorry,invalid. Try again.
Sales for day:-9
Sorry,invalid. Try again.
Sales for day:-2
Sorry,invalid. Try again.
Sales for day:-5
Sorry,invalid. Try again.
[-5.0, -6.0, -7.0, -8.0, -9.0, -2.0, -5.0]
Traceback (most recent call last):
  File "C:/Users/Si Hong/Desktop/HuangSiHong_assign9_part.py", line 45, in <module>
    best = max(sales)
TypeError: 'float' object is not iterable 
```

我不太确定如何对其进行编码，以便列表不接受负值，因为我只想要 0 或更大的值。

我不确定如何解决 TypeError 问题，以便在我的代码中打印最小值和最大值

我的最后一个问题是，如果我想找到用户输入的七个输入的平均值，我应该如何将这些值从列表中提取出来

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:03:16.487

你最好的选择是将数据检查放入一个while循环中。这将继续循环这个值，直到满足您的条件（`>0`）

此外，这可能会让用户混淆他们在哪一天输入结果。另外，您需要使用列表来获取最大值/最小值，而不是单个值。将它们放在一起，并进行以下更改：

```
 for x in range(7):
            sales=-1
            while (sales<0):
                sales = float(input("Sales for day {0}".format(x)))
                mylist[x] = sales
                if  sales < 0:
                    print ("Sorry,invalid. Try again.") 
```

稍后进行此更改：

```
best = max(my_list)
worst = min(my_list) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-09T23:03:42.227

你的意思是说：

```
best = max(my_list)
worst = min(my_list) 
```

至于有效性检查，问题在于如果输入无效，您仍然会转到下一个值`x`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T01:04:44.030

也许（未经测试）：

```
mylist = []
while len(mylist) < 7:
    sales = float(input("Sales for day %s:" % str(len(mylist)+1)))
    if  sales >= 0:
        mylist.append(sales)
    else:
        print ("Sorry,invalid. Try again.")

print (mylist)

best = max(mylist)
worst = min(mylist)

print ("Your best day had", best, "in sales.")
print ("Your worst day had", worst, "in sales.") 
```

# c++ - malloc 或我的错误？

> ID：13792782
> 
> 赞同：1
> 
> 时间：2012-12-09T22:59:33.897
> 
> 标签：c++, c, gcc

这是我的错误还是错误/断言`malloc`本身失败？

> alloc.c:2451: sSYSMALLOc: 断言`(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size)
> 
> > = (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1)) ) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' 失败。

*   libstdc++6:amd64 4.7.2-2ubuntu1
*   GCC 4.7.2
*   ubuntu 12.10/64位

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:01:21.240

最可能的解释是您的程序中存在内存错误（写入释放的内存、缓冲区溢出等）。一个彻底的错误的`malloc()`可能性要小得多。

# java - 以字符串格式递增 IP 地址

> ID：13792784
> 
> 赞同：6
> 
> 时间：2012-12-09T22:59:49.947
> 
> 标签：java, string

我是java新手，我正在尝试找到一种通过用户输入IP地址范围递增的方法。

例如从`192.168.0.1`到`192.168.0.255`。但是，我的应用程序目前的工作方式是将*from*和 to *ip*地址作为`String`.

有没有一种方法*可以增加用户输入**的*所有 IP 地址？

 *希望这是有道理的，请不要喷我，我已经在寻找答案了！

编辑！

它实际上是通过地址范围ping，所以到目前为止，这里有一个小代码，“主机”是从另一个类传入的，我想循环访问地址：

```
 public static String stringPing(String stringPing, String host){

    String ipAddress;
    ipAddress = host;

    try
    {
        InetAddress inet = InetAddress.getByName(ipAddress);

        boolean status = inet.isReachable(2000); 

        if (status)
        {
            stringPing = "\n" +host +" is reachable";
            return stringPing;
        }
        else
        {
            stringPing = "\n" +host +" is unreachable";
            return stringPing;
        }
    }
    catch (UnknownHostException e)
    {
        System.err.println("Host does not exists");
    }
    catch (IOException e)
    {
        System.err.println("Error in reaching the Host");
    }

    return stringPing;

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-09T23:23:42.817

保持地址应为 - 作为 32 位整数，并以这种形式递增。`String`仅在需要时将其从或转换为。示例如下。我的`IPAddress`课是完整的和实用的。

```
class IPAddress {

    private final int value;

    public IPAddress(int value) {
        this.value = value;
    }

    public IPAddress(String stringValue) {
        String[] parts = stringValue.split("\\.");
        if( parts.length != 4 ) {
            throw new IllegalArgumentException();
        }
        value = 
                (Integer.parseInt(parts[0], 10) << (8*3)) & 0xFF000000 | 
                (Integer.parseInt(parts[1], 10) << (8*2)) & 0x00FF0000 |
                (Integer.parseInt(parts[2], 10) << (8*1)) & 0x0000FF00 |
                (Integer.parseInt(parts[3], 10) << (8*0)) & 0x000000FF;
    }

    public int getOctet(int i) {

        if( i<0 || i>=4 ) throw new IndexOutOfBoundsException();

        return (value >> (i*8)) & 0x000000FF;
    }

    public String toString() {
        StringBuilder sb = new StringBuilder();

        for(int i=3; i>=0; --i) {
            sb.append(getOctet(i));
            if( i!= 0) sb.append(".");
        }

        return sb.toString();

    }

    @Override
    public boolean equals(Object obj) {
        if( obj instanceof IPAddress ) {
            return value==((IPAddress)obj).value;
        }
        return false;
    }

    @Override
    public int hashCode() {
        return value;
    }

    public int getValue() {
        return value;
    }

    public IPAddress next() {
        return new IPAddress(value+1);
    }

}

public class App13792784 {

    /**
     * @param args
     */
    public static void main(String[] args) {

        IPAddress ip1 = new IPAddress("192.168.0.1");

        System.out.println("ip1 = " + ip1);

        IPAddress ip2 = new IPAddress("192.168.0.255");

        System.out.println("ip2 = " + ip2);

        System.out.println("Looping:");

        do {

            ip1 = ip1.next();

            System.out.println(ip1);

        } while(!ip1.equals(ip2));

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:04:10.630

如果您只需要从 ip + 0...255 打印所有内容

```
public void iterateOverIPRange(String ip) {
    int i = 0;
    while(i < 256) {
        System.out.println(ip + "." + i)
        i++;
    }
} 
```

或者，如果您需要 0 到 255：

```
public String[] iterateOverIPRange(String ip) {
    String[] ips = new ip[255];
    int i = 0;
    while(i < 256)) {
        String s = ip + "." + i;
        ips[i] = s;
        i++;
    }
    return ips;
} 
```

如果要指定范围：

```
public String[] iterateOverIPRange(String ip, int from, int to) {
    String[] ips = new ip[to];
    int index = 0;
    while(from < (to + 1)) {
        String s = ip + "." + from;
        ips[index] = s;
        from++;
        index++;
    }
    return ips;
} 
```

当你拥有它时，`String[]`你可以简单地遍历它并 ping 每一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-01T13:28:31.760

因为我不喜欢位移，所以我为我曾经制作的漏洞扫描器制作了自己的 IP 迭代构造。照原样，代码只是打印地址加上一个额外的点。如果您取消注释 ping 实用程序或端口扫描器，它也可以正常工作。

对一些次优的变量名和广泛的例外感到抱歉，我写这个是因为我曾经写过一个更整洁的类。这只是为了表明 Java 确实使我们能够在不使用位移位的情况下迭代更大范围的 IP，然后只遍历 1 个子网。

```
package com.cybergrinder.core;

import java.io.IOException;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

public class ScanClient {

public static void main(String[] args) {
    // TODO Auto-generated method stub
    try {
        // get input from somewhere, in this case we use the scanner for convenience and testing
        // try for example with 192.0.0.0 and 192.255.255.255 to scan the entire 192-B ranges
        Scanner scanner = new Scanner(System.in);
        System.out.println("start part of the address");
        String rangeStart = scanner.nextLine();
        System.out.println("end part of the address");
        String rangeEnd = scanner.nextLine();

        int[] startAdrElements = new int[4];
        int[] endAdrElements = new int[4];

        // System.out.println(rangeStart.split("\\.")[0]);

        int startA1 = (Integer.parseInt(rangeStart.split("\\.")[0]));
        int startB1 = (Integer.parseInt(rangeStart.split("\\.")[1]));
        int startC1 = (Integer.parseInt(rangeStart.split("\\.")[2]));
        int startD1 = (Integer.parseInt(rangeStart.split("\\.")[3]));
        int endA = (Integer.parseInt(rangeEnd.split("\\.")[0]));
        int endB = (Integer.parseInt(rangeEnd.split("\\.")[1]));
        int endC = (Integer.parseInt(rangeEnd.split("\\.")[2]));
        int endD = (Integer.parseInt(rangeEnd.split("\\.")[3]));

        int a = 0, b = 0, c = 0, d = 0; // args to work with after itteration proces
        for (int startA = startA1; startA <= endA; startA++) {// max 255.255.255.255, could implement sanitisation later..

            a = startA;

            for (int startB = startB1; startB <= endB; startB++) {

                b = startB;

                for (int startC = startC1; startC <= endC; startC++) {

                    c = startC;

                    for (int startD = startD1; startD <= endD; startD++) {

                        d = startD;

                        // convert intArray to byteArray
                        int[] intArray = new int[] { a, b, c, d };
                        String address = "";
                        for (int e : intArray) {
                            address += e + ".";
                        }

                        try {
                            System.out.println(address);

                            // enable pinging
                            /*
                            address = address.substring(0, (address.length() - 1));
                            InetAddress ipBytes = InetAddress.getByName(address);
                            boolean up = false;
                            up = ipBytes.isReachable(500);

                            if (up == true) {
                                System.out.println("host at " + ipBytes + " is up");
                            }
                            */

                            // enable portscanning
                            /*
                             * int port = 80; Socket sock = new Socket();
                             * sock.connect(new InetSocketAddress(ipBytes,
                             * port), 2000); //if it does not connect flow
                             * goes to catch System.out.println(port +"/tcp"
                             * + " is open ");
                             */

                        } catch (Exception e) {

                            // e.printStackTrace(); System.out.println("host
                            // is down");

                        }

                    }
                }
            }
        }

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
    }

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-31T05:52:43.200

**只是简单的逻辑。我们可以使用以下逻辑生成多达 40 亿 (4228250625) 个 IP (0.0.0.0 - 255.255.255.255)**

```
public class IpGenerator {
    public static void main(String[] args) throws Exception {
        int totalIP = 50000;//Set the total IPs to be generated
        String startIP= "10.10.1.1"; // Set the IP start range
        int A = Integer.parseInt(startIP.split("\\.")[0]);
        int B = Integer.parseInt(startIP.split("\\.")[1]);
        int C = Integer.parseInt(startIP.split("\\.")[2]);
        int D = Integer.parseInt(startIP.split("\\.")[3]);
        int total=0;
        while (total<=totalIP) {
            total++;
            if(255>D) {D++;}
            else {D=0;
                if(255>C) {C++;}
                else {C=0;
                    if(255>B) {B++;}
                    else {B=0;
                        if(255>A) {A++;}
                        else {
                            throw new Exception("IP LIMIT EXCEEDED !!!!!");
                        }
                    }
                }
            }
            String IP=A+"."+B+"."+C+"."+D;
            System.out.println("IP:"+IP);
        }
    }
}
Sample 
--------
...............
...............
...............
IP:10.10.193.251
IP:10.10.193.252
IP:10.10.193.253
IP:10.10.193.254
IP:10.10.193.255
IP:10.10.194.0
IP:10.10.194.1
IP:10.10.194.2
IP:10.10.194.3
IP:10.10.194.4
...............
...............
............... 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-09T23:05:53.350

只需将末尾数字设为整数，并在进行时将其递增。

```
public String strIp = "192.168.0.";
public Sting ip;

for (int x = 1; x == 255, x++) {
    ip = strIp+x;
} 
```*

# javascript - 将 Jplayer 视频播放与 Angular.JS 集成

> ID：13792788
> 
> 赞同：2
> 
> 时间：2012-12-09T23:00:04.390
> 
> 标签：javascript, integration, angularjs, jplayer

我正在使用基于 angular.js 的框架。我需要播放视频，并且 iframe 根据客户的规格不在菜单中。

我正在尝试让[jPlayer](http://www.jplayer.org/)视频播放正常工作。我见过[c0deformer 的](http://amitgharat.wordpress.com/2012/11/25/using-jplayer-in-your-angular-application/)解决方案，我已经将它集成为音频播放器，但对于我的最新项目，他们肯定需要视频播放。当我启动我的 jPlayer 实例时，我收到以下错误：

```
pre-call ClosureCompiler.script:1
post-call ClosureCompiler.script:1
TypeError: Cannot read property 'childNodes' of undefined
    at e (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:38:220)
    at e (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:38:215)
    at e (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:38:215)
    at k (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:42:261)
    at http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:46:471
    at k (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:42:261)
    at http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:46:458
    at http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:91:245
    at h (http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:75:256)
    at http://arielsmamma/rsrc/3rdparty/angular-1.0.1.min.js:75:489 angular-1.0.1.min.js:60
pre-setmedia-call ClosureCompiler.script:1
post-setmedia-call 
```

这是jPlayer代码：

```
(function()
{
    itx.ns( 'ui.video.jPlayerVideo', jPlayerVideo, true );
    itx.extend( jPlayerVideo, itx.Directive,
    {
        restrict: 'E',
        replace: true,
        name: 'itx-jPlayer-video',
        scope: {
            'src': '=',
            'duration': '='
        }
    });

    function jPlayerVideo($scope)
    {
        itx.Directive.apply( this, arguments );
        var self = this;
        console.log('pre-call');
        $("#jp_container_1").jPlayer({
            swfPath: '../rsrc/3rdparty/jplayer/',
            solution: 'flash, html',
            supplied: 'm4v',
            ready: function () {
                console.log('pre-setmedia-call');
                $(this).jPlayer("setMedia", {
                    m4v: $scope.src
                });
                console.log('post-setmedia-call');
            }
        });
        console.log('post-call');
    }
})() 
```

我希望我已经提供了足够的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T04:45:43.947

FWIW，当我回到这个问题时，我决定尝试其他替代方案，我发现[videoJS](http://videojs.com/)开箱即用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:52:11.973

也许你应该在 JsFiddle 上提供一个简单的例子：http: [//jsfiddle.net/](http://jsfiddle.net/)

没有一个活生生的例子，很难测试代码。

除此之外，我注意到这条线：

```
name: 'itx-jPlayer-video', 
```

我想这是你的指令？我不确定，但不应该是“itxJPlayerVideo”吗？

> 指令具有驼峰式名称，例如 ngBind。可以通过使用这些特殊字符 :、- 或 _ 将驼峰式名称转换为蛇形大小写来调用该指令。

请参阅[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

# c# - 没有得到返回值

> ID：13792791
> 
> 赞同：2
> 
> 时间：2012-12-09T23:00:26.997
> 
> 标签：c#, sql

我正在尝试获取返回值，但它一直给我一个错误。我试图通过发送用户名来验证用户名后获取“roleid”——我不知道我做错了什么？

```
public string ValidateRole(string sUsername)
{
    string matchstring = "SELECT  roleid FROM tblUserRoles WHERE UserName='" +      sUsername +"'";
    SqlCommand cmd = new SqlCommand(matchstring);
    cmd.Connection = new SqlConnection("Data Source=(local);Initial Catalog=samplename;Integrated Security=True");
    cmd.Connection.Open();
    cmd.CommandType = CommandType.Text;

    SqlDataAdapter sda = new SqlDataAdapter();
    DataTable dt = new DataTable();
    sda.SelectCommand = cmd;
    sda.Fill(dt);

    string match;
    if (dt.Rows.Count > 0)
    {
        foreach (DataRow row in dt.Rows)
        {
            match = row["roleid"].ToString();
            return match;
        }
    }  
    else
    {  
        match = "fail";
        return match;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:26:08.620

您看到的“并非所有代码路径都返回值”错误是编译器错误，而不是运行时错误，因此问题在于您的 C# 代码不正确。

在这种情况下，这是因为您在 foreach 循环中有一个 return 语句，并且编译器不够聪明，无法看到如果数据表中没有行，您的代码将沿着“else”路径前进。即编译器看不到'If (true)' 分支总是会返回一个值。

最佳做法是始终在函数末尾有一个 return 语句，并初始化变量（“匹配”未初始化）。如果您中途返回，您的代码的可读性也会降低。

最简单的解决方法是：

```
 public string ValidateRole(string sUsername)
   {

       string matchstring = "SELECT  roleid FROM tblUserRoles WHERE UserName='" +      sUsername +"'";
       SqlCommand cmd = new SqlCommand(matchstring);
       cmd.Connection = new SqlConnection("Data Source=(local);Initial Catalog=samplename;Integrated Security=True");
       cmd.Connection.Open();
       cmd.CommandType = CommandType.Text;

       SqlDataAdapter sda = new SqlDataAdapter();
       DataTable dt = new DataTable();
       sda.SelectCommand = cmd;
       sda.Fill(dt);

       string match = "fail";
    if (dt.Rows.Count > 0)
    {
       foreach (DataRow row in dt.Rows)
       {
           match = row["roleid"].ToString();
        return match;
       }              

    }  

    return "fail";

   } 
```

但是，您可能不知道代码还有其他几个问题：

1.  您有一个[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞，使您的应用程序完全不安全。这是因为您已连接 SQL 字符串来进行查询，而不是编写 [参数化查询](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)。

2.  您应该养成使用[ADO.NET DataReader](http://msdn.microsoft.com/en-us/library/haa3afyz.aspx)而不是 DataAdapters 和 DataTables 的习惯。或者更好的是，完全避免使用 DataTables，因为它们是遗留的。为您的数据访问层使用 Linq2Sql 或实体框架，您将编写更少的代码。

3.  您应该认真考虑为您的授权和角色等使用[ASP.NET Membersip API](http://msdn.microsoft.com/en-us/library/ff648345.aspx)。如果您这样做了，甚至不需要您的函数 - 您只需编写： Roles.IsUserInRole(sUserName, "User") 来检查是否用户处于特定角色。

4.  当您使用实现 IDisposable 的资源（如 SQLConnection）时，您应该将其使用包装在[using() {} 块](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)中，以便始终尽快释放资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:11:42.570

看起来连接字符串无效：

```
SqlConnection("Data Source=(local);Initial Catalog="mydatabase";Integrated Security=True"); 
```

应该：

```
SqlConnection("Data Source=(local);Initial Catalog=\"mydatabase\";Integrated Security=True"); 
```

请注意，引号在 Initial Catalog 值中进行了转义。如果这不是问题，请发布您的例外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:25:46.910

改变

```
string match; 
```

至

```
string match = null; 
```

如果`foreach`永远找不到匹配项，则该变量`match`永远不会被实例化。编译错误试图告诉你这一点。

# c++ - AdjustWindowRect 文档

> ID：13792792
> 
> 赞同：7
> 
> 时间：2012-12-09T23:00:37.480
> 
> 标签：c++, c, windows, winapi

MSDN 库将 AdjustWindowRect 的 dwStyle 参数记录为：

> 要计算其所需大小的窗口的窗口样式。请注意，您不能指定 WS_OVERLAPPED 样式。

我还没有找到任何解释。他们所说的“不能”是什么意思，为什么我不能这样做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T01:07:15.083

`WS_OVERLAPPED`样式定义为零：

```
#define WS_OVERLAPPED    0x00000000L 
```

`AdjustWindowRect()`正在检查提供的样式标志并相应地修改 RECT：

```
// ...
if( dwStyle & WS_BORDER ) {
    const int cx = GetSystemMetrics(SM_CXBORDER);
    const int cy = GetSystemMetrics(SM_CYBORDER);
    lpRect->top -= cy;
    lpRect->left -= cx;
    lpRect->right += cx;
    lpRect->bottom += cy;
}
// ... 
```

因此`AdjustWindowRect()`将 dwStyle 参数设置为`0`不会改变 lpRect，因此`WS_OVERLAPPED`不能使用。

如果您想计算顶级框架的大小，可以使用`WS_OVERLAPPEDWINDOW`or`WS_CAPTION|WS_THICKFRAME`代替。

# jquery - 如何显示欧洲日历日期和时间。全日历

> ID：13792793
> 
> 赞同：0
> 
> 时间：2012-12-09T23:00:36.950
> 
> 标签：jquery, date, fullcalendar

使用最新版本的全日历，但找不到如何显示欧洲日期和时间。目前它显示美国月份/日期，我想显示日期/月份。

如果有人遇到此问题，请告诉我如何解决。 ![在此处输入图像描述](../Images/0e6db386582f08489579813f0b9e06d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:30:16.390

您在[columnFormat](http://arshaw.com/fullcalendar/docs/text/columnFormat/)中指定它，如下所示：

```
columnFormat: {
    month: 'ddd',    // Mon
    week: 'ddd d/M', // Mon 31/12
    day: 'dddd d/M'  // Monday 31/12
} 
```

# python - Length-1 数组可以转换为 python 标量错误？Python

> ID：13792798
> 
> 赞同：2
> 
> 时间：2012-12-09T23:01:07.650
> 
> 标签：python, plot

```
from numpy import *
from pylab import *
from math import *

def LogisticMap(a,x):
    return 4.*a*x*(1.-x)

def CosineMap(a,x):
    return a*cos(x/(2.*pi))

def TentMap(a,x):
    if x>= 0 or x<0.5:
        return 2.*a*x
    if x>=0.5 or x<=1.:
        return 2.*a*(1.-x)

a = 0.98
N = 40

xaxis = arange(0.0,N,1.0)

Func = CosineMap

subplot(211)
title(str(Func.func_name) + ' at a=%g and its second iterate' %a)
ylabel('X(n+1)') # set y-axis label
plot(xaxis,Func(a,xaxis), 'g', antialiased=True)

subplot(212)
ylabel('X(n+1)') # set y-axis label
xlabel('X(n)')   # set x-axis label
plot(xaxis,Func(a,Func(a,xaxis)), 'bo', antialiased=True) 
```

我的程序应该采用三个定义的函数中的任何一个并绘制它。它们都从数组 xaxis 从 0 到 N 中获取一个值 x，然后返回该值。我希望它绘制 xaxis 与 f(xaxis) 的图表，其中 f 是上述三个函数中的任何一个。Logisticmap 函数工作正常，但对于 CosineMap，我得到错误“只有长度为 1 的数组可以转换为 python 标量”，而对于 TentMap，我得到错误“具有多个元素的数组的真值不明确，请使用 a.任何（）或 a.all（）”。我的帐篷地图函数假设在 0<=x<0.5 时返回 2*a*x，如果 0.5<=0<=1 则假设返回 2*a*(1-x)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:16:05.303

你先导入`numpy.cos`，再导入`math.cos`。后者遮蔽了前者，并且不知道如何处理 NumPy 数组。因此错误。

要修复，请尝试：

```
import numpy

def CosineMap(a,x):
    return a*numpy.cos(x/(2.*pi)) 
```

这类问题是避免`from X import *`-style 导入的一个很好的理由。

至于`TentMap`，这是正确矢量化它的一种方法：

```
def TentMap(a,x):
    return 2.*a*numpy.minimum(x, 1.-x) 
```

# mysql - MySQL SELECT where if stores have X, show me what they have

> ID：13792799
> 
> 赞同：1
> 
> 时间：2012-12-09T23:01:10.487
> 
> 标签：mysql, sql, select

**我有一个这样的 MYSQL 表：**

```
STORES (SPID, StoreID, ProductID); 
```

**和这样的数据：**

```
{ 1 | s1 | p2 }
{ 2 | s1 | p7 }
{ 3 | s1 | p8 }
{ 4 | s2 | p1 }
{ 5 | s2 | p3 }
{ 6 | s2 | p6 }
{ 7 | s2 | p9 }
{ 8 | s3 | p2 }
{ 9 | s3 | p5 } 
```

**我想：**
使用 MYSQL SELECT 查询来获取结果，如果商店有某种产品，那么将返回该商店所有产品的列表。例如，如果我正在寻找“p2”，那么我想知道“s1”有“p2，p7，p8”，“s3”有“p2，p5”。

如果您需要更多信息，请告诉我。我不确定解决此问题需要什么（这可能是我无法搜索并找到答案的原因！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:09:07.607

一种简单的方法是使用`WHERE IN`or`WHERE EXISTS`方法从包含目标产品的商店列表中的商店中选择所有行。

```
SELECT
    StoreID
    , ProductID
FROM
    Stores
WHERE
    StoreID IN 
        (SELECT
            StoreID
        FROM
            Stores
        WHERE
            ProductID IN ('p2')
                /*also, using IN here in the sub query will allow
                you to specify more than one product in the future*/
        ) 
```

或者，您可以将表与自身连接：

```
SELECT
    S.StoreID
    , S.ProductID
FROM
    Stores S
    INNER JOIN Stores SProd
        ON S.StoreID = SProd.StoreID
WHERE
    SProd.ProductID IN ('p2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:08:15.370

您可以使用子查询来执行此操作：

```
SELECT * FROM STORES WHERE StoreID IN (SELECT StoreID FROM Stores WHERE ProductID='p2') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T23:16:11.683

您可以通过自加入来做到这一点。请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!2/6507a/2/0)进行测试。

```
select s1.storeid, s1.productid
from stores s1
join stores s2 on s2.storeid = s1.storeid
where s2.productid = 'p2' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T23:10:58.053

```
select
  st1.store_id, st1.product_id, st2.store_id, st2.product_id
from
  stores st1
join
  stores st2 on st2.store_id = st1.store_id
where
  st1.product_id='p2'
order by store_id, product_id 
```

# java - 在 LWJGL 中加载的 OBJ 模型有一个没有纹理的黑色区域

> ID：13792805
> 
> 赞同：2
> 
> 时间：2012-12-09T23:02:46.217
> 
> 标签：java, opengl, model, textures, lwjgl

我在加载 LWJGL 及其纹理中的 .obj 文件时遇到问题。该对象是一棵树（它是 TurboSquid 的付费模型，所以我不能在这里发布，但如果你想看看它应该是什么样子，请点击这里的链接）： [http ://www.turbosquid.com/FullPreview/索引.cfm/ID/701294](http://www.turbosquid.com/FullPreview/Index.cfm/ID/701294)

我使用他们 wiki 中的 LWJGL 教程编写了一个自定义 OBJ 加载器。它看起来像这样：

```
public class OBJLoader {
public static Model loadModel(File f) throws FileNotFoundException, IOException
{
    BufferedReader reader = new BufferedReader(new FileReader(f));

    Model m = new Model();
    String line;
    Texture currentTexture = null;
    while((line=reader.readLine()) != null)
    {
        if(line.startsWith("v "))
        {
            float x = Float.valueOf(line.split(" ")[1]);
            float y = Float.valueOf(line.split(" ")[2]);
            float z = Float.valueOf(line.split(" ")[3]);
            m.verticies.add(new Vector3f(x,y,z));
        }else if(line.startsWith("vn "))
        {
            float x = Float.valueOf(line.split(" ")[1]);
            float y = Float.valueOf(line.split(" ")[2]);
            float z = Float.valueOf(line.split(" ")[3]);
            m.normals.add(new Vector3f(x,y,z));
        }else if(line.startsWith("vt "))
        {
            float x = Float.valueOf(line.split(" ")[1]);
            float y = Float.valueOf(line.split(" ")[2]);
            m.texVerticies.add(new Vector2f(x,y));
        }else if(line.startsWith("f "))
        {
            Vector3f vertexIndicies = new Vector3f(Float.valueOf(line.split(" ")[1].split("/")[0]), 
                    Float.valueOf(line.split(" ")[2].split("/")[0]), 
                    Float.valueOf(line.split(" ")[3].split("/")[0]));
            Vector3f textureIndicies = new Vector3f(Float.valueOf(line.split(" ")[1].split("/")[1]), 
                    Float.valueOf(line.split(" ")[2].split("/")[1]), 
                    Float.valueOf(line.split(" ")[3].split("/")[1]));
            Vector3f normalIndicies = new Vector3f(Float.valueOf(line.split(" ")[1].split("/")[2]), 
                    Float.valueOf(line.split(" ")[2].split("/")[2]), 
                    Float.valueOf(line.split(" ")[3].split("/")[2]));

            m.faces.add(new Face(vertexIndicies,textureIndicies,normalIndicies,currentTexture.getTextureID()));
        }else if(line.startsWith("g "))
        {
            if(line.length()>2)
            {
                String name = line.split(" ")[1];
                currentTexture = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("res/" + name + ".png"));
                System.out.println(currentTexture.getTextureID());
            }
        }
    }

    reader.close();

    System.out.println(m.verticies.size() + " verticies");
    System.out.println(m.normals.size() + " normals");
    System.out.println(m.texVerticies.size() + " texture coordinates");
    System.out.println(m.faces.size() + " faces");
    return m;
}
} 
```

然后我使用以下代码为我的模型创建一个显示列表：

```
objectDisplayList = GL11.glGenLists(1);
    GL11.glNewList(objectDisplayList, GL11.GL_COMPILE);
    Model m = null;
    try {
        m = OBJLoader.loadModel(new File("res/untitled4.obj"));
    } catch (Exception e1) {
        e1.printStackTrace();
    } 

    int currentTexture=0;
    for(Face face: m.faces)
    {
        if(face.texture!=currentTexture)
        {
            currentTexture = face.texture;
            GL11.glBindTexture(GL11.GL_TEXTURE_2D, currentTexture);
        }

        GL11.glColor3f(1f, 1f, 1f);
        GL11.glBegin(GL11.GL_TRIANGLES);

        Vector3f n1 = m.normals.get((int) face.normal.x - 1);
        GL11.glNormal3f(n1.x, n1.y, n1.z);
        Vector2f t1 = m.texVerticies.get((int) face.textures.x -1);
        GL11.glTexCoord2f(t1.x, t1.y);
        Vector3f v1 = m.verticies.get((int) face.vertex.x - 1);
        GL11.glVertex3f(v1.x, v1.y, v1.z);

        Vector3f n2 = m.normals.get((int) face.normal.y - 1);
        GL11.glNormal3f(n2.x, n2.y, n2.z);
        Vector2f t2 = m.texVerticies.get((int) face.textures.y -1);
        GL11.glTexCoord2f(t2.x, t2.y);
        Vector3f v2 = m.verticies.get((int) face.vertex.y - 1);
        GL11.glVertex3f(v2.x, v2.y, v2.z);

        Vector3f n3 = m.normals.get((int) face.normal.z - 1);
        GL11.glNormal3f(n3.x, n3.y, n3.z);
        Vector2f t3 = m.texVerticies.get((int) face.textures.z -1);
        GL11.glTexCoord2f(t3.x, t3.y);
        Vector3f v3 = m.verticies.get((int) face.vertex.z - 1);
        GL11.glVertex3f(v3.x, v3.y, v3.z);

        GL11.glEnd();
    }
    GL11.glEndList(); 
```

currentTexture 是一个 int - 它包含当前使用的纹理的 ID。

所以我的模型在没有纹理的情况下看起来非常好： ![1](../Images/4decae006d5eb59d47e93a6a1f83cab6.png)

但是看看如果我启用 GL_TEXTURE_2D 会发生什么：
![2](../Images/cb389bdfc00cf8fe2600f1eab7c0e21d.png)
![3](../Images/3d05a46d01cfc208a1379564d125a41e.png)
![4](../Images/359191b8dc8957106cde4237b936cd48.png)

正如您所看到的，树的整个侧面似乎都不见了——而且它不是透明的，因为它不是背景颜色——它被渲染为黑色。

模型没有问题 - 如果我使用 Kanji 的 OBJ 加载器加载它，它工作正常（但问题是，我需要编写自己的 OBJ 加载器） ![5](../Images/55c91bb5f3d6e8d4b8f9660b13b794a0.png)

这是我的 OpenGL 初始化部分：

```
//init display
    try {
        Display.setDisplayMode(new DisplayMode(Support.SCREEN_WIDTH, Support.SCREEN_HEIGHT));
        Display.create();
        Display.setVSyncEnabled(true);
    } catch (LWJGLException e) {
        e.printStackTrace();
        System.exit(0);
    }
    GL11.glLoadIdentity();
    GL11.glEnable(GL11.GL_TEXTURE_2D);               
    GL11.glClearColor(1.0f, 0.0f, 0.0f, 1.0f);          

    GL11.glShadeModel(GL11.GL_SMOOTH);
    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glDepthFunc(GL11.GL_LESS);
    GL11.glDepthMask(true);
    GL11.glEnable(GL11.GL_NORMALIZE); 

    GL11.glMatrixMode(GL11.GL_PROJECTION);

    GLU.gluPerspective (90.0f,800f/600f, 1f, 500.0f);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);

    GL11.glEnable(GL11.GL_CULL_FACE);
    GL11.glCullFace(GL11.GL_BACK);

    //enable lighting
    GL11.glEnable(GL11.GL_LIGHTING);

    ByteBuffer temp = ByteBuffer.allocateDirect(16);
    temp.order(ByteOrder.nativeOrder());

    GL11.glMaterial(GL11.GL_FRONT, GL11.GL_DIFFUSE, (FloatBuffer)temp.asFloatBuffer().put(lightDiffuse).flip());
    GL11.glMaterialf(GL11.GL_FRONT, GL11.GL_SHININESS,(int)material_shinyness);

    GL11.glLight(GL11.GL_LIGHT2, GL11.GL_DIFFUSE, (FloatBuffer)temp.asFloatBuffer().put(lightDiffuse2).flip());              // Setup The Diffuse Light
    GL11.glLight(GL11.GL_LIGHT2, GL11.GL_POSITION,(FloatBuffer)temp.asFloatBuffer().put(lightPosition2).flip()); 
    GL11.glLight(GL11.GL_LIGHT2, GL11.GL_AMBIENT,(FloatBuffer)temp.asFloatBuffer().put(lightAmbient).flip()); 
    GL11.glLight(GL11.GL_LIGHT2, GL11.GL_SPECULAR,(FloatBuffer)temp.asFloatBuffer().put(lightDiffuse2).flip()); 

    GL11.glLightf(GL11.GL_LIGHT2, GL11.GL_CONSTANT_ATTENUATION, 0.1f);
    GL11.glLightf(GL11.GL_LIGHT2, GL11.GL_LINEAR_ATTENUATION, 0.0f);
    GL11.glLightf(GL11.GL_LIGHT2, GL11.GL_QUADRATIC_ATTENUATION, 0.0f);
    GL11.glEnable(GL11.GL_LIGHT2); 
```

我也有同一棵树的不同模型——更详细，直接从搅拌机导出——做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T17:34:42.637

我在这里回答，因为我无法评论。

我没有阅读代码，您所描述的内容听起来像是您不介意面部的方向（即索引顶点的顺序）。如果方向错误，纹理坐标也必须翻转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T00:08:47.657

当您阅读对象并创建一个显示列表时，写出一个点是它没有纹理坐标数学。可能存在一个问题，即并非每个顶点都有纹理坐标。或者检查纹理的大小是否在两个方向上都是 2^x 大小？那会有所帮助。

# c - 比较C中char数组的子范围

> ID：13792806
> 
> 赞同：2
> 
> 时间：2012-12-09T23:02:54.410
> 
> 标签：c, arrays, char, range

我想使用 strcmp 将 char 数组的子范围与另一个字符串进行比较。我通过从文本文件中读取然后将它们连接成更长的字符数组来制作 dna 字符数组。

```
char dna[10] = "ATGGATGATGA";
char STOP_CODON[3] = "TAA"; 
int TS1 = strcmp(&STOP_CODON[0]),dna[0]);
int TS2 = strcmp(&STOP_CODON[1]),dna[1]); 
int TS3 = strcmp(&STOP_CODON[2]),dna[2]);

if(T1+T2+T3) == 3 {
   int T = 1;  
} 
```

因此，如果它们都匹配，则 T 返回为 true(1) 我想在三个字符的子范围内将 STOP_CODON 与 dna 进行比较。我想不出一种简单的方法。在matlab中你可以这样做：

```
strcmp(STOP_CODON[1:3],dna[1:3]) 
```

在 C 语言中这样的事情可能吗？我想用它来最终迭代整个 dna 数组，实际上是 60,000 个字符长

```
printf("%s.6\n",&dna[1]); 
```

printf 有这种功能，但我想用 strcmp 来做。在C中有比这更有效的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T23:05:23.863

您不能使用 来执行此操作`strcmp`，它将比较字符串，直到它看到一个空 ( `'\0'`) 字符。相反，使用比较特定字节数的[memcmp](http://linux.die.net/man/3/memcmp)或允许您指定要比较的最大字符数的[strncmp 。](http://linux.die.net/man/3/strncmp)

```
// Compare up to 3 characters, stopping at the first null character.
if (strncmp(STOP_CODON, dna, 3) == 0) {
   // they match
} 
```

或者

```
// Copy exactly 3 bytes, even if they contain null characters.
if (memcmp(STOP_CODON, dna, 3) == 0) {
  // they match
} 
```

另请注意，当字符串匹配时，这两个函数都返回 0（而不是 1）。如果第一个字符串“小于”第二个字符串，它们将返回一个*小于零的数字，如果第二个字符串“小于”第一个字符串，它们将返回一个**大于*零的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:05:40.940

您只需通过添加到指针来偏移到字符串中。

```
const char* test = "This is a test.";
printf("%s", test+5);   // prints "is a test."; 
```

`strncmp`然后，您可以使用带有长度参数的 来限制要检查的子字符串的长度。

# php - 将 wordpress 中的日期大写（M d Y）

> ID：13792813
> 
> 赞同：2
> 
> 时间：2012-12-09T23:03:50.043
> 
> 标签：php, wordpress

我的主题中有这段代码。

```
$vandaag = the_date('M d. Y');
echo ucfirst($vandaag); 
```

输出仍然是“okt 11\. 2012” 我有荷兰语的 wordpress 设置，显然它没有大写月份。任何想法为什么这不起作用并且仍然与小写月份相呼应？

编辑：我使用的是英文版的 wordpress，但安装了一个插件，可以将月份名称更改为荷兰语。这仅适用于 the_date() 而不是当我使用 get_the_date() 时。这就是限制我使用 the_date() 的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:10:06.587

```
$vandaag = the_date('M d. Y', '', '', FALSE);
echo ucfirst($vandaag); 
```

*   [https://codex.wordpress.org/Function_Reference/the_date](https://codex.wordpress.org/Function_Reference/the_date)

否则它将回显该值，将第四个参数设置为 false 将返回。

get_the_date() 和 the_date() 都是正确的，具体取决于您想要做什么。你的喜好真的。查看两者的文档，以确定更适合您当前使用的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:07:02.367

因为你必须使用[`get_the_date()`](http://codex.wordpress.org/Function_Reference/get_the_date).

# python - 忽略 NaN 的逐点数组平均值

> ID：13792815
> 
> 赞同：1
> 
> 时间：2012-12-09T23:04:37.467
> 
> 标签：python, numpy

> **可能重复：**
> [NumPy：计算移除 NaN 的平均值](https://stackoverflow.com/questions/5480694/numpy-calculate-averages-with-nans-removed)

我有几个形状相同的 numpy 数组。我想用一个小的扭曲来取他们的逐点平均值：在`np.nan`平均值中应该忽略一个值。换句话说，`average(np.array([1,2,3]), np.array([5,np.nan,7]), np.array([np.nan, 4, 2])`应该等于`np.array([3,3,4])`。

当然，我可以通过遍历每个 numpy 数组中的元素来做到这一点，但我希望避免它。有没有更好的方法来实现这个功能？

（Python 3，但我怀疑它是否重要。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:12:51.027

您可以使用[`scipy.stat`](http://www.scipy.org/doc/api_docs/SciPy.stats.stats.html)'s [`nanmean`](http://www.scipy.org/doc/api_docs/SciPy.stats.stats.html#nanmean)：

```
import numpy as np
from scipy.stats import nanmean
s = np.array([[1.0, 2.0, 3.0], [5.0, np.nan, 7.0], [np.nan, 4.0, 2.0]])

In [4]: nanmean(s)
Out[4]: array([ 3.,  3.,  4.]) 
```

*@Dougal 在评论中指出，该[`bottleneck`](http://pypi.python.org/pypi/Bottleneck)包对几个 numpy/scipy 函数的实现速度明显加快，包括一个`nanmean`.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:50:41.000

您还可以将数组转换为[屏蔽数组（使用](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)[fix_invalid](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ma.fix_invalid.html)屏蔽所有 NaN ）并在那里执行操作：

```
new_array = np.ma.fix_invalid(my_array)
print np.mean(new_array) 
```

如果只是平均水平，那么`nanmean`@hayden 建议的速度大约快 4 倍。但是，如果您想对数组进行其他操作，最好使用掩码数组。

# ruby - Sinatra Modular 应用程序无法识别 AppFog 上的路线

> ID：13792817
> 
> 赞同：1
> 
> 时间：2012-12-09T23:04:52.087
> 
> 标签：ruby, sinatra, routes, modular, appfog

我已经开始使用模块化样式编写我的 Sinatra 应用程序，[在这个 stackoverflow 答案中建议](https://stackoverflow.com/questions/5015471/using-sinatra-for-larger-projects-via-multiple-files)，并已成功将其部署在 Heroku 上，但是当尝试部署到 AppFog（除了 datamapper mysql/postgres gems 之外的相同代码）时，我得到“未找到”我定义的每条路线的错误。

```
== Sinatra/1.3.3 has taken the stage on 47195 for production with backup from Thin
myIP, 127.0.0.1 - - [08/Dec/2012 21:28:53] "GET / HTTP/1.0" 404 18 0.0030
myIP, 127.0.0.1 - - [08/Dec/2012 21:28:54] "GET /any_route HTTP/1.0" 404 18 0.0010
myIP, 127.0.0.1 - - [08/Dec/2012 21:28:58] "GET /about HTTP/1.0" 404 18 0.0008 
```

我的视图和设置中的公共路径：

```
settings.views = "./views"
root = "."
settings.sin_auth_view_path =  "/mnt/var/vcap.local/dea/apps/myapp-0-d1d1d1dc0e543b1759afda27b/app/views/"
public_folder = "./public" 
```

定义路线的示例：

```
class MyApp < Sinatra::Application
  get '/' do
    @title = "Site Index Page"

    haml :index
  end
end 
```

配置.ru

```
require ::File.join( ::File.dirname(__FILE__), 'app')

run MyApp.new 
```

结构与上面链接的基本相同。

没有应用程序错误，只有“未找到”消息和日志中相应的 404“GET”条目。PUBLIC 文件夹正在正常工作 - 我可以访问站点 URL 之外的所有静态文件（即。`site.com/img/anypic.jpg`）。而且，正如我所提到的，完全相同的应用程序可以在 Heroku 上完美运行。

我正在使用捆绑包，因此可以使用自定义 gem，并且在切换到模块化结构之前没有问题。

安装在 AppFog Ruby 1.9.3 运行时。

想法……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:22:47.917

感谢 AppFog Google 用户组的一位用户，解决方案是部署为**Rack**应用程序而不是**Sinatra**应用程序。

注意：还要确保使用`--runtime ruby193`命令行选项，如果你正在使用`require_relative`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:29:41.347

我会检查您是否对“settings.sin_auth_view_path”条目有问题，因为它是绝对路径（而其他两个是相对路径）。Heroku 没有正常的文件系统布局，当您在应用程序源之外提升时，您通常会在开发框中看到这种布局。

# c++ - 将对象的第一个字段转换为对象的类型实际上安全吗？

> ID：13792823
> 
> 赞同：3
> 
> 时间：2012-12-09T23:05:44.997
> 
> 标签：c++, casting, undefined-behavior

乍一看，这看起来像是未定义的行为......

```
#include <iostream>

struct SomeBaseClass
{
    // ...
};

struct MyFakerClass
{
    SomeBaseClass base;
    void foo() { std::cout << "hello" << std::endl; }
};

int main()
{
    MyFakerClass c;
    MyFakerClass *p = static_cast<MyFakerClass *>(static_cast<void *>(&c.base));
    p->foo();
} 
```

...但是如果保证对象的第一个字段与对象具有相同的地址，那么这一定是安全的，对吧？还是有其他规则介入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T23:15:08.107

> 指向标准布局结构对象的指针，使用 reinterpret_cast 适当转换，指向其初始成员（或者如果该成员是位字段，则指向它所在的单元），反之亦然。*[注意：因此，标准布局结构对象中可能存在未命名的填充，但不是在其开头，这是实现适当对齐所必需的。——尾注]*

（C++11，§9.2，¶21）

因此，只要类是“标准布局”，这是安全的，即：

> 标准布局类是这样的类：
> 
> *   没有非标准布局类（或此类类型的数组）或引用类型的非静态数据成员，
> *   没有虚函数 (10.3) 和虚基类 (10.1)，
> *   对所有非静态数据成员具有相同的访问控制（第 11 条），
> *   没有非标准布局的基类，
> *   要么在派生最多的类中没有非静态数据成员，并且最多有一个具有非静态数据成员的基类，要么没有具有非静态数据成员的基类，并且
> *   没有与第一个非静态数据成员相同类型的基类。

（C++11，§9，¶7）

所有关于虚拟的东西的要求都是因为 vptr：如上所述，许多编译器把它作为第一个隐藏成员，但是他们可以把它放在任何地方，或者，如果他们能够，完全省略它或实现 virtual以其他方式分派，因此*virtual*通常以未指定的方式改变类的布局。

“相同的访问控制条款”是因为

> 未指定具有不同访问控制的非静态数据成员的分配顺序。

（C++11，§9.2，¶15）

我想这可能是为了允许编译器通过访问控制对类的成员进行重新排序/分组（即在编译器内部，类的 IR 可能包含每个访问控制说明符下的成员列表，这不允许保持原始顺序 - 所有交错的公共/私有/受保护部分都将被分组，例如默认情况下私有成员可能放在类的前面）。

没有非标准布局成员/基类“递归”子句是为了确保该类作为一个整体是标准布局（基类和成员是它的一部分）。

关于为什么这些东西的其余部分会影响类的布局的更多细节可以在 §9.2 中找到。

* * *

请注意，这是比作为 POD 的类更弱的条件（正如我在上面的评论中错误地所说），因为如果一个类既是标准布局又是*微不足道*的（§9 ¶10） ，它就是 POD

# cakephp - 如何使模型在视图中可用 Cakephp 2.x

> ID：13792826
> 
> 赞同：0
> 
> 时间：2012-12-09T23:05:54.187
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0, cakephp-2.1, cakephp-model

大家好，我有一个“配置文件”表，当我尝试加载配置文件图像时，我需要在我的 default.ctp 视图文件中提供它。我目前使用 $current_user 以 $current_user['filename'] 的形式访问“用户”。我的用户和个人资料关系已在我的模型中相应地设置。如果有人可以提供帮助，我将不胜感激。提前致谢。

我的 AppController 的 beforeFilter 声明尝试：

```
$this->set('profile', $this->loadModel('Profile'));
$this->set('profile', $this->User->find('all')); 
```

我的 default.ctp 查看文件代码尝试：

```
<?php echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$profile['filename']); ?> 
```

当前代码：

```
<?php echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$current_user['filename']); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:57:41.503

你应该澄清你的要求。如果您想要每个页面上的所有配置文件信息，那么这就是您所需要的：

```
public function beforeFilter() {
   $this->loadModel('Profile');
   $profiles = $this->Profile->find('all');
   $this->set('profiles', $profiles);
}

// any view:
foreach($profiles as $profile) : // e.g.
    echo $profile['Profile']['filename'];
endforeach; 
```

但是您应该准确地指定要返回的数据（`id`, `filename`），否则您将在每个请求上返回大量数据，这将影响任何实际水平的性能。

您应该缓存此查询和结果，因为它可能不会经常更改。

编辑：根据您的需要考虑是否使用`beforeFilter`或。`beforeRender`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T05:12:11.150

对于您似乎正在尝试做的事情，我建议您从元素内部使用 RequestAction 。

在这里检查（特别是 requestAction 的部分）：

[http://book.cakephp.org/2.0/en/views.html#elements](http://book.cakephp.org/2.0/en/views.html#elements)

在您的元素中，只需调用以下内容：

```
$profile = $this->requestAction('users/profile/'.$current_user);

echo $this->Html->image('/uploads/profile/filename/thumb/small/'.$profile['Profile']['filename']; 
```

其中 'users/profile/'.$current_user 是获取配置文件的方法的 url

# javascript - 使用 Javascript 从 API 中选择第二个配方

> ID：13792827
> 
> 赞同：0
> 
> 时间：2012-12-09T23:06:12.287
> 
> 标签：javascript, jquery, json

我正在使用 $.get 从 API 定义一组食谱。

```
var recipes = $.get( "http://api.punchfork.com/recipes?key=11223344&q=lamb" ) 
```

APL 看起来...

```
{
  "count": 10, 
  "recipes": [
    {
      "rating": 67.4457, 
      "source_name": "Simply Recipes", 
      "source_img": "http://simplyrecipes.com/photos/spicy-lamb-stew-520.jpg"
    }, 
    {
      "rating": 65.2406, 
      "source_name": "Simply Recipes", 
      "source_img": "http://simplyrecipes.com/photos/lamb-stew-orig.jpg"
    }] 
```

我想使用类似的东西来调用结果。

```
recipes[1].rating 
```

但是因为 API 有...

```
{
  "count": 10, 
  "recipes": [ 
```

...一开始我不能。

如何使用 javascript 选择第二个评级？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:10:03.060

```
recipes.recipes[1].rating 
```

不是吗？（但最好以不同的方式称呼你的变量）

PS可能不正确，如果是这样，你能解释一下你的问题吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-09T23:42:37.217

JSON 语法规则

1.  数据在名称/值对中
2.  数据用逗号分隔
3.  大括号包含对象
4.  方括号包含数组

[参考](http://www.w3schools.com/json/json_syntax.asp)

希望它可以帮助您弄清楚如何在 JSON 中访问数组中的对象。

# c++ - 如何分别通过 QSslSocket 发送两个字节？

> ID：13792833
> 
> 赞同：-1
> 
> 时间：2012-12-09T23:07:36.303
> 
> 标签：c++, qt, ssl, qtnetwork

我有一个使用 QSslSockets 进行通信的客户端程序和一个服务器程序。在服务器程序`"Snameadded"`中，如果客户端成功连接，我将发送一个字符串，我还想向它发送服务器上的用户列表，但作为不同的消息，我制作了两个不同的块并分别编写它们，但它们正在被客户读取为一个

这是服务器上的代码：

```
void server::processMess(QString message)
{

    //Message type legend
    // [number]*** [name]*** [message]
    // number = 1, joining server for first time, rest is name
    // number = 2, split by "***", retrive name, receiving name, and rest is message
    // number = 3, disconnecting from server, resy is name

    bool successfullyConnected = false;
    QStringList temp = message.split("***");
    int num = temp.at(0).toInt();

    qDebug() << num;
    qDebug() << "size of socket list:" << myClientSockets.size();
    QString name = temp.at(1);
    if(num == 1)
    {
        QString name = temp.at(1);
        if(clientList.contains(name))
        {
            QByteArray block;
            block.append("Enameinvalid");

            QSslSocket *clientConnection = myClientSockets.at(myClientSockets.size() - 1);
            myClientSockets.pop_back();
            clientConnection->write(block);
            \

        }
        else
        {
            clientList.append(name);
            QByteArray block;
            block.append("Snameadded");
            successfullyConnected = true;

            QSslSocket *clientConnection = myClientSockets.at(myClientSockets.size() - 1);
            qDebug() << "Message created to send back to client: " << QString(block);
            clientConnection->write(block);

           /*
            ClientThread *thisClientThread = new ClientThread();
            thisClientThread->setClientConnection(clientConnection);
            myClientThreads.push_back(thisClientThread);
            connect(thisClientThread, SIGNAL(messageReceived(QString)), this, SLOT(processMess(QString)));
            thisClientThread->start();*/

        }
    }
    else if(num == 2)
    {
        //Direct message correctly
        QString receiver = temp.at(2);
        QSslSocket* receiverConnection = myClientSockets.at(clientList.indexOf(receiver));
        QByteArray block;
        block.append(message);
        receiverConnection->write(block);

    }
    else if(num == 3)
    {
        //Disconnect client
        updateServer(name + "disconnected");
        int position = clientList.indexOf(name);
        clientList.removeAt(position);
        myClientSockets.removeAt(position);
    }
    else
    {
        qDebug() << "Should never reach here";
    }

    if(successfullyConnected)
    {

        QByteArray block;
        block.append("UsersOnServer:");
        for(int i = 0; i < clientList.size(); ++i)
        {
            block.append(clientList.at(i));
            if(i < clientList.size() - 1)
            {
                block.append("***");
            }
        }
        for(int i = 0; i < myClientSockets.size(); ++i)
        {
            QSslSocket *receiverConnection = myClientSockets.at(i);
            receiverConnection->write(block);
        }
    }

    qDebug() << "Messaged received from client: " + message;
    updateServer("Messaged received from client: " + message);

    /*QSslSocket* thisConnection = myClientSockets.pop_back();

    QByteArray incoming = thisConnection->readAll();

    QString message = QString(incoming);

    qDebug() << "Message received from client: " + message;

    return;*/

    /*QByteArray in = tempSocket->readAll();

    QString message = QString(in);

    qDebug() << "Messaged received from client: " + message;
    updateServer(message);
*/

} 
```

这是我客户端的代码：secureSocket->write(block);

```
if(secureSocket->waitForReadyRead(1000))
{
    QByteArray in = secureSocket->readAll();

    QString serverMess = QString(in);
    if(QString::compare(serverMess, "Snameadded", Qt::CaseSensitive) == 0)
    {
        returnVal = true;
        qDebug() << "added to server";
        connect(secureSocket, SIGNAL(readyRead()), this, SLOT(receiveMess()));
    }
    else if(QString::compare(serverMess, "Enameinvalid", Qt::CaseSensitive) == 0)
    {
        returnVal = false;
        qDebug() << "username already taken";
    }
    qDebug() << "*************Message from server:************** 1" << serverMess;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:36:27.213

我修复了它，我只是做了 QSslSocket::waitForBytesWritten() 所以它会分别发送第一个字节数组然后是第二个。

# asp.net-mvc - 使用 mvc 3 清理 url，类似于 stackoverflow 的

> ID：13792836
> 
> 赞同：0
> 
> 时间：2012-12-09T23:08:14.180
> 
> 标签：asp.net-mvc, url, encoding

```
 <a href="/NewsDetail/@News.Title/Id">Foo</a> 
```

当我单击它时，它正在被编码，而不是空间，我看到的是 %20 等等。

如何创建更清晰的 URL？就像stackoverflow有什么？

有这个实用程序吗？

我想要这样的东西？

```
foobar.com/NewsDetail/some-specific-title/1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:22:18.573

这就是stackoverflow的做法：

```
http://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:16:19.063

阅读默认系统的 MVC 路由。

并检查这个项目 AttributeRouting，使用 nuget AttributeRouting 安装，然后你可以把它放在`[GET("NewsDetail/some-malformed-title/1")]`你的动作前面，它就可以工作了。

# php - 语句中的PHP连接变量

> ID：13792838
> 
> 赞同：0
> 
> 时间：2012-12-09T23:08:27.583
> 
> 标签：php

好吧，我整个周末都在起床，显然我的大脑已经崩溃了——我只是无法征服一些我认为应该很容易的事情：

使用 PHP。我有一个变量：

```
$pageid = 9999; 
```

我有一个包含数百条语句的模板页面，例如：

```
<?php $simplex->menu( 200029999, 200009999,1); ?> 
```

（在每种情况下，9999 都位于每个数字的末尾）

在所有这些语句中，我需要将 9999 替换为变量 $pageid，以便不再对这个数字进行硬编码（打算使用 notepad++ 进行批量替换）。

但是由于某种原因，我无法提出有效的语法，并且我在这里寻找示例的尝试也失败了。任何提示表示赞赏！

更新澄清：

最后，我希望语句将 $pageid 编码到其中，即

```
<?php $simplex->menu( 20002'.$pageid.', 20000'.$pageid.',1); ?> 
```

显然我上面的例子是完整的 FUBAR 但只是试图说明我试图实现的最终结果......然后分配给 $pageid 的任何值都将应用于语句本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:49:37.713

您可以使用 Notepad++ 正则表达式驱动的替换引擎来执行此操作（如果我的问题正确）：

替换`(\d+)9999 *,`为`\1'.$pageid.',`

编辑：开头的星号是胡说八道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:11:14.643

这假设没有其他 9999 的出现

```
$new_var = str_replace('9999',$pageid,$yourvar_with_the_9999); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T23:55:48.977

所以在我看来，你想重构你的代码。这似乎很难用搜索/替换来做，但你的行可能看起来像这样：

```
<?php $simplex->menu( intval('20002'.$pageid), intval('20000'.$pageid), 1); ?> 
```

这样，您以后可以更改 的值，`$pageid`一切都会正常工作。

要在 notepadd++ 中替换它，请使用正则表达式：查找`(\d+)9999,`替换为 `intval('\1'.$pageid),`并检查正则表达式选项。这是屏幕截图![截屏](../Images/72635565fe9bae7a698bb90dc33047b0.png)

# java - 带有while循环和队列的奇怪Java行为

> ID：13792843
> 
> 赞同：5
> 
> 时间：2012-12-09T23:08:58.933
> 
> 标签：java, while-loop, queue

我有 while(true) 循环的奇怪行为。这是代码：

作为班上的一员，我有：

```
static Queue<Object> response = new LinkedList<Object>(); 
```

...和一个功能：

```
private void read() {

    while (true)
    {
        System.out.println("foo");
        if(!(response.isEmpty()))
        {

            if((Boolean)response.peek() == true)
            {
                view.dispose();
                LogInControler controler= new LogInControler();
                disableMasterLogin();
                response.poll();
                return;
            }
            else if((Boolean)response.poll() == false)
            {
                JOptionPane.showMessageDialog(view.getRootPane(), 
                        "Wrong username or password.");
                view.tfUsername.requestFocus();
                return;
            }
        }
    }
} 
```

当从服务器（通过 Socket）接收到对象时，InputController 类将该对象传递给适当的控制器，在本例中为 MasterLogInController 并将其放入队列响应中。我正在等待 while(true) 循环中的响应，但问题是如果我删除 "System.out.printline("foo");" 循环只会输入一次！？使用这条 syso 行，我“强制”while 循环执行循环，直到收到响应。这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:26:59.610

我假设你有几个线程正在运行。

`System.out.println`创建一个内存屏障，它可能会帮助您的代码看到一些不可见的变量（因为缺乏同步）。

特别是，您的队列不是线程安全的，并且似乎已安全发布。所以很有可能：

*   您的`while`循环可能会`response`显示为 null ==> NullPointerException
*   `reponse.isEmpty()`可能会返回 false 但`response.peek()`可能会返回 null，然后您将其转换为 a`Boolean`并在您的条件中取消框`if((Boolean)xxx == true)`==> NullPointerException
*   等等

除了注释中给出的有助于理解原因的合理建议外，您还应该使代码线程安全。例如，您可以使用[线程安全的 BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)。但这可能还不够（因为您的各种 if / if / else if 语句的布局方式以及队列可能在每个语句之间被另一个线程更改的事实）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T00:26:32.220

我怀疑正在发生的事情是 JIT 编译器正在优化您的循环而不存在。如果`response.isEmpty()`第一次在循环中调用它时为真，并注意到它`response`不在`synchronized`块或方法内，或者标记`volatile`为运行代码的繁忙循环。

在 JIT 编译器的眼中，添加`println()`语句至少给循环一个目的，所以它会让它在这种情况下运行。

为了解决这个问题，除了 assylias 给出的重要建议外，您还可以将所有引用`response`放在一个`synchronized`块中，如下所示：

```
public void read() {
    Boolean result = null;
    synchronized (response) {
        while (true) {
            result = (Boolean) response.poll();
            if (result != null) break;
            try {
                response.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
                // You could put return; here
            }
        }
    }
    // result should always be non null here
    if (result) {
         view.dispose();
         LogInControler controler = new LogInControler();
         disableMasterLogin();
    } else {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JOptionPane.showMessageDialog(view.getRootPane(), "Wrong username or password");
                view.tfUsername.requestFocus();
            }
        });
    }
} 
```

如果您的其他线程将响应添加到队列中，请确保它也在同步块中并调用`notifyAll()`：

```
public void addResult(Object result) {
    synchronized (response) {
        response.add(result);
        response.notifyAll();
    }       
} 
```

# regex - 贪婪的正则表达式不会选择最接近的选择

> ID：13792852
> 
> 赞同：0
> 
> 时间：2012-12-09T23:10:06.190
> 
> 标签：regex

我的正则表达式没有选择最接近`[A]`这种情况的解决方案是什么？

输入：

```
[A]xxx[A]yyyy[B] 
```

正则表达式：

```
\[A\](?!\[A\])(.*?)\[B\] 
```

匹配：

```
[A]xxx[A]yyyy[B] 
```

我需要的比赛：

```
[A]yyyy[B] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:32:28.997

你实际上很接近。唯一的问题是，前瞻本身并不会一直看穿字符串。它只会查看当前位置。你可以帮助它：

```
\[A\](?!.*\[A\])(.*?)\[B\] 
```

如果您的输入可能包含多对`[A]...[B]`（连续）并且您想要匹配所有这些，您可以使用 Bohemian 的答案，或者使用更通用的方法（这将适用于更复杂的排除模式）并在每个位置：

```
 \[A\]((?:(?!\[A\]).)*+)\[B\] 
```

如果该字符`.`没有标记`[A]`. `+`之后`*`使后者[具有所有格](http://www.regular-expressions.info/possessive.html)，这只是适用于这种情况的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:22:44.937

尝试这个

```
\[A\][^A]+\[B\] 
```

这确保了第一个 A 和 B 之间没有 A

# ios - 如何检测当前self.view位置是什么

> ID：13792853
> 
> 赞同：0
> 
> 时间：2012-12-09T23:10:18.407
> 
> 标签：ios, objective-c, nstimer, cgaffinetransform

我制作了一个应用程序（游戏），其中视图随机旋转`portrait`到`upsideDownPortrait`使用 NSTimer。

使用下面的代码一切正常。当这部分游戏结束时，我需要更正视图，使其恢复为纵向而不是倒置纵向。如何检测当前位置是什么？`(float rotation = 180;)`

```
self.view.transform = CGAffineTransformMakeRotation(M_PI / 180 * (rotation+=180)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:24:39.350

如果您只想恢复到原始位置，则在处理变换时不需要“检测视图的当前状态”。

```
self.view.transform = CGAffineTransformIdentity; 
```

将“撤消”您设置的视图矩阵的所有更改。

# c++ - c++ - 如何在没有辅助方法的情况下反转句子中的单词？

> ID：13792854
> 
> 赞同：4
> 
> 时间：2012-12-09T23:10:34.790
> 
> 标签：c++, string, reversing

我需要读取字符串（带空格）并将其反转。

首先我从控制台读取一串字符。

```
char array[100];

for(int i = 0; i < sizeof(array); i++)
    array[i] = '0';

for(int i = 0; i < sizeof(array); i++)
    cout<<array[i]<<" ";

cout<<"\n\nenter your string: ";

cin.getline(array, 100);

cout<<"\n";

for(int i = 0; i < sizeof(array); i++)
    cout<<array[i]<<" "; 
```

然后我创建并填充索引数组。（记住空间点）

```
cout<<"\n\nindexes: ";

int indexes[20];
for(int i = 0; i < 20; i++)
{
    indexes[i] = 0;
}

// filling the indexes array
int j = 0;
for(int i = 0; i < sizeof(array); i++)
{
    if(array[i] == '0') break;
    if(array[i] == ' ')  indexes[j++] = i;
}   
// validating indexes array
for(int i = 0; i < sizeof(indexes); i++)
{
    //if(indexes[i] == 0) break;
    cout<<indexes[i]<<" ";
} 
```

这是我（我猜不聪明）算法的开始。我想反转第一个单词。
似乎这个块永远不会执行。为什么？

```
// first word
int j1 = indexes[0]-1;
for(int i = 0; i > indexes[0]; i++)     
{
    new_array[i] = array[j1-i];
            cout<<"\naction\n";
} 
```

将 new_array 打印到控制台：

```
for(int x = 0; x < sizeof(new_array); x++)
{
    if(new_array[x] == '0') break;
    cout<<new_array[x]<<" ";
} 
```

**结果是：**

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

输入你的字符串：这是我的字符串

这是我的字符串 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

indexes: 4 7 10 17 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -858993460 -858993460 100 -85 8993460 -858993460 100 -858993460 -858993460 100 -858993460 -858993460 193628786 0 544434464 1931508077 1852404340 805314663 808464432 808464432 808464432 808464 432 808464432 808464432 808464432 808464432 808464432 808464432 808464432 808464 432 808464432 808464432 808464432 808464432 808464432 808464432 808464432 808464 432 -858993460 -742139265 6421640 18244041 1 9932784 9928256 -742139185 0 0 2129 674240 -1920 570026249 0 6422528 0 6421580 0 6421712 18223374 -759898201 0 64216 48 18244541

新数组：

为什么索引数组在零后包含这些数字？它的长度只有 20。
为什么不打印 new_array？

我知道我的解决方案非常非常麻烦）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T23:23:57.390

你的直觉是正确的：循环*没有*被执行。问题在于：

```
for(int i = 0; i > indexes[0]; i++) 
```

比较应该是`i < indexes[0]`。

# php - 数据库异常应该是致命的吗？

> ID：13792855
> 
> 赞同：1
> 
> 时间：2012-12-09T23:10:49.200
> 
> 标签：php, error-handling, pdo

我正在为我的站点中的数据库调用编写一个单例包装器。

从 PDO 捕获异常时，我应该终止脚本还是将它们视为警告？

有没有办法确定 PDO 抛出的异常的严重性？例如，是否有相当于 PHP 的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:16:48.563

不，数据库错误不应该是致命的并结束您的执行 - 如果不是，您的规范会告诉您否则。

正如@PeeHaa 所说，错误应该引发异常而不是杀死脚本。某些驱动程序可能默认具有此选项，但通常使用 MySQL 驱动程序时，您需要在连接时设置错误模式。

可能建议您允许抛出异常，以便在主过程失败时捕获错误并执行替代措施。

```
try {
    $sthmt->execute();
}
catch (Exception $error) {
    // Opps, the statement failed, revert or initiate error procedure
} 
```

# c# - 上传/保存视频到数据库或文件系统

> ID：13792856
> 
> 赞同：3
> 
> 时间：2012-12-09T23:10:49.747
> 
> 标签：c#, asp.net-mvc, file-upload, asp.net-mvc-4, video-streaming

我以前从未尝试过保存视频，所以我对此了解不多。我知道如果视频很小，我可以转换为字节数组并保存到数据库，但是为了提高效率，我想学习如何将任何上传的视频保存到我的服务器文件，然后只保存文件路径我的数据库表中的视频。我完全不知道如何开始这样做。我在下面看到了这个例子，但不太确定它在做什么。对我来说，它似乎正在保存任何用户上传到 App_Data 文件夹的所有上传视频。那正确吗？任何帮助是极大的赞赏。

```
[HttpPost]
public ContentResult UploadFiles()
{
       var r = new List<ViewDataUploadFilesResult>();

       foreach (string file in Request.Files)
       {
        HttpPostedFileBase hpf = Request.Files[file] as HttpPostedFileBase;
        if (hpf.ContentLength == 0)
        continue;

    string savedFileName = Path.Combine(Server.MapPath("~/App_Data"), Path.GetFileName(hpf.FileName));
    hpf.SaveAs(savedFileName); // Save the file

    r.Add(new ViewDataUploadFilesResult()
    {
        Name = hpf.FileName,
        Length = hpf.ContentLength,
        Type = hpf.ContentType
    });
}
// Returns json
return Content("{\"name\":\"" + r[0].Name + "\",\"type\":\"" + r[0].Type + "\",\"size\":\"" + string.Format("{0} bytes", r[0].Length) + "\"}", "application/json");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:16:30.667

您的假设是正确的.. 它还返回一个带有名称、内容类型和长度的 JSON 字符串。这无疑是一个异步上传。

通常最好将文件存储在磁盘上而不是使用数据库。有几个原因：

*   更少的开销。通过文件系统加载比通过连接到（可能是非本地的）数据库更快。
*   大对象分配最少：在上传过程中已经创建了一个大对象。如果您要转换为字节数组，您将在内存中创建另一个大对象。

您可能想要使用数据库的一个原因是用于自定义版本控制或正确跟踪文件（通过额外的元数据......等）。但是，这通常也可以使用文件系统来完成。

# autohotkey - AutoHotKey - 全选 > 复制 > 插入 AHK 脚本 > 将复制的测试粘贴到 AHK 脚本区域

> ID：13792860
> 
> 赞同：3
> 
> 时间：2012-12-09T23:10:57.693
> 
> 标签：autohotkey

我希望使用带有 AutoHotKey 的命令“rwn”来选择所有文本并从文本框中复制现有文本 - 插入预定义脚本 - 然后将复制的文本中途插入预定义脚本。

这就是我到目前为止所拥有的——我已经尝试了几种不同的变体，但似乎都没有奏效。

```
::rwn::
{
Send ^a
Sleep 30
Send ^c
}
1 - Validated Customer Details:`n     Building: `n     Level & room: `n     Contact Office: x`n     Contact Mobile: 04`n`n2 - Original request information:`n     
{
Send ^v
} 
`n`n3 - New Restoration OR Existing Problem:`n     `n`n4 - Work Details:`n     `n`n5 - Remote Access:`n     Attempted (SCCM) Successful (SCCM) Not Available`n`n6 - Can be Resolved 

directly by me?`n     YES NO`n`n7 - Capture User Interaction`n     `n`n8 - Customer's understanding of resolution:`n     `n`n9 - KM Record potential:`n     Yes No`n  
return 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:55:58.620

鲁贝托，

我在记事本中对此进行了测试，因此我更改了回车/换行以在记事本中正常工作。我没有逐个字符地发送文本，这很慢，而是将所有内容存储在变量中，如果您愿意，您也可以将它们直接存储在剪贴板中。试试这个，告诉我结果。在个人层面上，知识管理流程与这种方法的合作效果如何？

```
:*:rwn:: ; Added * so you don't have to press Enter after rwn
Send ^a ; Select All
Sleep 30 ; Wait 30 ms.
Send ^c ; Copy incident text to clipBoard
ClipWait ; Wait for clipboard to fill
; Define 3 variables with text, pasting text from the clipboard is much faster than sending text. Since I tested it in Notpad, I had to use `r`n Carriage Return, New Line
Text1 = 1 - Validated Customer Details:`r`n     Building: `r`n     Level & room: `r`n     Contact Office: x`r`n     Contact Mobile: 04`r`n`r`n2 - Original request information:`r`n`r`n
Text2 = %ClipBoard%
Text3 = `r`n`r`n3 - New Restoration OR Existing Problem:`r`n`r`n`r`n4 - Work Details:`r`n`r`n`r`n5 - Remote Access:`r`n`r`n`r`nAttempted (SCCM) Successful (SCCM) Not Available`r`n`r`n6 - Can be Resolved directly by me?`r`n     YES NO`r`n`r`n7 - Capture User Interaction`r`n     `r`n`r`n8 - Customer's understanding of resolution:`r`n     `r`n`r`n9 - KM Record potential:`r`n     Yes No`r`n
ClipBoard = %Text1% ; Store fixed text 1 in clipboard
Send, ^v ; Paste clipboard content
ClipBoard = %Text2% ; Store incident text 2 in clipboard
Send, ^v ; Paste clipboard content
ClipBoard = %Text3% ; Store fixed text 1 in clipboard
Send, ^v ; Paste clipboard content
return 
```

哦，顺便说一句，我用 AutoHotKey_L 对此进行了测试，但它也应该与常规 AutoHotKey 一起使用。

# graphics - 垂直于圆锥的表面

> ID：13792861
> 
> 赞同：2
> 
> 时间：2012-12-09T23:11:00.643
> 
> 标签：graphics

我在 OpenGL/C++ 中编写了一个程序来跟踪一个锥体。对于我的强度计算，我需要知道表面法线。给定一个基本半径、高度和中心坐标，我如何计算表面法线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:28:42.240

我假设您需要在给定表面上的一个点的情况下找到表面的法线。我进一步假设这是一个圆锥体，其底部朝下（-y 轴），圆锥体的点朝上（+y 轴）。如果这些条件中的任何一个不属于这种情况，我可以编辑我的答案以适合您的情况。

让我们称您在表面 P 上的点、中心坐标 C、半径 r、高度 h 和法线 N。

所有的点和向量都有三个分量（x、y、z），所以我将使用“.”来引用它们。例如，Px 是 P 的 x 分量。

首先，我们需要一个投影到从 C 到 P 的 x/z 平面上的单位向量。

Vx=Px-Cx

Vy=0

Vz=Pz-Cz

该向量具有正确的方向，但幅度大于 1。它还不是单位向量，所以我们必须相应地对其进行缩放。

m=sqrt(Vx ² +Vz ² )

m 现在是 V 的大小，我们将使用它来缩放 V...

Vx/=m

Vz/=m

找到法线的最终计算是......

Nx=Vx*h/r

Ny=r/h

Nz=Vz*h/r

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T19:02:14.430

If you have your Cone faced down and an opening angel (α), base at h on (+z). You can chose your co-system on the top of con. Which means that the cone is balanced on the pointy part.

In this case you can derive a general expression for the normal komponent to this surface.

Step 1:

Express the normal i spherical coordinates(e_r,e_θ,e_φ), there all components are unit vectors and θ is defined as azimuthal angel.

result --> e_θ(θ==α,φ)

if you work with som other property of this shape such as magnetization M or electric flux. One can easily trasform this i cylindrical coordinates.

Step 2:

e_θ==-sin(θ) e_z +cos(θ) e_s(φ) there θ==α.

# database - 点击时显示图钉的内容 - Windows Phone 7

> ID：13792881
> 
> 赞同：0
> 
> 时间：2012-12-09T23:13:25.440
> 
> 标签：database, silverlight, windows-phone-7, map, pushpin

我在理解图钉及其内容时遇到了一些麻烦，因为有很多文章使用单个图钉。

我从数据库中获取数据，地图上有近 1000 个图钉，但我不喜欢它们显示内容。

我想要的是图钉看起来没有字母，例如，看起来像一个黑色的图形，但如果我点击它们，它们会显示它们的内容（这只是一个地址）。当我点击地图时也是如此，我希望他们的内容是 Visible.Collapsed。

我希望它看起来更像 iOS 风格，可能没有实际的图钉图，但没有显示内容，因为当它不允许您阅读其他图钉内容时它看起来很丑。

你能帮我吗？或者指出我正确的方向？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:48:10.077

我相信这就是您正在寻找的[自定义必应地图图钉](http://www.windowsphonegeek.com/articles/Windows-Phone-Pushpin-Custom-Tooltip-Different-Techniques)

您必须订阅 MapControl Tap 事件和 Pushpin Tap 事件。

图钉点击事件允许您仅在点击单个图钉时显示其内容。

而 mapcontrol 点击事件允许您折叠图钉的显示内容。

# entity-framework - POCO 对象继承还是抽象？

> ID：13792882
> 
> 赞同：0
> 
> 时间：2012-12-09T23:13:25.737
> 
> 标签：entity-framework, interface, abstract-class, poco

我只是想在 POCO 中模拟一个数据模型。但我对一些事情有点困惑。让我们假设这个例子我将使用实体框架来实现 ORM。首先我有一个电话和地址类：

```
public class Phone
{
    int Id { get; set; }
    int Number { get; set; }
}

public class Address
{
    public int Id { get; set; }
    public string Street { get; set; }
    public string Suite { get; set; }
    public string City { get; set; }
    public string State { get; set; }
    public int Zip { get; set; }
} 
```

接下来我有一个 Person 和一个 Company 类：

```
public class Person
{
    int Id { get; set; }
    string FirstName { get; set; }
    string MiddleName { get; set; }
    string LastName { get; set; }
    string Prefix { get; set; }
}

public class Company
{
    int Id { get; set; }
    int Name { get; set; }
} 
```

假设我希望 Person 和 company 都有电话或地址列表，逻辑上我可能会从代码的角度考虑这一点，以创建一个抽象类 AContact：

```
public abstract class AContact
{
    ICollection<Phone> Phone { get; set; }
    ICollection<Address> Address { get; set; }
} 
```

然后让我的公司和个人继承这个：

```
public class Company : AContact
{
    int Id { get; set; }
    int Name { get; set; }
}

public class Person : AContact
{
    int Id { get; set; }
    string FirstName { get; set; }
    string MiddleName { get; set; }
    string LastName { get; set; }
    string Prefix { get; set; }
} 
```

或者我可以创建一个接口：

```
public interface IContact
{
    ICollection<Phone> Phone { get; set; }
    ICollection<Address> Address { get; set; }
} 
```

并实现接口：

```
public class Company : IContact
{
    public int Id { get; set; }
    public int Name { get; set; }
    public ICollection<Phone> Phone { get; set;}
    public ICollection<Address> Address {get; set;}
} 
```

现在我明白了抽象类和接口之间的区别。但是这应该如何实现实体框架的功能呢？从网上的一些搜索看来，从 4.1 开始，你不能做接口的事情，这是否意味着我必须使用抽象类？或者我是否只需要在我想使用它们的每个类中明确定义这两个属性？另外，像 RavenDB 这样的东西也可以在那里工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:12:55.130

这两种选择都是可能的。

使用您的界面时，您的 DbContext 将如下所示：

```
public class MyContext : DbContext
{
    public IDbSet<Company> Companies { get; set; }
    public IDbSet<Person> People { get; set; }
} 
```

您将获得也恰好实现了您指定的接口的 Companies 和 People 对象。

使用抽象类时，您将拥有以下内容：

```
public class MyContext : DbContext
{
    public IDbSet<AContact> Contacts { get; set; }
} 
```

使用抽象基类，您将拥有一个实体集。使用 ，`OfType<T>`您可以将集合过滤到特定时间。

RavenDB 是一个完全不同的主题。这是一个运行非常流畅的 NoSql 数据库。它将您的对象序列化为 JSON 并为您存储它们。你可以使用（几乎）你想要的每一个类结构。

# unit-testing - nodejs 深度相等，有差异

> ID：13792885
> 
> 赞同：7
> 
> 时间：2012-12-09T23:14:18.607
> 
> 标签：unit-testing, node.js

是否有一个断言库可以向我展示两个对象在深入比较时有什么区别？

我尝试过使用 chai，但它只是告诉我对象是不同的，但不是在哪里。节点的断言也是如此......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:56:44.157

Substack 的[difflet](https://github.com/substack/difflet)可能是你需要的

更新：但是等等，还有更多：[https](https://github.com/andreyvit/json-diff) ://github.com/andreyvit/json-diff https://github.com/algesten/jsondiff [https://github.com/samsonjs/json-diff](https://github.com/samsonjs/json-diff)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T01:26:48.430

使用 chai 1.5.0 和 mocha 1.8.1，以下对我有用：

```
var expect = require('chai').expect;

it("shows a diff of arrays", function() {
  expect([1,2,3]).to.deep.equal([1,2,3, {}]);
});

it("shows a diff of objects", function() {
  expect({foo: "bar"}).to.deep.equal({foo: "bar", baz: "bub"});
}); 
```

结果是：

```
✖ 2 of 2 tests failed:

1)  shows a diff of arrays:

  actual expected

  1 | [
  2 |   1,
  3 |   2,
  4 |   3,
  5 |   {}
  6 | ]

2)  shows a diff of objects:

  actual expected

  {
    "foo": "bar",
    "baz": "bub"
  } 
```

此处未显示的是输出以红色/绿色突出显示，其中行意外/缺失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-11T17:23:04.770

基于[这个 StackOverflow 答案](https://stackoverflow.com/a/15208067/339925)，我相信这个问题发生在我身上，因为我的测试是异步的。

通过使用以下模式，我让差异再次正常工作：

```
try {
  expect(true).to.equal(false);
  done();  // success: call done with no parameter to indicate that it() is done()
} catch(e) {
  done(e);  // failure: call done with an error Object to indicate that it() failed
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-19T22:36:02.823

是的，有：[**assert-diff**](https://github.com/pihvi/assert-diff)

你可以像这样使用它：

```
var assert = require('assert-diff')

it('diff deep equal with message', function() {
  assert.deepEqual({pow: "boom", same: true, foo: 2}, {same: true, bar: 2, pow: "bang"}, "this should fail")
}) 
```

结果是：

```
1) diff deep equal with message:
     AssertionError: this should fail
 {
-  bar: 2
+  foo: 2
-  pow: "bang"
+  pow: "boom"
 } 
```

# php - D3,js 中的 JSON 解析错误

> ID：13792887
> 
> 赞同：0
> 
> 时间：2012-12-09T23:14:48.077
> 
> 标签：php, json, d3.js

从这个线程开始：[访问 MySQL 数据库 - D3](https://stackoverflow.com/questions/13783204/accessing-mysql-database-d3)

任何人都可以帮助解决我遇到的解析错误吗？关于什么可能导致这种情况的信息似乎相互矛盾？

**解析错误：**

错误：解析问题 d="M30,NaNL34,NaNL38,NaNL42,NaNL46,NaNL50,NaNL54,NaNL58.......

**获取数据.php：**

```
 <?php
    $username="*****"; 
    $password="*****";   
    $host="********";
    $link=mysql_connect($host,$username,$password)
    or die("Unable to connect to MySQL");

    mysql_select_db("*****", $link) or die( "Unable to select database"
    .mysql_error());

    $res = mysql_query("SELECT * FROM TestSourceSampleData")
    or die ("Unable to run query");
    $data = array();

    while ($row = mysql_fetch_assoc($res))
    {  
    $data[] = array("reading" => $row['reading']);
    } 
    echo json_encode($data);     
    mysql_close($link);
    ?> 
```

**getdata.php 的输出：**

[{"reading":"10"},{"reading":"10.2"},{"reading":"10.3"},{"reading":"10.3"}.......

**..当打印 json 文件时：**

```
 Array[120]
    [0 … 99]
    0: Object
    reading: "10"
    __proto__: Object
    1: Object
    reading: "10.2"
    __proto__: Object
    2: Object
    reading: "10.3"
    __proto__: Object
    3: Object
    4: Object
    5: Object 
```

[http://bl.ocks.org/5fc4cd5f41a6ddf2df23](http://bl.ocks.org/5fc4cd5f41a6ddf2df23)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T07:27:35.607

在您的块中，您使用：

```
var data = jsondata.map(function(d) { return d.Value; }); 
```

在您的问题中，您提到密钥的名称是`reading`，这意味着您的代码应如下所示：

```
var data = jsondata.map(function(d) { return d.reading; }); 
```

# java - 需要帮助才能使用 Eclipse 和 GWT App Engine 连接到 google Cloud SQL

> ID：13792890
> 
> 赞同：0
> 
> 时间：2012-12-09T23:15:23.383
> 
> 标签：java, google-app-engine, gwt, jdbc, requestfactory

几天以来，我一直在尝试将我的 GWT 项目连接到谷歌云 SQL 数据库。我正在使用 jdbc，当我在本地数据库或云 SQL 数据库上将此类作为 Java 类运行时，它运行良好。

```
package com.google.gwt.timecalc.server;

import java.io.IOException;
import java.sql.*;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import com.google.appengine.api.rdbms.AppEngineDriver;
import java.sql.*;
import com.google.cloud.sql.Driver;
public class ConnectionDB1 {

  static Connection con = null;
  static Statement stmt = null;
  static ResultSet rs = null;

  public static void main(String args[]) throws SQLException{

    DriverManager.registerDriver(new com.google.cloud.sql.Driver());
    try{
      // works local
      con = DriverManager.getConnection("jdbc:mysql://localhost/filme","root","admin" );                

      stmt = con.createStatement();

      rs = stmt.executeQuery("SELECT * FROM test");

      while ( rs.next() ){
        System.out.println("Id:                "+rs.getString(1));
        System.out.println("Name:           "+rs.getString(2));
      }

      rs.close();
      stmt.close();
      con.close();
    }

    catch ( SQLException e ){
      e.printStackTrace();
      System.exit(1);
    }   

  }
} 
```

当我尝试使用我的 GWT 应用程序执行此操作时，它不会工作。顺便说一句，我与 Requestfactory 一起工作。我什至无法像[这里](https://stackoverflow.com/questions/12681972/configure-google-cloud-sql-instance-in-eclipse)显示的那样连接到云 SQL DB 。

这就是我得到与[这里相同的错误](https://stackoverflow.com/questions/12681972/configure-google-cloud-sql-instance-in-eclipse)

我通过 google 教程使用云 sql 创建了一个新的 Web 应用程序。我也看到了[这个](https://stackoverflow.com/questions/12681972/configure-google-cloud-sql-instance-in-eclipse)，但它并没有解决我的问题。我还检查了谷歌教程，并在这里看到了示例： [https](https://developers.google.com/appengine/docs/java/gettingstarted/creating) ://developers.google.com/appengine/docs/java/gettingstarted/creating 今天我尝试连接关闭我的防火墙和防病毒软件，但它没有工作。

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:24:05.593

在我自己不熟悉这个过程并在这个过程中苦苦挣扎之后，我建议按照这里的过程：（https://developers.google.com/appengine/docs/java/cloud-sql/developers-guide）

这就是我能够连接的方式，并经历了注册 JDBC 驱动程序然后继续前进的过程。

我花了几个小时试图实现初始 python hello world 和留言簿的略微修改版本。我不能推荐完全按照他们建议的方式尽可能使用相同的文件名。

希望能帮助到你。

# c# - RadWindow 中的 JQuery 自动完成功能

> ID：13792891
> 
> 赞同：0
> 
> 时间：2012-12-09T23:15:36.893
> 
> 标签：c#, jquery, asp.net, autocomplete, telerik

我有 Jquery Autocomplete，它加载在用户控件上，它在页面上的 RadWindow 上。

当我删除 RadWindow 并将用户控件直接放置到页面时它工作正常，当我有 RadWindow 并且它`VisibleOnPageLoad=true`在页面加载时它再次正常工作，但是`VisibleOnPageLoad = false`默认情况下和在某些按钮的单击上我`VisibleOnPageLoad=true`在页面刷新后设置 JQuery 自动完成没有'不工作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:25:06.857

我建议在使用 Telerik 控件时使用[RadAutoCompleteBox](http://www.telerik.com/help/aspnet-ajax/autocompletebox-overview.html)而不是 jQuery 自动完成。

如果您想坚持使用 jQuery 实现，问题很可能是没有加载支持的 jQuery 插件库。您可能需要在父页面上手动添加对它的直接引用：

```
<script src=".../jquery-autocomplete.js" /> 
```

# java - 为什么 Eclipse 空指针分析无法识别断言实用程序？

> ID：13792893
> 
> 赞同：0
> 
> 时间：2012-12-09T23:15:49.983
> 
> 标签：java, eclipse, compiler-construction

我更多地从编译器理论的角度提出这个问题。为什么空指针分析没有考虑效果`Assert.notNull()`？

![代码块显示空引用访问在 Assert.notNull() 之后突出显示为错误](../Images/1481e7ec9561659ddbe410e8b8f29500.png)

Assert 方法来自 Spring，它被实现为：

```
public static void notNull(Object object, String message) {
    if (object == null) {
        throw new IllegalArgumentException(message);
    }
}

public static void notNull(Object object) {
    notNull(object, "[Assertion failed] - this argument is required; it must not be null");
} 
```

（这变得很烦人，因为如果我使用这种断言实用程序，在断言之后第一次访问该变量会导致警告，这会阻止我实现无警告代码。）

如果我完全内联断言例程，访问`a`将不会被标记为空指针访问（在这种微不足道的情况下，它将成为死代码）。但是，静态方法不能被覆盖（不是没有字节码摆弄），那么编译器设计者的 POV 不进入方法调用以进行空指针分析的理由是什么？

它只是性能问题还是有什么东西阻止了这一切？或者使其与其他编译器检查一致（死代码分析也没有考虑该方法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:43:57.597

> 为什么 Eclipse 空指针分析无法识别断言实用程序？

因为 Eclipse 空指针分析只考虑它正在分析的方法的语句......而不是被调用的方法的语义。（而且我当然不希望/希望 Eclipse 编译器的分析代码将`Spring`断言方法视为一种特殊情况。）

> 这变得很烦人......

那么关闭空分析！（应该有一个 Eclipse 编译器偏好来执行此操作。）

或者更改您的代码，使该值不总是`null`. 或者删除取消引用引用的（动态）不可达语句`null`。

老实说，你的例子太做作了，我无法想象有人在真实的代码中做这样的事情。没有不会改变代码含义的“修复”。我想这不是你的真实代码的情况......

* * *

仔细想想，这里的问题大致相当于Java中检测未初始化变量和不可达语句的问题。Eclipse 正在采用与 Java/JLS 相同的解决方案。

* * *

至于 Eclipse*应该*使用最先进的非本地分析代码的想法......我不同意。它会使 Eclipse 的交互式编译像糖浆一样慢。

不执行此操作还有其他原因，包括：

*   在一般情况下无法解决问题的事实（停止问题），
*   在理论上可以解决的情况下，这是一个技术上难以解决的问题，
*   需要维护额外代码的事实，以及
*   该功能的**实用性有限**的事实。（我的意思是说真的，你*真的*认为值得花很多人月来解决一小部分用户的小问题，这些用户可以在几秒钟内自己解决......通过调整编译器偏好？）

但是，如果您对此有强烈的感觉，您可以自由地开发和测试分析代码并将其贡献给 Eclipse 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:54:51.203

这当然是一个讨论而不是一个问题。

1.  你编译的jar不一定是你运行的jar。特别是 Assert 将成为在生产环境中具有不同实现的候选者。

2.  空指针错误会比死代码错误更好（此处）。

3.  eclipse编译器在后台连续编译。因此，由于智能是以速度损失为代价的，因此这种检查可能更适用于**findbugs**之类的工具。（想想所有的库调用，通过运行时异常可能会破坏控制流。）

# .net - 从 Bitmap 对象将图像渲染到 ASP.NET MVC 网页上

> ID：13792896
> 
> 赞同：8
> 
> 时间：2012-12-09T23:16:00.687
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4

我的代码已将二维码图像生成到 .NET Bitmap 对象中。当在页面上按下按钮时，会调用生成此代码的代码，如下所示：

```
 public ActionResult GenerateQrCode()
    {
        Bitmap qrCodeImage = Generate();
        return RedirectToAction("QrCodeGenerator");
    } 
```

这是页面的 MVC 控制器中的一种方法。

按下按钮时，会生成图像，然后我们将导航回页面。

所以从这里开始，我需要采取哪些步骤才能将此位图图像输出到我的网页（.cshtml 文件）。请记住，我正在使用 ASP.NET MVC。

我在网上看到的一件事是人们将图像保存到“Response.OutputStream”。我不太确定这是否与 ASP.NET MVC 有关。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-09T23:38:29.990

控制器动作需要返回一个 FileStreamResult。这就是你的做法

```
public static byte[] ConvertToByteArray(this Image img)
{
    using (var stream = new MemoryStream())
    {
        img.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
        return stream.ToArray();
    }
}

public ActionResult GenerateQrCode()
{
   Bitmap qrCodeImage = Generate();
   //write your own methode to convert your bit map to byte array, here is a link
   //http://stackoverflow.com/questions/7350679/convert-a-bitmap-into-a-byte-array-in-c
   byte[] byteArray = qrCodeImage.ConvertToByteArray();
   return File(byteArray, "image/jpeg");
} 
```

在你看来，你可以做这样的事情

```
<img src="@Url.Action("GenerateQrCode")" alt="qr code" /> 
```

# c - Signal 和 SIGCHLD，它的作用是什么？

> ID：13792900
> 
> 赞同：4
> 
> 时间：2012-12-09T23:16:20.920
> 
> 标签：c, signals, fork

我被要求在这个问题中找到所有可能的输出：

```
#define N 4
int val = 9;
void handler(sig) {
   val += 3;
   return;
}
int main() {
  pid_t pid;
  int i;
  signal(SIGCHLD,handler);
  for (i=0;i<N;i++) {
    if ((pid =fork()) == 0) {
        val -= 3;
        exit(0);
    }
  }
  for (i=0;i<N;i++) {
    waitpid(-1,NULL,0);
  }
  printf("val = %d\n",val);
} 
```

我不知道线路信号（SIGCHLD，处理程序）的作用。我只发现以下内容：

```
SIGABRT - abnormal termination.
SIGFPE - floating point exception.
SIGILL - invalid instruction.
SIGINT - interactive attention request sent to the program.
SIGSEGV - invalid memory access.
SIGTERM - termination request sent to the program. 
```

SIGCHLD 做什么？您能否也解释一下这个问题中的 for 循环？

我需要哪些必要的库来编译和运行这段代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-20T02:31:22.283

当您从父进程派生子进程时，会设置 SIGCHLD 但不会执行处理函数。子进程退出后，它触发 SIGCHLD 并因此导致处理函数中的代码执行......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T02:10:26.663

奇怪的节目。

我认为我试图向您展示的是 SIGCHLD 导致的原因以及子进程中的变量如何被子进程更改，对父进程没有影响。

当你 fork() 你创建一个子进程。听起来有点熟？父进程（调用 fork() 的进程）接收信号。处理程序被执行。当你运行程序时，你应该会看到 21 个。

这是因为每次执行信号处理程序 9 + ( 3*4)=21 时 val 都会增加 3。该代码创建了四个孩子。

子进程

val -= 3；退出（0）；

递减 val。但是因为这发生在另一个进程中，而不是原始子进程中，它不会触及“原始” val 变量，因为它有自己的本地副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T12:10:07.147

我相信@jim mcnamara 的回答没有列出所有可能的输出。

9+(3*k) for 1 <= k <= 4 应该是可能的，因为多个信号可以合并为一个。

# java - Java - Android SDK 8 - 使用 DocumentBuilderFactory 在实体之后终止字符串的 XML 解析

> ID：13792905
> 
> 赞同：0
> 
> 时间：2012-12-09T23:17:18.937
> 
> 标签：java, android, xml

我正在用 Java for Android (SDK v8) 编写一个应用程序，它解析 XML 并将条目放入 ListView。这部分工作正常。我正在使用 DocumentBuilder 解析 XML，它在实体之后终止它输出的字符串 - 不包括实体本身。我使用的实体是标准实体 &(quot, amp, apos, lt, gt); 我还尝试在我的源 XML 中使用数字实体（例如 38; 没有空格，这样你就可以看到我正在输出的内容），这导致我的应用程序崩溃，logcat 报告“未终止的实体引用” .

为了测试我没有使用无效的 XML，我尝试使用谷歌浏览器查看 XML——它完美地显示了它。条目`blah &amp; blah.txt`被截断为`blah`。我正在解析的 XML 如下：

编辑：更短的 XML 示例

```
<?xml version="1.1"?>  
<root>  
<object>  
<id>ROOT</id>  
<type>directory</type>  
<name>../</name>  
</object>  
<object>  
<id>09F010C143B84573A36C50F3EF7E0708</id>  
<type>file</type>  
<name>blah &amp; blah.txt</name>  
</object>   
<object>  
<id>85CF028B838D4E0096C081B987C97045</id>  
<type>file</type>  
<name>Epilist.m3u</name>  
</object>  
</root> 
```

编辑：XML 解析类 EDIT2：下面是一个完整的类，（在其他人的帮助下）现在应该没有错误。欢迎任何人使用此类 - 我将其作为公共领域代码提供。您无需引用我最初生成此代码即可使用它。它是为 Android 设计的，但通过替换对“Log.e”的引用，据我所知，它可以很容易地在任何 Java 平台上使用。

```
package tk.dtechsoftware.mpclient;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            // HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    public Document getDomElement(String xml) {
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setExpandEntityReferences(false);
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }
        // return DOM
        return doc;
    }

    public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return n.item(0).getTextContent(); 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:39:15.227

我认为它不能保证元素节点只有一个包含其文本内容的子节点。内容也可以跨多个子节点拆分。

您的`getElementValue`方法可能可以通过对[`elem.getTextContent()`](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#getTextContent%28%29).

# assembly - 在 MIPS 中的两个 32b 寄存器中存储由字符串表示的 64 位数字的算法

> ID：13792907
> 
> 赞同：2
> 
> 时间：2012-12-09T23:17:25.380
> 
> 标签：assembly, 64-bit, mips, 32-bit

这是一个汇编语言问题。我已经想出了如何接受用户输入作为字符串并将其转换为整数

将当前总和乘以 10（移动 3 并向左移动 1 个位置，然后将两个结果相加）并从字符串中添加新数字（已通过减去 48 转换为数字）

现在直到溢出点这都可以正常工作，但是如何将数字拆分以适合两个寄存器？它必须被划分或移位吗？请详细解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T01:42:07.013

为此，您将需要合成双宽度操作，即移位和加法。

对于移位，除了分别移位两半之外，您还需要将溢出的高位从低半部分带入高半部分。为此，您酌情将低半部分向右移动，然后使用按位`OR`或加法将它们放入高半部分。

在伪代码中（使用逻辑移位）：

```
result_low = (orig_low << n)
result_high = (orig_high << n) | (orig low >> (32 - n)) 
```

对于加法，您处理低半部分，然后检查它是否小于原始操作数之一。如果是，则意味着发生了溢出，您必须将进位添加到加数的高半部分和高半部分。

```
result_low = op1_low + op2_low
result_high = op1_high + op2_high + ((result_low < op1_low) ? 1 : 0) 
```

一个可能的 asm 实现：

```
 la $t2, buff            ; pointer to string
    li $t0, 0               ; low
    li $t1, 0               ; high
loop:
    lb $t3, ($t2)           ; load next byte
    beq $t3, $zero, done    ; end of string?
    addi $t3, $t3, -48      ; convert from ascii
                            ; t4,5 = t0,1 << 1
    srl $t6, $t0, 31        ; t6 is used for the spilled bit
    sll $t4, $t0, 1         ; shift low half
    sll $t5, $t1, 1         ; shift high half
    or $t5, $t5, $t6        ; put in the spilled bit
                            ; t0,1 <<= 3
    srl $t6, $t0, 29        ; the 3 spilled bits
    sll $t0, $t0, 3         ; shift low half
    sll $t1, $t1, 3         ; shift high half
    or $t1, $t1, $t6        ; put in the spilled bits
                            ; t0,1 += t4,5
    addu $t0, $t0, $t4      ; add low halves
    addu $t1, $t1, $t5      ; add high halves
    sltu $t6, $t0, $t4      ; t6 = (t0 < t4), that is the carry
    addu $t1, $t1, $t6      ; add the carry if any
                            ; ok t0,1 has been multiplied by 10
    addu $t0, $t0, $t3      ; just add the digit now
    sltu $t6, $t0, $t3      ; the carry
    addu $t1, $t1, $t6      ; add the carry if any

    addiu $t2, $t2, 1       ; increment pointer
    b loop                  ; and continue
done: 
```

您当然也可以直接使用乘法而不是移位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:28:38.007

数字是位移的。您可以参考 wiki 上给出的乘法序列来了解如何填充 LO 和 HI 寄存器

```
LO = (($s * $t) << 32) >> 32;
HI = ($s * $t) >> 32; 
```

[en.m.wikipedia.org/wiki/MIPS_architecture#section_6](http://en.m.wikipedia.org/wiki/MIPS_architecture#section_6)

# php - 使用 file_get_contents 时的不同输出

> ID：13792908
> 
> 赞同：1
> 
> 时间：2012-12-09T23:17:32.917
> 
> 标签：php, file-get-contents

我试图使用 PHP 的 file_get_contents() 获取以下 URL 的内容，但是输出与使用我的浏览器时不同。我尝试设置一个用户代理，但没有成功，我还尝试完全模拟我的浏览器所做的 HTTP 请求，但没有运气。有谁知道什么可以使它工作？使用 PHP 时，我会进入登录表单，但通过浏览器打开时，它只会打开时间表：

网址如下：

[https://webuntis.a12.nl/WebUntis/Timetable.do?type=1](https://webuntis.a12.nl/WebUntis/Timetable.do?type=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T01:34:39.473

您尝试访问的 URI 似乎需要身份验证。因此，如果您希望 PHP 为您发出请求，您将需要在 PHP 中实现该身份验证过程。

这可以通过以下两种方式之一来完成。第一个是使用[PHP 内置的 HTTP 流包装器](http://php.net/context.http)，我认为这很容易使用。另一种是使用[cURL](http://php.net/curl)，它可能有点像瑞士军刀。所以你可能会有点不知所措，但从表面上看，这两种选择都应该是微不足道的。

您需要`action`向该页面上表单中的属性发送一个发布请求，然后从响应中您必须从[$_COOKIE 超全局](http://php.net/%24_COOKIE)中提取 cookie并将其与每个后续请求一起发送。我在此处链接到的手册中有示例。

# java - Java：扩展 JButton 以填充容器

> ID：13792909
> 
> 赞同：6
> 
> 时间：2012-12-09T23:17:41.717
> 
> 标签：java, swing, jpanel, jbutton

我有一个`JButton`我想扩展以填充`JPanel`持有它的 a 的大小。我尝试了几种不同的方法，但没有运气。以下是一些尝试：

1.  [此处](https://stackoverflow.com/questions/2536873/how-can-i-set-size-of-a-button)推荐的手动尺寸设置- 按钮的尺寸没有改变。

    ```
    panel  = new JPanel(new CardLayout());
    button = new JButton();
    button.setPreferredSize(new Dimension(BUTTON_SIZE, BUTTON_SIZE)); 
    panel.add(button); 
    ```

2.  尝试使用 a`BorderLayout`来展开按钮，如此处[所示](https://stackoverflow.com/questions/311876/jbutton-expanding-to-take-up-entire-frame-container)。大小没有变化。

    ```
    panel  = new JPanel(new BorderLayout());
    button = new JButton();
    panel.add(button, BorderLayout.CENTER); 
    ```

我可能做错了什么，所以非常感谢任何帮助。

**编辑**

以下是解决问题的摘要。有两件事有效

1.  删除 LayoutManager（在对 的调用中`new JPanel`），[根据 Oracle](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)默认为 BorderLayout。
2.  将维度添加到呼叫中，如接受的答案（即`new BorderLayout(0,0)`）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T23:24:37.037

您的第二次尝试应该可以工作，但这并不意味着您的整个顶级容器将被`JPanel`包含您的`JButton`. 当容器中没有其他组件时`BorderLayout`，中心组件将扩展以填充整个容器。

[http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

> 如果窗口被放大，中心区域将获得尽可能多的可用空间。

您可以发布运行应用程序时看到的图像吗？下面是一个工作示例。值得注意的一件事是，每个容器一直到顶部`JFrame`都在使用`BorderLayout`. 在您的尝试中，某些上层容器可能会限制您的大小`JPanel`，因此也限制了`JButton`内部的大小。

```
frame = new JFrame();
frame.setBounds(100, 100, 450, 300);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

JPanel panel = new JPanel();
panel.setLayout(new BorderLayout(0, 0));
JButton button = new JButton("I'm a button!");
panel.add(button);

frame.getContentPane().add(panel, BorderLayout.CENTER); 
```

![在此处输入图像描述](../Images/749792c884032f6a286701d25d676bf9.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-09T23:28:08.347

`BorderLayout`是最简单的解决方案。

您可能遇到的问题是父面板的布局方式。将按钮添加到使用的面板`BorderLayout`然后将面板添加到使用的面板`FlowLayout`不会产生您想要的效果。

![在此处输入图像描述](../Images/1615b09838c1b0bd75bb933eddd10230.png)

```
public class ExpandButtonTest {

    public static void main(String[] args) {
        new ExpandButtonTest();
    }

    public ExpandButtonTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JButton("I'm a big button"));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-09T23:27:39.587

使用时对我来说似乎很好`BorderLayout`：

![在此处输入图像描述](../Images/573497d8a485d96dc8754de3fe26198a.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel panel = new JPanel() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };
        panel.setLayout(new BorderLayout());

        JButton button = new JButton("Button");

        panel.add(button);

        frame.add(panel);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

请发布[SSCCE](http://sscce.org)以显示具体问题。

# javascript - 是否有替代 jQuery / sizzle 的方法支持 textNodes 作为选择器中的一等公民？

> ID：13792910
> 
> 赞同：2
> 
> 时间：2012-12-09T23:17:47.037
> 
> 标签：javascript, jquery, dom, sizzle, textnode

我发现我需要完全支持 DOM`textNode`的选择器，而 jQuery 没有提供。

jQuery 忽略文本节点，可能是因为大多数页面在标签之间有大量不相关的空白节点，各种浏览器可以区别对待。

关于文本节点的 jQuery 问题的大多数答案归结为使用`.contents()`返回所选项目的所有子节点的函数，包括文本节点 - 所有其他 jQuery API 都忽略文本节点。

通常你不需要一些不容易建立的东西，`.contents()`但我发现自己处于这种情况。

我的用例是我想在我无法控制的第 3 方网页中定位并包装任意运行的文本。（想想浏览器扩展或用户脚本。）

到目前为止，我很高兴在 DOM 中查找所有文本节点，或者找到一个包含我感兴趣的所有文本节点并用于`.contents()`迭代它们的包装元素。

但是现在我发现有时我需要 jQuery/sizzle 选择器的全部功能来将我的注意力缩小到类中类的某些可能性等。

我考虑了使用`textNode`选择器扩展 jQuery 的方法，但这似乎是不可能的，因为忽略文本节点的普遍规则会在调用我的扩展之前过滤掉其中的许多节点。

因此，我正在寻找其他一些 JavaScript 工具，它提供类似选择器的功能，但允许选择在其选择器表达式语法中任意混合的文本节点。

这是我可能需要做的一个例子：

```
$('.ii:even > div > TXT, .ii:even > div > div.im > TXT') 
```

这是一个我个人还不需要但很容易想象的例子：

```
$('#something .somethingElse TXT') 
```

当您可以寻址（选择）文本节点的直接父级时，迭代它们`.contents()`很容易，而不是当您只能识别某个任意祖先但想要其下方的所有文本节点时，这对于元素节点来说当然是微不足道的.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T00:46:14.957

这是您可以做的事情：

```
jQuery.fn.getTextNodes = function(val,_case) {
    var nodes = [],
        noVal = typeof val === "undefined",
        regExp = !noVal && jQuery.type(val) === "regexp",
        nodeType, nodeValue;
    if (!noVal && _case && !regExp) val = val.toLowerCase();
    this.each(function() {
        if ((nodeType = this.nodeType) !== 3 && nodeType !== 8) {
            jQuery.each(this.childNodes, function() {
                if (this.nodeType === 3) {
                    nodeValue = _case ? this.nodeValue.toLowerCase() : this.nodeValue;
                    if (noVal || (regExp ? val.test(nodeValue) : nodeValue === val)) nodes.push(this);
                }
            });
        }
    });
    return this.pushStack(nodes, "getTextNodes", val || "");
}; 
```

然后你可以使用以下内容：

```
$("selector").getTextNodes("selector"); 
```

[这](http://jsfiddle.net/bShrt/1/)是一个JSFiddle。

工作原理`.getTextNodes()`非常简单。如果您不传递参数，它将返回所有文本节点。如果您将字符串传递给它，它会返回具有完全相同的文本节点`nodeValue`。如果您要传递一个字符串，请将第二个参数设置为真值以进行不区分大小写的检查。第一个参数也可以`nodeValue`是匹配的正则表达式。

希望这可以帮助。

* * *

**编辑**：请注意，您也可以使用`$("selector").getNodes("selector").end()`，因为它使用`.pushStack()`.

# database - 如何显示随机单词？

> ID：13792911
> 
> 赞同：1
> 
> 时间：2012-12-09T23:18:00.800
> 
> 标签：database, vb.net, dictionary

我想找到一种方法来制作一个刽子手游戏，但那会使用大量的文字。由于有 x 个不同的案例效率不高，我想知道是否有任何方法可以显示随机单词。我尝试寻找字典，但我找到的只是字典类型。我是初学者，所以简化的答案会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:34:30.410

在这种情况下，最简单的解决方案是使用`System.IO.File.ReadAllLines`，然后使用`Random`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:30:09.173

创建一个每行一个单词的文本文件。然后你读入文件并将一个字符串分配给当前行。然后将字符串添加到动态列表或数组中。现在你有了你的单词表。然后只需创建一个名为 pos 从 0 到 n-1 的随机数，其中 n 是大小，如果数组（单词数） pos 现在是单词的索引，那么您将从单词数组中获取。

# c# - ASP.NET 如何将具有某个类的所有元素绑定到同一个数据源

> ID：13792915
> 
> 赞同：0
> 
> 时间：2012-12-09T23:18:40.720
> 
> 标签：c#, asp.net, data-binding

假设我有 100 个带有“状态”类的下拉列表。如何将所有具有“状态”类的 Web 控件绑定到同一个数据源，而不是一一进行？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:43:04.977

所有控件都位于[Page.Controls](http://msdn.microsoft.com/en-us/library/yt340bh4%28v=vs.100%29.aspx)中，您可以相应地对其进行迭代：

```
private void Page_Load(object sender, System.EventArgs e)
{
    LoopDropDownLists(Page.Controls);
}

private void LoopDropDownLists(ControlCollection controlCollection)
{
    foreach(Control control in controlCollection)
    {
        if(control is DropDownList)
        {
            ((DropDownList)control).DataSource = //Set datasource here!
        }

        if(control.Controls != null)
        {
            LoopDropDownLists(control.Controls);
        }
    }
} 
```

然而，我对您对 100 个 DropDownLists 的需求很感兴趣，这对用户友好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:39:12.993

在页面加载时，您可以循环访问表单上的控件，并在必要时根据类属性将下拉列表上的数据源属性动态设置为所需的源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T00:23:28.810

添加到 m.edmondsons 答案：

```
 /// <summary>
    /// Bind DropDown Lists with a cetain CSS Class
    /// </summary>
    /// <param name="control">Parent Control Containing Dropdown Lists</param>
    /// <param name="cssClass">Class that determines binding</param>
    /// <param name="tableToBind">Data Source</param>
    public void FindAndBindControlsRecursive(Control control, string cssClass, DataTable tableToBind)
    {   
        foreach (Control childControl in control.Controls)
        {
            if (childControl.GetType() == typeof(DropDownList))
            {
                DropDownList dd = (DropDownList)childControl;
                //Check CSS class                    
                if (dd.CssClass.IndexOf(cssClass) > -1)
                {
                    dd.DataSource = tableToBind;
                    //Set DataFields & TextFields
                    dd.DataBind();
                }
            }
            else
            {
                FindAndBindControlsRecursive(childControl, cssClass, tableToBind);
            }
        }
    } 
```

# html - 删除按钮提交时输入文本的默认值

> ID：13792916
> 
> 赞同：1
> 
> 时间：2012-12-09T23:18:58.020
> 
> 标签：html

如果用户没有用信息填充字段，我需要知道我可以做什么来删除输入文本的默认值。现在，当搜索栏显示时，我的表单显示“例如：Ipod、Iphone”。代码示例：

```
<input type="text" value="eg: Ipod, Iphone" name="Product" id="Product"
onblur="if (this.value == '') {this.value = 'eg: Ipod, Iphone';}"
onfocus="if (this.value == 'eg: Ipod, Iphone') {this.value = '';}" />
<button class="submit" title="Post" type="submit"><span>Submit</span></button> 
```

我的想法是显示该信息-例如：Ipod，Iphone-但是如果有人在该文本框中按提交而没有新信息，则传递的信息将更改为Ipod或Iphone，而不是例如：Ipod，Iphone一起。提前致谢。

啊啊啊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T16:09:13.117

正如评论中所说，使用 html 属性`placeholder`：

```
<input type="text" placeholder="eg: Ipod, Iphone" /> 
```

对于不支持此属性的旧浏览器，有一些 jquery 插件可以处理此问题。我们为此使用[jquery-watermark](http://code.google.com/p/jquery-watermark/)。它只需要您`class="watermark"`在输入上设置并包含脚本文件。

# java - JFreeChart Scatter Plot 在系列之间移动数据

> ID：13792917
> 
> 赞同：2
> 
> 时间：2012-12-09T23:18:59.483
> 
> 标签：java, jfreechart, cluster-analysis, k-means, scatter-plot

抱歉，如果这个问题有点不具体，但我对使用 JFreeChart 很陌生，并且对它的理解平庸。本质上，我试图创建一个应用程序，在随机生成的点的散点图上逐步描述 kMeans 聚类算法。我想让程序使用颜色显示哪些聚类点属于。当算法确定它属于不同的集群时，是否可以将点从一个数据集移动到另一个数据集？如果不能，我可以就什么是更好的方法提出建议。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T02:11:57.217

*此示例从Original*中删除`N/2`项目，并在每次按下按钮时将它们添加到*Moved 。*

 **![图像](../Images/75029943e7a746a827f93854c3dc749a.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.util.*;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import org.jfree.chart.*;
import org.jfree.chart.axis.NumberAxis;
import org.jfree.chart.axis.NumberTickUnit;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.chart.renderer.xy.XYItemRenderer;
import org.jfree.data.xy.XYDataItem;
import org.jfree.data.xy.XYDataset;
import org.jfree.data.xy.XYSeries;
import org.jfree.data.xy.XYSeriesCollection;

/**
 * @see http://stackoverflow.com/a/13794076/230513
 * @see http://stackoverflow.com/questions/8430747
 * @see http://stackoverflow.com/questions/8048652
 * @see http://stackoverflow.com/questions/7231824
 * @see http://stackoverflow.com/questions/7205742
 * @see http://stackoverflow.com/questions/7208657
 * @see http://stackoverflow.com/questions/7071057
 * @see http://stackoverflow.com/questions/8736553
 */
public class ScatterAdd extends JFrame {

    private static final int N = 8;
    private static final int SIZE = 345;
    private static final String title = "Scatter Add Demo";
    private static final Random rand = new Random();
    private final XYSeries series = new XYSeries("Original");
    private final XYSeries added = new XYSeries("Moved");

    public ScatterAdd(String s) {
        super(s);
        final ChartPanel chartPanel = createDemoPanel();
        chartPanel.setPreferredSize(new Dimension(SIZE, SIZE));
        this.add(chartPanel, BorderLayout.CENTER);
        JPanel control = new JPanel();
        control.add(new JButton(new AbstractAction("Move") {

            @Override
            public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < N / 2; i++) {
                    XYDataItem item = series.remove(0);
                    if (item != null) {
                        added.add(item);
                    }
                }
            }
        }));
        this.add(control, BorderLayout.SOUTH);
    }

    private ChartPanel createDemoPanel() {
        JFreeChart jfreechart = ChartFactory.createScatterPlot(
            title, "X", "Y", createSampleData(),
            PlotOrientation.VERTICAL, true, true, false);
        XYPlot xyPlot = (XYPlot) jfreechart.getPlot();
        xyPlot.setDomainCrosshairVisible(true);
        xyPlot.setRangeCrosshairVisible(true);
        XYItemRenderer renderer = xyPlot.getRenderer();
        renderer.setSeriesPaint(0, Color.blue);
        adjustAxis((NumberAxis) xyPlot.getDomainAxis(), true);
        adjustAxis((NumberAxis) xyPlot.getRangeAxis(), false);
        xyPlot.setBackgroundPaint(Color.white);
        return new ChartPanel(jfreechart);
    }

    private void adjustAxis(NumberAxis axis, boolean vertical) {
        axis.setRange(-3.0, 3.0);
        axis.setTickUnit(new NumberTickUnit(0.5));
        axis.setVerticalTickLabels(vertical);
    }

    private XYDataset createSampleData() {
        XYSeriesCollection xySeriesCollection = new XYSeriesCollection();
        for (int i = 0; i < N * N; i++) {
            series.add(rand.nextGaussian(), rand.nextGaussian());
        }
        xySeriesCollection.addSeries(series);
        xySeriesCollection.addSeries(added);
        return xySeriesCollection;
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                ScatterAdd demo = new ScatterAdd(title);
                demo.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                demo.pack();
                demo.setLocationRelativeTo(null);
                demo.setVisible(true);
            }
        });
    }
} 
```**

# ruby - Capybara::ElementNotFound - 我如何查看它检查的来源？

> ID：13792919
> 
> 赞同：1
> 
> 时间：2012-12-09T23:19:00.827
> 
> 标签：ruby, rspec, capybara

我将 Capybara(v2.0.1) 与 RSpec(v2.11.0) 一起使用，并且我的规范与[README](https://github.com/jnicklas/capybara)中的示例非常相似：

```
require 'capybara/rspec'
require 'capybara/dsl'

# other setup…

describe "Sign in" do
  include Capybara::DSL

  before do
    within("#session") do
      fill_in 'Login', :with => 'user@example.com'
      fill_in 'Password', :with => 'password'
    end
    click_link 'Sign in!'
  end

  subject { page }
  it { should have_content "logged_in? true" }
end 
```

不幸的是，这是我看到的失败消息：

> 失败/错误：within("#session") do
> Capybara::ElementNotFound:
> Unable to find css "#session"

但它没有向我显示它使用的源的输出，并且在单击该链接后涉及重定向，所以我想确定它正在检查什么。

Capybara 似乎也在抑制警告（坦率地说，我觉得这很烦人），因为我`warn page.inspect`在几个地方尝试过，但输出中没有任何内容。

谁能告诉我我该怎么做？非常感谢您提供的任何帮助或见解。

我应该补充一点，我没有使用 Rails 或 Cucumber。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T22:50:08.920

我只是在测试开始时添加了这一行：

```
puts "#{page.html.inspect}" 
```

我必须在命令行上查看所有内容，但它又快又脏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-13T19:29:02.837

capybara`save_and_open_page`将 html 写入应用程序的 tmp 目录并在默认浏览器中打开它。

这些天在水豚自述文件部分的[调试部分](https://github.com/jnicklas/capybara#debugging)中提到了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T13:29:24.147

我使用 irb 作为 Selenium 的实时调试器，这样我就可以跟着它进行。对于调试 Capybara/Selenium 的怪异现象非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T01:35:52.327

您可以使用 page.html 查看整个源代码。从那里通过检查#session的第一个匹配项很容易检查。

# wxpython - 在窗口中绘图 wx.clientDC 与面板无关，而是与整个窗口相关

> ID：13792922
> 
> 赞同：2
> 
> 时间：2012-12-09T23:19:23.383
> 
> 标签：wxpython, gdi

我正在使用 wxPython 为项目构建剪辑优化器，我想为绘图区域布局一个简单的框架，并在下方为操作和消息布局一个小面板。

我正在这样做：

```
topPanel = wx.Panel(self)
# the intended drawing area, 800x600    
self.planeArea = wx.Window(topPanel, -1, pos=(0, 0), size=(800, 600))

# a panel for showing messages and placing some buttons    
commandArea = wx.Panel(topPanel, -1, pos=(800, 0), size=(800, 200))
button = wx.Button(commandArea, -1, label='Optimize')

box = wx.BoxSizer(wx.VERTICAL)        
box.Add(self.planeArea, 0, wx.EXPAND | wx.ALL)
box.Add(commandArea, 0, wx.EXPAND | wx.ALL)
topPanel.SetSizer(box) 
```

在我的绘图方法中，我这样做：

```
# I'm using clientDC because I draw the shapes after the user chooses a file, Am I doing it wrong? I still haven't figured how or when to use paintDC and left that research for later
dc = wx.ClientDC(self.planeArea)
dc.Clear()
dc.SetDeviceOrigin(0, 0)

for polygon in plane.polygons:
    dc.DrawPolygon(polygon.vertices) 
```

如果我不使用 SetDeviceOrigin，多边形是从窗口的最左边和最上面的点开始绘制的，但我想从最左边、最下面的点开始。

问题是我的图纸放错了位置，因为 0,0 是相对于整个窗口，而不是相对于我的绘图面板。

我一直在阅读文档和以下示例，但我无法解决这个问题。有谁知道我做错了什么？

我在 Mountain Lion 和 Python 2.7（PyDev 和 Eclipse）中使用 wxPython2.9-osx-cocoa-py2.7

非常感谢，

杆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:13:02.060

我通常不理会原点等，而是调整绘图，但我认为您想要类似的东西`dc.SetDeviceOrigin(0, dc.GetSize().height-1)`，这意味着默认坐标空间中的点 (0,height-1) 将成为新的 (0,0)。但是，该点上方的坐标仍然是负数，低于该点的坐标仍然是正数。要切换它，您需要调用`SetAxisOrientation`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:20:12.510

我不确定出了什么问题，但我有同样的问题。

我发现如果你使用 wx.ClientDC(event.GetEventObject()) 并将你的方法放在外面，它在 osx (10.6.8 python 2.7 wxpython 2.9.4.0 cocoa) 上工作正常

这相对有效（绘制一个框架和一个面板，然后相对于面板绘制一个框）：

```
import wx

class test(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(test, self).__init__(*args, **kwargs)
        self.InitUI()
    def InitUI(self):
        panel = wx.Panel(self, -1)
        graphpanel = wx.Panel(panel, -1, pos=(50, 50), size=(200, 200))
        graphpanel.Bind(wx.EVT_PAINT, PaintGraph)
        self.SetSize ((1000,750))
        self.Centre()
        self.Show(True)

def PaintGraph(event):
    graph = wx.ClientDC(event.GetEventObject())
    graph.SetPen(wx.Pen(wx.BLUE, 1, wx.SOLID))
    graph.DrawRectangle(0, 0, 100, 100)

def main():
    ex = wx.App()
    test(None)
    ex.MainLoop()

if __name__ == '__main__':
    main() 
```

这在 Windows 上相对有效，但在 osx 上无效（在我的 OSX 10.6.8 上它在框架上绘制）：

```
import wx

class test(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(test, self).__init__(*args, **kwargs)
        self.InitUI()
    def InitUI(self):
        panel = wx.Panel(self, -1)
        graphpanel = wx.Panel(panel, -1, pos=(50, 50), size=(200, 200))
        graphpanel.Bind(wx.EVT_PAINT, self.PaintGraph)
        self.SetSize ((1000,750))
        self.Centre()
        self.Show(True)    
    def PaintGraph(self, event):
        graph = wx.ClientDC(self)
        graph.SetPen(wx.Pen(wx.BLUE, 1, wx.SOLID))
        graph.DrawRectangle(0, 0, 100, 100)

def main():
    ex = wx.App()
    test(None)
    ex.MainLoop()

if __name__ == '__main__':
    main() 
```

有谁知道为什么？

# c++ - 将对象作为空返回返回什么？

> ID：13792923
> 
> 赞同：-3
> 
> 时间：2012-12-09T23:19:45.773
> 
> 标签：c++

我有一个类和一个返回该类对象的函数，如果我返回 NULL 究竟会返回什么？

例子：

```
class someclass {
    int a;
    int b;
    someclass::someclass(int a, int b) {
        this->a = a; this->b = b;
    }
};

someclass functionname() {
    return NULL;
}

someclass foo = functionname(); 
```

由于我没有该类的默认构造函数，因此返回了什么？它是一个实际可用的对象吗？还是只是胡言乱语？为什么我不能这样检查？

```
if (foo == NULL) {
    something
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:23:34.870

在 C++ 中，没有实际的 null （但是`nullptr`从新版本开始就有）。这意味着 NULL 的定义如下：

```
#define NULL 0 
```

因此它具有与数字变量 0 相同的特性。这就是为什么你不能将你的类设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:36:42.597

编译器不接受此代码。`C++`不同于`Java`并且`C#`不将类实例视为指针（或引用）。因此，对于此返回，它将尝试`someclass`使用 code创建新实例`someclass(NULL)`。由于您没有适当的构造函数，因此会发生错误。

如果您想为该类设置一些“不存在”的值，请在类中对其进行编程（例如，作为布尔标志）或使用指针，例如：

```
someclass* functionname() {

    if( ??? ) { 
        return new someclass(2,3);
    }
    else {
       return NULL;
    }
} 
```

请记住，`C++`它没有抓取收集器，因此您需要在不需要`new`时自己删除 ed 对象。

```
someclass *a;
a = functionname();
...
delete a; 
```

忘记这是`C++`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:07:24.340

这个例子更像是一个情景描述，而不是应该实际编译的东西，因此我没有费心去验证它，因为它与答案无关，我怀疑有人会对筛选我定义一个类的 100 行代码和一个函数。

无论如何，答案是，如果该类有任何带有 1 个变量的构造函数（可选或以其他方式），它将使用该构造函数并在第一个变量中使用 0 初始化对象，它可以适合

# facebook - 如何从我的 Facebook 页面中提取所有喜欢并将它们添加到我的网站？

> ID：13792924
> 
> 赞同：1
> 
> 时间：2012-12-09T23:19:49.290
> 
> 标签：facebook, facebook-graph-api

我有许多 Facebook 页面，我提供日常内容。我还有一个网站，我在上面宣传我的服务，现在我想知道是否有可能制作某种小部件来显示我所有页面的总喜欢数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:29:19.663

使用 Facebook 查询语言 (FQL)，您应该能够做到这一点。

就像是

```
SELECT share_count, like_count, comment_count, click_count
FROM link_stat
WHERE url = '$myURL' 
```

应该使用 PHP 工作。

有关更多信息，请参阅 [https://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T00:01:36.587

即使没有 Facebook 应用，这也很容易：

```
$pageinfo = file_get_contents('http://graph.facebook.com/' . $pageid); 
```

您甚至可以在浏览器中尝试。$pageinfo 将包含有关您的页面的一些信息，以及类似的计数。当然，您也可以为此使用 CURL，但 file_get_contents 是单行的。

# ruby-on-rails - Rails：布尔 attr_accessible 默认方法行为

> ID：13792928
> 
> 赞同：2
> 
> 时间：2012-12-09T23:20:40.300
> 
> 标签：ruby-on-rails, ruby, activerecord, boolean, attr-accessible

我有一个普通类（事件），其中布尔值定义为

```
 attr_accessible :archived 
```

在 db 模式中是

```
t.boolean  "archived",                          :default => false 
```

因此，默认方法归档？是自动定义的。

经过调试会话后，我发现了这一点

```
>> a=Event.last
>> a.archived
false
>> a.archived=true
true
>> a.archived
true
>> a.archived?
false 
```

最后两个值不应该都是真的吗？我在这里想念什么？

即使这也无济于事：

```
>> a.save
   (0.1ms)  begin transaction
   (45.2ms)  UPDATE "events" SET "archived" = 't', "updated_at" = '2012-12-10 06:31:57.410990' WHERE "events"."id" = 3
true
   (149.5ms)  commit transaction
>> a.archived?
false 
```

先感谢您

# iphone - 在 EKEventStore 中检索具有特定标题的 EKEvent

> ID：13792929
> 
> 赞同：2
> 
> 时间：2012-12-09T23:20:50.960
> 
> 标签：iphone, ios, ekevent, ekeventstore

您好，我在 iCloud 上的特定日历中保存了一些 EKEvent，我想检索其中一些具有特定标题的 EKEvent，这可能吗？我看到有这种方法：

```
eventsMatchingPredicate 
```

但只有一个谓词：

```
predicateForEventsWithStartDate:endDate:calendars: 
```

我想找到 EKEvent 作为标题，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:41:21.810

我建议您存储事件的 ID，然后使用`EKEventStore`方法获取它`- (EKEvent *)eventWithIdentifier:(NSString *)identifier`

编辑：啊哈，现在我明白你的问题了。不幸的是，您可以与 EKEventStore 一起使用的唯一谓词是`- (NSPredicate *)predicateForEventsWithStartDate:(NSDate *)startDate endDate:(NSDate *)endDate calendars:(NSArray *)calendars`

因此，您必须提供开始日期和结束日期才能获取这些日期之间的事件。获取事件后，您可以使用 NSArray 过滤事件，`- filteredArrayUsingPredicate:`这样您就可以给它一个带有事件标题的谓词。

# javascript - 与 或者 当试图收集他们的孩子标签时？(JavaScript) 我正在尝试制作一个通用的 JavaScript 函数来获取标签中的条目集合。例如： 有清单

*   First Entry
*   Second Entry
*   Third Ent 问问题 问问题 2012-12-09T23:21:15.580 76 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试制作一个通用的 JavaScript 函数来获取标签中的条目集合。例如： 有清单
    *   First Entry
    *   Second Entry
    *   Third Entry带 divFirst EntrySecond EntryThird Entry带桌子 First EntrySecond EntryThird Entry

    这是我所拥有的： function getEntry(a) { var elementCollection = document.getElementsByTagName('*'); for(var i = 0; i < elementCollection.length; i++) { if(elementCollection[i].className.toString() === "collection") { var filteredCollection = elementCollection[i].children; alert(filteredCollection[a].innerHTML); } } } 如果我处理列表或 div，这正是我想要的，但是当我通过表格运行它时，如果 a=0，他会给我所有条目，如果 a!=0，则什么也不给我 表的行为是否不同，或者我做错了什么？ header（）重定向后php会话丢失 这是我第一次尝试创建会话。此外，成功登录后，我使用 header() 函数重定向页面，但随后在重定向页面上我不再有会话。有代码： 创建会话： function userLogin($user){ session_start(); $_SESSION['username'] = $user; header("Location: /~klemeno/vaja10?" . SID); exit; } 当浏览器重定向我时，我尝试像这样回显会话： if(isset($_SESSION['username'])){ echo $_SESSION['username']; } else{ echo "No session :("; } javascripthtmllisthtml-table 4 1 回答 1 This answer is useful 4 是的，您的 HTML 无效，因为它不包含元素，因此浏览器会为您插入它，就像表格单元格一样。 因此，当您table使用 , 并使用.children[0]时，您将获得包含所有元素的新元素，这解释了为什么它会为您提供所有条目。 当然，如果您使用.children[1]或大于0，则没有孩子，因为您只有一个tbody。 于 2012-12-09T23:28:49.370 回答 Related 1 jquery - 价格拖动 Jquery 插件 1 mysql - 比较数字和字符串值的混合列 MySQL 1 objective-c - 在 NSCache 中使用 NSPurgeabledata 有什么意义？ 0 php - 将 PHP 变量传递给 fancybox iframe 1 java - 用于 Java 嵌入式套件的 Websocket 1 javascript - 基于Javascript中的用户输入设置 Date() 对象的正确方法是什么 1 schema - 数据仓库和挖掘中的模式设计 4 bash - Bash 脚本比较 2 个文件的值并打印一个文件的输出值 1 php - fdpf 远程图像不工作 1 asp.net - 单选按钮选择的值不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13792932
> 
> 赞同：1
> 
> 时间：
> 
> 标签：javascript, html, list, html-table

我正在尝试制作一个通用的 JavaScript 函数来获取标签中的条目集合。例如：

有清单

```
<ul class="collection">
    <li>First Entry</li>
    <li>Second Entry</li>
    <li>Third Entry</li>
</ul> 
```

带 div

```
<div class="collection">
    <div >First Entry</div >
    <div >Second Entry</div >
    <div >Third Entry</div >
</div> 
```

带桌子

```
<table class="collection">
    <tr>First Entry</tr>
    <tr>Second Entry</tr>
    <tr>Third Entry</tr>
</table> 
```

这是我所拥有的：

```
function getEntry(a)
{
    var elementCollection = document.getElementsByTagName('*');

    for(var i = 0; i < elementCollection.length; i++)
    {
        if(elementCollection[i].className.toString() === "collection")
        {
            var filteredCollection = elementCollection[i].children;

            alert(filteredCollection[a].innerHTML);
        }
    }
} 
```

如果我处理列表或 div，这正是我想要的，但是当我通过表格运行它时，如果 a=0，他会给我所有条目，如果 a!=0，则什么也不给我

表的行为是否不同，或者我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T23:28:49.370

是的，您的 HTML 无效，因为它不包含`<tbody>`元素，因此浏览器会为您插入它，就像表格单元格一样。

因此，当您`table`使用 , 并使用`.children[0]`时，您将获得`<tbody>`包含所有元素的新元素`<tr>`，这解释了为什么它会为您提供所有条目。

当然，如果您使用`.children[1]`或大于`0`，则没有孩子，因为您只有一个`tbody`。

# php - header（）重定向后php会话丢失

> ID：13792933
> 
> 赞同：3
> 
> 时间：2012-12-09T23:21:23.030
> 
> 标签：php, session

这是我第一次尝试创建会话。此外，成功登录后，我使用 header() 函数重定向页面，但随后在重定向页面上我不再有会话。有代码：

创建会话：

```
function userLogin($user){
    session_start();
    $_SESSION['username'] = $user;
    header("Location: /~klemeno/vaja10?" . SID);
    exit;
} 
```

当浏览器重定向我时，我尝试像这样回显会话：

```
if(isset($_SESSION['username'])){   
    echo $_SESSION['username'];
}
else{
    echo "No session :(";
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-09T23:23:50.660

您需要调用`session_start();`这两个脚本来启动和恢复会话。

见： http: [//php.net/manual/en/function.session-start.php](http://php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:25:03.617

您必须添加 session_start(); 在 PHP 脚本的顶部。

# windows-services - 手动重置 Windows 服务失败计数

> ID：13792936
> 
> 赞同：2
> 
> 时间：2012-12-09T23:21:37.853
> 
> 标签：windows-services, recovery

我将我的 Windows 服务恢复配置如下：

*   项目清单
*   第一次失败：重启服务
*   第二次失败：重启服务
*   后续失败：不采取任何行动
*   重置失败计数后：1 天
*   重启服务后：1分钟

现在我想在第三次失败后重置失败计数，以便管理员手动重新启动服务时，可以自动重新恢复服务。

到目前为止，我找到的唯一解决方案是重置计数器是卸载/重新安装我发现不干净的服务。知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:50:03.963

服务控制管理器计算自系统启动以来每个服务失败的次数。如果服务在 dwResetPeriod 秒内没有失败，则计数将重置为 0。

在 SERVICE_FAILURE_ACTIONS 的 dwResetPeriod 设置为 0 的情况下调用[ChangeServiceConfig2](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms681988%28v=vs.85%29.aspx)将重置计数。

您将需要查询（参见[QueryServiceConfig2](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684935%28v=vs.85%29.aspx)）dwResetPeriod 的原始设置，将其设置为零，然后将其重置回原始设置以保留状态。

# php - PHP Soap 服务器缓存响应的问题

> ID：13792937
> 
> 赞同：5
> 
> 时间：2012-12-09T23:22:04.503
> 
> 标签：php, caching, soap

我已经成功地创建了一个客户端和服务器soap对象......但是我认为在服务器端缓存的东西确实存在问题。我正在禁用客户端和服务器脚本上的所有缓存：

```
ini_set("soap.wsdl_cache", "0");
ini_set("soap.wsdl_cache_ttl", "0");
ini_set("soap.wsdl_cache_enabled", "0"); 
```

但无论我做什么，我似乎都能从服务器得到完全相同的响应。我更改了对象名称，更改了 WSDL 名称，甚至在对象名称上附加了一个时间戳，以确保每次调用都不相同。然后突然，大约 10 或 20 分钟后它会更新，我会得到不同的响应。我检查了 phpinfo() ，它说缓存 ttl 是一整天（全球），所以我认为它肯定比这更短。

关于杀死任何类型的缓存的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T15:58:23.137

I had the same issue, and trying to set:

```
 new SoapClient("some.wsdl", array('cache_wsdl' => WSDL_CACHE_NONE)) 
```

did nothing.

In the end, I located the /tmp folder the server used to cache the wsdl file and just delete it. Fixed!

The /tmp folder was not in my virtual domain /tmp folder, but at the root of the server directory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T23:28:31.150

您可以尝试将选项传递给 SOAP 对象：

```
$client = new SoapClient("some.wsdl", array('cache_wsdl' => WSDL_CACHE_NONE));

$server = new SoapServer("some.wsdl", array('cache_wsdl' => WSDL_CACHE_NONE)); 
```

如果这样做没有帮助，请尝试清除 wsdl 缓存文件。在 linux 上，它通常在 /tmp 文件夹中，并且它的名称以`wsdl-`. 如果清除此文件没有帮助，是否使用了其他缓存？它只是 SoapServer 还是使用了一些额外的库？

# jquery - jquery上的点击事件，需要循环

> ID：13792939
> 
> 赞同：1
> 
> 时间：2012-12-09T23:22:21.723
> 
> 标签：jquery, loops, onclick, jquery-animate

我有一个网站，在该网站上，使用 jQuery，单击某种幻灯片图像会发生变化。我的问题是，当它结束时，会出现更多彩色空间（没有图像），我需要它“循环”；当它达到 15 时，回到 1。

这就是我所拥有的图像：

```
$(document).ready(function() {
    $("body").click(function() {
        $("#con-libros").animate({"left": "-=130px"}, "slow");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:40:12.410

试试这个条件：

```
$(document).ready(function() {
    $("body").click(function() {
        var current = parseInt($("#con-libros").css('left'))*-1;

        if( current < 0 && current > 1949 ) {
           $("#con-libros").animate({"left": "-=130px"}, "slow");
        }else{
           $("#con-libros").animate({"left": "0px"}, "slow");
        }
    });
}); 
```

# sql - oracle - 行上两个不相关的类别 - 如何索引？

> ID：13792940
> 
> 赞同：1
> 
> 时间：2012-12-09T23:22:38.107
> 
> 标签：sql, oracle

我有一个带有三个表的 OLTP 应用程序

```
Item Table - ItemId, CategoryId, AgeGroupId, ... 100K rows. 

CategoryTable - CategoryId, ...  (only 5-10 rows)
AgeGroupTable - AgeGroupId, ...  (only 4-5 rows) 
```

Item 表`CategoryId`的合适索引是什么？`AgeGroupId`最好通过它们或两者来查询`Category`项目`Agegroup`！

我在想位图索引可能由于基数低而起作用，但我不知道它们如何与每个表的多个位图索引一起工作？如果有的话，水平分区有什么帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:53:40.487

这开始是一个评论，但它变得太长了。

> CategoryId 和 AgeGroupId 的合适索引是什么？

在什么情况下？在您的示例架构中，这两个数据域都显示为主键和外键。然而，这无关紧要。

您应该只在它们实际要增加价值的地方添加索引，并且每个表中的行少于 10 行，除非数据*非常*倾斜，否则对任何一个域进行索引都没有任何好处。插入/更新将更慢，通过这样的索引访问数据将比对 3 个表中的每一个执行全表扫描要慢。

项目表中的其他属性之间可能存在隐式关系，因此将域添加到其他索引（但不是在前面）是有意义的，但在不了解更多关于数据和针对它运行的查询的情况下，我会忽略现在这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T03:08:39.467

由于这是一个 OLTP 应用程序，您几乎肯定不想使用位图索引。位图索引往往不适用于 OLTP 应用程序。当您对数据执行大量单行操作时，它们的大小往往会迅速增长（尽管在最近的版本中这种影响有所减轻）。但更重要的是，锁定影响往往会从根本上降低应用程序的可伸缩性。例如，如果您在 上具有位图索引，则`CategoryID`更新单行`CategoryID`将实际上需要锁定表中具有`CategoryID`源值或目标值的每一行。

听起来，您最多需要 ( `AgeGroupID`, `CategoryID`) 和 ( `CategoryID`, `AgeGroupID`) 上的复合索引。潜在地，您可以仅在 ( `AgeGroupID`, `CategoryID`) 上使用复合索引，并让 Oracle 使用索引跳过扫描（如果仅`CategoryID`指定）。这取决于您想要做出的权衡——多个索引将使查询`CategoryID`更有效，但代价是对 DML 操作的额外索引维护和额外的磁盘空间使用。

您是否获得使用分区的许可？这是企业版许可证之上的额外费用选项。我想，您可能可以对表进行分区。不过，只有 100,000 行的表非常小，无法考虑分区。无论您使用什么分区，都会使不使用分区键的查询效率降低。如果您知道指定`AgeGroupID`的查询比`CategoryID`（反之亦然）更常见，但这听起来不像您所描述的那样，这可能是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T02:17:11.370

这实际上取决于您的查询是什么样的。如果您总是一次只过滤或加入一列，那么位图索引将正常工作。如果您将基于两列进行过滤或连接，则复合索引也可以工作。

以我的经验，最好的确定方法是测试这两个选项。我已经成功地将多个位图索引放在一个表上，以及使用复合索引。表中只有 100K 行，您应该能够非常快速地创建和删除索引。然后，您可以使用不同的索引集测试最常见的查询。

# svn - 在 Amazon EC2 上配置 SVN 时出现 404 错误

> ID：13792943
> 
> 赞同：1
> 
> 时间：2012-12-09T23:22:46.250
> 
> 标签：svn, amazon-s3, amazon-web-services, amazon-ec2, apache

我正在尝试在现有 EC2 实例上设置 SVN 服务器。我的想法是让存储库在 S3 上，即我希望 SVN 服务器指向 S3 上的存储库存储桶。这些是我执行的步骤：

1.  向 EC2 安全组添加规​​则以允许从 0.0.0.0/0 端口 80 上的 TCP 访问
2.  SSH 进入 EC2 实例。
3.  安装颠覆

    ```
     yum install subversion 
    ```

4.  安装 Apache 2（我验证了 httpd 包已经安装）
5.  安装 mod_dav_svn

    ```
     yum install mod_dav_svn 
    ```

6.  在 httpd.conf 文件中添加以下行：

    ```
     LoadModule dav_svn_module     modules/mod_dav_svn.so
        ...
        <Location /svn>
            DAV svn
            SVNPath [http://gyanify-svn.s3-website-us-east-1.amazonaws.com/](http://gyanify-svn.s3-website-us-east-1.amazonaws.com/)
        </Location> 
    ```

7.  重启 apache 网络服务器

    ```
     sudo apachectl restart 
    ```

但是，在完成上述操作后，我注意到了几件事：

1.  跑步

    ```
     sudo apachectl status 
    ```

    给出 404 错误

    ```
     HTTP Status 404 -
       --------------------------------------------------------------------------
       type Status report
       message
       description The requested resource is not available.
       --------------------------------------------------------------------------
      Apache Tomcat/7.0.32 
    ```

2.  跑步

    ```
     sudo apachectl restart 
    ```

    给出以下内容：

    ```
     [Sun Dec 09 21:26:02 2012] [warn] module dav_svn_module is already loaded, skipping 
    ```

可能/可能没有帮助的其他详细信息：

*   我已经使用 Elastic Beanstalk 在 EC2 实例上部署了一个 Web 应用程序，它运行良好。
*   我正在使用默认的 Amazon Linux AMI

有人可以建议我在这里缺少什么或我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:41:03.320

这不能以这种方式完成。 `SVNPath`应该指向本地文件路径，而不是 URL。

您可以尝试使用带有[S3backer](http://code.google.com/p/s3backer/)的环回挂载来挂载您的 S3 存储桶。我不确定我会在生产中使用这样的东西。确保你得到你的 repo 的可靠备份。

# java - 字符串的最佳数据结构

> ID：13792946
> 
> 赞同：1
> 
> 时间：2012-12-09T23:23:20.837
> 
> 标签：java, search

我想要一个为圣经制作的应用程序。但我想知道如何存储数据，这样搜索会很快。我想到了二维数组，但这似乎任务繁重且缓慢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:31:24.257

您可以`Map<String, String>`按照 Reimeus 的建议使用 a 。

你也可以试试[trie](http://en.wikipedia.org/wiki/Trie)。这是一种允许预测搜索的数据结构。也就是说，您输入一个单词的一部分，它可以预测您如何完成这个单词。

对于像圣经这样大的东西， [DAWG](http://en.wikipedia.org/wiki/DAWG)可能是一个更好的选择，但它比 trie 复杂一些。

# python - 使用python创建带有来自url的数据的excel表的任何方法

> ID：13792947
> 
> 赞同：1
> 
> 时间：2012-12-09T23:23:19.933
> 
> 标签：python, excel, api

对不起，如果标题令人困惑。基本上我想做的是创建一个excel表，其中包含我拥有的url中的数据。

该 url 是 twitter 的搜索 API，它使用我选择的给定关键字检索过去 100 条推文。我正在尝试创建一个将每条推文存储在自己的行中的 excel 表。本质上它将只有 1 列，但将是 100 行。

我在网上看过，但还没有真正看到一种方法可以完全满足我的需要，所以如果有人知道我应该看的教程或者可以告诉我如何开始，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:27:23.807

可能不会有关于如何做到这一点的教程。你需要把几个不同的概念放在一起

1.  从 url 获取数据。这可以很简单[`urllib.urlopen`](http://docs.python.org/2/library/urllib.html#urllib.urlopen)
2.  将该数据（字符串）转换为可用格式。Twitter 可能会返回 json。 [把它变成一个python dict](http://docs.python.org/2/library/json.html)
3.  [打开](http://docs.python.org/2/tutorial/inputoutput.html)要写入的文件
4.  遍历 twitter 数据并[写入](http://docs.python.org/2/library/csv.html#csv.writer)输出文件

您只需要创建一个 .csv 文件。它将与excel一起工作得很好。对于一个列文件，您只需要编写标题然后写入每一行数据。[`csv`](http://docs.python.org/2/library/csv.html#csv.reader)Python 提供了在标准库的模块中创建格式良好的 csv 文件所需的一切

# r - 按 R 中的行组分析

> ID：13792951
> 
> 赞同：0
> 
> 时间：2012-12-09T23:23:40.660
> 
> 标签：r

> **可能重复：**
> [平均对应于其他列值的特定数据部分的列值](https://stackoverflow.com/questions/11562656/averaging-column-values-for-specific-sections-of-data-corresponding-to-other-col)

我想按组分析数据集。数据设置如下：

```
Group   Result   cens
   A    1.3        1
   A    2.4        0
   A    2.1        0
   B    1.2        1
   B    1.7        0
   B    1.9        0 
```

我有一个计算以下内容的函数

```
sumStats = function(obs, cens) {
detects = obs[cens==0]
nondetects= obs[cens=1]
mean.detects=mean(detects) 
return(mean.detects) } 
```

这当然是一个用于说明目的的简单功能。R中是否有一个函数可以让我使用这个需要输入2个变量来按组分析数据的自制函数。

我查看了 by 函数，但它似乎一次接收 1 列数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T00:03:03.280

导入您的数据：

```
test <- read.table(header=TRUE,textConnection("Group   Result   cens
   A    1.3        1
   A    2.4        0
   A    2.1        0
   B    1.2        1
   B    1.7        0
   B    1.9        0")) 
```

虽然有很多方法可以做到这一点，但`by`具体使用你可以做这样的事情（假设你的数据框被调用`test`）：

```
by(test,test$Group,function(x) mean(x$Result[x$cens==1])) 
```

这将为您提供`Results`每组中所有值的平均值`cens==1`

输出如下所示：

```
test$Group: A
[1] 1.3
----------------------------------------------------------------------
test$Group: B
[1] 1.2 
```

为了帮助您了解这可能如何与您的函数一起工作，请考虑以下几点：如果您只是询问每个组的内容的`by`声明`return`，您将得到：

```
> by(test,test$Group,function(x) return(x))
test$Group: A
  Group Result cens
1     A    1.3    1
2     A    2.4    0
3     A    2.1    0
----------------------------------------------------------------------- 
test$Group: B
  Group Result cens
4     B    1.2    1
5     B    1.7    0
6     B    1.9    0 
```

...实际上是 2 个数据帧，每个组只有行，存储为一个列表：这意味着您可以访问每个组的部分 data.frames，就像在它们被拆分之前一样。上面的`x`函数是指每个组的整个子数据帧。即 - 您可以使用单个变量作为`x`传递给函数的一部分 - 一个基本示例：

```
> by(test,test$Group,function(x) x$Result)
test$Group: A
[1] 1.3 2.4 2.1
-------------------------------------------------------------------
test$Group: B
[1] 1.2 1.7 1.9 
```

现在，终于可以回答您的具体问题了！如果您采用一个示例函数，该函数分别获取两个输入的平均值：

```
sumStats = function(var1, var2) {
   res1 <- mean(var1)
   res2 <- mean(var2)
   output <- c(res1,res2)
   return(output)
} 
```

你可以调用它`by`来获得两者的平均值，`Result`就像`cens`这样：

```
> by(test,test$Group,function(x) sumStats(x$Result,x$cens))
test$Group: A
[1] 1.9333333 0.3333333
---------------------------------------------------------------------- 
test$Group: B
[1] 1.6000000 0.3333333 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T05:35:22.317

聚合函数就是为此而设计的。

```
 aggregate(dfrm$cens, dfrm["group"], FUN-mean) 
```

您可以一次获得几列的平均值，每列都在“组”中

```
aggregate(dfrm[ , c("Result", "cens") ], dfrm["group"], FUN=mean) 
```

# iphone - iPhone的“添加到主屏幕”自定义？

> ID：13792953
> 
> 赞同：0
> 
> 时间：2012-12-09T23:23:46.970
> 
> 标签：iphone, html, ios

是否可以更改“添加到主屏幕”的背景？.. 这通常是用户从 iPhone 应用程序发起的，用于在 iPhone 的主屏幕上创建自定义书签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:32:48.330

弹出这个在你的`<head>`

```
<rel="apple-touch-icon" href="image.png"/> 
```

这将是 I 手机主屏幕上的缩略图。图片应该是正方形的，大小为`57x57`

你也可以使用

```
<rel="apple-touch-icon-precomposed" href="image.png"/> 
```

如果您不希望 iOS 为您的缩略图添加效果。

# javascript - 用原型改变现有的 JavaScript 对象函数？

> ID：13792956
> 
> 赞同：1
> 
> 时间：2012-12-09T23:24:02.193
> 
> 标签：javascript, ruby-on-rails, pagedown

我正在尝试将 PageDown 挂接到我的 Rails 应用程序中，因为 Markdown 编辑器很棒。

但是，我发现这很困难，因为 Rails 通过表单助手自动分配 id，而 PageDown 期望将 id “wmd-input”分配给 textarea 字段。在我的模型中，我有一个名为“body”的文本属性，我想将其用作编辑器，但会`f.text_area :body`生成一个带有 id 的 textarea `post_body`。

因此，我目前的方法是告诉 PageDown 将编辑器与具有特定类名的文本区域相关联，而不是将其与特定 ID 相关联。这是我对如何进行感到困惑的地方。这是[Markdown.Editor.js 的链接](http://code.google.com/p/pagedown/source/browse/Markdown.Editor.js?r=46bb422ffaa27b3a2895ff3ce8c31f8b491fa9a9)。

导航到`function PanelCollection(postfix) {`（第 244 行）。我想将该函数中的第三行更改为：

```
this.input = doc.getElementById("wmd-input" + postfix); 
```

到

```
this.input = doc.getElementsByClassName("wmd-input" + postfix)[0]; 
```

我从来没有做过这样的事情。此外，编辑 Markdown.Editor.js 的源代码并不是一个真正的选择，因为它是自动生成的。我需要在创建函数后更改它。我怎样才能做到这一点？

**编辑＃1：**

所以，这是我第一次在 GitHub 上分叉和贡献任何东西，但我分叉了 pagedown-rails gem 并进行了更改，并通过将我的 Gemfile 中列出的 gem 连接到我的 fork 来确保它工作。工作得很漂亮，谢谢你的建议。[我通过这个拉取请求](https://github.com/rh/pagedown-rails/pull/2)回馈了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T23:27:52.700

这是一个***主要***的 hack，但如果传递的字符串以 开头，您可以通过覆盖`document.getElementById()`委托 to 来完成它：`document.getElementsByClassName()``'wmd-input'`

```
var doc = document;
doc.__getElementByIdOrig = doc.getElementById;
doc.getElementById = function (idStr) {
    if (idStr.match(/^wmd-input/)) {
        var elt = this.getElementsByClassName(idStr)[0];
        return elt ? elt : null;
    }

    return this.__getElementByIdOrig(idStr);
}; 
```

# symfony - 检查多个用户对一个对象的 ACL 权限

> ID：13792959
> 
> 赞同：5
> 
> 时间：2012-12-09T23:24:13.710
> 
> 标签：symfony, acl, symfony-2.1

我正在使用 Symfony Security/ACL 组件来检查一组“随机”用户对给定域对象的权限。

```
$article = ...; // domain object
$users = ...; // array of users

$oid = ObjectIdentity::fromDomainObject($article);
$sids = array();

for ($users as $user) {
    $sids[] = UserSecurityIdentity::fromAccount($user);
}

$aclProvider = ...; // "security.acl.provider" service
$acl = $aclProvider->findAcl($oid, $sids); 
```

但是，我无法检查是否为给定用户授予了给定权限。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-15T12:21:18.670

我认为你应该使用 Acl Voter：

[http://symfony.com/doc/current/cookbook/security/acl.html#checking-access](http://symfony.com/doc/current/cookbook/security/acl.html#checking-access)

# ios - 我应该将单例存储为 ivar 吗？

> ID：13792963
> 
> 赞同：0
> 
> 时间：2012-12-09T23:24:42.883
> 
> 标签：ios, iphone, objective-c, singleton, automatic-ref-counting

我正在为现有的单例类创建一个包装类。由于我将多次访问单例，我想将它作为 ivar 存储在我的包装类中......

```
@interface WrapperClass () 

@property (nonatomic, strong) SingletonClass singletonObj;

@end 
```

...这样我就不必经常写了`[[SingletonClass sharedInstance] methodName]`。相反，我可以写`[singletonObj methodName]`. 我只是觉得它更干净。

我是 iOS 开发的新手，所以我想知道这种方法是否存在根本性的问题。

另外，对于 ARC，我应该使用强引用存储单例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:48:04.273

除非你做一些疯狂的事情，否则额外的保留/释放应该不会引起任何问题。

因此，将其存储在 ivar 中没有真正的问题......

这样做的更好理由不是节省您的打字，而是提高类的可测试性/可重用性。通过使其成为 ivar，它允许您注入不同的类来改变行为。

我会考虑制作一个访问器，默认情况下会给我单例，但如果我这样选择，仍然允许我注入不同的类

```
- (SingletonClass *)singletonObj;
{
  return _singletonObj = _singletonObj ?: [SingletonClass sharedInstance];
} 
```

更新：

还值得思考“为什么要使用这个单例与使用 ivar 不同？”。如果您在整个课堂上都像使用 ivar 一样使用它，那么为什么要以完全不同的方式访问它呢？

例如，当我经常使用 a 时`managedObjectContext`，我的整个应用程序中只有一个。很多人将应用程序委托用作单例并以这种方式访问​​它，但我更喜欢将它作为 ivar 传递。从概念上讲，这`managedObjectContext`只是我像任何其他 ivar 一样使用的另一个对象，所以为什么我必须在心理上改变我访问它的方式？

这是不好的

```
[(MyAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

好的

```
self.managedObjectContext; 
```

现在这给了我两个好处。

1.  如果我的班级到处都是调用，`[(MyAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext];`那么很难将其从这个项目中剥离出来并将其放在另一个项目中，而无需进行冒险的搜索和替换。如果我在“访问器”的一个地方访问单例，那么我只有一个地方可以更改代码。

2.  在我的生产应用程序中，我可能希望我的数据是持久的，所以我会给对象访问一个`managedObjectContext`带有持久存储的对象，而在我的测试中，我不希望在测试之间保持状态，所以我会给对象一个非持久的而是存储。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:31:55.973

这说得通。只需初始化您的单例并将其存储在 ivar 中。也就是说，您的代码实际上是在定义一个属性，这与 ivar 不同。

例如，您可以定义您的单例 i var，如下所示

```
@implementation WrapperClass {
    SingletonClass * _singleton;
} 
```

然后在默认构造函数中初始化单例

```
- (id)init {
    self = [super init];
    if (self) {
        //...
        _singleton = [SingletonClass sharedInstance];
        //...
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:04:27.957

您可以只定义一个宏，如下所示：

`#define _SINGLETON(method) { [[SingletonClass sharedManager] method]; }`

然后你可以像这样在你的代码中使用它：

`_SINGLETON(methodName);`

你可以在 SingletonClass.h 中定义这个宏，然后你就可以在任何地方使用它，在那里你的头文件被导入。这样您就无需考虑 iVar。

# spring - 使用 Infinispan 作为二级缓存提供程序的 Spring JPA 和 Hibernate 4

> ID：13792965
> 
> 赞同：1
> 
> 时间：2012-12-09T23:24:47.033
> 
> 标签：spring, hibernate, caching, jpa, infinispan

我在谷歌上搜索，发现有几个人有同样的问题，但找不到具体的答案。

基本上我们将 Spring 与 JPA 以及 Hibernate 4.1.7 一起使用，并尝试将 Infinispan 设置为 2 级缓存提供程序：

```
<prop key="hibernate.cache.region.factory_class"> 
    org.hibernate.cache.infinispan.InfinispanRegionFactory
</prop> 
```

但是，在启动期间，我收到以下异常：

> 原因：org.infinispan.CacheException：*这是事务缓存，但找不到事务管理器。正确配置事务管理器查找。*

我们不使用 JTA，而是使用 Spring 的 JpaTransactionManager，我猜在运行时，Hibernate 应该知道现有的 jpaTransactionManager 并使用它，但是，Infinispan 不知道它因此爆炸了。任何帮助表示赞赏。

# python - PyQT 4 fnished() 信号不会发出

> ID：13792974
> 
> 赞同：2
> 
> 时间：2012-12-09T23:26:22.410
> 
> 标签：python, qt4, pyqt, pyqt4

```
class Main(QtGui.QMainWindow):
    self.process = QtCore.QProcess(self)
    QtCore.QObject.connect(self.process,QtCore.SIGNAL("finished(int)"),self.processCompleted)

    def processCompleted(self):
        self.ui.statusText.setText("Finished")
    self.process.startDetached(command,arguments) 
```

我无法在这里发出完成的信号。任何人都可以在这里帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T00:07:27.830

`startDetached()`是一个静态方法，所以它不会在对象上调用。因此，也没有任何物体最终会发出`finished`信号。

如此处所述：[关于stackoverflow的类似问题](https://stackoverflow.com/questions/298060/do-i-get-a-finished-slot-if-a-start-qprocess-using-startdetached)

# java - 路径上的文本从 4.1.2 到 4.0.3 不起作用

> ID：13792975
> 
> 赞同：1
> 
> 时间：2012-12-09T23:26:25.193
> 
> 标签：java, android, text, android-canvas

我已经开始开发一款游戏，当游戏结束时，它会显示一个带有游戏统计数据的棋盘。获胜者的名字绘制在棋盘顶部的拱形上（使用 TextOnPath 类，我将在此处粘贴代码）。文本在 Android 4.1.2 中正确显示，但在 Android 4.0.3 或更低版本中发生的情况不同（我已附上图片向您展示）。

我的问题是：我的程序有什么问题？我的 min-SDK 是 8，我没有使用 JB 中引入的任何新 API。请帮我找到解决方案。

这是我的课程（没有显示文本所需的方法）：

```
public class TextOnPath extends View {
    private String winner = "Computer";
    private Path mArc;
    int viewHeight, viewWidth;
    private Paint mPaintText;
    public TextOnPath(Context context) {
        super(context);
    }
    public TextOnPath(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    @Override
    protected void onDraw(Canvas canvas) {
        int offset = 0;
        if (offset < 16)
            offset = (18 - winner.length()) * 11;
        canvas.drawTextOnPath(winner, mArc, offset, 40, mPaintText);

        invalidate();
    }
    @Override
    protected void onSizeChanged(int xNew, int yNew, int xOld, int yOld) {
        super.onSizeChanged(xNew, yNew, xOld, yOld);
        viewWidth = xNew;
        viewHeight = yNew;
        Typeface chalk = Typeface.createFromAsset(getContext().getAssets(),
                "fonts/Chalkduster.ttf");
        // TODO Auto-generated constructor stub
        mArc = new Path();
        int pad = 20;
        RectF oval = new RectF(pad, 0, viewWidth - pad, viewHeight);

        mArc.addArc(oval, -180, 180);
        mPaintText = new Paint(Paint.ANTI_ALIAS_FLAG);
        mPaintText.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaintText.setColor(Color.WHITE);
        int textsize = R.dimen.chalk_text_size;
        System.err.println(textsize);
        mPaintText.setTextSize(30f);
        mPaintText.setTypeface(chalk);

        this.setBackgroundResource(R.color.green);

    } 
```

在这里，我发布了 2 个屏幕截图。第一个来自 JB，第二个来自 ICS。

![截屏](../Images/5b0445f9cd691abf9bbfa8da7380312a.png)

![截屏](../Images/85281dadf96d67414ae350000357f135.png)

非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T02:22:02.843

在 Android 4.1 之前，硬件加速不支持 drawTextOnPath()。要解决此问题，只需在 Android < 4.1 上运行时在 View 上设置软件层类型。只需调用 View.setLayerType(View.LAYER_TYPE_SOFTWARE, null)。这将强制软件渲染并解决您的问题。

# objective-c - ParseKit：我应该在我的语法中使用哪些内置产品？

> ID：13792980
> 
> 赞同：1
> 
> 时间：2012-12-09T23:27:04.513
> 
> 标签：objective-c, parsing, parsekit

我刚开始使用 ParseKit 来探索语言创建，也许还可以构建一个小型玩具 DSL。但是，当前来自 Google 的 SVN 主干`-[PKToken intValue]: unrecognized selector sent to instance ...`在解析此语法时会抛出一个错误：

```
@start = identifier ;
identifier = (Letter | '_') | (letterOrDigit | '_') ;
letterOrDigit = Letter | Digit ; 
```

针对这个输入：

```
foo 
```

显然，我遗漏了一些东西或错误地配置了我的项目。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T23:48:49.717

[ParseKit](http://parsekit.com)的开发者在这里。

首先，请参阅[ParseKit 标记化文档](http://parsekit.com/tokenization.html)。

基本上，ParseKit 可以在以下两种模式之一中工作：我们称它们`Tokens Mode`为`Chars Mode`. （这两种模式没有正式名称，但也许应该有。）

`Tokens Mode`到目前为止更受欢迎。几乎每个使用 ParseKit 的例子都会展示如何使用`Tokens Mode`. [我相信http://parsekit.com](http://parsekit.com)上的所有文档都在使用`Tokens Mode`. ParseKit 的语法功能（您在示例中使用的仅适用于`Tokens Mode`）。

`Chars Mode`是 ParseKit 的一个鲜为人知的功能。我以前从来没有人问过这个问题。

所以模式的区别是：

*   在`Tokens Mode`中，ParseKit Tokenizer 发出**多字符**标记（如单词、符号、数字、引用字符串等），然后由您创建的 ParseKit 解析器（以编程方式或通过语法）进行解析。
*   在`Chars Mode`中，ParseKit 标记器始终发出**单字符**标记，然后由您以编程方式创建的 ParseKit 解析器进行解析。（语法目前不适用于此模式，因为此模式不流行）。

您可以使用`Chars Mode`来实现正则表达式，它在逐个字符的基础上进行解析。

* * *

对于您的示例，您应该忽略`Chars Mode`并仅使用`Tokens Mode`. 以下内置作品仅供`Chars Mode`参考。不要在你的语法中使用它们：

```
(PK)Letter
(PK)Digit
(PK)Char
(PK)SpecificChar 
```

请注意所有这些作品听起来是如何与单个字符匹配的。那是因为他们这样做。

您上面的示例应该如下所示：

```
@start = identifier;
identifier = Word; // by default Words start with a-zA-Z_ and contain -0-9a-zAZ_' 
```

请记住，您的语法中的产品（如 解析器`identifier`）将处理已经从 ParseKit 的 Tokenizer 发出的**令牌。**不是单个字符。

IOW：当您的语法开始解析输入时，输入已经被标记为 Word、Number、Symbol、QuotedString 等类型的标记。

以下是可在您的语法中使用的所有内置作品：

```
Word
Number 
Symbol
QuotedString
Comment
Any
S // Whitespace. only available when @preservesWhitespaceTokens=YES. NO by default. 
```

还：

```
DelimitedString('start', 'end', 'allowedCharset')
/xxx/i // RegEx match 
```

还有复合解析器的运算符：

```
 // Sequence
| // Alternation
? // Optional
+ // Multiple
* // Repetition
~ // Negation
& // Intersection
- // Difference 
```

# c++ - 动态对象的析构函数异常

> ID：13792981
> 
> 赞同：3
> 
> 时间：2012-12-09T23:27:06.987
> 
> 标签：c++, exception, destructor, language-lawyer, dynamic-allocation

我遇到了这个我通常会用“[不要那样做](http://yosefk.com/c++fqa/exceptions.html#fqa-17.3)”来驳回的边缘问题，但我在标准中找不到令人满意的答案，如果有人能指出原因，我将不胜感激：

假设我有一个在析构函数中引发异常的类：

```
struct Foo { ~Foo() { throw std::runtime_error("Catch this!"); } }; 
```

如果我删除该类的动态分配实例，动态分配的内存会发生什么情况？

```
auto p = new Foo;

try { delete p; }
catch (std::exception const &) { } 
```

是否调用了释放函数？为什么？我可以通过添加`operator delete(p);`到`catch`块中使此代码正确吗？

我用 GCC 进行了一个小测试，它似乎*不会*自动释放内存。*（将此与构造函数*中的异常进行对比，在这种情况下，保证会调用释放函数（如果存在）。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:32:58.390

标准说（5.3.5p7）：

> 如果*delete-expression*的操作数的值不是空指针值，则*delete-expression*将调用释放函数。否则，未指定是否将调用释放函数。[注意：无论对象的析构函数还是数组的某些元素是否抛出异常，都会调用释放函数。——尾注]

笔记回答了你的问题。

# javascript - Spotify API 检测播放/停止事件

> ID：13792982
> 
> 赞同：0
> 
> 时间：2012-12-09T23:27:22.867
> 
> 标签：javascript, dom-events, spotify

我正在使用 Spotify App API，我成功地通过该`player.play(URI)`方法播放音乐。但是，当有人从实际的 Spotify 播放器中按下播放按钮时，这并没有解决。我尝试研究`player.observe(models.EVENT.CHANGE)`方法，但每次按下它都会触发两次。[我看到这篇](https://stackoverflow.com/questions/13175807/spotify-api-player-event-change-triggers-twice)文章建议我安装一些第三方应用程序，但我希望有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:12:24.223

`player.observe(models.EVENT.CHANGE)`是正确的方法。这是一个错误，它会触发两次，但现在您可以简单地过滤掉其中一个事件。

# asp.net-mvc - 使用 Silverlight 和 SignalR 进行任务管理

> ID：13792987
> 
> 赞同：0
> 
> 时间：2012-12-09T23:27:39.530
> 
> 标签：asp.net-mvc, silverlight-5.0, signalr

我想用 ASP.NET MVC（服务器端）、Silverlight 5、JavaScript（客户端 - 两个不同的客户端）开发一个简单的任务管理软件

有两种类型的用户：

1.  组长
2.  队员

他们会有自己的任务清单

有多个团队，应将通知和更新发送给相关团队成员。

功能：

1.  团队负责人将创建任务并分配给团队成员。一旦团队负责人将任务分配给成员，他的任务列表应该实时更新。任务应该出现在团队领导和团队成员的任务列表中。

2.  当团队成员开始工作时，他会将任务状态从“待处理”更新为“工作”，然后再“完成”。当受让人更新状态时，应实时更新团队负责人列表中的任务状态。

非常感谢任何帮助、参考应用程序或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:34:38.573

似乎您正处于开发的早期阶段/仍在学习 SignalR，所以我会为您指出一些好的资源来帮助您入门。当然，除了下面列出的所有资源之外，StackOverflow 中还有大量信息可以为您提供创建集线器/与服务器通信等的基础。

信息：

*   [http://signalr.net/](http://signalr.net/)
*   [https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)
*   [https://github.com/SignalR/SignalR/wiki/Talks](https://github.com/SignalR/SignalR/wiki/Talks)
*   推特：@SignalR、@davidfowl、@DamianEdwards、@NTaylorMullen、@StephenHaltR

资源：

*   [https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

达到顶峰的项目：

*   在 JabbR 上登顶：[https ://github.com/davidfowl/JabbR](https://github.com/davidfowl/JabbR)
*   GittR（进行中）：[https ://github.com/DamianEdwards/GittR](https://github.com/DamianEdwards/GittR)

最后，如果您遇到任何问题，请随时访问 JabbR 中的 SignalR 聊天频道：http: [//jabbr.net/#/rooms/signalr](http://jabbr.net/#/rooms/signalr)

这应该足以让你开始，希望这会有所帮助！

# java - LinkedHashSet 修改集

> ID：13792991
> 
> 赞同：1
> 
> 时间：2012-12-09T23:28:04.060
> 
> 标签：java, linkedhashset

我有以下代码：

```
 private static class Node {
    public LinkedHashSet<String> s = new LinkedHashSet<String>();
    public Node(String s) {
        this.s.add(s);
    }
}

public static void main(String[] args) {
    LinkedHashSet<Node> set1 = new LinkedHashSet<Node>();
    set1.add(new Node("foo"));

    LinkedHashSet<Node> set2 = new LinkedHashSet<Node>(set1);

    LinkedHashSet<String> modifyingSet = new LinkedHashSet<String>();
    modifyingSet.add("modifying foo");

    for(Node n : set2) {
        n.s = new LinkedHashSet<String>(modifyingSet);
        break;
    }

    if (compare(set1, set2)) {
        System.out.println("Equal");
    } else {
        System.out.println("Not Equal");
    }

    return;
 }
private static boolean compare(LinkedHashSet<Node> h1, LinkedHashSet<Node> h2) {
      Iterator<Node> h1i = h1.iterator();
      Iterator<Node> h2i = h2.iterator();
      while (h1i.hasNext()) {
            Node n1 = h1i.next();
            Node n2 = h2i.next();
            if (n1.s.size() != n2.s.size()) {
                return false;
            } else {
                Iterator<String> it1 = n1.s.iterator();
                Iterator<String> it2 = n2.s.iterator();
                while (it1.hasNext()) {
                    String t1 = it1.next();
                    String t2 = it2.next();
                    if(!t1.equals(t2)) {
                        return false;
                    }   
                }           
            }
      }
      return true;
} 
```

当我修改 set2 时，set1 也被字符串“test”和“bogus”修改。所以当我比较两组时，它们总是相等的（`compare()`比较每组中的字符串是否相等）

**我的问题是：**

据我了解，Java是按值传递的，但似乎是按引用传递的。谁能帮我弄清楚为什么？我怎样才能将集合复制到临时集合，然后修改集合但不修改第一个集合？

我觉得我在这里错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T23:34:16.473

这里有很多问题和误解，所以这里有一个清单。

a）您*不能*修改 a 的元素`Set`并期望它仍然有效。[Javadoc`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)更具体：

> 注意：如果将可变对象用作集合元素，则必须非常小心。如果对象的值以影响等于比较的方式更改，而对象是集合中的一个元素，则不指定集合的​​行为。此禁令的一个特殊情况是不允许集合包含自身作为元素。

总是假设“未指定的行为”翻译为“它在你的脸上爆炸”或“它只会在周二阿尔伯克基下雨时起作用，所以它可能有一半时间起作用，另一半可能会爆炸。”

b）您必须覆盖`hashCode()`并`equals(Object)`使用 a`HashSet`或中的对象`LinkedHashSet`，如果您不希望它们与 比较`==`，看起来您可能不应该在此应用程序中。

c) Java*按值传递引用*，这不同于按值传递*和*按引用传递。特别是，修改一个对象将影响对同一对象的所有引用，但将引用更改为引用不同的对象将不会影响其他引用。

```
Set<Foo> set1 = new LinkedHashSet<Foo>();
Set<Foo> set2 = set1;
Set<Foo> set3 = set1;
set1.add(new Foo());
// set1, set2, and set3 each refer to the same Set, which now contains one Foo
set3 = new LinkedHashSet<Foo>();
// set1 and set2 still refer to the Set with one Foo;
// set3 now refers to a new empty Set 
```

d) 要复制 a `LinkedHashSet`，只需执行`new LinkedHashSet<Foo>(setToCopy)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T23:31:03.003

首先，我推荐你使用`HashSet`. 其次，这些结构是不可变的。您必须调用特定方法来修改集合中的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T23:31:51.180

我认为该`compare`方法是错误的。你能发布它的实现吗？

`for`循环不会`set2`修改. 所以，在有一些元素的`set2`同时应该保持空白。`set1`所以，我希望该`compare`方法总是返回`false`. 但是，我怀疑您是否想`set2`保持空白，但是，这是另一个问题。

**更新**：

该`compare`方法抛出`java.util.NoSuchElementException`（参见[http://ideone.com/nv1wmN](http://ideone.com/nv1wmN)）。有几个误解会导致这些错误。第一步是在被调用`set2`时意识到它是空的。`compare`

# python - Dotcloud 上的 Python 在某些函数上崩溃

> ID：13792994
> 
> 赞同：3
> 
> 时间：2012-12-09T23:28:12.767
> 
> 标签：python, uuid, dotcloud

所以我在dotcloud上运行一个烧瓶python应用程序，我基本上是在尝试散列密码（使用hashlib.sha512；盐是uuid.uuid4（）.bytes）。

```
user_dict['salt'] = uuid.uuid4().bytes
print_stderr(user_dict['salt'])
print_stderr(hashlib.sha512(user_dict['pwd'] + user_dict['salt']))
user_dict['pwd'] = hashlib.sha512(user_dict['pwd'] + user_dict['salt']).digest()
print_stderr(user_dict['pwd']) 
```

即使在 dotcloud 上的 python 解释器中，这一切都可以正常工作，但是当我实际在服务器上运行代码时，它会崩溃（或其他原因，客户端获取 HTTP 500 代码，但 dotcloud 日志刚刚关闭）。

我可以通过哪些`print`语句执行而哪些语句不执行来判断它就`uuid.uuid4().bytes`行了崩溃。但是如果我用一个常数（例如“uehg83yydh”）替换它，它不会立即失败，而是`hashlib.sha512(...).digest()`在线。

您可能还会注意到这`print_stderr`不是标准的 Python 函数。这是我用来让 dotcloud 从 python 打印东西的 hack（它打印到 stderr 而不是 stdout）。当然有一种更好的方法可以在我不知道的 dotcloud 上进行调试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:08:04.633

试试这个为你的代码。

1.  将 uuid 切换为十六进制而不是字节
2.  更改为使用 update() 而不是将字符串添加在一起，它更干净一些。

代码：

```
>>> user_dict['salt'] = uuid.uuid4().hex
>>> print_stderr(user_dict['salt'])
>>> import hashlib
>>> m = hashlib.sha512()
>>> m.update(user_dict['pwd'])
>>> m.update(user_dict['salt'])
>>> user_dict['pwd'] = m.hexdigest()
>>> print_stderr(user_dict['pwd']) 
```

# spring - 无法配置内 标签

> ID：13792995
> 
> 赞同：3
> 
> 时间：2012-12-09T23:28:24.387
> 
> 标签：spring, jsp, foreach, jstl, jsp-tags

我在我的 JSP 中使用 Spring 表单标记库。我的命令对象包含一个列表，我想为我的 JSP 中列表的每个对象进行绑定。但是 STS 给了我一个例外，告诉我：

> Bean 属性 'testList[0]' 不可读或具有无效的 getter 方法：getter 的返回类型是否与 setter 的参数类型匹配？]

这是完整的异常代码：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/mvc] threw exception [org.springframework.beans.NotReadablePropertyException: Invalid property 'testList[0]' of bean class [java.util.ArrayList]: Bean property 'testList[0]' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?] with root cause
org.springframework.beans.NotReadablePropertyException: Invalid property 'testList[0]' of bean class [java.util.ArrayList]: Bean property 'testList[0]' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:729)
    at org.springframework.beans.BeanWrapperImpl.getNestedBeanWrapper(BeanWrapperImpl.java:576)
    at org.springframework.beans.BeanWrapperImpl.getBeanWrapperForPropertyPath(BeanWrapperImpl.java:553)
    at org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:719)
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:147)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getBindStatus(AbstractDataBoundFormElementTag.java:178)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getPropertyPath(AbstractDataBoundFormElementTag.java:198)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.getName(AbstractDataBoundFormElementTag.java:164)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.autogenerateId(AbstractDataBoundFormElementTag.java:151)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.resolveId(AbstractDataBoundFormElementTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractDataBoundFormElementTag.writeDefaultAttributes(AbstractDataBoundFormElementTag.java:126)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementTag.writeDefaultAttributes(AbstractHtmlElementTag.java:421)
    at org.springframework.web.servlet.tags.form.InputTag.writeTagContent(InputTag.java:142)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.views.test_jsp._jspx_meth_form_005finput_005f0(test_jsp.java:217)
    at org.apache.jsp.WEB_002dINF.views.test_jsp._jspx_meth_c_005fforEach_005f0(test_jsp.java:167)
    at org.apache.jsp.WEB_002dINF.views.test_jsp._jspx_meth_form_005fform_005f0(test_jsp.java:122)
    at org.apache.jsp.WEB_002dINF.views.test_jsp._jspService(test_jsp.java:82)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:749)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:487)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:412)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:339)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1180)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

这是我的 .jsp 页面：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello!
</h1>
<form:form action="saveStudent" method="POST" modelAttribute = "testList">

    <c:forEach items="${testList}" var="test" varStatus="pStatus">
    Test Question: <form:input path = "testList[${pStatus.index}].testQuestion" value = "${test.testQuestion}"/>
    Option one: <form:input path = "testList[${pStatus.index}].optionOne" value= "${test.optionOne}"/>
    Option two: <form:input path = "testList[${pStatus.index}].optionTwo" value= "${test.optionTwo}"/>
    Option three: <form:input path = "testList[${pStatus.index}].optionThree" value= "${test.optionThree}"/>
    </c:forEach>

<input type="submit" value="Submit" />
</form:form>
</body>
</html> 
```

这是我的方法代码：

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String redactTest(Model model, HttpServletRequest request) {

    List<Test> testList = db.getTests();
    model.addAttribute("testList", testList);

    return "test";
} 
```

我做错了什么？有什么建议么？谢谢！

好的，我有一个解决方案：首先我添加了 TestWrapper 类，其中包含带有 get 和 set 的 List：

```
public class TestWrapper {

    private List<Test> testList = null;

    public TestWrapper(List<Test> testList) {

        this.testList = testList;
    }

    public void setTestList(List<Test> testList) {

        this.testList = testList;
    }

    public List<Test> getTestList() {

        return testList;
    }

} 
```

然后我改变了我的方法代码：

```
@RequestMapping(value = "/test", method = RequestMethod.GET)
public String redactTest(Model model, HttpServletRequest request) {

    List<Test> testList = db.getTests();
    TestWrapper testWrapper = new TestWrapper(testList);

    model.addAttribute("testWrapper", testWrapper);

    return "test";
} 
```

在我改变了我的.jsp之后：

```
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello!
</h1>
<form:form action="saveStudent" method="POST" modelAttribute = "testWrapper">

    <c:forEach items="${testWrapper.testList}" var="test" varStatus="i">
        Test Question: <form:input path = "testList[${i.index}].testQuestion" value = "${test.testQuestion}"/>
        Option one: <form:input path = "testList[${i.index}].optionOne" value= "${test.optionOne}"/>
        Option two: <form:input path = "testList[${i.index}].optionTwo" value= "${test.optionTwo}"/>
        Option three: <form:input path = "testList[${i.index}].optionThree" value= "${test.optionThree}"/>
    </c:forEach>

<input type="submit" value="Submit" />
</form:form>
</body>
</html> 
```

现在它起作用了！希望它会帮助某人:)

# javascript - 如何设置while循环计数器从1开始，而不是0

> ID：13792996
> 
> 赞同：-3
> 
> 时间：2012-12-09T23:28:30.737
> 
> 标签：javascript, javascript-events

这是我的代码：

```
function listDesserts (){
    var dessertList = ["pudding", "cake", "toffee", "ice cream", "fudge", "nutella"];

    var i = 0;
    while (i< dessertList.length){
        var ul = document.getElementById("thelist");
        var nli = document.createElement("li");
        var nliID = 'item-' +i;
        nli.setAttribute('id', nliID);
        nli.setAttribute('class', 'listitem');
        nli.innerHTML = dessertList[i];
        ul.appendChild(nli);
        i++;
    }
} 
```

由于我根据数组中的项目数设置 li 标签 ID，因此我将其设置为零。相反，我想修改 i 以便它设置以 1 开头的 ID，而不会跳过第一个数组成员。我已经尝试了一些东西，但我错过了这个。有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T23:36:48.320

在迭代数组时，计数器变量应始终从`0`to运行`length-1`。其他解决方案是可能的，但违反直觉。

如果您在该数组中有一些从 1 开始的编号，只需`i+1`在需要的地方使用即可；在你的情况下`'item-'+(i+1)`。

顺便说一句，您可能只使用[`for`-loop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)而不是`while`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:30:51.190

使用 `var i = 1`；

并`i-1`在您当前拥有的地方使用`i`

```
var i = 1;
while (i< dessertList.length-1){
    var ul = document.getElementById("thelist");
    var nli = document.createElement("li");
    var nliID = 'item-' + (i-1);    //<----- here
    nli.setAttribute('id', nliID);
    nli.setAttribute('class', 'listitem');
    nli.innerHTML = dessertList[i-1];    //<----- and here
    ul.appendChild(nli);
    i++;
} 
```