# StackOverflow 问答 13015000-13015999

# wcf - WCF 中的单实例 VS PerCall

> ID：13015000
> 
> 赞同：1
> 
> 时间：2012-10-22T15:47:09.533
> 
> 标签：wcf, performance, concurrency, instance

有很多帖子说这`SingleInstance`是一个糟糕的设计。但我认为在我的情况下这是最好的选择。
在我的服务中，我必须返回当前登录用户的列表（带有附加数据）。此列表对于所有客户端都是相同的。我想每 5 秒（例如）从数据库中检索此列表，并在需要时将其副本返回给客户端。
如果我使用`PerCall`实例化模式，我将每次从数据库中检索此列表。该列表应该包含约 200-500 条记录，但将来可以增长到 10 000 条。每条记录都很复杂，包含大约 10 个字段。

那么性能呢？使用“糟糕的设计”并获取一次列表更好还是使用“好的方法”并在每次调用时从数据库中获取列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:00:36.513

> 那么性能呢？使用“糟糕的设计”并获取一次列表更好还是使用“好的方法”并在每次调用时从数据库中获取列表？

**性能和良好的设计并不是相互排斥的**。使用单个实例的问题是它一次只能服务一个请求。所以所有其他请求都在等待它完成它的事情。

**或者，您可以只利用[缓存层](http://msdn.microsoft.com/en-us/library/system.runtime.caching.aspx)**来保存查询结果，而不是将其耦合到您的服务。

那么你的代码*可能*看起来像这样：

```
public IEnumerable<BigDataRecord> GetBigExpensiveQuery(){

   //Double checked locking pattern is necessary to prevent
   // filling the cache multiple times in a multi-threaded
   // environment
   if(Cache["BigQuery"] == null){
      lock(_bigQueryLock){
         if(Cache["BigQuery"] == null){
            var data = DoBigQuery();
            Cache.AddCacheItem(data, TimeSpan.FromSeconds(5));
         }
      }
   }

   return Cache["BigQuery"];

} 
```

现在，您可以拥有任意数量的实例来访问同一个缓存。

# git - 如何在 Gitolite 配置中为存储库添加描述

> ID：13015001
> 
> 赞同：4
> 
> 时间：2012-10-22T15:47:11.920
> 
> 标签：git, repository, gitolite

我正在使用 gitolite 为我的 GIT 服务器进行用户维护。除了回购描述，一切都很好。我已经在 gitolite.conf 中设置了类似“reponame = repo description”的 repo 的描述。早期版本（v3.x 之前）它的工作。现在它不工作了。为了您的信息，我正在使用

*   gitolite v3.1
*   git v1.7.1
*   Perl v5.10.1

这是我的 gitolite.conf 文件[http://pastebin.com/DYCK3uRL](http://pastebin.com/DYCK3uRL)或[http://arulraj.net/gitolite.conf](http://arulraj.net/gitolite.conf)。收到邮件后的邮件主题和签名没有描述，因为该 repo 描述文件不是使用 gitolite 自动生成的。我怎样才能解决这个问题..？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T09:36:04.487

我很高兴地说它现在已经修复了。我在 gitolite post_compile 部分添加了这个[https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/update-description-file脚本。](https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/update-description-file)

1.打开HOME目录下的**.gitolite.rc**文件，编辑post_compile部分。

```
 POST_COMPILE                =>
    [
        'post-compile/ssh-authkeys',
        'post-compile/update-git-configs',
        'post-compile/update-gitweb-access-list',
        'post-compile/update-git-daemon-access-list',
        'post-compile/update-description-file',
    ], 
```

2.然后在gitolite.conf中添加repo的描述。请参考以下

```
repo    testing
RW+     =   @all
desc = "GIT testing" 
```

3.然后提交并推送您的更改。

现在描述是自动创建的。我的新 conf 文件在这里[http://pastebin.com/c8Ggfbdi](http://pastebin.com/c8Ggfbdi)或[http://arulraj.net/gitolite.conf.new](http://arulraj.net/gitolite.conf.new)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-03T13:46:13.377

从 gitolite 3.5 开始，您不必放置这些`POST_COMPILE`东西。就像启用`"cgit"`选项一样`ENABLE => [ 'cgit' ]`。然后您运行 gitolite 设置，然后将使用选项`.git/description`中的值创建文件。`gitweb.description`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T09:55:44.660

从[添加描述到您创建的存储库](http://gitolite.com/gitolite/user.html#desc)

```
ssh git@host desc -h 
```

[注意`WRITER_CAN_UPDATE_DESC`设置](https://stackoverflow.com/a/25662289/305189)以避免“致命：您未获得授权”错误。

# delphi - 如何在 Delphi 2010 中实现用户可定义的交互式地图？

> ID：13015002
> 
> 赞同：5
> 
> 时间：2012-10-22T15:47:15.710
> 
> 标签：delphi, svg, delphi-2010, vcl

我想在我的应用程序中有一个交互式*平面图*（所以它们不是很大）。每个用户的地图都会有所不同，但包含相似的元素，只是数量和位置不同。该应用程序将显示地图，识别某些元素并将它们链接到数据库中的信息。

要设计和存储地图，我宁愿不使用自己的编辑器和/或想出一些自定义文件格式。但是，如果格式是开放且易于阅读的，那就太好了。SVG 似乎是这项工作的完美人选。所需要的只是如何命名元素以使其可识别的约定。但是如何从那里去呢？我需要一些可以渲染 SVG 并区分不同层的东西。

[TSVG 可以做到这一点](http://domusondelphi.blogspot.com/2012/02/tsvg-or-how-firemonkey-just-became.html "TSVG。 或者 FireMonkey 如何变得强大三倍。 |  德尔福")，但取决于我宁愿避免的 FireMonkey - 它甚至不存在于 Delphi 2010 中，所以我必须使用另一个版本并使用 DLL 技巧。

另一种选择是使用[Chromium Embedded Framework](http://code.google.com/p/delphichromiumembedded/ "delphichromiumembedded - Delphi Chromium Embedded - Google 项目托管")并使用 HTML、CSS 和 JavaScript 创建地图。这感觉非常笨重，并且很难正确处理。

有没有我忽略的更简单的方法来做到这一点，或者使用 SVG 或者完全不同的方法？

我不确定 GIS 系统是否适用于此。这很可能是矫枉过正。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:53:50.387

最后我决定选择使用 Chromium Embedded 的 D3.js，以获得一个灵活且更便携的解决方案。

# javascript - 用于 url 验证的正则表达式在测试器中有效，但在 javascript 函数中无效

> ID：13015005
> 
> 赞同：0
> 
> 时间：2012-10-22T15:47:20.753
> 
> 标签：javascript, regex

所以我有一个我正在做的 URL 验证，它非常轻松，或多或少只是引导用户确保他们输入接近 URL。

所以我有一个正则表达式可以在测试人员中做我想做的事情。（仅选择多行）例如：[http ://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)

但是，当我在代码中调用它时，它会给出不同的结果。

```
isURLValid: function (value) {
    var urlRegex = new RegExp("^((http|https|ftp)\://)*([a-zA-Z0-9\.\-]+(\:[a-zA-Z0-9\.&amp;%\$\-]+)*@)*((25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9])\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[1-9]|0)\.(25[0-5]|2[0-4][0-9]|[0-1]{1}[0-9]{2}|[1-9]{1}[0-9]{1}|[0-9])|([a-zA-Z0-9\-]+\.)*[a-zA-Z0-9\-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(\:[0-9]+)*(/($|[a-zA-Z0-9\.\,\?\'\\\+&amp;%\$#\=~_\-]+))*$");
    return urlRegex.test(value);
} 
```

要求：必须支持 http、https、非 http、非 https、www 和非 www URL 方案

有效的

```
http://www.adamthings.com
https://www.adamthings.com
www.adamthings.com
adamthings.com

```

无效的

```
http://www.adamthings
https://www.adamthings
www.adamthings
亚当斯

```

结果在测试仪中工作，在代码中我得到以上所有内容都是有效的。为什么正则表达式的反应不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:04:38.193

在javascript中：（`"\.com" === ".com"`我认为这不是你想要的。）
尝试`/regex/`而不是`new RegExp("regex")`创建一个正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:26:51.740

If you want to allow something like

```
adamthings.com 
```

which has no leading `http://`, `https://`, `ftp://` or `www.` part, then you would need to list all allowed TLDs, such as `com`, `net`, etc., to prevent input such as

```
john.doe 
```

to be valid as well.

Then your regex pattern should look like

```
^(?:https?:\/\/|ftp:\/\/)?(?:www\.)?(?!www\.)(?:(?!-)[a-z\d-]*[a-z\d]\.)+(?:com|net) 
```

which checks just domain part of the link.

If you want to go further and check trailing part or link, then you need to add

```
(?:\/[^\/\s]*)*$ 
```

to the first part of pattern, however this (part of regex pattern) does not validate the url.

» [Test link](http://regexpal.com/?flags=gim&regex=%5E%28%3F%3Ahttps%3F%3A%5C%2F%5C%2F%7Cftp%3A%5C%2F%5C%2F%29%3F%28%3F%3Awww%5C.%29%3F%28%3F!www%5C.%29%28%3F%3A%28%3F!-%29%5Ba-z%5Cd-%5D%2a%5Ba-z%5Cd%5D%5C.%29%2B%28%3F%3Acom%7Cnet%7Corg%29&input=http%3A%2F%2Fwww.adamthings.com%0Ahttps%3A%2F%2Fwww.adamthings.com%0Awww.adamthings.com%0Aadamthings.com%0Ahttp%3A%2F%2Fwww.adamthings%20%0Ahttps%3A%2F%2Fwww.adamthings%0Awww.adamthings%0Aadamthings) «

# trigger.io - Trigger.io 目录管理

> ID：13015013
> 
> 赞同：1
> 
> 时间：2012-10-22T15:48:34.793
> 
> 标签：trigger.io

刚开始使用 Trigger.io 工作流程。想知道是否有人可以启发我处理不同目录中的不同项目。我无意中通过终端通过本地 Trigger Toolkit 创建了另一个测试应用程序，并且注意到（经过一些搜索）它在我的 ~/Library/Trigger Toolkit/ 目录深处创建了一个新的应用程序项目。我创建的原始应用程序（通过 Web 界面）被放在 /Users/[Name]/[Name of App] 中。

当我伪造运行/构建时，它在 Trigger \Toolkit 目录中运行本地版本，而不是我的用户目录中的版本。如何在我的本地构建中注册这个？并销毁使用本地构建创建的测试。

如果你知道我到底想表达什么，那么你应该得到一个堆栈溢出王冠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:01:01.900

不确定您是如何设法让应用程序出现在`~/Library/Trigger Toolkit`. 此概述可能会有所帮助：

Forge 应用程序的文件夹结构类似于：

```
my-app/
  local_config.json
  src/
    config.json
    identity.json
    index.html 
```

命令行程序尝试将`forge`当前工作目录视为一个应用程序（即它希望您在上述文件夹中运行它`my-app`）。

例外是`forge create`设置此结构。例如，如果你跑`forge create`进去，`/Users/tim/my-app`那么它会设置类似上面的东西。

Trigger Toolkit 有两个操作来处​​理这些类型的文件夹 - 创建和导入。create 操作设置了一个类似上面的应用程序结构，import 操作允许将`my-app`上面的文件夹导入到 Toolkit 中可用的应用程序列表中。

您可以使用列表中应用旁边的“忘记”按钮从列表中删除应用。如果你想“销毁”一个应用程序，它总是归结为删除一个文件夹，在这种情况下，我会删除该`my-app`文件夹。

该文件夹`~/Library/Trigger Toolkit`包含 Trigger Toolkit 本身的代码，以及一个跟踪 Toolkit 中列出的应用程序的文件。我可以看到您会在此文件夹中显示应用程序的唯一方法是手动`cd`访问它并使用`forge create`.

总而言之，每个应用程序都被隔离到一个文件夹中。使用命令行工具时，您只需要使用例如`forge build android`并`forge run android`在该应用程序的特定文件夹中。如果使用工具包，您需要导入文件夹或通过工具包创建它，单击应用程序列表中的该应用程序会将您置于其上下文中，从那里运行/打包操作将使用为该应用程序注册的文件夹运行。

# r - 删除某些列中包含 NA 的行 R

> ID：13015014
> 
> 赞同：12
> 
> 时间：2012-10-22T15:48:37.417
> 
> 标签：r, dataframe

我有一个包含许多列的 data.frame。我想在其中 4 列中保留没有 NA 的行。复杂性源于我有其他允许在其中包含 NA 的行，因此我不能使用 complete.cases 或 is.na。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T15:52:17.940

您仍然可以使用`complete.cases()`. 只需将其应用于所需的列（下例中的列 1:4），然后使用它返回的布尔向量从整个 data.frame 中选择有效行。

```
set.seed(4)
x <- as.data.frame(replicate(6, sample(c(1:10,NA))))
x[complete.cases(x[1:4]),]
#    V1 V2 V3 V4 V5 V6
# 1   7  4  6  8 10  5
# 2   1  2  5  5  1  2
# 5   6  8  4 10  6  6
# 6   2  6  9  3  4  4
# 7   4  3  3  1  2  1
# 9   8  5  2  7  7  3
# 10 10 10  1  2  5 NA 
```

# .net - 增加 .net exe 的堆栈大小

> ID：13015015
> 
> 赞同：2
> 
> 时间：2012-10-22T15:48:37.993
> 
> 标签：.net, vb.net, c#-4.0, stack-overflow

我得到一个堆栈溢出异常，它仅适用于这种特定情况。我可以看到`EDITBIN.EXE /STACK:<s..`但我可以在没有 Visual Studio 的 PC 上以任何方式执行此操作。我正在尝试为我的用户提供一种解决方法 - 以便他可以使用该应用程序，直到我在代码中修复它..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T16:04:03.987

您可能会找到答案：（[http://www.justanswer.com/computer/38rvx-increase-stack-size-win7.html](http://www.justanswer.com/computer/38rvx-increase-stack-size-win7.html)）。但是，似乎特定于“no_more irp stack locations”......

> 专家解答
> 
> 单击开始，键入 regedit，然后按键盘上的 enter。找到并单击以下注册表子项： HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Mup\Parameters 在右窗格中，右键单击 DfsIrpStackSize，然后单击修改。
> 
> 注意如果 DfsIrpStackSize 注册表项不存在，您必须创建它。为此，请按照下列步骤操作： 在编辑菜单上，指向新建，然后单击 DWORD 值。键入 DfsIrpStackSize，然后按 Enter。在“基数”框中，单击“十进制”，在“数值数据”框中键入 10，然后单击“确定”。退出注册表编辑器。重新启动计算机。
> 
> 您可以收藏或收藏此页面，然后使用该书签回复我。花费你需要的所有时间来测试它。

# ios - pushwoosh 错误无法识别的选择器发送到实例 Cordova 1.7.0

> ID：13015016
> 
> 赞同：3
> 
> 时间：2012-10-22T15:48:42.747
> 
> 标签：ios, xcode, cordova, apple-push-notifications, server-push

我正在尝试 pushwoosh 并尝试在远程 api 上取消注册 iOS 设备，但出现了此错误：

```
-[__NSDictionaryI cdvjk_JSONString]: unrecognized selector sent to instance
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-    [__NSDictionaryI cdvjk_JSONString]: unrecognized selector sent to instance
*** First throw call stack:
libc++abi.dylib: terminate called throwing an exception
 Sending request: {"request":{"hwid":"my_hwid", "application":"my_app_id"}}
To urL https://cp.pushwoosh.com/json/1.3/pushStat
(lldb) 
```

然后我意识到 unregister 方法仅适用于 androids 而不是 iOS 设备，因此插件文件夹中的 pushwoosh 插件没有使用请求。

我从我的 index.js 和 pushnotifications.js 文件中删除了代码，但每次我在接受推送通知后尝试启动应用程序时仍然出现错误。

然后我从远程 api 中删除了这段代码：

```
 new JObject(
             new JProperty("custom", "json data"))),
             new JProperty("link", "http://pushwoosh.com/") 
```

希望看似自定义的数据不会被发送到 pushwoosh。

仍然出现错误。我知道问题是每次都会发出未经处理的请求，但问题是代码不存在。

我是否可能编辑了一些方法签名，并且每次尝试接受推送通知时都会使用这些签名？

还是 Xcode 执行自动完成？

我需要熟悉 pushwoosh（和 Xcode）的人来帮助我。无需升级到 Cordova 2.1.0 或更高版本的解决方法是什么（此错误来自插件本身，Phonegap 人员通过添加前缀“cdvjk_”改变了调用“JSONString”objective-c 函数的方式破坏了兼容性任何 < 2.1 Phonegap 版本的插件。）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:01:35.037

请阅读此线程。不幸的是，这有点怪 PhoneGap 的人，他们无法同时支持 Cordova 2.1 和更早的版本：

[https://github.com/shaders/phonegap-cordova-push-notifications/issues/12](https://github.com/shaders/phonegap-cordova-push-notifications/issues/12)

您可以联系 Pushwoosh 团队，询问他们是否仍然可以帮助您使用旧版本。

# android - 适用于 android 的 Phonegap 插件无法正常工作。为什么？

> ID：13015017
> 
> 赞同：1
> 
> 时间：2012-10-22T15:48:49.963
> 
> 标签：android, cordova, plugins, undefined

我无法使 Android phonegap 插件工作。甚至没有一个我发现的例子，也没有我试图自己创建一个的可悲失败。我第一次尝试使用这样的[教程](http://phpmyweb.net/2011/09/14/creating-a-plugin-for-phonegap-1-0-android/)。他们不适合我。我总是以`Cannot call method of undefined`错误告终。

所以我尝试了一些准备好的东西。从 github得到[这个项目。](https://github.com/isawred2/phonegap-android-plugin-tutorial)这只是一个显示敬酒的简单插件。我检查了我在教程中学到的所有内容：

```
//the package name in the java
package com.phonegap.toast;

//my class extends Plugin and has a simple show toast method.

public class Tutorial extends Plugin {
@Override
public PluginResult execute(String cmd, JSONArray args, String callback) {
    if(cmd.equals("toast"))
    {
        return showToast(args);
    }
    return null;
}

private PluginResult showToast(JSONArray args) {
    final String message;
    try {
        message = args.getString(0);
        ctx.runOnUiThread(new Runnable()
        {
            public void run() {
                Toast myToast = Toast.makeText(ctx, message, Toast.LENGTH_SHORT);
                myToast.show();
            }
        });

        return new PluginResult(PluginResult.Status.OK);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION);
    }       
}   

} 
```

该插件在 res/xml/plugins.xml 中定义

`plugin name="Tutorial" value="com.phonegap.toast.Tutorial"`

不，如果我把它放在 rex/xml/config.xml 它也不起作用

最后，调用插件的方法：

```
function createToast() {
  // i also tried window.Tutorial.showToast('Hello AndroidOpen'); with no success
  window.plugins.Tutorial.showToast('Hello AndroidOpen');
} 
```

在这里我再次遇到同样的错误。

`10-22 15:39:07.770: E/Web Console(2885): Uncaught TypeError: Cannot call method 'showToast' of undefined at file:///android_asset/www/main.js:123`

任何开明的灵魂都可以向我解释我做错了什么？几天来我一直在尝试这个，有很多不同的插件，包括我自己的，甚至是[这个](https://github.com/phonegap/phonegap-plugins/tree/master/Android)，我不知道它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:13:57.847

好的，这里有几件事可能会让你绊倒。首先，如果 config.xml 文件存在于 res/xml 中，那么它将优先于 plugins.xml。因此，您需要将插件行添加到 config.xml 中。

确保包含 Toast 插件的 .js 文件。

第三，window.plugins 已被弃用，因此如果您使用的是 PhoneGap 2.0.0 或更高版本，您可能需要修改 .js。查看我[关于该主题的博客文章](http://simonmacdonald.blogspot.ca/2012/08/so-you-wanna-write-phonegap-200-android.html)。根本变化是您现在需要在 JS 中添加新的 PluginName，因为默认情况下它不再放在 window.plugins 中。

# javascript - 从浏览器存储跨域读取数据

> ID：13015022
> 
> 赞同：7
> 
> 时间：2012-10-22T15:49:12.933
> 
> 标签：javascript, jquery, cross-domain, jstorage

我正在尝试将具有唯一 ID 的数据存储到浏览器的存储中，例如`a.com`使用 jStorage 和 jQuery。然后，我尝试使用来自 的唯一 ID 读取数据`b.com`。但是`jStorage.get('UniqueID')`不起作用，并且没有显示所需的输出。

谁能帮我阅读浏览器存储跨域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:45:32.230

[本文](http://www.nczonline.net/blog/2010/09/07/learning-from-xauth-cross-domain-localstorage/)有一些与跨域存储相关的信息。它提供了“使用 iframe 访问另一个域`localStorage`对象的基本技术”。

# c# - WPF 和 C#：为用户控件中的数据网格创建覆盖？

> ID：13015023
> 
> 赞同：3
> 
> 时间：2012-10-22T15:49:13.300
> 
> 标签：c#, wpf, datagrid, user-controls

我有一个大型 WPF 应用程序，其中在用户控件中有一个数据网格，我需要为 OnCreateAutomationPeer 创建一个覆盖。我在这样做时遇到了麻烦，而且该事件似乎永远不会触发。在我的代码隐藏中，我有类似的东西

```
public partial class DocChecklistView :  UserControl, IDataModuleView {     

        protected override System.Windows.Automation.Peers.AutomationPeer OnCreateAutomationPeer()
        {                
            return null;
        }

        public CDocumentChecklistView() {
            InitializeComponent();
        }
} 
```

XAML 是非常标准的代码，例如

```
<UserControl>
 <Grid>
        <toolkit:DataGrid  ItemsSource="{Binding Source={StaticResource DocumentsVS}}" AutoGenerateColumns="False" CanUserAddRows="False" CanUserDeleteRows="False"
                FontSize="16" Name="_dgDocuments" Style="{StaticResource EklektosDataGridStyle}" . . . >
</UserControl> 
```

在上面，`toolkit:DataGrid`设置为 WPFToolkit 的命名空间。按设计`DataGrid`工作，我从未在用户控件中进行过覆盖，并且我上面的代码从未触发 - 从未达到断点。

有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T15:13:32.890

您已正确覆盖该方法。如果你想覆盖`OnCreateAutomationPeer`你的`dataGrid`，你必须继承`DataGrid`-

```
public class MyDataGrid : DataGrid
{
    protected override AutomationPeer OnCreateAutomationPeer()
    {
        return null;
    }
} 
```

在 xaml 中，使用您的自定义 dataGrid

```
<local:MyDataGrid x:Name="dataGrid"/> 
```

在您的 UserControl 的构造函数中 -

```
public CDocumentChecklistView()
{
    InitializeComponent();
    AutomationPeer a = UIElementAutomationPeer.CreatePeerForElement(dataGrid);
} 
```

你需要要求`AutomationPeer`打断点。不就是你想要的吗？

这就是您所缺少的-`UIElementAutomationPeer.CreatePeerForElement(dataGrid);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T17:00:52.797

您需要在自定义控件中覆盖该`OnCreateAutomationPeer`方法`DataGrid`，如下所示：

```
public partial class MyDataGrid : DataGrid
{
    protected override System.Windows.Automation.Peers.AutomationPeer OnCreateAutomationPeer()
    {
        return null;
    }
} 
```

然后将其添加到您的 UserControl 中，如下所示（只需在构建项目后使用 Visual Studio 拖放）：

```
<UserControl xmlns:YourApplicationNamespace="clr-namespace:YourApplicationNamespace"  x:Class="YourApplicationNamespace.DocChecklistView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid Margin="0,1,0,-1">
        <YourApplicationNamespace:MyDataGrid x:Name="myDataGrid1" />  
    </Grid>
</UserControl> 
```

您指定需要覆盖 OnCreateAutomationPeer 方法。仅当您的应用程序使用 UIA（UI 自动化），并且如果应用程序的该部分受 UIA 约束（据我所知）时，才需要这样做。如果没有，那么您甚至不需要重写 OnCreateAutomationPeer 方法。但是，如果您的应用程序的所有功能都仅限于 UIA，那么您需要确保您还为您的自定义控件实现了以下五个步骤（请阅读[此文档以获取更多信息）：](http://msdn.microsoft.com/en-us/library/windows/desktop/gg712258.aspx)

1.  通过覆盖 OnCreateAutomationPeer 向 UIA 公开控件
2.  通过覆盖核心方法提供正确的属性值
3.  使客户端能够使用方法与控件进行交互
4.  实施模式提供者
5.  引发事件

如果您想获取控件的自动化对等对象（您可以使用此对象来获取有关控件特性和功能的信息并模拟交互使用），您可以在使用 FromElement 方法创建它后获取它，如果不是，您可以使用 CreatePeerForElement 方法。

```
AutomationPeer automationPeer = UIElementAutomationPeer.CreatePeerForElement(checklistView.myDataGrid1);
            automationPeer = UIElementAutomationPeer.FromElement(checklistView.myDataGrid1); 
```

无论您使用何种 UIA 方法（测试代码或构建提供辅助功能或其他功能的应用程序），您都需要确保已为自定义控件制定了支持 UIA 的要求，并且已创建 AutomationPeer 对象，以便自动化代码可以使用它来获取有关控件特性和功能的信息或模拟交互使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:01:56.880

Override 似乎是正确的，您只需要创建一个`AutomationPeer`才能获得断点：

XAML：

```
<local:DocChecklistView x:Name="DocChecklistView" Initialized="DocChecklistView_Initialized"/> 
```

在上面的 XAML 的 CodeBehind 中：

```
private void DocChecklistView_Initialized(object sender, EventArgs e)
{
   var peer = UIElementAutomationPeer.CreatePeerForElement(DocChecklistView);
} 
```

如果您想覆盖您`OnCreateAutomationPeer`的`toolkit:DataGrid`UserControl 内部，您必须将 toolkit:DataGrid 子类化为您在 UserControl 内部使用的 CustomControl

# forms - 活动输入占位符文本 CSS3 的颜色

> ID：13015024
> 
> 赞同：1
> 
> 时间：2012-10-22T15:49:15.460
> 
> 标签：forms, css

如何设置活动输​​入的**占位符颜色**，但这不起作用..我尝试了以下操作：

```
::-webkit-input-placeholder:active {
color:    blue;
}
:-moz-placeholder:active {
color:    blue;
}
:-ms-input-placeholder:active {
color:    blue;
} 
```

我所追求的效果与[https://twitter.com/](https://twitter.com/)上的输入相同。

到目前为止的解决方案：

```
:focus::-webkit-input-placeholder {
color:    blue;
}
:focus:-moz-placeholder {
color:    blue;
}
:focus:-ms-input-placeholder {
color:    blue;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:53:03.683

您正在使用`:active`伪类，而是使用`:focus`

[**我的小提琴**](http://jsfiddle.net/VckY5/1/)

`:active`样式仅在您保留元素时适用`clicked`，因此`:focus`用于输入字段...

CSS

```
:focus::-webkit-input-placeholder {
   color: blue;
}
:-moz-placeholder:focus {
   color: blue;
}
:-ms-input-placeholder:focus {
   color: blue;
} 
```

预览

![在此处输入图像描述](../Images/8b2111f19c9b9cf5e7979955a5a3fe9e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:15:22.787

这是你要找的吗？我不确定...

[我的演示](http://jsfiddle.net/Sriganesh/BbZZb/12/)

```
input {
    border: 1px solid black;
    margin-top: 150px;
    margin-left: 100px;

    height: 20px;
    width: 200px;
    padding: 5px;
    border-radius: 3px;

    font-size: 14px;

    transition:.2s linear;
    -webkit-transition:.2s linear;
    -moz-transition:.2s linear;
}

input:focus {
    outline: none;
    box-shadow: 0px 0px 7px #61C5FA;
    border-color: #61C5FA;
}

:focus::-webkit-input-placeholder {
color:    blue;
} 
```

将占位符文本 bluecolor 更改为您喜欢的任何内容...如果，它不仅仅是解释更多...

谢谢

# c# - ASP.NET 会话已过期或找不到

> ID：13015026
> 
> 赞同：3
> 
> 时间：2012-10-22T15:49:24.663
> 
> 标签：c#, asp.net, azure, reportviewer

我在 Windows Azure 上部署了一个 asp.net(VS2010 - .NET 4.0) 应用程序。我正在尝试使用 .NET 报表查看器控件。我正在本地模式下运行报告。报告工作正常并正确显示。当我尝试将其导出到 Excel/PDF/Word 时，我收到此错误“ASP.NET 会话已过期或找不到”。

这是我的示例代码：ASP.NET

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="RxCloudReports.Default" EnableSessionState="True" %>

<%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
    Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script type="text/javascript">
</script>
</head>
</head>
<body>
    <form id="form1" runat="server" enctype="multipart/form-data">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>

        <rsweb:ReportViewer ID="ReportViewer1" runat="server" ProcessingMode="Local" SizeToReportContent="true" AsyncRendering = "true" 
                     ShowPageNavigationControls="true"   ShowExportControls="true" ShowToolBar="true" >

        </rsweb:ReportViewer>
</form>
</body>
</html> 
```

C＃

```
DataSet ds = GetDataSet(_ID, _Module);
ReportViewer1.Reset();
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.ProcessingMode = ProcessingMode.Local;
ReportViewer1.LocalReport.ReportPath = "Reports/Reports1.rdlc";
ReportViewer1.LocalReport.DataSources.Add(new ReportDataSource("ReportDS", ds.Tables[0]));
ReportViewer1.LocalReport.Refresh(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:13:10.057

我已经设定

```
<rsweb:ReportViewer ... KeepSessionAlive="false" /> 
```

在此之后它在 Azure 上工作（至少对我来说）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T16:33:06.390

请检查此链接。

这个链接对我有用。

[ASP.NET 会话已过期或找不到 -> 因为 Session.SessionID 更改（报告服务）](https://stackoverflow.com/questions/9492677/asp-net-session-has-expired-or-could-not-be-found-because-the-session-session)

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-11T00:31:24.103

就我而言；生活在 iframe 中的 ReportViewer 控件一切正常，但最近几天我的网站停止工作，原因是谷歌浏览器安全更新；解决方案是为我的报表服务器设置一个子域，即我的网站位于[https://app.myapp.com](https://app.myapp.com) 我的报表服务器位于[https://reports.myapp.com](https://reports.myapp.com)。

**注意：此解决方案仅适用于您使用 iframe 播种报表控件并且站点位于不同域中的情况**

参考： [开发人员：为新的 SameSite=None 做好准备；安全 Cookie 设置](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html) [公告：Azure 应用服务上的 SameSite Cookie 处理和 .NET Framework 4.7.2 补丁可用性](https://docs.microsoft.com/answers/questions/6842/announcement-samesite-cookie-handling-and-net-fram.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-10T14:16:39.030

除了网络场、工作进程循环、会话实际到期等之外，还有另一种情况可能会发生“ASP.NET 会话过期”错误。

这种情况非常严重，我没有在 Stackoverflow 上看到针对它发布的答案，所以如果这种情况发生在其他人身上，这有望缩短痛苦。

这种情况可能发生在任何使用嵌入式报表查看器控件的应用程序中，但如果您的应用程序具有多个经常刷新的嵌入式报表查看器控件，则它会更快地表现出来。

发生的情况是报表查看器控件在每次刷新时都会不断创建新的 cookie（不知道为什么）。cookie 名称的后缀为 _SKA。

由于每个浏览器对它们将存储的 cookie 数量都有限制（对于最新的 IE 版本，它是 50，对于 Chrome 和 Firefox，它是一个更大的数字，但仍然是有限的），cookie 会不断累积，直到达到限制为止浏览器开始丢弃最旧的 cookie，这意味着 ASP.NET 的会话 cookie 最终被丢弃，导致 ASP.NET 会话过期错误。

因此，在这种情况下，它与会话过期或服务器端的任何事情无关。当达到浏览器 cookie 计数限制时，客户端浏览器开始丢弃最旧的 cookie。

我从这个问题中找到了这个解决方案，其中 cookie 限制问题导致了另一个问题。下面的代码基于该问题中的解决方案： [SSRS：为什么 SKA-cookies 会累积到：HTTP 400 Bad Request - Request Too Long](https://stackoverflow.com/questions/18491223/ssrs-why-do-ska-cookies-build-up-until-http-400-bad-request-request-too-long)

将此代码添加到 global.asax 将解决该问题：

```
 void Application_BeginRequest(object sender, EventArgs e) {
        if (Request == null || Request.Cookies == null) {
            return;
        }
        if (Request.Cookies.Count < 10) {
            return;
        }
        for (int i = 0; i < Request.Cookies.Count; ++i) {
            if (StringComparer.OrdinalIgnoreCase.Equals(Request.Cookies[i].Name, System.Web.Security.FormsAuthentication.FormsCookieName)) {
                continue;
            }
            if (!Request.Cookies[i].Name.EndsWith("_SKA", System.StringComparison.OrdinalIgnoreCase)) {
                continue;
            }
            if (i > 10) {
                break;
            }

            System.Web.HttpCookie c = new System.Web.HttpCookie(Request.Cookies[i].Name);
            c.Expires = DateTime.Now.AddDays(-1);
            c.Path = "/";
            c.Secure = false;
            c.HttpOnly = true;
            Response.Cookies.Set(c);
        }
    } 
```

# ruby-on-rails - 如何将设计与 2 个嵌套资源一起使用？

> ID：13015027
> 
> 赞同：2
> 
> 时间：2012-10-22T15:49:24.793
> 
> 标签：ruby-on-rails, devise

我正在尝试一次将 Devise 与 3 个模型一起使用，但我现在对注册策略感到有些失落。

我的模型如下所示：

`User`has_one `Client`has_one`VIP_Client`

使用`Simple_Form and accepts_nested_attributes_for`，我可以在同一个注册页面中一次创建所有 3 个模型，但我想将其分成 2 个不同的页面：一个用于`User-Client`注册，另一个用于`User-Client-VIP_Client`注册，因为逻辑与另一个完全不同-`VIP_Client`需要更多的验证和所有。问题是，我不确定如何从这里开始。如何制作 2 个单独的表单来构建新`Users`的并映射到相同的`User`资源以使用 Devise 将其保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:02:29.583

与其专注于 Devise 及其模型，您是否可以使用某种多步骤形式来解决您的问题？查看...

[http://railscasts.com/episodes?utf8=%E2%9C%93&search=wizard](http://railscasts.com/episodes?utf8=%E2%9C%93&search=wizard)

# android - 使用 TabListener 通过 ActionBarSherlock 触发活动

> ID：13015029
> 
> 赞同：1
> 
> 时间：2012-10-22T15:49:27.710
> 
> 标签：android, android-activity, tabs, actionbarsherlock

我很难找到我理解的使用 ActionBarSherlock 的示例。我可以实现`TabNavigation.java`下载附带的示例。我不确定如何扩展此示例以触发新活动，但仍保持选项卡显示。这是我实现的示例：

```
package com.actionbarsherlock.sample.demos;

import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;

public class TabNavigation extends SherlockActivity implements ActionBar.TabListener {
    private TextView mSelected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);
        mSelected = (TextView)findViewById(R.id.text);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 3; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);
            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {
        mSelected.setText("Selected: " + tab.getText());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }
} 
```

我相信我需要创建一个新的“Listener”类并将其传递给该`.setTabListener()`方法。我想坚持使用活动（而不是片段），因为我有一个非常复杂的 ORMLite 实现，我还不确定如何将 ORMLite 与片段一起使用。

我想添加一个标记为“配置文件”的新选项卡，它会触发`ProfileActivity.class`.

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:02:38.903

I guess that TabListener is supposed to work with Fragments and FragmentTransaction. You will have to move your code from ProfileActivity to a new ProfileFragment class and add it with the FragmentTransaction you receive by the listener.

I would suggest you to add ViewPagerIndicator library on your project, just like [this answer](https://stackoverflow.com/questions/10082163/actionbarsherlock-tabs-multi-fragments). A ViewPager is just like tabs plus the swype movement to navigate between them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:17:00.003

听起来我没有找到我正在寻找的示例的原因是因为您不能持久地使用操作栏和活动。评论或更好的答案将不胜感激。:)

# javascript - 动态调用后设置和获取文档高度

> ID：13015031
> 
> 赞同：0
> 
> 时间：2012-10-22T15:49:37.200
> 
> 标签：javascript, jquery

我正在使用在这里找到的平滑滚动插件[nicescroll](http://areaaperta.com/nicescroll/)

我遇到的第一个问题是它将自己设置为“静态 html 高度”。这对我不起作用，因为我的文档正在加载窗口加载项目。所以我添加了一个我发现的脚本：

```
 $(window).load(function () {

        function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}
$('html').height(getDocHeight()); 
```

即使在加载了所有动态项目后，此脚本也允许更改 HTML 高度，所以现在我的平滑滚动又可以工作了。

但现在我面临另一个问题，因为我在单击按钮时加载项目，从而再次更改文档。这次我上面的脚本不起作用，所以我把函数放在点击事件中：

```
$(".button").live("click", function(){

        function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}
$('html').height(getDocHeight());

}); 
```

这似乎对我不起作用。那么如何在单击事件后获取和设置（更改）文档高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:56:49.603

尝试使用 .on 而不是 .live。.live 已弃用，请查看 jQuery 文档了解更多信息。

此外，您无需在 .on 处理程序内重新添加 /function/ ......将其放在 .on 代码之外，因此您不会每次都在处理程序内重新构建函数！

因此，您的代码将类似于：

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

$("some .element above .button").on("click", ".button", function(){
    // put your click handler in here, to adjust the doc height
    $('html').height(getDocHeight());
}); 
```

我很确定必须有一种更简单的方法来直接从 jQuery 获取文档高度，所以你甚至可能根本不需要你的 getDocHeight() 函数。看[http://api.jquery.com/height/](http://api.jquery.com/height/)

# java - 泛型类中的休眠继承

> ID：13015032
> 
> 赞同：0
> 
> 时间：2012-10-22T15:49:42.133
> 
> 标签：java, hibernate, generics, inheritance

我有一个泛型类，它是一些非泛型类的超级类，那些只是设置它的泛型参数，如下所示：

```
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
class A<T>{
    @Id
    getId(){..}
    setID(int id){..}
    int id

    T t;
    T getT(){...}
    setT(T t){...}
} 
```

和

```
@Entity
class B extends A<Integer>{} 
```

但是hibernate说B没有标识符我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:56:58.200

您还需要将 @Entity 注释添加到类 A 中。属性 t 上的 @Transient 注释应该有助于您的第二个异常

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
class A<T> {
    @Id
    getId(){..}
    setID(int id){..}
    int id

    @Transient
    T t;
    T getT(){...}
    setT(T t){...}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:01:27.530

如果 A 不会直接持久化，但您确实希望它的子类获取其部分（或全部）Hibernate 注释，则应使用 @MappedSuperclass：

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
class A<T>{
    @Id
    getId(){..}
    setID(int id){..}
    int id

    T t;
    T getT(){...}
    setT(T t){...}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T13:40:36.120

我同意第 1 号回复，将 @MappedSuperclass 用于 A - 不要将某些东西抽象为实体。您可能也应该使这个类特别抽象。

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
abstract class A<T>{
  @Id
  getId(){..}
  setID(int id){..}
  int id

  T t;
  T getT(){...}
  setT(T t){...}
} 
```

每类表的策略通常需要这种抽象基础。然后子类指定表名和附加字段。

```
@Entity
@Table(name="MY_INTEGERS")
class B extends A<Integer>{} 
```

（我个人会将这个变量类型移动到子类中，但我不知道你想要实现什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-22T09:04:39.907

经过大量测试，试图让 Java 参数化与抽象父表（单表继承）和抽象子表（每类一个表继承）一起工作，我放弃了。

这可能是可能的，但是当 Hibernate 尝试将抽象（参数化）类实例化为实体时，您经常会遇到问题。这是当您收到错误“A 具有未绑定的类型且没有明确的目标实体”时。这意味着 Hibernate 没有参数化类型的参数值。我发现扩展类的测试很好，但是围绕父实体的测试会中断。

我建议使用 JPA 继承重写它，将参数化的东西向下移动到扩展类中。这样你就可以从数据库中得到相同的多态性。

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "CLASS_TYPE", discriminatorType = DiscriminatorType.STRING)
public abstract class ClassA {

  [...]

} 
```

扩展 B：

```
@Entity
@DiscriminatorValue=("B")
public class ClassB extends ClassA {
  @OneToOne
  @JoinColumn(name = "mycolumn_id")
  private Integer instance;

  [...]
} 
```

扩展 C：

```
@Entity
@DiscriminatorValue=("C")
public class ClassC extends ClassA {
  @OneToOne
  @JoinColumn(name = "mycolumn_id")
  private String instance;

  [...]
} 
```

# facebook - Facebook 能识别虚 URL 吗？

> ID：13015039
> 
> 赞同：0
> 
> 时间：2012-10-22T15:50:00.437
> 
> 标签：facebook, facebook-graph-api

我使用虚域扩展名[http://thatme.me](http://thatme.me)创建了一个网站。我已经为 url 添加了必要的 OpenGraph 元标记，以便在 Facebook 上显示所有漂亮的内容。如果用户发布完整的 URL，例如[http://thatme.me/notbad](http://thatme.me/notbad)，OpenGraph 数据将被拉取并在帖子上显示图像。但是，如果用户只键入类似 thatme.me/notbad 的 url，则无法识别该 URL，并且不会显示 OpenGraph 数据。

我需要做些什么才能识别这些 URL，还是我运气不好？

# python - 从不同的进程设置 RichEdit 的文本颜色

> ID：13015044
> 
> 赞同：3
> 
> 时间：2012-10-22T15:50:08.633
> 
> 标签：python, c, winapi, user-interface, win32gui

我正在尝试为来自不同进程的 Richedit 控件（类 RichEdit20W）中的特定单词设置背景和前景色。我有以下使用 python 调用的 C 代码，但它失败了（SendMessage 返回 0）。如果我将 SCF_SELECTION 更改为 SFC_ALL 或 0，它会起作用，但遗憾的是它不符合我的需要，因为我只需要将更改应用于控件中的部分文本。

这是代码：

```
#include <Windows.h>
#include <stdio.h>
#include <limits.h>
#include <Richedit.h>

__declspec(dllexport) LRESULT SetColour(HWND hWnd, COLORREF textColor, COLORREF bgColor)
{
    CHARRANGE cr;
    cr.cpMin = 3;
    cr.cpMax = 8;

    CHARFORMAT2 cf;
    cf.cbSize = sizeof(cf);
    cf.dwMask = CFM_COLOR | CFM_BACKCOLOR;
    cf.crTextColor = textColor;
    cf.crBackColor = bgColor;

    DWORD   dwPID;
    HANDLE  hProcess;
    LPVOID  pRemoteCR;
    LPVOID  pRemoteCF;
    SIZE_T  zWritten;
    LRESULT lResult;

    GetWindowThreadProcessId(hWnd, &dwPID);
    hProcess = OpenProcess(PROCESS_VM_WRITE | PROCESS_VM_OPERATION, FALSE, dwPID);
    //  Allocate memory on the target process & write the CHARFORMAT2 structure there
    pRemoteCR = VirtualAllocEx(hProcess, NULL, sizeof cr, MEM_COMMIT, PAGE_READWRITE);
    WriteProcessMemory(hProcess, pRemoteCR, &cr, sizeof cr, &zWritten);
    SendMessage(hWnd, EM_EXSETSEL, 0, (LPARAM)pRemoteCR);
    VirtualFreeEx(hProcess, pRemoteCR, 0, MEM_RELEASE);

    pRemoteCF = VirtualAllocEx(hProcess, NULL, sizeof cf, MEM_COMMIT, PAGE_READWRITE);
    WriteProcessMemory(hProcess, pRemoteCF, &cf, sizeof cf, &zWritten);
    lResult = SendMessage(hWnd, EM_SETCHARFORMAT, (WPARAM)SCF_SELECTION, (LPARAM)pRemoteCF); // SCF_SELECTION
    VirtualFreeEx(hProcess, pRemoteCF, 0, MEM_RELEASE);

    return lResult;
}

BOOL WINAPI DllMain(HINSTANCE hinstDLL,DWORD dwReason,LPVOID lpvReserved)
{
    return TRUE;
} 
```

# unix - 如何在一个脚本/批处理文件中更改多个 unix 密码？

> ID：13015045
> 
> 赞同：6
> 
> 时间：2012-10-22T15:50:25.527
> 
> 标签：unix, scripting, batch-file, ssh, putty

我使用 putty 中的连接类型“SSH”从 Windows 连接到 8 个不同的 unix 服务器。我为每台服务器使用相同的用户名/密码。

目前当我需要更改密码时（每 60 天），我需要打开 putty，选择我要连接的会话，输入我当前的密码（在打开的 putty 窗口中），输入“passwd”，输入我的当前密码，然后输入我的新密码。

然后我退出并重复该过程 7 次。

如何将其转换为自动化过程，我只需要提供带有新旧密码的脚本/批处理过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:08:39.090

以下是我如何自动化该过程：

1.  下载并安装[ActiveTCL 社区版](http://www.activestate.com/activetcl/downloads)（下载 32 位版本，即使您在 64 位 Windows 上，因为 64 位版本没有运行自动化脚本所需的“期望”）

2.  打开安装创建的 tclsh85 可执行文件

3.  运行此命令“teacup install Expect”（注意，这是区分大小写的。如果您收到错误和/或在 vpn 上或使用代理，您可能需要设置特殊的 http 设置）

4.  [下载 Putty 的“plink.exe”](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)并将其放在 ActiveTCL 的 bin 目录中（默认安装目录为“C:\Tcl\bin”）或更改“Path”环境变量以包含此可执行文件的路径（无论您下载的位置plink.exe）。这是您的脚本将使用的 Putty 命令行版本。

5.  在您的驱动器上的任何地方，创建一个名为“servers.txt”的文本文件，其中包含服务器列表（每行一个）。他们都应该共享相同的密码，因为脚本将使用相同的密码（您提供的密码）登录到所有这些人，并将密码更改为您提供的密码。

6.  在与“servers.txt”相同的目录中创建一个名为“ChangePassword.tcl”的新文本文件（或任何您想调用的文件，但请确保其文件类型为“tcl”）。右键单击该文件并在记事本（或您喜欢的任何文本编辑器）中编辑并将此脚本粘贴到其中。

    ```
    package require Expect

    exp_log_user 0
    set exp::nt_debug 1

    proc changepw {host user oldpass newpass} {
           spawn plink $host
           log_user 0
           expect {
               "login as: " { }
           }
           exp_send "$user\r"
           expect "sword: "
           exp_send "$oldpass\r"
           expect "\$ "
           exp_send "passwd\r"
           expect "sword: "
         exp_send "$oldpass\r"
         expect "sword: "
         exp_send "$newpass\r"
         expect "sword: "
         exp_send "$newpass\r"
           set result $expect_out(buffer)
           exp_send "exit\r"
           return $result
    }

    label .userlbl -text "Username:"
    label .oldpasslbl -text "\nOld Password: "
    label .newpasslbl -text "\nNew Password: "

    set username "username"
    entry .username -textvariable username
    set oldpassword "oldpassword"
    entry .oldpassword -textvariable oldpassword
    set newpassword "newpassword"
    entry .newpassword -textvariable newpassword

    button .button1 -text "Change Password" -command {
      set fp [open "servers.txt" r]
      set file_data [read $fp]
      close $fp
      set data [split $file_data "\n"]
      foreach line $data {
          .text1 insert end "Changing password for: $line\n"
        set output [changepw $line $username $oldpassword $newpassword]
        .text1 insert end "$output\n\n"
      }
    }

    text .text1 -width 50 -height 30 
    pack .userlbl .username .oldpasslbl .oldpassword .newpasslbl .newpassword .button1 .text1 
    ```

7.  保存脚本，然后启动 ChangePassword.tcl 文件。

这是打开 ChangePassword.tcl 文件时的样子： ![后台打开servers.txt更改密码TCL程序](../Images/607da423e7eb11f56004abbdeee0fd43.png)

其余的应该是不言自明的。请注意，当您的密码更改成功时，程序不会输出，但它会在失败时告诉您。另请注意，这是我的第一个 tcl 脚本（也是第一次使用 Expect），因此该脚本绝不是“优化”的，可能会有所改进，但它可以完成工作。随意编辑，或提出建议/改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:54:23.443

听起来您想要[Expect](http://www.nist.gov/el/msid/expect.cfm)，它是 TCL 的扩展，可以模拟在控制台应用程序的键盘上打字。请参阅[示例](http://en.wikipedia.org/wiki/Expect#Examples)以了解如何执行此操作。

现在有一些你写的让我担心的东西：

> 我使用 putty 中的连接类型“SSH”连接到 8 个不同的 unix 服务器。我为每台服务器使用相同的用户名/密码。

为什么不使用 SSH 密钥来自动登录？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-29T20:28:49.813

好文章！仅详细说明第 3 步。请注意提供代理服务器信息的命令，以防“teacup install Expect”由于连接问题而失败：

```
%teacup install Expect
    Resolving Expect ... Not found in the archives.
    ...
    Aborting installation, was not able to locate the requested entity.
    child process exited abnormally
% teacup list teacup
    0 entities found
    Problems which occurred during the operation:
    * http://teapot.activestate.com :
    &#123;connect failed connection refused&#125; &#123;can't read
    "state(sock)": no such element in array while executing
    "fileevent $state(sock) writable &#123;&#125;"&#125; NONE
% teacup proxy "abcproxy.mycorp.com" 8080
    Proxying through abcproxy.mycorp.com @ 8080
% set http_proxy_user MyNetworkID
    MyNetworkID
% set http_proxy_pass MyNetworkPassword
    MyNetworkPassword
% teacup list teacup
    entity      name   version         platform
    ----------- ------ --------------- ----------
    application teacup 8.5.16.0.298388 win32-ix86
    ----------- ------ --------------- ----------
    1 entity found
% teacup install Expect
    Resolving Expect ... [package Expect 5.43.2 win32-ix86 @ http://teapot.activestate.com]
    Resolving Tcl 8.4 -is package ... [package Tcl 8.6.1 _ ... Installed outside repository, probing dependencies]
    Retrieving package Expect 5.43.2 win32-ix86 ...@ http://teapot.activestate.com ...
    Ok
    Installing into C:/app/Tcl/lib/teapot
    Installing package Expect 5.43.2 win32-ix86
 % 
```

# java - 序列化 Java 对象时如何解决 StreamCorruptedException？

> ID：13015046
> 
> 赞同：1
> 
> 时间：2012-10-22T15:50:26.473
> 
> 标签：java

我很抱歉，因为我已经看到有关此主题的帖子，但似乎没有一个可以解决我的问题。所以我会尽量说得非常具体。当我`StreamCorruptedException`尝试打开`ObjectInputStream`我的`ByteArrayInputStream`

我需要将对象 ( `X509Certificate`) 输出到 XML 文件。我的序列化代码如下所示：

```
 ByteArrayOutputStream bos = new ByteArrayOutputStream();
  ObjectOutputStream oos = new ObjectOutputSream(bos);
  oos.writeObject(x509.getData());    // x509 is a DOM Element
  oos.close();
  bos.close(); 
```

XML 文档似乎很好。我的输入代码如下所示：

```
 // elem is a DOM Element with contents placed in Context
  ByteArrayInputStream bis = new ByteArrayInputStream(
                                    elem.getTextContext().getBytes())
  ObjectInputStream ois = new ObjectInputStream(bis);
  X509Certificate x509 = (X509Certificate) ois.readObject();
  ois.close();
  bis.close(); 
```

我得到的堆栈跟踪主要是通过我自己的代码，而不是 JVM 内部的任何内容，因此很难跟踪。它是这样的：

```
 java.io.StreamCorruptedException: invalid stream header: 5B0A5B0A
  at java.io.ObjectInputStream.readStreamHeader (ObjectInputStream.java:783)
  at java.io.ObjectInputStream.<init>(ObjectInputStream.java:280)
  . my code
  . my code 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:48:50.897

您需要在将序列化数据放入文本节点之前对其进行十六进制或 base64 编码，并在反序列化之前对其进行解码。文本节点是字符串，而字符串不是二进制数据的容器。

但我不明白根本问题。有标准的方法和标准的 API 来表示 XML 中的证书，但事实并非如此。

# sql - 使用 ETL 工具按列值将数据拆分为不定数量的表

> ID：13015048
> 
> 赞同：4
> 
> 时间：2012-10-22T15:50:31.263
> 
> 标签：sql, etl, pentaho, talend

我正在尝试使用 Talend Open Studio 根据给定列的值将一个表拆分为多个表。假设该列可以包含 1、2、3 等任何整数值，那么根据该值，这些行应该转到 table_1、table_2、table_3 等。

最好在事先不知道该列中不同值的数量时解决这个问题，但现在我们可以假设所有这些输出表都已经存在。底线是**不同值的数量以及因此不同表的数量足够高，以至于手动设置单个过滤器不是一种选择。**

是否可以使用 Talend Open Studio 或任何类似的开源 ETL 工具（如 Pentaho Keetle）来解决这个问题？

当然，我可以自己写一个简单的脚本，但我更喜欢使用合适的 ETL 工具，因为完整的 ETL 过程相当复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:03:25.370

在 PDI 或 Pentaho Kettle 中，您可以通过分区来做到这一点。（步骤 IIRC 上的右键单击选项）PDI 中的分区正是为此类问题而设计的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-25T06:01:34.767

是的，可以根据单列将数据拆分为不同的表，但为此您需要动态创建表：-

> tFileInputDelimited->tFlowtoIterate ->tFixedFlowInput-> 并且可以使用 globalMap() 获取列值并使用相同的值将数据分隔到不同的表中。-> 并且可以在表名中使用 globalMap(Columnused to separate data)。

![在此处输入图像描述](../Images/2f714a3e926a7d42c63b21cad794d772.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:56:58.720

我想到的第一个解决方案是使用复制器将当前行传输到三个过滤器，这些过滤器充当保护器，只让给定列中包含 1 2 或 3 的行通过。图片：http: [//i.imgur.com/FmvwU.png](http://i.imgur.com/FmvwU.png)

但是您也可以动态构建表名，如果这是您想要的，图片：http: [//i.imgur.com/8LR7Q.png](http://i.imgur.com/8LR7Q.png)

# jquery - 如何使用 jQuery 调用平板电脑的键盘？

> ID：13015049
> 
> 赞同：2
> 
> 时间：2012-10-22T15:50:32.397
> 
> 标签：jquery, asp.net-mvc, tablet

我有一个关于打电话的问题`tablet's keyboard`。

我有一个下拉列表和文本框。现在，当我选择 DropDownList 项目时，我想将焦点设置在文本框上并调用数字键盘。这一切都必须在不按下文本框的情况下工作。

我使用`ASP.NET MVC`和`jQuery`。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:57:54.013

将焦点设置到文本框以触发键盘的打开，这可能会有所帮助。示例： http: [//ftlabs.github.com/fastclick/examples/focus.html](http://ftlabs.github.com/fastclick/examples/focus.html) 代码：[https ://github.com/ftlabs/fastclick](https://github.com/ftlabs/fastclick)

和

```
<input type="number"> 
```

或者

```
<input type="tel"> 
```

当文本输入获得焦点时触发数字小键盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:53:48.723

我会尝试将焦点设置在文本框 onSelect 上（在下拉菜单上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T15:54:27.290

[http://jsfiddle.net/VJeLY/](http://jsfiddle.net/VJeLY/)

```
<select id="dropDownList">
<option>This</option>
<option>That</option>
</select>
<input type="number" id="text-inputId"/>​

$('#dropDownList').change(function(){
    $('#text-inputId').focus()
})​ 
```

# android - Android：在 ItemizedOverly 上的 onTab 之后尝试做出意图后的 NullPointer

> ID：13015053
> 
> 赞同：2
> 
> 时间：2012-10-22T15:50:45.283
> 
> 标签：android, google-maps, itemizedoverlay

我在 TabHostActivity 中有一个 MapsActivity，我在地图上放置了一个自定义 ItemizedOverlay 以显示自定义 OverlayItems。

在我的 ItemizedOverlay 类中，onTab 方法如下所示

```
@Override
protected boolean onTap(int index) {
    listener.onPoiTap(this.poiList.get(index));
    return true;
} 
```

其中 listener 变量是一个自定义的 onTabListener ，它在 maps Activity 中实现如下：

```
@Override
public void onPoiTap(PointOfInterest poi) {
    Intent intent = new Intent();
    intent.setClass(getParent(), PointOfInterestActivity.class);

    ActivityStack activityStack = (ActivityStack) this.getParent();
    activityStack.push(new Date().getTime() + "", intent);
    // Toast.makeText(this, "Title: " + poi.getTitle(), Toast.LENGTH_SHORT).show();
} 
```

评论后的 Toast 工作并显示正确的标题，但意图的调用使应用程序崩溃并显示没有任何引用我的代码的日志：

```
I/InputReader( 2284): Touch event's action is 0x0 (deviceType=0) [pCnt=1, s=0.749 ]
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x0
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x0
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x0
I/InputReader( 2284): Touch event's action is 0x1 (deviceType=0) [pCnt=1, s=]
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x1
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x1
I/InputDispatcher( 2284): Delivering touch to current input target: action: 0x1
E/InputEventReceiver(22509): Exception dispatching input event.
E/MessageQueue-JNI(22509): Exception in MessageQueue callback: handleReceiveCallback
E/MessageQueue-JNI(22509): java.lang.NullPointerException
E/MessageQueue-JNI(22509):  at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:548)
E/MessageQueue-JNI(22509):  at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
E/MessageQueue-JNI(22509):  at android.view.View.dispatchTouchEvent(View.java:7337)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2410)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2145)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/MessageQueue-JNI(22509):  at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/MessageQueue-JNI(22509):  at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/MessageQueue-JNI(22509):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/MessageQueue-JNI(22509):  at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/MessageQueue-JNI(22509):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/MessageQueue-JNI(22509):  at android.view.View.dispatchPointerEvent(View.java:7520)
E/MessageQueue-JNI(22509):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3374)
E/MessageQueue-JNI(22509):  at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3306)
E/MessageQueue-JNI(22509):  at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4400)
E/MessageQueue-JNI(22509):  at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4378)
E/MessageQueue-JNI(22509):  at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4482)
E/MessageQueue-JNI(22509):  at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
E/MessageQueue-JNI(22509):  at android.os.MessageQueue.nativePollOnce(Native Method)
E/MessageQueue-JNI(22509):  at android.os.MessageQueue.next(MessageQueue.java:125)
E/MessageQueue-JNI(22509):  at android.os.Looper.loop(Looper.java:124)
E/MessageQueue-JNI(22509):  a
D/AndroidRuntime(22509): Shutting down VM
W/dalvikvm(22509): threadid=1: thread exiting with uncaught exception (group=0x410662a0)
E/AndroidRuntime(22509): FATAL EXCEPTION: main
E/AndroidRuntime(22509): java.lang.NullPointerException
E/AndroidRuntime(22509):    at com.google.android.maps.GestureDetector.onTouchEvent(GestureDetector.java:548)
E/AndroidRuntime(22509):    at com.google.android.maps.MapView.onTouchEvent(MapView.java:683)
E/AndroidRuntime(22509):    at android.view.View.dispatchTouchEvent(View.java:7337)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2410)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2145)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/AndroidRuntime(22509):    at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/AndroidRuntime(22509):    at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2416)
E/AndroidRuntime(22509):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:2159)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2109)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1462)
E/AndroidRuntime(22509):    at android.app.Activity.dispatchTouchEvent(Activity.java:2472)
E/AndroidRuntime(22509):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2057)
E/AndroidRuntime(22509):    at android.view.View.dispatchPointerEvent(View.java:7520)
E/AndroidRuntime(22509):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3374)
E/AndroidRuntime(22509):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3306)
E/AndroidRuntime(22509):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4400)
E/AndroidRuntime(22509):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4378)
E/AndroidRuntime(22509):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4482)
E/AndroidRuntime(22509):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
E/AndroidRuntime(22509):    at android.os.MessageQueue.nativePollOnce(Native Method)
E/AndroidRuntime(22509):    at android.os.MessageQueue.next(MessageQueue.java:125)
E/AndroidRuntime(22509):    at android.os.Looper.loop
D/dalvikvm(22509): GC_CONCURRENT freed 1205K, 21% free 22090K/27719K, paused 5ms+4ms, total 51ms
D/dalvikvm( 2284): GC_FOR_ALLOC freed 2199K, 46% free 32415K/59399K, paused 119ms, total 119ms
E/Watchdog( 2284): !@Sync 388 
```

任何想法我的代码有什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:09:02.613

你有没有放入`PointsOfInterestActivity`你的 AndroidManifest.xml 文件？如果你不输入它，应用程序将崩溃......看[这个](https://stackoverflow.com/questions/6770295/android-crash-when-starting-activity)。

# mysql - 使用wamp的mysql地址

> ID：13015056
> 
> 赞同：3
> 
> 时间：2012-10-22T15:50:55.310
> 
> 标签：mysql, jsp, jakarta-ee, servlets, wamp

我已经安装了 wamp，它提供了 PHP Apache 和 MySQL。我不需要 PHP 和 Apache 我正在使用 Tomcat 制作 Java EE 应用程序。我想从 Servlet 连接到 MySQL 数据库

```
Class.forName("com.mysql.jdbc.Driver");
  con =DriverManager.getConnection 
  ("jdbc:mysql://ADDRESS_MYSQL/DATABASE_NAME","USERNAME","PASSWORD"); 
```

原因是我无法获取MYSQL的地址，我打开`sql.ini`文件看到它正在运行`3306`但无法获取地址。

如何获取连接数据库的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:51:28.423

检查 WAMP 的系统托盘图标，确保 MySQL 服务正在运行。在设置过程中，您应该被提示设置 root 密码。在这种情况下，如果 MySQL 正在运行，您应该能够使用 root 连接到 localhost:3306 来测试您的 MySQL 实例。我怀疑 MySQL 服务没有运行，需要启动。

祝一切顺利。

# java - GWT：DefaultHistorian 与 Mapper 对象？

> ID：13015065
> 
> 赞同：0
> 
> 时间：2012-10-22T15:51:35.533
> 
> 标签：java, gwt

[PlaceHistoryHandler#DefaultHistorian](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/place/shared/PlaceHistoryHandler.DefaultHistorian.html)的 GWT JavaDocs是模糊和循环的：

> PlaceHistoryHandler.DefaultHistorian 的默认实现。

这并没有真正告诉我们它是什么，或者它做了什么！

然后我们有[PlaceHistoryMapper](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/place/shared/PlaceHistoryMapper.html)和[ActivityMapper](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/activity/shared/ActivityMapper.html)对象。我的*理解*是`PlaceHistoryMapper`' 的工作是将 URL 标记映射到`Place`，并将`ActivityMapper`这些`Place`s 映射到`Actvitity`实现。

所以我问：如果这两个 Mapper 负责将 URL 令牌绑定到特定的`Activity`，那么`DefaultHistorian`在这一切中扮演什么角色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:35:02.660

Javadoc 在阅读时很容易更正：`DefaultHistorian`是[`Historian`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/place/shared/PlaceHistoryHandler.Historian.html).

要了解它们如何一起发挥作用，您首先必须了解地方可以在没有*历史*的情况下工作，也可以在没有活动的情况下工作。

所以，在中心位置是*地方*：`PlaceController`保持一个当前的`Place`（`getWhere`），它可以被修改`goTo`并将更改事件广播到一个`EventBus`。侦听器可以通过（其默认实现使用）要求用户确认（`PlaceChangeRequestEvent`'s ）。`setMessage`[`Delegate`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/place/shared/PlaceController.Delegate.html)`Window.confirm`

`PlaceRequestChangeEvent`建立在活动之上`PlaceChangeEvent`。您可以有多个`ActivityManager`s，每个都有其`ActivityMapper`和一个*显示区域*，为相同的给定/当前位置显示不同的活动。

而另一方面，基于`goTo`上述事件，就是*历史*。`PlaceHistoryHandler`监听双方的事件并*更新历史*（通过`Historian`）或更新地点（通过`PlaceController`'s `goTo`）。`PlaceHistoryMapper`两个世界之间的地图。`Historian`( )的默认实现`DefaultHistorian`使用`com.google.gwt.user.client.History`和`com.google.gwt.user.client.Window#addWindowClosingHandler`。例如，您可以提供自己的[使用 HTML5 的`pushState`实现`onpopstate`](https://gist.github.com/1883821)。

看：

*   [http://blog.ltgt.net/gwt-21-places/](http://blog.ltgt.net/gwt-21-places/)
*   [http://blog.ltgt.net/gwt-21-places-part-ii/](http://blog.ltgt.net/gwt-21-places-part-ii/)
*   [http://blog.ltgt.net/gwt-21-activities/](http://blog.ltgt.net/gwt-21-activities/)
*   [http://blog.ltgt.net/gwt-21-activities-nesting-yagni/](http://blog.ltgt.net/gwt-21-activities-nesting-yagni/)

# android - 在选项卡/多个活动android应用程序中传递带有意图的变量

> ID：13015067
> 
> 赞同：0
> 
> 时间：2012-10-22T15:51:37.673
> 
> 标签：android, variables, android-intent, android-activity, tabs

嗨，我是 android 开发的初学者，我正在做一个学校作业，我们将在其中制作 n 应用程序，该应用程序有一个用于搜索的文本字段，它将使用该字符串来查询烂番茄的开放 API。这将显示为列表并稍后进行操作。

我现在已经走到了最后。搜索、添加和获取类似电影都可以正常工作（还有 gui），但我无法从 db/list 中删除（如果需要，我将电影保存到其中），我不知道为什么。我认为我以正确的方式使用意图，但显然不是。

完整代码：

// MainActivity.java

```
 package geemoney.movieeservice;

import android.os.Bundle;
import android.app.TabActivity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        /** TabHost (main container of tab view, the top rectangle) will have Tabs */
        TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);

        /** TabSpec used to create a new tab.
        * By using TabSpec only we can able to setContent to the tab.
        * By using TabSpec setIndicator() we can set name to tab. */

        /** tid1 is firstTabSpec Id. Its used to access outside. */
        TabSpec firstTabSpec = tabHost.newTabSpec("tid1");
        TabSpec secondTabSpec = tabHost.newTabSpec("tid2");

        /** TabSpec setIndicator() is used to set name for the tab. */
        /** TabSpec setContent() is used to set content for a particular tab. */
        firstTabSpec.setIndicator("Search").setContent(new Intent(this,SearchTab.class));
        secondTabSpec.setIndicator("My List").setContent(new Intent(this,MylistTab.class));

        /** Add tabSpec to the TabHost to display. Adding the newly created tabs to its container */
        tabHost.addTab(firstTabSpec);
        tabHost.addTab(secondTabSpec);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

// 两个新的类/选项卡之一，这个调用了 SearchTab

```
package geemoney.movieeservice;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import database.DBAdapter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class SearchTab extends Activity {
    ArrayList<String> list = new ArrayList<String>();
    List<Map<String, String>> data;
    SimpleAdapter aa;
    Map<String, String> item;
    String apiKey = "chhgsd429xb9fs6wq3kqzhmk";
    String current = "";
    MylistTab mt = new MylistTab();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.search);

        /* First Tab Content */
        Button addButton = (Button) findViewById(R.id.add);
        Button similarButton = (Button) findViewById(R.id.similar);
        Button searchButton = (Button) findViewById(R.id.search);
        addButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (current != ""){
                    add();
                }else {
                    Toast.makeText(getApplicationContext(), "You need to select a list item",Toast.LENGTH_LONG).show();
                }
            }
        });
        similarButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (current != ""){
                    similar();
                }else {
                    Toast.makeText(getApplicationContext(), "You need to select a list item",Toast.LENGTH_LONG).show();
                }
            }
        });
        searchButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                EditText userInput = (EditText) findViewById(R.id.searchstring);
                if ((!(userInput.getText().toString().isEmpty()))) {
                    search();
                }else {
                    Toast.makeText(getApplicationContext(), "You need insert a search string",Toast.LENGTH_LONG).show();
                }
            }
        });
    }

    protected void add() {
        DBAdapter db = new DBAdapter(this);
        String id = current.substring(current.indexOf("id=") + 3, current.indexOf(" ", current.indexOf("id=") + 3) - 1);
        String title = current.substring(current.indexOf("title=") + 6, current.indexOf("}", current.indexOf("title=")));
        String year = current.substring(current.indexOf("year=") + 5, current.indexOf(" ", current.indexOf("year=") + 5) - 1);
        db.open();
        db.insertTitle(id, title, year);
        db.close();
        Toast.makeText(getApplicationContext(), "Added to DB", Toast.LENGTH_LONG).show();
    }

    protected void search() {
        data = new ArrayList<Map<String, String>>();
        list = new ArrayList<String>();
        EditText searchstring = (EditText) findViewById(R.id.searchstring);
        String query = searchstring.getText().toString().replace(' ', '+');
        String text = searchquery(query);

        try {
            JSONObject res = new JSONObject(text);

            JSONArray jsonArray = res.getJSONArray("movies");

            for (int i = 0; i < jsonArray.length(); i++) {

                JSONObject jsonObject = jsonArray.getJSONObject(i);
                item = new HashMap<String, String>(2);
                item.put("id",jsonObject.getString("id"));
                item.put("title",jsonObject.getString("title"));
                item.put("year", jsonObject.getString("year"));
                data.add(item);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }                   

        aa = new SimpleAdapter(SearchTab.this, data,
                R.layout.mylistview,
                new String[] {"title", "year"},
                new int[] {R.id.text1,
                R.id.text2});
        ListView lv = (ListView) findViewById(R.id.listView1);
        lv.setAdapter(aa);
        lv.setDividerHeight(5); 

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

                Map<String, String> s = data.get((int) id);
                current = s.toString();
                // HERE INTENT
                Intent i = new Intent(SearchTab.this, MylistTab.class);

            }});
    }

    private String searchquery(String searchString) {
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://api.rottentomatoes.com/api/public/v1.0/movies.json?apikey="+apiKey + "&q="+searchString + "&page_limit=10");
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            } else {
                Log.e("QueryDB", "Failed to download file");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return builder.toString();
    }

    protected void similar() {
        data = new ArrayList<Map<String, String>>();
        list = new ArrayList<String>();
        //id=12897, year=1999, title=The Matrix
        String id = current.substring(current.indexOf("id=") + 3, current.indexOf(" ", current.indexOf("id=") + 3) - 1);
        String text;

        text = similarquery(id);
        try {
            JSONObject res = new JSONObject(text);

            JSONArray jsonArray = res.getJSONArray("movies");

            for (int i = 0; i < jsonArray.length(); i++) {

                JSONObject jsonObject = jsonArray.getJSONObject(i);
                item = new HashMap<String, String>(2);
                item.put("id",jsonObject.getString("id"));
                item.put("title",jsonObject.getString("title"));
                item.put("year", jsonObject.getString("year"));
                data.add(item);

            }
        } catch (Exception e) {
            e.printStackTrace();
        }                   

        aa = new SimpleAdapter(SearchTab.this, data,
                R.layout.mylistview,
                new String[] {"title", "year"},
                new int[] {R.id.text1,
                R.id.text2});
        ListView lv = (ListView) findViewById(R.id.listView1);
        lv.setAdapter(aa);
        lv.setDividerHeight(5); 

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int pos, long id) {

                Map<String, String> s = data.get((int) id);
                current = s.toString();
                // HERE INTENT
            }});
    }

    private String similarquery(String id) {
        StringBuilder builder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://api.rottentomatoes.com/api/public/v1.0/movies/"+id+"/similar.json?apikey="+apiKey +"&limit=5");

        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    builder.append(line);
                }
            } else {
                Log.e("QueryDB", "Failed to download file");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return builder.toString();
    }
} 
```

// mylisttab.java

```
 package geemoney.movieeservice;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import database.DBAdapter;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class MylistTab extends Activity {
    ArrayList<String> list = new ArrayList<String>();
    List<Map<String, String>> data;
    SimpleAdapter aa;
    DBAdapter db = new DBAdapter(this);
    String current = "";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylist);

        /* First Tab Content */
        Button deleteButton = (Button) findViewById(R.id.remove);
        deleteButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if (current != "") {
                    delete();   
                }else {
                    Toast.makeText(getApplicationContext(), "You need to select a list item",Toast.LENGTH_LONG).show();
                }
            }
        });
        populate();
    }

    public void delete() {
        if (current != null) 
        {
            db.open();
            db.deleteTitle(current);
            Toast.makeText(getApplicationContext(), "CURRENT IS:" +current, Toast.LENGTH_SHORT).show();
            Toast.makeText(getApplicationContext(), "Title deleted", Toast.LENGTH_SHORT).show();
            db.close(); 
        }
    }

    private void populate() {
        db.open();
        Cursor fetchInfo = db.fetchAllRecords();
        startManagingCursor(fetchInfo);

        // Create an array to specify the fields we want to display in the list (TITLE,YEAR)
        String[] from = new String[]{DBAdapter.KEY_TITLE, DBAdapter.KEY_YEAR};

        // an array of the views that we want to bind those fields to (in this case text1,text2,text3)
        int[] to = new int[]{R.id.text1, R.id.text2};

        // Now create a simple cursor adapter and set it to display
        ListView lv = (ListView) findViewById(R.id.listView1);
        SimpleCursorAdapter aa = new SimpleCursorAdapter(MylistTab.this, R.layout.mylistview, fetchInfo, from, to);
        lv.setAdapter(aa);
        lv.setDividerHeight(5);
        db.close();
    }
} 
```

// 活动.main.xml

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost 
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost">

<LinearLayout 
android:id="@+id/LinearLayout01"
android:orientation="vertical" 
android:layout_height="fill_parent"
android:layout_width="fill_parent">

<TabWidget 
android:id="@android:id/tabs"
android:layout_height="wrap_content" 
android:layout_width="fill_parent">
</TabWidget>

<FrameLayout 
android:id="@android:id/tabcontent"
android:layout_height="fill_parent" 
android:layout_width="fill_parent">
</FrameLayout>
</LinearLayout>

</TabHost> 
```

// mylist.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/remove"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginBottom="15dp"
        android:layout_marginTop="15dp"
        android:text="@string/remove" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/remove" >

    </ListView>

</RelativeLayout> 
```

// mylistview.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="16dp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/text2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textSize="12dp"
        android:textStyle="italic" />

</LinearLayout> 
```

// 搜索.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText
        android:id="@+id/searchstring"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="15dp"
        android:ems="10"
        android:gravity="center_vertical"
        android:inputType="textAutoComplete" >
    </EditText>

    <Button
        android:id="@+id/search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/searchstring"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="14dp"
        android:text="@string/search" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/search"
        android:layout_marginTop="20dp"
        android:clickable="true"
        android:focusable="true"
        android:focusableInTouchMode="true" >
    </ListView>

    <Button
        android:id="@+id/add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/listView1"
        android:layout_alignParentLeft="true"
        android:text="@string/addTitle" />

    <Button
        android:id="@+id/similar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/listView1"
        android:layout_marginLeft="16dp"
        android:layout_toRightOf="@+id/search"
        android:text="@string/similar" />

</RelativeLayout> 
```

Now, why cant I place an intent at searchtab in the method similar() (or earlier) where I get the ID and positive of it since im using it to populate mylist like: There I get the ID by this code:

```
ListView lv = (ListView) findViewById(R.id.listView1);
lv.setOnItemClickListener(new OnItemClickListener() 
{
public void onItemClick(AdapterView<?> parent, View view, int pos, long id)      
{
Map<String, String> s = data.get((int) id);
current = s.toString(); 
```

And then just beneath it do like this:

```
Intent i = new Intent(MylistTab.this, SearchTab.class);
i.putExtra("var1", current);
startActivity(i); 
```

And in the next acitvity:

```
current = getIntent().getExtras().getString("var1"); 
```

Why is this not possible? When i do like this and run the app delete wont work saying there is a nullpointexception somewhere in mylisttab and i will get transferred around the layouts(which i dont want). Has it to do with intent-filters? Im not sure I have to use them in this scenario.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:12:22.920

Glad to hear you are embarking the Android world. Let me start by saying it is fascinating.

Answering your question, may I ask if you have any constraints for your homework? I see you have hard coded your inputs in the java files. You can (and i recommend) defining all of your screen widgets (buttons, inputs, images, etc) in a xml layout and inflate them on activity's onCreate method.

Example taken from Ioshed (Google IO app)

XML (my_activity.xml)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <TextView android:id="@+id/choose_account_intro"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp" />
</LinearLayout> 
```

Java (MyActivity.java)

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);
} 
```

Also, you could use the Fragments API which, to my understanding, is the correct way to make apps nowadays. Fragments help you modularize parts of your app's ui and behavior by creating small compoments that can be link via an activity.

Hope it helps.

# python - 从 matplotlib 中的 RGBA 函数创建颜色条

> ID：13015070
> 
> 赞同：3
> 
> 时间：2012-10-22T15:51:45.260
> 
> 标签：python, matplotlib

我正在`imshow`使用 MxNx4 数组的输入来绘制图像，这是一个`A`为矩形 MxN 网格定义的 RGBA 数组。这种着色是从`V`一个 MxN 数组生成的，该数组表示这些点中的每一个的标量值。即我有一个函数`f`，它接受一个标量值并返回一个 RGBA 元组：`f(V) = A`

我想制作一个作为输入的颜色条`f,V`。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:00:59.080

要创建彩色地图，您必须指定红/绿/蓝分量如何在线性比例上变化。看起来您已经有了一个函数，`f`它可以为您设置 r/g/b 组件。困难的部分是第 4 个通道，即 alpha 通道。我将根据您指定的 RGB 颜色图设置 alpha 通道`f`。

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.cm as cm

# some data
a = np.sort(np.random.randn(10, 10))

# use the default 'jet' colour map for showing the difference later
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
ax.imshow(a, cmap=cm.get_cmap('jet'))
fig.savefig('map1.png')

# let's use jet and modify the alpha channel
# you would use your own colour map specified by f
my_cmap = cm.get_cmap('jet')

# this is a hack to get at the _lut array, which stores RGBA vals
my_cmap._init()

# use some made-up alphas, you would use the ones specified by f
alphas = np.abs(np.linspace(-1.0, 1.0, my_cmap.N))

# overwrite the alpha channel of the jet colour map
my_cmap._lut[:-3,-1] = alphas

# plot data with our modified colour map
fig = plt.figure()
ax = fig.add_subplot(1,1,1)
ax.imshow(a, cmap=my_cmap)
fig.savefig('map2.png') 
```

这是`map1.png`：

![地图1](../Images/3d7735d037c93e51da97357a3cd2df3e.png)

这是`map2.png`：

![地图2](../Images/4b867f1a3aeef37f000b6b85fdc96cee.png)

希望这可以帮助。

# php - 仅显示打开的自定义帖子的（重复字段）图像

> ID：13015072
> 
> 赞同：1
> 
> 时间：2012-10-22T15:51:52.813
> 
> 标签：php, html, css

我正在使用以下代码显示图像（位于 ACF 的转发器字段中）：

```
<?php $query = new WP_Query( 'post_type=artworks_post&posts_per_page=-1&order=DESC' ); ?>
<?php while ( $query->have_posts() ) : $query->the_post(); ?>

<?php $slides = get_field('project_slider');// Grabs the array

    // Check if there is any data in the array before looping
    if($slides) {
        echo '<div id="slideshow">';
        echo '<ul id="slides">';
        foreach($slides as $s) {
            echo '<li>';
            echo '<img src="'.$s['project_image'].'" alt="" height="480" />';
            echo '<span>'.$s['project_title'].'</span>';
            echo '<span class="project_description">'.$s['project_description'].'</span>';
            echo '</li>';
        }
            echo '</ul>';
    }               

?>

<?php endwhile; // end of the loop. ?> 
```

问题是它显示了所有自定义帖子（artworks_post）的转发器字段的图像，而不是我在页面中查看的图像。如何将其限制为仅显示已打开帖子的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:19:36.030

您应该能够添加参数 page_id

```
<?php $query = new WP_Query( 'post_type=artworks_post&posts_per_page=-1&order=DESC&page_id=' . the_ID() ); ?> 
```

# hive - Hive：如何测试和查找空映射条目？

> ID：13015074
> 
> 赞同：13
> 
> 时间：2012-10-22T15:52:01.893
> 
> 标签：hive

如果在 Hive 表中使用映射类型，我如何测试空条目（键存在，但值为空）？

带表：

```
 test1 (id string, m map<string, string>) 
```

我有一些看起来像这样的条目：

```
id1 {"b":"B","c":null} 
id2 {"b":"B"} 
```

如果我运行查询：

> select * from test1 其中 m["c"] 为空；

我将取回两行，因为表达式每次都评估为真。

如何在键存在和值为空之间进行测试？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T15:54:33.263

我想出了2个解决方案

要查找映射实际包含特定键且其为空的行：

```
select * from test1 where array_contains(map_keys(m),'c') and m["c"] is null; 
```

要查找值为 null 的任何键：

```
select id,k from test1 LATERAL VIEW explode(m) et as k,v where v is null; 
```

# java - 我应该使用 URL 重写来防止 XSS

> ID：13015076
> 
> 赞同：0
> 
> 时间：2012-10-22T15:52:07.093
> 
> 标签：java, tomcat, xss

假设有人在浏览器中输入以下 URL：

```
http://www.mywebsite.com/<script>alert(1)</script> 
```

该页面也正常显示，并带有警报弹出窗口。我认为这应该会导致 404，但我怎样才能最好地实现呢？

我的 webapp 在 Tomcat 7 服务器上运行。现代浏览器会自动防止这种情况，但旧的浏览器，我在看你的 IE6，不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:28:01.807

听起来您实际上正在获得一个 404 页面，但该页面包含资源（在本例中为一段 JavaScript 代码）并且没有将 < 和 > 任何转换为​​它们各自的 HTML 实体。我在几个网站上看到过这种情况。

解决方案是创建一个自定义 404 页面，该页面不会将资源回显到页面，或者事先进行适当的 HTML 实体转换。您可以通过 Google 找到很多教程，这些教程应该可以帮助您做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:06:41.550

这是我所做的：

创建了一个高级 servlet 过滤器，它使用 OWASP 的 HTML sanitizer 来检查不可靠的字符。如果有的话，我会重定向到我们的 404 页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T16:04:17.263

你应该在你的 webapp 中放置一个过滤器来防止 XSS 攻击。

从 HttpServletRequest 对象中获取所有参数，并将任何参数替换为过滤器代码中以空格开头的值。

这样任何有害的 JS 脚本都不会到达您的服务器端组件。

# model-view-controller - Ember 多个控制器实例

> ID：13015077
> 
> 赞同：11
> 
> 时间：2012-10-22T15:52:07.890
> 
> 标签：model-view-controller, ember.js

我使用 Ember 已经有一段时间了，但有时仍然在努力寻找最佳实践。所以关于控制器和视图的 Ember 方法之一是

> Ember 的设计者认为，路由器强制执行的是，对于给定的 BaseName（例如“Application”、“CustomerEntry”、“My Items”）应该有一个 BaseNameView 和一个 BaseNameController。--[灰烬指南](http://emberjs.com/guides/router_primer/#toc_views-are-tightly-coupled-to-their-controllers)

问题是，如果我想要一个页面上同一视图的多个实例怎么办。由于控制器是在应用程序启动期间创建的，因此它们是应用程序命名空间下的单例，无法保存模型数据的两个实例。

我看到的一种解决方案是手动创建控制器（和模型数据）并将它们传递给视图。但在这种情况下，我希望 Ember 不会为我自动创建控制器。换句话说，为什么 Ember 会在应用程序启动期间将控制器创建为单例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:04:08.047

我认为有很多用例是 View 类型没有对应的 Controller 类型。尤其是当视图类型更像是 UI 小部件而不是成熟的应用程序功能时。许多视图可以共享同一个控制器。看看这个 applicationView 模板：

```
<h1>Here are two files, compare them</h1>
{{view App.MyFileView contentBinding="leftFileContent"}}
{{view App.MyFileView contentBinding="rightFileContent"}} 
```

这将创建我的视图类的两个实例，并将它们的内容属性绑定到 applicationController 上的两个不同属性。这两个视图的控制器属性都设置为单例 applicationController 实例。

控制器是单例的一个可能原因是它们能够在全局命名空间中通过类似`App.router.myController`.

# java - 不幸的是，应用程序已在 Android 模拟器中停止 - Eclipse

> ID：13015082
> 
> 赞同：0
> 
> 时间：2012-10-22T15:52:16.797
> 
> 标签：java, android, eclipse, android-tabhost, android-tabs

在 Eclipse 的模拟器上查看我的 Android 应用程序时，我似乎遇到了一些问题。当应用程序准备好运行时，我收到一条消息：

> 不幸的是，应用名称已停止。

这是代码：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/container"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <LinearLayout
                    android:id="@+id/tab1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <Textview
                        android:id="@+id/textview1"
                        android:layout_height="wrap_content"
                        android:layout_width="fill_parent"
                        android:text="Welcome to Ambius" >
                     </Textview>

                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/tab3"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >
                </LinearLayout>
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T13:55:51.413

为了使选项卡工作，您还需要 java 文件中的一些代码。

看看这些例子：

*   [http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android](http://www.codeproject.com/Articles/107693/Tabbed-Applications-in-Android)
*   [http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

要启用 LogCat，请转到 Window > Show View > LogCat（如果它不可见，请按 Other... 它在 Android 下分组）

# excel - VBA：从集合创建数据透视表还是使用更好的算法？

> ID：13015085
> 
> 赞同：3
> 
> 时间：2012-10-22T15:52:19.047
> 
> 标签：excel, vba, collections, pivot-table

我想知道如何，或者如果可能的话，在给定集合的情况下使用 VBA 创建一个数据透视表。或者改进我的代码的当前算法。

目前，我收藏了大约 28000 件商品。每个项目都有一个唯一的 ID、项目编号和价格。我想生成一个具有唯一 ID、价格最低的部件号的新系列。所以我在想生成数据透视表将聚合所有项目编号，并找到最低价格。然后基于该表，我可以生成一个新集合，还是应该改进我拥有的算法？

例如：

```
item[unique_id]: item number, price

Item[1]: 11111, 10
Item[2]: 22222, 2
Item[3]: 11111, 3
Item[4]: 11111, 15
Item[5]: 22222, 1
Item[6]: 33333, 2 
```

然后结果集合将类似于：

```
Item[3]: 11111, 3
Item[5]: 22222, 1
Item[6]: 33333, 2 
```

目前，我有执行以下操作来创建新集合的代码

```
For Each Item in OriginalCollection

    ' Temp item holder for comparison
    Set minItem = item
    i = 1

    Do While (i <= OriginalCollection.Count)
      if OriginalCollection(i).itemNumber = minItem.itemNumber And OriginalCollection(i).price < minItem.price Then
        Set minItem = OriginalCollection(i)

        ' reduce the size of collection, so fewer iterations
        OriginalCollection.Remove (i)
        OriginalCollection.Remove (minItem.Id)
      End if
      i = i + 1
    Loop

    If Not InCollection (MinCollection, minItem.Id) Then
        MinCollection.Add minItem, minItem.Id
    End If
Next item 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:11:38.867

每当我需要完成您的任务时，我只需按项目编号对表格进行排序，然后按价格排序。我假设您的数据在单元格 A1:C28000 中。在相邻列的单元格中，从 D2 开始，我输入公式：`=if(b2=b1,"",1)`。这告诉我项目编号何时发生变化。并且每次商品编号发生变化时，我都知道我已经找到了新商品的最便宜价格（因为每组商品编号都是按价格升序排序的）。将 D 列中的公式复制到项目列表的长度。

打开自动过滤器并过滤 D=1 列中的值。这些都是你每件商品的最低价格。（如果您的第一个项目没有重复项进行调整；即，只需添加列标题）

这种方法不使用数据透视表，但根据您的问题描述，我不确定您是否需要它们。

# list - jersey - 使用包含多个子类对象的超类列表的对象 - 子类未正确解组

> ID：13015090
> 
> 赞同：2
> 
> 时间：2012-10-22T15:52:47.337
> 
> 标签：list, jersey, subclass

我有一个`QuestionsData`类有一个列表`QuestionData`。是`QuestionData`一个抽象类，有两个实现：`TextQuestionData`和`SelectionQuestionData`.

问题是，在做之后`clientResponse.getEntity`，我得到的对象只有一个列表`SelectionQuestionData`，而我知道有些问题是类型的`TextQuestionData`。

我尝试添加`@XmlSeeAlso`，但没有帮助。我还尝试更改元素的顺序，`@XmlElementRefs`但这导致所有问题都是 type `TextQuestionData`。

我不知道这是否相关，但我在球衣中使用的对象是另一个`QuestionsData`作为成员的Jaxb 对象

这是代码：

```
@XmlRootElement(name = "questions")
@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({SelectionQuestionData.class, TextQuestionData.class })
public class QuestionsData {

    @XmlElementRefs({@XmlElementRef(type = TextQuestionData.class), @XmlElementRef(type = SelectionQuestionData.class)})
    private List<QuestionData> questions;

    private QuestionsData() {}

    public QuestionsData(List<QuestionData> questions) {
        this.questions = questions;
    }
}

@XmlRootElement(name = "question")
@XmlAccessorType(XmlAccessType.FIELD)
public class TextQuestionData extends QuestionData {

    @XmlElement
    private String someString;

    public TextQuestionData() {}
}

@XmlRootElement(name = "question")
@XmlAccessorType(XmlAccessType.FIELD)
public class SelectionQuestionData extends QuestionData {

    @XmlElements({@XmlElement(name = "option")})
    private List<String> options;

    public  SelectionQuestionData() {}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:56:19.133

在此用例中，元素名称用于确定`@XmlRootElement`在解组期间应实例化哪个子类（映射为 ）。由于您将两个子类都映射到`question`JAXB (JSR-222) 实现，因此无法确定要解组的正确子类。您需要将它们映射到不同的根元素。

**文本问题数据**

```
@XmlRootElement(name = "textQuestion")
@XmlAccessorType(XmlAccessType.FIELD)
public class TextQuestionData extends QuestionData {

    @XmlElement
    private String someString;

    public TextQuestionData() {}
} 
```

**选择问题数据**

```
@XmlRootElement(name = "selectionQuestion")
@XmlAccessorType(XmlAccessType.FIELD)
public class SelectionQuestionData extends QuestionData {

    @XmlElements({@XmlElement(name = "option")})
    private List<String> options;

    public  SelectionQuestionData() {}
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html](http://blog.bdoughan.com/2010/11/jaxb-and-inheritance-using-substitution.html)

# c# - wcf 将列表作为方法参数传递

> ID：13015096
> 
> 赞同：5
> 
> 时间：2012-10-22T15:53:09.400
> 
> 标签：c#, wcf, list, generics

我有一个 wcf 服务，它的方法如下：

```
 public void SyncClient(List<Client> client)
        {
         } 
```

然后我在一个引用此服务的 lib 解决方案中调用它，如下所示：

```
WCF.SyncClient wcfSer = new WCF.SyncClient();
 List<Client> clientModified = secondservice.Get_Clients(ModifiedDate, modifiedUnt).ToList();
wcfSer.SyncClient(clientModified); 
```

但我不断收到以下错误：

```
The best overloaded method match for 'SyncClient(SyncLib.ClientWCF.Client[])' has some invalid arguments    
cannot convert from 'System.Collections.Generic.List<SyncLib.Client>' to 'SyncLib.WCF.Client[]' 
```

我唯一要做的就是让列表填充另一个 Web 服务。

这里有什么问题，因为我传递的参数是列表并且方法接受列表，有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:57:38.633

问题是，当您在 WCF 中创建服务引用时，*默认情况下*，WCF 将为所有（非字典）集合类型使用一个数组。这将导致在服务中定义一个方法，如下所示：

```
public void SyncClient(List<Client> client)
{ 
```

在服务参考中映射为：

```
public void SyncClient(Client[] client) 
```

这是一个可配置的选项 - 在“创建服务引用”对话框中，您可以让 WCF 使用 a`List<T>`而不是数组，在这种情况下您的代码将起作用。

`ToArray()`或者，如果您愿意，可以在调用服务引用时将对象转换为数组（通过）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T15:59:53.410

这取决于您添加服务引用的方式。

您可以修改代码以发送 client[]

```
WCF.SyncClient wcfSer = new WCF.SyncClient();
 var clientModified = secondservice.Get_Clients(ModifiedDate,
    modifiedUnt).ToArray();
wcfSer.SyncClient(clientModified); 
```

或重新添加引用并选择使用 System.Collection.Generic.List 的选项，如下所示；

```
Select Add Reference
Select URL
Select Advanced when you have found the service.
In Datatype, you will see these options. 
```

选择集合类型为`System.Collection.Generic.List`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T15:56:37.183

你可以试试这个：

```
WCF.SyncClient wcfSer = new WCF.SyncClient();
 Client[] clientModified = secondservice.Get_Clients(ModifiedDate, modifiedUnt).ToArray();
wcfSer.SyncClient(clientModified); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T15:58:30.480

当您在 Visual Studio 中添加服务引用以创建代理时，可能会发生这种情况。服务参考设置的数据类型部分有一个集合类型的下拉列表。检查它是否设置为`System.Collections.Generic.List`或`System.Array`。

除此之外，如果您有对定义合同的程序集的引用，您还可以检查`Reuse types in referenced assemblies`哪个将具有生成的代理以使用提供的程序集而不是创建新类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T16:30:12.337

我的建议...不要使用 Visual Studio 生成代理类。如果您在 WCF 库中拥有所有对象和接口（没有实际的服务实现，因为无论如何这应该是分开的）为什么不直接扔进客户端并直接访问它。这就是你所要做的...

```
public class MyWCFClient:ClientBase<IMyWCFServiceContract>, IMyWCFServiceContract
{
    //Implement the interface and call the channel
    public void SyncClient(List<Client> clients)
    {
        this.Channel.SyncClient(clients);
    }
} 
```

然后砰！您有您的代理（客户端），并且您正在重新利用您创建的所有 DataContract 类，以包含您可能想要利用的任何方法！查看[此 CodeProject](http://www.codeproject.com/Articles/33297/WCF-Proxy-Generation-Options)以了解更多信息。这不仅解决了我遇到的一个非常相似的问题，而且还让我的 DataContract 对象更加灵活，因此我可以将它们用于传递数据的更多用途。

这种方法也可以让您在处理多个服务时避免麻烦，因为 VS 服务生成器喜欢创建一些与您当前命名空间相关的命名空间。如果你有图书馆，那就发疯。

如果您无权访问这些库，请不要完全忽视，因为您可以通过上述[CodeProject 文章](http://www.codeproject.com/Articles/33297/WCF-Proxy-Generation-Options)中描述的方法生成代码并自定义代码（包括命名空间）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-23T07:50:45.587

试试这个：

```
StreamReader reader = new StreamReader(JSONdataLogin);
string JSONdata = reader.ReadToEnd();
JavaScriptSerializer jss = new JavaScriptSerializer();
List<WsShoeClass> OBJ = jss.Deserialize<List<WsShoeClass>>(JSONdata); 
```

* * *

```
foreach (var Images in OBJ)
{  
    SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["conn"].ConnectionString);
    SqlCommand cmd = new SqlCommand("sp_UploadShoeImage", con);
    cmd.CommandType = System.Data.CommandType.StoredProcedure;
    cmd.Parameters.Add(new SqlParameter("@UserId", Images.UserId));
    cmd.Parameters.Add(new SqlParameter("@ShoeId", Images.ShoeId));
    cmd.Parameters.Add(new SqlParameter("@ShoeImage", Images.ShoeImage));
    con.Open();
    SqlDataAdapter ad = new SqlDataAdapter(cmd);
    DataSet ds = new DataSet();
    ad.Fill(ds);
} 
```

# python - 如何在 mayavi2 中缩放 x 和 y 轴？

> ID：13015097
> 
> 赞同：9
> 
> 时间：2012-10-22T15:53:12.347
> 
> 标签：python, scale, surf, axes, mayavi

我想用 mayavi.mlab.surf() 用 mayavi2 做一个 3-d 绘图。该函数有一个名为 warp_scale 的参数，可用于缩放 z 轴，我正在寻找类似的东西，但用于 x 和 y 轴。

我可以通过将 x 和 y 数组相乘然后使用 mayavi.mlab.axes() 中的范围参数来更正轴标签来手动执行此操作，但是我正在寻找一种更直接的方法，例如 warp_scale。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-08T06:49:15.797

当“m”是您的表面对象时：

```
m.actor.actor.scale = (0.1, 1.0, 1.0) 
```

[http://osdir.com/ml/python.enthought.devel/2006-11/msg00067.html](http://osdir.com/ml/python.enthought.devel/2006-11/msg00067.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-16T20:06:35.863

我一直在寻找相同的功能。事实证明你根本做不到，

[http://comments.gmane.org/gmane.comp.graphics.mayavi.user/630](http://comments.gmane.org/gmane.comp.graphics.mayavi.user/630)

# ajax - 如何通过 Ajax 使用换行符更新文本区域？

> ID：13015098
> 
> 赞同：0
> 
> 时间：2012-10-22T15:53:20.933
> 
> 标签：ajax, jquery

我正在拼命尝试使用 Ajax 更新文本区域：

应用程序.js：

```
$("#invoice_project_id").change(function() {
    var value=$(this).val();
    $.get('/invoices/get_recipient', {project_id= : value}  function(response) {
        $('#invoice_recipient').val(response);
    })
});​ 
```

get_recipient.js：

```
$('#invoice_recipient').val("<%= @recipient %>"); 
```

当包含换行符的值被插入到 textarea 中时，代码停止工作。

例如，当插入一个简单的单行值时，我在控制台上得到了这个：

```
$('#invoice_recipient').val("123 Evergreen Terrasse"); 
```

这是正确的并且完美地工作。

但是，当尝试插入一个包含换行符的值时，我在控制台上得到了这个：

```
$('#invoice_recipient').val("65341 Bruen Brooks
East Charityville"); 
```

（注意之后的换行符`Brooks`可能会导致 JavaScript 终止代码。）

有没有办法解决这个问题，也许是通过从值中删除换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:59:36.930

好的，看来我在这里找到了解决方案，感谢[这篇博文](http://databasically.com/2009/03/18/updating-textarea-with-ajax-unterminated-string-literal/)。

而不是这个：

```
$('#invoice_recipient').val("<%= @recipient %>"); 
```

我现在正在这样做：

```
$('#invoice_recipient').val("<%= @recipient.to_s.gsub!(/\n/, '\n') %>"); 
```

该`gsub!()`函数只是用其他换行符 (?) 替换换行符，令人惊讶的是，它可以工作，尽管它本身有一些弱点。

感谢大家在这里帮助我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:03:38.960

好吧，看起来很奇怪，但我不知道你是怎么得到这个的：

```
$('#invoice_recipient').val("65341 Bruen Brooks
East Charityville"); 
```

`javascript`您是否从其他代码自动生成`server-side`代码？

*（也许你的价值太长了，导致这种情况发生，但我第一次看到这样的东西）*

* * *

似乎我回答自己是因为你正在这样做。所以，我的解决方案很简单，但可以提供帮助，你为什么不把 long 值首先放在一个变量中，然后将它传递给`.val()`这样的：

```
var longText = "this is a looooooooooooooooooooooooooooooooooooooooooooooooooong text that may cause problems"; 
$('#invoice_recipient').val(longText); 
```

`longText`是这样获得的`<%= @recipient %>`：

`var longText = "<%= @recipient %>";`

这样做可以避免任何可能产生`server-side`导致`javascript`代码问题的值的断线。

* * *

我为你做了这个：

[http://jsfiddle.net/oscarj24/HssgJ/](http://jsfiddle.net/oscarj24/HssgJ/)

如您所见，长值在 a 内`textbox`，与隔断线无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:08:38.697

使用挤压

```
%{ Multi-line
   string }.squish                   # => "Multi-line string" 
```

[http://apidock.com/rails/String/squish](http://apidock.com/rails/String/squish)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:06:52.957

你可以试试：

```
$('#invoice_recipient').val(encodeURIComponent("<%= @recipient %>")); 
```

虽然，不确定你在找什么。

# git - 如何以编程方式预测 git push 何时会导致“分支当前已签出”错误？

> ID：13015101
> 
> 赞同：1
> 
> 时间：2012-10-22T15:53:22.690
> 
> 标签：git, sync

我正在编写[一个 shell 脚本，以自动将本地分支与其上游分支同步](https://github.com/aspiers/git-config/blob/master/bin/git-sync-upstream)。它通过以下方式做到这一点：

*   首先检查本地没有未提交的更改，然后
*   从上游获取任何丢失的提交，
*   进行合并（或变基），最后
*   [将结果推回上游](https://github.com/aspiers/git-config/blob/master/bin/git-sync-upstream#L209)​​。

问题是，如果上游是非裸的[`! [remote rejected] master -> master (branch is currently checked out)`](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)，由于默认值为`receive.denyCurrentBranch`. 因此，我想提前以编程方式预测推送是否会以这种方式失败，以便我可以使用不同的 refspec（例如`$branch:refs/remotes/$src/$branch`）进行推送。这至少可以保证远程包含最新的提交，即使它们不在远程的工作树中。

这可以按如下方式完成：

*   连接到远程服务器
*   跳过一些箍来计算远程仓库的绝对路径，然后`chdir`到它
*   执行`git config core.bare`
*   如果它返回，`true`那么我们知道我们不会`[remote rejected]`在推送时收到错误
*   如果返回`false`，则执行另一个命令以确定当前在远程上[签出的分支，以查看它是否与正在推送的分支匹配](https://stackoverflow.com/questions/1417957/show-just-the-current-branch-in-git)

但这假设`ssh`（或其他一些远程机制）可用于在远程端执行任意命令，并且它也需要计算远程存储库的绝对路径，因此它不是一个干净的、普遍适用的解决方案。

另一种选择是尝试推送，以这种方式发现失败，然后使用修改后的 refspec 重试。但这也有点难看。有更清洁的解决方案吗？

# linux - 安装了一个 RPM 文件。在哪里可以找到已安装的程序？

> ID：13015103
> 
> 赞同：0
> 
> 时间：2012-10-22T15:53:32.700
> 
> 标签：linux, fedora, rpm

我已经在我的 Fedora Linux 机器上安装了[xmedcon-0.11.0-1.i686.rpm 。](http://xmedcon.sourceforge.net/)我运行了`RPM`文件。由于我是 Linux 新手，所以我想问一下，在哪里可以找到已安装的文件以及如何运行它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:06:22.463

从终端使用

```
$ rpm -ql xmedcon-0.11.0-1.i686 </code>
/etc/xmedconrc
/usr/bin/medcon
/usr/bin/xmedcon 
```

您将看到安装的所有文件。主要文件将在上面。从命令行运行

```
$ /usr/bin/xmedcon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:32:52.483

如果您已经知道命令名称，您可以在终端中键入**which medcon**，它应该会告诉您可执行文件的位置。

正如 full.stack.xchg 所说，只需在命令行上输入可执行文件的名称（或在图形菜单中找到它）即可启动程序。

# mysql - 搜索多个百分号

> ID：13015106
> 
> 赞同：1
> 
> 时间：2012-10-22T15:53:40.680
> 
> 标签：mysql, sql

我正在尝试在内容中查找 '%%' 字符串。

```
SELECT * FROM myTable WHERE myColumn LIKE '%\%\%%' 
```

但它也会返回**仅找到一个**百分号的行。

如何只找到存在两个百分号的行？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:01:03.753

你也可以用**[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)**这个，

```
SELECT *
FROM table1
WHERE str REGEXP '%%' 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/1c46f/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T15:56:49.253

如果您确实只是在寻找文字`%`并且不需要通配符，那么使用 会变得更简单[`LOCATE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)，其中`%`将被解析为不需要转义的文字。

```
SELECT * FROM myTable WHERE LOCATE('%%', myColumn) > 0; 
```

# r - 给指定区域着色？

> ID：13015110
> 
> 赞同：4
> 
> 时间：2012-10-22T15:53:57.653
> 
> 标签：r, geometry

我想弄清楚是否有一种方法可以只为我使用 grid.circle 创建的半个圆圈着色。

```
 library(grid)
    grid.circle(x=.5, y=.5, r=.25,gp=gpar(lwd=10)) 
```

我想让上半部分变成蓝色，下半部分留下白色。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:25:15.177

Using `grid.polygon()` and some basic trigonometry, you can define a function that'll do this

Some picky care needs to be taken so that the filled semicircle is not distorted when the viewport is non-square. To accomplish this in a way that matches the rules used by `grid.circle()`, I've set the origin in `"npc"` units, and the circle radius in `"snpc"` units. (For more on the meanings of `"npc"` and `"snpc"`, see `?unit` and `vignette("grid")`):

```
library(grid)

filledSemiCircle <- function(x_origin, y_origin, radius, fillcolor, top=TRUE) {
    theta <- seq(0, pi, length = 100)
    if(!top) theta <- theta + pi     ## To fill the bottom instead
    x <- unit(x_origin, "npc") + unit(cos(theta) * radius, "snpc")
    y <- unit(y_origin, "npc") + unit(sin(theta) * radius, "snpc")
    grid.polygon(x, y, gp = gpar(fill = fillcolor))
}

filledSemiCircle(0.5, 0.5, 0.25, "dodgerblue")
filledSemiCircle(0.5, 0.5, 0.25, "gold", top=FALSE)
grid.circle(x = .5, y=.5, r=.25,gp=gpar(lwd=10)) 
```

![enter image description here](../Images/a60621baa95888525d60292b9c8afed9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:59:59.837

这是对 Josh 创造填充和弦的出色作品的修改的初稿：

```
filledArc <- function(x_origin, y_origin, radius, fillcolor, top=TRUE) {
    theta <- seq(0, pi/2, length = 100)
    if(!top) theta <- theta + pi     ## To fill the bottom instead
    x <- unit(x_origin, "npc") + unit(c(0, cos(theta) * radius, 0), "snpc")
    y <- unit(y_origin, "npc") + unit(c(0, sin(theta) * radius, 0), "snpc")
    grid.polygon(x, y, gp = gpar(fill = fillcolor))
}

filledArc(0.5, 0.5, 0.25, "lightgoldenrod")
filledArc(0.5, 0.5, 0.25, "blue", top=FALSE)
grid.circle(x = .5, y=.5, r=.25,gp=gpar(lwd=10)) 
```

![在此处输入图像描述](../Images/034fae080b92b9be2c8c880458711fee.png)

我认为需要做一些进一步的工作才能通过开始和结束 theta（完成）来使其参数化：

```
filledArc2 <- function(x_origin, y_origin, radius, fillcolor, angle0, angle1) {
    theta.range <- seq(angle0, angle1, length = 100)
    x <- unit(x_origin, "npc") + unit(c(0, cos(theta.range) * radius, 0), "snpc")
    y <- unit(y_origin, "npc") + unit(c(0, sin(theta.range) * radius, 0), "snpc")
    grid.polygon(x, y, gp = gpar(fill = fillcolor))
}

filledArc2(0.5, 0.5, 0.25, "lightgoldenrod", 0,      pi/4)
filledArc2(0.5, 0.5, 0.25, "blue",           pi/4,   pi*(3/2) )
grid.circle(x = .5, y=.5, r=.25,gp=gpar(lwd=10)) 
```

![在此处输入图像描述](../Images/2e02d021a7df83b293162b51369f0b9b.png)

# ios - 从图像文件夹加载数组 - xcode

> ID：13015111
> 
> 赞同：2
> 
> 时间：2012-10-22T15:53:59.167
> 
> 标签：ios, xcode, arrays, image

我在将图像从文件加载到数组中时遇到了一些问题。我已经使用了我在这里找到的问题的组合，并且没有想法......我对objective-c很陌生，对其余的也很陌生。

我的 viewDidLoad 只是调用我的 showPics 方法，为了测试，我让 _imgView 只显示数组中位置 1 的图像。

这很可能是我显示图像的方式的问题。我的 Storyboard 中有一个 ViewController 和一个 ImageView（标题为：imgView）。

这是我的 showPics 方法：

```
-(void)showPics
{
    NSArray *PhotoArray = [[NSBundle mainBundle] pathsForResourcesOfType:@"jpg" inDirectory:@"Otter_Images"];
    NSMutableArray *imgQueue = [[NSMutableArray alloc] initWithCapacity:PhotoArray.count];
    for (NSString* path in PhotoArray)
    {
        [imgQueue addObject:[UIImage imageWithContentsOfFile:path]];
    }
    UIImage *currentPic = _imgView.image;
    int i = -1;

    if (currentPic != nil && [PhotoArray containsObject:currentPic]) {
        i = [PhotoArray indexOfObject:currentPic];
    }

    i++;
    if(i < PhotoArray.count)
        _imgView.image= [PhotoArray objectAtIndex:1];

} 
```

这是我的viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self showPics];
} 
```

这是我的 ViewController.h

```
@interface ViewController : UIViewController
@property (weak, nonatomic) IBOutlet UIImageView *imgView;

@end 
```

如果您需要其他任何东西，请告诉我，并提前感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:29:00.060

在您的`showPics`方法中，除了最初的“for-loop”之外，您对的所有引用都`PhotoArray`应该是对`imgQueue`. `PhotoArray`是路径名列表。`imgQueue`是实际`UIImage`对象的数组。

```
-(void)showPics {
    NSArray *PhotoArray = [[NSBundle mainBundle] pathsForResourcesOfType:@"jpg" inDirectory:@"Otter_Images"];
    NSMutableArray *imgQueue = [[NSMutableArray alloc] initWithCapacity:PhotoArray.count];
    for (NSString* path in PhotoArray) {
        [imgQueue addObject:[UIImage imageWithContentsOfFile:path]];
    }

    UIImage *currentPic = _imgView.image;
    int i = -1;

    if (currentPic != nil && [imgQueue containsObject:currentPic]) {
        i = [imgQueue indexOfObject:currentPic];
    }

    i++;
    if(i < imgQueue.count) {
        _imgView.image = [imgQueue objectAtIndex:1];
    }
} 
```

# c# - WPF 自定义控件属性 - 分配对象，例如页面

> ID：13015112
> 
> 赞同：0
> 
> 时间：2012-10-22T15:54:03.467
> 
> 标签：c#, wpf

是否可以在自定义控件中存储对页面的引用，以便在单击控件时加载页面（如自定义菜单项）？

到目前为止我的代码：

```
public class ccMenuItem : Button
{
     public static readonly DependencyProperty TitleProperty = DependencyProperty.Register("Title", typeof(string), typeof(Control));
     public static readonly DependencyProperty BackColorProperty = DependencyProperty.Register("BackColor", typeof(SolidColorBrush), typeof(Control), new UIPropertyMetadata(Brushes.White));
     public static readonly DependencyProperty PageProperty = DependencyProperty.Register("Page", typeof(Page), typeof(Control));

     public Page Page
     {
         get { return (Page)GetValue(PageProperty); }
         set { SetValue(PageProperty, value); }
     }

    public string Title
    {
        get { return GetValue(TitleProperty).ToString(); }
        set { SetValue(TitleProperty, value); }
    }

    static ccMenuItem()
    {

        DefaultStyleKeyProperty.OverrideMetadata(typeof(ccMenuItem), new FrameworkPropertyMetadata(typeof(ccMenuItem)));
    }
} 
```

代码可以编译，但是我如何将一个页面（比如这个类称为 vpn）分配给 XAML 中的 Page 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:05:07.823

如果您的“应用程序”使用的是 a`NavigationWindow`而不是`Window`，那么您可以访问`NavigationService`并告诉它更改页面。

```
protected override void OnClick()
{
    NavigationService ns = NavigationService.GetNavigationService(this);

    ns.Navigate( Page );
} 
```

# svd - 奇异值分解算法

> ID：13015113
> 
> 赞同：2
> 
> 时间：2012-10-22T15:54:09.287
> 
> 标签：svd

我正在尝试使用 numpy 库（numpy-MKL-1.6.2.win-amd64-py2.7）中的奇异值分解算法，但我建议这个函数不正确。该函数有以下语句：

```
from numpy.linalg import *

U, S, V = svd(A, full_matrices=0) 
```

我的假设是基于与 Matlab 中相同函数的比较比较，它给出了正确的答案。我还发现了与V矩阵计算错误有关的问题。

例如，我有矩阵 A：

```
A =[-15.5714,   19.2143,   15.0000; -2.8462,    7.7692,   -3.9615; -19.5000,   3.1111,    4.5556] 
```

在 python 中，我收到：

```
V = [0.7053,  -0.5629,   -0.4308; -0.6863,   -0.6945,   -0.2161; -0.1776,    0.4481,   -0.8762] 
```

在 Matlab 中：

```
V = [0.7053,   -0.6863,   -0.1776; -0.5629,   -0.6945,    0.4481; -0.4308,   -0.2161,   -0.8762] 
```

差异并不那么明显，但它们在 LLS 计算期间变得至关重要。我该如何克服这个问题？

好的，我找到了答案： [U,S,V]=svd(a) - Matlab U, S, Vh = linalg.svd(a), V = Vh.T - Python 也许我的问题对未来的人有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:07:40.743

您的 Matlab`V`矩阵和 numpy`V`矩阵是彼此的转置。

您可以使用[transpose()](http://docs.scipy.org/doc/numpy/reference/generated/numpy.transpose.html)函数来获取转置版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-14T21:12:44.383

奇异值分解中的域矩阵**U**和**V**不是唯一的，因此很难比较不同数学引擎的结果。（奇异值矩阵是唯一的。不幸的是，它没有发布。）

快速质量检查是查看域矩阵的列向量。由于这些矩阵是单一的，因此每个列向量在 2 范数中具有单位长度。对于 python 结果，这些规范是 (0.999947, 1.00002, 1.00003); 对于 MATLAB，我们得到了更好的结果（0.999999、0.99999、1.00001）。Mathematica 以 (1.0000000000000002, 1.0000000000000004, 1.0000000000000000) 超越了这一点。

• 附录：SVD 对齐域和共域的向量空间。可能只有一种对齐方式。可能有一组离散的对齐角度。可能有一组连续的角度，如下所示：

![在此处输入图像描述](../Images/52441a5ed2370a567cb641cf59449d75.png)

# c++ - CCSpriteFrameCache 无法正确检索带有“-ipad”后缀的图像

> ID：13015127
> 
> 赞同：0
> 
> 时间：2012-10-22T15:54:56.023
> 
> 标签：c++, ios, cocos2d-iphone, cocos2d-x

我使用 制作了两组精灵表`TexturePacker`，一组称为`objects-0.plist`/`objects0-png`和`objects-0-ipad.plist`/ `objects-0-ipad.png`。他们每个人都有以下图像：

```
// objects-0.plist / objects-0.png
object-0-0.png : 50x50 PNG file
object-0-1.png : 50x50 PNG file
object-0-2.png : 50x50 PNG file

// objects-0-ipad.plist / objects-0-ipad.png
object-0-0-ipad.png : 100x100 PNG file
object-0-1-ipad.png : 100x100 PNG file
object-0-2-ipad.png : 100x100 PNG file 
```

我已经`CCSpriteFrameCache`像这样加载了这些：

```
bool AnimTest::init( ) {
    if ( !CCLayer::init( ) ) return false;

    CCSpriteFrameCache::sharedSpriteFrameCache( ) -> addSpriteFrameWithFile( "objects-0.plist" );
} 
```

然后，我尝试`CCSprite`使用文件中的一个文件制作一个对象`.plist`。

```
bool AnimTest::init( ) {
    if ( !CCLayer::init( ) ) return false;

    CCSpriteFrameCache::sharedSpriteFrameCache( ) -> addSpriteFrameWithFile( "objects-0.plist" );

    CCSprite * testSprite = CCSprite::createWithSpriteFrameName( "object-0-0.png" );
    this -> addChild( testSprite );

    return true;
} 
```

如果我从 iPod/iPhone 运行这个，它工作正常。但是，如果我从 iPad 运行它，则会`CCSprite::createWithSpriteFrameName( )`抛出`assert`文件名无效的说法。

但是，如果我明确使用带有`-ipad`后缀的文件，它可以正常工作，没有错误，这是应该的。

```
bool AnimTest::init( ) {
    if ( !CCLayer::init( ) ) return false;

    CCSpriteFrameCache::sharedSpriteFrameCache( ) -> addSpriteFrameWithFile( "objects-0-ipad.plist" );

    CCSprite * testSprite = CCSprite::createWithSpriteFrameName( "object-0-0-ipad.png" );
    this -> addChild( testSprite );

    return true;
} 
```

我怎样才能解决这个问题？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:04:41.207

在写这个问题时想到了一个想法，我只在它被发送并且它工作时测试过。

问题是我直接从文件名中检索 Sprite Frame。意思是，我正在检索`objects-0-0.png`并且`cocos2d-x`不会自动使用后缀版本。因此，知道了这一点，我重新制作/重新编写了`.plist`文件，以便两个文件（一个带后缀，一个不带后缀）具有相同的图像文件名，但图像完全不同。`.plist`文件和spritesheets`.png`都带有后缀。

代替：

```
// objects-0.plist / objects-0.png
object-0-0.png : 50x50 PNG file
object-0-1.png : 50x50 PNG file
object-0-2.png : 50x50 PNG file

// objects-0-ipad.plist / objects-0-ipad.png
object-0-0-ipad.png : 100x100 PNG file
object-0-1-ipad.png : 100x100 PNG file
object-0-2-ipad.png : 100x100 PNG file 
```

将里面的所有文件重命名`.plist`为不使用后缀的文件。

```
// objects-0.plist / objects-0.png
object-0-0.png : 50x50 PNG file
object-0-1.png : 50x50 PNG file
object-0-2.png : 50x50 PNG file

// objects-0-ipad.plist / objects-0-ipad.png
object-0-0.png : 100x100 PNG file
object-0-1.png : 100x100 PNG file
object-0-2.png : 100x100 PNG file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:07:48.340

你用的是什么版本的 cocos2d-x？由于不支持 2.0.2 版本后缀，因此您应该针对文件名中的后缀使用不同设备的目录。您可以[在此处](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Mechanism_of_loading_resources)和 cocos2dx 示例中查看详细信息。

# javascript - 选择随机列表项并添加类

> ID：13015128
> 
> 赞同：2
> 
> 时间：2012-10-22T15:54:55.023
> 
> 标签：javascript, jquery, html-lists

目前我有一个带有菜单 id 的无序列表，并且这个 ul 中的一个列表项有一个“选定”类我想做的是从 ul 中获取所有列表项并从中删除初始选定的类每次刷新页面时，它所在的列表项然后将其分配给同一 ul 中的不同列表项。

这可能吗？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:03:40.403

```
$(document).ready(function() {

    var $ulLen = $('#menu li').length;

    $('#menu li').removeClass('selected'); // Remove the class

    // Select random li..

    var rand = Math.floor( (Math.random()* $ulLen ) );  // Select  a random li..

     $('#menu li:eq('+ rand + ')').addClass('selected'); 

     // Add the selected class to randomly selected li...

}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/QYC8w/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:08:28.940

[http://jsfiddle.net/eWbqa/8/](http://jsfiddle.net/eWbqa/8/)

```
var menu = document.getElementById('menu');
var tags = menu.getElementsByTagName('li');

tags[Math.floor(Math.random() * tags.length)].setAttribute('class', 'selected'); 
```

您可以对此进行扩展，但这可以做到。

*编辑以反映 Naveen 的好建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:06:46.257

这可能会写得更短，但我希望它更详细，以便您可以看到这些步骤。从技术上讲，这可以两次选择同一个。如果您愿意，您可以使用 LocalStorage 或 cookie 来记住最后一项而不是再次选择它。我追求简单。

```
<!DOCTYPE html> 
<html>
<head>
    <title>Demo</title> 
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script>

    $(document).ready(function() {

        //remove the selected class from the li that has it
        $("li.selected").removeClass("selected");

        //get all the LIs
        var menuItems = $("ul#menu li");
        //How many do we have?
        var numItems = menuItems.length;
        console.log(numItems);
        //Pick one by randm
        var selected = Math.floor(Math.random()*numItems);
        console.log(selected);
        //And set it
        $("ul#menu li:nth-child("+(selected+1)+")").addClass("selected");
    });
    </script>

    <style>
        li.selected { background-color: red; }
    </style>
</head> 

<body> 

<ul id="menu">
    <li>Item one</li>
    <li>Item two</li>
    <li>Item three</li>
    <li class="selected">Item four</li>
    <li>Item five</li>
</ul>

</body>
</html> 
```

# sql - 如果所有列值都为真，则返回真

> ID：13015130
> 
> 赞同：17
> 
> 时间：2012-10-22T15:55:14.717
> 
> 标签：sql, postgresql, aggregate-functions, exists, boolean-logic

在 PostgreSQL 中是否有更快的方法来本质上在几行上执行 if ？

说我有一张桌子

```
ticket | row | archived
1      | 1   | true
1      | 2   | true
1      | 3   | true
2      | 1   | false
2      | 2   | true 
```

有什么办法可以在票 = 的列下方做一个 if 语句？因此，其中票 = 1 将是正确的，因为

```
true && true && true = true 
```

其中ticket = 2 将是错误的，因为

```
false && true = false 
```

还是我应该坚持

```
SELECT ( (SELECT COUNT(*) FROM table WHERE ticket = 1)
       = (SELECT COUNT(*) FROM table WHERE ticket = 1 AND archived = true) ) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-22T17:07:57.123

### 聚合函数[`bool_and()`](https://www.postgresql.org/docs/current/functions-aggregate.html)

简单、简短、清晰：

```
SELECT bool_and(archived)
FROM   tbl
WHERE  ticket = 1; 
```

[手册](https://www.postgresql.org/docs/current/functions-aggregate.html)：

> 如果所有输入值都为真，则为真，否则为假

### 子查询表达式[`EXISTS`](https://www.postgresql.org/docs/current/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)

就像[@Mike 提供](https://stackoverflow.com/a/13015314/939860)的一样。

快点。但是您必须另外检查是否`ticket = 1`存在任何行，否则您将得到不存在票证的错误结果：

```
SELECT EXISTS (SELECT 1 FROM tbl WHERE ticket=1)
       AND NOT
       EXISTS (SELECT 1 FROM tbl WHERE ticket=1 AND archived = FALSE); 
```

### 指数

两种形式都可以并且将使用如下索引：

```
CREATE index tbl_ticket_idx ON tbl (ticket); 
```

..这使得两者都快，但`EXISTS`查询*速度更快*，因为一旦找到第一个匹配行，这种形式就可以停止扫描。这两个查询之间几乎没有任何区别，每张票只有几行，但每张票有很多行有*很大*的不同。

要在 pg 9.2 中使用**仅索引扫描**，您需要一个格式如下的[**多列索引**](https://www.postgresql.org/docs/current/indexes-multicolumn.html)：

```
CREATE index tbl_ticket_archived_idx ON tbl (ticket, archived); 
```

在大多数情况下和任何版本的 PostgreSQL 中，~~这个~~都更好**。**由于[数据对齐](https://stackoverflow.com/a/7431468/939860)，在索引中添加 a根本不会使索引增长。几乎没有任何成本的额外好处。~~`boolean``integer`~~

 ~~但是，索引列会阻止 HOT（仅堆元组）更新。比如说， an`UPDATE`只改变了 column `archived`。如果该列未被任何索引（以任何方式）使用，则该行可以被热更新。否则不能走这条捷径。更多关于热门更新：

*   [更新语句中的冗余数据](https://stackoverflow.com/questions/7806058/redundant-data-in-update-statements/7806610#7806610)

这一切都取决于您的实际工作量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T16:05:29.710

怎么样：

```
select not exists (select 1 from table where ticket=1 and not archived) 
```

我认为这可能比比较计数更有利，因为`count` [可能会或可能不会使用索引](http://wiki.postgresql.org/wiki/Slow_Counting)，实际上您只需要知道该票是否存在*任何行。* `FALSE`我认为仅仅创建一个部分索引`ticket`可能会非常快。

[SQL小提琴](http://www.sqlfiddle.com/#!1/84a65/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:12:33.357

```
select not false = any (
        select archived
        from foo
        where ticket = 1
    ) 
```

[SQL小提琴](http://www.sqlfiddle.com/#!1/84a65/9)~~

# javascript - 如何使用jstree添加文件图标？

> ID：13015133
> 
> 赞同：2
> 
> 时间：2012-10-22T15:55:44.790
> 
> 标签：javascript, jquery, jstree

我在下面有以下代码，单击 add_file ($("#treeFile").jstree("create")); 时需要在 jstree 文件结构中添加一个 file.png 图标。

```
 $("#treeFile").jstree({
                "plugins" : ["themes","html_data","ui","crrm","types"],
                "types" : {
                        "max_depth" : -2,
                        "max_children" : -2,
                        "valid_children" : [ "drive" ],
                        "types" : {
                                "default" : {
                                        "valid_children" : "none",
                                        "icon" : { "image" : "/tree/_demo/file.png"}
                                                         }
                              }
                      }   
                })
                    .bind("select_node.jstree", function (event, data) {

    });

$("#treeMenu li").click(function()
{
    if($(this).text() == "add_file")
    {
        $("#treeFile").jstree("create");

    }else if($(this).text() == "add_folder")
    {
        $("#treeFile").jstree("create");

    }else if($(this).text() == "rename")
    {
        $("#treeFile").jstree("rename");

            }else if($(this).text() == "remove")
    {
        $("#rootNode").jstree("remove");
    }else
    {} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-22T17:32:37.400

`'icon': 'jstree-file'`向节点添加属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:05:00.497

jstree 方法添加 type 属性以显示文件图标的语法如下：

$("#treeFile").jstree("create", null, "inside", { attr : { "rel" : "file"}});

问题代码将“默认”更改为“文件”

# java - 如何在哈希图中输入元素并检查特定键的存在？

> ID：13015135
> 
> 赞同：-2
> 
> 时间：2012-10-22T15:55:54.657
> 
> 标签：java

我正在尝试读取 csv 文件并将其内容存储在哈希图中，并检查哈希图中是否存在特定键。

这是我的代码，请让我知道我错在哪里，因为我无法找出我的错误

```
import java.io.*;

import java.text.SimpleDateFormat;

import java.util.*;

public class PoolCsv {

    public static void main(String[] args) {

        try {

            Calendar currentdate = Calendar.getInstance();
            SimpleDateFormat dateformat = new SimpleDateFormat("yyyy-MM-dd");
            String presdate = dateformat.format(currentdate.getTime());
            currentdate.add(Calendar.DAY_OF_YEAR, 4);
            String futdate = dateformat.format(currentdate.getTime());
            System.out.println(presdate);
            System.out.println(futdate);
            String poolcsv = "D:\\pool_items.csv";
            BufferedReader br = new BufferedReader(new FileReader(poolcsv));
            String lines = null;
            String[] tokens = null;
            String startdate = null;
            String enddate = null;
            HashMap<String, String> hash = new HashMap<String, String>();
            while ((lines = br.readLine()) != null) {
                tokens = lines.split(",");
                for (int i = 0; i <= tokens.length; i++) {
                    startdate = tokens[5];
                    enddate = tokens[6];
                }

                hash.put(startdate, enddate);

                boolean flag = hash.containsKey(presdate);
                if (flag) {
                    System.out.println("value exists");
                }
            }

        } catch (IOException io) {
            System.out.println(io);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:58:57.717

```
boolean flag = hash.containsKey(presdate);
if(flag){
    System.out.println("value exists");
} 
```

这应该是`outside the loop`您填充地图的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:38:11.723

我不知道你到底想做什么，但 FOR 循环真的很少见，你循环遍历所有标记，但总是得到位置 5 和 6，所以那里不需要 for，只得到这两个位置从每个令牌。

```
 while ((lines = br.readLine()) != null) {
            tokens = lines.split(",");
            //I dont think you neeed this for.
            for (int i = 0; i <= tokens.length; i++) {
                startdate = tokens[5];
                enddate = tokens[6];
            }

            hash.put(startdate, enddate);

            boolean flag = hash.containsKey(presdate);
            if (flag) {
                System.out.println("value exists");
            }
        } 
```

如果您打印 presdate 和 startdate 以确保两个字符串具有相同的格式，也许您可​​以获得一些信息。yyyy-MM-dd（注意分隔符）和字符串实际上是相等的，因此 ContainsKey 可以在地图上找到该键。

# php - Yii 假表单漏洞

> ID：13015137
> 
> 赞同：0
> 
> 时间：2012-10-22T15:55:58.693
> 
> 标签：php, yii

如果用户伪造表单并将输入更改为 ROLE，他可以更改数据库中的该字段。如何保护 Yii 表单免受虚假输入的影响？

模型用户.php

```
array('role', 'numerical', 'integerOnly'=>true), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:01:42.667

您不能“保护表格”。您需要通过会话或其他一些存储状态的方法将该数据从客户端（即表单）移动到服务器（即 php）。

只要用户的机器负责设置数据（即通过表单），他们就可以将其更改为他们想要的任何内容。如果您没有办法在服务器端独立验证这一点，那么不要指望表单会向您发送您可以信任的东西。

关于会话，见：[http ://www.yiiframework.com/doc/api/1.1/CHttpSession](http://www.yiiframework.com/doc/api/1.1/CHttpSession)

来自 Common Weakness Enumeration 项目 ( [http://cwe.mitre.org/data/definitions/807.html](http://cwe.mitre.org/data/definitions/807.html) ) 的详细介绍：

> 仅在服务器端存储状态信息和敏感数据。确保系统明确且明确地跟踪自己的状态和用户状态，并为合法的状态转换定义规则。不允许任何应用程序用户以任何方式直接影响状态，而不是通过导致状态转换的合法操作。

# django - 在 django admin 中按具有很多值的 many2many（或外键）过滤（无论是否为 grappelli）

> ID：13015139
> 
> 赞同：2
> 
> 时间：2012-10-22T15:56:16.167
> 
> 标签：django, django-admin, django-1.4, django-grappelli, django-admin-filters

我有两个模型：

```
class TheMainThing(models.Model):
    ... some fields ...
    type = ManyToManyField('Type')

class Type(models.Model):
    ...more fields... 
```

我想`TheMainThings`在管理员中启用过滤`Types`。唯一的问题是有大约 100k 或更多的`Type`对象，因此使用标准的内置过滤器执行此操作是不切实际的。那是因为所有`Types`加载到浏览器中都是一个可用的选项。（实际上，我使用的是 Grappelli，但我相信它与标准 Django admin 相同）。

这个问题有*don't_reinvent_the_wheel* 方法吗？

我喜欢 Grappelli 在 raw_id 字段上的自动完成小部件，我想这样的东西对这个问题来说是理想的……它有这样的东西吗？

**编辑：**
澄清 - 主要问题是浏览器中的加载时间和内存消耗，而不是演示文稿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T04:40:04.313

管理员将这些过滤器输出为带有`<ul>`s 内查询字符串的链接。您可以改为将其更改为选择。

那里使用的模板是`admin/filter.html`这样的：

```
{% load i18n %}
<h3>{% blocktrans with filter_title=title %} By {{ filter_title }} {% endblocktrans %}</h3>
<ul>
{% for choice in choices %}
    <li{% if choice.selected %} class="selected"{% endif %}>
    <a href="{{ choice.query_string|iriencode }}">{{ choice.display }}</a></li>
{% endfor %}
</ul> 
```

您可以使用相同的名称提供自己的名称来覆盖他们的名称，因此重做可能是这样的：

```
{% load i18n %}
<h3>{% blocktrans with filter_title=title %} By {{ filter_title }} {% endblocktrans %}</h3>
<select>
{% for choice in choices %}
    <option data-href="{{ choice.query_string|iriencode }}"
            {% if choice.selected %} selected="selected"{% endif %}>
    {{ choice.display }}
    </option>
{% endfor %}
</select> 
```

然后按照更改的过滤器链接进行操作：

```
$(function() {
    $('select', '#changelist-filter').on('change', function(e) {
        window.location = window.location.href + $(e.target).attr('data-href');
    });

}); 
```

更进一步，您可以在之后使用[Select2](http://ivaynberg.github.com/select2/)之类的东西来对待它们。

# php - 多个隐藏字段

> ID：13015140
> 
> 赞同：2
> 
> 时间：2012-10-22T15:56:22.377
> 
> 标签：php, forms, hidden-field

这是我的第一篇文章，所以我希望我做得正确。这段代码显示了几行，每行都有一个按钮，我想重定向到下一个表单来编辑当前行 ID 寄存器。我正在使用特定于行的变量隐藏输入名称：

```
<?php
while($row = mysql_fetch_array($result))
{  
 $ID_variable[$count] = "ID".$row['ID'];

 echo "<tr>";
 echo "<td><input type=\"submit\" name=\"edit\" value=".$row['ID']."></td>";
 echo "<td>" . $row['lastname'] . "</td>";

 echo "<td><input type=\"hidden\" name=".$ID_variable[$count]." value=".$row['ID']."></td>";

 echo "</tr>";
 $count++;
}
?> 
```

因此，我想将给定行的隐藏名称值传递给我正在使用的下一个表单。必须有一个非常简单的解决方案，但我真的被卡住了。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:07:22.037

您应该使用 javascript/jQuery 来执行此操作。这也可以用 php 的方式完成，但是你需要使用表单。

```
<?php
while($row = mysql_fetch_array($result))
{  
   $ID_variable[$count] = "ID".$row['ID'];

   echo "<tr>";
   echo "<td><input onClick=\"nextForm(".$ID_variable[$count].",".$row['ID'].")\" type=\"submit\" name=\"edit\" value=".$row['ID']."></td>";
   echo "<td>" . $row['lastname'] . "</td>";

   echo "<td><input type=\"hidden\" name=".$ID_variable[$count]." value=".$row['ID'].">         </td>";

  echo "</tr>";
  $count++;
}
?>

<script language="javascript">

function nextForm(name,value) {

   document.location = document.location + "?name="+name+"&value="+value;

}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:20:36.497

我有以下代码用于显示数据库中的数据和编辑/删除：

```
<table>
<?php foreach ($row as $key => $value) { ?>
  <tr>
    <td><?php echo $value['id']; ?></td>
    <td><?php echo $value['title']; ?></td>
    <td><?php echo substr($value['text'], 0, 150); ?></td>
    <td>
      <a href="row_edit.php?code=<?php echo $value['id']; ?>" title="Edit..."><img alt="" src="../libs/imgs/icons/edit.png" /></a>
      <a href="row_delete.php?code=<?php echo $value['id']; ?>" title="Edit..."><img alt="" src="../libs/imgs/icons/edit.png" /></a>
    </td>
  </tr>
<?php } ?>
</table> 
```

我希望能有所帮助。

# android - 是否有捷径可以让我在每个活动中调用操作栏？

> ID：13015144
> 
> 赞同：0
> 
> 时间：2012-10-22T15:56:31.500
> 
> 标签：android, actionbarsherlock

到目前为止，我的 actionbarsherlock 是通过使用布局自定义启用的，并将它们放在`showActionBar()`MainActivity 的方法中：

```
LayoutInflater inflator = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflator.inflate(R.layout.actionitems, null);
ActionBar actionBar = getSupportActionBar();
actionBar.setDisplayShowCustomEnabled(true);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayShowHomeEnabled (false);
actionBar.setDisplayHomeAsUpEnabled(false);
actionBar.setCustomView(v); 
```

我是否必须将所有这些手动输入到我创建的每个活动中才能显示操作栏？我尝试从新活动中扩展 MainActivity，但它似乎不起作用。例子：

```
public class MyWebView extends MainActivity 
```

然后调用`showActionBar()`方法。它指出该应用程序已停止响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:09:07.993

您不需要调用任何方法来使 ActionBar 出现。我认为 SherlockActivity 负责这个，所以你只需要让你的活动扩展 SherlockActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:48:46.357

检查清单中您应用到 Activity 的主题以及 styles.xml 中主题的定义。

我做类似的事情

```
<style name="SplashScreen" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="android:windowActionBar">false</item>
    ...
 </style> 
```

删除操作栏。

您应该这样做或使用默认的内置主题。

# xml - 如何从 xsl-fo 显示 pdf 或 docx 文件？

> ID：13015145
> 
> 赞同：1
> 
> 时间：2012-10-22T15:56:32.190
> 
> 标签：xml, xslt, pdf, docx

我的任务是这样

如果用户附加文件（图片或pdf或docx（word 2007格式））

它将它保存在数据库中。

-> 成功了这个模块。

之后，如果用户按下保存按钮，则必须将其保存为 pdf 文件。

我用谷歌搜索了如何显示图像

```
<fo:page-sequence master-reference="my-page">
                <fo:flow flow-name="xsl-region-body">
                    <fo:block text-align="center">
                        <fo:external-graphic src="C:\Users\spark\Desktop\ui.png" />
                    </fo:block>

                </fo:flow>

</fo:page-sequence> 
```

但我不知道如何显示其他格式...pdf和docx ...

你能给我一个方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:22:24.930

Apache FOP 有一个可能有用的扩展，它添加了`<fox:external-document>`支持嵌入 PDF 的标签。可以在页面序列级别嵌入文档。

```
<fo:page-sequence ...>
...
</fo:page-sequence>
<fox:external-document src="C:\Path\to\PDF\myDoc.pdf" />
... 
```

[阿帕奇的文档](http://xmlgraphics.apache.org/fop/0.95/extensions.html#external-document "阿帕奇的文档")

[作者的文档](http://www.jeremias-maerki.ch/development/fop/index.html "作者的文档")

# c# - 如何使用 CastleWindsor 来解析 SqlWorkflowInstanceStore

> ID：13015146
> 
> 赞同：0
> 
> 时间：2012-10-22T15:56:34.670
> 
> 标签：c#, castle-windsor

我有一个要使用 CastleWindsor 为我创建的 SqlWorkflowInstanceStore 对象。SqlWorkflowInstanceStore 采用连接字符串的构造函数参数。我的连接字符串在我的 app.config 中。

不使用 CastleWindsor 这工作：

```
InstanceStore persistanceStoreX = new SqlWorkflowInstanceStore(ConfigManager.Instance.GetSQLConnectionString()); 
```

我用 CastleWindsor 试过这些片段：

```
WindsorContainer.Register(Component.For<InstanceStore>().ImplementedBy<SqlWorkflowInstanceStore>().DependsOn(Property.ForKey("InstanceStore").Eq(ConfigManager.Instance.GetSQLConnectionString()))); 
```

和

```
var connString = ConfigManager.Instance.GetSQLConnectionString();
WindsorContainer.Register(Component.For<InstanceStore>().ImplementedBy<SqlWorkflowInstanceStore>().DependsOn(new { InstanceStore = connString })); 
```

当解决这个问题时：

```
_persistanceStore = _iodManager.WindsorContainer.Resolve<InstanceStore>(); 
```

我得到了一个有效的容器，但它有一个空的 ConnectionString 字段。

初始化 SqlWorkflowInstanceStore 的正确方法是什么？

InstenceStore 是 SqlWorkflowInstanceStore 的抽象类基础 ConfigManager.Instance.GetSQLConnectionString() 是单例实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T00:45:35.410

通过查看[此页面](http://msdn.microsoft.com/en-us/library/ee248437.aspx)，似乎 ctor 参数`SqlWorkflowInstanceStore`接受了一个名为的参数，`connectionString`因此我认为您的注册码应该是：

```
WindsorContainer.Register(Component.For<InstanceStore>().ImplementedBy<SqlWorkflowInstanceStore>().DependsOn(Property.ForKey("connectionString").Eq(ConfigManager.Instance.GetSQLConnectionString()))); 
```

# java - 将 jtextfield 设置为数据库结果

> ID：13015148
> 
> 赞同：0
> 
> 时间：2012-10-22T15:56:39.317
> 
> 标签：java, jdbc, jtextfield, resultset

我一直在尝试解决这个问题一段时间，但它似乎在逃避我。现在我可能会错过一些如此简单的东西，如果是的话，我很抱歉。

我正在尝试将 SQL 总和的结果显示到 JTextField 中。现在我可以让结果出现在 JTable 中，但我似乎无法将它放入 JTextField。

代码如下：

```
String start = ((JTextField)startDate.getDateEditor().getUiComponent()).getText();
String end = ((JTextField)endDate.getDateEditor().getUiComponent()).getText();
String sql = "SELECT SUM(OD_GROSS) FROM ORD_DETAIL WHERE OD_ACCOUNT = ? AND OD_DATE BETWEEN '"+start+"' AND '"+end+"'";

pst = conn.prepareStatement(sql);
pst.setString(1, txtAccountNumber.getText());

rs = pst.executeQuery();
tblTotal.setModel(DbUtils.resultSetToTableModel(rs));

} catch (Exception e) {
JOptionPane.showMessageDialog(null, e);
} 
```

上面的代码确实有效，并在 JTable 中显示了总和。但是，如果有人知道我如何将结果放入 JTextField 中，那就太好了。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:08:47.040

`JTextField`正在扩展`JTextComponent`。因此调用[setText](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)将为您显示相应的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:57:25.787

我最终设法解决了它。谢谢您的帮助。我把新代码放在下面：

```
\\Changed SQL string notice the new AS Totals section

String sql = "SELECT SUM (OD_GROSS) AS Totals FROM ORD_DETAIL WHERE OD_ACCOUNT = ? AND OD_DATE BETWEEN '"+start+"' AND '"+end+"'"; 
```

然后我在结果集中调用了新列 Totals 并使用 setText 显示它。

再次感谢你。

# javascript - javascript项目。嵌套表循环

> ID：13015150
> 
> 赞同：1
> 
> 时间：2012-10-22T15:56:45.987
> 
> 标签：javascript, loops, nested

我需要使用此[电子表格中的数据创建一个 html 表](http://i.imgur.com/seLYz.png)

使用嵌套的 javascript 循环。这让我感到困惑，因为当我想到循环创建表的作用时，这似乎很奇怪。

我真的不知道如何开始。我还需要检测对总贷款成本的点击，并创建一个事件启动的函数来显示贷款收取的利息。先感谢您！

```
 for (var i=0;i<1;i++)
{document.writeln("<table></table>");

    {break;
    }
    for (var i=0;i<6;i++)
    { 
        table.writeln("<tr>");
        {for (var i=0,i<21,i++)
            table.writeln("<td>");
        }
    }

}

    var prin=10000;
   //var months=(6,12,18,24);
  //period in years 
 var period=(.5,1,1.5,2);
 var percent=(4,5,6);
 //rate in percent
 var rate=(.04,.05,.06); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:07:14.173

您的 JavaScript 无效！尝试在浏览器窗口中点击“F12”以打开开发者工具。如果您可以找到 javascript 控制台，它会显示带有违规行号的 javascript 错误（如果您找不到控制台，请用谷歌搜索“javascript 控制台 firefox”，将“firefox”替换为您的浏览器名称）。

为什么在“break”语句前面有开头的“{”？此外，break 语句后的“}”关闭循环，“break”语句在第一次迭代时退出循环。

你的第三个循环不正确，“{”应该在“for（...）”之后......最后你不能使用“i”作为所有循环的变量，因为内部循环不断重置外部循环仍在使用的“i”变量。

对于每个嵌套循环，您必须使用唯一的计数器，例如 i、j、k。

这是一个具有 3 级嵌套的嵌套循环（尽管您不需要 3 个循环）：

```
for (var i=0; i<1; i++) {
   for (var j=0; j<6; j++) {
     table.writeln("<tr>");

     for (var k=0; k<21; k++) {
        table.writeln("<td>"); // open cell tag
        // put stuff inside of cell?
        table.writeln("</td>"); // close cell tag
     }

     // You should CLOSE your table tag here (although you don't have to since modern browsers will interpret the next opening "tr" tag as the end of the old "tr" tag.
     table.writeln("</tr>");

   }
}

var period=(.5,1,1.5,2); // this code does absolutely nothing. 
```

此外，您没有正确处理表格标签 - 您使用以下行编写了一个空表格：`document.writeln("<table></table>");`

你应该做的是：

```
document.writeln("<table>");

for( ... {
  //all your for loop to create rows/cells
}

document.writeln("</table>"); // close the table tag 
```

我建议你去 w3c 学校学习一些 HTML 和 Javascript 教程。

HTML 基础 [http://www.w3schools.com/html/](http://www.w3schools.com/html/)

Javascript 教程 [http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)

Javascript 循环 [http://www.w3schools.com/js/js_loop_for.asp](http://www.w3schools.com/js/js_loop_for.asp)

# objective-c - 来自 userDefaults 的值未填充 URL 查询字符串

> ID：13015154
> 
> 赞同：2
> 
> 时间：2012-10-22T15:56:55.813
> 
> 标签：objective-c, ios

我正在制作这个聊天应用程序，它与我的网络服务器上的 .php 文件一起使用，以将数据存储在 SQL 数据库中

到目前为止，这是我的代码：

```
#import "vtchatViewController.h"

@interface vtchatViewController ()

@end

@implementation vtchatViewController

@synthesize messageBox, messageView, Send, Refresh;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSString *usrName = [[NSUserDefaults standardUserDefaults] stringForKey:@"user_name"];

    NSURL *url = [NSURL URLWithString:@"http://server.com/ios/messages.php"];  [messageView loadRequest:[NSURLRequest requestWithURL:url]];

}

- (IBAction)refreshButton:(id)sender {
    NSURL *url = [NSURL URLWithString:@"http://server.com/ios/messages.php"];  [messageView loadRequest:[NSURLRequest requestWithURL:url]];

}

- (IBAction)sendButton:(id)sender {
    // server.com/ios/add.php?user=Username here&message=Message Her

    [messageBox resignFirstResponder];
    NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=",usrName "&message=%@", messageBox.text] stringByAddingPercentEscapesUsingEncoding : NSUTF8StringEncoding];
    NSURL *add = [NSURL URLWithString:urlString];

    [messageView loadRequest:[NSURLRequest requestWithURL:add]];
    messageBox.Text = @"";

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

但是在“viewDidLoad”行上，我无法让它使用我的设置包中的用户名：

```
NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=",usrName "&message=%@", messageBox.text] stringByAddingPercentEscapesUsingEncoding : NSUTF8StringEncoding];
NSURL *add = [NSURL URLWithString:urlString]; 
```

我收到错误“使用未声明的标识符'usrName'，而且我不知道我是否确实将“usrName”正确地用于此

我只需要将数据发送到“server.com/ios/add.php？” 其中数据应采用以下格式：“user=Username here&message=Message here”

如果我只使用一个固定的用户名，我就可以正常工作，但是如上所述，我不知道如何让这个东西使用存储在我的设置文件中的用户名

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:04:50.270

您需要使用字符串格式标记来获取它以将用户名插入到`urlString`变量中，如下所示：

```
NSString* urlString = [[NSString stringWithFormat:@"http://server.com/ios/add.php?user=%@&message=%@", usrName, messageBox.text]; 
```

这应该可以帮助您了解为什么您的格式字符串不起作用以及为什么会出现该错误。`usrName`我上面的代码没有转义or的值，`messageBox.text`因此您需要将它们添加回您的代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:05:11.517

你应该让你 usrName 变成一个接口变量。

像那样：

```
@interface vtchatViewController () {
    NSString *usrName;
}

@end

@implementation vtchatViewController

- (void)viewDidLoad
{
    ...
    NSString *usrName = [[NSUserDefaults standardUserDefaults] stringForKey:@"user_name"];
    ...
}

@end 
```

# ios - 如何在 iPhone 上实现与在主屏幕之间导航相同的平移/滑动效果组合？

> ID：13015156
> 
> 赞同：1
> 
> 时间：2012-10-22T15:57:00.447
> 
> 标签：ios, ios5, uigesturerecognizer, uipangesturerecognizer, uiswipegesturerecognizer

在 iPhone 上，您可以通过三种不同的方式在不同的主屏幕之间切换。

1.  您可以向左或向右滑动，下一个相应的下一个屏幕将被动画化。

2.  您触摸屏幕，无需抬起手指即可将屏幕向右或向左拖动。在通过临界点（即屏幕减半的距离）后，当您抬起手指时，下一个主屏幕会显示动画。

3.  您触摸屏幕并且不抬起手指就稍微拖动屏幕，如果您愿意，您可以停止拖动但仍然不要离开手指。您可以在相对较短的距离内向左或向右加速，它会在左侧或右侧的相应屏幕上显示动画。

如果我们只看第 1 点和第 2 点，我们会发现它们实现起来很简单。这只是第 1`UISwipeGuestureRecognizer`点和`UIPanGuestureRecognizer`第 2 点。

将它们 1 和 2 结合起来似乎不是那么微不足道，因为滑动似乎占主导地位（我试图将它们与 结合起来`- (void)requireGestureRecognizerToFail:(UIGestureRecognizer *)otherGestureRecognizer`）。要触发平移，我必须将手指放在屏幕上并非常轻柔地拖动以不触发滑动。

更不用说第三点作为补充。这似乎完全不符合我的知识水平。

这里有什么建议吗？非常感谢您提前。如果需要更多信息来解决这个问题，我很乐意提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:03:28.570

主屏幕只是一个简单`UIScrollView`的`UIPageControl` :)

例子 ：

```
// MyViewController.h
@interface MyViewController : UIViewController <UIScrollViewDelegate> {
    UIScrollView *_scrollView;
    UIPageControl *_pageControl;
}

// MyViewController.m
// in your viewDidLoad method
int numberOfPages = 3;
_scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width,
                                                                 self.view.frame.size.height)];
 [_scrollView setContentSize:CGSizeMake(numberOfPages*_scrollView.frame.size.width, _scrollView.frame.size.height)];
 [_scrollView setPagingEnabled:YES];
 [_scrollView setShowsHorizontalScrollIndicator:NO];
 [_scrollView setDelegate:self];
 [self.view addSubview:_scrollView];

 _pageControl = [[UIPageControl alloc] initWithFrame:CGRectMake(0, _scrollView.frame.size.height-30, _scrollView.frame.size.width, 20)];
 [_pageControl setNumberOfPages:numberOfPages];
 [_pageControl setCurrentPage:0];
 [self.view addSubview:_pageControl];

for (int i=0; i<numberOfPages; i++) {
   CGRect frame = _scrollView.frame;
   frame.origin.x = frame.size.width * i;
   frame.origin.y = 0;
   UIView *view = [UIView alloc] initWithFrame:frame];
   //Setup your view     
   [_scrollView addSubview:view];
} 
```

如果要执行有关当前显示的视图的特定方法，请使用该`scrollViewDidScroll:`方法（例如从数据库加载内容）

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
    CGFloat pageWidth = _scrollView.frame.size.width;
    int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    _pageControl.currentPage = page;

    //do whatever you want..
} 
```

这只是一个示例，向您展示如何做到这一点。如果您使用的是数据库，或者每个视图都不同，您应该以不同的方式设置视图或检索数据，但逻辑将是相同的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:46:00.693

[WWDC 2012 视频](https://developer.apple.com/videos/wwdc/2012/)

*   查看使用滚动视图增强用户体验

[WWDC 2011 视频](https://developer.apple.com/videos/wwdc/2011/)

*   查看高级滚动视图技术

# knockout.js - 两种方式绑定在 knockout.js 中不起作用

> ID：13015158
> 
> 赞同：0
> 
> 时间：2012-10-22T15:57:14.153
> 
> 标签：knockout.js

我正在尝试在更改为 viewModel 后更新 UI，但它不起作用，我错过了什么吗？ [http://jsfiddle.net/rdZjb/1/](http://jsfiddle.net/rdZjb/1/)

```
 viewModel = {
        firstName : ko.observable("adrian") 
    }

    $("#button1").click(
        function ()
        {
            viewModel.firstName = "Paul";
            alert(viewModel.firstName);
        }
        )

    ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:05:09.417

你正在以`observables`错误的方式工作。每个`observable`都是一个函数，因此当您设置或获取值时，您应该使用`()`：

```
 viewModel.firstName("Paul");
        alert(viewModel.firstName()); 
```

使用 jQuery click 事件也是不好的做法。改用淘汰赛`click`绑定：

```
<input type="button" value ="click" id="button1" data-bind="click: OnClick"/>

viewModel = {
    firstName: ko.observable("adrian"),
    OnClick: function() {
        this.firstName("Paul");
        alert(this.firstName());
    }
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/rdZjb/2/](http://jsfiddle.net/vyshniakov/rdZjb/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:05:19.290

要通过 Javascript 更改 observable（在初始化后），您需要将其作为函数调用，例如

```
viewModel.firstName("Paul"); 
```

# apache-flex - 如何打开 PDF 包中的附件？

> ID：13015162
> 
> 赞同：0
> 
> 时间：2012-10-22T15:57:18.687
> 
> 标签：apache-flex, acrobat

我目前正在创建一个 PDF 组合，它在 dataGrid 中显示数据。有许多附件，当我双击特定附件时，我希望它显示在新的 acrobat/reader 窗口中。

有人可以指导我吗？

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:09:56.467

据我所知，这不能在基于 Web 的 Flash 文件中完成。它必须在 AIR 应用程序中完成。

请参阅[这篇 Adob​​e 文章](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7fe4.html#WS2A7C0A31-A6A9-42d2-8772-79166A98A085)。相关信息：

> 在**AIR 2**中，您可以使用操作系统注册的应用程序打开文件来打开它。例如，一个 AIR 应用程序可以打开一个 DOC 文件，而该应用程序已注册以打开它。使用 File 对象的 openWithDefaultApplication() 方法打开文件。

您可以使用`**FileReference**`允许用户将 PDF 保存到他们的系统，但我不相信有办法强制它在应用程序中打开。实际上，我认为您也不能通过标准 JS/PHP 方法强制通过下载（无论如何，未经用户许可）打开应用程序（我不是这两种方法的大师，所以我可能错了)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:13:52.667

最初，我在使用 flex4 项目访问主机时遇到了严重问题。

这导致我切换到 flex3，因为我发现了许多可以正常工作的代码示例。

这些例子可以在[这里找到](http://pdfdevjunkie.host.adobe.com/00_helloWorld.shtml)

# ios - 在 App Store 中指向我的应用的可追踪链接

> ID：13015165
> 
> 赞同：4
> 
> 时间：2012-10-22T15:57:28.990
> 
> 标签：ios, itunes

我有一个 iPhone 应用程序，我想在几个网站上推广它，当然我想跟踪来自这些网站的潜在客户的安装数量。我想知道是否有可能有一个不同的 iTunes 链接，我将与不同的网站共享，然后，以某种方式跟踪这些统计信息或能够通过 HTTP 引荐来源跟踪不同的来源，或者也许能够传递任何有价值的（在引用源的感觉）在itunes url中的某个地方，然后以任何其他方法阅读它

当然，我需要在每次成功安装时收集这些信息。

你能告诉我处理这些设施的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:12:44.700

给你：[“自动跟踪应用销售推荐”（atastypixel.com 上的博客条目）](http://atastypixel.com/blog/automatically-track-app-sale-referrals/)

[基本上是这样的：使用您自己的网络服务器创建重定向到 App Store 的自定义下载链接，并使用您选择的统计工具查看日志文件（或使用LinkShare](http://www.linkshare.com)等外部服务为您完成该部分）。

不幸的是，Apple 没有通过 iTunes Connect 提供详细的统计数据（包括推荐人等），所以自己做是要走的路。

# python - 使用请求上传文件并发送额外数据

> ID：13015166
> 
> 赞同：14
> 
> 时间：2012-10-22T15:57:30.323
> 
> 标签：python, python-2.7, python-requests

我正在尝试使用[requests](http://requests.readthedocs.org/en/latest/)上传文件。我需要上传一个PDF文件，同时将一些其他数据发送到表单中，比如作者的名字。

我试过这个：

```
requests.get(url, files = {"file":open("file.txt"), "author" : "me" }) 
```

但它不会将数据发送到表单。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-22T16:18:44.283

所以我知道您想要上传到一个 URL、一个 pdf 文件以及一些额外的参数。

您遇到的第一个错误是您正在使用`.get()`而不是`.post()`.

我正在使用[文档](http://requests.readthedocs.org/en/latest/user/quickstart/)中的示例，您应该通过这些示例。这应该让你开始：

```
>>> url = 'http://httpbin.org/post'
>>> files = {'file': open('somefile.pdf', 'rb')}
>>> values = {'author': 'John Smith'}
>>> r = requests.post(url, files=files, data=values) 
```

# codeigniter - CodeIgniter dbcollat

> ID：13015168
> 
> 赞同：0
> 
> 时间：2012-10-22T15:57:38.350
> 
> 标签：codeigniter, mysqli

我正在使用具有以下设置的 CodeIgniter：

```
$db['default']['char_set'] = 'utf8'; 
$db['default']['dbcollat'] = 'utf8_general_ci'; 
```

我的数据库列和表`utf8_unicode_ci`用作排序规则。我应该改变我的连接方式吗？

如果我不改变会有什么潜在的问题。该应用程序现在似乎运行良好，但我刚刚注意到这种差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:30:41.467

很难说到底是什么潜在的问题。通常，当应用程序设置与数据库编码设置不匹配时，就会出现编码问题（显示、排序、过滤、搜索）。有一件事是肯定的 - 一旦你遇到编码问题，你将开始更改 CI 设置以匹配 DB 设置，或者相反。

[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/charset-unicode-sets.html)中解释了这两种排序规则之间的区别。
Phil Sturgeon 还发表了一篇关于[UTF-8 对 CodeIgniter 的支持](http://philsturgeon.co.uk/blog/2009/08/UTF-8-support-for-CodeIgniter)的博文。

所以是的，你应该改变你的连接方式。

# c# - c#中的理解基础

> ID：13015171
> 
> 赞同：3
> 
> 时间：2012-10-22T15:57:43.757
> 
> 标签：c#, oop

我正在尝试了解基本构造函数的实现。考虑这种情况如果我有基类运动

```
public class Sport 
{
   public int Id { get; set; }
   public string Name { get; set; }

   public Sport() 
   {
      Console.WriteLine("Sport object is just created");
   }

   public Sport(int id, string name) 
   {           
      Console.WriteLine("Sport object with two params created");
   }
} 
```

现在我有一个继承 Sport 类的篮球类，我想在篮球对象初始化时使用带有两个参数的第二个构造函数。

```
public class Basketball : Sport
{    
    public Basketball : base ( ???? )
    {
       ?????
    }
} 
```

首先我想使用私有字段 int _Id 和 string _Name 并在构造函数调用中使用它们

```
public Basketball : base ( int _Id, string _Name )
{
   Id = _Id;
   Name = _Name;
} 
```

但这对使用继承没有意义，所以请在这个例子中解释一下。

**更新** 谢谢大家，我正在使用这样的代码，没关系。

```
public Basketball(int id, string name) : base (id, name)
{
   Id = id;
   Name = name;
} 
```

只是为了确保，在这一行中 `public Basketball(int id, string name) : base (id, name)`，我声明了变量 id、name，因为我的原始变量是大写的 var，并在 base (id, name) 上用作参数来命中我的基本构造函数。

谢谢大家。，很有帮助/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:00:30.470

您要求的构造函数如下：

```
public Basketball(int id, string name) : base(id,name) {} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T16:02:27.077

如果基`values`类构造函数没有任何`variables`.`derives class``base class constructor``default parameterless constructor`

您不需要在基本构造函数调用中声明任何内容

base 关键字的主要目的是调用`base class constructor`.

通常，如果您不声明自己的任何构造函数，编译器会`default constructor`为您创建一个。

但是如果你定义了你自己的构造函数`parameter`，那么编译器就不会创建`default parameterless constructor`.

因此，如果您没有在基类中声明默认构造函数并且想要调用具有参数的基类构造函数，则必须调用该基类构造函数并通过`base`关键字传递所需的值

像这样做

```
public Basketball() : base (1,"user") 
```

**或者**

```
public Basketball(int id,string n) : base (id,n) 
```

**或者**

```
public Basketball(int id,string n) : base () 
```

**或者**

```
public Basketball() : base () 
```

类似于

```
public Basketball()//calls base class parameterless constructor by default 
```

这完全取决于您希望类在类被实例化时的**行为方式**`derived`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T16:01:31.283

构造函数不是继承的——这就是为什么你必须调用基础构造函数来重用它。如果您不想做任何与基本构造函数不同的操作，只需使用：

```
public Basketball( int id, string name ) : base ( id, name )
{

} 
```

您的示例有点误导，但是因为您没有在基本构造函数中使用`id`and`name`参数。一个更准确的例子是：

```
public Sport(int id, string name) 
{           
    Console.WriteLine("Sport object with two params created");

    Id = id;
    Name = name;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T16:03:40.067

您需要在篮球的构造函数中获取相同的参数：

```
public Basketball(int id, string name) : base(id, name) 
```

或者以某种方式获取构造函数中的值，然后通过属性设置它们：

```
public Basketball()
{
    int id = ...;
    string name = ...;

    base.Id = id;
    base.Name = name;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:02:49.087

关键字`base`允许您指定要传递给基本构造函数的参数。例如：

```
public Basketball(int _Id, string _Name) : base (_Id, _Name )
{
} 
```

将使用 2 个参数调用您的基本构造函数，并且：

```
public Basketball(int _Id, string _Name) : base ()
{
} 
```

将不带参数调用您的基本构造函数。这真的取决于你想打电话给哪一个。

# apache - apache mod_rewrite 货币

> ID：13015172
> 
> 赞同：1
> 
> 时间：2012-10-22T15:57:52.983
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, escaping

我想知道是否有人可以提供帮助。我设置了一个重定向文件，以在客户在网站上搜索特定单词时将其指向特定页面。除了我尝试将 GBP 货币符号 (£) 传递到搜索字符串时，这一切都适用于以下类似规则，例如，如果我想将客户发送到名为“http://www. mysite.com/offers/3-for-20.list' 当他们搜索“3 for £20”时，我设置了以下规则：-

```
RewriteCond %{QUERY_STRING} ^search\=(3\+for\+£20)$ [NC]
RewriteRule ^.* http://www.mysite.com/offers/3-for-20.list?s=%1 [L,R=301] 
```

我已经尝试了上述方法但没有成功，并且找不到任何可以帮助我的转义字符或任何可以帮助我的转义字符。我没有收到任何错误页面，实际上它正在成功完成搜索，但没有指向请求的页面，而是像没有设置重定向一样进行查询，而且日志文件没有显示错误，但搜索结果为 '. ..search=3+for+%C2%A320' HTTP/1.1 200

我还尝试将上述内容放入重定向规则中，结果相同，即

```
RewriteCond %{QUERY_STRING} ^search\=(3\+for\+C2%A320)$ [NC]
RewriteRule ^.* http://www.mysite.com/offers/3-for-20.list?s=%1 [L,R=301] 
```

有没有人对我如何做到这一点有任何想法。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:46:46.390

与 URI 不同，就 URL 转义而言，查询字符串的处理方式略有不同。URI 在通过规则之前未转义，但查询字符串变量未转义，因此：

```
 search=3 for £20 
```

在`%{QUERY_STRING}`变量中未转义：

```
search=3+for+%C2%A320 
```

此外，当您在重写规则中反向引用匹配时，mod_rewrite 想要**再次**转义查询字符串，因此您需要告诉它不要使用该`NE`标志：

```
RewriteCond %{QUERY_STRING} ^search=(3\+for\+%C2%A320)$ [NC]
RewriteRule ^.* http://www.mysite.com/offers/3-for-20.list?s=%1 [L,R=301,NE] 
```

`%`（您的第二次尝试在之前缺少 a `C2`）

# sql - 一天两班，但该班只有一名司机和一辆出租车

> ID：13015176
> 
> 赞同：0
> 
> 时间：2012-10-22T15:58:09.187
> 
> 标签：sql

首先，我对 sql 的了解不多，只有基本的东西。我需要有关如何实施程序的帮助。我创建了两个表：Drivers 和 Cars。IDDriver IDCar 我需要有关如何实现此场景的帮助：

我需要创建存储过程：创建、更新和删除一个班次。一天必须两班倒：两班一车，一班司机。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:42:01.493

我想你想要一个这样的模式

```
CREATE TABLE [Driver]
(
      [Id] INT IDENTITY(1,1) PRIMARY KEY
    , [Name] NVARCHAR(50) NOT NULL
)

CREATE TABLE [Car]
(
      [Id] INT IDENTITY(1,1) PRIMARY KEY
    , [Registration] NVARCHAR(14) NOT NULL
)

CREATE TABLE [ShiftType]
(
      [Id] INT IDENTITY(1,1) PRIMARY KEY
    , [StartTime] TIME NOT NULL
    , [StartDayOfWeek] TINYINT NOT NULL
    , [EndTime] TIME NOT NULL
    , [EndDayOfWeek] TINYINT NOT NULL
)

CREATE TABLE [Shift]
(
      [Id] INT IDENTITY(1,1) PRIMARY KEY
    , [DriverId] INT NOT NULL REFERENCES [Driver]([Id])
    , [CarId] INT NOT NULL REFERENCES [Car]([Id])
    , [ShiftId] INT NOT NULL REFERENCES [Shift]([Id])
) 
```

您可以像这样插入一些基本数据

```
INSERT [Driver] VALUES ('Bob')
INSERT [Car] VALUES ('ABC1234')
INSERT [ShiftType] VALUES ('08:00:00', 0, '20:00:00', 0)
INSERT [ShiftType] VALUES ('20:00:00', 0, '08:00:00', 1)
INSERT [Shift] VALUES (1, 1, 1)
INSERT [Shift] VALUES (1, 1, 2) 
```

像这样拿出来

```
SELECT
              [D].*
            , [C].*
            , [ST].*   
    FROM
            [Shift] [S]
        JOIN
            [Driver] [D]
                ON [D].[Id] = [S].[DriverId]
        JOIN
            [Car] [C]
                ON [C].[Id] = [S].[CarId]
        JOIN
            [ShiftType] [ST]
                ON [ST].[Id] = [S].[ShiftTypeId] 
```

[这是小提琴](http://sqlfiddle.com/#!6/b4d48/2)

* * *

这应该为您提供一个很好的起点，让您自己尝试一些存储过程，并在结构良好的问题中发布任何尝试。

# c# - 替换文本文件中的一行

> ID：13015177
> 
> 赞同：6
> 
> 时间：2012-10-22T15:58:10.533
> 
> 标签：c#, c#-4.0, file-io

我有一个文本文件被另一个应用程序用作配置文件。我已将文件的每一行读入一个字符串数组：

```
string[] arrLine = File.ReadAllLines(pathToFile); 
```

这正是我需要的。

现在，我需要做的就是用一个字符串替换 arrLine[x] 的整行，覆盖该行和仅该行上的内容。我已经编写了代码来知道我需要替换的确切行，我只需要知道如何替换它。

我正在考虑 arrLine[x].Replace(oldString, newString) - 如果可行，我将如何实际将更改提交到文本文件？我是否需要以某种方式重写整个文件？我认为当只有一行需要重写时，这会有点低效吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T15:59:15.277

您应该能够只分配该元素：

```
arrLine[yourLineNumber] = "Foo"; 
```

> 我将如何实际提交对文本文件的更改？

完成此操作后，您可以使用`File.WriteAllLines(pathToFile, arrLine);`将数据写回原始文件。

# android - 如何强制嵌入式音频文件在 Android 平板电脑上自动启动？

> ID：13015178
> 
> 赞同：1
> 
> 时间：2012-10-22T15:58:09.443
> 
> 标签：android, html, audio, html5-audio

我有一个 Nabi（Android 平板电脑），我正在设计一个网站，并且我有一个音频文件，当音频文件在页面上时我想播放它。

在 Nabi 上，它出现了，但我必须按下播放键。它不只是开始。这是代码：

```
<embed src="windchimes.mp3" height="100px" width="100px" autostart="true"> 
```

或者

```
<audio autoplay="autoplay" controls="controls"><source src="windchimes.mp3" type="audio/mpeg" /></audio> 
```

有谁知道怎么做，这样我就不用在平板电脑上玩了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T14:56:05.513

就我而言，这提出了一个简单的解决方案： [https](https://stackoverflow.com/a/28011906/4622767) ://stackoverflow.com/a/28011906/4622767 将其 复制并粘贴到您的 chrome 中：

```
chrome://flags/#disable-gesture-requirement-for-media-playback 
```

我的网络应用程序有很多页面重新加载，所以我不能强迫用户每次都按下按钮；但它是供内部使用的，所以我可以强制用户使用 chrome 并配置该选项。

# haskell - Haskell，检查自定义数据类型是否满足某些限制

> ID：13015189
> 
> 赞同：1
> 
> 时间：2012-10-22T15:58:52.187
> 
> 标签：haskell, functional-programming

这是我的 ADT：

```
type Color = String
type Hight = Integer
type Width = Integer
type Des = String -- description 

data Shape = Shape Color [(Hight, Width)] Des
         deriving(Show) 
```

我想定义一个名为的函数，`confirm`：

```
confirm::Restriction->Shape->Bool 
```

在哪里：

```
false::Restriction -- the restriction fails 
```

和

```
greater::Integer->Restriction --height or width is greater than given number 
```

我需要帮助定义`Restriction`,`confirm`和`false``greater`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:16:50.487

数据类型限制应该*是* `Shape -> Bool`。然后你不需要`confirm`，你可以使用`False`代替`false`。

我已重命名为`greater`，`notTooBig`因为当数据正常时它是真的。我觉得这更有意义。

```
notTooBig:: Shape -> Bool
notTooBig n (Shape _ dimensions _) = all smallenough dimensions where
  smallenough (h,w) = h <=n && w <= n 
```

方法忽略这`_`一点——我们不需要颜色或描述。

* * *

编辑：这对你来说似乎很重要

```
confirm::Restriction->Shape->Bool 
```

和

```
false::Restriction -- the restriction fails 
```

因此，让我们创建一个`Restriction`适合您的数据类型：

```
data ARestriction = ColourR (Colour -> Bool) -- (sorry I can't resist using British spelling)
                  | HeightR (Height -> Bool) -- (Hight is surely a typo)
                  | WidthR  (Width -> Bool)
                  | DesR    (Des -> Bool)
type Restrictions = [ARestriction] 
```

因此，例如，您可以拥有`[ColourR (=="red"), WidthR (>7)]`仅允许宽于 7 的红色事物。

```
confirm1 :: ARestriction -> Shape -> Bool
confirm1 (ColourR check) (Shape c ds d) = check c
confirm1 (HeightR check) (Shape c ds d) = all check $ map fst ds
confirm1 (WidthR check) (Shape c ds d) = all check $ map snd ds
confirm1 (DesR check) (Shape c ds d) = check d

confirm :: Restrictions -> Shape -> Bool
confirm rs s = all (flip confirm1 s) rs 
```

无论如何，我们可以这样使用：

```
confirm [ColourR (=="red"), WidthR (>7)] (Shape "red" [(2,3),(3,4)] "square") 
```

这给了你`True`。

您还想定义`false`，但让我们先尝试`true`：

```
true :: Restrictions
true = [] 
```

这是可行的，因为列表中的所有限制都得到满足。

你也可以定义

```
false :: Restrictions
false = ColourR (const False) 
```

它检查形状的颜色，但`const`会告诉你`False`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T17:09:22.643

扩展另一个答案：

```
type Restriction = (Shape -> Bool)

false :: Restriction
false = const False

greater :: Integer -> Restriction
greater r (Shape _ dims _) = any (\(h,w) -> h > r || w > r) dims

confirm :: Restriction -> Shape -> Bool
confirm = id 
```

# wcf - 如何使用 WCF 4 实现全文搜索？

> ID：13015191
> 
> 赞同：1
> 
> 时间：2012-10-22T15:59:05.750
> 
> 标签：wcf

我正在考虑设计一个 WCF 4 应用程序。它将使用 .NET Framework 4.0 和 MySQL 数据库在 IIS6 和 Windows Server 2003 上运行。

该服务需要允许全文搜索功能，但我没有找到任何显示如何执行此操作的资源。我了解如何使用特定数据返回结果，例如 GetData(234) 以返回 ID=234 的记录。但假设我想在 VarChar 或 Text 列中搜索任意条件。例如，“绿色和黄色”，其中文本列可能在数据中的任何位置包含这 2 个搜索词。我可能还想按日期时间搜索，所以日期时间早于 2012 年 1 月 1 日、文本包含绿色和黄色、ID=234 等的所有行。

WCF 对于如何返回所有行或具有指定列值的行的结果很简单，但我没有看到它将使用全文搜索返回行的位置。

是否有人知道一个链接，该链接说明了如何使用高级搜索表单返回行列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:17:45.633

WCF 不会帮助您使用实际的全文搜索功能。当然，您需要设计一个允许分页搜索、返回有用的 DataContracts 等的合约，但困难的部分在别处。

您还没有具体说明您需要哪些实际的全文功能，但至少有两种方法：

*   使用[MySQL 全文搜索功能](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。根据您的服务操作中的搜索参数，您将执行一个 MySQL 查询，该查询将从相应的表中返回行。您的服务可以返回相应的结果（域对象、poco 等）。
*   在 MySQL 数据库之上/同时使用[SOLR](http://lucene.apache.org/solr/) / [Lucene 。](http://lucene.apache.org/core/)（有一个[关于使用哪一个](https://stackoverflow.com/questions/6820527/lucene-or-mysql-full-text-search)的问题。）

总而言之：该服务不具备全文搜索功能，它只是通向这些功能的门户。

# .net - Excel PIA 为具有数字的单元格返回 null

> ID：13015196
> 
> 赞同：0
> 
> 时间：2012-10-22T15:59:29.897
> 
> 标签：.net, excel, office-pia

我在使用以下代码时遇到问题

```
var num = sheet.Cells[row, col].Value; 
```

或者

```
var num = sheet.Cells[row, col].Value2; 
```

如果单元格仅包含数字，则不会返回值。我在这里错过了什么愚蠢的东西吗？我还应该提到我正在使用 csv 文件和 office 2010 执行此操作。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:33:53.423

var num 声明为什么？数字还是字符串？尝试使用 FormulaR1C1 来获取值。有时工作。:)

# django - 名为“格式”的美味模型字段

> ID：13015199
> 
> 赞同：1
> 
> 时间：2012-10-22T15:59:44.127
> 
> 标签：django, tastypie

我正在使用美味的派，我有一个独特的情况。我的模型有一个名为“format”的字段，所以当我尝试调用相关 API 并传递 format=json 时，我收到此错误：

> “格式”字段不允许过滤。

除了重命名我的模型字段之外，还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:48:57.937

看起来“格式”是硬编码的`tastypie.utils.mime.determine_format()`。您可以覆盖`Resource.determine_format`：

```
class MyResource(ModelResource):
       def determine_format(self, request):
        """
        Used to determine the desired format.

        Largely relies on ``tastypie.utils.mime.determine_format`` but here
        as a point of extension.
        """

        # Determine your format and return it.
        # This is the default implementation.
        return determine_format(request, self._meta.serializer, default_format=self._meta.default_format) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T09:45:58.587

恕我直言，`?format=json`在查询字符串中只是一种解决方法。我从不依赖它。正确的方法是发送 header `content-type: application/json`。

# python - 从python中的numpy或list中删除元素

> ID：13015200
> 
> 赞同：1
> 
> 时间：2012-10-22T15:59:49.340
> 
> 标签：python, list

所以我正在生成曲线图像。我从傅立叶级数的前几个模式构建我的线（在每个余弦函数上使用随机选择的幅度），然后从我的傅立叶级数中为曲线生成一个 x 和 y 值列表。但现在我想以我自己的方式绘制 y 与 x，因为我需要大量控制，而 pyplot 在幕后做了太多事情。

所以我将我的 x 和 y 向量（1D numpy 数组）转换为整数，所以现在它们指的是像素位置（一切都被缩放以适应 128x128 的 img 窗口）。现在我想从我的向量中消除冗余（即，只要我有重复的 x 和 y 值，我想从 x 向量中删除那个 x，从 y 向量中删除那个 y）。

目前，x 和 y 位于两个不同的向量中。将它们保留为有序对的单个向量会更好吗？那么这将是删除冗余有序对的问题。

无论哪种方式，消除冗余的理想途径是什么。我觉得我正在绕着灌木丛（teehee）编码，并且必须有一条简单的pythonic路线。

谢谢人们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:38:13.537

我认为将点保持成对（元组）会更好。如果您不想重写所有代码而只是进行一些测试，请[压缩](http://docs.python.org/library/functions.html#zip "压缩")两个数组以获取点列表：

```
points = zip(x_list, y_list) 
```

现在你有了点列表，从你的点列表中生成一个[集合](http://docs.python.org/library/stdtypes.html#set-types-set-frozenset "放")（它会自动抛出重复的对），然后再次获取一个列表：

```
points = list(set(points)) 
```

# bash - bash 中的变量验证（名称和 IP 地址）

> ID：13015206
> 
> 赞同：2
> 
> 时间：2012-10-22T16:00:11.363
> 
> 标签：bash, validation, variables

在我的 bash 脚本的标题中，我必须询问用户名和他的 IP 地址。

我需要以这种方式验证条目：

*   用户名必须存储在一个`name`变量中，他的空格用下划线代替。对于用户点击的示例`"Albert Smith"`，我必须存储`"Albert_Smith"`到我的变量`name`中。
*   对于ip地址，我需要知道ip地址是否与格式一致。如果格式不好，我必须报错并提示用户输入好的ip地址才能继续操作。

我知道我需要使用“阅读”，但我不知道如何实现我的短脚本（替换和验证）。预先感谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T17:35:59.843

还有一种方式。仅重击：

```
#!/bin/bash

read name
name=${name// /_}

read ip
if [[ "$ip" =~ ^([0-9]{1,3})[.]([0-9]{1,3})[.]([0-9]{1,3})[.]([0-9]{1,3})$ ]]
then
    for (( i=1; i<${#BASH_REMATCH[@]}; ++i ))
    do
      (( ${BASH_REMATCH[$i]} <= 255 )) || { echo "bad ip" >&2; exit 1; }
    done
else
      echo "bad ip" >&2
      exit 1;
fi

echo "name:$name"
echo "ip:$ip" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-02T11:58:20.503

不完全是问题的答案，但对于那些喜欢“单线”的人来说，IP 验证正则表达式：

```
[[ "$IP" =~ ^(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$ ]] && echo "valid" || echo "invalid" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T16:23:44.027

您可以使用 进行第一部分，使用and`tr`进行第二部分：`grep``awk`

```
#!/bin/sh

echo "Enter a name:"
read FULL_NAME

FULL_NAME_REPLACED="$(echo $FULL_NAME | tr ' ' _)"
echo $FULL_NAME_REPLACED

echo "Enter an IP address:"
read IP_ADDRESS

if echo "$IP_ADDRESS" | egrep -E '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'
then
    # Then the format looks right - check that each octect is less
    # than or equal to 255:
    VALID_IP_ADDRESS="$(echo $IP_ADDRESS | awk -F'.' '$1 <=255 && $2 <= 255 && $3 <= 255 && $4 <= 255')"
    if [ -z "$VALID_IP_ADDRESS" ]
    then
        echo "The IP address wasn't valid; octets must be less than 256"
    else
        echo "The IP address was valid"
    fi
else
    echo "The IP address was malformed"
fi 
```

如果找到[该线程](http://www.unix.com/shell-programming-scripting/36144-ip-address-validation-function.html)`awk`中使用的表达式。这是对单独使用或单独使用的改进，因为它还将拒绝大于 255 的八位字节，例如.`grep``sed``400.400.400.400`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T16:21:19.080

我想您的条目将基于行（即名称将是第一行，IP 将是第二行）。你可以这样做：

```
#!/bin/bash

read name    
while [[ ! "$name" =~ '[A-Za-z ]' ]]; do
    read -p "Wrong name format. Re-enter: " name
done

name="${name// /_}"

read ip
while [[ ! "$ip" =~ '^((25[0-5]|2[0-4][0-9]|[01][0-9][0-9]|[0-9]{1,2})[.]){3}(25[0-5]|2[0-4][0-9]|[01][0-9][0-9]|[0-9]{1,2})$' ]]; do
    read -p "Not an IP. Re-enter: " ip
done 
```

IP 正则表达式相当复杂，但可以分解为：

1.  在字符串的开始之后，必须有三组“八位位组”后跟句号，然后是另一个“八位位组”和字符串的结尾
2.  八位字节是
    1.  250-255,
    2.  200-249
    3.  100-199（包括000-099，数字前有显式0）
    4.  一位或两位数（即 0-99）

循环形式将否定`!`的结果，因此在命令失败`grep`时它将继续循环。`grep`我们使用`printf`为了将变量传递到`grep`. 第二`-E`个标志`grep`允许使用扩展的正则表达式，包括`|`OR 运算符、`()`分组和`{}`重复。

希望这会有所帮助=)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:44:41.887

### 还有一个更新的版本

作为一个函数：

```
ask4nameIp() {
    unset ip name
    local var v1 v2 v3 v4
    while ! [ "$name" ] || ! [ "$ip" ]; do
        printf "Name: %s\r" $name
        read -p Name:\  var
        [ "$var" ] && name=${var// /_}
        printf "IP: %s\r" $ip
        IFS=. read -p IP:\  v{1..5}
        ((${#v1}*${#v2}*${#v3}*${#v4})) &&
            [ -z "${v1//[0-9]}${v2//[0-9]}${v3//[0-9]}${v4//[0-9]}$v5" ] &&
            ((0<=v1&&v1<=255&&0<=v2&&v2<=255&&0<=v3&&v3<=255&&0<=v4&&v4<=255)) &&
           ip=$v1.$v2.$v3.$v4
        [ "$name" ] && [ "$ip" ] ||
            echo something wrong: ${name:-name missing} ${ip:-ip missing}...;
    done;
    printf "Name: '%s'\nIP:   '%s'\n" $name $ip
} 
```

变量`$name`和`$ip`可以在函数之外使用：

```
$ ask4nameIp ; declare -p name ip
Name: foo bar 23
IP: 10.123.45.67
Name: 'foo_bar_23'
IP:   '10.123.45.67'
declare -- name="foo_bar_23"
declare -- ip="10.123.45.67" 
```

### 带循环的完整过程，直到*没有错误*

像这样：（**完整的 bash**！没有管道，没有外部 tr，awk，sed，...）可以在 bash 控制台上使用 cut'n 过去进行测试，无需将其写入脚本文件。

```
unset name ip; \
while ! [ "$name" ] || ! [ "$ip" ];do
    printf "Name: %s\r" $name;
    read -p Name:\  var;
    [ "$var" ] && name=${var// /_};
    printf "IP: %s\r" $ip;
    read -p IP:\  var;
    iparray=($( IFS=".";echo $var;));
    [ ${#iparray[@]} -eq 4 ] && \
        [ $iparray -ge 0 ] && [ $iparray -le 255 ] && \
        [ ${iparray[1]} -ge 0 ] && [ ${iparray[1]} -le 255 ] && \
        [ ${iparray[2]} -ge 0 ] && [ ${iparray[2]} -le 255 ] && \
        [ ${iparray[3]} -ge 0 ] && [ ${iparray[3]} -le 255 ] && \
        ip=$var;
    [ "$name" ] && [ "$ip" ] || echo something wrong...;
  done; \
printf "Name: '%s'\nIP:   '%s'\n" $name $ip 
```

这看起来比使用 bash 的正则表达式更强大，但在使用中，这要轻得多。

在使用中，这将提示所有*已定义变量*的请求作为默认值并循环直到定义所有变量：

1.  `unset`所有需要的变量
2.  主循环直到所有需要的变量都被定义
3.  `print`请求和已经定义的变量（*默认*`\r`）并通过使用而不是保持在同一行`\n`
4.  提示请求和`read`回答（该请求被*重写*为上一行提示的请求，在同一个地方）。
5.  用下划线替换空格并定义`name`是否有东西
6.  `name`对变量重复操作： `print`request + 已经定义，而不是提示请求和`read`anser。
7.  使用临时*数组* `iparray`来分割 IP 的整数
8.  检查：如果整数个数 == 4 并且都是整数，介于 0 和 255 之间，包括，那么 assing `IP`。
9.  `echo`除非定义了所有变量，否则会出现错误消息。
10.  环形
11.  打印结果

![动画演示](../Images/7486b26da70ffbb1e36864af49cec4e3.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-20T12:08:15.993

```
read name
name=`echo $name|tr ' ' _`

read ip
stat=1
if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
    OIFS=$IFS
    IFS='.'
    ip=($ip)
    IFS=$OIFS
    [[ ${ip[0]} -le 255 && ${ip[1]} -le 255 \
        && ${ip[2]} -le 255 && ${ip[3]} -le 255 ]]
    stat=$?
fi 
```

# python - 确保文件在 Python 中关闭

> ID：13015207
> 
> 赞同：4
> 
> 时间：2012-10-22T16:00:12.740
> 
> 标签：python, file-io

我有可以将文件作为参数的类，例如：

```
ParserClass(file('/some/file', 'rb')) 
```

如果我正确理解 Python，一旦对象被垃圾收集，文件将自动关闭。我不明白这到底是什么时候发生的。在如下函数中：

```
def parse_stuff(filename):
    parser = ParserClasss(file(filename, 'rb'))

    return list(parser.info()) 
```

该`parser`对象不应该在函数退出后立即进行 GC，从而导致文件关闭吗？然而，由于某种原因，Python 似乎在函数退出后很久才打开文件。或者至少看起来是这样，因为 Windows 不允许我修改文件，声称 Python 已打开它并迫使我关闭 IDLE。

有没有办法确保文件被关闭，而不是为我创建的每个文件明确要求它？我还想补充一点，这些类是外部的，我不想深入研究它们以找出它们与文件的确切内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T16:03:14.520

您可以使用该`with`语句打开文件，这将确保文件已关闭。

```
with open('/some/file', 'rb') as f:
    parser = ParserClasss(f)
    return list(parser.info()) 
```

有关详细信息，请参阅[http://www.python.org/dev/peps/pep-0343/ 。](http://www.python.org/dev/peps/pep-0343/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T16:03:13.287

可以`with`用来打开文件。当你使用时，当块退出`with`时文件将被隐式关闭，并且它也会处理异常状态。`with`

# wpf - WPF DataGrid 将 SelectedItem 属性绑定为 null 不起作用

> ID：13015209
> 
> 赞同：1
> 
> 时间：2012-10-22T16:00:24.247
> 
> 标签：wpf, binding, datagrid, selecteditem

我的 DataGrid 的 SelectedItem 绑定到下面的属性。

```
public OrderItemViewModel SelectedItem
{
    get { return _selectedItem; }
    set
    {
        if (_selectedItem != value)
        {
            _selectedItem = value;
            OnPropertyChanged(() => SelectedItem);

            if (_selectedItem != null && _isReturnMode)
            {
                if (_selectedItem.OrderItemModel.ProductDetails.IsConstructed)
                {
                    VisiblePaymentViewModel = new ViewReturnComponentsViewModel(this, value.OrderItemModel.ProductDetails);
                }
                else
                {
                    VisiblePaymentViewModel = new EditReturnItemViewModel(this, value);
                }
                SelectedItem = null;
            } 
        }
    }
} 
```

DataGrid 的 ItemsSource 绑定到

```
public ICollectionView VisibleOrderItems { get; set; } 
```

我之所以要在程序中重置 SelectedItem，是因为这是一个触摸屏应用程序，当他们选择项目时，我希望它改变视图，然后当他们回到带有数据网格的视图时我不希望选择项目。

我尝试创建一个单独的函数来清除 SelectedItem，并在单独的 View 完成时调用它，还尝试了各种绑定设置.... UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, IsSynchronizedWithCurrentItem

无法理解为什么这不起作用。

DataGrid 将该行显示为突出显示，但是当我单击该行时，它会设置 _selectedItem ( `_selectedItem != value`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:05:05.763

您是否尝试过设置 VisibleOrderItems.CurrentItem = null？

此外，当前项目和选定项目之间存在差异，当前是占据 ICollectionView 中的 CurrentItem 属性的项目，而 SelectedItems 是当前以任何方式选择的所有项目的集合。无需选择当前项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:20:34.827

```
if (_selectedItem != value)
        {
            _selectedItem = value;

            if (_selectedItem != null && _isReturnMode)
            {
                if (_selectedItem.OrderItemModel.ProductDetails.IsConstructed)
                {
                    VisiblePaymentViewModel = new ViewReturnComponentsViewModel(this, value.OrderItemModel.ProductDetails);
                }
                else
                {
                    VisiblePaymentViewModel = new EditReturnItemViewModel(this, value);
                }
                SelectedItem = null;
            } 
             OnPropertyChanged(() => SelectedItem);
        } 
```

在 if 块的末尾设置通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:43:12.283

在我的一个项目中，我遇到了与您完全相同的问题，并且我做了下面非常骇人听闻的解决方案。在 xml 中 -`NotifyOnSourceUpdated=True`很重要！：

```
 <DataGrid ItemsSource="{Binding Items}" 
SelectedItem="{Binding SelectedItem, Mode=TwoWay, NotifyOnSourceUpdated=True}"> 
```

在 viewmodel 属性应该看起来像下面的代码。请注意，代码不包含您的 if 条件，但我确信它足够清楚：

```
 public TestModel SelectedItem
    {
        get { return selectedItem; }
        set
        {
            selectedItem = value;

            if (selectedItem != null)
            {
                //.....do something with selected item

                //actual hack, execute SelectedItem = null async on UI thread
System.Windows.Threading.Dispatcher.CurrentDispatcher.BeginInvoke((ThreadStart)(() =>
                 {
                     SelectedItem = null;
                 }));
             }
             else
             {
                 OnPropertyChanged("SelectedItem");
             }               
        }
    } 
```

# c# - 如何限制从配置文件 C# 框架 3.5 读取的线程数

> ID：13015210
> 
> 赞同：2
> 
> 时间：2012-10-22T16:00:24.420
> 
> 标签：c#, .net, multithreading

我有一个类似于示例 C# 代码的应用程序这个[链接](http://msdn.microsoft.com/en-us/library/3dasc8as.aspx)。在此示例中，生成的线程数没有限制。

有人可以为我提供示例代码来限制生成的线程数（从配置文件中读取）。我正在使用框架 3.5。我没有升级到 4.0 的规定。

提前致谢--Joxin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:02:40.910

该类`ThreadPool`确实有选项 to [`SetMaxThreads`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setmaxthreads.aspx)，这将允许您设置最大线程数。

话虽如此，这很少是一个好主意-至少不是永久设置/更改。但是，这样做是有益的，然后针对特定算法恢复先前的最大线程数。

请注意，.NET 4 的 TPL 确实使这变得更简单，并且如果您安装[Rx 框架](http://www.microsoft.com/en-us/download/details.aspx?id=26649)，则可以在 .NET 3.5 中使用，因为 3.5 版本包括用于 .NET 3.5 的 TPL 的反向端口。这提供了直接限制例程工作的功能（通过[ParallelOptions.MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)）。

# c# - HtmlAnchor.RenderControl 抛出 NullReference 异常

> ID：13015212
> 
> 赞同：0
> 
> 时间：2012-10-22T16:00:28.123
> 
> 标签：c#, asp.net

我有这段代码

```
 var anchor = new HtmlAnchor {HRef = temp, InnerText = this.LinkDescription};
            anchor.Attributes.Add("class", "navActive back");
            anchor.ServerClick += new EventHandler(AnchorServerClick);
            writer.Write("<div id=\"leftnav\"><ul><li>");
            anchor.RenderControl(writer);
            writer.Write("</li></ul></div>"); 
```

在自定义 Web 控件中。我在 anchor.RenderControl 处收到 nullReference 异常，为什么？我调试了上面的，作者也不为空，锚也不。那里发生了什么事？谢谢！

编辑：我正在添加堆栈跟踪以进行调试

```
[NullReferenceException: Object reference not set to an instance of an object.]
System.Web.UI.HtmlControls.HtmlAnchor.GetPostBackOptions() +107
System.Web.UI.HtmlControls.HtmlAnchor.RenderAttributes(HtmlTextWriter writer) +10975634
System.Web.UI.HtmlControls.HtmlControl.RenderBeginTag(HtmlTextWriter writer) +56
System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +26
CER.Portal.Dashboard.Controls.BackLink.Render(HtmlTextWriter writer) +1151 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:05:08.317

查看 GetPostBackOptions 方法的代码，要么需要将 Page 属性设置为当前页面，要么将 CausesValidation 属性设置为 false：

```
private PostBackOptions GetPostBackOptions()
{
   PostBackOptions options = new PostBackOptions(this, string.Empty) 
   {
      RequiresJavaScriptProtocol = true
   };
   if (this.CausesValidation && (this.Page.GetValidators(this.ValidationGroup).Count > 0))
   {
      options.PerformValidation = true;
      options.ValidationGroup = this.ValidationGroup;
   }
   return options;
} 
```

在 RenderControl 调用之前添加*anchor.Page = this.Page*或*anchor.CausesValidation = false 。*

# javascript - Google Cloud Print Web Element 可以使用，但不适用于 iOS 版 Google Chrome

> ID：13015218
> 
> 赞同：2
> 
> 时间：2012-10-22T16:00:40.417
> 
> 标签：javascript, html, google-chrome, google-cloud-print, chrome-ios

我使用 GCP Web Element 在我的 Web 应用程序上发布要打印的项目，这是 Google 建议的代码...

JavaScript

```
<script src="http://www.google.com/cloudprint/client/cpgadget.js">
</script>
<script>
window.onload = function() {
var gadget = new cloudprint.Gadget();
gadget.setPrintButton(
        cloudprint.Gadget.createDefaultPrintButton("print_button_container")); //div id to contain the button
gadget.setPrintDocument("url", "Test Page", "http://www.google.com/landing/cloudprint/testpage.pdf");
}
</script> 
```

HTML...

```
<div id="print_button_container"></div> 
```

这一切都很好，它可以很好地发布文档并打印... Android 3.2 上的浏览​​器、Windows 版 Google Chrome 和 iOS 版 Safari

但是，它不会在适用于 iOS 的 Google Chrome 上发布文档（因此不会打印）

这是没有意义的，因为谷歌为 iOS 制作了 Chrome，也制作了云打印。

任何人都知道如何解决这个问题，还是我只需要等待谷歌在 Chrome for iOS 中修复它？

# ios - 尝试从设备上的 xcode 测试应用程序时出错

> ID：13015219
> 
> 赞同：2
> 
> 时间：2012-10-22T16:00:41.547
> 
> 标签：ios, xcode

大家好，我刚刚开始学习制作应用程序，但是每次我尝试在我的 ipod touch 上测试它时都会出现错误

这是完整的错误

> CreateUniversalBinary /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app/tweejump normal "armv6 armv7 armv6" cd /Users/scerip/Desktop/haqu-tweejump-9a05d35 setenv PATH "/Developer/Platforms/iPhoneOS.platform/开发者/usr/bin:/开发者/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" /usr/bin/lipo -create /Users/scerip/Desktop/Projects/tweejump.build/调试-iphoneos/tweejump.build/Objects-normal/armv6/tweejump /Users/scerip/Desktop/Projects/tweejump.build/Debug-iphoneos/tweejump.build/Objects-normal/armv7/tweejump /Users/scerip/Desktop/项目/tweejump.build/Debug-iphoneos/tweejump.build/Objects-normal/armv6/tweejump -output /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app/tweejump /usr/bin/lipo: /Users /scerip/Desktop/Projects/tweejump.build/Debug-iphoneos/tweejump。build/Objects-normal/armv6/tweejump 和 /Users/scerip/Desktop/Projects/tweejump.build/Debug-iphoneos/tweejump.build/Objects-normal/armv6/tweejump 具有相同的架构（armv6）并且不能在同一个胖输出文件中命令 /usr/bin/lipo 失败，退出代码为 1

我已经尝试了几种不同的解决方案，我在 stackoverflow 和互联网上找到了这些解决方案，但它们似乎都不起作用......有什么想法吗？

最好的问候 Jens Gleerup

EDIIIIT：弹出新错误：/

CodeSign /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app cd /Users/scerip/Desktop/haqu-tweejump-9a05d35 setenv PATH "/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer /usr/bin:/usr/bin:/bin:/usr/sbin:/sbin" setenv _CODESIGN_ALLOCATE_ /Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/codesign_allocate /usr/bin/codesign -f -s " iPhone 开发人员：Jens Gleerup (4JA43UQ24Y)" --resource-rules=/Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app/ResourceRules.plist --entitlements /Users/scerip/Desktop/Projects/tweejump.build /Debug-iphoneos/tweejump.build/tweejump.xcent /Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app

/Users/scerip/Desktop/Projects/Debug-iphoneos/tweejump.app：目标文件格式无法识别、无效或不合适的命令 /usr/bin/codesign 失败，退出代码为 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:07:16.257

我猜你的项目有,`have the same architectures (armv6)`和另一个在它的设置中。`"armv6 armv7 armv6"``armv6``armv7``armv6``Architectures`

打开项目的 Build Settings 并删除第二个 armv6（如果存在）。

# c# - 使用 SMO 检索 SQL Server、数据库、表信息

> ID：13015220
> 
> 赞同：2
> 
> 时间：2012-10-22T16:00:42.443
> 
> 标签：c#, sql, database

我使用以下方法获取数据库名称：

```
SqlDataSourceEnumerator sdse = SqlDataSourceEnumerator.Instance;
DataTable table = sdse.GetDataSources(); 
```

然后使用下面我得到一个数据库列表。

```
static void Main(string[] args)
        {
            {
                //Connect to the local, default instance of SQL Server. 
                Server srv;
                srv = new Server("LAPTOP\\SQLEXPRESS");
                //The connection is established when a property is requested.

                Console.WriteLine(srv.Databases.ToString());
                foreach (Database db in srv.Databases)
                {
                    Console.WriteLine(db);
                }
                Console.ReadLine();
            }
        } 
```

问题是我只得到系统数据库，没有其他的，即使它们存在。我不知道要更改什么来获取所有数据库的信息。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:27:05.693

虽然已经晚了，但我只是按照您的要求回答了您的问题。你为什么不试试这段代码片段：

```
Server srvMgmtServer = default(Server);
srvMgmtServer = new Server("LAPTOP\\SQLEXPRESS");
ServerConnection srvConn = default(ServerConnection);
srvConn = srvMgmtServer.ConnectionContext;
srvConn.LoginSecure = true;

foreach(Database db in srvMgmtServer.Databases;
{
    Console.WriteLine(db.Name);
} 
```

# youtube-api - 从特定的 YouTube 电影页面 (YouTube API) 中抓取 XML

> ID：13015222
> 
> 赞同：1
> 
> 时间：2012-10-22T16:00:52.093
> 
> 标签：youtube-api

是否可以抓取此页面？

[http://www.youtube.com/movie?v=mDqLG28m_Eo&internalcountrycode=US](http://www.youtube.com/movie?v=mDqLG28m_Eo&internalcountrycode=US)

我一直在使用这个 URL 来调用 YouTube API：

[https://gdata.youtube.com/feeds/api/videos/mDqLG28m_Eo?v=2](https://gdata.youtube.com/feeds/api/videos/mDqLG28m_Eo?v=2)

问题是它似乎是从这个页面调用的：

[http://www.youtube.com/watch?v=mDqLG28m_Eo&internalcountrycode=US](http://www.youtube.com/watch?v=mDqLG28m_Eo&internalcountrycode=US)

如何从主电影页面而不是预告片页面调用？任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:16:50.203

终于找到了一个好的答案：D 老实说，YouTube 电影 API 很烂。尝试从 YouTube API 电影文档中简单地复制并粘贴演示 URL，您将收到无效请求错误。我已经报告了这些错误，但开发团队就像“不值得努力解决这个问题”。电影 API 也不支持该`?q=`参数，但您可以这样做：进行正常的视频搜索并指定只返回电影：

```
https://gdata.youtube.com/feeds/api/videos/-/Movies?alt=json&v=2&q=Life%20in%20a%20day&alt=json 
```

不确定提要中是否有视频不是 YouTube 电影，但您可以通过检查是否`media:credit`存在来确定它。

这是您在现场抓取的电影“普罗米修斯”的演示：http: [//tuberapp.com/movie-mDqLG28m_Eo](http://tuberapp.com/movie-mDqLG28m_Eo)

# events - 删除 SharePoint 页面的当前次要版本

> ID：13015224
> 
> 赞同：0
> 
> 时间：2012-10-22T16:00:59.723
> 
> 标签：events, sharepoint

在事件处理程序的 SharePoint 页面库中，我想删除页面的当前次要版本。

假设我当前的版本是 3.15，我想删除这个版本。我使用 item.File.Versions.DeleteByLabel 会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:17:50.117

在不知道具体错误的情况下，我的猜测是您需要先恢复旧版本，然后才能删除[SPFileVersion.IsCurrentVersion](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfileversion.iscurrentversion.aspx)为 true 的版本。

编辑：

您的评论证实了我的怀疑，您不能删除当前版本。当我进一步研究它时，似乎当前版本甚至可能不存在于 SPFileVersionCollection 中。您的第二条评论中的代码可能不会采取任何行动。您可以通过尝试以下方法来验证这一点：

```
if (null == item.File.Versions.GetVersionFromLabel("3.15")) {
    // current version isn't contained in SPFileVersionCollection
} 
```

当我更多地考虑您的问题时，您是真的要删除当前版本还是要回滚到以前的版本？如果是后者，您可以改用[SPFile.UndoCheckOut](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfile.undocheckout.aspx)吗？

# forms - 预填充的表单字段在 Internet Explorer 中不起作用

> ID：13015228
> 
> 赞同：0
> 
> 时间：2012-10-22T16:01:08.590
> 
> 标签：forms, internet-explorer

我在我一直在处理的网站上有一个 PHP 表单。我使用以下内容来确保表单已预先填充了描述：-

`id="contactName" input name="name" class="input" type="text" placeholder="Enter your name here"`

我使用了 Placeholder="Pre-populated" 这在 Chrome、Firefox 和 Safari 中运行良好，但在 Internet Explorer 中没有显示任何解决方法以使文本显示在 IE 中的想法？

干杯

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:07:29.823

IE9 或更低版本不支持占位符。理论上IE10会支持。请参阅： [http ://caniuse.com/#search=placeholder](http://caniuse.com/#search=placeholder)

您可能会在 Google 上搜索一些其他解决方案。我找到了一个声称可以在 CSSNewbie.com 上工作的软件，但是当我在 IE 中运行它的测试脚本时没有看到它……也许我遗漏了一些东西。 [http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/](http://www.cssnewbie.com/cross-browser-support-for-html5-placeholder-text-in-forms/)

我还发现了一个要点，其中包含一些 Javascript 来填充支持： [https ://gist.github.com/1105055](https://gist.github.com/1105055)

# internet-explorer-7 - 列表项对的浮点数在 < IE7 中不起作用

> ID：13015229
> 
> 赞同：0
> 
> 时间：2012-10-22T16:01:16.227
> 
> 标签：internet-explorer-7, css-float, html-lists

我有这样的事情：

```
<ul>
<li class="first">Hello</li>
<li class="second">World</li>
<li class="first">Hello</li>
<li class="second">World</li>
</ul>​ 
```

像这样的CSS：

```
.first {
    float: left;
    clear: left;
}

.second {
    float: left;
    clear: right;
} 
```

我想要这样：

你好
世界你好世界

但在 IE7 中显示如下：
HelloWorldWorld
Hello

谁能解释我为什么，以及如何解决这个问题？

​这里有一个链接

[JSF中...](http://jsfiddle.net/pQApA/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:11:26.707

发生此问题是因为父元素（在本例中为`ul`）没有宽度，因此元素严重折叠。通过为子项和父项添加宽度，您可以实现您正在寻找的结果。

这是您的 JSFiddle 的更新版本：http: [//jsfiddle.net/vVwQM/](http://jsfiddle.net/vVwQM/)

# mysql - Mysql避免表到表关系

> ID：13015230
> 
> 赞同：0
> 
> 时间：2012-10-22T16:01:21.127
> 
> 标签：mysql

我有两张桌子...

表“标签”

```
+---------+----------+
|  tag    |   id     |
+---------+----------+
|  nancy  |   902    |
+---------+----------+
|  fred   |   903    |
+---------+----------+
|  suzan  |   904    |
+---------+----------+
|  joe    |   905    |
+---------+----------+ 
```

和表标签来标记

```
+---------+----------+
|  tag_a  |   tag_b  |
+---------+----------+
|  903    |   902    |
+---------+----------+
|  905    |   903    |
+---------+----------+
|  902    |   904    |
+---------+----------+
|  904    |   905    |
+---------+----------+ 
```

我经常使用带有“tag”表的 INNER JOIN 语句扫描标记以标记关系，以便我可以查询与“nancy”相关的人。我想知道如果将标签名称转储到标签到标签表中而不是加入标签表中以便我可以根据标签名称查找关系，我会做得更好。加入表格对性能有很大影响吗？我标记表的标记在 900k 行范围内。标签表约为 30k。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:05:54.390

如果您希望存储有关标签的任何元信息，那么无论如何您都需要一个`tag`表。添加连接确实*可能会*大大增加查询的费用。

在您的情况下，我建议您考虑以下事项：

1.  使用 InnoDB
2.  更改`id`为`TagString`
3.  将实际标签放入`TagString`
4.  `Tag`使用级联更新/删除创建表的外键

通过这种方式，您可以在单个列上进行分组、过滤等，但如果您需要更多信息，您可以加入`Tag`表格（或您需要的任何表格）。

[当我们达到 80,000,000 条标签记录并在http://tagcloud.com](http://tagcloud.com)上进行实时连接以生成标签云时，我遇到了一些严重的 MySQL 性能问题……一些缓存确实对此有所帮助，但它似乎仍在推动关系数据库的设计限制（以正常形式）。我们最好使用不同的存储格式，这种格式的写入成本可能更高，但读取速度更快。

# android - 附加到gmail时pdf的大小显示为0

> ID：13015233
> 
> 赞同：3
> 
> 时间：2012-10-22T16:01:29.660
> 
> 标签：android, pdf, email-attachments

```
String emailAddress[] = {""};

    File externalStorage = Environment.getExternalStorageDirectory();

    Uri uri = Uri.fromFile(new File(externalStorage.getAbsolutePath() + "/" + "com.example.pdf/sample.pdf"));

    Intent emailIntent = new Intent(Intent.ACTION_SEND);
    emailIntent.putExtra(Intent.EXTRA_EMAIL, emailAddress);
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Subject");
    emailIntent.putExtra(Intent.EXTRA_TEXT, "Text");
    emailIntent.setType("application/pdf");
    emailIntent.putExtra(Intent.EXTRA_STREAM, uri);

    startActivity(Intent.createChooser(emailIntent, "Send email using:")); 
```

logcat 中显示的消息是：

```
gMail Attachment URI: file:///mnt/sdcard/com.example.pdf/sample.pdf
gMail type: application/pdf
gmail name: sample.pdf
gmail size: 0 
```

问题是样本 pdf 的大小为 0，因此 pdf 不会作为电子邮件中的附件发送。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:45:36.520

您如何将pdf保存在该目录中？

如果您使用的是`getExternalStorageDirectory`（我假设您是），则该 pdf 对您的应用程序来说是私有的，并且无法通过电子邮件应用程序访问。

如果您需要将该文件保密到您的应用程序，并且仍然能够通过电子邮件共享，请使用：http `ContentProvider`: [//developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

如果您可以将该文件保存在共享目录中，则应使用：http `getExternalStoragePublicDirectory()`: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

# php - PHP：查询首先检索一些空行

> ID：13015237
> 
> 赞同：0
> 
> 时间：2012-10-22T16:01:34.107
> 
> 标签：php, mysql, tsql

我有以下代码：

```
while ($var1 == $var2)
{
    $sql = “SELECT disabled FROM MYTABLE WHERE VAR2=’$var2’”;
    $r = mysql_query($sql);
    while ($row = mysql_fetch_assoc($r)) 
    {
        // do something
    }
} 
```

我的问题是 $sql 检索十行：其中 4 行有数据，其余为空。

由于第一行是空的，第二行永远不会输入。

但是我需要输入它，我该怎么办？

在示例代码中，我使用的是 MySQL，但我可以使用 TSQL。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:10:44.870

如果您在“mysql_query”没有任何结果时遇到问题，只需添加一个条件：

```
$result = mysql_query($SQL);
while ($result && $row = mysql_fetch_array($result)) {
  // do something
} 
```

手册说... [mysql-fetch-assoc](http://php.net/manual/en/function.mysql-fetch-assoc.php) *“不鼓励使用这个扩展”*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:21:42.707

您可以先检查总行数。

```
while (mysql_num_rows($r) > 0 && $row = mysql_fetch_assoc($r)) 
{
    // do something
} 
```

抱歉，这不起作用，请尝试以下方法。

```
if(mysql_num_rows($r) > 0 ) {
    while ($row = mysql_fetch_assoc($r)) 
    {
       // do something
    }
} 
```

# java - java和sql到JList

> ID：13015240
> 
> 赞同：1
> 
> 时间：2012-10-22T16:01:41.273
> 
> 标签：java, mysql, swing, jdbc, jlist

将我的 mysql 数据放入 JList 的最佳方法是什么？我可以连接到数据库并输出结果。我一直在网上寻找各种方法，但没有得到想要的结果。除了发布任何代码之外，是否有任何很棒的教程来展示这是如何完成的，或者任何代码片段。

```
 try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection
        ("jdbc:mysql://www", "....", "....");

        st = con.createStatement();

        } catch (Exception ex) {
        System.out.println("error" + ex);
        }
        try {           

            String query = "select * from demo";
            rs = st.executeQuery(query);
            System.out.println("Records from Database");
            while(rs.next()) {                      
            String number  = rs.getString("number");
            System.out.println(number);         

            }
        } catch (Exception ex) {

        System.out.println("error" + ex);
        }
    }       
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:26:24.603

It looks like you understand how to query the database using [JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html). Now you just need to use the results to construct your preferred `ListModel`, as shown in [*How to Use Lists*](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:26:02.317

I use a spring class called [SimpleJdbcTemplate](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/jdbc/core/simple/SimpleJdbcTemplate.html) that you can use to query the database. Its fairly lightweight but avoids having to set up the XML mappings needed in Mybatis! or Hibernate.

Here is a fairly comprehensive [tutorial](http://static.springsource.org/spring/docs/2.0.x/reference/jdbc.html) .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:13:04.360

米巴蒂斯！或休眠 - 最短的答案。

# css - 使用 css 来完成这个布局

> ID：13015243
> 
> 赞同：-3
> 
> 时间：2012-10-22T16:01:46.273
> 
> 标签：css

我有一个响应式设计网站，在媒体查询后更改了奇怪的布局，需要我重新排序某些项目的布局：基本上我有 4 个部分，a、b、c、d 所以 A 是左列 B 是右列column 和 c 和 d 在下面是它们自己的行（* 表示换行）* A | B * C * D 然后我需要按此顺序将其重新排序为 4 个不同的行 * A * C * B * D 我可以使用 Javascript jQuery 重新排序事物，但现在更愿意依赖它，所以我正在寻找一个所有的 CSS 解决方案，PHP 解决方案，最后如果一切都不是可能的 Javascript/jQuery 解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:16:05.887

[干得好](http://jsfiddle.net/HV4KU/1/)

**HTML：**

```
<div id="a"></div>
<div id="b"></div>
<div id="c"></div>
<div id="d"></div>​ 
```

**CSS**

```
#a { background-color: #aaa; }
#b { background-color: #bbb; }
#c { background-color: #ccc; }
#d { background-color: #ddd; }

div { 
    height: 100px;
    width: 100%;
}

@media 
  screen and (min-width: 420px) {
    div { position: absolute; }
    #a{ 
       width: 50%;
    }

    #b { 
      top: 100px;
    }

    #c {
      left: 50%;
      width: 50%;
    }

    #d { 
      top: 200px;
    }
}
​ 
```

# java - 通过查看内置类的编译器代码编写优化代码的示例

> ID：13015244
> 
> 赞同：0
> 
> 时间：2012-10-22T16:01:49.177
> 
> 标签：java, optimization, compiler-construction

这可能不是一个实际的问题，但我只是为了获得一些有价值的附加知识而提出这个问题。我已经多次遇到这种情况（如阅读许多文章和博客），一旦一个人成为特定编程语言的专家，他们倾向于通过查看最细微的细节是如何实现来优化他们构建的任何应用程序中的代码通过查看他们用于开发应用程序的每个内置类的编译器代码。但我没有见过这种情况的例子。任何人都可以提出任何建议或提供一个片段。我非常擅长 Java，所以如果 Java 中存在任何这样的优化示例，任何人都可以写一个代码片段。如果不是我不介意任何编。作为问题的语言几乎涵盖了目前使用的语言。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:12:11.220

> 一旦一个人成为特定编程语言的专家，他们就会倾向于通过查看他们用于开发应用程序的每个内置类的编译器代码来了解最细微的细节是如何实现的，从而优化他们构建的任何应用程序中的代码

实际上我会说相反，相反，您更有可能看到

*   初学者：只需要得到任何有效的东西。
*   中级：尝试优化一切，因为你可以。
*   专家：易于理解和维护是最重要的。简单、干净的代码通常表现最好，当您确定需要优化代码时，才这样做。例如，因为您使用分析器对其进行了测量。

> 任何人都可以请提出任何建议或提供一个片段

我建议您阅读 中的代码`java.lang.*`， 这些代码被广泛使用并针对 Java 进行了专业优化`java.util.*`。`java.util.concurent.*`如果您假设复杂或迟钝的代码更“专家”，您可能会感到失望。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:21:32.077

我不建议任何人尝试猜测 JVM 本身内置的优化器。它根据您的代码执行方式使用运行时统计信息来动态优化您的代码。

我建议您编写最干净、最简单的代码，并让 JVM 在运行时进行优化。如果您有问题，请分析代码以找到它们。

# powershell - PowerShell 脚本不会作为 Windows 计划任务执行

> ID：13015245
> 
> 赞同：37
> 
> 时间：2012-10-22T16:01:51.723
> 
> 标签：powershell, scheduled-tasks

我有一个 PowerShell 脚本（有效）。在 Windows 任务计划程序中，我创建了一个要执行的新任务`"C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe"`，将参数作为我的 PS1 脚本传递。当任务运行时，我得到一个 Last Run Result `0x1`。

当脚本打开并且没有发生时，我更新了我的脚本以写入日志文件。这几乎就像任务甚至无法打开 Powershell.exe。

这听起来准确吗？可能是什么问题，或者我该如何解决？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-08-07T00:04:58.650

如果您遇到的问题与执行策略有关，那么您还可以设置 PowerShell 特定调用的执行策略。这是我通过计划任务执行 PowerShell 时通常会做的事情：

```
powershell.exe -NoProfile -NoLogo -NonInteractive -ExecutionPolicy Bypass -File \\path\to\script.ps1 
```

## 为什么？

### -NoProfile

这可确保您[不依赖用户的 PowerShell 配置文件中的任何内容](http://www.powertheshell.com/bp_noprofile/)，并避免执行该附加代码的开销。

### -NoLogo

这大多无关紧要。如果您正在捕获脚本的输出，也许它会这样做。主要是它让我感觉更好。

### -非交互式

如果脚本中的某些内容意外提示用户，确保您的任务不会无限期地等待。使用此开关，脚本将直接退出；至少你会有一个错误代码而不是一个挂起的脚本。

### -ExecutionPolicy 绕过

您可以使用`Unrestricted`此处或您喜欢的任何执行策略。**这可能是您最需要的**。

## 为什么我更喜欢以这种方式设置执行策略：

因为我不希望任务依赖于您将来可能有其他原因更改的全局非默认设置。如果其他一些进程依赖于不同的执行策略，那么它不会与您的任务相冲突。

另外，不必更改默认值总是很好的。更少记住/记录/测试。

### 奖金

[`0x1`有关导致计划任务的其他一些原因，请参阅 JohnLBevan 的答案](https://stackoverflow.com/a/42775860/3905079)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-14T00:31:54.400

任务计划程序调用 PowerShell 脚本以完成代码有几个可能的原因`0x1`：

*   执行策略不允许脚本运行。有关详细信息，请参阅[Briantist 的出色答案](https://stackoverflow.com/a/25172234/361842)。
*   该任务未`Run with highest privileges`启用标志（任务“常规”选项卡上的复选框）。*
*   参数被错误地传递给脚本。如果使用诸如 之类的方法`-File ".\MyScript.ps1" -Parameter1 'Demo'`，请尝试：`-Command "& .\MyScript.ps1 -Parameter1 'Demo'"`

*正如 Ben 在评论中指出的那样，`Run with highest privileges`不必启用/这取决于脚本是否需要管理员权限（例如，如果某些命令喜欢`Set-ExecutionPolicy`或`Stop-Process`可能需要这些权限）。如果您不确定，请尝试勾选该选项以查看它是否解决了您的问题；如果它似乎没有任何区别，请不要选中它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T16:23:10.143

我以前做过这个并且有类似的问题。它几乎总是 PowerShell 安全设置。最明显的是，我会仔细检查您的执行策略（假设您已设置它）。

任务以哪个用户身份运行？该用户之前是否运行过 PowerShell 脚本？如果我没记错的话，在第一次运行脚本时（无论执行策略如何），都会提示每个用户“允许”PowerShell 脚本运行（是/否）。那以前就咬过我。尝试：

*   以该用户身份登录
*   检查执行策略
*   从 PowerShell 提示符启动脚本
*   回复随后的任何提示。

第一次运行后，您不必再担心这一点，它应该可以从任务调度程序运行。

根据您的域安全性，您可能还必须设置组执行策略。这是一篇详细介绍如何执行此操作的文章，以及其他需要检查的事项：*[PowerShell 安全性](http://www.windowsecurity.com/articles/PowerShell-Security.html)*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-20T05:14:03.937

前面的答案很有价值。*我在“添加参数*”字段中添加了以下值。

```
-noninteractive -nologo -command "&{path\to\script.ps1}" 
```

确保添加 & 符号并将路径括在花括号中。不要忘记在＆符号之前和大括号后加上双引号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-07T10:07:41.520

如果您没有任何错误消息并且不知道问题所在 - 为什么 PowerShell 脚本不想从计划任务开始，请执行以下步骤以获得答案：

1.  以已为计划任务设置的用户身份运行 CMD 以执行 PowerShell 脚本
2.  浏览到 PowerShell 脚本所在的文件夹
3.  执行 PowerShell 脚本（删除所有阻止错误通知的语句，如果脚本中存在任何语句，例如 $ErrorActionPreference='silentlycontinue'）

您应该能够看到所有错误通知。

如果是我的一个脚本，它是：

> 找不到类型 [System.ServiceProcess.ServiceController]。确保已加载包含此类型的程序集。

在这种情况下，我必须在脚本的开头添加一行来加载缺少的程序集：

```
Add-Type -AssemblyName "System.ServiceProcess" 
```

以及下一个错误：

> 使用“1”参数调用“GetServices”的异常：“无法在计算机''上打开服务控制管理器。此操作可能需要其他权限。”
> 
> select ：无法处理该属性，因为属性“数据库名称”已存在

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-08T19:15:56.743

我使用@briantist 的上述答案解决了这个问题，但我想准确地找出解决问题的开关。

`-ExecutionPolicy`它与, `-Noninteractive`,或任何其他系统权限`-NoLogo`、`-NoProfile`运行脚本的用户帐户等无关。

只需在`Task Scheduler > Actions > Arguments`字段中的脚本路径前添加 -File 即可。如果没有此开关，PowerShell 将启动并显示任务历史记录`Action Completed`，但脚本未执行。

# asp.net-mvc-3 - MVC3 按钮单击以填充 html 表并删除个人段落

> ID：13015250
> 
> 赞同：0
> 
> 时间：2012-10-22T16:02:11.727
> 
> 标签：asp.net-mvc-3

我是 MVC3 的新手，正在尝试处理我的第一个小项目。我有一个 HomeController 有两个动作，Index() 和 GetData()。索引只返回索引视图。当索引页面加载时，我希望有一个 html 按钮或按钮类型的输入。当我单击此按钮时，我希望运行 GetData 操作，该操作根据 linq 查询选择一些数据并返回一个列表。然后在索引视图本身中，在我单击的按钮下方，我希望将列表填充到 html 表中.....我假设使用 foreach 循环。

这不起作用，我想我显然误解了这种 MVC 模式的概念。

我的控制器代码：

```
 private ReferenceDataContext data = new ReferenceDataContext();

    public ActionResult Index()
    {

        return View();

    }

    public ActionResult GetData()
    {

        using (data)
        {                
            var hosp = (from x in data.Hospitals
                          where x.HAcode == "Q36"
                          select x).ToList();
            ViewData["hosp"] = hosp;
            return RedirectToAction("Index");                
        }

    } 
```

我的查看代码：

```
@model IEnumerable<NursingHomes.Models.Hospitals>

@{
    ViewBag.Title = "Hospitals Verify";
}

<br />
<br />
@using (Html.BeginForm("GetData", "Home")) 
{ 
<input type="submit" value="Submit" title="Get Data" />  

<h2>Nursing Homes</h2>

<table>
<tr>
<th>Code</th>
<th>HAcode</th>
<th>Name</th>

</tr>

@foreach (NursingHomes.Models.Hospitals item in (List<NursingHomes.Models.Hospitals>)    ViewData["hosp"])
{ 
<tr>
<td>
@Html.DisplayFor(modelItem=>item.Code)
</td>
<td>
@Html.DisplayFor(modelItem=>item.HAcode)
</td>
<td>
@Html.DisplayFor(modelItem=>item.Name)
</td>

</tr>

}

</table>

} 
```

我在上面做错了什么？如果不使用 JQuery，这是不可能的吗？

基本问题是，如何在索引页面上单击该按钮，并告诉它运行 GetData 操作，然后使用 GetData 操作返回的列表在按钮下方构建表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:14:12.270

尝试从获取数据操作返回视图，如下所示：

```
return View("Index",YourModelObject); 
```

您可以在以下视图中使用此模型：

```
...
<table>
<tr>
<th>Code</th>
<th>HAcode</th>
<th>Name</th>

</tr>
If(Model !=null)
{
@foreach (NursingHomes.Models.Hospitals item in Model)
{ 
<tr>
<td>
 ..... 
```

**编辑：**如果你想保持 URL 相同，那么对 POST 操作使用 index 操作，如下所示：

```
public ActionResult Index()
        {
            if (Request.HttpMethod.ToLower().Equals("get"))
            {
                return View();
            }
            else
            {
                using (data)
                {
                    var hosp = (from x in data.Hospitals
                                where x.HAcode == "Q36"
                                select x).ToList();

                    return View(hosp);
                }
            }
        } 
```

在您的视图中，您应该删除操作名称和控制器名称参数。

```
@using (Html.BeginForm("GetData", "Home")) 
{ 
<input type="submit" value="Submit" title="Get Data" /> 
..... 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:40:54.007

您需要将代码分开如下：

1.  将包含按钮的索引视图
2.  包含表的数据视图。

索引视图：

```
 @{
        ViewBag.Title = "Hospitals Verify";
    }

    @using (Html.BeginForm("GetData", "Home")) 
    { 
        <input type="submit" value="Submit" title="Get Data" />  
    } 
```

获取数据视图：

```
 @model IEnumerable<NursingHomes.Models.Hospitals>
    @{
        ViewBag.Title = "Hospitals Verify";
    }

    @using (Html.BeginForm("GetData", "Home")) 
    { 
        <input type="submit" value="Submit" title="Get Data" />  
    }

    <h2>Nursing Homes</h2>

    <table>
      <tr>
       <th>Code</th>
       <th>HAcode</th>
       <th>Name</th>
      </tr>

     @foreach (var item in Model)
     { 
       <tr>
         <td>
           @Html.DisplayFor(modelItem=>item.Code)
         </td>
         <td>
           @Html.DisplayFor(modelItem=>item.HAcode)
         </td>
         <td>
           @Html.DisplayFor(modelItem=>item.Name)
         </td>
       </tr>
     }

     </table> 
```

然后在您的控制器中，返回模型而不是填充单独的 ViewData 实例

私有 ReferenceDataContext 数据 = new ReferenceDataContext();

```
public ActionResult Index()
{

    return View();

}

public ActionResult GetData()
{
    using (data)
    {                
        var hosp = (from x in data.Hospitals
                      where x.HAcode == "Q36"
                      select x).ToList();

        return View(hosp);                
    }

} 
```

如果您想将其提升到一个新的水平，您可以将 GetData 放在局部视图中并通过 ajax 进行检索，这样页面就可以无缝且不会重新加载。

# ios - 使用 Three20 更新应用程序

> ID：13015252
> 
> 赞同：3
> 
> 时间：2012-10-22T16:02:19.197
> 
> 标签：ios, iphone, three20

我正在制作一个使用 Three20 的应用程序的新版本。我已经决定停止使用 Three20 并传递给另一个库来制作 PhotoGallery。我已经知道手动删除 Three20 库并不是一件容易的事......所以我正在制作一个新的 Xcode 项目，它使用相同的包标识符进行上传。这样，为他的应用程序下载更新的用户，最终删除了 Three20 的所有文件和引用？或者链接库的文件没有像其他项目类一样被覆盖？我必须确保 Three20 以后不会再出现一些奇怪的错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:08:02.377

无论您是从当前项目中删除 Three20 还是创建一个不使用 Three20 的新项目，您最终都会得到相同的结果。最后，您将向 Apple 发送更新，而不会提及 Three20。当用户更新到您的应用程序的新版本时，旧应用程序将被更新版本替换。因此，使用新应用程序的客户不会提及 Three20。

我不确定您为什么要创建一个新项目只是为了删除 Three20。从您当前的项目中删除它很容易。只需颠倒您最初添加它的说明即可。确保在删除任何文件后进行干净的构建。您还应该在模拟器中删除并重新安装应用程序，以确保删除的文件真的消失了。

# mobile - 复制到也适用于移动设备的剪贴板？

> ID：13015253
> 
> 赞同：10
> 
> 时间：2012-10-22T16:02:22.910
> 
> 标签：mobile, clipboard

我熟悉 ZeroClipboard 和 jquery.copy，它们都使用 Flash。好的，所以我明白了，出于浏览器安全原因，不允许复制，我们需要 Flash。但这意味着复制功能在手机（iPhone、Android）或 iPad 上不起作用。

是否有任何资源或插件允许在现代浏览器（包括 IE7+）和移动浏览器上进行简单的复制到剪贴板功能？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T17:40:08.493

如果不使用闪存，则没有一个很好的解决方案。我会保持简单，并允许您的用户自己复制文本。这就是谷歌如何将他们的分析代码提供给用户以嵌入他们的网站。我敢肯定，如果有一个很好的方法来做到这一点，谷歌会使用它。

**保持简单：**

```
$(function(){
    $('.text').click(function(){
        $(this).select();
    });
}); 
```

焦点事件：http: [//jsfiddle.net/khXjC/](http://jsfiddle.net/khXjC/)

点击事件：http: [//jsfiddle.net/qjfgoeLm/](http://jsfiddle.net/qjfgoeLm/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-24T23:13:07.600

我只是想提供一个更新，因为这方面最近有一些进展。现代浏览器，除了 Safari 支持通过 JS 复制，使用 execCommand() api。

假设您构建您的 UI 以优雅地降级为 Safari 的手动复制，您可以在其余部分上实现复制到剪贴板。据推测，Safari 最终将包括对此的支持。

查看[https://clipboardjs.com/](https://clipboardjs.com/)和[http://www.sitepoint.com/javascript-copy-to-clipboard/](http://www.sitepoint.com/javascript-copy-to-clipboard/)的选项。

截至撰写时支持的浏览器：Chrome 42+、Firefox 41+、IE 9+、Opera 29+。

# ivy - 常春藤：配置。我错过了什么吗？

> ID：13015258
> 
> 赞同：1
> 
> 时间：2012-10-22T16:02:37.657
> 
> 标签：ivy

当我第一次开始使用 Ivy 时，我询问了配置，并被指向[Lightguard 关于该主题的博客文章](http://lightguard-jp.blogspot.com/2009/04/ivy-configurations-when-pulling-from.html)。我发现它非常有帮助。但是，我现在对这篇文章（和其他文章）所*提供*的配置有疑问。配置项如下所示：

```
<conf name="provided" 
    visibility="public" 
    description="this is much like compile, but indicates 
         you expect the JDK or a container to provide it. 
         It is only available on the compilation classpath, 
         and is not transitive."/> 
```

我把`description`参数分开了，这样更容易看到。注意它说“*并且不是传递的*”。

Ivy 怎么知道`provided`配置是不可传递的？配置没有`transitive="false"`参数。是因为此配置与 Maven 存储库交互的方式使其不可传递吗？或者，这是每个人都从一个博客复制到另一个博客的小*故障吗？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:53:11.607

我认为常春藤配置描述旨在反映[Maven 文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)中相应的范围描述：

> **假如**
> 
> 这很像 compile，但表明您希望 JDK 或容器在运行时提供依赖项。例如，在为 Java 企业版构建 Web 应用程序时，您可以将 Servlet API 和相关 Java EE API 的依赖设置为提供的范围，因为 Web 容器提供了这些类。此范围仅在编译和测试类路径上可用，并且*不可传递*。

至于 ivy 如何将此范围转换为 ivy 配置映射，我必须下载一个包含“提供的”范围依赖项的 Maven 模块来检查。

# 更新

需要记住的是，ivy 会翻译作用域在 Maven 中的工作方式。一个示例模块是：

*   [码头小服务程序](http://search.maven.org/#artifactdetails%7Corg.eclipse.jetty%7Cjetty-servlets%7C9.0.0.M1%7Cjar)

它的 POM 包含两个“提供的”范围依赖项，它们由 ivy 转换为以下 ivy 依赖项：

```
<dependency org="org.eclipse.jetty" name="jetty-webapp" ... conf="provided->compile(*),provided(*),runtime(*),master(*)"/>
<dependency org="org.eclipse.jetty.orbit" name="javax.servlet" ... conf="provided->compile(*),provided(*),runtime(*),master(*)"/> 
```

关键是这些依赖项都没有映射到以下 ivy 配置：

*   默认
*   编译

[这意味着当您声明对jetty-servlets](http://search.maven.org/#artifactdetails%7Corg.eclipse.jetty%7Cjetty-servlets%7C9.0.0.M1%7Cjar)的依赖项时，它们不会被拉下为传递依赖项。

# 更新

下载 Maven 模块时，ivy 会在刚性作用域系统之间转换为模仿相同操作的 ivy 配置。因此，当您在模块中声明以下配置映射“provided->default”时，**您**会将远程模块“编译”依赖项下拉到本地“提供”配置中（“编译”范围是 Maven 中的默认值和也在常春藤翻译的 Maven 模块中）。

要检索远程“提供”依赖项，您必须指定“提供->提供”，这可以使用 ivy，但不是 Maven 模块支持的操作。

# javascript - 用撇号html代码传递js参数

> ID：13015259
> 
> 赞同：1
> 
> 时间：2012-10-22T16:02:38.507
> 
> 标签：javascript, google-chrome, asciiencoding

```
<a title="Delete" onclick="remove_file('folder', 4493,'Colin&#39;s folder')"><i class="icon-trash" style="cursor:pointer;"></i></a> 
```

上面的代码有 html 代码`&#39;`来表示字符串中的撇号。在 Google Chrome 中，我目前从该行收到以下错误：

> 未捕获的 SyntaxError：意外的标识符

我假设其中一个字符正在破坏解析？我有没有撇号代码的相同代码的其他实例，我没有收到错误。我该如何解决这个问题，同时仍然能够传递带撇号的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:04:33.567

怎么样

```
'Colin\'s folder' 
```

反而？Javascript 理解反斜杠转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:08:02.050

你能不能像下面这样逃避它：

```
onclick="remove_file('folder', 4493,'Colin\'s folder')" 
```

请参阅以下带有警报的 jsbin：http: [//jsbin.com/axuyun/1/](http://jsbin.com/axuyun/1/)

# installation - WiX CAQuietExec CustomAction 停止安装

> ID：13015262
> 
> 赞同：3
> 
> 时间：2012-10-22T16:02:52.410
> 
> 标签：installation, wix, burn, wix3.6

我有一个带有一系列软件包的 WiX Burn 安装。

更新以 /passive 模式运行，无需用户交互。

最后一个包仅在更新时运行，唯一目的是运行可执行文件，它使用以下代码执行此操作。

```
<!-- Quiet Execution Deferred execution with qtExec-->
<Property Id="QtExecDeferredExample" Value="&quot;C:\Program Files (x86)\Acme Inc\MyApp.exe&quot;"/>
<CustomAction Id="QtExecDeferredExample" BinaryKey="WixCA" DllEntry="CAQuietExec"
              Execute="deferred" Return="ignore" Impersonate="no"/>

<InstallExecuteSequence>
  <Custom Action="QtExecDeferredExample" Before="InstallFinalize"/>
</InstallExecuteSequence> 
```

但是，尽管 MyApp.exe 启动，但在 MyApp.exe 退出之前，安装不会终止。显然我希望应用程序启动并且安装程序终止它自己。

我无法修改 CustomAction 以在安装完成后运行..

```
<Custom Action="QtExecDeferredExample" After="InstallFinalize"/> 
```

由于以下原因：

```
ICE77: QtExecDeferredExample is a in-script custom action.  
It must be sequenced in between the InstallInitialize action and the InstallFinalize action in the InstallExecuteSequence table 
```

任何想法表示赞赏。

更新：BrianJ 的回答让我找到了答案。正如@escist 所询问的，我的CA 的相关部分如下：

```
 <!-- CA To set the property of the process to start-->
    <CustomAction
              Id        ="SetProcessToStart"
              BinaryKey ="WiXCustomActions"
              DllEntry  ="GetProcessToStart"
              Execute   ="immediate" />

    <!-- CA to start the process-->
    <CustomAction
              Id         ="StartApp"
              Directory  ="APPLICATIONROOTDIRECTORY"
              ExeCommand ="[PROCESSTOSTART]"
              Execute    ="deferred"
              Return     ="asyncNoWait"/>

  </Fragment>
</Wix> 
```

和其他地方（我的许多应用程序可能已经启动了这个过程，所以它的路径存储在注册表中）..

```
<Property Id="PROCESSTOSTART">[Not Set]</Property>
<InstallExecuteSequence>
  <!-- Use our Custom Action to set the PROCESSTOSTART property-->
  <!-- Custom Action to get the value from registry of the App that started the bootstrapper-->
  <Custom Action="SetProcessToStart" Before="LaunchConditions">NOT Installed</Custom>

  <!-- NOT installed ensures that the CA does not get fired on an uninstall -->
  <Custom Action="StartApp" Before="InstallFinalize">NOT Installed</Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:41:16.787

将自定义操作中“返回”的值更改为`Return="asyncNoWait"`。

# c++ - 源代码管理中的 .vcxproj

> ID：13015265
> 
> 赞同：17
> 
> 时间：2012-10-22T16:03:07.343
> 
> 标签：c++, visual-studio-2010

我一直在阅读很多关于是否应将 vcxproj 文件添加到源代码控制的问题。共识似乎是他们应该这样做，但是当打开文件时，我注意到其中包含许多用户特定的路径。

鉴于这是一个由许多人参与的项目，我是否仍应将其添加到源代码管理中？它似乎会与其他人的设置发生冲突。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-22T16:12:45.667

当然需要将它们添加到源代码管理中，*.vcxproj**是***项目文件。引用[MSDN](https://docs.microsoft.com/en-us/cpp/porting/build-system-changes)：

> 项目文件不再使用*.vcproj*文件扩展名。Visual Studio 自动将由早期版本的 Visual C++ 创建的项目文件转换为当前系统使用的格式。有关如何手动升级项目的详细信息，请参阅*/Upgrade* ( *devenv.exe* )。
> 
> 在当前版本中，项目文件的文件扩展名为 *.vcxproj*。

另一方面，*.vcxproj.user*文件不需要添加到源代码管理中。上面的链接还描述了每个文件包含的内容。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T16:14:32.940

它是您项目的项目文件。所以是的，您最好签入。您可能不想签入的唯一文件是 .vcxproj.user 文件。它包含用户特定的覆盖，尤其是调试器设置。

如果您不是在“程序员”模式下操作资源管理器，您只会犯这样的错误。它有隐藏文件扩展名的讨厌习惯。使用控制面板+文件夹选项，查看选项卡，取消选中“隐藏已知文件类型的扩展名”复选框来修复该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T21:06:01.317

只想将[OP 评论](https://stackoverflow.com/questions/13015265/vcxproj-in-source-control#comment17667773_13015434)拉入未来访问者的答案中。

> 我没有[添加绝对路径]，但这些文件是由 CMake 自动生成的。也许 CMake 添加了它们。不知道为什么会这样。

如果您使用的是 CMake，则 vcxproj 文件被视为构建工件，不应提交到版本控制中。

如果您使用 Visual Studio 作为构建系统，而不是使用 CMake 生成 vcxproj 文件，那么您应该提交 vcxproj 文件。

# cordova - Worklight：worklight 服务器是强制性的吗？

> ID：13015278
> 
> 赞同：0
> 
> 时间：2012-10-22T16:03:50.340
> 
> 标签：cordova, ibm-mobilefirst

我目前正在学习worklight，我想知道worklight服务器是否是强制性的？

我去年见过它，必须让服务器在 Eclipse 中构建应用程序。总是这样（在 IBM 收购之后）？

其他问题：是否必须让服务器调用休息服务？我想调用一个返回 json 的 REST 服务。我必须在 worklight 服务器上使用 HTTP 适配器还是可以直接请求它？

我看不到使用worklight server 的优势...它使用javascript、xml、xsl 来完成应该在java 中完成的事情。如果调用rest json服务，为什么要调用中介而不是直接调用服务？它会更慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T19:40:00.823

服务器现在嵌入在 Eclipse 开发环境中。在生产中，您将需要一台服务器。服务器在报告客户端访问、推送通知、将多个后端聚合为单个请求、针对后端资源的集中身份验证、在 B2E 场景中配置客户端等方面提供价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T16:56:44.093

只要您不使用需要服务器的功能，您就可以使 IBM Worklight 永远不会连接到 Worklight Server。但是，请记住，服务器对于许多不同的事物都很重要，包括安全框架、统一推送通知、离线加密存储、短信传递以及许多其他事物。

“我看不到使用worklight server的好处......它使用javascript，xml，xsl来做应该在java中完成的事情。如果调用一个rest json服务，为什么调用中介而不是直接服务？它会慢一些。”

服务器的重点也是集中和安全。无论您使用的是常见的 RESTful、mySql 等，它都使请求变得非常简单和一致。服务器将为您完成所有工作，而不是可能将您的应用程序指向多个位置。服务器将您的流量保持在中央集线器中。

如果您不想使用服务器并且您有现有的 Web 服务要连接，请像从网站或 Web 应用程序中一样使用 Webcode。使用 AJAX。

# jboss7.x - Jboss 7.1 ejb 2.1 自定义事务超时配置

> ID：13015280
> 
> 赞同：8
> 
> 时间：2012-10-22T16:03:59.690
> 
> 标签：jboss7.x, ejb-2.x

我目前正在尝试将我的 Web 应用程序从 jboss 5.1 升级到 jboss 7.1.1.Final

在我的 jboss.xml 中，我配置了一些自定义 ejb 超时，如下所示：

```
 <session>
        <ejb-name>MSServiceEJB</ejb-name>
        <jndi-name>ejb/MSServiceEJB</jndi-name>
        <local-jndi-name>ejb/LocalMSServiceEJB</local-jndi-name>
        <method-attributes>
            <method>
                <method-name>*</method-name>
                <transaction-timeout>3600</transaction-timeout>
            </method>
        </method-attributes>
    </session> 
```

jboss 7 忽略 jboss.xml，我在哪里可以指定我的 ejb 2.1 事务超时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T14:56:32.180

每

[来源](https://docs.jboss.org/author/display/AS71/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)

**替换 jboss.xml 部署描述符文件**

> jboss-ejb3.xml 部署描述符替换了 jboss.xml 部署描述符，以覆盖和添加由 Java Enterprise Edition (EE) 定义的 ejb3-jar.xml 部署描述符提供的特性。新文件与 jboss.xml 不兼容，并且 jboss.xml 现在在部署中被忽略。

您需要创建一个`jboss-ejb3.xml`并将配置放入其中。

它看起来像这样：

```
<assembly-descriptor>
    <container-transaction>
        <method>
            <ejb-name>EJBName</ejb-name>
            <method-name>methodName</method-name>
            <method-intf>Local</method-intf>
        </method>
        <tx:trans-timeout>
            <tx:timeout>500</tx:timeout>
            <tx:unit>Seconds</tx:unit>
        </tx:trans-timeout>
    </container-transaction>
</assembly-descriptor> 
```

您正在使用`EJB2.x`，因此最好将其配置为`ejb-jar.xml`

它应该在`META-INF of the EJB jar`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:48:02.450

您可以使用 @TransactionTimeOut 注释在 Bean 方法上指定。

```
@TransactionTimeout(value = 10, unit = TimeUnit.SECONDS) 
```

有关如何设置的详细说明，请参阅[此处](https://docs.jboss.org/author/display/AS7/EJB+3+Reference+Guide#EJB3ReferenceGuide-TransactionTimeout)

麦迪

# c - 在 c 中实现 fork()

> ID：13015281
> 
> 赞同：0
> 
> 时间：2012-10-22T16:03:59.993
> 
> 标签：c, windows, fork

我正在尝试实现一个 fork 功能。此函数将一个线程一分为二。第一个继续执行，而第二个开始执行`f`（被调用函数）`v`（参数）。我的 fork 函数的代码是

```
void t_fork(ThreadFunc f, any_ptr v, char *name)
{
     tcb *currentTcb =  malloc(sizeof(tcb));
     currentTcb->func= f;
     currentTcb->arg= v;
     currentTcb->sig=NULL;
     strcpy(currentTcb->name,name);
     setjmp(currentTcb->context);  
     q_insert(theadSystem.waitQ,currentTcb);
     (*f)(v);
} 
```

我还需要使用 spawn 例程为新线程分配堆栈空间。

在我的代码中`setjmp`导致错误，我也不知道如何使用 spawner 为新线程分配空间。

它导致异常：
`Unhandled exception at 0xcccccccc in Threads.exe: 0xC0000005: Access violation.`

任何人都可以帮助纠正这些问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:40:07.243

`Unhandled exception at 0xcccccccc in Threads.exe: 0xC0000005: Access violation.`表示您在Windows上运行，您可以确认您的环境吗？请注意，调用它`fork`会使 UNIX 人感到困惑！

您的内存访问违规意味着您在某处有一个 duff 指针，但由于您提供的信息有限，无法分辨出哪里。在您的代码中，您似乎没有在创建线程，尽管我们不知道是什么`*f`。您在哪里调用`CreateThread`或`_beginthreadex`（假设您使用的是 Windows 本机线程）。

你提到了线程，setjmp/longjmp，然后你问了`spawn`，它（在 Windows 上）创建了一个新进程。您是使用多个线程还是多个进程？

我刚刚发现了你的问题：*我如何使用 setjmp 和 longjmp 执行从一个进程到另一个进程的上下文切换，*答案是你不能。setjmp/longjmp 是一种在进程内跳转的方法，而不是在进程之间跳转，顺便说一句，这是一种创建内存泄漏的好方法。我会像瘟疫一样避免 setjmp/longjmp。

编辑：这是我最好的猜测。我敢打赌，您的 tcb 块的名称为：

```
char * name 
```

并且您只是在`strcpy`不分配任何内存并初始化指针的情况下对其进行操作。`strcpy(currentTcb->name,name);`可能会覆盖堆栈指针，因此`setjmp`失败。

# android - 错误：“链接”没有命名类型

> ID：13015288
> 
> 赞同：0
> 
> 时间：2012-10-22T16:04:21.877
> 
> 标签：android, linux, build

我正在尝试使用android_ndk在android下构建openssl 构建环境是linux-ubuntu。

我收到以下错误：/openssl-0.9.8k/include/openssl/evp.h:1:1: error: 'link' does not name a type

你知道什么是错的吗？

这是 evp.h 的内容：

```
link ../../crypto/evp/evp.h 
```

该链接是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:56:49.600

无论使用何种机制来提取 openssl 源代码都不理解 unix/linux 链接机制，导致它错误地将符号链接提取为包含文本的文件`link <target of link>`

openssl 源的 tar -tvf 显示有问题的文件是：

```
lrwxrwxrwx  0 openssl openssl      0 25 Mar  2009 openssl-0.9.8k/include/openssl/evp.h -> ../../crypto/evp/evp.h 
```

即链接的目标是最终成为内容。

您可能应该重新提取源代码并重试。

# compiler-errors - QNX momentics IDE 子文件夹中的 src 文件无法编译

> ID：13015289
> 
> 赞同：0
> 
> 时间：2012-10-22T16:04:26.603
> 
> 标签：compiler-errors, eclipse-cdt, subdirectory, qnx

我要重新问一个属于这篇文章的问题[https://stackoverflow.com/questions/12418452/source-files-in-project-subfolder-not-compile-qnx-momentics-ide](https://stackoverflow.com/questions/12418452/source-files-in-project-subfolder-not-compile-qnx-momentics-ide)因为我有完全相同的问题，在谷歌搜索了几个小时/天/之后。我没有找到任何帮助，我之前提到的线程没有被任何人回答，我希望不会得到同样的运气。

我将解释这个问题：我现在正在为 Blackberrys 的新 OS BB10 开发，它推荐使用 QNX Momentics IDE 以在 C/C /Qt/QML 等中进行开发。正如在评论中所说的那样，IDE上面的线程是 Eclipse 的重新打包/捆绑，带有 Eclipse CDT 插件和一些自定义 QNX 工具扩展。问题是当我试图将我的代码文件组织到主 src 文件夹中的子文件夹中时，这些文件将无法编译，这显然会阻止程序成功运行。如果您知道为什么会这样，请帮帮我:)。

我发现了一些关于 Eclipse 的站点，他们说我需要将子文件夹添加到项目的“路径和符号”设置中。我做到了，似乎没有任何改变。我也尝试创建一个新的 src furder 而不是常规文件夹，但是当我尝试这样做时，我收到以下错误：无效的项目路径：找到重复的路径条目。

所以伙计们，这让我发疯了，我现在在根 src 文件夹中有 50 个 C 类。请帮忙！。

问候！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T13:30:27.913

很抱歉延迟回答，但我们本周偶然发现了这个问题，我想我会分享我们的解决方案。

在我们的项目根目录中，自动生成的 Makefile 包含以下规则： $(MAKE) -Csrc hinstall

hinstall 仅将项目中的标头复制到构建中，但由于我们从未更改任何标头（仅源），因此没有区别。

将 Makefile 修改为：$(MAKE) -Csrc install

强制构建过程考虑所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:48:59.440

如果使用“GNU”类型的构建，QNX 构建结构通常在每个子目录中都有“Makefile”，其中包含一些 QRECURSE 行以进行递归构建。

见：[http ://www.qnx.com/developers/docs/6.3.2/neutrino/prog/make_convent.html](http://www.qnx.com/developers/docs/6.3.2/neutrino/prog/make_convent.html)

# android - 如何为对话框的结果暂停活动

> ID：13015290
> 
> 赞同：0
> 
> 时间：2012-10-22T16:04:25.963
> 
> 标签：android, android-alertdialog

我有一个测试变量是否为空的应用程序。如果它为空，我会显示一个设置变量的对话框。问题是在显示框时活动继续执行。我希望我的活动挂起并等待对话框的结果然后恢复。我怎样才能做到这一点？

```
if(nfcscannerapplication.getCompId() == null || 
                                   nfcscannerapplication.getCompId().trim().equalsIgnoreCase("null")){ 
            Log.e(TAG, "compid null***********");
            showPasswordDialogBox();

        }else{

            Log.e(TAG, "compid not null***********");
            String[] paramsCompOpt = new String[]{nfcscannerapplication.getCompId()};
            AsyncGetCompanyOptions agco = new AsyncGetCompanyOptions();
            agco.execute(paramsCompOpt);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:43:57.420

尝试类似：

```
 preMethod() {
        // Your actual code...
        if(nfcscannerapplication.getCompId() == null || nfcscannerapplication.getCompId().trim().equalsIgnoreCase("null")){ 
                    Log.e(TAG, "compid null***********");

                // Call postMethod() once the variable is set in the Dialog box**
                showPasswordDialogBox();

            } else{

                Log.e(TAG, "compid not null***********");
                String[] paramsCompOpt = new String[]{nfcscannerapplication.getCompId()};
                AsyncGetCompanyOptions agco = new AsyncGetCompanyOptions();
                agco.execute(paramsCompOpt);

                postMethod();    
            }
}

postMethod() {
  // Code to execute when the variable is set
 ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:27:17.657

您可以将需要设置变量的代码放在私有方法中。然后，如果变量已正确初始化，则调用该方法。或者，如果未正确初始化，则显示对话框并在关闭处理程序中调用私有方法。

# .net - 具有多种可能替换的正则表达式

> ID：13015297
> 
> 赞同：0
> 
> 时间：2012-10-22T16:04:41.057
> 
> 标签：.net, regex, translation, replace

我有一些现有文本需要替换为替换文本。要使用的替换文本取决于现有文本。这是一个简单的翻译表，显示了我的问题：

```
    ,'A', ==> ,'弗雷德',
    ,'B', ==> ,'玛丽',
    ... 等等...

```

匹配原始文本很容易。我遇到问题的部分是替换文本。如您所见，替换文本取决于匹配的文本：如果`,'A',`找到，我需要将其替换为`,'Fred',`. 基本上，我似乎需要一个翻译表机制。

我正在使用 .NET RegEx 类。

我了解捕获匹配项并在替换文本中重新使用它们，但我认为这不会奏效。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:19:08.573

由于您使用的是 .NET，因此有两种方法：

1.  多个替换：

    ```
    string.Replace("A", "Fred");
    string.Replace("B", "Mary");
    // ... (could use regex based replacement if necessary) 
    ```

2.  [`MatchEvaluator`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)将委托传递给`Regex.Replace`而不是替换字符串：

    ```
    Regex.Replace(input, matchRegexString, match => {
      // Code that takes a System.Text.RegularExpressions.Match and returns a string
    }); 
    ```

    并且委托的返回用作替换文本。（还有一个非静态版本，您可以在其中创建一个`Regex`实例。）过去，我这样做是为了根据在`%key%`字典中循环的输入执行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:22:35.203

我相信，在没有多次替换和没有委托/子例程的情况下执行此操作的唯一方法也只有在替换字符串*已经*“稍后”存在于您的主题字符串中时才有效。

替换这个：

```
,'A',(?=.*(Fred))|,'B',(?=.*(Mary)) 
```

有了这个：

```
,'$1$2', 
```

是的，一个相当愚蠢的把戏。投票给@Richard 为自己的愚蠢行为道歉。

# c++ - 使用一元和二元函数对象的 C++ 编译错误

> ID：13015299
> 
> 赞同：-1
> 
> 时间：2012-10-22T16:04:48.263
> 
> 标签：c++, operators, unary-operator, binary-operators

我有一个关于拍摄 C++ 代码片段的简短问题。一旦我想评估`()`运算符（在 main 方法中返回 0 之前的最后一行），我就会得到一个编译错误。代码如下所示：

```
 #include <functional>
    #include <algorithm>
    #include <iostream>

    using namespace std;

 //multiplication by 10
template <typename A, typename B>
struct multiply_by_ten : unary_function<A, B> {
  B operator()(A& a) {
    return a*10;
  }
};

//addition of the paramters
template <typename A, typename B, typename C>
struct add: binary_function<A, B, C> {

   C operator()(A& a, const B& b) {
        return  a + b;
}
  };

template <typename BinOp, typename Op1, typename Op2>
class combineops_t : public unary_function<typename Op1::argument_type,typename       BinOp::result_type>

{
protected:
   BinOp o; Op1 o1; Op2 o2;
public:
combineops_t(BinOp binop, Op1 op1, Op2 op2) : o(binop), o1(op1), o2(op2) {}

typename BinOp::result_type operator()( const typename Op1::argument_type &x) {
    return o(o1(x),o2(x));
   }
     };

int main(int argc, char **argv) {
add<int, int, int> a;
multiply_by_ten<int, int> b;
multiply_by_ten<int, int> c;

combineops_t<binary_function<int, int, int> , unary_function<int, int> , unary_function<int, int> >
z(a, b, c);
cout << z(13);

return 0;
} 
```

编译错误是德语，但它基本上说..

> 现在可以调用"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:18:39.923

这是因为您将类型参数的类型更改为`std::unary_function`并且`std::unary_function`没有函数调用运算符！

在这种情况下，您的模板及其参数具有复杂的结构，最好的方法是编写一个为您实例化模板的辅助函数：

```
template< class BinOp, class OP1, class OP2 >
combineops_t<BinOp, OP1, OP2> combine_ops( BinOp const& bop, OP1 const& op1, OP2 const& op2 )
{
    return combineops_t<BinOp, OP1, OP2> ( bop, op1, op2 );
}

int main() {
    ...

    auto z = combine_ops( a, b, c );
    std::cout << z( 13 );
} 
```

如果您的编译器不支持 C++11 ，请`auto`使用以下命令：

```
combineops_t<
    add<int, int, int>,
    multiply_by_ten<int, int>,
    multiply_by_ten<int, int>
> z( a, b, c ); 
```

`multiply_by_ten`除此之外，您的代码中还有另一个错误，在`add`模板中您`a`通过引用获取参数，因此只需将`A&`这些模板转换为`A const&`

# variables - 在 PowerShell 中动态创建变量

> ID：13015303
> 
> 赞同：31
> 
> 时间：2012-10-22T16:04:55.947
> 
> 标签：variables, loops, powershell

每次循环运行时如何创建一个新变量？

类似的东西

```
for ($i=1; $i -le 5; $i++)
{
    $"var + $i" = $i
    write-host $"var + $i
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-22T16:10:52.563

使用`New-Variable`and `Get-Variable`（注意可用的选项，包括范围）。例如

```
for ($i=1; $i -le 5; $i++)
{
    New-Variable -Name "var$i" -Value $i
    Get-Variable -Name "var$i" -ValueOnly
} 
```

# python - Python：将“键：值”元素列表解析为“键”字典：值对

> ID：13015304
> 
> 赞同：2
> 
> 时间：2012-10-22T16:05:00.583
> 
> 标签：python, list, dictionary

我有以下列表：

```
['a:1', 'b:2', 'c:3', 'd:4'] 
```

我想转换为有序的字典（使用`collections`）：

```
{'a': 1, 'b': 2, 'c': 3, 'd': 4} 
```

我在[这里](https://stackoverflow.com/questions/10380992/get-python-dictionary-from-string-containing-key-value-pairs)看到了使用正则表达式的解决方案，但我对正则表达式的熟悉程度不足以推出解决方案。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T16:07:01.593

```
d = collections.OrderedDict(el.split(':') for el in your_list) 
```

或者，将值转换为整数：

```
OrderedDict( (k, int(v)) for k, v in (el.split(':') for el in your_list)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:14:49.380

要将值作为整数获取，请尝试以下操作：

```
In [67]: lis=['a:1', 'b:2', 'c:3', 'd:4']

In [68]: def func(x):
    spl=x.split(':')
    return spl[0],int(spl[1])
   ....: 

In [71]: dict(map(func,lis))
Out[71]: {'a': 1, 'b': 2, 'c': 3, 'd': 4} 
```

# javascript - 尝试使用 jquery.mousewheel 触发滚动事件

> ID：13015305
> 
> 赞同：4
> 
> 时间：2012-10-22T16:05:01.380
> 
> 标签：javascript, triggers, scroll, mousewheel

我在使用 jquery.mousewheel 触发滚动事件时遇到了一些麻烦。我想“扩展”#bio-content-container 的滚动事件以在滚动到 #bio-slider-container 时触发。我正在使用以下代码：

```
var lastScrollTop = 0;      
$("#bio-content-container").scroll(function () {
    var st = $(this).scrollTop();
    if (st > lastScrollTop){
        scroll('Down');
    } else {
        scroll('Up');
    }
    lastScrollTop = st;
});

jQuery(function($) {
    $('#bio-slider-container')
        .bind('mousewheel', function(event, delta) {
            $("#bio-content-container").trigger('scroll');
            return false;
    });
}); 
```

我不想在#bio-slider-container 上触发滚动，所以这就是我使用鼠标滚轮的原因。任何帮助将非常感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:09:17.467

如果我理解正确，您想在#bio-slider-container 上使用鼠标滚轮时滚动#bio-content-container 的内容。您可能想查看[jquery.scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)插件。这段代码对我有用（没有看到你的 HTML）：

```
$(document).ready(function () {

    $('#bio-slider-container').bind('mousewheel', function (event, delta) {
        var content = $("#bio-content-container");
        if (delta < 0) {
            content.scrollTo("+=10");
        } else {
            content.scrollTo("-=10");
        }
    });

}); 
```

# c# - 如何在 Asp.net 上获取完整的文件路径？

> ID：13015310
> 
> 赞同：0
> 
> 时间：2012-10-22T16:05:13.863
> 
> 标签：c#, asp.net, treeview, fileinfo, directoryinfo

我正在使用 Asp.net treeview 来显示我的目录，包括文件。一旦用户单击树视图节点，我想显示文件路径。我正在使用 FullName 属性来获取路径。我遇到的问题是，treeview 仅显示目录而不是文件的完整路径！

**这是我的代码**

```
private static TreeNode CreateDirectoryNode(DirectoryInfo directoryInfo)
{
    TreeNode directoryNode = new TreeNode(directoryInfo.Name);

    foreach (DirectoryInfo directory in directoryInfo.GetDirectories())
    {
        if (!directory.Attributes.ToString().Contains("Hidden"))
        {
            directoryNode.ChildNodes.Add(CreateDirectoryNode(directory));
            directoryNode.Value = directoryInfo.FullName; // Here I'm passing the directory path
        }
    }

    foreach (FileInfo file in directoryInfo.GetFiles())
    {
        if (File.GetAttributes(file.FullName).ToString().IndexOf("Hidden") == -1)
        {
            directoryNode.ChildNodes.Add(new TreeNode(file.Name));
            directoryNode.Value = file.FullName; // Here I'm passing the file path
        }
    }

    return directoryNode;
} 
```

**更新** 由于某种原因，完整路径没有显示文件的**treeNode 值**，而是目录！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:25:42.803

您将值设置为错误的节点。

改变

```
 directoryNode.ChildNodes.Add(new TreeNode(file.Name));  
  directoryNode.Value = file.FullName; // Here I'm passing the file path 
```

到

```
 TreeNode fileNode = new TreeNode(file.Name, file.FullName);
  directoryNode.ChildNodes.Add(fileNode); 
```

这会将文件节点的值设置为其完整路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:04:19.470

不显示Value[属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.value.aspx)

改变

```
directoryNode.ChildNodes.Add(new TreeNode(file.Name)); 
```

到

```
directoryNode.ChildNodes.Add(new TreeNode(file.FullName)); 
```

# java - 检测两个 GPS 坐标边界框重叠

> ID：13015312
> 
> 赞同：0
> 
> 时间：2012-10-22T16:05:23.863
> 
> 标签：java, .net, gps, numbers

我有两个 GPS 位置。对于每一个我都在不同的范围内创建一个边界框。每个边界框都有最小/最大纬度和最小/最大经度。

需要实现一种方法来检测这两个框是否重叠（不要介意重叠范围......只有真/假）。此外，此方法将集成在一个长循环中，因此我正在寻找最有效的方法。

注意：当说重叠时，我的意思是-“地图上至少有一个点包含在两个边界框中”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-01T12:16:38.133

我面临同样的问题，以前的解决方案还不够。

此图显示了涵盖和未涵盖的案例

![](../Images/95b692ede6a8587df1cc34bb1ab93302.png)

我发现这个网页给出了解决问题的正确方法：[https](https://rbrundritt.wordpress.com/2009/10/03/determining-if-two-bounding-boxes-overlap/) ://rbrundritt.wordpress.com/2009/10/03/determining-if-two-bounding-boxes-overlap/ 这是实现这个解决方案：

> 函数 DoBoundingBoxesIntersect(bb1, bb2) {
> 
> ```
>  //First bounding box, top left corner, bottom right corner
>             var ATLx = bb1.TopLeftLatLong.Longitude;
>             var ATLy = bb1.TopLeftLatLong.Latitude;
>             var ABRx = bb1.BottomRightLatLong.Longitude;
>             var ABRy = bb1.BottomRightLatLong.Latitude;
> 
>             //Second bounding box, top left corner, bottom right corner
>             var BTLx = bb2.TopLeftLatLong.Longitude;
>             var BTLy = bb2.TopLeftLatLong.Latitude;
>             var BBRx = bb2.BottomRightLatLong.Longitude;
>             var BBRy = bb2.BottomRightLatLong.Latitude;
> 
>             var rabx = Math.abs(ATLx + ABRx – BTLx – BBRx);
>             var raby = Math.abs(ATLy + ABRy – BTLy – BBRy);
> 
>             //rAx + rBx
>             var raxPrbx = ABRx – ATLx + BBRx – BTLx;
> 
>             //rAy + rBy
>             var rayPrby = ATLy – ABRy + BTLy – BBRy;
> 
>             if(rabx <= raxPrbx && raby <= rayPrby)
>             {
>                             return true;
>             }
>             return false; 
> ```
> 
> }

我们可以这样调整解决方案：

*   第 1 步：检查 2 个边界框是否在经度上重叠

    *   Bondingbox1 的左经度在boundingbox2 的longMin 和longMax 之间，或者bondingbox1 的右经度在boundingbox2 的longMin 和longMax 之间
*   第 2 步：检查 2 个边界框是否在纬度上重叠

    *   Bondingbox1 的顶部纬度在 boundingbox2 的 latMin 和 latMax 之间，或者 bondingbox1 的底部经度在 boundingbox2 的 latMin 和 latMax 之间
*   如果 step1 和 step 2 正确，则 2 boundingbox 重叠

你可以在这里看到相应的草图：

![](../Images/567fc51a68b19aad3a980b57fea8c16f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:13:08.277

检查一个矩形的一个角是否在另一个矩形内就足够了。这两个持有是真实的：

*   rect1.minX*或*rect1.maxX 在 rect2.minX 和 rect2.maxX 之间
    **并且**
*   rect1.minY*或*rect1.maxY 在 rect2.minY 和 rect2.maxY 之间

这个检查应该不需要任何时间，所以效率不是问题。此外，参数的顺序无关紧要。

# php - php mb_strlen 返回值很奇怪

> ID：13015317
> 
> 赞同：0
> 
> 时间：2012-10-22T16:05:48.117
> 
> 标签：php, strlen

gb2312 是一个双字节字符集，使用 mb_strlen() 检查单个汉字会返回 2，但如果再多 2 个字符，有时结果很奇怪，有人知道为什么吗？我怎样才能得到合适的长度？

```
<?php
header('Content-type: text/html;charset=utf-8');//
$a="大";
echo mb_strlen($a,'gb2312'); // output 2
echo mb_strlen($a.$a,'gb2312'); // output 3 , it should be 4
echo mb_strlen($a.'a','gb2312'); // output 2, it should be 3
echo mb_strlen('a'.$a,'gb2312'); // output 3, 
?> 
```

谢谢 deceze，你的文档很有帮助，像我这样对编码知之甚少的人应该阅读它。[每个程序员绝对肯定需要了解的编码和字符集以处理文本](http://kunststube.net/encoding/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:08:06.263

尝试将 MB 内部编码设置为 UTF-8

```
/* Set internal character encoding to UTF-8 */
mb_internal_encoding("UTF-8"); 
```

[http://www.php.net/manual/en/function.mb-internal-encoding.php](http://www.php.net/manual/en/function.mb-internal-encoding.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T16:19:23.840

您的字符串可能存储为 UTF-8。

的 UTF-8 代码`"大"`是`E5 A4 A7`（根据[这个网页](http://rishida.net/tools/conversion/)），所以：

```
$a       // 3 bytes, gb2312 -> 2 char (1 + 0.5)
$a . $a  // 6 bytes, gb2312 -> 3 char
$a . 'a' // 4 bytes, gb2312 -> 2 char
'a' . $a // 4 bytes, first byte is <128 so will be interpreted as one
         // single character, gb2312 -> 3 char 
```

这只是一个猜测，但如果这样想，对我来说完全有意义。您可能可以参考[这个维基百科页面](http://en.wikipedia.org/wiki/GB_2312#EUC-CN)。

如果你真的想测试，我建议你创建一个以 gb2312 编码保存的单独文件，并使用`fopen`或其他任何方式读取它。然后，您将确定它处于所需的编码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:17:27.133

我认为你必须使用 utf-8 而不是 gb2312

试试这个：

```
<?php
header('Content-type: text/html;charset=utf-8');//
$a="大";
echo mb_strlen($a,'utf8'); // output 1
echo mb_strlen($a.$a,'utf8'); // output 2 
echo mb_strlen($a.'a','utf8'); // output 2
echo mb_strlen('a'.$a,'utf8'); // output 2, 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:45:46.427

通过写入`$a = "大";`PHP 文件，该变量`$a`包含源代码文件中引号之间的字节序列。如果该源代码文件以 UTF-8 保存，则该字符串是表示字符“大”的 UTF-8 字节序列。如果源代码文件保存在GB2312中，则为代表“大”的GB2312字节序列。但是保存在 GB2312 中的 PHP 文件实际上不会被解析为有效的 PHP，因为 PHP 需要与 ASCII 兼容的编码。

`mb_strlen`应该以指定的编码为您提供给定字符串中的*字符数。*即`mb_strlen('大', 'gb2312')`期望字符串是 GB2312 字节序列表示，并且应该返回***1***。即使 GB2312 是双字节编码，您期望它返回 2 也是错误的。`mb_strlen`返回*字符*数。

`strlen('大')`会给你*字节*数，因为它是一个天真的旧式函数，它对编码一无所知，只计算字节数。

The bottom-line being: your expectation was wrong, and you have a mismatch between what the "大" is actually encoded in (whatever you saved your source code as) and what you tell `mb_strlen` it is encoded in (`gb2312`). Therefore `mb_strlen` cannot do its job correctly and gives you varying random results.

# excel - 如何在excel中绘制一条平行于曲线线性部分的线？

> ID：13015318
> 
> 赞同：2
> 
> 时间：2012-10-22T16:05:49.400
> 
> 标签：excel

我有来自拉伸试验的应力应变数据。我在 excel 中绘制了应力与应变图。我需要找到屈服点。为此，我需要绘制一条平行于曲线的线性（直线）部分的线，在 x 轴上偏移 0.2% 并查看它在哪里与原始曲线相交。

所以，我试图只保留线性部分数据并绘制了一条趋势线，它给出了直线方程 y=mx。现在，如果我想要 0.2% 的偏移量，直线方程是 y=mx +c。我有方程，如何用方程在excel中画这条线？以及如何获得交点？我的做法对吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T04:21:23.687

应力-应变曲线，数据由 YouTube 提供：

![SO13015318 第一个例子](../Images/301d71a0172a0f13815d7f085acf87cc.png)

可以观察到，对于前九个数据点，这是线性的（弹性变形）。隐藏其他数据点并在图表中添加一条线性趋势线，并在图表上显示方程。这表明`y=4232.x + 0.701`。

比如说 N1`=4232*D2+.701`并复制到 N10 为其他数据系列提供数据。复制 N2:N10，选择图表，粘贴并格式化添加的系列以查看匹配：

![SO13015318 第二个例子](../Images/82deaa5146a2274cc10f2b6b2a9d071c.png)

对于 0.2% 的偏移量，当 y=0 时，x 为 0.002。对于平行线，斜率（由公式中的 4232 确定）不能更改，因此常数必须为 +0.701 到 -7.763。可以使用更改后的常数创建进一步的数据集，并像以前一样将其添加到图表中：

![SO13015318 第三个例子](../Images/843d8b6c28317ca04cc9a1357de098c5.png)

通过观察，可以看出在该示例中偏移屈服强度（0.2% 屈服强度）约为 80 MPa（其中绿线与蓝色曲线相交）。

# c# - 根据数据库中的值设置枚举

> ID：13015320
> 
> 赞同：0
> 
> 时间：2012-10-22T16:05:55.977
> 
> 标签：c#, c#-4.0

我有一个枚举类如下：

```
namespace Import.DataObject
{
    internal enum Status
    {
        FullTime,
        Terminated,
    }
} 
```

在我的主程序中，我有一个 DB 调用，然后是

```
 foreach (ClientStatus status in databaseStatus)
            {
                if (status.Name == "FullTime")
                {
                }
                if (status.Name == "Terminated")
                {
                }

            } 
```

我将如何根据 if 语句设置枚举？Name 有一个与之关联的 ID，我希望该 ID = enum 中的相应名称，我在 if 语句中同时拥有 name 和 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:07:27.590

使用`Enum.Parse`：

```
Status val = (Status)Enum.Parse(typeof(Status), status.Name); 
```

如果您不确定字符串是有效的枚举，请使用`Enum.TryParse`：

```
Status? val;
if (!Enum.TryParse<Status>(status.Name, out val))
    val = null; 
```

然后只需转换为 (int) 即可获得数值：

```
status.ID = (int)val; 
```

# jsf - 将字符（与传递字符串）传递给 EL 中的支持 bean 方法

> ID：13015322
> 
> 赞同：2
> 
> 时间：2012-10-22T16:05:59.323
> 
> 标签：jsf, primefaces, el

我想直接从命令按钮调用 setter 并传递一个值。我的问题是，如果将 setter 作为字符串传回，则 setter 需要一个 Character 和 jsf。有没有一种好方法可以在前端“修复”这个问题，而不必在我的支持 bean 上超载设置器？

命令按钮：

```
<p:commandButton value="SignOff"
    actionListener="#{manageItemHandler.dataEntryOp.setBomComplete('Y')}"
    rendered="#{speed2Session.isRendered('editManageItemOp')}"/> 
```

来自支持 bean 的 getter/setter：

```
protected Character bomComplete;

/**
 * @return the bomComplete
 */
public Character getBomComplete() {
    return bomComplete;
}
/**
 * @param bomComplete the bomComplete to set
 */
public void setBomComplete(Character bomComplete) {
    this.bomComplete = bomComplete;
} 
```

当我单击命令按钮时，我得到

```
11:47:19,270 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-steves-172.16.8.26-15081-1) JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=centerForm:j_idt271, Message=Method not found: data.operation.OperationData@595025a.setBomComplete(java.lang.String)
11:47:19,273 SEVERE [javax.enterprise.resource.webcontainer.jsf.context] (http-steves-172.16.8.26-15081-1) Method not found: data.operation.OperationData@595025a.setBomComplete(java.lang.String): javax.faces.event.AbortProcessingException: Method not found: data.operation.OperationData@595025a.setBomComplete(java.lang.String) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:23:37.933

不幸的是，这是设计使然。引号中的所有内容在 EL 中都被视为`String`. 一种解决方法是通过`String#charAt()`。

```
#{manageItemHandler.dataEntryOp.setBomComplete('Y'.charAt(0))} 
```

这只是丑陋的。另一种方法是传递其`int`代码点，即`89`for `Y`。

```
#{manageItemHandler.dataEntryOp.setBomComplete(89)} 
```

但这并不完全是自我记录。更好的是只使用枚举。

```
public enum Choice {
    Y, N;
} 
```

和

```
protected Choice bomComplete; 
```

您可以调用所需的方式

```
#{manageItemHandler.dataEntryOp.setBomComplete('Y')} 
```

该字符串`'Y'`将自动转换为该枚举。作为奖励，枚举具有更多其他优势，例如编译时类型安全。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-31T11:13:16.897

我尝试直接使用简单引号而不使用 charAt(0) 提示...

当参数类型为`char`或时，这可以正常工作`Character`。

传递字符的示例：

```
#{manageItemHandler.dataEntryOp.setBomComplete('Y')} 
```

传递字符串文字和字符常量的示例：

```
<p:panel style="border:none;#{vC.traceUpdate('p:panel','X')}"> 
```

traceUpdate() java 方法的代码如下：

```
@ManagedBean(name = "vC")
@ViewScoped
public class ActionViewController
extends AbstractViewController
    {
    public String traceUpdate(String s, Character c)
        {
        System.out.println("s:" + s + " " + c);
        return "";
        } 
```

或者

```
@ManagedBean(name = "vC")
@ViewScoped
public class ActionViewController
extends AbstractViewController
    {
    public String traceUpdate(String s, char c)
        {
        System.out.println("s:" + s + " " + c);
        return "";
        } 
```

在哪里`Character`被替换为`char`

此示例使用 Primefaces 6.2.4 在 Glassfish 4.1 上运行。

# java - 防止某些用户修改 Neo4J 节点

> ID：13015323
> 
> 赞同：1
> 
> 时间：2012-10-22T16:06:05.433
> 
> 标签：java, security, neo4j

在我的 Neo4J 数据库中，我想防止特定用户修改节点。我想允许任何用户成为“客人”并查看数据，而某些用户则成为管理员并查看和编辑尽可能多的数据。

这需要是 neo4j 服务器的一部分，我宁愿不在 neo4j 上实现 web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:25:13.910

您可以在只读模式下运行 Neo4j 服务器从属服务器，作为读/写主服务器的镜像。或者您可以实现节点级别的权限，就像在 RDBMS 中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:00:33.670

您可以使用[`SecurityRule`](http://components.neo4j.org/neo4j-server/stable/apidocs/org/neo4j/server/rest/security/SecurityRule.html). [这里](http://docs.neo4j.org/chunked/stable/security-server.html#_server_authorization_rules)有一个更好的描述。

基本上，这允许您在特定 URL 上设置 HTTP 授权。您可以做的是检查该 URL 以查看它尝试访问的节点，如果不允许用户对其进行变异，则拒绝该请求。

# c# - 访问修饰符对 Main 方法重要吗？

> ID：13015324
> 
> 赞同：8
> 
> 时间：2012-10-22T16:06:07.973
> 
> 标签：c#

可用的访问修饰符对 Main 方法重要吗？如果不是，为什么 Main 允许我们指定修饰符？为什么编译器不阻止我们指定一些微不足道的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:11:32.607

Main 是 public/private 根本不影响 CLR 调用它。CLR 将查找与其入口点关联的名为 main 的静态方法（默认情况下，但不一定），**而不查看访问修饰符**。

它只影响 main 对其他函数的可见性。好的做法是 Main**不公开**，因为它不会被程序集中的其他方法调用，只能由 CLR 调用。

# mongodb - 什么构成了 Mongodb 的“大量写入活动”？

> ID：13015326
> 
> 赞同：1
> 
> 时间：2012-10-22T16:06:21.960
> 
> 标签：mongodb, sharding

我目前正在开发一个使用 Mongodb 作为后端的在线订购应用程序。在研究分片时，[Mongo 文档](http://docs.mongodb.org/manual/core/sharding/)说你应该考虑分片，如果

“您的系统有大量的写入活动，单个 MongoDB 实例无法以足够快的速度写入数据以满足需求，所有其他方法都没有减少争用。”

所以我的问题是：什么构成大量的写入活动？我们是在说每秒 1000 次写入吗？100个？

我知道分片会引入一定程度的基础设施复杂性，如果我没有必要，我宁愿不参与。

谢谢！

R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:28:18.863

“大量写入活动”不是根据特定数量定义的......而是当您的常用使用模式超过服务器硬件的资源时。例如，当平均 I/O 刷新时间或 iowait 表明 I/O 已成为重要的限制因素时。

在分片之前，您确实有其他选项需要考虑：

*   如果您的工作集大于 RAM 并且您有严重的页面错误，请升级您的 RAM
*   如果您的磁盘 I/O 跟不上，请考虑升级到更快的磁盘、RAID 或 SSD
*   查看并调整[预读](http://www.mongodb.org/display/DOCS/Production+Notes#ProductionNotes-Readahead)设置
*   研究慢速或低效查询的[优化](http://www.mongodb.org/display/DOCS/Optimization)
*   查看您的索引并删除不必要的索引

# c# - 如何为具有可变数量参数的目标创建委托

> ID：13015330
> 
> 赞同：6
> 
> 时间：2012-10-22T16:06:33.607
> 
> 标签：c#, linq, delegates, lambda

假设有一个方法接受可变数量的参数：

```
void Target( params object[] args ); 
```

要将其附加到具有具体参数列表的操作，我们可以创建一个 lambda 表达式：

```
Action<int, int> someAction += (a, b) => Target(a, b); 
```

是否有可能动态创建此 lambda 表达式以便能够将处理程序附加到任何类型的事件？就像是：

```
someAction += CreateDelegate( typeof(someAction), Target ); 
```

我尝试使用`Delegate.CreateDelegate`，但它希望目标提供一个带有具体参数列表的方法。我觉得这应该是可能的，`Expression.Lambda`但现在我没有任何成功。你有想法吗？

**编辑**

将事件重命名为操作，将处理程序重命名为目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:07:58.083

此方法的委托：

```
void Handle( params object[] args ); 
```

将是`Action<object[]>`，作为代表不能使用`params`修饰符。您必须执行编译器所做的事情，并将其他方法映射到对象数组中。

关键字由`params`编译器处理，因此运行时将使用该方法，就好像它只接受一个普通的对象数组一样。为此，您必须构建适当列表的对象数组，用您的对象填充它，然后将执行此操作的方法附加到您的处理程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T23:17:54.333

我通过分析以下行来查看 lambda 背后的表达式：

```
Expression<Action<int, int>> ex = (a, b) => Target(a, b); 
```

基于此，我创建了一个自己的委托工厂：

```
public static Delegate CreateDelegate( Type delegateType, Action<object[]> target )
{
    var sourceParameters = delegateType.GetMethod("Invoke").GetParameters();

    var parameters = sourceParameters.Select( p => Expression.Parameter( p.ParameterType, p.Name ) ).ToArray();

    var castParameters = parameters.Select(p => Expression.TypeAs(p, typeof(object))).ToArray();

    var createArray = Expression.NewArrayInit(typeof(object), castParameters);

    var invokeTarget = Expression.Invoke(Expression.Constant(target), createArray);

    var lambdaExpression = Expression.Lambda( delegateType, invokeTarget, parameters);

    return lambdaExpression.Compile();
 } 
```

# c# - 如何使用 C# 克隆现有表模式以创建具有相同结构的新空表？

> ID：13015334
> 
> 赞同：1
> 
> 时间：2012-10-22T16:06:48.603
> 
> 标签：c#, sql-server, sql-server-2008

我正在连接到 SQL Server 2008 数据库。

使用 C#，我想创建一个由我指定的名称的新表，它看起来与该数据库中的现有表完全一样。不涉及外键。

我有类似的代码

```
DataTable table = con.GetSchema("Tables");
foreach (System.Data.DataRow row in table.Rows)
{
    foreach (System.Data.DataColumn col in table.Columns) 
```

但这并没有让我走得很远。我真的需要自己遍历所有表吗？即使我确定了`DataTable`如何克隆它？我看了看，`DataTable.Clone`但看不到如何设置新名称并在数据库上创建该表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:09:51.163

SMO（[服务器管理对象](http://msdn.microsoft.com/en-us/library/ms162169.aspx)）具有大量的表脚本功能。我会从那里开始。

本文[可能](http://sqlblog.com/blogs/ben_miller/archive/2007/10/03/table-scripting-with-smo-part-1.aspx)会帮助您入门。

如果你想避免 SMO，你可以通过 SQLDataReader 来完成，如下（或类似的东西）：

```
using (SqlConnection cnn = new SqlConnection(connectionString))
{
    using (SqlCommand cmd = cnn.CreateCommand())
    {
       cmd.CommandText = "Execute some SQL Select here. Doesn't matter what. We just need a reference to the table.";
       cmd.CommandType = CommandType.Text;
       cnn.Open();
       using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.KeyInfo))
       {
          schema = rdr.GetSchemaTable();
       }
    cnn.Close();
    }
} 
```

# java - 字符串池的意外行为

> ID：13015339
> 
> 赞同：1
> 
> 时间：2012-10-22T16:07:05.407
> 
> 标签：java, string-comparison

我有以下测试：

```
public class EqualityTest
{
    String one = new String("Hello world");
    String two = new String("Hello ") + new String("world");

    @Test
    public void testStringPool()
    {
        assertFalse(one == two); // FALSE!!!
        assertTrue(one.equals(two));
        assertTrue(one.intern().equals(two.intern()));
    }
} 
```

我本来预计，由于 Java 的字符串池性质，VM 将分配一个和两个指向池中相同的字符串。为什么在这种情况下我的理解是错误的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T16:11:06.950

> 我本来预计，由于 Java 的字符串池性质，VM 将分配一个和两个指向池中相同的字符串。

只有字符串*常量*会被自动实习。因此，如果您的代码是：

```
String one = "Hello world";
String two = "Hello " + "world"; 
```

......然后`one`，`two`将具有相同的价值。因为您使用过`new String(...)`，所以这些表达式不是常量表达式，因此它们不是实习生。（当然，文字仍然是实习生......但不是从文字创建的字符串*。*）

有关什么是常量表达式的详细信息，请参阅[JLS 的第 15.28 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T16:10:06.850

每当您使用*new 运算符*时，总是会在*Heap*上创建一个新对象。因此，即使字符串**“Hello World”**在*Literal Pool*中可用，也不会被引用。所以实际上你在*堆上创建了**4 个对象*： -

 **   `Hello World`---->`new String("Hello World");`
*   `Hello`---->`new String("Hello");`
*   `World`---->`new String("World");`
*   再一次，`Hello World`---->`new String("Hello") + new String("World");`

*除此之外， Literal Pool*上还会创建*3 个文字*- “Hello World”、“Hello”和“World”

 *所以，总共有***7 个对象***。

* * *

另一方面，您是否使用以下方法创建了字符串：-

```
String str = "Hello World";
String str2 = "Hello " + "World"; 
```

同样，这里将在*Literal Pool上创建**3 个文字*- “Hello World”、“Hello” 和 “World”，但最后两个文字的连接将引用第*一个文字*。

 **因此`two String`参考点相同`literals`，因此它们现在是*相等*的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:16:03.433

每当使用 new String ("xyz") 创建 String 对象时，都会创建一个新的对象引用。

例如：当您只处理文字时，将使用字符串池性质。

```
String one = "Hello world";
String two = "Hello "+ "world";

System.out.println(one==two); 
```

将打印真实。****

# ruby-on-rails - Rails 2.3.14 - to_datetime 返回 UTC 时间

> ID：13015344
> 
> 赞同：0
> 
> 时间：2012-10-22T16:07:25.970
> 
> 标签：ruby-on-rails, ruby, timezone, rails-console

我有以下问题 - 我没有使用 config.time_zone，所以它应该默认为我的服务器时区（如果我理解正确的话）。

当我做类似的事情时，在我的 Rails 控制台中

```
'Oct 12, 2012'.to_datetime 
```

它返回

```
Fri, 12 Oct 2012 00:00:00 +0000 
```

但是当我跑步时

```
'Oct 12, 2012'.to_date.end_of_day 
```

我得到了我真正需要的时区：

```
2012-10-12 23:59:59 -0400 
```

你有什么想法为什么会发生这种情况以及我如何让它在同一时区工作？我找到了这个链接 - [https://rails.lighthouseapp.com/projects/8994/tickets/864-string-to_datetime-doesn-t-take-into-account-timezone-or-second-fractions](https://rails.lighthouseapp.com/projects/8994/tickets/864-string-to_datetime-doesn-t-take-into-account-timezone-or-second-fractions)，但我认为它应该被固定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:01:03.020

除非需要重大的安全更新，否则 Rails 2.3.14 很可能会成为 Rails 2.3 系列的终点。这可能会不打补丁。

也许 using`to_date`会产生与 不同的结果`to_datetime`，因此您可以以某种方式解决此问题。

不要忘记，如果需要，您还可以调整任何 DateTime 对象的时区。

# iphone - 表格单元子视图迭代未找到文本字段

> ID：13015348
> 
> 赞同：0
> 
> 时间：2012-10-22T16:07:30.803
> 
> 标签：iphone, objective-c, uitableview, subview

我创建了一个表格，其中每个单元格都包含一个文本标签和一个文本字段。我正在添加文本字段`[cell addSubview:passwordField];`，从视觉角度来看，它们出现并且是可编辑的，等等......

当我尝试从文本字段中检索输入的值时，就会出现问题。我遍历单元格并尝试获取子视图（即文本字段），但是，我的迭代只发现了文本标签。

这是我用来搜索的代码：

```
for(NSInteger i =0; i < [tableView numberOfRowsInSection:0]; i++){
   NSIndexPath *path = [NSIndexPath indexPathForRow:i inSection:0];
   UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];
   UIView* subView = [[cell.contentView subviews]lastObject]; // I've also tried object at index here

// Anything beyond this is just matching.... 
```

我采用的另一种方法是递归搜索子视图，但同样没有产生任何结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:10:55.637

您已经添加了您`textField`的单元格子视图。

```
[cell addSubview:passwordField]; 
```

当您尝试在`cell.contentView`.
将您添加`textField`为的子视图`cell.Contentview`

```
[cell.contentView addSubview:passwordField]; 
```

并以这种方式找到它 -

```
for(UIView *view in [cell.contentView subviews])
{
    if([view isKindOfClass:[UITextfield class]])
    {
       UITextField *textField = (UITextField *)view;
       NSLog(@"%@",textField.text);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:12:29.727

为什么不将数据源映射到`TableView`并仅检索/更新数据源中的值。然后，您可以调用`reloadRowsAtIndexPaths`以仅加载您刚刚更改的行。尝试迭代`TableView`而不是仅仅更新数据源似乎非常低效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T16:14:08.460

您`UIView* subView = [[cell.contentView subviews]lastObject];`可以尝试将其查找为：

```
for(UIView *view in [cell subviews])
{
  if([view isKindOfClass:[UITextfield class]]){
    // view is the reference to your textfield
  }
} 
```

这样，您可以将其他`UIView`s 添加为子视图，并且仍然可以获取文本字段的引用，而无需跟踪其子视图索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:17:04.287

我想到了两件事：

1.  从长远来看，创建一个`UITableViewCell`包含`UITextField`可作为属性访问的 a 会更容易。您可以使用 nib 来布局单元格，也可以在单元格 init 方法中以编程方式进行。这种方法将使您的代码更易于管理。

2.  您需要考虑单元重用。如果您正在重用单元格（应该如此），那么您需要在重用之前存储从文本字段中获取的值。

# php - 获取具体“ .. " 使用 PHP 正则表达式？

> ID：13015349
> 
> 赞同：2
> 
> 时间：2012-10-22T16:07:36.653
> 
> 标签：php, html, regex

我有一个`$page`包含 HTML 代码的变量 ( )，如下所示：

```
<html>
    <head>head</head>
    <body>
        <strong>12</strong>
        recommendations 
        <br />
        <strong>50</strong>
        connections
    </body>
</html> 
```

现在我想`50`用 PHP 中的正则表达式获取连接数（在这种情况下是 ），所以我使用这个：

```
preg_match('#<strong>(.*)</strong>#', $page, $connections) 
```

但这得到`12`，不是`50`。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:12:54.947

```
preg_match('/<strong>([0-9]*)<\/strong>\s+connections/', $page, $connections);

echo $connections[1]; // 50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:09:18.260

需要注意的是，不应该使用正则表达式来解析 HTML，看看[`preg_match_all()`](http://php.net/preg_match_all). 如果 HTML 遵循该结构，则您对第二个匹配感兴趣。

# c# - 记录使用脚本任务而不使用 SSIS 日志记录传输的行数

> ID：13015364
> 
> 赞同：0
> 
> 时间：2012-10-22T16:08:23.213
> 
> 标签：c#, vb.net, ssis

我在一个序列容器中有超过 40 个独立的数据流任务。

有没有办法将序列容器内每个数据流任务中传输到目标的行数记录到平面文件中？

我试过这个方法：

1.  使用 rowcount 任务将 rowcount 值存储到变量中。
2.  执行目标表任务。
3.  在数据流任务之后执行脚本任务将行计数变量写入平面文件。

此方法有效，但我必须继续为该容器内的每个数据流任务添加脚本任务。

有没有办法让这个脚本在每个数据流任务完成后自动执行，写入每个数据流任务传输的行数，自定义文本说“xyz 数据流任务传输 xxxx 行”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:39:08.517

如果您不想一次又一次地添加脚本任务，我建议您创建一个自定义数据流组件。

这将是一次性的工作，但它可以在您可能拥有的各种 SSIS 项目中一次又一次地重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:59:09.240

每个数据流都需要一个主包、一个“包处理程序包”和一个子包。

首先，在您的主包中，调用“包处理程序包”的次数与您拥有数据流的次数一样多。对于每一个，设置一个具有包文件路径的作用域变量。

在“包处理程序包”中，调用表示数据流的子包（使用包含文件路径的父包变量），并在执行包任务成功时调用脚本，该脚本将写下保存数字的变量文件（或表，或任何你想要的）中的行数。

在每个子包中，只需将行计数转换添加到您的包并将值写入父包变量。

所以包的顺序是这样的：

```
 MasterPackage.dtsx
                 |             |
                 |             |
 PackageHandler.dtsx         PackageHandler.dtsx
        |                           |
        |                           |
 ChildPackage_1.dtsx         ChildPackage_2.dtsx 
```

注意：你的子包里会有一个错误告诉你父包变量在这个包中不存在，没关系。它将在运行时工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:27:44.287

我们使用[http://pragmaticworks.com/Products/BI-xPress](http://pragmaticworks.com/Products/BI-xPress) - 它获取包并插入可配置的审计框架。确实有点贵，但评估可用的东西是一个很好的做法。

# c - zmq REQ 数据包仅在 dll 退出后发送

> ID：13015365
> 
> 赞同：2
> 
> 时间：2012-10-22T16:08:23.813
> 
> 标签：c, windows, sockets, tcp, zeromq

我有一个创建 zmq REQ 套接字并发送一些数据的程序，由于某种原因，数据仅在`DllMain`（在 msgbox 4 之后）而不是在`zmq_send()`.

```
void  client_init(void *z_socket) {
    assert(z_socket == NULL);

    void *context = NULL;
    zmq_msg_t send_msg;
    zmq_msg_init_data(&send_msg, "asdf", 4, NULL, NULL);

    context = zmq_init(10);
    MessageBox(NULL, "msg1", "yes", 1);
    z_socket = zmq_socket(context, ZMQ_REQ);
    assert(z_socket != NULL);

    MessageBox(NULL, "msg2", "yes", 1);
    assert(zmq_connect(z_socket, "tcp://127.0.0.1:3490") != -1);
    zmq_send(z_socket, &send_msg2, 0);

    MessageBox(NULL, "msg3", "yes", 1);
}

BOOL WINAPI DllMain(...) {
    void *z_socket = NULL;
    client_init(z_socket);
    MessageBox(NULL, "msg4", "yes", 1);

    return TRUE;
} 
```

为什么会发生？？？

顺便说一句，我使用 pyzmq 作为侦听端口 3490 的服务器

# macos - 如果 == 0，NSDateFormatter 返回空白分钟

> ID：13015367
> 
> 赞同：1
> 
> 时间：2012-10-22T16:08:26.310
> 
> 标签：macos, cocoa, nsdate, nsdateformatter

编码：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"m"];
NSLog(@"%@", [formatter stringFromDate:myDate]); 
```

输出：`0`if`myDate`的分钟值为`0`.

这是正常的，但是如果分钟设置为，**如何使其输出空白值**而不是？`0``0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:16:48.067

`NSString * newString = [myString stringByReplacingOccurrencesOfString:@"0" withString:@""];`

# php - 我如何同时创建一个表（使用 javascript insertRow()）并使用上一页中的数据填充它（通过 php）

> ID：13015372
> 
> 赞同：-1
> 
> 时间：2012-10-22T16:08:48.557
> 
> 标签：php, javascript, paypal, shopping-cart

我正在创建一个自定义购物车，并且需要将数据从产品页面发送到购物车页面。商品表格是针对衣服的，有一个表格，有几列尺寸，几行颜色，买家可以在表格正文中输入每个尺寸/颜色的“数量”。这将是很多输入，我想将所有信息传递到下一页上的购物车，并让 javascript 创建表格行/单元格以包含所有数据。我最终将使用贝宝将整个购物车作为一个项目输入。谢谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:13:33.467

我建议不要尝试通过 JavaScript 将 HTML 内容（您的表格数据）从一个页面传递到下一个页面。

我将“保存”用户选择的页面（A）上的更改......然后从页面（B）上的数据库中重新获取数据。

我认为尝试在 JavaScript 中完成这一切会变得很尴尬，并且可能会引发安全问题（例如，恶意用户可能会篡改/伪造数据）。

您还会发现，如果您确实使用 JavaScript 而不是将其持久化到后端层，那么您需要在每个页面导航上传递此内容而不会丢失任何内容，这将成为一个令人头疼的问题。你最好在页面之间保存它，这样就不会丢失任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:16:16.977

就我个人而言，我会使用 PHP 来解决这个问题。在 PHP 中传递你想要的变量比在 HTML 或 JS 中更容易。

最近我了解到使用 PHP`$_SESSION`变量来解决这些问题，但是地狱，你不会传递太多的变量（除非你期望有数百万的客户）所以为什么不尝试使用`$_SESSION`变量呢？它们非常易于使用，并且在小型系统中几乎不会造成混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:16:32.520

我理解你的要求。

当您在产品页面中时，您可以将用户操作保存在数据库中或使用 ajax 的临时会话中。然后用户导航到购物车页面，您可以再次使用 ajax 获取值，然后修改它们以将它们显示到表格中。

# java - 在 LDAP searchResult 上执行 nextElement 时的 NPE

> ID：13015379
> 
> 赞同：1
> 
> 时间：2012-10-22T16:09:13.780
> 
> 标签：java, jakarta-ee, nullpointerexception, jndi

在执行 answer.nextElement() 时，我在 jre 中有一个错误

> java.lang.NullPointerException：在 com.sun.jndi.ldap.LdapNamingEnumeration.getNextBatch(LdapNamingEnumeration.java:111) ~[na:1.6.0_31] 在 com.sun.jndi.ldap.LdapNamingEnumeration.nextAux(LdapNamingEnumeration.java) 处为空:245) ~[na:1.6.0_31] at com.sun.jndi.ldap.LdapNamingEnumeration.nextImpl(LdapNamingEnumeration.java:236) ~[na:1.6.0_31] at com.sun.jndi.ldap.LdapNamingEnumeration.next (LdapNamingEnumeration.java:184) ~[na:1.6.0_31] at com.sun.jndi.ldap.LdapNamingEnumeration.nextElement(LdapNamingEnumeration.java:88) ~[na:1.6.0_31]

这是我的代码：

```
 LdapContext ctx = ...;
        NamingEnumeration<SearchResult> answer = ctx.search(...);

        if (answer.hasMoreElements()) {
            ...
        }

        while (answer.hasMoreElements()) {
                String grpName = answer.nextElement().getAttributes().get("xxx").get().toString();
        ...
        } 
```

我不知道去哪里调查。

最好的，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T15:13:42.050

这发生在我身上。我遇到的问题是我在 LDAP 搜索中定义了**maxResults控件。**

在达到 maxResults 限制时迭代**NamingEnumerator**并执行**hasMore**方法时，引发了异常**SizeLimitExceededException**（这是预期的）。

问题是，如果在引发异常之后，您再次在**NamingEnumerator上执行****hasMore**方法，而不是返回 false（正如预期的那样，因为 maxResults execption 已经引发）它返回 TRUE，并且对**nextElement**的以下调用失败并出现**NullPointerException**你得到了。

# android - glGenTextures 不生成名称

> ID：13015386
> 
> 赞同：2
> 
> 时间：2012-10-22T16:09:36.247
> 
> 标签：android, opengl-es, android-ndk, opengl-es-1.1

我将 OpenGL ES 1.1 与 NDK 一起使用，有时当我调用`glGenTextures`它时，它不会更改我传入的名称持有者的值（甚至不会将其设置为 0）。

*   `glGetError`返回 0，没有错误。
*   所有 GL 代码都在从表面渲染器调用的 JNI 方法`onDrawFrame`中，因此上下文不应该是问题。（编辑：这是一个错误的假设，是问题的原因）
*   该代码在某些情况下有效，而在其他情况下无效。如果我在每一帧重复调用，它会在大约 5 次尝试后工作。（我根据要求生成字形）。
*   第一批纹理至少创建到#32，但之后它会被击中和错过。

有谁知道为什么`glGenTextures`似乎什么都不做的原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:11:35.620

glGenTextures 是否在有效的 OpenGL(-ES) 上下文处于活动状态时调用？如果您使用多个线程： OpenGL(-ES) 上下文一次只能在一个线程中处于活动状态。但是每个线程可能有不同的活动上下文。

# javascript - AngularJS 找不到具有最新 RequireJS 的模块

> ID：13015398
> 
> 赞同：8
> 
> 时间：2012-10-22T16:10:13.580
> 
> 标签：javascript, html, coffeescript, angularjs, requirejs

我刚刚升级到 RequireJS 2.1.1 - 我正在加载一个 AngularJS 应用程序。在主定义运行之前，我从 Angular 获得“无模块：应用程序”。

它在 RequireJS 2.0.1 上运行良好。知道可能发生了什么变化吗？

这是 public/index.html

```
<!doctype html>
<html lang="en" ng-app="app">
<head>
  <meta charset="utf-8">
  <title>AngularJS</title>
  <link rel="stylesheet" href="css/style.css"/>
  <script data-main="main" src="requirejs/require.js"></script>
</head>
<body>
  <div ng-view></div>
</body>
</html> 
```

这里是 public/main.coffee

```
require.config

  shim:
    underscore: exports: '_'
    ngResource:
      exports: 'angular'
      deps: ['angular']
    angular:
      exports: 'angular'
      deps: ['jquery']
    jquery: exports: 'jQuery'

  paths:
    underscore: 'underscore/index'
    angular: 'AngularJS/angular'
    ngResource: 'angular-modules/resource'
    jquery: 'jquery/jquery'

# Bootstrap angularjs using requirejs. 
define [], (require) ->
  angular = require 'angular'
  ngResource = require 'ngResource'

  TestCtrl = require 'controllers/TestCtrl'

  ## ROUTER ###########
  app = angular.module 'app', ['ngResource'], ($routeProvider) ->
    $routeProvider.when '/test', {templateUrl: 'partials/test.html', controller: TestCtrl}
    $routeProvider.otherwise {redirectTo: '/test'}

  return app 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-23T15:46:25.893

在这种情况下，您应该手动引导 angular 并删除 ng-app 属性，因为该模块在 dom 就绪时不可用：

```
angular.bootstrap document, ['app'] 
```

在您的定义功能结束时

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-10T03:24:21.960

你需要添加这个js文件：angular-resource.js

# opencv - 平面物体单应性计算和位姿估计

> ID：13015399
> 
> 赞同：1
> 
> 时间：2012-10-22T16:10:22.873
> 
> 标签：opencv, computer-vision, homography, pose-estimation

我正在尝试在 OpenCV 中实现我自己的 Homography 和 Pose 估计。假设我有一个方形图像作为模型，我想在相机的输入帧中定位它。我的问题是关于如何准备模型数据来计算 Homography。

我做了以下程序：

1-我在两个图像中提取了 3 个对应的集合。

```
 Input features:       Model Features:
p1_Input(278,278)---> p1_model(137,273)
p2_Input(317,235)---> p2_model(176,230)
p3_Input(217,204)---> p3_model(76,199)  //all in pixel 
```

2-解决P3P问题：

a) 使用相机内在参数对输入点进行归一化：

```
u.x=(p1_Input.x - cx) / fx 
u.y=(p1_Input.y - cy) / fy  
u.z=1

v.x=(p2_Input.x - cx) / fx 
v.y=(p2_Input.y - cy) / fy  
v.z=1

w.x=(p3_Input.x - cx) / fx 
w.y=(p3_Input.y - cy) / fy  
w.z=1 
```

b) 归一化长度以获得单位向量：

```
d = sqrt(u.x*u.x + u.y*u.y + 1);
u.x=u.x/d;
u.y=u.y/d;
u.z=u.z/d;  // and same for v and w 
```

c) 通过求解 p3p 并存储在 a、b 和 c 中找到 u 和相机焦点之间的距离。（v 和 w 相同）

d) 计算 3D 坐标：

```
A_Input.x=a*u.x;
A_Input.y=a*u.y;
A_Input.z=a*u.z;  // same for B_input and C_Input

like:
A_Input:(-0.0899342 ,0.0570672 ,0.976046)
B_Input:(-0.0197703 ,-0.0194311 ,0.955101) 
C_Input:(-0.197233 ,-0.0746457 ,0.967379) 
```

3-计算单应性

我的问题出现在这里。我应该如何准备和修改`p1_model,p2_model and p3_model`以便为 Homography 计算做好准备？

显然 `A_Input`是具有归一化日期的 3D 矢量，而`p1_model`以像素为单位的 2D 矢量。

解决问题后剩下的内容如下：

a) 为这两个集合找到中心点。

b) 使用这个公式点产品找到 H

4- 使用 H 和 SVD 找到刚性变换

更多详细信息可[在此处](http://iplimage.com/blog/p3p-perspective-point-overview/#comment-60)和[此处获得](http://nghiaho.com/?page_id=671)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:47:48.023

就坐标系而言，没有特定的“格式”需要您放入点以从 P3P （或[PnP](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html#cv-solvepnp)）算法中获得良好的结果，只要保持一致即可。给定 p1 和 p2 之间的对应关系，算法正在寻找的解决方案是

```
p2 = [resulting_3x4_transform]*p1; 
```

对于每个通信。出于数字原因，建议不要让任何坐标值非常大或非常小，但除此之外，您可以随意将您的点放在您喜欢的任何坐标系中。

# objective-c - 如何在方法中创建动态命名的选择器

> ID：13015400
> 
> 赞同：1
> 
> 时间：2012-10-22T16:10:22.800
> 
> 标签：objective-c, methods, arguments, selector

我有一个客观的 C 方法，它传入一个字符串和一个整数作为它的参数。在这个方法中，我想使用一个选择器——它的名称基于我传入的整数值。例如，如果整数参数是 5，我希望选择器命名为“buildXArrayIndex5”，或者如果整数参数是 3，我希望选择器命名为“buildXarrayIndex3”。我真的不知道如何做到这一点，或者它是否可能/合理。我是目标 C 的新手，所以我写出了我想要发生的事情，但它不是工作/有效的代码。但这里是：

```
- (void) startBuildingXArray:(int)senderID:(NSString *)moveTrackerObject {

NSString *methodNamePrefix = @"buildXArrayIndex";

NSString *realMethodName = [[NSString alloc]initWithFormat:@"%@%d",methodNamePrefix,   
senderID];

SEL realSelector = NSSelectorFromString(realMethodName);

[self realSelector: moveTrackerObject];

} 
```

在界面中，我声明了 SEL realSelector；但是我在没有运行它的情况下得到一个错误，它说“没有可见的@interface 声明了选择器 realSelector。” 但我确信这不是这段代码的唯一问题。谁能告诉我如何为此创建正确的代码或突出显示更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:15:09.597

您需要使用`-performSelector:`方法调用您的选择器，例如：

```
[self performSelector:realSelector]; 
```

此外，如果您想调用接受参数的方法，您需要在选择器名称中添加一个冒号：

```
NSString *realMethodName = [[NSString alloc]initWithFormat:@"%@%d:",methodNamePrefix, senderID]; 
```

并称之为：

```
[self performSelector:realSelector withObject:moveTrackerObject]; 
```

# hibernate - hibernate：如何在没有 JPA 注释的情况下使用额外的列映射连接表

> ID：13015409
> 
> 赞同：0
> 
> 时间：2012-10-22T16:11:10.347
> 
> 标签：hibernate, list, hibernate-mapping

假设我有以下课程：

```
class Student{
  String name;
  List<StudentClassMark> courseMarks;
}

class Class {
  String title;
}

class StudentClassMark {
   Student student;
   Class class;
   MarkType markType;   <-- notice this is the extra column that is causing problems
}

class MarkType {
    String description;
} 
```

如何使用休眠映射文件映射列表（所以没有 JPA 注释）？这是我尝试过的：

```
<class name="Student" table="PERSON">
    <property name="name" column="NAME"/>
    <bag name="courseMarks" inverse="false" cascade="all" table="STUDENT_CLASS_MARK">
        <key column="STUDENT" />
        <many-to-many>    <-- this is the section that I don't know how to do
            <column name="CLASS"/>
            <column name="MARK_TYPE"/>
        </many-to-many>
    </bag>
</class> 
```

我找到的示例都使用了我无法使用的 JPA 表示法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:32:05.023

好的，所以我想通了。这是正确的映射（我希望它可以帮助其他人）：

```
<class name="Student" table="PERSON">
    <property name="name" column="NAME"/>
    <bag name="courseMarks" inverse="false" cascade="all" table="STUDENT_CLASS_MARK">
        <key column="STUDENT" />
         <composite-element class="StudentClassMark">
             <many-to-one name="class" column="CLASS" />
             <many-to-one name="markType" column="MARK_TYPE" />
         </composite-element>
    </bag>
</class>

<class name="StudentClassMark" table="StudentClassMark">
   <property name="description" column="DESCRIPTION"/>
</class> 
```

# jsf - 如何以编程方式评估托管 bean 中的 EL

> ID：13015410
> 
> 赞同：4
> 
> 时间：2012-10-22T16:11:13.777
> 
> 标签：jsf, el, templating

我想在我的应用程序中添加一个基于 Seam / JSF 的简单模板语言，让用户编写自己的电子邮件。

由于我不想创建新的解析器，我想使用统一表达式语言自己设置上下文。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T16:40:13.703

如果您位于 JSF 上下文中，那么只需使用[`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/7/api/javax/faces/application/Application.html#evaluateExpressionGet-javax.faces.context.FacesContext-java.lang.String-java.lang.Class-)以编程方式评估包含 EL 表达式的字符串。

```
String unevaluatedString = convertMailTemplateToStringSomehow();
FacesContext context = FacesContext.getCurrentInstance();
String evaluatedString = context.getApplication().evaluateExpressionGet(context, unevaluatedString, String.class);
// ... 
```

如果您不在 JSF 上下文中，那么您需要使用独立的 EL API，例如[JUEL](http://juel.sourceforge.net/guide/start.html)。或者，如果您已经使用 EL 3.0 并且字符串表示唯一的 EL 表达式，则使用[`ELProcessor`](http://docs.oracle.com/javaee/7/api/javax/el/ELProcessor.html)API。

```
ELProcessor el = new ELProcessor();
el.defineBean("bean", new Bean());
el.eval("bean.foo"); // Without starting #{ and ending } !
// ... 
```

# python - 使用 boost python 从 C++ 传递一个 numpy 数组

> ID：13015411
> 
> 赞同：4
> 
> 时间：2012-10-22T16:11:15.433
> 
> 标签：python, boost, numpy

我需要将一个 numpy 数组从 C++ 传递给一个 python 函数。代码如下。蟒蛇方面：

```
import numpy as np
import  convert as cv

def f(x):
  x[0] = 5.
  return len(x)

if __name__ == '__main__':
  y = np.array([1., 2., 3., 4.])
  x = cv.func_n(f, y)
  print x 
```

C++ 方面：

```
#include <iostream>
#include <boost/python.hpp>

using namespace boost::python;
double func_n(PyObject* f, numeric::array &x)
{
  std::cerr << "Inside func_n\n";
  return boost::python::call<double>(f, boost::ref(x));
}

BOOST_PYTHON_MODULE(convert)
{
  numeric::array::set_module_and_type("numpy", "ndarray");

  def("func_n", &func_n);

} 
```

C++ 代码应该做的是将一个 python functopn 和一个 numpy 数组作为两个参数，然后将 numpy 数组传递给 python 函数。我得到的错误是：

```
Traceback (most recent call last):
  File "mm.py", line 11, in <module>
    x = cv.func_n(f, y)
TypeError: No Python class registered for C++ class class boost::python::numeric::array 
```

为什么？我是否必须在解释器的递归调用期间注册模块，如果是，如何注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:44:41.747

`boost::ref(x)`返回 a [`boost::reference_wrapper<T>`](http://www.boost.org/doc/libs/1_53_0/doc/html/ref.html)，它允许您传递对按值函数的引用。

[boost::python::call 文档](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/callbacks.html#argument_handling)显示参数根据它们的类型被不同地对待。如果 arg 是 a `boost::reference_wrapper<T>`，它会有效地将对 down 的引用传递`x`给 Python。

因此，在上面的代码中，您将对 numeric::array 的引用传递给 Python。您从 Python 调用的函数也接受引用。

现在我不确定这一点，但我怀疑由于您实际上从未在 Python/C++ 之间传递 numeric::array，因此 boost::python 决定不包装它或创建转换器（因为您实际上只是在传递地址）。这可能是您看到没有为 numeric::array 类型注册 Python 类的原因。

# c++ - c++ value_type 不适用于 std::map 中的 std::tr1:tuple

> ID：13015419
> 
> 赞同：5
> 
> 时间：2012-10-22T16:12:10.593
> 
> 标签：c++, templates, tuples, stdmap

以下代码片段适用于 Visual Studio 2008，但不适用于 Visual Studio 2010。

```
template <typename TKey>
struct MyStruct
{
    typedef std::map<TKey, int>  Keys;

    MyStruct()
    {
    }

    void set(TKey& key)
    {
#if 1
        // This works with VS 2008 but not with 2010
        keys_.insert(typename Keys::value_type(key, 1));
#else
        // This works with VS 2008 and VS 2010
        keys_.insert(std::pair<TKey, int>(key, 1));
#endif
    };

private:
    Keys keys_;
}; 
```

用法

```
typedef std::tr1::tuple<int, int> MyValueType;
MyStruct<MyValueType> a;
MyValueType x;
a.set(x); 
```

我收到以下错误：

> 1>C:\Program Files\Microsoft Visual Studio 10.0\VC\include\tuple(127): error C2440: 'initializing' : cannot convert from 'const MyValueType' to 'int' 1> 没有用户定义的转换运算符可用可以执行此转换，否则无法调用运算符 1> C:\Program Files\Microsoft Visual Studio 10.0\VC\include\xxtuple0(9) ：请参阅对函数模板实例化 'std::tr1::_Cons_node<_Car ,_Cdr>::_Cons_node<_Ty,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std ::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&,std::tr1::_Nil&>(_Farg0 &&,_Farg1,_Farg2,_Farg3,_Farg4,_Farg5,_Farg6,_Farg7,_Farg8 ,_Farg9)' 正在编译 1> 和 1> [ 1>
> _Car=int, 1> _Cdr=std::tr1::_Cons_node::_Type>, 1> _Ty=MyValueType, 1> _Farg0=MyValueType, 1> _Farg1=std::tr1::_Nil &, 1>
> _Farg2=std ::tr1::_Nil &, 1> _Farg3=std::tr1::_Nil &, 1> _Farg4=std::tr1::_Nil &, 1> _Farg5=std::tr1::_Nil &, 1> _Farg6 =std::tr1::_Nil &, 1> _Farg7=std::tr1::_Nil &, 1> _Farg8=std::tr1::_Nil &, 1> _Farg9=std::tr1::_Nil & 1> ] 1> C:\Program Files\Microsoft Visual Studio 10.0\VC\include\utility(145) : 参见函数模板实例化 'std::tr1::tuple<_Arg0,_Arg1>::tuple>(_Farg0 &&) ' 正在编译 1>
> 与 1> [ 1> _Arg0=int, 1>
> _Arg1=int, 1> _Farg0=const std::tr1::tuple 1> ] 1> C:\Program Files\Microsoft Visual Studio 10.0\VC\include\utility(142) : 在编译类模板成员函数'std: :_Pair_base<_Ty1,_Ty2>::_Pair_base(const std::tr1::tuple<_Arg0,_Arg1> &&,int &&)' 1> with 1>
> [ 1> _Ty1=const MyValueType, 1> _Ty2=int, 1 > _Arg0=int, 1> _Arg1=int 1> ] 1> C:\Program Files\Microsoft Visual Studio 10.0\VC\include\utility(174) : 请参阅类模板实例化 'std::_Pair_base<_Ty1,_Ty2 >' 正在编译 1> 与 1>
> [ 1> _Ty1=const MyValueType, 1> _Ty2=int 1> ] 1>
> D:\Projekte\demo\Demo.cpp(40) ：请参阅对类模板实例化 'std::pair<_Ty1,_Ty2>' 的引用 1> 编译 1> [ 1>
> _Ty1=const MyValueType, 1> _Ty2= int 1> ] 1> D:\Projekte\demo\Demo.cpp(39) : 编译类模板成员函数 'void MyStruct::set(TKey &)' 1> with 1> [ 1>
> TKey=MyValueType 1> ] 1>
> D:\Projekte\demo\Demo.cpp(92) : 请参阅正在编译的类模板实例化 'MyStruct' 1> 参考 1> [ 1>
> TKey=MyValueType 1> ] 1>C:\Program Files\Microsoft Visual Studio 10.0\VC\include\tuple(127)：错误 C2439：'std::tr1::_Cons_node<_Car,_Cdr>::_Value'：成员无法初始化 1> 使用 1> [ 1> _Car=int, 1>
> _Cdr=std::tr1::_Cons_node::_Type> 1> ] 1> C:\Program Files\Microsoft Visual Studio 10.0\VC\include \tuple(170) : 见 'std::tr1::_Cons_node<_Car,_Cdr>::_Value' 1> 的声明 1>
> [ 1> _Car=int, 1>
> _Cdr=std::tr1::_Cons_node: :_Type> 1> ] ========== 构建：0 成功，1 失败，0 最新，0 跳过 ==========

如果将 typedef std::tr1::tuple MyValueType 替换为 typedef int MyValueType 它可以工作。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:39:25.483

我认为这是与 MSVC 2010 中移动语义的错误实现有关的错误，因为您可以成功编译此代码：

```
typename Keys::value_type v( key, 1 );
keys_.insert(v); 
```

# javascript - JavaScript浏览器解析速度测试

> ID：13015421
> 
> 赞同：1
> 
> 时间：2012-10-22T16:12:15.563
> 
> 标签：javascript, performance, browser, pagespeed

我正在研究 Web 浏览器中 JavaScript 解析器的速度，重要的是它需要易于演示。我想出了一个简单的测试 - 想法是每个脚本块都单独解析和执行，因此可以对一大块脚本进行计时：

```
<script>var start = new Date().getTime();</script>

<script>
    /*! jQuery v1.8.2 jquery.com | jquery.org/license */
    ...
</script>

<script>alert ( new Date().getTime() - start );</script> 
```

从表面上看，这似乎可行，删除中间脚本块将导致可以忽略不计的时间。

但是，我不确定我的逻辑是否存在根本性缺陷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:03:10.280

似乎答案大致是肯定的，但是为了获得合理的结果（就像其他任何事情一样），应该多次运行测试以平衡编译缓存和垃圾收集的影响。上面的测试可以很容易地放入 Parse-n-Load 库中：[http ://carlos.bueno.org/2010/02/measuring-javascript-parse-and-load.html](http://carlos.bueno.org/2010/02/measuring-javascript-parse-and-load.html)

谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:19:07.607

您可能想要区分解析时间和执行时间。你可以做类似的事情

```
<script>start = Date.now();</script>
<script>
    parsed = Date.now();
    /*! jQuery v1.8.2 jquery.com | jquery.org/license */
    …
</script>
<script>var end = Date.now();
   alert ( "parsed in " + (parsed - start) + "ms" );
   alert ( "executed in " + (end - parsed) + "ms" );
   alert ( "overall time: " + (end - start) + "ms" );
</script> 
```

有了它，您可能能够检测到缓存的解析树等。但是，要了解更多不同的信息，请查看您的开发人员工具，它们会在其分析器部分中显示此类信息。或者在 Opera 中，它包含在网络面板中脚本的加载过程中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:15:48.207

这可能会有所帮助！

```
var start = new Date().getTime();
var end = new Date().getTime();
var time = end - start;
alert('Execution time: ' + time); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:17:56.617

如果你想对你的 JavaScript 进行基准测试，包括 MilliSeconds 等。

```
var t = new Date();
var start = t.getTime()*1000 + t.getMilliseconds();

/* do something*/

var t2 = new Date();
var end = t2.getTime()*1000 + t.getMilliseconds();

alert("The Code needed " + (end-start) + " milliseconds. That are " + parseInt((end-start)/1000) + " seconds."); 
```

# ios - 如何防止 IBOutlet 属性被释放（使用 ARC 的 iOS）

> ID：13015425
> 
> 赞同：4
> 
> 时间：2012-10-22T16:12:26.303
> 
> 标签：ios, automatic-ref-counting, iboutlet

我正在使用 ARC 将 Apple 的 SpeakHere 示例中的 AQRecorder 类实现到我的项目中。为了让它编译，我必须创建一个类 (AQRecorderController) 来控制 AQRecorder 实例（相当于示例中的 SpeakHereController）。AQRecorderController 通过我的主视图控制器的 nib 连接并作为属性实现。无论属性是强还是弱，都会出现问题。

我的问题是加载视图控制器后不久，AQRecorderController 被释放，但仅在设备上测试时。在模拟器中，这不会发生。它发生在 iPad 和 iPhone、iOS 5 和 iOS 6 上。出于录制目的，我需要在视图控制器的整个生命周期中维护此引用（您不能在录制时删除录制器并期望有一个完成的文件）。

有没有人遇到过这个或类似的事情？如果 AQRecorderController 属性很强，我在尝试使用它时会遇到错误的访问错误，如果它很弱，我只会得到一个 nil，并且它无法使用。

任何帮助将不胜感激。

**formViewController.h：**

```
#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>

@class AQRecorderController;

@interface formViewController : UIViewController <UIActionSheetDelegate,     UITableViewDelegate, UIGestureRecognizerDelegate> {

    IBOutlet AQRecorderController *aqRecorderController;
}

@property (nonatomic, weak)     IBOutlet AQRecorderController *aqRecorderController;

@end 
```

**AQRecorderController.h**

```
#import <Foundation/Foundation.h>
#import "AQRecorder.h"

@interface AQRecorderController : NSObject
{
    AQRecorder *aqRecorder;
}

@property (readonly)            AQRecorder* aqRecorder;
@property (nonatomic, assign)   bool        isRecording;
@property (nonatomic, strong)   NSString*   fileName;

-(bool)startRecording;
-(bool)pauseRecording;
-(bool)stopRecording;
-(bool)initializeRecordSettingsWithCompression:(bool)compressionEnabled;
@end 
```

**formView.xib：** [![录音笔尖](../Images/2d887049ad8ef72d125ace54c777c7ef.png)](https://i.stack.imgur.com/V0lim.png)

这是 AQRecorderController 释放后的堆栈跟踪：

```
 2012-10-23 10:34:09.600 TestApp[510:907] (
       0   TestApp                             0x000f32ab
-[AQRecorderController dealloc] + 138
        1   CoreFoundation                      0x32247311 CFRelease + 100
        2   CoreFoundation                      0x3225195d <redacted> + 140
        3   libobjc.A.dylib                     0x31ad5489 <redacted> + 168
        4   CoreFoundation                      0x32249441 _CFAutoreleasePoolPop + 16
        5   Foundation                          0x37303a7f <redacted> + 466
        6   CoreFoundation                      0x322db5df <redacted> + 14
        7   CoreFoundation                      0x322db291 <redacted> + 272
        8   CoreFoundation                      0x322d9f01 <redacted> + 1232
        9   CoreFoundation                      0x3224cebd CFRunLoopRunSpecific + 356
        10  CoreFoundation                      0x3224cd49 CFRunLoopRunInMode + 104
        11  GraphicsServices                    0x32fb52eb GSEventRunModal + 74
        12  UIKit                               0x34e92301 UIApplicationMain + 1120
        13  TestApp                             0x00081a9d main + 48
        14  TestApp                             0x0005aa68 start + 40
) 
```

这是记录器实例化的地方。

**AQRecorderController.mm：**

```
- (void)awakeFromNib
{
    aqRecorder = new AQRecorder();
} 
```

这是使用录音机的地方。至此，AQRecorderController 已被释放，并且此代码永远不会执行（它会导致崩溃，因为 AQRecorderController 已被释放）。

```
-(bool)startRecording
{
    if (aqRecorder->IsRunning())
    {
            [self stopRecording];
    }
    else // If we're not recording, start.
    {
    @try
    {
        // Start the recorder
        CFStringRef filenameString = (CFStringRef)CFBridgingRetain(self.fileName);
        aqRecorder->StartRecord(filenameString);
    }
    @catch(NSException *ex)
    {
        NSLog(@"Error: %@", [ex description]);
        return NO;
    }
            [self setFileDescriptionForFormat:aqRecorder->DataFormat() withName:@"Recorded File"];
    }

[self checkIfRecording];

return YES; 
```

}

这里是 AQRecorderController 实例化的地方。

**formViewController.mm：**

```
//this is called in viewDidAppear
-(void)initializeAQRecorder: (NSString*)soundFileName
{
    aqRecorderController = [[AQRecorderController alloc] init];

    NSLog(@"AQRecorderController is being initialized for file %@",soundFileName);
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    NSString *soundFilePath =[[NSString alloc] initWithFormat:@"%@",[documentsDir stringByAppendingPathComponent:soundFileName]];

    [aqRecorderController setFileName:soundFilePath];
    [aqRecorderController initializeRecordSettingsWithCompression:NO];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:42:35.140

> 我的问题是，加载视图控制器后不久，AQRecorderController 被释放......我需要在视图控制器的整个生命周期中维护这个引用

标记您的财产`strong`，而不是`weak`. `weak`表示 指向的对象`aqRecorderController`不会被 setter 保留；`strong`将导致它被保留。

> 如果 AQRecorderController 属性很强，我在尝试使用它时会遇到错误的访问错误，如果它很弱，我只会得到一个 nil，并且它无法使用。

这听起来像是在您的程序中某处将属性设置为某个无效值。由于您无法在 ARC 下手动保留该对象*并且*您已标记了该属性`weak`，因此它可能会在很早的时候发布。我不确定如果标记它为什么会出现问题`strong`……查看设置变量或属性的代码会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T20:55:34.350

从我所看到的，您永远不会将其设置`AQRecorderController`为您的。`formViewController`您需要这样做`self.aqRecorderController = aqRecorderController`，我相信一旦您离开创建控制器的范围，它就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:44:11.553

我现在让它工作。我还没有完全修复它，但我可以录制而不会崩溃。我注释掉了与 AQRecorderController 相关的每一行，直到它停止发布，然后慢慢将它们添加回来，直到我发现它发生在哪里。看起来音频会话设置代码以某种方式促使它释放控制器。这是导致它的代码（但这里没有抛出错误）：

来自 AQRecorderController.mm：

```
-(void)initializeRecordSettingsWithCompression:(bool)compressionEnabled
{

    OSStatus error = AudioSessionInitialize(NULL, NULL, interruptionListener, (__bridge void*)self);
    if (error) printf("ERROR INITIALIZING AUDIO SESSION! %d\n", (int)error);
    else
    {
            UInt32 category = kAudioSessionCategory_PlayAndRecord;
            error = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category);
            if (error) printf("couldn't set audio category!");

            error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, propListener, (__bridge void*)self);
            if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %d\n", (int)error);
            UInt32 inputAvailable = 0;
            UInt32 size = sizeof(inputAvailable);

            // we do not want to allow recording if input is not available
            error = AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable, &size, &inputAvailable);
            if (error) printf("ERROR GETTING INPUT AVAILABILITY! %d\n", (int)error);

            // we also need to listen to see if input availability changes
            error = AudioSessionAddPropertyListener(kAudioSessionProperty_AudioInputAvailable, propListener, (__bridge void*)self);
            if (error) printf("ERROR ADDING AUDIO SESSION PROP LISTENER! %d\n", (int)error);

            error = AudioSessionSetActive(true);
            if (error) printf("AudioSessionSetActive (true) failed");
    }
} 
```

到目前为止，这对于我的应用程序的运行并不是必需的，但我很好奇它为什么会导致 AQRecorderController 实例释放。

# android - LogCat Android - 如何获取错误的文件名

> ID：13015429
> 
> 赞同：0
> 
> 时间：2012-10-22T16:12:36.267
> 
> 标签：android, logging, filenames

我有这个问题：

我在 Eclipse Juno 中将 java 应用程序作为“Android 应用程序”启动。因此虚拟设备启动并且日志消息开始在 LogCat 选项卡中滚动。选项卡的列是级别、时间、PID、TID、应用程序、标签、文本。

有没有办法查看错误消息来自的文件名？例如，我得到文本：“sqlite 返回：错误代码 14，msg=无法在源代码行 25467 打开文件”，标签是“数据库”。那么我怎么知道这个错误是在哪个文件中产生的呢？

谢谢A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:20:23.173

您可以双击红线，它们会跳转到给出错误的代码源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:26:08.677

You can use filename as a tag while logging. E.g Log.i("YourFileName", "Your Log");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:21:02.883

它通常在某处说“由”，然后列出发生异常的文件和行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T22:33:05.690

我系统地添加了一个

```
static final String TAG = "ClassName"; 
```

所有类定义的属性并将其用于

```
Log.x(TAG, "Whatever"); 
```

# jquery - 仅使用 jquery 定位选定的类

> ID：13015431
> 
> 赞同：0
> 
> 时间：2012-10-22T16:12:42.630
> 
> 标签：jquery

我有以下代码；

```
$('.time-span').hover(function () {
    $('.leftRadius,.rightRadius').addClass('hovered');
},
function () {
    $('.leftRadius,.rightRadius').removeClass('hovered'); 
}); 
```

我的标记如下所示：

```
<DIV class=leftRadius></DIV>
<A class=time-span ></A>
<DIV class=rightRadius></DIV>

<DIV class=leftRadius></DIV>
<A class=time-span ></A>
<DIV class=rightRadius></DIV>

<DIV class=leftRadius></DIV>
<A class=time-span ></A>
<DIV class=rightRadius></DIV> 
```

如何编辑它以仅针对一个“.time-span”类（我的文档中有多个，我不能使用 id）？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:27:29.777

从您的标记中，我认为您想为特定部分写一个悬停..

```
$('.time-span').hover(function () {
    $(this).prev().addClass('hovered');
    $(this).next().addClass('hovered');
},
function () {
    $(this).prev().removeClass('hovered');
    $(this).next().removeClass('hovered');
}); 
```

或者简单地说，

```
$('.time-span').hover(function () {
    $(this).prev().toggleClass('hovered');
    $(this).next().toggleClass('hovered');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:15:50.653

参见 ':eq(x)' 作为 css 选择器：

[:eq() 选择器](http://api.jquery.com/eq-selector/)

前任：

```
$('.time-span:eq(0)').hover(function () { //:eq(0) for first occurence
    $('.leftRadius,.rightRadius').addClass('hovered');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T16:25:26.223

您也可以在这里使用 get(index) ，即：

```
$('.time-span').get(0).hover(function () ... 
```

# javascript - 如何使引导工具提示在单击链接之前保持可见

> ID：13015432
> 
> 赞同：41
> 
> 时间：2012-10-22T16:12:43.213
> 
> 标签：javascript, twitter-bootstrap, tooltip

我有一个链接，当用户有一些新通知时，我将用作通知我将通过显示工具提示（twitter 引导工具提示）来通知用户。我想要实现的是，在用户单击链接之前，该工具提示应该保持可见。一旦用户点击链接，工具提示就会被销毁。这是我到目前为止所拥有的，[http://jsfiddle.net/testtracker/QsYPv/](http://jsfiddle.net/testtracker/QsYPv/)

HTML

```
<p><a href="#" rel="tooltip" data-original-title="you have 2 notifications">Notification</a>.</p>​ 
```

JavaScript

```
$('p a').tooltip({placement: 'bottom'}).tooltip('show');​ 
```

那里发生的事情是，工具提示在您将其悬停之前一直可见，并且在您将其悬停时采用其默认行为（悬停时显示）。

我希望我已经提供了正确的信息并清除了我想做的事情。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-10-24T09:57:46.810

这是解决方案[http://jsfiddle.net/testtracker/QsYPv/8/](http://jsfiddle.net/testtracker/QsYPv/8/)

添加了“触发器”选项

```
$('p a').tooltip({placement: 'bottom',trigger: 'manual'}).tooltip('show'); 
```

然后，用这条线

```
$('p a').on('click',function(){$(this).tooltip('destroy');}); 
```

单击时销毁工具提示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T18:23:42.487

您可以添加一个变量来触发 mouseleave 事件以重新显示工具提示，然后正如您在评论中所说，只需在单击时销毁工具提示，因此当您再次将鼠标悬停时它不会显示：

```
var clickedNotify = false;
$('p a').tooltip({placement: 'bottom'}).tooltip('show');
$('p a').mouseleave(function() { if (!clickedNotify) { $('p a').tooltip({placement: 'bottom'}).tooltip('show'); } });
$('p a').click(function() { clickedNotify = true; $(this).tooltip('destroy'); }); 
```

这样，即使在鼠标离开之后，工具提示也会始终显示，直到单击链接。单击链接后，工具提示被破坏，并且在 mouseleave 上仍然不会在页面上生成 javascript 错误。

# magento - Magento 管理菜单不起作用 - 下拉菜单没有反应

> ID：13015435
> 
> 赞同：0
> 
> 时间：2012-10-22T16:12:46.447
> 
> 标签：magento

我在后端的管理菜单不再爆炸。我已经完成了 /js/ 文件夹中的所有文件权限，但没有运气。

当我从后端停用模块时出现问题。

我的萤火虫/火狐称之为错误：

```
TypeError: this.element.setAttribute is not a function
element.attachEvent("on" + actualEventName, responder);
prototype.js (linje 4536)

NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMXPathEvaluator.evaluate]
null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
prototype.js (linje 1724)

TypeError: element.attachEvent is not a function
element.attachEvent("on" + actualEventName, responder);
prototype.js (linje 4536)

TypeError: element.dispatchEvent is not a function
element.dispatchEvent(event);
prototype.js (linje 4619)

NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMXPathEvaluator.evaluate]
Selector._div.querySelector(this.expression);
prototype.js (linje 3222)

NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMXPathEvaluator.evaluate]
null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
prototype.js (linje 1724)

NS_ERROR_ILLEGAL_VALUE: Component returned failure code: 0x80070057 (NS_ERROR_ILLEGAL_VALUE) [nsIDOMXPathEvaluator.evaluate]
null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:17:28.690

好像您安装了一个新模块。Magento 的管理导航栏是基于 JS 的，所以任何 Js 错误都会完全崩溃。您必须按照自己的方式处理 JS 代码并解决这些错误以使其再次运行。还要从 /media/js 目录中清除我们缓存的 JS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T18:20:17.630

这是我禁用的模块的问题。它破坏了管理菜单，必须从数据库重新启用模块才能使其再次工作。这是mgt_amazingwysiwyg（如果有人想知道）

# asp.net - 图片在浏览器中打不开。Asp.net 图像控件和 imageurl 在设计器中设置和可见

> ID：13015436
> 
> 赞同：0
> 
> 时间：2012-10-22T16:12:51.600
> 
> 标签：asp.net, image, webforms

我在 asp.net 页面上有一个图像控件，并且设置了 imageurl。图片在设计器中显示正常，但在浏览器中打不开？？它有什么问题？那么图片网址还应该设置什么？？？

非常感谢帮助

```
<form id="form1" runat="server">
<div class="style1">
   <h1>A Basic Website<asp:Image ID="Image2" runat="server" Height="93px" 
           ImageAlign="Right" ImageUrl="~/App_LocalResources/Winter.jpg" Width="263px" />

    </h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:16:34.943

```
<img src="~/Images/mypic.jpg" alt="My Pic" runat="server" /> 
```

使用 tilda (~/) 运算符和 runat 属性，以便在服务器端解析路径。

我还建议不要使用设计器视图 - 使用代码视图和浏览器进行常规设计工作。试试 Firefox [Web 开发工具栏](https://addons.mozilla.org/en-US/firefox/addon/web-developer-toolbar/)。

要使用图像控件：

```
 <asp:Image ID="Image1" runat="server" 
        ImageUrl="~/Images/ASPdotNET_logo.jpg" 
        AlternateText="ASP.NET Logo"> 
```

这是一个[演练](http://msdn.microsoft.com/en-us/library/3has1x30%28v=vs.100%29.aspx)...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T18:58:28.837

非常感谢您的帮助，我找到了解决方案，我使用的 app_resources 文件夹不起作用，但是当我重命名该文件夹时，它确实起作用了....所以感谢您抽出时间来展示方式:)

# scala - 返回类型为 Option[Error] 时处理快速失败的故障

> ID：13015438
> 
> 赞同：4
> 
> 时间：2012-10-22T16:12:52.983
> 
> 标签：scala, scalaz

我已经发布了很多关于 Scala 中的故障处理的问题，我真的很感谢大家的回答。

在处理 Either 和 Scalaz 或 for 理解时，我了解我的选择，我还有另一个（最后一个？）问题：

当操作处理外部非功能性世界（如数据库）时，如何执行快速失败的操作序列？

* * *

我的意思是我有这样的方法：

```
def insertItem(item: Item): Either[Error,Item] 
```

感谢Either和这些答案，我知道如何使用Either：[Chaining method calls with Either](https://stackoverflow.com/questions/12107272/chaining-method-calls-with-either) and [Method parameters validation in Scala, with for comprehension and monads](https://stackoverflow.com/questions/12307965/method-parameters-validation-in-scala-with-for-comprehension-and-monads)

但是我的`Item`案例类是不可变的，将它作为 a 返回并没有任何意义，`Right`因为调用者已经具有该值。

因此，我怎样才能做同样的事情：

```
def insertItem(item: Item): Option[Error] 
```

* * *

在我的应用程序中，当创建用户时，我们还为他创建了一些项目。如果一个项目未能创建，那么整个过程应该停止。

当我直接`Option[Error]`在 for 理解中使用时，我认为我不会得到我期望的结果。

我想这样做是有道理的：

```
for {
  _ <- insertItem(item1).toLeft("???").right
  _ <- insertItem(item2).toLeft("???").right
  _ <- insertItem(item3).toLeft("???").right
} 
```

但作为价值观“？？？” 我输入的权利永远不会有用，我想我错过了不涉及创建永远不会使用的权利的优雅解决方案。

我想我正在寻找仅当结果为 时才会继续 for 理解的东西`None`，这有点奇怪，因为我只想继续下一个操作，而不是进行真正的`map`操作。

顺便说一句，如果可能的话，我想要非 Scalaz 和 Scalaz 解决方案。我不确定 Scalaz 是否处理此类事情，因为它似乎更专注于真正的函数式编程，并且可能不为像我的用例这样的副作用行为提供代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T19:17:25.880

我没有看到`Either[Error, Unit]`在这种情况下不使用的原则性理由（或者至少我已经这样做了，我对此并不感到内疚）。假设我们有以下内容：

```
def launch(thing: String): Either[String, Unit] = Either.cond(
  thing.nonEmpty,
  println("Launching the " + thing),
  "Need something to launch!"
) 
```

我们可以证明正确的投影单子是适当的惰性的：

```
scala> for {
     |   _ <- launch("flowers").right
     |   _ <- launch("").right
     |   r <- launch("MISSILES").right
     | } yield r
Launching the flowers
res1: Either[String,Unit] = Left(Need something to launch!) 
```

根据需要，没有导弹发射。

* * *

值得注意的是，如果您使用`Option`而不是`Either`，您所描述的操作只是给定“第一个”幺半群实例的总和`Option`（其中加法操作只是`orElse`）。例如，我们可以使用 Scalaz 7 编写以下代码：

```
import scalaz._, Scalaz._

def fst[A](x: Option[A]): Option[A] @@ Tags.First = Tag(x)

def launch(thing: String): Option[String] = if (thing.isEmpty) Some(
  "Need something to launch!"
) else {
  println("Launching the " + thing)
  None
} 
```

现在：

```
scala> val r: Option[String] = fst(launch("flowers")) |+| fst(
     |   launch("")) |+| fst(launch("MISSILES"))
Launching the flowers
r: Option[String] = Some(Need something to launch!) 
```

再一次，没有导弹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T19:21:42.673

我们在使用 scalaz 时会做类似的事情，以快速发送消息失败，尽管这不是惯用的 scalaz：

```
def insertItem(item: Item): Validation[Error, Unit]

val result = for {
  _ <- insertItem(item1)
  _ <- insertItem(item2)
  _ <- insertItem(item3)
} yield Unit 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T19:05:33.047

如果您想将包含的方法链接在一起，并且仅在is时`Option[Error]`执行下一步，您可以使用它。`Option``None``orElse`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:21:07.407

如果您只对第一次失败感兴趣，那么`Iterator`您可以选择：

```
case class Item(i: Int)

case class Error(i: Item)

val items = Iterator(1,3,7,-5,-2,0) map Item

def insertItem(item: Item): Option[Error] =
  if (item.i < 0) Some(Error(item)) else None

scala> val error = (items map insertItem find (_.isDefined)).flatten
error: Option[Error] = Some(Error(Item(-5))) 
```

如果`insertItem`不是您唯一的方法，则可以将它们与您的值分开：

```
val items = Iterator(
  () => insertItem(i1),
  () => deleteItem(i2),
  () => insertItem(i3),
  () => updateItem(i4)) 
```

# java - Java 图形全屏模式未注册键盘输入

> ID：13015442
> 
> 赞同：1
> 
> 时间：2012-10-22T16:13:03.333
> 
> 标签：java, canvas, awt, paint, keylistener

我正在尝试编写一个接受键盘输入的全屏应用程序。我已经尝试将 keylisteners 添加到我的 JFrame 中，现在添加到 JFrame 中的画布中，并将它们都设置为可聚焦的，但它似乎根本没有注册任何东西。在全屏模式下我有什么特别的事情要让它注册我的keyEvents吗？非常感谢任何帮助。（显示只是 JFrame 的扩展，还没有改变）

```
public class chanceCore implements Runnable, KeyListener, MouseListener {

boolean isRunning = true;
display frame;
Canvas canvas;
GraphicsDevice device;
GraphicsEnvironment environment;

public chanceCore() {
    setUp();
    run();
}

public void setUp() {
    frame = new display("CGE");
    canvas = new Canvas();
    frame.getContentPane().add(canvas);
    frame.setUndecorated(true);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    canvas.addKeyListener(this);
    canvas.addMouseListener(this);
    canvas.setFocusable(true);
    frame.setVisible(true);
    environment = GraphicsEnvironment.getLocalGraphicsEnvironment();
    device = environment.getDefaultScreenDevice();
    device.setFullScreenWindow(frame);

}

@Override
public void run() {
    while (isRunning) {
        draw(canvas.getGraphics());
        try {
            Thread.sleep(200);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
}

public void draw(Graphics g) {
    g.setColor(Color.BLUE);
    g.fillRect(0, 0, frame.getWidth(), frame.getHeight());
}

@Override
public void keyPressed(KeyEvent e) {
   System.out.println(e.getKeyCode());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:58:11.823

试试这个代码。调用 setFullScreenMode() 后，只需添加这两行。当我们进入全屏时出现问题，

```
frame.setVisible(false); 
```

# php - 检查文件目录中的字符串，但不包括子目录

> ID：13015446
> 
> 赞同：0
> 
> 时间：2012-10-22T16:13:11.263
> 
> 标签：php, html

我正在尝试编写一个程序来打开一个目录（在本例中为：files/），扫描该目录中的所有文件名（不包括任何目录或“..”或“.”），然后搜索“pages”数组中指定文件中的文件名。如果在页面中找不到文件名，文件将被移动到“未使用内容”。

我当前的代码不起作用。我怎样才能实现这个目标？

```
<?php

if($handle = opendir('files/')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            $file_names[] = $entry;
        }
    }
    closedir($handle);
}

$pages = array("page1.html","page2.shtml","page_three.shtml","page4.htm","page5.shtml");

for($x=0; $x<sizeOf($pages); $x++) {
  $current_page = file_get_contents($pages[$x]);
    for($i=0; $i<sizeOf($file_names); $i++) {
        if(!strpos($current_page,$file_names[$i])) {
            if (copy("files/".$file_names[$i],"files/unused-content/".$file_names[$i])) {
                unlink("files/".$file_names[$i]);
            }
        }
    }
}

?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:21:52.003

您不需要所有那么长的代码..您所需要的只是`FilesystemIterator`

```
$pages = array("1.xml","page2.shtml","page_three.shtml","page4.htm","page5.shtml");
$dir = new FilesystemIterator(__DIR__, FilesystemIterator::SKIP_DOTS);
foreach ( $dir as $file ) {
    if ($file->isFile() && in_array(strlen($file->getFilename()), $pages)) {
        // copy
        // unlink
    }
} 
```

[查看另一个使用 GlobIterator 的示例](https://stackoverflow.com/a/13009129/1226894)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:23:40.690

尝试做这样的事情：

```
<?php

if($handle = opendir('files/')) {
  $i=0;
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {
            $file_names[$i] = $entry;
        }
        $i++;
    }
    closedir($handle);
}

$pages = array("page1.html","page2.shtml","page_three.shtml","page4.htm","page5.shtml");

for($x=0; $x<sizeOf($pages); $x++) {
  $current_page = file_get_contents($pages[$x]);
    for($i=0; $i<sizeOf($file_names); $i++) {
        if(!strpos($current_page,$file_names[$i])) {
            if (copy("files/".$file_names[$i],"files/unused-content/".$file_names[$i])) {
                unlink("files/".$file_names[$i]);
            }
        }
    }
}

?> 
```

# aptana3 - Aptana 3 未启动，仅显示“发生错误。请参阅日志文件。”

> ID：13015449
> 
> 赞同：4
> 
> 时间：2012-10-22T16:13:21.110
> 
> 标签：aptana3

我检查了日志文件并看到以下内容：（如何解决的想法？）

```
!ENTRY org.eclipse.osgi 4 0 2012-10-22 09:44:40.920
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: org/eclipse/core/resources/IContainer
    at com.aptana.rcp.IDEApplication.start(IDEApplication.java:125)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.core.resources (427).
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:122)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:463)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:400)
    at org.eclipse.osgi.internal.loader.SingleSourcePackage.loadClass(SingleSourcePackage.java:35)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:473)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 13 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources.
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:734)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:683)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:381)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:299)
    at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:440)
    at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:268)
    at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:107)
    ... 22 more
Caused by: org.eclipse.core.internal.dtree.ObjectNotFoundException: Tree element '/dlpage-css/database/setup/countries.txt' not found.
    at org.eclipse.core.internal.dtree.AbstractDataTree.handleNotFound(AbstractDataTree.java:257)
    at org.eclipse.core.internal.dtree.DeltaDataTree.getData(DeltaDataTree.java:585)
    at org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta(DataDeltaNode.java:50)
    at org.eclipse.core.internal.dtree.NoDataDeltaNode.asBackwardDelta(NoDataDeltaNode.java:59)
    at org.eclipse.core.internal.dtree.NoDataDeltaNode.asBackwardDelta(NoDataDeltaNode.java:59)
    at org.eclipse.core.internal.dtree.NoDataDeltaNode.asBackwardDelta(NoDataDeltaNode.java:59)
    at org.eclipse.core.internal.dtree.DataDeltaNode.asBackwardDelta(DataDeltaNode.java:47)
    at org.eclipse.core.internal.dtree.DeltaDataTree.asBackwardDelta(DeltaDataTree.java:88)
    at org.eclipse.core.internal.dtree.DeltaDataTree.reroot(DeltaDataTree.java:816)
    at org.eclipse.core.internal.dtree.DeltaDataTree.reroot(DeltaDataTree.java:815)
    at org.eclipse.core.internal.dtree.DeltaDataTree.reroot(DeltaDataTree.java:815)
    at org.eclipse.core.internal.dtree.DeltaDataTree.reroot(DeltaDataTree.java:792)
    at org.eclipse.core.internal.watson.ElementTree.immutable(ElementTree.java:518)
    at org.eclipse.core.internal.resources.SaveManager.restore(SaveManager.java:710)
    at org.eclipse.core.internal.resources.SaveManager.startup(SaveManager.java:1528)
    at org.eclipse.core.internal.resources.Workspace.startup(Workspace.java:2503)
    at org.eclipse.core.internal.resources.Workspace.open(Workspace.java:2251)
    at org.eclipse.core.resources.ResourcesPlugin.start(ResourcesPlugin.java:439)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:711)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:702)
    ... 28 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-06T09:46:43.670

这只是在最糟糕的时候再次发生在我身上。

我真的不想重建整个工作区，但我找到了这个答案，它奏效了！

> 对于任何感兴趣的人，我遇到了完全相同的问题，删除文件 .metadata/.plugins/org.eclipse.core.resources/.snap 对我有用。

此文件位于您损坏的工作区的文件夹中。

来自： http: [//www.eclipse.org/forums/index.php/mv/msg/156204/734920/#msg_734920](http://www.eclipse.org/forums/index.php/mv/msg/156204/734920/#msg_734920)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-22T17:41:16.887

尝试删除/重命名对我有用的 Workspace 文件夹（例如 Documents\Aptana 3 Studio Workspace）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T13:29:47.337

我增加了 STS.ini 中的 -Xms 和 -Xmx 值，它解决了这个问题。新值：-Xms256m -Xmx2048m

# python - 我在哪里可以获得 kinect 的 Python 参考资料。（糟糕的文档）

> ID：13015451
> 
> 赞同：0
> 
> 时间：2012-10-22T16:13:23.013
> 
> 标签：python, pygame, kinect

我在哪里可以获得 kinect 的 python 参考资料。我想用 kinect 中的数据提取 X、Y、Z。我有： kinect kinect SDK Python 2.7 3.2 和 3.3 都带有 Numpy 和 PyGame 我也想设置我的 kinect 角度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:33:23.060

有一个带有 python 包装器的 openkinect [http://openkinect.org/wiki/Python_Wrapper](http://openkinect.org/wiki/Python_Wrapper)从未尝试过这个，但是 openkinect 本身就很酷

另外，您可能想查看此视频[http://www.youtube.com/watch?v=BoMQqW0lxVE](http://www.youtube.com/watch?v=BoMQqW0lxVE)

和往常一样，谷歌是你最好的朋友

# jquery - 用 jquery 解析 json 以获取 highcharts

> ID：13015452
> 
> 赞同：0
> 
> 时间：2012-10-22T16:13:30.363
> 
> 标签：jquery, json

我在字符串中有这样的json：

```
([[1130112000000,56.79],[1130198400000,56.10]]); 
```

原始 json 在这里：[highcharts json](http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?)

它在这里使用：[highcharts示例](http://www.highcharts.com/stock/demo/)

在 highcharts 示例中，他们使用`getJSON`了其中的 json 链接。

但是在我的程序中，我在同一页面中生成 json，我不知道必须为脚本解析它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:34:32.707

查看 highcharts 提供的[jsFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/basic-line/)，他们正在通过自己的回调检索他们的 json，获取返回的数据并通过他们的`new Highcharts.StockChart`函数提供它。

要使用您自己的 json（必须是正确格式的 json，试试[这个](http://rick.measham.id.au/paste/jstidy.htm)以帮助...），创建结构然后对他们在示例中显示的 highcharts 执行相同的调用，但`data`用您的数据变量替换变量...

如果一切设置正确，它将毫无问题地工作......

如果这没有帮助，请发布有关您尝试做什么（使用代码）的更多信息，否则我们将陷入困境......

* * *

这是一个[jsFiddle](http://jsfiddle.net/7uH3m/1/)示例，获取您在问题中发布的要点并使用它创建一个简单的 highcharts 图表...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:16:25.853

假设你的 JSON 是有效的，试试这个：

```
var data=jQuery.parseJSON(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:44:40.000

该格式称为[JSONP](http://en.wikipedia.org/wiki/JSONP)。

请注意，数据以开头，`?()`因为您将回调指定为`http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=?`

你应该调用它指定一个你想用作回调来处理数据的方法

因此，您可以使用 [http://jsfiddle.net/AF4ru/](http://jsfiddle.net/AF4ru/)

```
$.ajax({
  url: 'http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=hello',
  dataType: 'jsonp',
  success: function(data){
    console.log(data);
  }
})​​​​​​​;​ 
```

# javascript - onBeforeUnload/卸载

> ID：13015455
> 
> 赞同：0
> 
> 时间：2012-10-22T16:13:40.663
> 
> 标签：javascript, jquery

在 Javascript 中，我经常看到有关不应尝试在 jQuery 中使用 onBeforeUnload 或 unload() 的帖子，理由是安全问题。有人可以更详细地解释这些问题是什么吗？

关于这一点，我还发现这些都不适用于我尝试过的任何浏览器。甚至像这样简单的事情：

```
$(window).unload(function(){
alert('hello');
}); 
```

这是故意的，还是没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:24:01.400

你可能把它和可用性问题混为一谈了？

我用它作为原生 js

```
window.onunload = function(e) {
   return 'Dialog text here.';
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T11:58:31.743

您不能在函数中使用 Alert 来简单地说明 onunload 是一个弹出窗口，因此仅在返回中显示您的文本（HELLO）或尝试以下操作：

```
window.addEventListener("beforeunload", function(event) {
                    event.returnValue = 'hello';
            }); 
```

# python - 元组列表，第一个元组作为键，按键分组到字典中

> ID：13015456
> 
> 赞同：1
> 
> 时间：2012-10-22T16:13:46.290
> 
> 标签：python, list, dictionary, tuples, grouping

我有一个元组列表。第一部分是一个标识符，可以重复也可以不重复。我想将此列表处理成字典，由标识符键入。问题是，我一直无法考虑按键覆盖：

```
def response_items(self):
        ri = self.response_items_listing#(gets the list)          
        response_items = {}
        for k, g in groupby(ri, itemgetter(0)):
            x = list(g)
            l = [(xx[1],xx[2]) for xx in x]
            response_items[k] = l
        return response_items 
```

例如，像这样的列表：

`[('123', 'abc', 'def'),('123', 'efg', 'hij'),('456', 'klm','nop')]`

会回来

`{123:('efg', 'hij'), 456:('klm', 'nop')}`

但是我需要：

`{123:[('abc', 'def'),('efg', 'hij')], 456:('klm', 'nop')}`

我需要采取一个步骤来按键合并/聚合，但我没有完全看到它。

什么是更好或更有效的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:23:44.823

一个简单的方法是

```
from collections import defaultdict

ri = [('123', 'abc', 'def'),('123', 'efg', 'hij'),('456', 'klm','nop')]
response_items = defaultdict(list)
for r in ri:
    response_items[r[0]].append(r[1:])
print response_items 
```

这使

```
defaultdict(<type 'list'>, {'123': [('abc', 'def'), ('efg', 'hij')],
                            '456': [('klm', 'nop')]}) 
```

如果你想

```
defaultdict(<type 'list'>, {'123': ['abc', 'def', 'efg', 'hij'],
                            '456': ['klm', 'nop']}) 
```

作为输出，您可以使用`response_items[r[0]].extend(r[1:])`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:20:43.340

你可以使用`setdefault()`：

```
In [79]: dic={}
In [80]: for x in lis:
    dic.setdefault(x[0],[]).append(x[1:])
   ....:     
   ....:     

In [82]: dic
Out[82]: {'123': [('abc', 'def'), ('efg', 'hij')], '456': [('klm', 'nop')]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:27:42.207

If there's some reason to be using `itertools.groupby`, then you can avoid using a `defaultdict` or `setdefault` methodology - [in fact, if you want to go down those routes, then you don't really need the groupby!] - by:

```
mydict = {}
for k, g in groupby(some_list, itemgetter(0)):
    mydict[k] = [el[1:] for el in g] 
```

# actionscript-3 - 为什么这不会在字典对象中插入一个条目？

> ID：13015457
> 
> 赞同：0
> 
> 时间：2012-10-22T16:13:54.653
> 
> 标签：actionscript-3, flash, apache-flex, dictionary

这不起作用，抛出错误 #1056：

```
m_cdictDeadConnections = new Dictionary();
m_cdictDeadConnections[1] = "f"; 
```

嗯？这里的语法有什么问题？谢谢！

编辑：有几个答案是指缺乏语法；我正在从类定义中获取变量。很抱歉造成混乱。

编辑：为了更清楚起见，在这行代码中抛出了错误 #1056：

```
m_cdictDeadConnections[1] = "f"; 
```

除了一些非常晦涩的语言规则或其他东西之外，这似乎不应该发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:27:51.963

我看不出逻辑有什么问题。只要确保语法正确。

```
var dictionary:Dictionary = new Dictionary(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:28:08.720

正如此处的文档所述[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html)

> Dictionary 类允许您创建属性的动态集合

如此动态地，字典在对象上创建属性，并使用您在括号中指定的内容作为标识符。

如果要创建以 int 为索引的对象，最好使用 Array。

```
var myArray:Array = new Array();
myArray[0] = ""
myArray[1] = "f"; 
```

如果你想要一个哈希使用一个对象。该对象将由字符串索引：

```
var myObject:Object = new Object();
myObject["1"] = "f"; 
```

您可以在此处找到有关如何创建这些数据结构的更多信息[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7eea.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7eea.html)

编辑：它在我的笔记本电脑上运行良好，因此它应该能够实例化一个名为 1 的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T00:21:45.990

您只是错过了`var`关键字：

```
var m_cdictDeadConnections:Dictionary = new Dictionary();
m_cdictDeadConnections[1] = "f"; 
```

（我还给了 var 一个类型，`:Dictionary`这是一个非常好的习惯！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T02:13:33.623

我认为你的代码没有问题。

正如您所说：“我正在从类定义中获取变量”

我建议您在插入值后跟踪对象。

```
m_cdictDeadConnections = new Dictionary();
m_cdictDeadConnections[1] = "f";
trace.... 
```

因为 m_cdictDeadConnections 是一个变量，所以它可能被其他代码改变或清除。希望这可以帮到你。

# vba - 带有主窗体参数的子窗体

> ID：13015463
> 
> 赞同：1
> 
> 时间：2012-10-22T16:14:19.500
> 
> 标签：vba, ms-access, ms-access-2010

我有一个带有子表单的表单，该表单由`ID`. 问题是子窗体有一个组合框，需要主窗体中的行源参数。

该表格是关于销售电话的，他们需要能够根据需要链接许多提案和合同。提案和合同列表的组合框需要与本次销售电话的工厂或客户相关。

我知道我可以`Forms!FormName!ControlName`获取工厂清单，但这是否意味着我有设计问题？

或者当用户单击主表单中组合框中的元素时，我应该填写一个列表吗？但后来我必须自己处理保存和删除。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:27:19.020

如果子表单需要主表单才能正常运行，您可以检查父表单。例如：

```
Private Sub Form_Open(Cancel As Integer)
Dim strParent As String
Dim strSubname As String

    GetParent Me, strParent, strSubname

    If strParent = "None" Then
        MsgBox "This is not a stand-alone form.", , "Form Open Error"
        Cancel = True
    End If
End Sub

Function GetParent(frm, ByRef strParent, ByRef strSubname)
Dim ctl

On Error Resume Next
    strParent = frm.Parent.Name
    If Err.Number = 2452 Then
        Err.Clear
        strParent = "None"
    Else
        For Each ctl In frm.Parent.Controls
            If ctl.ControlType = acSubform Then
                If ctl.SourceObject = frm.Name Then
                    strSubname = ctl.Name
                End If
            End If
        Next
    End If

End Function 
```

# go - 单通道和选择语句死锁

> ID：13015469
> 
> 赞同：1
> 
> 时间：2012-10-22T16:14:53.550
> 
> 标签：go

由于死锁，我有以下最小示例在第一个命令行输入后退出：

```
package main     

import "fmt"     
import "os"     

func main() {     
    channel1 := make(chan string)     

    go func() {     
        var str string     
        for {              
            fmt.Fscanln(os.Stdin, &str)     
            channel1 <- str                
        }                      
    }()      

    for {     
        select {     
        case str := <-channel1:     
            fmt.Printf("Channel1 said: %v\n", str)     
        }                                             
    }             
} 
```

我本来希望这只是简单地接受用户输入并一遍又一遍地回显它。此外，我确实注意到，如果我添加第二个通道和第二个 go 例程，它不会出现任何死锁问题。那么为什么会出现这种僵局呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:30:11.167

无法重现问题。

```
jnml@fsc-r630:~/src/tmp/SO/13015469$ cat main.go 
package main

import (
    "fmt"
    "os"
)

func main() {
    channel1 := make(chan string)

    go func() {
        var str string
        for {
            fmt.Fscanln(os.Stdin, &str)
            channel1 <- str
        }
    }()

    for {
        select {
        case str := <-channel1:
            fmt.Printf("Channel1 said: %v\n", str)
        }
    }
}
jnml@fsc-r630:~/src/tmp/SO/13015469$ go run main.go
foo
Channel1 said: foo
bar
Channel1 said: bar
baz
Channel1 said: baz
^Cjnml@fsc-r630:~/src/tmp/SO/13015469$ go build main.go && ./main 
foo
Channel1 said: foo
bar
Channel1 said: bar
baz
Channel1 said: baz
^Cjnml@fsc-r630:~/src/tmp/SO/13015469$ go version
go version go1.0.3
jnml@fsc-r630:~/src/tmp/SO/13015469$ uname -a
Linux fsc-r630 3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
jnml@fsc-r630:~/src/tmp/SO/13015469$ 
```

你的 Go 版本、操作系统和架构是什么？

# vb.net - 获取新类型数据行的自动 ID

> ID：13015471
> 
> 赞同：0
> 
> 时间：2012-10-22T16:15:03.737
> 
> 标签：vb.net, ado.net

使用 插入新记录时`table.newTableRow`，是否有可能获得`autoId`？

这是我的代码：

```
Dim famtbl As New DataSet1.FamiliesDataTable
Dim newFam = famtbl.NewFamiliesRow

With newFam
    .Address = txt_Address.Text
    .City = txt_City.Text
    .State = txt_State.Text
    .Zip = txt_Zip.Text
    .Country = txt_Country.Text
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:16:29.580

不，在将 ID 提交给数据库之前，您不会知道该 ID。

# android - Android同步API？

> ID：13015473
> 
> 赞同：2
> 
> 时间：2012-10-22T16:15:09.120
> 
> 标签：android, synchronization, icloud

在我的三星 Galaxy 上，我导航到“设置 > 无线和网络 > 同步”，我找到了创建配置文件和设置同步服务器的选项，但我从未遇到任何 API 可以让我创建同步服务器或让我的应用程序指定我可以同步的内容。

它是否提供了 iCloud 为 iPhone 提供的功能？

请让我知道是否有任何教程可能会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:19:57.450

查看 SDK 示例下的 SampleSyncAdapter 代码。它将位于类似的目录中；

```
C:/Program Files/Android/android-sdk/samples/android-10/SampleSyncAdapter/ 
```

链接到我[这里的原始 SO 答案](https://stackoverflow.com/a/11518981/1348379)

# vim - vim - 如何匹配语法文件中的链接序列

> ID：13015474
> 
> 赞同：3
> 
> 时间：2012-10-22T16:15:12.233
> 
> 标签：vim, vim-syntax-highlighting

我想在 vim 中为我拥有的自定义文件类型创建一个语法文件。部分语法是这一行

```
entry: 1,02:15:00,03:15:00,56,Some String 
```

我想分别匹配每个部分以分配不同的颜色。`entry`应该是一个部分，`1`应该是一个部分，`02:15:00`应该是一个部分，`03:15:00`应该是一个不同的部分，`56`还有另一个部分，`Some String`一个不同的部分，所有`,`的s都作为一个部分。这些中的每一个都应该以不同的方式命名，以便我可以根据需要用不同的颜色为它们着色。

我能够将它们与 匹配`contains`，但相似的值（第一次和第二次）得到相同的名称。我也尝试使用`nextgroup`一个接一个地链接它们，但这给我留下了`,`许多我需要单独着色的名称（并且原始文件中有很多逗号，不像我在这里展示的简单示例）。

有没有办法以适当的方式进行这种语法突出显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:05:56.737

您可以将所有逗号名称链接到一个

```
" Adjust the below to make commas have another color.
" It is common that instead of defining colors directly you link 
" new highlighting groups to some standard one.
hi def link MySyntaxComma Delimiter

hi def link MySyntaxCommaAfterNumber       MySyntaxComma
hi def link MySyntaxCommaAfterFirstTime    MySyntaxComma
hi def link MySyntaxCommaAfterSecondTime   MySyntaxComma
hi def link MySyntaxCommaAfterSecondNumber MySyntaxComma 
```

您还可以使用循环`:execute`来隐藏重复规则：

```
syntax match MySyntaxEntryStart /^entry:\s*/ nextgroup=MySyntaxNumber1
let s:rules=[['Number1', '\d\+'], ['Time1', '\d\d:\d\d:\d\d'], ['Time2', '\d\d:\d\d:\d\d'], ['Number2', '\d\+'], ['String', '.*']]
while !empty(s:rules)
    let [s:name, s:reg]=remove(s:rules, 0)
    let s:cmd='syntax match MySyntax'.s:name.' /'.s:reg.'/ contained'
    if !empty(s:rules)
        let s:cmd.=' nextgroup=MySyntaxCommaAfter'.s:name
        execute 'syntax match MySyntaxCommaAfter'.s:name.' /,/ contained nextgroup=MySyntax'.s:rules[0][0]
        execute 'hi def link MySyntaxCommaAfter'.s:name.' MySyntaxComma'
    endif
    execute s:cmd
endwhile
unlet s:rules s:cmd s:name s:reg 
```

# jquery - 在 fancyBox 中解析 Markdown

> ID：13015477
> 
> 赞同：0
> 
> 时间：2012-10-22T16:15:33.470
> 
> 标签：jquery, fancybox

我在我正在开发的 Web 应用程序中使用 fancyBox，并且遇到了一个我认为会在 fancyBox 中成为一个很好功能的问题。

我在fancyBox 弹出窗口中加载一个.txt 文件（我的更改日志），并希望它解析为markdown。

我的链接看起来像这样...

```
<a class="changelog fancybox.ajax" href="changelog.txt">ChangeLog</a> 
```

和相应的jQuery ...

```
$(".changelog").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    }); 
```

它加载文件没有问题，但它根本没有格式，甚至没有换行符。我意识到这是因为插件将其视为 HTML，但文件的内容*是*用 Markdown 格式化的，所以我希望它使用它来显示，而不必将文件本身的内容转换为 HTML 格式。

有谁知道我该如何解决这个问题，如果我能让它工作，我会分支 fancyBox 并建议它作为一个功能。

# asp.net-mvc - 将 Ninject 与 Udi Dahan 的领域事件一起使用

> ID：13015486
> 
> 赞同：5
> 
> 时间：2012-10-22T16:16:07.257
> 
> 标签：asp.net-mvc, dependency-injection, inversion-of-control, ninject, domain-events

我在 MVC 项目中使用 Ninject 并尝试按照 Udi Dahan 的模式实现域事件[http://www.udidahan.com/2009/06/14/domain-events-salvation/](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

在下面的摘录中，“容器”用于解析已引发的特定类型事件的所有事件处理程序。

我的问题（如果我遗漏了一些基本的东西，请道歉）是如何用 Ninject 做到这一点？换句话说：

1.  如何在这个静态类中设置“容器”？

2.  一旦我有了一个容器（内核？），解析所有事件处理程序的 Ninject 语法是什么（我假设我必须事先在服务模块中注册）？

我一直在帖子中阅读应该只使用构造函数注入，并且一切都可以递归地解决，并且访问 Ninject Kernel 是一个禁忌。因此，任何有关如何做到这一点的建议将不胜感激。

**文章摘录**

```
public static class DomainEvents
{ 
  [ThreadStatic] //so that each thread has its own callbacks
  private static List<Delegate> actions; 

  public static IContainer Container { get; set; } //as before

  //Registers a callback for the given domain event
  public static void Register<T>(Action<T> callback) where T : IDomainEvent
  {
     if (actions == null)
        actions = new List<Delegate>();

     actions.Add(callback);
 }

 //Clears callbacks passed to Register on the current thread
 public static void ClearCallbacks ()
 {
     actions = null;
 }

 //Raises the given domain event
 public static void Raise<T>(T args) where T : IDomainEvent
 {
    if (Container != null)
       foreach(var handler in Container.ResolveAll<Handles<T>>())
          handler.Handle(args);

    if (actions != null)
        foreach (var action in actions)
            if (action is Action<T>)
                ((Action<T>)action)(args);
 }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:23:21.027

> 如何在这个静态类中设置“容器”？

您必须在应用程序启动期间进行设置：

```
DomainEvents.Container = kernel; 
```

> 解析所有事件处理程序的 Ninject 语法是什么：

你可以这样做，例如：

```
Container.Get<IEnumerable<Handles<T>>>()) 
```

Udi 的静态`DomainEvents`类是*Ambient Context*反模式的实现（参见[DI PP&P](https://manning.com/seemann2)第[5.3](https://livebook.manning.com/#!/book/dependency-injection-in-dot-net-second-edition/chapter-5/section-5-3)章）。在这种情况下，我宁愿使用依赖注入将`IDomainEvents`抽象注入到需要它的代码中，而不是让代码依赖于静态实例。

然而，问题是您的域对象将需要依赖于`IDomainEvents`构造函数注入（可能）是不可能的。诀窍是在这种情况下使用方法注入。

换句话说，使用构造函数注入将命令注入`IDomainEvents`到命令处理程序或服务（或者你调用的使用域对象上的方法的业务逻辑），并在调用需要它的方法时将该依赖项传递给域对象（方法注射）。

# mysql - 嵌套类别仅计算一个包含产品的分支

> ID：13015489
> 
> 赞同：0
> 
> 时间：2012-10-22T16:16:24.300
> 
> 标签：mysql, nested

```
CREATE TABLE IF NOT EXISTS `site_location` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `level` int(11) NOT NULL,
  `lft` int(11) NOT NULL,
  `rgt` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=13 ;

///DATA
    INSERT INTO `site_location` (`id`, `level`, `lft`, `rgt`, `name`) VALUES
    (1, 0, 1, 24, 'United Kingdom'),
    (2, 1, 2, 19, 'London'),
    (3, 2, 13, 14, 'Central London'),
    (4, 2, 11, 12, 'East London'),
    (5, 2, 9, 10, 'North London'),
    (6, 2, 7, 8, 'North West London'),
    (7, 2, 5, 6, 'South East London'),
    (8, 2, 3, 4, 'West London'),
    (9, 2, 15, 18, 'South West'),
    (10, 3, 16, 17, 'Battersea'),
    (11, 1, 20, 23, 'Brighton'),
    (12, 2, 21, 22, 'Guildford');

CREATE TABLE IF NOT EXISTS `ads` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL,
  `location` int(11) NOT NULL,
  `title` varchar(255) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`id`,`category_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=5 ;

INSERT INTO `ads` (`id`, `category_id`, `location`, `title`) VALUES
(1, 7, 10, 'Test1'),
(2, 9, 3, 'Test2'),
(3, 12, 10, 'Test3'),
(4, 13, 4, 'Test4'); 
```

当 ID 为 ID=1 时以这种方式返回

```
[ United Kingdom(4) ]
    London(4)     
    Brighton(0) 
```

当 ID 为 ID = 2

```
 United Kingdom(4)
      [ London(4) ]
        South West(2)
        Central London(1)
        East London(1)
      Brighton(0) 
```

so when is selected "London" I need all its siblings and all its children

选择“西南”时相同，我需要它的所有兄弟姐妹所有它的孩子，它的父母所有它的父母兄弟姐妹

```
 United Kingdom(4)
      London(4)
        [ South West(2) ]
          Battersea(2)
        Central London(1)
        East London(1)
      Brighton(0) 
```

以及该位置有多少广告，例如在英国必须有 4 个，因为表格中的所有广告都是 4 个，西南必须有 2 个，因为在巴特西有 2 个

当 id 为 11 时

```
United Kingdom(4)
  London(4)
  [ Brighton(0) ]
      Guildford(0) 
```

我有一个查询：西南 lft:15, rgt:18, level:2

```
 SELECT 
    node.id, 
    node.alias, 
    node.level, 
    node.name, 
    COUNT(ads.id) as ads,
    IF(node.lft = node.rgt-1, "0", "1") AS `has_children`
 FROM 
    site_location AS parent LEFT JOIN
    ads as ads ON (parent.id = ads.location),
    site_location AS node
 WHERE
    parent.lft BETWEEN node.lft AND node.rgt
 AND 
    parent.lft BETWEEN 15 AND 18
 AND 
    node.level > 0
 AND
   node.level < 2 + 3
 GROUP BY node.id
 ORDER BY node.lft 
```

这将返回

```
 London(4)
  South West(2)
   Battersea(2) 
```

我需要这样

```
 London(4)
  South West(2)
   Battersea(2)
 Brighton(0) 
```

是否可以通过单个查询来做到这一点：？如果有人可以提供帮助，那就太好了。提前致谢！

# php - 使用函数访问数据库值是否安全？

> ID：13015496
> 
> 赞同：0
> 
> 时间：2012-10-22T16:16:45.323
> 
> 标签：php, mysql, function, pdo

我对 PHP 还有 PDO 还很陌生，所以除了 SQL 注入之外，我不完全了解在访问数据库时要避免（和包括）什么。（仅供参考，在下面的示例中，“用户”表还包括密码），但是使用如下函数访问数据库以获取信息是否安全？容易受到攻击吗？

如果您不明白我为什么这样做，那是因为我发现它更快，并且在链接表格时会更容易:)

```
<?php
    require("access/common.php");
    function getval($username, $column, $table, $datab){
    $query = " 
    SELECT 
    id, 
    username,
    email 
    FROM ".$table." 
    WHERE 
    username = :username 
    ";
    $query_params = array( 
    ':username' => $username,
    ); 
    try 
    {
        $stmt = $datab->prepare($query); 
        $result = $stmt->execute($query_params); 
    } 
    catch(PDOException $ex) 
    {
        die(); 
    }
    $row = $stmt->fetch(); 
    if($row) 
    { 
        return $row[$column];
    }
    }
    echo getval("USERNAME", "email", "users", $db);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:40:48.470

你问的问题非常开放。您最大的攻击媒介始终是您对**用户输入**的操作（用户可以通过 $_GET 或 $_POST 变量提交到您的应用程序/网站的任何内容）。当然，PHP 语言结构没有安全威胁，例如。职能。

在您的示例中，我可以看到您正在绑定“：username”参数而不是“：table”参数，如果您接受未经处理的用户输入并将其用作“$table”值，则该参数可能是注入向量。

始终小心你如何使用 $_GET 和 $_POST 值......当这变得乏味时，寻找一个框架来使其中一些自动化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:21:06.913

函数并不比函数外部的代码更安全或更不安全。如果它是你要使用不止一次或两次的东西，**一定**要把它放在一个函数中。只要您正确使用 PDO，就可以了。

也就是说，您可能希望将所有数据库函数放在一个类中，然后实例化该类的 $db 对象，然后您可以从中调用所需的任何数据库函数。有很多方法可以组织代码以使事情更容易使用。

# java - CDI 和 EJB，安全问题？

> ID：13015504
> 
> 赞同：1
> 
> 时间：2012-10-22T16:17:05.727
> 
> 标签：java, security, jsf, ejb, cdi

自从我开始学习 JSF 以来，我正在审查我的代码。最复杂的问题之一再次出现。CDI 和 EJB 之间的决定。

我正在使用三层，我想知道在每一层上使用哪种类型的注释： - 支持 bean（MVC 中定义的控制器） - 服务层 - DAO 的

只要我不需要来自 EJB 的任何东西，我的支持 bean 就使用 CDI。但我被其他两个困住了。我记得读过关于使用 EJB bean 的文章，因为池功能可以防止大量请求（或攻击，如果你愿意的话）。简而言之，考虑到安全性或其他任何事情（不包括 ViewScoped），是否有任何理由使用 EJB（无状态、有状态、LocalBean 等）？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:45:08.063

你在这里犯了一个概念上的错误。CDI 绝对不是 EJB 的替代品。默认情况下的 CDI 根本不提供事务管理。CDI 是 bean 管理和依赖注入 API，而不是服务层 API。为了在 CDI 中管理事务，您必须添加另一个 API 以及一堆其他注释。

CDI 可以替换例如 JSF 托管 bean 注释，但绝对不能替换 EJB 注释。

所以没有有效的“CDI vs EJB”问题。两者都有自己完全不同的目的。请注意，您可以在基于 CDI 的托管 bean 类中完美地注入基于 EJB 的服务类。

至于安全性，不清楚为什么您在标题和标签中提到该部分，但 CDI 和 EJB 之间的决定与安全性无关（仅仅是因为首先没有有效的“CDI vs EJB”问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:22:51.753

是的，当您需要对事务、并发、池等的开箱即用支持时。

# titanium - 钛禁用设备旋转和修复，因此只显示一种模式

> ID：13015505
> 
> 赞同：3
> 
> 时间：2012-10-22T16:17:07.860
> 
> 标签：titanium

如何在所有移动平台上修复钛应用程序中的设备旋转？任何对官方 doco 的引用都会非常有用！

所以我不想像“只让应用程序以特定方向运行”那样“禁用旋转”（在我的情况下是纵向模式）

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:42:25.420

官方网站目前已关闭，但您需要查找“定向模式”。以下代码在我的应用程序中将我的窗口锁定为仅纵向模式。

```
loginWin = Ti.UI.createWindow({
  orientationModes: [Ti.UI.PORTRAIT]
});
// Required to fix Android still?
loginWin.orientationModes = [Ti.UI.PORTRAIT]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T23:35:50.703

完整的答案 - 这仍然允许在加载屏幕启动时改变方向。钛似乎把这个放在胸前，但这里有：

在 tiap.xml 文件中，您需要对第一个缩进级别的 android 元素进行更改

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
    <manifest>
        <application>
            <activity
                android:configChanges="keyboardHidden|orientation"
                android:name="org.appcelerator.titanium.TiActivity" android:screenOrientation="portrait"/>
            <activity
                android:configChanges="keyboardHidden|orientation"
                android:name="org.appcelerator.titanium.TiTranslucentActivity"
                android:screenOrientation="portrait" android:theme="@android:style/Theme.Translucent"/>
            <activity
                android:configChanges="keyboardHidden|orientation"
                android:name="org.appcelerator.titanium.TiModalActivity"
                android:screenOrientation="portrait" android:theme="@android:style/Theme.Translucent"/>
            <activity
                android:configChanges="keyboardHidden|orientation"
                android:name="ti.modules.titanium.ui.TiTabActivity" android:screenOrientation="portrait"/>
            <activity
                android:name="ti.modules.titanium.ui.android.TiPreferencesActivity" android:screenOrientation="portrait"/>
        </application>
    </manifest>
</android> 
```

上面的代码可以放入（当然，首先删除现有的 android 元素！）并且应该可以工作。

这里的诀窍是使用

```
android:screenOrientation="portrait" 
```

它将方向设置为纵向。当然，另一种选择是“风景”。我认为，如果您不考虑这一点，则默认行为是允许方向切换。

当然，iOS 更容易。

在您需要的同一个 tiapp.xml 文件中

```
<ios>
    <plist>
        <dict>
            <key>UISupportedInterfaceOrientations</key>
            <array>
                <string>UIInterfaceOrientationPortrait</string>
            </array>
        </dict>
    </plist>
</ios> 
```

这将替换您当前 ios 元素中的任何内容，并且与 android 元素处于同一级别

IE

```
<?xml version="1.0" encoding="UTF-8"?>
<ti:app xmlns:ti="http://ti.appcelerator.org">
    ...
    <ios>
        ...
    </ios>
    <android>
        ...
    </android>
</ti:app> 
```

我仍然不知道如何阻止android（可能还有ios）重新定位启动画面，如果有人知道如何让我知道这个秘密！

# html - 拖放多个div

> ID：13015506
> 
> 赞同：3
> 
> 时间：2012-10-22T16:17:18.023
> 
> 标签：html, drag-and-drop

我有两个`<div>`标签。一个有几个`<div>`不同大小和位置的标签，必须将它们拖到另一个 div。但是，我需要拖回前一个 div，根据放置位置更改 X 和 Y。

如何使用 HTML5 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:32:02.350

尝试这个：

```
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Droppable - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
    #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
    #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
    </style>
    <script>
    $(function() {
        $( "#draggable" ).draggable();
        $( "#droppable" ).droppable({
            drop: function( event, ui ) {
                $( this )
                    .addClass( "ui-state-highlight" )
                    .find( "p" )
                        .html( "Dropped!" );
            }
        });
    });
    </script>
</head>
<body>
 <div style="color:#0000FF">
  <h3>This is a heading</h3>
  <p>This is a paragraph.</p>
<div id="draggable" class="ui-widget-content">
    <p>Drag me to my target</p>
</div>
</div>

<div id="droppable" class="ui-widget-header">
    <p>Drop here</p>
</div>

</body>
</html> 
```

# php - PHP在方法调用中将输入值作为参数发送

> ID：13015507
> 
> 赞同：0
> 
> 时间：2012-10-22T16:17:26.243
> 
> 标签：php

我是 PHP 新手，正在尝试复制 JavaBeans/JSF 分配...

我需要在 Service 类中调用一个方法来验证用户名和密码。

我的 index.php 顶部有这个 php：

```
<?php 
include("Service.php");
$service = new Service();
if($_POST) {
    if (!$service->checkUser($_POST['name'], $_POST['password'])) {
        $error = "Username and password incorrect";
        echo $error;
    }
}?> 
```

Mu 表单动作调用它自己的文档：

```
<form action="index.php" method="post"> 
```

我有 2 个输入字段（名称、密码），如下所示：

我的 Service.php 类具有函数 checkUser。它返回一个字符串：

```
public function checkUser($name, $password) {
    foreach($this->users as $user) {
        if ($user->getName() == $name && $user->getPassword() == $password) {
            return "welcome.php";
        }
        else
            return "error.php";
    }
} 
```

提交表单时如何使用该字符串作为导航？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:18:37.553

几个问题：

1)`$POST`应该是`$_POST`

2) 是否`checkUser()`返回包含表单操作的字符串？因为这就是您的代码当前正在执行的操作..？

在我看来，您应该发布到 PHP 脚本，可能与您已经使用的文件名相同，然后调用该`checkUser`方法：

形式：

```
<form action="/" method="post">
..
</form> 
```

然后在PHP端：

```
<?php
if ($service->checkUser($_POST['name'], $_POST['password']))
{
  // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:31:21.880

将 action 属性留空，并在页面顶部编写以下代码

```
 <?PHP
       if($_POST){
               if (!$service->checkUser($_POST['name'], $_POST['password'])){
                     $error = "Username and password incorrect";
               }
       }
  ?> 
```

在此处包含您的功能，并在表单上方回显此错误

# ruby-on-rails - RailInstaller Rails 服务器 todo 因 sqlite3 而失败

> ID：13015511
> 
> 赞同：0
> 
> 时间：2012-10-22T16:17:37.007
> 
> 标签：ruby-on-rails, sqlite, gem, sqlite3-ruby

我正在尝试使用 RailsInstaller 使 Rails 服务器工作，我在以下位置下载了它：

`http://railsinstaller.org/`

我执行了所有没有任何问题，并且服务器在以下位置正常启动：

`C:\Sites\todo`

但是在我尝试在浏览器中打开页面的那一刻（）`http://localhost:3000/`我得到了一个动作`Controller:Exception`

> **加载错误**
> 
> > 无法加载此类文件 -- sqlite3
> 
> **Rails.root** : C:/Sites/todo 应用程序跟踪 | 框架跟踪 | 全跟踪
> 
> > 加载以下文件时发生此错误： **sqlite3**
> 
> **要求**
> 
> > 参数：无

```
> Show session dump
> Show env dump 
```

> **回复**
> 
> > 标头：无

服务器日志这样说：

> 2012-10-22 18:08:48 +0200 开始为 127.0.0.1 获取“/”
> 
> > **LoadError**（无法加载此类文件 -- **sqlite3**）：
> > 
> > > **渲染**
> > > 
> > > > C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.0.9/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.0 ms)
> > > 
> > > **渲染**
> > > 
> > > > C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.0.9/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (31.2 ms)
> > > 
> > > **渲染**
> > > 
> > > > C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.0.9/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb 内救援/布局（62.5 毫秒）

我已经这样做了，`gem install sqlite3`但我仍然收到此消息。你有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:53:06.213

检查您的 Gemfile 并尝试使用版本号重新安装

```
gem uninstall sqlite3

gem install sqlite3 -v=1.3.6 
```

确保你有：

```
gem 'sqlite3', '1.3.6' 
```

在你的 Gemfile

您可能还需要安装 sqlite3 的 windows 二进制文件我不确定

# c# - 离开页面时保存页面数据

> ID：13015512
> 
> 赞同：1
> 
> 时间：2012-10-22T16:17:47.880
> 
> 标签：c#, asp.net-mvc-3

我有一个编辑表单，上面有 2 个按钮，“保存”（duh）和“返回列表”（在实际返回之前执行保存）。问题是页面也有侧边导航和顶部导航。因此，当用户选择那些页面中的任何链接时，页面不会保存。即使选择了侧面或顶部导航链接，是否有办法执行保存？

注意，这是一个 MVC3 C# 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:20:21.333

您是否考虑过提醒用户页面尚未保存？使用`onbeforeunload`事件，显示警报消息（或类似的东西）。如果他们想保存，让他们单击取消以留在页面上并保存，否则不保存就继续。

# php - PHP shell exec不在html浏览器中工作，但在cmd提示符下工作

> ID：13015513
> 
> 赞同：0
> 
> 时间：2012-10-22T16:17:49.323
> 
> 标签：php, exec, windows-shell, shell-exec

我在 Apache/2.2.16 (Win32) 上运行 PHP 5.2.14，并且我有一个脚本来运行一个 shell 命令，当在命令提示符下测试时效果很好，但在浏览器模式 (html) 下，它没有。

# 脚本：

**我的batfile.bat**

```
REM ...
REM process some folder details
REM code which does not work in browser mode but works in cmd mode
C:/somfolder/bin/mysqldump -u abc -pabcdef --result-file="C:/Apache22/somfolder/DBbackup/DBbackup.%DATE:~10,4%%DATE:~4,2%%DATE:~7,2%.sql" --dump-date  --log-error="C:/Apache22/somfolder/DBbackup/DBbackup.%DATE:~10,4%%DATE:~4,2%%DATE:~7,2%.log" dbname > dboutputresult.txt

REM process result of savedfile 
```

**calltobatfile.php**

```
//process some folder information
$file = file_get_contents($folderroot."/exec/mybatfile.bat");
//var_dump($file);
    $strarr = explode("\n", $file);
    foreach($strarr as $line){
      if(strlen($line)>1){
        var_dump("line: ".$line."\n"); 
        $output = shell_exec($line);
        print_r($output);
     }
   }

//process result of savedfile additional information 
```

任何帮助和建议表示赞赏。鲁夫鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:25:26.600

检查将其作为服务器运行的权限。您可以以所有者身份运行它，但不可能以其他用户身份运行它 - 在您的示例中为 apache。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T18:13:22.900

这是我的代码，它工作正常。

```
$result = mysqli_query($mysqli_link,'SHOW VARIABLES LIKE \'%basedir%\';');
    $row = mysqli_fetch_array($result);
    $pathtodump = "".$row['Value']."/bin/mysqldump";    
    $command= "$pathtodump -h " . $db_host . " -u " . $db_user . " -p".$db_pass. " " . $db_dbname . "> filename.sql";
    exec($command); 
```

**注意** 尝试给 mysqldump.exe 文件名和完整路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:22:01.717

也许是与权限相关的问题？在您的命令行中，您可能正在使用其他用户而不是 Web 用户，它可能没有在 C:/Apache22/somfolder/DBbackup/ 或 dboutputresult.txt 中执行或写入所需的权限

# javascript - 部分未找到 Rails

> ID：13015515
> 
> 赞同：0
> 
> 时间：2012-10-22T16:17:50.737
> 
> 标签：javascript, ruby-on-rails, ajax, erb

我正在按照 Michael Hartl 的书在我的应用程序中添加一些以下功能，当我尝试在我的关注和取消关注按钮上使用 AJAX 时，我在尝试更改呈现的按钮时收到这些错误：

```
Completed 500 Internal Server Error in 81ms

ActionView::MissingTemplate (Missing template users/follow_user, application/follow_user with {:locale=>[:en], :formats=>[:js, :html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/Users/hugo/Web Development/Rails/sample/app/views"
  * "/Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/kaminari-0.13.0/app/views"
  * "/Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/devise-2.0.4/app/views"
):
  app/controllers/users_controller.rb:73:in `follow_user'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core.rb:263:in `block in repository'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core/repository.rb:114:in `scope'
  lib/ct_gems/dm-core-1.2.0/lib/dm-core.rb:263:in `repository'

  Rendered /Users/hugo/.rvm/gems/ruby-1.9.2-p318/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.5ms) 
```

这是我的控制器中的代码：

```
def follow_user
    @other_user = User.get(params[:user_id].to_i)
    current_user.follow(@other_user)

    respond_to do |format|
      format.html {redirect_to user_profile_path(@other_user)}
      format.js
    end
  end 
```

这是我的表格......不是表格，而是跟随功能的链接：

```
<% unless current_user == @user %>
  <div id="follow_form">
  <% if current_user.following?(@user) %>
    <%= render 'users/unfollow' %>
  <% else %>
    <%= render 'users/follow' %>
  <% end %>
  </div>
<% end %> 
```

这是我要渲染的部分之一：

```
<%= link_to "Follow", user_follow_user_path(@user), :class => "btn btn-primary", :style => "margin-bottom:20px;", :remote => true %> 
```

这是渲染右侧按钮的文件，我正在使用我的迈克尔书中的这段代码：

```
$("#follow_form").html("<%= escape_javascript(render('users/unfollow')) %>") 
```

但是，我收到上述错误，即找不到我的部分；谁能向我解释为什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:24:02.407

它说它正在尝试渲染一个模板，根据我的经验，它是 views/ 文件夹中的一个文件，名称前没有下划线。将下划线添加到文件名的开头并渲染 :partial => 'users/follow' 看看是否有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:45:57.383

我的阅读不好，问题是我的javascript文件的命名。它的名称必须与您的控制器操作相匹配。

# c# - 带有名称的元组的 C# 解决方法

> ID：13015520
> 
> 赞同：10
> 
> 时间：2012-10-22T16:18:05.307
> 
> 标签：c#, linq, tuples, anonymous-types

我想要具有可以传递、比较和识别的命名成员的不可变匿名类型——元组和匿名类型的合并。[**这不存在**](https://stackoverflow.com/questions/8200077/is-there-a-way-to-give-meaningful-names-for-tuple-items)，我意识到这一点。

所以问题是：**使用 C#4 或 5 有什么好的惯用替代品？**

用例是来自异构数据源的流畅 LINQ 数据处理。总之，C# 中的 ETL。我做了一些非常复杂的分析，数据来自多个平台和来源。“将其全部放在同一个平台上并使用实体框架”不是一种选择。我希望能够流畅地传递本质上是任意*记录*的内容——不可变的命名只读属性集。

除了为每个其他匿名类型创建自定义不可变 POCO 之外，我唯一能想到的就是使用属性将编译的注释添加到返回`Tuple`s 的方法中。当然，编写一个代码生成器来吐出不可变的 POCO 并不难，但我讨厌这会使项目的对象模型变得混乱。使用`dynamic`完全消除了静态类型的所有性能和设计时有用性，特别是如果从其他方法的结果中组合进一步的查询，所以我不认为它是一个可行的解决方案。

```
// My idea: Adding a attribute to methods to at least record the names
// of the "columns" of a Tuple at a method level
public class NamedTupleAttribute : Attribute {
    public string[] Names { get; private set; }
    public NamedTupleAttribute(string[] Names) { this.Names = Names; }
}

// Using NamedTuple attribute to note meaning of members of Tuple
[NamedTuple(new[] { "StoreNumber", "Gross", "Cost", "Tax" })]
public IEnumerable<Tuple<int, decimal, decimal, decimal>> GetSales { ... } 
```

* * *

我想要什么（C# 6 的虚构 MSDN 文档）：

### 鸭子（C# 参考）

**Duke**关键字允许在C# 的所有静态类型功能中使用匿名类型。与普通匿名类型一样，编译器会将具有相同数量、名称和属性类型的匿名类型视为具有相同类型。但是，duck 关键字还允许在成员声明中使用这些类型并作为泛型类型的类型参数。

### 1.鸭式实例

与匿名类型一样，duck 类型对象的实例只能使用没有类型名称的对象初始化器来创建。语法与普通匿名类型相同，只是 在**new**运算符之后添加了关键字**duck**：

 **```
var record = new duck { StoreNumber=1204,
                        Transaction=410, 
                        Date=new DateTime(2012, 12, 13), 
                        Gross=135.12m, 
                        Cost=97.80m,
                        Tax=12.11m }; 
```

### 2.duck类型引用

可以使用鸭子类型字面量、鸭子类型别名来引用鸭子类型，或者在可以推断出属性或方法的返回类型时隐式地引用鸭子类型。

**2.1 鸭子类型字面量**

鸭子类型可以用类型文字表示，它可以用来代替任何类型引用。Duck 类型文字由关键字**duck**后跟名称-类型标识符对列表组成，就像在方法的参数列表中一样，除了用花括号括起来：

```
// A duck type literal:
duck { int StoreNumber, int Transaction, DateTime Date, decimal Gross, decimal Cost, decimal Tax }

// In a member declaration:
public duck { int StoreNumber, int Transaction, DateTime Date, 
              decimal Gross, decimal Cost, decimal Tax } GetTransaction(...) { ... }

// As a type parameter:
var transactions = new List<duck { int StoreNumber, int Transaction, DateTime Date, 
                                   decimal Gross, decimal Cost, decimal Tax }>(); 
```

**2.2 鸭子类型别名**

您可以在 C# 代码文件或命名空间中的命名空间 using 指令之后立即使用 using 指令为鸭子类型分配别名。然后可以使用别名代替任何类型引用。

```
// Namespace directives:
using System;
using Odbc = System.Data.Odbc;

// duck type aliases:
using TransTotal = duck { int StoreNumber, int Transaction, DateTime Date, 
                           decimal Gross, decimal Cost, decimal Tax };

// Member declaration:
public TransTotal GetTransaction(...) { ... }

// As a type parameter:
var transactions = new List<TransTotal>(); 
```

**2.3 推断鸭子类型**

如果可以推断出属性或方法的返回类型，则可以在成员声明中省略鸭子类型文字的主体：

```
// Long form:
public duck { int StoreNumber, int Transaction, DateTime Date, 
              decimal Gross, decimal Cost, decimal Tax } GetDummyTransaction() {
    return new duck { ... };
}

// Short form:
public duck GetDummyTransaction() {
    return new duck { ... };
}

// Short form as a type parameter:
public IEnumerabe<duck> GetTransactions(...) {
    return 
        from record in someProvider.GetDetails(...)
        where ((DateTime)record["Date"]).Date == someDate
        group record by new {
            StoreNumber = (int)record["Number"],
            Transaction = (int)record["TransNum"],
            Date = (DateTime)record["Date"]
        } into transTotal
        select new duck {
            transTotal.Key.StoreNumber,
            transTotal.Key.Transaction,
            transTotal.Key.Date,
            Gross = transTotal.Sum(x => (decimal)x["Gross"]),
            Cost = transTotal.Sum(x => (decimal)x["Cost"]),
            Tax = transTotal.Sum(x => (decimal)x["Tax"]),
        };
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:31:02.747

您可能对[ExpandoObject感兴趣。](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T18:04:35.313

似乎您想实现自己的 IDynamicObjectProvider：http: [//msdn.microsoft.com/en-us/library/system.dynamic.idynamicmetaobjectprovider.aspx](http://msdn.microsoft.com/en-us/library/system.dynamic.idynamicmetaobjectprovider.aspx)

示例实现：http: [//msdn.microsoft.com/en-us/vstudio/ff800651.aspx](http://msdn.microsoft.com/en-us/vstudio/ff800651.aspx)

您似乎想要访问像 List> 这样的结构，其中 String 是名称，Type 是值类型，Object 是值。

但这似乎很麻烦，可能不会提供很好的性能。您可能应该只实现您需要的所有适当的类。对于必须在您之后维护代码的人来说，为每个输入定义接口似乎是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T18:44:09.457

您可能想看看这种方法：

```
public IEnumerable<T> GetTransactions<T>(..., 
    Func<int, int, DateTime, decimal, decimal, decimal, T> resultor) {
    return 
        from record in someProvider.GetDetails(...)
        where ((DateTime)record["Date"]).Date == someDate
        group record by new {
            StoreNumber = (int)record["Number"],
            Transaction = (int)record["TransNum"],
            Date = (DateTime)record["Date"]
        } into transTotal
        select resultor(
            transTotal.Key.StoreNumber,
            transTotal.Key.Transaction,
            transTotal.Key.Date,
            transTotal.Sum(x => (decimal)x["Gross"]),
            transTotal.Sum(x => (decimal)x["Cost"]),
            transTotal.Sum(x => (decimal)x["Tax"])
        );
} 
```

`resultor` `Func`映射到您的具体布局，`duck`采用与它一样多的参数，具有匹配的类型，并返回一个`T`. `T`当您调用方法广告提供您的具体时，就会推断出这`Func`一点，例如：

```
GetTransactions(..., (sn, t, d, g, c, tx) => return new {
    StoreNumber = sn,
    Transaction = t,
    Date        = d,
    Gross       = g,
    Cost        = c,
    Tax         = tx
}); 
```

这样生成的类型在被调用方法之外可用，因为您将定义它的责任交给调用者。没有 POCO DTO，没有动态、不变性、开箱即用的平等。看看这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T19:46:45.643

你确定动态太慢了吗？我已经对动态操作与直接调用进行了性能测试，实际上对动态调用增加的影响很小感到惊讶。我没有随身携带数字，但[发现这篇小博客文章](http://www.buunguyen.net/blog/fasterflect-vs-c-4-0-dynamic.html)显示操作长度仅增加了大约十倍。他的示例显示 200 万次调用需要 85 毫秒，而静态调用需要 7 毫秒。

它确实加起来。六秒钟的操作需要一分钟，但它比处理纯反射要少得多。**

# sencha-touch - 列表商店有 2 个项目，而列表显示 5 个项目

> ID：13015521
> 
> 赞同：0
> 
> 时间：2012-10-22T16:18:05.530
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试实现一个自动完成字段。结果将显示在列表中。但是每次我进行搜索时，新结果都会附加到以前的结果中。我尝试清除附在列表中的商店，但没有奏效。

在调试器中，商店显示 2 个项目，而列表显示许多项目（2 个新项目 + 先前搜索结果中的项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:44:41.653

这是修复：

```
list.refresh() 
```

从附加商店中删除项目后，您需要刷新列表以告诉它再次加载自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:58:04.677

尝试致电`removeAll()`您的商店。

例如：只是为了确保在删除之前检查

`var isStoreLoaded =Ext.getStore("theStore").isLoaded( ); if(isStoreLoaded) { Ext.getStore("storeBomSearch").removeAll();
}`

我希望这是一个普通的商店，而不是 treeStore。

# javascript - Angular.js：.value() 是设置应用程序范围常量以及如何在控制器中检索它的正确方法吗

> ID：13015523
> 
> 赞同：88
> 
> 时间：2012-10-22T16:18:18.957
> 
> 标签：javascript, angularjs

您好，我正在观看一些 angular.js 视频，发现 value() 方法用于设置一种模块范围的常量。例如，可以像这样设置 Angular-UI 库的配置：(coffeescript)

```
angular.module('app',[])
.value "ui.config", 
  tinymce:
    theme: 'simple'
    width: '500'
    height: '300' 
```

我的应用程序目前看起来像这样：

```
window.app = angular.module("app", [ 'ui'])

.config(["$routeProvider", ($routeProvider) ->
  $routeProvider
  .when "/users",
    templateUrl: "assets/templates/users/index.html"
    controller: IndexUsersCtrl

  .otherwise redirectTo: "/users"

])

.value 'csrf', $('meta[name="csrf-token"]').attr('content') #<---- attention here

IndexUsersCtrl = ($scope) ->
  $scope.users = gon.rabl
  console.log "I want to log the csrf value here" #<---- then attention
IndexUsersCtrl.$inject = ['$scope'] 
```

但我似乎无法通过利用与应用程序模块对应的“应用程序”变量来获得该值。

我在 ST 和 angularjs 的 google 组上读到过，共享公共代码 btwn 控制器的一种方法是通过服务，这个概念也适用于这里吗？

谢谢！

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-10-22T16:33:33.537

`Module.value(key, value)`用于注入可编辑值， `Module.constant(key, value)`用于注入常量值

两者之间的区别不在于您“无法编辑常量”，而在于您无法使用 $provide 拦截常量并注入其他内容。

```
// define a value
app.value('myThing', 'weee');

// define a constant
app.constant('myConst', 'blah');

// use it in a service
app.factory('myService', ['myThing', 'myConst', function(myThing, myConst){
   return {
       whatsMyThing: function() { 
          return myThing; //weee
       },
       getMyConst: function () {
          return myConst; //blah
       }
   };
}]);

// use it in a controller
app.controller('someController', ['$scope', 'myThing', 'myConst', 
    function($scope, myThing, myConst) {
        $scope.foo = myThing; //weee
        $scope.bar = myConst; //blah
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-18T15:10:58.453

我最近想在测试中将此功能与 Karma 一起使用。正如 Dan Doyon 指出的那样，关键是您可以像控制器、服务等一样注入一个值。您可以将 .value 设置为许多不同的类型 - 字符串、对象数组等。例如：

myvalues.js 一个包含值的文件 - 确保它包含在您的 karma conf 文件中

```
var myConstantsModule = angular.module('test.models', []);
myConstantModule.value('dataitem', 'thedata');
// or something like this if needed
myConstantModule.value('theitems', [                                                                                                                                                                                                             
  {name: 'Item 1'},                                                                                                                                                                                                                         
  {name: 'Item 2'},                                                                                                                                                                                                                         
  {name: 'Item 3'}
]); 
```

]);

test/spec/mytest.js - 也许这是 Karma 加载的 Jasmine 规范文件

```
describe('my model', function() {
    var theValue;
    var theArray;
    beforeEach(module('test.models'));
    beforeEach(inject(function(dataitem,theitems) {
      // note that dataitem is just available
      // after calling module('test.models')
      theValue = dataitem;
      theArray = theitems;
    });
    it('should do something',function() {
      // now you can use the value in your tests as needed
      console.log("The value is " + theValue);
      console.log("The array is " + theArray);
    });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T16:27:50.013

You need to reference `csrf` in your controller `IndexUsersCtrl = ( $scope, csrf )`

```
IndexUsersCtrl.$inject = [ '$scope', 'csrf' ] 
```

# ruby - 是否可以要求 Gemfile 之外的文件？

> ID：13015536
> 
> 赞同：5
> 
> 时间：2012-10-22T16:19:12.457
> 
> 标签：ruby, gem, bundler

例如，我正在开发一个gem，而在我开发的时候，我使用`pry`了IRB，而不是`debugger`用于调试。但是，我不希望可能的贡献者必须安装它们（因为他们可能不需要它们）。我的第一个想法是将它们放在一个 Bundler 组中：

```
source :rubygems

gemspec

group :extras do
  gem "pry"
  gem "debugger"
end 
```

然后人们可以使用：

```
$ bundle install --without extras 
```

但我希望它是未安装的默认值。完美的是它们**不在**my 中`Gemfile`，但我仍然可以要求它们（如果它们存在于计算机上）。这个解决方案可以，因为我不在乎他们被锁定在哪个版本。可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-18T19:44:16.817

您可以添加任意加载路径，然后从它们中获取 gem。查看全局变量`$:`

```
puts $:.inspect
# ["/var/myproject/releases/20200918191637/lib", "/var/myproject/releases/20200918191637/vendor", "/var/myproject/releases/20200918191637/app/assets", "/var/myproject/releases/20200918191637/app/controllers", "/var/myproject/releases/20200918191637/app/helpers", "/var/myproject/releases/20200918191637/app/mailers", "/var/myproject/releases/20200918191637/app/models", "/home/deploy/.rvm/gems/ruby-2.3.0/gems/bundler-2.0.2/lib", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/gems/2.3.0/gems/json-1.8.3/lib", "/home/deploy/.rvm/gems/ruby-2.3.0/gems/bundler-2.0.2/lib/gems/bundler-2.0.2/lib", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/x86_64-linux", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby/2.3.0/x86_64-linux", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/x86_64-linux"] 
```

现在让我们追加`$:`并要求一个宝石

```
require 'method_source'
# LoadError: cannot load such file -- method_source
$: << '/home/deploy/.rvm/gems/ruby-2.2.4@myset/gems/method_source-1.0.0/lib'
# ["/var/myproject/releases/20200918191637/lib", "/var/myproject/releases/20200918191637/vendor", "/var/myproject/releases/20200918191637/app/assets", "/var/myproject/releases/20200918191637/app/controllers", "/var/myproject/releases/20200918191637/app/helpers", "/var/myproject/releases/20200918191637/app/mailers", "/var/myproject/releases/20200918191637/app/models", "/home/deploy/.rvm/gems/ruby-2.3.0/gems/bundler-2.0.2/lib", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/gems/2.3.0/gems/json-1.8.3/lib", "/home/deploy/.rvm/gems/ruby-2.3.0/gems/bundler-2.0.2/lib/gems/bundler-2.0.2/lib", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/x86_64-linux", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby/2.3.0/x86_64-linux", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/vendor_ruby", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0", "/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/x86_64-linux", "/home/deploy/.rvm/gems/ruby-2.2.4@myset/gems/method_source-1.0.0/lib"]
require 'method_source'
# true 
```

但是，如果您有很多依赖项，那可能会很乏味，因此您可以尝试以下方法：

```
Dir['/home/deploy/.rvm/gems/ruby-2.2.4@myset/gems/*'].each do |gem_path|
  $: << File.join(gem_path, 'lib')
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:16:52.227

`bundle install`是“选择退出”——除非您指定`--without some_group`，否则它会安装所有内容。

如果你绝对不想在你的 Gemfile 中有一个给定的 gem，你*可以*在你的包之外只是`gem install`那个流氓 gem。然后它会在下面`irb`直接对你可见（但如果你在运行的代码中`ruby`尝试它，显然你会得到错误）。`require``bundle exec`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T19:43:08.047

您可以将基于环境变量的条件添加到 Gemfile。例子：

```
source :rubygems

gemspec

if ENV['WITH_EXTRAS'] == '1'
  gem "pry"
  gem "debugger"
end 
```

`'1'`如果您将环境变量设置为eg ，则仅安装/加载 gems `WITH_EXTRAS=1 bundle install`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-15T14:25:32.760

现在你可以使用“可选”参数，它会按照你的要求做：它不会安装额外的，除非人们`bundle --with extras`

```
group :extras, optional:true do
   ...
end 
```

[https://bundler.io/v2.3/guides/groups.html#optional-groups](https://bundler.io/v2.3/guides/groups.html#optional-groups)

# java - JavaFX 类控制器舞台/窗口参考

> ID：13015537
> 
> 赞同：4
> 
> 时间：2012-10-22T16:19:17.397
> 
> 标签：java, javafx-2, javafx

有没有办法从关联的类控制器中获取 FXML 加载文件的 Stage/Window 对象？

特别是，我有一个模式窗口的控制器，我需要舞台来关闭它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T01:24:59.620

我找不到解决问题的优雅方法。但我发现了这两种选择：

*   从场景中的节点获取窗口引用

    ```
    @FXML private Button closeButton ;

    public void handleCloseButton() {
      Scene scene = closeButton.getScene();
      if (scene != null) {
        Window window = scene.getWindow();
        if (window != null) {
          window.hide();
        }
      }
    } 
    ```

*   加载 FXML 时将 Window 作为参数传递给控制器​​。

    ```
    String resource = "/modalWindow.fxml";

    URL location = getClass().getResource(resource);
    FXMLLoader fxmlLoader = new FXMLLoader();
    fxmlLoader.setLocation(location);
    fxmlLoader.setBuilderFactory(new JavaFXBuilderFactory());

    Parent root = (Parent) fxmlLoader.load();

    controller = (FormController) fxmlLoader.getController();

    dialogStage = new Stage();

    controller.setStage(dialogStage);

    ... 
    ```

    并且 FormController 必须实现 setStage 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-17T19:28:37.640

```
@FXML
private Button closeBtn;
Stage currentStage = (Stage)closeBtn.getScene().getWindow();
currentStage.close(); 
```

另一种方法是为 Stage 定义一个静态 getter 并访问它

> 主班

```
public class Main extends Application {
    private static Stage primaryStage; // **Declare static Stage**

    private void setPrimaryStage(Stage stage) {
        Main.primaryStage = stage;
    }

    static public Stage getPrimaryStage() {
        return Main.primaryStage;
    }

    @Override
    public void start(Stage primaryStage) throws Exception{
        setPrimaryStage(primaryStage); // **Set the Stage**
        Parent root = FXMLLoader.load(getClass().getResource("sample.fxml"));
        primaryStage.setTitle("Hello World");
        primaryStage.setScene(new Scene(root, 300, 275));
        primaryStage.show();
    }
} 
```

现在您可以通过调用访问此阶段

> Main.getPrimaryStage()

在控制器类中

```
public class Controller {
public void onMouseClickAction(ActionEvent e) {
    Stage s = Main.getPrimaryStage();
    s.close();
}
} 
```

# cakephp - cakephp - 一种行为是否需要其他行为？

> ID：13015541
> 
> 赞同：0
> 
> 时间：2012-10-22T16:19:25.010
> 
> 标签：cakephp, cakephp-2.0

我正在构建一个自定义行为，但我需要在其中使用 Containable 行为。有没有办法确保如果我使用我的自定义行为，也会使用 Containable 行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:29:00.980

您可以像这样在您的行为中加载行为：

```
public function setup(Model $model, $settings = array()) {
    if (!$model->Behaviors->enabled('Containable')) {
        $model->Behaviors->load('Containable');
        // or throw an exception letting user know its required to do it manually
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:11:45.513

取决于你需要做什么。我想您可以扩展`ContainableBehavior`该类或加载它。

# php - 如何在 php 中将 Android 签名数据分离成单独的字符串

> ID：13015545
> 
> 赞同：2
> 
> 时间：2012-10-22T16:19:39.877
> 
> 标签：php, android, eclipse

所以我有使用 PHP 服务器验证的应用内计费。但是，我不知道如何在 PHP 中将我的签名数据字符串分成单独的字符串。当我在 PHP 中回显 $signedData 时，我得到以下信息。

```
{\"nonce\":4658477652655443541,\"orders\":[{\"notificationId\":\"android.test.purchased\",\"orderId\":\"transactionId.android.test.purchased\",\"packageName\":\"com.coolboy.coolapp\",\"productId\":\"android.test.purchased\",\"purchaseTime\":1350913071409,\"purchaseState\":0}]} 
```

你如何将 PHP 中的 nonce、orders 等分隔为单独的变量？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:21:29.390

用于[`json_decode`](http://php.net/manual/en/function.json-decode.php)将字符串解码为对象。

这段代码：

```
$str = "{\"nonce\":4658477652655443541,\"orders\":[{\"notificationId\":\"android.test.purchased\",\"orderId\":\"transactionId.android.test.purchased\",\"packageName\":\"com.coolboy.coolapp\",\"productId\":\"android.test.purchased\",\"purchaseTime\":1350913071409,\"purchaseState\":0}]}";
$json = json_decode($str);
var_dump($json); 
```

产生：

```
class stdClass#1 (2) {
  public $nonce =>
  double(4.6584776526554E+18)
  public $orders =>
  array(1) {
    [0] =>
    class stdClass#2 (6) {
      public $notificationId =>
      string(22) "android.test.purchased"
      public $orderId =>
      string(36) "transactionId.android.test.purchased"
      public $packageName =>
      string(19) "com.coolboy.coolapp"
      public $productId =>
      string(22) "android.test.purchased"
      public $purchaseTime =>
      double(1350913071409)
      public $purchaseState =>
      int(0)
    }
  }
} 
```

当然你可以这样做：

```
$nonce = $json->nonce;
$notificationId = $json->orders[0]->notificationId;
// etc... 
```

有关 JSON 的更多信息：

*   [http://en.wikipedia.org/wiki/JSON](http://en.wikipedia.org/wiki/JSON)（技术含量较低）
*   [http://www.json.org/](http://www.json.org/)（更多技术）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:21:34.717

那是JSON。

```
$array = json_decode($var); 
```

# nhibernate - NHibernate 约定模型映射器；IsRootEntity 和 IsEntity 有什么区别

> ID：13015547
> 
> 赞同：6
> 
> 时间：2012-10-22T16:19:49.167
> 
> 标签：nhibernate, nhibernate-mapping, sharp-architecture, convention-over-configur

我在玩 Sharp Architecture Lite，它强调约定优于配置，并试图了解 NHibernate是如何`ConventionModelMapper`工作的。具体来说，我无法区分下面的 IsRootEntity 和 IsEntity 方法（顺便说一句，`Entity`是 Sharp Arch 附带的抽象类）：

```
 internal static class Conventions
        {
        public static void WithConventions(this ConventionModelMapper mapper, Configuration configuration) {
                Type baseEntityType = typeof(Entity);

                mapper.IsEntity((type, declared) => IsEntity(type));
                mapper.IsRootEntity((type, declared) => baseEntityType.Equals(type.BaseType));

        public static bool IsEntity(Type type) {
                return typeof(Entity).IsAssignableFrom(type)
                       && typeof(Entity) != type
                       && !type.IsInterface;
            }
    } 
```

我收集到该`IsEntity`方法用于告诉 NHibernate 哪些类有资格映射/持久化到数据库。但是，我一生都无法弄清楚该`IsRootEntity`方法的作用。周围的文档`ConventionModelMapper`非常稀少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:02:59.713

如果你考虑这种情况：

```
class B : Entity { ... }
class A : B { ... } 
```

映射它们时，A 和 B 都是实体（IsEntity 应该为它们返回 true），并且 NHibernate 会将 A 映射为 B 的子类。但是，Entity 本身不应该被映射，因为它是所有实体的基类（通常你不希望映射此基类），因此 IsRootEntity 将为 Entity 返回 true，为其所有子类返回 false - 因此表明不应映射 Entity，因为它是“根”类

# jquery-mobile - jquery mobile中的简单窗口大小

> ID：13015549
> 
> 赞同：0
> 
> 时间：2012-10-22T16:20:00.757
> 
> 标签：jquery-mobile, web, screen

我正在使用带有 HTML5 样板的 JQM。我的目标（出于测试目的）是在桌面浏览器中拥有一个整体 div，它将向我显示我的应用程序在真实设备上的预期大小区域。然而，在桌面浏览器中，与 iphone4 浏览器宽度布局相比，宽度似乎并不匹配。我不希望更改视口元定义，尽管我怀疑这是我的问题。有人可以向我解释一下：

为什么大小为 640 x 960 px（边框为 1 px，位置为绝对）的 div 的大小在使用这种设置的实际设备上不能反映相同大小的区域外观？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:23:09.187

只需使用 Chrome 的开发者工具。您可以选择欺骗您的用户代理以及不同设备的设备指标。

在 Chrome 中时：

1.  按 F12。
2.  单击右下角的齿轮图标（设置）。
3.  单击覆盖选项卡。
4.  在这里，您可以选择更改您的用户代理字符串或覆盖浏览器的视口以匹配特定设备（如 iPhone）。如果您更改用户代理字符串以模仿 iPhone，则设备指标应自动调整为同一设备的正确大小。

请注意，您必须保持 Chrome 开发者工具处于打开状态，一旦您关闭它们，您也会失去 UA 欺骗和设备指标欺骗。

为了直接回答您的问题，不同的屏幕具有不同的像素密度，因此具有较高像素密度的屏幕将在较小的物理区域中显示相同数量的像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:10:11.930

作为一个附加组件，

在处理 CSS 媒体查询时，

*   `device-width`和
*   `width`.

以iphone4为例，虽然分辨率

*   ( `width`x `height`) 等于 (640 x 960)，

设备实际呈现

*   ( `device-width`x `device-height`) 等于 (320 x 480)

从[这里](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)我们观察到**每个 CSS 像素由 2 个屏幕分辨率像素处理**。这是 2 种不同尺寸的结果。

帮助：[不同设备的像素密度](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)

# cuda - 这是寄存器延迟吗？

> ID：13015564
> 
> 赞同：2
> 
> 时间：2012-10-22T16:20:36.773
> 
> 标签：cuda

我正在 GTX680 上进行一些性能 CUDA 测试，想知道是否有人可以帮助我理解为什么我会得到以下性能结果。我正在运行的代码如下：

```
#include <stdio.h>
using namespace std;

__global__ void test_hardcoded(int rec,int * output)
{

    int a;
    int rec2=rec/2;
    if(threadIdx.x==1000) *output=rec;
    if(threadIdx.x==1000) *(output+1)=rec2;

    for (int i=0;i<10000;i++)
    {
        __syncthreads();
        a+=i;
    }
    if(threadIdx.x==1000) *output=a;   //will never happen but should fool compiler as to not skip the for loop

}
__global__ void test_softcoded(int rec,int * output)
{
    int a;
    int rec2=rec/2; //This should ensure that we are using the a register not constant memory
    if(threadIdx.x==1000) *output=rec;
    if(threadIdx.x==1000) *(output+1)=rec2;

    for (int i=0;i<=rec2;i++)
    {    __syncthreads();
        a+=i;
    }
    if(threadIdx.x==1000) *output=a;   //will never happen but should fool compiler as to not skip the for loop

}

int main(int argc, char *argv[])
{
    float timestamp;
    cudaEvent_t event_start,event_stop;
    // Initialise
    cudaSetDevice(0);

    cudaEventCreate(&event_start);
    cudaEventCreate(&event_stop);
    cudaEventRecord(event_start, 0);
    dim3 threadsPerBlock;
    dim3 blocks;
    threadsPerBlock.x=32;
    threadsPerBlock.y=32;
    threadsPerBlock.z=1;
    blocks.x=1;
    blocks.y=1000;
    blocks.z=1;

    cudaEventRecord(event_start);
    test_hardcoded<<<blocks,threadsPerBlock,0>>>(10000,NULL);
    cudaEventRecord(event_stop, 0);
    cudaEventSynchronize(event_stop);
    cudaEventElapsedTime(&timestamp, event_start, event_stop);
    printf("test_hardcoded() took  %fms \n", timestamp);

    cudaEventRecord(event_start);
    test_softcoded<<<blocks,threadsPerBlock,0>>>(20000,NULL);
    cudaEventRecord(event_stop, 0);
    cudaEventSynchronize(event_stop);
    cudaEventElapsedTime(&timestamp, event_start, event_stop);
    printf("test_softcoded() took  %fms \n", timestamp);

} 
```

根据代码，我正在运行两个内核。他们所做的只是循环和添加。唯一的区别是 test_softcoded() 循环与寄存器进行比较，而 test_hardcoded() 直接与硬编码整数进行比较。

当我运行上面的代码时，我得到以下结果

```
$ nvcc -arch=sm_30 test7.cu
$ ./a.out

test_hardcoded() took  51.353985ms 
test_softcoded() took  99.209694ms 
```

test_hardcoded() 函数比 test-softcoded() 快两倍！！！！

我知道在 test_softcoded() 中存在写入注册表依赖项后潜在的读取，但我的意识是注册表延迟对于高占用率是完全隐藏的，并且应该非常高），所以我想知道可能是什么问题以及要做什么这样做可以提高 test_softcoded() 的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:25:58.880

Due to this hard coded value, compiler can do some optimizations, like loop unrolling, which may increase the performance by some amount. that may be the reason.

You can check it by adding some unrolling to for loop in "test_softcoded" like Adding code like '#pragma unroll 5000' before 'for (int i=0;i<=rec2;i++)' and running it will solve your doubt.

# php - CodeIgniter 菜单/导航困境

> ID：13015571
> 
> 赞同：0
> 
> 时间：2012-10-22T16:21:16.463
> 
> 标签：php, codeigniter, navigation

我正在尝试 CodeIgniter 和整个 MVC 模式。我已经安装了[Colin Williams 的模板库](http://www.williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)，但是当我试图考虑包含两个菜单/导航的正确方法时，我遇到了困难：一个通用（可能在顶部）和一个特定于每个控制器的侧边栏。

无论哪种方式，它们的位置都不相关，我正在考虑代码的一般结构。现在我的`get_menu()`模型中有一个函数，当加载侧边栏的部分模板视图时，它的返回作为参数给出。或者我应该在控制器中执行此操作？

我的一个朋友给我建议不要用 ie a 扩展默认控制器或模型`MY_Controller`，但我不知道什么时候实现通用菜单？或者我应该在模板配置文件中对其进行硬编码吗？

我找不到此类任务的指导方针。无论我走到哪里，我都会找到一个新的解决方案，其中许多并不漂亮，其他很多都有很多重复的代码。

**编辑。**我已经更新了我的代码。我还没有决定如何编写顶部导航（可能是`MY_Controller`这样我可以突出显示当前页面）。

**MY_Controller.php**

```
abstract class MY_Controller extends CI_Controller {
    protected $_nav;

    const CONTENT_REGION = 'content';
    const NAV_REGION = 'nav';
    const TITLE_REGION = 'title';

    const SIDEBAR_NAV_TEMPLATE = 'templates/sidebar_nav';

    public function __construct() {
        parent::__construct();
        $this->_load_nav();
    }

    abstract protected function _get_nav();

    protected function _load_nav() {
        $this->_nav = array('nav' => $this->_get_nav());
    }

    protected function _render() {
        $args = func_get_args();
        $n = func_num_args() - 1;

        if ($n < 2) {
            return;
        }

        $this->template->write(self::TITLE_REGION, $args[0]);

        for ($i = 1; $i < $n; $i++) {
            $this->template->write_view(self::CONTENT_REGION, $args[$i], $args[$n]);
        }

        $this->template->write_view(self::NAV_REGION, self::SIDEBAR_NAV_TEMPLATE, $this->_nav);
        $this->template->render();
    }

    protected function _set_active_view($active) {
        if ($active !== null && isset($this->_nav['nav'][$active])) {
            $this->_nav['nav'][$active]['class'] .= ' active';
        }
    }
} 
```

**集合.php**

```
class Collection extends MY_Controller {
    public function __construct() {
        parent::__construct();
        $this->load->model('collection_model');
    }

    protected function _get_nav() {
        return array(
            'collection/view' => array(
                'href'  => 'collection/view',
                'value' => 'View collection',
                'class' => 'icon-film'
            ),
            'collection/add' => array(
                'href'  => 'collection/add',
                'value' => 'Add title',
                'class' => 'icon-plus-sign'
            )
        );
    }

    public function index() {
        $this->view();
    }

    public function view() {
        $data['list'] = $this->collection_model->get_list();
        $this->_set_active_view('collection/view');
        $this->_render('View Collection', 'collection/view', $data);
    }
} 
```

**sidebar_nav.php**

```
<ul class="nav nav-list bs-docs-sidenav">
    <?php

    foreach ($nav as $item) {
        echo '<li';

        if ($item['class'] !== null || $item['class'] !== '') {
            echo ' class="' . $item['class'] . '"';
        }

        echo '><a href="' . $item['href'] . '">' . $item['value'] . '</a></li>';
    }

    ?>
</ul> 
```

这看起来怎么样？我可能会编写一个函数`_render($title, $view, $data)`来`MY_Controller`完成所有模板的工作。你怎么看？

我一直在考虑的另一个解决方案是`_get_nav()`从配置文件中删除并加载所需的导航数据，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:49:58.880

你的“伙伴”有什么可能的理由告诉你不要扩展控制器类？这种重复的东西正是该功能的用途...使用 getMenu 和其他您将在整个站点中经常使用的功能创建 MY_Controller，然后只需使集合扩展 MY_Controller 而不是 CI_Controller。

我们不仅扩展了 CI 控制器，而且还扩展了 MY_Controller 到 User_Controller 和 Admin_Controller 以包含仅对这些用户可用的特定功能。

我真的无法想象为什么有人会告诉你不要那样做。

# c# - Visual Studio 2012 Express 调试 explorer.exe - 没有断点命中

> ID：13015580
> 
> 赞同：2
> 
> 时间：2012-10-22T16:21:42.170
> 
> 标签：c#, debugging, visual-studio-2012, breakpoints, windows-explorer

我在调试 SolidWorks Enterprise PDM 插件时遇到问题。我不知道如何在 EPDM 中处理插件，但问题似乎与 Visual Studio 有关 - 也许其他人与其他平台的插件有类似的问题。

添加调试插件（以便使用最新源）： ![PDM 调试插件](../Images/80172b5b85dbf1d90f5df1fdb2a0a0d5.png)

在 Visual Studio 2010 Express 中没有问题 - 杀死资源管理器，启动它，附加到它，然后： ![VS2010调试成功](../Images/800d4c8be3d3934cb599e684d72dd041.png)

我无法使用 Visual Studio 2012 Express 实现同样的效果。虽然它似乎正在调试资源管理器（文件是只读的，显示停止调试按钮），但它没有遇到断点： ![VS2012调试失败](../Images/4fd5f53f03d6cafb5c9fe792d4d37e96.png)

我在 Windows 7 Professional x64 上工作。插件是使用 .NET 3.5 构建的。我已经使用了 VS2010 和 VS2012 解决方案来解决同样的问题。

我确实重新启动了 explorer.exe，所以加载了最新版本的插件。项目使用启动操作“explorer.exe”：

```
 <StartAction>Program</StartAction>
    <StartProgram>$(windir)\explorer.exe</StartProgram>
    <StartArguments></StartArguments> 
```

我不知道为什么没有命中断点，非常感谢任何帮助。

谢谢！

# 更新 1

我已经检查了 Hans 的建议——还有另外两个进程正在启动，但附加到它们并没有产生任何结果。

这又指出了一件事——当我附加到这些进程时，VisualStudio 中有一条信息，断点不会被命中，因为没有加载调试符号——请注意，在[附加的第三张图像](https://i.stack.imgur.com/GBPEk.png)中加载了调试符号（红色圆圈已填充且没有感叹号）。

# 更新 2

当我将 VisualStudio 附加到托管 explorer.exe 时 - 断点被击中！

explorer.exe 似乎只在托管模式下运行： ![explorer.exe 在不同模式下](../Images/59636bd57f62537fd5fa8878acfd1636.png)

它甚至可以同时在两种模式下运行： ![explorer.exe 两种模式](../Images/466d2fc8c9afb938180afc5556777e35.png)

所以问题是如何强制 VisualStudio 在托管模式下启动 explorer.exe？

# 更新 3

它可能是 VisualStudio 2012 的错误吗？

使用 VS2010 进行调试时，资源管理器以正常模式启动，但加载插件后，它立即切换到托管模式，并且 VS2010 在断点处停止。

与 VS2012 不同 - 加载插件时，explorer.exe 不会切换到托管模式，并且（因此？它是否连接？）断点不会被命中。

但是当 VS2012 附加到已经处于托管模式的 explorer.exe 时，它​​会在断点处停止。

# 更新 4

我已经设法解决了问题的本质 - 当将 VS2012 附加到另一个进程（例如 explorer.exe）时，选择了“自动确定要调试的代码类型”，并且该进程以本机模式启动，稍后加载托管代码 - 调试器不会在断点处停止。当附加到或附加到明确选择的代码类型（“托管（v3.5，v3.0，v2\. 0)") - 调试器在断点处停止。

已在[连接](http://connect.microsoft.com/VisualStudio/feedback/details/768361/)上发布- 等待解决方案。如果您遇到与此更新中所述相同的问题，请投票。

# 更新 5

我刚刚在[一个简单的托管外壳扩展](http://www.codeproject.com/Articles/174369/How-to-Write-Windows-Shell-Extension-with-NET-Lang)上对其进行了测试，因此它与 SolidWorks Enterprise PDM 无关。

我还在连接上发布[了一个更精确的错误](https://connect.microsoft.com/VisualStudio/feedback/details/769118/)。

# 更新 6

截至 2013 年初，Microsoft 声称调试器未按预期运行是一个**设计****决定**。第一个连接错误报告中的更多详细信息。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:43:12.453

当您构建一个`.dll`（我假设它以这种方式加载到资源管理器中）时，断点总是有问题（至少根据我的经验），因为您无法提前知道文件将在内存中加载的位置，因此很难添加一个断点。

您可以尝试在代码中添加手动[断点调用](http://en.wikipedia.org/wiki/INT_%28x86_instruction%29#INT_3)（即`int3`）。在 C++ 中，这将是：

```
asm {
    int 3;
} 
```

在 C#[中有一个方法](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)：

```
System.Diagnostics.Debugger.Break() 
```

尝试添加到函数/代码部分的开头（不要忘记在**调试模式下**共同编译）。

然后您将开始调试`.exe`加载文件和加载库的应用程序 ()`.dll`应该触发断点。**

# php - 如何在无序 PHP 数组中找到最低价格（数字）和最高价格（数字）？

> ID：13015582
> 
> 赞同：-4
> 
> 时间：2012-10-22T16:21:41.497
> 
> 标签：php

> **可能重复：**
> [如何获取数组的最高值和最低值项？](https://stackoverflow.com/questions/1539580/how-to-get-the-highest-and-lowest-value-items-of-an-array)

我在 PHP 中有一个数组，它的输出如下：

```
Array ( [0] => 180.99 [1] => 140 [2] => 200.45 ) 
```

这些数字可以是小数，因为它们是价格。

例如，我想显示该产品的价格范围为 140 到 200 。如何使用该无序数组在其中找到最小、最大价格？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:23:17.377

使用这些特殊函数（[**最小值**](http://php.net/manual/en/function.min.php)和[**最大值**](http://php.net/manual/en/function.max.php)）之类的东西可能会有所帮助吗？

```
$arr = array(180.99, 140, 200.45);
$min = min($arr);
echo $min; // 140
$max = max($arr);
echo $max; // 200.45 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:23:21.330

您可以将[min](http://php.net/manual/en/function.min.php)和[max](http://php.net/manual/en/function.max.php)函数用作：

```
$arr = array(180, 140, 200);
$min = min($arr);
$max = max($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:25:05.067

您可以使用 sort 对数组进行[排序](http://php.net/manual/en/function.sort.php)，然后访问已排序数组的第一个和最后一个元素。

```
 $arr = array(180, 140, 200);
   sort($arr);
   echo $arr[0]; //first element
   echo end($arr); //last element 
```

你也可以像这样使用 min() 和 max() 函数，

```
 $arr = array(180, 140, 200);      
  echo min($arr); //min element
  echo max($arr); //max element 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:24:24.027

令人惊讶的`min()`&`max()`

[http://php.net/min](http://php.net/min)

[http://php.net/max](http://php.net/max)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:24:32.353

`echo "this price range is between $" . min($array) . " and $" . max($array);`

你的意思是`min()`和`max()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T16:25:41.857

```
$array = array(180, 140, 200);

echo 'Min: ' . min($array) . "\n";
echo 'Max: ' . max($array) . "\n"; 
```

# java - 为什么 getSession() 在随后的请求中没有在短时间内返回相同的会话？

> ID：13015583
> 
> 赞同：14
> 
> 时间：2012-10-22T16:21:48.130
> 
> 标签：java, jquery, spring, http-get, httpsession

我发送一个`$.getJSON`（HTTP GET）请求两次（使用不同的数据），一个接一个（假设我们有request1和request2）。我可以在 FF 和 Chrome 的开发人员工具中看到我具有相同的`cookie:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A`标头字段。

在服务器端，我尝试获取会话：

```
HttpSession session = request.getSession();
boolean isSessionNew = session.isNew();
String sessionId = session.getId();
String cookieFromRequestHeader = request.getHeader("cookie"); 
```

如果我为我得到的两个请求打印这些变量，
request1：

> isSessionNew:true
> cookieFromRequestHeader:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A
> session.getId():9212B14094AB92D0F7F10EE21F593E52

请求2：

> isSessionNew:true
> cookieFromRequestHeader:JSESSIONID=FD0D502635EEB67E3D36203E26CBB59A
> session.getId(): E8734E413FA3D3FEBD4E38A7BF27BA58

**如您所见，服务器清楚地为 request2 创建了一个新会话`request.getSession()`。但它为什么这样做呢？它理论上应该是同步的，并为您提供与第一个请求（首先到达此代码）创建的相同会话。**现在，为了确保会话创建是同步的，我执行了以下操作：

```
@Autowired
private ServletContext servletContext;
...
synchronized (servletContext) {
    HttpSession session = request.getSession();
    boolean isSessionNew = session.isNew();
    String sessionId = session.getId();
    String cookieFromRequestHeader = request.getHeader("cookie");
} 
```

我得到了同样的结果。

如果我稍后再次发送相同的请求（比如说 request1' 和 request2'），我会得到
request1'：

> isSessionNew:false
> cookieFromRequestHeader:JSESSIONID=E8734E413FA3D3FEBD4E38A7BF27BA58 session.getId():E8734E413FA3D3FEBD4E38A7BF27BA58

请求2'：

> isSessionNew:false
> cookieFromRequestHeader:JSESSIONID=E8734E413FA3D3FEBD4E38A7BF27BA58
> session.getId():E8734E413FA3D3FEBD4E38A7BF27BA58

**If you see closely now, the session id is the same (in request1' and request2') and is the last one created from the request2\. Is there a way of me getting the same session from multiple subsequent requests that come to the server in very short time frames?**

I am not using any special features - I am using Spring's out of the box session strategy. Also, it looks like the cookie JSESSIONID from the frist 2 requests (request1 and request2) come from the first time I visit the page (lets say there was a request0 sent to the server when it created this JSESSIONID). But it also looks like unless you explicitly call request.getSession(), the backend/server will always create a new JSESSIONID for every response and send it back to the client. So when a new request is sent from the client after a response comes, its going to have a new JSESSIONID. It looks like Spring out of the box session handling is not working appropriately.

Kind Regards,
despot

**ADDITIONAL RESEARCH**:

I wanted to see if I can register the session creation with a HttpSessionListner. This way I can see when the session with id FD0D502635EEB67E3D36203E26CBB59A (the cookie that is being sent in request1 and request2) is created. And also, weather using the listener (the SessionProcessor) I can store the sessions in a map by id and later on retrieve them by the id from the cookie (so I don't need to create another session).
So here is the code:

```
public interface ISessionProcessor extends ISessionRetriever, ISessionPopulator {
}

public interface ISessionRetriever {

    HttpSession getSession(String sessionId);
}

public interface ISessionPopulator {

    HttpSession setSession(String sessionId, HttpSession session);
} 
```

The reason for separating these was because I only wanted to allow the listener to add sessions to the map, and the controllers only to be able to create a session through request.getSession() - so the listner's sessionCreated method was invoked always (as you'll see below).

```
public class SessionProcessor implements ISessionProcessor {

    private Map<String, HttpSession> sessions = new HashMap<String, HttpSession>();

    @Override
    public HttpSession getSession(String sessionId) {
            return sessions.get(sessionId);
    }

    @Override
    public HttpSession setSession(String sessionId, HttpSession session) {
            return sessions.put(sessionId, session);
    }

}

public class SessionRetrieverHttpSessionListener implements HttpSessionListener {

    private static final Logger LOGGER = LoggerFactory.getLogger(SessionRetrieverHttpSessionListener.class);

    @Autowired
    private ISessionPopulator sessionPopulator;

    @Override
    public void sessionCreated(HttpSessionEvent se) {
            HttpSession session = se.getSession();
            LOGGER.debug("Session with id {} created. MaxInactiveInterval: {} session:{}", new Object[]{session.getId(), session.getMaxInactiveInterval(), session});
            sessionPopulator.setSession(session.getId(), session);
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
            HttpSession session = se.getSession();
            // session has been invalidated and all session data (except Id) is no longer available
            LOGGER.debug("Session with id {} destroyed. MaxInactiveInterval: {}, LastAccessedTime: {}, session:{}", 
                            new Object[]{session.getId(), session.getMaxInactiveInterval(), session.getLastAccessedTime(), session});
    }
} 
```

in web.xml: org.springframework.web.context.ContextLoaderListener

```
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/my-servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<listener>
    <listener-class>mypackage.listener.SessionRetrieverHttpSessionListener</listener-class>
</listener>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

in my-servlet-context.xml:

```
<bean class="mypackage.listener.SessionProcessor"/>
<bean class="mypackage.SomeController"/> 
```

in my controller:

```
 synchronized (servletContext) {
                            String cookieFromRequestHeader = request.getHeader("cookie");
                            LOG.debug("cookieFromRequestHeader:{}", new Object[] {cookieFromRequestHeader});
                            String jsessionIdFromCookieFromRequestHeader = cookieFromRequestHeader.substring(cookieFromRequestHeader.indexOf("=") + 1);
                            LOG.debug("jsessionIdFromCookieFromRequestHeader:{}", new Object[] {jsessionIdFromCookieFromRequestHeader});
                            session = sessionRetriever.getSession(jsessionIdFromCookieFromRequestHeader);
                            LOG.debug("session:{}", new Object[] {session});
                            if (session == null) {
                            LOG.debug("request.isRequestedSessionIdFromCookie():{}, request.isRequestedSessionIdFromURL():{}, WebUtils.getSessionId(request):{}.", new Object[] {request.isRequestedSessionIdFromCookie(), request.isRequestedSessionIdFromURL(), WebUtils.getSessionId(request)});
                            session = request.getSession();
                            boolean isSessionNew = session.isNew();
                            LOG.debug("Is session new? - {}. The session should not be new after the first fingerprint part is received - check if this occured in the logs - if that happend than there is an error!", isSessionNew);
                            LOG.debug("request.isRequestedSessionIdFromCookie():{}, request.isRequestedSessionIdFromURL():{}, WebUtils.getSessionId(request):{}.", new Object[] {request.isRequestedSessionIdFromCookie(), request.isRequestedSessionIdFromURL(), WebUtils.getSessionId(request)});
                            //read https://stackoverflow.com/a/2066883 and think about using ServletContextAware also.
                            LOG.debug("cookieFromRequestHeader:{} session.getId(): {}", new Object[]{cookieFromRequestHeader, session.getId()});
                            }
                    } 
```

This gave me the same results. It appeared that the session creation by means other than request.getSession (when spring itself out of box created the session), was either not registered by the listener or the cookie/jsessionID came from somewhere else. Look the answer for more.

Other **sources** that helped me go through the HttpSession issues:
[servlet context injection in controller](https://stackoverflow.com/questions/2066843/get-web-app-root-from-spring-controller/2066883#2066883)
[overview of concurrency when you have to work with HttpSession](http://www.ibm.com/developerworks/library/j-jtp09238/index.html)
[using HttpSession object to do synchronization (avoid this)](https://stackoverflow.com/questions/1820629/using-request-getsession-as-a-locking-object)
[the "best" way to do synchronization when working with HttpSession](https://stackoverflow.com/questions/9802165/is-synchronization-within-an-httpsession-feasible/9802428#9802428)
some spring reference stuff:
[session management](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html)
[session management in security](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#Session%20Management)
discussions on how to get session when you have a sessionId (what I did above):
[coderanch discussion](http://www.coderanch.com/t/365859/Servlets/java/session-object-session-ID)
[stackoverflow](https://stackoverflow.com/questions/1499581/how-can-i-manually-load-a-java-session-using-a-jsessionid/1499625#1499625)
[the post that helped me finalize my listener autowiring](http://www.mkyong.com/spring/spring-how-to-do-dependency-injection-in-your-session-listener/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:51:03.543

> it looks like the cookie JSESSIONID from the frist 2 requests (request1 and request2) come from the first time I visit the page (lets say there was a request0 sent to the server when it created this JSESSIONID).

This was not true. I have 2 applications deployed under the same domain on the same server. So when I was calling [http://mydomain.com/app1/initpage](http://mydomain.com/app1/initpage) the server created a session for app1 with id FD0D502635EEB67E3D36203E26CBB59A and sent this JSESSIONID in a cookie to the client. The client saved the cookie under the mydomain.com and the second time when I executed [http://mydomain.com/app2/executeService](http://mydomain.com/app2/executeService), the client browser sent the JSESSIONID from the cookie in the request header. I received it on the server but this was not a session in the other app2\.

This explains the fact that when I send the other two requests (request1' and request2') they have a sessionID created on the appropriate application.

Have a look more here:
[Deploying multiple web apps in same server](https://stackoverflow.com/questions/220661/deploying-multiple-web-apps-in-same-server/220690#220690)
[Under what conditions is a JSESSIONID created?](https://stackoverflow.com/questions/595872/under-what-conditions-is-a-jsessionid-created)

As for the concrete answer to my question, **it appears that you need to make the 1st request synchronized so you are always sure that you have the same session id in the following requests. The following requests after the 1st one, can be asynchronous though.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T02:27:04.403

Just store your cookie(with JESSIONID) in Client , when your send subsequent request to Server , put the stored cookie in your request header field and send, then you will get the same session in the server end.

**CLIENT(IOS) store your cookie from response:**

```
 NSHTTPURLResponse* httpURLReqponse = (NSHTTPURLResponse*) response;
    NSDictionary* allHeaders = [httpURLReqponse allHeaderFields];
    NSLog(@"Response Headers : %@ ", allHeaders);
    NSString* cookie = [allHeaders objectForKey: @"Set-Cookie"];
    DATA.cookies = cookie;      // Store the cookie 
```

**CLIENT(IOS) send your subsequent request with cookie:**

```
// Put the stored cookie in your request header
[(NSMutableURLRequest*)request addValue: DATA.cookies forHTTPHeaderField:@"cookie"];
[NSURLConnection sendAsynchronousRequest: request queue:[NSOperationQueue mainQueue] completionHandler:nil]; 
```

Not only for IOS client . Then , in the server end , you will get the same session:

**Server(JavaEE) GET HttpSession:**

```
// Get the session, print its hashCode. You will find out that it's same as previous.
HttpSession session = ServletActionContext.getRequest().getSession(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T13:22:02.780

I noticed that it happens when cookies are disabled in `...web.xml` file:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">

    <context-root>/some-app</context-root>

    <class-loader delegate="true"/>

    <jsp-config>
        <property name="keepgenerated" value="true">
            <description>Keep a copy of the generated servlet class' java code.</description>
        </property>
    </jsp-config>

    <session-config>
        <session-properties>
            <property name="timeoutSeconds" value="600"/>
            <property name="enableCookies" value="false"/> 
        </session-properties>
    </session-config>

</glassfish-web-app> 
```

It should be `<property name="enableCookies" value="false"/>` to retain session ID from the same connection.

# silverlight - 如何使用 NotificationObject 在 silverlight mvvm 中刷新绑定数据

> ID：13015585
> 
> 赞同：1
> 
> 时间：2012-10-22T16:21:53.643
> 
> 标签：silverlight, mvvm, binding

我正在处理文本框所需的 TimeSpan 值。输入内容需要经过验证，并且可能采用多种不同的格式（例如 1300 表示 13:00）。我做了一些工作来检查并在视图模型中转换它。但在那之后我如何刷新文本框中的文本？

```
<TextBox Text="{Binding Path= OpenHourFromText, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}" ></TextBox> 
```

OpenHourFromValue 是我用于验证和数据绑定的字符串属性

```
 public class MainPageViewModel : NotificationObject{
        public string OpenHourFromText
                {
                    get
                    {
    //OpenHourFrom is a TimeSpan property that contain the value
                        if (OpenHourFrom != null)
                        {
                            return GetOpeningHourText(OpenHourFrom); //fomat the time
                        }
                        else
                        {
                            return "";
                        }
                    }
                    set
                    {
//do validation and convert here. 1300 will be changed to 13:00 TimeSpan type
                        OpenHourFrom = ConvertToTimeSpan(value);  
                        RaisePropertyChanged("OpenHourFromText");
                    }
                }

        public TimeSpan OpenHourFrom { get; set; }

} 
```

视图模型继承自 Microsoft.Practices.Prism.ViewModel.NotificationObject

在文本框中输入 1300 后，OpenHourFrom 会更新。但是文本框的文本没有更改为 13:00。为什么？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:28:37.017

您正在为 property 发出 PropertyChange 通知`UpdateTimeText`，而您的实际属性名称是`OpenHourFromText`

更改您的`PropertyChange`通知以引发正确属性的通知，它应该会为您更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:38:46.260

当 TextBox 设置某个值时，它不会调用 get。解决此问题的方法可能类似于将 RaisePropertyChanged("OpenHourFromText") 替换为 Dispatcher.BeginInvoke(() => RaisePropertyChanged("OpenHourFromText"));它会延迟触发该事件.

```
set 
   { 
    //do validation and convert here. 1300 will be changed to 13:00 TimeSpan type 
     OpenHourFrom = ConvertToTimeSpan(value);                                            
     Dispatcher.BeginInvoke(() => RaisePropertyChanged("OpenHourFromText"));
   } 
```

# asp.net - 获取每个用户的最新记录，其中 value 为 'K'，action id 为 null 或其状态为 1

> ID：13015592
> 
> 赞同：1
> 
> 时间：2012-10-22T16:22:26.047
> 
> 标签：asp.net, tsql, linq-to-sql

我在 SQL Server 中有以下表：

```
user_id,  value,  date,    action_id
----------------------------------
1          A   1/3/2012     null
1          K   1/4/2012     null
1          B   1/5/2012     null
2          X   1/3/2012     null
2          K   1/4/2012     1
3          K   1/3/2012     null
3          L   1/4/2012     2
3          K   1/5/2012     3
4          K   1/3/2012     null

action_id, state
----------------------------------
1           0
2           1
3           1
4           0
5           1 
```

我需要返回值为“K”的每个用户的最新记录，操作 id 为 null 或其状态设置为 1。这是我想要的结果集：

```
user_id,  value,  date,    action_id
----------------------------------
3          K   1/5/2012     3
4          K   1/3/2012     null 
```

对于user_id 1，最近的值为B，它的action id为null，所以我认为这是最近的记录，但它的值不是K。

对于user_id 2，最近的值是K，但是action id 1的状态是0，所以我回退到X，但是X不是K。

user_id 3 和 4 很简单。

我对 ASP.NET 中的 Linq to SQL 查询感兴趣，但现在 T-SQL 也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:28:55.870

SQL 查询将是：

```
Select Top 1 T1.* from Table1 T1
LEFT JOIN Table2  T2
ON T1.action_id = T2.action_id
Where T1.Value = 'K' AND (T1.action_id is null or T2.state = 1)
Order by T1.date desc 
```

LINQ 查询：

```
var result  = context.Table1.Where(T1=> T1.Value == "K"
                        && (T1.action_id == null || 
                            context.Table2
                            .Where(T2=>T2.State == 1)
                            .Select(T2 => T2.action_id).Contains(T1.action_id)))
                        .OrderByDescending(T => T.date)
                        .FirstOrDefault(); 
```

祝你好运 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:38:36.270

此查询将返回所需的结果集：

```
 SELECT
        *
    FROM
    (
        SELECT
             user_id
            ,value
            ,date
            ,action_id
            ,ROW_NUMBER() OVER (PARTITION BY user_id ORDER BY date DESC) RowNum
        FROM
            testtable
        WHERE
            value = 'K'
    ) testtable
    WHERE
        RowNum = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:45:07.027

如果 user_id 和 date 组合是唯一的，您也可以尝试以下方法确保获取连接中谓词的顺序以便能够使用索引：

```
 SELECT
        testtable.*
    FROM
        (
            SELECT
                 user_id
                ,MAX(date) LastDate
            FROM
                testtable
            WHERE
                value = 'K'
            GROUP BY
                user_id
        ) tblLastValue
    INNER JOIN
        testtable
    ON
        testtable.user_id = tblLastValue.user_id
    AND
        testtable.date = tblLastValue.LastDate 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T16:34:24.837

这将为您的规范中描述的所有用户选择顶部条目，而不是`TOP 1`仅选择数据库中的最新条目。我在这里假设您的表被命名为`users`并且`actions`：

```
WITH usersactions as 
  (SELECT 
       u.user_id, 
       u.value, 
       u.date, 
       u.action_id,
       ROW NUMBER() OVER (PARTITION BY u.user_id ORDER BY u.date DESC, u.action_id DESC) as row
    FROM users u 
    LEFT OUTER JOIN actions a ON u.action_id = a.action_id
    WHERE 
        u.value = 'K' AND 
        (u.action_id  IS NULL OR a.state = 1)
  )
SELECT * FROM usersactions WHERE row = 1 
```

或者，如果您不想使用 CTE：

```
SELECT * FROM  
  (SELECT 
       u.user_id, 
       u.value, 
       u.date, 
       u.action_id,
       ROW NUMBER() OVER (PARTITION BY u.user_id ORDER BY u.date DESC, u.action_id DESC) as row
    FROM users u 
    LEFT OUTER JOIN actions a ON u.action_id = a.action_id
    WHERE 
        u.value = 'K' AND 
        (u.action_id  IS NULL OR a.state = 1)
  ) useractions
WHERE row = 1 
```

# python - NLTK：使用数字分数而不是标签的文档分类

> ID：13015593
> 
> 赞同：8
> 
> 时间：2012-10-22T16:22:30.437
> 
> 标签：python, nltk

根据一个项目，我一直在使用 Python NLTK 和文档分类以及朴素贝叶斯分类器。正如我从文档中了解到的那样，如果您的不同文档被标记为 pos 或 neg 作为标签（或超过 2 个标签），这将非常有效

我正在处理的已经分类的文档没有标签，但它们有一个分数，一个介于 0 到 5 之间的浮点数。

我想做的是构建一个分类器，就像文档中的电影示例一样，但这会预测一段文本的分数，而不是标签。我相信这在文档中有所提及，但从未进一步探索为“数字特征的概率”

我不是语言专家也不是统计学家，所以如果有人有这样的例子，如果你能与我分享，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:05:54.570

What you're looking for is linear regression, and scikit-learn is much better than NLTK for this, see [http://scikit-learn.org/stable/modules/linear_model.html](http://scikit-learn.org/stable/modules/linear_model.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T00:52:44.403

这是一个非常晚的答案，但也许它会帮助某人。

你问的是回归。关于雅各布的回答，线性回归只是一种方法。不过，我同意他对 scikit-learn 的建议。

# magento - 如何为自定义集合添加过滤器到 magento 导航栏

> ID：13015595
> 
> 赞同：1
> 
> 时间：2012-10-22T16:22:44.590
> 
> 标签：magento, filtering, magento-1.6

我在我的 magento 商店中有一个页面，其中列出了一系列产品。我通过一个自定义表加入了产品集合，其中存储了一些额外的属性。

在左列（导航层）中，过滤器显示在其中可以为特定制造商或特定类别进行选择。现在我想在我的自定义表中的一个字段上添加我自己的过滤器，这样当用户选择过滤器时，只会显示对于添加的属性之一具有特定（非负）值的字段。

当我尝试查找有关过滤器的信息时，我经常看到人们在后端引用产品属性，但是我怀疑它是否适用于这里，因为它不是 eav 意义上的产品属性，而是我的自定义表中的一个（即加入sku）。我正在寻找有关如何根据已加入集合中的属性添加过滤器的示例或策略。

# ruby-on-rails - Rails，一种几乎可以检测电子邮件中列入黑名单的主机名的方法

> ID：13015598
> 
> 赞同：0
> 
> 时间：2012-10-22T16:22:56.237
> 
> 标签：ruby-on-rails, regex, arrays, detect

我编写了方法来检测 :email 中的主机名是否存在于黑名单主机名的数组中，但无济于事我的方法几乎可以工作，但无法弄清楚：

```
host = email.split("@").last // e.g. "hotmail.com"
bad_hostnames = %w(rtrtr.com )

if /.*(#{bad_hostnames.join("|")}).*\@/.match(host)
  errors.add(:email, "Invalid temp mail provider")
end 
```

我在这里想念什么？正则表达式很难测试。似乎该点引起了问题，检查电子邮件中某些列入黑名单的单词的类似方法工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:35:14.610

我相信您正在寻找此代码：

```
if /^(#{bad_hostnames.join("|")})$/.match(host) 
```

或者这个：

```
if /\@(#{bad_hostnames.join("|")})$/.match(email) 
```

# php - 用于 PHP 对象排序的 AWS 开发工具包 S3

> ID：13015599
> 
> 赞同：1
> 
> 时间：2012-10-22T16:23:08.737
> 
> 标签：php, amazon-s3

有没有可能按大小对对象进行排序？例如：使用函数获取元数据`get_object_metadata['Size']` 然后将这些值从数组低到高排序？

# python - python ipv6数据包嗅探器

> ID：13015602
> 
> 赞同：-1
> 
> 时间：2012-10-22T16:23:09.993
> 
> 标签：python, sockets, ipv6, freebsd, raw-sockets

嗨，我想在 FREEBSD 上通过 python、ipv6 嗅探数据包。

我很难尝试使用谷歌搜索来获取信息，但对于 freebsd 示例来说没有任何内容。

下面的代码不起作用，因为有人说 bsd 系统不支持

套接字.PF_PACKET。

有没有人有任何链接来帮助我？

```
s = socket.socket(socket.PF_PACKET, socket.SOCK_RAW, socket.htons(3))
s.setsockopt(socket.SOL_SOCKET, IN.SO_BINDTODEVICE, struct.pack("%ds"%(len("em1")+1,),"em1"))
while condition:
    pkt = s.recvfrom(1500)
    addToQueue(filter(pkt)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:25:48.877

I would take a look at using a Python wrapper for [libpcap](http://www.tcpdump.org/). libpcap is a C library that is used to sniff packets and process `pcap` dumps. This is the same library that [Wireshark](http://wiki.wireshark.org/libpcap) uses. It comes standard with OSX and can be installed on most Linux distributions.

There exists a number of Python wrapper for this:

*   [http://pylibpcap.sourceforge.net/](http://pylibpcap.sourceforge.net/)
*   [http://code.google.com/p/pypcap/](http://code.google.com/p/pypcap/)

Make sure to avoid any implementations that are pure Python, as they are not able to do packet sniffing.

# html - css3 background transition flickers on first :hover

> ID：13015603
> 
> 赞同：1
> 
> 时间：2012-10-22T16:23:11.630
> 
> 标签：html, css, css-transitions

There are some buttons on [this page](http://www2.iscotest.com/index2.php#) (the small icons toward the bottom) that I am using some css transitions to change the background of. But there is a flicker the first time the icons are hovered over! I've tried to implement the suggestions offered on [this thread](https://stackoverflow.com/questions/3461441/prevent-flicker-on-webkit-transition-of-webkit-transform), but to no avail. Has anyone an idea on how I can make this work without the flicker?

Thank you so much!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:25:37.537

Since no minimal testcase provided, I can suppose your images need to be preloaded, and transitions has nothing to do with the issue.

A background image can be preloaded by specifying it as background for normal (not hover) state of an element, and adding `background-position` with negative value so that background image is not visible in normal state.

For example:

```
/* Image is supposed to have height less than 100px here. */
A {
    background: url(example.png) 0 -100px no-repeat;
}

A:hover {
    background-position: 0 0;
} 
```

By the way, it's established practice to put images for both states (normal and hover) to one physical image file, and then just change `background-position` on hovering:

```
/* "rollover-sprite.png" file contains images for both states side by side. */
A {
    background: url(rollover-sprite.png) no-repeat;
}

/* Width of image for each state is supposed to be 100px here
  (sprite will be ~200px wide). */
A:hover {
    background-position: -100px 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:29:44.907

You need to preload the image that you are switching to, the "flicker" is the short delay between you hovering and the image actually loading. There are lots of ways to do this, are you using jQuery?

# optimization - 在功能较弱的硬件上对 Web 应用程序进行压力测试

> ID：13015616
> 
> 赞同：15
> 
> 时间：2012-10-22T16:24:11.787
> 
> 标签：optimization, architecture, performance-testing, stress-testing

我的组织现在正在进行一场有趣的内部辩论，这引发了一个我想向整个社区公开的问题。

手头的问题是我们在其中进行压力测试、容量测试、性能回归测试等的环境。

争论的一方是一些软件工程师，他们希望这个环境尽可能地反映生产环境，以使结果尽可能有意义。虽然我们目前确实有这样的测试环境，但它的能力远不及生产系统，这些软件工程师觉得他们已经达到了他们可以从中学习到的极限。

争论的另一端是一些网络工程师，他们既管理环境又控制钱包。虽然他们承认在更好地复制生产环境的环境中进行容量测试会更好，但他们认为——出于压力测试的目的——更适度的环境会放大性能瓶颈，使它们更容易发现和修复。

**这最终将我们带到了引起我兴趣的部分：一位软件工程师建议，虽然压力环境更温和会增加您遇到瓶颈的可能性，但这并不*一定*意味着它会帮助您找到下一个瓶颈。在生产中遇到。他认为，规模效应可能不是线性的。**

这种观点有道理吗？如果是，那为什么？这种非线性的根源是什么？

这里涉及很多活动部分：Java 应用程序服务器集群、数据库服务器集群、每次 HTTP 命中都会生成大量动态内容。

* * *

*编辑：到目前为止，我很欣赏每个人的想法，但我真的希望有人能做的不仅仅是重新肯定一方，而是真正解决“为什么”的问题。如果存在这样的非线性，是什么导致了它？更好的是，如果用 CPU、内存、带宽、延迟、子系统之间的交互、你有什么来表达原因，那就太好了……TerryE，你最接近了。如果没有其他人站出来，您应该重新发布您的评论作为赏金的答案*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:35:43.590

您的软件开发人员是对的，我将进一步说明这一点。

当您测试应用程序组件（如 Web 服务）以查看其在负载下的行为时，使用功能较弱的环境是可以理解的。您可以找到有关内存、io 等的瓶颈。并且很可能会发现错误和疏忽，例如内存不足错误和日志文件变得巨大。

但是当您的应用程序组件按预期运行并且您需要测试整个 shebang 时，您需要测试真实环境。

当您在环境上运行压力测试时，您可以测量该环境在负载下的行为及其瓶颈。虽然此测试可能会提供有价值的信息，但此信息与您的生产系统无关。您发现的瓶颈可能与您的实际系统无关，您可能会花费宝贵的开发时间来修复不存在的错误。要了解您真正可能面临的瓶颈，您应该在您的真实生产系统上运行压力测试（最好在盛大开幕之前）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T22:51:42.400

网络工程师的假设是，适度系统基本上是生产系统的比例模型。他们还假设将影响软件性能的生产环境的各种特征反映在更适度的系统中，只是在较低级别但以相同的比率。例如，CPU 没有那么快，内存没有那么多，存储有点慢，等等。所有这些差异的比例都相似，如果一切都神奇地乘以某个因子，比如 1.77，由此产生的变化的适度系统将与生产系统完全相同。

然而，在生产系统的所有细节中，这个适度的系统都是一个精确的比例模型，这让我很难相信。

这是一个具体的例子。假设生产系统上的测量表明 CPU 利用率（CPU 非空闲时间的百分比）太高。因此，您将软件放在普通系统上并进行测量，发现在普通系统上，CPU 利用率较低。一项调查显示，普通系统的存储速度较慢，因此 CPU 花费更多时间空闲等待数据从存储传输到完成，因为应用程序在普通系统上是 I/O 绑定的，而在生产系统上则不是。这种差异是由于普通机器不是生产机器的精确比例模型，因为 CPU 比率与 I/O 传输比率不同。

另一个例子是拥有更多内存，从而在生产环境中减少页面错误。当软件加载到更普通的机器上时，由于物理内存较少，会出现更多的页面错误。随着各种应用程序的调入和调出，它们开始相互影响，因为其他应用程序的页面被换出然后再次换入。在具有较大内存的产品机器上，这种级联缺页行为不会出现，因为有足够的内存来同时容纳更多的应用程序。

我在这里真正想要说明的一点是，一台具有各种部件和应用程序的计算机是一个复杂的动态系统。一个计算环境只是另一个计算环境的比例模型的想法过于简单化了一个假设。使用适度的系统当然可以提供有价值的数据。但是，一旦对软件进行了总体调整并且您开始进行更细微的详细调整，环境中的差异会对测试结果产生很大影响。

一些引用。 [计算机系统是](http://chaos.aip.org/resource/1/chaoeh/v19/i3/p033124_s1?bypassSSO=1)Tod Mytkowicz、Amer Diwan 和 Elizabeth Bradley 的动态系统。

Uri Lerner、Ronald Parr、Daphne Koller 和 Gautam Biswas[在动态系统中的贝叶斯故障检测和诊断。](http://robotics.stanford.edu/~koller/Papers/Lerner+al:AAAI00.pdf)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T16:27:34.723

我在生产环境中也遇到过类似的情况。我们仅将适度的系统用于初始和基本级别的测试和发现。确实，您永远无法在测试环境中找到真正的瓶颈和其他性能问题。因此，要找到真正的性能相关问题并找到瓶颈，您必须在生产环境中进行，没有其他方法。

我们已经托管了超过 250 万个网站，尽管您的网站可能并非如此，但让我告诉您，在我们的案例中，我们面临着可怕的线性瓶颈情况。这意味着，当我们的流量增加时，我们首先遇到了内存问题。我们通过添加更多内存解决了这个问题。在那之前，我们甚至没有注意到只有 256 个 httpd 线程是我们的下一个瓶颈，因为有限的内存隐藏了它，一旦我们解决了内存问题，它很快就归结为为什么我们的网络服务器在几周后又变慢了？我们发现 256 个 httpd 线程不足以提供这么多的流量。我们不仅增加了线程，还在我们的 WebServer 前安装了 HA 并行负载均衡器以缓解这个问题。

幸运的是，它解决了我们页面加载缓慢的问题。但是几个月后，随着流量的不断增长，我们进入了存储系统的下一个瓶颈。您知道这次磁盘 I/O 是什么问题。简而言之，我们放置了基于并行 NFS 的物理存储系统。现在，每台 NFS 机器通过运行超过 2000 个线程来提供文件。

我忘了提到数据库也是缓慢的罪魁祸首，我们通过在集群中安装主从模型解决了这个问题。我们还必须对应用程序代码进行大量性能调整，并且必须将应用程序物理地分布到不同服务器上的不同模块中。

我提到这一切只是为了证明一点，所有与性能相关的问题很可能几乎都是以线性方式出现的，至少这是我们在基于 Web 的模型中面临的问题。即使你在你的普通系统上进行了很多测试，你仍然有机会在测试环境中找不到隐藏的瓶颈。

我在过去 6 年的经验中学到了什么，如果您认为自己可能会有大量的流量或点击/秒，请尝试尽可能多地**分发您的模型。**集中式模型可以通过进行大量调整来保持您的流量一段时间，但最终您的系统会被破坏。

我并不是说你会在你的情况下面临一些瓶颈或问题，但我只是想警告你，这些情况有时会发生，只是为了让你更好地意识到。

**对不起我的英语不好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T20:24:04.580

好问题。学习和优化最好在适度的硬件上进行。但是在镜像上测试更安全（或者至少来自同一时代的东西）

看起来你试图预测将出现的第一个瓶颈以及何时发生。我不确定这是否是正确的目标和正确的方法。我假设我们不会谈论典型的 CRUD，客户说“它应该像其他所有 Web 应用程序一样运行”。如果您想正确地进行测试，那么在开始测试**之前**，您应该知道预期的负载。预期的用户数量、预期的事件数量、响应时间等。它是您产品规格的一部分。如果你没有这些数字，那意味着你的分析师没有做好他们的工作。

如果你有数字，那么你不需要确切的测试结果。你只需要知道数量级。您还应该检查您的软件/硬件如何扩展。您需要处理多少个实例来处理 x 个用户/请求/什么，以及有多少个来处理 y

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T15:23:16.160

我们每天都在为我们的客户加载测试系统——我们看到了各种各样的问题。某些类型的问题可以在小型系统上找到。其他不能。有些只能在生产环境中找到……因为无论您多么密切地镜像这两个系统，它们都永远不会相同。如果你足够努力，你可以非常接近。

因此，测试的简单事实：您的系统越接近生产系统，您的测试就越准确。

IMO，这是迁移到云的最佳理由之一：您可以启动一个非常接近您的生产系统的系统（几乎与您所能获得的相同）并在其上运行负载测试。

值得一提的是，我们偶尔会看到客户在他们的测试环境中浪费大量时间来解决在生产中永远不会发生的问题。环境越不同，发生这种情况的可能性就越大:(

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-26T21:48:43.600

我认为您已经部分回答了您自己的问题 - 您已经拥有一个生产级环境，并且已经发现它与生产环境不在同一级别/能力不强。底线是，用世界上所有的钱，你将永远无法复制生产网站的确切功能——事件的时间、容量、cpu 利用率、内存利用率、db IO，当一切都在激怒行为时在一定程度上可以是不确定的。我的观点是你永远不能让它完全一样。另一方面，生产环境本质上将是一个昂贵的环境，其中包含大量工具包，以使其执行和处理您的生产数据/交易量。这对企业来说是一笔很大的开支/开销，

也许应该采取不同的策略——了解你的生产软件的性能概况——它如何随容量扩展，运行时间是线性增加、指数增加还是对数增加？你能模拟这个吗？首先，您可以验证测试环境是否以类似的方式运行——这是进行有效测试的关键。然后另一个重要部分是进行相对测试而不是绝对测试 - 您不会获得与生产相同的绝对运行时间，而是在部署代码更改之前运行性能测试以提供基线，然后部署您的代码更改并重新运行性能测试 - 这将为您提供生产中的相对更改（例如，此代码版本会降低性能），

所以我的观点是，您可以在较低的环境中了解很多关于您的软件和硬件性能的信息，并且在较小/功能较弱的基础架构上执行此操作可以为您的公司节省资金，如果使用得当，可以为您提供大部分答案到您正在寻找的性能测试。

# javascript - 仅使用 HTML + JavaScript 的动态电子表格

> ID：13015617
> 
> 赞同：1
> 
> 时间：2012-10-22T16:24:13.073
> 
> 标签：javascript, html

所以我有几个问题。我正在尝试创建一个动态电子表格，具有将值插入其中的功能以及（并且仅需要）能够处理 SUM() 公式。我现在遇到的问题是插入值时。首先让 em 显示我用于插入的 JS。HTML 表使用 1_1,1_2 等 id 值。

编辑：修复了 var column= document.getElementById(insert); 行，但是它似乎不想提交任何插入的值。不应该只是一个返回语句来提交对 html 字段的更改吗？

```
function insertValue() {
    var v = document.getElementById("submitText");
    v = v.value;
    var row = document.getElementById("row");
    row = row.value;
    var col = document.getElementById("col");
    col = col.value;

    var insert = row + "_" + col;
    insert = insert.toString();
     var col = document.getElementById("col"); 
```

编辑:: 返回 column.value = v; } //结束函数

当我尝试获取插入变量并将其用作 id 值时，它会破坏整个程序。我应该将插入变量转换为字符串以外的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:28:30.677

我假设

```
var column.getElementById(insert); 
```

应该

```
var column = document.getElementById(insert); 
```

您的代码行无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:29:07.587

```
function insertValue() {
    var v = document.getElementById("submitText");
    v = v.value;
    var row = document.getElementById("row");
    row = row.value;
    var col = document.getElementById("col");
    col = col.value;

    var insert = row + "_" + col;
    // Don't really think this is necessary, so probably remove it.
    //insert = insert.toString();
    var column = document.getElementById(insert); // Compare this line to yours

    column.value = v;
} //end function 
```

出现错误的原因是因为您没有正确编写它。 `var column.getElementById(insert);`是**错误的语法**。`var`后面应该跟一个变量名，你可以给它赋一个初始值。

令人惊讶的是，尽管您一开始就正确，但后来却没有这样做。

但是下次当您的 JavaScript 代码出现错误时，请检查浏览器的 JavaScript 控制台。它可能可以使用 打开`F12`，在里面你会看到错误显示。这样你就不需要总是对你遇到的每一个问题提出一个问题。:)

# android-ndk - bonjour mDNSresponder for Android

> ID：13015625
> 
> 赞同：0
> 
> 时间：2012-10-22T16:24:50.253
> 
> 标签：android-ndk, bonjour, mdns

我浏览了以下链接[http://mirror.yongbok.net/linux/android/repository/external/mdnsresponder/](http://mirror.yongbok.net/linux/android/repository/external/mdnsresponder/)以在 android ndk 上交叉编译苹果 mdns 响应程序。但我云没有得到它的构建。得到以下错误。

制作：循环 obj/local/armeabi/libmdnssd.so <- obj/local/armeabi/libmdnssd.so 依赖项已删除。SharedLibrary：libmdnssd.so arm-linux-androideabi-g++：./obj/local/armeabi/libmdnssd.so：没有这样的文件或目录

如果有人为 android 交叉构建了它，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:53:45.740

Bonjour 有一个 Android 友好的实现，称为[JmDNS](http://jmdns.sourceforge.net/)。随意下载并集成到 Java 端。

实施并不完全简单。通过 WiFi 显式启用多播存在问题（查找），并且托管在 SourceForge 上的 JAR 并不好。但是 StackOverflow 充满了指导和示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T09:17:14.603

我想你在这里寻找 jmdns.listbysubtypes 。你可以试试这个浏览子类型

地图 mp = jmdns.listbysubtypes(_smartplace._tcp.local)

你可以试试这个，一旦你得到它，你就可以玩地图对象了

# php - Facebook Offline post to stream

> ID：13015626
> 
> 赞同：0
> 
> 时间：2012-10-22T16:24:51.360
> 
> 标签：php, facebook, facebook-graph-api

I have read alot about publish_stream and offline_access.

1.) User connects on my website. 2.) I can now post on he's wall with the API on the user (userid saved in database)

But what if user sign out of Facebook and come back on my website? Then the user has to "accept"/"login" again, but it has to be logged in automatcitly, so i in the future can post to the facebook wall of the user.

Do i have to save access_token, user_id in database, what else? I cannot figure this out.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:43:09.737

您必须存储访问令牌和用户 ID。访问令牌的有效期为 1 到 2 小时，但可以与有效期为 30 天的长寿命令牌交换。不推荐使用 offline_access 权限，并将在 12 月 5 日之前将其删除。

如何扩展访问令牌：[https ://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:15:06.313

您只需要存储在数据库中的 user_id 和 access_token，然后您可以随时使用它来发布。但请记住，令牌会在一段时间后过期。

[解决方案](http://eagerfish.eu/using-facebook-off-line-access-to-post-on-users-wall/)

# oop - What OOP Design Pattern can I use to allow for different types of Address Classes?

> ID：13015627
> 
> 赞同：0
> 
> 时间：2012-10-22T16:24:50.927
> 
> 标签：oop, design-patterns, architecture

I have a base `Address` class which defines basic address properties and acts as an CRUD object:

*   Name
*   Company
*   Address Line 1
*   Address Line 2
*   Address Line 3
*   City
*   State
*   Postal Code
*   Country

I have a 'ShipToAddress' class which extends Address and includes two more properties:

*   Phone Number
*   Email Address

`Address` includes validation methods for each of its properties, and `ShipToAddress` includes validation for only its properties (Phone Number and Email Address).

My issue is, I also want to account for both USA and International addresses for both of these classes without duplicating code, so that I can have different validation methods for State and Postal Code. USA State validation would ensure that the value is one of the 50 States. International validation would simply ensure that it does not exceed the length allowed in the database.

How can I design this to allow for any number of different types of addresses (USA, Canada, etc.) but also have the base `Address` class and the `ShipToAddress` class, without duplicating the code? I basically want the following:

*   `Address` Base Class
*   `ShipToAddress`
*   `USAAddress`
*   `USAShipToAddress`
*   `***Address`
*   `***ShipToAddress`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T17:34:28.157

将 AddressValidator 定义为单独的接口。

```
public interface AddressValidator {
    boolean validateAddress(ShipToAddress add);
} 
```

创建它的不同实现 -`USAAddressValidator`等`CanadaAddressValidator`。

你可以有一个根据国家`Factory`给你合适的`AddressValidator`对象。

```
public class AddressValidatorFactory {
    public static AddressValidator GetValidator(Address address) { ... }   
} 
```

您还应该考虑是否`ShipToAddress`应该`extend` `Address`或`contain`它。你要在预期的`ShipToAddress`地方传递对象吗？`Address`如果没有，则无需`ShipToAddress`扩展地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:31:40.533

我可能会将其设为模板，并将验证器作为模板参数传递：

```
class US_validator { /* ... */ };

class Int_validator { /* .. */ };

template <class Validator>
class Address { 
   // ...
};

template <class Validator>
class Shipping_address  : public Address {
    // ...
};

typedef Address<US_validator> US_Address;
typedef Address<Int_validator> Int_Address;
typedef Shipping_address<US_validator> US_Shipping_address;
typedef Shipping_address<Int_validator> Int_Shipping_address; 
```

另一种可能性是使用多重继承，将验证器作为基类。

```
class US_validator { /* ... */ };
class Int_validator { /* ... */ };

class Address { /* ... */ };
class Shipping_Address : public Address { /* ... */ };

class US_Shipping_Address : public US_validator, public Shipping_Address { /* ... */ };
class Int_Shipping_Address : public Int_validator, public Shipping_Address { /* ... */ }; 
```

后者的使用频率不高，也没有（可能）被大多数人认为是有利的，但仍然可以很好地工作。

# wso2esb - WSO2 admin console restriction to localhost

> ID：13015630
> 
> 赞同：1
> 
> 时间：2012-10-22T16:25:14.523
> 
> 标签：wso2esb

I have a question about restricting the Admin Console access in version 4.0.3\. I would like the admin console to be accessed only from the server in which WSO2 ESB is installed and not from the machines outside.

In tomcat I can do that using the address attribute of the Connector element in the `server.xml`

like this:

```
Connector port="8080" address="127.0.0.1" 
```

The issue is I am not finding the `server.xml` within the 4.0.3 directory strcutre.

I found the file `catalina-server.xml` under `wso2esb-4.5.0/repository/conf/tomcat` in the latest version. I am not finding a similar file within 4.0.3 however.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:45:19.347

早些时候，它使用 mgt-transports.xml 文件在 ESB_HOME/repository/conf 中进行传输配置。在对 tomcat 层进行改进后，将其作为适当的 OSGi 捆绑包添加到新版本中，tomcat 配置直接提供给用户进行调整

# ldap - LDAP port 636 DirectorySearch.FindOne fails - The server is not operational

> ID：13015635
> 
> 赞同：1
> 
> 时间：2012-10-22T16:25:32.177
> 
> 标签：ldap, directoryservices

Running the following code with port 636 (secure) through a console application it works fine, however through a ASP.Net web site it fails:

```
 DirectoryEntry authServer = new DirectoryEntry(@"LDAP://zxxx.cf.ac.uk:636", "", "", AuthenticationTypes.Anonymous);
            DirectorySearcher directorySearch = new DirectorySearcher(authServer, "(CN=sissh6)");
            SearchResult result = directorySearch.FindOne(); 
```

Here is the error:

```
 Problem authenticating : System.Runtime.InteropServices.COMException (0x8007203A):
 The server is not operational.

  at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
  at System.DirectoryServices.DirectoryEntry.Bind()
  at System.DirectoryServices.DirectoryEntry.get_AdsObject()
  at System.DirectoryServices.DirectorySearcher.FindAll(Boolean findMoreThanOne)
  at System.DirectoryServices.DirectorySearcher.FindOne() 
```

Now if we use non secure (no port 636) then the problem disappears, but the final solution must be secure.

Why would the secure version work through a console application but not through asp.net?

# xemacs - xemacs kill-matching-buffers 或排序/过滤 *缓冲区列表*

> ID：13015643
> 
> 赞同：0
> 
> 时间：2012-10-22T16:25:51.553
> 
> 标签：xemacs

在 xemacs 中，如何杀死与特定模式匹配的缓冲区？我试过“kill-matching-buffers”，但我的 xemacs 似乎没有。我需要加载什么 .el/.elc 文件/eval-buffer 才能获得此功能？

我还想找到一种过滤*缓冲区列表*的方法，这样我就可以只看到我想删除的缓冲区，或者通过排序让它们彼此相邻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:37:16.927

`kill-matching-buffers`代码如下。您应该能够以`XEmacs`最小的努力使其工作。

```
(defun kill-matching-buffers (regexp &optional internal-too)
  "Kill buffers whose name matches the specified REGEXP.
The optional second argument indicates whether to kill internal buffers too."
  (interactive "sKill buffers matching this regular expression: \nP")
  (dolist (buffer (buffer-list))
    (let ((name (buffer-name buffer)))
      (when (and name (not (string-equal name ""))
                 (or internal-too (/= (aref name 0) ?\s))
                 (string-match regexp name))
        (kill-buffer-ask buffer))))) 
```

如果您需要定义`dolist`（不知道它是否是 XEmacs），请检查[cl-macs.el](http://www.opensource.apple.com/source/emacs/emacs-41/emacs/lisp/emacs-lisp/cl-macs.el)

# visual-studio - Visual Studio 安装项目是否允许选择性安装应用程序？

> ID：13015644
> 
> 赞同：0
> 
> 时间：2012-10-22T16:25:56.193
> 
> 标签：visual-studio, setup-project, setup-deployment

我提供的软件是一套包含不同类型的客户端和不同类型的服务器的多个程序。多个服务器可以在同一台机器上共存或分布在网络上，客户端也是如此。套件的实际拓扑取决于用户的需要。

我想做的是将所有必要的可执行文件和程序打包到一个安装程序中，用户可以从中选择组件。类似于标准的 Microsoft Office 安装，可以选择不同的组件来包含或排除。我还希望能够在安装期间显示特定的屏幕，这些屏幕取决于选择安装的产品（例如，如果安装了桌面客户端，则会显示提示身份验证服务器位置的屏幕，但不会显示此屏幕如果未选择安装桌面客户端）。

Visual Studio 安装项目可以做到这些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:07:51.710

不，Visual Studio 安装项目一直是非常基础的。微软宣布 2010 年将是最后一个包含它的 Visual Studio 版本，而在 2012 年它就消失了。

在 2012 年，您拥有免费版本的 InstallShield，但它也无法为您完成这项工作。有付费版本应该可以完成这项工作，但普遍的看法似乎对它们非常负面。

基本上你应该咬紧牙关学习WiX。该文档的组织方式不易于学习，但您会到达那里。

# java - Searching a CAN-Bus Framework for Android or Java

> ID：13015648
> 
> 赞同：2
> 
> 时间：2012-10-22T16:26:07.440
> 
> 标签：java, android, frameworks, can-bus

I'm searching for an CAN-Bus Framework that can generarte me the complete frame format, by giving it my data. I need this for an android app. The connection to the CAN-Bus and the entire collision detection and so on is already established.

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T10:18:34.090

我目前正在使用 IXXAT CANblue II 设备进行开发。Nexus 7 -> 蓝牙 -> CANblue II -> CANbus -> 控制单元。

他们在网站上有一个带有 API 的 Android 开发工具包，也许您可​​以查看他们的代码，也许这对您有帮助。

除了它使用蓝牙与安卓通信之外，我可以在你的主题中读到你只想知道如何通信。

只是一个想法:)

IXXAT 的 API 与 android 配合得很好 :)

# c# - 如何在代码后面而不是在 aspx 设计中向 datalist 添加控件？

> ID：13015655
> 
> 赞同：1
> 
> 时间：2012-10-22T16:26:28.300
> 
> 标签：c#, asp.net, datalist

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using MyWeb.Data;
using MyWeb.Common;
using MyWeb.Business;
using AjaxPro;
using System.Text;

<asp:DataList ID="DataList1" runat="server" RepeatLayout="Flow">
                <ItemTemplate>

                    <div class="m_status">
                <div class="ava">
                    <a href="#">
                        <asp:Image ID="Image1" runat="server" ImageUrl='<%# Eval("AvatarUS") %>' 
                        CssClass="ava_medium"/></a>
                </div>
                <div class="sta_content">
                    <div class="sta_title">

                        <p class="sta_detail">
                            <asp:Literal ID="Literal1" runat="server" Text='<%# Eval("Detail") %>'></asp:Literal>
                            </p>
                        <div class="function">
                            <a class="sta_like left" href="#">Thích</a>
                            <a class="sta_cmt left" href="#">Bình luận</a>
                            <a class="sta_share left" href="#">Chia sẻ&lt;/a>
                        </div>
                    </div>

                    </div>                                                  
                </div>
                </ItemTemplate>
                </asp:DataList> 
```

我想在后面的代码中添加一个这样的 DataList（Default.aspx.cs）
如何制作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:51:29.727

在数据列表的行数据绑定事件中，您可以添加一些控件，该控件将保留您要添加的控件的位置，例如：

在 ItemTemplate 中添加一个控件来保存将要添加的控件。

```
 <asp:Panel runat="server" ID="pnlPlaceHolder">
           <!-- the control will be added here -->
    </asp:Panel> 
```

在后面的代码中，在数据列表的 RowDataBound 上执行以下操作

```
Panel pnlPlaceHolder = (Panel)e.Item.FindControl("pnlPlaceHolder");
if (pnlPlaceHolder!= null)
{
     // The new control, a button, by example          
     Button btn = new Button();
     btn.Text = "Added dinamically";
     pnlPlaceHolder.Controls.Add(btn);
} 
```

就是这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:01:16.680

当我添加隐藏代码时出现问题：Default.aspx.cs

```
 namespace KetBanBonPhuong
    {
           [AjaxPro.AjaxNamespace("Default")]

           public partial class Default1 : System.Web.UI.Page
           {
               protected void Page_Load(object sender, EventArgs e)
               {
                    AjaxPro.Utility.RegisterTypeForAjax(typeof(Default1));
                    if(!isPostBack)
                    {
                DataList dl = new DataList();
                dl.DataSource = GetList();
                dl.DataBind();
                this.liststatus.Controls.Add(dl);
                dl.DataSource = GetList();
                dl.RepeatLayout = RepeatLayout.Flow;
                Literal ltr = new Literal();
                ltr.Text = "kaldfs";

                dl.Controls.Add(ltr);//Error here
             }
          }
} 
```

# php - 在 PHP 中上传图像时在图像上添加文本

> ID：13015656
> 
> 赞同：1
> 
> 时间：2012-10-22T16:26:29.460
> 
> 标签：php, gd, image-manipulation

我有一个像 Quickmeme.com 这样的图片网站，我想在图片上添加文字。我目前让用户手动上传图片，在 Windows 中使用 Paint 程序编写评论，这是一个坏主意，我需要帮助......

这是我用于上传图像的代码，我正在考虑在上传字段下方添加一个文本字段，以便用户在该框中写入的内容将作为图像文本打印在图像上......那么我该怎么做用php？

```
<?php if(isset($_POST["upload"])){

        $tmp_name = $_FILES["file"]["tmp_name"];
        $file_name = basename($_FILES["file"]["name"]);
        $random = rand(1, 9999999999);
        $directory = "Uploads/" . $random . $file_name;
        $time = strftime("%H:%M:%S", time());
        $date = strftime("%Y-%m-%d", time());

            if(move_uploaded_file($tmp_name, $directory)){
                if(mysql_query("")){
                    $query = mysql_query(""); $fetch = mysql_fetch_array($query);
                    if(mysql_query("")){
                        header("Location: index.php");
                        exit;
                    }
                }
            }

      } ?> 
```

这是我的网站[http://www.picturepunches.net](http://www.picturepunches.net)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:51:48.720

你可以试试

```
if (isset($_POST["upload"])) {

    $tmp_name = $_FILES["file"]["tmp_name"];
    $file_name = basename($_FILES["file"]["name"]);
    $random = rand(1, 9999999999);
    $directory = "Uploads/" . $random . $file_name;
    $time = strftime("%H:%M:%S", time());
    $date = strftime("%Y-%m-%d", time());

    switch (strtolower(pathinfo($file_name, PATHINFO_EXTENSION))) {
        case "jpg" :
            $im = imagecreatefromjpeg($_FILES["file"]["tmp_name"]);
            break;
        case "gif" :
            $im = imagecreatefromgif($_FILES["file"]["tmp_name"]);
            break;
        case "png" :
            $im = imagecreatefrompng($_FILES["file"]["tmp_name"]);
            break;

        default :
            trigger_error("Error Bad Extention");
            exit();
            break;
    }

    $font = 'verdana.ttf';
    $grey = imagecolorallocate($im, 128, 128, 128);
    $red = imagecolorallocate($im, 255, 0, 0);
    // Add some shadow to the text
    imagettftext($im, 10, 0, 11, 20, $grey, $font, $date);
    imagettftext($im, 10, 0, 10, 35, $grey, $font, $time);
    imagettftext($im, 10, 0, 10, 50, $red, $font, $random);

    // imagepng($im);
    imagedestroy($im);

    if (move_uploaded_file($tmp_name, $directory)) {
        if (mysql_query("")) {
            $query = mysql_query("");
            $fetch = mysql_fetch_array($query);
            if (mysql_query("")) {
                header("Location: index.php");
                exit();
            }
        }
    }
} 
```

输出

![在此处输入图像描述](../Images/7306ee0da52d4c9c8d4f8fc81b7fa68d.png)![在此处输入图像描述](../Images/91ee59279d6f909563a4525a8a398140.png)

```
 Uploaded                               Final 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:30:48.230

首先，检查您是否安装了 GD 扩展，接下来，

使用 GD 函数

```
//Loading the file
$rImg = ImageCreateFromJPEG("MyPicture.jpg");

//Font Color (black in this case)
$color = imagecolorallocate($rImg, 0, 0, 0);

//x-coordinate of the upper left corner. 
$xPos = 100;
//y-coordinate of the upper left corner. 
$yPos = 30;

//Writting the picture
imagestring($rImg,5,$xPos,$yPos,"My text in the picture",$color);

//The new file with the text
header('Content-type: image/jpeg');
imagejpeg($rImg, NULL, 100); 
```

你可以使用本教程

[http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/](http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/)

# javascript - 函数（）超出 iframe？

> ID：13015657
> 
> 赞同：0
> 
> 时间：2012-10-22T16:26:31.540
> 
> 标签：javascript, function, iframe

> **可能重复：**
> [是否可以从 iframe 中的 JS 调用父文档中的 Javascript 函数？](https://stackoverflow.com/questions/6005318/is-it-possible-to-call-javascript-function-in-parent-document-from-js-in-iframe)

我有一个`main.php`页面。

这包含一个 iframe，它`src`是`random.php`.

我怎样才能在`main.php`带有随机函数的脚本中使用该函数？`random()``random.php`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:31:09.517

如果您正在使用 HTML5，则可以使用该`postMessage()`功能..

这是一个不错的演示：

[http://html5demos.com/postmessage](http://html5demos.com/postmessage)

**更新**

这个想法是针对`postMessage`iframe`window`对象，每个窗口都在监听消息事件，如下所示：

在你的 main.php 中：

```
window.addEventListener("message", function(e){
    var data = e.data; // data can be any object for example { type: 'random', payload: {}... }
    switch(data.type){
        case 'random':
            // do somthing here with the payload...
            break;
    }
}); 
```

在你的 iframe (random.php) 中：

```
window.parent.postMessage({ type: 'random', payload: {...} }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:28:23.190

`random`您可以在包含`iframe`using的页面中调用该函数`window.parent.random()`。如果你想做相反的事情，即从包含页面调用 ( `i`)中的函数，你应该使用。`frame``[DOM Reference to frame].contentWindow.random()`

↪ [Mozilla Developer wiki 上的](https://developer.mozilla.org/en-US/docs/DOM/window.parent)[更多信息`window.parent`](https://developer.mozilla.org/en-US/docs/DOM/window.parent)

* * *

如果在不同的域中，由于[Same Origin Policy](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)`random.php`，您不能这样做。如果是这种情况，您可以使用 HTML5跨页面传输信息*。但是，这不允许您直接调用不同域的 JavaScript 的函数。[`postMessage`](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

[* 请参阅[我可以使用](http://caniuse.com/#feat=x-doc-messaging)浏览器支持信息吗]

# php - php shell_exec 添加了不需要的换行符

> ID：13015658
> 
> 赞同：3
> 
> 时间：2012-10-22T16:26:46.923
> 
> 标签：php, shell, shell-exec

为什么`php`'s`shell_exec`命令会在输出中添加不需要的换行符 (\r\n)，我该如何防止这种情况发生？

测试.php：

```
<?php
var_dump(shell_exec('echo "test"')); 
```

运行`php test.php`结果：

```
string(5) "test
" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:28:41.283

该`echo`命令添加换行符，以便您的示例按预期工作。如果你想删除它，只需使用[`trim`](http://de.php.net/manual/en/function.trim.php)：

```
var_dump(trim(shell_exec('echo "test"'))); 
```

这将输出：

```
string(5) "test" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:07:49.343

您可以将`-n`作为参数传递给您的`echo`命令，这将防止`echo`输出尾随换行符。

从手册：

> -n 不输出尾随换行符

# c# - System.Collections.Generic.List 的计数

> ID：13015660
> 
> 赞同：5
> 
> 时间：2012-10-22T16:26:51.723
> 
> 标签：c#, asp.net-mvc, razor

```
ViewBag.EquipmentList = myInventoryEntities.p_Configurable_Equipment_Request_Select(Address_ID, false).Select(c => new { Value = c.Quantity + " " + c.Device_Name + " (s)", ID = c.Device_ID.ToString() }).ToList(); 
```

在 Razor 我想做以下

```
@ViewBag.EquipmentList.Count 
```

但计数总是 == 1

我知道我可以在 foreach 中进行迭代，但宁愿采用更直接的方法。

也许我在概念上是关闭的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T16:35:01.443

编辑：好的，所以现在看来​​你已经过去`Count`不执行了：

> 但计数总是 == 1

听起来你总是在获取一个只有一个条目的列表。如果这是出乎意料的，你应该看看*为什么*你只得到一个条目 - 从调试代码开始......这听起来不像 Razor根本问题。

* * *

如果你的价值*真的*是 a `List<T>`for some `T`，我相信它应该没问题。该表达式`ViewBag.EquipmentList.Count`将在每一点动态评估。

换句话说，如果你真的，真的使用显示的分配代码，那应该没问题。

但是，如果该值只是一些*不*公开属性的实现`IEnumerable<T>`，那么您需要使用扩展方法 - 并且您不能使用带有动态类型的普通“扩展方法语法”。一个简单的解决方法是使用：*`Count``Enumerable.Count()`*

 *```
Enumerable.Count(ViewBag.EquipmentList) 
```

...它仍将使用动态类型作为 的*参数*，`Enumerable.Count`但它不必将`Count()`方法作为扩展方法查找。

或者，确保您的值确实是`List<T>`. 如果它实际上是一个数组，您应该能够更改代码以使用该`Length`属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T16:28:54.130

```
@ViewBag.EquipmentListNI.Count() 
```*

# demorgans-law - DeMorgan's Law Simplification

> ID：13015661
> 
> 赞同：0
> 
> 时间：2012-10-22T16:26:52.207
> 
> 标签：demorgans-law

I was wondering how to solve this question, which I'm told should be done with DeMorgan's Law.

```
M = X*(BAR(Y + Z)) + (X + BAR(Y))*(X + BAR(Z)) 
```

I am supposed to find a sum of products.

**EDIT:** The link for the identities can be found here [De Morgan Laws](http://en.wikipedia.org/wiki/De_Morgan%27s_laws#Engineering)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:33:22.037

您可以使用 de Morgan，也可以直接从真值表中获取它：

```
X Y Z   M

0 0 0   1
0 0 1   0
0 1 0   0
0 1 1   0
1 0 0   1
1 0 1   1
1 1 0   1
1 1 1   1 
```

所以：

```
M = X+(Y+Z)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:55:44.800

# css - 自定义咆哮消息边框颜色

> ID：13015663
> 
> 赞同：1
> 
> 时间：2012-10-22T16:27:13.933
> 
> 标签：css, jsf, primefaces, growl

在咆哮消息中，总是有一个蓝色边框，我想摆脱它。尝试为不同的咆哮类添加边框颜色，但它仍然显示，我想要一个黑色边框，我该怎么办？下面是我的css，谢谢。

```
.ui-growl{
position: fixed;
top: 50%;
left: 50%;
margin-top: -50px;
margin-left: -100px;
border-color: black}

.ui-growl-item{color:black;background-color:gray; border-color: black;}

.ui-growl-item-container {background-color:gray;border-color:black;  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:50:35.600

我不确定为什么在你的情况下它是蓝色的，也许你使用了与默认 Aristo 主题不同的主题？

但无论如何，`<p:growl>`边框可以被以下选择器覆盖：

```
.ui-growl-item-container.ui-state-highlight {
    border-color: pink;
} 
```

另请参阅以下使用 Chrome 开发人员工具集进行检查的屏幕截图：

![在此处输入图像描述](../Images/80c0ca5e99f15203ab624e4b03d9340d.png)

确保在样式表中指定覆盖样式，该样式由 a 包含`<h:outputStylesheet>`在`<h:body>`（而不是`<h:head>`）中

```
<h:head>
    ...
</h:head>
<h:body>
    <h:outputStylesheet name="custom.css" target="head" />
    ...
</h:body> 
```

无论如何，它将被重新定位到生成的 HTML`<head>`中，并且这种方法保证它在任何 PrimeFaces 捆绑样式表*之后加载。*

# actionscript-3 - 新补间无法正常工作

> ID：13015669
> 
> 赞同：1
> 
> 时间：2012-10-22T16:27:39.793
> 
> 标签：actionscript-3, flash

有点困惑我哪里出错了

我有一个名为 myText 的动态文本字段。我正在运行以下代码：

```
package  {
import fl.transitions.Tween;
import fl.transitions.easing.Elastic;
import flash.display.MovieClip;
import fl.transitions.easing.*;
import flash.text.TextField;
import flash.text.TextFormat;

public class video extends MovieClip {

    public function video() {

        var fmt:TextFormat = new TextFormat();

        var letterTween:Tween = new Tween(fmt, "letterSpacing", Elastic.easeInOut, 6, 15, 2, true);

        myText.setTextFormat(fmt);

    }
} 
```

}

我知道它以文本为目标，因为文本字母间距在运行时设置为 6，但没有任何反应，我不喜欢 15 个字母间距（ing）

我哪里错了？

谢谢

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:02:33.557

您看不到任何更新的原因是当`TextFormat`属性更改时，您必须重新应用`TextFormat`. 您需要做的就是收听来自 的更新`Tween`并将其应用到那里。

我的示例在 CS5 的时间线上进行了测试，请继续并相应地修改您的课程。

```
import fl.transitions.Tween;
import fl.transitions.easing.Elastic;
import flash.display.MovieClip;
import fl.transitions.easing.*;
import flash.text.TextField;
import flash.text.TextFormat;
import fl.transitions.TweenEvent;

var fmt:TextFormat = new TextFormat();
var letterTween:Tween = new Tween(fmt, "letterSpacing", Elastic.easeInOut, 6, 15, 2, true);
letterTween.addEventListener(TweenEvent.MOTION_CHANGE, onMotionChanged);
myText.setTextFormat(fmt);

function onMotionChanged(event:TweenEvent):void{
    myText.setTextFormat(fmt);
} 
```

# iphone - 如何将 UIImageView 裁剪为自定义形状

> ID：13015676
> 
> 赞同：3
> 
> 时间：2012-10-22T16:28:20.703
> 
> 标签：iphone, objective-c, ios, xcode, uiimageview

用户是否可以在他们希望裁剪到的位周围画一条虚线（圆圈）`UIImageView`，然后`UIImageView`调整到这些点的大小？这有点像 Photoshop 中的套索/选框效果：

![在此处输入图像描述](../Images/c2ed895913a487c6987f21c74cebe43f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:55:02.843

更新：从 iOS 8.x 开始， UIImageView 提供了一个`maskView`属性。只需准备一个带有一些不透明像素的图像，使用该蒙版图像创建另一个图像视图，并将此蒙版图像视图设置为 maskView。掩码图像中的不透明像素将是基础图像中显示的像素。

```
 UIImageView *maskView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"somemask"]];
    maskView.frame = imageView.bounds;
    imageView.maskView = maskView;
    // imageView will be masked by maskView 
```

.

**原始答案**

有很多工作要做，但这里有一个高级大纲：

1.  创建一个将成为蒙版的空图像
2.  根据用户输入在该图像中构建路径
3.  填充路径以将其变成蒙版
4.  将遮罩应用到 imageview 的图像

创建图像：这里的一个简单想法是在您的项目中附带一张黑色图像。它的大小应与用户可以选择的最大区域相匹配。将图像读入内存 ( `UIImage imageNamed:`) 并通过调用将其设置为绘图上下文`UIGraphicsBeginImageContext`。

创建路径：（[参见苹果文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_paths/dq_paths.html)）。当用户开始抚摸该区域时，调用`CGContextBeginPath`，然后跟随用户手势，对触摸进行采样并通过`CGContextMoveToPoint`重复调用 touchesMoved 添加小片段。

创建蒙版：要将路径变成蒙版，您需要黑色背景和白色填充路径。如果您从黑色图像开始，您只需要进行填充。请参阅有关执行此操作的相同苹果指南。

最后，你将把这个遮罩应用到你的 imageView 的图像上。 [这是一个不错的参考](http://mobiledevelopertips.com/cocoa/how-to-mask-an-image.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:16:10.933

我想这只是你问题的一部分，但这里有一个关于如何绘制虚线和动画虚线的[例子（即行军蚂蚁效应）。](http://www.cimgf.com/2009/10/20/marching-ants-with-core-animation/)

# sql - 使用 oracle select 查找时间并发

> ID：13015682
> 
> 赞同：1
> 
> 时间：2012-10-22T16:28:40.663
> 
> 标签：sql, oracle

我在数据库表中有以下数据，想根据开始和结束时间查找并发事务。

```
Patient          Start Time        End Time
John             08:31A            10:49A 
Jim              10:14A            10:30A
Jerry            10:15A            10:28A
Alice            10:18A            12:29P
Bobby            10:32A            10:49A
Sally            10:46A            10:55A
Jane             10:52A            11:29A
Jules            10:54A            11:40A
Adam             10:58A            11:25A
Ben              11:00A            11:20A
Ann              11:31A            11:56A
Chris            11:49A            11:57A
Nick             12:00P            12:21P
Dave             12:00P            12:35P
Steve            12:23P            12:29P 
```

如果我想找到具有特定输入的任何重叠时间，我将如何编写它？例如说我想找到与 10:58A-11:25A 时间的重叠。这需要找到潜在的时间并发。我正在寻找最大并发重叠数的计数。在我的 10:58A-11:25A 示例中，我希望看到以下内容（计数为 5）：

```
Patient          Start Time        End Time
Alice            10:18A            12:29P
Jane             10:52A            11:29A
Jules            10:54A            11:40A
Adam             10:58A            11:25A
Ben              11:00A            11:20A 
```

在我的第二个示例中，一些并发时间与我正在寻找的时间重叠，但它们在另一个范围开始之前就结束了。所以，假设我正在寻找 10:46A-10:55A。我预计计数为 4。在此示例中 08:31A-10:49A 被删除，因为它在 10:52A-11:29A 开始之前结束。与 10:32A-10:49A 相同，在 10:52A-11:29A 开始之前就结束了。因此，与 10:46A-10:55A 范围内最并发的将是 4，尽管总体上有 6 个（下降了 2 个）。

```
Patient          Start Time        End Time
Alice            10:18A            12:29P
Sally            10:46A            10:55A
Jane             10:52A            11:29A
Jules            10:54A            11:40A 
```

这可以用sql语句完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:34:40.843

最简单和干净的方法是排除行：

所有行，除了：

*   在开始时间之前结束的行数
*   在结束时间之后开始的行数

样本：

```
select * from your table t
where
   not ( 
     t.end < begin_time 
     or
     t.start > end_time 
   ) 
```

[sqlfiddle 中的示例](http://sqlfiddle.com/#!4/fb9e0/6/0)

# google-maps - 谷歌方向服务零结果。它是一个错误吗？

> ID：13015685
> 
> 赞同：0
> 
> 时间：2012-10-22T16:28:57.540
> 
> 标签：google-maps, directions

我发现有时谷歌路线服务在运输模式下返回零结果。同时[https://maps.google.com/](https://maps.google.com/)可以找到相同地址的 rout。

请尝试：

[http://maps.googleapis.com/maps/api/directions/xml?origin=Uzhhorod&destination=Zhytomyr&sensor=false&departure_time=1351544080&mode=transit](http://maps.googleapis.com/maps/api/directions/xml?origin=Uzhhorod&destination=Zhytomyr&sensor=false&departure_time=1351544080&mode=transit)

返回`ZERO_RESULTS`，但[Google 地图本身会返回许多结果](https://maps.google.com/maps?saddr=Uzhhorod&daddr=Zhytomyr&hl=en&ll=49.31438,25.532227&spn=3.147758,8.453979&sll=49.353095,25.47339&sspn=3.145242,8.453979&geocode=FQDl5QIdCxZUASnZ47ZEuRk5RzE8KgQwAa6mDQ%3BFTrT_gId60u1ASldNforo2QsRzEp4rnZo9JK8Q&dirflg=r&ttype=now&noexp=0&noal=0&sort=def&mra=ltm&t=m&z=8&start=0)。

[http://maps.google.com](http://maps.google.com) (->directions)始发
地：乌日霍罗德
目的地：日托米尔
出发时间：10/29/12 20:38（1351544080 - Unix 时间戳）

到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:53:18.527

出发日期似乎有未记录的时间窗口（时间限制）。例如，谷歌方向服务只能搜索出发时间后8小时内的路线（我们需要从谷歌开发团队清除这个窗口）。因此解决方案是在离开时间增加 8 小时并尝试结果，并在合适的时间进行循环。我测试了，有效。我认为这就是 maps.google.com 的秘密

# cakephp - 在 windows 7 中烘焙 cakePHP 2

> ID：13015688
> 
> 赞同：0
> 
> 时间：2012-10-22T16:29:02.917
> 
> 标签：cakephp, cakephp-2.2

我是 cakePHP 的新手，刚开始烘焙，所以在遵循教程并执行以下操作时遇到了这个问题：

1.  添加 php 和 cakePHP 的路径
2.  运行 CMD 并输入“cake”并收到以下消息：

```
欢迎使用 CakePHP v2.2.3 控制台
-------------------------------------------------- -------------
应用程序：C：
路径：C:\
-------------------------------------------------- -------------
当前路径：

 -应用程序：C：
 -工作：C：
 -根：C：
 -核心：C:\xampp\cake\lib

改变路径：

您的工作路径应与更改 pat 的应用程序路径相同
h 使用“-app”参数。
示例：-app relative/path/to/myapp 或 -app /absolute/path/to/myapp

可用的外壳：

[核心] acl、api、烘焙、command_list、控制台、i18n、模式、测试、测试套件、upg
拉德

要运行应用程序或核心命令，请键入 cake shell_name [args]
要运行插件命令，请键入 cake Plugin.shell_name [args]
要获取特定命令的帮助，请键入 cake shell_name --help

```

3.我输入正在开发的应用程序的保存路径，即：

```
C:\xampp\htcdocs\blog
```

我尝试添加所有可能的路径，如 C:...blog\app、C:...blog\app\console、C:...blog\lib\cake\console，但我仍然收到消息系统找不到指定的路径。

我一直在寻找解决方案几个小时，但只能找到适用于 cakePHP 的早期版本或除 Windows 7 之外的任何其他操作系统的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:16:15.077

您可能希望将路径设置为项目的文件夹/应用程序/控制台。也到 php.exe 所在的文件夹。这就是我设置我的方式并为我工作。

尝试在 cmd 中输入 cake help，它应该会显示 cake 帮助文件。

编辑：我已经更改了这个答案，所以每个人都可以配置好蛋糕！

```
C:\xampp\htdocs\proyecto\app>set PATH=C:\Program Files\Common Files\Microsoft Sh
ared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\win
dows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Windows Live\Shared;C:\Pr
ogram Files\TortoiseSVN\bin;C:\xampp\htdocs\proyecto\app\Console;C:\xampp\php; 
```

然后从您的“项目”文件夹（在我的情况下为“proyecto”）转到 cmd 窗口中的应用程序并键入“蛋糕帮助”它应该显示如下内容：

欢迎使用 CakePHP v2.2.1 控制台

* * *

应用程序：应用程序路径：C:\xampp\htdocs\proyecto\app\

* * *

当前路径：

-应用程序：应用程序

-工作：C:\xampp\htdocs\proyecto\app

-root: C:\xampp\htdocs\proyecto

-核心：C:\xampp\htdocs\proyecto\lib

这意味着，一切顺利！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T19:44:49.470

1.  启动命令提示符
2.  键入 cd\ 按回车，然后 cd:/xampp/php 按回车
3.  php.exe C:/xampp/htdocs/cakeblog/lib/cake/console/cake.php bake press enter 其中“C:/xampp/htdocs/cakeblog/lib/cake/console/cake.php”是bake的路径文件。

有烘焙！

# .htaccess - 使用 mod_rewrite 从 URL 中删除 %2F

> ID：13015692
> 
> 赞同：2
> 
> 时间：2012-10-22T16:29:27.380
> 
> 标签：.htaccess, mod-rewrite, clean-urls

我想从我动态创建的 URL 中删除“%252F”。我有一个 php 文件，它使用 a`%2F`而不是`/`. 然后链接在 URL-Bar 中表示，`%252F`而不是`/`导致一些问题。
我试图用 .htaccess 文件实现的目标是将所有内容重定向`%2F`到`/`或重命名`%252F`为，`/`因为我无法更改创建链接的 php 代码。

**这是我的 .htaccess**

```
RewriteEngine on
Options +SymlinksIfOwnerMatch
RewriteBase /

RewriteCond %{HTTP_HOST} subdomain.mydomain.com
RewriteCond %{REQUEST_URI} (.*)/style.css [OR]
RewriteCond %{REQUEST_URI} (.*)/script.js [OR]
RewriteCond %{REQUEST_URI} (.*)/logo.png
RewriteRule (.*) http://www.mydomain.com%{REQUEST_URI} [R=301,NC,L]

RewriteCond %{REQUEST_METHOD}  !=POST
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.php\ HTTP/
RewriteRule ^(([^/]+/)*)index\.php$ http://subdomain.mydomain.com/$1 [R=301,L]

RewriteCond %{THE_REQUEST} \ /([^\ \?]*)([^\ \?]*)%2f(\?.*)?\  [NC]
RewriteRule !^/ /%1/%2 [QSA]

RewriteRule ^(/.+)%2f(.*)$ $1/$2 [NC,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?dir=([^\s]+) [NC]
RewriteRule ^ %1? [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?dir=/$1 [L] 
```

我无法让它工作，也许其他人可以帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:26:33.863

这些行：

```
RewriteCond %{THE_REQUEST} \ /([^\ \?]*)([^\ \?]*)%2f(\?.*)?\  [NC]
RewriteRule !^/ /%1/%2 [QSA]

RewriteRule ^(/.+)%2f(.*)$ $1/$2 [NC,QSA] 
```

需要删除前导斜杠。通过 htaccess 文件中的规则发送的 URI 去除了前导斜杠：

```
RewriteCond %{THE_REQUEST} \ /([^\ \?]*)([^\ \?]*)%2f(\?.*)?\  [NC]
RewriteRule ^ /%1/%2 [QSA]

RewriteRule ^(.+)%2f(.*)$ $1/$2 [NC,QSA,L] 
```

不确定该`RewriteRule !^/ /%1/%2 [QSA]`行应该做什么，看起来您正在剥离尾部斜杠？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:44:29.490

我设法摆脱`%252F`了 URL 中的第一个和“堆叠”斜杠的问题：

```
RewriteCond %{REQUEST_METHOD}  !=POST
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.php\ HTTP/
RewriteRule ^(([^/]+/)*)index\.php$ http://subdomain.mydomain.com/$1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?dir=%2F([^\s]+) [NC,OR]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?dir=([^\s]+) [NC]
RewriteRule ^ %1? [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?dir=/$1 [L] 
```

`%252F`不过，我的网址仍然存在问题。

# google-bigquery - 您可以在 Google 的 BigQuery 中构建和运行模型和统计函数吗？

> ID：13015694
> 
> 赞同：2
> 
> 时间：2012-10-22T16:29:37.110
> 
> 标签：google-bigquery

如何在 Google 的 BigQuery 中开发或使用统计功能？可以在谷歌平台上运行Java、PHP、R等，还是主要只支持SQL类型的特性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:24:49.720

Google BigQuery 支持一组非常有限的统计函数（平均值、方差、分位数）。如果要使用 R、Java 等，需要先提取数据。有一个开源 JDBC 驱动程序，您可以从 Java 中使用，也可以使用 BigQuery 客户端库。至于 R，有几个人编写 R 连接器来执行 BigQuery 查询并将结果作为 R 数据框进行操作的例子，但我不知道任何细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T21:03:57.783

如果选择 Python，Pandas 库有一个非常简单的连接器，用于读取和写入 BigQuery。寻找[Pandas.read_gbq](http://pandas.pydata.org/pandas-docs/dev/io.html#io-bigquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:38:24.667

我刚开始使用 R，也有兴趣从那里连接到 BigQuery。不幸的是，[此处](http://code.google.com/p/google-bigquery-r-client/)引用的 R 的 BigQuery 客户端已被删除。

虽然我还没有开始测试它，但我确实碰巧在[CRAN 存档](http://cran.r-project.org/src/contrib/Archive/googlebigquery/)中找到了连接器的链接。

# windows-phone-7 - 将数据保存到 SkyDrive

> ID：13015696
> 
> 赞同：0
> 
> 时间：2012-10-22T16:29:47.403
> 
> 标签：windows-phone-7, mvvm-light, onedrive

我使用 MVVM Light Toolkit，我有两个视图——主视图和设置视图。

主视图

*   来自用户的数据（ObservableCollection - SomeModel）

设置视图

*   登录到 SkyDrive

我想将集合中的数据保存到 SkyDrive。什么是最好的或可用的解决方案？

*   使用 messenger 并将数据作为参数从 MainViewModel 发送到 SettingsViewModel
*   从 SettingsViewModel 获取 LiveConnectSession 并在 MainViewModel 中使用它（我更喜欢这个选项或类似的东西）
*   别的东西？

感谢和抱歉我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:51:31.510

我建议您使用某种共享服务，这将允许您获取/设置`LiveConnectSession`。您可以在其中`SettingsViewModel`配置和设置它，然后从任何其他`ViewModel`.

但是，如果您不想添加此类服务，则可以使用第二种方法。

# java - 如何在 JavaFX 中计算字符串的像素宽度？

> ID：13015698
> 
> 赞同：34
> 
> 时间：2012-10-22T16:30:04.830
> 
> 标签：java, javafx-2, javafx

在 Java FX 2.2 中似乎没有 API 调用来计算文本字符串的宽度（以像素为单位）。在其他论坛上已经提出了解决方法的建议，但是我创建或查找返回字符串宽度的任何代码（使用默认字体或其他方式）的努力都失败了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-10-22T21:53:23.213

如果您只是测量没有 CSS 的默认字体：

1.  将要测量的字符串放在 Text 对象中。
2.  获取 Text 对象的布局边界的宽度。

如果你需要应用 CSS：

1.  将要测量的字符串放在 Text 对象中。
2.  创建一次性场景并将文本对象放置在场景中。
3.  拍摄文本的快照（如果您使用的是 Java 7）或为 Java 8 调用[applyCss](http://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#applyCss--)。
4.  获取 Text 对象的布局边界的宽度。

这是有效的，因为它强制在 Text 上进行布局传递，计算它的布局边界。第 2 步中的场景是必需的，因为这正是 CSS 处理器的工作方式（它需要一个节点位于场景中才能完成其工作）。如果您想进一步了解处理过程，请务必阅读 applyCss 的链接 javadoc。

**示例代码**

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.text.Text;
import javafx.stage.Stage;

// displays the width in pixels of an arbitrary piece of text.
public class MeasureText extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws Exception {
    final Text text = new Text("XYZZY");
    new Scene(new Group(text));

    // java 7 => 
    //    text.snapshot(null, null);
    // java 8 =>
    text.applyCss(); 

    final double width = text.getLayoutBounds().getWidth();

    stage.setScene(new Scene(new Label(Double.toString(width))));
    stage.show();
  }
} 
```

示例程序输出（以像素为单位显示任意文本的宽度）：

![示例程序输出](../Images/a1f7c70bfb6688e5dea2e51c4395f4c4.png)

> 如果将文本打印到具有设置字体的图形上下文中，这将如何（如果有的话）发生变化？

将字体应用于包含您将在画布上绘制的相同消息的文本对象。与测量绘制到场景图的文本不同，绘制到画布的项目没有应用 CSS，因此您无需在测量文本之前将 Text 对象放在场景中并应用 CSS。您可以测量文本对象的布局边界，它将与使用相同字体在画布内绘制的文本的边界相同。

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.canvas.*;
import javafx.scene.control.Label;
import javafx.scene.layout.VBox;
import javafx.scene.text.*;
import javafx.stage.Stage;

// displays the width in pixels of an arbitrary piece of text (which has been plotted on a canvas).
public class MeasureText extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        final String msg = "XYZZY";
        final Text text = new Text(msg);
        Font font = Font.font("Arial", 20);
        text.setFont(font);

        final double width = text.getLayoutBounds().getWidth();

        Canvas canvas = new Canvas(200, 50);
        GraphicsContext gc = canvas.getGraphicsContext2D();
        gc.setFont(font);
        gc.fillText(msg, 0, 40);

        stage.setScene(new Scene(
                new VBox(new Label(Double.toString(width)), canvas))
        );
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-12-26T03:27:11.040

我试过这个：

```
Text theText = new Text(theLabel.getText());
theText.setFont(theLabel.getFont());
double width = theText.getBoundsInLocal().getWidth(); 
```

它似乎工作正常。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-01-23T16:57:30.177

这个解决方案一直有效到 java 8：

```
float width = com.sun.javafx.tk.Toolkit.getToolkit().getFontLoader().computeStringWidth("", gc.getFont());
float height = com.sun.javafx.tk.Toolkit.getToolkit().getFontLoader().getFontMetrics(gc.getFont()).getLineHeight(); 
```

这些类已被删除，并且在较新的 java 版本中不可用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-06T11:21:27.583

```
边界 bounds = TextBuilder.create().text(text).font(font).build().getLayoutBounds();
双倍宽度=bounds.getWidth();
双倍高度=bounds.getHeight();
```

# java - 在java中表示二元关系

> ID：13015699
> 
> 赞同：1
> 
> 时间：2012-10-22T16:30:09.457
> 
> 标签：java

一位著名的程序员说“为什么有人需要数据库，只要给我哈希表！”。我有语法符号列表及其频率。一种方式是地图：符号#->频率。另一种方式是[二元]关系。问题：按频率获得前 5 个符号。

更一般的问题。我知道 [二元] 关系代数正在慢慢进入 CS 理论。有支持关系的java库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:36:58.970

```
 List<Entry<String, Integer>> myList = new ArrayList<...>();
 for (Entry<String, Integer> e : myMap.entrySet())
       myList.add(e);

 Collections.sort(myList, new Comparator<Entry<String, Integer>>(){

    int compare(Entry a, Entry b){
       // compare b to a to get reverse order
       return new Integer(b.getValue()).compareTo(new Integer(a.getValue());
    }
 });

 List<Entry<String, Integer>> top5 = myList.sublist(0, 5); 
```

更高效：

```
 TreeSet<Entry<String, Integer>> myTree = new TreeSet<...>(
    new  Comparator<Entry<String, Integer>>(){

      int compare(Entry a, Entry b){
         // compare b to a to get reverse order
         return new Integer(b.getValue()).compareTo(new Integer(a.getValue());
      }
    });
 for (Entry<String, Integer> e : myMap.entrySet())
       myList.add(e);

 List<Entry<String, Integer>> top5 = new ArrayList<>();
 int i=0;
 for (Entry<String, Integer> e : myTree) {
     top5.add(e);
     if (i++ == 4) break;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:42:02.263

有了`TreeSet`它应该很容易：

```
int i = 0;
for(Symbol s: symbolTree.descendingSet()) {
    i++;
    if(i > 5) break; // or probably return
    whatever(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:37:03.510

这是一个通用算法，假设您已经有一个完整的符号 HashTable

1.  制作2个数组：
    *   freq[5] // 使用它来保存迄今为止最常见的 5 个频率计数
    *   word[5] // 用这个保存上面数组对应的单词，目前看到的
2.  使用迭代器遍历您的 HashTable 或 Map：
    *   按顺序将当前符号的频率与 freq[5] 中的频率进行比较。
    *   如果当前符号的频率高于上述数组配对中的任何条目，则将该条目及其下方的所有条目移动一个位置（即第 5 个位置被踢出）
    *   将当前符号/频率对添加到新空出的位置
    *   否则，忽略。

分析：

*   您最多对 HashTable 中看到的每个符号的数组进行 5 次比较（恒定时间），所以这是 O(n)
*   每次您必须将数组中的条目向下移动时，它也是恒定的时间。假设你每次都换班，这仍然是 O(n)

空间：O(1) 来存储数组

运行时：O(n) 遍历所有符号

# android - 显示 progressdialog util 正在运行的滞后方法

> ID：13015702
> 
> 赞同：0
> 
> 时间：2012-10-22T16:30:11.920
> 
> 标签：android, progressdialog

我的应用程序 - 从 n 个 jpg 图像创建一个 gif 图像。这种方法要读取很多图像，所以需要很长时间。我想在此方法运行时显示进度对话框。请帮助我，任何想法或源代码示例！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:03:11.010

如果您只是在 UI 线程上执行此操作（不推荐），它将如下所示：

```
private void myMethodThatTakesALongTime() {
    ProgressDialog progressDialog;
    progressDialog = new ProgressDialog( getActivity() );
    progressDialog.setIndeterminate( true );
    progressDialog.setMessage( "Please Wait..." );
    progressDialog.show();

    // Do expensive operations

    progressDialog.dismiss();
} 
```

我建议将所有这些都放入 AsyncTask 中。它看起来像这样：

```
private class MyAsyncTask extends AsyncTask<String, String, String> {

    private ProgressDialog progressDialog;

    protected void onPreExecute() {

        //show your dialog before you start

        progressDialog = new ProgressDialog( getActivity() );
        progressDialog.setIndeterminate( true );
        progressDialog.setMessage( "Please Wait..." );
        progressDialog.show();
    }

    @Override
    protected String doInBackground( String... params ) {

        // do expensive operations in here

        return null;
    }

    @Override
    public void onPostExecute( String result ) {

        //dismiss your dialog when done

        if ( progressDialog != null && progressDialog.isShowing() ) {

            progressDialog.dismiss();
        }
    }
} 
```

您将使用以下行开始：

```
new MyAsyncTask().execute( String[] {} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:38:50.377

你需要在这里做两件事。首先使用[oncreateDialog](http://developer.android.com/guide/topics/ui/dialogs.html) () 方法来创建你的对话。其次，您应该使用[异步](http://developer.android.com/reference/android/os/AsyncTask.html)任务来执行长时间运行的任务。在启动异步任务时，您可以显示您的对话，当您完成任务并返回您的活动时，您可以再次关闭它。

# c++ - C++：不完整类型

> ID：13015708
> 
> 赞同：0
> 
> 时间：2012-10-22T16:30:38.047
> 
> 标签：c++, compiler-errors

我有以下代码：

```
template<class T>
class RandomTreeNode {

public:
    typedef typename RandomTreeFunction<T>::function_ptr function_ptr;
    RandomTreeNode(): left(NULL), right(NULL), threshold(0.0), is_a_leaf(false), data(NULL), function(0){
    }
    void set_function(function_ptr function){this->function = function;}
    function_ptr get_function(){ return this->function;}

    void set_threshold(double threshold){this->threshold = threshold;}
    double get_threshold(){return threshold;}

    void create_left_child(){this->left = RandomTreeNode<T>();}
    //returning references so that they can be altered in a recursive tree build algo without excessive copying
    RandomTreeNode<T>& get_left_child(){return left;}

    void create_right_child(){this->right = RandomTreeNode<T>();}
    RandomTreeNode<T>& get_right_child(){return this->right;}

    bool is_leaf(){return this->is_a_leaf;}
    void mark_as_leaf(){this->is_a_leaf = true;}

    const std::vector<T> get_data(){
        return data;
    }
    void set_data(std::vector<T>& data){
        this->data = data; 
    }

private:
    RandomTreeNode<T> left;
    RandomTreeNode<T> right;
    double threshold;
    function_ptr function;
    std::vector<T> data;
    bool is_a_leaf;

}; 
```

当我编译时，我得到以下`error: 'RandomTreeNode<T>::left' has incomplete type`. 任何想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:33:27.613

因为它是您当前定义的类型。一个类型拥有相同类型的成员是没有意义的（对于初学者来说，它的大小是无限的）。我认为您想要的是指向's 的*指针*`RandomTreeNode<T>`，而不是直接实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:36:08.627

您不能在此类中声明类的实例。

在这里您声明`RandomTreeNode<T> left;`并`RandomTreeNode<T> right;`在您的`RandomTreeNode`. 因此类型的声明是不完整的。

您应该使用指针`RandomTreeNode<T>`来避免此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:21:16.733

正确编译的代码（http://codepad.org/ltpxM60i）

下面的代码现在可以正确编译

```
**template<class T>
class RandomTreeFunction{
      class function_ptr{
       };
};**
template<class T>
class RandomTreeNode {

public:
    typedef  typename RandomTreeFunction<T>::function_ptr function_ptr;
    RandomTreeNode(): left(NULL), right(NULL), threshold(0.0), is_a_leaf(false), data(NULL), function(0){
    }
    void set_function(function_ptr function){this->function = function;}
    function_ptr get_function(){ return this->function;}

    void set_threshold(double threshold){this->threshold = threshold;}
    double get_threshold(){return threshold;}

    void create_left_child(){this->left = RandomTreeNode<T>();}
    //returning references so that they can be altered in a recursive tree build algo without excessive copying
    RandomTreeNode<T>& get_left_child(){return left;}

    void create_right_child(){this->right = RandomTreeNode<T>();}
    RandomTreeNode<T>& get_right_child(){return this->right;}

    bool is_leaf(){return this->is_a_leaf;}
    void mark_as_leaf(){this->is_a_leaf = true;}

    const std::vector<T> get_data(){
        return data;
    }
    void set_data(std::vector<T>& data){
        this->data = data; 
    }

private:
    RandomTreeNode<T> left;
    RandomTreeNode<T> right;
    double threshold;
    function_ptr function;
    std::vector<T> data;
    bool is_a_leaf;

};
int main(){
return 0;
} 
```

我认为 function_ptr 没有定义

```
typedef typename RandomTreeFunction<T>::**function_ptr** function_ptr; 
```

对于**typename**以下是适用于此处的规则（参考：- [http://pages.cs.wisc.edu/~driscoll/typename.html](http://pages.cs.wisc.edu/~driscoll/typename.html)）

规则

```
typename is prohibited in each of the following scenarios:
        Outside of a template definition. (Be aware: an explicit template specialization (more commonly called a total specialization, to contrast with partial specializations) is not itself a template, because there are no missing template parameters! Thus typename is always prohibited in a total specialization.)
        Before an unqualified type, like int or my_thingy_t.
        When naming a base class. For example, template <class C> class my_class : C::some_base_type { ... }; may not have a typename before C::some_base_type.
        In a constructor initialization list.
    typename is mandatory before a qualified, dependent name which refers to a type (unless that name is naming a base class, or in an initialization list).
    typename is optional in other scenarios. (In other words, it is optional before a qualified but non-dependent name used within a template, except again when naming a base class or in an initialization list.) 
```

因此，您可能必须为 function_ptr 定义类型。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-22T16:34:15.187

尝试前向声明。在全局范围内将其写在程序的开头。

```
template<class T>
class RandomTreeNode ; 
```

它给你错误，因为你正在声明你要声明的类型的变量。

# c++ - 查找二叉树的深度

> ID：13015709
> 
> 赞同：2
> 
> 时间：2012-10-22T16:30:46.140
> 
> 标签：c++, binary-tree

我无法理解这个 maxDepth 代码。任何帮助，将不胜感激。这是我遵循的片段示例。

```
int maxDepth(Node *&temp)
{
  if(temp == NULL)
  return 0;

 else
{
 int lchild = maxDepth(temp->left);
 int rchild = maxDepth(temp->right);

 if(lchild <= rchild)
 return rchild+1;

 else
  return lchild+1;

 } 
```

}

基本上，我的理解是该函数递归调用自身（对于每个左右情况），直到它到达最后一个节点。一旦完成，它会返回 0，然后执行 0+1。那么前一个节点是1+1。那么下一个是2+1。如果有一个有 3 个左孩子的 bst，int lchild 将返回 3。额外的 + 1 是根。所以我的问题是，所有这些 +1 是从哪里来的。它在最后一个节点返回 0 但为什么它在左/右子节点上升时返回 0+1 等？我不明白为什么。我知道它会这样做，但为什么呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T16:47:02.790

考虑这部分（一棵更大的树）：

```
 A
        \
         B 
```

现在我们要计算这个树部分的深度，所以我们传递指针`A`作为它的参数。

显然指向`A`is not的指针`NULL`，所以代码必须：

*   呼叫`maxDepth`的每个`A`孩子（左右分支）。`A->right`是`B`，但`A->left`显然是`NULL`（因为`A`没有左分支）

*   比较这些，选择最大的值

*   返回这个选择的值 + 1（因为`A`它本身需要一个级别，不是吗？）

现在我们来看看如何计算`maxDepth(NULL)`和`maxDepth(B)`计算。

前者很简单：第一次检查将`maxDepth`返回 0。如果另一个孩子`NULL`也是，那么两个深度将相等 (0)，我们必须为`A`自己返回 0 + 1。

但`B`不是空的；但是，它没有分支，所以（正如我们注意到的）它的深度是 1（`NULL`两个部分的 s 的最大 0 +`B`自身的 1）。

现在让我们回到`A`. `maxDepth`它的左分支 ( `NULL`) 是 0，`maxDepth`它的右分支是 1。这些中的最大值是 1，我们必须为`A`自己添加 1 - 所以它是 2。

关键是当`A`它只是较大树的一部分时，要执行相同的步骤；此计算 (2) 的结果将用于更高级别的`maxDepth`调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T16:54:41.607

使用前一个节点 + 1 计算深度

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T16:34:03.383

所有这些都来自这部分代码：

```
if(lchild <= rchild)
    return rchild + 1;
else
    return lchild + 1; 
```

您将自己添加`+1`到树的叶子中获得的结果中。这些不断累加，直到您退出函数的所有递归调用并到达根节点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T16:38:02.333

请记住，在二叉树中，一个节点最多有 2 个子节点（左和右）

它是一种递归算法，所以它一遍又一遍地调用自己。

如果 temp（正在查看的节点）为 null，则返回 0，因为该节点什么都不是，不应该计算在内。这是基本情况。

如果正在查看的节点不为空，则它可能有子节点。所以它得到左子树的最大深度（并为当前节点的级别加 1）和右子树（为当前节点的级别加 1）。然后它比较两者并返回两者中的较大者。

它深入到两个子树（temp->left 和 temp->right）并重复操作，直到它到达没有子节点的节点。那时它将在左右调用 maxDepth，这将为 null 并返回 0，然后开始返回调用链。

因此，如果您有一个由三个节点组成的链（例如 root-left1-left2），它将下降到 left2 并调用 maxDepth(left) 和 maxDepth(right)。每个都返回 0（它们为空）。然后它又回到了left2。它比较，两者都是0，所以两者中的较大者当然是0。它返回0 + 1。然后我们在 left1 - 重复，发现 1 是它的左 n 右中的较大者（也许它们是相同的或者它没有右孩子）所以它返回 1+1。现在我们在根，同样的事情，它返回 2+1 = 3，这是深度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T16:34:14.937

因为深度是用前一个节点+1计算的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-13T19:15:33.363

要找到二叉树的最大深度继续向左遍历树，基本上执行[DFS](http://www.youtube.com/watch?v=4bncAOf4XkM)
或者我们可以通过三种不同的递归方式找到二叉搜索树的深度

```
– using instance variables to record current depth and total depth at every level
– without using instance variables in top-bottom approach
– without using instance variables in bottom-up approach 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-04T05:59:33.237

我认为这是正确的答案

```
int maxDepth(Node *root){
    if(root){ return 1 + max( maxDepth(root->left), maxDepth(root->right)); }
    return -1;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-09T00:10:43.260

代码片段可以简化为：

```
int maxDepth(Node *root){
    if(root){ return 1 + max( maxDepth(root->left), maxDepth(root->right)); }
    return 0;
} 
```

查看此代码的一个好方法是自上而下：

如果 BST 没有节点会怎样？我们将拥有`root = NULL`并且该函数将立即返回预期的深度`0`。

现在假设树中填充了许多节点。从顶部开始，`if`条件将`true`针对根节点。然后我们通过将这些子树的根传递给 来询问左子树和右子树的最大深度是多少`maxDepth`。根的 LST 和 RST都比根深**一级**，所以我们必须加一才能得到传递给函数的树**的深度。** `root`

# java - 基于 javafx 和 fxml 的透明背景

> ID：13015716
> 
> 赞同：1
> 
> 时间：2012-10-22T16:31:14.627
> 
> 标签：java, javafx-2, stage, scene, fxml

有很多方法可以使窗格或背景场景的背景透明。

```
e.g http://stackoverflow.com/questions/12717487/how-to-implement-a-transparent-pane-with-non-transparent-children 
```

但是如果我有一个用 fxml 和基于控制器的文件制作的应用程序，我该怎么做呢？

当我已经在基于 fxml 的文件中创建了一个应用程序并且布局在底部有一个 AnchorPane 并且在它上面有一些其他窗格时。我实际上如何使白色背景透明或半透明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:36:48.440

不幸的是，这不是您问题的确切答案，但希望对您有所帮助。

请参阅[JavaFX 2.2 模态窗口对话框 *with* FXML](https://stackoverflow.com/questions/12539778/javafx-2-2-modal-window-dialog-with-fxml)，它提供了有关将 fxml 内容加载到覆盖窗口中的信息。

在答案中，有一个指向[示例 NetBeans 项目](https://s3.amazonaws.com/baanthaispa/ConfirmationDialog.zip)的链接，其中包括演示显示具有非 fxml 内容的窗口的代码，该窗口在具有 fxml 内容的窗口顶部具有透明背景。但是，该示例可以概括为具有透明背景的弹出窗口的内容是在 fxml 而不是 JavaFX 中生成的。概括可以遵循我在[JavaFX 2.2 Modal window dialog *with* FXML](https://stackoverflow.com/questions/12539778/javafx-2-2-modal-window-dialog-with-fxml)的答案文本中概述的技术。

示例项目的输出如下所示，其中“巨大洞穴探险”窗口基于 fxml，而透明对话框则不是。我认为要正确回答您的问题，需要扩展示例，以便从 fxml 生成透明对话框的内容。

![示例程序输出](../Images/2e5c7edb1312c83148ecb76d017cc01d.png)

# javascript - 基于媒体查询的可选 Javascript 执行

> ID：13015719
> 
> 赞同：10
> 
> 时间：2012-10-22T16:31:25.400
> 
> 标签：javascript, css, media-queries

我试图弄清楚如何根据当前的设备/媒体查询有选择地运行一段 javascript。我正在使用 Twitter Bootstrap 并且基本上有两个版本的媒体查询：

```
@media (min-width: 980px) { ... } <!-- Desktops -->
@media (max-width: 979px) { ... } <!-- Smaller screens/tablets/phones --> 
```

我有一张我生成的地图，但出于和宽度的原因，我没有在移动/小屏幕版本中显示它。然而，即使您在移动屏幕上看不到 javascript，它仍会在后台执行。所以，我试图在 javascript 中找到一种方法，我可以在其中执行以下操作：

```
// Imaginary function
var screenType = getScreenType();

if(screenType == 1) {
   // Load map
} 
```

我[读过](https://stackoverflow.com/questions/6861802/javascript-and-media-queries)有人在他们的媒体查询中将 CSS 属性设置为特定值，然后尝试根据 CSS 属性在 DOM 中找到该元素，但必须有更好的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-11T16:55:52.117

当前接受的答案不够好，您应该检查**window.matchMedia**

您可以检测视口尺寸的变化，但您必须计算方向和纵横比等因素，并且不能保证我们的计算在应用媒体查询规则时会匹配我们的浏览器假设。

我的意思是，你可以计算 X，但你的浏览器假设可以是 Y。所以我认为最好使用相同的浏览器规则，window.matchMedia 可以做到

```
var jmediaquery = window.matchMedia( "(min-width: 480px)" )
if (jmediaquery.matches) {
    // window width is at least 480px
}
else {
    // window width is less than 480px
} 
```

您甚至可以使用侦听器接收查询通知

```
var jmediaquery = window.matchMedia("(orientation: portrait)");
jmediaquery.addListener(handleOrientationChange);
handleOrientationChange(jmediaquery);

function handleOrientationChange(jmediaquery) {
    if (jmediaquery.matches) {
        // orientation changed
    }
} 
```

如果您不再需要接收有关更改的通知，只需调用 removeListener()

```
jmediaquery.removeListener(handleOrientationChange); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-22T16:40:56.450

您可能会发现 Enquire.js 库很有帮助：

[http://wickynilliams.github.com/enquire.js/](http://wickynilliams.github.com/enquire.js/)

CSS 技巧文章：[http ://css-tricks.com/enquire-js-media-query-callbacks-in-javascript/](http://css-tricks.com/enquire-js-media-query-callbacks-in-javascript/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T16:33:55.420

使用 javascript 怎么样？

```
<script type="text/javascript">

if (screen.width < 980) { 

document.write('<link href="UrLowRes.css" type="text/css" rel="stylesheet"/>');

} else { 

document.write('<link href="UrlHighRes.css" type="text/css" rel="stylesheet"/>');

} 

</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T16:38:51.513

您还可以使用名为 minwidth 的插件：

```
minwidth(940, function () {
  //do whatever you need
}); 
```

但它仅在页面加载时才有效，而不是在调整大小时有效。

[http://edenspiekermann.com/en/blog/responsive-javascript-helpers](http://edenspiekermann.com/en/blog/responsive-javascript-helpers)

# data-structures - libev watchers的数据结构

> ID：13015721
> 
> 赞同：4
> 
> 时间：2012-10-22T16:31:31.827
> 
> 标签：data-structures, libev

*Libev*使用三种数据结构来存储不同的观察者。

**堆：**用于按时间排序的观察者，例如`ev_timer`和`ev_periodic`。

**链表：**如`ev_io`, `ev_signal`,`ev_child`等。

**数组：**如`ev_prepare`、`ev_check`等`ev_async`。

毫无疑问，使用堆来存储计时器观察者。但是选择链表和数组的标准是什么？

存储 ev_io 观察者的数据结构似乎有点复杂。它首先是一个以`fd`索引为索引的数组，数组中的元素是 的链表`ev_io watcher`。如果使用链表作为元素，则为数组分配空间更方便。是这个原因吗？

或者只是因为插入或删除操作`ev_io`更频繁，`ev_prepare`看起来更稳定？

还是有什么其他原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T15:18:54.767

期望只有少数（通常是一个，并且几乎总是最多两个）io watchers 用于相同的 fd（与信号类似）。将列表链接放入观察者意味着不需要额外的分配，如果每个观察者使用一个数组则需要。如果很多 I/O 观察者在同一个 fd 上处于活动状态，那么这种链表方法会更慢。

使用数组是因为插入和删除非常快（观察者存储数组索引）。使用 4 字节索引还可以减少 64 位机器上的内存需求（每个观察者 12 个字节，而双向链表需要 16 个字节），并且使用指针数组意味着所有指针在内存中彼此靠近，这提高扫描时的缓存效率，这是一些观察者的频繁操作。

缓存效率也是使用 4 堆而不是 2 堆的原因，也是将时间值复制到堆数据结构中的原因，以避免在堆操作时访问观察者内存。

子观察者实际上使用一个固定大小的哈希表，并且再次期望每个哈希桶的子观察者数量很少，因此列表指针成为观察者数据结构的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T21:17:59.667

可能原因是在典型情况下需要通过 fd 查找 ev_io。底层库（epoll、select 或其他）将提供具有某些事件的 fd。然后，Libev 将简单地将其用作索引，并仅遍历需要调用的事件观察者的链接列表。所以它可以快速触发事件。

# php - Windows - PHP SSH 远程连接

> ID：13015722
> 
> 赞同：0
> 
> 时间：2012-10-22T16:31:33.980
> 
> 标签：php, windows, ssh

> **可能重复：**
> [如何通过 PHP 执行 SSH 命令](https://stackoverflow.com/questions/6270419/how-to-execute-ssh-commands-via-php)

我在这里搜索了一些解决方案，但找不到任何有用的东西，所以我就问一下。

好的，所以我想做的是从我的网站到远程服务器机器的 SSH 远程连接。目前两者都是 Windows，但我很快就会得到一些 Linux 服务器，所以我必须让它与 Linux 系统兼容。嗯，回到主题。我目前正在尝试在 PHP 中创建一个游戏服务器控制面板，它将通过 Internet 在我的专用服务器上启动和停止 .exe，但我需要知道如何在 PHP 中执行此操作。

我目前还没有想出任何东西，因为这仍然是我的一个想法。我知道我应该在 ASP.NET 中实现它，但我对 ASP.NET 一无所知。

我已经在我的远程机器上安装了 Cygwin Server 并且它正在工作。

如何与我的远程机器建立 PHP SSH 连接？

编辑：我对两台机器都有完全的 root 访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:34:50.413

您应该能够使用 PHP 的`exec()`函数来执行脚本来执行您需要的操作。见这里： http: [//php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

# c++ - C++ :: 双冒号和 (void *)

> ID：13015724
> 
> 赞同：-3
> 
> 时间：2012-10-22T16:31:41.670
> 
> 标签：c++

> **可能重复：**
> [(char *) x 或 (void *) z 是什么意思？](https://stackoverflow.com/questions/9071238/what-does-char-x-or-void-z-mean)

我正在使用 c++ 文件并遇到以下行：

```
tmp.sort(Hash::pairval, printPair, (void *)(tmp.bitSize())); 
```

我最不确定 (void *) 是什么意思。bitsize() 是一个函数，我之前听说过传递函数指针这个术语。就是这样吗？

我知道 :: 通常是范围解析运算符，我在 .cpp/.h 对象类型文件中看到过。我相信这里的目的是相同的，声明pairval 是在Hash 中找到的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:37:58.550

> 我最不确定 (void *) 是什么意思。bitsize() 是一个函数，我之前听说过传递函数指针这个术语。就是这样吗？

没有。注意括号，`tmp.bitSize()`是一个函数调用表达式，被调用并返回一个值。因此 - 这里不涉及函数指针。

然后将返回值转换为指向 void 的指针类型（即包罗万象的“指向某物的指针”类型），以便传递给需要这种指针的函数。

为什么地球上有人会将位大小（看起来像一个数字）转换为指针，我不知道。这介于可疑和不正确之间。

阅读[C++ 中的强制转换](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)。`void*`由于[严格的别名规则](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)，不鼓励使用 C 风格的强制转换，并且强制转换为很少有用且通常很危险。

> 知道 :: 通常是范围解析运算符，我在 .cpp/.h 对象类型文件中看到过。我相信这里的目的是相同的，声明pairval 是在Hash 中找到的。

这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:34:04.080

(void *) 只是将 tmp.bitSize() 的返回值转换为 void 指针类型。强制转换是 C++ 和 c 中非常常见的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:35:25.297

`Hash::pair`

很可能是对 class 的静态成员的调用`Hash`。

该`(void*)`部分是一个强制转换为 void 指针，`tmp.bitSize()`它最有可能返回某种值。所以没有函数指针。

# android - ViewPager 中的 ListFragment

> ID：13015728
> 
> 赞同：2
> 
> 时间：2012-10-22T16:31:53.463
> 
> 标签：android, android-asynctask, android-viewpager, fragment

我有一个包含片段的 Viewpager 和一个 listfragment，listfragment 从 asynctask 获取数据，然后使用 setListAdapter 设置数据，唯一的问题是数据没有显示。有没有人有解决这个问题的建议？

```
public class AndroidViewPagerActivity extends FragmentActivity {

ViewPager mViewPager;
TabsAdapter mTabsAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);
    setContentView(mViewPager);

    final ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

    mTabsAdapter = new TabsAdapter(this, mViewPager);
    mTabsAdapter.addTab(bar.newTab().setText("Tab1"),
            FragmentB.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab2"),
            FragmentA.class, null);
    mTabsAdapter.addTab(bar.newTab().setText("Tab3"),
            FragmentC.class, null);

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 1));

    }

    mViewPager.setCurrentItem(1);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.menuitem2:
        Toast.makeText(getApplicationContext(), "menu klikket!", Toast.LENGTH_LONG).show();
        break;

    default:
        break;
    }

    return true;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getActionBar().getSelectedNavigationIndex());
}

public static class TabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {

    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(FragmentActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    public void onPageScrollStateChanged(int state) {
        // TODO Auto-generated method stub

    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
        // TODO Auto-generated method stub

    }

    public void onPageSelected(int position) {
        // TODO Auto-generated method stub
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(),
                info.args);
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

} 
```

和一个类 FragmentA

```
public class FragmentA extends ListFragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View myFragmentView = inflater.inflate(R.layout.fragmenta,
            container, false);

    return myFragmentView;

}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.v("ListFragment", "onActivityCreated().");
    Log.v("ListsavedInstanceState", savedInstanceState == null ? "true"
            : "false");

    // Generate list View from ArrayList
    new GetList().execute();

}

@Override
public void onStart() {
    super.onStart();

}

class GetList extends AsyncTask<String, String, Void> {
    private ProgressDialog progressDialog = new ProgressDialog(
            getActivity());

                    //Data is retrieved from a server, and added to the ListAdapter

        ListAdapter adapter = new SimpleAdapter(getActivity(), contactList,
                R.layout.fragmenta, new String[] { TAG_NAME, TAG_UID,
                        TAG_START }, new int[] { R.id.email_label,
                        R.id.mobile_label, R.id.mobile_label });

        setListAdapter(adapter);

        Log.e("LIST", "setListAdapter is done");
    }
} 
```

我的代码运行良好，但列表未显示。有人可以帮我吗？

# android - 删除 @Override 注释错误

> ID：13015734
> 
> 赞同：3
> 
> 时间：2012-10-22T16:32:09.033
> 
> 标签：android, overriding, java

我有一个问题......在 Eclipse 上，当我想从互联网加载一个 Android 库时，我在 @Override 注释上遇到了很多错误。

我正在使用JDK 1.7 ...

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T16:44:10.633

[Android 要求](http://developer.android.com/sdk/index.html)您使用 JDK 1.6 编译项目。如果您尝试使用其他版本的 Java，您可能会遇到注释错误。

为确保您使用的是 JDK 1.6：

*   右键单击 Eclipse 中的项目，转到“属性”。

*   单击左栏中的“Java 编译器”。

在这里您需要确保您**没有**使用 Java 1.5 版或 1.7 版来编译项目。您需要使用 JDK 1.6（请参阅[Android 要求](http://developer.android.com/sdk/index.html)）。

*   如果 Eclipse 使用的是 1.6，则取消选中“Java 编译器”页面上的“启用项目特定设置”。

Eclipse 应该在使用 JDK 1.6 时识别 @Override 注释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T16:42:20.470

Android 需要 Java 1.5 或 1.6。

我会使用 1.6，因为当您覆盖接口方法时不会给您错误。

# ruby-on-rails - 在 Rails 控制器中使用 define_method 会产生语法错误

> ID：13015735
> 
> 赞同：0
> 
> 时间：2012-10-22T16:32:17.833
> 
> 标签：ruby-on-rails, ruby

使用 Rails 3.2。下面是我的控制器：

```
class ShopsController < ApplicationController
  ...

  class << self
    Shop::SHOP_TYPES.each do |shop_type|
      define_method "nearby_#{shop_type.pluralize}"
        @nearby_type = "#{shop_type.pluralize}"
      end
    end
  end

 ...
end

class Shop < ActiveRecord::Base  
  SHOP_TYPES =  %w(cafe restaurant)
end 
```

然而，它给了我`syntax error, unexpected keyword_end, expecting $end`最后的`end`归属`class ShopsController < ApplicationController`。我试图保持代码干燥，这样我就不必手动编码：

```
class ShopsController < ApplicationController
  ...

  def nearby_cafes
    @nearby_type = "cafes"
  end

  def nearby_restaurants
    @nearby_type = "restaurants"
  end

 ...
end 
```

我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:34:18.830

`define_method`需要一个块，你错过了`do`你打电话的那一行`define_method`

# java - 让spring上下文变量指向webapp中的实际外部上下文

> ID：13015738
> 
> 赞同：1
> 
> 时间：2012-10-22T16:32:28.533
> 
> 标签：java, spring, environment-variables, apache-camel

我目前正在将我们基于 Apache Camel 的应用程序修改为 Tomcat。由于业务需求，我们必须在单台机器上托管多个应用程序实例，每个实例都有自己的一组配置。以前配置文件与应用程序捆绑在一起（因此可以从类路径轻松访问），但现在它们将在某些绝对路径中分开（如路径/实例 1、路径/实例 2 等）。我想用 Spring 实现的目标：

*   将实例配置路径导出为初始 spring 上下文文件中的变量，因此我可以通过 ${instance_conf_path} 引用它（目前我在属性文件中有它，通过 PropertyPlaceholderConfigurer 读取）
*   在提到的初始上下文中使用导入的真正的弹簧上下文（它们在逻辑上是分开的）
*   由于该路径也用于 Apache Camel 路由的少数部分，因此我也需要在那里使用此变量（这应该根据 Camel 的手册工作）

Camel 2.10.2 在传递依赖中具有 Spring 3.0.7，但在阅读[本文](http://blog.springsource.com/2011/02/15/spring-3-1-m1-unified-property-management/)后，我手动将 Spring 3.1.2 放入 maven。但它仍然抱怨它不知道变量。有什么建议么？或者您是否知道在 Spring 中存储所有配置并在应用程序包中仅设置此配置的路径的更好方法？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:31:28.577

您是否考虑过使用环境变量？您可以从 web.xml 中引用它：

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>
    classpath*:spring/sharedContext.xml,
    file:/${APP_HOME}/spring/specificContext.xml
  </param-value>
</context-param> 
```

如果 Camel 需要任何特别的东西，您可以在适当的 APP_HOME 下包含特定于实例的配置。

# wicket - 如何在不运行 Wicket 应用程序（即没有 RequestCycle）的情况下从 PageClass 和 PageParameters 获取 wicket URL？

> ID：13015743
> 
> 赞同：1
> 
> 时间：2012-10-22T16:32:57.777
> 
> 标签：wicket, mount

在我的项目中，有其他（非检票口）应用程序需要知道某些域对象的 URL 表示（例如，为了将链接写入`http://mydomain.com/user/someUserName/`通知电子邮件）。

现在我想在我的 wicket 模块中创建一个 spring bean，在没有运行 wicket 上下文的情况下公开我需要的 URL，以便使其他应用程序依赖于 wicket 模块，例如提供一个方法`public String getUrlForUser(User u)`返回`"/user/someUserName/"`。

我一直在网上和通过检票口来源跟踪一个完整的工作日，并且没有找到一种方法来检索没有当前 RequestCycle 的给定 PageClass 和 PageParameters 的 URL。

有什么想法我能做到这一点吗？实际上，我需要的所有信息都以某种方式存储在 my`WebApplication`中，我在其中定义了挂载点和页面类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T13:45:11.600

**更新：**因为下面的代码在某些情况下会导致问题（在我们的例子中，是由 quarz 计划作业随后执行的），我深入研究了一些，最终找到了一个更轻量级的解决方案。

优点：

*   无需构建和运行 WebApplication 的实例
*   无需模拟 ServletContext
*   完全独立于 Web 应用程序容器工作

魂斗罗（或不是，取决于你如何看待它）：

*   需要从您的 WebApplication 类中提取实际安装并将其封装在另一个类中，然后可以由独立进程使用。那时您不能再使用 WebApplication 的便捷`mountPage()`方法，但您可以轻松构建自己的便捷实现，只需查看 wicket 源代码即可。

（就我个人而言，我从来没有对构成我的 WebApplication 类的 95% 的所有挂载配置感到满意，所以最终将它提取到其他地方感觉很好。）

我无法发布实际代码，但查看这段代码会让您了解应该如何安装页面以及之后如何获取 URL：

```
 CompoundRequestMapper rm = new CompoundRequestMapper();
    // mounting the pages
    rm.add(new MountedMapper("mypage",MyPage.class));
    // ... mount other pages ...

    // create URL from page class and parameters
    Class<? extends IRequestablePage> pageClass = MyPage.class;
    PageParameters pp = new PageParameters();
    pp.add("param1","value1");
    IRequestHandler handler = new BookmarkablePageRequestHandler(new PageProvider(MyPage.class, pp));
    Url url = rm.mapHandler(handler); 
```

* * *

**原解决方案如下：**

在深入研究了检票口来源的内容后，我能够将这段代码粘合在一起

```
IRequestMapper rm = MyWebApplication.get().getRootRequestMapper();
IRequestHandler handler = new BookmarkablePageRequestHandler(new PageProvider(pageClass, parameters));
Url url = rm.mapHandler(handler); 
```

它可以在没有 current 的情况下工作`RequestCycle`，但仍需要`MyWebApplication`运行。

但是，从 Wicket 的内部测试类中，我将以下内容放在一起构造了一个虚拟实例`MyWebApplication`：

```
MyWebApplication dummy = new MyWebApplication();
dummy.setName("test-app");
dummy.setServletContext(new MockServletContext(dummy, ""));
ThreadContext.setApplication(dummy);
dummy.initApplication(); 
```

# vb.net - 从未绑定到 datagridview 的数据集中将行添加到 datagridview

> ID：13015748
> 
> 赞同：0
> 
> 时间：2012-10-22T16:33:19.253
> 
> 标签：vb.net, datagridview

我有一个包含 3 行的 datagridview (DGV)。我想将 MySQL 查询的结果（4 行）添加到 DGV。查询的结果放置在数据集 (DS) 中。将四个 DS 行添加到 DGV 的语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:55:38.377

您必须通过循环添加数据集中的行。

```
Dim myConnObj As New MySqlConnection
Dim myDataSet As New DataSet
Dim myDataAdapter As New MySqlDataAdapter
Dim myCommand As New MySqlCommand

myCommand = New MySqlCommand("Your Query", "Your Connection")
myDataAdapter = New MySqlDataAdapter(myCommand)
myDataAdapter.Fill(myDataSet, "list")

With myDataSet
   For i as integer = 0 to .Tables(0).Rows.Count - 1
       DataGridView1.Rows.Add(.Tables(0).Rows(i).Item(0).ToString(), .Tables(0).Rows(i).Item(0).ToString())

'.Rows.Add(Column1, Column2, etc...) the number of column you add should match the column count of your DataGridView

   Next
End With 
```

# java - 从 Java 中的存储过程中获取结果

> ID：13015749
> 
> 赞同：2
> 
> 时间：2012-10-22T16:33:19.843
> 
> 标签：java, oracle11g

我最难从 Java 运行时环境调用 Oracle 存储过程。我正在调用的存储过程有 2 个参数 1 输入和 1 输出。这是我调用存储过程的方式...如何从 Oracle ref_cursor 获取结果集

```
 ds = (DataSource)initialContext.lookup("JDBC/EPCD13DB");
                conn = ds.getConnection();
                callableStatement = conn.prepareCall(storedProcCall);
                callableStatement.setString(1, input1);
                callableStatement.registerOutParameter(2, OracleTypes.CURSOR);                      
                callableStatement.execute();//(ResultSet) callableStatement.getObject(1);
                ResultSet rs = callableStatement.getResultSet();
                while(rs.next()){
                    Provider tempProv = new Provider();
                    tempProv.setResourceId(rs.getLong("res_id"));
                    tempProv.setFirstName(rs.getString("First_Name"));
                    tempProv.setLastName(rs.getString("Last_Name"));
                    tempProv.setMiddleName(rs.getString("Middle_Name"));
                    ObjList.add(tempProv);
                }
                rs.close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:36:01.453

您应该能够检索`ResultSet`：

```
 ResultSet rSet = (ResultSet)callableStatement.getObject(2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:37:13.313

这对你有帮助吗？似乎您必须在查询结果集之前调用 getObject 并将其转换为结果集。

信用:: [http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-cursor-example/](http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-cursor-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:48:07.930

我相信它只返回一个输出（`oracle cursor`）

```
 ResultSet rs=(ResultSet) callableStatement.getObject(2); 
```

然后为里面的记录迭代你的游标结果集：

```
 while(rs.next()){
                Provider tempProv = new Provider();
                tempProv.setResourceId(rs.getLong("res_id"));
                tempProv.setFirstName(rs.getString("First_Name"));
                tempProv.setLastName(rs.getString("Last_Name"));
                tempProv.setMiddleName(rs.getString("Middle_Name"));
                ObjList.add(tempProv);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:09:39.140

在spring框架中获取数据库游标结果很容易实现。它有内置的类，如 maprow、storedprocedure 来服务于这个目的。PFB 链接

[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-simple-jdbc-call-1](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jdbc.html#jdbc-simple-jdbc-call-1)

# php - PHP $_SESSION 在谷歌浏览器中不起作用

> ID：13015754
> 
> 赞同：0
> 
> 时间：2012-10-22T16:33:22.283
> 
> 标签：php, apache, google-chrome, session

我最近创建了一个站点，允许学生登录到一个门户，允许他们上传与不同主题相关的文件。

最近一个学生告诉我，我的网站不能与谷歌浏览器一起工作，他得到的错误是“这个网站有一个重定向循环”。

有人可以在这里看看，看看我在谷歌浏览器的角度做错了什么吗？

PS 该网站适用于所有其他浏览器。

```
<?php
session_start();

function loggedin()
{
 if (isset($SESSION['myusername']) || isset($_COOKIE['myusername']))
 {
        $loggedin = TRUE;
        return $loggedin;
 }
}

if (loggedin())
{
   header("Location: login_success.php");
}

if(isset($_POST['submit']))
{

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password="password"; // Mysql password 
$db_name="data_base_name"; // Database name 
$tbl_name="users"; // Table name

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password'];
$rememberme=$_POST['rememberme'];

// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);

$encrypted_mypassword=md5($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$encrypted_mypassword'";
$result=mysql_query($sql);
mysql_close();
// Mysql_num_row is counting table row
if(mysql_num_rows($result) == 1) //user exists
{
  if ($rememberme=="on"){
      setcookie("myusername", $myusername, time()+7200);
   }
 elseif ($rememberme==""){
      $_SESSION['myusername'] = $myusername;
   }

header('Location: login_success.php');
exit();
}
else {
echo '<div class="alert">Incorrect Username or Password!</div>';
}
}
?>

<?php
// DETECT MOBILE DEVICE
//session_start();
$user_agent=$_SERVER['HTTP_USER_AGENT'];
$iphone = strpos($user_agent,"iPhone");
$android = strpos($user_agent,"Android");
$palmpre = strpos($user_agent,"webOS");
$berry = strpos($user_agent,"BlackBerry");
$ipod = strpos($user_agent,"iPod");

if($_GET['mobile_site'])
    {
        if (strcmp($_GET['mobile_site'],"false")==0)
        $_SESSION['mobile_site']=false;
        if (strcmp($_GET['mobile_site'],"true")==0)
        $_SESSION['mobile_site']=true;
    }
if ($iphone || $android || $palmpre || $ipod || $berry == true)
    {
    $_SESSION['mobile_device']=true;    //

    if (isset($_SESSION['mobile_site']))
        {
        }
    else
        $_SESSION['mobile_site']=true;
    }
else
    {
    $_SESSION['mobile_site']=false;
    $_SESSION['mobile_device']=false;
    }
?>

<!DOCTYPE HTML>
<html>
<head>
<title>Secure Customer Login</title>
<meta charset="UTF-8" />
<script type="application/javascript" src="scripts/bubble_bookmark.js" charset="utf-8"></script>
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<?php if($_SESSION['mobile_site']==true){ ?>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<?php } ?>
<script type='text/javascript'>
        function navigator_Go(url) {
        window.location.assign(url); 
        }
        </script>
<script type="text/javascript">

var addToHomeConfig = {
    touchIcon: true,
};
</script>
<link rel="stylesheet" type="text/css" href="css/reset.css">
<link rel="stylesheet" type="text/css" href="css/structure.css">
<script>document.createElement('footer');</script>
</head>
<body>
<center><img src="/images/logo.png"></center>
<form class="box login" name="login" method="post" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>">
    <fieldset class="boxBody">
      <label>Username</label>
      <input type="email" name="username" tabindex="1" placeholder="Email" required="required">
      <label><?php if($_SESSION['mobile_site']==true){ ?><a href="javascript:navigator_Go('recovery.php');" class="rLink" tabindex="5">Forget your password?</a><?php } ?><?php if($_SESSION['mobile_site']==false){ ?><a href="recovery.php" class="rLink" tabindex="5">Forget your password?</a><?php } ?>Password</label>
      <input type="password" name="password" tabindex="2" placeholder="Password" required="required">
    </fieldset>
    <footer>
      <label><input type="checkbox" tabindex="3" name="rememberme">Keep me logged in</label>
      <input type="submit" name="submit" value="Login" class="btnLogin" tabindex="4">
    </footer>
</form>
<footer id="main">
  &copy; 2011 Fixnode Computer Services.  All rights reserved.</a>
</footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:30:04.413

`if`在函数语句的表达式中，`loggedin()`您应该使用`$_SESSION['myusername']`而不是`$SESSION...`注意符号后面`_`的。`$`

# eclipse - 在 Eclipse Juno 中隐藏浮动窗口

> ID：13015758
> 
> 赞同：4
> 
> 时间：2012-10-22T16:33:47.350
> 
> 标签：eclipse, keyboard-shortcuts, eclipse-juno

在 Eclipse Juno 中，如果我在最大化的 Java 编辑器中编辑 Java 文件并运行单元测试，JUnit 视图会显示在浮动窗口中。

![带有浮动 JUnit 视图的 Eclipse Juno 屏幕截图](../Images/4f991b3f1e78675fb2b81cad79caea46.png)

Java 编辑器保持活动状态，JUnit 视图隐藏了我的一半屏幕。如何使用键盘快捷键隐藏 JUnit 窗口？

我使用了 Juno Service Release 1，Build id：20121004-1855，它与 Juno Service Release 2 相同，Build id：20130225-0426。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T09:40:09.810

我反过来 - 使用键盘快捷键激活编辑器。

默认值为`F12`，我发现我懒惰的手指移动得太远了。相反，我将其反弹到`Ctrl + ;`. 它很容易接触，并且没有其他 Eclipse 快捷方式绑定到这个组合键（至少在我的设置中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:03:56.243

请确保您使用的是 Juno SR1。SR1 中有一些与浮动窗口相关的修复。`Esc`对我来说，JUnit 窗口只是通过点击或再次聚焦编辑器而消失。

为了减轻您的痛苦，也许您还想在 JUnit 视图的视图菜单中选中“仅在错误/失败时激活”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:46:37.033

[报告了错误 391808](https://bugs.eclipse.org/bugs/show_bug.cgi?id=391808)，即单击 Java 编辑器时快速视图未折叠。我刚刚评论了这个问题的特殊再现。我看到与您使用 Juno SR1 相同的问题。在按下之前，我必须实际单击 JUnit 视图`Esc`。

# objective-c - Objective c - ios base64图像字符串解码

> ID：13015762
> 
> 赞同：3
> 
> 时间：2012-10-22T16:33:58.413
> 
> 标签：objective-c, ios, uiimageview, ios6, base64

我想解码正确的`base64`字符串图像（我可以打印为 html `<img src=... />`）并在`UIImageView`.

```
[Base64 initialize];
NSData *data = [Base64 decode:img];
cell.image.image = [UIImage imageWithData:data]; 
```

我尝试[了这个](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php)解决方案，但似乎在 ios6 上不起作用（我看不到给出该代码的图像。当然我导入了`Base64.h`文件）。

我的 base64 编码图像：

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABOCAYAAAHAyqHQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAG2YAABzjgAA47MAAIZgAAB5jQAAz5oAADF1AAAdKk1oIhIAADlCSURBVHjaPMoxSwJhAAbg987vQkXQEqELNR1sMZ2zhqbMf+Bklw3nEBWi0CKJbo0OiZttQsIJXU4NLgoNLjpc+QVCeA4mYgmBCnkNYsOzPawsy1ipVqsQBAFXF5d7qVQKlNJ/7GQywUq9Xj/07HjgcrleIpEIut3uP3bX68VKr9c7abfaB/l8XpMkCYQQEI4D4Tiwg8EnVn6nM10ykWhIFYlxu932p0f5xmQwwmQwgrU77LCYzbCYzYgnk6eh45Cm9vvo99T9eDye5XkePM+DBYDXzhuK90UsoCGdzTBOpxObW/zDdD7DWTSKzjtdRgCABhBC4Pf5tofDIZrN5rmiKNARAgDLyDAMKKVQVRWtVuujUCjAZrPdNRoNLBYLaJoGdjQaQa/Xr4+/v9q1Wi1DKb2OxWIbwWAQ5XJ5Tta450qlAtbhcMBqtY5LpZI/EAikBUG4DYfDiiiKA47jfnK53JEoivgDAAD//3TRPUsCYQAH8P9dlvWgq1NQURxqLzhGUxAiDoLg0ni9XZPQFwhNuHqewWwObsrAwSC1G0Mk0JYTJ4fqxgoHucGGPI+eJq2Qfl/hJ/6eMQwDezu7eH99+7MyNkMp9YRCodhVPo9IJML/nclkMh/nuVw5HA5D0zRhuDI2IwgC0ifpzUajDuVQ4cMVzwyB6HJNjGbO1NN1xtg1owx3pcr0cGXK7YZoNJuo1Wr4Ase+cvDo9/tnV9ZWUaqU+592H71eDwNn8DPDOUehUIDP57tIJpOLnU5nq91uj+JEy7KWOefQdR1erxfVavVIVVUzHo/fm6YJzjkIIRBbrdbx3MK8VCwWXwKBwKQkSTeMMXS7Xdi2rdyWSxvRaDQmplKpbcdxnnRdX9I07YEQYlFK5Ww2+5xIJC5lWa4Hg8HKNwAAAP//bNNPSFMBHAfw73vzTZ2XDZ/09DUdgkiLKR5W4Q7PuUaBo1Yrln96U8YTog566OAxCC+12UWGRNncFqYHDxvyZh3XElMKttA5wmSKSI5Q8oHszdfRHPvB5/g7fPn9vucuU9qfZDJJm81msUnfqPhf+i6vfl2tGBsbMy0uLlbFYjGUQ2YyGZQTDAZnaZo+uMiyN/V6fUyW5R/hcHhkbW0tVVNTQ1IUVdHc3IxSZJO+EeWkv313+3w+1NI0cHqqeffmbXYpHn/i9XrB1jdIy8kvVZ+WPqIU+TObRTkjo6MEP/AQ9133YGwzJUKz71sEQTDU1dKYnJx8VFRO//7OH6AUeevuHagq1bjANoCzWmG12WC12dDe0YFIJIJ0Oo3W1ta4JEkaqlJtX1hYgCAIgUHegyHPIIY8g+jv7YOlsxMOh+PscUiSRCKRQHBmBgoBKATg7n2Ajc3MK51OlzQYDNLx8fFqbR19W1yKo1CUUSjKEAQBsiyDVKnOqv//ZDY2EI1GodVqoVarUV1d/Wx+fh7T09M4Ojq6wbLs593dXYRCIUSjURAEcW6fHB4efk3TNDYzm9jf3+8nCGKZ53k4nc5fXV1dWF9ffy5JUtbtdqvsdvusKIoHDMPA4/FgampKYRjmQy6X09Uz9Zibm3tKhsNhwWg0otvWDfPVK5G+gf5rW1tbRCAQMPA8j56ensccx7Xk8/miKIqgKAq5XI7w+/0YHx8nuq/b3Kb2tj8FuYBUKvXiXGSNRgOapnFycqIcHh7C5XLBZDKB4zhMTExgZ2cHFosFTqdTcTgc2Nvbu6TVarGysoLt7W0AwD9CyzWmzTKK4/++lEtNoJP7RUi5Sxg4qZRI+cLsRMFgIgbHZZgNV6cTBELUtAPTBqoIMgIRCFsqHzBDybjoqoEgkpg0uhowpbztCgQC7H1bAi33AlpePwAba2Ge5Pfl+XBynuec88tz6qaIxWKIxWLcun0bfXd7WZcKCrOmp6ad3ObkOjwlZDIZvlAomI6Ojk6hUDha91XdNyaTye2pCY/L8zgqlcre1NQE1U/3WCkpKe+azeat8vLy64WFhbttbW11bDYbJ0HQNA1H1Gr1eY1G45KZmQmxWIyhoaGJ/f19T6PR+HxPTw/LYDBcDQ8PR1hYmBPEBZEIjuTk5IzodDpQFIWHNLVO0/TZ7u7uqeeCQww7OztQKpXeC4uLoGjaCcL4wAhHvq5vUF29fGXPx8cHNTU1Xq4uLthcXw/w8fNFf38/Pvrw+jQ5oQsnJ3RwhOCeOQNHJFJpVkhIyG8BAQHg8/mov9kYcDE/n6XRaNDT08Osr69HCgSCWYFAAEeIMY0Gjvw+OooahSIj48Kry5998mlTUFDQ0s7eLp7x4AD7DJJe4v+o+uVnnAQRGROD8yKRE15eXggMDLSNj49/3NjYeJYkSajV6sLc3Nz4psabb753pRjH+eD9awfG3tzahFY3gc7OTjAM8wQVFRWhMpmMJZfLdX5+frIXXjzXtbGxQdrtdhzBMAyKiopwt68Xbm5ujwf7cFweqUv/wID7f2mwsbWJ4eFhaLXaz8fGxvCQph6pCwQLIyMjcHd3f2yb07bE5cBvz87Nzb2Snp4OuVwOiqJqD89PDaeER9cdGBi4k5SUJORyub/K5fI3FArFt0KhUOrr63uOJMlgkiSh1Wr/P+G/e/+gubkZZWVleTMzMy7z8/OS4uLie9HR0ZcHBwdzAwMDZ0JDQ6na2lpER0Q6J3R1dcXy8nLCUWUsFgvb29sgSRJ9fX0D9fX1CpvNBpPJhOTk5B+Gh4c3JicnD9+NBYIgDj5zxEFthEql+rKoqGjC09NTSdN0hsViQUJCwjtsNhsikehWXV1diVQqBZvNNrS2tu4sLS0xVVVVq9XV1bhRfQO9vb139Hp9o0QiYSQSCUEYjcb8kpKSru0dm9frWZnqqJhocLnc7wG85u3t/XdcXNyf7e3tYVarld3Q0OCxtraGlpaWiI6Oju8kUiku5ufl8SLCXdPS0v4oKyuzEqmpqWFcLrcwOzv7bbPZvLG4uAiTyUTQND04OTnZZjab7+/u7s4HBwfHcjgcdHd3E1ar1eLh4XFpYWEBq6uryMrKKklMTHxZKBRyn2hKcnIyeDweKIqqKSgoYFJSUvL1en27zWZDZWWl3WKxQKlUMnw+H/7+/pK4uDhERkae3GW73Q6SJGEwGJCTkyOZnZ1FfHx8V2lp6TUOh4OpqSnweDxERUVhZWUFIpGoRq/Xv7W1tYXY2FgwDAMA+I8T849p+szj+PtbWmilULG0UFNGKT8KeICIKZJtYMbwB9skYQjGkqjnQcblNJ7hxp2rEVQiN8aUqXhW8IBF4ZzHcgGLiOGHoNPqOFjFIhRERKlUpb/gW/m2/d4fu3HLTVy3J3n9/bzz5Hk+7/f7WdRTXpfK8vPzodFocOLECRQVFSnEYjEtlYTQAQIhvUaeSH9a9lduyYFiqM6ooFQqodfrMTIy8qtgEASBX4KHhwcePXp0XigUor+//+3g4ODG/fv3h5lMJjQ3NxNZWVmEUCi0pb/3HrjeXPT29rYlJibSGzdunOBwOFjMiha1qMU871XY7XYoFAp627ZtOyoqKuDr69sjCgh0/iZ6xWhRUdHv9Xr9whtraWmGWCzG3NychM1mg6KooJSUFLqhoSFzamoKT548cQsGRVFwFwCRN27cICIjI1/m5ORALpfjn183wfj8GRoaGj5WKpV0fX09XVdXRw8ODp7lcDjg8XiyxsZGor29nZDL5RWdnZ1N3d3d6OzsdAvGqpXxcJfJiUfDyUlv0tsUuUaFQmERCARwOp3rlUrlU8vzFxLC6YLz5Tx82JzZrMwPf+vt7Y2dO3diYmICl9WtCA2RXlDu+wSy8AhER0a5BaO2thbu8uLFC56HBwMBAQGTpaWlvgaDARFh4W0ZH2wKSHk39aiLQZiOHf+CyFZs5c6Scz5Xrlx54+HDh29fvXpVyhf4v1VXV3crKyuLHhgYwJ07d9yCIZVI4C6BQuHMwcOHlmRmZsaz2Wz/8bEHWL16NWiaRkSUrPx0tcrPm+cDkiRhtVqtUql0QhYh60lYlbBsv3J/zzw1j/LycsLf3x8/tNKfgxEcEgJ3eUMigSRESkqkUs/QEKmpt7f3cn5+Pn3+/Hl6ampqrfqSGrO2Wfx7oB8dHZ2wmi14abeHBonFd1rVauLQ4cOECzS8fbhuwRf4gyENC4Xx+TPcu6/DU+M0goKCIBAIFsXHxwd8Pn9epVI5tm7duqG4uJigKMoBGs7p6WmW0WjkDQ0N6b799s7DwsJCWqVSnWxpaWE4nU68+04q1ianLMqGdeuRuvYdmM1mrFixApWVlf+b/AQI0DSN/u8GUFZWho6ODuj1+oWJ/v/phMViwW63w4vthbKyMlZ8fPyFoqIiSi6Xmzdt2hR1pro6+NPyckImk20gCMLFYrFemVj6+vrQ3t6Oubk5bN++Hff1w2D+92PntRGJyWRienoa9V9+uZDDfpzHPtyche/uamG12TDvoKBWqwMbGhrix8fHk1taWsLKysqY94fvIzFpDZ4YptB8qWUhq/04s506dQqLiX+twNctJpOJc+fOVaxatUrA5XIhEolCRSLROovFMtrV1XVNKpX2Jycnp6WlpcFiscDlclWy2WzWr9nrZwUO6XRYwuEs3EE/Pz/Ex8fj5s2ba9ra2ozV1dV/J0lyNCYm5l98Pj8xIiJic3R09Bo/P7/WgoKCEzab7em6devqCIKgzGYzzGYzLBYLRkdHQc7O/qRj/2KBBEHAbDKjrq4Oe/fuhVarBUmSaGpqevPo0aMeMzMzR8bHx1FfX2+Wy+XtQ0NDXz1+/Pgui8VCQkLCH2ZmZj6zWq19MpkMg4ODaGxsxJ49e3Dv3j2AduMEKYoilEolHR4eHqTT6fK6urrg7e3daDAYwrVaLRdAH0mSiImJwbNnz/S3b99+v6+vD/v27UNcXJyjtrb2QUhICAYHB2m9Xo8dO3Z4j4yMUBqN5pbD4fiMy+WWq1Qq2m63g8PhBGm12u7Q0NCvdDrdn62zNvB4vPbq6uomkiQRHBysmpiYQFVVlfn06dMbRCJRD+PYsWOfJCUlfe3h4fGIzWafyVUoQIMmQ8PDZu/pdJTT5XSZzCbcvXv3IwaDcfXkyZPNQqEQlZWV2LJlS252dvZMTU3NP8Ri8eWMjAw4nU6XVCrVt7a2VqWmpn48Pj4OJpOJsbExHDlypL2kpGS9QqHYrNFo/lLx+edgerKsJQdLMrNzcl4yWSyzSCTCrl27eE6n06Ojo+MtxoEDBw4vX748UyKRwGg0ggawMT19x7Jly57s2r3r5e/y8lb7+PrC09Pzb3l5eR+VlpYSRqMRPT09iIqKOldVVcVNS0vL2b1798br16+jra2NVCgUUU1NTXV8Pt+VkJCA0tJSIioqCsXFxZHDw8P2oaEhHD9+nKdUKpGenp45otfjm5vfeIWFh/0pKCgIBoMBBoPhUkZGBsH4oSzNzc3B4XCAIAg4nU4QxPdzkSRJUBSFlStXore3t5imadhsNmg0mhKNRhPa09ODyMhI1qFDh8wSiQR2u313d3d39IULF/K8vLxQU1Mzee3aNRQWFj6IjY3F2bNnB6empoRjY2OeGo0Gnp6e3/crhwPz8/NwOBygKGqhwL3ykdA0jaVLlyIiIgJxcXEIDAxEYGCg161bt1ZYrdaDbDYbk5OTq8VicWpubi46OjoOFxQUhKrV6iKtVjsgEomy+/v7/3jx4kXw+fxRgUCQJJPJOsfGxmAymXzNZvPa5ubmJdHR0YiNjUVKSgqsViskEslPjOE/tJp7VFNXvse/+5wQQhIkgBJehRAwCCJ4ERit0oGCVXyU1haKratXqjZY5VZdDLaiVlmoSFup5eHMVaGCYKu2M9ar2AoGbq2V8rKggCAvRR6GIISQF8k594+Kq66pNjpz91qf/3JW9tr7nN/ev8/v99RX/tLSUrz++usoLi7Gpk2b4Ofnh8x9mfjm9Nc4/z/nXEKC57x1q61dcKfnNhITEyGXy9He3v6H+umZtNSThrOzM6RSKQDo/vbffzPL5XI2MTGxLzw8HOfOnRs/efrUw+2jaRpPm1pM8qwTnObv74+GhgZXtVrNI4RQPB4PS5YseSEhIeECy7K2jo6OQV1dXdv4fD4yMjI2d3V14XE2+0k8ddJkZWVFh4WFzbt8+TJHJpM5btmyhQj4gjuxsbF7w8PDfyCEqDgcztjUqVN/mTp16uEvvviCLSsrO9DU1CQJDAzEzJkznwpq8vixBIPBgA0bNijr6upeZFnWJHZyaoqOisapkyclYrF4f09PD8bGxkARCjdv3kRaWppy7dq1H9A0jdzc3K7jx4/TbW1t/38rWFNTs0omk7WGhYVtIoRAJLKHXqeDTqdjqqurj0ilUnz55ZdgGDM0Gg0GBgbcjx8/nkkIgV6vx6FDh4xCoRC2trYWQ1ma/imVSrS1tUWFhYVVLl++HL6+vjBOGJGeno5Nmzahvr4+jhDiTtM0lENDcy5fvpw9PDzcm5KSQhQKBXF3d/9h69at3gBs7O3tYSnUk27Pv2XKlClIT09PjI+PTzObzejs7ASHw4HUxxtFRUUcDoeD7du337l48SJ7+PDh2t27d6dOBn+DwYCSkpIXTp069fLZs2d133zzDSyFmh0UBEuYExwMtVqNvLy8gszMTHA4HNA0zWtraysNCQ2dmAwneoMBmfv3R1pxrCb8fWeAoigolUr09vZix44dOdHR0Zg7b57FUBShYCln//6PtJ9/uPKGQqFgi4qKNtjY2FA8Hs8k5PPBt+KCMUxAwLVG5XcXvVmwmGDMyMnJQUNdPVpuNON4UfEnunEt1PdHLIZqbW2FJXR2dnIPHzmcwYK1CQkJWWtjY5MHQBseHv72kiVLiM5oAGgywRKMflf+/ZE7d+6EEEIgFArxw4+X4efnZ19XV7eip6dH1tvbC0uhrl69Ckuoqqoyzpjh16pWqxEXF3fipZdeAk3TMOj0cH/uOWi0Wnyemzs36+OPRf6zZpEdO3ZAp9M5G41Gb7VaLXlXLj9vNBolZWVlyQ9uKxZBLVq8GJbC4XBGkpKSPMrLy/fPnj0bYicnvLEyAfEJb8Dd06PB28e73k4kAsMw4HK5tUajccDJyamovb29i2XZuRqNBvv27Ut++eWXYSlUe2srLGVJTMxGvV5/Z0F4eHLHrQ730pJSXG9swtA9JZWxJyO4b6Af4zodCCGwtbUFyzDYmrp1PiFEq9Vq8fz8+eeqKqtQU1NjMdTY2BgshWXZugV/fgEzpsvw/XffrTMajStpmraNfSXWLJV4wW6KHby9pWj45Rp2f7QLZpMZikuX3hTyBaqdH+309PD0yL+nUuLekOVQAYGBeBq41tZwcHDgOjs7F548ebL03XffVXO51jh16hQUCgV0Oh20Wi3UajWUSqXTzJkzv9y6dauHbPr02zNmzDjv5eUFS/Dx8cH06dNBeXlLoVQNQSwWQywWw8nJ6bFMmzYNIpEIpSWlE9XV1duFQiF4PB4oikJdXV0mh8OhJ60DRVHYsmXLoIODA0NR1AJvqTdeil6IqMgXn8iLEZGIWRwDAoLBwUFQLMuipaUFfKEANbU1j9RLHgehCOvv77/W1dWVJCQkbGVZBgKB4IPh4WFzYWHhLnt7+85169ZpRCKR9urVqzFWVlaXJ8X642AYBhwOB4SikP1ZNkxm0z/fB3vv3sXdu3fR2Nj4sPTxR2Px4sVZi2NixFlZWVi+fDmmT59eHRER8cW7SXLPt99+W2BnZ1f2pOdpmgZFUcjOzkZycjJYsA8vur+buBNCcPToUfT09KCxsfF3M38rDgeEELi7u4MxMzAajfdYloVQKERERESZo6NjOsuyqsn8gsvlPiKEfqtQtm3bBp1Oh76+PvD5fMvNwujoKI4cOQJrPu8RcWRtw8O4Xgd7Rwc4TpuKlrZWREdHY9asWeDz+aitrYVer0djYyOGhlWgODTy/3oIFYpL/ySPurq70dnZ+ezqgxDyu3picvtZlp0sF3Bpmpa1t7fPb21tDeZyuVMnU9cnrSD5d8ijP9Bza06cOLG9oqLCKicnp83f3//HNWvW1AsEgqHw8PBlarU6h7L0Zf53TtBkMjnX1tbuXLly5dE9e/ZkNDU1Xbxw4cKivXv3oqCgwMPBwWF3VFRUtUgkSlYqlZK+vr5tf2SxnnmLJ7vTJmlpaflTYGCg3VtvvZWekZHxM8MwcHR0vOvo6Gjt7OwMW1vblUKhcN/AwMCQvb29dVNT018lEsneS5cuHW5ubsZvUY+p/7UJcrlctDa3PAzUDg4OCA0NrXZxcVGdOXMmLiwsbM+BAwewcOHCuKtXr/ZIpdKVFy5caHB1dWX7+/udFArFfkdHx6j4+HhERESsc3FxgVQqhVAohLOzMwQ2/H99iwkhKL94EcXFxSgpKQHDMGAYZsjV1bXVbDZf9vX13TY+Ph4QFxf3S1pa2omcnJzvKyoq+M3NzX9Zv379pqGhoWPNzc1Qq39drVdffRXd3d3Q6XSW6EHL3kGK+vX4+umnn9Dd3Q0vLy/I5fImg8GQ3NPTs9fOzu66SqWCr68vKisr0dfXd3/OnDkp33777dqFCxe+4+HhAX9/fzQ1NT3SQ2DZf1MU+Hy+oKOjY5EV10owWXh/tE2AAcMwIITAaDTi4MGD2LhxI6ytrXetXr0aHA4Hg4ODmD9/Pr766it0dXVBqVRCJpMdaWpqwq1bt349th580L/tVZhMaSePwgdyANbW1r8+c+zYsVXXr1//zMPDo+rn6p93G41GDA4OGm7cuAGlUtnp4uLCFYvFCAoKsq2vr2eVSiX0ej3Gxsa2t7W1/e+DJsO/63S6A9HR0eBwOJ1Lly49fODAAVYikQBAkpOTU9yUKVOQk5NzNTQ09P3du3fruVwudDod3d7ezvb393M4HM7mj7Oy8Pnnn79ZVVX1aXl5+arKyspYqqSkpFgikayjaVofHBycYjaZQdM0VVBQsIDH4/G1Wq3RSypFcXFxXkRExE6tVmt75coVXLt2jTswMPDcA1U3Xl5ePlMsFsNkMnHi4+PXRUdH/+P06dNeWq1WSwgxJCcnTw0JCbmxZs2ag9u3bw9/7733PjGZTObU1NTF77zzzl07OzvV/qws6PV62eDgYCTDML+sXbv2DEVRFBITEzEyMgJXV1dMmCdAc2itRCK5rBnXjJpME5RKpcKPP/44r7u7O7ChoeGDgoICvPLKKy5paWlLCwsLs0Ui0duBgYFOGo0GhBCbs2fPzqIoam9ubm6X0WikGIZh/fz89O3t7XNu3boFf3//Th6Px+gMeoxrx6nX4+L2DwwO/GXnRx8hOjo6NzU1NWpsbCwjJyenjkpJSfGLjIxkKysrt5w+fbqCa20N1fCwzdHCAjAsa2ttY2PV0tISn5+fPy8/Pz+utLR0GwDcvn1b5ubm1lxRUbEpKSmJ6ezslFIUBYPBwFm2bFl7QEBATX9/P2bOnCkaHR21X7VqlUaj0TRfuHDhS7lcXldUVJTKsixHMz5u+0bCGwd+rqnxP3f+HA4ePLhRoVDEDA8P98TGxh6kli1b1rp69WoSGRmZnZqaGuXm5ob09HRub28vUlJSXHk8noGiqJMajWbo2rVryMvLIx0dHYiNjf1zY2Mj3n//faJQKPDhhx/aNTQ0YOPGjfZdXV36sLAwdHd3w9PT8zMvL68ijUYDd3f3Nz09PRM2bNgg0ev1cHNzMwUFBZ0khCAvL4+2sbFBVlbWrvHx8dLQ0ND/CgoKKqIIITCZTNDpdOzExAQIIZiYmABFUQ+9sZubG6qqqkhwcDBRqVSor68nV65cocbGxmBtbY3Ozk4EBARg9uzZ8PX1RXJyMrejowMGg4ESCATk9u3bdFlZGRUcHExGR0cptVqNGzduAAAYhgGARyr7DMNMVvgfHwcnf2QwGMCyLFpbWy/V1tayAHDixIkmd3d3/sjIyJ+8vLxw/fr1i93d3dNHR0exefPmyqVLl04hhIRRFCW9efPmC19//fWSRYsW2ZpMpoy5c+fasyz7H1qtFjdv3oTZbH62QC2RSBATEwOZTAY/Pz/w+XxGpVLh+eefh7u7+9jIyMhOuVxe7enpCZlMdr6goODwihUrbF977bXs2NhY9t69e9xDhw5RSqWSTExMGMbHxykrK6vb1dXVO1asWHEtPDwcCxYsQEBAwNMXE62srGA2m6FWqzEyMoKRkRHodDqBRqNZUlhYGHv//n2RXq+vLCkpScnNzc328fHJ7uvrm7Fv376x/Pz8j6urq/+zvLzcVy6X31WpVAkymWzDggUL7re2tro0NzcrMjMzcyoqKkAIgUAgAE3T8PHxgUgksmyCdnZ2eNDThIGBAfT39yMpKWluSEjI+XXr1p359NNP/aKios6HhIR8kpycvHn+/Pk4duyYs1gsRmRkpGzatGkH1q9ffzQ0NHR8+fLlSYmJibFarRYJCQm7kpKSzixcuHCjvb39tebm5ocmtaenB0aj8eGZPTn+j5rzjorqXNv+tffsmT2NoQ0gQxOpIihiA8UCImowMUok9gLRqNFgmpojRgWjxhqjomhsQREERawYFYgkIihjAZEOIr0MZXp//1BcOd85J98xmrzrfdb6rVnz59zzrL2f57qu+35tG+LPJJWSkpKwZMkSfPDBBygsLMSJEyewcOFCrFy5EnPnzvXy8fEZ+/XXXwd9svyT0GlT3w/csvnbz8eNGZsz0NunbaC3jzZqUWRCyplkz8J794nCe/eRlpqGxMRELFmyBDExMfj4449RXl7+RnbH326T/NmlVCoxYcIExMXFgcPhwNfXt4HP58efOnUqK/1C+vWCgoLc+Pj4XdXV1WO1Wq25TqdTZmdnv7d37974PXv2LLubf9em7nkdzwgjm8lkvjprqNVqQqlUsl4np/Q2+NsKSBCEjaWl5SoTExNuc3Mzbt261f/27du//vzzz1c9PT33Ojo6nmGQL67wPB6vNSYmxnXKlClUZGSk4OzZs7ZLliwJDggIiB82bFiLh4eHXKlQut2+fTs/MTFRU1VVlXH58uV1ERER9T/99NOy6upqvI658iaQfySWvCkGgwEajQZ5eXlfX758ufnhw4eRhw4dWlldXW1SVlb2dPny5YHjx48fFRAQcHh9zPrZ8+fPn240GjWzZ88OYzKZVc7Ozuh99/aecLVaHfR6PaytrYsmT548Ijo62o7NZuvi4+Pj9Hq91ZEjR+KPHz9+kM1mExRFQSAQ/KW8VnbwdZDJZOjp6eHu3bs3PzU1dcvixYujFy1aNLClpeU7vV4vNRqNUKvVIAgCI/0DYCcSYfasWen79++39/Pza3Z3d4ePjw98fX1x+vRpiMViGAwGXLt2DYWFhTA3N8fs2bOhUqn6lZSUjO494Jibm0MsFi8NCwszHD16NKa9vR0NDQ14/vz5XwLZ1taGvwKpVMpMSEjIKigoGB4SEpLs7+//g7W1NSIjI2Fqagpvb2/Y2NhArVAiPT0dFy9exNWrV5Genr5+/vz5z9PS0t6VSCQoLCxEd3c3mEwmmEwmWCwWmEwmSdM0zp07N/nixYsfzJgx47MdO3aMPHLkSP/JkydvlUql4PP5bY2Njewff/xxu5WVlcDV1RX/rbD7OpC1tbV429TU1KC0tPSj6OjoWfv373e0srLa8/z5czQ3N6Otre3VpVOj0aCiugp1z+tgYWkJkUiE4uLi0SYmJkhJSbl4/PjxfUajcUJZWdn3YrG4OHZTrC4+/oCxqqrqC4VCAS8vr2t8Pv8rc3Pz0yKRKM/Ozq50+fLl/9i5c+doiqJY/fv3v+fr67uaIIgeLpcLDofz1iFXrFiBt83KlSuxcuXKg/7+/jXW1taWFhYW/caPHw9HR0cMGjQIypcmSq/0am5hgQ5Jh+u9+/c3dHR0eBEEAYqi8OjRoxWHDx/+uaGhIfrx48cD+tj2KdyxY6f1kiVLdggEAqjV6ld3AgAoLS3Fo0ePwOVyf/3ss8/87969q01NTUVUVBTCwsIwderUtw4p65HibSOXypCWmobUlLOixR999EvB3fzFq7/8yn77ju0uz58/H9PW1jaZwWDwcnJyNt6+fVtz5MgR47FjxyoyLlzYSLNYLDabDQZJAkYjaBYLBr0eri4uaVELFo4Q8PltFEWBw2bDy8sLq1evxtVrV1FbW4sHDx6grKwMT58+RU1NTV1UVNSz8+fO42xKCs4kJf0lkP+vlvg2KC8vN8+/e/fq7l27nnGYLEHJo8fBDwvFz+uf1xedOnXK8f79+9fMzMzk77777saJEyeyNmzYQHzzzTdOY0aPXsYiqTZFjxSkEaApJgxaHUgj0FD3/IN9+/ZJKioqJtFsGiSDAb1eD6lUitaWVpSVlcFaaIVhQ4ZipH8A2lvb1vx4+MjRQwcPsq5nXkd1VTUqKyrfOqRKpcLbRqlUdloKhes4bLaMYlBQqdQYOmzo1fT0dO6nn356auHChTA1NQVJktBoNFAqVWh4Xl8nVygOCftY3zCQgEqngZ2T49Wp0943/3LN6iGhYe98SjCpC2dSUuLnzJ7z8MSJE+4sFgs0TYMkSSiVStzKzoK9gz1Onjz5ydWrV7+RSCRONE0vv379enJ+fr5dQUEB3jb/dRbldairq4Ori0u1tY1Ns1KlVJqamVbdunVrUmlp6dCX6jq4XC4sLS0xb+48DBs2FAEjR+KLL79E6KTJv7a1t+PDWbP+cfz48bCV0dFdA7y9xSZ8/j6RSBQZFRXZj8Fg+I4aNaq8pqbGMS4u7lZTU5MxIyOjJy8vTzkhNNR4J+/OfjabDalU2ufEiRObpk2b9u3IkSMb/l2L3ZtCTps2DX8F4eHh3YMGDbq+LiZm+qpVq1xjY2MFlZWVQrFYTKtValy5dBmZV69B2tMDnVaLX37JwaNHj0CQSN2wYePohQsXbm1qaUZHpwSGf5KiXwlcYLFYdevWrRu/c+dOe1dX1ywmk8nmcDgwGgGtRgtTgWnVvHnzXFhMVlFzUzM62jveOuSljAz8FaScOQPnvn1XMRiMzObmZvD4fDlN05n3Cu6Zx8ZuSu3o6Biu0+nAYDCg1WjBYrLQ2Niw7M6dOwf8/Uf8Wltbi5aWFjQ2NkKlUcHN3Q1ajQbOfftic1wcHO3sYS4wg7XQCv09PBtgMNaqFEoY9Qa9wNS0U6aUY8jwoacCRo1s5wn4MLM0/0sgX7ft6XUgCAI2trYYNXYM+tjaYso7YQh7553msHfCVmZmZiYlJCQYExMTTx04cODXAwcOGA8fPhxvZmaWdSEjAzdu3MCVK1dQVVUFka0IJ3/6CXfy7+JCxgUwKSbqGxrQ1t6Grq4uzu7du7eLRKKmVatW2a1fv55avmyZxe49u+2DgoK2tre3Q6FQ/GWQQSHjERQyHsEhIRg/YQLGBQdjbFDQGzMuOBiBY8ZAKBSCw+HA3Nyccfr06fmxsbGFP/zwQ61EInFhsVgoLCycU1lZOYrFYoFJMWFvb6+0srKCVCqFi4sLvLy8oNPpQNM0eDweLl26BGlPD5RKJc6ePbu+rKxsUVRU1Go/P7/v3NzcmkJDQ8kpYWGwtbFt4HG5ai6Hg7eJQCAAQbxotW1sbATJNzEBl8fDo6LHOJOSjF9yb4PmsF/Z3382rfv7xsCXQoCewWD85OXlNWTq1KnsLVu22Hh4eIQOHjx4q16vV1EMCiAIpKWlxaWmpt5vaWn50WAwuOj1emZ7e7ubRqMxA8Bj02y6rKzs/djYWElubm5sQkLC1JSUlONZWVlrSJIUyOVyg06ng5urK/wG+2Ggz8A3ZojfENAsFmQyGQQCARRKBYqKiv5Z8e39oQRBgKZpFBUXI/1iBjo6OqDVav/Jz3uTZTQaodPpAKBVq9XeCAgI+Mfp06c58xfMn8Zms+umh09POH/+/NDw8PCPaJquAqA1NTWtCAkJ+YLL5crUGo3q8tUrBwYOHJgxb968Ue++++4kNze3RZaWlt8ZjcbutyC7gSAIPH78GEVFRZBKpVBrNaisrkZpWdmLGvwuXPEfk/sEQYBBki/GbbS1Yf369ViwYAHEYjFomn51sX/dgvYGCnrtIr1OD61WC1tb2wtjxo5xcnVx3UIQBPz9/RESEgIHBweGmZkZ3djYuH7u3LnEiZMniNCJE+2mvv/+IiaTeUej0Rh7rZ8/s7hcLnQ6HeQve4GkUimio6Nx4MABpKamoqWt9d/mU17LXicIonfgB6RSKe7du4ebN29i6dKlOJN8Bmwu51/axH4Pg0mhW9oDvsAE08Knw0JoifuFhRjuPwJcPg+NTU0Q2dvBxcUFz58/x+7du5GbmwsOhwOdTqcnCEKt1WrR09MDqVQKpVIJSacEKrUaNn1sQJAk5Ao5nj59imd1z9D4u9EA/wkj+WLUwKxZszBz5kzcu3cPKpUKJEm+1sb4U4o0SZLoldPVas1/FfhpaWlBV1cX2Gz2i2iL0fBiBxr06O7pRl1dHezt7VFaWor09HRQFAUWiwWBQICcnBzk5OSAw+Fg586dKC8vR0dHBxRKBRwcHUGQBHqkUtwrvI+npaWoqa39/28KvGjiIUnytTMTbyUF9abLaDSCyWRCp9OxtVptoFgsjr5169YWLpcbN2fOnK/r6+tXJSYmrk1JSfm6sbHx8/Dw8H8oFIpvtVrtRiaTuairq2sARVHMP/Ic/471txbwZdgFra2tM5qamg4LBIJIAHypVPprSEjIgUGDBiX7+PjUMpnMltDQ0ANTpkzZNmnSpK2hoaG7DQaDjMvlPrO2tr6xcOHCU7NmzXoil8udsrOzv/rtt9/imUzmOAaDQfyfKyBB4A+fF71hQqVSOTwvLy9tx44dYU5OTqmzZ8/eQ9N05ZQpU9qFQiGys7OpxMTEo2KxOEAikVicOnVKdPz4cRQXFyMzM3PspUuXNkkkkgGWlpZ9mpqadFVVVbCwsKiMiIjYGRwc/InRaMwpKSlZLBaLj2m12j69L7o/giDJ/90CslgslJeVo6qyCnw+HzRN/wt8Ph/l5eWDXFxcOrdt2zZXpVJ119XVET09PU/z8/ODZ86cefKXX35BTEyMKjo6emtXV1dXWVlZ9/jx403mzp0LLy8vDB06tGbp0qUjIyIioqdOnXpu7NixaGpqmpCbm5tz7do1Q1FRkcHa2nra+++/f3jQoEGRWq3WrLKy0vz3A+RqampQW1uLZ8+evfheXQ2lQoE3zFm+WQF7c44qpRKtLa1QyBW9chbUajWEQiGYTCa8vLwe8fn8ip6eHlVwcDB1586d+ydPntyv0+lcpk6dGrd48WKkpqb6XblyxVOlUukCAwN5FRUV/SZPnhwUHx8/rrm5ebRYLJ6dlJS0Iysr6+OkpCThvXv3bvj5+Y2ztbWdcv/+/YqIiIj7H3zwAby9vUHTdCmfz+8UCATgcDgoLS1FQkICysvLkZ+fD5IgYGluCYqi/m0n/N/+DCQIAkyKQklJCa5du4acnBxs3rwZH3744Qvn6nfZYB8fn5xVq1YNOXLkyAq1Wr354sWLKw8dOhSkUqnE/v7+W7hc7lpTU9PvfXx8LjIYjGwnJ6ecgICA0waDYb1IJPpq+PDhCf369ZMaDIbVXC73GxcXl+tr16716+npaaqurkZHRwdMTEzQ3NyMkpISnD17FvHx8WhoaACDwXhxpiMI/Fc91n+mgAwGAzRNv9G/YzQawWAwwOPxIJVK8eTJEzx58gT5+fkQi8UoKChAYWEhMWDAgIaenp5oFouVPXz4cFhaWqKkpATFxcUwGAxYtWoVysrKsHDhQtTX1+PGjRtITk6GVCpVmZubb9fpdN+eOXOmz5EjR+TffvutrrCwEI6OjrCwsEBPTw961Z433WV/WECj0Qi9Xo+6urqInJwc8bFjx2rDw8M7165dq21qblpjNBjBZDItCIJYqtfrN1IUNZCmabBYLEej0bjWYDB8RZKko9FoBE3TvYazCYAVer1+rVqtNu/tIenq6oJCoaDq6+vnb9myJU6n0wXGx8dj+fLlcHR0hEwmGwFgO5PJnE1RFK3X68Hn8115PN5GjUazXqPR7G5ra9vc3t4+2dPTk3J3d9dPnDixoW/fvh8ajcaNHA4ntPeF9jIAZ9bd3f2xTqf7XiaTbZVKpYEk44XX8jJuakGS5Gd6vX6TQqHweRl1pQmCWEhR1ApTU1Oax+OBpmmo1eqxYrF427Fjx85lZmYe1Gg0mwCIyIKCgpC5c+dW37x585MNGzYM37FjR9+kpCTz3NxcpshWlJWVnYWWlhYJn8/3l0gknzc1NbVv2LAB+fn5zWq1eh5JkjN4PF5da2srLCzM4evrC6VSGdDZ2flJV1fXp5cvX96s1WrB5XIhFouRnJysq6ioEBIEsS49PT2jq6vLX6lUoqCgwO348eNX9Hr9VxUVFaMSEhLUgYGB2LRpUyWA8Vwu96NLly6tjYuLiyspKVm7f/9+TVJSkseFCxeMUqmU1dHRscHExISuqamBSqXC9evXj+3du/fBkCFDzs2dO3dVXFzc17dv3160/bvtxtKysjGPiotQVlYmsbCwGNenT58ZW7dufZCenv7R48eP1RwOh75x84Zrbd0zNUmSmDNnzoWDBw9eMjMzS/D29g738fFZFhcXl9ja2upI7tmzZ0l3d7ezn5/fpaamJl1FRUVvKyk8PT3vBY0dB5qmwWAwVEql0uRu3t0kDptzTSwWn29qanLS6/VGlUrF0Gg0IEgSnZ2d/VJSUnY5OTnN6Nu3b1xeXt7y6urqKTKZDOHh4YiJiYGVlZXjhAkTFk+ePHn32rVrk1taWiwzMjI2DBs2bBpFUXdVKpXX4sWLYWFhgaamJg4AD4qiDPX19QPy8vLiHj9+PGz69Olrk5KSykaMGPEqxUjTNFFXV4d58+bZZWZmLpo4ceK10NDQ9mnTpsHDwwMbN25cZWNjI1uzZs3S7777DmYvmugMQ4YM+TImJsZl3759e7Kysr53cnLqWb5suTb93Hm0trZi8eLFs4KDg3cWFRX9Fhsbazx06JB+165dh4RCoYJcs2ZNnL29fXZqauqO1NTUjzo6OmBjY4OHDx9CIpHY9+3nzJIp5NAbDWyeCV/m7NpvrrWtzWQzC/MPmDSrmclm6cwtLfQUi4lnz57Ru3btSpw0aVJcc3Nzcd++fY97eXlduXz58g5XV1feoEGDYGdnB1tbW2F9fb1m/PjxX1tbW9dGRka29+/f/3FQUFCuq6trucFgcCEIgi2Xy2Fqaqp5eT9VslisB7m5uav9/Py4Hh4e22/evImCggLQNE1SFAW1Wq1zdnZGSkpKw6xZs9YnJiYuy87OnlVeXo7s7GycPXt2mUQioffv379vw4YN6JHLQFIMo1KtIgb6DnqW+fN1i8IHYvc9e79PYtIstd5oQG5uLi5evDgjMDDw2PLly0UjRowgoqKi+jY3N/ump6fnkWPHji1KT08PjoiIcDUxMXG+c+dOfmRk5JPMzMzjPB7PGYBm4MCBvCFDhqRFRESseu+99/jr16/HmjVrzObNm7dp3NhxP1AUZWVjYwOFQjFh5MiRP3l7e9+Jjo7G4MGDdePGjTsYFha2s6SkZFxbWxskEomtnZ3djaFDh7br9XpGTEzMjMjIyCgLC4tdKpXKKjAw8OqkSZO+kclkbtXV1UhLS3N45513vhg+fPjWlpYW13379mHdunUQiUTg8XhYvHgxIygoqDEqKmoel8tVubm5gaZphIaGbvbz8+M2NDQokpOTtxcVFa1lsVgZKSkpLG9v7zxnZ2f09/Q0Gzx4cKKDg0NPUVERpdFotElJSe9s3779/e7u7p+3bNmC0NBQzJw5M/fmzZuRaWlpPygUikOlpaXLvb29J/7www88UqfTQaFQQK/XVzk6Oq7bvHnziNjY2AFubm6LbGxscg0GA3Q6ndzMzOyyjY3NUZ1OVyqTySCTyZqFQmGiSCRKAdCmUqkgEAgu+/r6Jty7d68+JycHIpFIx2azr9jb2x/l8XhXbt++jbt37zapVKqTDQ0NV2tra/X19fVtVlZWx9Rqtb6ysrKNoqiUAQMGnNBqtUWWlpZwc3Or7d+/f2JnZ2diSkpK5cmTJ3H//n0wGAzI5XKkpKTouVzuz/379z+l0Wiyzp07h6SkJHR0dGD06NFKjUaTYWVltZrBYGyzt7cv6+zsRGNjI9RqNfR6fZdQKEzn8/m5BoNBR1EU+Hw+LC0tM/r163fbw8MDQqEQQqGwxt7ePtbMzOxTiqKWikSir2maLlQqlW92DjQYDDAxMQGTyYSZmRl8fX3h6enJbW1t3a3T6b4wNzeHn58fBAIBhEKheWdn53eVlZX7Ojs7Nzc1Ne3r6up6t76+vjeNTTQ1NcVWV1fv4PP5hImJCWxtbSESiYiKioqIysrKY62trSdra2t3azQa4cu3vV9ra+tpJpM5SiAQQCKRhFVWVh6xtLR0YrFYkMvlK4qKik6oVKqNHR0d28rLy5dWVFSQ5eXlyM3NRXFx8RsLxOSfOeNRFAUejweFQoHU1FTs3LkTO3bswPbt27Fr1y5FcXGxr0wm412+fBnZ2dlIS0vDl19+2ZmcnDzex8fHYDAYTtvb2x92dHS8FBQUhBUrVqBv376hUqn0WUVFhdlvv/32uUKhQGRkJGfevHmlSqWSeu+99yIXLFiwIDw8/AtnZ2fJw4cPsW/fvu729vax+fn51J49e3Dq1ClDfX39mJEjR3YEBQWBxWKZNTY2jomIiMiYMmXK+QULFiSMGzfOEBISgpCQEIwYMQI+Pj4gSfLVfJi/tIAGgwEkScLZ2Rn9+/fH9OnTERcXh61bt2LLli2vPh0cHLRarRYhISEIDQ1lzJ8/n5eTk4MBAwboTExMSkNDQ58GBwcXDR482IzH46GwsNDxxIkTyyUSic5oND6/evXqpzKZzN3Hx0dJkqRGIpF4hYWFwcPDw2Tnzp3F58+fXymRSEDTNHQ6ndHKyso4c+ZMBAUFMTQaDUuhUDA6OjqgUqm0Dg4OtRRFPTAYDAUtLS2mDx8+pPLz8yGXy8HhcMDlcjF06FBMmjQJXC4XGo3m1fCdl9bD2ymgXq9Hnz59Xt0tnzx58i+ZmCdPnqCoqIgVEBCQ4OzsXJ+VlbXwypUrH8vlcqunT5+y58yZs12r1UrLy8s/evDgQVRJSUl/pVKJtrY2j6+++iomLi7u5Geffbb7888/X6rRaOxGjBgBPz8/n5qamrRt27Z9m5yc/KG7u/u7AwcOvDRw4EAcPHiwKioqyk8ul3vm5uaudXZ2Fm7dutXH29u7u66uDu7u7gX+/v5H8vLyourq6qJycnKmdHR0sAHQBEGQTCbzxYTK3/V5abVaDB48GLNnz0ZgYOCLCNsfCA6vvQN7T/n/CYIgNHZ2dufd3NyOubi4nPDy8op3cnKq5fF4KgcHh/NeXl6nHBwcfhwwYMBRGxubPL1eDzc3txtCobCIwWCAw+HI+vXrd83V1TX75exHmJmZPfT09Fzn6ur6I0mS1dbW1tUmJiaQy+UgSbLNzc3tsIWFxTYPD48TFEXJjEYj2Gw2hEJhtru7+xkHB4ej7u7uRz08PE4JBAKhlZVVe2dn54zS0lJUVlb+CxUVFSgtLUVZWRmqq6vx8jiFf+e9/M8AP9duncg9fOYAAAAASUVORK5CYII= 
```

真的吗？有什么建议么？

在此先感谢达里奥

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T17:45:05.737

问题是你要么传入`NULL`for `img`，要么长度`img`不能被 4 整除。这是 decode 函数可以返回的仅有的两种方式`nil`。

从 base64 的源代码：

```
if ((string == NULL) || (inputLength % 4 != 0)) {
    return nil;
} 
```

我猜您的具体问题是您传递的内容如下：

> 数据：图像/ GIF; BASE64，R0lGODlhUAAPAKIAAAsLav /// 88PD9WqsYmApmZmZtZfYmdakyH5BAQUAP8ALAAAAABQAA8AAAPb \ nWLrc / jDKSVe4OOvNu / 9gqARDSRBHegyGMahqO4R0bQcjIQ8E4BMCQc930JluyGRmdAAcdiigMLVr \ nApTYWy5FKM1IQe + MP + L4rphz + qIOBAUYeCY4p2tGrJZeH9y79mZsawFoaIRxF3JyiYxuHiMGb5KT \ nkpFvZj4ZbYeCiXaOiKBwnxh4fnt9e3ktgZyHhrChinONs3cFAShFF2JhvCZlG5uchYNun5eedRxM \ nAF15XEFRXgZWWdciuM8GCmdSQ84lLQfY5R14wDB5Lyon4ubwS7jx9NcV9 / J5 + g4JADs =

如果是这种情况，那么您需要`data:image/gif;base64,`从头开始删除该部分，因为它不是 base64 编码数据的一部分。我假设您只需要先将字符串拆分`,`并取右手部分。

# knockout.js - 当用户单击查看详细信息时，使用 knockoutjs 加载子项

> ID：13015764
> 
> 赞同：0
> 
> 时间：2012-10-22T16:34:02.607
> 
> 标签：knockout.js

我有一份人员名单，每个人都有一份宠物名单。我想获取页面加载的人员列表。*如果用户单击查看宠物*，我只想加载一个人的宠物列表

 *![在此处输入图像描述](../Images/e7fa8d18fd46054f41ae38afee11c6e2.png)

这是jsfiddle使用coffeescript

[http://jsfiddle.net/eiu165/rScSL/15/](http://jsfiddle.net/eiu165/rScSL/15/)

getPets 似乎只是在加载时被一遍又一遍地调用

```
<a href="#" data-bind="click: $root.getPets()">view pets</a> 
```

**编辑**

我已经通过直接向 Person 对象添加方法来解决这个问题。
[http://jsfiddle.net/eiu165/rScSL/22/](http://jsfiddle.net/eiu165/rScSL/22/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:07:17.533

当您使用`click`绑定（或`event`绑定）时，您希望将其绑定到对函数的引用，而不是对它的实际调用。

所以，你只想做：

```
<a href="#" data-bind="click: $root.getPets">view pets</a> 
```

否则，代码实际上正在执行。除非函数返回您要使用的实际函数，否则您可能不想这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:09:38.493

我不知道我可以向 Person 类添加方法

我在 Person 中添加了 getPets 方法以获取我自己的宠物列表

```
Person = (data) ->
    name = ko.observable(data.name)
    lname = ko.observable(data.lname)  
    pets = ko.observableArray(data.pets)  
    getPets = (person) ->  
        data = '{"pets":[
            {"age": "5", "type": "dog"},
            {"age": "4", "type": "cat"}
        ]}'  
        json = $.parseJSON(data).pets 
        mappedItems = $.map(json , (i)->  Pet(i)  )  
        pets(mappedItems) 
    name:name
    lname:lname 
    pets:pets  
    getPets:getPets 
```

[http://jsfiddle.net/eiu165/rScSL/21/](http://jsfiddle.net/eiu165/rScSL/21/)*

# ruby-on-rails - rails undefined method `each' for nil:NilClass

> ID：13015769
> 
> 赞同：11
> 
> 时间：2012-10-22T16:34:16.590
> 
> 标签：ruby-on-rails

我正在按照[此处](http://guides.rubyonrails.org/getting_started.html)找到的教程进行操作。这很简单，我完全按照步骤 6.7 的说明进行操作。在这一点上，我得到了错误

```
undefined method `each' for nil:NilClass 
```

当我尝试访问 rails 服务器上的 index.html.erb 时。

我知道数据库运行良好，因为我可以完成步骤 6.3 中提到的所有操作，创建新帖子并显示/编辑/销毁它们绝对没有问题。

具体来说，问题在于线路

```
<% @posts.each do |post| %> 
```

它基本上声称那`@posts`是零。

感谢您对这个 ROR 新手的任何帮助！谢谢。

**index.html.erb**

```
<h1>Hello, Rails!</h1>
<table>
  <tr>
    <th>Name</th>
    <th>Title</th>
    <th>Content</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= post.name %></td>
    <td><%= post.title %></td>
    <td><%= post.content %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Destroy', post, :confirm => 'Are you sure?',
                                     :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to "My Blog", posts_path %> 
```

**post_controller.rb**

```
class PostsController < ApplicationController
  # GET /posts
  # GET /posts.json
  def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T17:21:45.957

为了`views`在 Rails 中正常工作，它们必须位于正确的目录中。这是Rails 喜欢的所谓“[约定优于配置”的众多实现之一。](http://en.wikipedia.org/wiki/Convention_over_configuration)

因此，如果您有一个方法`index`并且该方法位于名为 的控制器内`PostsController`，则您必须`index`在目录内有一个名为的视图`views/posts/`。这样一来，Rails 就会知道在处理对这个方法的 get 时它必须渲染这个视图。

关于一个好的教程，我会推荐[这个](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)。它很广泛，涵盖了很多不只是与 Rails 本身相关的东西，比如在 Heroku 上部署和一点 CSS。

# android - 偏移OpenGL视图？

> ID：13015780
> 
> 赞同：0
> 
> 时间：2012-10-22T16:34:49.077
> 
> 标签：android, opengl-es

我有两个相邻的 Android OpenGLSurface 视图，我想渲染到从中心偏移的视图的一部分。

基本上我想要做的是调用 glViewPort(x,y,width,height) 两次，每个 SurfaceView 使用不同的 x。

出于某种原因，即使我使用不同的 GL10 实例，glViewPort 调用也会应用于两个表面视图。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T20:44:56.647

我最终只是简单地调用 glViewPort，然后渲染第一个视图，然后为第二个视图调用 glViewPort，然后渲染第二个视图。这解决了问题。

# objective-c - 自动旋转：返回原始旋转后修改视图高度

> ID：13015791
> 
> 赞同：0
> 
> 时间：2012-10-22T16:35:35.430
> 
> 标签：objective-c, ios

非常不言自明，请看这张图片：

![自转前/后](../Images/ca447da27e4b6419b44e4016a50c6baa.png)

重现步骤：

1.  “之前”标记自旋转之前的纵向视图位置。
2.  将设备旋转为横向。
3.  旋转回纵向。“之后”表示返回纵向后的视图位置。

似乎容器视图的高度已经增加。有谁之前经历过这个吗？我敢肯定有一些模糊的设置有点偏离。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:26:47.933

你在评论中说这发生在 iPhone 5 上。我在 iPhone 5 上定位视图时遇到了一些问题，无论我尝试什么设置，autoResizingMask 都无法解决这些问题。我最终通过在 viewDidLoad 中添加这两行代码解决了这个问题：

```
UIScreen *screen = [UIScreen mainScreen];
[self.view setFrame:[screen applicationFrame]]; 
```

由于您的问题出在轮换上，因此您可能需要在轮换时而不是在 viewDidLoad 中执行这些行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T18:34:23.960

你确定你已经正确设置了自动调整大小的蒙版吗？也许这就是问题

# security - 集成 Windows 身份验证是否会退回到纯文本用户名和密码？

> ID：13015793
> 
> 赞同：1
> 
> 时间：2012-10-22T16:35:41.010
> 
> 标签：security, windows-authentication

我正在尝试了解有关集成 Windows 身份验证的更多信息，但我阅读的所有内容都向我介绍了三个新的首字母缩略词，其中许多包含其他首字母缩略词，我觉得我对这些机制一无所知。

我了解，如果 HTTP 客户端不支持集成 Windows 身份验证，则存在一系列可以识别客户端并可能涉及提示输入用户名和密码的回退。是否有过回退到 HTTP 基本身份验证或任何其他纯文本用户名/密码通信的情况？

我正在尝试确定是否需要提供 SSL 来保护用户凭据，并且我希望所有身份验证都以某种方式得到保护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:39:01.833

在默认安装（NTLM 和 Kerberos）中，没有可供 IWA 使用的 SSP 的纯文本凭据。原则上，您可以部署其他一些 SSP 并通过 NegoEx 将其提供给 IWA，并且该 SSP 可能会实施明文密码检查，但这不太可能。

当然，没有什么可以阻止 Web 应用程序返回请求 HTTP 基本身份验证或表单身份验证的响应，独立于 IWA，因此您必须检查没有应用程序在这样做。

> 我正在尝试确定是否需要提供 SSL 来保护用户凭据，并且我希望所有身份验证都以某种方式得到保护。

如果您只对遵守针对明文密码的公司政策感兴趣，那么 IWA 就足够了。

如果你有一个真正的威胁模型，并且它在网络上包含一个窥探者，那么你需要担心的更多——这样的攻击者可以很容易地进行主动的中间人攻击，并使 Web 应用程序看起来像在做比如创建一个泄露密码的伪造 NTLM 登录框。这就是您可能需要 SSL 的原因。

# c# - 如何在 C# 中获取 CPU 的逻辑内核/线程数？

> ID：13015794
> 
> 赞同：10
> 
> 时间：2012-10-22T16:35:40.220
> 
> 标签：c#, multithreading, .net-3.5

如何获取 CPU 中的逻辑核心数？

我需要这个来确定我应该在我的应用程序中运行多少线程。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-22T16:39:03.503

使用[Environment.ProcessorCount 属性](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx)，它返回逻辑核心的数量。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-22T16:41:38.697

您可以通过 Environment class
number of cores 获取逻辑处理器的数量：

```
int coreCount = 0;
foreach (var item in new System.Management.ManagementObjectSearcher("Select * from Win32_Processor").Get())
{
    coreCount += int.Parse(item["NumberOfCores"].ToString());
}
Console.WriteLine("Number Of Cores: {0}", coreCount); 
```

逻辑处理器的数量

```
foreach (var item in new System.Management.ManagementObjectSearcher("Select * from Win32_ComputerSystem").Get())
{
    Console.WriteLine("Number Of Logical Processors: {0}", item["NumberOfLogicalProcessors"]);
} 
```

Environment.ProcessorCount

```
 using System;

 class Sample 
 {
     public static void Main() 
     {
        Console.WriteLine("The number of processors on this computer is {0}.", 
           Environment.ProcessorCount);
     }
 } 
```

通过此链接[http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx](http://msdn.microsoft.com/en-us/library/system.environment.processorcount.aspx)

# .net - 在 vb.net 3.5 中创建 Excel 实例时出现 System.Runtime.InteropServices.COMException (0x80010108)

> ID：13015799
> 
> 赞同：0
> 
> 时间：2012-10-22T16:36:19.647
> 
> 标签：.net, vb.net, office-interop, excel-interop

所以，我有一个启动 Excel 实例的程序。它适用于我的机器以及其他 2 台机器，但是当我的项目负责人尝试它时，他收到以下错误：

```
 System.Runtime.InteropServices.COMException (0x80010108): Creating an instance of the COM component with CLSID {00024500-0000-0000-C000-000000000046} from the IClassFactory failed due to the following error: 80010108. 
```

下面的代码是我创建 excel 实例并启动它的地方。

```
 Dim xlsApp As New Excel.Application
    Dim xlsWB As Excel.Workbook
    Dim xlsWS As Excel.Worksheet

    Try
        If ugLoadDeviationsDetails.DataSource IsNot Nothing Then

            'Creates a temporary excel file with data located in the grid
            UltraGridExcelExporter1.Export(ugLoadDeviationsDetails, "C:\ProgramData\Data-Tronics\ShellFiles\LoadDeviations\tempExcel")

            xlsWB = xlsApp.Workbooks.Open("C:\ProgramData\Data-Tronics\ShellFiles\LoadDeviations\tempExcel")

            xlsWS = DirectCast(xlsWB.Sheets("Sheet1"), Excel.Worksheet)
            DirectCast(xlsWS.Cells.EntireRow, Excel.Range).ClearFormats()
            DirectCast(DirectCast(xlsWS.Cells("1", "A"), Excel.Range).EntireRow().Cells, Excel.Range).Interior.Color = Color.LightGray.ToArgb

            DirectCast(xlsWS, Excel.Worksheet).Copy()

            xlsWB.Close(False)

            xlsApp.Visible = True
            xlsApp.UserControl = True

        Else
            RaiseEvent ShowError("Cannot write file when grid is empty.")
        End If 
    Catch ex As Exception

        For Each wb As Excel.Workbook In xlsApp.Workbooks
            wb.Close(False)
        Next
        xlsApp.Quit()
    Finally
        xlsApp = Nothing
        xlsWB = Nothing
        xlsWS = Nothing
    End Try 
```

根据堆栈跟踪，它在以下行中断：

```
 Dim xlsApp As New Excel.Application 
```

项目负责人使用与我完全相同的 Excel 版本（2010 年），谁能想到为什么会发生这种情况，以及我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T10:07:51.150

尝试这个

```
xlsApp = CreateObject("Excel.Application")
xlsBook = xlsApp.Workbooks.Add
xlsSheet = xlsBook.Worksheets.Add 
```

# database - 从 MySql Workbench 导出数据库

> ID：13015801
> 
> 赞同：0
> 
> 时间：2012-10-22T16:36:29.587
> 
> 标签：database, database-design, mysql-workbench

我在 MySql Workbench 中创建了一个数据库。在设计过程中，我删除了几个表，因为它们不是必需的。但是，当我尝试将数据库导出到 phpmyadmin 时，所有这些表都会出现在代码中。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T08:09:38.607

在 MySQL Workbench 6.0 CE 中。

我认为这很容易。

假设首先您在数据库中添加一个表。这样做。

1.  单击数据库菜单。然后单击“数据库旁边”。
2.  您所有的数据库都将显示在左侧。
3.  单击db，然后右键单击表。创建新表。
4.  现在您将创建一个新表。单击应用，您的手表表已创建。

现在您需要删除此表。

只需右键单击一个表。并单击下拉表。并会打开一个对话框。选择 drop 并且您创建的表将被删除。

现在如果你导出你的数据库，这个被删除的表将不会出现。

如果您在不同的表之间建立了关系，那么在您删除该关系之前不会删除该表。

谢谢。

# java - 一个代码库中的 Spring、Hibernate 和多个模式

> ID：13015803
> 
> 赞同：0
> 
> 时间：2012-10-22T16:36:44.120
> 
> 标签：java, spring, hibernate, model

在 Spring / Hibernate 组合中使用多个数据库“模型”的公认做法是什么？

对于让我摸不着头脑的问题，我将不胜感激，因为我不是 Spring/Hibernate 方面的专家！

我们正在开发一个 Web 项目，到目前为止，该项目已按照其第一个客户的规范构建。所有数据库表都映射到 POJO，我们使用 Hibernate Annotations。很简单，该项目是一个 CRUD 应用程序，它允许最终用户通过前端更新数据库信息。

我们现在需要支持一个新客户，但是这个客户的规格略有不同；我们将对许多表的列和数据类型进行更改。

我们不想合并到一个表中，因为这会使数据库中包含大量 NULL 列（某些表中每个客户将有 10 多个唯一列）。

我们可以很容易地处理前端，因为我们只是在 JSON 之间进行转换，并且前端已经从头开始为每个客户实现。但是后端有点复杂。

我们尝试了一个原型，我们在运行时覆盖了两个表；我们将两个相应的模型类转换为接口，并为每个客户实现一个具体的类，通过 Spring 配置加载，例如对于“产品”表，我们尝试：

```
package com.mycompany.generic.model;
public interface Product 
```

接着

```
package com.mycompany.customera.model;
@Table(name="products")
public class CustomerAProduct implements Properties {
  String colour;
  int weight;
} 
```

或者

```
package com.mycompany.customerb.model;
@Table(name="products")
public class CustomerBProduct implements Properties {
  String colour;
  int volume;
  Double price;
} 
```

..作为运行时选项，Spring 加载*com.mycompany.customera*或*customerb*取决于配置，以及任何客户特定的验证/服务类以作用于新的 POJO。您会看到基础列可能不同。

但是，我犹豫是否要实施这一点，因为..

*   几乎每个模型类都需要针对每个客户进行转换和实现，而不仅仅是那些不同的模型类。这是因为我们在模型类中有很多连接（OneToMany 等），Hibernate 不允许您连接到接口（例如[HHH-4338](https://hibernate.onjira.com/browse/HHH-4338)）
*   需要某种 util/factory 来生成新的类实例，就像我们以前做*new Properties*我们不知道是使用*new CustomerAProperties()*还是*new CustomerBProperties()*一样（出于同样的原因，我们不能使用 TargetEntity 来解决上面的问题，因为这需要一个.class文件，不能在代码中设置）

这些似乎是相当主要的缺点，所以我正在尝试研究一种更好的方法来做到这一点。我们可以通过 Maven 为每个客户构建，但是我不确定如何以一种不会在我们本地开发时破坏 Eclipse 的方式来实现它。

或者，还有其他我不知道的方法吗？

提前感谢您对研究内容等的任何建议或指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:09:13.173

> 或者，还有其他我不知道的方法吗？

有什么理由不能从基于注释的映射切换到 xml 映射？

每个客户都会获得一组 XML 映射文件。现在，您只需要在模型在客户之间真正不同时进行子类化。

# audio - WASAPI - CoCreateInstance 方法的问题

> ID：13015805
> 
> 赞同：3
> 
> 时间：2012-10-22T16:36:56.023
> 
> 标签：audio, wasapi

我正在尝试使用 Windows 核心音频 API 从麦克风捕获音频

相关的代码行是

```
const CLSID CLSID_MMDeviceEnumerator = __uuidof(MMDeviceEnumerator);  
const IID IID_IMMDeviceEnumerator = __uuidof(IMMDeviceEnumerator);
IMMDeviceEnumerator *pEnumerator = NULL;  
hr = CoCreateInstance(CLSID_MMDeviceEnumerator,NULL,CLSCTX_ALL,IID_IMMDeviceEnumerator,   (void**)&pEnumerator); 
```

hr 返回以下值-

> 0x800401f0：尚未调用 CoInitialize。

我已经改编了 msdn 页面中的示例程序 -[捕获音频流](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370800%28v=vs.85%29.aspx)

有什么问题？此外，我不明白错误的含义 - 从我从谷歌搜索得到的描述和所有。

我在 Win7 Home Pro x64 上使用 Visual Studio 2012 Express。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:39:21.093

错误信息还不够清楚吗？您需要在调用 CoCreateInstance 之前调用[CoInitialize](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)（或以任何其他方式使用 COM）。

# c# - c#将3个集合列表合并为一个列表

> ID：13015812
> 
> 赞同：4
> 
> 时间：2012-10-22T16:37:17.733
> 
> 标签：c#, .net, linq

我有 3 个收藏列表，如下所示。

```
public static List<Thing> English = new List<Thing>
{
    new Thing {ID = 1, Stuff = "one"},
    new Thing {ID = 2, Stuff = "two"},
    new Thing {ID = 3, Stuff = "three"}
};

public static List<Thing> Spanish = new List<Thing>
{
    new Thing {ID = 1, Stuff = "uno"},
    new Thing {ID = 2, Stuff = "dos"},
    new Thing {ID = 3, Stuff = "tres"},
    new Thing {ID = 4, Stuff = "cuatro"}
};

public static List<Thing> German = new List<Thing>
{
    new Thing {ID = 1, Stuff = "eins"},
    new Thing {ID = 2, Stuff = "zwei"},
    new Thing {ID = 3, Stuff = "drei"}
}; 
```

在运行时，列表的长度可能会有所不同。例如，德语可能有 5 个值，英语有 2 个，西班牙语有 1 个。

我需要找到哪个列表具有最大值，并且需要以以下格式获取输出。

```
 Id English  German  Spanish
       1  one      eins    uno
       2  two      zwei    dos
       3  three    drei    tres
       4                   cuatro 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:46:34.217

试试这个：

```
English.Select(t => new Tuple<Thing,int>(t, 1)).Concatenate(
    German.Select(t => new Tuple<Thing,int>(t, 2)).Concatenate(
        Spanish.Select(t => new Tuple<Thing,int>(t, 3))
    )
).GroupBy(p => p.Item1.ID)
.Select(g => new {
    Id = g.Key
,   English = g.Where(t => t.Item2==1).Select(t => t.Item2.Stuff).SingleOrDefault()
,   German = g.Where(t => t.Item2==2).Select(t => t.Item2.Stuff).SingleOrDefault()
,   Spanish = g.Where(t => t.Item2==3).Select(t => t.Item2.Stuff).SingleOrDefault()
}); 
```

这个想法是用它们的集合来源标记原始项目（`1`对于英语、`2`德语、`3`西班牙语），按 ID 对它们进行分组，然后使用我们在第一步中添加的标签提取各个语言的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:56:05.240

如果它们都从一个开始并且从不跳过任何数字（但可以在任何时候结束），那么您可以使用更简单的方法，例如：

```
int count = Math.Max(English.Count, Math.Max(Spanish.Count, German.Count));
var query = Enumerable.Range(0, count)
    .Select(num => new
    {
        Id = num + 1,
        English = GetValue(English, num),
        Spanish = GetValue(Spanish, num),
        German = GetValue(German, num),
    }); 
```

如果可以跳过数字或不从一个开始，那么您可以使用这种稍微复杂的方法：

```
var englishDic = English.ToDictionary(thing => thing.ID, thing => thing.Stuff);
var spanishDic = Spanish.ToDictionary(thing => thing.ID, thing => thing.Stuff);
var germanDic = German.ToDictionary(thing => thing.ID, thing => thing.Stuff);

var query = englishDic.Keys
        .Union(spanishDic.Keys)
        .Union(germanDic.Keys)
        .Select(key => new
        {
            Id = key,
            English = GetValue(englishDic, key),
            Spanish = GetValue(spanishDic, key),
            German = GetValue(germanDic, key),
        }); 
```

需要一些辅助函数来避免无效参数错误：

```
public static string GetValue(Dictionary<int, string> dictionary, int key)
{
    string output;
    if (dictionary.TryGetValue(key, out output))
        return output;
    else
        return "";
}

public static string GetValue(List<Thing> list, int index)
{
    if (index < list.Count)
        return list[index].Stuff;
    else
        return "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:35:47.807

这很有趣:)

我这样做了，这很有效，但是，就像其中许多答案一样，效率不高：

```
public IEnumerable ListEmAll() {
    return new List<int>() // just for balance, start with empty list
        .Union( English.Select(o => o.ID) )
        .Union( Spanish.Select(o => o.ID) )
        .Union( German.Select(o => o.ID) )
        .OrderBy(id => id)
        .Select(id =>
            new
            {
                ID = id,
                English = English.Where(o => o.ID == id).Select(o => o.Stuff),
                Spanish = Spanish.Where(o => o.ID == id).Select(o => o.Stuff),
                German = German.Where(o => o.ID == id).Select(o => o.Stuff)
            });
} 
```

但我更喜欢的是不使用 Linq，并返回一个复合字典......列表上没有昂贵的查找。

```
// keep a list of the languages for later
static Dictionary<string, List<Thing>> languages = new Dictionary<string, List<Thing>>(){
    {"English", English},
    {"Spanish", Spanish},
    {"German", German}
};

// result[3]["English"] = "three"
public Dictionary<int, Dictionary<string, string>> ListEmAll_better() {
    Dictionary<int, Dictionary<string, string>> result = new Dictionary<int, Dictionary<string, string>>();
    foreach(var lang in languages.Keys) {
        foreach(var thing in languages[lang]) {
            if(!result.ContainsKey(thing.ID)) {
                result[thing.ID] = new Dictionary<string, string>();
            }
            result[thing.ID][lang] = thing.Stuff;
        }
    }
    return result;
} 
```

# c - 去索引 Collada

> ID：13015813
> 
> 赞同：2
> 
> 时间：2012-10-22T16:37:23.603
> 
> 标签：c, opengl, collada

如何对我的 collada 网格的三角形进行去索引？我的目标是得到类似的东西：

```
<triangles material = "mat0" count ="12">
  <input semantic = "VERTEX" source = "#mesh1"/>
  <input semantic = "NORMAL" source = "#norm1"/>
  <p>
     0 0 1 1 4 4 3 3 5 5 7 7 6 6 8 8 .... <- same indices
  </p>
</triangles> 
```

这可能吗？我使用 C 语言和 OpenGL API。我想使用 VBO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:09:59.093

我仍然使用 COLLADA Refinery 来修复我的网格数据： [http ://collada.org/mediawiki/index.php/COLLADA_Refinery](http://collada.org/mediawiki/index.php/COLLADA_Refinery)

我有一个脚本，它通过我所有的 collada 文件执行不同的操作。它可能具有您正在寻找的操作。请注意，最后一个版本是在 2007 年。

调节器的完整列表： [http ://collada.org/mediawiki/index.php/Portal:Conditioners_directory](http://collada.org/mediawiki/index.php/Portal:Conditioners_directory)

去索引器 [http://collada.org/mediawiki/index.php/Deindexer_conditioner](http://collada.org/mediawiki/index.php/Deindexer_conditioner)

> 重新排列顶点索引，以便每个顶点将引用具有相同索引号的相应位置、法线、Texcoord。位置、正常和 texcoord 的源大小可能会增加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T23:51:07.637

使用[meshtool](https://github.com/pycollada/meshtool)您可以运行以下命令：

```
meshtool --load_collada file.dae
         --normalize_indices
         --save_collada file-normalized.dae 
```

# android - SQLException 数据库被锁定

> ID：13015814
> 
> 赞同：0
> 
> 时间：2012-10-22T16:37:24.580
> 
> 标签：android, sql

我有一个应用程序应该向我的数据库写入一些信息让我们说 onDestroy （例如，音频播放器中的播放列表），所以我启动新的 AsyncTask 来执行这个功能 - 打开连接，执行许多（到 1000 个或更多）插入并关闭连接. 我需要从 DB onCreate 恢复这 1000 个或更多项目。

您能否给我一个提示，如何确保不会同时执行此操作以避免“数据库被锁定”异常？或者我做错了什么。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:19:25.863

1.  阅读 SQLiteDatabase（和 SQLite）的文档。您可以在 EXCLUSIVE 模式下进行交易。
2.  或者，使用 ContentProvider，使用 applyBatch、ContentProviderOperation 和“yield”来防止锁定。

# c# - WCF 数据客户端不发送实体属性值

> ID：13015816
> 
> 赞同：1
> 
> 时间：2012-10-22T16:37:56.100
> 
> 标签：c#, entity-framework, wcf-data-services, odata, dataservice

当我尝试发送 MULTIMEDIA 类型的实例时，使用

```
hasStream="true" 
```

属性设置为 true，WCF 数据服务器似乎不接收实体数据。

在客户端，我遍历对象集合并尝试将它们发送到另一个 wcf 数据服务。对“其他 wcf 数据服务”的引用是：

```
this.centralCtx 
```

我还为每个新实体设置保存的流并初始化从源实体复制它们的所有属性：

```
foreach (LOCAL_TYPE localObject in localObjects)
{
  if (entityName == "MULTIMEDIA")
       {
           CentralService.ARTICOLI article = null;
           CentralService.MULTIMEDIA multimedia = new CentralService.MULTIMEDIA();
           LocalService.MULTIMEDIA lMultimedia = localObject as LocalService.MULTIMEDIA;
           multimedia.ID_MULTIMEDIA = lMultimedia.ID_MULTIMEDIA;
           multimedia.DATA_CREAZIONE = lMultimedia.DATA_CREAZIONE;
           multimedia.DATA_ULTIMA_MODIFICA = lMultimedia.DATA_ULTIMA_MODIFICA;
           multimedia.ARTICOLO_ID = lMultimedia.ARTICOLO_ID;

           this.centralCtx.TryGetEntity(
           new Uri(this.centralCtx.BaseUri + "ARTICOLI('" + multimedia.ARTICOLO_ID 
           + "')", UriKind.Absolute), out article);

           article.MULTIMEDIA.Add(multimedia);
           this.centralCtx.AddRelatedObject(article, "MULTIMEDIA", multimedia);
           DataServiceStreamResponse streamResponse = this.localCtx.GetReadStream(localObject);
           this.centralCtx.SetSaveStream(multimedia, streamResponse.Stream, 
                      true, "image/jpeg", "");
           //this.centralCtx.UpdateObject(article);
        }
        else {
          CENTRAL_TYPE cloned = DbHelper.FlatCloneFromType<LOCAL_TYPE, CENTRAL_TYPE>
                                     (localObject, centralCtx);
          this.centralCtx.AddObject(entityName, cloned);
        }
      }

      try
      {
         this.centralCtx.SaveChanges();
         Notify(progressAction, "Exported table " + entityName, null);
         successAction(this.Log);
      }
      catch (Exception ex)
      {
         Notify(progressAction, "Error exporting table " + entityName, ex);
         this.synchResult = SynchResultType.Error;
         exceptionAction(ex);
      } 
```

这是更改拦截器代码：

```
[ChangeInterceptor("MULTIMEDIA")]
    public void OnChangeMultimedia(MULTIMEDIA changedObject, UpdateOperations op)
    {
        switch (op)
        {
            case UpdateOperations.Add:
                if(changedObject.ID_MULTIMEDIA == null)
                    changedObject.ID_MULTIMEDIA = Guid.NewGuid().ToString();
                changedObject.STATO_INTERNO = "TRASFERITO";
                changedObject.DATA_ULTIMA_MODIFICA = changedObject.DATA_ULTIMA_MODIFICA == null
                    ? DateTime.Now.ToLocalTime() : changedObject.DATA_ULTIMA_MODIFICA;
                this.CurrentDataSource.SaveChanges();
                break;
            default: break;
        }
    } 
```

MULTIMEDIA 更改拦截器中服务器上 changedObject 的所有属性始终为空。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:36:15.073

我终于得到了答案。发送带有属性 hasStream 的实体意味着两个请求。

1.  第一个是 POST，在此期间服务器在数据库中创建记录并将文件保存在文件系统上。
2.  第二个是 MERGE，在此期间客户端对从服务器传递的 ID 执行更新

这就是为什么在对服务器的第一次请求期间，对象的所有属性都为空。

# css - 让图像与 div 重叠并位于文本后面

> ID：13015820
> 
> 赞同：0
> 
> 时间：2012-10-22T16:38:06.823
> 
> 标签：css, image, html, background

我想要一张溢出 div 的图像，同时又不干扰文本流。

![在此处输入图像描述](../Images/62b7f7ac37fc3af2fd8155a7e813bbd3.png)

你可以在[http://songbundle.org](http://songbundle.org)上看到它*

上图示例。目前，文本和表单向右移动并由于图像而失去居中。

我当前的代码如下：

HTML：

```
<div class="box">
    <div id="boxarrow"></div>
    <p>text goes here</p>
</div> 
```

CSS：

```
.box {
    margin:60px auto 0 auto; 
    width:240px; 
    border:solid 1px #7889BC; 
    background-color: #AEB8D7; 
    text-align:center;
}
#boxarrow {
    background:url(image/arrow.png); 
    width:77px; 
    height:81px; 
    display:block; 
    margin-left:-60px; 
    float:left;
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:46:11.753

消除

```
margin-left:-60px; float:left; 
```

从您的#boxarrow 并添加

```
left:-60px; position:absolute; 
```

然后加

```
position:relative; 
```

到你的 .box

最后结果：

```
.box {
  background-color: #AEB8D7;
  border: 1px solid #7889BC;
  margin: 60px auto 0 auto;
  position: relative;
  text-align: center;
  width: 240px;
}
#boxarrow {
  background: url("image/arrow.png");
  display: block;
  height: 81px;
  left: -60px;
  position: absolute;
  width: 77px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:54:16.113

嘿，

您可以尝试的一种解决方案是应用于`position: relative;`您的`.box`元素和`position: absolute;`您的`#boxarrow`元素。这将使该`#boxarrow`元素脱离文档的正常流程，而其他元素不受其定位的影响。

然后，您可以使用、、和调整它的位置（相对于`.box`元素，因为我们给了它`position: relative;`）。因此，您的元素可能最终看起来像这样：`top``right``left``bottom``#boxarrow`

```
#boxarrow {
  position: absolute;
  top: 30px;
  left: 20px;
} 
```

同样，这只是一种可能的解决方案，但考虑到您的情况，它似乎效果最好。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:46:20.333

只需像这样将定位更改为绝对...

```
#boxarrow {background:url(image/arrow.png); width:77px; height:81px; display:block; margin-left:-60px; float:left;position: absolute;} 
```

# c# - 为 Excel 生成列范围（c#）

> ID：13015823
> 
> 赞同：1
> 
> 时间：2012-10-22T16:38:19.860
> 
> 标签：c#, excel

我需要一个快速函数的帮助来生成一个包含 Excel 列名称的范围，该范围接收开始和结束索引作为输入。

```
i.e. Generate(2, 4) -> B, C, D 
```

速度很重要，因为我需要生成多达 16,384 列的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T18:20:08.573

Graham 在这里对生成 Excel 列名的基本算法进行了精彩的解释：[https ://stackoverflow.com/a/182924/1644733](https://stackoverflow.com/a/182924/1644733)

将其放入 C# Generate() 函数的框架中，您可以执行以下操作：

```
 static List<string> Generate(int start, int end) {
        List<string> listOfColumns = new List<string>();
        for (int i = start; i<=end; i++) {
            listOfColumns.Add(NumberToColumn(i));
        }
        return listOfColumns;
    }

    static string NumberToColumn(int col) {

        string retval = "";

        // cannot be greater than 16384
        if (col > 16384)
            return "invalid";

        int dividend = col;
        while (dividend > 0)
        {
            int leftover = (dividend - 1) % 26;
            char extraletter = (char) (65 + leftover);
            retval = extraletter + retval;
            dividend = (int)((dividend - leftover) / 26);
        } 
        return retval;
    } 
```

在速度方面：如果您要经常生成许多（数千）此类范围，您可能希望在代码开头运行一次，在 1-16384 的整个范围内，然后使用根据需要直接在结果列表中的值。

# android-fragments - 将 ORMLite 与片段一起使用

> ID：13015826
> 
> 赞同：4
> 
> 时间：2012-10-22T16:38:35.973
> 
> 标签：android-fragments, ormlite, android-fragmentactivity

是否可以在使用 Android Fragments 的同时使用 ORMLite 来管理本地数据库？

一些示例代码或示例代码的链接显示如何创建类似 ORMLiteFragmentActivity 类的东西会很酷。或者我猜一个简单的“不”可能是一个可以接受的答案。:)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T23:19:57.760

是的，完全有可能。[请参阅此处](http://ormlite.com/javadoc/ormlite-core/doc-files/ormlite_4.html#SEC40)的说明。基本上，您所做的就是按照您的建议创建一个新课程。您可以替换`Fragment`为要扩展的任何其他类型。例如，我也有`OrmLiteListFragment`which extends`ListFragment`

```
public class OrmLiteFragment extends Fragment {

    private DatabaseHelper databaseHelper = null;

    protected DatabaseHelper getHelper() {
        if (databaseHelper == null) {
            databaseHelper =
                OpenHelperManager.getHelper(getActivity(), DatabaseHelper.class);
        }
        return databaseHelper;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (databaseHelper != null) {
            OpenHelperManager.releaseHelper();
            databaseHelper = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-09T10:38:07.117

只有在调用 onstart() 后才能操作 ormlite db

[抱歉，我是 stackoverflow 的新手](http://my.oschina.net/zengliubao/blog/528132) [http://my.oschina.net/zengliubao/blog/528132](http://my.oschina.net/zengliubao/blog/528132)

# python - 通过查询访问 MPTT 模型的 get_root

> ID：13015828
> 
> 赞同：1
> 
> 时间：2012-10-22T16:38:45.093
> 
> 标签：python, django, django-mptt

考虑下面的例子：

```
class ModelX(models.Model):
    fieldX = models.ForeignKey(ModelY)

class ModelY(MPTTModel):

    def root(self):
        return get_root()

    root = property(root) 
```

现在我想做这样的查询

```
ModelX.objects.filter(fieldX__root=match) 
```

`get_root()`或者更好的是直接像这样调用

```
ModelX.objects.filter(fieldX__get_root=match) 
```

这将使该`root()`方法变得多余。

以上似乎都不起作用。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:42:07.233

`.filter()`[将字段查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#field-lookups)作为关键字参数。来自文档：

> *在 Django 1.4 中更改*：查找中指定的字段必须**是模型字段的名称**。但是有一个例外，如果是 ForeignKey，您可以指定以 _id 为后缀的字段名称。在这种情况下， value 参数应该包含外部模型主键的原始值。

这意味着您不能基于模型方法进行查询。有一些片段可以帮助你：

```
#returns all ModelX objects related to root nodes
ModelX.objects.filter(fieldX__level=0)

#first: get descendants of root node with id=1 (it can be any field lookups)
#second: get all ModelX nodes, related to previously founded nodes
nodes = ModelY.object.get(level=0, id=1).get_descendants()
ModelX.objects.filter(fieldX__in=nodes) 
```

# java - Guice 的@Singleton 注解可以继承吗？

> ID：13015831
> 
> 赞同：3
> 
> 时间：2012-10-22T16:38:48.743
> 
> 标签：java, guice, code-injection

假设我有这个类：

```
@Singleton
public class Parent { ... } 
```

和这个类：

```
public class Child extends Parent { ... } 
```

在我的 Java 应用程序中，我的应用程序依赖*Guice*注入来创建对象。如果我创建`Child`through的实例`Injector.createInstance(Child.class)`，该实例是否会自动成为 Singleton（因为父对象被注释为 Singleton），还是需要显式地将`@Singleton`注释添加到`Child`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:45:42.643

不-您还需要注释`Child`。您可以设置一个简单的测试来验证这一点，例如：

```
public class GuiceTest {

  @Singleton
  static class Parent {}

  static class Child extends Parent{}

  static class Module extends AbstractModule {
    @Override
    protected void configure() {
      bind(Parent.class);
      bind(Child.class);
    }
  }

  @Test
  public void testSingleton() {
    Injector i = Guice.createInjector(new Module());
    assertNotSame(i.getInstance(Child.class), i.getInstance(Child.class));
  }

} 
```

# oracle - sqlplus 不在指定的输出文件中记录编译错误

> ID：13015834
> 
> 赞同：0
> 
> 时间：2012-10-22T16:38:52.550
> 
> 标签：oracle, oracle11g, sqlplus, ksh

这是我调用 sqlplus 的 shell 脚本：

```
#!/usr/bin/ksh

sqlplus $USER/$PASSWD@$DB<<!!>./logFile.log

SELECT 'IN sqlplus' FROM dual;

DECLARE tbl_xst integer;

SELECT COUNT(*) INTO tbl_xst FROM SYS.ALL_TABLES
WHERE table_name = 'SOME_TABLE'
AND OWNER = 'SOME_OWNER';

IF tbl_xst = 1 THEN
BEGIN
    DROP TABLE SOME_OWNER.SOME_TABLE;
END
END IF

SELECT 'The end' FROM dual;
!! 
```

当我运行 shell 脚本并查看日志文件 logFile.log 时，会出现以下内容：

```
SQL*Plus: Release 10.2.0.3.0 - Production on Mon Oct 22 12:33:05 2012

Copyright (c) 1982, 2006, Oracle.  All Rights Reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options

SQL> SQL>
'INSQLPLUS
----------
IN sqlplus

SQL> SQL>   2    3    4    5    6    7    8    9   10   11   12   13   14   15  Disconnected from Oracle Database 11g Enterprise Edition Releas
e 11.2.0.2.0 - 64bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options 
```

如您所见，第一个记录 SELECT 语句 ('IN sqlplus') 使其进入，而底部的第二个 on 则没有，即执行没有到达它，因为两者之间存在错误。为什么 sqlplus 不在日志文件中写入此错误消息？

**一些评论后编辑：** 我们已经确定它很可能是由于 sqlplus 没有将 STDERR 转储到指定的日志文件中，其中只有 STDOUT 。如何格式化 sqlplus 命令以将两个流（STDOUT 和 ERR）组合到指定的日志文件中？我怀疑`<<!!>`这里很关键。

**更多实验后编辑：** 奇怪的是，一些错误消息被转储到 STDOUT 中，我猜想那些试图引用坏 DB 对象的语法正确。如果有一个 SQL 编译错误，它显然是在 STDERR 中。我所做的是在上面的第一个 SELECT 和 DECLARE 之后插入以下行：

```
DROP TABLE FAKE_NONEXISTING; 
```

该语句是合法的并且可以编译，但 FAKE_NONEXISTING 不存在，我在日志文件中得到以下内容：

```
SQL> SQL> DROP TABLE FAKE_NONEXISTING
           *
ERROR at line 1:
ORA-00942: table or view does not exist 
```

但是，我在日志文件中没有得到任何似乎是 SQL 编译错误的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:37:45.987

SQL*Plus 不会将输出与`stdout`和分开`stderr`。这实际上与重定向或外壳无关；如果您将该代码粘贴到交互式 SQL*Plus 会话中，您也会遇到同样的问题。您没有看到编译错误，因为您没有告诉它您已经提供了需要编译和执行的完整块。

一旦你启动[了一个 PL/SQL 块](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/overview.htm#i8859)——在这种情况下是`DECLARE`——之后出现的所有东西都被视为同一块的一部分，直到你提供一个[终止符`.`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_four.htm#i1039663)，或者`/`，它[告诉 SQL*Plus 执行当前缓冲区](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_four.htm#sthref293)，这里是整个匿名块。`select`您希望打印的第二个纯文本`The end`被视为不完整块的一部分，因此它也永远不会运行。您的脚本在`!!`遇到`/`，因为你没有，所以 SQL*Plus 不知道要执行什么。如果您确实将其粘贴到 SQL*Plus 中，您将在第 15 行看到相同的输出和等待输入的光标；脚本版本在此时被终止，大致相当于在 shell 脚本等待输入时按 ctrl-C。

但是您还缺少该块的其他几个关键部分。如果您在程序部分和终止处添加`BEGIN`和`END`周围，`/`您将开始看到错误，其中一些只是缺少分号；这应该让你开始：

```
#!/usr/bin/ksh

sqlplus $USER/$PASSWD@$DB<<!!>./logFile.log

SELECT 'IN sqlplus' FROM dual;

DECLARE -- start of PL/SQL block declaration
    tbl_xst integer;
BEGIN -- start of the actual block
    SELECT COUNT(*) INTO tbl_xst FROM SYS.ALL_TABLES
    WHERE table_name = 'SOME_TABLE'
    AND OWNER = 'SOME_OWNER';

    IF tbl_xst = 1 THEN
    BEGIN
        DROP TABLE SOME_OWNER.SOME_TABLE; -- this will error
    END; -- missing semi-colon, but separate BEGIN/END wrapper isn't really needed
    END IF; -- missing semi-colon
END; -- missing end to the block
/ - missing PL/SQL terminator/executor

-- now back in plain SQL mode
SELECT 'The end' FROM dual;
!! 
```

那现在应该报告一个错误`DROP`。那是一个 DDL 命令，不能像在 PL/SQL 中那样运行；您必须使用动态 SQL，例如：

```
 IF tbl_xst = 1 THEN
        EXECUTE IMMEDIATE 'DROP TABLE SOME_OWNER.SOME_TABLE';
    END IF; 
```

（这就是 William Stearns 提到的，尽管我强烈建议您不要*使用*`WHEN OTHERS`and no异常块，`RAISE`因为它会吞下尝试删除表时发生的任何错误。）

顺便说一句，如果您不想在输出中看到 SQL*Plus 版本、连接和提示/行号信息，您可以使用[-s[ilent]](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_three.htm#sthref226)选项来抑制它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-22T17:16:09.063

要将错误输出也重定向到您的日志文件，您需要在此处将 2>&1 附加到您的行：

```
sqlplus $USER/$PASSWD@$DB<<!!>./logFile.log 2>&1 
```

根据我自己的评论更新......我可能会添加 >> 而不是 > 来附加现有文件，以便您的日志可以随着时间的推移使用。

```
#!/usr/bin/ksh

sqlplus $USER/$PASSWD@$DB<<+EOF>>./logFile.log 2>&1

SELECT 'IN sqlplus' FROM dual;

BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE SOME_OWNER.SOME_TABLE';
    EXCEPTION WHEN OTHERS THEN NULL;
END;

SELECT 'The end' FROM dual;
+EOF 
```

# jquery - 在数据表中显示数百万条记录

> ID：13015836
> 
> 赞同：-6
> 
> 时间：2012-10-22T16:38:58.533
> 
> 标签：jquery, jqgrid, liferay, datatables, alloy-ui

我需要在带有分页的表中显示数百万条记录。

所以想知道根据性能哪一个会更好。

1.jquery jqGrid

2.合金UI数据表

3.数据表

环境：Liferay 6.0 CE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:56:55.157

您是否有一个显示器可以在一个表格中显示数百万条数据而无需分页？

你认识一个会读取所有数百万条数据记录的用户吗？

如果您对这两个问题的回答都是“否”，那么您应该清楚地知道您确实需要分页。

如果您想更多地考虑这个问题，您就会明白没有用户会浏览数百万行的所有页面。所以用分页显示数百万条记录事件也是没有意义的。

人们可能需要的是一种**灵活的方式来过滤或**在数据集中搜索。在这种情况下，它只能显示几行数据。所以用户应该成为一些像[搜索工具栏](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching#calling_convention)一样的控件，并且应该得到一些搜索对话框（[简单的](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching)或[复杂](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#calling_conventions)的），用户可以使用它来过滤数据。您可以提供某种面向问题的搜索模板。请参阅[此处](https://stackoverflow.com/a/9310762/315935)的 jqGrid 中使用模板的示例。我基于 jqGrid 进行所有引用，但是在您将使用的任何类型的表中都存在相同的问题。

无论如何，您应该更改您的原始问题并考虑一些替代方案，这些替代方案提供用户 GUI 来分析与某些过滤器相关的数据，而不仅仅是在网格中显示大量不需要的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T10:19:38.560

没关系：如果您向客户端传输数百万条记录，然后依赖任何 JS 库进行分页，您很快就会在浏览器上耗尽内存（如果您的用户耐心等待要传输的数据）。

您宁愿寻找服务器和客户端分页和动态加载的组合。在那里，我建议使用您最熟悉的库和服务器端框架，因为您传输的数据量并不能证明进行“性能优化”是合理的。不转移所有内容*是*您可以在性能方面进行的优化 - 不是 JS-library 的选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:11:42.563

你为什么不喜欢 liferay taglib 来显示你的数据？Liferay 有一个搜索容器标签库，允许您构建自定义的基本/高级搜索表单并显示过滤数据的分页结果。它还允许用户从 5 到 75 选择他们喜欢的页面大小（但我认为限制可以通过编程方式修改）

它很容易实现，您可以在 liferay 源代码中找到一些 taglib 使用示例。

基本搜索容器（没有搜索表单）可以用 3 个标签完成，只需几行 jsp 代码......

如果你喜欢我可以发布一个例子..

# c++ - 将常规`set`转换为c++中boost的`unordered_set`

> ID：13015841
> 
> 赞同：2
> 
> 时间：2012-10-22T16:39:24.523
> 
> 标签：c++, boost

我有一个小程序，主要使用常规`set`的，但现在我的性能很差，我决定`unordered_set`从 boost 中使用。我乐观地认为，简单的搜索和替换 from `set`to`unordered_set`可以使用 ofc 附加标题，例如：

```
#include <boost/unordered_set.hpp>
using boost::unordered_set; 
```

但现在我有很多编译错误。我研究过它并意识到即使是简单的嵌套`for`循环也不起作用。这是一个例子：

```
unordered_set<unordered_set<int> > s;

unordered_set<int> temp;
temp.insert(5);
temp.insert(6);
temp.insert(7);

s.insert(temp);
s.insert(temp);

unordered_set<unordered_set<int> >::iterator it1;
unordered_set<int>::iterator it2;
for (it1 = s.begin(); it1 != s.end(); it1++) {
    for (it2 = it1->begin(); it2 != it1->end(); it2++) {
        cout << *it2 << endl;
    }
} 
```

使用时编译得很好，`set`但给了我：

```
In file included from /usr/include/boost/functional/hash/hash.hpp:535:0,
                 from /usr/include/boost/functional/hash.hpp:6,
                 from /usr/include/boost/unordered/unordered_set.hpp:17,
                 from /usr/include/boost/unordered_set.hpp:16,
                 from foo.cpp:4:
/usr/include/boost/functional/hash/extensions.hpp: In member function ‘std::size_t boost::hash<T>::operator()(const T&) const [with T = boost::unordered_set<int>, std::size_t = long uns
igned int]’:
/usr/include/boost/unordered/detail/unique.hpp:363:1:   instantiated from ‘boost::unordered_detail::hash_unique_table<T>::emplace_return boost::unordered_detail::hash_unique_table<T>::e
mplace_impl(const key_type&, const Arg0&) [with Arg0 = boost::unordered_set<int>, T = boost::unordered_detail::set<boost::hash<boost::unordered_set<int> >, std::equal_to<boost::unordere
d_set<int> >, std::allocator<boost::unordered_set<int> > >, boost::unordered_detail::hash_unique_table<T>::emplace_return = std::pair<boost::unordered_detail::hash_iterator_base<std::al
locator<boost::unordered_set<int> >, boost::unordered_detail::ungrouped>, bool>, typename T::iterator_base = boost::unordered_detail::hash_iterator_base<std::allocator<boost::unordered_
set<int> >, boost::unordered_detail::ungrouped>, boost::unordered_detail::hash_unique_table<T>::key_type = boost::unordered_set<int>]’
/usr/include/boost/unordered/detail/unique.hpp:398:36:   instantiated from ‘boost::unordered_detail::hash_unique_table<T>::emplace_return boost::unordered_detail::hash_unique_table<T>::
emplace(const Arg0&) [with Arg0 = boost::unordered_set<int>, T = boost::unordered_detail::set<boost::hash<boost::unordered_set<int> >, std::equal_to<boost::unordered_set<int> >, std::al
locator<boost::unordered_set<int> > >, boost::unordered_detail::hash_unique_table<T>::emplace_return = std::pair<boost::unordered_detail::hash_iterator_base<std::allocator<boost::unorde
red_set<int> >, boost::unordered_detail::ungrouped>, bool>, typename T::iterator_base = boost::unordered_detail::hash_iterator_base<std::allocator<boost::unordered_set<int> >, boost::un
ordered_detail::ungrouped>]’
/usr/include/boost/unordered/unordered_set.hpp:339:40:   instantiated from ‘std::pair<boost::unordered_detail::hash_const_iterator<typename boost::unordered_detail::rebind_wrap<A, T>::t
ype, boost::unordered_detail::ungrouped>, bool> boost::unordered_set<T, H, P, A>::insert(const value_type&) [with T = boost::unordered_set<int>, H = boost::hash<boost::unordered_set<int
> >, P = std::equal_to<boost::unordered_set<int> >, A = std::allocator<boost::unordered_set<int> >, typename boost::unordered_detail::rebind_wrap<A, T>::type = std::allocator<boost::uno
rdered_set<int> >, boost::unordered_set<T, H, P, A>::value_type = boost::unordered_set<int>]’
foo.cpp:17:18:   instantiated from here
/usr/include/boost/functional/hash/extensions.hpp:176:34: error: no matching function for call to ‘hash_value(const boost::unordered_set<int>&)’
/usr/include/boost/functional/hash/extensions.hpp:176:34: note: candidates are:
/usr/include/boost/functional/hash/hash.hpp:144:24: note: std::size_t boost::hash_value(bool) 
```

还有一些使用时`unordered_set`。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:49:03.380

您缺少 unordered_sets 的哈希函数。坏消息是，你不能轻易地构建一个。例如，您插入内部集合的顺序可能会导致容器内的顺序不同，因此如果您使用天真的方式来构造它（就像我在此答案的先前版本中所做的那样：））

无论哪种方式，您都需要为您的内部集合选择一个不同的容器，并且这些集合需要进行排序。我建议您使用`std::vector`or `std::set`。然后你需要一个散列函子：你可以用它`boost::hash_range`来轻松地构造一个：

```
template <class T>
struct HashContainer
{
   std::size_t operator()(T const& Rhs) const
   {
     return boost::hash_range(Rhs.begin(), Rhs.end());
   }
}; 
```

它可能是`std::vector<int>`用作您的内部容器的最佳选择，使整个东西成为一个`boost::unordered_set<std::vector<int>, HashContainer<std::vector<int> > >`. 请注意，您不一定需要使用相同的容器来构建和存储内部集合。如果你想使用它，你可以：

*   `std::vector<int>`直接用于构建内部集。为此，推送所有值，然后使用`std::sort`and`std::unique`建立集合属性，然后插入到外部集合中。（可能是性能首选）
*   `std::set<int>`在插入调用中，使用 (Iterator, Iterator) 构造函数使用并复制到临时向量中。（这是最简单的代码）
*   使用`boost::unordered_set<int>`，复制到一个临时向量中`std::sort`，（不需要唯一的）并插入。

您也可以`std::set<int>`用作内部容器，使整个套装成为一个`boost::unordered_set<std::set<int>, HashContainer<std::set<int> > >`. 在这种情况下，您可以使用任何容器来构造内部集。如果您使用`std::set<int>`，您可以移动/复制到外部容器中。我你使用另一个容器，你可以使用`std::set<int>::set(Iterator b, Iterator e)`构造函数。

请注意，使用 C++11 移动语义可以在此处获得巨大的性能优势，但在这种情况下，您应该使用相同的容器来构造和存储内部集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T18:12:49.463

我没有足够的 REP 来评论接受的答案。但我在关于 hash_range 的 boost 文档中看到了这一点

“hash_range 对元素的顺序很敏感，因此不适合将其与无序容器一起使用。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:48:01.063

使用`unordered`容器完全是关于散列，并且您用作键的每种类型都应该具有分配的散列函数（当然还有`operator==`），以便用作`unordered`容器中的键。因此，当您`unordered_set<int>`用作另一个键时，`unordered_set`您必须为其提供哈希函数。`<boost/functional/hash.hpp>`有关为类型提供哈希函数的更多信息，请参阅

# java - 创建一个 Ant 目标来运行一个 jar 中的 java 类

> ID：13015842
> 
> 赞同：1
> 
> 时间：2012-10-22T16:39:24.763
> 
> 标签：java, ant

我正在处理一个涉及一个包含许多不同源文件的大 jar 的问题。其中一个源文件是一个测试类，我想从另一个项目运行该测试类。这个测试类有一个主类，应该使用从 ant 传递给它的参数。虽然问题似乎是类路径。我不断收到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: junit.framework.TestCase 
```

这是我的目标被剥离出来。

```
 <target name="lookup-excute" description="Runs a Look up on all event files in the input folder.">
    <java classname="com.testing.LookupTest" failonerror="true" fork="yes">
        <arg value="${events.location}"/>
        <classpath>
            <pathelement path="..${file.separator}jars${file.separator}testing.jar"/>
        </classpath>
    </java>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:33:46.683

一般来说：当你有一个 ClassNotFound 时，你应该在你的一个 jar 文件中找到这个类。您只需打开一个 jar（使用与 zip 文件相同的工具）并尝试浏览 junit/framework 并找到 TestCase.class jar。

当您在任何 jar 中都看不到该类时，您可以在互联网（或[jarfinder](http://www.jarfinder.com/)）中搜索类名。然后你知道你需要一个额外的 jar，在这种情况下就像 junit。当你知道你想要“junit”时，你可以从主页下载它，或者在大多数情况下很容易从 maven: [maven search](http://search.maven.org/)下载。

我不知道你是否可以直接运行junit测试。通常你为他们使用[junit 任务](http://ant.apache.org/manual/Tasks/junit.html)。

# image - 在 MATLAB 中批量保存不同文件名的图像文件

> ID：13015848
> 
> 赞同：3
> 
> 时间：2012-10-22T16:39:43.750
> 
> 标签：image, matlab, batch-file, save

我正在对图像文件集进行一些批处理，这要求文件应在文件名末尾使用附加的“_corrected”字符串保存，例如“IMG_001.tif”应在处理后保存为“IMG_001_corrected”。 .jpg'。

这是我的代码：

```
FileList = dir('srgb8bit/*.tif');
N = size(FileList,1);

for k = 1:N

   % get the file name:
   filename = FileList(k).name;
   I = imread(filename);
   Icorr = CorrectedRetinexFM(I,8);
   ** Here should go the save command** 
```

最好能够选择不同的目录来保存它们。这怎么可能？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:53:35.223

Use [fileparts](http://www.mathworks.com/help/matlab/ref/fileparts.html) to split the file name and its extension:

```
[pathstr, name, ext] = fileparts(FileList(k).name); 
```

Note that `pathstr` is "" since you already stripped that.

And then [imwrite](http://www.mathworks.com/help/matlab/ref/imwrite.html) like this

```
imwrite(Icorr, [name '_corrected.jpg']); 
```

# vb.net - 参数“索引”不是有效值

> ID：13015849
> 
> 赞同：1
> 
> 时间：2012-10-22T16:39:50.270
> 
> 标签：vb.net

我正在开发一个提交 dcm 文件的工具，现在我有一个错误，当它们被用作其他添加文件的源文件时，我拒绝提交已删除的文件。

程序 ：

1- 复制名为 FILE_A 的文件并将其命名为 FILE_B 并对 FILE_B 中的参数进行一些更改，然后使用工具提交更改（选择 FILE_A 作为参考文件）.. 工作得很好。

2-删除FILE_A并保留FILE_B，然后使用该工具提交..工具将崩溃并被关闭。

这是引发异常并关闭工具的行：

```
If FilesGrid.Item(0, a).Value = True And FilesGrid.Item(2, a).Value.ToString() = "Removed" Then

    FilesRemoved.Add(FileLocalPos.Item(FilesGrid.Item(1, a).Value.ToString))
    myFileVector.Add(FileLocalPos.Item(FilesGrid.Item(1, a).Value.ToString))

End If 
```

异常消息是：

`Argument "index" is not a valid value`

非常感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:46:45.747

只是一个猜测：

保存`FilesGrid.Item(1, a).Value.ToString`到变量：

```
If FilesGrid.Item(0, a).Value = True And FilesGrid.Item(2, a).Value.ToString() = "Removed" Then
    Dim l_itemIndex = FilesGrid.Item(1, a).Value.ToString

    FilesRemoved.Add(FileLocalPos.Item(l_itemIndex))
    myFileVector.Add(FileLocalPos.Item(l_itemIndex))
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T03:44:56.783

此消息表示 Collection 不包含您尝试使用 Item 功能定位的项目。

要防止出现此消息，请在尝试引用项目之前使用 Contains 方法。例如

```
If FilesGrid.Contains(0, a) and FilesGrid.Contains(2, 1) Then
    If FilesGrid.Item(0, a).Value = True And FilesGrid.Item(2, a).Value.ToString() = "Removed" Then 
```

# sql-server - IIS 无法连接到 Sql Server - Windows Server 2008 Standard

> ID：13015851
> 
> 赞同：0
> 
> 时间：2012-10-22T16:39:52.020
> 
> 标签：sql-server, iis, connection, sql-server-2008-r2, database-connection

好的，我在这里阅读了一堆相关问题，并且一直在谷歌搜索，但无法弄清楚。

我们的一位客户希望我们在服务器上设置他们的网站，该服务器也运行 Sql Server 和网站的数据库；也就是***同一个盒子***。

该网站无法连接到数据库，但产生错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

我还检查了 Windows 事件日志，看看它是否提供了任何进一步的信息，但它只是重述了相同的消息，没有额外的信息。

服务器是 Windows Server 2008 Standard。
IIS 是包含在该版本 Windows 中的 IIS 版本。
Sql Server 是 Sql Server 2008 R2 标准版。
我有一个我编写的用于连接到 Sql Server 的数据访问库。

*   我已经`Remote Connections`在 Sql Server 中验证了（尽管它是同一个框）。
*   我已经验证`SQL and Windows Authentication`是否允许 Sql 登录。
*   我已经通过测试 Windows 应用程序验证了我的连接字符串和数据访问层。
*   我已经使用 PortQryUI 来验证 Sql Server 是否可用。

我还尝试了连接字符串的各种变体，例如：

*   我的服务器\实例
*   本地主机\实例
*   127.0.0.1\实例
*   （本地）\实例
*   tcp:(本地)\INSTANCE
*   np:(本地)\INSTANCE
*   。\实例
*   我的.PUB.IP.添加\实例

所以 Sql Server 似乎设置正确。
我的测试 Windows 应用程序工作正常，确认我的连接字符串是正确的并且我的数据访问层可以连接。

这似乎与 IIS 相关，并且其中的某些设置必须阻止连接。

**附加：**
Windows 防火墙未运行。
Sql 浏览器服务正在运行。
在服务器配置中启用所有网络协议。

我正在使用一个`System.Data.SqlClient.SqlConnectionStringBuilder`对象来构建我的连接字符串。为了验证正在使用的 Sql 身份验证，我输出了构建器返回的 ConnectionString：

> 数据源="(local)\INSTANCE";初始目录=mydb;用户ID=myuser;密码=mypassword

# sql - 构造一个简单的连接

> ID：13015853
> 
> 赞同：0
> 
> 时间：2012-10-22T16:39:55.950
> 
> 标签：sql, join

我正在尝试对下表进行简单的联接，但我不确定如何准确地进行。

表格1：

```
grad_code  award_level  total
1.1010     2            10
1.1010     3            4
3.0104     2            33 
```

表 2：

```
grad_code  occ_code openings
1.1010     22-1193  91
1.1010     55-2112  2
2.0011     22-1193  53
3.0104     99-4909  919 
```

期望的结果：

```
grad_code  award_level  occ_code  total  openings
1.1010     2            22-1193   10     91
1.1010     2            55-2112   10     2
1.1010     3            22-1193   4      91
1.1010     3            55-2112   4      2
3.0104     2            99-4909   33     919 
```

所以在第一个表中，grad_code和award_level的配对构成一个唯一键，表2中的grad_code和occ_code也是如此。还要注意表2中不存在于表1中的任何grad_code都会被忽略。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:43:35.840

只需在 grad_code 上进行 INNER 连接。

```
SELECT t1.grad_code, t1.award_level, t2.occ_code, t1.total, t2.openings
FROM Table1 AS t1
  INNER JOIN Table2 AS t2
    ON (t1.grad_code = t2.grad_code) 
```

# c++ - 在循环中，数组总是被清除

> ID：13015854
> 
> 赞同：-2
> 
> 时间：2012-10-22T16:39:59.070
> 
> 标签：c++, infinite-loop

每次我的程序循环存储在 an`int array[]`中的数据都会被清除。

当用户选择第一个选项时，我每次都进行计数和计数检查，但它也被重置而不是增量。

```
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

class MissionPlan //start of MissionPlan class
{
    public:
    MissionPlan();

}; //end of MissionPlan class

MissionPlan::MissionPlan()
{
    int choice; // to capture what user inputs into menu
    int count=0; // to count how many times it save into array and use it later for looping
    int count2=0;//for adding x and y coordinates correctly into array
    int coor [100]; //storing x and y coordinates
    float index[100];//storing the civ index
    cout<<"Welcome to Mission Plan program!"<<endl<<endl<<"1)      Input statistical data"<<endl<<"2)      Compute civ.index value(for all records)"<<endl<<
    "3)      Print top 5 exploration destinations"<<endl<<"4)      Print total travel distance"<<endl<<endl<<"Please enter your choice: ";
    cin>>choice;
    for(;;)
    {
        if(choice == 1)
        {   
            cout<<count<<endl;
            cout<<count2<<endl; 
            int x,y; // for reading x and y coordinate
            cout<<"Please enter x-ordinate: "; //Display x-ordinate
            cin>>x;//reading input from user and put into x
            coor[count2] = x;//storing x coordinate into coor[] array
            cout<<"Please enter y-ordinate: ";//Display y-ordinate
            cin>>y;//reading input from user and put into x
            coor[1+count2] = y;//storing y coordinate into coor[] array
            cin.clear();//clearing cin
            cin.ignore(10000,'\n');//to ignore char to 10000 and a linefeed
            count++;
            count2 +=2;
            cout<<count<<endl;
            cout<<count2<<endl;
            return;         
        }
        else if(choice == 2)
        {       
            cout<<"choice 2 "<<endl;//to display
            return;
        }
        else if(choice==3)
        {

            cout<<"choice 3"<<endl;

            return;
        }

        else
            cout<<"Please enter number 1 to 4 only!"<<endl;
    }//end of while loop
}//end of MissionPlan()
int main()
{

    for(;;)
{
MissionPlan();
}
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:45:43.277

您在 function 中声明了数组`MissionPlan()`，因此它们位于堆栈下。当函数返回（退出）时，不能保证数组会被保留，它们很可能会“重新初始化”，即归零。

如果需要保留数组的内容，有几种选择，一种是在**全局范围内**（即在所有函数之外）声明数组，另一种是`static`在数组变量中添加修饰符，使数组仅初始化一次，其内容将在整个程序中保留：

```
static int coor [100]; //storing x and y coordinates
static float index[100];//storing the civ index 
```

另一种选择是在函数内部声明变量`main()`并通过函数参数传递它们。

* * *

我看到您`class`在代码中使用了它们，但似乎您没有正确使用它们：您只是一直在调用构造函数？（我很困惑它是否会起作用......）

我认为在您的情况下，您只需定义一个简单的函数。或者，如果您真的使用`class`，请在 中保留它的实例`main()`，将要重用的数组和其他变量放入 中`class`，然后创建`MissionPlan()`一个函数而不是构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T16:46:34.467

在每次迭代结束时，您都会使`return`您无法运行功能。当您再次输入该函数时，所有局部变量都会重新初始化。将它们从函数体中取出。或者只是将外部无限循环`main()`放入`MissionPlan()`.

# ruby-on-rails-3 - Solr 有没有办法搜索模糊和精确？

> ID：13015856
> 
> 赞同：0
> 
> 时间：2012-10-22T16:40:08.413
> 
> 标签：ruby-on-rails-3, solr, sunspot-rails, fuzzy-search, exact-match

感谢您抽出宝贵的时间

## 问题

我在基于模糊名称搜索和精确区域搜索搜索记录时遇到问题。这就是我现在所拥有的：

## 我现在拥有的

```
# :klantnaam is a param from a search-form
@param = Staffingcustomer.search do
    fulltext params[:klantnaam]
end
@staffingcustomers = @param.results 
```

还有另一个字段，“区域”。
结果应该只与某个“区域”有关。

## 示例要求

例如，
我是 Regio 3 的用户。我想使用模糊名称搜索 Anne 和我自己的 Regio 3 可视化/选择所有 Staffingcustomers。所以，我不想看到带有 Regio 2 的 Staffingcustomers。

现在发生的事情是：

```
@param = Staffingcustomer.search do
     fulltext 'anne'
end
@staffingcustomers = @param.results 
```

将返回所有不同区域的所有 Staffingcustomers...

## 经过一些研究/逻辑思考

我认为它可能类似于以下内容：

```
@param = Staffingcustomer.search do
    fulltext params[:klantnaam]
end
@staffingcustomers = @param.results.find(:all, :conditions => {:regio => 3}) 
```

或者

```
@param = Staffingcustomer.search do
    fulltext params[:klantnaam] and fulltext '3'   ## or 3, without the quotes
end
@staffingcustomers = @param.results 
```

但这似乎行不通。

你能帮我解决这个问题吗？

### 逻辑问题

实际上，这是对一个巨大表的“精确选择”部分的模糊搜索。

希望你能帮忙。

提前致谢。

克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:00:58.370

我想你想要这样的东西：

```
# find Staffing Customers with Regio 3 and text of params[:klantnaam]
@param = Staffingcustomer.search do
  with(:regio, 3)
  fulltext params[:klantnaam]
end
@staffingcustomers = @param.results 
```

参考[https://github.com/sunspot/sunspot#readme](https://github.com/sunspot/sunspot#readme)。您还必须将 Staffingcustomer 模型的 Searchable 块中的区域索引为您存储在数据库中的任何数据类型（例如整数）。

# java - 有没有办法将 @Context HttpServletRequest 注入 Aspect 对象？

> ID：13015857
> 
> 赞同：1
> 
> 时间：2012-10-22T16:40:08.737
> 
> 标签：java, rest, aspectj

我有用注释的类`@Aspect`和用注释的方法`@Before("execution...`
这将通过注释为rest ws的类切入

```
@Component
@Path("/xyz")
@Produces({ MediaType.APPLICATION_JSON }) 
```

无论如何将http请求/响应注入aspect-j？

# joomla - 从 Joomla 1.5.26 升级/迁移到 Joomla 3.0.1

> ID：13015859
> 
> 赞同：3
> 
> 时间：2012-10-22T16:40:15.810
> 
> 标签：joomla, joomla1.5, joomla2.5, joomla3.0

我有一个 joomla 1.5.26 站点并想升级到 Joomla 3.0.1。那可能吗？如果有，步骤是什么？我正在寻找像 JUpgrade 这样的安装程序来执行此操作。

我意识到这是一个两步过程：从 Joomla 1.5.26 迁移到 Joomla 2.5

湾。从 Joomla 2.5 迁移到 Joomla 3.0.1

使用组件`JUpgrade`备份文件后用于这两个步骤`Akeeba / XCloner`

我是对的还是我错过了一步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:47:07.523

如您所知，您必须先升级到 Joomla 2.5，然后再升级到 3.x

升级到 Joomla 2.5 后，下载[2.5-3.0.1 更新补丁](http://joomlacode.org/gf/download/frsrelease/17575/76729/Joomla_3.0.1-Stable-Update_Package.zip)并上传到 FTP 的根文件夹并解压缩。

当然，在上传补丁之前备份您的站点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T09:59:41.557

最好坚持使用 Joomla 2.5，因为它被推荐到 2014 年。这是 joomla .org 引用的声明

“Joomla 2.5 是 Joomla 的长期支持 (LTS) 版本。这意味着它已经经历了数月的实际测试。Joomla 2.5 稳定、经过测试且可靠。Joomla 2.5 是 Joomla.org 使用的版本。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T19:56:45.350

这对您的网站来说可能是一大步。如果我是你，我会升级到 2.5。

**Joomla！3.0 的发布时间很短**，几个月后您将不得不再次升级到 3.1。

**Joomla！2.5 是当前的稳定版本。**我会推荐它！

[Joomla！下载](http://www.joomla.org/download.html)页面还指出：

*   Joomla！2.5.x（推荐用于大多数网站）
*   3.0.x（推荐给开发人员和早期采用者）

此外，看看**[Joomla！3.0。常问问题](http://community.joomla.org/blogs/community/1683-joomla-30-faq.html)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T12:38:05.940

是否执行 2.5 或 3 完全取决于您是否正在迁移已准备好 Joomla 3 的第三方扩展。如果您只是使用核心，Joomla 3 是 2.5 的一个简单更新，除了您需要更新您的模板......但事实是来自 1.5 您需要为 2.5 或 3 更改您的模板，所以您还不如去J3，而不必再做一次。就个人而言，除非我需要扩展，否则我只会为任何新站点做 J3，因为您将获得 3 年的支持并做好移动准备。您会发现关于 2.5 及更高版本的一件事是，您需要的扩展比过去少得多。

从 1.5 迁移的最大问题是 2.5+ 要求资产表正确，在某些情况下 JUpdate 似乎仍然使其不正确（通常如果您有使用内容表的第三方扩展）。如果您的桌子大小合适，您可以进行视觉扫描并确保它看起来正常。有一些方法可以修复损坏的资产，但从不直接修复。有一个名为 ACL Manager 的商业产品具有资产修复功能，我还有一个可以运行简单修复的应用程序，您可以尝试[https://github.com/elinw/AssetFix](https://github.com/elinw/AssetFix)。

# python - Python 计算文件扩展名

> ID：13015862
> 
> 赞同：3
> 
> 时间：2012-10-22T16:40:22.497
> 
> 标签：python

我正在尝试打印某个目录中的文件扩展名以及每个扩展名的计数。

这是我目前所拥有的......

```
import os 
import glob

os.chdir(r"C:\Python32\test")
x = glob.glob("*.*")
for i x:
    print(i)

>>> file1.py
    file2.py
    file3.py
    file4.docx
    file5.csv 
```

所以我被卡住了，我需要我的整体输出......

```
py    3
docx  1
csv   1 
```

我曾尝试使用 i.split(".") 之类的东西，但我被卡住了。我想我需要将扩展​​名放在一个列表中，然后计算该列表，但这就是我遇到问题的地方。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T16:42:41.010

使用[os.path.splitext](http://docs.python.org/library/os.path.html#os.path.splitext)查找扩展名，使用[collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)统计扩展名的类型。

```
import os 
import glob
import collections

dirpath = r"C:\Python32\test"
os.chdir(dirpath)
cnt = collections.Counter()
for filename in glob.glob("*"):
    name, ext = os.path.splitext(filename)
    cnt[ext] += 1
print(cnt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:46:17.690

你可以使用`collections.Counter`

```
from collections import Counter
import os
ext_count = Counter((ext for base, ext in (os.path.splitext(fname) for fname in your_list))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-22T09:50:35.237

```
import collections
import os

cnt = collections.Counter()
def get_file_format_count():
    for root_dir, sub_dirs, files in os.walk("."):
        for filename in files:
            name, ext = os.path.splitext(filename)
            cnt[ext] += 1
    return cnt

print get_file_format_count() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:36:24.707

此实现将计算每个扩展的出现次数并将其放入变量 c。通过在计数器上使用 most_common 方法，它将首先打印最常见的扩展名，就像您在示例输出中一样

```
from os.path import join, splitext
from glob import glob
from collections import Counter

path = r'C:\Python32\test'

c = Counter([splitext(i)[1][1:] for i in glob(join(path, '*'))])
for ext, count in c.most_common():
    print ext, count 
```

**输出**

```
py 3
docx 1
csv 1 
```

# php - SQL 选择具有匹配值的行

> ID：13015865
> 
> 赞同：2
> 
> 时间：2012-10-22T16:40:32.517
> 
> 标签：php, sql, select

我正在尝试使用 php 和 sql 组合一个 SELECT 语句，但我很难选择我想要的项目。

假设我的桌子看起来像这样......

* * *

```
master_record_id     credit_id     credit_value
118                  5             Brian J
119                  5             Brian J
120                  7             Katie W
121                  5             Brian J
121                  7             Katie W
125                  7             Katie W 
```

* * *

我正在尝试找出其中`master_record_id`同时包含 Katie W 和 Brian J 的内容。所以我选择了`credit_value = Brian J OR Katie W`，这就是结果。

基于这个小选择，我可以看到我想要的答案是`121`，但我该如何选择呢？我想找到`master_record_id`包含 Katie W 和 Brian J 的...

有没有办法让我说“选择包含 Katie W 和 Brian J 的 master_record_id”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T16:44:41.137

您需要使用*自加入*：

```
SELECT a.master_record_id
FROM tablename a JOIN tablename b USING (master_record_id)
WHERE a.credit_value = 'Brian J'
AND b.credit_value = 'Katie W' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:44:30.690

```
select master_record_id
from your_table
where credit_value in ('Brian J', 'Katie W')
group by master_record_id
having count(distinct credit_value) = 2 
```

你必须将子句中的值调整为`having`子句中值的数量`in`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:52:30.510

由于性能，这不是最好的方法，但无论如何它应该工作：

```
select master_record_id, credit_id, credit_value
from your_table
where master_record_id in (
     select master_record_id from your_table where credit_value = 'Brian J')
and master_record_id in (
         select master_record_id from your_table where credit_value = 'Katie W') 
```

它将返回所有包含 Katie W 和 Brian J 的**master_record_id**记录

# java - Java 枚举可变性用例和可能性？

> ID：13015870
> 
> 赞同：13
> 
> 时间：2012-10-22T16:40:59.053
> 
> 标签：java, spring, enums

我不知道我是否是唯一知道这一点的人，但枚举的值并不是隐含的最终值，可以修改。

```
 enum EnumTest {
    TOTO("TOTO 1"),
    TATA("TATA 2"),
    ;

    private String str;

    private EnumTest(String str) {
      this.str = str;
    }

    @Override
    public String toString() {
      return str;
    }
  }

  public static void main(String[] args) {
    System.out.println(EnumTest.TATA);
    EnumTest.TATA.str = "newVal";
    System.out.println(EnumTest.TATA);
  }

TATA 2
newVal 
```

`TOTO("TOTO 1")`这些值通常在创建实例时初始化（这不是问题的重点，只是想知道我是否是唯一一个知道这一点的人。

* * *

我想知道的是是否有任何用例来创建可变枚举？

而且我还想知道我们可以用枚举做些什么的限制（好的做法与否）。我还没有测试过，但也许可以用 Spring bean 注入枚举？至少看起来我们可以注释每个实例（例如@Deprecated 可以很好地工作）以及方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T18:50:37.120

一个可能的用例是延迟初始化（在第一次使用时计算一些字段值，如果它们经常根本不使用），或者是“正常”的可变单例对象（如注册表等）。

但是，在大多数情况下，枚举对象应该是不可变的，并且它们的字段是最终的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T16:50:23.247

虽然您在这里指出了一个有趣的事实，但就我而言，可变枚举字段没有用例。使用这种语言的“特性”（“bug”？）是一个坏主意的原因有很多，其中最重要的是可能会使其他开发人员感到困惑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T11:40:09.710

作为对 Alex D 的回答和评论的回应，我接受了他发布一个可能的用例的建议。让我们以可以计算重力等的行星的旧标准枚举示例为例。想象一下，你想保持每个星球上人类殖民地的数量。是的，您可以使用 EnumMap，但我可以看到可能需要越来越多的可变字段的情况，并且为每个值使用单独的映射或单独的类来保存与枚举关联的可变值将是违反直觉的。

正如我在评论中所说，总的来说，我认为枚举通常是并且应该是不可变的，但我觉得说没有用例太强了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-16T16:34:59.997

我认为没有理由禁止在`enum`s 中使用可变字段。一个人使用 an`enum`来声明该类型的值属于有限（和已知）的一组可能性中的一个。这并不意味着这些值不能具有随时间演变的属性。

有些人要求提供这种场景的用例。一个示例是使用`enum`诸如 之类的类型`ErrorCategory`，它将错误分类为任意数量的预定义类别之一（例如：`DocumentationError`、`SemanticError`、`LayoutError`...）。

假设它们`ErrorCategories`具有诸如`requiresInstantIntervention`or之类的属性`shouldFailBuild`。我可以想象这些属性的值可能会随着时间而改变，或者它们可以是用户可配置的。

我意识到有（许多）其他方式来实现这一点（例如`EnumMaps`上面确实提到的），人们总是可以争论风格，但对我来说，这样使用`enum`s 本身并没有错。由于`enum`s 是 java 中的引用类型，因此 s 的行为`==`保持不变，就好像一开始就没有可变属性一样。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-27T07:18:04.907

枚举实例是枚举类的公共静态最终字段。所以如果它是可变的，你可以在另一个线程中修改它的状态。这可能不是您想要的，如果您没有意识到这一点，可能会导致问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-07T21:20:25.600

如果我错了，请纠正我，但 Enum 是 Java 中最简单（更重要的是也许是最安全）的方式，可以在应用程序的整个生命周期中实际拥有一个真正的单例（如果我们不能使用 CDI），就像使用标准静态 getInstance () 方法模式如果过于天真地实现，仍然可能产生同一个类的多个实例。

[同样，实现 Serializable 也可能导致产生不止一个实例，而 Enum 已经为我们处理好了它，没有意外的结果和样板。]

此外，文档清楚地表明 Enum 类型不仅仅是常量。所以我想说，只要绝对有必要在应用程序中有一个真正的单例，一个枚举（甚至是可变的）可能被认为是合理的使用。

但是，在我看来，这个问题不可避免地倾向于有点固执己见，并且不能完全公正地回答，因为有些开发人员支持不变性（我并不是说没有充分的理由），但也有开发人员谁在这方面没有那么严格，基本的文档技能有时可能与代码本身一样重要（是什么阻止我们强调枚举常量的内部状态实际上在 javadoc 中是可变的这一事实？）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-07T19:22:32.807

我使用可变枚举来处理我控制之外的序列化数值，我想在使用和中继时保留这些数值。例如

```
VALUE_A = 1
VALUE_B = 13
VALUE_C = 17
VALUE_UNRECOGNIZED 
```

*例如*，如果我收到 61 的序列化值怎么办？我不认识它，所以我没有枚举常量，我不会以其他方式处理它，但我不想让它失败：我想保留序列化值并将其转发。

也许规范的方法可能是创建一个具有两个字段的新类：一个不可变的枚举和原始值，但是，恕我直言，这似乎更麻烦。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-10-22T16:45:59.580

> 我想知道的是是否有任何用例来创建可变枚举？

枚举常量本身不是可变的，它们的字段是可变的。

# sql-server - SQL 查询性能低下

> ID：13015871
> 
> 赞同：1
> 
> 时间：2012-10-22T16:41:07.370
> 
> 标签：sql-server, sql-server-2005

我在及时运行此查询时遇到了一些问题，我的“LineItemsMap”表增长到大约一百万行。任何关于我可以创建的索引或更好的查询逻辑的建议将不胜感激。

```
 select 
      Id, 
      [Description],
      SUM(CASE WHEN t1.compliant = 1  THEN 1 ELSE 0 END) as Compliant,
      SUM(CASE WHEN t1.compliant = 0  THEN 1 ELSE 0 END) as NonCompliant,
      LastChecked 
from lineitems as t0
      left outer join lineitemsmap as t1 on t0.id = t1.lineitemid
      left outer join art_blob as t2 on t2.art_blob_id = t1.blobid
      left outer join art_asset as t3 on t3.art_asset_id = t2.art_asset_id
      left outer join lineitemexceptions as t4 on t4.assetid = t3.art_asset_id and t4.lineitemid = t1.lineitemid
where t0.active = 1 and t4.assetid is null
group by t0.id, t0.[description], t0.lastchecked 
```

这里是保存在 XML 中的执行计划的链接：http: [//codepaste.net/5xcpcw](http://codepaste.net/5xcpcw) 这里是表结构的链接： http: [//codepaste.net/pnqx6e](http://codepaste.net/pnqx6e)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:02:47.877

1.  活动应在 lineitems 上编入索引
2.  LineItemId 应在 LineItemsMap 上建立索引
3.  AssetId 应在 LineItemExceptions 上建立索引
4.  art_asset_id 应该在 art_blob 上建立索引

我没有看到任何其他人。任何用于连接的字段都应该被索引。从 where 子句中为字段设置索引也有很大帮助，但您应该对过多的索引保持谨慎。

# csv - SSRS 2012 和 CSV 导出

> ID：13015873
> 
> 赞同：2
> 
> 时间：2012-10-22T16:41:10.160
> 
> 标签：csv, reporting-services

我正在使用 SSRS 2012 尝试执行以下操作：

某些列应该只在用户请求时才可见，使用组合框。列的可见性取决于组合中选定的列。这似乎工作正常！

当我以任何不同于 .csv 的格式导出输出时，这些列仍然不可见。但是当导出到 .csv 时，会显示不可见的库。

我找到了这个：

```
=iif(Globals!RenderFormat.Name="CSV", True, False) 
```

这应该放在我要隐藏的列的“隐藏”属性中。但它不起作用，当我写表达式时，RenderFormat 不是自动完成的选项。

对不起我笨拙的英语，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:56:29.280

CSV (and XML) export from SSRS is treated very differently than most export formats. These two are considered data renderers, not page renderers, and are generally written to get at the data underlying the report, disregarding layout options. Part of this is that field visibility isn't handled the same way. I don't know if it's a bug or intentional design, but .CSV apparently [doesn't honor visibility](https://stackoverflow.com/questions/2105220/ssrs-conditionally-hiding-columns-based-on-parameter-values-csv-export-ignore) set in expressions. One suggested work around is to conditionally set the value to `null` in the underlying dataset. (This could be based on a parameter.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T19:19:09.020

有一种本机方法可以隐藏发送到 CSV 的数据元素，方法是使用`DataElementOutput=NoOutput`

1.  打开属性菜单 ( `F4`)`TextBox`

2.  将`DataElementOutput`属性设置为`NoOutput`

    ![截屏](../Images/a40a67400e9b3ace822a7007040b675c.png)

### 进一步说明

当 SSRS 必须渲染图表时，它需要做出几个决定。如果您花了很多时间进行一些很酷的格式化，它会在转到 PDF 时尝试保留这些，因为 PDF 文档充满了丰富的格式。例如，如果您设置报告的边距，PDF 应该关心，但 CSV 甚至无法保存该信息（也不应该）。

因此，[SSRS 使用了](http://msdn.microsoft.com/en-us/library/dd239307.aspx)[**不同的渲染引擎**](http://msdn.microsoft.com/en-us/library/dd239307.aspx)：

![渲染引擎](../Images/c4ec1d1cfe9e513137a618647c46b696.png)

每一个都有自己的过程。例如，数据导出只会从数据字段中提取信息。例如，欢迎数据字段具有多层标题，其名称可能使用也可能不使用[**符合 CLS 的标识符**](https://stackoverflow.com/a/27535419/1366033)，因此直接从文本框名称本身提取该信息更安全。

包含数据的 TextBox 也可用于设置其他数据导出属性。

[**在这种情况下，您可以使用DataElementOutput**](http://msdn.microsoft.com/en-us/library/microsoft.reportingservices.rdlobjectmodel.chartdatapoint.dataelementoutput.aspx)删除特定的数据字段：

> 指示数据点是否应出现在数据呈现中。

### 延伸阅读

*   [SSRS：根据参数值有条件地隐藏列 - CSV 导出忽略](https://stackoverflow.com/q/2105220/1366033)
*   [SSRS 2008R2 CSV 导出中显示摘要数据](https://stackoverflow.com/q/8122016/1366033)
*   [隐藏/显示取决于导出格式 (SSRS) 的项目](http://blog.hoegaerden.be/2011/01/18/ssrs-hideshow-items-dependant-on-export-format/)

# java - 在 TLS 重新协商期间更改 TrustManager 接受的颁发者

> ID：13015875
> 
> 赞同：1
> 
> 时间：2012-10-22T16:41:19.283
> 
> 标签：java, netty, ssl

在我当前基于 netty (3.5.2) 的服务器[中，我可以使用 TLS renegotiation 向客户端请求证书](https://github.com/bblfish/Play20/blob/TLS/framework/src/play/src/main/scala/play/core/server/netty/PlayDefaultUpstreamHandler.scala#L82)。根据资源的类型，我想要求客户提供一组不同的证书。这可以通过服务器发送带有正确设置的[字段的 TLS](http://www.w3.org/2005/Incubator/webid/spec/#requesting-the-client-certificate) [CertificateRequest 信号来完成。`certificate_authorities`](http://www.w3.org/2005/Incubator/webid/spec/#requesting-the-client-certificate)我想在我的服务器上区分的两组资源是：

1.  默认值：请求客户端证书的资源，这些证书已由已知的 CA 签名`X509TrustManager`
2.  希望查看用户的任何证书的资源 - 这对于旨在帮助调试客户端证书的服务很有用（将您拥有的任何证书发送给我，我会告诉您它是否符合我们在该主题上所知道的所有标准）

在 Java 中，受信任的 CA 列表由[X509TrustManager.getAcceptedIssuers()](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/X509TrustManager.html)方法设置。但是一旦设置 SSLContext 似乎没有办法改变它。我希望[SSLParameters 类](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLParameters.html)可以提供一些选项，但是没有一种方法可以至少设置空`certificate_authorities`列表。

一种不令人满意的方法是为空请求的证书颁发机构打开一个新端口，从而通过将资源分隔到这些不同的端口来区分这些资源。是否有任何人知道避免打开新端口的黑客行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:44:10.917

您需要安装自己的 TrustManager。有关详细信息，请参阅 JSSE 参考指南。

# jquery - 加载仅在 jquery 中有数据的 div

> ID：13015876
> 
> 赞同：0
> 
> 时间：2012-10-22T16:41:19.180
> 
> 标签：jquery

我有一个包含一些 div 的页面。我在这些 div 上显示图像。有时，有些 div 可能是空的，有些可能有值。

单击一个 div，我会显示另一个带有图像的 div。并且，单击带有图像的 div，应该将我带回原始位置。我知道这有点复杂。.group css 类包含一堆 div。我只想显示有价值的 div。下面的代码有点工作，但因为我这样做（$（'.group'）.show（）;），它显示了所有的div和整个图像的显示都散布在各处。有没有办法清除 emtpy div，以便只显示带有图像的 div，而清除其他 div。谢谢你。

```
 $(function () {
             $('#individual').click(function () {
             $('.aggregate').hide();
             $('#aggregate').show();
             });

                 $('#aggregate').click(function () {
                    $('#aggregate').hide();
                    $('.group').show();
              });
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:44:02.080

这行得通吗？

```
$(function () {
             $('#individual').click(function () {
             $('.aggregate').hide();
             $('#aggregate').show();
             });

                 $('#aggregate').click(function () {
                    $('#aggregate').hide();
                    $('.group').each(function(){
                       if($(this).html()!='')
                          $(this).show();
                    });
              });
     }); 
```

# asp.net - 在函数的第二次调用期间，使用 asp.net 的 Jquery ajax 在 IE9 上不起作用？

> ID：13015884
> 
> 赞同：0
> 
> 时间：2012-10-22T16:41:58.507
> 
> 标签：asp.net, jquery

我有一个 ajax 调用后从另一个 aspx 页面加载的 gridview，问题是它适用于 chrome/firefox/safari 但使用 ie9 ajax 调用在第一次调用期间可以正常工作但是当我尝试再次调用该函数时它抛出ie9 开发工具的网络选项卡上的 304 状态，并且网格视图未刷新。

这是jquery代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="LoadCoursesGridViewHere.aspx.cs" Inherits="CoursesGridView" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.8.2.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">

                <div id="Gridview-container">
                    <asp:GridView ID="GridView1" runat="server">
                    </asp:GridView>
                </div>
                <asp:TextBox ID="TextBox1" runat="server" ViewStateMode="Disabled"></asp:TextBox>

                <%-- <asp:Button Text="text" ID="btn" OnClientClick=" __doPostBack('UpdatePanel1', '')" runat="server" />--%>
                <input type="button" id="btn" value="insert"/>

    </form>

    <script type="text/javascript">

        $("#btn").click(function () {
            var a = $("#TextBox1").val();

            $.ajax({
                url: 'WebService.asmx/insert',
                data: "{ 'name': '" + a + "' }",
                contentType: "application/json; charset=utf-8",
                type: "POST",
                success: function () {

                    // alert('insert was performed.');
                    $("#Gridview-container").empty();
                    $("#Gridview-container").load("GridViewCourses.aspx #GridView1");

                }
            });

        });

    </script>
</body>

</html> 
```

发生的情况是，单击按钮后，它将通过 web 服务“插入”将文本框值插入数据库中，然后重新加载放置在不同 aspx 页面内的 gridview。问题是，当我在第一次插入期间在 IE9 上运行它时，一切正常，但随后的插入确实重新加载了 gridview，我注意到它在 ie9 开发工具的网络选项卡上显示“304”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:58:22.957

[响应 304](http://www.checkupdown.com/status/E304.html)表示它是从缓存中获取的。您只需在 ajax 调用中将缓存设置为 false 或执行

```
$.ajaxSetup({cache:false}); // this will set all ajax calls caching to false 
```

# shell - 在检查 shell 中的节点脚本返回的退出代码时需要帮助

> ID：13015889
> 
> 赞同：0
> 
> 时间：2012-10-22T16:42:10.470
> 
> 标签：shell

我有一个用 node.js 编写的脚本，它返回适当的退出代码，0 表示成功，1 表示错误。我在 shell 脚本中运行此脚本，需要比较退出代码以执行更多操作，方法是使用 if else 块。任何建议我如何做到这一点。我知道我们可以使用 $? 在 shell 中获取退出代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:57:02.427

[基于进程退出代码的退出 Shell 脚本](https://stackoverflow.com/questions/90418/exit-shell-script-based-on-process-exit-code)

这就是解决方案。

rc=$？

如果 [[ $rc != 0 ]] ; 然后退出 2 fi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:43:50.837

~~见[`exec()`](http://www.php.net/manual/en/function.exec.php)，特别是`return_var`论点。~~

抱歉，我以为我看到了一个 PHP 标签。

# ms-access-2010 - 可以在 Access 2010 数字字段上设置大小吗？

> ID：13015891
> 
> 赞同：4
> 
> 时间：2012-10-22T16:42:14.530
> 
> 标签：ms-access-2010

我正在开发一个类项目，它包括创建一些 Access 2010 表和数据库。讲师要求 Long Integer 字段的特定大小。我了解如何在 SQL 中为数字设置此设置，但在访问中没有。看起来可以为 Text 设置大小，但不能为 Number 设置大小，所以我想知道是否有办法在 Access 2010 中设置这些字段的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:47:13.883

您可以设置验证规则，例如：

```
< 9999 
```

![验证规则](../Images/578e87ebdfb72335b9cf49a1ce3598dd.png)

在 MS Access 2010 及更高版本中，您还可以使用[数据宏](http://office.microsoft.com/en-us/access-help/create-a-data-macro-HA010378170.aspx)。

最后，可以[通过 DDL 和 VBA 设置约束](http://msdn.microsoft.com/en-us/library/office/bb177889(v=office.12).aspx)（见文末我的笔记）

# javascript - 实时报价计算器 Javascript

> ID：13015892
> 
> 赞同：-2
> 
> 时间：2012-10-22T16:42:15.760
> 
> 标签：javascript, calculator, quote

我的报价计算器有问题，它只是不起作用，我已经尝试研究原因并更改代码并在上传之前重新启动。

我的问题 任何人都可以在我的代码中找到错误来完成这项工作吗？

Javascript：

```
 var theQuoteForm = document.forms["quoteForm"];

            var additionalLogo= new Array();
            additionalLogo["graphicNone"]=0;
            additionalLogo["graphicOne"]=10;
            additionalLogo["graphicTwo"]=20;
            additionalLogo["graphicThree"]=30;
            additionalLogo["graphicFour"]=40;
            additionalLogo["graphicFive"]=50;
            additionalLogo["graphicSix"]=60;
            additionalLogo["graphicSeven"]=70;
            additionalLogo["graphicEight"]=80;
            additionalLogo["graphicNine"]=90;
            additionalLogo["graphicTen"]=100;

            var additionalEmail= new Array();
            additionalEmail["webNone"]=0;
            additionalEmail["webOne"]=10;
            additionalEmail["webTwo"]=20;
            additionalEmail["webThree"]=30;
            additionalEmail["webFour"]=40;
            additionalEmail["webFive"]=50;
            additionalEmail["webSix"]=60;
            additionalEmail["webSeven"]=70;
            additionalEmail["webEight"]=80;
            additionalEmail["webNine"]=90;
            additionalEmail["webTen"]=100;

            function getGraphicBasePrice()
            {
                var graphicBasePrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var graphics = theQuoteForm.elements["graphics"];

                if(graphics.checked==true)
                {
                    graphicBasePrice=100;
                }
                else if(graphics.checked==false)
                {
                    graphicBasePrice=0;
                }

                return graphicBasePrice;
            }

            function sLogosPrice()
            {
                var sLogoPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var smallLogo = theQuoteForm.elements["sLogo"];

                if(smallLogo.checked==true)
                {
                    sLogoPrice=20;
                }
                else if(smallLogo.checked==false)
                {
                    sLogoPrice=0;
                }

                return sLogoPrice;
            }

            function mLogosPrice()
            {
                var mLogoPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var mediumLogo = theQuoteForm.elements["mLogo"];

                if(mediumLogo.checked==true)
                {
                    mLogoPrice=40;
                }
            else if(mediumLogo.checked==false)
                {
                    mLogoPrice=0;
                }

                return mLogoPrice;
            }

            function lLogosPrice()
            {
                var lLogoPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var largeLogo = theQuoteForm.elements["lLogo"];

                if(largeLogo.checked==true)
                {
                    lLogoPrice=60;
                }
                else if(largeLogo.checked==false)
                {
                    lLogoPrice=0;
                }

                return lLogoPrice;
            }

            function getAdditionalLogoPrice()
            {
                var additionalLogoPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var selectedAdditionalLogo = theQuoteForm.elements["additLogo"];

                additionalLogoPrice = additionalLogo[selectedAdditionalLogo.value];

                return additionalLogoPrice;
            }

            function postersPrice()
            {
                var posterPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Poster = theQuoteForm.elements["poster"];

                if(Poster.checked==true)
                {
                    posterPrice=60;
                }

                return posterPrice;
            }

            function illustrativesPrice()
            {
                var illustrativePrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Illustrative = theQuoteForm.elements["illustrative"];

                if(Illustrative.checked==true)
                {
                    illustrativePrice=60;
                }

                return illustrativePrice;
            }

            function getWebBasePrice()
                            {
                var webBasePrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var web = theQuoteForm.elements["web"];

                if(web.checked==true)
                {
                    webBasePrice=150;
                }

                return webBasePrice;
            }

            function designsPrice()
                            {
                var designPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Design = theQuoteForm.elements["design"];

                if(Design.checked==true)
                {
                    designPrice=60;
                }

                return designPrice;
            }

            function developsPrice()
            {
                var developPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Develop =               theQuoteForm.elements["develop"];

                if(Develop.checked==true)
                {
                    developPrice=60;
                }

                return developPrice;
            }

            function seosPrice()
            {
                var seoPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Seo = theQuoteForm.elements["seo"];

                if(Seo.checked==true)
                {
                    seoPrice=60;
                }

                return seoPrice;
            }

            function cmssPrice()
            {
                var cmsPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Cms = theQuoteForm.elements["cms"];

                if(Cms.checked==true)
                                {
                            cmsPrice=60;
                }

                return cmsPrice;
            }

                            function hostingsPrice()
                            {
                var hostingPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var Hosting = theQuoteForm.elements["hosting"];

                if(Hosting.checked==true)
                {
                    hostingPrice=60;
                }

                return hostingPrice;
            }

            function emailsPrice()
            {
                var emailPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var emailAccount =              theQuoteForm.elements["emailAccount"];

                if(emailAccount.checked==true)
                {
                    emailPrice=60;
                }

                return emailPrice;
            }

            function getAdditionalEmailPrice()
            {
                var additionalEmailPrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var selectedAdditionalEmail =               theQuoteForm.elements["additEmail"];

                additionalEmailPrice =              additionalEmail[selectedAdditionalEmail.value];

                return additionalEmailPrice;
            }

            function maintenancesPrice()
            {
                var maintenancePrice=0;
                var theQuoteForm = document.forms["quoteForm"];
                var maintenance =               theQuoteForm.elements["maintenance"];

                if(maintenance.checked==true)
                {
                    maintenancePrice=60;
                }

                return maintenancePrice;
            }

            function calculateTotal()
            {
                var quoteFormPrice = getGraphicBasePrice() +                sLogosPrice() + mLogosPrice() + lLogosPrice() + getAdditionalLogoPrice() + postersPrice() + illustrativesPrice() + getWebBasePrice() + designsPrice() + developsPrice() + seosPrice() + cmssPrice() + hostingsPrice() + emailsPrice() + getAdditionalEmailPrice() + maintenancesPrice();

                var calculateObject = document.getElementById('totalPrice');
                calculateObject.innerHTML = "<b>Total Quote Price:</b> &pound;"+quoteFormPrice;
            } 
```

HTML：

 `````
 <script type="text/javascript" src="external/scripts/quoteCalculator.js"></script>

            <form action="" id="quoteForm" onsubmit="return false;" style="width: 630px; margin-top: 40px; margin-left: 20px; background-color: #fff; color: #000;">
                <fieldset style="width: 600px;">
                    <label for="graphics" class="graphicsLbl">Graphics</label>
                        <input id="graphics" class="checkBox" name="graphics" type="checkbox" onclick="calculateTotal()" tabindex=1><br /><br />

                    <label for="sLogo" class="Lbl">Small Logo (150px to 225px)</label>
                        <input id="sLogo" class="checkBox" name="sLogo" type="checkbox" onclick="calculateTotal()" tabindex=2><br /><br />

                    <label for="mLogo" class="Lbl">Medium Logo (226px to 360px)</label>
                        <input id="mLogo" class="checkBox" name="mLogo" type="checkbox" onclick="calculateTotal()" tabindex=3><br /><br />

                    <label for="lLogo" class="Lbl">Large Logo (361px+)</label>
                        <input id="lLogo" class="checkBox" name="lLogo" type="checkbox" onclick="calculateTotal()" tabindex=4><br /><br />

                    <label for="aLogo" class="additLogoLbl">Would you like additional logos?</label>
                        <input id="aLogo" class="checkBox" name="aLogo" type="checkbox" onclick="calculateTotal()" tabindex=5><br /><br />

                    <label for="additLogo" class="additLogoLbl">Choose amount of additional logos you would like:</label>
                        <select name="additLogo" id="additLogo" style="width: 100%; border: 1px solid #000" onchange="calculateTotal()" tabindex=6>
                            <option value="graphicNone">0</option>
                            <option value="graphicOne">1</option>
                            <option value="graphicTwo">2</option>
                            <option value="graphicThree">3</option>
                            <option value="graphicFour">4</option>
                            <option value="graphicFive">5</option>
                            <option value="graphicSix">6</option>
                            <option value="graphicSeven">7</option>
                            <option value="graphicEight">8</option>
                            <option value="graphicNine">9</option>
                            <option value="graphicTen">10</option>
                        </select><br /><br />

                    <label for="poster" class="Lbl">Poster</label>
                        <input id="poster" class="checkBox" name="poster" type="checkbox" onclick="calculateTotal()" tabindex=7><br /><br />

                    <label for="illustrative" class="Lbl">Illustrative</label>
                        <input id="illustrative" class="checkBox" name="illustrative" type="checkbox" onclick="calculateTotal()" tabindex=8><br /><br />

                    <label for="web" class="webLbl">Web</label>
                        <input id="web" class="checkBox" name="web" type="checkbox" onclick="calculateTotal()" tabindex=9><br /><br />

                    <label for="design" class="Lbl">Just design the look (Design)</label>
                        <input id="design" class="checkBox" name="design" type="checkbox" onclick="calculateTotal()" tabindex=10><br /><br />

                    <label for="develop" class="Lbl">We have a design to implement (Develop)</label>
                        <input id="develop" class="checkBox" name="develop" type="checkbox" onclick="calculateTotal()" tabindex=11><br /><br />

                    <label for="seo" class="Lbl">Search Engine Optimization (SEO)</label>
                        <input id="seo" class="checkBox" name="seo" type="checkbox" onclick="calculateTotal()" tabindex=12><br /><br />

                    <label for="cms" class="Lbl">Content Management Systems (CMS)</label>
                        <input id="cms" class="checkBox" name="cms" type="checkbox" onclick="calculateTotal()" tabindex=13><br /><br />

                    <label for="hosting" class="Lbl">We want the/a Website hosted (Hosting)</label>
                        <input id="hosting" class="checkBox" name="hosting" type="checkbox" onclick="calculateTotal()" tabindex=14><br /><br />

                    <label for="emailAccount" class="emailAccountLbl">Email Account Creation (Only with hosting)</label>
                        <input id="emailAccount" class="checkBox" name="emailAccount" type="checkbox" onclick="calculateTotal()" tabindex=15><br /><br />

                    <label for="aEmail" class="aEmailLbl">Would you like additional email accounts?</label>
                        <input id="aEmail" class="checkBox" name="aEmail" type="checkbox" onclick="calculateTotal()" tabindex=16><br /><br />

                    <label for="additEmailAccount" class="additEmailAccountLbl">Choose amount of additional email accounts you would like</label>
                        <select name="additEmailAccount" id="additEmailAccount" style="width: 100%; border: 1px solid #000" onchange="calculateTotal()" tabindex=17>
                            <option value="webNone">0</option>
                            <option value="webOne">1</option>
                            <option value="webTwo">2</option>
                            <option value="webThree">3</option>
                            <option value="webFour">4</option>
                            <option value="webFive">5</option>
                            <option value="webSix">6</option>
                            <option value="webSeven">7</option>
                            <option value="webEight">8</option>
                            <option value="webNine">9</option>
                            <option value="webTen">10</option>
                        </select><br /><br />

                    <label for="maintenance" class="Lbl">We would like you to maintain our Website (On-Going Maintenance)</label>
                        <input id="maintenance" class="checkBox" name="maintenance" type="checkbox" onclick="calculateTotal()" tabindex=18><br /><br /> 
````  `这一切都进入这个div：

```
 <div id="totalPrice"></div>

                    </fieldset>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:06:41.180

问题出在函数 getAdditionalEmailPrice()

标签名称不正确。

只改这句话

```
var emailAccount = theQuoteForm.elements["emailAccount"]; 
```

为了这

```
var selectedAdditionalEmail = theQuoteForm.elements["additEmailAccount"]; 
```

和作品。``

# objective-c - 将基本 SDK 从 iOS 6.0 更改为 iOS 5.0

> ID：13015896
> 
> 赞同：1
> 
> 时间：2012-10-22T16:42:38.600
> 
> 标签：objective-c, ios, xcode

我得到了一个旧的 iPad 应用程序来修复并使其在 iOS 6 上运行。它应该在 iOS 5.0 上完美运行。

但是当我使用 iOS 6 作为基础 SDK 进行编译时，该应用程序不再在 iOS 5 上完美运行（即使在 iPad 5.0 Simulator 上也是如此）。

我认为使用 iOS 5.0 基础 SDK 会更好。但我可能错了。

感谢您的时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:51:17.097

验证代码没有使用任何 iOS 6 独有的功能。例如，一些用于访问数组元素的新 Objective-C 文字语法在 iOS 5 中不可用，即使其他一些新的文字语法更改在 iOS 5*中可用。*

# javascript - 异步加载没有导出的 TypeScript 声明

> ID：13015898
> 
> 赞同：6
> 
> 时间：2012-10-22T16:42:40.443
> 
> 标签：javascript, typescript, js-amd

我有许多 jQuery 插件，我想在 TypeScript 中使用 AMD 模式加载它们。例如，我可能有这样的结构：

```
/lib/jquery.myplugin.js
/app.ts 
```

该插件只是扩展了 jQuery。它没有提供新的顶级函数或变量。一个例子可能是：

```
// jquery.myplugin.js
jQuery.fn.myExample = function() { ... } 
```

对应的 jquery.myplugin.d.ts 文件如下所示：

```
interface JQuery {
    myExample();
} 
```

所以现在在 app.ts 我可以调用类似`$('#my-element').myExample()`. 请注意，这假设我已经加载了 Microsoft 的 jquery.d.ts 声明。

我的问题是如何异步加载这个库并利用 TypeScripts 静态类型？我可以这样使用它：

```
/// <reference path="lib/jquery.myplugin.d.ts"/> 
```

但这需要我在`<script>`我的 HTML 中添加一个标签，并且该库不是异步加载的。我希望 TypeScript 生成此代码：

```
define(["require", "exports", "lib/jquery.myplugin"], function (require, exports, __jquery.myplugin__) {
    ...
    // Use my plugin
    $('#my-element').myExample();
} 
```

但是，由于 .d.ts 文件中没有导出，我无法编写`import myplugin = module('lib/jquery.myplugin')`。

我得到的最接近的是`jquery.myplugin.d.ts`使用接口声明引用另一个 ts 文件并包含至少一个导出。然而，在这个库中没有什么要导出的，为了获得所需的输出，我不仅要添加一个导出，而且我必须调用它。

**更新**：我在[typescript.codeplex.com](http://typescript.codeplex.com)上为此打开了一个[工作项](http://typescript.codeplex.com/workitem/318)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T17:48:18.280

Kind of a hack but here's the only way I currently know of.

*myplugin.d.ts*: extends the JQueryStatic interface to include intellisense for myplugin's functionality

```
/// <reference path="../dep/jquery/jquery.d.ts" />

interface JQueryStatic {
    myFunc(): string;
} 
```

*myplugin.ts*: a dummy file whose only purpose is to have typescript generate an amd module definition.

```
var test: number = 1; 
```

*consumer.ts*:

```
/// <reference path="myplugin.d.ts" />

import myplugin = module('myplugin');

// without this typescript knows you aren't actually using the module
// and won't create the define block including your plugin
var workaround = myplugin.test;

$.myFunc(); 
```

*consumer.js*: generated with `tsc -c --module amd consumer.ts`

```
define(["require", "exports", 'myplugin'], function(require, exports, __myplugin__) {
    /// <reference path="myplugin.d.ts" />
    var myplugin = __myplugin__;

    // without this typescript knows you aren't actually using the module
    // and won't create the define block including your plugin
    var workaround = myplugin.test;
    $.myFunc();
}) 
```

Note that *myplugin.d.ts* will pull intellisense in for both jQuery and your plugin definitions. It was necessary to create both a myplugin.d.ts and myplugin.ts because I don't know how (if possible) to export something while simultaneously extending an existing interface in the same file without errors.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-12T01:36:57.843

Typescript 不会导入模块，除非它们导出一些东西，除非你直接使用它们导出的东西，但是对于像 JQuery 插件这样简单地将新方法添加到 $. 解决方案是使用[此处](https://www.stevefenton.co.uk/Content/Blog/Date/201410/Blog/TypeScript-AMD-Dependency-Comment/)记录的 amd-dependency 标志。

在文件顶部添加这样的一行：

```
///<amd-dependency path="jgrowl" /> 
```

`define`这将强制 Typescript在已编译的 Javascript的调用中列出它。您还需要在 require.config 中为您的插件设置路径和填充程序，如下所示：

```
require.config({
  paths: {
    jquery: "external/jquery-2.1.1",
    jgrowl: "external/jquery.jgrowl-1.4.0.min",
  },
  shim: {
    'jgrowl': { deps: ['jquery'] },
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T06:14:36.697

在定义接口的文件的底部，您可以放置​​：

```
export var JQuery: JQueryStatic; 
```

这将使 JQuery 的智能感知显示在使用`import module`.

如果您的文件正在异步加载并且您将**JQuery**设置为另一个变量（即**myJQuery**），您可以声明该文件已经在某个时间点加载，例如，如果您的文件中有文件，您`///<reference path=...>`应该能够利用：

```
declare var myJQuery: JQuery; 
```

使您的**myJQuery**类型为**JQuery**。

另一个技巧是将接口直接插入到异步加载代码的区域：

```
interface JQueryStatic {
    myFunc(): string;
} 
```

如果您不介意编辑 JQuery.d.ts 文件，可以将函数添加到其中定义的接口中。

与您的示例相关，您应该能够执行以下操作：

```
declare var __jquery : JQueryStatic; 
```

在定义回调的顶部；并且如果您已经扩展了**JQueryStatic**的接口并使用标记包含它`///<reference path=...>`应该可以按需要工作。

# java - 由于 Java 版本不正确导致 Android 构建错误

> ID：13015899
> 
> 赞同：9
> 
> 时间：2012-10-22T16:42:41.123
> 
> 标签：java, android, build

我目前正在尝试构建 Android 只是为了学习目的。但我面临着奇怪的错误 -

> 您正在尝试使用不正确的 java 版本进行构建。您的版本是：java 版本“1.7.0_07”。正确的版本是：Java SE 1.6。

我的 java - 版本给了我

> java 版本“1.7.0_07”Java(TM) SE 运行时环境（构建 1.7.0_07-b10）Java HotSpot(TM) 64 位服务器 VM（构建 23.3-b01，混合模式）

任何想法出了什么问题？问候，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-25T14:31:09.910

1.) 如果您已经安装了 OpenJDK 。通过运行以下命令将其删除： `sudo apt-get purge openjdk*`

2.) 然后：

```
sudo add-apt-repository ppa:webupd8team/java 
```

然后更新：

```
sudo apt-get update 
```

3.) 选择要安装 Oracle Java 8 的版本：

```
sudo apt-get install oracle-java8-installer 
```

要安装 Oracle Java 7：

```
sudo apt-get install oracle-java7-installer 
```

要安装 Java 6：

```
sudo apt-get install oracle-java6-installer 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T08:42:38.133

将 Ubuntu 12.04 升级到 12.10 后 - 只需在构建 Android 之前导出路径，例如：

导出 PATH=/usr/lib/jvm/java-6-openjdk-amd64/bin/:$PATH

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:45:59.647

在 Eclipse.. Goto Window -> Preferences.. 从那里展开“Java”组。单击“编译器”。从那里将编译器合规级别设置为 1.6，将所有其他设置（如果尚未设置为使用默认合规级别）设置为 1.6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T09:41:39.513

android 构建不支持打开 jdk。尝试改用 sun jdk。您可以通过以下命令安装 sun jdk：

```
add-apt-repository "deb http://archive.canonical.com/ lucid partner"
apt-get update
apt-get install sun-java6-jdk 
```

如果上述命令不起作用（无法下载 jdk），请改用以下命令：

```
add-apt-repository ppa:ferramroberto/java
apt-get update
apt-get install sun-java6-jdk 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T16:46:26.613

正是消息所说的... Android 需要 Java 1.5 或 1.6... 您使用的是 1.7

安装和使用 Java 1.5 或 1.6。

# apache-flex - 为什么我的 DataGrid 没有排序？

> ID：13015900
> 
> 赞同：0
> 
> 时间：2012-10-22T16:42:57.493
> 
> 标签：apache-flex, flex4

我的 DataGrid 没有排序。单击 DataGrid 标题列不会对 DataGrid 进行排序。

```
<s:DataGrid dataProvider="{dataList}">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="key" headerText="Key"/>
            <s:GridColumn dataField="summary" headerText="Summary">
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

和数据提供者：

```
<s:ArrayList id="dataList"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:42:57.493

确保您使用的是 ArrayCollection 而不是 ArrayList。

这个：

```
<s:ArrayCollection id="dataList"/> 
```

或这个：

```
<s:XMLListCollection id="dataList"/> 
```

不是这个：

```
<s:ArrayList id="dataList"/> 
```

# php - 链接两个表中的信息

> ID：13015905
> 
> 赞同：0
> 
> 时间：2012-10-22T16:43:21.923
> 
> 标签：php, mysql

我代表朋友输入此内容，因此措辞可能很糟糕：

我有两张桌子`interests`和`user_updates`：

```
$feed_query = mysql_query("SELECT `username`, `contents`, (`posted`) AS posted FROM 
    user_updates ORDER BY UNIX_TIMESTAMP(`posted`) DESC");
$num_rows = 0;
while(($num_rows < 12) && ($row = mysql_fetch_array($feed_query))){ 
```

这是从`interests`表中获取信息的代码，但我想轻松地从中获取相应的数据（正确的更新）`user_updates`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:55:44.083

您需要在一个公共字段上连接两个表：

表名：user_updates 和interests

公共字段用户名（公共字段在每个表上必须具有相同的值，以便它们可以相互匹配）

```
select * from user_updates u 
     inner join interests i
on i.username = u.username 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:45:19.797

使用连接语句。查看 MySQL 文档以获取更多信息： http: [//dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:47:59.933

也许这可以帮助你：

```
<?php
$feed_query = mysql_query("SELECT upd.username,upd.contents, (upd.posted) AS posted FROM user_updates upd LEFT OUTER JOIN interests int ON int.id=upd.interest_id  ORDER BY UNIX_TIMESTAMP(upd posted) DESC"); 
$num_rows = 0; 
while(($num_rows < 12) && ($row = mysql_fetch_array($feed_query))){

    echo $row['username']."---".$row['contents']."---".$row['posted']."<br>";

    $num_rows++;
}
?> 
```

# data-structures - 使用由 ref 类型保护的 Clojure core.cache 是否安全？

> ID：13015906
> 
> 赞同：4
> 
> 时间：2012-10-22T16:43:31.267
> 
> 标签：data-structures, clojure, ttl

我需要一个需要防范并发资源的地图，ref 类型适合我的情况。
现在我需要一个“生存时间”策略来删除我的代码可能忘记删除的潜在条目。
我检查了[clojure.core.cache](http://clojure.github.com/core.cache/#clojure.core.cache/TTLCache)但我不确定它是否安全，因为数据结构是用 ref 类型保护的。

我更喜欢纯 Clojure 解决方案，但如果事情变得复杂，你会建议另一种方法吗？例如谷歌番石榴？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T19:20:37.793

core.cache TTL 实现是不可变的，不会原地改变[。](http://clojure.github.com/core.cache/#clojure.core.cache/TTLCache)并发保证是封闭引用类型的保证。然而值得注意的是，缓存旨在以某种方式（协议）使用，如[core.cache wiki](https://github.com/clojure/core.cache/wiki/Using)中所述。

# java - 在java中使用自签名证书

> ID：13015910
> 
> 赞同：2
> 
> 时间：2012-10-22T16:43:42.797
> 
> 标签：java, certificate, httprequest, sms-gateway, self-signed

我想连接到一个短信网关。我找到了以下代码。

```
public void smsSender(String username, String password, String to,
        String text) throws IOException {

    try {
        String data = "username=" + username + "&password=" + password
                + "&to=" + to + "&text=" + text;

        URL url = new URL("https://sendsms.abc.com:1010/sms.php");

        HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
        urlc.setRequestMethod("POST");
        urlc.setDoOutput(true);
        urlc.setRequestProperty("Content-type",
                "application/x-www-form-urlencoded");

        BufferedWriter br = new BufferedWriter(new OutputStreamWriter(
                urlc.getOutputStream()));

        br.write(data);
        br.flush();

        BufferedReader rd = new BufferedReader(new InputStreamReader(
                urlc.getInputStream()));
        String line;
        while (null != ((line = rd.readLine()))) {
            output = line;
            System.out.println(output);
        }

        rd.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

当我尝试使用此方法进行连接时，Eclipse 会发送一条错误消息。

> 无法找到到所请求目标的有效认证路径

我试图访问的服务器正在使用自签名证书。我是这个领域的新手。我怎么解决这个问题。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T17:07:51.013

要通过 SSL 进行远程方法调用，客户端需要信任服务器的证书。正如您所说，服务器具有自签名证书，您的客户端需要明确配置为信任证书，否则连接失败。要在客户端和服务器的自签名证书之间创建信任关系，请按照以下步骤操作，

1.  首先，您应该在客户端获取服务器证书。
    为此，我知道的方式是，即在浏览器中点击服务器 url 并获取服务器的证书并将其导入浏览器。可能还有其他获取服务器证书的方法，但您必须探索。

2.  现在将公钥作为证书从浏览器导出到客户端。让它成为 server.cer。

3.  现在，创建客户端密钥库

    > keytool -genkey -alias clientkeys -keyalg RSA -keystore client.keystore -storepass 123456 -keypass 123456 -dname "CN=localhost, OU=MYOU, O=MYORG, L=MYCITY, S=MYSTATE, C=MY"

4.  创建客户端证书

    > keytool -export -alias clientkeys -keystore client.keystore -storepass 123456 -file client.cer

5.  现在，将服务器证书导入客户端信任库。

    > keytool -import -alias serverCert -keystore client.truststore -storepass clientcert -file server.cer

6.  现在加载客户端密钥库，如Werner 提供的[链接](https://stackoverflow.com/questions/859111/how-do-i-accept-a-self-signed-certificate-with-a-java-httpsurlconnection)中 erickson 的评论中所述。

如果事情还不清楚，请告诉我。但我建议您阅读一些有关客户端和服务器之间 SSL 握手的 google 文档。

# sql - 每月将行拆分为行并拆分天数

> ID：13015914
> 
> 赞同：0
> 
> 时间：2012-10-22T16:43:56.260
> 
> 标签：sql, sql-server

我有一个包含 start_date 列 (EV200_EVT_START_DATE) 和 end_date 列 (EV200_EVT_END_DATE) 的事件表。事件可能会持续一个多月。

我每年的每一天都有一张桌子（我认为这会有所帮助）。

我希望能够按月分配收入 - 所以基本上我认为我需要加入每个事件，每个事件对应的每个月/年都重叠。然后，我需要计算事件运行的总天数，并除以“加入”月份中的事件天数。

```
Event Table (EV200_EVENT_MASTER)
===
EV200_EVT_START_DATE,EV200_EVT_END_DATE,EV200_EVT_ID
15/01/2012,17/01/2012,1
15/01/2012,15/02/2012,2
15/01/2012,15/03/2012,3

Calendar Table (EV001_MSTR_DATE_SCHED)
===
EV001_ISO_DATE
01/01/2012
02/01/2012
...
01/01/2021
02/01/2021

Output (something like)
===
EV200_EVT_START_DATE,EV200_EVT_END_DATE,EV200_EVT_ID,Year,Month,Days,Split
15/01/2012,17/01/2012,1,2012,1,2,1
15/01/2012,15/02/2012,2,2012,1,17,0.55
15/01/2012,15/02/2012,2,2012,2,14,0.45
15/01/2012,15/03/2012,3,2012,1,17,0.28
15/01/2012,15/03/2012,3,2012,2,29,0.48
15/01/2012,15/03/2012,3,2012,3,14,0.23 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:52:50.240

给定

*   带有 ID、StartDate、EndDate 和 Revenue 的事件表
*   一个日期表，其中 ID 列是日期，一年中的每一天都有一行（您感兴趣的所有年份）

那么这应该给你想要的。但是，如果某处涉及会计师，他们可能会制定有关何时确认收入的规则……

```
Select
  Year(d.ID) As Year,
  Month(d.ID) As Month,
  Sum(e.Revenue/Cast((e.EndDate - e.StartDate + 1) As Decimal)) As RevenuePerMonth
From
  Event e
    Inner Join
  Days d
    On e.StartDate <= d.ID And e.EndDate >= d.ID
Group By
  Year(d.ID),
  Month(d.ID)
Order By
  1, 2 
```

编辑

*   正如 Terje 指出的那样，将 RevenuePerDay 固定为 RevenuePerMonth
*   根据您的表名和列要求进行更改。
*   更新以避免舍入错误（为评论中的试验道歉）

这次测试：

```
Select
  e.Ev200_Evt_Start_Date,
  e.Ev200_Evt_End_Date,
  e.Ev200_Evt_Id,
  Year(d.Ev001_Iso_Date) As Year,
  Month(d.Ev001_Iso_Date) As Month,
  e.Ev200_Evt_End_Date - e.Ev200_Evt_Start_Date + 1 As Days,
  Cast(Count(*) As Decimal)/Cast(e.Ev200_Evt_End_Date - e.Ev200_Evt_Start_Date + 1 As Decimal) As Split
From
  Ev200_Event_Master e
    Inner Join
  Ev001_Mstr_Date_Sched d
    On e.Ev200_Evt_Start_Date <= d.Ev001_Iso_Date And e.Ev200_Evt_End_Date >= d.Ev001_Iso_Date
Group By
  e.Ev200_Evt_Start_Date,
  e.Ev200_Evt_End_Date,
  e.Ev200_Evt_Id,
  Year(d.Ev001_Iso_Date),
  Month(d.Ev001_Iso_Date),
  e.Ev200_Evt_End_Date - e.Ev200_Evt_Start_Date + 1 
```

[http://sqlfiddle.com/#!3/d99bc/11/0](http://sqlfiddle.com/#!3/d99bc/11/0)

# python - 使用python合并两个zip文件

> ID：13015916
> 
> 赞同：4
> 
> 时间：2012-10-22T16:43:59.040
> 
> 标签：python

我正在尝试使用 python 合并两个 zip 文件。

我让它工作，直到我意识到当涉及到源 zip 文件包含的符号链接时它没有表现出来。由于我在将每个文件添加到新的 zip 文件时对每个文件都使用了 zipfile.read()，因此它正在读取符号链接并创建一个文本文件，而不是符号链接。

当我将它们写入目标 zip 文件时，有谁知道让 python 保留源 zip 文件中的符号链接的方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:52:26.097

应该这样做：

```
 if os.path.islink(filePath):
            attr = zipfile.ZipInfo(filePath)
            attr.create_system = 3 # 3 for unix, 0 for windoze
            attr.external_attr = 2716663808L # to include file as a symlink
            newZip.writestr(attr, os.readlink(filePath)) 
```

# c# - 在 C# 中使用套接字的活动网络接口

> ID：13015920
> 
> 赞同：1
> 
> 时间：2012-10-22T16:44:16.370
> 
> 标签：c#, sockets, networking, interface, wifi

我目前正在开发一个应该通过 WiFi 与远程嵌入式系统通信的 Windows 应用程序。Windows 应用程序正在发送一个广播消息，远程单元正在接收该消息并从中提取发送者 IP。然后，远程单元将答案发送回提取的 IP。问题是，在发送广播消息时，C# 使用的是无线网络连接，但是当我打开一个 Socket 来监听答案（或向指定地址发送消息）时，它使用的是本地连接。由于这些接口具有不同的 IP 地址，Windows 应用程序不会从远程接收到答案。

所以我的问题是，为什么 C# 对不同的套接字使用不同的网络接口，有没有办法强制程序对所有套接字使用相同的接口？

这是发送广播消息的代码

```
 sockB = new Socket(AddressFamily.InterNetwork, SocketType.Dgram,ProtocolType.Udp);    //Create a UDP socket
    sockB.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.Broadcast, 1);        //Enable broadcast on socket
    IPEndPoint briep = new IPEndPoint(IPAddress.Broadcast, 9584);                            //Relate a port to the broadcast address    
    byte[] dat = { 0xAD, 0xEE, BRDCST_CMND, (byte)(0xAD ^ 0xEE ^ BRDCST_CMND) };           //Put in buffer
    sockB.SendTo(dat, briep);              //Broadcast data 
```

这是从遥控器中收听答案的代码

```
 sockC = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);                 //Create an udp socket
    sockC.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, 1);                 //set timeout to 5 ms
    sockC.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.SendTimeout, 1);
    IPEndPoint iep = new IPEndPoint(IPAddress.Any, 9999);             //set up an "any" ip address and associate it with port 9854        
    EndPoint ep = (EndPoint)(iep);                                      //Make an endpoint out of previous association
    sockC.Bind(iep);                             //Bind the created socket to listen on port 9854
    byteRecv = sockC.ReceiveFrom(data, ref ep);                  //Receive on socke 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:11:43.720

如果您想强制它在您的无线适配器上接收，请设置一个指向您的无线适配器的更具体的 IPEndPoint：

```
IPEndPoint iep = new IPEndPoint(IPAddress.Parse("wireless adapter IP here"), 9999); 
```

`IPAddress.Any` *据我所知，应该*监听所有接口，而不仅仅是选择最高优先级的接口，因此您应该按照设置的方式在无线适配器上获取响应数据包。我想你可以尝试使用上面的代码强制它，如果它仍然不起作用，那么你的响应 UDP 消息只是被某个地方吞没了。

确保在发送广播消息之前设置套接字以侦听响应，否则您可能会遇到在设置侦听器之前响应实际出现的竞争条件。

# xml - jsp如何从其config.xml中读取属性值

> ID：13015921
> 
> 赞同：0
> 
> 时间：2012-10-22T16:44:17.457
> 
> 标签：xml, jsp

我在 config.xml 中设置了以下内容，如何读取标签之间的属性值？我需要从jsp读取它。

```
<page-metrics>
  <metric page="test.page">
    <type default="true" name="test">
      <name>My Test Page</name>
    </type>
  </metric>
</page-metrics> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:52:55.933

如果您需要解析 XML 文件，则应在服务层中完成。例如，您可以使用 DOM 解析器、SAX 解析器或任何其他解析器来解析 XML。

# php - 一种抓取网页的有效方法

> ID：13015931
> 
> 赞同：0
> 
> 时间：2012-10-22T16:44:51.927
> 
> 标签：php, substring, web-scraping

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我想检索网页的页眉和页脚（所有者知道这一点）并将其显示在新页面上，以便我可以添加不同的内容。该页面的结构非常好，其内容包含在 div 中，内容为 id，因此我想我可以执行以下操作：

使用 CURL 检索 html 将 html 提取到内容的任一侧 将其回显到新页面

我的问题是我不太精通 PHP，所以我不确定如何将两块 html 放在一边。我之前在 Java 中使用过 substring，但 PHP 中的 substr 似乎有点不同。任何人都可以提出替代方案吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:47:40.433

子字符串和正则表达式不足以处理 HTML。最好（也更容易）使用 DOM 解析器。

看看[`DOMDocument`类](http://php.net/manual/en/class.domdocument.php)。它支持加载 HTML，并允许您轻松遍历文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:49:38.123

为了抓取网页，我使用了[HTML DOM parser](http://simplehtmldom.sourceforge.net/)。这对你来说是最简单的方法。您可以在这篇文章中找到更多工具：[如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:02:29.620

前几天我做了非常相似的事情。我选择使用 jQuery、Ajax 和 PHP 来收集页面并将它们分解。我已经包含了我的代码的稀释版本。

对于 PHP，我使用了 CURL (get-url.php)：

```
$requestURL = $_GET['url'];
$curl_handle=curl_init();
curl_setopt($curl_handle, CURLOPT_URL, $requestURL);
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 10);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($curl_handle, CURLOPT_AUTOREFERER, TRUE);
curl_setopt($curl_handle, CURLOPT_FRESH_CONNECT, TRUE);
curl_setopt($curl_handle, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($curl_handle, CURLOPT_MAXREDIRS, 10);
curl_setopt($curl_handle, CURLOPT_DNS_USE_GLOBAL_CACHE, FALSE);
curl_setopt($curl_handle, CURLOPT_FORBID_REUSE, TRUE);
$content = curl_exec($curl_handle);
curl_close($curl_handle);
echo $content; 
```

然后对于 Ajax，我使用了：

```
var url = /* URL you want to retrieve */;
$.ajax({
        url: "get-url.php?url=" + url,
        type: "GET",
        dataType: "html",
        cache: false,
        success: function(data, textStatus, jqXHR){
            var header = data.find('#header').html();
            var footer = data.find('#footer').html();
            $(header_DOM).html(header);
            $(footer_DOM).html(footer);
        }
    }); 
```

这只是一个指南。改变这个想法以满足您的需求。

# c++ - 如何从向量中找到最小值？

> ID：13015932
> 
> 赞同：27
> 
> 时间：2012-10-22T16:44:53.697
> 
> 标签：c++

如何从向量中找到最小值？

```
int main()
{
    int v[100] = {5,14,2,4,6};
    int n = 5;
    int mic = v[0];
    for(int i=0;i<v[n];i++)
    {
        if(v[i]<mic)
        mic=v[i];
    }
    cout<<mic;
} 
```

但是不工作，我该怎么办？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-22T16:48:10.847

`std::min_element(vec.begin(), vec.end())`- 对于 std::vector
`std::min_element(v, v+n)`- 对于数组
`std::min_element( std::begin(v), std::end(v) )`- 从@JamesKanze 的评论中添加了 C++11 版本

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-10-22T16:58:47.877

您始终可以使用 stl：

```
auto min_value = *std::min_element(v.begin(),v.end()); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-22T16:48:44.230

```
#include <iostream>
#include <vector>
#include <algorithm> // std::min_element
#include <iterator>  // std::begin, std::end

int main() {
    std::vector<int> v = {5,14,2,4,6};
    auto result = std::min_element(std::begin(v), std::end(v));
    if (std::end(v)!=result)
        std::cout << *result << '\n';
} 
```

* * *

您显示的程序有一些问题，主要罪魁祸首是`for`条件：`i<v[n]`. 初始化数组，将前 5 个元素设置为不同的值，其余元素设置为零。`n`设置为您显式初始化的元素数，因此`v[n]`第一个元素被隐式初始化为零。因此循环条件第一次为假，循环根本不运行；您的代码只是打印出第一个元素。

一些小问题：

*   避免使用原始数组；它们的行为奇怪且不一致（例如，隐式转换为指向数组第一个元素的指针，不能赋值，不能按值传递给函数/从函数返回）

*   避免幻数。`int v[100]`如果您希望您的数组从某个地方获取输入然后尝试处理 100 多个元素，那么这是一个 bug 的邀请。

*   避免`using namespace std;`在实现文件中没什么大不了的，虽然 IMO 最好习惯于显式限定，但如果你在任何地方盲目使用它可能会导致问题，因为你会将它放在头文件中并开始引起不必要的名称冲突。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-22T16:49:50.243

您的代码中有错误。这一行：

```
for(int i=0;i<v[n];i++) 
```

应该

```
for(int i=0;i<n;i++) 
```

因为您想搜索`n`向量中的位置，而不是`v[n]`位置（这没有任何意义）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-22T17:26:33.990

```
template <class ForwardIterator>
ForwardIterator min_element ( ForwardIterator first, ForwardIterator last )
{
    ForwardIterator lowest = first;
    if (first == last) return last;
    while (++first != last)
    if (*first < *lowest) 
        lowest = first;
    return lowest;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-22T16:49:45.777

试试这个

```
 std::min_element(v.begin(),v.end()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T17:30:26.080

```
#include <iostream>
int main()
{
    int v[100] = {5,14,2,4,6};
    int n = 5;
    int mic = v[0];
    for(int i = 0; i != n; ++i)
    {
        if(v[i] < mic)
        mic = v[i];
    }
    std:cout << mic << std::endl;;
} 
```

# arrays - 根据父级更新 int 数组

> ID：13015933
> 
> 赞同：2
> 
> 时间：2012-10-22T16:44:58.410
> 
> 标签：arrays, postgresql, sql-update

我的数据库中有以下 int[] ：

```
'{0}'
'{0,0}'
'{0,0,0}'
'{0,0,0,0}' 
```

此列用于对我的树数据进行排序。现在，当父母更新它的顺序时，孩子也应该更新。例如，如果第二条记录将其顺序更新为 1，则应导致以下结果。

```
'{0}'
'{0,1}'
'{0,1,0}'
'{0,1,0,0}' 
```

所以我想知道更新记录 3 和 4 的查询是什么。如果不清楚我要问什么，请发表评论，我可以添加其他信息。

**我的实际数据截图：**

![我的实际数据截图](../Images/15eb0a528c33a5003282ad55ec3fb864.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:59:07.877

```
update t
set sort[2] = 1
where sort[1:2] = array[0,0] 
```

# bash - 使用 head 或 tail 命令的用户输入选择

> ID：13015935
> 
> 赞同：1
> 
> 时间：2012-10-22T16:45:00.687
> 
> 标签：bash, shell, tail, head

我想通过命令行提示用户并询问需要使用头部或尾部从数据文件中剪切哪些特定行。我的脚本将使用 head 和 tail 使用输入作为 head 和 tail 命令的变量。到目前为止，这是我所拥有的错误消息：

```
echo -n "What rows need to be cut from your data file: "
read before
read after
head -n $before /home/rent_list
tail -n $after /home/rent_list 
```

错误信息：

```
-bash: ./rent_list: bin/bash: bad interpreter: No such file or directory 
```

**更新：**这就是我现在得到的：

```
 What rows need to be cut from your data file: 4

Mack Tools  Milwaukee Wisconsin mj414@yahoo.com 414 2248893
Terry Tools Orlando Florida 407@yahoo.com 407 2439812
Park Tools  Riviera Beach Florida tp123@hotmail.com 516 5370923
Bike Tools  Orlando Florida baptiste41@gmail.com 407 3420983
tail: /home/renter_list: invalid number of lines 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:48:09.643

错误消息似乎是说您的脚本以`#!bin/bash`而不是开头`#!/bin/bash`（也就是说，您缺少 a `/`before `bin/bash`）。

* * *

**更新：**您的新错误消息是因为您没有输入数字。你有一个`echo`, 后跟两个`read`s。对于第一个`read`，您正在输入`4`，但对于第二个，您只需按 Enter。所以`tail`命令是`tail -n /home/rent_list`.

如果你想对两个命令使用相同的数字，你可以写：

```
echo -n "What rows need to be cut from your data file: "
read num_rows
head -n $num_rows /home/rent_list
tail -n $num_rows /home/rent_list 
```

# jsf-2 - JSF 复合组件 - 尝试保存状态时的奇怪行为

> ID：13015942
> 
> 赞同：2
> 
> 时间：2012-10-22T16:45:25.053
> 
> 标签：jsf-2, composite-component, state-saving

我正在使用 Glassfish 3.2.2 和 JSF 2.1.11

我正在尝试创建一个复合组件，该组件将字符串和最大字符数作为参数，然后仅显示最大字符数，但它旁边会有一个“更多”链接，单击时将将文本扩展至全长，然后在其旁边有一个“更少”链接，以将其恢复为最大字符数。

我看到一些奇怪的行为，所以我想知道我是否做错了什么。

这是我的复合组件定义：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:p="http://primefaces.org/ui">
<composite:interface componentType="expandableTextComponent">
    <composite:attribute name="name" required="true"/>
    <composite:attribute name="maxCharacters" required="true"/>
    <composite:attribute name="value" required="true"/>
</composite:interface>

<composite:implementation>
    <h:panelGroup id="#{cc.attrs.name}">
        <h:outputText value="#{fn:substring(cc.attrs.value, 0, cc.attrs.maxCharacters)}" rendered="#{fn:length(cc.attrs.value) le cc.attrs.maxCharacters}"/>

        <h:outputText value="#{fn:substring(cc.attrs.value, 0, cc.attrs.maxCharacters)}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and !cc.expanded}" style="margin-right: 5px;"/>
        <h:outputText value="#{cc.attrs.value}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and cc.expanded}" style="margin-right: 5px;"/>
        <p:commandLink actionListener="#{cc.toggleExpanded()}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters}" update="#{cc.attrs.name}">
            <h:outputText value="#{__commonButton.more}..." rendered="#{!cc.expanded}"/>
            <h:outputText value="#{__commonButton.less}" rendered="#{cc.expanded}"/>
        </p:commandLink>
</h:panelGroup>
</composite:implementation>
</html> 
```

这里是 Java 组件：

```
@FacesComponent("expandableTextComponent")
public class ExpandableTextComponent extends UINamingContainer
{
    boolean expanded;

    public boolean isExpanded()
    {
        return expanded;
    }

    public void toggleExpanded()
    {
        expanded = !expanded;
    }
} 
```

不幸的是，每次调用 toggleExpanded 函数时，expanded 总是假的。

但是，如果我将复合组件更改为以下内容，则它可以工作。

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:fn="http://java.sun.com/jsp/jstl/functions"
  xmlns:p="http://primefaces.org/ui">
<composite:interface componentType="expandableTextComponent">
    <composite:attribute name="name" required="true"/>
    <composite:attribute name="maxCharacters" required="true"/>
    <composite:attribute name="value" required="true"/>
</composite:interface>

<composite:implementation>
    <h:panelGroup id="#{cc.attrs.name}">
        <h:outputText value="#{fn:substring(cc.attrs.value, 0, cc.attrs.maxCharacters)}" rendered="#{fn:length(cc.attrs.value) le cc.attrs.maxCharacters}"/>

        <h:outputText value="#{fn:substring(cc.attrs.value, 0, cc.attrs.maxCharacters)}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and !cc.expanded}" style="margin-right: 5px;"/>
        <p:commandLink actionListener="#{cc.toggleExpanded()}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and !cc.expanded}" update="#{cc.attrs.name}" process="@this">
            <h:outputText value="#{__commonButton.more}..."/>
        </p:commandLink>

        <h:outputText value="#{cc.attrs.value}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and cc.expanded}" style="margin-right: 5px;"/>
        <p:commandLink actionListener="#{cc.toggleExpanded()}" rendered="#{fn:length(cc.attrs.value) gt cc.attrs.maxCharacters and cc.expanded}" update="#{cc.attrs.name}" process="@this">
            <h:outputText value="#{__commonButton.less}"/>
        </p:commandLink>
    </h:panelGroup>
</composite:implementation>
</html> 
```

如果我在 toggleExpanded 函数中放置一个断点，它只会在“更多”链接而不是“更少”链接上被调用。所以问题是为什么当我点击“less”链接时它没有被调用？这段代码不应该等同于上面的代码吗？

有没有更好的方法来保存组件中的状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T16:58:45.890

基本上，当您将自定义属性/属性添加到组件时，您应该重写[`UIComponent#saveState()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHolder.html#saveState%28javax.faces.context.FacesContext%29)并[`restoreState()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHolder.html#restoreState%28javax.faces.context.FacesContext,%20java.lang.Object%29)根据他们的文档，该组件应该在同一视图上的多个 HTTP 请求中存活。即在每次请求时重新创建组件实例。

从 JSF 2.0 开始，更好的是[`StateHelper`](http://docs.oracle.com/javaee/6/api/javax/faces/component/StateHelper.html)直接在属性 getters/setters 中使用。它可以通过继承的[`UIComponent#getStateHelper()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getStateHelper%28%29)方法获得。

```
private enum PropertyKeys {
    expanded;
}

public void toggleExpanded() {
    setExpanded(!isExpanded());
}

public void setExpanded(boolean expanded) {
    getStateHelper().put(PropertyKeys.expanded, expanded);
}

public boolean isExpanded() {
    return (boolean) getStateHelper().eval(PropertyKeys.expanded, false);
} 
```

# haskell - 测试两个异质值之间的相等性

> ID：13015949
> 
> 赞同：8
> 
> 时间：2012-10-22T16:45:58.970
> 
> 标签：haskell, ghc, existential-type

我正在使用`-XExistentialQuantification`GHC 扩展为特定类型类 ( `Shape`) 的值创建异构容器：

```
-- Container type
data Object = forall a. Shape a => Object a

-- 'Shape' class. Methods not important
class Eq s => Shape s where
    doStuff :: s -> s 
```

鉴于 的所有实例`Shape`也是 的实例`Eq`，有没有办法也创建`Object`一个实例`Eq`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T17:20:19.873

如果你添加一个`Typeable`约束是可能的：

```
import Data.Typeable

data Object = forall a. (Shape a, Typeable a) => Object a

instance Eq Object where
  Object x == Object y =
    case cast y of
      Just y' -> x == y'
      Nothing -> False 
```

在这里，如果所需的类型（从with的使用推断）与 的实际类型匹配，`cast y`则返回，否则返回。 `Just y'``y'``==``x``y``Nothing`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:55:47.753

不，因为`Eq a`说你可以比较 type 的两个值`a`。您的对象上的`Eq`实例将允许比较任意一对值（任何类型的实例`Shape`）。

如果我有`Shape Int`和`Shape Bool`实例，我该如何比较`Object True`平等`Object 1`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T16:55:02.337

实现的类型的值`Eq`只能与相同类型的另一个值进行比较——不能与实现的任何其他类型的值进行比较`Eq`。因此，如果您有两个不同类型的值，即使它们都是`Shape`(and 因此`Eq`) 的实例，也无法比较它们。因此，也不可能有一个`Eq`实例，`Object`因为它`Object`可以包含不同类型的值——至少使用类型的 Eq 实例。

您需要的是一个类型函数`(Shape a, Shape b) => a -> b -> Bool`，可用于将任何形状与任何其他形状进行比较。如果你有这样的功能，你可以用它来`Eq`为`Object`. 但是，您将无法以与类型`Eq`实例一致的方式定义这样的函数。

# powershell - 从 Powershell 中的文本文件导入变量

> ID：13015953
> 
> 赞同：10
> 
> 时间：2012-10-22T16:46:06.443
> 
> 标签：powershell

我有几个 Powershell 脚本可以自动进行 DLL 传输，我想将变量从一个文本文件导入到各种脚本中。我的例子：

```
Variables.txt
$foo = "blarg"
$bar = "other blarg" 
```

然后我想做这样的事情：

```
Script.ps1
Imports Variables.txt
echo "$foo $bar" 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-22T16:49:53.650

这可以通过**Dot Sourcing**来完成。

创建一个 .ps1 文件，在其中声明变量，然后点源文件。这会将文件中声明的所有变量带入全局范围。

例子：

Variables.ps1 的内容：

```
$foo = "blarg"
$bar = "other blarg" 
```

点源它：

```
. ./Variables.ps1
Write-Host "$foo $bar" 
```

# python - 从文件中删除单词

> ID：13015956
> 
> 赞同：3
> 
> 时间：2012-10-22T16:46:14.757
> 
> 标签：python, string, list, file-io, python-3.x

我正在尝试获取常规文本文件并删除在单独文件（停用词）中标识的单词，该文件包含要删除的单词，由回车符（“\n”）分隔。

现在我将两个文件都转换为列表，以便可以比较每个列表的元素。我让这个函数工作，但它不会删除我在停用词文件中指定的所有单词。任何帮助是极大的赞赏。

```
def elimstops(file_str): #takes as input a string for the stopwords file location
  stop_f = open(file_str, 'r')
  stopw = stop_f.read()
  stopw = stopw.split('\n')
  text_file = open('sample.txt') #Opens the file whose stop words will be eliminated
  prime = text_file.read()
  prime = prime.split(' ') #Splits the string into a list separated by a space
  tot_str = "" #total string
  i = 0
  while i < (len(stopw)):
    if stopw[i] in prime:
      prime.remove(stopw[i]) #removes the stopword from the text
    else:
      pass
    i += 1
  # Creates a new string from the compilation of list elements 
  # with the stop words removed
  for v in prime:
    tot_str = tot_str + str(v) + " " 
  return tot_str 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:49:14.867

这是使用生成器表达式的替代解决方案。

```
tot_str = ' '.join(word for word in prime if word not in stopw) 
```

为了提高效率，`stopw`变成`set`using `stopw = set(stopw)`。

如果 sample.txt 不仅仅是一个空格分隔的文件，您当前的方法可能会遇到问题，例如，如果您有带有标点符号的普通句子，那么在空格上拆分会将标点符号作为单词的一部分。要解决此问题，您可以使用该`re`模块将字符串拆分为空格或标点符号：

```
import re
prime = re.split(r'\W+', text_file.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:58:40.600

我认为你的问题是这一行：

```
 if stopw[i] in prime:
      prime.remove(stopw[i]) #removes the stopword from the text 
```

只会删除第一次出现的`stopw[i]`from `prime`。要解决此问题，您应该这样做：

```
 while stopw[i] in prime:
      prime.remove(stopw[i]) #removes the stopword from the text 
```

但是，这将运行得非常缓慢，因为 the`in prime`和`prime.remove`bits 都必须遍历素数。这意味着你最终会在你的字符串长度上得到一个[二次](http://en.wikipedia.org/wiki/Big_O_notation#Orders_of_common_functions)运行时间。如果您使用 FJ[建议](https://stackoverflow.com/a/13015996/600110)的生成器，您的运行时间将是线性的，这要好得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:57:07.833

I don't know python, but here is a general way to do it which is O(n)+O(m) time - linear.

1: Add all words from stopwords file to a map.
2: Read your regular text file and try to add the words to a list. While you do #2 check if currently read word is in map, if it is skip it, otherwise add it to list.

At the end, the list should have all the words that you need - the words that you wanted removed.

# android - 将 TouchEvent 传递给新创建的 SurfaceView

> ID：13015959
> 
> 赞同：0
> 
> 时间：2012-10-22T16:46:22.467
> 
> 标签：android, surfaceview, touch-event

是否可以将触摸事件传递给 android 4.0.3 项目中新创建的 SurfaceView。

让我更准确。

我创建了一个处理传入事件的自定义 OnTouchListener。ACTION_DOWN 事件实例化一个自定义 SurfaceView 并将其添加到所有其他视图之上（这工作正常）。SurfaceView 现在应该处理 ACTON_MOVE 并在 ACTION_UP 上通知侦听器。添加 SurfaceView 后，应将原来的 OnTouchListener 移除。

我试图通过 dispatchTouchEvent 传递 TouchEvent ，但这只有在我连续执行时才有效。是否有可能实现所描述的行为，最好的方法是什么？

最好的问候，谢谢。

这是一些代码：

触摸监听器：

```
OnTouchListener onTouchListener = new OnTouchListener() {

    public boolean onTouch (View v, MotionEvent event) {

        int action = event.getAction();

        switch (action) {

        case MotionEvent.ACTION_DOWN:
            surfaceView = new CustomSurfaceView(this.getActivity(), drawer);
            surfaceView.setZOrderOnTop(true);
            surfaceView.getHolder().setFormat(PixelFormat.TRANSPARENT);

            overlayContainer.addView(surfaceView);
            btnView.setOnTouchListener(null);

            return surfaceView.dispatchTouchEvent(event);;

        default:
            return false;
        }
    }
};

btnView.setOnTouchListener(onTouchListener); 
```

表面视图：

```
@Override
public boolean onTouchEvent (MotionEvent event) {

    switch (action) {

    case MotionEvent.ACTION_MOVE:

        x = (int) event.getX();
        y = (int) event.getY();

        return true;

    case MotionEvent.ACTION_UP:

        // TODO:notify Listener
        return true;

    default:
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T17:17:48.843

只需将 touchevent 传递给新创建的对象。在该对象中，您应该检查表面是否准备好。如果准备好则传递 true 以便外部类也可以返回 true 等。

始终将 touchevents 向下传递，永远不要让它们起源于那里。

# wcf - WCF 中的配置服务？

> ID：13015961
> 
> 赞同：1
> 
> 时间：2012-10-22T16:46:30.303
> 
> 标签：wcf

WCF 是否具有等效的“配置器”服务？

我想做的是创建一个 WCF 服务来处理我的整个应用程序的配置。因此，诸如各种组件的默认值之类的东西。

所以，像这样：

![在此处输入图像描述](../Images/220a4e6aeb7807375de1fc0649697396.png)

我的**问题**是：WCF 已经有这样的东西了吗？

我知道如何写这个，但在我写之前，我想看看我是否正在重新做一些已经可用的东西。

*注意*：这可能是令人困惑的术语，因为 WCF 使用*配置*一词来表示，例如，通过配置文件或以编程方式配置 WCF 服务端点和绑定。我不是那个意思。我的意思是应用程序本身的实际配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:02:49.553

[WCF 是](http://msdn.microsoft.com/en-us/library/ms731082.aspx)一个使用 .NET 构建分布式/面向服务的应用程序的框架，WCF 中没有任何“额外”功能（除了 .NET 中已有的内容，如评论中提到的配置系统）来管理应用程序设置。据我所知，WCF 本身没有“配置器服务”。

您绘制的基本设计当然是可能的，您可以使用 WCF 创建“配置服务”，但 WCF 只会为您提供面向服务方面的框架和基础设施。实际逻辑将在您的服务及其操作中，您必须自己编写代码（尽管您可以为该逻辑使用不同的框架或样板代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T05:18:47.200

它不是内置的，但正如您所说，您可以自己滚动。

我已经在 Channel9 的演示中看到它（[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/MID402](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/MID402) @ 中途标记），其中演示者将配置存储在数据库中，所有客户端和服务器都被拉关闭他们的配置。看起来对大规模操作很有用，但如果您只有几个客户端/服务器，可能不值得。

这是一个 PowerPoint ( [http://media.ch9.ms/teched/na/2011/ppt/MID402.pptx](http://media.ch9.ms/teched/na/2011/ppt/MID402.pptx) )，但您可以从视频中获得一些细节。

# sencha-touch-2 - 按钮触及工具栏边框

> ID：13015966
> 
> 赞同：0
> 
> 时间：2012-10-22T16:46:42.737
> 
> 标签：sencha-touch-2, sencha-architect

当我将一个按钮停靠在工具栏右侧时，它开始触摸工具栏的上边框，如下所示：

![在此处输入图像描述](../Images/83d25eaac7e066548e12ade56ea6ea14.png)

这是我的代码：

```
Ext.define('MyApp.view.MyFormPanel', {
    extend: 'Ext.form.Panel',

    config: {
        items: [
            {
                xtype: 'textfield',
                label: 'Field'
            },
            {
                xtype: 'textfield',
                label: 'Field'
            },
            {
                xtype: 'toolbar',
                docked: 'bottom',
                items: [
                    {
                        xtype: 'button',
                        ui: 'back',
                        text: 'Back'
                    },
                    {
                        xtype: 'button',
                        docked: 'right',
                        ui: 'forward',
                        text: 'Continue'
                    }
                ]
            }
        ]
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:21:39.640

我以前也有同样的问题，但是我解决了！就像我一样，您使用`xtype: 'toolbar'`停靠按钮。你必须使用的是

`xtype: 'titlebar'`

现在，如果标题栏中有一些按钮，只需设置`align`属性，如下所示：

```
 xtype: 'titlebar',
 items: [
      {
         xtype: 'button',
         ui: 'back',
         text: 'Back',
         align: 'left'
      },
      {
         xtype: 'button',
         ui: 'forward',
         text: 'Continue',
         align: 'right'
      }
 ] 
```

查看 Sencha Docs 了解更多信息：[Ext.TitleBar](http://docs.sencha.com/touch/2-0/#!/api/Ext.TitleBar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T07:54:50.233

这里的行为相同，当我使用 right:10px; 而不是停靠在右侧时也是如此。

这可能是由于元素变为 position:absolute 造成的。没有解决方案可以从一开始就防止这种情况发生，但是您当然可以通过将 top:..px 设置为按钮来纠正它。
如果您有很多这样的按钮，请使用 css 类来设置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:00:34.753

这里的行为相同，当我使用 right:10px; 而不是停靠在右侧时也是如此。

这可能是由于元素变为 position:absolute 造成的。没有解决方案可以从一开始就防止这种情况发生，但是您当然可以通过将 top:..px 设置为按钮来纠正它。
如果您有很多这样的按钮，请使用 css 类来设置它。

也请在[Sencha Touch 论坛上报告](http://www.sencha.com/forum/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:47:19.267

好的，我不确定是否存在错误，但您可以尝试不同的方式，方法是删除您的并在两个按钮之间`docked: 'right'`添加一个，如下所示：`xtype: spacer`

```
items: [
    {
        xtype: 'button',
        ui: 'back',
        text: 'Back'
    },
    {
        xtype: 'spacer'  
    },
    {
        xtype: 'button',
        ui: 'forward',
        text: 'Continue'
    }
] 
```

> Ext.Spacer 组件通常用于在 Ext.Toolbar 组件中的项目之间放置空间。

`spacer` [您可以在他们关于此处](http://docs.sencha.com/touch/2-0/#!/api/Ext.Spacer)的文档中找到更多信息和示例。希望能帮助到你 ：）

# javascript - 如何在 Mirth 中运行 javascript 正则表达式

> ID：13015969
> 
> 赞同：0
> 
> 时间：2012-10-22T16:47:01.793
> 
> 标签：javascript, regex, mirth

我有以下字符串：

```
Source: "HKID:A1234567~PKey:00888880~DOC:TKWC033330"

Regex:  .*(HKID:.*?)(.+?)((?=~)|\s|\z) 
```

当我在 JavaScript 正则表达式测试[站点](http://www.regular-expressions.info/javascriptexample.html)进行测试时，我得到了 A1234567，所以一切都很好。

我把这个表达式放在我 Mirth 频道的一个 javascript 转换器中。但我得到的 hk_id 值是空字符串或空字符串。

我尝试过的事情：

1.  使用该功能`re.match()`，但这给了我错误，笑声说 `cannot find function match in object...`
2.  我试图在下面的正则表达式周围加上单引号，或者`/`
3.  我试图将我的正则表达式简化为最简单的形式来测试它`re.exec('.*')`，但我仍然得到空值或空值。
4.  我没有尝试运行`RegExp.$1`，而是仅尝试返回 m，但没有产生任何差异。

我认为这可能归结为我如何逃避角色，但我找不到任何关于此的 Mirth 文档，如果您有任何见解，他们将不胜感激。

```
var hk_id = Find_HKID();
var xml_msg = 
'<?xml version="1.0" encoding="utf-8" ?> <XML><Barcode="'+hk_id+'" /></XML>';

var sResp = ResponseFactory.getSuccessResponse(xml_msg)
responseMap.put('Response', sResp);

function Find_HKID() 
{
   var test = 'HKID:A1234567~PKey:00888880~DOC:TKWC033330'
   var re = new RegExp(test);
   var m = re.exec('.*(HKID:.*?)(.+?)((?=~)|\s|\z)');
   return RegExp.$1 + RegExp.$2 + RegExp.$3 + "";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:55:55.523

You confused regex and and test string, it should be:

```
function Find_HKID() 
{
   var test = 'HKID:A1234567~PKey:00888880~DOC:TKWC033330'
   var re = new RegExp('.*(HKID:.*?)(.+?)((?=~)|\s|\z)');
   var m = re.exec(test);
   return RegExp.$1 + RegExp.$2 + RegExp.$3 + "";
} 
```

[Now it works like a charm:-D](http://jsfiddle.net/MfENC/)

And btw. you should not use `new RegExp()`, it's slow and ugly. Use the regex directly:

```
var re = /.*(HKID:.*?)(.+?)((?=~)|\s|\z)/; 
```

Edit: like Ωmega proposed this regex might work for you too, and is much more precise:

```
var re = /.*(HKID:.*?)[~\s]/ 
```

# c# - 如何使用c#将文本打印到特定位置？

> ID：13015972
> 
> 赞同：1
> 
> 时间：2012-10-22T16:47:08.863
> 
> 标签：c#, .net

如何将字段打印到特定页面位置？例如，我有一个打印的表格，我想在那些特定/分隔的空间中打印数据。

我看过一些例子，但它们不适用于我的需要。

[http://www.codeproject.com/Articles/10180/How-to-print-text-in-C](http://www.codeproject.com/Articles/10180/How-to-print-text-in-C)

[https://stackoverflow.com/questions/7703274/how-to-create-page-with-text-in-specific-location](https://stackoverflow.com/questions/7703274/how-to-create-page-with-text-in-specific-location)

最后一个如果没有关闭，我想它会有答案。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:57:52.290

如果您有纸质表格，您可以扫描它，然后使用像 CutePDF 这样的程序将其转换为 PDF 表格。接下来，创建您希望能够填写的字段（通过拖动矩形），命名它们，然后保存表单。iTextSharp 是一个 C# 库，可让您以编程方式填写表单字段。

例子：

```
//Replace with path to the form
var pdfFormLocation = "C:\\pdfForm.pdf"; 

//Adjust below path to a temp location
var pdfPath = String.Format("C:\\temp\\{0}", Guid.NewGuid().ToString());
File.Copy(pdfFormLocation, pdfPath, true);

var reader = new PdfReader(pdfPath);
var output = new FileStream();
var stamper = new PdfStamper(reader, output);

//the form field names can be a little hairy
stamper.AcroFields.SetField("topmostSubform[0].Page1[0].f1_01_0_[0]", "Your Name");

//make the form no longer editable
stamper.FormFlattening = true;

stamper.Close();
reader.Close();
//now you can go print this file from pdfPath 
```

链接： [iTextSharp](http://sourceforge.net/projects/itextsharp/) [CutePDF](http://www.cutepdf.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:15:16.393

如第一篇文章所述，在 C# 中打印到打印机与在画布上绘制完全相同（除非您使用报告框架）。

[PrintDocument.PrintPage](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.printpage%28v=vs.71%29.aspx)事件有一个[图形](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)参数，您可以使用该参数在页面上绘制任何您想要的东西。

Graphics 有一个[Graphics.DrawString](http://msdn.microsoft.com/en-us/library/76c5db29.aspx)函数，该函数将位置作为其参数之一。

只需使用它在任何您想要的地方绘制文本。

如果您还想绘制一个矩形，您可以使用[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring.aspx)函数和[Graphics.DrawRectangle](http://msdn.microsoft.com/en-us/library/x3z45zt7.aspx)方法来绘制一个类似文本框的字段。

# windows - 来自 PC 桌面的 Windows Phone 7 设备信息和文件系统信息

> ID：13015974
> 
> 赞同：0
> 
> 时间：2012-10-22T16:47:21.063
> 
> 标签：windows, windows-phone-7, windows-7

我想开发一个 Windows 7 桌面应用程序，它应该通过与 Windows Phone 7.0 交谈来提供以下信息。它是未锁定/翻新的手机。

IMEI 号码 文件系统信息，例如（联系人、日历条目和通话记录条目等） 设置：桌面应用程序 -----USB------- Windows Phone 7

请分享一些有关如何检索上述信息的信息。

# android - Android Assets 数据库安全问题？

> ID：13015976
> 
> 赞同：0
> 
> 时间：2012-10-22T16:47:33.790
> 
> 标签：android, database, assets, sensitive-data

我正在查看[这个](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/#comment-2030)页面，它解释了如何在本地 Android 项目（在 Assets 中）使用数据库来填充应用程序标准数据库（由 Android 管理，在 data/...中），如下[所示](http://developer.android.com/guide/topics/data/data-storage.html#db)。这样，资产数据库中的所有数据都可以在apk中自由读取，对吧？

如果数据库中有个人信息或证书，这不是存储数据的好方法。将大信息数据存储在资产数据库中并将个人数据存储在 res/xml 或 res/values 中的最佳方式是什么？是否有推荐的方式来存储个人数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T03:23:32.913

Android 中的 APK 文件默认是全球可读的，因此在其中存储敏感数据并不是一个好主意。在 JellyBean 及更高版本上，应用程序可以被前向锁定（也称为“应用程序加密”），这将确保您的私有资产无法被其他应用程序读取。对于付费应用，这是自动完成的。

最好的方法是不要将数据存储在 APK 中，而是在首次安装时下载。您可以使用 Google Play 扩展文件，这些文件需要身份验证才能下载或提出您自己的解决方案。

您可以以某种加密形式存储它们，然后在第一次运行时解密它们，但是您将遇到密钥管理问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:10:40.793

幸运的是，我今天正在读到这个。Android 开发指南建议您使用内部存储来存储私有数据，因为其他应用程序或用户无法访问这些数据。请参阅[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal) 我希望有所帮助。

# crystal-reports - 在 Crystal Reports 中涉及除法的组摘要

> ID：13015977
> 
> 赞同：0
> 
> 时间：2012-10-22T16:47:34.633
> 
> 标签：crystal-reports, crystal-reports-2008

我有一个包含大约 9 个不同组的 Crystal Report，并且希望能够有一个涉及将一个值除以另一个值的摘要。

例如（表）：

```
Period    Company   Division   Region  State   City   Store   Employee   Sales   Goal
01-2012   Ab Works  Northern   NW      OR      Ball   888     Foo        100     150
01-2012   Ab Works  Northern   NW      OR      Ball   888     Choo       175     120
02-2012   Ab Works  Southern   SE      GA      Chip   743     Bar        34      75
02-2012   Perrywee  Northern   NC      MN      Fedd   147     Bill       80      64
03-2012   Perrywee  Eastern    FE      WV      Wood   98      Tim        75      250
01-2012   Perrywee  Eastern    FE      WV      Wood   92      Karl       84      250
01-2012   Perrywee  Western    W       CA      Fub    398     Fubar      175     170 
```

然后我的输出如下所示：

```
Company   Jan2012   Feb2012   Mar2012 ...  YTD-Avg
Ab Works  70.3%     87.3%     87.5%        84.3%
Perrywee  93.5%     97.3%     130.3%       90.4% 
```

每个都允许向下钻取到它下面的组，该值的计算方法是该组的销售额总和除以该组的目标总和。由于有 14 个周期和 8 个组，我想避免创建约 115 个公式。

有没有简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:19:57.970

脚步：

*   插入交叉表；`company`对于行总计；`period`对于列总计（将组选项设置为“每个月”）；添加`sales`和`goal`汇总字段
*   预览报告
*   右键单击`goal`单元格，选择“嵌入式摘要”，然后选择“插入嵌入式摘要”
*   切换到设计模式（交叉表专家）；确保字段的顺序（从上到下）是`@Embedded Summary`, `Sum of Sales`,`Sum of Goal`
*   进入预览模式；右键单击嵌入式摘要字段并选择“编辑计算公式”；添加以下内容：

    local numbervar n:=GridValueAt (CurrentRowIndex, CurrentColumnIndex, 1); local numbervar d:=GridValueAt (CurrentRowIndex, CurrentColumnIndex, 2);

    如果 d<>0 则 n/d*100

*   抑制销售和目标字段

但是，我（还）还没有找到删除多余空间的方法。

样本：

![在此处输入图像描述](../Images/745e606581d9006d16207f08e2d1975a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T02:35:50.680

我做过类似的事情，但没有使用百分比。我想出来的方式几乎是痛苦的，但你将拥有向下钻取的能力。我会发布我想出的东西，但如果有人可以修改它以使其更容易，无论如何。

首先，创建您要使用的 8 个组并隐藏它们。您将需要 14 个公式来为您的期间创建列。对于您的第一个时期，公式（和后续时期）应如下所示：

```
IF {table.period} = "01-2012" THEN
    IF DrillDownGroupLevel = 0 THEN
        SUM({table.sales}, {table.group1}) / SUM({table.goal}, {table.group1})
    ELSE IF DrillDownGroupLevel = 1 THEN
        SUM({table.sales}, {table.group2}) / SUM({table.goal}, {table.group2})
    ELSE IF DrillDownGroupLevel = 2 THEN
        SUM({table.sales}, {table.group3}) / SUM({table.goal}, {table.group3})
    ELSE IF DrillDownGroupLevel = 3 THEN
        SUM({table.sales}, {table.group4}) / SUM({table.goal}, {table.group4})
    ...
    ELSE
        SUM({table.sales}, {table.group8}) / SUM({table.goal}, {table.group8})
ELSE
    0 
```

这个公式的作用是确定它是什么时期，然后确定它处于哪个组级别。然后，考虑到该组在该级别上的假设，它总结了销售和目标。

*   对于*IF {table.period} = "01-2012" THEN*行，我将其设置为参数，因此它可以工作多年。
*   我宁愿使用一个函数来确定我所在的组级别，但我只知道 DrillDownGroupLevel。如果您尝试对组做一些花哨的事情（条件抑制），它很有用但有缺陷，不要进行简单的钻取。
*   *将{table.group1}*更改为您用于该组级别的任何字段。即{table.company}

这个公式的一个缺点是每次向下钻取时，DrillDownGroupLevel 都会改变。您显示的新级别将是正确的，但仍然显示的先前级别将会改变。

希望这可以帮助。

# php - 单项执行出错

> ID：13015981
> 
> 赞同：2
> 
> 时间：2012-10-22T16:47:48.617
> 
> 标签：php, implementation

我正在做我的第一个单入口网站，根据结果，我看不到好处。

我已经实现了以下内容：

*   .htaccess 将所有请求重定向到根目录下的 index.php
*   Url 被解析并且每个 /segment/ 被存储为数组中的一个元素
*   第一段指示要包含的文件夹（例如“users”»“/pages/users/index.php”）。
*   每个文件夹的 index.php 文件解析segments数组中的剩余元素，直到数组为空。
*   如果segments数组中没有更多元素，则包含每个文件夹的content.php文件，表示到达目标文件

**样本**

文件结构（ [] 中的文件夹）：

*   *[根]*
    *   索引.php
    *   *[页]*
        *   *[用户]*
            *   索引.php
            *   内容.php
            *   *[轮廓]*
                *   索引.php
                *   内容.php
                *   *[编辑]*
                    *   索引.php
                    *   内容.php
        *   *[其他页面]*
            *   索引.php
            *   内容.php

请求： http: **//mysite.com/users/profile/**

1.  .htaccess 将请求重定向到[http://mysite.com/index.php](http://mysite.com/index.php)

2.  URL 被解析，segments 数组包含：[1] 用户，[2] 个人资料

3.  index.php 将 [1] 映射到“pages/users/index.php”，因此包含该文件

4.  pages/users/index.php 将 [2] 映射到 pages/users/profile/index.php，因此包含该文件

5.  由于segments数组中没有其他元素，因此包含当前文件夹（pages/users/profile）中的contents.php文件。

* * *

我并没有真正看到这样做比拥有包含站点组件的函数（例如 include_header()、include_footer() 等）的好处，所以我得出结论，我做的事情非常错误。我只是不确定它是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T16:52:58.773

您拥有的这个版本缺少一些功能，只能用作非常简单的前端控制器模式。

大多数系统不会将 URL 映射到作为*页面*的单个 PHP 文件- 它们将 URL 路径映射到知道如何*构建页面*的控制器。

此外，并非所有 URL 都需要映射到直接文件。例如，查看`github.com/[username]/[repo]`. 你不能创建数百万个`bob/ajaxstuff/index.php`文件——你需要使用正则表达式告诉控制器你想要这个项目的写入页面。

```
$app->get('/:username/:repo', function ($username, $repo) {
    echo "Looking at $username's $repo";
}); 
```

要真正掌握如何正确使用它，我建议您使用功能齐全的路由系统，例如简单的[Slim 框架](http://www.slimframework.com/)。

如果您想了解有关路由设计和理论的更多信息，我建议您阅读[php-router 的](https://github.com/robap/php-router)自述文件和来自 warpspire的优秀[URL 设计帖子。](http://warpspire.com/posts/url-design/)

如果其中任何一个太多，您还可以查看[klein](https://github.com/chriso/klein.php)和超级简单的[ToroPHP](http://toroweb.org/)库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:57:11.910

这是因为当您的内容存储在数据库中时，您通常会使用这种方法，而不是像您拥有的基于文件的系统。如果您的页面是独立文件，则无需重写。

# java - 从 PL/SQL 与 Java 处理文本文件

> ID：13015991
> 
> 赞同：0
> 
> 时间：2012-10-22T16:48:29.413
> 
> 标签：java, performance, oracle, stored-procedures

我需要在 Oracle 数据库中实现一个存储过程，它将执行以下操作：

*   读取需要处理的外部文件（从文件中提取数据并验证）
*   调用数据库中的另一个存储过程负责验证/插入数据。
*   管理异常。
*   将执行的操作结果写入另一个文件。

我知道我可以用 PL/SQL 或 Java（存储过程）来做所有这些事情，但哪个会更高效/更快或更好？大多数操作是读取/写入文件，并且数据库操作已经在存储过程中完成。

我读过其他关于 PL/SQL 与 Java 的文章（如[this](https://stackoverflow.com/questions/6821841/java-stored-procedure-vs-pl-sql-stored-procedure)和[this](http://www.coderanch.com/t/550834/Oracle-OAS/Native-Java-Oracle-vs-PL)），但没有人谈论这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T16:52:45.967

我永远不想使用 SQL 方言，无论它多么通用，在数据库之外做任何事情。我会做你想做的事情，最好是在 shell 或 perl 脚本中，使用最小的公分母，虽然 Java 还可以，只是对于这么简单的工作来说可能有点太复杂了。但是，如果您拥有或知道如何使用 Java，那就去吧。

# sql - MS-SQL 获取差值

> ID：13015993
> 
> 赞同：1
> 
> 时间：2012-10-22T16:48:43.360
> 
> 标签：sql, coldfusion

我有这个查询来计算我数据库中所有油箱的当前加仑值。

```
SELECT DISTINCT y.TankNumber as TankNumber
    , y.Gallons as Gallons
    , y.timeUpdated
    , y.FuelType as FuelType
FROM (
    SELECT TankNumber, max(timeUpdated) as maxdate
    FROM someTable
    GROUP BY TankNumber) as x
JOIN someTable y
ON x.TankNumber = y.TankNumber
AND x.maxdate = y.timeUpdated
ORDER BY y.TankNumber 
```

根据燃料使用情况，数据会随时自动转储到我的数据库中。上面的查询只会给我每个油箱中的当前加仑值：

```
TankNumber  |  Gallons  |  timeUpdated        |  FuelType
     1      |  14       |  2012-10-22 04:16   |  89
     2      |  8        |  2012-10-22 04:14   |  93 
```

等等。
我的问题是，我正在尝试向我的页面添加另一个输出值，这将使我知道自上次更新以来使用了多少燃料。所以它看起来像这样：

```
TankNumber  |  Gallons  |  timeUpdated        |  FuelType  |  GallonsUsed
     1      |  14       |  2012-10-22 04:16   |  89        |  5
     2      |  8        |  2012-10-22 04:14   |  93        |  -11 
```

不幸的是，对于这类问题，我的 SQL 经验并不那么可靠，我花了大约两天时间试图找出或用谷歌搜索接近的东西。因此，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T16:57:56.463

假设您使用的是 MS SQL 2005 或更高版本，您可以使用 ROW_NUMBER 函数：

```
WITH cteOrderedUpdates As
(
   SELECT
      TankNumber,
      Gallons,
      TimeUpdated,
      FuelType,
      ROW_NUMBER() OVER 
      (
         PARTITION BY 
            TankNumber 
         ORDER BY 
            TimeUpdated DESC
      ) As RowNumber
   FROM
      someTable
)
SELECT
   x.TankNumber,
   x.Gallons,
   x.TimeUpdated,
   x.FuelType,
   x.Gallons - IsNull(y.Gallons, 0) As GallonsUsed
FROM
   cteOrderedUpdates As x
   LEFT JOIN cteOrderedUpdates As y
   ON x.TankNumber = y.TankNumber
   And x.RowNumber = y.RowNumber - 1
WHERE
   x.RowNumber = 1
ORDER BY
   x.TankNumber
; 
```

# asp.net - 标题冻结后保持 Gridview 标题与列的大小相同

> ID：13015998
> 
> 赞同：1
> 
> 时间：2012-10-22T16:49:29.273
> 
> 标签：asp.net, css

所以我不得不冻结gridview的标题栏，我使用asp：panel和CSS来做到这一点。

```
<asp:Panel ID="panelContainer" runat="server" Height="100px" Width="100%"  ScrollBars="Vertical">

<HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" Font-Size="small" CssClass="HeaderFreeze"  />

.HeaderFreeze
    {
    position:absolute;
    height: 40px;
    top: 80px;

    } 
```

我现在唯一的问题是标题不再保持列的大小；有什么方法可以强制标题保持列的大小（这可能会因其中的数据而改变）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:17:00.913

对于动态列宽，请使用 JavaScript。这是使用 jQuery 的解决方案：

[示例 jsfiddle](http://jsfiddle.net/pxfunc/z3u8S/)（[全屏](http://jsfiddle.net/pxfunc/z3u8S/show)）

创建仅包含标题行的重复表格元素

```
<table id="panelContainerFixed">
    <tr class="header">
        <th>ID</th><th>Name</th>
    </tr>
</table>

<table id="panelContainer">
    <tr class="header">
        <th>ID</th><th>Name</th>
    </tr>
    <tr>
        <td>1</td><td>Name-1</td>
    </tr>
    <tr>
        <td>2</td><td>Name-2</td>
    </tr>
    <tr>
        <td>3</td><td>Name-3</td>
    </tr>
    ...
</table> 
```

计算列的宽度并将这些宽度应用于重复的标题

```
// cache re-usable variables
var $window = $(window),
    $panelContainerFixed = $('#panelContainerFixed'),
    $panelContainer = $('#panelContainer'),
    $header = $('.header'),
    headerPos = $header.offset().top + $header.height();

// set column widths
$panelContainer.find('th').each(function() {
    var $that = $(this);
    $panelContainerFixed.find('th').eq($that.index()).width($that.width());
}); 
```

根据 scrollTop 显示/隐藏重复的标题

```
// on window scroll toggle the fixed headers
$window.scroll(function() {
    if ($window.scrollTop() > headerPos) {
        $panelContainerFixed.show();
    } else {
        $panelContainerFixed.hide();
    }
});​ 
```

# c# - Mvp View 知道 Model

> ID：13015999
> 
> 赞同：3
> 
> 时间：2012-10-22T16:49:32.637
> 
> 标签：c#, .net, winforms, design-patterns, mvp

我正在尝试使用 MVP，我注意到我的视图必须知道模型，我认为这不应该发生在 MVP 中。

这是示例：

```
public partial class TestForm : Form, ITestView
{
    public void LoadList(IEnumerable<AppSignature> data)
    {
        testPresenterBindingSource.DataSource = data;
    }
}

public interface ITestView
{
    event EventHandler<EventArgs> Load;
    void LoadList(IEnumerable<AppSignature> data);
}

public class TestPresenter
{
   private ITestView view;

   public TestPresenter(ITestView view)
   {  
       this.view = view;
       view.Load += View_Load;
   } 

   private void View_Load(object sender, EventArgs e)
   {
       var data = // get from model
       view.LoadList(data);
   }
} 
```

问题是在TestForm 中我需要参考AppSignature。在我看到的所有教程中，都有一些简单的例子，比如 `public void LoadList(IEnumerable<String> data)`不需要参考模型。但是 ie DataGridView 是如何发布当前行数据的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T16:55:53.227

The View may have knowledge of Model as long as the interaction is limited to data binding only. i.e. View should not try to manipulate Model directly. View will always redirect user input to Presenter and Presenter will take care of further actions. If any action performed by Presenter results in a change in state of Model, Model will notify View via data binding. Model will be completely unaware of existence of View.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:53:04.880

您的表单是一个视图，它不是一个演示者。因此它应该实现接口`ITestView`：

```
public interface ITestView
{
    event EventHandler Load;
    void LoadList(IEnumerable<AppSignatureDto> data);
} 
```

您的 Presenter 是订阅视图事件并使用视图属性来读取和更新视图的人：

```
public class TestPresenter
{
   private ITestView view;

   public TestPresenter(ITestView view)
   {  
       this.view = view;
       view.Load += View_Load;
   } 

   private void View_Load(object sender, EventArgs e)
   {
       List<AppSignature> signatures = // get from model
       List<AppSignatureDto> signatureDtos = // map domain class to dto
       view.LoadList(signatureDtos);
   }
} 
```

正如我已经说过的，你的形式是一个视图，它对演示者和模型一无所知：

```
public partial class TestForm : Form, ITestView
{
    public event EventHandler Load;    

    private void ButtonLoad_Click(object sender, EventArgs e)
    {
        if (Load != null)
            Load(this, EventArgs.Empty);
    }

    public void LoadList(IEnumerable<AppSignatureDto> data)
    {
        // populate grid view here
    }
} 
```

如何处理对域类的引用？通常我只提供查看简单数据（字符串、整数、日期等），或者我创建传递给视图的数据传输对象（您可以将它们命名为 FooView、FooDto 等）。[您可以使用AtoMapper](http://automapper.org/)之类的东西轻松映射它们：

```
List<AppSignatureDto> signatureDtos = 
      Mapper.Map<List<AppSignature>, List<AppSignatureDto>>(signatures); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T00:08:55.897

可以在 Presenter 中获取 DataSource 并设置它的 DataSource 吗？例如演示者代码：

```
Public void LoadData()
{
    _view.Data.DataSource = Business.GetData().ToList();
} 
```

表格代码：

```
Public BindingSource Data
{
    get
    {
        return this.bsData;
    }
} 
```

多亏了这一点，我不需要添加对视图的任何引用，但我没有在任何其他来源中看到该解决方案。