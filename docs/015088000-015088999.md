# StackOverflow 问答 15088000-15088999

# ios - UIButton 图像仅更改一个按钮

> ID：15088000
> 
> 赞同：0
> 
> 时间：2013-02-26T11:30:13.693
> 
> 标签：ios, uiimageview, uibutton, uiimage, iboutlet

我编写了一些代码，根据选择的按钮切换 2 个按钮。如果选择了英国，则它会打勾，而 BR 则不打勾，反之亦然。然而，这似乎只是英国按钮的情况。如果我选择 BR 按钮而不是 UK 按钮取消勾选，则 BR 按钮会短暂勾选，但随后会再次取消勾选。

我已经正确地连接了我的按钮（我已经检查了三次），并且当 BR 按钮短暂滴答时，它肯定是连接起来的。我正在使用的代码如下：

**。H**

```
@property (weak) IBOutlet UIButton *btUK;
@property (weak) IBOutlet UIButton *btBR; 
```

**.m**

```
- (IBAction)changePortal:(id)sender
{
    UIButton *button = (UIButton *)sender;

    if (button.tag == kUKButton)
    {
        self.btUK.imageView.image = [UIImage imageNamed:@"tick_box.png"];
        self.btBR.imageView.image = [UIImage imageNamed:@"tick_box_empty.png"];
        [Singleton sharedSingleton].bUseUKPortal = YES;
    }
    else if (button.tag == kBRButton)
    {
        self.btBR.imageView.image = [UIImage imageNamed:@"tick_box.png"];
        self.btUK.imageView.image = [UIImage imageNamed:@"tick_box_empty.png"];
        [Singleton sharedSingleton].bUseUKPortal = NO;
    }
} 
```

我在代码中设置了断点，并确认两个按钮在单击时都进入了它们的相关部分。我还可以确认没有其他代码正在使用 btUK 和 btBR 变量，因为我刚刚编写了所有代码。

两个按钮都将 changePortal 设置为它们的操作，并且该函数每次单击仅调用一次。

我也尝试过清理代码，但这并没有解决我的问题。

如果有人能解释为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:41:20.913

设置 a 的图像的正确方法`UIButton`是调用`setImage:forState:`. 所以试着把你的代码改成这样：

```
// Follow this pattern for every button image change
[self.btUK setImage:[UIImage imageNamed:@"tick_box.png"] forState:UIControlStateNormal]; 
```

* * *

现在关于`imageView`财产，[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIButton_Class/UIButton/UIButton.html)指出：

> 按钮的图像视图。（只读）

```
@property(nonatomic, readonly, retain) UIImageView *imageView 
```

> 讨论
> 
> 虽然这个属性是只读的，但它自己的属性是读/写的。使用这些属性来配置按钮视图的外观和行为。例如：

```
UIButton *button = [UIButton buttonWithType: UIButtonTypeRoundedRect];
button.imageView.exclusiveTouch = YES; 
```

> 即使按钮尚未显示，imageView 属性也会返回一个值。对于系统按钮，该属性的值为 nil。

# c# - 将 C# 对象列表解析为 JS 中的键值对

> ID：15088002
> 
> 赞同：3
> 
> 时间：2013-02-26T11:30:23.753
> 
> 标签：c#, javascript, jquery, json

我有一个由网格的列模型属性构成的 JSON 对象。我想在网格中填充一个下拉列表，因为我有一个带有 ID - 值对的对象列表。

网格模型采用以下格式的值：

```
values: { "be": "Belgium", "fr": "France", "uk": "Great-Britain", "nl": "Nederland" } 
```

我的匿名对象结构如下：

```
List<Object> valueList = new List<Object>();
var item1 = new { ID = "M", Value = "Male" };
var item2 = new { ID = "F", Value = "Female" };
valueList.Add(item1);
valueList.Add(item2); 
```

之后的数组结构`$.parseJSON`为：

```
 [
Object
ID: "M"
Value: "Male"
__proto__: Object
, 
Object
ID: "F"
Value: "Female"
__proto__: Object
] 
```

编辑：

将此用于 json 转换器：

```
var jsonSerialiser = new JavaScriptSerializer();
json = jsonSerialiser.Serialize(model);
return json; 
```

其中模型是具有其他网格属性和值列表的列表。

我将如何从中构造 JSON 格式的数据，以便获得类似的结果？有正确的方法吗？还是我必须做一些类似于拆分和制作字符串的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T11:46:17.833

您可以使用字典：

```
Dictionary<string, string> valueList = new Dictionary<string, string>();
valueList.Add("M", "Male");
valueList.Add("F", "Female");

var jsonSerialiser = new JavaScriptSerializer();
var json = jsonSerialiser.Serialize(new { values: valueList });
return json; 
```

这将序列化为：

```
{"values":{"M":"Male","F":"Female"}} 
```

# java - 在java中读取结果

> ID：15088006
> 
> 赞同：1
> 
> 时间：2013-02-26T11:30:35.100
> 
> 标签：java, sockets, url, https

每次我在使用套接字读取谷歌搜索结果时在我的响应中收到这个错误，每次我搜索它都会给我这个错误响应，有时它给我 302 响应，现在它给我 301，我不知道是什么为此，我只想从谷歌获得结果，每次我被困在这里，如何解决：

```
HTTP/1.1 301 Moved Permanently
Location: http://www.google.com/search?q=java
Content-Type: text/html; charset=UTF-8
Date: Tue, 26 Feb 2013 10:57:46 GMT
Expires: Thu, 28 Mar 2013 10:57:46 GMT
Cache-Control: public, max-age=2592000
Server: gws
Content-Length: 232
X-XSS-Protection: 1; mode=block
X-Frame-Options: SAMEORIGIN
301 Moved
The document has moved here 
```

这是我的代码：

```
public String readGoogle(String keyword, int page) {
    String content = "";
    try {
        Socket s = new Socket("google.com", 80);
        PrintStream p = new PrintStream(s.getOutputStream());
        p.print("GET /search?q=" + keyword + "&start=" + page
                + " HTTP/1.1\r\n");
        p.print("User-Agent: Mozilla/4.0 "
              + "(compatible; MSIE 7.0; Windows NT 5.1)\r\n");
        p.print("Connection: close\r\n\r\n");
        InputStreamReader in = new InputStreamReader(s.getInputStream());
        BufferedReader buffer = new BufferedReader(in);
        String line;
        while ((line = buffer.readLine()) != null) {
            content += line;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return content;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:54:19.487

`GET`在您的请求中输入完整的 URL ：

```
 //           ~~~~~~~~~~~~~~~~~~~~~
 p.print("GET http://www.google.com/search?q=" + keyword + ...
 //           ^^^^^^^^^^^^^^^^^^^^^
 //           ADD THE FULL URL HERE 
```

也许它可以解决你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:02:57.073

301/302 表示服务器要求您重新发出请求（重定向）。要处理此问题，请从响应中读取“位置”标头，然后从服务器提供的 URL 发出新的 GET 请求。在上面的示例中，您被重定向到“ [http://www.google.com/search?q=java](http://www.google.com/search?q=java) ”。

或者，您可以下载一个为您处理重定向的库，例如 Apache Http Commons。他们的教程可以在这里阅读[教程](http://hc.apache.org/httpclient-3.x/tutorial.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:36:46.617

`www.google.com`根据您的 IP 地址将您重定向到特定国家/地区的站点

还提供了`new location`，您需要创建一个套接字。

# javascript - 使用参数添加和删除事件侦听器

> ID：15088010
> 
> 赞同：20
> 
> 时间：2013-02-26T11:31:02.333
> 
> 标签：javascript, dom, dom-events

我正在编写一个**普通的 JavaScript**工具，当启用它时，它会为传递给它的每个元素添加事件侦听器。

我想做这样的事情：

```
var do_something = function (obj) {
        // do something
    };

for (var i = 0; i < arr.length; i++) {
    arr[i].el.addEventListener('click', do_something(arr[i]));
} 
```

不幸的是，这不起作用，因为据我所知，*在添加事件侦听器时，参数只能传递给匿名函数*：

```
for (var i = 0; i < arr.length; i++) {
    arr[i].el.addEventListener('click', function (arr[i]) {
        // do something
    });
} 
```

**问题是我需要能够在禁用该工具时删除事件侦听器，但我认为不可能使用匿名函数删除事件侦听器**。

```
for (var i = 0; i < arr.length; i++) {
    arr[i].el.removeEventListener('click', do_something);
} 
```

*我知道我可以很容易地使用 jQuery 来解决我的问题，但我正在尝试最小化依赖关系。*jQuery 必须以某种方式解决这个问题，但代码有点像丛林！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-26T11:39:16.403

这是无效的：

```
arr[i].el.addEventListener('click', do_something(arr[i])); 
```

侦听器必须是函数*引用*。当您调用函数作为 的参数时`addEventListener`，函数的返回值将被视为事件处理程序。您不能在分配侦听器时指定参数。处理程序函数将始终以`event`作为第一个参数传递的方式调用。要传递其他参数，您可以将处理程序包装到匿名事件侦听器函数中，如下所示：

```
elem.addEventListener('click', function(event) {
  do_something( ... )
} 
```

为了能够通过`removeEventListener`您删除处理程序函数：

```
function myListener(event) {
  do_something( ... );
}

elem.addEventListener('click', myListener);

// ...

elem.removeEventListener('click', myListener); 
```

要访问处理函数中的其他变量，您可以使用闭包。例如：

```
function someFunc() {
  var a = 1,
      b = 2;

  function myListener(event) {
    do_something(a, b);
  }

  elem.addEventListener('click', myListener);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:41:42.267

可以使用将参数传递给事件处理程序`bind`，也可以使用返回函数的处理程序

```
// using bind
var do_something = function (obj) {
  // do something
}

for (var i = 0; i < arr.length; i++) {
  arr[i].el.addEventListener('click', do_something.bind(this, arr[i]))
}

// using returning function
var do_something = obj => e {
  // do something
}

for (var i = 0; i < arr.length; i++) {
  arr[i].el.addEventListener('click', do_something(arr[i]))
} 
```

但是在这两种情况下，删除事件处理程序是不可能的，因为`bind`会给出一个新的引用函数，并且每次执行 for 循环时返回函数也会返回一个新函数。

为了处理这个问题，我们需要将函数的引用存储在 an 中`Array`并从中删除。

```
// using bind
var do_something = function (obj) {
  // do something
}
var handlers = []

for (var i = 0; i < arr.length; i++) {
  const wrappedFunc = do_something.bind(this, arr[i])
  handlers.push(wrappedFunc)
  arr[i].el.addEventListener('click', wrappedFunc);
}
//removing handlers
function removeHandlers() {
  for (var i = 0; i < arr.length; i++) {
    arr[i].el.removeEventListener('click', handlers[i]);
  }
  handlers = []
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:08:25.453

这可以很容易地完成，只是不像你现在拥有的那样。

*您需要添加或删除处理其他*函数执行的函数，而不是尝试添加和删除随机匿名函数。

```
var
    // Here we are going to save references to our events to execute
    cache = {},

    // Create a unique string to mark our elements with
    expando = String( Math.random() ).split( '.' )[ 1 ],

    // Global unique ID; we use this to keep track of what events to fire on what elements
    guid = 1,

    // The function to add or remove. We use this to handler all of other 
    handler = function ( event ) {

        // Grab the list of functions to fire
        var handlers = ( cache[ this[ expando ] ] && cache[ this[ expando ] ][ event.type ] ) || false;

        // Make sure the list of functions we have is valid
        if ( !handlers || !handlers.length ) {
            return;
        }

        // Iterate over our individual handlers and call them as we go. Make sure we remeber to pass in the event Object
        handlers.forEach( function ( handler ) {
            handler.call( this, event );
        });

    },

    // If we want to add an event to an element, we use this function
    add = function ( element, type, fn ) {

        // We test if an element already has a guid assigned
        if ( !element[ expando ] ) {
            element[ expando ] = guid++;
        }

        // Grab the guid number
        var id = element[ expando ];

        // Make sure the element exists in our global cache
        cache[ id ] = cache[ id ] || {};

        // Grab the Array that we are going to store our handles in
        var handlers = cache[id ][ type ] = cache[ id ][ type ] || [];

       // Make sure the handle that was passed in is actually a function
        if ( typeof fn === 'function' ) {
            handlers.push( fn );
        }

        // Bind our master handler function to the element
        element.addEventListener( type, handler, false );

    };

// Add a click event to the body element
add( document.body, 'click', function ( event ) {
    console.log( 1 );
}); 
```

这只是我之前写的内容的缩减版，但我希望你能得到它的要点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-19T07:32:37.513

也许它不是完美的解决方案，但接近理想，此外我没有看到其他方法

[感谢科斯塔斯·巴里奥蒂斯](https://kostasbariotis.com/removeeventlistener-and-this/)

这里的解决方案关键是：

那么，当我们需要在运行时的某个时刻移除附加的事件处理程序时，我们该怎么办？遇到 handleEvent，这是 JavaScript 在尝试查找已附加到事件的处理程序时查找的默认函数。

在 cas 链接被破坏（我放置第一种方式）

```
let Button = function () {

  this.el = document.createElement('button');
  this.addEvents();
}

Button.prototype.addEvents = function () {
  this.el.addEventListener('click', this);
}

Button.prototype.removeEvents = function () {
  this.el.removeEventListener('click', this);
}

Button.prototype.handleEvent = function (e) {
  switch(e.type) {
    case 'click': {
     this.clickHandler(e);
    }
  }
}

Button.prototype.clickHandler = function () {
  /* do something with this */
}
```

PS：

JS 类实现中的相同技术。

如果您使用 typescript 开发，则必须从 EventListenerObject 接口实现 handleEvent 方法

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-04-21T04:35:42.723

要 ' `addEventListener`' 带有一些参数，可以使用以下代码：

```
{
   myButton.addEventListener("click",myFunction.bind(null,event,myParameter1,myParameter2)); 
} 
```

函数“ `myFunction`”应该是这样的：

```
{
   function myFunction(event, para1, para2){...}
} 
```

# android - Android Listview 项目重复

> ID：15088013
> 
> 赞同：0
> 
> 时间：2013-02-26T11:31:11.347
> 
> 标签：android, listview, repeat

我有一个列表视图，它使用一个特殊的适配器将数据从数据库传递到列表视图。但问题是我只得到一个列表视图项目被重复，而其他细节没有被显示。当我设置断点并调试项目时，所有细节都被传递给哈希图，但列表视图只重复显示一个特定项目。代码如下所示：

```
static class ViewHolder {
    TextView txtmername,txtmerid,txtmeradd,txtmermeasure;
    Button btnselect;
}

    private LayoutInflater mInflater;

           public SpecialAdapter(Context ctx,List<HashMap<String, String>> listData, int resourceId, String[] columnTags, int[] columnIds) {
                super(ctx, listData, resourceId, columnTags, columnIds);
                ctx=MerchantList.this;
                listData=listData;
                resourceId=R.layout.merchant_listview;
                columnTags=columnTags;
                columnIds=columnIds;
            }

           @Override
        public int getCount() {
        return listData.size();
        }

           @Override
        public Object getItem(int position) {
        return super.getItem(position);
        }

    @Override
    public long getItemId(int position) {
    return super.getItemId(position);
    } 

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
            // to findViewById() on each row.   
        ViewHolder holder;
        Context con=getApplicationContext();

        if(convertView==null)
            // convertView = getActivity().getLayoutInflater().inflate(R.layout.stores_listview_layout, pa
             mInflater = (LayoutInflater)con.getSystemService(con.LAYOUT_INFLATER_SERVICE);
            convertView=mInflater.inflate(R.layout.merchantlistview, null);

             holder = new ViewHolder();
                    holder.txtmername = (TextView) convertView.findViewById(R.id.lblMerchantName);
                    holder.txtmeradd=(TextView)convertView.findViewById(R.id.lblAddress);
                    holder.txtmerid=(TextView)convertView.findViewById(R.id.lblMerchantId);
                   holder.txtmermeasure=(TextView)convertView.findViewById(R.id.lblMeasure);
                   holder.btnselect=(Button)convertView.findViewById(R.id.btnSelect);

                   holder.btnselect.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        });

                    convertView.setTag(holder);
         if(convertView !=null)
        {
            holder=(ViewHolder)convertView.getTag();

        // Binding the data efficiently with the holder

        SQLiteDatabase db=openOrCreateDatabase("NEW.db", MODE_PRIVATE, null);
        Cursor OrderCursor = db.rawQuery("SELECT DISTINCT(A.ID), B.NAME, B.ADDRESS, A.MEASURE FROM (SELECT ID, MIN( CAST(STOCK_IN_HAND AS REAL) /REORDER_LEVEL) AS MEASURE FROM INVENTORY GROUP BY ID) A INNER JOIN MASTER B ON A.ID=B.ID ORDER BY A.MEASURE", null);

        listData.clear();

        if(OrderCursor!= null) 
        {

         if(OrderCursor.moveToFirst()){
               for (int i = 0; i < OrderCursor.getCount(); i++){

                // String first,second,third,fourth=null;

                        HashMap<String,String> map = new HashMap<String, String>();

                        map.put(columnTags[0], OrderCursor.getString(OrderCursor.getColumnIndex("NAME")));   
                        map.put(columnTags[1], OrderCursor.getString(OrderCursor.getColumnIndex("ADDRESS")));
                        map.put(columnTags[2], OrderCursor.getString(OrderCursor.getColumnIndex("ID")));
                        map.put(columnTags[3], OrderCursor.getString(OrderCursor.getColumnIndex("MEASURE")));
                        listData.add(map);

                           String measure = map.get("measure").toString();
                           String name=map.get("Name").toString();
                           String address=map.get("Address").toString();
                           String id=map.get("Id").toString();

                        holder.txtmerchantname.setText(name);
                        holder.txtmeradd.setText(address);
                        holder.txtmerid.setText(id);
                        holder.txtmermeasure.setText(measure);
                       double measure1=Double.parseDouble(measure);

                       if(measure1 > 1.5)
                       {
                           convertView.setBackgroundColor(getResources().getColor(R.color.Green));
                       }

                       else if((1.5 >= measure1 ) && (measure1>1.0))
                       {

                          convertView.setBackgroundColor(getResources().getColor(R.color.Yellow));
                       }

                       else if(1.0>=measure1) 
                       {
                           convertView.setBackgroundColor(Color.RED);
                       }

                 OrderCursor.moveToNext();

                 }//end of for
          }
        OrderCursor.close();
         db.close();
    }
        }
        return convertView;
    }
    @Override
    public int getItemViewType(int position) {
    return super.getItemViewType(position);
    }
    @Override
    public int getViewTypeCount() {
    return super.getViewTypeCount();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:08:12.740

尝试使用以下代码，我想这会有所帮助。因此，您正在使用可以使用 arrayAdapter 的 hashmap。

[https://stackoverflow.com/a/15061779/2106338](https://stackoverflow.com/a/15061779/2106338)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-16T12:08:38.533

`getViewTypeCount()`与您的`listView`项目数量不匹配，因此它会添加另一个项目。
在您的情况下，我认为它与`measure`您使用的条件有关。
最后你应该使用`else`而不是`else if`
OR
如果有其他情况，你必须治疗它。

# c# - Blend 不调用 DesignTimeBootstrapper

> ID：15088016
> 
> 赞同：5
> 
> 时间：2013-02-26T11:31:21.347
> 
> 标签：c#, wpf, visual-studio-2010, expression-blend

我需要 Blend 4 调用一些初始化代码，然后它才能合理地显示我的应用程序，我正在使用Josh Smith 的[这种方法](http://joshsmithonwpf.wordpress.com/2010/04/07/assembly-level-initialization-at-design-time/)来完成它。

我正在使用以下项目结构：

```
MainProgram
  -- Properties
     -- AssemblyInfo.cs (including the custom attribute)
  -- App.xaml
  -- HostWindow.xaml    (UserControls are embedded here)
  -- DesignTimeBootstrapperAttribute.cs

ViewsAssembly
  -- Lots of user controls 
```

出于某种原因，每次构建后都不会调用设计时引导程序（导致我的自定义标记扩展在 Blend 中引发异常和大量错误消息）。但是，在最初加载解决方案时会调用它，我不明白 Blend 在这里的行为方式。

我做错了什么，还是有其他方法？

**编辑：** 我注意到进行完整的重建每次都会调用 Bootstrapper。也许这可以作为一种解决方法，但我仍然想理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T18:37:45.523

您能否验证，在不执行启动的重建后，您确实更改了主应用程序的程序集二进制文件？（如果二进制文件没有改变，我希望 Blend 不会评估反射）。我也会尝试解决方案干净而不是重建。

作为一个繁重的解决方法，您可能会考虑在构建后事件中更改解决方案/项目文件（例如，添加一个空格），这将导致 Blend 重新加载解决方案并再次执行您的自定义启动代码。

附带说明一下，我对 VS XAML UI 设计器进程 (xDesProc) 的经验表明，它并不总是能捕捉到我在重新构建后所做的更改，我必须使用任务管理器强制重新加载它，混合可能会发生 sme。

# php - php函数总是返回null

> ID：15088017
> 
> 赞同：0
> 
> 时间：2013-02-26T11:31:22.850
> 
> 标签：php, function, null, return

我有这个 php 函数：

```
function JobPollAsync(&$fp) 
{
if (($fp === false) or ($fp==null)) {
        return false;
    }

if (feof($fp)) {
    fclose($fp);
    $fp = false;
    return false;
}

return fgets($fp, 1000);
} 
```

问题是总是返回`NULL`。一开始，我以为`$fp`变量是`null`，但是当我放一个循环来打印变量上的任何内容时，如下所示：

```
function JobPollAsync(&$fp) 
{
if (($fp === false) or ($fp==null)) {
        return false;
    }

if (feof($fp)) {
    fclose($fp);
    $fp = false;
    return false;
}

    while (!feof($fp)) {
       echo fgets($fp, 128);
    } 
```

}

打印的文本是正确的。所以我不知道是什么原因迫使`null`返回值。

我从另一个 PHP 文件调用这个函数。调用很简单，`JobPollAsync($fp1);`所以这不是问题。

谁能给我一个线索。

# javascript - 根据用户国家重定向网站

> ID：15088020
> 
> 赞同：0
> 
> 时间：2013-02-26T11:31:26.293
> 
> 标签：javascript, cakephp

我想根据用户所在的国家/地区重定向我的网站。例如，如果用户从美国输入 www.domain.com，那么他应该重定向到 en.domain.com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:34:02.397

您可以获得此处描述的位置：

[使用 Javascript 的 IP 到位置](https://stackoverflow.com/questions/4937517/ip-to-location-using-javascript)

然后相应地重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:36:56.793

好吧，让您开始，以下是如何使用 HTML5 Geolocation 检测一个人的国家/地区：

```
var geocoder = new google.maps.Geocoder();
geocoder.geocode({'latLng': <YOURLATLNGRESPONSEFROMGEO>}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            if (results[0]) {
                var loc = getCountry(results);
            }
        }
    });

function getCountry(results)
{
    for (var i = 0; i < results[0].address_components.length; i++)
    {
    var shortname = results[0].address_components[i].short_name;
    var longname = results[0].address_components[i].long_name;
    var type = results[0].address_components[i].types;
    if (type.indexOf("country") != -1)
    {
        if (!isNullOrWhitespace(shortname))
        {
            return shortname;
        }
        else
        {
            return longname;
        }
    }
}

}

function isNullOrWhitespace(text) {
    if (text == null) {
        return true;
    }
    return text.replace(/\s/gi, '').length < 1;
} 
```

这将得到这个人的国家。不幸的是，据我所知，没有办法使用它来重定向一个人。试试这个链接：[http](http://dev.maxmind.com/geoip/geolite) ://dev.maxmind.com/geoip/geolite 。

# c# - 为什么动态转换抛出异常？

> ID：15088021
> 
> 赞同：2
> 
> 时间：2013-02-26T11:31:25.860
> 
> 标签：c#, casting, type-conversion

我有一个枚举：

```
enum MyEnum
{
    First,
    Second
} 
```

我可以将 int 转换为 Enum：

```
var sample1 = (MyEnum)1; 
```

但是我在动态转换上遇到了例外：

```
var sample2 = System.Convert.ChangeType(1, typeof(MyEnum));
//Invalid cast from 'System.Int32' to 'ConsoleApplication1.Program+MyEnum'. 
```

为什么动态转换抛出异常？

我不是在寻找解决方案，只是想知道为什么会抛出异常？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:47:04.417

**简短回答**：Convert.ChangeType 只能将内置类型转换为一组预定义的类。在 Int32 的情况下，这是[IConvertible](http://msdn.microsoft.com/en-us/library/s3k113cd.aspx)允许的同一组显式类。

**长答案**：在引擎盖下， Convert.ChangeType 方法将调用[Int32.IConvertible.ToType](http://msdn.microsoft.com/en-us/library/bb350521.aspx)。

这将依次调用内部方法，该方法`Convert.DefaultToType`将通过预定义的类型列表工作，并从 IConvertible 调用适当的方法（例如，如果您请求 DateTime，它将调用[ToDateTime](http://msdn.microsoft.com/en-us/library/system.iconvertible.todatetime.aspx)）。但是，从您的角度来看，其中有一个有趣的地方：

```
if (targetType == Convert.EnumType)
{
    return (Enum)value;
} 
```

您可能认为这会让您的代码正常工作。但是，它不会 - 您的枚举类型不是[System.Enum](http://msdn.microsoft.com/en-us/library/system.enum.aspx) - 它是它的子类。

# javascript - jQuery函数单引号被忽略

> ID：15088056
> 
> 赞同：0
> 
> 时间：2013-02-26T11:33:07.487
> 
> 标签：javascript, jquery, function, onclick, quotes

我有这个功能

```
 function getTextfieldonly(fieldName, id) {
        var option = jQuery('#'+fieldName+'_textfield').val();
        if (option != "") {
        $('.'+fieldName+'_ul').append('<li class="'+fieldName+'_item">'+option+'<span onclick="removeSelected($(this),'+fieldName+')" class="reLef buttonleistungspktr '+fieldName+'_button2"></span></li>');
        $('#'+fieldName+'_list').prepend('<option selected="selected" value="'+option+'">'+option+'</option>');
        }else {return false}
    }; 
```

在第 4 行中，我在里面添加了一个带有 span 的 li

```
.append('<li class="'+fieldName+'_item">'+option+'<span onclick="removeSelected($(this),'+fieldName+')" class="reLef buttonleistungspktr '+fieldName+'_button2"></span></li>'); 
```

如果 fieldName 参数是例如“foo”

我希望附加范围内的 onclick 看起来像

```
onclick="removeSelected($(this),'foo')" 
```

但它呈现为

```
onclick="removeSelected($(this),foo)" 
```

那么单引号去哪儿了？我需要他们在那里，我不知道怎么做。

有人有想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:34:37.647

改变这个

```
<span onclick="removeSelected($(this),'+fieldName+')" 
```

到

```
<span onclick="removeSelected($(this),\''+fieldName+'\')" 
```

您需要转义单引号

# javascript - 使用jQuery设置选择时，无法使用jQuery的选择值选择值

> ID：15088059
> 
> 赞同：0
> 
> 时间：2013-02-26T11:33:09.170
> 
> 标签：javascript, jquery

我正在尝试创建一些级联下拉菜单，我有这个我构建的函数，它有一半可以工作：

```
 function CascadeDropDowns(parentClass, childClass, action) {

   var DropDownId = $(parentClass + " option:selected").val();

   $.ajax({
     url: "/Terminals_configuration/" + action,
     data: { DropDownId: DropDownId },
     dataType: "json",
     type: "POST",
     error: function () {
       alert("An error occurred.");
     },
     success: function (data) {
       var items = "";
       $.each(data, function (i, item) {
           items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
       });
         $(childClass).html(items);
         $(childClass)[0].selectedIndex = 0;
     }
   });
  }

    $(document).ready(function(){
      $(".DeviceTypeDDL").change(function () {
        CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups");
        CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
      });
      $(".ConfigGroupDDL").change(function () {
        CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
      });
    }); 
```

相关 HTML - 此处不包含指向 jQuery v1.8.2 的链接！

```
<form action="/Terminals_configuration" method="post">    <fieldset>
      <legend>
        <h2>Configuration settings</h2>
      </legend>

      <div class="editor-label">
        <label for="DeviceType">Device type</label>
      </div>
      <div class="editor-field">
        <select class="DeviceTypeDDL" data-val="true" data-val-number="The field DeviceTypeSelectedItem must be a number." id="DeviceTypeSelectedItem" name="DeviceTypeSelectedItem"><option value="8">IT</option>
<option value="9">RS</option>
</select>
        <span class="field-validation-valid" data-valmsg-for="DeviceTypeSelectedItem" data-valmsg-replace="true"></span>
      </div>

       <div class="editor-label">
        <label for="ConfigGroup">ConfigGroup</label>
      </div>
      <div class="editor-field">
        <select class="ConfigGroupDDL" data-val="true" data-val-number="The field ConfigGroupSelectedItem must be a number." id="ConfigGroupSelectedItem" name="ConfigGroupSelectedItem"><option value="-1">No value</option>
</select>
        <span class="field-validation-valid" data-valmsg-for="ConfigGroupSelectedItem" data-valmsg-replace="true"></span>
      </div>

       <div class="editor-label">
        <label for="ConfigName">ConfigName</label>
      </div>
      <div class="editor-field">
        <select class="ConfigNameDDL" data-val="true" data-val-number="The field ConfigNameSelectedItem must be a number." id="ConfigNameSelectedItem" name="ConfigNameSelectedItem"><option value="-1">No value</option>
</select>
        <span class="field-validation-valid" data-valmsg-for="ConfigNameSelectedItem" data-valmsg-replace="true"></span>
      </div>

        <div class="editor-label">
        <label for="ConfigValue">ConfigValue</label>
      </div>
      <div class="editor-field">
        <input class="text-box single-line" data-val="true" data-val-required="Please enter the configuration value" id="ConfigValue" name="ConfigValue" type="text" value="" />
        <span class="field-validation-valid" data-valmsg-for="ConfigValue" data-valmsg-replace="true"></span>
      </div>

        <div class="editor-label">
        <label for="MergeOrDelete">MergeOrDelete</label>
      </div>
      <div class="editor-field">
        <select class="MergeDeleteDDL" data-val="true" data-val-number="The field MergeOrDeleteSelectedItem must be a number." id="MergeOrDeleteSelectedItem" name="MergeOrDeleteSelectedItem"><option value="0">Delete</option>
<option value="1">Merge</option>
</select>
        <span class="field-validation-valid" data-valmsg-for="MergeOrDeleteSelectedItem" data-valmsg-replace="true"></span>
      </div>

      <p>
        <input type="submit" value="Add" />
      </p>
    </fieldset>
</form> 
```

问题是当第一个下拉列表更改时，我需要填充两个孩子。当第二个下拉列表改变时，我只需要填充一个孩子。

我认为通过设置`$(childClass)[0].selectedIndex = 0;`then 这将使这个值被选中，这样当函数第二次使用刚刚填充的子下拉菜单触发时，它将能够获得这个值，但事实并非如此。

我在想也许新的现在在 DOM 中不可用，但我不确定。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:04:26.887

可能是，您的第二个`CascadeDropDowns`函数在第一个函数完成执行之前执行（因为您正在执行 AJAX 调用，这是异步的）。

使第二个函数等待第一个函数的一种方法是利用 jQuery deferreds：

```
function CascadeDropDowns(parentClass, childClass, action) {

   var completeDeferred = $.Deferred();
   var DropDownId = $(parentClass + " option:selected").val();

   $.ajax({
     url: "/Terminals_configuration/" + action,
     data: { DropDownId: DropDownId },
     dataType: "json",
     type: "POST",
     error: function () {
       alert("An error occurred.");
     },
     success: function (data) {
       var items = "";
       $.each(data, function (i, item) {
           items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
       });
         $(childClass).html(items);
         $(childClass)[0].selectedIndex = 0;
         completeDeferred.resolve();
     }
   });

   return completeDeferred;
} 
```

然后使用返回的延迟：

```
$(".DeviceTypeDDL").change(function () {
    var deferred = CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups");
    deferred.then(function() {
        CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
    })
}); 
```

一种更简单的方法可能是修改函数以接受回调：

```
function CascadeDropDowns(parentClass, childClass, action, callback) {
   var DropDownId = $(parentClass + " option:selected").val();

   $.ajax({
     url: "/Terminals_configuration/" + action,
     data: { DropDownId: DropDownId },
     dataType: "json",
     type: "POST",
     error: function () {
       alert("An error occurred.");
     },
     success: function (data) {
       var items = "";
       $.each(data, function (i, item) {
           items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
       });
         $(childClass).html(items);
         $(childClass)[0].selectedIndex = 0;
         if (callback) {
             callback();
         }
     }
   });
} 
```

然后像这样使用它：

```
$(".DeviceTypeDDL").change(function () {
    var callback = function() {
        CascadeDropDowns(".ConfigGroupDDL", ".ConfigNameDDL", "GetParameters");
    };
    CascadeDropDowns(".DeviceTypeDDL", ".ConfigGroupDDL", "GetGroups", callback);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:02:14.947

如果您知道需要选择的选项的值，则可以使用：

```
$(childClass).val(valOfOption); 
```

[这里](https://stackoverflow.com/questions/496052/jquery-setting-the-selected-value-of-a-select-control-via-its-text-description)发布了一些其他选项

# c# - 向 Graphics.Draw 添加透明度

> ID：15088062
> 
> 赞同：3
> 
> 时间：2013-02-26T11:33:13.803
> 
> 标签：c#

是否可以在 C# 中绘制透明度为 50% 的图形？

我的实际代码如下所示：

```
Image myBitmap = new Bitmap((int)sizeX,(int)sizeY);
Graphics myGraphics = Graphics.FromImage(myBitmap);

Pen outerPenColor = new Pen(Color.Black, 1);

myGraphics.DrawRectangle(outerPenColor, 1.0, 2.0, 3.0, 4.0); 
```

这一切都很好，但我想要一个透明的黑色，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:47:31.693

`Graphics`上下文和`Bitmap`对象默认支持透明度。您唯一需要做的就是绘制*不透明*的颜色。静态方法有一个重载，[`Color.FromArgb`](http://msdn.microsoft.com/en-us/library/1hstcth9.aspx)它采用*alpha 值*和颜色并返回`Color`具有您指定的透明度的 a。alpha 值介于 0（完全透明）到 255（完全不透明）之间。例如：

```
// 75% opaque (25% transparent) Red
var semiRed = Color.FromArgb(191, Color.Red);
// 50% opaque (50% transparent) Black
var semiBlack = Color.FromArgb(128, Color.Black); 
```

现在您可以使用该半透明黑色作为您的颜色`Pen`并绘制半透明线：

```
Pen outerPenColor = new Pen(semiBlack, 1);
myGraphics.DrawRectangle(outerPenColor, 1.0, 2.0, 3.0, 4.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:36:53.933

而不是使用 Color.Black，而是使用[Color.FromArgb](http://msdn.microsoft.com/en-us/library/system.drawing.color.fromargb.aspx)，它允许您指定一个 alpha 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:36:57.503

如果我没记错（未经测试），它应该在笔上使用不同的 Alpha，例如：

```
Pen outerPenColor = new Pen(Color.FromArgb(128,0,0,0), 1); 
```

# java - 在 Netty 4.0 中创建一个 ByteBuf

> ID：15088065
> 
> 赞同：26
> 
> 时间：2013-02-26T11:33:20.617
> 
> 标签：java, netty, nio

两个简单的问题，我无法通过阅读文档来解决：

1.  我有一个`byte[]`
    *   我怎样才能把它转换成一个`ByteBuf`？
2.  我有一个蔚来`ByteBuffer`
    *   我怎样才能把它转换成一个`ByteBuf`？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-26T11:41:55.110

[文档](http://netty.io/4.0/api/io/netty/buffer/ByteBuf.html)对我来说似乎很清楚：

> **创建缓冲区**
> 
> [建议使用Unpooled](http://netty.io/4.0/api/io/netty/buffer/Unpooled.html)中的辅助方法创建一个新缓冲区，而不是调用单个实现的构造函数。

然后在 中`Unpooled`，您可以选择包装或复制。例如：

*   [`Unpooled.copiedBuffer(ByteBuffer)`](http://netty.io/4.0/api/io/netty/buffer/Unpooled.html#copiedBuffer%28java.nio.ByteBuffer%29)
*   [`Unpooled.copiedBuffer(byte[])`](http://netty.io/4.0/api/io/netty/buffer/Unpooled.html#copiedBuffer%28byte%5B%5D%29)
*   [`Unpooled.wrappedBuffer(ByteBuffer)`](http://netty.io/4.0/api/io/netty/buffer/Unpooled.html#wrappedBuffer(java.nio.ByteBuffer))
*   [`Unpooled.wrappedBuffer(byte[])`](http://netty.io/4.0/api/io/netty/buffer/Unpooled.html#wrappedBuffer%28byte%5B%5D%29)

`ByteBuf`根据您是否希望将返回的更改传递到原始字节数组/缓冲区，选择合适的方法。

# visual-studio - Visual Studio Entity Framework Viewer 将表格放在几英里之外

> ID：15088067
> 
> 赞同：1
> 
> 时间：2013-02-26T11:33:25.517
> 
> 标签：visual-studio, entity-framework

我刚刚重新加载了我的数据库模型并添加了一些新实体。默认情况下，有什么方法可以要求 Visual Studio 将实体更靠近设计器中的其他实体？

请参阅下图以了解我的意思：

![EF 查看器](../Images/e4e19780b8abfda4df9fdf750914195a.png)

# php - PHP 不显示 DIV / Contactform

> ID：15088072
> 
> 赞同：0
> 
> 时间：2013-02-26T11:33:42.940
> 
> 标签：php, forms, html, echo, contact

这是我的工作代码，没有 Boynux 的最新建议。现在我将尝试将两者结合起来，如果发生错误，可能会得到红色的 div 框。感谢大家的帮助，我认为现在我非常接近我正在考虑的结果。

PHP

```
<section id="main-content">

<div class="text-intro"><h2>KONTAKT</h2></div>

<?php
if(isset($_POST['sendMessage'])) {
$to = "info@test.com";
$email = $_POST['email'];
$message = $_POST['message'];
$from = 'E-mail: '.$email."\n";
$from = 'Message: '.$message;
$body_message = "Question";

echo "<div id=\"submitmessage\">Thank you.</div>"; 
mail($to, $body, $from);
} else {
echo "Please check you data.";
}
?>

<div class="columns features">
<br />
<form action="contact.php" method="post" id="contact-form" class="contact-form">
<textarea id='message' maxlength='10000' name='message' placeholder='Hello...'>   
</textarea>
<div class='crayonico'></div>
<input class='text-input' id='senderEmail' maxlength='50' name='email'   
placeholder='E-Mail' type='email'>
<div class='emailico'></div>
<input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit'  
value='SEND'>
</form>
<br /><br /><br /><br /><br />
</div> 
```

HTML

```
<section id="home-head" class="contact">     
<h1></h1>
</section>

<section id="main-content">

<div class="text-intro"><h2>CONTACT</h2></div>

<div class="columns features">
<br />
<form action="contact.php" method="post" id="contact-form" class="contact-form">
<textarea id='message' maxlength='10000' name='message' placeholder='HEllo...'>   
</textarea>
<div class='crayonico'></div>
<input class='text-input' id='senderEmail' maxlength='50' name='email' 
placeholder='E-Mail' type='email'>
<div class='emailico'></div>
<input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit'  
value='SEND'>
</form>
<br /><br /><br /><br /><br />
</div>

</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:41:17.357

```
<section id="main-content">
<div class="text-intro"><h2>CONTACT</h2></div>
<div id="thanks"></div>
<div class="columns features">
<br />
<form action="contact.php" method="post" id="contact-form" class="contact-form">
<textarea id='message' maxlength='10000' name='message' placeholder='Hello...'>       </textarea>
<div class='crayonico'></div>
<input class='text-input' id='senderEmail' maxlength='50' name='email' placeholder='E- Mail' type='email'>
<div class='emailico'></div>
<input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit' value='SEND'>
</form>
<br /><br /><br /><br /><br />
</div>

<script>

 if($("#senderEmail").val()==''){
  // alert the message
  return false;
 }

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:49:40.277

对于验证，您可以使用 jQuery 之类的

```
 $("#sendMessage").click(function(e){
    e.preventDefault();
    if($("#senderEmail").val()=="") {
     alert('Email Blank');
     return false;
    } else {
     return true;
    }
  }); 
```

使用 PHP 在 div 中显示消息

```
if ($mail_status){
$message = "Thanks for your mail...";
}else{
$message = "Please correct your data.";
} 
```

现在你可以在任何你想要的 div中`echo`取出`$message`

```
<div class="message_area"><?php echo $message;?></div> 
```

**更新**

```
<section id="main-content">

<div class="text-intro"><h2>KONTAKT</h2></div>

<?php
if(isset($_POST['sendMessage'])) {
$to = "info@test.com";
$email = $_POST['email'];
$message = $_POST['message'];
$from = 'E-mail: '.$email."\n";
$from = 'Message: '.$message;
$body_message = "Question";

echo "<div id=\"submitmessage\">Thank you.</div>"; 
mail($to, $body, $from);
} else {
$message = "Please check you data.";
}
?>

<div class="columns features">
<br />
<form action="contact.php" method="post" id="contact-form" class="contact-form">
<textarea id='message' maxlength='10000' name='message' placeholder='Hello...'>   
</textarea>
<div class='crayonico'></div>
<input class='text-input' id='senderEmail' maxlength='50' name='email'   
placeholder='E-Mail' type='email'>
<div class='emailico'></div>
<input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit'  
value='SEND'>
</form>
<div class="message_div">
    <?php
        if(isset($_POST['sendMessage'])) {
            if(isset($message)) {
                echo $message;
            }   
        }
    ?>
</div>
<br /><br /><br /><br /><br />
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:54:12.403

PHP 不像 ASP.NET 或模板和代码分离的类似框架。如果您不考虑其他框架，例如 Symfony 或 CakePHP，您需要将完整的 HTML 输出打印到浏览器：

```
<?php
$field_email = $_POST['email'];
$field_message = $_POST['message'];
$mail_to = 'email@email.de ';
$subject = 'Message from a site visitor '.$field_name;
$body_message .= 'E-mail: '.$field_email."\n";
$body_message .= 'Message: '.$field_message;
$headers = 'From: '.$field_email."\r\n";
$headers .= 'Reply-To: '.$field_email."\r\n";
$mail_status = mail($mail_to, $subject, $body_message, $headers);
?>
<html>
    <head>
        <title>Email result</title>
    </head>
    <body>
         <div>
<?php
    if ($mail_status){
        echo "Thanks for your mail...";
    }else{
        echo "Please correct your data.";
    }
?>
         </div>
    </body> 
```

对于表单验证，您可以使用 javasctipt：

```
<div id="main-content">
    <div class="text-intro"><h2>CONTACT</h2></div>
    <div id="thanks"></div>
    <div class="columns features">
    <br />
    <form action="contact.php" method="post" id="contact-form" class="contact-form"  onsubmit="return validate ()>
        <textarea id='message' maxlength='10000' name='message' placeholder='Hello...'> </textarea>
        <div class='crayonico'></div>
        <input class='text-input' id='senderEmail' maxlength='50' name='email' placeholder='E-Mail' type='email'>
        <div class='emailico'></div>
        <input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit' value='SEND'">
    </form>
    <br /><br /><br /><br /><br />
</div>
<script language="javascript">
function validate()
{
    // for example I check sender email
    if ( document.getElementById ( 'senderEmail' ).value.length > 0 )
        return true;
    else
        alert ( "Sender address required" );
        return false;
}
</script> 
```

但请记住，使用 javascript 进行验证是不够的，因为用户可以简单地绕过此检查，操作系统考虑再次检查 PHP 代码中的所有内容。

好的，这是一个完整的示例，但请注意，这不是很好的编写和完整的代码，这只是一个示例：

```
<html>
    <head>
        <title>Email result</title>
    </head>
    <body>
<?php

// function to compose email
function sendMail ( $sender, $message ) {
    $mail_to = 'email@email.de ';
    $subject = 'Message from a site visitor '.$field_name;
    $body_message .= 'E-mail: '.$field_email."\n";
    $body_message .= 'Message: '.$field_message;
    $headers = 'From: '.$field_email."\r\n";
    $headers .= 'Reply-To: '.$field_email."\r\n";
    return  mail($mail_to, $subject, $body_message, $headers);
}

// check if form submited?
if ( isset ($_POST['sendMessage']) ) {
    $email = trim ($_POST['email']);
    $message = trim ($_POST['message']);

    if ($email == null || strlen ($email) == 0 ) {
        $alert = "Sender address required.";
    } else if ( $message == null || strlen ($message) == 0 ) {
        $alert = "Empty messages is not allowed.";
    } else if ( sendMail ( $email, $message ) ) {
        $alert = "Thanks for your mail...";
    } else {
            $alert = "Please correct your data.";
    }
}
?>
<?php if ( isset ($alert) ): ?>
         <div style='color: red; font-weight: bold;'><?php echo $alert ?></div>
<?php endif; ?>
        <div id="main-content">
            <div class="text-intro"><h2>CONTACT</h2></div>
            <div id="thanks"></div>
            <div class="columns features">
            <br />
            <form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post" id="contact-form" class="contact-form"  onsubmit="return validate ()">
                <textarea id='message' maxlength='10000' name='message' placeholder='Hello...'></textarea>
                <div class='crayonico'></div>
                <input class='text-input' id='senderEmail' maxlength='50' name='email' placeholder='E-Mail' type='email'>
                <div class='emailico'></div>
                <input class='btn btn-input' id='sendMessage' name='sendMessage' type='submit' value='SEND'>
            </form>
            <br /><br /><br /><br /><br />
        </div>
        <script language="javascript">
        function validate()
        {
            // for example I check sender email
            if ( document.getElementById ( 'senderEmail' ).value.length > 0 )
                return true;
            else
                alert ( "Sender address required" );
                return false;
        }
        </script>
    </body>
</html> 
```

# vb.net - 插入语句中的语法错误

> ID：15088076
> 
> 赞同：0
> 
> 时间：2013-02-26T11:33:54.917
> 
> 标签：vb.net, oledb

我是数据库连接的新手，当我遇到问题时，`cmdInsert.ExecuteNonQuery()`它说 INSERT INTO 语句存在语法错误，我无法弄清楚问题是什么：

```
Imports System.Data
Imports System.Data.OleDb
Public Class txtNotes
    Dim cnnOLEDB As New OleDbConnection
    Dim cmdInsert As New OleDbCommand

    Dim strConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & System.Environment.CurrentDirectory & "\CourseworkDB"
    'the name of the database goes in here'

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        cnnOLEDB.ConnectionString = strConnectionString
        cnnOLEDB.Open()

    End Sub

    Private Sub AddFirstName_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AddFirstName.Click
        If txtFirstName.Text <> "" Then

            MsgBox(cmdInsert.CommandText)
            cmdInsert.CommandText = "INSERT INTO Customer (First Name) VALUES (" & txtFirstName.Text & ", '"
            cmdInsert.CommandType = CommandType.Text
            cmdInsert.Connection = cnnOLEDB
            cmdInsert.ExecuteNonQuery()
        Else
            MsgBox("Enter the required values:" & vbNewLine & "1\. First Name")
        End If
        cmdInsert.Dispose()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:11:28.390

我强烈建议不要通过将字符串连接在一起来构建 SQL 字符串的例程。您对 SQL 注入敞开大门，特别是如果这是基于 Web 的。您应该在字符串中使用占位符参数构建命令，然后将参数添加到命令对象。以与它们在命令中出现的顺序相同的顺序添加参数......例如

```
cmdInsert.CommandText = "INSERT INTO Customer (FirstName, LastName) VALUES ( @parmFirstName, @parmLastName )"
cmdInsert.Parameters.AddWithValue( "@parmFirstName", txtFirstName.Text );
cmdInsert.Parameters.AddWithValue( "@parmLastName", txtLastName.Text ); 
```

> 如果您的字段名称嵌入空格，则不同的数据库工作方式不同，有些需要在字段周围使用一个反引号（数字 1 的左侧键）。比如“名字”。有些使用方括号，例如 [first name]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:45:24.297

尝试这个

`"INSERT INTO Customer (First Name) VALUES ('" & txtFirstName.Text & "')"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:45:58.633

警告：[鲍比](http://bobby-tables.com/)在看着你。

```
cmdInsert.CommandText = _
"INSERT INTO Customer (First Name) VALUES ('" & txtFirstName.Text & "')" 
```

# php - 产生越来越多的数字

> ID：15088077
> 
> 赞同：-2
> 
> 时间：2013-02-26T11:34:01.787
> 
> 标签：php, list, html-lists

我有一个有序列表，我想为**数据幻灯片**生成一个从 0 开始的初始数字

也就是 php 代码 get("display_indicators", 1)): ?> $item){ $activeclass = ""; if($key == 0){ $activeclass = "active"; } ?>

id;?>" data-slide-to="" class="">"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:35:42.583

您可以使用变量来包含计数器...

```
<?php $counter = 0; ?>

<li data-target="#carousel<?php echo $module->id;?>" data-slide-to="<?php
echo $counter;
$counter++;
?>" class="<?php echo $activeclass; ?>"></li> 
```

您甚至可以使用以下内容而不是在两行上回显和递增...

```
echo $counter++; 
```

这与当前计数和之后的增量相呼应，但有些人更愿意避免这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:41:45.610

试试这个，希望对你有帮助

```
<?php $uniqueNo=0; ?>    
<li data-target="#carousel<?php echo $module->id;?>" data-slide-to="
<?php echo $uniqueNo+=1; ?>" class="<?php echo $activeclass; ?>"></li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:38:40.283

使用增量计数器

```
<?php $counter = 0; ?>

<ul>
enter code here
<li data-target="#carousel<?php echo $module->id;?>" data-slide-to="<?=$counter++?>"
class="<?php echo $activeclass; ?>"></li> 
```

然而，这不能是“独特的”应用范围

# mysql - 为什么更新相同数据时“更新 CURRENT_TIMESTAMP”不更新？

> ID：15088080
> 
> 赞同：4
> 
> 时间：2013-02-26T11:34:04.473
> 
> 标签：mysql, database, timestamp, sql-update

当我有一个包含以下数据的表时：

```
StatementID(int AI) | created_by(int) | changed_when(onUpdate CURRENT_TIMESTAMP)
--------------------------------------------------------------------------------
7                   | 4               | 2013-02-26 12:05:57  
8                   | 4               | 2013-02-26 12:20:12 
```

我有以下查询：

```
mysql_query('
  UPDATE table 
  SET created_by = 4 
  WHERE statementID=8'); 
```

当我编辑语句 info(other tbl) 并且它由与上次相同的用户编辑时，changed_when 不会更新。

当我使用相同的数据更新时，为什么该字段`changed_when`不会改变`created_by`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T11:40:05.617

此行为是设计使然。onUpdate CURRENT_TIMESTAMP 字段在字段值更改时更新，而不是在它们保持不变时更新。

为了实现你想要的，你可以做

```
UPDATE table 
SET created_by = 4,
changed_when = null,
WHERE statementID = 8 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T11:40:59.033

如果在任何更新语句中，如果值保持不变，则时间戳值将不会被更新。

来自 Mysql 站点

如果该列是自动更新的，则当该行中任何其他列的值从其当前值更改时，它会自动更新为当前时间戳。`The column remains unchanged if all other columns are set to their current values`. 为了防止该列在其他列更改时更新，请将其显式设置为其当前值。

解决方案

`To update the column even when other columns do not change, explicitly set it to the value it should have (for example, set it to CURRENT_TIMESTAMP).`

[参考](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

# datatables - 日期排序在 datatables.net 上不起作用

> ID：15088083
> 
> 赞同：0
> 
> 时间：2013-02-26T11:34:14.830
> 
> 标签：datatables

我正在尝试对[datatables.net](http://datatables.net)表进行排序，`date`但排序不正确。

如何按日期排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:36:53.830

只需使用 aoColumns 选项

例如

```
"aoColumns": [{ "sType": "date" }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:07:35.457

我曾经这样使用过：- 将 bSorting 分配为 true 用于将数据表设为可排序。

```
myGrid.dataTable({  'bSorting': true  }); 
```

然后对于每一列，我将 bSortable 分配为 true

```
'aoColumns': [
                 { 'bSortable': true, 'bSearchable': true},
                   { 'bSortable': true, 'bSearchable': false}  ] 
```

示例代码：

```
myGrid.dataTable({'bSorting': true,'aoColumns':['sTitle': 'Person Name', 'bSortable':true]}); 
```

# streaming - icecast 在线广播，如何通过麦克风输入实现播放列表和广播

> ID：15088085
> 
> 赞同：0
> 
> 时间：2013-02-26T11:34:18.713
> 
> 标签：streaming, live-streaming, icecast

我想实现一个在线广播，它将存在于我自己的服务器中，并且管理员可以像在媒体播放器播放列表中一样选择 mp3 文件。管理员还可以暂停播放 mp3 文件并从麦克风输入开始广播。

为了在在线 Linux 服务器中实现这一点 -

1）我应该使用哪个源客户端可以轻松满足我的要求？

2) mp3 文件是否应该首先上传到服务器以使管理员能够从那里选择它，还是应该能够通过浏览硬盘驱动器来选择 mp3 文件？哪一个对性能更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:16:34.910

只需使用 Sam Broadcaster……它是一款专门设计用于使用麦克风和播放 mp3 的软件，然后将它们发送到 icecast 服务器，网络上有一些指南，但总的来说它是一个简单的程序，它至少是我使用的，你也不需要上传任何东西

# c# - 如何从视图模型访问 CommandParameter 值

> ID：15088086
> 
> 赞同：0
> 
> 时间：2013-02-26T11:34:23.240
> 
> 标签：c#, wpf, xaml, mvvm, telerik

我在视图中有一个按钮：

```
<Button Grid.Row="0" Grid.Column="1" Content="Export to CSV "  
        HorizontalAlignment="Right" VerticalAlignment="Center"
        Margin="2,2,20,2" Style="{StaticResource ExportButton}"
        Command="{Binding ExportToExcelCommand}"
        CommandParameter="{TelerikGrid}"
/> 
```

现在我有`ExportCommand`我的`ViewModel`as ：

```
private RelayCommand _exportToExcelCommand;
public ICommand ExportToExcelCommand
{
    get
    {
        if (_exportToExcelCommand == default(RelayCommand))
        {
            _exportToExcelCommand = new RelayCommand(ExportToExcel, CanExport);
        }
        return _exportToExcelCommand;
    }
}

private void ExportToExcel(Object param)
{
    try
    {
        //ToDo: Update With Command Parameters
        RadGridView gdv = new RadGridView();

        using (Stream stream = dialog.OpenFile())
        {
            gdv.Export(Columns);
        }
    }
    catch (FaultException ex)
    {
        var faultMessage = ex.Reason.GetMatchingTranslation().Text + "/n" + ex.StackTrace;
    }
} 
```

现在我正在创建一个新的 RadGridView 实例：

```
RadGridView gdv = new RadGridView(); 
```

但相反，我想从从 XAML`gdv`传递的值分配`CommandParameter`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:40:24.327

```
RadGridView gdv = (RadGridView)param; 
```

`param`是您发送的对象，因此只需将其投射到其原点即可。

# codeigniter - 在 codeigniter activerecord 中查找日期范围之间的记录返回空

> ID：15088088
> 
> 赞同：0
> 
> 时间：2013-02-26T11:34:26.610
> 
> 标签：codeigniter, date, activerecord

我有一个带有日期列 invoiceDate 的表格。因为有一条 invoiceDate 值为 28-02-13 的记录

现在我使用以下来获取日期范围之间的记录：

```
 $this->db->select('*');
    $this->db->from('salesinvoices');
    $dateone=date('Y-m-d',strtotime('26-02-13'));
    $datetwo=date('Y-m-d',strtotime('12-03-13'));
    $this->db->where('invoiceDate >=', $dateone);
    $this->db->where('invoiceDate <=', $datetwo);
    $query = $this->db->get();
    $results = $query->result();
    print_r($results); 
```

我总是得到一个空记录:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:38:13.453

我找到了问题的根源。Strtotime 将破折号视为减号并执行操作。我使用它使它工作：

```
date('Y-m-d',strtotime(str_replace('-', '/', '2026-02-13'))); 
```

所以我用 / 替换了所有破折号，它起作用了。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:18:31.763

我试过你的代码，生成的查询是

```
SELECT * FROM "salesinvoices" 
WHERE "invoiceDate" >= '2026-02-13' 
AND "invoiceDate" <= '2012-03-13' 
```

所以看起来问题出在**strtotime**中，它误解了日期。

# c# - 为什么 AllowPaging = true; 根本不显示页码

> ID：15088089
> 
> 赞同：1
> 
> 时间：2013-02-26T11:34:27.340
> 
> 标签：c#, asp.net, .net, gridview, spgridview

当我尝试时，

```
GridView.PageSize = 5;
GridView.AllowPaging = true;
GridView.PageIndexChanging += new GridViewPageEventHandler(GridView_PageIndexChanging); 
```

我得到了这个，

```
void GridView_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    if (GridView != null)
    {

        GridView.PageIndex = e.NewPageIndex;
        GridView.DataBind();
    }
} 
```

为什么我根本看不到页码，我 100% 确定有超过 5 行，因为当我增加 pageSize 属性时，我可以看到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T07:13:19.567

add in code:

```
GridView.PagerSettings.Mode = PagerButtons.Numeric; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-01T09:22:16.163

如果要动态添加控件，则必须在调用 DataBind() 方法之前将控件添加到页面，否则将不会显示页面数。

# sql-server - 从 Visual Studio 的表格中读取最后一行的唯一一列详细信息

> ID：15088097
> 
> 赞同：1
> 
> 时间：2013-02-26T11:34:46.947
> 
> 标签：sql-server, visual-studio-2010, visual-studio, sql-server-2008

我想从 Visual Studio 的客户表中读取最后输入的客户 ID！如何读取该值？（Visual Studio 中的内置 SQL SERVER）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:47:29.957

尝试这个，

```
SELECT TOP 1  id FROM CUSTOMER ORDER BY uniquecolumn DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:16:14.993

如果你有一个标识列，你可以使用[IDENT_CURRENT](http://msdn.microsoft.com/en-gb/library/ms175098.aspx)：

> **IDENT_CURRENT**：“返回为指定表或视图生成的最后一个标识值。生成的最后一个标识值可以用于任何会话和任何范围。”

```
SELECT * FROM CUSTOMER_TABLE
WHERE ID = IDENT_CURRENT('CUSTOMER_TABLE') 
```

或者如果您没有身份列：

```
SELECT * FROM CUSTOMER_TABLE
WHERE ID = (SELECT MAX(ID) FROM CUSTOMER_TABLE) 
```

# xaml - 如果我想将 2.01:30:00 显示为 49:30 Silverlight 5 中合适的字符串格式是什么？

> ID：15088098
> 
> 赞同：1
> 
> 时间：2013-02-26T11:34:55.720
> 
> 标签：xaml, silverlight-5.0

如果我想将 2.01:30:00 显示为 49:30 什么是合适的字符串格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:47:57.713

不是很优雅，但这个 C# 有效：

```
((int)time.TotalHours).ToString() + ":" +
((int)(time.TotalMinutes - (int)time.TotalHours * 60)).ToString() 
```

所以你必须编写一个转换器来接收你的 TimeSpan 并输出这个字符串：

```
 public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value == null) return null;
        var time = (TimeSpan)value;
        return ((int)time.TotalHours).ToString() + ":" +
               ((int)(time.TotalMinutes - (int)time.TotalHours * 60)).ToString();
    } 
```

然后在您的 XAML 中：

```
<TextBlock Text={Binding theTimeSpan, Converter={StaticResource TimeSpanConverter}} /> 
```

# android - android中的套接字连接

> ID：15088101
> 
> 赞同：1
> 
> 时间：2013-02-26T11:35:04.097
> 
> 标签：android, sockets

在我的应用程序中，使用下面的代码向服务器发送值。

```
public String sendHttpRequest(String params) {
    // TODO Auto-generated method stub
    URL url;
    String result = new String();
    try {
        url = new URL(AUTHENTICATION_SERVER_ADDRESS+params);
        System.out.println("url :"+url.toString());
        HttpURLConnection connection;
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
                    /*PrintWriter out = new PrintWriter(connection.getOutputStream());

        out.println(params);
        out.close();*/
        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            System.out.println("inputLine :"+inputLine);
            result = result.concat(inputLine);
        }
        in.close();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (result.length() == 0) {
        result = HTTP_REQUEST_FAILED;
    }
    System.out.println("Result :"+result);
    return result;
} 
```

**参数=？用户名=*****&email=a@a.com&action=signUpUser&number=******* ***** &password= **&port=21241*****

 ***在这种方法中，所有值都被添加到服务器。

但是如果我按照以下方式做同样的事情，所有的价值都不会被更新。

```
public String sendHttpRequest(String params) {
    // TODO Auto-generated method stub
    URL url;
    String result = new String();
    try {
        url = new URL(AUTHENTICATION_SERVER_ADDRESS);
        System.out.println("url :"+url.toString());
        HttpURLConnection connection;
        connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);

        PrintWriter out = new PrintWriter(connection.getOutputStream());

        out.println(params);
        out.close();

        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));
        String inputLine;
        while ((inputLine = in.readLine()) != null) {
            System.out.println("inputLine :"+inputLine);
            result = result.concat(inputLine);
        }
        in.close();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (result.length() == 0) {
        result = HTTP_REQUEST_FAILED;
    }
    System.out.println("Result :"+result);
    return result;
} 
```

为什么会这样？我做错什么了吗？***

# html - html标签在perl中不起作用

> ID：15088102
> 
> 赞同：0
> 
> 时间：2013-02-26T11:35:06.043
> 
> 标签：html, linux, perl

我是 perl 脚本的新手，我正在尝试执行以下代码

```
#!/usr/bin/perl
$html = "Content-Type: text/html

<HTML>
<HEAD>
<TITLE>Hello World</TITLE>
</HEAD>
<BODY>
<H4>Hello World</H4>
<P>
Your IP Address is $ENV{REMOTE_ADDR}
<P>
<H5>Have a nice day</H5>
</BODY>
</HTML>";

print $html; 
```

当我执行文件时，它只是在引号内打印整个 $html 内容而不执行 html 标签。谁能告诉我我做错了什么。我在根目录中有我的 test.pl 文件，并尝试了“chmod 775 test.pl”命令。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:59:43.450

我认为您正在从命令行运行程序。在这些情况下，HTTP 数据类型将不起作用，整个字符串将被打印到控制台。

要将字符串用作 HTTP 消息，您需要将程序放在 HTTP 服务器上，该服务器可以是远程系统，也可以是您自己的安装和配置了服务器软件的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:29:47.550

也许shebang线不正确，它缺少第一个/。

你总是可以用这种方式执行 perl 代码：

```
path_to_your_perl your_program 
```

喜欢：

```
/usr/bin/perl test.pl 
```

# java - 将 android 应用程序连接到 Google Cloud Endpoints 时出错：找不到类

> ID：15088110
> 
> 赞同：2
> 
> 时间：2013-02-26T11:35:23.967
> 
> 标签：java, android, google-app-engine, google-cloud-endpoints

我已经使用 Google Cloud Endpoints 构建了一个 API，并且正在尝试连接到它并编写一个 Android 应用程序。我按照以下教程进行操作：

[https://developers.google.com/appengine/docs/java/endpoints/consume_android](https://developers.google.com/appengine/docs/java/endpoints/consume_android)

因此，我在“src”文件夹中添加了 jar 的内容，将列出的库复制到 lib 并添加了代码。当我尝试启动应用程序时，它崩溃并出现以下错误：

```
 02-26 12:19:52.874: E/dalvikvm(17558): Could not find class 
    'com.google.api.services.utenteendpoint.Utenteendpoint$Builder', referenced from method 
    com.example.androidgcetest.MainActivity.onCreate

 02-26 12:19:53.004: E/AndroidRuntime(17558): FATAL EXCEPTION: main
02-26 12:19:53.004: E/AndroidRuntime(17558): java.lang.NoClassDefFoundError: com.google.api.services.utenteendpoint.Utenteendpoint$Builder
02-26 12:19:53.004: E/AndroidRuntime(17558):    at com.example.androidgcetest.MainActivity.onCreate(MainActivity.java:22)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.Activity.performCreate(Activity.java:4465)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.os.Looper.loop(Looper.java:137)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at android.app.ActivityThread.main(ActivityThread.java:4448)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
02-26 12:19:53.004: E/AndroidRuntime(17558):    at dalvik.system.NativeStart.main(Native Method) 
```

你知道这个错误的可能原因吗？

编辑：我在上面报告的日志之前也发现了这个

```
02-26 16:51:57.780: W/dalvikvm(1230): Unable to resolve superclass of Lcom/google/api/services/utenteendpoint/Utenteendpoint$Builder; (20)
02-26 16:51:57.780: W/dalvikvm(1230): Link of class 'Lcom/google/api/services/utenteendpoint/Utenteendpoint$Builder;' failed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:42:25.707

将sources.jar 文件也添加到您的android 项目的libs 文件夹中，就像其他jar 文件一样。

感谢 Raffo 在我之前的帖子中发现拼写错误

# c - 处理 awk 命令时将“system”转换为“fork+execv”

> ID：15088113
> 
> 赞同：0
> 
> 时间：2013-02-26T11:35:26.183
> 
> 标签：c, awk

1）解决问题后： [处理awk命令时如何将'system（）'调用转换为'fork（）+ execl（）'？](https://stackoverflow.com/questions/15083358/how-to-translate-system-call-to-fork-execl-when-dealing-with-awk-com)

2）我根据melpomene的方法遇到另一个问题：

```
#define LOG_FILE_PATH "/tmp/logfile"
system("awk -v FS=\"[][]\" -v BEGINTIME=\"$BEGINTIME\" -v ENDTIME=\"$ENDTIME\" '$2>=BEGINTIME && $2<=ENDTIME' "LOG_FILE_PATH); 
```

它工作正常，我得到了我想要的。

3)翻译成fork+execl版本：

```
sprintf(tmp1, "BEGINTIME=%s", getenv("BEGINTIME"));
sprintf(tmp2, "ENDTIME=%s", getenv("ENDTIME"));
sprintf(tmp3, "$2>=%s && $2<=%s", getenv("BEGINTIME"), getenv("ENDTIME"));
execl("/usr/bin/awk", "awk", "-v", "FS=\"[][]\"", "-v", tmp1, "-v", tmp2, tmp3, LOG_FILE_PATH, (char *)0); 
```

它什么也没输出，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:43:10.723

因为`tmp`3 应该包括文字文本`BEGINTIME`和`ENDTIME`. 尝试：

```
sprintf( tmp3, "$2>=%s && $2<=%s", "BEGINTIME", "ENDTIME" ); 
```

此外，您可能希望将双引号保留在`tmp1`and中`tmp2`：

```
sprintf(tmp1, "BEGINTIME=\"%s\"", getenv("BEGINTIME")); 
```

而且您确实需要检查环境变量是否已实际设置。

此外，您设置的 FS 不正确。在`system`版本中，`awk`获取参数`FS=[][]`（shell在调用之前去掉双引号`awk`。）所以传递给的参数`execl`应该是`"FS=[][]"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:59:07.527

如果您使用的是 Solaris，那么 /usr/bin/awk 是旧的、损坏的 awk，其中许多其他问题不支持`-v`变量分配。

此外，awk 程序由引号字符分隔，所以我认为你应该这样做：

```
sprintf(tmp3, "\'$2>=%s && $2<=%s\'", ...); 
```

而不是这个：

```
sprintf(tmp3, "$2>=%s && $2<=%s", ...); 
```

# objective-c - 用户触摸时画圈

> ID：15088116
> 
> 赞同：0
> 
> 时间：2013-02-26T11:35:35.513
> 
> 标签：objective-c, quartz-graphics

当用户单击屏幕时，应在用户触摸的位置绘制一个圆圈。我的代码有什么问题？

```
{
    BOOL _touchHasBegun;
    CGPoint whereUserClicked;
    float pointWhereUserClickedX;
    float pointWhereUserClickedY;
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    _touchHasBegun = YES;
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, 0, 0, 225, 1);
    CGContextSetRGBFillColor(context, 0, 0, 255, 1);
    CGRect rectangle = CGRectMake(pointWhereUserClickedX, pointWhereUserClickedY, 10, 10);
    CGContextStrokeEllipseInRect(context, rectangle);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:57:16.537

首先，您需要调用`setNeedsDisplay`强制`drawRect:`被调用。这可以通过您的触摸事件处理程序来完成。

*其次，您不是在触摸点周围*画圆，而是将触摸点用作圆的角。

这应该更正：

```
const CGFloat width = 10.0;
const CGFloat height = 10.0;
CGRect rectangle = CGRectMake(pointWhereUserClickedX - (width / 2.0),
                              pointWhereUserClickedY + (height / 2.0),
                              width,
                              height); 
```

# cakephp - cakephp2 查询的正确模型关系、主键和外键

> ID：15088120
> 
> 赞同：0
> 
> 时间：2013-02-26T11:35:44.957
> 
> 标签：cakephp, cakephp-2.0

我有租用设备的特许经营商 我有出租特许经营商的客户 特许经营商和客户都是用户

我有一个 User 表、一个 Franchisee 表、一个 Customer 表和一个 Booking 表。

表格如下所示：

```
CREATE TABLE IF NOT EXISTS `franchisees` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  `firstname` varchar(20) DEFAULT NULL,
  `lastname` varchar(20) DEFAULT NULL,
  `address1` varchar(150) DEFAULT NULL,
  `address2` varchar(150) DEFAULT NULL,
  `city` varchar(20) DEFAULT NULL,
  `postcode` varchar(10) DEFAULT NULL,
  `phone` varchar(15) DEFAULT NULL,
  `alt_phone` varchar(15) DEFAULT NULL,
  `lat` float DEFAULT NULL,
  `lng` float DEFAULT NULL,
  `created` timestamp NULL DEFAULT NULL,
  `modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ;

CREATE TABLE IF NOT EXISTS `customers` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `group_id` int(11) DEFAULT NULL,
  `firstname` varchar(20) DEFAULT NULL,
  `lastname` varchar(20) DEFAULT NULL,
  `address1` varchar(150) DEFAULT NULL,
  `address2` varchar(150) DEFAULT NULL,
  `city` varchar(20) DEFAULT NULL,
  `postcode` varchar(10) DEFAULT NULL,
  `phone` varchar(15) DEFAULT NULL,
  `alt_phone` varchar(15) DEFAULT NULL,
  `lat` float DEFAULT NULL,
  `lng` float DEFAULT NULL,
  `created` timestamp NULL DEFAULT NULL,
  `modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ;

CREATE TABLE IF NOT EXISTS `bookings` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `customer_id` int(11) DEFAULT NULL,
  `franchisee_id` int(11) DEFAULT NULL,
  `booking_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `start_date` datetime DEFAULT NULL,
  `end_date` datetime NOT NULL,
  `event_location` text,
  `price` float DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ; 
```

我的模型关系定义如下：

加盟商

```
public $name = 'Franchisee';
public $hasMany = array(
    'FranchiseeBooking' => array(
        'className'    => 'Booking',
        'foreignKey'   => 'franchisee_id'
    )
); 
```

顾客

```
public $name = 'Customer';
public $hasMany = array(
    'CustomerBooking' => array(
        'className'  => 'Booking',
        'foreignKey' => 'customer_id'
    )
); 
```

预订

```
public $name = 'Booking';
public $belongsTo = array(
    'Customers' => array(
        'className'    => 'Customer',
        'foreignKey'   => 'customer_id'
    ),
    'Franchisees' => array(
        'className'    => 'Franchisee',
        'foreignKey'   => 'franchisee_id'
    )
); 
```

因此，我正在尝试查询 Booking 表（其中，franchiee_id 是登录用户）并获取加盟商的所有预订，以及相关的客户数据。

```
$options = array('conditions' =>  array('Booking.franchisee_id' => $this->_authUser));
$bookings = $this->Booking->find('all'); 
```

结果如下查询：

```
SELECT `Booking`.`id`, `Booking`.`customer_id`, `Booking`.`franchisee_id`, `Booking`.`booking_date`, `Booking`.`start_date`, `Booking`.`end_date`, `Booking`.`event_location`, `Booking`.`price`, `BookingCustomers`.`id`, `BookingCustomers`.`user_id`, `BookingCustomers`.`group_id`, `BookingCustomers`.`firstname`, `BookingCustomers`.`lastname`, `BookingCustomers`.`address1`, `BookingCustomers`.`address2`, `BookingCustomers`.`city`, `BookingCustomers`.`postcode`, `BookingCustomers`.`phone`, `BookingCustomers`.`alt_phone`, `BookingCustomers`.`lat`, `BookingCustomers`.`lng`, `BookingCustomers`.`created`, `BookingCustomers`.`modified`, `BookingFranchisees`.`id`, `BookingFranchisees`.`user_id`, `BookingFranchisees`.`group_id`, `BookingFranchisees`.`firstname`, `BookingFranchisees`.`lastname`, `BookingFranchisees`.`address1`, `BookingFranchisees`.`address2`, `BookingFranchisees`.`city`, `BookingFranchisees`.`postcode`, `BookingFranchisees`.`phone`, `BookingFranchisees`.`alt_phone`, `BookingFranchisees`.`lat`, `BookingFranchisees`.`lng`, `BookingFranchisees`.`created`, `BookingFranchisees`.`modified` FROM `trailblazer`.`bookings` AS `Booking` LEFT JOIN `trailblazer`.`customers` AS `BookingCustomers` ON (`Booking`.`customer_id` = `BookingCustomers`.`id`) LEFT JOIN `trailblazer`.`franchisees` AS `BookingFranchisees` ON (`Booking`.`franchisee_id` = `BookingFranchisees`.`id`) WHERE 1 = 1 
```

打印出数组时看起来像这样：

```
Array
(
    [0] => Array
        (
            [Booking] => Array
                (
                    [id] => 1
                    [customer_id] => 8
                    [franchisee_id] => 7
                    [booking_date] => 2013-02-25 11:44:29
                    [start_date] => 2013-03-06 11:45:00
                    [end_date] => 2013-03-08 11:45:00
                    [event_location] => Belfast
                    [price] => 900
                )

            [BookingCustomers] => Array
                (
                    [id] => 
                    [user_id] => 
                    [group_id] => 
                    [firstname] => 
                    [lastname] => 
                    [address1] => 
                    [address2] => 
                    [city] => 
                    [postcode] => 
                    [phone] => 
                    [alt_phone] => 
                    [lat] => 
                    [lng] => 
                    [created] => 
                    [modified] => 
                )

            [BookingFranchisees] => Array
                (
                    [id] => 
                    [user_id] => 
                    [group_id] => 
                    [firstname] => 
                    [lastname] => 
                    [address1] => 
                    [address2] => 
                    [city] => 
                    [postcode] => 
                    [phone] => 
                    [alt_phone] => 
                    [lat] => 
                    [lng] => 
                    [created] => 
                    [modified] => 
                )

        )

    [1] => Array
        (
            [Booking] => Array
                (
                    [id] => 2
                    [customer_id] => 14
                    [franchisee_id] => 7
                    [booking_date] => 2013-02-25 16:18:44
                    [start_date] => 2013-02-08 16:15:00
                    [end_date] => 2013-02-23 16:15:00
                    [event_location] => 
                    [price] => 6750
                )

            [BookingCustomers] => Array
                (
                    [id] => 
                    [user_id] => 
                    [group_id] => 
                    [firstname] => 
                    [lastname] => 
                    [address1] => 
                    [address2] => 
                    [city] => 
                    [postcode] => 
                    [phone] => 
                    [alt_phone] => 
                    [lat] => 
                    [lng] => 
                    [created] => 
                    [modified] => 
                )

            [BookingFranchisees] => Array
                (
                    [id] => 
                    [user_id] => 
                    [group_id] => 
                    [firstname] => 
                    [lastname] => 
                    [address1] => 
                    [address2] => 
                    [city] => 
                    [postcode] => 
                    [phone] => 
                    [alt_phone] => 
                    [lat] => 
                    [lng] => 
                    [created] => 
                    [modified] => 
                )

        )

) 
```

如您所见，我没有获得相关数据。我觉得这个问题与主键与外键有关，但我不知道我哪里出错了。任何人都可以解决这个问题吗？（我使用的是 cakephp 2.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:20:09.183

我相信您的 User-Id 调用不正确。尝试：

```
$options = array('conditions' =>  array('Booking.franchisee_id' => $this->Auth->user('id'))); 
```

# sql-server - 创建日历

> ID：15088124
> 
> 赞同：0
> 
> 时间：2013-02-26T11:36:01.090
> 
> 标签：sql-server, calendar, reporting-services

我创建了一个 SSRS 报告来显示已在公司预订的假期，在每行上显示日期从和到的日期，有没有办法让数据为每一天添加一行，而不是单行从并？因为我想使用这些字段填充日历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:52:08.107

这通常使用“日历”表来解决，即具有所有日期列表的表。然后您的查询看起来像这样：

```
select c.date
from data_table d 
        inner join
     calendar_table c 
        on c.date between d.start_date and d.end_date 
```

这里有一个如何创建一个非常强大的日历表的[示例](http://www.made2mentor.com/2011/04/calendar-tables-why-you-need-one/)。

# php - 生成数千个唯一的不可预测的序列号

> ID：15088125
> 
> 赞同：3
> 
> 时间：2013-02-26T11:36:04.273
> 
> 标签：php

嗨我想生成数千个独特的不可预测的序列，所以我写了这个函数

```
function generate_serials($count){
    $serials = array();
    $token = '8uhf7+-=??/\/';

    for($i = 1; $i <= $count; $i++){
        $hash = sha1(md5( $token . ( time() + (432 * 1000) ) ));
        $serial = '';
        for($j = 0; $j < 12; $j++){
            if($j == 4 || $j == 8) $serial .= '-';
            $serial .= $hash[rand(0, 39)];
            if(in_array($serial, $serials)){
                $serial = '';
                $j = 0;
            }
        }
        $serials[] = $serial;
    }
    return $serials;
} 
```

我对这种方法没有什么问题。

1.  我不知道为什么，但我不相信这个。（因为我一直认为我的解决方案而且我很愚蠢）这有什么问题吗？

2.  另一个问题是性能大约需要 20-30 秒，是自然的还是我弄得一团糟？

***更新***

哦，对不起，性能问题是内循环的计数器与外循环同名..我的错误！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:48:48.743

您的解决方案过于复杂。不一定要那样。如果您安装了 OpenSSL，请查看[openssl_random_pseudo_bytes](http://www.php.net/manual/en/function.openssl-random-pseudo-bytes.php)

[`mt_rand`](http://www.php.net/manual/en/function.mt-rand.php)或者，您可以[`hash`](http://php.net/manual/en/function.hash.php)像这样使用：

```
$serial = hash('sha512', mt_rand()); 
```

但是`mt_rand`不会生成加密安全值，因此它可能不像您希望的那样不可预测。

# javascript - Facebook登录事件订阅不起作用

> ID：15088126
> 
> 赞同：1
> 
> 时间：2013-02-26T11:36:07.677
> 
> 标签：javascript, facebook, facebook-likebox

在我的网络平台上，我向用户展示了一个 Facebook *likebox*。

单击likebox的**like**按钮后，我需要知道用户何时登录Facebook 。

我尝试通过对事件**auth.statusChange**和**auth.authResponseChange使用***FB.Event.subscribe*函数（在文档中建议）来做到这一点，但没有成功。

 ****这是我使用的代码示例：

```
/* Just to wait facebook functions are ready */
var handle = setInterval(function() {
    if(typeof(FB) != 'undefined'){
        fbReady();
        clearInterval(handle);
    }
}, 1000);

/* Get connection status */
function fbReady() {
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken;
            status == "connected";
        } else if (response.status === 'not_authorized') {
            status == "not_authorized";
        } else {
            status == "unknown";
        }

        /* I don't use status yet */
        setSubscriptions(status);
    });
}

/* set event listeners for login and liked */
function setSubscriptions(status){
    /* Like event subscription */
    FB.Event.subscribe('edge.create',
        function(response) {
            alert('user liked the page');
        });

    /* status change event subscription */
    FB.Event.subscribe('auth.statusChange',
        function(response) {
            alert('user status is changed in:' + response.status);
        });

    /* auth response change event subscription */
    FB.Event.subscribe('auth.authResponseChange',
        function(response) {
            alert('user auth response is changed in:' + response.status);
        });
} 
```

只有**edge.create**事件会在按下赞按钮时触发相关回调*，*但在用户登录时不会发生任何事情。

**如果登录的用户状态为connected**（他在 facebook 设置中接受了我的应用程序）或**not_authorized**，情况不会改变。

我尝试为 JsFiddle 提供交互式代码，但 Facebook js sdk 不能那样工作。

在此先感谢您的帮助****

# jsf - 显示来自某个服务器目录的图像

> ID：15088127
> 
> 赞同：0
> 
> 时间：2013-02-26T11:36:08.527
> 
> 标签：jsf, liferay

我将上传的图像文件保存在 tomcat 或 portlet 临时目录中，我想显示它们。我知道它们在服务器文件系统中的路径，但是如何生成正确的路径以在 portlet 的页面上显示它？它必须从 smth 变成：

> opt/liferay/tomcat-7.0.27/temp/28-Image-portlet/WEB-INF/classes/intech/webpro/kegor/image/Clipboard02.jpg

至

> [http://test.com/web/guest/liferay-benefits?p_p_id=Image_WAR_Imageportlet&p_p_lifecycle=2&p_p_state=normal&p_p_mode=view&p_p_cacheability=cacheLevelPage&p_p_col_id=column-1&p_p_col_count=1&_Imag](http://test.com/web/guest/liferay-benefits?p_p_id=Image_WAR_Imageportlet&p_p_lifecycle=2&p_p_state=normal&p_p_mode=view&p_p_cacheability=cacheLevelPage&p_p_col_id=column-1&p_p_col_count=1&_Imag)

如何得到它？

我知道它是如何从 portlets 资源文件夹中完成的：

```
#{resource['images:smiley.jpg']} 
```

但是如何在 portlet 中显示来自某个服务器目录的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:25:03.020

如果只需要显示内容（无需权限检查），可以使用Tomcat。将文件放入 /webapps/portlet-name/html/（或 temp/portlet-name/html/）目录。结果：[http ://site.com/portlet-name/html/image.jpg](http://site.com/portlet-name/html/image.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:58:05.623

您不能使用 #{resource['image']} 从另一台服务器访问图像，您可以

1）在xhtml中给出完整的图像路径

2) 将图像路径保存在 CSSfile 中，并在 xhtml 中使用 CSS 类。

3) 创建一个通用的 util 函数或 ResourceHelper ApplicationScoped Bean，它有类似
getResource(String imageName) 的东西，它返回正确的 URL。然后你
可以在你的 xhtml 中使用它作为
#{ResourceHelper.getResource('image.png')}

# c# - 使用 GetCompiledPageInstance 验证视图状态

> ID：15088128
> 
> 赞同：1
> 
> 时间：2013-02-26T11:36:10.920
> 
> 标签：c#, asp.net

在 Default.aspx 上，我编写了这段代码，它成功地向我展示了 Webform1.aspx，但是当我单击该按钮时它也有一个按钮，它给了我错误

```
protected void Page_Load(object sender, EventArgs e)
    {
        var pageView = PageParser.GetCompiledPageInstance("~/WebForm1.aspx", Server.MapPath("~/WebForm1.aspx"), HttpContext.Current);
        (pageView).ProcessRequest(HttpContext.Current);

    } 
```

**按钮点击错误**

```
Validation of viewstate MAC failed. If this application is hosted by a Web Farm or cluster, ensure that <machineKey> configuration specifies the same validationKey and validation algorithm. AutoGenerate cannot be used in a cluster. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:03:49.843

我认为你应该试试这些：

在 .aspx 文件中的 @ Page 之后，在两个页面指令中定义以下参数。

EnableViewState="假

然后将其添加到您的 webcofig 中的 system.web 标记中：

并修改您的页面标签（如果存在）或添加如下：

我确实认为它会达到你的目的。

PS：我在我自己的项目中使用了以上所有内容，我在我的应用程序中创建了许多 webusercontrols 的实例，它工作正常！

# .net - 在选中的列表框旁边实现第二列复选框

> ID：15088131
> 
> 赞同：0
> 
> 时间：2013-02-26T11:36:16.843
> 
> 标签：.net, vb.net, winforms, checkbox, listbox

我目前正在为图形工具创建一些 UI，我想知道是否有人遇到过/知道如何实现带有 2 个复选框的选中列表框。我已经查看了 google 和 SO，但我找不到任何东西。

我使用它的原因是我想为控件使用尽可能少的空间来最大化绘图空间。目前，我有两个选中的列表框来显示参数绘制在哪个轴上，每个轴一个。两个列表框都包含相同的文本，并且它们的选中状态相互关联。我可以有 3 个检查案例 False True、True False、False False 但不是 True True。这些分别表示右轴上的数据、左轴上的数据、未绘制的数据。

我想在一个列表框中以类似于选中列表框的方式有两个复选框，希望受益于列表框的内置控件，例如用户添加值和滚动。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:03:53.130

如果你想很快做到这一点，你可以在选中的列表框旁边放一个表格布局面板，每次你向列表框添加一个项目时，你可以在表格布局面板中添加一个复选框（我会继承列表框来做到这一点） . 然后，当单击复选框时，您可以使用它查找其行`GetRow()`并检查它匹配的列表框项。

# c# - 使用“带有复选框的组合框”在组合框中显示选中的项目

> ID：15088137
> 
> 赞同：3
> 
> 时间：2013-02-26T11:36:30.073
> 
> 标签：c#, checkbox, combobox, windows-store-apps, winrt-xaml

我正在构建一个 Windows 商店应用程序，由于 UI 问题，我必须在组合框中实现复选框。我遇到了以下问题：我想在 "Combobox with Checkbox" 中显示选中的项目。我想做什么：http: [//blogs.microsoft.co.il/blogs/justguy/image_2827F1EB.png](http://blogs.microsoft.co.il/blogs/justguy/image_2827F1EB.png)

```
 <ComboBox x:Name="cb2"            

                          DropDownOpened="cb2_DropDownOpened_1"         
                          DropDownClosed="cb2_DropDownClosed_1"
                          SelectionChanged="cb2_SelectionChanged_1"                              
                          Width="310" 
                          ItemsSource="{Binding Members}" 
                          DisplayMemberPath="{Binding Name}"
                          Height="50"  BorderBrush="#FF0A2562"
                           Tag="{Binding index}"

                          >

                        <ComboBox.ItemTemplate>
                        <DataTemplate>

                            <CheckBox
                                   Background="Black"
                                   BorderBrush="Black"
                                Tag="{RelativeSource TemplatedParent}"
                                Content="{Binding Name}"
                                IsChecked="{Binding Path=IsSelected,Mode=OneWay}"
                                Unchecked="CheckBox_Unchecked_1"
                                Click="CheckBox_Click"
                                />
                        </DataTemplate>

                    </ComboBox.ItemTemplate>                      

                </ComboBox> 
```

**代码背后：**

```
private void CheckBox_Click(object sender, RoutedEventArgs e)
    {

        CheckBox chk = (CheckBox)sender;

        string k =(string) chk.Content;

        chkstr.Add(k);

    }
 private void CheckBox_Unchecked_1(object sender, RoutedEventArgs e)
    {
        CheckBox chk = (CheckBox)sender;
        string k = (string)chk.Content;

        chkstr.Remove(k);
       // vl.selectedmembers.Remove(key);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T10:13:04.830

在 Microsoft 定义的 ComboBox 标准模板中，在 ContentPresenter 中添加一个 TextBlock。将 TextBlock 的 Text 属性与字符串绑定。现在您可以通过将项目显式转换为字符串来将选中的项目添加到字符串。@Patrick：ItemTemplate 和 ItemContainerStyle 都可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:33:25.873

您需要重新模板 ComboBoxItem。指定 ComboBox.ItemContainerStyle 而不是 ComboBox.ItemTemplate。在 ComboBox.ItemContainerStyle 内部，有一个模板设置器。复制默认模板并添加一个 CheckBox。将 CheckBox.IsChecked 模板绑定到 IsSelected，或使用处于 Selected 视觉状态的对象动画将 IsChecked 动画化为 true。

您的方法不起作用，因为 IsSelected 是 ComboBoxItem 容器上的属性，而不是数据上下文。

# android - Android 中的堆增长问题

> ID：15088141
> 
> 赞同：2
> 
> 时间：2013-02-26T11:36:44.660
> 
> 标签：android

我遇到了关于增长堆的问题，我有 2 个问题要问。

首先，我该如何检查设备中当前的增长堆？

其次，如何减少我的增长堆大小以防止内存不足错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:50:40.803

你的意思是你想检查你的应用程序可以使用的堆的总大小吗？或者堆中还剩下多少空闲内存？

要查看堆的总大小，您可以调用

```
Runtime rt = Runtime.getRuntime();
long maxMemory = rt.maxMemory();
Log.v("onCreate", "maxMemory:" + Long.toString(maxMemory)); 
```

这将告诉您允许您的应用程序使用多少内存（[源](https://stackoverflow.com/a/9428660/1062909)）

要找出还剩多少，您可以执行[以下操作](https://stackoverflow.com/a/6152260/1062909)

你什么时候出现内存不足错误？一个起点可能是重写 onLowMemory() 方法......

# wordpress - 这可能是我的 WordPress 白屏的问题吗？

> ID：15088145
> 
> 赞同：0
> 
> 时间：2013-02-26T11:36:48.333
> 
> 标签：wordpress

前几天我就白屏了。首先它只是随机出现，但主要是当我想在我的管理面板中保存不同的更改时。

`<b></b>`然后我在标签之前看到了那个`DOCTYPE`标签。我的网站在[这里](http://www.gainprofitincome.com)。

我已经停用了一些插件，但它仍然显示此错误。我还检查了`functions.php`空格，但我无法给出答案。

这个标签可能是白屏的原因吗？当我查看白屏的来源时，这是页面上唯一的标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:04:00.283

您需要检查日志以确定发生了什么..

一般来说，我可以看到白屏的两个原因：

1.  PHP 在完成生成页面之前已经崩溃。这可能与`<b></b>`标签完全无关。您将在*php 错误日志*中看到一些错误消息。
2.  PHP在输出**后**发送重定向标头`<b></b>`- 在这种情况下，错误将是*标头已发送*。

`<b></b>`事情：似乎它出现在您网站的所有页面上。我建议检查所有页面中包含的文件。您也可以`grep -iRHn '<b></b>' ./`从站点的根目录运行。

# jquery - 显示 JQuery 错误消息

> ID：15088151
> 
> 赞同：1
> 
> 时间：2013-02-26T11:36:59.603
> 
> 标签：jquery, asp.net-mvc-4

我想在 Ajax 调用的错误部分显示一个 JQuery 对话框。目前我正在使用下面的代码，但消息是在页面中而不是作为弹出对话框。最初，当页面加载时，图标也显示在我不想显示的页面上。

## .cshtml

```
<div id="dialog-confirm" title="Error Message">
    <p>
      <span id="dialog-text"> </span>
      <span class="ui-icon ui-icon-alert" style="float:right; margin:0 7px 20px 0;"></span>
    </p>
</div> 
```

## Ajax 调用 - 出错时我想显示上面的对话框以及实际的错误消息

```
$.ajax(
{
    type: "GET",
    contentType: "application/json; charset=utf-8",
    url: '@Url.Action("UpdateRecord", "Client")',
    data: { "id": id, "name": clientName, "code": clientCode, "typeId": clientTypeId, "clientStatusCode": clientStatusCode },
    dataType: "json",
    beforeSend: function () {//alert(id);
    },
    error: function (request) {
        alert('inside error');
        $("#dialog-text").html(request.responseText);
        $("#dialog-confirm").dialog("open");

        //alert(request.responseText);
    },
}); 
```

# com - Visual Studio 附加到进程 IE COM 插件

> ID：15088153
> 
> 赞同：1
> 
> 时间：2013-02-26T11:37:06.857
> 
> 标签：com, activex, visual-studio-debugging, attach-to-process

我有用于 Internet Explorer 的 ActiveX COM 插件。我想“附加到进程”到这个插件并调试它。我试图附加到 iexplorer.exe 进程，但 Visual Studio 没有进入断点。我的错是什么？哪个进程托管此 COM 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:57:10.423

应该很`iexplorer.exe`可能是其他问题。

确保Internet Explorer 进程从上次构建中存在的正确位置 (PluginProject\Debug) 加载的`debug`插件版本（检查插件注册的注册表项或尝试从中显示 MessageBox）。`.DLL``.pdb`

还要检查您是否尝试使用 x86 版本的 IE（或 x64 和 x64；）调试插件的 x86 版本

# vb.net - VB.NET：如何在一行中的特定单词之后找到一个单词并将其存储

> ID：15088155
> 
> 赞同：2
> 
> 时间：2013-02-26T11:37:12.723
> 
> 标签：vb.net

我有一串连续的单词从机器传到系统的超级终端，为此我使用 USB 到串行电缆。我想找到该字符串中特定单词之后的一些值，然后将其存储。

我使用线程和拆分概念来做到这一点，但根据机器的要求和操作，它在运行时将无法正常工作。

我想要捕获的值来自一个特定的词。我想跳过那些词，只存储值。怎么做？

我在下面给出了该字符串的示例：

```
平均 49 50
标清 500 10
最低 100 5
最大 50 45.56

```

在此我只想存储值，例如`49`and `50`，然后丢弃`MEAN`。然后丢弃`SD`和存储`500`等等`10`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:47:45.593

您可以使用`StreamReader`对象一次读取一行。`String.Split`然后，您可以使用该方法轻松解析该行。我建议创建一个或多个代表正在读取的数据的类，如下所示：

```
Public Class LineData
    Public Property Label As String
    Public Property Value1 As Decimal
    Public Property Value2 As Decimal
End Class

Public Function ReadNextLine(stream As Stream) As LineData
    Dim reader As New StreamReader(stream)
    Dim line As String = reader.ReadLine()
    Dim data As LineData = Nothing
    If line IsNot Nothing Then
        Dim words() As String = line.Split(New Char() {" "c}, StringSplitOptions.RemoveEmptyEntries)
        If words.Length = 3 Then
            data = New LineData()
            data.Label = words(0)
            data.Value1 = Decimal.Parse(words(1))
            data.Value2 = Decimal.Parse(words(2))
        End If
    End If
    Return Data
End Function 
```

请注意，这是一个基于您提供的示例数据的非常简单的示例。如果不同的行有不同数量的数字参数，那将进一步使逻辑复杂化。`Nothing`在我的示例中，如果无法读取数据，则该方法返回。此外，如果该行中的最后两个单词不是数字，该方法将引发异常。因此，您需要将其包装在一些额外的异常处理中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:18:05.630

这可能是您正在寻找的。虽然我个人会创建一个存储类型（平均值、中位数等）、firstvalue 和 secondvalue 的类。

尽管如此，你想要它做的只是将值转储到某种存储中，因此这就足够了。

```
Dim Values as New List(Of Decimal)

'Use a streamreader to read each line of text
Using reader As StreamReader = New StreamReader(*your text source*)
'Read the line 
Dim linetext as string = reader.ReadLine
Dim myValue as decimal
'Split the line
Dim splitText() = linetext.Split(" ")
'Analyze each section of the line, if its possible to parse the value as a decimal then add it to the list of values to be stored.
For Each txt in splitText
If Decimal.TryParse(txt, myValue) then Values.Add(myValue)
Next
End Using 
```

# wcf - 当所有超时参数设置为最大值时 WCF 服务超时

> ID：15088156
> 
> 赞同：0
> 
> 时间：2013-02-26T11:37:14.887
> 
> 标签：wcf, azure

我有一个 WCF 服务，它有一个非常耗时的方法，将大数据文件上传到“天蓝色**表**存储”。

我在客户端运行时设置超时如下： -

```
binding = new BasicHttpBinding();
binding.CloseTimeout = TimeSpan.FromMilliseconds(2147483647.0);
binding.OpenTimeout = TimeSpan.FromMilliseconds(2147483647.0);
binding.ReceiveTimeout = TimeSpan.FromMilliseconds(2147483647.0);
binding.SendTimeout = TimeSpan.FromMilliseconds(2147483647.0); 
```

我的 web.config 的超时设置如下：-

```
<bindings>
      <basicHttpBinding>
        <binding maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647" sendTimeout="22:30:00" receiveTimeout="22:30:00" openTimeout="22:30:00" closeTimeout="22:30:00" maxBufferSize="2147483647">
          <readerQuotas maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647" />
        </binding>
      </basicHttpBinding>
    </bindings> 
```

我在 VS 2012 中运行我的代码，我看到的问题是文件上传方法在 60 分钟后崩溃，出现未处理的 CommunicationException：远程服务器返回错误：NotFound。如果我按 F5，则上传继续并完成。此时崩溃出现在 Reference.cs 文件中：-

```
public void EndFileUploadMethod(System.IAsyncResult result) {
                object[] _args = new object[0];
                base.EndInvoke("FileUploadMethod", _args, result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:27:04.463

我使用类似的 azure blob 来存储我的内容。我的代码没有任何超时设置。试试这个，让我知道。

```
 public static CloudBlobContainer Container
    {
        get
        {
            CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) =>
                {
                    // Provide the configSetter with the initial value
                    configSetter(RoleEnvironment.GetConfigurationSettingValue(configName));
                    RoleEnvironment.Changed += (sender, arg) =>
                    {
                        if (arg.Changes.OfType<RoleEnvironmentConfigurationSettingChange>().Any((change) =>
                        (change.ConfigurationSettingName == configName)))
                        {
                            // The corresponding configuration setting has changed, so propagate the value
                            if (!configSetter(RoleEnvironment.GetConfigurationSettingValue(configName)))
                            {
                                // In this case, the change to the storage account credentials in the
                                // service configuration is significant enough that the role needs to be
                                // recycled in order to use the latest settings (for example, the 
                                // endpoint may have changed)
                                RoleEnvironment.RequestRecycle();
                            }
                        }
                    };
                });
            CloudStorageAccount acc = CloudStorageAccount.FromConfigurationSetting("RecordingsStorageAccount");
            CloudBlobClient bc = acc.CreateCloudBlobClient();
            CloudBlobContainer c = bc.GetContainerReference(RoleEnvironment.GetConfigurationSettingValue("RecordingsContainer"));
            return c;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:21:04.640

对于文件上传，还有一些其他配置需要到位。首先，您要上传的文件有多大？如果它们 > 50MB 左右，您可能必须将它们分成小块并将它们发送过来。

在此之前，请尝试将以下设置添加到您的配置中。不要担心`<authentication>`and`<compilation>`标签。感兴趣的是`<httpRuntime>`和`<requestLimits>`标签。

我的`maxAllowedContentLength`属性值在下面是任意的，因此您可以将其设置为您想要的任何值。我相信它以字节为单位。

```
 <system.web>
    <compilation debug="true" targetFramework="4.0"/>
    <authentication mode="Windows" />
    <httpRuntime maxRequestLength="2147483647" />
  </system.web>

  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2000000000" />
      </requestFiltering>
    </security>
  </system.webServer> 
```

# java - JButton 在 JPanel revalidate() 之后两次 setText 到 JLabel

> ID：15088158
> 
> 赞同：1
> 
> 时间：2013-02-26T11:37:21.527
> 
> 标签：java, swing, jpanel, duplicate-removal, cardlayout

当我单击按钮时，我想在面板中添加一个按钮，我做到了，但我的程序不像以前那样工作。这是我之前的程序：

![在此处输入图像描述](../Images/d3b138111f1ca41049807c59f0d4b7e1.png)

带有粉红色按钮的南面板是卡片布局面板。当我点击东边的灰色按钮时，卡片面板发生了变化。当我单击粉红色按钮时，发生了这种情况：

![在此处输入图像描述](../Images/9d384d44ef44d18946ba9b1a70ecfc14.png)

一个粉色按钮 setText 到一个标签。在我向卡片面板“TOPLI NAPICI”添加一个按钮后，发生了这种情况：

![在此处输入图像描述](../Images/7cbcbffa3cca12dc96ec7a03f242b3b9.png)

如您所见，一个按钮“moka”添加到我想要的面板中，但是当我单击一个按钮时，它 setText 两次，只有新按钮（在本例中为“MOKA”） setText 一次。卡片面板中的其他面板也发生了这种情况：

![在此处输入图像描述](../Images/4cbe46aa940e4c5ea23c1d682558442f.png)

当我单击按钮添加新按钮时，这是我的代码的一部分

```
 if (enter == JOptionPane.OK_OPTION) {
    try{
    Double price1=Double.parseDouble(priceField.getText());

    String name1= productField.getText();

        Product name = new Product(name1, price1);
        Application .manu.add(name);

        if (field.getSelectedItem().equals("TOPLI  NAPICI")){

            for(Controller c:Controller) {
            c.tnp.add(new JButton(name1));//c is panel , holds all panels

         c.tn.revalidate();//c.tn is panel which is changed( adding one button), cardpanel
         c.removeAll();
         c.panels();//create all panels which is removed
             c.revalidate();

    System.out.print( c.tnp.size());//tnp is a list with buttons, shows that add one more button, that is correct

        } 
```

喜欢它复制面板，或者当我`click button`单击两次时。是否可以？虽然我只更改了卡片布局中的一个面板（“TOPLI NAPICI”），但它在卡片布局中的所有面板中都发生了变化（“SOKOVI”和“ALKOHOL”）有什么问题？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:57:22.850

*   不知道使用了什么 LayoutManager，没有谈论 CardLayout，为了更好的帮助，尽快发布 SSCCE，简短，可运行，可编译，只是关于带有 CardLayout 的 JPanel 和一个用于此处发布的代码的 JButton，

*   在此处发布的没有代码的图像没有帮助

*   CardLayout 默认不需要调用`revalidate() & repaint()`，所有这些通知器默认在 API 中实现

*   这不是正确的方法

.

```
c.tn.revalidate();//c.tn is panel which is changed( adding one button), cardpanel
c.removeAll();
c.panels();//create all panels which is removed
c.revalidate(); 
```

*   将所有更改应用于已经可见的 GUI（删除、添加、修改、重新布局），然后最后两行代码应该是`revalidate() & repaint()`，对于第一个。容器在哪里完成更改，或者如果更改了几个容器，则调用它们的 1.st 加入容器

*   `validate() & repaint()`for `JFrame`, `JDialog`, `JWindow`, 在 Java7 中也实现了`revalidate()`for `Top Level Containers`, 和 for 相同`JPanel`(例如)

# asp.net - 如何将 jQuery ajax 与 asp.net 用户控件一起使用？

> ID：15088161
> 
> 赞同：6
> 
> 时间：2013-02-26T11:37:29.830
> 
> 标签：asp.net, ajax, jquery

我想将 ajax 与 asp.net 用户控件一起使用，

```
 $.ajax({
        type: "POST",
        url: "*TCSection.ascx/InsertTCSection",
        data: "{id:'" + id + "'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var URL = msg.d;
            alert(URL);
        }); 
```

.cs 代码

```
[WebMethod]
public static string InsertTCSection(string id)
{
    string result = "deneme";
    return result; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:57:08.737

**您**不能通过 jquery 调用保存在用户控件中的方法。因为 .ascx 控件不代表真实的 url。

它们旨在嵌入到某些 ASP.NET 页面中，因此它们在运行时不存在。您可能会做的是，创建一个单独的服务并将您的方法放在那里。像[网络服务。](https://stackoverflow.com/questions/7477404/web-service-in-asp-net)

看到[这个](https://stackoverflow.com/questions/579024/calling-an-ascx-page-method-using-jquery)，[这个](https://stackoverflow.com/questions/3392345/using-jquery-ajax-to-call-asp-net-function-in-control-code-behind-instead-of-pag)和许多其他的

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:20:06.210

i am using generic Handler to solve this problem.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T11:45:53.593

尝试：

```
 $.ajax({
        type: "POST",
        url: "*TCSection.ascx/InsertTCSection",
        data: JSON2.stringify({ id: id}, //Your 2nd id is passing value but i dont know where its come from
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            var URL = msg.d;
            alert(URL);
             }
         )}; 
```

在cs中：

```
[WebMethod]
public static string InsertTCSection(string id)
{
    string result="deneme";
    return result; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T11:56:14.777

我认为您可能缺少此属性

```
 [System.Web.Script.Services.ScriptService] 
```

在你服务类之前

```
[System.Web.Script.Services.ScriptService]
public class TCSection: System.Web.Services.WebService
{

    [WebMethod]
    public static string InsertTCSection(string id)
    {
    }
 } 
```

或者可能还有其他原因导致 Web 服务的路径不正确。

# c# - 将基类中的数据合并到派生类中

> ID：15088162
> 
> 赞同：1
> 
> 时间：2013-02-26T11:37:37.393
> 
> 标签：c#

我有一个这样的类结构：

空间 --> 服务请求 --> 服务请求系统X

我编写了一个方法来返回 ServiceRequestSystemX 列表。数据与存储空间信息的位置分开保存。因此，每次创建 ServiceRequestSystemX 类型的新对象时，我都会调用不同的接口以返回该服务请求的 Spatial 对象。

现在因为 ServiceRequestSystemX 最终是从 Spatial 派生的，有没有一种快速的方法可以将我的 Spatial 对象合并到我的 ServiceRequestSystemX 对象中，而无需执行以下操作：

```
ServiceRequestSystemX.X_Coordinate = Spatial.X_Coordinate; 
```

我觉得这很乏味和不必要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:41:53.107

作为派生类型，ServiceRequestSystemX 已经公开了 Spatial 类公开的基成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:56:13.653

根据您在我的第一个答案中的评论，您**可以**尝试使用反射将两个对象合并在一起。但我会称之为肮脏的黑客攻击。

```
public static class ExtensionMethods
{
    public static TEntity CopyTo<TEntity>(this TEntity OriginalEntity, TEntity NewEntity)
    {
        PropertyInfo[] oProperties = OriginalEntity.GetType().GetProperties();

        foreach (PropertyInfo CurrentProperty in oProperties.Where(p => p.CanWrite))
        {
            if (CurrentProperty.GetValue(NewEntity, null) != null)
            {
                CurrentProperty.SetValue(OriginalEntity, CurrentProperty.GetValue(NewEntity, null), null);
            }
        }

        return OriginalEntity;
    }
} 
```

此代码取自[此处](https://stackoverflow.com/questions/3361187/c-sharp-reflection-merge-two-objects-together)找到的另一篇文章。

# ruby-on-rails - 无法停止 Rails 服务器

> ID：15088163
> 
> 赞同：143
> 
> 时间：2013-02-26T11:37:49.353
> 
> 标签：ruby-on-rails

我是 Rails 新手，我正在使用 ubuntu 机器和 ruby​​mine IDE。问题是我无法停止 rails 服务器。我试图通过终止 rails 进程来停止服务器。但是，当我运行时`pgrep -l rails`，没有找到这样的进程。所以，我只能杀死 ruby​​ 进程，但是，服务器不会停止。

我试过`./script/server stop`了（因为我是通过运行来启动它的`./script/server start`），但是没有用。谷歌搜索并找到一些stackoverflow帖子，我试图更改本地主机端口的监听端口但没有成功。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：338
> 
> 时间：2013-02-26T11:42:53.507

您可以使用其他端口，如下所示：

```
rails server -p 3001 
```

通常在您的终端中，您可以尝试`Ctrl + C`关闭服务器。

杀死 Ruby on Rails 默认服务器（即`WEBrick`）的另一种方法是：

```
kill -INT $(cat tmp/pids/server.pid) 
```

在您的终端中找出进程的 PID：

```
$ lsof -wni tcp:3000 
```

然后，使用 PID 列中的数字来终止进程：

例如：

```
$ kill -9 PID 
```

我发现的其他一些答案是：

要在运行时停止 rails 服务器，请按：

```
CTRL-C
CTRL-Z 
```

您将重新获得控制权`bash`。然后输入（不带`$`）：

```
$ fg 
```

这将回到该过程，然后正常退出`Rails s`。

这有点烦人，但这肯定比手动杀死进程要好。这不是太糟糕，这是我能想到的最好的。

## 更新的答案：

您可以使用`killall -9 rails`以杀死`rails`名称中带有“”的所有正在运行的应用程序。

`killall -9 rails`

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-02-26T11:48:27.240

您可以通过以下方式使用 grep 命令，

```
ps aux | grep rails 
```

进而

```
kill -9 {process_id} 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-02-01T14:18:05.203

`pkill -9 rails`杀死rails的所有进程

**更新的答案**

`ps aux|grep 'rails'|grep -v 'grep'|awk '{ print $2 }'|xargs kill -9`

这将杀死任何正在运行的 rails 进程。用其他东西替换“rails”以杀死任何其他进程。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-01-11T06:48:03.850

以下是杀死服务器进程的步骤：

`1\. lsof -i tcp:3000`

`2\. kill -9 1234`

进程的 PID在哪里`1234`： localhost:3000 在步骤 1 中显示。

或者

删除文件（server.pid）`Rails.root/tmp/pids/`并重新启动服务器。

或者

使用命令在另一个端口打开应用程序：

`rails s -p 3001`

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2014-09-30T17:33:06.907

在我的 MAC 上`killall -9 rails`不起作用。但`killall -9 ruby`确实如此。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2016-06-01T04:39:51.420

我一般使用：

`killall ruby`

或者

`pkill -9 ruby`

这将杀死所有正在运行的与 ruby​​ 相关的进程，如`rails server`,`rails console`等。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-05-31T16:35:02.550

**1\. 只需从 rails app 目录中删除 pid 文件**

`Rails_app -> tmp -> pids -> pid file`

删除文件并运行

`rails start`

* * *

**2、Rails 5.0及以上版本可以使用该命令**

`rails restart`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-02-26T11:44:12.293

用于`ctrl+c`关闭 Webrick 服务器。

不幸的是，如果它不起作用，则强制关闭终端并重新启动它。

另一个技巧是

```
1\. open your system-monitor(a gui application) on ubuntu

2\. Select processes tab 

3\. Then look for a process having name 'ruby'

4\. End that process 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-09-26T09:11:03.467

从 tmp/pids 文件夹中删除 server.pid。就我而言，错误是：服务器已经在运行。检查 /home/sbhatta/myapp/tmp/pids/server.pid。

所以，我删除 server.pid

`rm /home/sbhatta/myapp/tmp/pids/server.pid` 然后运行`rails s`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-07-24T06:28:13.207

Ctrl-Z 通常应该可以解决问题。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-09-17T03:43:02.660

**第 1 步：**找出哪些项目正在消耗 3000 端口。

```
lsof -i:3000 
```

**第 2 步：**找到名为的进程

*对于 Mac*

```
ruby      TCP localhost:hbci (LISTEN) 
```

*对于 Ubuntu*

```
ruby      TCP *:3000 (LISTEN) 
```

**第三步：**找到进程的PID并杀死它。

```
kill -9 PID 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-11-04T16:22:40.967

很简单

```
pkill -9 ruby 
```

仅此而已

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-04-18T22:17:19.403

如果您使用的是更现代的 Rails 版本并且它使用 Puma 作为 Web 服务器，您可以运行以下命令来查找卡住的 Puma 进程：

```
ps aux | grep puma 
```

它将导致类似于以下的输出：

```
85923 100.0  0.8  2682420 131324 s004  R+    2:54pm   3:27.92 puma 3.12.0 (tcp://0.0.0.0:3010) [my-app]
92463   0.0  0.0  2458404   1976 s008  S+    3:09pm   0:00.00 grep puma 
```

您想要的过程不是指`grep`. 在这种情况下，进程 ID 为 85923。

然后我可以运行以下命令来终止该进程：

```
kill -9 85923 
```

[![在此处输入图像描述](../Images/1011fb81df12bd083cf2383f7920ee61.png)](https://i.stack.imgur.com/f21pD.png)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-10-15T22:24:51.870

我`killall -9 rails`像 Sri 建议的那样使用它，但它没有用。我将命令调整为`killall -9 ruby`，服务器立即关闭。

Tl;博士：`killall -9 ruby`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-02-26T11:46:59.817

检查 /tmp/tmp/server.pid

里面有一个pid。

通常，我会在 cmd 中执行“kill -9 THE_PID”

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-21T10:13:41.487

当 rails 服务器没有启动时，这意味着它已经在运行，那么您可以通过使用新端口来启动，例如。

```
rails s -p 3001 
```

或者**它启动和停止在这种情况下**你想**删除rails目录结构中的临时文件夹**它启动rails服务器。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-03-26T01:41:11.500

我在 Windows 上注意到（我使用 10，但不确定 oler 是否相同）。如果您使用 cmd.exe 和 ctrl + c raisl 服务器会正​​确停止。

但是，如果您使用 Git Bash，则不会。它说它有，但是当您查看 tmp pid 时，它仍然存在。

也许是 git bash 的错误？

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-08-30T07:09:10.193

`killall -9 ruby`将杀死所有 ruby​​ 进程，并且至少在我的机器上，rails 服务器显示为 ruby​​ 进程。`killall -9 rails`更具体，不适用于旧版本的 Rails 服务器（它给出“rails：找不到进程”，因为该进程名为 ruby​​）

前段时间遇到这个问题。在 activeadmin 中提交表单后，rails 服务器刚刚挂起，我无法使用正常方式杀死它（即使在 ctrl+z 之后它仍在后台运行）。学习者的回答有所帮助，但此命令不需要进程 ID。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-06-03T04:57:05.517

这个问题已经晚了。这是我的 2 美分。当我无权访问服务器时，我做了一个 rake 任务来停止服务器。不过我只在 Mac 上测试过。

有了这个，你可以简单地将它添加到你的项目中，然后运行 ​​rake 命令。

干得好：

要点链接：-最新版本将在这里。 [https://gist.github.com/houmanka/289184ca5d8d92de0499#file-server-rake](https://gist.github.com/houmanka/289184ca5d8d92de0499#file-server-rake)

这里有一些代码：

```
# Make a file under: `project_root/lib/tasks/server.rake`

# Then paste the following code

    namespace :server do
      desc "Stop the running server by killing the PID"
      task :kill do
        STDOUT.puts "Enter port number: "
        post_number = STDIN.gets.strip
        system "pid=$(lsof -i:#{post_number.to_i} -t); kill -TERM $pid || kill -KILL $pid"
      end
    end

# Then to use it in the terminal: `rake server:kill` 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-08-25T10:30:21.713

此外，请确保您在用于启动服务器的同一终端（选项卡）中执行命令 Cntrl+C。

就我而言，我有 2 个选项卡，但我忘记从正确的选项卡停止服务器，我想知道为什么 Cntrl+C 不起作用。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2016-11-16T11:59:00.050

一种超级简单的方法是

`gem install shutup`

然后进入 Rails 项目的当前文件夹并运行

`shutup`# 这将杀死当前正在运行的 Rails 进程

您可以随时使用命令“shutup”

免责声明：我是这颗宝石的创造者

注意：如果您使用的是 rvm，请全局安装 gem

```
rvm @global do gem install shutup 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-08-26T17:38:52.930

对于我的 Windows 10 机器，`Ctrl - C`+`Ctrl - D`有效。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-02-22T07:57:37.093

我们可以使用 PORT no 在 Linux 上终止 rails 会话

```
fuser -k 3000/tcp 
```

这里 3000 是一个端口号。现在重新启动您的服务器，您将看到您的服务器处于运行状态。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-07-19T06:30:43.770

跟着这些步骤：

1.  打开你的项目
2.  在 tmp 文件夹中选择
3.  选择pids文件夹
4.  删除 server.pid 文件
5.  现在启动你的 Rails 服务器

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-10-02T07:28:32.437

1.  只需使用给定的位置打开文件 `sudo vi /Users/user1/go/src/github.com/rails_app/rails_project/tmp/pids/server.pid`

2.  找到进程正在运行的 process_id / thread_id。

3.  杀死指定的进程/线程使用`kill -9 84699`

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-01-02T12:09:29.950

在轨道 6 上使用

`ps aux | grep rails`没有返回服务器进程

我必须做

`ps aux | grep puma`

找到实际的进程，然后使用杀死它

`kill -9 {process_id}`

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-10-30T14:23:44.237

按 Ctrl - C如果不检查它将停止

# opencv - 将图像从 IPL_DEPTH_8U 转换为 IPL_DEPTH_32S

> ID：15088165
> 
> 赞同：0
> 
> 时间：2013-02-26T11:37:58.293
> 
> 标签：opencv, depth, image-conversion

如何将图像从 IPL_DEPTH_8U 转换为 IPL_DEPTH_32S？

我需要使用分水岭函数，并且在 IPL_DEPTH_8U 中有一个标记图像。问题是分水岭函数只接受 IPL_DEPTH_32S 作为标记。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:54:46.733

使用`Mat`而不是`IplImage` ：`marker_img.convertTo(marker_img,CV_32S);`

如果要使用IplImage，则必须先对图像进行缩放，然后再进行转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:40:01.613

使用显式转换为每个通道的每个像素手动执行：

```
Img32s->imageData[y*((int)Img32s->widthStep)+x*3+C]=(int)((uchar*)Img8u->imageData)[y*((int)Img8u->widthStep)+x*3+C]/255.; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:08:00.277

如果您不想使用新的 cv::Mat 版本，可以尝试以下操作：

```
 IplImage* converted = cvCreateImage(cvSize(img->width,img->heigth),IPL_DEPTH_32S);

 for (int i = 0;i<img->heigth;i++)
     for(int j = 0;j<img-width;j++)
         ((signed long*)(converted->imageData+i*converted->widthStep))[j] = ((unsigned char*)(img->imageData+i*img->widthStep))[j] 
```

如果您有 3 通道图像 !!!!!!!!! 您必须使用以下内容：

```
 IplImage* converted = cvCreateImage(cvSize(img->width,img->heigth),IPL_DEPTH_32S,3);

 for (int i = 0;i<img->heigth;i++)
     for(int j = 0;j<3*(img-width);j++)//since you have 3 channels
         ((signed long*)(converted->imageData+i*converted->widthStep))[j] = ((unsigned char*)(img->imageData+i*img->widthStep))[j] 
```

以及编写代码的更好的教学方法：

```
 for (int i = 0;i<img->heigth;i++)
         for(int j = 0;j<(img-width);j++)
{
             ((signed long*)(converted->imageData+i*converted->widthStep))[j*3] = ((unsigned char*)(img->imageData+i*img->widthStep))[j*3]//R or B ??
             ((signed long*)(converted->imageData+i*converted->widthStep))[j*3+1] = ((unsigned char*)(img->imageData+i*img->widthStep))[j*3+1]//G
             ((signed long*)(converted->imageData+i*converted->widthStep))[j*3+2] = ((unsigned char*)(img->imageData+i*img->widthStep))[j*3+2]//R or B ??

} 
```

# python - Python：os.path.isfile 无法识别以数字开头的文件

> ID：15088166
> 
> 赞同：5
> 
> 时间：2013-02-26T11:38:02.833
> 
> 标签：python, operating-system

因此，在搜索以字母开头的文件名时，我试图成功地将某些常规文件（pdf，png）合并`os.path.isfile`到我的代码中。`os.path.exists`

我正在使用的文件命名标准（并且由于用户而无法更改）以数字开头，随后无法使用相同的方法找到。有没有办法让我可以通过`.isfile`or发现这些文件`.exists`？

我正在搜索的文件是 .txt 文件。

```
 os.path.isfile("D:\Users\spx9gs\Project Work\Data\21022013AA.txt")

    os.path.isfile("D:\Users\spx9gs\Project Work\Data\AA21022013.txt") 
```

回报：

错误的

真的

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T11:41:55.080

您需要使用原始字符串，或转义反斜杠。在文件名中：

```
"D:\Users\spx9gs\Project Work\Data\21022013AA.txt" 
```

将`\210`被解释为八进制转义码，因此您将无法获得正确的文件名。

这些中的任何一个都可以工作：

```
r"D:\Users\spx9gs\Project Work\Data\21022013AA.txt"
"D:\\Users\\spx9gs\\Project Work\\Data\\21022013AA.txt" 
```

# php - 用浮点数对多维数组进行排序

> ID：15088169
> 
> 赞同：0
> 
> 时间：2013-02-26T11:38:13.947
> 
> 标签：php, sorting, multidimensional-array, floating-point

我有一个多维数组，其中包含位置数据（例如地址、电话、姓名等）以及它们与某个点的相对距离作为浮点数（例如`0.49012608405149`或`0.72952439473047`或`1.4652101344361`或`13.476735354172`）。

现在我需要对这个数组进行排序，使其以最近距离 ( ) 的数据集开始，以最远距离 ( `0.49012608405149`) 结束`13.476735354172`。

到目前为止我使用的功能做得很好，但有时会搞砸，这当然是因为它使用了 strcmp

```
function cmp($a, $b) {
            return strcmp($a["distance"], $b["distance"]);
        }
        usort($resultPartner, "cmp"); 
```

我用谷歌搜索了很多，但找不到任何适合我的案例。如果可能的话，我想避免`foreach`声明，因为我读到它可能对大数组有很差的性能。

你对此有什么想法/经验，可以给我一个工作功能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:43:22.420

`strcmp()`是*二进制安全字符串比较* 为什么你不只比较浮点数？

比较浮动 php 手册时说

> 从比较函数返回非整数值，例如浮点数，将导致内部强制转换为回调返回值的整数。因此，诸如 0.99 和 0.1 之类的值都将被转换为整数值 0，这将比较这些值是否相等。

所以你必须小心。

看看这个：[http ://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

> 由于浮点计算涉及一些不确定性，我们可以尝试通过查看两个数字是否“接近”彼此来考虑这一点。

尝试这样的事情：

```
function cmpfloat($a, $b) {
 if (abs($a["distance"]-$b["distance"]) < 0.00000001) {
   return 0; // almost equal
 } else if (($a["distance"]-$b["distance"]) < 0) {
   return -1;
 } else {
   return 1;
 }
} 
```

如果比较整数值，则以下功能很好：

```
function cmp($a, $b) {
    return $a["distance"] < $b["distance"] ? -1 : ($a["distance"] === $b["distance"] ? 0 : 1);
} 
```

如果距离小于 b 距离返回 -1 如果距离等于 b 距离返回 0 如果距离大于 b 距离返回 1

原因： `The comparison function must return an integer less than, equal to, or greater than zero if the first argument is considered to be respectively less than, equal to, or greater than the second.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:48:43.013

也许以这种方式：

```
$data = array(
    array('dist' => 0.72952439473047),
    array('dist' => 0.49012608405149),
    array('dist' => 0.95452439473047),
    array('dist' => 0.12952439473047),
);
foreach ($data as $k => $v) {
    $dist[$k]  = $v['dist'];
}
array_multisort($dist, SORT_ASC, $data); 
```

# c++ - 如何将西里尔文字添加到 AVFrame 或 IplImage

> ID：15088170
> 
> 赞同：1
> 
> 时间：2013-02-26T11:38:17.263
> 
> 标签：c++, opencv, libav

拉丁文本可以通过 cvPutText() 轻松添加，但我需要将西里尔文本添加到 IpImage（或 AVFrame，没关系）。请你帮助我好吗？谢谢！

# ios - 目标 C：使用包含字符串的名称修改标签

> ID：15088171
> 
> 赞同：-1
> 
> 时间：2013-02-26T11:38:18.010
> 
> 标签：ios, iphone, string, label

我想像这样修改**目标 C**中的标签：

当按下一个名为“Car”的按钮时，我希望标签“pushedCar”取消隐藏。现在它看起来像这样，但它是静态的......

```
if ([buttonName isEqualToString:@"Car"]) {
        self.pushedCar.hidden = NO;} 
```

我怎样才能写出类似的东西：

```
if ([buttonName isEqualToString:@"Car"]) {
        self.pushed%@.hidden , buttonName = false;} 
```

这是一个愚蠢的例子，但我需要它来处理太复杂的事情，无法在这里写下来。

提前致谢。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:02:55.710

更改所有按钮标题，例如 Car、Van、Bus 等，然后将其作为所有按钮的内部方法，

```
-(IBAction) buttonPressed:(UIButton *) pressedButton{
    NSString *buttonName = pressedButton.titleLabel.text;
    UILabel *label = [self valueForKey:[NSString stringWithFormat:@"pushed%@", buttonName]];
    label.hidden = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:43:14.877

像这样？

```
if ([ButtonName isEqualToString:@"Car"]) {
        self.pushedCar.hidden = !self.pushedCar.hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:43:38.163

使用 KVC

```
id name = nil
if(myButtonCurrentTitle isEqualTo:@"Car"]) name = @"Car";

assert(name);
UILabel *label = [self valueForKey:[NSString stringWithFormat:@"pushed%@", name]];
assert([label isKindOfClass:[UILabel class]]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:43:50.210

如果您的意思是“我如何获得与字符串相关的对象”，则将按钮放入 NSDictionary 可能是最简单的，这样您就可以执行类似的操作

```
MyButton *button = [buttonDict objectForKey:@"Car"]; 
```

但老实说，您的示例代码没有多大意义，所以我发现很难知道如何为您编写一个像样的示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T11:46:24.170

如果我理解正确，您需要不同的按钮和标签（例如汽车、马、猫）。

在这种情况下，创建一个 NSDictionary，其键为 buttonName (@"Car")，其对象为标签。

你可以这样写：

```
UILabel *label = [myDictionary objectForKey:buttonName];
label.hidden = NO; // or label.hidden = !label.hidden; 
```

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T11:50:42.990

我认为您正在尝试使用[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)来获取基于任意字符串的按钮实例。

您首先需要使用属性公开按钮实例：

```
@interface MyClass : UIView
{
    // These are connected using Interface Builder
    IBOutlet UIButton *carButton;
    IBOutlet UIButton *busButton;
    IBOutlet UIButton *bikeButton;
}

@property (string, nonatomic, readonly) UIButton *carButton;
@property (string, nonatomic, readonly) UIButton *busButton;
@property (string, nonatomic, readonly) UIButton *bikeButton;

@end 
```

您可以使用以下方法获取按钮的实例：

```
NSString *thing = "@car";
UIButton *button = [self valueForKey:[NSString stringWithFormat:@"%@Button", thing]];
[button setHidden:YES]; 
```

# jquery - 两个表格单元格的商

> ID：15088172
> 
> 赞同：0
> 
> 时间：2013-02-26T11:38:25.567
> 
> 标签：jquery

我有一个简短的问题，你可以帮助我。我对 JQuery 比较陌生，但对 HTML 相当熟悉，因为它的价值。

我正在尝试找到一种方法来自动计算两个表格单元格的商，然后将其显示在第三个表格单元格中，最好四舍五入到小数点后一位。所以是这样的：

```
 <table>
     <tr>
          <td class='divisor'>2</td>
          <td class='dividend'>4</td>
          <td class='quotient'>2</td>
     </tr>
 </table> 
```

我不希望用户输入这些数据，但如果我不必每次更改数据时都进行计算，那就太好了。是否有捷径可寻？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:44:44.890

一个基本的例子。我遗漏了一些部分，因此您必须自己考虑一下:-)如果您有任何问题，请告诉我

```
$(function(){  //when the DOM is ready

    var divisor = parseInt($('td.divisor').val()); //parse the string to an int
    // get the other value and divide here

    var rounded = Math.round( yourResult * 10 ) / 10; //round the result to one decimal

    $('td.quotient').val(rounded); //set the new value

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:44:49.583

这应该有效：

```
var dividend = $("td.dividend").text();
var divisor = $("td.divisor").text();
var quotient = Math.floor(dividend/divisor);
$("td.quotient").text(quotient); 
```

在这里工作 jsFiddle [http://jsfiddle.net/ApfJz/5/](http://jsfiddle.net/ApfJz/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:45:41.613

```
$(document).ready(function() {
    var quotient = $('.dividend').html() / $('.divisor').html();
    $('.quotient').html( parseFloat(quotient).toFixed(1) );
}); 
```

这里的例子：http: [//jsfiddle.net/XCjXs/](http://jsfiddle.net/XCjXs/)

# android - Android：如何将集成 Twitter 帐户的权限设置为仅推文/发布到时间线？

> ID：15088175
> 
> 赞同：2
> 
> 时间：2013-02-26T11:38:35.813
> 
> 标签：android, twitter, twitter-oauth

我刚刚将 Twitter 和 OAuth 集成到我的 Android 应用程序中，现在我想改变我的应用程序的权限。而不是我的截图中列出的所有权利，**我只想让我的应用程序在时间轴上发布推文**。（不想吓到人们，因为我不想访问他们的个人资料......） ![在此处输入图像描述](../Images/06a02b41722c2a320235f893bf35e99a.png)

但是我对 twitter-API 有点迷茫，到目前为止我发现的唯一一件事是在应用程序设置中将其更改`Application Type`为“读取”`Read & Write`或`Read & Write and Access direct messages`.

所以问题是：**如何限制我的应用程序的权限？**

```
//f.e. Integration Facebook SDK: here you can set different types,like
// "only allow application to post something in your name"...
.setPublishPermissions(Arrays.asList("publish_stream")) 
```

# ruby-on-rails - 是否有任何库来管理 Rails 应用程序的数据库字段中的 json 内容？

> ID：15088178
> 
> 赞同：2
> 
> 时间：2013-02-26T11:38:51.583
> 
> 标签：ruby-on-rails, ruby, json

我有一个管理表中的 json 字段的 rails 2 应用程序。它需要：

*   读取 json
*   将 json 转换为模型属性和表单字段
*   将对表单字段的编辑保存到 json 字段中
*   为某些 json 值添加验证
*   适用于多种机型

目前，我有一个库文件，它手动添加方法以提取并保存到 json 中，如下所示：

```
module Configuration
  def configuration_json
    configuration? ? JSON.parse(self.configuration) : {}
  end

  def some_json_value
    if !self.configuration.nil? && configuration_json["parentKey"]
      configuration_json["parentKey"]["someJsonValue"]
    end
  end

  def some_json_value=(val)
    new_config = configuration_json.deep_merge({
      "FeatureConfiguration" => { "someJsonValue" => val }
    })
    self.configuration = new_config.to_json
  end

  def some_json_value_validation
    # ...
  end
end 
```

在模型中，我包括了这个

```
class SomeModel < ActiveRecord::Base
  include Configuration
  validate :some_json_value_validation

  # ...
end 
```

有没有更好/更干燥的方法？目前，当 json 结构发生变化时，它真的很笨重，因为在 rails 应用程序中有很多步骤需要修改。

我无法更改 json 字段的使用，因为它用于配置另一个应用程序，这是 rails 应用程序支持的主要应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T22:47:42.127

最好的方法是制作一个配置模型，并简单地制作一个`to_json`构建正确 json 对象的方法。

如果您真的想解析 json 并将其转换回每个操作，您可以创建一个助手来为您创建方法，例如`json_attr_accessor`

例子：

```
module Configuration

  def configuration_json
    configuration.present? ? JSON.parse(configuration) : {}
  end

  module ModelExtensions

    def json_attr_accessor(*symbols)
      symbols.each do |sym|

        key = sym.to_s.camelize(:lower)

        define_method(sym) do
          ['FC', key].reduce(configuration_json) do |json, key|
            json and json[key]
          end
        end

        define_method("#{sym}=") do |val|
          hash = configuration_json.deep_merge 'FC' => { key => val }
          self.configuration = hash.to_json
        end

      end
    end

  end

  def self.included(base)
    base.extend ModelExtensions
  end

end 
```

在模型中：

```
class SomeModel < ActiveRecord::Base
  include Configuration
  json_attr_accessor :some_json_value
end 
```

这是自定义验证器的帮助链接：

[http://www.perfectline.ee/blog/building-ruby-on-rails-3-custom-validators](http://www.perfectline.ee/blog/building-ruby-on-rails-3-custom-validators)

# javascript - 使用 Facebook JavaScript SDK 时 SPDY 出现 Chromium 错误

> ID：15088179
> 
> 赞同：1
> 
> 时间：2013-02-26T11:38:52.143
> 
> 标签：javascript, android, facebook, sdk, spdy

我使用适用于 iOs 和 Android 的 Facebook Javascript SDK 开发了一个带有 HTML5 + Cordova (Phonegap) 的移动应用程序。我这样实现它：

```
FB.api(
{
    method: 'fql.query',
    query: 'SELECT uid, name, birthday_date FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())'
},
function(response) {
        console.log(response);
        // some code
}); 
```

它在 Android 和 iOS 上运行了几个月，直到昨天，在 Android 上。api调用在做，回调函数没有被调用的时候会报错。

这是 eclipse 中 LogCat 的错误：

> 02-26 12:27:10.526: W/chromium(22379): external/chromium/net/spdy/spdy_session.cc:1246: [0226/122710:WARNING:spdy_session.cc(1246)] 无法解析 Spdy 控制帧标题。02-26 12:27:10.526: D/chromium(22379): 未知的铬错误: -337 02-26 12:27:10.526: W/chromium(22379): external/chromium/net/spdy/spdy_session.cc: 1058: [0226/122710:WARNING:spdy_session.cc(1058)] 接收到无效流 1 的数据帧 02-26 12:27:10.526: W/chromium(22379): external/chromium/net/spdy/spdy_session.cc :1058: [0226/122710:WARNING:spdy_session.cc(1058)] 接收到无效流 1 的数据帧

调用查询Facebook（使用协议spdy）时似乎是android浏览器Chromium的错误

有人有想法吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:58:31.793

看到一样的东西！

```
/chromium(1942): external/chromium/net/spdy/spdy_session.cc:1246: [0307/015242:WARNING:spdy_session.cc(1246)] 无法解析 Spdy 控制帧头。
W/chromium（1942）：external/chromium/net/spdy/spdy_session.cc:1058: [0307/015242:WARNING:spdy_session.cc(1058)] 接收到无效流 21 的数据帧
W/chromium（1942）：external/chromium/net/spdy/spdy_session.cc:1058: [0307/015242:WARNING:spdy_session.cc(1058)] 接收到无效流 21 的数据帧
D/铬（1942）：未知铬错误：-337

```

发现关于 FB 实施 SPDY 的新闻没有太多新闻：http: [//zoompf.com/2013/03/facebook-adds-spdy-support](http://zoompf.com/2013/03/facebook-adds-spdy-support)

很惊讶我们没有看到更多的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:29:07.803

1.  在相同的情况下，PhoneGap，Android，我对类似的代码有同样的问题
2.  解决方案是切换到 Graph API。使用 Graphi API 将进行相同的调用

    ```
     FB.api('/me/friends', { fields: 'id, name, gender, username' }, function (response) { ... }); 
    ```

3.  有许多警告可能不适用于您，但适用于我

字段名称不同。“sex”现在是“gender”，例如 Graph API 没有 is_app_user 字段的直接模拟。如果将其添加到字段列表中，则会出现错误。有一种解决方法专门询问安装该应用程序的用户

作为响应实现了分页。所以响应的结构有点不同。如果你过去将处理数据传递给函数，则传递的不是“response”而是“response.data”，并注意“response.paging”，看看是否有更多的朋友可以通过额外的调用添加。

# java - jsf 有 onrerender 事件吗？

> ID：15088180
> 
> 赞同：0
> 
> 时间：2013-02-26T11:38:53.860
> 
> 标签：java, jsf, jsf-2

我有一个***a4j:outputPanel***。我通过单击页面中的另一个位置来重新呈现它，并且我想在重新呈现时触发一个动作`outputPanel`。

是否有 onrerender 事件或什么？我已经尝试过，我已经搜索过，但我不能做我想做的事。我知道我可以使用 oncomplete 事件来触发重新渲染操作，但这就是我不想做的事情。

无论如何，你有什么想法吗？我不需要确切的解决方案，只是想法可以帮助我找到解决方法。

编辑：对不起，我要触发的动作是 js 动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:00:01.027

尝试放置

```
<f:event listener="#{myBean.myAction}" type="preRenderComponent"></f:event> 
```

在你的`outputPanel`...

```
public void myAction(ComponentSystemEvent componentSystemEvent) {  
   //some code goes here...
} 
```

* * *

如果你想从你的托管 bean 方法调用 js 代码，你可以使用[Primefaces - RequestContext](http://www.primefaces.org/showcase/ui/requestContext.jsf)

```
public void myAction(ComponentSystemEvent componentSystemEvent) {  
    RequestContext requestContext = RequestContext.getCurrentInstance();  
    requestContext.execute("alert('wow')");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:11:05.093

如果您确定动作会重新呈现组件，那么为什么不将其添加到动作本身中。您还可以使用 Daniel 建议的方法并从您的 Java 方法中添加 JavaScript 调用。Icefaces 带有一个 JavaScript 上下文类，我相信richfaces 也会有类似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:46:09.647

Try the `onbeforedomupdate` of the `<a4j:ajax/>` component

```
<a4j:outputPanel>
   <a4j:ajax onbeforedomupdate="yourJs();"/>
</a4j:outputPanel> 
```

# similarity - 使用模糊匹配聚合字符串

> ID：15088182
> 
> 赞同：1
> 
> 时间：2013-02-26T11:39:01.420
> 
> 标签：similarity, fuzzy-comparison

假设我有一个错误日志，并且我希望获得每种错误*类型*的计数。我已经通过按错误消息分组进行了简单的计数，但是许多消息包含特定于上下文的信息，这意味着尽管是由相同的错误引起的，但我不能简单地按消息文本进行分组。

一些示例，其中斜体部分因错误实例而异：

*   未能在*/primate/gorilla*页面上检索用户*188a9e12-6797-4d9b-8adf-4588b2435326 的结果*
**   未能在*/primate/monkey*页面上检索用户*08c610d2-27d2-4f97-bf60-d5b3010e8dd6 的结果**

 **我想使用一些模糊逻辑对所有此类消息进行分组。我知道 Levenshtein 距离算法对于这种类型的处理很有价值，但我猜原始距离没有价值，因为它没有根据字符串的长度加权（在 1000 个字符的字符串中，30 的距离不太重要，而 30 100)。

所以我的目标是遍历消息列表并获得某种模糊匹配的计数。为每个模糊匹配的消息生成某种一致的密钥可能会有一个附带问题？我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-23T10:09:21.490

我会*尝试*[q-gram 距离](http://www.joyofdata.de/blog/comparison-of-string-distance-algorithms/) 。然后，两个字符串之间的距离由它们共有的[N-gram的数量决定。](http://en.wikipedia.org/wiki/N-gram)N 必须足够大，以使 N-gram 表示相关细节。N=4 可能是一个很好的开始。

 *进一步的字符串距离源自 N-gram 的概念：fx cosine 和 Jaccard 距离。

[本文](http://www.joyofdata.de/blog/comparison-of-string-distance-algorithms/)解释了 R 上下文中不同类型的字符串距离算法。***

# parameters - verilog：在case语句中定义参数值？

> ID：15088183
> 
> 赞同：0
> 
> 时间：2013-02-26T11:39:03.760
> 
> 标签：parameters, verilog, fpga, hdl

我需要定义依赖于其他一些输入的参数值。我尝试了以下方法，但它不起作用。还有其他替代方法吗？

```
 module (...)
...
input sel ;
..
case (sel)
0: parameter data1 =5;
1: parameter data1 =5;
endcase
... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:08:14.360

参数是常量，因此不能在运行时更改，并且不适用于动态结构。

如果您需要根据输入设置值，这些值在执行期间会发生变化，您只需要定义正确宽度的线或寄存器。

或者，对于常量，您可以在向下传递值的地方使用分层参数，但它们必须全部基于参数或常量。

```
module top();
  localparam DATA_WIDTH = 32;

  middle #(
    .DATA_WIDTH( DATA_WIDTH )
  ) middle_0();

endmodule

module middle #(
  parameter DATA_WIDTH = -1

  //DO NOT MODIFY
  parameter DATA_OUT_WIDTH = DATA_WIDTH + 10;
)(
  output [DATA_OUT_WIDTH-1:0] data_tx
);
endmodule 
```

对于您的情况：

```
module (...)
...
input sel ;
..
  reg [3:0] data1;
  always @*
    case (sel)
      0: data1 =5;
      1: data1 =5;
    endcase
  end

endmodule 
```

# ruby-on-rails-3 - 我将如何建立这种 Rails 关系？

> ID：15088185
> 
> 赞同：0
> 
> 时间：2013-02-26T11:39:16.077
> 
> 标签：ruby-on-rails-3

我有三个 rails 模型：Usage(month, amount), Project(title, description) & Project_savings(amount)。

每个项目将有一个 project_saving.amount 与每个 usage.month 实例相关联。因此，每次使用将有_many project_savings（每个项目一个），每个项目将有_many project_savings（每个使用月一个）。每个项目的每个 project_saving.amount 等于该月的 usage.amount。

我试图这样做：

```
Project has_many :project_savings,
        has_many :usages, through :project_savings

Usage   has_many :project_savings
        has_many :projects, through :project_savings

Project_saving belongs_to :usage, :project 
```

我会将计算代码的代码放在 project_savings 模型中吗？如果我将以下内容放入我的 ProjectSaving 模型中：

```
Project.all.each do |p|
  Usage.all.each do |u|
    p.create_project_saving(amount: u.amount)
  end
end 
```

这会将usage_id和project_id自动关联到project_saving，还是我需要手动输入`p.create_project_saving(usage_id:u.id, amount:u.amount)`？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:42:10.003

老实说，你的文字很混乱。

我认为重要的第一步是阅读有关关联的 railsguide：

[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

现在关于“我应该在这里设置一个：通过 somehwere 吗？”的问题：

如果您有一个独立实体的关系模型，则使用 has_many :through 关系。简单地说，只有当你真的想为关系本身添加一些东西时，你才应该使用 has_many :through。否则，您将使用更简单的 has_and_belongs_to_many 关联（带有连接表）。

如果您希望我对您的帖子给出更具体的答案，您应该真正考虑您希望您的模型如何相互交互。例如，Project_saving 是与 Usage 和 Project 相关还是仅属于 Project？等等，你的描述让你很难理解你真正想让你的模型做什么。

# opencl - 使用 mingw 编译 opencl 应用程序失败

> ID：15088189
> 
> 赞同：0
> 
> 时间：2013-02-26T11:39:18.873
> 
> 标签：opencl

我用过以下

```
mingw32-gcc -std=c99 -Wall -o vec_addition vec_addition.c -I"c:\Program Files\ATI Stream\include" -L"c:\Program Files\ATI Stream\lib\x86" -lOpenCL 
```

但我不断得到

> c:\Program Files\ATI Stream\include/CL/cl_platform.h:75:1: 错误：未知类型名称 'int8_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:76:1:错误：未知类型名称 'uint8_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:77:1: 错误：未知类型名称 'int16_t' c:\Program Files\ATI Stream\include/CL/ cl_platform.h:78:1: 错误: 未知类型名称 'uint16_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:79:1: 错误: 未知类型名称 'int32_t' c:\Program Files \ATI Stream\include/CL/cl_platform.h:80:1: 错误: 未知类型名称 'uint32_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:81:1: 错误: 未知类型名称'int64_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:82:1: 错误：未知类型名称 'uint64_t' c:\Program Files\ATI Stream\include/CL/cl_platform.h:83:1：错误：未知类型名称“uint16_t”

我还使用 reimp 工具从相应的库生成 libopencl.a。

任何建议将不胜感激。

# python - 使用 pandas 加载过滤的 .tda 文件的最简单方法是什么？

> ID：15088190
> 
> 赞同：2
> 
> 时间：2013-02-26T11:39:19.773
> 
> 标签：python, pandas, large-files

Pandas 有很好的`.read_table()`功能，但是大文件会导致 MemoryError。
由于我只需要加载满足特定条件的行，因此我正在寻找一种仅加载这些行的方法。

这可以使用临时文件来完成：

```
with open(hugeTdaFile) as huge:
    with open(hugeTdaFile + ".partial.tmp", "w") as tmp:
        tmp.write(huge.readline())  # the header line
        for line in huge:
            if SomeCondition(line):
                tmp.write(line)

t = pandas.read_table(tmp.name) 
```

有没有办法避免这样使用临时文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:18:51.177

您可以使用 chunksize 参数返回一个迭代器

看到这个： http: [//pandas.pydata.org/pandas-docs/stable/io.html#iterating-through-files-chunk-by-chunk](http://pandas.pydata.org/pandas-docs/stable/io.html#iterating-through-files-chunk-by-chunk)

*   根据需要过滤块帧
*   将过滤后的内容附加到列表中
*   连接在最后

（或者你可以将它们写到新的 csvs 或 HDFStores 或其他）

# mysql - 替换成 ... 在重复密钥更新时

> ID：15088200
> 
> 赞同：0
> 
> 时间：2013-02-26T11:39:59.720
> 
> 标签：mysql, sql-update

我有一个对两个字段具有唯一约束的表。

```
CREATE TABLE `targets` (
    `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `client` SMALLINT(6) UNSIGNED NOT NULL,
    -- some more fields here
    `order_column` INT(10) NULL DEFAULT NULL,
    PRIMARY KEY (`id`),
    UNIQUE INDEX `client_order_column` (`client`, `order_column`)
) 
```

现在我想更新它，`order_column`它将包含增量整数，从`0`每个`client`值开始。我正在尝试这样做：

```
replace into targets (
    `id`,
    `client` ,
    `order_column`
) 

(select     
    `id`,
    `client` ,
    0 as order_column from targets
    )
on duplicate key update
    order_column = order_column + 1 
```

但`syntax error`在最后一行。我无法意识到，出了什么问题，所以，请帮助我。

顺便说一句：有没有更好的方法来达到预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:41:44.707

```
INSERT INTO targets (id, client, order_column) 
SELECT  a.id, a.client , 0 as order_column 
FROM    targets a
        ON DUPLICATE KEY
        UPDATE order_column = a.order_column + 1 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# joomla - 在 Joomla 1.5 中搜索菜单项/标题

> ID：15088205
> 
> 赞同：1
> 
> 时间：2013-02-26T11:40:16.563
> 
> 标签：joomla, joomla1.5

我继承了一个基于 Joomla 1.5 构建的系统，我无法更新到更新的版本，所以我现在必须凑合着做。

在了解了菜单和 url 系统之后，我试图弄清楚是否有一种简单的方法可以只搜索菜单标题，基本上是我网站中的页面，而不仅仅是文章。

我问的原因是我有一些页面有多个文章（类别博客布局）和多个模块，当前的搜索结果是正确的，但是当点击时将只返回该文章，而不是围绕它的页面的其余部分。

有人可能会告诉我有一个复选框可以在某处执行此操作，或者代码中有一个简单的 hack，但是不熟悉 Joomla 我不知道如何去做，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-30T13:18:58.353

如果你开发你的菜单结构很像你的数据，你会让你的生活更轻松，你的 Joomla 网站会更好。

这意味着为每篇文章或博客或类别视图创建一个菜单项，帮助 Joomla 确定视图的 ItemID。有了这个，它就可以更好地理解要用它渲染哪些模块。

或者说另一种方式...为每个文章或类别视图创建一个菜单项。您不必在网站上展示它们。Joomla 将在呈现页面时查找关联的菜单项。有了一个菜单项，您可以通过模块的属性来指定与它一起显示的模块。

虽然我与 NoNumber 没有任何关系，但我强烈建议下载 Joomla1.5 版本的 Advanced Module Manager。这将使您更好地控制模块放置。

请注意，这种方法可能会改变您文章的 URL 结构，从而导致某些内容出现 404。您可能需要下载名为 ReDirect 的移植 Joomla2.5 组件。这将帮助您管理这些 404。

# javascript - Mojolicious，Javascript的布局和定位

> ID：15088206
> 
> 赞同：2
> 
> 时间：2013-02-26T11:40:18.567
> 
> 标签：javascript, jquery, perl, mojolicious, mojo

我想在我的主要布局（即jquery）中加载我的大部分脚本。现在根据我的理解，将脚本放置在我的 html 页面底部是最佳实践。

但是，如果我们像这样将脚本放在布局页面的底部。

```
layout/default.html.ep

<!doctype html>

<html>
<head><title><%= title %></title></head>
<body><%=content %></body>
</html>
<script src="js/jquery.min.js" type="text/javascript"></script> 
```

然后在一个页面中使用这个布局，该页面有自己的依赖于 jquery 的 javascript，就像这样。

```
testscript.html.ep
%layout 'default';
%title 'Script Test';

<p>Main Page</p>

<script type="text/javascript">
$(document).ready(function(){
alert('fails if jquery is not loaded');  
});
</script> 
```

您最终会得到这样的页面。请注意，对 jquery 的引用低于我依赖它的代码。

```
<!doctype html>

<html>
<head><title>Script Test</title></head>
<body>
<p>Main Page</p>

<script type="text/javascript">
$(document).ready(function(){
alert('fails if jquery is not loaded');
});
</script>
<script src="js/jquery.min.js" type="text/javascript"></script>
</body>
</html> 
```

处理这种情况的最佳方法是什么？

将我的 javascript 引用放在布局的顶部？我认为在使用此布局的每个页面中添加 jquery 的脚本引用不是最佳做法？

任何帮助深表感谢。我对这一切都非常陌生。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T20:41:37.917

抱歉，我们错过了这个，大多数使用 Mojolicious 的人都遵循 Perl 标签。

要回答您的问题，请使用[`content_for`](https://metacpan.org/module/Mojolicious%3a%3aPlugin%3a%3aDefaultHelpers#content_for)帮助程序将物品放置在您想要的位置。请注意，这也允许您将导入放在依赖模板的顶部，或者如果您愿意，也可以放在底部！我有一个下面的例子。我还建议为所有页面需要的标准 JS 导入使用单独的模板，但这只是为了清楚起见。

```
#!/usr/bin/env perl

use Mojolicious::Lite;

any '/' => 'testscript';

app->start;

__DATA__

@@ layouts/default.html.ep

<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
  </head>
  <body>
    %= content
    %= include 'common_js'
    %= content_for 'js_imports'
  </body>
</html>

@@ common_js.html.ep
<script src="js/jquery.min.js" type="text/javascript"></script>

@@ testscript.html.ep
%layout 'default';
%title 'Script Test';

% content_for 'js_imports' => begin
  %= javascript begin
    $(document).ready(function(){
      alert('fails if jquery is not loaded');  
    });
  % end
% end

<p>Main Page</p> 
```

当您访问 '/' 路线时，这会产生

```
<!DOCTYPE html>
<html>
  <head>
    <title>Script Test</title>
  </head>
  <body>

<p>Main Page</p>

    <script src="js/jquery.min.js" type="text/javascript"></script>

      <script>//<![CDATA[

    $(document).ready(function(){
      alert('fails if jquery is not loaded');  
    });

//]]></script>
  </body>
</html> 
```

# javascript - IE8 - html解析错误：无法在子元素之前修改父容器元素

> ID：15088208
> 
> 赞同：0
> 
> 时间：2013-02-26T11:40:20.480
> 
> 标签：javascript, jquery, internet-explorer-8, cross-browser

很抱歉发布一个过去已经处理过多次的问题，但我已经查看了我可以在堆栈溢出中找到的答案，但仍然无法修复它。

我的问题与其他人的问题相同（例如[HTML parsing error](https://stackoverflow.com/questions/1365134/html-parsing-error)）。我正在使用 jQuery，这导致了错误。我已经尝试过这样的修复[，](http://albertech.net/2012/02/fix-for-html-parsing-error-unable-to-modify-the-parent-container-element-before-the-child-in-ie8/)它建议我将我的 jQuery 包装在 中`$(document).ready(function(){ }`，但这并不能解决问题。

我在我的文档的正文标记之前包含了一个 php 文件，它将标题设置为 JavaScript，设置了一些变量，然后需要两个 .js 文件（其中包含各种函数、函数调用和事件触发器）。我尝试将整个 JS 输出包装在文档就绪函数中，但仍然遇到同样的问题。

我也尝试过仅使用函数调用或任何看起来像在加载文档之前尝试访问 DOM 元素的函数（即函数调用访问 DOM 元素但不访问函数本身的函数）但这不起作用任何一个。

我想知道（i）是否有任何理由将我的所有 jquery 包装在文档就绪函数中不能解决问题（如下所示）？(ii) 有没有办法调试到底是什么导致了错误？

谢谢！

```
echo '$(document).ready(function() {
'; 

    echo 'var station_report_pref = "' . $station . '";
var dropdowns_choose = "'.get_string('dropdowns_' . $choose_or_all, 'theme_pichincha').'";
var dropdowns_ok = "'.get_string('dropdowns_ok', 'theme_pichincha').'";
var preset_main_dd = false;
var sys_admin = false;
';

    if ($adminrole == 'siteadmin') {
        echo 'var sys_admin = true;
';
    }

    if ($_GET['pagetype'] == "admin-user-editadvanced-create") {
        // This is a create new user page
        echo 'preset_main_dd = true;
';
    }

    require_once 'dropdown.js';
    require_once 'dropdown-reports.js';

echo '
});'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T12:04:44.530

这是 IE8 中的一个错误。您可以下载 Internet Explorer KB2360131 的累积安全更新来解决此问题。

[http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=27630](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=27630) (Windows XP)

或者

[http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=27622](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=27622) (Windows Vista)

# url - 没有在 Ext.TabPanel 自动加载中打开 URL？

> ID：15088214
> 
> 赞同：2
> 
> 时间：2013-02-26T11:40:42.883
> 
> 标签：url, extjs, autoload, tabpanel

```
 Ext.onReady(function(){

var tabs = new Ext.TabPanel({
    renderTo: Ext.getBody(),
    enableTabScroll: true,
    activeTab: 0,
    items: [
            {
                title: 'Просмотр информации',
                autoLoad:{url: 'tab1.htm', scripts : true}
            },{
                title: 'Редактирование',
                autoLoad:{url: 'tab3.htm', scripts : false}
               }
    ]

  });

}); 
```

如果我打开第二个选项卡或其他选项卡，则会显示此错误：

> 无法读取 null 的属性“dom”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T20:29:10.937

你用的是 Witch Ex JS 版本吗？如果它> 4.0，我认为你应该写这样的东西：

```
 var tabs = new Ext.TabPanel({
    renderTo: Ext.getBody(),
    enableTabScroll: true,
    activeTab: 0,
    items: [
            {
                    title: 'Просмотр информации',
                    autoLoad: true,
                    autoShow: true,
                    url: 'tab1.htm', 
                    scripts : true
            },{
                    title: 'Редактирование',
                    autoLoad: true,
                    autoShow: true,
                    url: 'tab1.htm', 
                    scripts : false
               }
    ]

  }); 
```

# templates - Handlebars.js 如果块助手 ==

> ID：15088215
> 
> 赞同：45
> 
> 时间：2013-02-26T11:40:45.360
> 
> 标签：templates, handlebars.js

您将如何更改以下代码以使其正常工作？问题是 this == 'some message' 表达式：

```
<ul>
  {{#each errors}}
    {{#if (this == 'some message') }}
    <li>Status</li>
    {{else}}
    <li>{{this}}</li>
    {{/if}}
  {{/each}}
</ul> 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-26T17:05:04.960

最简单的事情是添加一个自定义`if_eq`助手：

```
Handlebars.registerHelper('if_eq', function(a, b, opts) {
    if(a == b) // Or === depending on your needs
        return opts.fn(this);
    else
        return opts.inverse(this);
}); 
```

然后调整您的模板：

```
{{#if_eq this "some message"}}
    ...
{{else}}
    ...
{{/if_eq}} 
```

演示：http: [//jsfiddle.net/ambiguous/d4adQ/](http://jsfiddle.net/ambiguous/d4adQ/)

如果您的`errors`条目不是简单的字符串，那么您可以向它们添加“这是一些消息”标志并使用标准`{{#if}}`（请注意，将属性直接添加到字符串不会很好）：

```
for(var i = 0; i < errors.length; ++i)
    errors[i] = { msg: errors[i], is_status: errors[i] === 'some message' }; 
```

和：

```
{{#if is_status}}
    <li>Status</li>
{{else}}
    <li>{{msg}}</li>
{{/if}} 
```

演示：http: [//jsfiddle.net/ambiguous/9sFm7/](http://jsfiddle.net/ambiguous/9sFm7/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-07T09:44:12.527

老问题，但如果你使用 Elving 的[Swag Handlebars 助手库](https://github.com/elving/swag)，你可以使用助手`is`和`isnt`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-30T08:41:53.380

这也可以通过使用 Handlebars [Subexpressions](http://handlebarsjs.com/expressions.html#subexpressions)来实现。

模板 -

```
 <script id="tmplStatus" type="text/x-handlebars">
        <ul>
            {{#each errors}}
                {{#if (is_status this 'some message')}}
                    <li>Status</li>
                {{else}}
                    <li>{{this}}</li>
                {{/if}}
            {{/each}}
        </ul>
    </script> 
```

Javascript -

```
var errors = [
        'Where is pancakes house?',
        'some message',
        'One cent stamp'
    ];

    Handlebars.registerHelper('is_status', function(msg, matchMsg, options) 
    {
        if(msg === matchMsg)
            return true;
        else
            return false;
    });

    var tmplStatus = Handlebars.compile($('#tmplStatus').html()),
        domStatus = tmplStatus({ errors: errors });
    $('body').append(domStatus); 
```

工作演示：http: [//jsfiddle.net/techgeeek/b99qwtpw/](http://jsfiddle.net/techgeeek/b99qwtpw/)

# mysql - 从两张表中计算出测验分数

> ID：15088216
> 
> 赞同：0
> 
> 时间：2013-02-26T11:40:46.370
> 
> 标签：mysql

我有 2 个表，一个定义了测验的问题，另一个表是对测验问题的回答。

第一个表的结构如下

```
questionID attribute value
1          title     some textQ1
1          option1   some text
1          option2   some text
1          option3   some text
1          correct   2
2          title     some textQ2
2          option1   some text
2          option2   some text
2          option3   some text
2          correct   1,2 
```

第二个表有来自用户的回复

```
userID   questionID   value
user1    1            3
user2    1            2
user3    1            2
user3    2            1
user3    2            2
user2    2            3 
```

然后我希望能够获得每个用户的分数，例如每个正确答案 1 分。

所以数据集看起来像

```
user    score
user3   3
user2   1
user1   0 
```

这是否可以在 1 个查询中完成，然后允许多个问题条目和多个用户？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:05:20.810

会不会是你要找的这个？

[SQL 演示](http://sqlfiddle.com/#!8/41eed/13)

```
select r.userid, 
sum(case when find_in_set(r.value, q.value) then 1
     else 0
     end) as score   
from responses r
left join questions q
on r.questionid = q.questionid
where q.attribute = 'correct'
group by r.userid
order by score desc
;

| USERID | SCORE |
------------------
|  user3 |     3 |
|  user2 |     1 |
|  user1 |     0 | 
```

# android - 阅读 Android 1.6 中的 NMEA 语句？

> ID：15088218
> 
> 赞同：0
> 
> 时间：2013-02-26T11:40:52.963
> 
> 标签：android, gps, nmea

有没有办法在 Android 1.6 中阅读 NMEA 句子？我看到 GpsStatus.NmeaListener 需要 API 级别 5 或更高级别，但我希望有人知道在级别 4 上执行此操作的聪明方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T14:47:58.870

不，但你还没有说你想要 NMEA 做什么，或者什么句子。

我没有成功使用 GpsStatus.NmeaListener 在我的 2.1 设备上获取 NMEA（它应该有一个工作版本）。但另一方面，我已经编写了代码（在 Mintoris Basic 中，但它非常简单）从受限运行时提供的简单 GPS 数据构建三个 NMEA 语句。（我的目的是通过蓝牙发送 NMEA；如果愿意，欢迎您使用代码。）

麦克风。

# ruby - RubyMine 5.0 需要一个新库

> ID：15088223
> 
> 赞同：0
> 
> 时间：2013-02-26T11:41:05.190
> 
> 标签：ruby, watir, rubymine

我想在我的 Ruby 程序中使用 Watir，就像这样

```
require 'watir'
ie = Watir::IE.new
ie.goto 'www.google.com' 
```

它运作良好，但当我输入“即”时没有自动完成。. 我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:15:34.747

确保 RubyMine 识别外部库。如果您使用的是 Bundler 支持的项目（例如 Rails 应用程序），请转到`Tools > Bundler > Install`.

否则，从项目设置中将 gem 添加到项目中。

# .net - 具有自动属性名称实现的 MVVM INotifyPropertyChanged

> ID：15088225
> 
> 赞同：2
> 
> 时间：2013-02-26T11:41:08.970
> 
> 标签：.net, mvvm, inotifypropertychanged

据我了解，我们可以在 MVVM 风格的应用程序中使用 INofityProperty，其代码类似于以下

```
 object _SelectedPerson;
    public object SelectedPerson
    {
        get
        {
            return _SelectedPerson;
        }
        set
        {
            if (_SelectedPerson != value)
            {
                _SelectedPerson = value;
                RaisePropertyChanged("SelectedPerson");
            }
        }
    } 
```

现在，我看到了[Josh Smith 的出色示例](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，他实现了额外的代码来捕获如果开发人员键入无法识别的属性名称（例如拼写错误）会发生什么！

如果您讨厌这个，请告诉我，但是有一种方法可以从堆栈跟踪中获取方法名称。所以，我们可以改为实现类似的东西

```
 object _SelectedPerson;
    public object SelectedPerson
    {
        get
        {
            return _SelectedPerson;
        }
        set
        {
            if (_SelectedPerson != value)
            {
                _SelectedPerson = value;
                RaisePropertyChanged(Current.Method);
            }
        }
    }

static class Current
{
    public static string Method()
    {
        StackTrace st = new StackTrace();
        return (st.GetFrame(1).GetMethod().Name.Split('_')[1]);            
    }
} 
```

我只能假设这将始终有效，因为 RaisePropertyChanged 事件总是发生在 Setter 中（如果我错了，请纠正我）。

现在请注意，我无法真正尝试这个，因为在工作中（我可以从事更大的项目）我仍在使用 .NET 2.0，因此 WPF/MVVM 未来还有很长的路要走但我正在自己的时间学习。

所以，我的问题来自那些使用过它的人，与删除错误选项相比，有一种方法来提醒用户错误真的更好吗（或者你觉得我错过了什么）？问题是，乔什·史密斯是公认的这一领域的专家，所以如果他建议这种方法，那么通常我会盲目地遵循，但在这种情况下，我不禁要问它，觉得有必要了解更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:01:55.243

您可以通过抽象基类执行 INotifyPropertyChanged。这可能如下所示：

```
 public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Event, fired when the Property has changed
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="propertyExpression">() => this.Param</param>
    protected virtual void OnPropertyChanged<T>(Expression<Func<T>> propertyExpression)
    {
        var propertyName = ExtractPropertyName(propertyExpression);
        OnPropertyChanged(propertyName);
    }

    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    /// <summary>
    /// Extracts the propertyname out of the Expression given
    /// </summary>
    /// <typeparam name="T"></typeparam>
    /// <param name="propertyExpression"></param>
    /// <returns></returns>
    private static string ExtractPropertyName<T>(Expression<Func<T>> propertyExpression)
    {
        var memberExpression = propertyExpression.Body as MemberExpression;
        return memberExpression == null ? null : memberExpression.Member.Name;
    }
} 
```

在 .Net 4.5 中，您可以创建如下类：

```
 public class ViewModelBase : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

在那里你只需要打电话

```
OnPropertyChanged(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:02:06.873

我已经对管理 propertychanged 通知进行了自己的实现调整。

第一部分是经典的 NotifierBase 类：

```
/// <summary>
///   Base class for all notifying objects (model adapters, view models, etc.)
/// </summary>
public abstract class NotifierBase : INotifyPropertyChanged
{
    /// <summary>
    ///   Private reference to UI thread
    /// </summary>
    private readonly System.Windows.Threading.Dispatcher _uiThread;

    /// <summary>
    ///   Default Constructor
    /// </summary>
    protected NotifierBase()
    {
        _uiThread = Application.Current != null ? Application.Current.Dispatcher : System.Windows.Threading.Dispatcher.CurrentDispatcher;
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    /// <summary>
    ///   Explicit raise of a property changed notification
    /// </summary>
    /// <param name="e"> </param>
    protected void Notify(PropertyChangedEventArgs e)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            //Debug method used to verify that the property we are about to raise is really a member of the current class instance
            CheckProperty(e.PropertyName);

            //raises the notification
            ToUiThread(() => handler(this, e));
        }
    }

    protected void Notify(params PropertyChangedEventArgs[] e)
    {
        foreach (var pcea in e)
        {
            Notify(pcea);
        }
    }

    /// <summary>
    ///   Dispatch an action to the ui thread
    /// </summary>
    /// <param name="action"> Action to dispatch </param>
    protected void ToUiThread(Action action)
    {
        if (_uiThread.CheckAccess()) //if we are already in the UI thread, invoke action
            action();
        else
        {
            //otherwise dispatch in the ui thread
            _uiThread.Invoke(action);
        }
    }

    /// <summary>
    ///   Check if the raised property is a valid property for the current instance type
    /// </summary>
    /// <param name="propertyName"> Name of the raised property </param>
    [DebuggerStepThrough]
    private void CheckProperty(string propertyName)
    {
        Type type = GetType();
        PropertyInfo[] properties = type.GetProperties(BindingFlags.Instance | BindingFlags.Public);
        if (properties.Any(pi => pi.Name == propertyName)) return;

        throw new InvalidOperationException(
            string.Format("Trying to raise notification on property \"{0}\" which does not exists on type \"{1}\"",
                          propertyName, type.Name));
    }
} 
```

基本上，此类提供： - 一个简单的 UI 线程调度功能 - 对通知的属性进行调试检查 - 多属性通知功能

第二部分是集中类，它重新组合了我的应用程序中使用的所有通知事件参数。如果一个属性被多次使用，这主要是避免在整个应用程序中使用多个相同的硬编码字符串。但是对于代码重构来说，一般来说，可维护性也更容易。

```
public class Npcea 
{

    public static readonly PropertyChangedEventArgs BarCode = new PropertyChangedEventArgs("BarCode");
    public static readonly PropertyChangedEventArgs Cap = new PropertyChangedEventArgs("Cap");
    public static readonly PropertyChangedEventArgs Code = new PropertyChangedEventArgs("Code");
    public static readonly PropertyChangedEventArgs Status = new PropertyChangedEventArgs("Status");
    public static readonly PropertyChangedEventArgs Comments = new PropertyChangedEventArgs("Comments");
} 
```

所以基本上，在您的视图模型（或适配器或其他）中，您只需通知这样的属性

```
 public ResourceStatus Status
    {
        get { return _status; }
        set
        {
            _status = value;
            Notify(Npcea.Status,Npcea.Comments);
        }
    } 
```

希望这会有所帮助

- 布鲁诺

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T11:46:18.680

使用 StackTrace 的问题是，它没有在发布版本中正确填充。为了克服这个问题，有几种方法可以修复它并使开发人员更容易引发 PropertyChanged 事件。

看到这个问题：[Implementing INotifyPropertyChanged - 是否存在更好的方法？](https://stackoverflow.com/questions/1315621/implementing-inotifypropertychanged-does-a-better-way-exist)并选择适合您的解决方案:)

就个人而言，我更喜欢以下内容：

```
// Helper method
public static PropertyChangedEventArgs CreateArguments<TOwner>(Expression<Func<TOwner, object>> Expression) {
    // determine the Name of the property using the Expression
}

// Within the view-model implementations:
private static readonly PropertyChangedEventArgs TitleProperty = CreateArguments<MyViewModel>(m => m.Title);

private string title;

public string Title {
    get { return this.title; }
    set {
        if (!string.Equals(this.title, value) {
            this.title = value;
            this.OnPropertyChanged(TitleProperty);
        }
    }
} 
```

通过使用静态成员预生成 PropertyChangedEventArgs，检查表达式树引入的开销是有限的。此解决方案是重构安全的，因此您没有任何魔术字符串。

我也喜欢使用 CallerMemberNameAttribute 的 .NET 4.5 方法，但它似乎在可移植类库中不起作用。

# log4net - 带有 EventLogAppender 的 log4net 不记录

> ID：15088226
> 
> 赞同：12
> 
> 时间：2013-02-26T11:41:11.727
> 
> 标签：log4net, log4net-configuration, log4net-appender

以下配置没有任何反应。

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <log4net>
    <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
  </log4net>
</configuration> 
```

**Form1.cs（示例）**

```
public partial class Form1 : Form
{
    private static readonly ILog log = LogManager.GetLogger(MethodBase.GetCurrentMethod().DeclaringType);

    public Form1()
    {
        InitializeComponent();

        log.Fatal("Test!");
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T18:09:32.587

您缺少根配置，因此您需要类似的东西

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
      <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net"/>
  </configSections>
  <startup>
      <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
  </startup>
  <log4net debug="true">
      <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender" >
        <applicationName value="MyApp" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
        </layout>
      </appender>

      <root>
        <level value="All" />
        <appender-ref ref="EventLogAppender" />
      </root>

  </log4net>
</configuration> 
```

另请注意，如果您的程序名为 app.exe，那么您需要一个名为 app.exe 的事件日志源。如果这不存在，那么 Log4net 将尝试创建它，但这需要管理员权限，因此您可能需要以管理员身份至少运行一次程序才能创建此事件源。为避免这种情况，通常会在安装过程中创建事件源，该过程已经以管理员身份运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T12:06:25.957

You should add:

```
[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)] 
```

in the AssemblyInfo.cs of your project. This will initialize the logger. And put the log4net into a file named log4net.config.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T00:26:26.533

确保您授予用户的写入权限：

`HKEY_LOCAL_MACHINE\SYSTEM\ControlSet001\Services\EventLog\MyApp`

如果您想添加更多记录器，则必须遵循此命名法：

```
<root name="EventLog">
  <level value="ALL"/>
  <appender-ref ref="FirstLog"/>
</root>

<logger name="FileLogger" additivity="false">
  <level value="ALL" />
  <appender-ref ref="Second_Log" />
</logger> 
```

祝你好运。

# php - 绑定变量的数量与令牌的数量不匹配

> ID：15088235
> 
> 赞同：2
> 
> 时间：2013-02-26T11:41:49.400
> 
> 标签：php, mysql

我创建了一个 php 页面，它将记录保存到数据库中，这是我编写的代码：

```
try
    {
        $bdd = new PDO('mysql:host=localhost;dbname=tp_js_php','root','');
    }
    catch(PDOException $e)
    {
        die($e->getMessage());
    }

    //Selectionner la table de clients
          $reponse = $bdd->query('Select * from client');
          $clients = $reponse->fetchAll();

try
            {
            $req = $bdd->prepare('INSERT INTO client(nomClient,PrenomClient,Adresse,Télephone,Email,Pseudo,MotDePasse) VALUES (:nom, :prenom, :adresse, :tel, :email, :pseudo, :mdp)');
            $req->execute(array(
                    ':nom' => $_POST['nom'],
                    ':prenom', $_POST['prenom'],
                    ':adresse', $_POST['adresse'],
                    ':tel', $_POST['telephone'],
                    ':email', $_POST['email'],
                    ':pseudo', $_POST['pseudo'],
                    ':mdp', sha1($_POST['mdp'])));
        }
        catch(PDOException $e)
        {
            die($e->getMessage());
        } 
```

这是我得到的错误：

```
Warning: PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in C:\xampp\htdocs\tp_fomulaire_js\insertion.php on line 21 
```

第 21 行是：`':mdp', sha1($_POST['mdp'])));`

我计算了所有参数，除了增量的 idClient 之外没有人在搞乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:43:59.070

使用此代码，您必须使用`=>`，但您使用了`,`.

```
$req->execute(array(
                ':nom' => $_POST['nom'],
                ':prenom' => $_POST['prenom'],
                ':adresse' => $_POST['adresse'],
                ':tel' => $_POST['telephone'],
                ':email' => $_POST['email'],
                ':pseudo' => $_POST['pseudo'],
                ':mdp' => sha1($_POST['mdp']))); 
```

# jquery - 根据 rightmove 价格选择使用 jquery 更改选择选项

> ID：15088243
> 
> 赞同：0
> 
> 时间：2013-02-26T11:42:04.497
> 
> 标签：jquery, select, options

嗨，我一直在寻找一些代码，这些代码可以让 rightmove 价格选择框如何工作。

基本上，您选择最低价格，并基于此，最高价格的选择框的选择选项已更改，因此初始价格是在最低价格选择框中选择的最低价格，然后填充其余最高价格选择选项从新的最低价格选择开始。

它们还具有反向功能，如果您先选择最高价格，然后选择大于所选最高价格的最低价格，它将反转 2 个选择框中的价格选项，因此最低价格变为最高价格，反之亦然-反之亦然。

我希望这是有道理的，请查看 rightmove 属性搜索以了解我的意思。

非常感谢任何帮助。

HTML

```
<div class="styled-select">
    <select id="minprice" name="minprice">
        <option value="0" selected="selected">MIN PRICE</option>
        <option value="50000">&pound; 50,000</option>
            <option value="60000">&pound; 60,000</option>
            <option value="70000">&pound; 70,000</option>
            <option value="80000">&pound; 80,000</option>
            <option value="90000">&pound; 90,000</option>
            <option value="100000">&pound; 100,000</option>
            <option value="110000">&pound; 110,000</option>
            <option value="120000">&pound; 120,000</option>
        <option value="200000">&pound; 200,000</option>
            <option value="300000">&pound; 300,000</option>
            <option value="400000">&pound; 400,000</option>
            <option value="500000">&pound; 500,000</option>
            <option value="600000">&pound; 600,000</option>
            <option value="700000">&pound; 700,000</option>
            <option value="800000">&pound; 800,000</option>
            <option value="900000">&pound; 900,000</option>
            <option value="1000000">&pound;1 million+</option>
    </select>
</div>
<div class="styled-select">
    <select id="maxprice" name="maxprice">
        <option value="0" selected="selected">MAX PRICE</option>
        <option value="50000">&pound; 50,000</option>
            <option value="60000">&pound; 60,000</option>
            <option value="70000">&pound; 70,000</option>
            <option value="80000">&pound; 80,000</option>
            <option value="90000">&pound; 90,000</option>
            <option value="100000">&pound; 100,000</option>
            <option value="110000">&pound; 110,000</option>
            <option value="120000">&pound; 120,000</option>
        <option value="200000">&pound; 200,000</option>
            <option value="300000">&pound; 300,000</option>
            <option value="400000">&pound; 400,000</option>
            <option value="500000">&pound; 500,000</option>
            <option value="600000">&pound; 600,000</option>
            <option value="700000">&pound; 700,000</option>
            <option value="800000">&pound; 800,000</option>
            <option value="900000">&pound; 900,000</option>
            <option value="1000000">&pound;1 million+</option>
    </select>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:48:41.123

```
jQuery(document).ready(function() {         
    var aux;

    if (parseInt($('#min-year').val()) > parseInt($('#max-year').val())) {
       aux = $('#min-year').val();
       $('#min-year').val($('#max-year').val());
       $('#max-year').val(aux);
}
}); 
```

我希望这会有所帮助。当用户选择小于 min-year 的 max-year 时，值将被反转

# ios - 为什么我的委托方法从未被调用？

> ID：15088244
> 
> 赞同：2
> 
> 时间：2013-02-26T11:42:17.133
> 
> 标签：ios, objective-c, core-data, delegates, master-detail

我试图在 a`TableViewController`和 a之间设置一个非常基本的委托`DetailViewController`，但从未调用过这些方法。这是我的代码：

**DetailViewController.h**

```
@protocol DetailViewControllerDelegate

- (void) detailViewControllerDidLike;
- (void) detailViewControllerDidUnlike;
- (void) detailViewControllerDidDislike;

@end 
```

**细节视图控制器.m**

```
- (IBAction) changeLikedSwitch: (id) sender
{
    UISwitch *likedSwitch = (UISwitch *) sender;
    if ([likedSwitch isOn]) {
        [_selectedQuote setIsLiked: [NSNumber numberWithBool: YES]];
        [self.delegate detailViewControllerDidLike];
    } else {
        [_selectedQuote setIsLiked: [NSNumber numberWithBool: NO]];
        [self.delegate detailViewControllerDidUnlike];
    }

    NSError *error;
    if (![[[CDManager sharedManager] managedObjectContext] save:&error]) NSLog(@"Saving changes failed: %@, %@", error, [error userInfo]);
}

- (IBAction) changeDislikedSwitch: (id) sender
{
    UISwitch *dislikedSwitch = (UISwitch *) sender;
    if ([dislikedSwitch isOn]) {
        [_selectedQuote setIsDisliked: [NSNumber numberWithBool: YES]];
        [self.delegate detailViewControllerDidDislike];
        [self dismissViewControllerAnimated: YES completion: nil];
    } else {
        [_selectedQuote setIsDisliked: [NSNumber numberWithBool: NO]];
    }

    NSError *error;
    if (![[[CDManager sharedManager] managedObjectContext] save:&error]) NSLog(@"Saving changes failed: %@, %@", error, [error userInfo]);
} 
```

**TableViewController.h 接口行：**

```
@interface TableViewController : UITableViewController <NSFetchedResultsControllerDelegate, DetailViewControllerDelegate> 
```

**表视图控制器.m**

```
- (void) detailViewControllerDidLike
{
    NSLog(@"detailViewControllerDidLike!");
    [self.tableView reloadData];
}

- (void) detailViewControllerDidUnlike
{
    NSLog(@"detailViewControllerDidUnlike!");
    [self.tableView reloadData];
}

- (void) detailViewControllerDidDislike
{
    NSLog(@"detailViewControllerDidDislike!");
    [self.tableView reloadData];
} 
```

这些方法都没有被调用。我正在尝试确定是否是因为我没有设置委托，但我不明白我该怎么做。`DetailViewController`my中没有 my 的实例`TableViewController`，那么我应该如何设置它的属性之一呢？拥有一个我不需要在类之间创建具体链接的委托不是重点吗？这里非常非常困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:47:50.507

您确实需要设置委托，以便调用委托方法。

您必须有一个同时创建 TableViewController 和 DetailViewController 的类？创建它们时，您会调用

`[myDetailViewControllerObject setDelegate:myTableViewControllerObject];`

设置委托。这是假设您已经在 DetailViewController 中定义了一个委托属性

```
@property (readwrite, weak) id<DetailViewcontrollerDelegate> delegate; 
```

代表的进一步解释：

委托的意义在于您不需要特定类型的对象，您只需要一个实现协议的对象。委托人和“委托人”之间仍然需要建立联系。如果你不想要具体的连接，那么你会想要使用 NSNotification，这是一种非常“向以太大喊，并希望有东西在听”的通信方法。

在这种情况下，委托是正确的使用方式。委托应该用于一对一的关系，NSNotification 最好用于一对N 类型的关系，其中 N 可以是 0 或更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:48:41.300

也许你忘了设置委托。在`prepareForSegue`你写：

myDetailController.delegate = 自我；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:00:47.767

请确保为代表做好以下事情。

创建属性

```
@property(nonatomic, assign) id < SettingsViewControllerDelegate > delegate; 
```

合成它但不释放它

```
@synthesize delegate; 
```

在您的对象上设置委托。

```
settingsViewController.delegate = self; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:53:53.993

在某些情况下，您应该保留委托，通常您的委托将比对象寿命长。因此，将您的属性从保留更改为分配。并确保您正在设置委托。你在哪里做？如果你的对象真的依赖它，你应该在构造函数（`iniWithDelegate`）中传递它。在调用 delagate 方法之前尝试做一个`NSLog`，看看它是否不为零。

嘿，看看这个[链接](http://ioscoderef.blogspot.in/2012/09/creating-delegate-for-custom-class.html)。链接帮助了我一次。我希望它也能帮助你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T11:58:17.013

在 TableViewController.h 中为 DetailViewControllerDelegate 添加一个委托：

```
#import "DetailViewController.h"
@property (retain, nonatomic) id <DetailViewControllerDelegate>delegate; 
```

然后在 TableViewController.m 中：

```
@synthesize delegate; 
```

现在将您的委托方法称为：

```
[delegate detailViewControllerDidLike]; 
```

最重要的是：在主视图中添加 TableViewController 的地方，不要忘记写：

```
taleViewControllerInstanceName.delegate=self; 
```

# oracle - 如何添加行值？

> ID：15088245
> 
> 赞同：0
> 
> 时间：2013-02-26T11:42:23.217
> 
> 标签：oracle, oracle10g, oracle11g

```
DATE       PCODE         ACODE             TRAFFIC      DIFFERENCE
25-02-2013  S_HDFCBANK  S_HDFCBANK     15085056
24-02-2013  S_HDFCBANK  S_HDFCBANK     9118809 
```

请帮助我了解两个日期的流量差异并添加到最后一列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:08:51.293

你可以这样做：

```
SQL> select dte,pcode,acode,traffic,
  2         traffic - lag(traffic) over (order by dte) difference
  3    from data
  4   order by 1, 2, 3;

DTE       PCODE      ACODE         TRAFFIC DIFFERENCE
--------- ---------- ---------- ---------- ----------
24-FEB-13 S_HDFCBANK S_HDFCBANK    9118809
25-FEB-13 S_HDFCBANK S_HDFCBANK   15085056    5966247 
```

如果您`pcode` `acode`每个日期有很多并且想要单独处理这些，您需要将分析更改为

```
lag(traffic) over (partition by pcode,acode order by dte) difference 
```

# php - 使用 Codeigniter 更新数据库中的图像路径？

> ID：15088246
> 
> 赞同：-5
> 
> 时间：2013-02-26T11:42:24.527
> 
> 标签：php, codeigniter

这是我的控制器代码。

```
function edit_hotel($id) {
            $hotel = $this->hotel_model->get_hotel($id);

            $data['title'] = 'Edit Hotel';

            $this->form_validation->set_rules('hotelname', 'Hotel Name', 'required|xss_clean');
            $this->form_validation->set_rules('hotellocation', 'Hotel Location', 'required|xss_clean');
            $this->form_validation->set_rules('hotelphone', 'Hotel Phone', 'required|xss_clean');
            $this->form_validation->set_rules('hotelimg', 'Hotel Image', 'required|xss_clean');
            $this->form_validation->set_rules('hotelabout', 'Hotel About', 'required|xss_clean');
        if ($this->form_validation->run() === true)
                {

                $config['upload_path'] = './images/hotelimages';
     $config['allowed_types'] = 'gif|jpg|png';
     $config['max_size']    = '1000000';
     $config['overwrite'] = TRUE;
     $config['remove_spaces'] = TRUE;
     $config['encrypt_name'] = FALSE;
    print_r($config);
    echo "<br>after config<br>";
     $this->load->library('upload', $config);
     $field_name = "hotelimg";
     if ( ! $this->upload->do_upload($field_name))
            {
     $error = array('error' => $this->upload->display_errors());

                $this->load->view('admin/edit_hotel', $error);
                }
                else {
                $image_data = $this->upload->data();
                print_r($image_data);
                echo "<br>after image_data<br>";
                $data = array(
                    'hotelname'             => $this->input->post('hotelname'),
                    'hotellocation'     => $this->input->post('hotellocation'),
                    'hotelphone'            => $this->input->post('hotelphone'),
                    'hotelimg'      =>    $image_data['full_path'],
                    'hotelabout'            => $this->input->post('hotelabout')
                );

                    $this->hotel_model->update_hotel($id, $data);

                    $this->session->set_flashdata('message', "<p>Hotel updated successfully.</p>");

                    redirect(base_url().'index.php/admin/hotel_controller/index');
                }

            }

            $data['hotel'] = $hotel;

            $this->load->view('admin/edit_hotel', $data);
        } 
```

这是模型

**从数据库中获取数据以编辑表单字段**

```
function get_hotel($id) {
        $this->db->select('id, hotelname, hotellocation, hotelphone,hotelimg,    
hotelabout');
        $this->db->where('id', $id);
        $this->db->limit(5);
        $query = $this->db->get('hotel_content');

        return $query->row_array();
    } 
```

**更新数据库**

```
public function update_hotel($id, $data)
    {
        $this->db->where('id', $id);
        $this->db->update('hotel_content', $data);
    } 
```

这是查看页面

```
<?php $id = $hotel['id']; ?>
<?php echo form_open("admin/hotel_controller/edit_hotel/$id");?>
    <table width="700" border="1" cellpadding="0" cellspacing="2" align="center">
        <tr>
            <td width="234" align="right"> <div align="left">Hotel Name:: </div></td>
          <td width="454"><input type="text" name="hotelname" id="hotelname" value="<?php  
            echo $hotel['hotelname']; ?>" class="input_field"/></td>
        </tr>
        <tr>
            <td width="234" align="right"> <div align="left">Hotel Location: </div></td>
            <td><input type="text"  name="hotellocation" id="hotellocation" value="<?php  
            echo $hotel['hotellocation']; ?>" class="input_field"/><?php //echo form_input($hotellocation); ?></td>
        </tr>
        <tr>
            <td align="right"><div align="left">Hotel Phone:</div></td>
            <td><input  type="text" name="hotelphone" id="hotelphone" value="<?php 
            echo $hotel['hotelphone']; ?>" class="input_field"/><?php //echo form_input($hotelphone); ?></td>
        </tr>
        <tr>
            <td bgcolor="#FFFFFF" align="center"><div align="left">Hotel Image:</div></td>
            <td><input type="file" name="hotelimg" id="hotelimg" size="33" value="<?php 
            echo $hotel['hotelimg']; ?>" /><?php //echo form_input($hotelimg); ?>
            <input type="hidden" name="hotelimg" id="hotelimg" value="<?php 
            echo $hotel['hotelimg']; ?>" /></td>
        </tr>
        <tr>
            <td align="right"><div align="left">Hotel About:</div></td>
            <td><textarea name="hotelabout" id="hotelabout" cols="34" rows="5"> <?php 
            echo $hotel['hotelabout']; ?></textarea><?php //echo form_textarea($hotelabout); ?></td>
        </tr>

        <tr>
            <td>&nbsp;</td>
            <td><?php echo form_submit('submit', 'Submit');?>
                <input type="button" name="btnBack" id="btnBack" value="Back" onclick="window.location.href='<?php echo base_url() ?>admin/hotel_controller/index'" />          </td>
        </tr>
    </table>
<?php echo form_close(); ?> 
```

上面的代码不执行任何更新数据库中图像路径的操作。所以任何人都可以通过纠正它来帮助我。提前谢谢你

所以它显示的图像路径是这样的

`print_r($image_data)`：

```
Array (
[file_name] =>
[file_type] =>
[file_path] => ./images/hotelimages/(**name of the image should be here**)
[full_path] => ./images/hotelimages/(**name of the image should be here**)
[raw_name] =>
[orig_name] =>
[client_name] =>
[file_ext] =>
[file_size] =>
[is_image] =>
[image_width] =>
[image_height] =>
[image_type] =>
[image_size_str] =>
) 
```

在 image_data 之后

`print_r($data)`：

```
Array (
[hotelname] => aditya Hotels
[hotellocation] => Hyderbad
[hotelphone] => 04056894236
[hotelimg] => ./images/hotelimages/(**name of the image should be here**)
[hotelabout] => Aditya Sarovar Premiere is a well known lodging destination among many international and local tourists. Aditya Sarovar Premiere offers some state of the art rooms and modern facilities at affordable prices. It also has a fully equipped gym and a swimming pool. Perfect abode for all business and leisure guests, Aditya Sarovar Premiere is a great place to stay when in Hyderabad.
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:10:55.983

代替视图中的**form_open()**，使用**form_open_multipart()**来允许文件上传。

# javascript - 退出嵌入在另一个函数中的两个javascript函数

> ID：15088247
> 
> 赞同：2
> 
> 时间：2013-02-26T11:42:24.780
> 
> 标签：javascript, jquery, ajax, function, return

我有一些代码如下：

```
$(document).on('click', '.set_up_btn', function(){
var menu_name=$('.menu_name').val();
var menu_type=$('.menu_type_sel').val();
var rest_id=$('body').data('rest_id');
var error=false;

if(menu_name=="")
{
    $('.error_box13').eq(0).html("<p>Enter Identifier for this Menu</p>");
    $('.error_box13').eq(0).show(300);
    error=true;
}
if(menu_type=="0")
{
    $('.error_box13').eq(1).html("<p>Select Menu Type</p>");
    $('.error_box13').eq(1).show(300);
    error=true;
}
if(error==true)
{
    return;
}
//check menu name is unique
var data="rest_id="+rest_id+"&name="+menu_name;

$.ajax({
    type:"POST",
    url:"includes/check_menu_name.php",
    data:data,
    success:function(html){
        if(html==1)
        {
            //menu name is duplicate
            $('.error_box13').eq(0).html("<p>Menu Name already in use.</p>");
            $('.error_box13').eq(0).show(300);
            error=true;
        }
        else if(html==2)
        {
            //menu name is ok

        }
    return error;
    }
});//end ajax
if(error==true)
{
    e.stopImmediatePropagation();
    return false;
}

var data2="rest_id="+rest_id+"&name="+menu_name+"&menu_type="+menu_type;

$.ajax({
    type:"POST",
    url:"includes/set_menu.php",
    data:data2,
    success:function(html2){
        if(html2==1)
        {
            var app="";
            if(menu_type==1)
            {
                menu_type="Bar Menu";
            }
            if(menu_type==2)
            {
                menu_type="Food Menu";
            }
            app+="<h2 class='menu_header'>"+menu_type+"</h2><hr />";
            app+="<h2 class='menu_title'>"+menu_name+"</h2>";
            $(app).appendTo($('.third').eq(2));
        }
        else
        {
            alert("ERROR: Could not write to database. Please try again.");
        }
    }
});//end ajax

}); 
```

如果第一个 ajax 请求返回“1”，我需要做的是退出整个“点击”功能——菜单名称已被该用户使用。

目前，如果发生这种情况，javascript 会继续运行第二个 ajax 请求并将数据写入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:48:22.063

您遇到此问题是因为在请求返回时“稍后”调用了成功函数。它不是瞬时的，所以错误变量还没有被填充。处理成功函数内部的错误如下：

```
$.ajax({
    type:"POST",
    url:"includes/check_menu_name.php",
    data:data,
    success:function(html){
        if(html==1)
        {
            //menu name is duplicate
            $('.error_box13').eq(0).html("<p>Menu Name already in use.</p>");
            $('.error_box13').eq(0).show(300);
            error=true;

            // we must handle the error here!

            handleError(e, error);
        }
        else if(html==2)
        {
            //menu name is ok

            // continue on as normal
            continueNoError();
        }
    return error;
    }
});//end ajax

// Code run here runs BEFORE $.ajax returns

function handleError(e, error) {
    if(error==true)
    {
        e.stopImmediatePropagation();
        return false;
    }
}

function continueNoError() {
    // Put what to after the first ajax call here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:48:57.310

目前，无论发生什么，第二个 AJAX 调用都会运行。

将其包装在单击内的方法中，当满足要求时调用该方法。

IE：

```
if (menu_type === 2) {
    menu_type="Food Menu";
    setMenu();
} 
```

然后：

```
var setMenu = function () {
    $.ajax({
        // do stuff
    });
} 
```

# c# - C#“有时”套接字侦听器在客户端断开连接后给出错误

> ID：15088249
> 
> 赞同：-5
> 
> 时间：2013-02-26T11:42:31.473
> 
> 标签：c#, sockets, error-handling, console

我是 C# 新手，之所以选择它，是因为我必须为客户端编写服务器侦听器……我将构建一个带有线程的服务器，它可以毫无问题地侦听多个客户端，但有时当客户端断开连接时，服务器会出错。

> **System.InvalidOperationException：不允许非连接的操作**

这是我接收数据包的代码：

```
NetworkStream networkStream = clientSocket.GetStream();
networkStream.Read(bytesFrom, 0, 312);
dataFromClient = Encoding.ASCII.GetString(bytesFrom);

string hex = BitConverter.ToString(bytesFrom).Replace("-","");
Console.WriteLine("\n " + hex + "\n_______________()()()______________"); 
```

这是带有错误的控制台屏幕截图： [屏幕截图链接](http://i.stack.imgur.com/ek12k.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:48:03.423

如果套接字未连接或不再连接，[TcpClient.GetStream()将抛出异常。](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.getstream.aspx)

将代码包装在 try..catch 块中：

```
try
{
    NetworkStream networkStream = clientSocket.GetStream();
    networkStream.Read(bytesFrom, 0, 312);
    dataFromClient = Encoding.ASCII.GetString(bytesFrom);

    string hex = BitConverter.ToString(bytesFrom).Replace("-","");
    Console.WriteLine("\n " + hex + "\n_______________()()()______________");
} 
catch (InvalidOperationException ioex)
{       
    // The TcpClient is not connected to a remote host.
}
catch (ObjectDisposedException odex)
{
    // The TcpClient has been closed.
} 
```

# signalr - 可以在没有集线器和广播的情况下使用 SignalR 吗？

> ID：15088252
> 
> 赞同：0
> 
> 时间：2013-02-26T11:42:41.960
> 
> 标签：signalr

我想使用 SignalR 来支持异步服务器到客户端以及在浏览器没有 Web 套接字的情况下优雅的回退。

然而，我的应用程序是严格单播的——客户端建立连接，订阅一些数据，这些数据在存在时发送给客户端。没有广播是相关的。而且应用程序根本不匹配“Hubs”架构。

这是我的问题：我已经搜索了几天的文档，或者只是一个关于如何将数据发送给一个客户的示例。之前也曾在stackoverflow上提出过类似的问题，但我没有找到有用的答案。

所以：我坐在 OnReceived 中（在其中创建的闭包），我有一些数据（String s），我希望仅将“s”发送给导致 OnReceived 回调发生的客户端。这*真的*非常非常简单。但我能找到的只是 Connection.Send，它需要一个 ConnectionMessage，而后者又需要一个 Signal。我不知道是什么，也不知道如何创建和订阅。

我开始认为 SignalR 可能只是错误的工具（从某种意义上说，它的设计过于注重广播，无法满足我的需求）。另一方面，似乎没有更简单的工具可以为双向通信提供同样优雅的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:06:42.787

这很奇怪，因为此页面上有一个部分[https://github.com/SignalR/SignalR/wiki/PersistentConnection](https://github.com/SignalR/SignalR/wiki/PersistentConnection)标题为 Sending to a specific connection。你在哪里找的文档？

# java - Netty - getRemoteAddress 每次返回不同的端口

> ID：15088253
> 
> 赞同：0
> 
> 时间：2013-02-26T11:42:42.617
> 
> 标签：java, port, netty

我正在使用实现[Netty的](http://netty.io)[LittleProxy](http://www.littleshoot.org/littleproxy/)。我正在尝试返回 HTTP 请求源的 IP 地址和端口。我使用 getRemoteAddress 方法，但返回的端口总是不同的。似乎每次请求后都会累加？我一定在这里错过了一些见解。

经过一番搜索，我尝试将其向下转换为 InetSocketAddress。但结果是一样的：

```
private void processRequest(final ChannelHandlerContext ctx, 
        final MessageEvent me) {

        final HttpRequest request = (HttpRequest) me.getMessage();
        //THOMAS EDIT FOR OUTPUT REMOTE ID AND PORT
        InetSocketAddress inetAddr = (InetSocketAddress)me.getRemoteAddress();        
        System.out.println("Source IP: " + inetAddr.getAddress());
        System.out.println("Source Port: " + inetAddr.getPort()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:49:20.183

Netty 的行为类似于网关或 NAT。它提供的 IpAddress 和 Ports 是它自己的端口号。

您可以尝试的是获取 HTTPHeader`X-Forwarded-For`

选项 2：

使用 ChannelHandlerContext 而不是 MessageEvent

`ctx.getChannel().getRemoteAddress();`

# unicode - 如何标准化日语以便我可以检查 Lua 中的禁用词？

> ID：15088255
> 
> 赞同：3
> 
> 时间：2013-02-26T11:42:54.263
> 
> 标签：unicode, lua, word, cjk

半角、全角、片假名、平假名、汉字和使用替代字符（例如用そ代替ん）的组合太多。

Python 有一个名为[jcconv](https://pypi.python.org/pypi/jcconv/0.1.2)的包，它可以帮助我做我需要做的事情。我想将字符串转换为标准形式，这样我就可以查看我的受限单词列表。

这在Lua中可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T13:27:29.153

为了能够在平假名、片假名和半角片假名之间转换字符串，您可以将各自的字母字符存储在不同的表中，并在它们之间添加映射（通过索引或键）。

[从来源（链接](https://github.com/taichino/jcconv/blob/master/jcconv/jcconv.py)）来看，jcconv 也是这样做的。

例如，如果您想将平假名转换为片假名，您可以这样做：

*   建立一个表，其中每个元素都定义为`[hiragana] = katakana`.
*   逐个字符地迭代字符串并替换（如果是这种情况，我发现一个小库正是这样做的：[utf8.lua](https://github.com/alexander-yakushev/awesompd/blob/master/utf8.lua)提供了一个接受映射表的替换函数）。

# javascript - 未使用响应式 CSS 时，引导导航栏不起作用

> ID：15088260
> 
> 赞同：0
> 
> 时间：2013-02-26T11:43:18.710
> 
> 标签：javascript, css, twitter-bootstrap

我正在使用最新的 Bootstrap 来设计我的管理面板。当响应式 css 包含如下时，我包含的导航栏可以正常工作：

```
<link rel="stylesheet" href="../css/bootstrap-responsive.min.css"> 
```

但是当我删除这一行并重新加载页面时，导航栏的下拉菜单不起作用。实际上下拉菜单正在工作，但它们在容器下重叠。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:49:56.977

您需要添加 Bootstrap.css 和 bootstrap-responsive.css ，除非它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:16:31.917

现在已经解决了。我正在使用

```
<div class="nav-collapse collapse"> 
```

代替使用

```
<div class="nav-collapse"> 
```

谢谢大家的时间。

# c# - 根据 Razor MVC4 中的条件从控制器控制部分视图

> ID：15088266
> 
> 赞同：2
> 
> 时间：2013-02-26T11:43:39.857
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, asp.net-mvc-partialview

在我的主页视图中，我在 HTMl 下面有 3 个部分视图。在那个 First Partial 视图中将始终呈现。第二和第三将由家庭控制器根据标志 0 或 1 决定。如何处理这种情况。请给我建议。

```
<div>             
    <div>
        -- some HTML
    </div>   
    @{ Html.RenderAction("First", "First");}
    @{ Html.RenderAction("Second", "Second");}
    @{ Html.RenderAction("Third", "Third");}

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:00:41.853

如果您决定按照您所说的那样在控制器中标记然后将其发送到视图然后简单地在视图中使用此标记来决定是否呈现第二个和第三个，那么问题是什么？

在控制器中

```
ViewBag.Flag = bool // 0 or 1 as per your logic 
```

在视图中

```
if(ViewBag.Flag){
    @{ Html.RenderAction("Second", "Second");}
    @{ Html.RenderAction("Third", "Third");}
} 
```

# android - 如何在 Android 设备上显示从 Web 服务接收到的二进制 PDF 数据？

> ID：15088270
> 
> 赞同：0
> 
> 时间：2013-02-26T11:43:52.847
> 
> 标签：android, ios, pdf, binary, livecycle

我正在使用 Adob​​e 的 LiveCycle ES3 服务器，它以 HTML、二进制等各种格式返回可更新的 PDF 表单。

我曾尝试使用 WebView 显示 HTML，但它不能 100% 工作。例如，它有日期字段，当您点击它时，它会显示日历图标，但是当我点击图标本身时，日历不会显示。但它确实适用于 iPhone。除此之外，格式在 iOS 和 Android 平台上都完全混乱。

所以，现在我正在尝试显示 PDF 表单本身。因此，Web 服务发送的表单结构是二进制格式（字节），我应该在某些控件中使用它来在 Android 设备上显示。

那么，谁能告诉我如何显示存储在 Android 设备上的内存变量中的 PDF 的二进制形式，好吗？同样，出于安全原因，我无法将其存储在文件中。由于我在医疗保健行业工作，因此 HIPAA 在安全方面发挥着重要作用。

提前感谢您的出色解决方案......并期待它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T11:06:38.937

老问题，但是您是否有指向演示该问题的示例 PDF 表单的链接？我猜日历图标点击处理程序（可能还有一些格式）正在使用 JavaScript，它在[默认情况下被](http://developer.android.com/guide/webapps/webview.html#UsingJavaScript)[禁用`WebView`](http://developer.android.com/guide/webapps/webview.html#UsingJavaScript)。这可以[启用](http://developer.android.com/guide/webapps/webview.html#UsingJavaScript)并且可以解决一些问题。

请记住，取决于您如何管理数据并将其显示在 WebView 上也很重要，因为即使您没有将数据本地保存在应用程序中，数据也可以缓存到设备中。对于与 PHI 或 PII 一起使用的更强大的应用程序，您可能需要考虑使用[**设备管理 API**](http://developer.android.com/guide/topics/admin/device-admin.html)来创建具有安全意识的应用程序。

我最近将[**android-pdfview**](https://github.com/areyling/android-pdfview) (original [here](http://joanzapata.com/android-pdfview/) ) 用于一个项目，您可以对其进行修改以满足您在内存中处理 PDF 数据的需要。

# java - JavaFX - 加载图像和内存问题

> ID：15088271
> 
> 赞同：6
> 
> 时间：2013-02-26T11:43:56.013
> 
> 标签：java, image, memory, javafx, load

我在将图像加载到我的应用程序时遇到问题。我正在尝试制作一个简单的图像浏览器。在左边我有一个文件夹列表。单击列表图像上的文件夹名称后，应出现在右侧（流窗格）。每个图像都在一个带边框的 HBox 中。但是我很快就遇到了这样的错误：

```
java.lang.outofmemoryerror java heap space 
```

我查看了任务管理器——如果我只加载 6 张照片，应用程序会占用 500mb 的内存！还有一件事 - 如果我更改列表中的文件夹，内存仍然被占用。在选择另一个文件夹时，我正在创建新的 flowPane

```
flowPane = new FlowPane(); 
```

所以垃圾收集器应该删除所有 ImageViews 的旧的，对吗？

如何有效地管理我的应用程序中的图像？

```
 for(int i = 0 ; i < zdjecia.length; i++){
        ImageView iv2 = new ImageView();
        Image image = new Image("file:"+zdjecia[i].getAbsolutePath());
         iv2.setImage(image);
         if( image.getHeight() > image.getWidth()){
                iv2.fitHeightProperty().bind(szerokoscZdjecia.multiply(0.8).subtract(6));
        }else
                iv2.fitWidthProperty().bind(szerokoscZdjecia.subtract(6));

         iv2.setPreserveRatio(true);
         iv2.setSmooth(true);
         iv2.setCache(false);

         String styl = "-fx-border-color: #b2b3b3;"
                 + "-fx-border-width: 2;";

         HBox boxNaFotke = new HBox();
         boxNaFotke.prefWidthProperty().bind(szerokoscZdjecia);
         boxNaFotke.prefHeightProperty().bind(szerokoscZdjecia.multiply(0.8));
         boxNaFotke.setAlignment(Pos.CENTER);
         boxNaFotke.setStyle(styl);
         boxNaFotke.getChildren().add(iv2);
         fotki.add(boxNaFotke);
         flowPane.getChildren().add(boxNaFotke);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-04T19:42:03.003

如果`Image`使用[构造函数](https://docs.oracle.com/javafx/2/api/javafx/scene/image/Image.html#Image%28java.lang.String,%20double,%20double,%20boolean,%20boolean%29)来扩展，所需的内存量将大大减少。

**文档中的一些示例：**

> // 加载图像并将其大小调整为 100x150，而不保留其原始纵横比
> // 该图像位于类路径的 my.res 包中
> `Image image2 = new Image("my/res/flower.png", 100, 150, false, false);`
> 
> // 加载图像并将其调整为 100 的宽度，同时保留其
> 原始纵横比，使用更快的过滤方法
> // 通过 http 协议从提供的 URL 下载图像
> `Image image3 = new Image("http://sample.com/res/flower.png", 100, 0, false, false);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:34:11.403

我在 JavaFX 中的内存有类似的问题，但与 setStyle 方法有关。我分析了堆使用情况，发现 StyleHelper 对象保留了对 setStyle 方法设置的所有样式的所有引用（com.sun.javafx.css.StyleManager$Holder 中有很多具有 GC 根的 HashMap 实例）。当风格经常改变时，这可能是一个问题。

尝试评论 boxNaFotke.setStyle(styl); 行并检查它是否有帮助。

# jquery - jQuery EasyUI：确认/保存数据网格内联编辑

> ID：15088273
> 
> 赞同：3
> 
> 时间：2013-02-26T11:44:00.333
> 
> 标签：jquery, datagrid, inline-editing, jquery-easyui

我正在使用 jquery 和 EasyUI 从 SQL 数据库创建表。[我已经设法通过本教程](http://www.jeasyui.com/tutorial/app/crud2.php)之后的内联编辑使一些列可编辑，其中可能的单元格值由组合框给出。我有一个用于 updateURL 的 php 文件，并且现有内容的更新工作正常。

我的问题如下： 到目前为止，要确认单元格的编辑（在单击单元格并从组合框中选择一个值之后），用户必须单击表格的其他行来触发更新脚本。如果表格只有一行并且只有一列是可编辑的，则似乎无法确认更改（例如按回车键）。

有没有办法进行这样的确认？谢谢你的帮助！

* * *

**更新：**我已经走了这么远：在数据网格中，要通过组合框编辑的列是通过

```
<th field="..." data-options="formatter:...,
editor:{type:'combobox',options:{valueField:'...',textField:'...',url:'file.php'‌​,
onSelect: function (record) {*}}}">field</th> 
```

我相信我需要通过命令代替星号（*）来保存/完成编辑。我用过`endEdit`, `saveRow`，但没有成功。这是正确的地方（我用一个简单的警报对其进行了测试），但不是正确的命令/语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:40:35.027

解决了！

需要使用星号的代码是：

```
var selectedrow = $('#dg_id').datagrid('getSelected');
var rowIndex = $('#dg_id').datagrid('getRowIndex', selectedrow);
$('#dg_id').datagrid('endEdit',rowIndex); 
```

希望这对其他人也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-07T12:30:59.087

让我把我的解决方案留给 Google。使用版本 1.4.4 测试

基本上你需要重写`editRow`方法，但 EasyUI 似乎设计得不是很好，内部完全没有文档记录。还有一个对隐藏`focusEditor`函数的调用，所以我最终得到了这段代码。它使用 <Enter> 触发`saveRow`，并允许您使用 <Shift> + <Enter> 在多行编辑器中插入换行符。由于许多意外错误，我还通过单击其他行来关闭保存。

```
$.fn.edatagrid.methods.editRow = function(jq, index){
    return jq.each(function(){
        var dg = $(this);
        var opts = $.data(this, 'edatagrid').options;
        var editIndex = opts.editIndex;
        if (editIndex != index){

            // -------------------- ✂ --------------------
            // Lost focus
            if (editIndex != -1) {
                dg.edatagrid('cancelRow');
                return;
            }
            // -------------------- ✂ --------------------

            if (dg.datagrid('validateRow', editIndex)){
                if (editIndex>=0){
                    if (opts.onBeforeSave.call(this, editIndex) == false) {
                        setTimeout(function(){
                            dg.datagrid('selectRow', editIndex);
                        },0);
                        return;
                    }
                }
                dg.datagrid('endEdit', editIndex);
                dg.datagrid('beginEdit', index);
                if (!dg.edatagrid('isEditing', index)){
                    return;
                }
                opts.editIndex = index;

                // -------------------- ✂ --------------------
                // Based on focusEditor() function
                var target;
                var that = this;
                var editor = $(this).datagrid('getEditor', {index:opts.editIndex});
                if (editor){
                    target = editor.target;
                } else {
                    var editors = $(this).datagrid('getEditors', opts.editIndex);
                    if (editors.length){
                        target = editors[0].target;
                    }
                }
                if (target){
                    var field = $(target).hasClass('textbox-f') ? $(target).textbox('textbox') : $(target);
                    field.focus();
                    field.bind('keydown', function(e) {
                        if (e.which == 13 && !event.shiftKey) {
                            $(that).edatagrid('saveRow');
                        }
                    });
                }
                // -------------------- ✂ --------------------

                var rows = dg.datagrid('getRows');
                opts.onEdit.call(this, index, rows[index]);
            } else {
                setTimeout(function(){
                    dg.datagrid('selectRow', editIndex);
                }, 0);
            }
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T17:20:35.390

为什么不使用网格附带的工具栏（带有保存/确认按钮）。单击按钮后，您可以显式触发 edatagrid 的更新事件。

在您自己引用的链接中，您可以找到示例，

[http://www.jeasyui.com/tutorial/app/crud2.php](http://www.jeasyui.com/tutorial/app/crud2.php)

# sql-server - SQL 2012 添加数据收集俄语

> ID：15088274
> 
> 赞同：0
> 
> 时间：2013-02-26T11:44:07.303
> 
> 标签：sql-server, unicode, sql-server-2012

我需要支持 Unicode 字符，其中 DB 将支持俄语和英语，我需要添加第二个集合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:27:10.343

Unicode 数据使用 SQL Server 中的 nchar、nvarchar 和 ntext 数据类型存储。

插入使用

对于传统方法 **插入表（文本列）值（N'value'）**

对于存储过程 **插入表 (textcolumn) 选择 @parameter**

# java - AspectJ 如何捕获 NoResultException 并返回 null

> ID：15088279
> 
> 赞同：0
> 
> 时间：2013-02-26T11:44:17.167
> 
> 标签：java, exception, aspectj, aspect

我想使用 AspectJ 来捕获 a`NoResultException`并返回 null 。
（显然我是一个方面菜鸟）

这是执行查询的方法：

```
@Override
public Company getCompanyBySomeNumber(String someNumber) {
    TypedQuery<Company> query = em.createQuery("select c from Company c where c.someNo = ?1", Company.class);
    query.setParameter(1, someNumber);
    return query.getSingleResult(); 
```

我有数百个这样的电话，我不想把每个电话都用 a 乱扔以将`try/catch`其更改`NoResultException`为空结果。

所以我想写一个方面来捕获异常并将结果更改为`null`.

这是方面代码（请注意我正在使用注释）。像这样的东西：

```
@Aspect 
public class NullifyNoResultException {

    @Pointcut("execution(my.namespace.where.the.queries.are * *Throwable(..))")
    void throwableMethod() {}

    @Around("throwableMethod()")
    public void swallowThrowing(ProceedingJoinPoint pjp) {
        try {
            pjp.proceed();
        } catch (NoResultException nre) {
           //TODO change the return value to null 
```

**如何将返回值更改为 null**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:47:39.883

您是否尝试将方法更改为：

```
@Around("throwableMethod()")
public Object swallowThrowing(ProceedingJoinPoint pjp) {
    try {
        return pjp.proceed();
    } catch (NoResultException nre) {
        return null;
    }
} 
```

# javascript - HTML5 数据未存储在本地存储中

> ID：15088280
> 
> 赞同：0
> 
> 时间：2013-02-26T11:44:17.760
> 
> 标签：javascript, html, local-storage

```
<html>
<head>
<title></title>
<style type="text/css">
    body
    {
        font-family: tahoma;
    }
    h2
    {
        font-weight: bold;
        border-bottom: 2px solid gray;
        margin-bottom: 10px;
    }
    #data
    {
        border: 1px solid grey;
    }
</style>
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
</head>
<body>
<script type="text/javascript">       
    var prefix = "HTML5LocalStorage-";
    $("#save").click(function () {
        var key = $("#key").attr('value');
        var value = $("#value").attr('value');
        localStorage.setItem(prefix + key, value);          
        RewriteFromStorage();
    });

    function RewriteFromStorage() {
        $("#data").empty();
        for (var i = 0; i < localStorage.length; i++)
        {
            var key = localStorage.key(i); 
            if (key.indexOf(prefix) == 0) {
                var value = localStorage.getItem(key);                  
                var shortkey = key.replace(prefix, "");
                $("#data").append(
            $("<div class='kvp'>").html(shortkey + "=" + value)
               .append($("<input type='button' value='Delete'>")
                       .attr('key', key)
                       .click(function () { 
                           localStorage.removeItem($(this).attr('key'));
                           RewriteFromStorage();
                       })
                      )
        );
            }
        }
    }

    RewriteFromStorage();
</script>
<h2>
    LocalStorage Demo</h2>
<div id="data">
</div>
<hr />
<span>Key</span><input type="text" id="key" /><span>Value</span><input type="text"
    id="value" />
<input type="button" id="save" value="Save" /> 
```

我已经在 localstorage.htm 页面（visual studio 2010）中编写了上面的代码行，但是在按钮单击中没有输出。我犯了什么错误。我是这项技术的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:51:19.327

你的问题出在这里：

```
 var key = $("#key").attr('value');
    var value = $("#value").attr('value'); 
```

添加以下内容以查看问题：

```
alert(key + ' ' + value); 
```

使用`val`insead 获取输入的值...

```
var key = $("#key").val(); 
```

你可以[在我的 JSFiddle 中看到这个工作](http://jsfiddle.net/HSPZQ/)。

# java - 使用 spring security ldap 禁用基本身份验证

> ID：15088282
> 
> 赞同：1
> 
> 时间：2013-02-26T11:44:36.930
> 
> 标签：java, spring-security, ldap, spring-security-ldap

我正在尝试使用登录表单设置基本的 spring-security-ldap 身份验证，但是当我尝试登录时，我仍然得到一个 http-basic 弹出窗口，它不允许登录。

我的security.xml：

```
<s:http>
  <s:intercept-url pattern="/login*" access="ROLE_ANONYMOUS" />
  <s:intercept-url pattern="/**/*.html*" access="ROLE_ADMIN,ROLE_USER,ROLE_READONLY" />
  <s:form-login login-page="/login.jsp"
            authentication-failure-url="/login.jsp?error=true"
            login-processing-url="/j_security_check"
            default-target-url="/mainMenu.html"
            always-use-default-target="true" />
  <s:logout />
</s:http>

<s:ldap-server url="${ldap.url}"
             manager-dn="${ldap.adm_username}"
             manager-password="${ldap.adm_password}"/>

<s:authentication-manager>
  <s:ldap-authentication-provider user-search-filter="(cn={0})"
                                  user-search-base="${ldap.user_search_base}"
                                  group-search-base="ou=myapp,ou=mysystem,o=ACME"
                                  role-prefix="none"/>
</s:authentication-manager> 
```

来自 web.xml：

```
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

    <!-- First filter-mapping in file -->
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

这是重构工作的一部分，与重构前的部署版本相比，url`(server):(port)/(webapproot)/j_security_check`不可用，但重构后可用，并提示一个基本的登录框，这也是什么时候弹出的试图通过登录页面登录。

![登录框](../Images/991dfc461f3f250e12b486d7c08fd41a.png)

当尝试通过登录框登录时，我在服务器日志中得到了这个堆栈跟踪：

```
[#|2013-02-26T12:41:30.411+0100|WARNING|glassfish3.1|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=333;_ThreadName=Thread-1;|Exception
    com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Failed file login for .
      at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:394)
      at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240)
      at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153)
      at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:483)
      at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:425)
      at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:176)
      at org.apache.catalina.authenticator.AuthenticatorBase.processSecurityCheck(AuthenticatorBase.java:909)
      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:487)
      at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:623)
      at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
      at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
      at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
      at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
      at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
      at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
      at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
      at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
      at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
      at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
      at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
      at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
      at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
      at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
      at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
      at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
      at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
      at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
      at java.lang.Thread.run(Thread.java:722)
    Caused by: javax.security.auth.login.LoginException: Failed file login for .
      at com.sun.enterprise.security.auth.login.FileLoginModule.authenticate(FileLoginModule.java:84)
      at com.sun.enterprise.security.auth.login.PasswordLoginModule.authenticateUser(PasswordLoginModule.java:117)
      at com.sun.appserv.security.AppservPasswordLoginModule.login(AppservPasswordLoginModule.java:148)
      at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
      at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
      at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
      at java.lang.reflect.Method.invoke(Method.java:601)
      at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784)
      at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
      at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698)
      at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696)
      at java.security.AccessController.doPrivileged(Native Method)
      at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695)
      at javax.security.auth.login.LoginContext.login(LoginContext.java:594)
      at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:382)
      ... 29 more
    |#] 
```

如何禁用基本登录，为了对 ldap-server 进行身份验证，我缺少什么？

更新：

我将 glassfish 安全领域更改为 ldap-realm，并将其设置为在旧 glassfish 服务器上。另外，我禁用了 glassfish 中的“安全管理器”。现在，我仍然得到额外的弹出登录框，但堆栈跟踪看起来更好：

```
 [#|2013-02-26T13:47:49.640+0100|WARNING|glassfish3.1|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=90;_ThreadName=Thread-1;|Exception
    com.sun.enterprise.security.auth.login.common.LoginException: Login failed: Access denied on empty password for user .
        at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:394)
        at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240)
        at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153)
        at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:483)
        at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:425)
        at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:176)
        at org.apache.catalina.authenticator.AuthenticatorBase.processSecurityCheck(AuthenticatorBase.java:909)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:487)
        at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:623)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:326)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:227)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:170)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: javax.security.auth.login.LoginException: Access denied on empty password for user .
        at com.sun.enterprise.security.auth.login.LDAPLoginModule.authenticate(LDAPLoginModule.java:102)
        at com.sun.enterprise.security.auth.login.PasswordLoginModule.authenticateUser(PasswordLoginModule.java:117)
        at com.sun.appserv.security.AppservPasswordLoginModule.login(AppservPasswordLoginModule.java:148)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:784)
        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:698)
        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:696)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:695)
        at javax.security.auth.login.LoginContext.login(LoginContext.java:594)
        at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:382)
        ... 29 more
    |#] 
```

但是我如何一起禁用 glassfish 的安全机制，而只依赖 spring 呢？

更新#2：找到罪魁祸首。我在 glassfish 安装中的 default-web.xml 中有这个：

```
<login-config>
  <auth-method>BASIC</auth-method>
</login-config> 
```

删除它，不再有登录框:)然后转到下一个问题：p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:22:44.070

Spring Security 不处理您的基本身份验证。查看堆栈跟踪。没有 Spring Security 过滤器。看起来您的基本身份验证是由 Glassfish 本身处理的。尝试通过 Glassfish 禁用基本身份验证。web.xml 中有**login-config**和**security-constraint**标签吗？如果是真的，那么只需删除它们。

# android - 在 Android 应用程序中实现 XSLT 扩展的最佳方法是什么

> ID：15088294
> 
> 赞同：0
> 
> 时间：2013-02-26T11:45:10.943
> 
> 标签：android, xslt

在 Android 应用程序中实现 XSLT 扩展的最佳方法是什么。

我想做如下的东西：

```
<xsl:value-of select="ext:getString('TEST')"/> 
```

我已经用“Xalan 2.7.1”试过了，但它不能完全集成到 Android 环境中。

我希望有人对我有建议。

# ruby-on-rails-3 - Sublime Text 2 - RubyTest 与 ruby 2.0 不工作

> ID：15088301
> 
> 赞同：0
> 
> 时间：2013-02-26T11:45:34.857
> 
> 标签：ruby-on-rails-3, sublimetext2, ruby-2.0, ruby-test

我正在尝试设置我的 ST2 以便能够从编辑器运行我的测试。当我点击“Command”+“Shift”+“T”时，我不断收到某种运行时错误。这是堆栈跟踪。任何帮助，将不胜感激。

```
No DRb server is running. Running in local process instead ...
/Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.0.pre.2/lib/bundler/runtime.rb:31:in `block in setup': You have already activated rspec-core 2.13.0, but your Gemfile requires rspec-core 2.11.1\. Using bundle exec may solve this. (Gem::LoadError)
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.0.pre.2/lib/bundler/runtime.rb:17:in `setup'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.0.pre.2/lib/bundler.rb:117:in `setup'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.0.pre.2/lib/bundler/setup.rb:17:in `<top (required)>'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:110:in `rescue in require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:35:in `require'
    from /Users/susiehamm/Documents/Rails/sample_app/config/boot.rb:6:in `<top (required)>'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/Documents/Rails/sample_app/config/application.rb:1:in `<top (required)>'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/Documents/Rails/sample_app/config/environment.rb:2:in `<top (required)>'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/Documents/Rails/sample_app/spec/spec_helper.rb:10:in `block in <top (required)>'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/spork-0.9.2/lib/spork.rb:24:in `prefork'
    from /Users/susiehamm/Documents/Rails/sample_app/spec/spec_helper.rb:4:in `<top (required)>'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/site_ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require'
    from /Users/susiehamm/Documents/Rails/sample_app/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `load'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `block in load_spec_files'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `each'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/configuration.rb:819:in `load_spec_files'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/command_line.rb:22:in `run'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/runner.rb:77:in `rescue in run'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/runner.rb:73:in `run'
    from /Users/susiehamm/.rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.13.0/lib/rspec/core/runner.rb:17:in `block in autorun'
[Finished in 0.8s with exit code 1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:18:33.663

该错误似乎很容易解释：

> 您已经激活了 rspec-core 2.13.0，但您的 Gemfile 需要 rspec-core 2.11.1。使用 bundle exec 可以解决这个问题。（宝石::加载错误）

调整 rspec-rails 的版本（包含 rspec-core）或使用 bundle exec 运行。

解决方案：

在您的 gemfile 中，更改：

```
gem 'rspec-rails', '2.11.0' 
```

到：

```
gem 'rspec rails', '2.13.0' 
```

# sencha-touch - 可滚动面板的一部分始终隐藏

> ID：15088302
> 
> 赞同：0
> 
> 时间：2013-02-26T11:45:36.167
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个水平滚动面板（2 行布局），每当加载商店时，我都会在其中推送面板。如果面板数量超过 10-15 个，它们就会消失，面板开始滚动，但它会在内容实际结束之前停止。如果我拉得更远，我可以看到隐藏的内容，但是一旦我释放它，它就会向后滚动，最后几个面板再次超出边界。

这是我的观点的代码：

```
Ext.define('MyTabApp.view.CatalogList', {
    extend: 'Ext.Panel',
    alias : 'widget.cataloglist',
    config: {
        layout  : 'fit',
        id      : 'catalogList',
        style : 'background-color:#FFF',
        store   : null, // Placeholder for store
        hash    : null,
        items   : [{
            xtype   : 'toolbar',
            id      : 'seachbar',
            docked  : 'top',
            title   : 'Search results',
            items   : [{
                xtype   : 'button',
                text    : 'back',
                ui      : 'back'
            }, 
            {
                xtype   : 'button',
                text    : 'Filter',
            },
            {
                xtype   : 'button',
                text    : 'Sort',
                id      : 'sortBtn',
                right   : 0,
                style   : 'margin-top: 0.3em;'
            }]
        },
        {
            xtype       : 'panel',
            id          : 'searchPanel',
            layout      : 'hbox',
//          html        : 'search results',
            scrollable  : {
                direction       : 'horizontal',
                directionLock   : true
            }
        }]
    },
    innerTpl    : MyTabApp.app.getMulticolumnListTpl(),
    updateData  : function(records) {
        if(records.length != 0) {
            var innerTpl = this.innerTpl;
            var data = [];
            for(var i=0; i<records.length; i++){
                data[i] = records[i].getData();
                data[i].searchImage = Utils.updateImgResolution(records[i].getData().searchImage, "240_320");
            }
            var plist = [];
            while(data.length){
                plist.push({
                    xtype   : 'panel',
                    layout  : 'fit',
                    data    : data.splice(0,10),
                    tpl     : innerTpl
                });
            }
            Ext.getCmp('searchPanel').add(plist);
        }
        Ext.getCmp('searchPanel').setMinWidth(5000);
        /*
         * Since removeData destroys all listeners so we need to bind it again
         */
        this.bindTap();
    },
    removeData  : function() {
        Ext.getCmp('searchPanel').destroy();
        this.add({
            xtype       : 'panel',
            id          : 'searchPanel',
            layout      : 'hbox',
            scrollable  : {
                direction       : 'horizontal',
                directionLock   : true
            }
        });
        if(this.config.store != null){
            this.config.store.destroy();
        }
    },
    initialize : function() {
        this.bindTap();
        this.callParent();
    },
    bindTap : function() {
        this.down('#searchPanel').element.on({
            scope: this,
            tap: 'onSearchTap'
        });
    },
    onSearchTap : function(e) {
        this.fireEvent("searchTapCmd", e);
    }
}); 
```

每当加载新内容时存储调用`updateData`。

这是模板：

```
getMulticolumnListTpl : function()
{
    return new Ext.XTemplate(
    '<div isdraggable="false" class="products">',
        '<div isdraggable="false" class="row landscape">',
            '<tpl for=".">',
                '{% if (xindex % 2 === 1) { %}',
                    '<div isdraggable="false" class="product" ref="{id}">',
                        '<span style="float:right;"><img isdraggable="false" src="resources/icons/wishlist_temp.png" class="wishlist-icon"></img></span>',
                        '<div isdraggable="false" class="image" style="background-image:url({searchImage});"><!----></div>',
                        '<div isdraggable="false" class="name">{styleName}</div>',
                        '<div isdraggable="false" class="price">Rs. {discountedPrice}</div>',
                    '</div>',
                '{% } %}',
            '</tpl>',
        '</div>',

        '<div isdraggable="false" class="row landscape">',
        '<tpl for=".">',
            '{% if (xindex % 2 === 0) { %}',
                '<div isdraggable="false" class="product" ref="{id}">',
                    '<span style="float:right;"><img isdraggable="false" src="resources/icons/wishlist_temp.png" style="width:24px; height:24px; opacity:0.5;"></img></span>',
                    '<div isdraggable="false" class="image" style="background-image:url({searchImage});"><!--<span style="float:right;"><img isdraggable="false" src="resources/icons/wishlist_temp.png" class="wishlist-icon"></img></span>--></div>',
                    '<div isdraggable="false" class="name">{styleName}</div>',
                    '<div isdraggable="false" class="price">Rs. {discountedPrice}</div>',

                '</div>',
            '{% } %}',
        '</tpl>',
    '</div>',
    '</div>');
}, 
```

这是此模板的 CSS：

```
.products .x-innerhtml{display:table;table-layout:fixed;width:100%;height:100%;border:1px solid #ccc;border-width:0 1px 1px 0}
.products .row{display:table-row}
.products .row>*{display:table-cell}
.products .row:last-child .product{border-bottom:0}
.products .product{background-size:80%;background-position:center;background-repeat:no-repeat;border-width:0 1px 1px 0;border-style:solid;border-color:#ddd;text-align:center}
.products .product .image{height: 240px;width: 180px;background-repeat:no-repeat;background-position:center center}
.products .product img{-webkit-border-radius:5px;border-radius:5px}
.products .product .name{width:100%;padding:20px 10px 5px 10px;color:black;font-size:16px;overflow:hidden;text-overflow:ellipsis; font-size: 60%}
.products .product .price{width:100%;font-size:12px;color:#d14747;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.products .landscape .product{width: 300px;padding: 5px;}
.products .landscape .product .image{margin-top:36px; margin: auto;}
.products .wishlist-icon {width:24px; height:24px; opacity:0.5;} 
```

我曾尝试更改`minWidth`searchPanel，但这也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:19:08.880

在渲染 HTML 模板时，sencha touch 会打乱翻译计算并创建一个小于显示所有项目所需的视口。这可以通过创建所有作为父容器的一部分呈现为 Sencha Touch 组件（`Panel`/`Component`而不是`div`tpl 中的 s ）的组件来解决，在那里取消`tpl`. 如果需要，您仍然可以在这些单独的容器中使用 tpl。

# python - PyUno Bridge 对象模型是否存在？

> ID：15088308
> 
> 赞同：2
> 
> 时间：2013-02-26T11:46:04.373
> 
> 标签：python, pyuno

我已经设法访问 LibreOffice.calc，打开我的文件，选择我的工作表和 getValue() 和 getFormula()...也就是说，我的工作（几乎）完成了，但是... PyUno 桥只是一个桥而且不是很Pythonic。

例如，`for sheet in sheets:`抛出以下异常：`TypeError: 'pyuno' object is not iterable`

那么，问题是，是否有人在某个地方拥有一个针对 LibreOffice（calc）对象模型的开源 Pythonic 库？

```
off = LibreOffice()
calc = off.Open(file)
sheets = calc.getSheets()
for sheet in sheets:
    print(sheet.name)
    rng = sheet.Range("A1:C5")
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-06T09:25:35.523

这是您应该做的：

```
sheets = calc.getSheets()
sheet_names = sheets.getElementNames()

for sheet_name in sheet_names:
    print(sheet_name)
    sheet = sheets.getByName(sheet_name) 
```

代码不会说谎：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T20:08:11.300

还没有这样的事情。我自己一直在尝试这样的东西，这里是工作，不清楚它是否会被释放。我的方法是获取 doxygen 输出并将其用作代码生成器的输入以创建一组包装器类，然后甚至可以在 python 中为测试帧实现这些。

# c++ - 如何生成总和为 100 的随机数？

> ID：15088309
> 
> 赞同：1
> 
> 时间：2013-02-26T11:46:14.297
> 
> 标签：c++

我需要生成四个随机生成的数字，总和必须为 100。这些数字必须在 1 到 100 的范围内。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T11:55:31.657

您可以生成四个随机数，例如在 0..100 范围内，然后将它们重新缩放为总和为 100：

`x_i' = 1 + x_i*96.0/sum`

**此解决方案不提供 {x_i} 的均匀分布。**

@PeterWood 为这个问题找到了更好的答案[随机数加到 100：Matlab](https://stackoverflow.com/questions/8064629/random-numbers-that-add-to-100-matlab)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T11:52:28.760

从范围 1..97 生成第一个随机数。

然后从范围 1..(98-first) 生成第二个随机数

然后从范围 1..(99-(first+last)) 中生成第三个随机数

最后将最后一个数字设置为 100 - (first+second+third)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T11:58:49.447

如果 [1,100] 范围内的整数（明显衰减到 [1,97]）是您需要的：

```
double x1 = random(0, 1); 
double x2 = random(0, 1); 
double x3 = random(0, 1); 
double x4 = random(0, 1); 

double sum = x1+x2+x3+x4; 

int n1 = 1 + x1*96.0/sum; 
int n2 = 1 + x2*96.0/sum; 
int n3 = 1 + x3*96.0/sum; 

int n4 = 100 - n1 - n2 -n3; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T11:52:18.283

生成 1 到 100-3 之间的第一个，1 到 100-first-2 之间的第二个，1 到 100-(first+second)-1 之间的第三个，以及第四个 = 100-(first+second+third)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T12:18:50.343

问题描述中没有说明每个数字必须在 1 到 100 的范围内。您可以在每次通过时改变 mod。就像是：

```
int sum = 0;
std::vector<int> randomNums();
while (sum != 100) {
    const int randomNum = std::rand() % (99 - sum);
    sum += randomNum
    randomNums.push_back(randomNum);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-15T18:50:08.117

```
Already answered above, but if anyone is looking for a working example to copy and try quickly:

int main()
{
std::vector<int> v1;

int randNum1 = rand()%(97) + 1;
int randNum2 = rand()%(98-randNum1) +1;
int randNum3 = rand()%(99 - (randNum1+randNum2)) +1;
int randNum4 = 100 -(randNum1+randNum2+randNum);

v1.push_back(randNum1);
v1.push_back(randNum2);
v1.push_back(randNum3);
v1.push_back(randNum4);

int sum = 0;
for(const auto &itr : v1)
{
    cout << itr <<endl;
    sum =sum+itr;
}
cout << "sum is : " << sum <<endl;

return 0; 
```

}

# java - Junit 和 Jmock 测试 Springs TransactionSynchronizationManager

> ID：15088319
> 
> 赞同：2
> 
> 时间：2013-02-26T11:46:37.323
> 
> 标签：java, spring, jmock

我有一些使用事务同步管理器的代码..但我似乎无法让它在模拟中工作..我在模拟实体管理器和事务管理器..以便我的上下文保存一个实体并调用提交...... TransactionSynchronizationManager 确实似乎没有被击中……在测试中？

```
 this.transactionTemplate.execute(new TransactionCallback<E>() {
                @Override
                public E doInTransaction(TransactionStatus status) {    
                    // update entities

                    TransactionSynchronizationManager.registerSynchronization(new NotificationTransactionSynchronization(){
                       @Override
                       public void afterCommit() {
                    // do some post commit work
                                   int i = notifier.notifyAllListeners();
                       }
                    });

                }
            }); 
```

我的测试课：

```
@Test
public void testHappyPath() {

    context.checking(new Expectations() {
        {
            allowing(platformTransactionManager).getTransaction(definition);
            will((returnValue(status)));

            oneOf(platformTransactionManager).commit(status);

                         //next line never gets hit... so the test fails...
                         //if i remove it will pass but i need to check that it works...

            oneOf(mockNotifier).notifyAllListeners();

        }
    });
    this.TestClass.process();
    context.assertIsSatisfied();            
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-23T17:47:38.063

最近，我不得不测试使用事务挂钩的代码，经过一番调查，我得到了以下解决方案：

源代码：

```
public void methodWithTransactionalHooks() {

    //...

    TransactionSynchronizationManager.registerSynchronization(
        new TransactionSynchronizationAdapter() {
            public void afterCommit() { 
                // perform after commit synchronization
            }
        }
    );

    //...
} 
```

测试：

```
@Transactional
@Test
public void testMethodWithTransactionalHooks() {

    // prepare test

    // fire transaction synchronizations explicitly
    for(TransactionSynchronization transactionSynchronization 
        : TransactionSynchronizationManager.getSynchronizations()
    ){
        transactionSynchornization.afterCommit();
    }

    // verify results
} 
```

默认情况下，测试设置为回滚，因此不会触发 afterCommit 同步。为了测试它，显式调用是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T12:06:35.007

我不确定我是否理解，但如果你有一个模拟事务管理器，那么谁会调用通知器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T10:21:00.243

我遇到了同样的问题，在我的情况下添加

```
@Rollback(false) 
```

对测试方法有帮助。

See [https://stackoverflow.com/a/9817815/1099376](https://stackoverflow.com/a/9817815/1099376)

# iphone - 这个 iphone uiview 行为名称如何

> ID：15088320
> 
> 赞同：1
> 
> 时间：2013-02-26T11:46:37.183
> 
> 标签：iphone, uiview, behavior

我怎样才能做出这种`UIView`行为？

![第一步——触摸任何设置按钮](../Images/d222d3c5333131606118c90c59d6710d.png) ![step tow – 当前窗口向左或向右移动](../Images/cd6f11b7f439ce48870d63044491ba19.png)

我在几个应用程序中看到了这一点，这很有趣——这是标准的还是自定义的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:50:49.283

检查下面的链接并下载源代码:)

[检查链接](http://www.cocoacontrols.com/platforms/ios/controls/jasidepanels)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:50:05.347

这是一个自定义控件。它不是 iOS 的标准控件。这是开始的[示例](http://www.cocoacontrols.com/platforms/ios/controls/saslidemenu)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:06:27.540

你有一个滑动菜单的第三方插件：[https ://github.com/mikefrederick/MFSideMenu](https://github.com/mikefrederick/MFSideMenu)

或者你可以自己实现这个补间

```
CGRect frame = yourView.frame;
frame.origin.x = 0;
[UIVIew animateWithDuration:1.0f animations:^(void){
    frame.origin.x += 100; //<-Here's the animation
    yourView.frame = frame;
}]; 
```

# c# - 标签 UserPaint 绘制的文本不适合

> ID：15088322
> 
> 赞同：0
> 
> 时间：2013-02-26T11:46:42.223
> 
> 标签：c#, winforms, labels, ownerdrawn

我有一个自定义标签类，绘制的文本不适合。**我在这里做错了什么？**

```
class MyLabel: Label
{
    public MyLabel()
    {
        SetStyle(ControlStyles.SupportsTransparentBackColor | ControlStyles.UserPaint, true);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        using (LinearGradientBrush brush = new LinearGradientBrush(ClientRectangle, Color.Black, Color.LightGray, LinearGradientMode.ForwardDiagonal))
            e.Graphics.DrawString(Text, Font, brush, ClientRectangle);
    }
} 
```

如果我将 MyLabel 的文本设置为“123456790 123456790”（**AutoSize = true**），那么我在 Designer（或在运行时）中看到“1234567890 123456789”（没有最后一个零，但有一些空格）。如果我尝试“1234567890 1234567890 1234567890 1234567890”，那么将有“1234567890 1234567890 1234567890 12345678”（没有“90”，但还有一些空间）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:29:21.030

```
e.Graphics.DrawString(Text, Font, brush, ClientRectangle); 
```

您使用了错误的文本呈现方法。Label 类根据 TextRenderer.MeasureText() 的返回值自动调整自身大小。因此，您必须使用 TextRenderer.DrawText() 来获得完全相同的渲染输出。您还可以将标签的 UseCompatibleTextRendering 属性设置为 true，但这不应该是您的首选。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:51:01.293

使用[Graphics.MeasureString](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.measurestring%28v=vs.71%29.aspx)获取所需的边界框大小，然后将标签表面的大小设置为该大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:13:52.477

这是针对所描述问题的解决方案（可能不是最好的解决方案），可以改写为“具有渐变文本颜色的自动调整大小的标签”。

```
class MyLabel: Label
{
    private bool _autoSize = true;
    /// <summary>
    /// Get or set auto size
    /// </summary>
    public new bool AutoSize
    {
        get { return _autoSize; }
        set
        {
            _autoSize = value;
            Invalidate();
        }
    }

    public MyLabel()
    {
        SetStyle(ControlStyles.SupportsTransparentBackColor | ControlStyles.UserPaint, true);
        base.AutoSize = false;
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        // auto size
        if (_autoSize)
        {
            SizeF size = e.Graphics.MeasureString(Text, Font);
            if (ClientSize.Width < (int)size.Width + 1 || ClientSize.Width > (int)size.Width + 1 ||
            ClientSize.Height < (int)size.Height + 1 || ClientSize.Height > (int)size.Height + 1)
            {
                // need resizing
                ClientSize = new Size((int)size.Width + 1, (int)size.Height + 1);
                return;
            }
        }
        using (LinearGradientBrush brush = new LinearGradientBrush(ClientRectangle, Color.Black, Color.LightGray, LinearGradientMode.ForwardDiagonal))
        e.Graphics.DrawString(Text, Font, brush, ClientRectangle);
    }
} 
```

背后的想法很简单：覆盖 AutoSize 并在 Paint 事件中处理它（一切都在一个地方），如果需要的文本大小与 ClientSize 不同 - 调整大小控制（这将导致重绘）。一件事是你必须在宽度和高度上加上 +1，因为 SizeF 有分数，有时 +1 像素比松散 1 像素更好，而且你的文本不合适。

# javascript - 使用 deferred resolve() 和 when() 时传递参数

> ID：15088327
> 
> 赞同：1
> 
> 时间：2013-02-26T11:47:10.847
> 
> 标签：javascript, image, asynchronous, load, jquery-deferred

我正在开发一个闪存卡网页，我想知道预加载的图像何时加载或遇到错误。一旦我有了每张图片的状态，我就会采取一些行动。

我将我的代码基于stackoverflow帖子[等待图像加载后再继续](https://stackoverflow.com/questions/8645143/wait-for-image-to-be-loaded-before-going-on)

```
function loadSprite(src) {
    var deferred = $.Deferred();
    var sprite = new Image();
    sprite.onload = function() {
        deferred.resolve();
    };
    sprite.src = src;
    return deferred.promise();
} 
```

和加载精灵的函数

```
var loaders = [];
loaders.push(loadSprite('1.png'));
loaders.push(loadSprite('2.png'));
loaders.push(loadSprite('3.png'));
$.when.apply(null, loaders).done(function() {
// callback when everything was loaded
}); 
```

我已修改 loadSprite 解析以返回状态结果：

```
deferred.resolve("STATUS RESULT"); 
```

和什么时候

```
$.when.apply(null, loaders).done(function("STATUS RESULT") {
  // callback when everything was loaded
  //Do something with "STATUS RESULT"
}); 
```

问题是我无法为每次调用分离出“状态结果”`loaders.push(loadSprite(file to load));` 那是我只得到一个变量而不是每次调用`loadSprite`

我没想到我上面的代码可以工作，这更像是对我自己的一个示范，我可以把一些东西传回去。

我无法解决这个问题，感谢所有帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:54:38.957

实际上，它按预期工作。您可以稍微调整您的*创建者方法，例如*

```
function loadSprite( src ) {
    return $.Deferred(function( promise ) {
        var sprite = new Image();

        sprite.onload = promise.resolve.bind( null, "status result" );
        sprite.src = src;
    }).promise();
} 
```

现在，当您将一些*承诺对象*推入一个数组并应用于该数组`.when()`时

```
loaders.push(loadSprite('1.png'));
loaders.push(loadSprite('2.png'));
loaders.push(loadSprite('3.png')); 
```

each `status result`, 将在处理程序的*arguments*对象中列出`.done()`。所以

```
$.when.apply(null, loaders).done(function() {
    console.log( arguments[ 0 ] ); // status result
    console.log( arguments[ 1 ] ); // status result
    // etc
}); 
```

另外，请记住，只有在**成功解决****所有**承诺对象时**才会**触发`.done handler`of 。`.when()`

 ******这反过来意味着，如果您的其中一个图像由于某种原因无法加载，则它的承诺将永远不会达到`resolved`状态，因此您的`.when()`处理程序将永远不会触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-29T13:07:57.207

```
function function_1()
{
    // Async part example
    var call = $.ajax({
        //....
    });
    call.then(handelSuccess);

    var df = $.Deferred();
    function handelSuccess(data, status, jqXHR) {
        //some code
        df.resolve(data);
    }

    return df;
} 
```

这是如何接收该数据的一种方法：

```
function main()
{
    var df = function_1();
    $.when(df).done(function () {
        df.promise().then(function (data) {
            console.log(data);
        });
    });
} 
```******

# macos - Applescript 在文件名中添加前导零，如何？

> ID：15088328
> 
> 赞同：3
> 
> 时间：2013-02-26T11:47:11.497
> 
> 标签：macos, applescript

我需要重命名子文件夹中的文件，使数字前缀长度为三位数。

名称模式是：1 Audio Track.aiff 2 Audio Track.aiff 等...

我试图弄清楚该怎么做，但到目前为止，我只是头疼得厉害。

感谢所有帮助。

附言。我确实找到了这个子例程，但遗憾的是我的脚本技能无法很好地利用它。

```
on add_leading_zeros(this_number, max_leading_zeros)
 set the threshold_number to (10 ^ max_leading_zeros) as integer
 if this_number is less than the threshold_number then
 set the leading_zeros to ""
 set the digit_count to the length of ((this_number div 1) as string)
 set the character_count to (max_leading_zeros + 1) - digit_count
 repeat character_count times
 set the leading_zeros to (the leading_zeros & "0") as string
 end repeat
 return (leading_zeros & (this_number as text)) as string
 else
 return this_number as text
 end if
end add_leading_zeros 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:36:40.113

尝试：

```
on add_leading_zeros(this_number, max_leading_zeros)
    return (do shell script "printf \"%0" & max_leading_zeros & "d\"" & this_number)
end add_leading_zeros

set xxx to add_leading_zeros(5, 2) 
```

或者包括文本：

```
on add_leading_zeros(maxPrefix, myString)
    set this_number to (do shell script "grep -Eo ^[0-9]* <<< " & quoted form of myString)
    set extraZeros to maxPrefix - (length of this_number)
    if extraZeros > 0 then
        set myNumber to (do shell script "printf \"%0" & extraZeros & "d\"" & this_number)
        set myText to myNumber & (do shell script " sed 's/^[0-9]*//' <<< " & quoted form of myString)
    end if
end add_leading_zeros

set xxx to "4441 Audio Track.aiff"
set xxx to add_leading_zeros(6, xxx) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T13:41:01.297

我会选择一个更简单的解决方案：

```
on add_leading_zeros(this_number, max_leading_zeros)
    return text (max_leading_zeros * -1) thru -1 of ("00000000000000000" & this_number)
end add_leading_zeros 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:27:36.373

在这里，我向您展示了您的子例程的用法，我添加了日志语句，以便您了解它是如何工作的。希望能帮助到你：

```
set thisFilename to "1 Audio Track.aiff"

log "thisFilename: " & thisFilename
set numberPrefix to (first word of thisFilename) as number
log "numberPrefix as number: " & numberPrefix

set numberPrefixWithLeadingZeros to my add_leading_zeros(numberPrefix, 2)
log "numberPrefixWithLeadingZeros as text: " & numberPrefixWithLeadingZeros

set newFileName to numberPrefixWithLeadingZeros & " Audio Track.aiff"
log newFileName

-- ADDING LEADING ZEROS: place leading zeros (0001, 023, etc.) before a number
-- if the maximum number of leading zeros is set to 2, then the results will range from 001 to 999, and so on.
on add_leading_zeros(this_number, max_leading_zeros)
    set the threshold_number to (10 ^ max_leading_zeros) as integer
    if this_number is less than the threshold_number then
        set the leading_zeros to ""
        set the digit_count to the length of ((this_number div 1) as string)
        set the character_count to (max_leading_zeros + 1) - digit_count
        repeat character_count times
            set the leading_zeros to (the leading_zeros & "0") as string
        end repeat
        return (leading_zeros & (this_number as text)) as string
    else
        return this_number as text
    end if
end add_leading_zeros 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:43:38.120

让我们将您的问题分解为几个步骤。

首先，您要从查找器中检索文件。现在，假设您选择了一个文件夹并希望将脚本应用到其随附的文件中。

```
tell application "Finder"
    set theFolder to the selection
    set theFiles to every file of item 1 of theFolder 
```

当你抓住 Finder 的选择时，你会得到一个列表，因此是第 1 项。这也让你有机会通过选择几个文件夹并使用重复循环来迭代它们来扩大它。

接下来，我们要遍历每个文件，所以让我们设置一个循环，调用一个函数并将我们正在查看的当前文件的文件名作为字符串传递给它：

```
repeat with aFile in theFiles
    set originalName to the name of aFile
    set newName to my threeDigitPrefix(originalName) 
```

我们调用的子程序是一个非常简单的子程序，它首先将文件名字符串分开并将其存储在一个列表中：

```
set AppleScript's text item delimiters to " "
set splitName to (every text item of originalName) as list 
```

然后我们将检查文件名是否以数字开头，如果不是，则退出函数。

```
try
    first item of splitName as number
on error
    return "FAILED" -- originalName does not start with a number
end try 
```

现在我们将现有前缀分配给一个变量并检查它的长度以确定我们需要在文件名中添加多少个零：

```
set thePrefix to the first item of splitName

if the length of thePrefix is 1 then
    set thePrefix to "00" & thePrefix
else if the length of thePrefix is 2 then
    set thePrefix to "0" & thePrefix
end if 
```

然后我们将前缀放回包含我们分解的文件名的列表中，然后重新组合它并将其返回给调用它的循环：

```
set the first item of splitName to thePrefix
return splitName as string 
```

最后我们检查函数没有失败，并用我们刚刚从函数中得到的字符串重命名文件：

```
if newName is not "FAILED" then
    set the name of aFile to newName
end if 
```

我们完成了。把它们放在一起，你会得到这个：

```
tell application "Finder"
    set theFolder to the selection
    set theFiles to every file of item 1 of theFolder

    repeat with aFile in theFiles
        set originalName to the name of aFile
        set newName to my threeDigitPrefix(originalName)

        if newName is not "FAILED" then
            set the name of aFile to newName
        end if
    end repeat
end tell

on threeDigitPrefix(originalName)
    set AppleScript's text item delimiters to " "
    set splitName to (every text item of originalName) as list

    try
        first item of splitName as number
    on error
        return "FAILED" -- originalName does not start with a number
    end try

    set thePrefix to the first item of splitName

    if the length of thePrefix is 1 then
        set thePrefix to "00" & thePrefix
    else if the length of thePrefix is 2 then
        set thePrefix to "0" & thePrefix
    end if

    set the first item of splitName to thePrefix
    return splitName as string

end threeDigitPrefix 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T15:51:45.213

您也可以只使用 shell 脚本：

`for f in *.aif; do mv "$f" "$(printf %03d "${f%% *}") ${f#* }"; done`

这将搜索当前文件夹下的所有文件：

`IFS=$'\n'; for f in $(find "$PWD" -name '*.aif'); do folder=${f%/*}; file=${f##*/}; mv "$f" "$folder/$(printf %03d "${file%% *}") ${file#* }"; done`

*   `%%`从末尾删除最长`#`的模式，从开始删除最短的模式
*   `IFS=$'\n'`将输入字段分隔符设置为换行符，而不是空格、制表符和换行符

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T15:04:30.283

我已经更改了脚本以适应工作流程的变化。我现在正在重命名 mp3 文件而不是 aif 文件类型，并且我在新文件名中添加了父文件夹名称的前缀。

脚本如下所示：

```
IFS=$'\n'; for f in $(find "$PWD" -name '*.mp3'); do folder=${f%/*}; file=${f##*/}; mv "$f" "$folder/${folder##*/}$(printf %03d "${file%% *}") ${file#* } " ;done 
```

但是我遇到了麻烦。如果文件夹包含超过 10 个文件，则似乎存在问题（在某些情况下！）。

我使用两种不同的文件类型 .docx 文件和 .mp3 文件设置了两个测试用例。测试用例基本上是 10 个子文件夹，每个子文件夹有 10 个文件。这些文件根据模式命名：N Audio Track.xxx，并按顺序编号为 1-10。我似乎得到了一些奇怪的结果。在 .docx 文件的情况下，我得到了正确的结果，但如果我使用 mp3 文件设置完全相同的文件夹和文件结构，我会在所有包含 10 多个文件的文件夹中得到奇怪的结果。我得到一个重命名为 000 Audio Track.mp3 的文件，这很奇怪，而且应该是 008 和 009 的文件也不存在。我完全不知道可能导致这种情况的原因。

# django - 从 Django 列表中删除重复项

> ID：15088331
> 
> 赞同：1
> 
> 时间：2013-02-26T11:47:30.597
> 
> 标签：django

对不起，如果这是一个基本问题，但我似乎无法解决这个问题！：/

我的应用程序填充文件夹中的文件列表。然后它查询数据库并创建文件名的查询集。

我希望合并列表，然后删除重复项。最终列表将在模板上列出，其中包含文件夹中但尚未添加到数据库中的文件，

视图.py：

```
def Image_Add(request):
    path="..."
    images =os.listdir(path)
    usedimage=Images.objects.values('imageurl').distinct()
    result=[]

    for image in images:
        result.append(image)

    for image2 in usedimage:
        result.append(image2)

    imagelis=set(result)
    imagelist=list(imagelis)

    return TemplateResponse(request, 'Image_Add.html', {'form':imagelist}) 
```

但是，在模板上显示的所有文件都没有删除重复项。（我目前在“ `imagelis=set(result)`”行出现错误）

感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T11:53:52.137

采用

```
usedimage=Images.objects.values_list('imageurl', flat=True).distinct() 
```

代替

```
usedimage=Images.objects.values('imageurl').distinct() 
```

请参阅[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)。

`values()`返回不可散列类型的 dicts。这会导致错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:58:47.687

```
usedimage=Images.objects.values_list('imageurl', flat=True).distinct()

for image in usedimage:
    Images.objects.filter(pk__in=Images.objects.filter(imageurl=imageurl
        ).values_list('id', flat=True)[1:]).delete() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:59:09.397

正如凯瑟琳所说，您可以过滤 django quesy 本身。

或者，要删除重复项，您可以尝试设置这是一个示例。

```
import sets
t = sets.Set(['a', 'b', 'c', 'd'])
t1 = sets.Set(['a', 'b', 'c'])

print t | t1
print t - t1 
```

# php - PHP字符串 - 删除数组或单词并检查其他

> ID：15088333
> 
> 赞同：2
> 
> 时间：2013-02-26T11:47:32.417
> 
> 标签：php, arrays, string, match

我有一个字符串：

```
$data = "String contains works like apples, peaches, banana, bananashake, appletart"; 
```

我还有 2 个包含多个单词的 std 数组，如下所示：

```
$profanityTextAllowedArray = array();
$profanityTextNotAllowedArray = array(); 
```

例如：

```
$profanityTextAllowedArray
(
    [0] => apples
    [1] => kiwi
    [2] => mango
    [3] => pineapple
) 
```

如何获取字符串`$data`并首先从中删除任何单词`$profanityTextAllowedArray`，然后检查字符串中应标记`$data`的任何单词？`$profanityTextNotAllowedArray`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:54:29.337

```
$list = explode( ' ', $data );

foreach( $list as $key => $word ) {
  $cleanWord = str_replace( array(','), '', $word ); // Clean word from commas, etc.
  if( !in_array( $cleanWord, $profanityTextAllowedArray ) ) {
    unset($list[$key]);
  }
}

$newData = implode( ' ', $list ); 
```

让我知道是否清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:01:22.910

这样的事情可以帮助你：

```
$data = "apples, peaches, banana, bananashake, appletart";

$allowedWords = array('apples', 'peaches', 'banana');
$notAllowedWords = array('foo', 'appletart', 'bananashake');

$allowedWordsFilteredString = preg_replace('/\b('.implode('|', $allowedWords).')\b/', '', $data);

$wordsThatNeedsToBeFlagged = array_filter($notAllowedWords, function ($word) use ($allowedWordsFilteredString) {
    return false !== strpos($allowedWordsFilteredString, $word);
});

var_dump($wordsThatNeedsToBeFlagged); 
```

# php - 在验证电子邮件中显示来自表单的用户输入

> ID：15088338
> 
> 赞同：1
> 
> 时间：2013-02-26T11:47:47.790
> 
> 标签：php

我的注册表单有一点问题：当发送验证电子邮件以供用户激活帐户时，我试图让用户输入的 UserID 字段显示为用户。目前，我只需要在验证邮件中显示*用户提供*的用户 ID 和*随机生成的 PIN。*请任何人都可以为我更正此问题，因为 PIN 正确显示在电子邮件中，但不是用户 ID。

下面是我的代码：

```
<div id="wrap">
        <!-- start PHP code -->
        <?php

            mysql_connect("localhost", "root", "") or die(mysql_error()); // Connect to database server(localhost) with root .
            mysql_select_db("registrations") or die(mysql_error()); // Select registration database.

            $email="";

            if( isset($_POST['fullname']) // Is the name field being posted; it does not matter whether it's empty or filled.  
    && // This is the same as the AND in our statement; it allows you to check multiple statements.  
    !empty($_POST['fullname']) // Verify if the field name is not empty 
    AND isset($_POST['email']) // Is the email field being posted; it does not matter if it's empty or filled.  
    && // This is the same as the AND in our statement; it allows you to check multiple statements.  
    !empty($_POST['email']) ) // Verify if the field email is not empty   
      {

                $fullname = mysql_real_escape_string($_POST['fullname']);
                $email = mysql_real_escape_string($_POST['email']);

                }
                if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/", $email)){
                    // Return Error - Invalid Email
                    $msg = 'The email you have entered is invalid, please try again.';
                }else{
                    // Return Success - Valid Email
                    $msg = 'Your account has been created, <br /> please verify it by clicking the activation link that has been send to your email.';
                    }

                    $hash = md5( rand(0,1000) ); // Generate random 32 character hash and assign it to a local variable.

                    $PIN = rand(1000,5000); // Generate random number between 1000 and 5000 and assign it to a local variable.

$to      = $email; // Send email to our user  
$subject = 'Signup | Verification of your BFS Account'; // Give the email a subject  
$message = 'Thanks for signing up! 
Your account has been created, you can login with the following credentials after you have activated your account by clicking the url below. 
------------------------ 
USER ID: '.$UserID.' // **THIS IS WHERE I HAVE THE PROBLEM DISPLAYING USER ID**
PIN: '.$PIN.' 
------------------------ 
Please click this link to activate your account: 
http://www.website.com/verify.php?email='.$email.'&hash='.$hash.' 
'; // Our message above including the link  
$headers = 'From:noreply@website.com' . "\r\n"; // Set from headers  
mail($to, $subject, $message, $headers); // Send our email  

        ?>
        <!-- stop PHP Code -->           

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:52:01.683

你没有分配任何东西给`$UserID`. 作为一个疯狂的猜测，您可能需要：

```
$UserID = $_POST['userid']; //  or
$UserID = $_POST['user_id']; 
```

PS请处理您的代码缩进。

# android - Android Webview 禁用所有链接但启用滚动

> ID：15088341
> 
> 赞同：7
> 
> 时间：2013-02-26T11:47:51.607
> 
> 标签：android, webview, scrollbar, hyperlink

我在加载网页的android中使用Webview，但是我希望禁用所有链接并且Web视图应该是可滚动的。

我现在正在使用以下代码：

```
tnc.setOnTouchListener(new View.OnTouchListener() {
                     public boolean onTouch(View v, MotionEvent event) {
                        return true;
                     }
                 }); 
```

这使得 web 视图被禁用，但滚动也消失了。

我也试过：

```
tnc.setClickable(false); 
```

但这也行不通。请帮帮我。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T12:05:12.797

如果要覆盖点击链接中的链接`WebView`，可以使用 的[`shouldOverrideUrlLoading`](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideKeyEvent%28android.webkit.WebView%2C%20android.view.KeyEvent%29)方法[`WebViewClient`](http://developer.android.com/reference/android/webkit/WebViewClient.html)。

```
webView.setWebViewClient(new WebViewClient(){
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-14T08:46:28.483

只需将其添加到布局中的 webview `android:focusableInTouchMode="false"`

# javascript - 个性化的javascript对话框？

> ID：15088344
> 
> 赞同：1
> 
> 时间：2013-02-26T11:48:17.520
> 
> 标签：javascript, dialog

我想个性化（设计css，按钮......）一个“确认”javascript对话框，但想保持它的持久性。该对话框在倒计时后显示，因此即使用户正在运行浏览器的另一个选项卡或运行另一个应用程序，它也很重要。

我在网络上找到了许多漂亮的解决方案，但它们都忽略了持久性的这一方面。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-26T19:48:54.140

通过坚持，我不确定你的意思。如果您正在寻找一种解决方案，使对话框阻止用户甚至无法关闭选项卡，除非他们提供数据，那么这是不可能的。

不过，我最近开发了自己的对话框。非常容易使用 css 进行样式设置，请查看底部的演示以及网站[http://dialogjs.com/](http://dialogjs.com/)

在实际发布您的网站之前，我必须要求您确保它运行顺利，因为它不是 100% 没有错误的。还要注意可能会有重大变化的空间，因为它只是一个测试版本。

现在对于确认对话框，您只需

```
new Dialog()
.confirm("Continue?", function(result){
    this.data.continue = result;
})
.confirm(function(){return "Are you sure you wish to "+ (this.data.continue ? "continue" : "cancel")}, function(result){
}) 
```

您也可以编写自己的对话框类型[http://jsfiddle.net/q5zL7y6e/1/](http://jsfiddle.net/q5zL7y6e/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T15:07:32.073

**//HTML代码**

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <dialog id="dialog">
      <h4 id="dialog_header">Datenschutzhinweis</h4>
      <p id="dialog_text">
        Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
        eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam
      </p>
      <label
        ><input
          type="checkbox"
          id="dialog_checkbox"
          value="checked"
        />Einverstanden</label
      >
      <button onclick="Dialog_close()">Dialog schließen</button>
    </dialog>

    <script src="dialogJS.js"></script>
  </body>
</html> 
```

**//JS代码**

```
function Dialog_close() {
  var dialog_checkbox = document.getElementById("dialog_checkbox");
  var dialog = document.getElementById("dialog");
  var dialog_text = document.getElementById("dialog_text");
  if (dialog_checkbox.checked) {
    dialog.close();
  } else {
    dialog_text.style.color = "red";
  }
}

document.getElementById("dialog").showModal(); 
```

# git - 没有当前文件更改的 Git 分支

> ID：15088346
> 
> 赞同：2
> 
> 时间：2013-02-26T11:48:24.267
> 
> 标签：git

如果对 master 上的一些文件进行了一些更改并且我创建了一个分支，那么该分支是否可能不包含 master 分支上当前编辑的文件？

就像上次提交的干净分支一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:51:36.517

分支本身不会包含本地未提交的更改，但它们将保留在您的工作树中。

您可以隐藏它们（请参阅 参考资料`git help stash`）以获得干净的工作树。

# java - 在java中识别转义关键字和块

> ID：15088350
> 
> 赞同：2
> 
> 时间：2013-02-26T11:48:30.427
> 
> 标签：java, algorithm, jakarta-ee

我有一个命中 java 应用程序 (SOLR) 的查询。

查询的一种特定模式就像

```
http:server:port/app/select?q=(skunum:(2809553163000\+OR+09552883000\+OR+09553124000\)) 
```

如果您注意到每个项目编号的末尾都有一个转义字符。

我需要阻止此类查询访问我的应用程序。

我只需要知道如何识别这些特定查询？有没有模式匹配子句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:16:16.240

从根本上看，问题似乎是确定一个字符串（在这种情况下是 URL 查询字符串）是否包含一组字符（转义字符）中的任何一个。我可以想到两种方法。一种是使用[正则表达式](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#sum)：

```
// ignore queries containing a, b, or c in the query string
if (url.getQuery().matches("[abc]"))
{
    // ignore query
} 
```

另一种方法是使用一个函数来遍历一个字符串以查找给定集合中的字符。我在[这里](http://www.java2s.com/Code/Java/Data-Type/ChecksiftheStringcontainsanycharacterinthegivensetofcharacters.htm)`bool ContainsAny(String, char[])`找到了一个示例方法。正则表达式是一种更通用的解决方案（使用起来有点棘手，尤其是对于新手而言），但这种方法在这种情况下也足够了。`ContainsAny()`

更大的问题是输入验证。这不仅对正确的应用程序功能很重要，而且对安全性也很重要。尽一切可能采取任何措施来确保您处理的所有查询都符合您的规范并包含有意义的值。寻找 Java 或 SOLR 提供的 API 来促进这一点。

最后一点：在您提供的示例中，我不清楚其中是否存在真正的“转义”。我在每个数字后看到反斜杠 ( `\`)，但这些不一定是转义，因为 (`+`和) 后面的字符`)`不需要转义。实际上，URL 中的空格通常映射到`+`字符或`%20`.

# rest - 正确使用 REST

> ID：15088353
> 
> 赞同：2
> 
> 时间：2013-02-26T11:48:38.370
> 
> 标签：rest

我正在努力寻找如何为我的问题坚持正确的 REST 模式。我有 2 条路径`/User/`，`/Group/`它自己很好，但是我应该如何创建路径来创建从用户 1 到组 2 的链接，例如，我真的必须创建一个新路径，`/UserGroups/`例如真正的 REST？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:53:25.660

一般来说，没有定义严格的规则，但如果你给出一个代表你的代码的名称，那就更好了。

# asp.net-mvc-4 - HTML.Display() 不显示任何内容

> ID：15088356
> 
> 赞同：2
> 
> 时间：2013-02-26T11:48:46.250
> 
> 标签：asp.net-mvc-4

我刚开始使用 mvc 并具有以下代码：

```
@model AzureDemo.Models.User

@{
    ViewBag.Title = "Interests";
}

<h2>Interests</h2>

<p>
    @Html.ActionLink("Logout", "Logout")
</p>
<table>
    <tr>
        <th>
            Interests
        </th>
    </tr>

@foreach (var interest in Model.Interests) {
     <tr>
         <td>
            @Html.Display(interest)
        </td>
        //Tried like this
        <td>
            @Html.Display("id", interest.ToString())
        </td>
    </tr>
}

</table> 
```

User 中的 Interests 属性只是一个字符串列表。我正在尝试为用户显示表格中的每个兴趣。我还尝试在 Html.Display 中放置一个类似“test”的字符串，或者尝试使用 ToString() 但仍然没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:44:28.470

您可以像这样直接使用模型项目

```
@foreach (var interest in Model.Interests) {
 <tr>
     <td>
        @interest
    </td>
    // or this 
    <td>
        @interest.ToString()
    </td>
</tr>
} 
```

或者如果您在视图中显示 html 代码，那么这更安全

```
@foreach (var interest in Model.Interests) {
 <tr>
     <td>
        @Html.Raw(interest)
    </td>
</tr>
} 
```

也感谢这个机会；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T13:46:41.847

我建议您使用显示模板并摆脱视图中的所有 foreach 循环：

```
@model AzureDemo.Models.User

@{
    ViewBag.Title = "Interests";
}

<h2>Interests</h2>

<p>
    @Html.ActionLink("Logout", "Logout")
</p>
<table>
    <thead>
        <tr>
            <th>
                Interests
            </th>
        </tr>
    </thead>
    <tbody>
        @Html.DisplayFor(x => x.Interests)
    </tbody>
</table> 
```

然后定义相应的显示模板，该模板将为 Interests 集合的每个元素自动呈现 ( `~/Views/Shared/DisplayTemplates/Interest.cshtml`)：

```
@model AzureDemo.Models.Interest
<tr>
    <td>
        @Html.DisplayFor(x => x.Text)
    </td>
</tr> 
```

# jsf-2 - 基于 URL 调用 backing bean 方法

> ID：15088358
> 
> 赞同：4
> 
> 时间：2013-02-26T11:48:51.990
> 
> 标签：jsf-2

我在 JSF 中遇到了一个问题。有什么方法可以根据 URL 调用 backing bean 的方法吗？使用 Struts 时，我可以通过`structs-config`action 类来实现。当我从 Struts 迁移到 JSF 时，我遇到了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:44:30.163

您可以使用[PrettyFaces](http://ocpsoft.org/prettyfaces/)，它极大地改进了 JSF 导航。使您能够使用易于理解、可添加书签的 REST url。

如果您使用 Servlet 3.0，那么您只需将 PrettyFaces jar 添加到您的 Web 应用程序，使用页面映射注释您的托管 bean，并为特定映射选择操作：

```
import com.ocpsoft.pretty.faces.annotation.URLAction;
import com.ocpsoft.pretty.faces.annotation.URLMapping;
import com.ocpsoft.pretty.faces.annotation.URLMappings;

@ManagedBean(name = "pageViewBean")
@URLMappings(mappings = {
    @URLMapping(id = "myAction",
    pattern = "/page/myAction", // URL mapped to jsf file
    viewId = "/page.xhtml"),    // jsf file
    @URLMapping(id = "myAction2",
    pattern = "/page/myAction2", // URL mapped to jsf file
    viewId = "/page.xhtml")})    // jsf file
public class PageViewBean
{

    @URLAction(mappingId = "myAction") // action for URL /page/myAction
    public void myAction()
    {
        ...
    }

    @URLAction(mappingId = "myAction2") // action for URL /page/myAction2
    public void myAction2()
    {
        ...
    } 
```

就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:20:36.900

您可以使用`<f:event type="preRenderView" />`，每次渲染页面时都会调用它，将其放在`<h:head>`标签上方

例如：

```
<f:event listener="#{myBean.myAction}" type="preRenderView" />
<h:head>
...
</h:head>
<h:body>
... 
```

在你的 bean 中：

```
public void myAction(ComponentSystemEvent event){
    ...
} 
```

# vb.net - 高级文本搜索和将特定字符串从文件导入 VB

> ID：15088359
> 
> 赞同：3
> 
> 时间：2013-02-26T11:48:52.253
> 
> 标签：vb.net, file, search, text

我将首先说这是我在 VBForums 上的第一篇文章，我已经潜伏了一段时间。我对VB相当陌生，只是为了完成我的论文而学习它。所以请原谅我的无知。

我想要做的是从另一个程序生成的日志文件中读取数据。我需要将该文件中的特定行带入 VB 以用于其他算法。此日志文件将不断更新，因此如果可能，它需要实时读取。

如果它很重要，则日志文件是从与另一个软件通信的 USB 设备生成的。

这是一个示例日志：

```
`
08:57:00.932    COM12
08:57:00.935    COM11
08:57:00.935    COM10
08:57:00.936    COM9
08:57:00.936    COM8
08:57:00.937    COM7
08:57:00.938    COM6
08:57:00.939    COM5
08:57:00.939    COM4
08:57:00.998    --> 0108000304FF0000
08:57:01.007    <-- 0108000304FF0000

TRF7970A EVM 

08:57:01.014    **** COM Port found! ****
08:57:05.009    --> 010A0003041001210000
08:57:05.009    COM4
08:57:05.173    <-- 010A0003041001210000

Register write request.

08:57:05.173    --> 010C00030410002101020000
08:57:05.280    <-- 010C00030410002101020000

Register write request.

08:57:05.280    --> 010B000304140601000000
08:57:05.715    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:05.716    --> 010A0003041001210000
08:57:05.822    <-- 010A0003041001210000

Register write request.

08:57:05.822    --> 010C00030410002101020000
08:57:05.929    <-- 010C00030410002101020000

Register write request.

08:57:05.929    --> 010B000304140601000000
08:57:06.364    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:06.365    --> 010A0003041001210000
08:57:06.470    <-- 010A0003041001210000

Register write request.

08:57:06.470    --> 010C00030410002101020000
08:57:06.576    <-- 010C00030410002101020000

Register write request.

08:57:06.576    --> 010B000304140601000000
08:57:07.011    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:07.012    --> 010A0003041001210000
08:57:07.117    <-- 010A0003041001210000

Register write request.

08:57:07.117    --> 010C00030410002101020000
08:57:07.223    <-- 010C00030410002101020000

Register write request.

08:57:07.223    --> 010B000304140601000000
08:57:07.658    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:07.659    --> 010A0003041001210000
08:57:07.764    <-- 010A0003041001210000

Register write request.

08:57:07.764    --> 010C00030410002101020000
08:57:07.870    <-- 010C00030410002101020000

Register write request.

08:57:07.870    --> 010B000304140601000000
08:57:08.305    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:08.306    --> 010A0003041001210000
08:57:08.411    <-- 010A0003041001210000

Register write request.

08:57:08.411    --> 010C00030410002101020000
08:57:08.517    <-- 010C00030410002101020000

Register write request.

08:57:08.517    --> 010B000304140601000000
08:57:08.952    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:08.952    --> 010A0003041001210000
08:57:09.058    <-- 010A0003041001210000

Register write request.

08:57:09.058    --> 010C00030410002101020000
08:57:09.164    <-- 010C00030410002101020000

Register write request.

08:57:09.164    --> 010B000304140601000000
08:57:09.585    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]

[AD87851A000007E0,7F]

[,40][,40]D
08:57:09.586    --> 010A0003041001210000
08:57:09.692    <-- 010A0003041001210000

Register write request.

08:57:09.692    --> 010C00030410002101020000
08:57:09.798    <-- 010C00030410002101020000

Register write request.

08:57:09.798    --> 010B000304140601000000
08:57:10.233    <-- 010B000304140601000000

ISO 15693 Inventory request.

[,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40][,40]D
08:57:10.234    --> 010A0003041001210000
08:57:10.340    <-- 010A0003041001210000

Register write request.

08:57:10.340    --> 010C00030410002101020000
08:57:10.446    <-- 010C00030410002101020000

Register write request.

` 
```

我需要能够得到这条线：[AD87851A000007E0,7F]

只需“AD87851A000007E0”，然后就可以在 VB 中使用该字符串。这是一个会改变的十六进制代码。

我已经能够从日志文件中读取，但没有产生有效的输出。

这是我一直在尝试使用的代码：

```
Function ReadData(ByRef keyword As String) As IEnumerable(Of String)
    Dim result = New List(Of String)
    Using reader = New StreamReader("C:\rfid-reader.log")
        Dim line As String = reader.ReadLine()
        Dim take = False
        Do While line IsNot Nothing
            If line.StartsWith("[") Then
                take = False
            End If
            If String.Equals("[" + keyword + ",", line) Then
                take = True
            End If
            If take And Not String.IsNullOrEmpty(line) And Not line.StartsWith("'") Then
                result.Add(line)
            End If
            line = reader.ReadLine()
    Label1.Text = line
        Loop
    End Using
    Return result
End Function 
```

老实说，我不确定代码是否不起作用，或者我是否只是在将字符串从函数中取出时做错了什么？该函数会按原样打印到 Label1.Text 吗？

我也试过这样调用函数：

```
Dim items = ReadData("AD87851A000007E0")

Label1.Text = Convert.ToString(items) 
```

这导致 Label1.Text 变为“System.Collections.Generic.List`1[System.String]”

* * *

## 编辑 1

```
Imports System.IO 
```

公开课形式1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim items = ReadData("AD87851A000007E0")

    Label1.Text = String.Join(Environment.NewLine, items)

End Sub

Function ReadData(ByRef keyword As String) As IEnumerable(Of String)
    Dim result = New List(Of String)
    Using reader = New StreamReader("C:\rfid-reader.log")
        Dim line As String = reader.ReadLine()
        Dim take = False
        Do While line IsNot Nothing

            take = False ' resetting take = false to avoide printing all lines

            If line.StartsWith("[" + keyword + ",") Then
                take = True
            End If

            If take And Not String.IsNullOrEmpty(line) And Not line.StartsWith("'") Then
                result.Add(line)
            End If
            line = reader.ReadLine()
        Loop
    End Using
    Return result
End Function 
```

结束类

编辑 2_ ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* ___**

迄今为止的新代码：

```
Imports System.IO 
```

公开课形式1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim items = ReadData("AD87851A000007E0")  ' Calling the specific hex code from the function. Advancement needed to get ALL hex codes.

    '   Dim items1 As String = Convert.ToString(items)
    '   Dim items2 As String = ""

    '   Dim k As Long
    '   k = InStrRev(items, ",")
    '   If k > 0 Then items2 = Left$(items, k)

    Label1.Text = String.Join(Environment.NewLine, items)  'Printing function result to Label1

End Sub

'Function to search log file for a specific hex code. Removes not needed portions of the string. Advancements needed: 
'Find ALL hex codes
'Ignore repeats until a reset is set true
'Store each hex code found in it's own variable for use in algorithms

Function ReadData(ByRef keyword As String) As IEnumerable(Of String)
    Dim result = New List(Of String)
    Using reader = New StreamReader("C:\rfid-reader.log")
        Dim line As String = reader.ReadLine()
        Dim take = False

        Do While line IsNot Nothing
            take = False ' resetting take = false to avoide printing all lines

            If line.StartsWith("[" + keyword + ",") Then
                take = True
            End If

            If take And Not String.IsNullOrEmpty(line) And Not line.StartsWith("'") Then
                line = line.Remove(0, 1) 'removing the extra parts of the line
                line = line.Remove(16, 4)
                result.Add(line) 'adding the valid result

            End If
            line = reader.ReadLine()
        Loop
    End Using
    Return result
End Function 
```

结束类

* * *

## 编辑 3

```
Imports System.IO 
```

公开课形式1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim items = ReadData("[")  ' Calling the specific hex code from the function. Advancement needed to get ALL hex codes.

    Label1.Text = String.Join(Environment.NewLine, items)  'Printing function result to Label1

End Sub

'Function to search log file for a specific hex code. Removes not needed portions of the string. Advancements needed: 
'Find ALL hex codes
'Ignore repeats until a reset is set true
'Store each hex code found in it's own variable for use in algorithms

Function ReadData(ByRef keyword As String) As IEnumerable(Of String)
    Dim result = New List(Of String)
    Using reader = New StreamReader("C:\rfid-reader.log")
        Dim line As String = reader.ReadLine()
        Dim line1 As String = "COOKIES"
        Dim line2 As String = "COOKIES1"
        Dim line3 As String = "COOKIES2"
        Dim line4 As String = "COOKIES3"
        Dim line5 As String = "COOKIES4"
        Dim line6 As String = "COOKIES5"
        Dim line7 As String = "COOKIES6"
        Dim line8 As String = "COOKIES7"
        Dim line1found = False
        Dim line2found = False
        Dim line3found = False
        Dim line4found = False
        Dim line5found = False
        Dim line6found = False
        Dim line7found = False
        Dim line8found = False
        Dim take = False

        Do While line IsNot Nothing

            take = False ' resetting take = false to avoide printing all lines

            If line.StartsWith(keyword) And Not line.StartsWith("[,4") And Not line.StartsWith("[z,") Then
                take = True
            End If

            If line.Contains(line1) Or line.Contains(line2) Or line.Contains(line3) Or line.Contains(line4) Or line.Contains(line5) Or line.Contains(line6) Or line.Contains(line7) Or line.Contains(line8) Then  'attempting to ignore duplicates
                take = False
            End If

            If take And Not String.IsNullOrEmpty(line) And Not line.StartsWith("'") Then
                line = line.Remove(0, 1) 'removing the extra parts of the line
                line = line.Remove(16, 4)
                result.Add(line) 'adding the valid result

                If line1 <> line And Not line1found Then  'assining results to variables for duplicate elimiation
                    line1 = line
                    line1found = True

                ElseIf line2 <> line And line1 <> line And Not line2found Then
                    line2 = line
                    line2found = True

                ElseIf line <> line3 And line <> line2 And line1 <> line And Not line3found Then
                    line3 = line
                    line3found = True

                ElseIf line <> line4 And line <> line3 And line <> line2 And line <> line1 And Not line4found Then
                    line4 = line
                    line4found = True

                ElseIf line <> line5 And line <> line4 And line <> line3 And line <> line2 And line <> line1 And Not line5found Then
                    line5 = line
                    line5found = True

                ElseIf line6 <> line And line5 <> line And line4 <> line And line3 <> line And line2 <> line And line1 <> line And Not line6found Then
                    line6 = line
                    line6found = True

                ElseIf line7 <> line And line6 <> line And line5 <> line And line4 <> line And line3 <> line And line2 <> line And line1 <> line And Not line7found Then
                    line7 = line
                    line7found = True

                ElseIf line8 <> line And line7 <> line And line6 <> line And line5 <> line And line4 <> line And line3 <> line And line2 <> line And line1 <> line And Not line8found Then
                    line8 = line
                    line8found = True

                End If
            End If
            line = reader.ReadLine()
        Loop
    End Using
    Return result
End Function 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:31:34.417

您的代码有几个问题。第一个问题是您使用`String.Equals`而不是`line.StartsWith`：

```
If String.Equals("[" + keyword + ",", line) Then
    take = True
End If 
```

您会注意到，在上面的代码中，它只会`take = True`在整行与字符串“[AD87851A000007E0”完全匹配时设置。但是您要查找的行不等于该字符串-它仅以该字符串开头。因此，您应该将该代码更改为：

```
If line.StartsWith("[" + keyword + ",") Then
    take = True
End If 
```

接下来，您将`Label1.Text = line`在读取每一行之后设置循环内部，无论该行是否匹配。您正在做的事情会起作用，但可能不会以您想要的方式进行。按照您现在的方式，它会用读取的每一行覆盖标签的整个文本内容。正如我所说，它对每一行都这样做，而不仅仅是匹配的行。由于您正忙于一个循环，因此在您完成之前屏幕实际上不会刷新，所以最后它只会显示文件中的最后一行。

如果希望它显示所有匹配的行，则需要将其移动到`If take...`块内，并且需要将这些行连接在一起，如下所示：

```
If take And Not String.IsNullOrEmpty(line) And Not line.StartsWith("'") Then
    result.Add(line)
    Label1.Text = Label1.Text & Environment.NewLine & line
End If 
```

但是，这仍然不是一个很好的方法。将 UI 代码与业务逻辑混合绝不是一个好主意，因此在调用后设置标签的直觉`ReadData`是正确的主意。但是，您不能用于`Convert.ToString`显示列表的内容。如您所见，这只会显示数据类型的名称。为此，您需要将列表中的字符串连接成一个字符串，如下所示：

```
Label1.Text = String.Join(Environment.NewLine, items) 
```

我用作`Environment.NewLine`分隔符，但您可以使用任何您想要的分隔符。例如，如果要将它们全部显示在一行上，则可以`", "`用作分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:31:39.713

我迟到了，但这是对您的 Edit 3 的修改，以简化几件事并创建一个框架，允许您扩展验证线路的方式：

```
Function readData() As List(Of String)
    readData = New List(Of String)
    Using reader As New StreamReader("C:\rfid-reader.log")
        While Not reader.EndOfStream
            For Each line In reader.ReadToEnd.Split(ControlChars.CrLf)
                If validLine(line) AndAlso Not readData.Contains(line.Split(",")(0).Substring(1)) Then readData.Add(line.Split(",")(0).Substring(1))
            Next
        End While
    End Using
End Function

Private Function validLine(line As String) As Boolean
    validLine = True
    'insert criteria to validate the line's format (you could also look at regex)
    If Not line.Trim.Length > 0 Then
        validLine = False
        Exit Function
    End If
    If Not line.Trim.StartsWith("[") AndAlso line.Trim.EndsWith("]") Then
        validLine = False
        Exit Function
    End If
    If Not line.Split(",").Length = 2 Then
        validLine = False
        Exit Function
    End If
    If Not line.Split(",")(0).Substring(1).Length > 1 Then
        validLine = False
        Exit Function
    End If
    If Not isHex(line.Split(",")(0).Substring(1)) Then
        validLine = False
        Exit Function
    End If
    '...
End Function

Private Function isHex(str As String) As Boolean
    isHex = True
    For i = 0 To str.Length - 1
        If Not {"1", "2", "3", "4", "5", "6", "7", "8", "9", "0", "A", "B", "C", "D", "E", "F"}.Contains(str.Substring(i, 1)) Then
            isHex = False
            Exit Function
        End If
    Next
End Function 
```

# java - Spring MVC 模型在 ArrayList 上阻塞

> ID：15088363
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:01.363
> 
> 标签：java, spring-mvc

我正在实现一个通用控制器，以便它处理 js/css 文件的编程声明，表示为一个 ArrayList，然后将其添加到模型中并推送到 jsp。

问题是一切正常，直到我将文件路径添加到 additionalJsFilePath 列表中，在该列表中我在浏览器中得到一个空白页面（什么都没有，没有 html 标记）。

相关代码如下：

*LoginController.java（扩展 BaseController）*

```
@RequestMapping(value="/login", method = RequestMethod.GET)
public String login(ModelMap model) {
    doInitialRenditions();

    this.addJsFilePath("../jquery.min.js"); // THIS LINE BREAKS IT
    /*
    this.addJsFilePath("../jquery.otherfile.js");
    this.addJsFilePath("../xxxx.login.js");
    */
    doFinalRenditions(model);

    model.addAttribute("jsFile",  "../jquery.min.js");
    return "login";

} 
```

*BaseController.java*

```
@Controller
public class BaseController {

public List<String> additionalJsFilePaths;
public List<String> additionalCssFilePaths;

protected void init(){
    additionalJsFilePaths= new ArrayList<String>();
    additionalCssFilePaths= new ArrayList<String>();
}

protected void doInitialRenditions(){
    init();
}

protected void addJsFilePath(String path){
    additionalJsFilePaths.add(path);
}

protected void addCssFilePath(String path){
    additionalCssFilePaths.add(path);
}

protected void doFinalRenditions(ModelMap model){
    model.addAttribute("jsFiles",  additionalJsFilePaths);
    model.addAttribute("cssFiles", additionalCssFilePaths);
}
} 
```

我什至没有输入任何代码来访问 .jsp 中的*jsFiles*列表，所以问题出在上述两个文件上。我填充 ArrayList 的事实足以打破它。另外：LoginController 中的所有 BaseController 代码都会发生同样的事情，所以不要认为继承是一些愚蠢的错误。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:52:27.030

注释不是继承的，所以 LoginController 不是控制器，您可以从基类继承，但是每个子类（每个单独的控制器）都需要注释..

这听起来也很糟糕

```
such that it handles programmatic declarations of js/css files 
```

分离您的视图和控制器逻辑 - MVC。在配置文件中声明和映射静态资源。

检查您的服务器日志（打开日志记录）。

对于听起来像你需要的基本异常处理，你应该考虑将这样的东西添加到你的 basecontrollerr

```
 @ExceptionHandler(Exception.class)
    public String myExceptionHandler(final Exception e) {
        final StringWriter sw = new StringWriter();
        final PrintWriter pw = new PrintWriter(sw);
        e.printStackTrace(pw);
        final String strStackTrace = sw.toString(); // stack trace as a string
        logger.error(strStackTrace); // send to logger first
        emailService.sendAlertMail(strStackTrace);
        return "exception"; // default friendly excpetion message for user
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:51:08.723

解决了……有点。代码的操作本身没有问题（暂时忽略是否像上面那样做 js/css 的问题。由于 JVM，阻塞实际上是笔记本电脑上的交换文件使用（尽管它花了你很多时间）适当提醒实施日志记录以解决此问题）。为您的时间喝彩，为红鲱鱼感到抱歉。A

# ios - 在 iOS 中选择 Tableview 行时，Tableview 图像未更改

> ID：15088364
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:02.083
> 
> 标签：ios, objective-c, uitableview

![在此处输入图像描述](../Images/2d921768f7c07f8bfecc2e30657e0980.png)我的要求是管理选择、全选和删除的表格视图行。删除行工作正常。但是当我选择行时，图像没有改变。请给我解决方案我在哪里犯了错误。我添加了我的代码

视图控制器.h

```
@interface ViewController : UIViewController<UITableViewDelegate>
{
    NSMutableArray *tableData;
    NSMutableSet *selectedRows;
    UIToolbar *actionToolbar;
    UIImageView *imgView;
    BOOL selected;
    UIBarButtonItem *actionButton,*selectAllButton,*deleteButton;
}
@property(nonatomic,retain)NSMutableSet *selectedRows;
@property(nonatomic,retain)IBOutlet UITableView *tableView;
- (BOOL)selected;
-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer;
- (NSIndexPath *)indexPathForCellController:(id)cellController; 
```

视图控制器.m

```
#import "ViewController.h"
#import "MultiSelectTableViewCell.h"
@interface ViewController ()

@end
const NSInteger SELECTION_INDICATOR_TAG = 54321;
const NSInteger TEXT_LABEL_TAG = 54322;
@implementation ViewController
@synthesize tableView,selectedRows;

- (void)viewDidLoad
{
    [super viewDidLoad];
    tableData=[[NSMutableArray alloc]init];
    [tableData addObject:@"Row1"];
     [tableData addObject:@"Row2"];
     [tableData addObject:@"Row3"];
     [tableData addObject:@"Row4"];
     [tableData addObject:@"Row5"];
     [tableData addObject:@"Row6"];
     [tableData addObject:@"Row7"];
     [tableData addObject:@"Row8"];
     [tableData addObject:@"Row9"];
     [tableData addObject:@"Row10"];

    selectedRows=[[NSMutableSet alloc]init];
    actionToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 416, 320, 44)];
    actionButton =
    [[UIBarButtonItem alloc]
      initWithTitle:@"Submit"
      style:UIBarButtonItemStyleBordered
      target:self
      action:@selector(noAction:)];

    NSMutableArray *buttons = [[NSMutableArray alloc ]initWithCapacity:2];

    selectAllButton=[[UIBarButtonItem alloc]initWithTitle:@"Select All" style:UIBarButtonItemStyleBordered target:self action:@selector(selectAllrows:)];

    deleteButton=[[UIBarButtonItem alloc]initWithTitle:@"Delete" style:UIBarButtonItemStyleBordered target:self action:@selector(deleterows:)];

    [self.tableView setAllowsSelectionDuringEditing:YES];

    self.tableView.allowsMultipleSelection = YES;

    selected=NO;

    [buttons addObject:actionButton];
    [buttons addObject:selectAllButton];
    [buttons addObject:deleteButton];

    [actionToolbar setItems:buttons];

    [self.view addSubview:actionToolbar];

    UILongPressGestureRecognizer *lpgr = [[UILongPressGestureRecognizer alloc]
                                          initWithTarget:self action:@selector(handleLongPress:)];
    lpgr.minimumPressDuration = 2.0; //seconds
    lpgr.delegate = self;
    [self.tableView addGestureRecognizer:lpgr];
    // Do any additional setup after loading the view, typically from a nib.
}
-(void)handleLongPress:(UILongPressGestureRecognizer *)gestureRecognizer
{
    CGPoint p = [gestureRecognizer locationInView:self.tableView];

    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:p];
    if (indexPath == nil)
        NSLog(@"long press on table view but not on a row");
    else
        NSLog(@"long press on table view at row %d", indexPath.row);}
- (void)noAction:(id)sender
{

}
- (void)deleterows:(id)sender
{
//    [self.tableView deleteRowsAtIndexPaths:arrayOfIndexPathsToDelete withRowAnimation:UITableViewRowAnimationTop];
    NSLog(@"select rows are::%@ %d",selectedRows,[selectedRows count]);

    NSArray *array=[selectedRows allObjects];
    NSLog(@"indexes are::%@",array);

    for (int i=0; i<[array count]; i++) {
        NSLog(@"------%@",[array objectAtIndex:i]);

        NSIndexPath *myIP = [NSIndexPath indexPathForRow:[[array objectAtIndex:i] intValue] inSection:0] ;
        [self tableView:self.tableView commitEditingStyle:UITableViewCellEditingStyleDelete forRowAtIndexPath:myIP];

    }

//    [self.tableView deleteRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationTop];

}
- (void)tableView:(UITableView *)tableview commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {
    if(editingStyle == UITableViewCellEditingStyleDelete) {
        //Delete the object from the friends array and the table.
        [tableData removeObjectAtIndex:indexPath.row];
        NSLog(@"------%@",[indexPath description]);
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}
- (void)selectAllrows:(id)sender
{

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}
-(void)viewDidAppear:(BOOL)animated

{
    [self.tableView setEditing:YES];
}
// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [tableData count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"MultiSelectCellController";
    UITableViewCell *cell =
    [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    UIImageView *indicator;
    UILabel *textLabel;
    if (!cell)
    {
        cell =
        [[MultiSelectTableViewCell alloc]
          initWithFrame:CGRectMake(0, 0, 320,self.tableView.rowHeight)
          reuseIdentifier:cellIdentifier];

        indicator = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"NotSelected.png"]];

        const NSInteger IMAGE_SIZE = 30;
        const NSInteger SIDE_PADDING = 5;

        indicator.tag = SELECTION_INDICATOR_TAG;
        indicator.frame =
        CGRectMake(-EDITING_HORIZONTAL_OFFSET + SIDE_PADDING, (0.5 *self.tableView.rowHeight) - (0.5 * IMAGE_SIZE), IMAGE_SIZE, IMAGE_SIZE);
        [cell.contentView addSubview:indicator];

        textLabel = [[UILabel alloc] initWithFrame:CGRectMake(SIDE_PADDING, 0, 320, self.tableView.rowHeight)];
        textLabel.tag = TEXT_LABEL_TAG;
        textLabel.textColor = [UIColor blackColor];
        textLabel.backgroundColor = [UIColor clearColor];
        textLabel.font = [UIFont boldSystemFontOfSize:[UIFont labelFontSize]];
        [cell.contentView addSubview:textLabel];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        cell.backgroundView = [[UIView alloc] init];
    }
    else
    {
        indicator = (UIImageView *)[cell.contentView viewWithTag:SELECTION_INDICATOR_TAG];
        textLabel = (UILabel *)[cell.contentView viewWithTag:TEXT_LABEL_TAG];
    }

    textLabel.text = [tableData objectAtIndex:[indexPath row]];

    if (selected)
    {
        indicator.image = [UIImage imageNamed:@"IsSelected.png"];
        cell.backgroundView.backgroundColor = [UIColor colorWithRed:223.0/255.0 green:230.0/255.0 blue:250.0/255.0 alpha:1.0];
    }
    else
    {
        indicator.image = [UIImage imageNamed:@"NotSelected.png"];
        cell.backgroundView.backgroundColor = [UIColor whiteColor];
    }

    return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 45;
}
- (BOOL)selected
{
    return selected;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (self.tableView.isEditing)
    {
        //selected = !selected;

        selected=[self selected];

        NSNumber *rowNsNum = [NSNumber numberWithUnsignedInt:indexPath.row];
        if ( [self.selectedRows containsObject:rowNsNum] )
            [self.selectedRows removeObject:rowNsNum];
        else
        {
            [self.selectedRows addObject:rowNsNum];
            NSLog(@"index is:::%@",rowNsNum);
        }

        [self.tableView performSelector:@selector(reloadData) withObject:nil afterDelay:0.2];

        UITableViewCell *cell =[self.tableView cellForRowAtIndexPath:[self indexPathForCellController:[tableData objectAtIndex:[indexPath row]]]];
//    [tableView cellForRowAtIndexPath:
//     [(RootViewController *)tableView.delegate
//      indexPathForCellController:self]];

    UIImageView *indicator = (UIImageView *)[cell.contentView viewWithTag:SELECTION_INDICATOR_TAG];
    if (selected)
    {

        indicator.image = [UIImage imageNamed:@"IsSelected.png"];
        cell.backgroundView.backgroundColor = [UIColor colorWithRed:223.0/255.0 green:230.0/255.0 blue:250.0/255.0 alpha:1.0];
         selected = !selected;
    }
    else
    {
        indicator.image = [UIImage imageNamed:@"NotSelected.png"];
        cell.backgroundView.backgroundColor = [UIColor whiteColor];
    }
    }

//
//    cell.imageView.image = imgView.image;
}

- (NSIndexPath *)indexPathForCellController:(id)cellController
{

     NSLog(@"cell controller is;::%@",cellController);
    NSInteger sectionIndex;
//  NSInteger sectionCount = [tableData count];
    for (sectionIndex = 0; sectionIndex < 1; sectionIndex++)
    {
        NSArray *section = tableData;
        NSInteger rowIndex;
         NSLog(@"section count is:::%d",[section count]);
        NSInteger rowCount = [section count];
        for (rowIndex = 0; rowIndex < rowCount; rowIndex++)
        {
            NSArray *row = [section objectAtIndex:rowIndex];
            NSLog(@"row is:::%@",row);
            if ([row isEqual:cellController])
            {
                 selected=YES;
                 NSLog(@"row index is::%d",rowIndex);
                return [NSIndexPath indexPathForRow:rowIndex inSection:sectionIndex];
            }
        }
    }

    return nil;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

MultiSelectTableViewCell.h

```
#import <UIKit/UIKit.h>

@interface MultiSelectTableViewCell : UITableViewCell
{

}

@end

extern const NSInteger EDITING_HORIZONTAL_OFFSET; 
```

MultiSelectTableViewCell.m

```
#import "MultiSelectTableViewCell.h"

const NSInteger EDITING_HORIZONTAL_OFFSET = 30;

@implementation MultiSelectTableViewCell

//
// setEditing:animated:
//
// Refreshed the layout when editing is enabled/disabled.
//
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [self setNeedsLayout];
}

//
// layoutSubviews
//
// When editing, displace everything rightwards to allow space for the
// selection indicator.
//
- (void)layoutSubviews
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationBeginsFromCurrentState:YES];

    [super layoutSubviews];

    if (((UITableView *)self.superview).isEditing)
    {
        CGRect contentFrame = self.contentView.frame;
        contentFrame.origin.x = 30;
        self.contentView.frame = contentFrame;
    }
    else
    {
        CGRect contentFrame = self.contentView.frame;
        contentFrame.origin.x = 30;
        self.contentView.frame = contentFrame;
    }

    [UIView commitAnimations];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:20:40.527

你没有处理正确选择的标签 BOOL。在 didselect 委托方法中尝试这个..

```
 UIImageView *indicator = (UIImageView *)[cell.contentView viewWithTag:SELECTION_INDICATOR_TAG];
        if (selected)
        {

            indicator.image = [UIImage imageNamed:@"NotSelected.png"];
            cell.backgroundView.backgroundColor = [UIColor colorWithRed:223.0/255.0 green:230.0/255.0 blue:250.0/255.0 alpha:1.0];

        }
        else
        {
            indicator.image = [UIImage imageNamed:@"Selected.png"];
            cell.backgroundView.backgroundColor = [UIColor whiteColor];

        }
 selected = !selected;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:41:33.487

如果您想要与图像示例中显示的完全一样，我假设您想要在那里进行 V 检查。
单元格已经具有“选定”属性，您不必使用 BOOLEAN 处理它。您所要做的就是使用方法选择一行：

```
[tableView selectRowAtIndexPath:<#(NSIndexPath *)#> animated:<#(BOOL)#> scrollPosition:<#(UITableViewScrollPosition)#>]

[tableView deselectRowAtIndexPath:<#(NSIndexPath *)#> animated:<#(BOOL)#>] 
```

然后在委托方法中更改图像

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.imageView.image = [UIImage imageNamed:@"selected_cell_image"];
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    cell.imageView.image = [UIImage imageNamed:@"deselected_cell_image"];
} 
```

# c# - 响应重定向为 Json

> ID：15088367
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:13.067
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何创建一个返回 ResponseRedirect 的控制器函数，而不是将该 ResponseRedirect 作为 Json 对象返回？

我想做这样的事情

```
 return Json(new { url = RedirectToAction("AccountMyProducts", "Account"), redirect = "true" }); 
```

在我的 jsonobject 中获取重定向 url。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T11:50:32.903

这样做

```
return Json(data, JsonRequestBehavior.AllowGet); 
```

解释：函数返回JsonResult的类型，由ActionResult继承。

1.  `JsonRequestBehavior.AllowGet`：
    从这个答案 [为什么需要jsonrequestbehavior-needed](https://stackoverflow.com/questions/8464677/why-is-jsonrequestbehavior-needed)

> 这是为了防止针对使用 HTTP GET 返回数据的 JSON 请求的非常具体的攻击。
> 
> 基本上，如果您的操作方法不返回敏感数据，那么允许获取应该是安全的。
> 
> 但是，MVC 将其与 DenyGet 作为默认设置来保护您免受此攻击。它让您在决定通过 HTTP GET 公开数据之前考虑所公开数据的含义

如果您打算基于 json 数据进行重定向

```
return Json(new 
{ 
    redirectUrl = Url.Action("AccountMyProducts", "Account"), 
    isredirection= true 
}); 
```

在 Jquery 成功回调函数中，这样做

```
$.ajax({
.... //some other stuffs including url, type, content type. 

//then for success function. 
success: function(json) {
    if (json.isredirection) {
        window.location.href = json.redirectUrl;
    }
}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:15:55.667

你可以试试这个：

```
return Json(new { url = "Account/AccountMyProducts", redirect = "true" }); 
```

值得注意的是，`RedirectToAction(...)`返回 a`RedirectToRouteResult`由调用控制器操作的方法评估，而不是立即返回实际 URL。

# javascript - 如何使用 javascript 或 jquery 知道文本是否中断

> ID：15088369
> 
> 赞同：3
> 
> 时间：2013-02-26T11:49:18.050
> 
> 标签：javascript, jquery

我在一些列中有表格，文本分成两行。我想减小 td 文本破坏的字体大小。我不知道从哪里开始为这个问题编码[http://jsfiddle.net/WZNPx/](http://jsfiddle.net/WZNPx/)

```
<table width="500" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>sdfasdfas asdfasf asdfsaf </td>
<td>adfafdafd adfasdf afasdf sdfsadfasasdfa sdf asdfsafd adfaf</td>
<td>adfasf</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:52:51.243

请在这里找到小提琴：http: [//jsfiddle.net/WZNPx/7/](http://jsfiddle.net/WZNPx/7/)

代码相当简单：

```
var tds = $("#test td")

for (var i = 0, l = tds.length; i < l; i++)
{
    var td = tds.eq(i);
    td.prepend("<span class='testerStart'></span>");
    td.append("<span class='testerEnd'></span>");
    var s = $(td).find(".testerStart").position().top;
    var e = $(td).find(".testerEnd").position().top;
    console.log(s,e);
    if (e > s) console.log("Multiple lines");
    else console.log("Single line");
} 
```

`span`这个想法是在文本的开头和结尾插入空，并检查它们的`y`位置是否不同。

由于某种原因，当文本以空格结尾时它不起作用。

# java - 没有任何 Spring 导入的 Spring FactoryBean

> ID：15088372
> 
> 赞同：1
> 
> 时间：2013-02-26T11:49:26.730
> 
> 标签：java, spring

是否可以创建一个 POJO bean 将/可以被 Spring 视为`FactoryBean`. 所以我想创建一个`FactoryBean`（有`getObject`、、、`getType`等`isSingleton`）但不导入任何特定于 Spring 的类的类。因此它不会实施`FactoryBean`。

仅供参考，使用 a`factory-method`不起作用，因为我需要在创建对象之前设置属性。

一个典型的例子是使用构建器，您可以在其中创建构建器、设置属性并调用构建方法来获取所需的最终 bean。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:18:36.350

*工厂豆*怎么样？例如：

```
<bean id="factory" class="package.Factory">
    <!-- configure properties here -->
</bean>
<bean id="instance" factory-bean="instans" factory-method="createInstance"/> 
```

Spring 将创建 Factory 类的实例，对其进行配置并使用它的*createInstance*方法创建 id 为*instans*的 bean 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:29:28.013

If the builder has proper Java Beans compatible `set` methods for its properties then you can do it in two stages

```
<bean id="fooBuilder" class="com.example.FooBuilder">
  <property name="algorithm" value="simple" />
</bean>

<bean id="foo" factory-bean="fooBuilder" factory-method="build" /> 
```

But for something like a [Guava CacheBuilder](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/cache/CacheBuilder.html) that uses fluent setters you're probably better off using Spring's [JavaConfig approach](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-java) for that part of the configuration instead of XML

```
@Configuration
public class AppConfig {
  public @Bean Cache<String, MyObject> cache() {
    return CacheBuilder.newBuilder()
      .maximumSize(1000)
      .softValues()
      .build(cacheLoader);
  }

  // defined elsewhere, maybe in XML
  private @Autowired CacheLoader<String, MyObject> cacheLoader;
} 
```

# c# - 在单独的线程 ASP.NET C# 中延迟执行

> ID：15088374
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:35.823
> 
> 标签：c#, multithreading

在 ASP.NET C# Web 应用程序中，我想在提交表单后执行异步操作。这是火灾和忘记。我不需要等待任何形式的回应。

我可以这样做：

```
System.Threading.ThreadPool.QueueUserWorkItem(delegate { TheThingToDo(); }); 
```

现在，在我的 TheThingToDo() 方法中，我想在一切开始之前引入一个延迟，比如 10 秒。最简单的事情似乎是使用 thread.sleep 因为我已经在一个单独的线程中并且不关心执行被阻止。

有什么理由不这样做吗？还是有更优雅的解决方案？我看过计时器，但在这种特殊情况下，使用它们似乎会引入更多代码而没有多大好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:56:38.287

在线程中睡觉很好。

由于没有其他事情发生，并且您不关心结果或同步，因此最好的方法是[KISS](https://en.wikipedia.org/wiki/KISS_principle)。

# xamarin.android - 如何在 DatePickerDialog 中设置最小和最大日期？

> ID：15088377
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:47.960
> 
> 标签：xamarin.android

我正在尝试将 mindate 设置为 1900 并将 maxdate 设置为 1997 到 DatePickerDialog。但无论我尝试什么，对话框上的结果都不是应该的。文档说它应该是自 1970 年以来的毫秒数。所以这段代码应该可以工作。

我错过了什么？

```
var dialog = new DatePickerDialog(this, (ss, ee) =>
{
  var dateSelected = ee.Date;
}, model.Birthday.Year, model.Birthday.Month - 1, model.Birthday.Day);

var origin = new DateTime(1970, 1, 1);
dialog.DatePicker.MinDate = 0;// (int)(DateTime.Now.Date.AddYears(-120) - origin).TotalMilliseconds;
dialog.DatePicker.MaxDate = (int)(DateTime.Now.Date.AddYears(-8) - origin).TotalMilliseconds; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T01:58:10.873

问题是超过了可以容纳`TotalMilliseconds`的最大值。`int`

因此，将其转换为`long`就可以了，这实际上是`DatePicker.MaxDate` [预期](http://developer.android.com/reference/android/widget/DatePicker.html#setMaxDate%28long%29)的。

```
dialog.DatePicker.MaxDate = (long)(DateTime.Now.Date.AddYears(-8) - origin).TotalMilliseconds; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-15T08:02:49.153

```
 protected override Dialog OnCreateDialog(int id)
        {
            switch (id)
            {
                case DATE_DIALOG_ID:
                    DatePickerDialog dialog = new DatePickerDialog(this, OnDateSet, date.Year, date.Month - 1, date.Day);
                    string _gs = servis.gosterilecekRandevuGunSuresi();
                    int _guns = Convert.ToInt32(_gs);

                    DateTime origin = new DateTime(1970, 1, 1);
                    string tarih = origin.Date.ToString("dd.MM.yyyy");
                    DateTime dt = Convert.ToDateTime(tarih);
                    var datetime = Convert.ToDateTime(tarih);

                    long sayi = (long)(DateTime.Now.Date - origin.Date).TotalMilliseconds;
                    long sayi2 = (long)(DateTime.Now.Date.AddDays(_guns) - origin).TotalMilliseconds;
                    dialog.DatePicker.MinDate = sayi;
                    dialog.DatePicker.MaxDate = sayi2;

                    return dialog;
            }
            return null;
        } 
```

# c# - 为消息对话框创建用户控件

> ID：15088378
> 
> 赞同：0
> 
> 时间：2013-02-26T11:49:49.733
> 
> 标签：c#, xaml, windows-8, user-controls, winrt-xaml

我想为消息对话框创建一个用户控件，以便根据需要更改消息对话框的 UI。例如，如果我传递标题、消息和类型，那么根据消息的类型，它应该显示该消息对话框。类型可以是：错误、警告、简单消息等。我该如何实现呢？当类型设置为错误示例时，自定义消息对话框的 UI 应如下所示： ![在此处输入图像描述](../Images/0f296ed2a142be8e66e8a72990f59e13.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:10:56.627

这比你想象的要难得多。挑战在于确保对话框保持异步并将其放入可视化树中。Gope 已经提到了 Callisto 框架中的**CustomDialog**，但我发现这是非常有限的。相反，我关注了这篇非常棒的文章，它向您展示了如何制作一个可用于显示任何用户控件的通用对话框：

**为您的 Win8 应用程序创建自定义异步对话框** [http://www.visuallylocated.com/post/2012/11/12/Creating-a-custom-async-dialog-for-your-Win8-apps-Part-2-CustomDialog .aspx](http://www.visuallylocated.com/post/2012/11/12/Creating-a-custom-async-dialog-for-your-Win8-apps-Part-2-CustomDialog.aspx)

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T23:22:51.507

[这里](http://awaitableui.codeplex.com/SourceControl/changeset/view/18667#139598)还有一个使用[Awaitable UI](http://awaitableui.codeplex.com/)方法的示例实现（使用 async/await 关键字等待 UI 事件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:28:48.127

First you should look into Callisto and its CustomDialog ([http://bit.ly/ILTyRn](http://bit.ly/ILTyRn)). Unfortunately it is a still a sealed class so you can either use its code or define an AttachedProperty for the dialog type. All you need besides that are 3 different Templates and a TemplateSelector that is checking for the DialogTypeProperty (You need to create such a Property - AttachedProp f.e.)

Hope that points you in the right direction. :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:25:00.807

哦，上帝，你问了很多！

:)

好的，这样做，我会指导你，你做你的一部分：

创建一个类 SysDialog ： HtmlGenericControl

```
public SysDialog() {
 TagName = 'div';
}

public string Title {get;set;}
public string Message {get;set;}
public string MessageType {get;set;}

public SysDialog Render(){ 

HtmlGenericControl title = new HtmlGenericControl ();
title.TagName = "div";
HtmlGenericControl msg = new HtmlGenericControl ();
msg.TagName = "div";

title.InnerHTML = Title;
msg.InnerHTML = Message;
Controls.Add(title);
Controls.Add(msg);
title.Attritbues.Add("class", "title-" + MessageType);
msg.Attritbues.Add("class", "msg-" + MessageType);
Attritbues.Add("class", "sysdlg-" + MessageType);
return this;
} 
```

它只是起点，您修改此代码并增强您的消息类型并根据您的消息类型设置尽可能多的 div/按钮或任何内容。

# ios - 在 ios 中使用 xib 文件的性能

> ID：15088382
> 
> 赞同：0
> 
> 时间：2013-02-26T11:50:14.860
> 
> 标签：ios, performance, cocoa-touch

我有一个`UIView`包含 20 个`UIImageView` ，并且每个`UIImageView`更新它的图像每秒 30 次。我已经创建`UIView`并全部`UIImageView`在 xib 文件中。

我的疑问如下。

1.  使用 xib 文件会有性能损失吗？
2.  我应该以编程方式创建我的`UIView`和吗？`UIImageView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T15:21:24.020

xib 文件基本上是用**XML 语言**编写用户界面的另一种方式。当您进行拖放时，界面构建器将为您编写它。一旦完成 xml 文件的解析，无论您编写代码是为了制作用户界面还是使用界面构建器，都**没有区别。**

# java - 在 Java 中实现一个通用的 switch 语句

> ID：15088384
> 
> 赞同：0
> 
> 时间：2013-02-26T11:50:26.560
> 
> 标签：java, swing, switch-statement, jslider

我有一个 JSlider，其值从 1 到 360。对于每个值，我想从数据库中获取图像并将其放入 JLabel。所以我有 360 个案例，其中唯一的区别是用于从数据库中获取相应图像的变量开关（参见下面的代码）。我知道我需要刷新我的代码，因为我的“解决方案”代码非常繁重。

我希望我清楚我想要存档的内容。下面是代码。

```
degreesSlider = new JSlider(); //my JSlider

degreesSlider.setMajorTickSpacing(10);
degreesSlider.setMaximum(360);
degreesSlider.setMinorTickSpacing(1);
degreesSlider.setOrientation(javax.swing.JSlider.VERTICAL);
degreesSlider.setPaintLabels(true);
degreesSlider.setPaintTicks(true);
degreesSlider.setSnapToTicks(true);
degreesSlider.setValue(0);

degreesSlider.addChangeListener(new ChangeListener() {
            public void stateChanged(ChangeEvent evt) {

                int x = degreesSlider.getValue(); //get JSlider value

                int row = myJTable.getSelectedRow();
                int realIndex = myJTable.convertRowIndexToModel(row);
                String clickJTable = (myJTable.getModel().getValueAt(realIndex, 0).toString()); //detect my JTable row click

                switch (x) {

                    case 1:
                        try {
                            PreparedStatement pst = conn.prepareStatement("select pol, cros from test where degrees = ? AND id_min=?");
                            pst.setInt(1, x); //x is the only variable of the all 360 cases
                            pst.setString(2, clickJTable);
                            ResultSet rs = pst.executeQuery();

                            if (rs.next()) {
                                byte[] imageP = rs.getBytes("pol");
                                byte[] imageC = rs.getBytes("cros");

                                pol = new ImageIcon(imagepolars);
                                cros = new ImageIcon(imagecrossed);

                                mineralsPolars.setIcon(pol); //put image into JLabel
                                mineralsCrossed.setIcon(cros); //put image into JLabel
                            }
                            rs.close();
                            pst.close();
                        } catch (Exception e) {
                        }
                        break;

                    //case 2, 3, 4 ... 360 with the same code and the difference between them is the variable x

                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:54:39.197

考虑到每个 switch 子句的代码都是相同的，为什么不将 switch 替换为

```
 if (x >= 1 && x <= 360) {
     // do the db lookup
 } 
```

编辑：

您需要 if 语句的唯一原因是，如果您想检查滑块值 ( `x`) 是否在查询指定的范围内，并且正如 @NominSim 指出的那样，滑块值在您的控制范围内，因此您可能不会如果需要的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T11:53:48.753

据我了解`switch`，您不需要声明，您只需要一个函数，该函数将根据滑块值使用正确的图标检索和更新图标。由于检索和更新图标的代码仅基于您的`x`值，因此将传递给新函数。要提高此类函数的性能，您可以将准备好的语句对象的创建移到此函数之外。由于为每个调用创建一个准备好的语句对象将取消准备好的语句的几乎所有好处，并且在每次调用/滑块值更改时构建这样一个沉重的对象是非常昂贵的。

我建议使用[DAO](http://en.wikipedia.org/wiki/Data_access_object)对象将您的数据库逻辑封装在一个地方，并且不要使用 SQL 和数据库逻辑污染 UI 代码。这样，您将能够通过重用已创建的语句并重用代码来获得更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T11:58:25.353

> 每个 case 值必须是编译时常量/表达式，而不是变量。与 switch 语句关联的任何两个 case 常量表达式都不能具有相同的值。

您可以拥有的是调用具有选定值的子例程

就像是`changeLabelImgTo(int count);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T11:54:34.597

将代码提取到方法中并传入变量`x`：

```
public void stateChanged(ChangeEvent evt) {
    ...
    fetchImage(x);
    ...
}

private void fetchImage(int x) {

    try {
        PreparedStatement pst = conn.prepareStatement("select pol, cros from test where degrees = ? AND id_min=?");
        pst.setInt(1, x); //x is the only variable of the all 360 cases
        pst.setString(2, clickJTable);
        ResultSet rs = pst.executeQuery();

        if (rs.next()) {
            byte[] imageP = rs.getBytes("pol");
            byte[] imageC = rs.getBytes("cros");

            pol = new ImageIcon(imagepolars);
            cros = new ImageIcon(imagecrossed);

            mineralsPolars.setIcon(pol); //put image into JLabel
            mineralsCrossed.setIcon(cros); //put image into JLabel
        }
        rs.close();
        pst.close();
    } catch (Exception e) {
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T11:57:55.913

我可能在这里遗漏了一些东西，但是如果 case 内的代码块都相同，那么你为什么要使用 switch case，毕竟？

# java - 在 websocket.send 期间收到“InvalidStateError: DOM Exception 11”

> ID：15088388
> 
> 赞同：2
> 
> 时间：2013-02-26T11:50:39.737
> 
> 标签：java, javascript, websocket, jetty

我收到此错误：

```
DOM Invalidate exception 11 
```

从下面的代码，但我找不到原因。

```
/*This is little bit pseudo stylish coded so might have some 
syntax errors */

    var socket;
    var client = {
        connect: function(){
            socket = new WebSocket(mylocation);
            socket.onopen = this.open;
            socket.send = this.send;
        },
        open: function(){
            this.send("Sent from socket open function");   //works
            socket.send("Sent from socket open function");  //works
        },
        _send: function(){
            socket.send("Sent from send function");     //error
            this.send("Sent from send function");       //error
        }
    }

    client.connect();
    client._send();

    ----- ERROR DESCRIPTION --------
    //DOMException {message: "InvalidStateError: DOM Exception 11", 
    //name: "InvalidStateError", code: 11 
```

我目前正在为服务器使用 Java Jetty Websocket。这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T04:00:25.523

根据我的经验，这个错误通常意味着服务器很忙/或者现有的 websocket 连接被阻塞，并且不允许新的 websocket 连接。我不熟悉 Jetty，但是当第二个浏览器在现有连接关闭之前尝试连接时，我在由 uWSGI+gevent 组成的服务器上遇到同样的错误——它在任何给定时间最多允许一个 websocket 连接，它恰好得到这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:56:32.103

这里有无限递归函数：

```
send: function(){
    socket.send("Sent from send function");     //error
    this.send("Sent from send function");       //error <--
} 
```

# winapi - 将一个符号从 Unicode 转换为 MBCS，它仅以 Unicode 形式出现，而不出现在代码页中

> ID：15088400
> 
> 赞同：0
> 
> 时间：2013-02-26T11:50:56.547
> 
> 标签：winapi, unicode, mbcs

我的应用程序是基于 MBCS 构建的，但我在 unicode 中存在一个货币符号，但在相关代码页中没有。我需要在我的应用程序中显示相同的货币符号，所以有什么方法可以实现它。

我正在尝试通过使用 Windows 转换 API 来做到这一点，即 MultiByteToWideChar、WideCharToMultiByte，它会有帮助吗？

请让我知道上述方法是否正确？或者有人试过吗？或任何其他方式我可以做到这一点？

如果可能的话，我可以获取示例代码片段作为示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:16:51.183

您可以一次性调用 Unicode API。例如

```
SetDlgItemTextW(hdlg, IDC_BALANCE, L"\x20AC 250"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:23:09.283

`MultiByteToWideChar()`并且`WideCharToMultiByte()`是正确的方法，但是如果您使用的代码页没有您要使用的字符的表示，则它不能表示它。您唯一的选择是切换使用的代码页，或切换到 unicode。这两者都需要与使用数据的任何事物达成一致。

# android - 软键盘不隐藏

> ID：15088404
> 
> 赞同：1
> 
> 时间：2013-02-26T11:51:09.360
> 
> 标签：android, android-intent

我正在调用一个邮件应用程序来代表我的应用程序发送邮件，使用以下代码：

```
 final Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("plain/text");
    intent.putExtra(Intent.EXTRA_EMAIL, new String[] {
        address
    }); 
```

单击发送按钮后，控件将返回给我的应用程序。现在的问题是在编辑邮件时 - 会弹出软键盘。即使返回我的应用程序后，软键盘也不会被隐藏。如何在我的应用程序中隐藏此键盘？

我尝试了下面的代码，但它不起作用。

```
 final InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    imm.hideSoftInputFromWindow(mUsernameEdit.getWindowToken(), 0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:23:31.927

在 EditText 上使用 onFocusChangeListener 并在其覆盖方法中添加以下内容

```
if(!hasFocus) {
<your edittext instance variable>.setFocusable(false);
InputMethodManager imm = (InputMethodManager) getSystemService(Activity.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY, 0);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:33:58.323

// 将此添加到您的 Android 清单文件中的活动将解决您的问题，

```
<activity android:name=".ur activity name" android:windowSoftInputMode="stateHidden|adjustResize"> 
```

# c# - 使用 QueryByAttribute 无法检索空值

> ID：15088408
> 
> 赞同：4
> 
> 时间：2013-02-26T11:51:17.770
> 
> 标签：c#, dynamics-crm-2011

我是 CRM 开发的新手。我想从我的 C# 应用程序更新自定义字段值，以及 CRM 2011 中的现有值。如果该字段有一些值，那么它工作正常，但如果它为空，那么我收到“字典中不存在给定的键”。错误。

下面的代码是我想要实现的。

```
IOrganizationService service = (IOrganizationService)serviceProxy;
QueryByAttribute querybyattribute = new QueryByAttribute("salesorder");
querybyattribute.ColumnSet = new ColumnSet(new String[] {
  "salesorderid", "new_customefield" });

querybyattribute.Attributes.AddRange("ordernumber");
querybyattribute.Values.AddRange(ordernumber);
EntityCollection retrieved = service.RetrieveMultiple(querybyattribute);

foreach (var c in retrieved.Entities)
{
  OrderID = new Guid(c.Attributes["salesorderid"].ToString());
  CustomFieldValue = c.Attributes["new_customefield"].ToString();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:19:04.397

发生错误是因为没有输入值的字段不会在上下文对象而不是图像中返回。或者说得通俗一点——你需要检查一个字段是否在属性中。

*通过ColumnSet*声明并请求它是不够的。这令人困惑和烦人（我自己去过那里）。

就在我的脑海中，我可以想到下面的代码片段来管理这个问题（不必为每次读取设置一个*if*子句，但也避免了一堆方法 - 每个变量类型一个）。

```
private Generic GetEntityValue<Generic>(
  Entity entity, String field, Generic substitute = default(Generic))
{
  if (entity.Contains(field))
    return (Generic)entity[field];
  return substitute;
} 
```

编辑：或作为扩展方法

```
public static T GetAttributeValue<T> (this Entity e, string propertyName, T defaultValue = default(T))
{
    if (e.Contains(propertyName))
    {
        return (T)e[propertyName];
    }
    else
    {
        return defaultValue;
    }
} 
```

# ms-access - MS Access On_Current 事件在应用程序的第一次运行时未触发

> ID：15088409
> 
> 赞同：1
> 
> 时间：2013-02-26T11:51:18.487
> 
> 标签：ms-access

我有一个 MS Access 前端应用程序，其中要打开的第一个表单（启动屏幕 - 从 Autoexec 宏打开表单）有一个 on_Load 事件，它将计时器间隔设置为 0，还有一个 on current 事件将它设置为到 100。计时器事件启动应用程序运行（附加到后端 SQL Server 数据库等）。

当应用程序的新副本被复制到新位置时——当有新版本时我们会这样做——它被复制到每个用户的机器上，应用程序的第一次调用就像计时器永远不会触发一样。换句话说，当前事件似乎永远不会触发。

我找不到导致它的原因，我能想到的唯一解释是在发布前测试启动时，我设置了表单，因此它的当前记录是启动时加载表单时设置的记录.

这是真的？是否有人知道 on_current 事件不会因此而触发的情况，或者任何其他原因。

我等到 on_current 事件的原因是表单本身有一个数据源，该数据源取决于表单过滤器设置不同数据库连接的参数（例如生产 v 测试）。一种解决方法可能是在加载事件中设置计时器间隔 - 但它会导致可能的竞争条件，其中计时器在 on_current 设置正确的数据库之前触发，我宁愿避免这种风险

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:23:55.320

`On Current` fires when you move to a new record. To force it to fire, you might try to move to the last record, then back to the first.

# java - Performance and usage testing

> ID：15088415
> 
> 赞同：-5
> 
> 时间：2013-02-26T11:51:39.653
> 
> 标签：java, android, performance, system

I'm about to finish my app, how do i check now, what part of the app uses how many system-resources, and what is blocking when a.s.o. I am looking for something like a head to feet diagnostic like at the doctor or just simpler, any possibility to check-through my app.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:56:46.237

What exactly you are looking for is **[Robotium](http://code.google.com/p/robotium/)**.

Robotium is a test framework created to make it easy to write powerful and robust automatic black-box test cases for Android applications. With the support of Robotium, test case developers can write function, system and acceptance test scenarios, spanning multiple Android activities.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:57:12.453

I think you are looking for the Dalvik Debug Monitor Server (DDMS). It has memory and thread monitoring capabilities and lots of other useful features. [http://developer.android.com/tools/debugging/ddms.html](http://developer.android.com/tools/debugging/ddms.html)

This is a built-in feature in the Eclipse IDE.

# php - PHP 从我的数据库中检索用户名，然后将它们放入数组中

> ID：15088418
> 
> 赞同：0
> 
> 时间：2013-02-26T11:51:44.973
> 
> 标签：php, html

所以我一直在研究一个小的自动支付系统，我几乎完成了！我的客户在付款后会自动升级他们的帐户，但我有一个小问题。

我目前正在手动将他们的用户名添加到一个数组中，该数组会更改他们的用户名样式以区分他们的等级。

我想知道如何让它检索并成功进入一个数组，然后调用该数组并显示他们的新用户名。

这是我检索用户名然后放入数组的代码：

```
$db = new mysqli("localhost", "changed", "changed", "changed")or die(mysqli_error());
$listmembers = $db->query("SELECT * FROM members")or die(mysqli_error());

$names = array();
while($listnames = $listmembers->fetch_assoc()) {
$names[] = "'" . $listnames['username'];
}
$newname = explode("\", ", $names); 
```

好的，这就是我的数组代码的样子

> $members = 数组($newname);

这是改变他们等级的代码：

> if(in_array(strtolower($rows['received']), $members)) { $user = " **" 。ucfirst($rows['received']) 。"** "; }

如果有人冷帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:58:07.853

打开警告以查看您的一些错误。

```
$db = new mysqli("localhost", "changed", "changed", "changed")or die(mysqli_error());
$listmembers = $db->query("SELECT * FROM members")or die(mysqli_error());

$names = array();
while($listnames = $listmembers->fetch_assoc()) {
    $names[] = $listnames['username'];
} 
```

后来是这样的..

```
if(in_array(strtolower($rows['received']), $names)) {
    $user =  "<font color=\"lime\"><b>" . ucfirst($rows['received']) . "</b></font>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:02:14.457

为什么不直接从数据库中获取数组？

```
$db = new mysqli("localhost", "changed", "changed", "changed")or die(mysqli_error());
$listmembers = $db->query("SELECT username FROM members")or die(mysqli_error());

$names = $listmembers->fetch_all(); 
```

接着：

```
foreach ( $names as $username ) {
    if ( strtolower($rows['received']) == $username[0] ) {
        $user = ucfirst($rows['received']);
        break;
    }
} 
```

# c - 向 SDL 添加菜单，同时保持跨平台兼容

> ID：15088419
> 
> 赞同：2
> 
> 时间：2013-02-26T11:51:47.597
> 
> 标签：c, menu, gtk, sdl

我目前正在用 C 语言编写一个模拟器，它完全脱离 SDL 运行，使用 SDL 表面进行渲染和 SDL 事件。但是现在我已经完成了仿真部分，我希望在窗口顶部添加一个菜单，例如 Windows 上的“文件、编辑、帮助”菜单。所以我可以添加设置选项，加载ROM等。

我见过一些实现，但它们需要 c++（我知道 c++，但从未将它与 c 结合使用），或者与 windows API 交互。理想情况下，我所追求的是使用多平台 GUI，例如 GTK+（因为我已经有一些使用它的经验，并且这个程序可以在 linux 和 windows 上运行）。

我还阅读了有关能够将 SDL 表面作为 GTK 小部件的父级的信息，但这似乎也不允许我使用 SDL 事件。

有谁知道实现这一目标的方法？

* * *

好的，所以我决定重新考虑一些事情，一次只做一件事。目前我正试图让 SDL Surface 显示在 GTK 小部件中，但是目前它似乎没有任何区别，因为 SDL 停留在它的窗口中，而不是进入 gtk 窗口。

```
GtkWidget *sdlsock;

gui.sdlsock = gtk_event_box_new();
gtk_widget_set_size_request(gui.sdlsock, 500, 300);
char winhack[1024];
sprintf( winhack, "SDL_WINDOWID=%ld", gtk_widget_get_window(sdlsock));
SDL_putenv( winhack );
screen = SDL_SetVideoMode(500, 300, 16, SDL_SWSURFACE); 
```

我在此代码中使用适用于 Windows 的 GTK+ 3.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:37:38.830

看来，根据这个答案：[Embedding SDL into GTK](https://stackoverflow.com/questions/8145806/embedding-sdl-into-gtk)，你需要做一些技巧来将 gtk 事件注入 SDL。除此之外，它看起来不太可能。

# c# - 使用 RoutingService 在客户端和 WCF 服务之间进行安全和松散耦合的通信

> ID：15088422
> 
> 赞同：1
> 
> 时间：2013-02-26T11:51:56.407
> 
> 标签：c#, wcf, encryption, wcf-routing

是否可以通过 RoutingService 将对象发送到对等 WCF 服务，而无需让路由器知道这些对象的**确切类型**？

我的意图是一次性创建一个路由器**，**然后能够添加新的 WCF 服务，将它们动态添加到路由表中，并允许客户端与这些服务进行通信而无需停止，更改路由器的代码，然后启动再说一遍。

我正在考虑这样的通用合同：

```
[DataContract]
public class RequestObject
{
}

[DataContract]
public class ReplyObject
{
}

[ServiceContract]
public interface IGenericServiceInterface
{
    [OperationContract]
    ReplyObject DoJob(string jobType, RequestObject request);
} 
```

我可以把它放在一个公共库中，所有 3 个组件都链接到（客户端、路由器、服务）。但是，我不确定是否可以派生新的子类以允许添加具有新数据交换的新客户端/服务，而无需更改路由器。

有什么建议吗？当通过客户端强制执行加密直到服务时，解决方案是否可以工作？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:54:40.647

在 WCF 中使用 Message 类来构建与合同无关的端点有一个很好的 msdn。不使用路由服务，但您可以使用以下方法构建路由器：

[http://msdn.microsoft.com/en-us/library/ms734675.aspx](http://msdn.microsoft.com/en-us/library/ms734675.aspx)

# utf-8 - Hunspell 中带有 UTF-8 的大写单词

> ID：15088423
> 
> 赞同：2
> 
> 时间：2013-02-26T11:51:58.250
> 
> 标签：utf-8, sublimetext2, spell-checking, hunspell

我正在尝试使用[Hunspell](http://hunspell.sourceforge.net/)进行波兰语拼写检查。

我确实将字典的编码从[http://wiki.openoffice.org/wiki/Dictionaries](http://wiki.openoffice.org/wiki/Dictionaries)转换为 UTF-8。但是，**带有非拉丁字符的大写****单词**（即第一个字母为大写）被视为拼写错误（但拼写检查器建议使用相同的单词）。其他的话就好了。

 **几年前在他们的错误跟踪中提出了这样的问题[带有前导大写字母和 UTF-8 - ID: 1432866 的假阴性](http://sourceforge.net/tracker/index.php?func=detail&aid=1432866&group_id=143754&atid=756395)。但是，要么这个解决方案不起作用，要么我错过了一些东西。

这个问题有解决方案吗？

在我的`pl_PL.aff`文件中，前导行是：

```
SET UTF-8
TRY aioeznrwcysptkmdłuljągbhęśćóżfńźvqxAIOEZNRWCYSPTKMDŁULJĄGBHĘŚĆÓŻFŃŹVQX 
```

（以防万一，我在 Sublime Text 2 中使用它，但我怀疑它是否有所作为。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T09:45:21.603

我在 github 上找到了 Sublime 特定词典：[https](https://github.com/SublimeText/Dictionaries) ://github.com/SublimeText/Dictionaries 。他们以某种方式修复了这个错误。**

# ajax - 使用 Ajax Primefaces 选项卡下的命令链接

> ID：15088425
> 
> 赞同：1
> 
> 时间：2013-02-26T11:52:02.383
> 
> 标签：ajax, jsf, primefaces

我知道这个问题可能与这个问题相似，[但](https://stackoverflow.com/questions/13776786/prime-faces-command-link-ajax-not-working)我根本不明白答案。

我正在使用整页布局，在左侧布局中我有一些嵌套的手风琴面板、选项卡和命令链接。我想要这个链接来更新中心布局内容表单。

**左侧布局：**

```
<h:form>
    <p:accordionPanel>
        <p:tab title="Parent Tab">
             <p:accordionPanel>
                 <p:tab title="Child Tab">
                     <p:commandLink value="link" update=":contentform" />
                 </p:tab>
             </p:accordionPanel>
        </p:tab>
    </p:accordionPanel>             
</h:form> 
```

**中心布局：**

```
<h:form id="contentform">
    <ui:include src="#{layoutUI.viewId}" />
</h:form> 
```

一个简单的解释将有助于导致类似的问题缺乏:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:49:26.653

正确使用组件的内置 Ajax 功能`p:commandLink`是指定链接将调用带有`ajax`属性的 Ajax 调用。

```
<p:commandLink value="link" ajax="true" update=":contentform" /> 
```

使用`:`前面的将表示您正在 ViewRoot 上查找组件的 ID，而不是其直接命名容器，因此这是正确的。唯一缺少的是`ajax`属性。

# c# - 覆盖代码生成的 DbContext 构造函数

> ID：15088426
> 
> 赞同：12
> 
> 时间：2013-02-26T11:52:04.190
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, connection-string

我确定我以前在某个阶段做过这个，但我现在不知道怎么做！我的场景：

```
// This is generated from EDMX
public partial class HOLDbEntities : DbContext
{
    public HOLDbEntities()
            : base("name=HOLDbEntities")
        {
        }
} 
```

现在，我希望此连接字符串易于更改（我想从 HOLDbEntities 实现），因此我需要重写此构造函数。

我试过了：

```
public partial class HOLDbEntities
{
    private const string _contextName = "HOLDbEntities";
    public static string ContextName { get { return _contextName; } }

    public HOLDbEntities()
        : base(ContextName)
    {
    }
} 
```

但这会引发错误：

> HOLDbEntities 已经使用相同的参数类型定义了一个名为“HOLDbEntities”的成员。

我可以理解为什么会出现这个错误，但是我将如何阻止构造函数首先自动生成以完成我想要实现的目标？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-01-31T21:24:19.803

我对之前接受的答案投了赞成票，因为这是一种相当优雅的方式。然而，另一种方法是修改生成 dbContext 类的 T4 模板。

首先使用 EF DB 时，您有一个 .edmx 文件，在该文件下您有一个 [Entity].Context.tt 文件。进入该文件并删除（或修改）以下代码：

```
public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
}

foreach (var entitySet in container.BaseEntitySets.OfType<EntitySet>())
{
    // Note: the DbSet members are defined below such that the getter and
    // setter always have the same accessibility as the DbSet definition
    if (Accessibility.ForReadOnlyProperty(entitySet) != "public")
    {
#>
        <#=codeStringGenerator.DbSetInitializer(entitySet)#>
<#
    }
}
#> 
```

现在您的上下文类将在没有构造函数的情况下生成，因此您应该能够在扩展类中创建一个。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-26T11:59:23.400

我能建议的最好的方法是工厂方法：

```
private HOLDbEntities(string contextName) : base(contextName) { }

public static HOLDbEntities Create() {
    return new HOLDbEntities(ContextName);
} 
```

并使用`HOLDbEntities.Create()`而不是`new HOLDbEntities()`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-23T07:40:49.077

我改变了 context.tt 如下：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext
{
    public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {

<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
}
foreach (var entitySet in container.BaseEntitySets.OfType<EntitySet>())
{
    // Note: the DbSet members are defined below such that the getter and
    // setter always have the same accessibility as the DbSet definition
    if (Accessibility.ForReadOnlyProperty(entitySet) != "public")
    {
#>
        <#=codeStringGenerator.DbSetInitializer(entitySet)#>
<#
    }
}
#>
var Method = (typeof(Entities)).GetMethods(System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance).FirstOrDefault(x => x.Name == "OnModelConstructed");
if (Method!=null) Method.Invoke(this,null);
    } 
```

所以我可以在上下文的部分类中声明一个**OnModelConstructed**方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T20:40:26.350

这是我对问题的解决方案。我按照 Dylan Hayes 的建议编辑了 TT 文件，并用我自己的构造函数替换了构造函数。就我而言，我只需要更改某些模式的模式名称。我在配置文件中设置了一个变量来告诉我我所处的环境并使用了正确的架构。

```
using System.Configuration;
using System.Data.Entity;
using System.Data.Entity.Core.Mapping;
using System.Data.Entity.Core.Metadata.Edm;
using System.Data.Entity.Core.Objects;
using System.Data.Entity.Infrastructure;
using System.Reflection;
using System.Xml;

namespace WS.Framework.WSJDEData
{

    public partial class WSJDE : DbContext
    {
        public WSJDE()
            : base("name=WSJDE")
        {
            ObjectContext context = (this as IObjectContextAdapter).ObjectContext;

            string environment = ConfigurationManager.AppSettings.Get("Environment");

            const string devCTL = "TESTCTL";
            const string devDTA = "TESTDTA";
            const string qaCTL = "CRPCTL";
            const string qaDTA = "CRPDTA";
            const string prodCTL = "PRODCTL";
            const string prodDTA = "PRODDTA";

            var x = Assembly.GetExecutingAssembly().GetManifestResourceStream("WSJDEData.WSJDE.ssdl");

            XmlReader[] sReaders = new XmlReader[]
                {
                    XmlReader.Create(Assembly.GetExecutingAssembly().GetManifestResourceStream("WSJDEData.WSJDE.ssdl"))
                };

            XmlReader[] mReaders = new XmlReader[]
                {XmlReader.Create(Assembly.GetExecutingAssembly().GetManifestResourceStream("WSJDEData.WSJDE.msl"))};

            StoreItemCollection sCollection = new StoreItemCollection(sReaders);

            ObjectContext objContext = ((IObjectContextAdapter) context).ObjectContext;
            MetadataWorkspace workspace = objContext.MetadataWorkspace;

            EdmItemCollection cCollection = workspace.GetItemCollection(DataSpace.CSpace) as EdmItemCollection;

            StorageMappingItemCollection csCollection = new StorageMappingItemCollection(cCollection, sCollection,
                                                                                         mReaders);

            workspace.RegisterItemCollection(sCollection);
            workspace.RegisterItemCollection(csCollection);

            EntityContainer container = workspace.GetItem<EntityContainer>("WSJDEModelStoreContainer", DataSpace.SSpace);

            foreach (EntitySetBase entitySetBase in container.BaseEntitySets)
            {
                string schema = entitySetBase.Schema;

                if (schema != null)
                {
                    string name = schema.Substring(schema.Length - 3);

                    if (name == "CTL")
                    {
                        switch (environment)
                        {
                            case "Dev":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, devCTL);
                                break;
                            case "QA":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, qaCTL);
                                break;
                            case "Prod":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, prodCTL);
                                break;

                        }
                    }

                    if (name == "DTA")
                    {
                        switch (environment)
                        {
                            case "Dev":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, devDTA);
                                break;
                            case "QA":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, qaDTA);
                                break;
                            case "Prod":
                                typeof (EntitySetBase).GetField("_schema",
                                                                BindingFlags.NonPublic | BindingFlags.Instance)
                                                      .SetValue(entitySetBase, prodDTA);
                                break;

                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-28T15:56:16.560

`.tt`我在代码生成文件中使用了 C# 6 的字符串插值功能。
生成的代码变成

```
public MyEntities()
            : base($"name={MyConfigurationManager.ConnectionStringKey("MyEntities")}")
{
} 
```

当你使用

```
public <#=code.Escape(container)#>()
    : base($"name={MyConfigurationManager.ConnectionStringKey("<#=container.Name#>")}") 
```

在`.tt`文件中。

`public static string ConnectionStringKey(string key)`在我的情况下，在静态类`MyConfigurationManager`中，将登录名的首字母添加到密钥中，并检查其中的任何连接字符串是否`ConfigurationManager.ConnectionStrings`具有该密钥，在这种情况下返回该密钥，否则只返回默认密钥。

所以现在每个用户的连接字符串可能不同。
例如

```
<add name="MyEntities" connectionString="metadata=res://*/Base.csdl|res://*/Base.ssdl|res://*/Base.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=local.base;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
<add name="MyEntitiesFB" connectionString="metadata=res://*/Base.csdl|res://*/Base.ssdl|res://*/Base.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=localhost;initial catalog=local.fb.base;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

表示用户 FB 使用后一个键，而所有其他用户使用前一个键。

# ios - iOS上的地图路由

> ID：15088428
> 
> 赞同：-1
> 
> 时间：2013-02-26T11:52:05.820
> 
> 标签：ios, xcode, google-maps, mapkit

我正在开发一个可以在 iOS 上查看地图、地理编码、路由的应用程序。我以前在 Android 上做过类似的事情（我使用过谷歌地图 API、谷歌方向 API、谷歌地理编码）如何在 iOS 上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:41:56.007

我相信[这里找到的文档](https://developers.google.com/maps/documentation/ios/)将为您提供一个良好的起点。

# javascript - 使用 zepto 创建的 html 对象没有获得 id

> ID：15088438
> 
> 赞同：1
> 
> 时间：2013-02-26T11:52:39.047
> 
> 标签：javascript, dom, zepto

当我使用 zepto.js 从 HTML 字符串创建元素时，如下所示：

```
element = $("<ul />", {id:"myID"});
console.log(element); 
```

id "myID" 不会被添加到元素中。控制台输出是这样的：

```
[<ul></ul>] 
```

根据[http://zeptojs.com/](http://zeptojs.com/) -> $() 它应该得到一个 id：

```
>// create element with attributes:
>$("<p />", { text:"Hello", id:"greeting", css:{color:'darkblue'} })
>//=> <p id=greeting style="color:darkblue">Hello</p> 
```

知道出了什么问题吗？或者这可能是一个错误？

编辑：

我自己解决了这个问题：

```
element.attr('id', 'myID'); 
```

尽管不采取这样的额外步骤会更好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:09:33.220

似乎在版本`Zepto.js (1.0rc1)`中没有引入这个 api。

请参阅[标签 v1.0rc1](https://github.com/madrobby/zepto/blob/v1.0rc1/src/zepto.js) 中的 **第 152**行和**第 100-108 行**

```
dom = zepto.fragment(selector.trim(), RegExp.$1), selector = null

  zepto.fragment = function(html, name) {
    if (name === undefined) name = fragmentRE.test(html) && RegExp.$1
    if (!(name in containers)) name = '*'
    var container = containers[name]
    container.innerHTML = '' + html
    return $.each(slice.call(container.childNodes), function(){
      container.removeChild(this)
    })
  } 
```

以及[master](https://github.com/madrobby/zepto/blob/master/src/zepto.js)中的**第 167**行和**第 110-128 行**

```
dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null

  zepto.fragment = function(html, name, properties) {
    if (html.replace) html = html.replace(tagExpanderRE, "<$1></$2>")
    if (name === undefined) name = fragmentRE.test(html) && RegExp.$1
    if (!(name in containers)) name = '*'

    var nodes, dom, container = containers[name]
    container.innerHTML = '' + html
    dom = $.each(slice.call(container.childNodes), function(){
      container.removeChild(this)
    })
    if (isPlainObject(properties)) {
      nodes = $(dom)
      $.each(properties, function(key, value) {
        if (methodAttributes.indexOf(key) > -1) nodes[key](value)
        else nodes.attr(key, value)
      })
    }
    return dom
  } 
```

还阅读了这个[问题](https://github.com/madrobby/zepto/issues/451)。也许它会在大 1.0 的时候引入。

现在，在 api 可以工作之前，您可以使用以下代码执行此操作：

```
element = $("<ul />").attr({id:"myID"}); 
```

# c# - 动态更改数组中的 MVVM INotifyPropertyChanged

> ID：15088444
> 
> 赞同：0
> 
> 时间：2013-02-26T11:53:06.060
> 
> 标签：c#, wpf, mvvm, inotifypropertychanged

在我的爱好项目中，我有以下情况：

我正在使用 C#、WPF、MVVM（以及 MVVM：尝试）

我加载包含信息的二进制文件并将其存储在（无符号）字节列表中。我有一个引用列表中特定位置的类层次结构。我的应用程序有时会更改类层次结构（和引用字节），但有时也会直接更改字节（例如复制范围）。

我有窗口，其中我将列表视图绑定到映射结构。

在更改类中的属性时，我使用 INotifyPropertyChanged，因为它应该在 MVVM 中使用。但是，直接更改字节时我遇到了问题。目前我正在使用手动更新方法，但它变得非常混乱。

有什么解决方案吗？

字节列表也可以是 45 MB 的数据。如果我在列表上设置通知，是否意味着对于每个字节更改我都会收到所有观察者的通知？这意味着什么时候我会一个一个地复制例如 10KB 的字节，并且我会在 100 万次更新中拥有 100 个观察者函数（处理属性更改）？那将是一个性能杀手。

或者我也可以这样说：现在更新类 X（即类内的所有属性更改）。我不能使用 set 属性函数，因为在复制字节时值已经被更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T11:55:16.093

您可以绑定到`ObservableCollection<T>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:11:23.767

如果您将字节存储在列表 ( `List<byte>`) 中，那么您可以简单地将列表的类型更改为，[`ObservableCollection<byte>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)并且您的代码几乎无需更改即可运行。然后，您可以摆脱手动更新。

但是，如果您将数据保存在字节数组 ( `byte[]`) 中，最好的选择还是将其更改为[`ObservableCollection<byte>`](http://msdn.microsoft.com/en-us/library/ms668604.aspx)，但您可能必须使用集合更改某些代码。

如果您有特殊情况要处理，另一种选择可能是创建自己的数据结构，实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)和[`INotifyCollectionChanged`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx). 但这需要编写很多代码。

# haskell - 使用函数式语言（如 F#）的函数的参数名称

> ID：15088450
> 
> 赞同：6
> 
> 时间：2013-02-26T11:53:27.927
> 
> 标签：haskell, f#, functional-programming, ocaml, named-parameters

我读过一本书，叫`Clean code`。我从书中得到的最强烈的信息之一是代码必须是**可读**的。我不明白为什么 F# 等函数式语言不将函数参数名称包含在智能感知或类型定义中？

比较

```
val copy: string -> string -> unit 
```

和

```
val copy: sourceFile:string -> destinationFile:string -> unit 
```

函数式世界中的最佳实践是什么？我们应该更喜欢单参数函数吗？这就是`Clean code`提倡的。或者我们应该对 2+ 参数的所有函数使用*记录？*

我知道一种解决方法是使用`static member`而不是`let`函数，但这不是一种功能方法，是吗？

编辑：

只是为了提供更多信息：

*   [哈斯克尔](http://learnyouahaskell.com/types-and-typeclasses#believe-the-type)：`addThree :: Int -> Int -> Int -> Int`
*   [OCaml](http://www.southampton.ac.uk/%7Efangohr/software/ocamltutorial/lecture2.html)：`Unix.unlink: (string -> unit)`

当然还有其他人。它们只是不在类型定义中显示参数名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T13:46:15.850

如果您练习*类型化编程*，即程序的许多语义内容可以静态反映在类型系统中，您会发现在*许多*（但不是全部）情况下，命名参数对于可读性来说不是必需的。

`List`考虑OCaml 标准库中的以下示例。通过知道它们对列表进行操作，并且使用函数的名称（希望清楚：我们都支持良好的名称选择），您会发现您不需要解释参数的作用。

```
val append : α list -> α list
val flatten : α list list -> α list
val exists: (α -> α bool) -> α list -> bool
val map: (α -> β) -> α list -> β list
val combine : α list -> β list -> (α * β) list 
```

请注意，最后一个示例很有趣，因为不清楚代码将做什么。实际上会有几种解释。`combine [1;2] [3;4]`返回`[(1,3); (2,4)]`，而不是，例如，`[(1,3); (1,4); (2,3); (2,4)]`。也不清楚当两个列表长度不同时会发生什么（故障模式不清楚）。

不*完全*的函数，可能引发异常或不终止的函数，通常需要更多关于失败案例是什么以及它们将如何表现的文档。*这是支持我们所谓的纯编程*的一个强有力的论据，其中函数的所有行为都以返回*值*（无异常、可观察状态突变或非终止）的形式表示，因此可以通过以下方式静态捕获类型系统。

当然，这只适用于足够*参数化的函数。*他们有一种类型，可以非常清楚地说明他们的工作。并非所有函数都如此，例如考虑模块的`blit`函数`String`（我相信你最喜欢的语言也有这样的例子）：

```
val blit : string -> int -> string -> int -> int -> unit 
```

嗯？

出于这个原因，编程语言添加了对命名参数的支持。例如，在 OCaml 中，我们有允许命名参数的“标签”。相同的函数在`StringLabels`模块中导出为：

```
val blit : src:string -> src_pos:int -> dst:string -> dst_pos:int -> len:int -> unit 
```

这样更好。是的，命名参数在某些情况下很有用。

但是请注意，命名参数可用于隐藏糟糕的 API 设计（也许上面的示例也针对这种批评）。考虑：

```
val add : float -> float -> float -> float -> float -> float -> float * float * float 
```

晦涩难懂吧？但是之后：

```
type coord = {x:float; y:float; z:float}
val add : coord -> coord -> coord 
```

那好多了，我不需要任何参数标签（可以说记录标签提供命名，但实际上我可以`float * float * float`在这里同样使用；值记录可以包含命名（和可选？）参数的事实也是一个有趣的评论）。

David M. Barbour[提出了这样的论点](http://awelonblue.wordpress.com/2011/10/13/freedom-and-crutches/)，即命名参数是语言设计的“拐杖”，用于篡改 API 设计者的懒惰，并且没有它们会鼓励更好的设计。我不确定我是否同意在所有情况下都可以有利地避免命名参数，但他的观点肯定与我帖子开头的类型宣传一致。通过提高抽象级别（通过更多的多态/参数类型或更好的问题域抽象），您会发现您减少了对参数命名的需求。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T14:04:30.193

> 还是我完全错了，它与函数式编程和命令式编程之间的差异无关？

您并没有完全错，因为具有 HM 类型推断的函数式语言通常根本不需要类型注释，或者至少在任何地方都不需要。

除此之外，类型表达式不一定是函数类型，因此“参数名称”的概念不适用。总而言之，名称只是多余的，它不会向*type*添加任何信息，这可能是不允许它的原因。

相反，在命令式语言中，类型推断最近几乎是未知的。因此，您必须声明所有内容（在静态类型语言中），因此名称和类型往往会出现在一个地方。此外，由于函数不是一等公民，函数类型的概念，更不用说描述函数类型的表达式，只是未知的。

请注意，随着最近的发展（如“lambda”语法等），类型已知或可以轻松推断的参数的概念也出现在这些语言中。如果我没记错的话，甚至还有语法上的缓和来避免长名称，lambda 参数就是**它**甚至**_**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T14:21:34.293

Haskell 的类型同义词可以帮助使类型签名更加自文档化。考虑例如函数`writeFile`，它只是将字符串写入文件。它有两个参数：要写入的字符串和要写入的文件名。还是相反？两个参数都是 type `String`，所以很难分辨哪个是哪个！

但是，当您查看[文档](http://www.haskell.org/ghc/docs/latest/html/libraries/base/System-IO.html#g:7)时，您会看到以下类型签名：

```
writeFile :: FilePath -> String -> IO () 
```

这清楚地说明了（至少对我而言！）该功能的用途。现在，因为`FilePath`它只是 的同义词`String`，所以没有什么可以阻止您像这样使用它：

```
writeFile "The quick brown fox jumped over the lazy dog" "test.txt" 
```

但是，如果您`FilePath -> String -> IO ()`在 IDE 中将类型作为提示，我认为这至少是朝着正确方向迈出的一大步！

您甚至可以更进一步，`newtype`为文件路径创建一个，这样您就不会意外混淆文件名和内容，但我想这增加了更多的麻烦而不是它的价值，而且可能还有历史原因导致没有这样做。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-26T13:01:09.537

> 函数式世界中的最佳实践是什么？

OCaml 有一个替代标准库，称为[Core](https://github.com/janestreet/core/)。它几乎在任何地方都使用[标记参数。](http://caml.inria.fr/pub/docs/u3-ocaml/ocaml051.html)例如

```
val fold_left : 'a t -> init:'b -> f:('b -> 'a -> 'b) -> 'b 
```

PS 我没有关于其他功能语言的信息。

# android - Android SDK VideoView - 如何在第一个视频完成缓冲后缓冲第二个视频，而第一个视频仍在播放

> ID：15088453
> 
> 赞同：1
> 
> 时间：2013-02-26T11:53:37.017
> 
> 标签：android, android-videoview, buffering

我有这个代码，它非常适合从 http 播放一个视频：

```
public class MainActivity extends Activity {

    private VideoView mVideoView;

       @Override
       public void onCreate(Bundle icicle) {
         super.onCreate(icicle);

         requestWindowFeature(Window.FEATURE_NO_TITLE);
         setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
         getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
         setContentView(R.layout.activity_main);
         Toast.makeText(this,"Loading",Toast.LENGTH_LONG).show();

         mVideoView = (VideoView) findViewById(R.id.surface_view);
         mVideoView.setVideoURI(Uri.parse("http://some_url/movie1.mp4"));
         mVideoView.setMediaController(new MediaController(this));
         mVideoView.requestFocus();
         mVideoView.start();
       }
} 
```

我需要做的是连续播放两个或三个不同的视频，但它们之间没有（或尽可能小）间隙。

我考虑过检查当前的视频缓冲区状态，当它达到 100% 时，开始在后台缓冲另一个视频（视频仍在前台播放）。视频一停止播放后，我想切换实例或缓冲区并开始播放视频二。

有可能吗，如果有的话，任何人都可以给我一个关于如何编码的提示吗？

谢谢

# python - PyOpenGL - 导入错误：没有名为 GL 的模块

> ID：15088456
> 
> 赞同：1
> 
> 时间：2013-02-26T11:53:47.887
> 
> 标签：python, pyopengl

我最近安装了 pythonxy 并尝试运行以（在 Eclipse 中）开头的代码：

```
from OpenGL.GL import *
from OpenGL.GLUT import *
from OpenGL.GLU import * 
```

并得到

```
from OpenGL.GL import *
ImportError: No module named GL 
```

我卸载了pythonxy，安装了完整版的EPD和同样的错误......

sys.path 给了我：

```
['D:\\eclipse-java-indigo-SR2-   win32\\eclipse\\plugins\\org.python.pydev_2.7.1.2012100913\\pysrc',
'C:\\Users\\Kuba\\workspace\\python\\ThinkPython\\src',
'C:\\Python27\\lib\\site-packages\\pyopengl-3.0.2-py2.7-win32.egg',
'C:\\Python27\\python27.zip',
'C:\\Python27\\DLLs',
'C:\\Python27\\lib',
'C:\\Python27\\lib\\plat-win',
'C:\\Python27\\lib\\lib-tk',
'C:\\Python27',
'C:\\Python27\\lib\\site-packages',
'C:\\Python27\\lib\\site-packages\\PIL',
'C:\\Python27\\lib\\site-packages\\win32',
'C:\\Python27\\lib\\site-packages\\win32\\lib',
'C:\\Python27\\lib\\site-packages\\Pythonwin',
'C:\\Python27\\lib\\site-packages\\IPython\\extensions'] 
```

如您所见 - 我正在使用 Windows 机器。

我在这里看到了类似的问题，但没有任何帮助......

我是 python 新手 - 也许解决方案很简单......

有什么建议么 ？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:28:42.403

You have an installation issue with your `PyOpenGL` module. Older versions of EPD (pre 6.2-1) had an issue with the 64bit `PyOpenGL` package - you may need to update EPD.

Alternatively, you could try to install through `easy_install`

```
C:\Python27\scripts\easy_install pyopengl 
```

or `pip`

```
C:\Python27\scripts\pip pyopengl 
```

or using the binaries on Christoph Gohlke's [site](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyopengl).

Personally I'd recommend installing Chris' binaries - they've always worked well for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T11:57:18.117

对于文件名是 OpenGL.py，我得到了同样的错误。如果您的文件名相同，请尝试重命名它。

# java - 在 Eclipse 控制台中使 URL 可单击

> ID：15088458
> 
> 赞同：18
> 
> 时间：2013-02-26T11:53:51.457
> 
> 标签：java, eclipse, hyperlink, console

有没有办法将 Eclipse 控制台中的 URL 转换为实际链接？它应该在没有任何插件的情况下工作。

大多数其他问题和方法只处理文件的链接，这显然适用于模式 (File.java:1)。但是有 URL 的解决方案吗（例如`http://example.org/`）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T16:40:58.107

`<filename>:<line number>`in 到超链接的转换发生在[控制台本身的代码中](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/4.2/org.eclipse.jdt.debug/ui/3.6.100/org/eclipse/jdt/internal/debug/ui/console/JavaExceptionConsoleTracker.java#JavaExceptionConsoleTracker.matchFound%28org.eclipse.ui.console.PatternMatchEvent%29)。它正在解析纯文本以查找模式，然后将其替换为`IHyperlink`工作区中的文件。

据我所知，没有办法配置标准的 Eclipse 控制台以类似的方式解析通用 URL。可能有一个插件可以这样做，或者您可以更改默认使用的模式匹配器来创建`IHyperlink`可以打开内部网络浏览器到该 URL 的对象。

# video - 如何访问令牌以以编程方式修改 youtube 视频注释

> ID：15088460
> 
> 赞同：0
> 
> 时间：2013-02-26T11:53:53.353
> 
> 标签：video, youtube, annotations, youtube-api

我正在使用 javascript 更新 youtube 中的视频注释，为此我需要获取频道中每个视频的访问令牌。有什么方法可以使用 php API 或 javascript 来获取它？

在我用来更新注释的代码下方：

```
 var data = getXml();
    data = data.replace(/<requestHeader(.*?)video_id=".*?"(.*?)>/, '<requestHeader$1video_id="'+id+'"$2>');
    data = data.replace(/<authenticationHeader(.*?)auth_token=".*?"(.*?)>/, '<authenticationHeader$1auth_token="'+auth_token+'"$2>');       
    console.log(data);
    var xhr = new XMLHttpRequest();
    xhr.withCredentials = true;
    xhr.open('POST', 'http://www.youtube.com/annotations_auth/update2', true);
    xhr.send(data); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:07:33.960

这是OAuth2的JS示例。您还可以在同一目录中找到其他 JavaScript 示例。

“ [https://code.google.com/p/youtube-api-samples/source/browse/samples/javascript/auth.js](https://code.google.com/p/youtube-api-samples/source/browse/samples/javascript/auth.js) ”

# android - 从 android 将 JSONArray 发布到 WCF 服务

> ID：15088463
> 
> 赞同：5
> 
> 时间：2013-02-26T11:54:04.197
> 
> 标签：android, json, wcf, post, http-post

我无法将 JSONArray 值发布到我的 WCF 服务。当我从 Fiddler 或 .Net 测试客户端发布数据时，它工作正常。每次我尝试从我的 android 应用程序发帖时，我都会收到请求错误

这是我从 android 应用程序发送到我的 WCF 服务的 JSON 数据。我已经从 Fiddler 尝试过这个确切的数据并且它有效

```
[{"date":"2013-02-22 15:30:374:021","id":"1","description":"test","name":"test"},
"date":"2013-02-25 11:56:926:020","id":"2","description":"ghy","name":"fhh"},
"date":"2013-02-25 11:56:248:026","id":"3","description":"ghfm","name":"run"}] 
```

我的安卓代码

```
public JSONObject makeHttpPost(String url, String method, JSONArray params) {
    try {

        if (method == "POST") {

            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);
             httpPost.setHeader("Accept", "application/json");
             httpPost.setHeader("Content-Type",
             "application/json; charset=utf-8");
             StringEntity se = new StringEntity(params.toString(),"UTF-8");

             se.setContentType("application/json;charset=UTF-8");
             httpPost.setEntity(se);

            Log.e("Gerhard", params.toString());
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

我的 WCF 服务

```
[OperationContract]
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "updateOrderAddress")]
    String UpdateOrderAddress(Stream JSONdataStream);

public String UpdateOrderAddress(Stream JSONdataStream)
    {
        try
        {
            // Read in our Stream into a string...
            StreamReader reader = new StreamReader(JSONdataStream);
            string JSONdata = reader.ReadToEnd();

            // ..then convert the string into a single "wsOrder" record.

            if (JSONdata == null)
            {
                // Error: Couldn't deserialize our JSON string into a "wsOrder" object.
                return "null";
            }

            return JSONdata;     // Success !
        }
        catch (Exception e)
        {
            return e.ToString();
        }
    } 
```

我得到的错误

```
02-26 14:00:56.185: E/Gerhard(31064):       <p>The server encountered an error processing the request. The exception message is 'Incoming message for operation 'UpdateOrderAddress' (contract 'IService1' with namespace 'http://tempuri.org/') contains an unrecognized http body format value 'Json'. The expected body format value is 'Raw'. This can be because a WebContentTypeMapper has not been configured on the binding. See the documentation of WebContentTypeMapper for more details.'. See server logs for more details. The exception stack trace is: </p> 
```

我已经从 android 应用程序向同一个 WCF 服务调用了多个 GET 请求，并且效果很好，但是现在我需要将一组数据发送到 wcf 服务。请帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T12:34:00.817

消除

```
httpPost.setHeader("Accept", "application/json");                 
httpPost.setHeader("Content-Type", "application/json; charset=utf-8"); 
```

从你的代码

# android - Android 从电池视图中获取电池时间

> ID：15088464
> 
> 赞同：0
> 
> 时间：2013-02-26T11:54:06.830
> 
> 标签：android, time, battery

在这里我可以看到手机电池可以工作多长时间？我能以某种方式在我的应用程序中获取这些信息吗？

[这是获取电池健康温度的代码](https://stackoverflow.com/questions/10098979/how-is-the-android-battery-health-determined)，但我不需要这个。我只需要时间，如下图所示：

![在此处输入图像描述](../Images/c961d351eca623567bbed05983a33c47.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:47:36.810

I don't think you can get this value directly from the battery info. What you can do however is this.

1.  Read percentage remaining (e.g. x%) and current timestamp
2.  Register a broadcast receiver for battery level changes - and in `onReceive` read the new percentage (e.g. y%, usually it would be `x - 1`, but it may be `x - 2` or whatever) and get the timestamp again
3.  Get the difference between the two timestamps and the two percentages (x - y) - this will show how much time the (x - y)% of battery lasts. Now just extrapolate that to y% - and you have your answer

And you can use the code in the question that you linked to determine the percentage.

For example, you get 80% battery at timestamp 1361882535654\. Then when you get 79%, your timestamp is 1361882801234\. This means that 1% of battery lasts about 265 seconds, hence the remaining time on the battery is approximately 79 * 265 = 209305 seconds, which is 2 days 10 hours 8 minutes and 25 seconds.

Yes, this naturally takes some time (i.e. you have to wait those 200 or whatever seconds for the battery power to go down). The reason your system app can display it immediately is because the system process runs in the background continuously and most likely does that as it goes along.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T06:17:02.483

我猜你可以使用`BatterStatusImpl`和`IInterface`调用`IBatteryStats`这些是来自 android git 的私有 api 分叉

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:40:30.117

看看[Intent.ACTION_POWER_USAGE_SUMMARY](http://developer.android.com/reference/android/content/Intent.html#ACTION_POWER_USAGE_SUMMARY)

# android - tabhost /tabbar 图标未显示

> ID：15088465
> 
> 赞同：1
> 
> 时间：2013-02-26T11:54:12.707
> 
> 标签：android, xml, icons, android-tabhost, tabbar

我的标签栏图标不会显示

```
TabHost tabHost = getTabHost();

TabSpec barcodeInsertSpec = tabHost.newTabSpec("Barcode Insert");
barcodeInsertSpec.setIndicator("Barcode Insert", getResources().getDrawable(R.drawable.home2));
barcodeInsertSpec.setContent(new Intent(getBaseContext(), BarcodeInsertActivity.class));

tabHost.addTab(barcodeInsertSpec); 
```

可绘制/home2.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <!-- When not selected, use that-->
        <item android:drawable="@drawable/home22" />
    </selector> 
```

并将图片放在三个不同尺寸（48x48、32x32、24x24）的文件夹中 drawable-hdpi , drawable-ldpi, ... as .p​​ng

比如drawable-hdpi/home22.png

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:43:30.293

试试这个代码

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
     <item  android:state_focused="true"
            android:state_pressed="true"
            android:drawable="@drawable/button0_click"></item>
    <item   android:state_focused="true"
            android:state_pressed="false"
            android:drawable="@drawable/button0_click"></item>
    <item
            android:state_focused="false"
            android:state_pressed="true"
            android:drawable="@drawable/button0_click" />
     <item 
            android:drawable="@drawable/button0"></item>

</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T05:44:35.427

尝试这个。

```
 TabHost th = getTabHost();
  TabHost.TabSpec sp;
  sp=th.newTabSpec("tab 1");
  sp.setIndicator("Home");
  sp.setContent(new Intent(this, Welcome.class));
  th.addTab(sp);
  tabhost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.YOURIMAGE); 
```

*您还可以使用自定义项目选择器代替 drawable 来制作聚焦和按下效果。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:34:47.327

嗨使用这样的可绘制选择器文件。

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
  <item
    android:state_selected="true"
    android:drawable="@drawable/select" />
  <item
    android:state_selected="false"
    android:drawable="@drawable/deselct" />
</selector> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T02:09:50.117

我在使用 Xamarin 时遇到了同样的问题。

~~这是一个显示图标但不显示文本的 hack 解决方案（看起来像 android 缺陷）：~~

 ~~*   [tab-layout-wont-show-tab-icons](https://stackoverflow.com/questions/17665232/tab-layout-wont-show-tab-icons) - 阅读 Riandy 的部分解决方案~~ 

此解决方案同时显示了两者，但它破坏了我的应用程序范围的样式，这向我表明我可能会设置样式覆盖：

~~*   [android-tab-icons-dont-show-up](https://stackoverflow.com/questions/9225868/android-tab-icons-dont-show-up?rq=1) - 阅读 noshky 的部分解决方案~~
*   ~~[安卓主题指南](http://developer.android.com/guide/topics/ui/themes.html)~~

 ~~**编辑 2013 年 10 月 10 日 - 我让它在 c# 中工作！** *在java中做同样的事情应该很简单*

我能够让标签显示带有代码和自定义样式的图标。见下文

**tab_indicator_holo.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="@dimen/tab_host_default_height"
android:orientation="horizontal"
style="@style/TabBlood"
android:gravity="center">

<ImageView
    android:id="@android:id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:visibility="visible"
    android:contentDescription="@null" />

<TextView
    android:id="@android:id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    style="@style/TabTextBlood" />

</LinearLayout> 
```

**我的活动 OnCreate：**

```
...
var spec = this.TabHost.NewTabSpec(tag);
var drawableIcon = Resources.GetDrawable(drawableId);
View tabIndicator = LayoutInflater.From(this).Inflate(Resource.Layout.tab_indicator_holo, this.TabHost.TabWidget, false);
TextView title = tabIndicator.FindViewById<TextView>(Android.Resource.Id.Title);
ImageView img = tabIndicator.FindViewById<ImageView>(Android.Resource.Id.Icon);
title.Text = label;
img.SetImageDrawable(drawableIcon);
spec.SetIndicator(tabIndicator);
spec.SetContent(intent);
this.TabHost.AddTab(spec); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:16:16.160

这段代码对我有用:)

```
Resources res=getResources();
TabHost Tabs = (TabHost) findViewById(R.id.your_id);
Tabs.setup();
TabHost.TabSpec spec;
spec = Tabs.newTabSpec("tag1");
spec.setContent(R.id.tab1);
spec.setIndicator("Home", res.getDrawable(R.drawable.home_icon));
Tabs.addTab(spec); 
```~~

# functional-programming - 具有不同参数类型的函数

> ID：15088468
> 
> 赞同：0
> 
> 时间：2013-02-26T11:54:25.553
> 
> 标签：functional-programming, sml, smlnj

我阅读了函数中的多态性并看到了这个例子

```
 fun len nil = 0
   | len rest = 1 + len (tl rest) 
```

所有其他示例也处理`nil`arg。

我想检查其他类型的多态性概念，例如

```
fun func (a : int) : int = 1  
  | func (b : string) : int = 2  ; 
```

并得到以下错误

```
stdIn:1.6-2.33 Error: parameter or result constraints of clauses don't agree 
[tycon mismatch]
  this clause:      string -> int
  previous clauses:      int -> int
  in declaration:
    func = (fn a : int => 1: int
             | b : string => 2: int) 
```

上述函数中的错误是什么？这完全合法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:01:48.053

**亚型多态性：**

在 Java、C# 或 C++ 等编程语言中，您有一组控制多态性的子类型规则。例如，在面向对象的编程语言中，如果您的类型 A 是类型 B 的超类型；那么无论A出现在哪里，您都可以通过B，对吗？

例如，如果你有一个哺乳动物类型，而狗和猫是哺乳动物的子类型，那么无论哺乳动物出现在哪里，你都可以传递狗或猫。

您可以使用数据类型和构造函数在 SML 中实现相同的概念。例如：

```
datatype mammal = Dog of String | Cat of String 
```

然后，如果您有一个接收哺乳动物的函数，例如：

```
fun walk(m: mammal) = ... 
```

然后你可以传递 Dog 或 Cat，因为它们是哺乳动物的构造函数。例如：

```
walk(Dog("Fido"));
walk(Cat("Zoe")); 
```

所以这就是 SML 实现类似于我们所知的面向对象语言中的子类型多态性的方式。

**临时多态性：**

*强制*

实际的混淆点可能是 Java、C# 和 C++ 等语言通常具有自动强制类型转换。例如，在 Java 中，*int*可以自动强制转换为*long*，*float*可以自动强制转换为*double*。因此，我可以有一个接受双精度的函数，并且可以传递整数。有人将这些自动强制称为 ad-hoc 多态性。

这种形式的多态性在 SML 中不存在。在这些情况下，您被迫手动强制或将一种类型转换为另一种类型。

```
fun calc(r: real) = r 
```

您不能使用整数调用它，为此您必须先转换它：

```
calc(Real.fromInt(10)); 
```

因此，如您所见，SML 中不存在这种特殊的多态性。您必须手动进行强制转换/转换/强制。

*函数重载*

另一种形式的 ad-hoc 多态性是我们在 Java、C# 和 C++ 等语言中所说的方法重载。同样，在 SML 中没有这样的东西。您可以定义两个不同名称的不同函数，但不能使用相同的函数（相同名称）接收不同的参数或参数类型。

*不要将*函数或方法重载的概念与您在示例中使用的概念混淆，后者只是函数的模式匹配。这是这样的合成糖：

```
fun len xs =
  if null xs then 0
  else 1 + len(tl xs) 
```

**参数多态性：**

最后，SML 提供了参数多态性，这与泛型在 Java 和 C# 中所做的非常相似，我理解这有点类似于 C++ 中的模板。

所以，例如，你可以有一个像

```
datatype 'a list = Empty | Cons of 'a * 'a list 
```

在这样的类型中，'a 代表任何类型。因此这是一种多态类型。因此，我可以使用相同的类型来定义整数列表或字符串列表：

```
val listOfString = Cons("Obi-wan", Empty); 
```

或整数列表

```
val numbers = Cons(1, Empty); 
```

或哺乳动物列表：

```
val pets = Cons(Cat("Milo", Cons(Dog("Bentley"), Empty))); 
```

这与您可以对 SML 列表执行的操作相同，它也具有参数多态性：

您可以定义许多“不同类型”的列表：

```
val listOfString = "Yoda"::"Anakin"::"Luke"::[]
val listOfIntegers 1::2::3::4::[]
val listOfMammals = Cat("Misingo")::Dog("Fido")::Cat("Dexter")::Dog("Tank")::[] 
```

在同样的意义上，我们可以在函数中有参数多态性，就像在下面的例子中我们有一个恒等函数：

```
fun id x = x 
```

x 的类型是 'a，这基本上意味着您可以将其替换为您想要的任何类型，例如

```
id("hello");
id(35);
id(Dog("Diesel"));
id(Cat("Milo")); 
```

因此，如您所见，结合所有这些不同形式的多态性，您应该能够实现您在其他静态类型语言中所做的相同事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:08:25.143

不，这不合法。在 SML 中，每个函数都有一个类型。`len`您作为示例提供的函数类型是

```
fn : 'a list -> int 
```

也就是说，它接受*任何*类型的列表并返回一个整数。您尝试创建的函数采用整数*或*字符串，并返回一个整数，这在 SML 类型系统中是不合法的。通常的解决方法是制作一个包装器类型：

```
datatype wrapper = I of int | S of string

fun func (I a) = 1
  | func (S a) = 2 
```

该函数具有类型

```
fn : wrapper -> int 
```

where`wrapper`可以包含整数或字符串。

# php - 如何使页面仅在登录 PHP 时可访问

> ID：15088470
> 
> 赞同：7
> 
> 时间：2013-02-26T11:54:33.667
> 
> 标签：php

目前我正在为一个虚拟登录/注册页面做一个小项目，现在我想添加一个只有在你登录时才能访问的页面。所以问题是我如何创建会话或 cookie 并检索它们? 以及如何阻止未登录的用户。

我目前正在为 login.php 和 member_area.php 使用这些代码： Login.php：

```
<?php
    session_start();

    if(isSet($_POST['login'])) {
        include('db.php');

        $username = mysql_real_escape_string($_POST['username']);
        $password = sha1($_POST['password'] );

        $query = mysql_query("SELECT * FROM tab WHERE username='".addSlashes($username)."' AND password='".addSlashes($password)."'");
        $res = mysql_num_rows($query);

        if ($res == 1) {
            $_SESSION['username'] = $username;
            $_SESSION['password'] = $password;
            $_SESSION['userobj'] = mysql_fetch_assoc($query);

            header('Location: http://localhost/member_area.php');
            exit;
        } else {
            echo 'Data does not match <br /> RE-Enter Username and Password';
        }
    } else {

?>
    <html>
    <head><link rel="stylesheet" type="text/css" href="css.css"></head>
        <body>
                <div id="div1">

                <a href="index.php" id="home">Home</a>
                <a href="Login.php" id="login2">Login</a>
                <a href="register.php" id="register">Register</a> 

        </div>
            <table width="200" border="0" cellspacing="1" align="center">
                <form id="form1" method="post" action="login.php">
                <tr>
                    <td colspan="2"><h2>Members login</h2></td>
                </tr>
                <tr>
                    <td>Username: </td>
                    <td>
                        <input type="text" name="username" id="username"/>
                    </td>
                </tr>
                <tr>
                    <td>Password: </td>
                        <td><input type="password" name="password" id="password"/> </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <input type="submit" name="login" id="login" value="login" />
                    </td>
                </tr>
                </form>
            </table>
            </body>
    </html>
    <?php
    }

?> 
```

Member_area.php：

```
<?php

?>
<html>
<head><link rel="stylesheet" type="text/css" href="css.css"></head>
    <body>
            <div id="div1">

                <a href="index.php" id="home">Home</a>
                <a href="Login.php" id="login2">Login</a>
                <a href="register.php" id="register">Register</a> 

        </div>
        <form action="/Log_out.php" method="get">
            <input type="submit" name="submit" value="Log Out." action="http://localhost/Log_out.php" id="Logout">
        </form>
    </body>
</html>
<?php

?> 
```

请注意，我对 PHP 完全陌生，所以如果可能的话，一些方向将代码放在哪里，并提供一些解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T11:57:15.283

在 Member_area.php 的顶部添加：

```
session_start();
if(!isset($_SESSION['username'])){
   header("Location:Login.php");
} 
```

它检查会话是否设置，如果没有，它将用户重定向到登录页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:58:13.440

```
 <?php
    if(!isset($_SESSION['username'])) {
    die("Please login");
}

?>
<html>
<head><link rel="stylesheet" type="text/css" href="css.css"></head>
    <body>
            <div id="div1">

                <a href="index.php" id="home">Home</a>
                <a href="Login.php" id="login2">Login</a>
                <a href="register.php" id="register">Register</a> 

        </div>
        <form action="/Log_out.php" method="get">
            <input type="submit" name="submit" value="Log Out." action="http://localhost/Log_out.php" id="Logout">
        </form>
    </body>
</html>
<?php

?> 
```

应该是这样的:)

# php - 在php中将本地移动设备格式化为国际

> ID：15088476
> 
> 赞同：0
> 
> 时间：2013-02-26T11:54:40.517
> 
> 标签：php, regex, mobile, formatting, sms

我正在寻找一个简单的正则表达式来使用 PHP 将英国 (44) 和印度 (91) 数字转换为有效的国际格式。所需格式为：

```
447856555333 (for uk mobile numbers)
919876543456 (for indian mobile numbers) 
```

我需要一个可以接受并格式化以下变体的正则表达式：

```
1) 07856555333
2) 0785 6555333
3) 0785 655 5333
4) 0785-655-5333
5) 00447856555333
6) 0044785 6555333
7) 0044785 655 5333
8) 0044785-655-5333
9) 00447856555333
10) +447856555333
11) +44785 6555333
12) +44785 655 5333
13) +44785-655-5333
14) +919876543456
15) 00919876543456 
```

任何帮助将非常感激。

更新：根据下面的答案，我稍微修改了代码，效果很好。它不是防弹的，但涵盖了大多数流行的格式：

```
 public static function formatMobile($mobile) {
        $locale = '44'; //need to update this
        $sms_country_codes = Config::get('sms_country_codes');

        //lose any non numeric characters
        $numeric_p_number = preg_replace("#[^0-9]+#", "", $mobile);
        //remove leading zeros
        $numeric_p_number = preg_replace("#^[0]*#", "", $numeric_p_number);
        //get first 2 digits
        $f2digit = substr($numeric_p_number, 0,2);

        if(strlen($numeric_p_number) == 12) {
            if(in_array($f2digit, $sms_country_codes) ) {
                //no looks ok 
            }
            else {
                return ""; //is correct length but missing country code so must be invalid!
            }
        }
        else {
            if(strlen($locale . $numeric_p_number) == 12 && !(in_array($f2digit, $sms_country_codes))) {
                $numeric_p_number = $locale . $numeric_p_number;
                //the number is ok after adding the country prefix
            } else {
                //something is missing from here
                return "";
            }
        }

        return $numeric_p_number;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:38:12.103

对于您的特定范围，认为这样的事情可能会起作用......并不是真正的正则表达式解决方案，但应该可以满足您的需求：

```
 $locale = "your_locale_prefix";
  $valid_codes = array("44","91");
  //loose any non numeric characters
  $numeric_p_number = preg_replace("#[^0-9]+#", "", $phone_number);
  //remove leading zeros
  $numeric_p_number = preg_replace("#^[0]*#", "", $numeric_p_number);
  //get first 2 digits
  $f2digit = substr($numeric_p_number, 0,2);
  if(in_array($f2digit, $valid_codes) && strlen($numeric_p_number) == 12){
         //code is ok 
  } else {
       if(strlen($locale . $numeric_p_number) == 12) {
           //the number is ok after adding the country prefix
       } else {
           //something is missing from here
       }
  } 
```

# php - 根据 PHP Session 变量动态更改网站的布局和内容

> ID：15088477
> 
> 赞同：-3
> 
> 时间：2013-02-26T11:54:49.633
> 
> 标签：php, html, css, json, dynamic-content

我从 Java Web 服务接收可用产品和子产品的列表，并将其存储在会话变量中。

产品展示在多个页面上，根据可用性，一些主要产品及其组件必须变灰（背景颜色、文本颜色、图像更改等）。在进一步的用例中，它们将被完全隐藏。

这是一个使用 php 和 javascript（没有框架和 cms）的现有网站。

根据会话变量更改内容的干净方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:07:22.617

不完全确定你在问什么......但可以做类似的事情：

```
if(isset($_SESSION['available'])){
echo "<div>Item</div>";
} else if(isset($_SESSION['unavailable'])) {
echo "<div style='visibility:hidden;'>Item</div>";
} 
```

# sencha-touch-2 - 从 Main.js 中删除后控制器找不到视图

> ID：15088480
> 
> 赞同：1
> 
> 时间：2013-02-26T11:54:51.990
> 
> 标签：sencha-touch-2

我对 Sencha 很陌生，所以这可能是一个新手错误 :)

我正在尝试在 Sencha 中实现页面导航。以下场景有效。

我有一个带有主屏幕和登录屏幕的 Main.js。当我输入凭据时，我被转发到 Home.js。

但是，我现在想从 Main 中删除 Home，因为它只能在登录后显示。但是，在从 Main.js 中删除 xtype home 后，它就再也找不到了。我不明白为什么。

**主.js**

```
config : {
    tabBarPosition : 'bottom',

    items : [{
        xtype : 'startview',
    }, {
        xtype : 'contactform'
    }, {
        xtype : 'loginform'
    }, {
        xtype : 'createaccountform'
    }, {
        xtype : 'homeview' REMOVING THIS MAKES THE HOME undefined in the controller
    }]
} 
```

**我的控制器**

```
Ext.define("MyApp.controller.LoginController", {
extend : "Ext.app.Controller",

xtype : 'logincontroller',

requires : ['Ext.app.Router', 'MyApp.view.Home'],

config : {
    refs : {
        loginForm : "#loginFormPanel",
        home : 'homeview'
    },

    routes : {
        login : 'authenticateuser'
    },
    control : {
        'button[action=login]' : {
            tap : "authenticateUser"
        }
    },
    views : ['Login', 'Home']
},

authenticateUser : function(button) {

            **// WHEN REMOVING xtype: homeview from MAIN this getter returns undefined (??)**
    var activeView = this.getHome(); 

    this.getLoginForm().submit({
        url : 'php/process_login.php',
        method : 'POST',
        success : function(form, result) {

            alert('Success and moving to home ' + activeView);
            Ext.Viewport.setActiveItem(activeView);
        },
        failure : function(form, result) {

            alert('2');

            Ext.Msg.alert('Error', 'failure....' + result);
        }
    });
}
}); 
```

**主页.js**

```
Ext.define('MyApp.view.Home', {
extend : 'Ext.tab.Panel',
id : 'home',
xtype : 'homeview',
requires : ['Ext.TitleBar', 'Ext.Video'],
config : {
    title : 'Home',
    iconCls : 'home',
    tabBarPosition : 'bottom',

    items : [{
        xtype : 'searchview',
    }, {
        xtype : 'profileview'
    }, {
        xtype : 'messagesview'
    }, {
        xtype : 'sensesview'
    }]

} 
```

});

**应用程序.js**

```
views : ['Start', 'Main', 'Contact', 'Login', 'CreateAccount', 'Home', 'Messages', 'Profile', 'Search', 'Senses'],

controllers : ['LoginController'], 
```

那么，我怎样才能确保我仍然在控制器中获得对 Home 的引用（从 main 中删除之后）？

谢谢你的帮助，科恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:57:45.403

你想给出`Home`一个`itemId`而不是一个`id`。

```
Ext.define('MyApp.view.Home', {
    extend : 'Ext.tab.Panel',
    itemId : 'home',
    xtype : 'homeview',
    ...
}); 
```

现在在您的控制器中，您想像这样引用它：

```
...
config : {
refs : {
    loginForm : "#loginFormPanel",
    home : {
            autoCreate: true,
            selector: '#home',
            xtype: 'homeview'
        }
},
... 
```

# android - ANR keyDispatchingTimedOut - AIR for Android

> ID：15088482
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:03.923
> 
> 标签：android, apache-flex, air

在为 Android 编译的 Adob​​e AIR 应用程序中，我收到 ANR 错误，原因为 keyDispatchingTimedOut。工作流程如下：

1.  正在播放声音，正在播放嵌入的 SWF。
2.  用户按下按钮 - 声音/SWF 停止播放
3.  应用程序等待 3 秒
4.  应用程序对服务器进行一些异步调用
5.  应用程序处理结果，并将新视图推送到视图堆栈。
6.  出现新视图
7.  5-10% 的时间，几秒钟后，ANR 发生。

错误报告中的任何内容都没有真正突出。任何帮助将不胜感激。这真让我抓狂！

我附上了 ANR 错误报告：

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0)

"main" prio=5 tid=1 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x41b0d508 self=0x41afd9b0
| sysTid=17654 nice=0 sched=0/0 cgrp=apps handle=1074835248
| schedstat=( 571788091723 150929552253 787606 ) utm=48332 stm=8846 core=1
#00 pc 0000dca0 /system/lib/libc.so (__futex_syscall3+8)
#01 pc 00012e44 /system/lib/libc.so (__pthread_cond_timedwait_relative+48)
#02 pc 00012ea0 /system/lib/libc.so (__pthread_cond_timedwait+60)
#03 pc 00012f38 /system/lib/libc.so (pthread_join+108)
#04 pc 001ec1ef /data/data/air.com.gameonint.matchpoint/lib/libCore.so
at com.adobe.air.customHandler.callTimeoutFunction(Native Method)
at com.adobe.air.customHandler.handleMessage(customHandler.java:22)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4921)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
at dalvik.system.NativeStart.main(Native Method)

"Thread-3379" prio=5 tid=28 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x426bacf0 self=0x5619f470
| sysTid=21744 nice=-16 sched=0/0 cgrp=apps handle=1473838456
| schedstat=( 1340618900 149930103 2445 ) utm=119 stm=14 core=1
#00 pc 0000dca0 /system/lib/libc.so (__futex_syscall3+8)
#01 pc 00012204 /system/lib/libc.so
#02 pc 0014e913 /data/data/air.com.gameonint.matchpoint/lib/libCore.so
#03 pc 00135075 /data/data/air.com.gameonint.matchpoint/lib/libCore.so
#04 pc 001bf4a5 /data/data/air.com.gameonint.matchpoint/lib/libCore.so
at dalvik.system.NativeStart.run(Native Method)

"AudioTrack" prio=10 tid=26 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x426bac00 self=0x5630d198
| sysTid=21743 nice=-16 sched=0/0 cgrp=apps handle=1473486696
| schedstat=( 835445145 754790225 27458 ) utm=32 stm=51 core=0
#00 pc 0000d320 /system/lib/libc.so (nanosleep+12)
#01 pc 0001a9cb /system/lib/libc.so (usleep+30)
#02 pc 0004364f /system/lib/libmedia.so (android::AudioTrack::processAudioBuffer(android::sp<android::AudioTrack::AudioTrackThread> const&)+402)
#03 pc 0004370b /system/lib/libmedia.so (android::AudioTrack::AudioTrackThread::threadLoop()+70)
#04 pc 0001103b /system/lib/libutils.so (android::Thread::_threadLoop(void*)+94)
#05 pc 0004bb5b /system/lib/libandroid_runtime.so (android::AndroidRuntime::javaThreadShell(void*)+66)
#06 pc 00010bb5 /system/lib/libutils.so
#07 pc 00012e00 /system/lib/libc.so (__thread_entry+48)
#08 pc 00012558 /system/lib/libc.so (pthread_create+172)
at dalvik.system.NativeStart.run(Native Method)

"Binder_4" prio=5 tid=27 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x424d0290 self=0x57549818
| sysTid=18326 nice=0 sched=0/0 cgrp=apps handle=1458138408
| schedstat=( 15464300 14467273284 378 ) utm=0 stm=1 core=1
#00 pc 0000cb90 /system/lib/libc.so (__ioctl+8)
#01 pc 00027fcd /system/lib/libc.so (ioctl+16)
#02 pc 00016bfd /system/lib/libbinder.so (android::IPCThreadState::talkWithDriver(bool)+124)
#03 pc 000173af /system/lib/libbinder.so (android::IPCThreadState::joinThreadPool(bool)+154)
#04 pc 0001b171 /system/lib/libbinder.so
#05 pc 0001104f /system/lib/libutils.so (android::Thread::_threadLoop(void*)+114)
#06 pc 0004bb5b /system/lib/libandroid_runtime.so (android::AndroidRuntime::javaThreadShell(void*)+66)
#07 pc 00010bb5 /system/lib/libutils.so
#08 pc 00012e00 /system/lib/libc.so (__thread_entry+48)
#09 pc 00012558 /system/lib/libc.so (pthread_create+172)
at dalvik.system.NativeStart.run(Native Method)

"Binder_3" prio=5 tid=25 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x42679b00 self=0x53867d40
| sysTid=18156 nice=0 sched=0/0 cgrp=apps handle=1469136080
| schedstat=( 15274994 16984359588 428 ) utm=0 stm=1 core=0
#00 pc 0000cb90 /system/lib/libc.so (__ioctl+8)
#01 pc 00027fcd /system/lib/libc.so (ioctl+16)
#02 pc 00016bfd /system/lib/libbinder.so (android::IPCThreadState::talkWithDriver(bool)+124)
#03 pc 000173af /system/lib/libbinder.so (android::IPCThreadState::joinThreadPool(bool)+154)
#04 pc 0001b171 /system/lib/libbinder.so
#05 pc 0001104f /system/lib/libutils.so (android::Thread::_threadLoop(void*)+114)
#06 pc 0004bb5b /system/lib/libandroid_runtime.so (android::AndroidRuntime::javaThreadShell(void*)+66)
#07 pc 00010bb5 /system/lib/libutils.so
#08 pc 00012e00 /system/lib/libc.so (__thread_entry+48)
#09 pc 00012558 /system/lib/libc.so (pthread_create+172)
at dalvik.system.NativeStart.run(Native Method)

"Thread-3133" prio=5 tid=19 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x4269cfd0 self=0x57f06bd0
| sysTid=17765 nice=0 sched=0/0 cgrp=apps handle=1457713968
| schedstat=( 229101702 17702911370 2605 ) utm=12 stm=10 core=0
#00 pc 0000da70 /system/lib/libc.so (epoll_wait+12)
#01 pc 00137079 /system/lib/libchromium_net.so
#02 pc 00136e6d /system/lib/libchromium_net.so
#03 pc 0005b0d1 /system/lib/libchromium_net.so
#04 pc 000597cf /system/lib/libchromium_net.so (MessageLoop::RunInternal()+114)
#05 pc 0005982d /system/lib/libchromium_net.so (MessageLoop::Run()+16)
#06 pc 00079ef1 /system/lib/libchromium_net.so (base::Thread::ThreadMain()+188)
#07 pc 0007997b /system/lib/libchromium_net.so
#08 pc 00012e00 /system/lib/libc.so (__thread_entry+48)
#09 pc 00012558 /system/lib/libc.so (pthread_create+172)
at dalvik.system.NativeStart.run(Native Method)

"AsyncTask #3" prio=5 tid=32 WAIT
| group="main" sCount=1 dsCount=0 obj=0x426b3e70 self=0x56e7ffa8
| sysTid=17763 nice=10 sched=0/0 cgrp=apps/bg_non_interactive handle=1458082608
| schedstat=( 10809752 19933622338 363 ) utm=0 stm=0 core=1
at java.lang.Object.wait(Native Method)
- waiting on <0x426b3f90> (a java.lang.VMThread) held by tid=32 (AsyncTask #3)
at java.lang.Thread.parkFor(Thread.java:1231)
at sun.misc.Unsafe.park(Unsafe.java:323)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2022)
at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:413)
at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1009)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1069)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)

"CookieSyncManager" prio=5 tid=31 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x4255f6b0 self=0x56e98d30
| sysTid=17758 nice=10 sched=0/0 cgrp=apps/bg_non_interactive handle=1457721768
| schedstat=( 15950658 20119845013 333 ) utm=0 stm=1 core=1
#00 pc 0000da70 /system/lib/libc.so (epoll_wait+12)
#01 pc 00014899 /system/lib/libutils.so (android::Looper::pollInner(int)+96)
#02 pc 00014b01 /system/lib/libutils.so (android::Looper::pollOnce(int, int*, int*, void**)+104)
#03 pc 000634fb /system/lib/libandroid_runtime.so (android::NativeMessageQueue::pollOnce(_JNIEnv*, int)+22)
#04 pc 0001df30 /system/lib/libdvm.so (dvmPlatformInvoke+112)
#05 pc 0004d183 /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+394)
#06 pc 00027360 /system/lib/libdvm.so
#07 pc 0002bc68 /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
#08 pc 0005f8f1 /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+272)
#09 pc 0005f91b /system/lib/libdvm.so (dvmCallMethod(Thread*, Method const*, Object*, JValue*, ...)+20)
#10 pc 000544d3 /system/lib/libdvm.so
#11 pc 00012e00 /system/lib/libc.so (__thread_entry+48)
#12 pc 00012558 /system/lib/libc.so (pthread_create+172)
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:125)
at android.os.Looper.loop(Looper.java:124)
at android.webkit.WebSyncManager.run(WebSyncManager.java:92)
at android.webkit.CookieSyncManager.run(CookieSyncManager.java:58)
at java.lang.Thread.run(Thread.java:856)

"WebViewCoreThread" prio=5 tid=30 NATIVE
| group="main" sCount=1 dsCount=0 obj=0x42684de8 self=0x56e3c548
| sysTid=17756 nice=0 sched=0/0 cgrp=apps handle=1458078976
| schedstat=( 1364349593 17478104614 14927 ) utm=109 stm=26 core=0
#00 pc 0000da70 /system/lib/libc.so (epoll_wait+12)
#01 pc 00014899 /system/lib/libutils.so (android::Looper::pollInner(int)+96)
#02 pc 00014b01 /system/lib/libutils.so (android::Looper::pollOnce(int, int*, int*, void**)+104)
#03 pc 000634fb /system/lib/libandroid_runtime.so (android::NativeMessageQueue::pollOnce(_JNIEnv*, int)+22)
#04 pc 0001df30 /system/lib/libdvm.so (dvmPlatformInvoke+112)
#05 pc 0004d183 /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+394)
#06 pc 00000214 /dev/ashmem/dalvik-jit-code-cache (deleted)
at android.os.MessageQueue.nativePollOnce(Native Method)
at android.os.MessageQueue.next(MessageQueue.java:125)
at android.os.Looper.loop(Looper.java:124)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:1067)
at java.lang.Thread.run(Thread.java:856)

"AsyncTask #2" prio=5 tid=24 WAIT
| group="main" sCount=1 dsCount=0 obj=0x426783d8 self=0x57331568
| sysTid=17722 nice=10 sched=0/0 cgrp=apps/bg_non_interactive handle=1444187536
| schedstat=( 111962004 20480411385 9839 ) utm=4 stm=7 core=1
at java.lang.Object.wait(Native Method)
- waiting on <0x426784f8> (a java.lang.VMThread) held by tid=24 (AsyncTask #2)
at java.lang.Thread.parkFor(Thread.java:1231)
at sun.misc.Unsafe.park(Unsafe.java:323)
at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.ja... 
```

# java - 简而言之，主要功能行为 - 一个源文件中的多个类

> ID：15088483
> 
> 赞同：3
> 
> 时间：2013-02-26T11:55:04.960
> 
> 标签：java, eclipse

给定一个名为**TestMainFunction.java的 Java 源文件**

1.) 我们大多数人都知道，Java 文件名必须是包含 main 函数的类名

请参阅下面的简单代码（在如上所述命名的单个文件中）完美执行并打印`ClassOne`.

```
public class TestMainFunction {}

class ClassOne {
    public static void main(String[] a) {
        System.out.println("ClassOne");
    }
} 
```

2.) 当单个文件中有多个具有主函数的类时，Eclipse 会提示用户选择要运行的类。

请参阅下面的简单代码（如上所述命名的单个文件），它完美执行并打印我们从 Eclipse 提示符中选择的类名。

```
public class TestMainFunction {
    public static void main(String[] a) {
        System.out.println("TestMainFunction");
    }
}

class ClassOne {
    public static void main(String[] a) {
        System.out.println("ClassOne");
    }
}

class ClassTwo {
    public static void main(String[] a) {
        System.out.println("ClassTwo");
    }
} 
```

正如我所提到的，以上所有内容都将起作用。**它将为每个类创建单独的 .class 文件**。即使在使用内部类时，同样的行为也适用。

但是这里到底发生了什么？当一个源文件中存在多个类时，Eclipse 如何知道要启动哪个类？任何人都可以解释一下吗？解释这一点将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:24:30.920

> 大多数人都知道，Java 文件名必须是包含 main 函数的类名

这是不正确的，我相信您的困惑的根源。Java 源文件只允许有一个公共类，并且它***必须***与包含文件具有相同的名称（减去扩展名）。但是，给定的 Java 源文件可能包含任意数量的非公共类文件，唯一的限制是[它们的名称是有效的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.8)。请注意，您可以拥有一个与其包含的源文件（减去扩展名）同名的类，它*不是公共的*！另请注意，在单个 Java 源文件中包含多个顶级（非嵌套）类通常被认为是不好的做法。

您可能有的第二个假设是源文件中只允许一个类具有主函数。这是不真实的。您可以为每个类文件添加一个 main 函数——唯一重要的是您在启动应用程序时指定给 JVM 的那个。

因此，鉴于您的场景 - 一个具有多个类文件（其中一个是公共文件）的源文件，其中每个类都有一个 main 方法，以下适用：

*   当您在 Eclipse 中对该文件调用 Run 命令时，Eclipse 将检测到有多个符合条件的类要运行，并提示您选择其中一个类。然后它将为选定的类构建一个“运行配置文件”，*仅启动该类*。您实际上可以通过 Run->Debug Configurations 菜单查看 Eclipse 构建的配置文件。
*   在外部编译这个源文件时，会生成多个 .class 文件（不仅仅是一个）。这些类彼此没有关系，保存在同一个源文件中，您将明确选择要在 JVM 中启动的 .class。

IE：

```
java TestMainFunction
java ClassOne
java ClassTwo 
```

# javascript - 递归到没有无限循环的对象

> ID：15088484
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:05.990
> 
> 标签：javascript, dom

为了学习，我正在遍历javascript中的对象。现在这相当于吐出函数给出的第一个对象中的每个属性，并递归到它找到的任何子对象（包括函数）。

以 window 对象为例，当 window.top 指向 window 时，函数会陷入无限循环。我应该如何最好地跟踪我已经遍历过的对象以避免递归到它们中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:41:24.247

您可以使用数组来存储您当前正在查看的对象。这应该有助于检测循环引用：

```
var stack = [];
function traverse(object) {
  if (stack.indexOf(object) !== -1) {
    return; // if the condition above is true, we have a circular reference
  }
  stack.push(object);
  // here go through object properties, recursively calling traverse()
  stack.pop();
} 
```

# html - Addthis：图片和图片链接的不同网址点击

> ID：15088503
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:43.817
> 
> 标签：html, addthis

我正在尝试为我的网站使用 Addthis 小部件。现在我正在使用以下代码将图像共享到不同的网站。

```
<script>var addthis_config = {     
services_overlay:'facebook,twitter,email,more'
}</script> 
```

```
<div class='giveTopMargin'>
   <a href='link' class='lightbox'  title='title'>
      <img class='addthis_shareable' src='img_url' addthis:url='img_url' addthis:title='message' />
   </a>
</div> 
```

我想要的是，当用户单击 facebook 的共享按钮时。我需要`img_url`我提到的图像预览，当这个链接在 facebook 上成功共享时，我需要在 facebook 上点击这个帖子的人，他应该被重定向到我网站的主页，而是将他重定向到`img_url`.

现在这段代码的问题是它向我显示了以下共享框。 ![在此处输入图像描述](../Images/1972ff44df7ebae32c2cc1129f22b95c.png)

正如您所看到的，它`img_url`在标题和描述中向我显示，而不是我上面提到的内容`title message`。如果我将 更改`img_url`为我网站的主页，那么这将不会显示我的图像预览已分享。

我希望我足够清楚。请让我知道任何澄清。

代码来源： http: [//www.addthis.com/labs/photo-sharing#.USyj-jAyZjY](http://www.addthis.com/labs/photo-sharing#.USyj-jAyZjY)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:44:17.597

我无法解决问题，所以我给他们发了一封电子邮件`Addthis support`，他们说 facebook 试图从我们提到的 url 中捕获图像预览。所以我无法使用`Addthis Plugin`.

所以我最终自己做这件事，使用[facebook.ui](https://developers.facebook.com/docs/reference/javascript/FB.ui/)对话框与我想要的设置共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:41:31.870

我认为您需要做的就是更改 addthis:url 的值，例如，如果您希望他们访问的站点是[http://www.supportmyidea.com](http://www.supportmyidea.com)，那么您的 img 标签应该如下所示：

```
<div class='giveTopMargin'>
    <a href='link' class='lightbox'  title='title'>
        <img class='addthis_shareable' 
             src='[your_image_url]' 
             addthis:url='http://www.supportmyidea.com' 
             addthis:title='Support My Idea' />
    </a>
</div> 
```

Facebook 显示的图像预览实际上是基于您指定的 URL。Facebook 会抓取该页面并显示该页面中的图像 - 如果您指定 og:image 标签，Facebook 将使用该图像。我希望这是有道理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T23:49:17.617

您不必使用他们的格式。使用`img`标签和`a`标签制作您自己的图片和网址。所有的 URL 必须是这样的：

```
http://www.addthis.com/bookmark.php?url={url} 
```

# c# - 将 Directory.GetFiles() 或 EnumerateFiles 与包含锁定文件的目标目录一起使用的最佳实践？

> ID：15088504
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:52.593
> 
> 标签：c#, filesystems, .net

目前我尝试改进两个 Windows 服务（C#）的设计。服务 A 生成数据导出（csv 文件）并将它们写入临时目录。所以文件被写入一个临时目录，它是一个子目录。的主输出目录。然后文件被移动（通过*`File.Move`*）到输出目录（在成功写入之后）。此导出可能由多个线程执行。

另一个服务 B 尝试在定义的时间间隔内从此输出目录中获取文件。如何确保*`Directory.GetFiles()`*排除锁定的文件。

1.  我是否应该尝试通过创建一个新的 FileStream（使用 () 来检查每个文件，如此[处](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use)`Stream stream = new FileStream("MyFilename.txt", FileMode.Open)`所述 。

2.  或者生产者服务 (A) 是否应该使用由消费者服务 (B) 自动排除的临时文件名 (*.csv.tmp) 以及适当的搜索模式。并在移动完成后重命名文件。

3.  是否有更好的方法来处理此类文件列表操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:20:39.010

一种方法是在使用时将文件标记为来自书写应用程序的临时文件，并且仅在写入并关闭它们后取消标记，例如。

```
FileStream f = File.Create (filename);
FileAttributes attr = File.GetAttributes (filename);
File.SetAttributes (filename, attr | FileAttributes.Temporary);
 //write to file.
f.Close ();

File.SetAttributes (filename, attr); 
```

从消费应用程序中，您只想跳过任何临时文件。

```
foreach (var file in Directory.GetFiles (Path.GetDirectoryName (filename))) {
    if ((File.GetAttributes (file) & FileAttributes.Temporary) != 0) continue;
    // do normal stuff.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:17:56.387

### 不用麻烦查了！

嗯？怎么可能？

如果文件在同一个驱动器上，则移动操作是原子操作！该操作实际上是重命名，从前一个目录条目中删除，并将其插入到下一个目录中，指向数据实际所在的相同扇区（或其他），而不重写它。文件系统的内部锁定机制必须在此过程中锁定和阻止目录读取，以防止目录扫描返回损坏的结果。

这意味着，当它出现在目录中时，它不会被锁定；实际上，自从将文件写入上一个目录的关闭操作之后，该文件就不会被打开/修改。

**警告**- (1) 绝对不能在作为子目录安装的驱动器、分区或其他媒体之间工作。操作系统在幕后进行复制+删除，而不是目录条目编辑。(2) 这种行为是惯例，不是规则。尽管我从未见过它，但文件系统可以随意破坏它，甚至可以不一致地破坏它！

所以这可能会奏效。如果没有，我建议您使用您自己的临时扩展想法（我之前已经为此确切目的做过，但在只能通过共享驱动器通信的客户端和服务器之间进行通信），事实并非如此努力工作，完美无瑕。

如果您自己的想法技术含量太低，并且您在同一台机器上（听起来像），您可以设置一个互斥锁（google that），嵌入文件名，在写入文件时存在，在写入程序；然后在打开从另一个进程读取的每个文件时对其进行阻塞测试。如果您希望第二个进程尽快响应，请将其与文件系统观察程序结合起来。然后为自己花费十倍的精力作为临时文件名的想法而拍拍自己，没有额外的收获>：-}

祝你好运！

# c# - 开发自定义asp.net服务器控件渲染脚本代码

> ID：15088505
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:56.120
> 
> 标签：c#, jquery, asp.net, custom-server-controls, servercontrols

我有一个服务器控件如下：

```
 [DefaultProperty("ContentKey")]
    [ToolboxData("<{0}:ContentRating runat=server></{0}:ContentRating>")]
    public class ContentRating : WebControl
    {
        [Bindable(true)]
        [Category("Appearance")]
        [DefaultValue("")]
        [Localizable(true)]
        public string ContentKey
        {
            get
            {
                String s = (String)ViewState["ContentKey"];
                return ((s == null) ? "[" + this.ID + "]" : s);
            }

            set
            {
                ViewState["ContentKey"] = value;
            }
        }

        protected override void RenderContents(HtmlTextWriter output)
        {
            StringBuilder builder = new StringBuilder(@"<div id=""divContentRating"">
    <div id=""divAskForRating"">
        #Question
        <br />
        <a id=""likeIcon""><img src=""~/Content/Images/like.jpg""/></a>
        <a id=""neutralIcon""><img src=""~/Content/Images/neutral.jpg""/></a>
        <a id=""unlikeIcon""><img src=""~/Content/Images/unlike.jpg""/></a>
    </div>
    <div id=""divPositiveRating"">
        <div>
            <img src=""~/Content/Images/like.jpg""/> #PositiveAnswerMessage <br />
            <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
        </div>
    </div>
    <div id=""divNegativeRating"">
        <div>
            <img src=""~/Content/Images/unlike.jpg""/> #NegativeAnswerMessage <br />
            <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
        </div>
    </div>
    <div id=""divNeutralRating"">
        <div>
            <img src=""~/Content/Images/neutral.jpg""/> #NeutralAnswerMessage <br />
            <a href=""javascript:void(0)"" class=""updateRate"">Güncelle</a>
        </div>
    </div>

    <input type=""hidden"" id=""HasRated"" value=""False"">
    <input type=""hidden"" id=""Rate"" value=""Rate"">
    <input type=""hidden"" id=""ContentKey"" value=""#ContentKey"">
    <input type=""hidden"" id=""RatingId"" value=""RatingId"">

    <script type=""text/javascript"">
    $(document).ready(function () {
        var protocol = location.protocol;
        var host = window.location.host;

        if ($(""#HasRated"").val() == """"True"")
        {
            var rate = $(""#Rate"").val();
            if (rate == 1) {
                setPositiveRatedView();
            }
            else if (rate == 0) {
                setNeutralRatedView();
            }
            else if (rate == -1) {
                setNegativeRatedView();
            }
            else {
                setNotRatedView();
            }
        }
        else {
            setNotRatedView();
        }

        $(""#likeIcon"").click(function () {
            alert(""like"");
            setPositiveRatedView();
            ratePage(1, """");
        });

        $(""#neutralIcon"").click(function () {
            alert(""neutral"");
            setNeutralRatedView();
            ratePage(0, """");
        });

        $(""#unlikeIcon"").click(function () {
            alert(""unlike"");
            setNegativeRatedView();
            //mkMPopClc('NegativeRatingReason', 200, 300, 0, 0);
        });

        $("".updateRate"").click(function () {
            setNotRatedView();
        });

//        $('.clsStl').click(function () {
//            ratePage(-1, """");
//            $('.mkMPop').fadeOut();
//        });
//
//        $('#ShareComment').click(function () {
//            ratePage(-1, $(""#Comment"").val());
//            $('.mkMPop').fadeOut();
//        });

        function setNotRatedView() {
            $(""#divNeutralRating"").fadeOut();
            $(""#divPositiveRating"").fadeOut();
            $(""#divAskForRating"").fadeIn();
            $(""#divNegativeRating"").fadeOut();
        }

        function setPositiveRatedView()
        {
            $(""#divNegativeRating"").fadeOut();
            $(""#divNeutralRating"").fadeOut();
            $(""#divAskForRating"").fadeOut();
            $(""#divPositiveRating"").fadeIn();
        }

        function setNegativeRatedView() {
            $(""#divNeutralRating"").fadeOut();
            $(""#divPositiveRating"").fadeOut();
            $(""#divAskForRating"").fadeOut();
            $(""#divNegativeRating"").fadeIn();
        }

        function setNeutralRatedView() {
            $(""#divNegativeRating"").fadeOut();
            $(""#divPositiveRating"").fadeOut();
            $(""#divAskForRating"").fadeOut();
            $(""#divNeutralRating"").fadeIn();
        }

        function ratePage(rating, comment)
        {
            //alert(rating + """" """" + comment);
            var contentKey = $(""#ContentKey"").val();
            var hasRated = $(""#HasRated"").val();
            var ratingId = $(""#RatingId"").val();

            $.getJSON(protocol + '//' + host + '/tr/Rating/RatePage?contentKey=' + contentKey + '&rating=' + rating + '&ratingUpdate=' + hasRated + '&ratingId=' + ratingId + '&comment=' + comment, function (data) {
                $(""#HasRated"").val(data.HasRated);
                $(""#Rate"").val(data.Rate);
                $(""#ContentKey"").val(data.ContentKey);
                $(""#RatingId"").val(data.RatingId);
                $(""#Comment"").val(data.Comment);
            });
        }
    });
</script>
</div>");

            builder.Replace("#ContentKey", this.ContentKey);

            output.Write(builder);
        }
    } 
```

当我将控件添加到网页时，我看到控件正在按预期呈现，但 jquery 脚本不起作用。将脚本代码保留在服务器控件中是错误的吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:09:33.240

```
if ($(""#HasRated"").val() == """"True"") 
```

我认为您那里的引号字符太多...

# asp.net - asp.net 将视频上传到 youtube

> ID：15088506
> 
> 赞同：1
> 
> 时间：2013-02-26T11:55:58.367
> 
> 标签：asp.net, file-upload, youtube

我正在尝试将视频文件上传到 Youtube 并将其显示在我的网站上。但是我还没有完成上传，我认为显示它很容易。请帮我上传。我读了很多关于这个的页面，我很困惑。如果可能的话，我只想使用 post 方法而不使用谷歌库。

这是我在 aspx 文件中的简单 html 表单

```
<form id="form1" runat="server" enctype="multipart/form-data" method="post">
<div>
    <input type="file" name="file" />
    <input type="hidden" name="token" value="token_value"/>
    <asp:Button runat="server" ID="go" OnClick="Button1_Click" />
</div> 
```

我应该在后面的代码中做什么？任何有用的链接？

# android - 连接wifi时打开应用

> ID：15088507
> 
> 赞同：5
> 
> 时间：2013-02-26T11:56:01.133
> 
> 标签：android, android-intent, broadcastreceiver, wifi

当用户进入有 Wi-Fi 的区域时，我如何打开我的应用程序？这可能吗？假设我的应用程序处于 onPause() 状态**（表示我的设备的主屏幕）。**现在当设备与 wifi 连接时。它会自动打开我的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:06:07.440

当 wi-fi 连接开始您的活动时，尝试添加广播接收器并监听网络变化。像这样的解决方案

```
public class ConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

                ConnectivityManager connMgr = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
                NetworkInfo wifi = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
                NetworkInfo mobile = connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
                if (((null != wifi)&&(wifi.isAvailable())) || ((null != mobile)&&(mobile.isAvailable()))){
                    Intent uplIntent = new Intent(context, YourActivity.class);
                    uplIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(uplIntent);
                }

    }
} 
```

并添加到清单

```
 <receiver android:name=".receiver.ConnectivityReceiver">
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
    </receiver>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:12:10.337

我能想象的是这样的`onPause()`方法的覆盖：

```
@Override
public void onPause() {
    String conn_context = Context.WIFI_SERVICE;
    final WifiManager wifi = (WifiManager) getSystemService(conn_context);
    if (wifi.isWifiEnabled())
    {
      super.onResume();
    }
    else
    {
      super.onPause(); 
    }
} 
```

但是您还必须想办法处理真正的 onPause 事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:21:26.560

也许可以使用 Play Store 中的 Tasker 应用程序（虽然不是免费的）。或者您可以创建一个服务（[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)），该服务将在其他答案中列出代码，然后在 wifi 可用时启动您的应用程序（活动）。

# javascript - 使用 Regex 将字符串替换为数组索引和数组元素。jQuery

> ID：15088508
> 
> 赞同：0
> 
> 时间：2013-02-26T11:56:01.170
> 
> 标签：javascript, jquery, regex

我需要一个字符串助手来用变量替换方括号内的所有内容。使用 javascript

```
"Hello, [0]".modify(["ABC"])

"Heelo, [0], This is [1]".modify(["ABC", "XYZ"])

"Heelo, [0], This is [1], Your email address is [2]".modify(["ABC", "XYZ", "abcdef@example.com"]) 
```

所以基本上**modify()**将获取数组并用适当的索引替换字符串。

任何意见将是有益的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:03:12.263

```
String.prototype.modify = function(arr) {
    return this.replace(/\[(\d+)\]/g, function(c, m) {
        return arr[m] === undefined ? c : arr[m];
    });
};

"Heelo, [0], This is [1]".modify(["ABC", "XYZ"]);
// "Heelo, ABC, This is XYZ" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:03:48.467

```
String.prototype.modify = function() {
  var s = arguments[0];
  for (var i = 0; i < arguments.length - 1; i++) {       
    var reg = new RegExp("\\[" + i + "\\]", "gm");             
    s = s.replace(reg, arguments[i + 1]);
  }
  return s;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:28:54.600

所有的答案都很有用，

但我使用了内置功能，来自@PedrodelSol 提供的链接

```
"Hello {0}, This is {1}".format(["ABC", "XYZ"]) 
```

# c# - OnActionExecuting 构造局部视图

> ID：15088513
> 
> 赞同：3
> 
> 时间：2013-02-26T11:56:10.243
> 
> 标签：c#, asp.net-mvc, razor

如果这很明显，请道歉，但我正在尝试创建一个属性来处理部分视图中使用的模型的缓存。

```
 [MyCache(typeof(MyModel))]
  public ActionResult MyAction(string fooId)
  {
      return PartialView(new MyModel());
  } 
```

我的属性应该使用 post 上的输入模型更新缓存，并使用我的缓存模型覆盖 get 上的操作结果。

但是我不知道如何从控制器外部调用 PartialView 方法。这个构造函数似乎没有任何参数：

```
 new PartialViewResult(filterContext.HttpContext.Cache.Get("MyModelCache")[model.Name]); 
```

如何使用剃刀视图构建模型？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:03:04.187

```
filterContext.Controller.ViewData.Model = 
    filterContext.HttpContext.Cache.Get("MyModelCache")[model.Name];
filterContext.Result = new PartialViewResult
{
    ViewData = filterContext.Controller.ViewData,
    ViewName = "~/Views/_NameOfPartial", // optional if you need it
}; 
```

以下是`PartialView`控制器中采用 2 个参数的方法的来源：

```
namespace System.Web.Mvc
{
    public abstract class Controller : ControllerBase, (etc)
    {
        ...
        protected internal virtual PartialViewResult PartialView(
            string viewName, object model)
        {
            if (model != null)
                this.ViewData.Model = model;
            PartialViewResult partialViewResult = new PartialViewResult();
            partialViewResult.ViewName = viewName;
            partialViewResult.ViewData = this.ViewData;
            partialViewResult.TempData = this.TempData;
            partialViewResult.ViewEngineCollection = this.ViewEngineCollection;
            return partialViewResult;
        }
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:03:48.083

尝试这个

```
new PartialViewResult
{
    ViewData = new ViewDataDictionary(filterContext.HttpContext.Cache.Get("MyModelCache"))[model.Name],
} 
```

# css - 如何排除多于一个孩子

> ID：15088514
> 
> 赞同：0
> 
> 时间：2013-02-26T11:56:11.267
> 
> 标签：css, css-selectors

我想排除 th 的最后一个和倒数第二个孩子来应用一些 css 属性。单独完成就像

```
.List  thead tr th:not(:last-child){
  //Some Css properties 
 } 
```

倒数第二个孩子也一样。可以在一个 CSS 选择器中使用 not 运算符组合吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T11:59:06.013

CSS3 为我们带来了`:nth-last-child()`选择器。要组合多个`:not`项目，只需将它们添加到末尾。

[JSFiddle](http://jsfiddle.net/kLY3H/)

```
li:not(:last-child):not(:nth-last-child(2)) {
    color:red;
} 
```

根据[caniuse.com](http://caniuse.com/#search=not)的说法，这种方法可能只有 IE9 才完全支持。我说可能是因为 caniuse 不够具体。就个人而言，除非有必要，否则我不会竭尽全力支持 < IE9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:00:08.493

```
.List thead tr th:nth-last-of-type(1) ,.List thead tr th:nth-last-of-type(2) {
/*Some Code*/
} 
```

尝试这个

# regex - 使用正则表达式验证手机号码

> ID：15088518
> 
> 赞同：7
> 
> 时间：2013-02-26T11:56:29.207
> 
> 标签：regex

我需要验证手机号码。我的需要：

> 1.  号码可能以 +8801 或 8801 或 01 开头
> 2.  下一个数字可以是 1 或 5 或 6 或 7 或 8 或 9
> 3.  然后有确切的8位数字。

如何使用此条件编写正则表达式？

我试过的手机号码

```
+8801811419556
01811419556
8801711419556
01611419556
8801511419556 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-26T12:07:12.323

应该很简单：

```
^(?:\+?88)?01[15-9]\d{8}$ 
```

*   `^`- 从字符串的开头
*   `(?:\+?88)?`- 可选`88`，*可能*开始于`+`
*   `01`- 强制的`01`
*   `[15-9]`- “1 或 5 或 6 或 7 或 8 或 9”
*   `\d{8}`- 8 位数字
*   `$`- 字符串的结尾

工作示例：[http ://rubular.com/r/BvnSXDOYF8](http://rubular.com/r/BvnSXDOYF8)

**2020 年更新**

由于 BTRC 批准了 2 个新前缀，Grameenphone 为 013，Banglalink 为 014，现在更新了表达式：

```
^(?:\+?88)?01[13-9]\d{8}$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-19T08:10:38.057

**您可以使用任一给定正则表达式来验证孟加拉手机号码。**

**解决方案1：**

```
/(^(\+88|0088)?(01){1}[56789]{1}(\d){8})$/ 
```

允许使用 Robi、Grameen Phone、Banglalink、Airtel 和 Teletalk 运营商手机号码。

**解决方案2：**

```
 /(^(\+8801|8801|01|008801))[1|5-9]{1}(\d){8}$/ 
```

允许使用 Citycell、Robi、Grameen Phone、Banglalink、Airtel 和 Teletalk 运营商手机号码。

允许的手机号码模式

+8801812598624

008801812598624

01812598624

01712598624

01919598624

01672598624

01512598624

**......**

**.....................**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-02T19:18:05.663

我知道，这个问题是很久以前提出的，但我认为@GM Nazmul Hossain 想要验证所选国家的手机号码。我向您展示如何使用[Google 提供的免费库 libphonenumber 进行](https://github.com/googlei18n/libphonenumber)操作。它适用于 Java、C++ 和 Javascript，但也有适用于 PHP 的 fork，我相信还有其他语言。

+880 告诉我这是[孟加拉国的国家代码](http://www.countrycallingcodes.com/country.php?country=Bangladesh)。让我们尝试在 Javascript 中使用以下代码验证示例编号：

```
String bdNumberStr = "8801711419556"
PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
try {
    //BD is default country code for Bangladesh (used for number without 880 at the begginning)
    PhoneNumber bdNumberProto = phoneUtil.parse(bdNumberStr, "BD");
} catch (NumberParseException e) {
    System.err.println("NumberParseException was thrown: " + e.toString());
}
boolean isValid = phoneUtil.isValidNumber(bdNumberProto); // returns true 
```

该代码还将处理其中带有空格的数字（例如“880 17 11 41 95 56”），甚至在开头使用 00880（+ 有时会替换为 00）。

[在演示页面](http://libphonenumber.googlecode.com/svn/trunk/javascript/i18n/phonenumbers/demo-compiled.html)上自己尝试一下。验证所有提供的示例甚至更多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:03:03.840

如果您想快速访问以下站点，请使用以下正则表达式并对其进行测试

[正则表达式](http://regexpal.com/)

[8]*01[15-9]\d{8}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:55:48.720

在以下位置查看 libphonenumber： [https ://code.google.com/p/libphonenumber/](https://code.google.com/p/libphonenumber/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-17T05:57:51.553

```
**Laravel Bangladeshi Phone No validation for (Citycell, Robi, Grameen Phone, Banglalink, Airtel and Teletalk) and start with +88/88 then 01 then 356789 then 8 digit**  

public function rules()
        {
            return [

                'mobile' => 'sometimes|regex:/^(?:\+?88)?01[35-9]\d{8}$/',

            ];
        }

        public function messages()
        {

                'mobile.regex' => 'Mobile no should be bd standard',
            ];
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T19:07:37.237

> 使用正则表达式验证孟加拉电话号码（*Citycell*、*Robi*、*Grameen Phone*、*Banglalink*、*Airtel*和*Teletalk* **运营商）：**

```
$pattern = '/(^(\+8801|8801|01|008801))[1-9]{1}(\d){8}$/';
$BangladeshiPhoneNo = "+8801840001417";

if(preg_match($pattern, $BangladeshiPhoneNo)){
    echo "It is a valid Bangladeshi phone number;
} 
```

# asp.net-mvc - MVC 中的 ViewModel 访问数据的正确方法

> ID：15088521
> 
> 赞同：0
> 
> 时间：2013-02-26T11:56:37.073
> 
> 标签：asp.net-mvc, asp.net-mvc-4

谁能告诉我这是否是创建视图模型的正确方法。我正在使用 Ninject，我可以让视图模型工作的唯一方法是使用下面的代码。

此外，除非我创建第二个接口，否则我似乎无法将数据从视图模型传递到控制器。

下面的代码确实有效，但是阅读我看到的所有示例，我似乎从我的域层复制了很多代码。

----------代码数据访问层------

```
 using System.Collections.Generic;
    using System.Configuration;
    using System.Data;
    using System.Data.SqlClient;

namespace Web.Domain.SearchEngine
    {
    public class DisplaySearchResults
        {
        public string Title         { get; set; }
        public string Description   { get; set; }
        public string URL           { get; set; }
        }
    public class GetSearchResults : IGetSearchResults
        {
        private string dbConn;

        public GetSearchResults()
            {
            dbConn = ConfigurationManager.ConnectionStrings["Search"].ConnectionString;
            }

        public IEnumerable<DisplaySearchResults> SearchResults(string q, string option, int pagenumber)
            {
            List<DisplaySearchResults> Data = new List<DisplaySearchResults>();
            string spName = "dbo.FTS_On_at_Websites";
            using (SqlConnection cn = new SqlConnection(dbConn))
                {
                using (SqlCommand cmd = new SqlCommand(spName, cn))
                    {
                    cmd.CommandType = CommandType.StoredProcedure;
                    cmd.Parameters.Add(new SqlParameter("@strSearchPhrase", SqlDbType.VarChar, 100));
                    cmd.Parameters.Add(new SqlParameter("@SearchMode", SqlDbType.Int, 4));
                    cmd.Parameters.Add(new SqlParameter("@intPageNumber", SqlDbType.Int));
                    cmd.Parameters.Add(new SqlParameter("@intRecordsPerPage", SqlDbType.Int));
                    cmd.Parameters.Add(new SqlParameter("@intTotalRecordsReturned", SqlDbType.Int));
                    cmd.Parameters["@strSearchPhrase"].Value = q;
                    cmd.Parameters["@SearchMode"].Value = 1;
                    cmd.Parameters["@intPageNumber"].Value = pagenumber;
                    cmd.Parameters["@intRecordsPerPage"].Value = 10;
                    cmd.Parameters["@intTotalRecordsReturned"].Value = 10;

                    cn.Open();
                    using (SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.Default))
                        {
                        if (rdr.HasRows)
                            {
                            while (rdr.Read())
                                {
                                Data.Add(new DisplaySearchResults
                                {
                                    Title           = (string)rdr["PageTitle"],
                                    Description     = (string)rdr["PageParagraph"],
                                    URL             = (string)rdr["PageURL"]
                                });
                                }
                            }
                        return Data;
                        }
                    }
                }
            }
        }
    } 
```

-------------代码视图模型--------

```
 using Microsoft.Security.Application;
    using System.Collections.Generic;
    using System.Linq;
    using Web.Domain.SearchEngine;

namespace Web.UI.ModelHelpers.Search
    {
    public class DisplaySearchResultsViewModel
        {
        public string Title         { get; set; }
        public string Description   { get; set; }
        public string URL           { get; set; }
        }

    public class GetSearchResultsViewModel : IGetSearchResultsViewModel
        {
        private readonly IGetSearchResults _IGSR;
        public GetSearchResultsViewModel(IGetSearchResults IGSR)
            {
            _IGSR = IGSR;
            }

        public IEnumerable<DisplaySearchResultsViewModel> SearchResultsViewModel(string q, string option, int pagenumber)
            {
            var searchResults = _IGSR.SearchResults(q, option, pagenumber).AsEnumerable();

            List<DisplaySearchResultsViewModel> GetData = new List<DisplaySearchResultsViewModel>();

            foreach (var details in searchResults.AsEnumerable())
                {
                GetData.Add(new DisplaySearchResultsViewModel()
                {
                    Title           = Sanitizer.GetSafeHtmlFragment(details.Title),
                    Description     = Sanitizer.GetSafeHtmlFragment(details.Description).ToLower(),
                    URL             = Sanitizer.GetSafeHtmlFragment(details.URL),
                });
                }
            return GetData;
            }
        }
    } 
```

在控制器中我有

```
var DisplaySearchResults    = _IGSR.SearchResultsViewModel(cleanText, "1", 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:59:34.160

不，这不是构建视图模型的正确方法。视图模型中不应包含任何数据访问逻辑。这是模型的责任。

您应该做的是使用 Ninject 将`IGetSearchResults`实例注入您的控制器，而不是让您的`GetSearchResultsViewModel`视图模型将其作为构造函数依赖项。实际上你根本不需要这个`GetSearchResultsViewModel`。您已经有了正确的视图模型，称为`DisplaySearchResultsViewModel`. 然后，您的控制器负责使用您的数据访问层并构建此视图模型。

例如：

```
public class SomeController : Controller
{
    private readonly IGetSearchResults repository;
    public SomeController(IGetSearchResults repository)
    {
        this.repository = repository;
    }

    public ActionResult SomeAction(string q, string option, int pagenumber)
    {
        // query your data access layer and build the view model that you will
        // pass to the view
        IEnumerable<DisplaySearchResultsViewModel> model = this.repository
            .SearchResults(q, option, pagenumber)
            .AsEnumerable()
            .Select(details => new DisplaySearchResultsViewModel
            {
                Title = Sanitizer.GetSafeHtmlFragment(details.Title),
                Description = Sanitizer.GetSafeHtmlFragment(details.Description).ToLower(),
                URL = Sanitizer.GetSafeHtmlFragment(details.URL)
            })
            .ToList();

         return View(model);
    }
} 
```

# c++ - 如果其中一个进程意外死亡，进程间内存会发生什么？

> ID：15088525
> 
> 赞同：4
> 
> 时间：2013-02-26T11:56:44.673
> 
> 标签：c++, linux, shared-memory

如果你对动机感兴趣，我会在接下来的几句话中详细说明，如果不直接跳到 Q。

我正在考虑制作快速记录器，但是当程序崩溃时不受影响的记录器（也就是一些最后的日志消息没有丢失）。所以我的想法是写入共享内存（环形缓冲区）并从中读取另一个低优先级进程并进行转储。但是为了让它工作，我需要知道如果一个进程退出（正常退出，SEGFAULT），共享内存会发生什么......

所以我的问题是：当其中一个 procs 死亡时，共享内存（在 Linux 中，但你也可以 A for Win）会发生什么？是UB吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:30:26.817

> 当其中一个 proc 死机时，共享内存（在 Linux 中，但您也可以 A for Win）会发生什么情况？

没有。当一个进程死亡时，共享内存保持原样。它被映射为目录下的`/dev/shm/`文件。当系统重新启动时，或者当所有进程取消映射共享内存文件并`shm_unlink()`调用它时，它会被删除。

> 是UB吗？

不，它定义得很好。请参阅[shm_overview(7) 的手册页](http://linux.die.net/man/7/shm_overview)：

> POSIX 共享内存对象具有内核持久性：共享内存对象将一直存在，直到系统关闭，或者直到所有进程都取消映射该对象并使用 shm_unlink(3) 将其删除

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T13:38:12.410

Read boost IPC mechanisms, they explain persistence concept about shared memory.

[http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/some_basic_explanations.html#interprocess.some_basic_explanations.persistence](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/some_basic_explanations.html#interprocess.some_basic_explanations.persistence)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:32:20.137

如果您使用文件作为支持[`mmap`](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)，则直到最后的所有内容[`msync`](http://www.kernel.org/doc/man-pages/online/pages/man2/msync.2.html)，或者`munmap`如果进程正确退出，都将可供独立进程使用。

因此，当进程崩溃时，共享内存应该没有问题。

# java - 覆盖 run() 方法以接受来自命令行的参数

> ID：15088528
> 
> 赞同：0
> 
> 时间：2013-02-26T11:56:57.317
> 
> 标签：java, file-io, command-line, client-server

我正在尝试使用客户端/服务器搜索命令行中指定的单词（从文件中）。这是我的代码，但是当客户端部分运行时它什么也不显示。要运行服务器，请在命令行中 `-s <port number> <file.txt>`为客户端键入和。`-c localhost <port number> <word to be searched>`

```
import java.net.*;
import java.util.*;
import java.io.*;

public class quotes {
    public static InetAddress host;
    public static ServerSocket serverSocket;
    public static String target;
    public static void main(String[] args) throws IOException {

        if(args[0].equals("-c")){
            Client(args);
            target = args[3];
        }
        else if(args[0].equals("-s")){
            System.out.println("Server");
            Server(args);
        }
    }

    @SuppressWarnings("resource")
    public static void Client(String[] args) throws IOException{
            String hostname = args[1];

            if(hostname.equals("localhost")) host = InetAddress.getLocalHost();
            else host = InetAddress.getByName(hostname);

            int port = Integer.parseInt(args[2]);

            Socket socket = new Socket(host, port);

            Scanner input = new Scanner(System.in);

            Scanner networkInput = new Scanner(socket.getInputStream());
            PrintWriter networkOutput = new PrintWriter(socket.getOutputStream(), true);

            Scanner userEntry = new Scanner(System.in);

            String response;

                networkOutput.println(target);
                response = networkInput.nextLine();
                while(!response.equals("|")){

                    System.out.println("\n " + response);
                    response = networkInput.nextLine();
                }

    }

    public static void Server(String[] args) throws IOException {
        int port = Integer.parseInt(args[1]);
        String file = args[2];
        serverSocket = new ServerSocket(port);
        do {

            Socket client = serverSocket.accept();

            System.out.println("\nNew client accepted.\n");

            ClientHandler3 handler = new ClientHandler3(client, file);

            handler.start();    
        }while(true);   

    }
}

    class ClientHandler3 extends Thread {
        private Socket client;
        private Scanner input;
        private PrintWriter output;
        private ArrayList<String> quotes;
        public ClientHandler3(Socket socket, String file) {
            client = socket;
            try {
                BufferedReader buffer = new BufferedReader(new FileReader(file));
                BufferedReader reader = new BufferedReader(new InputStreamReader(client.getInputStream())); 
                String line = reader.readLine();
                try {
                    int ctr = 0;
                    quotes = new ArrayList<String>();
                    while(line != null){
                        quotes.add(ctr, line);

                        ctr++;
                        line = buffer.readLine();
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }

            } catch (FileNotFoundException e1) {
                e1.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }

            try {
                input = new Scanner(client.getInputStream());
                output = new PrintWriter(client.getOutputStream(), true);
            }
            catch(IOException e) {
                e.printStackTrace();
            }
        }

        public void run() {
            String target;
            String message = "";
                target= args[3];
                for(int i = 0; i<quotes.size(); i++){
                    if(quotes.get(i).toUpperCase().contains(target.toUpperCase())){
                        output.println(quotes.get(i));
                    }
                }
                output.println("|");
            try {
                if (client != null) {
                    System.out.println("Closing down connection...");
                    client.close();
                }
            }
            catch(IOException e) {
                System.out.println("Unable to disconnect!");
            }
        }
    } 
```

（感谢 JB Nizet 爵士的一些修改和建议）我遇到了问题，`target= args[3];`因为`class ClientHandler3`我知道覆盖没有意义。我是这个编程领域的新手，我需要你的帮助。请帮我弄清楚事情。谢谢！

**编辑**

```
import java.net.*;
import java.util.ArrayList;
import java.util.Scanner;
import java.util.StringTokenizer;
import java.io.*;

public class quotes {
    public static InetAddress host;
    public static ServerSocket serverSocket;
    public static void main(String[] args) throws IOException {

        if(args[0].equals("-c")){
            Client(args);
        }
        else if(args[0].equals("-s")){
            System.out.println("SERVER KA!!!");
            Server(args);
        }
    }

    @SuppressWarnings("resource")
    public static void Client(String[] args) throws IOException
            String hostname = args[1];
            String target, response;
            if(hostname.equals("localhost")) host = InetAddress.getLocalHost();
            else host = InetAddress.getByName(hostname);

            int port = Integer.parseInt(args[2]);
            target = args[3];
            Socket socket = new Socket(host, port);

            Scanner input = new Scanner(System.in);

            Scanner networkInput = new Scanner(socket.getInputStream());
            PrintWriter networkOutput = new PrintWriter(socket.getOutputStream(), true);

            // Set up stream from keyboard entry...
            Scanner userEntry = new Scanner(System.in);

                networkOutput.println(target);
                response = networkInput.nextLine();
                while(!response.equals("|")){
                // Display server's response to user ...
                    System.out.println("\n " + response);
                    response = networkInput.nextLine();
                }   

    }

    public static void Server(String[] args) throws IOException {
        int port = Integer.parseInt(args[1]);
        String file = args[2];
        String target = "";
        serverSocket = new ServerSocket(port);
        do {
            // Wait for client...
            Socket client = serverSocket.accept();

            System.out.println("\nNew client accepted.\n");

            ClientHandler3 handler = new ClientHandler3(client, file, target);

            handler.start();    
        }while(true);   

    }

}

    class ClientHandler3 extends Thread {
        private Socket client;
        private Scanner input;
        private PrintWriter output;
        private ArrayList<String> quotes;
        private String target;
        public ClientHandler3(Socket socket, String file, String target) {

            // Set up reference to associated socket...
            client = socket;
            try {
                BufferedReader buffer = new BufferedReader(new FileReader(file));
                BufferedReader reader = new BufferedReader(new InputStreamReader(client.getInputStream()));
                this.target = reader.readLine(); 
                String line = reader.readLine();
                try {
                    int ctr = 0;
                    quotes = new ArrayList<String>();
                    while(line != null){
                        quotes.add(ctr, line);

                        ctr++;
                        line = buffer.readLine();
                    }
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            try {
                input = new Scanner(client.getInputStream());
                output = new PrintWriter(client.getOutputStream(), true);
            }
            catch(IOException e) {
                e.printStackTrace();
            }
        }

        public void run() {
            String message = "";

                target= input.nextLine();

                for(int i = 0; i<quotes.size(); i++){
                    if(quotes.get(i).toUpperCase().contains(target.toUpperCase())){
                        output.println(quotes.get(i));
                    }
                }
                output.println("|");

            try {
                if (client != null) {
                    System.out.println("Closing down connection...");
                    client.close();
                }
            }
            catch(IOException e) {
                System.out.println("Unable to disconnect!");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:02:51.437

将 target 设置为 ClientHandler3 的一个字段，以便您可以在`run()`方法中使用它。

```
class ClientHandler3 extends Thread {
...
private String target;

... 
```

并使用：

```
this.target = reader.readLine(); 
```

就在之前

```
String line = reader.readLine(); 
```

线。

# configuration - 启动 Jetty 9.0.0.RC1 时出现 ClassNotFoundException

> ID：15088530
> 
> 赞同：0
> 
> 时间：2013-02-26T11:57:08.480
> 
> 标签：configuration, jetty

请参阅[https://stackoverflow.com/questions/41810306/appointment-scheduling](https://stackoverflow.com/questions/41810306/appointment-scheduling) ...。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:54:38.310

这是在码头用户邮件列表中提出的。

[http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03044.html](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg03044.html)

如果您使用的是分发版（而不是使用 jetty 的嵌入式模式），则使用 9.0.0.RC2。9.0.0.RC1 有很多配置错误

# c# - 查找列表中所有元素的更有效方法

> ID：15088533
> 
> 赞同：0
> 
> 时间：2013-02-26T11:57:10.443
> 
> 标签：c#, .net, list

我得到了这个代码：

```
List<string> values = getValues();
Details detailsData = getDetails();

if (values[0].Equals(detailsData.Attr1))
    if (values[1].Equals(detailsData.Attr2))
        if (values[2].Equals(detailsData.Attr3))
            if (values[3].Equals(detailsData.Attr4))
                if (values[4].Equals(detailsData.Attr5))
                    return true; 
```

`getValues()`返回我希望 (^^) 存在于`Details`对象上的字符串列表。

是否有更有效或更“漂亮”的方式来实现上面的代码？

**编辑**

```
 class Details : MainDetails
{
    string Attr3{ get; set; }
    string Attr4{ get; set; }
    string Attr5{ get; set; }
}

 class MainDetails
{
    string Attr1{ get; set; }
    string Attr2{ get; set; }
} 
```

顺便说一句，可能还有其他一些对象，例如扩展 MainDetails 并需要此验证的 Details。所以这是代码将被多次使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:02:06.450

简单改进：

```
if (values[0].Equals(detailsData.Attr1) &&
    values[1].Equals(detailsData.Attr2) &&
    values[2].Equals(detailsData.Attr3) &&
    values[3].Equals(detailsData.Attr4) &&
    values[4].Equals(detailsData.Attr5))
{
    return true;
} 
```

如果你只在*一个*地方做这件事，我不会再费心了。如果你在*几个*地方做同样的事情，你可能会考虑设置一个函数，例如将你`Details`变成另一个函数`List<string>`，然后使用 eg 比较它们`SequenceEquals`。

编辑：虽然我考虑得越多，将平面字符串列表与类层次结构中的一个进行比较似乎越是一个坏主意，这是一个如何以可扩展方式执行此操作的示例。基类“消耗”前两个值，然后交给派生类检查其余值：

```
class MainDetails
{
    string Attr1 { get; set; }
    string Attr2 { get; set; }

    protected virtual bool Matches(IEnumerator<string> e)
    {
        // Check the first two items exist and match
        return
            e.MoveNext() && e.Current.Equals(Attr1) &&
            e.MoveNext() && e.Current.Equals(Attr2);
    }

    public bool Matches(IEnumerable<string> details)
    {
        using (var e = details.GetEnumerator())
        {
            // Check the details match. (Optionally check
            // that there are no "extra" details.)
            return Matches(e); // && !e.MoveNext();
        }
    }
}

class Details : MainDetails
{
    string Attr3 { get; set; }
    string Attr4 { get; set; }
    string Attr5 { get; set; }

    protected override bool Matches(IEnumerator<string> e)
    {
        // Check the MainDetails match, and the next three too.
        return base.Matches(e) &&
            e.MoveNext() && e.Current.Equals(Attr3) &&
            e.MoveNext() && e.Current.Equals(Attr4) &&
            e.MoveNext() && e.Current.Equals(Attr5);
    }
}

...

List<string> values = getValues();
Details detailsData = getDetails();

if (detailsData.Matches(values))
    return true; 
```

我不确定您的确切用例，但希望这能给您一些想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:02:54.660

如果您不能将所有属性更改为都在一个数组中，那么您至少可以将代码编写得更漂亮一些……尽管这是*非常*主观的！

```
List<string> values = getValues();
Details detailsData = getDetails();

if
(
    values[0].Equals(detailsData.Attr1) &&
    values[1].Equals(detailsData.Attr2) &&
    values[2].Equals(detailsData.Attr3) &&
    values[3].Equals(detailsData.Attr4) &&
    values[4].Equals(detailsData.Attr5)
)
{
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:11:15.313

如果你想要一个干净的代码，你可以在你的类上放置一些索引器。

```
 class Details : MainDetails
    {
        string Attr3 { get; set; }
        string Attr4 { get; set; }
        string Attr5 { get; set; }

        public override string this[int index]
        {
            get
            {
                switch (index)
                {
                    case 3:
                        return Attr3;
                    case 4:
                        return Attr4;
                    case 5:
                        return Attr5;
                }
                return base[index];
            }
        }
    }

    class MainDetails
    {
        string Attr1 { get; set; }
        string Attr2 { get; set; }

        public virtual string this[int index] 
        {
            get
            {
                switch (index)
                {
                    case 1:
                        return Attr1;
                    case 2:
                        return Attr2;
                    default:
                        throw new NotImplementedException();
                }
            }
        }
    } 
```

这样你就可以使用for循环来比较

```
for(int i = 0; i < 5; i++)
{
   if(values[i] != detailsdata[i+1])
      return false;
}
return true; 
```

只需在类上放置一个方法，如 GetAtttributValue(int i);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:04:18.107

当您的属性被这样命名时，没有“更清晰”的方法可以做到这一点。您可以使用反射（节省 2 行代码），但这会遇到性能问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:04:24.070

我会说类似

```
List<string> values = getValues();
Details detailsData = getDetails();

if (values.SequenceEqual(new[] { detailsData.Attr1, detailsData.Attr2, detailsData.Attr3, detailsData.Attr4, detailsData.Attr5, }))
    return true; 
```

这使用了`SequenceEqual`LINQ 的扩展方法，见[MSDN:`Enumerable.SequenceEqual<TSource>`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T12:06:35.333

除了罗林斯的回答。将详细信息对象转换为列表的函数可能如下所示：

```
private static IEnumerable<string> GetDetailProperties(Details details) {
    yield return details.Attr1;
    yield return details.Attr2;
    yield return details.Attr3;
    yield return details.Attr4;
    yield return details.Attr5;
} 
```

您可以使用 SequenceEquals 方法来比较两个列表。

# cluster-computing - 使用 bsub 等效的“qsub -now”

> ID：15088536
> 
> 赞同：0
> 
> 时间：2013-02-26T11:57:14.303
> 
> 标签：cluster-computing, sungridengine, lsf

在 SGE 中，我们有

`qsub -now yes/no <command>`

通过“-now yes”，立即安排作业（如果可能）或根本不安排。我们没有被放入待处理队列。

如果不能立即执行，则通过“-now no”将作业放入待处理队列中。

但是在 LSF 中，我们有 qsub 的等价物 bsub 。

在 bsub 中，如果不能立即执行，我们将被放入待处理队列中。我们没有 qsub 中的“-now yes”选项。

我们在 bsub 中有什么东西是“qsub -now”吗

PS：一种解决方案是我们可以在运行 bsub 后检查一段时间（几秒钟），如果我们被安排了，然后退出。我正在寻找一种更优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:37:08.643

LSF 没有同样的东西。您可以使用带超时的期望。当作业开始时，LSF 会输出类似这样的内容。您的期望脚本可以期望`<<Starting on`. （但这基本上就是你的PS所说的。）

```
$ bsub -Is -m hostA /bin/bash
Job <7536> is submitted to default queue <interactive>.
<<Waiting for dispatch ...>>
<<Starting on hostA>>
hostA$ 
```

你也许可以使用 lsrun。但它不适用于批处理系统来分配插槽或其他资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T16:39:13.647

我以 LSF 的方式找到了答案。

如果我们无法安排资源，LSF 确实提供了一种退出工作的方法。我们有一个环境变量 LSF_NIOS_PEND_TIMEOUT（以分钟为单位指定），如果它仍在等待队列中，它会退出作业。

```
 env LSF_NIOS_PEND_TIMEOUT=1 bsub -Is -m host /bin/bash 
```

**从 Web 上的某处：**
LSF_NIOS_PEND_TIMEOUT
**语法**
LSF_NIOS_PEND_TIMEOUT=minutes
**说明**
仅适用于交互式批处理作业。
交互式批处理作业可以保持挂起的最长时间。
如果定义了此参数，并且交互式批处理作业挂起的时间超过指定时间，则终止交互式批处理作业。
**有效值**
任何大于零的整数

# javascript - JavaScript 表单验证

> ID：15088538
> 
> 赞同：1
> 
> 时间：2013-02-26T11:57:15.670
> 
> 标签：javascript, forms, xhtml

我正在尝试创建表单提交，在提交表单之前，我想验证凭据。

到目前为止我都有这个

为 XHTML 格式化的 HTML

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
        <head>
            <title> Registration Form</title>
            <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
            <meta name="description" content="This is a form submission with validation"/>
            <script type="text/javascript" src="validScript.js"></script>
        </head>

        <body>
            <h1>Registration Form</h1>
            <form id="registration" action="" onsubmit="return validation();" method="post" enctype="text/plain">
                <p>Name: <input type="text" name="name" id="name"/></p>
                <p class="error">Email Address: <input type="text" name="emailAddress" id="emailAddress"/></p>
                <p><input type="submit" name="submit" value="Submit"/></p>
            </form>
        </body>

    </html> 
```

JavaScript：

```
 function validation()
{  
    var vname = document.registration.name;

    if(nameValid(vname))
    {
        return true;
    }
    return false;
}

function nameValid(vname)
{
    var name_len = vname.value.length;
    if (name_len == 0)
    {
        alert("Name is required");
        vname.focus();
        return false;
    }
return true;
} 
```

我遇到的问题是它不会显示警告用户他/她提示了一个空名称。我正在尝试验证名称，之后我将为电子邮件地址和其他要添加的字段添加更多功能。请注意，这稍后将用于将表单通过电子邮件发送到域。有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:10:08.947

您的验证功能不正确，应该是：

```
function validation()
{  
    var vname = document.getElementById("name");

    if(nameValid(vname))
    {
        return true;
    }
    return false;
} 
```

要访问表单元素值，请使用 document.getElementById("ElementID").value 或使用[Jquery之类的 javascript 库](http://jquery.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:07:39.607

在`form`添加名称=“注册”，然后检查。它会根据您的需要发出警报。

原因是`document.registration.name`，其中注册是表单名称，而不是 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:22:27.567

如果您使用的是 jQuery，我可以推荐这个插件：

[http://validval.frebsite.nl/](http://validval.frebsite.nl/)

在我使用这个之前，我尝试了很多验证插件：它具有广泛的验证选项，并且对对话框不太花哨；这意味着可以轻松自定义外观。

# javascript - KnockoutJS 将时间戳拆分为月份下拉列表和年份文本输入

> ID：15088542
> 
> 赞同：1
> 
> 时间：2013-02-26T11:57:24.460
> 
> 标签：javascript, knockout.js

我如何设法处理最初为空的时间戳？我需要将月份和年份设置为步骤。下拉列表中的月份和文本输入字段中的年份。

在这里摆弄：http: [//jsfiddle.net/DrHyper/azf74/](http://jsfiddle.net/DrHyper/azf74/)

JS：

```
function AgreementData(data) {
var self = this;
data = data || {};

self.effectiveDate = ko.observable(data.effectiveDate || "");
self.effectiveDateMonth = ko.computed({
    read: function () {
        var dateR = new Date(self.effectiveDate());
        return dateR.getMonth();
    },
    write: function (value) {
        var dateW = new Date(self.effectiveDate());
        dateW.setMonth(value);
        self.effectiveDate(dateW.getTime());
    },
    owner: self
});
self.effectiveDateYear = ko.computed({
    read: function () {
        var dateR = new Date(self.effectiveDate());
        return dateR.getFullYear() ? dateR.getFullYear() : "";
    },
    write: function (value) {
        var dateW = new Date(self.effectiveDate());
        dateW.setFullYear(value);
        self.effectiveDate(dateW.getTime());
    }
});
}

var Month = function (monthIndex, monthString) {
this.monthIndex = monthIndex;
this.monthString = monthString;
};

function AgreementViewModel() {
var self = this;
self.agreement = ko.observable(new AgreementData());
self.months = ko.observableArray([new Month(0, 'Januar'), new Month(1, 'Februar'), 
new Month(2, 'Marts'), new Month(3, 'April'), new Month(4, 'Maj'), 
new Month(5, 'Juni'), new Month(6, 'Juli'), new Month(7, 'August'), 
new Month(8, 'September'), new Month(9, 'Oktober'), new Month(10, 'November'), 
new Month(11, 'December')]);

//    self.postAgreement = function () {
//        var jsonData = ko.toJSON(self.agreement);
//        $.post("/sam-rest/agreements", jsonData, function(returnedData) {
//            // This callback is executed if the post was successful
//        })
//
//    };
//
//    self.getAgreement = function (agreementNumber) {
//        $.getJSON("/sam-rest/agreements/"+agreementNumber, function (jsonData) {
//            self.agreement(new AgreementData(jsonData));
//        });
//
//    };
//
//    Sammy(function() {
//            this.get('#:action/:agreementNmb', function() {
//                self.action(this.params.action);
//                self.getAgreement(this.params.agreementNmb);
//            });
//    }).run();

}

var agreementViewModel = new AgreementViewModel();
ko.applyBindings(agreementViewModel); 
```

HTML：

```
<form>
Month: <select id="effectiveDateMonth" data-bind="options: months,
                     optionsText: 'monthString',
                     optionsValue: 'monthIndex',
                     value: agreement().effectiveDateMonth,
                     optionsCaption: 'Choose...'"></select>
Year: <input type="text" data-bind="value: agreement().effectiveDateYear" placeholder="YYYY" />
<hr>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:34:27.977

您可以创建类似 observableDate 的东西，将月份和年份共享为可观察的：

```
ko.observableDate = function (value) {
    var month = ko.observable(null);
    var year = ko.observable(null);
    var date = ko.computed({
        read: function() {
            if (year() !== null && month() !== null) {
                return new Date(year(), month(), 1);
            }
            else {
                return null;
            }
        },
        write: function (date) {
            if (date) {
                month(date.getMonth());
                year(date.getYear());
            }
            else {
                month(null); 
                year(null);
            }
        }
    });
    date(value);
    date.year = year;
    date.month = month;

    return date;
}; 
```

然后绑定到`year`and `month`：

```
<form>
Month: <select id="effectiveDate.month" data-bind="options: months,
                     optionsText: 'monthString',
                     optionsValue: 'monthIndex',
                     value: agreement().effectiveDate.month,
                     optionsCaption: 'Choose...'"></select>
Year: <input type="text" data-bind="value: agreement().effectiveDate.year" placeholder="YYYY" />
<hr>
</form> 
```

完整示例：http: [//jsfiddle.net/UXjBf/7/](http://jsfiddle.net/UXjBf/7/)

# android - 具有空值的 Json 数组

> ID：15088543
> 
> 赞同：0
> 
> 时间：2013-02-26T11:57:27.523
> 
> 标签：android, json, android-intent, null

我在使用 JSON 数组时遇到了问题，我真的希望有人可以帮助我。

假设我有一个包含 JSON 数据的类，并且我正在将“intent putextra”发送到另一个活动。

在将它发送到另一个活动之前，如何更改 null 的值？我做了一些打印来发现空值，它们是不同的，例如：

```
 Monday : null
 Tuesday : 08:30 - 18:00
 Wednesday : 09:00 - 17:00

 **and so on.** 
```

**问题**是 --> 我有所有 json 数据并将它们解析为对象，但我想在“intent.putextra”之前将​​它们发送到另一个活动发现 null 并将它们替换为“Closed”

所以它看起来像

```
 Monday : Closed
 Tuesday : 08:30 - 18:00
 Wednesday : 09:00 - 17:00 
```

**编辑**

```
public class LocationBased extends ListActivity{

// JSON Node names
private static final String TAG_Location = "location_id";
private static final String TAG_Company = "company_id";
private static final String TAG_NAME = "name";
private static final String TAG_ADDRESS = "address";
private static final String TAG_PLACE = "place";
private static final String TAG_POSTAL = "postal";
private static final String TAG_CITY = "city";
private static final String TAG_MONDAY = "monday";
private static final String TAG_TUESDAY = "tuesday";
private static final String TAG_WEDNESDAY = "wednesday";
private static final String TAG_THURSDAY = "thursday";
private static final String TAG_FRIDAY = "friday";
private static final String TAG_SATURDAY = "saturday";
private static final String TAG_SUNDAY = "sunday";
private static final String TAG_TYPE = "type";
private static final String TAG_LAT = "lat";
private static final String TAG_LNG = "lng";
private static final String TAG_NOCAR = "nocar";
private static final String TAG = "Debug of Project"; // 

private String a;
private String b;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    SQLiteDatabase db = openOrCreateDatabase("mydb.db", Context.MODE_PRIVATE, null);
    db.execSQL("CREATE TABLE IF NOT EXISTS gps_kordinater (ID INTEGER PRIMARY KEY AUTOINCREMENT, Latitude REAL, Longitude REAL);");

    String query = "SELECT Latitude,Longitude FROM gps_kordinater WHERE Id = (SELECT MAX(Id) FROM gps_kordinater)";
    Cursor cursor = db.rawQuery(query, null);
    if(cursor != null)
    {
    cursor.moveToFirst();
     a = cursor.getString(0);
     b = cursor.getString(1);
    }

   String url = "http://webservice.XXX.XX/webservice/getLocationList.php?lat="+ a +"&lng="+ b +"";

    Log.d(TAG, "Leyth URL = Lat : " + a +"     Long : " + b); 

    // now enabled if disabled = ingen support for jb aka 4.0
     if (android.os.Build.VERSION.SDK_INT > 9) {
          StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
          StrictMode.setThreadPolicy(policy);
     }

    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
    JSONParser jParser = new JSONParser();
    JSONArray json = jParser.getJSONFromUrl(url);
    try {
           for(int i = 0; i < json.length(); i++){
                JSONObject c = json.getJSONObject(i);

            String location_id = c.getString(TAG_Location);
            String company_id = c.getString(TAG_Company);
            String name = c.getString(TAG_NAME);
            String address = c.getString(TAG_ADDRESS);
            String place = c.getString(TAG_PLACE);  
            String postal = c.getString(TAG_POSTAL);
            String city = c.getString(TAG_CITY);
            String monday = c.getString(TAG_MONDAY);
            String tuesday = c.getString(TAG_TUESDAY);
            String wednesday = c.getString(TAG_WEDNESDAY);  
            String thursday = c.getString(TAG_THURSDAY);
            String friday = c.getString(TAG_FRIDAY);
            String saturday = c.getString(TAG_SATURDAY);
            String sunday = c.getString(TAG_SUNDAY);
            String type = c.getString(TAG_TYPE);
            String lat = c.getString(TAG_LAT);
            String lng = c.getString(TAG_LNG);
            String nocar = c.getString(TAG_NOCAR);

        // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_Location, location_id);
            map.put(TAG_Company, company_id);
            map.put(TAG_NAME, name);
            map.put(TAG_ADDRESS, address);
            map.put(TAG_PLACE, place);
            map.put(TAG_POSTAL, postal);
            map.put(TAG_CITY, city);
            map.put(TAG_MONDAY, monday);
            map.put(TAG_TUESDAY, tuesday);
            map.put(TAG_WEDNESDAY, wednesday);
            map.put(TAG_THURSDAY, thursday);
            map.put(TAG_FRIDAY, friday);
            map.put(TAG_SATURDAY, saturday);
            map.put(TAG_SUNDAY, sunday);
            map.put(TAG_TYPE, type);
            map.put(TAG_LAT, lat);
            map.put(TAG_LNG, lng);
            map.put(TAG_NOCAR, nocar);

        //    Log.d(TAG, "Leyth Days = Mandag : " + monday +"     Onsdag : " + wednesday); 

                // adding HashList to ArrayList
            contactList.add(map);
           }
    } catch (JSONException e) {
        e.printStackTrace();
        Log.e("JSON Parser", "Error parsing data " + e.toString());

    }
    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_LAT, TAG_LNG, TAG_POSTAL }, new int[] {
                    R.id.name, R.id.email, R.id.mobile });
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView) view.findViewById(R.id.email)).getText().toString();

            String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

            String mandag = ((TextView) view.findViewById(R.id.mandag)).getText().toString();
            String tirsdag = ((TextView) view.findViewById(R.id.tirsdag)).getText().toString();
            String onsdag = ((TextView) view.findViewById(R.id.onsdag)).getText().toString();
            String torsdag = ((TextView) view.findViewById(R.id.torsdag)).getText().toString();
            String fredag = ((TextView) view.findViewById(R.id.fredag)).getText().toString();
            String lordag = ((TextView) view.findViewById(R.id.lordag)).getText().toString();
            String sondag = ((TextView) view.findViewById(R.id.sondag)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), dk.mitaffald.maps.MainActivity.class);
            in.putExtra(TAG_LAT, name);
            in.putExtra(TAG_LNG, cost);
            in.putExtra(TAG_Company, description);

            in.putExtra(TAG_MONDAY, mandag);
            in.putExtra(TAG_TUESDAY, tirsdag);
            in.putExtra(TAG_WEDNESDAY, onsdag);
            in.putExtra(TAG_THURSDAY, torsdag);
            in.putExtra(TAG_FRIDAY, fredag);
            in.putExtra(TAG_SATURDAY, lordag);
            in.putExtra(TAG_SUNDAY, sondag);

            startActivity(in);

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:04:28.750

我过去也为这个问题而苦恼，但我不知道这是一个好的解决方案，但它对我有用。希望它也对你有用。

```
String jsonObject_string ;
try {
                if (jsonObject != null) {

                    // ur stuff when not null

                }

            } catch (Exception e) {
                // TODO: handle exception
                                    // when null it automatic fill value 
                jsonObject_string = "Closed";
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:06:27.927

Why not try to replace all `null` strings in the JSON as a string before you parse the JSON file/object?

Possible other solution could be looping through every object checking if they're null. then replacing that for `Closed`

EDIT: Load the JSON object as a string and then replace all `null` to `Closed` like this:

```
String JSON = JsonObject.toString();
JSON.replace("null", "Closed"); 
```

EDIT 2: add this below `JSONArray json = jParser.getJSONFromUrl(url);`:

```
String s = json.toString(); // converts json object to string
json.replace("null", "Closed"); // replaces null for Closed
JSONArray json = new JSONArray(s); // converts back to json object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:56:04.180

```
if(c.getString(TAG_MONDAY!=null &&  c.getString(TAG_MONDAY).length>0 && !(c.getString(TAG_MONDAY).equals("")))
{
String monday=c.getString(TAG_MONDAY);
}
else
{
String monday="Closed";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:15:32.347

据我了解，您想用特定字符串替换任何空字符串，例如“已关闭”。这与 没有任何关系`JSON`，如果这是我的代码，我会在将这些值添加到我的意图之前做一个简单的检查。代码将如下所示：

```
 Intent in = new Intent(getApplicationContext(), dk.mitaffald.maps.MainActivity.class);

        in.putExtra(TAG_LAT, name == null ? "Closed" : name);
        in.putExtra(TAG_LAT, cost== null  ? "Closed" : cost);
        in.putExtra(TAG_Company, description == null  ? "Closed" : description );

        in.putExtra(TAG_MONDAY, mandag == null  ? "Closed" : mandag);
        .... 
```

等等。

名称 == 空？“关闭”：名称；Simple 询问 name 是否为 null 则该值关闭，否则返回 name。

它与以下内容相同：

```
if (name == null){
in.putExtra(TAG_LAT, "Closed");
} else {
in.putExtra(TAG_LAT, name);
} 
```

我希望这就是你要找的

# javascript - 如何从 json 文件创建菜单

> ID：15088544
> 
> 赞同：0
> 
> 时间：2013-02-26T11:57:28.053
> 
> 标签：javascript, jquery, html, css, json

我的任务是从 json 对象创建一个水平菜单。我的 json 文件是

```
var data = [
{

    "menu":[
        {
            "MenuId":1,
            "MenuName":"Home",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":1,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":2,
            "MenuName":"New Transaction",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":2,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":3,
            "MenuName":"Portfolio",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":3,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":4,
            "MenuName":"Analytics",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":4,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":5,
            "MenuName":"Instructions",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":5,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":6,
            "MenuName":"Data Upload",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":6,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":7,
            "MenuName":"Administration",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":7,
            "ModuleId":null,
            "Menus":[
                {
                    "MenuId":8,
                    "MenuName":"Masters",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":1,
                    "ModuleId":null,
                    "Menus":[
                        {
                            "MenuId":10,
                            "MenuName":"Currency",
                            "MenuLink":"/Currencies/Index",
                            "Action":"Index",
                            "Controller":"Currencies",
                            "ParentID":8,
                            "SortOrder":1,
                            "ModuleId":null,
                            "Menus":{
                            }
                        },
                        {
                            "MenuId":11,
                            "MenuName":"Country",
                            "MenuLink":"/Countries/Index",
                            "Action":"Index",
                            "Controller":"Countries",
                            "ParentID":8,
                            "SortOrder":2,
                            "ModuleId":null,
                            "Menus":{
                            }
                        }
                    ]
                },
                {
                    "MenuId":9,
                    "MenuName":"User Management",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":2,
                    "ModuleId":null,
                    "Menus":{
                    }
                }
            ]
        }
    ]

}
]; 
```

如何从此 json 文件创建水平菜单？请帮助我也为这个 json 数据编写 javascript。我在这里创建了一个示例[http://jsfiddle.net/s4DeS/](http://jsfiddle.net/s4DeS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:44:52.427

作为快速示例：http: [//jsfiddle.net/XecTZ/](http://jsfiddle.net/XecTZ/)

```
 var data = [{
            "menu":[
                {
                    "MenuId":1,
                    "MenuName":"Home",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":1,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":2,
                    "MenuName":"New Transaction",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":2,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":3,
                    "MenuName":"Portfolio",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":3,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":4,
                    "MenuName":"Analytics",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":4,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":5,
                    "MenuName":"Instructions",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":5,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":6,
                    "MenuName":"Data Upload",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":6,
                    "ModuleId":null,
                    "Menus":{
                    }
                },
                {
                    "MenuId":7,
                    "MenuName":"Administration",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":null,
                    "SortOrder":7,
                    "ModuleId":null,
                    "Menus":[
                        {
                            "MenuId":8,
                            "MenuName":"Masters",
                            "MenuLink":null,
                            "Action":null,
                            "Controller":null,
                            "ParentID":7,
                            "SortOrder":1,
                            "ModuleId":null,
                            "Menus":[
                                {
                                    "MenuId":10,
                                    "MenuName":"Currency",
                                    "MenuLink":"/Currencies/Index",
                                    "Action":"Index",
                                    "Controller":"Currencies",
                                    "ParentID":8,
                                    "SortOrder":1,
                                    "ModuleId":null,
                                    "Menus":{
                                    }
                                },
                                {
                                    "MenuId":11,
                                    "MenuName":"Country",
                                    "MenuLink":"/Countries/Index",
                                    "Action":"Index",
                                    "Controller":"Countries",
                                    "ParentID":8,
                                    "SortOrder":2,
                                    "ModuleId":null,
                                    "Menus":{
                                    }
                                }
                            ]
                        },
                        {
                            "MenuId":9,
                            "MenuName":"User Management",
                            "MenuLink":null,
                            "Action":null,
                            "Controller":null,
                            "ParentID":7,
                            "SortOrder":2,
                            "ModuleId":null,
                            "Menus":{
                            }
                        }
                    ]
                }
            ]
        }
        ];

        for(var i = 0, j = data[0].menu.length; i<j; i++) {
            var root_menu = data[0].menu[i];
            if(root_menu.hasOwnProperty("MenuId")) {
                $("#menu").append("<li>" + root_menu.MenuName + "</li>");
                if(root_menu.hasOwnProperty("Menus") && root_menu.Menus.length > 0) {
                    $("#menu").append("<li><ul id='menu_" + root_menu.MenuId + "'>");
                    for(var n = 0, m = root_menu.Menus.length; n<m; n++) {
                        var sub_menu = root_menu.Menus[n];
                        if(sub_menu.hasOwnProperty("MenuId")) {
                            $("#menu_" + root_menu.MenuId).append("<li>" + sub_menu.MenuName + "</li>");

/* e.t.c but DONT REPEAT YOURSELF */
/* but if there is 50 levels- what a u going to do? */
/* look at recursive way */

                        }
                    }
                    $("#menu").append("</li></ul>");
                }
            }
        } 
```

如果需要，必须添加 1、2、3 级菜单，但最佳实践（DRY）编写递归函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:02:15.067

遍历数据：

```
var a = data[0].menu;
for(var i = 0; i < a.length; i++){
    // Create menu components here
    var menuId = a[i].MenuId;
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:21:44.227

我会说像这样用jquery试试。

```
var Data = // your json object .

var x = eval('('+Data+')');
$.each(x,function(entryIndex, entry){
 var menuId  = entry['menu']['menuId']; 
// and so on all the elements .
}); 
```

我不知道这是否适合你。但值得一试。

# php - php邮件联系表错误

> ID：15088546
> 
> 赞同：1
> 
> 时间：2013-02-26T11:57:41.940
> 
> 标签：php, sendmail, contact-form

我已经购买了主机并创建了网络邮件。但是联系表的邮件功能在我的主机中不起作用。它打印“错误”。我不明白我错在哪里。我已经在谷歌搜索，查看了示例，但我没有解决我的问题。请帮助我。谢谢。 **编辑信息：**当我进行托管时，它是 Windows 托管。maik 功能正在运行。但是，我通过了 linux 托管，然后在 cpanel 中再次创建了邮件。但是，现在邮件功能不起作用。再次感谢。

**Edit2：**嗨，这段代码在 Windows 托管中工作。我认为问题源于linux托管......这是我的代码：

联系人.html

```
<html>
<form action="contact_form.php" method="POST" enctype="multipart/form-data" id="contactform">

            <fieldset class="row">

                <legend>Contact me :)</legend>

                <p>
                    <label for="your-name">Your Name</label>
                    <input type="text" name="name" id="your-name" class="input-xlarge">
                </p>

                <p>
                    <label for="your-email">Your Email <span class="required">(required)</span></label>
                    <input type="email" name="email" id="your-email" class="input-xlarge" required>
                </p>

                <p>
                    <label for="your-subject">Subject</label>
                    <input type="text" name="subject" id="your-subject" class="input-xlarge">
                </p>

                <p>
                    <label for="your-message">Your message <span class="required">(required)</span></label>
                    <textarea name="message" cols="50" rows="10" id="your-message" class="input-xxlarge" required placeholder="What do you want to say?"></textarea>
                </p>

                <!-- This is hidden for normal users -->
                <div class="hidden">
                    <label>
                        Do not fill out this field
                        <input name="s_check">
                    </label>
                </div>

                <p>
                    <input type="submit" id="submit" name="submit" class="primary" value="Send Message">
                </p>

                <p hidden id="response"></p>

            </fieldset>

        </form>
</html> 
```

联系表格.php

```
<?php
if(isset($_POST['submit'])) {
        $to = 'info@xyz.com';

        $name = stripslashes($_POST['name']); //sender's name
        $email = stripslashes($_POST['email']); //sender's email
        $subject = stripslashes($_POST['subject']); // the subject

        echo $name."<br/>";
        echo $email."<br/>";
        echo $subject."<br/>";

        //The message you will receive in your mailbox
        $msg  = "From : $name \r\n";  //add sender's name to the message
        $msg .= "e-Mail : $email \r\n";  //add sender's email to the message
        $msg .= "Subject : $subject \r\n\n"; 
        $msg .= "---Message--- \r\n".stripslashes($_POST['message'])."\r\n\n";                        $msg .= "---User information--- \r\n"; //Title
        $msg .= "User IP : ".$_SERVER["REMOTE_ADDR"]."\r\n"; //Sender's IP
        $msg .= "Browser info : ".$_SERVER["HTTP_USER_AGENT"]."\r\n"; //User agent
        $msg .= "User come from : ".$_SERVER["HTTP_REFERER"]; //Referrer

        if  (mail($to, $subject, $msg, "From: $email\r\nReply-To: $email\r\nReturn-Path: $email\r\n")){

        //Message sent!

        echo nl2br("
        <div class=\"MsgSent\">
            <h1>Congratulations!!</h1>
            <p>Thank you <b><?=$name;?></b>, your message is sent!<br /> I will get back to you as soon as possible.</p>
        </div>
       ");
       exit;
        }
        else{

        // Display error message if the message failed to send
        echo "
        <div class=\"MsgError\">
            <h1>Error!!</h1>
            <p>Sorry <b><?=$name;?></b>, your message failed to send. Try later!</p>
        </div>";
        exit;
        }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:12:41.020

```
<p>Thank you <b><?=$name;?></b>, your message is sent!<br />
<p>Sorry <b><?=$name;?></b>, your message failed to send. Try later!</p> 
```

应该

```
<p>Thank you <b>{$name}</b>, your message is sent!<br />
<p>Sorry <b>{$name}</b>, your message failed to send. Try later!</p> 
```

也不确定你为什么使用 nl2br 一个简单的 echo 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:12:15.920

正如您在其他地方所说，该`mail()`功能是有问题的 - 它非常低级并且不容易使用。

建议您完全不要使用它——有几个非常好的 PHP 邮件程序类更容易使用，提供更好的结果，并且功能更强大。

我的建议是使用[phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)；它非常易于使用——正如您从[这个示例页面](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicMail)中看到的那样。但是还有其他几个可用的替代库。

# php - 未定义的偏移量和警告：无法修改标头信息 - 标头已由

> ID：15088549
> 
> 赞同：0
> 
> 时间：2013-02-26T11:58:06.883
> 
> 标签：php, mysql, csv

我可以完美地输出CSV`$values = mysql_query("SELECT * FROM ".$table."");`

但是，当我尝试选择特定列时，例如

```
$values = mysql_query("SELECT email, status FROM ".$table.""); 
```

我收到以下错误

> 注意：未定义的偏移量：1（直到我有 N-1 个字段）警告：无法修改标头信息 - 标头已由

请各位大神指教一下好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:30:32.183

这不是已发送标题的问题。此错误只是另一个错误的结果。
当然，错误消息会导致发送标头。
但是修复错误，两条消息都将消失。

尽管如此，“未定义的偏移量”错误是Stackoverflow 上**第二**受欢迎的问题。虽然，它很可能是由另一个错误引起的。

很可能您正在使用旧的丑陋`mysql_result()`来获取 mysql 数据。
并且不要检查mysql错误。
用这种方式做你的mysql

```
$sql = "SELECT email, status FROM ".$table;
$res = mysql_query($sql) or trigger_error(mysql_error(),"[$sql]");
while ($row = mysql_fetch_array()) {
    echo $row['name']; // assuming "name" field in the data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:31:36.573

> 注意：未定义的偏移量：1

真的是这里发生的唯一错误。如果这：

```
$values = mysql_query("SELECT email, status FROM ".$table.""); 
```

失败并且：

```
$values = mysql_query("SELECT * FROM ".$table.""); 
```

成功，很可能是字段名称拼写错误，因此查询失败，返回非数组资源，如`false`.

> 警告：无法修改标头信息 - 标头已由

只是打印出第一个错误的结果。

# cordova - Phonegap 应用程序在 iPad 上的 iPhone 崩溃时运行良好？

> ID：15088554
> 
> 赞同：0
> 
> 时间：2013-02-26T11:58:18.627
> 
> 标签：cordova, jquery-mobile

我的 phonegap / jquery 移动应用程序安装在运行 6.1.2 的 iPhone 4s 上时运行良好，但在第 4 代 iPad（运行相同的 6.1.2）上根本无法运行。我得到的只是没有样式的首页，没有 JS 功能或 JQM 样式。

拉我的头发 - 有人知道任何潜在的原因吗？

xCode 项目直接来自 phonegap 脚本，没有被篡改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:38:30.947

有点奇怪，通过从 phonegap 脚本重建 xCode 项目设法解决了这个问题。希望这可以帮助某人。

# c++ - 为结构（或类）行为数组赋值

> ID：15088557
> 
> 赞同：0
> 
> 时间：2013-02-26T11:58:28.660
> 
> 标签：c++, arrays, memory-management

从Java我习惯了我可以做到这一点：

```
public class SomeClass {
    public int field1;
}

SomeClass[] data = new SomeClass[10];
for (int i = 0; i < 10; i++) {
    data[i] = new SomeClass(); 
    SomeClass d = data[i];
    d.field1 = 10;
}

for (int i = 0; i < 10; i++) {
    SomeClass d = data[i];
    System.out.println("Value of data [" + i + "] is [" + d.field1 + "]");
} 
```

这将正常工作，打印：

```
Value of data [0] is [10]
Value of data [1] is [10]
... etc 
```

因此，在 Java 中，您首先创建一个数组，默认情况下它具有所有空值，然后在第一个循环中，我创建一个新的 SomeClass 并将其分配给数组中的一个槽。如果你不这样做，你会得到一个 NullPointerException。

一切都好。

**问题：** 我尝试在 C++ 中做同样的事情。我有一个失败的例子和一个有效的例子。但我不确定*它为什么起作用*（或不起作用，取决于你选择的例子）。谁能详细说明？

首先，失败的代码：

```
int main(int argc, char **argv) {
    MyClass data[10];
    for (int y = 0; y < 10; y++) {
        MyClass d = data[y];
        cout << "INITIALLY (garbage): [" << d.field1 << ", " << d.field2 << "] " << endl;
        // assign values
        d.field1 = 2;
        d.field2 = 3;
    }

    // print out data of first 10
    cout << "Printing out data after initialization" << endl;
    for (int y = 0; y < 10; y++) {
        MyClass d = data[y];
        cout << "[" << d.field1 << ", " << d.field2 << "] " << endl;
    }
} 
```

因此，如果我理解正确，根据[这个 StackOverflow 问题](https://stackoverflow.com/questions/3275381/how-to-implement-a-2-dimensional-array-of-struct-in-c/3275389#3275389)，我可以像在上面的代码中那样创建一个 Struct 数组。

我注意到的是，如果我不使用：

```
MyClass d = data[y];
d.field1 = 2;
d.field2 = 3; 
```

但相反，我这样做：

```
data[y].field1 = 2;
data[y].field2 = 3; 
```

它确实有效。

但是，如果我坚持使用单独的值，我仍然可以通过以下方式使其工作：

```
MyClass * d = &data[y];
d->field1 = 2;
d->field2 = 3; 
```

我在打印输出时没有改变任何东西。以上工作。

因此，当使用指向 data[y] 的指针时，情况显然有所不同。不过，我找不到明确的答案。任何人都可以解释为什么？

如果这个问题是重复的，很抱歉，我在“为什么”部分找不到真正的答案。代码片段对我来说并不总是足够的；）

PPS：我知道我没有在堆中分配这个数组。触摸该主题以进行比较的奖励积分:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:01:49.293

您正在这里制作副本：

```
MyClass d = data[y]; 
```

`d`对没有影响的修改`data[y]`。

取而代之的是参考：

```
MyClass& d = data[y]; 
```

现在`d`指的是元素`data[y]`。请注意，在 C++ 中，引用的行为类似于别名。您不能重新分配它。例如

```
d = someMyClassInstance; 
```

将具有分配 to 的值的`someMyClassInstance`效果`data[y]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:01:59.407

这：

```
 MyClass d = data[y];
    d.field1 = 2;
    d.field2 = 3; 
```

没有效果，因为`d`现在是`data[y]`. 相反，如果您说`MyClass& d`，您将有一个（非常量）引用，您可以对其进行修改，然后观察`data`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:07:22.900

在 C++ 中，对象是一个*存储区域*- 即内存区域。变量直接表示对象，除非它们被明确限定为指向现有对象的指针或引用。

当你写：

```
MyClass d = data[y]; 
```

您正在*声明*一个类型的变量`MyClass`，将其*定义*为表示堆栈上的一个对象，并从该对象*初始化*`data[y]`它；`d`并且`data[y]`是单独的对象，因此修改`d`不会影响`data[y]`.

你想写：

```
MyClass &d = data[y];
        ^--- here 
```

& 符号`&`表示对对象`d`的*引用*`data[y]`，因此只要一个对象继续存在于`data[y]`最初表示的存储区域内（即在该地址处），您就可以使用`d`该对象来修改该对象。

使用指针是类似的，但由于指针可以重新定位以指向不同的对象，因此您必须使用间接语法（`*`或`->`）来表示它们指向的对象。

# ios - 使用命令行中的 url 在 iPhone 模拟器中运行 MobileSafari.app

> ID：15088560
> 
> 赞同：3
> 
> 时间：2013-02-26T11:58:40.363
> 
> 标签：ios, mobile, safari

有没有办法在 iPhone 模拟器中使用命令行中的 url 运行 MobileSafari.app？

喜欢：

`$ open -a MobileSafari http://www.google.com`

# ios - 放大 NSData 或 CMSampleBufferRef

> ID：15088561
> 
> 赞同：0
> 
> 时间：2013-02-26T11:58:42.667
> 
> 标签：ios, opencv, camera, zooming, avfoundation

我正在使用最新的 SDK 开发一个 iOS 应用程序。

这个应用程序将与 OpenCV 一起使用，我必须在相机上进行缩放，但这在 iOS SDK 上不可用，所以我想以编程方式进行。

我必须对每个视频帧进行“缩放”。这是我必须这样做的地方：

```
#pragma mark - AVCaptureSession delegate
- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection
{
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    /*Lock the image buffer*/
    CVPixelBufferLockBaseAddress(imageBuffer,0);

    /*Get information about the image*/
    uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer);
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);
    //size_t stride = CVPixelBufferGetBytesPerRow(imageBuffer);

    //put buffer in open cv, no memory copied
    cv::Mat image = cv::Mat(height, width, CV_8UC4, baseAddress);
    // copy the image
    //cv::Mat copied_image = image.clone();
    _lastFrame = [NSData dataWithBytes:image.data
                                  length:image.elemSize() * image.total()];

    [DataExchanger postFrame];

    /*We unlock the  image buffer*/
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);
} 
```

**你知道如何放大 a`NSData`或 a`CMSampleBufferRef`吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:11:37.453

一种方法是将您的图片放入 CGImageRef，在该图片中选择一个正方形并再次将其绘制为正常大小。像这样的东西（尽管可能有更好的方法）：

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8,
                                                 bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context);
    CGContextRelease(context);

    CGImageRef smallQuartzImage = CGImageCreateWithImageInRect(quartzImage, CGRectMake(200, 200, 600, 600));

    cv::Mat image(height, width, CV_8UC4 );
    CGContextRef contextRef = CGBitmapContextCreate( image.data, width, height, 8, cvMat.step[0], colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst );
    CGContextDrawImage(contextRef, CGRectMake(0, 0, width, height), smallQuartzImage);
    CGContextRelease( contextRef );
    CGColorSpaceRelease( colorSpace ); 
```

# iphone - 将两个“for”语句合二为一

> ID：15088569
> 
> 赞同：1
> 
> 时间：2013-02-26T11:59:10.867
> 
> 标签：iphone, ios, objective-c, cocoa-touch

这里只是一个实用的 Objective-C 问题。

我有两个`for`用于两个数组和同一个对象的循环`SGAdressLabel`：

```
for (SGAdressLabel *tmpLabel in recieversLabels){
    [tmpLabel removeFromSuperview];
}

for (SGAdressLabel *tmpLabel02 in copiesLabels){
    [tmpLabel02 removeFromSuperview];
} 
```

您如何将这两者组合成一个语句，是否有必要？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:02:01.100

您可以将两个数组合并为一个并使用它：

```
NSArray *combinedLabels = [recieversLabels arrayByAddingObjectsFromArray:copiesLabels];
for (SGAdressLabel *tmpLabel in combinedLabels){
    [tmpLabel removeFromSuperview];
} 
```

请注意，使用此解决方案，两个数组中的对象将接收`removeFromSuperview`两次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:02:43.223

我相信你的方式是好的。由于您正在使用 2 个不同的数组，因此尝试使用单循环进行迭代不会有任何好处。或者您可以将一个数组附加到一个数组中。但是它不会带来任何新的优势，并且会混淆将来做它的人。

或者您可以完全避免 for 循环，但迭代正在下面发生..

```
[copiesLabels makeObjectsPerformSelector:@selector(removeFromSuperView)];
[receiversLabel makeObjectsPerformSelector:@selector(removeFromSuperView)]; 
```

# ios - 崩溃日志缺少一个符号帧

> ID：15088570
> 
> 赞同：-1
> 
> 时间：2013-02-26T11:59:17.860
> 
> 标签：ios, crash-reports, symbolicate

我只在一个崩溃日志中注意到了这个问题，我无法完全理解为什么会发生这种情况。基本上，我已经对来自客户的崩溃日志进行了符号化，并且所有的检查和符号化都正确，**除了一个 frame**，它仍然是未符号化的。下面是一个片段（第 9 帧是问题）：

```
6          libc++abi.dylib      0x00001114 std::terminate() + 20
7          libc++abi.dylib      0x00002513 __cxa_throw + 123
8          libstdc++.6.dylib      0x00005ba9 std::__throw_out_of_range(char const*) + 153
9          MyApp      0x002ff343  0x0000c000 + 3093315
10         MyApp      0x002ec02b -[ChildViewController tableView:cellForRowAtIndexPath:] (ChildViewController.mm:42)
11         MyApp      0x0042d725 -[ViewControllerRoot tableView:cellForRowAtIndexPath:] (ViewControllerRoot.m:198)
12         UIKit      0x0004e54d -[UITableView(UITableViewInternal) _createPreparedCellForGlobalRow:withIndexPath:] + 413 
```

我尝试了各种方法来符号化这条线，但无济于事。我已经手动运行了 atos 以及 symbolicatecrash.pl （详细了解发生了什么）。dSYM 和 .app 文件很好，并且与崩溃日志的二进制图像部分中的应用程序的 UUID 匹配。我使用的是最新的稳定版 Xcode，4.6。其他团队成员也尝试过，结果相同。

这里有什么问题吗，或者这是 Objective-C 的动态特性的问题？我相信是前者，但 MyApp 中的其他帧/符号被符号化的事实让我更加困惑！

**更新：**我应该澄清一下，似乎可以很容易地推断出丢失的帧，但是此时对许多不同的类进行了多次调用，这都可能引发`out_of_range`错误。因此，这个丢失的帧使调试变得更加困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:51:14.047

这可能是被调用的第 3 方代码吗？一些第 3 方静态库不包含符号。

另一种可能性是，此代码是通过使用 Xcode 子项目生成的静态库集成的。这个项目被设置为从静态库中去除符号。

这两种方法都将导致这些调用的崩溃报告中不会出现任何符号。

# perl - Perl - 分配哈希 - 为什么更改分配的变量？

> ID：15088571
> 
> 赞同：-1
> 
> 时间：2013-02-26T11:59:21.897
> 
> 标签：perl, hash, variable-assignment

我有以下问题：我有一个 perl 程序，它正在提取 csv 文件，读取它们并输出结果。有关 csv 结构的信息位于上述档案中提供的 XML 文件中。在旧版本的程序中，我已经为 CSV 文件的每一行读取了这些 XML 文件，并且一切正常：

```
...;
foreach $b (@gz_files) 
{
  if ( index($b, 'condition1') >= 0
    || index($b, 'condition2') >= 0 
    || index($b, 'condition3') >= 0 )
  {
    $lt = localtime;
    open (my $outputfile, '>>'.'/path_to_output/'.$dir_file.'.tmp')
      || die print $lfh "$lt -     /path_to_output/$dir_file\.tmp - $!\n";
    if ($b ne "")
    {
      # this is the procedure, which reads xml_files
      %cv_tmp = eventstype::initialize($complex_xml_path, $rating_input_xml_path);
      @EXPORT=qw(%cv_tmp);
...; 
```

此代码将 XML 文件中的结构添加到 %cv_tmp 变量中。在 CSV 文件中的 foreach 行之后，我将 %cv_tmp 的值分配给进一步操作的 %complex_vals 。

```
...
%complex_vals=%mainfile::cv_tmp;
... 
```

但是在这个操作之后，我注意到 %cv_tmp 发生了变化——这很奇怪，因为这是赋值的右侧。我不想更改每个 CSV 行上的 %cv_tmp。抱歉描述不好，但我绝对是新手。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:13:55.187

你可能有类似的东西

```
my %h1;
$h1{foo}{bar} = 123;

my %h2 = %h1;
$h2{foo}{bar} = 456;

print "$h1{foo}{bar}\n";  # 456 
```

如果是这样，你没有改变`%h1`或`%h2`；`$h1{foo}`您正在更改和引用的（匿名）哈希`$h2{foo}`。您需要复制引用的哈希（而不是对哈希的引用）来解决此问题。

```
use Storable qw( dclone );

my %h1;
$h1{foo}{bar} = 123;

my %h2 = %{ dclone(\%h1) };
$h2{foo}{bar} = 456;

print "$h1{foo}{bar}\n";  # 123 
```

# iphone - 将图像异步加载到自定义表格视图单元格中

> ID：15088575
> 
> 赞同：0
> 
> 时间：2013-02-26T11:59:30.667
> 
> 标签：iphone, objective-c, uitableview, ios6

目前，我正在开发一个应用程序，其中我已经获取 Facebook 相册照片并使用表格视图将其异步显示为画廊视图并使用以下代码将图像放在表格视图单元格的按钮上：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"particulars..:%d",[particular count]);
    int count=self.particular.count%3;

    if(count==0)
    {
        return self.particular.count/3;
    }
    else
    {
        return (self.particular.count/3) +1;
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell1";
    CustomTableViewCell *cell = (CustomTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if (cell == nil)
        {
            [[NSBundle mainBundle] loadNibNamed:@"CustomTableViewCell" owner:self options:nil];
            cell = customcell;
        }

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];

        dispatch_async(dispatch_get_global_queue(0,0), ^{
            NSString *buttonurl=[self.particular objectAtIndex:((indexPath.row)*3)+0];
            NSData * data = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: buttonurl]];
            if ( data == nil )
                return;
            dispatch_async(dispatch_get_main_queue(), ^{

                UIImage *image = [UIImage imageWithData:data];
                cell.accessoryType = UITableViewCellAccessoryNone;
                cell.selectionStyle = UITableViewCellSelectionStyleNone;
                cell.backgroundColor=[UIColor clearColor];
                [cell.first setBackgroundImage:image forState:UIControlStateNormal] ;
                [cell.first addTarget:self action:@selector(original:) forControlEvents:UIControlEventTouchUpInside];
                [cell.first setContentMode:UIViewContentModeCenter] ;
                cell.first.layer.cornerRadius = 10.0;
                cell.first.layer.borderColor = [[UIColor grayColor]CGColor];
                cell.first.layer.borderWidth = 1.0f;
                cell.first.backgroundColor=[UIColor clearColor];
                cell.first.tag = ((indexPath.row)*3)+1 ;
                [spinner stopAnimating];
            });
            [data release];
        });

        if(((indexPath.row)*3)+3<[particular count])
        {
            UIActivityIndicatorView *spinner2 = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            UIActivityIndicatorView *spinner3 = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            //spinner2.backgroundColor=[UIColor blackColor];
            CGRect frame= cell.second.frame;
            spinner2.frame=frame;
            //spinner2.frame=CGRectMake(112, y, 106, 106);
            spinner2.hidesWhenStopped = YES;
            [cell.second addSubview:spinner2];
            [spinner2 startAnimating];

            CGRect frame2= cell.third.frame;
            spinner3.frame=frame2;
            spinner3.hidesWhenStopped = YES;
            [cell.third addSubview:spinner3];
            [spinner3 startAnimating];

            dispatch_async(dispatch_get_global_queue(0,0), ^
            {
                NSString *buttonurl=[self.particular objectAtIndex:((indexPath.row)*3)+1];
                NSData * data = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: buttonurl]];

                NSString *buttonurl1=[self.particular objectAtIndex:((indexPath.row)*3)+2];
                NSData * data1 = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: buttonurl1]];
                if ( data == nil )
                    return;
                dispatch_async(dispatch_get_main_queue(), ^
                {
                    UIImage *image = [UIImage imageWithData:data];
                    UIImage *image1 = [UIImage imageWithData:data1];

                    [cell.second setBackgroundImage:image forState:UIControlStateNormal] ;
                    [cell.second addTarget:self action:@selector(original:) forControlEvents:UIControlEventTouchUpInside];
                    [cell.second setContentMode:UIViewContentModeCenter] ;
                    cell.second.layer.cornerRadius = 10.0;
                    cell.second.layer.borderColor = [[UIColor grayColor]CGColor];
                    cell.second.layer.borderWidth = 1.0f;
                    cell.second.backgroundColor=[UIColor clearColor];
                    cell.second.tag = ((indexPath.row)*3)+2 ;
                    NSLog(@"cell.second.tag:%d",cell.second.tag);

                    [cell.third setBackgroundImage:image1 forState:UIControlStateNormal] ;
                    [cell.third addTarget:self action:@selector(original:) forControlEvents:UIControlEventTouchUpInside];
                    [cell.third setContentMode:UIViewContentModeCenter] ;
                    cell.third.layer.cornerRadius = 10.0;
                    cell.third.layer.borderColor = [[UIColor grayColor]CGColor];
                    cell.third.layer.borderWidth = 1.0f;

                    cell.third.backgroundColor=[UIColor clearColor];
                    cell.third.tag = ((indexPath.row)*3)+3 ;
                    NSLog(@"cell.third.tag:%d",cell.third.tag);
                    [spinner2 stopAnimating];
                    [spinner3 stopAnimating];

                });
                [data release];
            });

        }
        else if(((indexPath.row)*3)+2<[particular count])
        {
            UIActivityIndicatorView *spinner2 = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
            CGRect frame1 = CGRectMake(120, y, 106, 107);
            spinner2.frame=frame1;
            spinner2.hidesWhenStopped = YES;
            [cell.second addSubview:spinner2];
            [spinner2 startAnimating];
            dispatch_async(dispatch_get_global_queue(0,0), ^
            {
                NSString *buttonurl=[self.particular objectAtIndex:((indexPath.row)*3)+1];
                NSData * data = [[NSData alloc] initWithContentsOfURL: [NSURL URLWithString: buttonurl]];
                if ( data == nil )
                    return;
                dispatch_async(dispatch_get_main_queue(), ^
                {
                    UIImage *image = [UIImage imageWithData:data];
                    [cell.second setBackgroundImage:image forState:UIControlStateNormal] ;
                    [cell.second addTarget:self action:@selector(original:) forControlEvents:UIControlEventTouchUpInside];
                    [cell.second setContentMode:UIViewContentModeCenter] ;
                    cell.second.layer.cornerRadius = 10.0;
                    cell.second.layer.borderColor = [[UIColor grayColor]CGColor];
                    cell.second.layer.borderWidth = 1.0f;
                    cell.second.backgroundColor=[UIColor clearColor];
                    cell.second.tag = ((indexPath.row)*3)+2 ;
                    NSLog(@"cell.second.tag:%d",cell.second.tag);
                    [spinner2 stopAnimating];

                });
                [data release];
            });         
        }
        else
        {
            cell.second.hidden = YES;
            cell.third.hidden = YES;
        }
        y=y+106;
        return cell;
    } 
```

这段代码对我来说很好，但问题是当图像加载到表格视图单元格包含的按钮中时，如果我们向下滚动，它会慢慢显示图像，但之后当我们向上滚动以查看先前加载的图像时，图像会消失并再次出现从开始加载并花费时间。所以请告诉我在代码中做错了什么或者我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:04:20.080

有一些自定义库可以很好地为您完成工作

1.  [异步图像视图](https://github.com/nicklockwood/AsyncImageView)
2.  [SDWebImage](https://github.com/rs/SDWebImage)
3.  AFNetworking 图像扩展（如果您使用的是 AF）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:13:55.287

我建议你使用这个[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。我用过它，效果很好。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourPhotoPath;
[img_EventImage loadImageFromURL:photoPath];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

这与使用 UIImageView 相同。很简单，它可以为您完成大部分工作。AsyncImageView 包括 UIImageView 上的一个简单类别，用于在 iOS 上异步加载和显示图像，以便它们不会锁定 UI，以及用于更高级功能的 UIImageView 子类。AsyncImageView 与 URL 一起使用，因此它可以与本地或远程文件一起使用。

加载/下载的图像缓存在内存中，并在出现内存警告时自动清理。AsyncImageView 独立于 UIImage 缓存运行，但默认情况下，位于应用程序包根目录中的任何图像都将存储在 UIImage 缓存中，以避免缓存图像的任何重复。

该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:04:21.030

它正在以应有的方式工作。当您滚动表格视图时，就像消失的单元格已被释放，而当您向后滚动时，单元格已出列。因此，您应该使用缓存图像的解决方案，以便它们不需要再次加载，例如 EGOImageView（[此处](https://github.com/enormego/EGOImageLoading/tree/master/EGOImageView)）、AsyncImageView、SDWebImage 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-03T11:52:51.277

这是一个不使用 dispatch_async 的解决方案。如果您从服务获取 URL，而不是使用调用服务的这个方法 NSObject

```
-(void)loadProfilePicWithURL:(NSString *)strUrl  tagV:(NSInteger)tagV{
isProfilePicLoaded = NO;
//set media tag as indexPath.row

//call this method from cellForRowAtIndexpPath
//Pass the image URL --> strProfilePicURL
//Load the image in bg and set to imgProfilePic
//After loaded, send a notification with tag to table view to update the cell

NSData *data=[NSData dataWithContentsOfURL:[NSURL URLWithString:strUrl]];
imgProfilePic=[UIImage imageWithData:data];

isProfilePicLoaded = YES;
[[NSNotificationCenter defaultCenter] postNotificationName:@"reloadTableViewCell" object:[NSNumber numberWithInteger:tagV]];
} 
```

从 cellForRowAtIndexPath 调用此方法

```
[self performSelectorInBackground:@selector(loadPic:) withObject:[NSNumber numberWithInteger:indexPath.row]]; 
```

实施

```
-(void)loadPic: (id )indexPath{
NSInteger conV=[indexPath integerValue];

NSObject *object=[Array objectAtIndex:conV];
[object loadProfilePicWithURL:object.url tagV:conV]; 
```

}

为 NSObject 中的通知添加观察者

```
-(void)reloadTableViewCell:(NSNotification *)note{
NSInteger mediaTag = [[note object] integerValue];

[self reloadCellImage:mediaTag]; 
```

}

重新加载表格中的特定单元格。

```
-(void)reloadCellImage:(NSInteger)row{
NSObject *object = [self.receivedArray objectAtIndex:row];
NSIndexPath* rowToReload = [NSIndexPath indexPathForRow:row inSection:0];
customCell *cell = (customCell *)[self.tableView cellForRowAtIndexPath:rowToReload];
[cell.imgVw setImage:object.image];} 
```

# c# - sqlDatasource 和 sqlCacheDependancy

> ID：15088579
> 
> 赞同：1
> 
> 时间：2013-02-26T11:59:36.870
> 
> 标签：c#, asp.net, sqlcachedependency

这是我的`sqldatasource`：

```
 <asp:SqlDataSource ID="SqlDataSource1" runat="server" CacheDuration="1" 
    CacheKeyDependency="Test_Tbl_Test" ConnectionString="<%$ 
    ConnectionStrings:TestConnectionString %>" EnableCaching="True" 
    SelectCommand="SELECT [address] FROM [Tbl_Test]" 
SqlCacheDependency="CommandNotification"></asp:SqlDataSource> 
```

在 global.ascx 中：

```
 void Application_Start(object sender, EventArgs e) 
    {

        string dsn = System.Configuration.ConfigurationManager.ConnectionStrings["CS"].ConnectionString;
        System.Data.SqlClient.SqlDependency.Start( dsn );

    } 
```

一切都很好，缓存工作也很好，但我希望当我更改数据库中的数据时，无需按浏览器上的任何按钮即可刷新数据源。我上次做的，但我现在忘记了！我能做什么？（所有页面控件都`updatapanel`带有计时器）

# java - 如何在满足这些条件的同时打印以下序列

> ID：15088582
> 
> 赞同：5
> 
> 时间：2013-02-26T11:59:45.597
> 
> 标签：java, algorithm

这实际上是一个面试问题。我必须使用 Java 打印以下内容：

```
9
9 8 9
9 8 7 8 9
9 8 7 6 7 8 9
. . .
. . . 
```

在面试期间，我写了一段令人尴尬的代码，但它仍然有效 - 使用一个外循环，**两个**内循环（一个用于递减序列，一个用于递增序列！）和大量变量。其中一个变量是每行的长度。

面试官让我试着用

*   只有一个外环和一个内环

*   *没有*行长度变量。

*注：看了答案后，我认为面试官并不是真的要说第二个条件。他可能只是想让我简化我的代码，而第二点就从他嘴里冒出来了。*

所以，后来回到家，我到达了这个：

```
int rowCnt = 5;

for(int i = 1; i <= rowCnt; i++)
{
    int val = 9;
    int delta = -1;
    int rowLen = i * 2 - 1;

    for(int j = 1; j <= rowLen; j++)
    {
        System.out.print(val + " ");

        val += delta;

        if(j >= rowLen / 2) delta = 1;
    }

    System.out.println();
} 
```

在这里，我只使用了一个内部循环。我正在使用一个`delta`值来确定是增加还是减少。对于每一行，我将当前索引与行的中点进行比较并更改增量。

我满足了第一个条件——只有一个内循环。但是如果不使用行长，我就无法做到这一点。

**我们如何在不知道行长的情况下打印它？**

*很多答案都是可以接受的，但我必须选择一个，并选择一个对我来说最容易理解的。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:15:17.513

怎么样：

```
 int start = 9;
    for (int i = 0; i <= start; i++) {
        StringBuilder sb = new StringBuilder((start - i) + " ");
        for (int j = start - i; j < start; j++) {
            sb.insert(0, (j + 1) + " ");
            sb.append((j + 1) + " ");
        }
        System.out.println(sb.toString());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:52:06.760

他们可能想听到“**递归**”这个词。

这是一个不需要长度的递归解决方案：

```
countDownInMiddle("", 9, "");

private static void countDownInMiddle(String start, int n, String end) {
    if (n < 0) {
        return;
    }
    System.out.println(start + n + end);
    countDownInMiddle(start + n, n - 1, n + end);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:17:42.370

这是简单的 PHP，希望逻辑清晰且易于移植到 Java：

```
$rowCount = 10;
$startNum = 9;

for ($idx =0; $idx <$rowCount; $idx ++) {

    for ($jdx=0; $jdx < (2*$idx +1); $jdx++) {

        if ($idx < $jdx)
            echo $startNum -(2*$idx) + $jdx.' ';
        else
            echo $startNum - $jdx.' ';
    }
    echo '<br/>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T15:29:56.347

```
public class Pyramid {
    public static void main(String[] args) {
        int start = 9;
        String left = "";
        String right = "";
        for (int i=start; i>=0; i--) {
            System.out.println(left+i+right);
            left = left+i;
            right = i+right;
        }
    }
} 
```

样本输出：

```
9
989
98789
9876789
987656789
98765456789
9876543456789
987654323456789
98765432123456789
9876543210123456789 
```

该迭代解等价于递归解。我更喜欢使用迭代而不是递归，因为当行数变大时，递归解决方案所需的额外堆栈内存可能会很大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T20:00:10.387

我的非递归解决方案：

```
 for(int i = 0; i < 9; i++) {
        for(int j = 0; j < 2*i+1; j++)
            System.out.print((Math.abs(j - i) + 9 - i) + " ");
        System.out.println();
    } 
```

# xml - 如何在 VB.net 中根据 Schema 验证 XML

> ID：15088585
> 
> 赞同：2
> 
> 时间：2013-02-26T12:00:03.137
> 
> 标签：xml, vb.net, xsd

我正在尝试针对模式验证 xml。我正在使用 XmlReaderSetting 并尝试遵循 MSDN 上的示例，但无法使其工作。即使我针对模式抛出一个完全不同的文件，它也不会验证 xml。谁能解释我错过了什么？

谢谢，

```
 Protected Sub ValidateXML(xmlFilePath As String, schemasFilePath As String)

    Try

        Dim settings As XmlReaderSettings = New XmlReaderSettings()

        settings.Schemas.Add("http://www.w3.org/2001/XMLSchema", schemasFilePath)
        settings.ValidationType = ValidationType.Schema

        Dim reader As XmlReader = XmlReader.Create(xmlFilePath, settings)
        Dim document As XmlDocument = New XmlDocument()
        document.Load(reader)

        Dim eventHandler As ValidationEventHandler = New ValidationEventHandler(AddressOf ValidationEventHandler)

        ' the following call to Validate succeeds.
        document.Validate(eventHandler)
        reader.Close()

    Catch ex As Exception
        Messagebox(ex.Message, "error")
    End Try

End Sub

Protected Sub ValidationEventHandler(ByVal sender As Object, ByVal e As ValidationEventArgs)

    Select Case e.Severity
        Case XmlSeverityType.Error
            'Messagebox(e, "error")
        Case XmlSeverityType.Warning
            'Messagebox(e, "error")
    End Select

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:05:50.950

您正在混合两种不同的方式来读取 XML 文件。您正在使用一个`XmlReader`对象和一个`XmlDocument`对象。通常，您只会使用其中一种。正如您所做的那样，两者都可以使用，但它确实会引入一些不必要的混淆。

验证不起作用的原因是因为您正在向阅读器添加模式验证，但随后将`ValidationEventHandler`方法附加到`XmlDocument`对象。两者`XmlDocument`都`XmlReader`能够执行模式验证，并且它们每个都有自己的`XmlSchemaSet`验证事件处理程序，用于执行验证。你把他们需要的一半给了他们每个人，而不是他们需要的全部给了他们一个或另一个。换句话说，你做了以下事情：

*   XmlReader 的架构：**SET**
*   XmlReader 的事件处理程序：**未设置**
*   XmlDocument 的架构：**未设置**
*   XmlDocument 的事件处理程序：**SET**

因此，这两个对象都没有正确验证所需的所有信息。该`XmlReader`对象将执行验证，但您不会收到它发现的任何错误的通知，而该`XmlDocument`对象根本不会进行任何验证，但确实有能力通知您，如果它发现确实发现了任何验证错误。要修复它，您需要设置`XmlReader`对象的验证事件处理程序，或者需要设置`XmlDocument`对象的模式。例如：

```
Dim settings As XmlReaderSettings = New XmlReaderSettings()
settings.Schemas.Add("http://www.w3.org/2001/XMLSchema", schemasFilePath)
settings.ValidationType = ValidationType.Schema
AddHandler settings.ValidationEventHandler, New ValidationEventHandler(AddressOf ValidationEventHandler)
Dim reader As XmlReader = XmlReader.Create(xmlFilePath, settings)
' Read the document... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T07:26:24.407

它没有调用事件处理程序：

```
Protected Sub ValidationEventHandler(ByVal sender As Object, ByVal e As ValidationEventArgs)

    Select Case e.Severity
        Case XmlSeverityType.Error
            'Messagebox(e, "error")
        Case XmlSeverityType.Warning
            'Messagebox(e, "error")
    End Select

End Sub 
```

# amazon-web-services - 通过 IP 地址的 EC2 实例区域

> ID：15088586
> 
> 赞同：2
> 
> 时间：2013-02-26T12:00:04.020
> 
> 标签：amazon-web-services, amazon-ec2

我正在尝试让我的 EC2 实例与第三方服务的 API 进行更好的通信。延迟非常重要，因为语音通信涉及大量语音通信并且延迟是无法容忍的。

我知道一些提供商使用 EC2，但问题是亚马逊的 IP 系统很难找到实例所在的区域。使用非弹性 IP 服务，我可以做一个`whois`并找出它是在澳大利亚还是在欧洲的某个地方所以我可以在附近放一个服务器。

有了这些弹性 IP，我如何才能找到它们所在的区域。我可以使用 ping 时间，但这有点猜测，我必须在不同区域创建所有这些实例以找到最短的 ping 时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T14:05:32.203

[Amazon EC2](http://aws.amazon.com/ec2/)定期发布其[Amazon EC2 公共 IP 范围](https://forums.aws.amazon.com/ann.jspa?annID=1701)，按区域对它们进行集群。

*   它不会按可用[区 (AZ)](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html)对它们进行集群（如果你真的是字面意思的话），但这并不重要，因为跨 AZ 延迟应该经常在个位数毫秒范围内。

除此之外，您可能还对我对[如何确定哪个 AWS 位置最适合为特定区域的客户提供服务的回答感兴趣？](https://stackoverflow.com/a/9861749/45773)，其中概述了基于外部数据/算法或通过[现在可用于 AWS 的基于多区域延迟的路由](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)来处理此问题的另外两个选项（这可能仅在完全采用[Amazon Route 53](http://aws.amazon.com/route53/)时才有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T14:03:33.930

将您的服务器置于 Route 53 DNS 之后，让基于延迟的路由为您完成其余的工作 - 它可以自动为您决定延迟最少的服务器。

[http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html](http://aws.typepad.com/aws/2012/03/latency-based-multi-region-routing-now-available-for-aws.html)

# javascript - 获取数组的第一个值

> ID：15088587
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:08.693
> 
> 标签：javascript, jquery, api, last.fm

我对 JavaScript 和 jQuery 有点陌生，但我在制作东西的同时也在学习。现在我正在使用 JS 的 last.fm api ( [https://github.com/fxb/javascript-last.fm-api](https://github.com/fxb/javascript-last.fm-api) )，我正在尝试获取我列表中的第一张专辑。

我使用以下代码获取数据：

```
lastfm.track.getInfo({track: activeMedia.title, artist: activeMedia.author}, {success: function(trackInfoResult){
// doing things with trackInfoResult
}, error: function(code, message){
    console.log("Error code: " + code);
}}); 
```

其输出采用以下结构（可在[http://www.last.fm/api/show/track.getInfo](http://www.last.fm/api/show/track.getInfo)找到）：

```
<track>
  <id>1019817</id>
  <name>Believe</name>
  <mbid/>
  <url>http://www.last.fm/music/Cher/_/Believe</url>
  <duration>240000</duration>
  <streamable fulltrack="1">1</streamable>
  <listeners>69572</listeners>
  <playcount>281445</playcount>
  <artist>
    <name>Cher</name>
    <mbid>bfcc6d75-a6a5-4bc6-8282-47aec8531818</mbid>
    <url>http://www.last.fm/music/Cher</url>
  </artist>
  <album position="1">
    <artist>Cher</artist>
    <title>Believe</title>
    <mbid>61bf0388-b8a9-48f4-81d1-7eb02706dfb0</mbid>
    <url>http://www.last.fm/music/Cher/Believe</url>
    <image size="small">http://userserve-ak.last.fm/serve/34/8674593.jpg</image>
    <image size="medium">http://userserve-ak.last.fm/serve/64/8674593.jpg</image>
    <image size="large">http://userserve-ak.last.fm/serve/126/8674593.jpg</image>
  </album>
  <toptags>
    <tag>
      <name>pop</name>
      <url>http://www.last.fm/tag/pop</url>
    </tag>
    ...
  </toptags>
  <wiki>
    <published>Sun, 27 Jul 2008 15:44:58 +0000</published>
    <summary>...</summary>
    <content>...</content>
  </wiki>
</track> 
```

获取我的艺术家姓名和 ID，我可以通过以下代码进行管理：

```
console.log(rackInfoResult.track.name); 
```

但现在我想拥有第一张专辑。如何选择 position="1" 的专辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:50:10.757

好的，我找到了。

我使用以下代码来追踪正确的元素

```
for(var key in trackInfoResult.track) {
    var value = trackInfoResult.track[key];
    console.log(key + " : " + value);
} 
```

并每次添加 trackInfoResult.track 后面的键之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:36:03.127

你可以试试：

```
var myAlbum = trackInfoResult.track.album;
if (parseInt(myAlbum.getAttribute('position'), 10) === 1) {
    // do stuff here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:10:31.837

那么你应该尝试这样做。它对我有用。

在脚本的成功函数中

```
 success: function(trackInfoResult){
     var x = eval('('+trackInfoResult+')');
         console.log(x);     
         console.log(x[0]);
    } 
```

我认为这也应该对你有用。

# c# - 如何省略选择 lambda 中的值？

> ID：15088589
> 
> 赞同：3
> 
> 时间：2013-02-26T12:00:14.737
> 
> 标签：c#, linq, select, lambda

我想做一个简单的 CSV 解析器。它应该通过逗号分隔值列表并将它们放在`IList<int>`. 这些值应为整数。如果一个值不可解析，我只想省略它。

这是我到目前为止的代码：

```
csv.Split(',').Select(item =>
{
    int parsed;
    if (int.TryParse(item, out parsed))
    {
        return parsed;
    }
    continue; //is not allowed here
}).ToList(); 
```

但是，`continue`这里（当然）不允许使用 。**如何在我的选择实现中省略一个值？**

注意：我当然可以使用 foreach 或 LINQ 表达式，但我想知道如何使用 lambda。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T12:04:08.387

怎么样：

```
public static IEnumerable<int> ExtractInt32(this IEnumerable<string> values) {
    foreach(var s in values) {
        int i;
        if(int.TryParse(s, out i)) yield return i;
    }
} 
```

然后：

```
var vals = csv.Split(',').ExtractInt32().ToList(); 
```

这里的好东西：

*   避免神奇的“前哨”数字（如`int.MinValue`）
*   避免了单独且断开连接的“它是有效的”/“解析”步骤（因此没有重复）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:03:24.087

`Select`转换一个值。它不过滤。`Where`正在这样做：

```
csv.Split(',')
   .Select(item =>
           {
               int parsed;
               return new { IsNumber = int.TryParse(item, out parsed), 
                            Value = parsed };
           })
   .Where(x => x.IsNumber)
   .Select(x => x.Value); 
```

此外，请参阅[此答案](https://stackoverflow.com/a/8910867/572644)以获取一种聪明而简短的方法。请注意，“聪明”的含义在这里并不完全是肯定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:04:54.623

One way is to return some default value and then skip it.

```
errorInt = int.MinValue;
csv.Split(',').Select(item =>
{
    int parsed;
    if (int.TryParse(item, out parsed))
    {
        return parsed;
    }
    else
    {
        return errorInt;
    }

}).Where(val => val != errorInt).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:05:44.910

Why not to use `Where` on array and only then select proper ints

```
csv.Split(',')
    .Where(item => 
          { 
              int parsed; 
              return int.TryParse(item, out parsed); 
          })
    .Select(item => Convert.ToInt32(item)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T12:03:35.377

我认为你有三个选择：

1.  使用`SelectMany`相反，它将允许您为要省略的元素返回为空的可枚举（否则为长度为 1 的可枚举）。
2.  使用您确定不会在集合中的 int 值（例如`-1`）来表示“省略”，然后将它们过滤掉。这种方法很脆弱，因为您可能会选择一个随后出现在集合中的值，这将导致一个微妙的错误。（您可以通过使用更大的数据类型来缓解这种情况，例如`long`并选择超出范围的值，`int`但随后您需要转换回`int`。）
3.  改用`Nullable<int>`( `int?`) 并在之后过滤掉这些`null`值。

1：

```
csv.Split(',').SelectMany(item =>
    {
        int parsed;
        if (int.TryParse(item, out parsed))
        {
            return new[] {parsed};
        }

        return Enumerable.Empty<int>();   
    } 
```

3：

```
csv.Split(',').Select(item =>
    {
        int parsed;
        if (int.TryParse(item, out parsed))
        {
            return (int?) parsed;
        }

        return (int?) null;
     }
    .Where(item => item.HasValue)
    .Select(item => item.Value); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T12:08:35.047

尝试这个：

```
int dummy;
sv.Split(',').Where(c => int.TryParse(c,out dummy)).Select(c => int.Parse(c)); 
```

`int.TryParse(..)`只是检查它是否是要转换为 int 的有效字符串。out 参数只是被忽略了——我们不再需要它。

我们知道，只有那些“生成”的字符串值`Select()`才是可以安全地解析为 int 的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T12:05:31.183

```
int TempInt;
List<int> StuffIWant = csv.Split(',').Where(item => int.TryParse(item, TempInt)).ToList(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-26T12:03:37.037

我可能只会使用：

```
csv.Split(',').Where(item => isValid(item)).Select(item => TransformationExpression(item)); 
```

或者，

```
csv.Split(',').Select(item => ReturnsDummyValueIfInvalid(item)).Where(item => item != DummyValue); 
```

# python - 无法让我的数据库连接到我的数学游戏

> ID：15088591
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:20.760
> 
> 标签：python, sql, database, user-interface

基本上我试图让我的数据库连接到我的 GUI 并显示一个随机问题，但是它根本不起作用，知道吗？      

```
SQL = 'SELECT * FROM tblQuestion'
cursor = Databaseconnector.SELECT(SQL)
rows = cursor.fetchall()
rows = random.choice(rows)
print rows.Question, rows.Hint, rows.A1, rows.A2, rows.A3, rows.A4, rows.CorrectAnswer
#def create_widgets(self):
#create welcome label
label1 = Tkinter.Label(self, text = (rows(1).Question))
label1.grid(row = 0, column = 1, columnspan = 2, sticky = 'W') 
```

> 错误：TypeError：'pydodbc.Row' 对象不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:10:11.807

`rows`首先是对象的集合，然后通过调用 random.choice`pydodbc.Row`将其更改为单个对象：`pydodbc.Row`

```
rows = cursor.fetchall()   # rows is a list
rows = random.choice(rows) # now rows is a single object 
```

然后您尝试使用以下方法调用该对象`()`：

```
label1 = Tkinter.Label(self, text = (rows(1).Question)) 
```

失败并显示您提供的错误消息（部分）：

```
ERROR: TypeError: ‘pydodbc.Row’ object is not callable 
```

* * *

解决此问题的最佳方法是为单行使用新变量：

```
rows = cursor.fetchall()   
random_row = random.choice(rows) 

...

label1 = Tkinter.Label(self, text = (random_row.Question)) 
```

# c++ - 我怎样才能装饰谷歌测试夹具

> ID：15088592
> 
> 赞同：2
> 
> 时间：2013-02-26T12:00:23.140
> 
> 标签：c++, unit-testing, googletest

我有一些测试：

```
class Somefixture: ::testing::Test{};
class Somefixture2: ::testing::Test{};

TEST_F(SomeFixture, SomeName)
{
// ...
} 
```

如何自动将测试链接到两个夹具（装饰）？

```
TEST_F2(SomeFixture, SomeFixture2, SomeName){} 
```

虽然所需的结果就像我写的一样：

```
TEST_F(SomeFixture, SomeName)
{
// ...
}
TEST_F(SomeFixture2, SomeName)
{
// ...
} 
```

没有不必要的代码重复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:03:08.037

除了一个小例外（两个测试不能有相同的名称），这应该是正确的方向：

```
#define TEST_F2(F1, F2, Name)                                  \
template <struct Fixture> struct MyTester##Name : Fixture {    \
  void test##Name();                                           \
};                                                             \
                                                               \
TEST_F(MyTester##Name<F1>, Name##1){ test##Name(); }           \
TEST_F(MyTester##Name<F2>, Name##2){ test##Name(); }           \
                                                               \
template <struct Fixture> void MyTester##Name::test##Name() 
```

这将调用两个测试，每个测试都使用 MyTester 作为从两个夹具之一继承的夹具。由于 do_test 是 MyTester 的成员，因此它可以访问所有从夹具继承的成员。测试框架将为每个测试创建一个 MyTester 对象，并且相应的实际夹具将被创建为基类对象。为了避免与其他测试或 TEST_F2 的不同调用之间的命名冲突，我将 Name 附加到模板名称和测试方法名称。TEST_F 宏调用带有名称和索引。我没有测试它，因为我没有谷歌测试，但许多测试框架中的机制工作相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:25:52.713

> 如何自动将测试链接到两个夹具（装饰）？

通过添加一个公共基类：

```
class CommonFixture
{
  public:
    // add member variables and initialize them in the constructor
};
class Somefixture1 : ::testing::Test, protected CommonFixture{}
class Somefixture2 : ::testing::Test, protected CommonFixture{} 
```

测试保持不变：

```
TEST_F(SomeFixture1, SomeName)
{
// ...
}
TEST_F(SomeFixture2, SomeName)
{
// ...
} 
```

现在您获得了 Somefixture1 和 Somefixture2 的通用夹具。您可以从测试中访问这些常见对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:58:43.713

您可以采用`BЈовић`看起来不错的方法。
或者需要对测试本身进行小的更改的另一种方法可能是拥有一个“超级”类，它将两个实例都作为成员。

```
class superFuxture
{
public:
    Somefixture1 f1;
    Somefixture2 f2;
} 
```

然后你的测试会是这样的：

```
TEST_F(superFuxture, SomeName)
{
    //when you were accessing a member of Somefixture1 you'll now need to do:
    //f1.SomeFixture1Member
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T14:44:50.263

Google Test 有两种方法可以在不同的上下文中执行相同的测试主体：[值参数化测试](https://code.google.com/p/googletest/wiki/AdvancedGuide#Value_Parameterized_Tests)或[类型化/类型参数化测试](https://code.google.com/p/googletest/wiki/AdvancedGuide#Typed_Tests)。不完全是您想要的，但它是它提供的最接近的东西。

# java - 从 String 转换为 Int 时出现 JSP 异常错误

> ID：15088595
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:27.700
> 
> 标签：java, jsp, exception

有一个类，`X.Java.`如下两行，我正在做

```
request.getSession.setAttribute("count",String.valueOf(rsp.getCount())); 
```

在上面我从数据库中获取计数`rsp.getCount()`。这`getcount()`是整数类型，我将更改为 String as`String.valueOf(rsp.getCount()`并设置为一个属性 as `count`。

有一个 JSP 作为 X.jsp 现在我正在使用`getAttribute`并将值存储在类型`failCount`变量中`string`。

```
String failCount = request.getSession.getAttribute("count"); 
```

现在我想将此值转换为整数类型，因为我写了这一行

```
int countInt = Integer.parseInt(failCount); 
```

我收到如下错误

```
127039 13-02-26 17:13:35 ERROR http-10.18.2.105-12205-Processor4 - <JSPFilter ServletException> - test.abc.common.filter.JSPFilter.doFilter(JSPFilter.java:111) 
org.apache.jasper.JasperException: Exception in JSP: abc/x.jsp:66 

63:              
64:          } 
65:          String failCount = (String)request.getSession().getAttribute("failCount"); 
66:          int failCountint = Integer.parseInt(failCount); 
67:          //System.out.println(failCountint); 
68:           
69:           

Stacktrace: 
        at org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:489) 
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:411) 
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308) 
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) 
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269) 
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188) 
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:679) 
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:461) 
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:399) 
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:301) 
        at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:142) 
        at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:247) 
        at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1105) 
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:841) 
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:755) 
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:396) 
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:350) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:627) 
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:729) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:21:48.587

我认为 failCount 是 null 那为什么 int failCountint = Integer.parseInt(failCount);

所以请使用 System.out.println(failCount);

并且还在错误行周围使用 try catch 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:14:22.243

确保您在 HttpRequest 中设置会话

```
request.getSession.setAttribute("count",String.valueOf(rsp.getCount())); 
```

这个java文件是servlet吗，那么它会很好用。

还要确保 rsp.getCount() 不返回“null”。

在 JSP 文件中

```
String failCount = (String)request.getSession().getAttribute("failCount"); 
int failCountint = Integer.parseInt(failCount); 
```

你为什么使用 request.getSession() 而不是 session，并且你试图获取 failcount 而不是 count

尝试这个

```
String failCount = session.getAttribute("count").toString();
int countInt = Integer.parseInt(failCount); 
```

我认为这可能有助于全面...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:14:31.597

设置值为会话：

```
request.getSession.setAttribute("count",String.valueOf(rsp.getCount())); 
```

从会话中读取值：

```
String failCount = (String)request.getSession().getAttribute("failCount"); 
```

在会话中设置值时，您正在调用它`count`，而在从 JSP 读取值时，您正在调用它`failCount`。

# php - 用于查找表中没有的结果的 SQL 查询

> ID：15088596
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:28.110
> 
> 标签：php, mysql

我对我的 SQL 有点生疏，希望对这些查询有所帮助，我正在努力解决这些问题，甚至想知道是否有可能。

嗨，我有一些桌子；

客户、产品、客户产品

当客户选择使用添加到 clientproducts 的产品时，使用 clientid 和 productid。

**简单的查询** 我想运行一个查询，它只会向我显示客户选择的产品。

**我还想运行一个查询，该查询将只显示尚未选择产品的客户**。****

 **提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:02:49.860

查询一：

```
 SELECT table1.id1 FROM table1
    WHERE table1.id1 IN (SELECT table2.foreign_id FROM table2); 
```

查询 2：

```
 SELECT table1.id1 FROM table1
        WHERE table1.id1 NOT IN (SELECT table2.foreign_id FROM table2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:02:59.117

在这里，使用`LEFT JOIN`

```
SELECT  a.*
FROM    products a
        LEFT JOIN clientproducts b
            ON a.productID = b.productID
        LEFT JOIN clients c
            ON  b.clientID = c.clientID AND
                c.ClientID = 'clientID HERE'
WHERE   c.client IS NULL 
```

或者

```
SELECT  a.*
FROM    products a
        LEFT JOIN clientproducts b
            ON a.productID = b.productID AND
               b.ClientID = 'clientID HERE'
WHERE   b.productID IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:05:45.987

**简单的查询**

```
SELECT * FROM clients LEFT JOIN products ON clients.id = products.client_id 
```

**硬查询**

```
SELECT * FROM clients WHERE clients.id NOT IN (SELECT clients.id FROM clients LEFT JOIN products ON clients.id = products.client_id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:07:29.307

获取client_id = 1的所有产品信息

```
select products.*
from products, clientproducts
where products.id = clientproducts.product_id
and clientproducts.client_id = 1 
```

获取所有未选择任何产品的客户详细信息

```
select *
from clients
where id not in (select client_id
            from clientproducts) 
```**

# excel - VBA：以俄语获取当前月份

> ID：15088598
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:33.647
> 
> 标签：excel, vba

我正在尝试获取当前月份，而我的系统语言更改为“俄罗斯”，它给出了“？？？？？？”。

代码：

```
Dim presDate as String
presDate = Format(Date,"ddmmmmyyyy") 
```

我上面的代码输出为“??????”。我正在使用 Excel 2010。请提出答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:22:12.477

如果在控制面板 - 区域和语言选项中将*非 Unicode 程序的语言更改为*俄语*，*西里尔字母应在 VBE 编辑器（包括调试窗口）中正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:57:17.273

此代码有效。它将被称为 '=mydate(date_value)'，其中 date_value 可以是对包含日期的单元格的引用，一个字符串值，例如 '"11/2/96"'，一个返回系统的 Excel 函数当前日期（例如，'=mydate(TODAY())' 或 '=mydate(NOW())。

```
 Option Explicit
  Function mydate(cel As Variant) As String
      If (TypeName(cel) = "Range") Then
          mydate = Format(cel.Value, "mmmm dd yyyy")
      ElseIf TypeName(cel) = "String" Then
          mydate = Format(datevalue(cel), "mmmm dd yyyy")
      ElseIf TypeName(cel) = "Double" Then
          mydate = Format(Round(cel, 0), "mmmm dd yyyy")
      Else  
          mydate = CVErr(xlErrValue)
      End If
  End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:21:38.003

当我在即时窗口中执行此操作时

```
Debug.Print Format(now,"ddmmmmyyyy") 
```

在我得到的即时窗口中

```
26???????2013 
```

当我这样做的时候

```
cells(1,1)=Format(now,"ddmmmmyyyy") 
```

在牢房里`A1`我得到

```
26февраля2013 
```

我认为 VBA IDE 不能做非拉丁字符（可能仅限于 ASCII）。

# gcc - 什么是在 x86 中获取段覆盖前缀的 GCC 编译器选项

> ID：15088599
> 
> 赞同：0
> 
> 时间：2013-02-26T12:00:35.800
> 
> 标签：gcc, compiler-construction, linker, x86

我有内存布局（在增加内存地址中），例如：

代码段 (0-4k)、数据段(4k-8k)、堆栈段(8k-12k)、自定义数据段(12k-16k)。

我在自定义数据部分放置了一些特殊的数组和结构。

据我所知，数据段 (#DS)Selector 将用于任何与数据相关的编译器代码。

所以数据部分（4k-8k）默认情况下所有操作都有#DS。除了一些可以使用 ES 的 str op。喜欢：

```
mov    $0xc00,%eax
addl   $0xd, (%eax) 
```

但是，我想使用 Extra Segment(#ES) 选择器进行 CustomData 访问。我将为具有不同 Base 和 Limit 的 ES 定义一个新的 GDT 条目。喜欢：

```
mov    $0x3400,%eax
addl   $0xd, %es:(%eax) 
```

所以我的问题是：

GCC 是否有任何 x86 编译器标志，可用于告诉编译器使用 #ES 进行自定义数据部分代码访问。？

意思是，编译器标志将使用 #ES 为 CustomData 部分生成代码。？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-02T02:09:48.013

虽然问题是要求选择让 gcc 的代码生成使用 es 前缀来访问自定义部分，但如果您想在手写代码中执行此操作，AT&T 语法已经允许例如 %es:(%eax)。

注意，这可能会破坏 gcc 有时内联的 rep-string 指令；fs 或 gs 将是唯一明智的选择，即使在 x86-64 中仍然可用。

（根据 Peter Cordes 的有用评论制作此评论社区 wiki。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-18T04:14:55.697

引用[clang 语言扩展文档中的示例](https://clang.llvm.org/docs/LanguageExtensions.html#target-specific-extensions)

> ```
> #define GS_RELATIVE __attribute__((address_space(256)))
> int foo(int GS_RELATIVE *P) {
>   return *P;
> } 
> ```
> 
> 编译为（在 X86-32 上）：
> 
> ```
> _foo:
>         movl    4(%esp), %eax         # load the arg
>         movl    %gs:(%eax), %eax      # use it with its prefix
>         ret 
> ```

地址空间 256 是`gs`， 257 是`fs`， 258 是`ss`。

文档没有提到`es`；编译器通常假设`es`= ，因此如果他们根据调整选项选择这样做，`ds`他们可以自由地内联`rep movs`或用于 memcpy / memset。`rep stos`某些 CPU 上的库实现`memcpy`或`memset`也可能使用 rep stos/movs。相关：[为什么 std::fill(0) 比 std::fill(1) 慢？](https://stackoverflow.com/questions/42558907/why-is-stdfill0-slower-than-stdfill1)

显然，这确实是低级的东西，只有在您已经设置了 GS 或 FS 基地址时才有意义。( `wrfsbase`)。请注意 i386 Linux`gs`用于用户空间中的线程本地存储，而 x86-64 Linux 使用`fs`.

* * *

我不知道像 gcc、ICC 或 MSVC 这样的扩展。

嗯，`__thread`在 GNU C 中有，它将根据目标平台使用`%gs:`或`%fs:`前缀。 [gcc `__thread` 是如何工作的？](https://stackoverflow.com/questions/32245103/how-does-the-gcc-thread-work).

# php - 通过一个表单更新多个模型

> ID：15088608
> 
> 赞同：1
> 
> 时间：2013-02-26T12:00:52.280
> 
> 标签：php, cakephp

嘿伙计们请帮助我，我想通过一个表单**更新**两个表数据，但数据只在一个表中更新并插入到第二个表中，而不是更新现有记录。这是我的代码-

**查看文件：**

```
echo $this->Form->create('Question');
echo $this->Form->input('question');
foreach (range(0,2) as $index) 
{
  echo $this->Form->input('Option.'.$index.'.poll_options');
}
echo $this->Form->input('id',array('type'=>'hidden'));
echo $this->Form->end('Save Poll'); 
```

**控制器文件：**

```
$data=$this->Question->findById($id);
if($this->request->is('post') || $this->request->is('put'))
{
   if($this->Question->saveAll($this->request->data))
   {
      $this->Session->setFlash('Question has been updated');
      $this->redirect(array('action'=>'index'));
   }
   else
   {
      $this->Session->setFlash('Question has not been updated');
   }
}
if(!$this->request->data) 
{
   $this->request->data=$data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:41:37.377

**控制器代码说明。**

```
<?php
    $data = $this->Question->findById($id); 
```

**上面将返回所有问题和相关的答案数组，如下所示。**

```
Array
(
    [Question] => Array
    (
        [id] => 121
        [name] => Gwoo the Kungwoo
        [created] => 2007-05-01 10:31:01
    )
    [Option] => Array
    (
        [0] => Array
            (
                [id] => 123
                [quesion_id] => 121
                [body] => The Kungwooness is not so Gwooish
                [created] => 2006-05-01 10:31:01
            )
        [1] => Array
            (
                [id] => 124
                [quesion_id] => 121
                [title] => More on Gwoo
                [created] => 2006-05-01 10:41:01
            )
    )
) 
```

**现在，我们需要做的就是构建我们的表单（让我们做一些非常简单的事情）：**

```
echo $form->create('Question', array('action' => 'edit'));
foreach($this->data['Option'] as $key => $value)
{
    echo $form->input('Option.'.$key.'.name');
    echo $form->input('Option.'.$key.'.id');
}
echo $form->end('Save All'); 
```

它是从我们的`$this->data`数组构建的，并且完全遵循正确的格式，这使得该`saveAll()`方法可以正常工作。

现在发布它，看看我确信它现在可以工作。

干杯。

# ios - 文档交互控制器

> ID：15088610
> 
> 赞同：1
> 
> 时间：2013-02-26T12:01:06.923
> 
> 标签：ios, sandbox, uidocumentinteraction

我的应用程序应该能够读取和编辑 PDF、DOC 和 TXT 文件格式，因此我决定使用另一个应用程序（让我将其命名为 app2）从我的应用程序中打开和编辑文件。

但是当我将文件保存在 app2 中时，文件会保存到 app2 的沙箱中。是否可以让 app2 将文件保存到我的应用程序的沙箱中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:55:50.493

[应用程序沙箱](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/TheiOSEnvironment/TheiOSEnvironment.html)保护该应用程序的所有文件...因此，除非您拥有某种越狱手机，否则您基本上将拥有 1 个应用程序和 1 个沙箱（即 1 组文件）。但是，您可以在应用程序中利用某些依赖项。（例如，如果您在手机上安装了 iBooks 或 PDF 阅读器，您可以使用 WebView 打开 PDF，或者将用户引导至 Safari 以打开 Web 链接）

# iphone - 我的 xcode 项目没有给我添加 .png 图像

> ID：15088615
> 
> 赞同：0
> 
> 时间：2013-02-26T12:01:31.267
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我试图将新图像添加到我的 xcode 项目中，以使我的应用程序通用，为 iphone 添加图像。编译时，这是错误：

```
2013-02-26 08:58:35.585 XXXX[2132:707] cocos2d: Couldn't add XXXX-XXX.png in CCTextureCache
2013-02-26 08:58:35.598 XXXXX[2132:707] *** Assertion failure in -[MainMenuLayer addChild:], /Users/XXXX/XXXXX/XXXXX/XXXXX/XXXX/cocos2d/CCNode.m:362
2013-02-26 08:58:35.632 XXXXXX[2132:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Argument must be non-nil'

*** First throw call stack:
(0x336c68bf 0x301ba1e5 0x336c67b9 0x30f0d3b3 0x4abef 0xf6495 0x49279 0xcbc8d 0x49279 0xca7cd 0x6413d 0x6bd6b 0x98ff9 0x9a39b 0x34dab423 0x34dab379 0x31940f93 0x36c46891 0x3368ff43 0x3369a553 0x3369a4f5 0x33699343 0x3361c4dd 0x3361c3a5 0x37d8efcd 0x3107f743 0xc90fb 0x3df8)
terminate called throwing an exception 
```

有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:16:58.550

您指定的文件名很可能与实际文件名不同。如果您尝试添加 xcode 找不到的文件，您将看到此错误。仔细检查文件名并确保您有：

1.  将文件添加到您的项目（文件->将文件添加到 xxxx）
2.  添加的文件的文件名与您尝试添加到 MainMenulayer 的文件完全相同（区分大小写）
3.  您还在用于将 png 添加到
    MainMenuLayer的代码中包含文件扩展名 (.png)

# java - neo4j 中参考节点的概念是否仍在使用或弃用？

> ID：15088616
> 
> 赞同：4
> 
> 时间：2013-02-26T12:01:35.023
> 
> 标签：java, neo4j, deprecated, embedded-database

我在[tutorials-java-embedded-index](http://docs.neo4j.org/chunked/stable/tutorials-java-embedded-index.html)浏览 neo4j 文档。它描述了参考节点的概念。创建一个用户参考节点`usersReferenceNode`，用于连接数据库中创建的所有用户节点。

这个参考节点的用途是什么？当我尝试使用`graphDb.getReferenceNode()`时，它显示为不推荐使用的方法。

那么是否/是否需要创建参考节点？如果是，这种参考节点的用途和用途是什么？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T16:07:35.670

由于系统的设计，参考节点的概念已被弃用。索引应该用于检索某些类型的节点等。所以你可以有一个名为`Animal`的索引和一个名为的索引`Bird`，它们可以存储那些“类型”的节点。

删除参考节点的一个原因是密集节点问题，如果您无法将所有内容都存储在`Neo4j`. 这是您拥有一个具有许多关系的节点的地方。在某个点（取决于系统，但通常在数十万个）之后，根据关系类型查找节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:21:21.233

我可以看到的参考节点的一个用例是删除特定节点。例如考虑以下场景：

```
> I have two types of nodes, say ANIMAL and BIRD
> I have a reference node `animalsReference` linked to all ANIMAL nodes and
> I have a reference node `birdsReference` linked to all BIRD nodes 
```

现在将来假设我想删除所有 BIRD 节点。在这里，我可以使用“birdsReference”来获取所有 BIRD 类型的节点并将它们全部删除。

如果`graphDb.getReferenceNode()`不推荐使用，我们如何完成此类任务（删除一些节点）？

我也可以看到`graphDb.getAllNodes()`已弃用。那么检索所有节点的方法是`graphDB`什么？

# jquery - 超大尺寸图像的异步加载

> ID：15088618
> 
> 赞同：1
> 
> 时间：2013-02-26T12:01:40.703
> 
> 标签：jquery, supersized

我正在使用一个超大的滑块，我想实现一些我无法做的事情。

假设我的图像幻灯片间隔为 3 秒，

我有四张图片 a.jpg、b.jpg、c.jpg 和 d.jpg。

现在 b.jpg 是一个非常大的图像，因此加载需要 4 秒。

现在在加载并保留 a.jpg 后，它会滑动以让位于图像 b.jpg。

现在，由于滑块间隔是 3 秒，而 b.jpg 需要 4 秒来加载，所以滑块的变化方式是在 b.jpg 完全加载之前，滑块发生变化并且 c.jpg 被加载。

因此无法看到 b.jpg，因为 c.jpg 在 b.jpg 之前加载。

我希望滑块像这样运行：直到并且除非完全加载一个图像，否则滑块不会移动。

假设如果 b.jpg 需要 6 秒来加载，滑块将给它 6 秒来加载。完全加载后，它将停留 3 秒（转换间隔），然后滑块会改变。

这是我的脚本：

```
$(window).load(function(){
            jQuery(function($){

                $.supersized({

                    // Functionality
                    slide_interval          :   3000,       // Length between transitions
                    transition              :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                    transition_speed        :   1200,       // Speed of transition

                    // Components                           
                    slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                    slides                  :   [           // Slideshow Images
                                                                                                          <?php
                                                                                                             foreach($wed_image as $wi)
                                                                                                             {?>
                                                        {image : '<?php echo base_url().$wi['wed_pic_image'];?>', title : 'Image Credit: Maria Kazvan', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/kazvan-1.jpg', url : 'http://www.nonsensesociety.com/2011/04/maria-kazvan/'},
                                                        <?php
                                                                                                             }?>

                                                ]

                });
            });
           }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T10:32:28.017

首先将您的 php 代码存储在 Javascript 变量中：

```
 <script type="text/javascript">

    var x="<?php echo base_url().$wi['wed_pic_image']; ?>"; 
```

// 像这样靠近你的图像 src 用户

```
{image : x, title : 'Image Credit: Maria Kazvan', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/kazvan-1.jpg', url : 'http://www.nonsensesociety.com/2011/04/maria-kazvan/'}, 
```

> // 在图片附近使用 Javascript 变量。它对我有用

# composer-php - cloudControl - PHP：（暂时）禁用作曲家

> ID：15088619
> 
> 赞同：2
> 
> 时间：2013-02-26T12:01:44.223
> 
> 标签：composer-php, cloudcontrol

我很高兴在 cloudControl 上使用[Composer开发一个 PHP 应用程序。](http://getcomposer.org/)将它集成到部署过程中的方式非常棒。但是，Composer 无需在*每次*部署时都进行更新。

是否可以（临时）禁用 Composer，每次部署？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:12:54.763

我并不完全熟悉 cloudControl 如何集成 Composer，但理想情况下，您应该`composer update`在认为合适时运行，然后提交您的 composer.lock 文件，它们将`composer install`在每次部署时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:28:08.583

如果你的意思是作曲家更新自己：现在每次推送都会下载最新版本的作曲家，*除非*你已经有一个。只需将 composer.phar 文件放在您的项目目录中，它就会被使用。

# x++ - 为什么我的更改被忽略以在动态 ax 2012 r2 中发布更新脚本

> ID：15088621
> 
> 赞同：1
> 
> 时间：2013-02-26T12:01:52.017
> 
> 标签：x++, dynamics-ax-2012

我对 ReleaseUpdateDB60_Basic.updateAdjustment_RU 脚本有问题 -> UPDATE RASSETADJUSTMENTTABLE SET = LTRIM()，是语法错误。如果我将生成此 sql 的行注释掉，同步，重新编译，那么当我运行脚本时错误仍然存​​在。

我们正在从 AX 2009 升级到 AX 2012 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:55:42.347

请记住进行增量 CIL 更新。升级脚本以批处理方式运行，它使用 CIL。

# android - 如何在android中下载所有文件并将所有文件保存在sd卡中？

> ID：15088625
> 
> 赞同：1
> 
> 时间：2013-02-26T12:01:57.273
> 
> 标签：android, listview, download, android-asynctask

在我的情况下，我在下载所有文件时单击下载按钮，但在显示所有文件 sdcard 和一些文件显示中。我在我的代码中使用了线程。我错了：和 Cancel(cl) 按钮工作但在我使用的 delted 下载文件不起作用并且 {cl 和 dl 按钮} setVisibitly 没有改变。我的代码如下：请帮助>

```
 mainDownloadBtn.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                adtf.setAllDownload();
            }
        });

    }

    public class MyListAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        ProgressBar pr;
        ProgressBar[] prArray = new ProgressBar[list.size()];
        Button cl, dl;
        ImageView im;
        DownloadFileFromURL downloadFileFromURL;

        public MyListAdapter(Context context) {
            mInflater = LayoutInflater.from(context);

        }

        public int getCount() {
            return list.size();
        }

        public Object getItem(int position) {
            return position;
        }

        public long getItemId(int position) {
            return position;
        }

        public void setAllDownload() {
            if (prArray.length > 0) {
                for (int i = 0; i < prArray.length; i++) {
                    try {
                        Thread.sleep(5000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    downloadFileFromURL = new DownloadFileFromURL(dl, cl);
                    downloadFileFromURL.execute(pr, list.get(i).url_video, i);
                }
            }
        }

        public View getView(final int position, View convertView,
                ViewGroup parent) {

            convertView = mInflater.inflate(R.layout.custome_list_view, null);
            cl = (Button) convertView.findViewById(R.id.cancle_sedual);
            dl = (Button) convertView.findViewById(R.id.download_sedual);
            pr = (ProgressBar) convertView.findViewById(R.id.listprogressbar);
            prArray[position] = pr;
            im = (ImageView) convertView.findViewById(R.id.list_image);
            im.setImageResource(list.get(position).images[position]);
            getProgress(pr, position, cl, dl);
            // pr.setProgress(getItem(position));
            cl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.v("log_tag","Cancle Button Click");
                //  dl.setVisibility(View.VISIBLE);

                    dl.setVisibility(View.VISIBLE);

                    cl.setVisibility(View.GONE);
                    downloadFileFromURL = new DownloadFileFromURL(dl, cl);
                    //downloadFileFromURL.cancel(true);
                    downloadFileFromURL.downloadFile();
                    pr.setProgress(0);
                }
            });

            dl.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    str_start = list.get(position).url_video;
                    dl.setVisibility(View.GONE);
                    cl.setVisibility(View.VISIBLE);
                    Log.v("log_tag","Start Button Click ");
                    //
                    // new DownloadFileFromURL().execute(str_start);
                    downloadFileFromURL = new DownloadFileFromURL(dl, cl);
                    downloadFileFromURL.execute(pr, str_start, position);
                }
            });

            return convertView;
        }
    }

    class DownloadFileFromURL extends AsyncTask<Object, String, Integer> {

        int count = 0;
        ProgressDialog dialog;
        ProgressBar progressBar;
        int myProgress;
        int position;
        Button start, cancel;
        boolean download1 = false;

        public DownloadFileFromURL(Button start, Button cancel) {
            this.start = start;
            this.cancel = cancel;
        }

        /**
         * Before starting background thread Show Progress Bar Dialog
         * */

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            ProgressBar progressBar;
            download1 = true;

        }
        public void downloadFile() {
            this.download1 = false;

        }
        @Override
        protected void onCancelled() {
            super.onCancelled();

        }

        /**
         * Downloading file in background thread
         * */
        @Override
        protected Integer doInBackground(Object... params) {
            //Log.v("log_tag", "params  :::; " + params);
            int count;
            progressBar = (ProgressBar) params[0];
            position = (Integer) params[2];
            try {
                // URL url = new URL(f_url[0]);
                URL url = new URL((String) params[1]);
                //Log.v("log_tag", "name  ::: " + url);
                name = ((String) params[1]).substring(((String) params[1])
                        .lastIndexOf("/") + 1);
                //Log.v("log_tag", "name Substring ::: " + name);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new BufferedInputStream(url.openStream(),
                        8192);
                download = new File(Environment.getExternalStorageDirectory()
                        + "/download/");
                if (!download.exists()) {
                    download.mkdir();
                }
                String strDownloaDuRL = download + "/" + name;
                Log.v("log_tag", " down url   " + strDownloaDuRL);
                FileOutputStream output = new FileOutputStream(strDownloaDuRL);

                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    if (this.download1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    // publishProgress("" + (int) ((total * 100) /
                    // lenghtOfFile));

                    // writing data to file
                    progressBar
                            .setProgress((int) ((total * 100) / lenghtOfFile));
                    output.write(data, 0, count);
                    setProgress(progressBar, position, start, cancel, this);
                }
                }
                // flushing output
                output.flush();
                 if(!this.download1){
                        File delete = new File(strDownloaDuRL);
                        delete.delete();
                        }  
                // closing streams
                output.close();
                input.close();

            } catch (Exception e) {
                Log.e("Error: ", e.getMessage());
            }
            return 0;

        }

        /**
         * Updating progress bar
         * */
        protected void onProgressUpdate(String... values) {

            super.onProgressUpdate(values);
        //  Log.v("log_tag", "progress :: " + values);
            // setting progress percentage
            // pDialog.setProgress(Integer.parseInt(progress[0]));
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            Log.v("log", "login  ::: 4::: " + download);
            String videoPath = download + "/" + name;
            String chpName = name;
            Log.v("log_tag", "chpName  ::::" + chpName + "  videoPath "
                    + videoPath);
            db.execSQL("insert into videoStatus (chapterNo,videoPath) values(\""
                    + chpName + "\",\"" + videoPath + "\" )");

        }

    }

    private void setProgress(final ProgressBar pr, final int position,
            final Button Start, final Button cancel,
            final DownloadFileFromURL downloadFileFromURL) {
        ProgressBarSeek pbarSeek = new ProgressBarSeek();
        pbarSeek.setPosition(position);
        pbarSeek.setProgressValue(pr.getProgress());
        //Log.v("log_tag", position + "  progress  " + pr.getProgress());
        progreeSeekList.add(pbarSeek);
    /*  cancel.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Log.v("log_tag","Cancle Button Click Set progress");
                Start.setVisibility(View.VISIBLE);
                cancel.setVisibility(View.GONE);
                downloadFileFromURL.cancel(true);
                pr.setProgress(0);
            }
        });
        Start.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Log.v("log_tag","Start Button Click set Progress");
                str_start = list.get(position).url_video;
                Start.setVisibility(View.GONE);
                cancel.setVisibility(View.VISIBLE);
                Log.v("log_tag", "str_start  " + str_start);
                //
                // new DownloadFileFromURL().execute(str_start);
                DownloadFileFromURL downloadFileFromU = new DownloadFileFromURL(
                        Start, cancel);
                downloadFileFromU.execute(pr, str_start, position);
            }
        });*/
    }

    private void getProgress(ProgressBar pr, int position, Button cl, Button dl) {
        if (progreeSeekList.size() > 0) {
            for (int j = 0; j < progreeSeekList.size(); j++) {
                if (position == progreeSeekList.get(j).getPosition()) {
                    pr.setProgress(progreeSeekList.get(j).getProgressValue());
                    dl.setVisibility(View.GONE);
                    cl.setVisibility(View.VISIBLE);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:47:36.937

You can try using the below code to download the files from the url and save into the sdcard:

> ```
> public void DownloadFromUrl(String DownloadUrl, String fileName) {
>   try {
>        File root = android.os.Environment.getExternalStorageDirectory();  
>        File dir = new File (root.getAbsolutePath() + "/xmls");
>        if(dir.exists()==false) {
>             dir.mkdirs();
>        }
> 
>        URL url = new URL(DownloadUrl); //you can write here any link
>        File file = new File(dir, fileName);
> 
>        long startTime = System.currentTimeMillis();
>        Log.d("DownloadManager", "download url:" + url);
> 
>        /* Open a connection to that URL. */
>        URLConnection ucon = url.openConnection();
> 
>        /*
>         * Define InputStreams to read from the URLConnection.
>         */
>        InputStream is = ucon.getInputStream();
>        BufferedInputStream bis = new BufferedInputStream(is);
> 
>        /*
>         * Read bytes to the Buffer until there is nothing more to read(-1).
>         */
>        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
>        int current = 0;
>        while ((current = bis.read()) != -1) {
>           baf.append((byte) current);
>        }
> 
>        /* Convert the Bytes read to a String. */
>        FileOutputStream fos = new FileOutputStream(file);
>        fos.write(baf.toByteArray());
>        fos.flush();
>        fos.close();
>        Log.d("DownloadManager", "download ready in" + ((System.currentTimeMillis() - startTime) / 1000) + " sec");
>   } catch (IOException e) {
>    Log.d("DownloadManager", "Error: " + e);
>   }
>  } 
> ```

Also keep in mind that you specify the below permissions in your manifest file.

> ```
> <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
>  <uses-permission android:name="android.permission.INTERNET"></uses-permission>
>  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
>  <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission> 
> ```

I hope it will help you.

Thanks

# extjs - Sencha Touch - 嵌套列表 - 刷新列表项。（使用 getItemTextTpl 设置模板）

> ID：15088632
> 
> 赞同：1
> 
> 时间：2013-02-26T12:02:10.943
> 
> 标签：extjs, sencha-touch, nested-lists, sencha-touch-2.1

我使用 getItemTextTpl 有一个带有模板的嵌套列表。模板很简单，它检查标志，如果为真，它会在列表项上显示一个按钮。如果为假，则不显示任何按钮。

当我在列表项上按下按钮（这是一个删除按钮）时，我想刷新该列表项以不显示按钮。要更改按钮，我必须向上导航两个级别并返回以更新列表项。

我的问题是让列表项刷新/更新。可以强制模板再次检查列表项等吗？我可以获得触发事件的按钮。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:06:54.540

对于显示层：

为什么不直接使用 css 来应用/更改删除按钮的类来隐藏它呢？那么你不必刷新任何东西。

然后您可以在代码中以编程方式设置值，或发送到服务器以确保在视图在另一点重新加载时设置状态。

# c - 如何将 KdPrint 定义为 DbgPrint？

> ID：15088637
> 
> 赞同：0
> 
> 时间：2013-02-26T12:02:18.847
> 
> 标签：c, debugging, macros, c-preprocessor

我正在尝试编写用于通用调试的宏。如何将 KdPrint 定义为 DbgPrint？

我正在尝试这样

```
#define KdPrint(x) do{DbgPrint x;}while(0) 
```

在驱动程序代码中

```
KdPrint(("Driver entry")); // normal syntax for KdPrint.

DbgPrint("Driver entry"); // normal syntax for DbgPrint. 
```

如果我编译我收到错误 4013：

> 'KdPrint' 未定义；假设 extern 返回 int"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:44:42.100

```
#define KdPrint(x) do { DbgPrint(x); } while (0)
...
KdPrint("Driver entry"); 
```

# javascript - 通过回调从移动设备播放 HTML5 音频

> ID：15088638
> 
> 赞同：2
> 
> 时间：2013-02-26T12:02:26.407
> 
> 标签：javascript, ajax, html, audio, mobile

我希望能够使用 javascript 和 HTML5 元素从回调函数播放音频文件。根据我的阅读，大多数移动设备播放 HTML5 音频的唯一方式是通过用户交互（即单击按钮等）。

我的情况略有不同。按钮单击事件使用回调函数进行 ajax 调用，并根据返回的结果，应该播放不同的声音。这在桌面浏览器上运行良好，但是 android 和 iPad 似乎都不支持这一点。

有谁知道任何解决方法？

示例代码显示如何初始化音频对象等：

```
 var sound = new Audio('Sample.wav');
    var sound2 = new Audio('Sample2.wav');

/// Button events etc here, stock standard stuff

    function MyCallBack(e)
    {
      if(e.someValue)
       sound.play();
      else
       sound2.play();
    } 
```

**编辑：** 我已经使用下面概述的类似解决方案解决了这个问题。在我播放的用户事件中，我立即暂停了声音。回调返回后，我继续播放适当的声音

```
 hit.play(); hit.pause(); fail.play(); fail.pause(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-25T17:01:12.887

您可以尝试将两种声音放入一个音频文件中，然后使用回调排队并在正确的位置播放。

走这条路，您可以在初始用户单击时开始播放声音（开头为空白），然后立即暂停它（从播放事件确保它开始播放）。回调进来后，将 currentTime 设置为要播放的音轨上的位置并开始播放。以这种方式播放应该可以工作，因为*初始*播放调用发生在用户操作上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-26T19:25:46.837

为了扩展 Derek 的答案，这里是 jQuery 代码，可以为给定的`audio`元素实现这一点：

```
<audio preload="auto" id="yourHTMLaudio">
    <source src="/sounds/youraudio.ogg" type="audio/ogg">
    <source src="/sounds/youraudio.mp3" type="audio/mpeg">
    <source src="/sounds/youraudio.wav" type="audio/wav">
</audio> 
```

在按钮的`click`事件中，调用以下命令：

```
$("#yourbutton").on("click", function() {
    ...
    $("#yourHTMLaudio").trigger('play').trigger('pause').prop("currentTime", 0);
    ... 
```

然后在您的 Ajax`done()`函数中，您可以像往常一样播放它：

```
 ...
    $.ajax({
        ...
    }).done(function(msg) {
        ...
        $("#yourHTMLaudio").trigger('play');
        ...
    });
    ...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:31:46.857

现在几乎所有的智能手机浏览器都支持 HTML5 音频标签

尝试

```
 <audio autoplay="autoplay" controls="controls">  
       <source src="music.ogg" />  
       <source src="music.mp3" />  
    </audio> 
```

# liferay - Xuggler 3.4.1012 for windows with JVM 64bit

> ID：15088639
> 
> 赞同：0
> 
> 时间：2013-02-26T12:02:27.313
> 
> 标签：liferay, liferay-6

[我从这里http://www.liferay.com/community/wiki/-/wiki/Main/Preview+Generation](http://www.liferay.com/community/wiki/-/wiki/Main/Preview+Generation)为 jvm 32bit 安装了 xuggler ，它工作得很好，但现在我需要这个 64 位 jvm，有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:52:55.947

您可以让 Liferay 为您下载版本：转到 ControlPanel/Server/Server Administration/External Services（至少在 tomcat 上这是最简单的方法，我不确定其他平台）

那里的平台明确列出了win64，您可以合理地确定获得受支持的版本。

更新：我在 portal.properties 中找到了这个。您可以从这里构造[URL](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/xuggle-xuggler-arch-x86_64-w64-mingw32.jar)：

```
#
# Set the properties used to install Xuggler at runtime.
#
xuggler.jar.file[32-linux]=xuggle-xuggler-arch-i686-pc-linux-gnu.jar
xuggler.jar.file[32-mac]=xuggle-xuggler-arch-i386-xuggle-darwin11.jar
xuggler.jar.file[32-win]=xuggle-xuggler-arch-i686-w64-mingw32.jar
xuggler.jar.file[64-linux]=xuggle-xuggler-arch-x86_64-pc-linux-gnu.jar
xuggler.jar.file[64-mac]=xuggle-xuggler-arch-x86_64-xuggle-darwin11.jar
xuggler.jar.file[64-win]=xuggle-xuggler-arch-x86_64-w64-mingw32.jar
xuggler.jar.name[32-linux]=Linux 32-bit JVM (with GNU libc v6)
xuggler.jar.name[32-mac]=Mac OS X 10.7 32-bit JVM
xuggler.jar.name[32-win]=Windows 32-bit JVM
xuggler.jar.name[64-linux]=Linux 64-bit JVM (with GNU libc v6)
xuggler.jar.name[64-mac]=Mac OS X 10.7 64-bit JVM
xuggler.jar.name[64-win]=Windows 64-bit JVM
xuggler.jar.options=32-linux,32-mac,32-win,64-linux,64-mac,64-win
xuggler.jar.url=http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/ 
```

# objective-c - 使用实例方法而不是 init

> ID：15088643
> 
> 赞同：0
> 
> 时间：2013-02-26T12:02:35.413
> 
> 标签：objective-c, initialization

我刚刚写了这一行：

```
BOOL directoryResult = [[NSFileManager alloc]
createDirectoryAtURL:[[NSURL alloc]
initFileURLWithPath:[self.documentsPath
stringByAppendingFormat:@"/level%d", levelCount] isDirectory:YES]
withIntermediateDirectories:NO attributes:nil error:nil];
NSLog(@"BOOL: %d", directoryResult); 
```

我有两个问题：这种方法怎么可能正常工作？在`[NSFileManager alloc]`我不使用`init`.

为什么编译器不抱怨？里面有init`createDirectoryAtURL`吗？这是一种好的编程方式吗？

`createDirectoryAtURL`其次，在我正在`NSURL`就地创建的 URL 参数中

```
[[NSURL alloc] initFileURLWithPath:[self.documentsPath stringByAppendingFormat:@"/level%d", levelCount] isDirectory:YES] 
```

与上述相同的问题：这是一种很好的编程方式还是应该在该行之前创建这样的对象并将对象放在这里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:14:46.560

`[NSFileManager defaultManager]`返回文件管理器的单例实例，使用它来执行任务。这在 Cococa 中是很常见的做法。我不确定你的代码为什么能正常工作，我只能猜测这个特定的方法不使用任何内部变量，所以即使没有 init 也可以调用它（尽管你永远不应该这样做）。

至于`NSURL`构造，答案取决于编译选项。你用ARC吗？如果答案是“是”，则您的代码有效，否则会导致内存泄漏。总的来说，最好是创建一个对象并`autorelease`显式调用（非 ARC 应用程序），或者使用`[NSURL fileURLWithPath:path]`.

另外，不要将其视为冒犯，但我相信您在*错误的地方*问这个问题。基本的内存管理问题应该问一本好书，比如 Aaron Hillegass 的“Mac OS X 的 Cocoa 编程”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:17:16.480

不保证在没有初始化的情况下创建的对象会正常工作。所以你应该初始化对象。文档示例：

```
BOOL isDir=NO;
NSArray *subpaths;
NSString *fontPath = @"/System/Library/Fonts";
NSFileManager *fileManager = [[NSFileManager alloc] init];
if ([fileManager fileExistsAtPath:fontPath isDirectory:&isDir] && isDir)
    subpaths = [fileManager subpathsAtPath:fontPath];
[fileManager release]; 
```

NSFileManager 也有一个共享管理器（已经创建和初始化的对象）

```
NSFileManager* fileManager = [NSFileManager defaultManager]; 
```

但是文档中有一个警告：

此方法始终返回相同的文件管理器对象。如果您计划使用文件管理器的委托来接收有关基于文件的操作完成的通知，您应该创建一个新的 NSFileManager 实例（使用 init 方法）而不是使用共享对象。

# java - 发生多个输入错误时

> ID：15088658
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:03:02.420
> 
> 标签：java, hadoop, mapreduce

我收到此错误：方法：

```
addInputPath(Job, Path, Class<? extends InputFormat>, Class<? extends Mapper>) 
```

在类型`MultipleInputs`中不适用于参数`(JobConf, Path, Class<TextInputFormat>, Class<App.MapClass>)`

对于以下代码：

```
MultipleInputs.addInputPath(job, in, TextInputFormat.class, MapClass.class);
/* ------------------------ */

package hadoop.mi4;

/**
 * Hello world!
 *
 */
import java.io.IOException;
import java.util.StringTokenizer;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.IntWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.TextInputFormat;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.MultipleInputs;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;

public class App {

    public static class TokenizerMapper extends Mapper<Object, Text, Text, IntWritable>{

        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();

        public void map(Object key, Text value, Context context ) throws IOException, InterruptedException {
            StringTokenizer itr = new StringTokenizer(value.toString());
            while (itr.hasMoreTokens()) {
                word.set(itr.nextToken());
                context.write(word, one);
            }
        }
    }

    public static class TokenizerMapper1 extends Mapper<Object, Text, Text, IntWritable>{

        private final static IntWritable one = new IntWritable(1);
        private Text word = new Text();

        public void map(Object key, Text value, Context context) throws IOException, InterruptedException {
            StringTokenizer itr = new StringTokenizer(value.toString());
            while (itr.hasMoreTokens()) {
                word.set(itr.nextToken());
                context.write(word, one);
            }
        }
    }

    public static class IntSumReducer extends Reducer<Text,IntWritable,Text,IntWritable> {
        private IntWritable result = new IntWritable();

        public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {
            int sum = 0;
            for (IntWritable val : values) {
                sum += val.get();
            }
            result.set(sum);
            context.write(key, result);
        }
    }

    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        String[] otherArgs = new GenericOptionsParser(conf, args).getRemainingArgs();
        if (otherArgs.length != 2) {
            System.err.println("Usage: App <in> <out>");
            System.exit(2);
         }
         Job job = new Job(conf, "word count");
         job.setJarByClass(App.class);
         job.setMapperClass(TokenizerMapper.class);
         job.setCombinerClass(IntSumReducer.class);
         job.setReducerClass(IntSumReducer.class);
         job.setOutputKeyClass(Text.class);
         job.setOutputValueClass(IntWritable.class);
         //FileInputFormat.addInputPath(job, new Path(otherArgs[0]));
         MultipleInputs.addInputPath(job, new Path(otherArgs[0]), TextInputFormat.class, TokenizerMapper.class);
         MultipleInputs.addInputPath(job, new Path(otherArgs[1]), TextInputFormat.class, TokenizerMapper1.class);
         FileOutputFormat.setOutputPath(job, new Path(otherArgs[2]));
         System.exit(job.waitForCompletion(true) ? 0 : 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:22:43.350

它不起作用，因为您已经将`mapred`与`mapreduce`. 替换以下导入

```
import org.apache.hadoop.mapred.TextInputFormat 
```

和

```
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:23:27.823

看起来您的`job`变量是类型`JobConf`，而它应该是`Job`. 你应该试试

```
MultipleInputs.addInputPath(new Job(job), in, TextInputFormat.class, MapClass.class); 
```

您还应该检查`MapClass`extends `Mapper`。

# yii - 多次使用 Yii::app()->db 的开销？

> ID：15088664
> 
> 赞同：2
> 
> 时间：2013-02-26T12:03:13.923
> 
> 标签：yii

如果我必须连续执行多个查询，这样做是否更好：

```
$connection = Yii::app()->db; 
```

一次...然后继续使用 $connection，或者如果我有多个这样的功能是否会产生开销：

```
function mainFunction() {
  $dbResult1 = dbresult1();
  $dbResult2 = dbresult2();    
  $dbResult2 = dbresult3();
}

function dbresult1() {
   $connection = Yii::app()->db;
   // do stuff
   return $result;
}

function dbresult2() {
   $connection = Yii::app()->db;
   // do stuff
   return $result;
}

function dbresult3() {
   $connection = Yii::app()->db;
   // do stuff
   return $result;
} 
```

这样做会更好：

```
function mainFunction() {
  $connection = Yii::app()->db;
  // do stuff with $connection for $dbResult1
  // do stuff with $connection for $dbResult2
  // do stuff with $connection for $dbResult3
} 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:22:17.007

您可以跟踪源代码以查看调用时会发生什么`Yii::app()->db`：

`Yii::app()`返回 的静态`app`属性`YiiBase`。[您可以在此处](https://github.com/yiisoft/yii/blob/1.1.13/framework/YiiBase.php#L132)查看源代码。

```
public static function app()
{
    return self::$_app;
} 
```

`Yii::app()->db`这里变得更有趣了，因为有些东西被查到了。[您可以在此处](https://github.com/yiisoft/yii/blob/1.1.13/framework/base/CApplication.php#L436)查看源代码。

```
public function getDb()
{
    return $this->getComponent('db');
} 
```

`getComponent()`是你在[这里](https://github.com/yiisoft/yii/blob/1.1.13/framework/base/CModule.php#L375)`CModule`找到源代码的一种方法。

```
public function getComponent($id,$createIfNull=true)
{
    if(isset($this->_components[$id]))
        return $this->_components[$id];
    elseif(isset($this->_componentConfig[$id]) && $createIfNull)
    {
        $config=$this->_componentConfig[$id];
        if(!isset($config['enabled']) || $config['enabled'])
        {
            Yii::trace("Loading \"$id\" application component",'system.CModule');
            unset($config['enabled']);
            $component=Yii::createComponent($config);
            $component->init();
            return $this->_components[$id]=$component;
        }
    }
} 
```

如您所见`Yii::app()->db`，会产生一些方法调用和数组查找。如果性能非常关键，您可能应该缓存数据库实例。否则，我的目标是编写干净易读的代码，而不会关心这样的小调整。

# php - 使用 php 生成图像缩略图 - 不会耗尽内存

> ID：15088666
> 
> 赞同：1
> 
> 时间：2013-02-26T12:03:15.230
> 
> 标签：php, gd, image-resizing

我目前正在使用 php gd 实现来调整不断耗尽内存的图像的大小 - 相当快。我想问题出在 php 函数上，比如 imagecreatefromstring 等。

是否有一个简单的实现来调整不使用此功能的图像大小，所以我不必增加我的 php.ini 内存限制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:34:19.150

这是给你的PHP函数

```
 function make_thumb($src, $dest, $desired_width,$desired_h) {

  /* read the source image */
  $source_image = imagecreatefromjpeg($src);
  $width = imagesx($source_image);
  $height = imagesy($source_image);

  $desired_height = $desired_h;

  /* create a new, "virtual" image */
  $virtual_image = imagecreatetruecolor($desired_width, $desired_height);

  /* copy source image at a resized size */
  imagecopyresampled($virtual_image, $source_image, 0, 0, 0, 0, $desired_width, $desired_height, $width, $height);

  /* create the physical thumbnail image to its destination */
  imagejpeg($virtual_image, $dest);
} 
```

来源：davidwalsh.name/create-image-thumbnail-php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:13:29.480

GD 不会使用那么多内存，因此您的代码中还有其他问题。

如果您调整多个图像的大小并且不调用`imagedestroy`新创建的图像，则会在内存泄漏中运行。

# javascript - 您将如何使这些按钮起作用？

> ID：15088667
> 
> 赞同：0
> 
> 时间：2013-02-26T12:03:21.297
> 
> 标签：javascript, jquery, html

我的问题： [http ://www.danieldoktor.dk/test2/test2.html](http://www.danieldoktor.dk/test2/test2.html)

当您按下任何一个设置按钮时，它都会触发两个框。

我想要一个整体代码来控制按钮和上下滑动框，其代码与此类似，它单独控制每个框，而不是同时控制它们：

```
$(".someBtnClass").click(function () { 
        if(!$(".someBoxClass").hasClass('header-down')){
            $(".someBoxClass").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
        }
        else{
            $(".someBoxClass").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
        }

    }); 

    $(document).click(function() {
        if($(".someBoxClass").hasClass('header-down')){
            $(".someBoxClass").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }
    });

    $(".someBoxClass").click(function(e) {
        e.stopPropagation(); // This is the preferred method.
               // This should not be used unless you do not want
                             // any click events registering inside the div
    }); 
```

这可以通过课堂完成吗？

如果没有，怎么做，这样的盒子，以后可以用php加载吗？

编辑

我的标记：HTML

```
<div class="lists">
        <header class="box_header" id="box1">
            <h1>HEADER 1</h1>
            <div class="setting" id="btn1"></div>
            </header>
 </div>

 <div class="lists">
        <header class="box_header" id="box2">
            <h1>HEADER 2</h1>
            <div class="setting" id="btn2"></div>
            </header>
 </div> 
```

jQuery

```
$(".setting").each(function(){
    $(this).on("click", function(){if(!$(".box_header").hasClass('header-down')){
        $(".box_header").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }});
});

$(document).click(function() {
    if($(".box_header").hasClass('header-down')){
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
}
});

$(".box_header").click(function(e) {
    e.stopPropagation(); // This is the preferred method.
           // This should not be used unless you do not want
                         // any click events registering inside the div
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:17:45.447

你的选择器正在抓住两者。您需要告诉它只抓取父级并为其设置动画，而不是抓取“box-header”类并为其设置动画

Javascript：

```
$('.setting').on('click', function() {
    var parent = $(this).parent();
    if (!parent.hasClass('header-down')) {
        parent.stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    } else {
        parent.stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }
}); 
```

JSFiddle：http: [//jsfiddle.net/jeffshaver/kHV8V/1/](http://jsfiddle.net/jeffshaver/kHV8V/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:21:52.623

您应该使用 ID 而不是类。

```
$("#box1").click(function () { 

$("#box2").click(function () { 
```

我认为这就是你想要的：http: [//jsfiddle.net/MTcvu/](http://jsfiddle.net/MTcvu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:12:51.580

您的标记是这样的（您应该将此添加到您的问题中）

```
<header id="box1" class="box_header">
   <h1>HEADER 1</h1>
   <div id="btn1" class="setting"></div>
</header> 
```

对于每个盒子。因此，如果您单击`.setting`只想为`.box_header`正确设置按钮的（父级）设置动画，我想？

```
$(".setting").on("click", function(){
   if(!$(this).parent().hasClass('header-down')){
      $(this).parent().stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down');
   } else{
      $(this).parent().stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
   }
}); 
```

});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:09:11.200

在不知道你的标记的情况下，你可以尝试这样的事情：

```
var box = $(this).parents("div.parent_class").find('.someBoxClass'); 
```

然后用 box 替换 $('.someBoxClass')

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:14:07.127

你的 jQuery 代码的修改版本

```
// widget 1

 $("#btn1").each(function(){
    $(this).on("click", function(){if(!$(".box_header").hasClass('header-down')){
        $("#box1").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }});
});

 $("#btn2").each(function(){
    $(this).on("click", function(){if(!$(".box_header").hasClass('header-down')){
        $("#box2").stop().animate({height:'100px'},{queue:false, duration:600, easing: 'linear'}).addClass('header-down'); 
    }
    else{
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
    }});
});

$(document).click(function() {
    if($(".box_header").hasClass('header-down')){
        $(".box_header").stop().animate({height:'30px'},{queue:false, duration:600, easing: 'linear'}).removeClass('header-down');
}
});

$(".box_header").click(function(e) {
    e.stopPropagation(); // This is the preferred method.
           // This should not be used unless you do not want
                         // any click events registering inside the div
}); 
```

[演示](http://jsbin.com/evexif/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T12:18:28.787

点击事件应该使用设置按钮的“ID”而不是css类注册，因为它将适用于所有匹配的元素。创建一个传递该特定元素的函数并将您的 $(".someBoxClass") 替换为 $(element)。例如，

```
$('#btn1').click(function(){animate(this)});

function animate(element){
$(element).stop().....
} 
```

# ruby-on-rails - rails 3 包括来自联合表的字段

> ID：15088670
> 
> 赞同：0
> 
> 时间：2013-02-26T12:03:34.517
> 
> 标签：ruby-on-rails, select, join, attributes

我有以下结构：

数据库：

```
create_table :recipes do |t|
  t.string :name
  t.string :categoryname
end

create_table :ingredients do |t|
  t.string :name
  t.string :categoryname
  t.string :defaultunit
  t.integer :price
end

create_table :recipeingredients do |t|
  t.integer :recipe_id
  t.integer :ingredient_id
  t.integer :quantity
  t.string :unit
end 
```

楷模：

```
class Ingredient < ActiveRecord::Base
   has_many :recipeingredients
   has_many :recipes, :through=>:recipeingredients
end

class Recipe < ActiveRecord::Base
  has_many :recipeingredients
  has_many :ingredients, :through => :recipeingredients
end

class Recipeingredient < ActiveRecord::Base
  belongs_to :recipe
  belongs_to :ingredient
end 
```

`irb(main):337:0* r=Recipe.find(1) Recipe Load (0.5ms) SELECT "recipes".* FROM "recipes" WHERE "recipes"."id" = ? LIMIT 1 [["id", 1]] => #<Recipe id: 1, name: "Tiramisu", categoryname: "édesség", created_at: "2013-02-26 09:31:55", updated_at: "2013-02-26 09: 31:55">`

`irb(main):338:0> r.ingredients Ingredient Load (0.5ms) SELECT "ingredients".* FROM "ingredients" INNER JOIN "recipeingredients" ON "ingredients"."id" = "recipeingredients"."ingredient_id" WHERE "recipeingredients"."recipe_id" = 1 => [#<Ingredient id: 1, name: "mascarpone", categoryname: "tejtermék", defaultunit: "gr", price: 500, created_at: "2013-02-26 09:32:21", updated_at: "2013-02-26 09:32:21">]`

我想要实现的是能够在 r.ingredients 中访问 recipeingredients.quantity 和 recipeingredients.unit。

我相信它可以通过以某种方式更改查询来实现，以便它返回类似`SELECT * FROM "ingredients" INNER JOIN...`

我的目标是能够在视图中使用一个循环列出成分的数量和属性。

有没有办法做到这一点？到目前为止，我在论坛上找到的任何东西都没有起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:44:47.937

取决于你是偶尔还是一直想要它，也就是说，每次加载食谱时都要加载配料。如果这是您的情况，那么您应该在关联中定义它：

```
has_many :ingredients, :include => true ... 
```

如果您想在某些情况下专门加载成分，那么您需要按照上一个答案中的说明进行操作（被否决，但我不知道为什么。）：

```
Recipe.includes(:recipeingredients).first(5) 
```

检查 SQL 查询输出以可视化好处。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T12:29:41.397

这将一次性获取一个食谱和所有连接的成分和食谱成分：

```
r = Recipe.includes(:ingredients, :recipeingredients).find(1) 
```

之后，您可以像这样循环（HAML 视图）：

```
- r.recipeingredients.each do |ri|
  Ingredient:
  = ri.ingredient.name
  quantity:
  = ri.quantity 
```

# ios - 在 iPad 中具有 10000 条记录的 Sqlite 性能

> ID：15088673
> 
> 赞同：0
> 
> 时间：2013-02-26T12:03:39.173
> 
> 标签：ios, ipad, sqlite, fmdb

我正在`FMDB wrapper`为我的应用程序使用类`iPad`。我有`table`其中包含近 10000 条记录。每条记录有 140 个字段。我`Modal class`用来存储检索到的值，例如，

```
 NSString *query = [NSString stringWithFormat:@"select * from table"];
 FMResultSet *results = [db executeQuery:query];
 while([results next]) {
    ModalClass *modal = [[ModalClass alloc] init];
    [modal setField1:value1];
    [modal setField2:value2];
    [modal setField3:value3];
    [modal setField4:value4];
    .
    .
    .
    .
    .
    [modal setField139:value139];
    [modal setField140:value140];

    [array addObject:modal];
 } 
```

我使用了一些我知道的选项`performSelectorOnMainThread`，`dispatch_async()`以及其他一些多线程技术。但是没有什么能帮助我提高效率。

在**模拟器**中，需要**5 秒**。但是当涉及到**设备**时，它需要将近**20 秒**。

数据库由客户提供，因此我无法更改或修改任何表。

谁能帮我提高效率。等待**20秒**是非常恶心的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:26:09.097

您以错误的方式处理问题。将`UITableView`有一个[数据源](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)被调用以允许您填充单元格。使用这些方法仅加载您需要的行数据，而不是预先加载所有 10,000 行数据。

我通常使用一种简单的缓存方法来避免为 tableview 中的不同单元格一遍又一遍地重新加载同一行，但是您最初不需要担心这一点（如果您觉得数据库也被击中，请稍后再担心难的）。

# java - 无法从订单中获取项目，Magento

> ID：15088695
> 
> 赞同：0
> 
> 时间：2013-02-26T12:04:21.700
> 
> 标签：java, api, magento

我正在编写一个`Magento API`使用**magja**库的 Java 连接器。

当我从我的测试商店中检索时`Orders`，我可以获得除. 尽管订单中有项目，但列表始终为空。`id``total_amount``OrderItems`

这是代码：

```
List<Order> orders = RemoteServiceFactory.getOrderRemoteService().list();
for (Order order : orders) {
    List<OrderItem> items = order.getItems();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:34:50.897

我终于解决了这个问题：

```
List<Order> orders = RemoteServiceFactory.getOrderRemoteService().list();
for (Order order : orders) {
    Order orderInfo = RemoteServiceFactory.getOrderRemoteService().getById(order.getId());
    List<OrderItem> items = orderInfo.getItems();
} 
```

发生的事情是，虽然方法是类的一部分，但在方法检索`Order`的列表中并没有真正的项目。`orders``getOrderRemoteService().list();``getItems()``Order`

实际上，只有在执行请求以通过其 ID 获取单个订单时才会填充项目列表。

订单列表和订单信息的 Magento API 参考：

[http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.list.html](http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.list.html)

[http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.info.html](http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.info.html)

# annotations - 带有注释的学说模型的默认排序

> ID：15088699
> 
> 赞同：4
> 
> 时间：2013-02-26T12:04:28.210
> 
> 标签：annotations, doctrine-orm

在[Doctrine Model](https://stackoverflow.com/questions/4810868/default-sort-attribute-for-doctrine-model)的默认排序属性中有问题，`.yml`建议为集合值关联定义默认排序。

我希望通过默认排序获取我的模型，如下所示：

```
Foo:
    columns:
    ...
    options:
        orderBy: bar DESC 
```

这个基于 YAML 的设置的注解等价物是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T12:40:42.723

**编辑：**默认情况下这是不可能的。从存储库中获取的实体是通过提供的排序标准获取的：

```
$entities = $entityRepository->findBy(array(), array('field' => 'ASC')); 
```

这，[DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)和[Criteria API](https://gist.github.com/Ocramius/3368674)是当前获取具有给定排序标准的实体的方法。

“ [Doctrine Model 的默认排序属性](https://stackoverflow.com/questions/4810868/default-sort-attribute-for-doctrine-model)”中的问题是关于集合值关联的排序，这与直接从存储库中获取实体无关。

对于这些关联，“ [Doctrine Model 的默认排序属性](https://stackoverflow.com/questions/4810868/default-sort-attribute-for-doctrine-model)”的注释等效项如下（原始答案）：

在 Doctrine 2 ORM 的[官方注释文档中](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#orderby)，集合值关联的默认排序条件的注释[`@OrderBy({"field" = "ASC", "otherField" = "DESC"})`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/Mapping/OrderBy.php)。

以下是您将如何使用它：

```
/**
 * @ORM\OneToMany(targetEntity="Users")
 * @ORM\OrderBy({"username" = "ASC"})
 */
protected $users; 
```

# java - Not able to enter the data in numeric field through Webdriver using Java

> ID：15088701
> 
> 赞同：-2
> 
> 时间：2013-02-26T12:04:39.963
> 
> 标签：java, webdriver, selenium-webdriver

I am not able to enter the data in numeric field, it is giving the error message as "Element must not be hidden, disabled or read-only".

Please find the code below:

```
driver.findElement(By.name(OR.getProperty("txtDealerName_ID"))).sendKeys(AccName+"_"+r[1]);
driver.findElement(By.name(OR.getProperty("txtDealerAddress_ID"))).sendKeys("126 - City Cross");
String dealZipID = OR.getProperty("txtDealerZip_ID"); 
WebElement dealZipInput = driver.findElement(By.id(dealZipID));
dealZipInput.clear(); 
dealZipInput.sendKeys(String.valueOf(79081));
dealZipInput = driver.findElement(By.id(dealZipID));*/
new Actions(driver).sendKeys(driver.findElement(By.id(OR.getProperty("txtDealerZip_ID"))), "").perform();
Thread.sleep(3000); 
```

Please find the error message displayed below:

```
FAILED: Dealers
org.openqa.selenium.InvalidElementStateException: Element must not be hidden, disabled or read-only (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 63 milliseconds
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:38'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_15'
Driver info: driver.version: RemoteWebDriver
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:175)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:128)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:459)
at org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:245)
at org.openqa.selenium.remote.RemoteWebElement.clear(RemoteWebElement.java:112)
at com.ode.Admin.Dealer_Admin.Dealers(Dealer_Admin.java:114)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
at org.testng.TestRunner.privateRun(TestRunner.java:767)
at org.testng.TestRunner.run(TestRunner.java:617)
at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
at org.testng.SuiteRunner.run(SuiteRunner.java:240)
at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
at org.testng.TestNG.run(TestNG.java:1036)
at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

Relevant HTML Code:

```
<table id="Table2" width="100%" height="27" cellspacing="0" cellpadding="0" border="0">
<tbody>
<tr>
<td background="Common/Images/table2_01.gif">  </td>
<td width="98%" bgcolor="#f3f9fd">
<table width="100%" cellspacing="1" cellpadding="1" border="0">
<tbody>
<tr>
<td>
<table width="95%" cellspacing="0" cellpadding="4" border="0">
<tbody>
<tr width="50%">
<tr width="55%">
<tr>
<td>
<table class="text" width="58%" cellspacing="0" cellpadding="1" border="0">
<tbody>
<tr>
<tr>
<td valign="baseline">
<input id="ctl00_MasterPlaceHolder_TxtZip" type="hidden" value=""    name="ctl00$MasterPlaceHolder$TxtZip">
<input id="ctl00_MasterPlaceHolder_TxtZip_p" type="hidden"   name="ctl00_MasterPlaceHolder_TxtZip_p" value="">
<input id="igtxtctl00_MasterPlaceHolder_TxtZip" class="form" type="text" onkeypress="javascript:IsNumeric()" style="" editid="ctl00_MasterPlaceHolder_TxtZip">
</td>
<td valign="top">
<td width="30%" valign="baseline">
<td valign="top">
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<tr>
</tbody>
</table> 
```

Please help me out in this issues. Help will be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T15:28:12.973

尝试这个

```
WebElement dealZipInput = driver.findElement(By.id(dealZipID));
dealZipInput.click(); 
dealZipInput.sendKeys(String.valueOf(79081));
dealZipInput.sendKeys(Keys.TAB); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T16:23:27.203

您需要先启用该元素，然后再在其中输入数据。**WebDriver**不允许在隐藏元素中输入数据。

# python - Google Auth proxy for subdomains

> ID：15088702
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:04:39.970
> 
> 标签：python, web-services, apache, proxy, google-oauth

Since Google Auth does not support wildcards in its redirect URL's, I am trying to create a proxy solution for Google Authentication. I have read the following two posts but need some more clarifications

1.  [How to deal with arbitrary amount of redirect URIs?](https://stackoverflow.com/questions/14456821/how-to-deal-with-arbitrary-amount-of-redirect-uris/14467305#14467305)
2.  [Subdomain in Google Console Redirect URIs](https://stackoverflow.com/questions/13652062/subdomain-in-google-console-redirect-uris/13769166#13769166)

Primarily I have one domain say www.abcxyz.com
I need to have the Google Auth mechanism work for number of subdomains say:
alpla.abcxyz.com
beta.abcxyz.com
and so on for dynamically created subdomains

Following is something I want to try:

1.  I will have only 1 redirect URL in the client secret json file say google.abcxyz.com
2.  When creating a redirect url I pass the name of the subdomain 'alpha' in the state parameter
3.  Once auth code is sent from google to google.abcxyz.com my proxy code reads the state parameter and forwards the request to alpha.abcxyz.com. This domain will then exchange the auth code for access token and refresh token.

Will this kind of mechanism work or do I need to do something more?
Will access tokens work from the subdomain?
What happens when access token expires?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:03:03.173

我最初认为这个问题将成为我的系统自动化的一大障碍，但看起来有一个简单的解决方法。

1.  重定向 url 应包含主域，并且应同时出现在 Google 客户端机密和 Google API 控制台中。
2.  传递状态中的子域名。
3.  在主域 Apache Config 中读取查询字符串并相应地重定向。（阅读此[博客](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)以了解如何根据查询字符串进行重定向）。

# intellij-idea - How can I use Intellij Structural Search to find all methods that use two named classes?

> ID：15088703
> 
> 赞同：10
> 
> 时间：2013-02-26T12:04:43.027
> 
> 标签：intellij-idea, structural-search

Say I have two Java classes, TradeType and InstrumentType. I know that somewhere in my codebase there is a method that maps from TradeType to InstrumentType.

How can I use Structural Search in Intellij to say

"find me all methods that have a single parameter of type TradeType and which return InstrumentType"

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-26T13:33:18.303

Search template:

```
class $Class$ { 
    InstrumentType $MethodName$(TradeType $Parameter$);
} 
```

Then click `Edit variables...`, and set the following for the `MethodName` variable:

*   Occurrences count: Unlimited
*   This variable is target of the search

Also pay attention to what the scope of the search is.

# r - Use an Amelia object as input for a Mokken Scale Analysis

> ID：15088707
> 
> 赞同：0
> 
> 时间：2013-02-26T12:05:01.800
> 
> 标签：r, dataframe

I have run multiple imputations using R's Amelia package and would like to use the imputed dataset to analyse Mokken Scale Analysis. But mokken requires the object to be a data frame. I tried as.data.frame(x) and as.matrix(x) but it says that it cannot coerce class amelia into a data frame or matrix.

```
 australia93=as.data.frame(australia93)
 Error in as.data.frame.default(australia93) :
 cannot coerce class '"amelia"' into a data.frame

 coefH(australia93)
 Error in check.data(X) : Data are not matrix or data.frame 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:18:35.723

该错误意味着 R 不知道如何将`amelia`对象转换为 a `data.frame`。即使您成功地将`amelia`对象放入 data.frame，Mokken 比例分析例程也可能希望其数据采用非常特定的形式。您需要查看`amelia`提供什么，以及 Mokken 需要什么，并提供它们之间的翻译。

如果没有更多信息（尤其是可重现的示例），很难为您提供更多帮助。

# android - Android应用演示记录器应用？

> ID：15088709
> 
> 赞同：4
> 
> 时间：2013-02-26T12:05:06.887
> 
> 标签：android, video, recorder

这不是真正的开发人员问题，但不确定在哪里可以问。我快要为我的 android 应用制作视频教程了。在 Windows 上，我使用了一个非常酷的叫做“demobuilder”的东西，它会在你演示你的应用程序时记录屏幕（带画外音），并生成一个 flash 视频。

我一直在为 android 寻找类似的东西，但没有找到任何可以将屏幕捕捉到视频的东西。

有人可以推荐一个有用的应用程序吗？

另一种方法是将网络摄像头指向我的平板电脑，我认为这有点不专业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:27:26.113

前段时间我遇到了同样的问题。就像迈克尔说的那样，很难从 Android（或模拟器）以全帧速率捕获。

我最终使用[Screencast for android](https://play.google.com/store/apps/details?id=com.ms.screencast)。但是，我现在可能会做的是得到类似[Elgato](https://rads.stackoverflow.com/amzn/click/com/B00840353W)的东西。您通过 HDMI 将设备连接到该盒子，它允许您记录 HDMI 输出信号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T08:05:01.583

另一种方法是为[Android-x86](http://www.android-x86.org/)构建您的应用程序，这样它就可以在您的计算机上运行而无需仿真。那时，您常用的屏幕投射工具都可以正常工作。

# symfony - 布尔逻辑不像我在树枝中所期望的那样工作

> ID：15088710
> 
> 赞同：5
> 
> 时间：2013-02-26T12:05:09.490
> 
> 标签：symfony, twig, boolean-logic, extends

```
 {{ dump(extend) }} 
```

结果：

```
 boolean false 
```

当我想做这个时：

```
{% if extend is true %}
    {% extends 'WelcomePageBundle:Default:welcome_page.html.twig' %}
{% endif %} 
```

它不起作用。为什么？

错误：

```
The test "false" does not exist in FOSUserBundle:ChangePassword:changePassword.html.twig at line 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T12:14:13.297

它必须是`{% if extend %}`- 因为`extend`已经是布尔值 - 或`{% if extend == true %}`. `is`用于[测试](http://twig.sensiolabs.org/doc/tests/index.html)；不是为了比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:06:49.610

您需要使用[`empty`](http://twig.sensiolabs.org/doc/tests/empty.html)测试：

> Test empty 检查变量是否为空（null、false、空数组或空字符串）。

```
{% if extend is not empty %}
    ...
{% endif %} 
```

查看官方 Twig 文档[中可用测试](http://twig.sensiolabs.org/doc/tests/index.html)和[逻辑运算符的列表。](http://twig.sensiolabs.org/doc/templates.html#logic)

# sql-server - Merge statement for stocks using three tables

> ID：15088716
> 
> 赞同：1
> 
> 时间：2013-02-26T12:05:28.477
> 
> 标签：sql-server, tsql, merge

Here is the SQL Query:

```
MERGE  tblProductsSold

USING tblOrders on tblOrders.OrderID = tblProductsSold.txtOrderID

WHEN NOT MATCHED THEN 

Insert ( txtOrderID, txtOrderdate, txtPartno, txtQty)  
values 
(SELECT tblItemsOnOrder.txtOrderID, 
 tblOrders.txtDateTime, 
 tblItemsOnOrder.txtPartNO, 
 tblItemsOnOrder.txtQTY
FROM tblOrders  INNER JOIN tblItemsOnOrder 
ON tblOrders.OrderID = tblItemsOnOrder.txtOrderID
WHERE tblOrders.txtIsConfirmed = '1'
)

OUTPUT $action ; 
```

Desired Result: need to import orders with `Products` that are not already in the `tblProductsSold` table

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T12:13:25.950

你不能像现在这样接近它。

该`MERGE`语句合并两个表 - 您在标题中定义的两个表 -**源**表和**目标**表。

现在，您将`tblOrders`其用作源和`tblProducts`目标。仅此一项似乎很奇怪-您正在尝试将**订单**合并到**产品**中？好像不太合适...

一旦你定义了你的源表和目标表 - 你统计比较源中的哪些行存在于目标中（或不存在）。如果源中的给定行不存在于目标中 - 那么您可以将其值插入目标表中。

但这**仅**适用于源表中的**直接列值！**你不能像你试图做的那样出去对其他表进行子查询！

所以我相信你**真正**应该做的是：

*   作为您的**来源**- 有一个视图列出在您的订单中找到的产品 -**产品**（不是订单本身）

*   然后将您的`Products`表与此视图进行比较 - 如果您的订单碰巧有任何产品不存在于基`Products`表中 - 插入它们。

所以你需要类似的东西：

```
MERGE  tblProductsSold AS Target
USING (SELECT tblItemsOnOrder.txtOrderID, tblOrders.txtDateTime, 
              tblItemsOnOrder.txtPartNO, tblItemsOnOrder.txtQty
       FROM tblOrders  
       INNER JOIN tblItemsOnOrder ON tblOrders.OrderID = tblItemsOnOrder.txtOrderID
       WHERE tblOrders.txtIsConfirmed = '1') AS Source
   ON Source.OrderID = Target.txtOrderID

WHEN NOT MATCHED THEN 
    INSERT (txtOrderID, txtOrderdate, txtPartno, txtQty)  
    VALUES (Source.OrderID, Source.txtDateTime, Source.txtPartNo, Source.txtQty)

OUTPUT $action ; 
```

# c# - How to show page numbering numerically?

> ID：15088720
> 
> 赞同：1
> 
> 时间：2013-02-26T12:05:45.647
> 
> 标签：c#, asp.net, gridview

Is there any way I can change page numbering using C# instead of using ASP.NET as happened here,

```
<asp:GridView ID="gvData" 
              runat="server" 
              AllowPaging=true 
              PageSize=5 
              PagerSettings-PageButtonCount=20 >
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:14:29.010

用这个..

```
gvData.pagesize=somenumber;
gvData.pagersettings.Mode=some mode; 
```

**pageisze**改变页面的大小和

**pagersettings.Mode**更改编号模式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:09:19.307

你是这个意思？

```
gvData.PageSize = 6;
gvData.PageCount = 10;
gvData.AllowPaging=true;
... 
```

# iphone - How to add multiple imageView with different shapes?

> ID：15088723
> 
> 赞同：2
> 
> 时间：2013-02-26T12:05:52.860
> 
> 标签：iphone, ios, uiimageview, uibezierpath

Currently I am working for a collage app. I want to draw collage frame and after that I need to add images from Camera roll or camera . I need the following type view ![enter image description here](../Images/d1d4dbe951231adf430c250aaec3d86e.png)

I have added 5 UIImageViews. To draw in shape I have added UIBezierPath like for imageview1

```
UIBezierPath *path1 = [[UIBezierPath alloc] init];

        [path1 moveToPoint:CGPointMake(0, 0)];
        [path1 addLineToPoint:CGPointMake(150, 0)];
        [path1 addLineToPoint:CGPointMake(0, 150)];
        [path1 addLineToPoint:CGPointMake(0, 0)];

 UIImageView *imgView1 = [[UIImageView alloc] initWithFrame:CGRectMake(140, 0, 160, 300)];
imgView1 . tag = 2;
imgView1 . userInteractionEnabled = YES;
imgView1\. backgroundColor = [UIColor greenColor];
CGPathRef borderPathRef2 = [path1 CGPath];
CAShapeLayer *borderShapeLayer2 = [[CAShapeLayer alloc] init];
[borderShapeLayer2 setPath:borderPathRef2];
[[imgView1 layer] setMask:borderShapeLayer2];
imgView1.layer.masksToBounds = YES;
[borderShapeLayer2 release];

[view1 addSubview:imgView1]; 
```

Like this I have done for all 5\. But after adding imageView5 touch is not detected on all other 4 views because its frame overlaping on the other four imageview.

So I am not getting how to design this . I need to add images to all imageviews by touch action.

Please help me. If someone have any idea about this then please share.

Thanks In Advance.

Following is the example 2 which is from **Insta Collage app**. ![enter image description here](../Images/6328a87cd2df2c93f699899bb596ad97.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:16:56.350

我已经通过覆盖 UIView 的 hitTest:withEvent: 方法解决了这个问题。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    //Getting View which is touched.
    UIView *testView = [super hitTest:point withEvent:event];

    //If this is self. and point hitted on Masked Layer(Which is hiding our UIView).
    if(testView == self && testView.layer.mask != nil && CGPathContainsPoint([(CAShapedLayer*)testView.layer.mask path], NULL, point, false))
    {
            //Then return nil. So Touch thinks that UIView has not clicked. and touch is passed to UIView which is behind this view. And again hitTest is performed on inner UIViews.
            testView = nil;
    }

    //Return nil. So touch thinks that UIView is not clicked.
    //Return self. So touch thinks self is clicked. and no more hitTest is performed.
    return testView;
} 
```

现在我为这个问题实现了一个名为 IQIrregularView 的控件。检查这个。

[https://github.com/hackiftekhar/IQIrregularView](https://github.com/hackiftekhar/IQIrregularView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:37:18.130

You should try random shaped buttons

you can find your solution in this custom class found on [GitHub](https://github.com/ole/OBShapedButton)

It worked for me and hope will work for you also....

Happy Coding...........

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T17:13:05.993

我还尝试`UIBezierPath`使用 Swift在 a 的路径中检测对 UIView 的触摸

我的情况是：

```
- UIView (Container)
  - UIImageView (masked with Triangle UIBezierPath)
  - UIImageView (masked with Triangle UIBezierPath) 
```

在我的容器中，我覆盖`hitTest`并返回被触摸的子视图，如下所示：

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {        
    for subview in subviews.reversed() {

        // ** convert the touch to the subview space:
        let convertedPoint = subview.convert(point, from: self)

        // ** if the subview layer mask exists I know that it has a UIBezierPath:
        if let layerShape = subview.layer.mask as? CAShapeLayer {
            if let shapePath = layerShape.path, shapePath.contains(convertedPoint) {
                // ** return the subview with the path that contains the converted point
                return subview
            }
        }
    }

    return nil
} 
```

希望有帮助！

# jquery - Dynamically calculate price onBlur() jquery from dynamic table

> ID：15088725
> 
> 赞同：1
> 
> 时间：2013-02-26T12:06:14.527
> 
> 标签：jquery, html

I have a table in which rows are added dynamically when needed by clicking "add item". When person adds a row and fill "Unit Price" in it and leaves the input area.The "Line Total" input box should fill automatically.As I know to use onBlur() but due to dynamically row adding how to update jquery code for each row.

I have following jquery code

```
<script type="text/javascript">
var i=1;
function AddRow()
{ 
    i++;
    $('#myTable').append('<tr><td><input type="text" name="sno'+i+'" value="'+i+'"></td><td><input type="text" name="description'+i+'"></td><td><input type="text" id="quantity'+i+'" name="quantity'+i+'"></td><td><input type="text" id="price'+i+'" name="price'+i+'"></td><td><input type="text" name="linetotal'+i+'"></td></tr>')
    $('#price'+i+'').blur(function() {
    alert('Handler for .blur('+i+') called.');
    });
}
</script> 
```

The example is [JSFiddle](http://jsfiddle.net/6UwfF/1/)

Please help Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:14:32.657

我已经分叉了你的小提琴并创建了一个[工作版本](http://jsfiddle.net/bWerH/)。

首先这里有一个问题，您忘记将事件侦听器添加到您将创建的第一行。

解决这个问题后，您只需将一个类添加到行总输入中，并使用调用者引用 ( `$(this)`) 在侦听器上过滤到它。

因此，您需要将代码更改为：

## HTML

```
<body>
  <center>
    <div class="header">
      <p class="left">
        VAT NO. 1234567
      </p>
      <p class="center">
        ABC Company
        <br>
        <span>
          Address Here
        </span>
      </p>
      <p class="right">
        TEL:123563636
        <br/>
        132345675643
        <br/>
      </p>
    </div>
    <br/>
    <hr/>
    <div class="content">
      <table id="myTable">
        <tr>
          <td width="20px">
            S.No.
          </td>
          <td width="400px">
            Description
          </td>
          <td width="50px">
            Quantity
          </td>
          <td>
            Unit Price
          </td>
          <td>
            Line Total
          </td>
        </tr>
        <table>
          <div class="button">
            <input type="button" id="btnAdd" onclick="AddRow()" value="Add Item"/>
          </div>
          <div>
          </center>
        </body> 
```

## JS

```
 var i=0;
function AddRow()
{ 
    i++;
    $('#myTable').append('<tr><td><input type="text" name="sno'+i+'" value="'+i+'"></td><td><input type="text" name="description'+i+'"></td><td><input type="text" id="quantity'+i+'" name="quantity'+i+'"></td><td><input type="text" id="price'+i+'" name="price'+i+'"></td><td><input type="text" name="linetotal'+i+'" class="linetotal"></td></tr>')
    $('#price'+i+'').blur(function() {
    alert('Handler for .blur('+i+') called.');
        $(this).parents("tr").find(".linetotal").val("Value Here");
    });
}
$(document).ready(AddRow); 
```

* * *

## 更新

* * *

我建议你做的是：

1.  添加一个[实时](http://api.jquery.com/live/)事件侦听器，这样您就不需要为您创建的每一行添加事件侦听器，因为[live](http://api.jquery.com/live/)会为您完成。**[注意：live 在 1.9 版本已被弃用，或者你需要 on 方法，但它仍然有效]**
2.  使用[更改](http://api.jquery.com/change/)事件而不是模糊。
3.  将类添加到数量和价格字段，以便以更简单的方式过滤它们。

这将导致您的 javascript int 变成这样（[您可以在此处查看小提琴](http://jsfiddle.net/JYPSy/)）：

```
 var i=0;
function AddRow()
{ 
    i++;
    $('#myTable').append('<tr><td><input type="text" name="sno'+i+'" value="'+i+'"></td><td><input type="text" name="description'+i+'"></td><td><input type="text" id="quantity'+i+'" name="quantity'+i+'" class="quantity"></td><td><input type="text" id="price'+i+'" name="price'+i+'" class="price"></td><td><input type="text" name="linetotal'+i+'" class="linetotal"></td></tr>');
}
$(document).ready(function(){
    $(".price, .quantity").live("change", function() {
        var item_quantity = parseInt($(this).parents("tr").find(".quantity").val());
        var unit_price = parseInt($(this).parents("tr").find(".price").val());
        var total_value = unit_price * item_quantity;
        console.info(item_quantity, unit_price, total_value);
        if(!isNaN(total_value))
            $(this).parents("tr").find(".linetotal").val(total_value);
    });
    AddRow();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:28:30.950

[Working Demo](http://jsfiddle.net/6UwfF/3/)

I have just little update your code. And use the `ID` attribute for your 'linetotal' input not `name`.

```
function calculate(index)
{
    //alert(index);
    var price = $('#price'+index+'').val();
    var qty = $('#quantity'+index+'').val();
    var total = price * qty;
    $('#linetotal'+index+'').val(total);
    alert($('#linetotal'+index+'').val());
} 
```

your AddRow function...

```
var i=1;
function AddRow()
{ 
    i++;
    $('#myTable').append('<tr><td><input type="text" name="sno'+i+'" value="'+i+'"></td><td><input type="text" name="description'+i+'"></td><td><input type="text" id="quantity'+i+'" name="quantity'+i+'"></td><td><input type="text" id="price'+i+'" name="price'+i+'" onblur="calculate('+i+')"></td><td><input type="text" id="linetotal'+i+'"></td></tr>')

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:38:00.723

修改您的代码：

```
$(document).ready(function(){

var i = 1;

$("#btnAdd").click(function(){

    i++;

    $('#myTable').append('<tr><td><input type="text" name="sno'+i+'" value="'+i+'"></td><td><input type="text" name="description'+i+'"></td><td><input type="text" id="quantity'+i+'" name="quantity'+i+'"></td><td><input type="text" id="price'+i+'" name="price'+i+'" id="price'+i+'"></td><td><input type="text"  id="linetotal'+i+'" name="linetotal'+i+'"></td></tr>')

    $('#price'+i+'').blur(function(){

            //alert($("#quantity"+i).attr('value') * $("#price"+i).attr('value'));

            $("#linetotal"+i).val($("#quantity"+i).attr('value') * $("#price"+i).attr('value'));

    });

});

}); 
```

会做需要的。

**$("#linetotal"+i).val($("#quantity"+i).attr('value') * $("#price"+i).attr('value'));**

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-06-30T13:22:43.720

```
<div id=ots></div>

$("#ots").append(
        '<div class="row main" id="maindivid'+i+'" style="border-bottom:1px solid black;">' +
'<div class="col-md-2">' +
    '<div class="row">' +
        '<div class="col-md-3">' +
        '<span class="hide schedule" id="sheduleid' + i + '">' + k.NewOTScheduleID + '</span>' +
            '<button id="btnall" name="btnall" style="background-color:red; color:yellow; font-size:10px; margin-top: 20px;">Apply</button>' +
        '</div>' +
        '<div class="col-md-9">' +
            '<select id="tblschedule" class="backcolor" style="color:#428bca;width:146px;height:50px;border:0px; font-size:11px;border-color:black;">' +
                '<option style="display:none"></option>' +
            '</select>' +
        '</div>' +
    '</div>' +
'</div>' +
'<div class="col-md-2" style="background-color:#fafaa0; height:52px">' +
    '<div class="row" style="padding-top:5px;">' +
        '<div class="table-responsive">' +
            '<table class="table table-bordered Loc_table class1" style="table-layout: fixed;" id="tblnew1">' +
                '<tr>' +
                    '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1X</td>' +
                    '<td style="text-align:center; border-color:transparent; border-bottom:1px; border-right:1px;">1.5X</td>' +
                    '<td id="regular' + i + 'h1" contenteditable="true" style="background-color:white;">' + k.RegularDayH1 + '</td>' +
                    '<td id="regular' + i + 'h2" contenteditable="true" style="background-color:white;">' + k.RegularDayH2 + '</td>' +
                    '<td id="regular' + i + 'h3" contenteditable="true" style="background-color:white;">' + k.RegularDayH3 + '</td>' +
                    '<td id="regular' + i + 'h4" contenteditable="true" style="background-color:white;">' + k.RegularDayH4 + '</td>' +
                '</tr>' +
                '<tr>' +
                    '<td id="regular' + i + '1x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.RegularDay1x + '</td>' +
                    '<td id="regular' + i + '1.5x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.RegularDay1_5x + '</td>' +
                    '<td id="regular' + i + 'c1" contenteditable="true" style="background-color:white; color:blue;">' + k.RegularDayF1 + '</td>' +
                    '<td id="regular' + i + 'c2" contenteditable="true" style="background-color:white;">' + k.RegularDayF2 + '</td>' +
                    '<td id="regular' + i + 'c3" contenteditable="true" style="background-color:white;">' + k.RegularDayF3 + '</td>' +
                    '<td id="regular' + i + 'c4" contenteditable="true" style="background-color:white;">' + k.RegularDayF4 + '</td>' +
                '</tr>' +
           '</table>' +
        '</div>' +
    '</div>' +
'</div>' +
'<div class="col-md-2" style="background-color:#ccffcc; height:52px;">' +
   '<div class="table-responsive" style="padding-top:5px; margin-left: -7px; margin-right: -7px;">' +
        '<table class="table table-bordered Loc_table class2" style="table-layout: fixed;" id="tblnew2">' +
            '<tr>' +
                '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1X</td>' +
               '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1.5X</td>' +
                '<td id="6thday' + i + 'h1" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="6thday' + i + 'h2" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="6thday' + i + 'h3" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="6thday' + i + 'h4" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
            '</tr>' +
            '<tr>' +
                '<td id="6thday' + i + '1x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.SixthDay1x + '</td>' +
                '<td id="6thday' + i + '1.5x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.SixthDay1_5x + '</td>' +
                '<td id="6thday' + i + 'c1" contenteditable="true" style="background-color:white;">' + k.SixthDayF1 + '</td>' +
                '<td id="6thday' + i + 'c2" contenteditable="true" style="background-color:white;">' + k.SixthDayF2 + '</td>' +
                '<td id="6thday' + i + 'c3" contenteditable="true" style="background-color:white; color:blue;">' + k.SixthDayF3 + '</td>' +
                '<td id="6thday' + i + 'c4" contenteditable="true" style="background-color:white;">' + k.SixthDayF4 + '</td>' +
            '</tr>' +
        '</table>' +
    '</div>' +
'</div>' +
'<div class="col-md-2" style="background-color:#ccffff; height:52px;">' +
    '<div class="table-responsive" style="padding-top:5px; margin-left: -7px; margin-right: -7px;">' +
        '<table class="table table-bordered Loc_table class3" style="table-layout: fixed;" id="tblnew3">' +
            '<tr>' +
                '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1X</td>' +
                '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1.5X</td>' +
                '<td id="7thday' + i + 'h1" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="7thday' + i + 'h2" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="7thday' + i + 'h3" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                '<td id="7thday' + i + 'h4" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
            '</tr>' +
            '<tr>' +
                '<td id="7thday' + i + '1x" contenteditable="true" style="background-color:#eeeeee;">' + k.SeventhDay1x + '</td>' +
                '<td id="7thday' + i + '1.5x" contenteditable="true" style="background-color:#eeeeee;">' + k.SeventhDay1_5x + '</td>' +
                '<td id="7thday' + i + 'c1" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.SeventhDayF1 + '</td>' +
                '<td id="7thday' + i + 'c2" contenteditable="true" style="background-color:white;">' + k.SeventhDayF2 + '</td>' +
                '<td id="7thday' + i + 'c3" contenteditable="true" style="background-color:white;">' + k.SeventhDayF3 + '</td>' +
                '<td id="7thday' + i + 'c4" contenteditable="true" style="background-color:white; color:blue;">' + k.SeventhDayF4 + '</td>' +
            '</tr>' +
        '</table>' +
    '</div>' +
'</div>' +
'<div class="col-md-3" style="background-color:#ffccff;height:52px;">' +
    '<div class="row" style="padding-top:5px;">' +
        '<div class="col-md-9">' +
            '<div class="row">' +
                '<div class="table-responsive">' +
                    '<table class="table table-bordered Loc_table class4" style="table-layout: fixed;" id="tblnew4">' +
                        '<tr>' +
                            '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1X</td>' +
                            '<td style="text-align:center; border-color:transparent; border-bottom:1px;">1.5X</td>' +
                            '<td id="alternate' + i + 'h1" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                            '<td id="alternate' + i + 'h2" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                            '<td id="alternate' + i + 'h3" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                            '<td id="alternate' + i + 'h4" style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                            '<td style="text-align:center; border-color:transparent; border-bottom:1px;"></td>' +
                        '</tr>' +
                        '<tr>' +
                            '<td id="alternate' + i + '1x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.Alternate1x + '</td>' +
                            '<td id="alternate' + i + '1.5x" contenteditable="true" style="background-color:#eeeeee; color:blue;">' + k.Alternate1_5x + '</td>' +
                            '<td id="alternate' + i + 'c1" contenteditable="true" style="background-color:white; color:blue;">' + k.AlternateF1 + '</td>' +
                            '<td id="alternate' + i + 'c2" contenteditable="true" style="background-color:white;">' + k.AlternateF2 + '</td>' +
                            '<td id="alternate' + i + 'c3" contenteditable="true" style="background-color:white;">' + k.AlternateF3 + '</td>' +
                            '<td id="alternate' + i + 'c4" contenteditable="true" style="background-color:white;">' + k.AlternateF4 + '</td>' +
                            '<td style="border-color:transparent; border-left:1px"><input type="checkbox"></td>' +
                        '</tr>' +
                    '</table>' +
                '</div>' +
            '</div>' +
        '</div>' +
        '<div class="col-md-3">' +
            '<div class="row">' +
                @*<input type="text" class="form-control tex_box" style="background-color:#eeeeee; font-size:10px; margin-top:-5px;" value="8 Distant">*@
                @* <input type="text" class="form-control" style="height:30px; margin-top:2px; background-color:#eeeeee; font-size:10px;" value="L.A. Basic Crafts, IATSE, & Teamsters">*@
                '<select id="restperiodone' + i + '" class="form-control tex_box" style="background-color:#eeeeee; font-size:10px; margin-top:-5px;">' +
                    '<option></option>' +
                '</select>' +
                '<select id="restperiodone' + i + '" class="form-control" style="height:30px; margin-top:2px; background-color:#eeeeee; font-size:10px;">' +
                    '<option></option>' +
                '</select>' +
            '</div>' +
        '</div>' +
    '</div>' +
'</div>' +
'<div class="col-md-1" style="background-color:#ffccff; height: 50px;">' +
    '<button id="copytofavorite" style="font-size:11px; height:50px; color:yellow; background-color:#c0c0c0; margin-top:0px;">Copy To Favorite Overtime Schedules</button>' +
'</div>' +
    '</div>'); 
```

# codeigniter - Array is not recognized in Codeigniter's View

> ID：15088726
> 
> 赞同：0
> 
> 时间：2013-02-26T12:06:16.080
> 
> 标签：codeigniter

I'm trying to pass an array to a view from a controller but I can't and I don't know why.

I have a model, a controller and a view.

The model:

```
<?php

class Modelo_bd extends CI_Model
{
    public function datos()
    {
        $cnb=$this->db->query("SELECT * from anuncios");
        return $cnb->result();  
    }
} 

?> 
```

The controller:

```
if($this->modelo_usuarios->puede_entrar($usr)) 
{
   $this->load->model("modelo_bd");
   $cbd=$this->modelo_bd->datos();
   $this->load->view('datos',$cbd);

   return true;
} 
```

The view:

```
<?php
echo $cbd->titulo_a;
echo $cbd->contenido;
?> 
```

The error is in the view.

```
A PHP Error was encountered
Severity: Notice
Message: Undefined variable: cbd

A PHP Error was encountered
Severity: Notice
Message: Trying to get property of non-object 
```

Why $cbd variable isn't recognized in the view if it is an array? How can I fix it?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:08:49.620

在**控制器**中：

```
if($this->modelo_usuarios->puede_entrar($usr)) 
{
   $this->load->model("modelo_bd");
   $cbd=$this->modelo_bd->datos();
   $this->load->view('datos', array('cbd' => $cbd);       
   return true;
} 
```

第二个参数应该是数组。

您可以在模型中使用：

```
public function datos()
{
    return $this->db->query("SELECT * from anuncios");
} 
```

在视图中：

```
<?php
foreach ($cdb->result() as $item) {
  echo $item->titulo_a;
  echo $item->contenido;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:29:37.180

Shouldn't you rather do:

**The controller:**

```
if($this->modelo_usuarios->puede_entrar($usr)) 
{
   $this->load->model("modelo_bd");
   $data['cbd']=$this->modelo_bd->datos();
   $this->load->view('datos',$data);

       return true;
} 
```

**The view:**

```
<?php
   foreach($cbd as $key => $row){
   echo $row->titulo_a;
   echo $row->contenido;
}

?> 
```

I think this works better, your choice.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:43:20.240

你应该这样做

```
if($this->modelo_usuarios->puede_entrar($usr)) 
{
   $this->load->model("modelo_bd");
   $data['cbd'] =   $this->modelo_bd->datos();
   $this->load->view('datos',$data);
} 
```

# jquery - jQuery on() not working through ajax call but does work when called independently

> ID：15088740
> 
> 赞同：0
> 
> 时间：2013-02-26T12:06:53.730
> 
> 标签：jquery

This is a strange one..

Essentially I have a three stage form which automatically saves it status.

When you click the first submit button it loads the second stage through ajax.

If you refresh the page it reloads the second stage (but NOT through ajax) using session data.

On the second stage of the form is a button.. when the user clicks it I want to call some jquery and make an alert.

My code is as follows:

```
 $(document).on("click","#submity",function(event){
event.preventDefault();
alert('lol');

    }); 
```

This is included between a document ready statement in an external js file loaded on the initial page load. It is loaded after the jQuery library, and that is being imported correctly.

When the second page is loaded by ajax, clicking the button does absolutely nothing. When loaded directly it alerts as expected. I cannot for the life of me work out why?

Other questions on SO seem to pertain to delegating with on() but as far as I am aware I have done it correctly, and similar setups work elsewhere on the site..

Any ideas?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:25:07.303

你可能有一个对象`document`和`#submity`一个阻止事件冒泡的点击处理程序，或者使用 event.stopPropagation() 或返回 false；

你的代码是这样工作的：click 事件在被点击的对象 ( `#submity`) 上创建并向上传递 DOM 层次结构，直到它到达`document`jQuery 调用事件处理程序的位置。如果该链在中间某处被取消，您的处理程序将永远不会被调用。

您是否可能在 ajax 调用期间或之后分配单击事件处理程序？

没有代码将很难诊断。你能发个链接吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T12:09:55.720

您必须在页面上加载动态加载按钮后绑定 .on() 事件，或者使用已过时的 .live() 事件。所以在ajax成功回调中绑定东西

# cordova - 在应用程序重新启动时将 JSONStore 数据保留在本地存储中？

> ID：15088742
> 
> 赞同：0
> 
> 时间：2013-02-26T12:06:57.903
> 
> 标签：cordova, ibm-mobilefirst, jsonstore

JSONStore 为我们提供了一种很好的方式来与服务器同步数据并跟踪用户在离线时所做的更改。但是，由于 JSONStore 数据仅在内存中，因此如果用户停止应用程序或重新启动设备，任何更改都会丢失。

看起来 Cordova 存储 API 可能是解决方案的一部分，但我没有看到一种明确的方法可以使用它来持久化和检索 JSONStore 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T04:30:12.603

> JSONStore 数据仅在内存中。

这是不正确的，除非您在谈论另一个 JSONStore。除非从设备上卸载应用程序或调用：[destroy](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_destroy.html)、[remove](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_remove.html)、[erase](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_erase.html)或[removeCollection](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_removecollection.html) ，否则数据将被保留。查看[入门模块](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#mobile-client-development)（7.9、7.10、7.11 和 7.12）和[IBM InfoCenter 文档](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_class_wl_jsonstore.html)以了解更多详细信息。

试试下面的代码片段：

```
var c = WL.JSONStore.initCollection('customers', {name: 'string'}, {onSuccess: function(){
    c.add({name: 'helloworld'}, {onSuccess: function(){
        c.findAll({onSuccess: function (res) {
            console.log(JSON.stringify(res));
        }})
    }});
}}); 
```

为简洁起见，我省略了失败回调。每次运行应用程序时，它都会存储一个新的“helloworld”文档。您可以重新启动应用程序，数据仍然存在。您可以在此处阅读有关我使用的 API 方法的更多信息：[initCollection](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_initcollection.html)、[add](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_add.html)、[findAll](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_findall.html)。

> 也许有一种方法我们应该检查现有数据，这样我们就不会以某种方式删除它？

您可以调用[count](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_count.html)来查看 JSONStore 集合中有多少数据。

如果您想从后端获取数据，您需要创建一个 Worklight Adapter 并将其链接到您的集合，然后需要调用[load](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_load.html)。要将数据发送回您的后端，您可以调用[push](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/topic/com.ibm.worklight.help.doc/apiref/r_wl_jsonstore_push.html)。这在[Getting Started Modules](https://www.ibm.com/developerworks/mobile/worklight/getting-started/)中有更好的解释，特别是：[Module 7.11 - JSONStore with Synchronization](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_07_11_-_JSONStore_with_Sync.pdf)。

附带说明一下，请确保在`ondeviceready`事件触发后调用 JSONStore。在函数内部进行 JSONStore 调用是安全的`wlCommonInit`。确保您在 Android 或 iOS 平台（设备或模拟器/模拟器）上进行测试。它不适用于移动浏览器模拟器或任何 Web 浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:04:42.867

JSONStore 作为文件保存在设备本地存储中。JSONStore 是持久的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-26T12:40:23.853

看看[PhoneGap 存储](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#Storage)。所有这些方法都应该通过 Cordova 库在 Worklight 中可用。

# python - SQLite3 选择数据（在 python 中）

> ID：15088744
> 
> 赞同：1
> 
> 时间：2013-02-26T12:07:02.613
> 
> 标签：python, select, sqlite

我正在学习一些 python 编程并使用 SQlite3 我一直遇到同样的问题，但我不知道出了什么问题。

我的餐桌设置

```
def user_table():
    data = lite.connect(database)
    dat = data.cursor()

    with data:
        dat.executescript("""CREATE TABLE IF NOT EXISTS Users(Id INTEGER PRIMARY KEY AUTOINCREMENT,
        'Username' UNIQUE,
        'Password',
        'Email',
        'UserCharacters_Id' INTEGER
        )"""); 
```

现在我选择用户名的代码（用户名 123 存在并且表似乎正确（使用 SQLite 工作室检查）

```
database = 'test.db'
data = lite.connect(database)
dat = data.cursor()
with data:
    dat.execute("SELECT * FROM Users WHERE 'Username'='123'")
    user = dat.fetchone()   
    print user 
```

我尝试了很多不同的方法，但它一直返回无。python 部分似乎正在工作，只是 SQL 的选择部分出错（检查打印）

请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:18:18.410

在 SQL 中，单引号用于字符串，而表/列名称用双引号引起来。（SQLite 支持后者的单引号，以便在某些地方与 MySQL 兼容。）

您的查询将 string`Username`与 string`123`进行比较，并且此比较对于每条记录都失败。

用这个：

```
dat.execute('SELECT * FROM Users WHERE "Username" = \'123\'') 
```

但是为了防止字符串格式化问题和 SQL 注入攻击，你应该使用参数：

```
username = "123"
dat.execute('SELECT * FROM Users WHERE "Username" = ?', (username,)) 
```

# c++ - SetTokenInformation 和权限

> ID：15088747
> 
> 赞同：3
> 
> 时间：2013-02-26T12:07:13.990
> 
> 标签：c++, windows, winapi

我想为我的进程令牌添加特权（我的进程以管理员权限运行）。我无法使用 AdjustTokenPrivileges，因为进程令牌不包含我缺少的权限。因此，我尝试通过 SetTokenInformation 将权限添加到令牌。我很确定我以正确的方式构建了 TOKEN_PRIVILEGES 结构，并且在调用 SetTokenInformation 时得到了 INVALID_PARAMETER_ERROR。因此，我认为在现有令牌上使用此功能存在问题。另外我在功能MSDN页面中发现了这个注释：“只有在创建访问令牌时才能设置令牌类型信息。”

那么，我还能做什么？

注意：我这样做是因为我对 CreateProcessAsUser 的调用失败了，因为我没有 SE_ASSIGNPRIMARYTOKEN_NAME 特权。

感谢帮助者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-13T01:12:04.190

您[可以更改](https://msdn.microsoft.com/en-us/library/windows/desktop/ms717797(v=vs.85).aspx)令牌中的权限，但不能添加权限。Keith Brown 在他关于 Windows 安全的[杰出著作中对这个主题有一个很好的部分。](https://rads.stackoverflow.com/amzn/click/com/0201604426)他在其中说，一旦 LSA 完成构建令牌“你以后不能注入额外的特权......”。我希望我能找到一本像他这样涵盖当前 Windows 安全性的书。叹。

# windows-services - Play 2.0 - 服务器重启后作为 Windows 服务启动

> ID：15088751
> 
> 赞同：6
> 
> 时间：2013-02-26T12:07:23.520
> 
> 标签：windows-services, playframework-2.0

我有游戏！作为 Windows 服务运行的应用程序。它是根据[本](http://naoki.sato.name/lab/archives/263)指南实施的。

问题是`RUNNING_PID`服务器重启时应用程序的根文件夹没有被删除，应用程序无法再次启动。我必须删除此文件并手动重新启动服务。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T05:49:50.813

### YAJSW

如果`YAJSW`我发现[这个答案](https://stackoverflow.com/a/13565582/1066240)有更好的理解。它当然与您提供的链接非常相​​似，无论如何请记住，更经常建议使用`dist`命令而不是`stage`因为它得到了开发人员的更多关注（更多错误已修复`dist`）。米哈伊尔的回答更清楚（投票给他！）

### RUNNING_PID

在这种情况下`RUNNING_PID`，有一些拉取请求建议添加禁用 pidfile 的选项......无论如何，正如我所看到的，它们都没有被接受......

实际上，如果您无法避免创建它，您可以...在应用程序启动后立即删除它，最好使用[Globals 对象的](http://www.playframework.com/documentation/2.0.4/JavaGlobal) `onStart()`方法。要随时了解工作实例的当前 PID，只需将文件重命名为某个名称，Play 在启动时不会对其进行检查 - 例如`RUNNING_PID_INFO`. 在这种情况下，服务器重启后服务将毫无问题地运行您的应用程序。

```
import play.GlobalSettings;
import java.io.File;

public class Global extends GlobalSettings {
    @Override
    public void onStart(Application application) {
        File pidFile = new File("RUNNING_PID");
        pidFile.renameTo(new File("RUNNING_PID_INFO"));
    }

    @Override
    public void onStop(Application application) {
        File pidFile = new File("RUNNING_PID_INFO");
        pidFile.delete();
    }
} 
```

*（注意：更改`pidfile.path`appllication.conf 不会解决问题，因为 play 会使用它来检查实例是否正常工作）*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-30T14:07:32.760

`pidfile.path`从 Play Framework 2.1 开始，您可以通过设置属性来禁用 PID 文件：

视窗：

```
-Dpidfile.path=NUL 
```

Unix：

```
-Dpidfile.path=/dev/null 
```

在[https://groups.google.com/forum/#!topic/play-framework/4amD9o37Ki4找到](https://groups.google.com/forum/#!topic/play-framework/4amD9o37Ki4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-29T18:49:24.473

[我最近按照这个答案](https://stackoverflow.com/questions/12120489/how-do-i-run-a-play-framework-2-0-application-as-a-windows-service/13565582#13565582)安装了一个使用 YAJSW 的播放框架应用程序。我注意到现在，RUNNING_PID 会自动删除，您不必担心修改代码来删除文件。另外，如果您的服务依赖于其他服务，最好将 DELAYED_AUTO_START 设置为启动模式，以确保服务器重启后服务正常启动。

# java - android视图中的windowleaked

> ID：15088753
> 
> 赞同：0
> 
> 时间：2013-02-26T12:07:24.057
> 
> 标签：java, android, screen-orientation

嗨，我已经开发了 android phonegap 应用程序，当显示对话框并且屏幕方向发生变化时，在 logcat 中显示错误。如何解决这个问题

这是我的 logcat 错误：

```
E/WindowManager(5759): Activity com.example.Service.NotificationAlert has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412c93c0 that was originally added here
E/WindowManager(5759): android.view.WindowLeaked: Activity com.example.Service.NotificationAlert has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@412c93c0 that was originally added here
E/WindowManager(5759):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
E/WindowManager(5759):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
E/WindowManager(5759):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
E/WindowManager(5759):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
E/WindowManager(5759):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
E/WindowManager(5759):  at android.app.Dialog.show(Dialog.java:278)
E/WindowManager(5759):  at com.example.Service.NotificationAlert$1.handleMessage(NotificationAlert.java:103)
E/WindowManager(5759):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/WindowManager(5759):  at android.os.Looper.loop(Looper.java:137)
E/WindowManager(5759):  at android.app.ActivityThread.main(ActivityThread.java:4424)
E/WindowManager(5759):  at java.lang.reflect.Method.invokeNative(Native Method)
E/WindowManager(5759):  at java.lang.reflect.Method.invoke(Method.java:511)
E/WindowManager(5759):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/WindowManager(5759):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/WindowManager(5759):  at dalvik.system.NativeStart.main(Native Method) 
```

请告诉我解决方案。在此先感谢。

这是我的代码：

```
 AlertDialog alertDialog = new AlertDialog.Builder(NotificationAlert.this).create();
    alertDialog.setTitle("Mobilyzer");
    msgCountBundle = getIntent().getExtras();
    messageCount = msgCountBundle.getInt("Count");
    userId = msgCountBundle.getInt("userid");
    if (messageCount > 1) {
        alertDialog
                .setMessage("You have " + messageCount + " New Messages");
    } else {
        alertDialog.setMessage("You have " + messageCount + " New Message");
    }

alertDialog.show();
new Timer().schedule(new task(), 30000);

private class task extends TimerTask 
{
    public void run() 
    {
        toastHandler.sendEmptyMessage(0);
    }
}

private final Handler toastHandler = new Handler() {
    public void handleMessage(Message msg) {
        if(alertDialog.isShowing())
        {
            try
            {
                alertDialog.dismiss();
                finish();
                Log.i("alertdialog","hide alert dialog");
            }
            catch(IllegalArgumentException e)
            {
                Log.e("illegal ","illegal exception in dialog"+e);
            }
            catch(Exception e)
            {
                Log.e("illegal ","exception in dialog"+e);
            }
        }
        Log.i("alertdialog","show alert dialog");
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:12:54.583

在`NotificationAlert` `Activity`您显示的是在暂停时`Dialog`通过显式调用`dismiss()`它没有被解除的。`Activity`保留对您的`Dialog`对象的引用并`onPause()`调用`dismiss()`它。

```
@Override
protected void onPause() {
    if (myDialog != null) {
        myDialog.dismiss();
    }
    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:15:36.530

检查应用程序的流程。在应用程序中，我认为您不止一次添加对话框。因此，尝试通过在活动视图中仅添加一个对话框来解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:49:07.493

这是因为应用程序崩溃的其他一些异常，并且因为对话框显示窗口泄漏异常被抛出。

无论如何，当对话框不为空并且活动完成时，就会发生窗口泄漏异常。因此，对话框必须在上面提到的 onPause() 中设置为 null，或者在启动 Intent 之前，Activity 正在移动到新屏幕。在这里您可以取消catch中的dailog，以便可以处理窗口泄漏异常，但是您的代码中还有一些其他异常。提供完整的 logcat。

# javascript - jQuery clone() 多个列表并将每个列表附加到其原始列表

> ID：15088757
> 
> 赞同：1
> 
> 时间：2013-02-26T12:07:36.373
> 
> 标签：javascript, jquery, clone, each

我正在尝试做一些相当简单的事情，但我很密集。在一个事件上（比如说点击），我想遍历div、嵌套的UL 和div`.each()`中的输出。`.article-wrap``.clone()``.articles``.apend``.clone`

**这是开始时的 HTML：**

```
<div class="article-wrap">
 <h3>Some heading</h3>
 <ul class="articles">
   <li> <a href="#">Sample title number 01</a> </li>
   <li> <a href="#">Sample title number 02</a> </li>
   <li> <a href="#">Sample title number 03</a> </li>
 </ul>
 <div class="clone"> </div> 
</div>  <!-- End .article-wrap -->

<div class="article-wrap">
 <h3>Some heading</h3>
 <ul class="articles">
   <li> <a href="#">Sample title number 04</a> </li>
   <li> <a href="#">Sample title number 05</a> </li>
   <li> <a href="#">Sample title number 06</a> </li>
 </ul>
 <div class="clone"> </div>
</div>  <!-- End .article-wrap --> 
```

**这是我正在寻找的结果：**

```
<div class="article-wrap">
 <h3>Some heading</h3>
 <ul class="articles">
   <li> <a href="#">Sample title number 01</a> </li>
   <li> <a href="#">Sample title number 02</a> </li>
   <li> <a href="#">Sample title number 03</a> </li>
 </ul>
 <div class="clone">
   <ul class="articles">
     <li> <a href="#">Sample title number 01</a> </li>
     <li> <a href="#">Sample title number 02</a> </li>
     <li> <a href="#">Sample title number 03</a> </li>
    </ul>
 </div>  <!-- End .clone -->
</div>  <!-- End .article-wrap -->

<div class="article-wrap">
 <h3>Some heading</h3>
 <ul class="articles">
   <li> <a href="#">Sample title number 04</a> </li>
   <li> <a href="#">Sample title number 05</a> </li>
   <li> <a href="#">Sample title number 06</a> </li>
 </ul>
 <div class="clone">
   <ul class="articles">
     <li> <a href="#">Sample title number 04</a> </li>
     <li> <a href="#">Sample title number 05</a> </li>
     <li> <a href="#">Sample title number 06</a> </li>
   </ul>
 </div>  <!-- End .clone -->
</div>  <!-- End .article-wrap --> 
```

目前我有一个简单的脚本正在运行，但它将两个克隆列表都添加到每个`.clone`div 中。**这是我的 JS：**

```
$(function() {
  var holder = '.article-wrap';

  $('#test-link').click(function() {
    $(holder).each(function() {
      $('.clone').append(
        $(this).children('ul.articles').clone()
      );
    });
  });
}); 
```

我找不到如何确保我只从`.article-wrap`div 的每次迭代中输出克隆的内容。目前，我正在获取所有克隆项目，如您所见：http: [//jsfiddle.net/EGvMm/2/](http://jsfiddle.net/EGvMm/2/)

我已经阅读了一些关于类似主题的其他帖子，他们建议删除类名，但如果可能的话，我不希望这样做。请指教！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:15:44.603

请改用此代码段：

```
$(function() {
  var holder = '.article-wrap';

  $('#test-link').click(function() {
    $(holder).each(function() {
      $(this).find('.clone').append(
        $(this).children('ul.articles').clone()
      );
    });
  });
}); 
```

# oracle - 如何重现错误 java.sql.SQLException: ORA-01033: ORACLE 初始化或关闭正在进行中？

> ID：15088760
> 
> 赞同：0
> 
> 时间：2013-02-26T12:07:41.990
> 
> 标签：oracle, initialization

我在 java 上有一个使用休眠在 oracle db 中编写的应用程序。有时我在日志中发现错误 01033。但我无法重现它。我已经重启了服务器、oracleXE 服务、杀死了任务、杀死了 tns 监听器。但我只收到：

```
 ORA-12505, TNS:listener does not currently know of 
 SID given in connect descriptor 
```

Oracle 服务器收到错误 ORA-01033 需要做什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:15:22.437

> ORA-01033: ORACLE 初始化或关闭正在进行中。
> 
> 原因：在启动或关闭 Oracle 时尝试登录。
> 
> 行动：等待几分钟。然后重试操作
> 
> 解决“ORA-01033：ORACLE 初始化或关闭正在进行中”错误的第一步是检查目标数据库是否确实处于启动或关闭过程中。当数据库未打开时，也会发生 ORA-01033 错误。创建控制文件后，发出命令：“alter database open”
> 
> 这应该会停止 ORA-01033 错误并使数据库可用于一般用途。“ORA-01033：ORACLE 初始化或关闭正在进行中。” 当 Oracle 尝试启动或关闭并且“挂起”在诸如故障磁盘、写入重做等资源上时，也会发生错误。

来源：[http ://www.dba-oracle.com/t_ora_01033_initialization_shutdown_progress.htm](http://www.dba-oracle.com/t_ora_01033_initialization_shutdown_progress.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:19:43.003

如果你想强制`ORA-01033: ORACLE initialization or shutdown in progress.`你应该能够做到这一点，如下

1.  以 sys 身份登录并关闭数据库
2.  运行`startup mount`（再次以 sys 身份运行）

现在所有客户端都应该收到该错误消息。注意：听者应该起床了。

作为系统：

```
SQL> shutdown immediate
Database closed.
Database dismounted.
ORACLE instance shut down.
SQL> startup mount
ORACLE instance started.

Total System Global Area  630501376 bytes
Fixed Size          2230992 bytes
Variable Size          43934256 bytes
Database Buffers      281018368 bytes
Redo Buffers        3317760 bytes
Database mounted.
SQL> 
```

然后作为客户：

```
M:\>sqlplus test/test@oracle11203

SQL*Plus: Release 11.2.0.2.0 Production on Tue Feb 26 15:18:45 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

ERROR:
ORA-01033: ORACLE initialization or shutdown in progress
Process ID: 0
Session ID: 0 Serial number: 0

Enter user-name: 
```

要清除错误，只需运行

```
alter database open 
```

作为系统。现在所有客户端都可以照常登录了。

# java - 使用 commons.apache.compress 向嵌套 zip 文件添加条目

> ID：15088763
> 
> 赞同：1
> 
> 时间：2013-02-26T12:08:03.070
> 
> 标签：java, apache-commons-compress

我的 Zip 文件结构是这样的：

`t1.zip` **-->** `t2.zip` **-->** `sample.txt`

我想替换**sample.txt**。如果它是一个级别，我能够做到。请帮助我处理多级嵌套 zip 文件。

我的示例代码

```
ZipFile zipFile = new ZipFile(new File("t1.zip");
ZipArchiveEntry ze = zipFile.getEntry("t2.zip"); // So It works fine 
```

我试过了

```
ZipArchiveEntry ze = zipFile.getEntry("t2.zip/sample.txt"); // returns null 
```

我的意图是遵循apache文档页面中的示例

```
ZipArchiveEntry entry = new ZipArchiveEntry(new File("sample.txt")); // Should I t2.zip/sample.txt ?
entry.setSize(size);
zipOutput.putArchiveEntry(entry);
zipOutput.write(contentOfEntry);
zipOutput.closeArchiveEntry(); 
```

但我不清楚，如何将存档条目 2 级别放在里面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-19T11:48:55.820

你必须使用

```
new ZipArchiveEntry(new File("sample.txt"), "sample.txt"); 
```

将文件设置到根文件夹中，然后

```
new ZipArchiveEntry(new File("sample.txt"), "new folder/sample.txt"); 
```

设置到一个名为“新文件夹”的新文件夹中。

# ios - ios自定义用户界面旋转

> ID：15088768
> 
> 赞同：1
> 
> 时间：2013-02-26T12:08:32.820
> 
> 标签：ios, uiviewcontroller, containers

我正在开发一个容器 UIViewController。我希望容器委托轮换的管理控制器。

```
// this is in every controller by extending uiviewcontroller with a category
- (BOOL)shouldAutorotate {
    UIInterfaceOrientation orientation = [[UIDevice currentDevice] orientation];
    return [self shouldAutorotateToInterfaceOrientation:orientation];
}

// this is only in the root container because it embed the entire view hierarchy
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return [self.currentController shouldAutorotate];
} 
```

到目前为止，一切都很好。

现在我希望容器始终保持纵向并旋转其 contentView 以控制旋转，然后像这样修补方法：

```
// this is only in the root container because it embed the entire view hierarchy
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
        // forward the message to the current controller for automatic behavior
    [self.currentController willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

// this is only in the root container because it embed the entire view hierarchy
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
        // forward the message to the current controller for automatic behavior
    [self.currentController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:duration];
}

// this is only in the root container because it embed the entire view hierarchy
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
    {
    BOOL supportedOrientation = [self.currentController shouldAutorotate];

    if (supportedOrientation && self.currentOrientation != toInterfaceOrientation)
    {
        // virtual orientation by rotating the content view
        CGRect frame = self.contentView.bounds;

        CGPoint origin = self.contentView.center;

        float rotation = [self checkRotationForOrientation:toInterfaceOrientation];

        float w = frame.size.width;
        float h = frame.size.height;

        // check the right height and width for the new orientation
        if (UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) {
            frame.size = CGSizeMake(MIN(w, h), MAX(w, h));
        } else {
            frame.size = CGSizeMake(MAX(w, h), MIN(w, h));
        }

        // manually call willRotateEtc and willAnimateEtc because the rotation is virtual
        [self.currentController willRotateToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];
        [self.currentController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];

        // animate the rotation
        [UIView animateWithDuration:kAnimationDuration animations:^{
            self.contentView.transform = CGAffineTransformMakeRotation(rotation);
            self.contentView.bounds = frame;
            self.contentView.center = origin;
        }];

        // update the new virtual orientation for the controller and the container
        self.currentController.currentOrientation = toInterfaceOrientation;
        self.currentOrientation = toInterfaceOrientation;
    }

    return NO;
} 
```

currentController 是 PhotoViewController 的一个实例（Apple 示例 PhotoScroller 的旧样式，经过一些修改），它是：

```
/*
 File: PhotoViewController.h
 Abstract: Configures and displays the paging scroll view and handles tiling and page configuration.

 */

#import <UIKit/UIKit.h>
#import "ImageScrollView.h"
#import "CRWCacheProtocol.h"

@protocol PhotoViewControllerDelegate;

@interface PhotoViewController : UIViewController <UIScrollViewDelegate, ImageScrollViewDelegate, CRWCacheProtocol> {
    NSMutableSet *recycledPages;
    NSMutableSet *visiblePages;

// these values are stored off before we start rotation so we adjust our content offset appropriately during rotation
int           firstVisiblePageIndexBeforeRotation;
CGFloat       percentScrolledIntoFirstVisiblePage;
}

@property (unsafe_unretained, nonatomic) IBOutlet UIScrollView *pagingScrollView;
@property (unsafe_unretained, nonatomic) IBOutlet UILabel *pageLabel;
@property (retain, nonatomic) NSString *dataFileName;

@property (assign, nonatomic) NSInteger currentPage;

@property (unsafe_unretained, nonatomic) id<PhotoViewControllerDelegate> photoViewControllerDelegate;

- (NSArray *)imageData;
- (void) setImageData:(NSArray *) customImageData;

- (void)configurePage:(ImageScrollView *)page forIndex:(NSUInteger)index;
- (BOOL)isDisplayingPageForIndex:(NSUInteger)index;

- (CGRect)frameForPagingScrollView;
- (CGRect)frameForPageAtIndex:(NSUInteger)index;
- (CGSize)contentSizeForPagingScrollView;

- (void)tilePages;
- (ImageScrollView *)dequeueRecycledPage;

- (NSUInteger)imageCount;
- (NSString *)imageNameAtIndex:(NSUInteger)index;
- (CGSize)imageSizeAtIndex:(NSUInteger)index;
- (UIImage *)imageAtIndex:(NSUInteger)index;

@end

@protocol PhotoViewControllerDelegate <NSObject>

@optional
- (void) photoViewController:(PhotoViewController *) controller willDisplayPhoto:(ImageScrollView *) photo;
- (void) photoViewController:(PhotoViewController *) controller didDisplayPhoto:(ImageScrollView *) photo;

@end 
```

还有他们”

```
/*
     File: PhotoViewController.m
 Abstract: Configures and displays the paging scroll view and handles tiling and page configuration.

 */

#import "PhotoViewController.h"
#import "CRWCache.h"
#import "CRWebKit.h"

@interface PhotoViewController ()

@property (nonatomic,retain) NSArray *customImageData;
@property (nonatomic,assign) NSInteger indexForDownloadingImage;

@end

@implementation PhotoViewController

- (void) scrollToStartPage
{
    float pageWidth = self.pagingScrollView.contentSize.width / [self imageCount];
    float pageHeight = self.pagingScrollView.contentSize.height;

    CGRect frame = CGRectMake(pageWidth*self.currentPage, 0, pageWidth, pageHeight);
    [self.pagingScrollView scrollRectToVisible:frame animated:NO];
}

- (ImageScrollView *) displayedPageForIndex:(NSUInteger)index
{
    ImageScrollView *page = nil;
    for (ImageScrollView *currentPage in visiblePages) {
        if (currentPage.index == index) {
            page = currentPage;
            break;
        }
    }
    return page;
}

#pragma mark -
#pragma mark View loading and unloading

-(void)viewDidAppear:(BOOL)animated
{
    self.pagingScrollView.contentSize = [self contentSizeForPagingScrollView];
    [self scrollToStartPage];
    [self tilePages];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Step 1: make the outer paging scroll view
    self.pagingScrollView.pagingEnabled = YES;
    //self.pagingScrollView.backgroundColor = [UIColor blackColor];
    self.pagingScrollView.backgroundColor = [UIColor blackColor];
    self.pagingScrollView.showsVerticalScrollIndicator = NO;
    self.pagingScrollView.showsHorizontalScrollIndicator = NO;
    self.pagingScrollView.delegate = self;

    // Step 2: prepare to tile content
    recycledPages = [[NSMutableSet alloc] init];
    visiblePages  = [[NSMutableSet alloc] init];
}

- (void)viewDidUnload
{
    [self setDataFileName:nil];
    [self setPageLabel:nil];
    [self setCustomImageData:nil];
    [super viewDidUnload];
    self.pagingScrollView = nil;
    recycledPages = nil;
    visiblePages = nil;
}

#pragma mark -
#pragma mark Tiling and page configuration

- (void)tilePages
{
    // Calculate which pages are visible
    CGRect visibleBounds = self.pagingScrollView.bounds;
    int firstNeededPageIndex = floorf(CGRectGetMinX(visibleBounds) / CGRectGetWidth(visibleBounds));
    int lastNeededPageIndex  = floorf((CGRectGetMaxX(visibleBounds)-1) / CGRectGetWidth(visibleBounds));
    firstNeededPageIndex = MAX(firstNeededPageIndex, 0);
    lastNeededPageIndex  = MIN(lastNeededPageIndex, [self imageCount] - 1);

    // Recycle no-longer-visible pages 
    for (ImageScrollView *page in visiblePages) {
        if (page.index < firstNeededPageIndex || page.index > lastNeededPageIndex) {
            [recycledPages addObject:page];
            [page removeFromSuperview];
        }
    }
    [visiblePages minusSet:recycledPages];

    // add missing pages
    for (int index = firstNeededPageIndex; index <= lastNeededPageIndex; index++) {

        // imposta il contatore di pagine e la pagina corrente
        self.pageLabel.text = [NSString stringWithFormat:@"%i/%i", index + 1, [self imageCount]];
        self.currentPage = index;

        ImageScrollView *page = [self displayedPageForIndex:index];
        if (page == nil) {
            page = [self dequeueRecycledPage];
            if (page == nil) {
                page = [[ImageScrollView alloc] init];
            }
            [self configurePage:page forIndex:index];

            page.imageScrollViewDelegate = self;

            // informo il delegate che sto per visualizzare l'immagine
            if ([self.photoViewControllerDelegate conformsToProtocol:@protocol(PhotoViewControllerDelegate)] &&
                [self.photoViewControllerDelegate respondsToSelector:@selector(photoViewController:willDisplayPhoto:)]) {
                [self.photoViewControllerDelegate photoViewController:self willDisplayPhoto:page];
            }

            [self.pagingScrollView addSubview:page];

            [visiblePages addObject:page];

            // informo il delegate che ho visualizzato l'immagine
            if ([self.photoViewControllerDelegate conformsToProtocol:@protocol(PhotoViewControllerDelegate)] &&
                [self.photoViewControllerDelegate respondsToSelector:@selector(photoViewController:didDisplayPhoto:)]) {
                [self.photoViewControllerDelegate photoViewController:self didDisplayPhoto:page];
            }
        }
    }    
}

- (ImageScrollView *)dequeueRecycledPage
{
    ImageScrollView *page = [recycledPages anyObject];
    if (page) {
        [recycledPages removeObject:page];
    }
    return page;
}

- (BOOL)isDisplayingPageForIndex:(NSUInteger)index
{
    BOOL foundPage = NO;
    for (ImageScrollView *page in visiblePages) {
        if (page.index == index) {
            foundPage = YES;
            break;
        }
    }
    return foundPage;
}

- (void)configurePage:(ImageScrollView *)page forIndex:(NSUInteger)index
{
    page.index = index;
    page.frame = [self frameForPageAtIndex:index];
    /*
    // Use tiled images
    [page displayTiledImageNamed:[self imageNameAtIndex:index] size:[self imageSizeAtIndex:index]];
    /*/
    // To use full images instead of tiled images, replace the "displayTiledImageNamed:" call
    // above by the following line:
    [page displayImage:[self imageAtIndex:index]];
    //*/
}

#pragma mark -
#pragma mark ScrollView delegate methods

- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    [self tilePages];
}

#pragma mark -
#pragma mark View controller rotation methods
/*
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
{
    return YES;
}
*/
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    // here, our pagingScrollView bounds have not yet been updated for the new interface orientation. So this is a good
    // place to calculate the content offset that we will need in the new orientation
    CGFloat offset = self.pagingScrollView.contentOffset.x;
    CGFloat pageWidth = self.pagingScrollView.bounds.size.width;

    if (offset >= 0) {
        firstVisiblePageIndexBeforeRotation = floorf(offset / pageWidth);
        percentScrolledIntoFirstVisiblePage = (offset - (firstVisiblePageIndexBeforeRotation * pageWidth)) / pageWidth;
    } else {
        firstVisiblePageIndexBeforeRotation = 0;
        percentScrolledIntoFirstVisiblePage = offset / pageWidth;
    }    
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    // recalculate contentSize based on current orientation
    self.pagingScrollView.contentSize = [self contentSizeForPagingScrollView];

    // adjust frames and configuration of each visible page
    for (ImageScrollView *page in visiblePages) {
        CGPoint restorePoint = [page pointToCenterAfterRotation];
        CGFloat restoreScale = [page scaleToRestoreAfterRotation];
        page.frame = [self frameForPageAtIndex:page.index];
        [page setMaxMinZoomScalesForCurrentBounds];
        [page restoreCenterPoint:restorePoint scale:restoreScale];

    }

    // adjust contentOffset to preserve page location based on values collected prior to location
    CGFloat pageWidth = self.pagingScrollView.bounds.size.width;
    CGFloat newOffset = (firstVisiblePageIndexBeforeRotation * pageWidth) + (percentScrolledIntoFirstVisiblePage * pageWidth);
    self.pagingScrollView.contentOffset = CGPointMake(newOffset, 0);
}

#pragma mark -
#pragma mark  Frame calculations
#define PADDING  10

- (CGRect)frameForPagingScrollView {
    CGRect frame = [[UIScreen mainScreen] bounds];
    frame.origin.x -= PADDING;
    frame.size.width += (2 * PADDING);
    return frame;
}

- (CGRect)frameForPageAtIndex:(NSUInteger)index {
    // We have to use our paging scroll view's bounds, not frame, to calculate the page placement. When the device is in
    // landscape orientation, the frame will still be in portrait because the pagingScrollView is the root view controller's
    // view, so its frame is in window coordinate space, which is never rotated. Its bounds, however, will be in landscape
    // because it has a rotation transform applied.
    CGRect bounds = self.pagingScrollView.bounds;
    CGRect pageFrame = bounds;
    pageFrame.size.width -= (2 * PADDING);
    pageFrame.origin.x = (bounds.size.width * index) + PADDING;
    return pageFrame;
}

- (CGSize)contentSizeForPagingScrollView {
    // We have to use the paging scroll view's bounds to calculate the contentSize, for the same reason outlined above.
    CGRect bounds = self.pagingScrollView.bounds;
    return CGSizeMake(bounds.size.width * [self imageCount], bounds.size.height);
}

#pragma mark -
#pragma mark Image wrangling

- (void)setImageData:(NSArray *)customImageData
{
    _customImageData = customImageData;
}

- (NSArray *)imageData {
    static NSArray *__imageData = nil; // only load the imageData array once
    if (self.customImageData == nil) {
        // read the filenames/sizes out of a plist in the app bundle
//        NSString *path = [[NSBundle mainBundle] pathForResource:@"ImageData" ofType:@"plist"];
        NSString *path = [[NSBundle mainBundle] pathForResource:self.dataFileName ofType:@"plist"];
        NSData *plistData = [NSData dataWithContentsOfFile:path];
        NSString *error; NSPropertyListFormat format;
        __imageData = [NSPropertyListSerialization propertyListFromData:plistData
                                                        mutabilityOption:NSPropertyListImmutable
                                                                  format:&format
                                                        errorDescription:&error];
        if (!__imageData) {
            NSLog(@"Failed to read image names. Error: %@", error);
        }
    }
    else if (self.customImageData != nil)
    {
        __imageData = self.customImageData;
    }
    return __imageData;
}

- (UIImage *)imageAtIndex:(NSUInteger)index {
    // use "imageWithContentsOfFile:" instead of "imageNamed:" here to avoid caching our images
    NSString *imageName = [self imageNameAtIndex:index];

    UIImage *image;
    if ([imageName rangeOfString:@"http://"].location != NSNotFound) {
        NSURL *url = [NSURL URLWithString:imageName];
        //*

        NSString *cachedImage = [CRWCache cacheFileFromURL:url waitUntilFinish:NO andDelegate:self];

        if ([CRWCache isExpiredURL:url] || ![[NSFileManager defaultManager] fileExistsAtPath:cachedImage]) {
            self.indexForDownloadingImage = index;
        } else {
            self.indexForDownloadingImage = -1;
        }

        NSLog(@"cached image file = %@", cachedImage);
        if (self.indexForDownloadingImage < 0) {
            image = [UIImage imageWithContentsOfFile:cachedImage];
        } else {
            image = [UIImage imageWithContentsOfFile:[[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:kPhotoViewControllerLoadingImage]];
        }
        /*/
        NSData *data = [NSData dataWithContentsOfURL:url];
        image = [UIImage imageWithData:data];
        //*/
    }
    else {
        NSString *path = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:imageName];
        NSLog(@"image name = %@", path);
        image = [UIImage imageWithContentsOfFile:path];
    }

    return  image;
}

- (NSString *)imageNameAtIndex:(NSUInteger)index {
    NSString *name = nil;
    if (index < [self imageCount]) {
        NSDictionary *data = [[self imageData] objectAtIndex:index];
        name = [data valueForKey:kPhotoViewControllerImageName];
    }
    return name;
}

- (CGSize)imageSizeAtIndex:(NSUInteger)index {
    CGSize size = CGSizeZero;
    if (index < [self imageCount]) {
        NSDictionary *data = [[self imageData] objectAtIndex:index];
        size.width = [[data valueForKey:@"width"] floatValue];
        size.height = [[data valueForKey:@"height"] floatValue];
    }
    return size;
}

- (NSUInteger)imageCount {
    /*
    static NSUInteger __count = NSNotFound;  // only count the images once
    if (__count == NSNotFound) {
        __count = [[self imageData] count];
    }
    return __count;
    */
    return [[self imageData] count];
}

#pragma mark - ImageScrollViewDelegate

- (void)imageScrollViewRecivedTouch:(ImageScrollView *)view
{

}

#pragma mark - CRWCacheProtocol

- (void)finischCacheingWithPath:(NSString *)downloadedFilePath
{
    ImageScrollView *page = [self displayedPageForIndex:self.indexForDownloadingImage];
    if (page != nil)
    {
        [page removeFromSuperview];
        [recycledPages addObject:page];
        [visiblePages minusSet:recycledPages];
    }
    [self tilePages];
}

- (void)failedCacheingWithPath:(NSString *)downloadedFilePath
{
    NSLog(@"FAILED for path: %@",downloadedFilePath);
}

@end 
```

好的，现在问题来了。当我以模态方式引入 PhotoViewController 时，旋转正确，图片显示正确位置。

但是，当我在容器中显示 PhotoViewController（因此它的 contentView）时，所有子视图都会正确更改，除了保持原始方向（纵向）和滚动视图中“浮动”的图像。经过一番调试我发现这是因为方法

```
- (CGRect) frameForPageAtIndex: (NSUInteger) index {...} 
```

由

```
- (void) willAnimateRotationToInterfaceOrientation: (UIInterfaceOrientation) toInterfaceOrientation duration: (NSTimeInterval) duration {...} 
```

依次手动调用

```
 - (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation) {...} toInterfaceOrientation container 
```

不接收旋转的 pagingScrollView 但总是接收纵向。这似乎是正确的，因为此时尚未应用旋转。显然，使用模态转换，一切正常，但由于各种原因，我需要容器来管理旋转。

有什么方法可以将旋转传播到 pagingScrollView 还是有另一种方法让容器控制旋转？

编辑：一个可行但不是最好的小解决方法......以这种方式更正方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
        ...

        // manually call willRotateEtc because the rotation is virtual
        [self.currentController willRotateToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];

        // animate the rotation
        [UIView animateWithDuration:kAnimationDuration animations:^{
            self.contentView.transform = CGAffineTransformMakeRotation(rotation);
            self.contentView.bounds = frame;
            self.contentView.center = origin;
        }];

        // manually call willAnimateEtc because the rotation is virtual
        [self.currentController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];

        ...
} 
```

我得到正确调整大小的 pagingScrollView 。旋转效果很好，但是动画在第二个，第三个，……等等图像上产生了扫射效果，因为它在旋转之后居中，而不是在旋转执行时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:54:04.310

终于有了更好的解决方法:)

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
  {
    ...

    // manually call willRotateEtc because the rotation is virtual
    [self.currentController willRotateToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];

    // animate the rotation
    [UIView animateWithDuration:kAnimationDuration animations:^{
        self.contentView.transform = CGAffineTransformMakeRotation(rotation);
        self.contentView.bounds = frame;
        self.contentView.center = origin;
    // manually call willAnimateEtc because the rotation is virtual
    [self.currentController willAnimateRotationToInterfaceOrientation:toInterfaceOrientation duration:kAnimationDuration];
    }];

    ...
} 
```

由于图像是在动画之后而不是在动画期间旋转的，所以我简单地将对 willAnimateEtc 的调用移至动画块内。通过这种方式，我得到了与操作系统自动执行的非常相似的旋转。唯一剩下的就是：

1）图片右侧轻微一抖，但还算可以接受

2）状态栏是纵向的，这不是很好，但现在还可以

我将问题保持开放，以便任何人都可以轻松编写更好的替代方案并评估此答案。

感谢您未来的帮助:)

# c# - VS2010 rdlc 报告无法使用Oracle嵌入数据集

> ID：15088769
> 
> 赞同：1
> 
> 时间：2013-02-26T12:08:33.570
> 
> 标签：c#

我正在使用 VS2010 和 oracle 作为数据库。我正在尝试使用数据集创建 rdlc 动态报告。但是我不能像在 VS2008 中那样将数据集嵌入到 rdlc 报告中。如果有人知道，请告诉我详细的代码。

# image - PROCESSING：获取灰度图像的像素值

> ID：15088772
> 
> 赞同：0
> 
> 时间：2013-02-26T12:08:36.520
> 
> 标签：image, image-processing, processing, rgb, grayscale

```
grayValue = (int)((gray.pixels[locGray]))  ; 
```

灰度值应该是正的有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:33:41.530

locGray 是否在数组的范围内？如果超出范围，您可能会从内存中读取随机值，这是 c/c++

# c# - 设计一个可变类，在它被使用后变得不可变

> ID：15088773
> 
> 赞同：5
> 
> 时间：2013-02-26T12:08:45.177
> 
> 标签：c#, design-patterns, immutability

假设场景不允许实现不可变类型。根据这个假设，我想了解如何正确设计一种在使用后变得不可变的类型的意见/示例。

```
public class ObjectAConfig {

  private int _valueB;
  private string _valueA;
  internal bool Consumed { get; set; }

  public int ValueB {
    get { return _valueB; }
    set
    {
      if (Consumed) throw new InvalidOperationException();
      _valueB = value;
    }
  }

  public string ValueA {
    get { return _valueA; }
    set
    {
      if (Consumed) throw new InvalidOperationException();
      _valueA = value;
    }
  }
} 
```

`ObjectA`消耗时`ObjectAConfig`：

```
public ObjectA {

  public ObjectA(ObjectAConfig config) {

    _config = config;
    _config.Consumed = true;
  }
} 
```

我不满意这简单有效，我想知道是否有更好的模式（排除，`ObjectAConfig`如前所述，从一开始就设计不可变）。

例如：

*   可以有意义地定义一个像`Once<T>`允许包装值只初始化一次的monad吗？

*   定义一个返回类型本身更改私有字段的类型是否有意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T12:17:52.627

您正在实施的内容有时会以“[冰棒不变性](http://blogs.msdn.com/b/ericlippert/archive/2007/11/13/immutability-in-c-part-one-kinds-of-immutability.aspx)”的名义进行 - 即您可以冻结它。你目前的方法*会奏效*——事实上，我自己在很多地方都使用了这种模式。

您可能可以通过以下方式减少一些重复：

```
private void SetField<T>(ref T field, T value) {
    if (Consumed) throw new InvalidOperationException();
    field = value;
}
public int ValueB {
    get { return _valueB; }
    set { SetField(ref _valueB, value); }
}    
public string ValueA {
    get { return _valueA; }
    set { SetField(ref _valueA, value); }
} 
```

但是，还有另一种相关的方法：构建器。例如，参加您现有的课程：

```
public interface IConfig
{
    string ValueA { get; }
    int ValueB { get; }
}
public class ObjectAConfig : IConfig
{
    private class ImmutableConfig : IConfig {
        private readonly string valueA;
        private readonly int valueB;
        public ImmutableConfig(string valueA, int valueB)
        {
            this.valueA = valueA;
            this.valueB = valueB;
        }
    }
    public IConfig Build()
    {
        return new ImmutableConfig(ValueA, ValueB);
    }
    ... snip: implementation of ObjectAConfig
} 
```

这里有一个真正不可变的实现`IConfig`，以及您的原始实现。如果您想要冻结版本，请致电`Build()`.

# javascript - 循环创建元素的值始终为 5

> ID：15088777
> 
> 赞同：0
> 
> 时间：2013-02-26T12:08:54.323
> 
> 标签：javascript, jquery, html

有人可以告诉我为什么当我单击生成的名称列表（myhand）旁边创建的 [s] href 时，它总是说选择并且我是 5？

```
var printDD = function(myhand, mydiv){
    var dtext = "";
    for(var i = 0;  i < myhand.length; i++){
        dtext += '<a href="#" id="dd'+i+'">[s]</a>' + myhand[i] + ', ';
    }

    mydiv.html(dtext);

    for(var i = 0;  i < myhand.length; i++){
        $('#dd'+i).click(function(){
        selection = i;
        console.log("sel: " + selection + " i: " + i);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:22:16.583

你想看看[循环内的 JavaScript 闭包——简单实用的例子](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)。正如该问题的答案所说，您可以创建一个函数来返回一个，或者您可以在`for`循环中使用内联函数调用，如下所示：

```
for(var i = 0;  i < myhand.length; i++) {
    $('#dd'+i).click((function(x) {
        return function () {
            selection = x;
            console.log("sel: " + selection + " x: " + x);
        }
    }(i)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:12:18.150

因为 的值`i`是在单击处理程序运行时确定的。所以它总是有 的值，这是你在-loop之后`myhand.length - 1`留下的状态。`i``for`

# c++ - 如何将输入的字符串放入C++中的字符数组中？

> ID：15088778
> 
> 赞同：1
> 
> 时间：2013-02-26T12:09:04.817
> 
> 标签：c++, string, getchar

现在，我面临这样一个问题：比较两个字符串而不在库函数中使用“strcmp”。

我已经正确定义了函数“mystrcmp”，但我还必须将输入的字符串放入字符数组中。我怎样才能意识到它？

这是我的错误代码：

```
char a1[100],a2[100];
int j=0;
do
{
    cin>>a1[j];
    j=j+1;
}while(getchar()!=10);
int k=0;
do
{
    cin>>a2[k];
    k=k+1;
}while(getchar()!=10);

cout<<j<<"  "<<k<<"\n"; 
```

我想通过 j 和 k 查看循环是否正确。不幸的是，结果是错误的。例如，当我输入“abcdefg”和“gfedcba”时，我得到的结果是“j=4, k=4”。

我的代码有什么问题？我该如何纠正？

我期待着你的回答。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:21:45.323

为什么在代码中使用值 10？不要使用整数文字代替字符常量，因为当您尝试在使用 EBCDIC 字符集的计算机上运行此代码时，您会注意到 '\n' 的值是 37，而不是 10。使用 '\n ' 而不是 10。

不要混合 getchar 和 cin 代码。这是一个非常糟糕的主意，因为它们都消耗一个字符。换句话说， getchar() 消耗一个字节，而 cin 消耗一个字节，因此每个循环消耗两个字节并且只存储其中一个字节。如果您要使用 getchar，我认为您的意思是这样的：

```
for (int c = getchar(); c >= 0 && c != '\n'; c = getchar()) {
    a1[j++] = c;
}
a1[j] = '\0'; 
```

使用 C++ 的 cin 做同样的事情：

```
for (int c = cin.get(); cin.good() && c != '\n'; c = cin.get()) {
    a1[j++] = c;
}
a1[j] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:15:21.203

这是危险的代码。你可以写出 a1 & a2 的界限。使用为此制作的功能，例如`cin.getline`

[http://www.cplusplus.com/reference/istream/istream/getline/](http://www.cplusplus.com/reference/istream/istream/getline/)

# c# - 在 windows phone 8 中应用不同的颜色与主题

> ID：15088789
> 
> 赞同：1
> 
> 时间：2013-02-26T12:09:29.453
> 
> 标签：c#, windows-phone-8

我的设计页面中有两个数据模板，如 Windows phone 页面中的“IncomingMessageTemplate”和“OutgoingMessageTemplate”，如下所示

```
 <DataTemplate>
            <Grid Margin="12" >
               <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                 <ColumnDefinition Width="Auto"/>
                 </Grid.ColumnDefinitions>

                    ..... .... any content 
              </Grid>
           </DataTemplate> 
```

我需要对一个数据模板应用不同的颜色。但是我不能给静态不同的颜色（比如“红色”......），因为用户可以更改主题。所以我关心的是用户可以根据自己的意愿更改主题。 .但是需要将“OutgoingMessageTemplate”更改为主题颜色以外的其他颜色..而“IncomingMessageTemplate”是主题颜色..有可能..任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:00:05.900

可以覆盖用户选择的主题，但您必须编写一些代码来管理它。请参阅此博客文章[Windows Phone Mango 自定义应用程序主题一步一步](http://windowsphonegeek.com/articles/windows-phone-mango-custom-application-theme-step-by-step)。也可以只强制使用深色主题或浅色主题。

# c# - 从 Visual Studio 2003 迁移到 Visual Studio 2005 后出现非法线程调用错误

> ID：15088790
> 
> 赞同：1
> 
> 时间：2013-02-26T12:09:29.917
> 
> 标签：c#, visual-studio

我已将我的工具代码从 Visual Studio 2003 转换为 Visual Studio 2005，并在运行时出现非法跨线程异常，而在另一台具有相同配置的机器上没有错误并且该工具工作正常。

发生这种情况有什么具体原因吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-05-23T08:27:47.893

您可以通过在表单的加载功能中键入以下命令来解决此问题。

```
 private void Form1_Load(object sender, EventArgs e)
 {
      CheckForIllegalCrossThreadCalls = false;
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T12:15:03.533

自 VS 2005 以来有一个新属性，默认`Control.CheckForIllegalCrossThreadCalls`设置为`true`调试器模式。如果您可以忍受未处理的跨线程调用，则可以通过设置禁用检查：

```
Control.CheckForIllegalCrossThreadCalls = false; 
```

但是处理异常而不是忽略它们总是一个更好的主意。

# python - Sphinx autodoc 死于第三方包的 ImportError

> ID：15088792
> 
> 赞同：4
> 
> 时间：2013-02-26T12:09:46.737
> 
> 标签：python, python-sphinx, autodoc

有什么方法可以排除模块的导入部分，然后用 sphinx-python 记录它？我有一个导入另一个包（其他不同项目）的模块，然后狮身人面像给出了这个错误：

> """ 文件 "/usr/local/lib/python2.7/dist-packages/Sphinx-1.1.3-py2.7.egg/sphinx/ext/autodoc.py"，第 321 行，在 import_object **import** (self. modname) 文件“/home/x/GitHub/project/mod_example1.py”，第 33 行，在 from other_pck import Klass, KlassStuff ImportError: No module named other_pck """

如果我在调用/导入打包 sphinx 的模块中注释导入部分，则可以执行 autodoc。我尝试了所有 sphinx autodoc 模块：autoclass、automodule 等......但是一旦尝试导入另一个包，结果总是相同的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T15:22:59.953

您正在以错误的方式解决问题。解决此问题的正确方法是让 Sphinx 了解您现有的其他包，因为 autodoc 功能**必须**导入 Python 包来扫描源代码。如果没有解决所有依赖项，就无法导入 Python 包，并且您不能从中挑选出几行源代码，因为这就是 Python 的构建方式（*）

可能的解决方案是

*   创建一个 Python virtualenv 环境，Sphinx 和其他包都驻留，以便他们可以看到彼此[http://opensourcehacker.com/2012/09/16/recommended-way-for-sudo-free-installation-of-python -带有虚拟环境的软件/](http://opensourcehacker.com/2012/09/16/recommended-way-for-sudo-free-installation-of-python-software-with-virtualenv/)

*   在 Sphinx 配置文件中设置 PYTHONPATH 环境变量或编辑 sys.path，以便在运行 Sphinx 时将丢失的包添加到导入列表中[http://scienceoss.com/minimal-sphinx-setup-for-autodocumenting-python-modules/](http://scienceoss.com/minimal-sphinx-setup-for-autodocumenting-python-modules/)

*）理论上你可以，但这超出了狮身人面像和这个问题的范围

# jquery - Javascript 在 chrome 中不起作用，但在 FF 中起作用

> ID：15088793
> 
> 赞同：0
> 
> 时间：2013-02-26T12:09:47.700
> 
> 标签：jquery, ajax

我无法调用该函数，`credit_edit()`尤其是在 chrome 中，但它在 firefox 中有效。

我不知道问题出在哪里

我从

```
onkeyup (onkeyup = 'credit_edit(this.value)') 
```

请有人为此提供解决方案。

credit_apply() 是主要功能。只有我从这个函数调用。

我`credit_edit(this.value)`在 credit_apply() 函数中使用了这段代码

```
function credit_apply(change){
        $.ajax({
            url: 'ajax/order_details.php?order_id=<?php echo $_GET['id']; ?>',
            dataTypes: 'json',
            type: 'GET',
            success: function(json){
                if(change=='apply'){
                    $('#credit_apply').html('<button type="button" name="apply" onClick="credit_apply(\'undo\');" id="apply" style="margin-left:52px; margin-top:10px;" class="new-row float_left button orange-gradient glossy">Undo Changes</button>');

                    if_total = $('#title_value'+json).val();
                    if_return = $('#return_credit').val();
                    if(parseFloat(if_total) <= parseFloat(if_return)){
                        get_value = parseFloat(if_return) - parseFloat(if_total);
                        credit_value = $('#credit_value').val();
                        $('#title_value'+json).val(0);
                        $('#numner_text'+json).html('$0');
                        $("#credit"+json).html('<td align="right" colspan="4"><span id="credit_title_text">Credit Amount( - )</span><input id="credit_value" type="hidden" value="' + if_total + '" name="credit_value"><input id="credit_original" type="hidden" name="credit_original" value="' + if_total + '"></td><td align="right" onclick="credit_id();"><span id="credit_title_value">$' + if_total + '</span><input class="input" size="5" id="credit_edit" onkeyup="credit_edit(this.value);" type="text" style="display:none" value="' + if_total + '" name="credit_edit"></td>');
                    }else{
                        get_value = (parseFloat(if_total) - parseFloat(if_return)).toFixed(2);
                        credit_value = $('#credit_value').val();
                        $('#title_value'+json).val(get_value);
                        $('#numner_text'+json).html('$'+get_value);
                        $("#credit"+json).html('<td align="right" colspan="4"><span id="credit_title_text">Credit Amount( - )</span><input id="credit_value" type="hidden" value="' + if_return + '" name="credit_value"><input id="credit_original" type="hidden" name="credit_original" value="' + if_return + '"></td><td align="right" onclick="credit_id();"><span id="credit_title_value">$' + if_return + '</span><input class="input" size="5" id="credit_edit" onkeyup="credit_edit(this.value);" type="text" style="display:none" value="' + if_return + '" name="credit_edit"></td>');
                    }

                }else{
                    $('#credit_apply').html('<button type="button" name="apply" onClick="credit_apply(\'apply\');" id="apply" style="margin-left:80px; margin-top:10px;" class="new-row float_left button green-gradient glossy">Apply</button>');
                    original = $('#original_total').val();
                    $('#credit'+json).html('<input id="credit_value" type="hidden" value="0" name="credit_value">');
                    $('#title_value'+json).val(original);
                    $('#numner_text'+json).html('$'+original);
                }
            }
        });
    }

function credit_edit(value){
        original_c = document.getElementById("credit_original").value;
        searc = value.search(" ");
        if(value==''||value=='null'){
            $('#credit_edit').val(0);
            $('#credit_value').val(0);
            apply_change(0);
        }else if(isNaN(value)){
            $('#credit_edit').val(original_c);
            $('#credit_value').val(original_c);
            apply_change(original_c);
        }else if(searc!=-1){
            $('#credit_edit').val(original_c);
            $('#credit_value').val(original_c);
            apply_change(original_c);
        }else if(parseFloat(original_c) >= parseFloat(value)){
            $('#credit_value').val(value);
            apply_change(value);
        }else{
            $('#credit_edit').val(original_c);
            $('#credit_value').val(original_c);
            apply_change(original_c);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:45:13.177

尝试取出 html 中的所有“onkeyup”事件，然后在“if change=..”语句的末尾执行以下操作：

```
if(change=='apply'){
                $('#credit_apply').html('<button type="button" name="apply" onClick="credit_apply(\'undo\');" id="apply" style="margin-left:52px; margin-top:10px;" class="new-row float_left button orange-gradient glossy">Undo Changes</button>');

                if_total = $('#title_value'+json).val();
                if_return = $('#return_credit').val();
                if(parseFloat(if_total) <= parseFloat(if_return)){
                    get_value = parseFloat(if_return) - parseFloat(if_total);
                    credit_value = $('#credit_value').val();
                    $('#title_value'+json).val(0);
                    $('#numner_text'+json).html('$0');
                    $("#credit"+json).html('<td align="right" colspan="4"><span id="credit_title_text">Credit Amount( - )</span><input id="credit_value" type="hidden" value="' + if_total + '" name="credit_value"><input id="credit_original" type="hidden" name="credit_original" value="' + if_total + '"></td><td align="right" onclick="credit_id();"><span id="credit_title_value">$' + if_total + '</span><input class="input" size="5" id="credit_edit" onkeyup="credit_edit(this.value);" type="text" style="display:none" value="' + if_total + '" name="credit_edit"></td>');
                }else{
                    get_value = (parseFloat(if_total) - parseFloat(if_return)).toFixed(2);
                    credit_value = $('#credit_value').val();
                    $('#title_value'+json).val(get_value);
                    $('#numner_text'+json).html('$'+get_value);
                    $("#credit"+json).html('<td align="right" colspan="4"><span id="credit_title_text">Credit Amount( - )</span><input id="credit_value" type="hidden" value="' + if_return + '" name="credit_value"><input id="credit_original" type="hidden" name="credit_original" value="' + if_return + '"></td><td align="right" onclick="credit_id();"><span id="credit_title_value">$' + if_return + '</span><input class="input" size="5" id="credit_edit" onkeyup="credit_edit(this.value);" type="text" style="display:none" value="' + if_return + '" name="credit_edit"></td>');
                }
             //HERE
              $("#credit_edit").keyup(function(event)
              {
                 credit_edit($(this).val());
              });
            }else{
                $('#credit_apply').html('<button type="button" name="apply" onClick="credit_apply(\'apply\');" id="apply" style="margin-left:80px; margin-top:10px;" class="new-row float_left button green-gradient glossy">Apply</button>');
                original = $('#original_total').val();
                $('#credit'+json).html('<input id="credit_value" type="hidden" value="0" name="credit_value">');
                $('#title_value'+json).val(original);
                $('#numner_text'+json).html('$'+original);
            } 
```

# javascript - 如何点击第二张图片

> ID：15088799
> 
> 赞同：0
> 
> 时间：2013-02-26T12:09:58.267
> 
> 标签：javascript

我的网页加载了 2 个东西，一个图像和一个画布。

当页面加载网页加载图片。如果我单击某处，页面会加载画布。

现在我想如果我点击图片会发生一些事情但是怎么能说 onclick -> 当图片被点击时。

我想我可以在我的照片中使用 ID。但是在创建图片时如何在 javascript 中给出 iD 呢？

```
 <script type="text/javascript">
function start() {  
      var vierkant = document.getElementById("Vierkant");  

      initWebGL(vierkant);      // Initialize the GL context  

      // Only continue if WebGL is available and working  

      if (gl) {  
        gl.clearColor(0.0, 0.0, 5.0, 1.0);                      // Set clear color to black, fully opaque  
        gl.enable(gl.DEPTH_TEST);                               // Enable depth testing  
        gl.depthFunc(gl.LEQUAL);                                // Near things obscure far things  
        gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);      // Clear the color as well as the depth buffer.

      }  
    }
function startImage()
{
        var img = document.createElement("img");
        img.src = "Bus_Stop_2.png"; 
        document.body.appendChild( img );
        img.

}

    function initWebGL(vierkant) {  
      // Initialize the global variable gl to null.  
      gl = null;  

      try {  
        // Try to grab the standard context. If it fails, fallback to experimental.  
        gl = vierkant.getContext("webgl") || vierkant.getContext("experimental-webgl");  
      }  
      catch(e) {}  

      // If we don't have a GL context, give up now  
      if (!gl) {  
        alert("Unable to initialize your 'Vierkant'.");  
      }  
    }  

</script>

    <body onclick="start()" onload="startImage()">  
      <canvas id="Vierkant" width="640" height="480">  
        Your browser doesn't appear to support the HTML5 <code>&lt;canvas&gt;</code> element.  
      </canvas>  
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:40:15.400

只需在创建图像后执行此操作，

```
img.onclick = function() { alert('image clicked') }; 
```

你可以做你的工作来代替警觉！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:42:28.017

这应该有效：

```
function startImage()
{
        var img = document.createElement("img");
        img.src = "Bus_Stop_2.png"; 
        document.body.appendChild( img );
        img.onclick = function (evt) {
            // do something here
        };
} 
```

要设置 id，您可以使用：`img.setAttribute('id', 'myid');`

# ruby - Ruby：一个程序中的 Sinatra 和无限循环

> ID：15088801
> 
> 赞同：2
> 
> 时间：2013-02-26T12:09:59.447
> 
> 标签：ruby, sinatra

我有一个程序，它在无限循环中执行某些操作（它是一个守护进程）。这工作正常。

现在我计划在sintra 的帮助下为该守护进程提供一个Web 界面。sinatra 代码本身也可以正常工作。但是，只要我在一个脚本中拥有循环和 sinatra 代码，就**不会**执行 sinatra 代码。启动时没有错误消息，但本地 Web 服务未启动。

这里的代码精简为基础：

```
#!/usr/bin/env ruby

require 'rubygems'
require 'sinatra'
require_relative 'lib/functions'

do_init_env # (some init steps, no influence on the startup of sinatra)

get '/' do
  erb :web
end

# infinity Loop
loop do
  if File.exists? somefile
    do_something
  end
  sleep 10
end 
```

禁用循环时，sinatra 启动正常：

```
ruby ./mydaemon.rb
[2013-02-26 12:57:24] INFO  WEBrick 1.3.1
[2013-02-26 12:57:24] INFO  ruby 1.9.3 (2013-02-06) [armv6l-linux-eabi]
== Sinatra/1.3.5 has taken the stage on 4567 for development with backup from WEBrick
[2013-02-26 12:57:24] INFO  WEBrick::HTTPServer#start: pid=13457 port=4567
^C
== Sinatra has ended his set (crowd applauds)
[2013-02-26 12:57:36] INFO  going to shutdown ...
[2013-02-26 12:57:36] INFO  WEBrick::HTTPServer#start done. 
```

启用循环时：

沉默，直到中断循环：

```
ruby ./mydaemon.rb

^C./mydaemon.rb:39:in `sleep': Interrupt
        from ./mydaemon.rb:39:in `block in <main>'
        from ./mydaemon.rb:33:in `loop'
        from ./mydaemon.rb:33:in `<main> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T17:07:59.590

Rack 在启动时按原样运行脚本。*“get”等命令只是为 Sinatra 存储信息以便稍后*响应 rack 。任何无限循环都会简单地开始。

您可以通过添加线程并在子线程上启动循环来解决此问题。如果循环正在做一些轻量级的事情，您可以通过与 Web 服务器共享一点内存来获得性能，这可能是值得的。但是，使用线程交互通常是一个令人头疼的编码问题。

您最好将 Web 服务器和长时间运行的循环分成不同的脚本，在它们自己的进程中运行，并让循环将可读数据发送到例如文件或数据库，Web 服务器可以获取并提供这些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T17:17:01.583

如果你真的想将 Sinatra 进程作为守护进程运行，也许可以考虑在它自己的进程中运行它（因此使用它自己的脚本）。考虑例如使用守护进程 gem：[http ://daemons.rubyforge.org/](http://daemons.rubyforge.org/)

# javascript - 如何使用 JavaScript 安排 div 显示？

> ID：15088802
> 
> 赞同：0
> 
> 时间：2013-02-26T12:10:00.450
> 
> 标签：javascript

我有一个`div id="button"`我想在工作日（周一到周五）上午 9 点到晚上 19​​ 点展示。当`div`不显示（“else”）时，我想显示一个`div id="different"`.

我想我在这里找到了一个类似但更复杂的解决方案[Show div based on getDay and getHours + getMinutes](https://stackoverflow.com/questions/13556126/show-div-based-on-getday-and-gethours-getminutes)

问题是我在 JS 中是个假人，跟不上。一个简单且易于调整的复制/粘贴解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:27:43.260

这是一个更简单的解决方案：

```
var dt = new Date(); // get current date
var dy = dt.day(); // get the day from the date object
var hr = dt.getHours(); // get the hour from the date object

if (dy >= 1 && dy <= 5 && hr >= 9 && hr < 19) { // check the time is right
    document.getElementById('button').style.display = 'block'; // shows button as block
    document.getElementById('other').style.display = 'none'; // hides "other" button.
} else {
    document.getElementById('button').style.display = 'none'; // shows button as block
    document.getElementById('other').style.display = 'block'; // hides "other" button.
} 
```

这非常具体地按照您所说的进行，但可以参考[此页面](http://www.w3schools.com/jsref/jsref_obj_date.asp)进行调整，如果您需要，它将为您提供天数（星期日为 0、星期一 1 等）和 JavaScript Date 对象的其他属性。

[我相信其他人也可以用它打一些[代码高尔夫](http://en.wikipedia.org/wiki/Code_golf)。]

# c# - 以编程方式启动/停止自托管 WCF 数据服务

> ID：15088803
> 
> 赞同：0
> 
> 时间：2013-02-26T12:10:02.073
> 
> 标签：c#, multithreading, wcf-data-services

嗨，我有几个项目的解决方案。其中之一是自托管的 WCF 数据服务。

该服务自己运行良好，但我想从我的主要方法启动它。这样我可以控制是应该启动还是停止。

为什么我需要这样做是因为我可以运行我的 main 方法并让服务启动，但是当程序退出时，服务仍在运行。

有人知道如何解决我的问题吗？

- 编辑 -

这项服务对我来说是新事物。所以我什至不确定这是否可能。假设我有 2 个项目。一个包含我的主要方法，另一个是 WCF 服务应用程序项目。我希望能够随时从主项目中停止我的服务。

--EDIT2--

我正在创建一个可以通过 API（WCF 数据服务）向客户端提供数据的系统。当我的系统启动时，我想启动服务。当我的系统关闭时，我的服务必须停止现有的或至少停止提供数据。

# java - 在 Android 中附加两个 Mp3 文件

> ID：15088806
> 
> 赞同：1
> 
> 时间：2013-02-26T12:10:08.623
> 
> 标签：java, android, arrays, android-mediaplayer, android-file

我如何在android中附加两个音频文件。我试过这个，但它不起作用。请给我一个解决方案。我需要连接来自 ts A.mp3 和 B.mp3 的 sdcard 中的文件。当我合并连接方法调用时，我希望它们都作为 sdcard 中的单个文件，即 C.mp3 .... ……

```
File original= new File("/mnt/sdcard/A.mp3");
 File temp=new File("/mnt/sdcard/B.mp3");
        Log.i("...............",""+path);

        try {
            File outFile= new File("/mnt/sdcard/C.mp3 ");

            DataOutputStream out=new DataOutputStream(new BufferedOutputStream(new FileOutputStream(outFile)));

        //  FileOutputStream out=new FileOutputStream(outFile);

            //OutputStream out = new FileOutputStream(original,true);

            int m,n;
            m=(int) temp.length();
            n=(int) original.length();

             byte[] buf1 = new byte[m];
             byte[] buf2 = new byte[n];

             byte[] outBytes = new byte[m+n];

             DataInputStream dis1=new DataInputStream(  new BufferedInputStream(new FileInputStream(original)));
             DataInputStream dis2=new DataInputStream(  new BufferedInputStream(new FileInputStream(temp)));

             dis1.read(buf1, 0, m);
             dis1.close();

             dis2.readFully(buf2, 0, n);
             dis2.close();

             out.write(buf1);
             out.write(buf2);
            out.flush();

                //in.close();
                out.close();
                System.out.println("File copied.");

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

我需要将文件 A.mp3,B.mp3 合并到 C.mp3 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:22:44.780

除了knowbody的回答，更多信息可以参考mp3文件格式规范[HERE](http://mpgedit.org/mpgedit/mpeg_format/MP3Format.html)和[HERE](http://www.multiweb.cz/twoinches/mp3inside.htm)。

拼接两个 mp3 文件时，您应该考虑很多事情。至少可以说，它们需要由相同的程序以相同的设置进行编码，或者如果我们谈论的是语音，则需要从相同的麦克风中获取，使用相同的设置等进行设置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T12:17:17.510

```
import java.io.*;
public class TwoFiles
{
    public static void Main(String args[]) throws IOException
    {
        FileInputStream fistream1 = new FileInputStream("C:\\Temp\\1.mp3");
        FileInputStream fistream2 = new FileInputStream("C:\\Temp\\2.mp3");
        SequenceInputStream sistream = new SequenceInputStream(fistream1, fistream2);
        FileOutputStream fostream = new FileOutputStream("C:\\Temp\\final.mp3");

    int temp;

    while( ( temp = sistream.read() ) != -1)
    {

        fostream.write(temp);  
    }
    fostream.close();
    sistream.close();
    fistream1.close();
    fistream2.close();
}
} 
```

我希望清楚

# java - 如何在 Java 和 Javascript 之间共享常量

> ID：15088807
> 
> 赞同：8
> 
> 时间：2013-02-26T12:10:09.390
> 
> 标签：java, javascript, jquery

我的 java 类中有静态变量 CONSTANT_1、CONSTANT_2...
与我的 javascript 函数共享这些常量的最佳方法是什么，或者是否有一个 JQuery 插件。

到目前为止，我能想到的唯一解决方案是在开始时调用 ajax，将这些静态变量发送到客户端。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:17:18.960

我不知道这是否是最好的方法，但它确实有效。

```
var constant1=<%=class.CONSTANT_1%>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:21:39.183

您可以在隐藏字段中设置此静态变量，然后您可以使用此隐藏字段通过 javascript 访问它

```
<input type="hidden" value="<your static variable>" id="staticVariable" />
<script type="text/javascript">
    function getStaticField(){
        return document.getElementById("staticVariable").value;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:21:20.050

我以前遇到过这个问题。我所做的只是我声明`hidden`了我可以在服务器端访问的输入字段，并用我想要的任何东西设置它的值。

```
<input type="hidden" runat="server" id="hiddenInput" /> 
```

然后使用编程语言（我使用 c#）：

```
hiddenInput.Value = ValueOnServerSide; 
```

然后使用 jQuery 我在客户端获取此输入的值。

```
$("[id$='hiddenInput']").val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:42:59.853

有一种技术叫做`'DWR' (directwebremoting)`。

通过使用它，我们可以直接在 Javascript 中访问 Java 类。

试试这个，它可能对你有帮助。

参考链接：

[http://directwebremoting.org/dwr/introduction/getting-started.html](http://directwebremoting.org/dwr/introduction/getting-started.html)

[http://directwebremoting.org/dwr/introduction/scripting-dwr.html](http://directwebremoting.org/dwr/introduction/scripting-dwr.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T10:01:14.213

如果您不想继续重新加载页面，可以使用 AJAX 调用来获取常量的值。如果您对仅在刷新时更新的值感到满意，您可以按照 Sainath 所说的去做，这样您就不会进行不必要的 AJAX 调用：

```
var constant1=<%=class.CONSTANT_1%>; 
```

# php - 'HTTP_HOST' 没有被正确评估？

> ID：15088809
> 
> 赞同：0
> 
> 时间：2013-02-26T12:10:10.400
> 
> 标签：php

当出现错误（如 400,404,403 等）时，我使用 php 脚本向我发送电子邮件并告知正在尝试的内容。

我注意到一个 400 错误，'from' 和 'to' 不包含我的域名，而是另一个域名。这是我使用的一些代码..

PHP代码：

```
$http_host = $_SERVER["HTTP_HOST"]; 
$http_host = str_replace("www.", "", $http_host); 
$from = "From: webmaster@" . $http_host . "\r\n"; 
$to = "From: webmaster@" . $http_host . "\r\n"; 
```

var $http_host 在那里有另一个域名。幸运的是，电子邮件被退回，所以我意识到了这个问题。这是网络访问日志条目

```
94.102.51.246 - - [23/Feb/2013:16:17:49 +1100] "GET http://24x7-allrequestsallowed.com/?...RWJWS_FA%40FQN HTTP/1.1" 400 2815 "-" "Mozilla/5.0 (Windows NT 6.1; rv:16.0) Gecko/20100101 Firefox/16.0" 
```

它似乎`$_SERVER["HTTP_HOST"]`被评估为“24x7-allrequestsallowed.com”

我很困惑这是如何将其解析为 URL 的，但更令人不安的是 $_SERVER["HTTP_HOST"] 没有设置为“正确的”域名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:14:59.880

改变：

```
 $http_host = $_SERVER["HTTP_HOST"]; 
 $http_host = str_replace("www.", "", $http_host); 
```

...到...

```
 $http_host = $_SERVER["SERVER_NAME"]; 
 $http_host = str_replace("www.", "", $http_host); 
```

将返回“正在执行当前脚本的服务器主机的名称。如果脚本在虚拟主机上运行，​​这将是为该虚拟主机定义的值。”

来源： http: [//php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

# ios - GMail、IMAP、oAuth 2.0 和获取电子邮件

> ID：15088811
> 
> 赞同：2
> 
> 时间：2013-02-26T12:10:12.807
> 
> 标签：ios, objective-c, gmail, imap, mailcore

我想从 gmail 帐户获取电子邮件。我已经设法使用 oAuth 2.0 获得了活动令牌，但我不知道从这里去哪里。谷歌和 stackOverflow 把我带到了这里：[https](https://developers.google.com/google-apps/gmail/imap_extensions) ://developers.google.com/google-apps/gmail/imap_extensions但我仍然不明白如何编写一个简单的片段来获取电子邮件到一个数组中。我考虑过使用 MailCore，它本身就很好用，但它不使用 oAuth 2.0，这对我来说是必须的，所以我坚持使用 gmail imap_extensions（API？）或者它应该是什么。我尝试在谷歌上挖掘更多内容，但找不到**任何**有用的东西。怎么可能在 Objective-c 中甚至没有一个关于通过 oAuth 2.0 使用 Gmail IMAP 的示例？真的很奇怪。

编辑：我应该提到我也遇到过这个：[https](https://developers.google.com/google-apps/gmail/xoauth2_libraries) ://developers.google.com/google-apps/gmail/xoauth2_libraries但那里没有objective-c示例

任何帮助，将不胜感激。

# c# - 在 .net 中管理高/低优先级线程

> ID：15088812
> 
> 赞同：2
> 
> 时间：2013-02-26T12:10:16.747
> 
> 标签：c#, multithreading, concurrency, interlocked-increment

场景如下：有几个低优先级线程可以被高优先级线程中断。每当高优先级线程要求低优先级线程暂停时，它们将进入`Wait`状态（如果它们尚未处于等待状态）。然而，当一个高优先级线程发出低优先级线程可以`Resume`的信号时，低优先级线程不应该恢复，直到所有要求低优先级线程暂停的高优先级线程都同意。

为了解决这个问题，我在计数器变量中跟踪`Pause()`从高优先级线程到低优先级线程的调用。每当高优先级线程向低优先级线程请求 时`Pause()`，计数器的值就会增加 1。如果在增加后计数器的值是`1`，则表示线程不处于`Wait`，因此要求它进入`Wait`状态。否则只是增加`counter`价值。相反，当高优先级线程调用时`Resume()`，我们将`counter`值递减，如果递减后值为`0`，则表示低优先级线程`Resume`现在可以。

这是我的问题的简化实现。if 语句中的比较操作`Interlocked.XXX`不正确，即

> if (Interlocked.Increment(ref _remain) == 1)

，因为读取/修改和比较操作不是原子的。

我在这里想念什么？我不想使用线程优先级。

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace TestConcurrency
{

// I borrowed this class from Joe Duffy's blog and modified it
public class LatchCounter
{
 private long _remain;
 private EventWaitHandle m_event;
 private readonly object _lockObject;

public LatchCounter()
{
    _remain = 0;
    m_event = new ManualResetEvent(true);
    _lockObject = new object();
}

public void Check()
{
    if (Interlocked.Read(ref _remain) > 0)
    {
        m_event.WaitOne();
    }
}

public void Increment()
{
    lock(_lockObject)
    {
       if (Interlocked.Increment(ref _remain) == 1)
           m_event.Reset();
    }
}

public void Decrement()
{
    lock(_lockObject)
    {
       // The last thread to signal also sets the event.
       if (Interlocked.Decrement(ref _remain) == 0)
           m_event.Set();
    }
}
}

public class LowPriorityThreads
{
private List<Thread> _threads;
private LatchCounter _latch;
private int _threadCount = 1;

internal LowPriorityThreads(int threadCount)
{
    _threadCount = threadCount;
    _threads = new List<Thread>();
    for (int i = 0; i < _threadCount; i++)
    {
        _threads.Add(new Thread(ThreadProc));
    }

    _latch = new CountdownLatch();
}

public void Start()
{
    foreach (Thread t in _threads)
    {
        t.Start();
    }
}

void ThreadProc()
{
    while (true)
    {
        //Do something
        Thread.Sleep(Rand.Next());
        _latch.Check();
    }
}

internal void Pause()
{
    _latch.Increment();
}

internal void Resume()
{
    _latch.Decrement();
}
}

public class HighPriorityThreads
{
private Thread _thread;
private LowPriorityThreads _lowPriorityThreads;

internal HighPriorityThreads(LowPriorityThreads lowPriorityThreads)
{
    _lowPriorityThreads = lowPriorityThreads;
    _thread = new Thread(RandomlyInterruptLowPriortyThreads);
}

public void Start()
{
    _thread.Start();
}

void RandomlyInterruptLowPriortyThreads()
{
    while (true)
    {
        Thread.Sleep(Rand.Next());

        _lowPriorityThreads.Pause();

        Thread.Sleep(Rand.Next());
        _lowPriorityThreads.Resume();
    }
}
}

 class Program
 {
  static void Main(string[] args)
  {
    LowPriorityThreads lowPriorityThreads = new LowPriorityThreads(3);
    HighPriorityThreads highPriorityThreadOne = new HighPriorityThreads(lowPriorityThreads);
    HighPriorityThreads highPriorityThreadTwo = new HighPriorityThreads(lowPriorityThreads);

    lowPriorityThreads.Start();
    highPriorityThreadOne.Start();
    highPriorityThreadTwo.Start();
}
}

class Rand
{
internal static int Next()
{
    // Guid idea has been borrowed from somewhere on StackOverFlow coz I like it
    return new System.Random(Guid.NewGuid().GetHashCode()).Next() % 30000;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:57:24.880

我不知道您的要求，因此我不会在这里讨论它们。就实现而言，我将介绍一个“调度程序”类，该类将处理线程间交互并充当“可运行”对象的工厂。

当然，实施是非常粗糙的，而且很容易受到批评。

```
class Program
{
    static void Main(string[] args)
    {
        ThreadDispatcher td=new ThreadDispatcher();
        Runner r1 = td.CreateHpThread(d=>OnHpThreadRun(d,1));
        Runner r2 = td.CreateHpThread(d => OnHpThreadRun(d, 2));

        Runner l1 = td.CreateLpThread(d => Console.WriteLine("Running low priority thread 1"));
        Runner l2 = td.CreateLpThread(d => Console.WriteLine("Running low priority thread 2"));
        Runner l3 = td.CreateLpThread(d => Console.WriteLine("Running low priority thread 3"));

        l1.Start();
        l2.Start();
        l3.Start();

        r1.Start();
        r2.Start();

        Console.ReadLine();

        l1.Stop();
        l2.Stop();
        l3.Stop();

        r1.Stop();
        r2.Stop();
    }

    private static void OnHpThreadRun(ThreadDispatcher d,int number)
    {
        Random r=new Random();
        Thread.Sleep(r.Next(100,2000));
        d.CheckedIn();
        Console.WriteLine(string.Format("*** Starting High Priority Thread {0} ***",number));
        Thread.Sleep(r.Next(100, 2000));
        Console.WriteLine(string.Format("+++ Finishing High Priority Thread {0} +++", number));
        Thread.Sleep(300);
        d.CheckedOut();           
    }
}

public abstract class Runner
{
    private Thread _thread;
    protected readonly Action<ThreadDispatcher> _action;
    private readonly ThreadDispatcher _dispathcer;
    private long _running;
    readonly ManualResetEvent _stopEvent=new ManualResetEvent(false);
    protected Runner(Action<ThreadDispatcher> action,ThreadDispatcher dispathcer)
    {
        _action = action;
        _dispathcer = dispathcer;
    }

    public void Start()
    {
        _thread = new Thread(OnThreadStart);
        _running = 1;
        _thread.Start();
    }

    public void Stop()
    {
        _stopEvent.Reset();
        Interlocked.Exchange(ref _running, 0);
        _stopEvent.WaitOne(2000);
        _thread = null;
        Console.WriteLine("The thread has been stopped.");

    }
    protected virtual void OnThreadStart()
    {
        while (Interlocked.Read(ref _running)!=0)
        {
            OnStartWork();
            _action.Invoke(_dispathcer);
            OnFinishWork();
        }
        OnFinishWork();
        _stopEvent.Set();
    }

    protected abstract void OnStartWork();
    protected abstract void OnFinishWork();
}

public class ThreadDispatcher
{
    private readonly ManualResetEvent _signal=new ManualResetEvent(true);
    private int _hpCheckedInThreads;
    private readonly object _lockObject = new object();

    public void CheckedIn()
    {
        lock(_lockObject)
        {
            _hpCheckedInThreads++;
            _signal.Reset();
        }
    }
    public void CheckedOut()
    {
        lock(_lockObject)
        {
            if(_hpCheckedInThreads>0)
                _hpCheckedInThreads--;
            if (_hpCheckedInThreads == 0)
                _signal.Set();
        }
    }

    private class HighPriorityThread:Runner 
    {
        public HighPriorityThread(Action<ThreadDispatcher> action, ThreadDispatcher dispatcher) : base(action,dispatcher)
        {
        }

        protected override void OnStartWork()
        {
        }

        protected override void OnFinishWork()
        {
        }
    }
    private class LowPriorityRunner:Runner
    {
        private readonly ThreadDispatcher _dispatcher;
        public LowPriorityRunner(Action<ThreadDispatcher> action, ThreadDispatcher dispatcher)
            : base(action, dispatcher)
        {
            _dispatcher = dispatcher;
        }

        protected override void OnStartWork()
        {
            Console.WriteLine("LP Thread is waiting for a signal.");
            _dispatcher._signal.WaitOne();
            Console.WriteLine("LP Thread got the signal.");
        }

        protected override void OnFinishWork()
        {

        }
    }

    public Runner CreateLpThread(Action<ThreadDispatcher> action)
    {
        return new LowPriorityRunner(action, this);
    }

    public Runner CreateHpThread(Action<ThreadDispatcher> action)
    {
        return new HighPriorityThread(action, this);
    }
} 
```

}

# apache - 解析 url 错误 - index.htm/index 而不是 index/index

> ID：15088815
> 
> 赞同：0
> 
> 时间：2013-02-26T12:10:31.667
> 
> 标签：apache, .htaccess, zend-framework, zend-server

我已经在 Lubuntu 上安装了 Zend Server CE。在 Windows 上的 Zend Server CE 以及我的主机上一切正常。

我的**公共/.htaccess**

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d 
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

当我试图进入：

> /project/public/index/index/menu/Gallery/type/2

它向我显示了一个错误：

> 在此服务器上找不到请求的 URL /project/public/index.htm/index/menu/Gallery/type/2。

**为什么 id 将我.htm 添加到索引？**

例如 /project/public/admin 或 project/public/index/edit/id/16 工作正常。

PS。索引-控制器索引-动作菜单-动作

你能给我一个关于在 Zend 中格式化 url 的快速链接吗，因为我不知道为什么 ie index/menu 在 windows 而不是 index/index/menu 上不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:33:37.643

如果您正在使用 Zend MVC 应用程序，请查看此

[http://framework.zend.com/manual/1.12/en/zend.controller.router.html](http://framework.zend.com/manual/1.12/en/zend.controller.router.html)

如果您使用的是模块，那么默认路由应该是

> /module/controller/action/param1name/param1value

或者如果你不使用模块

> /controller/action/param1name/param1value

如果没有提供所有参数，索引是默认控制器和动作名称

# javascript - 为什么返回 !!var JavaScript？

> ID：15088818
> 
> 赞同：0
> 
> 时间：2013-02-26T12:10:47.000
> 
> 标签：javascript, jquery, sizzle

在查看 Sizzle.js 后，我注意到它们有一个断言函数（见下文），它返回`!!fn(x)`.

为什么会有人这样做？这样做似乎毫无意义，因为它只是`"not not"`。

```
function assert( fn ) {
  var div = document.createElement("div");

  try {
    return !!fn( div );
  } catch (e) {
    return false;
  } finally {
    // release memory in IE
    div = null;
  }
} 
```

有人对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:12:00.803

它确保返回类型是布尔值，没有别的。

# java - paintComponent 上的 TIMErTask

> ID：15088820
> 
> 赞同：0
> 
> 时间：2013-02-26T12:11:04.470
> 
> 标签：java, swing, timer, timertask

我使用 TimerTask 在我的一个类的循环上添加了一个计时器，该类由绘画组件类调用。基本上在已经绘制的页面上有白色圆圈，然后有一个 for 循环，它从数组中读取一个值，并且根据值的范围，圆圈会改变颜色。每个圆圈应该代表数组中的下一个值。但它不工作。我是一个基本的程序员，真的不明白出了什么问题。如果有人能帮帮我，我将不胜感激。到目前为止，这是我的代码：

```
public DoThePaint() {

    String fileName;
    fileName = "/Users/Desktop/test2.txt";
    read = new Reader(fileName);
    read.displayArrayList();

    panel = new JPanel();
    newImage = new ImageIcon(this.getClass().getResource("resource/background2T.png")).getImage();

    circlesT = new ArrayList<Shape>();
    circlesT.add(new Ellipse2D.Float(197.0f, 352.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(247.0f, 307.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(152.0f, 303.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(172.0f, 372.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(223.0f, 378.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(273.0f, 285.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(130.0f, 281.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(148.0f, 393.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(246.0f, 403.0f, 10.0f, 10.0f));
    circlesT.add(new Ellipse2D.Float(297.0f, 264.0f, 10.0f, 10.0f));
}
public void paintComponent(Graphics g) {

    drawShapes(g, circlesT);

}

public void drawShapes(Graphics g, final ArrayList<Shape> circlesT) {
    final Graphics2D ga = (Graphics2D) g;
    ga.drawImage(newImage, 0, 0, null);

    for (int i = 0; i < circlesT.size(); i++) {
        ga.draw(circlesT.get(i));
        ga.setPaint(Color.white);
        ga.fill(circlesT.get(i));
    }

    Timer timer = new Timer();
    TimerTask t;
    t = new TimerTask() {
        @Override
        public void run() {

            for (int i = 0; i < 10; i++) {

                if (read.temp.get(i) < 31 && read.temp.get(i) > 30) {
                    ga.draw(circlesT.get(i));
                    ga.setPaint(Color.green);
                    ga.fill(circlesT.get(i));
                } else if (read.temp.get(i) < 32 && read.temp.get(i) > 31) {
                    ga.draw(circlesT.get(i));
                    ga.setPaint(Color.red);
                    ga.fill(circlesT.get(i));
                } else if (read.temp.get(i) < 33 && read.temp.get(i) > 32) {
                    ga.draw(circlesT.get(i));
                    ga.setPaint(Color.yellow);
                    ga.fill(circlesT.get(i));
                }

            }
        }
    };
    repaint();
    timer.schedule(t, 0, 5000);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:42:46.283

对不起，但这是你制造的恐怖大厅：在`paintComponent()`你的内部正在创造 a `new Timer`， a`new TimerTask`并最终呼唤`repaint()`。

1.  `paintComponent()`: 你应该做的就是绘画操作（画图、画圆、画线、画文字……在上面`Graphics`）。这就是你应该做的。
2.  调用`repaint()`最终将触发`paintComponent()`再次调用--> 重新创建计时器、计时器任务并调用 repaint()-->paintComponent()->repaint()-->... 你明白了，你刚刚创建了一个无限循环消耗你的资源
3.  我不知道你的`Reader`班级做什么以及它拥有什么数据。我可以看到两件我会改变的事情：`temp`应该`private`使用 getter 或其他访问方法正确访问。您在循环中的条件非常严格，您确定所有值都将匹配 3 个条件之一（顺便说一句，您的条件都是`false`if`read.temp.get(i)`返回一个`int`or `Integer`）。
4.  要解决所有这些问题，请删除 Timer，删除 TimerTask 并在您的第一次`for-loop`查找中直接查找圆圈的颜色并立即正确绘制它们。如果在某个时候，您想更新显示，那么您可以调用`repaint()`
5.  顺便说一句，您`TimerTask`没有在 EDT（事件调度线程）上运行，但您仍然可以从其中访问与 UI 相关的内容。这违反了所有与 UI 相关的任务都应在 EDT 上执行的事实（使用 Swing`Timer`或`SwingUtilities.invokeLater()`）
6.  在您的`TimerTask`访问中，与提供`Graphics2D ga`的相同：您不能在方法范围之外访问该对象。已创建和处置，因此不应在其范围之外使用。一般来说，您永远不应该保留对对象的引用（也不应该使用可能很诱人但会导致各种令人头疼的方法）。`Graphics g``paintComponent()``Graphics``paintComponent``Graphics``Graphics``getGraphics()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:14:13.063

您对绘画在 Swing 中的工作方式存在根本性的误解。不过没什么大不了的，每个人都必须从某个地方开始。

看起来你想做动画。因此，您的paintComponent 方法应该在特定时间点绘制对象的状态。任何控制绘制时间的计时器都应该属于另一个类。

对于简单的动画 TimerTask 就可以了。如果您想要为游戏制作动画或某些需要良好性能的东西，我推荐 Andrew Davison 所著的 Killer Game Programming in Java 一书第 2 章中的动画类。您实际上可以在亚马逊的 Look Inside 功能中阅读第 2 章。

# c# - 在组框项目中拖放

> ID：15088822
> 
> 赞同：0
> 
> 时间：2013-02-26T12:11:08.453
> 
> 标签：c#, winforms, groupbox

我正在使用 C# 开发一个 Windows 窗体项目，在该项目中我使用 a`groupbox`作为容器并向其中添加项目（`Labels`，`pictureBoxes`...）。我想知道是否可以在此控件上实现拖放事件以使用鼠标移动项目，或者是否必须在添加到我的`groupBox`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:00:48.633

在对我的主题进行了一些研究之后，我在朋友的帮助下找到了解决方案。要完成这项任务，我们需要使用一些变量、属性和三个鼠标事件来分配给对象：MouseMove、MouseUp 和 MouseDown。我最近还发现了一个例子：http: [//social.msdn.microsoft.com/Forums/en-US/winforms/thread/6eb864ff-0ea8-4641-bc2a-83db94371429](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/6eb864ff-0ea8-4641-bc2a-83db94371429)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T08:52:05.133

此代码用于将控件（此处我们为 Button 完成。您可以通过在 DragDrop 事件中将 Button 类更改为任何其他类来使用任何控件）到组框。

首先将 Groupbox 的“AllowDrop”属性设置为 true。

```
groupBox5.AllowDrop=true; 
```

从属性窗口为 Groupbox 创建一个“DragEnter”事件

```
private void groupBox5_DragEnter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Move;
} 
```

接下来，从属性窗口为 Groupbox 创建一个“DragDrop”事件

```
private void groupBox5_DragDrop(object sender, DragEventArgs e)
{
     Control c = e.Data.GetData(e.Data.GetFormats()[0]) as Control;
     // Declare rnd globally for creating random id for dynamic button(eg : Random rnd = new Random();)
     Button btn = new Button();
     btn.Name = "Button" + rnd.Next(); 
     btn.Size = c.Size;            
     btn.Click += new System.EventHandler(DynamicButton_Click);
     if (c != null)
     {                
         btn.Text = c.Text;
         btn.Location = this.groupBox5.PointToClient(new Point(e.X, e.Y));
         this.groupBox5.Controls.Add(btn);
     }
} 
```

# windows - NTFS 文件系统的 USN 日志可以大于它声明的大小吗？

> ID：15088827
> 
> 赞同：1
> 
> 时间：2013-02-26T12:11:22.083
> 
> 标签：windows, ntfs, journaling, usn

各位程序员好。

我正在尝试使用*WinIoCtl*函数转储**NTFS**分区的 USN 日志的内容。我有 *USN_JOURNAL_DATA* 结构，它告诉我它的最大大小为 512 MB。我已经将它与*fsutil*所说的进行了比较，它的价值是相同的。

 **现在我必须将每个条目读入 *USN_RECORD* 结构。我在一个从 0 开始的 for 循环中执行此操作，并以 4096（簇大小）为增量达到日志的最大大小。我在相同大小的缓冲区中读取每个 4096 字节，并从中读取所有 USN_RECORD 结构。

一切都很好，文件名正确，时间戳，原因，一切，**除了**我似乎错过了一些最近的记录。我在分区上创建了一个新文件，在其中写入了一些内容，然后删除了该文件。我再次运行该应用程序并没有出现记录。我发现只有当我继续阅读超过期刊的最大尺寸时才会出现记录。怎么可能？

目前我正在从期刊数据的开头读取到*最大大小*+*分配增量*（两者都是存储在 *USN_JOURNAL_DATA* 结构中的值），我不认为它是正确的，我很难找到彻底与此相关的信息。

有人可以解释一下吗？USN 日志周围是否有类似于**MFT**工作方式的缓冲区（这意味着当其他文件需要磁盘空间时，它的大小减半）？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:47:08.680

这是预期的行为，[如记录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365721%28v=vs.85%29.aspx)：

> 最大尺寸
> 
> 更改日志的目标最大大小，以字节为单位。**更改日志可以增长到大于此值，**但随后在下一个 NTFS 文件系统检查点被截断到小于此值。

不要试图预先确定大小，而是循环直到到达数据的末尾。

如果您正在使用控制代码，则当错误代码为时`FSCTL_ENUM_USN_DATA`，您已到达数据末尾。`DeviceIoControl``ERROR_HANDLE_EOF`

如果您使用`FSCTL_READ_USN_JOURNAL`控制代码，则当驱动程序返回的下一个 USN（输出缓冲区开头的 DWORDLONG）是您请求的 USN（`StartUsn`输入缓冲区中的值）时，您已到达数据末尾。您需要将输入参数`BytesToWaitFor`设置为零，否则驱动程序将等待指定数量的新数据添加到日志中。**

# mysql - 未在 aws rds mysql 中为主用户设置超级权限

> ID：15088831
> 
> 赞同：2
> 
> 时间：2013-02-26T12:11:28.573
> 
> 标签：mysql, amazon-web-services, amazon-rds

我已经创建了一个 AWS RDS 实例，我已经使用主密码创建了我的主用户，并且它工作/连接正常。

但是当我要在该实例上创建一个函数时，它会显示以下错误：

```
ERROR 1418: This function has none of DETERMINISTIC, NO SQL, 
or READS SQL DATA in its declaration and binary logging is enabled  
(you might want to use the less safe log_bin_trust_function_creator variable). 
```

在我的实例中，变量`log_bin_trust_function_creators`显示`OFF`，如果我尝试使用更改变量`SET GLOBAL log_bin_trust_function_creators = 1;`，它会给我另一个错误`"Error Code: 1227\. Access denied; you need (at least one of) the SUPER privilege(s) for this operation"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-03T09:59:05.007

为 RDS 实例的参数组设置 log_bin_trust_function_creators = 1。

**注意：默认参数组不可编辑。创建一个新的参数组并将其分配给 RDS 实例，方法是从 UI（AWS 管理控制台）修改它，或者使用命令**

```
DELIMITER $$
CREATE DEFINER=`DB_USERNAME_HERE`@`%` FUNCTION `GetDistance`(coordinate1 VARCHAR(120), coordinate2 VARCHAR(120)) RETURNS decimal(12,8)
READS SQL DATA
BEGIN
   DECLARE distance DECIMAL(12,8);
   /*Business logic goes here for the function*/
   RETURN distance;
END $$
DELIMITER ; 
```

在这里，您必须根据需要将**DB_USERNAME_HERE**替换为您的 RDS 数据库用户名和函数名称。

**重要的是：`DEFINER=`DB_USERNAME_HERE`@`%``**

这是我在参数组中设置 log_bin_trust_function_creators = 1 后面临的问题。它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-06T16:25:26.423

更好的方法是应用您自己的参数组，并将 log_bin_trust_function_creators 设置为 true。（默认为假）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:29:01.837

当您尝试使用`DEFINER`非当前用户创建过程/函数/视图时，会发生这种情况。

要解决此删除或更新`DEFINER`子句。

# selenium - getAttribute 未返回硒中样式的完整值

> ID：15088832
> 
> 赞同：2
> 
> 时间：2013-02-26T12:11:29.587
> 
> 标签：selenium, selenium-webdriver, getattribute

我在以下 id 元素上使用 selenium getAttribute("style") 方法：-

```
<div id="ntsDiv_1" style="width: 250px; text-align: left; white-space: normal; top: 1090px; left: 131px; visibility: hidden;" class="mlt-pop-container"> 
```

但 API 只返回一半的值。它正在返回`width: 250px; text-align: left; white-space: normal;`并且样式的剩余部分被剪裁。

我正在尝试提取可见性的值，但该方法没有返回样式的完整值。因此，我无法确定能见度的正确值。

我执行了`System.out.println("Style is:- "+super.getElement(NEXTAG_STORES_DIV).getAttribute("style"));`

NEXTAG_STORES_DIV 对应id元素的xpath，`super.getElement`通过xpath提取元素

请帮帮我！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T15:42:22.333

我刚刚用 Selenium 2.30.0 试过这个，它工作正常，返回整个属性。

尝试以下操作（所有示例都假设`element`您`WebElement`需要测试）：

1.  确保*只*返回属性的一部分。您不只是将其打印到控制台吗？许多控制台的线路长度有限。尝试将您的控制台设置为显示长行。以编程方式检查返回值的长度，或尝试评估

    ```
    element.getAttribute("style").contains("visibility") 
    ```

2.  如果可以，请尝试升级您的 Selenium 库。我不知道有任何与属性获取相关的错误，但现在可能已经解决了一些错误（版本 2.30.0）。

3.  在不同的浏览器/操作系统/架构中尝试。如果它在某个地方工作，您就会知道这是特定浏览器/驱动程序/操作系统/架构/任何东西的问题，您可能能够集中精力并修复它或[提交错误](http://code.google.com/p/selenium/issues/entry)。

4.  如果您只是想知道一个元素是否可见，正确且通常首选的方法是调用

    ```
    element.isDisplayed() 
    ```

    此方法处理您可能需要检查的所有规则，以确定它是否实际可见。

5.  如果`style`值在页面上动态变化（即它不是静态写入页面的源代码中），`WebDriver`则无法真正看到它，因为它没有获取动态变化。尝试通过 JavaScript 访问该值：

    ```
    if (!driver instanceof JavascriptExecutor) {
        throw new IllegalStateException("JavaScript not enabled for this driver!");
    }
    JavascriptExecutor js = (JavascriptExecutor)driver;
    String styleAttribute = (String)js.executeScript("return arguments[0].style", element); 
    ```

6.  如果您确实需要获取[`visibility`](https://developer.mozilla.org/en-US/docs/CSS/visibility)浏览器实际使用的 CSS 属性的计算值，而不是属性中的值`style`（如果没有或被某种方式覆盖），则需要使用 JavaScript 的[`getComputedStyle()`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)方法。一种方法（由[quirksmode.org 上的这篇文章](http://www.quirksmode.org/dom/getstyles.html)描述）是这样的：

    ```
    var elem = arguments[0];
    if (elem.currentStyle) {
        var vis = elem.currentStyle['visibility'];
    } else {
        var vis = document.defaultView.getComputedStyle(elem, null).getPropertyValue('visibility');
    }
    return vis; 
    ```

    同样，这应该通过调用

    ```
    String visibility = (String)js.executeScript(here_goes_the_whole_script, element); 
    ```

# visual-c++ - 在 Visual Studio C++ 2008（控制台 Win32）中绘制 xy 图形的简单示例？

> ID：15088833
> 
> 赞同：2
> 
> 时间：2013-02-26T12:11:35.203
> 
> 标签：visual-c++, plot, console-application

在阅读了我在这里和谷歌中找到的几乎所有内容之后，我还没有找到一个简单而直接的解决方案/示例，关于在 Visual Studio 2008 中的 c++（控制台应用程序 win32，黑色的）中绘制 xy 值。基于[这篇文章](https://i.stack.imgur.com/QlhYK.jpg)，我应该使用 MsChart 控件，有人愿意分享一个简单的例子吗？

[这篇文章](https://i.stack.imgur.com/DbX0y.jpg)和许多其他文章讨论了不属于 Visual Studio 的库（因此它们不会与 EXE 一起编译，因此不会包含在生成的 EXE 中）或使用 excel 显示图形. 我只想得到一个简单的 xy 图形（以及穿过这些点的线），一点也不担心它是否是全世界最丑最简单的图形，但它必须在我的代码运行后自动出现（可能在新窗口中）或者可能在控制台内？）如果我在另一台电脑上运行这个 EXE，离我的电脑几千公里，代码运行后图形仍然会出现。

我问的东西太复杂了吗？无聊的？？我希望我能得到一些答案/示例/解决方案，而不是关闭这篇文章 =) 提前致谢！

* * *

@Koushik 再次感谢您的支持！即使我得到了全貌，我也需要一个清晰的例子来做对，所以要投票我想测试这个简单的例子：

```
#include <iostream>
#include <cmath>
#include <iomanip>

using namespace std;

double f(const double &x) {
    return (
        sin(x)*exp(-x));
}

int main()
{
    unsigned Nplot = 100;
    double x_low = 0.0;
    double x_high = 20.0;
    double h = (x_high - x_low)/(double)Nplot;

    for (unsigned i=0;i<=Nplot;i++)
    {
        double x = x_low + i*h;
        cout << setw(20) << x <<
                setw(20) << f(x) << endl;
    }

    system("pause>nul");
    return 0;
} 
```

这是生成 sin(x) 函数的非常基本的代码。如果在 VC++ 2008 的控制台应用程序 Win32 中复制/粘贴这个（新建项目/Visual C++/Win32/控制台应用程序 Win32/空项目/），屏幕上会出现数据：

![在此处输入图像描述](../Images/adaa76edde9485c5772cbaf1517cb7e0.png)

然后，将这些值放在 Excel 中给出：

![在此处输入图像描述](../Images/f7fe78c73386701f7a629b57e5fccd15.png)

我想要这个，但是输出窗口应该出现在控制台中出现值之后，更重要的是，代码不能依赖于 excel 或 Visual C++ 之外的其他东西。因此，编写一些额外的代码来绘制这条线，并且在编译之后，两者都必须在任何计算机上出现/工作，特别是在那些没有 VS 或任何库的计算机中，只需在 Windows 中运行 EXE，仅此而已。那么，有可能吗？您能否分享一个简单的代码示例来绘制这条线（将其添加到上面的代码中）？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:34:39.997

您可以使用 system("appname"); 来调用 gui 应用程序或更确切地说是任何其他应用程序。包括 stdlib.h 标头。您可以做的是创建您的控制台应用程序并准备数据。将这些数据存储在一个文件中，打开可以从文件中读取数据并绘制它的应用程序。

gui 应用程序也不会那么难写，如果你的目标是只绘制 data.in 控制台你真的不能画东西。在 turbo c++ 中我们有这个选项，因为它主要是为 dos 创建的。

算法：1）准备数据，比如沿 x 轴的时间和沿 y 轴的幅度。使用您自己的格式将其存储在文件中。例如： x-ais data y-axis data 。

2).准备一个可以绘制图形的gui应用程序。使用表单的 CreateGraphics() 方法来绘制线条，即轴和数据线。CreateGraphics::drawLine() 和 CreateGraphics::drawLines() 应该有助于您的进步。

编辑：您可以将命令行参数传递给 GUI 应用程序。这个参数可以是数据文件路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T05:45:29.257

最简单的事情是让您的控制台应用程序在计算数据后在屏幕上创建一个窗口（是的，控制台应用程序可以使用 GUI），然后`WM_PAINT`使用`BeginPaint`/ [`PolyLine`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd162815(v=vs.85).aspx)/进行处理`EndPaint`，使用一些适当的缩放来生成数据 (1)正面朝上和 (2) 适合窗户。

您不会有任何网格线或轴标签，只有绘制的线，但这是最低限度的，无需使用或重新创建整个图形库即可轻松完成。

有关如何将 GUI 添加到程序的示例，请尝试[Raymond Chen 的临时程序，C++ 版本](https://blogs.msdn.microsoft.com/oldnewthing/20050422-08/?p=35813)。创建一个窗口需要相当多的代码，但幸运的是，您唯一需要更改的是`PaintContent()`函数。

使用`Polyline`几乎与您所要求的一样简单——它接受一组数据点。

如果你真的想添加网格线和标签，更多`Polyline`的调用和`ExtTextOut`函数就可以解决问题，但很快你就会想要`CreatePen`并`SelectObject`控制线的颜色和样式（点线、虚线等）。并注意顺序——首先绘制底部的东西，以便以后的调用可以覆盖顶部。

* * *

另一方面，如果不需要单个可执行文件，我建议您提供 Gnuplot 的副本（该`pgnuplot`可执行文件是为从另一个程序调用而设计的）。首先用于`wgnuplot`调整您的绘图选项，然后将它们`pgnuplot`与您的数据一起传递。通过这种方式，您将免费获得合理的缩放、网格线和标签，并将结果导出为常见格式，例如 PNG。

# php - 自动增加字母/数字，如 INT

> ID：15088834
> 
> 赞同：-3
> 
> 时间：2013-02-26T12:11:41.590
> 
> 标签：php, mysql, auto-increment

我需要一个函数来为数据库的每个输入增加“字母/数字”。就像 INT 数据的 AI。

我需要这个来制作一个短链接代码，比如`site.com/1gHrT`.

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:40:17.460

URL 缩短器通常在 base62 中使用大整数。

整数通常在 base10 中（这是*十进制系统*的另一个词，即 ie `[0-9]`）。还有其他常见的系统，例如 base2 ( `[0-1]`)、base8 ([ `0-8]`) 和 base16 ( `[0-f]`)。

当您超过 base10 时，习惯上使用英文小写字母 ( `[a-z]`)。所以，base16 是`[0-9a-f]`( `0123456789abcdef`)。如果您将基数推到超出数字和小写字母可以处理的范围，那么您通常使用大写字母 ( `[A-Z]`)。因此，base62 使用`[0-9a-zA-Z]`.

在 PHP 中，该`base_convert()`函数可以处理从 base2 到 base36（或`[0-1]`to `[0-9a-z]`）的任何内容。

如果你想超越 base36 那么你需要可以处理任何内容的[`gmp`](http://php.net/gmp)扩展[base62](https://stackoverflow.com/a/7014209/1300892)。如果您没有`gmp`安装扩展，那么您应该能够在互联网上的[某处找到一个功能](https://www.google.dk/search?q=php%20base62%20converter)。此外，虽然该`base64_encode()`功能听起来可能相关，但在这种情况下并非如此。它对*data 进行编码*，这与更改 base （或[*radix*](http://en.wikipedia.org/wiki/Radix)）不同。

但是，您需要记住，base62 在网络上可能有点脆弱。这是因为小写和大写字母都有意义。换句话说，如果某个聪明人或女孩更喜欢小写 URI，并将其转换为小写，那么 URI 将指向错误的位置。从这个意义上说，base36 更安全，但 URI 不会那么短（尽管不会那么短）。

现在，如果您想增加帖子中的数字，只需将其转换为 base10，增加它，然后再将其转换回来。

如果我们假设它确实是在 base62 中，那么我们可以使用以下`gmp`函数：

```
function base62_increment($number, $incrBy = 1) {
    if ( ! defined('GMP_VERSION'))
        throw new \Exception(__FUNCTION__.' needs the GMP extension');
    $number = gmp_init($number, 62);
    $number = gmp_add($number, $incrBy);
    return gmp_strval($number, 62);
}
$base62 = '1gHrT';
$incremented = base62_increment($base62);
var_dump($base62, $incremented); 
```

如果你想使用 base36，或者如果你没有`gmp`安装扩展，那么我们可以使用`base_convert()`：

```
function base36_increment($number, $incrBy = 1) {
    $number = base_convert($number, 36, 10);
    $number += $incrBy;
    return base_convert($number, 10, 36);
}
$base36 = 'esq2f';
$incremented = base36_increment($base36);
var_dump($base36, $incremented); 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:24:26.913

也许你在追求类似的东西？

```
function randLetter()
{
return chr(97 + mt_rand(0, 25));
} 
```

来源： http: [//maymay.net/blog/2004/12/19/generating-random-letters-in-php/](http://maymay.net/blog/2004/12/19/generating-random-letters-in-php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:24:35.913

您可以使用给定的字符将数字转换为字符串，就像您使用以下算法将一个系统中的数字转换为另一个系统一样

```
$n = 123; //your number

$chars = "abcdefghijklmnopqrstuvwxyz";
$chars = "0123456789" . strtoupper($chars) . $chars;
$b = strlen($chars);
$nums = array();
while ($n > 0) {
    $nums[] = $n % $b;
    $n = (int)($n / $b);
}

$nums = array_reverse($nums);
$out = "";
foreach ($nums as $num) {
    $out .= $chars[$num];
} 
```

在内部，您可以使用数字计数器，并使用此算法生成输出..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:50:19.970

未经测试，可能会进行优化以避免转换，但这会将数字转换为数字，但这会将顺序整数转换为字符串。

```
$startval = 12435;
$maxval = 12654;

for ($i = $startval; $i < maxval; $i++) {
    $strINT = strval($i); // convert int to string
    // intialize final string to empty
    $strOutput = '';
    /* Loop through each letter */
    foreach (explode($strINT) as $letter) {
        // add 65 to each letter and turn it into a letter
        // letter A is character 65
        $strOutput .= chr(intval($letter) + 65);
    }
} 
```

# ios - 可以为 iOS 设计 Google Maps SDK 的样式吗？

> ID：15088836
> 
> 赞同：0
> 
> 时间：2013-02-26T12:11:45.093
> 
> 标签：ios, api, google-maps, styles, google-maps-sdk-ios

是否可以像在网页中使用的 Google Maps API 一样在适用于 iOS 的 Google Maps SDK 中设置地图样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:47:12.620

尚无法在 iOS SDK 中设置地图样式。请提交[功能请求](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Feature%20Request)。

# active-directory - 使用 LDAP 配置参数从 Apache 到其他 LDAP 客户端

> ID：15088837
> 
> 赞同：1
> 
> 时间：2013-02-26T12:11:52.723
> 
> 标签：active-directory, ldap, openldap

我有以下用于 APACHE 的 LDAP 配置。如何将此信息用于其他 LDAP 客户端。

```
 <Directory /opt/sites/MyAuthSite.V2/html*>
        Options ExecCGI
        AllowOverride AuthConfig
        Order allow,deny
        Allow from all
        AuthLDAPEnabled on
        AuthLDAPAuthoritative on
        AuthName  "MyAuth"
        AuthType  Basic
        AuthLDAPURL ldap://ldap.xyz.com:389/cn=Users,dc=abccorp,dc=com?samaccountname
        AuthLDAPBindDN "user@abc.com"
        AuthLDAPBindPassword userpass
        require msSFU30PosixMemberOf cn=abc.com_g_mts,cn=users,dc=abccorp,dc=com
    </Directory> 
```

我需要在 Softerra LDAP Browser 4.5 (Free LDAP Explorer) & OpenERP 中使用它![在此处输入图像描述](../Images/23c8654fe00dda73c88472bf5f10b913.png)。但我不知道如何处理身份验证部分。我附上它的屏幕截图。

![在此处输入图像描述](../Images/935454a7972a5073fcf5d23744057c07.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T18:49:17.593

您的 Apache Config 的这一部分回答了您的问题：

```
 AuthLDAPURL ldap://ldap.xyz.com:389/cn=Users,dc=abccorp,dc=com?samaccountname
    AuthLDAPBindDN "user@abc.com"
    AuthLDAPBindPassword userpass 
```

所以你的主机是端口 389 上的 ldap.xyz.com。

您的用户的 BindDN（以及您的委托人）是 user@abc.com 和 userpass 作为密码。

现在，可能 user@abc.com 作为主体将不起作用（取决于 Softerra）。但是根据您的配置方式，您的用户可能类似于 cn=user,cn=Users,dc=abccorp,dc=com。

需要注意的一个提示是，cn=Users 容器不是 OU。它是一个容器 (cn=)，它经常让人们从 AD 上的 LDAP 开始感到困惑。

# wix - Wix 工具集：无法添加 Excel 插件项目参考

> ID：15088838
> 
> 赞同：4
> 
> 时间：2013-02-26T12:11:52.837
> 
> 标签：wix, excel-addins

我刚刚安装了最新的 Wix v3.7。我创建了一个 VS 2010“Excel 2010 插件”项目，并在同一个解决方案中创建了一个 Wix“安装项目”。

问题是，当我尝试从 Wix 项目中引用插件项目时，它不存在，

![在此处输入图像描述](../Images/ba386263b46c03c29a5c13f67e567bb8.png)

我尝试了一个简单的控制台应用程序，在这种情况下效果很好。

问题 - 为什么无法添加对 Add-in 项目的引用？任何修复或解决方法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T10:12:19.380

这不是 WiX 问题；一般情况下，您无法添加对 VSTO Addin 项目的引用。您可以尝试使用任何其他（非 WiX）类型的项目 - 结果相同。

问题是 VSTO 项目被明确禁止添加为参考。无论出于何种原因，欢迎微软。

在 VSTO 2013 Update 3 中已更改（已修复？）。更新 VSTO 后，您现在应该可以添加引用了。

[http://blogs.msdn.com/b/vsto/archive/2014/08/04/visual-studio-2013-update-3-released.aspx](http://blogs.msdn.com/b/vsto/archive/2014/08/04/visual-studio-2013-update-3-released.aspx)，项目#3

# iphone - 在编辑 uitextfield 时向上移动键盘

> ID：15088840
> 
> 赞同：0
> 
> 时间：2013-02-26T12:11:55.830
> 
> 标签：iphone, ipad

我在编辑`UITextField`时顶部有一个`UIScrollView`我看不到键盘。怎么做？

帮我解决这个问题，在此先感谢。

```
-(void)viewdidload{     
txtsearch =[[UITextField alloc]init];
            [txtsearch setFrame:CGRectMake(410, 35,250, 30)];
            [txtsearch setBorderStyle:UITextBorderStyleRoundedRect];
            txtsearch.placeholder = @"Enter Company/Provider Name";
            txtsearch.text=[NSString stringWithFormat:@"%@",appDelegate.searchFieldName];
            txtsearch.autocorrectionType = UITextAutocorrectionTypeNo;
            txtsearch.font = [UIFont fontWithName:@"Helvetica" size:14];
            txtsearch.delegate=self;
            txtsearch.clearButtonMode = UITextFieldViewModeWhileEditing;
            [testscroll addSubview:txtsearch];

btnSearch = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            [btnSearch addTarget:self
                          action:@selector(showResults:)
                forControlEvents:UIControlEventTouchDown];
            [btnSearch setBackgroundImage:[UIImage imageNamed:@"search_button_hover.png"] forState:UIControlStateNormal];
            btnSearch.frame = CGRectMake(510, 80, 75, 35.0);
            [testscroll addSubview:btnSearch];

   if(self.tableView)
                    [self.tableView removeFromSuperview];
                self.tableView=[[UITableView alloc] initWithFrame:CGRectMake(0,210,730,[arr count]*160) style:UITableViewStylePlain];
                self.tableView.delegate=self;
                self.tableView.dataSource=self;
                self.tableView.scrollEnabled = NO;
                [testscroll addSubview:self.tableView];
                [self.tableView reloadData];
                self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, self.tableView.frame.origin.y, self.tableView.frame.size.width, self.tableView.contentSize.height);
                float ftbl = self.tableView.frame.origin.y + self.tableView.contentSize.height + 30;
                testscroll.contentSize=CGSizeMake(768, ftbl);
                testscroll.scrollEnabled=YES;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:25:06.007

这样做，

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self animateTextField:textField up:YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    [self animateTextField:textField up:NO];
}

- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
    CGPoint temp = [textField.superview convertPoint:textField.frame.origin toView:nil];
    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait){

        if(up) {
            int moveUpValue = temp.y+textField.frame.size.height;
            animatedDis = 264-(1024-moveUpValue-5);
        }
    }
    else if(orientation == UIInterfaceOrientationPortraitUpsideDown) {
        if(up) {
            int moveUpValue = 1004-temp.y+textField.frame.size.height;
            animatedDis = 264-(1004-moveUpValue-5);
        }
    }
    else if(orientation == UIInterfaceOrientationLandscapeLeft) {
        if(up) {
            int moveUpValue = temp.x+textField.frame.size.height;
            animatedDis = 352-(768-moveUpValue-5);
        }
    }
    else
    {
        if(up) {
            int moveUpValue = 768-temp.x+textField.frame.size.height;
            animatedDis = 352-(768-moveUpValue-5);
        }

    }
    if(animatedDis>0)
    {
        const int movementDistance = animatedDis;
        const float movementDuration = 0.3f; 
        int movement = (up ? -movementDistance : movementDistance);
        [UIView beginAnimations: nil context: nil];
        [UIView setAnimationBeginsFromCurrentState: YES];
        [UIView setAnimationDuration: movementDuration];
        if (orientation == UIInterfaceOrientationPortrait){
            baseViewController.view.frame = CGRectOffset(baseViewController.view.frame, 0, movement);       
        }
        else if(orientation == UIInterfaceOrientationPortraitUpsideDown) {

            baseViewController.view.frame = CGRectOffset(baseViewController.view.frame, 0, movement);
        }
        else if(orientation == UIInterfaceOrientationLandscapeLeft) {

            baseViewController.view.frame = CGRectOffset(baseViewController.view.frame, 0, movement);
        }
        else {
            baseViewController.view.frame = CGRectOffset(baseViewController.view.frame, 0, movement);
        }

        [UIView commitAnimations];
    }
} 
```

参考： [iPad出现键盘时如何向上移动视图？](https://stackoverflow.com/questions/4687534/how-move-view-up-when-keyboard-appears-in-ipad)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:16:27.533

在您的 .h 文件中添加：

```
CGFloat animatedDistance; 
```

在 .m 文件中：在 @interface 声明之前添加

```
static const CGFloat KEYBOARD_ANIMATION_DURATION = 0.3;
static const CGFloat MINIMUM_SCROLL_FRACTION = 0.2;
static const CGFloat MAXIMUM_SCROLL_FRACTION = 0.8;
static const CGFloat PORTRAIT_KEYBOARD_HEIGHT = 264;
static const CGFloat LANDSCAPE_KEYBOARD_HEIGHT = 352; 
```

并添加这个 UITextField 委托方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    CGRect textFieldRect =
    [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
    [self.view.window convertRect:self.view.bounds fromView:self.view];

    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;

    CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size. height;

    CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;

    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [yourScrollView setFrame:viewFrame];

    [UIView commitAnimations];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [yourScrollView setFrame:viewFrame];

    [UIView commitAnimations];
} 
```

此外，您可以使用[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)。

# ios - 向我的所有 UIControls 添加一个属性

> ID：15088842
> 
> 赞同：0
> 
> 时间：2013-02-26T12:12:01.977
> 
> 标签：ios, objective-c, cocoa-touch, uicontrol

我试图让`UIControl`我的应用程序（`UIButton`,`UISlider`等）中的每一个都具有我添加到它们的特殊额外属性。

我试图通过创建一个`UIControl`类别并在需要的地方导入它来实现这一点，但我遇到了问题。

这是我的代码。

我的`setSpecialproperty`方法被调用，但它似乎在无限循环中被调用，直到应用程序崩溃。

你能告诉我我做错了什么或建议一种更聪明的方法来为我的所有财产添加一个属性`UIControls`吗？

```
@interface UIControl (MyControl)
{

}
@property(nonatomic,strong) MySpecialProperty  *specialproperty;

-(void)setSpecialproperty:(MySpecialProperty*)param;
@end 
```

////////

```
#import "UIControl+MyControl.h"

@implementation UIControl (MyControl)

-(void)setSpecialproperty:(MySpecialProperty*)param
{
    self.specialproperty=param;
} 
```

///////////////

```
#import "UIControl+MyControl.h"

@implementation ViewController

UIButton *abutton=[UIButton buttonWithType:UIButtonTypeCustom];
MySpecialProperty *prop=[MySpecialProperty alloc]init];
[abutton setSpecialproperty:prop]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:23:42.753

虽然您无法通过类别将 iVar 添加到 UIControl，但您可以添加关联对象，它可用于执行几乎相同的功能。

因此，像这样在 UIControl 上创建一个类别：

```
static char kControlNameKey;

- (void) setControlName: (NSString *) name
{
    objc_setAssociatedObject(self, &kControlNameKey, name, OBJC_ASSOCIATION_COPY);
}

- (NSString *) controlName
{
    return (NSString *)objc_getAssociatedObject(array, &kControlNameKey);
} 
```

不仅如此，我想您需要在设置新关联之前检查关联是否存在，否则它会泄漏，但这应该给您一个开始。

有关更多详细信息，请参阅[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocAssociativeReferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:21:09.610

问题是您不能将属性添加到类别，可以添加行为（方法）但不能添加属性或属性，这只能对扩展进行，并且您不能创建 SDK 类的扩展

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:14:22.907

`self.specialproperty=param`与调用完全相同（有关 Obj-C 点表示法的一些*完全无偏见*`[self setSpecialproperty]`的覆盖，请参见[此处），这使您当前的使用无限递归。](http://qualitycoding.org/dot-notation/)

 *你真正想做的是：

```
-(void)setSpecialproperty:(MySpecialProperty*)param
{
  _specialproperty = param;
} 
```

为您的财产`_specialproperty`隐式创建的位置在哪里。`ivar`

我假设您实施`setSpecialproperty`setter 是有原因的？为什么不只使用为您隐式创建的那个？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T12:19:17.733

使用你的方法

将您的方法名称更改为

```
-(void)setSpecialproperty:(MySpecialProperty *)specialproperty

-(void)setSpecialproperty:(MySpecialProperty*)specialproperty
{
   if(_specialproperty!=specialproperty)
  _specialproperty = specialproperty;
} 
```

并将您的 specialProperty 合成为

```
@synthesize specialproperty=_specialproperty; 
```*

# android - 如何在 android 应用程序中使用 facebook 登录从服务器访问数据

> ID：15088843
> 
> 赞同：0
> 
> 时间：2013-02-26T12:12:02.987
> 
> 标签：android

我想在我的 Android 应用程序中使用 Facebook 登录，以便用户可以从服务器访问数据。我在这里使用 Drupal 服务。

首先用户输入用户名和密码，然后它会在 Facebook 上验证。然后如果用户是真实的，那么它应该从 drupal 服务模块访问他的数据。我不知道我的服务器如何知道该用户是真实的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:20:41.933

当用户第一次使用 facebook 登录时，如果邮件 ID 没有在您的服务器上退出，则使用他的邮件 ID 在您的服务器上注册该用户，否则继续使用用户信息，然后给他身份验证密钥以访问您的网络服务，

在您的应用程序中放置一个 facebook 登录按钮，如果用户从 Facebook 获得身份验证，则单击 facbook 按钮后，从 获取 Facebook 邮件 ID、名称等`GraphUser`，现在您在手机上获得了所有信息，现在向您自己的服务器发出请求使用这些参数并检查用户是否已经使用相同的凭据（如电子邮件 ID）退出，如果存在则给他经过身份验证的令牌，否则在您的数据库中注册该用户，然后给他身份验证令牌。现在清楚了吗

# sql-server-2008 - 更新多条记录，临时键重叠

> ID：15088844
> 
> 赞同：0
> 
> 时间：2013-02-26T12:12:05.627
> 
> 标签：sql-server-2008, postgresql, oracle10g, sql-update, unique-constraint

我在 DB 上有一个表，其中包含以下字段作为 PK: `DOC_ID`, `SECTION_ID`, `SET_ID`, `CELL_ID`. 正如您可以推断的那样，这被称为一组 Excel 电子表格。

除了那些字段，我还有一个`CELL_ROW`字段和`CELL_COL`字段。使用`SET_ID`( *unique* )，它们形成了一个替代键。

因此，至少在理论上，如果我想交换两个单元格的坐标，我需要释放该约束，或者使用第三个临时空闲位置（例如*A100000*）。

假设我有以下单元格：

```
 DOC_ID | SECTION_ID | SET_ID | CELL_ID | CELL_ROW | CELL_COL
--------|------------|--------|---------|----------|----------
   5    |     456    |  8778  |  15045  |    5     |    4
   5    |     456    |  8778  |  15048  |    5     |    5 
```

并假设我有以下临时表，我从中执行`UPDATE`到主表：

```
 DOC_ID | SECTION_ID | SET_ID | CELL_ID | CELL_ROW | CELL_COL
--------|------------|--------|---------|----------|----------
   5    |     456    |  8778  |  15045  |    5     |    5
   5    |     456    |  8778  |  15048  |    5     |    4 
```

从理论上讲，这`UPDATE`应该引发一个例外......

但是刚刚试了一下，效果很好！

你能解释一下为什么吗？Oracle 是否将其作为原子操作执行，因此仅在整个操作之后检查约束（而不是每条记录的记录）？

MS SQL Server 2008 r2 和 Postgres 在这种情况下的表现如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:04:37.163

PostgreSQL 会抛出一个错误，除非你推迟唯一约束（然后你不能将它用作外键）。我不确定 SQL Server。

顺便说一句，您可能希望将其称为 Postgres 或 PostgreSQL。将其称为 Postgre 表明您与社区的联系太少而无法纠正。

**有关 PostgreSQL 的更多信息**

PostgreSQL 在元组更新时检查元组约束。这意味着即使在以不违反唯一约束的原子方式更新集合的情况下，也会违反唯一约束。这导致了一些有趣的解决方法，例如将整数键乘以 -1 的集合，然后在下一次更新中再次乘以 -1 并加一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:53:11.620

我在 Postgresql 中尝试过，正如预期的那样，出现了重复的键错误：

```
create table t (
    doc_id integer,
    section_id integer,
    set_id integer,
    cell_id integer,
    cell_row integer,
    cell_col integer,
    primary key (doc_id, section_id, set_id, cell_id),
    unique (set_id, cell_row, cell_col)
);

insert into t (doc_id, section_id, set_id, cell_id, cell_row, cell_col)
values
(5, 456, 8778, 15045, 5, 4),
(5, 456, 8778, 15048, 5, 5);

create temporary table t_temp (
    doc_id integer,
    section_id integer,
    set_id integer,
    cell_id integer,
    cell_row integer,
    cell_col integer
);

insert into t_temp (doc_id, section_id, set_id, cell_id, cell_row, cell_col)
values
(5, 456, 8778, 15045, 5, 5),
(5, 456, 8778, 15048, 5, 4);

update t
set
    cell_col = t_temp.cell_col
from t_temp
where
    t.doc_id = t_temp.doc_id
    and t.section_id = t_temp.section_id
    and t.set_id = t_temp.set_id
    and t.cell_id = t_temp.cell_id
;
ERROR:  duplicate key value violates unique constraint "t_set_id_cell_row_cell_col_key"
DETAIL:  Key (set_id, cell_row, cell_col)=(8778, 5, 5) already exists. 
```

如果约束设置为`deferrable`. 检查该关键字的 create table 语句。

# mysql - 这是 MySQL 错误还是我的查询错误？

> ID：15088852
> 
> 赞同：1
> 
> 时间：2013-02-26T12:12:40.130
> 
> 标签：mysql

昨天我遇到了一些 sql 怪事。我有一个融化了服务器的查询，所以为了改进它，我做了这个查询：

```
SELECT idEvent, MAX( fechaHora ) , codAgente, evento FROM eventos_centralita GROUP BY codAgente 
```

它*似乎*适用于这个模式：

```
CREATE TABLE IF NOT EXISTS `eventos_centralita` (
  `idEvent` int(11) NOT NULL AUTO_INCREMENT,
  `fechaHora` datetime NOT NULL,
  `codAgente` varchar(8) DEFAULT NULL,
  `extension` varchar(20) DEFAULT NULL,
  `evento` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idEvent`),
  KEY `codAgente` (`codAgente`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=105847 ; 
```

我的意思是，那个小时确实是代理的最大时间。但是，事件的id和事件本身是错误的......

那么，这是一个错误还是预期的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:13:51.917

您正在混合聚合函数和“正常”列选择。此“功能”仅适用于 MySQL 并返回一个随机 id。

通常，您应该按特定列分组，并使用聚合函数来选择不在该组中的所有其他列。例子：

```
SELECT e1.codAgente, e1.idEvent, e1.fechaHora, e1.evento
FROM eventos_centralita e1
inner join 
(
    select codAgente, MAX(fechaHora) as fechaHora
    from eventos_centralita
    group by codAgente
) e2 
on e1.codAgente = e2.codAgente and e1.fechaHora = e2.fechaHora 
```

# java - 位于 $CATALINA_HOME/conf/[enginename]/[hostname]/ 中的单个 XML 文件

> ID：15088856
> 
> 赞同：0
> 
> 时间：2013-02-26T12:12:44.437
> 
> 标签：java, tomcat, configuration, datasource, context.xml

我正在使用`tomcat 7`
我想在`context.xml`我的战争之外使用自定义名称来开发 java web 应用程序。我在这个文件中定义了数据库资源。

根据[tomcat文档](http://www.mulesoft.com/tomcat-context#.USyTy6IgdAI)，我将`context.xml.default`文件放在目录中`CATALINA_HOME/conf/[enginename]/[hostname]/`，我可以获得数据库配置。

现在，我想重命名`context.xml.default`并放置与我的上下文路径匹配的自定义文件名。如果这样做，我将无法再获取数据库配置，并且我的应用程序会抛出异常：

```
org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot create JDBC driver of class '' for connect URL 'null' 
```

这是我的`context.xml.default`文件的内容：

```
<Context
crossContext="true"
reloadable="true" >

 <Resource
    name="jdbc/myDS"
    auth="Container"
    driverClassName="oracle.jdbc.driver.OracleDriver"
    factory="com...encription.util.EncryptedDataSourceFactory"
    logAbandoned="true"
    maxActive="30"
    maxIdle="10"
    maxWait="1000"
    password="encryptedPass"
    removeAbandoned="true"
    removeAbandonedTimeout="60"
    type="javax.sql.DataSource"
    url="jdbc:oracle:thin:@myIP:myPort:FRONT"
    username="username" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:58:48.247

我使用的配置是正确的，但问题是 eclipse 使用`{catalina_base}/wtpwebapps`目录来部署 Web 应用程序。我在 Eclipse 的服务器配置中

**使用 webapps 更改了 wtpwebapps 文件夹，****现在一切正常。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:33:49.207

该错误可能是由于缺少 JDBC 驱动程序造成的。尝试将 Oracle 驱动程序放入该`%TOMCAT_HOME%/common/lib`目录。

另一种可能性是，您`<NAME_OF_WEBAPP>.xml`在`conf/catalina/localhost`.

# command-line - Windows Batch 错误：“'ping' 未被识别为内部或外部命令可运行程序或批处理文件。”

> ID：15088857
> 
> 赞同：3
> 
> 时间：2013-02-26T12:12:45.870
> 
> 标签：command-line, batch-file, cmd, command-line-arguments

我正在尝试在 Windows 中运行此命令：

```
ping -n 5 127.0.0.1 > nul 
```

我得到错误：

```
'ping' is not recognized as an internal or external command operable 
program or batch fie. 
```

**为什么windows找不到ping？** 这是我的脚本不起作用的地方：

```
@ECHO OFF

::set path
SET path=M:\\5.bmp

:findfile
IF EXIST %path% (
    ECHO File found
) ELSE (
    ECHO File not found
    ping -n 5 127.0.0.1 > nul
    goto findfile
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:19:29.847

您已覆盖`PATH`环境变量，因此命令处理器无法再找到`ping`可执行文件。

修复很简单 - 只需使用不同的变量名！

```
:: set path
SET MyPath=M:\\5.bmp

:findfile
IF EXIST %MyPath% ( 
```

请注意，如果您真的想设置`path`环境变量，您应该像这样附加它：

```
REM Set temporarily for this session
SET PATH=%PATH%;C:\Some\Folder

REM Set permanently (but note - this change will not be made to this session)
SETX PATH=%PATH%;C:\Some\Folder 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-01T09:37:52.063

您好要修复“ping”，请按照以下步骤操作

转到我的电脑中的属性

高级系统设置 -----> 高级 -----> 环境变量 从系统变量列表中选择 'PATH' 并编辑并将 PATH 设置为 c:\windows\system32 ；这将解决您的问题。

-----> 如果仍然有问题，请执行以下步骤...

控制面板 --> 系统和安全 --> Windows 防火墙 --> 高级设置 --> 入站规则 --> 新规则 --> 自定义规则

在协议和端口：协议：ICMPv4在同一面板上去自定义，选择“特定ICMP类型”，勾选框“回声请求”

其余的都是微不足道的；转到下一个...下一个...并保存。

你应该完成了。此框从此时开始响应 ping。

干杯

普拉萨德

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:45:13.497

**如何诊断此错误：**

```
'ping' is not recognized as an internal or external command operable 
program or batch fie. 
```

因为您的`path`环境变量不包含指向可执行文件的目录：`ping.exe`. 所以问题就变成了为什么你的命令行程序`cmd.exe`找不到`ping.exe`？

您可以像这样在命令行上打印出路径变量：

```
echo %PATH% 
```

为我打印：

```
C:\WINDOWS;C:\WINDOWS\system32;C:\Program Files\jZip;C:\MinGW\bin 
```

上面的字符串由分号（`;`）分隔。请注意名为:`C:\WINDOWS\System32`的元素，该元素定义了 ping.exe 的位置。

**解决方案**

1.  您没有在路径变量中指定 C:\WINDOWS\System32。确保它在那里。
2.  ping.exe 丢失。找出谁删除了它并将其放回原处。
3.  ping.exe 已损坏。在它所在的地方运行它：`C:\WINDOWS\System32\ping.exe`，或替换`ping.exe`.
4.  在查找它之前，您已经覆盖了 PATH 变量。

# javascript - PhoneGap + JQuery Mobile + 过渡 + 多个 HTML 文件 = “错误加载页面”

> ID：15088861
> 
> 赞同：0
> 
> 时间：2013-02-26T12:12:57.760
> 
> 标签：javascript, jquery-mobile, cordova

我正在开发一个 PhoneGap 应用程序（HTML5 + CSS3 + Javascript/JQuery Mobile）。我已经开始使用具有多个页面的单个 HTML 文件。我在页面之间切换时使用页面转换（幻灯片）。

当我将单个 HTML 页面分解为多个 HTML 文件（每个页面一个）时，就会出现问题。我无法加载页面。框架显示“错误加载页面”。

我知道 JQuery Mobile 框架在使用多个 html 文件时使用 AJAX 加载页面内容。如果我将应用程序部署在 Web 服务器（比如 IIS）中，一切都会好起来的。但是在本地文件中运行——比如 PhoneGap 应用程序需要——，框架无法执行 AJAX 请求，因此无法加载页面“错误加载页面”。

*   我需要使用 JQuery Mobile
*   我需要使用页面转换（幻灯片）来改善用户体验
*   我想使用多个 HTML 文件而不必处理一个独特的巨大 html 文件
*   该应用程序不会部署到 Web 服务器，因为它是一个 PhoneGap 应用程序，必须在本地文件系统中运行。
*   我正在将应用程序部署在 android 中并使用 Adob​​e Build 生成 APK 安装文件。

有人可以给点建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:29:01.517

我已经解决了我的问题。

我在想 PhoneGap 的行为就像直接从文件系统加载页面并且不允许 AJAX 请求一样。在我的桌面测试中，我无法加载外部链接“加载页面错误”。但是在设备上发布应用程序后，所有外部链接都会相应地运行。在某种程度上，PhoneGap 基础设施可以在本地处理 AJAX 请求。

因此，为了在我的桌面上进行测试，我只需将应用程序放在 IIS 中，外部链接就会起作用。当应用程序在设备上发布时，行为将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:27:52.307

PhoneGap doesn't run a webserver. All files are loaded via `file://` protocol. Thus, any request is considered cross origin.

To solve this, you need to allow requests to all hosts.

```
<access uri="*" subdomains="true" /> 
```

See [http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

# asp.net - 从 Asp.net 应用程序发送推送 SMS

> ID：15088874
> 
> 赞同：1
> 
> 时间：2013-02-26T12:14:04.637
> 
> 标签：asp.net, sms, push

请让我知道一种方法，如何从 asp.net 应用程序向手机号码发送推送短信。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:21:55.080

试试这段代码，

```
protected void Page_Load(object sender, EventArgs e)
{
    textboxRecipient.Width = 400;
    textboxMessage.Width = 450;
    textboxMessage.Rows = 10;
    textboxError.Width = 400;
    textboxError.Rows = 5;

    textboxError.ForeColor = System.Drawing.Color.Red;
    textboxError.Visible = false;
    textboxError.Text = "";

    if (!Page.IsPostBack)
    {
        textboxRecipient.Text = "+7588451632";
        textboxMessage.Text = "Hello World!";
    }
}

protected void buttonSendOnClick(object sender, EventArgs e)
{
    //are required fields filled in:
    if (textboxRecipient.Text == "")
    {
        textboxError.Text += "Recipient(s) field must not be empty!\n";
        textboxError.Visible = true;
        return;
    }

    //we creating the necessary URL string:
    string ozSURL = "http://127.0.0.1"; //where Ozeki NG SMS Gateway is running
    string ozSPort = "9501"; //port number where Ozeki NG SMS Gateway is listening
    string ozUser = HttpUtility.UrlEncode("admin"); //username for successful login
    string ozPassw = HttpUtility.UrlEncode("abc123"); //user's password
    string ozMessageType = "SMS:TEXT"; //type of message
    string ozRecipients = HttpUtility.UrlEncode(textboxRecipient.Text); //who will get the message
    string ozMessageData = HttpUtility.UrlEncode(textboxMessage.Text); //body of message

    string createdURL = ozSURL + ":" + ozSPort + "/httpapi" +
        "?action=sendMessage" +
        "&username=" + ozUser +
        "&password=" + ozPassw +
        "&messageType=" + ozMessageType +
        "&recipient=" + ozRecipients +
        "&messageData=" + ozMessageData;

    try
    {
        //Create the request and send data to Ozeki NG SMS Gateway Server by HTTP connection
        HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(createdURL);

        //Get response from Ozeki NG SMS Gateway Server and read the answer
        HttpWebResponse myResp = (HttpWebResponse)myReq.GetResponse();
        System.IO.StreamReader respStreamReader = new System.IO.StreamReader(myResp.GetResponseStream());
        string responseString = respStreamReader.ReadToEnd();
        respStreamReader.Close();
        myResp.Close();

        //inform the user
        textboxError.Text = responseString;
        textboxError.Visible = true;
    }
    catch (Exception)
    {
        //if sending request or getting response is not successful Ozeki NG SMS Gateway Server may do not run
        textboxError.Text = "Ozeki NG SMS Gateway Server is not running!";
        textboxError.Visible = true;
    }

} 
```

# php - 使用乘数进行价格优化 - 每个部分都有乘数时如何根据价格进行优化？

> ID：15088877
> 
> 赞同：0
> 
> 时间：2013-02-26T12:14:11.083
> 
> 标签：php, excel, optimization, vba

我的工作任务涉及找到解决这个难题的方法。

这里的客户可以每天、每月、每季度或每年购买产品分配。每个步骤都有一个与之相关的乘数，以激励人们预订最长的分配，例如一天 = 1.5 倍单价，季度 = 1.3，月 = 1.2 等。

这很好，但是，现在他们想看看每个步骤是否有不同的乘数（即第 1 个月 = 1.5、第 2 个月 = 1.2、第 3 个月 = 1.4 等）到每月分辨率。

在这种情况下，基本情况是 year = 1，daily = 1.5，其中设置了每月和每季度的乘数。

我的任务是根据需求概况对每个步骤进行完美优化，以最小化账单（我们正在模拟买家将做什么）。

因此，总而言之，我需要找到买家在满足他们需求的情况下可以获得的最低价格。

这是我正在使用的那种需求图表的示例，其中显示了乘数等于 1 的每个年度划分（基本情况） ![图片](../Images/10b34e6b8784a5eeadac0c81041d5837.png)

为此，我正在使用**VBA、Python、PHP 或 C。**最好是 VBA（工作想要什么）或 PHP（我想要什么），但无论如何，这是我不明白的一般情况。我将如何开始进行这种价格优化？它会是一个逐个模拟的案例吗？（其中有 131,071 [年分为 12 个月，4 个季节，1 年 + 12 个月 + 4 个季节 + 1 个每日乘数 = 18, 2^18=262144，除以 2 因为在每种情况下他们都会购买天数和减去1 为空情况]）。

感谢任何可以提供帮助的人，即使只是一点点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:51:48.057

这类似于包装问题和背包问题吗？[http://en.wikipedia.org/wiki/Packing_problem](http://en.wikipedia.org/wiki/Packing_problem)和[http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)

如果您将每个月视为一个包装尺寸，那么您将追求最适合总需求的尺寸。只是增加了第一个包安装一年的时间，然后是 5 个月，然后是 4 个月等等。即使考虑到像大自然这样的蛮力，这些算法也出奇地快，如果需要的话，它们也很好并且可以分解到多个处理器？（对不起，这不仅仅是评论，我还不能评论，或者不知道如何..）（想多了，也许 FFT 也可以在这里使用，但我不是这方面的专家）

# jquery - Simplemodal - iframe 不会关闭

> ID：15088880
> 
> 赞同：0
> 
> 时间：2013-02-26T12:14:20.530
> 
> 标签：jquery, modal-dialog, simplemodal

我正在使用来自[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)的 simplemodal 。

我遇到的问题是，一旦 iframe 打开，我就无法关闭它。

```
 <script type="text/javascript">

// Route Which Page

$.modal('<iframe src="<?= $src ?>" height="230" width="550" style="border:0">', {
    closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>",
    containerCss:{
        backgroundColor:"#eee",
        borderColor:"#ddd",
        height:230,
        padding:0,
        width:550
    },
    overlayClose:false
});

    /* When #btnClose is clicked, close the modal */    
    $('#disagree').on("click", function(event){
        parent.$.modal.close();
    });

</script> 
```

弹出并工作得很好，只是无法关闭弹出窗口！我已经使用了所有谷歌的想法，只是不会关闭。我可以让它关闭，它会闪烁然后在下面打开第二个 iframe。

我使用以下代码关闭：

```
/* When #btnClose is clicked, close the modal */    
$('#disagree').on("click", function(event){
    $.modal.close();
});

/* When #btnClose is clicked, close the modal */    
$('#disagree').on("click", function(event){
    parent.$.modal.close();
});

<a href="#" title="Close" class="modal-close simplemodal-close">x</a> 
```

实际模态设置：

```
closeHTML:"<a href='#' title='Close' class='modal-close'>x</a>", 
```

工作正常，但我需要关闭正在加载的 iframe 内部的操作按钮。

任何想法或帮助都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T11:13:02.947

将事件添加到 iframe 中的链接

```
$('.modal-close').click( function() {
        parent.$.modal.close();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:13:23.110

通过查看弹出的简单演示，然后查看关闭链接上使用的点击事件数据，我发现了这一点：

> 函数 (b){b.preventDefault();a.close()}

该数据`<a class="modalCloseImg simplemodal-close" title="Close" id="modalId"></a>`来自此链接的关闭 ahref [Basic Modal Dialog](http://www.ericmmartin.com/projects/simplemodal-demos/)

你能不能试试这个：

```
 $('#disagree').on("click", function(event)
   {
     $('#modalId').trigger('click');
     //OR:
     $('.modalCloseImg').trigger('click');
   }); 
```

“modalId”只是我给上面 ahref 链接的一个 ID。或者，您可以这样做：`$('#IdOfiFrame').remove();`

# grails - grails spring security自定义userDetailsS ervice

> ID：15088882
> 
> 赞同：2
> 
> 时间：2013-02-26T12:14:20.833
> 
> 标签：grails, spring-security

我在将 userDetailsS​​ervice 注入自定义提供程序时遇到问题。我有一个自定义的 userDetailsS​​ervice，我试图将它注入我的提供者，但是，由于我的提供者的某种原因，这在 null userDetailsS​​ervice 中解析。以下来自我的 resources.groovy：

```
beans = {
  userDetailsService(CustomUserDetailsService) {
  }

  stupidAuthenticationProvider(StupidAuthenticationProvider) {
    userDetailsService = ref("userDetailsService")
  }
} 
```

基本上我只是在我的提供者中定义它如下：

```
public class StupidAuthenticationProvider implements AuthenticationProvider {
def userDetailsService 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:56:17.420

您的 CustomUserDetailsS​​ervice 是否在一个包中？如果是，那么您应该在配置中给出它的完全限定名称。

以下对我有用：

```
beans = {
    userDetailsService(com.mysite.MyUserDetailsService)
//and then refer it like...
    emailAuthenticationProvider(com.mysite.EmailAuthenticationProvider) {
        springSecurityService = ref('springSecurityService')
        userDetailsService = ref('userDetailsService')
    }
} 
```

在身份验证提供程序中...

```
class EmailAuthenticationProvider implements AuthenticationProvider {

    def userDetailsService
    def springSecurityService

    @Override
    public Authentication authenticate(Authentication authentication) throws AuthenticationException {
        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:41:14.370

尝试使用类的限定名称：

```
 beans = {
        userDetailsService(com.test.CustomUserDetailsService){
        }

        StupidAuthenticationProvider(com.test.XXX.StupidAuthenticationProvider) {
            userDetailsService = ref('userDetailsService ')
        }
    } 
```

# business-process-management - 如何在 Cordys BOP4 CU 18 中使用异常控制？

> ID：15088890
> 
> 赞同：0
> 
> 时间：2013-02-26T12:14:39.660
> 
> 标签：business-process-management, cordys-opentext

我正在使用 Cordys BOP4 技术进行应用程序开发。所以我想使用 Cordys IDE 提供的异常控制，但我无法正确使用它。

所以有知道的人，请告诉我如何在异常控制中设置活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:35:34.497

您可以使用捕获异常事件。将此事件拖放到要处理异常的活动上。捕获异常可以链接到任何 Web 服务、子进程或任何组（例如每个、while 或任何嵌入式进程）。在 catch 事件的属性中，有一个选项可以选择错误代码，它可以是自定义错误，也可以是通用错误。

# emacs - 将键序列向量转换为用户可读的字符串表示？

> ID：15088892
> 
> 赞同：5
> 
> 时间：2013-02-26T12:14:46.653
> 
> 标签：emacs, vector, key, elisp

如何将 emacs 密钥序列向量（即 read-key-sequence-vector 的结果）转换为用户可读的字符串？即，给定[7]，返回'Cg'。

我需要一种可靠的方法来检查任意长度的键序列之间的相等性，以及以非矢量格式（即人类可读）显示键序列。

具体来说，我的函数必须执行以下操作：

*   将键序列的哈希映射定义为值（字符串）。键序列具有任意长度（例如，"q" "w" 3" "4"），并且不受 emacs 键映射的限制。
*   在缓冲区中向用户显示映射（keysequence --> string）。因此，键序列必须是用户可以理解的，即不能是矢量格式。
*   从用户那里读取一个键序列，返回相应的字符串。

我可以使用两个函数，*read-key-sequence*和*read-key-sequence-vector*。前者有时以字符串形式返回，有时以向量形式返回用户键入的键序列。例如，有时它返回“1”，但有时返回 [49]，用于键“一”。这种不可预测的行为不允许我测试是否相等。

后者将键作为向量返回，正如我所提到的，这对我没有用，因为我需要用户查看可能的键序列。

我想我可以手动创建当前机器键盘上所有键的 hasmap。但是恐怕这不能移植到其他机器上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:14:50.210

```
(key-description [7]) => "C-g" 
```

# c++ - 循环整数范围的最简洁方法

> ID：15088900
> 
> 赞同：49
> 
> 时间：2013-02-26T12:15:31.403
> 
> 标签：c++

由于 C++11 引入了基于范围的 for 循环（[c++11 中的基于范围的 for](https://stackoverflow.com/questions/9005835/range-based-for-in-c11)），那么在整数范围内表示循环的最简洁方法是什么？

代替

```
for (int i=0; i<n; ++i) 
```

我想写一些类似的东西

```
for (int i : range(0,n)) 
```

新标准是否支持这种类型的东西？

**更新**：本文描述了如何在 C++11 中实现范围生成器：[Generator in C++](https://en.wikipedia.org/wiki/Generator_(computer_programming)#C++)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-26T12:36:09.203

虽然 C++11 不提供，但您可以编写自己的视图或使用 boost 中的视图：

```
#include <boost/range/irange.hpp>
#include <iostream>

int main(int argc, char **argv)
{
    for (auto i : boost::irange(1, 10))
        std::cout << i << "\n";
} 
```

此外，[`Boost.Range`](https://www.boost.org/doc/libs/1_71_0/libs/range/doc/html/index.html)包含一些更有趣的范围，您会发现它们与新`for`循环相结合非常有用。例如，您可以获得[反向视图](https://www.boost.org/doc/libs/1_71_0/libs/range/doc/html/range/reference/adaptors/reference/reversed.html)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-26T12:20:26.460

最整洁的方法仍然是：

```
for (int i=0; i<n; ++i) 
```

我想你可以做到这一点，但我不会说它那么整洁：

```
#include <iostream>

int main()
{
  for ( auto i : { 1,2,3,4,5 } )
  {
    std::cout<<i<<std::endl;
  }
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-08-29T20:51:35.470

随着`C++20`我们将有*范围*。您可以通过从其作者 Eric Niebler 下载最新的稳定版本来尝试它们，从[他的 github](https://github.com/ericniebler/range-v3)或转到[Wandbox](https://wandbox.org/permlink/LzHfd7Vvi8FgAN12)。您感兴趣的是`ranges::views::iota`，这使得这段代码合法：

```
#include <range/v3/all.hpp>
#include <iostream>

int main() {
    using namespace ranges;

    for (int i : views::iota(1, 10)) {
        std::cout << i << ' ';
    }
} 
```

这种方法的优点在于`view`s 是*惰性*的。这意味着即使`views::iota`表示从`1`到独占的范围，在某一点上也`10`不会超过该范围中的一个。`int`这些元素是*按需生成的*。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-13T09:46:19.017

如果您不介意以相反的顺序执行循环，则可以替换

`for (int i=0; i<n; ++i)`

用更简单的

`for (int i=n; i--;)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T13:26:48.473

根据您对整数所做的事情，还要考虑`<numeric>`标题，特别 [`std::iota`](http://en.cppreference.com/w/cpp/algorithm/iota)是结合`std::transform`并`std::fill`根据情况而定。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-10-22T16:25:54.667

好吧，我真的很喜欢[这里](https://habr.com/ru/post/516630/)提供的解决方案（对不起，它没有翻译成英文）：

```
#define FOR(I,UPPERBND) for(int I = 0; I<int(UPPERBND); ++I) 
```

主要思想是这样描述的：当我们谈论简单的迭代索引循环时，我们不需要考虑它。但是，当我们使用 for(;;) 构造时，总是有三个步骤：初始化、结束条件检查、迭代。对于像 i:[0,n) 这样简单的循环，这有点过头了。我喜欢这个想法，我们想以简单的方式编写简单的东西。当你看到 FOR(i,N) - 你就知道，没有什么特别的。当您看到 for(;;) 构造时 - 您必须更加小心并查看它的所有三个部分。只是那篇文章的一个例子：

```
for (int iter=0; iter<nb_iter; iter++) {          // some iterative computation
    for (int c=0; c<mesh.cells.nb(); c++)         // loop through all tetrahedra
        for (int lv0=0; lv0<4; lv0++)             // for every pair of
            for (int lv1 = lv0+1; lv1<4; lv1++)   // vertices in the tet
                for (int d=0; d<3; d++) {         // do stuff for each of 3 dimensions
                    nlRowScaling(weight);
                    nlBegin(NL_ROW);
                    nlCoefficient(mesh.cells.vertex(c, lv0)*3 + d,  1);
                    nlCoefficient(mesh.cells.vertex(c, lv1)*3 + d, -1);
                    nlEnd(NL_ROW);
                }
    [...]
} 
```

成为一个：

```
FOR(iter, nb_iter) {
    FOR(c, mesh.cells.nb())
        FOR(lv0, 4)
            for (int lv1 = lv0+1; lv1<4; lv1++)
                FOR(d, 3) {
                    nlRowScaling(weight);
                    nlBegin(NL_ROW);
                    nlCoefficient(mesh.cells.vertex(c, lv0)*3 + d,  1);
                    nlCoefficient(mesh.cells.vertex(c, lv1)*3 + d, -1);
                    nlEnd(NL_ROW);
                }
    [...]
} 
```

你看，你应该把注意力集中在哪里。

# jquery - jQuery Cycle IE 8 PNG问题

> ID：15088902
> 
> 赞同：0
> 
> 时间：2013-02-26T12:15:34.153
> 
> 标签：jquery, internet-explorer-8, png, cycle

好的伙计们，为什么IE8在使用循环时不支持PNG，我们如何解决这个问题，几个月来一直在寻找解决方案但一无所获..这个解决方案的问题很大......

示例： http: [//mdcontrols.co.uk/](http://mdcontrols.co.uk/) - 检查 IE9 然后 IE8 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:58:04.920

cleartype: 真 cleartypeNoBg: 真

*   已修复此问题

# c - C 链接器错误：.\_build\ble_app_hids_keyboard.axf：错误：L6200E：符号 UX_captureStarted 多次定义（由 sens.o 和 main.o）

> ID：15088904
> 
> 赞同：1
> 
> 时间：2013-02-26T12:15:37.247
> 
> 标签：c, linker, linker-errors

嗨我正在尝试编译我的程序，但总是得到这个链接器错误：

```
.\_build\ble_app_hids_keyboard.axf: Error: L6200E: Symbol UX_captureStarted multiply defined (by sens.o and main.o)
..\_build\ble_app_hids_keyboard.axf: Error: L6200E: Symbol UX_captureStarted multiply defined (by algorithm.o and main.o). 
```

这是我的代码的结构：

感测器

```
extern int8_t UX_captureStarted = 0; 
```

感测器

```
int8_t UX_captureStarted = 0; 
```

算法.h

```
#include "sens.h"
// some processing using UX_captureStarted 
```

主程序

```
#include "algorithm.h"
//some processing using UX_captureStarted 
```

使用与 UX_captureStarted 相同的结构声明的其他几个变量时，我遇到了相同的链接器错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:22:52.760

它有这些变量的多个实例，导致链接问题。检查您的编译顺序，并尝试为它们制作一个来源。此外，您可能想删除 sens.c 中的定义行。

# asp.net - 无法识别配置文件 Web.config

> ID：15088907
> 
> 赞同：3
> 
> 时间：2013-02-26T12:15:50.547
> 
> 标签：asp.net, web-config

我和我的朋友在 Asp.Net 中开发了一个应用程序，但我遇到了奇怪的问题。
我从我们的 ftp 服务器下载了最新的源代码（我们还没有安装源代码控制工具），当我尝试编译和运行应用程序时，IIS 抛出异常。我检查了目录并且有一个 web.config 文件。
我不明白出了什么问题:(。感谢您的帮助:)。
这是 IIS 的响应：

```
Runtime Error
Description: An application error occurred on the server. The current custom error 
settings forthis application prevent the details of the application error from being 
viewed remotely (for security reasons). It could, however, be viewed by browsers 
running on the local server machine.

Details: To enable the details of this specific error message to be viewable on 
      remote machines, please create a <customErrors> tag within a "web.config" 
      configuration file located in the root directory of the current web 
       application. This <customErrors> tag should then have its "mode" 
       attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page 
by modifying the "defaultRedirect" attribute of the application's <customErrors> 
configuration  tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:02:40.130

天啊！！！我发现了问题。我没有检查 Windows 资源管理器选项“显示所有已知的文件扩展名”，我用 txt 扩展名保存了 web.config，我还没有看到那个荒谬的错误。谢谢帮忙！！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:20:23.370

您需要将该部分添加到您的 Web.config 以便您可以看到实际的异常。

```
<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:32:36.980

如果不将其更改为`<customErrors mode="Off"/>`您将看不到实际错误。
所以改成

```
 <system.web>
        <customErrors mode="Off"/>
    </system.web> 
```

并查看您遇到的实际错误。

# frameworks - 违反实体框架 5.0 多重性约束

> ID：15088911
> 
> 赞同：1
> 
> 时间：2013-02-26T12:16:08.860
> 
> 标签：frameworks, entity, constraints, multiplicity

我有一个无法修复的违反多重性约束的错误。

```
Multiplicity constraint violated. The role 'Log_Main_Combinations_Source' of the relationship 'Bee.Stats.LogEntities.Log_Main_Combinations' has multiplicity 1 or 0..1. 
```

这是我的课

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_Main")]
public class Log_Main
{
    private int p_id;
    private DateTime p_userDateAndTime;
    private DateTime p_utcDateAndTime;
    private string p_key;
    private string p_value;
    private ICollection<Log_Combinations> p_combinations = new List<Log_Combinations>();
    private ICollection<Log_Contexts> p_contexts = new List<Log_Contexts>();
    private ICollection<Log_Subkeys> p_subkeys = new List<Log_Subkeys>();

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("UserDateAndTime")]
    [System.ComponentModel.DataAnnotations.DataType(System.ComponentModel.DataAnnotations.DataType.DateTime)]
    public DateTime UserDateAndTime
    {
        get { return p_userDateAndTime; }
        set { p_userDateAndTime = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("UtcDateAndTime")]
    [System.ComponentModel.DataAnnotations.DataType(System.ComponentModel.DataAnnotations.DataType.DateTime)]
    public DateTime UtcDateAndTime
    {
        get { return p_utcDateAndTime; }
        set { p_utcDateAndTime = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Key")]
    public string Key
    {
        get { return p_key; }
        set { p_key = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Value")]
    public string Value
    {
        get { return p_value; }
        set { p_value = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Combinations")]
    public virtual ICollection<Log_Combinations> Combinations
    {
        get { return p_combinations; }
        set { p_combinations = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Contexts")]
    public virtual ICollection<Log_Contexts> Contexts
    {
        get { return p_contexts; }
        set { p_contexts = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Subkeys")]
    public virtual ICollection<Log_Subkeys> Subkeys
    {
        get { return p_subkeys; }
        set { p_subkeys = value; }
    }
} 
```

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_Combinations")]
public class Log_Combinations
{
    private int p_id;
    private string p_topAttribute;
    private ICollection<Log_SubCombinations> p_fk_Log_SubCombinations = new List<Log_SubCombinations>();
    private int p_fk_Log_Main_Id;
    private Log_Main p_fk_Log_Main;

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("TopAttribute")]
    public string TopAttribute
    {
        get { return p_topAttribute; }
        set { p_topAttribute = value; }
    }

    public int FK_Log_Main_Id
    {
        get { return p_fk_Log_Main_Id; }
        set { p_fk_Log_Main_Id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_SubCombinations")]
    public virtual ICollection<Log_SubCombinations> FK_Log_SubCombinations
    {
        get { return p_fk_Log_SubCombinations; }
        set { p_fk_Log_SubCombinations = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_Main")]
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("FK_Log_Main_Id")]
    public virtual Log_Main FK_Log_Main
    {
        get { return p_fk_Log_Main; }
        set { p_fk_Log_Main = value; }
    }

    public Log_Combinations()
    {
    }

    public Log_Combinations(string topAttribute, string attribute, string value)
    {
        this.TopAttribute = TopAttribute;
        this.FK_Log_SubCombinations.Add(new Log_SubCombinations(attribute, value));
    }
} 
```

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_Context")]
public class Log_Contexts
{
    private int p_id;
    private string p_topAttribute;
    private ICollection<Log_SubContexts> p_fk_Log_SubContexts = new List<Log_SubContexts>();
    private int p_fk_Log_Main_Id;
    private Log_Main p_fk_Log_Main;

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("TopAttribute")]
    public string TopAttribute
    {
        get { return p_topAttribute; }
        set { p_topAttribute = value; }
    }

    public int FK_Log_Main_Id
    {
        get { return p_fk_Log_Main_Id; }
        set { p_fk_Log_Main_Id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_SubContexts")]
    public virtual ICollection<Log_SubContexts> FK_Log_SubContexts
    {
        get { return p_fk_Log_SubContexts; }
        set { p_fk_Log_SubContexts = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_Main")]
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("FK_Log_Main_Id")]
    public virtual Log_Main FK_Log_Main
    {
        get { return p_fk_Log_Main; }
        set { p_fk_Log_Main = value; }
    }

    public Log_Contexts()
    {
    }

    public Log_Contexts(string topAttribute, string attribute, string value)
    {
        this.TopAttribute = TopAttribute;
        this.FK_Log_SubContexts.Add(new Log_SubContexts(attribute, value));
    }
} 
```

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_SubCombinations")]
public class Log_SubCombinations
{
    private int p_id;
    private string p_attribute;
    private string p_value;
    private int p_fk_Log_Combinations_Id;
    private Log_Combinations p_fk_Log_Combinations;

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Attribute")]
    public string Attribute
    {
        get { return p_attribute; }
        set { p_attribute = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Value")]
    public string Value
    {
        get { return p_value; }
        set { p_value = value; }
    }

    public int FK_Log_Combinations_Id
    {
        get { return p_fk_Log_Combinations_Id; }
        set { p_fk_Log_Combinations_Id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_Combinations")]
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("FK_Log_Combinations_Id")]
    public virtual Log_Combinations FK_Log_Combinations
    {
        get { return p_fk_Log_Combinations; }
        set { p_fk_Log_Combinations = value; }
    }

    public Log_SubCombinations()
    {
    }

    public Log_SubCombinations(string attribute, string value)
    {
        this.Attribute = attribute;
        this.Value = value;
    }
} 
```

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_SubContexts")]
public class Log_SubContexts
{
    private int p_id;
    private string p_attribute;
    private string p_value;
    private int p_fk_Log_Contexts_Id;
    private Log_Contexts p_fk_Log_Contexts;

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Attribute")]
    public string Attribute
    {
        get { return p_attribute; }
        set { p_attribute = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Value")]
    public string Value
    {
        get { return p_value; }
        set { p_value = value; }
    }

    public int FK_Log_Contexts_Id
    {
        get { return p_fk_Log_Contexts_Id; }
        set { p_fk_Log_Contexts_Id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_Contexts")]
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("FK_Log_Contexts_Id")]
    public virtual Log_Contexts FK_Log_Contexts
    {
        get { return p_fk_Log_Contexts; }
        set { p_fk_Log_Contexts = value; }
    }

    public Log_SubContexts()
    {
    }

    public Log_SubContexts(string attribute, string value)
    {
        this.Attribute = attribute;
        this.Value = value;
    }
} 
```

```
[System.ComponentModel.DataAnnotations.Schema.Table("Log_Subkeys")]
public class Log_Subkeys
{
    private int p_id;
    private string p_attribute;
    private string p_value;
    private int p_fk_Log_Main_Id;
    private Log_Main p_fk_Log_Main;

    [System.ComponentModel.DataAnnotations.Key]
    [System.ComponentModel.DataAnnotations.Schema.Column("Id")]
    [System.ComponentModel.DataAnnotations.Schema.DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public int Id
    {
        get { return p_id; }
        set { p_id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Attribute")]
    public string Attribute
    {
        get { return p_attribute; }
        set { p_attribute = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("Value")]
    public string Value
    {
        get { return p_value; }
        set { p_value = value; }
    }

    public int FK_Log_Main_Id
    {
        get { return p_fk_Log_Main_Id; }
        set { p_fk_Log_Main_Id = value; }
    }

    [System.ComponentModel.DataAnnotations.Required(AllowEmptyStrings = false)]
    [System.ComponentModel.DataAnnotations.Schema.Column("FK_Log_Main")]
    [System.ComponentModel.DataAnnotations.Schema.ForeignKey("FK_Log_Main_Id")]
    public virtual Log_Main FK_Log_Main
    {
        get { return p_fk_Log_Main; }
        set { p_fk_Log_Main = value; }
    }

    public Log_Subkeys()
    {
    }

    public Log_Subkeys(string attribute, string value)
    {
        this.Attribute = attribute;
        this.Value = value;
    }
} 
```

我希望我的关系如下：

```
Log_Main has many Contexts, each Contextshas one Log_Main
Log_Main has many Combinations, each Combinations has one Log_Main
Log_Main has many Subkeys, each Subkeys has one Log_Main

Log_Combinations has many Log_SubCombinations, each Log_SubCombinations has one Log_Combinations

Log_Contexts has many Log_SubContexts, each Log_SubContexts has one Log_Contexts 
```

可以在此处找到关系的图形表示：

![在此处输入图像描述](../Images/73aebfc3f12065b5ed09da5646cf6fd7.png)

我在我的 DbContext 中尝试了很多东西，但都没有成功。它现在没有额外的配置。这里有什么问题？

# xml - xsd：如何检查数字代码

> ID：15088923
> 
> 赞同：1
> 
> 时间：2013-02-26T12:16:52.657
> 
> 标签：xml, validation, xsd

我有一个 xsd 文件，我需要引入一个新的验证。我需要检查城市代码。城市代码是 68，一个始终相同的整数。

我该如何检查呢？

谢谢！

这是我的代码：

```
 <xsd:element name="CodCity">
<xsd:annotation><xsd:documentation>City Code has to be 68.</xsd:documentation></xsd:annotation>
<xsd:simpleType>
<xsd:restriction base="xsd:int"></xsd:restriction>
</xsd:simpleType>
</xsd:element> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:35:18.410

只需添加一个`xsd:enumeration`到您的`xsd:restriction`：[http ://www.w3schools.com/schema/schema_facets.asp](http://www.w3schools.com/schema/schema_facets.asp)

```
<xsd:restriction base="xsd:int">
  <xsd:enumeration value="68"/>
</xsd:restriction> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:42:25.903

如果您发布了输入 XML，可能会更具体。

假设您的示例输入 XML 不同，我将发布答案：

示例输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<testing>68</testing> 
```

XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="testing" type="citycode" />
  <xs:simpleType name="citycode">
    <xs:restriction base="xs:int">
      <xs:pattern value="68"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

示例输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<testing>Blah blah City code is: 68</testing> 
```

XSD [使用正则表达式模式]：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="testing" type="pattern" />
  <xs:simpleType name="pattern">
    <xs:restriction base="xs:string">
      <xs:pattern value=".*68"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

任何字符在哪里`.*`（换行除外），68 - 数字 68

另一个示例输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<testing>Blah blah City code is: '68' and something else</testing> 
```

XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="testing" type="pattern" />
  <xs:simpleType name="pattern">
    <xs:restriction base="xs:string">
      <xs:pattern value=".*68.*"/>
    </xs:restriction>
  </xs:simpleType>
</xs:schema> 
```

# r - 以增长率进行投影时避免 for 循环

> ID：15088924
> 
> 赞同：4
> 
> 时间：2013-02-26T12:17:01.317
> 
> 标签：r, for-loop

我有一组模拟增长率，比如 8 个时间段（和 5 个模拟增长路径），

```
r <- matrix(rnorm(40,0.05,0.01),5,8)
r
           [,1]       [,2]       [,3]       [,4]       [,5]       [,6]       [,7]       [,8]
[1,] 0.04229559 0.02846659 0.04948458 0.06144443 0.05657848 0.05782358 0.05545835 0.04090866
[2,] 0.06270360 0.06045967 0.04213729 0.05413941 0.06291148 0.05382643 0.05844549 0.03824342
[3,] 0.07846056 0.05503713 0.06800700 0.05888937 0.05759237 0.03789024 0.05250413 0.05011601
[4,] 0.04248757 0.04632404 0.04199074 0.04542522 0.03473972 0.04129197 0.06614095 0.06024244
[5,] 0.04382759 0.03555406 0.06630673 0.06019894 0.05057905 0.06336362 0.04954486 0.05092946 
```

然后，我想使用这些费率进行投影`x_{t+1} = x_{t} (1+r_{t})`。我可以使用`for`循环来做到这一点，

```
x.fn<-function(x,rr){
  xx<-cbind(x,rr)
  for(i in 1:ncol(rr)){
    xx[,i+1]<-xx[,i]*(1+rr[,i])
  }
  xx
}
x.fn(x=100, rr=r)
       x                                                                        
[1,] 100 104.4835 110.8389 116.7353 122.0573 128.6441 136.0210 142.7797 146.9829
[2,] 100 106.1199 111.8381 115.9955 120.3976 125.9980 132.5384 138.1477 142.3214
[3,] 100 103.5990 106.6866 111.5629 117.5999 124.9613 131.6552 137.2966 142.9163
[4,] 100 105.7215 109.7624 113.8707 120.5216 128.8663 136.1915 143.3542 150.7466
[5,] 100 104.1080 109.6981 112.7072 118.6346 126.1118 130.1564 135.8039 142.0652 
```

是否可以加快速度/避免使用`for`带有`apply`类型函数的循环？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T12:47:31.007

您似乎需要[的](http://en.wikipedia.org/wiki/Prefix_sum)是`r + 1`. 对于我的“数据”，

```
> r <- matrix(rnorm(40,0.05,0.01),5,8)
> r
           [,1]       [,2]       [,3]       [,4]       [,5]       [,6]
[1,] 0.04305611 0.03545166 0.05882694 0.03910892 0.04796011 0.05631498
[2,] 0.05623084 0.03747785 0.04809927 0.05644677 0.06747468 0.05405979
[3,] 0.04389437 0.05353846 0.04600529 0.04363427 0.05399780 0.04260270
[4,] 0.04644610 0.05471288 0.06279882 0.02195831 0.05971777 0.05024525
[5,] 0.04426485 0.03294009 0.04325665 0.06006569 0.07416615 0.06585176
           [,7]       [,8]
[1,] 0.02724187 0.03515898
[2,] 0.04285792 0.04220358
[3,] 0.04302487 0.06662048
[4,] 0.04948629 0.04256084
[5,] 0.04659738 0.03395883 
```

这是如何得到它：

```
> t(apply(r+1, 1, cumprod))
         [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]
[1,] 1.043056 1.080034 1.143569 1.188293 1.245284 1.315412 1.351246 1.398755
[2,] 1.056231 1.095816 1.148524 1.213355 1.295225 1.365245 1.423756 1.483844
[3,] 1.043894 1.099783 1.150379 1.200575 1.265403 1.319313 1.376076 1.467751
[4,] 1.046446 1.103700 1.173011 1.198769 1.270356 1.334186 1.400210 1.459804
[5,] 1.044265 1.078663 1.125322 1.192916 1.281390 1.365771 1.429413 1.477954 
```

（不要问我为什么`t()`这里有必要。）

然后，一切都是与初始大小相乘的问题：

```
> t(apply(r+1, 1, cumprod)) * 100
         [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]
[1,] 104.3056 108.0034 114.3569 118.8293 124.5284 131.5412 135.1246 139.8755
[2,] 105.6231 109.5816 114.8524 121.3355 129.5225 136.5245 142.3756 148.3844
[3,] 104.3894 109.9783 115.0379 120.0575 126.5403 131.9313 137.6076 146.7751
[4,] 104.6446 110.3700 117.3011 119.8769 127.0356 133.4186 140.0210 145.9804
[5,] 104.4265 107.8663 112.5322 119.2916 128.1390 136.5771 142.9413 147.7954 
```

哦，别忘了为初始大小添加一列：

```
> cbind(1, t(apply(r+1, 1, cumprod))) * 100
     [,1]     [,2]     [,3]     [,4]     [,5]     [,6]     [,7]     [,8]
[1,]  100 104.3056 108.0034 114.3569 118.8293 124.5284 131.5412 135.1246
[2,]  100 105.6231 109.5816 114.8524 121.3355 129.5225 136.5245 142.3756
[3,]  100 104.3894 109.9783 115.0379 120.0575 126.5403 131.9313 137.6076
[4,]  100 104.6446 110.3700 117.3011 119.8769 127.0356 133.4186 140.0210
[5,]  100 104.4265 107.8663 112.5322 119.2916 128.1390 136.5771 142.9413
         [,9]
[1,] 139.8755
[2,] 148.3844
[3,] 146.7751
[4,] 145.9804
[5,] 147.7954 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:37:20.600

您的任务取决于先前的值。这似乎是递归函数的工作。但我不确定是否会有任何加速。这是一个版本，它本身不使用递归函数，而是独立计算值（使用递归原理）：

```
my_fun <- function(x, rr, idx) {
    i <- 1
    xx <- rep(x, nrow(rr))
    while( i <= idx) {
        xx <- xx * (1 + rr[, i])
        i <- i + 1
    }
    xx
}
apply(as.matrix(0:ncol(r), ncol=1), 1, function(ix) my_fun(100, r, ix)) 
```

如果您的列太多，此函数可用于并行计算所有列。我没有看到使用此功能的其他优势。但也许最好通过基准测试来验证。

# python - 如何为文件中的特定变量禁用 pylint“未定义变量”错误？

> ID：15088938
> 
> 赞同：19
> 
> 时间：2013-02-26T12:17:47.103
> 
> 标签：python, pylint

我在 C# 应用程序中托管 IronPython，并将主机的 API 注入全局范围。

我刚刚开始喜欢`syntastic`用 vim`pylint`来检查我的脚本。但是我`[E0602, method_name] Undefined variable 'variable_name'`对注入变量的所有错误消息感到恼火。

我知道使用`# pylint: disable=E0602`来禁用此错误消息，但我不希望仅针对某些特定变量名削弱真正有用的功能。

你如何处理这个问题？

目前，我在脚本的顶部执行此操作：

```
try:
    host_object = getattr(__builtins__, 'host_object')
except AttributeError:
    pass # oops, run this script inside the host application!! 
```

我真正想做的是：

```
# pylint: declare=host_object, other_stuff 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T13:49:46.667

您可以将变量添加到 'additional-builtins' 选项，以便 pylint 将它们视为已定义。

这必须在 rc 文件中完成，不能在代码中内联完成。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-04T16:41:33.027

在代码中禁用 E0602：

```
# make pylint think that it knows about 'injected_var' variable
injected_var = injected_var  # pylint:disable=invalid-name,used-before-assignment 
```

显然，这需要每个模块执行一次，`injected_var`此行之后的所有出现对于 pylint 都是合法的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-01T14:12:05.537

实际上，有一种方法可以通过在[dummy-variables-rgx](https://docs.pylint.org/en/1.6.0/features.html#id17)（或旧版本 中的[dummy](http://pylint.pycqa.org/en/latest/faq.html#i-have-a-callback-function-where-i-have-no-control-over-received-arguments-how-do-i-avoid-getting-unused-argument-warnings) -variables ）中指定**特定的未定义变量来禁用 pylint 争论。**默认包含并在执行时被用户指定的值覆盖：`pylint``dummy-variables``_,dummy``pylint`

```
$ pylint --dummy-variables-rgx='(_+[a-zA-Z0-9]*?$)|dummy|host_object' 
```

或对于旧`pylint`版本：

```
$ pylint --dummy-variables='_,dummy,host_object' 
```

或者如果是[VSCode](https://code.visualstudio.com/)`pylint`的配置（可以通过按+打开）：`User/Workspace Settings``Ctrl``,`

```
"python.linting.pylintArgs": [
    "--dummy-variables-rgx='(_+[a-zA-Z0-9]*?$)|dummy|qdict'"
] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-31T14:40:50.840

有[`good-names=host_object,other_stuff`](http://docs.pylint.org/features.html#basic-checker)或[`additional-builtins=...`](http://docs.pylint.org/features.html#variables-checker)为此，或者对于一些高级的东西，你可以通过修改正则表达式[`variable-rgx`](http://docs.pylint.org/features.html#basic-checker)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T12:42:16.573

不适用于变量，但您可以为具有 var 的行禁用它。参见[参考文献](https://stackoverflow.com/questions/14233867/pylint-ignore-specific-names)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-16T19:31:05.923

我刚遇到这个问题，我只是在 pylintrc 文件中添加了禁用选项。就我而言，我正在编写一个小脚本，并且一些 pylint 检查有点矫枉过正。所以我禁用了未定义的变量错误

```
E: 32,40: Undefined variable 'description' (undefined-variable) 
```

经过

禁用=E0602，E0603

您可以在以下位置找到代码和含义： http: [//pylint-messages.wikidot.com/all-codes](http://pylint-messages.wikidot.com/all-codes)

我的 pylintrc 文件：

```
# The format of this file isn't really documented; just use --generate-rcfile
[MASTER]
# Add <file or directory> to the black list. It should be a base name, not a
# path. You may set this option multiple times.
#
# dirname, then we'll need to expand the ignore features in pylint :/
ignore=.git,tools, etc
[MESSAGES CONTROL]
# NOTE(gus): This is a long list.  A number of these are important and
# should be re-enabled once the offending code is fixed (or marked
# with a local disable)
disable=E0602, E0603,
# "F" Fatal errors that prevent further processing
 import-error,
# "I" Informational noise
 locally-disabled,
# "E" Error for important programming issues (likely bugs)
 access-member-before-definition,
 no-member,
 no-method-argument,
 no-self-argument,
# "W" Warnings for stylistic problems or minor programming issues
 abstract-method,
 arguments-differ,
 attribute-defined-outside-init,
 bad-builtin,
 bad-indentation,
 broad-except,
 dangerous-default-value,
 deprecated-lambda,
 deprecated-module,
 duplicate-key,
 expression-not-assigned,
 fixme,
 global-statement,
 no-init,
 non-parent-init-called,
 not-callable,
 protected-access,
 redefined-builtin,
 redefined-outer-name,
 signature-differs,
 star-args,
 super-init-not-called,
 super-on-old-class,
 unpacking-non-sequence,
 unused-argument,
 unused-import,
# "C" Coding convention violations
 invalid-name,
 missing-docstring,
 superfluous-parens,
 bad-continuation,
 Undefined variable,
# "R" Refactor recommendations
 abstract-class-little-used,
 abstract-class-not-used,
 duplicate-code,
 interface-not-implemented,
 no-self-use,
 too-few-public-methods,
 too-many-ancestors,
 too-many-arguments,
 too-many-branches,
 too-many-instance-attributes,
 too-many-lines,
 too-many-locals,
 too-many-public-methods,
 too-many-return-statements,
 too-many-statements

[BASIC]
# Variable names can be 1 to 31 characters long, with lowercase and underscores
variable-rgx=[a-z_][a-z0-9_]{0,30}$

# Argument names can be 2 to 31 characters long, with lowercase and underscores
argument-rgx=[a-z_][a-z0-9_]{1,30}$

# Method names should be at least 3 characters long
# and be lowecased with underscores
method-rgx=([a-z_][a-z0-9_]{2,}|setUp|tearDown)$

# Module names matching vulcan-* are ok (files in bin/)
# module-rgx=(([a-z_][a-z0-9_]*)|([A-Z][a-zA-Z0-9]+)|(vulcan-[a-z0-9_-]+))$
module-rgx=(([a-z_][a-z0-9_]*)|([A-Z][a-zA-Z0-9]+)|([a-z0-9_-]+))$

# Don't require docstrings on tests.
no-docstring-rgx=((__.*__)|([tT]est.*)|setUp|tearDown)$

[FORMAT]
# Maximum number of characters on a single line.
max-line-length=79

[VARIABLES]
# List of additional names supposed to be defined in builtins. Remember that
# you should avoid to define new builtins when possible.
# _ is used by our localization
additional-builtins=_

[CLASSES]
# List of interface methods to ignore, separated by a comma.
ignore-iface-methods=

[IMPORTS]
# Deprecated modules which should not be used, separated by a comma
deprecated-modules=
# should use openstack.common.jsonutils
 json

[TYPECHECK]
# List of module names for which member attributes should not be checked
ignored-modules=six.moves,_MovedItems

[REPORTS]
# Tells whether to display a full report or only the messages
reports=no 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-30T15:54:47.570

把它贴在行尾，你就完成了：

```
# noqa 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-24T22:37:00.757

并`dummy-variables-rgx`没有为我做伎俩。我遇到了仅在集群上可用的包问题，而不是在本地开发时。我不得不使用“附加内置”设置，并将其添加到我的 .pylintrc 中。

```
additional-builtins: mssparkutils 
```

# javascript - 在 javascript 中，我收到错误 ASP.NET Ajax 客户端框架无法加载

> ID：15088942
> 
> 赞同：0
> 
> 时间：2013-02-26T12:18:08.397
> 
> 标签：javascript

我在 JavaScript 中遇到错误

```
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:27:10.407

我认为 typeof 被用作

```
if(typeof Sys== "undefined") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T02:31:12.643

javascript中的三等号，`===`是为了测试相同的类型或对象。

改为双等号`==`。这将测试值而不是对象相等性。

这些问题可能重复：

*   [如何确定两个 JavaScript 对象的相等性？](https://stackoverflow.com/questions/201183/how-do-you-determine-equality-for-two-javascript-objects)
*   [JavaScript 中的对象比较](https://stackoverflow.com/questions/1068834/object-comparison-in-javascript)
*   [这个网站](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/)也很好解释`===`。

# iphone - 将图像添加到 XCode 项目而不添加文件

> ID：15088946
> 
> 赞同：0
> 
> 时间：2013-02-26T12:18:15.950
> 
> 标签：iphone, objective-c, xcode

由于我的项目设置，我希望能够在不实际添加文件的情​​况下将图像添加到我的项目中。如果你愿意的话，有点像标题搜索路径。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:22:26.660

仅添加引用，确保当您将图像拖放到项目三或使用“将文件添加到项目”菜单选项时复选框复制文件到项目目录未激活。将会有一个包含添加文件选项的对话框，其中之一是复制文件或只是将引用添加到您的项目中。

# mysql - 如何在我的 SQL 语句中创建 Order By

> ID：15088947
> 
> 赞同：0
> 
> 时间：2013-02-26T12:18:15.900
> 
> 标签：mysql, sql-order-by

如何在我的 sql 语句中创建 Order By？我已经尝试过这样的声明，但这不起作用。每次我运行它都会崩溃。是因为我的 $_GET['email'] 吗？我究竟做错了什么？

```
$results = $this->EE->db->query(
"SELECT ct.*, t.*, em.*, cd.*
FROM transactions as t
Inner JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
Inner JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
inner join exp_members as em on (t.cardid-10000000 = em.member_id) 
WHERE ct.title = '".$_GET['email']."'ORDER BY t.created DESC"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:20:59.640

应该是：

```
$results = $this->EE->db->query(
"SELECT ct.*, t.*, em.*, cd.*
FROM transactions as t
Inner JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
Inner JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
inner join exp_members as em on (t.cardid-10000000 = em.member_id) 
WHERE ct.title = '".$_GET['email']."' ORDER BY t.created DESC"); 
```

`$_GET['email']`和之间缺少空格`ORDER BY` 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:22:05.867

如评论中所示，您之前错过了一个空格`'ORDER BY'`。

从

```
WHERE ct.title = '".$_GET['email']."'ORDER BY t.created DESC");
                                   ^^^ 
```

到

```
WHERE ct.title = '".$_GET['email']." 'ORDER BY t.created DESC");
                                   ^^^^ 
```

全部一起：

```
$results = $this->EE->db->query(
"SELECT ct.*, t.*, em.*, cd.*
FROM transactions as t
Inner JOIN exp_channel_titles as ct on (t.restaurant_id = ct.entry_id)
Inner JOIN exp_channel_data as cd on (ct.entry_id = cd.entry_id)
inner join exp_members as em on (t.cardid-10000000 = em.member_id) 
WHERE ct.title = '".$_GET['email']." 'ORDER BY t.created DESC"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:40:40.503

使用单独的变量以提高可读性。

```
$email  =   $_GET['email'];

$query  =   "SELECT
              ct.*,
              t.*,
              em.*,
              cd.*
            FROM transactions as t
              Inner JOIN exp_channel_titles as ct
                on (t.restaurant_id = ct.entry_id)
              Inner JOIN exp_channel_data as cd
                on (ct.entry_id = cd.entry_id)
              inner join exp_members as em
                on (t.cardid - 10000000 = em.member_id)
            WHERE ct.title = '$email'
            ORDER BY t.created DESC";

$results = $this->EE->db->query($query); 
```

# javascript - 使用 javascript 表情选择元素绘制的正确方法应该看起来像 Skype 中的一个

> ID：15088950
> 
> 赞同：0
> 
> 时间：2013-02-26T12:18:18.663
> 
> 标签：javascript, emoticons

我需要看起来像由表情符号组成的矩形图像的元素，例如垂直方向的 x 表情符号和水平维度的 y 表情符号。

它可以绘制为*表格*或*列表*或一*组段落*，或者它可以是附加用户地图的实际*合成图像*，例如使用 ImageMapper 进行样式设置。

你会建议什么方式？也许你会推荐一个好的课程或例子？

我希望在页面加载时加载表情图像，并在服务器端生成带有元素代码的 html 片段，因为我想启用图标/禁用图标/动态设置菜单中的图标位置。

# java - 更改静态检查按钮java上的选择

> ID：15088951
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:18:18.437
> 
> 标签：java, button, swt

我有一点问题。我正在尝试将字符串与数组进行比较。该数组是在串行线路上接收字符串后建立的。

我使用了几个 void 并在它们之间传递字符串和数组，所以每件事都必须是静态的。

```
// button is set
public static  Button btnRS_1;
// inside Create contense:
            btnRS_1 = new Button(shlSioMiniTest, SWT.TOGGLE);
        btnRS_1.setEnabled(false);
        btnRS_1.setSelection(false);;
        btnRS_1.setFont(SWTResourceManager.getFont("Tahoma", 10, SWT.NORMAL));
        btnRS_1.setBounds(29, 130, 76, 16);
        btnRS_1.setText("RS232 0");

        if (RStest[0].equals("1")){
          btnRS_1.setSelection(true);
           } 
```

我得到错误。其中也有很多。如果我注释掉该`setSelection`位并打印出一个字符串以查看它是否有效。

```
Exception in thread "Thread-9" org.eclipse.swt.SWTException: Invalid thread access
    at org.eclipse.swt.SWT.error(SWT.java:4361)
    at org.eclipse.swt.SWT.error(SWT.java:4276)
    at org.eclipse.swt.SWT.error(SWT.java:4247)
    at org.eclipse.swt.widgets.Widget.error(Widget.java:468)
    at org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:359)
    at org.eclipse.swt.widgets.Button.setSelection(Button.java:1047)
    at SioTest.Sio_test.fillChecks(Sio_test.java:604)
    at SioTest.Sio_test.testParameters(Sio_test.java:592)
    at SioTest.Sio_test$ProtocolImpl.onMessage(Sio_test.java:968)
    at SioTest.Sio_test$ProtocolImpl.onReceive(Sio_test.java:946)
    at SioTest.Sio_test$SerialReader.run(Sio_test.java:882)
    at java.lang.Thread.run(Unknown Source) 
```

有人可以建议我该怎么做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T12:26:53.917

阅读以下链接：[无效的访问异常](http://wiki.eclipse.org/FAQ_Why_do_I_get_an_invalid_thread_access_exception?)

看起来你从 SWT Display 线程之外调用了一些东西

# jquery - 如何在除标头以外的ajax DELETE请求中传递数据

> ID：15088955
> 
> 赞同：63
> 
> 时间：2013-02-26T12:18:33.437
> 
> 标签：jquery, ajax

下面是我的 Ajax 请求`DELETE`请求：

```
deleteRequest: function (url, Id, bolDeleteReq, callback, errorCallback) {
    $.ajax({
        url: urlCall,
        type: 'DELETE',
        headers: {"Id": Id, "bolDeleteReq" : bolDeleteReq},
        success: callback || $.noop,
        error: errorCallback || $.noop
    });
} 
```

除了`headers`在

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-02-26T12:36:09.270

阅读此错误问题：[http ://bugs.jquery.com/ticket/11586](http://bugs.jquery.com/ticket/11586)

引用[*RFC 2616 字段*](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.7)

> 该`DELETE`方法请求源服务器删除**由 Request-URI 标识**的资源。

所以你需要在URI中传递数据

```
$.ajax({
    url: urlCall + '?' + $.param({"Id": Id, "bolDeleteReq" : bolDeleteReq}),
    type: 'DELETE',
    success: callback || $.noop,
    error: errorCallback || $.noop
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-26T17:46:00.130

我能够成功通过**ajax 方法**中的数据属性。这是我的代码

```
$.ajax({
     url: "/api/Gigs/Cancel",
     type: "DELETE",
     data: {
             "GigId": link.attr('data-gig-id')
           }

  }) 
```

link.attr方法***只***返回 *'data-gig-id'*的值。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2013-02-26T12:20:17.113

```
deleteRequest: function (url, Id, bolDeleteReq, callback, errorCallback) {
    $.ajax({
        url: urlCall,
        type: 'DELETE',
        data: {"Id": Id, "bolDeleteReq" : bolDeleteReq},
        success: callback || $.noop,
        error: errorCallback || $.noop
    });
} 
```

注意：使用`headers`是在 JQuery 1.5 中引入的：

> 与请求一起发送的附加标头键/值对的映射。此设置在调用 beforeSend 函数之前设置；因此，headers 设置中的任何值都可以在 beforeSend 函数中被覆盖。

# html - IE 中显示的条件注释

> ID：15088959
> 
> 赞同：3
> 
> 时间：2013-02-26T12:18:45.067
> 
> 标签：html, internet-explorer, html5shiv

只是一个关于 IE 中条件 html 注释的快速（我希望）问题......

我正在使用 Google shiv/shim 来允许 HTML5 元素在 IE8 和更少的版本中正确呈现，并且头部代码看起来像这样......

```
<head>
    <meta charset="utf-8" />
    <title>Rock & Son Restaurant in Manchester</title>
    <link href="/rock-and-son/css/reset.css" type="text/css" rel="stylesheet">
    <link href="/rock-and-son/css/screen.css" type="text/css" rel="stylesheet">
    <!--[if lt IE9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head> 
```

太好了，我想，当我加载 IE 7/8 并且它工作时！但是随后有条件的评论在我的浏览器顶部（在所有 IE 版本中，包括 9）后面显得很丑陋。看截图：

![在此处输入图像描述](../Images/49771b9cfda3e12b18536d6f9a3a3e4c.png)

有人知道为什么是这样吗？我在我的智慧尽头试图弄清楚它！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T14:02:59.440

我已经解决了这个问题，看来您需要在 IE 和 9 之间留一个空格 ..

```
<!--[if lt IE 9]--> 
```

# ios - 当计时器用完 iOS Xcode 时，我无法将新 URL 从另一个类加载到 UIWebView

> ID：15088960
> 
> 赞同：0
> 
> 时间：2013-02-26T12:18:48.113
> 
> 标签：ios, xcode, uiwebview, loading

我有一个类`LiveView`，我声明了一个 UIWebView `myWebView`。当我在同一个班级时，它加载得很好，只需单击一个按钮，我就可以将 URL 更改为不同的 URL，没问题。我有另一个类`LoopCam`，在文本字段中，用户可以输入几秒钟，然后 URL 应该更改为另一个。我已经正确创建了循环，因此在 X 秒后应该加载不同的 URL。我已经使用了 NSLog 并且它可以正常工作，因此在 X 秒后，NSLog 会将新 URL 正确打印到控制台但如果使用： 为了加载新 URL（example.com），它不会加载。`[_liveView.myWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"[http://example.com](http://example.com)"]]];`

我确实在 LoopCam 类中创建了一个类的实例，如下所示：`LiveView * _liveView;`并导入了标头`#import "LiveView.h"`，我已经将其合成`LoopCam.m`如下：`@synthesize liveView = _liveView;` 有没有一种方法可以在 UIWebView 中从另一个类加载新 URL 而无需按下按钮? PS。即使按下按钮，新的 URL 也不会加载。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:32:05.600

“我确实在 LoopCam 类中创建了一个类的实例，如下所示：LiveView * _liveView;”

这不会创建实例，而只会创建指向一个的属性。您需要获取对您已有的 LiveView 实例的引用。你如何做到这一点取决于你如何从 LiveView 到 LoopCam。例如，如果您通过推送从 LiveView 访问 LoopCam，那么您将在推送之前将属性 _liveView 设置为 self。使用 push segue，您将像这样实现 prepareForSegue:sender:：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   if ([segue.identifier isEqualToString:@"GoToLoop"]){
       LoopCam *loopCam = (LoopCam *)segue.destinationViewController;
       loopCam._liveView = self;
    }
} 
```

您需要在 IB 中设置 segue 的标识符（我在这里称之为 GoToLoop）。

# google-app-engine - webapp2 删除 cookie 时出错

> ID：15088963
> 
> 赞同：2
> 
> 时间：2013-02-26T12:18:53.587
> 
> 标签：google-app-engine, python-2.7, webapp2

我在 GAE 1.7.5 上使用 webapp2 和 python 2.7。我像这样设置cookie：

```
self.response.set_cookie('clientID', self.request.get('clientID'), max_age=constants.day_timeout) 
```

但是当我尝试像这样删除它们时：

```
self.response.unset_cookie('clientID') 
```

或喜欢：

```
self.response.delete_cookie('clientID') 
```

我明白了`exception removing client cookies`

不知道该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T08:35:38.693

我注意到从请求对象获取值时，它们是 unicode 格式。如果您的 clientID 是 unicode，则必须将其转换为 string ：

```
value = str(self.request.get('clientID')) 
self.response.set_cookie(key = 'clientID', 
                         value=value 
                         ) 
```

[这是关于设置 cookie](http://webapp-improved.appspot.com/guide/response.html#setting-cookies)的 webapp2 文档。

# javascript - 在EXTjs 4中动态添加按钮单击事件

> ID：15088964
> 
> 赞同：1
> 
> 时间：2013-02-26T12:18:57.333
> 
> 标签：javascript, extjs, extjs4, extjs-mvc

我的网格布局中有一个操作列图标，单击图标我打开了一个窗口表单面板。单击该图标，我正在构建一个动态字段集。Fieldset 包括按钮和图像。

```
//Below is the code
for (var j = 0; j < productPictures.length; j++) {
    var values = productPictures[j].value;
    var idPic = productPictures[j].idProductPicture;
    alert(idPic);
    fieldset.add({
        xtype: 'container',
        layout: 'hbox',
        items: [{
            xtype: 'box',
            autoEl: {
                tag: 'img',
                src: '/files/product/' + idProduct + '/picture/100x75/' + values,
                height: '50px',
                width: '50px'
            }
        }, {
            xtype: 'button',
            name: 'remove' + idPic,
            width: 200,
            text: 'Remove',
            handler: function () {
                alert(idPic);
                Ext.Ajax.request({
                    url: '/admin/productpicture?id=' + idPic + '&memberId=' + idMember + '&idProduct=' + idProduct,
                    method: 'DELETE',
                    success: function (response) {
                        Ext.Msg.alert('Status', 'Image Deleted succesfullly.');
                    },
                    failure: function () {
                        Ext.Msg.alert('Status', 'There is an error.');
                    }
                })
            }

        }]
    })

} 
```

我得到的问题是我希望按钮的处理程序接受每个循环附带的动态值。但是每个按钮的点击它给出相同的值（循环的第一个值）。那么如何使它动态，以便我可以为每个图像动态传递参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:28:20.060

您遇到了范围界定问题。您需要做的是将变量保存在按钮配置中。

你可以这样做：

```
{
    xtype: 'button',
    name: 'remove' + idPic,
    idPic: idPic,
    width: 200,
    text: 'Remove',
    handler: function (button) {
        alert(button.idPic);
        //the rest...
    }
} 
```

# javascript - 使用 jQuery .load() 加载的页面不响应其他 JavaScript

> ID：15088965
> 
> 赞同：0
> 
> 时间：2013-02-26T12:19:00.567
> 
> 标签：javascript, jquery, ajax, load

我将相同的页面动态加载到 div 中`.load()`。每个页面的 div 被加载到主页上的两个窗格中。有用。我想要做的是让 JavaScript 处理子页面中包含的链接。子页面上只有一个列表。

链接必须是相对于根目录的，但是以同样的方式链接 JS 文件是行不通的。无论我说 .js 文件位于何处，都不会发生任何事情。只是最初的 .load() 函数。

有没有我添加到代码中的东西，或者找到它在哪里寻找 .js 文件的方法？

这是与`.load()`

```
$(document).ready(function() {
    //#left and #right are divs loading content from .content/.description
    $('#left').load('demos/websites.html .content');
    $('#right').load('demos/websites.html .description');
    $('nav#subnav li a').click(function() {
        var page = $(this).attr('href');
        $('#left').load(page + ' .content');
        $('#right').load(page + ' .description');
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:22:38.167

你最好使用事件委托。由于`.load()`调用是异步的，它们在未收到响应时立即返回，并且`.click()`绑定仅在执行时考虑 DOM 中存在的元素。

```
$(document).on('click', 'nav#subnav li a', function() {
  ...
}); 
```

从 jQuery 1.7 开始，`.on()`推荐使用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:25:01.460

看起来是时间问题。使用 load 的回调函数注册点击事件。

```
 $('#left').load('demos/websites.html .content',function() {
       console.log('Left pane loaded');
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:38:46.203

当您使用`.load`带有后缀选择器表达式的函数时`.js`，您尝试加载的页面中包含的文件不会被执行，就好像它们根本不包含一样。

那么你有两个选择：

1.  使用`.load`没有后缀选择器表达式的函数
2.  或者`.js`在邮件页面中包含文件，然后像这样加载内容后执行所需的功能

    $('#left').load('demos/websites.html .content',function() { //在这里执行你的js函数。});

来自 jQuery 网站：

脚本执行

当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html()。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。两种情况的示例如下所示：

在这里，作为文档的一部分加载到#a 中的任何 JavaScript 都将成功执行。

```
1\. $('#a').load('article.html'); 
```

但是，在以下情况下，正在加载到 #b 的文档中的脚本块被剥离并且不被执行：

```
1\. $('#b').load('article.html #target'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T12:33:53.913

这是您的完整代码，其中包含 Alexander 的建议。

```
 $(document).ready(function() {
  //#left and #right are divs loading content from .content/.description
  $('#left').load('demos/websites.html .content');
  $('#right').load('demos/websites.html .description');

  $(document).on('click', 'nav#subnav li a', function() {
    var page = $(this).attr('href');

    $('#left').load(page+' .content');
    $('#right').load(page+' .description');
    return false;

  });
}); 
```

但请确保您使用的是 jquery 1.7 或更高版本。

代码不起作用的原因 - 当您将点击处理程序绑定到链接的语句时，可能当时链接可能不会在 DOM 本身中加载。

# string - 查找一个字符串是否是 SML NJ 中另一个字符串的子字符串

> ID：15088975
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:19:19.060
> 
> 标签：string, search, sml

特别关注 SML 程序中的字符串操作，因为您将在任务中处理字符串。你的任务是编写一个名为出现的函数，它将接收 2 个字符串并决定第一个字符串是否作为子字符串出现在第二个字符串中。你的程序只需要打印决定；它不需要显示它是在哪里找到的。所以如果我们调用出现（“abc”，“dsabcbc”）；它将打印类似“abc”的内容出现在“dsabcbc”中。但是如果我们调用出现（“abc”，“dsabbc”）；它会打印出“dsabbc”中没有出现“abc”之类的内容</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:57:26.047

[这是标准 ML 基础库](http://www.standardml.org/Basis/string.html#SIG%3aSTRING.isSubstring%3aVAL) 中的内置函数`String.isSubstring`。

# c++ - 读取可执行文件的节数失败

> ID：15088977
> 
> 赞同：0
> 
> 时间：2013-02-26T12:19:20.823
> 
> 标签：c++, windows, portable-executable

不知何故，以下代码输出“部分数：57344”，这显然是不正确的。谁能给我一个提示我做错了什么？

```
#include <windows.h>
#include <iostream>
#include <vector>
#include <sstream>
#include <fstream>
#include <iterator>
#include <algorithm>

int main() {
std::string file_path = "C:\\foo.exe";
if(!file_path.size()) {
    cout << "No file was selected" << endl;
    return 1;
}
std::ifstream input( file_path.c_str(), std::ios::binary );
std::vector<unsigned char> buffer((
    std::istream_iterator<unsigned char>(input)), 
    (std::istream_iterator<unsigned char>()));

if(!buffer.size()) {
    cout << "Error reading file" << endl;
    return 1;
}
char * BinFile = (char*)&buffer[0];
IMAGE_DOS_HEADER* DOSHeader = (IMAGE_DOS_HEADER*)BinFile;
IMAGE_NT_HEADERS* NTHeader = (IMAGE_NT_HEADERS*)(BinFile + DOSHeader->e_lfanew);
cout << "Number of sections: " << NTHeader->FileHeader.NumberOfSections << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:25:48.503

`istream_iterator``operator<<`不[适合二进制数据的](https://stackoverflow.com/questions/4151840/why-cant-i-read-fstreams-binary-data-with-operator)用途

改为使用`istream::read`。

您可以通过搜索到最后，然后调用来获取文件大小`tellg`。相应地调整矢量大小并直接读取它。

# php - PHP 和 MySQL - 如何避免源代码中的密码？

> ID：15088979
> 
> 赞同：116
> 
> 时间：2013-02-26T12:19:28.763
> 
> 标签：php, mysql, password-protection

我有一个在[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库中存储数据的小型 PHP 应用程序。目前用户名/密码在 PHP 代码中是硬编码的。例如，我不太喜欢这种情况，因为代码也可以在存储库中使用。

我最好的想法是将数据从代码移动到配置文件（从存储库中排除），并以某种方式对其进行编码，因此不能直接读取（混淆）。有没有更好更容易使用的方法来解决这个问题？

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) { 
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('mydb'); 
```

范围：我想建立一个强大且易于使用的解决方案。我想要合理的安全性，但我不是在这里处理高度机密的数据。

备注：不再推荐使用`mysql_connect`函数，见 Stack Overflow 问题*[为什么我不应该](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)*[在 PHP 中使用 mysql_ 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)*。我本可以更改代码示例，但由于一些评论提到了这个，我没有。但是，问题的原始性质仍然有效。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-26T12:22:21.677

正如您所说，最简单的方法是使用配置文件。

许多框架都使用它（[Zend](http://en.wikipedia.org/wiki/Zend_Framework)、[CakePHP](http://en.wikipedia.org/wiki/CakePHP)、[Kohana](http://en.wikipedia.org/wiki/Kohana)等），它是最常见的做事方式（即使在非 PHP 环境中，例如带有`web.config`文件的 ASP.NET）。这使您还可以通过仅复制站点的文件来将配置值从一个环境复制到另一个环境，这比依赖于服务器设置环境变量（可能很快丢失和忘记）有好处。

您不必担心密码的混淆，因为它不是一个世界可访问的文件，它当然不应该是网络可访问的。我的意思是，您要么 a) 告诉您的 Web 服务器不要提供您的配置文件（[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)已经使用`web.config`文件执行此操作并提供 HTTP 404.8 状态而不是内容）或 b) 将其移到您的 Web 服务之外目录。如果有人可以看到您的配置文件，那比在您的源代码中拥有它更糟糕。

拥有配置文件的基本（空/默认）版本也是一个好主意，并将其按环境分开，这样您就可以为生产、开发和测试平台提供不同的配置文件。

环境变量是区分这些环境的最常用方法，类似于以下代码：

```
// Check if it's been set by the web server
if (!empty($_ENV['ENVIRONMENT'])) {
    // Copy from web server to PHP constant
    define('ENVIRONMENT', $_ENV['ENVIRONMENT']);
}

if (!defined('ENVIRONMENT')) {
    // Default to development
    define('ENVIRONMENT', 'development');
}

// Load in default configuration values
require_once 'config.default.php';

// Load in the overridden configuration file for this environment
require_once 'config.' . ENVIRONMENT . '.php'; 
```

另一种非常常见的方法是使用 XML 配置文件，并且只读取您需要的值（将配置文件的缓存副本存储在内存中）。这可以很容易地限制为仅加载某些值，而不是允许任意包含 PHP 文件，并且在我看来总体上是一个更好的解决方案，但上述内容应该让您朝着正确的方向开始。

您可能希望您的[VCS](http://en.wikipedia.org/wiki/Revision_control)忽略该文件。另一方面，您可能希望文件的骨架或具有合理默认值的骨架（后者当然不适用于登录数据）进行版本控制。处理这个问题的一种常见方法是拥有一个签入的模板配置文件，安装过程将该文件复制到实际配置文件的位置，在那里进行定制。这可以是手动或自动化的过程。

*[（虽然与主要问题有些无关，但为您的环境引入一个常量可以让您做一些其他很酷的事情，例如推迟到假邮件实现而不是实时[SMTP](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)实现，但当然这也可以通过配置文件完成）]*

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-02-26T12:24:11.997

一个非常好的解决方案，如果您使用的是 Apache，它将信息存储在虚拟主机配置中

```
SetEnv  MYSQL_USER     "xx"
SetEnv  MYSQL_PASSWORD "y2wrg435yw8" 
```

可以轻松获取数据以`$_ENV[]`用于代码中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-26T12:33:37.623

正如其他人所提到的，将它放在源代码控制之外的单独配置文件中（显然这将在源代码控制下的代码中提到）。

*将文件命名为config.php*而不是*config.ini*也是一个好主意，以防目录被意外暴露，这意味着文件不会被下载，而是什么也不返回。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-26T15:44:24.323

如果您觉得[12factor](http://www.12factor.net)方式很有价值，他们建议将配置存储在环境中。

这具有额外的优势，即允许您在测试时或在非生产环境中编写*完全相同的代码。*如果您想（或需要）更改数据库或其他任何内容，则无需修改代码 - 您只需更改环境变量即可。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T12:21:32.790

我要做的是仅将示例配置文件存储在存储库中，例如 config.php.dist 并且不要将实际的 config.php 置于版本控制之下。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-26T12:25:17.263

将密码从代码移动到配置文件是个好主意，这样密码就不会出现在存储库中。在配置文件中加密它的想法是有问题的，因为拥有配置文件 + 解密它的 PHP 代码的人总是可以运行代码并获得明文密码。可能最好将配置文件中的密码保存为纯文本，并考虑如何保护配置文件免受未经授权的访问。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-26T12:26:17.047

好问题。您可以将最敏感的部分（例如密钥/密码）作为环境变量移出，但这只会将问题推迟到您的服务器配置（大概也在存储库中）。

您还可以尝试避免对数据库等内容使用密码，方法是减少密码并将其保护在防火墙后面。这些都不是完美的解决方案，但它们是我所知道的方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-26T12:25:38.767

您始终可以使用函数*[parse_ini_file](http://php.net/manual/en/function.parse-ini-file.php)*创建配置 ini 文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-26T12:28:54.480

我在这里看不到所有这些问题。如果您正在共享存储库，您可能不想硬编码密码和配置。您应该改为提供默认值：

```
host: localhost
user: root
pass: root
name: db 
```

如果您真的想要，您可以使用和解析`.ini`文件，但与源代码中设置的数组相比，它可能非常慢，并且对我来说并没有那么大的意义。

请记住：您唯一可以信任的就是您的源代码，如果他们能得到它，那么无论如何您都完蛋了。

# ios - 如何为 iOS telnet 客户端创建视图？

> ID：15088982
> 
> 赞同：0
> 
> 时间：2013-02-26T12:19:48.363
> 
> 标签：ios, terminal, telnet

我想创建一个 telnet 客户端，它可以在我的网络中主要与一个特殊的温度控制设备一起使用，它提供了一个基于 telnet 的配置菜单。

我之前创建了一些简单的 iOS 应用程序，但从未创建过自定义视图。我想要创建的是一个类似终端的窗口，它可以打印（和换行）文本、滚动，当然还可以处理用户输入，这些输入应该在当前位置输入。

你会建议什么样的方法来创建这种界面？我听说过“核心文本”，这可能是一个选择吗？我应该更好地使用OpenGL吗？是否可以在不重新发明轮子的情况下启用使用这些方法显示的文本的“复制和粘贴”？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:26:31.303

最简单的方法可能是使用 UITextView。它似乎可以满足您的所有需求，并允许在 iOS 6 下使用样式文本。

自己做会很困难，但是是的，我会使用 Core Text。您必须重新发明轮子才能使复制和粘贴工作，但您也许可以利用一些 UIResponder、UIMenuItem 和其他文本系统功能。

# asp.net-mvc - OAuthWebSecurity.IsAuthenticatedWithOAuth - 找不到方法

> ID：15088985
> 
> 赞同：1
> 
> 时间：2013-02-26T12:20:16.710
> 
> 标签：asp.net-mvc, oauth-2.0, security, dotnetopenauth, oauth2client

我正在实现 OAuth2Client 并且当我打电话时

```
var result = OAuthWebSecurity.VerifyAuthentication(); 
```

我的 result.IsSuccessful 等于 false。我已经看到“OAuthWebSecurity.IsAuthenticatedWithOAuth”方法有以下异常：

> “Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.IsAuthenticatedWithOAuth”引发了“System.MissingMethodException”类型的异常“找不到方法：'Void DotNetOpenAuth.AspNet.OpenAuthSecurityManager..ctor(System.Web.HttpContextBase)'。” "在 Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.GetIsAuthenticatedWithOAuthCore(HttpContextBase 上下文)\r\n 在 Microsoft.Web.WebPages.OAuth.OAuthWebSecurity.get_IsAuthenticatedWithOAuth()"

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:40:10.370

看来是因为[这个变化](https://github.com/DotNetOpenAuth/DotNetOpenAuth/commit/a6a77cfd131282a8c3f69e8264eb35c08ac17532#src/DotNetOpenAuth.AspNet/OpenAuthSecurityManager.cs)。我已经[打开了一个问题](https://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/251)来跟踪和解决这个问题。

现在，如果您安装 4.0.4.12182 版本的 DotNetOpenAuth.AspNet，它应该可以解决问题（这是在引入回归之前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:50:15.957

我将采用一种解决方法......在我的场景中，我只有一个 OAuth 客户端，所以如果我将它投射到我的客户端，我可以验证身份验证。

```
var result = ((MyOAuth2Client)OAuthWebSecurity.GetOAuthClientData("my")
.AuthenticationClient).VerifyAuthentication(HttpContext, Request.Url); 
```

# python - jython lambda 函数

> ID：15088988
> 
> 赞同：1
> 
> 时间：2013-02-26T12:20:26.067
> 
> 标签：python, lambda, jython

我可以知道为什么下面的代码没有打印出来`[1,2,3,1,2,3]`。相反，它会引发异常。你能告诉我如何让它工作吗？

```
x = [1,2,3]
print apply(lambda x: x * 2, (x)) 
```

如果我尝试以下操作，它会起作用：

```
test1 = lambda x: x * 2
print test1(x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:11:06.597

这有效

```
x = [1,2,3]

print apply(lambda x: x * 2, [x]) 
```

但是，可能值得注意的`apply`是，自 Python 2.3 以来已弃用

[http://docs.python.org/2/library/functions.html#apply](http://docs.python.org/2/library/functions.html#apply)

`Deprecated since version 2.3: Use function(*args, **keywords) instead of apply(function, args, keywords). (see Unpacking Argument Lists)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T11:04:30.210

`apply`将采用它的第二个参数（应该是一个元组/列表）并将这个元组的每个元素作为位置参数传递给您`apply`作为第一个参数传递给的对象。

这意味着如果`x = [1,2,3]`你打电话

```
apply(lambda x: x * 2, (x)) 
```

`apply`将使用参数`1`、`2`和调用 lambda 函数`3`，这将失败，因为 lambda 函数只接受一个参数。

* * *

要让它工作，你应该`x`进入一个元组或一个列表：

```
print apply(lambda x: x * 2, [x]) 
```

或者

```
# note the extra ','. (x,) is a tuple; (x) is not.
# this is probably the source of your confusion.
print apply(lambda x: x * 2, (x,)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:38:20.200

也许我不明白你的问题，但如果你只需要“乘”列表，那么只需将它相乘：

```
xx = [1,2,3]
print(xx * 2) 
```

# c# - C# - 未为类型“System.Int64”定义二元运算符 Equal

> ID：15088990
> 
> 赞同：3
> 
> 时间：2013-02-26T12:20:32.523
> 
> 标签：c#, .net, parsing

我收到了这个错误，我对导致它的原因非常有信心，但不太确定如何解决它。

我正在使用`entity framework code first`并且我在我的一个实体中有一个外键，我故意将其设置为`long?`：

```
public long? ClientId { get; set; }
public virtual Client Client { get; set; } 
```

然后我使用我创建的数据库中的数据来填充 a `DataGridView`，问题就来了。我正在通过元素使用自定义搜索/过滤，`dgv`并且继承了此自定义过滤的代码。到目前为止它工作得很好，但是当我尝试过滤时，`ClientID`我得到了帖子名称的错误。

我开始调试并看到了这个：

```
if (property.PropertyType == typeof(string))
                        {//some code
else if (property.PropertyType == typeof(bool))
                        {//other code
else if(rule.Data.Equals("1") || rule.Data.ToLower().Equals("true"))
                            {//again some code
else if (property.PropertyType == typeof(Int32))
                        {//some code
... 
```

而且因为我的值是类型`long?`，所以我没有进入下面的条件，所以我的代码输入了默认条件，即：

```
else
   {
       long value = 0;
       if (long.TryParse(rule.Data, out value))
   {..code 
```

根据调试器，解析返回 true，因为我进入`if`正文，但随后我从上面收到错误，并且 me 属性的类型是`System.Nullable1[System.Int64]`.

我有第二个外键，它使用完全相同的逻辑，一切对他来说都很好。我能看到的唯一区别是，对于工作情况，类型是`long`，对于错误情况，类型是`long?`。

我想保留该类型`long?`，但不知道这种情况是否有任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T08:32:09.460

我知道这是一个老问题，但我遇到过这样的情况，即一代`T?`并没有真正起作用，而是将其改为`Nullable<T>`。即它生成适合`long`但不适合的代码`long?`。

在你的情况下：

```
public Nullable<long> ClientId { get; set; } // change long? to Nullable<long>
public virtual Client Client { get; set; } 
```

这有帮助吗？