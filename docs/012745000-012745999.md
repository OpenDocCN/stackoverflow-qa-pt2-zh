# StackOverflow 问答 12745000-12745999

# javascript - Firefox 附加组件：域声明

> ID：12745000
> 
> 赞同：0
> 
> 时间：2012-10-05T11:10:56.947
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我开发了一个简单的 javascript 注入，效果很好。谁能告诉我如何定义我希望我的 Firefox 插件工作的域？

例如，这不适用于 main.js 中的 www.myexample.com：

```
const self = require("self"),
page_mod = require("page-mod");

exports.main = function() {
    page_mod.PageMod({
        include: "*myexample.com*",
        contentScriptWhen: "ready",
        contentScriptFile: self.data.url("inject.js")
    });
}; 
```

这些行也不起作用：

```
include: "*.myexample.com/*",
include: "*.myexample.com*", 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:29:13.960

这一切都在[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.10/packages/api-utils/match-pattern.html)中：

```
include: "*.example.com", 
```

当您打算只匹配域名时，该`match-pattern`模块会识别，无需在域名后添加通配符。

# javascript - 使用 facebook-javascript-sdk 更改应用请求通知文本

> ID：12745003
> 
> 赞同：2
> 
> 时间：2012-10-05T11:11:02.517
> 
> 标签：javascript, facebook-javascript-sdk

您好，我正在使用以下代码向朋友发送应用请求，但在通知中显示消息，邀请您尝试测试应用。它不显示输入的消息。请帮忙

```
function sendRequestViaMultiFriendSelector() {
    FB.ui({method: 'apprequests',
        title   : 'Test App',
        message : 'Test app message'
    }, requestCallback);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:23:34.300

我在这里看到两个可能的问题。

1.  [文档](https://developers.facebook.com/docs/reference/dialogs/requests/)说最大消息长度为 60 个字符。您的消息可能太长，因此被截断。

2.  文档继续说

    > 邀请（收件人未安装应用程序的请求）不显示此值。

    因此，这意味着如果这是`apprequest`该用户在安装应用程序之前收到的第一个消息，她/他将不会看到该消息，而只会看到开始使用您的应用程序的“邀请”。

使用[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)，您将能够使用过滤器参数“预测”用户是否安装了应用程序。将其设置`app_users`为仅显示已安装的用户 - 在这种情况下，您可以包含（60 个字符限制）消息参数。如果您将过滤器设置为`app_non_users`，您可能希望在标题参数中包含您的消息内容，因为它始终显示。标题参数限制为 50 个字符。

```
FB.ui({method: 'apprequests',
    title   : 'Test App',
    message : 'Test app message',
    filters : ['app_users']
}, requestCallback); 
```

无论您决定采用哪种方式，您都希望为您的邀请/请求提供相对较短的消息/标题。

# c# - 自定义 MSBuild 任务发出警告

> ID：12745010
> 
> 赞同：2
> 
> 时间：2012-10-05T11:11:19.907
> 
> 标签：c#, msbuild

如何使自定义构建任务发出警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:11:19.907

您必须从中派生的任务有一个成员：

```
public Microsoft.Build.Utilities.TaskLoggingHelper Log { get; } 
```

要使您的任务发出消息，请使用它。具体来说：

```
public void LogWarning(string message, params object[] messageArgs)
    Member of Microsoft.Build.Utilities.TaskLoggingHelper 
```

例如：

```
Log.LogWarning("My Warning"); 
```

# bash - Bash，if's，重用变量

> ID：12745020
> 
> 赞同：1
> 
> 时间：2012-10-05T11:11:52.280
> 
> 标签：bash

```
if [[ $line == *"option 1"* ]]
then
     CURRENT_OPTION=1
fi

if [[ $line == *"option 2"* ]]
then
     CURRENT_OPTION=2
fi

if [[ $line =~ "What i want" ]]
then            
    if [[ $CURRENT_OPTION -eq 1 ]]
    then
        MEM1=$(awk '/Used heap/ { gsub(/M/, " "); print $4 }')
    elif [[ $CURRENT_OPTION -eq 2 ]]
    then
        MEM2=$(awk '/Used heap/ { gsub(/M/, " "); print $4 }')
    fi
fi 
```

因为 CURRENT_OPTION 是在 if 中定义的，所以在第三个 if 中检查时其值不正确。我怎样才能把它传递出去呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:15:17.877

只需`CURRENT_OPTION`在顶部声明，例如：

```
 declare -i CURRENT_OPTION=0 
```

`i`将其声明为`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:37:52.537

在您的所有`if`语句中，您应该用双引号将变量括起来。如果变量是空字符串（或者如果变量不存在），则 if 语句将不包含足够的参数并将引发错误。

这是一个例子：

```
if [[ $var -eq 1 ]]
then 
    echo yes
else
    echo no
fi 
```

如果`var`未初始化，bash 会将语句扩展为如下所示：

```
if [[ -eq 1 ]]
then 
    echo yes
else
    echo no
fi 
```

没有足够的参数使该`if`语句在这里有效，并且 bash 会抛出一个错误：

```
bash: conditional binary operator expected
bash: syntax error near `1' 
```

通过将变量括在引号中，可以避免这种情况。这个说法：

```
if [[ "$var" -eq 1 ]]
... 
```

扩展为：

```
if [[ "" -eq 1 ]]
... 
```

现在该`if`语句有足够的参数（第一个是空字符串）来解析。

# jsf - JSF 2.0 导航无法正常工作

> ID：12745029
> 
> 赞同：4
> 
> 时间：2012-10-05T11:12:42.557
> 
> 标签：jsf, jsf-2, navigation, primefaces

我正在尝试开始使用 JSF 2.0。我正在尝试一个基本的导航示例，但它无法正常工作。

文件结构如下：

![在此处输入图像描述](../Images/c8a5b4f9fe301a7d520ca54b34d6f437.png)

我已经在 web.xml 中配置了映射：

```
<!-- Change to "Production" when you are ready to deploy -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<!-- Welcome page -->
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>

<!-- JSF mapping -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

并且索引页面有 2 个按钮，点击后可将您带到不同的页面

faces-config.xml 文件定义了一些导航案例：

```
<!-- Configuration of navigation rules -->  
<navigation-rule>
    <from-view-id>/index.xhtml</from-view-id> 
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/pages/success.xhtml</to-view-id>
    </navigation-case>
     <navigation-case>
        <from-outcome>error</from-outcome>
        <to-view-id>/pages/error.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

例如，以下按钮应将您带到成功页面（/pages/success.xhtml）：

```
<p:commandButton id="addUser" value="Add" action="#{userMB.addUser}" ajax="false"/> 
```

我已经对此进行了调试，addUser 的返回值绝对是“成功”。

页面切换到success.xhtml，因为我看到内容变了，但是浏览器URL指向index.xhtml....

启动时： URL 是**localhost:8080/PROJECT/**没有 index.xhtml 可能是因为我们将其配置为欢迎文件。当我们点击上面的按钮时，URL 变为**localhost:8080/PROJECT/index.xhtml**

我相信我弄乱了映射或相对路径。我发现了一些建议，唯一的映射应该是带有 *.xhtml 的映射，但我并不真正理解为什么以及如何处理页面的多个子文件夹。

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T12:19:04.100

> *页面切换到success.xhtml，因为我看到内容已更改，但浏览器URL 指向index.xhtml。*

这是正常行为。HTML`<form action>`指向，`/index.xhtml`因此表单将准确地提交到该 URL，但在幕后，响应显示`/pages/success.xhtml`.

如果要更改 URL，则需要执行重定向。您可以通过添加问题来做到这`<redirect/>`一点`<navigation-case>`。

```
<navigation-case>
    <from-outcome>success</from-outcome>
    <to-view-id>/pages/success.xhtml</to-view-id>
    <redirect/>
</navigation-case> 
```

### 也可以看看：

*   [重定向和导航/转发之间有什么区别以及何时使用什么？](https://stackoverflow.com/questions/11277366/jsf-redirect-options/11277482#11277482)

* * *

**与具体问题无关**，使用导航的案例都是 JSF 1.x。考虑利用新的 JSF 2.0 隐式导航特性。这使您免于冗长的 XML 地狱。

```
public String addUser() {
    if (...) {
        return "/pages/success.xhtml?faces-redirect=true";
    } else {
        return "/pages/error.xhtml?faces-redirect=true";
    }
} 
```

但是，我建议只添加面孔消息，然后通过返回`void`或`null`导航到“成功”或“错误”页面来重新显示同一页面，这也是真正的 Web 表单的工作方式。当然，除非你正在做一些“Hello World”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T11:59:49.917

在导航规则中试试这个

```
<navigation-rule>
<from-view-id>/index.jsf</from-view-id> 
<navigation-case>
    <from-outcome>success</from-outcome>
    <to-view-id>/pages/success.jsf</to-view-id>
</navigation-case>
 <navigation-case>
    <from-outcome>error</from-outcome>
    <to-view-id>/pages/error.jsf</to-view-id>
</navigation-case> 
```

# iphone - 如何使用适用于 iOS 的 Dropbox SDK 显示文件选择器控制器 UI？

> ID：12745030
> 
> 赞同：1
> 
> 时间：2012-10-05T11:12:43.790
> 
> 标签：iphone, ios, ios4, dropbox, dropbox-api

我有一个使用 Dropbox 功能的 iPhone 应用程序。

我需要的是显示一个自定义视图控制器，允许用户浏览他们自己的 Dropbox 并选择一个文件。这个视图控制器应该看起来类似于官方的 iPhone Dropbox 应用程序，您可以在其中导航文件夹并选择一个文件。

我知道我可以使用 Dropbox SDK 自己实现这个视图控制器。但我希望找到一些已经在做的代码并公开共享。

感谢您的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:17:11.903

我知道我正在使用的 DZDocumentsPickerController，但是集成起来非常复杂。

[https://github.com/DZen-Interaktiv/DZDocumentsPickerController](https://github.com/DZen-Interaktiv/DZDocumentsPickerController)

# android - 如何隐藏发光效果？

> ID：12745033
> 
> 赞同：0
> 
> 时间：2012-10-05T11:12:55.333
> 
> 标签：android, onclick, imageview, glow

发光效果工作正常。我的疑问是如何隐藏发光效果？如果我单击我的图像视图，那一次我只想显示我的发光效果请如何在单击时隐藏和显示发光效果。

代码：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // An added margin to the initial image
        int margin = 24;
        int halfMargin = margin / 2;

        // the glow radius
        int glowRadius = 16;

        // the glow color
        int glowColor = Color.rgb(0, 192, 255);

        // The original image to use
        Bitmap src = BitmapFactory.decodeResource(getResources(),
                R.drawable.test);

        // extract the alpha from the source image
        Bitmap alpha = src.extractAlpha();

        // The output bitmap (with the icon + glow)
        Bitmap bmp = Bitmap.createBitmap(src.getWidth() + margin,
                src.getHeight() + margin, Bitmap.Config.ARGB_8888);

        // The canvas to paint on the image
        Canvas canvas = new Canvas(bmp);

        Paint paint = new Paint();
        paint.setColor(glowColor);

        // outer glow
        paint.setMaskFilter(new BlurMaskFilter(glowRadius, Blur.OUTER));
        canvas.drawBitmap(alpha, halfMargin, halfMargin, paint);

        // original icon
        canvas.drawBitmap(src, halfMargin, halfMargin, null);
        setContentView(R.layout.activity_main);

        ((ImageView) findViewById(R.id.bmpImg)).setImageBitmap(bmp);

    }
} 
```

目前的屏幕截图：

![在此处输入图像描述](../Images/2a7a5ac02044d98af963576c6ef7075b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:21:57.670

`setMaskFilter()`你可以这样设置null

```
paint.setMaskFilter(null); 
```

你只需要设置`paint.setMaskFilter(new BlurMaskFilter(glowRadius, Blur.OUTER));`

为此，您需要为应用程序范围保留绘制对象，以便此绘制对象可以在任何您想要的其他类或活动中访问，或者您可以将标志设置为 true，然后显示发光效果和 false 标志不设置任何内容（默认）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T07:51:44.433

设置 onclicklistener 并实现此代码：

```
.setOnClickListener(clicklistener);

private OnClickListener backListener = new OnClickListener() {
        public void onClick(View v) {
    // An added margin to the initial image
        int margin = 24;
        int halfMargin = margin / 2;

        // the glow radius
        int glowRadius = 16;

        // the glow color
        int glowColor = Color.rgb(0, 192, 255);

        // The original image to use
        Bitmap src = BitmapFactory.decodeResource(getResources(),
                R.drawable.test);

        // extract the alpha from the source image
        Bitmap alpha = src.extractAlpha();

        // The output bitmap (with the icon + glow)
        Bitmap bmp = Bitmap.createBitmap(src.getWidth() + margin,
                src.getHeight() + margin, Bitmap.Config.ARGB_8888);

        // The canvas to paint on the image
        Canvas canvas = new Canvas(bmp);

        Paint paint = new Paint();
        paint.setColor(glowColor);

        // outer glow
        paint.setMaskFilter(new BlurMaskFilter(glowRadius, Blur.OUTER));
        canvas.drawBitmap(alpha, halfMargin, halfMargin, paint);

        // original icon
        canvas.drawBitmap(src, halfMargin, halfMargin, null);
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:15:28.967

一个更简单的方法是使用[`StateListDrawable`](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList).

创建两张图像 - 一张用于正常状态，一张用于按下状态（带发光）。在 res/drawable/button_drawable.xml 中使用它：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:drawable="@drawable/image_normal"
        android:state_enabled="true"/>
    <item
        android:drawable="@drawable/image_pressed"
        android:state_pressed="true"/>
</selector> 
```

并将其用作按钮可绘制对象：

```
((ImageView) findViewById(R.id.bmpImg)).setImageDrawable(getResources().getDrawable(R.drawable.button_drawable)); 
```

# sql - SQL Server 2012 序列

> ID：12745037
> 
> 赞同：9
> 
> 时间：2012-10-05T11:13:06.120
> 
> 标签：sql, sql-server, tsql, sequences, sql-server-2012-express

我创建了一个表和序列以替换表中的标识我使用 SQL Server 2012 Express 但在尝试将数据插入表时出现此错误

> *消息 11719，级别 15，状态 1，第 2 行
> NEXT VALUE FOR 函数在检查约束、默认对象、计算列、视图、用户定义函数、用户定义聚合、用户定义表类型、子查询中不允许使用，公用表表达式或派生表。*

T-SQL 代码：

```
insert into Job_Update_Log(log_id, update_reason, jobid) 
values((select next value for Job_Log_Update_SEQ),'grammer fixing',39); 
```

这是我的桌子：

```
create table Job_Update_Log
(
   log_id int primary key  ,
   update_reason nvarchar(100) ,
   update_date date default getdate(),
   jobid bigint not null,
   foreign key(jobid) references jobslist(jobid)
); 
```

这是我的顺序：

```
CREATE SEQUENCE [dbo].[Job_Log_Update_SEQ] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 NO CACHE 
GO 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-05T11:20:20.980

只需去掉 VALUES 部分中的子选择，如下所示：

```
insert into Job_Update_Log(log_id,update_reason,jobid) 
        values (next value for Job_Log_Update_SEQ,'grammer fixing',39); 
```

参考：http: [//msdn.microsoft.com/en-us/library/hh272694%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/hh272694%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-05T11:16:33.553

您的插入语法似乎是错误的。您正在尝试在查询部分中使用`SELECT`语句。`VALUES`如果你想使用，`SELECT`那么你将使用：

```
insert into Job_Update_Log(log_id,update_reason,jobid) 
select next value for Job_Log_Update_SEQ,'grammer fixing',39; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/b614e/2)

我将语法从 更改`INSERT INTO VALUES`为`INSERT INTO ... SELECT`。我使用它是因为您正在选择序列的下一个值。

但是，如果要使用`INSERT INTO.. VALUES`，则必须`SELECT`从查询中删除 ：

```
insert into Job_Update_Log(log_id,update_reason,jobid) 
values(next value for Job_Log_Update_SEQ,'grammer fixing',39); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/98590/2)

这两个都将`INSERT`记录放入表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:59:39.260

试试这个：

* * *

– 带桌子

创建序列 idsequence 以 1 递增 3 开始

```
create table Products_ext
(
id int,
Name varchar(50)
);

INSERT dbo.Products_ext (Id, Name)
VALUES (NEXT VALUE FOR dbo.idsequence, ‘ProductItem’);

select * from Products_ext;

/* If you run the above statement two types, you will get the following:-

1    ProductItem
4    ProductItem

*/

drop table Products_ext;
drop sequence idsequence;

------------------------------ 
```

# javascript - 禁用选择jQuery Datepicker字段？

> ID：12745039
> 
> 赞同：1
> 
> 时间：2012-10-05T11:13:09.653
> 
> 标签：javascript, jquery, jquery-ui, datepicker, uidatepicker

我正在使用 jQuery UI Datepicker 制作一个包含两个字段的提交表单。我希望用户创建一个范围并提交它以查看结果。但是，他们显然无法选择比结束日期更近的开始日期（您看不到从今天开始到昨天的范围）。到目前为止，如果第一个发生在第二个之前，我已经能够在选择第二个时发出警报，但我不知道如何让日期选择器保持打开状态，以便用户可以选择其他内容。

这是我到目前为止的代码：

```
<script>
    $(document).ready(function() {
        $(".datepicker_start").datepicker({
            maxDate: '+0d',
            onSelect: function(dateText, inst) {

        }
        });
        $(".datepicker_to").datepicker({
            maxDate: '+0d',
            onSelect: function(dateText, inst) {
                 var startDate = $('.datepicker_start').val();
                $(this).attr('value', dateText)
                if (startDate > dateText) {
                    alert('not cool!');
                }
        }
        });
    });
</script> 
```

有谁知道我会怎么做？我尝试返回 false 但它仍然将错误的日期推送到该字段:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:18:14.963

```
$(function() {
    $( "#from" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
        }
    });
    $( "#to" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onSelect: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate);
        }
    });
}); 
```

来自：http: **//jqueryui.com/demos/datepicker/date-range.html**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T11:06:06.807

```
 $(function () {
        $("#fromdate").datepicker({
            onClose: function (selectedDate) {
                $("#todate").datepicker("option", "minDate", selectedDate);
            }
        });
        $("#todate").datepicker({
            onClose: function (selectedDate) {
                $("#fromdate").datepicker("option", "maxDate", selectedDate);
            }
        });
    }); 
```

# java - 在 Hibernate 中使用 HQL 在一张表中插入数据

> ID：12745041
> 
> 赞同：12
> 
> 时间：2012-10-05T11:13:20.687
> 
> 标签：java, hibernate, hql

我正在阅读 Hibernate HQL 教程，发现 HQL 不支持`INSERT INTO..VALUES..`但`INSERT INTO..SELECT..`即 HQL 仅支持从另一个表插入。

假设我想在一个表中插入相同的值，并且该数据不是来自任何其他表，即这些值不在任何其他表中。那么我该如何在 HQL 中做到这一点？

另外，想知道 HQL 中这种限制背后的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:21:19.117

如果数据来自另一个表，则不需要使用 hql 插入。

只需获取对您的实体的引用，获取 Hibernate 会话，然后调用 save()。

根据[http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch04.html#d0e2116](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch04.html#d0e2116)

**INSERT 语句的伪语法**

> 插入到实体名称 properties_list select_statement

**仅支持 INSERT INTO ... SELECT ... 表单。您不能指定要插入的显式值。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:20:39.357

Hibernate 是一个 ORM 框架（对象-关系映射）。

它的工作是你给它对象（实体），他管理存储（通过`Session.save()`，IIRC）。

因此，您不使用 HQL 插入新记录，而是使用 ORM 方法。

并且（这是一个猜测）另一方面，由于从表中加载实体、将它们复制到其他实体并一个一个地存储它们很慢，HQL 提供了一个到数据库中的 SQL 的快捷方式，仅用于该特定操作以提高性能目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T04:55:32.347

您可以使用`session.save(object)`将数据插入表中。

# .net - 有没有办法为多个数据库重用 NHibernate SessionFactory？

> ID：12745046
> 
> 赞同：2
> 
> 时间：2012-10-05T11:13:40.573
> 
> 标签：.net, nhibernate, sessionfactory, pooling

就像标题所说的那样，有没有办法`SessionFactory`为多个数据库“重用”a？由于实例化`SessionFactory`需要时间，我想知道是否可以汇集这些实例并重用它们，只更改连接/数据库名称。显然，一级缓存将被清除，但我试图避免实例化工厂本身所涉及的惩罚。

背景是我可以拥有几个具有完全相同架构的小型“可插拔”数据库，因此 NHibernate 无需每次都重新构建所有映射。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:55:24.560

您可以通过首先打开适用于目标数据库的标准 ADO.NET 对象并将其传递给 NH实例`Session`，为不同的数据库动态创建实例，如下所示：`Connection``SessionFactory`

```
 var connection = new SqlConnection("target DB connection string");
    var session = sessionFactory.OpenSession(connection);
    CurrentSessionContext.Bind(session); 
```

我建议您使用依赖注入容器来控制 ADO.NET 连接实例的生命周期和处置，而不是像上面显示的简化代码中所示直接创建它。

另一个问题是 NHibernate 在`SessionFactory`实例启动时执行数据库访问，因此您需要在 hibernate.cfg.xml 文件中提供有效的连接字符串，或者将其动态地注入到会话工厂配置逻辑中。

# 更新：

Groo 提供了一篇关于在 NHibernate 中动态切换数据库[的精彩文章的链接。](http://patrickhuber.wordpress.com/2011/10/25/change-connectionstring-nhibernate/)遵循该帖子中的建议，而不是像上面显示的示例代码那样做。

# c# - 创建自定义 wpf 文本框

> ID：12745051
> 
> 赞同：1
> 
> 时间：2012-10-05T11:14:06.830
> 
> 标签：c#, wpf, datetime, textbox

我有一个文本框，显示来自 DateTime 对象的日期和时间，如下所示：

```
<TextBox Text="{Binding MyDate,StringFormat=dd.MM.yyyy HH:mm:ss}"/> 
```

如何创建一个自定义文本框，称为 DateTextBox，它显示已格式化的日期，如下所示：

```
<DateTextBoxText="{Binding MyDate}"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:23:24.290

如果可能，请认真考虑使用更好的设计，例如使用 DateTimePicker，

[http://wpftoolkit.codeplex.com/wikipage?title=DateTimePicker](http://wpftoolkit.codeplex.com/wikipage?title=DateTimePicker)

编写自己的 TextBox 容易出错并且对用户来说不方便。

![在此处输入图像描述](../Images/505c066a38c08a6d98a1f58eeb484794.png)

# facebook - 我通过图形 api 制作的 Facebook 墙贴

> ID：12745052
> 
> 赞同：0
> 
> 时间：2012-10-05T11:14:10.483
> 
> 标签：facebook, facebook-graph-api

是否可以在我的提要中查询我而不是其他人发布的墙贴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:31:02.800

是的，这是可能的。[尝试 https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer) 并使用

```
 https://graph.facebook.com/your_facebook_id?fields=feed.fields(from,message,story,description) 
```

# iphone - iPhone 中的动画启动画面

> ID：12745055
> 
> 赞同：1
> 
> 时间：2012-10-05T11:14:13.047
> 
> 标签：iphone, ios

我需要为 iPhone 应用程序实现动画启动屏幕。我见过已经实现了相同功能的 Skype 应用程序。

谁能知道我如何在我的应用程序中实现相同的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:18:31.947

您可以使用图像序列，这里是代码：

```
for(NSInteger i=1;i<=totalImages;i++){
        NSString *strImage = [NSString stringWithFormat:@"Activity_%d",i];
        UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:strImage ofType:@"png"]];
        [imageArray addObject:image];
    }
    splashImageView.animationImages = imageArray;
    splashImageView.animationDuration = 0.8; 
```

只需调用 UIImageView 的 startAnimation 和 endAnimation 方法。

或者

它非常简单......我用它来开始我的应用程序与 splashView. 希望它对你有帮助......在 AppDelegate.m 中：

应用程序 didFinishLaunchingWithOptions：

```
UIImage* image=[UIImage imageNamed:@"splash.jpg"];
splashView=[[UIImageView alloc]initWithImage:image];
[window addSubview:splashView];
[window bringSubviewToFront:splashView];
[self performSelector:@selector(removeSplash) withObject:self afterDelay:2];
[window makeKeyAndVisible]; 
```

要删除 splashView：

```
-(void)removeSplash{

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:window cache:YES];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationDelegate:self];
    [splashView removeFromSuperview];
    [UIView commitAnimations];
    [window addSubview:viewController.view];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T04:51:21.997

将 UIView 和 Imageview 放入其中。将你所有的图像都交给 ImageView 来制作动画。

```
-(void)viewDidLoad
{
 NSArray *arrImage=[NSArray arrayWithObjects:
                             [UIImage imageNamed:@"1.png"],
                             [UIImage imageNamed:@"2.png"],
                             [UIImage imageNamed:@"3.png"],
                             nil];

    imgVw.backgroundColor=[UIColor purpleColor];
    imgVw.animationImages=arrImage;
    imgVw.animationDuration=2.5;
    imgVw.animationRepeatCount=1;
    [imgVw startAnimating]; 

    [NSTimer scheduledTimerWithTimeInterval:4.0 target:self selector:@selector(animateNext) userInfo:nil repeats:NO];

} 
```

这将显示您的应用程序图标。

之后，您将显示默认隐藏的控件，并从下到上为它们设置动画。

```
-(void)animateNext
{
    lbl.hidden = NO;
    btn.hidden = NO;
    txt1.hidden = NO;
    txt2.hidden = NO;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.9];
    lbl.frame=CGRectMake(lbl.frame.origin.x,lbl.frame.origin.y - 150,lbl.frame.size.width,lbl.frame.size.height);
    imgVw.frame = CGRectMake(imgVw.frame.origin.x, imgVw.frame.origin.y - 150, imgVw.frame.size.width, imgVw.frame.size.height);
    txt1.frame = CGRectMake(txt1.frame.origin.x, txt1.frame.origin.y - 150, txt1.frame.size.width, txt1.frame.size.height);
    txt2.frame = CGRectMake(txt2.frame.origin.x, txt2.frame.origin.y - 150, txt2.frame.size.width, txt2.frame.size.height);
    btn.frame = CGRectMake(btn.frame.origin.x, btn.frame.origin.y - 150, btn.frame.size.width, btn.frame.size.height);
    [UIView commitAnimations];    

} 
```

希望这有助于...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T11:50:19.250

我们可以在其中显示**.gif**图像`webView`，它看起来很完美！

取一个名为with的新`UIViewController`类，然后添加一个with (320.0, 480.0) 框架，也隐藏起来。`SplashView``XIB``UIWebView``statusbar`

在`SplashView.h`

```
#import <UIKit/UIKit.h>
@interface SplashView : UIViewController
@property(nonatomic, retain)IBOutlet UIWebView *webView;
@end 
```

在`SplashView.m`

```
- (void)viewDidLoad
{
   [super viewDidLoad];
   NSString *imagePath = [[NSBundle mainBundle] pathForResource: @"animated" ofType: @"gif"];
   NSData *data = [NSData dataWithContentsOfFile:imagePath];
   [self.webView setUserInteractionEnabled:NO];
   [self.webView loadData:data MIMEType:@"image/gif" textEncodingName:nil baseURL:nil];
} 
```

这是关于`SplashView`课堂的。现在来到你的 appdelegate 的课堂。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

    [[UIApplication sharedApplication] setStatusBarHidden:YES];
     splashView = [[SplashView alloc]initWithNibName:@"SplashView" bundle:nil];
    [self.window addSubview:splashView.view];

    [self performSelector:@selector(changeView) withObject:nil afterDelay:3.0];

    [self.window makeKeyAndVisible];
    return YES;
}

-(void)changeView
{
    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [splashView.view removeFromSuperview];
    [self.window setRootViewController:self.viewController];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T11:18:59.333

尝试这个

Appdelegate.h

```
 @interface AppDelegate : UIResponder <UIApplicationDelegate> 
    {
        UIImageView *splashView;
    }

@property (strong, nonatomic) UIWindow *window;

@property (strong, nonatomic) ViewController *viewController;

- (void)startupAnimationDone:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context; 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

// Make this interesting.
    splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 320, 480)];
    splashView.image = [UIImage imageNamed:@"Default.png"];
    [self.window addSubview:splashView];
    [self.window bringSubviewToFront:splashView];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];
    [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:self.window cache:YES];
    [UIView setAnimationDelegate:self]; 
    [UIView setAnimationDidStopSelector:@selector(startupAnimationDone:finished:context:)];
    splashView.alpha = 0.0;
    splashView.frame = CGRectMake(-60, -85, 440, 635);
    [UIView commitAnimations];

    return YES;
}

- (void)startupAnimationDone:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {
    [splashView removeFromSuperview];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T11:21:25.747

您需要使用视图控制器启动您的应用程序，其中包含一个 uiimageview。创建一系列 .png 图像以进行 UIImageView[检查如何为 uiimageview 中的图像数组设置动画](https://stackoverflow.com/questions/11249876/images-from-an-array)。进一步要在动画结束后将其关闭，您需要实现一个协议，该协议将通知您启动应用程序的第一个视图控制器以关闭动画

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T11:19:19.717

是的，在 AppDelegate 类中很简单，首先像下面这样破坏 imageview..

```
@interface AppDelegate : UIResponder 
{
    UIImageView *splashView;
} 
```

并在 .m 文件中...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {
        splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
        splashView.image = [UIImage imageNamed:@"Default"];
        [self.window addSubview:splashView];

        [self performSelector:@selector(loadViewIphone) withObject:nil afterDelay:2.0];
    } 
    [self.window makeKeyAndVisible];
    return YES;
}

-(void)loadViewIphone 
{
    [splashView removeFromSuperview];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];   
    [animation setType:kCATransitionFade];
    [animation setDuration:0.5];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [[self.window layer] addAnimation:animation forKey:@"transitionViewAnimation"];
} 
```

我希望这对你有帮助..

:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T11:20:38.467

```
- (void) welcomeScreen
{

 //Welcome Screen
 UIImageView* welcome = [[[UIImageView alloc] initWithFrame:CGRectMake(0,0,320,480)]autorelease];
 welcome.image = [UIImage imageNamed:@"img.png"];
 [window addSubview:welcome];
 [window bringSubviewToFront:welcome];

 //Animation Effects (zoom and fade)
 [UIView beginAnimations:nil context:nil];
 [UIView setAnimationDuration:2.0];
 [UIView setAnimationTransition:UIViewAnimationTransitionNone forView:window cache:YES];
 [UIView setAnimationDelegate:welcome];
 [UIView setAnimationDidStopSelector:@selector(removeFromSuperview)];

//set transparency to 0.0
 welcome.alpha = 0.0;

//zoom effect
 welcome.frame = CGRectMake(-60, -60, 440, 600);

 [UIView commitAnimations];

} 
```

# wpf - 未调用依赖属性的 PropertyChangedCallback

> ID：12745060
> 
> 赞同：3
> 
> 时间：2012-10-05T11:14:33.997
> 
> 标签：wpf, user-controls, dependency-properties, propertychanged

如果有一个带有 DependencyProperty 的自己的用户控件和相应的回调方法，如下所示：

```
public partial class PieChart : UserControl
{
    public static readonly DependencyProperty RatesProperty = DependencyProperty.Register("Rates", typeof(ObservableCollection<double>), typeof(PieChart),
        new PropertyMetadata(new ObservableCollection<double>() { 1.0, 1.0 }, new PropertyChangedCallback(OnRatesChanged)));

[...]

    public static void OnRatesChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ((PieChart)d).drawChart();
    } 
```

使用此用户控件时，我将名为“Rates”的 ObservableCollection 绑定到 RatesProperty。费率和相关方法如下所示：

```
private ObservableCollection<double> rates;
public ObservableCollection<double> Rates
{
    get { return this.rates; }
    set
    {
        if (this.rates != value)
        {
            this.rates = value;
            OnPropertyChanged("Rates");
        }
    }
}

public event PropertyChangedEventHandler PropertyChanged;
protected virtual void OnPropertyChanged(string propertyName)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
} 
```

当我更改 ObservableCollection Rates（例如使用`this.Rates = new ObservableCollection<double>() { 1.0, 2.0 }`）时，用户控件的 OnRatesChanged() 方法会像预期的那样被调用。但是当我执行以下命令时，它不会被调用：

```
this.Rates[0] = (double)1;
this.Rates[1] = (double)2;
OnPropertyChanged("Rates"); 
```

我希望当我使用正确的属性名称引发 PropertyChanged 事件时，始终会调用用户控件中的相应回调。那是错的吗？我找到了这个线程：[Getting PropertyChangedCallback of a dependency property always - Silverlight](https://stackoverflow.com/questions/2550780/getting-propertychangedcallback-of-a-dependency-property-always-silverlight) 涵盖了 silverlight，但我认为 WPF 也是如此。

所以后台的框架检查绑定的属性（在我的例子中是“Rates”）是否改变了，只有当它改变时，它才会调用相关的回调，对吗？因此更改我收藏的元素没有任何效果，我总是要更改完整的收藏？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:03:09.043

您的结论是正确的，只有在将依赖属性设置为新集合（或 null）`OnRatesChanged`时才会调用您的回调。`Rates`

为了获得有关集合更改的通知，您还必须注册一个[NotifyCollectionChangedEventHandler](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventhandler.aspx)：

```
private static void OnRatesChanged(
    DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var pieChart = (PieChart)d;
    var oldRates = e.OldValue as INotifyCollectionChanged;
    var newRates = e.NewValue as INotifyCollectionChanged;

    if (oldRates != null)
    {
        oldRates.CollectionChanged -= pieChart.OnRatesCollectionChanged;
    }

    if (newRates != null)
    {
        newRates.CollectionChanged += pieChart.OnRatesCollectionChanged;
    }

    pieChart.drawChart();
}

private void OnRatesCollectionChanged(
    object sender, NotifyCollectionChangedEventArgs e)
{
    switch (e.Action)
    {
        ...
    }

    drawChart();
} 
```

# mysql - Magento Mysql 调优——表缓存

> ID：12745063
> 
> 赞同：4
> 
> 时间：2012-10-05T11:14:35.603
> 
> 标签：mysql, magento

我正在尝试调整我的 Magento DB 以获得最佳性能。

我在 4GB RAM、8CPU 核心虚拟机和 4GB RAM 上运行 nginx、php-fpm 和 mysql。

我已经运行了 Mysql Tuning Primer，除了我的表缓存之外，一切看起来都不错：

```
TABLE CACHE
Current table_open_cache = 1000 tables
Current table_definition_cache = 400 tables
You have a total of 2510 tables
You have 1000 open tables.
Current table_cache hit rate is 3%
, while 100% of your table cache is in use
You should probably increase your table_cache
You should probably increase your table_definition_cache value. 
```

和来自 mysqltuner

```
[!!] Table cache hit rate: 9% (1K open / 10K opened)
[!!] Query cache efficiency: 0.0% (0 cached / 209 selects) 
```

my.cnf 文件中的相关设置：

```
table_cache            = 1000
query_cache_limit = 1M
query_cache_size        = 64M 
```

问题是，无论我将 table_cache 增加到什么 - 它似乎几乎立即被消耗掉。这对 Magento 来说正常吗？好像异常高？

有人对我可以做些什么来改善这一点有任何建议吗？

谢谢，

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:35:10.353

检查您的 MySQL 配置的查询缓存类型设置：

[http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_query_cache_type](http://dev.mysql.com/doc/refman/5.1/en/server-system-variables.html#sysvar_query_cache_type)

如果您将其设置为 0 或 2，那么它将不缓存任何查询或仅缓存您特别要求缓存的查询。这意味着 Magento 必须明确要求缓存的查询结果（我不确定它是否这样做）。如果您将其设置为 1，那么它将缓存所有查询，除了那些明确要求没有查询缓存的查询。

表缓存是指潜在的打开文件指针。它可以很快被消耗，并且会根据需要滚动未使用的条目。来自[MySQL 的文档](http://dev.mysql.com/doc/refman/5.0/en/table-cache.html)：

> table_cache 和 max_connections 系统变量影响服务器保持打开的最大文件数。如果您增加这些值中的一个或两个，您可能会遇到操作系统对每个进程打开文件描述符的数量施加的限制。许多操作系统允许您增加打开文件的限制，尽管方法因系统而异。请查阅您的操作系统文档以确定是否可以增加限制以及如何增加限制。
> 
> table_cache 与 max_connections 有关。例如，对于 200 个并发运行的连接，您的表缓存大小应至少为 200 * N，其中 N 是您执行的任何查询中每个连接的最大表数。您还必须为临时表和文件保留一些额外的文件描述符。
> 
> 确保您的操作系统可以处理 table_cache 设置所暗示的打开文件描述符的数量。如果 table_cache 设置得太高，MySQL 可能会耗尽文件描述符并拒绝连接，无法执行查询，并且非常不可靠。您还必须考虑到 MyISAM 存储引擎需要两个文件描述符用于每个唯一的打开表。您可以使用 mysqld 的 --open-files-limit 启动选项来增加 MySQL 可用的文件描述符的数量。请参见第 C.5.2.18 节，“未找到‘文件’和类似错误”。
> 
> 打开表的缓存保持在 table_cache 条目的级别。默认值为 64；这可以通过 mysqld 的 --table_cache 选项进行更改。请注意，MySQL 可能会暂时打开比这更多的表来执行查询。
> 
> MySQL 在以下情况下关闭未使用的表并将其从表缓存中删除：
> 
> 当缓存已满并且线程尝试打开不在缓存中的表时。
> 
> 当缓存包含多个 table_cache 条目并且缓存中的表不再被任何线程使用时。
> 
> 当发生表刷新操作时。当有人发出 FLUSH TABLES 语句或执行 mysqladmin flush-tables 或 mysqladmin refresh 命令时，就会发生这种情况。
> 
> 当表缓存填满时，服务器使用以下过程来定位要使用的缓存条目：
> 
> 当前未使用的表被释放，从最近最少使用的表开始。
> 
> 如果需要打开一个新表，但缓存已满，无法释放任何表，则根据需要临时扩展缓存。当缓存处于临时扩展状态并且表从使用状态变为未使用状态时，表将关闭并从缓存中释放。

# mono - 如何在 MonoDevelop 中为我的 MonoMac 应用程序开发 GUI？

> ID：12745069
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:14:53.523
> 
> 标签：mono, monodevelop, monomac

如何为我的 MonoMac 应用程序开发 GUI？我在 MonoDevelop 中找不到任何选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:18:41.903

您只能在 MonoDevelop 中的 Mac OS X 上创建 MonoMac 应用程序，然后使用 Interface Builder（或 Xcode 4+）来修改 GUI。更多信息可以在开发者的博客上找到，例如

[http://mjhutchinson.com/journal/2010/06/09/monomac_in_monodevelop](http://mjhutchinson.com/journal/2010/06/09/monomac_in_monodevelop)

这与 MonoTouch 开发非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:32:46.047

Gtk# 我猜。确保您已安装

# mysql - Toad for MySQL 使用什么来更改皮肤？

> ID：12745072
> 
> 赞同：0
> 
> 时间：2012-10-05T11:15:08.420
> 
> 标签：mysql, winforms, devexpress, toad, skin

我刚刚为 MySQL 安装了 Toad，在启动时，我被要求为（winforms？）应用程序选择一个皮肤。令人印象深刻的是，您可以从大量皮肤列表中进行选择，并且应用程序会立即更新。做一些谷歌搜索将我指向 DevExpress 控制工具包 - 是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:42:06.227

据我所知 Toad for MySQL 是基于[DevExpress WinForms 控件](http://devexpress.com/Subscriptions/DXperience/WhatsNew2012v1/winforms.xml)。因此，[DevExpress Skins 技术](http://help.devexpress.com/#WindowsForms/CustomDocument2399)可用于该应用程序的开箱即用。
您可以在此处阅读有关皮肤的更多信息：[皮肤概述](http://help.devexpress.com/#WindowsForms/CustomDocument2534)。

# solr - SOLR中dataConfig部分字段的加密

> ID：12745073
> 
> 赞同：0
> 
> 时间：2012-10-05T11:15:12.563
> 
> 标签：solr

我使用 data-config.xml 文件中的 dataConfig 部分从 DB 生成 SOLR，它工作正常。

```
<dataConfig> 
 <dataSource type="JdbcDataSource"  driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"  
    url="jdbc:sqlserver://127.0.0.1;databaseName=emp" user="user" password="user"/> 
    <document name="reviews"> 
       <entity name="COMMON" query="select id,name from users" > 
           <field column="id" name="id"/> 
           <field column="name" name="name"/>
      </entity> 
    </document> 
</dataConfig> 
```

我想对上述配置中的 url、databaseName、用户和密码字段进行加密。

请帮忙，

提前致谢。

阿尼尔贾扬蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:10:06.413

基本上，您可以参数化 pwd 字段（或任何其他字段）。如下所示，我已经参数化了密码字段：

```
<dataConfig>
     <dataSource name="jdbc" driver="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@//testdbserver:1521/db1" user="tester"  password="${dataimporter.request.pwd}"/>
</dataConfig> 
```

所以当你调用服务器时，你可以将 pwd 作为参数传递：

[http://www.googleserver](http://www.googleserver) :/solr/dataimport?command=full-import&pwd=sa

现在，您可能必须加密上面 url 中的密码或用户（使用 DES） - 然后找到在 SolR 端解密的方法。对于 SolR 端的解密，您必须编写一个自定义评估器（尽管 SolR 可能提供了一个我找不到的解密函数）。

或者，可以从自定义评估器中获取参数。请参阅以下链接以了解自定义评估器： [http ://wiki.apache.org/solr/DataImportHandler#Custom_Evalutaors](http://wiki.apache.org/solr/DataImportHandler#Custom_Evalutaors)

因此，例如：

```
<dataConfig>
    <function name="getPwd" class="myFoo.FetchPwd"/>
    <dataSource name="jdbc" driver="oracle.jdbc.driver.OracleDriver" url="jdbc:oracle:thin:@//testdbserver:1521/db1" user="tester"  password="${dataimporter.functions.getPwdFromAsc}"/>
</dataConfig> 
```

# android - 对话框中 EditText 的 Holo 主题

> ID：12745075
> 
> 赞同：1
> 
> 时间：2012-10-05T11:15:20.940
> 
> 标签：android, view, themes, android-edittext

我有一个对话框，其中有 2 个编辑文本一个标题和评论..我想要这个全息主题的编辑文本。请任何人帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:08:23.247

用这个：

```
AlertDialog.Builder builder = new AlertDialog.Builder(new 
ContextThemeWrapper(this, R.style.AlertDialogCustom)); 
```

Becoz android 使用 ContextThemeWrapper 来设置对话框的样式。

确保在资源中定义您的自定义样式：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="AlertDialogCustom" parent="@android:style/Theme_Holo_Dialog">
        <item name="android:textColor">#FFFF00</item>
        <item name="android:typeface">monospace</item>
        <item name="android:textSize">18sp</item>
    </style>
</resources> 
```

您可以在这里获得更多主题：http: [//developer.android.com/reference/android/R.style.html](http://developer.android.com/reference/android/R.style.html)

# jquery - 在 bxslider 我想在当前幻灯片上添加一个类

> ID：12745083
> 
> 赞同：10
> 
> 时间：2012-10-05T11:15:59.717
> 
> 标签：jquery, slider, bxslider

我想在当前可见幻灯片中添加一个额外的类，我对 jquery 的了解不多，我正在通过以下代码进行尝试。

```
 $(document).ready(function(){
     $('#slider1').bxSlider({
        pager: 'true'
     });
 $(currentSlide).addClass('active-slide');
     return false;
 }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-20T19:02:02.493

要在第一张可见幻灯片上添加类，您必须调用 onSliderLoad。然后您继续使用 onSlideAfter 调用添加和删除活动幻灯片类。

```
onSlideAfter: function (currentSlideNumber, totalSlideQty, currentSlideHtmlObject) {
    $('.active-slide').removeClass('active-slide');
    $('.bxslider>li').eq(currentSlideHtmlObject + 1).addClass('active-slide')
},
onSliderLoad: function () {
    $('.bxslider>li').eq(1).addClass('active-slide')
}, 
```

[https://jsfiddle.net/dariodev/587pqsct/](https://jsfiddle.net/dariodev/587pqsct/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T11:29:34.510

[http://bxslider.com/options](http://bxslider.com/options)

```
 var slider=$('#slider1').bxSlider({
     pager: 'true',
   onBeforeSlide: function(currentSlide, totalSlides, currentSlideHtmlObject){
        $('.pager').removeClass('active-slide');   
         $(currentSlideHtmlObject).addClass('active-slide');
 //     $('#sddf').html('<p class="check">Slide index ' + currentSlide + ' of ' + totalSlides + ' total slides has completed.');
    }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-18T08:38:59.773

这里是：

```
$('#slider1 ul').bxSlider({
    pager: 'true',
    onSliderLoad: function(currentIndex) {     
      $('#slider1').find('.bx-viewport').find('ul').children().eq(currentIndex + 1).addClass('active-slide');
    },
    onSlideBefore: function($slideElement){
      $('#slider1').find('.bx-viewport').find('ul').children().removeClass('active-slide');
      $slideElement.addClass('active-slide');
    }
}); 
```

[JSFiddle](http://jsfiddle.net/3ntx6sag/3/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-11T08:22:29.953

它的 100% 工作

```
$(document).ready(function(){
            $('.bxslider1').bxSlider({
                slideWidth: 280,
                slideMargin: 20,
                useCSS: false,
                autoHover: false,
                speed: 2000,
                oneToOneTouch: true,
                pager: 'true',
                onSliderLoad: function(currentIndex) {     
                  $('.bxslider1').find('.bx-viewport').find('ul').children().eq(currentIndex + 1).addClass('active-slide');
                },
                onSlideBefore: function($slideElement){
                  $('.bxslider1').find('.bx-viewport').find('ul').children().removeClass('active-slide');
                  $slideElement.addClass('active-slide');
                }
            });

        }); 
```

# java - 如何抑制 sun.reflect.Reflection 的专有 API 警告？

> ID：12745088
> 
> 赞同：3
> 
> 时间：2012-10-05T11:16:18.750
> 
> 标签：java, reflection, suppress-warnings

> **可能重复：**
> [无法阻止 ant 生成编译器警告](https://stackoverflow.com/questions/9613857/cannot-stop-ant-from-generating-compiler-warnings)

如何抑制此警告：

```
sun.reflect.Reflection is Sun proprietary API and may be removed in a future release 
```

在 Oracles javac (1.6) 中使用[@SuppressWarnings ？](http://docs.oracle.com/javase/7/docs/api/java/lang/SuppressWarnings.html)

根据[这个博客](http://www.thebuzzmedia.com/supported-values-for-suppresswarnings/)，使用`"all"`应该可以，但它没有。有人知道正确的字符串吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:20:14.183

尝试添加

> -XDignore.symbol.file

javac 命令行的选项

希望这可以帮助

编辑参考：[OPENJDK](http://openjdk.java.net/projects/sctp/html/sctp6.html)

例 6

要编译源代码，您可以使用带有 -source 1.6 -target 1.6 的 JDK7 中的 javac，或者使用 -XDignore.symbol.file=true 从修补的 JDK6 中运行 javac。该标志是必需的，因为 javac 使用符号文件来确定 com/sun 命名空间中的包，并且不会识别新的 sctp 类，因为它们不在此符号文件中。

# iphone - Tableview 中的 UITextView 文本会被覆盖吗？

> ID：12745091
> 
> 赞同：0
> 
> 时间：2012-10-05T11:16:25.210
> 
> 标签：iphone, ios, uitableview

在我的应用程序中，我使用四个 UITextView 自定义了 UITableView 单元。每当我将数据添加到 tableview 并重新加载它时。UITableViewCell 中的文本被之前的文本覆盖。

我尝试了不同的方法，但无法弄清楚问题所在。

我在视图控制器中使用 TableView。

这是我在表格视图单元格中使用的代码？

```
if ( [tableView isEqual:self.tableActions])
{
    //Setting the text empty

    static NSString *CellIdentifier = @"ActionsIdentifier";

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
    }
    NSLog(@"Index Path %i",[indexPath row]);
    ActionDetails *actiondetails = [actionArray objectAtIndex:[indexPath row]];

    NSLog(@"Action Text %@",actiondetails.actions);

    //Actions
    actionText=[[UITextView alloc] initWithFrame:CGRectMake(10, 5, 230,30)];
    actionText.font = [UIFont systemFontOfSize:17.0];
    actionText.editable = NO;
    actionText.textColor=[UIColor blackColor];
    actionText.text = actiondetails.actions ; 
    actionText.userInteractionEnabled = NO;
    actionText.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:actionText];

    //Owner         
    ownerBy=[[UITextView alloc] initWithFrame:CGRectMake(230, 5, 230,30)];
    ownerBy.font = [UIFont systemFontOfSize:17.0];
    ownerBy.textColor=[UIColor blackColor];
    ownerBy.textAlignment = UITextAlignmentCenter;
    ownerBy.text = actiondetails.owner;
    ownerBy.editable = NO;
    ownerBy.userInteractionEnabled = NO;
    ownerBy.backgroundColor = [UIColor clearColor];
    [cell.contentView addSubview:ownerBy];

 } 
```

截屏 ![在此处输入图像描述](../Images/e41605ffc326be774e411edc08d0c139.png)

谢谢你们的帮助。

非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:36:31.003

前几天这发生在我身上，我想出的解决方案是在 if 语句中创建单元格后从单元格中删除所有子视图。

```
if(cell == nil)
{
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
}
if ([cell.contentView subviews]){
    for (UIView *subview in [cell.contentView subviews]) {
        [subview removeFromSuperview];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:20:50.237

删除 Tableview 的单元格标识符，否则将 Customcell 用于 Tableview..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:27:21.133

只需简单尝试这种方式：

```
 {
        //Setting the text empty

        static NSString *CellIdentifier = @"ActionsIdentifier";

        cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        **// if(cell == nil) // comment this line in your code ,its work 
       // {**
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;
       **// }**
        NSLog(@"Index Path %i",[indexPath row]);
        ActionDetails *actiondetails = [actionArray objectAtIndex:[indexPath row]];

        NSLog(@"Action Text %@",actiondetails.actions);

        //Actions
        actionText=[[UITextView alloc] initWithFrame:CGRectMake(10, 5, 230,30)];
        actionText.font = [UIFont systemFontOfSize:17.0];
        actionText.editable = NO;
        actionText.textColor=[UIColor blackColor];
        actionText.text = actiondetails.actions ; 
        actionText.userInteractionEnabled = NO;
        actionText.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:actionText];

        //Owner         
        ownerBy=[[UITextView alloc] initWithFrame:CGRectMake(230, 5, 230,30)];
        ownerBy.font = [UIFont systemFontOfSize:17.0];
        ownerBy.textColor=[UIColor blackColor];
        ownerBy.textAlignment = UITextAlignmentCenter;
        ownerBy.text = actiondetails.owner;
        ownerBy.editable = NO;
        ownerBy.userInteractionEnabled = NO;
        ownerBy.backgroundColor = [UIColor clearColor];
        [cell.contentView addSubview:ownerBy];

     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T11:32:32.177

您正在重复使用该单元格。重用的单元格已经添加了 UITextview。所以你正在覆盖它。您必须将创建和添加 UITextView 的所有代码转移到。

> 如果（细胞==无）{
> 
> }

之后，您只需将 Text 设置为 UITextview。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-10T07:15:08.437

```
for (id vw in [[cell contentView] subviews]) {
    if ([vw isKindOfClass:[UILabel class]])
    {
       UILabel *label = (UILabel *)vw;
       [label removeFromSuperview];
    }
 }

 for (id vw in [cell subviews]) {
     if ([vw isKindOfClass:[UILabel class]])
     {
        UILabel *label = (UILabel *)vw;
        [label removeFromSuperview];
     }
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T11:33:24.963

当您的视图确实出现时，请重新加载您的表格视图。

```
-(void)viewDidAppear:(BOOL)animated {    
[tableView reloadData]; 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T11:40:48.173

改变你的`cellForRowAtIndexPath`方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

           // your code 

        }

          // your code 

        return cell;    

    } 
```

# dart - Dart 库布局

> ID：12745093
> 
> 赞同：3
> 
> 时间：2012-10-05T11:16:28.320
> 
> 标签：dart

我正在为 Dart 库布局而苦苦挣扎。我尝试了以下

```
lib/
  A.dart
  B.dart
  my_lib.dart 
```

其中：A.dart

```
class A {
  B myB;   
} 
```

飞镖

```
class A {
  B myB;   
} 
```

my_lib.dart

```
#library('my_lib');
#source('A.dart');
#source('B.dart'); 
```

但是在 A.dart 中，在 Dart Editor 中有一个问题：B - 没有这种类型。如果我在该文件中导入 B.dart，通过

```
#import('B.dart)', 
```

但现在它声称部分库只能包含部分指令。根据[http://news.dartlang.org/2012/07/draft-spec-changes-to-library-and.html](http://news.dartlang.org/2012/07/draft-spec-changes-to-library-and.html)

```
partDirective:
  metadata part  stringLiteral “;”
; 
```

但这对我也不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:00:44.763

下载最新的 SDK 并尝试：

*飞镖*

```
class A {
  B myB;
} 
```

*飞镖*

```
class B {

} 
```

*lib.dart*

```
library mylib;

part 'a.dart';
part 'b.dart'; 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-11T18:39:15.257

由于新版本的更改，布局必须类似于以下示例：

*飞镖*

```
part of mylib;

class A {
  B myB;
} 
```

*飞镖*

```
part of mylib;

class B {

} 
```

*lib.dart*

```
library mylib;

part 'a.dart';
part 'b.dart'; 
```

# php - PHP - 无法使用 exec 命令打开 .exe 文件

> ID：12745098
> 
> 赞同：1
> 
> 时间：2012-10-05T11:16:57.833
> 
> 标签：php, iis, exec, task, scheduler

我使用**PHP 5.4**，**IIS 7.5**。

如果执行一个简单的命令，**它可以工作**：

```
<?php
    exec("dir", $r);
    print_r($r);
?> 
```

但是如果打开 .exe 文件，它**不起作用**，页面正在加载，直到 php 超时并且不打开记事本：

```
<?php
    exec("notepad.exe", $r);
    print_r($r);
?> 
```

如果在命令行中执行记事本的 php，**它可以工作**：

```
php -f <file> 
```

我认为问题出在 IIS 上，但我不知道是什么。谢谢！

**更新**

我做了另一个测试用例但**不起作用**，页面完成加载但没有删除任务：

```
<?php
    $r = exec("SCHTASKS.exe /Delete /TN TaskTest /F");
    print_r($r);
?> 
```

IIS_IUSRS 具有执行 schtask 的权限。

**解决方案**

记事本无法打开，因为它是一个交互式程序。

对于任务调度程序，将任务文件夹 (C:\Windows\System32\Tasks) 的读写权限授予 IUSR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:20:53.250

问题是您正在指示`exec`收集并返回衍生进程的输出，并且*该进程必须终止才能发生这种情况*。由于记事本不会立即终止，PHP 会一直等待（例如，您可以通过运行任何非交互式进程来测试这一点`net.exe`）。

**外卖：** `exec`和朋友不是为了启动交互过程。

在任何情况下，`exec` *都会*产生一个命令解释器，而后者又会产生记事本。但是，由于最近的 Windows 版本中引入了安全功能，并且取决于运行 IIS 的用户，这些进程不会在您当前的桌面上创建可见窗口，因此您将看不到任何内容。您将能够验证它们是使用任务管理器或其他等效程序生成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:21:09.560

是什么让你认为它不起作用？

请注意，Windows 服务无法正常与桌面交互，因此*可能*是记事本*正在*启动，只是在您可以看到的任何地方都看不到 - 因为 PHP 将等待它终止，而没有人可以看到它来终止它，如您所见，它会超时。

It *may* also be the case that the user that the web server is running as does not have execute permissions on the folder that notepad is in (assuming it had the relevant path).

# php - 在php中合并这两个数组

> ID：12745103
> 
> 赞同：2
> 
> 时间：2012-10-05T11:17:20.643
> 
> 标签：php, arrays

我想合并两个数组，其中第一个数组是键，第二个数组是结果数组中的值。

```
$array1 =array('k1','k2');
$array2 =array('v1','v2'); 
```

输出应该是：

```
array(

    'k1' => 'v1',
    'k2' => 'v2',
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:18:56.877

您使用内置[`array_combine`](http://php.net/manual/en/function.array-combine.php)功能

```
$keys   = array('k1','k2');
$values = array('v1','v2'); 
$result = array_combine ($keys, $values); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:19:30.480

```
<?php
$a1=array("a","b","c","d");
$a2=array("Cat","Dog","Horse","Cow");
print_r(array_combine($a1,$a2));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:21:26.597

您可以使用该`array_combine`功能。该函数使用一个数组作为键，一个数组作为值。

您可以将其用作：

```
array_combine ( $keys, $values ); 
```

在您的情况下，它将是：

```
$array1 =array('k1','k2');
$array2 =array('v1','v2'); 

$combined_array = array_combine ( $array1, $array2 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:22:06.790

php 中的 array_combine() 函数是最简单的方法：

```
$array1 =array('k1','k2');
$array2 =array('v1','v2'); 

$result_array =  array_combine ($array1, $array2); 
```

# php - 如何使用 php echo 包含 javascript 文件？

> ID：12745104
> 
> 赞同：3
> 
> 时间：2012-10-05T11:17:21.523
> 
> 标签：php, javascript

如何使用 php echo 包含 javascript 文件？

我正在使用 php 创建一个 html 页面 ---

```
echo "<html><head><link rel='stylesheet' type='text/css' <script src="Calculation.js"> </script>  href='style.css' </head><body>"; 
```

我在上面的行中包含了脚本代码，然后在表单标签中包含了---

```
<form action='/workdonecalculation/index.php?_pagination_off=1' method='post'  class='form'  onSubmit='return workdone();'> 
```

但是我的 php 代码没有调用我的 javascript 文件（Calculation.js）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:22:28.217

```
 echo "<html><head><link rel='stylesheet' type='text/css'/> <script src='Calculation.js'></script>" 
```

首先关闭链接标签，并且您使用双引号..对于 src= 使用单引号，因为您已经在 echo "" 中使用了双引号。所以**src='Calculation.js'**

您也可以通过使用变量的简单方法来做到这一点。

```
$a=<<<HERE
<script src="Calculation.js"> </script>
HERE;
echo $a; 
```

您也可以关闭 php 并在您希望的任何地方启动 html

```
<?php
if($i)
{
?>
<script src=""></script> 
<?php
}
?> 
```

这就是你想要的？？？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:22:16.637

您没有关闭`<link>`标签并且`<script>`标签错位在`<link>`标签内。您还需要转义双引号`src="Calculation.js"`或简单地用单引号括起来。

这是正确的代码，

```
echo "<html><head><link rel='stylesheet' type='text/css' href='style.css' /><script src='Calculation.js'></script> </head><body>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:25:32.017

您需要先完成链接标签。

试试这个

```
echo "<html><head><link rel='stylesheet' type='text/css' href='style.css' /> <script src='Calculation.js'></script>  </head><body>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T11:27:13.977

似乎链接标签未正确关闭，脚本标签中的双引号未转义。

试试下面的代码：

```
echo "<html><head><link rel='stylesheet' type='text/css' href='style.css'><script src='Calculation.js'></script></head></html>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T11:30:51.130

使用单引号：

```
echo '<html><head><link rel="stylesheet" href="style.css" type="text/css" /> <script type="text/javascript" src="script.js"></script> </head><body>'; 
```

希望能帮助到你

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T11:35:03.390

```
print("<script type=\"text/javascript\" src=\"Calculation.js\"></script>"); 
```

您是否在 Windows 上运行此代码，如果不是，您确定该文件名为“Calculation.js”而不是“calculation.js”？此外，它是否与调用它的 PHP 脚本直接相同？

# javascript - 如何将图像的标题属性链接到弹出 div

> ID：12745105
> 
> 赞同：0
> 
> 时间：2012-10-05T11:17:26.837
> 
> 标签：javascript, html, title

我正在建立一个网站来展示我的珠宝首饰。由于我的页面布局，我有没有对用户可见的描述的图像。

当我查看同事的网站时，我注意到我可能会使用[http://www.sarahschuchard.com/sites/objects.html](http://www.sarahschuchard.com/sites/objects.html)。这是一个轮播 JS，它将图像的 alt 和 title 属性链接到鼠标悬停函数，该函数在 div 中显示这些属性。

我试图隔离这个特定的代码，但我对 JS 的了解非常有限，所以它对我没有用。有人可以帮我实现这个想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:12:50.210

经过一番研究，我想出了一个适合我需要的答案。事实上，我开始考虑使用自定义工具提示来显示附加信息，而不是轮播。

我选择的工具提示是 Tiptip。它本身很容易实现，但它开始干扰我安装的 lightbox2 插件。将鼠标悬停在具有 TITLE 属性的图像链接上时，它仍然显示默认工具提示（自定义工具提示旁边）。

默认工具提示开始使用 A 标签的 TITLE 属性，而不是嵌套的 IMG 标签。省略 TITLE 的选项是不可取的，因为灯箱使用此属性来显示信息。

用 mouseover JS 代码屏蔽 TITLE 与删除 TITLE 属性的效果相同。

经过一些修补和环顾四周，我找到了解决这个问题的方法。

我读到了使灯箱使用其他属性的选项，然后是 A 标签的 TITLE 之一。相应的代码在 JS 文件中很容易找到。（灯箱 2 的第 166 和 174 行附近，我不知道其他灯箱，如插件）。我将其更改为 ALT 属性（SEO 目的），但我认为您可以将其更改为自定义属性以满足您的需要。

这为在 HEAD 标记中插入以下 JS 代码以禁止页面中的默认工具提示铺平了道路，这样搜索引擎仍然可以看到您的属性

```
$(document).ready(function() {
    $('[title]').mouseover(function () {
        $this = $(this);
        $this.data('title', $this.attr('title'));
        // Using null here wouldn't work in IE, but empty string will work just fine.
        $this.attr('title', '');
    }).mouseout(function () {
        $this = $(this);
        $this.attr('title', $this.data('title'));
    });
}); 
```

这是结果[http://www.coenhofhuizen.com/Sites/sieraden.html](http://www.coenhofhuizen.com/Sites/sieraden.html)

与灯箱兼容的自定义工具提示。

希望它可以帮助其他人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:23:51.837

这称为自定义工具提示。您要做的是创建一个容器并将其显示在上`mouseover`，然后将其删除`mouseout`。

例如

```
$('image').mouseover(function (event) {
    $('<div></div>').css({
        'position': 'absolute',
        'left': event.pageX + 10,
        'top': event.pageY + 10,
        'z-index': 100
    }).addClass('tooltip').text($(this).attr('title')).appendTo(document);
}).mouseout(function (event) {
    $('.tooltip').remove();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:22:29.367

您的同事正在网站中使用 Lightbox。您可以在这里免费下载：http: [//lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/) 原则上它很容易安装（查看示例），它使用图像的标题标签作为弹出框的标题。

# wcf - 使用 GetObject() 方法从 Excel VBA 调用 WCF Webservice

> ID：12745115
> 
> 赞同：2
> 
> 时间：2012-10-05T11:18:16.323
> 
> 标签：wcf, web-services, excel, vba

> **可能重复：**
> [如何从 Excel 2003 VBA 调用 WCF 客户端？](https://stackoverflow.com/questions/1013428/how-do-i-call-wcf-client-from-excel-2003-vba)

我想使用 VBA 代码从 Excel 中调用使用 WCF 开发的 Web 服务。我们应该怎么做 ？我已经尝试过该`GetObject()`方法，但在使用此方法时出现语法错误。我想在 Excel 中显示从 Web 服务获取的数据。请帮忙。数据合同如下：`

```
[DataContract] 
public class Data
{
    [DataMember]
    public int Id;
    [DataMember]
    public DateTime LockTime;
    [DataMember]
    public DateTime LoginTime;
    [DataMember]
    public DateTime LastDefenitionDate;
    [DataMember]
    public string NTLogin;
    [DataMember]
    public string SystemName;
} 
```

服务合约如下：

`

```
[ServiceContract]

interface IDataService
{
    [OperationContract]
    List<Data> GetData();
    [OperationContract]
    void SubmitData(Data data);
} 
```

`

访问数据库的DataService如下：

`

[服务行为（InstanceContextMode=InstanceContextMode.Single）]

公共类数据服务：IDataService { 公共静态 SQLConnection SQLDBConnection = new SQLConnection();

```
 #region IDataService Members

    public List<Data> GetData()
    {
        List<Data> datas = new List<Data>();
        try
        {
            if (SQLDBConnection.con.State == ConnectionState.Closed) SQLDBConnection.con.Open();
            datas.Clear();
            SqlCommand sqlcommand = new SqlCommand();
            sqlcommand.Connection = SQLDBConnection.con;
            sqlcommand.CommandText = "select * from tblData";
            sqlcommand.CommandType = CommandType.Text;
            SqlDataAdapter sqladapter = new SqlDataAdapter(sqlcommand);
            DataTable dt = new DataTable();
            sqladapter.Fill(dt);

            Data data = null;
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                data = new Data();
                data.Id = Convert.ToInt32(dt.Rows[i]["id"]);
                data.NTLogin = dt.Rows[i]["NTLogin"].ToString();
                data.SystemName = dt.Rows[i]["SystemName"].ToString();
                data.LockTime = Convert.ToDateTime(dt.Rows[i]["LockTime"]);
                data.LoginTime = Convert.ToDateTime(dt.Rows[i]["LoginTime"]);
                data.LastDefenitionDate = Convert.ToDateTime(dt.Rows[i]["LastDefenitionDate"]);
                datas.Add(data);
            }
        }
        catch (Exception ex)
        {  } 
        return datas;
    }

    public void SubmitData(Data data)
    {
        if (SQLDBConnection.con.State == ConnectionState.Closed) SQLDBConnection.con.Open();
        SqlCommand sqlcommand = new SqlCommand();
        sqlcommand.Connection = SQLDBConnection.con;
        sqlcommand.CommandText = "Insert into dbo.tblData(NTLogin, SystemName, LockTime, LoginTime, LastDefenitionDate) values ('" + data.NTLogin + "','" + data.SystemName + "','" + data.LockTime + "' , '" + data.LoginTime + "', '" + data.LastDefenitionDate + "')";
        sqlcommand.CommandType = CommandType.Text;
        int RowsAffected = sqlcommand.ExecuteNonQuery();
    }

    #endregion
} 
```

`

编辑：

可能的**重复**建议的答案对我来说没有奏效。我的整个代码在这里给出。在发布我的问题之前，我什至检查了该帖子。请检查我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:39:38.603

阅读下面的文章，它详细描述了如何使用 GetObject 从 VBA 代码调用 WCF 服务：

使用 WCF 服务名字对象从 Excel VBA 客户端调用 WCF 服务
[http://damianblog.com/2009/07/05/excel-wcf/](http://damianblog.com/2009/07/05/excel-wcf/)

但它仅适用于简单的 WCF 服务合同。对于更复杂的事情，您需要使用 VSTO

**UPD：**在这种情况下，当使用带有 MEX 合约的 Moniker 时，您应该只使用原始类型和原始类型数组。当您需要使用复杂类型时，例如尝试将它们打包成字符串或使用更高级的技术，如带有 COM 客户端 ( [http://msdn.microsoft.com/en-us/library/ms752245.aspx](http://msdn.microsoft.com/en-us/library/ms752245.aspx) ) 或 VSTO的 WCF Moniker .

# file - 如何将文件源拆分为字符串或单词

> ID：12745117
> 
> 赞同：3
> 
> 时间：2012-10-05T11:18:22.897
> 
> 标签：file, scala, split

我有一个文件，内容如下：

```
"Some","Words","separated","by","comma","and","quoted","with","double","quotes" 
```

文件太大，只能在字符串上读取。

将其拆分为可遍历的字符串的最简单方法是什么，每个元素都是一个单词？

如果它很重要：虽然文件的内容不适合单个字符串，但生成的 Traversable 可能是一个没有问题的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:55:38.227

这是一个使用`stringLit`和`repsep`来自 Scala 解析器组合器的版本。不过，我不会保证它的效率。

```
import scala.util.parsing.combinator.syntactical.StdTokenParsers
import scala.util.parsing.combinator.lexical.StdLexical
import scala.util.parsing.input.StreamReader

import java.io.FileReader

object P extends StdTokenParsers {
  type Tokens = StdLexical

  val lexical = new StdLexical
  lexical.delimiters += ","

  def words : Parser[List[String]] = repsep(stringLit, ",")

  def getWords(fileName : String) : List[String] = {
    val scanner = new lexical.Scanner(StreamReader(new FileReader(fileName)))
    // better error handling wouldn't hurt.
    words(scanner).get
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T16:10:57.450

这是您自己的解决方案的改编版，[`JavaConversions`](http://www.scala-lang.org/api/current/index.html#scala.collection.JavaConversions%24)用于将 Java 迭代器作为 Scala 迭代器进行操作。

```
import java.util.Scanner
import java.io.File
import scala.collection.JavaConversions._

val scanner = new Scanner(new File("...")).useDelimiter(",")
scanner.map(_.trim).map(quoted => quoted.substring(1, quoted.length - 1)) 
```

这给了你一个迭代器。您始终可以使用例如将其转换为列表`.toList`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:52:03.420

我使用 java.util.Scanner 完成了它，而它确实可以工作，我会欣赏更多的 scalaesc 版本。

```
val scanner = new Scanner(new File("""bigFile.txt""")).useDelimiter(",")
var wordList: Vector[String] = Vector()
while (scanner.hasNext()) {
  val quoted = scanner.next()
  val word = quoted.replace("\"", "")
  wordList = wordList :+ word
} 
```

# bash - 为什么 elinks 在 kde 终端上无法正常工作

> ID：12745122
> 
> 赞同：1
> 
> 时间：2012-10-05T11:18:34.580
> 
> 标签：bash, terminal, gnome, kde

我有一个脚本，它从远程网页获取一个单词的含义（翻译英语/土耳其语和土耳其语/英语），并使用 elinks 和简单的 grep 对其进行解析。这是一个非常简单的脚本，但奇怪的是它似乎不适用于我的 yakuake，但它在默认的 gnome 终端或 guake 上运行缓慢。

剧本：

```
#!/bin/bash

url_encode() {
    # http://www.commandlinefu.com/commands/view/4840/url-encode
    # http://stackoverflow.com/questions/296536/urlencode-from-a-bash-script
    echo -n "${@: -1}" | python2 -c "import urllib, sys; print urllib.quote(sys.stdin.readline())"
    # echo "$@" | perl -MURI::Escape -ne 'chomp;print uri_escape($_),"\n"'
}

if [ $1 = "-v" ]; then
  elinks -dump -no-numbering "http://tureng.com/search/$(url_encode $@)" | grep -E '(^\s*Category\s*|>$)' --color=never | less
else 
  elinks -dump -no-numbering "http://tureng.com/search/$(url_encode $@)" | grep -E '(^\s*Category\s*|>$)' --color=never | head -n 6
fi 
```

当我在 gnome 终端上运行它时，这是输出；

```
14:03 ~ $ tureng test
     Category    Turkish  English
   1 General  n. test    trial      >
   2 General  n. test    testing    >
   3 General  n. test    test       >
   4 General  n. test    experiment >
   5 General     test    quiz       > 
```

这是yakuake的输出；

```
14:04 ~ $ tureng test
   <!-- Web.Config Configuration File -->
   <configuration>
       <system.web>
           <customErrors mode="Off"/>
       </system.web>
   </configuration> 
```

我完全迷失了这一点。任何关于为什么会发生这种情况的想法将不胜感激。

# c - 冒泡排序在 Windows 中“有效”，但不适用于 GNU/Linux 上的 GCC

> ID：12745131
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:00.457
> 
> 标签：c, linux, gcc, syntax, gnu

我正在使用 Ubuntu Linux 进行编程。昨天我遇到了一个非常奇怪的问题，它真的很晦涩，很奇怪。

问题是我试图做冒泡排序，逻辑，语法一切都是正确的，但输出是错误的。我在 Windows 中编写了相同的程序，它运行良好。我在 Linux 中使用 Eclipse IDE。可能是什么问题？另一方面，我使用指针（通过引用调用）来完成冒泡排序，但在 Ubuntu 中输出也是错误的，而在 Windows 中输出还可以。我不知道怎么弄明白。

我的冒泡排序代码如下：

```
#include<stdio.h>

void main(void)
{
  int array[] = {4,2,6,3,1,5,8,4,6,1};
  int i=0;
  int j=0;
  for(i=1;i<=10;i++)
    {
      for(j=0;j<=10-i;j++)
        {
          if(array[j]>array[j+1])
            {
              int temp = array[j];
              array[j] = array[j+1];
              array[j+1] = temp;
            }
        }
    }
  for(i=0;i<=9;i++)
    {
      printf("%d\t",array[i]);
    }
} 
```

输出：

```
gcc -o bubblesort.c -o output
./output

2 3 4 1 5 6 4 6 1 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:20:45.327

超出数组的边界是未定义的行为（其中的一个子集是“正确地”行为），这就是程序正在发生的事情。数组使用从零开始的索引，这意味着最后一个有效索引比数组中的元素数小一：

```
/* 10 elements in 'array'. */
int array[] = {4,2,6,3,1,5,8,4,6,1};

for(j=0;j<=10-i ;j++)
{
    if(array[j]>array[j+1]) /* When 'j' is 9 the
                               'array[j + 1]' is
                               out of bounds. */ 
```

改变内`for`循环终止条件：

```
for(j=0;j<=9-i ;j++) 
```

* * *

您可以使用而不是硬编码`9`和`10`整个代码`sizeof(array)/sizeof(array[0])`来获取`array`. 这使得以后更改元素的数量更不容易出错并且更简单`array`：

```
const int ARRAY_SIZE = sizeof(array)/sizeof(array[0]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:22:05.253

这个：

```
for(j=0;j<=10-i;j++) 
```

连同这个：

```
if(array[j]>array[j+1]) 
```

以及您越界访问阵列的其他地方可能是您出现问题的原因。

越界访问数组是*未定义的行为*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:23:24.933

这是冒泡排序的伪代码：

```
for (i = 0; i < 9; i++) {
    for (j = i + 1; j < 10; j++) {
        if (element[i] > element[j]) swap_elements(); 
```

# c# - 在不使用 fileUpload1 组件的情况下获取 HttpPostedFileBase ？将 Zip 文件转换为 HttpPostedFileBase

> ID：12745133
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:04.657
> 
> 标签：c#

嗨，我创建了一个 zipfile，我想在创建后上传它。

我有一种上传文件的方法，但它只接受文件作为**HttpPostedFileBase**。

保存我的 zip 文件后，我将如何将其更改为 HttpPostedFileBase 以便我可以将其传递给我的上传方法。

```
using (ZipFile zip = new ZipFile())
   {
      // add this map to zip
      zip.AddFile(tempFolderPath + PropInfo[7].TagValue, "");
      zip.AddFile(tempFolderPath + "data.xml", "");
      zip.AddFile(tempFolderPath + "dvform.dvform", "");
      zip.AddFile(tempFolderPath + "CS1.pdf", "");
      zip.AddFile(tempFolderPath + "CS2.pdf", "");
      zip.AddFile(tempFolderPath + "CS3.pdf", "");
      zip.AddFile(tempFolderPath + "CS4.pdf", "");
      zip.AddFile(tempFolderPath + "CS5.pdf", "");
      zip.Save(tempFolderPath + "Tester.xap"); //Xap Save Name
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:35:00.627

如果您真的想制作一个 zip 文件，`HttpPostedFileBase`那么您最好的选择可能是创建一个继承自`HttpPostedFileBase`并根据需要覆盖方法的类。

没有太多需要覆盖的东西，它们都应该很容易从文件对象中获取（它们是文件名、内容长度和内容类型以及文件流本身）。

到目前为止，最好的办法是将您的上传方法重构为不需要`HttpPostedFileBase`对象。使其采用更常用的文件对象或流或类似文件（取决于上传需要什么），然后创建一个覆盖`HttpPostedFileBase`并提取它需要传递给您的主要上传方法的位。

不过，重构上传方法可能超出了这个问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:38:01.640

只是一个想法，希望你能以此为基础

```
HttpPostedFile f = new HttpPostedFile();
f.InputStream = new System.IO.FileStream(); //replace this with Stream from your zip
HttpPostedFileBase zipFile = new HttpPostedFileWrapper(f); 
```

# c# - 将 Guid 传递给 IMultiValueConverter

> ID：12745135
> 
> 赞同：1
> 
> 时间：2012-10-05T11:19:10.050
> 
> 标签：c#, wpf, imultivalueconverter

我创建了一个多值转换器，我正在绑定一个 Telerik:RadMenuItem 的可见性属性。此右键单击菜单位于 Telerik 日历控件上的约会中。我想将 ControlID（这是我正在使用的框架的附加属性）传递到我作为参数制作的 IMultiValueConverter 中。因此，我想传入 Guid（它作为转换器中对象数组中的第二个值出现），然后对其进行转换以获取该值，以便我可以进行评估。WPF 不是我的强项，在尝试了很多事情之后，我似乎无法将绑定连接起来。

```
<telerik:RadMenuItem Header="Cancel" x:Name="CancelMenuItem"
                                                   Click="RadMenuItemCancel_Click" 
                                                   myframework:BaseWindow.ControlID="e5c25731-e30e-472e-a5d7-ab190348a7cb">
                        <telerik:RadMenuItem.Visibility>
                            <MultiBinding Converter="{StaticResource SecurityEnumToVisibilityConverter}">
                                <Binding Path="Appointment.AppointmentType" />
                                <Binding ElementName="CancelMenuItem" Path="myframework:BaseWindow.ControlID" />                
                            </MultiBinding>                     
                        </telerik:RadMenuItem.Visibility>
                    </telerik:RadMenuItem> 
```

我在第二个 Binding 标记中缺少什么以成功将 ControlID 的内容传递给我的多值转换器？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:03:08.540

尝试用括号括住您的路径。

Path="(myframework:BaseWindow.ControlID)"

afaik 这告诉 WPF 您正在绑定到附加属性

# ruby-on-rails - 可以使用 Devise 在 Cramp 应用程序中进行身份验证吗？

> ID：12745139
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:28.757
> 
> 标签：ruby-on-rails, ruby, devise, server-sent-events, cramp

我使用 Cramp.in( [http://cramp.in](http://cramp.in) ) 框架创建了一个应用程序。我现在需要为应用程序设置身份验证。在 Rails 中，我为此目的使用了 Device。设备可以在抽筋应用程序中使用还是我应该使用其他东西？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:12:19.397

问题是 Devise 是为 Rails 构建的，因此与其深度耦合。所以你不能使用它。

设计构建在名为 Warden (https://github.com/hassox/warden/wiki) 的 Rack 中间件之上，这听起来可能是一种解决方案，但由于异步而抽筋不能直接使用这些（参见[http:// cramp.in/documentation#rack-middlewares](http://cramp.in/documentation#rack-middlewares)）。

Rack 附带的所有中间件都以异步方式提供（https://github.com/rkh/async-rack），但 Warden 不是其中之一。你可能想花一些时间修改它，让它在异步环境中运行（我想你会让自己有很多朋友这样做:)

结论：您可能想要推出自己的身份验证解决方案。

*由于通过异步模块支持 sinatra，您可能想查看可用的 Sinatra 身份验证解决方案，但我怀疑它们无需任何修改即可运行。*

# ejabberd - ejabberd 服务器域字段

> ID：12745143
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:30.650
> 
> 标签：ejabberd

我尝试在我的 linux 12.04 机器上安装 ejabberd，但我对 ejabberd 服务器域字段的内容有点困惑。我输入了 localhost 但是当我开始时，它会打开一个错误页面。我使用从进程一网站下载的二进制文件进行安装。有人知道该领域究竟应该做什么吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T06:02:50.747

将域名视为将为您服务的名称。例如，如果您在公司 example.com 中为域用户创建 xmpp 服务器，则域为 example.com，因为用户将连接到的帐户 user1@example.com, user2 @ example 。com等...

单个服务器可以服务于不同的域 ejabberd。

正如所讨论的 ppolv，通常与您网络中的域名称一致，您也可以配置，例如，XMPP 协议所需的 DNS 服务器 SRV 记录。

# c++ - Windows 安装程序，成功执行后来自自定义操作的错误 2896

> ID：12745146
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:36.610
> 
> 标签：c++, dll, wix, windows-installer, custom-action

我有一个用 C++ 编写的自定义操作 dll，在安装过程中使用按钮调用它。自定义操作的目的是捕获剪贴板内容并评估内容是否采用有效产品密钥的格式。如果是，则更新“PRODUCTKEY”属性，以及另一个让我知道我们已经成功的属性。

```
<Control Id="PasteButton" Type="PushButton" X="25" Y="176" Width="25" Height="16" Default="yes" Text="Paste" >
    <Publish Event="DoAction" Value="MsiCheckClipboardForKey" Order="1">1</Publish>
    <Publish Property="PRODUCTKEY" Value="[PRODUCTKEY]" Order="2">ClipboardSuccess = 1</Publish>
</Control> 
```

不幸的是，调用此自定义操作后安装失败。但是，通过查看安装日志，我的属性已更改，这往往表明我的自定义操作代码正在成功运行。

> MSI (c) (20:4C) [12:04:55:281]：调用远程自定义操作。DLL：C:\Users\xxxxx\AppData\Local\Temp\MSI5652.tmp，入口点：msiCheckClipboardForKey
> 
> MSI (c) (20!C4) [12:04:57:746]：属性更改：修改 ClipboardSuccess 属性。它的当前值为“0”。它的新值：'1'。
> 
> MSI (c) (20!C4) [12:04:57:746]：属性更改：添加 PRODUCTKEY 属性。它的值为'xxxxx-xxxxx-xxxxx-xxxxx-xxxxx'。
> 
> 操作于 12:04:57 结束：MsiCheckClipboardForKey。返回值 3。
> 
> 调试：错误 2896：执行操作 MsiCheckClipboardForKey 失败。

这是自定义操作代码：

```
#include "StdAfx.h"
#include "Debug.h"

#pragma comment(linker, "/EXPORT:msiCheckClipboardForKey=_msiCheckClipboardForKey@4")

BOOL GetClipboardText ( IN OUT CString& strClipBoardText)
{
    strClipBoardText = _T("");
    BOOL bOK = FALSE;
    UINT uFormat = 0;
    // We need to explicitly query the clipboard for UNICODE text 
    // if we have a UNICODE application
#ifdef _UNICODE
     uFormat = CF_UNICODETEXT;
#else
     uFormat = CF_TEXT;
#endif
    if ( ::IsClipboardFormatAvailable ( uFormat ) )
    {
        if ( ::OpenClipboard ( NULL ) )
        {
            HANDLE hClipBrdData = NULL;
            if ( HANDLE hClipBrdData = ::GetClipboardData ( uFormat ) )
            {
                if ( LPTSTR lpClipBrdText = ( LPTSTR ) ::GlobalLock ( hClipBrdData ) )
                {
                     MessageBox("Clipboard Text",lpClipBrdText,NULL,NULL);
                     strClipBoardText = lpClipBrdText;
                    ::GlobalUnlock ( hClipBrdData );
                    bOK = TRUE;
                }
            }
            ::CloseClipboard();
        }
    }
    return bOK;
 }

extern "C" UINT __stdcall msiCheckClipboardForKey(MSIHANDLE hMSI)
{
    CString strClipboardText ( _T("") );
    if ( GetClipboardText ( strClipboardText ) ) 
    {
        DebugMsg ( hMSI, _T("Found clipboard text") );

        strClipboardText.Trim();
        // Look at the length.  Is it 25 (wih no dashes/slashes) or 29 (with dashes/slashes)?
        BOOL bValidLength = strClipboardText.Find ( '-' ) != -1 || strClipboardText.Find ( '/' ) != -1 ? strClipboardText.GetLength() == 29 : strClipboardText.GetLength() == 25;

        DebugMsg ( hMSI, _T("Is it a product key? %b",bValidLength) );

        if ( bValidLength )
        {
            //strClipboardText.Remove ( '-' );
            //strClipboardText.Remove ( '/' );

            MessageBox("Formatted Clipboard Text",strClipboardText,NULL,NULL);

            MsiSetProperty(hMSI, "ClipboardSuccess", "1");
            MsiSetProperty(hMSI, "PRODUCTKEY", strClipboardText);

            return 0;
        }
    }
    return 1;   // None-zero is error state
} 
```

不确定问题可能是什么，甚至更多是因为在正确设置属性时似乎执行了自定义操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:00:39.157

在整理添加到这个问题的代码并重建后，我发现只有当剪贴板上有一个未被评估为产品密钥格式的字符串时，我才会收到错误消息。因此自定义操作返回 1。我相信这是我的安装失败的原因。返回值 1 显然会导致安装错误。

如果我错了，请纠正我，但这已经解决了问题。

# c - 为什么在 C 中会发生格式化字符串攻击？

> ID：12745147
> 
> 赞同：2
> 
> 时间：2012-10-05T11:19:50.970
> 
> 标签：c, printf, buffer-overflow, format-string

我知道格式化字符串攻击发生在格式化的 I/O 函数需要比提供的参数更多的参数时。

在 C 中，

读取内存位置的一个示例：

```
printf("%x"); // this prints a memory address location in the stack 
```

覆盖内存位置的另一个示例：

```
printf("Overwritten%n"); //this prints the number of chars in "Overwritten" 
```

我的问题是：为什么这两种情况都会发生？为什么在格式化字符串中只有 %x 而没有提供相应的值会在内存中打印一个地址？那个地址到底是什么？我知道它会发生，但到底发生了什么？

覆盖也一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:28:20.063

发生的是未定义的行为。printf 不知道有没有对应的值。它尝试访问您调用的第二个参数（您没有提供），并访问一些随机内存值。

对于`"overwritten%n"`, %n 将写入的字符数存储在内存中，直到您调用 %n。如果你调用 if 时没有传递正确的地址，它会在一个随机的地方写一些东西，有可能破坏你的记忆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:31:56.903

鉴于 C 被命名为“高级汇编程序”，答案就在于它的编译器结构。`printf`是一个函数，它接受可变数量的参数，而无需检查是否所有参数都被实际提供。因此，根据该函数在编译器级别接受参数的方式，可能会出现以下情况：

首先，解析传递给 printf 的字符串，导致随后调用内部函数，在第二种情况下将输出字符串 'Overwritten'（在第一种情况下，格式化字符串的第一个符号是 '%'这表示一个参数）。然后，当请求打印一个参数时，调用相应的原始数据打印例程，参数是接下来应该放在堆栈中的内容（偏移量在编译时计算）。在 的情况下`%x`，没有参数，并且要打印的未更改字符串为空，因此未分配，因此堆栈中的下一个 32 位值是当前返回地址，即由操作系统在 EXE 加载时生成的返回地址时间，实际上是通过`call printf_hex_address`汇编指令。攻击显然是基于这样一个事实，即如果处理程序实际上是持久存在于内存中的，并且不会被交换，那么这个地址就是程序地址空间中的一个可写内存位置。为什么会出现“Overwritten”的长度，可以通过内部设计的字符串操作例程来解释，将字符串的实际长度传入其中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:29:54.200

这是因为`printf`不知道程序员的意图。当它在格式字符串中看到格式标识符时，它会在那里格式化适当的参数。

```
printf("%x"); 
```

需要一个附加参数（通常存储在寄存器或堆栈中）。由于程序员在此调用中没有告诉编译器提供额外`printf`的参数，因此将打印存储在哪里期望在那时找到参数的任何内容。

出于优化原因，编译器通常不会在调用下一个函数之前清除寄存器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T11:28:50.693

**可能对您有帮助：**
我猜您正在 Windows 中工作。没有进行严格的检查。
我在Linux上尝试过同样的警告。

> int main(){
> printf("%x");
> printf("覆盖的%n");
> }

给出以下警告：
$ gcc test.c
test.c: In function 'main':
test.c:4: warning: too little arguments for format
test.c:5: warning: too little arguments for format

# maven - 在 pom.xml 中强制从父 POM 运行配置文件

> ID：12745148
> 
> 赞同：0
> 
> 时间：2012-10-05T11:19:53.583
> 
> 标签：maven

我有大约 30 个项目，其中 6 个必须有特殊（但相同）的构建过程。所有这些项目都继承自单亲。我已经在父级中定义了特殊的构建过程。它包括几个插件和大量配置。

继承结构是这样的：

```
- global-parent (this is the place where special profile is defined)
   -a-parent
      -a-ear
      -a-war
      -a-ejb
      -a-special <--
   -b-parent
      -b-ear
      -b-war
      -b-ejb
      -b-special <--
   -c-parent
      -c-ear
      -c-war
      -c-ejb
      -c-special <--
  etc... 
```

所以我不能让那些特殊的项目继承另一个 pom。

如何在 pom.xml 中的那些特殊项目中设置“标志”以始终**运行**`special-profile`？

现在我已经设置了 profile/activation/file/extsts 并在每个特殊项目中创建了特殊的空标记文件，但这太难看了。我也尝试使用 maven-properties-plugin 设置一些系统属性标志，但它仍然很难看。

一定有更优雅的方式。这是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:29:39.293

执行此操作的标准方法是使用两个级别的父项目。我已经用一个“global-parent”和一个“webapps-parent”完成了这项工作，它具有仅用于 webapp 组件的通用配置/配置文件。但是，我观察到您需要类似“多重继承”之类的东西，这在 Maven 中并不完全存在。

否则，在我看来，“文件存在”激活是可以接受的。

**附录**

在不知道特殊模块到底有什么“特殊”的情况下，很难回答“这是糟糕的设计吗？”这个有点主观的问题。

也许封装所有其他插件的自定义插件会“更好”或“更 Maven-ish”，但归根结底 - 您的构建是否可维护且易于运行（即`svn co project; cd project; mvn package`）？

如果是这样，你已经实现了你的目标。

# ajax - 我将 bootstrap.js 用于选项卡。但是当单击选项卡时，我无法执行 ajax 请求来加载链接

> ID：12745149
> 
> 赞同：4
> 
> 时间：2012-10-05T11:19:53.060
> 
> 标签：ajax, tabs, twitter-bootstrap

我的html

```
 <ul class="nav nav-tabs tabs-up" id="friends">
      <li><a href="http://localhost:3000/contacts" data-target="#contacts" class="media_node active span" id="contacts_tab" data-toggle="tabajax" rel="tooltip"> Contacts </a></li>
      <li><a href="http://localhost:3000/follows/friends_list" data-target="#friends_list" class="media_node span" id="friends_list_tab" data-toggle="tabajax" rel="tooltip"> Friends list</a></li>
      <li><a href="http://localhost:3000/follows/awaiting_request" data-target="#awaiting_request" class="media_node span" id="awaiting_request_tab" data-toggle="tabajax" rel="tooltip">Awaiting request</a></li>
    </ul> 
```

```
 <div class="tab-pane active" id="contacts">

      </div>
      <div class="tab-pane" id="friends_list">

      </div>
      <div class="tab-pane  urlbox span8" id="awaiting_request">

      </div> 
```

我的 JavaScript 代码：

```
 $('[data-toggle="tabajax"]').click(function (e)
    {
        e.preventDefault()
    var loadurl = $(this).attr('href')
    var targ = $(this).attr('data-target')

    $.get(loadurl, function(data) {

      $(targ).html(data)
      });

    $(this).tab('show')
     return false;

 }); 
```

我已经分别给出了标签的链接。但是当单击选项卡时，我无法在页面中呈现这些链接。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-06T01:19:17.733

对我来说似乎工作正常：

## [JSFiddle](http://jsfiddle.net/mmfansler/2eTSL/)

我添加到您的代码中的唯一代码（除了对 ajax 调用使用一些要点之外）是将选项卡窗格放在`<div class="tab-content">`.

# uitableview - 故事板中的自定义表格视图单元格

> ID：12745162
> 
> 赞同：0
> 
> 时间：2012-10-05T11:20:48.047
> 
> 标签：uitableview, uiscrollview, storyboard

我有一个很奇怪的情况。我使用故事板是为了与时俱进。我有一个视图控制器，其中`UIScrollView`有 UITableView 和自定义表格视图单元格。所以我的问题是：如何从滚动视图中的故事板制作自定义表格视图单元格，因为之前我曾经制作一个带有自定义单元格的单独笔尖。但现在我收到此错误：“NIB 数据无效。” 所以，请建议我任何解决方案或想法如何解决我的问题。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:17:25.517

我有同样的问题。原来我已经在 Storyboard 文件的 Interface Builder Document 窗格中选中了“Use Autolayout”。在 iOS 5 上运行时，这会引发“无效的 NIB”错误。

# barcode - 检测图像是否包含条形码

> ID：12745167
> 
> 赞同：0
> 
> 时间：2012-10-05T11:20:56.170
> 
> 标签：barcode, zbar-sdk

是否可以通过使用 Zbar API 来检查图像是否包含条形码？这是一种备用措施，如果应用程序无法获取条形码值，让它检查它是否可能包含条形码，如果有，用户可以稍后手动验证它。

我已经探索了很多，但没有取得重大成功。如果不是 ZBar，还有其他可以做得好的开源库吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:24:38.160

您需要的是一个检测器，即能够定位条形码（如果有），因此只需根据检测结果返回是或否。

恕我直言，Zbar 没有提供足够通用的 API 来执行此操作，因为它公开了一个高级扫描仪接口 ( `zbar_scan_image`)，一方面结合了检测和解码，另一方面是一个纯解码器接口。

您绝对应该参考这篇论文：[移动设备上的稳健一维条码识别](http://www.vis.uni-stuttgart.de/uploads/tx_vispublications/thesis.pdf)。它包含与检测步骤相关的整个部分，包括伪算法 [1] - 请参阅**4\. 定位条形码**。但是没有现成的开源库：您必须根据所描述的技术实现自己的检测器。

最后，可以使用更实用/更简单的技术，具体取决于您计划使用的输入图像类型（是否有任何旋转？模糊？是关于实时处理图像还是视频流？）。

* * *

[1] 此外，我想说在此备用步骤中使用与第一步中使用的算法不同的算法是个好主意。

# apache - 在多主机环境中获取具有干净 url 的参数

> ID：12745174
> 
> 赞同：1
> 
> 时间：2012-10-05T11:21:14.333
> 
> 标签：apache, .htaccess, url-rewriting, clean-urls

网站根目录包含三个目录`a,b,c`，它们都作为不同域的根目录

我`.htaccess`在目录中创建了一个`b`并向其中添加了以下规则

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php
RewriteRule ^([^/]*)/?([^/]*)/$ /b/sample-page?bbi=$1&bbl=$2 [L] 
```

代替上面的最后一行，我也尝试过

```
RewriteRule ^b/([^/]*)/([^/]*)$ /b/sample-page?bbi=$1&bbl=$2 [QSA,L] 
```

使用上述规则

`http://testsite.com/b/pageone.php`成功改写为

```
http://testsite.com/b/pageone 
```

但`http://testsite.com/b/sample-page.php?bbi=value1&bbl=value2`

被重写为`http://testsite.com/b/sample-page?bbi=value1&bbl=value2`而不是

`http://testsite.com/b/sample-page/value1/value2` 或者

```
http://testsite.com/sample-page/value1/value2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:54:42.660

您需要在`L`其他规则中添加一个标志：

```
RewriteRule ^(.*)$ $1.php [L] 
```

要处理另一种情况，您需要在该规则**之前**添加一条规则。

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/b/([^/]+)/([^/]+)/([^/]+)
RewriteCond %{DOCUMENT_ROOT}/b/%1.php -f
RewriteRule ^/?([^/]+)/([^/]+)/([^/]+) $1.php?bbi=$2&bbl=$3 [L] 
```

这应该是这样的，所以当你去的时候`http://testsite.com/b/sample-page/value1/value2`，你会得到内容`/b/sample-page.php?bbi=value1&bbl=value2`

# css - 将 div 定位到表格的右侧

> ID：12745179
> 
> 赞同：1
> 
> 时间：2012-10-05T11:21:26.097
> 
> 标签：css

我有以下布局：

![在此处输入图像描述](../Images/e08c6429bba44cd4f0b17420223ce4c5.png)

我想将 div 放在桌子的右边。我想控制垂直（相对于顶部）和水平（相对于页面的垂直中心）。

有人愿意放弃一个有效的 CSS 示例吗？

[使用 jsfiddle 的当前状态](http://jsfiddle.net/2eAV6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:27:10.587

我想你想要这个

**CSS**

```
.contant{
width:200px;
  height:200px;
  border:solid 3px red;
  position:relative;
}
.out{
width:50px;
  height:50px;
  border:solid 3px green;
position:absolute;  right:-65px;
  top:100px;
} 
```

**HTML**

```
<div class="contant">

  <div class="out"></div>

</div> 
```

***[现场演示](http://tinkerbin.com/z0XuRF4w)***

**更新**了-----现在你可以习惯了 -----

```
<table>
<tr>
<td>
<div class="contant"> 
<div class="out"></div>        
</div>
</td>
 </tr>
 </table> 
```

# git - 编写我自己的脚本来解决合并时的 git 冲突

> ID：12745184
> 
> 赞同：4
> 
> 时间：2012-10-05T11:21:31.893
> 
> 标签：git, merge

## 问题

有没有什么方法可以编写一个脚本来挂钩 git 的合并过程并在合并时自动解决以下合并冲突？

## 设想

我们有一个由 git 控制的文件版本，其中（除其他外）包含所有必须具有递增整数值的定义。

```
MY_CONSTANT = 0xB;
ANOTHER_CONSTANT = 0xC; 
```

这个文件经常被多个开发者同时编辑，合并起来很痛苦：

开发人员 1 补充说：

```
DEV1_CONSTANT = 0xD; 
```

开发人员 2 补充说：

```
DEV2_CONSTANT = 0xD; 
```

合并后，我们实际上希望文件看起来像：

```
MY_CONSTANT = 0xB;
ANOTHER_CONSTANT = 0xC;
DEV1_CONSTANT = 0xD;
DEV2_CONSTANT = 0xE; 
```

（最后一行已更改为***0xE***。）

但是，git 会产生合并冲突（如预期的那样）。我希望自动解决此文件上的冲突。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T08:19:21.530

参考[gitook](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)文档。阅读`post-merge`钩子的描述：

> 如果由于冲突导致合并失败，则此钩子不会影响 git merge 的结果并且不会执行。

在当前版本的 git 中，没有类似`merge-conflict-hook`.

但是，您仍然可以实现自己的脚本来处理此问题。伪代码可能是这样的：

```
system('git fetch origin master')
status = system('git merge origin/master')
if status!=0 && check_enum_conflict()
  resolve_enum_conflict()
end 
```

实际的实现会相当复杂。你需要：

1.  编写脚本来执行 git 命令。
2.  检查合并的结果。查看枚举文件是否冲突。
3.  解析枚举文件并尝试以编程方式解决冲突。
4.  处理所有可能的情况。前任。如果其他文件也发生冲突怎么办？

这将是一项非常复杂的工作。如果你觉得值得就去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:37:23.933

没有版本控制系统可以自动解决这些冲突，因为它无法知道这些值在任何地方都无关紧要。

在我看来，只要它们不同且递增，您就不会关心分配给每个常量的值。您是否考虑过为这些常量使用枚举并让编译器在编译时分配枚举常量的值？

我想发布一个示例，但您没有提及您使用的是哪种编程语言。

# java - 将参数传递给 JDBC PreparedStatement

> ID：12745186
> 
> 赞同：27
> 
> 时间：2012-10-05T11:21:49.630
> 
> 标签：java, mysql, jdbc

我正在尝试为我的程序制作验证类。我已经建立了与 MySQL 数据库的连接，并且已经在表中插入了行。该表由`firstName`、`lastName`和`userID`字段组成。现在我想通过构造函数的参数选择数据库上的特定行。

```
import java.sql.*;
import java.sql.PreparedStatement;
import java.sql.Connection;

public class Validation {

    private PreparedStatement statement;
    private Connection con;
    private String x, y;

    public Validation(String userID) {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/test", "root", "");
            statement = con.prepareStatement(
                    "SELECT * from employee WHERE  userID = " + "''" + userID);
            ResultSet rs = statement.executeQuery();
            while (rs.next()) {
                x = rs.getString(1);
                System.out.print(x);
                System.out.print(" ");
                y = rs.getString(2);
                System.out.println(y);
            }
        } catch (Exception ex) {
            System.out.println(ex);
        }
    }
} 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T11:24:22.233

您应该使用该[`setString()`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)方法来设置`userID`. 这既可以确保语句格式正确，又可以防止`SQL injection`：

```
statement =con.prepareStatement("SELECT * from employee WHERE  userID = ?");
statement.setString(1, userID); 
```

[Java 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中有一个关于如何`PreparedStatement`正确使用 s 的很好的教程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T11:25:22.397

你的查询有问题。。

```
 statement =con.prepareStatement("SELECT * from employee WHERE  userID = "+"''"+userID);
   ResultSet rs = statement.executeQuery(); 
```

您正在使用 Prepare Statement.. 所以您需要使用`statement.setInt()`或`statement.setString()`根据您的类型来设置参数`userId`

**将其替换为： -**

```
 statement =con.prepareStatement("SELECT * from employee WHERE  userID = :userId");
   statement.setString(userId, userID);
   ResultSet rs = statement.executeQuery(); 
```

或者，您可以使用`?`代替命名值 - `:userId`..

```
 statement =con.prepareStatement("SELECT * from employee WHERE  userID = ?");
   statement.setString(1, userID); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T11:27:17.697

如果您使用准备好的语句，您应该像这样使用它：

```
"SELECT * from employee WHERE userID = ?" 
```

然后使用：

```
statement.setString(1, userID); 
```

`?`将在您的查询中替换为传递给`setString`方法的用户 ID。

看看[这里](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)如何使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T11:25:08.913

做这样的事情，也可以防止[SQL 注入攻击](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)

```
statement = con.prepareStatement("SELECT * from employee WHERE  userID = ?");
statement.setString(1, userID);
ResultSet rs = statement.executeQuery(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T11:26:42.070

您可以使用 '？' 使用 PreparedStatments 在字符串中设置自定义参数。

```
statement =con.prepareStatement("SELECT * from employee WHERE  userID = ?");
statement.setString(1, userID);
ResultSet rs = statement.executeQuery(); 
```

如果您直接在查询中传递 userID，那么它可能会受到**[SQL INJECTION Attack 的攻击。](http://en.wikipedia.org/wiki/SQL_injection)**

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-08-24T18:31:01.993

问题是您需要添加“';” 在末尾。

# android - onCreate 方法中的 OnClickListener 错误

> ID：12745192
> 
> 赞同：1
> 
> 时间：2012-10-05T11:21:57.397
> 
> 标签：android

我是android的初学者。我使用此代码，但运行应用程序模拟器时显示异常。

```
 public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btnpredef = (Button) findViewById(android.R.id.button1);
    btnpredef.setOnClickListener(new View.OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            progressbar = ProgressDialog.show(MainActivity.this, "","LOADING...");
            progressbar.setCancelable(true);
        }
    });
} 
```

调试来自**new OnClickListener()**的捕获错误。

感谢帮助我。

日志猫：

```
10-05 15:05:01.499: D/AndroidRuntime(383): Shutting down VM
10-05 15:05:01.499: W/dalvikvm(383): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-05 15:05:01.509: E/AndroidRuntime(383): FATAL EXCEPTION: main
10-05 15:05:01.509: E/AndroidRuntime(383): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app007/com.example.app007.MainActivity}: java.lang.NullPointerException
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.os.Looper.loop(Looper.java:123)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-05 15:05:01.509: E/AndroidRuntime(383):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 15:05:01.509: E/AndroidRuntime(383):  at java.lang.reflect.Method.invoke(Method.java:521)
10-05 15:05:01.509: E/AndroidRuntime(383):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-05 15:05:01.509: E/AndroidRuntime(383):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-05 15:05:01.509: E/AndroidRuntime(383):  at dalvik.system.NativeStart.main(Native Method)
10-05 15:05:01.509: E/AndroidRuntime(383): Caused by: java.lang.NullPointerException
10-05 15:05:01.509: E/AndroidRuntime(383):  at com.example.app007.MainActivity.onCreate(MainActivity.java:25)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-05 15:05:01.509: E/AndroidRuntime(383):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-05 15:05:01.509: E/AndroidRuntime(383):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:29:30.330

删除安卓

```
Button btnpredef = (Button) findViewById(android.R.id.button1); 
```

然后去做

```
Button btnpredef = (Button) findViewById(R.id.button1); 
```

参考

```
ProgressDialog progressBar; 
```

然后添加这一行

```
progressBar = new ProgressDialog(v.getContext()); 
```

前

```
 progressbar = ProgressDialog.show(MainActivity.this, "","LOADING..."); 
```

并在最后添加这一行

```
progressBar.show(); 
```

这是一个可以帮助您的[链接。](http://www.mkyong.com/android/android-progress-bar-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:26:35.770

只需更换新`View.OnClickListener()`的`new OnClickListener()`

```
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
Button btnpredef = (Button) findViewById(R.id.button1);
btnpredef.setOnClickListener(new OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
        progressbar = ProgressDialog.show(MainActivity.this, "","LOADING...");
        progressbar.setCancelable(true);
        progressbar.show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:30:02.020

```
public class MainActivity extends Activity{ 
```

`ProgressDialog progressbar; <----`

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button btnpredef = (Button) findViewById(android.R.id.button1);
    btnpredef.setOnClickListener(OnClickListener()   <---
    {
        @Override
        public void onClick(View v) 
        {
            progressbar = ProgressDialog.show(v.getContext(), "","LOADING..."); <--
            progressbar.setCancelable(true);
        }
    });
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:13:48.313

我将**android.R.id.button1**替换为**R.id.button1** 感谢@Pain

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T12:01:36.257

当您没有将活动名称正确声明到清单文件中时，会发生此异常。将您的包名称和活动名称检查到清单文件中。

# xcode4 - 单击一个表格视图的表格单元时加载另一个表格视图返回错误：“程序收到信号SIGABRT”

> ID：12745199
> 
> 赞同：0
> 
> 时间：2012-10-05T11:22:09.570
> 
> 标签：xcode4, uitableview

我正在创建一个应用程序，其中有两个 UIViews，并且在这些 UIViews 中我正在加载 Tableviews。当我单击一个 TableView 中的一个表格单元时，我无法将其重定向到另一个 TableView 并出现错误：程序收到信号 SIGABRT。但如果我想在单击表格单元时加载 UIView，它会完美执行。我不明白我哪里出错了......这是我正在编写的代码

```
 ViewController1:
   #import ViewController2.h"

     -(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        ViewController2 *v2 = [ViewController alloc] initWithNibName:@"ViewController2" bundle:[NSBundle mainBundle]];
        [self presentModalViewController:v2 animated:NO]; **//getting error at this line**
        [v2 release];

    }
    ViewController2.h
    #import"ViewController1.h"
    - (void)viewDidLoad
    {
    [super viewDidLoad];
   tableView1 = [[UITableView alloc]initWithFrame:CGRectMake(10, 10, 320, 460)];
    tableView1.delegate = self;
    tableView1.dataSource = self;
    [self.view addSubview:tableView1]; 

   } 
```

无法理解可能导致此错误的原因..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T09:50:17.263

也许这是错误

```
 ViewController2 *v2 = [ViewController alloc] initWithNibName:@"ViewController2" bundle:[NSBundle mainBundle]]; 
```

您已分配 ViewController 而不是**ViewController2**

试试这个，它应该工作，我猜。

```
 ViewController2 *v2 = [ViewController2 alloc] initWithNibName:@"ViewController2" bundle:[NSBundle mainBundle]]; 
```

# ios - 知道一个像素是透明的

> ID：12745204
> 
> 赞同：0
> 
> 时间：2012-10-05T11:22:16.423
> 
> 标签：ios, core-graphics

我知道如何从图像中获取每个像素及其 RGBA 值。我的问题是如何确定像素是否透明。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:25:45.527

检查 rgba 值的 alpha 部分是否等于 0，如果是，则表示像素是完全透明的。如果它等于 255 则根本不透明。

# css - 如何对齐 GWT 中选定 CellTable 列的文本？

> ID：12745208
> 
> 赞同：2
> 
> 时间：2012-10-05T11:22:27.187
> 
> 标签：css, gwt, gwt2

我想右对齐 CellTable 中的数值。我已经尝试寻找为选定列分配样式名称的方法，以便我可以将其与 CSS 对齐，但仍然无法弄清楚。

![在此处输入图像描述](../Images/27233ee770db7737d29f265966b82207.png)

我也试过这个，但没有用，

```
itemPriceColumn.setHorizontalAlignment(HasAlignment.ALIGN_RIGHT); 
```

根据 GWT 文档，新的水平对齐将在下一次呈现表格时应用......我还不知道我必须传递哪些参数，因为它是 render() 方法所必需的。

所以我希望得到涉及 CSS 的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T19:59:22.207

好吧，你所拥有的几乎是正确的。这对我有用，没有css：`myColumn.setHorizontalAlignment(HasHorizontalAlignment.ALIGN_RIGHT);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T06:02:37.473

```
unitPriceColumn.setCellStyleNames("alignRight");

totalAmountColumn.setCellStyleNames("alignRight"); 
```

`alignRight`你的 CSS 的名称在哪里。

```
.alignRight {text-align:right} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:13:29.130

选项 1：在父元素（在 CellTable 中）上使用 float:right。

选项 2：创建自己的 TextCell 并实现 render 方法以生成如下内容：

```
<div style="width:100%; text-align:center;"> your value </div> 
```

# c# - 使用内部函数时 P/Invoke Fortran Dll 导致未处理的异常

> ID：12745213
> 
> 赞同：0
> 
> 时间：2012-10-05T11:22:36.313
> 
> 标签：c#, pinvoke, fortran

Fortran 代码

```
FUNCTION ComputeSquareRoot(inputValue) 
IMPLICIT NONE
!DEC$ ATTRIBUTES ALIAS:'ComputeSquareRoot' :: ComputeSquareRoot
!DEC$ ATTRIBUTES DLLEXPORT :: ComputeSquareRoot
REAL*8 :: inputValue   
REAL*8 :: ComputeSquareRoot
    ComputeSquareRoot = SQRT(inputValue)
RETURN 
END FUNCTION 
```

C# 代码

```
 [DllImport("TestingFortranDll.dll", CallingConvention = CallingConvention.Cdecl)]
    static extern double ComputeSquareRoot(ref double inputValue);

    /// <summary>
    /// Wrapper method for ComputeSquareRoot.
    /// </summary>
    /// <returns></returns>
    public static double CallingComputeSquareRoot()
    {
        var inputValue = 100.0;

        return ComputeSquareRoot(ref inputValue);
    } 
```

例外

在您的应用程序的组件中发生未处理的异常......

无法加载 DLL“TestingFortranDll.dll”：找不到特定模块。（HRESULT 例外：0x8007007E）

仅当我尝试使用 SQRT 等隐式函数时才会发生此异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:27:46.123

这似乎 dll 缺少一些依赖项。使用[Dependency Walker](http://www.dependencywalker.com/)查找缺少哪些 dll

[这里](http://forums.ni.com/t5/LabWindows-CVI/I-can-t-run-my-DLLs-without-having-Intel-Fortran-Composer-in-the/td-p/1451790)有一些关于查找 Fortran 可再发行文件的信息。您需要向他们提供您的 dll。为了测试，只需将它们复制到同一个目录，看看它是否有帮助。

# url - cakephp 2.x 查询 url 参数未传递 true

> ID：12745214
> 
> 赞同：0
> 
> 时间：2012-10-05T11:22:37.857
> 
> 标签：url, cakephp, routing, cakephp-2.0

我有以下 url：[http](http://www.domain.com/admin/posts/list_media?rand=554&hash=&id=25) ://www.domain.com/admin/posts/list_media?rand=554&hash=&id= 25 Cakephp 在实时服务器上生成 Missing View 错误，本地服务器对此 url 没有问题。

控制器已加载，但在加载视图时出现问题。当我删除网址中问号后的所有内容时，它工作正常。

参数到达控制器：

```
Array ( 
    [rand] => 554 
    [hash] => 
    [id] => 25 
) 
```

可能是什么问题？

# php - 解析 css 并删除给出错误的规则

> ID：12745215
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:22:40.603
> 
> 标签：php, parsing, css-parsing, php-parser

我想删除给出错误的css规则，例如这里是示例

```
.banneritem {
   border: 1px solid #CED4E0;
   border color: #CBCBCB;// is not valid cause it actually refers to border-color missing (-)
   margin-bottom: 10px;
} 
```

是否有任何框架或库会从文件中省略这种 css 规则。

我在这里使用 sabberworm css 解析器我的示例代码

```
 if ($loadedContents != ""){
       preg_match_all('/display: none/is', $loadedContents, $matchvalue);
       if (count($matchvalue[0]) > 0) {
       $oCssParser = new Sabberworm\CSS\Parser($loadedContents);
       $oDoc = $oCssParser -> parse();
          foreach ($oDoc->getAllRuleSets() as $oRuleSet) {
              if ($oRuleSet instanceof Sabberworm\CSS\RuleSet\AtRule) {
                     break;
               }
               $sSelector = $oRuleSet -> getSelectors();
               $sSelector = $sSelector[0] -> getSelector();
               $aDisplayRule = $oRuleSet -> getRules('display');
               if (count($aDisplayRule) > 0) {
                   $aValues = $aDisplayRule['display'] -> getValues();
                   if ($aValues[0][0] == "none") {
                          $displayValue[] = "display:none;";
                          $displaySelector[] = $sSelector;
                    }
                }
                $bDisplayRule = $oRuleSet -> getRules('visibility');
                if (count($bDisplayRule) > 0) {
                    $bValues = $bDisplayRule['visibility'] -> getValues();
                    if ($bValues[0][0] == "hidden") {
                        $visibilityValue[] = "visibility:hidden;";
                        $visibilitySelector[] = $sSelector;
                }
              }
            }
           }
         } 
```

我在这里处理所有 css 规则并同时找到 display:none 规则，由于这个错误的规则，我遇到了致命错误。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T09:42:57.013

是的，我找到了解决方案，

首先，我输入了与上述问题相同的代码，然后我创建了新的虚拟 css 并创建了新函数，如下所示，

为此，我使用两个类名称是 1)。2). 风格牛

```
 require "../stylecow/autoload.php";

  //for css rules omition

  require('../csstidy/class.csstidy.php');

function makeDummyCssFile($html)
{
        $cssTidy = new csstidy();
        $newCss ="";
      foreach ($html->find('link') as $e) {
        $cssHrefs = $e -> href;
        preg_match_all('~favicon~is', $cssHrefs, $feviMatch);
        if (count($feviMatch[0]) == 0) {
            preg_match_all('~(\bhttp|https\b)~is', $cssHrefs , $isThirdPartyCss);
            if(count($isThirdPartyCss[0]) >  0)
            {
                $loadedHrefs = $cssHrefs;
            }
            else
            {
                preg_match_all('~' . SITE_NAME . '~is', $cssHrefs, $match);
                if (count($match[0]) == 0) {
                    $loadedHrefs = SITE_NAME . $cssHrefs;
                } else {
                    $loadedHrefs = $cssHrefs;
                }
            }

                $loadedContents = file_get_contents($loadedHrefs);
                $css = Stylecow\Parser::parseFile($loadedContents);
                $newCss.= $css;
        }
    }

             $result = $cssTidy->parse($newCss);

             $newCss = $cssTidy->print->plain();
             if($result)
             {

                 foreach($cssTidy->log as $line => $array)
                        {
                           // echo "<pre>";print_r($array);
                            $array_size = count($array);
                            for($i = 0; $i < $array_size; ++$i)
                            {
                                if($array[$i]['t'] == "error")
                                {

                                   $newCss =   preg_replace("~(".$array[$i]['m']['selector']."[^\}]*\})~is", "", $newCss);#qtip-overlay div[^\}]*\}
                                }

                            }
                        }

             }
        $cssName = explode("http://", SITE_NAME);
        $cssFileName = str_replace(".", "-", str_replace("/","",$cssName[1])) . "-" . date('Y-m-d') . ".css";
        $str = "";
        $myFile = DUMYPATH . $cssFileName;
                    if ($myFile != "") {

                        $fh = fopen($myFile, 'w+') or die("can't open file");
                        $stringData = $newCss;
                        fwrite($fh, $stringData);
                        fclose($fh);
                    }
        return $cssFileName;
} 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T11:31:32.033

我建议使用基于 LESS、SASS 或 SCSS 的更强大的解析器。如果您使用[Compass](http://compass-style.org/)，一个 CSS 预处理框架，它将帮助您编写更好的结构化代码并验证您的 CSS。有一些编译时命令可能对您有用：

```
-q, --quiet                      Quiet mode.
    --trace                      Show a full stacktrace on error
    --force                      Allows compass to overwrite existing files.
    --dry-run                    Dry Run. Tells you what it plans to do.
    --boring                     Turn off colorized output. 
```

# javascript - 如果禁用 javascript，则将 div（具有类似使用 JS 创建的按钮的行为）变为链接

> ID：12745216
> 
> 赞同：0
> 
> 时间：2012-10-05T11:22:55.580
> 
> 标签：javascript, hyperlink, noscript

我有 6 个具有 onclick javascript 的 div。当您单击它们时，网站的一部分会发生变化。

如果禁用了 javascript，我希望这些 div 包含链接。（而不是将页面链接的一部分更改为另一个页面）

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:26:06.687

你不能只使用html中的链接并在需要它成为按钮时将其与js交换吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T11:26:53.660

```
<div>
   <a href="noscript.htm" onclick="window.location='script.htm';return false;">button</a>
</div> 
```

像这样的东西？ [http://jsfiddle.net/C6BJT/](http://jsfiddle.net/C6BJT/)

# gcc - 如何强制 gcc 在 asm 中使用两个不同的寄存器来操作数？

> ID：12745217
> 
> 赞同：3
> 
> 时间：2012-10-05T11:23:08.763
> 
> 标签：gcc, assembly

我正在使用为 sam7s 处理器编译的 gcc 4.6.3。

我需要使用一些内联汇编：

```
int res;
asm volatile (" \
        MRS r0,CPSR     \n  \
        MOV %0, r0      \n  \
        BIC r0,r0,%1    \n  \
        MSR CPSR,r0     \n  \
        " : "=r" (res) : "r" (0xc0) : "r0" );
return res; 
```

由 gcc 翻译为（我添加的评论）：

```
mov r3, #192    ; load 0xc0 to r3
str r0, [sl, #56]   ; preserve value of r0?

mrs r0, CPSR    ; load CPSR to r0
mov r3, r0      ; save r0 to "res"; r3 overwritten!
bic r0, r0, r3  ; 
msr CPSR_fc, r0 ; 
```

问题是使用相同的寄存器“r3”代替“%0”（res）和“%1”（常数：0xc0）。由于这个原因，%1 在使用之前被覆盖，并且代码工作不正确。

问题是如何禁止 gcc 对输入/输出操作数使用相同的寄存器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:06:44.997

好的，我终于在[这里找到了](http://www.osdever.net/tutorials/view/a-brief-tutorial-on-gcc-inline-asm)

> & 表示在
> 读取输入之前写入输出操作数，因此此输出不得与任何输入为同一寄存器。
> 如果没有这个，即使“0”约束不需要，gcc 也可以将输出和输入放在同一个寄存器中。这非常有用，但在这里提到是因为它特定于替代方案。与 = 和 % 不同，但与 ? 类似，您必须将它包含在它适用的每个备选方案中。

更改`"=r" (res)`为`"=&r" (res)`一切正常后。

# java - 通过遍历自定义位置对象的 ArrayList 创建 GPX 字符串

> ID：12745222
> 
> 赞同：0
> 
> 时间：2012-10-05T11:23:31.270
> 
> 标签：java, android, android-asynctask, iteration

**问题**

我目前正在通过迭代一组名为“CCTrackLocation”的自定义对象来创建一个 gpx 字符串。但是，这太慢了，尤其是在有很多位置的情况下。我也在异步任务中运行它。

这是我的代码。

```
for (CCTrackLocation location: trackLocations) {
            //Log.e("CCGPXUtils", "Time wasting");
            String amendedString = gpxString + "<trkpt lat=\""+location.getLatitude()+"\" lon=\""+location.getLongitude()+"\">\n" +
                                                "<ele>"+location.getAltitude()+"</ele>\n" +
                                                "<time>"+CCDateUtility.convertTimestampIntoGPXFormat(location.getTimestamp())+"</time></trkpt>\n";
            gpxString = amendedString;
            amendedString = null; 
```

前 500 个左右的点转换得很好，之后我在调试控制台中得到“GC_FOR_MALLOC”和“GC_CONCURRENT”。

**问题**

有没有更有效的方法来做到这一点，不会那么耗时？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:24:54.547

可能是我找到的最简单的解决方案。

由于来自 Objective-C 背景，我不知道“StringBuilder”，但它们是我问题的解决方案。

这是我更新的代码。

```
StringBuilder stringBuilder = new StringBuilder(gpxString);
        for (CCTrackLocation location: trackLocations) {
            if (isCancelled())
                return null;
            //Log.e("CCGPXUtils", "Time wasting");
            stringBuilder.append("<trkpt lat=\""+location.getLatitude()+"\" lon=\""+location.getLongitude()+"\">\n" +
                                                "<ele>"+location.getAltitude()+"</ele>\n" +
                                                "<time>"+CCDateUtility.convertTimestampIntoGPXFormat(location.getTimestamp())+"</time></trkpt>\n");
}
return stringBuilder.toString(); 
```

**结果**

性能提高了 100 倍。

# java - java：递归添加到xml

> ID：12745226
> 
> 赞同：0
> 
> 时间：2012-10-05T11:23:44.543
> 
> 标签：java

我需要帮助。如何将内容递归地添加到 xml 文件中。我有一个程序可以处理文件并发送“行信息”。这些行信息需要写入 XML 文件，如下所示。我现在要做的是读取每一行信息，然后向它发送一个写入 XML 的 fn。我想知道是否有任何方法可以缓冲 Document 对象，然后在每个新行出现时继续附加到该 Document 对象。

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?> 
- <Rev_1.28>
- <OP type="SAM">
  <SRC_LN_FROM>612612</SRC_LN_FROM> 
  <SRC_LN_TO>703703</SRC_LN_TO> 
  <NO_LINES>92</NO_LINES> 
  </OP>
- <OP type="MOV">
  <SRC_LN_FROM>6122</SRC_LN_FROM> 
  <SRC_LN_TO>7033</SRC_LN_TO> 
  <NO_LINES>9</NO_LINES> 
  </OP>
  </Rev_1.28> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:30:53.760

您可以使用 DOM 解析器创建使用 org.w3c.dom.Document 对象，如下[所示](http://www.mkyong.com/java/how-to-create-xml-file-in-java-dom/)。

数据存储在主存储器中，因此如果要写入的数据相对较小，这种方法是可以接受的。

# charts - 如何包装 Google 图表上的图例

> ID：12745229
> 
> 赞同：10
> 
> 时间：2012-10-05T11:23:45.703
> 
> 标签：charts

如果超出容器区域，我需要 Google 图表的图例自动包装（换行）。我不想要滚动按钮，因为它不够方便。使用可用的自定义选项，似乎无法完成。还有什么办法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T17:07:59.070

使用图例的 maxLines 属性。IE：

```
options.legend = {position: 'top', maxLines: 5}; 
```

请注意，仅当图例位于顶部并且有足够的垂直空间来呈现图表和多线图例时，此未记录的属性才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T11:19:36.997

我对此做了很多测试，看来您需要将 chartArea 宽度和高度设置为“自动”。仍然不完美，但还可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-13T12:24:44.090

使用图例的 maxLines 属性，具有特定值集的 chartArea 可以帮助呈现显示。

```
legend: { position: "top", alignment: "start", maxLines: 2 },
chartArea: {top:50,bottom:30,right:0,left:50, 'width': '100%' } 
```

# jsf - JSF2.1 中的模板化：如何 叫他的行动？

> ID：12745231
> 
> 赞同：0
> 
> 时间：2012-10-05T11:23:58.420
> 
> 标签：jsf, jsf-2, primefaces

根据这篇[文章](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)，我想重新设计我的模板，因为我有同样的问题。我`<h:commandButton>`的没有被调用。

编辑：我实现了一种从本教程制作模板的方法：[KLICK](http://www.techbrainwave.com/?p=136)

这是我的新主模板客户端，称为`app.xhtml`

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html">
<body>
<ui:composition template="./layout/layout.xhtml">
<ui:define name="header">
<ui:include src="./misc/header.xhtml"/>
</ui:define>
<ui:define name="rightColumn">
Ads here
</ui:define>
<ui:define name="leftColumn">
<ui:include src="./misc/sideBar.xhtml"/>
</ui:define>
<ui:define name="content">
<h:panelGroup id="contentPanel">
    <ui:include src="#{appController.content}.xhtml" />
</h:panelGroup>
</ui:define>
<ui:define name="footer">
<ui:include src="./misc/footer.xhtml"/>
</ui:define>
</ui:composition>
</body>
</html> 
```

主布局页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="./css/default.css" rel="stylesheet" type="text/css" />
<link href="./css/cssLayout.css" rel="stylesheet" type="text/css" />
<title>Facelets Template</title>
<style type="text/css" media="all">
body
{
background-color: #2b3a3c;
color: #2d2e2e;
font-family: Arial, Helvetica, sans-serif;
font-size: .8em;
line-height: 1.2em;
margin: 0 0 0 0; /* Sets the margin properties for an element using shorthand notation (top, right, bottom, left) */
padding: 0 0 0 0; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
text-align: center; /* Centers the page content container in IE 5 browsers. */
}
#outerWrapper
{
background-color: #fff;
margin: 0 auto 0 auto; /* Sets the margin properties for an element using shorthand notation (top, right, bottom, left) */
text-align: left; /* Redefines the text alignment defined by the body element. */
width: 100%;
}
#outerWrapper #header
{
background-color: #8ab573;
border-bottom: solid 1px #628152; /* Sets the bottom border properties for an element using shorthand notation */
font-size: 1.5em;
font-weight: bold;
line-height: 1.7em;
padding: 10px 10px 10px 10px; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
}
#outerWrapper #contentWrapper #rightColumn
{
background-color: #eef6ed;
border-left: solid 1px #8ab573; /* Sets the left border properties for an element using shorthand notation */
float: right;
padding: 10px; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
width: 180px;
height: 200px;
}
#outerWrapper #contentWrapper #leftColumn
{
background-color: #eef6ed;
border-right: solid 1px #8ab573; /* Sets the right border properties for an element using shorthand notation */
float: left;
padding: 10px; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
width: 180px;
height: 200px;
}
#outerWrapper #contentWrapper #content
{
margin: 0 16em 0 16em; /* Sets the margin properties for an element using shorthand notation (top, right, bottom, left) */
padding: 10px 10px 10px 10px; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
}
#outerWrapper #contentWrapper .clearFloat
{
clear: both;
display: block;
}
#outerWrapper #footer
{
background-color: #8ab573;
border-bottom: solid 1px #628152; /* Sets the bottom border properties for an element using shorthand notation */
font-size: 1.5em;
font-weight: bold;
line-height: 1.7em;
padding: 10px 10px 10px 10px; /* Sets the padding properties for an element using shorthand notation (top, right, bottom, left) */
}
</style>
</head>
<body>
<div id="outerWrapper">
<div id="header">
<ui:insert name="header"/>
</div>
<div id="contentWrapper">
<div id="rightColumn">
<ui:insert name="rightColumn"/>
</div>
<div id="leftColumn">
<ui:insert name="leftColumn"/>
</div>
<div id="content">
<ui:insert name="content"/>
</div>
<br />
</div>
<div id="footer">
<ui:insert name="footer"/>
</div>
</div>
</body>
</html> 
```

这是其中包含的页面之一。编辑：我在托管 bean 中将此页面设置为默认值。左侧的菜单目前不执行任何操作。因为暂时不需要。我唯一想要的是，如果我点击这个按钮，这个动作就会被调用：`<h:commandButton id="btn_plan" value="Planen" action="#{hldyPlanningController.addHoliday()}" style="width: 170px; height: 30px"/>`

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <f:facet name="first">
            <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
        </f:facet>
    </h:head>
    <h:body>
        <h:form id="frm_hldy_plan">
            <p:panelGrid style="width: 100%;" >
                <f:facet name="header">
                    <p:row>
                        <p:column colspan="2" style="height:50px;">
                            Urlaubsplanung
                        </p:column>
                    </p:row>
                </f:facet>
                <p:row>
                    <p:column style="width: 420px; vertical-align: top;" colspan="1"> 
                        <p:panel style="font-size: 12px; width: 420px; position: relative; border: 1px solid gray">

                            <f:facet name="header">
                                Urlaubsantrag Formular
                            </f:facet>

                        <p:panelGrid id="pnl_userinfo" style="font-size: 12px; width: 400px; border: 1px solid gray">

                            <f:facet name="header">  
                                <p:row>
                                    <p:column colspan="2">Persönliche Informationen</p:column>
                                </p:row>
                            </f:facet>
                            <p:row>
                                <p:column style="width:120px">
                                    <h:outputText value="Name:"/>
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{loginController.sessionData.user_name}" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width:120px">
                                    <h:outputText value="Team:" />
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{loginController.sessionData.teams_name}" />
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid id="pnl_time" style="font-size: 12px; width: 400px; border: 1px solid gray">
                            <f:facet name="header">  
                                <p:row>
                                    <p:column colspan="2">Zeitraum</p:column>
                                </p:row>
                            </f:facet>
                            <p:row>
                                <p:column style="width:120px">
                                    <p:outputLabel for="cld_startdate" value="Startdatum:" />
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{hldyPlanningController.startdate}" id="cld_startdate" showOn="button" pattern="dd.MM.yyyy" required="true" requiredMessage="Startdatum ist ein Pflichtfeld!" showWeek="true"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width:120px">
                                    <p:outputLabel for="cld_enddate" value="Enddatum:" />
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{hldyPlanningController.enddate}" id="cld_enddate" showOn="button" pattern="dd.MM.yyyy" required="true" requiredMessage="Enddatum ist ein Pflichfeld!" showWeek="true"/>
                                </p:column>             
                            </p:row>
                        </p:panelGrid>
                        <br/>
                        <p:panelGrid id="pnl_misc" style="font-size: 12px; width: 400px; border: 1px solid gray">
                            <f:facet name="header">  
                                <p:row>
                                    <p:column colspan="2">Weiteres</p:column>
                                </p:row>
                            </f:facet>
                            <p:row>
                                <p:column style="width:120px">
                                    <p:outputLabel for="opt_hType" value="Typ:"/>
                                </p:column>
                                <p:column>
                                    <p:selectOneButton value="#{hldyPlanningController.type}" id="opt_hType" required="true" requiredMessage="Typ ist ein Pflichtfeld!">  
                                        <f:selectItem itemLabel="Urlaub" itemValue="U" />  
                                        <f:selectItem itemLabel="Absetzen" itemValue="A" />  
                                    </p:selectOneButton> 
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column style="width:120px">
                                    <p:outputLabel for="txta_note" value="Bemerkung:"/>
                                </p:column>
                                <p:column>
                                    <p:inputTextarea maxlength="45" rows="2" cols="30" value="#{hldyPlanningController.note}" id="txta_note"/>  
                                </p:column>
                            </p:row>
                        </p:panelGrid>                    
                        <br/>
                        <p:panelGrid id="pnl_actions" style="font-size: 12px; width: 400px; border: 1px solid gray">
                            <f:facet name="header">  
                                <p:row>
                                    <p:column colspan="2">Aktion</p:column>
                                </p:row>
                            </f:facet>
                            <p:row>
                                <p:column>
                                    <h:commandButton id="btn_plan" value="Planen" action="#{hldyPlanningController.addHoliday()}"  style="width: 170px; height: 30px"/>
                                </p:column>
                                <p:column>
                                    <h:commandButton id="btn_submit" value="Abschicken"  style="width: 170px; height: 30px"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                        </p:panel>                    
                    </p:column>
                    <p:column colspan="1" style="vertical-align: top;">
                        <p:panel style="font-size: 12px; border: 1px solid gray;">
                            <f:facet name="header">
                                Mitarbeiter, die in diesem Zeitraum auch Urlaub geplant haben
                            </f:facet>
                            <p:schedule value="#{calendarController.eventModel}" widgetVar="myschedule"></p:schedule>
                           </p:panel>
                    </p:column>
                </p:row>     
            </p:panelGrid>
        </h:form>
    </h:body>
</html> 
```

所有 Bean 都是`@MangedBean`和`@SessionScoped`。我在 Tomcat 7.x 上使用 JSF2.1 和 Primefaces 3.4.1；

我是 JSF 框架的新手，无法弄清楚在这种情况下我做错了什么。请帮我。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T15:52:50.353

我提出 2 种方法来解决您的问题： 1- 将 commandButton 放在面板网格之外，就在表单标记之前，如下所示：

```
 <h:commandButton action="#{ficheDescControl.edit()}" value="Valider" />
                </h:form> 
```

2-使用 UI:composite 而不是包含。我使用了它，并且能够正确触发 CommanButton。你可以看看我的一个命令按钮在哪里工作的问题： [How to pass a bean from jsf to another using template？](https://stackoverflow.com/questions/22785855/how-to-pass-a-bean-from-jsf-to-another-using-templating)

# iphone - 使用 Activityviewcontroller 共享图像

> ID：12745232
> 
> 赞同：0
> 
> 时间：2012-10-05T11:24:02.160
> 
> 标签：iphone, ios6

如何使用 ActivityViewController 从 imagescrollview 共享图像。

下面是在 imagescrollview 中显示图像的代码

```
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
   imageScrollView.pagingEnabled = YES;
NSInteger numberOfViews = 61;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;
NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
 [imageScrollView addSubview:imageView]; 
```

尝试使用 activityviewcontroller 从 imagescrollview 共享图像，但在第一条语句中以红色显示预期的表达式

```
NSArray *activityItems = @[UIImage imageNamed:]imageView];// **getting message in red expected expression**
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityViewController.excludedActivityTypes = @[UIActivityTypePostToWeibo, UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypePrint ];
[self presentViewController:activityViewController animated:YES completion:NULL];
[activityViewController release]; 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:05:46.100

您正在将图像分配给 Array 的对象，并且您的语法也是错误的..所以这就是为什么您会收到**红色预期表达式的消息**this..

试试这个代码而不是你的代码

```
NSMutableArray * activityItems = [[NSMutableArray alloc]init];
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * self.view.frame.size.width;
    NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);
    [imageScrollView addSubview:imageView];
    [[activityItems addObject:imageView];
}
UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
activityViewController.excludedActivityTypes = @[UIActivityTypePostToWeibo, UIActivityTypeAssignToContact, UIActivityTypeCopyToPasteboard, UIActivityTypePrint ];
[self presentViewController:activityViewController animated:YES completion:NULL];
[activityViewController release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:29:29.633

首先将图像存储在数组中，然后在将图像添加到滚动视图的 forLoop 中，然后

```
NSArray *activityItems = [NSArray arrayWithArray:imageArray];  //imageArray is the nsmutablearray in which you shall store the images 
```

# android - phonegap - 网络使用统计

> ID：12745233
> 
> 赞同：2
> 
> 时间：2012-10-05T11:24:02.593
> 
> 标签：android, iphone, cordova, phonegap-plugins

谁能建议我一种获取网络使用统计数据的方法（例如从手机发送/接收的总数据使用量）和每个应用程序的数据使用量（对于安装在手机上的所有应用程序）。如果可能的话，我希望这种方法对 Iphone、Android、BlackBerry、Windows 等通用。但我不确定如何。我还尝试过适用于 android 的“NetworkStats”，它可以满足此要求，但仅适用于 Android os 4.0 及更高版本。

我正在寻找 api 或任何其他可用的方法。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:29:44.843

phonegap 上没有适用于所有平台的通用解决方案。您必须将其实现为每个平台的本机代码，并将 phonegap 链接为 phonegap 插件。

# objective-c - 在 Facebook iOS 3.1.1 SDK 中使用 FBSession openActiveSessionWithReadPermissions 处理无效 accessToken

> ID：12745235
> 
> 赞同：15
> 
> 时间：2012-10-05T11:24:10.493
> 
> 标签：objective-c, ios, facebook, facebook-ios-sdk

在任何事情之前，我已经阅读了[这个](https://stackoverflow.com/questions/12612629/expired-access-token-after-openactivesession-for-facebook-ios-sdk)问题和[这个](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token)问题来解决下面和提问之前的问题。

我的问题是，当 accessToken 过期时（或者因为过期日期过去，或者通过从我的 Facebook 应用中心手动删除应用程序）以下代码：

```
if ([[FBSession activeSession] isOpen]) {
        //do something
    }
else {
        [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
            if(FB_ISSESSIONOPENWITHSTATE(status)) {
                //do something
            }
          }
       }];
     } 
```

在 FBSession.activeSession 打开的情况下进入 else 块，但是当执行“做某事”时，accessToken 无效，因此请求出现错误：HTTP 状态代码：400。当我尝试立即执行整个过程两次时，FBSession 请求许可（iOS6 的 UIAlertView 集成了 facebook、Facebook 应用程序或 Safari 中的 Facebook 网站），其余运行顺利。

我担心的是为什么我必须做两次才能正常工作，以及为什么 Facebook SDK 无法在第一时间检测到 activeSession 和 accessToken 无效。

谢谢大家！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-09T20:22:01.237

您链接的问题是相关的，尤其是[Facebook SDK 3.1 - 验证访问令牌时出错](https://stackoverflow.com/questions/12601191/facebook-sdk-3-1-error-validating-access-token)，这解释了设备上的 Facebook 帐户与服务器不同步的问题（即，如果您从 App Center 中删除了该应用程序）。如上所述，在 3.1.1 中，SDK 仅在从服务器获得无效响应时才会调用以更新设备令牌。这是为了减少往返服务器的便利性而进行的权衡。

假设您的代码块在 applicationDidFinishLaunching 或类似的东西上执行，它将转到 else 块，因为应用程序从一个新会话开始。当它调用 openActiveSessionWithReadPermissions 时，iOS 6 设备认为令牌是有效的，并将让状态转到 Open，因此您的“做某事”会被执行。只有这样，SDK 才会从服务器获得无效响应并使设备令牌无效。因此，下次调用该程序时，它会适当地提示用户再次授权。

这是故意的。目前，如果错误代码描述了无效令牌，您可以考虑在应用程序中自动重试。例如，请参阅 Scrumptious 示例 postOpenGraph 重试代码。在您的情况下，它可能看起来更接近于（出于演示目的，我使用 requestForMe 作为“做某事”）：

```
else {
    [FBSessionopenActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        if(FB_ISSESSIONOPENWITHSTATE(status)) {
            //do something
            [[FBRequest requestForMe] startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                if (!error){
                    NSLog(@"success on first try");
                } else if ([[error userInfo][FBErrorParsedJSONResponseKey][@"body"][@"error"][@"code"] compare:@190] == NSOrderedSame) {
                    //requestForMe failed due to error validating access token (code 190), so retry login
                    [FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                        if (!error){
                            //do something again, or consider recursive call with a max retry count.
                            NSLog(@"success on retry");
                        }
                    }];
                }
            }];
        }
    }];
} 
```

# oracle - 为节点 js 安装 db-oracle

> ID：12745236
> 
> 赞同：0
> 
> 时间：2012-10-05T11:24:18.637
> 
> 标签：oracle, node.js

当我尝试在 mac OS 的终端中为 node js 安装 db-oracle 时。得到以下错误。请帮忙。

我在 npm install db-oracle 上得到的错误列表如下

unameits-Mac-mini:InstantClient vinod$ npm install db-oracle npm http GET [https://registry.npmjs.org/db-oracle](https://registry.npmjs.org/db-oracle) npm http 304 [https://registry.npmjs.org/db-oracle](https://registry.npmjs.org/db-oracle)

db-oracle@0.2.3 install /usr/InstantClient/node_modules/db-oracle node-waf 配置构建

检查程序 g++ 或 c++：/usr/bin/g++

检查程序 cpp：/usr/bin/cpp

检查程序 ar：/usr/bin/ar

检查程序ranlib：/usr/bin/ranlib

检查 g++：好的

检查节点路径：未找到

检查节点前缀：ok /usr/local/Cellar/node/0.8.11

检查标头 occi.h：缺少 OCI 的包含文件

/usr/InstantClient/node_modules/db-oracle/wscript:42：错误：配置失败（请参阅'/usr/InstantClient/node_modules/db-oracle/build/config.log'）

db-oracle@0.2.3 preuninstall /usr/InstantClient/node_modules/db-oracle rm -rf build/*

npm 错误！db-oracle@0.2.3 安装：node-waf 配置构建

npm 错误！sh "-c" "node-waf configure build" 失败，结果为 1

npm 错误！

npm 错误！db-oracle@0.2.3 安装脚本失败。

npm 错误！这很可能是 db-oracle 软件包的问题，

npm 错误！不是 npm 本身。

npm 错误！告诉作者这在您的系统上失败：

npm 错误！node-waf 配置构建

npm 错误！您可以通过以下方式获取他们的信息：

npm 错误！npm 所有者 ls db-oracle

npm 错误！上面可能有额外的日志输出。

npm 错误！系统达尔文 11.3.0

npm 错误！命令“/usr/local/Cellar/node/0.8.11/bin/node”“/usr/local/bin/npm”“安装”“db-oracle”

npm 错误！cwd /usr/InstantClient

npm 错误！节点-v v0.8.11

npm 错误！npm -v 1.1.62

npm 错误！代码生命周期

npm 错误！

npm 错误！可以在以下位置找到其他日志记录详细信息：

npm 错误！/usr/InstantClient/npm-debug.log

npm 错误！不好的代码 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T11:57:09.170

这是日志的关键部分：

`Checking for header occi.h : Missing include files for OCI`

要修复它，您需要设置 OCI_INCLUDE_DIR 和 OCI_LIB_DIR 环境变量

假设oracle客户端和sdk安装在**/opt/instantclient**

```
$ export OCI_INCLUDE_DIR=/opt/instantclient/sdk/include/ 
$ export OCI_LIB_DIR=/opt/instantclient 
```

然后只需安装模块。

# javascript - 如何提醒用户注意 OBJECT 中的 div 更改

> ID：12745239
> 
> 赞同：0
> 
> 时间：2012-10-05T11:24:21.670
> 
> 标签：javascript, object, html, alert, children

如果 div 内部发生变化，或者任何子 div 内容发生变化，我想提醒用户，

我试图检测的 div 在对象内部！

这是我的代码：

```
<object type="text/html" data="https://secure.brosix.com/webclient/?nid " style="width:710px;height:555px; border:none;">
</object> 

<script>
$('#BrosixChatReceive').bind('contentchanged', function() {
  // do something after the div content has changed
  alert('woo');
});

$('#BrosixChatReceive').trigger('contentchanged');
</script> 
```

对象内的代码“没有变化”

```
<div class="BrosixChatReceive" id="BrosixChatReceive" style="width: 344px; height: 476px; "></div> 
```

这是从对象内部的 div 进行更改时的代码：

```
<div class="BrosixChatReceive" id="BrosixChatReceive" style="width: 344px; height: 476px; ">

<div class="BrosixChatWith" id="chatwith-85905" style="display: block; ">
<div class="BrosixChatItemOther"><div class="BrosixChatItemTime">18:34:36</div>
<div class="BrosixContactUsername" style="font-weight:bold;">person1</div>
<div class="BrosixChatMessage">message 1</div>
</div>
<div class="BrosixChatItemOther"><div class="BrosixChatItemTime">18:36:02</div>
<div class="BrosixContactUsername" style="font-weight:bold;">person1</div>
<div class="BrosixChatMessage">message 2</div>
</div>
<div class="BrosixChatItemOther"><div class="BrosixChatItemTime">18:36:54</div>
<div class="BrosixContactUsername" style="font-weight:bold;">person1</div>
<div class="BrosixChatMessage">message 3</div>
</div>
</div>
<div class="BrosixChatWith" id="chatwith-91218" style="display: none; ">
<div class="BrosixChatItemOther"><div class="BrosixChatItemTime">18:35:07</div>
<div class="BrosixContactUsername" style="font-weight:bold;">person2</div>
<div class="BrosixChatMessage">message 1</div>
</div>
</div>

</div> 
```

有什么方法可以检测到这种变化，并在发生这种变化时提醒用户？

“我也无法更改 OBJECT 内网页的代码”

所以这必须在不编辑对象内容的情况下完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:29:07.370

这是一个类似于我在[另一个答案](https://stackoverflow.com/questions/12580761/hidden-input-change-event)中提出的功能：

```
function survey(selector, callback) {
   var input = $(selector);
   var oldvalue = input.html();
   setInterval(function(){
      if (input.html()!=oldvalue){
          oldvalue = input.html();
          callback();
      }
   }, 100);
}

survey('#yourdivid', function(){console.log('changed')}); 
```

`survey`每次更改 id 的 div 时都会调用给定的回调`yourdivid`。检查每 100 毫秒进行一次。

但更好的解决方案通常是更改修改 div 的脚本以直接获取警报。

当您提到“另一个网页”时，我必须警告您，如果内容来自另一个域，这将不起作用。

# android - 从谷歌地图网址打开应用程序

> ID：12745243
> 
> 赞同：1
> 
> 时间：2012-10-05T11:24:35.593
> 
> 标签：android, android-intent

您好，从 URL 打开应用程序我有下面的代码

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"></action>
            <category android:name="android.intent.category.DEFAULT"></category>
            <category android:name="android.intent.category.BROWSABLE"></category>
            <data android:host="maps.google.com" android:scheme="http"></data>
        </intent-filter> 
```

网址如下

```
 https://maps.google.com/maps?q=70.005540,-111.000050 
```

并在下面的活动中获取数据是我的代码

```
 Uri data = getIntent().getData();
        if (data != null) {
            txtView.setText(data.getPath());
        } 
```

我的问题是当我点击上面的 URL 时，我的应用程序没有打开......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:31:13.097

用以下代码替换您的 xml 代码

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW"></action>
            <category android:name="android.intent.category.DEFAULT"></category>
            <category android:name="android.intent.category.BROWSABLE"></category>
            <data android:host="maps.google.com" android:scheme="https"></data>
        </intent-filter> 
```

它会工作，我已经测试过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:29:55.353

尝试使用它以在 web 视图中打开链接。

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
startActivity(browserIntent); 
```

# java - setBackgrounds 在 Windows 中抛出异常（但不是在 MacOSX 中）

> ID：12745244
> 
> 赞同：0
> 
> 时间：2012-10-05T11:24:42.533
> 
> 标签：java, swing, cross-platform

我试图有一个图像背景，所以我在 JFrame 中创建了以下代码：

```
@Override
public void paint(Graphics g) {
    super.paint(g);
    try {
        final Image image = ImageIO.read(getClass().getResource("/images/login/gentlenoise100.png"));
        int iw = 256;
        int ih = 256;
        for (int x = 0; x < getWidth(); x += iw) {
            for (int y = 0; y < getHeight(); y += ih) {
                g.drawImage(image, x, y, iw, ih, this);
            }
        }
    } catch (IOException ex) {
        Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
    }
    for(Component componente:getComponents()){
        componente.repaint();
    }

} 
```

我看到背景颜色有某种偏好，我决定将其设置为不可见：

```
setBackground(new java.awt.Color(0,0,0,0)); 
```

它在 Mac OS X (java 1.6) 中运行良好，我不得不在 Windows 中对其进行探测，如果我删除 setBackground 调用，它不会显示我的背景，如果我保持背景颜色不可见，它会引发异常并说框架装饰！

我尝试使用`setUndecorate(true)`，但在 macOS 中它丢失了标题栏（当然），在 Windows 中它给了我一个透明窗口。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:44:00.943

如果可以避免，请不要覆盖`paint`顶级容器（如`JFrame`）的方法，它们会做很多重要的事情。

在这种情况下，您最好使用 a`JPanel`并将框架内容窗格设置为它...

就像是...

```
public class BackgroundPane extends JPanel {

    private Image background;
    public BackgroundPane() {
        try {
            background = ImageIO.read(getClass().getResource("/images/login/gentlenoise100.png"));
        } catch (IOException ex) {
            Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int iw = 256;
        int ih = 256;
        for (int x = 0; x < getWidth(); x += iw) {
            for (int y = 0; y < getHeight(); y += ih) {
                g.drawImage(background, x, y, iw, ih, this);
            }
        }
    }
}

//...

JFrame frame = new JFrame();
frame.setContentPane(new BackgroundPane());
//... 
```

不要在您的绘制方法中做任何耗时或可能导致重绘管理器安排您的组件再次重​​绘的事情

像...

```
final Image image = ImageIO.read(getClass().getResource("/images/login/gentlenoise100.png")); 
```

和

```
for(Component componente:getComponents()){
    componente.repaint();
} 
```

在里面你是油漆方法是一个非常糟糕的主意。

第二个可能导致重绘管理器决定父容器（您的框架）需要一遍又一遍地重绘......最终消耗你的CPU......

请注意，从 Java 7 开始，`setBackground`使用包含小于 255 的 alpha 值的颜色调用`Window`会导致窗口变得透明。

> Window.setBackground(Color) 将 new Color(0,0,0,alpha) 传递给此方法，其中 alpha 小于 255，安装每像素半透明

如果窗口被装饰，这也会抛出异常......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:34:19.273

有三种方式，使用

1.  `JComponent#setOpaque()`如果您不想喘气背景

2.  [如何](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)在 Win、OSX 上创建半透明和异形 Windows 一些 *** unix

3.  [透明度必须更改 AlphaComposite 的](https://stackoverflow.com/a/6720207/714968)值

* * *

不要`paint()`随便`JFrame`，放在那里`JPanel`并覆盖`paintComponent()`

# excel - Excel 导出在本地工作，在服务器上运行时字段变为隐藏

> ID：12745258
> 
> 赞同：0
> 
> 时间：2012-10-05T11:25:46.477
> 
> 标签：excel, apache-poi, smartgwt

好的，所以我有一个 SmartGWT Web 应用程序，其中我有一些在列表网格中运行的报告。

根据使用 listgrid.exportclientdata() 的示例，我使用 Smartgwt 内置导出导出到 excel；

这是问题：

- 在本地运行时，一切正常，我可以打开 XLSX 文件并查看所有数据。

- 从服务器运行时，包含数据的列会被隐藏！如果我在 Excel 中手动执行“取消隐藏”操作，我可以看到这些列...

我的本地环境是 Mac OSX、Mountain Lion（之前也尝试过），运行 Sun 的 Java。prod 服务器是运行 OpenJDK 的 Debian。

不确定这是否与它有关，我不知道如何解决它......在两种环境中在Tomcat6上运行我的webapp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:18:09.313

对于其他人，在 stackoverflow void 中搜索黑暗谜题的答案：

这是由于某些字体在 OpenJDK 中不可用，而在任何地方都没有记录任何错误...

我也在我的 Debian 上切换到 Sun 的 JDK，Excel 文件现在可以正常打开并显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T19:42:32.403

当面对这个似乎与[Java Bug相关的](https://bugs.openjdk.java.net/browse/JDK-8013716)[POI Bug](https://issues.apache.org/bugzilla/show_bug.cgi?id=55644)时，也会发生这种情况。

如果是这种情况，将字体更改为 Calibri 以外的字体或使用 7u21 以上的 jre 应该可以解决问题。您还可以通过使用这样的代码来缓解问题并避免列完全折叠 `sheet.autoSizeColumn(x); if (sheet.getColumnWidth(x) == 0) { // autosize failed use MIN_WIDTH sheet.setColumnWidth(x, MIN_WIDTH); }`

# php - 在单击按钮之前验证表单

> ID：12745260
> 
> 赞同：-2
> 
> 时间：2012-10-05T11:25:54.597
> 
> 标签：php, javascript

我在联系页面上有一个表单，我想在用户单击提交按钮之前对其进行验证。

```
<form id="contact" name="f1" action="mail.php" onsubmit="validate()"> 
```

我有 Javascript 代码可以验证字段。但是，当我单击按钮时，用户将被重定向到“mail.php”而不进行验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:28:57.693

```
<form id="contact" name="f1" action="mail.php" onsubmit="return validate();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:28:42.687

尝试这个：

```
<form id="contact" name="f1" action="mail.php" onsubmit="return validate();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:29:38.057

如果您有验证功能，请执行以下操作

```
If (validation()){
    $('form').submit();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:37:51.393

javascript onclick 事件仅调用该函数，但如果您尝试返回 function()，则如果该函数返回 true，则仅提交表单。

另一种方法是使用验证变量

```
var validate = true
if( ...validation condition fails ... )
{
validate = false
}

if (validate)
{
$('#formID').submit();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:29:11.780

试试这个简单的例子[http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

# node.js - TypeError: 对象函数 app(req, res){ app.handle(req, res); nodejs 没有方法“mapDefaultAction”

> ID：12745264
> 
> 赞同：0
> 
> 时间：2012-10-05T11:26:01.037
> 
> 标签：node.js, express

我在使用 express-resource 时遇到错误，因此我已应用以下链接中提到的补丁。正如堆栈溢出的以下问题所述： [express-namespace 和 express-resource wont allow map](https://stackoverflow.com/questions/11747825/express-namespace-and-express-resource-wont-allow-map)

我使用了以下命令： npm install git://github.com/visionmedia/express-resource.git#add/express3x-support

但现在我收到以下错误：

 **```
 C:\Data\work\node\example\www\example\node_modules\express-resource\index.js:63
    if (actions[key]) this.mapDefaultAction(key, actions[key]);
    TypeError: Object function app(req, res){ app.handle(req, res); } has no method
    'mapDefaultAction'
    at Function.Resource (C:\Data\work\node\example\www\example\node_modules\
    express-resource\index.js:63:28)
    at Object.<anonymous> (C:\Data\work\node\example\www\mixerade\app.js:23:17)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10)
    at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```*  *谁能建议可能的原因是什么？

提前致谢。**

# java - 不确定问题是什么

> ID：12745273
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:26:26.290
> 
> 标签：java

我对整个编程事情真的很陌生，我试图弄清楚为什么循环会突然结束并且不会继续到最后的 if 语句。你们能帮我弄清楚是什么问题吗？

```
import java.util.Scanner;

public class FunnyAverage {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.print("How many values to read? ");
        int top = in.nextInt();
        System.out.print("Enter Value: ");
        int one = in.nextInt();
        int number = 1;
        int sum = 0;
        sum = sum + one;

        while (number <= top) {
            if (one % 6 != 0 && one % 17 != 0) {
                System.out.print("Enter Value: ");
                one = in.nextInt();
                number++;
            } else if (one % 6 == 0 && one % 17 == 0) {
                System.out.print("Enter Value: ");
                one = in.nextInt();
                number++;

            }

        }

        if (sum / top != 0) {
            System.out.print("Average: " + sum / top);
        }
        System.out.print("None Divisible");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:35:57.903

看起来你最终处于不存在的`else`情况下（在`while`循环内）。因此，`number`不会增加，您会陷入困境`while`。

尝试`one`在`while`循环内阅读。这样，将提示用户在每个循环中输入一个新数字。

`while`否则，一旦用户输入的数字与您的支票不符，您将陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:42:25.760

如果您提供正确的输入值，最终的 if() 条件就会执行。我运行了您的代码并提供了以下输入来执行最终的 if() 语句。

```
How many values to read? 1
Enter Value: 1
Enter Value: 1
Average: 1None Divisible 
```

I dont understand what are you trying in the code, but there are many things missing like i assume you want to capture the sum of the input numbers, but sum is not used in the while loop.

# c# - 比较比类型转换慢，装箱更慢是真的吗？

> ID：12745275
> 
> 赞同：0
> 
> 时间：2012-10-05T11:26:29.823
> 
> 标签：c#, casting, comparison

听说`type casting`很慢 我以为`comparison`很快，但是...

似乎`IComparable.CompareTo(object y)`必须使用，如果没有可用的话`cast`，它`x > y`至少会像不慢一样慢。`y as MyClass``IComparable<T>`

那么，我这样说是否正确：

实现总是`IComparable<T>`比`IComparable`因为我们不必键入强制转换更好？

### 更新

`boxing`比 2 个引用类型之间的类型转换慢得多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:29:27.870

从性能的角度来看，实现这些接口的通用版本总是更好，因为它可以保证您将避免[值类型的装箱](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)，这是这种情况下的第一大性能杀手。

通用版本也不需要进行运行时类型检查，但这些检查对性能的影响远小于装箱，并且在实践中更难注意到。

看到通过实施没有任何损失，`IComparable<T>`那么结论很清楚：您应该始终这样做，因为没有什么可失去的，并且可能会获得相当多的收益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:28:38.817

实现泛型总是更好。不仅是为了性能，还因为你得到了编译时检查。

# networking - 网络协议实现

> ID：12745276
> 
> 赞同：1
> 
> 时间：2012-10-05T11:26:30.313
> 
> 标签：networking, network-programming, network-protocols

作为项目工作的一部分，我应该“实施”我选择的任何网络协议。我搜索了它，但没有找到任何可以帮助像我这样的初学者开始的东西。谁能提供一些关于从哪里开始的想法？提前致谢！

PS：我也不确定标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T01:27:30.367

你可以试试 DHCP。它比较简单和常见。

[http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)

首先，您可以涵盖相同的子网/vlan 案例。（服务器客户端相同的子网。）如果你有时间，接下来做不同的子网/vlan 案例。

# linux - 由“arm-linux-gcc”和“sim-panalyzer”引起的奇怪错误位于 Glibc 函数“dl_aux_init”中

> ID：12745289
> 
> 赞同：1
> 
> 时间：2012-10-05T11:27:10.627
> 
> 标签：linux, gcc, arm, simulator, glibc

我编写了一个简单的 c 语言程序，它没有额外的功能代码和库依赖：

```
void main()
{
} 
```

将它保存为“Test.c”，我用“arm-linux-gcc”为arm架构师编译它并输出一个elf格式文件“Test”，命令是“ **arm-linux-gcc Test.c -o Test -static** ”。然后我使用功率模拟器工具“Sim-Panalyzer”估算文件“Test”的功率，回显信息显示“ ***fatal:non-speculative fault (2) detected @ 0x00013c58*** ”。所以我使用命令“ **readelf -S Test** ”并找到地址在段“.text”中，然后使用命令“ **arm-linux-objdump Test -Sl -j .text > a.txt** ”将信息输出到文件“a.txt”。我在这里找到地址并了解信息：

```
 13c48:   1affffd4    bne 13ba0 <_dl_aux_init+0x8c>
   13c4c:   e352000f    cmp r2, #15
   13c50:   e59d201c    ldr r2, [sp, #28]
   13c54:   e59d3018    ldr r3, [sp, #24]
   13c58:   e5892000    str r2, [r9] 
```

很明显，错误发生在 gcc 库“glibc-2.9/elf/dl-support.c”中的函数“ **dl_aux_init** ”中，但我不知道如何处理这个错误。我不敢相信glibc中的错误，所以我希望有人能帮我找到导致这个错误的原因。使用“Sim-Panalyzer”有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:38:51.983

这个错误很奇怪，但原因是我使用了**最新**的“arm-linux-gcc”**版本**（4.3.2）并导致了这个问题。[我将工具版本更改为从站点http://ftp.arm.linux.org.uk/pub/armlinux/toolchain/](http://ftp.arm.linux.org.uk/pub/armlinux/toolchain/)下载的 2.95.3 ，然后一切正常！很明显，工具“sim-panalyzer2.0”没有任何东西。

# php - PHP 通知：未定义索引：idOrAttributeName_x

> ID：12745290
> 
> 赞同：1
> 
> 时间：2012-10-05T11:27:11.833
> 
> 标签：php, jquery, yii

**PHP 通知：未定义索引：idOrAttributeName_x**

我在 yii 框架中使用 jcrop 扩展。当时我收到了这个通知。我正在使用 yii 框架开发一个网站，我有一个任务来裁剪图像。对于这个任务，我在 yii 框架中使用 Jcrop 扩展。当我将以下给定代码添加到我的控制器操作 index() 方法时，我得到了这个错误。实际上我不知道要在函数中传递哪个变量。

```
Yii::import('ext.jcrop.EJCropper');
$jcropper = new EJCropper();
$jcropper->thumbPath = '/my/images/thumbs';

// some settings ...
$jcropper->jpeg_quality = 95;
$jcropper->png_compression = 8;

// get the image cropping coordinates (or implement your own method)
***$coords = $jcropper->getCoordsFromPost(**'idOrAttributeName'**);***

// returns the path of the cropped image, source must be an absolute path.
$thumbnail = $jcropper->crop('/my/images/imageToCrop.jpg', $coords); 
```

我是 yii 框架的新手，请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:55:18.967

好的，问题是 jcropper 将寻找“POST”值来检测在哪里进行裁剪（x、y、高度和宽度）。为了提供它们，您必须将它们编码为“somestring_x”、“somestring_y”、“somestring_h”和“somestring_w”。

在这种情况下，'somestring' 正是您在`getCoordsFromPost`方法中放入的内容：在您的情况下`"idOrAttributeName"`.

如果你看一下[github](https://github.com/digitick/yii-jcrop/blob/master/EJCropper.php)上的源代码就会清楚（确实很简单）。

# android - Android 动态图像视图

> ID：12745294
> 
> 赞同：1
> 
> 时间：2012-10-05T11:27:20.463
> 
> 标签：android, imageview, android-linearlayout

我正在制作一个自定义布局，我想从图库中动态添加图像视图。但是，当我从图库中选择图像时，我就被逼近了。我无法得到相同背后的错误。

这是我的代码..

```
public class Dynamic extends Activity {
int i;
ImageView[] img_items;
ArrayList<String> values = new ArrayList<String>();
LinearLayout imageLayout;
Button btn;
private static int RESULT_LOAD_IMAGE = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dynamic_load);

    imageLayout = (LinearLayout)findViewById(R.id.image_layout);
    btn = (Button)findViewById(R.id.btn_ADD);
    img_items = new ImageView[values.size()];

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            values.add("AA");

            Intent i = new Intent(
                    Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);

        }
    });

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        /*ImageView imageView = (ImageView) findViewById(R.id.imgView);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));*/

        //Creating the image layouts dynamically
        for( i=0;i<values.size();i++){

            img_items[i] = new ImageView(Dynamic.this);

            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);

            params.setMargins(10, 10, 0, 0);
            img_items[i].setLayoutParams(params);

        }

        img_items[i].setImageBitmap(BitmapFactory.decodeFile(picturePath));
        imageLayout.addView(img_items[i]);

    }
}
} 
```

日志猫

```
10-05 16:52:03.422: D/AndroidRuntime(451): Shutting down VM
10-05 16:52:03.422: W/dalvikvm(451): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-05 16:52:03.549: E/AndroidRuntime(451): FATAL EXCEPTION: main
10-05 16:52:03.549: E/AndroidRuntime(451): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/1 }} to activity {com.example.dynamicloading/com.example.dynamicloading.Dynamic}: java.lang.ArrayIndexOutOfBoundsException
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread.deliverResults(ActivityThread.java:3515)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3557)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread.access$2800(ActivityThread.java:125)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2063)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.os.Looper.loop(Looper.java:123)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-05 16:52:03.549: E/AndroidRuntime(451):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 16:52:03.549: E/AndroidRuntime(451):  at java.lang.reflect.Method.invoke(Method.java:521)
10-05 16:52:03.549: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-05 16:52:03.549: E/AndroidRuntime(451):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-05 16:52:03.549: E/AndroidRuntime(451):  at dalvik.system.NativeStart.main(Native Method)
10-05 16:52:03.549: E/AndroidRuntime(451): Caused by: java.lang.ArrayIndexOutOfBoundsException
10-05 16:52:03.549: E/AndroidRuntime(451):  at com.example.dynamicloading.Dynamic.onActivityResult(Dynamic.java:81)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.Activity.dispatchActivityResult(Activity.java:3890)
10-05 16:52:03.549: E/AndroidRuntime(451):  at android.app.ActivityThread.deliverResults(ActivityThread.java:3511)
10-05 16:52:03.549: E/AndroidRuntime(451):  ... 11 more
10-05 16:57:04.140: I/Process(451): Sending signal. PID: 451 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:36:47.867

您需要将`i`值减一，因为`i`for 循环中的值是递增的，例如您有迭代`5`时间，因此 for 循环将是迭代`5`时间，以开始`0`和结束，`4`但当时`i`值首先增加，然后它将检查2 表达式`i`在那个时间`i`值的长度和for`values.size()`是否相同，因此它终止for循环执行其余代码

**已编辑**

```
if(i==values.size() && i>0)
   i--;

img_items[i].setImageBitmap(BitmapFactory.decodeFile(picturePath));
imageLayout.addView(img_items[i]); 
```

`i=0`每次你都需要设置另一件事，`onActivityResult()`否则你总是得到`i`最后的价值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:44:04.773

您在 onCreate 中初始化数组 img_items ：

```
img_items = new ImageView[values.size()]; 
```

此时 values.size() 为“零”。

您应该在 onActivityResult 中的 for 循环之前执行此初始化：

```
 img_items = new ImageView[values.size()];
    for( i=0;i<values.size();i++){
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:44:55.477

看到代码后，我可以说，当你用 values.size() 初始化 ImageView 数组时

```
img_items = new ImageView[values.size()]; 
```

当时“值”Arraylist 的大小为 0，因此 ImageView 数组的大小也为 0，然后您将 ImageView 放入 onActivityResult() 中大小为 0 的数组中。

```
img_items[i] = new ImageView(Dynamic.this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:02:09.900

下面是从图像意图加载多个图像的代码。我从[如何为我的应用程序从图库（SD 卡）中挑选图像？](https://stackoverflow.com/questions/2507898/how-to-pick-an-image-from-gallery-sd-card-for-my-app-in-android)

```
 Uri selectedImage = data.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(
                               selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();
            for(int i=0;i<cursor.getCount();i++)
            {
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
            ImageView img_items = new ImageView(AnimatedPopupActivity.this);
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            params.setMargins(10, 10, 0, 0);
            img_items.setLayoutParams(params);

            img_items.setImageBitmap(yourSelectedImage);
            imageLayout.addView(img_items);

            cursor.moveToNext();
            }
            cursor.close(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T11:51:11.700

试试这个..

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Button" />

</LinearLayout> 
```

活动课..

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class MainActivity extends Activity {

    LinearLayout mainLinearLayout;
    Button button;
      Bitmap bmp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mainLinearLayout = (LinearLayout)findViewById(R.id.mainLayout);
        button = (Button)findViewById(R.id.button1);

        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                openGallery();
            }
        });
    }

    private void openGallery()
    {
        Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
        photoPickerIntent.setType("image/*");
        startActivityForResult(photoPickerIntent, 1);
    }
    protected void onActivityResult(int requestCode, int resultcode, Intent intent)
    {
        super.onActivityResult(requestCode, resultcode, intent);

        if (requestCode == 1)
        {
            if (intent != null && resultcode == RESULT_OK)
            {             

                  Uri selectedImage = intent.getData();

                  String[] filePathColumn = {MediaStore.Images.Media.DATA};
                  Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
                  cursor.moveToFirst();
                  int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                  String filePath = cursor.getString(columnIndex);
                  cursor.close();

                  if(bmp != null && !bmp.isRecycled())
                  {
                      bmp = null;               
                  }

                  bmp = BitmapFactory.decodeFile(filePath);

                 ImageView imageView = new ImageView(MainActivity.this);
                 imageView.setImageBitmap(bmp);
                 LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(100,100);
                 imageView.setLayoutParams(lp);

                 mainLinearLayout.addView(imageView,lp);

            }
            else
            {
                Log.d("Status:", "Photopicker canceled");           
            }
        }
    }
} 
```

# java - 为数字添加前缀，例如（1 = 001）

> ID：12745297
> 
> 赞同：1
> 
> 时间：2012-10-05T11:27:23.747
> 
> 标签：java

> **可能重复：**
> [在Java中为数字添加前导零？](https://stackoverflow.com/questions/275711/add-leading-zeroes-to-number-in-java)

我想为我的号码添加前缀。我有一个数字，我想将其转换为 3 位数字，例如，如果我通过 1，则它应该返回 001。这是我的代码。

```
public int returnThreeDigitNo(int number)
{
    int threeDigitNo = 0;
    int length = String.valueOf(number).length();
    if(length == 1)
    {
        threeDigitNo = 00+number;
    }
    if(length == 2)
    {
        threeDigitNo = 0+number;
    }
    if(length == 3)
    {
        threeDigitNo = number;
    }
    return threeDigitNo;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-05T11:28:47.153

如果要显示 3 位整数，可以使用：

```
String.format("%03d", yournumber); 
```

# iphone - Facebook 登录：尝试插入非属性值 ' ' 类 'NSNull'

> ID：12745299
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:27:30.337
> 
> 标签：iphone, ios, facebook

当我通过 Facebook 登录时，我在日志中收到如下消息

```
*** -[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '<null>' of class 'NSNull'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

它的意义是什么？为什么会出现这条消息？

在 facebook.m 类中，我设置为

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSNull null] forKey:@"FBAccessTokenKey"];
[defaults setObject:[NSNull null] forKey:@"FBExpirationDateKey"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:56:16.237

`[NSNull null]`不能与 NSUserDefaults 一起使用。

你可以使用[`removeObjectForKey:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUserDefaults/removeObjectForKey:)

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults removeObjectForKey:@"FBAccessTokenKey"];
[defaults removeObjectForKey:@"FBExpirationDateKey"]; 
```

或者如果你坚持设置一些东西，你可以设置一个空字符串`@""`

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:@"" forKey:@"FBAccessTokenKey"];
[defaults setObject:@"" forKey:@"FBExpirationDateKey"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:00:40.867

由于 NSUserDefaults 将其数据序列化为属性列表（/var/mobile/Library/Preferences/[BUNDLE_ID].plist），所有设置的属性都应该是属性列表对象，即 NSArray、NSDictionary、NSString、NSNumber、NSData 或 NSDate。如果要删除键的值，请使用`- removeObjectForKey:`NSUserDefaults 上的消息。

# jsf - JSF 应用程序加载配置

> ID：12745300
> 
> 赞同：0
> 
> 时间：2012-10-05T11:27:32.510
> 
> 标签：jsf, onload, method-call

JSF 中是否有任何配置可用于在“应用程序加载”上调用某些功能？因为我们在 web.xml 中有加载时启动。

谢谢。

# asp.net - 如何将 Tiff 转换为 Image 对象？

> ID：12745301
> 
> 赞同：2
> 
> 时间：2012-10-05T11:27:37.060
> 
> 标签：asp.net, image, tiff

这是用于将多页 tiff 文件转换为一页 jpeg 的 asp.net 源。

我曾经使用 MemoryStream 类，然后转换为 jpeg。

这是在 Windows 2005、IIS6、Visual Studio 2008 和 .NET Framework 2.0 中。

```
 MemoryStream ms = null;
            Image SrcImg = null;
            Image returnImage = null;
            try
            {
                SrcImg = Image.FromFile(@'d:\\test.tif');
                ms = new MemoryStream();
                FrameDimension FrDim = new FrameDimension(SrcImg.FrameDimensionsList[0]);
                SrcImg.SelectActiveFrame(FrDim, 17); // 17 page...
                SrcImg.Save(ms, ImageFormat.Tiff);
                // Prevent using images internal thumbnail
                SrcImg.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
                SrcImg.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
                //Save Aspect Ratio
                if (SrcImg.Width <= ImgWidth) ImgWidth = SrcImg.Width;
                int NewHeight = SrcImg.Height * ImgWidth / SrcImg.Width;
                if (NewHeight > ImgHeight)
                {
                    // Resize with height instead
                    ImgWidth  = SrcImg.Width * ImgHeight  / SrcImg.Height;
                    NewHeight = ImgHeight;
                }
                returnImage = Image.FromStream(ms).GetThumbnailImage(ImgWidth, NewHeight, null, IntPtr.Zero); } 
```

但此代码在 Windows 2008、IIS7、Visual Studio 2010 和 .NET Framework 4.0 中运行良好。

错误删除“ **SelectActiveFrame** ”语句。

这是示例 tiff 文件。 [[鼠标右键-另存为“test.tif”]](http://cfile10.uf.tistory.com/original/1352E435506EC32017F0D3)

怎么了？或任何好的解决方案？

# objective-c - coreplot：右滚动并没有真正起作用

> ID：12745310
> 
> 赞同：0
> 
> 时间：2012-10-05T11:28:08.880
> 
> 标签：objective-c, ios, core-plot, swipe

我正在使用核心情节并允许用户交互。现在可以使用手势向各个方向滚动。八方？不，如果手指从左向右移动（所以我尝试从 100 滚动到 0），有时不会发生任何事情或比通常预期的要少得多。所以如果我向相反的方向滚动，相同的点仍然在我的手指下。如果我从左到右滚动，移动就会少得多。

我不知道问题出在哪里。特别是，因为我也尝试通过滑动来实现滚动（我自己的 Swiping-Implementation，而不是 Coreplot 实现），结果几乎是一样的：所有滑动都有效，只有右滑动有问题。

好吧，我有一个想法：在 CorePlot 库中已经以某种方式实现了 Right-Swipe 以执行其他操作，并且手势被识别为执行超出预期的其他操作。...但我什么也没发现。

想法？

# emacs - 脚本 magit 计时问题

> ID：12745311
> 
> 赞同：0
> 
> 时间：2012-10-05T11:28:10.917
> 
> 标签：emacs, elisp, magit

`C-x v =` `vc-diff`很好。`magit-status`但是，如果差异显示在缓冲区中，我可以直接使用差异。

我试图在这里做到这一点：

```
(defvar le::vc-diff-data nil)
(defun le::magit-go-to-change-once ()
  (destructuring-bind (filename orig-buff relative-name) le::vc-diff-data
    (pop-to-buffer "*magit: magit*")
    (goto-char (point-min))
    (if (and (search-forward-regexp "^Changes:$" nil t)
             ;; WIP fix
             (progn (magit-show-level-2) t)
             (search-forward relative-name nil t))
        (progn (recenter-top-bottom 0)
               ;; WIP fix me here
               (magit-show-level-4)
               )
      ;; no diff
      (pop-to-buffer orig-buf)
      (message "no diff found.")))
  (remove-hook 'magit-refresh-status-hook #'le::magit-go-to-change-once))

(defadvice vc-diff (around magit-redirect activate compile)
  "redirect to magit"
  (let* ((vc-info (vc-deduce-fileset t))
         (filename (buffer-file-name))
         (orig-buf (current-buffer))
         (relative-name (replace-regexp-in-string
                         (concat "\\`"
                                 (regexp-quote (expand-file-name (locate-dominating-file filename ".git"))))
                         "" filename)))
    (if (string-equal "Git" (car vc-info))
        (progn
          (setq le::vc-diff-data (list filename orig-buf relative-name))
          (add-hook 'magit-refresh-status-hook #'le::magit-go-to-change-once)
          (call-interactively 'magit-status))
      ad-do-it))) 
```

但是“magit-show-level*”功能失败。不过，当我 `eval-expression`在 magit 缓冲区中使用时，它可以工作。所以也许这是一个时间问题，我必须在其他地方挂上钩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:11:30.443

正如我在评论中所说，在与部分相关的功能不起作用的时候调用了钩子。您可以从那里尝试 magit：[https](https://github.com/vanicat/magit/tree/t/refresh-stasus-hook) ://github.com/vanicat/magit/tree/t/refresh-stasus-hook ，您的代码应该可以使用它。

再见，你的提议很有趣，把它整合到 magit contrib 的提议中可能会很棒。

# java - 启用/禁用与组合框相关的 Java swing 按钮

> ID：12745324
> 
> 赞同：2
> 
> 时间：2012-10-05T11:28:58.847
> 
> 标签：java, swing

当用户更改组合框中的选定项目时，如何更新按钮的状态（启用/禁用）？

该按钮具有对组合框的引用，但组合框对按钮一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:33:53.063

如果按钮具有对组合框的引用，则该按钮可以在组合框中注册一个动作侦听器，您可以在其中更改按钮的状态。

```
final JButton button = new JButton();
final JComboBox comboBox = new JComboBox();

comboBox.addActionListener( new ActionListener() {
    @Override
    public void actionPerformed( final ActionEvent event ) {
        // Your logic to determine when to enable/disable:
        final boolean enabled = comboBox.getSelectedIndex() == 0;
        button.setEnabled( enabled );
    }
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:34:54.357

组合框不需要知道按钮。您需要向组合框事件添加一个侦听器，如下所示：

```
public class ComboBoxDemo ... implements ActionListener {
. . .
    petList.addActionListener(this) {
. . .
public void actionPerformed(ActionEvent e) {
    JComboBox cb = (JComboBox)e.getSource();
    String petName = (String)cb.getSelectedItem();
    yourButton.setEnabled(true/false);
}
. . . 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:34:14.993

可以简单地在和 中`JButton`添加自己的，然后您可以根据组合框的选定项更改 的状态。`ActionListener``JComboBox``ActionListener``JButton`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-05T18:57:45.050

我以前编写过代码，其中启用或禁用按钮取决于填充文本字段并一起选择组合框的项目。在这里可能会有所帮助。

```
jComboBox.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jComboBoxActionPerformed(e);
            }
        });
...
jTextField.getDocument().addDocumentListener(new DocumentListener() {
            public void insertUpdate(DocumentEvent e) {
                jTextFieldDocumentListener(e);
            }
            public void removeUpdate(DocumentEvent e) {
                jTextFieldDocumentListener(e);
            }
            public void changedUpdate(DocumentEvent e) {
                jTextFieldDocumentListener(e);
            }
        });
        jTextField.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                jTextFieldActionPerformed(e);
            }
        });
...

private void jComboBoxActionPerformed(ActionEvent e){
        if(jComboBox.getSelectedIndex() == -1)
            jButton.setEnabled(false);
        else if(!jTextField.getText().equals(""))
            jButton.setEnabled(true);
    }
private void jTextFieldDocumentListener(DocumentEvent e){
        if(jTextField.getText().equals("") || jComboBox.getSelectedIndex() == -1){
            jButton.setEnabled(false);
        }
        else{
            jButton.setEnabled(true);
        }
    }

    private void jTextFieldActionPerformed(ActionEvent e){

        if(jTextField.getText().equals("")){
            jButton.setEnabled(false);
        }
        if(!(jTextField.getText().equals(""))){
            jButton.setEnabled(true);
        }
    } 
```

如果选择了组合框并填充了文本字段，则将启用该按钮。否则不会启用。

# c# - 如何在 Visual C++ 控制台应用程序中添加 C# dll？

> ID：12745325
> 
> 赞同：2
> 
> 时间：2012-10-05T11:28:58.380
> 
> 标签：c#, visual-studio-2010, visual-c++, dll, dllimport

> **可能重复：**
> [如何在 vc++ 中使用 c# Dll？](https://stackoverflow.com/questions/980808/how-to-use-c-sharp-dll-in-vc)

我已经在 c 语言中创建了一个类并制作了该类的 DLL，现在我想在我的 VC++ 项目中使用 DLL 文件中的方法。

我知道如何在 VC++ 项目中添加 .lib 文件，但如何在 VC++ 项目中添加 DLL 文件我不知道。

我想创建我在 VC++ 项目的 DLL 中定义的类的对象，并通过我想访问其方法的对象。

当我尝试此操作时，出现以下错误：

```
support.microsoft.com/kb/828736 error "referenced assembly entlibcontrib.data.mysql does not have strong name" 
```

请指导我完成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:33:02.610

请记住使 DLL 对 COM 可见并遵循[本指南](http://support.microsoft.com/kb/828736)。对于可见性，您可以更改`AssemblyInfo.cs`和添加`[assembly: ComVisible(true)]`或通过 Visual Studio 的集成属性编辑器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:48:21.950

你的 c# dll 需要是 ComVisible 属性

```
[assembly: ComVisible(true)] 
```

有关更多信息，请参见[此处](http://support.microsoft.com/kb/828736)

如果您是非托管 C++ 项目，那么您必须使用 COM 互操作来访问程序集。之后，您可以像访问任何其他 COM 组件一样访问它

# php - 在 PHP 中向上舍入到最接近的 50,000

> ID：12745332
> 
> 赞同：0
> 
> 时间：2012-10-05T11:29:17.787
> 
> 标签：php, rounding

有没有办法在 PHP 中四舍五入到最接近的 50,000？

我已经调查过了，但是文档没有建议这样做的方法，而且看起来它似乎只是用于向上/向下舍入到最接近的数字。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T11:32:33.143

```
/**
 * Round a number up to the nearest multiple of $n.
 *
 * @param int $int  Number to round.
 * @param int $n    Round to the nearest $n.
 *
 * @return int
 */
function round_up_to_nearest_n($int, $n) {
    return ceil($int / $n) * $n;
}
echo round_up_to_nearest_n(74268, 50000); //Outputs 100000 
```

除以要舍入的数字，进行舍入，然后再乘以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:31:58.933

这个怎么样：

```
$number = ceil($value / 50000) * 50000; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:32:05.797

尝试这个：

```
$number = "78921";
$round = round($number / 50000) * 50000; 
```

# asp.net-mvc - MVC 3 - 复选框发送值

> ID：12745333
> 
> 赞同：0
> 
> 时间：2012-10-05T11:29:23.690
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我想准备两个复选框。第一个复选框将始终具有值 true 并始终被选中，但我不知道该怎么做。

![在此处输入图像描述](../Images/0676a60b8ef9f460989c47e26cd98e21.png)

在第二个复选框中，如果客户同意，此复选框将向我发送一些值。这是我的示例，但不正确。

```
@Html.CheckBoxFor(m => m.SaleAgree)
@{
    ViewData["SaleAgree"] = true;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:37:03.630

第一个复选框的值始终为 true：

```
@Html.CheckBoxFor(x => x.SaleAgree, new { @checked="checked" }) 
```

第二个复选框 如果客户同意，此复选框将向我发送一些值：

```
@Html.CheckBoxFor(x => x.SecondProperty, new { id="second" }) 
```

然后`jquery`： http: [//jsfiddle.net/X2RtY/](http://jsfiddle.net/X2RtY/)（在更改事件中您可以提出请求`$.ajax`）

# mysql - 在这种情况下 group_concat 如何与 where 条件一样

> ID：12745352
> 
> 赞同：0
> 
> 时间：2012-10-05T11:30:12.090
> 
> 标签：mysql, group-concat

我有表（mysql 5.5 INNODB）：样本小数据+剪切不相关的问题列 - 真实数据巨大（会议表中超过 10,000,000 行）

**输入：**

```
day:

day_id(primary key)|sunday|monday|tuesday|wensday|thursday|friday|saturday
---------------------------------------------------------------------------
60                 |1     |1     |1      |1      |1       |1    |1
74                 |0     |1     |0      |0      |0       |0     |0
98                 |0     |0     |0      |0      |0       |0     |0
..etc......................................................................

meeting:

day_id(foreign key)|time    |type
----------------------------------
60                 |20:09:00|1
98                 |07:00:00|1
74                 |22:01:00|4
98                 |10:00:00|1
60                 |23:09:00|2
98                 |06:00:00|2
74                 |21:04:00|6
98                 |08:00:00|6
.....etc..................... 
```

**输出：**

```
sunday_times          |monday_times                           |....etc
-------------------------------------------------------------------------------------------------
20:09:00,etc...       | 20:09:00,etc..   |
................etc.............................................................................. 
```

我想是这样的（但我是 sql 新手，所以我不知道它是好还是合法）

```
 SELECT 
   GROUP_CONCAT(time where day.sunday=1 ORDER BY time) as sunday_times, 
   GROUP_CONCAT(time where day.monday=1 ORDER BY time) as monday_times,  
   etc..
 FROM day
 JOIN meeting ON meeting.day_id=day.day_id
 GROUP BY type 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:37:38.450

您的语法很接近，您需要在以下内容中使用`CASE`语句`GROUP_CONCAT()`：

```
SELECT 
   GROUP_CONCAT(case when day.sunday=1 then time end order by time) as sunday_times, 
   GROUP_CONCAT(case when day.monday=1 then time end order by time) as monday_times
 FROM day
 JOIN meeting ON meeting.day_id=day.day_id
GROUP BY type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b6bab/6)

# .htaccess - .htaccess 动态重定向代码

> ID：12745355
> 
> 赞同：0
> 
> 时间：2012-10-05T11:30:18.353
> 
> 标签：.htaccess, redirect

我在弄清楚如何大规模重定向大量文件时遇到了一些麻烦。

[http://www.mysite.com/verify.php?site=mydomain.com](http://www.mysite.com/verify.php?site=mydomain.com)

到

[http://www.mysite.com/verify/mysite.com](http://www.mysite.com/verify/mysite.com)

当然，“mysite.com”将始终是一个不同的域，因此应该是动态的。

这是我使用的代码：

```
RedirectMatch 301 ^/verify\.php\?site=([a-zA-Z0-9\.\-]+)$ /verify/$1 
```

有人可以发布我需要更改的内容以使其正常工作或上面的代码的正确版本吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:49:04.553

试试这个：

**编辑：**

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^verify/(.*)$ verify.php?site=$1 [L] 
```

**然后尝试在浏览器中加载它：**
[http ://www.mysite.com/verify/mysite.com](http://www.mysite.com/verify/mysite.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:59:43.130

尝试以下方法之一：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /verify\.php\?site=([^&\ ]+)
RewriteRule ^ /verify/%1 [L,R=301] 
```

或者

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^site=([^&]+)
RewriteRule ^/?verify\.php$ /verify/%1 [L,R=301] 
```

# c++ - Arduino 的代码块：没有这样的文件或目录

> ID：12745358
> 
> 赞同：1
> 
> 时间：2012-10-05T11:30:25.087
> 
> 标签：c++, arduino, codeblocks

我的问题基本上是这样的：我已经安装了带有 Arduino 插件的 CodeBlocks，并且可以编译和运行测试程序（闪烁 LED），现在我正在尝试编写一个使用以太网模块的测试程序，但我收到以下错误：

```
C:\Users\Dai\Documents\Projects\test\sketch.cpp|2|fatal error: Ethernet.h: No such file or directory| 
```

代码如下所示：

```
#include <Arduino.h>
#include <Ethernet.h>

byte mac[] = {0xDE, 0xAD, 0xBE, 0xEF, 0xFE, 0xED};
byte ip[] {192,168,0,2};
byte gateway[] = {192,168,0,1};
byte subnet[] = {255,255,255,0};

Server server = Server(23);
void setup()
{
    pinMode(9, OUTPUT);
    Ethernet.begin(mac, ip, gateway, subnet);

    server.begin();
}

void loop()
{
    Client client = server.available();

    if(client == true) {
        //server.write(client.read());
        digitalWrite(9, HIGH);
    }
    else {
        digitalWrite(9, LOW);
    }
} 
```

并且所有列出的头文件及其 .cpp 文件似乎都存在。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:42:25.140

答案可能为时已晚，但只是为了记录；创建一个新项目，右键单击名称 -> 递归添加文件 -> 浏览到库文件夹并选择它，单击确定，然后构建并...关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:00:31.753

这不是您的代码的问题，而是配置的问题。

当编译器看到以下行时，它会尝试包含库文件。

```
#include <Ethernet.h> 
```

它无法包含它。检查插件以查看应放置库文件的位置并将库文件复制到该目录，您的问题应该得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T17:01:23.737

在 Makefile 上，找到`INCLUDE_LIBS`变量并设置你需要的库，例如：

```
INCLUDE_LIBS=EEPROM;SD;LiquidCrystal;Ethernet; 
```

# java - Fancybox 不适用于 HTML/java 驱动的内容

> ID：12745361
> 
> 赞同：0
> 
> 时间：2012-10-05T11:30:30.967
> 
> 标签：java, html, ajax, fancybox

我有一个问题已经困扰我大约 2 天了，而且似乎在其他地方得到的响应很低。我正在将 XML 的字符串沿着数据运行到 AJAX 选项卡中。

然后使用 Javascript 来中断并仅在我想要的位置显示 XML 数据，然后我希望一些数据通过 Lightbox 出现，而​​不是通过“阅读更多”超链接出现在 AJAX 选项卡上。

一些数据正常显示，但灯箱根本不工作，脚本已正确加载和链接，但我似乎无法弄清楚为什么它不工作。每个灯箱都是通过脚本生成的，但没有灯箱或链接正常工作。

因为一些 Lightbox 的工作使用与 div 锚点类似的东西，所以它似乎是锚定。

对于实时版本，请参阅：

[http://universitycompare.com/university-guide/london-metropolitan-university/](http://universitycompare.com/university-guide/london-metropolitan-university/)

或者，我所做的脚本如下：

```
<script type="text/javascript">
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","http://universitycompare.com/wp-content/themes/blue-and-grey/XML/<?php echo the_field('university_xml_courses'); ?>",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='0'>");
var x=xmlDoc.getElementsByTagName("KISCOURSE");
for (i=0;i<x.length;i++)

  { 
  document.write("<tr id='CourseArea'><td><h3 id='CourseTitle'>");

  // TITLE
  document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  document.write("</h3>");
  document.write("<p class='ForP'>-&nbsp;&nbsp;");
  document.write(x[i].getElementsByTagName("MODE")[0].childNodes[0].nodeValue); 
  document.write("</p><div class='clear'></div>");

  // UCAS CODE
  document.write("<p id='ucascode'>");
  document.write("<b>UCAS CODE</b>&nbsp;&nbsp;&nbsp;");
  document.write(x[i].getElementsByTagName("UCASCOURSEID")[0].childNodes[0].nodeValue);
  document.write("</p>"); 

  // READ MORE LIGHTBOX
  document.write("<img src='http://universitycompare.com/wp-content/themes/blue-and-grey/images/info-icon.png' width='15' style='margin:0px 2px 0px -4px;'>");
  document.write("<a id='various' href='#inline'>Read More</a>&nbsp;&nbsp;&nbsp;");

  // VISIT COURSE LINK
  document.write("<a class='courselink' href='");
  document.write(x[i].getElementsByTagName("CRSEURL")[0].childNodes[0].nodeValue);
  document.write("' target='_blank'>Visit course website</a>");
  document.write("</td></tr>");

  // LIGHTBOX INFO
  document.write("<div class='inline' style='display:none; width:500px; height:500px;'>"); 
  document.write(x[i].getElementsByTagName("CRSEURL")[0].childNodes[0].nodeValue); 
  document.write("</div>");
  }

document.write("</table>");

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T01:08:17.920

据我所知，您正在将 fancybox 绑定到选择器`.various`（带有 的元素`class="various"`）：

```
$(document).ready(function() {
    $(".various").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
```

...但是，您的内容中没有任何具有此类的元素*，*但是

```
<a id='various' href='#inline'>Read More</a> 
```

也许你的意思是

```
<a class='various' href='#inline'>Read More</a> 
```

**其他建议**：修复一些 html 语法不一致的问题，例如

*   您的`<head>`开始标签丢失。
*   将所有脚本放在您的`<head>`或`<body>`部分内，但不要放在两者之间......这个：

    ```
    <head>
    .
    </head>
    <script> ....</script>
    <body>
    .
    </body> 
    ```

    ...不推荐

*   其他 javascript 错误可能会影响其他 jQuery 插件的行为。您的页面抛出此 js 错误：

    ```
    Timestamp: 06/10/2012 5:48:24 PM
    Error: TypeError: $(this).get(0) is undefined
    Source File: http://universitycompare.com/wp-content/themes/blue-and-grey/jquery.ticker.js
    Line: 25 
    ```

# python - 是否有与 Python 的 cmath.rect 等效的 Matlab？

> ID：12745362
> 
> 赞同：2
> 
> 时间：2012-10-05T11:30:37.730
> 
> 标签：python, matlab, complex-numbers, cmath

是否有一个与 Pythons 等效的 Matlab ，它返回带有极坐标`cmath.rect(r, phi)`的复数，而无需求助于`x``r``phi`

```
x = r * complex(  cos(phi), sin(phi)  ); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:40:43.450

我想你正在寻找[`pol2cart`](http://www.mathworks.com/help/matlab/ref/pol2cart.html). 但参数的顺序不同，即`pol2cart(phi,r)`如下：

```
[x,y] = pol2cart(pi/6,1)
x =
    0.8660
y =
    0.5000 
```

如果您需要复杂的输出，您可以在之后执行以下操作：

```
complex(x,y)
ans =    
   0.8660 + 0.5000i 
```

# javascript - 如何显示 div 并将其移动到单击鼠标的位置

> ID：12745365
> 
> 赞同：0
> 
> 时间：2012-10-05T11:30:46.233
> 
> 标签：javascript, html, onclick

我有一个打开 div 的链接，它工作正常，但我不能让它移动到鼠标点击的位置。代码如下：

关联：

```
<a href="#" onclick="show_popup('my_popup')" id="napFilt">Filter</a> 
```

功能：

```
 function show_popup(id) {               
     if (document.getElementById){ 
         obj = document.getElementById(id); 
         if (obj.style.display == "none") {
             obj.style.display = "";
         } 
     } 
 } 
```

使用JS，如何使显示的div移动到鼠标点击的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:02:22.577

确保您“生成”的 div 位于 body 标记中。它应该有“位置：绝对；” 作为CSS属性。然后你这样做：http: [//jsfiddle.net/GSxNx/5/](http://jsfiddle.net/GSxNx/5/)

因为我在那里评论了源代码，所以我在这里不加评论。;) 只有一件事：这不是！跨浏览器测试。它在 FF 16.0 中运行良好；）

# php - 不准确的计算（四舍五入？） - PHP

> ID：12745369
> 
> 赞同：1
> 
> 时间：2012-10-05T11:30:57.217
> 
> 标签：php, formula, rounding-error, arithmetic-expressions

编辑：问题已解决

我正在尝试移植一种流行的评分算法，该算法将 Counter-Strike 比赛中的一些统计数据分析到 PHP 脚本中。该系统的概要可以在下面的链接中找到（新闻帖子的底部）： [http ://www.hltv.org/?pageid=242&eventid=0](http://www.hltv.org/?pageid=242&eventid=0)

无论如何，所以我已经在 PHP 中设置了所有内容，并且我有理由确定一切都是正确的。为了计算的目的，假设：

```
$rating1K = 5;
$rating2K = 8;
$rating3K = 3;
$rating4K = 0;
$rating5K = 0;
$kills = 30
$deaths = 19
$round = 30 
```

这是我的代码：

```
$kpr = $kills / $round; // kills per round
$killRating = ($kills / $round / $kpr); 

$spr = ($round - $deaths) / $round; // survivals per round
$survivalRating = ($round - $deaths) / $round / $spr;    

$averageRMK = ((1*$rating1K + 4*$rating2K + 9*$rating3K + 16*$rating4K + 25*$rating5K)/$round);
$roundsWithMultipleKillsRating = ((1*$rating1K + 4*$rating2K + 9*$rating3K + 16*$rating4K + 25*$rating5K)/$round/$averageRMK);

$rating = ($killRating + 0.7 * $survivalRating + $roundsWithMultipleKillsRating) / 2.7;
echo $rating; 
```

问题是 $killRating、$survivalRating 和 $roundsWithMultipleKillsRating 在 PHP 脚本中似乎总是返回 1，而如果我自己手动计算它们，它们是不同的。例如，如果我自己计算 $killRating，我得到 1.5789 等，但 PHP 返回“1”。

我该怎么做才能解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:40:07.853

你计算错了...

```
$kpr = $kills / $round; // kills per round
$killRating = ($kills / $round / $kpr); 
```

等于

```
$kpr = 30 / 30; // 1
$killRating = (30 / 30 / 1); //1 
```

和

```
$spr = ($round - $deaths) / $round; // survivals per round
$survivalRating = ($round - $deaths) / $round / $spr; 
```

等于

```
$spr = (30 - 19) / 30; // 0.36666
$survivalRating = (30 - 19) / 30 / 0.3666; // 1 
```

你自己的计算是错误的。PHP在这里做的一切都很好。

请注意，kpr 是 $kill/$round，当你除 $kill/$round/$kpr 时，它总是 1。任何数字除以自身等于 1。我不敢相信每个人都在谈论浮点数和整数，甚至理解数学...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:40:51.873

```
$kills = 30;
$deaths = 19;
$round = 30;

$kpr = $kills / $round; // kills per round
$killRating = ($kills / $round / $kpr); 
```

对于 KPR：击杀数 / 回合 = 30 / 30 = 1

对于 KillRating：kills / round / kpr = 30 / 30 / 1 = 1（这只是 kpr/kpr，为什么？）

PHP 给你 1 作为该部分的答案，因为答案是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:33:50.083

确保您正在处理`floats`而不是`integers`. 尝试铸造它们。

# java - Eclipse（或任何工具），将所有作者从 svn 添加到 java 文件

> ID：12745370
> 
> 赞同：0
> 
> 时间：2012-10-05T11:30:56.763
> 
> 标签：java, eclipse, svn, eclipse-plugin, svnkit

是否有任何**自动**工具可以将**所有** `@author`标签从 svn 添加到**所有**java 文件？我找到了添加最后一个提交者的解决方案（[像这样](https://stackoverflow.com/questions/2295661/fill-version-tag-with-subversion-in-eclipse)），但我想添加所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:59:46.913

我知道您加粗了**automatic**，但如果您愿意使用 Eclipse 中的内容，您可以执行以下操作：

*   打开 SVN 存储库透视图。
*   右键单击文件夹或文件，然后左键单击“显示历史记录”。

![显示历史](../Images/0ac7adc228e8cec42719198a43aa15c3.png)

*   按住 Ctrl 键，左键单击所有修订。
*   右键单击，然后左键单击“生成更改日志”。
*   左键单击 svn 日志和剪贴板。
*   打开写字板，然后粘贴。

这是我写字板中的前 3 个条目

```
r2240 | BOP00082 | 2011-10-26 16:49:53 EDT

Sentry Cobol

Update Subversion with the code changes made by Blue Phoenix on September 26, 2011.
----------------------------------------------------------------------------
r1902 | bop00082 | 2011-03-15 14:07:41 EDT

Sentry Cobol

Load the unexpanded source modules from the Blue Phoenix drop of 18 January 2011.
----------------------------------------------------------------------------
r1211 | bop00082 | 2010-03-17 09:42:57 EDT

Sentry Cobol

Load the unexpanded source modules from the Blue Phoenix drop of 16 March 2010.
---------------------------------------------------------------------------- 
```

*   将更改日志插入文件中。

您还可以下载[SVNKit](http://svnkit.com/)，并享受创建 Eclipse 插件的乐趣，该插件可以自动执行我在此答案中概述的步骤。

# xml - 使用 perl + LibXML 将 XSLT 样式表声明添加到给定的 XML

> ID：12745373
> 
> 赞同：2
> 
> 时间：2012-10-05T11:31:14.500
> 
> 标签：xml, perl, stylesheet, xml-libxml

前提：我来自 C++，我对 Perl 很陌生。我正在尝试向给定`.xml`文件添加样式表声明。该`.xml`文件由第三方创建并下载到一边；我们不是在质疑 XML 的正确性或格式良好。我们也不知道文件中的 XML 是缩进的还是单行的。

无法仅使用 Perl 巧妙地操作文件，我使用了 XML::LibXML，但我仍然卡住了。这是到目前为止我所做的。

```
#!/usr/bin/perl
use strict;
use warnings;
use XML::LibXML;

my $path = './file.xml';

my $fxml = XML::LibXML::Document->new('1.0','utf-8');
my $pi = $fxml->createPI("xml-stylesheet");
$pi->setData(type=>'text/xsl', href=>'trasf.xsl');
$fxml->appendChild($pi);

$XML::LibXML::skipXMLDeclaration = 1;
my $docwodecl = XML::LibXML::Document->new;
$docwodecl = $doc->toString;

open my $out_fh, '>', $path;
print {$out_fh} $final_xml.$docwodecl;
close $out_fh; 
```

有了这个，我只得到没有初始声明的 XML，`<?xml version="1.0" encoding="ISO-8859-1"?>`并且 utf-8 字符都搞砸了。我试过用这样的东西

```
$fxml->setDocumentElement($doc);
$fxml->toFile($path); 
```

但它不起作用。我可以使用一些方法来实现我的（毕竟很简单）目标？我查看了[文档](http://search.cpan.org/~shlomif/XML-LibXML-2.0004/lib/XML/LibXML/Document.pod)，但找不到任何有用的东西。

### 编辑

样式表声明必须`<?xml version="1.0" encoding="UTF-8"?>`在实际 XML 之后和之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:50:34.023

将您的 fxml 初始化更改为

```
my $fxml = XML::LibXML->load_xml(location => $path); 
```

您没有在任何地方加载原始文件。

## 更新

您可以使用以下方法在根元素*之前*插入节点`insertBefore`：

```
my $path = '1.xml';
my $fxml = XML::LibXML->load_xml(location => $path);
my $pi   = $fxml->createPI('xml-stylesheet');
$pi->setData(type => 'text/xsl', href => 'trasf.xsl');
$fxml->insertBefore($pi, $fxml->documentElement); 
```

# marshalling - 将 DataType 从 C（非托管）映射到 C#（托管）

> ID：12745378
> 
> 赞同：0
> 
> 时间：2012-10-05T11:31:31.410
> 
> 标签：marshalling, unmanaged, unsigned-integer

我需要从 C DLL 获取数据到 C# 应用程序。这是错误：

无法编组类型为“KnittingWago.Common.WAGO_DATA_TO_USER_T”的字段“计数器”：托管/非托管类型组合无效（数组字段必须与 ByValArray 或 SafeArray 配对）。

这是DLL .h

```
#define WAGO_NB_COUNTERS_C 80
#define WAGO_NB_ENCODERS_C 10 

struct WAGO_DATA_TO_USER_T
{
   unsigned int Counters[WAGO_NB_COUNTERS_C];
   int Encoders[WAGO_NB_ENCODERS_C];
   unsigned int Weight;
   bool CalibrationValid;
   bool LastCalibrationFailed;
}; 
```

这是 C# 结构声明：

```
const int WAGO_NB_COUNTERS_C = 80;
const int WAGO_NB_ENCODERS_C = 10;

struct WAGO_DATA_TO_USER_T
{
   [MarshalAs(UnmanagedType.U4, SizeConst = GlobalConstant.WAGO_NB_COUNTERS_C)]
   UInt32[] Counters;
   [MarshalAs(UnmanagedType.I4, SizeConst = GlobalConstant.WAGO_NB_ENCODERS_C)]
   Int32[] Encoders;
   UInt32 Weight;
   Boolean CalibrationValid;
   Boolean LastCalibrationFailed;
}; 
```

如何声明 C# 结构以获取正确的数据而不会出错？

谢谢

* * *

编辑 ：

我已将 Struct 重写为：

```
internal struct WAGO_DATA_TO_USER_T
{
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = GlobalConstant.WAGO_NB_COUNTERS_C)]
    UInt32[] Counters;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = GlobalConstant.WAGO_NB_ENCODERS_C)]
    Int32[] Encoders;
    UInt32 Weight;
    Boolean CalibrationValid;
    Boolean LastCalibrationFailed;
}; 
```

不再有错误，但值与预期不符。

应该像：

```
Counter[0] = ~ 5000
Counter[1] = ~ 30000
Counter[2-79] = 0 
```

真的是：

```
Counter[0] = 40
Counter[1] = 1080228
Counter[2] = 82964616
Counter[3-79] = All have a non-zero value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:21:00.810

编组是正确的，但我调用的设备未由外部非托管 dll 初始化。所以我正在读取导致无效数据的 uninitialisez 内存

# javascript - 如何读取多行表单元素？

> ID：12745379
> 
> 赞同：0
> 
> 时间：2012-10-05T11:31:33.013
> 
> 标签：javascript, jquery, html, json

我在多行中有表单元素。命名这些元素的最佳方法是什么，以便我可以读取表单中的所有值并生成带有这些值的 JSON？由于 HTML 不支持数组，最好的选择是什么？

每行有 2 个文本元素和 1 个选择元素。这些行是动态生成的。

编辑：基本上我想要一种简单的方法将我的数据转换为 JSON，以便我可以将它传递给服务。

我的每一行看起来像这样

```
<tr><td><input type="text"></input></td>
<td><select><option>Exact</option><option>Regex</option><option>Action</option></select></td>
<td><input type="text"></input></td></tr>

<tr><td><input type="text"></input></td>
<td><select><option>Exact</option><option>Regex</option><option>Action</option></select></td>
<td><input type="text"></input></td></tr> ..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:50:17.833

我*想*我明白了。您可以更改您的 HTML：

```
<div class="form"> // I prefer getting a namespaced super element
<div class="row">
    <input name="name[0][yo]"/>
    // Other elements
</div>
<div class="row">
    <input name="name[1][yo]"/>
    // other elements
</div>
</div> 
```

然后在 JQuery 中：

```
$.post('to_my_page', $('.form input, .form select, .form textarea').serialize(), function(data){
    // Done
}, 'json'); 
```

这应该允许您将一组输入行发布到另一个页面。

这当然是一个极其简单和基本的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:47:21.607

acoplish 的一种好方法是在值上放置一个 id，例如，您只使用一个文本将其包装在一个跨度中，然后当您需要使 JSON 遍历行并从中获取数据时，即：

```
var elements = []
$('#formId tr').each(function (i, e){
    elements.push({
        ElementTd1: $('#td1').val()    
   })  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:50:45.207

要从表单中提取所有数据，您可以简单地使用[jQuery 的 serializeArray()](http://api.jquery.com/serializeArray/)方法，如下所示：

```
$('form').serializeArray(); 
```

[jsFiddle 示例](http://jsfiddle.net/wrNhm/)

# mobile - Facebook 应用程序通知：它们可以通过电子邮件和移动/平板电脑推送吗？

> ID：12745380
> 
> 赞同：1
> 
> 时间：2012-10-04T17:54:57.293
> 
> 标签：mobile, email, facebook, tablet

我正在尝试查找有关开发从 FB 应用程序发送的 Facebook 通知的 UX 的信息。

该应用程序将要求用户拥有 FB 权限才能在应用程序 (iFrame) 中保存喜爱的内容。我们希望在公共内容更新时提醒用户返回应用（每月一次），但我们也希望在授权内容更新时提醒他们返回（每月一次）。

在这些情况下，是否可以为手机/平板电脑发送电子邮件和推送通知？还是最好只发送现场通知？电子邮件/推送通知甚至可能吗？我很难在 FB Dev 上找到明确的信息。地点。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:16:36.260

所有使用[开发者 API 开发的应用程序都可以启用通知](http://developers.facebook.com/docs/reference/fql/notification/)。这就是为什么游戏可以使用您的原始通知流向您发送通知。

我还建议你只使用这种通信模式，因为来自 Facebook 应用程序的电子邮件可能不是 Facebook 用户想要他们的通知的方式。还请记住，您必须征得用户许可才能向用户发送电子邮件，并为用户提供另一个不使用您的 FB 应用程序的论据。您请求的权限越少，用户就越容易接受您的应用权限请求。

此外，Facebook 用户可以随时关闭电子邮件权限。那么您将无法发送电子邮件并失去与用户的沟通方式。

# objective-c - 如何以编程方式将 UIActivityIndi catorView 添加到右下角的视图

> ID：12745382
> 
> 赞同：0
> 
> 时间：2012-10-05T11:31:35.947
> 
> 标签：objective-c, uiview, positioning, ios6

我正在尝试以编程方式将 UIActivityIndi​​catorView 添加并定位到我的主视图的右下角。我的应用程序可以旋转。

现在在我的 viewDidLoad 方法中，我有以下代码：

```
[super viewDidLoad];        
UIActivityIndicatorView *iv = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        [iv startAnimating];
        int margin = 14;
        iv.frame = CGRectMake(
                                       self.view.frame.size.width - iv.frame.size.width - margin,
                                       self.view.frame.size.height - iv.frame.size.height - margin,
                                       iv.frame.size.width,
                                       iv.frame.size.height );
    iv.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
        [self.view addSubview:iv]; 
```

当应用程序以纵向启动时，活动指示器的位置正确。一旦我旋转设备（或横向启动应用程序），活动指示器的位置就错误了。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:17:04.467

您还需要一个灵活的上边距，以便视图会随着主视图的高度变化而向上或向下滑动。此外，父视图需要将 autoresizesSubviews 设置为 YES（默认为 YES，因此您可能没问题）。

```
distanceLabel.autoresizingMask = (UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleTopMargin); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:22:02.480

在您的视图控制器上，覆盖方法**shouldAutorotateToInterfaceOrientation**并在方向更改时更正位置。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation; 
```

# java - 重新访问 JNLP 文件时，在 IE8 中 SSL 确认对话框弹出自动关闭

> ID：12745386
> 
> 赞同：4
> 
> 时间：2012-10-05T11:31:45.017
> 
> 标签：java, javascript, gwt, ssl, internet-explorer-8

我正在解决这个非常烦人的问题，并且已经解决了太多天了，所以试试吧。

# 环境

我们有 2 个应用服务器，它们可以位于同一台机器或 2 台不同的机器上，并使用相同的签名证书，并托管 2 个不同的网络应用程序。

虽然我们假设，为了我们这里的研究案例，它们在同一台物理机器上。所以，我们有：

*   [https://company.com/webapp1/](https://company.com/webapp1/)
*   [https://company.com/webapp2/](https://company.com/webapp2/)

`webapp1`是基于 GWT 的富客户端，它在其中一个屏幕上包含一个菜单，其中包含一个用于调用位于`webapp2`. 它`window.open`通过这个 GWT 调用执行一个简单的调用来做到这一点：

```
Window.open("https://company.com/webapp2/app.jnlp", "_blank", null); 
```

# 预期行为

*   用户愉快地前往`webapp1`
*   用户导航到菜单条目以启动 WebStart 应用程序并单击它
*   浏览器会触发一个单独的窗口/对话框，根据浏览器及其安全设置，它将：
    *   请求确认导航到此安全站点，
    *   直接下载文件，
    *   如果有文件关联，可能会自动执行一个`javaws`进程，否则用户可以简单地单击文件并启动应用程序（或在这里做任何事情）。
*   如果您关闭应用程序，关闭对话框，然后重新单击菜单条目，同样的事情应该会再次发生。

# 实际行为

## 除了上帝遗弃的 IE 8 之外的任何东西

^(*（虽然我承认也有所有被上帝遗弃的 IE8 之前的东西，但是要求领主是仁慈的，我们最近已经设法让他们放弃这些傻瓜。那很接近了。让我们手牵手，表达感激之情。）*)

东西刚刚好。JNLP 被下载，应用程序运行正常，您可以关闭应用程序并重新执行所有步骤，它会愉快地重新启动。人们欢欣鼓舞。小狗是安全的，在阳光下在绿色的山丘上玩耍。开发人员可以去喝杯咖啡，然后继续做更​​有意义和更有价值的任务，比如检查 SO 问题。

Chrome 不想执行 JNLP，但谁在乎呢？客户不会因为每隔一周点击一个文件而获得 RSI。

## 在被上帝遗忘的 IE8 上

在第一次访问时，对话框打开并请求用户确认继续`webapp2`，尽管它可能不安全（这里是龙，我告诉你）。JNLP 下载并自动打开，应用程序启动。你的呼吸平稳而缓慢。

您关闭应用程序，关闭 SSL 确认对话框，然后重新单击菜单条目。对话框打开并自动关闭。什么都没有开始，文件没有下载到任何已知位置，Fiddler 只是报告连接已关闭。如果您关闭 IE 并到达该菜单项以再次单击它，它现在恢复正常工作。当然，直到您在同一会话中再次尝试。

你的心率上升，你喝了更多的咖啡，让事情变得更糟，开始在网上寻找普通的门票，在网上拍卖网站上寻找便宜但沉重的高尔夫俱乐部，去泡小极地海豹，为你的嗜血报仇，因为雷德蒙德 IE 团队的大门可能比冰块更安全，因为人们会认为他们经常受到死亡威胁。另外，IE9 和 IE10 团队已经在努力修复他们前辈留下的垃圾，所以也许你不想对他们太苛刻，而且你没有钱浪费在 PI 上来追踪负责这个烂摊子的前开发人员。

# 添加详细信息

*   我遇到了很多问题，IE8 在使用`no-cache`标头时无法通过 SSL 下载文件。这确实是我们的问题之一，现在似乎已经解决了。它可以很好地下载文件，`webapp2`使用以下标头来提供 JNLP 文件：

    ```
    response.setHeader("Cache-Control", "private, must-revalidate"); // IE8 happy
    response.setHeader("Pragma", "private");                         // IE8 happy
    response.setHeader("Expires", "0");                              // IE8 happy
    response.setHeader("Access-Control-Allow-Origin", "*");          // allow to request via cross-origin AJAX 
    ```

    response.setContentType("application/x-java-jnlp-file"); // 请执行我

*   正如您可能已经推断的那样，我们得到了一些确认对话框，因为 SSL 证书有些奇怪。不幸的是，我无法控制。假设这只是暂时的并且出于开发目的，因为我们通常不会获得生产证书。因此 SSL 证书已过期且未指定服务器。和确认对话框。如果不是 IE 就不会那么糟糕，因为其他浏览器不在乎，只需请求确认，并按预期和一致地执行。

拜托，非常拜托，帮助我，否则我可能会考虑牺牲杀戮作为一种选择。而且我想我刚刚找到了一个相当珍贵的不锈钢高尔夫球杆，所以我正处于血腥的边缘。

* * *

# 旁注

实际上可能与[IE8 window.open SSL Certificate issue](https://stackoverflow.com/questions/3492288/ie8-window-open-ssl-certificate-issue)有关。虽然它没有解释为什么对话框会自动关闭（这真的是我的......），但它可能有助于没有确认对话框并且根本不需要对话框。例如，我认为在该菜单中只使用一个简单的 URL 而不是完全由 GWT 代码管理来调用 Window.open 可以解决问题。但是我无法控制那个菜单，而且我很好奇如何解决这个问题，以及为什么它首先会发生......

# url-rewriting - 将 Kohana 2.4 从根位置转移以使其可通过目录访问的问题？

> ID：12745390
> 
> 赞同：0
> 
> 时间：2012-10-05T11:31:57.027
> 
> 标签：url-rewriting, kohana

我开发了一个 kohana 项目 2.4 版本，我是通过配置虚拟主机开发的，我们正在使用某个域 aa.com 访问它，现在我必须将项目移动到名为 kohana 的文件夹并通过 aa.com/ 访问它科哈纳。如果我以这种方式访问​​它，那么我的 url 会更改，因此 css 和 js 文件不包括在内，因为我提供的 src url 像 /public/css/ 所以它不起作用，调用控制器也是如此。就像我使用这种格式 /user/login/ 调用控制器一样。现在，当我单击以显示未找到的 aa.com/user/login 时的 url，反过来它应该自动出现，如 aa.com/kohana/user/login。有什么办法可以通过更改 htaccess 文件或破解 routes.php 文件。?

我应该能够在 url 之前自动附加 /kohana/ 。

请建议我一种如何实现它的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:03:29.990

就在这里！

我只是在 kohana 3.0 之后才开始，但你可以更改 rewritebase。

在您的 .htacces 中，它可能会说“rewritebase /”

将此更改为您的新目录。“重写基础/kohana/”

如果 2.4 在某处有引导程序（我不确定），它应该说“base_url”。您将其更改为与 .htaccess 相同。/kohana/。

编辑：这是一个例子：

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /kohana/

# Protect application and system files from being viewed
RewriteRule ^(application|modules|system) - [F,L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* index.php/$0 [PT,L] 
```

# java - JAVA SimpleFormatter，无法设置正则表达式

> ID：12745392
> 
> 赞同：0
> 
> 时间：2012-10-05T11:32:01.037
> 
> 标签：java, regex, logging, formatting, string-formatting

我在我的程序中添加了一个记录器，在网上冲浪我在我的代码中添加了一个非常简单的记录器，它具有基本的 2 行定义：

```
private static final Logger LOG = Logger.getLogger(GUI.class.getName());

public MyClass(){

    //other stuff...
    LOG.info("text to log");
    //other stuff...
} 
```

经过几个小时的开发，我想知道如何格式化记录文本的样式，于是我来到了这门课：

```
java.util.logging.SimpleFormatter 
```

阅读 Javadoc 我可以找到：

可以通过在 java.util.logging.SimpleFormatter.format 属性中指定格式字符串来自定义格式。

也有几个例子：

```
Some example formats:
java.util.logging.SimpleFormatter.format="%4$s: %5$s [%1$tc]%n"
This prints 1 line with the log level (4$), the log message (5$) and the timestamp (1$) in a square bracket.

WARNING: warning message [Tue Mar 22 13:11:31 PDT 2011] 
```

我尝试了其中的每一个，但“格式”字段是“不可见的”（我想是私人的），所以我不能直接编辑它。没有任何类似于 setStringVar(String regex); 的方法。从外部设置 var。

我试图扩展类 public class MyClass extends SimpleFormatter{

但“格式”变量不可编辑。我也尝试过扩展 Formatter（SimpleFormatter 的超类）但没有成功。

我唯一能做的就是扩展 SimpleFormatter 并手动覆盖它： public String format(LogRecord rec); 带有无聊和复杂的代码。

我只是想知道是否有任何方法可以简单地使用 SimpleFormatter 类的内部正则表达式阅读器

编辑：错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:47:01.780

你看过[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/util/logging/SimpleFormatter.html)吗？它概述了 SimpleFormatter。

此外，format 是 SimpleFormatter 中的公共方法。

进一步的线

```
java.util.logging.SimpleFormatter.format="%4$s: %5$s [%1$tc]%n" 
```

应该在属性文件而不是 Java 类中定义。

老实说，我不使用 java.util.logging 我使用的是 Fildor 提到的 log4j。我觉得简单多了。首先你需要一个配置文件，比如下面的 log4j.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %5p %c{1}:%L - %m%n"/>
        </layout>
    </appender>
    <root>
        <priority value="debug"></priority>
        <appender-ref ref="stdout"/>
    </root>
</log4j:configuration> 
```

您可以自由调整转换模式，有关详细信息，请参阅[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)。然后在您的类中定义以下私有静态成员

```
static org.apache.log4j.Logger LOG = org.apache.log4j.Logger.getLogger(Testing.class); 
```

当您想要输出日志时，只需执行以下操作：

```
LOG.error("Test Error"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:43:17.910

此[LINK](http://de.wikibooks.org/wiki/Java_Standard%3a_Logging_API_von_Java)是关于如何配置 Java 标准日志记录（德语）的。我现在正试图找到一个类似的英文...

同时：我没有使用 util.logging 但对于我在上面的链接中读到的内容，我想你必须实现自己的格式化程序。

[给你](http://www.vogella.com/articles/Logging/article.html)英文。

顺便说一句：我推荐 log4j 或 slf4j/logback。

# php - PHP 继承和受保护的成员可见性

> ID：12745394
> 
> 赞同：14
> 
> 时间：2012-10-05T11:32:03.563
> 
> 标签：php, inheritance

我在 PHP 中发现了一个奇怪的继承问题。

[从 PHP 手册](http://php.net/manual/en/language.oop5.visibility.php)：

> 声明为受保护的成员只能在类本身内以及被继承类和父类访问。

`A instanceof B`对我来说，这意味着：如果或，A 可以访问 B 的受保护成员`B instanceof A`。

但是，如果 A 和 B 都扩展了 Foo，并且 Foo 有一个未在 B 中覆盖的受保护构造函数，那么我可以从 A 中创建 B 的实例。这对我来说没有意义，因为 A 不是B 和 B 不是 A 的实例。我也可以`$b->test()`从 A 内部调用受保护的方法，该方法执行 B 中实现的方法。（如果 B 不重新声明`test()`，则执行 Foo 中的实现。）对我来说，这甚至更多奇怪，因为如果 B 直接实现受保护的构造函数，我无法从 A 中创建 B 的实例。我无法访问受保护的构造函数（也在父类中声明）但访问受保护的方法（也在父类中声明）似乎很奇怪。

请注意，当我使用不扩展 Foo 的类 C 时，我确实得到了预期的行为。如果我尝试从 C 中实例化 B，我会收到一个致命错误，因为我正在尝试访问受保护的构造函数。如果我向 B 添加一个公共构造函数，则可以实例化它（这是预期的），但我仍然无法访问受保护的方法`test()`（这也是预期的行为）。当使用 A 而不是 C 时，我期望相同的行为。

再次解释的示例代码：

```
class Foo {
    protected function __construct() {
        echo('Constructing ' . get_called_class());
    }

    protected function test() {
        echo('Hello world ' . __METHOD__);
    }
}

class A extends Foo {
    public function __construct() {
        parent::__construct();
    }

    public function testB() {
        // Both of these lines work
        $b = new B();
        $b->test();
    }
}

class B extends Foo {
    protected function test() {
        echo('Hello world Again ' . __METHOD__);
    }
}

class C {
    public function __construct() {
    }

    public function testB() {
        // Both of these lines cause fatal errors
        $b = new B();
        $b->test();
    }
}

$a = new A();
$a->testB();

$c = new C();
$c->testB(); 
```

我可能什么都没看到，但我找不到什么。谁能向我解释这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:54:44.277

您可以访问这些方法，因为它们被声明为 protected in `Foo`，它是您的父级，并授予您访问它的权限。如果您从父级中删除声明并在其中声明受保护的方法，`B`您将收到致命错误。

这被报告为 PHP [https://bugs.php.net/bug.php?id=50892中的错误](https://bugs.php.net/bug.php?id=50892)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:58:19.120

这没有任何道理，2年前就有报道：[https ://bugs.php.net/bug.php?id=52120](https://bugs.php.net/bug.php?id=52120)

# c# - 用白色替换黑色区域

> ID：12745399
> 
> 赞同：0
> 
> 时间：2012-10-05T11:32:22.660
> 
> 标签：c#, algorithm, image-processing, colors

我正在寻找一种快速算法，它将用白色替换黑色区域。我有一组图像（下面的一些示例）。

*   [图 1](http://s18.postimage.org/4ljutzx2h/qwe_00001_00032.jpg)
*   [图 2](http://s18.postimage.org/dhz8bod2h/qwe_00001_00040.jpg)
*   [图 3](http://s7.postimage.org/zczdc0p3f/zxcvbn_00002_00002.png)
*   [图 4](http://s8.postimage.org/4iob4hnut/qwe_00001_00001.jpg)

如您所见，图像可以包含黑色元素（例如文本、边框 - 地图） - 所以我不能简单地替换颜色...您会注意到黑色区域总是从图像的边框开始。如何摆脱它们？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:44:43.663

洪水从边界开始填充黑色区域。绘制大于阈值白色的区域。

# php - php - 从关联数组中提取一维数组

> ID：12745400
> 
> 赞同：1
> 
> 时间：2012-10-05T11:32:25.567
> 
> 标签：php, arrays, associative

我有一个如下的数组，我想在一个单独的数组中获取 'id' 前面的所有值。比如：arry('12', '10', '11', '9')

```
 array
      3 => 
        array
          'occurance' => int 4
          'id' => string '12' (length=2)
      1 => 
        array
          'occurance' => int 3
          'id' => string '10' (length=2)
      2 => 
        array
          'occurance' => int 2
          'id' => string '11' (length=2)
      0 => 
        array
          'occurance' => int 1
          'id' => string '9' (length=1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:42:01.747

您可以使用[array_map](http://php.net/manual/en/function.array-map.php)

```
$values = array(
        3 => array('occurance' => 4,'id' => '12'),
        1 => array('occurance' => 3,'id' => '10'),
        2 => array('occurance' => 2,'id' => '11'),
        0 => array('occurance' => 1,'id' => '9'));

$values = array_map(function($var){ return $var['id']; }, $values);
var_dump($values); 
```

输出

```
array
  3 => string '12' (length=2)
  1 => string '10' (length=2)
  2 => string '11' (length=2)
  0 => string '9' (length=1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:34:58.290

使用 foreach 循环并放入`id`另一个数组：

```
$newArray = array()
foreach($array as $val){
    $newArray[] = $val['id'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:35:50.767

试试这个：

```
foreach($YourArray as $ar)
{
    $FinalArray[] = $ar['id'];
}

print_r($FinalArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:38:47.553

```
foreach($array as $key=>$value)
{
if(array_key_exists('id',$value))
$arr2[]=$value['id'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-11T22:01:31.900

从 PHP 5.5 开始，您可以使用[array_column](http://php.net/manual/en/function.array-column.php "数组列")。

```
$idArray = array_column($multiArray, 'id'); 
```

# matlab - 在 Matlab 中区分彩色蒙版

> ID：12745402
> 
> 赞同：2
> 
> 时间：2012-10-05T11:32:29.503
> 
> 标签：matlab, image-processing, computer-vision

该项目旨在检测彩色方块并相应地向微控制器发送控制信号

这是我处理后的图像的输出..

红色的 ：

![在此处输入图像描述](../Images/7da55a36ea076df2b223244143c4a884.png)

绿色 ：

![在此处输入图像描述](../Images/8c964e390643ee79fa022514769ffc24.png)

如果检测到红色方块，matlab 通过串口发送字符“R”如果检测到绿色方块，matlab 通过串口发送字符“G”

区分处理后的图像和发送数据的任何想法/技术？

就像 RED Square 出现布尔值`red=true`和 GREEN suware 出现布尔值一样`green=true`

稍后或者我可以检查布尔值并发送字符（如果是）`true`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:26:32.483

如果您的所有图像都像您在示例中显示的那样简单，那么图像处理部分真的很容易。您可以简单地检查哪个通道更占主导地位，红色或绿色。

```
 green = im(:,:,2);
   red = im(:,:,1);
   if sum( green(:)) > sum(red(:))
       % Send green!
   else
       % Send red!
   end 
```

如果图像不是那么简单，您可以将图像转换为`HSV`色彩空间，并检查什么是主要的`Hue`，除了那些`Sat`小于某个阈值的。需要后一部分才能从决策中删除黑色像素（它们往往几乎是随机的`Hue`）。

您可以在此处阅读有关[控制串行端口的信息](http://www.mathworks.com/help/matlab/ref/serial.html)

# php - cakephp v2.2 自定义验证方法未被调用

> ID：12745409
> 
> 赞同：0
> 
> 时间：2012-10-05T11:32:55.170
> 
> 标签：php, validation, cakephp, cakephp-model

我正在尝试在 cakephp 2.2.2 中使用自定义验证方法，但由于某种原因没有调用该函数。当我将 cakephp 用于另一个项目时，自定义验证方法在同一系统上工作。

我发现了一个关于堆栈溢出的问题，似乎是同样的问题，但没有解决方案（[CakePHP 中的自定义归档验证](https://stackoverflow.com/questions/4845212/custom-filed-validation-in-cakephp)）。

这是我模型中的代码：

```
<?php
App::uses('AppModel', 'Model');

class Person extends AppModel {

    public $validate = array(
        'dob' => array(
            'date' => array(
                'rule' => array('date'),
            ),
            'date_between' => array(
                'rule' => array('dateBetween', '01/01/1996'),
                'message' => 'You are not the right age to enter',
            ),
        ),
    );

    public function dateBetween($v1, $v2) {
        dump_var($v1);
        dump_var($v2);

        return false;
    }

} 
```

**注意：** `dump_var()`是一个`var_dump()`带有pre标签的。

# c++ - 单进单出规则

> ID：12745412
> 
> 赞同：9
> 
> 时间：2012-10-05T11:33:01.573
> 
> 标签：c++, return-value

我在某处阅读了一条规则：

> 遵循单进单出规则。永远不要在同一个函数中编写多个返回语句。

这个说法是真的吗？如果是这样，您能否详细说明我们为什么要遵循这条规则？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-05T12:20:53.017

> 这是真的？

这就是规则所说的，在它被使用和执行的地方。这是一个好规则吗？我反对它的采用牙齿和指甲。我认为这是一个愚蠢的规则。比愚蠢更糟糕：这是对 C++ 有害的规则。

我同意规则的第一部分，“单次入场”。Fortran`entry`语句导致的问题比它解决的问题多得多。规则的第一部分不适用于 C 或 C++，原因很简单，两种语言都没有提供多入口点机制。“单项”是 C 和 C++ 中的无操作。

那么“单出口”呢？提前返回不一定会造成问题。在返回之前未能处理分配的资源是导致问题的原因。正确的规则是“清理你的烂摊子”，或者不要留下悬空的资源。单次退出并不能解决这个问题，因为它并没有说明清理你的烂摊子。

在 C 中，单入口/单出口规则通常与允许（甚至鼓励）使用`goto`错误处理密切相关。我可以看到`goto`在 Linux 内核代码中用于错误处理的地方。但不是在 C++ 中。这就是为什么我写了单入口/单出口在 C++ 中是有害的。此规则不鼓励使用 RAII 和异常安全编程，并鼓励使用`goto`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-05T11:39:13.480

不，这不是规则，有时甚至很难/不可能实现。但是，具有一个入口和一个出口点的代码更易于理解和调试。比较一下：

```
int foo()
{
    if(something)
        return 0;
    //100 lines of code
    if(something)
        return 11;
    //100 lines of code
    if(something)
        return -1;
    //100 lines of code
    return 0;
} 
```

还有这个：

```
int foo()
{
    int errorCode = 0;
    if(something)
        errorCode = 1;
    //100 lines of code
    if(something)
        errorCode = 11;
    //100 lines of code
    if(something)
        errorCode = -1;
    //100 lines of code
    return errorCode;
} 
```

现在我们只有一个退出点，并且（也考虑到变量名）更容易理解函数的作用。您还可以在最后一个返回上放置一个断点，并知道这是函数结束的点，并且您肯定会命中它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-05T11:54:18.047

此规则可能适用于 C，但由于异常，它在 C++ 中可能被认为已过时。一旦你的函数抛出一个异常或调用一个可以抛出的函数，你就会有一个额外的退出点：

```
int f()
{
  //...
  g(); // g() may throw: you have an exit point here
  //...
  throw exc; // another possible exit point
  //...
  return returnValue; // Nice try, but you have additional exit points
} 
```

除了其他答案中的要点之外：此规则旨在使代码更易于遵循，但很容易找到不正确的示例。好多了：

```
if (condition)
  return a;
if (condition2)
  return b;
if (condition3)
  return c;

// Insert all your code for the general case 
```

比：

```
int returnValue;    
if (!condition) {
  if (!condition2) {
    if (!condition3) {
      // Insert your code here
    }
    else {
      returnValue = c;
    }
    returnValue = b;  // Where am I now?
  }
  returnValue = a;
}
return returnValue; 
```

然后，当您决定 a 中的返回值时，您也会遇到这种情况`switch`：

```
switch (a)
{
  case 1: return 10;
  case 2: return 20;
  case 3: return 40;
  default: return 50;
} 
```

而不是：

```
int returnValue;
switch (a)
{
  case 1: returnValue = 10; break;
  case 2: returnValue = 20; break;
  case 3: returnValue = 40; break;
  default: returnValue = 50; break;
}
return returnValue; // Where is the clarity gained? 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T12:03:09.680

此外，多个退出可能是一些性能问题：当处理器运行当前命令时，它会在同一时钟滴答处处理几个下一个命令并对其执行一些操作。所以，如果你的代码有多个出口，像这样：

```
if (condition)
  return a;
DoSomething();
if (condition2)
  return b; 
```

并且第一个条件为真，提取`DoSomething()`命令将无用。实际上，使用分支预测它仍然可以，但无论如何最好记住这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:41:46.570

如果您想实现这一点，您可以将返回值存储在变量中，但事实并非如此。您可以在同一个函数中有多个返回而不会出现问题。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-05T12:04:04.180

我个人并不反对提前退出，但我会提出 SingerOfTheFall 的第三种替代方案以供考虑。

好处：

*   正常的代码流（即非错误）干净地流过代码的顶部
*   没有机会使一个“某事”失败并传递另一个“某事”无意中执行代码块
*   您可以在代码块上强制执行范围；包括在退出范围时清理代码子块中使用的东西

坏处：

*   缩进可以加起来（尽管这可以通过分成子功能来减轻）
*   如果您的编辑器中没有大括号匹配，则可能很难将错误与失败条件匹配

```
整数 foo()
{
    int 错误代码 = 0;
    如果（！某事）{
        //100行代码
        如果（！某事）{
            //100行代码
            如果（！某事）{
                //100行代码
            }
            别的 {
                错误代码 = -1;
            }
        }
        别的 {
            错误代码 = 11；
       }
    }
    别的 {
        错误代码 = 1；
    }
    返回错误代码；
}

```

# sql - SQL如何检索两个给定日期之间的中间点？

> ID：12745414
> 
> 赞同：6
> 
> 时间：2012-10-05T11:33:05.403
> 
> 标签：sql, sql-server

我有两个日期：

`2012-10-04 12:48:56:000`和`2012-10-04 12:48:58:000`

预期结果是
`2012-10-04 12:48:57:000`

* * *

`2012-10-04 12:48:56:000`和`2012-10-04 12:48:56:010`

预期结果是
`2012-10-04 12:48:56:005`

（日期是虚构的，因为在 sql server 中毫秒部分 DATETIME 数据类型增加了 3 ）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T11:40:18.007

用你自己的日期...

```
SELECT DATEADD(ms, 
          DATEDIFF(ms,'2012-10-04 12:48:56:000', '2012-10-04 12:48:58:000')/2,
         '2012-10-04 12:48:56:000') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:46:19.747

像这样的东西：

```
with sample_data (start_dt, end_dt) as 
( 
   select cast('2012-10-04 12:48:56:000' as datetime), cast('2012-10-04 12:48:58:000' as datetime)
   union all
   select cast('2012-10-04 12:48:56:000' as datetime), cast('2012-10-04 12:48:56:010' as datetime)
)
select start_dt, end_dt, dateadd(millisecond, datediff(millisecond, start_dt, end_dt) / 2, start_dt)
from sample_data 
```

尽管第二对计算不正确。可能是因为 3 毫秒的分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:46:33.297

```
declare @date1 datetime;
declare @date2 datetime;

set @date1 = '2012-10-04 12:48:56:000';
set @date2 = '2012-10-04 12:48:58:000';

select DateAdd(ms, DateDiff(ms, @date1, @date2)/2, @date1) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-14T00:55:19.857

我需要能够使用 MySQL 和 MariaDB 做到这一点。这是有效的：

```
SELECT DATE_ADD('2012-10-06 12:48:58.000', INTERVAL time_to_sec(TIMEDIFF('2012-10-04 12:48:56.000', '2012-10-06 12:48:58.000'))/2 SECOND) 
```

结果：2012-10-05 12:48:57.000000

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T11:48:37.443

```
-- let's day d1 and d2 are DateTime variables (d1 < d2)

-- get the differnce in milliseconds 
-- (you can change it but be careful with oveflow situations)
declare @diff integer = datediff (ms, @d1, @d2)
-- the middle is the first date + half of the difference
declare @middle DateTime = dateadd (ms, @diff / 2, @d1) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-05T11:38:42.053

试试这个（你可以根据你想要的准确度来替换日期部分）：

```
DateAdd(ms, DateDiff(ms, date1, date2), date1)/2 
```

# spring - Spring Security 注释不一致？

> ID：12745416
> 
> 赞同：0
> 
> 时间：2012-10-05T11:33:14.010
> 
> 标签：spring, security, spring-mvc, spring-security

我注意到在我的代码中，我可以使用@Secured("ROLE_ADMIN") 和@RolesAllowed("ROLE_ADMIN") 成功地注释服务类(@Service) 上的方法。有用。但是，当我将相同的注释移动到控制器类 (@Controller) 时，只有 @Secured 被激活，而 @RolesAllowed 被忽略。我配置了我的根应用程序上下文

```
<security:global-method-security 
          jsr250-annotations="enabled" 
          secured-annotations="enabled"/> 
```

为什么 @RollesAllowed 不适用于控制器类而 @Secured 是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:27:22.203

@RolesAllowed 在服务级别（但不在控制器中）工作的原因是由于我的配置错误。为了使它工作，我必须在扫描我的控制器的同一配置文件（上下文）中声明全局方法安全性。例如：

```
<context:component-scan base-package="mrpomario.springcore.mvc.controller"/>
<security:global-method-security 
          jsr250-annotations="enabled" 
          secured-annotations="enabled"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:30:16.587

不保证混合不同的注释会产生一致的行为。

从[手册](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-method-security)：

> 您可以在同一个应用程序中启用多种类型的注释，但任何接口或类只能使用一种类型，否则行为将不会被很好地定义。如果找到两个适用于特定方法的注释，则只会应用其中一个。

# javascript - 将 map.svg 绘制到浏览器并在每个区域单击执行任务

> ID：12745419
> 
> 赞同：1
> 
> 时间：2012-10-05T11:33:41.873
> 
> 标签：javascript, asp.net, html, svg

我必须创建一个可以在桌面、Ipad 和 android 上运行的在线停车系统。我有一个 .svg 格式的停车场地图。

我的问题是：我如何将该地图呈现到浏览器中并在每个插槽点击时执行 javascript 任务。

我正在使用 asp.net 开发项目。目前我正在尝试将 .svg 转换为画布。

我对这种图形化的东西很陌生，并坚持了一段时间。请用更好的方法帮助我，或者为我们提供这种方法的示例链接。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:58:15.127

SVG 中的元素也是 DOM 的成员（如果这样插入的话），所以用类似`jQuery`or的东西选择它们`document.querySelector()`是没有问题的。但是，并非所有浏览器（< IE9）都可以处理原始格式的 SVG（这会禁用这种无缝的 JavaScript 集成）。

我在最近的一个项目中做了这个，它就像一个魅力。

在 Web 上使用 SVG 时要考虑的一些事情首先是 SVG 的大小。大文件往往会减慢*一切*，尤其是在应用 JavaScript 操作和事件时。此外，保持 SVG 文件尽可能干净。一些 SVG 软件会插入“XML 噪声”节点，这对于渲染来说不是必需的，并且会禁止将原始格式插入 DOM。

将 SVG 集成到 DOM 中应该做的是将 SVG 文件的内容加载到当前的 DOM 节点。我用 JavaScript 做到了这一点，但该方法对输出无关紧要。

例子;

```
...
   <div class="svg-node" data-svg-file="/images/file.svg"></div>
... 
```

并使用 jQuery 加载它们并附加事件处理程序；

```
$(document).ready(function () {

    var svgFile = $('.svg-node').attr('data-svg-file');

    $.ajax({
        'url': svgFile,
        'type': 'get',
        'dataType': 'text',
        'success': function (svgContent) {

            $('.svg-node').html(svgContent);
            $('.svg-node #an-elements-id').on('click', handleEvent);

        }
    });

}); 
```

不幸的是，大多数网络浏览器在使用这种方法时都存在一些问题。SVG 组不能通过 DOM 处理，也不能附加任何你想要的节点属性——只支持少数几个。

但总而言之，这是一个直接且简单的实现，并且适用于大多数浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:55:52.807

这是一个关于如何向 SVG 图形添加事件处理的[教程](http://www.carto.net/svg/eventhandling/)

# asp.net - 需要一个好的手机模拟器

> ID：12745426
> 
> 赞同：3
> 
> 时间：2012-10-05T11:34:14.873
> 
> 标签：asp.net, mobile, simulator, mobile-browser

我正在开发一个第一次使用 asp.net mvc 4 的移动网站。已经开发了几页。现在我需要测试这个网站。

有人可以告诉我哪个是最好的模拟器吗？如果有什么东西可以让我在同一个模拟器上测试 iphone、blackberry、htc、Samsung android、nokia lumia 等？如果不是，那么对于每个或单独来说，哪个是最好的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:39:26.227

[您可以在此处](http://www.asp.net/mobile/device-simulators)查看所有设备模拟器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:42:03.340

对于上述所有平台，官方 SDK 都包含模拟器，我敢打赌你找不到更好的。

[对于 Android，请使用Android Development Tools](http://developer.android.com/tools/sdk/eclipse-adt.html)附带的模拟器。

[对于 Windows Phone，请使用Windows Phone SDK](http://www.microsoft.com/en-us/download/details.aspx?id=27570)附带的模拟器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:49:17.160

我建议使用 Opera 移动模拟器

[http://www.opera.com/developer/tools/mobile/](http://www.opera.com/developer/tools/mobile/)

我使用它，对我有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:52:43.897

对于 Android，您可以使用模拟器，但它真的很慢。
但是一个快速的 android 是在虚拟机中运行它。
[http://virtualboximages.com/Android+OS+2.6.29+x86+Virtual+Appliance](http://virtualboximages.com/Android+OS+2.6.29+x86+Virtual+Appliance)

# linq - 流畅的 NHibernate 过滤器子集合与 Linq

> ID：12745428
> 
> 赞同：1
> 
> 时间：2012-10-05T11:34:26.600
> 
> 标签：linq, nhibernate, fluent-nhibernate

我正在尝试检索根聚合及其子集，对子集应用日期过滤器。

```
CREATE TABLE Shop
(
    Id int
)

CREATE TABLE Order
(
    ShopId int,
    OrderDate datetime
) 
```

自然，子对象没有 ShopId 属性来避免双向引用：

```
class Shop
{
    int Id { get; set; }
    List<Order> { get; set; }
}

class Order
{
    DateTime OrderDate { get; set; }
} 
```

FNHB 映射如下所示：

```
public ShopMap()
{
    this.Table("SHOP");
    this.Id(x => x.Id).Column("ID");
    this.HasMany(x => x.Orders).Table("ORDER").KeyColumn("SHOP_ID");
}

public OrderMap()
{
    this.Table("ORDER");
    this.Map(x => x.OrderDate);
} 
```

**我正在尝试检索一个给定的商店，其订单放置在特定日期**、给定参数之间`shopId, fromDate, toDate`，我已经尝试过了，但它抛出了异常：

```
Session.Query<Shop>().Where(shop => shop.Id == shopId)
.FetchMany(
    shop => shop.Orders.Where(
        order => order .OrderDate >= fromDate && order.OrderDate <= toDate)); 
```

这可以在不使用魔术字符串（NHb 标准、HQL 等）的情况下实现吗，最好使用简单的 Linq 查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:39:32.457

您需要日期条件出现在连接的 ON 子句上，而 shopId 的检查应该出现在 WHERE 子句上。试试这个：

```
Shop shopAlias = null;
Order orderAlias = null;

ICriterion dateCriterion = Restrictions.Where<Order>
    (o => o.OrderDate >= fromDate && o.OrderDate <= toDate);

var query =
    QueryOver.Of(() => shopAlias).Left.JoinAlias(
    () => shopAlias.Orders, () => orderAlias, dateCriterion).Where
    (s => s.Id == shopId);
var result = query.GetExecutableQueryOver(Session).SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:43:05.897

无法使用 Query 来解决，但可以使用 QueryOver 来解决：

```
Shop shopAlias = null;
var existing = QueryOver.Of<Order>()
                        .Where(x => x.OrderDate >= fromDate)
                        .And(x => x.OrderDate <= toDate)
                        .And(x => x.Shop.Id == shopAlias.Id)
                        .Select(x => x.Shop);

result = Session.QueryOver<Shop>(() => shopAlias)
                .Fetch(x => x.Orders).Eager
                .WithSubquery.WhereNotExists(existing)
                .List(); 
```

像这样的东西应该工作。

[http://www.philliphaydon.com/2011/01/revisiting-exists-in-nhibernate-3-0-and-queryover/](http://www.philliphaydon.com/2011/01/revisiting-exists-in-nhibernate-3-0-and-queryover/)

# c# - UnitTesting : 已与其底层 RCW 分离的 COM 对象无法使用

> ID：12745430
> 
> 赞同：1
> 
> 时间：2012-10-05T11:34:29.787
> 
> 标签：c#, vs-unit-testing-framework

我在 C# 中创建了一个 UnitTesting 项目并面临一些问题。

首先，我想做一些在开始时应该只发生一次的 Connect 功能。之后，我试图从 Excel 文件中读取一些记录并测试一些插入操作，并且每次插入发生时 TestCleanUp() 在调用该构造函数然后调用 Initialize 方法后被触发。我不希望构造函数在每条记录仅插入一次后触发。我很困惑将我的 Connect 功能放在哪里以及如何避免每次都调用构造函数。

```
[TestClass]
    public class TestConnection
    {
        private TestContext testContextInstance;
        private static iCAM70003SDKC o_DeviceControl = null;

        /// <summary>
        ///Gets or sets the test context which provides
        ///information about and functionality for the current test run.
        ///</summary>
        public TestContext TestContext
        {
            get
            {
                return testContextInstance;
            }
            set
            {
                testContextInstance = value;
            }
        }

        [ClassInitialize()]   
        public static void Initialize()
        {

            int iResult = 0;
            EOperationalMode OperationalMode;

        } 
```

现在我可以按照建议在 ClassInitialize 中建立初始连接。现在，当我在 ClassInitialize 中创建我的 COM 对象的实例时，现在正在建立初始连接。现在我有不同的测试方法要测试。现在，当我运行我的程序时，在执行第一个测试方法“无法使用已与其底层 RCW 分离的 COM 对象”后出现异常？

我猜当它试图执行第二个测试方法时 COM 对象被破坏了。如何保持这个 COM 对象活着？我不是在调用 ReleaseCOMObject。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:44:23.917

您可以制作一个用 [ClassInitalize] 装饰的静态方法，它只会为测试类运行一次。这是建立初始连接的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:17:52.917

是的，在您的初始化方法上使用 [ClassInitialize] 属性。这只会为您的班级运行一次。

```
[ClassInitialize]
public static void Initialize() { ... } 
```

如果您使用的是 NUnit，则等效为 [TestFixtureSetup]

确保您的 TestContext 是公开的，这样它就不会为空

如果您仍然遇到空问题，以下链接可以帮助您 [http://social.msdn.microsoft.com/Forums/en-US/vsautotest/thread/e9beee26-4927-4a60-b306-555f47cb3958/](http://social.msdn.microsoft.com/Forums/en-US/vsautotest/thread/e9beee26-4927-4a60-b306-555f47cb3958/)

# vb.net - 删除本地打印机

> ID：12745431
> 
> 赞同：0
> 
> 时间：2012-10-05T11:34:32.377
> 
> 标签：vb.net, printing

我有一个桌面应用程序，其中有一个列表视图，里面装满了本地计算机上安装的打印机。这是一个简单的打印机管理，所以我希望能够右键单击一个项目，然后删除该特定打印机。我怎样才能做到这一点？

这是我列出打印机的方式

```
Public Sub listInstalledPrinters()
        Dim i As Integer
        Dim pkInstalledPrinters As String

        For i = 0 To printersettings.InstalledPrinters.Count - 1
            pkInstalledPrinters = PrinterSettings.InstalledPrinters.Item(i)
            listViewLocal.Items.Add(pkInstalledPrinters, nIndex)
        Next

    End Sub 
```

但是我怎样才能删除其中之一呢？有内置的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:52:02.510

如果您通过 查询打印机，您可以使用类的方法[`System.Management.ManagementScope`](http://msdn.microsoft.com/en-us/library/system.management.managementscope.aspx)轻松删除它们。[`Delete`](http://msdn.microsoft.com/en-us/library/a2k71172.aspx)[`ManagementObject`](http://msdn.microsoft.com/en-us/library/2wfhy6hw.aspx)

```
Dim scope = New ManagementScope(ManagementPath.DefaultPath)
scope.Connect()
Dim printers = New ManagementObjectSearcher(scope, new SelectQuery("select * from Win32_Printer")).[Get]()
For Each printer As ManagementObject In printers
    Dim nameOfPrinter = printer("Name").ToString()

     If nameOfPrinter = "ThePrinterYouWantToDelete" Then
         printer.Delete()
     End If
Next 
```

# c# - 功能区上按钮的“onAction”设计模式

> ID：12745435
> 
> 赞同：2
> 
> 时间：2012-10-05T11:34:45.170
> 
> 标签：c#, event-handling, ribbon

我的功能区在我的功能区上有几个按钮（目前它只是一个拆分按钮和属于它的菜单上的几个按钮）。因此，我可以为动作处理程序选择两种不同的设计模式。

模式#1（常用方法）

```
<button id="Beep" onAction="DoStuff" />
<button id="Boop" onAction="DoStuff" />

public void DoStuff(Office.IRibbonControl control)
{
  if (control.Id == "Beep") { ... }
  if (control.Id == "Boop") { ... }
} 
```

模式#2（不同的方法）

```
<button id="Beep" onAction="DoBeep" />
<button id="Boop" onAction="DoBoop" />

public void DoBeep(Office.IRibbonControl control) { ... }
public void DoBoop(Office.IRibbonControl control) { ... } 
```

我会选择模式#2（除非处理非常小的调用或真正可模式化的操作）**，但**在我看来，许多文章都提倡模式#1（这将我的想法带到了 90 年代的 Java 操作侦听器模式）。作为 Ribbon Reals 的新手，我仍然希望知道其他程序员会在这个主题上提出什​​么建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:23:31.927

这取决于触发事件时控件应该做什么。如果控件必须执行类似的操作，或者您可以概括它们的操作，那么最好使用模式 1，但通常最好使用模式 2，因为您的代码将更容易理解，即使您的事件也能正常工作更改这些 ID 的值。

# php - 事务、存储过程和 PDO

> ID：12745446
> 
> 赞同：2
> 
> 时间：2012-10-05T11:35:03.750
> 
> 标签：php, mysql, stored-procedures, pdo

PHP 中的单个操作必须经过以下步骤：

1.  执行否。来自 PHP PDO 的 mysql 语句，基于大量的业务逻辑。
2.  执行存储过程。
3.  从 PDO 执行更多 MySQL 语句。

整个过程需要是一个单一的交易。如果 MySQL 存储过程发生任何错误，则必须回滚整个事务。（存储过程具有创建临时表、执行基于游标的扫描和执行插入的查询。）即使在存储过程之后的 PDO 中发生错误，事务也必须完全回滚，包括在存储过程。

基于 PDO 的查询在很久以前就被编程了。存储过程是根据客户的新要求而新推出的。

在 PHP 中，Transaction 在 Step 1 开始时启动。在 Step 3 结束时有一个 commit。最后有一个 catch 块，导致回滚。

是否应该在存储过程中启动事务？如果是这样，如何在错误时完全回滚？还是我们应该在存储过程中手动将 auto-commit 设置为 false？或者，是否有其他方法可以通知 MySQL 这个存储过程已经是事务的一部分。

如果不是，是否保证整个操作的原子性？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T23:47:57.773

这是mohip引用的链接：http://dev.mysql.com/doc/refman/5.6/en/begin-end.html[事务](http://dev.mysql.com/doc/refman/5.6/en/begin-end.html) 不是在存储过程中自动运行的，需要通过“START TRANSACTION”触发，我正要问这个问题。感谢您的报价。

# python - Python 中的 list[1] 和 list[1:] 有什么区别？

> ID：12745450
> 
> 赞同：1
> 
> 时间：2012-10-05T11:35:10.940
> 
> 标签：python, list, variable-assignment

```
>>> c=[1,2,3]
>>> c[1]=c 
>>> d=[1,2,3]
>>> d[1:]=d

>>> print(c)
[1, [...], 3] # Why does C become [1, [...], 3]?
>>> print(d)
[1, 1, 2, 3] # Why is d not [1, [...] ]? 
```

请问，代码哪里不一样？是`:`，还是别的什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T11:37:32.227

您正在使用索引和切片分配，它们完全不同。

将此与在表达式中对列表进行索引和切片进行比较：

```
>>> c=[1,2,3]
>>> c[1]
2
>>> d=[1,2,3]
>>> d[1:]
[2, 3] 
```

通过在列表索引中使用`:`冒号，您要求的是一个切片，它始终是另一个列表。

在 Python 中，您可以为列表中的单个项目和列表的一部分分配值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:37:51.347

`slicing`用于提取`sublist`列表中的 a，其中 as`indexing`用于检索列表的特定元素

`slicedList = aList[beginIndex:endIndex]`

`d[1:]`指对列表进行切片`d`- 参考[this](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)。- 这是切片

`c[1]`是列表的一个元素`c`。- 这是索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T11:50:06.923

> print(c) [1, [...], 3] # 为什么C变成了[1, [...], 3]？

当您执行 c [1](https://stackoverflow.com/questions/4196329/circular-reference-with-python-lists) = c 时，您将 c 本身分配给 c 的第二个位置。这样您就可以创建循环引用。因此，解释器不会再次显示列表，而是显示 [...] 以指示其循环引用。[看到这个了解更多信息](https://stackoverflow.com/questions/4196329/circular-reference-with-python-lists)

# c# - 具有多个查询字符串参数的 URL 编码

> ID：12745453
> 
> 赞同：2
> 
> 时间：2012-10-05T11:35:40.020
> 
> 标签：c#, url, html-encode

在我的 c# 代码中，我正在对具有多个查询字符串的 Url 进行编码。当在接收端我尝试读回查询字符串时，我得到空值（未找到查询字符串参数），原因是编码将 &querystringparameter 更改为 &querystringparam。如何解决这个问题。

```
Response.Redirect(HttpUtility.HtmlEncode("Add.aspx?ID=" + 1 + "&cid="+ 8 + "&jid=" +9)); 
```

在 add.aspx 页面上，我得到的 url 为“add.aspx?id=1&sid=3&jid=9”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T13:47:31.830

使用`HttpUtility.UrlEncode`，我敢打赌它会像魅力一样起作用。阅读[本文](http://www.permadi.com/tutorial/urlEncoding/)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:06:20.070

最大的问题是您正在对整个查询字符串进行编码。您需要对各个组件进行编码，然后将它们连接在一起。

# python - 使用数据库时处理异常的正确方法

> ID：12745455
> 
> 赞同：0
> 
> 时间：2012-10-05T11:35:52.607
> 
> 标签：python, database, exception, exception-handling, tornado

当我执行一个简单的查询（我正在使用[tornado.database](http://www.tornadoweb.org/documentation/database.html)模块）时，我会处理这样的异常：

```
try:
    self.application.db.execute('DELETE FROM table_one WHERE a = 1')
except Exception, e:
    logging.warning('DB exception: %s' % e)
    self.set_status(500)
    return 
```

如果我想做一个事务，在出现异常的情况下回滚它会很聪明：

```
try:
    self.application.db.execute('START TRANSACTION')
    self.application.db.execute('DELETE FROM table_one WHERE a = 1')
    self.application.db.execute('DELETE FROM table_two WHERE b = 2')
    self.application.db.execute('COMMIT')
except Exception, e:
    logging.warning('DB exception: %s' % e)
    self.set_status(500)
    self.application.db.execute('ROLLBACK')
    return 
```

但是如果*回滚*也会导致异常（例如，如果连接失败）怎么办？我是否需要在 except 块内放置一个嵌套的 try-except 块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:10:49.193

在 except 块中放置嵌套的 try ... except 块是一种解决方案。但我最终会使用：

```
try:
  ...
except ... :

finally:
   # cleanup (close the connection, etc...) 
```

我的意思是，如果回滚失败，那么几乎没有其他事情可做，然后记录异常并进行清理，对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T09:45:34.817

最好从[这里检查建议](http://legacy.python.org/dev/peps/pep-0249/#databaseerror)

根据 PEP，我想在这里强调的要点：

*   不要抓住一般异常
*   不要引发一般异常

# mysql - 使用 GroupBy 子句求和

> ID：12745458
> 
> 赞同：0
> 
> 时间：2012-10-05T11:36:00.630
> 
> 标签：mysql, sql

我有这个查询..

```
SELECT DATE_FORMAT(utcdt,GET_FORMAT(DATE,'ISO')) as utcdt, 
                HOUR(utcdt) as hour, 
                country,
                sum(impressions) as impressions 
                FROM rtb_impressions where campaign_id='cid2204184260'
                GROUP BY utcdt, hour, country 
```

这些是结果......

```
{'impressions': Decimal('1'), 'country': 'US', 'hour': 10L, 'utcdt': '2012-10-01'}
{'impressions': Decimal('40000'), 'country': 'US', 'hour': 9L, 'utcdt': '2012-10-02'}
{'impressions': Decimal('20000'), 'country': 'US', 'hour': 9L, 'utcdt': '2012-10-02'} 
```

为什么我应该得到 2 行却得到了 3 行？012-10-02 应该已经相加。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:40:17.960

你得到那个是因为你按错误的值分组。试试这个：

```
SELECT DATE_FORMAT(utcdt,GET_FORMAT(DATE,'ISO')) as utcdt, 
            HOUR(utcdt) as hour, 
            country,
            sum(impressions) as impressions 
            FROM rtb_impressions where campaign_id='cid2204184260'
            GROUP BY DATE_FORMAT(utcdt,GET_FORMAT(DATE,'ISO')), hour, country 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:40:05.217

试试这个：

```
SELECT DATE_FORMAT(utcdt,GET_FORMAT(DATE,'ISO')) as utcdt, 
       HOUR(utcdt) as hour, 
       country,
       sum(impressions) as impressions 
FROM rtb_impressions
WHERE campaign_id='cid2204184260'
GROUP BY DATE_FORMAT(utcdt,GET_FORMAT(DATE,'ISO')), hour, country 
```

如果您想根据格式化值对结果进行分组，您需要确保在`GROUP BY`子句中应用相同的格式。

# php - 根据选择框值获取选项卡

> ID：12745460
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:36:06.867
> 
> 标签：php, javascript, jquery

我有一个值为 1 到 5 的选择框，如果我从选择框中选择值 2，我应该得到 2 个选项卡或 3，我应该得到 3 个选项卡。

这是选择框代码..

```
<select id="Week" name="Week">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

我如何在 php、javascript 或 jquery 中做到这一点。

帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:50:27.783

请试试这个：

```
<script>
function getTabs()
{
   var getSelectedValue = $("#week").val();

   if(getSelectedValue == 1)
   {
       //your specified code for value 1
   }
   else if(getSelectedValue == 2)
   {
       //your specified code for value 2
   }
   //and so on.. upto 5 getSelectedValue values
}
</script>

<select id="Week" onchange="getTabs();" name="Week">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:59:18.447

这是一个 jQuery 选项。

[http://jsfiddle.net/4EjGt/6/](http://jsfiddle.net/4EjGt/6/)

**JS**

```
//Global var to track our selected tabs
var m_selectedTabs = $('#tab1'); 
m_selectedTabs.siblings('span').hide(); 

$('#Week').change(function(){
    SelectTabRangeById($(this).find(':selected').val())
}); 

function SelectTabRangeById(id){
    //Deselect the previous tab 
    m_selectedTabs.hide(); 
    //Find the new Tab
    m_selectedTabs = $('#' + id).prevAll().andSelf();
    //Select it
    m_selectedTabs.show(); 
}

​ 
```

**HTML**

```
<span id='tab1'>Week 1</span><span id='tab2'>Week 2</span><span id='tab3'>Week 3</span><span id='tab4'>Week 4</span><span id='tab5'>Week 5</span>
<br/>
<select id="Week" name="Week">
    <option value="tab1">1</option>
    <option value="tab2">2</option>
    <option value="tab3">3</option>
    <option value="tab4">4</option>
    <option value="tab5">5</option>
</select> 
```

​</p>

# java - 从同一页面开始单元格，iText

> ID：12745462
> 
> 赞同：1
> 
> 时间：2012-10-05T11:36:09.573
> 
> 标签：java, itext

我想在我的报告标题和评论中添加两行。

```
 mainTable.addCell(headingCell);
    mainTable.addCell(commentCell); 
```

现在，当我添加文本超过页面总空间的评论时，它是从新页面开始评论，而不是从同一页面开始。从下一页开始，它正在破坏每一页的文本，但从第一页开始移动。

我想从第一页开始评论并流到下一页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T17:26:17.963

现在当我设置 mainTable.setSplitLate(false); 添加单元格后。

# codeigniter - codeigniter 的 oauth 引发了linkedin Scope 的问题。

> ID：12745463
> 
> 赞同：0
> 
> 时间：2012-10-05T11:36:11.487
> 
> 标签：codeigniter, oauth, kohana, linkedin

我正在使用来自 kohana 的[Oauth](https://github.com/philsturgeon/codeigniter-oauth)实现的 sparks 的[Oauth 。](https://github.com/kohana/oauth)
我成功地能够从 linkeidn 获取基本信息，但是在添加“r_emailaddress”范围后，我没有得到电子邮件地址，只有基本信息被获取。
我在我的控制器中添加范围跟随方式

```
$consumer = $this->oauth->consumer(array(
            'key' => $config[$provider]['key'],
            'secret' => $config[$provider]['secret'],
            'scope'=> "r_emailaddress,r_fullprofile"
          )); 
```

任何线索都会受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:09:09.303

它得到了解决，我不得不创建另一个应用程序或更新现有的。

# java - Ant JUnit ClassNotFoundException

> ID：12745465
> 
> 赞同：9
> 
> 时间：2012-10-05T11:36:19.060
> 
> 标签：java, ant, junit, classpath

我意识到有很多与此类似的问题[，](https://stackoverflow.com/questions/10658636/new-to-ant-classnotfoundexception-with-junit)但是在阅读了大多数问题后，我似乎遇到了同样的问题，但原因不同。

我正在`<junit>`我的 Ant 构建中运行一个任务，并得到一个`ClassNotFoundException`. 在大多数类似相关的问题（例如上面的问题）中，这被证明是作者在不同程度上没有正确配置 JUnit 类路径。虽然对我来说很可能是一样的，但对这些其他问题的任何建议都没有对我有用。

我的项目目录结构：

```
MyProject/
    src/main/java/
        FakeObject.java
        ...the rest of my Java main source
    src/test/java
        FakeObjectUnitTest.java
        ...the rest of my Java test source
    bin/main
        FakeObject.class
        ...the rest of main Java binaries
    bin/test
        FakeObjectUnitTest.class
        ...the rest of main Java binaries
    lib/main
        ...my main dependencies
    lib/test
        junit-4.10.jar
        hamcrest-1.1.jar
        ...the rest of my test dependencies
    gen/reports
        ...where JUnit should be placing all test reports
    build/
        build.xml
        build.properties 
```

在`src/test/java/FakeObjectUnitTest.java`：

```
// Package and imports omitted

public class FakeObjectUnitTest {
    @Test
    public void doSomething() {
        int x = 5;

        Assert.assertEquals(x, 5);
    }
} 
```

我的`build.xml`：

```
<project name="" basedir="..">
    <!-- Main classpath. -->
    <path id="main.class.path">
        <fileset dir="bin/main"/>
    </path>

    <!-- Test classpath. -->
    <path id="test.class.path">
        <fileset dir="bin/test"/>
    </path>

    <!-- JUnit classpath. -->
    <path id="junit.class.path">
        <fileset dir="lib/main" includes="*.jar"/>
        <fileset dir="lib/test" includes="*.jar"/>
        <path refid="main.class.path"/>
        <path refid="test.class.path"/>
    </path>

    <!--
        All previous targets omitted for brevity (such as for compiling, etc.), but
    I assure you all that they work and compile FakeObject.java/FakeObjectUnitTest.java into
    FakeObject.class/FakeObjectUnitTest.class respectively, and place them in the correct
bin directories.
    -->

    <target name="run-junit" depends="compile">

        <property name="junit.path" refid="junit.class.path"/>
        <echo message="JUnit ClassPath is: ${junit.path}"/>

        <junit printsummary="yes" haltonerror="yes" haltonfailure="yes">
            <classpath refid="junit.class.path"/>

            <formatter type="xml"/>

            <batchtest todir="gen/reports">
                <fileset dir="src/test/java">
                    <include name="**/*UnitTest*.java"/>
                </fileset>
            </batchtest>
        </junit>
    </target>
</project> 
```

当我从命令行运行这个目标时：

```
run-junit:
    [echo] Conducting unit tests with JUnit.
    [echo] JUnit ClassPath is: /<path-to-my-project>/MyProject/lib/test/hamcrest-1.1.jar:/<path-to-my-project>/MyProject/lib/test/junit-4.10.jar:/<path-to-my-project>/MyProject/bin/main/com/myproject/client/FakeObject.class:/<path-to-my-project>/MyProject/bin/test/com/myproject/client/FakeObjectUnitTest.class
    [junit] Running com.myproject.client.FakeObjectUnitTest
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec 
```

我这样做是为了*证明*它可以`FakeObjectUnitTest.class`在 JUnit 类路径上看到。但是，它失败并出现错误。当我进入此测试的 XML TEST 报告时，我看到以下内容：

```
<error message="com.myproject.client.FakeObjectUnitTest" type="java.lang.ClassNotFoundException">java.lang.ClassNotFoundException: com.myproject.client.FakeObjectUnitTest
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
</error> 
```

当我以详细模式 ( ) 运行 Ant 时，我看到`-v`的唯一*提示*是一堆警告，如下所示：

> 忽略异常 java.util.zip.ZipException：打开 zip 文件读取资源 x 时出错

...`x`类文件的名称在哪里。

我在 SO 上发现[了这个](https://stackoverflow.com/questions/6015092/zipexception-when-running-junit-tests)问题，问题原来是作者在类路径中添加了类文件，而不是 JAR（这让 JUnit 不高兴）。所以我尝试删除`main.class.path`并`test.class.path`从中删除，`junit.class/path`然后我得到一个异常，找不到任何类文件。

关于发生了什么的任何想法或想法？在此先感谢，并对`-v`这里的问题感到抱歉，但我认为越详细越好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T11:53:59.247

您需要用于类似包的结构：
[来自手册](https://ant.apache.org/manual/using.html)：

> 只要需要指定类似路径的值，就可以使用嵌套元素。这采用以下一般形式：
> 
> ```
>  <classpath>
>       <pathelement path="${classpath}"/>
>       <pathelement location="lib/helper.jar"/>
>     </classpath> 
> ```

所以你的解决方案看起来像：

```
<!-- JUnit classpath. -->
<path id="junit.class.path">
    <fileset dir="lib/main" includes="*.jar"/>
    <fileset dir="lib/test" includes="*.jar"/>
    <pathelement location="bin/main"/>
    <pathelement location="bin/test"/>
</path> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:47:38.173

查看您的类路径：

```
...:/<path-to-my-project>/MyProject/bin/main/com/myproject/client/FakeObject.class:... 
```

您不能像那样将单个类放在类路径中。相反，将位于包层次结构基础的目录放在类路径中：

```
...:/<path-to-my-project>/MyProject/bin/main:... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T09:06:36.050

在 run-junit 目标中进行如下修改，

```
 <batchtest todir="gen/reports">
            <fileset dir="bin/tests">
                <include name="**/*UnitTest*.class"/>
            </fileset>
         </batchtest> 
```

# ruby - 简单的数组赋值

> ID：12745468
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:36:31.000
> 
> 标签：ruby, arrays

我只是想创建一个用对象填充数组的函数，但是出了点问题：

```
row1 = []

class Tile
    def initialize(type)
        @type = type
    end
end

def FillRow1

    [1..10].each {
        random = rand(1..3)
        if random == 1 row1.(Tile.new("land") end 
        else if random == 2 row1.(Tile.new("Water") end
        else ifrandom == 3 row1.(Tile.new("empty") end
    }
    row1
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:42:38.903

你的语法错误

```
 [1..10].each {
        random = rand(1..3)
        if random == 1 then row1.push(Tile.new("land")) end 
        else if random == 2 then row1.push(Tile.new("Water")) end
        else ifrandom == 3 then row1.push(Tile.new("empty") end
    } 
```

这会奏效。

但更清洁的解决方案可能是：

```
types = ["Land","Water","Empty"]
10.times{ row1 << Tile.new(types[rand(0..2)]) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:53:06.563

你的第二个 else if 是错误的，random 和 if 之间必须有一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:54:02.460

```
a= ["land", "water", "empty"]
data= (1..10).map{ a[rand(3)] }
p data 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:16:12.537

```
class Tile
  def initialize(type)
    @type = type
  end
end

types = %w(land water empty)

row = Array.new(10){ Tile.new(types.sample) } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T12:13:22.623

单行选项：

```
10.times.map{ Tile.new(["land","water","empty"][rand(3)]) } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T12:26:30.650

最新版本的 Ruby (>= 1.9.3) 带有方法[#sample](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-sample)。它是[Array](http://www.ruby-doc.org/core-1.9.3/Array.html)的一部分。您可以使用它从数组中获取随机元素，甚至不知道数组有多大。

```
class Tile
    TILE_TYPES = %w(land water empty)

    def initialize(type)
        @type = type
    end

    def to_s
        "Tile of type: #{@type}"
    end
end

# Generate 10 tiles
rows = (1..10).map do 
    Tile.new Tile::TILE_TYPES.sample
end

puts rows
#=> Tile of type: empty
#   Tile of type: land
#   ...

# If you want to pick more then 1 random element you can also do
puts Tile::TILE_TYPES.sample(3) 
```

# google-maps - 如何在 Google Maps JavaScript API v3 中集成 SearchBox？

> ID：12745469
> 
> 赞同：1
> 
> 时间：2012-10-05T11:36:34.840
> 
> 标签：google-maps, search-box

我想用 JavaScript API v3创建一个顶部有搜索框的谷歌地图： [https://google-developers.appspot.com/...](https://google-developers.appspot.com/maps/documentation/javascript/examples/places-searchbox)

目前，我使用以下代码通过获取 url (php get) 中的纬度和经度来显示地图：

```
<?php

$latitude = $_GET['lat'];
$longitude = $_GET['long'];

?>
<!DOCTYPE html>
<html>
  <head>
  <script type="text/javascript">  
  </script>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }

      #search-panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        width: 350px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
      #target {
        width: 345px;
      }

    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=XXXXXXXXXXX&sensor=true">
    </script>
    <script type="text/javascript">
      function initialize() {

          var input = document.getElementById('searchTextField');
          var image = 'pin.png';
          var myLatlng = new google.maps.LatLng(<?php echo "$latitude" ?>, <?php echo "$longitude" ?>);
        var mapOptions = {
          center: myLatlng,
          zoom: 15,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          streetViewControl: true,
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

            var marker = new google.maps.Marker({
      icon: image,
      position: myLatlng,
      map: map,
      animation: google.maps.Animation.DROP,
      title:"You Location"

  });

      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

但我不明白，要像在命名站点上那样集成搜索框！！！

有人可以帮忙吗？

* * *

我将代码编辑为此，但我不工作！：

```
<?php

$latitude = $_GET['lat'];
$longitude = $_GET['long'];

?>
<!DOCTYPE html>
<html>
  <head>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }

      #search-panel {
        position: absolute;
        top: 5px;
        left: 50%;
        margin-left: -180px;
        width: 350px;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
      }
      #target {
        width: 345px;
      }

    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=XXXXXXXXXXX&sensor=true">
    </script>
    <script type="text/javascript">
      function initialize() {

          var searchBox = new google.maps.places.SearchBox(input, {
  bounds: defaultBounds // have to be defined first
});

google.maps.event.addListener(searchBox, 'places_changed', function() {
      var places = searchBox.getPlaces();
      // do your stuff here

          var input = document.getElementById('searchTextField');
          var image = 'pin.png';
          var myLatlng = new google.maps.LatLng(<?php echo "$latitude" ?>, <?php echo "$longitude" ?>);
        var mapOptions = {
          center: myLatlng,
          zoom: 15,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          streetViewControl: true,
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

            var marker = new google.maps.Marker({
      icon: image,
      position: myLatlng,
      map: map,
      animation: google.maps.Animation.DROP,
      title:"You Location"

      var input = document.getElementById('target');
        var searchBox = new google.maps.places.SearchBox(input);
        var markers = [];

        google.maps.event.addListener(searchBox, 'places_changed', function() {
          var places = searchBox.getPlaces();

  });

    }); 

      }
    </script>
  </head>
  <body onload="initialize()">
  <div id="search-panel">
      <input id="target" type="text" placeholder="Search Box">
    </div>
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:06:20.193

您还必须加载地方搜索框：

```
var searchBox = new google.maps.places.SearchBox(input, {
  bounds: defaultBounds // have to be defined first
}); 
```

然后你可以监听`places_changed`事件：

```
google.maps.event.addListener(searchBox, 'places_changed', function() {
      var places = searchBox.getPlaces();
      // do your stuff here
}); 
```

查看您发布的示例页面的源代码，以了解在其中做什么，例如绘图标记等。

[您可以在SearchBox API 文档](https://developers.google.com/maps/documentation/javascript/places#adding_searchbox)中找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-03T09:27:17.800

这是一个旧帖子。但是在我的代码中，它可以在没有默认边界选项的情况下工作。查看[谷歌地图平台](https://developers.google.com/maps/documentation/javascript/examples/places-searchbox)

所以像这样；

```
// Create the search box and link it to the UI element.
    var input = document.getElementById('pac-input');

    var searchBox = new google.maps.places.SearchBox(input); // <- like this

    map.controls[google.maps.ControlPosition.TOP_CENTER].push(input);

    // Bias the SearchBox results towards current map's viewport.
    map.addListener('bounds_changed', function() {
      searchBox.setBounds(map.getBounds());
    }); 
```

# sql - 插入记录然后更新另一个表

> ID：12745470
> 
> 赞同：-2
> 
> 时间：2012-10-05T11:36:39.947
> 
> 标签：sql, sqlite, triggers, insert, primary-key

我试图围绕如何有效地将数据插入到事先没有所有信息的表中。

我有两张桌子，`Table1`和`Table2`。`Table2`的主键是一个自动递增的 int。此 int 用作行的 ID，并且也在列中`Table1`（不是唯一的，因此中的多条记录`Table1`可以具有相同的`Table2.ID`）。问题是，我如何插入一条新记录`Table1`以自动填充相关`Table2.ID`值?

我的逻辑是：

1.  搜索`Table2`以查看记录是否存在。
2.  如果存在，则返回 ID 值并在 Table1 中插入具有该 ID 值的新记录
3.  如果不存在，则在Table2中插入新记录并返回ID
4.  将新 ID 插入相关的 Table1 列

是否可以让 SQLite 自动插入相关 ID，而不是我必须在代码中执行此操作（四处阅读，我遇到过触发器，但不确定如何使用它们或者它们是否在这里有用）？

**用示例更新问题**（我不允许讨论我正在开发的实际游戏的各个方面，但这个虚构的示例具有相似的性质）

表 2 将被调用`Genre`，表 1 将被调用`Film`并且所有表都是空的。Genre PK (auto int) 将链接到`Film`表中的 Genre 列 (int)。该`Film`表没有`varchar`存储流派文本版本的列，只有 int 列。

我插入一条新记录并作为流派`Film`传入。`Horror`但是，此时表中没有`Horror`记录`Genre`，所以没有可以插入`Film`表的genre列的int值。

因此，从我的角度来看（可能效率不高，因为我不熟悉SQL），我需要先将`Horror`流派插入`Genre`表中，以某种方式获取新创建的ID，然后将该ID插入到`genre`新的列中创`Film`纪录。当我添加第二部`Horror`电影时，该 ID 已存在于`Genre`表中，因此 SQLite 应获取该 ID 并将其放入新`Film`记录中。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:33:07.887

无法将字符串传递`'Horror'`到表的`INSERT`命令`Film`中，因为该表没有这样的列。

在像 SQLite 这样的嵌入式数据库中，没有存储过程，因为在您自己的程序中实现逻辑不会降低效率。

所以你自己做吧；该程序将如下所示：

```
cursor = db.executeQuery('SELECT id FROM Genre WHERE name = ?', ['Horror'])
if cursor.hasSomeRecord:
    genreID = cursor['id']
else:
    db.executeCommand('INSERT INTO Genre(id, name) VALUES(NULL, ?)', ['Horror'])
    genreID = db.last_insert_rowid()

db.executeCommand('INSERT INTO Film(name, genre) VALUES(?, ?)', ['...', genreID]) 
```

* * *

如果您对该字段有`UNIQUE`限制`Genre(name)`，您可以轻松插入流派，同时自动避免重复：

```
INSERT OR IGNORE INTO Genre(name)
  VALUES('Horror');
INSERT INTO Film(name, genre)
  VALUES('...', (SELECT id FROM Genre WHERE name = 'Horror')); 
```

# php - 如何在亚马逊红帽 linux 上安装 php 5.3.17

> ID：12745473
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:36:52.610
> 
> 标签：php, amazon-web-services, redhat

我已经在 amazon redhat linux 上安装了 Apache 和 MySQL 服务器现在我正在尝试使用源代码安装 PHP 5.3.17。我只是将源代码解压缩到源目录并将其安装为：./configure make make install

它显示当我点击命令 **php -v时 php 已安装在服务器上**

PHP 5.3.17 (cli) (built: Oct 5 2012 07:04:23) Copyright (c) 1997-2012 The PHP Group Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies

但是当我创建仅包含以下代码的页面时（基本上显示 phpinfo）

```
<?php
echo phpinfo();
?> 
```

然后它没有向我显示 phpinfo 它的显示

```
<?php
echo phpinfo();
?> 
```

有人能告诉我这里有什么问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:40:29.850

您需要告诉您的网络服务器有关 php 安装的信息。我猜你正在使用 apache，这里有说明：[PHP 安装说明](http://www.php.net/manual/en/install.unix.apache2.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:39:07.790

如果您看到原始 PHP 源代码，则意味着该文件根本没有通过 PHP 引擎。这意味着您的服务器未配置为使用 PHP 执行文件的扩展名，或者根本没有启用 PHP（仅具有可用的 CLI 二进制文件并不意味着您的网络服务器中也有 PHP）

# .net - 可选中的导航属性：可选，其中只有一个表具有外键

> ID：12745474
> 
> 赞同：0
> 
> 时间：2012-10-05T11:36:55.150
> 
> 标签：.net, entity-framework, entity-framework-5

我正在尝试定义以下模型，其中 Appointment 表具有 Person 的外键，并且实体都具有彼此的导航属性。

```
public class Appointment
{
    public int AppointmentId { get; set; }

    // Foreign Key property (this will be created in DB)
    public int? PersonId { get; set; }

    // Navigation property to Flatmate
    public virtual Person Person { get; set; }
}

public class Person
{
    public int PersonId { get; set; }

    // Just navigation property. Don't want Person table to include foreign key (no need)
    public virtual Appointment Appointment { get; set; }
} 
```

我尝试使用流利的配置：

```
 modelBuilder.Entity<Appointment>()
            .HasOptional(a => a.Person)
            .WithOptionalDependent(p=> p.Appointment); 
```

但我得到一个例外，它缺少一列（Appointment_AppointmentId 或 Person_PersonId，取决于我使用的是 WithOptionalDependent 还是 WithOptionalPrincipal）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:45:25.803

实体框架不支持这一点。`HasOptional().WithOptionalDependent()`当两个表使用相同的键 ( `PersonId == AppointmentId`) 时可以工作，但这不是你所遇到的情况。为了确保一个人没有多个约会，您需要确保`PersonId`在表中是唯一的`Appointment`，并且实体框架不支持唯一约束。

您可以做的（不更改数据库）将其映射为一对多关系，其中一个人可以有多个约会，并创建一个辅助属性来返回一个约会：

```
public virtual ICollection<Appointments> Appointments { get; set; }
[NotMapped]
public Appointment Appointment {
    get {
        return Appointments.SingleOrDefault();
    }
} 
```

请注意，实体框架不会理解该`Appointment`属性，因此您不能在查询中使用它。

# c++ - AutoCAD实体可以序列化吗？

> ID：12745478
> 
> 赞同：0
> 
> 时间：2012-10-05T11:37:26.290
> 
> 标签：c++, autocad, objectarx

使用 AutoCAD 2010 的 ObjectARX (C++)，可以序列化 AutoCAD 实体吗？

我们需要将序列化的实体保存在数据库（Oracle、PostgreSQL 等，而不是 AcDbDatabase）的字段中。如果您告诉我如何将它们保存在磁盘中，就可以了，如下所示：

```
AcDbEntity * entity;
...
std::ofstream ofs("c:\\filename.fil", std::ios::binary);
ofs.write((char *)(entity), sizeof(entity));
ofs.close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:59:05.857

最简洁的答案是不”。AutoCAD 数据库对象包括对其他对象的引用，因此您不能反序列化离散对象而不确保所有引用对象的存在。

从技术上讲，您所描述的可以通过实现一个包含必要的对象间引用管理基础结构的自定义 AcDbDwgFiler 来为整个互连对象层次结构完成，然后通过 AcDbObject::dwgOut() 将对象序列化到文件管理器并通过 AcDbObject 反序列化它们::dwgIn（）。但是，在将整个数据库序列化为 .dwg 文件时，您最终基本上复制了 AutoCAD 已经执行的操作，因此在大多数情况下它无法达到目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:36:38.357

同意 Owen，但如果您不想将数据保存在 dwg 文件中，可能还有另一种解决方案。注意 ObjectArx 支持 MFC，MFC 有自己的序列化机制。您可以从 AcDbEntity 和 MFC CObject 派生您的实体。使用 MFC 的机制来序列化您的数据。如果您覆盖 MFC 的序列化方法，您可以轻松地将数据序列化到数据库中。为此，您必须在 dwgin 和 dwgout 中调用 MFC 序列化函数。

# java - 如何逐步加载图像以便 ImageObserver 工作？

> ID：12745483
> 
> 赞同：1
> 
> 时间：2012-10-05T11:37:46.890
> 
> 标签：java, image, swing, graphics, progressive-download

方法有`ImageObserver`能力`Graphics.drawImage()`。看到这一点的最简单方法是什么？我想`ImageIO.read()`返回`BufferedImage`所以它都在内存中。如何获取部分加载的图像以便观察者调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:57:16.777

这似乎调用了图像观察者。如果您正在调用该`drawImage`方法并且图像仍在处理中，它将开始使用`ImageObserver`. 缩放是通常会导致图像被处理的一个示例。

```
import java.awt.*;
import java.awt.image.*;
import java.io.*;
import java.net.*;
import javax.imageio.ImageIO;
import javax.swing.*;

public class ImageObserverDemo extends Box{

    Image bi;
    Image bi2;
    Dimension d = new Dimension(300,200);

    public ImageObserverDemo() {
        super(BoxLayout.Y_AXIS);        
        try {
            bi = ImageIO.read(new URL("http://apod.nasa.gov/apod/image/0304/bluemarble2k_big.jpg"));
            bi = bi.getScaledInstance(100, 100, BufferedImage.SCALE_SMOOTH);
            bi2 = new BufferedImage(bi.getWidth(this), bi.getHeight(this), BufferedImage.TYPE_INT_ARGB);
            bi2.getGraphics().drawImage(bi, 0, 0, this);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public boolean imageUpdate(final Image img, int infoflags, int x, int y,
            int width, int height) {

        boolean result = true;
        if((infoflags | ImageObserver.FRAMEBITS) == ImageObserver.FRAMEBITS){
            result = false;
        } else if((infoflags | ImageObserver.ALLBITS) == ImageObserver.ALLBITS){
            result = false;
        }

        if(result){
            System.out.println("Image incomplete");
        } else{
            System.out.println("Complete");
        }

        return result;
    }

    @Override
    public Dimension getPreferredSize(){
        return d;
    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new ImageObserverDemo());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

# mongodb - MongoDB - 安全/永久擦除敏感数据（文档），使其无法恢复

> ID：12745486
> 
> 赞同：2
> 
> 时间：2012-10-05T11:37:54.713
> 
> 标签：mongodb

假设一些敏感数据作为文档保存在 MongoDB 数据库中，我们希望安全/永久地删除它们，以便任何人都无法恢复和滥用它。在某些文档上使用删除功能不会永久删除数据。它仍然可以恢复。如何永久删除数据并确保无法恢复此数据。除了删除功能之外应该做什么。我们必须有选择地删除数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:57:43.640

我认为您要问的问题有很多步骤和周期。由于硬盘工作方式的性质，这在 MongoDB 本身内是不可能的。

MongoDB 将从数据库本身中删除行，因此它们无法被网站端的任何人恢复等，甚至无法通过从服务器内部查询数据库来恢复，但是数据仍然存在于硬盘本身上。

基本上，使用 时`remove()`，数据不会以正常方式可见。这些数据通常（应该）对操作系统本身隐藏。

要完全“删除”它，您将需要可以使用安全（可能是军用级）算法多次（可能是 3000 次）覆盖磁盘区域的软件，该算法旨在诱导环上的完全出血，以防止通过微观恢复数据物理读取磁盘。

当硬盘进入生命周期结束时，这通常是一个 botted 或手动过程。我个人喜欢：[http ://www.dban.org/](http://www.dban.org/)

# html - Docbook XSL – HTML 定制层 – 结果文档中出现不必要的中断

> ID：12745487
> 
> 赞同：1
> 
> 时间：2012-10-05T11:37:56.447
> 
> 标签：html, xslt, docbook

*根据要求将此问题移至其他线程。*

我正在尝试自定义 DocBook XSL 的 HTML 输出。

在 docbook`<table>`元素之后，样式表生成以下代码：

```
<div class="table">
    [...]
</div>
<p>
    <br class="table-break">
</p> 
```

这会在 HTML 输出中引入不需要的空格，并且我无法找到此代码的来源，因为在 DocBook XSL 中搜索“table-break”没有结果。我将如何摆脱这段代码？

谢谢！

~斯兰皮斯科

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:28:21.643

此信息针对 Docbook XSL 1.77.1。这可能与您的版本不匹配，特别是考虑到您的 post table break 元素包含`<p>`：

正如 mzjn 所提到的，formal.xsl 文件包含您要查找的内容。`formal.object`是指定 CALS 表（或嵌入图形/媒体对象）时调用的命名模板。在这个模板中，有一个测试来检查是否应该在之后添加中断元素。有一个控制此行为的全局参数（文件顶部）。它默认启用：

```
<xsl:param name="formal.object.break.after">1</xsl:param> 
```

您可以通过将参数指定给您的 XSLT 处理器来重新定义它，例如，对于 Saxon，它将采用以下形式：

```
java -jar saxon.jar file.xml your.customisation.xsl formal.object.break.after=0 
```

`formal.object.break.after`您也可以在导入基本样式表后重新定义，从而在您的自定义中隐藏它。

# php - 编辑 magento 电子邮件模板

> ID：12745490
> 
> 赞同：1
> 
> 时间：2012-10-05T11:38:05.127
> 
> 标签：php, magento

我创建了一个新的交易电子邮件

使用

系统->配置->交易邮箱

我想显示数据库中的一些信息

小名

房间

类型

如何从数据库中获取这些信息并在电子邮件中显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:03:54.620

您可以使用模板文件在交易电子邮件中添加额外信息：

让我们以新订单模板为例：

您会在电子邮件格式/模板文件中找到如下内容：

```
{{layout handle="sales_email_order_items" order=$order}} 
```

**在 sales.xml 中搜索您的句柄名称**

**/app/design/frontend/default/layout/sales.xml**

您将在 sales.xml 文件中得到类似的内容：

```
<sales_email_order_items>
      <block type="sales/order_email_items" name="items" template="email/order/items.phtml">
          <action method="addItemRender"><type>default</type><block>sales/order_email_items_order_default</block><template>email/order/items/order/default.phtml</template></action>
          <action method="addItemRender"><type>grouped</type><block>sales/order_email_items_order_grouped</block><template>email/order/items/order/default.phtml</template></action>
      </block>
  </sales_email_order_items> 
```

上面的 xml 清楚地表明内容是由 email/order/items.phtml 模板文件生成的，打开该文件并添加您想要包含的内容，最好将这些文件放在您当前的主题中，而不是在核心中更改它。

# php - 使用 twig 访问 redbeanphp 对象属性

> ID：12745500
> 
> 赞同：1
> 
> 时间：2012-10-05T11:39:00.563
> 
> 标签：php, twig, fuelphp, redbean

这可能是一个简单的问题，但让我头疼。

问题是我正在用fuelPHP、RedBean 和Twig 做一个项目。一切似乎都很好，我在这个框架上进展得非常好。

我遇到的尚未找到任何解决方案的问题是，`{{object.property}}`如果我从 redbean 获取对象，则无法访问 Twig。这很奇怪，因为如果我使用自己的 MVC 框架，完全相同的代码（Twig+Redbean 也是）可以工作。

例如

```
public function action_messages() {
    $room = \Uri::segment(3);
    $this->data['messages'] = \R::find('message', 'room = ? ORDER BY id', array($room));

    // This is working because it's converting each row to array
    /*foreach($this->data['messages'] as $id => $message)
        $this->data['messages'][$id] = $message->export();*/

    return \Response::forge(\View::forge('chat/messages.twig', $this->data));
} 
```

如果我将导出作为数组而不是作为对象，则事情会按预期工作。

```
{%for message in messages%}
     <b>{{message.user.id}}</b>{{message.datetime}}: {{message.text}}
{%endfor%} 
```

我真的迷失了。因此，我将不胜感激任何可能的帮助。

编辑：（更多信息）

如果我把

```
{%for message in messages%}
{{message}}<br/>
{%endfor%} 
```

我从 Var 得到这个输出。

```
{"id":"23","text":"A test","room":"1","datetime":"2012-10-05 15:32:36","user_id":"1"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:05:20.567

最后我让它工作了。

问题出在 FuelPHP 框架中的 Twig 配置中。

auto_encode 参数在对象属性的情况下将 json 转换为数组。因此，您必须将其设置为 false（默认情况下为 true）。

调整你的配置以获得类似的东西。

```
// TWIG ( http://www.twig-project.org/documentation )
// ------------------------------------------------------------------------
'View_Twig' => array(
    'include' => APPPATH.'vendor'.DS.'Twig'.DS.'Autoloader.php',
    'auto_encode' => false, // Remember to set this to false
    'views_paths' => array(APPPATH.'views'),
    'delimiters' => array(
        'tag_block'     => array('left' => '{%', 'right' => '%}'),
        'tag_comment'   => array('left' => '{#', 'right' => '#}'),
        'tag_variable'  => array('left' => '{{', 'right' => '}}'),
    ),
    'environment' => array(
        'debug'                => false,
        'charset'              => 'utf-8',
        'base_template_class'  => 'Twig_Template',
        'cache'                => APPPATH.'cache'.DS.'twig'.DS,
        'auto_reload'          => true,
        'strict_variables'     => false,
        'autoescape'           => false,
        'optimizations'        => -1,
    ),
    'extensions' => array(
        'Twig_Fuel_Extension'
    ),
), 
```

它会像魅力一样发挥作用:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:58:41.873

我为您调查了 Twig，但它太复杂（没必要），无法深入了解。我不了解 Twig。但是你试过用RedBeanPHP作者写的模板引擎吗？

[http://gabordemooij.com/se/](http://gabordemooij.com/se/)

这很简单。但不同的是，像 RedBeanPHP。Gabor 总是与众不同 ;) 。

# shapefile - MapServer：帮助添加数据和设置 WMS

> ID：12745501
> 
> 赞同：0
> 
> 时间：2012-10-05T11:39:01.080
> 
> 标签：shapefile, mapserver, wms

我正在尝试使用 MapServer 来设置和运行 WMS 服务器来托管我在一组 shapefile 中的数据。

我从安装 MS4W 开始（因为我认为这很简单），并在此处下载了 british_isles.shp.zip 表单：

> [http://download.geofabrik.de/openstreetmap/europe/](http://download.geofabrik.de/openstreetmap/europe/)

我现在已经两次关注 MapServer 上的文档，但我仍然看不到它告诉我如何做我需要的任何事情。

WMS 页面只介绍了地图文件，但没有解释如何添加数据或如何将 WMS 指向数据，数据部分没有告诉您如何将数据输入服务器，您只需按照一堆不给你任何信息的链接。

完成后的地图服务器配置需要尽可能简单地重新设置，因为它需要在几台单独的机器上。

我真的很喜欢一个简单的教程，介绍如何获取 shp 文件并通过 MapServer 作为 WMS 服务器运行，并可能缓存切片以提高性能。

谁能指点我实现这一目标所需的资源或帮助我完成我需要采取的步骤？

问候，

我x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:43:37.103

试试OS-Geo 的[本教程？](http://live.osgeo.org/en/quickstart/mapserver_quickstart.html)

提示

*   您通过 MAP 文件控制 MapServer。它是一个文本文件 - 您必须在文本编辑器中对其进行编辑。
*   要“添加数据”，请在引用 shapefile 的 MAP 文件中定义一个 LAYER。
*   要“将 WMS 指向数据”，只需在 MAP 文件中添加 WMS 支持。
*   您的 WMS URL 由服务器上 MapServer 的路径和 MAP 文件的路径组成。

# c# - 如何在 C# 中将数据写入 XML

> ID：12745502
> 
> 赞同：-2
> 
> 时间：2012-10-05T11:39:06.213
> 
> 标签：c#, .net, xml, linq-to-xml

我是 C# 和 XML 的新手

如何将`Id`、`name`和新值`AvailProducts`写入`Cost`XML 文件`C#`？

```
 <root>
<Bathing>
    <Id>San100</Id>
    <name>Santoor</name>
    <AvailProducts>30</AvailProducts>
    <Cost>20.00</Cost>
</Bathing>
<Bathing>
    <Id>Det123</Id>
    <name>Dettol</name>
    <AvailProducts>30</AvailProducts>
    <Cost>15.00</Cost>
</Bathing>
<Bathing>
    <Id>Rex123</Id>
    <name>Rexona</name>
    <AvailProducts>30</AvailProducts>
    <Cost>16.00</Cost>
</Bathing>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:48:37.160

您可以使用 an`XMLDocument`和使用该`CreateNode`方法。

```
 XmlDocument doc = new XmlDocument(); 

  doc.LoadXml(); // file path of the XML you provided in your question.

  XmlNode nameElem = doc.CreateNode("element", "Name", "");  
  nameElem.InnerText = "Darren Davies";

  XmlNode availableProducts = doc.CreateNode("element", "AvailProducts", "");  
  availableProducts.InnerText = "Product";

  XmlNode cost = doc.CreateNode("element", "Cost", "");  
  cost.InnerText = "Cost";

  XmlElement root = doc.DocumentElement;

  root.AppendChild(nameElem); // Append the new name element
  root.AppendChild(availableProducts);
  root.AppendChild(cost); 
```

[http://msdn.microsoft.com/en-us/library/ms162365.aspx#Y1700](http://msdn.microsoft.com/en-us/library/ms162365.aspx#Y1700)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:50:42.243

正如其他人所说，您应该首先尝试通过在 Google 中搜索来找到答案，甚至 stackflow 本身可能已经指导了您。

反正，

```
XmlDocument xDoc = new XmlDocument(); 
xDoc.Load("XMLFile.xml")");  
XmlNodeList nodeList; 
nodeList = xDoc.DocumentElement.SelectNodes("Bathing");

foreach (XmlNode node in nodeList)

{

XmlNode child = node.SelectSingleNode("Id");

child.InnerText = "NewValue";

..write for other child nodes...

} 
```

# asp.net-mvc - 部分页面不呈现样式

> ID：12745507
> 
> 赞同：0
> 
> 时间：2012-10-05T11:39:15.447
> 
> 标签：asp.net-mvc

我正在使用 MVC3 剃须刀引擎。在一个视图中，我正在对控制器中的方法进行 jquery $.post 调用在 ajax 调用中，我通过 `$('#divPartial').html(data);`divPartial 包含代码的位置填充容器

```
 <div id="divPartial">
        @{
    Html.RenderPartial("_TrackReviewers");
  }
        </div>

   public ActionResult  GetSessionTrackReviewerList(int selectedID)
        {
                     ReviewersTrackViewModel revMode = new ReviewersTrackViewModel(); 
            List<Reviewers> reviewers = sessionService.GetSessionTrackReviewerList(selectedID);
            GetSessionTrackList();
            revMode.reviewerList = reviewers;
            revMode.trackId = selectedID;   
           return PartialView("_TrackReviewers", reviewers);
                      } 
```

这将返回部分视图

部分视图的内容

```
@if (this.ViewContext.FormContext == null) { this.ViewContext.FormContext = new FormContext(); } 

    @model List<Reviewers>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>  
    <table id="tblReviewer" style="width: 400px" runat="server" class="listTable">
        <tbody id="tblBody" runat="server">
            @if (Model != null)
            {
                foreach (var item in Model)
                {       

                <tr>
                    <td class="truncated">
                        @item.User.FirstName 
                    </td>
                </tr>
                }
            }
        </tbody>
    </table> 
```

数据是从局部视图返回的，但我为表类应用的样式（如**truncated**和**listTable**）尚未应用于主视图的局部视图。

请帮助

# java - 从 1.6 迁移到 1.7（基于 maven 的项目）后，无法在 Jetbrains Intellij 中使用 Java 1.7 进行编译

> ID：12745510
> 
> 赞同：24
> 
> 时间：2012-10-05T11:39:28.957
> 
> 标签：java, intellij-idea, javac

使用基于 Maven 项目的 Jetbrains 11.2 项目。然后我需要移动到 1.7。我安装了 1.7，我更新了我的 pom.xml，我可以使用 maven 重建整个包。

我已经修改了 Intelli Projects 设置中关于 Java 版本的所有设置

*   项目 SDK
*   项目语言级别
*   模块语言/来源/语言级别
*   模块语言/依赖项/模块 SDK

但我无法让它编译它抱怨的文件：

```
Error:javac target release of 1.6 conflicts with source release 1.7 
```

然后我尝试在我的另一台开发机器上使用相同的代码库但不同的 Intellij 项目，在此我得到一个类似的错误：

```
Error:javac: source release 1.7 requires target release 1.7 
```

为了使其正常工作，我看不到任何其他要更改的内容。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-05T11:48:30.670

呵呵，找到了

文件/设置/Java 编译器/附加命令行参数

从**-target 1.6**更改为**-target 1.7**

不过，它在这里似乎很奇怪，与其他相关选项脱节。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-07-01T19:30:27.097

作为替代解决方案，对我有用的是在**模块设置**中 检查**语言级别**属性。它被设置为`8.0 Lambdas`并更改为`6.0 @Overrides in interfaces`，之后编译工作没有错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-24T10:56:45.240

# **IntelliJ 2017（也是 15 或 2016）**

您可以在此处更改编译器版本：

```
File -> Settings -> Build, Execution, Deployment -> Compiler -> Java Compiler 
```

现在更改`Target bytecode version`为所需的。

# **IntelliJ 13 或 14**

您可以在此处更改编译器版本：

```
 Intellij IDEA -> Preferences -> Compiler -> Java Compiler
 -> Project bytecode version -> 1.7 (for example) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-23T18:12:34.950

对于 IntelliJ 12，我通过打开文件：项目结构并将项目 SDK 更新为 1.7 并将项目语言级别更新为“7.0 - Diamonds、ARM、multi-catch 等”解决了这个问题。

如果您没有使用 JDK 1.7 配置 IntelliJ，请使用“新建”按钮添加它。选择类型“JDK”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-10T20:50:08.467

另一个可能的解决方法是确保您的构建文件具有硬编码的版本，如此处所示

```
 <javac target="1.7" source="1.7" ... /> 
```

与

```
<property name="java.version" value="1.7" />
<javac target="${java.version}" source="${java.version}" ... /> 
```

虽然这可能是由于我对变量在构建文件中的工作方式有误解。你会认为这是有道理的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-23T02:11:34.967

我遇到了同样的问题。我通过 Intellij IDEA -> Preferences -> Compiler -> Java Compiler -> Project bytecode version -> 1.7 & Target bytecode version -> 1.7 解决了它

# cakephp - CakePHP 媒体插件错误

> ID：12745511
> 
> 赞同：0
> 
> 时间：2012-10-05T11:39:31.023
> 
> 标签：cakephp, cakephp-2.1

我正在使用我的 Cake 2.1 应用程序设置媒体插件。我之前用过 Cake 2.0 的插件，没有遇到任何问题。现在，当我尝试上传文件时收到此错误消息：

```
Fatal error: Call to a member function pwd() on a non-object in /home/fractalw/public_html/cms/app/Plugin/Media/Model/Behavior/CouplerBehavior.php on line 141 
```

这是我的 bootstrap.php 文件的相关部分： CakePlugin::load('Media');

```
require APP . 'Plugin' . DS . 'Media' . DS . 'Config' . DS . 'core.php';

$thumbnail = array('fitCrop' => array(100, 100));
$small = array('fitCrop' => array(200, 200));
$large = array('fit' => array(700, 10000));
$smallthumbnail = array('fitCrop' => array(75, 75));
$tinythumbnail = array('fitCrop' => array(35, 35));

Configure::write('Media.filter', array('default' => array(
    'audio' => array(),
    'document' => array(),
    'generic' => array(),
    'image' => compact('small', 'thumbnail', 'smallthumbnail', 'large', 'tinythumbnail'),
    'video' => compact('medium', 'large')
))); 
```

...还有我的模型 File.php：

```
public $actsAs = array(
    'Media.Transfer',
    'Media.Coupler',
    'Media.Generator',
    'Media.GeneratedDeletable',
    'Media.Meta',
    'Containable'
);

public $validate = array(
    'file' => array(
        'mimeType' => array(
            'rule' => array('checkMimeType', false, array('image/jpeg', 'image/png', 'image/gif'))
        )
    )
); 
```

当我提交上传文件的表单时，我收到上述错误消息。CouplerBehavior.php 中有问题的行是：

```
str_replace('\\', '/', Folder::slashTerm($File->Folder->pwd())) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:41:18.887

好吧，我做了一个傻事。

我已经命名了我的模型文件。这显然是 CakePHP 中 File 类的名称。上传文件后，媒体插件会将其转换为新的文件对象，就像在模型中一样。我改名为我的模型附件。为什么会发生这种情况——你花了很长时间思考一个问题，然后在互联网上发布一个问题后，你就找到了答案……

# c# - 如何避免使用 C# 和实体框架获取递归对象

> ID：12745513
> 
> 赞同：1
> 
> 时间：2012-10-05T11:39:53.417
> 
> 标签：c#, entity-framework-4

现在，为了访问自联接对象的所有子类别，我正在进行这样的查询。

```
var productCategories = db.Categories.Inlcude("ChildCategories")
            .Inlcude("ChildCategories.ChildCategories")
            .Inlcude("ChildCategories.ChildCategories.ChildCategories")
            .Inlcude("ChildCategories.ChildCategories.ChildCategories.ChildCategories")
            .Inlcude("ChildCategories.ChildCategories.ChildCategories.ChildCategories.ChildCategories")
            .Inlcude("ChildCategories.ChildCategories.ChildCategories.ChildCategories.ChildCategories.ChildCategories") 
```

对于这种查询可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:48:16.083

要允许 IQueryable 获取所有内容（与延迟加载相反），您可以在 DBContext 上禁用延迟加载。

```
 using(DBContext db = new DBContext) {
      db.ContextOptions.LaxyLoadingEnabled = false;
      // TODO: Other code here
 } 
```

编辑：修复了对@Slauma 评论的回答。

如果 ChildCategory 是 Category 的子类（继承）：

如果您希望 IQueryable 获取 a 的所有内容`ChildCategory`，则可以使用该`OfType<T>()`方法。

```
 var productCategories = db.Categories.OfType<ChildCategories>(); 
```

# winapi - 使用 Win32 从命名管道读取消息

> ID：12745527
> 
> 赞同：1
> 
> 时间：2012-10-05T11:40:59.503
> 
> 标签：winapi, named-pipes

我有一个 .NET 应用程序向 C++ 应用程序发送数据。他们在消息模式下使用命名管道来发送数据。在 C++ 端获取数据我猜我必须执行 ReadFile 才能将消息放入缓冲区。但是，如果缓冲区太小，我会得到 ERROR_MORE_DATA，我应该再次发出 ReadFile。自从我完成任何 cpp 编码以来已经很长时间了，所以我想知道是否有一种最佳实践方法来进行这种重新分配，然后将所有字节缓冲区重新组装到一个缓冲区中。
我只能想到某种指向缓冲区的指针列表，并且您不断增长列表，直到您完成计算大小分配一个巨大的缓冲区并使用 memcpy 复制所有内容。有没有人能想到的更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:55:27.687

为什么不先从 C# 端向下传递一个数据包，其中包含要发送的数据的大小？在 C++ 端，使用 ReadFile 从管道中读取它，并根据刚刚从管道接收到的大小创建缓冲区。

然后执行另一个 ReadFile 用实际数据填充正确大小的缓冲区。

因此，在 C++ 端有两个 ReadFile，一个用于获取数据的大小，一个用于获取实际数据。C#端先发送数据的大小，再发送实际数据。

# android - 来自具有多个入口点的活动的带有向上按钮的 Android 导航

> ID：12745529
> 
> 赞同：2
> 
> 时间：2012-10-05T11:41:08.490
> 
> 标签：android, navigation, notifications, android-pendingintent

我正在音乐播放器应用程序中实现向上按钮。此应用程序的玩家活动可以有多个入口点（不同活动中的多个曲目列表）。我试图弄清楚如何正确实现向上按钮模式。根据文档：

> 导航到具有多个入口点的屏幕
> 
> 有时，一个屏幕在应用程序的层次结构中没有严格的位置，并且可以从多个入口点访问——例如可以从应用程序中的任何其他屏幕访问的设置屏幕。在这种情况下，Up 按钮应该选择返回 >referring 屏幕，其行为与 Back 相同。

这是有道理的，在正常使用情况下，我只会调用 onBackPressed() 甚至是 finish()。但是有一种情况我不知道如何处理。播放发生在带有通知的服务中。如果用户在播放某些内容时退出应用程序，他/她可以单击通知直接转到播放器。

在这一点上，玩家将是堆栈中唯一的东西，所以我不确定当用户点击时的最佳方式。理想情况下，我想选择一个默认登录页面（主页）导航到。我不确定如何在不查看后台堆栈的情况下知道将用户发送到哪里，而且似乎应该有一些更容易的东西。

所以我正在寻找这个序列的方法：

```
- user is in player activity and presses up
- if the entry point to the player is still on the backstack, I finish() to go back to the referring activity
- if the entry point is not on the backstack, I go to the home page 
```

这听起来对吗，还有什么简单的方法可以实现吗？

# jquery - Jquery计算宽度和se div标签

> ID：12745530
> 
> 赞同：0
> 
> 时间：2012-10-05T11:41:11.977
> 
> 标签：jquery, grid

我正在为一个站点做一个网格系统。标记看起来像这样

```
<div class="section">
    <div class="grid">

    </div>
    <div class="grid">

    </div>
    <div class="grid">

    </div>
    <div class="grid">

    </div>
</div>
<div class="section">
    <div class="grid">

    </div>
    <div class="grid">

    </div>
    <div class="grid">

    </div>
</div> 
```

类网格的宽度为 33.3333333333%。

每次网格总和达到 100 或接近 100% 时，我都想插入一个 div。这样标记看起来像这样

```
<div class="section">
    <div class="grid">

    </div>
    <div class="grid">

    </div>
    <div class="grid">

    </div>
        <div class="clear"></div> <!-- inserted div -->
    <div class="grid">

    </div>
</div>
<div class="section">
    <div class="grid">

    </div>
    <div class="grid">

    </div>
    <div class="grid">

    </div>
       <div class="clear"></div> <!-- inserted div -->
</div> 
```

这就是我到目前为止所拥有的。我的包装器最大 972px 宽

```
var grid = $('.grid');
var wrapper = $('.wrapper').width();

$(grid).each(function () {
    var gridWidth = $(this).width();
    var percentage = (gridWidth / wrapper)*100;

    console.log(percentage);
}); 
```

谁能帮我 ？

编辑：我添加了一个截图，所以你可以看到这个问题。第四个元素有一个左边距，这是不应该的。这就是为什么我要添加一个明确的 ![在此处输入图像描述](../Images/b64a2a33c7a9abff1f3e5343a7b6cff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:19:43.493

首先要注意代码中的一些差异。在 HTML 中您使用的是“section”类，在 jQuery 中您选择的是“.wrapper”。

而且你应该尝试这样的事情：

```
$('.section').each(function() {

    var rowPixels = 0;
    $(this).find('.grid').each(function () {

        var gridWidth = $(this).width();
        rowPixels += gridWidth;

        if (rowPixels >= $('.section').width()) {
            $(this).after('<div class="clear"></div>');
            rowPixels = 0;
        }

    });

}); 
```

# bash - Bash 每次都需要重置

> ID：12745533
> 
> 赞同：2
> 
> 时间：2012-10-05T11:41:24.287
> 
> 标签：bash

一段时间以来，我的**bash 没有显示我写的内容**（“回声”？），`reset`每次打开新会话时我都必须运行命令。

我只是通过在 ~/.bashrc 的末尾添加来“修复”它`reset`，但这不是最好的解决方案，因为它在我的通用设置中是特定于计算机的垃圾，而且这个命令需要时间。

**我应该怎么做才能永久修复这些设置？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-11-01T16:29:14.580

有趣的是，例如，当我偶然发现二进制文件时，就会发生这种情况。更一般地说，当某些东西正在向终端写入 ansi-control 字符/序列并破坏它（我认为）时，可能会发生这种情况。原因非常依赖于环境，并且弄清楚为什么在您的机器上发生这种情况不太适合 stackoverflow 的 Q/A 格式。但是，有些人提供了有关如何自动重置终端的线索。

没有永久的解决方法，但是您可以通过定义例如做一些聪明的事情

```
PROMPT_COMMAND=__prompt_command 
```

并且在那...

如果 stty 报告 -echo，则运行 stty echo。

```
 PROMPT_COMMAND=zumba
zumba() { PS1="$: "; stty  | grep -qe -echo && stty echo; } 
```

老实说，我不确定这是否会对你的 shell 产生不利影响——比如一些非交互式进程中断或一些 ncurses 程序中断。

除了提示命令，您还可以使用调试陷阱技巧在每个命令之前运行一些东西

看到这个：[https ://superuser.com/questions/175799/does-bash-have-a-hook-that-is-run-before-executing-a-command](https://superuser.com/questions/175799/does-bash-have-a-hook-that-is-run-before-executing-a-command)

# bash - 使用 bash 脚本和 sed 修复引号转义

> ID：12745536
> 
> 赞同：1
> 
> 时间：2012-10-05T11:41:39.270
> 
> 标签：bash, sed

我有一个处理一些 CSV 的 bash 文件。一些输入的 CSV 格式不正确，所以我想用 sed 修复它们。引号被转义为 like`\"`和 not like `""`，所以我调用 sed 来改变它。在命令行中，这完美地工作：

```
sed -i 's/\\"/""/gi' input.csv 
```

但是在 bash 脚本中，这似乎什么也没做。我想这与引号和转义序列有关，但解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T11:48:05.643

您需要转义转义字符`\`才能使其正常工作：

```
$ echo 'bla;\"bli bli\";otherbla' | sed -e 's/\\\"/""/g'
bla;""bli bli"";otherbla 
```

对于 bash 脚本，您需要确保从 CSV 文件中读取的行在传递给 sed 时被正确引用。您能否提供 CSV 文件的示例以及您如何从文件中读取数据？

使用`cat file | while read`，这是问题的一个示例：

```
$ cat test.csv
bla;\"bli bli\";otherbla
ble;""bli bli"";otherbla
bli;\"blo\";otherbla

$ cat test.sh
#!/bin/bash

cat test.csv | while read line;
do echo "$line" | sed -e 's/\\\"/""/g'
done

$ ./test.sh
bla;"bli bli";otherbla
ble;""bli bli"";otherbla
bli;"blo";otherbla 
```

一种解决方案是不在脚本中使用 echo，而是直接在文件上使用 sed 并将生成的 csv 存储在新文件中：

```
$ sed -e 's/\\\"/""/ig' test.csv > test-tmp.csv
$ cat test-tmp.csv
bla;""bli bli"";otherbla
ble;""bli bli"";otherbla
bli;""blo"";otherbla 
```

然后，正如评论中指出的那样，为了避免以 结尾的引用字段的破坏和错误替换`\`，我们可以使用 2 个 sed 表达式，并包含字段分隔符以确保我们*仅*`\"`替换前面或后面的字段分隔符（在我的示例中，字段分隔符是`;`) 但这个不考虑字段单引号，字段中的`\`最后一个字符，例如`blo`行：

```
$ cat test.csv
bla;\"bli bli\";otherbla
ble;""bli bli"";otherbla
bli;\"blo\";otherbla
blo;"bli bli\";otherbla
blu;""bli bli\"";otherbla

$ sed -e 's/;\\\"/;""/ig' -e 's/\\\";/"";/ig' test.csv
bla;""bli bli"";otherbla
ble;""bli bli"";otherbla
bli;""blo"";otherbla
blo;"bli bli"";otherbla
blu;""bli bli\"";otherbla 
```

如果你有几个 sed 命令，你可以把它们放在一个脚本中，它的工作方式是一样的：

```
$ cat s.sed 
s/\\\"/""/g 
```

使用它：

```
$ echo 'bla;\"bli bli\";otherbla' | sed -f s.sed 
bla;""bli bli"";otherbla

sed -f s.sed test.csv > test-tmp.csv 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:04:48.347

您是否考虑过其中一个字段合法地以 \ 字符结尾的情况？CSV 文件中的引用表示将以反斜杠结尾，后跟引号；sed 解决方案（例如您的和 Thomas 的解决方案）会破坏它。

这就是为什么 sed 是使用带引号的 csv 的错误工具的原因；有些问题只能用适当的语言（awk、Perl 或其他）递归地解决

# java - 使用 SSH 连接进行应用程序间通信

> ID：12745539
> 
> 赞同：3
> 
> 时间：2012-10-05T11:41:45.760
> 
> 标签：java, apache-mina, sshd

我想编写一个应用程序，它是一个具有两种连接类型的自定义 SSH 服务器：

*   同步通道，客户端键入命令，服务器将返回输出
*   用户连接并开始读取IO的流通道，服务器连续发布数据。

我在 Java 中这样做，我认为 Apache Mina SSHD 是正确的工具。我设法编写了一些用于身份验证的代码（感谢在网上找到的资源），并且可以在我的连接上运行 /bin/sh，所以我猜我已经完成了所有设置。问题是从现在开始我就被困住了，因为我对这些东西是如何工作的以及 Mina 的具体工作方式缺乏了解。

基本上我需要访问每个 SSH 连接的输入和输出流，之后我可以自己整理东西，买什么是正确的方法来获得它？

我应该制作自定义频道吗？自定义外壳？一组自定义命令？

有人可以指出我有关该主题的资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:23:21.000

我找到了解决方案：

首先你必须实现一个命令工厂，它的完成如下：

```
class CommandFactory extends Factory[Command] {

  override def create():Command = {
    new Command() {
      def destroy() {}

      def setInputStream(in: InputStream) {}

      def setErrorStream(err: OutputStream) {}

      def setOutputStream(out: OutputStream) {}

      def start(env: Environment) {}

      def setExitCallback(callback: ExitCallback) {}
    }
  }
} 
```

然后你像这样设置你的 ssh 服务器：

```
sshd.setShellFactory(new CommandFactory()) 
```

当然，您可以扩展实现以将所需的任何内容传递给命令。

该命令的实现是您定义 shell 行为的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:34:14.667

这是我对问题本身发表的评论的后续行动。

要允许客户端（客户端）直接访问远程计算机（服务器）上的端口，或通过与服务器（网关）位于同一网络的另一台计算机通过 SSH 访问，您只需使用 -L 标志。

直接从客户端到服务器（客户端机器上的端口 8080 将通过隧道连接到服务器上的 80）：

```
ssh -L 8080:localhost:80 server 
```

通过网关从客户端到服务器（客户端机器上的端口 8080 将通过隧道连接到服务器上的 80）：

```
ssh -L 8080:server:80 gateway 
```

从 ssh 的手册页中，您可以使用 -L 标志：

```
 -L [bind_address:]port:host:hostport
         Specifies that the given port on the local (client) host is to be
         forwarded to the given host and port on the remote side.  This
         works by allocating a socket to listen to port on the local side,
         optionally bound to the specified bind_address.  Whenever a
         connection is made to this port, the connection is forwarded over
         the secure channel, and a connection is made to host port
         hostport from the remote machine.  Port forwardings can also be
         specified in the configuration file.  IPv6 addresses can be
         specified by enclosing the address in square brackets.  Only the
         superuser can forward privileged ports.  By default, the local
         port is bound in accordance with the GatewayPorts setting.
         However, an explicit bind_address may be used to bind the
         connection to a specific address.  The bind_address of
         ``localhost'' indicates that the listening port be bound for
         local use only, while an empty address or `*' indicates that the
         port should be available from all interfaces. 
```

# c# - 在 asp.net mvc3 中上传文件

> ID：12745541
> 
> 赞同：1
> 
> 时间：2012-10-05T11:41:53.720
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我需要上传一个文件，我找到了几种方法。我认为最好的方法是根据这个博客： [博客](http://haacked.com/archive/2010/07/16/uploading-files-with-aspnetmvc.aspx)

我还在这里找到了一个有用的帖子： [stackoverflow topic](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0)

但是当我尝试它时，它失败了。我在 Visual Studio 中收到以下错误：

序列包含一个以上的元素，没有更多可以继续下去了。

我的代码如下所示：

控制器：

```
public PartialViewResult Index(parameterlist)
    {
        var model = new Model();

        return PartialView(model);
    }

[HttpPost]
    public ActionResult Index(HttpPostedFileBase file)
    {
        // Verify that the user selected a file
        if (file != null && file.ContentLength > 0) 
        {
            // extract only the filename
            var fileName = Path.GetFileName(file.FileName);

            var path =         Path.Combine(Server.MapPath(@"Path"), fileName);
            file.SaveAs(path);
        }
        // redirect back to the index action to show the form once again
        return RedirectToAction("Index");            
    } 
```

看法：

```
 <div class="span6">                                
            @using (Html.BeginForm("null", "null", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                <input type="file" name="file" />
                <input type="submit" value="OK" />
            }
        </div> 
```

所以当这个部分视图被调用时，它会转到 actionResult 方法，当然没有选择文件，因为视图还没有打开。视图中还有其他一些文本框和下拉菜单。但没什么特别的，有人知道我做错了什么吗？我有一种感觉，我错过了一些重要的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:09:44.777

为避免执行错误的函数，您应该在 Html.BeginForm 中指定 Controller 和 Action 而不是那里的空值。

```
@using (Html.BeginForm("Index", "YourController", FormMethod.Post, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:24:04.253

我尝试将它们合并到一个表单中，所以我的表单现在看起来像这样：

```
@using (Ajax.BeginForm("Method", "Controller",new { enctype = "multipart/form-data" }, new AjaxOptions { HttpMethod = "Post", OnSuccess = "Method" }, new { @class = "css", id = "formname" }))
{
   Some divs and stuff

   <input type="file" name="file" class="btn btn-inverse" />
   </div> 
```

该函数如下所示：

```
[HttpPost]
        public void _SaveDocument(Model model, HttpPostedFileBase file)
        {
            if (file != null && file.ContentLength > 0)
            {
                var fileName = Path.GetFileName(file.FileName);
                var path = Path.Combine(Server.MapPath(@"Path"), fileName);
                file.SaveAs(path);

                var command = new command()
                {
                    Model = model
                };
                commandDispatcher.Dispatch(command);
            }            
        } 
```

但是文件永远不会被添加，它总是空的

# jquery - 将 jquery 1.4 更新到 1.8.2 后，jquery carousel 出现错误

> ID：12745543
> 
> 赞同：0
> 
> 时间：2012-10-05T11:41:58.197
> 
> 标签：jquery, slider, carousel

我在更新 jquery 之前完美地使用了我的滑块，但是在将它更新到 1.4 到 1.8.2 之后它开始出现错误。第一张和第二张照片还可以，但在那之后图像开始向左滑动更多，并在右侧留下一个空间，每次变化都会增加，然后什么都没有了。所有图像的大小与第一个相同（960x450）。

如果可以，我可以修复它如何或应该使用新的吗？

这是html：

```
<div id="slider" class="box">
                        <div id="slider-holder">
                            <ul>
                                <li><a href="#"><img class ="slider" src="css/images/slide1.jpg" alt="" /></a></li>
                                <li><a href="#"><img class ="slider" src="css/images/slide2.jpg" alt="" /></a></li>
                                <li><a href="#"><img class ="slider" src="css/images/slide3.jpg" alt="" /></a></li>
                                <li><a href="#"><img class ="slider" src="css/images/slide4.jpg" alt="" /></a></li>
                            </ul>
                        </div>
                        <div id="slider-nav">
                                <a href="#" class="active">1</a>
                                <a href="#">2</a>
                                <a href="#">3</a>
                                <a href="#">4</a>
                        </div>
        </div> 
```

这是 jquery，但它是压缩的：

```
eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('(9($){$.1v.C=9(o){z 4.1b(9(){3p r(4,o)})};8 q={Z:F,25:1,21:1,u:7,1c:3,15:7,1K:\'2X\',2c:\'2Q\',1q:0,B:7,1j:7,1G:7,2F:7,2B:7,2z:7,2x:7,2v:7,2s:7,2p:7,1S:\'<P></P>\',1Q:\'<P></P>\',2m:\'2l\',2k:\'2l\',1O:7,1L:7};$.C=9(e,o){4.5=$.16({},q,o||{});4.Q=F;4.D=7;4.H=7;4.t=7;4.U=7;4.R=7;4.N=!4.5.Z?\'1H\':\'26\';4.E=!4.5.Z?\'24\':\'23\';8 a=\'\',1e=e.K.1e(\' \');1r(8 i=0;i<1e.I;i++){6(1e[i].2y(\'C-2w\')!=-1){$(e).1E(1e[i]);8 a=1e[i];1p}}6(e.2t==\'3o\'||e.2t==\'3n\'){4.t=$(e);4.D=4.t.19();6(4.D.1o(\'C-H\')){6(!4.D.19().1o(\'C-D\'))4.D=4.D.B(\'<P></P>\');4.D=4.D.19()}10 6(!4.D.1o(\'C-D\'))4.D=4.t.B(\'<P></P>\').19()}10{4.D=$(e);4.t=$(e).3h(\'>2o,>2n,P>2o,P>2n\')}6(a!=\'\'&&4.D.19()[0].K.2y(\'C-2w\')==-1)4.D.B(\'<P 3g=" \'+a+\'"></P>\');4.H=4.t.19();6(!4.H.I||!4.H.1o(\'C-H\'))4.H=4.t.B(\'<P></P>\').19();4.R=$(\'.C-11\',4.D);6(4.R.u()==0&&4.5.1Q!=7)4.R=4.H.1z(4.5.1Q).11();4.R.V(4.K(\'C-11\'));4.U=$(\'.C-17\',4.D);6(4.U.u()==0&&4.5.1S!=7)4.U=4.H.1z(4.5.1S).11();4.U.V(4.K(\'C-17\'));4.H.V(4.K(\'C-H\'));4.t.V(4.K(\'C-t\'));4.D.V(4.K(\'C-D\'));8 b=4.5.15!=7?1k.1P(4.1m()/4.5.15):7;8 c=4.t.32(\'1F\');8 d=4;6(c.u()>0){8 f=0,i=4.5.21;c.1b(9(){d.1I(4,i++);f+=d.S(4,b)});4.t.y(4.N,f+\'T\');6(!o||o.u===J)4.5.u=c.u()}4.D.y(\'1y\',\'1A\');4.U.y(\'1y\',\'1A\');4.R.y(\'1y\',\'1A\');4.2G=9(){d.17()};4.2b=9(){d.11()};4.1U=9(){d.2q()};6(4.5.1j!=7)4.5.1j(4,\'2a\');6($.2A.28){4.1f(F,F);$(27).1u(\'2I\',9(){d.1t()})}10 4.1t()};8 r=$.C;r.1v=r.2H={C:\'0.2.3\'};r.1v.16=r.16=$.16;r.1v.16({1t:9(){4.A=7;4.G=7;4.X=7;4.13=7;4.14=F;4.1d=7;4.O=7;4.W=F;6(4.Q)z;4.t.y(4.E,4.1s(4.5.21)+\'T\');8 p=4.1s(4.5.25);4.X=4.13=7;4.1i(p,F);$(27).22(\'2E\',4.1U).1u(\'2E\',4.1U)},2D:9(){4.t.2C();4.t.y(4.E,\'3u\');4.t.y(4.N,\'3t\');6(4.5.1j!=7)4.5.1j(4,\'2D\');4.1t()},2q:9(){6(4.O!=7&&4.W)4.t.y(4.E,r.M(4.t.y(4.E))+4.O);4.O=7;4.W=F;6(4.5.1G!=7)4.5.1G(4);6(4.5.15!=7){8 a=4;8 b=1k.1P(4.1m()/4.5.15),N=0,E=0;$(\'1F\',4.t).1b(9(i){N+=a.S(4,b);6(i+1<a.A)E=N});4.t.y(4.N,N+\'T\');4.t.y(4.E,-E+\'T\')}4.1c(4.A,F)},3s:9(){4.Q=1h;4.1f()},3r:9(){4.Q=F;4.1f()},u:9(s){6(s!=J){4.5.u=s;6(!4.Q)4.1f()}z 4.5.u},3q:9(i,a){6(a==J||!a)a=i;6(4.5.u!==7&&a>4.5.u)a=4.5.u;1r(8 j=i;j<=a;j++){8 e=4.L(j);6(!e.I||e.1o(\'C-1a-1D\'))z F}z 1h},L:9(i){z $(\'.C-1a-\'+i,4.t)},2u:9(i,s){8 e=4.L(i),20=0,2u=0;6(e.I==0){8 c,e=4.1B(i),j=r.M(i);1n(c=4.L(--j)){6(j<=0||c.I){j<=0?4.t.2r(e):c.1X(e);1p}}}10 20=4.S(e);e.1E(4.K(\'C-1a-1D\'));1R s==\'3l\'?e.3k(s):e.2C().3j(s);8 a=4.5.15!=7?1k.1P(4.1m()/4.5.15):7;8 b=4.S(e,a)-20;6(i>0&&i<4.A)4.t.y(4.E,r.M(4.t.y(4.E))-b+\'T\');4.t.y(4.N,r.M(4.t.y(4.N))+b+\'T\');z e},1V:9(i){8 e=4.L(i);6(!e.I||(i>=4.A&&i<=4.G))z;8 d=4.S(e);6(i<4.A)4.t.y(4.E,r.M(4.t.y(4.E))+d+\'T\');e.1V();4.t.y(4.N,r.M(4.t.y(4.N))-d+\'T\')},17:9(){4.1C();6(4.O!=7&&!4.W)4.1T(F);10 4.1c(((4.5.B==\'1Z\'||4.5.B==\'G\')&&4.5.u!=7&&4.G==4.5.u)?1:4.A+4.5.1c)},11:9(){4.1C();6(4.O!=7&&4.W)4.1T(1h);10 4.1c(((4.5.B==\'1Z\'||4.5.B==\'A\')&&4.5.u!=7&&4.A==1)?4.5.u:4.A-4.5.1c)},1T:9(b){6(4.Q||4.14||!4.O)z;8 a=r.M(4.t.y(4.E));!b?a-=4.O:a+=4.O;4.W=!b;4.X=4.A;4.13=4.G;4.1i(a)},1c:9(i,a){6(4.Q||4.14)z;4.1i(4.1s(i),a)},1s:9(i){6(4.Q||4.14)z;6(4.5.B!=\'18\')i=i<1?1:(4.5.u&&i>4.5.u?4.5.u:i);8 a=4.A>i;8 b=r.M(4.t.y(4.E));8 f=4.5.B!=\'18\'&&4.A<=1?1:4.A;8 c=a?4.L(f):4.L(4.G);8 j=a?f:f-1;8 e=7,l=0,p=F,d=0;1n(a?--j>=i:++j<i){e=4.L(j);p=!e.I;6(e.I==0){e=4.1B(j).V(4.K(\'C-1a-1D\'));c[a?\'1z\':\'1X\'](e)}c=e;d=4.S(e);6(p)l+=d;6(4.A!=7&&(4.5.B==\'18\'||(j>=1&&(4.5.u==7||j<=4.5.u))))b=a?b+d:b-d}8 g=4.1m();8 h=[];8 k=0,j=i,v=0;8 c=4.L(i-1);1n(++k){e=4.L(j);p=!e.I;6(e.I==0){e=4.1B(j).V(4.K(\'C-1a-1D\'));c.I==0?4.t.2r(e):c[a?\'1z\':\'1X\'](e)}c=e;8 d=4.S(e);6(d==0){3f(\'3e: 3d 1H/26 3c 1r 3b. 3a 39 38 37 36 35\. 34...\');z 0}6(4.5.B!=\'18\'&&4.5.u!==7&&j>4.5.u)h.33(e);10 6(p)l+=d;v+=d;6(v>=g)1p;j++}1r(8 x=0;x<h.I;x++)h[x].1V();6(l>0){4.t.y(4.N,4.S(4.t)+l+\'T\');6(a){b-=l;4.t.y(4.E,r.M(4.t.y(4.E))-l+\'T\')}}8 n=i+k-1;6(4.5.B!=\'18\'&&4.5.u&&n>4.5.u)n=4.5.u;6(j>n){k=0,j=n,v=0;1n(++k){8 e=4.L(j--);6(!e.I)1p;v+=4.S(e);6(v>=g)1p}}8 o=n-k+1;6(4.5.B!=\'18\'&&o<1)o=1;6(4.W&&a){b+=4.O;4.W=F}4.O=7;6(4.5.B!=\'18\'&&n==4.5.u&&(n-k+1)>=1){8 m=r.Y(4.L(n),!4.5.Z?\'1l\':\'1N\');6((v-m)>g)4.O=v-g-m}1n(i-->o)b+=4.S(4.L(i));4.X=4.A;4.13=4.G;4.A=o;4.G=n;z b},1i:9(p,a){6(4.Q||4.14)z;4.14=1h;8 b=4;8 c=9(){b.14=F;6(p==0)b.t.y(b.E,0);6(b.5.B==\'1Z\'||b.5.B==\'G\'||b.5.u==7||b.G<b.5.u)b.2j();b.1f();b.1M(\'2i\')};4.1M(\'31\');6(!4.5.1K||a==F){4.t.y(4.E,p+\'T\');c()}10{8 o=!4.5.Z?{\'24\':p}:{\'23\':p};4.t.1i(o,4.5.1K,4.5.2c,c)}},2j:9(s){6(s!=J)4.5.1q=s;6(4.5.1q==0)z 4.1C();6(4.1d!=7)z;8 a=4;4.1d=30(9(){a.17()},4.5.1q*2Z)},1C:9(){6(4.1d==7)z;2Y(4.1d);4.1d=7},1f:9(n,p){6(n==J||n==7){8 n=!4.Q&&4.5.u!==0&&((4.5.B&&4.5.B!=\'A\')||4.5.u==7||4.G<4.5.u);6(!4.Q&&(!4.5.B||4.5.B==\'A\')&&4.5.u!=7&&4.G>=4.5.u)n=4.O!=7&&!4.W}6(p==J||p==7){8 p=!4.Q&&4.5.u!==0&&((4.5.B&&4.5.B!=\'G\')||4.A>1);6(!4.Q&&(!4.5.B||4.5.B==\'G\')&&4.5.u!=7&&4.A==1)p=4.O!=7&&4.W}8 a=4;4.U[n?\'1u\':\'22\'](4.5.2m,4.2G)[n?\'1E\':\'V\'](4.K(\'C-17-1w\')).1J(\'1w\',n?F:1h);4.R[p?\'1u\':\'22\'](4.5.2k,4.2b)[p?\'1E\':\'V\'](4.K(\'C-11-1w\')).1J(\'1w\',p?F:1h);6(4.U.I>0&&(4.U[0].1g==J||4.U[0].1g!=n)&&4.5.1O!=7){4.U.1b(9(){a.5.1O(a,4,n)});4.U[0].1g=n}6(4.R.I>0&&(4.R[0].1g==J||4.R[0].1g!=p)&&4.5.1L!=7){4.R.1b(9(){a.5.1L(a,4,p)});4.R[0].1g=p}},1M:9(a){8 b=4.X==7?\'2a\':(4.X<4.A?\'17\':\'11\');4.12(\'2F\',a,b);6(4.X!==4.A){4.12(\'2B\',a,b,4.A);4.12(\'2z\',a,b,4.X)}6(4.13!==4.G){4.12(\'2x\',a,b,4.G);4.12(\'2v\',a,b,4.13)}4.12(\'2s\',a,b,4.A,4.G,4.X,4.13);4.12(\'2p\',a,b,4.X,4.13,4.A,4.G)},12:9(a,b,c,d,e,f,g){6(4.5[a]==J||(1R 4.5[a]!=\'2h\'&&b!=\'2i\'))z;8 h=1R 4.5[a]==\'2h\'?4.5[a][b]:4.5[a];6(!$.2W(h))z;8 j=4;6(d===J)h(j,c,b);10 6(e===J)4.L(d).1b(9(){h(j,4,d,c,b)});10{1r(8 i=d;i<=e;i++)6(i!==7&&!(i>=f&&i<=g))4.L(i).1b(9(){h(j,4,i,c,b)})}},1B:9(i){z 4.1I(\'<1F></1F>\',i)},1I:9(e,i){8 a=$(e).V(4.K(\'C-1a\')).V(4.K(\'C-1a-\'+i));a.1J(\'2V\',i);z a},K:9(c){z c+\' \'+c+(!4.5.Z?\'-2U\':\'-Z\')},S:9(e,d){8 a=e.2g!=J?e[0]:e;8 b=!4.5.Z?a.1x+r.Y(a,\'2f\')+r.Y(a,\'1l\'):a.2e+r.Y(a,\'2d\')+r.Y(a,\'1N\');6(d==J||b==d)z b;8 w=!4.5.Z?d-r.Y(a,\'2f\')-r.Y(a,\'1l\'):d-r.Y(a,\'2d\')-r.Y(a,\'1N\');$(a).y(4.N,w+\'T\');z 4.S(a)},1m:9(){z!4.5.Z?4.H[0].1x-r.M(4.H.y(\'2T\'))-r.M(4.H.y(\'2S\')):4.H[0].2e-r.M(4.H.y(\'2R\'))-r.M(4.H.y(\'3i\'))},2P:9(i,s){6(s==J)s=4.5.u;z 1k.2O((((i-1)/s)-1k.2N((i-1)/s))*s)+1}});r.16({3m:9(d){z $.16(q,d||{})},Y:9(e,p){6(!e)z 0;8 a=e.2g!=J?e[0]:e;6(p==\'1l\'&&$.2A.28){8 b={\'1y\':\'1A\',\'2M\':\'2L\',\'1H\':\'1q\'},1Y,1W;$.29(a,b,9(){1Y=a.1x});b[\'1l\']=0;$.29(a,b,9(){1W=a.1x});z 1W-1Y}z r.M($.y(a,p))},M:9(v){v=2K(v);z 2J(v)?0:v}})})(3v);',62,218,'||||this|options|if|null|var|function||||||||||||||||||||list|size||||css|return|first|wrap|jcarousel|container|lt|false|last|clip|length|undefined|className|get|intval|wh|tail|div|locked|buttonPrev|dimension|px|buttonNext|addClass|inTail|prevFirst|margin|vertical|else|prev|callback|prevLast|animating|visible|extend|next|circular|parent|item|each|scroll|timer|split|buttons|jcarouselstate|true|animate|initCallback|Math|marginRight|clipping|while|hasClass|break|auto|for|pos|setup|bind|fn|disabled|offsetWidth|display|before|block|create|stopAuto|placeholder|removeClass|li|reloadCallback|width|format|attr|animation|buttonPrevCallback|notify|marginBottom|buttonNextCallback|ceil|buttonPrevHTML|typeof|buttonNextHTML|scrollTail|funcResize|remove|oWidth2|after|oWidth|both|old|offset|unbind|top|left|start|height|window|safari|swap|init|funcPrev|easing|marginTop|offsetHeight|marginLeft|jquery|object|onAfterAnimation|startAuto|buttonPrevEvent|click|buttonNextEvent|ol|ul|itemVisibleOutCallback|reload|prepend|itemVisibleInCallback|nodeName|add|itemLastOutCallback|skin|itemLastInCallback|indexOf|itemFirstOutCallback|browser|itemFirstInCallback|empty|reset|resize|itemLoadCallback|funcNext|prototype|load|isNaN|parseInt|none|float|floor|round|index|swing|borderTopWidth|borderRightWidth|borderLeftWidth|horizontal|jcarouselindex|isFunction|normal|clearTimeout|1000|setTimeout|onBeforeAnimation|children|push|Aborting|loop|infinite|an|cause|will|This|items|set|No|jCarousel|alert|class|find|borderBottomWidth|append|html|string|defaults|OL|UL|new|has|unlock|lock|10px|0px|jQuery'.split('|'),0,{})) 
```

CSS：

```
 #slider { height:252px; position:relative; overflow:hidden; }
#slider-holder { width:720px; height:252px; position:relative; overflow:hidden; }
#slider-holder .jcarousel-clip{ width:720px; height:252px; position:relative; overflow:hidden; }
#slider-holder ul{ width:720px; height:252px; position:relative; overflow:hidden; list-style-type: none;}
#slider-holder ul li{ width:720px; height:252px; position:relative; overflow:hidden; float:left; }

#slider-nav { position:absolute; top:231px; left:644px; z-index:2;}
#slider-nav a{ font-size:0; line-height:0; text-indent: -4000px; width:10px; height:10px; border:solid 1px #8b0000; background:#8b0000; float:left; margin-right:5px; }
#slider-nav a:hover,
#slider-nav a.active { background:#fff;} 
```

# facebook - 如何检测我的 Facebook 访问令牌是否无效？

> ID：12745546
> 
> 赞同：1
> 
> 时间：2012-10-05T11:42:04.323
> 
> 标签：facebook, facebook-access-token

我知道使用交换令牌方法处理无效的访问令牌。但我的问题是如何将其检测为无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:50:32.507

您可以使用 Graph API [https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN检查](https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:44:31.197

您还可以使用[调试器工具](https://developers.facebook.com/tools/debug)

# android - 像这样使用 AsyncTask 可以吗：

> ID：12745550
> 
> 赞同：0
> 
> 时间：2012-10-05T11:42:37.733
> 
> 标签：android, android-asynctask

正如我所说，这是 AsyncTask 的正确使用吗？

我的意思是，不使用任何参数，在 上传递活动上下文`onPreExecute()`，并且没有得到`doInBackground()`返回值的结果，而是一旦`onPostExecute()`调用了管理器本身。

还有一件事，Asynctask API Reference，它说`onPostExecute()`：“如果任务被取消，这个方法将不会被调用。” ，那么如果在执行`doInBackground()`方法时发生 SomeException ， ¿ 被`onPostExecuted()`调用怎么办？

```
public class MainClass {
    ...
    //Somewhere in the class, the task is called:
    new MyAsyncTask.execute();
    ...

    private class MyAsyncTask extends AsyncTask <Void,Void,Void> {

        private MyManager manager;

        protected void onPreExecute(){
            super.onPreExecute();
            //We initialice the members here, passing the context like this:
            manager = new Manager(MainClass.this);
            manager.initializeMembers();
        }

        protected void doInBackgroud(Void ...params){
            try{
                //here we use the long operation task that is inside the manager:
                manager.startLongTask();                
            } catch (SomeException e){
                doWhatEverItIsWith(e);
            }
            return null;
        }

        protected void onPostExecute (Void result){
            super.onPostExecute(result);
            //Here we get the result from the manager
            handleTheResultFromHere(manager.getResult());
        }
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:46:49.473

像这样使用 AsyncTask 没有问题。您不必使用`doInBackground`返回值。关于第二个问题，`onPostExecute`即使出现异常也会调用 yes 。如果您不想调用它，则必须使用`MyAsyncTask.cancel(true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:48:23.887

> 正如我所说，这是 AsyncTask 的正确使用吗？

是的，可以将 Activity 上下文传递进去`onPreExecute()`，然后将数据加载`doInBackgroud()`到`onPostExecute()`.

> 那么如果 SomeException 在执行 doInBackground() 方法时发生，¿是否调用了 onPostExecuted()？

是的，`onPreExecute()`如果您在`doInBackgroud()`. 您必须检查要加载的数据，以`onPreExecute()`检查数据是否不为空并更新 UI。

```
NOTE: 
```

永远不要尝试从中更新 UI，`doInBackgroud()`因为您无法从非 UI 线程更新 UI。替代方法是使用`Handler`或`runOnUIThread()`用于从非 UI 线程更新 UI。

# java - Intellij 甚至需要 jRebel 吗？

> ID：12745554
> 
> 赞同：0
> 
> 时间：2012-10-05T11:42:47.460
> 
> 标签：java, jakarta-ee, intellij-idea, jrebel

我现在能够在保存时自动增量编译在 Websphere 服务器上运行的 Java EE 项目。

我取消了**jRebel**，因为我突然启动服务器时遇到问题，并注意到现在 Intellij 正在自动编译，我**也能够**“几乎”有效地看到更改（**比**Eclipse 慢）

那么，Intellij 甚至需要 jRebel 吗？我对 Websphere的**设置****如下图所示**。请注意，我只添加了**一个 Ear 文件**，它不是分解版本，仍然可以使用。jrebel 是否还在这里发挥作用？jrebel.xml 仍然存在。

![在此处输入图像描述](../Images/ff526ed2834ce385cb1ccac26d4a07c9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:03:36.817

尽管插件已卸载，但似乎 jRebel 仍在运行。我可以在日志中看到 jRebel 输出。不知道为什么真的，但这一定是事情运行如此顺利的原因。

所以现在的答案是否定的。

# android - 调用 Web 服务或任何网络调用时应用程序挂起

> ID：12745556
> 
> 赞同：1
> 
> 时间：2012-10-05T11:42:51.257
> 
> 标签：android, android-intent

在 android 应用程序中，当我启动活动时，它显示黑屏或应用程序会挂起几秒钟。我想直到黑屏我想显示进度条。我尝试了很多次，但无法做到这一点。

```
String xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>" 
                + "<category><Id>" + catId + "</Id></category>";
StringBuilder resXML = new Connection().getResponseString("http://192.168.1.14/virtualMirror/productlisting.php", xml); // TODO URL change
if(!resXML.equals("")) {
    XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(resXML.toString()); // getting DOM element
    NodeList nodeList = doc.getElementsByTagName("Product");

    Intent intent = new Intent(this, ProductListing.class);
    Bundle bundle = new Bundle();
    bundle.putLong("CategoryId", catId);
    bundle.putString("CategoryName", catName);
    intent.putExtras(bundle);
    startActivity(intent);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:49:14.587

使用**异步任务。**

AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

AsyncTask 在`doInBackground()`另一个线程内执行所有内容，该线程无权访问您的视图所在的 GUI。

`preExecute()`并`postExecute()`在此新线程中发生繁重工作之前和之后为您提供对 GUI 的访问，您甚至可以将长操作的结果传递给 postExecute() 以显示任何处理结果。

```
class LoadCategory extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Pd = new ProgressDialog(getApplicationContext());
        Pd.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        String xml = "<?xml version=\"1.0\" encoding=\"utf-8\" ?>"
                + "<category><Id>" + catId + "</Id></category>";

        StringBuilder resXML = new Connection().getResponseString("http://192.168.1.14/virtualMirror/productlisting.php",xml); // TODO URL change
        if (!resXML.equals("")) {
            XMLParser parser = new XMLParser();
            Document doc = parser.getDomElement(resXML.toString());
            NodeList nodeList = doc.getElementsByTagName("Product");
            return null;
        }
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        Pd.dismiss();
        Intent intent = new Intent(this, ProductListing.class);
        Bundle bundle = new Bundle();
        bundle.putLong("CategoryId", catId);
        bundle.putString("CategoryName", catName);
        intent.putExtras(bundle);
        startActivity(intent);
    }
} 
```

`onCreate()`并在您的方法中使用此类。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new LoadCategory().execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:48:27.613

您应该首先使用进度条加载屏幕并使用新线程调用此代码。为此，您可以创建一个扩展线程类的新类并覆盖 run 方法。您将不得不使用消息来获取已加载值的通知。

这是一个快速而肮脏的示例，但希望足以让您了解整个流程。

```
private final Handler handler = new Handler(){
        public void handleMessage(Message msg)
        {
            int total = msg.getData().getInt("total");
            if (total <= 0)
            {
            //Handle the response here
            } 
        }
    };

    private class yourclassname extends Thread{
        Handler mHandler;
        String _serviceUrl;
        CarpoolCancellationLoader(Handler h,String serviceUrl)
        {
            mHandler = h;
            _serviceUrl = serviceUrl;

        }

        private class SerializableClassName 
        {
        ..Put your serializable data here
        }

        @Override
        public void run()
        {
            cancelResponse = runJSONParser();
            //Send the thread activity done message to the handler
            Message msg = mHandler.obtainMessage();
            Bundle b = new Bundle();
            b.putInt("total", -1);
            msg.setData(b);
            mHandler.sendMessage(msg);

        }

          public YourResponseType runJSONParser()
          {
              try
              {
                //Perform your loading operation here
              }
              catch(Exception ex)
            {
                throw ex;
            }
          }

          public String convertStreamToString(InputStream is)
          {
              BufferedReader reader = new BufferedReader(new InputStreamReader(is));
              StringBuilder sb = new StringBuilder();

              String line = null;

              try
              {
                  while ((line = reader.readLine()) != null)
                  {
                      sb.append(line + "\n");
                  }
              }
              catch (IOException e)
              {
                  e.printStackTrace();
              }
              finally
              {
                  try
                  {
                      is.close();
                  }
                  catch (IOException e)
                  {
                      e.printStackTrace();
                  }
              }

              return sb.toString();
          }
    } 
```

虽然这不是很干净的代码，但足以让您全面了解创建新线程并通过异步运行它获得结果的代码结构。

# mysql - Joomla 向 SQL 表添加两条相同的记录

> ID：12745561
> 
> 赞同：0
> 
> 时间：2012-10-05T11:43:16.500
> 
> 标签：mysql, joomla2.5

在 Joomla 环境中使用这个 php 脚本，我总是得到两个完全相同的记录附加到 sql 表中。我检查了查询字符串，看起来没问题 - 所以我很茫然！

```
$writetwo = "INSERT INTO #__art_visits VALUES('','$ua','$prod','$man','$dev','$os',NOW())";
$db->setQuery($writetwo);
$db->query(); 
```

在脚本的前面有对表的查询，但我不确定这与问题有什么关系。

# python - python中plot3d的使用

> ID：12745563
> 
> 赞同：0
> 
> 时间：2012-10-05T11:43:36.330
> 
> 标签：python, mplot3d

我目前正在解决一个优化问题，我想用 plot3d 工具包绘制我找到的解决方案。假设我试图找到函数的最小值`F`。让 x 的值最小化`F x*`。我想将生成的曲面绘制`F`为网格，并在同一个图上打印`F : F(x*)`.

我为此目的使用此代码：

```
x = [a / 10 - 5 for a in range(100)]
y = [a / 10 - 5 for a in range(100)]

Z = [] 
for i in range(len(x)):
    Z.append([0] * len(x)) 
Z = array(Z)    
for i in range(len(x)):
    for j in range(len(x)):
        Z[i, j] = F([x[i], y[j]])
X = identity(len(x))
for i in range(len(x)):
     X[:, i] = x
Y = X.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot_wireframe(X, Y, Z, rstride=2, cstride=2, color='blue')
ax = fig.gca(projection = '3d')
ax.plot(sol.x[0], sol.x[1], [F(sol.x)], color='green')

plt.show() 
```

`sol.x`最小化的值在哪里`F`（为了简单起见`sol.x=x*`）。此代码返回以下错误：

```
Traceback (most recent call last):
File "projet2.py", line 103, in <module>
ax.plot(sol.x[0],sol.x[1],[f1(sol.x)],color='green')
File "/usr/lib/pymodules/python2.7/mpl_toolkits/mplot3d/axes3d.py", line 1296, in plot
len(xs) == len(args[0]) :
TypeError: object of type 'numpy.float64' has no len() 
```

有没有人知道如何解决这个问题？

谢谢

昆汀

# javascript - 在 Twitter Bootstrap 主题之间切换？

> ID：12745565
> 
> 赞同：2
> 
> 时间：2012-10-05T11:43:47.943
> 
> 标签：javascript, jquery, css, twitter-bootstrap, bootswatch

我正在为基于 Twitter Bootstrap 构建的客户端开发一个项目。他希望有不同的配色方案供用户选择。例如，有一个红色配色方案和一个蓝色配色方案，用户可以通过顶部的菜单进行更改。

是否有任何 jQuery 插件（或其他任何东西）可以做到这一点？它真正需要做的就是加载一个不同的 CSS 文件，我想，你会怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:32:15.537

使用[Kickstrap](http://getkickstrap.com)。您可以从基本上任何地方安装主题，制作您自己的主题，包括来自 Bootswatch 的主题，并且它使用 Less.js 客户端每次轻松地重新编译您的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T14:11:05.807

好吧，既然你想加载不同的主题......

您可以使用 jQuery 加载不同的样式表

```
<html>
    <head>
        <link rel="stylesheet" href="stylesheet.css" type="text/css" />
    </head>
    <body>
    ...
</html> 
```

这可能是按钮单击或触发的另一个事件。因此，您要做的只是将一个新元素插入到页面 DOM 的 head 部分。这可以在几行 jQuery 中完成：

```
$(document).ready(function () {
    $("a").click(function () {
        $('head').append('<link rel="stylesheet" href="style2.css" type="text/css" />');
    });
}); 
```

我希望这能解决它...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-28T14:07:55.093

我在 IE11、Chrome、Firefox 上对此进行了测试，它可以工作：

1.

```
<link id="theBoostrapTheme" type = "text/css" rel = "stylesheet" href = "Content/bootstrap-theme.min.css"/> 
```

2.

```
<a role="menuitem" tabindex="-1" href="javaScript:void(0);" onclick="changeCurrentTheme('_Cerulean')">Cerulean</a> 
```

3.  代码：

    ```
    function changeCurrentTheme(theNewThemeName) {
      $("#theBoostrapTheme").attr("href", "Content/bootstrap-theme.min" + theNewThemeName + ".css");
      } 
    ```

在这种情况下，原始文件以外的主题文件命名如下：`bootstrap-theme.min_ …. .css`. 例如：`bootstrap-theme.min_Cerulean.css`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:58:50.243

更改样式的 href 本身不会做任何事情。浏览器已经加载了您的 CSS，更改 HREF 不会导致他再次读取新文件。

阅读[这个问题](https://stackoverflow.com/questions/2024486/is-there-an-easy-way-to-reload-css-without-reloading-the-page)的答案，它可能会对你有所帮助。

如果重新加载页面没问题，您可能应该在服务器上而不是通过 javascript 通过使用一些定义要使用的配色方案的会话值来执行此操作。

# c# - C# 在 Json 中搜索和修改

> ID：12745566
> 
> 赞同：0
> 
> 时间：2012-10-05T11:43:50.720
> 
> 标签：c#, json

我可以在没有序列化和反序列化的情况下搜索和修改 Json 字符串中的某些值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:49:41.750

它只是 C# 中的一个字符串，因此您可以执行替换或使用正则表达式之类的操作。
我不会推荐它。

# c++ - 为什么参数匹配适用于非模板版本，但不适用于模板版本？

> ID：12745569
> 
> 赞同：1
> 
> 时间：2012-10-05T11:44:03.770
> 
> 标签：c++, templates, operator-overloading

考虑这个非常简单的例子，我有模板包装类，其中定义了运算符：

```
template <class T>
struct W {
   W(const T&) {}
};
template <class T> 
T operator + (const W<T>& w1, const W<T>& w2) { return T(); } 
```

这令人惊讶地无法匹配包装类型，来自 gcc4.5.1 的简​​单错误无法找到`operator + (A,A)`：

```
struct A {};
int main() {
  A a1, a2;
  A a3 = a1 + a2;
} 
```

我试图通过测试非模板包装器来找到原因，但这个版本有效：

```
struct A {};
struct WA {
   WA(const A&) {}
}; 
A operator + (const WA& w1, const WA& w2) { return A(); }
int main() {
  A a1, a2;
  A a3 = a1 + a2;
} 
```

这种参数匹配差异的原因是什么，如何使模板版本有效？

**[更新]**

我考虑了您的答案，并且我将示例更改为稍微相反的方式，但结果仍然相同 - 模板版本抱怨缺少运算符 +，而非模板工作正常。现在我有明确的强制转换运算符到明确的包装类：

**模板版本**

```
template <class T>
struct W {
};
template <class T> 
T operator + (const W<T>& w1, const W<T>& w2) { return T(); }

struct A {
 operator W<A>() const { return W<A>(); }
}; 
```

**不是模板**

```
struct WA {
}; 
struct A {
 operator WA() const { return WA(); }
};

A operator + (const WA& w1, const WA& w2) { return A(); } 
```

我试图避免这种解决方案：

```
A a3 = W(a1) + W(a2); 
```

没有希望这行得通？

```
A a3 = a1 + a2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T11:58:20.210

模板参数推导出现*在*重载决议之前。但是模板参数推导不考虑隐式转换，因此您的模板化运算符甚至不会被考虑。

隐式转换仅在选择重载*后应用。*

不过，你可以说`A a3 = W(a1) + W(a2);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:05:18.410

您的第一个示例失败了，因为标准说它必须使用模板失败。与参数相关的名称查找存在潜在问题，而模板加剧了这些问题。解决此问题的一种方法是从此类查找中排除模板，除非您明确说明模板的使用。以下是 C++03 标准第 14.8.1 节第 6 段的相关文本：

> 对于简单的函数名称，即使函数名称在调用范围内不可见，也会应用与参数相关的查找 (3.4.2)。这是因为调用仍然具有函数调用 (3.4.1) 的语法形式。但是，当使用具有显式模板参数的函数模板时，调用不具有正确的语法形式，除非在调用点存在具有该名称的函数模板可见。如果没有这样的名称可见，则该调用在语法上不是格式正确的，并且不适用依赖于参数的查找。如果某些此类名称可见，则应用依赖于参数的查找，并且可以在其他名称空间中找到其他函数模板。

**更新：**
该问题已用附加信息进行了编辑。

> 我试图避免这种解决方案：
> `A a3 = W(a1) + W(a2);`

为什么，确切地说，你试图避免这种情况？你的这段代码违反了编程的两个关键规则。

1.  编写代码，就好像下一个维护您的代码的人是一个知道您住在哪里的杀人狂。
2.  最小惊奇原则。

即使您的非模板版本也违反了这些规则。您`a1+a2`通过（隐藏）转换为不相关的 class进行计算`W`，`operator+`其中返回 an`A`而不是 a `W`。这不是最不惊讶的原则。至少可以说，这令人惊讶。*您为什么不认为明确转换是一种更好的方法？*

依赖于参数的查找是一个非常强大的工具，但是有很多与此功能相关的问题。将 ADL 与自动类型转换结合起来，问题就会放大。将它与自动类型转换和模板结合起来，你就会一团糟。标准委员会决定足够了。除非您明确转换，否则您无法做您想做的事情。

# php - 我在 PHP 中编写了一个调用 show-form(); 的函数；如何在 jQuery 中调用它？

> ID：12745573
> 
> 赞同：0
> 
> 时间：2012-10-05T11:44:07.473
> 
> 标签：php, jquery, html, jquery-ui

这是在一个[HTML](http://en.wikipedia.org/wiki/HTML)文件中。在该`else`部分中，我想调用页面`show-form();`中的函数`example.php`。另外，完整的语法是`$.post();`什么？

```
<script type="text/javascript">
    function nis(id){
        $(id).show("slow").delay(4000).hide("slow");
    }

    $(function() {
        setAutoComplete("searchField", "results", "autocomplete.php?part=");

        $('form[name=frm]').submit(function(event) {
            if($("#searchField").val().length===0)
            {
                nis('.divmsg');
                return false;
            }
            else {
                $.post("example.php", function() {});
            }
        });
    });
</script> 
```

这是在`example.php`.. 中，用于为您在 searchField 中编写的任何单词提供声明。

```
<?php
    function show_form()
    {
        echo'<div  class="divmsg"> Wronge input :: </div>';
        echo'  <form name="frm" method="post" action="index.php?act=sm"> ';
        echo'<p class="textplz">Tybe a Definition you want ?!';
        echo'<p id="auto" >';
        echo'Word : <input id="searchField" type="text" name="searchField" />    <input  id="for-submitbutton" type="submit" name="sbm" value="Definition" /> ';
        echo' </p> </p>  </form>';
    }

    function submited()
    {
        require("dbconn.inc");
        $word=$_POST['searchField'];
        $sql="select * from definition where word like '".$word."'";

        $result=mysql_query($sql,$con);
        if(@mysql_num_rows($result)!=0)
        {
            while($rows=mysql_fetch_array($result))
            {
             $vie=$rows["declation"];
            }
            echo('
                <br />
                <br />
                <form name="frm" method="post" action="index.php?act=sm"> <p id="auto" >
                    Word : <input id="searchField" type="text" name="searchField" /> <input id="for-submitbutton" type="submit" name="sbm" value="Definition" />
                </p> </form> ');
            echo('<div class="answer">');
            print $word ;
            echo('<br><p id="dev">');
            print $vie;
            echo ("</h4><br></p></div>");
        }
    }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:58:29.383

首先，破折号在 PHP 标识符中是无效的。您的函数称为“show_form”，请在其余文本中引用它。

其次，PHP 脚本在服务器上运行，而 Javascript（和 jQuery）在客户端上运行。您的客户端只收到一个 HTML 文档，这意味着 PHP 代码已经被处理和执行。

因此，您不可能像调用 Javascript 函数一样从 jQuery 调用 PHP 代码。

你可以做什么：

*   使用 POST 或 GET 请求在服务器上调用 PHP 脚本。您可以在 jQuery 在线文档中找到这些参数列表
*   在您的 HTML 中发出 Javascript 代码，可能使用 PHP 代码生成，以便您稍后可以在客户端上调用它

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:58:59.250

我猜是这样的：

```
$.post("example.php", { "act": "form" } ); 
```

但你也应该在 PHP 脚本中使用 $_POST 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:59:55.647

1.  的完整语法`$.post()`是：

    ```
    $.post(url, data, callback, type); 
    ```

2.  在你的情况下：

    ```
    $.post("example.php", null,  function() {}); 
    ```

如果要发送一些参数，请使用`{param1: "123", param2: "123}`而不是`null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:00:06.537

在 AJAX 调用中，您需要像这样处理结果：

```
$.ajax({
url: 'example.php',
...
success: function(data){
// process data
  }
}) 
```

# emacs - 如何通过指定缓冲区中的 x,y 坐标获取文本位置？

> ID：12745580
> 
> 赞同：0
> 
> 时间：2012-10-05T11:44:30.167
> 
> 标签：emacs, elisp

我有缓冲区中某个点的坐标：x，y 相对于窗口的开头；如何通过这些相对坐标获得文本位置（缓冲区开头的偏移量）？

IE。：

--------------- 缓冲区的启动

```
sdfv efrv s 
```

==========================================<--窗口开始边框

```
s!df verg 34v dc
sd sdf 
```

==========================================<--窗口结束边框

如果该点在感叹号位置，则x = 1，y = 0，位置= 13。现在我知道（x，y）=（1,0），如何获得位置？

**编辑**（回应 Stefan）**：** 这个坐标来自事件，在 mause-1 下的整流罩。我从一个函数中获取它`tmm-menubar-mouse`。整个事件看起来像这样：

(mouse-1 (nil menu-bar (45 . 0) 15023 nil 2924 (45 . 0) nil (0 . 0) (1 . 0)))

问题是，由于[错误](https://stackoverflow.com/questions/12317844/disable-help-menu-on-mouse-button-at-a-right-side-with-x-coord-0x7f)，一些坐标计算错误，我重新计算了它们，但是我必须获得一个文本位置才能将新事件传输到`mouse-drag-region`. 我得到窗口`window-at`，并从它们重新计算绝对坐标到相对减去窗口左上角。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:07:31.763

我建议您尝试一下`posn-at-x-y`，尽管这些 X 和 Y 是像素位置，而您似乎说您有“字符单元”位置。如果这不起作用，请更好地解释您的 X 和 Y 来自哪里，因为这种“字符单元位置”有多种定义，具体取决于它们如何处理可变大小的字符，如制表符、比例字体、图像...... .

# android - 如何使用 AchartEngine 在折线图中的 x 轴上设置日期？

> ID：12745583
> 
> 赞同：3
> 
> 时间：2012-10-05T11:44:48.253
> 
> 标签：android, achartengine, linechart

我已经尝试过在 SO 上发布的各种链接，但没有得到可靠的答案。

这是我的代码：

```
 TimeSeries series = new TimeSeries("Burned Calories");

    for (int i = 0; i < x_axis.size(); i++) {

            String date = x_axis.get(i);

            int y = Integer.parseInt(y_axis.get(i));

            Date d;

            try {

                    d = df.parse(date);

                    series.add(d, y);

            } catch (ParseException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

      XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

      dataset.addSeries(series);

XYSeriesRenderer render = new XYSeriesRenderer();
    render.setColor(Color.GREEN);
render.setPointStyle(PointStyle.SQUARE);
render.setFillPoints(true);

      XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
  renderer.addSeriesRenderer(render);

        renderer.setChartTitle("Line Chart");
    renderer.setAxesColor(Color.BLUE);
    renderer.setGridColor(Color.WHITE);

    renderer.setShowGrid(true);
    renderer.setShowAxes(true);
    renderer.setShowGridX(true);
    renderer.setShowGridY(true);
    renderer.setShowLabels(true);
    renderer.setPanEnabled(true, true);
    renderer.setFitLegend(true);
    renderer.setXTitle("Date");
    renderer.setAxisTitleTextSize(15);
    renderer.setXLabelsAlign(Align.CENTER);
    renderer.setYTitle("Values");

    chart = ChartFactory.getLineChartView(this, dataset, renderer); 
```

我在 x 轴上得到奇怪的值。

任何帮助，将不胜感激。 ![在此处输入图像描述](../Images/b2fba5579e9063410a87be18e26d2c5b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T12:15:35.723

这些是我在代码中所做的基本更改，它对我有用..

```
TimeSeries series2 = new TimeSeries("Protein");

            for (int i = 0; i < x_axis.size(); i++) {

                int y = Integer.parseInt(y1_axis.get(i));

                // Adding y as protein value
                series2.add(i + 1, y);

            }

    for (int i = 0; i < x_axis.size(); i++) {
        renderer.addXTextLabel(i + 1, x_axis.get(i));
    }

    renderer.setXLabels(0); 
```

![在此处输入图像描述](../Images/de3624d73c6d71d200251a01c1d6e2cc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T05:33:20.133

XYMultipleSeriesRenderer 渲染器 = new XYMultipleSeriesRenderer();

之后添加以下代码...根据您的要求设置下图...

```
 String MainTitle = "Graph";
            String XTitle = "Date";
            String YTitle = "Values";
            float minValueX = 0.0f;
            float maxValueX = 30.00f;
            float minValueY = 0f;
            float maxValueY = 50f;

setChartSettings(renderer, MainTitle, XTitle, YTitle, minValueX,
                        maxValueX, minValueY, maxValueY, Color.BLACK, Color.BLACK);

protected void setChartSettings(XYMultipleSeriesRenderer renderer,
                String title, String xTitle, String yTitle, double xMin,
                double xMax, double yMin, double yMax, int axesColor,
                int labelsColor) {
            renderer.setChartTitle(title);
            renderer.setXTitle(xTitle);
            renderer.setYTitle(yTitle);
            renderer.setXAxisMin(xMin);
            renderer.setXAxisMax(xMax);
            renderer.setYAxisMin(yMin);
            renderer.setYAxisMax(yMax);
            renderer.setAxesColor(axesColor);
            renderer.setLabelsColor(labelsColor);
        } 
```

在 Chartengine 上仅显示日期或月份数字，因此您设置为数字并设置标签日期...在 x 轴上显示日期不确定，但我认为图表引擎不提供

# java - Android prepareaync() 超时

> ID：12745588
> 
> 赞同：2
> 
> 时间：2012-10-05T11:45:07.153
> 
> 标签：java, android, url, streaming, media-player

我有一个播放广播电台的媒体播放器。我的问题是，如果流因任何原因停止工作，媒体播放器仍然尝试使用 prepareaync 加载它，而我无法阻止它加载。
我尝试创建一个计时器来取消进度屏幕并调用`finish()`，但这仍然不会阻止prepareasync 加载。
我还尝试使用 geturlconnection 进行排序或 url 验证，但这似乎也不起作用。任何想法将不胜感激......

# axis - java.io.IOException: WSDL2Java 发射器超时（这通常意味着指定 URL 处的 WSDL 不可访问）！

> ID：12745591
> 
> 赞同：0
> 
> 时间：2012-10-05T11:45:28.490
> 
> 标签：axis, netsuite

当我在终端上“部署蚂蚁”时出现以下错误。我找到了一些答案，例如将“超时更改为-1”。但我仍然想知道在哪里更改时间。是 Axis 的 build.xml 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:38:16.880

我假设您使用的是 NetSuite Java 示例？在这种情况下，您需要在 bin 文件夹中查找名为 build.xml 的文件。这是蚂蚁构建脚本。在底部附近有一个名为axis-wsdl2java 的节点。添加如下属性： timeout="120000" <- 2 分钟。

# android - 在 SharedPrefer 中写入数据 - 应用程序停止响应

> ID：12745594
> 
> 赞同：0
> 
> 时间：2012-10-05T11:45:37.107
> 
> 标签：android, sharedpreferences

我正在使用以下代码将数据存储在共享首选项中。但是，每当调用此代码时，虚拟设备都会告诉我应用程序停止响应。有什么建议为什么会发生这种情况？

```
SharedPreferences spref =       this.getPreferences(Context.MODE_PRIVATE);
SharedPreferences.Editor editor = spref.edit();
editor.putString("td", "SharedPref"); //name-value pair
editor.commit(); 
```

编辑：现在我使用以下

SharedPreferences spref = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE); SharedPreferences.Editor 编辑器 = spref.edit(); editor.putString("td", "SharedPref"); editor.commit();

但我仍然收到“应用程序已意外停止..请重试”

看起来虚拟设备有问题。重新创建后，我的应用程序开始正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T11:51:47.863

试试这个

```
SharedPreferences spref = PreferenceManager.getDefaultSharedPreferences(Context); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:55:18.033

You are initializing the wrong initialization

```
final SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE); 
```

This will work.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:55:09.437

在我的应用程序中，我更喜欢使用自己的位置名称。宣布

```
public static final String PREFS_NAME = "MyPrefsFile"; 
```

然后在代码中

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);  //0 might be bad naming, can just use MODE_PRIVATE or something instead depending on what you need to do :)
SharedPreferences.Editor editor = settings.edit();
editor.putInt("key", "value");
editor.commit(); 
```

shouldn't be any problems with this if the info you're saving is correct

**EDIT**

you also need to update your manifest with the following:

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# type-conversion - 如何在 go 中使用带范围的自定义 int 类型？

> ID：12745600
> 
> 赞同：3
> 
> 时间：2012-10-05T11:45:55.973
> 
> 标签：type-conversion, go

我有

```
type DocId int

func foo(documents []String) {
    for i := range documents {
        id := DocId(i)
        ...
    }
} 
```

如何摆脱显式转换线？DocIds**旨在**成为索引单个文档的类型。

我想要的更像是：

```
func foo(documents []String) {
    for id := range documents {
        ... // id gets used as the DocId that it damn well *IS*
    }
} 
```

当我尝试将范围中的 id 用作 DocId 时，即使 DocId 是一个 int，这给了我“无效操作：...（不匹配的类型 int 和 DocId）”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:14:35.650

只有无类型的常量才能自动转换为正确的类型。

[您可以在此线程](http://www.digipedia.pl/usenet/thread/14347/16177/)中找到不需要强制转换的示例，用于无类型常量。从[规格](http://golang.org/ref/spec#Operators)：

> 如果一个操作数是无类型常量而另一个操作数不是，则将常量转换为另一个操作数的类型

但是在这里，`range`将迭代值显式分配给相应的迭代变量`(i int, T a[i])`，这使得`i`和`int`。（来自规范“ [For statement](http://golang.org/ref/spec#For_statements) ”）

对于所有其他情况，需要显式强制转换。
规范的“[转换](http://golang.org/ref/spec#Conversions)”部分没有提到“自动”类型转换（与自动*接口*转换相反，它一直在发生：）`interface{}`。

[该线程](http://osdir.com/ml/go-language-discuss/2012-07/msg00720.html)添加

```
type A int
type B int

...

var a A = 5
var b B = a    // Compiler ERROR!!!!!! 
```

> 本质上，由于（几乎）所有类型都是唯一的，因此即使是具有相同底层表示和原始操作的两种类型，如果没有强制转换也是无法分配的。[...]
> 这通过强制您明确告诉编译器何时希望进行转换来使语言类型安全。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T20:11:49.687

这是您可能喜欢也可能不喜欢的另一个想法 - 使用 a`map`因为地图可以具有与切片不同的自定义类型的键。

```
type DocId int

func foo(documents map[DocId]string) {
    for id := range documents {
        // do stuff with id and documents[id]
    }
} 
```

# c++ - 表达式必须是可修改的左值

> ID：12745601
> 
> 赞同：52
> 
> 时间：2012-10-05T11:45:57.947
> 
> 标签：c++, if-statement

我有以下代码：

```
int M = 3; 
int C = 5; 
int match = 3;
for ( int k =0; k < C; k ++ )
{
    match --; 
    if ( match == 0 && k = M )
    {
         std::cout << " equals" << std::endl;
    }
} 
```

但它给出了一个错误说：

> 错误：表达式必须是可修改的值

在那条“如果”线上。我不是想在这里修改“匹配”或“k”值，但为什么会出现这个错误？如果我只这样写：

```
if ( match == 0 ) 
```

没关系。有人可以向我解释吗？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-05T11:49:23.713

赋值运算符的优先级低于`&&`，因此您的条件相当于：

```
if ((match == 0 && k) = m) 
```

但是它的左边是一个右值，即从 subexpression 的评估得到的布尔值`match == 0 && k`，所以你不能分配给它。

相比之下，比较具有更高的优先级，因此`match == 0 && k == m`等价于：

```
if ((match == 0) && (k == m)) 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-04-17T14:20:57.733

在 C 中，如果您声明 a，您也会遇到相同的错误：

```
char array[size]; 
```

而不是尝试在不指定索引位置的情况下分配值：

```
array = '\0'; 
```

通过做：

```
array[index] = '0\'; 
```

您正在指定先前声明的可访问/可修改地址。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-05T11:48:23.260

你测试`k = M`而不是`k == M`.
也许这是你想做的，在这种情况下，写`if (match == 0 && (k = M))`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-05T11:48:06.193

请记住，单曲`=`始终是 C 或 C++ 中的赋值。

你的测试应该是`if ( match == 0 && k == M )`你在测试中犯了一个错字`k == M`。

如果您的意思是`k=M`（即测试中的副作用分配），您应该出于可读性原因编写代码`if (match == 0 && (k=m) != 0)`，但大多数编码规则建议不要编写该代码。

顺便说一句，您的错误建议询问所有警告（例如，`-Wall`选项`g++`），并升级到最近的编译器。下一个 GCC 4.8 将为您提供：

```
 % g++-trunk -Wall -c ederman.cc
 ederman.cc: In function ‘void foo()’:
 ederman.cc:9:30: error: lvalue required as left operand of assignment
          if ( match == 0 && k = M )
                               ^ 
```

而 Clang 3.1 也告诉你`ederman.cc:9:30: error: expression is not assignable`

因此，请使用最新版本的免费编译器，并在使用它们时启用所有警告。

# mysql - 如何存储数据 - 我应该直接复制它吗

> ID：12745603
> 
> 赞同：1
> 
> 时间：2012-10-05T11:46:05.023
> 
> 标签：mysql, database, database-design, storage

我想存储各种机构的数据。我想存储允许所述机构在其国家/地区内的位置的数据。

因此，我需要为每个机构存储城镇数据、县数据和国家数据。

我分别有一个城镇、县和国家数据库，它们都链接在一起，例如我可以搜索一个城镇，它的“county_id”列与县表中一个县的 ID 相匹配。

我想知道从实际建立表中引用这些数据的最佳方法。

目前，在此表中，我只有一个包含相应数据的城镇、县和国家列。

我的 URL 结构是 website.com/country/county/town/name，因此拥有这样的数据可以让我通过一个查询找到一个机构，而无需连接等。

只有一列具有城镇 ID，然后每次使用连接查询以查找县/国家/地区数据有什么好处？显然，一个好处是，如果任何数据发生更改，它本身会自动更新。另一个我想是它需要更少的数据库存储空间。

但另一方面，它需要更多的查询。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:57:38.310

好吧，您对这句话非常满意：反规范化通常有助于读取性能，但不利于写入性能，而规范化通常相反。

通常，您对特定数据的读取次数要多于写入次数。如果你是这种情况，那么我会保留数据（每个机构条目中都有重复的城镇、县等）。更新速度会更慢（更多代码、更多验证、更多时间发送和执行更新），但读取速度更快（更简单的查询代码、更少的数据库端执行查询等）。我最近参与了一个项目，其中数据每月更新一次，但每天读取（显示在 Web 应用程序中）多次，所以我们最终摆脱了标准化数据库和大量连接（伪或实际） ，复制到与您在此处所拥有的数据类似的数据，并且 Web 应用程序的读取性能和响应能力显着提高。

哦，就数据库空间（如磁盘上占用的物理空间）而言，虽然理论上正确化表会减少空间（有时会显着），但这不会真正显着影响读取和/或写入速度, 所以如果你只在追求性能时不考虑这个论点（并且不关心磁盘空间），你会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:55:25.423

在您的情况下，没有节省数据库空间，但您可以很容易地维护更改。购买，因为城镇不改变县或国家，你的数据库是安全的！

在这种情况下拆分它意味着存储和性能成本。如果不需要额外的数据，请不要拆分它！

# javascript - jQuery Waypoints 插件一个一个地淡入元素

> ID：12745607
> 
> 赞同：0
> 
> 时间：2012-10-05T11:46:32.043
> 
> 标签：javascript, jquery, jquery-plugins, jquery-waypoints

我正在使用 waypoints jQuery 插件，该插件在滚动淡入时表现完美。然而，我无法设法使块一个接一个地淡入（单独地）。这是我的 jQuery 代码：

```
$('.hblock').not("#welcome, #block2").fadeTo(0, 0);
$('.hblock').waypoint(function(event, direction) {
    if(direction == "down") {
        $(this).fadeTo(1500, 1);
        event.stopPropagation();
    }
}, {
    offset: function() {
        return $.waypoints('viewportHeight');
    }
}); 
```

我尝试在渐变之间设置延迟，但无济于事：

```
$(this).fadeTo(1500, 1).delay(1000); 
```

您可以在此处查看该插件及其当前的工作方式：http: [//targettedmedia.co.uk/targetedmedia/](http://targettedmedia.co.uk/targetedmedia/)

提前感谢您抽出宝贵时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:48:21.817

如果你想连续动画一组对象，而不是`$(this).fadeTo(1500, 1);`

尝试这个：

```
$('.hblock').each(function(i) {
    $(this).delay((i++) * 1500).fadeTo(1500, 1); 
 }) 
```

如果您希望它们在前一个完成之前开始，您可以尝试前 1500 个。这是一个示例（靠近底部）：

[http://demosthenes.info/blog/630/Fade-In-Elements-Sequentially-With-JQuery-amp-CSS3](http://demosthenes.info/blog/630/Fade-In-Elements-Sequentially-With-JQuery-amp-CSS3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T11:54:33.947

这样的事情怎么样

```
function _fadeout(elm){
    elm.fadeOut('slow', function(){
       _fadeout(elm.next());
    })
}

_fadeout($('.hblock').not("#welcome, #block2").first()); 
```

# c# - 如何从统一容器中按名称获取类型的所有实例？

> ID：12745609
> 
> 赞同：1
> 
> 时间：2012-10-05T11:46:41.857
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, unity-container

我有一个包含一些注册实例的容器，例如：

```
container.RegisterInstance(typeof(Interface1), "Mapping1", new Class1("1"))
         .RegisterInstance(typeof(Interface1), "Mapping1", new Class1("2"))
         .RegisterInstance(typeof(Interface1), "Mapping2", new Class1("3"))
         .RegisterInstance(typeof(Interface1), "Mapping2", new Class1("4")); 
```

那么如何获取所有类型的实例`Interface1`，例如“Mapping1”？调用代码将是这样的：

```
var instances = container.ResolveAll<Interface1>("Mapping1"); 
```

谢谢你的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:50:22.547

您不能有多个具有相同名称和类型组合的注册。每个新注册都会覆盖之前的注册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T13:12:14.437

我不确定注册这样的实例会产生你想要的结果。 *RegisterInstance*将对象注册为单例，因此根据定义，您不能拥有多个具有相同名称的单例。从上面提供的示例中，*container.ResolveAll()*将仅返回 2 个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:39:38.000

您可以创建一个扩展方法来处理这个问题。看看这个帖子。它帮助了我，我认为它回答了你的问题： [Unity - ResolveAll by name with condition](https://stackoverflow.com/questions/5926525/unity-resolveall-by-name-with-condition)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-25T07:31:43.543

我认为我在[这个统一容器维基页面](https://github.com/unitycontainer/unity/wiki/Difference-between-ResolveAll-and-Enumerable.)中找到了这个问题的新答案，其中，对于以下情况：

```
RegisterType(typeof(IService), typeof(Service));
RegisterType(typeof(IService), typeof(Service),  "Name-1");
RegisterType(typeof(IService), typeof(Service1), "Name-2");
RegisterType(typeof(IService), typeof(Service1), "Name-3");
RegisterType(typeof(IService), typeof(Service1), "Name-4"); 
```

> 从历史上看，当调用`ResolveAll<IService> (Resolve<IService[]>)`Unity 时只会返回 4 个项目，即带有“Name-x”的项目，但现在，已添加对 IEnumerable<> 的支持。与 ResolveAll 不同，解析 `Resolve<IEnumerable<SomeType>>()`将返回所有满足 IService 的注册。所以在上面的例子中，它将返回所有 5 个对象。

我知道这不是相同的代码，因为您正在注册实例而不是类型，但无论如何它可能会有所帮助，我还没有测试过。

# excel - VBA：UCase内置属性的使用

> ID：12745617
> 
> 赞同：1
> 
> 时间：2012-10-05T11:47:38.483
> 
> 标签：excel, vba

我在以下代码行中使用 UCase 被卡住了 -> //xmlTag1doc 有一个 xml

```
 Dim xmlTag1doc As IXMLDOMElement,Dim ParentDoc As MSXML2.DOMDocument
    set xmlTag1Doc = ParentDoc.DocumentElement.SelectSingleNode("//Root//XP")

   if(xmlTag1Doc .SelectNodes("//tag1[@ID = 1 and @Name='" & strname & "']").Length >0) 
```

在这里，我必须使用“UCase”来检查我的代码行中的 UCase(@Name) = UCase(strname)。是否可以？请提出一些答案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:33:30.460

使用以下

```
if(xmldoc.SelectNodes("//tag1[translate(@Name,'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ') = '" & strings.UCase(strname) & "']").Length >0) 
```

**编辑：**

在这种情况下维度`ParantXMLDoc as MSMXL2.DOMDocumentXX`。（其中***XX***是等于或高于 40 的任何版本）。由于 xmlDoc 是 ParantXMLDoc 中的一个节点，因此它将是与 ParentXMLDoc 相同类型的 DOM 版本。

**为什么选择 DOMDocument40 或 highet？** 因为 4.0 版是第一个完全支持 XPath 1.0 的 DOM 版本。在该版本之前，并非所有 Xpath 1.0 函数都受支持。例如翻译（）

**Translate( *String1* ,*findString*, *replaceString* )** 此函数搜索*String1*并将任何*findString*替换为*replaceString*。在 w3org 网站上，您可以获得更多信息。检查链接：[Xpath - w3Org](http://www.w3.org/TR/xpath/#function-translate)

* * *

小心点：

因为您`//`在此 Xpath中使用，所以`xmlDoc.SelectNodes("//tag1[@Name='" & strname & "']")`您正在查询`tag1`里面的所有元素`ParentXMLDoc`。不仅仅是在`xmlDoc`.

# php - Facebook 注册异步用户名验证

> ID：12745618
> 
> 赞同：0
> 
> 时间：2012-10-05T11:47:55.383
> 
> 标签：php, asp.net, facebook, validation, registration

首先，我到处寻找答案，但没有找到答案，如果我在某个地方遗漏了什么，请原谅我！

我正在尝试在提交 Facebook 注册表单之前检查用户名是否存在。即使验证尚未完成，注册似乎也可以继续！有没有办法在所有验证完成之前阻止表单提交？

很多答案链接到显然解决了这个问题的帖子，但实际上重要的部分缺失了。有这个答案的帖子是[Here](https://stackoverflow.com/questions/6293923/facebook-registration-plug-in-async-validation)。

“Test02.aspx”的内容丢失，这是我卡住的地方。

脸书部分：

```
<fb:registration 
    redirect-uri="read.php/tools/echo" 
    fields="[{'name':'name'},{'name':'email'},{'name':'username','description':'Username','type':'text'},{'name':'password'}]" 
    onvalidate="validate_async">
</fb:registration> 

<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script> 
function validate_async(form, cb) {
  $.getJSON('test02.aspx?username=' + form.username + '?callback=?', 
    function(response) {
      if (response.error) {
        // Username isn't taken, let the form submit
        cb();
      }
      cb({username: 'That username is taken'});
  });
}
</script> 
```

我不知道在 test02.aspx 中放什么。我更喜欢使用 php 来检查数据库，但我无法弄清楚！

任何帮助，将不胜感激！

先感谢您。
米什卡

**- 更新 -**

*客户端的一些变化：*

```
<script>
    function validate(form, cb) {
        $.getJSON('PHP/fb_check_user.php?username=' + form.username,
            function(data){
                $.each(data,function(name,error){
                    if (error === 'true')
                    {
                        cb({username: 'That username is taken'});
                    }
                    else
                    {
                        cb();
                    }
                });
            }
        );
    };
</script> 
```

为了让它工作，我不得不改变这一行：

```
$.getJSON('PHP/fb_check_user.php?username=' + form.username + '?callback=?', 
```

至：

```
$.getJSON('PHP/fb_check_user.php?username=' + form.username, 
```

*服务器端：*（fb_check_user.php）

```
<?php

//Connect to database

$user=$_GET['username'];

$query = mysql_query("SELECT usr FROM members WHERE usr = '$user'");

if (!mysql_num_rows($query))
{
    $result = array('error' => 'false');
}
else
{
    $result = array('error' => 'true');
}

echo json_encode($result);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:59:58.433

首先，请查看文档进行异步验证，[https://developers.facebook.com/docs/plugins/registration/advanced/#async](https://developers.facebook.com/docs/plugins/registration/advanced/#async)

基本上，您的客户端验证函数返回 null（或根本没有返回语句）——然后您在回调函数中评估服务器端脚本的响应。

你如何做到这一点，取决于你。

最好的方法是，如果您的服务器端脚本返回 JSON，并在出现问题时给出错误值。然后您在客户端回调函数中评估该 JSON 数据对象。

# windows - 批量合并 CSV 删除标题

> ID：12745623
> 
> 赞同：12
> 
> 时间：2012-10-05T11:48:09.610
> 
> 标签：windows, csv, batch-file, cmd

我有多个具有相同标题的 CSV 文件，我正在尝试将它们组合在一起批处理并只保留一个标题。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T17:43:18.103

您可以`MORE +1`用来输出除第一行以外的所有内容。

```
>new.csv (
   type file1.csv
   more +1 file2.csv
   more +1 file3.csv
   REM etc.
) 
```

显然，您可以根据需要调整每个文件中要跳过的行数。

合并当前文件夹中的所有 csv 文件： ***编辑：修改为不使用新创建的输出 csv 作为输入***

```
@echo off
setlocal
set first=1
>new.csv.tmp (
  for %%F in (*.csv) do (
    if defined first (
      type "%%F"
      set "first="
    ) else more +1 "%%F"
  )
)
ren new.csv.tmp new.csv 
```

显然，这仅在所有 csv 文件共享相同格式时才有效。

***编辑 2015-07-30：*** *有一些限制：*

*   制表符将转换为一串空格
*   每个 CSV 源文件的行数必须少于 64k

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-25T14:29:04.967

我在使用 dbenham 组合当前文件夹中所有 CSV 文件的方法时遇到问题。它偶尔会拾取生成的 CSV 并将其包含在集合中。我已经修改它以避免这个问题。

```
@echo off
setlocal
set first=1
set fileName="combinedFiles.csv"
>%fileName% (
  for %%F in (*.csv) do (
    if not "%%F"==%fileName% (
      if defined first (
        type "%%F"
        set "first="
      ) else more +1 "%%F"
    )
  )
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-23T04:08:34.103

1.) 将所有 CSV 文件复制到一个文件夹中。2.）在提示运行时：复制 *.csv combined.csv（为方便起见制作一个批处理文件以运行） 3.）从 Visual Studio 编译以下代码以制作 CombiCSV.exe

```
#include <fstream>
#include <iostream>
#include <string>
using namespace std;
int main()
{
    string first_line, line;
    ifstream myfile("combined.csv");
    ofstream outfile("allcsv.csv");  // opens output.txt for writing
    //if (myfile)  // same as: if (myfile.good())
    //  {
    getline(myfile, first_line); // get the first line of original
    cout << first_line << endl;
    outfile << first_line; // write first line to outfile
    outfile << '\n';  //new line delimiter
    while (getline(myfile, line))  // same as: while (getline( myfile, line ).good())
    {
        if (line != first_line) //check line whether equal to first line (header)
        {
            outfile << line; //if not just write to output
            outfile << '\n';  //new line delimiter
            cout << line << endl;
        }
    }
    myfile.close();
    outfile.close();
    cout << "Copy End.\n";
    //}
  //else cout << "Failed\n";
    return 0;
} 
```

上述程序 CombiCSV.exe 将打开默认的“combined.csv”文件，将第一行保留为标题，并在读取和写入记录期间删除重复项，直到 eof。结果存储在“allcsv.csv”中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-18T20:37:50.837

它对我不起作用，因为我的文件有 >200k 行（从另一篇文章中读取它适用于文件 <64k 行）。我修改了脚本以使用***sed***来打印行。

-n ：安静，禁止自动打印所有行

1,$：第一行到最后一行

p : 打印匹配模式的行

```
@echo off
setlocal
set first=1
set fileName="combinedFiles.csv"
>%fileName% (
  for %%F in (*.csv) do (
    if not "%%F"==%fileName% (
      if defined first (
        sed -n 1,$p "%%F"
        set "first="
      ) else sed -n 2,$p "%%F"
    )
  )
) 
```

# asp.net-mvc-3 - 如何在MVC3中将null作为字符串linkText添加到ActionLink

> ID：12745627
> 
> 赞同：0
> 
> 时间：2012-10-05T11:48:19.860
> 
> 标签：asp.net-mvc-3

如何将字符串 linkText 写为 null？

```
 <i class="icon-pencil" >@Html.ActionLink( null,"edit", new { id = item.content_id }) </i> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:10:00.083

我感觉你正在使用 Twitter Bootstrap（因为`<i>`标签上有“icon-pencil”类）。

在这种情况下，最好将标签放在标签`<i>`内，`<a>`而不是相反：

```
<a href="@Url.Action("edit", new { id = item.content_id })"><i class="icon-pencil"></i></a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-14T10:20:08.907

将 null 替换为：

```
string.empty 
```

# c++ - 有没有办法设置 Eclipse 以使用另一个项目的输出作为库？

> ID：12745629
> 
> 赞同：1
> 
> 时间：2012-10-05T11:48:22.453
> 
> 标签：c++, eclipse

假设我的 Eclipse 工作区中有 3 个项目，即`FooServer`,`FooClient`和`FooShared`. 我定期拥有并修改所有 3 个中的代码，服务器和客户端部分都使用来自共享部分的代码。

有没有办法告诉 Eclipse 我想`FooShared`在其中用作库，类似于 Visual Studio 的 .NET 项目的“添加引用...”？（而不是像包含路径和手动设置所有内容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:01:04.840

这取决于这些项目是如何构建的，以及它们是否有 makefile 等。但作为一个简单的答案，尝试转到您的项目属性、C++ 项目路径，然后您可以在工作区中添加任何其他项目。这是否足够我不知道我自己从未尝试过

更好的方法是将项目依赖的库显式添加到 CMakeLists.txt 文件中，请参阅[本教程](http://www.vtk.org/Wiki/CMake/Tutorials/Exporting_and_Importing_Targets)，了解如何将其他目标导入项目

# r - 不能在 R 中 rm 对象？

> ID：12745633
> 
> 赞同：2
> 
> 时间：2012-10-05T11:48:23.867
> 
> 标签：r

在我的控制台中，我无法删除对象，为什么？

```
> ls()
[1] "f1"      "f2"      "getmail" "k"       "mail"    "pattern" "rm"      "word"    "x"      
> rm(k)
Error in rm(k) : unused argument(s) (k)
> rm("k")
Error in rm("k") : unused argument(s) ("k") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T11:56:32.617

您已经用自己的对象覆盖了该`rm`对象，名为`rm`：

> ```
> > ls()
> [1] "f1"      "f2"      "getmail" "k"       "mail"    "pattern" "rm"      "word"    "x" 
> ```

因此，当您编写时，`rm(something)`它不是调用原件`rm`，而是您自己的。要调用原始文件`rm`，请使用

```
originalRm <- get('rm', baseenv())
originalRm(object)

# or, simpler:

base::rm(object) 
```

# java - Magnolia CMS：如何配置代理和绕过

> ID：12745636
> 
> 赞同：1
> 
> 时间：2012-10-05T11:48:36.053
> 
> 标签：java, content-management-system, http-proxy, magnolia

我正在开发一个 Magnolia 模块，其中将包括一些 RSS 提要以及对内部客户端系统的一些 Web 服务调用。

我的公司有一个网络代理，所以为了让 RSS 提要收集数据，我已经使用代理详细信息配置了 Tomcat 服务器：在 setenv.bat 中将以下 JVM 参数添加到 CATALINE_OPTS：

```
    -Dhttp.proxyHost=%hostname% -Dhttp.proxyPort=%port% -Dhttp.proxyUser=%user% -Dhttp.proxyPass=%passwd%

```

我的 RSS 聚合器现在可以工作，但我的 web 服务调用失败并显示 403 Forbidden。假设这是因为代理，当我删除 JVM 参数时，调用再次工作。

现在我的问题：

1.  如何在 Tomcat 中配置对我的 Web 服务主机域（即 *.intws.co.uk）的代理绕过？
2.  有没有办法在 Magnolia 中配置代理详细信息？我的客户将有不同的代理设置，我希望他们管理这些设置（在 Magnolia 而不是 Tomcat 文件中）。
3.  是否也可以在 Magnolia 中配置旁路主机？同样，我的客户可能将他们的 Web 服务安装在不同的主机名下。

我对 Tomcat 配置和代理的一般知识是有限的，所以请随意深入了解更多细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:22:58.883

我不确定您需要什么，但查看虚拟 URI 映射可能会有所帮助：您可以在 Magnolia 的管理界面中找到这些选项`Configuration:modules/adminInterface/virtualURIMapping`（或单击“默认 URI”）。很高兴知道 Magnolia EE 在这里比 CE 更强大。

更多信息：[http ://documentation.magnolia-cms.com/technical-guide/virtual-uri-mapping.html](http://documentation.magnolia-cms.com/technical-guide/virtual-uri-mapping.html)

# ruby-on-rails - 将 PHP 转换为 Rails -- Twilio 呼叫跟踪

> ID：12745639
> 
> 赞同：1
> 
> 时间：2012-10-05T11:48:53.930
> 
> 标签：ruby-on-rails, twilio

在 Michael Hartl 的 rails 教程之后，我正在尝试构建一个呼叫跟踪应用程序，以了解更多 rails 和 Twilio。

到目前为止，我已经成功地创造了——

*   验证
*   与条纹集成
*   每个自动注册的用户都会获得一个 Twilio 子帐户
*   用户可以搜索电话号码并购买

*（这是在过去 5 天内完成的 20 个 Stackoverflow 问题！）*

现在，我想做的是实际创建通过 Twilio 记录呼叫数据的功能。

他们在这里有一个 php 教程：http: [//www.twilio.com/docs/howto/call-tracking](http://www.twilio.com/docs/howto/call-tracking)

我很难概念化我将如何完成这项工作。即，我需要什么样的控制器/操作组合来通过 twilio 号码路由呼叫并接收信息？

到目前为止，我有 3 个模型

**计划模型**

```
#  name              :string(255)
#  max_phone_numbers :integer
#  max_minutes       :integer
#  price             :integer
has_many :users 
```

**用户模型**

```
#  name                  :string(255)
#  email                 :string(255)
#  twilio_account_sid    :string(255)
#  twilio_auth_token     :string(255)
#  plan_id               :integer
#  stripe_customer_token :string(255)
belongs_to :plan
has_many :phones 
```

**手机型号**

```
#  campaign_       :string(255)
#  twilio_number   :integer
#  original_number :integer
#  user_id
belongs_to :user 
```

* * *

现在，我正在考虑创建一个名为 Phone_data 的新模型。电话模型比 has_many Phone_datas。我可以使用该关联来显示特定手机上的数据。

**可能的新模型：phone_data**

```
#Data that twilio can save to each phone(duration of call, etc )
#phone_id
#belongs_to phones 
```

我的问题是，phone_data 模型是否有意义，更重要的是，您认为控制器将如何实现功能

1.  潜在客户拨打 Twilio 号码，然后 Twilio 将信息发布到您的应用程序

2.  应用程序将 Twilio 呼叫信息保存到正确的 phone_data 关联

3.  应用程序发送 TwiML 指令以拨打 original_number

4.  潜在客户和代理进行对话，直到其中一个断开连接

5.  Twilio 请求拨号操作 URL 并发送有关第二个呼叫段的信息

这是他们用于 PHP 的代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T13:57:27.117

Twilio 的伙计们，尤其是 Brian Levine，非常了不起。Brian 继续向我解释了这一点……通过构建一个示例应用程序！在这里找到：

[https://github.com/Beans0063/Twilio-Call-Tracking-Ruby](https://github.com/Beans0063/Twilio-Call-Tracking-Ruby)

# wordpress - div中的背景颜色在iphone中不起作用

> ID：12745640
> 
> 赞同：1
> 
> 时间：2012-10-05T11:49:00.643
> 
> 标签：wordpress, css, responsive-design, media-queries

我已经对网站[http://www.domda.se](http://www.domda.se)进行了一些媒体查询 。问题是当我在 iphone 上查看该网站时，#middle 和 #bottom 中的背景颜色不起作用。当我添加 -1 边距以防止 div 之间出现间隙时，问题就开始了。我试图删除负边距，看看是否有帮助，但没有奏效。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:26:38.270

在这个规则中，进入这个媒体查询

```
@media only screen and (max-width: 480px), screen and (max-device-width: 480px),
screen and (max-width: 600px)  {
/* ...some other stuff here... */
    #middle {
        background: #00ffff;
        float: none;
        margin: -1px 0 0 0;
        width: 100%;
        clear: both;
    }
/* ...some more stuff here... */ 
```

您可以尝试添加`overflow:hidden;`吗？也在`#bottom`：

```
#bottom {
    background: #fff;
    float: none;
    margin: -1px 0 0 0;
    width: 100%;
    clear: both;
    overflow:hidden; /* ADD THIS PROPERTY ON BOTH */
} 
```

我认为问题在于您正在删除`float`，因此容器将不再...包含其内容。

# gwt - 布局 IconButton Smart GWT

> ID：12745642
> 
> 赞同：0
> 
> 时间：2012-10-05T11:49:10.390
> 
> 标签：gwt, button, smartgwt, styling

是否可以更改图标和 IconButton 标题之间的填充或边距？我希望按钮中的文本显示在离图标更远的地方。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:46:45.960

如果你想改变风格，你可以看看[这里：](https://stackoverflow.com/questions/9183111/smartgwt-button-cannot-override-skin-styles-css) 如果你想修改所有 IconButton 的外观，你可以改变你的皮肤。

# visual-studio-2010 - Visual Studio 2010 将 Web 应用程序发布到文件系统 - 没有预编译选项？

> ID：12745645
> 
> 赞同：0
> 
> 时间：2012-10-05T11:49:17.127
> 
> 标签：visual-studio-2010, publish, pre-compilation

到目前为止，我一直使用 Visual Studio 中的 Web 部署项目来预编译我的 Web 应用程序，然后我手动将文件复制/ftp'd 到实时服务器。

我一直在查看 Visual Studio 中的 Build > Publish 功能（以及 Web.Release.Config 等的 Web.Config 转换）并让它工作，以便当我发布时，它会在本地输出文件，但是当我查看时在该文件夹的内容中，所有 ASPX 文件都在那里，而不是生成“存根”文件（因为它们是在预编译项目时，比如当我使用 Web 部署项目时）。我认为这是因为该项目尚未预编译。但是，在 Web 应用程序属性页面或发布对话框下，我看不到启用预编译的选项。

如何使用 Visual Studio 的发布工具（利用 web.config 转换）但输出预编译的构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:07:50.000

看起来 VS2010 不像 VS2012 那样在 Web 应用程序属性页面或发布对话框上提供预编译。

因此，我将坚持在 VS2010 或更早版本下使用 Web 部署项目，并将开始使用预编译作为 VS2012 下发布过程的一部分。

# knockout.js - 使用自定义验证器的淘汰赛验证仅触发一次

> ID：12745648
> 
> 赞同：0
> 
> 时间：2012-10-05T11:49:26.487
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-validation

我使用淘汰赛验证来创建自定义验证器，并尝试使用淘汰赛映射插件创建的视图模型。验证在我第一次运行代码时触发，但在我单击保存或更改输入中的值时不会触发。

在下面的小提琴中，我试图确保 LL 小于 L 并且 L 小于 H。在测试数据中，我的 L 值小于 LL，因此您可以看到报告了一个错误，但是当我更正时验证器不会触发的输入字段中的数据。

[http://jsfiddle.net/davidoleary/quSpZ/](http://jsfiddle.net/davidoleary/quSpZ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:40:25.627

这是一个工作小提琴。

[http://jsfiddle.net/quSpZ/4/](http://jsfiddle.net/quSpZ/4/)

我将您的代码重组为具有一个 ScheduleEntry 对象，并将验证移到该对象内。该对象还设置为具有属性的可观察对象，因此它们将在更改时触发验证。

# css - 在网页上使用本地文件

> ID：12745652
> 
> 赞同：-1
> 
> 时间：2012-10-05T11:49:33.540
> 
> 标签：css, image, firefox, firefox-addon, local-files

我正在尝试在 FireFox 的网页上使用本地图像。问题是无论我做什么，我都会看到一条安全消息并且图像不会加载：

```
Security Error: Content at http://domain.com/ may not load or link to file:///E:/path/to/file/file.png. 
```

我将以下内容放入`user.js`并将该文件复制到 FireFox 配置文件目录中。

```
user_pref("capability.policy.policynames", "localfilelinks");
user_pref("capability.policy.localfilelinks.sites",  'http://domain.com');
user_pref("capability.policy.localfilelinks.checkloaduri.enabled", "allAccess"); 
```

我想要做的是添加 css 文件并使用它来设置页面样式。

**编辑：** 我写了一个扩展来改变 HTTP 响应并用本地文件替换远程 css 文件。但正如我所说，Firefox 会阻止加载本地 css 文件。

**编辑 2**
请不要**从**这个问题 中删除`firefox-addon`标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T14:04:48.977

不要这样做 -`file://`出于某种原因，对协议的访问已被锁定。如果您的目标是用本地数据替换图像，那么就不要使用该`file://`协议，还有很多其他可用的协议。例如，您可以使用该[`data:`协议](https://developer.mozilla.org/en-US/docs/data_URIs)。这是作为`data:`URL 的 SO 图标：

> 数据：图像/ PNG; BASE64，iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8％2F9hAAABrUlEQVR42mNkwAOepOgxMTD9mwhk5gDxQSB2l5l15SeyGkYGAuBJMtAQ5n％2BrgcwgIF4ENCCeJAOghvADXbIHqNoEyK0BGtKK14DXU9lAThZiYPw％2FXTTr92uId3SVgKoPA8WkgNxIoCErsBrwdhoL57％2F％2FTGeATC0gfgVUMRlo％2B2zRjD8vn6RrmzH8ZT4E5IOU％2BgAN2YNhwMOJ％2FEy8bJ％2BVgGYnAQ3K％2FF％2BfkQco％2FAYYDjP％2BfeHs％2FfNQyub％2FN44NQJe0ysy5VI83DF5M5pRkY％2FmVyfCfIRtomNB％2Fpv9v％2F％2F9infbnucgZ5l％2FMW8T7HvxDMWB9hT3nXwbmrH％ 2F％2FmO4Bubc4Wb％2Ff9W09％2BuNmjwQPP％2FvHNHaWXwX％2FGf7LsjD9k％2BFLZ3iKEQYbKmy1％2FjKwXIXx％2F％2F1nfPvvP％2FMVJsZ％2FRzlYfpwX4nj％2FT5zrNbtK8evlWGNhcYU3Px％2FDR％2BF％2FDExGQK4pEKsCseJ％2FoDKgF0AGMvxjZLIP79xzCMWA3Jyc％2FyB68pQpGGEyuyJEhJXhtwYLELMx％2FNL9wcDRcfqLwjOYegwDYGxcAFkNbQxgIALgNIBUQBUDAFi2whGNUZ3eAAAAAElFTkSuQmCC

这个 URL 很容易生成：

```
var url = "data:image/png;base64," + btoa(imageData); 
```

或者，您可以使用`resource://`可以映射到磁盘上目录的 URL，`nsIResProtocolHandler`但这[更复杂](https://developer.mozilla.org/en-US/docs/JavaScript_code_modules/Using#Programmatically_adding_aliases)。请记住，所有网站都可以访问映射目录的所有内容。您应该确保它不包含任何敏感信息。

**提问者：*** 我添加了链接的内容：

```
var ioService = Components.classes["@mozilla.org/network/io-service;1"]
                          .getService(Components.interfaces.nsIIOService);
var resProt = ioService.getProtocolHandler("resource")
                       .QueryInterface(Components.interfaces.nsIResProtocolHandler);

var aliasFile = Components.classes["@mozilla.org/file/local;1"]
                          .createInstance(Components.interfaces.nsILocalFile);
aliasFile.initWithPath("/some/absolute/path");

var aliasURI = ioService.newFileURI(aliasFile);
resProt.setSubstitution("myalias", aliasURI);

// assuming the code modules are in the alias folder itself 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:16:26.507

那是对的。尝试直接从用户的文件系统中使用图像是一个安全漏洞。较新的浏览器已经实现了 FileReader API，它允许您以安全的方式访问用户的文件。

这里有一些例子：

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

[http://html5demos.com/file-api](http://html5demos.com/file-api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T17:57:59.390

我怀疑这是否值得[，](http://mxr.mozilla.org/mozilla-central/source/netwerk/test/httpserver/README)但您可以将[`httpd.js`](https://developer.mozilla.org/en-US/docs/Httpd.js/HTTP_server_for_unit_tests)其用作 XPCOM 组件。

编辑：我刚刚意识到[附加 SDK 提供`httpd.js`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/api-utils/httpd.html)

# mysql - 从 mysql 查询中删除联合以在单行中获得 2 行输出

> ID：12745660
> 
> 赞同：0
> 
> 时间：2012-10-05T11:50:20.327
> 
> 标签：mysql, sql, database

这是mysql查询

```
SELECT CallDate,SUM(Hour0) AS FailedCalls FROM call_status WHERE CallDate='2012-09-14' AND CallStatusId NOT IN (42,52)

UNION

SELECT CallDate,SUM(Hour0) AS SuccessCalls FROM call_status WHERE CallDate='2012-09-14' AND CallStatusId IN (42,52); 
```

这是输出 ![在此处输入图像描述](../Images/6479cf81e285bb7fa46a0cf3b3f8dde9.png)

抱歉图片太小了。如您所见，我从上面的查询中选择了失败的呼叫，并使用第二个查询选择了 SuccessCalls。但我想要的是 CallDate、FailedCalls、SuccessCalls 在一行中。

***更新：*** 这是正确的查询：

```
SELECT CallDate,
SUM(CASE WHEN (CallStatusId NOT IN(42,52)) THEN Hour0
ELSE 0 
END) AS FailedCalls,
SUM(CASE WHEN (CallStatusId IN (42,52)) THEN Hour0
ELSE 0
END) AS SuccessCalls
FROM call_status
WHERE CallDate='2012-09-14'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:55:46.723

这些方面的东西？

```
SELECT CallDate
      ,SUM( CASE WHEN (Hour0 != 42 AND Hour0 != 52) THEN 1 ELSE 0 END ) AS FailedCalls
      ,SUM( CASE WHEN (Hour0  = 42  OR Hour0  = 52) THEN 1 ELSE 0 END ) AS SuccessCalls
  FROM call_status
  WHERE CallDate='2012-09-14' 
```

# html - 黄瓜/红宝石：可以将“puts”输出到--format html文件吗？

> ID：12745662
> 
> 赞同：4
> 
> 时间：2012-10-05T11:50:23.540
> 
> 标签：html, ruby, cucumber, string-formatting

我有一些 ruby​​ 测试，它们调用不同的模块、类，它们详细说明了它们在执行过程中对一些“放置”命令所做的事情。

如果您在控制台中运行这些测试，那么您将在控制台中看到“puts”命令的输出，但如果您使用以下选项运行测试：

```
ruby --format html --output file.html 
```

那么所有这些信息都会丢失。有没有办法在 HTML 报告中记录简单的字符串消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:25:35.123

我尝试了以下步骤：

```
When /^I do something$/ do
  puts "Hello"
end

Then /^something happens$/ do
end 
```

...使用以下命令：

```
cucumber -f html -o results.htm 
```

...当我在浏览器中打开`results.html`文件时，它会在显示步骤后显示“Hello”消息。我已经附上了 HTML 输出的相关部分，所以你可以看到输出在`puts`那里：

```
<!-- the first step -->
<li id='features_thing_feature_4' class='step passed'>
    <div class="step_name">
        <span class="keyword">When </span>
        <span class="step val">I do something</span>
    </div>
    <div class="step_file">
        <span>features/step_definitions/thing_steps.rb:1</span>
    </div>
</li>
<!-- anything that the above step passed to `puts` -->
<li class="step message">Hello</li>
<!-- the second step -->
<li id='features_thing_feature_5' class='step passed'>
    <div class="step_name">
        <span class="keyword">Then </span>
        <span class="step val">something happens</span>
    </div>
    <div class="step_file">
        <span>features/step_definitions/thing_steps.rb:5</span>
    </div>
</li> 
```

这表明当 cucumber 的`puts`方法被调用（即：直接从一个步骤中）时，输出将包含在 html 输出中。但是，如果`puts`调用来自其他地方（例如：您的模块），那么它将不会被包括在内。您可以考虑将`puts`呼叫从模块转移到步骤。此外，使用`puts`并不是真正的最佳实践，因此您可能需要考虑完全删除它......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:51:36.440

您可以记住每个场景的 Before 钩子中的 World：

```
# features/support/env.rb
Before do |scenario|
  $world = self
end 
```

然后在外部世界的支持类和模块中，您可以将 puts 用作：

```
$world.puts 'something' 
```

您还可以将 Cucumber 实例变量获取/设置为：

```
$world.instance_variable_get(:@user)
$world.instance_variable_set(:@user, user) 
```

我也更喜欢将这两种方法提取到帮助程序以获得更好的可见性：

```
module Helpers
  def get_scenario_variable(symbol)
    $world.instance_variable_get(symbol)
  end

  def set_scenario_variable(symbol, value)
    $world.instance_variable_set(symbol, value)
  end
end 
```

然后你可以在需要这些方法的地方包含这个模块

# c# - 如何从外部防火墙读取日志

> ID：12745663
> 
> 赞同：0
> 
> 时间：2012-10-05T11:50:23.760
> 
> 标签：c#, java, networking, network-programming, firewall

我想用 java 或 c# 编程语言读取外部防火墙日志，但我不知道从哪里开始。目的是了解哪些用户浏览了互联网上的哪些网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:55:52.007

只需将系统日志从您的 fw 发送到系统日志服务器，并使用任何语言的脚本浏览日志......您可以轻松分析哪些客户端正在连接到哪个服务器 IP 地址，然后您可以将其映射到服务。

兄弟，

# python - 无法初始化子类命名元组的实例

> ID：12745671
> 
> 赞同：4
> 
> 时间：2012-10-05T11:50:45.633
> 
> 标签：python, namedtuple

我想我还没有理解如何定义一个从 namedtuple 子类化的类：

```
from collections import namedtuple
PD = namedtuple('PD', 'x y z')
p1 = PD(0, 'u', 1)
print p1.x #<== this works

class PDsub(PD):
   __slots__ = ()
   def __new__(cls, x, y, z):
        self = super(PDsub, cls).__new__(cls, x, y, z)
        return self

   def __init__(self, a):
        self.x, self.y, self.z = a, a, a

   def __str__(self):
        return 'Foo'

p2 = PDsub(5) #<== this does not work 
```

此代码引发`TypeError : __new__() takes exactly 4 arguments (2 given)`.

任何想法为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T11:55:16.817

实例构造函数 ( `__new__`) 和实例初始化器 ( `__init__`) 都需要接受相同数量的参数。

您`__new__`需要 4 个参数，但您的`__init__`方法只接受 2 个。调整一个或另一个以接受相同的数字，或在您的方法中使用`*args`包罗万象的参数。`__init__`

例如，使用以下`__new__`方法可以使事情正常进行：

```
def __new__(cls, a):
    self = super(PDsub, cls).__new__(cls, a, a, a)
    return self 
```

*在这种情况下，您根本*不再需要您的`__init__`初始化程序。

 *演示：

```
>>> from collections import namedtuple
>>> PD = namedtuple('PD', 'x y z')
>>> class PDsub(PD):
...     __slots__ = ()
...     def __new__(cls, a):
...         self = super(PDsub, cls).__new__(cls, a, a, a)
...         return self
...     def __str__(self):
...         return 'Foo'
... 
>>> p2 = PDsub(5)
>>> p2.x, p2.y, p2.z
(5, 5, 5)
>>> str(p2)
'Foo' 
```

像元组这样的不可变类型通常使用`__new__`构造函数*而不是*初始值设定项`__init__`；所有内置的不可变对象 ( `frozenset`, `str`, `tuple`) 都这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T11:58:00.307

```
def __new__(cls, x, y, z):

p2 = PDsub(5) 
```

每当您为您的类创建一个对象时，`__new__`都会调用方法（构造函数）来创建它。所以，这里您的`__new__`方法需要 4 个参数，但您只传递了 2 个（*注意：- 参数**`cls`**是隐式的）

所以，要么你改变你**`__new__`**采取**2 个参数**，或者你可以改变你**`__init__`**采取**4 个参数**，并相应地`your instance`通过传递**3 个参数**来创建（第一个是隐式的..）*

# c# - 带有 .NET Reactor 的反 ILDASM

> ID：12745675
> 
> 赞同：1
> 
> 时间：2012-10-05T11:51:07.610
> 
> 标签：c#, .net, obfuscation, protection, net-reactor

我正在测试 .NET Reactor，当我仅将 .NET Reactor 与 Anti ILDASM 一起使用时，这足以阻止其他人查看我的源代码吗？我已经尝试过使用 Reflector 进行这种受保护的组件，但它无法再打开它。那么这种保护是否足够安全，还是有其他可能性可以查看我的来源？

我的“问题”是我的应用程序使用了很多反射（使用 CSLA.NET），而且似乎我不能使用混淆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:53:12.683

这取决于您个人或公司标准如何定义“足够安全”。

最终，不，没有什么是安全的，而且永远是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-31T21:57:12.050

我们测试了 .Net reactor 4.9 和 5.0，发现 4.9 版本可以很容易地反编译，但 5.0 版本不行。最好的是，您购买的是 5.0 版本。

这里还有一个障碍，因为当您通过 support@eziriz.com 发送电子邮件时，.Net Reactor 不会回复您的电子邮件。这已经持续了过去 3 个月。您可以尝试一下并测试自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T11:54:16.023

所有程序集都可以反编译。看看[我应该担心混淆我的 .NET 代码吗？](https://stackoverflow.com/questions/12075/should-i-be-worried-about-obfuscating-my-net-code),[混淆效果如何？](https://stackoverflow.com/questions/551892/how-effective-is-obfuscation),[保护 .NET 代码免受逆向工程？](https://stackoverflow.com/questions/506282/protect-net-code-from-reverse-engineering/506301#506301)等等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T11:54:52.537

不幸的是，一切都可以被反编译，唯一可以用来对抗的就是让你的代码“更难”阅读，但仅此而已。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T12:00:24.040

这里有点偏离主题，但我个人认为，大多数尝试编写代码的人都会编写非常复杂的代码，即使你有可用的源代码也很难阅读！我认为您依赖于知识产权的代码当然应该被混淆，但是您可能会发现甚至没有多少人会尝试对代码进行反混淆，如果您如此担心，那么我认为您应该投资于一些优质可靠的高薪混淆工具。

# java - 为什么 getHostAddress() 在不同环境中运行时输出不同？

> ID：12745676
> 
> 赞同：2
> 
> 时间：2012-10-05T11:51:07.593
> 
> 标签：java, operating-system, ip

> **可能重复：**
> [java InetAddress.getLocalHost(); 返回 127.0.0.1 ...如何获得真实 IP？](https://stackoverflow.com/questions/2381316/java-inetaddress-getlocalhost-returns-127-0-0-1-how-to-get-real-ip)

我在不同的操作系统中运行了以下代码。当我在 ubuntu 11.4 中运行它时，我得到了 127.0.1.1，但同时我在 Windows 中得到了实际的 ip 192.XXX.XXX.XXX。我怎样才能得到实际的ip？

```
import java.net.*;
import java.io.*;

public class GetIPAddress {
   public static void main(String [] args) {
   try {
        InetAddress thisIp =InetAddress.getLocalHost();
        System.out.println("IP:"+thisIp.getHostAddress());
       }
      catch(Exception e) {
              e.printStackTrace();
       }
    }
} 
```

干杯..

# mysql - 通过索引查询慢搜索 LIKE% MYSQL

> ID：12745681
> 
> 赞同：5
> 
> 时间：2012-10-05T11:51:27.533
> 
> 标签：mysql, performance, indexing, sql-like

我有 100 000 000 行这么大的表。表结构

```
id         int          INDEX(not primary not unique just index)
lang_index varchar(5)   INDEX
name       varchar(255) INDEX
enam       varchar(255) INDEX 
```

好的。我查询

1 查询

```
"SELECT name FROM table WHERE lang_index='en' AND name LIKE 'myname%'" 
```

这张大桌子的速度还可以。大约 0.02 秒。

我尝试 2 查询

```
"SELECT name FROM table WHERE lang_index='en' AND (name LIKE 'myname%' OR enam LIKE 'myname%')" 
```

230 秒左右非常非常慢！！！

然后我试试这个 3 Query

```
"SELECT name FROM table WHERE lang_index='en' AND enam LIKE 'myname%'" 
```

速度太棒了。大约 0.02 秒。

然后我将我的第二个查询分解为两个查询（1 和 3 查询），它的速度更快。大约 0.04 秒，但不简单。

为什么我的查询很慢？两个查询比一个快得多。我需要这样做我`"SELECT name FROM table WHERE lang_index='en' AND (name LIKE 'myname%' OR enam LIKE 'myname%')"` 怎样才能让它更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:49:24.730

关键字使`OR`MySQL 的优化器发疯。

你可能会尝试这样的事情。

```
SELECT name FROM table WHERE lang_index='en' AND name LIKE 'myname%'
UNION
SELECT name FROM table WHERE lang_index='en' AND enam LIKE 'myname%' 
```

或者您可以考虑 FULLTEXT 搜索。它需要 MyISAM 或 MySQL 5.6 或更高版本。

**编辑*** 很难确切地知道这些优化的事情是怎么回事。你能试试这个吗？这将查看语言选择是否让您感到困惑。

```
 SELECT name 
   FROM table 
  WHERE (name LIKE 'myname%' OR enam LIKE 'myname%') 
```

你能试试这个吗？

```
SELECT name FROM table WHERE lang_index='en' AND name LIKE 'myname%'
UNION ALL
SELECT name FROM table WHERE lang_index='en' AND enam LIKE 'myname%' 
```

它不会给出完美的结果——它会有重复的名称项目——但它会跳过`DISTINCT`查询中的重复数据删除步骤。

你也可以试试这个。

```
SELECT name 
  FROM table
 WHERE lang_index='en'
   AND id IN (
    SELECT id from table 
     WHERE (name LIKE 'myname%' OR enam LIKE 'myname%')) 
```

# css - 指南针 - 精灵图像缩放

> ID：12745682
> 
> 赞同：4
> 
> 时间：2012-10-05T11:51:28.317
> 
> 标签：css, sass, compass-sass

我正在使用 Compass 创建一个 Sencha Touch 网络应用程序。尝试过 inline-url 但我的图像很大，所以我希望将它们移动到精灵中（并与背景大小一起重新使用）。

目前我的内联图像可以缩放，因为它们是单个文件。精灵具有在创建精灵时生成的位置。当您使用 background-size 更改精灵大小时，您还需要更改位置。

是否可以获取精灵的索引？然后我可以说，如果我想要它，`background-size: 50px`那么`index is 3`新的背景位置是`0 150px;`

看不到任何关于 compass 在哪里存储或获取精灵中每个项目的索引的信息。我的图像以“A”开头，所以是文件夹中的第一个，在我的 SCSS 中首先被引用，但它的索引是 3，所以我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T05:14:30.273

我发现了这个，它以某种方式帮助了我： [https ://gist.github.com/3410875](https://gist.github.com/3410875)

我以这种方式使用它：

```
$logo-spacing: 20px;
@import "logo/*.png";
@include all-logo-sprites;

.logo-brand {
    $spriteName: brand;
    $percentage: 40;

    @include resize-sprite($logo-sprites, $spriteName, $percentage);
} 
```

不确定这是否在回答您的问题。

# mysql - VB datagridview关于重复键更新

> ID：12745685
> 
> 赞同：1
> 
> 时间：2012-10-05T11:51:45.927
> 
> 标签：mysql, datagridview

我正在尝试使用我上传到 Datagridview 的文件来更新一行。它通常适用于标准的 Insert 命令，但是当尝试更新主键相同的行时，我不知道如何为其编写 MySQL 命令。

我试过了：

```
dbSQL_query = "INSERT INTO bond_static VALUES (" + addQoute(ID) + ", " + _
                      + _ addQoute(age) + ", " + _
                       addQoute(name) + ", " + _
                      addQoute(gender) + " on duplicate key update (age)= " + ")" 
```

但这不起作用。

# php - 将 URL 路由到 php 参数

> ID：12745690
> 
> 赞同：0
> 
> 时间：2012-10-05T11:52:10.343
> 
> 标签：php, html, regex, .htaccess, web

我有一个 URL，我想通过以下方式重新路由：

```
example.com/H4tX 
```

到

```
example.com/game.php?id=h4tX 
```

为此，我在域的 cgi-bin 文件夹中有以下 .htacces 文件：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_]+)$ game.php?id=$1 
```

但是，如果我尝试访问 example.com/H4tX，则找不到该页面。我在这里错过了什么吗？htaccess 几乎没有给出任何反馈：/ 谢谢，Thomas

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:57:01.263

你错过了一个/，试试这个：

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_]+)$ /game.php?id=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T11:56:46.303

`.htaccess`文件应该在您的 index.php 文件旁边的根文件夹中（如果您想在您的网站上全局使用它），而**不是**在任何其他文件夹中。

如果您将它放在另一个文件夹中，它将仅适用于该特定文件夹。

# iframe - 如何检测跨域 iframe 的可见性？

> ID：12745692
> 
> 赞同：3
> 
> 时间：2012-10-05T11:52:18.470
> 
> 标签：iframe, cross-domain, ads

有些公司声称能够在不访问嵌入页面的情况下检测 iframe 的可见性。我发现的两个是[spider.io](http://spider.io/blog/2011/10/demonstration-screencast-verifying-that-display-ads-are-visible-from-within-iframes/)和[comscore](http://blog.comscore.com/2012/08/accreditation_big_step_on_multi-platform_journey.html)，它们都说他们的技术正在申请专利。有什么想法他们可能会这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-05-17T08:18:59.473

这个问题真的很老，所以你现在可能已经有了答案，但请参阅下面的一些方法来计算 x 域 iframe 可见性。

在支持 Flash 并优化刷新率的浏览器中，如果 Flash 对象在屏幕上或在屏幕外，您可以将 Flash 像素放置在 iframe 中的战略区域并测量刷新率以计算 iframe 有多少可见。

在 IE8+（不优化 Flash 刷新率）中，您可以通过在相同的战略位置使用 document.elementFromPoint 来操作类似的检测方法来检测可见性。因此仅在 IE 中有效，因为所有其他浏览器在 x 域 iframe 中返回值而不考虑视口。

在 FF 中，window.mozInnerScreenY/X 属性可用于帮助计算可见性。

我不会更详细地介绍（因为它在移动设备上花费了太多精力），但它们是目前实现它的三种主要方式。

将来，新的 IntersectionObserver 将出现在 Chrome 的下一个版本中，因此有望在 Flash 最终尘埃落定之前普遍可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T10:13:40.467

很容易，通过标记 iframe。没有什么“可专利”的。

您可以在 iframe 上设置一个 1 像素的 GIF“标签”或使用所谓的“软标签”，这可以顺便跟踪任何页面的任何元素，而不仅仅是独立于嵌入页面的 iframe。使用的代码是内联javascript。

但是，我不确定此功能是否在 comScore 的 DaX 平台之外可用。您可以随时联系他们的支持部门。

# matlab - matlab如何获取函数参数

> ID：12745694
> 
> 赞同：2
> 
> 时间：2012-10-05T11:52:21.013
> 
> 标签：matlab

> **可能重复：**
> [如何在 matlab 中检索函数参数的名称？](https://stackoverflow.com/questions/10431577/how-do-i-retrieve-the-names-of-function-parameters-in-matlab)

我正在寻找一种方法来获取传递给或期望我的函数的所有参数。args() 命令似乎很理想，但仅适用于过程。有没有这样做。

我想这样做的原因是我可以检查更少的行。即通过编写一项检查然后对所有参数执行来检查所有输入是否为数字。因此，如果有一个好的替代方案，我对想法持开放态度。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T11:54:29.760

您正在寻找的是[`varargin`](http://www.mathworks.com/help/matlab/ref/varargin.html)它使您能够使用可变数量的输入参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:18:43.167

`varargin`正如 petrichor 所提到的，您可以使用。`varargin`是一个单元格，因此您可以使用以下命令轻松地在一行中执行所有参数的验证`cellfun`：

```
function c = test(varargin)
cellfun(@(arg)validateattributes(arg, {'numeric'}, {'integer'}), varargin); 
```

上面的代码[`validateattributes`](http://www.mathworks.se/help/matlab/ref/validateattributes.html)针对所有函数参数运行。另一方面，如果您想要命名变量，您仍然可以将它们分组到单元格中并如上所述运行特定测试：

```
function c = test(i1, i2, d1, d2)

% validate integer arguments
cellfun(@(arg)validateattributes(arg, {'numeric'}, {'integer'}), {i1, i2});

% validate double arguments
cellfun(@(arg)validateattributes(arg, {'double'}, {'positive'}), {d1, d2}); 
```

# c++ - 重载 += 或 -= 运算符的好处

> ID：12745697
> 
> 赞同：5
> 
> 时间：2012-10-05T11:52:53.443
> 
> 标签：c++, oop, templates, operator-overloading, complex-numbers

最近我做了一个作业，关于使用模板重载复杂类的基本功能主义者（+，-，共轭...）。我不得不费力地找出正确的返回类型（转换为更高的类型），但最后，我让它完美地工作了。这就是我的班级的样子 -

```
template <typename T> class complex_t
{ 
private:
    T real;
    T imaginary;

public:

complex_t(T X, T Y)
  {
    real=X;
    imaginary=Y;
  }
} 
```

但是我没有得到满分，因为我没有实现+=，-=等运算符。**为什么实施这些运算符很重要？**这样做是否真的提供了任何特别的好处？任何人都可以分享一些想法吗？

提前致谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T11:57:12.037

重载运算符 - 允许您的类“Foo”的用户编写如下代码：

```
Foo f1 = ...;
Foo f2 = ...;
f2 = f2 - f1; 
```

重载运算符 -= 允许用户编写

```
Foo f1 = ...;
Foo f2 = ...;

f2 -= f1; 
```

除非您重载 -=，否则第二个示例将无法正常工作，而您的用户可能希望它能够工作。

**编辑以合并效率点** （我的答案得到了赞成，所以我想我会从其他答案中总结一个重复出现的点，以将所有细节都集中在一个地方。感谢 larsmans 和 Benjamin）

`f2 -= f1`通常比`f2 = f2 - f1`以下两个原因更有效：

*   `operator -``this`在修改副本并返回之前，需要获取, 的副本。
*   `operator -`还需要按值返回结果（它不能返回对堆栈对象的引用），可能会导致第二次复制。

`operator -=`另一方面，`this`就地修改，所以不复制。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T11:58:40.397

如果您有两个对象 A 和 B，并且您想将 A 增加 B，而没有`operator+=`，您可以这样做：

```
A = A + B; 
```

在正常实现中，这将涉及创建第三个（临时）对象，然后将其复制回 A。但是，使用`operator+=`，可以就地修改 A，因此这通常工作更少，因此效率更高。

也许更重要的是，它对语言来说是惯用的。C++ 程序员期望如果他们能做到这一点：

```
A = A + B; 
```

他们也可以这样做：

```
A += B; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-05T11:56:32.503

`+=`和朋友就地工作，所以你不必返回你的类的新实例。对于复数，这可能不是什么大问题，但是对于较大的结构，复制可能会很昂贵。

例如，假设您在数学意义上实现支持任意长度的向量。

```
class Vector
{
    std::vector<double> elements;

  public:
    Vector operator+(double x)
    {
        // must return a copy!
        Vector v(*this);
        for (size_t i=0; i < elements.size(); i++)
            v.elements[i] += x;
        return v;
    }

    Vector &operator+=(double x)
    {
        // in-place operation
        for (size_t i=0; i < elements.size(); i++)
            elements[i] += x;
        return *this;
    }
}; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-05T12:03:17.377

首先，如果你给我一个带有 + 运算符的类，我希望 += 也能正常工作。但是，这不会自动发生，因此您需要实现它。

其次，正如其他人之前指出的那样，根据您的类的实现和求和运算的定义，您可能能够实现 += 比仅仅以明显的方式重用您的 + 运算符更有效（即它可以由编译器自动生成的方式，但不是）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-05T12:35:51.930

因为这就是内置运算符的工作方式。任何时候你有一个二元运算符`*op*`，你都有一个变体 `*op*=`，它相当于，除了只计算一次。如果要定义重载运算符，则应在内置运算符上对其行为进行模式化（如果行为不能自然地在内置运算符上进行模式化，则不应重载）。提供，但不提供，就像提供，但不提供。`a *op*= b;``a = a *op* b;``a``+``+=``<``<=`

在实践中，实现算术运算符的常用方法是仅定义`*op*=`类中的运算符，然后从类模板的实例派生，该类模板 `*op*`使用`*op*=` 运算符定义运算符，例如：

```
class MyType : public BinaryOperators<MyType>
{
public:
    MyType& operator+=( MyType const& other );
    //  ...
}; 
```

`BinaryOperators`看起来像：

```
template <typename ValueType>
class BinaryOperators
{
    friend ValueType
    operator+( ValueType const& lhs, ValueType const& rhs )
    {
        ValueType results( lhs );
        results += rhs;
        return results;
    }
    //  ...
}; 
```

（在这种情况下，`friend`声明只是允许在类中完全定义自由函数的技巧。）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-05T11:59:57.533

+ 运算符将按设计分配并构造一个全新的对象，而 += 运算符可以修改现有对象。这使您可以更有效地实现 += 运算符，而不是用户用`val1 = val1 + val2`.

此外，当我知道一个类重载 + 时，我也希望它重载 +=。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T12:36:25.560

除了其他程序员可能期望 += 被覆盖之外，我认为继承和覆盖功能可能是必要的。在一个非常抽象且可能不正确的意义上，假设我们想要对包含我们特殊 Integer 的 Integer 列表执行操作：

```
MyModifiedInteger extends Integer {
  private boolean bigNumberFlag = false;
  ...
  @Override
  public void +=(int i) {
    this = this + i;
    if (this > 100) {
      this.bigNumberFlag = true;
    }
  }
}
MyModifiedInteger myModifiedInt = new MyModifiedInteger();
List<Integer> integers = new ArrayList<Integer>();
integers.add(myModifiedInt);
for (Integer i : integers) {
  i+=5;
} 
```

这里的想法（如果我正确应用了我的 java 继承）是在我的整数上使用 += 运算符以及可能以不同方式处理 += 操作的继承类。

# .net - 带有托管代码的 AX 2012 - 如何从 .Net 代码返回值？

> ID：12745699
> 
> 赞同：0
> 
> 时间：2012-10-05T11:52:52.620
> 
> 标签：.net, axapta, dynamics-ax-2012

我是 Dynamics AX 2012 开发的新手，正在使用 C# dll 来处理“繁重的工作”。

我基本上了解如何委托或触发 C# *void*方法以及使用*xppPrePostArgs*对象传递给它的参数。

但是，我找不到任何关于如何再次将值传回的讨论或示例（通过返回值或设置 args 对象的*setReturnValue* 方法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:05:00.897

`XppPrePostArgs`参数用于事件处理程序。

[如何在方法前事件处理程序中修改参数值](http://msdn.microsoft.com/en-us/library/gg862568.aspx)。

[如何在 Post-Method 事件处理程序中修改返回值](http://msdn.microsoft.com/en-us/library/gg843664.aspx)。

# c# - How can I use the Windows.UI namespace from a regular (Non-Store) Win32 .NET application?

> ID：12745703
> 
> 赞同：25
> 
> 时间：2012-10-05T11:53:00.123
> 
> 标签：c#, .net, windows-8, microsoft-metro

The question is basically related to [Possible to use Toast Notifications from a regular .Net application?](https://stackoverflow.com/questions/12431523/possible-to-use-toast-notifications-from-a-regular-net-application)

How can I use the Windows.UI namespace from a regular (Non-Store) Win32 .NET application (Console, WinForms, WPF)?

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-05T14:09:07.340

Certain WinRT classes can be used from desktop apps, including portions of the Windows.UI namespace. The toast notification APIs are one such example - they can be used by both Windows Store apps and desktop apps. In the API reference section, each class page shows if the API applies to Windows Store apps or desktop apps ([example for toast](http://msdn.microsoft.com/en-us/library/windows/apps/br208641.aspx)). There is a [sample of using the toast notification APIs from a desktop app](http://code.msdn.microsoft.com/windowsdesktop/Sending-toast-notifications-71e230a2) provided on MSDN.

MSDN contains a [full list of the WinRT classes that are available to desktop apps](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx#windows_runtime_classes).

Edit:

The ability to add a reference to the WinRT APIs is off by default in C# desktop apps. The project needs to specifically target the Windows 8 platform. To add a reference to WinRT APIs (the Windows.winmd assembly), add the following to your project file:

```
<PropertyGroup>
    <TargetPlatformVersion>8.0</TargetPlatformVersion>
</PropertyGroup> 
```

After adding that to the project, a "Windows" tab will appear in the Reference Manager dialog, and you can add the Windows assembly. For more information, see 'Core Subgroup' on this [MSDN article](http://msdn.microsoft.com/library/hh708954%28v=vs.110%29.aspx).

# php - 品牌/型号/机动化/年份产品搜索 opencart

> ID：12745706
> 
> 赞同：0
> 
> 时间：2012-10-05T11:53:27.533
> 
> 标签：php, e-commerce, opencart

我正在使用 opencart 构建 AutoParts 商店。我想知道最终用户是否有办法通过制造型号机动化和汽车年份进行搜索，然后列出相应的汽车零件。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:12:18.283

这里有一个商业扩展可用[。](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=3621)就从标准 OC 安装而言，这是不可能的

# java - 成功登录后 Apache HttpClient 4.2.1 POST 请求填写表单

> ID：12745710
> 
> 赞同：3
> 
> 时间：2012-10-05T11:53:49.247
> 
> 标签：java, apache, http-post, apache-httpclient-4.x

我正在编写一个可以登录网站并提交特定表格的应用程序。我可以成功登录，但是当我尝试发送另一个 POST 请求以提交另一个表单时，什么也没有发生。

这是我的代码：

```
 try {
           //log in to site
        HttpPost httpPost = new HttpPost("http://mysite.ru");
        List<NameValuePair> nvps = new ArrayList<NameValuePair>();
        nvps.add(new BasicNameValuePair("login", "guest"));
        nvps.add(new BasicNameValuePair("password", "guest"));

        httpPost.setEntity(new UrlEncodedFormEntity(nvps, Consts.UTF_8));

        HttpResponse response = httpClient.execute(httpPost);

        HttpEntity entity = response.getEntity();
        EntityUtils.consume(entity);

           //all ok. i obtained cookie
        List<Cookie> cookies = httpClient.getCookieStore().getCookies();
        if (cookies.isEmpty()) {
            System.out.println("None");
        } else {
            for (int i = 0; i < cookies.size(); i++) {
                System.out.println("- " + cookies.get(i).toString());
                ConnectionManager.printLog("- " + cookies.get(i).toString());
            }
        }

            //then trying to fill another form in another page of this site
        httpPost = new HttpPost("http://mysite.ru/?h[0][mode]=controllers&h[0][action]=add&h[1][mode]=controllers");

        List<NameValuePair> nvps2 = new ArrayList<NameValuePair>();
        nvps2.add(new BasicNameValuePair("owner", "0"));
        nvps2.add(new BasicNameValuePair("imei", "123456789123456"));
        nvps2.add(new BasicNameValuePair("password", "asdfghj"));
        nvps2.add(new BasicNameValuePair("type_id", "6"));
        nvps2.add(new BasicNameValuePair("remarks", ""));

        httpPost.setEntity(new UrlEncodedFormEntity(nvps2));

        response = httpClient.execute(httpPost);
           //after filling this form, site must redirect me on another page. 
        entity = response.getEntity();
           //but then I look on page I obtained, it's still the same page with form I tried to fill. 
           //It seems like I didn't post request.
        String pageHTML = EntityUtils.toString(entity);
        System.out.println(pageHTML);

        EntityUtils.consume(entity);

    } finally {
        httpClient.getConnectionManager().shutdown();
    } 
```

第二种形式在类型上与第一种形式没有区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:34:16.860

我解决了我的问题。在第二种形式（不是登录形式）中有提交按钮：

```
<form method="post">
   <p>...<p>
   <p>...<p>
   <p>...<p>
   <p>...<p>
   <p>...<p>
     <input type="submit" name="apply" value "Save">
</form> 
```

要填写表格，保存并转到下一页我应该`ValuePair`在我的帖子请求中再添加一个：

```
nvps2.add(new BasicNameValuePair("apply", "Save")); 
```

我不知道为什么我在填写授权表时不需要发送这样的 Button 值来登录。但现在一切正常！

# cakephp - 机器人 Noindex，Cakephp 2.0 中的 Nofollow

> ID：12745711
> 
> 赞同：2
> 
> 时间：2012-10-05T11:53:50.797
> 
> 标签：cakephp, meta-tags, cakephp-2.2

我该怎么说：

```
<?php echo $this->Html->meta(array('name' => 'robots', 'content' => 'noindex'));?> 
```

从我的角度来看，在我的布局的头部？

我尝试了与脚本和 css 相同的技术，通过添加第二个参数来指定我的块，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T14:04:22.907

```
<?php $this->Html->meta(array('name' => 'robots', 'content' => 'noindex,nofollow'), null, array('inline' => false)) ?> 
```

我错过了第二个参数：null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:15:33.597

如果您查看测试用例，它应该可以工作！ [https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Test/Case/View/Helper/HtmlHelperTest.php#L1520](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Test/Case/View/Helper/HtmlHelperTest.php#L1520)

例如

```
echo $this->Html->meta(array('name' => 'ROBOTS', 'content' => 'ALL')); 
```

你试过最新的2.2头吗？以防万一过去有一些修复可以纠正这个问题。

PS：视图块直到 2.1 才引入。您似乎有 2.0 从查看您的标签。

# mysql - 同一日期的第一个插入和最后一个插入的单日时间戳差异

> ID：12745719
> 
> 赞同：1
> 
> 时间：2012-10-05T11:54:13.647
> 
> 标签：mysql, sql, timestamp

下面是查询

```
SELECT
cap_newspaper_page.capnewspaperID,
cap_newspaper_page.capnewspaperPageID,
cap_newspaper.newspaperStationID,
cap_newspaper_page.insertDate
FROM
cap_newspaper_page 
```

我写了一个查询，结果如下！但问题是我想要每一天的总时差。就像我想要 6 月 27 日的总持续时间以及其他日期一样。请帮我解决这个问题。

![在此处输入图像描述](../Images/1450ba121ae099e54d5efe12d1784bf2.png)

```
I want Time difference from -2012-06-27 18:54:27- To -2012-06-27 19:26:58-
and respectively for other dates! 
```

[点击这里查看**大图**](https://i.stack.imgur.com/Ju0we.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:03:01.240

你可以使用 date_diff。

将日期保存到变量中。那么，如果你将所有这些都与今天进行比较，

```
 $insert_date=$sql['insertDate'];
    $now = date_create("now");
$compDate = date_create(date($insert_date));
$interval = date_diff($compDate,$now); 
```

编辑：如果您正在运行一个while循环来显示您的数据 - 您可以简单地使用一个数组来保存每条记录的时间，然后您可以根据您希望使用的两者之间的差异来显示时间。

如果我对您的理解正确，那将与此类似；

```
while ($row=mysql_fetch_array($results)) {
$i=$i+1;
$insert_date[$i] = $row['insertDate'];
if ($i!=0){
$interval = date_diff($insert_date[$i],$insert_date[$i-1]);
}
echo "<tr><td>" . $row['insertDate'] . "</td><td>" . $interval . "</td></tr>";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:13:11.523

```
SELECT
cap_newspaper_page.capnewspaperID,
cap_newspaper_page.capnewspaperPageID,
cap_newspaper.newspaperStationID,
(select sum(TIME(cap_newspaper_page.insertDate)) from cap_newspaper_page a where DATE(a.insertDate) = DATE(b.insertDate)
group by DATE(a.insertDate))
FROM
cap_newspaper_page b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T14:31:31.700

让我知道这个是否有效：

```
SELECT
IF(@tmpDate != DATE(q.insertDate), @firstDate := DATE(q.insertDate), @firstDate := @firstDate) as seeIfDateChanged, @tmpDate := q.insertDate, q.*, TIMEDIFF(q.insertDate, @firstDate) AS timeDifference
FROM (
SELECT
*
FROM
yourTable yt
, (SELECT @firstDate:=NULL, @tmpDate:=NULL) r
ORDER BY insertDate
) q 
```

# php - 在 PHP 中替换字符串中的命名“参数”

> ID：12745720
> 
> 赞同：0
> 
> 时间：2012-10-05T11:54:14.790
> 
> 标签：php, string, parameters, preg-replace, laravel

## 解决了：

感谢@SJFrK，我的问题已经解决。下面的课程让我可以做我需要的事情。问题跟在课堂后面。

```
class Redirects
{
    /*
    |--------------------------------------------------------------------------
    | Placeholder Types
    |--------------------------------------------------------------------------
    |
    | An array of placeholder types thatalow specific characters in a source
    | route or URL.
    |
    */

    private static $placeholders = array(
        ':all' => '.*',
        ':alpha' => '[a-z]+',
        ':alphanum' => '[a-z0-9]+',
        ':any' => '[a-z0-9\.\-_%=]+',
        ':num' => '[0-9]+',
        ':segment' => '[a-z0-9\-\_]+',
        ':segments' => '[a-z0-9\-\_\/]+',
    );

    /*
    |--------------------------------------------------------------------------
    | Computed Replacements
    |--------------------------------------------------------------------------
    |
    | An array that contains converted source placeholders.
    |
    */

    private static $computed_replacements = array();

    /*
    |--------------------------------------------------------------------------
    | Computed Replacements
    |--------------------------------------------------------------------------
    |
    | Class-scoped string that contains a replacement route or URL from
    | site.redirects.
    |
    */

    private static $destination;

    /**
     * Check for a redirect. If it exists, then redirect to it's computed replacement.
     *
     * @return Response
     */
    public static function redirect()
    {
        // Only do this if redirects have been defined.
        if (Config::has('site.redirects') && count(Config::get('site.redirects') > 0))
        {
            $route = URI::current();

            // Get the available placeholders from static::$placeholders and
            // convert them into applicable options for the pattern.
            $available_placeholders = '';
            foreach (static::$placeholders as $placeholder => $expression)
                $available_placeholders .= ltrim("$placeholder|", ':');
            $available_placeholders = rtrim($available_placeholders, '|');

            // Define the pattern.
            $pattern = '/\((\w+):('.$available_placeholders.')\)/';

            // Get the redirects.
            $redirects = Config::get('site.redirects');

            // For each redirect, convert all the place holders and resulting
            // values, and check for a match. If one exists, then redirect to it.
            foreach ($redirects as $from => $to) {
                static::$computed_replacements = array();
                static::$destination = $to;
                $from = rtrim($from, '/');
                $to = rtrim($to, '/');

                // Convert the placeholders in $from (if any)
                $converted_placeholders = preg_replace_callback($pattern, function($captures) {
                    static::$computed_replacements[] = $captures[1];
                    return '('.static::$placeholders[":{$captures[2]}"].')';
                }, $from);

                // Get the replacements
                $converted_replacements = preg_replace_callback("#^{$converted_placeholders}$#i", function($captures) {
                    $output = static::$destination;
                    for ($c = 1, $n = count($captures); $c < $n; ++$c)
                    {
                        $value = array_shift(static::$computed_replacements);
                        $output = str_replace("<$value>", $captures[$c], $output);
                    }
                    return $output;
                }, $route);

                // If the current route matches the converted expression, then redirect.
                if (preg_match("!^{$converted_placeholders}$!i", $route))
                    return Redirect::to($converted_replacements, 301)
                        ->with('moved-from', $route)
                        ->with('moved-from-rule', "'$from': '".static::$destination."'");
            }
        }
        else return;
    }
} 
```

## 介绍

我正在用[Laravel](http://laravel.com) (FTW) 编写一个静态网站包，并且遇到了一些我似乎无法解决的问题。

该应用程序包含一个配置文件 ( `config/site.php`)，其中 - 除其他外 - 包含一个重定向查找数组。这个想法是检查每个查找 URI 中的匹配项，然后重定向到替换 URI（当然，使用 301 重定向） - 对于那些将静态 HTML 站点移动到我的包的人很有用。

数组的格式为：

```
'redirects' => array(
    '<source>' => '<destination>'
) 
```

在 中`<source>`，用户可以包括以下内容：

1.  常用表达
2.  Laravel 风格的占位符：`(:any)`, `(:all)`, `(:num)`, 或`(:alpha)`- 我添加了最后一个。

例如，用户可以使用以下重定向（请注意，我选择使用角括号，`<destination>`因为它更美观一些 - 它被转换回它的正则表达式等效[参见下面的类]）：

```
'(:all).html' => '<1>' 
```

这会将任何以结尾的页面定向`.html`到不包含它的路由。示例：`http://example.com/about.html`将重定向到`http://example.com/about`.

## 问题

我希望能够“命名”每个参数以便于阅读（和愉快的编码）。我想做的是命名每个占位符`<source>`（当然这是可选的），并定义一个占位符类型。例如：

```
'(name:all).html' => '<name>' 
```

现在，考虑到可以命名占位符*，*它们自然可以在 中按任何顺序排列`<destination>`，例如（注意目标 URI 中的顺序变化）：

```
'Products/(name:any)-(category:any)-(id:num).html' => 'products/<category>/<id>/<name>/overview' 
```

使用常规占位符语法，我*可以*将其解释为：

```
'Products/(:any)-(:any)-(:num).html' => 'products/<2>/<3>/<1>' 
```

无论如何，这是后备方案 - 我需要找出如何使用相应的捕获组替换名称`preg_replace`。但似乎不可能使用命名参数/捕获：

### 命名参数

一个简单的方法是在 中使用命名参数`preg_replace`，但是（据我所知）PHP 不支持它。

使用这种方法将使我能够使用相同类型的替换工具来完成任务 - 所以没有它可用有点令人失望。

尽管如此，我很高兴恢复到更复杂的东西（无论如何这是一件好事）。问题是，我不知道怎么做——而且我还没有找到解决方案。我看过[Silex](http://silex.sensiolabs.org/) `RouteCompiler`类，但不完全理解。我觉得，考虑到 Laravel 的主干是建立在 Symfony 组件集（很像 Silex）之上的，可能有更好的方法来完成我所需要的。

有没有人有同样的要求，也许找到了解决方案？这里的任何帮助都非常棒！提前致谢。

## 当前课程

这是处理重定向的类的源代码。我只是调用`Redirects::handle()`我的`routes.php`文件。

```
class Redirects
{
    private static $placeholders = array(
        ':any' => '[a-zA-Z0-9\.\-_%=]+',
        ':num' => '[0-9]+',
        ':alpha' => '[a-z]+', //added
        ':all' => '.*',
    );

    private static $replacement_identifiers = array(
        '(\<([0-9]+)\>)' => '$$1',
    );

    /**
     * Create the applicable regex placeholders
     *
     * @param  string  &$from
     * @param  string  &$to
     * @return void
     */
    protected static function placeholders(string &$from, string &$to)
    {
        // Replace the <source> with a match expression
        foreach (static::$placeholders as $placeholder => $expression)
            $from = str_replace("({$placeholder})", "({$expression})", $from);

        // Replace the <destination> with a replacement expression
        foreach (static::$replacement_identifiers as $identifier => $expression)
            if (preg_match($identifier, $to))
                $to = preg_replace($identifier, $expression, $to);
    }

    /**
     * Return the response of any redirects, or void if none
     *
     * @return Response|void
     */
    public static function handle()
    {
        $route = URI::current();
        if (Config::has('site.redirects'))
        {
            $redirects = Config::get('site.redirects');
            foreach ($redirects as $from => $to) {
                $from = rtrim($from, '/');
                static::placeholders($from, $to);
                if (preg_match("!^{$from}$!i", $route))
                {
                    if (strpos($to, '$') !== false and strpos($from, '(') !== false)
                        $to = preg_replace("!^{$from}$!i", $to, $route);
                    return Redirect::to($to, 301)->with('Moved-From', $route);
                }
                else return;
            }
        }
        else return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:05:28.440

这是一个测试用例，可以满足您的要求，也许您可​​以将其合并到您的课程中？：

```
<?php
class Redirects {
private static $placeholders = array(
    ':any' => '[a-zA-Z0-9\.\-_%=]+',
    ':num' => '[0-9]+',
    ':alpha' => '[a-z]+', //added
    ':all' => '.*',
);

private static $tmp;
private static $tmpValue;

public static function handle() {
    $case = array('Products/(name:any)-(category:any)-(id:num).html' => 'products/<category>/<id>/<name>/overview');
    $test = 'Products/productName-categoryName-123.html';       // products/categoryName/123/productName/overview

    $pattern = '/\(\s*?(\w*?)\s*?:\s*?(\w*?)\s*?\)/';

    foreach ($case as $k => $v) {
        self::$tmp = array();
        self::$tmpValue = $v;

        $step1 = preg_replace_callback($pattern, array(self, 'replace_step1'), $k);
        $step2 = preg_replace_callback('#' . $step1 . '#', array(self, 'replace_step2'), $test);

        print 'case: ' . $k . '<br>';
        print 'step1: ' . $step1 . '<br>';
        print 'step2: ' . $step2 . '<br>';
    }
}

private static function replace_step1($matches) {
    self::$tmp[] = $matches[1];

    return '(' . self::$placeholders[':' . $matches[2]] . ')';
}

private static function replace_step2($matches) {
    $str = self::$tmpValue;

    for ($i = 1, $n = count($matches); $i < $n; ++$i) {
        $value = array_shift(self::$tmp);

        $str = str_replace('<' . $value . '>', $matches[$i], $str);
    }

    return $str;
}
}

Redirects::handle(); 
```

它首先用真正的 PREG 占位符替换您命名的占位符，并将它们存储在一个数组`$tmp`中。然后它检查测试字符串`$test`是否匹配该模式`$step1`并根据`$tmp`数组替换它们。

# java - 在 git update 中出现错误

> ID：12745724
> 
> 赞同：0
> 
> 时间：2012-10-05T11:54:17.390
> 
> 标签：java, git, openshift

我正在使用`RedHat Openshift`云。

我做了一件事（也许是一个错误：（）：从我的`java & webapp`文件夹中，我删除了我的整个包，然后再次将这些包复制粘贴到`java & webapp`文件夹中。

问题：现在每当我尝试从命令提示符更新我的应用程序时：比如

```
`git add .` 

`git commit -m "My message"` 
```

//这里我得到错误即

```
# On branch master
nothing to commit (working directory clean) 
```

`git push //Can't goto the 3rd step.`

任何解决方案......用于更新我的最新代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:03:26.787

遵循这个过程，我希望它可以帮助你

```
git checkout master

git branch test

git checkout test

git push origin test

git add (files to add)

git commit -m "Message"

git push origin +test 
```

试试这个与主人合并：

```
git checkout master

git merge test 
```

# c# - 如何从（我认为）没有标准格式的 XML 中检索值？

> ID：12745729
> 
> 赞同：1
> 
> 时间：2012-10-05T11:54:21.010
> 
> 标签：c#, xml, linq

我似乎找不到有同样问题的文章。

我有一个这样的 XML 文件：

```
<user id="" name="" termsofuse="http://boardgamegeek.com/xmlapi/termsofuse">
<firstname value="" /> 
<lastname value="" /> 
<avatarlink value="N/A" /> 
<yearregistered value="" /> 
<lastlogin value="2012-10-04" /> 
<stateorprovince value="" /> 
<country value="" /> 
<webaddress value="" /> 
<xboxaccount value="" /> 
<wiiaccount value="" /> 
<psnaccount value="" /> 
<battlenetaccount value="" /> 
<steamaccount value="" /> 
<traderating value="363" /> 
</user> 
```

我正在使用以下代码来提取数据：

```
static string QueryTheData(XDocument doc)
{
  var data = from item in doc.Descendants("user")
             select new
             {
               avatarlink = item.Element("avatarlink").Value,
               lastlogin = item.Element("lastlogin").Value,
             };
  var t = "";
  foreach (var p in data)
    t += p.ToString();
  return t;
} 
```

但是我返回的值是空的。我想知道是不是因为 XML 文件开始了：

```
<user id="" name="" termsofuse="http://boardgamegeek.com/xmlapi/termsofuse"> 
```

而在我发现的所有示例中，XML 的开头是这样的：

```
<user> ... etc 
```

如何以这种格式读取这些值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:03:35.780

您想获取属性的值`value`。试试这个

```
avatarlink = item.Element("avatarlink").Attribute("value").Value 
```

但我会走这条路

```
var list = doc.Descendants("user")
        .Select(u=>u.Elements().ToDictionary(e=>e.Name.LocalName,e=>e.Attribute("value").Value))
        .ToList(); 
```

最终列表的每个项目都包含一个元素字典及其值

```
var lastlogin = list[0]["lastlogin"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:02:39.400

Value 属性正在读取节点的值，您可能正在寻找类似的内容：

```
(string)item.Element("avatarlink").Attribute("value") 
```

# hibernate - 理解 EntityManager 的合并操作的行为

> ID：12745730
> 
> 赞同：1
> 
> 时间：2012-10-05T11:54:28.160
> 
> 标签：hibernate, jpa, jpa-2.0, ejb-3.0

想象一下简单的“树”JPA 实体：

```
public class TreeItem {
  @OneToMany(mappedBy = "parentItem")
  private List<TreeItem> childItems;
  @ManyToOne
  @JoinColumn(name = "parent_id"
  private TreeItem parentItem;
  @Column
  private String name;
} 
```

现在，这些实体之一正在被加载、传递到 Web 层、更新并传递回 EJB 以进行保存操作。我注意到的是，在`merge()`操作过程中，在发出`update`sql 命令之前加载整个树，无论该实体在树中驻留多深。为什么会这样？我看不出这种行为背后的任何原因，因为我没有设置级联选项。

**更新：** 是的，传回的实体是分离的，需要将其状态与数据库层同步，这就是我所理解的。但我不明白的是，为什么同步需要阅读整棵树，而不考虑关系的懒惰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:55:33.740

以下是规范如何定义合并操作：

应用于实体 X 的合并操作的语义如下：

*   如果 X 是分离实体，则 X 的状态被复制到具有相同身份的预先存在的受管实体实例 X' 上，或者创建 X 的新受管副本 X'。
*   如果 X 是一个新的实体实例，则创建一个新的托管实体实例 X'，并将 X 的状态复制到新的托管实体实例 X'。
*   如果 X 是已移除的实体实例，则合并操作将抛出 IllegalArgumentException（或事务提交将失败）。
*   如果 X 是一个托管实体，则合并操作将忽略它，但是，如果这些关系已使用级联元素值 cascade=MERGE 或 cascade=ALL 注释进行注释，则合并操作将级联到由来自 X 的关系引用的实体。
*   对于由来自 X 的具有级联元素值 cascade=MERGE 或 cascade=ALL 的关系引用的所有实体 Y，Y 被递归地合并为 Y'。对于由 X 引用的所有此类 Y，X' 设置为引用 Y'。（请注意，如果 X 是托管的，则 X 是与 X' 相同的对象。）
*   如果 X 是合并到 X' 的实体，并引用另一个实体 Y，其中未指定 cascade=MERGE 或 cascade=ALL，则从 X' 导航相同关联会产生对托管对象 Y' 的引用，其中与 Y 相同的持久身份。

持久性提供程序不得合并标记为 LAZY 且尚未获取的字段：合并时必须忽略此类字段。

实体使用的任何版本列必须在合并操作期间和/或在刷新或提交时由持久性运行时实现检查。在没有版本列的情况下，持久性提供程序运行时不会在合并操作期间进行额外的版本检查。

因此，除非您传递的分离对象将 parentItem 作为惰性引用或 null，否则需要从数据库中获取其状态以与分离实例同步。

# asp.net - AspxGridView 可见行数

> ID：12745733
> 
> 赞同：0
> 
> 时间：2012-10-05T11:54:41.527
> 
> 标签：asp.net

我在 aspxpagecontrol 中有一个嵌套的 aspxgridview。当我单击某个按钮时，我想获取网格中的行数。没关系。但是当我使用过滤器并且在网格中没有行时，单击某个按钮，我仍然得到 1000 行，但没有行可见。

我不知道，问题出在哪里：/

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:07:48.980

尝试在数据绑定事件中使用 VisibleRowCount 时，我遇到了类似的问题。我向 devexpress 提出了[支持票，](http://www.devexpress.com/Support/Center/Question/Details/Q458877)他们说尝试使用 BeforeGetCallbackResult。

没有看到你的代码很难说，但也许你可以将 RowCount 存储在一个变量中，并将它设置在 DataBound 和 BeforeGetCallbackResult 事件中。在过滤器期间，它将被设置两次，但 BeforeGetCallbackResult 将覆盖 DataBound 并且您将获得正确的结果。

未能构建一个简单的演示并使用 DevExpress 提出票证，并且您可以在 SO 上使用 DevExpress 标签。

# dynamics-crm-4 - 允许工作流使用交换分拣目录发送电子邮件

> ID：12745736
> 
> 赞同：0
> 
> 时间：2012-10-05T11:54:53.807
> 
> 标签：dynamics-crm-4, exchange-server-2007

我在 CRM 服务器上运行了一个工作流，尝试将文件写入交换上的拾取目录（单独的服务器）

工作流在使用网络服务凭证的 CRM 异步服务中运行。

由于权限，写入文件失败。

拾取目录设置为允许网络服务完全控制

这是发送消息的代码

```
 /*snip - code that reads crm and puts valuse in to a template and builds email */

        SmtpClient SmtpMail = new SmtpClient("MyServerName");
        SmtpMail.DeliveryMethod = SmtpDeliveryMethod.SpecifiedPickupDirectory;
        SmtpMail.PickupDirectoryLocation = @"\\MyServerName\c$\Program Files\Microsoft\Exchange Server\TransportRoles\Pickup\";

        SmtpMail.Send(mail); 
```

我们不能使用 crm 电子邮件活动，因为消息必须来自非 CRM 用户的通用帐户。

知道什么权限可能是错误的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:06:46.953

CRM 异步服务是否确实作为网络帐户运行？此外，您是否尝试过以服务帐户的身份打开浏览器窗口并手动执行操作（以排除简单的权限问题）？

作为另一种方法，您可以尝试从以下位置发送电子邮件：

*   代表“通用管理员帐户”的系统用户记录。
*   或者从队列中保存许可证（队列也可以有邮箱）。

这样，仍然可以在 Crm 中跟踪电子邮件，您不必担心当前遇到的问题 - 我会说这是一个更好的解决方案，不需要自定义开发。

# javascript - YUI 2.x 组件管理

> ID：12745737
> 
> 赞同：0
> 
> 时间：2012-10-05T11:54:55.923
> 
> 标签：javascript, yui, extjs3

嘿伙计们。我目前正在参与一个使用 YAHOO 用户界面 2.9 的项目，我以前没有使用过该项目（尽管我在 EXTJS 方面有很强的背景）。YUI 是否有任何等效的组件管理类，例如 Ext 3.x 中的 Ext.ComponentMgr？Ext.getCmp() 是一种非常强大的方法，例如可以这样写：

```
var myPanel = new Ext.Panel({
id: 'test_panel',
title: 'Test Panel',
renderTo: Ext.getBody(),
width: 200, 
height: 130,
html : '<div>Hello World</div>'
}); 
```

...在脚本中的某处，在创建 myPanel 之后，可能在 AJAX 回调中：

```
Ext.GetCmp('test_panel'); 
```

YUI 是否有类似的东西，或者他们有另一种在我不知道的库中以统一方式处理对象的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:50:02.673

在 YUI 3 中，相当于是 gallery-instancemanager：http: [//yuilibrary.com/gallery/show/instancemanager](http://yuilibrary.com/gallery/show/instancemanager) （它甚至支持惰性构建。）

将其反向移植到 YUI 2 应该非常容易。

# spring-security - oauth2 提供程序端点的处理程序错误没有适配器

> ID：12745739
> 
> 赞同：5
> 
> 时间：2012-10-05T11:55:04.353
> 
> 标签：spring-security, oauth-2.0, resteasy, oauth-provider

我想为我的 Spring 3.1 和[RESTEasy](http://www.jboss.org/resteasy)项目实现 OAuth 2.0。该项目是一个基于 JSON 的 REST 服务。我使用 Spring Security 3.1 和 spring-security-oauth2 版本 1.0.0.RC2（应该是最新的）。到目前为止，我已经使用默认设置进行了 spring 安全设置。我对 OAuth 2.0 也有非常基本的（默认）配置。

我之前用过 REST 服务，效果很好。Spring 安全性似乎也可以正常工作。如果我打开指向我的 REST 服务的链接，我将被重定向到登录页面。登录后，我可以进行 REST 调用，得到预期的结果。

当我打开 het url`localhost:8080/tools-service/oauth/token`或`localhost:8080/tools-service/oauth/error`测试 OAuth 时，我收到错误 500。当我访问时显示以下错误`/oauth/token`。的错误`/oauth/error`是相似的。

`HTTP Status 500 - No adapter for handler [public org.springframework.http.ResponseEntity org.springframework.security.oauth2.provider.endpoint.TokenEndpoint.getAccessToken(java.security.Principal,java.lang.String,java.util.Map)]: Does your handler implement a supported interface like Controller?`

如果我是正确的，这意味着`TokenEndpoint.getAccessToken`函数中存在错误？由于该类是 Spring 框架的一部分（我查看了代码，看起来不错）我认为问题实际上与这些类无关。这让我一无所知。

现在我想知道为什么会发生这种情况以及如何解决这个问题。我考虑了这样一个事实，即我可能不允许在浏览器中访问这些 URL。但是，如果我尝试对 Sparklr2（[Spring OAuth 2.0 示例应用程序](https://github.com/SpringSource/spring-security-oauth/tree/master/samples/oauth2)）进行相同操作，我会收到一条 XML 消息（用于 /oauth2/token）和一个错误页面（用于 /oauth2/error），这与预期的一样。

任何帮助或提示将不胜感激。

* * *

来自 web.xml 的安全相关片段：

```
<filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我的应用程序上下文加载了我创建的以下 security-config.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans
    xmlns="http://www.springframework.org/schema/beans"
    xmlns:sec="http://www.springframework.org/schema/security"
    xmlns:oauth="http://www.springframework.org/schema/security/oauth2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd
                        http://www.springframework.org/schema/security/oauth2
                        http://www.springframework.org/schema/security/spring-security-oauth2.xsd">

    <sec:http auto-config="true">
        <sec:intercept-url pattern="/**" access="ROLE_USER" />
    </sec:http>

    <sec:authentication-manager>
        <sec:authentication-provider>
            <sec:user-service>
                <sec:user name="user1" password="test123" authorities="ROLE_USER" />
                <sec:user name="user2" password="hello123" authorities="ROLE_USER" />
            </sec:user-service>
        </sec:authentication-provider>
    </sec:authentication-manager>

    <sec:global-method-security pre-post-annotations="enabled" proxy-target-class="true">
        <sec:expression-handler ref="oauthExpressionHandler" />
    </sec:global-method-security>

    <bean id="clientDetailsService" class="be.collectortools.rest.service.security.CollectorDetailsServiceImpl" />

    <bean id="tokenStore" class="org.springframework.security.oauth2.provider.token.InMemoryTokenStore" />

    <bean id="tokenServices" class="org.springframework.security.oauth2.provider.token.DefaultTokenServices">
        <property name="tokenStore" ref="tokenStore" />
        <property name="supportRefreshToken" value="true" />
        <property name="clientDetailsService" ref="clientDetailsService"/>
    </bean>

    <oauth:authorization-server
            client-details-service-ref="clientDetailsService"
            token-services-ref="tokenServices">
        <oauth:authorization-code />
        <oauth:implicit />
        <oauth:refresh-token />
        <oauth:client-credentials />
        <oauth:password />
    </oauth:authorization-server>

    <oauth:expression-handler id="oauthExpressionHandler" />

</beans> 
```

CollectorClientDetails 实现只是虚拟代码：

```
@Service
public class CollectorDetailsServiceImpl implements ClientDetailsService {

    @Resource
    private CollectorClientDetailsRepository collectorClientDetailsRepository;

    @Override
    public ClientDetails loadClientByClientId(final String clientId) throws OAuth2Exception {
        CollectorClientDetails dummyClient = new CollectorClientDetails();
        dummyClient.setClientId(clientId);

        return dummyClient;
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T12:19:02.960

在让这个问题冷静几天后，我做了一个新的谷歌搜索。这使我进入了 Spring Source 论坛： http: [//forum.springsource.org/showthread.php?130684](http://forum.springsource.org/showthread.php?130684-OAuth2-No-adapter-for-handler-exception) -OAuth2-No-adapter-for-handler-exception 。

在这里我发现banifou也有同样的问题。Dave Syer 回答了这样的问题：

> 看起来你`<mvc:annnotation-driven/>`从香草火花中移除了。我认为如果您将其放回处理程序适配器中，将为您定义。

Spring security 依赖于 Spring MVC 框架来处理请求和响应。因此，需要包含 MVC 框架并正确设置 Spring 安全 OAuth 才能正常工作。

解决方案是我在我的应用程序上下文中添加了 2 个标签：

*   `<mvc:annotation-driven />`

使 MVC 框架准备好处理注释。这使得@FrameworkEndpoint 正常工作。后一个在 中使用`public class TokenEndpoint`，它给出了错误 500。

*   `<mvc:default-servlet-handler />`

此处理程序会将所有请求转发到默认 Servlet。因此，重要的是它在所有其他 URL HandlerMappings 的顺序中保持在最后。如果您使用`<mvc:annotation-driven>`. （引用自 Spring 文档。）

更多信息可以在这里找到： [注解驱动](https://stackoverflow.com/a/3978283)， [default-servlet-handler](http://static.springsource.org/spring/docs/3.1.0.RELEASE/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-default-servlet-handler)。

```
<?xml version='1.0' encoding='UTF-8'?>

<beans  xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/mvc
                            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <context:component-scan base-package="be.collectortools.rest"/>
    <context:annotation-config/>

    <mvc:annotation-driven />
    <mvc:default-servlet-handler />

    <import resource="classpath:springmvc-resteasy.xml"/>
    <import resource="mongo-config.xml"/>
    <import resource="security-config.xml"/>

</beans> 
```

# c# - 使用 Moq 进行单元测试期间设置属性时出错

> ID：12745742
> 
> 赞同：1
> 
> 时间：2012-10-05T11:55:09.340
> 
> 标签：c#, .net, unit-testing, moq

好吧，假设我有一个像下面这样的课程......

```
public class Foo : IFoo
{
    public string Bar
    {
        get { ... }
    }

    public void Initialize()
    {
        ...
    }
} 
```

...正如你所见，它实现了一个接口，所以我可以模拟它。现在，在我的单元测试中，我正在构建这样的模拟......

```
var mock = new Mock<IFoo>();
mock.SetupProperty(p => p.Bar).SetReturnsDefault("Some static value here."); 
```

...但是，当测试运行时，我收到以下错误...

> System.ArgumentException：属性 IFoo.Bar 是只读的。参数名称：表达式

所以，三个问题：

1.  我究竟做错了什么？
2.  我需要做什么？
3.  你能解释一下我是怎么误解的`SetReturnsDefault`吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T11:58:21.587

显然，错误消息告诉您不能像那样模拟只读属性。相反，请尝试：

```
mock.SetupGet(p => p.Bar).Returns("whatever"); 
```

如果您希望所有未明确设置为返回某个字符串的字符串属性，请执行以下操作：

```
mock.SetReturnsDefault<string>("whatever"); 
// IMPORTANT: don't call mock.SetupGet(p => p.Bar) as it will override default setting 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-05T12:02:30.477

试试这个：-

```
public class Foo : IFoo
{
    priave string bar;
    public string Bar
    {
        get { ... }
        set {bar=value;}
    }

    public void Initialize()
    {
        ...
    }
} 
```

您必须指定 Set。否则它将是只读的。

# javascript - 自动分号插入和返回语句

> ID：12745743
> 
> 赞同：15
> 
> 时间：2012-10-05T11:55:11.420
> 
> 标签：javascript, specifications, ecmascript-5, automatic-semicolon-insertion

您可能知道，ECMAscript 试图变得聪明，如果您没有明确编写分号，它会自动插入*分号。*简单的例子

```
function foo() {
    var bar = 5

    return bar
} 
```

仍将按预期工作。但是，如果你依赖它，有一些警告。如果我们像这样重写那个函数

```
function foo() {
    var bar = 5

    return
    {
        bar: bar
    }
} 
```

..那个函数现在会返回`undefined`，因为解释器会在语句之后插入分号`return`（这就是为什么你总是应该在语句的同一行加上大括号的原因）。

然而，知道了这一切，我现在想知道像下面这样的语句在浏览器和版本之间有多*安全*`return`

```
function foo() {
    var a = true,
        b = true,
        c = false;

    return a 
            && b
            && c;
} 
```

`return statement`我只是在生产环境中写了一个类似的。仅仅因为我知道 ECMAscript 对分号插入不太聪明的“问题”，我现在想知道该代码是否 100% 有效。在我对 FF/Chrome/IE（最新版本）的第一次测试中，这似乎完全没问题，但真的如此吗？

如果除了该行中的语句之外还有其他内容，*自动分号插入*是否会“唤醒” ？`return`任何人都可以提供有关此的实现级别的详细信息吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-05T12:31:08.903

javascript 解释器/编译器非常聪明，只有在之后有有效的 Javascript 时才插入自动分号。

您的代码有效，因为`&& b`它目前不是有效的表达式 - 这就是为什么在结果之后没有插入分号`return a`：

```
return a && b && c; 
```

然而：

```
return (undefined);//implicitely inserted
{
    ....
} 
```

是完全有效的，这就是插入分号的原因。

为了完整起见，请参考规范：[自动分号插入](http://ecma-international.org/ecma-262/5.1/#sec-7.9)。这些例子值得一读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:37:27.743

不是特定于浏览器/实现的，但`Section 7.9 Automatic Semicolon Insertion`ECMAScript[语言规范](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)值得一读。

7.9 自动分号插入

某些 ECMAScript 语句（空语句、变量语句、表达式语句、do-while 语句、continue 语句、break 语句、return 语句和 throw 语句）必须以分号结束。这样的分号可能总是显式地出现在源文本中。然而，为方便起见，在某些情况下，可以从源文本中省略此类分号。这些情况的描述是在这些情况下分号自动插入到源代码令牌流中。

7.9.1 自动分号插入规则 分号插入有三个基本规则：

1.  当从左到右解析程序时，遇到任何语法生成都不允许的标记（称为违规标记）时，如果出现以下一项或多项，则在违规标记之前自动插入分号条件为真：

    *   违规标记与前一个标记至少由一个 LineTerminator 分隔。
    *   有问题的令牌是 }。
2.  当程序从左到右解析时，遇到输入令牌流的结尾，并且解析器无法将输入令牌流解析为单个完整的 ECMAScript 程序，则在末尾自动插入分号输入流。

3.  当程序从左到右解析时，遇到某个语法产生式允许的记号，但产生式是受限制的产生式，并且该记号将是紧跟注释之后的终端或非终端的第一个记号?[这里没有LineTerminator]？在受限产生式中（因此这样的记号称为受限记号），并且受限记号与前一个记号由至少一个 LineTerminator 分隔，然后在受限记号之前自动插入分号。但是，上述规则还有一个额外的覆盖条件：如果分号随后将被解析为空语句，或者如果该分号将成为 for 语句标题中的两个分号之一，则永远不会自动插入分号（参见12.6.3)。注意 以下是语法中唯一受限制的产生式： PostfixExpression : LeftHandSideExpression [no LineTerminator here] ++ LeftHandSideExpression [no LineTerminator here] -- ContinueStatement : continue [no LineTerminator here] Identifier ; BreakStatement : break [no LineTerminator here] Identifier ; ReturnStatement : return [no LineTerminator here] Expression ; ThrowStatement : throw [no LineTerminator here] Expression ; 这些限制产生式的实际效果如下：当遇到一个 ++ 或 -- 标记时，解析器会将其视为后缀运算符，并且在前面的标记和 ++ 或 -- 标记之间至少出现了一个 LineTerminator , 然后在 ++ 或 -- 标记之前自动插入一个分号。当一个继续，中断，返回，或者遇到 throw 标记并且在下一个标记之前遇到 LineTerminator，在 continue、break、return 或 throw 标记之后会自动插入一个分号。对 ECMAScript 程序员的实际建议是：后缀 ++ 或 -- 运算符应与其操作数出现在同一行。return 或 throw 语句中的 Expression 应与 return 或 throw 标记在同一行开始。break 或 continue 语句中的标识符应与 break 或 continue 标记位于同一行。return 或 throw 语句中的 Expression 应与 return 或 throw 标记在同一行开始。break 或 continue 语句中的标识符应与 break 或 continue 标记位于同一行。return 或 throw 语句中的 Expression 应与 return 或 throw 标记在同一行开始。break 或 continue 语句中的标识符应与 break 或 continue 标记位于同一行。

7.9.2 自动分号插入示例

来源

```
{ 1 2 } 3 
```

不是 ECMAScript 语法中的有效句子，即使使用自动分号插入规则也是如此。相比之下，源

```
{ 1
2 } 3 
```

也不是有效的 ECMAScript 语句，而是通过自动插入分号转换为以下语句：

```
{ 1
;2 ;} 3; 
```

这是一个有效的 ECMAScript 语句。来源

```
for (a; b
) 
```

不是有效的 ECMAScript 语句，并且不会被自动分号插入更改，因为 for 语句的标题需要分号。自动分号插入永远不会在 for 语句的标题中插入两个分号之一。来源

```
return
a + b 
```

通过自动分号插入转换为以下内容：

```
return;
a + b; 
```

注意 表达式 a + b 不被视为要由 return 语句返回的值，因为 LineTerminator 将它与令牌返回分开。来源

```
a = b
++c 
```

通过自动分号插入转换为以下内容：

```
a = b;
++c; 
```

注意 标记 ++ 不被视为应用于变量 b 的后缀运算符，因为 LineTerminator 出现在 b 和 ++ 之间。来源

```
if (a > b)
else c = d 
```

不是一个有效的 ECMAScript 语句，并且不会被 else 标记之前的自动分号插入改变，即使此时没有应用语法产生，因为自动插入的分号将被解析为空语句。来源

```
a = b + c
(d + e).print() 
```

不会通过自动分号插入进行转换，因为从第二行开始的带括号的表达式可以解释为函数调用的参数列表：

```
a = b + c(d + e).print() 
```

在赋值语句必须以左括号开头的情况下，程序员最好在前面的语句末尾提供一个明确的分号，而不是依赖于自动分号插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:35:45.000

正如 Christoph 指出的那样，您的 return 语句将在所有浏览器中正常工作。我确实更喜欢让它更加明确，如果不是针对计算机，而是针对人类，至少通过不同地放置 and 运算符：

```
return a &&
       b &&
       c; 
```

在这种情况下，没有人需要花一秒钟的时间来思考自动分号是否会造成严重破坏。我只喜欢 JavaScript，你的原始代码更容易阅读。

# java - 休眠、@SequenceGenerator 和 allocationSize

> ID：12745751
> 
> 赞同：138
> 
> 时间：2012-10-05T11:55:35.160
> 
> 标签：java, hibernate, jpa, hilo

我们都知道 Hibernate 在使用时的默认行为`@SequenceGenerator`——它将真实数据库序列增加**一**，将此值乘以 50（默认`allocationSize`值）——然后将此值用作实体 ID。

这是不正确的行为，并且与说明的[规范](http://docs.oracle.com/javaee/5/api/javax/persistence/SequenceGenerator.html)冲突：

> allocationSize - （可选）从序列中分配序列号时增加的数量。

需要明确的是：我不关心生成的 ID 之间的差距。

我关心与底层数据库序列**不一致的 ID。**例如：任何其他应用程序（例如使用普通 JDBC）可能希望在从序列获得的 ID 下插入新行 - 但所有这些值可能已经被 Hibernate 使用！疯狂。

有人知道这个问题的任何解决方案（没有设置`allocationSize=1`并因此降低性能）吗？

**编辑：**
说清楚。如果最后插入的记录 ID = `1`，则 HB`51, 52, 53...`同时使用其新实体的值：数据库中的序列值将设置为`2`。当其他应用程序使用该序列时，这很容易导致错误。

另一方面：规范说（在我的理解中）数据库序列应该设置为`51`，同时 HB 应该使用范围内的值 `2, 3 ... 50`

**更新：**
正如 Steve Ebersole 在下面提到的：我描述的行为（对许多人来说也是最直观的）可以通过设置来启用`hibernate.id.new_generator_mappings=true`。

谢谢大家。

**更新 2：**
对于未来的读者，您可以在下面找到一个工作示例。

```
@Entity
@Table(name = "users")
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "USERS_SEQ")
    @SequenceGenerator(name = "USERS_SEQ", sequenceName = "SEQUENCE_USERS")
    private Long id;
} 
```

持久性.xml

```
<persistence-unit name="testPU">
  <properties>
    <property name="hibernate.id.new_generator_mappings" value="true" />
  </properties>
</persistence-unit> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-05T13:35:31.900

绝对清楚...您所描述的内容与规范没有*任何*冲突。该规范讨论了 Hibernate 分配给您的实体的值，而不是实际存储在数据库序列中的值。

但是，可以选择获取您正在寻找的行为。首先查看我关于[Is there a way to dynamic selection a @GeneratedValue strategy using JPA annotations and Hibernate?](https://stackoverflow.com/questions/12737092/is-there-a-way-to-dynamically-choose-a-generatedvalue-strategy-using-jpa-annota) 这将为您提供基础知识。只要您设置为使用该 SequenceStyleGenerator，Hibernate 就会`allocationSize`使用 SequenceStyleGenerator 中的“池化优化器”进行解释。“池化优化器”用于允许在创建序列时使用“增量”选项的数据库（并非所有支持序列的数据库都支持增量）。无论如何，请阅读那里的各种优化器策略。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-05T12:04:09.050

`allocationSize=1`这是在获取查询之前的一个微优化 Hibernate 尝试在 allocationSize 范围内分配值，因此尽量避免查询数据库的序列。但是，如果您将其设置为 1，则每次都会执行此查询。这几乎没有任何区别，因为如果您的数据库被其他应用程序访问，那么如果另一个应用程序同时使用相同的 id，则会产生问题。

下一代Sequence Id 基于allocationSize。

默认情况下，它被保留为`50`太多。如果您将`50`在一个会话中拥有未持久化的记录并且将使用此特定会话和事务进行持久化，它也只会有所帮助。

因此，您应该始终在使用`allocationSize=1`时使用`SequenceGenerator`. 对于大多数底层数据库序列总是递增`1`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T19:13:42.947

我会检查模式中的序列的 DDL。JPA 实现只负责创建具有正确分配大小的序列。因此，如果分配大小为 50，那么您的序列在其 DDL 中必须有 50 的增量。

这种情况通常会在创建分配大小为 1 的序列时发生，然后稍后将其配置为分配大小 50（或默认值），但序列 DDL 未更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-28T19:46:39.080

Steve Ebersole 和其他成员，
您能解释一下为什么 id 的差距更大（默认为 50）吗？我正在使用 Hibernate 4.2.15 并在 org.hibernate.id.enhanced.OptimizerFactory cass 中找到以下代码。

```
if ( lo > maxLo ) {
   lastSourceValue = callback.getNextValue();
   lo = lastSourceValue.eq( 0 ) ? 1 : 0;
   hi = lastSourceValue.copy().multiplyBy( maxLo+1 ); 
}  
value = hi.copy().add( lo++ ); 
```

每当它到达 if 语句的内部时，hi 值就会变得更大。因此，我的 id 在频繁重启服务器的测试期间会生成以下序列 id：
1、2、3、4、19、250、251、252、400、550、750、751、752、850、1100、1150。

我知道您已经说过它与规范没有冲突，但我相信这对于大多数开发人员来说将是非常意外的情况。

任何人的意见都会很有帮助。

志焕

更新：ne1410s：感谢您的编辑。
克里克：好的。我去做。这是我在这里的第一篇文章，不知道如何使用它。

现在，我更好地理解了为什么使用 maxLo 有两个目的：由于 hibernate 调用一次 DB 序列，不断增加 Java 级别的 id，并将其保存到 DB，Java 级别的 id 值应该考虑在没有调用的情况下更改了多少下次调用序列时的 DB 序列。

例如，序列 id 在某一点为 1，而休眠输入 5、6、7、8、9（allocationSize = 5）。下一次，当我们得到下一个序列号时，DB返回2，但是hibernate需要使用10、11、12......所以，这就是为什么“hi = lastSourceValue.copy().multiplyBy(maxLo+1)”是用于从 DB 序列返回的 2 中获取下一个 id 10。似乎唯一令人烦恼的事情是在频繁的服务器重启期间，这是我与较大差距的问题。

因此，当我们使用 SEQUENCE ID 时，表中插入的 id 将与 DB 中的 SEQUENCE 编号不匹配。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-03T22:52:17.707

在深入研究休眠源代码和下面的配置后，在 50 次插入后转到 Oracle db 以获得下一个值。因此，每次调用 INST_PK_SEQ 时都要增加 50。

Hibernate 5 用于以下策略

还要检查以下 [http://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#identifiers-generators-sequence](http://docs.jboss.org/hibernate/orm/5.1/userguide/html_single/Hibernate_User_Guide.html#identifiers-generators-sequence)

```
@Id
@Column(name = "ID")
@GenericGenerator(name = "INST_PK_SEQ", 
strategy = "org.hibernate.id.enhanced.SequenceStyleGenerator",
parameters = {
        @org.hibernate.annotations.Parameter(
                name = "optimizer", value = "pooled-lo"),
        @org.hibernate.annotations.Parameter(
                name = "initial_value", value = "1"),
        @org.hibernate.annotations.Parameter(
                name = "increment_size", value = "50"),
        @org.hibernate.annotations.Parameter(
                name = SequenceStyleGenerator.SEQUENCE_PARAM, value = "INST_PK_SEQ"),
    }
)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "INST_PK_SEQ")
private Long id; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-01T12:57:31.980

我在 Hibernate 5 中也遇到过这个问题：

```
@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = SEQUENCE)
@SequenceGenerator(name = SEQUENCE, sequenceName = SEQUENCE)
private Long titId; 
```

收到如下警告：

> 发现使用了已弃用的 [org.hibernate.id.SequenceHiLoGenerator] 基于序列的 id 生成器；改用 org.hibernate.id.enhanced.SequenceStyleGenerator。有关详细信息，请参阅 Hibernate 域模型映射指南。

然后将我的代码更改为 SequenceStyleGenerator：

```
@Id
@GenericGenerator(name="cmrSeq", strategy = "org.hibernate.id.enhanced.SequenceStyleGenerator",
        parameters = {
                @Parameter(name = "sequence_name", value = "SEQUENCE")}
)
@GeneratedValue(generator = "sequence_name")
private Long titId; 
```

这解决了我的两个问题：

1.  已弃用的警告已修复
2.  现在根据 oracle 序列生成 id。

# c# - 在 LinqToSql 中使用封闭跟踪更改将新实体插入数据库

> ID：12745754
> 
> 赞同：1
> 
> 时间：2012-10-05T11:55:47.410
> 
> 标签：c#, .net, linq-to-sql

当我尝试将新实体添加到 db 时，Datacontext 抛出“当前 datacontext 实例未启用对象跟踪”异常，如下所示。

```
db.Posts.InsertOnSubmit(new entity); 
```

启用跟踪更改对我来说不是一个解决方案，因为当我有很多插入操作时它太慢了。

在这种情况下有什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T11:13:37.073

你不能一边吃蛋糕一边吃。

根据您的数据库结构，您可以考虑使用两个数据上下文。一个启用了更改跟踪，一个禁用了。

但是，每条记录仍然有一个插入语句。这就是 linq-2-sql 的运作方式，在 l-2-s 中没有解决方案。您必须查看`SqlBulkCopy`类以进行批量插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:21:44.943

通常启用和禁用对象跟踪只是连接或忽略更改跟踪事件处理程序。如果您尝试插入如此多的项目以致在尝试连接这些事件时变得太慢，那么您将遇到更大的问题。

请记住，LINQ to SQL 将为您添加的每条记录发出单独的数据库请求。这里的网络瓶颈肯定比仅仅连接更改跟踪事件是一个更大的问题。LINQ to SQl 不是批量插入的最佳选择。考虑对这种操作使用 SSIS/批量复制。

# python - 使用 globals() 创建类对象

> ID：12745756
> 
> 赞同：3
> 
> 时间：2012-10-05T11:55:51.493
> 
> 标签：python, globals, locals

我是编程新手，所以请不要因为问愚蠢的问题而杀了我。我一直在尝试了解 Python 中的所有此类业务，但我已经到了仅通过谷歌就无法找到我的问题的答案的地步。

在我的程序中，我需要根据函数返回的字符串从其他类中调用一个类。我找到了两种解决方案：一种是使用`getattr()`，另一种是使用`globals()`/ `locals()`。

决定寻求第二个解决方案并让它工作，但我真的不明白它是*如何*工作的。

于是就有了代码示例：

```
class Test(object):
    def __init__(self):
        print "WORKS!"

room = globals()['Test'] 
room() 
```

`type(room())`给出：

```
<class '__main__.Test'> 
```

`type(room)`给出：

```
<type 'type'> # What???? 
```

它看起来像是`room()`一个类对象，但不应该`room`代替`room()`吗？

请帮助我，因为如果我编写一个我自己不理解的代码有点傻。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:05:14.373

这里发生的情况如下：

```
class Test(object):
    def __init__(self):
        print "WORKS!"

room = globals()['Test'] 
```

在这里你得到`Test`了`room`你想要的方式。验证这一点：

```
room is Test 
```

应该给`True`。

> `type(room())`给出：
> 
> ```
> <class '__main__.Test'> 
> ```

您向后退一步：`room()`返回与将相同的`Test()`- 该类的实例。`type()`“撤消”这一步。获取对象的类型 - 这当然是`Test`.

> `type(room)`给出：
> 
> ```
> <type 'type'> # What???? 
> ```

当然 - 它是（新样式）类的类型。与 相同`type(Test)`。

* * *

但是请注意，对于

> 在我的程序中，我需要根据函数返回的字符串从其他类中调用一个类。我找到了两种解决方案：一种是使用`getattr()`，另一种是使用`globals()`/ `locals()`。

最好创建一个明确单独的字典。在这里，您可以完全控制在该上下文中允许哪些对象/类/...，哪些不允许。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:01:07.710

首先，我会选择`getattr`。

在您的示例中，`room`等于`Test`并且是一个类。它的类型是`type`.

当您调用时`room()`，您将实例化`Test`，因此`room()`计算为 的实例`Test`，其类型为`Test`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T14:31:38.813

在 Python 中，类也是对象。所有这一切：

```
class Test(object):
    def __init__(self):
        print "WORKS!" 
```

是创建一个类对象并将其绑定到 name `Test`。就像这样：

```
x = [] 
```

创建一个列表对象并将其绑定到 name `x`。

`Test()`不是创建实例的神奇语法。这`Test`是非常普通的变量查找，`()`也是非常普通的“使用空参数调用”。碰巧调用一个类将创建该类的一个实例。

如果遵循那么您将基于将类名称作为字符串选择的类实例化的问题归结为查找存储在变量中的对象的简单得多的问题。`x`给定字符串，这与将列表绑定到 name 完全相同的问题`"x"`。一旦您在任何旧变量中获得了对该类的引用，您就可以简单地调用它来创建您的实例。

`globals()`返回一个字典，将全局变量的名称映射到它们的值。因此`globals()['Test']`，您将获得课程`Test`，就像`globals()['x']`获得列表一样容易。然而，这样使用通常不被认为是很好的风格`globals()`；如果可以使函数返回它们的名称，您的模块可能包含大量可调用对象（包括从其他模块导入的一堆），您不希望被意外调用。鉴于类只是普通对象，您可以将它们放入自己制作的字典中：

```
classes = {
    'Test': Test,
    'SomethingElse': Something,
    ...
} 
```

这涉及更多的输入，但也更容易看到预期的用途，并且它为您提供了更多的灵活性，因为您还可以轻松地将此字典传递给其他模块并在其他地方进行实例化（您*可以*这样做，`globals()`但是你会变得很奇怪）。

现在，`type(room)`暂时`type`。同样，这只是类本身也是对象这一事实的简单结果。如果一个类是一个对象，那么它也应该是某个类的一个实例。那是什么课？`type`，“类型的类型”。就像任何类定义其所有实例的共同行为一样，该类`type`定义所有类的共同行为。

而只是为了让你的大脑受伤，`type`是它自己的一个实例（因为`type`也是一个类，并且`type`是类的类）。它是`object`（因为所有`type`实例都是`object`实例，但并非所有`object`实例都是`type`实例）的子类，也是`object`（因为`object`是所有事物都是实例的根类）的实例。

但是，您通常可以`type`将其视为高级主题而忽略。:)

# web-services - Demandware 中的 Web 服务应用程序

> ID：12745759
> 
> 赞同：6
> 
> 时间：2012-10-05T11:55:57.827
> 
> 标签：web-services, demandware

我需要开发 WAS 应用程序并且应该托管到 Demandware 平台中。我可以使用 tomcat 开发 WAS 应用程序并将其托管到 Demandware 中还是应该在 Demandware 平台中开发 WAS 应用程序？

我是 Demanware 平台和 WAS 的新手。引导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T21:53:27.153

您不能像您所描述的那样在 UX Studio 范式之外构建 Web 服务，但您可以在 UX Studio 中构建类似管道的伪服务，它返回 JSON、XML 等，它或多或少就像任何其他 REST 一样工作服务。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T16:15:53.460

Demandware 是软件即服务 (SaaS) 提供商，它不允许您访问底层基础架构（例如 Tomcat 服务器、Oracle DB 等）来制作/安装您的自定义扩展。

更新（25.09.2015）：目前 Demandware 正在对其控制器进行扩展，从基于管道的控制器迁移到基于脚本的控制器。有可能在某些时候他们甚至可能会引入用于创建 Web 服务的 API。

在这种情况发生之前，您唯一的选择是制作一些自定义管道并利用 XML/JSON over HTTP 之类的东西来实现此类功能。（或者，如果您坚持将其作为基于 SOAP 的服务，则需要使用显式代码解析 SOAP 信封）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T19:32:24.380

Demandware 平台是一项专有技术，仅允许使用他们的沙箱和自己的 IDE“UX Studio”进行开发。所有这些东西都可以在他们的[xchange 门户](http://xchange.demandware.com)上供需求软件开发人员使用。您为其开发的商家可能会要求访问那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-29T12:37:11.580

Demandware 的核心框架对第三方是封闭的，并通过 Demandware 脚本和 REST API 以及 Demandware 自己的 Pipelet 系统公开。遗憾的是您无法在 Demandware 服务器中部署外部应用程序，我们必须在 UX 工作室中单独创建新应用程序您可以在 Demandware Wiki 或 Exchange 上获得适当的帮助

# unit-testing - 在 CakePHP 测试中显示断言的结果和期望值

> ID：12745760
> 
> 赞同：0
> 
> 时间：2012-10-05T11:55:59.823
> 
> 标签：unit-testing, cakephp, netbeans, phpunit, assertion

有谁知道是否有办法强制 CakePHP TestSuite 在失败时查看断言的预期值和结果值？默认情况下，典型的 PHPUnit 测试在输出中显示它，而不是 Cake 的 TestSuite（使用 PHPUnit）。另一方面，当我在 NetBeans 中调试测试用例时，每当我尝试为变量设置监视时，我都会得到某种 Socket 异常，并且它只发生在 CakePHP 测试用例中，它在每个其他源文件中都可以正常工作。这也有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:46:15.650

Ok I somehow worked it out tho the solution will be wiped when u update the Cake Library files. You need to edit the file `lib\Cake\TestSuite\Reporter\CakeHtmlReporter` and change the method:

```
public function paintFail($message, $test) 
{
    $trace = $this->_getStackTrace($message);
    $testName = get_class($test) . '(' . $test->getName() . ')';
    echo "<li class='fail'>\n";
    echo "<span>Failed</span>";
    echo "<div class='msg'><pre>" . $this->_htmlEntities($message) . "</pre></div>\n";
    echo "<div class='msg'>" . __d('cake_dev', 'Test case: %s', $testName) . "</div>\n";
    echo "<div class='msg'>" . __d('cake_dev', 'Stack trace:') . '<br />' . $trace . "</div>\n";
    echo "</li>\n";
} 
```

to:

```
public function paintFail($message, $test) {
    $trace = $this->_getStackTrace($message);
    $testName = get_class($test) . '(' . $test->getName() . ')';

    echo "<li class='fail'>\n";
    echo "<span>Failed</span>";
    echo "<div class='msg'><pre>" . $this->_htmlEntities($message->getComparisonFailure()->toString()) . "</pre></div>\n";
    echo "<div class='msg'>" . __d('cake_dev', 'Test case: %s', $testName) . "</div>\n";
    echo "<div class='msg'>" . __d('cake_dev', 'Stack trace:') . '<br />' . $trace . "</div>\n";
    echo "</li>\n";
} 
```

And this will output you something like this when the assertion fails:

```
Failed asserting that two arrays are equal.--- Expected
+++ Actual
@@ @@
 Array (
-    0 => 'Crypto3DS'
-    1 => 'Zlib'
+    1 => 'Crypto3DS'
+    2 => 'Zlib'
 ) 
```

Faster testing in Cake Yeppie :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:57:59.420

查看 [http://www.dereuromark.de/2011/12/04/unit-testing-tips-for-2-0-and-phpunit/](http://www.dereuromark.de/2011/12/04/unit-testing-tips-for-2-0-and-phpunit/)

基本上，您可以扩展 TestCase 类并制作自己的附加方法，例如

```
public function details($is, $expected) {
    echo 'is:' . $is; echo '<br />';
    echo 'expected: ' . $expected; ob_flush(); 
```

}

并在内部调用它或失败时调用它。

或者你只是到处 debug() 。

# php - 在这种情况下使用关联数组还是标准数组更好？

> ID：12745761
> 
> 赞同：1
> 
> 时间：2012-10-05T11:56:02.870
> 
> 标签：php, arrays

我有一个带有标签的复选框列表，我在表单中输出。html 要求有点复杂，所以我将循环通过以使这不那么平凡。

但是，我不确定我是否使用：

```
$array[] = array("Label1", "CheckboxHTML1");
$array[] = array("Label2", "CheckboxHTML2");
$array[] = array("Label3", "CheckboxHTML3");
$array[] = array("Label4", "CheckboxHTML4");

//output
foreach($array as $current)
{
    //complicated html
    echo "<label>$current[0]</label>$current[1]";
} 
```

或者：

```
$array["Label1"] = "CheckboxHTML1";
$array["Label2"] = "CheckboxHTML2";
$array["Label3"] = "CheckboxHTML3";
$array["Label4"] = "CheckboxHTML4";

foreach($array as $key => $checkbox)
{
    //complicated html
    echo "<label>$key</label>$checkbox[1]";
} 
```

一个比另一个有更大的好处吗？我担心使用关联数组，因为一些标签字符串很长，我不确定这是否会导致任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:02:11.407

就密钥的长度而言，您不会有任何问题。作为一般经验法则，当您知道作为开发人员的您将来可能希望根据其名称访问该数据时，最好使用关联数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:01:05.993

PHP 中的字符串大小没有限制。[字符串可以大到 2GB。](http://us.php.net/manual/en/language.types.string.php)

我认为可以假设这适用于数组。我的意思是使用字符串作为键。

我想你应该走最适合你的路。我选择关联数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T12:01:36.290

在每种情况下，您都应该做最自然的事情。存在关联数组，以便您可以通过键有效地检索项目；**如果您打算这样做，请使用它们**。

确实，几乎可以肯定，在构造数组时，长键会稍微影响性能，但“非常长”的定义对于人类和编译器来说并不相同。

# javascript - 如何在 jquery 数组对象中找出特定的字符串？

> ID：12745762
> 
> 赞同：0
> 
> 时间：2012-10-05T11:56:03.507
> 
> 标签：javascript, jquery, html, css

我对 jQuery 数组对象有疑问。让我简要描述一下：我有两个名为`brandsLink`and的数组`floorLink`。当用户单击任何链接时，我将该特定品牌名称存储在一个名为 的变量`brandName`中，并将该变量存储在第二个数组中。如果找到了，我会写一些其他的方法。我附上一张图片以供参考。我认为这会有所帮助。
这是代码：

```
$('document').ready(function() {

    var brandsLink = $('.brandLinks li a[id]');
    var floorLink = $('#orionPlan .mapContainer area[id]');

    brandsLink.click(function(e){
        var brandName = this.id;

        if(brandName == floorLink.find(brandName)){
            console.log('yes both are matching.');
        }
        else {
            console.log('sory.');   
        }
    });
}); 
```

![参考图像](../Images/3e701374906f2f109fd802ab71f9177e.png)

谢谢，纳雷什库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T11:59:36.750

1.  您不能以这种方式使用 ID。ID 在文档中必须是唯一的。
2.  您的`find`呼叫将搜索`'someID'`它应该搜索的时间`'#someID'`
3.  如果您*确实*找到了匹配项，那么您将与`'someID'`DOM 节点进行比较

您需要切换到使用类，或为您的 ID 添加前缀以使其唯一（例如`floor-`，、`brand-`）。您还需要更改比较。

给定以下标记：

```
<ul class="brandLinks">
   <li><a id="brand-zara" data-name="zara">Zara</a></li>
   ...
</ul>

...

<map name="..." class="mapContainer">
   <area id="floor-zara" data-name="zara" shape="rect" coords="..." />
   ...
</map> 
```

您的点击处理程序可能会说：

```
brandsLink.click(function() {
    var name = $(this).data('name'); // name = "zara"
    var match = floorLink.find('#floor-' + name);
    if(match.length > 0) {
        console.log('a matching area was found in floorLink');
    } else {
        console.log('sorry.');
    }
}); 
```

# jsf-2 - 为什么在恢复视图阶段调用 ui:repeat 的属性获取器？

> ID：12745766
> 
> 赞同：0
> 
> 时间：2012-10-05T11:56:31.600
> 
> 标签：jsf-2

> **可能重复：**
> [弄清楚为什么在我不希望调用 JSF getter 时调用它们](https://stackoverflow.com/questions/7078477/figuring-out-why-jsf-getters-are-called-when-i-dont-expect-them-to-be-called)

这是一个简单的测试用例，一次显示一页客户列表：

```
<h:form>
    <h:commandButton action="#{controller.nextPage()}" value="Next" />

    <ui:repeat value="#{controller.customerList}" var="c">
        #{c.name}<br/>
    </ui:repeat>
</h:form>

public String nextPage() {
    //...
    return null;
} 
```

在回发期间，getCustomerList() 在恢复视图、应用请求值和呈现响应阶段被调用。只有在渲染响应阶段调用该方法时才有意义。其他两个调用似乎完全是浪费，除了给数据库带来过多的负载外，没有任何用处。在恢复视图阶段加载列表后，我无法缓存列表，因为必须在渲染响应阶段加载下一页的不同列表。我不希望将托管 bean 存储在会话中，因为这会耗尽内存。

您能否解释一下为什么 JSF 必须调用 ui:repeat 的属性 getter 方法在恢复视图和应用请求值阶段，而当时没有调用托管 bean 的其他属性 getter？谢谢。

# android - Twitter api 集成中的 Accesstoken 错误

> ID：12745770
> 
> 赞同：2
> 
> 时间：2012-10-05T11:56:40.773
> 
> 标签：android, twitter

我是 android 开发的新手，我正在尝试集成 twitter api，但是我收到了这条线的错误：

```
AccessToken a = new AccessToken(token,secret);//error 
```

我的错误是：

> 找不到类 'twitter4j.http.AccessToken'`，引用自方法 com.android.twitter.TwitterUtils.isAuthenticated""

我已经在 libs 文件夹中添加了 4 个库。

我该如何解决这个问题？

# concurrency - 为什么这个 Go 代码会死锁？

> ID：12745771
> 
> 赞同：2
> 
> 时间：2012-10-05T11:56:41.350
> 
> 标签：concurrency, go, deadlock, goroutine

```
package main

import "fmt"
import "runtime"
import "time"

func check(id int) {
    fmt.Println("Checked", id)
    <-time.After(time.Duration(id)*time.Millisecond)
    fmt.Println("Woke up", id)
}

func main() {
    defer runtime.Goexit()

    for i := 0; i <= 10; i++ {
        fmt.Println("Called with", i)
        go check(i)
    }

    fmt.Println("Done for")
} 
```

我对 Go 很陌生，所以任何指针都会很棒。我将如何调试这样的事情？

您可以运行代码片段[http://play.golang.org/p/SCr8TZXQUE](http://play.golang.org/p/SCr8TZXQUE)

**更新**：这在操场上没有线路 `<-time.After(time.Duration(id)*time.Millisecond)`，我想知道为什么？（正如@dystroy 提到的，这可能是因为操场处理时间的方式）

当我在本地尝试时，这是输出：

```
Called with  0
Called with  1
Checked 0
Called with  2
Checked 1
Called with  3
Checked 2
Called with  4
Woke up 0
Checked 3
Called with  5
Checked 4
Called with  6
Checked 5
Called with  7
Checked 6
Called with  8
Checked 7
Called with  9
Checked 8
Called with  10
Checked 9
Woke up 1
Done for
Checked 10
Woke up 2
Woke up 3
Woke up 4
Woke up 5
Woke up 6
Woke up 7
Woke up 8
Woke up 9
Woke up 10
throw: all goroutines are asleep - deadlock!

goroutine 2 [syscall]:
created by runtime.main
    /tmp/bindist046461602/go/src/pkg/runtime/proc.c:221

goroutine 5 [timer goroutine (idle)]:
created by addtimer
    /tmp/bindist046461602/go/src/pkg/runtime/ztime_amd64.c:69
exit status 2 
```

所有的 goroutine 都完成了，但无论如何都会引发死锁。我应该注意，如果使用计时器并不重要，无论哪种方式都会死锁。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T12:01:44.190

从[Goexit 的文档中](http://golang.org/pkg/runtime/#Goexit)：

> Goexit 终止调用它的 goroutine。没有其他 goroutine 受到影响。Goexit 在终止 goroutine 之前运行所有延迟调用。

您正在退出主程序。不。当您这样做时，在您启动的最后一个程序完成后没有任何例程运行`go check(i)`，因此出现“死锁”。只需删除此行：

```
defer runtime.Goexit() 
```

* * *

如果您想要在 main 中等待一组 goroutine 完成，您可以使用[sync.WaitGroup](http://golang.org/pkg/sync/#WaitGroup)：

```
package main

import (
    "fmt"
    "sync"
    "time"
)

func check(id int, wg *sync.WaitGroup) {
    fmt.Println("Checked", id)
    <-time.After(time.Duration(id)*time.Millisecond)
    fmt.Println("Woke up", id)
    wg.Done()
}

func main() {
    var wg sync.WaitGroup
    for i := 0; i <= 10; i++ {
        wg.Add(1)
        fmt.Println("Called with", i)
        go check(i, &wg)
    }
    wg.Wait()
    fmt.Println("Done for")
} 
```

**编辑 ：**

如果你在 golang 的操场上测试它，任何人`time.After`都会死锁，因为操场上的时间被冻结了，Goexit 可能会退出一个标准程序中甚至不存在的例程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:56:23.050

您所有的 goroutine 都在等待某人使用他们发送的值`<-time.After`。您可以删除`<-`或使 main 消耗您启动的所有 goroutine 的值。

**编辑**

这对我有用

```
package main

import "fmt"
//import "runtime"
import "time"

func check(id int) {
    fmt.Println("Checked", id)
    <-time.After(time.Duration(id)*time.Millisecond)
    fmt.Println("Woke up", id)
}

func main() {
    //defer runtime.Goexit()

    for i := 0; i <= 10; i++ {
        fmt.Println("Called with", i)
        go check(i)
    }

    fmt.Println("Done for")
} 
```

女巫与之前有人提出的解决方案相同，所以我将提出一个没有等待组的解决方案

```
package main

import "fmt"
import "time"

func check(id int, c chan bool) {
    fmt.Println("Checked", id)
    time.After(time.Duration(id)*time.Millisecond)
    fmt.Println("Woke up", id)
    c <- true
}

func main() {
    c := make(chan bool)

    for i := 0; i <= 10; i++ {
        fmt.Println("Called with", i)
        go check(i, c)
    }
    var n uint
    for n<10 {
        <- c
        n++
    }
    fmt.Println("Done for")
} 
```

# android - 将图片从android发送到wcf

> ID：12745773
> 
> 赞同：0
> 
> 时间：2012-10-05T11:56:48.620
> 
> 标签：android, image, wcf, upload

我需要将图片从 android 发送到服务 WCF。

我的安卓功能：

```
public void uploadPicture() throws ClientProtocolException, IOException
{

    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(SERVICE_URL_UPLOAD_PICTURE+"image24.png");

    ResponseHandler<String> responseHandler = new BasicResponseHandler();

    File myfile = new File(Environment.getExternalStorageDirectory() + "/Documentation/wallpaper-3.jpg"); 

    try{
    MultipartEntity entity = new MultipartEntity();
    entity.addPart("image", new FileBody(myfile, "image/png"));
    httppost.setEntity(entity);

    String responseString = httpclient.execute(httppost, responseHandler);

    }
    catch(IOException e)
    {
        e.printStackTrace();
    }

} 
```

和我在服务 WCF 中的运营合同

```
[OperationContract]
    [WebInvoke(
        Method = "POST",
        UriTemplate = "/UploadImage/{filename}")]
    void UploadImage(string filename, System.IO.Stream image); 
```

和我在 WCF 中的功能

```
public void UploadImage(string filename, System.IO.Stream image)
    {
        FileStream fileToUpload = new FileStream("C:\\FileUpload\\" + filename, FileMode.Create);
        byte[] bytearray = new byte[1000000];

        int bytesRead, totalBytesRead = 0;
        do
        {
            bytesRead = image.Read(bytearray, 0, bytearray.Length);

            totalBytesRead += bytesRead;
        } while (bytesRead > 0);

        fileToUpload.Write(bytearray, 0, bytearray.Length);
        fileToUpload.Close();
        fileToUpload.Dispose();
    } 
```

我认为这很容易，但是当我看到保存的图像时，Windows 说我的图像不正确。

任何想法？

# java - 是否可以将对象列表添加到 mongo 文档中的嵌入式数组文档中？

> ID：12745774
> 
> 赞同：0
> 
> 时间：2012-10-05T11:56:52.583
> 
> 标签：java, mongodb

我有如下的 mongo 文件：

```
 {
  "_id" : ObjectId("506e9e54a4e8f51423679428"),
  "description" : "ffffffffffffffff", 
  "menus" : [  
            {   
              "_id" : ObjectId("506e9e5aa4e8f51423679429"),     
               "description" : "ffffffffffffffffffff",  
                  "items" : [
                           {    
                          "name" : "xcvxc",     
                          "description" : "vxvxcvxc",   
                          "text" : "vxcvxcvx",  
                          "menuKey" : "0",  
                           "onSelect" : "1",    
                          "_id" : ObjectId("506e9f07a4e8f5142367942f") 
                          } ,
                          {     
                          "name" : "abcd",  
                          "description" : "qqq",    
                          "text" : "qqq",   
                          "menuKey" : "0",  
                           "onSelect" : "3",    
                          "_id" : ObjectId("507e9f07a4e8f5142367942f") 
                          }
                         ] 
             }
         ]
  } 
```

现在我想将其更改为：

```
 {
        "_id" : ObjectId("506e9e54a4e8f51423679428"),
        "description" : "ffffffffffffffff", 
        "menus" : [ 
            {   
              "_id" : ObjectId("506e9e5aa4e8f51423679429"),     
               "description" : "ffffffffffffffffffff",  
                  "items" : {
                           {    
                          "name" : "xcvxc",     
                          "description" : "vxvxcvxc",   
                          "text" : "vxcvxcvx",  
                          "menuKey" : "0",  
                           "onSelect" : "1",    
                          "_id" : ObjectId("506e9f07a4e8f5142367942f") 
                          } ,
                          {     
                          "name" : "abcd",  
                          "description" : "qqq",    
                          "text" : "qqq",   
                          "menuKey" : "0",  
                           "onSelect" : "3",    
                          "_id" : ObjectId("507e9f07a4e8f5142367942f") 
                          }
                       } 
             }

           ]

   } 
```

这在mongo中可能吗？在第一个模式中，原子更新是不可能的，因为我们不能在更新深层时使用两个“$”。所以我想改变模式与第二个相同，我该如何实现呢？

对于第一个，我使用“$push”在**菜单中添加****项目**......

 **任何帮助都会很棒..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:16:15.463

您的更新正在更改“菜单”对象，因此我建议更改架构，以便菜单是顶级文档，而不是另一个文档中的数组。

菜单可以有一个引用它所属的顶级对象（在另一个集合中）的字段，或者您可以将顶级对象的字段非规范化到每个菜单文档中。

在不了解应用程序的完整需求的情况下，很难知道架构何时“足够好”。**

# c# - 如何在 Windows 8 中加载 JavaScript

> ID：12745778
> 
> 赞同：0
> 
> 时间：2012-10-05T11:57:18.703
> 
> 标签：c#, windows, internet-explorer, microsoft-metro

我正在寻找一种方法来实现 Internet Explorer - 我的 Winodws 8 应用程序中的桌面版本。这是由我的 c# 应用程序引起的——我需要运行 javascript 页面，但在 Metro 版本的 IE 中是不可能的。有什么方法可以做到这一点吗？我将描述我的问题：当我想加载 DOM 页面的 html（由 javascript 呈现）时，我不能，因为 javascript 可以运行（我使用 WebView）。我尝试使用桌面版打开此页面，并且效果很好。不幸的是 Metro IE10 也无法显示内容和我的 WebView。感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T17:24:14.603

您可以确保在 c# webview 中注入一个 javascript 文件：这是按钮的操作：

```
private async void Lamp_Click(object sender, RoutedEventArgs e)
{
    Uri uri = new Uri("ms-appx:///js/injected.js");
    StorageFile file = await StorageFile.GetFileFromApplicationUriAsync(uri);
    string text = await FileIO.ReadTextAsync(file); //reading content as string
    var script = "(function(){" + text + "})()";
}

try
{
    var result = wv.InvokeScript("eval", new string[] { script });
}
catch (Exception) { } 
```

**wv**是您在 xaml 中的 webview 元素的 id 名称

# android - 如何从活套中退出？

> ID：12745780
> 
> 赞同：0
> 
> 时间：2012-10-05T11:57:31.210
> 
> 标签：android, android-asynctask

```
1\. Looper.prepare();
2\. Handler mHandler = new Handler() {
3\. public void handleMessage(Message msg) {}
4\. };
5\. mHandler.post(gpsLocationListenerThread);
6\. Looper.loop();
7\. 
```

我正在`Thread`从`AsyncTask`. 当我使用 1-6 中的代码调用它时，它会创建`Thread`并运行它。但是`AsyncTask`卡在那里。我需要在`Thread`不阻塞我的`AsyncTask`. 如何让它发生？

```
public GPSLocationListenerThread(Context context){
    this.context = context;
    mlocManager = (LocationManager)context.getSystemService(context.LOCATION_SERVICE);
    mlocListener = new GPSLocationListener();
}

public void setHandler(Handler _h){
    this.mHandler = _h;
}

public void run(){
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10000, 100, mlocListener); // in 1000 mseconds or in 100m change
    mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 100, mlocListener); // in 1000 mseconds or in 100m change
    //mHandler.getLooper().quit();
    while (DataHolder.getDataHolderObject().isTripStarted()){
        try {
            this.sleep(5000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    mlocManager.removeUpdates(mlocListener);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T00:19:02.687

与文档相反，并不总是需要退出 looper。
如果你坚持 - 你必须在弯针的同一线程上调用它。[在这里](https://stackoverflow.com/a/20134464/1180898)
查看我的详细答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:01:54.617

那么你需要调用 Looper.quit(); 无论如何，否则它永远不会退出。你需要在哪里调用它我不知道，除非你发布更多代码:)

# c# - 用sql选择24小时格式表的DateTime列

> ID：12745782
> 
> 赞同：0
> 
> 时间：2012-10-05T11:57:48.823
> 
> 标签：c#, sql, sql-server, sql-server-2008

我有一个`ReceivedOn`类型为列的表`DateTime`。我正在执行一个带有 select 语句的存储过程，如下所示：

```
Select 
    CONVERT(DateTime,ReceivedOn)[Date/Time], MessageText[Event] 
From 
    RawFeed 
Where 
    ATM = (Select Code From ATM Where ATM = @ATMID) 
    AND ReceivedOn Between @From And @To 
Order By 
    ReceivedOn Desc 
```

我将存储过程结果存储在 DataTable 对象中。`.aspx`并在我的页面上显示这个对象

```
dtReturn = sspObj.ExecuteDataTable();
return dtReturn ; 
```

`DataTable`**对象正在使用某些函数**将结果转换为 HTML 表，将结果存储在表对象中并将其添加到页面

```
tOutput = Generix.convertDataTable2HTMLTable(dtOutput, true, true, false);
Page.Controls.Add(tOutput); 
```

但不是将值显示为

```
2012-10-05 16:40:35.234 
```

我得到这样的输出：

```
2012-10-05 04:40:35 PM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T11:59:26.967

不要转换它，保持原样。

```
Select ReceivedOn, ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:10:10.060

这不是 SQL 问题。SQL 正在返回一个日期时间，该日期时间由 C# 格式化为您所看到的输出。如果您希望 SQL 服务器以您的格式返回代表日期的 varchar（字符串），请尝试：

```
SELECT CONVERT(varchar(24), ReceivedOn, 121) 
```

有关更多详细信息，请参阅[投射和转换](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:39:48.333

```
select 
CONVERT(varchar,CONVERT(Date,ReceivedOn,101))  + ' ' + 
convert(varchar,CONVERT(TIME,ReceivedOn)) AS ReceivedDate,
CONVERT(DateTime,ReceivedOn)[Date/Time], MessageText[Event] 
From 
RawFeed 
Where 
ATM = (Select Code From ATM Where ATM = @ATMID) 
AND ReceivedOn Between @From And @To 
Order By 
ReceivedOn Desc 
```

试试这个可能会对你有所帮助....

# c# - C#读取多个Excel文件

> ID：12745783
> 
> 赞同：7
> 
> 时间：2012-10-05T11:57:51.607
> 
> 标签：c#, excel

是否可以制作一个从文件夹中读取多个 excel 文件并从中提取一些信息的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:22:02.100

是的，这是使用 Interop 的方法。您需要做的第一件事是将 Excel 互操作库添加到您的项目中。为此，您可以创建一个新的 Visual Studio 解决方案，右键单击**References**，选择**Add Reference**，然后从 .NET 选项卡中选择**Microsoft.Office.Interop.Excel 。**

然后您需要为 Excel 添加一条 using 语句，并为 InteropServices 添加一条语句（因为我们正在与 COM 对象进行互操作）：

```
using Excel = Microsoft.Office.Interop.Excel;
using System.Runtime.InteropServices; 
```

然后，在方法内部，您需要创建一个**Application**对象：

```
Excel.Application application = new Excel.Application(); 
```

接下来，为您要读取的每个工作簿创建一个**Workbook对象，如下所示：**

```
Excel.Workbook workbookOne;
Excel.Workbook workbookTwo;
Excel.Workbook workbookThree; 
```

现在使用 Application 对象打开每个工作簿，并将每个工作簿加载到其各自的 Workbook 对象中：

```
workbookOne = application.Workbooks.Open(@"C:\workbookOneLocation.xlsx");
workbookTwo = application.Workbooks.Open(@"C:\workbookTwoLocation.xlsx");
workbookThree = application.Workbooks.Open(@"C:\workbookThreeLocation.xlsx"); 
```

现在您需要决定要提取哪些信息。完成此操作后，确定它在工作簿中的哪个工作表上，然后通过简单地查看选项卡并计数来找出数字。在下面的示例中，**Sheet2**是 1 号，**Sheet1**是 2 号，**Sheet3**是 3 号：

![例子](../Images/4f60dcda2ef634005492e5abea375772.png)

像这样为您需要的每条信息创建一个变量（任何值类型变量都需要可以为空）：

```
string firstPieceOfInformationINeed;
string[] secondPieceOfInformationINeed;
double? thirdPieceOfInformationINeed; 
```

假设我们需要的第一条信息是第一工作簿内第一张工作表上的单元格 A1 中的字符串，第二条是第二工作簿内第二工作表上的单元格 B2 - B4，第三条是工作表上单元格 C5 上的数字三里面的工作簿三。我们会这样做：

```
string firstPieceOfInformationINeed;
string[] secondPieceOfInformationINeed;
double? thirdPieceOfInformationINeed;

Excel.Worksheet worksheet;
Excel.Range range;

worksheet = workbookOne.Sheets[1];
range = worksheet.Cells["1", "1"];

firstPieceOfInformationINeed = range.Value as string;

worksheet = workbookTwo.Sheets[2];
range = worksheet.Range["B2", "B4"];

secondPieceOfInformationINeed = range.Value as string[];

worksheet = workbookThree.Sheets[3];
range = worksheet.Cells["3", "5"];

thirdPieceOfInformationINeed = range.Value as double?; 
```

然后我们关闭工作簿，使用一个布尔值来指示我们是否要保存更改：

```
workbookOne.Close(true);
workbookTwo.Close(false);
workbookThree.Close(true); 
```

现在退出应用程序：

```
application.Quit(); 
```

并释放 COM 对象：

```
Marshal.ReleaseComObject(application); 
```

现在您已经完成了 Excel 的使用，并将所需的所有不同信息都存储为 C# 变量，您可以按照自己的意愿使用这些信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:00:33.373

是的，如果你想在没有 Excel Interop 的情况下使用它，你可以使用 ClosedXML，尽管它可以与 Excell 2007 + 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:03:50.357

尝试使用 NPOI (http://npoi.codeplex.com/) 或 NetOffice (http://netoffice.codeplex.com/) 库

# liferay - Liferay：ActionRequest、RenderRequest和PortletRequest有什么关系和区别？

> ID：12745786
> 
> 赞同：1
> 
> 时间：2012-10-05T11:58:10.693
> 
> 标签：liferay, portlet, liferay-6

和之间有什么关系和`ActionRequest`区别？`RenderRequest``PortletRequest`

我们可以从另一个获得一个实例吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T12:00:10.660

`PortletRequest`是两者的父级。An`ActionRequest`和 a`RenderRequest`都是不同类型的`PortletRequest`对象。

An`ActionRequest`在 portlet 的操作处理阶段有效。在此阶段，portlet 尚未完全决定如何呈现自己，无论是最小化、最大化、编辑模式还是查看模式等。

另一方面，`RenderRequest`在 portlet 的呈现阶段是有效的。此时，portlet 知道它将如何呈现自己，并且不允许某些更改，例如窗口状态。

如果要将参数从动作传递到渲染，则需要设置`ActionResponse`using

```
response.setRenderParameter(key,val); 
```

然后在相应的`RenderRequest`.

[在这里找到了答案](http://www.coderanch.com/t/203777/Portals-Portlets/java/different-requests-purpose)

# ios - iOS 的文本布局框架

> ID：12745794
> 
> 赞同：0
> 
> 时间：2012-10-05T11:58:33.890
> 
> 标签：ios, layout, frameworks, typography

除了 Webviews，iOS 上是否有任何用于自定义视图的文本布局框架？OpenGL 可以正常工作以及`UIView`基于某些东西。

想想 Metro UI 风格，我真的很喜欢模板和某种针对横向、纵向、ipad 与 iphone 等的自适应功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:15:01.250

CoreText.framework 将是一个很好的起点。它是一个“核心”框架，与 CoreGraphics 很好地集成在一起。如果您想要以 UIView 为中心的渲染，请准备编写一些包装器。

CoreText.framework 的高级替代方案是`NSAttributedString`在`UITextView`s 中使用（ios6 或更高版本）。

这是高级概述：

> Core Text 提供了一个现代的、低级的编程接口，用于布局文本和处理字体。Core Text 布局引擎旨在实现高性能、易用性以及与 Core Foundation 的紧密集成。文本布局 API 提供高质量的排版，包括字符到字形的转换、连字、字距调整等。互补的 Core Text 字体技术提供自动字体替换（级联）、字体描述符和集合、轻松访问字体度量和字形数据以及许多其他功能。
> 
> 多核注意事项：Core Text 中的所有单个函数都是线程安全的。多个操作、工作队列或线程可以同时使用字体对象（CTFont、CTFontDescriptor 和关联对象）。但是，布局对象（CTTypesetter、CTFramesetter、CTRun、CTLine、CTFrame 和相关对象）应在单个操作、工作队列或线程中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:10:22.080

查看 Cocoanetics 的 DTrichTextEditor。他们提供了免费的 DTCoreText，我已经使用了一年多，现在取得了巨大的成功（显示 HTML 和富文本）。[这是我刚刚找到的一个链接，](http://www.cocoanetics.com/2012/02/dtrichtexteditor-dtcoretext-news/)但您也可以查看[Cocoanetics](http://www.cocoanetics.com)网站（DTCoreText 是免费的，编辑器需要付费）。

# c# - Tcp 回显服务器不响应外部 IP 地址

> ID：12745798
> 
> 赞同：0
> 
> 时间：2012-10-05T11:58:46.373
> 
> 标签：c#, tcp, tcpclient

我使用[本教程实现了一个简单的回显服务器](http://www.codeproject.com/Articles/13232/A-very-basic-TCP-server-written-in-C)

之后，我将它安装在远程计算机上（aws 服务器，目标端口在安全组中打开）并尝试通过互联网连接到它。

服务器不响应（超时）。

我尝试向防火墙添加例外，甚至禁用目标计算机上的防火墙，但没有任何效果。

我还尝试连接到在目标计算机上运行的软件，效果很好。

这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:08:58.127

服务器绑定到 127.0.0.1，因此它不会接受来自本地主机外部的连接。而是将其绑定到 0.0.0.0。

# jquery - 如何使用jquery从数组中删除空值

> ID：12745800
> 
> 赞同：13
> 
> 时间：2012-10-05T11:58:49.480
> 
> 标签：jquery, arrays

> **可能重复：**
> [从 Javascript 中的数组中删除空元素](https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript)

我想`null`使用从数组中删除或清空元素`jquery`

```
var clientName= new Array();
clientName[0] = "jack";
clientName[1] = "";
clientName[2] = "john";
clientName[2] = "peter"; 
```

请给一些建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T12:04:27.033

使用 jquery **grep**函数，它将识别通过您定义的条件的数组元素

```
arr = jQuery.grep(arr, function(n, i){
  return (n !== "" && n != null);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T12:01:50.437

jQuery 中不需要，使用纯 JavaScript（它更快！）：

```
var newArray = [];
for (var i = 0; i < clientname.length; i++) {
    if (clientname[i] !== "" && clientname[i] !== null) {
        newArray.push(clientname[i]);
    }
}
console.log(newArray); 
```

现代浏览器的另一个简单解决方案（使用 Array[`filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)方法）：

```
clientname.filter(function(value) {
    return value !== "" && value !== null;
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T12:34:59.460

正在考虑，由于 jQuery 的`.map()`函数依赖于返回*非*null / undefined 的东西，你可以摆脱这样的事情：

```
var new_array = $.map(old_array, function (el) {
    return el !== '' ? el : null;
}); 
```

您仍然需要检查空字符串，但您真的不必再检查 null 和 undefined 了，这样您的逻辑就少了一个复杂性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:02:55.133

1.  创建一个新的空数组。
2.  如果值不等于“”，则进入 foreach 循环并将项目添加到新数组中。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-05T12:01:43.383

尝试这个 ：

```
$.each(clientname, function(key, value) { 
  if (value === 'undefined' || value === '')
     clientname.splice(key,1);
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-05T12:01:44.553

使用以下代码：

```
var newarr=[];
for(var i=0; i<len(clientname);i++){

   if(clientname[i] !== "" && clientname[i] !== null){
    newarr.push(clientname[i]);
   }
} 
```

# redis - 按值查找键

> ID：12745818
> 
> 赞同：31
> 
> 时间：2012-10-05T12:00:02.047
> 
> 标签：redis

我试图实现的想法是一个 id 表。基本上它具有结构（user_id，lecturer_id），其中 user_id 指的是我的 User 表中的主键，而 Lecturer_id 指的是我的 Lecturer 表中的主键。

我正在尝试在redis中实现这一点，但是如果我将键设置为用户的主ID，当我尝试运行查询时，例如**获取讲师ID = 5的所有记录，**因为讲师不是键，但**值**我不会能够在 O(1) 时间内到达它。

如何形成我上面提到的 id 表这样的结构，或者 Redis 不支持？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-05T13:41:52.937

在使用 redis 时，您可以快速学习的一件事是您可以围绕访问需求设计数据结构，特别是在关系方面（毕竟它不是关系数据库）

正如您已经注意到的那样，无法通过具有 O(1) 时间复杂度的“值”进行搜索，但是有一些方法可以接近您使用 redis 描述的内容。以下是我的建议：

*   正如您已经在做的那样，通过用户 ID（例如哈希）存储您的用户数据。
*   为每个讲师 ID 设置一个附加集，其中包含与相关讲师 ID 对应的所有用户 ID。

这可能看起来像复制关系的数据，因为您的用户数据必须存储讲座 ID，而您的讲座数据将存储用户 ID，但如果要在不建立关系的情况下，这是（微小的）代价-redis 之类的关系型数据存储。实际上，这很有效。内存很少是小型数据集的瓶颈（想想数千个 id）。

为了更好地了解人们如何使用 redis 对具有关系的应用程序进行建模，我建议阅读[Design and implementation of a simple Twitter clone](http://redis.io/topics/twitter-clone)和[Lamernews](https://github.com/antirez/lamernews)的源代码，两者均由 redis 作者[Salvatore Sanfilippo](https://twitter.com/antirez)编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T22:13:27.657

正如已经回答的那样，在 vanilla Redis 中，无法只存储一次数据并让 Redis 为您查询它们。

您必须自己维护二级索引。

但是，对于 Redis 中的模块，这不是必需的。[zeeSQL](https://zeesql.com/)或[RediSearch](https://oss.redislabs.com/redisearch/)等模块允许将数据直接存储在 Redis 中，并使用 SQL 查询（用于 zeeSQL）或类似 SQL 用于 RediSearch 来检索它们。

在你的情况下，一个 zeeSQL 的小例子。

```
> ZEESQL.CREATE_DB DB
OK
> ZEESQL.EXEC DB COMMAND "CREATE TABLE user(user_id INT, lecture_id INT);"
OK
> ZEESQL.EXEC DB COMMAND "SELECT * FROM user WHERE lecture_id = 3;"
... your result ... 
```

# php - Yii 找不到 GearmanClient

> ID：12745823
> 
> 赞同：1
> 
> 时间：2012-10-05T12:00:21.380
> 
> 标签：php, yii, gearman

我正在尝试使用 gearman-php-extensions 中的类来创建`gearman`任务`GearmanClient`。我可以使用命令提示符在下面的程序中运行-

```
//php client.php works fine
<?php
$client= new GearmanClient();
$client->addServer();
$task = $client->do("send", "hi");
?> 
```

但我不想在某些`yii controller`. 似乎`yii`无法找到`GearmanClient`上课的路径，但为什么呢？

我也在编写`yii`程序`eclipse`。作为`php`命令并且`eclipse`都使用同一个`php`库，我的`yii`控制器应该可以正常工作。相反，我的浏览器会出现错误，例如-

```
PHP warning

include(GearmanClient.php): failed to open stream: No such file or directory
#plus some warnings and the yii stack trace. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T13:34:49.917

发生这种情况是因为处理 php 文件的进程未使用最新的 php.ini 配置进行更新。因此，您只需要重新启动该过程。

所以：

1.  如果 php 处理程序作为 Web 服务器模块运行，那么您需要重新启动 Web 服务器。

2.  如果您将 php 作为 cgi 进程运行，那么您需要重新启动该进程。

# c# - 如何捕获包含公式的单元格的更改事件

> ID：12745827
> 
> 赞同：0
> 
> 时间：2012-10-05T12:00:29.770
> 
> 标签：c#, excel, vsto

我目前正在开发一个 Excel 2007 插件，需要监视工作表中的一系列单元格。我设法为工作表实现了 Change 事件，如果更改发生在我感兴趣的单元格范围内，我正在做一些业务逻辑。我的问题是，在单元格范围内，我有几个单元格使用我的“兴趣范围”之外的其他单元格的公式获取它们的值。如果包含公式的单元格之一发生更改，则不会触发 Change 事件。

即使对于包含公式的单元格，我如何才能捕获更改事件？

提前非常感谢！安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:19:13.587

这可能会有所帮助：

```
Function GetPrecedents(rInput As Range) As Range
' Returns combined range of all precedents of the input range.
Dim rCell As Range, rPrec As Range, rOutput As Range

    On Error Resume Next
    For Each rCell In rInput
        For Each rPrec In rCell.DirectPrecedents
            If Not rPrec Is Nothing Then
                If rOutput Is Nothing Then
                    Set rOutput = rPrec
                Else
                    Set rOutput = Union(rOutput, rPrec)
                End If
            End If
        Next
    Next
    Set GetPrecedents = rOutput

End Function 
```

现在当然，如果你真的想变得聪明，你需要让这个递归来考虑先例的先例......但我没有时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:50:58.643

尝试使用该`Worksheet_Calculate()`事件。

每当重新计算工作表时都会触发它，因此它将捕获工作表中任何单元格的公式引起的更改。

# javascript - jstree节点没有被创建

> ID：12745833
> 
> 赞同：1
> 
> 时间：2012-10-05T12:00:47.217
> 
> 标签：javascript, jquery, html, css, jstree

我创建了一个非常简单的 jstree。

单击链接时，我正在调用 createNode() 函数。它确实使用`create`api 中的函数来创建节点。

这似乎是我面临的一个常见的 jquery 问题。请让我知道出了什么问题。

在这里小提琴 - [http://jsfiddle.net/juyMR/16/](http://jsfiddle.net/juyMR/16/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:09:05.857

将行更改为：

```
$("#jsTreeDiv").jstree("create_node",$('#linodeid1'),false,"new name",false,false); 
```

这将添加到根：

```
function createNode() {
    $("#jsTreeDiv").jstree("create_node",$('#jsTreeDiv'),false,{ state: "leaf", data: "No rename!" },false,true);
} 
```

您还必须确定要添加新节点的节点的父节点。

# file - awk：从许多不同的文件中提取不同的列

> ID：12745834
> 
> 赞同：5
> 
> 时间：2012-10-05T12:01:03.107
> 
> 标签：file, awk

**文件示例**

```
I have a 3-10 amount of files with:

 - different number of columns
 - same number of rows
 - inconsistent spacing (sometimes one space, other tabs, sometimes many spaces) **within** the very files like the below

>      0    55.4      9.556E+09   33
>      1     1.3      5.345E+03    1
>        ........
>     33   134.4      5.345E+04  932
>
       ........ 
```

我需要从file1中获取第1列，从file2中获取第3列，从file3中获取第7列和从file4中获取第1列，并将它们并排合并到一个文件中。

**试验一：**不工作

> ```
> paste <(cut -d[see below] -f1 file1) <(cut -d[see below] -f3 file2) [...] 
> ```
> 
> 其中分隔符为“”或为空。

**试验 2：**使用 2 个文件但不使用许多文件

> ```
> awk '{
>      a1=$1;b1=$4;
>      getline <"D2/file1.txt";
>      print a1,$1,b1,$4
> }' D1/file1.txt >D3/file1.txt 
> ```

现在更一般的问题：

> **如何从许多不同的文件中提取不同的列？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T14:13:08.480

In your `paste` / `cut` attempt, replace `cut` by `awk`:

```
$ paste <(awk '{print $1}' file1 ) <(awk '{print $3}' file2 ) <(awk '{print $7}' file3) <(awk '{print $1}' file4) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T13:57:03.710

假设您的每个文件具有相同的行数，这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file1.txt file2.txt file3.txt file4.txt 
```

内容`script.awk`：

```
FILENAME == ARGV[1] { one[FNR]=$1 }
FILENAME == ARGV[2] { two[FNR]=$3 }
FILENAME == ARGV[3] { three[FNR]=$7 }
FILENAME == ARGV[4] { four[FNR]=$1 }

END {
    for (i=1; i<=length(one); i++) {
        print one[i], two[i], three[i], four[i]
    }
} 
```

笔记：

By default, `awk` separates columns on whitespace. This includes tab characters and spaces, and any amount of these. This makes `awk` ideal for files with inconsistent spacing. You can also expand the above code to include more files if you wish.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T12:17:39.813

`cut`和的组合`paste`应该起作用：

```
$ cat f1
foo
bar
baz
$ cat f2
1 2 3
4 5 6
7 8 9
$ cat f3
a b c d
e f g h
i j k l
$ paste -d' ' <(cut -f1 f1) <(cut -d' ' -f2 f2) <(cut -d' ' -f3 f3)
foo 2 c
bar 5 g
baz 8 k 
```

**编辑：**这也适用于标签：

```
$ cat f4
a       b       c       d
e       f       g       h
i       j       k       l
$ paste -d' ' <(cut -f1 f1) <(cut -d' ' -f2 f2) <(cut -f3 f4)   
foo 2 c
bar 5 g
baz 8 k 
```

# asp.net - 员工 ID 反映在由列而不是显示名称创建

> ID：12745836
> 
> 赞同：-2
> 
> 时间：2012-10-05T12:01:04.493
> 
> 标签：asp.net, sharepoint, sharepoint-2010, sharepoint-2007

我编写了一个程序，将数据从 excel 表导入到 sharepoint 2007 列表。导入了大约 11000 个数据。我使用了下面的代码。我的查询是我想将“员工的显示名称”放在“创建者”列中。我在代码中的 excel 表 n 中提供了相同的内容。但是在数据被导入后，我发现很少有员工数据反映了由他们的名字创建的列。但对于少数人来说，它仅反映 EMPID 或 EMPID + 名称。我调试代码它需要正确的字符串来显示，但我不明白它给出了这样的结果。我也在我的机器上运行编程序而不是服务器，所以它是 bcoz 的。因为我使用的是测试服务器，然后才会部署到生产中。

代码：

```
protected void btnImport_Click(object sender, EventArgs e)

        {

            using (SPSite site = new SPSite("URL"))

            {

                using (SPWeb web = site.OpenWeb())

                {

                    webapp = web.Site.WebApplication;

                    webapp.FormDigestSettings.Enabled = false;

                    SPList list = web.Lists["List name"];

                    string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\\Test.xlsx;Extended Properties=Excel 12.0";

                    OleDbConnection oledbConn = new OleDbConnection(connString);

                    oledbConn.Open();

                    OleDbCommand cmd = new OleDbCommand("SELECT * FROM [Sheet1$]", oledbConn);//contents from sheet1 is selected

                    OleDbDataAdapter oleda = new OleDbDataAdapter();

                    oleda.SelectCommand = cmd;

                    DataSet ds = new DataSet();

                    oleda.Fill(ds, "Employees");

                    DataTable dt = ds.Tables["Employees"];

                    DataView dv = new DataView(dt);

                    SPSecurity.RunWithElevatedPrivileges(delegate()

                    {

                        using (SPSite elevatedSite = new SPSite("URL"))

                        {

                            elevatedRootWeb = elevatedSite.OpenWeb();

                        }

                    });

                    foreach (DataRowView drv in dv)

                    {

                        EMPID = drv["Emp id"].ToString();

                        DispName = drv["Name"].ToString();

                        Title = drv["Title"].ToString();

                        getid = new SPQuery();

                        getid.Query = "<Where><Eq><FieldRef Name=’EMPID’ /><Value Type='Text'>" + EMPID + "</Value></Eq></Where><OrderBy><FieldRef Name='ID'/></OrderBy>";

                        check = list.GetItems(getid).GetDataTable();

                        if (check == null)

                        {

                                try

                                {

                                    elevatedRootWeb.AllowUnsafeUpdates = true;

                                    UserItem = list.Items.Add();

                                    UserItem["Emp id"] = EMPID;

                                    UserItem["Title"] = Title;

                                    test = elevatedRootWeb.EnsureUser(PSNumber).ID + ";#" + DispName;

                                    UserItem["Author"] = test;

                                    UserItem.Update();

                                    list.Update();

                                    count++;

                                    elevatedRootWeb.AllowUnsafeUpdates = false;

                                    using (StreamWriter w = File.AppendText("D:\\Errorlog_SP2010.txt"))

                                    {

                                        Log(PSNumber + "Inserted successfully", w);

                                        w.Close();

                                    }

                                }

                                catch (Exception ex)

                                {

                                    HttpContext.Current.Response.Write("<script>alert('Exception on adding item " + ex.Message + "')</script>");

                                    using (StreamWriter w = File.AppendText("D:\\Errorlog_SP2010.txt"))

                                    {

                                        Log(ex.ToString()+ PSNumber, w);

                                        w.Close();

                                    }

                                }

                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T23:11:13.207

检查[“_catalogs/users/simple.aspx”](http://zimmergren.net/technical/sharepoints-hidden-user-list-user-information-list)列表以查看该站点上的用户是否正确存储了他们的信息。

这很重要，因为 Author 字段的值来自此列表中显示的内容，而不是您设置的值。

请参阅[此问题](https://stackoverflow.com/questions/3854167/sharepoint-2007-user-name-changed-in-activedirectory-old-name-still-shown-at-t)以了解如何解决此问题。

# coldfusion - 使用 OAuth2 和 Google API 显示自己的数据，无需登录

> ID：12745841
> 
> 赞同：0
> 
> 时间：2012-10-05T12:01:15.523
> 
> 标签：coldfusion, google-api, youtube-api, google-analytics-api

我正在尝试使用 ColdFusion 构建应用程序。

几天来，我一直在阅读文档并尝试解决问题，在我的一生中，我似乎无法弄清楚如何使用 OAuth2 从 Google 的 API 向用户显示我自己的数据。

例如，我希望能够使用 Google Analytics API 向用户显示我的一些统计数据。我的网站获得了多少独特的点击量、页面浏览量以及来自哪些国家/地区。但是，数据是私有的，因此没有办法这样做。或者 YouTube 只是更改了他们的 API，因此除非登录，否则无法再看到视频标签。我希望能够显示我的视频标签，以便他们可以在我自己的网站上搜索相关内容，但我无法提取它们，因为我我不确定如何做到这一点。

我知道如何显示和操作公共数据，但是当涉及到私人数据时，我完全不知所措。OAuth2 踢我的屁股！

有没有人可以请，请帮助我使用 OAuth2，以便我可以允许我的用户查看我的私人 Google 数据，而无需为他们进行任何类型的登录过程？非常感谢使用 ColdFusion 的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:36:33.280

答案或多或少是我在[如何通过 YouTube API 检索我自己的私人播放列表？](https://stackoverflow.com/questions/12738262/how-to-retrieve-my-own-private-playlist-through-youtube-api)

您希望使用 OAuth 2 for Installed Applications 流程，并在旧访问令牌过期时通过刷新令牌生成新访问令牌。不过，我不熟悉在 Cold Fusion 中执行 OAuth 2 的任何库。

# android - Android Google Chrome：CSS3 响应式布局错误

> ID：12745843
> 
> 赞同：1
> 
> 时间：2012-10-05T12:01:19.350
> 
> 标签：android, google-chrome, css, responsive-design, media-queries

在我的 Stock Jelly Bean Gnex 上使用最新的 Android 版 Chrome 浏览本网站时遇到问题：http: [//kwitter.org/walialu/1340969834](http://kwitter.org/walialu/1340969834)

它在加载页面时呈现应有的状态。然后我翻转手机以更改为横向模式，它破坏了设计。我需要刷新页面让 chrome 重新渲染页面，然后一切看起来都很好。

在股票 Jelly Bean 浏览器上查看它时，一切都按预期呈现。

该站点的 HTML 如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>Kwitter.org - Like Twitter with, but with more K!</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/_twitext/templates/default/template.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src="/gaia.min.js"></script>
</head>
<body>
    <div id="topbar"></div>
    <div id="content">
        <div id="twitexts"><div class="twitext"><a href="/keanan"><div class="avatar" style="background-image: url('/_twitext/avatars/keanan.png');"></div></a>    <div class="userdata"><a href="/keanan"><div class="name">Keanan Williams</div><div class="username">+keanan<span>@kwitter.org</span></div></a><div class="posted_via">via Android Mobile Web</div><div class="date"><a href="/keanan/1340969834">2012-06-29 13:37:14</a></div></div><div class="text">I can&#039;t wait to get butter on my Galaxy Nexus. It is so fucking awesome, but watch for yourself!

</div></div></div>
      </div>
      <footer></footer>
  </body>
</html> 
```

该站点的 CSS 如下所示：

```
 html {
        height: 100%;
    }
    body {
        height: 100%;
        margin: 0;
        padding: 0;
        background-color: #bbb;
        color: #999;
        font-size: 17px;
        font-family: Verdana, Arial, Helvetica, sans-serif;
        background: #C0DEED url("/_twitext/templates/default/bg.png") repeat-x fixed;
    }

    a {
        color: #F92659;
    }

    kbd {
        background-color:#f7f7f7;
        border:1px solid #ccc;
        border-radius:3px;
        box-shadow:0 1px 0 rgba(0,0,0,0.2),0 0 0 2px #fff inset;
        color:#333;
        display:inline-block;
        font-family:Arial,Helvetica,sans-serif;
        font-size:12px;
        line-height:1.4;
        margin:0 .1em;
        padding:.1em .6em;
        text-shadow:0 1px 0 #fff;
    }

    .date a {
        color: #666;
    }

    button {
        position: relative;
        display: inline-block;
        overflow: visible;
        padding: 5px 10px;
        font-size: 13px;
        font-weight: bold;
        line-height: 18px;
        cursor: pointer;
        border-radius: 4px;
        color: #CCC;
        text-shadow: 0 1px 0 rgba(0, 0, 0, .5);
        background-color: #333;
        background-repeat: no-repeat;
        border: 1px solid #333;
        box-shadow: 0 1px 0 rgba(0, 0, 0, .5);
    }

    button:active {
        color: #FFF;
        text-shadow: 0 1px 0 rgba(100, 100, 100, .5);
        background-color: #555;
        background-repeat: no-repeat;
        border: 1px solid #555;
        box-shadow: 0 1px 0 rgba(100, 100, 100, .5);
    }

    input,textarea {
        border: 1px solid #559;
        border-radius: 10px;
        font-size: 18px;
        max-width: 100%;
        padding: 10px;
        background-color: #eef;
        color: #000;
        margin: 10px;
    }

    #post_window textarea, #edit_window textarea {
        width: 546px;
        max-width: 85%;
        height: 200px;
        max-height: 94%;
    }

    #post_window input {
        width: 546px;
        max-width: 85%;
    }

    .box-header {
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        font-size: 18px;
        margin-top: -1px;
        padding: 5px;
        color: #000;
    }

    div.overlay {
        position: absolute;
        z-index: 1000;
    }

    div.overlay.modal {
        position: absolute;
        left: 0px;
        top: 0px;
        width:100%;
        height:100%;
        max-width: 100%;
        text-align:center;
        z-index: 1000;
        background-image:url("/_twitext/images/overlay-bg.png");
    }

    div.overlay div {
        position: absolute;
        min-width:90px;
        min-height:90px;
        max-width: 96%;
        padding: 0;
        border: 1px solid #000;
        border-radius: 10px;
        background-color: #fff;
        color: #000;
    }

    div.overlay div .window-destroy-button {
        float: right;
        margin-top: -5px;
        background-color: #900;
        color: #fff;
        height: 32px;
        width: 32px;
    }

    div.overlay div span {
        margin: -1px;
        border: 1px solid #000;
        border-radius: 10px 10px 0 0;
        background-color: #3287D0;
        padding:10px;
        display: block;
        text-align: center;
    }

    div.overlay div div {
        position: relative;
        margin: 10px;
        max-width: 100%;
        background-color: #fff;
        border-radius: 0 0 10px 10px;
        text-align:center;
        border: 0 none;
    }

    #topbar {
        background-color: #222;
        height: 42px;
        margin-bottom: 10px;
    }

    #topbar div {
        margin: 0 auto;
        padding-top: 3px;
        width: 576px;
        max-width: 100%;
    }

    #content {
        width: 96%;
        margin: 0 auto;
    }

    #twitexts {
        width: 100%;
    }

    #twitexts .twitext {

    }

    #twitexts .twitext .avatar {
        display: none;
        width: 96px;
        height: 96px;
        margin-top: 10px;
        margin-left: 10px;
        margin-bottom: 10px;
    }

    #twitexts .twitext .userdata {
        padding: 10px;
        margin-top: 10px;
        max-width: 100%;
        min-height: 86px;
        border: 1px solid #999;
        border-bottom: 0 none;
        border-radius: 10px 10px 0 0;
        background-color: #fff;
        color: #000;
    }

    #twitexts .twitext .userdata a, #twitexts .twitext .userdata a:visited{
        color: #000;
    }

    #twitexts .twitext .userdata .name, #twitexts .twitext .userdata .username {
        float: left;
    }

    #twitexts .twitext .userdata .username {
        clear: both;
        margin-left: 20px;
    }

    #twitexts .twitext .userdata .posted_via {
        padding-top: 10px;
        clear: both;
        color: #999;
        font-size: 10px;
    }

    #twitexts .twitext .userdata .date {
        clear: both;
        font-size: 10px;
    }

    #twitexts .twitext .userdata .username span {
        font-size: small;
        color: #666;
    }

    #twitexts .twitext .text  {
        max-width: 100%;
        padding: 10px;
        border: 1px solid #999;
        border-radius: 0 0 10px 10px;
        background-color: #fff;
        word-wrap: break-word;
        color: #272822;
    }

    @media (min-width: 480px) {
        #twitexts .twitext .avatar {
            float: left;
            display: block;
            margin-left: 0;
            margin-bottom: -30px;
            margin-right: 10px;
        }
        #twitexts .twitext .userdata {
            margin-left: 120px;
            padding: 10px;
            max-width: 100%;
            display: block;
        }
        #twitexts .twitext .userdata .username {
            margin-top: -30px;
        }
        #twitexts .twitext .text  {
            clear: both;
        }
    }

    @media (min-width: 640px) {
        #content {
            max-width: 576px;
        }
        #twitexts .twitext .avatar {
            float: left;
            display: block;
            margin-left: 0;
            margin-bottom: 0;
            margin-right: 10px;
        }
        #twitexts {
            float: right;
            width: 576px;
        }
        #twitexts .twitext .text  {
            float: left;
            width: 538px;
        }
        #postbar {
            float: left;
        }
        #twitexts .twitext .userdata {
            float: left;
            margin-left: 0;
            padding: 10px;
            width: 430px;
            border-radius: 10px 10px 0 0;
        }
        #twitexts .twitext .userdata .username {
            margin-top: 0;
        }
        #twitexts .twitext .userdata .posted_via {
            clear: both;
            margin-top: -40px;
            float: right;
            color: #999;
            font-size: 10px;
        }
        #twitexts .twitext .userdata .date {
            float: right;
            margin-top: -20px;
            font-size: 11px;
            text-align: right;
        }
    } 
```

您是否认为这是 chrome for android 特定的渲染错误（因为桌面 chrome 在调整大小时没有这种奇怪的行为），还是您认为我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:39:32.983

我猜这是 Chrome for Android 特定的渲染错误，因为 Dolphin (HD) 和普通浏览器没有显示这种奇怪的行为（另外，在重新加载整页后，一切都按预期显示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:38:13.120

我以前遇到过类似的问题，但找不到解决方法。但无论我做什么，它都会在横向模式下被窃听所以我只是将它锁定在纵向模式......但是这个页面可能有一些关于 chrome 错误的答案：

[http://www.chromium.org/Home/chromecompatfaq](http://www.chromium.org/Home/chromecompatfaq)

无论如何，祝你好运:)

编辑：也有人在这里讨论类似的问题： [http ://www.sitepoint.com/forums/showthread.php?676871-google-chrome-layout-issue](http://www.sitepoint.com/forums/showthread.php?676871-google-chrome-layout-issue)

# c# - 如何阻止直到在c#中触发事件

> ID：12745848
> 
> 赞同：70
> 
> 时间：2012-10-05T12:01:27.973
> 
> 标签：c#, events

问完[这个问题](https://stackoverflow.com/q/12738296/258482)后，我想知道是否可以等待一个事件被触发，然后获取事件数据并返回其中的一部分。有点像这样：

```
private event MyEventHandler event;
public string ReadLine(){ return event.waitForValue().Message; }
...
event("My String");
...elsewhere...
var resp = ReadLine(); 
```

请确保您提供的任何解决方案都直接返回该值，而不是从其他东西中获取它。我在问上面的方法是否以某种方式可用。我知道 Auto/ManuelResetEvent，但我不知道它们会像我上面那样直接返回值。

**更新：**`MyEventHandler`我使用（包含一个`Message`字段）声明了一个事件。我在另一个线程中有一个方法，称为`ReadLine`等待事件触发。当事件触发时，WaitForValue 方法（事件处理场景的一部分）返回包含消息的事件参数。然后，该消息由 ReadLine 返回给调用它的任何对象。

我问的[那个问题](https://stackoverflow.com/q/12738296/258482)[的公认答案](https://stackoverflow.com/a/12738605/258482)是我做了什么，但感觉不太对劲。在 ManuelResetEvent 触发和程序检索数据并返回数据之间，几乎感觉数据可能会发生一些事情。

**更新：**的主要问题`Auto/ManualResetEvent`是它太脆弱了。一个线程可以等待该事件，然后在将其更改为其他内容之前没有给其他任何人足够的时间来获取它。有没有办法使用锁或其他东西？也许使用 get 和 set 语句。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-07-06T14:00:35.903

如果当前方法是异步的，那么您可以使用 TaskCompletionSource。创建事件处理程序和当前方法可以访问的字段。

```
 TaskCompletionSource<bool> tcs = null;

    private async void Button_Click(object sender, RoutedEventArgs e)
    {
        tcs = new TaskCompletionSource<bool>();
        await tcs.Task;
        WelcomeTitle.Text = "Finished work";
    }

    private void Button_Click2(object sender, RoutedEventArgs e)
    {
        tcs?.TrySetResult(true);
    } 
```

此示例使用具有名为 WelcomeTitle 的文本块和两个按钮的表单。单击第一个按钮时，它会启动 click 事件，但会在 await 行处停止。单击第二个按钮时，任务完成并更新 WelcomeTitle 文本。如果您也想超时，请更改

```
await tcs.Task; 
```

至

```
await Task.WhenAny(tcs.Task, Task.Delay(25000));
if (tcs.Task.IsCompleted)
    WelcomeTitle.Text = "Task Completed";
else
    WelcomeTitle.Text = "Task Timed Out"; 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-05T12:10:51.963

您可以使用 [ManualResetEvent](https://docs.microsoft.com/en-us/dotnet/api/system.threading.manualresetevent)。在触发辅助线程之前重置事件，然后使用[WaitOne()](https://docs.microsoft.com/en-us/dotnet/api/system.threading.waithandle.waitone)方法阻塞当前线程。然后，您可以让辅助线程设置 ManualResetEvent，这将导致主线程继续。像这样的东西：

```
ManualResetEvent oSignalEvent = new ManualResetEvent(false);

void SecondThread(){
    //DoStuff
    oSignalEvent.Set();
}

void Main(){
    //DoStuff
    //Call second thread
    System.Threading.Thread oSecondThread = new System.Threading.Thread(SecondThread);
    oSecondThread.Start();

    oSignalEvent.WaitOne(); //This thread will block here until the reset event is sent.
    oSignalEvent.Reset();
    //Do more stuff
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T12:12:10.107

您可以等待的一种非常简单的事件是`ManualResetEvent`，甚至更好的是`ManualResetEventSlim`.

他们有一种`WaitOne()`方法可以做到这一点。你可以永远等待，或者设置一个超时，或者一个“取消令牌”，这是你决定停止等待事件的一种方式（如果你想取消你的工作，或者你的应用程序被要求退出）。

你解雇他们打电话`Set()`。

[这](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)是文档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T12:36:04.110

如果您乐于使用 Microsoft Reactive Extensions，那么这可以很好地工作：

```
public class Foo
{
    public delegate void MyEventHandler(object source, MessageEventArgs args);
    public event MyEventHandler _event;
    public string ReadLine()
    {
        return Observable
            .FromEventPattern<MyEventHandler, MessageEventArgs>(
                h => this._event += h,
                h => this._event -= h)
            .Select(ep => ep.EventArgs.Message)
            .First();
    }
    public void SendLine(string message)
    {
        _event(this, new MessageEventArgs() { Message = message });
    }
}

public class MessageEventArgs : EventArgs
{
    public string Message;
} 
```

我可以这样使用它：

```
var foo = new Foo();

ThreadPoolScheduler.Instance
    .Schedule(
        TimeSpan.FromSeconds(5.0),
        () => foo.SendLine("Bar!"));

var resp = foo.ReadLine();

Console.WriteLine(resp); 
```

我需要`SendLine`在不同的线程上调用消息以避免锁定，但这段代码显示它按预期工作。

# mongodb - 在 MongoDB 中透视数据

> ID：12745860
> 
> 赞同：2
> 
> 时间：2012-10-05T12:01:56.047
> 
> 标签：mongodb, mongodb-query

我有一个“文章”集合，一些示例数据可能如下所示：

```
[
{body: 'Interesting news in Siberia and so on etc. etc. etc. and lolcats too',
author: 'John Doe',
tags: [{tid:24, name: "Siberia"}, 
       {tid: 5231, name: "Lolcats"},]
},
{body: 'Something is going on in Siberia and France',
author: 'Jane Doe',
tags: [{tid:24, name: "Siberia"}, 
       {tid: 6432, name: "France"},]
},
] 
```

我需要的输出是一个不同的标签列表：

```
[
{tid: 24, name: 'Siberia'},
{tid: 5231, name: 'Lolcats'},
{tid: 6432, name: 'France'},
] 
```

我一直在努力处理一些 mapReduce 查询和不同的聚合，但没有结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T13:00:41.133

最简单的方法是：

```
db.articles.distinct("tags") 
```

如果您想使用聚合框架（2.2 中的新功能），则需要更长的时间：

```
db.articles.aggregate([{$unwind:"$tags"}, 
                   {$group:{_id:"$tags"}},
                   {$project:{tid:"$_id.tid",name:"$_id.name",_id:0}}
]).result 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:34:31.583

在 mongo v2.2 中，您可以使用以下`aggregate`函数执行此操作：

```
db.articles.aggregate([
{
    // From each document, emit just the tags
    $project: {
        tags: 1
    }
}, {
    // Duplicate each document for each tags element it contains
    $unwind: '$tags'
}, {
    // Group the documents by the tag's tid and name
    $group: {
        _id: { tid: '$tags.tid', name: '$tags.name' }
    }
}, {
    // Reshape the document to exclude the _id and bring tid and name to the top level
    $project: {
        _id: 0,
        tid: '$_id.tid',
        name: '$_id.name'
    }
}],
function (err, result) {
    if (err) {
        console.log('aggregation error: %s', err);
    } else {
        console.dir(result);
    }
}); 
```

对于您的文档，这会产生以下输出：

```
[ { tid: 6432, name: 'France' },
  { tid: 5231, name: 'Lolcats' },
  { tid: 24, name: 'Siberia' } ] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T13:07:57.403

```
db.articles.distinct("tags") 
```

给出以下输出：

```
[
{
    "tid" : 24,
    "name" : "Siberia"
},
{
    "tid" : 5231,
    "name" : "Lolcats"
},
{
    "tid" : 6432,
    "name" : "France"
}
] 
```

# apache - 更改 public_html 目录 .htaccess

> ID：12745864
> 
> 赞同：0
> 
> 时间：2012-10-05T12:02:14.650
> 
> 标签：apache, .htaccess, directory

我的 public_html 文件夹是 /domain.com/public_html/ 但我希望 htaccess 将它们重定向到文件夹 /domain/public_html/www/ 但仍然有 domain.com 作为域而不是 domain.com/www 。

编辑：我希望 public_html 中的子文件夹 www 是默认根目录，而不是 public_html 本身

对此有任何解决方案吗？

这是我目前的 htacess

```
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php
<IfModule mod_rewrite.c>
    RewriteEngine On    
    RewriteRule ^(.*)$ www/$1 [NC,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T12:44:42.297

如果您只能使用.htaccess，那么这个简单的应该可以做到；

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/www/
RewriteRule ^(.*)$ /www/$1 [QSA] 
```

* * *

解释;

```
RewriteEngine on                      # Turn on mod_rewrite functionality
RewriteCond %{REQUEST_URI} !^/www/    # Don't rewrite requests that are 
                                      # already to the /www/ directory. 
                                      # If this isn't here, we'll go into
                                      # a neverending loop.
RewriteRule ^(.*)$ /www/$1 [QSA]      # Rewrite all else to the www subdirectory
                                      # QSA = keep the query string. 
```

编辑：没有看到您现有的 htaccess，这（减去多余的 RewriteEngine 语句）可能应该放在最后而不是整个 IfModule 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:15:29.783

尝试将其放在`public_html`文件夹的 htaccess 中：

```
<IfModule mod_rewrite.c>
    RewriteEngine On    
    RewriteRule ^(.*)$ www/$1 [NC,L]
</IfModule> 
```

## **或者**

编辑 apache 配置 ( `httpd.conf`)

```
vi /usr/local/apache/conf/httpd.conf 
```

并将`DocumentRoot`域的设置为

```
DocumentRoot /home/user/public_html/www 
```

保存文件并重新启动 httpd 服务。

## **或（推荐）**

看看这个问题（它的答案） - [https://stackoverflow.com/a/5891858/1361042](https://stackoverflow.com/a/5891858/1361042)

## **编辑**

使用这个 HTACCESS：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/www/
    RewriteRule ^(.*)$ www/$1 [NC, QSA]
</IfModule> 
```

不要将它添加到你的，而是用这个替换你的 htaccess。

# asp.net-mvc-3 - 表单提交后将字典从视图传递到控制器

> ID：12745867
> 
> 赞同：2
> 
> 时间：2012-10-05T12:02:22.457
> 
> 标签：asp.net-mvc-3, razor, routevalues

剃刀视图：

```
@using (Html.BeginForm("Move", "Details", new { dict= dictionary}, FormMethod.Post)) {
    //table with info and submit button
    //dictionary => is a dictionary of type <Sales_Order_Collected, string>
} 
```

控制器动作：

```
[HttpPost]
public string Move(Dictionary<Sales_Order_Collected, string> dict) {
    return "";
} 
```

有没有办法将模型字典传递给控制器​​？因为我的参数始终为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:16:50.703

您不能通过路由值传递字典。你可以这样做：

```
@using (Html.BeginForm("Move", "Details", null, FormMethod.Post)) {
    <input type="text" name="[0].Key" value="first key"/>
    <input type="text" name="[0].Value" value="first value"/>

    <input type="text" name="[1].Key" value="second key"/>
    <input type="text" name="[1].Value" value="second value"/>
} 
```

这将发布字典。复杂对象的想法是一样的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T17:54:02.430

这是我的任何字典的 Html 助手：

```
public static IHtmlString DictionaryFor<TModel, TKey, TValue>(this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, IDictionary<TKey, TValue>>> expression)
{
    ModelMetadata metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

    IDictionary<TKey, TValue> dictionary = (IDictionary<TKey, TValue>)metaData.Model;

    StringBuilder resultSB = new StringBuilder();

    int i = 0;

    foreach (KeyValuePair<TKey, TValue> kvp in dictionary)
    {
        MvcHtmlString hiddenKey = htmlHelper.Hidden($"{metaData.PropertyName}[{i}].Key", kvp.Key.ToString());
        MvcHtmlString hiddenValue = htmlHelper.Hidden($"{metaData.PropertyName}[{i}].Value", kvp.Value.ToString());

        resultSB.Append(hiddenKey.ToHtmlString());
        resultSB.Append(hiddenValue.ToHtmlString());

        i++;
    }

    return MvcHtmlString.Create(resultSB.ToString());
} 
```

在这样的视图中调用它：

```
@Html.DictionaryFor(model => model.AnyDictionary) 
```

# c# - How do I add site meta in orchard cms

> ID：12745870
> 
> 赞同：1
> 
> 时间：2012-10-05T12:02:29.540
> 
> 标签：c#, orchardcms

I am trying to add og meta tags to my site for the facebook like button. How can I add that to the site's `<head>` ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T15:06:00.150

Here are a couple methods:

1.  There is no _Layout.cshtml in Orchard. The equivalent would be Document.cshtml in your Theme. You can do what Freeman suggested, but in Document.cshtml

2.  You can use one of the existing Facebook modules on the Orchard gallery. There is at least one module there that implements the Like button, so you can attach the "like" buttons to your parts and the module will take care of the `<head>` tags for you.

# php - 使用 Javascript 在运行时更改 HTML5 离线缓存清单

> ID：12745898
> 
> 赞同：0
> 
> 时间：2012-10-05T12:04:01.450
> 
> 标签：php, javascript, html

页面加载后是否可以使用 Javascript 从缓存清单中添加或删除文件？

或者，是否可以在页面加载后更改源并触发缓存清单的重新加载？我在想，由于我的清单是动态的，我可以使用 javascript 来存储所需文件的列表并将它们发送到 php 以在更新的清单文件中列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:59:28.733

无法从 JavaScript 添加/删除单个文件。应用缓存的当前实现是全有或全无。如果更新了缓存清单，将下载该文件中引用的所有文件。

如果使用以下代码下载了新的缓存文件，则可以触发重新加载：

```
if (window.applicationCache) {
    applicationCache.addEventListener('updateready', function() {
        if (confirm('An update is available. Reload now?')) {
            window.location.reload();
        }
    });
} 
```

我在最近的一篇关于 HTML5 应用程序缓存的博客文章中有一些其他细节 - [http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/](http://gregsramblings.com/2012/05/28/html5-application-cache-how-to/)

格雷格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T10:48:59.957

这个问题很老但是......因为 Wamp `V3.1.0`maria db 已经包装在包中。

它只是在端口`3307`而不是`3306`.

# javascript - Phonegap-在应用程序进入后台时触发从 ios 对 javascript 的调用

> ID：12745901
> 
> 赞同：1
> 
> 时间：2012-10-05T12:04:07.227
> 
> 标签：javascript, ios, cordova

我有一个 phonegap 应用程序，想在应用程序进入后台时调用 javascript 函数以执行 web 服务调用以更新应用程序状态。为此，我正在使用**writejavascript**函数。但它没有调用该函数。我不知道不管有没有可能。如果可能的话，请给我一个想法来做这件事。在此先感谢。

NSString *tojs = [NSString stringWithFormat:@"downloadMgr.updateStatus('%d');",status];

[自写Javascript：tojs]；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:33:33.300

使用Phonegaps事件“暂停”并恢复我认为这可能会对您有所帮助。例如：

```
 document.addEventListener("pause", onPause, false);

  function onPause() {
  // Handle the pause event
  } 
```

[关联](http://docs.phonegap.com/en/2.1.0/cordova_events_events.md.html#pause)

完整示例

```
<!DOCTYPE html>
 <html>
 <head>
  <title>Cordova Pause Example</title>

<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Call onDeviceReady when Cordova is loaded.

function onLoad() {
    document.addEventListener("deviceready", onDeviceReady, false);
}

// Cordova is loaded and it is now safe to make calls Cordova methods
//
function onDeviceReady() {
    document.addEventListener("pause", onPause, false);
    document.addEventListener("resume", onResume, false);

}

  function onResume() {
    // Handle the resume event
  }
// Handle the pause event
//
function onPause() {
}

 </script> </head> <body onload="onLoad()"></body> </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T12:49:30.633

暂停事件在 IOS 上用处不大：-

在暂停处理程序中，任何通过 Objective-C 的调用都将不起作用，任何交互式调用（如警报）也不起作用。这意味着您不能调用 console.log（及其变体），或任何来自插件或 PhoneGap API 的调用。这些只会在应用程序恢复时处理（在下一个运行循环中处理）。

# emacs - 如何在 emacs-term 中禁用自动换行？

> ID：12745912
> 
> 赞同：2
> 
> 时间：2012-10-05T12:04:51.407
> 
> 标签：emacs, term

我正在使用 emacs 终端模拟器。带有 GNU bash 的 GNU Emacs 23.2.1，版本 3.00.0(1)-release。当某些命令，比如 grep 1 file.txt 打印很长的行时，emacs 将它们中继以适应窗口宽度。但是它对那些行做到了这一点，所以当我复制这样的行时，我得到的不是一条长线，而是几条等宽的线。

例如：

```
 Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
```

在回应它之后，说`cat lorem.ipsum` 我得到（如果我有一个 38 字符宽的终端）：

```
Lorem ipsum dolor sit amet, consectet
ur adipisicing elit, sed do eiusmod t
empor incididunt ut labore et dolore 
magna aliqua. 
```

现在，如果我从终端复制它，我将有 4 行用 \n 字符分隔。很烦人，怎么处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:58:05.110

实际上我没有找到答案，但我已经写了一个快速破解，以便轻松地将此类剪切粘贴到术语中：

```
;; Linearize the last kill-ring entry
(defun make-single-line-in-clipboard ()
  (interactive)
  (with-temp-buffer
    (yank)
    (pop kill-ring)
    (goto-char 0)
    (while (search-forward "\n" nil t)
      (replace-match "" nil t))
    (kill-region (point-min) (point-max))))

;; Paste into terminal the linearized last killed text
(defun paste-into-term-singlelined ()
  (interactive)
  (term-line-mode)
  (make-single-line-in-clipboard)
  (end-of-buffer)
  (clipboard-yank)
  (term-char-mode)) 
```

然后是 Cy 的 binging（我使用[多词](http://emacswiki.org/emacs/MultiTerm)扩展）。

```
 (cons "C-y" 'paste-into-term-singlelined) 
```

# .net - Firefox 和 Chrome 怎么会有 Metro 版本？

> ID：12745913
> 
> 赞同：1
> 
> 时间：2012-10-05T12:05:02.800
> 
> 标签：.net, windows-8, microsoft-metro

这更像是一个一般性的问题，让我稍后再看。我对此很感兴趣，但它似乎完全令人困惑。

据我从网上阅读的内容了解到，获得适用于 Windows 8 的 Metro 应用程序的唯一方法是通过 Windows 应用商店... 那么 Chrome 和 Firefox（Firefox 处于测试阶段，请注意）组合桌面和 Metro 应用程序是怎么来的？在商店外的可下载应用程序中？这是否意味着 Metro 应用程序可以在商店之外分发，前提是它们仅适用于 x86？

编辑：进一步......如果它们可以从商店外安装，任何人都可以指向我可以学习制作所述应用程序的资源吗？我一直不喜欢被迫使用商店来使用和分发我制作的 FOSS 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:13:45.930

浏览器是一类特殊的 Windows 应用程序。他们拥有许多其他应用程序无法获得的特权。见[这里](http://www.techradar.com/us/news/software/operating-systems/windows-8-browsers-the-only-metro-apps-to-get-desktop-power-1073930)。

从链接的文章：

> 根据微软的说法，支持 Metro 风格的桌面浏览器可以“完全访问用于渲染 HTML5 的 Win32 API，包括使用多个后台进程、JIT 编译和其他明显与浏览器相关的功能（如文件的后台下载）的能力”。
> 
> 基本上，Metro 浏览器使用与桌面浏览器相同的代码；其他 Metro 应用程序无法做到这一点。没有其他 Metro 应用程序可以在后台运行（除了一些特定的事情，比如播放音乐）；他们有几秒钟的时间进行整理，然后在他们不在前台时立即停止运行。即使您离开 Metro 浏览器，它也可以继续下载和上传文件。

如果配置正确，桌面浏览器还具有 Metro 版本的特殊能力。见[这里](http://go.microsoft.com/fwlink/?LinkID=243079)。

# asp.net - 计算浏览器渲染内容的时间

> ID：12745922
> 
> 赞同：1
> 
> 时间：2012-10-05T12:05:33.047
> 
> 标签：asp.net, performance, browser, count, render

如何计算页面加载后浏览器渲染（重新渲染）我的 aspx 页面的时间？

（页面上有很多组件，所以我需要比较不同方法的性能）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:09:43.593

使用浏览器扩展，例如用于 Firefox的[FireBug 。](https://getfirebug.com/)

使用“网络”面板，您可以看到“时间线”，例如甘特图，显示每个元素加载、渲染等所需的时间。

![在此处输入图像描述](../Images/77433df07247dfea091c1593380c25ec.png)

# c# - 表值参数

> ID：12745925
> 
> 赞同：1
> 
> 时间：2012-10-05T12:06:05.070
> 
> 标签：c#, sql-server

将 TVP 传递给存储过程时出现错误

我的代码是

```
SqlConnection con=new SqlConnection();
con.Open();

SqlCommand cmd=new SqlCommand("SPName",con);

DataTable dataTable = new DataTable("vpTableGuid");

dataTable.Columns.Add("id1", typeof(Guid));
dataTable.Columns.Add("rowNum", typeof(Int32));

dataTable.Rows.Add(Guid.NewGuid(),1);
dataTable.Rows.Add(Guid.NewGuid(),2);
dataTable.Rows.Add(Guid.NewGuid(),3);

SqlParameter param = new SqlParameter("@evaluatorList", dataTable);                        
param.SqlDbType = SqlDbType.Structured;
param.TypeName = "dbo.vpTableGuid";

command.Parameters.Add(param);

command.ExecuteNonQuery(); 
```

上面的代码抛出一个错误：

> *插入到表变量上不允许的标识列。*
> *表值参数“@evaluatorList”的数据不符合参数的表类型。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:18:48.307

You cannot set the identity column manually in SQL.

Define your primary key column in SQL as such:

```
id1 UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY 
```

Remove this line of code:

```
dataTable.Columns.Add("id1", typeof(Guid)); 
```

And change your vpTableGuid definition to not include the id1 column.

# ruby-on-rails - 如何在 before_filter 中使用 request.env？

> ID：12745927
> 
> 赞同：0
> 
> 时间：2012-10-05T12:06:15.057
> 
> 标签：ruby-on-rails, before-filter, before-save

我想在保存之前检查一些字段并将其更改为默认浏览器语言。

我想使用 before_save 过滤器：

```
def update
 @website = Website.find(params[:id])
  if @website.language == "Automatic (by user's browser language)"
   @website.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
 end
respond_to do |format|
  if @website.update_attributes(params[:website])
    format.html { redirect_to @website, 
      notice: 'Note: code has been updated. Please replace the code you have on your website with the code below. Only then changes will take effect.'}
    format.js
   end
  end
end 
```

**我需要检查：**

```
 if @website.language == "Automatic (by user's browser language)"
    @website.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
 end 
```

它适用于创建操作，但不适用于更新。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:12:16.393

在模型中使用保存之前，请求通常在模型中不可用。

但是，如果您真的想在那里进行操作，请查看：[http](http://m.onkey.org/how-to-access-session-cookies-params-request-in-model) ://m.onkey.org/how-to-access-session-cookies-params-request-in-model以获取有关如何操作的更多详细信息。

- 编辑 -

有几种方法可以做到这一点。

我想到的第一个是你添加：`attr_accessor :request_language`到模型，然后`request.env['HTTP_ACCEPT_LANGUAGE']`从控制器传递到模型：

```
if @website.update_attributes(params[:website])
  @website.request_language = request.env['HTTP_ACCEPT_LANGUAGE']
  # ... 
```

现在您可以像以前一样进行一些修改：

```
def auto_language
    if self.language == "Automatic (by user's browser language)"
         self.language = full_language(self.request_language.scan(/^[a-z]{2}/).first)
    end
 end 
```

我能想到的第二种方法是在控制器中使用前/后过滤器来影响参数，然后再将它们传递给模型。

...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:25:19.390

如果您想在创建操作后更新某些内容但不更新操作，请参见示例

```
# write in your model
after_create :xyz
def xyz
 ...
 ...
end 
```

创建操作后调用上述方法**xyz 。**当更新调用时，它不会调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T12:11:43.013

`request`对象在模型中不可用。您应该在控制器层上进行这些调整。

```
def action
    if @model.language == "Automatic (by user's browser language)"
         @model.language = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
    end
    if @model.save
        ... 
    else
        ...
    end
end

private

def full_language
  ...
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T12:31:44.223

您需要更改哈希`:language`中的`params`值，因为这就是您最终传递给`@website.update_attributes`. 我还建议将该条件移至模型层，以使您的控制器代码更具可读性：

```
# app/controllers/websites_controller.rb
def update
  @website = Website.find(params[:id])
  if @website.language_automatic?
    params[:website][:language] = full_language(request.env['HTTP_ACCEPT_LANGUAGE'].scan(/^[a-z]{2}/).first)
  end
  respond_to do |format|
    if @website.update_attributes(params[:website])
      format.html { redirect_to @website, 
        notice: 'Note: code has been updated. Please replace the code you have on your website with the code below. Only then changes will take effect.'}
      format.js
    end
  end
end

# app/models/website.rb
def language_automatic?
  language == "Automatic (by user's browser language)"
end 
```

# javascript - Javascript - 正则表达式大写和小写和混合

> ID：12745930
> 
> 赞同：4
> 
> 时间：2012-10-05T12:06:38.700
> 
> 标签：javascript, regex

我有这个代码：

```
var cadena = prompt("Cadena:");

document.write(mayusminus(cadena));

function mayusminus(cad){
    var resultado = "Desconocido";

    if(cad.match(new RegExp("[A-Z]"))){
        resultado="mayúsculas";
    }else{
        if(cad.match(new RegExp("[a-z]"))){
            resultado="minúsculas";
        }else{
            if(cad.match(new RegExp("[a-zA-z]"))){
            resultado = "minúsculas y MAYUSCULAS";
            }
        }
    }
    return resultado;
} 
```

我总是有**mayusculas**或小号，从不**小号 y MAYUSCULAS** **（**混合），我正在学习正则表达式并且不知道我的错误：S

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:10:52.713

```
new RegExp("[A-Z]") 
```

*当任何*字符`cadena`为大写字母时匹配。*要在所有*字符都是大写时进行匹配，请使用

```
new RegExp("^[A-Z]+$") 
```

强制它在`^`开始时开始，`$`强制它在结束时结束，并`+`确保在结束之间有一个或多个`[A-Z]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T12:11:18.423

我相信您想使用正则表达式模式`^[a-z]+$`，`^[A-Z]+$`并且`^[a-zA-Z]+$`.

在正则表达式中，插入符号`^`匹配字符串中第一个字符之前的位置。同样，`$`匹配字符串中最后一个字符之后。另外，`+`表示*一次或多次出现*。

如果要确保字符串中没有其他列出的字符，则必须在模式中使用`^`and 。`$`

* * *

***JavaScript***：

```
s = 'tEst';
r = (s.match(new RegExp("^[a-z]+$")))    ? 'minúsculas' :
    (s.match(new RegExp("^[A-Z]+$")))    ? 'mayúsculas' :
    (s.match(new RegExp("^[a-zA-Z]+$"))) ? 'minúsculas y mayúsculas' :
                                           'desconocido'; 
```

[在此处](http://jsfiddle.net/9dv9N/)测试此代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T12:17:11.190

假设 cad 是`foo`：

```
// will return false
if (cad.match(new RegExp("[A-Z]"))) {
    resultado="mayúsculas";
// so will go there
} else {
    // will return true
    if (cad.match(new RegExp("[a-z]"))) {
        // so will go there
        resultado="minúsculas";
    } else {
        if (cad.match(new RegExp("[a-zA-z]"))) {
            resultado = "minúsculas y MAYUSCULAS";
        }
    }
} 
```

现在，假设 cad 是`FOO`：

```
// will return true
if (cad.match(new RegExp("[A-Z]"))) {
    // so will go there
    resultado="mayúsculas";
} else {
    if (cad.match(new RegExp("[a-z]"))) {
        resultado="minúsculas";
    } else {
        if (cad.match(new RegExp("[a-zA-z]"))) {
            resultado = "minúsculas y MAYUSCULAS";
        }
    }
} 
```

最后，假设 cad 是`FoO`：

```
// will return true
if (cad.match(new RegExp("[A-Z]"))) {
    // so will go there
    resultado="mayúsculas";
} else {
    if (cad.match(new RegExp("[a-z]"))) {
        resultado="minúsculas";
    } else {
        if(cad.match(new RegExp("[a-zA-z]"))) {
            resultado = "minúsculas y MAYUSCULAS";
        }
    }
} 
```

如您所见，嵌套`else`从未被访问过。

你可以做的是：

```
if (cad.match(new RegExp("^[A-Z]+$"))) {
    resultado="mayúsculas";
} else if (cad.match(new RegExp("^[a-z]+$"))) {
    resultado="minúsculas";
} else {
    resultado = "minúsculas y MAYUSCULAS";
} 
```

解释：

`^`表示*从字符串的开头*，

`$`表示*到字符串的末尾*，

`<anything>+`*至少*意味着任何东西。

也就是说，

`^[A-Z]+$`意味着*字符串应该只包含大写字符*，

`^[a-z]+$`意味着*字符串应该只包含小写字符*。

因此，如果字符串不仅由大写或小写字符组成，则字符串包含它们两者。**

# django - django 在服务器中引发语法错误，尽管它适用于 localhost

> ID：12745934
> 
> 赞同：0
> 
> 时间：2012-10-05T12:06:51.253
> 
> 标签：django, django-models, syntax-error, mod-wsgi

我正在使用 mod_wsgi 和 virtualenv 并运行 django 应用程序。但是，它会引发有趣的语法错误。虽然它在我的本地运行，但它没有在服务器上运行。

```
 SyntaxError: invalid syntax
 mod_wsgi (pid=29322): Exception occurred processing WSGI script '/var/www/html/myproject/django.wsgi'.
 Traceback (most recent call last):
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 272, in __call__
     response = self.get_response(request)
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/core/handlers/base.py", line 169, in get_response
     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/core/handlers/base.py", line 214, in handle_uncaught_exception
     if resolver.urlconf_module is None:
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/core/urlresolvers.py", line 274, in _get_urlconf_module
     self._urlconf_module = import_module(self.urlconf_name)
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
     __import__(name)
   File "/home/sin/django_projects/myproject/urls.py", line 8, in ?
     admin.autodiscover()
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/contrib/admin/__init__.py", line 26, in autodiscover
     import_module('%s.admin' % app)
   File "/home/sin/django_projects/webapp/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
     __import__(name)
   File "/home/sin/django_projects/myproject/userprofile/admin.py", line 1, in ?
     from myproject.companyreview.models import ReviewRate
   File "/home/sin/django_projects/myproject/companyreview/models.py", line 9
      class CommentStatus(): 
```

SyntaxError：无效的语法

**公司审查模型**

```
class CommentStatus():
    PENDING = 0
    CONFIRMED = 1
    DELETED = 2 
```

**django.wsgi**

```
import os
import sys
import site

vepath = '/home/sin/django_projects/webapp/lib/python2.7/site-packages'
site.addsitedir(vepath)

os.environ['PYTHON_EGG_CACHE'] = '/tmp'

sys.path.append('/home/sin/django_projects/')
sys.path.append('/home/sin/django_projects/myproject/')

os.environ['DJANGO_SETTINGS_MODULE'] = 'myproject.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我怀疑 python 版本，因为如果有语法错误，它不会在本地运行。什么可能导致这种愚蠢的错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:12:44.213

早于 2.5 的 Python 版本不接受空的基本列表。从括号派生`object`或删除括号。

```
class CommentStatus(object): 
```

# extjs - ExtJs 中的模型别名

> ID：12745935
> 
> 赞同：4
> 
> 时间：2012-10-05T12:06:58.203
> 
> 标签：extjs, model

我有我的模型的定义。这是：

```
Ext.define('KP.model.account.AccountList', {
    extend: 'Ext.data.Model',

    alias: 'model.d_AccountList',

    fields: ['key', 'number', 'personal_account', 'full_name', 'adress', 'pu']
}); 
```

所以，我想**通过 alias**创建这个模型。或者定义商店，像这样使用这个模型：

```
model: 'd_AccountList' 
```

我怎样才能做到这一点？谢谢！

PS：也许我的别名是错误的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:06:19.337

据我所知，没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:25:03.757

我认为您不能为模型创建别名，Ext.data.Model 上没有别名属性。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)

```
Ext.define('model.d_AccountList', {
    extend: 'Ext.data.Model',    
    fields: ['key', 'number', 'personal_account', 'full_name', 'adress', 'pu']
});

var accountList = Ext.Create('model.d_AccountList', {
    key: 11,
    number: 33,
    personal_account: 4553463
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-10T15:59:42.797

伙计们，

'alias' 成员存在于从 Ext.Class 继承的所有 ExtJS 类中。这包括模型。只要不与其他别名冲突，您就可以使用任何您想要的别名。最好按域划分它们。已经有一些域，例如“widget”、“store”、“proxy”。使用别名配置时是否需要指定域或完整别名取决于实例化类。例如，如果您引用别名为“proxy.myProxyAlias”的代理，则应在商店中使用：proxy:'myProxyAlias' 原因是 Ext.data.Store 类将自动预先挂起 'proxy. '。很少有其他人在做同样的伎俩：

*   从关联中定义“读者”
*   从代理定义'writer'/'reader'
*   从表单中定义“读者”
*   从图表中定义“轴”/“系列”
*   从商店定义“代理”/另一个“商店”
*   定义一个“小部件”

在您使用的情况下，您确实为模型类提供了该技巧，因此，如果您在商店中使用别名： alias: 'model.myModel' 定义模型，则必须使用完整的模型类名称或： xtype: 'model.myModel'

希望能帮助到你。

# mysql - select ...for update 导致锁定

> ID：12745938
> 
> 赞同：0
> 
> 时间：2012-10-05T12:07:12.960
> 
> 标签：mysql

当用户注册我们的服务时，我想从许多中分配一个 solr 核心（资源的种类）。一个核心**专**供一位用户使用（例如！）。而且我想用来`select ...for update`确保并发注册看到（和使用）**不同的行**。

东西适用于第一次注册交易；我们得到允许使用的行。但是对于第二个（向前），`Lock wait timeout exceeded`发生了；**当我想要下一行时**。

为什么 MySQL 会抛出这个错误？

从 1 号航站楼：

```
mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from SolrCoresPreallocated order by id limit 1 for update;
+----+-------------+-----+-----+
| id | used_status | sid | cid |
+----+-------------+-----+-----+
|  1 |           0 |   0 | 400 |
+----+-------------+-----+-----+
1 row in set (0.00 sec) 
```

在 2 号航站楼：

```
mysql> begin;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from SolrCoresPreallocated order by id limit 1 for update;
ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction
mysql>  rollback;
Query OK, 0 rows affected (0.00 sec) 
```

其实我想看看：

```
mysql> select * from SolrCoresPreallocated order by id limit 1 for update;
+----+-------------+-----+-----+
| id | used_status | sid | cid |
+----+-------------+-----+-----+
|  2 |           0 |   0 | 401 |
+----+-------------+-----+-----+
1 row in set (0.00 sec) 
```

* * *

我的数据是：

```
mysql> select * from SolrCoresPreallocated;
+----+-------------+-----+-----+
| id | used_status | sid | cid |
+----+-------------+-----+-----+
|  1 |           0 |   0 | 400 |
|  2 |           0 |   0 | 401 |
|  3 |           0 |   0 | 402 |
|  4 |           0 |   0 | 403 |
|  5 |           0 |   0 | 404 |
|  6 |           0 |   0 | 405 |
+----+-------------+-----+-----+
6 rows in set (0.00 sec) 
```

我在中描述了我的问题：[不同的交易必须保证选择不同的项目；避免争吵](https://stackoverflow.com/questions/12672728/different-transactions-must-guarantedly-select-different-items-avoid-contention)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:19:22.230

这个查询实际上总是请求并锁定同一行，无论哪个 MySQL 连接运行它。

```
select * from SolrCoresPreallocated order by id limit 1 for update; 
```

锁定的行不会以某种方式神奇地从未来的查询中排除。他们只是被锁定了。这就是你看到的问题；您的所有操作都锁定了同一行。

如果你能做这样的事情（注意：伪代码；注意：我不理解你的模式）它很可能会工作得更好

```
 begin;

 update SolrCoresPreallocated
    set allocated = (this customer id)
  where allocated = 0 
  limit 1;

(check result; if no rows were modified you ran out of allocated=0 rows.)

select * from SolrCoresPreallocated where allocated = (this customer id);

commit; 
```

# android - Android修复图像大小

> ID：12745940
> 
> 赞同：1
> 
> 时间：2012-10-05T12:07:24.843
> 
> 标签：android

在我的屏幕上，我有 3 个按钮，在这些按钮下方的下一行中，我有 3 个名称（与这些按钮相对应的名称），但我的问题是，当名称更改时，按钮的大小也会更改，但我确实想修复大小这里的按钮是我的代码请帮助我

```
<TableLayout android:background="@drawable/toptab"
    android:layout_width="fill_parent" android:id="@+id/tableLayout"
    android:layout_height="wrap_content"
    android:stretchColumns="1" android:gravity="center_vertical" 
    android:layout_alignParentBottom="true">

    <TableRow>

        <ImageButton android:id="@+id/btnPrev" android:background="@drawable/imgPrev"
            android:layout_marginLeft="5dp"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
             />

        <ImageButton android:id="@+id/btnRefresh" 
            android:layout_gravity="center" android:background="@drawable/refreshbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            />

        <ImageButton android:id="@+id/btnNext"
            android:background="@drawable/imgNext"
            android:layout_width="5dp"
            android:layout_height="20dp"
            android:layout_marginRight="5dp" />
    </TableRow>
    <TableRow >
        <TextView android:id="@+id/prev" android:text="Hk" android:layout_marginLeft="5dp" />
        <TextView android:id="@+id/refresh" android:text="Refresh" android:layout_gravity="center" />
        <TextView android:id="@+id/next" android:text="RS" android:layout_marginRight="5dp" />
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:12:41.907

如果您想避免固定按钮大小，那么我建议使用与 , 不同的布局`TableLayout`，也许`RelativeLayout`并且`TextViews`with property`alignBaseline`或`LinearLayout`with `weight`properties 可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:21:25.850

您应该使用线性布局而不是表格布局，并使用 Weight 属性将按钮和文本视图对齐在相等的尺寸，所以在这里如果您在文本视图中写入更多文本，按钮大小不会增加。您也可以以相同的方式添加更多按钮。下面是 XML 文件和屏幕截图。

```
<?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_weight="1" android:gravity="center_horizontal">

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Button" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextViewTextTextViewTextTextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_weight="1" android:gravity="center_horizontal">
             <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Button" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" android:layout_weight="1" android:gravity="center_horizontal">
             <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Button" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

        </LinearLayout>

    </LinearLayout> 
```

![在此处输入图像描述](../Images/482fbe6fa3c32478202ba2273abf18b4.png)

# java - TCP 打孔 - 如何进行此步骤

> ID：12745941
> 
> 赞同：2
> 
> 时间：2012-10-05T12:07:26.097
> 
> 标签：java, tcp, udp, p2p, udpclient

我用 Java 完成了一个在 LAN 范围内完美运行的 P2P 程序，现在我陷入了众所周知的 NAT 穿越问题。我想让我的用户通过 NAT 边界相互连接（我知道不可能 100% 了解它）。我已经阅读了很多关于这个主题的内容，虽然我已经理解了这个概念，但我仍然对 TCP 打孔有疑问。

我想要做的是将两个客户端相互连接（它们生活在同一个NAT下），它们的ip分别是*192.168.100.1*和*192.168.100.2*（它们可以直接相互连接）。他们首先通过端口 80 上的套接字连接到 PHP 服务器。服务器注册其公共 ips 和端口，如下所示：

**客户端 1：** 200.000.000.1 :1478
**客户端 2：** 120.000.000.1 :2547

每个客户端的 Java 套接字在连接时返回，例如：

**客户端 1：** Socket[addr=/xx.xx.xx.xx,port=80,localport=54632]
**客户端 2：** Socket[addr=/xx.xx.xx.xx,port=80,localport=41789]

*id est*，除了通过端口 80 与服务器打开的两个 tcp 连接之外，我还有每个客户端的私有 ip、公共 ip、本地端口和公共端口。那么，这就是我的问题。从现在开始，我不知道如何进行。关于这一步，我读到的内容对我来说不是很清楚。

是否有必要让两个客户端监听公共端口（*1478-2547*）或本地端口（*54632-41789*）？同时让他们尝试在对方的公共或私人上进行连接？我需要打开多少个其他套接字？我做了一些测试，但我认为有问题（*** *connection denied* ***）。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:14:06.710

有不同的方法可以继续。

1.  您可以实现某种代理。两个客户端都连接到它（在 NAT-Barrier 之外）并让它路由他们的消息。
2.  如果您想要直接连接 Client2Client，您的用户必须在其 NAT-Barrier 上打开一个端口并将其转发到本地 IP。

这很烦人，但这也是它的工作原理。

对于客户端 A，知道客户端 B 的本地数据是没有用的，因为他无法访问它。对于您的最后几个问题：本地客户端 A 侦听端口让我们说 X ，然后本地客户端 B 必须连接到客户端 A 网络的公共 IP。应该是路由器吧 在那里，必须将端口配置为转发到本地客户端 A。仅此而已。如果您遵循可能性 #1（见上文），您将必须在端口 X 上侦听一个公共服务，客户端 A*和*B 连接到该端口。由于这些将是到公共 IP 的传出连接，因此不需要打孔。

# macos - 通过互联网共享从我的移动设备访问我的电脑本地主机

> ID：12745950
> 
> 赞同：0
> 
> 时间：2012-10-05T12:08:25.763
> 
> 标签：macos, apache, osx-lion, osx-snow-leopard, sharing

我有一个 mac book pro 10.7.4 osx，它正在运行一个可以通过`http://localhost/`.
然后我通过互联网共享 wi-fi 共享我的连接。

由于这个共享连接，我可以从我的移动设备导航。我的问题是：
是否有可能通过使用“互联网共享”从我的移动设备访问我的本地主机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:36:57.027

您应该能够通过 IP 地址从您的移动设备访问您的 PC。像“http://192.168.0.2/”这样的东西，你应该把你的电脑 IP 而不是“192.168.0.2”放在哪里

如果您想通过域名访问 PC，您可以在家庭网络中设置简单的 DNS 服务器，它将域名映射到 IP。

# php - 将带有键和值的字符串转换为数组

> ID：12745952
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:08:28.367
> 
> 标签：php, arrays

> **可能重复：**
> [反序列化问题](https://stackoverflow.com/questions/4968206/unserialize-problem)

我有一个形式为：

```
a:16:{i:0;s:3:"696";i:1;s:3:"698";i:2;s:3:"690";}" 
```

我正在考虑将其转回数组，以便它符合以下要求：

```
array(16) {
  0 => 696,
  1 => 698,
  2 => 690
} 
```

任何想法如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T12:10:11.363

它看起来像一个序列化的 PHP 字符串，试试

```
$array = unserialize($value); 
```

手册： http: [//php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

**更新**

该字符串包含一个缺陷，因为它需要一个包含 16 个元素的数组，但只给出了 3 个。

考虑：

```
$a = array (
  0 => '696',
  1 => '698',
  2 => '690'
);

$s = serialize($a); 
```

将导致：

```
 "a:3:{i:0;s:3:"696";i:1;s:3:"698";i:2;s:3:"690";}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:11:14.967

使用该[`unserialize()`](http://php.net/manual/en/function.unserialize.php)功能。

```
$array = unserialize($serialized_string); 
```

# vim - 如果出现在当前行的 K 行中，Vim 会找到模式 P 或 Q #N

> ID：12745955
> 
> 赞同：0
> 
> 时间：2012-10-05T12:08:42.377
> 
> 标签：vim

我正在编辑打开的文本文件中的第 N 行`vim`。我想找到所有出现的模式 P 或模式 Q 当且仅当它们出现在包含范围 [NK, N+K] 的行号中，其中 K 是定义变量的值。这样的事情有可能吗？这将是一个非常需要的脚本的基础......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:18:58.680

```
:-5,+5g/P\|Q 
```

显示包含`P` *或* `Q`介于当前行上方 5 行和下方 5 行之间的所有行。

看看`:help search()`你是否想在脚本中这样做。

有关`:help range`范围的更多信息，请参阅。

# iphone - 播放不同的声音

> ID：12745964
> 
> 赞同：1
> 
> 时间：2012-10-05T12:09:23.920
> 
> 标签：iphone, ios, avfoundation

我正在开发 iphone 应用程序，我需要多种声音，例如成人声音变成儿童声音。

我该如何实现它，我正在使用 AVFoundation 播放语音。

请提供一些编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T12:24:13.663

要实现您所需要的，您需要音高转换功能。您可以使用 OpenAL 来实现这一点。

具体来说，在 OpenAL 中，设置音高

```
alSourcef(source, AL_PITCH, 1.2f); 
```

其中 source 是 OpenAL 声源的 id。

如果您是 OpenAL 新手，请从这里开始：http: [//benbritten.com/2008/11/06/openal-sound-on-the-iphone/](http://benbritten.com/2008/11/06/openal-sound-on-the-iphone/)

# excel - 强制在 Excel 中输入正确格式的电话号码

> ID：12745966
> 
> 赞同：2
> 
> 时间：2012-10-05T12:09:24.703
> 
> 标签：excel

Microsfot Excel 中是否有办法强制使用国际代码输入格式正确的电话号码列？

我的意思是电话号码的格式：

*+1 12345678

+44 1231231

0044 123123132*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:23:22.777

**方式一**

在那里，进入excel，右键单击一个单元格，或单元格范围，甚至是您希望强制格式化的整个列，然后单击格式化单元格，一旦你在那里，你将在下面看到：

![菲码](../Images/1d5fdea96046dfbbaa598c1aa6c8e371.png)

在那里，如果尚未选择**数字选项卡，请单击它，然后单击****自定义**类别并在类型中**键入：**如上所示的格式`+## ####### ####`。

这将允许你做你想做的事。我希望这有帮助。

**方式二**

另一种方法是使用条件格式。我链接到下面具有条件格式的工作表。我已经做到了，因此您可以在单元格中输入**US**，**UK**，**Other**并且格式会发生变化。同样，这可能不是您的完美答案，但它是众多方法之一......

[http://www.kaboomlabs.com/excel/examples/CF.xlsx](http://www.kaboomlabs.com/excel/examples/CF.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:42:54.450

您可以将此公式用作数据验证的条件：

```
=OR(LEFT(E1,1)="+",LEFT(E1,2)="00") 
```

![在此处输入图像描述](../Images/a701c5f7b6ad29caf2b471f2749f5a67.png)

[在这里](http://www.get-digital-help.com/2009/11/25/search-for-multiple-text-strings-in-multiple-cells-and-use-in-data-validation-in-excel/)你可以看到你如何使用数据验证

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T15:37:47.670

我想我和你做的一样——我需要在一个列中输入几个不同的国际号码，这些号码可能有不同的格式，一些拨号代码有 3 位数字，一些 2 位等。

但是，我发现在拨号代码前添加撇号是我可以保留文本（包括前面的两个零）的唯一方法。撇号显然告诉 excel 将后面的内容视为普通文本，而不是数字。

比每次输入撇号更容易的是选择整个列，然后在格式单元格的数字选项卡下，选择“文本”而不​​是自定义或数字。

希望有帮助，它肯定对我有帮助！

# c# - 处理从设备接收到的数据

> ID：12745967
> 
> 赞同：-1
> 
> 时间：2012-10-05T12:09:34.497
> 
> 标签：c#

我有一个带有 2 个按钮（BIT 和数据）的图形用户界面。当我按下 BIT 按钮时，它会将十六进制数据发送到连接设备的端口。设备使用另一个十六进制重放。我用 port.DataReceived 函数读取了这个十六进制，将它显示在一个文本框中，并检查每个字节的每一位，并在文本框中显示值的位。这个想法工作正常。当我按下数据按钮时，我将不同的十六进制发送到同一设备，并以不同的十六进制重播。现在我只想显示回放而不检查它。我不知道怎么做，因为当按下数据按钮发送十六进制时，接收来自设备的响应并检查每一位。我不想这样做，我只想以十六进制显示它。如果有人可以帮助我，我会在这里发布我的代码。

我尝试制作两种不同的功能来从设备读取重播，但我认为这种方式不好。我阅读了关于标志的相同内容，我希望这是解决我的问题的更好方法，我想寻求帮助。

我也会在这里发布我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:13:52.843

为什么不分离出 readFromDevice() 代码，并将接收到的值传递回调用方法？这样，您可以根据需要以多种不同的方式处理返回的值。

编辑：

我猜这个设计会异步回复（即它会在你发送数据后一段时间回复）？如果是这种情况，您将需要向 com 端口添加一个事件处理程序，然后处理您收到的数据。

您还需要跟踪单击了哪个按钮。您可以为此使用一个简单的布尔值：

```
//In the data buttons click handler
DataButtonClicked = true;
BitButtonClicked = false;

//add an event handler to the port
String RecievedData;
SerialPort mySerialPort = new SerialPort("COM1");
mySerialPort.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

//code for the event handler
private static void DataReceivedHandler(
                    object sender,
                    SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;
    RecievedData = sp.ReadExisting();

    if(DataButtonClicked)
    {
         //display the value one way
    }
    if(BitbuttonClicked)
    {
         //display the value another way
    }
} 
```

我基于我在下面发布的 MSDN 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:36:59.327

```
namespace read_display_data 
```

{公共部分类Form1：表格{

```
 SerialPort port = new SerialPort("COM2", 19200, Parity.None, 8, StopBits.One);

    public Form1()
    {
        InitializeComponent();

        port.Open();

    }

    private void Form1_Load(object sender, EventArgs e)
    {
    port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceivedBIT);

      // port.ReadTimeout = 500;

    }

    private void BITbutton_Click(object sender, EventArgs e)
    {

            port.Write(new byte[] { 0x10 0x04, 0x06 }, 0, 3);

            byte[] buffer1 = new byte[] {  0x10 0x04, 0x06 };

            LogSent(LogMsgType.Outgoing, DateTime.Now + "  --  " + ByteArrayToHexString(buffer1) + "\n");

            //port.Close();

    } 
```

私人无效Databutton_Click（对象发送者，EventArgs e）{

```
 port.Write(new byte[] { 0x11, 0x43, 0x0D}, 0, 3);

        byte[] buffer1 = new byte[] {0x11, 0x43, 0x0D };

        LogSent(LogMsgType.Outgoing, DateTime.Now + "  --  " + ByteArrayToHexString(buffer1) + "\n");
    }

    private Color[] LogMsgTypeColor = { Color.Blue, Color.Green, Color.Black, Color.Orange, Color.Red };

    public enum LogMsgType { Incoming, Outgoing, Normal, Warning, Error };

    void port_DataReceivedBIT(object sender, SerialDataReceivedEventArgs e)
    {

            //port.Open();

            this.Invoke(new EventHandler(AddReceiveBIT));

    }

    private void AddReceiveBIT ( object s, EventArgs e)
    {

            Thread.Sleep(100);

            byte[] buffer = new byte[port.BytesToRead];

            port.Read(buffer, 0, buffer.Length);

            LogReceive(LogMsgType.Incoming, DateTime.Now + "  --  " + ByteArrayToHexString(buffer) + "\n");

            Log(LogMsgType.Incoming, checkBit(buffer) + "\n");

        }

    private string checkBit(byte[] buffer)
    {
        StringBuilder message = new StringBuilder();
        var responseByte = buffer[7];
        if ((responseByte & (1 << 0)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok    ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error    ");
        }

        if ((responseByte & (1 << 1)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok   ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error   ");
        }

        if ((responseByte & (1 << 2)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok  ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error  ");
        }

        if ((responseByte & (1 << 3)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok  ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error  ");
        }

        if ((responseByte & (1 << 4)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok  ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error  ");
        }

        if ((responseByte & (1 << 5)) == 0)
        {
            message.AppendFormat("rezerved                                                                            ok  ");
        }
        else
        {
            message.AppendFormat("rezerved                                                                          error  ");
        }

        if ((responseByte & (1 << 6)) == 0)
        {
            message.AppendFormat("Serial Communication                                                        ok  ");
        }
        else
        {
            message.AppendFormat("Serial Communication                                                              error  ");
        }

        if ((responseByte & (1 << 7)) == 0)
        {
            message.AppendFormat("Optical Zoom                                                                     ok ");
        }
        else
        {
            message.AppendFormat("Optical Zoom                                                                     error  ");
        }

        return message.ToString();
    }

    private string ByteArrayToHexString(byte[] PortBuffer)
    {
        StringBuilder sb = new StringBuilder(PortBuffer.Length * 3);
        foreach (byte b in PortBuffer)
            sb.Append(Convert.ToString(b, 16).PadLeft(2, '0').PadRight(3, ' '));
        return sb.ToString().ToUpper();

    }

    private void LogReceive(LogMsgType msgtype, string msg)
    {
        richTextBox1.Invoke(new EventHandler(delegate
        {
            richTextBox1.SelectedText = string.Empty;
            richTextBox1.SelectionFont = new Font(richTextBox1.SelectionFont, FontStyle.Bold);
            richTextBox1.SelectionColor = LogMsgTypeColor[(int)msgtype];
            richTextBox1.AppendText(msg);
            richTextBox1.ScrollToCaret();

        }
        ));

    }
    private void LogSent(LogMsgType msgtype, string msg)
    {
        textBox2.Invoke(new EventHandler(delegate
        {
            textBox2.SelectedText = string.Empty;
            textBox2.AppendText(msg);
            textBox2.ScrollToCaret();

        }
        ));

    }

    private void Log(LogMsgType msgtype, string msg)
    {
        textBox3.Invoke(new EventHandler(delegate
        {
            textBox3.Clear();
            textBox3.SelectedText = string.Empty;
            textBox3.AppendText(msg);
            textBox3.ScrollToCaret();

        }
        ));

    }

    private void textBox2_TextChanged(object sender, EventArgs e)
    {

    }

    private void label2_Click(object sender, EventArgs e)
    {

    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void textBox3_TextChanged(object sender, EventArgs e)
    {

    }

    private void textBox4_TextChanged(object sender, EventArgs e)
    {

    }

    private void richTextBox1_TextChanged(object sender, EventArgs e)
    {

    } 
```

# android - StateListDrawable 不起作用

> ID：12745968
> 
> 赞同：3
> 
> 时间：2012-10-05T12:09:37.633
> 
> 标签：android, statelistdrawable

我正在尝试以编程方式将 a 设置`StateListDrawable`为库项目的自定义视图的背景。这就是我正在做的事情：

```
final TypedArray a = getContext().obtainStyledAttributes(attrs,
            R.styleable.ActionBar);
    int firstColor = a.getColor(
            R.styleable.ActionBar_backgroundGradientFirstColor, 0xff000000);
    int secondColor = a
            .getColor(R.styleable.ActionBar_backgroundGradientSecondColor,
                    0xff000000);
    int textViewColor = a.getColor(R.styleable.ActionBar_titleColor,
            0xffffffff);
    int onClickColor = a.getColor(
            R.styleable.ActionBar_backgroundClickedColor, 0xff999999);
    a.recycle();

    StateListDrawable sld = new StateListDrawable();
    GradientDrawable drawable = new GradientDrawable(
            Orientation.TOP_BOTTOM, new int[] { firstColor, secondColor });
    sld.addState(new int[] { android.R.attr.state_enabled },
            new ColorDrawable(onClickColor));
    sld.addState(new int[] { android.R.attr.state_pressed }, drawable);

    action2.setBackgroundDrawable(sld);
    action3.setBackgroundDrawable(sld);
    actionBack.setBackgroundDrawable(sld);
    pb.setBackgroundDrawable(drawable);
    tv.setBackgroundDrawable(drawable);
    tv.setTextColor(textViewColor); 
```

但是，这不起作用：它总是绘制**启用**状态。我希望它在**按下按钮时绘制****Pressed**状态。我究竟做错了什么？

 *** * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T13:58:08.663

我猜按钮在按下时仍然处于启用状态？

您可以尝试颠倒顺序：

```
sld.addState(new int[] { android.R.attr.state_pressed }, drawable);
sld.addState(new int[] { android.R.attr.state_enabled },
        new ColorDrawable(onClickColor)); 
```

可能正在绘制第一个当前有效的状态。

如果您在按下时想要不同的背景，并且在所有其他情况下想要另一个背景，您也可以使用：

```
sld.addState(new int[] { android.R.attr.state_pressed }, drawable);
sld.addState(new int[] { StateSet.WILD_CARD },
        new ColorDrawable(onClickColor)); 
```

**另外：**我刚刚对此进行了测试，以下测试代码对我有用：

```
Button testButton = new Button(context);
            testButton.setText("Test");
            StateListDrawable sld = new StateListDrawable();
            GradientDrawable drawable = new GradientDrawable(
                    Orientation.TOP_BOTTOM, new int[] { Color.BLUE, Color.RED });
            sld.addState(new int[] { android.R.attr.state_pressed }, drawable);
            sld.addState(StateSet.WILD_CARD, new ColorDrawable(Color.YELLOW));
            testButton.setBackgroundDrawable(sld);          
            mainLayout.addView(testButton); 
```**

# java - 捏缩放 ViewPager 内的 ImageView ？onTouch 事件不起作用？

> ID：12745971
> 
> 赞同：3
> 
> 时间：2012-10-05T12:09:44.523
> 
> 标签：java, android, android-layout

我在堆栈溢出中浏览了许多帖子，但找不到可能的解决方案。

```
package com.sourcebits.gallerygestures;

    import android.app.Activity;
    import android.graphics.Matrix;
    import android.graphics.PointF;
    import android.os.Bundle;
    import android.support.v4.view.PagerAdapter;
    import android.support.v4.view.ViewPager;
    import android.util.FloatMath;
    import android.util.Log;
    import android.view.MotionEvent;
    import android.view.View;
    import android.view.View.OnTouchListener;
    import android.view.ViewGroup;
    import android.widget.Button;
    import android.widget.ImageView;

    /**
     * 
     * @author Rajeev N B
     * 
     */

    public class GalleryActivity extends Activity implements OnTouchListener {

        /**
         * Activity Context
         */
        private GalleryActivity context;

        /**
         * List of drawables
         */
        private int[] mImages = new int[6];

        /**
         * ViewPager for displaying images
         */
        private ViewPager viewPager;

        /**
         * Matrices used for Pinch and Zoom
         */
        Matrix matrix = new Matrix();
        Matrix savedMatrix = new Matrix();

        // We can be in one of these 3 states
        static final int NONE = 0;
        static final int ZOOM = 2;
        int mode = NONE;

        // Remember some things for zooming
        PointF start = new PointF();
        PointF mid = new PointF();
        float oldDist = 1f;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_gallery);
            context = GalleryActivity.this;
            viewPager = (ViewPager) findViewById(R.id.pager);
            ImagePagerAdapter adapter = new ImagePagerAdapter();
            viewPager.setAdapter(adapter);
        }

        /**
         * 
         * @author Rajeev N B Adapter for displaying the images
         * 
         */
        private class ImagePagerAdapter extends PagerAdapter {
            private int[] mImages = { R.drawable.background, R.drawable.koskula,
                    R.drawable.wallpaper, R.drawable.wallpap, R.drawable.gr,
                    R.drawable.balck };
            private int pos;
            private ImageView imageView;

            /**
             * Default Constructor
             */
            public ImagePagerAdapter() {

            }

            /**
             * Get the Count of the Pages for the View Pager
             */
            @Override
            public int getCount() {
                return mImages.length;
            }

            /**
             * Get the View from the Object
             */
            @Override
            public boolean isViewFromObject(View view, Object object) {
                pos = viewPager.getCurrentItem();
                return view == ((ImageView) object);
            }

            /**
             * Create a new Item in the viewPager
             */
            @Override
            public Object instantiateItem(ViewGroup container, final int position) {
                Button prev = (Button) findViewById(R.id.button1);
                Button next = (Button) findViewById(R.id.button2);

                next.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        if (pos < mImages.length)
                            viewPager.setCurrentItem(pos + 1);
                        Log.v("Next", "" + pos);
                    }
                });

                prev.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        if (pos > 0)
                            viewPager.setCurrentItem(pos - 1);
                        Log.v("Next", "" + pos);
                    }
                });

                imageView = new ImageView(context);
                int padding = context.getResources().getDimensionPixelSize(
                        R.dimen.padding_medium);
                imageView.setPadding(padding, padding, padding, padding);
                imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
                imageView.setImageResource(mImages[position]);
                ((ViewPager) container).addView(imageView, 0);
                imageView.setOnTouchListener(context);
                return imageView;
            }

            /**
             * Destroy the Items
             */
            @Override
            public void destroyItem(ViewGroup container, int position, Object object) {
                ((ViewPager) container).removeView((ImageView) object);
            }

        }

        /**
         * Pinch to zoom Functionality
         */
        public boolean onTouch(View v, MotionEvent event) {
            ImageView view = (ImageView) v;
            // Handle touch events here...
            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                savedMatrix.set(matrix);
                start.set(event.getX(), event.getY());
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                oldDist = spacing(event);
                if (oldDist > 10f) {
                    savedMatrix.set(matrix);
                    midPoint(mid, event);
                    mode = ZOOM;
                }
                break;
            case MotionEvent.ACTION_UP:
            case MotionEvent.ACTION_POINTER_UP:
                mode = NONE;
                break;
            case MotionEvent.ACTION_MOVE:
                if (mode == ZOOM) {
                    float newDist = spacing(event);
                    if (newDist > 10f) {
                        matrix.set(savedMatrix);
                        float scale = newDist / oldDist;
                        matrix.postScale(scale, scale, mid.x, mid.y);
                    }
                }
                break;
            }

            view.setImageMatrix(matrix);
            return true; // indicate event was handled
        }

        /** Determine the space between the first two fingers */
        private float spacing(MotionEvent event) {
            float x = event.getX(0) - event.getX(1);
            float y = event.getY(0) - event.getY(1);
            return FloatMath.sqrt(x * x + y * y);
        }

        /** Calculate the mid point of the first two fingers */
        private void midPoint(PointF point, MotionEvent event) {
            float x = event.getX(0) + event.getX(1);
            float y = event.getY(0) + event.getY(1);
            point.set(x / 2, y / 2);
        }
    } 
```

基本上是`GalleryView`使用`ViewPager`. 我正在根据可绘制数组中的位置膨胀图像视图。现在我想为我的应用程序实现 Pinch to Zoom 功能。但我无法`ImageView`在`ViewPager`. 我在没有 的情况下测试了我的`onTouchEvent`捏缩放`ViewPager`，它工作正常。它不适用于 View Pager。我猜这`ViewPager`并没有为子视图进行触摸事件。我需要捏才能放大到`ImageView`里面`ViewPager`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T11:41:27.250

如果您的 viewpager 使用的是 imageView，那么您可以使用 touchImageView。通过以下链接，您可以使用源代码来解决您的问题。

[https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java](https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java)

最后，只需用这个自定义视图替换您当前的图像视图。如果在实施过程中有任何问题，请告诉我，我会尝试澄清这一点。

# c# - 有没有办法在浏览器中呈现使用 activex 控件保存的图像，而不将其发送到服务器？

> ID：12745972
> 
> 赞同：0
> 
> 时间：2012-10-05T12:09:49.267
> 
> 标签：c#, file-upload, activex

我有一个**html**页面，允许用户单击链接以拍摄**任何活动窗口的快照**。当用户单击该按钮时，控制权将传递给`C# code of an ActiveX`插件（存在于**CAB**文件中），该插件会截取屏幕截图并将其保存在某个临时位置。我的问题是：

1.  我希望**在对话框中向用户显示该快照**，并要求他在将其发送到服务器之前选择一个名称。快照保存在一个临时位置，该位置显然无法访问**javascript**代码，因此我无法在 HTML 中构建对话框。有什么办法吗？

2.  我必须将图像上传到服务器。我发现的大多数示例都使用该`<html type="file"/>`技术上传文件，但这不是这里的选项，因为我们必须以编程方式上传它。`WebClient.uploadFile()`会为我做这件事，但在服务器端，我是否将其视为文件已通过`<html type="file"/`> 技术上传，或者一些特殊的东西（接收端可能是 Java）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:24:34.973

如果您能够修改 activex 组件，则可以使其将位图公开为二进制文件并使用 javascript 获取字节并将它们呈现为位图。像这样：

```
if (window.ActiveXObject) {
    try {
        var excelApp = new ActiveXObject ("Excel.Application");
        excelApp.Visible = true;
    }
    catch (e) {
        alert (e.message);
    }
}
else {
    alert ("Your browser does not support this example.");
} 
```

# hibernate - Hibernate 不创建表

> ID：12745973
> 
> 赞同：2
> 
> 时间：2012-10-05T12:09:51.043
> 
> 标签：hibernate, postgresql, jpa

我已经开始学习 Spring Roo、Hibernate、JPA 等内容。我创建了一个简单的模型，它必须是我在 PostgreSQL 中的表（我手动创建了“jtdb”数据库）。但是当我部署 pogram（通过在 STS 中选择在服务器上运行）时，什么都没有创建。我可以通过使用 entityManagerFactory （或类似的东西）创建表，但我听说有可能在没有工厂的情况下使用 @Autowired 的东西来创建表。

这是我的代码：

MyTable.java：

```
package com.db.model;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class MyTable {
    @Id
    @Column(name="id")
    private long id;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }
} 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="jtdb" transaction-type="RESOURCE_LOCAL">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
<class>com.db.model.MyTable</class>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>

        <property name="hibernate.connection.provider_class" value="org.hibernate.connection.DriverManagerConnectionProvider" />
        <property name="hibernate.connection.url" value="jdbc:postgresql://00.00.00.000:5432/jtdb"/>
        <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
        <property name="hibernate.connection.username" value="user"/>
        <property name="hibernate.connection.password" value=""/>

        <!-- value="create" to build a new database on each run; value="update" to modify an existing database; value="create-drop" means the same as "create" but also drops tables when Hibernate closes; value="validate" makes no changes to the database -->
        <property name="hibernate.hbm2ddl.auto" value="create"/>
        <property name="hibernate.ejb.naming_strategy" value="org.hibernate.cfg.ImprovedNamingStrategy"/>
        <property name="hibernate.connection.charSet" value="UTF-8"/>
        <!-- Uncomment the following two properties for JBoss only -->
        <!-- property name="hibernate.validator.apply_to_ddl" value="false" /-->
        <!-- property name="hibernate.validator.autoregister_listeners" value="false" /-->
    </properties>
</persistence-unit> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xmlns:jee="http://www.springframework.org/schema/jee" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd         http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd         http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd">
<context:property-placeholder location="classpath*:META-INF/spring/*.properties"/>
<context:spring-configured/>
<context:component-scan base-package="com.db.model">
    <context:exclude-filter expression=".*_Roo_.*" type="regex"/>
    <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
</context:component-scan>
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testOnReturn" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="1800000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="minEvictableIdleTimeMillis" value="1800000"/>
</bean>
<bean class="org.springframework.orm.jpa.JpaTransactionManager" id="transactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>
<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="jtdb"/>
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

数据库属性

```
database.driverClassName=org.postgresql.Driver
database.url=jdbc:postgresql://00.00.00.000:5432/jtdb
database.username=user
database.password= 
```

你还需要什么来诊断我的问题？我不知道我应该在这里发布什么。

我没有错误或异常（在我正在查看的控制台中），只是：

```
// a lot of info stuff but no errors or exceptions
// ...
INFO: Starting ProtocolHandler ["http-bio-8080"]
paź 05, 2012 1:23:17 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 11456 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:49:26.640

我从未真正看到将 hibernate-configuration 值（如`hibernate.hbm2ddl.auto`）放入**persistence.xml**中，但我想它至少对其中一些有用，尽管显然不是对所有的。相反，尝试在您的`entityManagerFactory`-bean 中定义它们：

```
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="jtdb"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />                            
            <property name="databasePlatform" value="org.hibernate.dialect.PostgreSQLDialect" />
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">create</prop>            
        </props>
    </property>

</bean> 
```

# javascript - 如何使用javascript检查文本框是否放置在面板内？

> ID：12745979
> 
> 赞同：0
> 
> 时间：2012-10-05T12:10:13.840
> 
> 标签：javascript, asp.net

我在一个内有一个`TextBox`和一个。我已将 DefaultButton 属性设置为面板。当我专注于并按下回车键时，应该触发服务器端点击事件。为此，我需要检查脚本中的条件（即）文本框是否放置在面板内并且面板是否具有属性，以便我可以在输入时调用服务器端事件。那么，谁能告诉我如何检查是否放置在使用脚本中？`ImageButton``ASP:Panel``TextBox``ImageButton``DefaultButton``TextBox``Panel`

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T12:12:25.850

您不需要 - 如果这是您正在谈论的 ASP.NET，正如我假设的那样 - click 事件处理程序只会在按下*该*按钮时执行。如果由于按下表单上的另一个按钮而发生回发，则将执行与该按钮关联的事件处理程序，而不是另一个有问题的事件处理程序。

如果您对此有特别的困难，那么也许您可以准确地解释问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:53:49.940

您无法从客户端检查服务器属性。你应该告诉我们你真正想做什么，也许我们可以给你另一种方法。

# ios - 隐藏故事板视图中的 UINavigationController 顶部栏

> ID：12745983
> 
> 赞同：3
> 
> 时间：2012-10-05T12:10:29.687
> 
> 标签：ios, uinavigationcontroller

我试图从我的故事板视图中隐藏导航控制器顶部栏，因为我实际上是以编程方式隐藏它并且当 Iloit 在执行时间重新调整时

这是一张图片，以便您可以更好地理解它： ![在此处输入图像描述](../Images/14e216dcb13c564c36e47563b645d767.png)

那个顶部栏没有出现在我的应用程序中，我也想将它隐藏在情节提要中。有什么线索吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T12:26:58.500

选择导航控制器，然后转到右侧栏中的设置：

![在此处输入图像描述](../Images/89555fabef2d2344a5f4ebbc5877ea42.png)

在“导航控制器”部分，取消选中“显示导航栏”，一切顺利！

这是你会得到的：

![在此处输入图像描述](../Images/36298fe1b396bbb5b8979e73d9b75bcb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T11:23:43.040

或者您可以使用下面的代码将其关闭，我希望这对您有用！

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

# java - 使用 SSL 客户端证书加密 HTTP 请求中的数据

> ID：12745984
> 
> 赞同：0
> 
> 时间：2012-10-05T12:10:34.887
> 
> 标签：java, authentication, ssl, x509certificate

我需要能够在我的 RESTful 服务中识别用户。我决定将 HTTPS 与客户端证书身份验证一起使用，因此它将允许其他服务以 URL、标头或任何方式安全地传递用户或密码。

现在我想加密一些被发送回服务的数据。例如，不用发送普通的用户 ID - 只需使用我自己的服务器密钥对其进行加密并发送回来。然后服务将发送这个（加密的）数据，我将能够在本地解密它。

对于这种加密，我想使用服务提供给我的 SSL 证书。

我猜位于我的服务器上的证书包含私钥和公钥。所以我可以使用我的服务器端证书的公钥来加密数据，并确保我可以使用服务器端的私钥安全地解密它。第三方服务将无法解密数据，因为它只有我的服务器端证书的公钥。

现在的问题 - 从客户端 (HTTPS) 给定格式为 X509Certificate 的客户端 SSL 证书，我如何在本地密钥库中找到相应的证书？该证书的格式是什么以及如何从中获取私钥/公钥？

**UPD**基本流程：

*   服务向 REST 应用发送请求：[http ://rest.api.com/authenticate/username/password/](http://rest.api.com/authenticate/username/password/)
*   REST 应用发回响应：{ ok: "123456" }
*   服务向 REST 应用发送请求：[http ://rest.api.com/1233456/dosomething](http://rest.api.com/1233456/dosomething)
*   REST 应用程序提取 123456 并知道必须使用哪个用户进行操作

我想得到什么

*   服务向 REST 应用发送请求：[http ://rest.api.com/authenticate/username/password/](http://rest.api.com/authenticate/username/password/)
*   REST 应用程序获取用户名/密码并在数据库中查找用户 ID
*   REST 应用不想与服务共享 ID
*   REST 应用了解 SSL 服务证书
*   REST 应用程序找出相应的公钥，用于加密到该服务的传入流量
*   REST 应用程序使用 REST 应用程序公钥加密 id "123456" 并发送响应：{ ok : "lybibHubJis7" }
*   服务向 REST 应用发送请求：[http ://rest.api.com/lybibHubJis7/dosomething](http://rest.api.com/lybibHubJis7/dosomething)
*   REST app 使用 SSL keychain 的私钥对字符串 lybibHubJis7 进行解密，发现用户 ID 为 123456，然后对该用户进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:41:35.833

试图跳到有多个评论的讨论中间......

> 并不真地。例如服务发送请求：rest.api.com/authenticate/username/password，然后我用 JSON 格式回复，包含字符串 123456。然后服务将使用 rest.api.com/do/123456/whatever。我想要的是从服务中隐藏“123456”。而且我不想生成一些随机字符串并将其放入数据库，并保持“PreabEdAgIav”->“123456”与过期等关系。我想使用我自己的与服务关联的公钥来加密这个 123456并得到其他东西，该服务将无法破坏。

听起来您主要追求的是数字签名，不一定是加密（尽管您可以同时拥有两者）。

如果您的身份验证服务为您提供了某种身份验证令牌 ( `123456`)，第 3 方服务旨在将其发回以供后续使用，那么最重要的是消费服务应该能够验证这`123456`确实来自该身份验证服务。由于任何人都可以使用收件人的公钥加密某些东西，因此公钥加密在这里并没有真正的帮助。

更有意义的是让身份验证服务使用其私钥*签署*此令牌，以便稍后使用该令牌的服务可以验证它来自它识别的先前身份验证步骤。`123456`如果您还想隐藏该令牌，您也可以加密结果，但这似乎不太必要。

虽然使用 HTTP URL 绑定可能会导致相当长的 URL，但有一些标准可以做到这一点，例如 SAML。

# c# - C#：方法未找到异常（Setter 缺失）

> ID：12745985
> 
> 赞同：3
> 
> 时间：2012-10-05T12:10:35.483
> 
> 标签：c#, exception

在调试我的程序时，我遇到了非常奇怪的错误。我有一个数据合同，我在其中添加了新属性，但其中一个属性导致以下异常：

`Method not found: 'Void Measurement.set_ContactId(Int32)'.`

数据合约如下所示：

```
[DataContract]
public class Measurement
{
    [DataMember]
    public int FactId { get; set; }

    [DataMember]
    public int ContactId { get; set; }
..... 
```

我真的不明白什么可能是问题，因为正如我所说，我添加了一些其他属性，但它们没有问题。

UPD：当我尝试为以下值分配值时，服务端发生了异常`ContactId`：

```
foreach (Measurement m in result.Where(m => m.FactId == factId)){
    m.ContactId = contactId;
  ..... 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T11:21:57.440

问题在于存储在 .NET 缓存中的一些旧版本的 DLL。我在整个磁盘上搜索了 DLL 并删除了所有找到的文件（有些文件正在被 .NET 使用，所以我不得不使用 Unlocker）。重建项目后，它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T12:15:13.913

如果此测量类是您的 WCF 服务的一部分，那么您在服务的两端（客户端和服务器端）都有它。双方是否有相同的版本（ContactId 有一个设置器）？

# iphone - UITableView 的 Dealloc 未调用

> ID：12745992
> 
> 赞同：0
> 
> 时间：2012-10-05T12:11:05.730
> 
> 标签：iphone, objective-c, ios5, ios

我在情节提要中创建了一些 UITableViews，并为它们中的每一个编写了自定义类。我已将 tableview 对象拖放到我的主视图控制器中以访问它们。在 UITableView 自定义类中，我在“numberOfSectionsInTableView”委托方法中分配了一些类级别的对象。我想在dealloc方法中释放numberOfSectionsInTableView方法中分配的所有类级对象。但是即使我移动到其他视图控制器，也不会调用 dealloc。有谁知道为什么不调用它，或者我可以在哪里释放这些对象。（ARC 已关闭）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T13:06:46.467

以下是您可以做的一些事情：

1.  打开ARC？
2.  你确定它没有被访问？`NSLog(@"ACCESSED");`在你的 dealloc 方法中做一个
3.  使用 viewDidUnload 方法释放东西
4.  如果不再需要它们，直接在他们的方法中释放它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T13:01:28.887

试着找到一些关于`UIViewController`生命周期的东西。尝试在`viewDidUnload`方法中释放您的对象并在那里放置断点。这张照片应该对你有用： ![在此处输入图像描述](../Images/44bf2313968378bbfa2c509f116ff548.png)

# .net - 编译后压缩源代码

> ID：12745997
> 
> 赞同：1
> 
> 时间：2012-10-05T12:11:26.353
> 
> 标签：.net, visual-studio-2010, build, msbuild, xcopy

每次构建解决方案时，我都必须制作源代码的压缩 zip 文件。我试过这样做[，](http://blogs.msdn.com/b/calvin_hsia/archive/2006/06/06/619191.aspx "这个")所以在项目属性页面上，我在“构建后事件”文本框中有以下代码：

```
if $(ConfigurationName)==Release 
   xcopy /df $(ProjectDir)$(TargetName)*.cs $(ProjectDir)$(TargetName)Source.zip
if $(ConfigurationName)==Release 
   xcopy /df $(TargetDir)$(TargetName)$(TargetExt) $(ProjectDir)$(TargetName)Runtime.zip 
```

但它不起作用。

它说

```
Error   1   The command "if ==Release xcopy /df *.csSource.zip
            if ==Release xcopy /df  Runtime.zip
            " exited with code 255\. c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets  3717    9   BuildEventHooks 
```

我怎样才能让它工作？我正在使用 Visual Studio 2010 和 .NET 4 (MSBuild 4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:33:27.683

在这种情况下，请使用合适的源代码控制，例如 SVN 或 GIT。两者都提供了创建“外部”的能力，这将解决您的问题。

您的想法似乎很奇怪，因为构建时间会大大增加。

也就是说，如果您想允许创建插件，请将您的插件合同（可能是接口）隔离在自定义 DLL 中并发布此 DLL。为什么必须提供源代码来创建可组合的应用程序？

最后，仅供参考，**xcopy**不会压缩文件。您可以使用 7zip.exe 或类似的压缩工具，或创建在构建后事件中触发的参数化 powershell 脚本。该脚本可以包含您期望的压缩。

这是一个可以压缩内容的示例函数：

```
function Compress-Directory
{
    [CmdLetBinding()]
    param(
        [Parameter(Mandatory=$true)]
        [string]
        $SourceDirectory, 
        [Parameter(Mandatory=$true)]
        [string]
        $Target,
        [ValidateSet("Auto", "Cab", "Zip")] # Supported formats : Cab or Auto for infering the format from the file extension
        [string]
        $Format = "Auto",
        [Switch]$Force
    )
    process{

        if($Format -Match "auto") {
            switch([System.IO.Path]::GetExtension($Target).ToLower())
            {
                ".cab" { $Format = "Cab" }
                ".zip" { $Format = "Zip" }
                default { throw "Could not infer the kind of archive from the target file name. Please specify a file name with a known extention, or use the 'Format' parameter to specify it" }
            }
        }

        if(Test-Path($Target))
        {
            if($Force) { 
                Write-Verbose "Deleting existing archive $Target"
                Remove-Item $Target -Force 
                Write-Verbose "Deleted existing archive $Target"
            }else{
                throw "The target file '$Target' already exists. Either delete it or use the -Force switch"
            }
        }

        switch($Format) {
            "Cab" {
                [void][reflection.assembly]::LoadFile((Join-Path $PSScriptRoot "CabLib.dll"))

                ## the cablib dll can be downloaded from http://wspbuilder.codeplex.com 
                $c = new-object CabLib.Compress 
                $c.CompressFolder($SourceDirectory, $Target, $null, $null, $null, 0) 
                ## thanks to http://www.pseale.com for this function 
            }
            "Zip" {
                Get-ChildItem $SourceDirectory | Compress-ToZip $Target
            }
            default { throw "No compress method known for $Format files."}
        }
    }
}

function Compress-ToZip {
    param([string]$zipfilename)

    Write-Host "Creating the archive $zipfilename"

    if(-not (test-path($zipfilename)))  {
        set-content $zipfilename ("PK" + [char]5 + [char]6 + ("$([char]0)" * 18))
        (Get-ChildItem $zipfilename).IsReadOnly = $false   
    }

    $shellApplication = new-object -com shell.application
    $zipPackage = $shellApplication.NameSpace($zipfilename)

    foreach($file in $input) {
        $zipPackage.CopyHere($file.FullName)    
        $size = $zipPackage.Items().Item($file.Name).Size
        Write-Host "Adding $file" 
        while($zipPackage.Items().Item($file.Name) -Eq $null)
        {
            start-sleep -seconds 1
            write-host "." -nonewline
        }
        write-host " Done" -ForegroundColor Green
    }     

    [System.Runtime.Interopservices.Marshal]::ReleaseComObject($zipPackage) | out-Null
    [System.Runtime.Interopservices.Marshal]::ReleaseComObject($shellApplication)| out-Null
} 
```