# StackOverflow 问答 13346000-13346999

# python - python urllib2线程定时器

> ID：13346002
> 
> 赞同：1
> 
> 时间：2012-11-12T14:59:51.440
> 
> 标签：python, multithreading, urllib2

我想每 60 秒获取一次相同的 url，但是当我在计时器线程中使用我的 get_html() 函数时，它不会刷新页面更新，总是返回相同的数据，这是我的代码的摘录：

```
import urllib2
from HTMLParser import HTMLParser
import threading

class data():
    def get_html(self):
         proxy = urllib2.ProxyHandler({'http': 'http://'+self.proxy_username+
                     ':'+self.proxy_password+'@'+self.proxy_addres+':'+self.proxy_port})
        auth = urllib2.HTTPBasicAuthHandler()
        opener = urllib2.build_opener(proxy, auth, urllib2.HTTPHandler)
        urllib2.install_opener(opener)
        header = {"pragma-directive" : "no-cache"}
        req = urllib2.Request('http://xxxxx', headers=header)
        conn = urllib2.urlopen(req)
        return_str = conn.read()
        conn.close()
        opener.close()
        par = MyHTMLParser()
        par.feed(return_str)
        html_data = par.get_data()
        return html_data

def update(self):
    check_data = data()
    html_data = check_data.get_html()
    print html_data
    threading.Timer(60, update).start() 
```

# msmq - 将消息从一个出站队列移动到另一个出站队列

> ID：13346006
> 
> 赞同：2
> 
> 时间：2012-11-12T14:59:57.293
> 
> 标签：msmq, nservicebus

我们的一个应用程序存在配置问题，它向错误的 IP 发送了一堆消息（大约 12k+）。由于那台机器实际上并不存在，它们只是坐在出站队列中。无论如何将所有这些消息移动到正确的出站队列？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T23:36:16.700

使用队列资源管理器将所有消息“保存”到磁盘。将它们“加载”到目标队列中

# ruby-on-rails - 在 ruby on rails 上使用 IF 子句实现下面列出的选择语言？

> ID：13346009
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:14.650
> 
> 标签：ruby-on-rails, ruby, select, locale

谁能帮我解决如何在 ruby​​ on rails 上为不同页面实现以下代码？例如，下面的代码会将其更改为“faq.html.erb”，但前提是它通过了 If 条件。

```
<% if pageName=='faq.html.erb' %>
    <select name="Language" onchange="location=this.options[this.selectedIndex].value;">
        <option value="/en/faq" selected="selected">English</option> 
        <option value="/es/faq">Español</option>
    </select>
<% end %> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:05:18.183

例如，您可以使用 controller_name 或 request.path。

```
if request.path =~ /faq/
  # ...
elsif controller_name =~ /categories/
  # ...
elsif controller_name =~ /categories/ and controller.action_name == 'index'
  # ... 
```

# .htaccess - HTACCESS - 网址 www.somedomain.com/#sth 到 www.somedomain.com/sth

> ID：13346011
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:19.003
> 
> 标签：.htaccess

嗨，我希望当用户单击带有 href="www.somedomain.com/#sth" 的链接时，浏览器会重定向到带有 www.somedomain.com/#sth 的窗口，并且当然会停留在同一页面中，但是网址变为 www .somedomain.com/sth 在地址栏中，但被理解为 www.somedomain.com/#sth 所以不会出现问题。

# mongodb - 为什么在异步调用中很难实现可迭代游标？

> ID：13346012
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:19.157
> 
> 标签：mongodb, asynchronous, pymongo, nonblocking

抱歉这个愚蠢的问题，但从[这个主题](https://groups.google.com/group/python-tornado/browse_thread/thread/ce583d5d4e3f13bf?hl=fr)我觉得在处理非阻塞数据库调用时实现可迭代游标很困难，

那么为什么会这样，为什么它与[Pymongo cursors](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/cursor.py)不同；换句话说，为什么不能将[下一个方法](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/cursor.py#L795)放在非阻塞 mongodb 库中？

这是否会影响方法，例如[MongoTor](https://github.com/marcelnicolay/mongotor/blob/master/mongotor/cursor.py)`find()`中没有`next()`方法，但仍然存在and ，在限制和继续时是否存在迭代？`limit()``skip()`

这是有关[龙卷风组的相关主题](https://groups.google.com/group/python-tornado/browse_thread/thread/ce583d5d4e3f13bf?hl=fr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:12:02.863

我不知道 Python 驱动程序，但您无法获得`next`返回文档的方法，因为非阻塞驱动程序只能返回未来的结果。

MongoDB 提供批量文档。这意味着当您消耗完一整批时，您可以获取下一批。这样做的非阻塞方式是返回未来的一批文档。

有不同的方法来设计更好的 API。其中包括 Iteratee/Enumerator 模式 - [ReactiveMongo](http://reactivemongo.org/)就是这种情况，这是一个用于 MongoDB 的非阻塞、反应式 Scala 驱动程序。

# visual-studio-2010 - 使用数据库创建 Windows 窗体应用程序

> ID：13346013
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:24.133
> 
> 标签：visual-studio-2010

我正在使用 2010 终极版，只是构建一个简单的 Windows 窗体应用程序。刚刚在表单中添加了一个数据库。将应用程序文件拉出 bin 目录。尝试运行但由于无法附加数据库而出现错误？安装了 Microsoft SQL Server Compact 4.0 并得到同样的错误？我错了什么？

错误：尝试为文件 C;\Users\Admin\Desktop\Database1.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:26:15.917

我收到错误的原因是因为我试图在同一文件夹中没有数据库的情况下运行应用程序文件，在本例中是桌面。我目前正在尝试纠正这一点。我想我会在线使用 ado.net 实体数据库，而忘记将本地数据库与桌面应用程序集成。–

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:22:05.977

使用`C:\Users\Admin\Desktop\Database1.mdf`代替`C;\Users\Admin\Desktop\Database1.mdf`

# python-2.7 - yticklabels 在相反轴上

> ID：13346014
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:32.653
> 
> 标签：python-2.7, matplotlib

我正在尝试在相反的轴上绘制用 imshow 制作的图形的 yticklabels。我还需要设置刻度标签，以便我需要控制这个轴。有谁知道如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:55:28.143

尝试这个：

```
import matplotlib.pyplot as plt
ax = plt.subplot(111)
plt.imshow(...)
ax.yaxis.set_tick_params(labelright=True, labelleft=False) 
```

# wcf - 无法在 WCF WebService 中使用 System.Object 类型

> ID：13346017
> 
> 赞同：1
> 
> 时间：2012-11-12T15:00:37.867
> 
> 标签：wcf

我正在尝试使用 WCF WebService 中的对象类型创建方法，但出现以下错误：

![错误](../Images/aa07d7a75048a26aebc215b33c748059.png)

**界面 ：**

```
 [ServiceContract]
public interface IService1
{

    [OperationContract]
   object GetTwoX(object yo);

} 
```

**班级 ：**

```
public class Service1 : IService1
{
    static public Dictionary<string, List<OPUSInfo>> cache;

    public object GetTwoX(object yo)
    {
        return yo;
    }

} 
```

有人知道如何传递 Object 类型吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:25:39.467

您绝对可以创建一个接受和/或返回的方法`object`，但正如错误所说，不要指望简单的测试客户端能够做任何事情。[使用像SoapUI](http://www.soapui.org/)这样的全功能服务测试应用程序来做到这一点。

# python - 是否可以调用程序并在 Python 中获取该程序的输入？

> ID：13346021
> 
> 赞同：0
> 
> 时间：2012-11-12T15:00:59.997
> 
> 标签：python, python-2.7

我可以使用 Python 调用另一个程序

```
subprocess.call(["do_something.bat"]) 
```

我想知道我是否可以收集标准输入`do_something.bat`？

`do_something.bat`是Java程序的启动器，Java程序会提示用户输入项目名称、版本等项目具体信息，并根据用户输入生成项目骨架。

我用python调用这个`do_something.bat`，它生成所有项目文件后，我需要继续到项目根目录下的特定目录，但这需要知道项目名称，我可以得到用户之前输入的项目名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:14:03.780

这取决于如何`do_something.bat`提示用户。

如果它只是从标准输入中读取，您的程序可以充当中间人。它可以提示 的输出`do_something.bat`，读取用户的响应，然后通过管道将响应返回到 的标准输入`do_something.bat`。

否则，我认为不适应是不可能的`do_something.bat`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:26:09.290

如果您知道程序将要求的确切参数以及它将要求它们的顺序，那么您可以自己收集参数并将它们转发到子进程。

例如。

```
from subprocess import Popen, PIPE

# get inputs
input1 = ...
input2 = ...

child = Popen("do_something.bat", stdin=PIPE)
# Send data to stdin. Would also return data from stdout and stderr if we set 
# those arguments to PIPE as well -- they are returned as a tuple
child.communicate("\n".join([input1, input2, ...]))

if child.returncode != 0:
    print "do_something.bat failed to execute successfully" 
```

# jquery - jqgrid 编辑表单选项卡式

> ID：13346022
> 
> 赞同：0
> 
> 时间：2012-11-12T15:01:01.807
> 
> 标签：jquery, asp.net, jqgrid, jqgrid-asp.net

我在我正在开发的酒店网络软件管理系统中广泛使用 jqgrid。感谢 stackoverflow 社区给我的建议，一切都很好！

我要迈出一步。当用户在 jqgrid 表单编辑中编辑实体时，我想提高用户界面的可用性。实际上，我使用的是标准外观，其中每一行都在 [long] 字段列表中结构化。我知道我可以使用 rowpos e colpos ... 是否可以在 jqgrid 表单编辑系统中创建选项卡式界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:08:56.160

如果您需要一个复杂的表单，最好的办法可能是创建自己的自定义编辑表单，而不是使用 jqGrid 内置的表单。例如，您可以创建一个基于 jQuery UI 的自定义对话框。我已经在我的一些应用程序中做到了这一点，并且可以自由地在这些表单上做任何事情，包括添加选项卡。

明显的缺点是您正在为您的应用程序构建自定义 UI，并且需要处理从网格获取数据/从网格获取数据。在我的情况下，我可以将一个 ID 传递给对话框，让该代码检索必要的信息。然后我设置并在对话框关闭后刷新网格行。

这有帮助吗？

# c# - Lucene.Net 多行正则表达式搜索

> ID：13346025
> 
> 赞同：1
> 
> 时间：2012-11-12T15:01:15.580
> 
> 标签：c#, regex, lucene.net, lucene

我们使用 Lucene.Net 3.0.3 Whitespace Analyzer 并索引具有相同名称的文件，并使用 Not_Analyzed 和 Analyzed 选项分隔两个字段，如下所示

```
 public static void WriteIndexes()
    {
        string indexPathRegex = ConfigurationManager.TfSettings.Application.CustomSettings["dbScritpsAddressRegex"];

        var analyzerRegex = new WhitespaceAnalyzer();
        var indexWriterRegex = new IndexWriter(indexPathRegex, analyzerRegex, IndexWriter.MaxFieldLength.UNLIMITED);

       foreach (LuceneIndex l in Indexes)
        {
            var doc = new Document();
            doc.Add(new Field("ServerName", l.ServerName.ToLowerInvariant(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));

            doc.Add(new Field("DatabaseName", l.DatabaseName.ToLowerInvariant(), Field.Store.YES, Field.Index.ANALYZED,Field.TermVector.NO));
            doc.Add(new Field("SchemaName", l.SchemaName.ToLowerInvariant(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
            doc.Add(new Field("ObjectType", l.ObjectType.ToLowerInvariant(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
            doc.Add(new Field("ObjectName", l.ObjectName.ToLowerInvariant(), Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
            doc.Add(new Field("Script", l.Script, Field.Store.YES, Field.Index.ANALYZED, Field.TermVector.NO));
            doc.Add(new Field("Script", l.Script, Field.Store.YES, Field.Index.NOT_ANALYZED, Field.TermVector.NO));

            indexWriterRegex.AddDocument(doc);
        }
        indexWriterRegex.Optimize();
        analyzerRegex.Close();
        indexWriterRegex.Close();

    } 
```

当我们查找单行正则表达式时是可以的。但是当我们查找多行正则表达式时；如果搜索文件的大小小于 16 KB 是可以的。但是当它大于 16 KB 时，Lucene 找不到搜索关键字。这是一个错误吗？我们如何解决这个问题？

示例关键字： `.*taxId.*\n.*customerNo.*`

```
 public  List<item> SearchAllScriptInIndex()
    {
        string indexPathRegex = ConfigurationManager.TfSettings.Application.CustomSettings["dbScritpsAddressRegex"];
        var searcher = new Lucene.Net.Search.IndexSearcher(indexPathRegex, false);

        const int hitsLimit = 1000000;
        var analyzer = new WhitespaceAnalyzer();

        var parser = new MultiFieldQueryParser(Lucene.Net.Util.Version.LUCENE_29, new[] { "Script", "DatabaseName", "ObjectType", "ServerName" }, analyzer);

        Term t = new Term("Script", Expression);
        RegexQuery scriptQuery = new RegexQuery(t);

        string s = string.Format("({0}) AND {1}", serverAndDatabasescript, objectTypeScript);
        var query = parser.Parse(s);

        BooleanQuery booleanQuery = new BooleanQuery();
        booleanQuery.Add(query, BooleanClause.Occur.MUST);
        booleanQuery.Add(scriptQuery, BooleanClause.Occur.MUST);

        var hits = searcher.Search(booleanQuery, null, hitsLimit, Sort.RELEVANCE).ScoreDocs;

        List<item> results = new List<item>();
        List<string> values = new List<string>();
        Dictionary<int, string> newLineIndices = new Dictionary<int, string>();
        foreach (var hit in hits)
        {
            var hitDocument = searcher.Doc(hit.Doc);
          string contentValue = hitDocument.Get("Script");
         LuceneIndex item = new LuceneIndex();
         item.ServerName = hitDocument.Get("ServerName");
          item.DatabaseName = hitDocument.Get("DatabaseName");
          item.ObjectName = hitDocument.Get("ObjectName");
          item.ObjectType = hitDocument.Get("ObjectType");
          item.SchemaName = hitDocument.Get("SchemaName");
          item.Script = hitDocument.Get("Script");
                    results.Add(item);

        }
        return results; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T08:47:53.653

根据文档`IndexWriter.AddDocument`和字段，支持的最大术语长度为 16 383 个字符`IndexWriter.MAX_TERM_LENGTH`。似乎比这更长的术语被简单地忽略了，导致您描述的问题。

AddDocument 的文档声称引发了异常，而该字段仅提到将信息写入 infoStream [如果设置了]。

```
/// <p/>Note that each term in the document can be no longer
/// than 16383 characters, otherwise an
/// IllegalArgumentException will be thrown.<p/>

// [...]

/// <summary> Absolute hard maximum length for a term.  If a term
/// arrives from the analyzer longer than this length, it
/// is skipped and a message is printed to infoStream, if
/// set (see <see cref="SetInfoStream" />).
/// </summary>
public static readonly int MAX_TERM_LENGTH; 
```

来源：[IndexWriter.cs](https://svn.apache.org/repos/asf/lucene.net/tags/Lucene.Net_3_0_3_RC2_final/src/core/Index/IndexWriter.cs)

# javascript - 重构简单的 jQuery 切换选择器

> ID：13346031
> 
> 赞同：3
> 
> 时间：2012-11-12T12:58:40.303
> 
> 标签：javascript, jquery, refactoring

我正在将我的代码从 document.ready() 移动到自执行匿名函数。我已经完成了一些更大的代码片段，但我主要是在处理较小的代码片段。像这个：

```
/**
Advanced properties toggle
**/
$('a.toggle-link').click(function (e) {
    $(this).next().slideToggle('slow');
    e.preventDefault();
}); 
```

我如何重构它以便能够为选择器引入变量`a.toggle-link`（所以任何东西都可以传递到函数中），`.slideToggle`（所以我可以传递`.slideDown`, `.slideUp`, ...）和`slow`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:17:10.757

这种方法使用 jQuery，尽管我大部分时间都坚持使用原生 DOM 方法：

```
function actOnElem(el, method, duration) {
    // if no passed 'el' or 'method' return
    if (!el || !method) {
        return false;
    }
    else {
        // if 'el' is an element-node, use 'el' else assume it's an id
        el = el.nodeType == 1 ? el : document.getElementById(el);
        // duration is used if passed, otherwise 'slow' is used as the default
        duration = duration || 'slow';
        // create a jQuery object from 'el',
        // call the method, if it exists,
        // and use the 'duration'
        $(el)[method](duration);
    }
}

actOnElem(document.getElementById('two'), 'slideDown', 1000); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QdRp8/)。

请注意，没有完整性检查，因此如果元素已经可见并且您调用该函数，`slideDown`则不会发生任何事情。虽然我*认为*这回答了您的问题，但我完全不确定您为什么要采用这种方法，而不是直接调用 jQuery 方法。

稍作修改的功能以允许（非常简单）故障报告：

```
function actOnElem(el, method, duration, debug) {
    if (!el || !method) {
        return false;
    }
    else {
        el = el.nodeType == 1 ? el : document.getElementById(el);
        duration = duration || 'slow';
        if ($(el)[method]) {
            $(el)[method](duration);
        }
        else if (debug) {
            console.log('Did you make a typo? There seems to be no "' + method + '" method.');
        }
    }
}

actOnElem(document.getElementById('two'), 'slidedown', 1000, true);
//                                              ^
//                                              +--- typo, should be 'slideDown' 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QdRp8/1/)。

# excel - 在一个图表中绘制多个具有多个点的图形 (Excel)

> ID：13346039
> 
> 赞同：0
> 
> 时间：2012-11-12T15:02:01.933
> 
> 标签：excel, graph, line

我正在寻找一些关于在一个图表中绘制具有多个点的多个图表的建议。我不是统计学家，所以我不知道这个图实际上叫什么。

基本上，我有 6 个数据系列，我想将每个数据系列的折线图绘制成一个通用图表。

我的 X 轴应该只有 4 个分类变量/数字 1、2、3 和 4。

现在要注意的是每个数据系列，X 轴的每个分类变量都有多个点。像这样的东西：

```
(X,Y) = (1,43)
(X,Y) = (1,57)
(X,Y) = (1,86)
(X,Y) = (2,42)
(X,Y) = (2,63)
(X,Y) = (3,72)
(X,Y) = (3,82)
(X,Y) = (4,81) 
```

这是一个数据系列。同样，我还有 5 个其他数据系列有类似的东西。一些数据系列可能有也可能没有所有 4 个分类变量 1、2、3 和 4。我想将它们全部绘制到一个图中。

我应该如何绘制这个图，最好是在 Excel 中？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:37:30.597

由于您有多个 x 点，我会说 - 不是折线图；）

但话又说回来，你应该问自己，我的图表应该回答什么问题，或者它应该说明什么相关性。

我假设您的数据反映了您想要可视化的一些信息。这里的问题是这些信息是什么。基于此，您可以选择一个图表来支持它。对于这个图表，您需要提供您的数据，并且可能需要以更合适的形式将其放入。

我现在的猜测是点图。

# html - 来自 mongodb GridFS 的 HTML5 音频

> ID：13346041
> 
> 赞同：3
> 
> 时间：2012-11-12T15:02:09.147
> 
> 标签：html, mongodb, audio, gridfs

我有一个 MongoDB 数据库，其中的音频文件存储在 GridFS 中。HTML5 音频标签与从 MongoDB 获取音频的方法的链接一起使用：

```
$file = $grid->findOne(array('_id' => new MongoId($id)));
header('Content-Length: ' . $file->file['length']);
header('Content-Type: ' . $file->file['file_type']);
header("Content-Disposition: filename=" . $file->file['filename']);
echo $file->getBytes(); 
```

一切都很好，但有一件事：我不能使用滑动条来跳过音频，它只能从头到尾播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:04:40.723

为了进行滚动，我希望您的脚本也需要处理范围。还可以提供您的（示例）HTML 页面吗？然后我可以尝试一下，看看我是否能想出一个更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:09:47.013

尝试添加`Accept-Ranges = bytes`标题。来自[http://html5doctor.com/html5-audio-the-state-of-play/](http://html5doctor.com/html5-audio-the-state-of-play/)：

> 大多数支持音频的浏览器都可以在下载过程中寻找新的文件位置。为此，您必须在服务器上启用范围请求。尽管在 Apache 等 Web 服务器上默认启用，但您可以通过检查您的服务器是否使用 Accept-Ranges 标头进行响应来进行验证。

[`X-Content-Duration = length_in_seconds`](https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media)如果文件是 ogg 格式，标题也可能会有所帮助。来自[https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media](https://developer.mozilla.org/en-US/docs/Configuring_servers_for_Ogg_media)：

> Ogg 格式没有封装媒体的时长，所以视频控件上的进度条显示视频时长，Gecko 需要通过其他方式确定媒体的时长。
> 
> Gecko 有两种方法可以做到这一点。最好的方法是在提供 Ogg 媒体文件时提供 X-Content-Duration 标头。此标头以浮点值的形式提供以秒为单位的视频持续时间（不是 HH:MM:SS 格式）。

这两个标头都可以帮助浏览器在文件完全下载之前确定音频的持续时间，以便可以进行搜索，并且可以正确定位播放头。

# jquery - jQuery移动页面保留表单值

> ID：13346045
> 
> 赞同：2
> 
> 时间：2012-11-12T15:02:23.620
> 
> 标签：jquery, jquery-mobile

我正在编写一个小型 jQuery 移动应用程序，其中一个页面有一个表单。当我离开表单时，表单会保留字段值和 dom 操作。我想停止这种情况，基本上从 pageShow 上的新表单和 dom 开始。

我可以手动清除字段并删除我注入到 dom 中的任何类，但肯定有更好的方法来做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:57:53.740

您可能正在使用基于 ajax 的导航，它只是将新页面加载到现有 DOM 中。添加`data-ajax="false"`到您的链接。

重要的是要了解这些方法中的任何一种都有利有弊。Ajax 加载的目标是在页面之间导航时提高性能。

您还可以将相同的属性和值添加到表单标签，以防止 jQuery Mobile 在表单提交中使用 ajax。

# javascript - module.require(...).* 是否返回 module.exports.* 的副本或它的引用？

> ID：13346046
> 
> 赞同：3
> 
> 时间：2012-11-12T15:02:25.410
> 
> 标签：javascript, node.js, mongodb, node-modules

在下面的代码中，session.js 和 user.js 中的“db”变量是引用 db.js 中的同一个对象，还是它们的副本（与我的数据库服务器建立单独的连接）？

```
// db.js
var mongojs = require('mongojs');
var db = mongojs('test', ['users', 'sessions']);
module.exports.database = db;

// session.js
var db = require('../db.js').database;
......

// user.js
var db = require('../db.js').database;
...... 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:07:22.203

所需的模块被缓存，因此它们都指向同一个对象。相关 Node.js 文档：[模块缓存文档](http://nodejs.org/api/modules.html#modules_caching)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:08:35.093

每次调用都`require('../db.js')`返回相同的对象，因此在您的情况下，只会`database`创建一个连接池。

请注意，这`database`实际上是一个连接池（默认为 5 个），可以在您的代码中自由共享，因此这可能是您想要的。

[请参阅此处](http://nodejs.org/api/modules.html#modules_caching)的文档。

# validation - 简单验证 API 问题 Java Swing

> ID：13346048
> 
> 赞同：2
> 
> 时间：2012-11-12T15:02:29.877
> 
> 标签：validation, jdk1.6, netbeans6.8

我正在使用 Netbeans 6.8 、 JDK 1.6 并下载了 Simple Validation API。当我尝试代码时，它给了我引用“org/openide”类的错误。

这可能是兼容性问题吗？我该如何解决这个问题？

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/openide/util/Lookup
        at org.netbeans.validation.api.ui.swing.SwingComponentDecorationFactory.getDefault(SwingComponentDecorationFactory.java:154)
        at org.netbeans.validation.api.ui.swing.SwingValidationGroup.<init>(SwingValidationGroup.java:82)
        at org.netbeans.validation.api.ui.swing.SwingValidationGroup.create(SwingValidationGroup.java:87) 
```

# android - 根据宽度动态高度

> ID：13346049
> 
> 赞同：1
> 
> 时间：2012-11-12T15:02:31.790
> 
> 标签：android, android-layout

假设我有一个`LinearLayout`设置`layout_width`为`fill_parent`. 我希望它`layout_height`是 1.5 倍`layout_width`。

我无法对其进行硬编码，因为不同设备的屏幕密度不同。

`View`我在实现这个时遇到了问题，因为我在or中找不到 setHight 或 setWidth 方法`ViewGroup`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T16:23:23.597

在您的活动中获取屏幕宽度

```
DisplayMetrics displaymetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displaymetrics); 
```

然后根据您的宽度设置您的视图高度

```
View myView = findViewById(R.id.myView);
myView.getLayoutParams().width = displaymetrics.widthPixels * 1.5f; 
```

# c# - Convert.ToXX() 或 xx.Parse(yy.ToString()) 哪个更快？

> ID：13346050
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:02:36.173
> 
> 标签：c#

我正在尝试使方法更快。现在，它需要一个`object obj`并将其转换为具有以下内容的双精度：

```
double val = Convert.ToDouble(obj); 
```

如果我这样做会更快吗？

```
double val = double.Parse(obj.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:08:06.033

For`string` `Convert.ToDouble`只是检查值，如果是则`null`返回`0.0`。然后它真的调用`double.Parse`：

```
[__DynamicallyInvokable]
public static double ToDouble(object value)
{
  if (value != null)
    return ((IConvertible) value).ToDouble((IFormatProvider) null);
  else
    return 0.0;
}

// common implementation of IConvertable
double IConvertible.ToDouble(IFormatProvider provider)
{
  return Convert.ToDouble(this, provider);
}

// implementation for string
[__DynamicallyInvokable]
public static double ToDouble(string value, IFormatProvider provider)
{
  if (value == null)
    return 0.0;
  else
    return double.Parse(value, NumberStyles.Float | NumberStyles.AllowThousands, provider);
}

// and for long. differs, right? 
[__DynamicallyInvokable]
public static double ToDouble(long value)
{
  return (double) value;
} 
```

所以我认为`double.Parse`非数字类型的速度不会快得多。但是当你真的不知道你的论点是那种类型时，最好调用`Convert.ToDouble(value)`而不是`double.Parse(value.ToString())`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:05:33.440

`Convert.ToDouble()`实际上包装了一个`double.Parse()`电话，所以速度上的差异可以忽略不计。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T15:07:03.053

理论上是第一个，因为你正在打一个电话。第二个示例调用 Parse 方法，然后将 ToString 方法的结果传递给它。

话虽如此，请参阅一些关于为什么可能会有更好的解决方案的评论（即如果它失败了怎么办）。

# javascript - JavaScript href:function(); vs 2012 ASP.NET MVC 模板中的语法

> ID：13346051
> 
> 赞同：2
> 
> 时间：2012-11-12T15:02:35.757
> 
> 标签：javascript, asp.net-mvc

VS 2012 附带的新 MVC 模板在“_LoginPartial.cshtml”中包含下面的 JavaScript 行。我对此 JavaScript 语法有疑问。这是 JavaScript 或 Asp.Net 特定的语法吗？我们可以在普通 HTML 中使用 JavaScript 调用吗？

```
<a href="javascript:document.getElementById('logoutForm').submit()">Log off</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:21:23.147

我看到这是一个注销链接，JS 似乎正在提交表单。Surley，您可以在控制器中执行一个处理注销的操作吗？那将是一个更好的设计。

如前所述，这种 JS 格式并不是您使用的 .net 模板所独有的，它可以应用于纯 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:05:43.790

您可以`<a href="javascript:foo();">..</a>`在普通的 html 标记中使用 - 它不是特定于 Asp.Net 的 - 但我不认为它被认为是非常好的不显眼的 js。请参阅此处的讨论：[如何在 HTML](https://stackoverflow.com/questions/5003867/how-to-call-javascript-function-instead-of-href-in-html)中调用 javascript 函数而不是 href，@Dutchie432 接受的答案包括这种更好的形式：

```
<a href="javascript:void(0);" onclick="foo(args);"> 
```

这里还有一些关于替代品的讨论：http: [//www.pageresource.com/jscript/jlinktut.htm](http://www.pageresource.com/jscript/jlinktut.htm)

# vim - VimScript 中的“未闭合表达式序列”错误

> ID：13346053
> 
> 赞同：2
> 
> 时间：2012-11-12T15:02:42.743
> 
> 标签：vim, macvim

我有以下设置我的`statusline`：

```
set stl=%<\ [Buf:\ %n]%m\ %f\ [
set stl+=%{empty(&filetype) ? \"" : \"," . toupper(&filetype) . \", \"}
set stl+=%{(&fenc!=''?&fenc:&enc)}]

set stl+=%=[0x\%02.2B]\ [Line:\ %04l/%04L\ \|\ Col:\ %c%V]\ (%P) 
```

我个人认为它没有任何问题，但它只是不断给我以下错误：
`E540: Unclosed expression sequence: stl+=%{empty(&filetype)`

有人知道这个错误是什么意思吗？我一直在尝试解决它，但我就是无法理解它的含义。

感谢你的帮助。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:16:53.110

使用`:set`，值中的所有空格也必须使用反斜杠进行转义。因此，建议在此处删除任何不必要的空格，或`:let &stl = '...'`改用（仅包含的`'`字符必须加倍）。

# c++ - 如何将类型传递给类

> ID：13346055
> 
> 赞同：2
> 
> 时间：2012-11-12T15:02:54.033
> 
> 标签：c++, templates, types

我需要将一个类型传递给一个类。下面的代码有效，但我想知道这是否是最好的方法。有没有更好的方法？

```
template<typename T, typename M>
class BinaryParser
{
public:
   BinaryParser(T& decoder, unsigned header_size) 
      :  m_decoder(decoder), m_header_size(header_size) {}

   virtual bool Parse() {
      M message;
      //do something with message
      return true;
   }

protected:
   T&                  m_decoder;
   unsigned            m_header_size;  
}; 

int main(int argc, char* argv[])
{
   int a1, b1;
   a1=1;
   b1=2;
   BinaryParser<int,string> bp(a1,b1);
   bp.Parse();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:17:27.127

`Parse`如果您不在子类中重新实现成员函数，则不必将其设为虚拟（从您的示例代码中可以看出）。相反，您可以提供一个**模板方法**。您可能希望要求模板参数类型具有一些已定义的接口：

```
template <typename M>
bool Parse() {
    M message; // M must be default constructable
    // ... parse message from a stream or something
    m_decoder.decode( message.getBytes()); // M must have getBytes() member
    return message.isValid(); // M must have isValid() member
} 
```

然后像这样使用它：

```
BinaryParser<int> bp(a1,b1);

if ( bp.Parse<string>()) { /* parsed */ }
if ( bp.Parse<some_other_type>()) { /* parsed */ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:08:52.623

由于 C++ 是[一种类型化语言，](http://en.wikipedia.org/wiki/Statically_typed#Static_typing)[类型自省能力](http://en.wikipedia.org/wiki/Run-time_type_information)非常有限，因此使用模板是将类型传递给类的最佳方法，也是让类创建类型的新实例的唯一方法。另一种方法是通过`typeid`，但它不适用于您的示例，因为它不允许您定义新实例。

# mysql - SQL（首选 MySQL）字符串函数来反转域名

> ID：13346057
> 
> 赞同：3
> 
> 时间：2012-11-12T15:03:05.477
> 
> 标签：mysql, sql, dns, subdomain

我有一个包含域名列表和描述的表。

我希望使用一个简单的函数（如果可能的话是本机函数）来反转域名符号，以便以更好、更自然的排序顺序（个人意见）使用。

例如，我想让以下数据从左到右转换：

```
admin.test.example.com => com.example.test.admin
api.test.example.com => com.example.test.api
cdn.test.example.com => com.example.test.cdn
test.example.com => com.example.test
admin.staging.example.com => com.example.staging.admin
api.staging.example.com => com.example.staging.api
cdn.staging.example.com => com.example.staging.cdn
staging.example.com => com.example.staging 
```

要在 PHP 中做到这一点，我可以做一些简单的事情，比如：

```
$rev_domain = implode('.', array_reverse(explode('.', $domain))); 
```

这在 SQL 中很容易实现吗？（如果需要扩展，则首选 SQL 标准合规性或 MySQL，或者如果您碰巧知道两者，则首选两者）。

显然，另一种选择是创建和维护一个包含反向 DNS 名称的新列，但是我正在寻找可以在查询中即时使用的东西。

提前致谢！

编辑：我正在寻找一种适用于任何数量的子域部分的解决方案，例如：example.com 和 1.2.3.4.5.6.7.8.9.0.example.com

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:20:23.640

试试这个：

```
CREATE FUNCTION reverse_dns (s CHAR(255))
RETURNS CHAR(255) DETERMINISTIC
BEGIN
    DECLARE i, j INT;
    DECLARE r CHAR(255);
    SET j = LOCATE('.', s, 1);
    IF j = 0 THEN
        RETURN s;
    END IF;
    SET r = LEFT(s, j - 1);
    SET i = j + 1;
    LOOP
        SET j = LOCATE('.', s, i);
        IF j = 0 THEN
            SET r = CONCAT(RIGHT(s, LENGTH(s) - i + 1), '.', r);
            RETURN r;
        END IF;
        SET r = CONCAT(SUBSTRING(s, i, j - i), '.', r);
        SET i = j + 1;
    END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:44:12.600

它不是特别漂亮，但你可以这样做：

```
select concat(left(substring_index(concat(val, '.'), '.', -2),
                   locate('.', substring_index(concat(val, '.'), '.', -2))
                  ),
              left(substring_index(concat(val, '.'), '.', -3),
                   locate('.', substring_index(concat(val, '.'), '.', -3))
                  ),
              left(substring_index(concat(val, '.'), '.', -4),
                   locate('.', substring_index(concat(val, '.'), '.', -4))
                  ),
              left(substring_index(concat(val, '.'), '.', -5),
                   locate('.', substring_index(concat(val, '.'), '.', -5))-1
                  )
             ) 
```

MySQL 的强项之一是它有很好的字符串函数，substring_index 就是其中之一。

# android - 修改 Sherlock 主从流程

> ID：13346061
> 
> 赞同：0
> 
> 时间：2012-11-12T15:03:27.447
> 
> 标签：android, android-layout, android-fragments, master-detail

如果您使用过夏洛克大师详细信息流程，请帮助我。

我添加了选项卡并删除了详细信息片段/活动中的数据，但是当我尝试为选项卡内的按钮充气时，它不起作用。

你能帮助我吗？这是我已修改为在双窗格模式下显示选项卡的列表活动。

```
package com.example.sample;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentTransaction;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;

/**
 * An activity representing a list of Courses. This activity has different
 * presentations for handset and tablet-size devices. On handsets, the activity
 * presents a list of items, which when touched, lead to a
 * {@link CourseDetailActivity} representing item details. On tablets, the
 * activity presents the list of items and item details side-by-side using two
 * vertical panes.
 * <p>
 * The activity makes heavy use of fragments. The list of items is a
 * {@link CourseListFragment} and the item details (if present) is a
 * {@link CourseDetailFragment}.
 * <p>
 * This activity also implements the required
 * {@link CourseListFragment.Callbacks} interface to listen for item selections.
 */
public class CourseListActivity extends SherlockFragmentActivity implements
    CourseListFragment.Callbacks {

/**
 * Whether or not the activity is in two-pane mode, i.e. running on a tablet
 * device.
 */
private boolean mTwoPane;
private boolean once = true;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_course_list);

    if (findViewById(R.id.course_detail_container) != null) {
        // The detail container view will be present only in the
        // large-screen layouts (res/values-large and
        // res/values-sw600dp). If this view is present, then the
        // activity should be in two-pane mode.
        mTwoPane = true;

        // In two-pane mode, list items should be given the
        // 'activated' state when touched.
        ((CourseListFragment) getSupportFragmentManager().findFragmentById(
                R.id.course_list)).setActivateOnItemClick(true);
    }

    // TODO: If exposing deep links into your app, handle intents here.
}

/**
 * Callback method from {@link CourseListFragment.Callbacks} indicating that
 * the item with the given ID was selected.
 */
@Override
public void onItemSelected(String id) {
    if (mTwoPane) {
        // In two-pane mode, show the detail view in this activity by
        // adding or replacing the detail fragment using a
        // fragment transaction.
        CourseDetailFragment fragment = new CourseDetailFragment();
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.course_detail_container, fragment).commit();
        if (once) {
        ActionBar actionBar = getSupportActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        // initiating both tabs and set text to it.
        ActionBar.Tab assignTab = actionBar.newTab().setText("Assignments");
        ActionBar.Tab schedTab = actionBar.newTab().setText("Schedule");
        ActionBar.Tab contactTab = actionBar.newTab().setText("Contact");

        // Create three fragments to display content
        Fragment assignFragment = new Assignments();
        Fragment schedFragment = new Schedule();
        Fragment contactFragment = new Contact();

        assignTab.setTabListener(new MyTabsListener(assignFragment));
        schedTab.setTabListener(new MyTabsListener(schedFragment));
        contactTab.setTabListener(new MyTabsListener(contactFragment));

        actionBar.addTab(assignTab);
        actionBar.addTab(schedTab);
        actionBar.addTab(contactTab);
        once = false;
        }
    } else {
        // In single-pane mode, simply start the detail activity
        // for the selected item ID.
        Intent detailIntent = new Intent(this, CourseDetailActivity.class);
        startActivity(detailIntent);
    }

}
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
            ft.replace(R.id.twopanecontainer, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
}
}
} 
```

这是默认情况下包含文本视图的片段课程详细信息布局。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/twopanecontainer"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/course_detail"
        style="?android:attr/textAppearanceLarge"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="16dp"
        tools:context=".CourseDetailFragment" />

</LinearLayout> 
```

我应该修改什么，以便为每个选项卡添加不同的视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:18:45.870

在你的活动布局中有一个 ViewPager，然后实现 FragmentPagerAdapter

# sql - SQL存储过程没有将行分组在一起

> ID：13346062
> 
> 赞同：0
> 
> 时间：2012-11-12T15:03:30.233
> 
> 标签：sql, sql-server, stored-procedures, group-by

我有下面的代码。它基本上从由 asp.net 上传控件加载的电子表格中获取值。自动分配凭证编号。我将数据放入临时表中，然后从临时表中选择数据并将其插入到我的实际数据库表中。数据是分组的，因此它采用最小的文档编号和日期列（数据唯一不同的列）。数据加载正常，但由于某种原因它没有被分组。有没有人看到查询本身有任何问题？

```
 CREATE Procedure dbo.temptable
    (
        @DocumentBranchPlant varchar(12)
      , @DocumentType varchar(2)
      , @DEANumber varchar(9)
      , @DebitMemo varchar(25)
      , @DebitTotal float
      , @ErrorOverRide bit
      , @OnHold bit
      , @LastModifiedUser varchar(50)
      , @ResubmissionCode char(2)
      , @DocumentNumber float out 
    )

AS
begin

  declare @TransmissionDate datetime
  declare @JulianTransmissionDate numeric(18,0)
  declare @ShipTo float
  declare @CustomerName varchar(40)

  Set @DocumentNumber = scope_identity()
  set @TransmissionDate = getdate()
  set @JulianTransmissionDate =getdate()

  DECLARE @cb table
  ( DocumentBranchPlant     char(12)
  , DocumentNumber          float   
  , DocumentType            char(2)
  , JulianTransmissionDate  numeric(18,0)
  , TransmissionDate        datetime
  , DEANumber               varchar(9)
  , ShipTo                  float
  , DebitMemo               char(25)
  , DebitTotal              float   
  , CustomerName            varchar(40)
  , ErrorOverRide           bit
  , EntryComplete           bit 
  , OnHold                  bit
  , ManualEntry             bit
  , LastModifiedUser        varchar(50)
  , LastModifiedDate        datetime
  , ResubmissionCode        char(2))

  INSERT INTO @cb
  ( DocumentBranchPlant
  , DocumentNumber 
  , DocumentType 
  , JulianTransmissionDate
  , TransmissionDate
  , DEANumber
  , ShipTo
  , DebitMemo
  , DebitTotal
  , CustomerName
  , ErrorOverRide
  , EntryComplete
  , OnHold
  , ManualEntry
  , LastModifiedUser
  , LastModifiedDate
  , ResubmissionCode)
  VALUES
  ( @DocumentBranchPlant
  , @DocumentNumber
  , @DocumentType
  , @JulianTransmissionDate
  , @TransmissionDate
  , @DEANumber
  , @ShipTo
  , @DebitMemo
  , @DebitTotal
  , @CustomerName
  , @ErrorOverRide
  , 0
  , @OnHold
  , 1
  , @LastModifiedUser
  , getdate()
  , @ResubmissionCode)

  INSERT INTO dbo.CbTempTable
  ( DocumentBranchPlant
  , DocumentNumber
  , DocumentType
  , JulianTransmissionDate
  , TransmissionDate
  , DEANumber
  , ShipTo
  , DebitMemo
  , DebitTotal
  , CustomerName
  , ErrorOverRide
  , EntryComplete
  , OnHold
  , ManualEntry
  , LastModifiedUser
  , LastModifiedDate
  , ResubmissionCode)
  SELECT
    DocumentBranchPlant
  , min(DocumentNumber)
  , DocumentType
  , JulianTransmissionDate
  , min(TransmissionDate)
  , DEANumber
  , ShipTo
  , DebitMemo
  , DebitTotal
  , CustomerName
  , ErrorOverRide
  , EntryComplete
  , OnHold
  , ManualEntry
  , LastModifiedUser
  , min(LastModifiedDate)
  , ResubmissionCode
  FROM @cb

  GROUP BY
    DocumentBranchPlant
  , DocumentType
  , JulianTransmissionDate
  , DEANumber
  , ShipTo
  , DebitMemo
  , DebitTotal
  , CustomerName
  , ErrorOverRide
  , EntryComplete
  , OnHold
  , ManualEntry
  , LastModifiedUser
  , ResubmissionCode 
```

# java - 用于从 XML 中提取媒体信息的 Java 代码

> ID：13346066
> 
> 赞同：0
> 
> 时间：2012-11-12T15:03:37.693
> 
> 标签：java, xml

我有以下 XML。我需要创建一个 java serverlet 来从这个 XML 中提取媒体信息。我该怎么做。我对使用任何 java 库都不感兴趣。没有库的任何手动方法？

我的 XML 如下

```
<result cover="http://ia.mediaimdb.com/images      
/M/MV5BMjMyOTM4MDMxNV5BMl5BanBnXkFtZTcwNjIyNzExOA@@._V1._SX54_
CR0,0,54,74_.jpg" title="The Amazing Spider-Man(2012)"year="2012"
director="Marc Webb" rating="7.5"
details="http://www.imdb.com/title/tt0948470"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMzk3MTE5MDU5NV5BMl5BanBnXkFtZTYwMjY3NTY3._V1._SX54_CR0,
0,54,74_.jpg" title="Spider-Man(2002)" year="2002"director="Sam Raimi"
rating="7.3" details="http://www.imdb.com/title/tt0145487"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BODUwMDc5Mzc5M15BMl5BanBnXkFtZTcwNDgzOTY0MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 3 (2007)" year="2007" director="Sam
Raimi" rating="6.3" details="http://www.imdb.com/title/tt0413300"/>

<result cover="http://i.mediaimdb.
com/images/SF1f0a42ee1aa08d477a576fbbf7562eed/realm/feature.gif" title="
The Amazing Spider-Man 2 (2014)" year="2014" director="Sam Raimi"
rating="6.3" details="http://www.imdb.com/title/tt1872181"/>

<result cover="http://ia.mediaimdb.
com/images/M/MV5BMjE1ODcyODYxMl5BMl5BanBnXkFtZTcwNjA1NDE3MQ@@._V1._SX54_
CR0,0,54,74_.jpg" title="Spider-Man 2 (2004)" year="2004" director="Sam
Raimi" rating="7.5" details="http://www.imdb.com/title/tt0316654"/>
</results> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:14:31.260

您当然不应该“没有任何库”尝试它。图书馆是你最好的朋友。使用库这可能是几行 + 一个 jar 依赖项..

无论如何：您可以使用 XPath 来查询此文档中的信息。你有 dom4j、SAX 等。你也可以使用简单的正则表达式，但这不是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:24:39.793

使用 java 库可以使您的任务直接进行。只需使用 digester.jar ...:)

# pcre - 为什么我的 PCRE 只匹配第一个结果

> ID：13346067
> 
> 赞同：2
> 
> 时间：2012-11-12T15:03:39.367
> 
> 标签：pcre

我想匹配输入字符串中的所有“abc”。但是当输入“第一个 abc，第二个 abc，第三个 abc”时，我得到了以下结果。我还输出了ovector：

```
src: first abc, second abc, third abc
Matches 1
ovector: 6|9|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0| 
```

我的代码：

```
#include <stdio.h>
#include <string.h>
#include "pcre.h"

static const char my_pattern[] = "abc";
static pcre* my_pcre = NULL;
static pcre_extra* my_pcre_extra = NULL;

void my_match(const char* src)
{
    printf("src: %s\n", src);
    int ovector[30]={0};
    int ret = pcre_exec(my_pcre, NULL, src, strlen(src), 0, 0, ovector, 30);
    if (ret == PCRE_ERROR_NOMATCH){
        printf("None match.\n");
    }
    else{
        printf("Matches %d\n",ret);
    }
    printf("ovector: ");
    for(int i=0;i<sizeof(ovector)/sizeof(int);i++){
        printf("%d|",ovector[i]);
    }
    printf("\n");
    return;
}

int main()
{
    const char* err;
    int erroffset;
    my_pcre = pcre_compile(my_pattern, PCRE_CASELESS, &err, &erroffset, NULL);
    my_pcre_extra = pcre_study(my_pcre, 0, &err);
    my_match("first abc, second abc, third abc");
    return 0;
} 
```

我怎样才能得到所有的'abc'，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T06:43:13.303

`pcre_exec`一次只能找到一个匹配项。`ovector`用于子字符串匹配。`int ovector[30]={0};`最多会给你 10 个匹配项（最后三分之一 (20-29) 不使用），第一对数字用于整个模式，下一对数字用于第一个捕获括号，依此类推。例如，如果您将模式更改为：

```
`static const char my_pattern[] = "(a(b)c)";` 
```

然后在你的输出中你应该看到

```
Matches 3
ovector: 6|9|6|9|7|8|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0| 
```

该函数返回匹配的捕获数，在本例中为三个，一个用于整个模式，两个用于子模式捕获。整个模式匹配 6-9，第一个括号也匹配 6-9，第二个括号匹配 7-8。要获得更多的完整匹配（全局），您必须使用循环，`ovector[1]`每次都传入前一个匹配的偏移量（）。

请参阅[http://www.pcre.org/pcre.txt](http://www.pcre.org/pcre.txt)并搜索**pcre_exec() 如何返回捕获的子字符串**

# java - 数据库密码存储问题，Java Web App

> ID：13346068
> 
> 赞同：1
> 
> 时间：2012-11-12T15:03:45.780
> 
> 标签：java, spring, security, web-applications, database-security

我是应该非常安全的 Java Spring Web 应用程序的一部分。到目前为止，在测试环境中，我们正在从位于类路径的属性文件中加载数据库用户名和密码。密码是用我们从本地文件系统加载的密钥加密的。

我的工作是仅使用软件工具找到一种更好的方法（更安全的方法）。我正在考虑在 webapp 或类似的启动时提供数据库用户名和密码（但似乎仍然不行，因为数据库管理员应该在启动时出现）。除此之外，我被困住了。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T11:38:35.227

您需要锁定数据库，以便只有应用程序可以以尽可能少的信任与其对话。

一种方法是限制它，以便只接受应用服务器的私有 IP。使数据库只监听私有（内部）网络连接。

密码是红鲱鱼。

# authentication - 使用 servicestack 成功登录时重定向

> ID：13346070
> 
> 赞同：2
> 
> 时间：2012-11-12T15:03:53.690
> 
> 标签：authentication, servicestack

我最近决定迁移到使用 servicestack 身份验证。据我所知，要在成功登录 oauth 提供程序后进行重定向，请将 URL 添加到 web.config 的 appSettings 中，即 oauth.GoogleOpenId.RedirectUrl。

我的问题是，有没有办法让它变得更加动态，这样如果用户在尝试访问授权页面时被重定向到登录页面，比如他们的个人资料页面，一旦他们成功登录，他们就会被路由到他们的个人资料页面而不是 web.config 中配置的内容？表单身份验证通过使用“returnUrl”查询参数来做到这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:19:50.197

访问受保护页面、重定向到`/login`页面（可使用 AuthFeature 或 Authenticate 属性上的 HtmlRedirect 覆盖）以及成功登录的行为应自动重定向到先前尝试的受保护页面。

为此，您需要在尝试使用服务进行身份验证时在 FormData POST 变量或 QueryString`continue`中指定重定向 url 。`ReturnUrl``/auth`

# module - Yii，在主控制器中使用模块

> ID：13346077
> 
> 赞同：2
> 
> 时间：2012-11-12T15:04:14.240
> 
> 标签：module, yii

尝试在 Yii 中使用模块并希望从主控制器 (SiteController) 访问模块的方法。使用 Gii 创建模块，模块名称为 Car。尝试访问 RequestController 模块 Car 中的方法搜索。

```
echo Yii::app()->Car->Request->search(); 
```

Yii 跟我说话

> 未定义属性“CWebApplication.carhire”。

有人知道如何从另一个控制器访问模块的方法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:14:56.727

您的模块不会进入应用程序范围。也就是说`components`，可以通过`Yii::app()->`模块访问，但是通过`Yii::app()->getModule($moduleName)->`.

不过，这并不能真正帮助在控制器上运行操作。如果不完全打破抽象模块的要点，也很难获得访问权限。

bool.dev 的回答如果你真的需要，[这](https://stackoverflow.com/questions/9590046/yii-accessing-a-function-from-a-modules-controller)是我见过的最好的方法。

但是您遇到的问题可能指向您网站结构的潜在问题。如果您需要在应用程序的其他地方访问模块控制器功能，也许它不应该在模块中？

# c# - STL/CLR 库使用 IComparable 实现 == 运算符并抛出 NullReferenceException

> ID：13346081
> 
> 赞同：1
> 
> 时间：2012-11-12T15:04:21.073
> 
> 标签：c#, c++, .net, cliext

我有一个没有实现`IComparable`接口的 .NET 类。在我在这个类上实现`IComparable`接口之后，一些使用我的类的 c++ 代码意外地改变了它的行为。现在它抛出一个`NullReferenceException`

```
DWORD UnitsAdapter::GetUnitNames([Out]array<MyClass^>^% unitNames)
{

  ...

  unitNames = gcnew array<MyClass^>(10);

  DWORD dwRet = BUMC_OK;
  for (int i = 0; i < unitNames->Length; ++i)
  {
    unitNames[i] = nullptr;
    unitNames[i] = CoCliUnitsHelper::getUnitName(unitIds[i]);

    if (nullptr == unitNames[i])
      dwRet = BUMC_NOT_COMPLETE;
  }

  return dwRet; 
```

}

**问题出在`if (nullptr == unitNames[i])`开始使用`IComparable`implementation 执行`==`操作的行中！**

原因是`cliext`实用程序头文件中的模板。

```
//
// System::IComparable TEMPLATE COMPARISONS
//
template<typename _Value_t>
    bool operator==(System::IComparable<_Value_t>^ _Left,
        System::IComparable<_Value_t>^ _Right)
    {   // test if _Left == _Right
    return (_Left->CompareTo(_Right) == 0);
    } 
```

***问题 1：***我不是 c++ 专家，所以有人可以解释一下为什么这个实现`_Left`在调用`CompareTo()`方法之前不执行 null 检查吗？根据[MSDN Guidelines for Overloading Equals() 和 Operator ==](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx) null 检查必须在操作员内部执行任何`==`操作之前完成。

```
 ...
 // If both are null, or both are same instance, return true.
 if (System.Object.ReferenceEquals(a, b))
 {
        return true;
 }

 // If one is null, but not both, return false.
 if (((object)a == null) || ((object)b == null))
 {
        return false;
 }
 ... 
```

***问题 2：***是否存在导致这种不可预测行为的使用缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:37:12.257

> 所以有人可以解释一下为什么这个实现在调用 CompareTo() 方法之前不对 _Left 执行空检查

因为写它的人忽略了检查空值。

> 使用中是否可能存在一些缺陷导致这种不可预测的行为？

好吧，将空指针与某物进行比较可能是一种极端情况，但我当然不会称其为“缺陷”。的实现`==`不正确。

要解决此问题，您可以反转您的平等检查和/或检查`null`：

```
if (unitNames[i] == nullptr)
  dwRet = BUMC_NOT_COMPLETE; 
```

# visual-studio-2010 - VisualStudio 2010 插件设置不断重置

> ID：13346083
> 
> 赞同：0
> 
> 时间：2012-11-12T14:21:13.600
> 
> 标签：visual-studio-2010, resharper

我的开发机器上有 VS2010 Ultimate，还有 ReSharper、VSCommands2010 和其他一些。

vs2010、resharper 和其他插件的设置每隔一段时间就会重置一次 - 所以我必须重新设置它们，然后重新启动 VS 以启动新设置。

我正在谈论的设置示例：

```
*resharper intellisense ingreation
*resharper highlite current line
*resharper participation in customer program (systray icon)
*VSCommands2010 regex solution name
*etc. 
```

是否有可能让 VS 永远记住所有这些设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:44:50.890

同事有同样的问题，但我没有。我们的设置之间的区别在于，我将我的 VS.NET 设置存储在本地，而他通过网络将它们存储在他的网络重定向文件夹中。

一般来说，我发现 VS.NET 并不喜欢将其设置存储在其他机器上，所以我从来没有让它这样做。我将它们存储在我的 D:[Projects][VS.NET][Settings] 文件夹中并使用方括号，因此当我按字母顺序排列文件夹列表时，这些婴儿位于顶部。

# php - 基于对象状态构建列表

> ID：13346087
> 
> 赞同：1
> 
> 时间：2012-11-12T15:04:31.967
> 
> 标签：php, oop

在构建表示某些对象状态的列表时，我应该询问每个对象的状态并自己修改列表，还是应该给对象列表并告诉它添加自己？

我正在为页面上的输出构建一个模板列表。表单元素要求将此列表精简为键/值对。一位同事提到我应该更多地关注“告诉，不要问”，我正在努力理解这个问题的原则。

我采取了一种方法，我创建了一个 TemplateList 实例，然后要求每个模板将自己添加到列表中。这允许模板确定它将传递给哪些参数`TemplateList::addTemplate()`。

```
class TemplateList {
    public $templates = array();

    public function addTemplate($id, $label) {
        $this->templates[$id] = $label;
    }

    public function getTemplates() {
        return $templates;
    }
}

interface TemplateInterface {
    public function addToTemplateList(&$templatelist);
}

class DiskTemplate implements TemplateInterface {
    public function addToTemplateList(&$template_list) {
        $template_list->addTemplate($this->name, $this->name);
    }
}

class DatabaseTemplate implements TemplateInterface {
    public function addToTemplateList(&$template_list) {
        $template_list->addTemplate($this->id, $this->name);
    }
} 
```

示例用法：

```
$template_list = new TemplateList;

// fetch $disk_templates and $db_templates

foreach ($disk_templates as $template) {
    $template->addToTemplateList($template_list);
}

foreach ($db_templates as $template) {
    $template->addToTemplateList($template_list);
} 
```

另一种方法是询问模板的状态并将结果添加到模板列表中：

```
$template_list = new TemplateList;

// fetch $template

$template_list->addTemplate($template->propertiesForTemplateList()); 
```

这两种方法都有优势吗？还有什么我完全没有考虑到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:25:41.630

首先，原则上有一个小错误：它的“[告诉，不要问](http://pragprog.com/articles/tell-dont-ask)”:)。[您可以在此处](http://alanknightsblog.blogspot.com.ar/2011/10/principles-of-oo-design-or-everything-i.html)找到有关此原则和其他原则的非常好的文章. 基本思想是，与其向对象提问然后决定做什么，不如告诉对象该做什么。每个对象（例如基于其内部状态）应该知道如何处理任务（消息发送）。这对于保持责任的合理分配很重要。如果你向一个对象询问某事，但决定在另一个对象上做什么，那么你就是在将一个对象的内在逻辑传播到多个对象中。这会产生难以测试和维护的代码，因为您没有内聚的对象和一个修改/测试功能的地方。这里出现的第二个问题是封装；在大多数情况下，对象的状态是私有的，人们将其公开，以便可以查询对象的状态，以便稍后执行操作。作为一般的经验法则，我认为这是一种气味，因为您（再次）不仅将对象责任分散到系统的其余部分，而且还违反了对象的封装。请注意，我在这里并不是说吸气剂本身不好，只是如果您需要公开您的状态以便其他对象可以为您做出决定，那么您可能会走错路。

现在，转到您的代码，我认为第一种方法是完全有效的，因为它是知道如何将自己添加到列表以及应该使用哪些属性的对象。您正在妥善分配职责，并在必要时封装内部状态。

高温高压

# postgresql - 将 UUID 与 EclipseLink 和 PostgreSQL 一起使用

> ID：13346089
> 
> 赞同：3
> 
> 时间：2012-11-12T15:04:38.337
> 
> 标签：postgresql, jpa, jpa-2.0, eclipselink

我想对对象的主键使用 PostgreSQL uuid 类型。为此，我创建了一个转换器（实现转换器接口）。下面是相关代码：

```
 @Override
    public void initialize(DatabaseMapping mapping, Session session) {
        final DatabaseField field;
        if (mapping instanceof DirectCollectionMapping) {
            field = ((DirectCollectionMapping) mapping).getDirectField();
        } else {
            field = mapping.getField();
        }

        field.setSqlType(Types.OTHER);
        field.setTypeName("uuid");
        field.setColumnDefinition("UUID");
    } 
```

然后我用下面的注释注释了相关的实体 X：

```
@Converter(name="uuidConverter",converterCalss=UUIDConverter.class)
@Convert("uuidConverter")
@Id
public UUID getId()
{
    return id;
} 
```

问题是我有另一个类（Y），它具有以下定义：

```
@ManyToOne(targetEntity = X.class)
@JoinColumn(name = "x_id")
public X getX(); 
```

尽管 EclipseLink 按预期创建了表，但它在尝试插入 Y 类型的对象时会向数据库发送一个字符串。 Postgres 返回以下错误消息：

```
column "id" is of type uuid but expression is of type character varying at character 
```

任何解决方案/解决方法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:54:22.370

我对 EclipseLink JPA + Postgresql + UUID 作为主键有同样的问题。

为了解决这个问题，我合并了来自 Github 和以下链接的代码： [https ://forums.oracle.com/forums/thread.jspa?messageID=4584157](https://forums.oracle.com/forums/thread.jspa?messageID=4584157)

下面的 UUIDConverter 代码对我有用，尽管代码肯定不是最好的。

```
public void initialize(DatabaseMapping ARGMapping, Session ARGSession)
{
    final DatabaseField Field;
    if (ARGMapping instanceof DirectCollectionMapping)
    {
        Field = ((DirectCollectionMapping) ARGMapping).getDirectField();
    }
    else
    {
        Field = ARGMapping.getField();
    }
    Field.setSqlType(Types.OTHER);
    Field.setTypeName("uuid");
    Field.setColumnDefinition("UUID");

    for (DatabaseMapping m : ARGMapping.getDescriptor().getMappings())
    {
        assert OneToOneMapping.class.isAssignableFrom(ManyToOneMapping.class);
        if (m instanceof OneToOneMapping)
        {
            for (DatabaseField field : ((OneToOneMapping) m).getForeignKeyFields())
            {
                field.setSqlType(Types.OTHER);
                field.setColumnDefinition("UUID");
                field.setTypeName("uuid");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:25:59.413

尝试在初始化方法中检查映射的 fieldClassification 是什么。它可能会以某种方式获取 String.class，请尝试将其设置为 Object.class。

或者，field.setType(Object.class)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T15:15:02.260

我在使用 EclipseLink JPA 2.1 + Postgresql + UUID 作为主键时遇到了一些问题，但我找到了不同的解决方案。我采用了 AttributeConverter，但我遇到了 EclipseLink 实现的问题，我用这段代码解决了这个问题：

```
@javax.persistence.Converter(autoApply = true)
public class PostgresUuidConverter implements AttributeConverter<UUID, Object> {        

    @Override
    public Object convertToDatabaseColumn(UUID uuid) {
        PostgresUuid object = new PostgresUuid();
        object.setType("uuid");
        try {
            if (uuid == null) {
                object.setValue(null);
            } else {
                object.setValue(uuid.toString());
            }
        } catch (SQLException e) {
            throw new IllegalArgumentException("Error when creating Postgres uuid", e);
        }
        return object;
    }

    @Override
    public UUID convertToEntityAttribute(Object dbData) {
        if (dbData instanceof String) {
            return UUID.fromString(dbData.toString());
        } else {    
            return (UUID) dbData;
        }
    }

}

public class PostgresUuid extends PGobject implements Comparable<Object> {

    private static final long serialVersionUID = 1L;

    @Override
    public int compareTo(Object arg0) {
        return 0;
    }

} 
```

正如我在这篇文章中详细解释的那样[http://blog-ungarida.rhcloud.com/persisting-uuid-in-postgresql-using-jpa-eclipselink/](http://blog-ungarida.rhcloud.com/persisting-uuid-in-postgresql-using-jpa-eclipselink/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-11T20:36:58.760

EclipseLink 的通用 UUIDConverter（不仅是 PostgreSQL）

**代码：**

```
import java.nio.ByteBuffer;
import java.util.UUID;

import org.eclipse.persistence.internal.helper.DatabaseField;
import org.eclipse.persistence.mappings.DatabaseMapping;
import org.eclipse.persistence.mappings.DirectCollectionMapping;
import org.eclipse.persistence.mappings.converters.Converter;
import org.eclipse.persistence.sessions.Session;

public class UUIDConverter implements Converter {

    private Boolean isUUIDasByteArray = true;

    @Override
    public Object convertObjectValueToDataValue(Object objectValue,
                                                Session session) {
        if (isUUIDasByteArray) {
            UUID uuid = (UUID)objectValue;
            if (uuid == null) return null;
            byte[] buffer = new byte[16];
            ByteBuffer bb = ByteBuffer.wrap(buffer);
            bb.putLong(uuid.getMostSignificantBits());
            bb.putLong(uuid.getLeastSignificantBits());
            return buffer;
        }
        return objectValue;
    }

    @Override
    public UUID convertDataValueToObjectValue(Object dataValue,
                                              Session session) {
        if (isUUIDasByteArray) {
            byte[] bytes = (byte[])dataValue;
            if (bytes == null) return null;
            ByteBuffer bb = ByteBuffer.wrap(bytes);
            long high = bb.getLong();
            long low = bb.getLong();
            return new UUID(high, low);
        }
        return (UUID) dataValue;
    }

    @Override
    public boolean isMutable() {
        return true;
    }

    @Override
    public void initialize(DatabaseMapping mapping, Session session) {
        final DatabaseField field;
        if (mapping instanceof DirectCollectionMapping) {
            // handle @ElementCollection...
            field = ((DirectCollectionMapping) mapping).getDirectField();
        } else {
            field = mapping.getField();
        }

        if (session != null && session.getLogin()!= null && session.getLogin().getPlatform() != null) {
            String platform = session.getLogin().getPlatform().getClass().getSimpleName();

            if (platform.equals("PostgreSQLPlatform")) {
                field.setSqlType(java.sql.Types.OTHER);
                field.setTypeName("java.util.UUID");
                field.setColumnDefinition("UUID");
                isUUIDasByteArray = false;
            } else if (platform.equals("H2Platform")) {
                field.setColumnDefinition("UUID");
            } else if (platform.equals("OraclePlatform")) {
                field.setColumnDefinition("RAW(16)");
            } else if (platform.equals("MySQLPlatform")) {
                field.setColumnDefinition("BINARY(16)");
            } else if (platform.equals("SQLServerPlatform")) {
                field.setColumnDefinition("UNIQUEIDENTIFIER");
            }
        }

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-27T22:54:36.600

你不需要转换。在实体中使用此列定义。您需要先注册 uuid 扩展。这适用于 Postgres 10 和 Wildfly 10.1

```
@Column(name = "UUID", nullable=false, insertable = false, columnDefinition="uuid DEFAULT uuid_generate_v4()")
private String uuid; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-18T14:49:51.187

EclipseLink 和 PostgresQL 之间似乎存在错误/不兼容。如果你只是使用 UUID 作为主键，你应该没问题。但是如果你有一个可以为空的 UUID 列，并且你尝试在其中存储 null，你会得到报告的错误：

```
column "whatever" is of type uuid but expression is of type character varying 
```

请参阅：[https](https://bugs.eclipse.org/bugs/show_bug.cgi?id=538138) ://bugs.eclipse.org/bugs/show_bug.cgi?id=538138 （如果有时间，请登录并投票！）

那个错误报告证明对我非常有用。特别是论坛主题的链接：

[https://www.eclipse.org/forums/index.php?t=msg&th=1073632&goto=1719530&#msg_1719530](https://www.eclipse.org/forums/index.php?t=msg&th=1073632&goto=1719530&#msg_1719530)

我在 SO 和网络上的其他地方尝试了各种解决方案。唯一对我有用的是大卫惠勒在那里发布的。具体来说，在数据库中创建一个转换 from `character varying`to 。`uuid`

请注意，您必须是用户 postgres 才能创建演员表：

```
$ sudo su - postgres
$ psql <your database name>

# drop cast if exists (character varying as uuid);
# create or replace function uuid(_text character varying) returns uuid language sql as 'select uuid_in(_text::cstring)';
# create cast (character varying as uuid) with function uuid(character varying) as assignment; 
```

* * *

为了完整起见，这里是我使用的其余部分（以防有帮助）

我所有的实体（具有 UUID 主键）都扩展了一个名为`EntityBase`：

```
package com.example.entity;

import java.io.Serializable;
import java.util.UUID;

import javax.persistence.Id;
import javax.persistence.MappedSuperclass;

import org.eclipse.persistence.annotations.Convert;
import org.eclipse.persistence.annotations.Converter;

import com.example.converter.UUIDTypeConverter;

@MappedSuperclass
@Converter(name="uuidConverter", converterClass=UUIDTypeConverter.class)
public class EntityBase implements Serializable, Cloneable
{
   private static final long serialVersionUID = 1L;

   @Id
   @Convert("uuidConverter")
   private UUID  id;

   public EntityBase() {
      this.id = UUID.randomUUID();
   }

   @Override
   public int hashCode() {
      return id.hashCode();
   }

   @Override
   public boolean equals(Object obj) {
      if (this == obj)
         return true;
      if (obj == null)
         return false;
      if (!(obj instanceof EntityBase)) {
         return false;
      }
      EntityBase other = (EntityBase) obj;
      return getId().equals(other.getId());
   }

   public UUID getId()
   {
      return this.id;
   }

   public void setId(UUID id)
   {
      this.id = id;
   }
} 
```

UUID 转换器类如下所示：

```
package com.example.converter;

import java.sql.Types;
import java.util.UUID;

import org.eclipse.persistence.internal.helper.DatabaseField;
import org.eclipse.persistence.mappings.DatabaseMapping;
import org.eclipse.persistence.mappings.converters.Converter;
import org.eclipse.persistence.sessions.Session;

public class UUIDTypeConverter implements Converter
{
   @Override
   public UUID convertObjectValueToDataValue(Object objectValue, Session session)
   {
      return (UUID) objectValue;
   }

   @Override
   public UUID convertDataValueToObjectValue(Object dataValue, Session session)
   {
      return (UUID) dataValue;
   }

   @Override
   public boolean isMutable()
   {
      return true;
   }

   @Override
   public void initialize(DatabaseMapping mapping, Session session)
   {
      DatabaseField field = mapping.getField();
      field.setSqlType(Types.OTHER);
      field.setTypeName("java.util.UUID");
      field.setColumnDefinition("UUID");
   }
} 
```

如果您的实体的 UUID 列不是主键，则可以按如下方式对其进行注释：

```
import org.eclipse.persistence.annotations.Convert
import org.eclipse.persistence.annotations.Converter;

@Entity
@Converter(name="uuidConverter", converterClass=UUIDTypeConverter.class)
public class BillingEvent extends EntityBase
{

   @Convert("uuidConverter")
   private UUID  entityId;

} 
```

请注意，如果该实体具有使用标准`javax.persistence.convert`注释的其他列，则需要区分这两个`Convert`注释以避免编译错误。

例如：

```
import javax.persistence.Convert;
import org.eclipse.persistence.annotations.Converter;

@Entity
@Converter(name="uuidConverter", converterClass=UUIDTypeConverter.class)
public class BillingEvent extends EntityBase
{

   @org.eclipse.persistence.annotations.Convert("uuidConverter")
   private UUID  entityId;

   @Convert(converter = JSR310InstantTypeConverter.class)
   private Instant     createdOn;
} 
```

我希望这可以节省其他人一些时间。祝你好运！

# html - 使用 localstorage 存储用户/密码对

> ID：13346092
> 
> 赞同：0
> 
> 时间：2012-11-12T15:04:41.773
> 
> 标签：html, login, local-storage

所以，我正在使用 localstorage，需要创建一个登录页面。如果注册完成，那只会使用在同一浏览器/手机中注册的用户登录。我面临的问题是，我只能配对用户/密码，因为我不知道如何检查它。我将解释：如果我有多个用户，只要他们在 localStorge 中的位置，它将使用任何用户/密码登录，而不必使用相应的用户。我需要检查用户是否是该密码的“所有者”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:31:47.180

您必须将数组序列化到 localStorage。

```
// to store some logins:
var logins=[];

logins[0]={username: someusername, password: somepassword };

logins[1]={username: someotherusername, password: someotherpassword };

localStorage['logins']=JSON.stringify(logins);

// to fetch all:
var storedLogins=JSON.parse(localStorage['logins']); 
```

# servlets - 像 Play 一样使用 Netty 作为 HTML 服务器

> ID：13346095
> 
> 赞同：0
> 
> 时间：2012-11-12T15:04:47.687
> 
> 标签：servlets, playframework, netty

想用 RestEasy 包装我的 Spring 服务并将 RestEasy 调度程序挂接到 Netty 中（有一个很好的帮助类称为 NettyJaxrsServer，只需将 RestEasy 编码/解码器添加到管道中）。这让我开始进行客户端 Ajax 调用。但是像通常通过 Apache 或 Tomcat 那样提供 HTML 内容呢？看到人们在 Netty 前面使用 Apache/Tomcat 来获得 cookie 管理等的所有好处。简要介绍了 Netty 的 Play 模块，它看起来像 cookie 管理、缓存、文件分块等。Play 的模块有多全面？

只是浏览其他人在做什么。最后，我想在 Netty 处理“服务”调用时推出 Extjs 或 Foundation 框架的一组静态 HTML、JS、CSS 内容部分。

# jquery - 当数据类型为 json 时 jqGrid 不获取行数据，但当数据类型为本地时工作正常。

> ID：13346096
> 
> 赞同：0
> 
> 时间：2012-11-12T15:04:49.627
> 
> 标签：jquery, jqgrid

我正在尝试两种版本的代码，一种是本地数据类型，另一种是 json 数据类型。我要做的就是将数据打印到控制台日志，使用这一行`console.log(texts)`。但是，仅当数据类型为本地时才打印到控制台。下面是两个版本的代码，本地数据类型和json数据类型。两个版本都相似，只是数据类型发生了变化。我`someFunc`最后打电话来打印数据

**本地数据类型**

```
$(document).ready(function() {
    var mydata = [
     {id: "1", name: "someone"}
    ]
    someFunc = function(columnName) {
         var texts = jQuery("#myGrid").jqGrid('getCol',columnName);
         console.log(texts); //is printing only when datatype is local
    };
    jQuery("#myGrid").jqGrid(
        {
            autoencode:true,
            mtype: 'GET',
            datatype : 'local',
            data: mydata,                   
            colModel : [ 
                {name: 'name', index: 'Name'}
            ]
    });
    jQuery("#mygrid").jqGrid('navGrid', '#pager', {
        edit : false,
        add : false,
        del : false,
        search : true
    }, {}, {}, {}, {
        sopt : [ 'eq', 'ne', 'lt', 'gt', 'cn', 'bw', 'ew' ],
        closeOnEscape : true,
        multipleSearch : true,
        closeAfterSearch : true
    });   
    someFunc('name');
}); 
```

**Json 数据类型**

```
$(document).ready(function() {
    someFunc = function(columnName) {
         var texts = jQuery("#myGrid").jqGrid('getCol',columnName);
         console.log(texts); //is printing only when datatype is local
    };
    jQuery("#myGrid").jqGrid(
        {
            url : 'someUrlToGetData',
            autoencode:true,
            mtype: 'GET',
            datatype: 'json',

            colModel : [ 
                {name: 'name', index: 'Name'}
            ]
    });
    jQuery("#mygrid").jqGrid('navGrid', '#pager', {
        edit : false,
        add : false,
        del : false,
        search : true
    }, {}, {}, {}, {
        sopt : [ 'eq', 'ne', 'lt', 'gt', 'cn', 'bw', 'ew' ],
        closeOnEscape : true,
        multipleSearch : true,
        closeAfterSearch : true
    });   
    someFunc('name');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:42:02.843

您应该包含来自 URL 的服务器响应`'someUrlToGetData'`。`someFunc`此外，您应该在分配变量之前声明它：`var someFunc = function(columnName) { ... };`

对于您的主要问题：如果服务器正确为 jqGrid 生成 JSON 数据（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)），那么您应该只将调用移动到回调`someFunc('name');`内部。`loadComplete`

```
jQuery("#myGrid").jqGrid({
    url : 'someUrlToGetData',
    autoencode:true,
    mtype: 'GET',
    datatype: 'json',
    colModel : [ 
        {name: 'name', index: 'Name'}
    ],
    gridview: true,
    loadComplete: function () {
        someFunc('name');
    }
}); 
```

问题是代码异步工作。如果您创建网格，那么将对jqGrid 选项`datatype: "json"`指定的 URL 进行 Ajax 调用。`url`

# node.js - 使用 node-mongodb-native 从数组中提取对象

> ID：13346100
> 
> 赞同：0
> 
> 时间：2012-11-12T15:04:59.500
> 
> 标签：node.js, mongodb, node-mongodb-native

我正在为 nodejs 的 mongodb 本机驱动程序进行简单的操作而苦苦挣扎。这是我的 mongo 文档：

```
{
    "_id" : 1,
    "foo" : "bar",
    "baz" : [
         {
            "a" : "b",
            "c" : 1
         },
         {
            "a" : "b",
            "c" : 2
         }
    ]
} 
```

我有一个像下面这样的变量：

```
var removeIt = {"a" : "b", "c" : 1}; 
```

因此，要从`baz`数组中提取此对象，我尝试执行以下操作：

```
collection.update(
        {_id:1}, 
        {$pull:{baz:{a:removeIt.a, c:removeIt.c}}},
        {safe:true},
        function(err, result) {}
); 
```

但这似乎不起作用，我不明白为什么，任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:10:43.017

我刚刚在 MongoShell 上试​​过这个，以下对我有用：

```
> db.test.insert( {
    "_id" : 1,
    "foo" : "bar",
    "baz" : [
         {
            "a" : "b",
            "c" : 1
         },
         {
            "a" : "b",
            "c" : 2
         }
    ]
});

> db.test.findOne();
{ "_id" : 1, "baz" : [ { "a" : "b", "c": 1 }, { "a" : "b", "c" : 2 } ], "foo" : "bar" }

> removeIt = {"a" : "b", "c" : 1};
> db.test.update( { _id: 1 }, { $pull: { baz: removeIt } } );

> db.test.findOne();
{ "_id" : 1, "baz" : [ { "a" : "b", "c" : 2 } ], "foo" : "bar" } 
```

所以修改你的：

```
{$pull:{baz:{a:removeIt.a, c:removeIt.c}}} 
```

至：

```
{$pull:{baz: removeIt}} 
```

它应该工作。

# xml - 生成没有 .xsd 的 POJO？

> ID：13346101
> 
> 赞同：2
> 
> 时间：2012-11-12T15:05:00.623
> 
> 标签：xml, jaxb

我将 JAXB 视为一种将一些从 Web 服务的 API 返回的 XML 解组为 POJO 的方法，但我想首先生成 POJO，而不是手动编写/注释它们。我遇到了 xjc（来自 JAXB 的 POJO 生成器），但是我相信它需要一个 XSD，并且 Web 服务只返回 XML，并且没有可用的 XSD/DTD，所以我想知道最好的方法是什么。

*   有没有办法从直接 XML 生成 POJO？我很高兴假设所有字段都是字符串字段，我不需要类型安全。
*   或者，有一些方法可以从 XML 文件“逆向工程”XSD - 这些有什么好处吗？如果是这样，为什么这个功能没有内置到像 xjc 这样的工具中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:04:45.960

我试用了 JAXBuilder Eclipse 插件，它允许您在 Eclipse 中创建一个项目并放入 xsd 或 xml 文件，它们将被自动解析为 POJO。它为您提供了使用 Castor 或 JAXB2 作为生成器的选项，并具有一些配置选项。

但是，我发现直接 XML -> POJO 转换有点喜怒无常，所以我选择使用基于 Web 的免费[http://www.freeformatter.com/xsd-generator.html](http://www.freeformatter.com/xsd-generator.html)从我的 xml 生成 xsd ，然后将其复制并粘贴到 Eclipse JAXBuilder 项目中以获取 POJO。这种方法在编程上显然不是完美的或可扩展的（复制和粘贴一些 XML），但似乎是使用 JAXB 的一个很好的开始。

# regex - 匹配数字或特定单词的正则表达式

> ID：13346105
> 
> 赞同：0
> 
> 时间：2012-11-12T15:05:15.540
> 
> 标签：regex

我正在尝试创建一个处理 0-9 * 或基本上是 \d* 的正则表达式，但也包括 or (|) 和一个表达式来处理特定的单词。所以我拍摄的想法应该是这个

\d*|[字]

我需要发生这种情况的原因是我有一个过滤器文本框，其中应用了我的验证器以防止输入虚假数据，但诀窍是我将文本框的默认文本设置为要输入到框中的内容，例如作为“输入帐户”。我需要正则表达式来处理 \d* 以进行帐号验证和 | 表达式的一部分以允许文本框的默认文本通过验证。我会检查后端，所以这个默认文本不会破坏应用程序。我有 3 个过滤器框，我将在其中使用此表达式..如果可能的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:13:30.000

您基本上拥有它，但丢失了`[]`，它表示字符类：

```
^\d*|word$ 
```

`^`此外，您应该使用和锚定您的验证表达式`$`。

# jquery - 降低jQuery UI中手风琴的速度

> ID：13346108
> 
> 赞同：5
> 
> 时间：2012-11-12T15:05:20.987
> 
> 标签：jquery, jquery-ui, accordion

这段代码有两个问题：

首先，我想降低效果的速度。

其次，就像你想要关闭一个选项卡的效果一样，然后会有以下新选项卡

```
if ($('#sidebar ul').length) {
    $("#sidebar ul").accordion({
        event: "mouseover",
        active: 1,
        collapsible: false,
        autoHeight: false
    });
} 
```

示例网址：http: [//jsfiddle.net/8pKMh/](http://jsfiddle.net/8pKMh/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:12:39.503

为了速度，使用[animate](http://api.jqueryui.com/accordion/#option-animate)：

```
if ($('#sidebar ul').length) {
    $("#sidebar ul").accordion({
        event: "mouseover",
        active: 1,
        collapsible: false,
        autoHeight: false,
        animate: 2000 // miliseconds
    });
}​ 
```

来自 jquery ui 文档：

**动画**

如果以及如何为更改面板设置动画。

**支持多种类型：**

*   布尔值：false 值将禁用动画。
*   数字：默认缓动的持续时间（以毫秒为单位）。
*   字符串：与默认持续时间一起使用的缓动名称。
*   对象：具有缓动和持续时间属性的动画设置。
    *   还可以包含带有上述任何选项的 down 属性。
    *   当被激活的面板的索引低于当前活动的面板时，会出现“向下”动画。

# c++ - flex 和 bison：如何识别数组

> ID：13346109
> 
> 赞同：1
> 
> 时间：2012-11-12T15:05:21.563
> 
> 标签：c++, bison, flex-lexer

我正在玩 bison 和 flex 以了解口译员的工作方式。我已经做了一些事情，比如范围（`{INT:INT}`或`{INT:INT:INT}`）、字符串（{string"here come any text"}）等，但我无法决定哪种方法应该是帮助野牛理解用户是否以表格形式输入数组的正确方法`[INT, INT, ID, ID, INT, ..., INT, ID, ID...]`?

首先想到的是使用 flex 关键字`BEGIN`，然后一直查看到行尾，但这似乎很愚蠢，因为您需要很多东西，比如了解下一个成员是 INT 还是 ID，这不是一个好方法. 我还能做什么？我宁愿用野牛做这件事，但我不知道如何让野牛看起来递归`[`并`]`抓住它们包含的所有内容。我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:08:15.503

简单——只需制定一个递归规则。

```
expr :- INT | ID;
array_expr :- array_expr expr | expr;
array :- '[' array_expr ']'; 
```

自从我做 Bison 以来已经有一段时间了，但这应该非常接近正确。

# mysql - My Sql 日期比较，包括给定的日期范围

> ID：13346110
> 
> 赞同：3
> 
> 时间：2012-11-12T15:05:24.543
> 
> 标签：mysql, sql

我将日期存储为 updatedOn （值如 '2012-11-12 12:38:43'）

我的疑问是：

```
select * from mytable 
where updatedOn >= '11/12/2012' AND updatedOn <= '11/12/2012' 
```

我的目标是获取所有记录，包括给定`from`和`to`日期

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:09:02.637

如果您避免`<=`并`<`改为使用，那么无论您的数据是否具有时间组件，您最终都将被迫使用有效的逻辑。

```
SELECT
  *
FROM
  myTable
WHERE
      updatedOn >= '2012-12-11'
  AND updatedOn <  '2012-12-11' + INTERVAL '1' DAY 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:08:04.153

您需要获取列的[`DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_date)组件`updatedOn`并将日期文字[格式化为 MySQL 支持的格式](http://dev.mysql.com/doc/en/date-and-time-literals.html)之一：

```
SELECT *
FROM   mytable
WHERE  DATE(updatedOn) BETWEEN '2012-12-11'
                           AND '2012-12-11' 
```

或者，使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数将字符串转换为 MySQL 日期：

```
SELECT *
FROM   mytable
WHERE  DATE(updatedOn) BETWEEN STR_TO_DATE('11/12/2012', '%d/%m/%Y')
                           AND STR_TO_DATE('11/12/2012', '%d/%m/%Y') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:12:15.040

你需要尝试

```
select * from mytable 
where updatedOn >= '11/12/2012' AND updatedOn <= '11/12/2012 23:59:59.999' 
```

就像你写`'11/12/2012'`它的意思一样`'11/12/2012 00:00:00'`，所以你还需要在字符串中添加时间

编辑：正如@Dems 指出的那样，我还需要考虑毫秒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:10:05.147

您应该使用 DATE 功能 -

```
SELECT
  *
FROM
  mytable
WHERE
  DATE(updatedOn) = '2012-12-11' 
```

# android - 在 Android 中绘制叠加层（系统范围）

> ID：13346111
> 
> 赞同：5
> 
> 时间：2012-11-12T15:05:25.010
> 
> 标签：android, linux, overlay, framebuffer

有没有办法总是在任何 android 应用程序之上绘制一个覆盖窗口？

我正在使用 Android x86 端口并拥有系统权限。

@Edit：覆盖下方的视图应该接收所有事件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T15:20:47.140

`Service`可以通过创建一个在 current 中添加视图来做到这一点`WindowManager`：

```
public class OverlayService extends Service {

    @Override
    public void onCreate() {
        super.onCreate();

        WindowManager windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);

        View overlay = /* create your overlay here */;

        WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE,
            PixelFormat.TRANSLUCENT);
        windowManager.addView(overlay , params);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }   
} 
```

但是你需要这个额外的权限：

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /> 
```

然后只需在清单中注册服务：

```
<service android:name=".OverlayService" ></service> 
```

并启动它：

```
startService(new Intent(this, OverlayService.class)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T04:11:31.580

您可以使用我的[库](https://github.com/Gkemon/App-Watermark)，只需删除此方法[addWatermarkWithinApplicationLifecycle()](https://github.com/Gkemon/App-Watermark/blob/5e5ea23e17829c8130a7cf2396608b52b2b2fd41/App-Watermark/src/main/java/com/gk/emon/app/watermark/AppWaterMarkBuilder.kt#L205)，它将覆盖层与应用程序生命周期相结合（*因为您想在整个电话应用程序中显示覆盖层*）。也请不要忘记添加这些权限 -

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"  />
<uses-permission android:name="android.permission.SYSTEM_OVERLAY_WINDOW" />
<uses-permission android:name="android.permission.ACTION_MANAGE_OVERLAY_PERMISSION"/> 
```

我的图书馆的 gif 预览 -

[![在此处输入图像描述](../Images/a5c4ff139d7fc8c2281c6d51fc24808c.png)](https://i.stack.imgur.com/GTbiJ.gif)

# php - 日期之间的错误搜索

> ID：13346113
> 
> 赞同：1
> 
> 时间：2012-11-12T15:05:31.827
> 
> 标签：php, mysql, date

在数据库中，我有表用户，其中包含“生日”列

这是我用来获取结果的 sql 查询

```
SELECT *
FROM (`users`)
WHERE `birthday` between '12/11/1982' and '31/01/1983' 
```

问题是*我只获得 1982 年的记录*？

请注意，存在 1983 年的记录。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:26:00.617

这只是 Mark Byers 的另一个答案。如果您的列的数据类型`birthday`是`varchar`并且格式为`dd/MM/yyyy`，请阅读此；否则，请阅读[Mark Byer 的](https://stackoverflow.com/a/13346170/491243).

您需要做的第一件事是通过使用将列转换为`DATE`或数据类型，`DATETIME``STR_TO_DATE`

```
SELECT *
FROM  `users`
WHERE STR_TO_DATE(`birthday`,'%d/%m/%Y')
          between '1982-01-12' and '1983-12-31' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/616e9/11)

来源

*   [STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)
*   [日期格式](http://davidwalsh.name/format-date-mysql-date_format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:08:52.123

您应该在日期文字中将年份放在首位：

```
SELECT *
FROM `users`
WHERE `birthday` between '1982-11-12' AND '1983-01-31' 
```

从[文档](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-literals.html)中：

> 日期和时间值可以用多种格式表示，例如带引号的字符串或数字，具体取决于值的确切类型和其他因素。例如，在 MySQL 需要日期的上下文中，它会将 '2015-07-21'、'20150721' 和 20150721 中的任何一个解释为日期。

如果您使用的是`varchar`类型，那么将日期放在首位（在数据和查询中）仍然有意义，因为这样您的日期将在使用默认排序顺序时正确排序。

# javascript - 如何将 getElementsByName 返回的元素的值与字符串进行比较？

> ID：13346116
> 
> 赞同：2
> 
> 时间：2012-11-12T15:05:41.073
> 
> 标签：javascript, html

我正在使用文本输入进行测验。这是我到目前为止所拥有的：

```
<html>
    <head>
        <script type="text/javascript">
            function check() {
                var s1 = document.getElementsByName('s1');
                if(s1 == 'ō') {
                    document.getElementById("as1").innerHTML = 'Correct';
                } else {
                    document.getElementById("as1").innerHTML = 'Incorrect';
                }
                var s2 = document.getElementsByName('s2');
                if(s2 == 's') {
                    document.getElementById("as2").innerHTML = 'Correct';
                } else {
                    document.getElementById("as2").innerHTML = 'Incorrect';
                }
                //(...etc...)
                var p3 = document.getElementsByName('p3');
                if(p3 == 'nt') {
                    document.getElementById("ap3").innerHTML = 'Correct';
                } else {
                    document.getElementById("ap3").innerHTML = 'Incorrect';
                }
            }
        </script>
    </head>
    <body>
        1st sing<input type="text" name="s1"> <div id="as1"><br>
        2nd sing<input type="text" name="s2"> <div id="as2"><br>
        <!-- ...etc... -->
        3rd pl<input type="text" name="p3"> <div id="ap3"><br>
        <button onclick='check()'>Check Answers</button>
    </body>
</html> 
```

每次我检查答案时，它总是说不正确，只显示第一个问题。检查答案后，我还需要一种清除文本字段的方法。其中一个答案有一个宏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:07:43.257

该方法`getElementsByName`返回一个 NodeList，您无法真正将其与字符串进行比较。如果您只有一个具有此类名称的元素，则需要使用以下代码从该列表中获取第一个元素：

```
var s1 = document.getElementsByName('s1')[0].value; 
```

为了使它更加灵活和优雅，并且避免在名称中有拼写错误时出错，首先添加这样的功能：

```
function SetStatus(sName, sCorrect, sPlaceholder) {
    var elements = document.getElementsByName(sName);
    if (elements.length == 1) {
        var placeholder = document.getElementById(sPlaceholder);
        if (placeholder) {
            var value = elements[0].value;
            placeholder.innerHTML = (value === sCorrect) ? "Correct" : "Incorrect";
        } else {
            //uncomment below line to show debug info
            //alert("placeholder " + sPlaceholder+ " does not exist");
        }
    } else {
        //uncomment below line to show debug info
        //alert("element named " + sName + " does not exist or exists more than once");
    }
} 
```

然后您的代码将变为：

```
SetStatus('s1', 'ō', 'as1');
SetStatus('s2', 's', 'as2');
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:08:17.730

`document.getElementsByName('s1')`是一个你应该`document.getElementsByName('s1')[0]`用来获取特定元素的数组（在这种情况下是第一个）

# php - 如何在php中将十六进制转换为字符串或文本

> ID：13346119
> 
> 赞同：2
> 
> 时间：2012-11-12T15:05:46.367
> 
> 标签：php, string, converter

我想将消息加密为字符串（文本）格式，但我不知道可以将十六进制转换为字符串的函数：

这是我的页面：

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>
        <?php

// on commence par définir la fonction Cryptage que l'on utilisera ensuite
        function Cryptage($TEXT, $Clef) {
            $LClef = strlen($Clef);
            $LTEXT = strlen($TEXT);
            if ($LClef < $LTEXT) {
                $Clef = str_pad($Clef, $LTEXT, $Clef, STR_PAD_RIGHT);
            } elseif ($LClef > $LTEXT) {
                $diff = $LClef - $LTEXT;
                $_Clef = substr($Clef, 0, -$diff);
            }
            return bin2hex($TEXT ^ $Clef);
        }

        /* On vérifie l’existence de $_POST['TEXT'] et de $_POST['Clef'].
          Ça revient au même que isset($_POST['TEXT']) AND isset($_POST['Clef']) */
        if (isset($_POST['TEXT'], $_POST['Clef'])) {
            $resultat = Cryptage($_POST['TEXT'], $_POST['Clef']);
        }

// on a fini les traitement en PHP, on passe à l'affichage :

        if (isset($resultat)) {
            echo "Chaîne cryptée/décryptée : " . $resultat;
        }
        ?>

        <!-- on affiche le formulaire pour que l'utilisateur puisse directement refaire un cryptage/décryptage -->
        <form method="post">
            <input type="text" name="TEXT" style="width:500px" value="Cliquez ici pour ajouter un texte." onFocus="javascript:this.value=''" />
            <input type="text" name="Clef" style="width:500px" value="Cliquez ici pour ajouter un masque." onFocus="javascript:this.value=''" />
            <input type="submit" value="Crypter/Décrypter" />
        </form>

    </body>
</html> 
```

我测试了这个函数，但它没有返回任何东西（它返回一个空字符串）

```
 function hextostr($hex)
{
$str='';
for ($i=0; $i < strlen($hex)-1; $i+=2)
{
$str .= chr(hexdec($hex[$i].$hex[$i+1]));
}
return $str;
} 
```

你有什么想法吗，谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:34:14.113

```
 function hex2str($hex) {
    for($i=0;$i<strlen($hex);$i+=2)
       $str .= chr(hexdec(substr($hex,$i,2)));

    return $str;
  } 
```

会成功的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:11:30.317

试试这个功能

```
function hex2str($func_string) {
$func_retVal = '';
$func_length = strlen($func_string);
for($func_index = 0; $func_index < $func_length; ++$func_index) $func_retVal .= chr(hexdec($func_string{$func_index} . $func_string{++$func_index}));

return $func_retVal;
} 
```

我个人经常使用这个，所以它应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-29T01:17:21.427

You can try

`hex2bin()`

That'll convert your hex to a string format.

# animation - 如何为道场仪表设置动画？

> ID：13346121
> 
> 赞同：1
> 
> 时间：2012-11-12T15:05:48.800
> 
> 标签：animation, dojo, gauge

我正在尝试为道场仪表中值变化的持续时间设置动画，但我认为我错过了一些东西，我无法弄清楚它是什么。

到目前为止，我已经让这段代码工作了，但是指示器只是从一个点移动到另一个点，没有任何动画。

```
require(["dojo/ready", "dojo/dom", "dojox/dgauges/components/black/CircularLinearGauge", "dojox/dgauges/GaugeBase"],
function(ready, dom, CircularLinearGauge, GaugeBase) {
    var gauge = new CircularLinearGauge({value:10, animationDuration:5000}, dom.byId("circularGauge"));
    setInterval(function() {
        var randomValue = Math.floor((Math.random() * 100) + 1);
        gauge.set("value", randomValue);
        gauge.refreshRendering();
    }, 10000);
}); 
```

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:47:21.973

看起来它是一个问题`dojox.dgauges.components.DefaultPropertiesMixin`。如果将 _setValueAttr 函数替换为

```
_setValueAttr: function(v) {
     this.getElement("scale").getIndicator("indicator").set("value", v);
} 
```

它应该为您制作动画。

附带说明一下，所有其他函数`DefaultPropertiesMixin`都直接设置每个属性，而不是使用 set 函数。建议将它们更改为使用 set 函数。

# actionscript-3 - 在 AS3 中使用 Excel 文件

> ID：13346124
> 
> 赞同：0
> 
> 时间：2012-11-12T15:06:26.070
> 
> 标签：actionscript-3, excel, xls

我正在尝试将一些数据从 Adob​​e AIR 保存到 Excel 文件中。我正在使用托管在 Google Code 上的 as3xls 库，但它似乎没有保存公式。例如，如果我将一个单元格的值设置为`=SUM(B1:B38)`，它会在我打开保存的文档时将其计算为一个字符串。我很好奇这里的任何导出是否有任何关于如何将公式构建到 Excel 文档中的知识。我对 XLS 或 XLSX 数据格式不太了解。

我熟悉许多其他编程语言，所以如果有人知道一个非常棒的库来做这类事情，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:14:18.763

我没有尝试过，但尝试一下： [as3xls.swc](http://code.google.com/p/as3xls/)

# c++ - 如何获取深度流中选择的 ROI 的 RGB 值

> ID：13346128
> 
> 赞同：1
> 
> 时间：2012-11-12T15:06:33.790
> 
> 标签：c++, kinect

我编写了一个简单的 kinect 应用程序，我在其中访问深度值以检测一些对象。我使用以下代码来获取深度值

```
depth = NuiDepthPixelToDepth(pBufferRun); 
```

这会给我每个像素的深度值。现在我想选择图像的一个区域，并获取这个对应区域的 RGB 相机值。

我不确定的是：

*   我需要打开彩色图像流吗？
*   还是仅将深度转换为颜色就足够了？
*   我该如何使用`NuiImageGetColorPixelCoordinateFrameFromDepthPixelFrameAtResolution`？

我对最简单的解决方案很好，我有一个深度框架和一个颜色框架，这样我就可以使用 opencv 选择一个 ROI，然后相应地裁剪颜色框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:56:25.863

*   我需要打开彩色图像流吗？

是的。您可以在不打开流的情况下获取颜色框架中的坐标，但是您将无法对它们做任何有用的事情，因为您将没有颜色数据可以索引！

*   还是仅将深度转换为颜色就足够了？

没有将距离有意义地转换为颜色。您需要两个图像流和一个坐标转换函数。

*   如何使用 NuiImageGetColorPixelCoordinateFrameFromDepthPixelFrameAtResolution？

这是一个非常有记录的功能。去看看[NuiImageGetColorPixelCoordinatesFromDepthPixelAtResolution](http://msdn.microsoft.com/en-us/library/jj663857.aspx)，因为函数参数和文档实际上是有意义的！深度值和深度 (x,y) 坐标输入，RGB (x,y) 坐标输出。简单的。

要获取某个给定坐标的 RGB 数据，您必须首先获取一个 RGB 帧，`NuiImageStreamGetNextFrame`用于获取`INuiFrameTexture`实例。调用`LockRect`它以获得`NUI_LOCKED_RECT`. 该`pBits`对象的属性是指向原始 XRGB 图像的第一个像素的指针。该图像以从上到下从左到右的顺序逐行存储，每个像素由 4 个连续字节表示，表示一个填充字节，然后是 R、G 和 B。

`(100, 200)`因此，位置处的像素位于

```
lockedRect->pBits[ ((200 * width * 4) + (100 * 4) ]; 
```

并且代表红色通道的字节应该在

```
lockedRect->pBits[ ((200 * width * 4) + (100 * 4) + 1 ]; 
```

这是一种标准的 32 位 RGB 图像格式，缓冲区可以自由地传递给您选择的图像处理库...... GDI、WIC、OpenCV、IPL 等等。

（警告......我不完全确定我的像素字节排序是否正确。我认为它是 XRGB，但它可能是 XBGR 或 BGRX，例如。测试实际返回的应该是微不足道的）

# c - 自制arrayList中的Coredump

> ID：13346134
> 
> 赞同：1
> 
> 时间：2012-11-12T15:06:49.843
> 
> 标签：c, file, coredump

我目前正在做一个家庭作业评估，我正在编写一个程序，用一块 ascii 图像拼接文本文件，以创建所有碎片的完整图像。我打算编写代码的方式是有一个 while 循环，通过目录查找部件并将它们添加到数组中。然而，在我的 AddFile 方法中（或者当我准确地调用它时）我得到了一个 coredump。我刚开始使用 c，所以我不知道你们中的一些人是否很明显为什么我得到一个 coredump 或更复杂。另外，我最初编写了 addFile 方法来使用和接受 int 类型而不是 FILE 类型，那时它在没有任何核心转储的情况下完美地工作，所以我怀疑（但嘿我可能错了）当我尝试用它来实现它时出错了文件类型。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{
int listSize;
int listCapacity;
FILE *fileStream;
}FileList;

void addFile(FileList* list, FILE file)
{
    if((*list).listSize<(*list).listCapacity)
    {

        (*list).fileStream[(*list).listSize]=file;
        (*list).listSize+=1;

    }
    else
    {

        FILE *tempArray = calloc((*list).listSize,sizeof(FILE));
        for(int i=0; i<(*list).listSize; i++)
        {
            tempArray[i]=(*list).fileStream[i];
        }
        //Do something with array...
        free((*list).fileStream);

        (*list).listCapacity=((*list).listCapacity)*2;
        (*list).fileStream=calloc((*list).listCapacity,sizeof(FILE)); 
        for(int i=0; i<(*list).listSize; i++)
        {

            (*list).fileStream[i]=tempArray[i];
        }

        (*list).fileStream[(*list).listSize]=file;
        (*list).listSize+=1;

        free(tempArray);
    }

}
int main()
{
    FileList intList;
    intList.listSize=0;
    intList.listCapacity=1;
    intList.fileStream=calloc(intList.listCapacity,sizeof(int));
    int fileYcoord=0;
    int fileXcoord=0;
    while(1)
    {

        char fileName [100];
        int fileNameLength=sprintf(fileName,"part_%02d-%02d",fileXcoord,fileYcoord);
        FILE * pFile = fopen (fileName,"r");
        if(pFile!=NULL)
        {
            printf("- ! found file: %s - name length : %d \n",fileName,fileNameLength);
            addFile(&intList,*pFile);
            fclose(pFile);
            fileXcoord++;
        }
        else
        {
            if(fileXcoord!=0)
            {
                fileYcoord+=1;
                fileXcoord=0;
            }
            else
            {
                break;
            }

        }
    }
    printf("size %d , %d",fileXcoord, fileYcoord);
    free(intList.fileStream);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:13:40.640

调用`addFile()`是取消引用 a `FILE *`，产生一个类型的值`FILE`。这是错误的，这是一种不透明的类型，应该始终由指针处理。

# sql - Matlab SQL 更新查询

> ID：13346135
> 
> 赞同：1
> 
> 时间：2012-11-12T15:06:49.560
> 
> 标签：sql, database, matlab

所以我有一些数据如下：

var1（时间值1）

```
2       1934
3       3221
4       1314 
```

var2（时间值2）

```
2       836
3       5364
4       2143 
```

我想将它添加到我创建的数据库中的一个新表中，该表包含以下字段：时间、值 1、值 2。

使用 matlab 的 datainsert 函数，我得到以下信息（这不是我想要的）：

```
time    value1    value2
2       1934    
3       3221
4       1314
2                 836
3                 5364
4                 2143 
```

现在我正在尝试使用更新功能，所以我希望得到以下信息：

```
time    value1    value2
2       1934      836
3       3221      5364
4       1314      2143 
```

要将 time 和 value1 放入表中，我执行以下操作：

```
 datainsert(connection,'table',{'time','value1'},var1); 
```

但是我现在应该怎么做才能插入 value2 数据？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:27:50.263

var1 和 var2 的时间值是否相同（例如，相同的值具有相同的顺序）？

在这种情况下，您可以简单地创建具有三个字段的公共数组并将此数组插入数据库：

```
new_var=[var1 var2(:,2)];
datainsert(connection,'table',{'time','value1','value2'},new_var); 
```

如果 var1 和 var2 的时间值顺序不同，您将需要更复杂的操作来创建通用数据集。例如，您可以使用交集：

```
[new_time,i1,i2] = intersect(var1(:,1), var22(:,1));
new_var=[new_time var1(:,2) var2(:,2)]; 
```

# testing - Rails 测试，如何指定发布路径？（没有路线匹配错误）

> ID：13346136
> 
> 赞同：0
> 
> 时间：2012-11-12T15:06:56.607
> 
> 标签：testing, ruby-on-rails-3.2, functional-testing, testcase

我尝试测试我的一个 REST api 控制器，它位于“controllers/api/v1/bookings_controller.rb”。控制器目前仅响应 json，如您在此处看到的：

```
class Api::V1::BookingsController < ApplicationController
  respond_to :json  
  before_filter :authenticate_user!
  before_filter :get_user

  def create
    ...
  end 
end 
```

我的功能测试位于“test/functional/api/v1/bookings_controller_test.rb”，如下所示：

```
require 'test_helper'

class Api::V1::BookingsControllerTest < ActionController::TestCase
include Devise::TestHelpers

  setup do
    @booking = bookings(:one)
    @user = users(:one)
    sign_in @user
  end

  test "should return a bad request" do  
    post :create, :booking => { }, :format  => 'json'
    assert_response :bad_request
  end

end 
```

创建预订的发布路径如下所示（并且可以使用 HTTP 客户端进行测试）：

```
api_v1_user_bookings 
GET /api/v1/users/:user_id/bookings(.:format)  api/v1/bookings#index
POST /api/v1/users/:user_id/bookings(.:format)  api/v1/bookings#create 
```

但是，当我运行测试时，它似乎使用了一些默认路由（请参阅下面的错误消息），我如何在测试中指定正确的路由？还是我在这里看不到的其他错误？

```
test_should_return_a_bad_request(Api::V1::BookingsControllerTest):
ActionController::RoutingError: No route matches {:booking=>{}, :format=>"js
on", :controller=>"api/v1/bookings", :action=>"create"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T10:17:45.017

您的路线需要一个`user_id`参数。将其添加到您的帖子中：

```
post :create, :user_id => @user.id, :booking => {}, :format => :json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:33:40.477

好的，我想我现在想通了。我只需要添加用户ID，否则似乎rails没有选择正确的路线。所以正确的测试方法是这样的：

```
 test "should return a bad request" do  
    post :create, :user_id => @user.id, :booking => { }, :format  => 'json'
    assert_response :bad_request
  end 
```

# hibernate - Hibernate 4.1.x EhCache 不在磁盘上存储任何内容

> ID：13346137
> 
> 赞同：0
> 
> 时间：2012-11-12T15:06:58.760
> 
> 标签：hibernate, caching, spring-mvc, ehcache, nhibernate-caches

我正在使用**Hibernate 4.1.1.Final**和**Spring MVC 3.1.x**并同时使用**第一级和第二级缓存**。我使用注释为缓存操作配置了我的域对象。但是缓存不会在磁盘上存储任何内容。

**这是我的 ehcache.xml 文件：**

```
<?xml version="1.0" encoding="UTF-8"?> 
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">

    <!--
    <diskStore path="java.io.tmpdir"/>
    -->
    <diskStore path="java.io.tmpdir/ehcache"/>
    <defaultCache
        maxElementsInMemory="10000" 
        eternal="false" 
        timeToIdleSeconds="300"
        timeToLiveSeconds="120" 
        overflowToDisk="true"
        maxElementsOnDisk="10000000" 
        diskPersistent="true"
        diskExpiryThreadIntervalSeconds="120" 
        memoryStoreEvictionPolicy="LRU" 
    />
</ehcache> 
```

**休眠缓存属性：**

```
<prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.EhCacheRegionFactory</prop>
<prop key="hibernate.cache.provider_configuration_file_resource_path">ehcache.xml</prop>
<prop key="hibernate.cache.use_query_cache">true</prop>
<prop key="hibernate.cache.use_second_level_cache">true</prop> 
```

**域对象的基于 Annonation 的配置：**

```
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE) 
```

**/tmp 文件夹中**没有名为 **ehcache的文件夹：******

 **![/tmp 文件夹](../Images/98a29e3a2279c15c3997f479b19c9b66.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:20:51.590

仅当 EhCache 在内存中保存了多个对象时，它才会将对象存储到磁盘上`maxElementsInMemory`。你确定这么多对象真的被缓存了，因为只有在这一点之后，EhCache 才会开始在磁盘上存储对象。**

# ocean - 如何获取/设置解释窗口比例

> ID：13346144
> 
> 赞同：0
> 
> 时间：2012-11-12T15:07:10.910
> 
> 标签：ocean

3D/2D 窗口具有 Z 比例属性。交叉口/解释窗口有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:29:22.450

简单回答是不”。在 3D 窗口中 Z-scale 是通过 SoScale 节点实现的，Interpretation/Intersection windows 使用其他引擎。

* * *

更新：解释/交叉窗口无法访问视口的 Z 比例。您可以通过 IntersectionWindow.Bounds 模拟伪变化，但它不会影响视口的 Z 比例。如果您愿意，您可以通过 www.ocean.slb.com（开发者页面）提交官方增强请求。

# java - 如何检查二进制文件是否是从特定来源构建的

> ID：13346150
> 
> 赞同：7
> 
> 时间：2012-11-12T15:07:35.483
> 
> 标签：java, reverse-engineering

我正在处理的遗留项目包括一些二进制 jar 文件形式的外部库。我们决定，为了分析和潜在的修补，我们希望接收这个库的源代码，使用它们来构建新的二进制文件，并在经过足够长的详细回归测试后切换到这些二进制文件。

假设我们已经检索并构建了源（我实际上处于计划阶段）。在实际测试之前，我想执行一些“兼容性检查”以排除源代表与“旧”二进制文件中的内容截然不同的可能性。

使用该`javap`工具，我能够提取用于编译的 JDK 版本（至少我相信它是 JDK 的版本）。它说，二进制文件是使用主要版本 46 和次要版本 0 构建的。根据[这篇文章](http://javapapers.com/core-java/how-to-find-java-the-compiler-target-version-from-a-java-class-file/)，它映射到 JDK 1.2。

假设将使用相同的 JDK 进行源代码编译。

**问题**是：如果这两个二进制文件都是从相同的来源构建的，是否有一种可靠且可能有效的验证方法？我想知道所有方法签名和类定义是否相同，以及大多数或所有方法实现是否相同/相似。

该库非常大，所以我认为对反编译的二进制文件进行详细分析可能不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:30:19.273

我建议一个多阶段的过程：

应用之前建议的 Jardiff 或类似的，看看是否有任何 API 差异。如果可能的话，选择一个可以报告私有方法等选项的工具。在实践中，Java 中的任何实质性实现更改都可能会更改某些方法和类，即使公共 API 未更改。

如果你有一个 API 匹配，用指定的编译器编译几个随机选择的文件，反编译结果和原始类文件，然后比较结果。如果它们匹配，则将相同的过程应用于越来越大的代码体，直到您发现不匹配或检查了所有内容。

与实际的类文件相比，反编译代码的差异更有可能为您提供有关差异性质的线索，并且更容易过滤非显着差异。

如果你得到一个不匹配的，分析它。这可能是由于您不关心的事情。如果是这样，请尝试构建一个脚本来删除这种形式的差异并恢复编译和比较过程。如果您得到广泛的不匹配，请尝试编译器参数，例如优化。如果对编译器参数的调整消除了差异，则继续进行批量比较。此阶段的目标是找到在样本文件上产生匹配的编译器参数和反编译代码过滤器的组合，并将它们应用于库的批量比较。

如果您无法在反编译代码中获得相当接近的匹配，则您可能没有正确的源代码。即便如此，如果您有一个 API 匹配，那么构建您的系统并使用编译结果运行您的测试可能是值得的。如果您的测试至少与您从源代码构建的版本一样好，请继续使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:14:38.570

有各种各样的 JAR 比较工具。曾经相当不错的是[Jardiff](http://mvnrepository.com/artifact/jardiff)。我有一段时间没有使用它，但我确信它仍然可用。在同一空间中还有一些商业产品可以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:24:01.247

Perception 提到的 Jardiff 是一个好的开始，但是理论上没有办法做到 100%。这是因为可以使用不同的编译器以及不同的编译器配置和优化级别来编译相同的源代码。因此，除了类和方法签名之外，没有办法比较二进制代码（字节码）。

方法的“类似实现”是什么意思？让我们假设一个聪明的编译器放弃了一个`else`案例，因为它发现条件可能永远都不为真。两者相似吗？是的，没有.. :-)

**恕我直言，最好的方法是设置非常好的回归测试用例来检查库的每个关键特性。**这可能很可怕，但从长远来看可能比寻找错误更便宜。这一切都取决于你在这个项目中的未来计划。这不是一个简单的决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:52:03.123

对于方法签名，请使用 jardiff 之类的工具。

为了实现的相似性，您必须回退到一个疯狂的猜测。在操作码级别比较字节码可能依赖于编译器并导致大量误报。如果是这种情况，您可以回退到使用**LineNumberTable**比较类的方法。

它为您提供每个方法的行号列表（只要类文件已使用调试标志编译，这在非常旧的或商业库中通常会丢失）。

如果两个类文件是从相同的源代码编译的，那么至少每个方法的行号应该完全匹配。

您可以使用 Apache BCEL 等库来检索 LineNumberTable：

```
 // import org.apache.bcel.classfile.ClassParser;
  JavaClass fooClazz = new ClassParser( "Foo.class" ).parse();
  for( Method m : fooClazz.getMethods() )
  {
     LineNumberTable lnt = m.getLineNumberTable();
     LineNumber[] tab = lnt.getLineNumberTable();
     for( LineNumber ln : tab )
     {
        System.out.println( ln.getLineNumber() );
     }
  } 
```

# google-tv - google tv jquery ui lib页面上的多层区域

> ID：13346155
> 
> 赞同：0
> 
> 时间：2012-11-12T15:07:55.463
> 
> 标签：google-tv

我正在使用 google tv jquery ui 库来构建应用程序。我想在一个 html 文件中构建多页。我遵循示例： http: [//gtv-resources.googlecode.com/svn/trunk/templates/html-01/index.html](http://gtv-resources.googlecode.com/svn/trunk/templates/html-01/index.html)，但它使用 2 个 html 文件在应用程序之间切换。请向我展示在一个 html 文件中管理多页的示例代码，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:52:08.400

如果您想使用单个 html 进行多页网页，您可以使用图层。您应该在此处查看示例 BuildPhotoPages 或 BuildVideoPages：

[https://developers.google.com/tv/web/lib/jquery/](https://developers.google.com/tv/web/lib/jquery/)

谢谢。

# html - 增加手风琴高度

> ID：13346165
> 
> 赞同：1
> 
> 时间：2012-11-12T15:08:32.023
> 
> 标签：html, css, accordion

我想知道在下面的链接中为手风琴示例添加整体高度的最佳方法是什么。

我想让`ul`子菜单类更高，我希望额外的空间显示为没有列表元素的空。

[http://vtimbuc.net/gallery/pure-css3-accordion-menu-tutorial/](http://vtimbuc.net/gallery/pure-css3-accordion-menu-tutorial/)

我认为可以通过在 div 周围添加另一个标签（如 div `ul`），但我想知道 CSS 中是否有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:14:23.770

```
.accordion li:target > .sub-menu {
    min-height: 908px; //add your height here
    background: red; //add a background color what you would like 
    } 
```

我做的

```
 min-height: 908px; 
```

只是一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:11:22.403

您不会增加`ul`子菜单类的大小，而是每个单独的`a`标签。

像这样：

```
.accordion li > a {
  height: 64px; // was 32px;
} 
```

这将使每个`a`标签的高度加倍，进而增加`li`并最终增加标签的高度`ul`

# wix - WiX ManagedBootstrapper SetDownloadSource 混淆

> ID：13346168
> 
> 赞同：1
> 
> 时间：2012-11-12T15:08:44.313
> 
> 标签：wix, wix3.6, burn

我对 Engine.SetDownloadSource() 方法有点困惑。我想要做的是将捆绑包的下载 URL 从外部网站更改为内部网站。（如果有更简单的方法可以做到这一点，我愿意接受其他建议）。

现在解决问题。调用此方法时，它要求输入用户名和密码。我不确定我应该从哪里获得这些信息。

```
string downloadSource = Path.Combine(WebSitePath(), "WebSetup/WebSetupData/", Path.GetFileName(args.DownloadSource));

Engine.SetDownloadSource(args.PackageOrContainerId, args.PayloadId, downloadSource, user, password); 
```

WebSitePath() 只返回网站的基本 URL。如果我不更改链接，我找不到任何关于 MBA 将使用什么用户名和密码的提示，同样我不知道如何告诉它使用当前 Windows 用户从新链接下载。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:09:00.033

用户名和密码是可选的，以支持基本或摘要 HTTP 授权。如果您不想提供用户/密码组合，请将它们设置为 null。

# java - 为什么我不能从 Scala 访问在实现 Java 接口的类中声明的变量？

> ID：13346176
> 
> 赞同：7
> 
> 时间：2012-11-12T15:09:13.207
> 
> 标签：java, scala, interface, scope

在Java中，我有一个实现接口的类：

```
AlertDialog implements DialogInterface 
```

如果在接口内声明了一些变量，我可以访问它们：

```
AlertDialog.BUTTON_POSITIVE 
```

但在 Scala 中，上述行无法编译。好像是隐藏的。有没有办法在 Scala 中访问这些变量而无需创建新对象或做任何其他 hacky？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T15:28:46.977

稍微详细一点：无法访问这些的原因是 George 正在谈论在接口上定义的静态成员。Scala 没有静态成员 - 相反，创建一个`object`，这是一个具有单个实现的常规类。当您从 Java 接口扩展时，Scala 将仅扩展非静态成员，因为静态成员被视为在同伴中`object`。伴随对象的名称与接口相同，因此您可以将其访问为`DialogInterface.BUTTON_POSITIVE`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:09:13.207

在 Scala 中无法从`AlertDialog`类中访问这些变量，但您可以使用接口本身作为对象来访问它们。

所以你可以直接从接口访问变量：

```
DialogInterface.BUTTON_POSITIVE 
```

# git - 在 git-svn 环境中创建内部版本号

> ID：13346182
> 
> 赞同：2
> 
> 时间：2012-11-12T15:09:34.237
> 
> 标签：git, svn, maven, buildnumber-maven-plugin

开发和测试构建是从*`git svn clone`*存储库构建的，而发布构建是从纯`svn`检出构建的。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>buildnumber-maven-plugin</artifactId>
    <version>1.0</version>
    <executions>
        <execution>
            <id>generate-buildnumber</id>
            <phase>validate</phase>
            <goals>
                <goal>create</goal>
            </goals>
            <configuration>
                <useLastCommittedRevision>true</useLastCommittedRevision>
                <buildNumberPropertyName>build.buildNumber</buildNumberPropertyName>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这`scm > developerConnection`是一个`scm:svn`url，似乎`buildnumber-maven-plugin`默认为该 url 中定义的 scm 提供程序。

如果项目是通过 git 克隆的，有没有办法使用 git scm 提供程序？

* * *

似乎可以使用交换 scm 提供程序

```
<providerImplementations>
    <svn>git</svn>
</providerImplementations> 
```

至少 Maven 调用`git rev-parse --verify HEAD` 但它不存储 buildNumber。

# java - struts2&IE 中长 URL 的 request.redirect()

> ID：13346183
> 
> 赞同：1
> 
> 时间：2012-11-12T15:09:44.173
> 
> 标签：java, struts2, forward

我正在使用struts2。我必须将我的系统重定向到一个长度超过 3000 个字符的 URL。由于get方法中的url限制，url长度导致系统在IE中无法正常工作。我曾尝试使用请求调度程序，但我认为我的操作命名空间有问题。

我需要从动作 1 转发到动作 2。

动作 1 动作名称：basket.action 命名空间：“/mike/jordan”

动作 2 动作名称：soccer.action（有很多参数）命名空间：“/david/beckham”

到目前为止我所拥有的是

```
RequestDispatcher reqDispatcher = getRequest().getRequestDispatcher("/david/beckham/soccer.action");
reqDispatcher.forward(getRequest(), getResponse()); 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:17:08.507

[Struts2 重定向到另一个动作](http://struts.apache.org/2.3.4/docs/redirect-action-result.html)

```
 <action name="login" class="...">
        <!-- Redirect to another namespace -->
        <result type="redirectAction">
        <param name="actionName">dashboard</param>
        <param name="namespace">/secure</param>
        <param name="param1">${param1}</param>
        <param name="param2">${param2}</param>
        </result>
  </action> 
```

# ios - 多点触摸时禁用 UIScrollView 中的滚动

> ID：13346187
> 
> 赞同：0
> 
> 时间：2012-11-12T15:09:51.023
> 
> 标签：ios, uiscrollview, multi-touch

在我的程序中，我用两根手指捏合（放大和缩小），所以有时当我想捏合时，应用程序会滚动。我不想让 UIScrollView 在屏幕上有两个或多个触摸时滚动。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:18:03.267

尝试使用`UIGestureRecognizer`. 在您的情况下，您必须使用`UITapGestureRecognizer`, 用 2 个手指和一个水龙头。在表格视图上附加手势。

# extjs - Extjs 将网格面板添加到手风琴内容

> ID：13346189
> 
> 赞同：2
> 
> 时间：2012-11-12T15:09:56.233
> 
> 标签：extjs, grid, extjs4, accordion

我实际上不确定这是否可能，但无论如何我都会问。我有一组手风琴控件，在每个控件的内容主体中，我需要显示一个网格面板。网格面板需要附加一个点击事件。我尝试简单地创建网格面板并将手风琴的 html 属性设置为它，但这不会产生任何内容。

有什么办法可以实现上述目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:17:51.893

您不能将 html 内容（由属性插入）与任何其他内容一起。如果您添加任何[项目](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-cfg-items)，则不会设置/覆盖[html属性值。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-html)但可以肯定的是，您可以将任何您想要的东西放入一个手风琴面板中。甚至是网格。但是对于这种情况，基于[最后一个问题](https://stackoverflow.com/questions/13342593)，我建议您将视图引用到网格中。您可以简单地通过使用[ComponentQuery来做到这一点](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)

可以使用控制器的[控制](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)功能来应用点击事件。

**为了您的基本理解：**

*在 ExtJS 中你很少使用纯 html 代码。在大多数情况下，您使用任何类型的组件。所有都嵌套在 items-array 或 dockedItem-array 中。这些数组中的项目也由布局系统处理。*

**一些适用于控制功能的查询示例**

以下`this`是指控制器本身。

您知道网格的 ID（通常您没有这样做）。Id 由开始标记`#`

```
control({'#yourId': {itemclick: this.onItemclick }}); 
```

您知道 xtype 并且这种类型只有一个实例。您还可以通过在 xtype 之间使用空格来描述路径。

```
control({'grid': {itemclick: this.onItemclick }}); 
```

您已将自定义属性设置为网格（您可以通过这种方式引用任何属性）。这个完全兼容上面那个。**我在你的情况下推荐这个**

```
control({'grid[customIdent=accordionGrid]': {itemclick: this.onItemclick }}); 
```

这只是使用 ComponentQueries 的一些方法，还有更多。有关更详细的说明，您应该参考 sencha API for [ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)

另请注意，每个组件都实现了也支持 ComponentQueries的**[up()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-method-up)**和**[down()方法。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.AbstractContainer-method-down)**

**我忘了提一下：**对于一个控件，查询严格只需要返回一个结果（只会采用第一个），另一方面，一个 ComponentQuery 可以返回多个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:17:26.807

这是完全可能的，但手风琴的主体不是放置它的地方。您需要将它添加到手风琴的`items: []`数组中。正文（或 html）只接受 html。例子：

[http://docs.sencha.com/ext-js/4-1/#!/example/layout/accordion.html](http://docs.sencha.com/ext-js/4-1/#!/example/layout/accordion.html)

这个里面有一个网格。

# java - Freemarker 模板引擎和 Maven

> ID：13346190
> 
> 赞同：0
> 
> 时间：2012-11-12T15:09:59.807
> 
> 标签：java, maven, war, freemarker

我在我的一个项目中使用[Freemarker](http://freemarker.sourceforge.net/)。使用 Freemarker 设置项目按预期工作，但现在我在 Maven 项目中使用此库时遇到问题。似乎找不到模板（我将它们放在几乎每个文件夹中）。模板路径在web.xml中配置：

```
...
<init-param>
   <param-name>TemplatePath</param-name>
   <param-value>/</param-value>
</init-param>
... 
```

我通过 mvn jetty:run 启动 Maven 模块。

我应该把模板文件放在哪里？如何配置 Maven 以将这些文件包含到 WAR 中？

[我的pom文件](http://pastie.org/5365967)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:13:47.760

我希望看到他们`src/main/resources/WEB-INF`

另请参阅[这篇](http://youhenghu.blogspot.com/2012/02/maven-substitution-and-freemarker.html)关于 Maven/Freemarker 交互的有趣博文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:31:44.837

最后，我找到了解决方案：

模板文件必须放在 WEB-INF 文件夹中。

网页.xml：

```
...
<init-param>
   <param-name>TemplatePath</param-name>
   <param-value>/</param-value>
</init-param>
... 
```

# xml - XSLT 从以下类型的 XML 结构中删除除某些节点外的所有节点

> ID：13346191
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:09:58.510
> 
> 标签：xml, xslt

```
<Rootnode>
    <Properties Attribute ="xxx">
        <Type>1</Type>
        <Size>10</Size>
    </Properties>
    <Other>
        <blah>h</blah>
    </Other>
    <Other2>
        <blah>h</blah>
    </Other2>
    <Properties Attribute ="xxx">
        <xType>5</xType>
        <xSize>10</xSize>
    </Properties>
    <Items>
       <Item4>8</Item4>
    </Items>
    <Items>
       <Item6>8</Item6>
    </Items>
    <Properties Attribute ="xxx">
        <zType>1</zType>
        <zSize>10</zSize>
    </Properties>
    <Items place="UK">
       <Item1>8</Item1>
    </Items>
 </Rootnode> 
```

现在我想要的是只包括属性和项目。如果属性的名称和值相同，最好将属性和项目组连接在一起，并根据属性对属性和项目进行排序，并按字母顺序对两者的子节点进行排序。到目前为止，我已经达到了一个空白；（

所需的输出与 ABach 显示的差不多。虽然我忘记提到的一件事是每个属性或项目上可能还有其他属性，并且我知道我希望排序的属性的名称。我可以很容易地修改。

即，所需的输出

```
<?xml version="1.0"?>
<Rootnode>
  <Properties Attribute="xxx">
    <Size>10</Size>
    <Type>1</Type>
    <xSize>10</xSize>
    <xType>5</xType>
    <zSize>10</zSize>
    <zType>1</zType>
  </Properties>
  <Items>
    <Item4>8</Item4>
    <Item6>8</Item6>
  </Items>
  <Items place="UK">
    <Item1>8</Item1>
  </Items>
</Rootnode> 
```

并为到目前为止我的努力而道歉......我最终陷入了一个正确的混乱并且认为这不会有太大帮助......我对这些东西很陌生:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:29:41.030

正如@LarsH 已经指出的那样，由于没有向我们展示预期的输出 XML，我们只能猜测您真正想要什么。也就是说，这是我对 XSLT 1.0 解决方案的尝试。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:key
    name="PropertiesByAttributeNameVal"
    match="Properties"
    use="concat(name(@*[1]), '+', @*[1])" />

  <xsl:key
    name="ItemsByAttributeNameVal" 
    match="Items"
    use="concat(name(@*[1]), '+', @*[1])" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Rootnode">
    <Rootnode>
      <xsl:apply-templates 
        select="Properties[
          generate-id() = 
          generate-id(key(
            'PropertiesByAttributeNameVal',
             concat(name(@*[1]), '+', @*[1]))[1])]">
        <xsl:with-param name="pKeyName"
          select="'PropertiesByAttributeNameVal'" />
        <xsl:sort select="concat(name(@*[1]), '+', @*[1])" />
      </xsl:apply-templates>
      <xsl:apply-templates
        select="Items[
          generate-id() = 
          generate-id(key(
            'ItemsByAttributeNameVal',
            concat(name(@*[1]), '+', @*[1]))[1])]">
        <xsl:with-param name="pKeyName"
          select="'ItemsByAttributeNameVal'" />
        <xsl:sort select="concat(name(@*[1]), '+', @*[1])" />
      </xsl:apply-templates>
    </Rootnode>
  </xsl:template>

  <xsl:template match="Properties|Items">
    <xsl:param name="pKeyName" />
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:apply-templates
        select="key($pKeyName, concat(name(@*[1]), '+', @*[1]))/*">
        <xsl:sort select="name()" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

**...针对提供的 XML 运行：**

```
<Rootnode>
  <Properties Attribute="xxx">
    <Type>1</Type>
    <Size>10</Size>
  </Properties>
  <Other>
    <blah>h</blah>
  </Other>
  <Other2>
    <blah>h</blah>
  </Other2>
  <Properties Attribute="xxx">
    <xType>5</xType>
    <xSize>10</xSize>
  </Properties>
  <Items>
    <Item4>8</Item4>
  </Items>
  <Items>
    <Item6>8</Item6>
  </Items>
  <Properties Attribute="xxx">
    <zType>1</zType>
    <zSize>10</zSize>
  </Properties>
  <Items place="UK">
    <Item1>8</Item1>
  </Items>
</Rootnode> 
```

**...我猜是生成了正确的输出 XML：**

```
<?xml version="1.0"?>
<Rootnode>
  <Properties Attribute="xxx">
    <Size>10</Size>
    <Type>1</Type>
    <xSize>10</xSize>
    <xType>5</xType>
    <zSize>10</zSize>
    <zType>1</zType>
  </Properties>
  <Items>
    <Item4>8</Item4>
    <Item6>8</Item6>
  </Items>
  <Items place="UK">
    <Item1>8</Item1>
  </Items>
</Rootnode> 
```

**请注意，如果针对稍微修改的 XML 文档（具有更多分组等）运行相同的 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<Rootnode>
  <Properties Attribute="xxx">
    <Type>1</Type>
    <Size>10</Size>
  </Properties>
  <Other>
    <blah>h</blah>
  </Other>
  <Other2>
    <blah>h</blah>
  </Other2>
  <Properties Attribute="yyy">
    <xType>5</xType>
    <xSize>10</xSize>
  </Properties>
  <Items>
    <Item4>8</Item4>
  </Items>
  <Items place="US">
    <Item9>8</Item9>
  </Items>
  <Items>
    <Item1>8</Item1>
  </Items>
  <Properties Attribute2="xxx">
    <zType>1</zType>
    <zSize>10</zSize>
  </Properties>
  <Properties Attribute="xxx">
    <elephantType>5</elephantType>
    <elephantSize>15</elephantSize>
  </Properties>
  <Items place="UK">
    <Item1>8</Item1>
  </Items>
</Rootnode> 
```

**...再次，我认为正确的答案是：**

```
<?xml version="1.0"?>
<Rootnode>
  <Properties Attribute="xxx">
    <Size>10</Size>
    <Type>1</Type>
    <elephantSize>15</elephantSize>
    <elephantType>5</elephantType>
  </Properties>
  <Properties Attribute="yyy">
    <xSize>10</xSize>
    <xType>5</xType>
  </Properties>
  <Properties Attribute2="xxx">
    <zSize>10</zSize>
    <zType>1</zType>
  </Properties>
  <Items>
    <Item1>8</Item1>
    <Item4>8</Item4>
  </Items>
  <Items place="UK">
    <Item1>8</Item1>
  </Items>
  <Items place="US">
    <Item9>8</Item9>
  </Items>
</Rootnode> 
```

**假设：**

*   我假设每个`<Properties>`and`<Items>`元素只有一个属性，它应该是分组确定器。
*   如果以上不正确，至少，我假设该元素的第一个属性应该是分组确定器。

**解释：**

1.  因为这是一个 XSLT 1.0 解决方案，[`Muenchian Grouping`](http://www.jenitennison.com/xslt/grouping/muenchian.html)所以在唯一选择器下对节点和属性进行分组时的顺序；因此，我们定义了两个键：一个用于`<Properties>`元素，一个用于`<Items>`元素。

2.  第一个模板是[`Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html)- 它的工作是将源文档中的所有节点和属性按原样输出到结果文档。

3.  第二个模板匹配`<Rootnode>`元素。指示仅将模板应用于最先出现在其各自键中的那些`<Properties>`和元素；`<Items>`这具有仅处理唯一元素的预期效果（基于它们的第一个属性的名称和值）。

    指定元素时`<xsl:apply-templates>`，请注意，在这两种情况下，都指示按照相同的属性名称/值对对结果进行排序。

    请注意，每个`<xsl:apply-templates>`元素都有一个参数（通过`<xsl:with-param>`）。正如您将看到的，处理`<Properties>`和`<Items>`元素的代码几乎相同。唯一的区别是我们从中获取结果的关键。因此，我选择将该逻辑整合到第三个模板中，并通过此参数考虑可变性。

4.  第三个模板同时匹配`<Properties>`和`<Items>`元素。对于每一个，原始节点都被复制（就像它的属性一样）。最后，将模板应用于该元素的所有子元素（进行适当的排序[这一次，基于子元素本身的名称]）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:22:50.247

如果您已经拥有了一些东西而不是一无所有，那么您将更有可能获得帮助。首先，创建一个模板来匹配 Properties 和 Items ( `match="Properties | Items"`)，其内容只是复制匹配的元素：`<xsl:copy-of select="." />`。

这会给你一些工作代码来展示。

我建议的下一步是发布所需输出的示例，以及 XSLT 代码给出的实际输出。

这将为人们在回答您的问题时提供一个更小的差距。

# linux - 准备使用基于 ubuntu 的虚拟机

> ID：13346195
> 
> 赞同：-2
> 
> 时间：2012-11-12T15:10:30.693
> 
> 标签：linux, ubuntu, virtual-machine

有没有预装的基于虚拟机的 ununtu linux 盒子可以直接下载和使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:20:01.697

[virtualboxes.org](http://virtualboxes.org/images/ubuntu/)

我在紧要关头使用它们，从来没有遇到过问题。它们非常基本，但它们是一个好的开始。我个人只是从 ISO 进行安装，除非我真的很着急。它很快，我确切地知道我会得到什么。

# c++ - 基类构造函数错误

> ID：13346197
> 
> 赞同：0
> 
> 时间：2012-11-12T15:10:44.030
> 
> 标签：c++, compiler-errors, derived-class, base-class

> **可能重复：**
> [构造函数中这个奇怪的冒号成员语法是什么？](https://stackoverflow.com/questions/1711990/what-is-this-weird-colon-member-syntax-in-the-constructor)

我有以下基类和派生类；

```
class P {
 int n;
 public:
  P( int id );
  virtual  int getn();
  virtual  int toss( int x ) = 0; 
};

class RNP : public P {
  int n;
 public:
    RNP(  int id);
    int toss( int x );
}; 
```

我已经为 RNP 创建了一个构造函数，但是当我编译时出现错误

```
player.cc:9:11: error: constructor for 'RNP' must explicitly initialize the base class 'P' which does not have a default constructor 
```

我究竟如何在派生类中初始化基类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:13:04.790

只需调用它的构造函数。它可以在初始化列表中完成，您可以在其中定义`RNP::RNP`：

```
RNP::RNP( int id )
:
    P( id )
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:12:55.943

通常您需要在派生类构造函数中使用“::”运算符来执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:14:26.377

使用***:***在派生类的构造函数参数之后

```
RNP::RNP(  int id): P (id)
{
//do your stuff
} 
```

# boolean - SPARQL 中的布尔检查，检查语句是否存在

> ID：13346198
> 
> 赞同：6
> 
> 时间：2012-11-12T15:10:44.827
> 
> 标签：boolean, rdf, sparql, semantic-web

假设我有一个充满视频元数据的三重存储。视频可以有任意选择的预定义标签，如下所示：

```
v1 ex:hasTag A.
v2 ex:hasTag B.
v3 ex:hasTag A;
   ex:hasTag B. 
```

所以为了这个例子，只有两个预定义的标签`A`和`B`.

现在我想在这样的（或类似的）矩阵中大致了解哪个视频附加了哪些标签：

```
 A     B 

v1  true  false
v2  false true
v3  true  true 
```

但是，我不知道如何实现这一点。首先，我需要一个布尔测试，例如类似的东西`isTrue(?video ex:hasTag A)`或看起来像的东西。即使那样，我也不知道该放在哪里。如果我将前面的语句放在 WHERE 子句中，查询结果`A`当然只包含带有标签的视频。

来自 SQL，我可以想象我需要以某种方式使用子查询，[但目前这些似乎还没有标准化](http://www.w3.org/TR/sparql-features/#Subqueries "SPARQL 新特性和基本原理：子查询")。我也看到了[`FILTER`](http://www.w3.org/TR/rdf-sparql-query/#scopeFilters "SPARQL：过滤器")关键字，但我觉得这不是我想要的。

我目前不知所措，但总是愿意学习。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:35:53.410

子查询在 SPARQL 1.1 中，现在已冻结。已经有几个完整的实现。

除了嵌套的 SELECT 子查询，SPARQL 1.1 还具有用于测试模式是否匹配的 EXISTS 和 NOT EXISTS 函数。它#是子查询的一种形式。您可以在 FILTER 中使用它，或者如果您真的想返回 true/false：

```
BIND(EXISTS{?video ex:hasTag "A"} AS ?a) 
```

甚至：

```
SELECT ?video (EXISTS{?video ex:hasTag "A"} AS ?a) (EXISTS{?video ex:hasTag "B"} AS ?b)
{           
  ?video a ex:Video .
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T15:44:36.000

尝试从这样的事情开始：

```
SELECT ?video ?tagA ?tagB {
  ?video a ex:Video .
  OPTIONAL { ?video ex:hasTag ?tagA . FILTER (?tagA = "A") }
  OPTIONAL { ?video ex:hasTab ?tagB . FILTER (?tagB = "B") }
} 
```

这将是你大致想要的。如果您确实必须具有布尔值而不是简单地检查未绑定的 val，请使用：

```
SELECT ?video (bound(?tagA) as ?a) (bound(?tagB) as ?b) { ... } 
```

PS 子查询（非常接近，在撰写本文时提出的建议）[在 SPARQL 1.1 中标准化](http://www.w3.org/TR/sparql11-query/#subqueries)。

# entity-framework - 了解 EF Code-First 急切加载

> ID：13346199
> 
> 赞同：1
> 
> 时间：2012-11-12T15:10:44.963
> 
> 标签：entity-framework, ef-code-first, lazy-loading, eager-loading

自从 EF 4.1 上线以来，我一直在使用 EF CodeFirst，那是一年多以前的事了，现在使用它感觉很舒服。我习惯于自定义实体验证器，重写 .SaveChanges() 来修改它的一些行为以及一些重要的概念，比如映射到非表数据库对象。但是 EF 的这一部分对我来说仍然是多云的：`context.Configuration.LazyLoadingEnabled = false;`。

我了解基础知识，一旦调用 linq 查询，它们就会被扔到数据库中，如果我没有明确指定它，将不会加载依赖集合，yadda yadda yadda。我想了解的是：

*   在什么情况下我应该禁用延迟加载？为什么？
*   禁用它的实际好处和/或缺点是什么？
*   欢迎任何额外的澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:12:52.750

EF v1 不支持延迟加载。当在第二轮中添加延迟加载（它是 EF4）时，将使用 EF v1 编写的应用程序移植到 EF4 时可能会导致问题，因为以前没有发生过的情况会突然向数据库发送更多查询。因此，使 EF v1 在 EF4 上运行的最简单方法是禁用延迟加载。

另一个有趣的事情是看看延迟加载是如何实现的——EF 会动态地创建一个从你的实体类型派生的类型，并且会添加一些代码来处理延迟加载。这意味着 EF 实际上并没有使用您的类型，而是使用从您的类型派生的类型。这通常没问题，但有时可能会导致问题。

最后，有时您可能想要控制查询实际发送到数据库的时间（例如，由于使用 Sql Azure 时的延迟，发送一个返回较大结果的查询而不是许多返回较小结果的查询通常更好/更快）。通过延迟加载，人们经常没有意识到他们在不必要或无效时对数据库进行了重创。这里要注意的一件事是，您可以混合使用这两个世界 - .Include() 将强制加载相关实体，而不管延迟加载设置如何。

您可以在此处阅读有关此内容的更多信息： http: [//thedatafarm.com/blog/data-access/a-look-at-lazy-loading-in-ef4/](http://thedatafarm.com/blog/data-access/a-look-at-lazy-loading-in-ef4/)和此处：http: [//msdn.microsoft.com/en -我们/杂志/hh205756.aspx](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)

# haskell - 类型安全的差异列表

> ID：13346200
> 
> 赞同：25
> 
> 时间：2012-11-12T15:10:54.863
> 
> 标签：haskell, types

Haskell 中的一个常见习惯用法，即差异列表，是将列表表示`xs`为 value `(xs ++)`。然后`(.)`变成“ `(++)`”并`id`变成“ `[]`”（实际上这适用于任何幺半群或类别）。由于我们可以在恒定时间内组合函数，这为我们提供了一种通过附加来有效地构建列表的好方法。

不幸的是，该类型`[a] -> [a]`比表单的函数类型大得多`(xs ++)`——列表上的大多数函数都做一些事情，而不是在它们的参数前添加。

解决此问题的一种方法（如 中使用的）是使用智能构造函数`dlist`创建特殊类型。`DList`另一种方法（如 中使用的`ShowS`）是不在任何地方强制执行约束并希望获得最好的结果。但是，在使用大小正好合适的类型的同时，有没有一种很好的方法可以保留差异列表的所有所需属性？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-12T15:52:30.630

是的！

我们可以将`[a]`其视为一个免费的 monad 实例`Free ((,) a) ()`。

因此，我们可以应用 Edward Kmett 在[Free Monads for Less](http://comonad.com/reader/2011/free-monads-for-less-2/)中描述的方案。

我们会得到的类型是

```
newtype F a = F { runF :: forall r. (() -> r) -> ((a, r) -> r) -> r } 
```

或者干脆

```
newtype F a = F { runF :: forall r. r -> (a -> r -> r) -> r } 
```

我们列表`runF`的函数就是这样！`foldr`

这被称为[Boehm-Berarducci 编码](http://okmij.org/ftp/tagless-final/course/Boehm-Berarducci.html)，它与原始数据类型（列表）同构——所以它尽可能小。

* * *

威尔内斯 说：

> 所以这种类型仍然太“宽”，它允许的不仅仅是前缀 - 不限制 g 函数参数。

如果我正确理解了他的论点，他指出您可以将`foldr`(or `runF`) 函数应用于与 and 不同的`[]`东西`(:)`。

但我从未声称您只能将`foldr`-encoding 用于连接。事实上，正如这个名字所暗示的，你可以用它来计算*任何*折叠——这就是 Will Ness 所展示的。

如果您暂时忘记了有一个真正的列表类型，可能会变得更清楚，`[a]`. 可能有很多列表类型——例如我可以定义一个

```
data List a = Nil | Cons a (List a) 
```

它与 不同，但同构`[a]`。

上面的`foldr`-encoding 只是列表的另一种编码，例如`List a`or `[a]`。它也与 同构`[a]`，正如函数所证明的那样`\l -> F (\a f -> foldr a f l)`，`\x -> runF [] (:)`并且它们的组合（以任一顺序）是同一性的事实。但是您没有义务转换为`[a]`- 您可以`List`直接转换为，使用`\x -> runF x Nil Cons`.

重要的一点是它`F a`不包含不是`foldr`某个列表的函数的元素 - 也不包含一个元素是`foldr`多个列表的函数（显然）。

因此，它不会包含太少或太多的元素——它包含的元素数量恰好与准确表示所有列表所需的一样多。

差异列表编码并非如此——例如，该`reverse`函数不是任何列表的追加操作。

# javascript - window.click 在 iPad 版 Safari 上不触发

> ID：13346202
> 
> 赞同：4
> 
> 时间：2012-11-12T15:11:07.057
> 
> 标签：javascript, jquery, ipad, safari, touch

此代码在桌面浏览器中运行良好：

```
$(window).click(function() {...}); 
```

但在 iPad 上的 Safari 中，它根本不会触发。这不支持吗？当有人触摸浏览器窗口中的某个位置时收到通知的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:19:07.517

JQuery UI 支持`touch`设备。. 您可以在同一组事件上绑定单击和触摸侦听器。

```
$(window).bind("click touchstart", function(){...}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T15:24:05.550

像这样试试

```
var clickOrTap = ( typeof document.body.ontouchend === "undefined" ) ? 'click' : 'touchend';
$( "body" ).on( clickOrTap, function() { ... } ); 
```

它检查设备是否有`touchend`事件，如果没有，则表示您在桌面上，因此侦听器将等待`click`. 如果它已定义，那么您就在触摸设备上，您可以监听触摸事件。

# c# - 第一次初始化和显示视图和视图模型时如何防止验证？

> ID：13346203
> 
> 赞同：1
> 
> 时间：2012-11-12T15:11:11.883
> 
> 标签：c#, wpf, prism

我将 Prism+MVVM+C#+WPF 用于 LoB 应用程序。我创建了一个 ViewModelBase 类，它被我所有的 viewModel 继承。这个基类实现：

*   IViewModel（我的基本接口之一）
*   IDataErrorInfo（为了允许 ViewModel 验证）

它遵循我的 IDataErrorInfo 实现：

```
#region IDataErrorInfo members

    public string this[string propertyName]
    {
        get { return this.Validate(propertyName); }
    }

    public string Error { get; private set; }

    #endregion

    protected string Validate(string propertyName)
    {
        this.Error = null;

        PropertyInfo property = this.GetType().GetProperty(propertyName);
        if (property == null)
            throw new ArgumentException("propertyName");

        foreach (ValidationAttribute attribute in property.GetCustomAttributes(typeof(ValidationAttribute), true))
        {
            try
            {
                object currentValue = property.GetValue(this, null);
                attribute.Validate(currentValue, propertyName);
            }
            catch (ValidationException ex)
            {
                string errorMessage = (!string.IsNullOrWhiteSpace(attribute.ErrorMessage) ? attribute.ErrorMessage: ex.Message);

                if (this.Error == null)
                    this.Error = errorMessage;
                else
                    this.Error += string.Format("\r\n{0}", errorMessage);
            }
        }

        return this.Error;
    } 
```

在应用程序的给定点，我以这种方式构建和关联 View 和 ViewModel：

```
IViewModel viewModel = this.ServiceLocator.GetInstance(typeof(IMyViewModel)) as IMyViewModel;
IView view = this.ServiceLocator.GetInstance(type) as IMyView;

view.ViewModel = viewModel;
this.GlobalRegionManager.Regions[RegionNames.InnerRegion].Add(view); 
```

当视图开始读取 viewModel 属性时，就会出现问题。调用“this[string propertyName]”并执行验证函数...

在视图中，需要验证的属性的绑定定义为：

```
Text="{Binding SourceFileName, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}" 
```

您能否就如何防止初始验证提出建议？

提前致谢， 詹卢卡

# c# - 网络客户端-服务器应用建议

> ID：13346216
> 
> 赞同：6
> 
> 时间：2012-11-12T15:11:56.417
> 
> 标签：c#, networking, tcp

我正在尝试设计一个应用程序，允许两个用户通过网络播放囚犯的

困境游戏（[http://en.wikipedia.org/wiki/Prisoner%27s_dilemma](http://en.wikipedia.org/wiki/Prisoner%27s_dilemma)）。

基本上，这涉及：

*   比赛开始（第一轮）。
*   玩家 1 选择合作或背叛。
*   玩家 2 选择合作或背叛。
*   然后显示彼此的决定
*   第二轮开始
*   等等。

我做了一些思考和搜索，我认为应用程序应该包含以下内容：

*   接受传入 tcp/ip 连接的服务器类
*   Gui 客户端（单独的程序）
*   对于每个连接（最多 2 个），服务器将创建一个新的 ConnectedClient 类。此类将包含两个玩家的机器/身份的详细信息。
*   Server 类和 ConnectedClient 类将连接/订阅每个事件，以便它们可以在例如服务器指令准备好传输给玩家或玩家已经将他们的输入传输到服务器时相互提醒。

我不确定最好的方法是使用单线程来完成工作，还是使用多线程。单线程显然会更容易，但我不确定这种情况是否可能 - 在需要 TCP/IP 连接之前我从未创建过应用程序，而且我不确定你是否可以监听两个传入连接一根线。

我在网上找到了以下指南，但似乎它在两个线程上打开了两个客户端，并且它们直接相互通信 - 绕过服务器（我需要控制游戏逻辑）：[http://www。 codeproject.com/Articles/429144/Simple-Instant-Messenger-with-SSL-Encryption-in-Cs](http://www.codeproject.com/Articles/429144/Simple-Instant-Messenger-with-SSL-Encryption-in-Cs)

我非常感兴趣，如果您有任何关于如何实施应用程序（主要是服务器类）的建议，我将不胜感激。

我希望我已经清楚地解释了我的意图。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T17:54:53.457

我的第一个建议是在这里忘记 TCP/IP 和套接字。您绝对可以使用该技术堆栈来做到这一点，但是实现您想要的所有东西也会让您非常头疼。原因是此类任务的技术水平太低。我只会出于学术兴趣，或者如果我需要对通信进行巨大控制，或者如果我有非常高的性能要求，我会使用 tcp/ip 和套接字。

所以，我的第二个建议是看看 WCF 技术。如果您以前没有使用过它，请不要害怕。这并不难。如果您准备好为您的应用程序使用套接字，那么您绝对可以处理 WCF。对于您的任务，您可以使用任何 WCF 教程在 1-2 小时内从头开始创建基本通信。

因此，我将创建一个服务器 WCF 服务，该服务将具有一些包含您的业务逻辑的 API 函数。它可以托管在 Windows 服务、IIS 甚至控制台应用程序中。您的客户将使用该 WCF 服务，调用他们的函数，就像它是您项目中另一个本地类的函数一样。WCF 还可以帮助您执行您想要的事件（虽然它是一个更高级的主题）。你甚至可以忘记这里的线程，大多数事情都会开箱即用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-21T16:04:31.483

首先，正如其他人所说，尽可能多地分离你的游戏逻辑，这样基本的功能就不会过多地依赖于你的通信基础设施。

对于通信，WCF 可以处理任务。您可以让您的客户端向 IIS 中托管的服务发送请求，进行某种识别/身份验证，并打开一个双工通道，您的服务可以从该通道推送结果并传达新一轮的开始。

一旦一个客户端连接，它就会等待另一个客户端。当它发生时，它使用双工通道回调通知第一个客户端并等待它的选择。然后它询问第二个用户，等待它的响应。当它到来时，它会将结果通知给双方并重新开始游戏。

在实现中更深入一点：

您将获得具有一些操作的服务（如注册、推送决策，如果需要，还可以进行更多操作）。您还将定义一个回调接口，其中包含您的服务需要推送到客户端的操作（NotifyResult、RequestDecision，这些都是示例）。然后，您为映射到您的服务操作的客户端创建代理，并以公开事件并在服务推送消息时引发它们的方式实现回调操作。

一个用例：

客户端 A 创建代理，调用服务器上的注册。服务器接收调用，注册客户端并将回调对象保存在一个状态中。将建立双工连接。这意味着什么？这意味着（如果您使用 PollingDuplexBinding，您可能会这样做）从现在开始，客户端 A 中的代理对象将对服务器进行长轮询请求，检查是否有回调消息。如果没有，那么它会再次进行长轮询。如果有，它会调用代理中的回调方法，传递服务器已推送的数据。代理中的回调方法通常会引发事件或执行委托，由您选择。

客户端 B 连接（调用 Register），执行与 A 相同的操作，服务器注意到两个客户端已连接，通过其保存的回调请求对 A 的响应。这可能发生在 B 的 Register 调用的处理过程中，或者它可以被触发以在 B 的 register 调用中的新线程中执行（或者更好的是，在[ThreadPool](http://msdn.microsoft.com/en-us/library/3dasc8as%28v=vs.100%29.aspx)中运行或启动新的[Task](http://www.codeproject.com/Articles/189374/The-Basics-of-Task-Parallelism-via-C)）。

客户端 A 将收到请求其选择的服务器回调。然后它可以通知用户并通过 UI 获得选择。对服务器进行新调用（例如，PushDecision）。服务器收到客户端 A 的选择，以同样的方式询问 B。一旦它有两个响应，它就会计算结果并将结果推送给客户端。

将双工通道与 PollingDuplex 与 WPF 一起使用的一个优点是，由于它使用长轮询，因此无需使用 80 以外的其他端口。

这绝不是最终的实现，只是给你一些想法的小指南，而不是给你一些模糊的建议。当然，使用 WCF 可能还有很多其他方法可以做到这一点。

我们可以首先假设应用程序每次只能处理两个用户，然后，如果您愿意，您可以扩大规模，使您的服务保持某种形式的状态，并使用锁定访问的映射表，作为另一个示例。

关于 WCF 的一些想法： 使用 Visual Studio 工具 (svcutil) 开始使用 WCF 开发是一种简单的方法，但我不喜欢这种方法。您没有很好地“了解” WCF 基础结构，您会被它用来生成代理的冗长魔法所束缚，并且您会失去灵活性，尤其是在特殊情况下，例如您可能想要使用的双工轮询。

另一种方法，即手动创建服务和代理，并不难，一旦你意识到你可以用它做什么，它就会变得非常有趣。与此相关，我可以给你一个建议：尽你所能让你的代理操作使用基于任务的异步模式（你可以在[这里](http://www.codeproject.com/Articles/126609/The-Asynchronous-Programming-Models-C-5-0-Series)看到实现代理操作的不同方法）。[当与新的 C# async/await](http://www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern)关键字结合使用时，这将使您的代码更加简洁明了，并且您的 UI 将很容易实现。

我可以推荐一些链接来帮助您入门。其中一些是旧的，但非常具有教育意义。

*   [此链接](http://www.netfxharmonics.com/2008/11/understanding-wcf-services-in-silverlight-2)中曾经有一篇很棒的 WCF 文章，但现在似乎已离线。幸运的是，我在[此链接](http://www.4shared.com/get/GeZaqhvO/understanding_wcf_services_in_.html)的文件中找到了可用的内容。
*   [这](http://msdn.microsoft.com/en-us/library/bb332338.aspx)涵盖了您的托管选项。
*   关于 WCF 基础结构的主题：[链接](http://msdn.microsoft.com/en-us/magazine/cc163394.aspx)
*   双工服务主题：[链接](http://beyondrelational.com/modules/2/blogs/48/posts/10054/a-simple-duplex-service-in-wcf.aspx) [链接](http://weblogs.asp.net/dwahlin/archive/2008/06/16/pushing-data-to-a-silverlight-client-with-wcf-duplex-service-part-i.aspx) [链接](http://msdn.microsoft.com/en-us/library/cc645027%28v=vs.95%29.aspx)
*   基于任务的异步模式的主题：[链接](http://www.codeproject.com/Articles/126609/The-Asynchronous-Programming-Models-C-5-0-Series) [链接](http://www.codeproject.com/Articles/127291/C-5-0-vNext-New-Asynchronous-Pattern) [链接](http://visualstudiomagazine.com/Articles/2011/08/01/pfcov_Task-Based-Async.aspx?Page=2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T10:24:41.053

如果您坚持所有用户都通过服务器进行通信并且您希望您的应用程序可扩展，那么我可以给您一个建议：

1.  分离你的逻辑（通过理解你想在服务器上构建的逻辑的每一部分）

2.  使您的类可以处理每个事务的多个用户

3.  尽可能使用 IOCP

4.  如果您需要身份验证和用户配置文件等，这取决于您的应用程序的结构。您可以为用户引入 WCF 或任何 Web 服务，并在后台隐藏您的实际操作（这会降低您的性能，但它可能是唯一的你有合适的解决方案），所以你可能在服务器逻辑的顶部有你的身份验证框架，在后面有一个流水线操作逻辑..即用户经过身份验证才能访问服务器提供的服务，但是这些服务管道所有用户并同时处理尽可能多的用户-如果您不需要身份验证，那么您可以直接与服务器逻辑通信，并且您可以根据用户的请求使用完成端口-这里有很多工作要做。

# java - 如何观察视口的 JScrollPane 结束？

> ID：13346217
> 
> 赞同：0
> 
> 时间：2012-11-12T15:11:57.617
> 
> 标签：java, swing, jscrollpane

> **可能重复：**
> [如何知道 JScrollBar 是否已到达 JScrollPane 的底部？](https://stackoverflow.com/questions/12916192/how-to-know-if-a-jscrollbar-has-reached-the-bottom-of-the-jscrollpane)

我想知道 JScrollPane 滚动条何时到达视口的末尾有什么方法可以实现观察者，或者比仅仅询问内部面板的端点是否可见更好的方法？

# html - 找出浏览器在打印时会在哪里插入分页符

> ID：13346219
> 
> 赞同：5
> 
> 时间：2012-11-12T15:12:04.200
> 
> 标签：html, dom, browser, chromium, gecko

我试图弄清楚在打印或打印预览 HTML 文档时，浏览器（特别是 firefox 或 chrome）会在哪里插入分页符。现在我不想避免休息，也不想定义确切的休息位置。我知道 CSS 2.1 和 CSS 3.0 中定义的 page-break-* 元素。我真的很想弄清楚当前页面上的最后一个元素和下一页上的第一个元素，并将它们与实际的 HTML 代码相关联。

据我所知，没有可以注册的事件或信号。我想到的下一件事是修补 webkit 或 gecko 并添加自定义信号/事件。但这只有在分页代码没有分散在太多文件和成员中的情况下才有可能。

我并不是要一个完整的解决方案，而是要任何想法或暗示如何实现这一点。

提前感谢您的任何建议和想法:)

更新：我需要以编程方式确定分页符的位置，因为我想根据结果修改和操作原始 HTML 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:56:54.460

你到底想达到什么目的？您可以根据分页符以及是否仅使用带有[媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/Media)的 CSS 打印页面来设置页面样式。

如果 CSS 不足以满足您的用例并且修补渲染器是一个合适的解决方案：在 Gecko 上，您可以 grep [nsCSSFrameConstructor.cpp](https://mxr.mozilla.org/mozilla-central/source/layout/base/nsCSSFrameConstructor.cpp)调用 AddPageBreakItem，然后找出它在哪里插入中断。分页的 nsPresContext 意味着这是一个用于打印或打印预览的框架。查找对 nsPresContext::IsPaginated 和 nsPresContext::IsRootPaginatedDocument 的调用。

# java - Hadoop Map Reduce CustomSplit/CustomRecordReader

> ID：13346225
> 
> 赞同：2
> 
> 时间：2012-11-12T15:12:17.973
> 
> 标签：java, hadoop

我有一个巨大的文本文件，我想拆分文件，以便每个块有 5 行。我实现了自己的 GWASInputFormat 和 GWASRecordReader 类。但是我的问题是，在以下代码中（我从[http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/](http://bigdatacircus.com/2012/08/01/wordcount-with-custom-record-reader-of-textinputformat/)复制），在 initialize() 方法中我有以下几行

```
FileSplit split = (FileSplit) genericSplit;
final Path file = split.getPath();
Configuration conf = context.getConfiguration(); 
```

我的问题是，在我的 GWASRecordReader 类中调用 initialize() 方法时，文件是否已经拆分？我以为我是在 GWASRecordReader 类中做的（拆分）。让我知道我的思考过程是否就在这里。

```
package com.test;

import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FSDataInputStream;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.InputSplit;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.TaskAttemptContext;
import org.apache.hadoop.mapreduce.lib.input.FileSplit;
import org.apache.hadoop.util.LineReader;

public class GWASRecordReader extends RecordReader<LongWritable, Text> {

private final int NLINESTOPROCESS = 5;
private LineReader in;
private LongWritable key;
private Text value = new Text();
private long start = 0;
private long pos = 0;
private long end = 0;
private int maxLineLength;

public void close() throws IOException {
    if(in != null) {
        in.close();
    }
}

public LongWritable getCurrentKey() throws IOException, InterruptedException {
    return key;
}

public Text getCurrentValue() throws IOException, InterruptedException {
    return value;
}

public float getProgress() throws IOException, InterruptedException {
    if(start == end) {
        return 0.0f;
    }
    else {
        return Math.min(1.0f, (pos - start)/(float) (end - start));
    }
}

public void initialize(InputSplit genericSplit, TaskAttemptContext context) throws IOException {
    FileSplit split = (FileSplit) genericSplit;
    final Path file = split.getPath();
    Configuration conf = context.getConfiguration();
    this.maxLineLength = conf.getInt("mapred.linerecordreader.maxlength",Integer.MAX_VALUE);
    FileSystem fs = file.getFileSystem(conf);
    start = split.getStart();
    end = start + split.getLength();
    System.out.println("---------------SPLIT LENGTH---------------------" + split.getLength());
    boolean skipFirstLine = false;
    FSDataInputStream filein = fs.open(split.getPath());

    if(start != 0) {
        skipFirstLine = true;
        --start;
        filein.seek(start);
    }

    in = new LineReader(filein, conf);
    if(skipFirstLine) {
        start += in.readLine(new Text(),0,(int)Math.min((long)Integer.MAX_VALUE, end - start));
    }
    this.pos = start;
}

public boolean nextKeyValue() throws IOException, InterruptedException {
    if (key == null) {
        key = new LongWritable();
    }

    key.set(pos);

    if (value == null) {
        value = new Text();
    }
    value.clear();
    final Text endline = new Text("\n");
    int newSize = 0;
    for(int i=0; i<NLINESTOPROCESS;i++) {
        Text v = new Text();
        while( pos < end) {
            newSize = in.readLine(v ,maxLineLength, Math.max((int)Math.min(Integer.MAX_VALUE, end - pos), maxLineLength));
            value.append(v.getBytes(), 0, v.getLength());
            value.append(endline.getBytes(),0,endline.getLength());
            if(newSize == 0) {
                break;
            }
            pos += newSize;
            if(newSize < maxLineLength) {
                break;
            }
        }
    }

    if(newSize == 0) {
        key = null;
        value = null;
        return false;
    } else {
        return true;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T17:52:28.173

是的，输入文件已经被拆分。它基本上是这样的：

`your input file(s) -> InputSplit -> RecordReader -> Mapper...`

基本上，`InputSplit`将输入分解为块，`RecordReader`将这些块分解为键/值对。请注意，`InputSplit`和`RecordReader`将由`InputFormat`您使用的决定。例如，`TextInputFormat`用于`FileSplit`拆分输入，然后`LineRecordReader`以位置为键处理每一行，并将行本身作为值。所以在你的`GWASInputFormat`你需要看看`FileSplit`你用什么样的来看看它传递给什么`GWASRecordReader`。

我建议查看[`NLineInputFormat`](http://hadoop.apache.org/docs/r0.20.1/api/org/apache/hadoop/mapred/lib/NLineInputFormat.html "NLine输入格式")哪个“将 N 行输入拆分为一个拆分”。它可能能够完全按照您自己的意愿去做。

如果您尝试一次获取 5 行作为值，并将第一行的行号作为键，我会说您可以使用自定义`NLineInputFormat`和 custom来做到这一点`LineRecordReader`。我认为您不必担心输入拆分，因为输入格式可以将其拆分为那 5 行块。您`RecordReader`将与 非常相似`LineRecordReader`，但不是获取块开始的字节位置，而是获取行号。所以除了那个小改动之外，代码几乎是相同的。所以你基本上可以复制和粘贴`NLineInputFormat`，`LineRecordReader`然后让输入格式使用你的记录阅读器来获取行号。代码将非常相似。

# java - 休息 API 谷歌设置超时

> ID：13346229
> 
> 赞同：0
> 
> 时间：2012-11-12T15:12:24.637
> 
> 标签：java, android, xml, rest

```
UserActivities response = Resting.getByXML(Urld,Integer.parseInt(tPort), params,UserActivities.class, alias); 
```

如何将超时时间缩短到 5 秒？这被用于发生大量点击的生产中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:49:56.830

为什么要尽量减少超时？我猜你会收到一些 ANR（应用程序无响应）错误消息。

注意：您不应该在 UI 线程中使用此代码。[在这里](http://developer.android.com/reference/android/os/AsyncTask.html)查看更多信息。

# jpa - 如何通过两个变量/列以两种方式对 JSF 2 数据表进行排序？

> ID：13346231
> 
> 赞同：0
> 
> 时间：2012-11-12T15:12:29.283
> 
> 标签：jpa, jsf-2

我有以下实体：

```
@Entity
public class Question {

    @Id
    @GeneratedValue
    private Integer id;

    private String content;

    private boolean visible;

    private Date displayDate;

} 
```

数据库中始终只能看到一个问题。dataTable 中列表的要求是第一行必须是可见的 Question，其他行必须按 displayDate 排序。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:47:17.500

排序通常在 DB（模型）端执行，而不是在 JSF（视图）端。您的 SQL（以及等效的 JPQL）查询应该以这样的方式编写，即它**准确地**返回您需要的行，而无需任何必要的后处理（即 DB 在选择作业方面比 Java/JSF 效率高得多）。

用简单的 SQL 术语来说，那就是

```
(...) ORDER BY visible DESC, displayDate ASC 
```

如果您使用的是 JPA，那么您肯定能够为此提取正确的 JPQL 语法

```
(...) FROM Question q (...) ORDER BY q.visible DESC, q.displayDate ASC 
```

# sql - SQL Try-Catch 和事务问题

> ID：13346232
> 
> 赞同：1
> 
> 时间：2012-11-12T15:12:31.757
> 
> 标签：sql, tsql, transactions

我有这样的交易，我有几个问题。

如果我要对'Master'运行它，它应该会出错，因为表'Year'不存在，我看不到事务回滚。SQL 只是抛出表/列不存在的错误。

如果我针对存在该表的数据库运行它并由于外键约束而使其出错，那么我确实会看到事务回滚。

为什么我没有得到相同的结果。

```
BEGIN TRY
    BEGIN TRANSACTION

    INSERT INTO Year (YearId, FiscalYear) 
    VALUES (NewId(), 2014)

    COMMIT

END TRY
BEGIN CATCH
  IF @@TRANCOUNT > 0
     ROLLBACK
        PRINT 'ERROR'

  DECLARE @ErrMsg nvarchar(4000)
        , @ErrSeverity int
  SELECT @ErrMsg = ERROR_MESSAGE(),
         @ErrSeverity = ERROR_SEVERITY()

  RAISERROR(@ErrMsg, @ErrSeverity, 1)
END CATCH

GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:16:07.190

我猜当表不存在时，当代码被解析/编译并且从未执行时会发生错误，因此没有事务可以回滚。

而当表存在时，必须执行代码并启动事务。然后该错误会导致回滚。

# php - 学说 2 文档示例中的拥有方和反方是什么

> ID：13346233
> 
> 赞同：16
> 
> 时间：2012-11-12T15:12:35.573
> 
> 标签：php, doctrine-orm

在关联映射的这个页面上，manytomany 部分中有一个示例。但我不明白哪个实体（组或用户）是拥有方。

[http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html#many-to-many-bidirectional)

我也把代码放在这里

```
<?php
/** @Entity */
class User
{
    // ...

    /**
     * @ManyToMany(targetEntity="Group", inversedBy="users")
     * @JoinTable(name="users_groups")
     */
    private $groups;

    public function __construct() {
        $this->groups = new \Doctrine\Common\Collections\ArrayCollection();
    }

    // ...
}

/** @Entity */
class Group
{
    // ...
    /**
     * @ManyToMany(targetEntity="User", mappedBy="groups")
     */
    private $users;

    public function __construct() {
        $this->users = new \Doctrine\Common\Collections\ArrayCollection();
    }

    // ...
} 
```

我是否像这样阅读此注释： User is mappedBy groups so group 是进行连接管理的实体，因此是拥有方？

另外，我在文档中读过这个：

```
For ManyToMany bidirectional relationships either side may be the owning side (the side  that defines the @JoinTable and/or does not make use of the mappedBy attribute, thus using   a default join table). 
```

这让我认为 User 将是拥有方，因为 JoinTable 注释是在该实体中定义的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-13T01:07:39.150

> 但我不明白哪个实体（组或用户）是拥有方

`User`实体是所有者。您在用户中有组的关系：

```
/**
 * @ManyToMany(targetEntity="Group", inversedBy="users")
 * @JoinTable(name="users_groups")
 */
private $groups; 
```

看上面，`$groups`var 包含与该用户关联的所有组，但是如果您注意到属性定义，`$groups`var 具有**相同**的`mappedBy`value 名称 (mappedBy=" `groups`")，就像您所做的那样：

```
/**
 * @ManyToMany(targetEntity="User", mappedBy="groups")
 */
private $users; 
```

**是什么意思？**

> 此选项指定作为此关系拥有方的 targetEntity 上的属性名称。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-12T16:01:52.680

取自文档：

> 在一对一关系中，在其自己的数据库表上持有相关实体的外键的实体始终是关系的拥有方。
> 
> 在多对一关系中，默认情况下多方是拥有方，因为它拥有外键。默认情况下，关系的 OneToMany 端是反向的，因为外键保存在 Many 端。OneToMany 关系只能是拥有方，如果它使用带有连接表的 ManyToMany 关系来实现，并且限制一侧只允许每个数据库约束的唯一值。

现在，我知道 ManyToMany 有时会让人感到困惑。

对于多对多关联，您可以选择哪个实体是拥有者以及哪个实体是反面。从开发人员的角度来看，有一个非常简单的语义规则可以决定哪一方更适合作为拥有方。您只需要问自己，哪个实体负责连接管理，然后选择它作为拥有方。

以文章和标签两个实体为例。每当您想将文章连接到标签时，反之亦然，主要是文章负责这种关系。每当您添加新文章时，您都希望将其与现有或新标签联系起来。您的 createArticle 表单可能会支持此概念并允许直接指定标签。这就是为什么你应该选择文章作为拥有方，因为它使代码更易于理解：

```
<?php
class Article
{
    private $tags;

    public function addTag(Tag $tag)
    {
        $tag->addArticle($this); // synchronously updating inverse side
        $this->tags[] = $tag;
    }
}

class Tag
{
    private $articles;

    public function addArticle(Article $article)
    {
        $this->articles[] = $article;
    }
} 
```

这允许对在关联的文章侧添加的标签进行分组：

```
<?php
$article = new Article();
$article->addTag($tagA);
$article->addTag($tagB); 
```

所以，简而言之，任何对你更有意义的东西。你选择关系的拥有和反面。:)

资料来源：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)

# c++ - 为什么这个模板函数调用在这个函数中不起作用？

> ID：13346236
> 
> 赞同：7
> 
> 时间：2012-11-12T15:12:41.623
> 
> 标签：c++, arrays, templates

以下代码无法编译，我试图弄清楚如何计算传递给函数的数组的大小，并且似乎无法使语法正确。

我得到的错误是：

```
Error   1   error C2784: 'size_t getSize(T (&)[SIZE])' : could not deduce template argument for 'T (&)[SIZE]' from 'const byte []' 16   1 sizeofarray 
```

这是源代码：

```
#include <cstdint>
#include <stdio.h>

template<typename T, size_t SIZE>
size_t getSize(T (&)[SIZE]) {
    return SIZE;
}

typedef std::uint_fast8_t byte;

void processArray(const byte b[])
{
    size_t size = getSize(b); // <- line 16 where error occurs
    // do some other stuff
}

int main(const int argc, const char* argv[])
{
    byte b[] = {1,2,3,4,5,6};
    printf("%u\n", getSize(b));
    processArray(b);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T15:17:06.190

如果您想让它工作，您还需要将 processArray 设为模板：

```
template <size_t size>
void processArray(const byte (&b)[size])
{
    // do some other stuff
} 
```

C++ 不允许按值传递数组。如果你有这样的功能：

```
void f(int a[5]); 
```

看起来您正在按值传递数组，但该语言有一条特殊规则，即这种形式的参数只是另一种说法：

```
void f(int *a); 
```

所以数组的大小根本不是类型的一部分。这是从 C 继承的行为。幸运的是，C++ 具有引用，您可以将引用传递给数组，如下所示：

```
void f(int (&a)[5]); 
```

这样，数组的大小就被保留了。

现在，唯一剩下的技巧是使函数泛型，因此它可以在任何大小的数组上工作。

```
template <size_t n> void f(int (&a)[n]); 
```

现在，可以为您自动生成引用不同大小数组的函数的新版本，并且可以通过模板参数访问大小。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T15:15:15.463

作为函数的参数，`const byte b[]`被视为`const byte *b`. 没有关于调用函数的数组大小的编译时信息。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T15:17:21.627

要传递对数组的引用，您需要制作`processArray`一个模板并使用相同的技术。如果不传入引用，则参数为指针，而指针类型没有数组大小信息。

```
template<size_t size>
void processArray(const byte (&b)[size]) {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-12T16:02:31.357

**这是为什么您应该使用函数模板`getSize`而不是`sizeof`确定数组大小**的典型示例。****

 ***   使用`sizeof`，您将获得指针的大小并且变得更聪明。
*   但是，这样，你会得到一个编译错误来指出你的错误。

错误是什么？它有一个函数参数`const T arg[]`，并认为这意味着`arg`是一个数组。它不是。这是来自 C 的不幸语法，它*完全等同*于`const T* arg`. *你得到一个指针。*

这也是为什么有些人错误地认为“数组是指针”的原因。他们不是。这只是这种特定的语法。**

# mysql - 在大于 TIME 范围的 MySQL 中存储持续时间的最佳方法是什么？

> ID：13346242
> 
> 赞同：14
> 
> 时间：2012-11-12T15:12:59.467
> 
> 标签：mysql, time, duration

我需要一种将持续时间存储在 db 字段中的方法。我正在建立一个网站，客户应该能够选择他们希望广告从特定开始日期显示多长时间。

我曾考虑过使用 TIME，但它的最大值为“838:59:59”，大约需要 34 天。客户可能希望广告存在的时间更长。

那么处理这个问题的最佳方法是什么？只是一个非常大的INT？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T15:49:50.890

如果您打算有一个用于开始时间的列和一个用于持续时间的列，我认为您可以在几秒钟内存储它。所以，我假设你会有这样的东西；

```
+-----------+--------------------------+------------------+
| advert_id | start_time               | duration_seconds |
+-----------+--------------------------+------------------+
| 2342342   |'2012-11-12 10:23:03'     | 86400            |
+-----------+--------------------------+------------------+ 
```

（为了举例，我们称这个表`adverts`）

1.  advert_id - 指向您的广告的键
2.  start_time - 广告应该开始的时间（数据类型 - TIMESTAMP）
3.  duration_seconds - 广告应该“直播”的时间（以秒为单位） (INTEGER(11)

    选择 TIME_TO_SEC(timediff(now(),start_time)) 作为 'time_difference_in_seconds_since_advert_started' FROM `adverts`；

如果您只想获取未过期的广告，您将运行这样的查询；

```
SELECT * FROM  `adverts` WHERE TIME_TO_SEC(timediff(now(),start_time))<=`duration_seconds`; 
```

如果我要使用“持续时间”字段，那是我会这样做的一种方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:27:30.317

是的，您可以将时间存储为 INT 数据类型（或另一个大整数：MEDIUMINT、LONGINT）。然后使用您可以轻松地从中获取日期和时间部分，例如 -

```
SELECT time DIV 86400 AS days, SEC_TO_TIME(column1 MOD 86400) AS time FROM table 
```

其中 86400 是 24 小时内的秒数 (60 * 60 * 24 = 86400)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:17:44.523

不是最好的解决方案，但您可以在数据库中添加一列，并检查时间何时超过 24 小时，将其计算为 1 天并写入该列，所有休息时间写入时间列。但是从 db 中选择，您还应该计算该列的天数

# intellij-idea - 在 IntelliJ 中显示错误的键盘快捷键

> ID：13346245
> 
> 赞同：57
> 
> 时间：2012-11-12T15:13:02.977
> 
> 标签：intellij-idea, keyboard-shortcuts

出于健康原因，我喜欢尽可能少地使用鼠标。IntelliJ 中的几乎所有常见任务我都可以通过键盘快捷键完成，除了显示错误消息。我怎样才能有一个键盘快捷键来显示突出显示的错误的工具提示？

例如，我有一个错误，例如：

![在此处输入图像描述](../Images/baf391bc3bd8932c6dce9f58c330c513.png)

然后我点击 [magic-keyboard-command] 并得到：

![在此处输入图像描述](../Images/1a4bf998b99a4e8cdb9b850500f444ea.png)

在 Eclipse 中，这可以通过按 F2 来实现。IntelliJ 中是否有等价物？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-12T15:16:03.380

`Error Description`JetBrains 工具的标准快捷键是`Ctrl`+ `F1`（在 Mac 上是 +）`Cmd`。`F1`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-09-17T13:39:01.563

我在 Mac 上使用 F2，它将所有错误循环到一个文件中，并显示每个错误信息。

# ios - Xcode：项目导航器，黄色文件夹和蓝色文件夹的区别

> ID：13346247
> 
> 赞同：38
> 
> 时间：2012-11-12T15:13:06.693
> 
> 标签：ios, xcode

我想知道 Xcode 中蓝色文件夹和黄色文件夹的区别。

![在此处输入图像描述](../Images/b3c407cbf51cd7261e58b42d6b2697f7.png)

我发现[了这一点](https://stackoverflow.com/questions/8487760/what-is-a-blue-folder-in-xcode)，但没有澄清我的疑问！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-12T15:21:27.080

黄色文件夹是“组”，它们不是实际文件夹，而是对文件夹/文件的引用。它们的存在只是为了在 Xcode 中组织您的项目。蓝色文件夹是文件系统中存在的实际文件夹。

蓝色文件夹让您不必每次在文件夹中出现新内容（即图像）时都“添加文件”。但是，您仍然应该主要使用组（又名黄色文件夹），因为它可以让您更好地控制将与您的应用程序捆绑的内容（想想文件夹/版本控制文件中的隐藏文件）。此外，有时蓝色文件夹会弄乱您捆绑包中的文件层次结构，即。导致启动画面出现故障。只有少数情况下您会使用蓝色文件夹，例如“内容”文件夹，其中文件夹中的任何内容都应与捆绑包一起打包（正如 Mark Szymczyk 评论的那样，图像或视频）。如果您不确定，请坚持使用黄色文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:23:08.223

黄色文件夹应该是链接（组，充当文件夹，但如果您在 Finder 中签入，则没有，如 iTunes 中的播放列表），而蓝色文件夹是“物理”（作为 Finder 中的文件夹）。

# ios - 将样本简单地写入文件是否需要通用输出？

> ID：13346249
> 
> 赞同：0
> 
> 时间：2012-11-12T15:13:11.233
> 
> 标签：ios, core-audio

我想从 iPhone 麦克风录制音频并将这些样本写入文件。查看文档，我不清楚我是否可以简单地在远程 IO 单元的渲染回调函数中执行写操作？或者，如果我需要附加一个通用输出 AU 并编写来自该单元的样本（？）后者意味着在设置 AUGraph、AUNodes 等方面有更多开销，所以我更喜欢前者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:49:08.317

您可以使用 ExtAudioFile API（`ExtAudioFileWriteAsync`尤其是）在您的输入回调中执行此操作。“异步”位使它在实时输入回调中可行。

[有关更多信息，请参阅此答案，因为它的设置非常相似。](https://stackoverflow.com/questions/12777714/saving-audio-played-via-aufileplayer-to-an-external-file/12844110#12844110)

[ExtAudioFileWriteAsync 文档在这里。](https://developer.apple.com/library/mac/documentation/MusicAudio/Reference/ExtendedAudioFileServicesReference/Reference/reference.html#//apple_ref/c/func/ExtAudioFileWriteAsync)

# php - 使用 Slim 框架返回 http 500

> ID：13346255
> 
> 赞同：6
> 
> 时间：2012-11-12T15:13:30.997
> 
> 标签：php, slim

如果我的 API 出现问题，我想返回一个 http 500 请求。

```
$app = new Slim();
$app->halt(500); 
```

它仍然返回 http 200。

如果我运行此代码：

```
 $status = $app->response()->status(); 
    echo $status; //Here it is 200
$status = $app->response()->status(500);
    echo $status; //Here it is 500 
```

它仍然给我一个 http 200

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-31T19:50:05.613

如果有人仍然有这个问题，我最终会这样做：

设置错误处理程序

```
    $app->error(function (Exception $exc) 使用 ($app) {
       // 用于 HTTP 状态的自定义异常代码
       if ($exc->getCode() !== 0) {
          $app->response->setStatus($exc->getCode());
       }

       $app->response->headers->set('Content-Type', 'application/json');
       echo json_encode(["error" => $exc->getMessage()]);
    });

```

然后，只要您需要返回特定的 HTTP 状态，就会抛出一个包含状态代码的异常：

```
    throw new Exception("我的自定义异常和我选择的状态码", 401);

```

（在 Slim 论坛上找到它）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T15:30:54.507

这`$app->response()->status(500);`是正确的，请参阅[此处](http://docs.slimframework.com/pages/response-status/)的文档。

检查以确保您`$app->run();`在设置状态后调用，这将准备并输出响应代码、标头和正文。

**编辑**，确保你定义了一个路由，否则 Slim 会输出 404 响应，这行得通：

```
require 'Slim/Slim.php';
\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->response()->status(500);

$app->get('/', function () {
    // index route
});

$app->run(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T14:31:56.280

如果你必须在 $app->run() 之后推送 header，你总是可以依赖 header php 函数：

```
header('HTTP/1.1 401 Anonymous not allowed'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-14T22:48:33.427

Slim 框架 v2 [wiki 状态](http://docs.slimframework.com/response/status/)

```
require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->get('/', function () use ($app) {
  $app->response()->setStatus(500);
  $app->response()->setBody("responseText");  
  return $app->response();
});

$app->run(); 
```

或者

```
$app->get('/', function () use ($app) {
  $app->halt(500, "responseText");
}); 
```

# php - PhpActiveRecord：创建初始化对象

> ID：13346258
> 
> 赞同：0
> 
> 时间：2012-11-12T15:13:37.593
> 
> 标签：php, activerecord, phpactiverecord

我正在使用[php activerecord](http://phpactiverecord.org/)。我需要初始化一个`Order`对象，然后设置相关对象，如下所示

```
$order = new Order();
Order->_plan = Plan::find(1); 
```

我得到错误`Undefined property: Order->_plan in /var/www/ordenes-web/core/libs/php-activerecord/lib/Model.php on line 428`

我的课：

```
class Order extends ActiveRecord\Model{
    static $belongs_to = array( 
        array(
            '_plan',
            'class_name' => 'Plan',
            'foreign_key' => 'plan'
        ),
    );
} 
```

关系运作良好。如果我`Order`用 finder 找到一个，我会得到相关的对象`_plan`：

```
Order::find(1)->_plan // Works! 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:26:19.263

问题是 ActiveRecord 不支持这种行为。你可以[在这里看到](http://www.phpactiverecord.org/boards/1/topics/573-set-relationship)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T07:07:24.100

这条线

```
Order->_plan 
```

真的没什么意思。您可以找到对象的属性，例如您的`$order`对象。

此行表示您正在制作一个对象，然后找到该`_plan`属性。哪个好。

```
 Order::find(1)->_plan // Works! 
```

要对对象执行此操作，您应该这样做

```
$order = Order::find(1);
var_dump($order->_plan;) // should work! 
```

现在您可以更改 _plan 中的内容（如果存在），例如

```
$order->_plan->world = "Hello". 
```

现在你应该记住你在你的对象中设置了关系，所以这就是它们的到达方式。我认为你不应该创建这样的对象。你说的有效的例子是这样的

*   找到 id 为 1 的订单。
*   得到它的计划。

但是你的例子不起作用

*   寻找新订单
*   将 ID 为 1 的计划分配给该订单。

最后一部分不像我认为的那样工作，请参阅@Overflow012 发布的[此链接](http://www.phpactiverecord.org/boards/1/topics/573-set-relationship)。

# ios - 在 appDelegate 中调用 open Url

> ID：13346259
> 
> 赞同：0
> 
> 时间：2012-11-12T15:13:37.737
> 
> 标签：ios, xcode

我的应用程序委托中有此代码：

```
- (BOOL)application:(UIApplication *)application
     openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
  annotation:(id)annotation {
// attempt to extract a token from the url
self.openedURL = url;
// attempt to extract a token from the url
 return [FBSession.activeSession handleOpenURL:url];       
 } 
```

如何从 UIViewController 调用它？

编辑：

```
- (IBAction)authButtonAction:(id)sender {

/*
 AppDelegate *appDelegate =
 [[UIApplication sharedApplication] delegate];*/

 // The user has initiated a login, so call the openSession method
 // and show the login UX if necessary.
 //[appDelegate openSessionWithAllowLoginUI:YES];

 // If the user is authenticated, log out when the button is clicked.
 // If the user is not authenticated, log in when the button is clicked.
 if (FBSession.activeSession.isOpen) {
 [FacebookDialogueViewControllerDelegate closeSession];
 } else {
 // The user has initiated a login, so call the openSession method
 // and show the login UX if necessary.
 [FacebookDialogueViewControllerDelegate openSessionWithAllowLoginUI:YES];
 }

} 
```

...视图控制器然后有这个：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
return [FBSession openActiveSessionWithReadPermissions:nil
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session,
                                                         FBSessionState state,
                                                         NSError *error) {
                                         [self sessionStateChanged:session
                                                             state:state
                                                             error:error];
                                     }];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:18:13.403

你没有。当您在应用程序的 plist 中注册 URL 语法时，操作系统会调用它。

然后，您可以使用此方法来处理请求。

即，如果您有一个 wordsearch 应用程序，那么您可能拥有它，以便用户可以从电子邮件中的链接打开 wordsearch，例如...

wordsearch://thisisthecontetnofthewordsearchhfsadkljfhasdkfjahsdkfjhaskljasdhflkjahsgdflkjadhslfkj

然后你会使用这个函数来解析字符串并将它变成一个实际的单词搜索谜题（或类似的东西）。

你真正想从你的 UIViewController 做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:18:47.747

你有两个选择：

1.  将 in 传递给`NSURL`on`UIViewController`实例化或其他方式。

2.  从您的`UIViewController`中，获取对应用程序委托的引用并使用该`openedURL`属性。

**选项 2 的代码**

```
MyViewController *controller = [[UIApplication sharedApplication] delegate];
controller.openedURL; 
```

# android - 如何在 Android 的数字时钟期间刷新 TextView？

> ID：13346262
> 
> 赞同：2
> 
> 时间：2012-11-12T15:13:45.940
> 
> 标签：android, textview, clock, digital

当数字时钟每分钟刷新一次格式的时间时，我想每分钟刷新一个 TextView 的文本`hh/mm`。我在Activity中放置了一个名为txtView1的TextView并创建了一个类Digital Clock。当我运行应用程序时，应用程序退出并出错。我真的不知道为什么这里是`onAttachedToWindow()`关于Digital Clock的重要功能：

```
 protected void onAttachedToWindow() {
       mTickerStopped = false;

        super.onAttachedToWindow();

        mHandler = new Handler();

        /**

         * requests a tick on the next hard-second boundary

         */

        mTicker = new Runnable() {

                public void run() {

                    if (mTickerStopped) return;

                    mCalendar.setTimeInMillis(System.currentTimeMillis());

                    String content = (String) DateFormat.format(mFormat, mCalendar);

                    if(content.split(" ").length > 1){

                        content = content.split(" ")[0] + content.split(" ")[1];

                    }

                    setText(android.text.Html.fromHtml(content));

                   //-----Here is the TextView I want to refresh

                   TextView txtV1 = (TextView)findViewById(R.id.txtView1);
                   txtV1.setText("Now Fresh");//Just for try,so set a constant string 

                    invalidate();

                    long now = SystemClock.uptimeMillis();

                    //refresh each minute

                    long next = now + (60*1000 - now % 1000);

                    mHandler.postAtTime(mTicker, next);

                }

            };

        mTicker.run();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T19:19:00.397

系统根据系统时钟在每分钟的确切开始发送广播事件。最可靠的方法是这样做：

```
BroadcastReceiver _broadcastReceiver;
private final SimpleDateFormat _sdfWatchTime = new SimpleDateFormat("HH:mm");
private TextView _tvTime;

@Override
public void onStart() {
    super.onStart();
    _broadcastReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context ctx, Intent intent) {
                if (intent.getAction().compareTo(Intent.ACTION_TIME_TICK) == 0)
                    _tvTime.setText(_sdfWatchTime.format(new Date()));
            }
        };

    registerReceiver(_broadcastReceiver, new IntentFilter(Intent.ACTION_TIME_TICK));
}

@Override
public void onStop() {
    super.onStop();
    if (_broadcastReceiver != null)
        unregisterReceiver(_broadcastReceiver);
} 
```

但是不要忘记预先初始化您的 TextView（到当前系统时间），因为您可能会在一分钟的中间弹出您的 UI，并且 TextView 直到下一分钟才会更新。

# python - Psycopg2：在 python 中使用 with ... as 进行查询

> ID：13346264
> 
> 赞同：5
> 
> 时间：2012-11-12T15:13:48.850
> 
> 标签：python, psycopg2, with-statement

使用 psycopg2 进行查询的最佳模式是什么？

这个：

```
# get_connection is a function that returns a connection to the db.
with get_connection() as conn:
    with conn.cursor() as cursor:
        cursor.execute("SELECT * FROM test_table")

or simply this:

with get_connection() as conn:
    cursor = conn.cursor()
    cursor.execute("SELECT * FROM test_table") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-20T15:30:13.947

从 2.5 版开始，您现在可以`with`用于 psycopg2 连接和游标。文档在[这里](http://initd.org/psycopg/docs/usage.html#with-statement)。

它提到：

> 当连接退出 with 块时，如果该块没有引发异常，则提交事务。如果出现异常，事务将回滚。

`with`因此，我认为您上面使用嵌套块的第一个代码片段是更好的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:16:38.060

看来 psycopg2 对象没有实现 __exit__ 函数，所以它们不能用来声明一个 with 块！

# c# - 如何防止 .NET 中的 DLL 欺骗

> ID：13346265
> 
> 赞同：25
> 
> 时间：2012-11-12T15:13:51.957
> 
> 标签：c#, .net

我有一个引用托管 DLL 的 .NET 应用程序。

这个 DLL 包含一个类，比如`ScoreKeeper`实现一个名为`GetHighScore()`. 应用程序会定期调用它。

有没有办法阻止 .NET 应用程序在这里使用“未经授权”的 DLL 来代替我提供的那个？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-12T15:17:55.007

你提到：

> 这个 DLL 包含一个类，比如`ScoreKeeper`实现了一个名为 GetHighScore() 的方法。应用程序会定期调用它。

接着：

> 有没有办法阻止 .NET 应用程序在这里使用“未经授权”的 DLL 来代替我提供的那个？

假设您想阻止某人将您提供的程序集换成他们自己的程序集，该程序集具有相同的名称和类型（位于同一命名空间中），您*可以* [将强名称应用于](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)包含`ScoreKeeper`该类的程序集并让您的消费者参考。

但是，我们会看到一些问题使得这不是 100% 可靠的。强名称可帮助您保护不知情的用户免受恶意欺骗副本替换您的 DLL。但是，如果用户是欺骗的同谋（如果他试图作弊，就会出现这种情况），那么代码签名将只不过是一个减速带，并不能提供真正的保护。当然，强名称不提供与例如 PunkBuster 相媲美的保护。

**使用强名称验证程序集发布者的身份**

当您向程序集添加强名称时，您正在使用私钥（非对称公钥/私钥对的一部分，稍后将详细介绍）生成加密哈希，并且公钥包含在程序集名称中（以及哈希）。

使用公共散列和公钥，CLR 能够验证程序集的签名确实来自私钥。

当然，这意味着，您应该保护密钥（内部和外部）；如果其他人拥有您的密钥，那么他们可以有效地冒充您并发布人们相信来自您的程序集。

然后，当您添加对已签名程序集的引用时，如果有人尝试使用相同的程序集名称（不是完全限定的程序集，只是没有版本、哈希和公钥的名称）和相同类型名称的不同程序集，则尝试加载类型时CLR填充失败，表示找不到；使用完全限定的程序集名称以及命名空间和类型名称来解析类型。

**为什么强名称不是 100% 安全的（是什么？）**

1)**哈希冲突**

它*仍然*是一个正在验证的哈希。虽然散列非常大（默认散列算法 SHA-1 为 160 位），但任何具有有限数量值的散列都会发生冲突。虽然*极*不可能，但它*是*可能的（不可能与不可能）。此外，默认情况下仅使用最后 8 个字节。结合研究表明 SHA-1 相对较弱，这是使用[MSDN](http://msdn.microsoft.com/en-us/library/hh415055.aspx)中所述的 SHA-256 增强型强命名的一个很好的理由。

2）**删除强名称**

*可以*删除强名称。但是，在这种情况下，由于*您的*程序集引用了被[引用程序集的强命名版本，因此](http://msdn.microsoft.com/en-us/library/s1sx4kfb.aspx)当您的程序集尝试使用受损版本时，它将在运行时失败，假设您已正确重新启用验证（见下文）。

3)**对程序集的物理访问是指*所有*程序集**

如果有人可以访问物理机器并且可以修改您引用的程序集，那么您的程序集*同样*容易受到攻击。如果攻击者能够修改您引用的程序集的强名称，那么他们就可以轻松地修改**您的程序集和所有其他参与执行的程序集**。为此，[100% 确保物理程序集未被黑客入侵的唯一方法是拒绝通过它进行物理访问](https://stackoverflow.com/a/4532568/50776)。当然，这带来了一系列*不同*的安全问题。

4)**管理员禁用强名称检查**

计算机管理员可以简单地绕过强名称检查，使用`sn -Vr`. 根据[MSDN](http://msdn.microsoft.com/en-us/library/k5b5tt23.aspx)：

> 注册程序集以跳过验证...恶意程序集可以使用添加到跳过验证列表的程序集的完全指定的程序集名称（程序集名称、版本、文化和公钥令牌）来伪造其身份。这将允许恶意程序集也跳过验证。

5)**必须在 .NET 3.5 SP 1 之后显式启用强名称检查**

从 .NET 3.5 SP 1 开始，[仅仅拥有一个强名称并不能提供任何保护](http://msdn.microsoft.com/en-us/library/cc713694.aspx)：

> 从 .NET Framework 3.5 Service Pack 1 (SP1) 开始，当程序集加载到完全信任的 AppDomain 对象（例如 MyComputer 区域的默认 AppDomain）中时，不会验证强名称签名。

为了让 .NET 检查加载到应用程序中的每个程序集的强名称，您需要将以下代码段（由 MSDN 提供）插入到应用程序配置文件中：

> ```
> <configuration>
>   <runtime>
>      <bypassTrustedAppStrongNames enabled="false" />
>   </runtime>
> </configuration> 
> ```

但是请注意，这只能防止强名称被删除。

> 当您覆盖绕过功能时，仅验证强名称的正确性；它没有检查 a `StrongNameIdentityPermission`。如果要确认特定的强名称，则必须单独执行该检查。

* * *

如果考虑到上述问题，您仍然想为您的程序集进行强命名，这里是如何。

**生成强名称并签署您的程序集**

在生成强名称时，您有两种选择使用哪个键。在 Visual Studio 中，转到项目属性上的“签名”选项卡，然后单击“签署程序集”：

![](../Images/292cc00cb028f93fd5061dda2f9cc9de.png)

从那里，您有两个选项来生成公钥/私钥，让 VS.NET 为您生成密钥，或者指向现有的密钥：

![](../Images/c54f2088d197b12960dcdb86f3cfff95.png)

选择“新建”时，Visual Studio 将提示您输入要生成的文件的名称，以及是否要选择使用密码来访问它：

![创建强名称键对话框](../Images/f7d783fac610760649ca45f90a46ea7d.png)

此时，密钥将添加到您的项目中：

![添加到项目的密钥](../Images/7ecbfa2e26f74743be8ce02444a8ec62.png)

现在，您可以将其移至解决方案项（如果您的解决方案中有多个项目）。

在这种情况下，Visual Studio 实际上只是调用[强名称命令行工具](http://msdn.microsoft.com/en-us/library/k5b5tt23.aspx)来生成公钥和私钥对。如果您想自己执行此操作，则需要`sn.exe`使用`-k`命令行选项调用以生成密钥，如下所示：

```
sn -k keyPair.snk 
```

然后通过上面的“浏览”对话框添加它。

请注意，当您执行此操作时，它会将密钥拉入您的项目。如果您不想这样做（因为它会将密钥复制到*每个项目中），请**从项目*中删除密钥，然后[将现有文件添加到项目中，但*链接*它](http://support.microsoft.com/kb/306234)。这将清除“选择强名称密钥文件”选项，但如果将其下拉，您将看到链接密钥文件的完整路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T15:17:23.767

似乎最直接的答案是计算您正在加载的 DLL 的安全哈希，然后将其与您预先计算的黄金值进行比较。当然，这仍然很容易被足够坚定的攻击者破解，但它会显着提高想要作弊的人的门槛。

# cassandra - 将 Guid 转换为 Cassandra UUID

> ID：13346266
> 
> 赞同：0
> 
> 时间：2012-11-12T15:13:59.953
> 
> 标签：cassandra, fluentcassandra

我想将 Guid 转换为 UUID 或相同的字符串版本，以便以下 CQL 查询可以工作。

```
 if (cassandraDb.ExecuteQuery(string.Format("SELECT OrderGroupId FROM Order WHERE OrderGroupId={0}", orderGroupId)).Count() <= 0)                            { 
```

变量“orderGroupId”是一个 Guid。显然这是在 C#/.NET 环境中使用 FluentCassandra。有什么提示吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:23:13.957

**使用.ToString()**属性直接将 CQL 查询作为字符串执行。

```
string.Format("SELECT OrderGroupId FROM Order WHERE OrderGroupId={0}", orderGroupId.ToString()) 
```

应该可以正常工作。如果没有...您可能想试试这个（我在其中一个 C# 客户端的评论线程上找到）：

```
 protected static string ToCqlString(Guid guid) {
        var bytes = guid.ToByteArray();
        StringBuilder sb = new StringBuilder(bytes.Length * 2);
        for (int i = 0; i < 16; i++) {
            if (i == 4 || i == 6 || i == 8 || i == 10) {
                sb.Append("-");
            }
            var b = bytes[i];
            sb.AppendFormat("{0:x2}", b);

        }
        return sb.ToString();
    } 
```

干杯，艾莉森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:33:49.037

要将 System.Guid 转换为 FluentCassandra.Types.UUIDType，您只需将一个分配给另一个。

FluentCassandra.Types.TimeUUIDType 也是如此。

# sql - 在 oracle 中强制标识符区分大小写

> ID：13346273
> 
> 赞同：1
> 
> 时间：2012-11-12T15:14:24.637
> 
> 标签：sql, oracle

在 oracle 中，当使用不带引号的标识符时，它们会被默默地大写。换句话说，这两个语句是等价的：

```
SELECT name FROM my_table
SELECT "NAME" FROM "MY_TABLE" 
```

有什么办法可以停止无声大写，使以下语句变得等价？

```
SELECT name FROM my_table
SELECT "name" FROM "my_table" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:37:22.457

不，很遗憾，您无法自定义[Oracle 解释您的标识符的方式](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements008.htm#i27570)：

> 请注意，Oracle 对以下名称的解释相同，因此它们不能用于同一命名空间中的不同对象：
> 
> ```
> employees
> EMPLOYEES
> "EMPLOYEES" 
> ```

将不带引号的标识符转换为大写（内部所有对象名称都区分大小写）是一种方便（向后兼容性？）。

# mysql - 从其他重复的行对中删除 null - mysql

> ID：13346277
> 
> 赞同：1
> 
> 时间：2012-11-12T15:14:31.157
> 
> 标签：mysql, optimization, select, null

系统偶尔会生成相似的行对，其中所有列都相同，除了`status_code`. 不同的列对包含一个 NULL 和一个数字。

```
CREATE TABLE IF NOT EXISTS `delnull` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `process_id` varchar(16) DEFAULT NULL,
  `somedate` datetime DEFAULT NULL,
  `status_desc` varchar(200) DEFAULT NULL,
  `status_code` int(3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

--
-- Dumping data for table `delnull`
--

INSERT INTO `delnull` (`id`, `process_id`, `somedate`, `status_desc`, `status_code`) VALUES
(1, 'xyz', '2012-11-12 10:01:43', 'Completed OK', 0),
(2, 'xyz', '2012-11-12 10:01:43', 'Completed OK', NULL),
(3, 'def', '2012-11-13 10:02:11', 'Failed: broken connection', 3),
(4, 'ghi', '2012-11-09 10:02:23', 'Lost packets', 4),
(5, 'ghi', '2012-11-01 10:04:30', 'Failed: broken connection', 3),
(6, 'ghi', '2012-11-06 10:04:23', 'Lost packets', 4),
(7, 'pos', '2012-11-02 10:06:01', 'Completed OK', 0),
(8, 'pos', '2012-11-02 10:06:02', 'Completed OK', NULL); 
```

[http://sqlfiddle.com/#!2/128cc/1/0](http://sqlfiddle.com/#!2/128cc/1/0)

在 status_code 中识别包含 NULL 值的行的最佳方法是什么？（在数据集中，有问题的行对是 #1 和 #2，我需要识别 #2，因为它是这对的 NULL 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:32:54.057

```
DELETE FROM delnull NATURAL JOIN (

  -- find all those groups that have both a NULL and a non-NULL record
  SELECT   process_id, somedate, status_desc
  FROM     delnull
  GROUP BY process_id, somedate, status_desc
  HAVING   SUM(status_code IS NOT NULL) AND SUM(status_code IS NULL)

) t WHERE delnull.status_code IS NULL 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T15:19:20.087

使用子查询查找重复项：

```
delete from `delnull` dn1
where dn1.status_code is null
and (
  select count(*) 
  from `delnull` dn2
  where dn2.id = dn1.id
  and dn2.process_id = dn1.process_id
  and dn2.somedate = dn1.somedate
  and dn2.status_code = dn1.status_code
   ) = 2 
```

# objective-c - 使用 deleteRowsAtIndexPaths 后 indexPath 未更新

> ID：13346282
> 
> 赞同：10
> 
> 时间：2012-11-12T15:15:00.470
> 
> 标签：objective-c, uitableview

我创建了一个方法，当用户想要删除一个单元格时更新我的​​ UITableView。

```
-(void)removeMoreFriendsRow:(NSNotification *)notification {
NSDictionary *d = [notification userInfo];
NSIndexPath *index = [d objectForKey:@"indexPath"];

[self.p_currentFriends removeObjectAtIndex:index.row];

[self.o_table deleteRowsAtIndexPaths:[NSArray arrayWithObject:index] withRowAnimation:UITableViewRowAnimationRight];
} 
```

p_currentFriends 是一个 NSMutableArray，它包含 UITableView 打印的所有对象。

这种方法在我使用一次时效果很好，但在我多次使用时会失败。

似乎 indexPath 在每次调用 deleteRowsAtIndexPaths 时都保持不变。

例如，

*   在第一次调用时，用户点击第二个单元格 indexPath = [0,1] 并删除正确的单元格，
*   在第二次调用时，用户点击第三个单元格和 indexPath = [0,3] 而不是 [0,2]

我发现使它起作用的唯一方法是使用 reloadData 但我想在单元格删除时制作动画。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T15:33:28.127

您所做的基本上是正确的，但是您需要以`tableView`某种方式重新加载。如果您不想重新加载整个`tableView`文件，请使用它，它也为您提供`animation`-

```
NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:sectionNum];
[self.o_table reloadSections:indexSet 
            withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-12T02:03:34.743

> **斯威夫特 2.2**

我找到的最佳解决方案是设置一个`NSTimer`并在 0.5 秒后调用重新加载数据，这为动画完成提供了足够的时间。这`Selector("loadData")`是一个方法，包含 `tableview.reloadData()`

```
_ = NSTimer.scheduledTimerWithTimeInterval(0.5, target: self, selector: Selector("loadData"), userInfo: nil, repeats: false) 
```

> **斯威夫特 3.0**

```
_ = Timer.scheduledTimer(timeInterval: 0.5, target: self, selector: #selector(ViewController.loadData), userInfo: nil, repeats: false) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-10T14:31:29.470

该`reloadSections:`方法有效，但它不会为您提供删除行的正常动画，而是使用淡入淡出动画。在 iOS 11 中，有一种新方法可以解决这个问题：

```
 [tableView performBatchUpdates:^(
  {
    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
  }
             completion:^(BOOL finished)
  {
    if( finished){ 
      [tableView reloadData];
  }
  }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:20:39.657

[您应该使用beginUpdates](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)和[endUpdates](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)包围 delteRowsAtIndexPaths: 和其他表编辑操作。这可能会解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-13T06:02:51.140

参考上面的答案，这是我的解决方案：

```
- (void)deleteRowAtIndex:(NSIndexPath *)indexPath{
    [self.dataSource.datas removeObjectAtIndex:indexPath.row];

    [self.tableView beginUpdates];
    [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationBottom];
    [self.tableView endUpdates];
    //    NSIndexSet *indexSet = [NSIndexSet indexSetWithIndex:indexPath.section];
    //    [self.tableView reloadSections:indexSet
    //                  withRowAnimation:UITableViewRowAnimationNone];
    //    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationTop];
    NSLog(@"INDEXPATH:%@",indexPath);
    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self.tableView selector:@selector(reloadData) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-04T18:41:52.747

使用以下代码，我可以正确执行此操作，但对于iOS 11 之前的版本和**iOS 11****之前**的版本，我必须单独管理它。

 **请参见以下示例：

```
if (@available(iOS 11.0, *)) { // indexPath is your needed indexPath

    [self->chatTableVC.messagesTable performBatchUpdates:^{
    [self->chatTableVC.messagesTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];

    } completion:^(BOOL finished) {
         [self->chatTableVC.messagesTable reloadData];
    }];

} else {

    [self->chatTableVC.messagesTable beginUpdates];
    [self->chatTableVC.messagesTable deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self->chatTableVC.messagesTable endUpdates];

} 
```**

# ruby-on-rails - rails json响应未呈现

> ID：13346283
> 
> 赞同：2
> 
> 时间：2012-11-12T15:15:01.843
> 
> 标签：ruby-on-rails, json

控制器应该显示不同的页面，具体取决于使用 AJAX 按下的按钮，通过 POST 请求

```
# POST /site_device/1
def show_page
     @site_device = SiteDevice.find(params[:id])
     respond_to do |format|
         format.js
         format.json { STDERR.puts "JSON!"; render 'show_page.js.erb'  }
    end
end 
```

控制器代码#show页面运行，并调用json视图模板（下）

```
<% STDERR.puts "got_here" %>
$('#device-data').html("<h1>Foo!</h1>" ).trigger('create'); 
```

我们知道上面的代码正在被调用，因为这些`STDERR`行正在服务器上输出。

在浏览器 (Chrome) 上，我们可以使用控制台来测试视图模板中的代码是否正确运行——确实如此：进入`$('#device-data').html("<h1>Foo!</h1>" ).trigger('create');`Google Chrome 控制台会导致 html 被重新渲染为“Foo！” 在正确的地方。

然而，这是令人困惑的一点。在服务器上执行的代码似乎没有在浏览器中接收到，或者如果是，它没有执行，或者没有呈现

有没有其他人有任何类似的问题/问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:27:07.993

冒险猜测一下，如果您的 ajax 函数有`dataType: 'JSON'`，它将接收但不执行响应。如果您设置`dataType: 'script'`响应将被执行。

如果这不是答案，请发布您的 ajax 函数。

# oracle - 如何加速 Hibernate 应用程序启动？

> ID：13346287
> 
> 赞同：5
> 
> 时间：2012-11-12T15:15:09.917
> 
> 标签：oracle, spring, hibernate, tomcat

当我启动一个使用 Hibernate 连接到 Oracle DB 的 Java Web 应用程序时，它会花费 20 分钟来做这样的事情

> [APPNAME] 2012 年 11 月 12 日 13:08:29.456 信息表元数据：62 - 找到表：SCHEMANAME.TABLENAMEA

问题之一是它正在从不必要的模式中查找表。

`hibernate.hbm2ddl.auto`已经设置为`none`

我正在使用休眠 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:37:54.100

您确定字符串 TABLESPACENAME 不代表模式（用户）名称吗？我从未见过以这种方式以表空间名称为前缀的表名。无论如何，如果是这种情况，那么系统可能正在查询 ALL_TABLES 而不是 USER_TABLES，或者您以具有太多权限的用户身份进行连接（例如 SELECT ANY TABLE）。

# iphone - 在 iPhone 中使用图像（普通和@2x）

> ID：13346291
> 
> 赞同：4
> 
> 时间：2012-11-12T15:15:14.060
> 
> 标签：iphone, ios, image, uiimage

所以我正在构建一个使用图像作为按钮的应用程序。我提供了普通图像和@2x 图像，但是我不完全确定应该使用哪一个。如果我使用 normal.png 或 normal@2x.png，基本上没有区别。但是我读到使用@2x 会占用更多内存，所以我觉得我不应该这样做。但是，当我在 iPad 模拟器中启动我的应用程序时，使用正常大小的图像看起来很糟糕，因为它需要调整它们的大小。当我使用@2x 图像时，它看起来很正常。那么关于我应该如何处理这个问题的任何建议？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T15:20:06.410

`.png`您应该在应用程序中和应用程序中包含图像`@2x.png`以支持 Retina 设备。这为您的用户提供了良好的用户体验。

在整个代码中，您没有明确指定`@2x`后缀，因为操作系统会为您处理好后缀。例如，如果您在项目中包含`image.png`and `image@2x.png`，并通过以下方式访问它：

```
UIImage* image = [UIImage imageNamed:@"image"]; 
```

操作系统将为您选择正确的图像（`.png`对于非视网膜设备，`@2x.png`对于视网膜设备）。只要您遵循一般的内存管理准则，您就不必担心每个内存使用情况的差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T15:28:42.017

你应该：

*   在您的应用程序中包含常规和@2X 图像。
*   完成应用程序后，检查它的内存占用情况（应用程序是否内存不足或经常收到内存警告？一旦压缩，应用程序是否会变得非常大并且需要很长时间才能满足您的口味？）
*   如果内存有问题，请开始删除 @2X 资产。您应该根据资产的大小以及调整大小后看起来更糟的程度来消除资产。例如，全屏纯色背景在调整大小时看起来不会有太大不同，并且可能会为您节省一些内存。一个带有大量复杂线条的小按钮在调整大小但不占用大量 RAM 时会看起来明显更糟。

# javascript - Fullcalendar jquery插件高度问题

> ID：13346295
> 
> 赞同：1
> 
> 时间：2012-11-12T15:15:37.073
> 
> 标签：javascript, jquery, html, css, fullcalendar

我在网页中集成了全日历，但由于某种原因，我通过插件中可用的“高度”属性应用的高度仅适用于 MonthView。

编码：

```
var calendarOptions = {
                theme: true,
                defaultView: 'agendaWeek',
                allDaySlot: false,
                allDayText: 'all-day',                
                height: ($(window).height()) - ($("div.calendarTitle").offset().top),
                firstHour: 7,
                firstDay: 1,
                slotMinutes: 30,
                defaultEventMinutes: 120,
                axisFormat: 'H:mm',
                ..... 
```

基本上，`($(window).height()) - ($("div.calendarTitle").offset().top)`旨在覆盖给定区域。

我想知道是否有其他人遇到过这个问题，或者对我如何克服它有任何想法。我想要的只是获得相同的高度，无论月视图、日视图还是周视图。

现在，周视图和日视图覆盖了页面的 70%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:22:57.760

您是否尝试过在初始化后动态设置它？

```
$('#calendar').fullCalendar('option', 'height', 700); 
```

[完整日历文档](http://arshaw.com/fullcalendar/docs/display/height/)

[*此问题的*](https://stackoverflow.com/questions/7508903/can-i-adjust-the-height-of-the-day-view-in-fullcalendar)堆栈答案中提供了另一种方法（用于 DayView） 。

您也可以为 WeekView 尝试这样的方法（最后一个条目）[*。*](http://code.google.com/p/fullcalendar/issues/detail?id=260)

# javascript - 编辑此代码以在屏幕大小而不是设备上重定向到移动站点

> ID：13346298
> 
> 赞同：0
> 
> 时间：2012-11-12T15:15:48.030
> 
> 标签：javascript

问题说明了一切，以下是我当前的重定向代码，但我想对其进行编辑，以便它在屏幕大小而不是设备上重定向。它仍然需要设置 cookie，以便用户可以返回主站点。

```
<script type="text/javascript">
var mfp_url='http://mob.visitorconversions.co.uk';
var mfp_host_name=document.location.hostname;
var mfp_request_uri=document.location.pathname;
var  mfp_no_mobile=location.search;
var mfp_cookie=document.cookie;

function mf_detect(){var  mfp_ua=navigator.userAgent.toLowerCase();var mfp_devices=['vnd.wap.xhtml+xml','sony','symbian','nokia','samsung','mobile','windows ce','epoc','opera mini','nitro','j2me','midp-','cldc-','netfront','mot','up.browser','up.link','audiovox','blackberry','ericsson','panasonic','philips','sanyo','sharp','sie-','portalmmm','blazer','avantgo','danger','palm','series60','palmsource','pocketpc','smartp hone','rover','ipaq','au- mic','alcatel','ericy','vodafone','wap1','wap2','teleca','playstation','lge','lg- ','iphone','android','htc','dream','webos','bolt','nintendo'];

for(var i in mfp_devices) {if(mfp_ua.indexOf(mfp_devices[i])!=-1){return true}}}if(mfp_no_mobile!='? nomobile=1'&&mfp_cookie.indexOf('mfp_no_mobile')==-1) {mfp_is_mobile=mf_detect();if(mfp_is_mobile){window.location=mfp_url+"? h="+mfp_host_name+"&r="+mfp_request_uri}}else{if(mfp_cookie.indexOf('mfp_no_mobile')!=-1)  {}else{mfp_cookie_expires=new   Date();mfp_cookie_expires.setTime(mfp_cookie_expires.getTime()+1000*60*60*24);document.cook    ie="mfp_no_mobile=1; expires="+mfp_cookie_expires.toGMTString()+"; path=/;"}}
</script> 
```

使用下面的答案，我现在有了这个：

```
<script type="text/javascript">
var mfp_url='http://mob.visitorconversions.co.uk';
var mfp_host_name=document.location.hostname;
var mfp_request_uri=document.location.pathname;
var  mfp_no_mobile=location.search;
var mfp_cookie=document.cookie;

function mf_detect() {
var MOBILE_WIDTH = 640;
var screenWidth = function() {
    width = null;
    if (window.screen != null) width = window.screen.availWidth;
    if (window.innerWidth != null) width = window.innerWidth;
    if (document.body != null) width = document.body.clientWidth;
    return width;
}
return screenWidth() <= MOBILE_WIDTH;
}

for(var i in mfp_devices) {if(mfp_ua.indexOf(mfp_devices[i])!=-1){return true}}}if(mfp_no_mobile!='? nomobile=1'&&mfp_cookie.indexOf('mfp_no_mobile')==-1) {mfp_is_mobile=mf_detect();if(mfp_is_mobile){window.location=mfp_url+"? h="+mfp_host_name+"&r="+mfp_request_uri}}else{if(mfp_cookie.indexOf('mfp_no_mobile')!=-1)  {}else{mfp_cookie_expires=new   Date();mfp_cookie_expires.setTime(mfp_cookie_expires. getTime()+1000*60*60*24);document.cook    ie="mfp_no_mobile=1; expires="+mfp_cookie_expires.toGMTString()+"; path=/;"}}
</script> 
```

但它似乎没有重定向任何东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:21:40.247

这段代码对我有用。如果屏幕分辨率小于 MOBILE_WIDTH，它会重定向到 http://mob.visitorconversions.co.uk?h=[referring_host]&r=[referring_path]

检查这个[jsfiddle](http://jsfiddle.net/tppiotrowski/QyFNB/)。您可能需要调整结果窗口的大小以查看重定向负载。

```
<script type="text/javascript">    
    var mfp_url = 'http://mob.visitorconversions.co.uk';
    var mfp_host_name = document.location.hostname;
    var mfp_request_uri = document.location.pathname;
    var mfp_no_mobile = location.search;
    var mfp_cookie = document.cookie;

    function mf_detect() {
        var MOBILE_WIDTH = 640;
        var screenWidth = function() {
            width = null;
            if (window.screen != null) width = window.screen.availWidth;
            if (window.innerWidth != null) width = window.innerWidth;
            if (document.body != null) width = document.body.clientWidth;
            return width;
        };
        return screenWidth() <= MOBILE_WIDTH;
    }

    if (mfp_no_mobile != '?nomobile=1' && mfp_cookie.indexOf('mfp_no_mobile') == -1) {
        mfp_is_mobile = mf_detect();
        if (mfp_is_mobile) {
            window.location = mfp_url + "?h=" + mfp_host_name + "&r=" + mfp_request_uri
        }
    } else {
        if (mfp_cookie.indexOf('mfp_no_mobile') != -1) {} else {
            mfp_cookie_expires = new Date();
            mfp_cookie_expires.setTime(mfp_cookie_expires.getTime() + 1000 * 60 * 60 * 24);
            document.cookie = "mfp_no_mobile=1; expires=" + mfp_cookie_expires.toGMTString() + "; path=/;"
        }
    }​
</script> 
```

# android - 我可以将内容提供程序存储在文件中吗？在安卓中

> ID：13346300
> 
> 赞同：1
> 
> 时间：2012-11-12T15:15:56.967
> 
> 标签：android, file, backup, apple-push-notifications

也许我的问题有点愚蠢，但我找不到这个答案。

我正在做的是 APNs 列表的备份。我想将 APNs 列表存储在一个文件中。我已经有了 APN 列表，但我想将此列表存储为文件而不是数据库。我的设备也需要读取这个文件才能最终加载所有列表。任何人都可以指导我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:27:19.560

好消息，您可以在 Android 上使用普通的 Java I/O 工具。以及特定于Android的。您将需要决定是使用外部存储（SD 卡）还是内部存储，或者共享首选项。

对于 Java I/O，您需要知道如何将 Java 流与文件相关联。对于诸如共享偏好之类的东西，有特定的 API。

您可以从这里的一个很好的概述开始。概念在那里，以及进一步谷歌的关键字：

[http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html](http://www.vogella.com/articles/AndroidFileBasedPersistence/article.html)

（请注意，Environment.getExternalStorageDirectory() 是正确的方法，而硬编码路径（例如 /sdcard 或 /mnt/sdcard，您可以在一些排名靠前的示例中找到）是错误的。）

# php - php中的exec python问题

> ID：13346302
> 
> 赞同：0
> 
> 时间：2012-11-12T15:16:00.600
> 
> 标签：php, python, exec, output

在php代码中`exec('python file.py 1 2',$result);`

$result 给了我 file.py 中的代码，但我需要 print 的输出。假设 file.py 做了一个附加工作。

```
var_dump($result) -> import sys print int(sys.argv[1]) + int(sys.argv[2]) 
```

代替`var_dump($result) -> 3`

使用的时候也遇到了这个问题`exec('php file.php 1 2',$result)`。

`safe_mode`已经关闭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:11:07.440

您应该更多地了解您尝试在其上执行脚本的平台。

回到问题，我猜你没有正确指向 Python 解释器的路径 - 尝试这样的事情： `exec('C:\\python27\\python.exe file.py 1 2',$output);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T19:47:00.380

`$value = exec('python /var/www/neptenderapp/upload/hough.py ' . $_FILES["file"]["name"]);`你的 python 脚本的最后输出将作为值发送到这个变量`$value`。在执行 python 脚本时，您可以在 php`exec`命令中提供 python 脚本的完整路径，并在 python 脚本`os.chdir('/var/www/upload')`的开头执行 a 。如果您有任何问题，请访问一次，[此链接](https://stackoverflow.com/questions/24304142/trying-to-execute-python-command-through-php-but-permission-errors)我记录了我如何解决与您类似的问题。如果出现进一步的问题，请继续在此处寻求更多答案。

# eclipse - Eclipse BPEL“分配”表达式无法输入

> ID：13346304
> 
> 赞同：1
> 
> 时间：2012-11-12T15:16:02.917
> 
> 标签：eclipse, bpel

我用eclipse写了一个BPEL helloworld。但是当我想编辑assign的表达式时，textarea不能输入任何东西。为什么？如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-11-20T09:27:29.867

Eclipse BPEL 设计器中有一个错误。[https://bugs.eclipse.org/bugs/show_bug.cgi?id=378997](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378997)

您可以使用旧版本的 Eclipse 来解决这个问题。

它在 Eclipse Indigo 中运行良好。

# c# - DataGridView 列排序导致 EventArgs 在双击时出错

> ID：13346306
> 
> 赞同：1
> 
> 时间：2012-11-12T15:16:11.703
> 
> 标签：c#, winforms

我的 WinForms 应用程序上有一个 datagridview，它显示了客户正在处理的案例列表。双击 datagridview 上的“CaseNo”列会打开一个特定于所选案例的新表单。双击事件代码如下：

```
private void dataGV_CellCoubleClick(object sender, DataGridCellEventArgs e)
{ 
    if (e.ColumnIndex == 0)
    {
        DataTable table = (DataTable)dataGV.DataSource;
        string strCaseNo = table.Rows[e.RowIndex][e.ColumnIndex].ToString();
        frmCase fC = new frmCase(strCaseNo);
        fC.MdiParent = this.MdiParent;
        fC.Show;
    }
} 
```

案例表格可以正常打开。但是，如果用户之前双击列标题以对 datagridview 应用排序，则双击数据行会打开错误的情况。

例如：

案例名称

1 史密斯

2琼斯

3 沃尔特

最初单击 2 将打开 Jones 的 frmCase。但是，如果您首先双击名称列按字母顺序排序，如下所示：

案例名称

2琼斯

1 史密斯

3 沃尔特

然后现在单击 2 将打开 Smith 案例（而不是应有的 Jones）。

似乎在排序后，双击一个单元格会返回先前占用该行的值（好像数据源尚未排序，即使它已在用户屏幕上排序）。

有人可以告诉我如何纠正这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:37:54.410

您正在访问基础表，而不是网格。尝试以下操作：

```
private void dataGV_CellCoubleClick(object sender, DataGridCellEventArgs e)
{ 
    if (e.ColumnIndex == 0)
    {
        string strCaseNo = ((DataGridView)sender).Rows(e.RowIndex).Cells(e.ColumnIndex).Value.ToString();
        frmCase fC = new frmCase(strCaseNo);
        fC.MdiParent = this.MdiParent;
        fC.Show;
    }
} 
```

# java - 如何为一个类型的子类实现 GWT 编辑器？

> ID：13346308
> 
> 赞同：2
> 
> 时间：2012-11-12T15:16:14.640
> 
> 标签：java, gwt, gwt-editors

假设我有一个像这样的对象层次结构：

**帐户 > 网站 > 供应**

Account 是一家实际的公司，Site 是他们拥有的建筑物，Supply 是一个`ElecSupply`或`GasSupply`。Supply 永远不会被实例化，理论上可能是一个抽象类。

我正在使用 Objectify 进行持久化，并且有一个页面显示每个站点的供应列表，无论它们是`ElecSupply`还是`GasSupply`.

现在我正在实现[GWT 编辑器框架](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiEditors)并且遇到了这个多态实体的问题。如何为这样的对象实现一个编辑器和一组子编辑器？

```
@Entity
public class Supply implements Serializable
{
    @Id
    protected Long id;
    @Embedded
    protected List<BillingPeriod> billingPeriods = new ArrayList<BillingPeriod>();

    public Supply()
    {

    }
// ...
} 
```

子类：（ElecSupply 有 5 个独特的字段，而 GasSupply 只有一个）

```
@Subclass
public class ElecSupply extends Supply implements Serializable
{
    private String profile;
    private String mtc;
    private String llf;
    private String area;
    private String core;

    public ElecSupply()
    {

    }
} 
```

* * *

```
@Subclass
public class GasSupply extends Supply implements Serializable
{
    private String mpr;

    public GasSupply()
    {

    }
// ...
} 
```

所以我想知道是否有人对这种结构有任何经验？我尝试为 and 制作单独的编辑器`ElecSupply`，`GasSupply`然后将它们显示或隐藏为编辑页面的一部分。

我正在考虑的另一种方法是使用单个编辑器（用于 Supply），然后根据我们正在编辑的对象类型加载不同的子编辑器。

任何光棚将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T10:16:16.770

我已经遇到过这种情况，并且我已经实施了以下解决方案：

*   首先创建一个名为 AbstractSubTypeEditor 的通用实用程序类，当您编辑其中一个子类对象时，它将激活一个特定的编辑器：

    ```
    import com.google.gwt.editor.client.CompositeEditor;
    import com.google.gwt.editor.client.Editor;
    import com.google.gwt.editor.client.EditorDelegate;
    import com.google.gwt.editor.client.LeafValueEditor;

    public abstract class AbstractSubTypeEditor<T, C extends T, E extends Editor<C>> implements CompositeEditor<T, C, E>, LeafValueEditor<T> {
            private EditorChain<C, E> chain;
            private T currentValue;
            private final E subEditor;

            /**
             * Construct an AbstractSubTypeEditor backed by the given sub-Editor.
             *
             * @param subEditor the sub-Editor that will be attached to the Editor
             *          hierarchy
             */
            public AbstractSubTypeEditor(E subEditor) {
                    this.subEditor = subEditor;
            }

            /**
             * Returns the sub-Editor that the OptionalFieldEditor was constructed
             * with.
             *
             * @return an {@link Editor} of type E
             */
            public E createEditorForTraversal() {
                    return subEditor;
            }

            public void flush() {
                    currentValue = chain.getValue(subEditor);
            }

            /**
             * Returns an empty string because there is only ever one sub-editor used.
             */
            public String getPathElement(E subEditor) {
                    return "";
            }

            public T getValue() {
                    return currentValue;
            }

            public void onPropertyChange(String... paths) {
            }

            public void setDelegate(EditorDelegate<T> delegate) {
            }

            public void setEditorChain(EditorChain<C, E> chain) {
                    this.chain = chain;
            }

            public void setValue(T value, boolean instanceOf) {
                    if (currentValue != null && value == null) {
                            chain.detach(subEditor);
                    }
                    currentValue = value;
                    if (value != null && instanceOf) {
                            chain.attach((C)value, subEditor);
                    }
            }
    } 
    ```

*   现在您可以为 Supply 创建一个编辑器，其中包含两个子编辑器和两个 AbstractSubTypeEditor（每个子类型一个）：

    ```
    public class SupplyEditor extends Composite implements Editor<Supply> {

            public class ElecSupplyEditor implements Editor<ElecSupply> {
                    public final TextBox profile = new TextBox();
                    public final TextBox mtc = new TextBox();
                    public final TextBox llf = new TextBox();
                    public final TextBox area = new TextBox();
                    public final TextBox core = new TextBox();
            }
            @Ignore
            final ElecSupplyEditor elecSupplyEditor = new ElecSupplyEditor();
            @Path("")
            final AbstractSubTypeEditor<Supply, ElecSupply, ElecSupplyEditor> elecSupplyEditorWrapper = new AbstractSubTypeEditor<Supply, ElecSupply, SupplyEditor.ElecSupplyEditor>(elecSupplyEditor) {
                    @Override
                    public void setValue(final Supply value) {
                            setValue(value, value instanceof ElecSupply);
                            if (!(value instanceof ElecSupply)) {
                                    elecSupplyEditor.profile.setVisible(false);
                                    elecSupplyEditor.mtc.setVisible(false);
                                    elecSupplyEditor.llf.setVisible(false);
                                    elecSupplyEditor.area.setVisible(false);
                                    elecSupplyEditor.core.setVisible(false);
                            } else {
                                    elecSupplyEditor.profile.setVisible(true);
                                    elecSupplyEditor.mtc.setVisible(true);
                                    elecSupplyEditor.llf.setVisible(true);
                                    elecSupplyEditor.area.setVisible(true);
                                    elecSupplyEditor.core.setVisible(true);
                            }
                    }
            };

            public class GasSupplyEditor implements Editor<GasSupply> {
                    public final TextBox mpr = new TextBox();
            }
            @Ignore
            final GasSupplyEditor gasSupplyEditor = new GasSupplyEditor();
            @Path("")
            final AbstractSubTypeEditor<Supply, GasSupply, GasSupplyEditor> gasSupplyEditorWrapper = new AbstractSubTypeEditor<Supply, GasSupply, SupplyEditor.GasSupplyEditor>(gasSupplyEditor) {
                    @Override
                    public void setValue(final Supply value) {
                            setValue(value, value instanceof GasSupply);
                            if (!(value instanceof GasSupply)) {
                                    gasSupplyEditor.mpr.setVisible(false);
                            } else {
                                    gasSupplyEditor.mpr.setVisible(true);
                            }
                    }
            };

            public SupplyEditor () {
                    final VerticalPanel page = new VerticalPanel();
                    page.add(elecSupplyEditor.profile);
                    page.add(elecSupplyEditor.mtc);
                    page.add(elecSupplyEditor.llf);
                    page.add(elecSupplyEditor.area);
                    page.add(elecSupplyEditor.code);
                    page.add(gasSupplyEditor.mpr);
                    initWidget(page);
            }
    } 
    ```

这应该根据您正在编辑的子类显示/隐藏您的字段，并将属性绑定到好的字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:46:20.800

你可以让你的 SupplyEditor 实现`ValueAwareEditor<Supply>`。

这样，编辑器框架将向您传递正在编辑的实际值`setValue(Supply supply)`；在实施过程中，`setValue(Supply supply)`您可以检查供应的类型并选择显示/隐藏任何其他相关字段。

# facebook - 405 Method Not Allowed 该资源不允许使用 POST 方法 appengine facebook App

> ID：13346309
> 
> 赞同：3
> 
> 时间：2012-11-12T15:16:23.373
> 
> 标签：facebook, google-app-engine, http-status-code-405

我在 appengine 上做一个应用程序，它在那里工作得很好。我在 facebook 画布 url [http://xx.appspot.com/yyy/](http://xx.appspot.com/yyy/)上有应用程序的 URL （带有斜杠），当从[http 调用应用程序时： //apps.facebook.com/appname](http://apps.facebook.com/appname)我得到

> 405 Method Not Allowed 该资源不允许使用 POST 方法。
> 
> class MainHandler(webapp2.RequestHandler): def get(self): #do stuff here def post(self): pass
> 
> app = webapp2.WSGIApplication([ ('/yyy/', MainHandler), ('/',anotherHandler),
> 
> ]，调试=真）

注意：appengine 日志中没有这样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:31:51.523

它正在尝试向您的应用程序发送 POST，但您没有配置处理程序来接收它。

你的`GET`处理程序在哪里：

```
 def get(self):
     dostuff 
```

你还需要有一个`POST`hander：

```
def post(self):
    dostuff 
```

从我上次看到这个时的记忆来看，它可能正在尝试完成授权过程中的一个步骤或向您发送一些数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-19T16:21:36.007

再会 ！

看来我终于弄清楚我的问题是什么了。我在应用程序中定义了 post 方法，正如 Paul C（这是正确的）所提到的，但我仍然收到相同的 405 错误消息。原因是，我没有更新从 appengine 仪表板运行的应用程序的默认版本并更新了我的应用程序版本。

如果您有同样的问题，请确定您使用的是哪个版本的应用程序。 [https://appengine.google.com/deployment?app_id=s~APP_ID&version_id=default](https://appengine.google.com/deployment?app_id=s~APP_ID&version_id=default)：

我希望没有人会经历与我相同的经历。谢谢大家。

# oracle - 为什么 Oracle 给我一个“缺少右括号”错误？

> ID：13346310
> 
> 赞同：1
> 
> 时间：2012-11-12T15:16:29.410
> 
> 标签：oracle, compiler-errors

我有一些我以前从未见过的东西。这是 SELECT 语句的片段：

```
FROM CustomerTable@pgr C
... (lots of stuff) ...
LEFT OUTER JOIN PRPC.OrderTable@pgr T1
  ON T1.CompanyID = C.CompanyID 
  AND COALESCE(T1.CustomerID, C.CustomerID) = C.CustomerID
LEFT OUTER JOIN PRPC.OrderTable@pgr T2
  ON T2.CompanyID = C.CompanyID 
  AND COALESCE(T2.CustomerID, C.CustomerID) = C.CustomerID
  AND T2.OrderDate > T1.OrderDate
EFT OUTER JOIN ... (more stuff) 
```

查询给了我一个错误：

```
ORA-00907: missing right parenthesis
ORA-02063: preceding line from PGR
00907.00000 - "missing right parenthesis" 
```

这是真正奇怪的部分：如果我注释掉该行`AND T2.OrderDate > T1.OrderDate`，错误就会消失。我根本不明白这会如何影响括号？

另一件事：如果我直接在 PGR 数据库上运行它，我不会收到错误（但直接在数据库上运行它不是应用程序的这一部分的选项）。

我在这个网站上阅读了一些关于“*缺少右括号*”的其他问题，但它们似乎都实际上涉及括号。我完全迷失了这个。（PS - 我是手动输入的，而不是复制/粘贴，所以如果有任何拼写错误，那就是我，而不是代码）

# jsp - jsp文件拆分后“模板文本中不允许使用#{..}”

> ID：13346311
> 
> 赞同：0
> 
> 时间：2012-11-12T15:16:30.503
> 
> 标签：jsp, jsf

我正在使用一个

```
<s:radio  list="#{'used': 'Mark as used', 'available': 'Mark as available'}" name="selections" value="%{'used'}"></s:radio> 
```

index.jsp 页面中的标签，它可以正常工作。

如果我在另一个 .jsp 页面中包含相同的代码，该页面随后包含在初始 index.jsp 文件中，则会收到以下错误：

```
17:01:25,564 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: /voucher.jsp(20,26) #{..} is not allowed in template text
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:102)
    at org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:711)
    at org.apache.jasper.compiler.Node$ELExpression.accept(Node.java:935)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338)
    at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2388)
    at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2394)
    at org.apache.jasper.compiler.Node$Root.accept(Node.java:489)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338)
    at org.apache.jasper.compiler.Validator.validate(Validator.java:1737)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:178)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:306)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:286)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:273)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:316)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:557)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:481)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:63)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
    at java.lang.Thread.run(Thread.java:662)
17:01:25,565 ERROR [[jsp]] Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: /voucher.jsp(20,26) #{..} is not allowed in template text
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:40)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:407)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:102)
    at org.apache.jasper.compiler.Validator$ValidateVisitor.visit(Validator.java:711)
    at org.apache.jasper.compiler.Node$ELExpression.accept(Node.java:935)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338)
    at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2388)
    at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2394)
    at org.apache.jasper.compiler.Node$Root.accept(Node.java:489)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2338)
    at org.apache.jasper.compiler.Validator.validate(Validator.java:1737)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:178)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:306)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:286)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:273)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:566)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:316)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:654)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:557)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:481)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.index_jsp._jspService(index_jsp.java:63)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:373)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:336)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:265)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:73)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:179)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
    at java.lang.Thread.run(Thread.java:662) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:37:06.673

您需要`<s:xxx>`在 JSP 顶部声明 taglib。否则，`<s:radio>`将不会被识别为完全有价值的标签，而只会被解释为模板文本。

### 也可以看看：

*   [#{...} 不允许出现在模板文本中](https://stackoverflow.com/questions/12478640/is-not-allowed-in-template-text)

# linux - 无法在 LINUX 中的 C++ 中将 STRING 转换为 INT

> ID：13346313
> 
> 赞同：2
> 
> 时间：2012-11-12T15:16:37.003
> 
> 标签：linux, string, int, atoi

我尝试了很多方法，详见此处：[http ://www.cplusplus.com/forum/general/13135/](http://www.cplusplus.com/forum/general/13135/)

如果我在 Windows 上运行文件，它们中的大多数都可以工作，但是当我尝试在 LINUX 上这样做时，它们都不起作用。例如，我尝试这样做：

```
 string str = "123";
  int sp;
  istringstream ( str ) >> sp; 
```

但它给了我错误：“不完整类型'struct std::istringstream'/usr/include/c++/4.4/iosfwd:67的无效使用：错误：'struct std::istringstream'的声明”

其他选项是“atoi”，但它表示“atoi 未在此范围内定义”。

任何想法为什么会发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:21:32.023

至于 atoi() 函数，您需要包含 cstdlib ( `#include <cstdlib>`) 标头。

那么你可以像这样使用它：

```
string str= "123"; 
int sp = atoi(str.c_str()); 
```

它将告诉字符串对象充当指向 C 风格字符串的 const char* （最有可能被称为带有零终止符 \0 的字符串）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T15:23:30.310

POSIX 的隐蔽`std::string`方式`int`将是`atoi()`

```
#include <cstdlib>
...
string str = "123";
int sp = atoi( str.c_str() ); 
```

如果您不仅要转换`int`为多种类型，而且要转换为多种类型，最好使用`stringstream`. 但是，请注意增加的编译时间。

# python - 使用 train_test_split 的一个命令创建数据集的多重拆分

> ID：13346318
> 
> 赞同：2
> 
> 时间：2012-11-12T15:16:46.427
> 
> 标签：python, numpy, machine-learning, scikit-learn

*   我的数据集有`42000`行
*   我需要将数据`training, cross-validation and test`集分成具有`60%, 20% and 20%`. 这是根据 Andrew Ng 教授在他的 ml-class 讲座中的建议。
*   我意识到 scikit-learn 有一种方法[train_test_split](http://scikit-learn.org/stable/modules/generated/sklearn.cross_validation.train_test_split.html#sklearn.cross_validation.train_test_split)可以做到这一点。但我不能让它工作，这样我就可以像`0.6, 0.2, 0.2`在一个班轮命令中那样得到分裂

我所做的是

```
# split data into training, cv and test sets
from sklearn import cross_validation
train, intermediate_set = cross_validation.train_test_split(input_set, train_size=0.6, test_size=0.4)
cv, test = cross_validation.train_test_split(intermediate_set, train_size=0.5, test_size=0.5)

# preparing the training dataset
print 'training shape(Tuple of array dimensions) = ', train.shape
print 'training dimension(Number of array dimensions) = ', train.ndim
print 'cv shape(Tuple of array dimensions) = ', cv.shape
print 'cv dimension(Number of array dimensions) = ', cv.ndim
print 'test shape(Tuple of array dimensions) = ', test.shape
print 'test dimension(Number of array dimensions) = ', test.ndim 
```

让我得到结果

```
training shape(Tuple of array dimensions) =  (25200, 785)
training dimension(Number of array dimensions) =  2
cv shape(Tuple of array dimensions) =  (8400, 785)
cv dimension(Number of array dimensions) =  2
test shape(Tuple of array dimensions) =  (8400, 785)
test dimension(Number of array dimensions) =  2
features shape =  (25200, 784)
labels shape =  (25200,) 
```

如何在一个命令中完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:04:37.630

[阅读train_test_split](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/cross_validation.py#L1264)及其配套类[ShuffleSplit](https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/cross_validation.py#L707)的源代码，并使其适应您的用例。不是很大的功能，应该不会很复杂。

# java - 为什么它会跳过 if 块

> ID：13346320
> 
> 赞同：0
> 
> 时间：2012-11-12T15:16:49.790
> 
> 标签：java, android

为另一个新手问题道歉。我的 MainActivity 中有这段代码应该检查用户并根据 if else 语句返回适当的活动。问题是它跳过了 if 块，我不知道为什么。我所知道的是 getID 函数在其他类上运行良好。谢谢您阅读此篇。

```
public class MainActivity extends Activity {

    UserFunctions userFunctions;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        userFunctions = new UserFunctions();

        super.onCreate(savedInstanceState);        
        setContentView(R.layout.main);        

        UserFunctions fn = new UserFunctions();
        String id = fn.getID(getApplicationContext());

        if("100".equals(id)){

            Intent in = new Intent(getApplicationContext(), AdminActivity.class);           
            startActivity(in);          
            finish();

        }else{

            Intent in = new Intent(getApplicationContext(), UserActivity.class);                        
            startActivity(in);      
            finish();

        }
    }
} 
```

用户函数类

```
/* Get user ID from DatabaseHandler */
    public String getID(Context context) {
        String id = "";
        DatabaseHandler db = new DatabaseHandler(context);
        Cursor cursor = db.getUserID();

        if(cursor != null) {
            while(cursor.moveToNext()) {
                id = cursor.getString(0);
            }
        } else {
            id = "";
        }

        cursor.close();
        db.close();
        return id;
    } 
```

数据库处理程序类

```
/* Get user ID from the database */
    public Cursor getUserID() {
        String qry = "SELECT id FROM " + TABLE_LOGIN;
        SQLiteDatabase db = this.getReadableDatabase();     
        Cursor cursor = db.rawQuery(qry, null);     
        return cursor;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:33:03.140

您的 getID() 方法总是返回数据库中最后一个用户的 ID。该用户不是 id=="100" 因为您的 if 语句评估为假。

在 getUserID 中，您选择登录表中的所有记录。然后：

```
if(cursor != null) {
    while(cursor.moveToNext()) {
        id = cursor.getString(0);
    }
} else {
    id = "";
} 
```

如果有用户，则返回最后一个的ID，如果没有用户，则返回""。

# git - 一个 git-svn 结帐特性

> ID：13346322
> 
> 赞同：2
> 
> 时间：2012-11-12T15:16:53.563
> 
> 标签：git, git-svn

我的 git-svn 工作流程如下：

生产代码进入 master，我在 master 中执行 git svn dcommits/rebase。我在功能/主题分支上工作，并继续 rebase -i 到 master 和 merge，直到我准备好将它们带入 master 并随后使用 dcommit 推送到 svn trunk。

*我通常`git checkout -`可以检查我所在的上一个分支。*

但是由于某种原因，当我这样做时`git svn rebase`，然后尝试 git checkout 到我以前的分支，它不起作用（它只是停留在 master 中）。也就是说，假设我这样做：

```
(master)$ git checkout -b my-feature-branch 
```

我在那个分支上做了一些工作，然后提交

```
(my-feature-branch)$ git commit -am "Some work" 
```

然后我想引入最新的更改，并快速更改回我的分支：

```
(my-feature-branch)$ git checkout master
(master)$ git svn rebase 
```

这会将最新的 svn trunk 更改带入 master。现在我只想快速切换回我的主题分支。

```
(master)$ git checkout - 
```

此时，分支结帐保持为主。我猜某种操作正在从我工作的最后一个分支中弹出，但我不知道内部结构以确定这一点。

所以我的问题是，有人知道这是为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T03:25:13.213

这实际上似乎与 git-svn 没有任何关系，只是在 git 中变基的副作用。A`git rebase`似乎意味着重新检查当前分支。要向您自己证明这一点，请使用以下命令：

```
$ git checkout master
$ git checkout HEAD~1
 # A bunch of stuff about being in detached HEAD mode.
$ git checkout -b foo
$ git rebase master
$ git checkout -
 Already on 'foo' 
```

这是因为`git rebase`分离 HEAD 使用`git checkout -q "$onto^0"`. 如果您在运行上述命令后检查 .git/logs/HEAD，您将看到状态为“从 foo 移动到 876AF98”的条目，然后是“rebase 完成：返回到 refs/heads/foo”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T03:29:26.130

当您运行时`git checkout -`，`git`请查阅文件`.git/logs/HEAD`以找到您签出的最后一个分支。

当您运行时`git svn rebase`，这会触发命令中的`cmd_rebase`函数，该函数`git-svn`依次调用：

```
command_noisy(rebase_cmd(), $gs->refname); 
```

这调用`rebase_cmd`，如下所示：

```
sub rebase_cmd {
        my @cmd = qw/rebase/;
        push @cmd, '-v' if $_verbose;
        push @cmd, qw/--merge/ if $_merge;
        push @cmd, "--strategy=$_strategy" if $_strategy;
        push @cmd, "--preserve-merges" if $_preserve_merges;
        @cmd;
} 
```

所以`git`这个链构建的命令行看起来像：

```
git rebase $gs->refname 
```

（其中`$gs->refname`将替换为分支名称。）从`git-rebase`手册页中：

> 如果指定了 <branch>，git rebase 将在执行任何其他操作之前执行自动 git checkout。否则它会保留在当前分支上。

由于该`rebase`命令指定了一个分支名称，因此执行一个结帐，*即使您已经在该分支上，它也会*`rebase`附加一个条目。这就是为什么运行后的目标不是您所期望的。`.git/logs/HEAD` *`git checkout -``git svn rebase`*

 ***更新**我可能对*为什么*rebase 执行结帐是错误的，但是如果您检查`.git/logs/HEAD`，您可以清楚地看到 rebase*正在*执行（多个）结帐。例如，如果我有一个分支`master`和一个分支`b1`（来自`master`），然后执行以下操作：

```
git checkout master
git rebase b1 
```

我最终在日志中得到以下内容：

```
6240c11... c4bfd14... Lars Kellogg-Stedman <lars@example.com> 
  1352952244 -0500  checkout: moving from b1 to master
c4bfd14... 6240c11... Lars Kellogg-Stedman <lars@example.com> 
  1352952260 -0500  checkout: moving from master to 6240c1154706c675d19d771ad36aebc2658a5df8^0
6240c11... 6240c11... Lars Kellogg-Stedman <lars@example.com> 
  1352952260 -0500  rebase finished: returning to refs/heads/master 
```*

# ruby - Ruby 1.9.3 在 Ubuntu 12.04 上的成熟度如何

> ID：13346323
> 
> 赞同：0
> 
> 时间：2012-11-12T15:16:58.610
> 
> 标签：ruby, ruby-1.9, ruby-1.9.3

有没有人有一个很好的指南来在使用 RVM 的 Ubuntu 上安装 ruby​​ 1.9.3？我已经在 1.8.7 中开发了大约一年，我想升级到 1.9.x。

在花了无数个小时尝试安装 1.9 之后，我遇到了一个我不想在我的四台生产服务器上复制的挫折/复杂性。

在我尝试让 1.9 与 Aptana Studio 一起工作失败后，我将其删除，但是 /usr/local/bin 中的一堆脚本仍然引用 ruby​​ 1.9。

这是一团糟吗？还是因为我是新手而感觉一团糟？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:14:48.423

您能否具体说明您在安装 Ruby 1.9.3 时遇到的问题？我已经将它安装在我的 Linux Mint 系统（基于 Ubuntu）上，无论是使用源代码还是`rvm`源代码，都没有任何问题。

Ruby 略微偏向于 Unix——在 Windows 上安装比在 Linux 上安装更有可能出现问题。在 Ubuntu 上安装 Ruby 通常是一种流畅的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:26:35.517

我经常在 CentOS 主机上从源代码安装 Ruby，如果出现问题，它就会出现。

Ruby 1.9+ 可以轻松安装。通常，我会使用 Centos 的发行版安装标准 Ruby，它会加载所有先决条件，然后使用标准的`make`.

否则，既然你已经使用了 RVM，请询问它你需要什么先决条件，然后从你的包管理器中安装它们，并从源代码编译 Ruby。

这是我编写的一个小 shell 脚本，用于加快我们的某些盒子的进程：

```
#!/bin/sh

echo "Installing Ruby's prerequisites"
sudo yum install -y gcc-c++ patch readline-devel readline zlib-devel zlib libyaml-devel libffi-devel openssl-devel iconv-devel

echo "Installing Nokogiri's prerequisites"
sudo yum install -y ruby-devel libxml2-devel libxml2 libxslt-devel libxslt 

echo "Installing MySQL/Sequel's development prerequisites"
sudo yum install -y mysql-devel freetds-devel freetds

echo "Now install Ruby from http://www.ruby-lang.org/en/downloads/ then run..."
echo sudo gem install \
amqp \
awesome_print \
bunny \
colors \
columnize \
debugger \
highline \
ipaddress \
irbtools \
mysql2 \
net-scp \
net-sftp \
net-ssh \
netaddr \
nokogiri \
pry \
rails \
sequel \
sinatra \
tiny_tds \ 
```

# c# - 控制台输出格式和控制台分配

> ID：13346326
> 
> 赞同：2
> 
> 时间：2012-11-12T15:17:08.083
> 
> 标签：c#, console-application

我有几个问题都与作为控制台应用程序运行的 Windows 应用程序有关。

在我的程序入口点中，我有逻辑来确定是否正在传递命令行参数，如果是，我调用**AllocConsole()**。这工作得很好，但我很好奇是否可以不弹出一个新的控制台窗口。所以期望用户将从命令窗口调用它，所以我希望应用程序的输出进入用户当前正在工作的窗口，而不是其他屏幕。此外，通过**AllocConsole()弹出的控制台窗口**不够用户友好。例如，如果用户输入错误的参数，新窗口将打开，通知用户他们的错误，然后用户必须回到原来的窗口来修复错误，然后再次运行命令。基本上我正在寻找更传统的命令行体验。在我的情况下这可能吗？

下一个问题与格式化控制台输出有关。我已经阅读了关于 SO 和 MSDN 的几篇文章，但我似乎找不到一个好的答案。我目前正在做这样的事情：

```
 Console.WriteLine("{0,0}\t\t{1,10}", item.Key, item.Value); 
```

这工作得很好，但 item.Value 中的值完全有可能有几行长，因此包含几行。我正在寻找一种更传统的“表格”布局，其中 item.Value 的文本仍将换行，但仅限于其自己的列，而不是在 item.Key 的值下方换行。这是可能的，如果是的话，最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:21:00.230

我认为[AttachConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681952%28v=vs.85%29.aspx)是您正在寻找的。[Pinvoke - AttachConsole](http://www.pinvoke.net/default.aspx/kernel32.attachconsole)包含正确的签名和示例。从 www.pinvoke.net 复制的签名如下：

```
[DllImport("kernel32.dll", SetLastError = true)]
  static extern bool AttachConsole(uint dwProcessId);

...(!AttachConsole(ATTACH_PARENT_PROCESS)... 
```

# jquery - 从文件中读取 JSON

> ID：13346332
> 
> 赞同：2
> 
> 时间：2012-11-12T15:17:24.027
> 
> 标签：jquery, json

您好，我有一个 json 文件，其中包含以下数据并称为 textareasdata：

```
[
{"Select":"11","PhotoCount":"12"},
{"Select":"21","PhotoCount":"22"}
] 
```

所以我想在我的 html 页面的 div 元素中显示第一个 Select 和 PhotoCount，我正在使用以下函数：

```
function fncLoadData(){

        $.getJSON('textareasdata.json', function(data) {
                        //alert(data);
            $("#txtTextArea").html(data);

        });
} 
```

它在警告框中显示 [object Object]。请问我该怎么做，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:19:57.193

```
function fncLoadData() {
    $.getJSON('textareasdata.json', function(data) {
        var firstSelect = data.shift();
        $("#txtTextArea").html(firstSelect.Select + " " + firstSelect.PhotoCount);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:19:31.787

你有

```
[ // <-- array of
{"Select":"11","PhotoCount":"12"}, // <-- objects
{"Select":"21","PhotoCount":"22"}
] 
```

因此，要获取第一个对象，请使用 [index] - 数组索引为零

```
data[0].Select  // get first select
data[0].PhotoCount  // get first photocount 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T15:20:13.207

```
$("#yourDIV").html(data[0].Select+data[0].PhotoCount); 
```

# c - asprintf 为 realloc 覆盖内存

> ID：13346334
> 
> 赞同：2
> 
> 时间：2012-11-12T15:17:26.207
> 
> 标签：c, printf, realloc

`asprintf`我有以下代码在同时使用和时不起作用`realloc`。

我得到的错误是：

```
*** glibc detected *** a.out: realloc(): invalid old size: 0x006f1430 *** 
```

根据我的研究，当我使用`asprintf`它时，它看起来会覆盖一些`realloc`使用的内存。这对我来说没有意义，因为`asprintf`它应该是安全的并且使用适当的字符串长度动态分配。不使用`asprintf`会导致程序运行良好，但我需要`asprintf`我的项目的功能。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main() {
  int ifCount = 1;
  int stringCount = 1;
  char** IFs = NULL;

  //Broken code
  char* message;
  asprintf(&message, "Hello: %d", stringCount);

  //Working code, but not the alternative I want to take
  //char* message = "Hello";

  IFs = (char**) realloc(IFs, sizeof(char*) * ifCount);
  IFs[ifCount - 1] = (char*) realloc(IFs[ifCount - 1], sizeof(char) * strlen(message));
  strcpy(IFs[ifCount - 1], message);

  printf("Message: %s\n", message);
  printf("Copy: %s\n", IFs[ifCount - 1]);
  free(message);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:20:28.983

这：

```
IFs[ifCount - 1] = (char*) realloc(IFs[ifCount - 1], sizeof(char) * strlen(message)); 
```

正在将未初始化的指针传递给`realloc()`，这是错误的原因。

还：

1.  请记住，字符串需要终止空间，上面分配的`strlen(message)`字符太少了 1。这将导致`strcpy()`复制时缓冲区溢出。
2.  请记住`realloc()`，像所有分配堆内存的函数一样，可能会失败。这也是真的`asprintf()`。
3.  [不要强制转换`realloc()`in C](https://stackoverflow.com/a/605858/28169)的返回值。
4.  避免`sizeof (char)`，因为它始终为 1，它为代码增加的价值很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:25:17.440

不要使用`realloc`或未`NULL`初始化的第一个参数，只需使用`malloc`开头。

如果在`realloc`调用中需要`IFs[ifCount - 1] = (char*) realloc(...)`调用，则在前一行中使用`calloc`- 这将至少将分配的内存清零，以便`realloc`获得正确的`NULL`指针。

# javascript - 具有多个 URL 的 get.JSON

> ID：13346342
> 
> 赞同：0
> 
> 时间：2012-11-12T15:17:44.597
> 
> 标签：javascript, json, parsing, url

我现在正在使用 get.JSON 从 Foursquare API 获取数据（准确地说是 venue_history，不需要授权）。我能够从多个 URL 获取 json 数据。有人告诉我这样做的方式不是一种非常有效的方法，我的同事提到了将 URL 放入数组并添加计数器以便分别解析每个 URL 的事情？我想使用来自每个 URL 的数据来可视化它（还没有到那个阶段，还有很长的路要走！）。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(document).ready(function(){
  $("button").click(function(){
    $.getJSON('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108',
    function(data){
      console.log(data);

   $.getJSON('https://api.foursquare.com/v2/users/1050511?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121109',
   function(data){
      console.log(data);

   $.getJSON('https://api.foursquare.com/v2/users/1050511?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121109',
   function(data){
      console.log(data);

   $.getJSON('https://api.foursquare.com/v2/users/1050511?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121109',
   function(data){
      console.log(data);

          });
        });
      });
    });
  });
});
</script>
</head>
<body>

<button>Send an HTTP POST request to a page and get the result back</button>

</body>
</html> 
```

我的问题是，我怎样才能以更有效的方式做到这一点？

非常感谢！

这是我的新代码：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>
$(document).ready(function () {
  $("button").click(function GetJSONResult(url)
{
  $.getJSON(url,
   function(data){
    console.log(data);
    });
} 

GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');

});
</script>
</head>
<body>

<button>Send an HTTP POST request to a page and get the result back</button>

</body>
</html> 
```

它一直说“意外的标识符”，我相信这是因为我把所有的“GetJSONResult”都放在了错误的地方。当它位于代码底部不在函数内时，它告诉我 GetJSONResult 未定义？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:21:18.277

只需创建一个函数

```
function GetJSONResult(url)
{
  $.getJSON(url,
  function(data){
    console.log(data);
   });
} 
```

并使用它调用它

```
GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108'); 
```

或者，如果您想使用帖子中提到的数组：

```
var urls = ['https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108',
'https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108',
'https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108']

for (var i=0;i<urls.length;i++)
{ 
    GetJSONResult(urls[i]);
} 
```

在您发布的脚本块中，它看起来像这样

```
 <script type="text/javascript">
 $(document).ready(function () {
 $("button").click(function(){
   GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
   GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
   GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
   GetJSONResult('https://api.foursquare.com/v2/users/self/venuehistory?oauth_token=2ZO1PQOUAD5SXRAJOLZVH53RBQ1EB2C23FE2GUZLJYQUJ3SY&v=20121108');
   });
});

function GetJSONResult(url)
{
   $.getJSON(url,
    function(data){
     console.log(data);
    });
}   
 </script> 
```

# asp.net - 如何将数据表中的日期读入文本框

> ID：13346346
> 
> 赞同：0
> 
> 时间：2012-11-12T15:17:55.253
> 
> 标签：asp.net, datatable

我在 DataTable (dt) 中有一个日期。如何将数据表中的日期读入文本框

我可以很好地读取一个字符串：

```
 tbEvent.Text = dt.Rows[0].Field<String>(0); 
```

我试过这个，但我得到一个错误：

> 无法将“System.DateTime”类型的对象转换为“System.String”类型。

```
 tbDate.Text = dt.Rows[0].Field<DateTime>(1); 
```

敬茶

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:19:27.300

尝试

```
 tbDate.Text = dt.Rows[0].Field<DateTime>(1).ToString(); 
```

`Textbox.Text`只接受字符串值 - 所以你需要转换。

**更新**

要格式化字符串以显示特定值，您可以使用自定义格式字符串 - [http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

所以上面变成了

```
 tbDate.Text = dt.Rows[0].Field<DateTime>(1).ToString("dd/MM/yyyy"); 
```

对于分贝日期`12/23/2012 12:25:45`，它将产生`23/12/2012`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-13T08:06:17.863

我一直在努力在我的文本框中正确添加我的日期，但最终想通了

Convert.ToDateTime(dataRow[3].ToString()).ToString("MM/yyyy/dd").ToString();

我将格式更改为 ("MM/yyyy/dd") 而不是 ("yyyy/MM/dd")

# powershell - 获取分发列表的所有成员，包括邮件联系人

> ID：13346351
> 
> 赞同：0
> 
> 时间：2012-11-12T15:18:20.660
> 
> 标签：powershell

我编写了一个小的 powershell 脚本来输出所有分发列表的所有成员（包括动态的）。

```
$output = ""
$DLList = get-distributiongroup
foreach ($DL in $DLList) {
    $Dmember=get-distributiongroupmember $DL
    $Dname=$DL.name
    write-output "$Dname"
$output += "$Dname`r`n"
    foreach ($Member in $Dmember) {
        $MName=$Member.DisplayName
        write-output "-$MName"
    $output += "-$MName`r`n"
     }
     write-output ""
 $output += "`r`n"
}
$DDLList = get-dynamicdistributiongroup
foreach ($DL in $DDLList) {
    $Dmember=get-Recipient -Filter $DL.RecipientFilter
    $Dname=$DL.name
    write-output "$Dname"
$output += "$Dname`r`n"
    foreach ($Member in $Dmember) {
        $MName=$Member.DisplayName
        write-output "-$MName"
    $output += "-$MName`r`n"
    }
    write-output ""
$output += "`r`n"
}
$output | Tee-Object -file data.txt 
```

除了我的 DL 中的一个包含邮件联系人之外，这很好用。有没有办法将它们包含在上面的脚本中？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-28T21:08:05.860

如果您使用`Get-ADObject`来检索联系人，那么您可以查询他们的`MemberOf`属性。这与您想要的相反，但它有效。您可以使用此脚本，只需将`-SearchBase`值更改为您想要查看的位置：

```
Get-ADObject -Filter * -SearchBase "OU=Contacts, DC=domain, DC=com" \
-Properties * | ?{$_.MemberOf -ne $null} | Select DisplayName, MemberOf 
```

# wpf - 如何为 UIElement.Margin 上的绑定设置 FallbackValue？

> ID：13346352
> 
> 赞同：7
> 
> 时间：2012-11-12T15:18:31.603
> 
> 标签：wpf, xaml, binding, syntax

考虑以下代码：

```
<UserControl x:Name=root>
....
    <TextBlock Text="Hello World" Margin="{Binding ElementName=root, Path=LeftButtonMargin}"/>
....
</UserControl> 
```

现在，*在 Binding 上**设置的语法是什么？`FallBackvalue`*
我已经尝试了一些不同的选项，但似乎找不到正确的语法：

```
Margin="{Binding ElementName=root, Path=LeftButtonMargin, FallBackValue={}10,10,0,0}"
Margin="{Binding ElementName=root, Path=LeftButtonMargin, FallBackValue={}{10,10,0,0}}"
Margin="{Binding ElementName=root, Path=LeftButtonMargin, FallBackValue={}"10,10,0,0"}" 
```

或者这根本不可能？基本上，我在设计时需要这些值......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-08-26T06:06:31.113

更简单：使用单引号

```
Margin="{Binding ElementName=root, Path=LeftButtonMargin, FallBackValue='10,10,0,0'}" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T15:59:00.213

希望有效，

```
<UserControl.Resources>
 <Thickness x:Key="MyMargin" Bottom="5" Top="10">

 </Thickness>
<UserControl.Resources>

<TextBlock Text="Hello World" 
Margin="{Binding ...,FallBackValue={StaticResource MyMargin}}"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T16:02:05.817

这对我有用：

```
 <TextBlock Text="Hello World">
        <TextBlock.Margin>
            <Binding ElementName="root" Path="LeftButtonMargin" FallbackValue="10, 10, 0, 0" />
        </TextBlock.Margin>
    </TextBlock> 
```

但它相当大...

# css - 超级鱼的内联 CSS

> ID：13346354
> 
> 赞同：0
> 
> 时间：2012-11-12T15:18:36.890
> 
> 标签：css, drupal, superfish

我正在尝试修改我的导航栏子菜单，并且能够找到它是什么。在下面的代码中，我只需要将宽度从 12em 更改为“auto”即可修复子菜单。目前，文本与背景重叠。

```
element.style {
  float: none;
  width: 12em; 
  visibility: hidden;
  display: none;
} 
```

引用菜单的 html 文件是这样的：

```
<div class="menu-box">
<div id="menu-bar" class="nav clearfix">
<nav id="block-superfish-1" class="block block-superfish block-odd block-count-2 block-region-menu-bar menu-wrapper clearfix clearfix" role="navigation">
<h2 class="block-title element-invisible element-invisible">Main menu</h2>
<ul id="superfish-1" class="sf-menu main-menu sf-horizontal sf-style-none sf-total-items-5 sf-parent-items-4 sf-single-items-1 main menu sf-js-enabled sf-shadow">
<li id="menu-218-1" class="first odd sf-item-1 sf-depth-1 main menu list sf-total-children-1 sf-parent-children-0 sf-single-children-1 menuparent">
<a class="sf-depth-1 menuparent" href="/">Home</a>
<ul style="float: none; width: 12em; display: none; visibility: hidden;">
</li>
<li id="menu-409-1" class="middle even sf-item-2 sf-depth-1 main menu list sf-total-children-2 sf-parent-children-0 sf-single-children-2 menuparent">
<a class="sf-depth-1 menuparent" href="/%3Cnolink%3E">What's exciting us</a>
<ul style="float: none; width: 12em; visibility: hidden; display: none;">
<li id="menu-411-1" class="first odd sf-item-1 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<a class="sf-depth-2 " href="/around-the-globe" style="float: none; width: auto;">Innovative ideas from around the globe</a>
</li>
<li id="menu-410-1" class="last even sf-item-2 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<a class="sf-depth-2 " href="/showcased-ideas" style="float: none; width: auto;">Showcased ideas from within the community</a>
</li>
</ul>
</li>
<li id="menu-412-1" class="middle odd sf-item-3 sf-depth-1 main menu list sf-total-children-3 sf-parent-children-0 sf-single-children-3 menuparent">
<a class="sf-depth-1 menuparent" title="" href="/%3Cnolink%3E">Shared insight</a>
<ul style="float: none; width: 12em; visibility: hidden; display: none;">
<li id="menu-413-1" class="first odd sf-item-1 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<a class="sf-depth-2 " href="/expert-panel" style="float: none; width: auto;">Expert Panel</a>
</li>
<li id="menu-414-1" class="middle even sf-item-2 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<a class="sf-depth-2 " href="/investment-community" style="float: none; width: auto;">Investment Community</a>
</li>
<li id="menu-415-1" class="last odd sf-item-3 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<a class="sf-depth-2 " title="" href="/thought-leaders" style="float: none; width: auto;">Thought Leaders</a>
</li>
</ul>
</li>
<li id="menu-420-1" class="middle even sf-item-4 sf-depth-1 main menu list sf-total-children-3 sf-parent-children-0 sf-single-children-3 menuparent">
<a class="sf-depth-1 menuparent" href="/%3Cnolink%3E">Interact</a>
<ul style="float: none; width: 12em; visibility: hidden; display: none;">
<li id="menu-421-1" class="first odd sf-item-1 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<li id="menu-758-1" class="middle even sf-item-2 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
<li id="menu-422-1" class="last odd sf-item-3 sf-depth-2 main menu list sf-no-children" style="white-space: normal; float: left; width: 100%;">
</ul>
</li>
<li id="menu-312-1" class="last odd sf-item-5 sf-depth-1 main menu list sf-no-children">
</ul>
</nav>
</div>
</div> 
```

我不知道要编辑什么样式表和哪一行。

顺便说一句，我正在使用 Drupal 7 和 superfish 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-16T02:52:14.340

这些看起来像在 Superfish 的 Supersubs 插件下设置的默认宽度。

您可以通过配置相关菜单块来编辑宽度，并在 Superfish Plugins > Supersubs 下编辑最小和最大宽度。

或者，您可以禁用 Supersubs 并在样式表中设置宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:54:26.033

有同样的问题。

我通过从模块文件夹中删除 superfish.js 来修复它。（使用版本 7.x-1.9-beta4）
否则这可能会对您有所帮助：[Superfish 下拉菜单宽度](http://drupal.org/node/1652500)

# sas - SAS EG 汇总表百分比

> ID：13346355
> 
> 赞同：2
> 
> 时间：2012-11-12T15:18:36.723
> 
> 标签：sas, enterprise-guide

当我在 EG 中使用汇总表计算某些百分比时，结果总是乘以 100（5.2% 不是显示为 0.052，而是显示为 5.2）。现在，如果我想将其显示为“5.2%”，我必须将数字除以 100，然后应用 PERCENT 格式，或者我必须将数字“放入”字符串并在末尾添加“%”符号。

有没有办法从已经除以 100（上例中为 0.052）的汇总表中获取百分比，或者有没有办法让它们显示为“5.2%”。主要目标是避免在汇总表之后的额外步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:38:11.790

一种选择是制作自己的格式。

```
proc format;
picture PCT
low-high='009.9%'(mult=10);
quit; 
```

这将采用数字 5.2 并将其显示为 5.2%。

# python - Eclipse + Python：调试期间堆栈溢出 - 不运行

> ID：13346357
> 
> 赞同：2
> 
> 时间：2012-11-12T15:18:47.150
> 
> 标签：python, eclipse, debugging, pydev, stack-overflow

*我在Eclipse*中有以下*Python*代码，在调试时会导致*堆栈溢出：*

 **```
v = ogr.Feature(layer.GetLayerDefn()) 
```

方法调用是[GDAL/OGR](http://www.gdal.org/)库的一部分，我得到的错误消息是：

```
Traceback (most recent call last):
File "C:\Users\Default\.eclipse\org.eclipse.platform_3.7.0_920333535\plugins\org.python.pydev_2.7.1.2012100913\pysrc\pydevd.py", line 963, in trace_dispatch
     return additionalInfo.CreateDbFrame((self, filename, additionalInfo, t, frame)).trace_dispatch(frame, event, arg)
RuntimeError: maximum recursion depth exceeded Fatal Python error:
Cannot recover from stack overflow.

This application has requested the Runtime to terminate it in an
unusual way. Please contact the application's support team for more
information. 
```

导致错误的代码部分是：

```
v = ogr.Feature(...) 
```

但它仅在我调试 (F11) 时发生，但在我运行 (CTRL+F11) 时不会发生。

**可能会发生什么，我能做些什么来防止这个*堆栈溢出*？****

# javascript - 日历时间表

> ID：13346359
> 
> 赞同：3
> 
> 时间：2012-11-12T15:18:49.443
> 
> 标签：javascript, ruby-on-rails-3

我有一个日历类型的日程安排，您可以借此预订时段。但是我正在尝试创建一个“下个月”按钮，以便它生成下个月。我做了以下事情：

```
<button id="nextmonth">Next month</button>

<script>
$('#nextmonth').on('click', function(e) {
   $.get('/rota_days/show.json?mon=12').success(function(data) 
    { 

    /* display response */ 

    });
});
</scirpt> 
```

或者，我确实尝试了以下操作 - `<%= link_to 'Next Month', rota_days_path(:month => 12) %>`但是我这对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:24:12.187

如果您有一个`/rota_days/show.js`要渲染的常规模板，那么您应该可以这样调用它：

```
= link_to 'Next Month', rota_days_path(:month => m), :remote => true 
```

请注意，通过 Rails UJS，link_to 和 button_to 都支持`method`允许您指定 get、post、put、delete 的选项。

确保您的路由支持您尝试链接的路由，并且您的控制器返回正确的响应。如果您仍然有问题，请发布您的控制器和模板。

# ajax - 使用 .on 在动态加载的表单上捕获提交

> ID：13346363
> 
> 赞同：0
> 
> 时间：2012-11-12T15:19:04.003
> 
> 标签：ajax, jquery

我有一个通过 ajax 加载到弹出窗口中的表单。表单定义如下：

```
<form id="generate_form" class="form" accept-charset="UTF-8" action="/tokens/create" method="POST"> 
```

我想捕获表单提交，并使用 AJAX 提交数据。所以我添加了以下脚本：

```
 $(document).ready(function () {
    $(this).on('submit','#generate-form', function (e) {
      alert('trapped?');
      return false;
    });
  }); 
```

但是，当我尝试这个时，表单事件并没有被捕获，即我从来没有看到警报对话框。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:24:23.543

由于缺少 2 个右括号，您的代码可能会中断

```
 $(document).ready(function () {
    $(this).on('submit','#generate_form', function (e) {
      alert('trapped?');
      return false;
    }); // <-- added closing parentheses
  }); // <-- added closing parentheses 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T15:28:08.277

您拼写错误`"#generate-form"`（下划线而不是破折号）并忘记了一些括号：

```
$(document).ready(function () {
    $(this).on('submit', '#generate_form', function (e) {
        alert('trapped?');
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:23:55.670

几乎.. :{D

```
$('#generate_form').on('submit', function(e) {

    alert('trapped?');

    e.preventDefault();
    return false;
}); 
```

我还建议查看[jQuery 的`.on()`文档](http://api.jquery.com/on/)——那里有很多有用的示例。

# javascript - Google Analytics（分析）自定义变量未报告

> ID：13346370
> 
> 赞同：2
> 
> 时间：2012-11-12T15:19:31.203
> 
> 标签：javascript, google-analytics

这是我的代码：

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'x']);
  _gaq.push(['_setCustomVar', 1, 'business_id', 5, 3]);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script> 
```

我真的不确定为什么他们没有在 GA 遇到。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T20:27:25.537

我找到了解决方案。自定义变量的输出必须包含在引号内，即使它是整数。

# android - Android MapActivity onTap 索引总是返回 0

> ID：13346373
> 
> 赞同：0
> 
> 时间：2012-11-12T15:19:38.233
> 
> 标签：android, android-mapview

无论我在地图上单击哪个元素，我的 MapActivity 中的 onTap 函数始终返回 0。这是 onTap 函数：

```
@Override
protected boolean onTap(int i) {

    OverlayItem item = myOverlays.get(i);
    AlertDialog.Builder dialog = new AlertDialog.Builder(context);

    dialog.setTitle(item.getTitle());
    dialog.show();

    return true;
}

//myOverlays is a ArrayList<OverlayItem> 
```

然而。每次函数运行时，索引 ( **i** ) 始终为 0。我已经使用断点和日志调试确认了这一点。这让我相当困惑，因为在使用此功能时，我收到了正确的 Dialog 内容。

item.getTitle **()**为单击的元素获取适当的标题，这意味着 item-object 是正确的，这意味着**myOverlays.get(i)**能够以某种方式获取不同的对象，即使索引 ( **i** ) 始终为 0。这令人难以置信。

有人愿意开导我吗？您是否认为这可能与在模拟器上执行“点击”这一事实有关？

*提前致谢。克里斯*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:07:21.497

这只是一个猜测，因为您没有显示创建覆盖和添加项目的代码。

可能您正在向`ItemizedOverlays`每个叠加层添加多个且仅一个项目。就像是：

```
for(i=0; i<count; i++){
  MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(...);
  OverlayItem oi = new OverlayItem(...);
  itemizedOverlay.add(oi);
  mapView.getOverlays().add(itemizedOverlay);
} 
```

使用上面的代码，您将有多个叠加层，每个叠加层都有一个位于位置 0 的项目。

为了提高效率，您应该执行以下操作：

```
MyItemizedOverlay itemizedOverlay = new MyItemizedOverlay(...);
for(i=0; i<count; i++){
  OverlayItem oi = new OverlayItem(...);
  itemizedOverlay.add(oi);
}
mapView.getOverlays().add(itemizedOverlay); 
```

使用上面的代码，您将只有一个包含多个项目的叠加层。

问候。

# java - 将其他计数器与 Perf4J 混合

> ID：13346387
> 
> 赞同：1
> 
> 时间：2012-11-12T15:20:45.370
> 
> 标签：java, performance, performancecounter, performance-testing, perf4j

我最近开始使用[Perf4J](http://perf4j.codehaus.org/)对 3rd 方系统进行性能监控。我通过使用 Java API 在系统上执行默认操作（签入/签出、流式传输等）并查看它们需要多长时间来做到这一点。但是，我想在输出中添加其他计数器，例如服务器上的活动会话数。我显然不能通过 StopWatch 调用来做到这一点。

有什么建议（使用 Perf4J 或其他技术）？

谢谢

S。

# javascript - jQuery isotope - 样式活跃类别

> ID：13346389
> 
> 赞同：0
> 
> 时间：2012-11-12T15:20:50.743
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-isotope

我正在使用带有 jQ​​uery BBQ 哈希历史的 jQuery isotope 插件。

这是我的代码：

**HTML**

```
<ul class="portfolio-categories">
   <li class="current-tab"><a href="#filter=*">All</a></li>
   <li><a href="#filter=.architecture">Architecture</a></li>
   <li><a href="#filter=.arts-crafts">Arts &amp; Crafts</a></li>
</ul> 
```

**jQuery**

```
var portfolioContainer = $('#portfolio-container');

portfolioContainer.isotope({
    itemSelector : '.portfolio-project',
    layoutMode : 'fitRows'
});

$('.portfolio-categories a').click(function(e) {
    $(this).parents('ul').find('li').removeClass('current-tab');
    $(this).parent().addClass('current-tab');
});

// Keeps track of URL history for isotope categories
$(window).bind( 'hashchange', function( event ){
    var hashOptions = $.deparam.fragment();
    portfolioContainer.isotope( hashOptions );
}).trigger('hashchange'); 
```

这很好用。您可以使用正确的 URL 直接链接到过滤器，它的排序很好。问题是如果我单击一个条目`#portfolio-container`并返回，菜单的活动状态将丢失并默认为`All`，这是有道理的，因为`current-tab`CSS 类仅在单击类别项时应用。

`current-tab`有没有办法根据过滤器指向的 URL 将类重新应用于项目？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T21:42:32.690

今天下午我遇到了你的问题，希望能找到答案，但没有。我四处寻找，相信我有一个解决方案。注意到这个问题是在 7 个月前发布的，我知道这可能为时已晚。

```
$(window).bind('hashchange', function (event) {
     // get options object from hash
     var hashOptions = $.deparam.fragment();
     // apply options from hash
     $container.isotope(hashOptions);
 })
 // trigger hashchange to capture any hash data on init

 .trigger('hashchange');
 });

//////// styles active menu item with hash in URL
var currentValue = window.location.hash.substr(1); //grabs the hash from the URL
$(document).ready(function() {
    if ($('.portfolio-categories').find('a').hasClass('current-tab')) { //finds... 
    $('.current-tab').removeClass('current-tab'); //...and removes class for active tab
    $('.portfolio-categories').find('a[href*="'+currentValue+'"]').addClass('current-tab'); //finds the hash in the 'ul a' tag and adds the class 
    // alert(currentValue); // a simple alert if you are curious what it's grabbing from the URL
    };
});

//////// menu highlight http://onepagetheme.com/isotope-menu-highlight-using-selected-class/
var $optionSets = $('.lp-option-set'),
$optionLinks = $optionSets.find('a');

$optionLinks.click(function() {
var $this = $(this);
// don't proceed if already selected
if ($this.hasClass('lp-selected')) {
    return false;
}
var $optionSet = $this.parents('.lp-option-set');
$optionSet.find('.lp-selected').removeClass('lp-selected');
$this.addClass('lp-selected'); 
```

Demo 可以在[→ here ←](http://fiddle.jshell.net/builtbymay/wZKEB/show/light/#filter=.lp-oh-la-la-date-nights)和 at [→ jsfiddle ←](http://jsfiddle.net/builtbymay/wZKEB/)找到。

我敢肯定这并不完美，但这是我能想到的唯一解决方案。希望能帮助到你。

# javascript - 如何以角度组织您的 .JS 文件？

> ID：13346391
> 
> 赞同：3
> 
> 时间：2012-11-12T15:20:58.427
> 
> 标签：javascript, angularjs

我是 AngularJS 和一般 JS 的新手。我来自 Java 世界，因为我曾经使用 GWT 实现客户端。

现在，当我搬到 AngularJS 时，我遇到了这个问题：

如何组织你的 .js 文件？在 java 中，每个类都有它的 .java 文件，但是如果在 JS 中实现这种做法，将会有很多 http 请求来获取 .js 文件，因为每个类（ Function ）都驻留在单独的 .js 文件中。

此外，应该组织文件，以便其他程序员应该在它们之间分配和导航，并且能够阅读和理解这些文件的相关内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T17:30:35.080

不幸的是，有大约一百万种方法可以做到这一点。由于 Angular 使用模块并且您的所有 Angular 代码都应该在一个模块中，因此使用 javascript 命名空间的 IMO 成为模块命名空间的次要。

看看这个项目（[angular-grunt-coffeescript](https://github.com/roytruelove/angular-grunt-coffeescript)）。这是我解决这个问题的尝试。我使用的是 coffeescript，但同样的想法也适用于 .js 项目。

还有[angular-sprout](https://github.com/thedigitalself/angular-sprout)试图扩展 'angular-seed' 项目以使其可用于大型应用程序 - angular-sprout 在 js 中。

*更新*

Yeoman 看起来可能会成为创建骨架 AngularJS 项目的标准，因此应该为所有东西提供一个“家”（我个人还没有使用它）。看看[这里](http://briantford.com/blog/angular-yeoman.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T12:02:45.137

对于大型项目，我建议每个模块使用一个目录，每个“事物”（服务、价值、工厂、控制器......）一个文件。Html 部分应与它们各自的指令或控制器一起存储在每个模块目录中。

我们使用这种方法已经有一段时间了，效果确实很好。该项目由 maven 构建（后端使用 Java），所有 js 文件都连接到每个 Angular 应用程序一个文件中，另外一个文件用于在 Angular 应用程序之间共享的组件。如果您使用maven ，请查看[yuicompressor-maven-plugin中的聚合。](http://alchim.sourceforge.net/yuicompressor-maven-plugin/ex_aggregation.html)

因为我们每个模块有几个 js 文件，所以我们需要一种方法来只创建一次模块，并且在我们在每个 js 文件中注册“事物”之前。

我们提出的解决方案是在每个模块目录中添加一个名为 0-module.js 的文件，其中包含模块创建语句。yuicompressor-maven-plugin 将首先将此添加到聚合文件中。

示例文件结构：

```
mymodule/
   0-module.js
      >angular.module('mymodule', []); //Create module
   MyController.js
      >angular.module('mymodule').controller("MyController", [... // Register MyController
   myTemplate.html 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T15:35:57.580

我通常将代码拆分为包含与该名称空间相关的类的名称空间。我将每个命名空间放在一个单独的 JS 文件中。

因此，如果您有名为`LinkedList,BinaryTree,KDTree`etc 的类，您可以将它们捆绑在 DataStructures 命名空间中并将其保存在

```
datastructures.js 
```

所以你可以通过说来实例化：

```
var kd = new Datastructures.KDTree(); 
```

通过保持命名空间名称和文件名相同，您可以轻松找到实际的代码段，而无需强大的 IDE，因为名称本身是自我描述的。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T20:59:49.623

我会推荐使用[Yeoman](http://yeoman.io)，因为我想开发人员也是如此（他们非常提倡它，查看他们的 gPlus 页面或他们的这个[视频](https://www.youtube.com/watch?feature=player_embedded&v=XOmwZopzcTA)）。它允许搭建脚手架（遵循[Angular-Seed](https://github.com/angular/angular-seed)的结构）、测试、通过 JS 服务器实时预览和部署——它将所有 .js 文件连接在一起，避免了多个请求的问题。看看这个！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-09T04:31:28.020

考虑到这个问题发生在不久前，为了那些今天提出这个问题的人，这里是我收集的使用 Angular 的不同最佳方法，包括它们的文件结构 [http://www.dancancro.com/comparison-of-angularjs-应用程序启动器/](http://www.dancancro.com/comparison-of-angularjs-application-starters/)

# ios - 通知中心在某些设备上不显示应用

> ID：13346392
> 
> 赞同：1
> 
> 时间：2012-11-12T15:21:00.543
> 
> 标签：ios, xcode, apple-push-notifications

我已经在应用商店上发布了一个启用推送通知的应用，并且还在实时状态下对其进行了测试，以确保它们确实在工作。当我有某些用户说应用程序没有出现在通知中心时，问题就出现了。大多数用户对此没有任何问题，一旦安装了应用程序，它就会询问“您是否要接收推送通知”，但有些用户从未收到此消息。我实施了正确的方法，因为这对大多数人都有效。有没有人遇到过这个问题，有解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:16:40.963

我注意到对此有 50 条意见，我确实向 Apple 开了一个案例，因为我没有得到回应。结果是一封电子邮件，说明我没有 aps-environment 权利。这没有任何意义，因为我有几部手机显示它们已启用推送......

但是，这是我的问题的解决方案。

```

我正在回复您关于您的应用未收到推送通知的问题
在 App Store 上发布后。

我要检查的第一件事是您的应用程序的代码签名权利。自从
您的应用程序是免费的，我下载了一个副本并检查了它的代码签名权利
如技术说明 TN2265 的“错误委托回调”部分所述
“推送通知疑难解答”：

developer.apple.com/library/ios/technotes/tn2265/_index.html#//apple_ref/doc/uid/DTS40010376-CH1-SUBSECTION2。

$ codesign -d --entitlements - /Users/me/Music/iTunes/iTunes\ Media/Mobile\ Applications/some.app
可执行文件=/Users/me/Music/iTunes/iTunes Media/Mobile Applications/some.app
??qq?

plist 版本="1.0">
字典>
    键>应用程序标识符/键>
    字符串>12346789.com.XXXX.XXXX /字符串>
    钥匙>钥匙串访问组/钥匙>
    数组>
        字符串>123465789.com.XXXXXXX.XXXXX /字符串>
    /数组>
/字典>
/plist>

请注意，没有 aps-environment 权利，这是注册推送通知所必需的。...

```

# php - 包含当月所有日期的php数组

> ID：13346395
> 
> 赞同：11
> 
> 时间：2012-11-12T15:21:05.650
> 
> 标签：php, arrays, date

我正在尝试但仍然想知道，如何获得一个包含当月所有日期的数组，它应该包含格式为：年-月-日的所有日期。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-12T15:25:47.393

尝试：

```
// for each day in the month
for($i = 1; $i <=  date('t'); $i++)
{
   // add the date to the dates array
   $dates[] = date('Y') . "-" . date('m') . "-" . str_pad($i, 2, '0', STR_PAD_LEFT);
}

// show the dates array
var_dump($dates); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T15:26:38.070

返回此类数组的简单函数可能如下所示：

```
function range_date($first, $last) {
  $arr = array();
  $now = strtotime($first);
  $last = strtotime($last);

  while($now <= $last ) {
    $arr[] = date('Y-m-d', $now);
    $now = strtotime('+1 day', $now);
  }

  return $arr;
} 
```

如果需要，您可以通过将步骤 ( `+1 day`) 和输出格式 ( `Y-m-d`) 更改为可选参数来改进它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:24:40.060

这个怎么样：

```
$list=array();
for($d=1; $d<=31; $d++)
{
    $time=mktime(12, 0, 0, date('m'), $d, date('Y'));
    if (date('m', $time)==date('m'))
        $list[]=date('Y-m-d', $time);
}
var_dump($list); 
```

# javascript - 访问 require.js 回调的返回值

> ID：13346399
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:21.330
> 
> 标签：javascript, return-value, requirejs, amd

我在一个文件中定义了如下模块

```
define(['mod1', 'mod2'], function (mod1, mod2) {

    var IndexView = Backbone.View.extend({

        ...

    });

    return new IndexView;

}); 
```

这需要在另一个文件（我的主干路由器文件）中使用以下内容

```
require(['src/views/index']); 
```

我可以`IndexView`在路由器范围内访问返回的对象，而无需在我的应用程序的命名空间中存储引用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:52:41.457

使用 require.js 传递 Backbone 视图/模型的实例将很快让您的生活变得非常不愉快。**让你的模块只返回视图/模型的定义**会容易得多，这样就可以在同一个范围内实例化它们。

所以如果你让你的视图模块只返回定义：

```
// IndexView module
define(['dep1', 'dep2'], function (dep1, dep2) {

    var IndexView = Backbone.View.extend({

        ...

    });

    return IndexView;

}); 
```

然后你可以在你的路由器中实例化它：

```
// our main requirejs function
requirejs(['path/to/indexview'], function (IndexView) {

    var AppRouter = Backbone.Router.extend({

        initialize: function () {

            // bind our IndexView to the router
            this.IndexView = new IndexView();

        }

    });

    // start the app
    var app = new AppRouter();

}); 
```

这样你的代码仍然是模块化的 Require.js，但你可以使用`this`.

# php - 论坛提交需要在做任何事情之前双重提交

> ID：13346401
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:25.073
> 
> 标签：php, forms, action

所以这可能是因为我的行为，但同时我对此表示怀疑，我对为什么会发生这种情况感到困惑。

我有一些 php 基本上可以做到这一点：

```
if($_POST['submit_me']){
    //I am calling some php function here
}

<form action='' method='post'>
  <input type='submit' name='submit_me' />
</form> 
```

提交此表单后，我必须再次点击提交按钮以获取被调用函数的结果，我想知道是否因为我应该通过操作调用该函数？

# java - Substitute rectangle objects on screen when 10 rectangles are reached?

> ID：13346403
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:26.733
> 
> 标签：java

I need to create a class that displays 10 rectangles on the canvas, each with a random color and position. When it reaches 11, the first rectangle is replaced with a new random color and position. 12th rect replaces the 2nd box, and so on. I am using the acm.jar for this, [http://jtf.acm.org/javadoc/student/index.html](http://jtf.acm.org/javadoc/student/index.html).

```
import acm.graphics.*;
import acm.program.*;
import java.awt.Color;
import java.util.Random;

public class Rect extends GraphicsProgram 
{
    public void run()
    {
        final int width = 800;
        final int height = 600;
        final int boxWidth = 50;
        final int maxBoxes = 10;

        this.setSize(width, height);
        Random random = new Random();              

        for(;;) {
            int x = random.nextInt(width-boxWidth);
            int y = random.nextInt(height-boxWidth);  
            Color c = new Color(random.nextInt(255), random.nextInt(255), random.nextInt(255));

                GRect r = new GRect(x, y, boxWidth, boxWidth);
                r.setFilled(true);
                r.setLocation(x, y);
                r.setFillColor(c);
                this.add(r);                   

                this.pause(100);

        }

    }
} 
```

I already figured out how to make the colors random, I cant figure out how I will substitute the boxes with the old ones.

**EDIT:::--------------------------------------------------------------------------------**

I did manage to get it working with the help of the guys below. Here is what the new for loop looks like:

```
for(;;) {
            int x = random.nextInt(width-boxWidth);
            int y = random.nextInt(height-boxWidth);  
            Color c = new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256));

                GRect r = new GRect(boxWidth, boxWidth);
                r.setFilled(true);
                r.setLocation(x, y);
                r.setFillColor(c);                
                add(r, x, y);

                int n = getElementCount();
                if (n>maxBoxes)
                {
                    remove(getElement(0));
                }

                this.pause(100);

        } 
```

One thing I dont understand is why the remove(getElement(0)) works,, how does the element change its index once one is removed? If I have 10 elements 0-9, and I remove element(0) why does the other elements change its index?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:33:53.093

You need to store the list of rectangles drawn so far. Every time you add a new rectangle, if the list is already 10 rectangles long, remove the first rectangle and add a new one. Then you need to redraw ALL rectangles every time you refresh the display, using double buffering to prevent screen flickering.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:35:38.760

This really looks like homework , so I won't do it for you but give some clues.

You can use the getElementCount() method to know the current number of rectangles in your frame.

Create a list of GObjects, and populate it with your rectangles as you create them. Once you reach ten, the process becomes

*   remove rectangle from screen using remove(GObject gobj)
*   remove first element, add to end of list.

And here you are :)

# android - 使 View 随屏幕尺寸增长

> ID：13346405
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:35.440
> 
> 标签：android, layout

我有一个 FrameLayout，用于显示用于使用 ZBar 扫描的相机供稿。

我希望它占据应用程序运行的每个屏幕的很大一部分。硬编码的 275dp 正方形在最新款手机上看起来很棒，但在较小的屏幕上却被推迟了。

我计划硬编码一个 175dp 的正方形，然后在代码中让它根据手机屏幕的尺寸增长。

我可能会`switch`在各种屏幕尺寸上做一个，然后决定调整框架的大小。

这是一个好方法吗？

我将如何在 XML 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:25:37.017

指定高度/宽度的 A`LinearLayout`将允许您模拟基于百分比的布局，否则您可以在想要使用整个屏幕宽度/高度时使用。`layout_weight``fill_parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:13:43.627

您可以为 ldpi、mdpi 和 hdpi（如果需要，可以使用 xhdpi 和 tvdpi）制作一个 xml 布局文件，并根据屏幕大小逐字设置不同的 xml。有了这个，您将能够毫无问题地适应大多数屏幕，但它不如百分比准确。但请记住，并非所有 Android 设备都具有通常的 16:9 或 16:10(8:5)，因此百分比可能会使正方形因屏幕而异。

您可以制作自己的布局限定符，但在大多数情况下，标准的限定符已经足够了。

您还应该考虑只在 java 中制作框架布局，而在 xml 中制作其余布局。

# python - 查找包含给定单词提及次数最多的 HTML 元素

> ID：13346408
> 
> 赞同：4
> 
> 时间：2012-11-12T15:21:51.757
> 
> 标签：python, html, dom, html-parsing, cluster-analysis

我有一个 HTML 文档，我想找到 HTML 元素，它是最接近给定单词的最大提及集群的包装器。

使用以下 HTML：

```
<body>
    <p>
        Hello <b>foo</b>, I like foo, because foo is the best.
    <p>
    <div>
        <blockquote>
            <p><strong>Foo</strong> said: foo foo!</p>
            <p>Smurfs ate the last foo and turned blue. Foo!</p>
            <p>Foo foo.</p>
        </blockquote>
    </div>
</body> 
```

我想要一个功能

```
find_largest_cluster_wrapper(html, word='foo') 
```

...这将解析 DOM 树并返回 me`<blockquote>`元素，因为它包含最大密度的*foo*提及并且它是最接近的包装器。

第一个`<p>`包含*foo* 3 次，`<b>`唯一一次，inner `<p>`s 包含*foo* 3 次，两次再两次，`<strong>`只有一次。但`<blockquote>`包含*foo* 4 次。也是如此`<div>`，但它不是最接近的包装器。该`<body>`元素的提及次数最多，但集群太稀疏。

没有聚类的直接实现总是会给我`<html>`或`<body>`类似的东西，因为这些元素总是有最多的请求提及，并且可能是最接近它们的包装器。但是，我需要使用最大集群的东西，因为我只对单词密度最高的网页部分感兴趣。

我对解析部分不是很好奇，它可以被`beautifulsoup4`其他库很好地解决。我想知道一种有效的算法来进行聚类。我用谷歌搜索了一段时间，我认为[集群包](http://docs.scipy.org/doc/scipy/reference/cluster.html)可能会有所`scipy`帮助，但我不知道如何使用它。谁能推荐我最好的解决方案并将我踢向正确的方向？例子会非常棒。

* * *

嗯，一般来说很难回答这样的问题，因为正如你所指出的，条件是模糊的。所以，更具体地说：

通常，文档可能**只包含一个这样的集群**。我的目的是找到这样的集群并获得它的包装器，以便我可以使用它进行操作。这个词也可以在页面的其他地方提到，但我正在寻找一个**值得注意的**这样的词群。如果有两个或更多值得注意的集群，那么我必须使用外部偏见来决定（检查标题、页面标题等）。集群引人注目是什么意思？这正是我刚才介绍的意思——没有“严肃”的竞争对手。如果竞争对手是认真的或不认真的，我可以提供一些数字（比率），例如，如果有 10 个集群和 2 个集群，则差异将是 80%。我可以说，如果有一个差异大于 50% 的集群，那将是值得注意的集群。这意味着，如果它是 5 个集群和另一个 5 个集群，则该函数将返回`None`（无法决定）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:32:59.380

所以这是一种方法：

```
|fitness(node, word) = count of word in node text if node is a leaf
|fitness(node, word) = sum(fitness(child, word) for child in children) / 
                         count of overall elements in node tree 
```

这里是：

```
import lxml.html

node = """<html><body>
    <p>
        Hello <b>foo</b>, I like foo, because foo is the best.
    <p>
    <div>
        <blockquote>
            <p><strong>Foo</strong> said: foo foo!</p>
            <p>Smurfs ate the last foo and turned blue. Foo!</p>
            <p>Foo foo.</p>
        </blockquote>
    </div>
</body></html>"""

node = lxml.html.fromstring(node)

def suitability(node, word):
    mx = [0.0, None]
    _suitability(node, word, mx)
    return mx[1]

def _suitability(node, word, mx):

    children = node.getchildren()
    sparsity = 1
    result = float(node.text_content().lower().count(word))
    for child in children:
        res, spars = _suitability(child, word, mx)
        result += res
        sparsity += spars
    result /= sparsity
    current_max, max_node = mx
    if current_max < result:
        mx[0] = result
        mx[1] = node
    return result, sparsity

print suitability(node, 'foo') 
```

它为我们提供了最合适的块引用元素。通过调整分数函数，您可以更改所需集群的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:38:37.147

所以它不是图书馆，但我有一个想法。

如果您构建 HTML 的解析树，然后用两件事注释每个节点会怎样：

1.  它包含的单词总数。
2.  它包含您的目标词的次数。

然后你可以在你的树上搜索一个最大化的节点`target_count / total_count`。这将为您提供最小包含元素的属性，因为树中较高的元素将包含更多单词。实际上，这样做是为您提供目标词密度最高的节点。

您可能会发现简单的除法并不能得到您想要的结果。例如，如果一个节点只包含你的目标词的一个副本，它将具有非常高的密度，但可能与你心中的集群概念不相符。在这种情况下，我将定义一些将元素中包含的单词数映射到大小的函数。如果您想确保集群具有一定的大小，并惩罚太大的集群（例如`)<body>`），可能是这样的：

```
def size(num_words):
   num_words = max(num_words, 40) # where 40 is the min size of a cluster
   if num_words > 1000: # This is too large, so we penalize
     num_words *= 1.5
   return num_words 
```

现在你可以做`target_count / size(total_count)`。

**回复：scipy 聚类**

这种聚类适用于向量。所以，为了使用这个包，你需要想出一种方法将你的目标词的出现转化为向量。我想不出一个好的方法来做到这一点，但这并不意味着不存在这样的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T22:36:04.097

聚类包不会有太大帮助，因为这**不是聚类分析**。

它更多地涉及**频繁模式挖掘**，您可能想研究一下。

# iphone - 使用 iPhone 5 全屏玩非视网膜游戏

> ID：13346409
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:54.860
> 
> 标签：iphone, opengl-es, retina-display, iphone-5

我想更新我的非视网膜游戏以在 iPhone 5 中使用宽屏，是否可以使用 568x320 大小的 OpenGL 窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:25:03.213

是的。但是您的图形不会显示得尽可能清晰。

我建议您制作`@2x`所有图形的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T17:38:36.613

我现在已经编译并让我的游戏在 568x320 下运行，我所要做的就是包含 Default-568h@2x 文件并在 createFrameBuffer 中执行此操作

```
[self setFrame:rect];
[self setBounds:rect];
[self.layer setFrame:rect];
[self.layer setBounds:rect]; 
```

# android - 如何使用 onSearchRequested() 全局禁用搜索按钮？

> ID：13346410
> 
> 赞同：0
> 
> 时间：2012-11-12T15:21:59.823
> 
> 标签：android

我发布了一个类似的问题：[Android - 如何禁用搜索按钮，如何实现 onSearchRequested()？](https://stackoverflow.com/questions/13162436/android-how-to-disable-search-button-how-to-implement-onsearchrequested)但当时我不太确定我在寻找什么。但这次我会非常具体。

我不想要的是：我如何使用对话框生成器来禁用搜索按钮。这已经回答了。

我正在寻找的是：如何使用 onSearchRequested() 方法永久禁用搜索按钮。请在此处查看[http://www.youtube.com/watch?v=9lekcH1JAf0&feature=youtu.be](http://www.youtube.com/watch?v=9lekcH1JAf0&feature=youtu.be)以进行进一步说明。

关于此方法，谷歌声明如下：“您可以覆盖此函数以强制全局搜索，例如响应专用搜索键，或**完全阻止搜索（通过简单地返回 false）** ”。这是链接：http: [//developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29](http://developer.android.com/reference/android/app/Activity.html#onSearchRequested%28%29)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:56:31.077

```
@Override
public boolean onSearchRequested() {

    return true;//block search

} 
```

如果不起作用，您是否尝试过此解决方案？：

[https://stackoverflow.com/a/5461709/1552551](https://stackoverflow.com/a/5461709/1552551)

# rotation - Corona SDK 轮换

> ID：13346412
> 
> 赞同：0
> 
> 时间：2012-11-12T15:22:07.833
> 
> 标签：rotation, coronasdk

我正在研究一个涉及时钟的项目，以及一个 set_alarm 机制，该机制通过拖动连接到时钟中心的旋转指针（时钟是经典的模拟指针，而不是数字）来工作，因此通过旋转指针（设置警报）您可以设置警报。这是来源：

```
local function rotateObj2(event)
    local t = event.target
    local phase = event.phase

    if (phase == "began") then
            display.getCurrentStage():setFocus( t )
            t.isFocus = true

            -- Store initial position of finger
            t.x1 = event.x
            t.y1 = event.y

    elseif t.isFocus then
            if (phase == "moved") then
                    animateAlarm = true
                    t.x2 = event.x
                    t.y2 = event.y

                    angle1 = 180/math.pi * math.atan2(t.y1 - t.y , t.x1 - t.x)
                    angle2 = 180/math.pi * math.atan2(t.y2 - t.y , t.x2 - t.x)
                    print("angle1 = "..angle1)
                    rotationAmt = angle1 - angle2

                    --rotate it
                    t.rotation = t.rotation - rotationAmt
                    print ("t.rotation = "..t.rotation)

                    t.x1 = t.x2
                    t.y1 = t.y2
                    alarm.rotation = t.rotation
                    setAlarm.rotation = t.rotation
                    print ("setAlarm.rotation = "..t.rotation)
                    if(alarm.rotation >=0)then
                        local hourValue = math.floor(t.rotation/30)
                        local minuteValue = math.floor(t.rotation*2)
                        local hour = hourValue
                        local minute = minuteValue  

                        if(minuteValue>=720 and minuteValue<780)then 
                            minute = minuteValue-720
                        elseif(minuteValue>=660 and minuteValue<720)then 
                            minute = minuteValue-660
                        elseif(minuteValue>=600 and minuteValue<660)then 
                            minute = minuteValue-600
                        elseif(minuteValue>=540 and minuteValue<600)then 
                            minute = minuteValue-540
                        elseif(minuteValue>=480 and minuteValue<540)then 
                            minute = minuteValue-480
                        elseif(minuteValue>=420 and minuteValue<480)then 
                            minute = minuteValue-420
                        elseif(minuteValue>=360 and minuteValue<420)then 
                            minute = minuteValue-360
                        elseif(minuteValue>=300 and minuteValue<360)then 
                            minute = minuteValue-300
                        elseif(minuteValue>=240 and minuteValue<300)then 
                            minute = minuteValue-240
                        elseif(minuteValue>=180 and minuteValue<240)then 
                            minute = minuteValue-180
                        elseif(minuteValue>=120 and minuteValue<180)then 
                            minute = minuteValue-120
                        elseif(minuteValue>=60 and minuteValue<120)then 
                            minute = minuteValue-60
                        end

                        if (hour < 10) then hour = "0" .. hour end
                        if (minute < 10) then minute = "0" .. minute end

                        hourField.text = hour
                        minuteField.text = minute

                    end
            elseif (phase == "ended") then
                    display.getCurrentStage():setFocus( nil )
                    t.isFocus = false

                    print ("ENDEDsetAlarm.rotation = "..setAlarm.rotation)
            end
    end

    -- Stop further propagation of touch event
    return true
end 
```

问题是当我尝试定义闹钟值（如 03.45）时，没关系。如您所见，我转换了指针的旋转。但是，如果旋转低于 -90 或超过 270，我不会得到结果。那是因为我没有定义如何处理它（-旋转）

问题：

一段时间后，旋转发生了变化。所以我没有旋转 = 0 到 270 和 -90 到 0，但是 -90 到 -360+(-90) = -450；

有时它变成从 60 到 360+60=420

这是什么鬼？！=(

请帮忙，我无法解决这个问题，因为这些“转变”似乎是随机发生的（或者我只是不明白为什么会发生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:40:57.363

你可以试试这个：其中 dx 和 dy 等于 x 的变化和 y 的变化

```
angle = ((math.atan2(dx,dy)*180 / math.pi) - 180) * -1 
```

无论您转向哪个方向或旋转多少次，这都会为您提供 0 到 360 之间的正值。

# tooltwist - 在 conf.xml 小部件定义上运行 grep

> ID：13346415
> 
> 赞同：0
> 
> 时间：2012-11-12T15:22:23.113
> 
> 标签：tooltwist

我正在寻找由 ToolTwist 设计器定义的使用特定小部件的页面。我尝试使用 grep 搜索小部件名称，但没有找到任何东西，即使我已经检查过它是否在文件中。

这是我用来检查特定页面定义的命令：

```
grep myproject.TestWidget widgets/test_pages/testPage/scratch_me/conf.xml 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:24:56.603

小部件定义文件存储为 UTF-16（但我将来会更改）。在运行 grep 之前，像这样转换文件：

```
iconv -f UTF-16  -t ISO-8859-15 widgets/test_pages/testPage/scratch_me/conf.xml \
         | grep myproject.TestWidget 
```

# objective-c - OSX Quicksilver 插件，Objective C 指导

> ID：13346417
> 
> 赞同：1
> 
> 时间：2012-11-12T15:22:32.793
> 
> 标签：objective-c, xcode, quicksilver

我正在尝试在 Xcode 中修改[Quicksilver](http://qsapp.com/) [插件](https://github.com/quicksilver/ScreenCapture-qsplugin)（屏幕捕获），以允许将屏幕捕获目标路径设置为默认的 com.apple.screencapture 路径值。由于某种原因，该插件当前对路径进行了硬编码，因此即使您更改了屏幕截图的 OSX 默认路径，该插件仍会将它们发送到 OSX 默认值，即桌面。

我是 Xcode/Objective C 的真正菜鸟，因此任何信息/示例或指向正确方向的内容都将不胜感激。

需要调整的截屏插件文件是“QSScreenCapturePlugIn.m”文件 - 这是一个片段：

```
(QSObject *)captureRegion:(QSObject *)dObject{

   NSString *destinationPath=[@"~/Desktop/Picture.png" stringByStandardizingPath];

   destinationPath=[destinationPath firstUnusedFilePath];

   NSTask *task=[NSTask launchedTaskWithLaunchPath:SCTOOL arguments:[NSArray arrayWithObjects:@"-is",destinationPath,nil]];

   [task waitUntilExit];

   [[QSReg preferredCommandInterface] selectObject:[QSObject fileObjectWithPath:destinationPath]];

   [[QSReg preferredCommandInterface] actionActivate:nil];
   return nil;
} 
```

我已经搜索了高和低的示例来演示如何从默认数据库中读取，但似乎信息很少。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:44:26.657

我不敢相信没有人能够在这个问题上提供答案或指针（或者我可能只是没有足够的耐心），但幸运的是我能够在阅读 SO 上的其他答案时找到答案- 不幸的是，我无法在此处引用问题，因为我丢失了页面。

无论如何，这会做到：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSString *screenCaptureLocationString = [[defaults persistentDomainForName:@"com.apple.screencapture"] valueForKey:@"location"]; 
```

出于某种原因，很难找到此信息，但希望将其发布在这里对其他人有所帮助。

# asp.net - Sub Page_Init 方法：找不到事件 init

> ID：13346419
> 
> 赞同：4
> 
> 时间：2012-11-12T15:22:41.657
> 
> 标签：asp.net, vb.net, events, init

以下方法返回错误：'Event init cannot be found'并在 System.Web.UI.Page 上获取错误

Visual Studio 2010，框架 3.5

```
Public Class_default
    Inherits System.Web.UI.Page

    Private Sub Page_Init(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Init

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T21:11:21.400

我不是 VB.NET 专家（我正在编写 C#），但我可以说问题的原因是您需要重写**OnInit**方法而不是 Page_Init。

因此，您需要使用以下代码：

```
Public Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Protected Friend Overrides Sub OnInit(ByVal e As EventArgs)
        MyBase.OnInit(e)
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T21:17:31.397

我认为 Maxim 是正确的，但是您也可以通过以下方式添加事件处理程序：

```
AddHandler Me.Init, AddressOf Page_Init 
```

我认为那是对的，对不起我的VB很生锈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:36:42.313

出色地，

我假设你[`AutoEventWireup="true"`](https://stackoverflow.com/questions/680878/what-does-autoeventwireup-page-property-mean)在你的标记中使用，但你也用`Handles`关键字标记了你的处理程序。

AutoEventWireup 不起作用，它无法直接访问您班级的私人成员。

设置`AutoEventWireup="false"`并保存其[不必要的性能损失](https://stackoverflow.com/questions/257112/autoeventwireup-performance-cost)，处理程序仍应触发，因为它显式地触发`Handles`了`Page.Init`事件。

由于您正在显式处理事件，因此您还可以自由更改事件处理程序的名称并删除丑陋的`_`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-21T13:59:46.113

大多数 Crystal Reports 代码可能在 Page_Load 事件中。如果将其移至 Page_Init，您会发现它可以正常工作。

# android - 使用配置活动的 Android 小部件不会更新

> ID：13346423
> 
> 赞同：1
> 
> 时间：2012-11-12T15:23:04.023
> 
> 标签：android, widget, android-appwidget

我正在制作一个 Android 小部件来显示基于公交车站号的实时交通信息。它显示停靠站号的下 3 个巴士到达站，并有一个按钮，用户可以在其中刷新数据。在我尝试添加我的小部件配置活动之前，这一切正常。

现在，当您选择小部件时，会打开一个配置屏幕，您可以在其中输入您的巴士站号。一旦你这样做了，小部件就会被添加到主屏幕，但它不会执行收集数据的方法，刷新按钮也不会为此工作。我一直无法弄清楚为什么。

小部件配置

```
public class WidgetConfig extends Activity implements OnClickListener{

EditText info;
AppWidgetManager awm;
Context c;
int awID;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.widget_config);
    Button b = (Button)findViewById(R.id.bWidgetConfig);
    b.setOnClickListener(this);
    c = WidgetConfig.this;

    //getting info about the widget that launched this activity
    Intent i = getIntent();
    Bundle extras = i.getExtras();
    if (extras != null){
        awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);
    }else{
        finish();
    }
    awm = AppWidgetManager.getInstance(c);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    info = (EditText)findViewById(R.id.etWidgetConfig);
    String e = info.getText().toString();

    RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget_layout);
    views.setTextViewText(R.id.tvStopNum, e);

    Intent in = new Intent(c, WidgetConfig.class);
    PendingIntent pi = PendingIntent.getActivity(c, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);  
    views.setOnClickPendingIntent(R.id.tvStopNum, pi);  

    awm.updateAppWidget(awID, views);

    Intent result = new Intent();
    result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);
    setResult(RESULT_OK, result);
    finish();       
} 
```

AppWidgetProvider

```
public class MyWidgetProvider extends AppWidgetProvider {

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){

    RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);

    // Create a new intent that will target this class
    Intent intent = new Intent(context, MyWidgetProvider.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[0]);
    intent.setAction("update");

    // Create a new PendingIntent which will be run whenever the refresh button is pressed
    // This PendingIntent will run the intent we just created before this
    PendingIntent pi = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    remoteViews.setOnClickPendingIntent(R.id.button1, pi);

    // Manually run the AsyncTask to initially populate the 5 question fields
    new RTPIinformation().execute(context);

    appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);    
}

// This method is called when it receives an Intent.  In particular, it will
// receive an intent whenever the refresh button is clicked
@Override
public void onReceive(Context context, Intent intent){
    super.onReceive(context, intent);

    if (intent.getAction().equals("update")){
        new RTPIinformation().execute(context);
    }

}

class RTPIinformation extends AsyncTask<Context, Void, List<RealtimeData>>{
     .
     .
     .
      } 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.ruben.dublin.bus.widget"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".WidgetConfig"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
        </intent-filter>
    </activity>

    <receiver 
        android:name=".MyWidgetProvider" 
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" />
    </receiver>

</application> 
```

任何帮助将不胜感激

# java - 递归或循环

> ID：13346424
> 
> 赞同：5
> 
> 时间：2012-11-12T15:23:05.850
> 
> 标签：java, loops, recursion

我有这种计算一些统计数据的方法：

```
public void calculateAverage(int hour){

    if (hour != 20) {
        int data =0; 
        int times = 0;
        for (CallQueue cq : queues) {
            data += cq.getCallsByTime().get(hour);
            times++;
        }       
        averageData.add((double)data/times);
        calculateAverage(hour + 1);
    }

} 
```

现在我很自豪我创建了一个递归方法，但我知道这可以通过循环来解决。

我的问题是：用递归还是循环解决这类问题更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:26:52.210

## 一般递归

通常，递归会更昂贵，因为每次函数递归时都必须使用变量副本修改堆栈。

需要保存一组地址和状态，以便递归过程可以在特定运行之后**返回到正确的状态。**

如果可能，迭代会更好。递归，当迭代只是不会削减它，或者会导致**更复杂的代码**。

* * *

## 代码维护

从维护的角度来看，调试迭代代码比递归过程容易得多，因为与考虑特定递归相比，理解任何特定迭代的状态**相对容易。**

* * *

## 你的代码

该过程调用自身，但每次运行与前一次运行的结果无关。**每次运行都是独立**的，通常是最大的损失，那里的递归**可能没有必要**。

在我看来，`calculateAverage(hour + 1);`应该将其移到函数之外，因为阅读您的代码的人也会更清楚。每个调用都是独立的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:29:03.847

在 Java、C 和 Python 中，与迭代（通常）相比，**递归相当昂贵，因为它需要****分配一个新的堆栈帧**。在某些 C 编译器中，可以使用编译器标志来消除这种开销，它将某些类型的递归（实际上是某些类型的尾调用）转换为跳转而不是函数调用。（[来源](https://stackoverflow.com/questions/2651112/is-recursion-ever-faster-than-looping)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:27:11.070

对于这个特殊问题，运行时差异不大。我个人更喜欢使用迭代，我认为它会更简单，更容易理解，但我想每个人都有自己的想法。

现在一些递归函数（例如递归斐波那契数）应该通过迭代来完成，因为它们可以有指数增长。

一般来说，我不使用递归，除非它会让我的问题更容易理解。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T15:27:36.467

您应该调查周边情况。对于大递归堆栈可能会溢出，那就是 +1 for 循环。

我不确定哪一个跑得更快，但考虑到 JIT 和其他东西，这相对容易衡量。

代码维护方面：对于我们大多数人来说，理解和修复循环比递归要容易得多。开发人员的时间通常比细微的性能差异更重要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T15:28:12.793

这**取决于上下文**。例如，如果我有一个`Composite`对象树（在 SWT 中）并且您希望遍历它们，最简单的方法是使用这样的递归：

```
 private boolean checkControlParent(Composite comp) {
        boolean ret = false;
        if (comp != null) {
            if (this.equals(comp)) {
                ret = true;
            } else {
                ret = checkControlParent(comp.getParent());
            }
        }
        return ret;
    } 
```

否则，如果性能很重要，请注意递归调用在大多数情况下比简单循环慢，因为函数/方法调用开销。

所以最重要的是，如果您需要遍历递归是自然解决方案的对象，并且您不必冒险`StackOverflowError`继续使用递归。否则，您可能会更好地使用循环。

还有一件事：递归方法有时往往更难阅读、理解和调试。

# asp.net-mvc - DAL 中的 app.config 和 WebApplication 中的 web.config

> ID：13346430
> 
> 赞同：5
> 
> 时间：2012-11-12T15:23:29.913
> 
> 标签：asp.net-mvc, entity-framework, app-config

我正在使用 Entity Framework 和 ASP.NET MVC 编写应用程序，因此我决定将 DAL 与 MVC Web 应用程序分开。实际上一切都很好，除了下一个问题（如果有问题）：我必须将实体连接字符串从 DAL 项目的 app.config 复制到 Web 应用程序的 Web.config。实际上它看起来是正确的：DAL 不应该知道与数据的连接字符串，这是主应用程序的职责。

但我真的不喜欢，我必须在 DAL 的 app.config 中保留实体连接字符串，因为它需要更新我的 EntityModel (*.edmx)。是否有一些最佳实践可以参考 Web 应用程序的连接字符串？还是我应该像现在一样离开它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T17:01:02.830

所以，只是对这里发生的事情的解释。当您开发应用程序时，DAL 项目本质上就是它自己的项目。编辑 DAL 项目时，Visual Studio 将使用项目配置文件中的值。因此，为什么连接字符串保留在该 app.config 文件中。

现在，当您将整个解决方案发布到 Web 服务器时，Web 应用程序就是正在运行的实际应用程序。这引用了在构建过程中编译的 DAL dll。鉴于此，DAL dll 将从 web.config 获取其所有配置值，因为这是主要执行程序集的配置文件。

要回答您的问题，最好将它们同时保存在 app.config 和 web.config 中，因为您不必在每次需要更新模型时都“创建新连接”。据我所知，DAL 项目在 Visual Studio 中永远不会查看另一个项目配置文件。但是，在 app.config 和 web.conig 中都有连接字符串不会影响您的部署。将始终使用 web.config 设置。

# php - 从 php 到 javascript 的变量传输麻烦

> ID：13346432
> 
> 赞同：0
> 
> 时间：2012-11-12T15:23:51.813
> 
> 标签：php, javascript, variables, quotes, transfer

我想将一个变量从 php 传输到 javascript，但在开始和结束时不断得到额外的 quatation 标记。我做错了什么，有没有更好的方法来做到这一点？

```
$textForm = '<form method="post" action="upload.php" name="truth">
<br />
Tittle:<br /><input type="text" name="title" size="40" /> <br /><br />
Author:<br /><input type="text" name="author" size="40" /> <br /><br /><br />
Text:<br /><textarea name="story" cols="90" rows="24" wrap="physical">Input text here.</textarea>

<br /><input type="submit" value="upload" />
<form>';

<script type = "text/javascript">
function showTextForm() {

var form1 = '<?php print json_encode($textForm1); ?>'
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:27:03.670

认为你可以简单地做：

```
<script type = "text/javascript">
function showTextForm() {

var form1 = <?=json_encode($textForm1); ?>;
</script> 
```

# vb.net - 将用户控件动态添加到更新面板

> ID：13346433
> 
> 赞同：0
> 
> 时间：2012-11-12T15:23:55.333
> 
> 标签：vb.net, dynamic, user-controls, updatepanel

我有一个带有 updatePanel 的页面....

```
<asp:UpdatePanel runat="server" ID="up1" UpdateMode="Conditional" OnLoad="up1_Load">
  <ContentTemplate>
  </ContentTemplate>
</asp:UpdatePanel> 
```

我还有一个用户控件（出于本示例的目的，此处已大大简化）...

**用户控件标记：**

```
<%@ Control Language="vb" AutoEventWireup="false" Codebehind="CtlParts.ascx.vb" Inherits="myProj.myProj.UserControls.ctlParts" TargetSchema="http://schemas.microsoft.com/intellisense/ie5"%>  
<asp:textbox runat="server" id="txtTest"></asp:textbox> 
```

我正在尝试将用户控件动态添加到更新面板（[遵循本指南](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.contenttemplatecontainer.aspx)）....

**表格 VB**

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim ctl As New UserControls.ctlParts
    ctl.ID = "ctlParts1"
    up1.ContentTemplateContainer.Controls.Add(ctl)
End Sub 
```

它似乎可以工作，因为没有错误，我可以在更新面板的加载事件中访问用户控件本身......

**表格 VB**

```
Public Sub up1_Load(ByVal sender As Object, ByVal e As System.EventArgs) _
Handles up1.Load  
         'Finds this control ok
         Dim ctl As UserControls.ctlParts = DirectCast(sender, System.Web.UI.UpdatePanel).FindControl("ctlParts1") 
         ctl.getTextBoxContent()    
    End Sub 
```

但是，我无法访问用户控件上的任何控件.....

**用户控制 VB**：

```
Public Sub getTextBoxContent()
    return txtTest.text 'This throws an error- txtTest is nothing
End Sub 
```

任何人都知道为什么会这样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T10:33:05.510

我找到了解决方案。

您需要使用[LoadControl](http://msdn.microsoft.com/en-us/library/t9ecy7tf%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)方法。因此，在 Page_Load 中：

```
Dim ctl As UserControls.ctlParts=CType(LoadControl("ctlParts.ascx"), ctlParts) 
```

（希望这对某人有帮助。）

# python - Python - 从列表中选择随机对象

> ID：13346441
> 
> 赞同：1
> 
> 时间：2012-11-12T15:24:22.157
> 
> 标签：python, list, random, python-2.7

我有对象列表“p”，每个对象都有一些数字“a”（例如 p[3].a = 5）。我想从列表中选择随机对象，选择对象的概率与其a的值成正比，即选择a=5的对象的概率是选择a=1的对象的概率的五倍. 我怎样才能用 Python/Pylab/Numpy 做到这一点？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:42:00.170

这是一种更有效的方法。

```
import random

def weighted_choice(items):
    # check if no items exist
    if not items:
        return None

    # compute total of all weights
    total = sum(item.weight for item in items)

    # select a random point within the total
    selection = random.randint(0, total - 1)

    # find the corresponding item
    count = 0
    for item in items:
        count += item.weight
        if selection < count:
            return item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:31:33.487

这适用于整数计数，尽管它对于大计数无效。

```
c = collections.Counter({k:k.a for k in stuff})
random.choice(list(c.elements())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:50:45.293

我建议使用[bisect](http://docs.python.org/2/library/bisect.html)

```
from bisect import bisect

class Element(object):
    def __init__(self, value):
        self.a = value
    def __repr__(self):
        return 'Element({})'.format(self.a)

data = [Element(3), Element(5), Element(7), Element(1)]
last = 0
breakpoints = []
for element in data:
    breakpoints.append(last + element.a)
    last += element.a
print(breakpoints)

for random_value in xrange(last):
    pos = bisect(breakpoints, random_value)
    print(random_value, data[pos]) 
```

您只需使用断点构建列表一次。然后，只要您愿意，您就可以将它与非常快速的 bisect 算法一起使用。

最后一个循环只是为了演示结果。

编辑：获取断点的另一种方法（我不喜欢 for 循环）：

```
values = [value.a for value in data]
breakpoints = [sum(values[:pos+1]) for pos in xrange(len(values))] 
```

# php - 需要从单个选择值中获取 2 个值。MySQL，PHP 中的 XML

> ID：13346449
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:24:58.293
> 
> 标签：php, mysql, xml, forms

我有一个包含这些值的选择框：

```
<form action="ampcontrols.php" method="post" name="amp">
<select name="amp">
<option value="Fender '57 Deluxe","103">Fender '57 Deluxe</option>
<option value="Fender '59 Bassman","100">Fender '59 Bassman</option>
<option value="Fender '57 Champ","124">Fender '57 Champ</option>
<option value="Fender '65 Deluxe Reverb","83">Fender '65 Deluxe Reverb</option>
<option value="Fender '65 Princeton","106">Fender '65 Princeton</option>
<option value="Fender '65 Twin Reverb","117">Fender '65 Twin Reverb</option>
<option value="Fender Super-Sonic(Burn)","114">Fender Super-Sonic(Burn)</option>
<option value="British '60s","97">British '60s</option>
<option value="British '70s","121">British '70s</option>
<option value="British '80s","94">British '80s</option>
<option value="American '90","93">American '90s</option>
<option value="Metal 2000","109">Metal 2000</option>
</select>
<input name="submit" type="submit" value="Submit" />
</form> 
```

我希望能够获得 2 个值并独立使用它们。这是一个选择框而不是多个。我可以回显选定的名称，即 Fender '57 Deluxe 的 HTML 标签没问题，但还需要传递它的相应编号以单独插入到 xml 文件中。即选择 Fender '57 Deluxe 作为标题和 103 作为 xml 的 id。我尝试过使用 MySQL、XML，但一次只能传递一个值！！我可能错过了一些简单的东西。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:39:13.673

您的 HTML 无效。

要将多个值放在单个选项上，您可以使用数组或对象

**使用数组的示例**

```
<select name="amp">
    <option value='["Fender &apos;57 Deluxe","103"]'>Fender '57 Deluxe</option>
</select> 
```

**PHP 代码**

```
<?php
$amp = json_decode($_POST['amp']);
$amp[0] // Fender '57
$amp[1] // 103
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T10:10:52.753

如果我猜对了，每个标题都由其 id 标识，并且您可以控制 html 以及 PHP 中的处理。在这种情况下，您不需要将标题传递回 PHP 处理部分；您只需要在 HTML 中显示它们，这样用户就可以选择“Fender '59 Deluxe”而不是“103”。

因此，只需确保您的 PHP 知道哪个 id 与哪个标签一起使用，然后您就可以将标签显示给用户，并将 id 显示给 PHP/XML。

```
<?php
  // This array would typically be pulled from a database
  $amps = array(
    103 => "Fender '57 Deluxe",
    100 => "Fender '59 Bassman",
    124 => "Fender '57 Champ",
    83 => "Fender '65 Deluxe Reverb",
    106 => "Fender '65 Princeton",
    117 => "Fender '65 Twin Reverb",
    114 => "Fender Super-Sonic(Burn)",
    97 => "British '60s",
    121 => "British '70s",
    94 => "British '80s",
    93 => "American '90",
    109 => "Metal 2000"
  );

  // Check if the form has been submitted
  if (isset($_POST['amp'])) {
    $selected_amp = intval($_POST['amp']);
    if (array_key_exists($selected_amp, $amps)) {
      $label = $amps[$selected_amp];
      insert_xml($selected_amp, $label);
      // (todo: create function insert_xml)
    } else {
      // (todo: error handling)
    }
  }
?>
<form action="ampcontrols.php" method="post" name="amp">
  <select name="amp">
  <?php foreach ($amps as $id => $label): ?>
    <option value="<?php echo $id; ?>"><?php echo htmlentities($label); ?></option>
  <?php endforeach; ?>
  </select>
  <input name="submit" type="submit" value="Submit" />
</form> 
```

如您所见，我喜欢在 HTML 中对 PHP 使用 foreach/endforeach；如果您愿意，当然可以使用大括号。

# jquery - 为页面上的多个内淡出幻灯片计时

> ID：13346450
> 
> 赞同：0
> 
> 时间：2012-11-12T15:25:01.727
> 
> 标签：jquery, slideshow, timing

我以前问过这个问题，但没有真正得到任何地方。

我需要在一个页面上显示三个图像，每个图像循环通过一组，但按顺序计时。这意味着当页面加载三个图像显示时，2 秒后第一个改变，再过 2 秒第二个，然后是第三个，然后它会无休止地重复。

我使用了 innerfade.js，这是一个简单的设置，但这没有时间偏移。

```
<div id="header-img-1">
<img src="http://medienfreunde.com/lab/innerfade/images/ggbg.gif" width="318" height="110" />
<img src="http://medienfreunde.com/lab/innerfade/images/whizzkids.gif" width="318" height="110" />
</div>

<div id="header-img-2">
<img src="http://medienfreunde.com/lab/innerfade/images/km.jpg" width="318" height="110" />
<img src="http://medienfreunde.com/lab/innerfade/images/tuev.jpg" width="318" height="110" />
</div>

<div id="header-img-3">
<img src="http://medienfreunde.com/lab/innerfade/images/rt_arch.jpg" width="318" height="110" />
<img src="http://medienfreunde.com/lab/innerfade/images/whizzkids.gif" width="318" height="110" />
</div> 
```

.

```
$(document).ready(

function() {
$('#header-img-1').innerfade2({
    animationtype: 'fade',
    speed: 750,
    timeout: 6000,
    type: 'sequence',
    containerheight: '1em'
});

$('#header-img-2').innerfade2({
    animationtype: 'fade',
    speed: 750,
    timeout: 6000,
    type: 'sequence',
    containerheight: '1em'
});

$('#header-img-3').innerfade2({
    animationtype: 'fade',
    speed: 750,
    timeout: 6000,
    type: 'random_start',
    containerheight: '1em'
});
});​ 
```

[http://jsfiddle.net/spirelli/gFveN/](http://jsfiddle.net/spirelli/gFveN/)

所以#header-img-1 需要在页面加载后 2 秒褪色，#header-img-2 adter 4 秒，#header-img-3 在 6 秒后褪色，所有这些都每 6 秒褪色一次。

我不是很懂 Javascript，所以我希望有一个好心人来帮助我编写正确的代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:35:40.803

[API-Description](https://github.com/wesbaker/jquery.innerFade)允许添加参数`startDelay`：

```
startDelay: Time before the first slide change (Default: '0') 
```

所以

```
$('#header-img-1').innerfade2({
    animationtype: 'fade',
    speed: 750,
    timeout: 6000,
    startDelay:2000,   // declare your initial delays here
    type: 'sequence',
    containerheight: '1em'
}); 
```

会成功的。

编辑：您的初始版本太旧，请使用我在上面链接中提供的版本。[在修改后的示例](http://jsfiddle.net/gFveN/2/)中查看它。注意函数的不同命名 - `innerfade2`vs `innerFade`。

# java - 使用 Spring RequestContextHolder 时出现 IllegalStateException

> ID：13346452
> 
> 赞同：1
> 
> 时间：2012-11-12T15:25:09.810
> 
> 标签：java, spring, tomcat

我在过滤器中使用 RequestContextHolder 来记录一段数据，并希望稍后在 POJO（通过 Spring 连接）中访问它。我遇到了一个异常，表明我在这里做错了，希望能提供任何有关那是什么的指导。

过滤器代码（在*doFilter()*方法中，其日志记录确认它被调用）：

```
RequestAttributes attrs = RequestContextHolder.getRequestAttributes();
if (attrs == null)
{
    logger.info("Creating new ServletRequestAttributes");
    attrs = new ServletRequestAttributes(servletRequest);
}

attrs.setAttribute("my_attr", "hello there!", RequestAttributes.SCOPE_REQUEST);

RequestContextHolder.setRequestAttributes(attrs); 
```

POJO代码：

```
RequestAttributes attrs = RequestContextHolder.getRequestAttributes();
if (attrs != null && attrs.getAttribute("my_attr", RequestAttributes.SCOPE_REQUEST) != null)
{
    String myAttr = (String) attrs.getAttribute("my_attr", RequestAttributes.SCOPE_REQUEST);
    logger.debug("Got it: ", myAttr);
} 
```

我看到这个异常来自Tomcat：

```
java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade
    at org.apache.catalina.connector.RequestFacade.getAttribute(RequestFacade.java:259)
    at org.springframework.web.context.request.ServletRequestAttributes.getAttribute(ServletRequestAttributes.java:98)
    at com.mycompany.MyClass(MyClass.java:50) 
```

我确实想知道在过滤器中是否有“设置数据”，并通过请求的实际工作“获取数据”可以在这里发挥作用，但不确定如何最好地适应它，如果它甚至是相关的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:21:51.450

该错误可能是由于您让 Spring 维护不再有效的请求对象的线程本地句柄这一事实引起的。细节可能并不重要，因为需要采用不同的方法。

以下之一将负责正确地自动设置和清除线程本地状态`DispatcherServlet`：`RequestContextListener`或`RequestContextFilter`. 您需要弄清楚哪一个最适合您的应用程序使用 Spring。您的过滤器和 POJO 代码不需要`RequestContextHolder`直接使用类。应该发生的是，您为要访问的属性声明了一个代理的、请求范围的 bean：

```
<bean id="myAttr" scope="request">
  <aop:scoped-proxy/>
</bean> 
```

然后，为您的 POJO 声明 bean 以及它对请求范围 bean 的依赖：

```
<bean id="myPojo">
  <property name="myAttr" ref="myAttr"/>
</bean> 
```

请参阅：[请求、会话和全局会话范围](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-scopes-other)

春天*应该*照顾所有的细节......

# ruby-on-rails-3 - 嵌套 Has_one 中的 IF 条件

> ID：13346457
> 
> 赞同：0
> 
> 时间：2012-11-12T15:25:21.073
> 
> 标签：ruby-on-rails-3, nested, nested-attributes, conditional-statements

伪关系故障客户 -> has_many -> 部门 -> has_many -> 任务 -> has_one -> 危险

在 Tasks#show 上，我目前仅在存在危险时才存在危险（由任务表格中的是/否问题确定）。如果存在，我想用条件语句显示危害，如果危害表尚未完成，则显示“填写表格”链接和“不完整”文本。以及“查看表格”和“完整文本（如果已完成危害表格）。

这是来自 app/views/tasks/show.html.erb 的代码摘录

```
 <% if @task.Hazard_exist  == 'Yes' %>   
<tr>    
<td>Hazard</td>     
<% if @task.Hazard.nil? %>      
    <td><%= link_to 'Fill Out Form', new_client_department_task_Access_path(@client,@department,@task) %></td>
    <td id="incomplete">Incomplete!</td>
    <td class="risk_val">Form not complete</td> 
<% else %>      
    <td><%= link_to 'View Form', client_department_task_Hazard_path(@client,@department,@task) %>   
            <%= link_to 'Edit Form', edit_client_department_task_Hazard_path(@client,@department,@task) %></td>
            <td id="complete">Complete</td> 
            <td class="risk_val"><%= @task.Hazard.risk_total%></td>
<% end %>   
</tr>
    <% end %> 
```

这可行，但问题是即使我“填写表格”然后点击取消数据库@task.Hazard 的行也不再为零。从而将危险表标识为“完成”。理想情况下，我想让它通过某些字段的存在来验证危害，但客户希望它能够作为“进行中”提交，所以我的计划是表单将能够在没有的情况下提交验证。但是，Tasks#show 中的条件语句将取决于 Hazard 模型中的键值不为空。

即替换这条线

```
<% if @task.Hazard.nil? %> 
```

和

```
<% if @task.Hazard.risk_total == '' %> 
```

但是，尝试执行此操作时出现“未定义”方法问题。

为了使用这个条件要求，这里有什么简单的工作吗？还是只是在表单上进行验证是最好的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:33:49.217

如果客户希望能够在进行中提交，那么您将无法到达您想去的地方，只是检查是否存在。相反，`complete:boolean`在您的模型上添加一个需要在进行中提交的属性，然后允许这些属性由用户设置或在回调中设置。

例如，这样做的一个好方法可能是在表单底部提供两个按钮：

```
= submit_tag "Save as Draft"
= button_tag "Save as Complete", :type => "button", :id => "complete" 
```

然后，您可以调用一个脚本，该脚本将点击事件打开`button#complete`，添加一个隐藏字段`complete = true`，然后提交表单。

该脚本可能如下所示：

```
$('button#complete').click( function(event) {
  event.preventDefault();
  $('form#my_form').append('<input type="hidden" name="hazard[complete]" value="true">').submit();
}); 
```

或者，您可以在模型中放置一个回调，检查是否已填写危害的所有字段，然后将其标记为完成。

然后在您的条件中，您只需编写：

```
if @task.hazard.complete 
```

# extjs4.1 - Extjs 4 treeStore appendChild 在特定节点之后

> ID：13346464
> 
> 赞同：0
> 
> 时间：2012-11-12T15:25:40.327
> 
> 标签：extjs4.1, treegrid

如何在特定位置附加孩子（默认情况下，新孩子将出现在最后一个节点之后）

* * *

我的解决方案是使用顺序变量

```
function treeGridReorder(){
        var i=0 ,j = 0;
        treeGrid.getView().getStore().each(function(node){
            node.data.ordre=i;
            j=0;
            node.eachChild(function(cnode){
                cnode.data.ordre=j;
                j++;
            });
            i++;
        })
    } 
```

* * *

```
function add_reponse(quest, qIndex){
        questStr.sort('ordre', 'ASC');
        var now=new Date().getTime();
        questStr.getNodeById(quest).appendChild({id:now, libelle:'Nouvelle réponse',parentq:quest,  saved:false, leaf: true});
        treeGridReorder()
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:10:52.857

您是否尝试过：[http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface-method-insertChild) ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.NodeInterface-method-insertChild ？这需要一个索引参数。

# java - 如何通过java触发hbase的主要压缩

> ID：13346466
> 
> 赞同：3
> 
> 时间：2012-11-12T15:25:41.127
> 
> 标签：java, hbase

我想向我的服务器调度程序添加一个任务来运行 hbase 的主要压缩。我怎样才能用java代码实现这个？

它可以针对单个区域或针对所有区域。我可以对某些特定的表空间进行主要压缩吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:45:41.757

```
...
String tableName = "mytable";
Configuration conf = HBaseConfiguration.create();
conf.addResource(new Path("/home/user/hbase/conf/hbase-site.xml"));

HBaseAdmin admin = new HBaseAdmin(conf);
admin.majorCompact(tableName);
... 
```

如果给定了表名，则将在该表的所有区域上调用压缩。参考[majorCompact javadoc](http://hbase.apache.org/devapidocs/org/apache/hadoop/hbase/client/HBaseAdmin.html#majorCompact%28java.lang.String%29)：

调用此代码后，您会在**主 UI**上的*“当前正在运行的任务”*下找到注释“*压缩存储...* ” （默认为端口 60010）

# magento - Magento中的单个购物车多个网站

> ID：13346469
> 
> 赞同：3
> 
> 时间：2012-11-12T15:25:58.363
> 
> 标签：magento, magento-1.7

我们有 5 个网站（每个都有不同的商店视图和设计）在单个 Magento 安装 (1.7) 上运行，并且都设置在不同的域上。现在我们想在所有 5 个网站上共享客户数据和购物车，但它不起作用。我们已经将 Persistent Shopping cart 设置为 true 并将 Share Customer Accounts 设置为 Global 但它不起作用。

在这方面的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:59:54.860

You need to create 1 website, 1 store and 5 store view in it. Different theme/skin can be assigned at store view level.

For Product sharing issue. you can create 5 store and then each store have separate store view. On each store we can define separate root category.

In this way cart and customer data can be shared.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:09:32.380

我采用了不同的方式并且它可以工作：我有多个域的单一安装和存储和单一 SSL

我有主要网站，其中有我其他网站的所有产品，并且设置了 SSL。
1\. 在多商店之间共享客户帐户：
您可以在此处配置此功能： `System -> Configuration -> Customer Configuration -> Share Customer Accounts ->Global`
2\. 在 Magento 多商店网站之间共享购物车内容：

Magento 为每个商店使用单独的购物车会话。要在结帐会话中使用一个网站，您需要修改“Mage_Checkout_Model_Session”类。
将此文件：复制`app/code/core/Mage/Checkout/Model/Session.php` 到：`app/code/local/Mage/Checkout/Model/Session.php.`

之后将以下源代码添加到类中：

```
class Mage_Checkout_Model_Session extends Mage_Core_Model_Session_Abstract
{
   const CHECKOUT_STORE_ID = 1;

   public function getCheckoutStoreId()
   {
      return self::CHECKOUT_STORE_ID;
   } 
```

将 CHECKOUT_STORE_ID 值“1”更改为您的 Magento 商店 ID，所有产品均为 SSL。

接下来，在文件中找到所有此类元素：

```
Mage::app()->getStore() 
```

并将它们更改为：

```
Mage::app()->getStore($this->getCheckoutStoreId()) 
```

就是这样！

清除 Magento 缓存并检查您的商店。现在您的 Magento 将为不同的多域商店网站使用一个购物车。
此解决方案有 3 个限制：
1\. 购物车中的所有价格都来自您选择的商店（使用 CHECKOUT_STORE_ID）。因此，如果您对不同的商店有不同的价格，它将无法在购物车中使用。
2\. 购物车中的货币将与您选择的商店中的货币相同。
3\. 编辑购物车中商品的链接不会将客户重定向到原始购物车网站。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:54:43.150

正如 Faisal 所建议的，我们应该使用 1 个网站、1 个商店和多个商店视图来共享购物车内容。

在我们的场景中，所有商店视图都设置为不同的域，因此如果客户未登录，则购物车会话不会继续。为了解决这个问题，我们所要做的就是在 System > Configuration > 中将“Cookie Path”设置为 /网页 > 会话 Cookie 管理

![饼干路径](../Images/7f43eb50e4e251f257bcae51ca1ac6b0.png)

# python - 如何定义一个模型，其字段由 django 中的数据库以外的其他数据源填充？

> ID：13346470
> 
> 赞同：3
> 
> 时间：2012-11-12T15:25:57.603
> 
> 标签：python, django, django-models, django-forms

有谁可以告诉我是否可以创建一个模型类，其中一些模型字段和一些其他字段从外部数据源获取数据。关键是我希望这个模型能够以与 ModelForm 的另一个模型相同的方式被利用。我的意思是，如果我通过指定获取特殊字段（可能未链接到数据库中的数据的那些）数据的操作来重新定义模型的“对象”管理器，那么 modelForm 是否会将输入与未附加到的字段链接到数据库？关于相关对象的类似问题。如果我有一个与该特殊模型有关系的模型，我是否可以通过经典方式获取此模型实例来获取相关对象（具有经典模型字段和非数据库字段）？

如果我不清楚，请告诉我，我会重新制定。

谢谢。

编辑：我尝试使用自定义字段创建模型，然后覆盖默认管理器及其功能：所有，获取，... 以获取对象，就像使用经典模型和管理器一样，它可以工作。但是，我不使用 QuerySet，似乎获得 ModelForm、相关对象和管理功能的唯一方法是正确构建 QuerySet 并让它由经理返回。这就是为什么现在我想知道是否可以使用从外部来源获得的数据正确地手动构建一个 QuerySet，或者告诉 django-admin、模型表单和相关对象来处理这个模型上的另一个类而不是查询集。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:45:03.360

方法是[定义自定义方法](https://docs.djangoproject.com/en/dev/topics/db/models/#model-methods)：

> 在模型上定义自定义方法以向您的对象添加自定义“行级”功能。尽管 Manager 方法旨在做“表范围”的事情，但模型方法应该作用于特定的模型实例。
> 
> 这是一种将业务逻辑保存在一个地方——模型中的有价值的技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:03:47.823

我现在有一个部分解决方案。我重写了 Manager，尤其是它的 all() 和 get() 函数（因为我现在只需要这些函数）。all() 返回一个查询集，我在其中添加了一些逻辑的结果，这些逻辑为我提供了从外部数据构建的对象（在我的例子中是通过 xmlrpc 获取的）。我通过 _result_cache 属性将这些对象添加到 qs 中。我认为它不干净，事实上我的模型现在是一个自定义模型，我没有任何数据库字段。我可以用它来填充数据库模型......但是我可以像经典模型一样使用它：例如 MyModel.objects.all()。

如果有人有其他想法，我将不胜感激。

问候

# objective-c - 使用带有换行符的 NSString "drawInRect"

> ID：13346476
> 
> 赞同：1
> 
> 时间：2012-11-12T15:26:06.017
> 
> 标签：objective-c, ios, nsstring

当我使用 drawInRect 时，它无法识别换行符，只会在屏幕后删除所有内容。视图如下所示：

> 第一的

但我希望它看起来像：

> 第一的
> 
> 第二

这是代码：

```
 periodText = @"First\nSecond";

        periodStringSize = [periodText sizeWithFont:font];
        periodStringRect = CGRectMake(aPeriod.origin.x+boxWidth/2-periodStringSize.width/2, aPeriod.origin.y, periodStringSize.width, periodStringSize.height);

        [periodFontColor set];
        [periodText drawInRect:periodStringRect withFont:periodFont]; 
```

有什么我做错了吗？该代码对于没有换行符的字符串非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:51:09.413

确保你`periodStringRect`的高度足以显示两条线。

# vb.net - 无法在客户端 PC 上加载文件或程序集 Microsoft.Exchange.Webservices.dll

> ID：13346479
> 
> 赞同：0
> 
> 时间：2012-11-12T15:26:17.287
> 
> 标签：vb.net, dll, exchangewebservices

我知道互联网上有更多这样的文章，我想我找到了它们，但仍然无法解决客户端 PC 的问题。

我在每个客户端 PC 使用的服务器上安装了一个 Windows 窗体项目。我在我的项目中添加了引用 2 并在我自己的计算机上安装了 EwsManagedApi 以进行测试，并更改了 2 找到对 EwsManagedApi 安装的文件夹的引用的位置。

当我尝试使用使用 Exchange Web 服务的模块时，我得到了错误。

我的电脑上只有快照，应用程序运行良好。我知道参考路径很好，我检查了 5 次以上。但是当我只是将 dll 复制到快捷方式所在的文件夹中时，它运行良好。我必须做什么才能从安装应用程序的服务器获取 dll。

坦克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:13:46.990

您必须在每个客户端中安装 Microsoft Exchange WebServices API 2.0 以确保您拥有所有必需的程序集。

[Microsoft Exchange Web 服务托管 API 2.0](http://www.microsoft.com/en-us/download/details.aspx?id=35371)

此外，检查服务器版本。也许它是 64 位，而客户端正在运行 32 位。

# c# - 任务参数，引用类型是否指向堆上的相同内存地址

> ID：13346480
> 
> 赞同：0
> 
> 时间：2012-11-12T15:26:25.693
> 
> 标签：c#, c#-4.0, task-parallel-library, task, reference-type

据我了解，当您在方法中使用引用类型作为参数时，堆栈上的值会被复制，因此形式参数指向与原始堆上相同的内存地址，因此会发生变化一旦你完成了该方法，它们就会被持久化。

这如何处理任务？我刚刚创建了 2 个新任务并传入了一个在 UI 线程上声明的数组。在其中一项新任务中所做的更改立即显示在第二项任务中。当我尝试通过 UI 线程更改输入（数组）时，两个新任务上的相同参数没有改变。我的印象是它应该有，因为它们都应该指向堆上的同一个内存位置？？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Threading;

namespace TasksAndMemory
{
    class Program
    {
        private static ManualResetEvent mre = new ManualResetEvent(false);

        static void Main(string[] args)
        {
            int[] readToEnd = new int[2];
            int[] data = new int[] { 1, 2, 3, 4, 5, 6 };
            int valueType = 5;

            int pageCounter = 1;

            Task[] tasks = new Task[2];

            for (int x = 1; x < 3; x++)
            {
                //Needed due to closure problem
                int i = x;

                tasks[i-1] = Task.Factory.StartNew(() =>
                {
                    SpecialMethod(data, readToEnd, i, valueType);
                });
            }

            while(pageCounter < 4)
            {
                if (readToEnd[0] == 1 && readToEnd[1] == 1)
                {
                    //Sets the state of the event to nonsignaled, causing threads to block
                    mre.Reset();
                    int[] temp = new int[] { 7, 8, 9, 10, 11, 12 };
                    data = temp;
                    readToEnd[0] = 0;
                    readToEnd[1] = 0;

                    //Sets the state of the event to signaled, allowing one or more waiting threads to proceed.
                    mre.Set();
                    pageCounter++;
                }
            }
            Console.ReadLine();
        }

        public static void SpecialMethod(int[] historicalData, int[] readToEnd, int taskNumber, int valueTy)
        {
            int[] temp = new int[] { 100, 200, 300, 400, 500, 600 };

            for (int x = 0; x <= historicalData.Length; x++)
            {
                if (x == historicalData.Length)
                {
                    readToEnd[taskNumber-1] = 1;
                    mre.WaitOne();
                    x = 0;
                 }
                else
                {
                    valueTy++;
                    temp[x] = temp[x] + taskNumber;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:45:52.060

您创建一个数组：

```
int[] data = new int[] { 1, 2, 3, 4, 5, 6 }; 
```

然后，您将对该数组的*引用的**副本*（当前存储在 中）作为参数传递给（通过原始代码中的捕获，但不重要，它仍然只是一个副本）。*`data``SpecialMethod`*

 *在 内`SpecialMethod`，参数`int[] historicalData`将收到对该原始数组的引用的*副本。*

此后，导致变量被重新分配的任何事情（与对由*引用*的`data`数组中的数据所做的更改相反）对由其原始引用制作的任何*副本*都没有影响- 它们仍在引用原始数组。*`data`*

 **我不清楚您在线程之间传递数据方面的实际要求是什么，因此我无法提出任何坚定的建议。我通常会尽量避免使用原始数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:46:05.310

您的分析一开始似乎是正确的，但您的结论却不正确。

您有一个引用类型（一个数组），并按值将其传递给一个方法（这是默认值）。这意味着对位于堆上的该数组的引用被*复制*。

因为变量 in`SpecialMethod`和`Main`都具有相同的引用，所以更改它们引用的值将被两个变量“看到”。

这仅适用于您对数组进行*变异的情况。*这就是您对 . 所做的事情`readToEnd`，这就是为什么处理它的代码部分按您的预期工作的原因。

`data`另一方面，您不会改变数组，只需将*新数组分配给变量*。那是在更改引用，而不是它引用的对象，这就是您遇到问题的原因。

至于解决方案，有几个。首先，您可以更改代码以改变数组而不是分配新的；只需更改现有值。如果您需要更改元素的数量，请考虑使用 a`List`而不是数组。

另一种选择是，而不是传递一个数组，而是添加另一层间接。您可以创建一个具有数组属性的新类，将该类型的对象传递给`SpecialMethod`，然后您可以更改该对象的属性并查看它在两个位置的反映。你可以使用这样的东西来涵盖一般情况：

```
public class Wrapper<T>
{
    public T Value { get; set; }
} 
```***

# java - 为什么 OpenJPA 默认不存储外键？

> ID：13346481
> 
> 赞同：2
> 
> 时间：2012-11-12T15:26:30.433
> 
> 标签：java, database, openjpa

默认情况下，OpenJPA 不会为数据库表创建外键，这让我很惊讶。关于“为什么”的[官方声](http://openjpa.apache.org/faq.html#FAQ-WhyOpenJPAisnotcreatingforeignkeyconstraintsonthedatabasetables%253F)明甚至没有涉及为什么，它只是解释了要更改默认设置要做什么。我知道约束检查会降低性能，但只有我认为干净的结构应该取代默认设置中的性能吗？有人知道原因吗？我找不到更多的官方声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T12:03:28.903

我偶然发现了与 OpenJPA 中的外键约束处理相关的类似问题。请查看有关它的[OpenJPA 论坛讨论](http://openjpa.208410.n2.nabble.com/Constraint-violation-using-OneToOne-relationship-td6978223.html)。凯文萨特有一些答案。也许它们满足您对更多信息的需求。

# c# - 将嵌套的 JObject 反序列化到字典中 在 JSON.Net 中

> ID：13346484
> 
> 赞同：2
> 
> 时间：2012-11-12T15:26:40.200
> 
> 标签：c#, json.net

我正在尝试反序列化一些看起来像这样的数据：

```
{
   "item1":"value1",
   "item2":2,
   "item3":true,
   "item4":{
       "subItem1":"subValue1",
       "subItem2":"subValue2",
   }
} 
```

在 C# 中，我希望反序列化的对象是以下内容的实例：

```
Dictionary<string, object> 
```

每个 Value 对象的实际类型是：string、double、boolean 或`Dictionary<string,string>`

我可以简单地使用如下语句：

```
JSONConvert.Deserialise<Dictionary<string,object>>(text); 
```

但这给了我类型的值对象：字符串、双精度、布尔值或`JObject`

我有兴趣研究如何将 unknown 路由`JObject`到`Dictionary<string, string>`对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:29:59.617

您可以使用而不是反序列化为字典`dynamic`

```
dynamic json = JsonConvert.DeserializeObject(text);
Console.WriteLine(json.item1);
Console.WriteLine(json.item4.subItem1); 
```

JObject 还实现了 IDictionary，因此您也可以将其用作

```
var jobj = (JObject)JsonConvert.DeserializeObject(text);
Console.WriteLine(jobj["item4"]["subItem1"]); 
```

# asp.net - 设置会话变量并防止在 ASP.NET 按钮上单击回发

> ID：13346486
> 
> 赞同：0
> 
> 时间：2012-11-12T15:26:43.633
> 
> 标签：asp.net

我有一个 ASP 按钮，当点击它时，需要设置一个会话变量并运行一些 javascript 代码来弹出一个窗口。我让这一切正常工作，但是当这种情况发生时，主页会回发并跳回页面顶部。如何防止回发并仍然设置会话变量并调用 javascript？所以主窗口保持在相同的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:35:02.960

使用 ajax 执行此操作，将 ASP.NET 按钮设置为仅在客户端上运行，将 onClient 事件设置为：

```
onclient="SetSession(); return false;" 
```

并在 SetSession() JavaScript 函数中调用服务器方法，例如简单的 ashx，如果服务器调用成功，则可以调用所需的附加 JavaScript。（使用 jQuery 更容易）：

```
function SetSession()
{
  jQuery.ajax({
                url: "SetServerSideSession.ashx", 
                success: function (data) 
                {  
                  AdditionalJavascript();
                }
             });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:29:01.553

要在回发后保持相同的位置，您可以使用 Page.MaintainScrollPositionOnPostBack

[Page.MaintainScrollPositionOnPostBack 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.page.maintainscrollpositiononpostback.aspx)

# c++ - 来自不同终端的不同进程与 MPI 通信

> ID：13346489
> 
> 赞同：2
> 
> 时间：2012-11-12T15:26:46.683
> 
> 标签：c++, mpi

我想要做的如下：

我想在一个服务器进程和几个客户端进程之间建立一种客户端-服务器类型的关系。但我的问题是，这些客户端进程将在不同的终端窗口中运行，并且它们需要标准输入。因此，使用相同的调用运行 MPI 程序`mpirun`不会为我做这件事，例如：

`mpirun -np 2 --stdin 1 ./server : -np 3 ./client`

在这个例子中，标准输入也只针对一个进程，这对我来说当然是另一个缺点。

最后一点是，我希望能够随时创建一个新的客户端进程，它也可以与正在运行的服务器进程通信。

那么，我需要遵循什么样的方法来完成这些？我已经搜索了几天，每次阅读不同的教程时，我都会变得更加困惑。

背景信息，如有必要：我在 Ubuntu 12.04 上运行并使用 Boost MPI。不过，欢迎提出有关任何平台/MPI 实施的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:38:23.277

您可以做的一件事是设置一个fifo。它看起来像这样： 在一个终端中，执行以下操作：

```
mkfifo a.fifo
tee a.fifo | mpirun -np 2 ./server 
```

然后在另一个终端中，执行：

```
mpirun -np 3 ./client < a.fifo 
```

不过，这不是最优雅的解决方案。此外，这仅涉及标准输入部分，而不是使它们成为同一通信器的一部分。

在 MPI-2 中可以通过[动态进程管理](http://en.wikipedia.org/wiki/Message_Passing_Interface#Dynamic_process_management)命令向通信器动态添加和删除 MPI 任务，但我从未使用过它们，我不确定它们是否实用。根据您要执行的操作，[zeromq](http://www.zeromq.org/)可能是更好的选择。它可以轻松设置广播和数据收集到变量和动态变化的任务数量。

# tsql - SQL连接两个表

> ID：13346497
> 
> 赞同：0
> 
> 时间：2012-11-12T15:27:08.223
> 
> 标签：tsql

我正在挣扎，也许是有史以来最简单的问题。我的 SQL 知识几乎限制了我实现这一目标。我正在尝试构建一个应该显示 JobTitle、Note 和 NoteType 的 sql 查询。事情是这样的，第一份工作没有任何注释，但我们应该在结果中看到它。系统注释永远不应显示。预期结果应如下所示

结果：

```
--------------------------------------------
|ID      |Title      |Note      |NoteType  |
--------------------------------------------
|1       |FirstJob   |NULL      |NULL      |
|2       |SecondJob  |CustomNot1|1         |
|2       |SecondJob  |CustomNot2|1         |
|3       |ThirdJob   |NULL      |NULL      |
-------------------------------------------- 
```

.

```
My query (doesn't work, doesn't display third job)

SELECT J.ID, J.Title, N.Note, N.NoteType
FROM JOB J
LEFT OUTER JOIN NOTE N ON N.JobId = J.ID
WHERE N.NoteType IS NULL OR N.NoteType = 1 
```

我的表：

```
My JOB Table
----------------------
|ID      |Title      |
----------------------   
|1       |FirstJob   |
|2       |SecondJob  |
|3       |ThirdJob   |
----------------------

My NOTE Table
--------------------------------------------
|ID      |JobId      |Note      |NoteType  |
--------------------------------------------
|1       |2          |CustomNot1|1         |
|2       |2          |CustomNot2|1         |
|3       |2          |SystemNot1|2         |
|4       |2          |SystemNot3|2         |
|5       |3          |SystemNot1|2         |
-------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:28:23.067

这不能同时为真（NoteType 不能同时为 NULL 和 1）：

```
 WHERE N.NoteType IS NULL AND N.NoteType = 1 
```

您可能希望`OR`改为**检查 NoteType 是 NULL 还是 1。**

```
 WHERE N.NoteType IS NULL OR N.NoteType = 1 
```

**编辑：**使用更正的查询，您的第三个作业将**不会按`JOB_ID`匹配方式检索，但由于 where 条件，它的行被过滤掉。**

尝试以下解决方法以获取具有空值的第三个作业。

```
 SELECT J.ID, J.Title, N.Note, N.NoteType
 FROM JOB J
 LEFT OUTER JOIN 
 ( SELECT JOBID NOTE, NOTETYPE FROM NOTE 
   WHERE N.NoteType IS NULL OR N.NoteType = 1) N
 ON N.JobId = J.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:34:55.607

只需排除 systemNotes 并使用子选择：

```
select * from job j 
left outer join (
  select * from note where notetype!=2
) n 
on j.id=n.jobid; 
```

如果您将连接表包含在其中，则左外连接可能用作内连接。

# google-maps - 谷歌地图瓷砖地面覆盖

> ID：13346501
> 
> 赞同：0
> 
> 时间：2012-11-12T15:27:17.727
> 
> 标签：google-maps, google-maps-api-3

我正在实施覆盖整个世界地图的地面覆盖。我目前有2个问题。

首先，即使图像与整个世界地图成比例并且我已经正确拉伸它（我认为），仍然显示出有些奇怪的拉伸。

其次，当过度缩小时，我想平铺地面覆盖以“覆盖更多世界”，但不知道是否可以平铺。

这是我的代码：

```
var start = new google.maps.LatLng(0, 0),
    sw = new google.maps.LatLng(-84, -178), // South West
    ne = new google.maps.LatLng(84, 178), // North East

    imageBounds = new google.maps.LatLngBounds(sw, ne),

    mapOptions = {
        zoom: 3,
        center: start,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    },

     map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions),

     oldmap = new google.maps.GroundOverlay("images/world.png", imageBounds);

     oldmap.setMap(map); 
```

你可以在这里看到它：http:
[//jsfiddle.net/maurizioliberato/A64nb/1/embedded/result/](http://jsfiddle.net/maurizioliberato/A64nb/1/embedded/result/)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:16:40.487

您在拼接图像时是否关心投影？Google Maps API 使用墨卡托投影。所以我建议你使用拼接软件制作地图图像；PTGui、Hugin 等

# xml - Sandcastle MAML 数学命令

> ID：13346502
> 
> 赞同：3
> 
> 时间：2012-11-12T15:27:18.297
> 
> 标签：xml, math, sandcastle

我正在使用 Sandcastle 来记录我的项目。在概念性内容布局中，我试图解释一些功能，并且我希望能够添加公式来描述它们。我知道这个`math`标签，但到目前为止我还不确定它是做什么的，Sandcastle 提供的文档没有多大用处，因为他们的例子只是 italicizing `1+1=2`。我不需要任何超级复杂的东西，只需要分数，绝对值符号，也许是普通的导数，所以如果`math`标签不能以某种方式做到这一点，我会感到惊讶。理想情况下，如果有一种方法可以使用完美的 LaTex 命令。

另一个问题：如何让数学命令居中？我在图像中尝试过`<math placement="center">`，但这没有用。

# windows - 如何使设备出现在 Windows 的“添加设备”向导中？

> ID：13346506
> 
> 赞同：1
> 
> 时间：2012-11-12T15:27:31.963
> 
> 标签：windows, drivers

在 toaster 示例中，Windows 驱动程序示例中，KMDF 总线驱动程序通过调用 IoInvalidateDeviceRelations() 通知 PnP 管理器新设备到达，然后 PnP 管理器将设备添加到“设备和打印机”。是否也可以将这些设备添加到“添加设备”向导中？如果是，我该怎么做？

# c# - 这个 XNA 4 Morph 目标动画有什么问题

> ID：13346507
> 
> 赞同：1
> 
> 时间：2012-11-12T15:27:32.943
> 
> 标签：c#, animation, xna

我在 Youtube 上找到了 XNA 3 Morph 目标动画的演示：

[http://www.youtube.com/watch?v=e6PLtA7wgg0](http://www.youtube.com/watch?v=e6PLtA7wgg0)

这是下载链接：

[http://mvinetwork.co.uk/permanent/morphtargets/MorphTargetAnimation.zip](http://mvinetwork.co.uk/permanent/morphtargets/MorphTargetAnimation.zip)

该项目在 XNA 3 (VS2008) 中运行良好

![在此处输入图像描述](../Images/4248c5575787562789b93987e5332a9e.png)

然后我尝试将其升级到 XNA 4 (VS2010)

![在此处输入图像描述](../Images/6e4ca40b79e6db44414ae35a80745840.png)

我知道有问题，谁能告诉我技术上的问题是什么？

欢迎任何提示，关键字。

你可以在这里找到我的升级项目：

[http://code.google.com/p/stack-overflow-questions/downloads/list](http://code.google.com/p/stack-overflow-questions/downloads/list)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:33:27.673

这个问题似乎是动画的计算错误。变形目标的值通常在 0f-1f 之间，具体取决于变形的强度。当计算错误时，它可能会上升到更高的水平。在计算多个变形目标之间的混合时，这也可能是一个问题。

一些简单变形的数学代码：

> vertexPosition = ((morphVertex - originalVertex) * morphValue) + originalVertex

现在，如果你想在不同的变形目标之间变形，对于说话的角色，你必须计算`morphValue`每个动画的 。

如果此代码错误，则顶点可能会出现在不应该出现的地方。想象以下示例（仅限单轴）：

> morphVertexResult[0] = (((1f - 0.2f) * 0.6f) + 0.2f) = 0.68f
> morphVertexResult[1] = (((0.5f - 0.2f) * 0.7f) + 0.2f) = 0.41f
> vertexPosition = morphVertexResult[0] + morphVertexResult[1] = 1.09f

在这种情况下，您会得到 的值，`1.09f`但期望的值必须介于`1f`和之间`0.2f`。正确的计算稍微复杂一些，上次我使用变形目标时，我从 3Ds Max 获得了我的变形值，并且它们已经被标准化。

# hibernate - Hibernate 映射文件应该是特定的还是通用的？

> ID：13346509
> 
> 赞同：1
> 
> 时间：2012-11-12T15:27:47.487
> 
> 标签：hibernate

通用映射应该只包含类型信息而不包含特定的列详细信息，例如：`<column name="code" type="string">`.

特定映射包含列信息，例如：`<column name="code" type="string" sql-type="varchar" length="10">`

这是我的困惑：这个映射应该是通用的吗？如果它是通用的，那么在地下更改数据库将很容易。但是，我想在映射文件中保留数据库详细信息，这样可以更轻松地重新创建数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:33:26.833

如果您从您的 java 类重新创建数据库，那么请具体说明。

如果你有一个单独的 sql 脚本来创建数据库，那么额外的细节只是噪音。

一些未经请求的建议（但我认为您的问题直指这一点）：根据我的经验，我认为从映射创建数据库并不好，因为您可以向您的 sql 脚本添加更多细节（额外索引，触发器、评论！和其他类型的 DB 黑魔法）。展望未来，您将如何更新该数据库？Hiberante 可以更新模式，但这样做的过程**充满**了错误。如果你需要回滚，你会怎么做？

以防万一，我上面提到的内容仅适用于您正在进行商业应用程序。如果您正在为娱乐/学校/大学做一些事情，那么您将不需要关心更新和回滚。

# ajax - 通过 AJAX 加载内容后，jQuery load() 事件未触发

> ID：13346512
> 
> 赞同：0
> 
> 时间：2012-11-12T15:28:00.240
> 
> 标签：ajax, jquery

我有一些代码执行以下操作：

1.  外部内容通过 AJAX（视频缩略图）加载
2.  然后使用 $("#content").append(); 将新内容插入到 div 中；
3.  移动触摸滚动助手 (iScroll) 应用于此 div。

但是，当 DOM 由于 AJAX 事件而发生更改时，jQuery“加载”事件不会触发，这意味着初始化滚动条的调用发生得太快（在内容中的图像加载之前），这意味着它通常不会被初始化. 在不等待图像加载的情况下，内容框通常足够短以至于不需要滚动功能，但是当随后加载图像时，框不可滚动。

```
$("#videoList").append(videoThumbnails);

$(document).load(function () {
  // doesn't fire
  initScroller(); 
}); 
```

jQuery 的 append 函数似乎不会阻塞，直到附加 HTML 中引用的所有图像都已加载。

如何检测 AJAX 函数加载的所有图像都已完成加载，以便在所有图像加载后调用 initScroller() 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:58:01.713

好的，我在另一个类似的问题中找到了解决方案。事实证明，有一个 jQuery [waitForImages 插件](https://github.com/alexanderdickson/waitForImages)正是我想要的：

所以我可以这样做：

```
$("#videoList").waitForImages(function () {
    // Fires when all images in the #videoList div have loaded
    initScroller();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:36:42.787

您尝试使用的方法仅在页面加载时触发一次，但不会触发您之后对 DOM 所做的更改（例如，使用 ajax 插入内容）。

如果你想观察 DOM 变化，你可以使用 DOMNodeInserted 事件

```
$(document).bind("DOMNodeInserted", function(event) {   ....do stuff...here     }); 
```

但通常最好使用 ajax 回调来触发它。

```
$('#targetElementForYourContent').load('server/url.html', function() {
     ...do stuff here....
}); 
```

# lucene - h2 lucene 提升

> ID：13346513
> 
> 赞同：2
> 
> 时间：2012-11-12T15:28:02.007
> 
> 标签：lucene, h2

我们正在尝试使用 H2 Lucene 全文搜索功能。它工作得很好。现在我们被要求为 H2 中的特定字段赋予权重（在索引创建时，而不是在搜索期间）。假设第 1 列的权重为 100，第 2 列的权重为 50（因为它是不太重要的字段）。这与 lucene 中的“场增强”功能相同。在索引创建期间是否可以在 H2 lucene 全文搜索中执行此增强功能？

另外我不确定我们如何在 H2 中获得相关的 Lucene 分数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:12:26.667

您需要在 H2 中更改 Lucene 支持。只有一个类需要更改，即[FullTextLucene](http://code.google.com/p/h2database/source/browse/trunk/h2/src/main/org/h2/fulltext/FullTextLucene.java)类。

然后，您可以将补丁提交到 H2 邮件列表，以便将其包含在 H2 的下一个版本中。

# wcf - DataContract 类中的 WCF 列表（自定义类）导致随机“连接意外关闭”错误

> ID：13346520
> 
> 赞同：0
> 
> 时间：2012-11-12T15:28:23.363
> 
> 标签：wcf, serialization, datacontract

在 DataContract() 中返回 List(Of CustomClass) 是否存在问题？出于某种原因，我随机关闭了我的 WCF 连接，我认为这可能是由于序列化，但我不知道如何去纠正它？如果我不尝试返回 List(Of CustomClass)，则不会出现此问题。

为了让您更好地了解正在发生的事情，我尝试将有关页面的信息传递给 WCF 服务。就像一个搜索爬虫...页面标题、内容、链接等。 List(Of CustomClass) 是一个链接列表。CustomClass 只保存链接信息...锚点、URL、是否为图像等...

我试图做的是传递一个封装页面信息的类和一个表示链接信息的 List(Of CustomClass)。

就像是：

```
<OperationContract()>
Public Function Add_Page(Byval Pages as List(Of PageInfo)) as Integer 

<DataContract()>
Public Class PageInfo
    <DataMember()>
    Public Page_Title as string

    <DataMember()>
    Public Page_Links as List(Of Links)
End Class

<DataContract()>
Public Class Links
    <DataMember()>
    Public Anchor as string

    <DataMember()>
    Public URL as string
End Class 
```

它有一半时间工作，但由于某种原因，它会给我一个通用的“**底层连接已关闭：连接意外关闭。** ”另一半时间没有任何跟踪信息服务器端。我已经将 MaxItemsInGraph 以及其他设置最大化，所以这不应该是原因。奇怪的是它有时有效，而其他无效。我可以消除此错误的唯一方法是从上面的示例中删除 List(Of Links)。

我正在重写代码以查看它是否通过通过 OperationContract 传递 List(Of Links) 来工作，有点像：

```
<OperationContract()>
Public Function Add_Page(Byval Pages as List(Of PageInfo), Byval Page_Links as List(Of Links)) as Integer 
```

我有一种感觉可以正常工作，因为我还有其他几个以类似方式工作而没有问题的功能。有些东西告诉我我做错了什么，没有正确序列化或？？？这是可能的吗，还是我的第二个例子是我必须使用的？谢谢

# 编辑#1（没用）

评论中建议的 DataMember(EmitDefaultValue:=True) 没有解决问题，所以我编写了客户端代码来仔细检查没有发送 Nulls/Empty 值（这是在保存到 DB 之前在服务器端完成的）。 ..似乎也没有解决问题。然后我意识到在检查 Nulls/Empty 值之后，我在发送之前从列表中删除了重复项。

我删除了检查重复项的代码，现在它似乎正在工作......我不知道为什么，删除重复代码分配了一个新列表，在它被唯一地填充到列表（链接）之后。我想知道在删除重复项/重新分配新列表而不是旧列表后是否会留下空值。我将对此进行更多测试，如果我没有更多问题，我会将您的回复标记为答案，因为我相信您假设空值正在提升转移是正确的...... . 经过更多的测试，这并没有解决问题。在缩小范围的过程中。会回来汇报的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:35:24.813

我也收到了这个错误。我相信这与我返回一个空值和返回的记录列表有关。我在我的 DataMember 属性中将其更改为： [DataMember(EmitDefaultValue = true)] 但我还检查了空值，因为我不希望它们在我的查询中返回。您可以，但查看正在返回的数据，如果其中有空值，请检查是否不发送这些记录并查看是否有效。

编辑：我的括号是因为我在 c# 中做了这个，所以你只需要将它转换为 VB。

# mysql - Scriptella, jexl 中的特殊字符

> ID：13346521
> 
> 赞同：2
> 
> 时间：2012-11-12T15:28:36.167
> 
> 标签：mysql, jexl, scriptella

我想从数据库中提取一个文本字段并将其插入到其他数据库中。因此，在提取时，我在选择测试时使用了 REPLACE(message_text,'\'', '"')。我给了我一个错误。我从我的 select 语句中更改了它，并在启动全局变量时这样做了。etl.globals [ 'message_text'] = message_text;

我仍然在插入语句中遇到错误

```
insert into lcs_al_user_likes(user_id,liked_user_id,post_content,loop_id) values('${etl.globals['posted_by']}','${etl.globals['liked_user_id']}','${etl.gl‌​obals['message_text']}',?batchLoopCounter); 
```

说

*您的 SQL 语法有错误检查与您的 MySQL 服务器版本相对应的手册，以便在第 1 行的 'message_text']}')' 附近使用正确的语法*

我认为它没有得到全局变量。我这么说是因为当我使用 log 打印它的值时，它只是给了我

**${etl.globals['message_text']}**

作为输出。所以请在这里帮助我。

```
<query connection-id="lcsDBConnection"> 
     SELECT forum_topic_post_id AS forum_topic_post_id, posted_by AS posted_by,message_text as message_text FROM lcs_tbl_forum_topic_post WHERE like_count>0 LIMIT ?batchSize OFFSET ?queryCounter ; 
     <script connection-id="jexl"> 
         etl.globals['forum_topic_post_id'] = forum_topic_post_id; 
         etl.globals['posted_by'] = posted_by; 
         etl.globals['message_text'] = message_text.replace('\'', '"'); 
     </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:08:21.983

看起来问题出在 INSERT 语句中，您应该使用准备好的语句参数转义：

```
INSERT INTO lcs_al_user_likes(user_id,liked_user_id,post_content,loop_id) values(?{etl.globals['posted_by']},?{etl.globals['liked_user_id']},?{etl.gl‌​obals['message_text']},?batchLoopCounter); 
```

顺便说一句，据我了解，您最初的问题是引号破坏了插入语句，因此在这种情况下使用 ?{parameter} 语法，您根本不需要使用 replace(...) 函数。

# c++ - 编解码器更改导致 IMediaSeeking 失败 setPosition

> ID：13346530
> 
> 赞同：0
> 
> 时间：2012-11-12T15:29:09.673
> 
> 标签：c++, video, directshow, video-codecs

我很高兴改进我的 C++ 程序，通过 directshow 阅读视频。现在我也试着写视频，这也很好用。
然后是寻找合适的编解码器（考虑vob / ogg）......
但是，今天突然视频显示非常缓慢。
现在我卸载了之前安装的任何其他编解码器，视频根本无法播放。
原因似乎是`CComQIPtr< IMediaSeeking, &IID_IMediaSeeking > pSeeking( pGraph );`并`hr = pSeeking->SetPositions( &Startzeit, AM_SEEKING_AbsolutePositioning,NULL, AM_SEEKING_NoPositioning );`给出了一个错误，当时不支持 SetPosition ......实际上在任何时候。
也`hr=pSeeking->GetDuration(&duration)`返回 0 并且`AM_MEDIA_TYPE mt;`我用来获取每秒帧数的相应格式类型为空。（pbFormat 为空）。

我是否无意中安装/卸载了一些重要的东西？
你听说过类似的问题吗？
正如我所说，几天前，相同的视频和源代码运行良好（我对现在的更改发表了评论）。
我想给你更多的源代码，但它有点长，但如果你认为它会有所帮助，我当然会添加它。

问候，
朱利安

这是源代码：[http](http://pastebin.com/jMdWejH9)
://pastebin.com/jMdWejH9 当然这只是整个代码的一部分，但我认为这是主要部分，因为这里插入了所有过滤器。
请记住，这实际上直到几天前才起作用！^^
第一部分是变量声明（据我所知，所有重要的变量，第二部分是调用的函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:09:02.787

如果您在 DirectShow 中渲染文件，框架将使用系统中安装的编解码器/过滤器。如果您删除某些编解码器，则需要另一个或中断，因为它无法呈现。要了解框架使用的过滤器，您可以尝试在 GraphEdit 或[GraphStudioNext](http://code.google.com/p/graph-studio-next/)中呈现文件。（只需将文件放在这些程序之一上并查看过滤器图）。我们使用编解码器包[ffdshow-tryouts](http://ffdshow-tryout.sourceforge.net/)和[播放器的](http://www.ccc-software.de/en/sport/sportsoftware/produkte/utilius-fairPLAY5.php)[Haali Media Splitter](http://haali.su/mkv/)获得了最好的结果。

# c# - 从 .Net 应用程序触发网页 JavaScript 函数 - 单独的进程

> ID：13346531
> 
> 赞同：0
> 
> 时间：2012-11-12T15:29:10.280
> 
> 标签：c#, javascript, .net, function

试图首先确定这是否可能。

需要能够从我们的 .Net 应用程序（WinForms - C#）触发客户端网页上的 JavaScript 函数。

IE -> 网页 -> SomeJavascriptFunction

C# .Net 应用程序在单独的进程中运行-> 调用 SomeJavascriptFunction

显然我不能直接调用它，但我想知道是否有人在他们的努力中遇到过任何技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:42:37.793

一种方法是让客户端的 javascript 代码轮询服务器以查看是否有任何作业。WinForms 应用程序会将作业插入到数据库中，Web 服务将读取该作业并将其呈现给 javascript AJAX 调用。

javascript 可以每 15 秒左右轮询一次服务器以查看是否有任何新作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:26:38.930

我不知道您目前是如何设置的，但在我的工作中，我有一个服务器，一个页面监听然后根据结果调用一个 java 脚本对象。其中一些只是一个布尔值，如果设置为 true 表示它运行脚本，则将该值设置回 false 直到应用程序再次运行。我猜这不是你想要的理想状态，但据我所知，你需要在离线和在线之间架起一座桥梁。

希望这可以帮助。如果不后悔浪费你的时间。

罗伊

# mysql - 如果字段 'a' like 'varchar' = true 则 concat 'varchar, 'predeterminedstring1'

> ID：13346532
> 
> 赞同：2
> 
> 时间：2012-11-12T15:29:15.247
> 
> 标签：mysql, if-statement, sql-like, concat

我有一个产品 csv 文件，该文件由程序解析以更新 Mysql 数据库中的产品记录。

该程序具有列映射功能，并且可以在解析 CSV 文件时在列中的字段上包含 SQL 查询。

我想要实现的是根据 varchar 字段的内容对产品进行子分类。

要获得子类别，SQL 查询的输出必须是 'parentcategory | 子类别 | subcategory ',（管道 '|' 分隔符是生成类别树所需的语法）

我有这个查询

```
concat('default category','|',[CSV_COL(13)]) 
```

这给了我'默认类别|的输出 “第 13 列中的字符串”正在工作，但在默认类别下给了我太多子类别。这些需要父类别才能使网站的导航可用...

我想要的是做一个查询，说

```
IF([csv_col(12)] like '*Battery*' = TRUE)  
THEN CONCAT('default category','|','batteries','|',[CSV_COL(13)])
ELSE
if([csv_col(12)] like '*power supply*' = TRUE) 
then concat('default category','|''Power Supplies','|',[CSV_COL(13)])
ELSE etc.......

ENDIF 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T16:08:18.877

Mysql 理解类似的东西

```
SELECT IF(col LIKE '%aValue%', "ValueA", "ElseValue") FROM ... 
```

您不必在 IF 中使用字符串：

```
SELECT IF(col LIKE '%aValue%', Col1, Col2) FROM ... 
```

# memory - Cloudoundry：gwt 应用程序，内存使用量根据 vmc 稳步增加，但在内存分析器中没有

> ID：13346533
> 
> 赞同：0
> 
> 时间：2012-11-12T15:29:15.210
> 
> 标签：memory, tomcat7, cloud-foundry, probe

我部署了一个 gwt app(tomcat7)（文件上传并在表格中显示内容）。我使用探针检查内存使用情况，问题是，根据 vmc 即 cloudfoundry 控制台，内存永远不会下降（异常），但探针完全显示其他内容（正常）。 ![在此处输入图像描述](../Images/36349ce22bd4e0a277334d951f4ec4fe.png) 我最初的直觉是它可能在应用程序中发生内存泄漏，但探针和 vmc 统计数据表明存在其他问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T09:43:10.773

Reported memory usage is actually the whole unix process RAM usage (this way this is consisten with ruby and node.js deployments). So this takes into account your whole heap + permgen + even some JVM overhead, so this may explain the difference.

# android - 由于错误 9，GooglePlayServices 不可用

> ID：13346535
> 
> 赞同：4
> 
> 时间：2012-11-12T15:29:22.930
> 
> 标签：android, google-plus, google-authentication

我正在尝试运行 GooglePlayServices 示例，但在 Auth 示例中，按下 Greet Me 按钮时出现以下错误：

com.google.android.gms.auth.GoogleAuthException：由于错误 9，GooglePlayServices 不可用

和签名无效。找到 XXXX

错误在于调用 GoogleAuthUtil.getToken(mActivity, mEmail, mScope);

我没有做任何其他事情，只是编译并运行示例。

我的设备上确实安装了 Google Play 服务。

我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:46:49.807

Google Play 服务的推出仅适用于运行最新版 Google Play 商店的 Android 2.2+ 设备。当此设备上安装的 Google Play 服务版本不正时，您将收到[错误代码 9 。](https://developers.google.com/android/google-play-services/reference/com/google/android/gms/common/ConnectionResult#SERVICE_INVALID)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T20:52:41.587

在我的情况下发生的事情是模拟器没有安装 Play 商店，所以我安装了另一个模拟器，如果我有那个应用程序并且瞧，它就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-08T12:34:48.273

或者你需要将你的模拟器更新到它解决我的 android 11.0 (R)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-05T14:48:56.727

添加到`build.gradle`它与我一起工作

```
implementation 'com.google.android.gms:play-services-location:18.0.0' 
```

# asp.net-mvc - 使用配置的序列化程序序列化 JSON

> ID：13346537
> 
> 赞同：1
> 
> 时间：2012-11-12T15:29:32.480
> 
> 标签：asp.net-mvc, asp.net-web-api, json.net

我正在使用带有 JSON.Net 的 ASP.Net Web API 进行序列化。我必须配置序列化程序以正确处理 ISO 日期，如下所示：

```
var iso = new IsoDateTimeConverter {
    DateTimeFormat = "yyyy'-'MM'-'dd'T'HH':'mm':'ss.fffK"
};

GlobalConfiguration.Configuration.Formatters.JsonFormatter
    .SerializerSettings.Converters.Add(iso); 
```

当我通过 WebAPI 传递我的对象时，这很好用。然而，我的问题是我有另一个地方要显式调用序列化：

```
@Html.Raw(JsonConvert.SerializeObject(Model)); 
```

在这种情况下，它不使用我设置的配置。我知道我可以将`iso`转换器传递给`SerializeObject`调用，但出于显而易见的原因，我更愿意避免这种情况并获取已配置的序列化程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:26:00.983

如果您要自己进行 JSON 序列化，则必须明确传递所需的设置。没有办法解决它。如果您想重用相同的序列化程序设置，我能想到的最好的方法是执行以下操作：

```
JsonConvert.SerializeObject(Model, GlobalConfiguration.Configuration.Formatters.
    JsonFormatter.SerializerSettings) 
```

# python - 位置参数之前的 argparse 可选参数

> ID：13346540
> 
> 赞同：12
> 
> 时间：2012-11-12T15:29:58.263
> 
> 标签：python, argparse

我想知道是否可以在带有可选参数的参数后面加上位置参数。理想情况下，输入命令行的最后一个参数将始终适用于“testname”。

```
import argparse
parser = argparse.ArgumentParser(description='TAF')
parser.add_argument('-r','--release',nargs='?',dest='release',default='trunk')
parser.add_argument('testname',nargs='+')
args = parser.parse_args() 
```

我希望这两个调用都将 Smoketest 应用于 testname，但第二个调用会导致错误。

```
>> python TAF.py -r 1.0 smoketest
>> python TAF.py -r smoketest
TAF.py: error: too few arguments 
```

我意识到将位置参数移到前面会导致可选参数的正确行为，但这不是我正在寻找的格式。选择标志看起来像是一个有吸引力的替代方案，但是它会引发错误而不是忽略不匹配的项目。

编辑：我找到了一种解决方法。如果有人有更好的解决方案，我将不胜感激。

```
import argparse
parser = argparse.ArgumentParser(description='TAF')
parser.add_argument('-r','--release',nargs='?',dest='release',default='trunk')
parser.add_argument('testname',nargs=argparse.REMAINDER)
args = parser.parse_args()

if not args.testname:
    args.testname = args.release
    args.release = '' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:23:40.013

如[文档](http://docs.python.org/dev/library/argparse.html#nargs)中所述：

> `'?'`. 如果可能，将从命令行使用一个参数，并将其作为单个项目生成。如果不存在命令行参数，则将生成默认值。请注意，对于可选参数，还有一种情况 - 选项字符串存在但后面没有命令行参数。在这种情况下，将产生来自 const 的值。

因此，您想要的行为无法使用`'?'`. 可能您可以使用`argparse.Action`和干预以前的结果编写一些技巧。（1）

我认为更好的解决方案是拆分该选项的功能。使其成为需要参数的选项（但选项本身是可选的）并添加一个不带参数的选项，将版本设置为`'trunk'`. 通过这种方式，您无需任何破解即可获得相同的结果。另外我认为界面更简单。

在您的示例中：

```
python TAF.py -r smoketest 
```

很明显，这`smoketest`将被解释为`-r`. 至少遵循 unix 约定。如果要保留`nargs='?'`，则用户*必须*使用`--`：

```
$ python TAF.py -r -- sometest
Namespace(release=None, testname=['sometest'])   #parsed result 
```

(1) 关于如何做到这一点的想法：检查选项是否有参数。如果它有一个检查它是否是一个有效的测试名称。如果是这样手动放入`testname`并设置`release`为默认值。您还必须设置一个“标志”，告诉您这件事发生了。

现在，在解析之前，`sys.argv`您必须重定向`sys.stderr`. 解析时必须catch `SystemExit`，检查`stderr`错误是否是“参数太少”，检查标志是否设置，如果设置则忽略错误并继续运行，否则应重新打印`stderr`错误消息并退出.

这种方法看起来并不健壮，而且可能有问题。

# asp.net - 在嵌套对象上调用 MVC IValidatableObject

> ID：13346545
> 
> 赞同：3
> 
> 时间：2012-11-12T15:30:22.797
> 
> 标签：asp.net, .net, asp.net-mvc

所以我有以下对象

```
public class Person : IValidatableObject 
{

[Required]
public string Name {get;set;}
[Required]
public string Status {get;set;
public Address Address {get;set;}
 public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {

            if (Status != "Addressless" && Address == null)
            {
                yield return new ValidationResult("An address is required if this person is not addressless");
            }
        }
}

public class Address 
{
[Required]
public string Address1 {get;set;}
[Required]
public string City {get;set;}
} 
```

现在，我的问题是地址值是必需的，因为如果该人确实有地址，EF Code First 不需要地址表中数据库中的空值。这似乎导致了一个问题，因为 Person 不需要地址，因此如果他们是“无地址”，则不应进行`Address`验证，但验证仍会启动，因为 Address 具有必填字段。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-26T12:26:06.720

### 原因

正如[chris-shouts](https://stackoverflow.com/users/52920/chris-shouts)在[回答](https://stackoverflow.com/a/3400627/3488873)类似问题时所描述的那样。

> 验证对象时，在 Validator.ValidateObject 中应用以下过程：
> 
> 1.  验证属性级属性
> 2.  如果任何验证器无效，则中止验证返回失败
> 3.  验证对象级属性
> 4.  如果任何验证器无效，则中止验证返回失败
> 5.  如果在桌面框架上并且对象实现了 IValidatableObject，则调用其 Validate 方法并返回任何失败

### 你的情况

因此，在您的情况下，*必需*的属性验证会**阻止**您检查 IValidationObject。

### 可能的解决方案

可能的解决方案是在验证方法中移动您所需的地址检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:15:51.453

问题是`Required`属性是继承的。因此，即使`Address`不是必需的，当您绑定到视图时，地址的各个属性也是必需的。

您最好的选择是为`Address`不具有任何属性的视图模型创建一个视图模型，并将一些验证逻辑放在一个单独的类中，甚至放在验证您的域逻辑的控制器中。您可以使用添加验证数据`ModelState.AddModelError.`

# java - Ant编译依赖的包

> ID：13346546
> 
> 赞同：1
> 
> 时间：2012-11-12T15:30:30.637
> 
> 标签：java, ant

我最近开始学习 ant 并且遇到了一些麻烦，我基本上有 2 个包并且正在尝试编译这两个包，但是两个包都包含相互依赖的 java 文件（来自 package1 的 egajava 依赖于来自 package2 的 b.java 和反之亦然）因此我不能编译一个没有另一个，例如下面。

```
<?xml version="1.0"?>
  <project name="exampleproject" basedir="." default="compile">
  <property name="src1" value="package1"/>    
  <property name="src2" value="package2"/> 
  <property name="dest" value="build"/>
  <property name="classpath" value="${dest}"/>
<target name="clean">
    <delete dir="${dest}"/>
</target>
<target name="build" depends="clean">
    <mkdir dir="${dest}"/>
</target>
<target name="compile" depends="clean,build">
      <javac srcdir="${src1}" destdir="${dest}"
         classpath="${classpath}"
         includeantruntime="false">
       </javac>
       <javac srcdir="${src2}" destdir="${dest}"
         classpath="${classpath}"
         includeantruntime="false">
       </javac>
</target>
</project> 
```

从测试这不起作用，因为当尝试编译 package1 时构建失败，因为 package2 中有尚未编译的类，我唯一​​的解决方案是重组我的程序，有人对如何解决这个问题有更好的想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:39:13.317

根据[http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)：

> javac 的 srcdir、classpath、sourcepath、bootclasspath 和 extdirs 属性是类路径结构，也可以分别通过嵌套（注意不同的名称！）、、、和元素来设置

所以你可以使用

```
 <javac destdir="${dest}" classpath="${classpath}" includeantruntime="false">
    <src path="${src1}"/>
    <src path="${src2}"/>
  </javac> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:34:18.010

您遇到了一个根本无法解决的循环依赖问题。您应该重新组织您的模块，以便其中没有依赖循环。将共同依赖关系转移到第三个新模块或类似模块中通常是一个好的开始。这就是 xy-commons 模块的诞生方式.. :-)

# java - 如何创建一个类的实例以通过应用程序访问

> ID：13346547
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:30:31.453
> 
> 标签：java

我有一个`class`无法访问会话对象的工具。我只想初始化这个 util 类一次，`login`并希望在整个应用程序中获取该实例。

在这里，每个用户都需要有自己的那个 util 类的实例，如何实现这一点。

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:31:55.307

你在寻找[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)吗？

```
private static MyClass instance;
private MyClass(){}

    public static MyClass getInstance() { 
        if (instance != null) {
            return instance; 
        } else {
            return new MyClass();
        }
    }

    public static void setInstance(MyClass inst) {
        instance = inst;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:35:25.887

[使用工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)怎么样。然后您可以将参数传递给工厂方法并为每个用户返回一个新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:49:15.567

我同意@GanGnaMStYleOverFlow 关于单例，但想提供更好的实现版本：

```
public class MyClass {
    private static MyClass instance;
    private MyClass() {}

    public static synchronized MyClass getInstance() { 
        if (instance != null) {
            instance = new MyClass();
        }
        return new MyClass();
    }
} 
```

这个类不能直接实例化，因为构造函数是私有的。您不能创建此类的 2 个实例，因为它由 管理`getInstance()`。`getInstance()`这个实现是线程安全的，因为`synchronized`.

# java - 排序优先队列

> ID：13346551
> 
> 赞同：4
> 
> 时间：2012-11-12T15:30:59.880
> 
> 标签：java, sorting, priority-queue

我在使用 PriorityQueues 时遇到问题，因为我相信它按优先级排序，但是我不确定优先级是什么（我的意思是值是什么以及它来自哪里）。可以使用构造函数中的比较器创建 priorityQueue，我已经尝试过了，但它不起作用。

队列类：

```
public JavaPriorityFlightQueue() {
    super();
    flights = new PriorityQueue(5, new SortQueueViaPriority());
} 
```

比较器：

```
import java.util.Comparator;

public class SortQueueViaPriority implements Comparator {

    public int compare(Object o1, Object o2){
        Flight f1 = (Flight) o1; 
        Flight f2 = (Flight) o2;

        if( f1 == null || f2 == null ){
            if( f1 == f2 ) return 0;
            else if( f2 == null) return +1;
                else return -1;
        }

    Integer i1 = (Integer) f1.getPriority();
    Integer i2 = (Integer) f2.getPriority();
    return i2.compareTo(i1);
    }
} 
```

优先级是一个 int 值，它是航班类别的一部分。我测试这个。

```
JavaPriorityFlightQueue flightQueue = new JavaPriorityFlightQueue();

Flight flight1 = new Flight("0001",9);
Flight flight2 = new Flight("0002",7);
Flight flight3 = new Flight("0003",1);
Flight flight4 = new Flight("0004",2);
Flight flight5 = new Flight("0005",1); 
```

但是 PriorityQueue 没有排序，当我检查它时，值 9 永远不会与任何东西进行比较，结果是没有任何东西被排序。比较类 SortQueueViaPriority 是从该类完美排序的另一个类复制和粘贴的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:38:53.073

我建议你试试下面的例子。如果您将 PriorityQueue 用作队列，则会按顺序删除条目。

```
import java.util.Comparator;
import java.util.PriorityQueue;

public class Main {
    public static void main(String... args) {
        PriorityQueue<Flight> flights = new PriorityQueue<Flight>(5, new SortQueueViaPriority());
        flights.add(new Flight("0001", 9));
        flights.add(new Flight("0002", 7));
        flights.add(new Flight("0003", 1));
        flights.add(new Flight("0004", 2));
        flights.add(new Flight("0005", 1));

        while (!flights.isEmpty())
            System.out.println(flights.remove());
    }
}

class SortQueueViaPriority implements Comparator<Flight> {
    @Override
    public int compare(Flight f1, Flight f2) {
        return Integer.compare(f2.getPriority(), f1.getPriority());
    }
}

class Flight {
    private final String name;
    private final int priority;

    Flight(String name, int priority) {
        this.name = name;
        this.priority = priority;
    }

    public int getPriority() {
        return priority;
    }

    @Override
    public String toString() {
        return "Flight{" +
                "name='" + name + '\'' +
                ", priority=" + priority +
                '}';
    }
} 
```

印刷

```
Flight{name='0001', priority=9}
Flight{name='0002', priority=7}
Flight{name='0004', priority=2}
Flight{name='0003', priority=1}
Flight{name='0005', priority=1} 
```

注意：PriorityQueue 对条目进行排序，以便只有第一个元素是最小的。如果您遍历队列，您将看到所有元素，但它们可能按顺序排列，也可能不按顺序排列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:02:30.297

问题是`Iterator`.As 记录在[`Java doc of PriorityQueue#iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html#iterator%28%29)

> 返回此队列中元素的迭代器。迭代器不会以任何特定顺序返回元素。

由于`toString`使用迭代器，它不会按顺序打印。或者，如果您使用基于迭代器的循环，那么它也将是有序的。

在[Java 文档中`PriorityQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

> 队列检索操作 poll、remove、peek 和 element 访问队列头部的元素。

要按顺序获得结果，您必须使用其中一种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:03:48.613

而不是`Comparator`仅仅使用`Comparable`接口。

您的 Flight 类应该实现 Comparable 接口。然后你需要重写该`compareTo()`方法。在该方法中，您可以根据需要的属性添加自己的排序逻辑。

就像这样：

```
@Override
public int compareTo(Object obj) {
    // TODO Auto-generated method stub
    Flight f = (Flight)obj;
    if(this.a <f.a){
    return 1;
    }else{
        return -1;
    }
} 
```

# asp.net - ASP.NET 使用 JSON 响应时，得到一个 标签

> ID：13346556
> 
> 赞同：0
> 
> 时间：2012-11-12T15:31:17.363
> 
> 标签：asp.net, vb.net, json

编辑2：我发现一些回复提到修改“数据类型”，那是标题吗？`Content-Type`我确实尝试修改`application/json`没有帮助的。

编辑：我仍然有这个问题，只是为了添加这个信息，我发送一个文件作为输入，这里是我发送的 HTTP 标头，我知道“接受”标头不是问题，因为我有另一个请求不会引起任何问题：

`Host: localhost:26479 User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-US,en;q=0.5 Accept-Encoding: gzip, deflate Referer: http://localhost:26479/Home/FileUploadBrowser Content-Type: multipart/form-data; boundary=---------------------------41184676334 Content-Length: 1104`

我有以下控制器方法（仍在进行中）：

```
Function uploadFileToAmazon(ByVal key As String) As ActionResult
        Dim incomingStream As Stream = Me.Request.InputStream
        Dim bucketName As String = ""
        Dim accessKey As String = ""
        Dim secretKey As String = ""
        ConnectToAmazon(bucketName, accessKey, secretKey)
        Dim client As AmazonS3 = Amazon.AWSClientFactory.CreateAmazonS3Client(accessKey, secretKey, RegionEndpoint.USEast1)
        Dim titledRequest As PutObjectRequest
        titledRequest = New PutObjectRequest

        With titledRequest
            .WithBucketName(bucketName)
            .WithKey(key)
            .WithInputStream(incomingStream)
        End With
        Dim response As S3Response = client.PutObject(titledRequest)
        Return Json(New With {Key .success = "true", Key .msg = "uploaded"})
    End Function 
```

原始问题：这是我遇到的问题，由于某种原因，它在完成`<pre>{"success":"true","msg":"uploaded"}</pre>`. 我很困惑，这个`<pre>`标签是从哪里来的，我该如何摆脱它？谢谢

# c# - 确保控制器在 Unity 中有一个无参数的公共构造函数

> ID：13346557
> 
> 赞同：8
> 
> 时间：2012-11-12T15:31:21.957
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, unity-container

我遇到了控制器的这个问题：
尝试创建类型为“ *** .WebMvc.Controllers.HomeController”的控制器时发生错误。确保控制器有一个无参数的公共构造函数。

找到ApiController的解决方案，但没有找到关于普通Controller的任何信息。

从头开始创建新的 MVC 4 项目。

HomeController.cs：

```
public class HomeController : Controller
{
    private IAccountingUow _uow;
    public HomeController(IAccountingUow uow)
    {
        _uow = uow;
    } 
```

UnityDependencyResoler.cs：

```
public class UnityDependencyResolver : IDependencyResolver
{
    private IUnityContainer _container;
    public UnityDependencyResolver(IUnityContainer container)
    {
        _container = container;
        RegisterTypes();
    }
    public object GetService(Type serviceType)
    {
        try
        {
            return _container.Resolve(serviceType);
        }catch
        {
            return null;
        }
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        try
        {
            return _container.ResolveAll(serviceType);
        }catch
        {
            return null;
        }
    }

    private void RegisterTypes()
    {
        _container.RegisterType<IAccountingUow, AccountingUow>();

    }
} 
```

全球.asax

```
 protected void Application_Start()
    {
        //Omitted
        DependencyResolver.SetResolver( new UnityDependencyResolver( new UnityContainer()));

    } 
```

调试后发现，甚至没有尝试解决 IAccountingUow。

我做错了什么？一整天都在想。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T09:50:54.997

发现问题出在哪里。也许有人会面临同样的情况。问题是 Unity 无法解决`IAccountingUow`, 因为对接口的分层依赖。

`AccountingUow`类有两个导体

```
 public AccountingUow( IRepositoryProvider repositoryProvider)
    {
        Init(repositoryProvider);
    }
    public AccountingUow()
    {
        Init( new RepositoryProvider(new RepositoryFactories()) );
    } 
```

Dependency Resolver 不够聪明，无法采用默认的无参数构造器。它尝试采用依赖于接口的构造函数并且无法解决它，因为没有解决它的规则。

我注释掉了依赖于接口的构造函数，一切正常。

我稍后会为第一个构造函数发布解析器，也许有人会使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-15T02:29:21.803

这也可能是由于正在解析的外部类型的参数注入构造函数中的异常。该类型的构造函数的依赖关系可能会成功解析，但如果外部构造函数出现异常，Unity 将报告为“`Type` `Test.Controllers.MyControllerWithInjectedDependencies`没有默认构造函数”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-07T16:11:55.720

安装 Nuget 包 Unit.WebAP 而不是 Unity.MVC5 确保使用 nuget 安装了正确的统一包

我安装了 Unity.MVC5 并面临类似的异常“无参数构造函数”

# java - 选项卡是哪种对象？

> ID：13346558
> 
> 赞同：2
> 
> 时间：2012-11-12T15:31:22.017
> 
> 标签：java, swing, user-interface, paint, jtabbedpane

首先让我解释一下我的意思，以及我打算做什么，我已经知道（并且确实）为了修改 TabbedPane 中选项卡的外观，我需要扩展 XTabbedPaneUI（X = Basic , 或您希望扩展的任何 TabbedPaneUI) 并覆盖 tabbedPaneUI 的某些方法, 并将新 UI 设置为我的 tabbedPane 将使用的 UI ( `myTabbedPane.setUI(new MyNewTabbedPaneUI());`), 例如, 在 ui 的扩展中我可以这样做:

```
 @Override
    protected void paintTabBackground( Graphics g, int tabPlacement,int tabIndex, int x, int y, int w, int h, boolean isSelected ) {        
        Color bgColor = tabPane.getBackgroundAt(tabIndex); 
        //tabPane is the way the BasicTabbedPaneUI makes reference to the JTabbedPane that is making use of him
        //Do the painting of the tab background
    } 
```

方法内的第一行（也是唯一的）将返回我在要绘制的选项卡上设置的背景颜色（`myTabbedPane.setBackgroundAt(0, desiredColor);`) 然后我可以在我自己的 TabbedPaneUI 实现中使用该颜色，但是我应该怎么做才能向每个选项卡添加更多信息，例如我想要绘制的背景百分比，或者任何类型的信息不（不能）存储在 TabbedPaneUI 的实现中，因为它是动态的并且取决于每个单独的选项卡，所以我想，让我们在每个单独的选项卡中添加该信息，然后意识到我不知道是哪种对象是选项卡，我无法在任何地方找到选项卡是什么类型的对象，恐怕java中没有选项卡对象这样的东西，所以任何帮助找出或实现我想做什么？（向每个选项卡或 JTabbedPane 本身添加更多信息，以便在绘制选项卡时使用更多数据？）

PS：我知道这可能有点令人困惑，所以请对我要解释的内容有任何疑问，请发表评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:01:00.973

我会考虑延长`TabbedPaneUI`最后的手段。

*   [您可以设置选项卡的背景颜色，如此处](https://stackoverflow.com/a/8752166/230513)所示。

*   [您可以调整窗格的背景颜色，如此处](https://stackoverflow.com/a/8883460/230513)所示。

*   您可以完全替换选项卡组件，如[`TabComponentsDemo`](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html#eg).

请注意，选项卡组件必须是不透明的。

![imqge](../Images/e2dd6b4657b14ba6219ec97ea511d86b.png)

# php - 尝试将 array_keys 与两级数组一起使用

> ID：13346563
> 
> 赞同：1
> 
> 时间：2012-11-12T15:31:36.633
> 
> 标签：php, arrays, multidimensional-array

尝试将 array_keys 与两级数组一起使用，但不知道如何：

这不起作用：

```
<?php
$myarray['a'][]='b';

$an_id='b';

$eval="a";
$check=array_keys($myarray,$an_id);

if(in_array($eval,$check)){
echo 'found';
}
?> 
```

两级数组。

但这确实：

```
<?php
$myarray['a']='b';

$an_id='b';

$eval="a";
$check=array_keys($myarray,$an_id);

if(in_array($eval,$check)){
echo 'found';
}
?> 
```

单级数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:42:31.467

您的第一个示例不起作用，因为您搜索`b`字符串时`$myarray['a']`包含带有`b`字符串的数组，因此只需替换以下行：

```
$an_id='b'; 
```

对于这个：

```
$an_id= array('b'); 
```

所以你在里面搜索正确的值`$myarray`，这样你的第一个例子就可以工作了。

查看工作[**示例**](http://codepad.org/IAK2TKdm)

# objective-c - 退出segue时如何调用函数？

> ID：13346567
> 
> 赞同：0
> 
> 时间：2012-11-12T15:31:48.673
> 
> 标签：objective-c, ios, uistoryboardsegue

目前，我的应用程序通过 segue 从视图 A 转到视图 B，并在 prepareForSegue 中执行一些功能。如果我想调用视图 B 转到视图 A 时执行的函数（按下导航控制器上的后退按钮后），我该怎么办？

我想我可以将“后退按钮”映射到 IBAction，但我不确定我会怎么做，因为后退按钮是导航控制器的一部分，并且在情节提要上不直接可见。

特别是，视图 B 更新了视图 A 已显示的一些值。我想调用 viewDidLoad 以便视图 A 在加载之前拥有更新的数据。

在 ViewA 的视图控制器中：

```
// update view when it becomes visible
- (void)viewDidAppear:(BOOL)animated {
    [self viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:35:00.770

啊，这不是一个segue本身。这相当于popViewController。

如果要在视图 A 可见时更新视图，则可以在函数中执行此操作...

```
- (void)viewWillAppear:(BOOL)animated 
```

或在函数中

```
- (void)viewDidAppear:(BOOL)animated 
```

这些将在每次视图变得可见时运行。

在这里，您可以运行“updateView”方法或您想要的任何方法。

如果您想将数据传递回视图 A（即视图 B 是“选择城市”视图或其他内容），那么您可以将视图 A 显示为视图 B 的代表。这样，您可以在用户执行某些操作时将信息传回。

而不是运行 viewDidLoad 这样做......

```
- (void)viewDidLoad
{
    [self.button setTitle:@"blah"];

    [self updateView];
}

- (void)viewDidAppear:(BOOL)animated
{
    [self updateView];
}

- (void)updateView
{
    // do something that you want to happen
} 
```

不过，您实际上不应该这样做。从 viewDidAppear 运行 [self updateView] 就足够了。

不过，您不能直接运行 viewDidLoad 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:18:22.747

在视图控制器“A”中，您需要实现该方法`prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`并在内部创建一个 seguesdestinationViewcontroller，下面是一个示例：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
  if ([[segue identifier] isEqualToString:SEGUE_FOR_OPTIONS])
  {
     // Get reference to the destination view controller
      OptionsViewController *optionVC = [segue destinationViewController];
     [optionVC someMethod];
  } 
} 
```

# php - PHP long if 语句不起作用

> ID：13346574
> 
> 赞同：0
> 
> 时间：2012-11-12T15:32:10.263
> 
> 标签：php, if-statement

我有这个 if 语句在这里并且它不起作用

```
if(
    ($division->id == 1 || $division->id == 2) && 
    in_array('member1', $memberships) || 
    in_array('member2', $memberships) ||
    in_array('member3', $memberships) ||
    in_array('member4', $memberships) || 
    ($division->id != 1 || $division->id != 2) 
    && in_array('member5', $memberships))
    {
        return FALSE;
    } else {
        return TRUE;
    } 
```

我想做的是说如果 $division 是 1 或 2 并且如果 member1、member2、member3、member4 在数组 $memberships 中返回 false，如果 $division 不是 1 或 2 并且 member5 在数组中返回 false，其他一切都返回真。

这不起作用，因为 member5 在数组中并且 $division 为 1，它应该返回 true，但它返回 false。

PS - member1-5 只是我在这里使用的名称，因为它们实际上是我数组中的个人信息。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:39:41.767

我会用一系列不同的“if”语句来做这件事，以避免你绕弯子试图解决它。

我根据您的陈述创建了这段代码......

> 我想做的是说如果 $division 是 1 或 2 并且如果 member1、member2、member3、member4 在数组 $memberships 中返回 false，如果 $division 不是 1 或 2 并且 member5 在数组中返回 false，其他一切都返回真。

我想我的逻辑是正确的，我要仔细检查一下：

```
if ($division->id == 1 || $division->id == 2)
{
    if (in_array("member_2", $memberships) || in_array("member_3", $memberships) || in_array('member_3', $memberships) || in_array('member_4', $memberships))
    {
        return false;
    }
    else
    {
        return true;
    }
}
else
{
    if (in_array("member_5", $memberships))
    {
        return false;
    }
    else
    {
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:35:11.727

这些是逻辑分组，每行 1 个。如果这不是您想要的，请使用括号来调整 php 如何评估它。

```
 ($division->id == 1 || $division->id == 2) && in_array('member1', $memberships)
|| in_array('member2', $memberships) 
|| in_array('member3', $memberships) 
|| in_array('member4', $memberships) 
|| ($division->id != 1 || $division->id != 2) && in_array('member5', $memberships)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:49:05.083

尝试：

```
if(
(($division->id == 1 || $division->id == 2) && 
(in_array('member1', $memberships) || 
in_array('member2', $memberships) ||
in_array('member3', $memberships) ||
in_array('member4', $memberships))) || 
(($division->id != 1 || $division->id != 2) 
&& in_array('member5', $memberships)))
{
    return FALSE;
} else {
    return TRUE;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:50:29.780

更少的代码行并不总是意味着它更好，将其分解并使其可读，例如：

```
$output = true;

if($division->id == 1 || $division->id == 2)
{
    if(in_array("member_2", $memberships) || in_array("member_3", $memberships) || in_array('member_4', $memberships))
    {
        $output = false;
    }
}
else
{
    if (in_array("member_5", $memberships))
    {
        $output = false;
    }
}

return $output; 
```

# javascript - 动态 Twitter 小部件

> ID：13346575
> 
> 赞同：1
> 
> 时间：2012-11-12T15:32:12.140
> 
> 标签：javascript, jquery, twitter

我很难找到我需要的东西。简而言之：

如果我有一个站点，并且用户能够输入他们的推特句柄`@user`- 我如何动态拉回他们的推文？

Twitter 允许您制作自己的小部件，但它不是`user`调用，而是一个随机数`1494028230983`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:12:13.937

如果我理解你的问题，那么我建议你使用[Tweet](http://tweet.seaofclouds.com/) jQuery 插件，它会根据给定的用户名从 twitter 中获取推文的数量。它真的很容易使用。

```
$(".tweet").tweet({
    username: username,
    join_text: "auto",
    avatar_size: 32,
    count: 5,
    auto_join_text_default: "we said,", 
    auto_join_text_ed: "we",
    auto_join_text_ing: "we were",
    auto_join_text_reply: "we replied to",
    auto_join_text_url: "we were checking out",
    loading_text: "loading tweets..."
); 
```

您可以使用名称通过 css 应用样式`class`，例如

```
li{margin:5px 0;border:solid gray 1px;border-radius:2px;}
li.tweet_odd{ background:#eee;}
li.tweet_even{ background:#f0fff0;}
li a.tweet_avatar{float:left;margin-right:5px;}
li span.tweet_time a{text-decoration:none;color:green}
li span.tweet_text a{text-decoration:none;color:green}
li span.tweet_text{color:#333}​ 
```

有关更多信息，请查看插件站点。

[**这是一个例子**](http://jsfiddle.net/heera/NNzms/3/)。

# regex - shell 脚本 grep 命令

> ID：13346576
> 
> 赞同：0
> 
> 时间：2012-11-12T15:32:12.683
> 
> 标签：regex, shell, grep

我想使用“grep”命令查找字符串是否包含正斜杠。一开始很容易，我写了下面的脚本。

```
foo=someone/books
if [ `echo "$foo" | grep '/'` ]
then
    echo "has forward slash"
fi 
```

但是，问题出在拐角处，如果我将变量“foo”设置为以下字符串，

```
foo="someone/books in stack" 
```

上面的脚本会失败，因为变量 foo 中有“空格”，当命令展开时，if 语句中的条件如下。

```
grep '/' someone/books in stack 
```

由于“空格”，上述“grep”命令的参数太多是非法的。仅供参考，我尝试使用 case 语句解决这个问题：

```
case $foo in
    */*)
        echo "has forward slash"
        ;;
    *)
        ;;
esac 
```

但是，我不想使用 case 语句，因为它很冗长。那么如何使用 grep 命令或其他命令来解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:47:06.273

您没有正确使用 if 语句。if-condition 中的命令需要被引用，以便在展开时变成单个字符串。像这样：

```
if [ "`echo "$foo" | grep '/'`" ]
then
    echo "has forward slash"
fi 
```

或者更好的是，如果您在 if 条件中检查 grep 的返回码：

```
if $(echo "$foo" | grep -q '/')
then
    echo "has forward slash"
fi 
```

您也可以取消`grep`并改用它：

```
foo="someone/books in stack"
if [[ "$foo" == */* ]]
then
  echo "has forward slash"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:56:52.867

```
foo="someone/books with spaces"
bar=`echo $foo | grep '/'`
if [ $? -eq 0 ]
then
    echo "$foo has forward slash"
fi 
```

这对我有用。

如果您不想以这种方式使用退出状态，我建议您查看 dogbane 的回复以获得更正确的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:42:41.657

冗长并没有错——它通常有助于可维护性。但是，您可以将其简化：您不需要每个换行符，如果您在其中不执行任何操作，也不需要默认分支。

```
case "$foo" in
    */*) echo "has forward slash" ;;
esac 
```

如果您坚持使用 grep，请使用它的返回状态而不是输出：

```
if echo "$foo" | grep -q /; then
    echo "has forward slash"
fi 
```

# html - 偏斜限制下的 div 元素管理

> ID：13346577
> 
> 赞同：0
> 
> 时间：2012-11-12T15:32:15.967
> 
> 标签：html, css

那好吧。我有一个倾斜的按钮，里面有一个 div 去倾斜，使里面的图像和文本看起来不像斜塔。现在我需要在该按钮内部，在按钮的前 25% 有一张图片，在中间 50% 有一个文本，在最后 25% 有另一个图像。我尝试过使用不同的 div，但我遇到了一个问题，具体取决于我定义了这样的内容：

```
.button-wrapper div {
            background: transparent;
            border: 0;
            cursor: pointer;
            padding: 4px 0;
            margin: 0;
            width: 100%;
            font-family:Impact;
        font-size:26px;
        font-weight:normal;
        text-align: center;
            color:#ffffff;
            text-shadow:1px 1px 0px #000000;
            -webkit-transform: skewX(-35deg);
            -moz-transform: skewX(-35deg);
            -o-transform: skewX(-35deg);
            transform: skewX(-35deg);
} 
```

其中 button-wrapper 是我倾斜的按钮。问题是，如果我使用其他 div 会继续倾斜，并且按钮内的元素会挂在另一侧。任何想法，我怎样才能得到我想要的。这是我为html尝试过的：

```
 <div class="button-wrapper" href="sport.php">
      <div id="inner_text">
          <img src="images/icon.gif" width="40px" height="40px">
          <span width="200px">  sometext </span>
          <img src="images/light.gif" width="40px" height="40px">
      </div>
  </div> 
```

更新：这是图像 ![我想要的图片](../Images/34871cd52358fb644ed72560a1d343a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:22:06.207

您可能必须在内部项目上指定不 skewX 值以避免它们从容器继承 CSS。

# python - 使用 Python 导出制表符分隔的文本文件

> ID：13346578
> 
> 赞同：0
> 
> 时间：2012-11-12T15:32:36.487
> 
> 标签：python, excel

我有一些制表符分隔的文本文件，以几种不同的方式格式化，我正在使用 Python 将其导出到 Excel 中。大多数行以如下格式的单元格结尾：

```
'TEMP1', '\r\n' 
```

但其中一些是这样格式化的：

```
'TEMP1\r\n' 
```

Python 没有获取以第二种方式格式化的条目。有什么办法吗？这是我的代码：

```
 for line in current_file:
        try:
            a = line.split("\t")
            for col in range (1, len(a)):
                xlSheet.Cells(output_row, col).Value = a[col - 1]
            output_row += 1
        except ValueError:
            pass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:44:59.647

由于您似乎将其`len(a)`用作引用列号的一种方式，因此我建议您使用`enumerate`，它返回项目的索引。您当前的问题是您没有包括范围中的最后一项，这在最后一项是换行符的情况下很好。您可以尝试的一件事是剥离每一行，这将删除换行符：

```
for col_num, col_val in enumerate(a):
    if col_val.strip():
        xlSheet.Cells(output_row, col_num + 1).Value = col_val.strip() 
```

# c++ - 将 DWORD 添加到所有注册表子文件夹

> ID：13346580
> 
> 赞同：1
> 
> 时间：2012-11-12T15:32:41.873
> 
> 标签：c++, registry, directory, subdirectory

我一直在搞乱这段代码，但在我的一生中，无论我搜索多少，我都找不到任何有关向某个注册表文件夹拥有的所有子文件夹添加 DWORD 值的信息。

我指定添加所有 DWORD 值的文件夹的行是这个

```
HKEY hKey = OpenKey(HKEY_LOCAL_MACHINE,L"SYSTEM\\CurrentControlSet\\services\\Tcpip\\Parameters\\Interfaces\\"); 
```

它将它们添加到 Interface 文件夹中，但我不想将 DWORD 值添加到注册表中 Interface 文件夹具有的所有现有子文件夹中。我尝试了几件事，但它完全搞砸了。

有没有人有任何提示？我想我在寻找这个问题的答案时使用了错误的术语。

先谢谢各位了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:41:09.933

1.  [`RegOpenKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724895%28v=vs.85%29.aspx)用or打开父键[`RegOpenKeyEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724897%28v=vs.85%29.aspx)
2.  [`RegEnumKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724861%28v=vs.85%29.aspx)使用或[`RegEnumKeyEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724862%28v=vs.85%29.aspx)在循环中枚举父级的所有子键
3.  对于每个子键，使用[`RegSetValueEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724923%28v=vs.85%29.aspx)
4.  关闭父键[`RegCloseKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724837%28v=vs.85%29.aspx)

# c# - 从 C# 运行包含 NuGet 命令的批处理文件

> ID：13346588
> 
> 赞同：1
> 
> 时间：2012-11-12T15:33:02.590
> 
> 标签：c#, asp.net, shell, nuget

我有一个包含以下命令的批处理文件：

```
cd C:\myfolder
NuGet Update -self
NuGet pack mypackage.nuspec 
```

myfolder 包含 mypackage.nuspec 和 NuGet.exe。我尝试使用以下函数使用 C# 运行此命令：

```
 private static int ExecuteCommand(string path)
        {
            ProcessStartInfo ProcessInfo;
            Process Process;

            ProcessInfo = new ProcessStartInfo(path);
            ProcessInfo.CreateNoWindow = true;
            ProcessInfo.UseShellExecute = false;
            ProcessInfo.WorkingDirectory = new System.IO.FileInfo(path).DirectoryName;
            ProcessInfo.EnvironmentVariables["EnableNuGetPackageRestore"] = "true";

            // *** Redirect the output ***
            ProcessInfo.RedirectStandardError = true;
            ProcessInfo.RedirectStandardOutput = true;

            Process = Process.Start(ProcessInfo);
            Process.WaitForExit();

            // *** Read the streams ***
            string output = Process.StandardOutput.ReadToEnd();
            string error = Process.StandardError.ReadToEnd();

            int ExitCode = Process.ExitCode;
            Process.Close();
            return ExitCode;

        } 
```

但是，我的命令没有执行。是什么导致了这种行为，解决方案是什么？这些字符串将来可能会使用，然后我会更新我的问题（只是为了防止批评:)）。

这是函数的最终版本：

```
 private static ShellCommandReturn ExecuteCommand(string path)
    {
        ProcessStartInfo processInfo;
        Process process;

        processInfo = new ProcessStartInfo(path);
        processInfo.CreateNoWindow = true;
        processInfo.UseShellExecute = false;
        processInfo.WorkingDirectory = new System.IO.FileInfo(path).DirectoryName;
        processInfo.EnvironmentVariables["EnableNuGetPackageRestore"] = "true";

        // *** Redirect the output ***
        processInfo.RedirectStandardError = true;
        processInfo.RedirectStandardOutput = true;

        process = Process.Start(processInfo);
        process.WaitForExit();

        // *** Read the streams ***
        string output = process.StandardOutput.ReadToEnd();
        string error = process.StandardError.ReadToEnd();

        int exitCode = process.ExitCode;
        process.Close();
        return new ShellCommandReturn { Error = error, ExitCode = exitCode, Output = output };
    } 
```

ShellCommandReturn 是一个简单的自定义类，其中包含一些数据成员，其中存储了 shell 命令的错误、输出和退出代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:38:23.030

编辑：经过一定程度的合作:)

问题是这是在 Web 应用程序的上下文中执行的，它没有设置相同的环境变量。

显然设置：

```
startInfo.EnvironmentVariables["EnableNuGetPackageRestore"] = "true" 
```

（使用下面我的最终代码的命名）解决了这个问题。

* * *

**老答案**（仍然值得一读）

看看这段代码：

```
ProcessInfo = new ProcessStartInfo(path);
ProcessInfo.CreateNoWindow = false;
ProcessInfo.UseShellExecute = true;
ProcessInfo.WorkingDirectory = new System.IO.FileInfo(path).DirectoryName;

Process = Process.Start(path); 
```

您正在创建一个`ProcessStartInfo`，但随后完全忽略它。您应该将其传递给`Process.Start`. 您还应该重命名变量。通常，局部变量在 C# 中以小写字母开头。此外，如果可能，最好在首次使用时初始化变量。哦，还有导入命名空间，这样您就不会`System.IO.FileInfo`在代码中使用完全限定的名称。最后，对象初始化器对于以下类很有用`ProcessStartInfo`：

```
var startInfo = new ProcessStartInfo(path) {
    CreateNoWindow = false,
    UseShellExecute = true,
    WorkingDirectory = new FileInfo(path).DirectoryName;
};
var process = Process.Start(startInfo); 
```

# android - 绘制视图及其所有子项

> ID：13346589
> 
> 赞同：14
> 
> 时间：2012-11-12T15:33:09.390
> 
> 标签：android, android-canvas, android-view

我正在尝试将视觉效果应用于视图组。我的想法是获取视图组的位图，将其缩小，向上扩展，然后将其绘制在视图组上，使其具有块状、低质量的效果。

我已经使用这段代码完成了大部分工作：

```
public class Blocker {

    private static final float RESAMPLE_QUALITY = 0.66f; // less than 1, lower = worse quality

    public static void block(Canvas canvas, Bitmap bitmap_old) {
        block(canvas, bitmap_old, RESAMPLE_QUALITY);
    }

    public static void block(Canvas canvas, Bitmap bitmap_old, float quality) {
        Bitmap bitmap_new = Bitmap.createScaledBitmap(bitmap_old, Math.round(bitmap_old.getWidth() * RESAMPLE_QUALITY), Math.round(bitmap_old.getHeight() * RESAMPLE_QUALITY), true);
        Rect from = new Rect(0, 0, bitmap_new.getWidth(), bitmap_new.getHeight());
        RectF to = new RectF(0, 0, bitmap_old.getWidth(), bitmap_old.getHeight());
        canvas.drawBitmap(bitmap_new, from, to, null);
    }
} 
```

我只是传入画布进行绘制和需要按比例缩小+放大的位图，效果很好。

```
public class BlockedLinearLayout extends LinearLayout {

    private static final String TAG = BlockedLinearLayout.class.getSimpleName();

    public BlockedLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        applyCustomAttributes(context, attrs);
        setup();
    }

    public BlockedLinearLayout(Context context) {
        super(context);
        setup();
    }

    private void setup() {
        this.setDrawingCacheEnabled(true);
    }

    @Override
    public void draw(Canvas canvas) {
        super.draw(canvas);
        // block(canvas); If I call this here, it works but no updates
    }

    @Override
    public void onDraw(Canvas canvas) {
        // block(canvas); If I call this here, draws behind children, still no updates
    }

    private void block(Canvas canvas) {
        Blocker.block(canvas, this.getDrawingCache());
    }
} 
```

我遇到的问题在我的视图组中。如果我在视图组的绘图中运行 block 方法，它会绘制所有内容，但不会在子视图更改时更新。我用 Log 跟踪了函数调用，draw 方法似乎正在运行，但没有任何变化。

我也尝试在 onDraw 中实现这一点。这会在所有子视图后面绘制位图，并且它们也没有更新。

谁能解释我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-12T15:41:40.910

试试这个：

```
@Override
protected void dispatchDraw(Canvas canvas) {
    // call block() here if you want to draw behind children
    super.dispatchDraw(canvas);
    // call block() here if you want to draw over children
} 
```

并在每次更改孩子时调用 destroyDrawingCache() 然后 buildDrawingCache() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-26T08:54:12.057

`Draw()`方法对你很有效。

我现在正在尝试以圆形制作计数时间视图，当时间流逝时，视图会减小他的角度。它用于覆盖个人资料照片（圆形照片）。

# iphone - 为tableView在外面触摸时隐藏键盘

> ID：13346591
> 
> 赞同：0
> 
> 时间：2012-11-12T15:33:15.517
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [在 UITextField 之外的任何地方触摸时关闭键盘](https://stackoverflow.com/questions/11274119/dismiss-keyboard-on-touch-anywhere-outside-uitextfield)

界面生成器中的 MyViewController ：

![在此处输入图像描述](../Images/75d41fca922171a3d8020c8682a964a3.png)

在我的自定义 TableViewCell 中，我有一个 TextField。`My plan is disappear KeyPad when User Clicks outside the touchpad.`

我无法使用`UITapGestureRecognizer`

在 viewDidLoad 中：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideKeyboard)];
[self.tableView addGestureRecognizer:gestureRecognizer]; 
```

那我应该如何让它工作`cell.TextField`呢？

[我在这里](https://stackoverflow.com/questions/2321038/dismiss-keyboard-by-touching-background-of-uitableview)读到了这个解决方案：

```
[self.view endEditing:YES]; 
```

或者

```
[[self.tableView superView] endEditing]; 
```

我也不能让它工作。我应该在哪里使用它们？

或者如果你有更好的方法，请告诉我。

**编辑**

我无法让它工作：

```
@property (nonatomic, strong) UITextField *cellTextField; 
```

在 viewDidLoad 中：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideKeyboard)];
    [self.settingTableView addGestureRecognizer:gestureRecognizer]; 
```

我们有：

```
- (void) hideKeyboard {
    [self.cellTextField resignFirstResponder];
} 
```

和 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    SettingTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    self.cellTextField = cell.dataEdit; 
```

我的错是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:42:08.143

如果您放置全屏自定义 UIButton，则可以隐藏键盘。然后使用此自定义 UIButton 附加此方法。在实施此方法之前，在界面生成器中设置 UITextField 标记 =1。

```
-(IBAction)HideKeyboard
{
    [[self.view viewWithTag:1]resignFirstResponder];
} 
```

注意：如果您想通过在 CustomCell 中单击来隐藏键盘，则将此 UIButton 放在那里，或者您可以像在代码中所做的那样使用手势识别调用此方法，而无需使用自定义 UIButton。并确保您连接 UITextField 委托。希望这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:20:35.973

你可以试试这个。

```
- (void) hideKeyboard {
    [self.view endEditing:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:40:14.030

你可以向你的视图控制器添加一个属性，比如

`@property (nonatomic, strong) UITextField *cellTextField`

然后将 cell.TextField 分配给它。

在`hideKeyboard:`你可以通过做关闭键盘

`[cellTextField resignFirstResponder];`

您应该调用`resignFirstResponder`textField 本身，而不是控制器的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:42:29.847

添加`[cellTextField resignFirstResponder];`希望这有效...

也许看看[UITextFieldDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)，特别是`- (BOOL)textFieldShouldReturn:(UITextField *)textField`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T08:34:47.233

您可以通过插入以下方法来完成此任务

您必须实现 UITextFieldDelegate

您必须在情节提要中或开始加载表格的单元格时为文本字段设置标签

```
-(void)textFieldDidBeginEditing:(UITextField *)textField
{
    self.currentIndexPath = [(UITableView*)textField.superview.superview.superview indexPathForCell:(UITableViewCell*)textField.superview.superview];
    self.currentTableView = (UITableView*)textField.superview.superview.superview;
    self.keyboardIsShown = YES;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CGPoint currentPoint = [touch locationInView:self.view];
    if(self.keyBoardIsShown)
    {
        [self dismissKeyboard:currentPoint UsedTableView:self.myTableView IndexPathForRow:self.currentIndexPath TexFieldTag:tag];
        self.keyBoardIsShown = NO;
    }
}

-(void)dismissKeyboard:(CGPoint)currentPoint UsedTableView:(UITableView*)table IndexPathForRow:(NSIndexPath*)indexPath TexFieldTag:(int)tag
{
    UITableViewCell *cell = [table cellForRowAtIndexPath:indexPath];
    if(!CGRectContainsPoint([self.view convertRect:[cell viewWithTag:tag].frame fromView:[cell viewWithTag:tag].superview.superview], currentPoint))
    {
        [(UITextField*)[cell viewWithTag:tag] resignFirstResponder];
    }
} 
```

# php - 使用条件 Yii 更新记录

> ID：13346592
> 
> 赞同：0
> 
> 时间：2012-11-12T15:33:23.050
> 
> 标签：php, yii

我正在尝试更新数据库中在 Yii 中具有特定值作为“位置”的行。

现在我可以使用 update() 方法了。但这不允许我指定条件。我试图避免 CDbCriteria 和本机 sql 以保持我的代码干净。有没有人建议用条件更新 yii 中的单个记录？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:43:00.763

你看到方法了`updateAll`吗？

> `CActiveRecord::updateAll($attributes, $condition='', $params=array())`
> 
> 使用指定条件更新记录。
> 
> **参数**：
> *数组* $attributes - 要更新的属性列表 (name=>$value) 混合
> $condition - 查询条件或条件
> *数组* $params 要绑定到 SQL 语句的参数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:39:53.083

updateAll 是 CActiveRecord 中的一个方法，它可以让你指定条件[http://www.yiiframework.com/doc/api/1.1/CActiveRecord#updateAll-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#updateAll-detail)

# apache - 我可以使用 .htaccess 重定向到目录中的最新文件吗？

> ID：13346595
> 
> 赞同：5
> 
> 时间：2012-11-12T15:33:25.903
> 
> 标签：apache, .htaccess, redirect

我想为以下情况创建 .htaccess 规则：

*   我有一个文件链接：[http ://something.com/images/some/image_001.png](http://something.com/images/some/image_001.png)
*   如果此文件不存在，我想重定向到 /images/some 目录中的最新文件

使用 .htaccess 可以实现这样的事情吗？我知道我可以使用 RewriteCond 检查文件是否存在，但不知道是否可以重定向到最新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:09:53.113

重写 CGI 脚本是 .htaccess 的唯一选择，从技术上讲，您可以在**httpd.conf**文件中使用带有 RewriteRule的程序**化 RewriteMap 。**

 **该脚本可以直接为文件提供服务，因此通过内部重写，逻辑可以完全在服务器端，例如

.htaccess 规则

```
RewriteEngine On 
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-s
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^images/(.*)$  /getLatest.php [L] 
```

其中**getLatest.php**类似于：

```
<?php

$dir = "/srv/www/images";
$pattern = '/\.(jpg|jpeg|png|gif)$/';
$newstamp = 0;
$newname = "";

if ($handle = opendir($dir)) {
   while (false !== ($fname = readdir($handle)))  {
     // Eliminate current directory, parent directory            
     if (preg_match('/^\.{1,2}$/',$fname)) continue;
     // Eliminate all but the permitted file types            
     if (! preg_match($pattern,$fname)) continue;
     $timedat = filemtime("$dir/$fname");
     if ($timedat > $newstamp) {
        $newstamp = $timedat;
        $newname = $fname;
      }
     }
    }
closedir ($handle);

$filepath="$dir/$newname";
$etag = md5_file($filepath); 

header("Content-type: image/jpeg");
header('Content-Length: ' . filesize($filepath));
header("Accept-Ranges: bytes");
header("Last-Modified: ".gmdate("D, d M Y H:i:s", $newstamp)." GMT"); 
header("Etag: $etag"); 
readfile($filepath);
?> 
```

注意：代码部分从以下答案中借用：[PHP：获取目录中的最新文件添加](https://stackoverflow.com/questions/1491020)**

# javascript - $(window).resize 事件无法 100% 顺利运行

> ID：13346602
> 
> 赞同：1
> 
> 时间：2012-11-12T15:33:45.403
> 
> 标签：javascript, jquery

我在应该顺利注入滑块的页面 (#home) 上运行以下代码，或者如果页面容器低于 480 像素，则保持页面不变。

我无法让调整大小事件 100% 顺利进行。

如果我缩小窗口，脚本（js.slide.js）不会被触发，但内容将被加载到（slide.php）中。如果我继续将窗口缩小一点，一切都会好起来的。

谁能告诉我如何让这个工作顺利进行。代码如下

```
$(document).ready(function(){

if ($("#home").length > 0 ){ 

var homeSlideShow = {
    $promoArea: $('#promo-area'),
    $currentContent: $('#promo-area').contents(),
    $pageContainer: $('.page'),

    init: function(){
        var hSS = homeSlideShow;            
        if (hSS.$pageContainer.width() > 480 ){
            hSS.setTheSlideShow();
        } else{
            hSS.$promoArea.html(hSS.$currentContent);
        }

    },

    setTheSlideShow: function(){
        var hSS = homeSlideShow;                        
        $.getScript(myscript_wp_vars.temp_dir + '/js/slide.js', function(){
        hSS.$promoArea.load(myscript_wp_vars.temp_dir + '/libs/slide.php #c4u-slide',
        function(){
        var options = {
                    preloader: false,
                    nextButton: true,
                    prevButton: true,
                    animateStartingFrameIn: true,
                    transitionThreshold: 250                        
                };

                var sequence = $("#sequence").sequence(options).data("sequence"),
                    $slideShow = $("#c4u-slide");
                });

        });
    }   

};

//
//  Check page size
//
if (homeSlideShow.$pageContainer.width() > 480 ){
    homeSlideShow.setTheSlideShow();
}

//
//  On window resize
//
$(window).resize(function() {   
    homeSlideShow.init();   
});

}// END home.length

});//End $(document).ready(function() 
```

提前感谢您的任何帮助或建议。

干杯

诺埃尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:38:38.340

window.resize 事件被触发多次，具体取决于浏览器的行为。我建议你试试这个：

```
var timeoutResize;
$(window).resize(function(){ 
        if(typeof timeoutResize != 'undefined') clearTimeout(timeoutResize);
        timeoutResize = setTimeout(function(){homeSlideShow.init();},50);

    }); 
```

# oracle-apex - 右侧 APEX 4.1 Shuttle Null

> ID：13346605
> 
> 赞同：1
> 
> 时间：2012-11-12T15:33:50.990
> 
> 标签：oracle-apex

APEX 版本：4.1.1.00.23

我有一个穿梭车，它根据从选择列表中选择的内容填充正确的站点。每当从选择列表中选择一个项目时，右侧面板上都会填充正确的一个或多个项目，但始终会添加一个空值。我如何获得空乘？

![在此处输入图像描述](../Images/39b1c9e6f7bb962511dcd9899c78aa2b.png)

Shuttle 名称：P51_Shuttle 选择列表名称：P51_Analyst

这是我的代码： HTML 标头：

```
<script type="text/javascript">

function LoadRightPane()
{ 
  var objDQAnalyst = document.getElementById("P51_DQ_ANALYST");
  var ajaxRequest = new htmldb_Get(null,&APP_ID.,'APPLICATION_PROCESS=get_DQAttributes',0);
  ajaxRequest.add('P51_DQ_ANALYST',objDQAnalyst.value);
  ajaxResult = ajaxRequest.get();

//alert(ajaxResult);

  if(ajaxResult)
    {  

    var shuttleRight = document.getElementById("P51_SHUTTLE_RIGHT");
      shuttleRight.options.length = 0;
      var attrArray = ajaxResult.split("~colsep~");
      for(var i=0; i < attrArray.length; i++) {
        shuttleRight.options[i] = new Option(attrArray[i], attrArray[i]);
      }
    }
    else
    {
      shuttleRight.options.length = 0;
    }
  ajaxRequest = null; 
} 

function moveitem(item) {
return;
   s_left = document.getElementById("P51_SHUTTLE_TO_LEFT");
   db.transaction(function(tx){
      tx.executeSql('select distinct DQ_ATTRIBUTE from DQ_MANUAL_EDIT where DQ_ANALYST = ?',[item],function(tx,results)
  {
      for (var i=0; i < s_left.options.length;i++)
   {
     if (results.value == s_left.options[i].value) 
     {
         s_left.options[i].selected = true;
         g_Shuttlep_v15.move();
     }
   }
  });
 });
}

</script> 
```

页面 HTML 正文属性：

```
onLoad="Javascript:LoadRightPane();" 
```

调用的应用程序/页面进程 (get_DQAttributes)

```
DECLARE

L_RETURN VARCHAR2(2000):= NULL ;

BEGIN

BEGIN

FOR rec IN (    
select distinct dq_attribute 
from DQ_MANUAL_EDIT
where dq_analyst = :P51_DQ_ANALYST
)    
LOOP      
L_RETURN := L_RETURN || rec.dq_attribute || '~colsep~' ;

END LOOP;

end;

htp.prn(L_RETURN);

END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:31:02.157

您的 ajax 进程总是返回后缀为`~colsep~`

当您在 firebug 中运行这样的字符串时：

```
"test1~colsep~".split("~colsep~") 
```

结果将是一个包含 2 个元素的数组：

```
["test1", ""] 
```

所以你的 NULL 元素来源于那个。要解决此问题，只需调整 ajax 进程以使用[RTRIM](http://www.techonthenet.com/oracle/functions/rtrim.php)修剪最后一个分隔符。

```
DECLARE
   L_RETURN VARCHAR2(2000):= NULL ;
BEGIN
   FOR rec IN ( select distinct dq_attribute 
                  from DQ_MANUAL_EDIT
                 where dq_analyst = :P51_DQ_ANALYST)    
   LOOP      
      L_RETURN := L_RETURN || rec.dq_attribute || '~colsep~' ;
   END LOOP;
   l_return := rtrim(l_return, '~colsep~');

   htp.prn(L_RETURN);
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:03:44.890

关于汤姆的答案的一切都是正确的。我不得不对该行进行一项修改

```
l_return := rtrim(l_return, '~colsep~'); 
```

运行该代码时，最后两个字母将被删除。如果我在穿梭车上有多个物品，第一个可以，但第二个会被切断。例如：使用代码：`l_return := rtrim(l_return, '~colsep~');` 梭子的右侧面板看起来像这样

```
Score
Da 
```

但实际的文字应该是

```
Score
Data 
```

所以我使用了'substr'函数，现在它正在工作

```
l_return := substr(l_return,0,(length(l_return)-8)); 
```

这是整个代码

```
DECLARE
   L_RETURN VARCHAR2(2000):= NULL ;
BEGIN
   FOR rec IN ( select distinct dq_attribute
                  from DQ_MANUAL_EDIT
                 where dq_analyst = :P51_DQ_ANALYST)    
   LOOP      
      L_RETURN := L_RETURN || rec.dq_attribute || '~colsep~' ;
   END LOOP;
      L_RETURN := substr(l_return,0,(length(l_return)-8));

   htp.prn(L_RETURN);
END; 
```

**谢谢汤姆让我的精神球滚滚而来！！！**

# ssms - 将数据从 MSSQL 导出到 H2 数据库

> ID：13346612
> 
> 赞同：1
> 
> 时间：2012-11-12T15:34:08.937
> 
> 标签：ssms, h2

我正在处理从 MSSQL 数据库到 H2 数据库的数据（仅限表中的数据）转换。数据模型是相同的，除了可能有一些小的变化。

我的第一个想法是将表中的数据导出为 INSERT INTO 语句（[如此处](https://stackoverflow.com/questions/1515969/exporting-data-in-sql-server-as-insert-into)），并在对 H2 数据库进行一些调整后运行这些语句。但是我遇到了 datetime 的问题，MSSQL 将其导出为一个像 datetime 一样的数字：

```
CAST(0x000092AC00000000 AS DateTime) 
```

而H2似乎不明白这一点。有没有办法使这个解决方案工作（强制 SSMS 以不同的方式导出日期时间，以便 H2 可以读取它）？我正在使用 SSMS 2008 R2。我也愿意接受其他解决此问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:05:18.777

您是否尝试过 Open DB Copy？
[http://sourceforge.net/projects/opendbcopy/](http://sourceforge.net/projects/opendbcopy/)

# sql - 作为列的表达式和“没有这样的列”错误

> ID：13346613
> 
> 赞同：0
> 
> 时间：2012-11-12T15:34:12.837
> 
> 标签：sql

我有一个简单的查询：

```
SELECT ((interest_step / 12) * 365 + (MOD(interest_step, 12) * 30)) AS "days"
FROM "negotiations"."addon" WHERE (days <= 72) 
```

但是当我执行它时，我得到一个错误：列'days'不存在。

我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:35:14.690

试试这个：

```
SELECT * 
FROM
(
   SELECT
     ((interest_step / 12) * 365 + (MOD(interest_step, 12) * 30)) AS "days" 
   FROM "negotiations"."addon" 
) t
WHERE (days <= 72) 
```

那是因为`WHERE`子句在子句之前执行`SELECT`，因此它不会看到别名`days`。您应该将其包含在子查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:36:36.173

您不能在生成它的同一选择语句中引用列别名，这为您提供了两种选择：

```
SELECT ((interest_step / 12) * 365 + (MOD(interest_step, 12) * 30)) AS "days"
FROM "negotiations"."addon" 
WHERE (((interest_step / 12) * 365 + (MOD(interest_step, 12) * 30)) <= 72) 
```

或者

```
SELECT *
FROM
(
  SELECT ((interest_step / 12) * 365 + (MOD(interest_step, 12) * 30)) AS "days"
  FROM "negotiations"."addon" 
) A
WHERE (days <= 72) 
```

# android - 使用 Renderscript 调整位图大小

> ID：13346618
> 
> 赞同：2
> 
> 时间：2012-11-12T15:34:20.070
> 
> 标签：android, bitmap, resize, scale, renderscript

我目前正在从事一个必须使用 RenderScript 的项目，因此我开始学习它，这是一项很棒的技术，因为就像 openGL 一样，它可以让您使用进入本机级别的计算代码，并且不会不必使用 dalvik vm。这部分代码的处理速度比使用普通 android 代码要快得多。我开始使用图像处理，我想知道的是：

是否可以使用 RenderScript 调整位图的大小？这应该比使用 android 代码调整位图大小要快得多。另外，renderscript 可以处理大于 48mB 的信息（每个进程在某些手机上的限制）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:48:01.270

虽然您可以使用 Rendscript 来调整位图大小，但我不确定这是否是最佳选择。快速浏览一下 Android 代码库会发现，Java API 确实会进入本机代码来进行位图调整大小，但如果调整大小算法不符合您的需要，您将不得不实现自己的。

SO上有很多答案可以有效地缩放位图。我的建议是尝试这些，如果他们仍然没有按照您的意愿行事，无论是尽快还是结果如何在视觉上显示，然后调查编写您自己的。如果您仍想自己编写，请使用可用的性能工具来查看您是否真的更快或只是重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-18T06:18:41.287

您可以使用以下功能调整图像大小。

```
private Bitmap resize(Bitmap inBmp) {
    RenderScript mRs = RenderScript.create(getApplication());
    Bitmap outBmp = Bitmap.createBitmap(OUTPUT_IMAGE_WIDTH, inBmp.getHeight() * OUTPUT_IMAGE_WIDTH /inBmp.getWidth(), inBmp.getConfig());
    ScriptIntrinsicResize siResize = ScriptIntrinsicResize.create(mRs);
    Allocation inAlloc = Allocation.createFromBitmap(mRs, inBmp);
    Allocation outAlloc = Allocation.createFromBitmap(mRs, outBmp);
    siResize.setInput(inAlloc);
    siResize.forEach_bicubic(outAlloc);
    outAlloc.copyTo(outBmp);
    inAlloc.destroy();
    outAlloc.destroy();
    siResize.destroy();
    return outBmp;
} 
```

`OUTPUT_IMAGE`是指定输出图像宽度的整数值。

注意：在使用 RenderScript 分配时，您必须非常小心，因为它们会导致内存泄漏。

# java - Intellij：识别 jar 中的 spring 配置文件

> ID：13346619
> 
> 赞同：2
> 
> 时间：2012-11-12T15:34:23.957
> 
> 标签：java, spring, ide, intellij-idea

我有一个包含一个 jar 的项目，它附带一个 spring 配置文件。当我在单元测试中引用此文件时，IntelliJ Idea Ultimate 11.1 版给我一个红色错误/警告：

```
@ContextConfiguration(locations={"/application_context.xml"}) 
```

我收到来自 IntelliJ 的 /application_context.xml 的红色警告，它以红色突出显示。但是，该文件被正确引用并且我的测试运行良好。因此，这似乎只是一些 IntelliJ 配置问题，而不是我指代课程的实际问题。此文件与 IntelliJ 识别的其他文件之间的唯一区别是此文件位于 JAR 中。

配置 IntelliJ 的正确方法是什么，或者在 ContextConfiguration 注解中引用此文件，以便它识别我的 XML 配置文件？

答案：Crazy Coder 是正确的，这看起来像一个错误。明确指定类路径可以解决问题：

```
@ContextConfiguration(locations={"classpath:/application_context.xml"}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:40.607

看起来像[IDEA-84470](http://youtrack.jetbrains.com/issue/IDEA-84470)。[请检查您在IDEA 12 Preview](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)中是否有同样的问题。

# delphi - 如何获取可用字体列表 - Delphi XE3 + Firemonkey 2？

> ID：13346620
> 
> 赞同：6
> 
> 时间：2012-11-12T15:34:26.280
> 
> 标签：delphi, firemonkey, delphi-xe3, firemonkey-fm2

为了创建字体选择器，我需要获取 Firemonkey 可用的字体列表。由于 FireMonkey 中不存在 Screen.Fonts 我认为我需要使用 FMX.Platform 吗？例如：

```
if TPlatformServices.Current.SupportsPlatformService(IFMXSystemFontService, IInterface(FontSvc)) then
  begin
    edit1.Text:= FontSvc.GetDefaultFontFamilyName;
  end
  else
    edit1.Text:= DefaultFontFamily; 
```

但是，唯一可用的功能是返回默认字体名称。

目前我并不担心跨平台支持，但如果我要迁移到 Firemonkey，我宁愿尽可能不依赖 Windows 调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-19T21:51:21.537

跨平台解决方案应在条件定义中一起使用 MacApi.AppKit 和 Windows.Winapi。

首先将这些代码添加到您的 uses 子句中：

```
{$IFDEF MACOS}
MacApi.Appkit,Macapi.CoreFoundation, Macapi.Foundation,
{$ENDIF}
{$IFDEF MSWINDOWS}
Winapi.Messages, Winapi.Windows,
{$ENDIF} 
```

然后将此代码添加到您的实现中：

```
{$IFDEF MSWINDOWS}
function EnumFontsProc(var LogFont: TLogFont; var TextMetric: TTextMetric;
  FontType: Integer; Data: Pointer): Integer; stdcall;
var
  S: TStrings;
  Temp: string;
begin
  S := TStrings(Data);
  Temp := LogFont.lfFaceName;
  if (S.Count = 0) or (AnsiCompareText(S[S.Count-1], Temp) <> 0) then
    S.Add(Temp);
  Result := 1;
end;
{$ENDIF}

procedure CollectFonts(FontList: TStringList);
var
{$IFDEF MACOS}
  fManager: NsFontManager;
  list:NSArray;
  lItem:NSString;
{$ENDIF}
{$IFDEF MSWINDOWS}
  DC: HDC;
  LFont: TLogFont;
{$ENDIF}
  i: Integer;
begin

  {$IFDEF MACOS}
    fManager := TNsFontManager.Wrap(TNsFontManager.OCClass.sharedFontManager);
    list := fManager.availableFontFamilies;
    if (List <> nil) and (List.count > 0) then
    begin
      for i := 0 to List.Count-1 do
      begin
        lItem := TNSString.Wrap(List.objectAtIndex(i));
        FontList.Add(String(lItem.UTF8String))
      end;
    end;
  {$ENDIF}
  {$IFDEF MSWINDOWS}
    DC := GetDC(0);
    FillChar(LFont, sizeof(LFont), 0);
    LFont.lfCharset := DEFAULT_CHARSET;
    EnumFontFamiliesEx(DC, LFont, @EnumFontsProc, Winapi.Windows.LPARAM(FontList), 0);
    ReleaseDC(0, DC);
  {$ENDIF}
end; 
```

现在您可以使用 CollectFonts 程序。不要忘记将非零 TStringlist 传递给过程。典型的用法可能是这样的。

```
procedure TForm1.FormCreate(Sender: TObject);
var fList: TStringList;
    i: Integer;
begin
  fList := TStringList.Create;
  CollectFonts(fList);
  for i := 0 to fList.Count -1 do
  begin
     ListBox1.Items.Add(FList[i]);
  end;
  fList.Free;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T20:39:02.233

我使用了以下解决方案：

```
 Printer.ActivePrinter;
  memo1.lines.AddStrings(Printer.Fonts); 
```

在使用中声明 FMX.Printer。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-30T12:53:17.977

 `````
unit Unit1;

interface

uses
  Windows, SysUtils, Classes, Forms, Controls, StdCtrls;

type
  TForm1 = class(TForm)
    ComboBox1: TComboBox;
    procedure FormShow(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.DFM}                      

procedure TForm1.FormShow(Sender: TObject);
begin
  ComboBox1.Items.Assign(Screen.Fonts);
  ComboBox1.Text := 'Fonts...';
end;

end. 
`````

# ajax - 在 Wordpress 中单击“更多”按钮添加多个投资组合项目

> ID：13346626
> 
> 赞同：0
> 
> 时间：2012-11-12T15:34:59.057
> 
> 标签：ajax, wordpress, load, portfolio

我在 wordpress 中有一个代码，它可以让我获得我在后端提供的前 8 个投资组合图像。应该有 20 个投资组合项目的限制，我想要一个按钮加载更多，每次单击按钮时，需要再加载 4 个投资组合项目。新项目应该加载ajax，有人知道吗？

```
<?php
                $posts = get_posts(array(
                    'numberposts' => 8,
                    'post_status' => 'publish',
                    'post_type' => 'cases',
                    'hierarchial' => true,
                    'orderby' => 'menu_order',
                    'order' => 'ASC'
                ));

                $key = 0;

                if($posts){
                    foreach($posts as $post){
                        echo '<div class="portfolio-item-'.$key.'" data-nonce="'. $nonce .'">';
                            echo '<a href="#" rel="'.get_the_ID().'" class="portfolio-link">';
                                echo get_the_post_thumbnail($post->ID, 'portfolio-size');
                            echo '</a>';
                        echo '</a></div>'; /*END PORTFOLIO-item*/

                        $key ++;
                    }

                    echo '<div class="buttonmore">Click me to see more work</div>';
                }

            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:28:57.080

我在过去的项目中使用 Infinite Scroll 来完成同样的事情。我会试一试。

[https://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

# php - 将 JavaScript RSA 函数转换为 PHP 函数

> ID：13346631
> 
> 赞同：2
> 
> 时间：2012-11-12T15:35:12.733
> 
> 标签：php, javascript, html, rsa, phpseclib

我在将基于 JS 的 RSA 文件转换为 PHP 时遇到问题。

JavaScript：

主文件：

```
var RSAPublicKey = function($modulus_hex, $encryptionExponent_hex) {
   this.modulus = new BigInteger( $modulus_hex, 16);
   this.encryptionExponent = new BigInteger( $encryptionExponent_hex, 16);
}

var Base64 = {
base64: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode: function($input) {
    if (!$input) {
        return false;
    }
    var $output = "";
    var $chr1, $chr2, $chr3;
    var $enc1, $enc2, $enc3, $enc4;
    var $i = 0;
    do {
        $chr1 = $input.charCodeAt($i++);
        $chr2 = $input.charCodeAt($i++);
        $chr3 = $input.charCodeAt($i++);
        $enc1 = $chr1 >> 2;
        $enc2 = (($chr1 & 3) << 4) | ($chr2 >> 4);
        $enc3 = (($chr2 & 15) << 2) | ($chr3 >> 6);
        $enc4 = $chr3 & 63;
        if (isNaN($chr2)) $enc3 = $enc4 = 64;
        else if (isNaN($chr3)) $enc4 = 64;
        $output += this.base64.charAt($enc1) + this.base64.charAt($enc2) + this.base64.charAt($enc3) + this.base64.charAt($enc4);
    } while ($i < $input.length);
    return $output;
},
decode: function($input) {
    if(!$input) return false;
    $input = $input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
    var $output = "";
    var $enc1, $enc2, $enc3, $enc4;
    var $i = 0;
    do {
        $enc1 = this.base64.indexOf($input.charAt($i++));
        $enc2 = this.base64.indexOf($input.charAt($i++));
        $enc3 = this.base64.indexOf($input.charAt($i++));
        $enc4 = this.base64.indexOf($input.charAt($i++));
        $output += String.fromCharCode(($enc1 << 2) | ($enc2 >> 4));
        if ($enc3 != 64) $output += String.fromCharCode((($enc2 & 15) << 4) | ($enc3 >> 2));
        if ($enc4 != 64) $output += String.fromCharCode((($enc3 & 3) << 6) | $enc4);
    } while ($i < $input.length);
    return $output; 
}
};

var Hex = {
hex: "0123456789abcdef",
encode: function($input) {
    if(!$input) return false;
    var $output = "";
    var $k;
    var $i = 0;
    do {
        $k = $input.charCodeAt($i++);
        $output += this.hex.charAt(($k >> 4) &0xf) + this.hex.charAt($k & 0xf);
    } while ($i < $input.length);
    return $output;
},
decode: function($input) {
    if(!$input) return false;
    $input = $input.replace(/[^0-9abcdef]/g, "");
    var $output = "";
    var $i = 0;
    do {
        $output += String.fromCharCode(((this.hex.indexOf($input.charAt($i++)) << 4) & 0xf0) | (this.hex.indexOf($input.charAt($i++)) & 0xf));
    } while ($i < $input.length);
    return $output;
}
};

var RSA = {

getPublicKey: function( $modulus_hex, $exponent_hex ) {
    return new RSAPublicKey( $modulus_hex, $exponent_hex );
},

encrypt: function($data, $pubkey) {
    if (!$pubkey) return false;
    $data = this.pkcs1pad2($data,($pubkey.modulus.bitLength()+7)>>3);
    if(!$data) return false;
    $data = $data.modPowInt($pubkey.encryptionExponent, $pubkey.modulus);
    if(!$data) return false;
    $data = $data.toString(16);
    return Base64.encode(Hex.decode($data));
},

pkcs1pad2: function($data, $keysize) {
    if($keysize < $data.length + 11)
        return null;
    var $buffer = [];
    var $i = $data.length - 1;
    while($i >= 0 && $keysize > 0)
        $buffer[--$keysize] = $data.charCodeAt($i--);
    $buffer[--$keysize] = 0;
    while($keysize > 2)
        $buffer[--$keysize] = Math.floor(Math.random()*254) + 1;
    $buffer[--$keysize] = 2;
    $buffer[--$keysize] = 0;
    return new BigInteger($buffer);
}
} 
```

我如何使用它：

```
var pubKey = RSA.getPublicKey( results.publickey_mod, results.publickey_exp );
var encryptedPassword = RSA.encrypt( form.elements['password'].value, pubKey ); 
```

现在我想把它转换成 PHP，到目前为止我已经尝试过：

```
$pkey = $json["publickey_mod"];
$rsa = new Crypt_RSA();

$rsa->loadKey($pkey);
$rsa->exponent = $json["publickey_exp"];
echo ($rsa->setPublicKey($pkey))?"success":"fail";

$plain = "text";
echo $rsa->encrypt($plain); 
```

但它总是打印一个“失败”，它有什么问题？

钥匙的样子：

> CD5D11DFC04D457B864421AA483118EEA3A96C97E01ABFA4BAD356EC3CE6CA7E3F61665BAA1322D1D6C763D4463C1B41D69397281538D22302D8817CC10AEBDA96970DA4BA46BA79808E3B7BC3D38C1C2FD746E73EA5907F07C9588A1AF2C337FED1B7C8BB29304035420FB7EDE92511D1B07A63E21A5C36F132B556EE879113E88395ACCE9B987E478F8EA11B34634BCDA863DE7045EA9D7AB3240F406C572F36FDE1DB1534F92022B91DFBE23F980D0190D69953037EF9F38F98DA1A8028BE009CE82B979E8E427305802330111A78737D8E11C9CB132170CB34618941FA2AC2C754338886BFEE7DAD779036B292F9711DD9C765F37D42B6C0DC0BCCC83765

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T19:47:54.763

I know this is a bit old lol but it looks like you're using PKCS#1 padding. phpseclib uses OAEP padding by default. Try doing this:

```
$rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1); 
```

# r - Y 轴上带有百分比的累积直方图

> ID：13346633
> 
> 赞同：5
> 
> 时间：2012-11-12T15:35:18.153
> 
> 标签：r, plot, histogram, percentage

我希望在 R 项目中绘制一个累积直方图，其中在 Y 轴上报告百分比而不是频率

```
x <- c(rnorm(100), rnorm(50, mean=2,sd=.5))
h <- hist(x, plot=FALSE, breaks=20)
h$counts     <- cumsum(h$counts)
h$density    <- cumsum(h$density)
plot(h, freq=TRUE, main="(Cumulative) histogram of x", col="white", border="black")
box() 
```

感谢帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-12T15:53:04.027

这不是经验累积分布函数的图吗？如在

```
plot(ecdf(x)) 
```

产生：

![在此处输入图像描述](../Images/3de0e8b5a547db559ea851a88e62deaa.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-13T22:59:42.167

对于柱状图直方图，您需要执行以下操作：

```
x <- c(rnorm(100), rnorm(50, mean=2,sd=.5))
hist( x,plot=FALSE) -> h # do a histogram of y and assign its info to h
h$counts <- cumsum(h$counts)/sum(h$counts) # replace the cell freq.s by cumulative freq.s
plot( h ) # plot a cumulative histogram of y 
```

资料来源：http: [//influentialpoints.com/Training/basic_statistics_cumulative_plot.htm](http://influentialpoints.com/Training/basic_statistics_cumulative_plot.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-23T13:12:20.410

也试试：

`plot( sort(x), (1:length(x))/length(x), type="l" )`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-22T20:57:48.360

对于一个简洁的方法尝试：

```
plot.ecdf(x) 
```

# jpa - JPA，来自另一个persistenceContext的实体作为搜索参数

> ID：13346635
> 
> 赞同：1
> 
> 时间：2012-11-12T15:35:24.337
> 
> 标签：jpa, entitymanager

我有两个实体：

```
 @Entity
    public class Entity1{}

    @Entity
    public class Entity2{
        @OneToOne
        protected Entity1 e1;
    } 
```

我有一种方法可以搜索 Entity1

```
 Entity1 findEntity1(some args){
        EntityManager em = this.emfp.getEntityManager();
        //perform search
        return e1;
    } 
```

我用这个方法找到Entity2

```
 Entity2 findEntity2(some args){
        EntityManager em = this.emfp.getEntityManager();
        e1 = findEntity1(args);
        //perform search using e1 :  Entity2.e1 = e1
        return e2;
    } 
```

每个方法都有它自己的 EntityManager，因此它有自己的 Persistence 上下文。我可以在我的第二种方法中使用从第一种方法返回的 e1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:50:05.070

虽然您无法按照描述的方式进行操作 - 具有不同的持久性上下文，但您可以对代码进行一些调整，从而有效地将实体置于相同的上下文中。是否可以使用所有这些取决于您的堆栈：

对于 Java EE 应用程序，从会话 bean 开始搜索并使用容器管理`EntityManager`- 这会将持久性上下文包装在事务中，并且两个实体将在事务期间保持在相同的上下文中。

对于 Java SE 应用程序，您仍然可以使用事务 - `UserTransaction`s。不过，您需要手动控制事务的跨度。

使用 EXTENDED 持久性上下文（自 JPA 2.0 起）。它只会显式失效，因此所有获取的实体都将保留在上下文中，直到您这么说。

对于所有这些解决方案，您需要更改`EntityManager`检索。`@PersistenceContext`在 Java EE 上下文中 使用注解并在 SE 上下文`@PersistenceUnit`中检索`EntityManagerFactory`

编辑：只要您留在同一个事务中，您划分搜索的 EJB 数量无关紧要。根据经验，事务在调用第一个 EJB 方法时开始，并在此方法返回时结束。此方法调用的所有方法都将在同一个事务中。不过，这种默认行为可能会改变——EJB 方法的事务性由 `@TransactionAttribute`注释定义，因此只需沿着 bean 遵循调用路径即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:39:04.620

不，您不能使用来自不同持久性上下文的实体。

您需要扩展选择查询并使用基本类型，例如数字 ID 或字符串。

# objective-c - 在 iPhone 应用程序中发送忘记密码的邮件

> ID：13346639
> 
> 赞同：0
> 
> 时间：2012-11-12T15:35:37.590
> 
> 标签：objective-c, ios, password-protection, forgot-password

我正在制作登录表单。在那个表格上，我有一个*忘记密码*的按钮。我想知道的是使用它的电子邮件地址向用户发送一封电子邮件。

有人知道如何在 iphone 应用程序中执行此操作吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:41:33.510

通常，您的服务器（您登录的服务器）将发送该邮件，而不是 iPhone 应用程序。当您按下该按钮时，您通知服务器向您的用户发送电子邮件。

# sap - 以编程方式检索 SAP BPC 动态脚本源代码

> ID：13346645
> 
> 赞同：2
> 
> 时间：2012-11-12T15:35:39.557
> 
> 标签：sap, abap, badi

我想知道如何检索 SAP BPC 包动态脚本的源代码。

我将尝试解释：在 SAP BPC 中，我可以编写一个名为 Dynamic Sc​​ript 的组件，我可以使用 Excel 插件保存源代码。

动态脚本与 SAP BPC“包”相关联，是一段可以调用 ABAP BADI 的代码。

我想知道的是这段代码是如何存储在BW中的，它是如何链接到相关包的，以及如何以编程方式检索它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-19T22:46:10.240

在 Microsoft 版本中，有一个 DTSX 文件与不确定 NW 的包相关联

# jquery - 如何将jquery中的变量传递给mysql

> ID：13346647
> 
> 赞同：0
> 
> 时间：2012-11-12T15:35:48.277
> 
> 标签：jquery

我找到了无限滚动分页的代码，但有一个问题。我可以从这个页面传递一个变量去 democontent.php

有人可以帮我解决这个问题吗？我需要做的是将此代码中的 ID 传递给 democontent.php 我无法弄清楚我做错了什么。

```
<script type="text/javascript">

$(function(){   
    $('#content').scrollPagination({    
        'contentPage': 'democontent.php', // the page where you are searching for results
        'contentData': {}, // you can pass the children().size() to know where is the pagination
        'scrollTarget': $(window), // who gonna scroll? in this example, the full window
        'heightOffset': 10, // how many pixels before reaching end of the page would loading start? positives numbers only please
        'beforeLoad': function(){ // before load, some function, maybe display a preloader div
            $('#loading').fadeIn(); 
        },
        'afterLoad': function(elementsLoaded){ // after loading, some function to animate results and hide a preloader div
             $('#loading').fadeOut();
             var i = 0;
             $(elementsLoaded).fadeInWithDelay();
             if ($('#content').children().size() > 0){ // if more than 100 results loaded stop pagination (only for test)
                $('#nomoreresults').fadeIn();
                $('#content').stopScrollPagination();
             }
        }
    });

    // code for fade in element by element with delay
    $.fn.fadeInWithDelay = function(){
        var delay = 0;
        return this.each(function(){
            $(this).delay(delay).animate({opacity:1}, 200);
            delay += 100;
        });
    };

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:39:37.217

你的问题就在那里：

```
'contentData': {}, // you can pass the children().size() to know where is the pagination 
```

例如：

```
var id = 5;

$('#content').scrollPagination({  
    // other settings
    contentData: { id: id }
}); 
```

然后在你的 PHP 中：

```
$id = $_POST['id']; // = 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:45:56.983

我使用这个 javascript 函数将变量从 js 传递到 php。如果你想使用ajax，那么你可以使用这个：

```
function showUser()
{
    var combo = document.getElementById("users");
    var uname = combo.options[combo.selectedIndex].value;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("selectbox2").innerHTML=xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET","getuser.php?q="+uname,true);
    xmlhttp.send();
} 
```

希望能帮助到你。

# java - 根据用户 Java Swing 绘制多个形状

> ID：13346649
> 
> 赞同：1
> 
> 时间：2012-11-12T15:35:57.853
> 
> 标签：java, swing, jframe, jpanel

我正在尝试实现一个基于菜单的图形 - 其中我将用一个圆圈表示一个顶点，每个圆圈将有一个用户提供的索引。用户必须转到文件菜单并单击 Addvertex 以创建一个新节点index.The 问题虽然是 - 圆圈只绘制一次 - 任何后续点击 addVertex 都不会导致绘制圆圈 - 不明白为什么......

这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.io.*;
import java.util.*;

public class FileChoose extends JFrame {

    public FileChoose() {
        JMenuBar l=new JMenuBar();
        JMenu file=new JMenu("File");
        JMenuItem open=new JMenuItem("Addvertex");
        open.addActionListener(new Drawer());
        JMenuItem close=new JMenuItem("Exit");
        close.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        JMenu tools=new JMenu("Tools");
        file.add(open);
        file.add(close);

        this.setJMenuBar(l);
        l.add(tools);
        l.add(file);

        this.setSize(new Dimension(200, 200));
        this.setLocationRelativeTo(null);
        this.setDefaultCloseOperation(this.EXIT_ON_CLOSE);
    }

    void HelloHere(String p) {
        Draw d = new Draw(p);
        this.add(d);
        setExtendedState(MAXIMIZED_BOTH);
    }

    class Drawer extends JFrame implements ActionListener {

        Integer index;

        public void actionPerformed(ActionEvent e) {
            JPanel pn = new JPanel();
            JTextField jt = new JTextField(5);
            JTextField jt1 = new JTextField(5);
            pn.add(jt);
            pn.add(jt1);
            int result=JOptionPane.showConfirmDialog(null, pn, "Enter the values", JOptionPane.OK_CANCEL_OPTION);
            if (result == JOptionPane.OK_OPTION) {
                index = Integer.parseInt(jt.getText());
                System.out.println(jt1.getText());
            }

            this.setVisible(true);
            this.setSize(500, 500);
            this.setLocationRelativeTo(null);

            HelloHere(index.toString());
        }
    }

    public static void main(String [] args) {
        FileChoose f = new FileChoose();
        f.setVisible(true);
    }
}

class Draw extends JPanel {

    String inp;

    public Draw(String gn) {
        inp = gn;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;
        Random r = new Random();
        int x = r.nextInt(100);

        g2.drawOval(x, x * 2, 100, 100);
        g2.drawString(inp, x + (x / 2), x + (x / 2));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:17:56.030

一些指示：

*   使用[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)创建和操作 Swing 组件。

*   `JFrame`不要不必要地扩展课程。

*   在可能/允许[的](http://www.leepoint.net/notes-java/GUI/events/anonymous_listener.html)情况下使用[*匿名* `Listener`](http://www.leepoint.net/notes-java/GUI/events/anonymous_listener.html)

*   确保`JFrame#setVisible(..)`对`JFrame`实例的最后一次调用专门指向此处：

    ```
     this.setVisible(true);
        this.setSize(500, 500);
        this.setLocationRelativeTo(null);
        HelloHere(index.toString()); 
    ```

*   调用实例`pack()`而`JFrame`不是`setSize(..)`

*   不要使用多个`JFrame`s 请参阅：[多个 JFrame 的使用：好的还是坏的做法？](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)

*   您遇到的问题在这里：

    ```
    Draw d = new Draw(p);
    this.add(d); 
    ```

    `Draw` `JPanel`您每次都创建一个新实例，然后用新实例覆盖最后`JPanel`添加的实例（这是 的默认行为`BorderLayout`）。要解决这个问题，请阅读以下 2 点：

*   添加组件后调用`revalidate()`和`repaint()`实例以显示新添加的组件。

*   使用[适当的`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

由于我不确定您的预期结果，我已经尽可能多地修复了代码，希望它有所帮助：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.*;
import javax.swing.*;

public class FileChoose {

    JFrame frame;

    public FileChoose() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JMenuBar l = new JMenuBar();
        JMenu file = new JMenu("File");
        JMenuItem open = new JMenuItem("Addvertex");

        open.addActionListener(new ActionListener() {
            Integer index;

            @Override
            public void actionPerformed(ActionEvent e) {
                JPanel pn = new JPanel();
                JTextField jt = new JTextField(5);
                JTextField jt1 = new JTextField(5);
                pn.add(jt);
                pn.add(jt1);
                int result = JOptionPane.showConfirmDialog(null, pn, "Enter the values", JOptionPane.OK_CANCEL_OPTION);
                if (result == JOptionPane.OK_OPTION) {
                    index = Integer.parseInt(jt.getText());
                    System.out.println(jt1.getText());
                }
                HelloHere(index.toString());
            }
        });

        JMenuItem close = new JMenuItem("Exit");
        close.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });

        JMenu tools = new JMenu("Tools");
        file.add(open);
        file.add(close);

        frame.setJMenuBar(l);
        l.add(tools);
        l.add(file);
        frame.pack();

        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    void HelloHere(String p) {
        Draw d = new Draw(p);
        frame.add(d);
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.revalidate();
        frame.repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                FileChoose f = new FileChoose();
            }
        });
    }
}

class Draw extends JPanel {

    String inp;

    public Draw(String gn) {
        inp = gn;
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        Graphics2D g2 = (Graphics2D) g;
        Random r = new Random();
        int x = r.nextInt(100);

        g2.drawOval(x, x * 2, 100, 100);
        g2.drawString(inp, x + (x / 2), x + (x / 2));
    }
} 
```

**更新**：

在您的 Draw 类中全局声明这一点：`Random r=new Random();`就好像您每次调用`paintComponent()`分布时都会启动一个新的 Random 实例，这将不够重要/随机

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:54:45.750

Every time the user creates a new node you create a new `JPanel` that is added to the `JFrame` of your application. In the absence of a specific layout it uses a `BorderLayout`. `BorderLayout` does not allow for more than one component to be added at each location. Your other calls to `add` are probably ignored.

# coding-style - 我已经编程六年了，我在大学的作业因编码风格而被打分

> ID：13346650
> 
> 赞同：-1
> 
> 时间：2012-11-12T15:36:00.407
> 
> 标签：coding-style

在过去的 6 年里，我一直在编程。我最近刚开始我的第一个计算机科学学位。由于不同的原因，我的工作似乎不断被降价，其中有很多：

*   未注释的代码
*   编写过长的标识符名称和方法
*   写了太多方法

在为众多初创公司担任了六年的程序员之后，并吸收了包括编写“自我解释代码”在内的最佳实践，我发现很难回到糟糕的实践中。

我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:45:36.807

自我记录的代码不是注释的同义词。

在这一点上，我与许多高级开发人员争论过。代码在传达意图方面可以走很长一段路，但有些事情根本不能（也不应该）通过代码记录下来。

例如，如果您有一个高度优化的函数/方法或代码块，它与底层问题域高度耦合，并且需要非常具体的业务或解决方案知识。在这些情况下**需要**注释。

是的，是的，评论伴随着相当多的问题，但这并不意味着它们没有帮助（或在某些情况下是强制性的）。

我无法告诉你有多少次我读了同事的一行代码并想“到底是什么？！？” 只是为了让他们解释说他们需要这样做是因为我们所针对的某些库或浏览器的一些怪癖等。

注释是开发人员证明设计决策合理性的一种机制。

至于您的其他问题，它们是主观的。多长时间才算过长？多少算太多？如果您在 MS 堆栈上，请将它们指向 Microsoft 的指南，否则无论您使用哪种语言，都会有无数文章......

希望有帮助。

# javascript - Jquery 谷歌地图不显示

> ID：13346652
> 
> 赞同：-2
> 
> 时间：2012-11-12T15:36:07.617
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

这是一个非常简单的，但我不能让它工作，这是我的代码：http: [//jsfiddle.net/DYfbg/38/](http://jsfiddle.net/DYfbg/38/)

```
// Map Display v0.1
//
// Future Improvements
// Only display if co-ordinates in URL

$(document).ready(function() {
    var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions)
} 
```

我试图从“中心”定义开始。有什么想法吗？​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:40:31.080

你缺少结尾 ); 在您的代码末尾。所以它会抛出一个错误并且永远不会被触发。

```
$(document).ready(function() {
var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644),
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions)
}); 
```

[http://jsfiddle.net/nxtwrld/DYfbg/39/](http://jsfiddle.net/nxtwrld/DYfbg/39/)

# javascript - 使用函数调用调用 Colorbox，但它一打开就关闭

> ID：13346653
> 
> 赞同：0
> 
> 时间：2012-11-12T15:36:09.450
> 
> 标签：javascript, html, iframe, jquery-events, colorbox

我正在做的是调用一个函数，该函数`passval()`本身正在调用另一个`menu()`显示颜色框 iframe 的函数：

```
<html>
<head>
<link rel="stylesheet" href="colorbox/colorbox.css" />
<script src="js/jquery.min.js"></script>
<script src="colorbox/jquery.colorbox.js"></script>
<script>
            $(document).ready(function(){
                //Examples of how to assign the ColorBox event to elements

                $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
                $(".inline").colorbox({inline:true, width:"40%"});
                $(".iframe").colorbox({iframe:true, width:"90%", height:"80%"});

            });
            </script>

    <script type="text/javascript">
    function passval()
    {

    var vc = document.getElementById('vc').value;
    var fc = document.getElementById('fc').value;
    //checking inputs
    //document.write(fc+" ");
    //document.write(vc+" ");
    //document.getElementById('inline').click();
    menu();
    }
    function menu() 
    {
      $('<a />').colorbox({fixedWidth:"500px", fixedHeight:"300px", iframe:true, href:"search.php", bgOpacity:0, open:true}); return false;
     }

    </head>
    <body>
    <form id="form1" name="form1" method="post">
    <input type="submit" value="Submit" onclick="passval()" />
    </form>
    <a class='iframe' id="inline" href="chart.htm">iFrame</a>
    </body>
    </html> 
```

但是它一打开就打开和关闭..`document.getElementById('inline').click();`函数调用的 click [ ] 也是如此

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:42:24.347

您需要`preventDefault()`点击提交。现在您的页面已重新加载或更改：

```
<input type="button" value="Submit" onclick="passval()" /> 
```

# c++ - 如何将数字相加而不是增加值？比如加入

> ID：13346656
> 
> 赞同：-2
> 
> 时间：2012-11-12T15:36:23.087
> 
> 标签：c++

我想连接两个整数，这不是添加它们的值，而是加入它们。

例如：

```
int a=2,b;
cin>>b;
a=a+3; 
```

`a`应该是类似的东西`23`而不是`5`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:39:04.317

仅仅因为它们看起来像整数，并不意味着它们是整数。在您的情况下，您正在尝试对整数执行字符串操作。你真正想要的是使用`std::string`：

```
std::string a("2");
std::string b;
std::cin >> b;
a += b; 
```

如果您想将结果用作`int`，您可以`std::stoi(a)`在 C++11 中使用。在 C++03 中，您可以执行以下操作：

```
std::stringstream ss(a);
int value;
ss >> value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:39:13.470

这会给你你想要的。

```
std::stringstream s;
s << 1 << 2 << 3;
int out;
s >> out;
std::cerr << out << std::endl; 
```

[Herb Sutter的 Manor](http://www.gotw.ca/publications/mill19.htm) Farm 的字符串格式化程序值得一看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:39:03.757

一个简单的方法是将数字乘以 10，然后加上新的整数。

编辑：其他答案更准确。如果数字可以大于 10，您需要将它们视为字符串，然后转换回 int（c_str() 上的 itoa）。如果要将它们保留为 int，则需要知道 10 的哪个幂包含您的新值，并将该数字乘以该 10 的幂，以便为新数字腾出足够的空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:39:47.413

如果您不想将数字转换为字符串，只需将前一个值乘以 10：

a = a*10 + b;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T15:44:40.220

再看一遍：

```
int a=2,b;
cin>>b;
a=a+3; 
```

你想怎么变成 23 岁？你的 b 在你的 add 语句中被完全忽略了，你有`a=2`，所以`a+3`真的是 2+3，所以 2+3 如果我记得数学大约是 5。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T16:11:23.703

在 C 语言中，您可以使用*int 转字母*函数`itoa(int1,str1,10)`。

将两个整数连接为字符串的代码：

```
#include <string>
#include <iostream>
using namespace std;

int main(void)
{
  int int1,int2;
  char *str1,*str2;
  str1 = new char[1];
  str2 = new char[1];
  string str;

  cout<<"concatenate two integers as strings \n";
  cout<<"Enter first number > ";
  cin>>int1;

  cout<<"Enter second number > ";
  cin>>int2;

  str=string(itoa(int1,str1,10)) + string(itoa(int2,str2,10));;

  cout<<"\n "<<str <<"\n";

  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0; 
```

}

输出：

```
concatenate two integers as strings
Enter first number > 2
Enter second number > 3

 23

Press any key to continue 
```

# java - 如何在从 Unity 调用的 Java 插件中创建 Android 处理程序

> ID：13346657
> 
> 赞同：1
> 
> 时间：2012-11-12T15:36:24.707
> 
> 标签：java, android, plugins, handler, unity3d

所以，假设你有一个 Unity Java 插件，你像这样调用 Java 插件

```
private static readonly AndroidJavaClass m_somePlugin = new AndroidJavaClass("com.unity3d.Plugin.blah.SomePlugin");

using (var unityPlayer = new AndroidJavaClass("com.unity3d.player.UnityPlayer"))
{
    using (var currentActivity = unityPlayer.GetStatic<AndroidJavaObject>("currentActivity"))
    {
        m_somePlugin.CallStatic("onInitialise", currentActivity);
    }
} 
```

插件看起来像这样

```
public class SomePlugin 
{
    static public void onInitialise(final Activity currentActivity) 
    {
        Handler someHandler = new Handler();
    }
} 
```

一切都很简单。除非它会崩溃。创建一个处理程序是原因。我猜是线程问题。

所以问题是，如何在我传入的活动中在 Java 插件中创建处理程序？有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:24:46.610

是的，问题的解决方案是使用 runOnUiThread。所以为了让上面的代码不崩溃 SomePlugin 应该是这样的

```
public class SomePlugin 
{
    static public void onInitialise(final Activity currentActivity) 
    {
        currentActivity.runOnUiThread(new Runnable() {
            Handler someHandler = new Handler(); });
    }
} 
```

# c++ - IMAGE_EXPORT_DIRECTORY 值错误

> ID：13346658
> 
> 赞同：3
> 
> 时间：2012-11-12T15:36:30.913
> 
> 标签：c++, c, winapi, portable-executable

我遇到了`IMAGE_EXPORT_DIRECTORY`值问题，每当我计算它的地址时，它都会给我错误的值（如`Name`, `NumberOfNames`,`AddressOfNames`等）。我正在通过以下代码计算它。

```
IMAGE_EXPORT_DIRECTORY *export_directory = (IMAGE_EXPORT_DIRECTORY*)(nt_headers->OptionalHeader.DataDirectory[0].VirtualAddress + (DWORD)dos_header); 
```

在调试器中，地址是正确的，必须有一个`IMAGE_EXPORT_DIRECTORY`，但为什么它给我错误的结果？无法从中访问任何元素，因为它说错误的 ptr.. 尝试使用 并正常工作，但在从 AddressOfNames 提取名称时`kernel32.dll`失败。`user32.dll`

使用 Windows 8 x86。

# firefox - Firefox 和 Google Chrome (ColdFusion) 中的表单提交差异

> ID：13346660
> 
> 赞同：0
> 
> 时间：2012-11-12T15:36:35.927
> 
> 标签：firefox, google-chrome, coldfusion

几天前，我制作了一个小的 Coldfusion 9 脚本，但不知何故，在提交表单后，查询将无法在 Firefox 中运行。在 Google Chrome 中一切正常，但在 Firefox 中却不行。

我试过谷歌它，但我找不到任何与这个问题有关的东西。如果您在阅读本文后有什么不清楚的地方 - 请询问，我会尽力向您解释得更好。

该脚本可在以下网址找到： http: [//pastebin.com/Bic28B3L](http://pastebin.com/Bic28B3L)

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:50:29.693

我的猜测是 FF 和 Chrome 正在以不同的方式处理由这一行生成的表单元素：

```
<cfinput type='image' src='http://linehotel.org/c_images/bot_buy.png' name='submit' value='Koop deze badge nu'> 
```

看起来您的代码正在检查 form.submit 是否存在，所以我会查看此标签生成的源代码。

要尝试的另一件事是安装和运行[Fiddler](http://fiddler2.com/)并使用它捕获 Chrome 和 FF 提交的内容并比较两者，特别是查看请求部分的 WebForms 选项卡。如果它与浏览器相关，则会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:54:31.857

罪魁祸首有两个：

```
<cfinput type='image'...> 
```

和

```
<cfif IsDefined('form.submit')> 
```

Coldfusion 将为您的 CFINPUT 生成 HTML，如下所示：

```
<input type="image"... 
```

Firefox 会生成这样的表单帖子：

```
submit.x: mouseclick x coords.
submit.y: mouseclick y coords. 
```

Firefox 不会在表单 post 中返回图像的名称。它只会返回图像映射的 X 和 Y 值。您可能需要做的是用`<CFINPUT>`HTML`<INPUT type="submit">`按钮替换 TAG 并使用 CSS 将图像应用到它。您甚至可以考虑检查其他表单变量来代替提交按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T16:02:28.997

您可以保留脚本原样并替换

```
<cfif IsDefined('form.submit')> 
```

和

```
<cfif CGI.REQUEST_METHOD IS "POST"> 
```

检查表单是否已提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T20:07:29.903

查看您的代码，您可能还想查看 cfqueryparam 标记以帮助防止 sql 注入，并且您可能希望在 cfquery 之外而不是在其中进行计算...例如：

```
<cfquery name = "pay" datasource = "#DSN#">
UPDATE users
SET bots=#user.bots#-1
WHERE id=#user.id#
</cfquery> 
```

可能会更好：

```
<Cfset xBots=user.bots-1>

<cfquery name = "pay" datasource = "#DSN#">
 UPDATE users
 SET bots=<cfqueryparam cfsqltype="cf_sql_integer" value="#xBots#">
 WHERE id=<cfqueryparam cfsqltype="cf_sql_integer" value="#user.id#">
 </cfquery 
```

# php - 将单独查询的结果添加到 JSON 编码数组

> ID：13346663
> 
> 赞同：2
> 
> 时间：2012-11-12T15:36:41.473
> 
> 标签：php, jquery, mysql, json

我有一个查询到我的 MySQL 数据库，它从 MySQL 表（信息）中返回四个信息字段，然后我使用 PHP 的`json_encode()`函数将其编码为 JSON。它返回的两个字段是“staffMember”和“lineManager”，它们返回与（单独的）用户表中该人的 ID 相关的整数。

我的查询返回以下内容（以表格格式）：

```
id is 1
staffMember is 14
lineManager is 12
description is this is a description 
```

等..所有行。

14（在上面的例子中）是指用户表中的一行，类似于：

```
id is 14
firstname is dave
secondname is jones 
```

因此，我的问题是，如何让查询的 JSON 部分返回“dave jones”而不是 14？因为信息不在 MySQL 的同一张表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:45:55.217

在您的数据库请求中使用 LEFT JOIN，例如

```
SELECT a.id, CONCAT(b.firstname, ' ', b.secondname) AS staffMember, a.lineManager, a.description 
  FROM a 
  LEFT JOIN b ON (a.staffMember = b.id) 
```

其中 a 和 b - 你的表名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:47:58.940

正如评论者所提到的，您肯定希望将名字和姓氏字段添加到您的 SQL 结果集中。您可以通过将查询更改为 JOIN 到包含您的名字和姓氏数据的表来做到这一点。您的联接的“ON”子句将是两个表共有的 id。一个例子是：

```
SELECT * FROM yourdb.table1 T1 LEFT JOIN yourdb.table2 T2 ON T1.staffMember = T2.id; 
```

# jquery - focus() 不会将光标带入字段

> ID：13346669
> 
> 赞同：6
> 
> 时间：2012-11-12T15:37:09.747
> 
> 标签：jquery, focusout

当值错误时，我试图强制光标返回到其先前的输入。这是我使用的脚本的更简单版本：

```
$('input:first-child').blur(function(e){
    console.log('here');
  $('input:first-child').focus();
}); 
```

当我单击另一个元素进行聚焦时它可以工作，但当我单击 body 或另一个 div 元素时它不起作用。为什么？​我有一个 jsfiddle 案例：http: [//jsfiddle.net/leyou/Zabn4/37/](http://jsfiddle.net/leyou/Zabn4/37/)

编辑：我在 Chrome/Win7 上进行测试，但使用 Firefox 似乎更糟。它完全忽略了 focus()

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:46:23.907

发生这种情况是因为模糊尚未完成。做一个小的超时，它会工作：

```
$('input:first-child').blur(function(e){
    setTimeout(function () { $('input:first-child').focus(); }, 20);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:47:35.940

尝试这个

```
$('input:first-child').blur(function(e){
    console.log('here');
    setTimeout(function() { $('input:first-child').focus(); }, 500);
}); 
```

# vb.net - 将多维数组转换为arraylist vb.net

> ID：13346677
> 
> 赞同：3
> 
> 时间：2012-11-12T15:37:34.847
> 
> 标签：vb.net, multidimensional-array, arraylist

就像问题所问的那样，我正在尝试将此数组转换为多维数组列表。

我知道这可以将一维数组转换为数组列表，但我的是 mwarray(0-alot,0-1)

```
table = New ArrayList(mwaray) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:39:59.140

假设您想从多维数组中获取所有值并将其放入单个`ArrayList`中，那么您可以遍历这些值并添加它们：

```
table = New ArrayList()

For i as integer = 0 to mwarray.GetLength(0) - 1
    For j as integer = 0 to mwarray.GetLength(1) - 1
        table.Add(mwarray(i,j))
    Next
Next 
```

# jquery - jquery 选择器仅选择类名 X 的第二个 div

> ID：13346678
> 
> 赞同：0
> 
> 时间：2012-11-12T15:37:36.500
> 
> 标签：jquery

一个页面中有许多具有相同类名的 div。如何使用 jquery 仅选择具有特定类名的第二个 div，但没有别的选择？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T15:38:26.163

您可以使用`.eq`如下功能，

```
$(selector).eq(1) //should return you the second element of the matching selector. 
```

或者您可以使用`:eq()`如下选择器，

```
$('selector:eq(1)') //should return you the second element of the matching selector. 
```

# hadoop - 配置 Hadoop、HBase 和 Hive 集群

> ID：13346687
> 
> 赞同：4
> 
> 时间：2012-11-12T15:38:22.330
> 
> 标签：hadoop, hbase, hive, apache-zookeeper

我是 Hadoop、HBase 和 Hive 的新手。我以伪分布式模式安装了 Hadoop、HBase 和 Hive，一切正常。现在我打算用 Hive、HBase 和 ZooKeeper 建立一个简单的 Hadoop 集群（5 个节点）。我之前已经阅读了一些文档和说明，但我找不到我的问题的一个很好的解释。我不确定在哪里运行所有守护进程。这是我的考虑：

**节点_1**（主）

*   名称节点

*   作业追踪器

*   HBase 大师

*   ZooKeeper（独立节点；由 HBase 管理）

**Node_2** (Backup_Master)

*   次要名称节点

**Node_3** (Slave1)

*   数据节点1

*   任务跟踪器1

*   区域服务器1

**Node_4** (Slave2)

*   数据节点2

*   任务跟踪器2

*   区域服务器2

**Node_5** (Slave3)

*   数据节点3
*   任务跟踪器3
*   区域服务器3

我知道，在生产中，建议在奇数个节点（单独的集群）上运行 ZooKeeper 集成。但是对于一个简单的集群，是否可以设置一个独立的 ZooKeeper 节点运行在主节点上？

另一个问题是关于 Hive：我知道 Hive 是一个 Hadoop 客户端。我还应该在主节点上安装 Hive 吗？是否有意义？

感谢所有提示和评论！哈坎

注意：我只有 5 台机器来模拟集群。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T09:07:14.423

出于测试目的，我相信您可以在主节点上设置 Zookeeper；我确实将它们全部安装在同一台服务器上。

如果您的集群中有 5 台机器，为什么您在伪分布式模式下安装 hadoop？安装完全分布式模式可能会更好。

对于hive，看来你必须用hadoop安装它

```
Hive uses hadoop that means:

you must have hadoop in your path OR export HADOOP_HOME=<hadoop-install-dir> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T06:31:14.403

如果您打算将所描述的集群用于测试目的，则可以将所有主节点放在同一台服务器上。您也可以将 SecondaryNameNode 角色移动到 Node_1，因为 SecondaryNameNode 不是 NameNode 的备份服务器，所以它可以[为您的 NameNode 创建检查点](http://hadoop.apache.org/docs/r2.4.1/hadoop-project-dist/hadoop-hdfs/HdfsUserGuide.html#Secondary_NameNode)。因此，将 Node_2 用作集群中的另一个“工作”节点或 HiveServer2 和元存储是有意义的。

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T19:59:42.637

> 对于 hive，您似乎必须使用 hadoop 安装它 Hive 使用 hadoop 这意味着：您的路径中必须有 hadoop 或 export HADOOP_HOME=

@iTech：没错。如果您安装 hive，则必须将变量“HADOOP_HOME”设置为您的 hadoop 安装路径。但这不是问题..正如我所说，我以前在伪分布式模式下使用 Hadoop 和 Hive。

唯一的问题是，我不确定在 5 节点集群中以完全分布式模式运行所有守护程序的位置。我很困惑，因为我想一起运行很多工具（Hadoop、HBase 和 Hive）

希望有好心人指点...

# java - 我可以像 Spring（或 Eclipse RCP）上下文一样在 Android 中使用 Context 对象吗？

> ID：13346692
> 
> 赞同：0
> 
> 时间：2012-11-12T15:38:27.683
> 
> 标签：java, android

假设我有一个`Activity`其他对象正在做一些工作。有没有一种方便的方法可以将共享对象放入该`Context`对象并在其他地方使用它们，就像我在使用 Eclipse RCP (e4) 时所做的那样？这是Android术语的好习惯吗？

我假设我不切换活动，我只是将工作分配给我的`Activity`.

我检查了 API，`Context`但没有找到任何明显的方法用于此目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:54:58.703

> 有没有一种方便的方法可以将共享对象放入此 Context 对象并在其他地方使用它们，就像我在使用 Eclipse RCP (e4) 时所做的那样？

当您子类`Activity`化时，欢迎您在其中包含数据成员。

> 我假设我不切换活动，我只是将工作分配给我的活动中的其他对象。

这听起来更像是标准数据成员和相关方法的角色。

# ruby-on-rails - Rails 3 - RMagick 使用 Paperclip 找不到 libfreetype.6.dylib

> ID：13346697
> 
> 赞同：3
> 
> 时间：2012-11-12T15:38:43.397
> 
> 标签：ruby-on-rails, imagemagick, paperclip, x11, rmagick

我正在尝试使用 Paperclip 上传一些图片。它工作正常，但如果我想添加一些风格：

```
:styles => { :small => "100x100" } 
```

它不再起作用了，我收到以下错误消息：

> *“识别”命令无法识别*myImage 。**

 *所以，我在网上找到了一些提示，我已经用 Brew 安装了 ImageMagick，然后我添加了

```
gem 'Rmagick' 
```

到我的 GemFile。

现在，当我重新启动服务器时，我收到此消息错误：

> /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/rmagick-2.13.1/lib/rmagick.rb:11:in `require': dlopen(/usr/local/rvm/gems /ruby-1.9.3-p194@global/gems/rmagick-2.13.1/lib/RMagick2.bundle, 9)：库未加载：/usr/X11/lib/libfreetype.6.dylib (LoadError) 引用自： /usr/local/lib/libMagickCore.5.dylib 原因：库版本不兼容：libMagickCore.5.dylib 需要 14.0.0 或更高版本，但 libfreetype.6.dylib 提供 10.0.0 版本 - /usr/local/rvm/ gems/ruby-1.9.3-p194@global/gems/rmagick-2.13.1/lib/RMagick2.bundle

我已经更新了我的 X11 并安装了 XQuartz，但无所事事它不再起作用了。如果我删除，我可以重新启动 Rails 服务器

```
gem 'Rmagick' 
```

来自我的 GemFile。

有任何想法吗 ？

非常感谢，我在这个错误上花了 10 个小时没有弄清楚它！

再见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T07:33:29.283

找到您的 libfreetype.6.dylib 例如：

```
sudo find / -name "libfreetype.6.dylib" -print 
```

确保您的版本是 14.0.0 或更高版本（以上是我在 macosx 上的路径），例如：

```
otool -L /usr/X11/lib/libfreetype.6.dylib 
```

如果版本正确，则可能是库路径问题。

否则更新将修复。*

# python - 在 Windows 中为 OpenERP 6.1 安装 Python 模块

> ID：13346698
> 
> 赞同：6
> 
> 时间：2012-11-12T15:38:46.513
> 
> 标签：python, openerp

我使用 AllInOne 包在 Windows 上安装了 OpenERP 6.1。我没有单独安装 Python。显然 OpenERP 文件夹已经包含了所需的 python 可执行文件。

现在，当我尝试安装某些插件时，我通常会遇到安装某些 python 模块的要求。例如要安装 Jasper_Server，我需要安装 http2、pypdf 和 python-dime。

由于没有单独的 Python 安装，因此没有 C:\Python 或类似的东西。我在哪里以及如何安装这些 python 包以便我能够安装插件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:17:06.207

请检查此链接，可能对您有所帮助。 [http://www.zbeanztech.com/blog/openerp-source-eclipse-under-windows](http://www.zbeanztech.com/blog/openerp-source-eclipse-under-windows)

如果单独安装python包，则必须将已安装包的bin路径添加到系统环境变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:24:01.510

好问题..

Windows 上的 Openerp 使用 python 的 dll（程序文件中 openerp 文件夹的 /Server/server 中的 python26.dll）。看起来所有额外的库都在同一个文件夹中，因此您应该能够将额外的库下载到该文件夹​​并重新启动服务。（我通常会停止服务并从命令行手动运行它 - 调试时更容易查看是否有任何错误等）

让我们知道您是否可以正常工作！

# django - 不使用数据库的jquery自动完成的巨大远程源

> ID：13346706
> 
> 赞同：0
> 
> 时间：2012-11-12T15:39:05.670
> 
> 标签：django, web-applications, jquery-autocomplete

我正在开发一个使用 Django 的网络应用程序，它可以让用户讲述他们最喜欢的电影。对于输入，我想为用户提供一个启用了自动完成功能的文本框。

*   曾经制作的所有电影的列表非常大（18 MB），因此必须使用远程源启用自动完成功能。
*   除此之外，我还有不能使用数据库的约束。（因为我的应用程序托管在 heroku 上，并且将此类数据存储在数据库中会花费很多）

现在，我将所有电影的列表存储在一个 .py 文件中，并将其导入到我的 views.py 中。处理来自自动完成的 ajax 请求的视图会遍历此列表中的每部电影，以根据查询词进行过滤并返回过滤后的列表。

-电影.py

```
all_movies = [list of all movies' titles]  # > 1M string elements 
```

-views.py（每当用户更改网络应用程序文本框中的输入时，都会调用handle_autocomplete()）

```
import movies
def handle_autocomplete(request):
     data = request.GET['term']
     my_list = [title for title in movies.all_movies if data in title]
     return HttpResponse(simplejson.dumps(my_list)) 
```

这种方法有什么缺点，我该如何改进它？是否有任何库/ django 应用程序可以处理远程源自动完成？

# tfs - TFS 多台机器

> ID：13346712
> 
> 赞同：1
> 
> 时间：2012-11-12T15:39:28.590
> 
> 标签：tfs

如何让多个虚拟机上的同一个用户能够共享同一个工作区文件夹？每个用户应该创建一个“公共工作区”还是应该改变我们的做法？

一点背景：

当我们使用 VSS 和 VB6 / ASP 时，每个用户都会映射到一个个人共享 (w:)，该共享将映射到 \server\username\ 。每台机器都将 w:\ 映射到用户，这样当用户从一个虚拟机移动到另一个虚拟机时，他们会发现签入/签出的状态是一致的。（在最坏的情况下，他们会从 VSS 收到一条消息，说您在 xxx 上检查了这个，现在您正在 yyy 上检查... -> 他们只需点击确定）

现在我们正在迁移到 TFS，我们发现工作空间特定于每台机器（检查机器 A，发现机器 B 无法编辑）

我正在查看公共工作区，尽管这似乎旨在解决我认为可能涵盖该问题的不同任务......所以我想知道这是否是一种安全的做法，是否有人真正尝试过，或者我们是否' d 正走向一场重大的火车事故。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:04:04.713

我的分析：火车失事。

每个用户/机器都应该有自己的工作空间的本地（即：非网络）路径。

# ios - iOS 1D/2D 条码扫描器库

> ID：13346716
> 
> 赞同：0
> 
> 时间：2012-11-12T15:39:37.547
> 
> 标签：ios, barcode

我正在尝试找到以前提出的问题的答案，但我仍然找不到正确的答案。

我正在寻找一个轻量级的免费一维/二维条码扫描器库/api/sdk。我试过了

> 志兴

，但它的方式太大了，

> 丑闻

不是免费的，我无法编译

> BXMobile

， ETC。

有条形码扫描仪经验的人可以向我提出一个很好的建议，告诉我应该使用什么？

提前致谢！

佐利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:40:50.303

我找到的最好的免费软件是 ZBarSDK [http://zbar.sourceforge.net/iphone/sdkdoc/](http://zbar.sourceforge.net/iphone/sdkdoc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:43:46.737

我以前用过ZXing。如果您遇到问题，请使用 CocoaPods 版本...

[http://cocoapods.org/?q=zxing](http://cocoapods.org/?q=zxing)

它处理所有包含的内容和所有内容。CocoaPods 确实是前进的方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T09:32:47.377

[https://codeload.github.com/cgreening/BarCodeExample/zip/master](https://codeload.github.com/cgreening/BarCodeExample/zip/master)

iOS7 内置扫描条码功能，不需要单独的 sdk；如果您的部署目标是 iOS7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T18:49:46.183

我使用[ZXingObjC](https://github.com/TheLevelUp/ZXingObjC)取得了不错的成绩，顾名思义，它是 ZXing 的 ObjC 端口，也在 CocoaPods 上。

# html - 在悬停状态下的常规链接之前和之后添加字符

> ID：13346724
> 
> 赞同：2
> 
> 时间：2012-11-12T15:39:59.943
> 
> 标签：html, css

想知道是否可以在悬停状态的链接文本之前和之后添加一个字符。

例如

常规状态：

“文本”

悬停状态：

“[ 文本 ]”

就目前而言，我的列表看起来像这样。

```
<div  id="navigation">
<ul>
    <li><a href="#">Journalist</a></li>
    <li><a href="#">Writer</a></li>
    <li><a href="#">Publications designer</a></li>
</ul>

#navigation li a:hover{

  text-shadow:2px 1px 3px #00CDCD;} 
```

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T15:41:23.100

只需使用生成的内容：

```
a:hover::before {
    content: '[ ';
}

a:hover::after {
    content: ' ]';
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ArySE/)。

# asp.net-mvc-3 - 编译我的 ASP.NET MVC3 应用程序时引发异常

> ID：13346725
> 
> 赞同：1
> 
> 时间：2012-11-12T15:40:03.080
> 
> 标签：asp.net-mvc-3

为什么当我编译我的 ASP.NET MVC3 应用程序时会引发此异常...

> “System.Web.Mvc.ModelClientValidationRule”类型存在于“c:\Program Files\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\System.Web.WebPages.dll”和“c: \Program Files\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll'

# ios5 - newby IOS：无法重定向网址

> ID：13346728
> 
> 赞同：2
> 
> 时间：2012-11-12T15:40:20.817
> 
> 标签：ios5, nsurlconnection, xcode4.4

这是我的第一个IOS项目。很难登录工作。该站点有一个指向另一个 url 的 meta_refresh。我试图向 meta_refresh 中的 url 发送另一个请求，但是应用程序只是挂起。我确定我做错了什么，但我使用的是 XCode 4.4，所以很多 NSURLConnection 委托方法已被弃用。

这就是我正在做的事情：

```
NSString *urlAsString = baseURL;
urlAsString = [urlAsString stringByAppendingString:@"?user[login]=username"];
urlAsString = [urlAsString stringByAppendingString:@"&user[password]=password"];
urlAsString = [urlAsString stringByAppendingString:@"&origin=splash"];

NSURL *url = [NSURL URLWithString:urlAsString];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url];
[urlRequest setTimeoutInterval:30.0f];
[urlRequest setHTTPMethod:@"POST"];
NSURLResponse *response = nil;
NSError *error = nil;

NSData *data = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:&error];    

if([data length] > 0 && error == nil){
    NSString *html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"HTML = %@", html);
    NSRange obj = [html rangeOfString:@"http-equiv=\"refresh\""];
    NSInteger len = obj.length;
} else if([data length] == 0 && error == nil) {
    NSLog(@"No data was returned.");

} else {
    NSLog(@"Error happened = %@", error);
} 
```

这是我得到的：

另一个问题是我读过我应该使用异步连接。问题是我需要从网站上抓取的数据显示在屏幕上。如果我在返回数据之前显示屏幕，那么我将没有任何数据——或者我不明白这是如何工作的？

谢谢。——托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:00:41.797

I think that maybe you're a mixing stuff. You're setting a string url with GET values and then you set the HTTPMethod to POST and I don't know if that is going to work fine.

Here's a code that I have to send values with POST:

```
NSString *post = [NSString stringWithFormat:@"&user_login=%@&user_password=%@&origin=%@,username,password, splash];

NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:baseURL]]];

[request setHTTPMethod:@"POST"];

[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];

NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

# c# - 使用 NHibernate 保留以前版本的实体

> ID：13346733
> 
> 赞同：0
> 
> 时间：2012-11-12T15:40:31.717
> 
> 标签：c#, nhibernate, fluent-nhibernate

我正在尝试使我的应用程序能够保留以前版本的实体。

例如，如果我有一个`Book`我希望能够在版本 1 或版本 5 等处检索它...

```
public class Book
{
    public virtual int ID {get; set;}
    public virtual string Name {get; set;}
    public virtual int Version {get; set;}
} 
```

我像这样映射版本列：

```
Version(x=>x.Version); 
```

这是有效的。插入时，版本为 1。
如果我按 id 拉回该实体，对其进行编辑并保存，版本将增加到 2。

我的问题是，我怎样才能保留以前的版本？

我怀疑 ID 上有某种复合 版本...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:20:19.857

正如 Anton Gogolev 指出的那样 - 版本属性/列不是用于审计，而是用于并发控制。

[NHibernate Envers](https://bitbucket.org/RogerKratz/nhibernate.envers)是 NHibernate 的第 3 方审核库，可能适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:00:33.247

该`Version`构造用于实现[乐观并发控制](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)，而不是用于存储以前版本的实体。

要实现完整版本控制，您要么必须求助于单独的仅插入`BookRevision`表，要么使用现在流行的 CQRS/ES。

# c# - 合并具有嵌套类的同一类的两个对象

> ID：13346739
> 
> 赞同：3
> 
> 时间：2012-11-12T15:40:56.943
> 
> 标签：c#, generics, merge, nested-class, propertyinfo

我有一些由其他人提供的用于序列化的类。这些类由许多具有默认值的参数构成。我需要使用其他默认值来启动它们。它是这样实现的：

```
public class Header
{
    public class SubHeader1
    {
        [XmlElement("paramone")]
        public string param1{get;set;}
        [XmlElement("paramtwo")]
        public string param2{get;set;}
        [XmlElement("paramthree")]
        public string param3{get;set;}
        [XmlElement("paramfour")]
        public string param4{get;set;}
        public SubHeader1()
        {
            param1 = "theirdefault";
            param2 = "theirdefault";
            param3 = "theirdefault";
            param4 = "theirdefault";
        }
    }
    public class SubHeader2
    {
        [XmlElement("paramone")]
        public string param1{get;set;}
        [XmlElement("paramtwo")]
        public string param2{get;set;}
        public SubHeader1()
        {
            param1 = "theirdefault";
            param2 = "theirdefault";
        }
    }
    Public class SubHeader3
    {
        public class SubSubHeader
        {
            [XmlElement("paramone")]
            public string param1{get;set;}
            [XmlElement("paramtwo")]
            public string param2{get;set;}
            [XmlElement("paramthree")]
            public string param3{get;set;}
            [XmlElement("paramfour")]
            public string param4{get;set;}
            ...
            [XmlElement("paramtwentyfive")]
            pulic string param25{get;set;}
            public SubHeader1()
            {
                param1 = "theirdefault";
                param2 = "theirdefault";
                param3 = "theirdefault";
                param4 = "theirdefault";
                ...
                param25 = "theirdefault";
            }
        }
        [XmlElement("paramone")]
        public string param1{get;set;}
        [XmlElement("subsubheader")]
        public SubSubHeader SSubHeader;
        public SubHeader3()
        {
            SSubHeader = new SubSubHeader();
            param1 = "theirdefault";
        }
    }
    [XmlElement("subheaderone")]
    public SubHeader1 SubHeaderOne;
    [XmlElement("subheadertwo")]
    public SubHeader2 SubHeaderTwo;
    [XmlElement("subheaderthree")]
    public SubHeader3 SubHeaderThree;
    public Header()
    {
        SubHeaderOne = new SubHeader1();
        SubHeaderTwo = new SubHeader2();
        SubHeaderThree = new SubHeader3();
    }
} 
```

这就是每个继承类的标准。我还有一些其他信息需要启动，主要在子标题中。

我创建了自己的 SubHeader3 对象，并在他们的类中创建了一个构造函数（用于测试目的），该构造函数接受该对象。我试图通过这样的泛型用我的更新默认值

```
public static void MergeWith<T>(this T primary, T secondary) {
    foreach (var pi in typeof(T).GetProperties()) {
       var priValue = pi.GetGetMethod().Invoke(primary, null);
       var secValue = pi.GetGetMethod().Invoke(secondary, null);
       if (priValue == null || (pi.PropertyType.IsValueType && priValue == Activator.CreateInstance(pi.PropertyType))) {
          pi.GetSetMethod().Invoke(primary, new object[]{secValue});
       }
    }
} 
```

但这仅适用于 SubHeader3 类中的值，不适用于嵌套的 SubSubClass。这是实现这一目标的最佳方法吗？如何在编译器安全的情况下让它覆盖子类。还是我以错误的方式接近这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:02:51.603

尝试[与 Automapper 合并](https://stackoverflow.com/questions/2463183/merge-two-objects-to-produce-third-using-automapper)。

```
 a.InjectFrom(b)
  .InjectFrom(c)
  .InjectFrom<SomeOtherMappingAlgorithmDefinedByYou>(dOrBOrWhateverObject); 
```

# ruby-on-rails - 分配给活动记录中的 id 属性

> ID：13346740
> 
> 赞同：2
> 
> 时间：2012-11-12T15:41:07.470
> 
> 标签：ruby-on-rails, activerecord

我在两个模型 A 和 B 之间有多对多的关系。我想通过使用它们的 id 将多个 B 类分配给 A 的实例。我尝试了以下方法，但它不起作用：

```
@an_a.b_ids = some_b_ids 
```

我怎样才能让它工作？

我要遵循的教程是[http://railscasts.com/episodes/258-token-fields-revised](http://railscasts.com/episodes/258-token-fields-revised)

使用相应的代码：

```
def author_tokens=(tokens)
  self.author_ids = Author.ids_from_tokens(tokens)
end 
```

正确的 ID 被发送到该方法，它只是似乎不起作用的分配。

# javascript - 无法取消我的 HTML 复选框的 onchange 事件

> ID：13346743
> 
> 赞同：3
> 
> 时间：2012-11-12T15:41:31.637
> 
> 标签：javascript, jquery, html

我有一个工作示例，但我不确定为什么我的实现不起作用。有人可以帮忙吗？我错过了一些东西，我需要另一双眼睛来为我找到它。:)

[JSFiddle 演示](http://jsfiddle.net/wanUF/2/)<-- 在此处查看代码。

我正在尝试重现[此处](http://help.dottoro.com/ljeosnqv.php)使用的功能。我似乎对传递/访问`event`变量有点困惑。

谢谢！！:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:44:34.580

绑定到 Click 事件：[示例](http://jsfiddle.net/wanUF/6/)

```
$(document).ready(function() {
    $('#checkbox1').click(function(event) {
        if (flag) {
            CancelEvent(event);
            return event.returnValue;
        }
        SomeOtherStuff('this method has real functionality too');
    });
});​ 
```

更改事件结构以取消已经发生的操作有点晚。此外，还省略了返回值。所以我将它添加到事件处理程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:45:32.030

您忘记添加`return event.returnValue;`并且 onClick 将代替 onChange 工作？

[http://jsfiddle.net/wanUF/11/](http://jsfiddle.net/wanUF/11/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:48:10.127

工作[jsfiddle](http://jsfiddle.net/wanUF/13/)。

在复选框单击时返回 false。

```
$('#checkbox1').click(function(event) {

    return false;
}); 
```

您可以使用输入的禁用属性

```
<input type="checkbox" id="checkbox1" disabled=disabled  /> 
```

# javascript - DOMContentLoaded 上的 document.readyState？

> ID：13346746
> 
> 赞同：10
> 
> 时间：2012-11-12T15:41:36.333
> 
> 标签：javascript, dom, cross-browser, dom-events

在支持事件`DOMContentLoaded`和属性的浏览器中`document.readyState`：

> 发生火灾时`DOMContentLoaded`，我可以假设 的值`document.readyState`始终是`"complete"`or `"interactive"`/[`"loaded"`](https://stackoverflow.com/questions/13348029/values-for-document-readystate-in-android-2-3-browser)吗？
> 
> （或者可能`document.readyState`有时仍然具有价值`"loading"`？）

在您的回答中，请提供对权威来源的参考。

你可能想知道：为什么不只是听`readystatechange`呢？因为Android 2.3.5标准浏览器是目标平台，没有实现`readystatechange`事件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T15:45:12.943

财产的价值`readyState`总是`"interactive"`当`DOMContentLoaded`被解雇的时候。MDN[文档](https://developer.mozilla.org/en-US/docs/DOM/document.readyState)声称：

```
// alternative to DOMContentLoaded event
document.onreadystatechange = function () {
  if (document.readyState == "interactive") {
    initApplication();
  }
} 
```

可与`DOMContentLoaded`处理程序互换。您也可以在[此处](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#event-readystatechange)查看规范，它重申了这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-16T15:38:11.177

根据接受的答案：

> 财产的价值`readyState`总是`"interactive"`当`DOMContentLoaded`被解雇的时候。

# **错误的**

它具有以下任一项：

*   `interactive`
*   `complete`

> **文档 。就绪状态** [参考。](https://html.spec.whatwg.org/multipage/dom.html#resource-metadata-management:event-readystatechange)
> 
> `"loading"`在 Document 加载时返回，`"interactive"`一旦完成解析但仍在加载子资源，以及`"complete"`一旦加载。

如果在Document 具有状态`readystatechange` ***之前***附加一个事件侦听器，`interactive`则可以单独检查`interactive`，例如 MDN 中的示例。然后，如果它到达它，就会捕获该状态。

但是，如果在稍后阶段检查状态，则不是。

同样来自 MDN 的示例，这些是相等的：

```
document.onreadystatechange = function () {
  if (document.readyState === 'interactive') {
    initApplication();
  }
}

document.addEventListener("DOMContentLoaded", function () {
    initApplication();
}); 
```

这并不意味着：

```
if (document.readyState !== 'loading')
    assert(document.readyState === 'interactive') 
```

答案表明了这一点。

话说：

*   `document.addEventListener("DOMContentLoaded", ...`

永远不会等于：

*   `window.addEventListener('load', ...`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-24T11:26:47.950

该`readyState`属性的价值至少是在`"interactive"`被`DOMContentLoaded`解雇时。[正如@MTCoster 在这里](https://stackoverflow.com/questions/13346746/document-readystate-on-domcontentloaded#comment87562914_13346803)指出的那样，该事件被推迟到具有`defer`属性和`module`脚本的链接脚本（链接或内联）已执行。另见[这篇文章](https://jakearchibald.com/2017/es-modules-in-browsers/)。

# algorithm - 在 O(n) 时间内计算第 90 个百分位数

> ID：13346754
> 
> 赞同：3
> 
> 时间：2012-11-12T15:42:03.527
> 
> 标签：algorithm, percentile

> **可能重复：**
> [你能在 O(n) 摊销复杂度中对 n 个整数进行排序吗？](https://stackoverflow.com/questions/6121868/can-you-sort-n-integers-in-on-amortized-complexity)

我必须编写一个算法，给定一个未排序的整数列表，返回“文件中超过文件中至少 90% 的数字的最小数字”，如果不存在这样的数字，则返回 -1。很简单：我使用归并排序对列表进行排序，然后从 90% 的索引处开始，并寻找第一个大于它之前的数字的数字。

问题的第 2 部分让我很困惑。我们得到了更多信息：整数代表薪水，这意味着它们都是正数，其中绝大多数都在 1,000,000 以下。显然，有了这些额外的信息，就可以编写一个在 O(n) 时间内解决原始问题的算法，但我一点也不知道这是怎么可能的。有任何想法吗？

我会发布我到目前为止所做的事情，但我无法提出任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T15:49:07.237

您正在寻找一种[选择算法](http://en.wikipedia.org/wiki/Selection_algorithm)，它选择`k`数组中的第 th 大元素。Wikipedia 文章给出了一个 O(n) 算法来执行此操作，该算法类似于快速排序，但不对整个数组进行排序，因此避免了 O(n*logn) 运行时。

如果元素都在某个范围内（例如，在您的情况下为 1-1000000），那么另一种方法是使用O(n) 中的[计数排序](http://en.wikipedia.org/wiki/Counting_sort)或[桶排序](http://en.wikipedia.org/wiki/Bucket_sort)对它们进行排序，然后选择您需要的元素。由于在这种情况下，“绝大多数”元素低于 1000000 而不是全部，因此您可以使用 1000001 个存储桶执行存储桶排序，并将最后一个存储桶用于 1000000 以上的所有元素。

# cakephp - 在控制器中使用 cakephp 助手

> ID：13346756
> 
> 赞同：7
> 
> 时间：2012-11-12T15:42:07.397
> 
> 标签：cakephp

我有一个助手可以将不同的字符串更改为日期。通过这个 +5 变成 2012-11-17（从今天起 5 天），5 变成 2012-11-05（今年，本月，给定日期）。

我想在我的控制器中使用相同的东西。

```
App::uses('EasyDateHelper', 'View/Helper');
App::uses('View', 'View');
$this->View = new View($this->Controller);
$easyDate = new EasyDateHelper($this->View); 
```

这段代码运行良好，但我想知道是否有更好/更简单的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T15:58:53.180

是的，有。不要让它成为帮手！

助手仅用于视图级别。如果您在控制器中需要它，那么您的设计是错误的。

所以让它成为一个 lib 类等，并以这种方式在你的控制器中使用它。并在您的帮助程序中使用相同的库或制作一个包装器帮助程序（类似于 String 的 TextHelper、CakeNumber 的 NumberHelper、CakeTime 的 TimeHelper 等）以轻松访问视图范围内的方法。

有关更复杂的解决方案，请查看 Sessions：

```
CakeSession is the lib class.
SessionComponent wraps it for the controller layer
SessionHelper wraps it for the view layer 
```

对于 Lib“DateLib”（只要类名在整个应用程序和核心中是唯一的，您可以随意命名它）：将其放在 /Lib/ 或 /Lib/PackageName 中，而 PackageName 可以由您定义（例如“效用”）。最好按 PackageName 分组，而不是直接放到 Lib 中。

```
/Lib/Utility/DateLib.php 
```

在您的代码中：

```
App::uses('DateLib', 'Utility');

$date = DateLib::format(); // for static methods

$DateLib = new DateLib();
$date = $DateLib->format(); // creating an extra object here 
```

如果你可以使用静态方法，你应该这样做。这也是 cake 对 CakeTime、CakeNumber 和 String 类的处理方式（详见代码）。

# mysql - 如何触发主厨独奏配置更改

> ID：13346760
> 
> 赞同：0
> 
> 时间：2012-11-12T15:42:14.850
> 
> 标签：mysql, database, deployment, chef-infra, cookbook

我正在使用 chef-solo，以避免管理多个实例的头痛（如果您认为这不是一个好主意，请纠正我）

我已经定义了一个“数据库”角色；我在目标节点上用 chef-solo 烹饪它。

现在，我想要一种“动态”为数据库创建新用户的方法

就像引擎场一样，您可以在其中点击“创建数据库”按钮并触发新的数据库创建。

我应该设置一个连续从 URL 获取运行列表的 cronjob 吗？我应该在那个 URL 中输入什么？我不想重新安装整个食谱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T13:20:57.160

回答问题“如何动态创建数据库用户？” 我会说以下。

如果您将 chef-solo 与 cron 作业一起使用来访问 URL，那么您正在重新发明 chef-client + chef-server 减去安全性。

您还应该能够再次运行食谱，并且它不应该破坏任何东西。

听起来您应该运行 chef-client 并将用户信息存储在数据包中。

看起来 John(Lusis) 已经完成了添加用户部分。[https://gist.github.com/769365](https://gist.github.com/769365)

要“动态地”触发它，您可以使用 knife/ssh 或制作一个在节点上运行 chef-client 的 cgi 脚本。我建议使用 ssh 方法。

# vba - Access 2010 VBA引用表中的单个字段

> ID：13346767
> 
> 赞同：1
> 
> 时间：2012-11-12T15:42:32.013
> 
> 标签：vba, ms-access-2010

我目前正在从事一个项目，我必须为 Sweet Company/批发商创建一个原型系统。在我的客户订单详细信息表格中，我有一个组合框来选择订购的库存商品是“已分配”还是“已发货”。我想拥有它，这样一旦选择了“已发货”，就不能再改回来。我尝试在 VBA 中编码，以便一旦选择组合框更改为启用 = false。然而，问题是系统中的每个客户订单都会发生变化。我的代码如下所示：

```
Private Sub OrderStatus_Click()
    If OrderStatus = "Shipped" Then
        OrderStatus.Enabled = False
    End If

    ' etc
End Sub 
```

有没有办法在不影响每个客户订单的情况下引用属性“订单状态”（即已发货或已分配）的单个实例？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:54:06.977

您可以为 On_Current() 在表单中添加一个事件，这样每当您切换到新记录时，它都会检查是否应为该记录启用组合框。

```
Private Sub On_Current()
    If OrderStatus = "Shipped" Then
        OrderStatus.Enabled = False
    else
        OrderStatus.Enabled = True
    End If
end Sub 
```

# c# - 我收到编译器错误消息：CS1061：当我单击报告按钮时

> ID：13346768
> 
> 赞同：4
> 
> 时间：2012-11-12T15:42:32.510
> 
> 标签：c#, asp.net

我尝试添加文件以更新应用程序以在托管在 IIS 7 上的 Web 应用程序上生成新的 excel 报告，但是当我单击在应用程序上生成时出现以下错误

编译错误
描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：

CS1061：

```
'ASP.reportmonthlyreturns_aspx' does not contain a definition for 'btnGenerator_Click'
 and no extension method 'btnGenerator_Click' accepting a first argument of type 
'ASP.reportmonthlyreturns_aspx' could be found (are you missing a using directive or an 
assembly reference?) 
```

源错误：

```
Line 36:             SelectCommand="SELECT distinct year(departure_berth) as year FROM va_voyage_master_tb">
Line 37:         </asp:SqlDataSource>
Line 38:         <asp:Button ID="btnGenerator" runat="server" Text="Generate Report" 
Line 39:         class="button round blue image-right ic-right-arrow" onclick="btnGenerator_Click" 
Line 40:          />    

Source File: c:\inetpub\wwwroot\VoyageApplication\ReportMonthlyReturns.aspx    Line: 38 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:45:34.987

您的标记 (.aspx) 页面似乎包含对您的代码隐藏页面 (.cs) 中不存在的事件的引用。

**检查 OnClick 属性声明上的大小写。它应该是 Pascal 大小写：“OnClick”。**

根据您的标记，

```
<asp:Button ID="btnGenerator" runat="server" OnClick="btnGenerator_Click" /> 
```

您的代码应包含以下内容：

```
protected void btnGenerator_Click(object sender, EventArgs e)
{
    // logic here
} 
```

您是否有可能在标记或代码中更改了 OnClick 事件属性？两者必须匹配。

# objective-c - 剪辑，然后描边一个 UIBezierPath

> ID：13346772
> 
> 赞同：1
> 
> 时间：2012-11-12T15:42:50.280
> 
> 标签：objective-c, ios, cocoa-touch, core-graphics, uibezierpath

我想描边被当前窗口剪裁的 UIBezierPath 的边缘。我已经抚摸了路径，但它延伸到了窗户之外。在这里的简化图中，您可以看到结果是右下角和底部有两个未描边的边缘。

这是我目前在 UILabel 子类中所做的事情：

```
[myPath addClip];
[myPath stroke]; 
```

![在此处输入图像描述](../Images/97678c44e278884ed384cfa1a5373970.png)

TIA

# java - 为什么我不能检查我的类是否在 Web 应用程序中实现了我自己的接口？

> ID：13346773
> 
> 赞同：4
> 
> 时间：2012-11-12T15:42:55.997
> 
> 标签：java, spring, tomcat, reflection

我正在尝试编写类似框架的东西。我需要在我的计算机上搜索特定的文件夹，并能够获得所有实现我的接口的类文件。虽然我知道如何扫描文件夹并以某种方式检查所有类文件，但我无法检查读取类是否实现了我的接口。

```
if (Game.class.isAssignableFrom(classInFolder))
    {
        //Do sth here
} 
```

这是我尝试过的一种方法，但它从不跳入 if 子句 - 游戏是我的界面

```
public interface Game {

public void startAlgorithm();

} 
```

classInFolder 是我从文件夹中获得的 Class。有趣的是，如果我尝试对某些库接口做同样的事情 - 假设 Serializable 它工作正常 - 我试过了。更何况我写了这样的东西

```
Type[] type = classInFolder.getGenericInterfaces();
for (int i = 0;i<type.length;++i)
{
    System.out.println("interface = " + type[i]);
    if (type[i] instanceof Game){
    System.out.println("It is");
    }
} 
```

我得到了我的控制台输出 - interface = mypackage.Game 但是没有“它是”输出。同样的事情是在我尝试使用的类上使用我自己的注释 - 我无法检查我的类是否实现了我的接口，但是当这些是来自某个库的接口时它可以工作。我将我的项目部署在 tomcat v 7.0 上，一切都是使用 Spring 在 Eclipse 上的 Java 7 上构建的。

对于可能发生的事情，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:47:14.417

我怀疑你用不同`ClassLoader`的 s 加载你的类。由一个类加载器加载的类与由不同类加载器加载的同一类不同。

尝试使用相同的`ClassLoader`.

* * *

```
Object a1 = new ClassLoader() {}.loadClass("A");
Object a2 = new ClassLoader() {}.loadClass("A");

return a1.getClass().equals(a2.getClass()); 
```

将返回`false`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:49:44.427

您的示例中没有“It is”输出，因为您应该在 instanceof 运算符左侧使用所需类的实例，而您在那里使用 Type 实例。

尝试使用[Class.getInterfaces()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getInterfaces%28%29)获取类实现的接口，并在 getInterfaces() 方法返回的数组中查找您的接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T15:56:27.327

使用`instanceof`运算符，**您正在检查对象实例而不是接口。**

要检查接口，请尝试获取接口，因为可能有多个，迭代列表并匹配如下类型：

```
 for (Class ifce : type[i].getClass().getInterfaces()) {
           if (ifce.equals(Game.class)) {
                System.out.println("It is");
           }
         } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T16:49:00.393

您的`Game`类可能是由 tomcat 类加载器加载的。

您`classInFolder`可能是由您自己的自定义类加载器加载的。

您需要确保第一个加载器是第二个加载器的父级

```
ClassLoader parent = Game.class.getClassLoader();

new MyClassLoader(parent, ...) 
```

# c# - C#：获取特定日期的所有文件并将其保存到文件夹

> ID：13346775
> 
> 赞同：0
> 
> 时间：2012-11-12T15:43:00.170
> 
> 标签：c#, file, file-management

有没有办法获取所有文件（在特定日期最后修改），并将它们保存到一个新文件夹中（使用特定日期的名称）。

示例文件：

里面C：/

```
Image File     Date Modified

Image001.jpg   11/12/2012
Image002.jpg   11/12/2012
Image003.jpg   11/13/2012
Image004.jpg   11/12/2012 
```

输出应该是：

```
C:/20121112/

Image001.jpg
Image002.jpg
Image004.jpg  

C:/20121113

Image003.jpg 
```

我目前正在使用以下语法：

```
var mydirectory = new DirectoryInfo("C:/");
DateTime from_date = DateTime.Now.AddDays(-1);
DateTime to_date = DateTime.Now;
var files = directory.GetFiles()
  .Where(file=>file.LastWriteTime >= from_date && file.LastWriteTime <= to_date); 
```

但我不知道如何将 var 文件保存到另一个文件夹名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:51:04.283

也许：

```
var files = Directory.EnumerateFiles(path, "*.jpg", SearchOption.TopDirectoryOnly)
                     .Select(fn => new FileInfo(fn));
var fileDateGroups = files.GroupBy(fi => fi.LastWriteTime.Date);
foreach (var dateGroup in fileDateGroups)
{
    string dir = Path.Combine(@"C:\", dateGroup.Key.ToString("yyyyMMdd"));
    Directory.CreateDirectory(dir);
    foreach (var file in dateGroup)
    {
        string newPath = Path.Combine(dir, file.Name);
        File.Copy(file.FullName, newPath, true);
    }
} 
```

**编辑**：如果要搜索多个文件扩展名，则需要手动过滤它们：

```
var allowed = new[]{ ".png", ".jpg" };
var files = Directory.EnumerateFiles(path, "*.*", SearchOption.TopDirectoryOnly)
                     .Where(fn => allowed.Contains(Path.GetExtension(fn)))
                     .Select(fn => new FileInfo(fn)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:55:33.020

`System.IO.FileInfo`它提供了创建、删除和打开文件的方法，可用于此目的。要获取此文件的最后修改日期，您可以使用`FileInfo.LastWriteTime`which 返回`DateTime`

**例子**

```
string FileName = @"D:\Resources\Image001.jpg"; //Initializes a new string of name FileName as D:\..\Image001.jpg
FileInfo Information = new FileInfo(FileName); //Initializes a new instance of FileInfo to wrap a particular file 
DateTime DateModified = Information.LastWriteTime; //Initializes a new DateTime as Information.LastWriteTime 
```

然后，您可以使用`System.IO.Directory.CreateDirectory(string path)`其名称来创建特定目录`path`

**注意**：您不能创建包含无效字符的目录，例如`/`, `\`, `?`, `:`,`*`等...这意味着您不能创建名称目录`11/12/2012`

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:50:51.273

肯定有办法的。查看 Path 和 Directory 类以迭代文件和目录以及创建新目录。一旦您进入文件夹，一些简单的谷歌搜索应该能够显示如何读取文件的修改日期，然后您只需要将它们排队以写入您的新位置。让我们知道这是否让您感到困惑，并尝试发布一些代码并展示您的一些努力。通常人们会更好，并且更少反对你:)

# ruby-on-rails - 测试自定义后操作事务问题

> ID：13346776
> 
> 赞同：0
> 
> 时间：2012-11-12T15:43:11.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我在 Rails 3.2.8 应用程序中测试自定义发布操作时遇到问题。我认为这与将事务装置设置为真有关，但可以与一些帮助诊断有关。

我的 spec_helper.rb 中有这个

```
config.use_transactional_fixtures = true 
```

我的控制器规格如下所示：

```
require 'spec_helper'   
describe Api::V1::NasController do       
  login_user        
  describe "GET #nas" do      
    it "posts to startup as new (state) controller" do
      @location = FactoryGirl.create(:location_full)
      @location.users << @current_user
      nas = FactoryGirl.create(:nas, location_id: @location.id )   
      nas.update_attributes!(:state => 'initialised')
      post :start_up, :token => nas.token, :key => nas.key
      response.should be_success
    end   
  end   
end 
```

我可以在我的服务器日志中看到该帖子，但是测试失败并显示：

```
 1) Api::V1::NasController GET #nas posts to startup as new (state) controller
 Failure/Error: post :start_up, :token => @nas.token, :key => @nas.key
 NoMethodError:
   undefined method `slice' for nil:NilClass
 # ./app/helpers/nas_helper.rb:26:in `queue'
 # ./app/controllers/api/v1/nas_controller.rb:99:in `start_up'
 # ./spec/controllers/api/v1/nas_controller_spec.rb:16:in `block (3 levels) in <top (required)>' 
```

我的控制器中有一个前置过滤器，它获取令牌和密钥，如果找不到 Nas，则授予头部未经授权的权限。

在这个测试中，实际上找到了 Nas 并且它进入了控制器动作：

```
def start_up
   @token = params[:token]
   @nas = Nas.find_by_token("#{@token}")
   if @nas
   [ do some stuff ]
   ....
   NasSync.enqueue(@nas)   
   ...       
end 
```

它在 NasSync.enqueue(@nas) 失败，它反过来调用以下帮助方法（来自我省略的 resque 工作人员）：

```
 def self.queue(nas)  
   node = Nas.find(nas.id).nasname.slice(0..3)
   .....
 end 
```

在“真实”世界中，我可以成功地发布到这个网址——只是在测试环境中它失败了。

```
 node = Nas.find(nas.id).nasname.slice(0..3) 
```

没有找到一个 Nas 切片。

如果它到目前为止没有失败，我无法弄清楚为什么它找不到 Nas。如果我对节点进行硬编码，则测试通过。

nas没有被发送给助手是否有特定原因？

任何建议/帮助表示赞赏。

- 更新 -

我已经关闭了事务性固定装置，对留下的混乱进行了排序，但仍然遇到错误：

```
 undefined method `slice' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:16:33.157

虽然实际上并不是直接导致问题的事务性固定装置，但最终将它们关闭指出了问题所在。这实际上是我代码中的一个小错误。

交易中的生活很容易，直截了当，而且可能相当盲目。事情过去了，当他们可能不应该

关闭它们意味着我需要丢弃我凌乱的种子并在需要时创建数据。

懒惰的编码会导致头痛和更多的工作。

我现在也意识到，人们应该对自己的能力更有信心，并相信已经编写的测试。在这种情况下，那个小小的错误可能会导致一些大问题。3天过得不错。

# mysql - 错误 JBPM MySQL HornetQ 人工任务服务

> ID：13346782
> 
> 赞同：1
> 
> 时间：2012-11-12T15:43:47.997
> 
> 标签：mysql, jbpm, hornetq

我将数据库更改为 mysql，当我运行演示过程时出现此错误：

[main] 错误 service.hornetq.HornetQTaskClientConnector.connect - 无法使用配置 org-hornetq-core-remoting-impl-netty-NettyConnectorFactory?port=5445&host=127-0-0-1 连接到服务器

但我像教程一样干净地配置了所有 XML 文件：http: [//docs.jboss.org/jbpm/v5.3/userguide/ch.installer.html](http://docs.jboss.org/jbpm/v5.3/userguide/ch.installer.html)

感谢帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:41:00.413

检查您的 HornetQ 接受器。您可能在 Acceptor 上有不同的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:08:01.723

我下载了 jbpm-installer(5.3.O)，当我使用默认配置运行演示过程时，问题消失了。但是如果我使用 MySQL，我会出现这个错误（数据库被干净地导出，但我没有运行演示过程）我像这个 hornetq 一样更改了 web.xml（$home\task-service\resources\war）上的 hornetq 配置。主机 127.0.0.1 hornetq.port 5445 但没有结果

# html - line-height属性可以继承父div的height属性还是访问它所属的div的height属性？

> ID：13346783
> 
> 赞同：7
> 
> 时间：2012-11-12T15:43:53.603
> 
> 标签：html, height, css, inheritance

我有一个高度为 50px 的 div，其中包含一个子 div。子 div 的高度通过使用 css 属性/值对从父级*继承：* *height: 100%*。

```
 <div style="height: 50px;">
        <div style="height: 100%;">Some Text</div>
    </div> 
```

我想垂直对齐子 div 中的文本，为此我将*line-height*属性添加到子 div。

```
 <div style="height: 50px;">
        <div style="height: 100%; line-height: 50px;">Some Text</div>
    </div> 
```

请注意，对于*line-height*，我必须将高度明确定义为 50px。

子 div 可以从父级*继承**height属性（使用**height: 100%*）但是对于*line-height*我必须显式设置值吗？

如果是这样，这（IMO）有点混乱，因为假设我有一个嵌套 10 层深的 div 并且它一直继承*height**属性*。然后，如果我想在这个 div 中垂直对齐文本，我不仅必须将值*硬编码*为等于最上面的父 div 的高度，而且我已经*浏览*了我的代码以找到明确定义高度的父级。

*请注意，我不想在父级别定义行高，然后在子节点上使用继承来获取值。*

如果有一种方法可以将*line-height*设置为它所在的 div 的高度，那就太好了。也许语法如下所示（完全组成）：

```
<div style="height: 100%; line-height: from-property('height');">Some Text</div> 
```

其中*line-height*使用*from-property*方法访问 height 属性。（是的，我知道使用诸如*from-property*之类的方法会引入循环依赖的可能性，因此也许其他方式会更好。我只是用它来表达我想要的。）

谢谢！

简

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T15:58:38.373

`line-height`旨在设置行之间的间距，并使用它来垂直对齐某些东西不是一个好的选择。除非您确定内容将始终在一行中。

使用它使其垂直居中，但并不完美。

```
div.parent {
  display: table-cell;
  vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:56:16.700

您可以使用 jQuery 计算出高度，`parent()`然后根据该高度动态添加行高吗？

它看起来像：

```
$(document).ready(function(){

    $('.lineHeightDiv').each(function(){
        var div_height = $(this).parent('div').height();
        $(this).css('lineHeight', (div_height / 2) + "px");
    });

}); 
```

# c# - 如何将循环与返回语句并行化？

> ID：13346784
> 
> 赞同：0
> 
> 时间：2012-11-12T15:43:54.957
> 
> 标签：c#, loops, parallel-processing, return

我编写了一个位图扩展方法，它将在另一个位图中搜索“这个”位图，如果找到，将返回找到它的点。该算法通过逐行搜索较大图像的行来工作。我想将这些行分成与我的机器上的内核一样多的部分，并异步搜索它们。如果其中一个线程找到图像，则需要取消其他线程。这可以通过并行实现吗？

```
public static Point LocateWithin(this Bitmap smaller, Bitmap larger) {

        if (smaller.Width > larger.Width || smaller.Height > larger.Height)
            return new Point(-1, -1);

        Rectangle smallerRectangle = new Rectangle(0, 0, smaller.Width, smaller.Height);
        Rectangle largerRectangle = new Rectangle(0, 0, larger.Width, larger.Height);

        BitmapData smallerData = smaller.LockBits(smallerRectangle,
                                                  ImageLockMode.ReadOnly,
                                                  PixelFormat.Format32bppRgb);
        BitmapData largerData = larger.LockBits(largerRectangle,
                                                ImageLockMode.ReadOnly,
                                                PixelFormat.Format32bppRgb);

        try {
            IntPtr largerPtr = largerData.Scan0;
            IntPtr smallerPtr = smallerData.Scan0;

            int smallerStrideLessOne = smallerData.Stride - 4;
            int smallerHeightLessOne = smaller.Height - 1;
            int heightDiff = larger.Height - smaller.Height;
            int widthDiff = larger.Width - smaller.Width;

            for (int yl = 0; yl <= heightDiff; yl++) {
                for (int xl = 0; xl <= widthDiff; xl++) {

                    if (memcmp(smallerPtr, largerPtr, smallerData.Stride) == 0) {

                        IntPtr lPtr = largerPtr;
                        IntPtr sPtr = smallerPtr;

                        bool isMatch = true;
                        for (int ys = 0; ys < smallerHeightLessOne; ys++) {
                            lPtr += largerData.Stride;
                            sPtr += smallerData.Stride;
                            if (memcmp(sPtr, lPtr, smallerData.Stride) != 0) {
                                isMatch = false;
                                break;
                            }
                        }
                        if (isMatch)
                            return new Point(xl, yl);
                    }
                    largerPtr += 4;
                }
                largerPtr += smallerStrideLessOne;
            }
        }
        finally {
            smaller.UnlockBits(smallerData);
            larger.UnlockBits(largerData);
        }
        return new Point(-1, -1);
    } 
```

# ruby-on-rails - 单表继承中的可选类型用法

> ID：13346786
> 
> 赞同：0
> 
> 时间：2012-11-12T15:44:03.850
> 
> 标签：ruby-on-rails, activerecord, single-table-inheritance

我有一个具有类型、名称、标签等的资产类别。

资产类型有：头像、图片、视频、摘要等。

我想让 Video < Asset type 仅适用于 type = 'video'，但对于所有其他类型 - 应该使用 Asset。

如果我使用 self.inheritance_column = 'type' - 它会失败，因为找不到 Avatar 类。有什么方法可以将所有类型映射到除视频之外的资产类吗？

谢谢，基里尔·萨雷金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:46:33.920

那是行不通的。您要么对这些类型进行 STI，要么没有。

这样做的方法是`type`用作您的 STI 列，以及`asset_type`用作您的分类列。然后只有视频获得该`type`列，所有其他资产都使用该`asset_type`列来说明什么是什么。

# xaml - Windows Phone ListBox 项目背景更改颜色，即使它已显式设置

> ID：13346790
> 
> 赞同：5
> 
> 时间：2012-11-12T15:44:23.817
> 
> 标签：xaml, layout, windows-phone-8

我正在寻找 1) 发生了什么，以及 2) 如何解决问题。

**问题**

如果 ListBox 项的高度高于 2521，即使背景显式设置为其他值，它似乎也会将背景更改为黑色。

**如何复制**

以我在下面的示例 XAML 文件为例，在您的 xaml.cs 文件中添加以下内容：

```
DataContext = new List<int>() { 1 }; 
```

将 TextBlock 的高度更改为 2522 或更高。

示例代码不是我遇到问题的地方，但它是一个演示错误的简单示例。我不打算拥有一个大小为 2522+ 的 TextBlock :)

**示例 XAML 文件**

```
 <Grid x:Name="LayoutRoot" Background="Brown">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <phone:Pivot x:Name="pivot" Title="{Binding name}" Grid.Row="1" Foreground="White" Margin="10,0,0,0">
            <phone:PivotItem x:Name="mainPivot" Header="menu" Margin="0,0,20,0">
                <ListBox ItemsSource="{Binding}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Background="White">
                                <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
                                    <TextBlock Height="2521" Text="some data" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="22" Foreground="Purple"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </phone:PivotItem>

        </phone:Pivot>

    </Grid>
</phone:PhoneApplicationPage> 
```

**评论**

一些人对我的 UI 提出了担忧。上面的代码是一个*示例*，而不是我的实际 UI。没有性能问题，ListBox 也不迟钝。除了背景改变颜色外，一切都按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:59:42.643

在 WP7[中，TextBlocks 的高度限制为 2048x2048](https://stackoverflow.com/questions/4368670/textbox-for-wp7-limit-in-text-bug)。我不确定这是否在 WP8 中得到修复，但这似乎与您现在遇到的问题相同。考虑将文本拆分为小于 2048 像素的块，或者使用类似[ScrollableTextBlock 之](http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx)类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T08:17:24.030

您可以将 minWidth 设置为列表框。这可能会帮助你。

```
 <Grid x:Name="LayoutRoot" Background="Brown">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <phone:Pivot x:Name="pivot" Title="{Binding name}" Grid.Row="1" Foreground="White" Margin="10,0,0,0">
        <phone:PivotItem x:Name="mainPivot" Header="menu" Margin="0,0,20,0">
            <ListBox ItemsSource="{Binding}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Grid Background="White">
                            <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
                                <TextBlock Height="2521" Text="some data" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="22" Foreground="Purple"/>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </phone:PivotItem>

    </phone:Pivot>

</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:28:20.550

不确定“为什么”，但在“什么”上，网格似乎是运行黑色背景的网格。我把网格拿出来，它的行为......

```
 <phone:Pivot x:Name="pivot" Title="{Binding name}" Grid.Row="1" Foreground="White" Margin="10,0,0,0">
        <phone:PivotItem x:Name="mainPivot" Header="menu" Margin="0,0,20,0" >
            <ListBox ItemsSource="{Binding}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28" Background="White">
                            <TextBlock Height="2530" Text="some data" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="22" Foreground="Purple"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </phone:PivotItem> 
```

那对你有用吗？

# javascript - 在 JS 中发现特定的手机型号

> ID：13346793
> 
> 赞同：5
> 
> 时间：2012-11-12T15:44:35.213
> 
> 标签：javascript, mobile, user-agent, browser-detection

我知道用户代理嗅探不是一种万无一失的方法，因为每天都会发布大量设备，但是我需要一种方法来获取用户正在访问的精确电话型号我的网站，以便将他/她引导到适当的帮助区域/文档。

[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)之类的工具允许您检测移动设备、浏览器、操作系统等，但是有什么东西可以检测您正在使用的特定手机型号（使用 Javascript）吗？例如 iPhone **4s**

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:50:13.863

这是迄今为止我发现的最好的[http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect](http://code.google.com/p/php-mobile-detect/wiki/Mobile_Detect)，但你需要 php

# android - 在模拟器上运行的 Facebook 应用程序不在设备上（fberror：服务器无法通信。稍后再试）

> ID：13346794
> 
> 赞同：0
> 
> 时间：2012-11-12T15:44:35.267
> 
> 标签：android, facebook, facebook-android-sdk

我已经尝试了所有可能的方法，但它在我的 htc 设备上不起作用。

facebookError ::服务器无法通信。请稍后再试

来源：[http ://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:36:01.243

确保您已在清单中包含互联网权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# javascript - Iframe 中定义的 Javascript 回调函数

> ID：13346797
> 
> 赞同：1
> 
> 时间：2012-11-12T15:44:42.123
> 
> 标签：javascript, jsf, iframe, callback

我正在尝试将 Drools-Guvnor 独立编辑器集成到我的 spring-webflow-jsf-richfaces 应用程序中。我在 iframe 中（在richfaces-modalpanel 内）显示 guvnor 编辑器。根据文档，guvnor 公开了一个 javascript 对象以及用于父应用程序通信的回调函数

```
 var guvnorEditorObject = {
    getDRL: function (callbackFunction),
    getBRL: function (callbackFunction),
    registerAfterSaveAndCloseButtonCallbackFunction: function (callbackFunction),
    registerAfterCancelButtonCallbackFunction: function (callbackFunction),
    getAssetsUUIDs: function()
} 
```

现在我的问题是如何在我的 jsf 页面中注册这些回调函数？例如，如果用户单击关闭按钮，我想关闭模式面板窗口。示例代码对我真的很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:05:46.103

我已经设法通过使用 javascript setTimeout 函数解决了这个问题。

根本问题是 guvnorEditorObject 是动态创建的，因此在 iframe 立即加载时不可用。

这是加载 iframe 时调用的代码。

```
 function register() {
        var guvnorEditorObject = window.document.getElementById('myIframe').contentWindow.guvnorEditorObject;
        if(guvnorEditorObject){
            //guvnorEditorObject.getDRL(function(drl){alert('drl: '+drl);})
            //guvnorEditorObject.getBRL(function(brl){alert('brl: '+brl);})
            guvnorEditorObject.registerAfterSaveAndCloseButtonCallbackFunction(function(){guvnorEditorObject.getDRL(function(drl){alert('drl: '+drl);window.close();})});
            guvnorEditorObject.registerAfterCancelButtonCallbackFunction(function(){alert('Cancel button clicked');});              
            //alert(guvnorEditorObject.getAssetsUUIDs());       
        }else{
             setTimeout(register,250);
        }
    } 
```

# asp.net - 链接到 SharePoint 2010 上的“使用 Windows 资源管理器打开”

> ID：13346798
> 
> 赞同：6
> 
> 时间：2012-11-12T15:44:42.550
> 
> 标签：asp.net, listview, sharepoint-2010

我想创建一个按钮，将用户重定向到 SharePoint 2010 中的“资源管理器视图”。问题是：我不知道如何获取原始按钮“使用 Windows 资源管理器打开”的 url。我测试了很多东西都没有成功，比如 Process.Start("explorer.exe","url of documents library")

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-10T10:16:28.437

1.  在您的浏览器中转到 Sharepoint 项目站点，然后单击带有标签的按钮**Open with Explorer**。
2.  在 Windows 资源管理器中，右键单击项目站点的文件夹并选择**Create Shortcut**。
3.  右键单击新的快捷方式并选择**属性**
4.  **在目标**下的选项卡**快捷方式**上，您可以找到所需的 URL。

 **在我的情况下，两个目标快捷方式看起来像这样

> **Internet Explorer：** [https ://COMPANYNAME.sharepoint.com/sites/LIBRARY](https://COMPANYNAME.sharepoint.com/sites/LIBRARY)
> 
> **Windows 资源管理器：** \\COMPANYNAME.sharepoint.com@SSL\DavWWWRoot\sites\LIBRARY

我在*Office 365 Sharepoint 2013*和*Windows 7*机器上。

使用以下 HTML，您可以使用按钮打开此 URL：

```
<input 
    type="button"
    onclick="window.open( 'file:\\\\COMPANYNAME.sharepoint.com@SSL\\DavWWWRoot\\sites\\LIBRARY' )"
    value="Explore"
/> 
```

如果您的 URL 包含任何空格，您需要将它们编码为**%20**，其他编码请参见：[http ://www.w3schools.com/tags/ref_urlencode.asp](http://www.w3schools.com/tags/ref_urlencode.asp)

**更新：**在 Windows 资源管理器中，`\\COMPANYNAME.sharepoint.com@SSL\DavWWWRoot\sites\LIBRARY`需要添加到“快速访问”部分（左上角）。否则解决方案不是持久的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-07T14:56:02.620

您可以使用与 SharePoint 功能区相同的方法：

```
<a onclick="CoreInvoke('NavigateHttpFolder', '/MyDocLibrary', '_blank');">Open with Explorer</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-14T13:21:09.273

CoreInvoke 功能完美运行（感谢 AleNom！）。

我创建了一个函数，可以从您在 SharePoint 网站上的任何位置动态打开资源管理器。我从放在工具栏（母版页）中的自定义按钮调用它。

```
function openExplorer()
{

if(getQueryString("RootFolder")!="")
{
    var strURL = getQueryString("RootFolder")
}
else
{
    var strURL = top.location.href.replace("http://[servername]","")
    var intLastSlash = strURL.lastIndexOf("/")
    strURL = strURL.substring(0,intLastSlash)
}

if (strURL.lastIndexOf("/Forms") >-1)
{
    strURL = strURL.substring(0,strURL.lastIndexOf("/Forms"))   
}

CoreInvoke('NavigateHttpFolder', strURL, '_blank')

}

function getQueryString(name) 
{
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T17:55:55.293

首先，您需要翻译库网址：

> **从** `http://sharepoint/library`
> 
> **至** `\\sharepoint\library`

然后您可以使用带有 javascript 的 HTML 输入控件在资源管理器窗口中打开库：

```
<input type="button" onclick="window.open('file:\\\\sharepoint\\library')" value="Explore"/> 
```

直接从 Web 浏览器窗口调用本地可执行文件存在安全问题。**

# asp.net - 格式化量

> ID：13346799
> 
> 赞同：1
> 
> 时间：2012-11-12T15:44:57.997
> 
> 标签：asp.net, vb.net

我正在从 Web 服务获取数据。我使用 ASP.NET 和 VB.NET 作为后面的代码。

我试过这样：

```
Label_amount.Text = Trim(arData(11)) 
```

我得到的输出为*0020000*，而我应该得到*200*，即抑制所有前导零并删除最后两个零。（或设为 200.00）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:51:05.063

您可以使用带有 ToString 方法的格式化程序，如[MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)中所述。我认为 N0 会为此工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:20:46.007

正如其他人所说，如果它显示为“0020000”，那一定意味着它`arData(11)`是一个`String`. 如果它应该始终是数值，最好将其解析为数值数据类型，例如`Integer`or `Decimal`。一旦您将值存储为数字类型，您就可以轻松地对其进行操作（例如除以 100）并根据需要对其进行格式化。例如：

```
Dim value As Decimal = Decimal.Parse(arData(11))
value = Value / 100
Label_amount.Text = value.ToString("N2") 
```

请记住，如果该方法不包含有效的数值，则该`Parse`方法将引发异常，因此您可能希望使用 try/catch 对其进行包装，或者根据您的需要使用该方法。 将返回“200.00”， 将返回“200”，并将返回“$200.00”（在美国）。`arData(11)``TryParse``ToString("N2")``ToString()``ToString("C")`

# asp.net-mvc-4 - 在 ASP.Net MVC 4 和 Autofac 中注册全局过滤器

> ID：13346801
> 
> 赞同：31
> 
> 时间：2012-11-12T15:44:59.413
> 
> 标签：asp.net-mvc-4, autofac, action-filter, asp.net-mvc-filters

我有一个像这样的过滤器：

```
public class CustomFilterAttribute : ActionFilterAttribute, IAuthorizationFilter
{
    public MyPropery Property { get; set; }
    ....
} 
```

我需要为我的项目中的每个操作运行它

我试图在 GlobalFilters 中注册它，但我的属性没有被注入

我试过[这个解决方案](https://stackoverflow.com/a/10108428/1026105)来注册我的过滤器，但它没有被调用

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-02-03T19:17:02.437

有一种在 AutoFac 中注册 MVC 全局过滤器的新方法。首先，从您的过滤器注册中**删除**`RegisterGlobalFilters`，因为我们将使用 Autofac 处理将它们添加到我们的控制器/操作而不是 MVC。

然后，按如下方式注册您的容器：

```
var builder = new ContainerBuilder();
builder.RegisterControllers(Assembly.GetExecutingAssembly());

builder.RegisterType<MyProperty>().As<IProperty>();

builder.Register(c => new CustomFilterAttribute(c.Resolve<IProperty>()))
                .AsActionFilterFor<Controller>().InstancePerHttpRequest();

builder.RegisterFilterProvider();

IContainer container = builder.Build();

DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

请注意，通过将`Controller`类传递到扩展`AsActionFilterFor()`中，我们告诉 AutoFac 将此过滤器应用于从该类派生的所有`Controller`类（在 MVC 中，所有类都是控制器）。由于我们在`AsActionFilterFor()`没有任何参数的情况下调用，我们还指定我们希望将过滤器应用于指定控制器中的所有操作。如果要将过滤器应用于选择控制器和操作，可以使用 lambda 表达式，如下所示：

```
builder.Register(c => new CustomFilterAttribute(c.Resolve<IProperty>()))
    .AsActionFilterFor<HomeController>(c => c.Index())
    .InstancePerHttpRequest(); 
```

如果您的操作带有参数，请使用`default`关键字指定：

```
builder.Register(c => new CustomFilterAttribute(c.Resolve<IProperty>()))
    .AsActionFilterFor<HomeController>(c => c.Detail(default(int)))
    .InstancePerRequest(); 
```

请注意，您必须根据您注册的过滤器类型使用不同的扩展方法，以下是支持的过滤器类型：

*   AsActionFilterFor
*   AsAuthorizationFilterFor
*   AsExceptionFilterFor
*   AsResultFilterFor

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-12T17:07:01.070

您现在应该使用 Pete 的解决方案来执行此操作。感谢他提供更新的解决方案。

我终于做到了，这里是如何做到的：

首先使用具有所有依赖项的构造函数创建您的属性

```
public class CustomFilterAttribute : ActionFilterAttribute, IAuthorizationFilter
{
    private IProperty _property;

    public CustomFilterAttribute(IProperty repository)
    {
        _property = property;
    }
    ....
 } 
```

在 autofac 中注册你需要的一切

```
var builder = new ContainerBuilder();
builder.RegisterControllers(Assembly.GetExecutingAssembly());

builder.RegisterType<MyProperty>().As<IProperty>();
builder.RegisterType<CustomFilterAttribute>().SingleInstance();

builder.RegisterFilterProvider();

IContainer container = builder.Build();

DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

像这样注册您的全局过滤器

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(DependencyResolver.Current.GetService<CustomFilterAttribute>());
} 
```

确保在 global.asax 中先注册 Autofac，然后再注册全局过滤器。

现在，您不再需要属性注入了，构造函数注入可以正常工作，这是一件好事！

# java - Java中的Swing框架有人脸识别和语音识别

> ID：13346802
> 
> 赞同：1
> 
> 时间：2012-11-12T15:45:00.740
> 
> 标签：java, swing, voice-recognition, face-recognition

Java中的Swing框架是否有人脸识别和语音识别选项/能力/系统？

（我是 Java 和 Swing 的新生婴儿此外，我在网上搜索过，但没有发现任何有用的东西。请建议我或显示指南/资源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:55:36.020

Swing 是一个用于丰富 GUI 编程的库。语音识别和GUI没有关系。

了解这一点，我用谷歌搜索了“语音识别库 java”，这是第一个结果：http: [//voce.sourceforge.net/](http://voce.sourceforge.net/) 听起来不错。它是一个开源的跨平台语音识别库，公开了 C++ 和 Java API。

同样是关于搜索“人脸识别库 java”。

祝你好运。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T15:53:17.907

Swing 是一个 GUI API/工具包。用于构建用户界面。

识别面孔或声音与构建用户界面无关。也许这就是您的搜索没有找到任何东西的原因。

如果你在谷歌上搜索“Java Face Recognition”，你会得到很多结果。例如
[Java/Processing 中的面部识别](https://stackoverflow.com/questions/9228732/facial-recognition-in-java-processing)

或“Java 语音识别”
[http://cmusphinx.sourceforge.net/](http://cmusphinx.sourceforge.net/)

# java - 在 Java 中运行 Quercus PHP

> ID：13346804
> 
> 赞同：2
> 
> 时间：2012-11-12T15:45:15.617
> 
> 标签：java, quercus

我正在尝试从我的 Java 应用程序运行一些 PHP 片段。

我见过这个问题： [使用 Quercus 从 Java 调用 PHP](https://stackoverflow.com/questions/5298123/php-call-from-java-using-quercus)

这简单地表明：

```
import com.caucho.quercus.QuercusEngine;

QuercusEngine engine = new QuercusEngine();
engine.setOutputStream(System.out);
engine.executeFile("src/test.php"); 
```

我已经看到[http://wiki.caucho.com/Quercus%3a_Command_Line_Interface_%28CLI%29](http://wiki.caucho.com/Quercus%3a_Command_Line_Interface_%28CLI%29)这表明：

```
QuercusEngine engine = new QuercusEngine();
engine.setIni("foo", "bar");
engine.execute("<?php var_dump(ini_get('foo')); ?>"); 
```

但是在这样做时，我得到：

```
Exception in thread "main" com.caucho.quercus.QuercusErrorException: eval::1: Fatal Error: 'var_dump' is an unknown function.
        at com.caucho.quercus.env.Env.error(Env.java:6559)
        at com.caucho.quercus.env.Env.error(Env.java:6445)
        at com.caucho.quercus.env.Env.error(Env.java:6109)
        at com.caucho.quercus.expr.CallExpr.evalImpl(CallExpr.java:198)
        at com.caucho.quercus.expr.CallExpr.eval(CallExpr.java:151)
        at com.caucho.quercus.expr.Expr.evalTop(Expr.java:523)
        at com.caucho.quercus.statement.ExprStatement.execute(ExprStatement.java:67)
        at com.caucho.quercus.program.QuercusProgram.execute(QuercusProgram.java:413)
        at com.caucho.quercus.QuercusEngine.execute(QuercusEngine.java:139)
        at com.caucho.quercus.QuercusEngine.execute(QuercusEngine.java:100) 
```

对于任何函数，我都会得到相同的结果——strlen、strcmp、phpinfo 等。

如[http://quercus.caucho.com/](http://quercus.caucho.com/)所述...

> Quercus .war 文件可以在Glassfish 等Java 应用服务器上运行，即它可以在Resin 之外运行。这个 .war 文件包括 Quercus 解释器和 PHP 库。

我已经从该页面下载了战争文件（[http://caucho.com/download/quercus-4.0.25.war](http://caucho.com/download/quercus-4.0.25.war)）

我正在跑步

```
$ javac -cp 'WEB-INF/lib/resin.jar;.' TestQuercus.java
$ java -cp 'WEB-INF/lib/resin.jar;.' TestQuercus 
```

完整的文件是

```
import com.caucho.quercus.QuercusEngine;

public class TestQuercus {

    public static void main(String[] args) throws Exception {
    QuercusEngine engine = new QuercusEngine();
    engine.setIni("foo", "bar");
    engine.execute("<?php var_dump(ini_get('foo')); ?>");
    }

} 
```

我*能*做到

```
java -cp 'WEB-INF/lib/resin.jar' com.caucho.quercus.CliQuercus foo.php 
```

其中 foo.php 包括`<?php phpinfo; ?>`

那么我怎样才能从那里到达一个正常工作的 QuercusEngine 呢？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:51:10.933

工作如下。

```
import javax.script.ScriptEngine;
import com.caucho.quercus.script.QuercusScriptEngineFactory;

QuercusScriptEngineFactory factory = new QuercusScriptEngineFactory();
ScriptEngine engine = factory.getScriptEngine();

String code = "<?php $foo = strlen('abc'); print $foo; return 'yikes'; ?>";
Object o = engine.eval(code);
System.out.println(o); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:31:47.260

这是一个错误。我刚刚为 4.0.33 修复了它，它应该很快就会发布。如果您愿意，您可以从我们的公共 svn 存储库中自己构建 Quercus：

```
svn checkout svn://svn.caucho.com/home/svn/svnroot/resin/trunk resin
cd resin
ant 
```

罐子将是树脂/lib/resin-kernel.jar 和树脂/lib/quercus.jar。

有关错误参考，请参阅[http://bugs.caucho.com/view.php?id=5270](http://bugs.caucho.com/view.php?id=5270)。

# ios - Flurry 依赖分析警告

> ID：13346805
> 
> 赞同：2
> 
> 时间：2012-11-12T15:45:19.853
> 
> 标签：ios, build, flurry

我正在尝试将flurry SDK添加到我的项目中，但我有这个警告：没有规则来处理文件'$（PROJECT_DIR）/Flurry iPad SDK v4.0.6/Flurry iOS API Documentation/assets/jquery.js'类型架构 armv7 的 sourcecode.javascript

感谢您的帮助，

亚历山大

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:47:31.130

从目标的 Build Phases 的 Compile Sources 部分中删除 .js 文件，并将其放入 Copy Bundle Resources 阶段。

# php - array_search 没有按预期工作

> ID：13346806
> 
> 赞同：1
> 
> 时间：2012-11-12T15:45:19.947
> 
> 标签：php, arrays, type-conversion

我有以下数组：

```
$array = array (
    'a' => 'A',
    'b' => 'B',
    'c' => 'C'
); 
```

我想了解这种行为：

```
// true, normal behaviour, there is a 'A' value in my array
echo array_search('A', $array) === 'a';

// true, normal behaviour, there is no 1 value in my array
echo array_search(1, $array) === false;

// true ???? there is no 0 as value in my array
echo array_search(0, $array) === 'a'; 
```

为什么`array_search(0, $array)`返回我的数组的第一个键？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:47:41.687

来自 PHP 文档

> 如果第三个参数**strict**设置为**TRUE**，则 array_search() 函数将在大海捞针中搜索**相同的元素**。这意味着它还将检查大海捞针的类型，并且对象必须是相同的实例。

大多数人不知道默认`array_search`使用`==`如果你想搜索相同的元素，你需要添加一个严格的参数......我是什么意思？

如果你使用

```
array_search(0, $array) //it would use == and 0 == 'A' 
```

你需要的是

```
array_search(0, $array,true) // it would compare with === 0 !== 'A'
                         ^------------ Strict 
```

# asp.net - 公式在计算列中不起作用

> ID：13346812
> 
> 赞同：0
> 
> 时间：2012-11-12T15:45:41.257
> 
> 标签：asp.net, sql-server-2008

我正在使用 SQL Server 管理工作室。我有一个名为薪水的列。我想要另一个基于薪水的计算列：`(salary *20%+salary)/85`但我没有得到结果。

我尝试将公式放在属性选项卡下的计算列规范选项卡中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:50:08.623

这是一个无效的 SQL 计算。

不要乘以百分比，而是除以 100 并乘以百分比值：

```
(((salary/100)*20)+salary)/85 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T16:02:19.840

您应该能够使用以下方法来计算该值：

```
(salary * 1.2) / 85 
```

查看[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/6079)

# locking - 如何启用乐观锁定jboss 7

> ID：13346821
> 
> 赞同：0
> 
> 时间：2012-11-12T15:46:23.753
> 
> 标签：locking, ejb-3.0, jboss7.x

基本上问题就是[这个](https://community.jboss.org/message/775811)。似乎在 JBoss 7 中，EJB 默认启用了悲观锁定。我们能够在standalone.xml 中关闭它（这解决了我们遇到的问题并确认这是原因），但是我们需要通过我们的 EJB 中的配置（首选）或通过 JBoss 的 CLI 以编程方式完成它. 我们怎么能做到这一点？

关闭 EJB 中的锁定也是一种选择（因为我们无论如何都在数据库中处理它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:11:18.630

我们想通了。正确的命令行设置是：

`default-entity-bean-optimistic-locking`

它需要设置为真。

# c# - 在 mvc 中引用 wcf 类进行数据注释验证

> ID：13346822
> 
> 赞同：0
> 
> 时间：2012-11-12T15:46:31.707
> 
> 标签：c#, wcf, asp.net-mvc-4, partial-classes

我的 WCF 项目中有一个带有数据成员的数据协定类，我想在我的 MVC 项目中引用它们，这样我就可以对它们应用数据注释验证

我已经可以在我的 MVC 项目中使用类对象了，唯一的问题是验证。

在我的 WCF 项目中，我的班级有一个名为`PeopleOnTourCount`：

```
 namespace VBSClient.BookingServiceClient 
    {
        [DataContract]
        [MetadataType(typeof(BookingTypeMetaData))]
        public partial class BookingType 
        {
            public BookingType() { }
        }

        public class BookingTypeMetaData {
            [Required]
            [Display(Name="People Count")]
            [DataMember]
            public int PeopleOnTourCount { get; set; }
        }
    } 
```

我无法访问构造函数中的任何原始属性，并且注释也没有绑定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:13:22.597

而不是使用部分类，而是从对象继承。

然后，您可以在 MVC 项目中应用数据注释。

```
[MetadataType(typeof(BookingTypeMetaData))]
public class Test : BookingType {

    public Test() {

    }
}

public class BookingTypeMetaData {
    [Required]
    [Display(Name = "People Count")]
    public int PeopleOnTourCount { get; set; }
} 
```

这就是我将如何处理它，除非给出更好的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:53:58.727

您不能将来自两个单独程序集的两个 Partial 类绑定到一个类。
部分类应该在一个程序集中。

# android - ViewPager 检测用户何时尝试滑出边界

> ID：13346824
> 
> 赞同：34
> 
> 时间：2012-11-12T15:46:41.720
> 
> 标签：android

我正在使用由 6 个页面组成的 ViewPager 来显示一些数据。我希望能够在用户位于位置 0 并尝试向右滑动（向后）或在位置 5 并尝试向左滑动（向前）时调用方法，即使这些页面不存在方向。有什么办法可以听这些场景吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-12T15:59:36.717

扩展 ViewPager 并`onInterceptTouchEvent()`像这样覆盖：

```
public class CustomViewPager extends ViewPager {

    float mStartDragX;
    OnSwipeOutListener mListener;

    public void setOnSwipeOutListener(OnSwipeOutListener listener) {
        mListener = listener;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        float x = ev.getX();
        switch (ev.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mStartDragX = x;
            break;
        case MotionEvent.ACTION_MOVE:
            if (mStartDragX < x && getCurrentItem() == 0) {
                mListener.onSwipeOutAtStart();
            } else if (mStartDragX > x && getCurrentItem() == getAdapter().getCount() - 1) {
                mListener.onSwipeOutAtEnd();
            }
            break;
        }
        return super.onInterceptTouchEvent(ev);
    }

    public interface OnSwipeOutListener {
        public void onSwipeOutAtStart();
        public void onSwipeOutAtEnd();
    }

} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-06-07T20:52:05.967

Flávio Faria 的回答对我不起作用。我在 onInterceptTouchEvent() 中得到的唯一事件是 ACTION_DOWN 事件。所以我重写了 onTouchEvent() 方法来让它工作。

这是代码。请注意，我在侦听器中只有 onSwipeOutAtEnd() 。您可以添加代码以支持在第一个 vier 上向左滑动。

```
public class CustomViewPager extends ViewPager {

float mStartDragX;
OnSwipeOutListener mListener;

public void setOnSwipeOutListener(OnSwipeOutListener listener) {
    mListener = listener;
}

@Override
public boolean onTouchEvent(MotionEvent ev){
    if(getCurrentItem()==getAdapter().getCount()-1){
        final int action = ev.getAction();
        float x = ev.getX();
        switch(action & MotionEventCompat.ACTION_MASK){
        case MotionEvent.ACTION_DOWN:
            mStartDragX = x;
            break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_UP:
            if (x<mStartDragX){
                mListener.onSwipeOutAtEnd();
            }else{
                mStartDragX = 0;
            }
            break;
        }
    }else{
        mStartDragX=0;
    }
    return super.onTouchEvent(ev);
}    
public interface OnSwipeOutListener {
    public void onSwipeOutAtEnd();
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-06-12T22:24:48.850

非常感谢@Flavio，虽然我不得不对他的代码进行一些更改，因为回调方法被触发了两次，我还添加了代码来检查是否有任何注册的监听器，以避免在没有注册监听器时应用程序崩溃。这是我用来使它工作的代码，包括 onSwipeOutAtStart 和 onSwipeOutAtEnd：

```
public class CustomViewPager extends android.support.v4.view.ViewPager {

    float mStartDragX;
    OnSwipeOutListener mOnSwipeOutListener;

    public CustomViewPager(Context context) {
        super(context);
    }

    public CustomViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setOnSwipeOutListener(OnSwipeOutListener listener) {
        mOnSwipeOutListener = listener;
    }

    private void onSwipeOutAtStart() {
        if (mOnSwipeOutListener!=null) {
            mOnSwipeOutListener.onSwipeOutAtStart();
        }
    }

    private void onSwipeOutAtEnd() {
        if (mOnSwipeOutListener!=null) {
            mOnSwipeOutListener.onSwipeOutAtEnd();
        }
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch(ev.getAction() & MotionEventCompat.ACTION_MASK){
            case MotionEvent.ACTION_DOWN:
                mStartDragX = ev.getX();
                break;
        }
        return super.onInterceptTouchEvent(ev);
    }

    @Override
    public boolean onTouchEvent(MotionEvent ev){

        if(getCurrentItem()==0 || getCurrentItem()==getAdapter().getCount()-1){
            final int action = ev.getAction();
            float x = ev.getX();
            switch(action & MotionEventCompat.ACTION_MASK){
                case MotionEvent.ACTION_MOVE:
                    break;
                case MotionEvent.ACTION_UP:
                    if (getCurrentItem()==0 && x>mStartDragX) {
                        onSwipeOutAtStart();
                    }
                    if (getCurrentItem()==getAdapter().getCount()-1 && x<mStartDragX){
                        onSwipeOutAtEnd();
                    }
                    break;
            }
        }else{
            mStartDragX=0;
        }
        return super.onTouchEvent(ev);

    }

    public interface OnSwipeOutListener {
        void onSwipeOutAtStart();
        void onSwipeOutAtEnd();
    }
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-06-04T10:18:32.993

在 ViewPager 上设置[OnPageChangeListener怎么样？](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOnPageChangeListener(android.support.v4.view.ViewPager.OnPageChangeListener))然后您可以修改导航箭头或 onPageScrolled 中的任何内容。

```
viewPager.setOnPageChangeListener(new OnPageChangeListener() {
    @Override
    public void onPageSelected(int position) {
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
            updateNavigationArrows();
    }

    @Override
    public void onPageScrollStateChanged(int state) {
    }
}); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-09-04T03:40:24.920

我想知道它对其他人如何起作用，它对我不起作用。

`onInterceptTouchEvent()`只需要`ACTION_DOWN`事件。虽然`onTouchEvent()`一次只接受一个事件，但`ACTION_DOWN`其他事件`ACTION_UP`。

我必须覆盖两者`onInterceptTouchEvent()`并`onTouchEvent()`使其正常工作。的抓取初始点，并`ACTION_DOWN`抓取最终点。我比较了它来检测滑动方向。`onInterceptTouchEvent``X``OnTouchEvent``X2`

获取触摸的初始 X 值：

```
float x1 = 0;
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch(ev.getAction() & MotionEventCompat.ACTION_MASK){
        case MotionEvent.ACTION_DOWN:
            x1 = ev.getX();
            break;
        }
        return super.onInterceptTouchEvent(ev);
    } 
```

从 tjlian616 的代码中，`onTouchEvent()`监听`ACTION_UP`并获取它的最后一个`X`值。虽然我已将当前项目的值设置为 0 以在启动侦听器时滑出。比较它并添加激发了听众。

```
 @Override
 public boolean onTouchEvent(MotionEvent ev){
        if(getCurrentItem()==0){
            final int action = ev.getAction();
            switch(action & MotionEventCompat.ACTION_MASK){
            case MotionEvent.ACTION_MOVE:
                break;
            case MotionEvent.ACTION_UP:
                mStartDragX = ev.getX();
                if (x1<mStartDragX){
                    Log.i("TOUCH: ", "ACTION UP " + x1 + " : " + mStartDragX );
                    mListener.onSwipeOutAtStart();
                }else{
                    Log.i("TOUCH ELSE : ", "ACTION UP " + x1 + " : " + mStartDragX );
                    mStartDragX = 0;
                }
                break;
            }
        }else{
            mStartDragX=0;
        }
        return super.onTouchEvent(ev);
    } 
```

# perl - SLURM 预留输出解析

> ID：13346826
> 
> 赞同：0
> 
> 时间：2012-11-12T15:46:50.127
> 
> 标签：perl, sed, awk

我正在寻找从 scontrol 的输出中解析“持续时间”的帮助

# 1

```
scontrol show res root_89
ReservationName=root_89 StartTime=2012-11-07T14:22:21 EndTime=2012-11-08T16:22:21 Duration=02:00:00
   Nodes=host NodeCnt=1 Features=(null) PartitionName=(null) Flags=SPEC_NODES
   Users=root Accounts=(null) Licenses=(null) State=ACTIVE 
```

# 2

```
scontrol show res root_95
ReservationName=root_95 StartTime=2013-02-06T16:00:00 EndTime=2013-02-10T06:40:00 Duration=3-14:40:00
    Nodes=host NodeCnt=1 Features=(null) PartitionName=(null) Flags=SPEC_NODES
    Users=root Accounts=(null) Licenses=(null) State=INACTIVE 
```

如您所见，预订是否真的很长持续时间输出混乱我正在寻找格式'xxHH：mm：ss'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:31:20.277

在 Perl 中非常简单：

```
perl -pe's/Duration=\K(\d+)-(\d+)/$1*24+$2/e' myfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:25:13.543

这条线应该适用于您的情况：

```
grep -Po "(?<=Duration=)[0-9-:]*" <yourFile>|awk -F'-' 'NF==2{split($2,t,":");t[1]+=($1*24);print t[1]":"t[2]":"t[3];next;}1' 
```

请注意，我有点懒，所以我使用 grep 过滤掉了持续时间值。它可以用awk来完成，以保存一个进程。如果性能不是您的问题，您可以将 grep 保留在那里。

**测试**

```
kent$  cat example
scontrol show res root_89
ReservationName=root_89 StartTime=2012-11-07T14:22:21 EndTime=2012-11-08T16:22:21 Duration=02:00:00
   Nodes=host NodeCnt=1 Features=(null) PartitionName=(null) Flags=SPEC_NODES
   Users=root Accounts=(null) Licenses=(null) State=ACTIVE

scontrol show res root_95
ReservationName=root_95 StartTime=2013-02-06T16:00:00 EndTime=2013-02-10T06:40:00 Duration=3-14:40:00
    Nodes=host NodeCnt=1 Features=(null) PartitionName=(null) Flags=SPEC_NODES
    Users=root Accounts=(null) Licenses=(null) State=INACTIVE

kent$  grep -Po "(?<=Duration=)[0-9-:]*" example|awk -F'-' 'NF==2{split($2,t,":");t[1]+=($1*24);print t[1]":"t[2]":"t[3];next;}1'
02:00:00
86:40:00 
```

# youtube-api - 同时播放多个 youtube 嵌入视频（“实际”视频，而不仅仅是开始缓冲）

> ID：13346827
> 
> 赞同：3
> 
> 时间：2012-11-12T15:46:50.313
> 
> 标签：youtube-api

我想知道是否可以同时启动多个嵌入 youtube 视频（在同一页面上）（考虑到每个视频的缓冲不同）我知道这可能听起来很傻而且目的这是为了同步所有视频的音轨。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:24:45.370

我认为你可以用一些技巧来同步开始，但是你不能确保复制是同时的，因为它可能会改变每个视频的加载速度

此页面包含有关如何使用和同步播放器事件的很好的讨论：

[http://eduniverse.org/how-sync-web-page-events-embedded-youtube-videos](http://eduniverse.org/how-sync-web-page-events-embedded-youtube-videos)

# ruby-on-rails - 如何在 Rails 3.2.8 中获取渲染模板的名称

> ID：13346833
> 
> 赞同：0
> 
> 时间：2012-11-12T15:47:19.003
> 
> 标签：ruby-on-rails

如何在 rails 3.2.8 中获取渲染模板的名称？

笔记：

1) 如果动作以`:template`or呈现，这必须有效`:action`

2) 以下内容在 3.2.8 中不起作用： `<%= self._template.identifier %>`

3）当从布局中调用时，这必须有效 - 给出正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T17:21:45.777

我正在使用 slim，但我认为这在 erb 中会以同样的方式工作......

```
= __FILE__ 
```

# cucumber - 如何在黄瓜 js 中从苏打水获取访问器

> ID：13346834
> 
> 赞同：1
> 
> 时间：2012-11-12T15:47:23.607
> 
> 标签：cucumber

我是黄瓜 js 的新手，正在尝试编写一个测试场景，它将表中的实际行数与已知计数进行比较。

我正在使用 getXpathCount 函数，但想知道如何实际读取方法调用的响应，这是我已经拥有的：

```
determineNumRows: function (callback) {
var self = this;
self.browser
    .chain
    .getXpathCount("//div[1]/div/table[2]/tbody/tr")
    .setTimeout(1000)
    .end(function (err) {
        if (err) {
            callback.fail(err);
        } else {
            callback();
        }
    });
} 
```

从阅读 getXpathCount 函数来看，这应该返回节点数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:49:55.960

我认为这应该有效（未经测试）：

```
determineNumRows: function (callback) {
var self = this;
var trCount = 0;
self.browser
    .chain
    .getXpathCount("//div[1]/div/table[2]/tbody/tr", function (count) { 
        trCount = count; 
    })
    .setTimeout(1000)
    .end(function (err) {
        if (err) {
            callback.fail(err);
        } else {
            callback();
        }
    });
} 
```

# oracle-apex - APEX 4.1 - 基于右面板填充数据库

> ID：13346841
> 
> 赞同：2
> 
> 时间：2012-11-12T15:48:09.147
> 
> 标签：oracle-apex

APEX 版本：4.1.1.00.23

我在页面上有一个穿梭，当我将项目从左侧移动到右侧面板时，我想用选择列表中的内容更新数据库中的表。

在这种情况下，当我从下拉列表中选择“Analyst_1”时，它将根据 javascript 填充右侧。

![在此处输入图像描述](../Images/9f2c4fc4da7f8015474bafa21a13fb25.png)

```
DB table (before clicking button):
Field                          Analyst
Co-Borrower Credit Score       Analyst_1
Appraised Value                (null)
Appraisal Identifier           (null) 
```

然后，在我将一些项目从左侧面板移动到右侧面板并单击“应用更改”后，我希望将“Analyst_1”放入数据库的分析师字段中，用于右侧面板上的每个字段名称。

![在此处输入图像描述](../Images/1dd6e1ca818e197932ff763c978154a3.png)

```
DB table (after clicking button):
Field                          Analyst
Co-Borrower Credit Score       Analyst_1
Appraised Value                Analyst_1
Appraisal Identifier           Analyst_1 
```

这是单击“应用更改”按钮时的代码。

更新 Data_Table 设置 ANALYST_NAME = :P51_ANALYST 其中 FIELD = :P51_SHUTTLE_RIGHT;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:16:42.930

Shuttle 值以冒号分隔的字符串形式提交给会话状态。例如`'VALUE1:VALUE2:VALUE4:VALUE7'`. 显然这是行不通的。当然，您可以通过多种方式处理此问题。一种是在`IN`子句中使用字符串并将其拆分为几个元素

```
UPDATE data_table 
   SET analyst_name = :P51_ANALYST 
 WHERE field IN (SELECT a_field
                   FROM 
                     xmltable('/root/e/text()' passing xmltype('<root><e>'
                     || REPLACE(:P51_SHUTTLE_RIGHT,':','</e><e>')
                     || '</e></root>') columns a_field VARCHAR2(50) path '/'); 
```

这只是一种风格，还有许多其他示例和方法，例如使用 regexp 或 connect by。选择你觉得舒服的。

另一种方法是使用 PLSQL 代码遍历字符串中的所有值。您可以为此使用[APEX_UTIL.STRING_TO_TABLE](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/apex_util.htm#CHDFEEJD)。同样，您喜欢的任何口味（例如`INSTR`+ `SUBSTR`）。

```
DECLARE
    l_vc_arr2    APEX_APPLICATION_GLOBAL.VC_ARR2;
BEGIN
    l_vc_arr2 := APEX_UTIL.STRING_TO_TABLE('One:Two:Three');
    FOR z IN 1..l_vc_arr2.count LOOP
        htp.p(l_vc_arr2(z));
    END LOOP;
END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:51:01.893

我使用以下代码让数据库**仅**根据右侧面板中的项目来更新分析师（选择列表）以使其工作。

**注意：**这只更新了基于右侧面板的数据库。如果您将某些内容从右侧面板移动到左侧面板，页面提交后它仍会出现在右侧面板上。

提交后创建页面进程（PL/SQL 匿名块）：

```
declare
    tab apex_application_global.vc_arr2;
    l_count number;
begin
    tab := apex_util.string_to_table (:P51_SHUTTLE);
    for i in 1..tab.count 
    loop
    select count(*) into l_count from DQ_MANUAL_EDIT WHERE DQ_ATTRIBUTE = tab(i);
     if l_count > 0 then 
       UPDATE DQ_MANUAL_EDIT
       SET DQ_ANALYST = :P51_DQ_ANALYST
       WHERE DQ_ATTRIBUTE = tab(i);
    end if;
    end loop;
end; 
```

# javascript - 在Javascript中验证每个字段的几个条件

> ID：13346844
> 
> 赞同：0
> 
> 时间：2012-11-12T15:48:16.843
> 
> 标签：javascript, forms, validation

我们有几个字段需要在 Javascript 中进行验证。每个字段都有几个条件需要验证。例如，字段 x 为必填项，为整数，只能为 1、6 或 9。

**一些想法：**

*   为具有强制属性、数据类型和有效值数组的每个字段创建一个对象。创建函数以根据输入验证类的所有方面。问题是并非所有验证都是相同的，并且需要为每个输入字段输入数据。

*   创建内部存储验证信息的并行数组，可能使用二维数组作为有效值。遍历 ID 与数组索引匹配的所有表单数据，然后运行通用代码以根据数组值进行验证。

*   用 IF 语句以困难但简单的方式遍历每个字段 =(

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:52:23.150

我强烈推荐[jQuery Validate](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

它是一个 jQuery 插件，可以完成您列出的所有（以及更多）工作。但是，它确实依赖于 jQuery。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-12T15:55:46.323

这是一个 jQuery 库，它解决了每个字段的多个验证条件[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)
如果你没有找到正确的验证规则，你可以手动声明它们

# css - 浏览器 SCSS 处理器？

> ID：13346846
> 
> 赞同：3
> 
> 时间：2012-11-12T15:48:18.267
> 
> 标签：css, less, sass

我有一个无法安装任何东西的开发（说来话长）。我只需要使用纯 HTML/浏览器 JS 进行开发，并且我想使用 CSS 预处理器。我喜欢 SCSS (SASS) 但为了使用它，我必须在我的机器上安装 ruby​​，执行它的程序并监听文件系统......

是否只有一个浏览器 JS 文件可以包含在我的页面中并加载未处理的 SCSS？

我见过[is-there-a-sass-js-something-like-less-js](https://stackoverflow.com/questions/4436643/is-there-a-sass-js-something-like-less-js)但答案集中在生产状态：

1.  当您可以为所有用户编写一次样式表时，为什么还要让所有用户编译您的样式表。
2.  如果禁用 javascript，您的网站会是什么样子。
3.  如果您决定在将来更改为服务器端实现，则必须相应地更改所有模板。

但我认为这是一个不同的问题，因为我不希望它到生产服务器，我希望它使用 SCSS 开发，当页面完成后，我可以连接到外部机器，处理 SCSS 并将其上传到生产服务器。但是我不能对我在开发过程中所做的每一个改变都这样做！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:16:33.573

> 是否只有一个浏览器 JS 文件可以包含在我的页面中并加载未处理的 SCSS？

我不这么认为。我已经尝试了几乎所有的 CSS 预处理器，我知道在浏览器中工作的唯一一个是 LESS。

有几个 Win/Mac/Air/Node 应用程序可以在开发时预处理不同的标准：

*   [http://winless.org/](http://winless.org/)
*   [http://crunchapp.net/](http://crunchapp.net/)
*   [http://compass.handlino.com/](http://compass.handlino.com/)
*   [http://wearekiss.com/simpless](http://wearekiss.com/simpless)
*   [http://drzaus.com/plugins/sassifier-followup-make-sass-compiler-its-own-plugin](http://drzaus.com/plugins/sassifier-followup-make-sass-compiler-its-own-plugin)

# c# - ASP.NET c#中的表单在回发时清除字段的值

> ID：13346848
> 
> 赞同：1
> 
> 时间：2012-11-12T15:48:42.817
> 
> 标签：c#, asp.net

因此，我采用了现有的联系表格（有效）并将其插入到一个新项目中，现在在提交时，字段值在回发期间被清除。在 Page_Load 期间没有初始化类型的东西，它们将被重置，并且页面上也没有像 UpdatePanel 这样的控件。

在回发期间以及在不同页面上清除下拉列表控件的选定索引时，我遇到了类似的问题。我很好奇是否有人因为某种设置等而遇到过类似的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:51:16.263

如果您只是将页面及其背后的代码复制到新项目中，那么问题很可能是新页面/代码背后的名称空间不再匹配。因此，当回发发生时，它实际上根本不会加载代码隐藏文件。（易于测试，因为在 page_load 方法中不会遇到断点。）

“简单”修复是删除页面，使用标准方式在项目中添加新页面。然后复制/粘贴代码，确保不要覆盖命名空间部分。

“复杂”的修复是查看 .aspx 页面、代码隐藏和设计器文件上的命名空间部分，并手动修复它们以与现有项目的命名空间一起使用，以确保它们都匹配。

**要检查的主要区域包括：**
.aspx 文件的第一行。特别是里面的部分`Inherits="..."`和`CodeBehind="..."`

`namespace`文件后面的部分代码应与该部分的第一部分匹配`Inherits`。本质上继承将包括类名。设计师也一样。

# iphone - UIImagePickerController 获取 UIImage 及其覆盖

> ID：13346855
> 
> 赞同：0
> 
> 时间：2012-11-12T15:49:00.137
> 
> 标签：iphone, ios

请帮忙。

似乎没有人对以下问题有一个成功的工作答案：

我使用 UIImagePickerController 从 iPhone 相机获取图像。拍摄图像时存在叠加层。叠加层只是一个带有各种手势的子类 UIImageView。

当我拍摄图像时，如何将叠加层精确地添加到图像在设备屏幕上的位置？

非常感谢任何帮助，

磅

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:10:43.673

我正在远离xcode写这个，所以它可能需要调整......

创建一个具有 UIImage 属性、图片和叠加层的 UIView 类，并将其称为 compositorView。从 UIImagePickerController 委托中的 didFinishPickingMediaWithInfo: 方法，将 compositorView 的图片属性设置为您刚刚拍摄的照片，并将叠加属性设置为您正在使用的任何图像。然后向 compositorView 询问它的composedImage，应该是它......

（你需要 QuartzCore 框架）

```
@synthesize picture = _picture;
@synthesize overlay = _overlay;

-(void)drawRect:(CGRect)rect
{

    CGFloat width = self.frame.size.width;
    CGFloat height = self.frame.size.height;
    CGRect frame = CGRectMake(0, 0, width, height);

    [_picture drawInRect:frame];
    [_overlay drawInRect:frame];

}

-(UIImage *)composedImage
{
    CGSize pageSize = self.frame.size;

    UIGraphicsBeginImageContextWithOptions(pageSize, NO, 2.0);

    CGContextRef context = UIGraphicsGetCurrentContext();

    [self.layer renderInContext:context];

    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return theImage;

} 
```

# android - Android：如何在不使用 onclick() 事件的情况下获取 ImageView 的 ID

> ID：13346859
> 
> 赞同：0
> 
> 时间：2012-11-12T15:49:08.000
> 
> 标签：android, android-imageview

这是我的 XML：

```
 <ImageView android:id="@+id/IVtarih1"
               android:layout_height="125dp" 
               android:layout_width="125dp" /> 
```

还有我的活动

```
 ImageView image1 = (ImageView) findViewById(R.id.IV1);
    new DownloadImageTask(image1).execute(urlStr1);
    ImageView iv = (ImageView) findViewById(R.id.IV2)

    iv.setImageResource(R.id.image1);//I can't find id of image1 
```

我从 url 获取 image1 的背景。所以我没有任何可绘制的。我想将 image1 的背景设置为 ImageView iv。我怎样才能做到这一点？我想，如果我找到 image1 的 id，我就可以做到这一点。image1 的 id 每次运行时都会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:13:03.047

提前在 XML 中设置 id，例如

```
<ImageView 
        android:id="@+id/myImageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
```

然后在您的活动中，您可以通过

```
ImageView myImage = (ImageView)findViewById(R.id.myImageView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:34:02.267

你似乎很困惑。你不需要*ImageView 的*id。你只需要做`imgView.setImageResource(R.drawable.drawable_name)`。

# javascript - 在 AngularJS 指令中正确实现对象属性的绑定

> ID：13346862
> 
> 赞同：2
> 
> 时间：2012-11-12T15:49:15.363
> 
> 标签：javascript, angularjs

我创建了一个 AngularJS 指令来为 Google 地图自动完成包装一个 Geocomplete 插件。我正在尝试使其绑定到范围的属性，该属性是通过向现有元素添加“geocomplete”属性来指定的。

```
 geocompleteModule.directive("geocomplete", function ($log, $timeout, $compile, $controller) {
        return {
            restrict: 'A',
            priority: 200,
            link: function (scope, element, attrs, ctrl) {
                var autocomplete = $(element).geocomplete().bind("geocode:result", function (event, result) {
                    if(result.geometry && result.geometry.location) {
                        var location = result.geometry.location;
                        scope.$apply(function (s) {
                            s[attrs.geocomplete] = new Models.Point(location.lat(), location.lng());
                        });
                    }
                });
            }
        };
    }); 
```

但是，如果 geocomplete 属性中引用的属性是子属性，这将不起作用。例如：

```
<input geocomplete="location" /> 
```

作品。

```
<input geocomplete="search.location" /> 
```

不管用。

原生地，AngularJS 似乎能够用它自己的绑定来做到这一点，但我将如何自己去实现呢？

**编辑**

我知道如何使用 split 和 for 循环来完成此操作，但大概这不是“正确”的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:10:02.227

对于您的指令，我只能看到两个更改。添加范围，将 geocomplete 属性上的任何值绑定到“位置”，然后在您的范围中使用 s[scope.location]。$apply

指令文档：[http ://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

```
geocompleteModule.directive("geocomplete", function ($log, $timeout, $compile, $controller) {
 return {
    restrict: 'A',
    scope:{
      location:'=geocomplete'  
    },
    priority: 200,
    link: function (scope, element, attrs) {
        var autocomplete = $(element).geocomplete().bind("geocode:result", function (event, result) {
            if(result.geometry && result.geometry.location) {
                var location = result.geometry.location;
                $timeout(function() {
                    scope.location = new Models.Point(location.lat(), location.lng());
                });
            }
        });
    }
 };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:59:36.980

```
s[attrs.geocomplete] = new Models.Point(location.lat(), location.lng()); 
```

替换为：

```
var a = function(){};
var s = [];

s.push( { 'attr' : 'aaa.bbb', 'method' : new a() } ); 
```

# java - 用猪写一个 udf 有点像教程

> ID：13346867
> 
> 赞同：3
> 
> 时间：2012-11-12T15:49:25.057
> 
> 标签：java, apache-pig

我是猪的新手..并且正在尝试编写一个 udf 函数。

所以基本上这里是问题陈述。

我有一个像这样的虚拟数据..

```
 user_id, movie_id, date_time_stamp 
```

所以我想做的是这个。如果交易是在

```
 9 am and 11 am --> breakfast
    and so on 
```

所以这是我的猪脚本

```
 REGISTER path/myudfs.jar
      in = LOAD 'path/input' USING  
          PigStorage('\\u001') AS (user:long,movie:long, time:chararray);

     result = foreach in GENERATE  myudfs.time(time);
     STORE result INTO 'path/output/time' using PigStorage(','); 
```

现在myudf.jar java代码是这样的

```
 public class time extends EvalFunc<String>{

public String exec(Tuple input) throws IOException {

    if ((input == null) || (input.size() == 0))
        return null;
    try{
        String time = (String) input.get(0) ;
        DateFormat df = new SimpleDateFormat("hh:mm:ss.000");
        Date date = df.parse(time);
        String timeOfDay = getTimeOfDay(date);
        return timeOfDay;
    } catch (ParseException e) {
        //how will I handle when df.parse(time) fails and throws ParseException?
        //maybe:
        return null;
    }

} 
```

所以它接受元组并返回一个字符串......（我也是java新手......）

在此之后，我尝试将此脚本运行为

```
 pig -f time.pig 
```

它返回一个错误

```
 2012-11-12 08:33:08,214 [main] INFO    
    org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to  
  hadoop file system at: maprfs:///
  2012-11-12 08:33:08,353 [main] INFO  
      org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to  
                         map-reduce job tracker at: maprfs:///
  2012-11-12 08:33:08,767 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1069:  
     Problem resolving class version numbers for class myudfs.time 
```

猪邮件列表上的一些帖子是我的 PIG_CLASSPATH 没有设置，我应该将它指向 /path/hadoop/conf

我做到了.. 所以现在 $echo PIG_CLASSPATH --> /path/hadoop/conf

但我得到同样的错误

请指教。谢谢

编辑 1：在查看日志时，错误跟踪是：

```
 Caused by: java.lang.UnsupportedClassVersionError: myudfs/time : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at org.apache.pig.impl.PigContext.resolveClassName(PigContext.java:427)
... 27 more 
```

这像java问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T16:49:09.937

要查找 jar 版本，请使用 winzip（或类似软件）打开 jar 并查找 manifest.mf。那里应该有一行写着“Created-By”，这将给出用于构建 jar 的 java 版本。

这需要更早或等于您用于构建应用程序的 java 版本。如果您在命令行类型中执行此操作：

```
java -version 
```

或在日食中去

```
project(menu) > properties (menu item) > java build path (in list) > libraries (tab) 
```

并查看您用于 JDK/JRE 的版本（您可以从目录中看出这一点，如果没有，则转到该目录并执行 java -version）。

您可能需要更新 Eclipse 中的 Java 版本。

# c++ - const vs constexpr 变量

> ID：13346879
> 
> 赞同：387
> 
> 时间：2012-11-12T15:50:13.817
> 
> 标签：c++, variables, c++11, constants, constexpr

以下定义有区别吗？

```
const     double PI = 3.141592653589793;
constexpr double PI = 3.141592653589793; 
```

如果不是，C++11 中首选哪种风格？

* * *

## 回答 #1

> 赞同：440
> 
> 时间：2012-11-12T16:20:55.213

我相信是有区别的。让我们重命名它们，以便我们可以更轻松地讨论它们：

```
const     double PI1 = 3.141592653589793;
constexpr double PI2 = 3.141592653589793; 
```

两者`PI1`和`PI2`都是恒定的，这意味着您不能修改它们。然而，**只是** `PI2`一个编译时常量。它**应**在编译时初始化。 `PI1`可以在编译时或运行时初始化。此外，**只能** `PI2`在需要编译时常量的上下文中使用。例如：

```
constexpr double PI3 = PI1;  // error 
```

但：

```
constexpr double PI3 = PI2;  // ok 
```

和：

```
static_assert(PI1 == 3.141592653589793, "");  // error 
```

但：

```
static_assert(PI2 == 3.141592653589793, "");  // ok 
```

至于你应该使用哪个？使用满足您需求的任何一个。你想确保你有一个编译时间常数，可以在需要编译时间常数的上下文中使用吗？您希望能够通过在运行时完成的计算来初始化它吗？等等。

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2012-11-12T16:04:41.647

这里没有区别，但是当您拥有具有构造函数的类型时，这很重要。

```
struct S {
    constexpr S(int);
};

const S s0(0);
constexpr S s1(1); 
```

`s0`是一个常数，但它不承诺在编译时被初始化。`s1`被标记`constexpr`，所以它是一个常量，并且因为`S`的构造函数也被标记`constexpr`，所以它会在编译时被初始化。

大多数情况下，当运行时的初始化很耗时并且您希望将该工作推到编译器上时，这很重要，这也很耗时，但不会减慢编译程序的执行时间

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2015-01-22T10:06:48.390

**constexpr**表示在编译期间是常量且已知的值。
**const**表示一个只有常数的值；在编译期间不必知道。

```
int sz;
constexpr auto arraySize1 = sz;    // error! sz's value unknown at compilation
std::array<int, sz> data1;         // error! same problem

constexpr auto arraySize2 = 10;    // fine, 10 is a compile-time constant
std::array<int, arraySize2> data2; // fine, arraySize2 is constexpr 
```

请注意，const 不提供与 constexpr 相同的保证，因为 const 对象不需要使用编译期间已知的值进行初始化。

```
int sz;
const auto arraySize = sz;       // fine, arraySize is const copy of sz
std::array<int, arraySize> data; // error! arraySize's value unknown at compilation 
```

所有 constexpr 对象都是 const，但并非所有 const 对象都是 constexpr。

如果您希望编译器保证变量具有可在需要编译时常量的上下文中使用的值，则要使用的工具是 constexpr，而不是 const。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2015-10-04T17:39:52.280

**constexpr**符号常量必须被赋予一个在编译时已知的值。例如：

```
constexpr int max = 100; 
void use(int n)
{
    constexpr int c1 = max+7; // OK: c1 is 107
    constexpr int c2 = n+7;   // Error: we don’t know the value of c2
    // ...
} 
```

为了处理“变量”的值在编译时使用未知但在初始化后从未更改的值初始化的情况，C++ 提供了第二种形式的常量（a **const**）。例如：

```
constexpr int max = 100; 
void use(int n)
{
    constexpr int c1 = max+7; // OK: c1 is 107
    const int c2 = n+7; // OK, but don’t try to change the value of c2
    // ...
    c2 = 7; // error: c2 is a const
} 
```

这种“<strong>const 变量”很常见，原因有两个：

1.  C++98 没有 constexpr，所以人们使用**const**。
2.  不是常量表达式的列表项“变量”（其值在编译时未知）但在初始化后不更改值本身就非常有用。

参考：Stroustrup 的“编程：使用 C++ 的原理和实践”

# php - PHP如何在一周后禁用查询

> ID：13346880
> 
> 赞同：0
> 
> 时间：2012-11-12T15:50:26.173
> 
> 标签：php, mysql

我从事广告项目，上面的任何帖子都有一定的时间显示， **例如：**（toyota cara model 2011 for sale）此添加将在一周后过期。当我将它插入数据库时​​，我选择它将在一周后禁用我现在需要的只是一周后这篇文章会自动从首页的查询中禁用

我怎样才能使用 PHP 和 MYSQL 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T15:52:47.067

而不是运行 cron 作业或其他：仅选择上周发布的广告列表。

```
SELECT `listing_title`, `etc` FROM `ad_listing`
WHERE `date_posted` BETWEEN date_sub(now(), INTERVAL 1 WEEK) AND now(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:52:34.087

我相信最简单和最干净的方法是使用删除/禁用数据所需的脚本创建一个`cronjob`，然后将其设置为在当天运行。

这是一个关于如何做到这一点的小例子：[http ://www.thesitewizard.com/general/set-cron-job.shtml](http://www.thesitewizard.com/general/set-cron-job.shtml)

这样，您的数据库中就不会有不必要的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:53:35.130

例如，您必须在查询中使用时间限制

```
SELECT * FROM cars WHERE model="toyta" and submitted_time > '2012-11-8 20:31:23' 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T15:57:53.943

通过 PHP 或数据库触发器创建一个提前一周存储时间的字段，然后在您的搜索中添加 - WHERE `field`> now()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T16:55:15.550

如果您的版本是 5.1 或更高版本，并且您拥有 SUPER 权限，您还可以使用 MySQL 事件调度程序。这就像一个 cron 作业，但由 MySQL 执行。

更多详细信息，请访问 [http://dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

# apache - .htaccess 优化

> ID：13346881
> 
> 赞同：4
> 
> 时间：2012-11-12T15:50:28.070
> 
> 标签：apache, .htaccess, mod-rewrite

任何人都可以帮助进行 .htaccess 优化吗？其实我有下一个代码：

```
RewriteEngine on
RewriteBase /
DirectoryIndex frontend/www/index.php

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_URI} cpanel/(.*)$
# Why not "-f" - because it's domain of 3d level: VirtualDocumentRoot /path/to/htdocs/%-3/ and if I use "-f" file not founds :(
RewriteCond backend/www/%1 -F
RewriteRule . backend/www/%1 [L]

RewriteCond %{REQUEST_URI} cpanel/(.*)$
RewriteCond backend/www/%1 !-F
RewriteRule . backend/www/index.php?b=%1 [L]

RewriteCond %{REQUEST_URI} !cpanel/(.*)$
RewriteCond frontend/www%{REQUEST_URI} -F
RewriteRule . frontend/www%{REQUEST_URI}

RewriteCond %{REQUEST_URI} !cpanel/(.*)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . frontend/www/index.php?f=%{REQUEST_URI} 
```

文件夹结构：

```
.
├── .htaccess (with code I provided)
├── frontend
│   ├── www
│       ├── css
│       │   ├── base.css
│       └── index.php
├── backend
    ├── www
        ├── css
        │   ├── base.css
        └── index.php 
```

我需要：

*   **my.domain.com/base.css**显示文件是否存在于根目录或 frontend/www 下
*   **my.domain.com/dir/base.css**显示文件是否存在于 root/dir 目录或 frontend/www/dir 下
*   **my.domain.com/cpanel/base.css**显示文件是否存在于 backend/www 目录中
*   **my.domain.com/cpanel/dir/base.css**显示文件是否存在于 backend/www/dir 目录中
*   如果在任何 nedded 目录中都找不到文件，我会从 frontend/www/index.php 或 backend/www/index.php 显示 index.php（如果 URI 以 cpanel/... 开头）。

看起来我的 .htaccess 工作得很好，但我不确定它的质量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T02:52:38.643

如果你`httpd.conf`的设置正确，这`RewriteBase /`是不必要的

在`RewriteCond %{REQUEST_URI} cpanel/(.*)$`部分`cpanel/(.*)$`应该是`^cpanel/(.*)$`。没有它，每个包含 '..cpanel/something..' 的 url 都会匹配。

我猜`...?f=%{REQUEST_URI}`你想将客户端请求的 url 传递给 index.php（可能是记录 404-s）。但是，如果`REQUEST_URI`包含不需要的字符（例如`&`），则会导致意外行为，例如，只有直到`&`的部分`REQUEST_URI`将作为`f`参数的值传递，之后的部分`&`将是另一个新创建的 GET 参数。（请尝试一下。）

您可以`REQUEST_URI`在 php 中使用`$_SERVER['REQUEST_URI']`. 如果你省略这部分，你`.htaccess`会更清楚。

最后两条规则值得一个`[L]`标志，这并不重要，但是如果你不想链接你的规则，为了安全和可维护性，添加`[L]`标志总是一个好主意。

我认为您的 .htaccess 除了这些小东西之外还可以。

# php - 使用 $_GET 将变量传递给 PHP 下载脚本

> ID：13346884
> 
> 赞同：-2
> 
> 时间：2012-11-12T15:50:30.193
> 
> 标签：php, get

我有以下网址：

`http://www.solutionssoftwarematrix.com/download.php?filename=CreatingandMarketingthePerfectYouTubeVideo.zip`

当有人单击上面的链接时，我试图将字符串变量传递给 PHP 脚本（如下）。

这是脚本（download.php）：

[http://www.devshed.com/c/a/PHP/Simple-and-Secure-PHP-Download-Script-with-Limits-Tutorial/1/](http://www.devshed.com/c/a/PHP/Simple-and-Secure-PHP-Download-Script-with-Limits-Tutorial/1/)

下面带有粗体区域的行是我的`$_GET`功能正在添加的地方，但是，我不断收到解析错误，或者它没有提取文件名，并且下载不起作用。

```
header("Content-type:application/pdf");
header('Content-Disposition: attachment;filename="http://www.yourdomain.com/ebookfordownloads/$_GET['$filename']"');

readfile("/your/absolute/server/path/html/ebookfordownloads/$_GET['$filename']");

header("Content-type:application/pdf");
header('Content-Disposition: attachment; filename="http://www.yourdomain.com/ebookfordownloads/$_GET['$filename']"');
readfile("/your/absolute/server/path/html/ebookfordownloads/$_GET['$filename']"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:56:07.277

有多个问题：

*   此语法无效：`'$_GET['$filename`... 前面的撇号`'$filename`关闭字符串。您可能想要做的是`downloads/' . $_GET[$filename]`- 连接
*   此语法也是无效的：`"downloads/$_GET['$filename"`-- 在带引号的字符串中使用数组访问，您不能有撇号。同样，串联是您最好的选择：`"downloads/" . $_GET[$filename]`
*   我不确定你是否想要`$_GET['$filename']`or`$_GET[$filename]`或`$_GET['filename']`。三者之间有一个非常重要的区别。
*   `$filename`如果用户可以以某种方式设置（或`filename`get 参数，如果这是您打算使用的），您的代码就有很大的漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T15:56:21.150

您没有获得基本的[PHP 字符串功能](http://php.net/manual/en/language.types.string.php)。要添加这样的变量，您必须使用它：

```
readfile("/your/absolute/server/path/html/ebookfordownloads/{$_GET['$filename']}"); 
```

或连接它们：

```
readfile("/your/absolute/server/path/html/ebookfordownloads/".$_GET['$filename']); 
```

`$_GET`在代码中逐字使用用户输入（变量）时，更不用说非常大的安全漏洞了。在使用给定信息之前进行验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:03:15.730

假设它应该是这样的：

```
header("Content-type:application/pdf");
header('Content-Disposition: attachment;filename="http://www.yourdomain.com/ebookfordownloads/' . $_GET['filename'] . '"');

readfile("/your/absolute/server/path/html/ebookfordownloads/" . $_GET['filename']);

header("Content-type:application/pdf");
header('Content-Disposition: attachment; filename="http://www.yourdomain.com/ebookfordownloads/' . $_GET['filename'] . '"');
readfile("/your/absolute/server/path/html/ebookfordownloads/" . $_GET['filename'] ); 
```

看看 PHP 中的字符串连接。

另外：`$_GET['$filename']`意味着您要求 PHP`?$filename=`在 url 之后获取所有内容。但是你的 url 没有`$filename`参数，只有`filename`，所以应该修改为`$_GET['filename']`. 或者，如果您将参数名称存储在名为`$filename`这样的变量中：`$filename = 'filename'`，则应将其更改为`$_GET[$filename]`

# django - Django Tastypie - 如何通过单个请求获取相关资源

> ID：13346885
> 
> 赞同：0
> 
> 时间：2012-11-12T15:50:35.667
> 
> 标签：django, tastypie

假设给出以下资源：

```
class RecipeResource(ModelResource):
    ingredients = fields.ToManyField(IngredientResource, 'ingredients')

    class Meta:
        queryset = Recipe.objects.all()
        resource_name = "recipe"
        fields = ['id', 'title', 'description',]

class IngredientResource(ModelResource):
    recipe = fields.ToOneField(RecipeResource, 'recipe')

    class Meta:
        queryset = Ingredient.objects.all()
        resource_name = "ingredient"
        fields = ['id', 'ingredient',] 
```

对 myhost.com/api/v1/recipe/?format=json 的 HTTP 请求给出以下响应：

```
{
    "meta":
    {
        ...
    },
    "objects":
    [
       {
           "description": "Some Description",
           "id": "1",
           "ingredients":
           [
               "/api/v1/ingredient/1/"
           ],
           "resource_uri": "/api/v1/recipe/11/",
           "title": "MyRecipe",
       }
   ]
} 
```

到目前为止，一切都很好。

但现在，我想用类似的东西交换成分 resource_uri ("/api/v1/ingredient/1/")：

```
{
   "id": "1",
   "ingredient": "Garlic",
   "recipe": "/api/v1/recipe/1/",
   "resource_uri": "/api/v1/ingredient/1/",
} 
```

要获得以下响应：

```
{
    "meta":
    {
        ...
    },
    "objects":
    [
       {
           "description": "Some Description",
           "id": "1",
           "ingredients":
           [
               {
                   "id": "1",
                   "ingredient": "Garlic",
                   "recipe": "/api/v1/recipe/1/",
                   "resource_uri": "/api/v1/ingredient/1/",
               }
           ],
           "resource_uri": "/api/v1/recipe/11/",
           "title": "MyRecipe",
       }
   ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:20:44.630

答案是属性 full=True：

> 成分 = fields.ToManyField('mezzanine_recipes.api.IngredientResource', 'ingredients', full=True)

# jquery - 链接 onclick 没有在 jQuery 中触发

> ID：13346889
> 
> 赞同：0
> 
> 时间：2012-11-12T15:50:54.657
> 
> 标签：jquery, hyperlink, onclick

这是我的 HTML 的摘录：

```
<section id="order">

                 <div id="warenkorb-button" class="warenkorb-bg-color"><a id="wk-btn-a" href="#warenkorb">zum Warenkorb hinzuf&uuml;gen</a></div>

         </section> 
```

那是我的 JavaScript：

```
$(function() {
                 $(document).on('click', '#warenkorb-button a', function(xyz){
                              alert('test');
                              xyz.stopImmediatePropagation();                                   
                              });
}); 
```

那不起作用/触发-如果我像这样重写它，它正在起作用：

```
$(function() {
                 $('#warenkorb-button a').on('click', function(xyz){
                              alert('test');  
                              xyz.stopImmediatePropagation();  
                              });
}); 
```

# c++ - 在插入之前使用 lower_bound 搜索地图的好处。等价于 ptr_map？

> ID：13346892
> 
> 赞同：2
> 
> 时间：2012-11-12T15:50:58.637
> 
> 标签：c++, optimization, map, boost-ptr-container

在寻找一种仅在密钥不存在时才插入地图的有效方法时，我遇到了 [这种方法](https://stackoverflow.com/questions/97050/stdmap-insert-or-stdmap-find/101980#101980)：

```
MapType::iterator lb = mymap.lower_bound(k);

if(lb != mymap.end() && !(mymap.key_comp()(k, lb->first))) {
    // key exists. Value accessible from lb->second
} else {
    // Do insert. Use lb as a hint to insert so it can avoid another lookup
    mymap.insert(lb, MapType::value_type(k, v));
} 
```

这适用于`std::map`. 但是，`boost::ptr_map`不提供类似的形式，`insert()`即接受迭代器位置的形式。

所以我想知道：

1.  与直接插入相比，这种方法有什么好处？IE

    ```
    std::pair<MapType::iterator, bool> ret;
    ret = mymap.insert(MapType::value_type(k, v));
    if (!ret.second) {
        // key exists. insertion not done. do something else
    } 
    ```

2.  如果确实有充分的理由使用该`lower_bound`方法，是否有等效的策略`boost::ptr_map`？还是不适用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:58:22.690

有两种最有效的方法可以做到这一点。

第一种有效的方法是调用`insert`（在 STL 中也是如此）。这将返回`pair<iterator,bool>`，因此如果它已经存在，则不会插入。

第二种方法，当您必须在密钥不存在时创建对象时使用，是使用`operator[]`which 返回对那里的引用。如果该项目不存在，它会为您插入一个默认创建的值。

请注意这里的区别：对于指向指针的常规 STL 映射，`operator[]`将返回一个指针，并插入一个空指针。因为`boost::ptr_map`它不会插入空指针，它会插入一个指向默认构造对象的指针。

如果您的集合实际上可能包含默认构造的对象，并且您还没有要插入的对象，那么我找不到一种有效的方法来一次性完成。在这种情况下，也许不要使用这个集合，或者确保你的对象被稍微修改，这样你就有某种标志来表明它是“默认构造的”，即一种空状态。

# windows - 为什么 enableelayedexpansion 不适用于流水线命令？

> ID：13346893
> 
> 赞同：0
> 
> 时间：2012-11-12T15:50:58.750
> 
> 标签：windows, batch-file

我正在尝试使用 Windows 批处理文件来运行命令，将其输出通过管道传输到另一个命令，并捕获第一个命令的退出状态。但显然，我不能这样做，尽管我承认 Windows 批处理文件是如此神秘，以至于我可能错过了一项技术。 **如何捕获命令的退出状态并通过管道传输其输出？**

这是经典`do_a_thing | tee logfile.txt`用法，但我希望能够检查是否`do_a_thing`成功。经过大量的鬼混、谷歌搜索和阅读 StackOverflow，我想出了以下内容：

```
setlocal enabledelayedexpansion
set rc=-1
( false & set rc=!errorlevel! & echo rc=!rc! ) | tee logfile.txt
echo %rc% 
```

我曾希望会产生：

```
C:\>test.bat 
C:\>setlocal enabledelayedexpansion 
C:\>set rc=-1 
C:\>(false & set rc=!errorlevel!   & echo rc=!rc!  ) | tee logfile.txt
rc=1 
C:\>echo 1
1 
```

但是，唉，它没有：

```
C:\>test.bat
C:\>setlocal enabledelayedexpansion
C:\>set rc=-1
C:\>(false & set rc=!errorlevel! & echo rc=!rc! ) | tee logfile.txt
rc=!rc!
C:\>echo -1
-1 
```

删除“ `| tee logfile.txt`”会产生 的预期值`!rc!`，但当然，它不会让我捕获日志文件。

```
C:\>test.bat
C:\>setlocal enabledelayedexpansion
C:\>set rc=-1
C:\>(false & set rc=!errorlevel! & echo rc=!rc! )
rc=1
C:\>echo 1
1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:43:12.113

您尝试执行的操作不起作用，因为管道的每一侧都在其自己的命令行上下文中的命令 shell 中执行，默认情况下延迟扩展关闭。请参阅[为什么在管道代码块中延迟扩展失败？](https://stackoverflow.com/q/8192318/1012053)了解更多信息。接受的答案解释了一切，其他答案有助于为接受的答案提供上下文。

最简单的解决方案是将错误代码写入临时文件，然后在命令完成后将该文件读入变量。

```
( false & call echo %%^^errorlevel%%>returnCode.txt ) | tee logfile.txt
set "rc="
<returnCode.txt set /p "rc="
del returnCode.txt
echo rc=%rc% 
```

CALL 语句提供在命令运行后发生的另一个级别的解析。诀窍是延迟扩展 OF %errorlevel% 直到您正在测试的命令运行之后。在命令上下文中，您可以简单地使用`CALL ECHO %^ERRORLEVEL%`. 但是命令行在到达命令上下文之前还必须通过批处理上下文解析，因此百分比必须转义为`%%`，插入符号转义为`^^`.

# c# - Thread.Join 似乎错误地返回 false

> ID：13346899
> 
> 赞同：4
> 
> 时间：2012-11-12T15:51:23.783
> 
> 标签：c#, multithreading

我[`Thread.Join(int millisecondsTimeout)`](http://msdn.microsoft.com/en-us/library/6b1kkss0%28v=vs.90%29.aspx)用来终止一些`AppDomain`s.

我经常收到一条错误消息，指出 AppDomain 未在 5 秒内终止。在单步调试器中，我看到`AppDomain.Unload()`调用在 5 秒内轻松终止，但`Thread.Join`返回 false。

我哪里错了？

```
var thread = new Thread(
    () =>
    {
        try
        {
            AppDomain.Unload(someAppDomain);
        }
        catch (ArgumentNullException)
        {

        }
        catch (CannotUnloadAppDomainException exception)
        {
            // Some error message
        }
    });

thread.Start();
const int numSecondsWait = 5;

if (!thread.Join(1000 * numSecondsWait))
{
    // Some error message about it not exiting in 5 seconds
} 
```

**编辑 1**

值得添加每个`AppDomain`s 所做的事情。每个`AppDomain`人至少有一个[`Timer`](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。代码大致如下所示，（请记住，为了便于阅读，我已将大量类合并为一个类）。

```
static void Main(string[] args)
{
    _exceptionThrown = new EventWaitHandle(false, EventResetMode.AutoReset);
    _timer = new Timer(TickAction, null, 0, interval);
    try
    {
        _exceptionThrown.WaitOne();
    }
    finally
    {
        _timer.Dispose(_timerWaitHandle);
        WaitHandle.WaitAll(_timerWaitHandle);
    }
} 
```

实际上，我知道“主”线程会抛出一个[`ThreadAbortException`](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx), 跳转到 finally 语句并确保`Timer`队列在退出之前完全排空。

`Timer`当它们在 tick 方法中时，所有的s 都会记录下来。所以我几乎可以肯定计时器队列中没有任何内容，并且`_timer.Dispose(_timerWaitHandle)`立即返回。

不管做与不做，至少三个我ing中的*一个*不会在5秒内完成。`AppDomain``Unload`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:17:38.547

其原因在 Unload() 的 MSDN 库文章中有详细记录：

> 在 .NET Framework 2.0 版中，有一个专门用于卸载应用程序域的线程。这提高了可靠性，尤其是在托管 .NET Framework 时。当线程调用 Unload 时，目标域被标记为卸载。专用线程尝试卸载域，并且域中的所有线程都被中止。**如果一个线程没有中止**，例如因为它正在执行非托管代码，或者因为它正在执行 finally 块，那么在一段时间后，在最初调用 Unload 的线程中会抛出一个 CannotUnloadAppDomainException。如果无法中止的线程最终结束，则不会卸载目标域。因此，在 .NET Framework 2.0 版中，域不能保证卸载，因为它可能无法终止正在执行的线程。
> 
> 域中的线程使用 Abort 方法终止，该方法在线程中引发 ThreadAbortException。尽管线程应该立即终止，但它可以在 finally 子句中继续执行不可预测的时间。

所以你需要找出为什么你的程序有一个线程在该应用程序域内运行，以及为什么它拒绝中止。例如，当它隐藏在非托管代码中时很常见。使用 Debug + Windows + Threads 来查看它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T16:18:50.913

如果您想确保 appdomains 始终在 5 秒内卸载，您可以尝试测量它。例如使用这样的东西：

```
var stopwatch = System.Diagnostics.Stopwatch.StartNew();
AppDomain.Unload(someAppDomain);
long elapsedMillis = stopwatch.ElapsedMilliseconds;
System.Diagnostics.Trace.Writeline("Unload duration: " + elapsedMillis + " ms"); 
```

Visual Studio 的输出窗口（或 sysinternals 的 DebugView 工具）应该显示它

# c - 从文件中读取文本并在需要时重新分配

> ID：13346904
> 
> 赞同：4
> 
> 时间：2012-11-12T15:51:50.893
> 
> 标签：c

我想逐行读取文本文件中的文本并在这些行上进行一些处理。我可以做所有的处理，但我不能用 malloc-realloc 增加内存。我首先给了有限的内存，如果我的文本文件的行字符在这个限制内，一切都很好。如果我使用像每行 10,000 个字符这样的大文件，它只会读取到我的限制。我不完全了解如何使用`realloc()`. 我该怎么处理这段代码？

```
 void stat(char* fileptr)
{

  FILE *fp;
  char *linebuffer;
  int line=0;
  int sum=0;
  int max=0;
  int min=0;
  int maxlinelen=512;
  int i=0,j=0;
  int maxlen=512;
  int curlinelen[maxlen];

  linebuffer=(char*) malloc(maxlinelen * sizeof(char));
  if(linebuffer==NULL)
    {
      printf("Error occurred allocating memory for linebuffer");
      exit(1);
    }

  if((fp=fopen(fileptr,"r"))!=NULL)
  {
    while((fgets(linebuffer,maxlinelen,fp))!=NULL)
      {
    if(strlen(linebuffer)==maxlinelen)
      {
        maxlinelen*=2;
        linebuffer=realloc(linebuffer,maxlinelen * sizeof(char));
        if(linebuffer==NULL)
          {
        printf("Error occurred reallocating space for linebuffer");
        exit(1);
          }
      }
    line++;

        sum=sum+strlen(linebuffer);
    curlinelen[i]=strlen(linebuffer);
    i++;

      }
  }
  min=curlinelen[0];
  max=curlinelen[0];
  for(j=0;j<line;j++)
    {
      if(curlinelen[j]<min)
    {
      min=curlinelen[j];
    }
      if(curlinelen[j]>max)
    {
      max=curlinelen[j];
    }
    }

 printf("No. of lines        =%d\n",line);
 printf("Maximum line length =%d\n",max);
 printf("Minimum line length =%d\n",min);       
 printf("Average line length =%8.2f\n",(float)sum/(float)line);

 fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:55:13.347

```
fgets(linebuffer,maxlinelen,fp) 
```

读取和存储最多`maxlinelen - 1`字符`linebuffer`并以 0 结尾。因此

```
if(strlen(linebuffer)==maxlinelen) 
```

永远不会满足，`strlen(linebuffer)`最多可以`maxlinelen - 1`。`maxlinelen`更改条件，如果文件包含长行（除非`realloc`失败），您将看到该条件增加。

但是，您当前的代码会将读入的部分行计为整行，然后将该行的下一个块读取为新行。要增加缓冲区直到整行适合，您必须在收集行长度和增加行数之前继续从文件中读取。但是我们必须检查是否读取了整行（包括末尾的换行符），以防在扩大缓冲区之前`fgets`读取最大允许的`char`s 数，或者我们将连接以下行并计数两个（或者在怪异的情况下甚至更多) 行作为一个。

```
while((fgets(linebuffer,maxlinelen,fp))!=NULL)
  {
  while((strlen(linebuffer) == maxlinelen-1) && (linebuffer[maxlinelen-2] != '\n'))
  {
    maxlinelen*=2;
    linebuffer=realloc(linebuffer,maxlinelen * sizeof(char));
    if(linebuffer==NULL)
    {
        printf("Error occurred reallocating space for linebuffer");
        exit(1);
    }
    fgets(linebuffer + (maxlinelen/2 - 1), maxlinelen/2 + 1, fp);
  } 
```

将是一种（相当低效，由于`strlen`电话）的方式来做到这一点。

# css - 使用 Adob e Illustrator 设置 CSS 类属性

> ID：13346907
> 
> 赞同：8
> 
> 时间：2012-11-12T15:52:06.257
> 
> 标签：css, svg, adobe-illustrator

我正在使用 Adob​​e Illustrator 创建 SVG 图像。我需要为 SVG 中的元素设置一些附加属性，例如 CSS`class`属性。我什至想将自定义命名空间中的属性添加到它。

这怎么可能？来自自定义命名空间的属性“很高兴拥有”，但该`class`属性是必须的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:28:45.210

我还没有找到使用 Adob​​e Illustrator 执行此操作的方法，但使用 Inkscape 很容易。使用 XML 编辑器（编辑 » XML 编辑器）使用命名空间然后`Ctrl`+破解您的属性，`Enter`它将位于 XML 中。

# ruby - 从 Ruby 中的数组创建列表

> ID：13346908
> 
> 赞同：0
> 
> 时间：2012-11-12T15:52:11.563
> 
> 标签：ruby, map, inject

如何转换此数组：

```
@list = ["one", "two", "three", "four"] 
```

进入一个像这样的新数组，前面有键：

```
@new_list = ["1\. one", "2\. two", "3\. three", "4\. four"] 
```

在 Ruby 中使用`each`和？`inject`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T15:56:44.757

收集/映射是这里更自然的方法。

```
@new_list = @list.map.with_index {|item, index| "#{index+1}. #{item}"} 
```

从 ruby​​ 1.9 开始，您可以像这样链接枚举器

# asp.net - 从网站打印到 Web 服务器上配置的打印机

> ID：13346910
> 
> 赞同：2
> 
> 时间：2012-11-12T15:52:16.123
> 
> 标签：asp.net

我正在开发一个网站（asp.net），它允许用户打印到应用程序中配置的打印机。我的意思是网站将具有可用打印机列表的配置，并且允许用户从任何页面从配置的列表中选择打印机进行打印。那么如何在 Web 服务器上设置打印机呢？

如果有任何产品或如何完成，有什么想法吗？

感谢您的帮助 谢谢

# php - 销毁 jQuery UI 中的对话框

> ID：13346911
> 
> 赞同：0
> 
> 时间：2012-11-12T15:52:17.927
> 
> 标签：php, jquery, jquery-ui

我正在使用[jQuery UI](http://en.wikipedia.org/wiki/JQuery_UI)开发一个系统，该系统打开一个对话框，该对话框基本上加载了一个不断刷新的日志文件尾部。它工作得很好，但问题是当你关闭它时，它不会终止对话框，所以它仍然会继续使用文件的尾部向你发送流量。显然这不是一个好习惯。

无论如何，到目前为止我尝试解决问题的代码如下。

```
var $console = $('<div title="&nbsp; Server Console"></div>')
    .dialog({
         height: 720,
         width: 1000,
         resizable: false,
         autoOpen: false
    });

$(".consoleOpen").click(function(){
    $console.dialog('open').load("console.php?console="+this.name);
});

$console.bind('dialogclose', function(event) {
    $console.remove();
}); 
```

这是中的刷新功能`console.php`：

```
(function($)
{
    $(document).ready(function()
    {
        var $container = $("#responsecontainer");
        $container.load("console_class.php?console=<?php echo $console; ?>");
        var refreshId = setInterval(function()
        {
            $container.load('console_class.php?console=<?php echo $console; ?>');
        }, <?php echo $consoleRefresh;?>);
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T15:56:11.613

看[API](http://en.wikipedia.org/wiki/Application_programming_interface)函数*[destroy()](http://api.jqueryui.com/dialog/#method-destroy)*

```
$console.bind('dialogclose', function(event) {
    $console.dialog('destroy').remove();
}); 
```

您还需要使用 clearInterval 否则只要页面打开它就会一直运行。

```
$console.bind('dialogclose', function(event) {
    $console.dialog('destroy').remove();
    clearInterval(refreshID);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:54:25.403

你已经提到了

`$console.dialog("destroy");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T15:59:32.720

试试这个：

```
$console.bind('dialogclose', function(event) {
    $console.dialog( "destroy" );
}); 
```

或阅读这个[jQuery 对话框](http://docs.jquery.com/UI/API/1.8/Dialog)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T16:05:08.430

我也遇到过同样的问题...

看：

*   *[jQuery UI 对话框关闭不清除对话框](https://stackoverflow.com/q/3310803/183254)*（堆栈溢出问题）

*   *[按需创建对话框](http://blog.nemikor.com/category/jquery-ui/jquery-ui-dialog/)*（博客条目）

你需要打电话`$('#dialog_id').dialog("destroy");`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T17:23:33.277

对话不是这里的问题——它是打电话的时间间隔。

在你声明`refreshId`的地方这样做......

```
var window.refreshId = setInterval(function() 
```

然后在删除对话框的地方，添加一个 clearInterval ...

```
$console.bind('dialogclose', function(event) {
    $console.remove();
    clearInterval(window.refreshId);
}); 
```

这使变量成为`refreshId`全局变量，以便可以在代码的其他地方访问它。然后，您可以使用它来清除重复调用的间隔。

# c# - 如何在 DropNet 中实现 CancellationToken 支持？

> ID：13346912
> 
> 赞同：2
> 
> 时间：2012-11-12T15:52:21.297
> 
> 标签：c#, task-parallel-library, restsharp, cancellation, dropnet

我想在 MonoTouch 应用程序中异步访问 DropBox API。我认为使用本身依赖于[RestSharp的](https://github.com/restsharp/RestSharp/)[DropNet](https://github.com/dkarzon/DropNet/)
会很方便。

这两个库都运行良好，但返回 s 的 DropNet 重载`Task`无法让您将请求与取消令牌相关联。

这是他们的实现的样子：

```
public Task<IRestResponse> GetThumbnailTask(string path, ThumbnailSize size)
{
    if (!path.StartsWith("/")) path = "/" + path;
    var request = _requestHelper.CreateThumbnailRequest(path, size, Root);
    return ExecuteTask(ApiType.Content, request, cancel);
} 
```

`ExecuteTask`实现基于`TaskCompletionSource`并[最初](https://github.com/dkarzon/DropNet/blob/master/DropNet/Extensions/RestClientExtensions.cs)[由 Laurent Kempé](http://www.laurentkempe.com/post/Extending-existing-NET-API-to-support-asynchronous-operations.aspx)编写：

```
public static class RestClientExtensions
{
    public static Task<TResult> ExecuteTask<TResult>(
        this IRestClient client, IRestRequest request
        ) where TResult : new()
    {
        var tcs = new TaskCompletionSource<TResult>();

        WaitCallback asyncWork = _ => {
            try {
                client.ExecuteAsync<TResult>(request,
                    (response, asynchandle) => {
                        if (response.StatusCode != HttpStatusCode.OK) {
                            tcs.SetException(new DropboxException(response));
                        } else {
                            tcs.SetResult(response.Data);
                        }
                    }
                );
            } catch (Exception exc) {
                    tcs.SetException(exc);
            }
        };

        return ExecuteTask(asyncWork, tcs);
    }

    public static Task<IRestResponse> ExecuteTask(
        this IRestClient client, IRestRequest request
        )
    {
        var tcs = new TaskCompletionSource<IRestResponse>();

        WaitCallback asyncWork = _ => {
            try {
                client.ExecuteAsync(request,
                    (response, asynchandle) => {
                        if (response.StatusCode != HttpStatusCode.OK) {
                            tcs.SetException(new DropboxException(response));
                        } else {
                            tcs.SetResult(response);
                        }
                    }
                );
            } catch (Exception exc) {
                    tcs.SetException(exc);
            }
        };

        return ExecuteTask(asyncWork, tcs);
   }

    private static Task<TResult> ExecuteTask<TResult>(
        WaitCallback asyncWork, TaskCompletionSource<TResult> tcs
        )
    {
        ThreadPool.QueueUserWorkItem(asyncWork);
        return tcs.Task;
    }
} 
```

如何更改或扩展此代码以支持取消`CancellationToken`？
我想这样称呼它：

```
var task = dropbox.GetThumbnailTask(
    "/test.jpg", ThumbnailSize.ExtraLarge2, _token
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:52:21.297

因为`CancellationToken`是值类型，我们可以将其作为可选参数添加到具有默认值的 API 中，并避免空检查，这很甜蜜。

```
public Task<IRestResponse> GetThumbnailTask(
    string path, ThumbnailSize size, CancellationToken cancel = default(CancellationToken)
) {
    if (!path.StartsWith("/")) path = "/" + path;
    var request = _requestHelper.CreateThumbnailRequest(path, size, Root);
    return ExecuteTask(ApiType.Content, request, cancel);
} 
```

现在，RestSharp`ExecuteAsync`方法返回`RestRequestAsyncHandle`封装底层的方法`HttpWebRequest`以及`Abort`方法。这就是我们取消事物的方式。

```
public static Task<TResult> ExecuteTask<TResult>(
    this IRestClient client, IRestRequest request, CancellationToken cancel = default(CancellationToken)
    ) where TResult : new()
{
    var tcs = new TaskCompletionSource<TResult>();
    try {
        var async = client.ExecuteAsync<TResult>(request, (response, _) => {
            if (cancel.IsCancellationRequested || response == null)
                return;

            if (response.StatusCode != HttpStatusCode.OK) {
                tcs.TrySetException(new DropboxException(response));
            } else {
                tcs.TrySetResult(response.Data);
            }
        });

        cancel.Register(() => {
            async.Abort();
            tcs.TrySetCanceled();
        });
    } catch (Exception ex) {
        tcs.TrySetException(ex);
    }

    return tcs.Task;
}

public static Task<IRestResponse> ExecuteTask(this IRestClient client, IRestRequest request, CancellationToken cancel = default(CancellationToken))
{
    var tcs = new TaskCompletionSource<IRestResponse>();
    try {
        var async = client.ExecuteAsync<IRestResponse>(request, (response, _) => {
            if (cancel.IsCancellationRequested || response == null)
                return;

            if (response.StatusCode != HttpStatusCode.OK) {
                tcs.TrySetException(new DropboxException(response));
            } else {
                tcs.TrySetResult(response);
            }
        });

        cancel.Register(() => {
            async.Abort();
            tcs.TrySetCanceled();
        });
    } catch (Exception ex) {
        tcs.TrySetException(ex);
    }

    return tcs.Task;
} 
```

最后，[Lauren 的实现](http://www.laurentkempe.com/post/Extending-existing-NET-API-to-support-asynchronous-operations.aspx)将请求放入线程池，但我看不出这样做的理由——<code>ExecuteAsync 本身就是异步的。所以我不这样做。

这就是取消 DropNet 操作。

我还做了一些调整，可能对你有用。

`Task`因为如果不将调用包装`ExecuteTask`到另一个s 中，我就无法调度 DropBox s `Task`，所以我决定为请求找到一个最佳并发级别，结果证明它`4`适合我，并明确设置它：

```
static readonly Uri DropboxContentHost = new Uri("https://api-content.dropbox.com");

static DropboxService()
{
    var point = ServicePointManager.FindServicePoint(DropboxContentHost);
    point.ConnectionLimit = 4;
} 
```

我也满足于让未处理的任务异常在地狱中腐烂，所以这就是我所做的：

```
TaskScheduler.UnobservedTaskException += (sender, e) => {
    e.SetObserved();
}; 
```

最后一个观察是您**不应该调用`Start()`返回的任务，`DropNet`**因为该任务会立即开始。如果您不喜欢这样，您将需要包装`ExecuteTask`另一个不受`TaskCompletionSource`.

# python - 将变量字典值插入到 db

> ID：13346925
> 
> 赞同：1
> 
> 时间：2012-11-12T15:53:28.130
> 
> 标签：python, arrays, dictionary

我有一本字典，其键和值是从互联网更新的。该字典在每次更新时（出于某种原因）不断更改其键/变量的位置和数量，但键的名称和值的格式保持不变。最初，我将它的键和值转换为不同的数组，并通过跟踪它们的数组位置将它们的值存储到数据库中，但是在我发现它的可变性之后，它不再可能像我一样做，因为 len(dictionary ) 不断变化。字典项在每次更新时从一个 url 获取，有时会给我 31 个项（每个项是键：值），有时在字典中给我 3、29、28 甚至 27 个项。所以，我对一些“永远存在”的项目进行了概括，现在我想在每次更新时提取它们，但不是按照它们的顺序，但根据他们的钥匙。它更像是：我需要在字典中搜索特定的关键字并将其对应的值保存到变量中。例如，在一次更新中，它的键是：

```
>>> len(dict.keys())
>>> 30 
```

在另一个更新：

```
>>> len(dict.keys())
>>> 26 
```

这表明字典中的项目数量不断变化。但是，我已经注意到一些强制性密钥的列表（我将在下面提到），它们总是在那里，所以我只需要在事物更新时查找它们。更准确地说，我需要一种方法来从字典中提取特定键（可能通过搜索）及其对应的值，并将它们保存到不同的变量中，以便我可以将它们保存到数据库中。要搜索的键是：

*   temp_f
*   相对湿度
*   风目录
*   压力_mb
*   地点

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:08:45.563

If I understood your problem well, you don't need to maintain the order of keys/values in your dictionary and you just want to strip your dictionary from unwanted keys and rename the keys you are interested in. Your concern is that some keys might also be missing. I would solve it in this way.

```
new_dict = {
    'tf' : original_dict.get('temp_f', None),
    'rh' : original_dict.get('relative_humidity', None),
     # And so on...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:59:37.140

如果要保持顺序，请使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)而不是 normal `dict`。

# iphone - iOS6 - UICollectionViewFlowLayout 没有正确放置单元格

> ID：13346926
> 
> 赞同：0
> 
> 时间：2012-11-12T15:53:31.823
> 
> 标签：iphone, ios, uicollectionview

我添加了一个框架大小为 320x600 的 UICollectionView，每个项目大小为 44x44。最终输出没有正确定位每一行中的单元格。有一些单元格位于集合视图的边界之外，它看起来像这个链接中的图像：http: [//cl.ly/image/2s270g1p1g2e](http://cl.ly/image/2s270g1p1g2e)

#4、#5、#6、#11、#12、#13 和 else 在集合视图的范围之外。这是我启动 UICollectionView 和流布局的代码：

```
SSCalendarFlowLaout *flowlayout = [[SSCalendarFlowLaout alloc] init];
flowlayout.minimumInteritemSpacing = 1.0f;
flowlayout.minimumLineSpacing = 1.0f;
flowlayout.itemSize = CGSizeMake(44, 44);
flowlayout.scrollDirection = UICollectionViewScrollDirectionVertical;

CGRect rect = CGRectMake(0, 0, 320, 600);
self.calendarGrids = [[UICollectionView alloc] initWithFrame:rect
                                          collectionViewLayout:flowlayout];
self.calendarGrids.delegate = self;
self.calendarGrids.dataSource = self;

self.calendarGrids.allowsSelection = YES;
self.calendarGrids.backgroundColor = [UIColor yellowColor];

[self.calendarGrids registerClass:[SSCalendarDayCell class]
         forCellWithReuseIdentifier:@"CalendarDayCell"];

[self addSubview:self.calendarGrids]; 
```

SSCalendarFlowLayout 是 UICollectionViewFlowLayout 的子类。对其进行子类化的原因是为了调试这个问题：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {

  NSArray *unfilteredPoses = [super layoutAttributesForElementsInRect:rect];
  for (UICollectionViewLayoutAttributes *pose in unfilteredPoses) {
    NSLog(@"%@", NSStringFromCGRect(pose.frame));
  }
  return unfilteredPoses;
} 
```

有趣的是，每个项目的 layoutAttributesForElementsInRect 输出都是正确的，如下面的控制台输出：

```
2012-11-12 23:42:59.275 Calendar[49367:c07] {{0, 22}, {44, 44}}
2012-11-12 23:42:59.275 Calendar[49367:c07] {{55.2, 22}, {44, 44}}
2012-11-12 23:42:59.276 Calendar[49367:c07] {{110.4, 22}, {44, 44}}
2012-11-12 23:42:59.278 Calendar[49367:c07] {{165.6, 22}, {44, 44}}
2012-11-12 23:42:59.278 Calendar[49367:c07] {{220.8, 22}, {44, 44}}
2012-11-12 23:42:59.279 Calendar[49367:c07] {{276, 22}, {44, 44}}
2012-11-12 23:42:59.279 Calendar[49367:c07] {{0, 76}, {44, 44}} 
```

但是为什么输出与 UICollectionViewFlowLayout 的框架集如此不同呢？模拟器和 iPhone 中的输出都是错误的。

我怀疑这是一个相关的错误：http: [//openradar.appspot.com/12433891](http://openradar.appspot.com/12433891) 但与这个错误不同的是，UICollectionViewFlowLayout 在每一行中错放了单元格，而不仅仅是第一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:47:52.220

问题解决了。我错过了单元格内的标签矩形。我在每个单元格中添加了一个 UILabel 的子视图，但是在这个问题中发生的事情是我配置了如下标签：

```
- (id) initWithFrame:(CGRect)frame {

  self = [super initWithFrame:frame];
  if (self) {

    self.dayLabel = [[UILabel alloc] initWithFrame:frame];
    [self.contentView addSubview:self.dayLabel];

  }
  return self;

} 
```

这绝对是错误的。我将框架集更正为： self.dayLabel = [[UILabel alloc] initWithFrame:(CGRect){CGPointZero, frame.size}]; 然后一切正常。不管怎么说，还是要谢谢你

# mysql - 使用 Capistrano 部署 Rails 时，“用户 'username'@'localhost' 的访问被拒绝（使用密码：YES）”

> ID：13346932
> 
> 赞同：4
> 
> 时间：2012-11-12T15:53:57.673
> 
> 标签：mysql, ruby-on-rails, capistrano

我正在建立一个运行 MySQL 的新 Ubuntu 服务器。我在我的开发服务器上设置了 Capistrano，并在运行 deploy:setup 后尝试 deploy:cold。部署脚本尝试运行后

```
executing "cd /home/adm1n/www/knowit/releases/20121112152400 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile" 
```

我不断收到此消息：

```
Rake Aborted!
Access denied for user 'specialusername'@'localhost' (using password: YES)
Tasks: TOP => environment 
```

我在 mysql 服务器上的数据库中为 localhost 和 % 创建了“特殊用户名”。我删除了用户数据库中的空用户 ' ' @ localhost 行。我已将服务器的 IP 地址添加到 my.cnf 文件并注释掉 127.0.0.1 行。

这是我用于生产的 deploy.rb 文件：

```
production:
adapter: mysql2
encoding: utf8
reconnect: false
database: mydatabasename
username: specialusername
password: crazypassword
socket: /tmp/mysql.sock
pool: 5
timeout: 5000 
```

我想我可能不明白这是如何工作的。在我的 Site5 服务器上，我不必指定从哪个主机访问 mysql。但在我所有的阅读中，似乎我必须指定一个特定的用户@主机名。如果我在旅​​行时从全国各地的许多不同地点进行部署，这就有点困难了。还是我只需要使用笔记本电脑的主机名，而不管我当前的 IP 地址如何？感谢您提供的任何见解和解决方案。我没有找到任何文章准确地为我提供了解决此问题所需的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:44:21.197

有两种方法可以连接到 MySQL 服务器。

首先，使用 UNIX 套接字，例如`/tmp/mysql.sock`，在这种情况下没有“主机”，因此身份验证使用`username@localhost`. 这仅适用于来自同一台机器的连接。

其次，使用 TCP/IP 连接。在这种情况下，服务器监听运行数据库的机器上的特定端口，连接方式是提供主机+端口号。端口号可以是可选的（将使用默认值），主机可以由主机名或 IP 地址给出。这允许本地或远程连接。

注意：我无法实际验证这一点（无法访问您的服务器），所以下面只是一个可能的解释......

在`mysql -u knowitdbadmin -p -h192.168.0.50`中，给定了一个主机 (-h)，因此使用了 TCP/IP，导致使用`username@hostname`或`username@%`规则进行身份验证，但这不会使用`username@localhost`.

在`mysql -u knowitdbadmin -p`中，没有给出主机 (-h)，因此使用默认的 UNIX 套接字，导致使用身份验证`username@localhost`（因此失败）。

如果您想使用 UNIX 套接字 (/tmp/mysql.sock) 和 username@localhost 禁用访问，并始终使用 TCP/IP 连接，请一直这样做： * 删除对 username@localhost 的授权（完成） * 始终在应用程序的配置文件中指定主机/IP（+ 端口）。

我认为问题在于：

```
socket: /tmp/mysql.sock 
```

尝试改用主机名 + 端口号。

附带说明一下，如果您以某种方式对数据库本身具有 SQL 访问权限，从 5.5 开始，一个新表`performance_schema.host_cache`将向您显示连接失败的所有原因，这可以在解决此类问题时节省大量时间。

# android - Android tabhost 中的向下钻取导航

> ID：13346936
> 
> 赞同：0
> 
> 时间：2012-11-12T15:54:29.990
> 
> 标签：android, android-listview, android-tabhost

我有一个 android tabhost，里面有一个 listview，当我点击一个 listviewitem 时，我想在 tablayout 中旧列表的位置显示一个新列表。我该如何实施？（我需要使用列表视图而不是片段）

![在此处输入图像描述](../Images/39c56aba105a347a41ec0759bc929b9f.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:40:55.217

我找到了一个解决方案：我在 tabhost 中放置了一个活动组，如下所示：

```
public class DrillDownWrapper extends ActivityGroup {
    private ArrayList<View> history;
    public static DrillDownWrapper group;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        history = new ArrayList<View>();
        group = this;

        //put the first listactivity
        Intent i = new Intent(DrillDownWrapper.this, ListActivity.class);
        View view = getLocalActivityManager().startActivity("ListActivity", i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)).getDecorView();
        replaceView(view);
    }

    public void replaceView(View v) {
        history.add(v);
        setContentView(v);
    }

    public void back() {
        if(history.size() > 1) {
            history.remove(history.size()-1);
            setContentView(history.get(history.size()-1));
        } else {
            finish();
        }
    }

    @Override
    public void onBackPressed() {
        DrillDownWrapper.group.back();
        return;
    }
} 
```

在 listactivity 中，您可以通过调用 getParent() 方法获取上下文（即显示对话框）

# jasper-reports - 根据区域设置和货币格式化货币值

> ID：13346939
> 
> 赞同：6
> 
> 时间：2012-11-12T15:54:39.340
> 
> 标签：jasper-reports, currency

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:03:18.467

ireport中有两个参数，REPORT_LOCALE和XML_LOCALE，可以帮忙

# azure - Azure InstanceEndpoints Not Populated in RoleEntryPoint's OnStart (SDK 1.8)

> ID：13346940
> 
> 赞同：1
> 
> 时间：2012-11-12T15:54:42.023
> 
> 标签：azure

A colleague of mine has the following working against SDK 1.7:

```
foreach (RoleInstance ri in RoleEnvironment.CurrentRoleInstance.Role.Instances)
{
    config.discovery.zen.ping.unicast.hosts.Add(ri.InstanceEndpoints["Endpoint1"].IPEndpoint.Address.ToString());
} 
```

When I execute the same against SDK 1.8 (osFamily=3), I notice that the InstanceEndpoints are not available by name for remote instances. The following variation, however, can still be used to determine the IP of the other instances:

```
foreach (RoleInstance instance in RoleEnvironment.CurrentRoleInstance.Role.Instances)
{
    if (!instance.InstanceEndpoints.ContainsKey("Endpoint1"))
       log.Error(string.Format("Instance {0} does not have Endpoint1 defined, has {1} endpoints in total.", instance.Id, instance.InstanceEndpoints.Count));

    if (instance.InstanceEndpoints.Count > 0)
       config.discovery.zen.ping.unicast.hosts.Add(instance.InstanceEndpoints[instance.InstanceEndpoints.Keys.First()].IPEndpoint.Address.ToString());
} 
```

I can't find any documentation that speaks to this behaviour and was hoping someone could explain it?

# javascript - How to use inline ternary with data-bind variable?

> ID：13346946
> 
> 赞同：0
> 
> 时间：2012-11-12T15:55:12.910
> 
> 标签：javascript, jquery, jquery-mobile, knockout.js

I'm currently creating a footer with Save/Cancel/Delete, depending on where the user is. Now I'm trying to not show/render the Delete button when it's not required. How to achieve this using a variable from KnockoutJS (observable) as the operator in a ternary?

Current code doesn't work properly but below anyway.

```
<li><a href="#" data-icon="back" data-theme="b" data-bind="click: cancelProduct">@(Global.ButtonCancel)</a></li>
<script>
    var button = "<li><a href=\"#\" data-icon=\"delete\" data-theme=\"b\" data-bind=\"click: deleteProduct\">@(Global.ButtonDelete)</a></li>";
    isEditingProduct ? button : false;
</script>
<li><a href="#" data-icon="check" data-theme="b" data-bind="click: saveProduct">@(Global.ButtonSave)</a></li> 
```

The error i keep getting is that "isEditingProduct" is undefined. When i use it inline (outside the script), for a straight `<li data-bind="isEditingProduct" ></li>` with the other stuff inside it works. It hides the button, but leaves me with a gaping hole in the footer. Which is why I'm trying to get around it by not loading it in for rendering at all if it's not yet needed.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:01:39.830

看看你的代码，我很困惑。

不知道为什么你觉得你需要一个三元来隐藏/取消隐藏元素。

使用**可见的：**绑定。

```
<li data-bind="visible: isEditingProduct"></li> 
```

isEditingProduct 必须是视图模型上的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:44:12.787

不确定“isEditingProduct”是在哪里定义的，但是如果不完全限定它，就不能简单地在 JavaScript 中引用视图模型的一部分。而是尝试：

```
myViewModel.isEditingProducts = true; 
```

此外，您的脚本块的位置令人困惑。它不应该在`<li />`标签之间内联。该脚本不一定会在那时执行（因为浏览器正在解析您的标记）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T16:01:07.270

You could use `visible` or `if` binding:

```
<li><a href="#" data-icon="back" data-theme="b" data-bind="click: cancelProduct">@(Global.ButtonCancel)</a></li>
<li><a href="#" data-icon="delete" data-theme="b" data-bind="click: deleteProduct, if: isEditingProduct">@(Global.ButtonDelete)</a></li>
<li><a href="#" data-icon="check" data-theme="b" data-bind="click: saveProduct">@(Global.ButtonSave)</a></li> 
```

Read documentation about these bindings:

[http://knockoutjs.com/documentation/if-binding.html](http://knockoutjs.com/documentation/if-binding.html)

[http://knockoutjs.com/documentation/visible-binding.html](http://knockoutjs.com/documentation/visible-binding.html)

# java - 在不违反基本 OOP 规则的情况下添加新功能

> ID：13346955
> 
> 赞同：0
> 
> 时间：2012-11-12T15:55:48.950
> 
> 标签：java, oop, design-patterns

我有一种情况，我需要扩展某些行为，但我不知道如何正确设计它。用户可以查看所有报告的列表。报告现在是简单的 POJO

```
class Report {
  ...
} 
```

有一组可以在给定报告上调用的操作。现在有一个要求，对于某些报告，他们应该定义允许的操作。例如，您可以在 ReportOne 上运行“ActionA”和“ActionB”，在 ReportTwo 上只运行“ActionB”，在 ReportThree 上运行所有动作（如现在一样）。报告的可见性也受到限制，因此如果没有足够的权限，某些用户将无法查看给定的报告。

我正在考虑创建报告的子类，如下所示：

```
class ReportWithCustomActionsAllowed extends Report {
  private Set<Action> allowedActions;
  public Set<Actions> getAllowedActions() {
    return actions;
  }
  ....
}

class ReportWithPermission extends Report {
  ...
  private String permissionName = "ReportA.VIEW";
  public boolean canShowTo(User user) {
    return user.hasPermission(permissionName);
  }
} 
```

我在这里看错了两件事：

1) 如果不创建另一个类，就不可能创建允许自定义操作的受限报告

2）让`Set<Report>`我不能在不破解它的情况下限制行动/报告，`instanceof`这显然是错误的。

我怎样才能在正确完成 OOP 的情况下实现这一要求？并非每个报告都应该关心权限，并且报告可以包含允许的空操作列表（这意味着任何人都无法访问操作。这并不意味着允许所有操作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:30:22.490

对于这些操作，您可能会采用“[责任链](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)”设计模式。

对于访问权限，通常的方法不是让报告关心权限，而是让报告关心权限，而是有一个外部安全管理器，它维护一个允许谁做什么的列表，并且当调用一个操作时，检查角色是否正在调用该操作是允许的。这实际上是一件相当复杂的事情，因此如果您想要更好的建议，您可能希望更准确地指定您的安全要求有多广泛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T16:05:51.227

我不确定全部细节，但我会选择一个抽象类`Report`并拥有一个抽象方法`getActions(User user)`并让该方法抛出一个`UserAccessException`或类似的东西。

```
abstract class Report {

abstract public Set<Action> getActions(User user) throws UserAccessException;

} 
```

# c++ - 使用 Qt 库的 C++ 应用程序在屏幕保护程序启动时停止工作

> ID：13346956
> 
> 赞同：2
> 
> 时间：2012-11-12T15:55:56.487
> 
> 标签：c++, windows, qt, crash, screensaver

我有一个使用一些 Qt 库的 C++ 应用程序。该应用程序工作正常，直到屏幕保护程序弹出并启动。之后，如果我退出屏幕保护程序，应用程序就会崩溃，我必须重新启动它。我已经在 Windows 7 和 XP 上测试了该应用程序，并且两者都发生了这种情况。

有什么我可以在代码中改变的，所以这不会发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T15:11:00.950

Luca Carlon 给了你很好且相当流行的建议——使用调试器。[在您的情况下，您可以从官方文档](http://doc.qt.digia.com/qtcreator/creator-debugging.html)中获得大量有关调试的信息。

当你调试你的程序时，你必须重播你的程序掉下来的情况：你必须手动启动屏保，或者快点启动屏保。

当您的程序失败时——进行回溯，并尝试了解哪里出了问题。

# webdav - 根本无法访问 CloudBees WebDAV

> ID：13346957
> 
> 赞同：1
> 
> 时间：2012-11-12T15:56:05.373
> 
> 标签：webdav, cloudbees

使用 Mac (Mountain Lion) 尝试连接到我的 CloudBees WebDAV 存储库，使用我的帐户名 (drcadmin) 使用服务器地址“https://repository-drcadmin.forge.cloudbees.com/private/”

当我被要求输入我的帐户用户名和密码时，我收到一条错误消息：“连接到服务器 'repository-drcadmin.forge.cloudbees.com' 时出现问题。\ 检查服务器名称或 IP地址，然后重试。如果仍有问题，请联系您的系统管理员。”。我只是没有运气连接到我们的私人 WebDAV 存储库。我的理解是这*应该*有效......但它没有。

我目前有一个免费帐户——我是否需要一个付费帐户才能“启用”此功能？还是我只是做错了什么？（如果我做错了什么，有什么线索可以解决它吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:13:10.373

不，它可以免费使用。

关于如何设置的规范文章在这里：http: [//developer.cloudbees.com/bin/view/DEV/CloudBees+Maven+Repository+-+Mounting](http://developer.cloudbees.com/bin/view/DEV/CloudBees+Maven+Repository+-+Mounting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T15:09:27.873

我发现这些链接很有帮助：

*   [http://developer.cloudbees.com/bin/view/DEV/Accessing+under+an+external+Maven+repository](http://developer.cloudbees.com/bin/view/DEV/Accessing+under+an+external+Maven+repository)
*   [http://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors](http://wiki.cloudbees.com/bin/view/DEV/Sharing+Files+with+Build+Executors)

具体来说：

1.  检查您是否可以访问`Repositories > Maven repositories > Private`- [https://forge.cloudbees.com/a/](https://forge.cloudbees.com/a/) {yourid}/repositories/private
2.  检查下的配置`Details`并`Security`正确。

# php - 使用 php exec 从导出的 sql 创建 mysql db

> ID：13346960
> 
> 赞同：1
> 
> 时间：2012-11-12T15:56:14.197
> 
> 标签：php, mysql, sql, exec

我要做的就是从 phpmyadmin 创建的转储中创建一个新数据库。这个转储位于：/var/www/iadmin/wikifresh/db/template.sql 并且永远不会改变。

我运行了一次这个命令，数据库创建得很好

```
mysql test < /var/www/iadmin/wikifresh/db/template.sql 
```

它创建了数据库。因此，我将该脚本放在 php exec 命令中：（注意：$wikiname 是正在创建的新 wiki 的名称）

```
$dbwikiname = escapeshellarg($wikiname);
exec("mysql $dbwikiname < /var/www/iadmin/wikifresh/db/template.sql"); 
```

现在，当这个脚本运行时，我得到：

```
ERROR 1049 (42000): Unknown database 'test' 
```

即使我尝试从命令行运行它，我也会遇到这个问题。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:01:36.490

似乎您没有在该机器的 MySQL 服务器中创建数据库“test”，并且 template.sql 没有“CREATE DATABASE”命令。因此，您必须先创建它，或者将“CREATE DATABASE”添加到 template.sql

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T16:02:01.377

要`mysql`使用默认数据库名称调用，该数据库必须存在。

一些 MySQL 发行版恰好附带了一个名为 的数据库`test`，这解释了为什么您的命令一开始就成功了。有人假设您已经删除了该数据库？在尝试选择它之前，您需要重新创建它：

```
CREATE DATABASE IF NOT EXISTS test; 
```

当然，您可以将上述命令`USE test;`放在`template.sql`文件顶部，然后在`mysql`不指定默认数据库的情况下调用。

# excel - Excel中的自动条形图

> ID：13346965
> 
> 赞同：0
> 
> 时间：2012-11-12T15:56:28.897
> 
> 标签：excel, bar-chart

我想根据一组值在 Excel 中自动创建一个条形图。假设我在一列中有以下无序数据：

谁？：{好，坏，丑，坏，丑}

然后我想得到一个只包含一个条的条形图：

```
[ 20% "the good" |        40% "the bad"           |         40% "the ugly"      ] 
```

有谁知道我怎么能做到这一点？理想情况下，甚至会有一种添加图例的方法，可以添加另一个从未命名的值。例如，上述数据集的图例可能如下所示：

*   20% 好
*   40% 坏的
*   40% 丑的
*   0% 麦克吉弗

非常感谢任何正确方向的帮助或指示谢谢mischa

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:38:27.003

对于一个项目，我曾经创建了一个动态甘特图。这可能是您的解决方案。[http://www.youtube.com/watch?v=Z9uWmFWUD5c&feature=relmfu](http://www.youtube.com/watch?v=Z9uWmFWUD5c&feature=relmfu)

否则，如果“条”的增量为 10%，您可以在 10 个单元格中使用条件格式...

# ios - ios phonegap 环境不工作

> ID：13346969
> 
> 赞同：0
> 
> 时间：2012-11-12T15:56:46.177
> 
> 标签：ios, cordova

我已经在 Eclipse 中实现了一个带有 phonegap for android 的基本示例。比我去 ios 环境。我已经下载了 cordova 插件并创建了一个新项目。然后我用我为android创建的www文件夹替换了www文件夹。索引 html 文件如下所示：

```
<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv=content-type content=text/html charset="utf-8">
    <title>navigator.network.connection.type Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    // 
   // document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //

    function helloworld() {
                console.log('phone gap log...');
        alert('Hello World'); 

    }

  </script>
  <script src="http://debug.phonegap.com/target/target-script-min.js#anonymous"></script>
  </head>
  <body background="login.png">

  <img alt="" src="login_logo.png" STYLE="position:absolute;LEFT:25px">
    <form STYLE="position:absolute;TOP:175px; LEFT:65px; WIDTH:100px; HEIGHT:50px" >
        Kullanıcı Adı:<br> <input type="text" id="uname" ><br>
        Şifre:<br> <input type="text" id="pword"><br>
    </form>
    <button type="submit"  onclick="helloworld()" STYLE="position:absolute;TOP:295px; LEFT:110px; WIDTH:100px; HEIGHT:50px" >GİRİŞ</button>
  </body>
</html> 
```

屏幕风格与安卓相同。但是当我按下提交按钮时，我没有任何操作或没有登录 xcode 或 ios 模拟器。但它适用于android和eclipse。为什么我的简单代码在 ios 环境下不起作用？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T21:20:33.363

该`onclick`事件在 Web 视图中不可靠。您需要改用`ontouchstart`其他事件侦听器。[Apple 文档](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)列出了支持的触摸事件。

因此，在您的情况下，您必须将其更改为`button`以下内容：

```
<button type="submit"  ontouchstart="helloworld()" STYLE="position:absolute;TOP:295px; LEFT:110px; WIDTH:100px; HEIGHT:50px" >GİRİŞ</button> 
```

# jquery - Firefox 本地 ajax 调用

> ID：13346973
> 
> 赞同：0
> 
> 时间：2012-11-12T15:56:52.627
> 
> 标签：jquery, firefox

我已经实现了在[此处](https://stackoverflow.com/questions/436670/local-html-file-ajax-call-and-jquery-woes)找到的解决方案，但它在 Firefox 中不起作用。

~~IE 很好地加载和读取 XML 文档~~Strike 指出，如果数据类型是“字符串”，则数据变量保存 XML，但将其加载到 xml 变量中会返回以下相同的函数。XML 文件是一个平面文件，存储在与 HTML 文件相同的文件夹中。该文件是从 运行的`"file:///D:/..."`，而不是从网络服务器运行的。

**Firefox**版本是**16.0.2**，我尝试过**jquery 1.7.1 和 1.8.2**。我做了一个`dataType`比较，数据不是`XML`，只是说`Object`。

我做了一个警报`$(data).contents`并得到：

```
function (c, d) {
    var e = p.map(this, b, c);
    return bc.test(a) || (d = c), d && typeof d == "string" && (e = p.filter(d, e)), e = this.length > 1 && !bg[a] ? p.unique(e) : e, this.length > 1 && bd.test(a) && (e = e.reverse()), this.pushStack(e, a, k.call(arguments).join(","));
} 
```

我尝试设置`security.fileuri.strict_origin_policy`为**false**，但这没有效果。

这是代码：

```
$.ajax({
        url: "COBIE.xml",
        dataType: ($.browser.msie) ? "text" : "xml",
        success: function (data) {
            if (typeof data == "string") {
                xml = new ActiveXObject("Microsoft.XMLDOM");
                xml.async = false;
                xml.loadXML(data);

                // Returned data available in object "xml"
                setMessage("XML date has been loaded");
            } else if (typeof data == "xml") {
                xml = data;
                alert($(xml).contents);
                // Returned data available in object "xml"
                setMessage("XML date has been loaded");
            } else {
                alert($(data).contents);
                setMessage("I have no idea what data you're trying to load");
            }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            setMessage(errorThrown);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:40:09.147

如果您安装了[Firebug](http://getfirebug.com/)，您可以使用 F12 查看页面的 HTML，以及访问控制台。

然后，您可以像这样使用 console.debug，而不是使用 alert 来查看 $(data).contents

```
console.debug($(data).contents); 
```

我不确定我是否确切地知道您的问题的答案，但这应该可以让您更好地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:20:59.377

代码工作正常。我的 XML 中有一些有趣的东西，所以我无法正确解析它，但它没有给出错误。它现在正在工作。

# ios - 故事板中的自定义单元格不为零

> ID：13346977
> 
> 赞同：0
> 
> 时间：2012-11-12T15:57:05.783
> 
> 标签：ios, uitableview

我在 StoryBoard 内的 UITableView 中创建了一个自定义单元格，但它始终返回值不是 NULL(NIL)

```
eg: CustomCell *cell = (CustomCell *)[tblView dequeueReusableCellWithIdentifier:identifier];
NSLog(@"%@",cell);

it return --> <CustomCell: 0x8352480; baseClass = UITableViewCell; frame = (0 0; 320 84); opaque = NO; autoresize = RM+BM; autoresizesSubviews = NO; layer = <CALayer: 0x834f680>> 
```

我不知道为什么，我认为当单元格不值时 customCell 返回 nil ；

有人说为什么，为什么 customCell 不是 nil

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T13:34:01.840

因为从情节提要中，当您调用 dequeReuseableCellWithIdentifier: 时，如果重用队列中没有单元格，它将创建单元格。

所以你总是通过调用这个方法得到一个单元格，而不是一个零。

# r - 将日期附加到使用 Sweave 生成 的 PDF

> ID：13346979
> 
> 赞同：2
> 
> 时间：2012-11-12T15:57:18.793
> 
> 标签：r, sweave

我通过 Sweave 生成​​每日报告。我想以 YYYYMMDD 格式将当前日期附加到 PDF 的名称中。我正在使用以下代码生成文件：

```
rnwfile <- system.file("Sweave", "Margin.Rnw", package = "utils")
Sweave(rnwfile)
tools::texi2pdf("Margin.tex") 
```

Margin.Rnw 是我想要生成的报告的主副本（将 LaTeX 与 R 代码混合）。我得到的输出是文件*Margin.pdf*。我希望有一个名为 *Margin_YYYYMMDD.pdf* 的文件。如果您有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:36:53.117

请参阅 的`output`论点`?RweaveLatex`。

这是未经测试的，但应该（？）工作：

```
rnwfile <- system.file("Sweave", "Margin.Rnw", package = "utils")
outfn <- paste0("Margin_",format(Sys.time(),"%Y%m%d"),".tex")
Sweave(rnwfile,output=outfn)
tools::texi2pdf(outfn) 
```

# python - Flask-Script 的优点是什么？

> ID：13346980
> 
> 赞同：2
> 
> 时间：2012-11-12T15:57:39.547
> 
> 标签：python, flask

我正在编写一个需要 cron 作业的相当简单的[Flask应用程序。](http://flask.pocoo.org/)现在，我有一个单独的模块，可以从我的应用程序模块中导入它需要的类。这似乎工作得很好。

我偶然发现了[Flask-Script](http://flask-script.readthedocs.org/en/latest/)，我想知道为什么会在我现在拥有的解决方案上使用它。请记住，我是 Flask 的新手，谁能解释一下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T16:13:29.420

它似乎是一个辅助模块。它只是为您提供了一个不错的“路由器”，用于命令行命令而不是 URL。

它更方便并且（更重要的是）更容易阅读代码的意图。- 特别是对于非平凡的情况（> 200loc）

# wpf - WPF自动注销挂机减慢GUI

> ID：13346985
> 
> 赞同：1
> 
> 时间：2012-11-12T15:57:53.683
> 
> 标签：wpf, hook

我想在我的 WPF 应用程序中使用自动注销功能，并使用挂钩实现了它。但是，每当鼠标悬停在应用程序上时，性能就会冻结、降级并变得无法忍受地无响应。一旦鼠标离开窗口，性能就会恢复正常。如果我关闭自动注销，性能总是很好，所以肯定是这个原因。知道如何做不同的事情来避免这种情况吗？

```
private void InitializeAutoLogoffFeature()
        {
            //var windowSpecificOSMessageListener = HwndSource.FromHwnd(new WindowInteropHelper(this).Handle);
            //if (windowSpecificOSMessageListener != null)
            //    windowSpecificOSMessageListener.AddHook(CallBackMethod);

            //AutoLogOffHelper.LogOffTime = _viewModel.logOffTime;
            //AutoLogOffHelper.MakeAutoLogOffEvent += AutoLogOffHelper_MakeAutoLogOffEvent;
            //AutoLogOffHelper.StartAutoLogoffOption();
            AutoLogOffHelper
        }

private static IntPtr CallBackMethod(IntPtr hwnd, int msg, IntPtr wParam, IntPtr lParam, ref bool handled)
        {
            try
            {
                //  Listening OS message to test whether it is a user activity
                if ((msg >= 0x0200 && msg <= 0x020A) || (msg <= 0x0106 && msg >= 0x00A0) || msg == 0x0021)
                {
                    AutoLogOffHelper.ResetLogoffTimer();
                }
                else
                {
                    // For debugging purpose
                    // If this auto logoff does not work for some user activity, you can detect the integer code of that activity  using the following line.
                    //Then All you need to do is adding this integer code to the above if condition.
                    Debug.WriteLine(msg.ToString());
                }
            }
            catch (Exception ex)
            {
                MessageHelper.LogError(ex);
            }

            return IntPtr.Zero;
        }

class AutoLogOffHelper
    {
        static System.Windows.Forms.Timer _timer;
        public static int LogOffTime { get; set; }

        public delegate void MakeAutoLogOff();
        static public event MakeAutoLogOff MakeAutoLogOffEvent;

        static public void StartAutoLogoffOption()
        {
            System.Windows.Interop.ComponentDispatcher.ThreadIdle += DispatcherQueueEmptyHandler;
        }

        static void _timer_Tick(object sender, EventArgs e)
        {
            if (_timer == null) return;

            System.Windows.Interop.ComponentDispatcher.ThreadIdle -= DispatcherQueueEmptyHandler;
            _timer.Stop();
            _timer = null;

            if (MakeAutoLogOffEvent != null)
            {
                MakeAutoLogOffEvent();
            }
        }

        static void DispatcherQueueEmptyHandler(object sender, EventArgs e)
        {
            if (_timer == null)
            {
                _timer = new System.Windows.Forms.Timer
                             {
                                 Interval = LogOffTime * 60 * 1000
                             };

                _timer.Tick += _timer_Tick;
                _timer.Enabled = true;
            }
            else if (_timer.Enabled == false)
            {
                _timer.Enabled = true;
            }
        }

        static public void ResetLogoffTimer()
        {
            if (_timer == null) return;
            _timer.Enabled = false;
            _timer.Enabled = true;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:01:56.820

试着带你`debug.writeline`出去——它*很*慢，因为你可能要处理很多事件，这很容易成为问题。

如果做不到这一点，您是否尝试过使用分析器查看正在消耗资源的内容？

# jakarta-ee - Liferay Portal 6.0 CE：骨架中缺少 src 文件夹和 web.xml

> ID：13346988
> 
> 赞同：0
> 
> 时间：2012-11-12T15:58:05.460
> 
> 标签：jakarta-ee, liferay, liferay-6, liferay-ide, skeleton-code

我使用 Liferay Portal 6.0 CE 和 SDK6.0.6 进行 portlet 开发。

要创建目录结构，我使用以下命令：

```
create.bat <project name> "<portlet title>" 
```

但是，不会创建“src”目录和“web.xml”。我只看到“类”目录。

我知道目录结构应该如下：

![在此处输入图像描述](../Images/3cdd53d59498c57a94d8a3896dd246bf.png)

如果我在“src”目录中添加一个类，我会在构建时得到以下信息：

```
build-common-plugin.xml:347 ...
build-common.xml:90 ... 
```

一些 Ant 任务是从“build-common-plugin.xml”中调用的，它引用了“scr”目录：

```
<mkdir dir="docroot/WEB-INF/client/src" /> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T17:54:44.440

请检查`\tools\portlet_tmpl`sdk 中的文件夹。它包含创建新 portlet 的模板。

您可以在`src`此处拥有您的文件夹，并且所有其他后续 portlet 都将拥有 src 文件夹。

# javascript - 取消注册 Dojo 小部件

> ID：13346989
> 
> 赞同：2
> 
> 时间：2012-11-12T15:58:22.213
> 
> 标签：javascript, dojo

如何销毁包含在 DIV 中的所有小部件？如果封闭元素是 dojo 小部件（例如表单），则附加代码可以很好地工作。
重申一下，如何取消注册包含在 DOM 元素（如 DIV）中的所有小部件。

```
require(["dojo/ready"], function(ready) {
        ready(function(){
         var parentNode = dijit.byId('enclosingDivId');
            if (parentNode) {
               parentNode.destroyRecursive(true);
            }
        });
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:50:26.273

根据[dijit/registry](http://dojotoolkit.org/reference-guide/1.8/dijit/registry.html#finding-all-widgets-underneath-a-dom-node)文档，我建议您执行以下操作：

```
require(["dojo/_base/array", "dijit/registry"], function(arrayUtil, registry){
    var formWidgets = registry.findWidgets(someNode);
    formWidgets.forEach(function (widget) {
        widget.destroyRecursive();
    }); 
}); 
```

# windows-8 - 如何更改 Win8 应用的发布日期？

> ID：13346992
> 
> 赞同：0
> 
> 时间：2012-11-12T15:58:39.967
> 
> 标签：windows-8

有谁知道如何更改 Windows 8 应用商店应用的发布日期？我的应用程序已获得批准，但我无法像在 iTunes Connect 中那样提前发布日期。

![在此处输入图像描述](../Images/9f2dbdaa719da066b83b17cf1bf30708.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T16:04:00.133

抱歉，您不能更改日期，您可以取消发布并再次提交认证（将需要另外 5 - 6 天），并且这次不要忘记选择正确的日期。您也可以尝试联系客户支持，但不确定这是否会有所帮助。

# vim - ¬ 在 vi m 中每一行的末尾

> ID：13346993
> 
> 赞同：1
> 
> 时间：2012-11-12T15:58:40.630
> 
> 标签：vim, macvim

这可能是一个愚蠢的问题，但我找不到答案。那么，如何在 vim 文件的每一行末尾添加 ¬ 呢？它更多的是关于样式，避免尾随空格等，比如这个颜色方案：http: [//ethanschoonover.com/solarized/img/solarized-dualmode.png](http://ethanschoonover.com/solarized/img/solarized-dualmode.png)

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T16:05:31.830

```
set list
set listchars+=eol:¬ 
```

见`:help 'list'`和`:help 'listchars'`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T16:01:36.000

如果您输入：

```
:set list 
```

那么 vi 应该向您显示每行的末尾带有一个`$`字符。假设您想要的只是捕获尾随空格，那就可以了。然后，您可以使用以下命令将其关闭：

```
:set nolist 
```

它实际上还为您提供了其他功能，例如使选项卡可见，在尝试跟踪 Python 缩进问题时非常方便，或者由于不同的选项卡宽度设置而打印不同的内容。

当然，如果您希望删除行尾的空白，您可以在替代命令中使用正则表达式：

```
:g/  *$/s///g 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T16:06:31.550

```
:set list listchars+=eol:¬ 
```

或者，如果您只是对查看尾随空格感兴趣，可以使用：

```
:set list listchars+=trail:∙ 
```

# c# - 性能计数器返回 0

> ID：13346995
> 
> 赞同：0
> 
> 时间：2012-11-12T15:58:47.790
> 
> 标签：c#, performancecounter

我知道这个问题已经重复了很多次，但是当我遵循每个人的建议时，它并没有让我无所适从。我有以下代码，但是当我尝试获取以下计数器的值时，我只会得到 0：

```
private PerformanceCounter _AvgMS_Req = 
    new PerformanceCounter("Forefront TMG Web Proxy", "Average Milliseconds/request");
private PerformanceCounter _Avg_Req_Spd = 
    new PerformanceCounter("Forefront TMG Web Proxy", "Average request speed");

private void timer1_Tick(object sender, EventArgs e)
{
    _AvgMS_Req.NextValue();
    _Avg_Req_Spd.NextValue();
    Thread.Sleep(1000);

    Avg_MS_Req.Text = _AvgMS_Req.NextValue().ToString("0");
    Avg_Req_spd.Text = _Avg_Req_Spd.NextValue().ToString("0");
} 
```

在将值打印在标签上之前，我已经运行了一次代码，但它仍然没有帮助。即使我从代码中删除这几行也无济于事：

```
_AvgMS_Req.NextValue();
_Avg_Req_Spd.NextValue();
Thread.Sleep(1000); 
```

# java-me - 在 J2ME 中通过 Parse XML 列出菜单

> ID：13346997
> 
> 赞同：0
> 
> 时间：2012-11-12T15:58:54.193
> 
> 标签：java-me, kxml

我想从 XMLFile 创建菜单。我的xml是这样的

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<parent title="Layanan Anda">
    <menu title="Info Kartu">
        <submenu title="Informasi Saldo">
            <input type="numberpassword" length="4">Kode </input>
        </submenu>
        <submenu title="Mutasi Kartu Utama">
            <input type="numberpassword" length="4">Kode </input>
        </submenu>
        <submenu title="Mutasi Kartu Lain">
            <input type="number" length="10">Kartu</input>
            <input type="numberpassword" length="4">Kode </input>
        </submenu>
        <submenu title="Deposito">
            <input type="number" length="10">Bilyet</input>
            <input type="numberpassword" length="4">Kode </input>
        </submenu>
    </menu>
    <menu title="Kartu Anda">
    </menu>
    <menu title="Other Info">
    </menu>
    <menu title="Isi">
    </menu>
</parent>
<parent title="Menu Favorit">
</parent>
<parent title="Recent Menu">
</parent>
<parent title="Setting">
</parent>    
</root> 
```

在 HomeScreen 中，列表菜单父级将首先显示。当我单击父菜单时，应用程序将从“菜单”标签显示列表菜单。当我再次单击菜单时，应用程序将显示子菜单中的列表菜单。当我想返回父菜单时反之亦然。

我如何在 J2ME 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:51:08.337

解析您的 XML 文件并创建一个树结构来保存菜单/子菜单项。每个节点应该保存一个级别的项目。例如：

*   根：Layanan Anda，菜单收藏夹，最近的菜单，设置

    *   menu: Info Kartu, Kartu Anda, Other Info, Isi
        *   submenu: Informasi Saldo, Mutasi Kartu Utama, Mutasi Kartu Lain, Deposito

然后使用图形列表来显示节点的项目。