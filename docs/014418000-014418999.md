# StackOverflow 问答 14418000-14418999

# php - 如何在php中获取另一个页面中的链接ID

> ID：14418002
> 
> 赞同：0
> 
> 时间：2013-01-19T19:27:24.113
> 
> 标签：php, mysql

单击链接后，我喜欢在 show.php 文件中捕获以下标记的 id ...我已经在 show.php 中获得了 href 名称

```
<?php

if (isset($_GET['submit'])) {
  $choice=$_GET['prod'];

  $dbc=mysqli_connect('localhost','root','','online_shopping') or die('Connection Error');

  $query1="SELECT name, id from ".$choice; $result1=mysqli_query($dbc,$query1) or die('Error querying Database');

  echo "<h1>List of available products in your category</h1><hr>"; 

  while($row = mysqli_fetch_array($result1)) { 
    $id=$row['id'];
?>
<a style="font-size:18px; text-decoration:none; text-align:center; color:#09F;" href="show.php?ref=<?php echo $row['name'];?>" id="<?php echo $id;?>"><?php echo $id;echo '.'.$row['name']; echo '</a>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:31:51.603

该`id`属性仅在客户端使用，因此没有使用 JavaScript 来修改 URL——你不能。

首先将数据放在 URL 中……并在将数据添加到 URL 和 HTML 时保持一定的安全性。

```
<a href="show.php?ref=<?php 
  echo htmlspecialchars(urlencode($row['name']));
?>&id=<?php 
  echo htmlspecialchars(urlencode($id));
?>" 
id="<?php 
  echo htmlspecialchars($id);
?>"><?php 
  echo htmlspecialchars($id) . '.' . htmlspecialchars($row['name']); 
?></a> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T19:29:20.130

我相信你正在寻找`$_GET`.

```
<?php

   //show.php?ref=5&id=10

   echo $_GET['ref'];
   //5

   echo $_GET['id'];
   //10

?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T19:31:39.230

```
<?php echo $_GET["id"]; ?> 
```

# ruby-on-rails - 合并两个字符串

> ID：14418004
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:27:27.710
> 
> 标签：ruby-on-rails, ruby, string

> **可能重复：**
> [字符串连接和 Ruby](https://stackoverflow.com/questions/377768/string-concatenation-and-ruby)

我想在导轨中组合两个字符串。我的数据库是 Postgre，我希望字符串 first_name 和 last_name 成为一个名为 full_name 的字符串。

我怎样才能最好地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T19:33:09.500

```
class User < ActiveRecord::Base

  def full_name
    "#{first_name} #{last_name}"
  end
end 
```

# sql-server - SQL Server：基于分隔符拆分值并在运行时匹配

> ID：14418005
> 
> 赞同：0
> 
> 时间：2013-01-19T19:27:30.933
> 
> 标签：sql-server, split

我有 2 个简化表（所有列都是`varchar`）。F2 中的某些行`T1_TAB`包含多个由 分隔的值`;`，有些根本没有分隔符，如下所示（有时也`;`可能出现在开头和/或结尾处）。F2 in`T2_TAB`始终只有一个值。

我需要能够根据一个表中的单个选择和 F2 列上的可能性从以太表中提取行。

T1_TAB

```
F0   |  F2
--------------
1          ;30
2       ;10;20;30
3          ;20;30;
4          10 
```

T2_TAB

```
F1   |  F2
-------------
100       10    
200       20      
300       30 
```

我可以：

```
SELECT T1.F0
FROM T1_TAB T1 
LEFT JOIN T2_TAB T2
ON T2.F2 LIKE '%' + T1.F2 + '%'
WHERE T2.F1 = '200' 
```

这将导致结果：

```
2
3 
```

现在，我需要做相反的事情。例如：

根据条件`WHERE T1.F0 = 3`，我需要从 F1 分别等于 200 和 300 的 T2 行中提取。我想我需要以某种方式拆分 ;20;30; 用“;” 并在运行时执行循环以分别匹配每个值，而忽略空白标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:05:29.787

您可以创建一个函数，将分号分隔的字符串转换为值表：

```
create function CreateTableFromList(@Values varchar(1000))
returns @table table (id int)
as
begin
declare @p int = 1, @q int = 1, @n int = len(@Values)

while @p<@n begin
  set @q = CHARINDEX(';',@Values,@p)
  if @q=0 set @q=@n + 1
  if @q > @p 
    insert into @table values (cast(substring(@Values,@p,@q-@p) as int))
  set @p= @q + 1
end
return
end 
```

进而

```
select T2.F1 
  from T2
where T2.F2 in (
  select ID 
    from T1 
         cross apply dbo.CreateTableFromList(T1.F2) 
  where T1.F0=3
  ) 
```

# mysql - Ruby + MySQL 错误连接到本地主机上的数据库

> ID：14418009
> 
> 赞同：1
> 
> 时间：2013-01-19T19:27:41.070
> 
> 标签：mysql, ruby

我正在处理这几天，无法连接到本地主机上的简单 mysql 数据库。

```
require "mysql"

@db_host = "localhost"
@db_user = "myrubyapp"
@db_pass = "1234"
@db_name = "myrubyapp"

mysql = Mysql.new(:host => @db_host, :username => @db_user, :password => @db_pass, :database => @db_name) 
```

我得到的输出是一个错误：`can't convert Hash into String (TypeError)`在哪里`Mysql.new`。

第二个，我尝试将gem改为mysql2

```
require "mysql2"

@db_host = "localhost"
@db_user = "myrubyapp"
@db_pass = "1234"
@db_name = "myrubyapp"

mysql = Mysql2.new(:host => @db_host, :username => @db_user, :password => @db_pass, :database => @db_name) 
```

输出也是一个错误，但与第一个不同：`undefined method "new" for Mysql2:Module (NoMethodError)`.

伙计们，很抱歉我不得不问这种问题，但我真的很困惑，我在 JavaSE 和 EE 方面有超过 3 年的编程经验，我很惭愧，因为我无法应对。请指出我正确的方向，不要严厉评判我。我是红宝石的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:43:52.680

尝试

```
mysql = Mysql2::Client.new(:host => @db_host, :username => @db_user, :password => @db_pass, :database => @db_name) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T19:44:04.723

正确的语法是：

```
client = Mysql2::Client.new(:host => "localhost", :username => "root") 
```

有关更多示例，请参见[github 上的 mysql2](https://github.com/brianmario/mysql2#usage)

我建议您看一下[Sequel](http://sequel.rubyforge.org/)，因为原始 mysql2 lib 提供的功能非常有限，而 Sequel 可以做很多事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T19:47:53.330

从未使用过 gem mysql，但您是否尝试过删除哈希 :host => 等并直接传递参数列表？
类似`con = Mysql.new db_host, db_user, db_pass, db_name`
[http://zetcode.com/db/mysqlrubytutorial/](http://zetcode.com/db/mysqlrubytutorial/)的教程

# android - 嵌套的 glPushMatrix 不起作用（堆栈大小为 1？）

> ID：14418010
> 
> 赞同：1
> 
> 时间：2013-01-19T19:27:43.753
> 
> 标签：android, opengl-es, projection-matrix

我有使用旧 OpenGL ES 1 的 Android 项目。我正在使用这种嵌套调用：

```
...
gl.glPushMatrix();
...
gl.glPushMatrix();
...
gl.glPopMatrix();
...
gl.glPopMatrix();
... 
```

它在模拟器和我的手机上运行良好，但在我的选项卡和我兄弟的选项卡上不起作用（对象的位置错误）。根据我的测试，似乎不支持嵌套的 glPushMatrix ，就像堆栈大小只有 1 一样，所以第一个 POP 不会返回到之前的 PUSH 状态，而是返回到第一个 PUSH 状态。我尝试了不使用嵌套调用的解决方法，它工作正常，但这样的解决方案使我的下一个工作复杂化。那是已知的事情吗？某些设备上的堆栈大小是否只有 1？我认为它应该至少是 32 或类似的东西。它是否以某种方式可检测和/或可配置？我可以以某种方式将矩阵导出到某个数组或不同的结构中以创建自己的堆栈并手动从中加载吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:43:47.050

您可以使用以下命令读取堆栈的深度：

```
glGetIntegerv(GL_MAX_MODELVIEW_STACK_DEPTH, &result); 
```

它确实应该至少是 32。

这是假设您实际上正在使用 GL_MODELVIEW 矩阵堆栈，并且您不会不小心将所有转换推入 GL_PROJECTION 或其他东西。

理想情况下，您应该自己计算矩阵，因为此功能已被弃用。

# python - 变量赋值：保持形状

> ID：14418013
> 
> 赞同：0
> 
> 时间：2013-01-19T19:28:15.657
> 
> 标签：python, numpy

...最好直接显示代码。这里是：

```
import numpy as np
a = np.zeros([3, 3])
a
array([[ 0., 0., 0.],
       [ 0., 0., 0.],
       [ 0., 0., 0.]])
b = np.random.random_integers(0, 100, size = (1, 3))
b
array([[ 10,  3,  8]])
c = np.random.random_integers(0, 100, size = (4, 3))
c
array([[ 22, 21, 14],
       [ 55, 64, 12],
       [ 33, 85, 98],
       [ 37, 44, 45]])
a = b  will change dimensions of a
a = c  will change dimensions of a 
```

对于 a = b，我想要：

```
array([[ 10.,  3.,  8.],
       [  0.,  0.,  0.],
       [  0.,  0.,  0.]]) 
```

对于 a = c，我想要：

```
array([[ 22, 21, 14],
       [ 55, 64, 12],
       [ 33, 85, 98]]) 
```

所以我想锁定“a”的形状，以便在必要时“裁剪”分配给它的值。当然没有 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:40:19.027

您可以使用[Numpy slice notation](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)轻松做到这一点。[这](https://stackoverflow.com/questions/509211/the-python-slice-notation)是一个很好的答案的问题，可以清楚地解释它。本质上，您需要确保左侧数组和右侧数组的形状匹配，您可以通过对相应数组进行适当的切片来实现这一点。

```
import numpy as np
a = np.zeros([3, 3])
b = np.array([[ 10,  3,  8]])
c = np.array([[ 22, 21, 14],
       [ 55, 64, 12],
       [ 33, 85, 98],
       [ 37, 44, 45]])

a[0] = b
print a
a = c[0:3]
print a 
```

输出：

```
[[ 10\.   3\.   8.]
 [  0\.   0\.   0.]
 [  0\.   0\.   0.]]
[[22 21 14]
 [55 64 12]
 [33 85 98]] 
```

您似乎想用第二个二维数组中的元素替换二维数组左上角的元素，而不用担心数组的大小。这是一个方法：

```
def replacer(orig, repl):
    new = np.copy(orig)
    w2, h1 = new.shape
    w1, h2 = repl.shape
    new[0:min(w1,w2), 0:min(h1,h2)] = repl[0:min(w1,w2), 0:min(h1,h2)]
    return new
print replacer(a,b)
print replacer(a,c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:41:14.273

问题是相等运算符正在制作数组的浅拷贝，而您想要的是数组的一部分的深层拷贝。

所以为此，如果你知道 b 只有一个外部数组，那么你可以这样做：

```
a[0] = b 
```

如果知道 a 是 3x3，那么你也可以这样做：

```
a = c[0:3] 
```

此外，如果您希望它们成为实际的深层副本，您将需要：

```
a[0] = b.copy() 
```

和

```
a = c[0:3].copy() 
```

让他们独立。

如果您还不知道矩阵的长度，可以使用该`len()`函数在运行时找出。

# python - 在函数 Python 之间传递一个列表

> ID：14418015
> 
> 赞同：1
> 
> 时间：2013-01-19T19:28:38.700
> 
> 标签：python, list

如果我在一个函数中创建一个列表并对其进行编辑，那么我希望能够将完成的列表传递给另一个函数，在那里它将用于做更多的事情。

```
def func1():
    numbers = [1, 2, 3, 4]
    if numbers.count(1) > 0:
        numbers.remove(1)
        func2()

def func2():
    two = numbers[0]

func1() 
```

我怎样才能得到它，这样它就不会拉出未在全局范围内定义的错误号。我知道它为什么会导致错误，但是经过研究，我仍然找不到解决此问题的好方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T19:31:37.557

根据您的里程和要求，选择一个

1.  将列表作为参数传递给被调用函数

    ```
    def func2(numbers):
        two = numbers[0]

    def func1():
        numbers = [1, 2, 3, 4]
        if numbers.count(1) > 0:
            numbers.remove(1)
            func2(numbers) 
    ```

2.  使这两个函数成为单个类的一部分，并使列表成为实例属性

    ```
    class Foo(object):
        def __init__(self, numbers):
            self.numbers = numbers
            pass
        def func1(self):
            if self.numbers.count(1) > 0:
                self.numbers.remove(1)
                self.func2()
        def func2(self):
            two = self.numbers[0]

    Foo([1, 2, 3, 4]).func1() 
    ```

3.  重新设计，让被调用函数用调用者修饰

    ```
    def func1(func):
        def wraps(*argv):
            numbers = argv[0]
            if numbers.count(1) > 0:
            numbers.remove(1)
            func(*argv)
        return wraps

    @func1
    def func2(numbers):
        two = numbers[0]

    func2([1,2,3,4]) 
    ```

4.  带有嵌套函数的闭包

    ```
    def func1():
        def func2():
            two = numbers[0]
        numbers = [1, 2, 3, 4]
        if numbers.count(1) > 0:
            numbers.remove(1)
            func2()

    func1() 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T19:30:43.403

您可以将其作为[函数参数](http://docs.python.org/2/tutorial/controlflow.html#defining-functions)传递：

```
def func1():
    numbers = [1, 2, 3, 4]
    if numbers.count(1) > 0:
        numbers.remove(1)
        func2(numbers)

def func2(numbers):
    two = numbers[0]

func1() 
```

您还可以定义嵌套在定义列表的范围内的函数：

```
def func1():
    def func2():
        two = numbers[0]

    numbers = [1, 2, 3, 4]
    if numbers.count(1) > 0:
        numbers.remove(1)
        func2()

func1() 
```

# android - 从网页获取文本到字符串

> ID：14418021
> 
> 赞同：12
> 
> 时间：2013-01-19T19:28:51.160
> 
> 标签：android, string, text, webpage

我是 Android 新手，我想将整个文本从网页获取到字符串。我发现了很多这样的问题，但正如我所说，我是 Android 新手，我不知道如何在我的应用程序中使用它们。我收到错误。只有一种方法我设法让它工作，它使用 WebView 和 JavaScript，而且速度非常慢。有人可以告诉我其他方法来做到这一点或如何加快 WebView，因为我根本不使用它来查看内容。顺便说一句，我添加了以下代码来加速 WebView

```
webView.getSettings().setJavaScriptEnabled(true); 
    webView.getSettings().setBlockNetworkImage(true);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(false);
    webView.getSettings().setPluginsEnabled(false);
    webView.getSettings().setSupportMultipleWindows(false);
    webView.getSettings().setSupportZoom(false);
    webView.getSettings().setSavePassword(false);
    webView.setVerticalScrollBarEnabled(false);
    webView.setHorizontalScrollBarEnabled(false);
    webView.getSettings().setAppCacheEnabled(false);
    webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); 
```

如果您知道比使用 WebView 更好更快的解决方案，请给我主要活动的完整源代码或解释我应该在哪里编写它，这样我就不会出错。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-19T20:07:19.077

用这个：

```
public class ReadWebpageAsyncTask extends Activity {
    private TextView textView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textView = (TextView) findViewById(R.id.TextView01);
    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = "";
            for (String url : urls) {
                DefaultHttpClient client = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);
                try {
                    HttpResponse execute = client.execute(httpGet);
                    InputStream content = execute.getEntity().getContent();

                    BufferedReader buffer = new BufferedReader(
                            new InputStreamReader(content));
                    String s = "";
                    while ((s = buffer.readLine()) != null) {
                        response += s;
                    }

                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return response;
        }

        @Override
        protected void onPostExecute(String result) {
            textView.setText(Html.fromHtml(result));
        }
    }

    public void readWebpage(View view) {
        DownloadWebPageTask task = new DownloadWebPageTask();
        task.execute(new String[] { "http://www.google.com" });

    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <Button android:layout_height="wrap_content" android:layout_width="match_parent" android:id="@+id/readWebpage" android:onClick="readWebpage" android:text="Load Webpage"></Button>
    <TextView android:id="@+id/TextView01" android:layout_width="match_parent" android:layout_height="match_parent" android:text="Example Text"></TextView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T19:50:14.620

这是我通常用来从互联网下载字符串的代码

```
class RequestTask extends AsyncTask<String, String, String>{

@Override
// username, password, message, mobile
protected String doInBackground(String... url) {
    // constants
    int timeoutSocket = 5000;
    int timeoutConnection = 5000;

    HttpParams httpParameters = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
    HttpClient client = new DefaultHttpClient(httpParameters);

    HttpGet httpget = new HttpGet(url[0]);

    try {
        HttpResponse getResponse = client.execute(httpget);
        final int statusCode = getResponse.getStatusLine().getStatusCode();

        if(statusCode != HttpStatus.SC_OK) {
            Log.w("MyApp", "Download Error: " + statusCode + "| for URL: " + url);
            return null;
        }

        String line = "";
        StringBuilder total = new StringBuilder();

        HttpEntity getResponseEntity = getResponse.getEntity();

        BufferedReader reader = new BufferedReader(new InputStreamReader(getResponseEntity.getContent()));  

        while((line = reader.readLine()) != null) {
            total.append(line);
        }

        line = total.toString();
        return line;
    } catch (Exception e) {
        Log.w("MyApp", "Download Exception : " + e.toString());
    }
    return null;
}

@Override
protected void onPostExecute(String result) {
    // do something with result
}
} 
```

你可以运行任务

> `new RequestTask().execute("http://www.your-get-url.com/");`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T19:35:14.840

鉴于您根本对查看内容不感兴趣，请尝试使用以下内容：

为了从 URL 获取源代码，您可以使用以下命令：

```
HttpClient httpclient = new DefaultHttpClient(); // Create HTTP Client
HttpGet httpget = new HttpGet("http://yoururl.com"); // Set the action you want to do
HttpResponse response = httpclient.execute(httpget); // Executeit
HttpEntity entity = response.getEntity(); 
InputStream is = entity.getContent(); // Create an InputStream with the response
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
StringBuilder sb = new StringBuilder();
String line = null;
while ((line = reader.readLine()) != null) // Read line by line
    sb.append(line + "\n");

String resString = sb.toString(); // Result is here

is.close(); // Close the stream 
```

[确保在AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Thread](http://developer.android.com/reference/java/lang/Thread.html)中从主 UI 线程运行它。

# git - 在 Synology 上运行 GitList 或 git stash

> ID：14418027
> 
> 赞同：1
> 
> 时间：2013-01-19T19:29:25.200
> 
> 标签：git

我想知道为什么没有人为 Synology DiskStation 开发可以运行任何 Git 的应用程序。

喜欢 GitList 还是 Stash？如果您在 Synology Server / DiskStation 上使用源代码管理，您是否有任何信息的链接？

谢谢

# uml - UML 规范中的 TimeObservation

> ID：14418032
> 
> 赞同：3
> 
> 时间：2013-01-19T19:29:38.680
> 
> 标签：uml, sequence-diagram, specifications

在 UML 规范上层结构中（2.5 仍然是 Beta，第 87 页）：

> TimeObservation 是对执行期间某个时刻的引用。指出模型中要观察的NamedElement，以及观察是在这个NamedElement进入的时候还是退出的时候”

从规范看这个例子。 ![在此处输入图像描述](../Images/d0f7a634264cf7a484b44f971498d915.png)

TimeObservation 是 t=now

*   是否可以使用另一个变量，我应该在哪里定义这些变量？

*   如何指定价值而不是现在？

*   编写时间观察表达式的可能情况是什么？

*   TimeObservation 是仅指生命线还是指位于生命线之间的消息？

*   如果它通过生命线驻留，这是否意味着建议将其指定在特定点或通过生命线的任何点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T10:23:15.917

I agreed that more details would be useful in order to understand your question. A TimeObservation is an UML element owned by a UML Package and related to UML NamedElement but according to its description I guess that most of the time it is associated to an Event. So in a Sequence diagram, a TimeObservation can be related to an Occurence specification or an ExecutionSpecification i.e. the start or the end of a Message or a InteractionFragment.

Hoping it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:58:37.947

元[模型规范](http://www.omg.org/spec/SysML/20080501/UML4SysML-metamodel.xmi)指出：

> 时间观察是对执行过程中某一时刻的引用。它指出模型中要观察的元素以及观察是何时进入该模型元素还是何时退出。

它引用它注释的**任何**NamedElement。

好的，我想我理解你想要达到的目标。您将需要创建一个 UML 配置文件来执行此操作。你如何做到这一点在很大程度上取决于你使用的工具。

首先确定要约束的 UML NamedElement。在 Profile 中，将 NamedElement 添加为 MetaClass 类型，并将您的 ContrainedNamedType 扩展为 StereoType。

在配置文件中，使用 OCL 和 TimeObservation 类型定义带有约束的 Stereotype。这些可以被认为是固有属性。公平地说，这是我所知道的事情，但谷歌发现了这些

*   [实时嵌入式系统的 UML 配置文件](http://www-omega.imag.fr/profile.php)
*   [使用 OCL 进行实时约束的 UML 配置文件](http://dl.acm.org/citation.cfm?id=719600)

# css - 在 thead 和 tbody 之间创建双边框

> ID：14418035
> 
> 赞同：0
> 
> 时间：2013-01-19T19:29:54.073
> 
> 标签：css, html-table

我做了一个关于边框分开的测试`thead`，`tbody`但`thead`似乎优先于`tbody`.

如果你有想法……</p>

*   这是我的测试：http: [//jsfiddle.net/cFKns/2/](http://jsfiddle.net/cFKns/2/)
*   搜索执行此操作：http: [//img844.imageshack.us/img844/693/12293655.png](http://img844.imageshack.us/img844/693/12293655.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:46:51.483

您需要将`border-collapse`值设置为`separate`您不希望边框重叠的部分，然后`border-spacing`在边框将接触的一侧设置为 1px。

我还必须将边框定义移动到`TH`and`TD`标签，因为我不认为`border-collapse`并`border-spacing`适用于`thead`and `tbody`（至少在我尝试时它不起作用）。

你可以在这里看到我的发现的更新结果：http: [//jsfiddle.net/jasongennaro/Pf7My/1/](http://jsfiddle.net/jasongennaro/Pf7My/1/)

我`td`使用`tr:first-child td`. 确保只有顶行作为黑色上边框。

# javascript - 我应该如何在 HTML 表单中创建列表框？

> ID：14418038
> 
> 赞同：0
> 
> 时间：2013-01-19T19:30:11.583
> 
> 标签：javascript, html

我想要一个列表框，用户可以在其中添加他们在文本输入中输入的项目。该列表还应具有删除、编辑功能。

最好的方法是什么（即硬编码或是否有 jquery）？我猜需要 javascript 这很好。

我将如何从 JS 中读取所有值？我想用分隔符连接项目，以便我可以通过 ajax 发送它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:03:16.573

这是一个使用 jQuery 将列表框中的所有选项添加到逗号分隔字符串的示例；

```
function toAllan() {
  var allanString = "";
  var allanOptions = $('.myListBox option');
  allanOptions.each(function (index) {
    allanString += $(this).val();
    if (index != allanOptions.length - 1) {
      allanString += ",";
    }
  });
  return allanString;
} 
```

**编辑**我遇到了这个更清洁的 IMO 替代方案。

```
function toAllan() {
  return $('#myListBox option').map(function (index) {
      return $(this).val();
  }).get().join(',');
} 
```

这是一个 jsFiddle 演示（还包括从列表框中添加和删除元素）：http: [//jsfiddle.net/srGz7/4/](http://jsfiddle.net/srGz7/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:51:18.780

可能你可以看看这个 jquery 插件 - [jQuery Tokeninput](http://loopj.com/jquery-tokeninput/)。但是，您无法编辑该项目。

# c# - 并行查询实体框架会中断延迟加载

> ID：14418042
> 
> 赞同：1
> 
> 时间：2013-01-19T19:30:54.333
> 
> 标签：c#, entity-framework, parallel-processing

我正在尝试从数据库中加载大量记录，并且我想并行运行它们以加快速度。

下面是一些示例代码，当它尝试访问为空的申请人属性时会中断。但是，在非并行循环中，申请人属性要么被填充，要么是一个空列表，但永远不会为空。延迟加载肯定是启用的。

```
var testList = new List<string>();

Context.Jobs
                .AsParallel()
                .WithDegreeOfParallelism(5)
                .ForAll(
                    x => testList.Add(x.Applicants.Count().ToString())
                ); 
```

我可以做这样的事情吗？和实体框架连接有关系吗？我可以让它并行友好并将它的一个实例传递给任务或其他东西吗？我只是想出一些想法，但我真的一点头绪都没有。

编辑：

这个帖子和我的有关系吗？我的问题听起来有点相似。[实体框架延迟加载在其他线程中不起作用](https://stackoverflow.com/questions/2575990/entity-framework-lazy-loading-doesnt-work-from-other-thread?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:06:07.577

PLINQ 不提供并行化 LINQ-to-SQL 和 LINQ-to-Entities 查询的方法。所以当你调用`AsParallel`EF 时应该首先实现查询。

此外，并行化在数据库上执行的查询没有任何意义，因为数据库可以自己做。

但是如果你想并行化客户端的东西，下面的代码可能会有所帮助：

```
Context.Jobs
.Select(x => x.Applicants.Count().ToString())
.AsParallel()
.WithDegreeOfParallelism(5)
.ForAll(
           x => testList.Add(x)
       ); 
```

请注意，您只能在查询具体化之前访问导航属性。（在你`AsParallel()`打电话之前的情况下）。所以用`Select`得到你想要的一切。

```
Context.Jobs
.Select(x => new { Job = x, Applicants = x.Applicants })
.AsParallel()
.WithDegreeOfParallelism(5)
.ForAll(
       x => testList.Add(x.Applicants.Count().ToString())
   ); 
```

您还可以使用[`Include`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)方法将导航属性包含到查询结果中...

```
Context.Jobs
.Include("Applicants")
.AsParallel()
.WithDegreeOfParallelism(5)
.ForAll(
       x => testList.Add(x.Applicants.Count().ToString())
   ); 
```

# image - 检测图像中的对象/人

> ID：14418047
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:31:20.307
> 
> 标签：image, matlab, image-processing

我是 Matlab 的新手，我正在做一个项目，该项目将输入这样的图像 ![蓝色背景的护照图像](../Images/2ae7a8b4ccbe4be3bf319328ce416c32.png)

我们可以看到它有一个普通的背景（蓝色），系统将生成具有给定比例的护照尺寸图像，首先我正在努力分离背景和人物，我搜索的方法就像`rgb`矩阵组合中有蓝色图像的，那么它是背景，休息是一个人，但我有点困惑，如果这种方法正确与否，如果正确那么我怎么能找到当前像素是不是蓝色的，我该怎么办它带有matlab函数`find`。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:11:00.387

如果要根据人脸裁剪图像，则无需将背景与前景分开。现在你很容易找到人脸检测的现成实现，所以，除非你想实现你自己的方法，因为现成的方法失败了，这应该不是问题。看：

```
Show[img, 
 Graphics[{EdgeForm[{Yellow, Thick}], Opacity[0], 
   Rectangle @@@ 
    FindFaces[img = Import["http://i.stack.imgur.com/cSwzj.jpg"]]}]] 
```

![在此处输入图像描述](../Images/60b684f0d2cdbef2afb551ade3d2220f.png)

假设正确检测​​到人脸，您可以扩展/缩回其边界框以匹配您所追求的大小。

# scala - Spring Data Neo4j - 无法下载 2.1.0-BUILD-SNAPSHOT

> ID：14418050
> 
> 赞同：1
> 
> 时间：2013-01-19T19:31:38.590
> 
> 标签：scala, playframework-2.0, neo4j, sbt, spring-data-neo4j

我正在使用播放！2 使用 SBT 进行依赖的框架。我想检索[Spring Data Neo4j的 2.1.0-BUILD-SNAPSHOT 版本](http://www.springsource.org/spring-data/neo4j#maven)

我的`ApplicationBuild.scala`（由 SBT 使用）如下：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName = "webapp"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    jdbc,
    anorm,
    "org.springframework" % "spring-aop" % "3.2.0.RELEASE",
    "org.springframework" % "spring-aspects" % "3.2.0.RELEASE",
    "org.springframework" % "spring-beans" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-commons-core" % "1.4.0.RELEASE",
    "org.springframework" % "spring-expression" % "3.2.0.RELEASE",
    "org.springframework" % "spring-jdbc" % "3.2.0.RELEASE",
    "org.springframework" % "spring-orm" % "3.2.0.RELEASE",
    "org.springframework" % "spring-test" % "3.2.0.RELEASE",
    "org.springframework" % "spring-tx" % "3.2.0.RELEASE",
    "org.springframework.data" % "spring-data-neo4j" % "2.1.0.BUILD-SNAPSHOT" excludeAll(
        ExclusionRule(organization = "com.sun.jdmk"),
        ExclusionRule(organization = "com.sun.jmx"),
        ExclusionRule(organization = "javax.jms")
      ),
    "org.neo4j" % "neo4j" % "1.8.1",
    "asm" % "asm-all" % "3.1"
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    scalaVersion := "2.10.0",
    resolvers += "TAMU Release Repository" at "https://maven.library.tamu.edu/content/repositories/releases/",
    resolvers += "Spring Maven SNAPSHOT Repository" at "http://repo.springsource.org/libs-snapshot"
  )

} 
```

**除了spring-data-neo4j**之外，所有依赖项都已下载好。

它导致了这个错误：

```
warn]  ::::::::::::::::::::::::::::::::::::::::::::::                                        
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.neo4j#neo4j-cypher-dsl;1.8.RC1: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] (*:update) sbt.ResolveException: unresolved dependency: org.neo4j#neo4j-cypher-dsl;1.8.RC1: not found 
```

`neo4j-cypher-dsl;1.8.RC1`没找到正常吗？我应该怎么做才能找回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:32:34.930

我找到了解决方法：

添加：

```
resolvers += "Neo4j Cypher DSL Repository" at "http://m2.neo4j.org/content/repositories/releases" 
```

将下载丢失的 jar。

# java - 通过蓝牙在 Polar Wearlink 和手机之间建立连接？

> ID：14418055
> 
> 赞同：0
> 
> 时间：2013-01-19T19:31:55.750
> 
> 标签：java, android, bluetooth

我目前正在开发一个 android 应用程序。我必须通过蓝牙将 Polar Wearlink 腰带与手机配对（或连接）。

我已经尝试了多个网站或主题，但每次我尝试某些东西时，我都会强行关闭。

这是我最后一次尝试：

```
public class BluetoothConnectionManager {

// Context
private Context c;

// Bluetooth adapter
private BluetoothAdapter btAdapter;

// Bluetooth device
private BluetoothDevice device;

// Dialog
private AlertDialog dialogDetected;

public BluetoothConnectionManager(Context cont, BluetoothDevice dev, BluetoothAdapter ba){
    c = cont;
    device = dev;
    btAdapter = ba;

}

public void start() {
    ConnectThread ct = new ConnectThread(device);
    ct.run();
}

private class ConnectThread extends Thread {
    private final UUID MY_UUID = UUID.randomUUID();
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        BluetoothSocket tmp = null;
        mmDevice = device;
        try {
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
    }

    public void run() {
        btAdapter.cancelDiscovery();
        try {
            String tag = "text";
            Log.d(tag ,"FORCE CLOSE HERE");
            mmSocket.connect();
        } catch (IOException connectException) {
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }
        manageConnectedSocket(mmSocket);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

这是日志

*   01-19 20:53:11.617：E/AndroidRuntime（7362）：致命异常：主要
*   01-19 20:53:11.617: E/AndroidRuntime(7362): java.lang.NullPointerException
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.os.ParcelUuid.toString(ParcelUuid.java:72)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.sec.enterprise.BluetoothUtils.isSocketAllowedBySecurityPolicy(BluetoothUtils.java:95)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:221)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): at com.breath.bluetoothmodule.BluetoothConnectionManager$ConnectThread.run(BluetoothConnectionManager.java:62)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): at com.breath.bluetoothmodule.BluetoothConnectionManager.start(BluetoothConnectionManager.java:40)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): at com.breath.bluetoothmodule.BluetoothHandler$1$1.onClick(BluetoothHandler.java:75)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:168)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.os.Handler.dispatchMessage(Handler.java:99)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.os.Looper.loop(Looper.java:137)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 android.app.ActivityThread.main(ActivityThread.java:4514)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 java.lang.reflect.Method.invokeNative(Native Method)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 java.lang.reflect.Method.invoke(Method.java:511)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
*   01-19 20:53:11.617: E/AndroidRuntime(7362): at dalvik.system.NativeStart.main(Native Method)

# ruby - 使用 RubyMotion 要求“motion-cocoapods”时出错

> ID：14418057
> 
> 赞同：1
> 
> 时间：2013-01-19T19:32:11.153
> 
> 标签：ruby, rubymotion, cocoapods

我刚得到 Ruby 动作，我想试试 Cocoapods。我按照网站上的要求安装了它：

[http://www.rubymotion.com/developer-center/articles/cocoapods/](http://www.rubymotion.com/developer-center/articles/cocoapods/)

我加

在我简单的“Hello”项目中需要“motion-cocoapods”。尝试耙它时出现此错误：

耙中止！无法激活 cocoapods-0.16.1，因为 rake-10.0.3 与 rake (~> 0.9.4) 冲突

我想这与我的 rake 版本有关，但我不知道我需要做什么来解决这个问题。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T19:27:06.683

这是由于安装了比 0.9.x 更新的 rake 版本。当您运行时`rake`，它会加载最新版本（在您的情况下为 10.0.3）。然后，当 cocoapod gem 尝试加载时，它会尝试激活 rake 0.9.x 并失败（这`~> 0.9.4`意味着它将接受任何以 开头的版本`0.9.`）。

一种解决方案是完全删除`rake`gem 并显式安装 0.9.4 版本：

```
gem uninstall rake
gem install rake --version '0.9.6' 
```

但是，如果您有任何其他需要更新版本 rake 的项目，这可能会成为一个问题。更好的解决方案是使用 Bundler：

```
gem install bundler 
```

`Gemfile`在您的项目文件夹中创建一个包含：

```
source :rubygems
gem 'rake'
gem 'motion-cocoapods' 
```

将以下内容添加到`Rakefile`，紧接在该`require 'motion/project'`行下方：

```
require 'bundler'
Bundler.require 
```

然后`bundle install`从控制台运行。这将在 rake 0.9.6 上锁定此特定项目。唯一需要注意的是，您可能需要在所有 rake 命令前加上`bundle exec`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:27:59.147

我可以按照这个日本博客上的步骤解决这个问题：

[http://blog.amacou.net/post/37702092871/rubymotion-cocoapods-rake](http://blog.amacou.net/post/37702092871/rubymotion-cocoapods-rake)

第一次卸载：

gem卸载运动cocoapods gem卸载cocoapods

下载可可足类：

git clone git://github.com/CocoaPods/CocoaPods.git

找到 gemspec 文件

并改变这个：

s.add_runtime_dependency 'rake', '~> 0.9.4'

对此：

s.add_runtime_dependency 'rake', '> 0.9.4'

然后将其安装为 gem

耙宝石：安装

然后重新安装motion-cocoapods：

gem install motion-cocoapods

我的感觉是这是一个黑客攻击，我担心它可能会在其他地方引起问题。如果有人有更好的答案，请发布。

# flash - 多人Flash游戏

> ID：14418058
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:32:17.607
> 
> 标签：flash, multiplayer, flash-cs6

如何在 Adob​​e Flash Professional CS6 中启用多按键检测。（基本上是做多人游戏）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:44:31.103

尝试对第二个玩家使用游戏手柄或其他外部操纵杆，并在技术论坛示例[leferonato.com/](http://leferonato.com/)或[在](http://www.gotoandplay.it)论坛中阅读更多内容，您可以找到一些答案。如果它处于维护状态，请使用常用短语......“ [g00gl](https://www.google.hu/search?q=flash%20multi%20keypress&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a&channel=fflb)是你的朋友......”但直接的 actionscript answare [here](http://www.freeactionscript.com/tag/flash-multiple-key-press-detection/)和[here](http://www.freeactionscript.com/2009/02/multiple-key-press-detection/)以及[here](http://www.kirupa.com/forum/showthread.php?350549-Reliable-AS3-multiple-keypress)和 here。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:30:26.573

这不是你“启用”的东西。您只需对其进行编码。

```
if(Key.isDown(65)) //"a"
    ;//move 1st player left
if(Key.isDown(Key.LEFT)) //left arrow
    ;//move 2nd player left 
```

但是您应该注意，键盘在同时处理多个按键时非常[糟糕。](http://en.wikipedia.org/wiki/Rollover_%28key%29#Key_blocking_and_ghosting)您会注意到许多 3 键组合根本不起作用或注册了错误的键。

# java - Junit4运行一个测试类固定次数并显示结果（eclipse）

> ID：14418059
> 
> 赞同：3
> 
> 时间：2013-01-19T19:32:39.697
> 
> 标签：java, eclipse, junit, junit4

我希望能够运行指定次数的测试类。该类看起来像：

```
@RunWith(Parameterized.class)
public class TestSmithWaterman {

    private static String[] args;
    private static SmithWaterman sw;
    private Double[][] h;
    private String seq1aligned;

    @Parameters
    public static Collection<Object[]> configs() {
        // h and seq1aligned values 
    }

    public TestSmithWaterman(Double[][] h, String seq1aligned) {
        this.h = h;
        this.seq1aligned = seq1aligned;
    }

    @BeforeClass
    public static void init() {
        // run smith waterman once and for all
    }

    @Test
    @Repeat(value = 20) // does nothing
    // see http://codehowtos.blogspot.gr/2011/04/run-junit-test-repeatedly.html
    public void testCalculateMatrices() {
        assertEquals(h, sw.getH());
    }

    @Test
    public void testAlignSeq1() {
        assertEquals(seq1aligned, sw.getSeq1Aligned());
    }

    // etc
} 
```

上面的任何测试都可能失败（并发错误 -**编辑**：失败提供有用的调试信息）所以我希望能够多次运行该类，并且最好以某种方式对结果进行分组。尝试了[Repeat 注释](http://codehowtos.blogspot.gr/2011/04/run-junit-test-repeatedly.html)- 但这是特定于测试的（并没有真正使它工作 - 见上文）并且与[RepeatedTest.class](http://etutorials.org/Programming/Java+extreme+programming/Chapter+4.+JUnit/4.10+Repeating+Tests/)挣扎，它似乎无法转移到 Junit 4 - 我在 SO 上找到的最接近的是[这个](https://stackoverflow.com/a/1835615/281545)- 但显然这是Junit3。在 Junit4 中，我的套件看起来像：

```
@RunWith(Suite.class)
@SuiteClasses({ TestSmithWaterman.class })
public class AllTests {} 
```

而且我看不出有办法多次运行它。 [用空选项参数化](https://stackoverflow.com/questions/1492856/easy-way-of-running-the-same-junit-test-over-and-over)并不是一个真正的选项 - 因为无论如何我都需要我的参数

所以我一次又一次地在 Eclipse 中按 Control + F11

帮助

编辑（2017.01.25）：有人继续并将其标记为问题的重复，我明确表示其接受的答案不适用于此处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T09:52:24.797

正如@MatthewFarwell 在评论中所建议的那样，我[根据他的回答实施了一个测试规则](https://stackoverflow.com/questions/8295100/how-to-re-run-failed-junit-tests-immediately/8301639#8301639)

```
public static class Retry implements TestRule {

    private final int retryCount;

    public Retry(int retryCount) {
        this.retryCount = retryCount;
    }

    @Override
    public Statement apply(final Statement base,
            final Description description) {
        return new Statement() {

            @Override
            @SuppressWarnings("synthetic-access")
            public void evaluate() throws Throwable {
                Throwable caughtThrowable = null;
                int failuresCount = 0;
                for (int i = 0; i < retryCount; i++) {
                    try {
                        base.evaluate();
                    } catch (Throwable t) {
                        caughtThrowable = t;
                        System.err.println(description.getDisplayName()
                            + ": run " + (i + 1) + " failed:");
                        t.printStackTrace();
                        ++failuresCount;
                    }
                }
                if (caughtThrowable == null) return;
                throw new AssertionError(description.getDisplayName()
                        + ": failures " + failuresCount + " out of "
                        + retryCount + " tries. See last throwable as the cause.", caughtThrowable);
            }
        };
    }
} 
```

作为我的测试类中的嵌套类 - 并添加

```
@Rule
public Retry retry = new Retry(69); 
```

在我在同一个班级的测试方法之前。

这确实起到了作用——它确实重复了 69 次测试——在某些异常的情况下，会抛出一个新的 AssertionError，其中包含一些统计信息以及作为原因的原始 Throwable 的单个消息。因此统计信息也将在 Eclipse 的 jUnit 视图中可见。

# datebox - jQM DateBox 加 2 分钟

> ID：14418062
> 
> 赞同：1
> 
> 时间：2013-01-19T19:32:52.893
> 
> 标签：datebox, jquery-mobile

我正在将 [jQM-DateBox](http://dev.jtsage.com/jQM-DateBox/) 与 mode = 'timebox' ... 用于移动应用程序。我注意到，当时间框打开并单击加号/减号按钮来更改时间时，有时它会添加或删除 2 次和 3 次。就像按钮继续被按下一样。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T14:28:55.513

尝试设置 repButton: false。这是一个“保持前进”的选项，并不总是按预期工作 - 我仍在努力使其正常工作，但它仍然不完美。

# iphone - 核心数据内存分配

> ID：14418063
> 
> 赞同：1
> 
> 时间：2013-01-19T19:32:56.490
> 
> 标签：iphone, ios, xcode, core-data

在我的应用程序中，我使用核心数据来存储信息。当应用程序最初启动时，会调用此代码块来获取数据：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName: @"Customer" inManagedObjectContext: managedObjectContext];
request.entity = entity;

NSError *error = nil;

Array = [[managedObjectContext executeFetchRequest: request error: &error] mutableCopy];
NSArray * reversedArray = [[Array reverseObjectEnumerator] allObjects];
[Array release];
Array = nil;
[request release];
[error release]; 
```

所以一切正常，但是分配的大量内存没有被释放，我似乎无法弄清楚。您可以通过下面的屏幕截图看到。任何帮助都会很棒。

![在此处输入图像描述](../Images/40795d4abee5b632906a3e224e74a376.png)

![在此处输入图像描述](../Images/450537ac1b8f81691f50f71da2c2b0b2.png)

**编辑**

我最初接受了下面的答案，但似乎并没有 100% 解决这个问题。CFData（存储）仍在分配大量未释放的内存。这最终导致 iPad 2 崩溃，当我接受下面的答案时，我没有遇到这种情况，因为我只是在 iPad 4 上进行测试。我希望这能解决所有问题。

**编辑 2**

所以我一直在做更多的测试和调试，似乎添加到核心数据的条目越多，CFData（存储）就越大。目前数据库中只有 10 个单独的条目，当应用程序打开时，从获取它们的分配超过 25mb。主要实体“客户”与其他更大的实体有多种关系。因此，当我执行“客户”的获取时，正在获取与其有关系的每个实体，这导致了巨大的内存分配。有没有办法解决这个问题？

我猜必须有更好的方法来设置条目的添加方式和获取方式。

以下是如何创建条目的代码：

```
- (void) addItem
{
// Insert a new record in the database
Customer * customerItem = [NSEntityDescription insertNewObjectForEntityForName: @"Customer" inManagedObjectContext: managedObjectContext];

System * system = [NSEntityDescription insertNewObjectForEntityForName: @"System" inManagedObjectContext: managedObjectContext];

Form1 * form1 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form1" inManagedObjectContext: managedObjectContext];

Form2 * form2 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form2" inManagedObjectContext: managedObjectContext];

Form3 * form3 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form3" inManagedObjectContext: managedObjectContext];

Form4 * form4 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form4" inManagedObjectContext: managedObjectContext];

Form6 * form6 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form6" inManagedObjectContext: managedObjectContext];

Form7 * form7 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form7" inManagedObjectContext: managedObjectContext];

Form8 * form8 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form8" inManagedObjectContext: managedObjectContext];

Form9 * form9 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form9" inManagedObjectContext: managedObjectContext];

Form10 * form10 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form10" inManagedObjectContext: managedObjectContext];

Form11 * form11 =  [NSEntityDescription insertNewObjectForEntityForName: @"Form11" inManagedObjectContext: managedObjectContext];

customerItem.system = system;
customerItem.form1 = form1;
customerItem.form2 = form2;
customerItem.form3 = form3;
customerItem.form4 = form4;
customerItem.form6 = form6;
customerItem.form7 = form7;
customerItem.form8 = form8;
customerItem.form9 = form9;
customerItem.form10 = form10;
customerItem.form11 = form11;

// Insert a new item in the table's data source
[customerArray insertObject: customerItem atIndex: 0];

[managedObjectContext save: &error];

// Insert a new row in the table
NSIndexPath *indexPath = [NSIndexPath indexPathForRow: 0 inSection: 0];
[table insertRowsAtIndexPaths: [NSArray arrayWithObject: indexPath] withRowAnimation: UITableViewRowAnimationFade];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:59:19.430

Core Data 将拥有执行其功能所需的一定数量的长寿命内存。也就是说，您可以通过将此代码包装在`@autorelease`池中来更加确定您已在此处最小化内存使用，如下所示：

```
@autoreleasepool {
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName: @"Customer" inManagedObjectContext: managedObjectContext];
    request.entity = entity;

    NSError *error = nil;

    Array = [[managedObjectContext executeFetchRequest: request error: &error] mutableCopy];
    NSArray * reversedArray = [[[Array reverseObjectEnumerator] allObjects] retain];
    [Array release];
    Array = nil;
    [request release];
    [error release];
}
[reversedArray autorelease]; 
```

尽管您已经小心地释放了您创建的所有对象，但自动释放模式在整个系统框架中被广泛使用。

请注意，添加 this`@autoreleasepool`后，您需要保留`reversedArray`它以使其在池范围的退出中持续存在。我`[reversedArray autorelease]`后来添加了代码，因此代码在语义上与您发布的代码相同（除了释放由执行 fetch 请求创建的任何自动释放对象。）

# css - 缩小 Div 之间的差距

> ID：14418064
> 
> 赞同：0
> 
> 时间：2013-01-19T19:33:08.270
> 
> 标签：css, positioning

这是我新美食节的测试地点：

[http://aksarbenribfest.bugs3.com/public_html/#!/page_home](http://aksarbenribfest.bugs3.com/public_html/#!/page_home)

我设法将首页上的卡通徽标移到更靠近每页顶部的菜单箭头的位置，但无法让其余页面“向上移动”页面。

我想消除列标题（例如“音乐”页面上的星期四、星期五和星期六）与箭头菜单按钮底部之间的差距。

由于我正在修改模板，因此绝对感谢任何其他帮助和提示 - 在我深入了解它之前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:38:38.523

如果我更改`top`您部分的样式`content`，我认为这可以满足您的要求：

![在此处输入图像描述](../Images/fab6e43dc40f866f6cc30775f2827425.png)

（[全尺寸](https://i.stack.imgur.com/Tt5Cw.png)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:39:27.953

问题是这一行的内联样式：

```
 <section id="content" style="top: 210px;"> 
```

只需将最高值更改为更小的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:39:41.123

您在 section 元素上有 CSS，例如：

```
 <section id="content" style="top: 210px;"> 
```

尝试将其减少到大约 100 像素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T19:40:35.010

删除`#content > ul > li` `top: 75px` 然后添加`#content #page_home { top: 75px }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T19:51:50.997

您需要更改动态更改内容位置的功能

```
$(window).resize(function (){
    if (content)
        content.stop().animate(
           {'top':(windowH()-content.height())*.5},
           500,'easeOutCubic');
}); 
```

在您的 scripts.js 中

现在，它是垂直居中的，尝试计算一个较低的值（可能是最简单的方法是将 0.5 更改为 0.2 无论如何，注意不要在小窗口尺寸中过大

# c - 如何快速对许多正则表达式键进行字符串匹配？

> ID：14418069
> 
> 赞同：0
> 
> 时间：2013-01-19T19:33:26.917
> 
> 标签：c, regex, algorithm, search

我有一个元素数组，其键是*regex*。我想提出一个快速算法，给定一个字符串（不是*regex*）将在少于*O(N)*时间内返回基于键*regex*执行的匹配数组值是什么。

目前我对数组进行线性扫描，对于每个元素，我使用 posix *regexec API 执行相应的**正则表达式*，但这意味着要找到匹配的元素，我必须在整个数组中进行搜索。

 *我知道如果 aray 仅由*简单*的字符串作为键组成，我可以保留它的排序器并使用*bsearch*样式 API，但是使用*正则表达式*看起来并不那么容易。

我在这里错过了什么吗？

示例如下

```
// this is mainly to be considered
// as pseudocode
typedef struct {
  regex_t  r;
  ... some other data
} value;

const char *key = "some/key";
value my_array[1024];
bool  my_matches[1024];
for(int i =0; i < 1024; ++i) {
  if(!regexec(&my_array[i].r, key, 0, 0, REG_EXTENDED))
    my_matches[i] = 1;
  else
    my_matches[i] = 0;
} 
```

但是，如您所见，上述是线性的。谢谢

**附录**：

我已经整理了一个简单的可执行文件，它执行了上面的算法和下面的答案中提出的东西，其中形成了一个*大的正则表达式，它构建了一个**子正则表达式*的二叉树并导航它以找到所有匹配项。
源代码在这里（GPLv3）： http: [//qpsnr.youlink.org/data/regex_search.cpp](http://qpsnr.youlink.org/data/regex_search.cpp)
编译：`g++ -O3 -o regex_search ./regex_search.cpp -lrt`
并运行：（`./regex_search "a/b"`或使用`--help`标志作为选项）

有趣的是（我会说正如*预期*的那样）在树中搜索时，执行的*正则表达式*数量较少，但每次比较运行这些正则表达式要复杂得多，因此最终它所花费的时间与向量的线性扫描相平衡. 结果已打印出来，`std::cerr`因此您可以看到它们是相同的。

当使用长字符串和/或许多令牌运行时，请注意内存使用情况；准备好`Ctrl-C`阻止它阻止您的系统崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:32:48.447

This is possible but I think you would need to write your own regex library to achieve it.

Since you're using posix regexen, I'm going to assume that you intend to actually use regular expressions, as opposed to the random collection of computational features which modern regex libraries tend to implement. Regular expressions are closed under union (and many other operations), so you can construct a single regular expression from your array of regular expressions.

Every regular expression can be recognized by a DFA (deterministic finite-state automaton), and a DFA -- regardless of how complex -- recognizes (or fails to recognize) a string in time linear to the length of the string. Given a set of DFAs, you can construct a union DFA which recognizes the languages of all DFAs, and furthermore (with a slight modification of what it means for a DFA to accept a string), you can recover the information about which subset of the DFAs matched the string.

I'm going to try to use the same terminology as the [Wikipedia article](http://en.wikipedia.org/wiki/Deterministic_finite_automaton) on DFAs. Let's suppose we have a set of DFAs `M = {M[1]...M[n]}` which share a single alphabet Σ. So we have:

`M[i] = (Q[i], Σ, δ[i], q^i[0], F[i]) where Q[i] = {q^i[j]} for 0 ≤ j < |Q[i]|, and Q[i] ⊂ F[i].`

We construct the union-DFA `M[⋃] = (Q[⋃], Σ, δ[⋃], q^⋃[0])` (yes, no `F`; I'll get to that) as follows:

`q^⋃[0] = <q¹[0],...,q^n[0]>`

`δ[⋃](<q¹[j[1]],...,q^n[j[n]]>, α) = <δ¹(q¹[j[1]], α),... , δ^n(q^n[j[n]], α)>` for each `α ∈ Σ`

`Q[⋃]` consists of all states reachable through `δ[⋃]` starting from `q^⋃[0]`.

We can compute this using a standard closure algorithm in time proportional to the product of the sizes of the `δ[i]` transition functions.

Now to do a union match on a string α[1]...α[m], we run the union DFA in the usual fashion, starting with its start symbol and applying its transition function to each α in turn. Once we've read the last symbol in the string, the DFA will be in some state `<q¹[j[1]],...,q^n[j[n]]>`. From that state, we can extract the set of `M[i]` which would have matched the string as: `{M[i] | q^i[j[i]] ∈ F[i]}`.

In order for this to work, we need the individual DFAs to be complete (i.e., they have a transition from every state on every symbol). Some DFA construction algorithms produce DFAs which are lacking transitions on some symbols (indicating that no string with that prefix is in the language); such DFAs must be augmented with a non-accepting "sink" state which has a transition to itself on every symbol.

I don't know of any regex library which exposes its DFAs sufficiently to implement the above algorithm, but it's not too much work to write a simple regex library which does not attempt to implement any non-regular features. You might also be able to find a DFA library.

Constructing a DFA from a regular expression is potentially exponential in the size of the expression, although such cases are rare. (The non-deterministic FA can be constructed in linear time, but in some cases, the powerset construction on the NFA will require exponential time and space. See the Wikipedia article.) Once the DFAs are constructed, however, the union FA can be constructed in time proportional to the product of the sizes of the DFAs.

So it should be easy enough to allow dynamic modification to the set of regular expressions, by compiling each regex to a DFA once, and maintaining the set of DFAs. When the set of regular expressions changes, it is only necessary to regenerate the union DFA.

Hope that all helps.*

# c# - 不能同时指定约束类和“类”或“结构”约束

> ID：14418071
> 
> 赞同：13
> 
> 时间：2013-01-19T19:33:42.927
> 
> 标签：c#, generics

我正在尝试通过创建 IDbSet 的自定义模拟来解决模拟问题[。](https://stackoverflow.com/questions/14417758/typeloadexception-when-mocking-idbset)

自定义模拟：

```
public class DbSetMock : IDbSet<Tenant>
{
    /* hidden all other implemented methods/properties */

    public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : class, Tenant
    {
        throw new NotImplementedException();
    }
} 
```

create 方法给出了一个构建错误，我不知道如何解决：

> 不能同时指定约束类和“类”或“结构”约束

简单地`class`从约束中删除会导致另一个构建错误（我也不明白:(）。

> 方法“Tests.DAL.Tenants.DbSetMock.Create<TDerivedEntity>()”的类型参数“TDerivedEntity”的约束必须匹配接口方法“System.Data.Entity.IDbSet<BusinessLayer”的类型参数“TDerivedEntity”的约束。 DAL.Tenants.Tenant>.Create<TDerivedEntity>()'。考虑改用显式接口实现。

任何人都可以帮助我成功地建立这门课吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T19:36:41.243

由于`TDerived`类型参数被约束为 a `Tenant`，因此添加约束`class`or`struct`是多余的。只需删除`class`约束。

**更新**：奇怪的是这里的编译器错误之间似乎存在冲突。如果你“修复”一个，你就会得到另一个，陷入绝望的无限循环。幸运的是，第二个错误也为我们提供了一条出路：您可以使用显式接口实现：

```
public class DbSetMock : IDbSet<Tenant>
{

    TDerivedEntity IDbSet<Tenant>.Create<TDerivedEntity>()
    {
        throw new NotImplementedException();
    }

} 
```

如果*不*使用显式接口实现，*似乎*没有办法实现该方法。如果您需要它作为类的公共接口的一部分，我建议创建另一个接口实现转发到的方法：

 *```
public class DbSetMock : IDbSet<Tenant>
{

    TDerivedEntity IDbSet<Tenant>.Create<TDerivedEntity>()
    {
        return Create<TDerivedEntity>();
    }

    public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : Tenant
    {
        throw new NotImplementedException();
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:36:51.823

尝试`class`从方法部分中删除，如下所示；

```
public class DbSetMock : IDbSet<Tenant>
    {
        /* hidden all other implemented methods/properties */

        public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : Tenant
        {
            throw new NotImplementedException();
        }
    } 
```

`class, Tenant`是冗余代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T19:03:26.360

目前框架中只有三个可继承类，其后代可能是值类型：`Object`、`ValueType`和`Enum`。所有这三种类型都是类类型，但任何派生自`ValueType`或`Enum`将是值类型的类型，以及任何`Object`非派生自`ValueType`的类型都将是类类型。对于上述以外的任何类型，a `class`or`struct`约束要么是多余的，要么是矛盾的；并非巧合的是，C# 不允许直接为上述类型指定约束。

在某些语言和框架中，流行的设计理念是，如果存在一种特定的表达形式，而适用于该通用形式的行为将毫无用处，则语言/框架设计者没有理由不遗余力地禁止这样的形式。*在这样*`Fnord)`的哲学下，将泛型类型限制为密封类型是完全合法的（例如*，但是由于将通用约束的正常解释应用于这种情况会产生合理的行为，并且由于可以想象在某些情况下这种约束可能有用（例如，编写代码以使用正在开发且目前已密封的类，但是可能会或可能不会在其最终版本中密封，或者编写代码以与期望特定泛型形式的基于反射的代码接口），哲学将表明将泛型类型约束到密封类应该是合法的。*

 *在其他一些语言和框架中，有一种不同的理念：如果程序员可能期望某种特定形式的构造能够提供超出一般形式的特性，但事实并非如此，并且如果没有这些特性，这种特定形式似乎不会很有用，该语言应该禁止它，即使该结构具有明确定义的精确含义，并且如果该语言的实现者没有看到程序员想要表达该实际含义的理由，则无法通过其他方式表达。

C# 和 .net 在将一个类型参数约束到另一个类型参数方面都没有任何问题，即使该其他参数的类型不会被接受为约束，这表明该限制是由语言人为施加的，原因是上述哲学。不幸的是，恕我直言，因为在很多情况下能够说出来会有所帮助，例如

```
bool HasAnyFlags<T>(this T enum1, T enum2) where T:struct,System.Enum 
```

即使 .net 可以有效地允许这样的构造，并且即使阻止 C# 排除它的唯一障碍代码显式查找此类约束以禁止它们，C# 设计者还是决定禁止此类构造而不是允许它们表现得像 .net 会解释它们（这意味着它`HasAnyFlags`不能直接用 a 做任何`T`它不能用 做的事情`System.Enum`，并且使用 a`T`作为 a`System.Enum`通常不会比使用 a 快`System.Enum`（有时更慢），但`T`仍然可以用于几个原因：

1.  该方法可以在编译时强制参数必须是*相同*枚举类型
2.  该方法可以使用静态类`EnumEvaluator`来生成和缓存`Func`类型的静态委托，这样`HasAnyFlags(T enum1, T enum2)`可以实现为`return EnumEvaluator.HasAnyFlags(enum1,enum2);` . 这样的函数可能比 `Enum.HasFlag` 快十倍以上。

尽管如此，指定此类约束可能很有用，但在 C# 中指定它们的唯一方法是让 C# 源代码指定一些可用作约束的虚拟类型，然后通过实用程序运行编译后的代码，该实用程序将将所有对虚拟类型的引用替换为对首先要使用的类型的引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T19:37:31.740

它告诉你的是约束：

```
class, Tenant 
```

是多余的。您可以只删除`class`，因为`Tenant`它比`class`和包含更多约束`class`。**

# r - 将多个相互依赖的包上传到 CRAN

> ID：14418074
> 
> 赞同：5
> 
> 时间：2013-01-19T19:34:11.340
> 
> 标签：r, package, cran

我正在准备三个相互依赖的 R 包以很快上传到 CRAN。具体来说，包`A`已经在 CRAN 上并且要更新，包`B`是独立的，并且包`C`依赖于 和 的最新`A`版本`B`。

`A`我可以通过第一次上传和几天后`C`上传来做到这一点而不会在检查中出现问题。`B`但是，我想立即将交叉引用放在帮助页面中，并将所有包添加到彼此的建议列表中。此外，由于我将进一步开发这三个，我希望将来能够同时更新它们。

那么，这里的问题是，是否可以同时将多个相互依赖的包上传到 CRAN？我怎么能那样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:02:07.787

本周去过那里（昨天到达`Depends:`的版本有一个版本`xts`）。我们也经常这样做`Rcpp*`。

所以只需使用版本化的 Depends：

*   更新 A 以提供版本 42
*   上传 B 以提供其初始版本 0.0.7
*   上传 C`Depends: A (>= 42), B (>= 0.0.7)`
*   `Suggests:`现在用B 和 C更新 A 版本 42.1

Fine Manual 对此非常清楚，并从 Debian 继承了所有这些语义，自 1990 年代中期以来，它们在这些语义上得到了改进。

# php - 选择不在范围内的文本 标签

> ID：14418077
> 
> 赞同：1
> 
> 时间：2013-01-19T19:34:42.320
> 
> 标签：php, html, regex

我的网站上有一个所见即所得的编辑器。它只创建几个 html 标签（p、br、b、i、strike、img、a）。
我想将所有文本包装在 <p> 标签中，因此没有包装 <p> 将没有文本。

由此：

```
<p>Some text here. This is ok.</p>
Some text here. This is NOT ok.
<p>Some text here. This is ok.</p> 
```

我想得到这个：

```
<p>Some text here. This is ok.</p>
<p>Some text here. This is NOW ok.</p>
<p>Some text here. This is ok.</p> 
```

最好的方法是什么？

先感谢您。

**编辑：**

我想用 PHP 做这个服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:08:24.290

我设法用 phpQuery 做到了这一点。

```
$doc = phpQuery::newDocument($string);
$doc->contents()->not('p')->wrap("<p>");
$string = $doc->html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:15:30.263

不完全确定这是否有帮助，但我在将 HTML 转换为纯文本时发现了这一点。您可能可以在其中使用一些代码来过滤掉

标签。[http://psoug.org/snippet/Convert-HTML-to-plain-text_36.htm](http://psoug.org/snippet/Convert-HTML-to-plain-text_36.htm)

# c# - 覆盖equals方法和单元测试

> ID：14418081
> 
> 赞同：0
> 
> 时间：2013-01-19T19:35:02.353
> 
> 标签：c#, unit-testing

这是单元测试的第一次尝试。我的`.Equals`方法在`TestSet_Equals_True`,上失败了`TestSet_Equals_True_Shuffled_Order`。希望澄清这是否是我的单元测试的问题还是我的`.Equals`方法有问题。

**单元测试：**

```
private void Populate(Set set, int count)
{
    for (int i = 0; i < count; ++i)
        set.Add(i);
}

[TestMethod]
public void TestSet_Equals_True()
{
    Set set1 = new Set();
    Set set2 = new Set();

    Populate(set1, POPULATE_COUNT);
    Populate(set2, POPULATE_COUNT);
    bool expected = true;
    bool actual = set1.Equals(set2);
    Assert.AreEqual(expected, actual);
} 
```

**班级：**

```
List<object> _set;

//Override Equals
public override bool Equals(object obj)
{
if (this.GetType() != obj.GetType())
    return false;
Set o = (Set)obj;

if (this._set.Count != o._set.Count)
    return false;

o._set.Sort();
this._set.Sort();

return _set.Equals(o._set); } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T19:39:03.477

`List<T>`Equals 的实现是`object.Equals`- Reference Equality 的默认实现。

要查看两个`IEnumerable<T>`是否相等，您可以使用扩展方法`IEnumerable<T>.SequenceEquals`- 不要忘记`using`为命名空间添加语句`System.Linq`。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:44:55.533

首先，不要在 equal 方法中对集合进行排序。`Equals`不应以任何方式更改您的对象。它应该只确定 2 个对象是否相同。

您可以使用`SequenceEquals`但确实意识到`SequenceEquals`不能处理`NullReferenceExceptions`.

所以我认为问题出在您的 Equals 实施中。也许你可以尝试这样的事情：

```
 public override bool Equals(object obj)
    {
        var isEqual = false;

        var otherSet = obj as Set;

        if (otherSet != null)
        {
            isEqual = _set.Count == otherSet.Count;
            isEqual &= _set.SequenceEqual(otherSet);
        }

        return isEqual;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:43:20.280

您可以`Sort`删除`Equals`. 我不知道它们的用途是什么，它们不应该在`Equals`实施中。List`Equals`只是引用相等性。您可以在此处使用`SequenceEquals`扩展方法`IEnumerable<T>`来检查相等性：

```
var a = new List<int> {1, 2};
var b = new List<int> {1, 2};

Assert.False(a.Equals(b));
Assert.True(a.SequenceEqual(b)); 
```

# php - 如何在其类别标题中显示类别项目

> ID：14418082
> 
> 赞同：0
> 
> 时间：2013-01-19T19:35:02.773
> 
> 标签：php, joomla2.5

我有一个如下所示的数组

```
Array
(
    [0] => stdClass Object
        (
            [id] => 1
            [cat_id] => 1
            [item_name]=>test1
            [cat_name] => Normal
        )

    [1] => stdClass Object
        (
            [id] => 2
            [cat_id] => 2
            [item_name]=>test2
            [cat_name] => Featured
        )

    [2] => stdClass Object
        (
            [id] => 3
            [cat_id] => 2
            [item_name]=>test3
            [cat_name] => Featured
        )  
) 
```

我希望结果看起来像这样

**普通的**

```
test1 
```

**精选**

```
test2  |  test3 
```

到目前为止，我已经尝试过：

```
<?php
foreach($rows as $row){
    echo '<h2>'.$row->cat_name.'</h2>';
    echo '<p>'.$row->item_name.'</p>';
}
?> 
```

但它显示了每个项目的标题。有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:46:37.897

所以你想把它们分组？这是一个功能：

```
function groupBy($arr, $func) {
    $groups = [];

    foreach($arr as $item) {
        $group = $func($item);

        if(array_key_exists($group, $groups))
            $groups[$group][] = $item;
        else
            $groups[$group] = [$item];
    }

    return $groups;
} 
```

像这样使用它：

```
$groups = groupBy($rows, function($row) { return $row->cat_name; });

foreach($groups as $name => $items) {
    echo "<h2>$name</h2>";

    foreach($items as $item)
        echo "<p>{$item->item_name}</p>";
} 
```

[这是一个演示。](http://codepad.viper-7.com/tEmPqK)如果你没有 PHP 5.3 的奢侈，那么你可以让它更专业：

```
function groupBy($arr, $prop) {
    $groups = array();

    foreach($arr as $item) {
        $group = $item->$prop;

        if(array_key_exists($group, $groups))
            $groups[$group][] = $item;
        else
            $groups[$group] = array($item);
    }

    return $groups;
}
...
$groups = groupBy($rows, 'cat_name');

foreach($groups as $name => $items) {
    echo "<h2>$name</h2>";

    foreach($items as $item)
        echo "<p>{$item->item_name}</p>";
} 
```

[PHP 5.2.17 演示](http://codepad.viper-7.com/T7rm6y)

# netty - 在 Netty 中处理固定大小消息的管道设置

> ID：14418084
> 
> 赞同：1
> 
> 时间：2013-01-19T19:35:17.590
> 
> 标签：netty, pipeline

在我当前的场景中，我有一个现有的非网络客户端，它正在向我现有的非网络服务器发送固定的消息大小（32 * 1024 字节）。我正在更改我的服务器以使用 Netty，我不清楚在业务逻辑处理程序之前需要添加到管道中的处理程序。如果我要使用 SSL，那么我将首先在管道中添加 SSL 处理程序，最后添加我的业务逻辑处理程序。那么我在中间需要什么处理程序？我需要一个固定大小的 FrameDecoder（如果存在的话）吗？消息没有被任何字符分隔，所以我认为我不需要使用 DelimiterBasedFrameDecoder。我也不需要使用 StringDecoder 或 StringEncoder。

```
 …
    …

    pipeline.addLast("ssl", new SslHandler(engine));

    // Anything to add here for fixed sized byte[] messages??????

    // and finally add business logic handler
    pipeline.addLast("handler", new BusinessLogicHandler());
  …
  … 
```

对于引导程序，我设置了以下选项：

```
 this.bootstrap.setOption("keepAlive", true);
    this.bootstrap.setOption("sendBufferSize", 32*1024);
    this.bootstrap.setOption("receiveBufferSize", 32*1024);
    this.bootstrap.setOption("tcpNoDelay", true); 
```

我是否也需要设置 writeBufferHighWaterMark 选项？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T08:53:24.497

对于固定大小的消息，您可以在业务处理程序前面添加 FixedLengthFrameDecoder。

看：

[http://netty.io/3.6/api/org/jboss/netty/handler/codec/frame/FixedLengthFrameDecoder.html](http://netty.io/3.6/api/org/jboss/netty/handler/codec/frame/FixedLengthFrameDecoder.html)

# php - 查找/替换 mysql_ 到 mysqli_ 使代码不起作用

> ID：14418090
> 
> 赞同：6
> 
> 时间：2013-01-19T19:36:05.293
> 
> 标签：php, mysql, mysqli

因此，我确信任何经常使用 SO 的人都已经注意到，这些`mysql_`功能将被弃用，建议使用`mysqli_`或`PDO`代替。因此，我决定通过在我的代码中进行简单的查找/替换来转换到 mysqli，将每个替换`mysql_`为`mysqli_`. 这在 Dreamweaver 中似乎可以正常工作，而且我没有遇到任何语法错误或任何问题。所有新`mysqli_`功能都涂成蓝色，这意味着它们被识别为有效功能。

但是，当我保存所有内容并运行代码时，我注意到任何与 mysql 相关的代码都无法正常工作。撤消替换解决了问题。

我的服务器可能不支持 mysqli 功能吗？我知道它正在运行 php 5 和 mysql 5。您可能还需要在代码中添加其他内容吗？我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-02T18:57:43.757

现在是切换的好时机，因为 PHP 7.0`ext/mysql`从核心中删除了这些功能。

考虑以下遗留代码

```
$res = mysql_query($sql); 
```

这些`mysql_`函数是惰性的，因为它会使用任何打开的连接。但`mysqli_`不仅不是懒惰，它是一个**对象**，而不是连接资源（这是`mysql_connect()`会返回的）。在此处查看这些行以[连接到数据库](http://php.net/manual/en/mysqli.construct.php)

```
$mysqli = new mysqli('host', 'username', 'password', 'db');
$mysqli = mysqli_connect('host', 'username', 'password', 'db'); 
```

他们都给你同样的东西......

> 返回一个表示与 MySQL 服务器的连接的**对象。**

是的，这是正确的。甚至程序连接函数也返回一个对象。直接使用它的最简单方法是对象形式

```
$mysqli->query($sql); 
```

过程函数只是对此的包装。但他们并不懒惰。查看差异

```
mysqli_query($mysqli, $sql); 
```

其中最大的问题（为什么简单的查找和替换`mysql_`失败`mysqli_`）是大多数`mysqli_`函数都要求您**将连接对象作为第一个参数传递**。同样重要的是要注意结果也是对象（[mysqli_result](http://php.net/manual/en/class.mysqli-result.php)类），尽管它们的过程对应物只需要结果集，因此您可以简单地查找/替换它们。

为了完整起见，还有另一个不太常见的问题（这确实是旧代码）：[mysql_result](http://php.net/manual/en/function.mysql-result.php)。此功能在`mysqli_`. 您应该切换到完整的行返回函数，例如`mysqli_fetch_assoc($result)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-08T12:46:31.710

**您必须知道在替换代码时可能会遇到很多问题。**

1.  [在此处](http://php.net/manual/en/mysqli.installation.php)检查 mysqli 的安装。
2.  [在此处](http://php.net/manual/en/mysqli.configuration.php)检查 mysqli 的配置。
3.  以两种方式检查数据库连接：

    ** 像natimysql这样的简单连接：

    `$con = mysqli_connect("localhost","my_user","my_password","my_db");`

    但是现在你必须这样使用它

    `mysqli_query($con,"SELECT * FROM Table"); // $con is the connection which is must for executing the sql query`

    **我最好的方法是把它当作新的 mysqli 对象来处理：

    `$con = new mysqli('localhost', 'user', 'pass', 'demo');`

    现在你会这样做：

    ```
    $sql = "SELECT * FROM Table";
    $con->query($sql); 
    ```

    如果您检查了之前完成的每个查询，您必须找到其中一个错误，特别是第三点中的错误，您可以在[此处](http://www.w3schools.com/php/php_ref_mysqli.asp)、[此处](http://codular.com/php-mysqli)或[此处查看其教程](http://php.net/manual/en/book.mysqli.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-02T19:21:30.543

您可能想查看[http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，它应该告诉您有关迁移 mysql_ 代码的所有信息，但迁移到 PDO，而不是 MySQLi。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T16:30:10.867

很惊讶没有人提到 mysql_ 和 mysqli_ 函数不是完全平行的，因此搜索和替换肯定会失败。此外 mysqli_ 通常会坚持使用数据库连接参数（在程序模式下使用时，这是您的目标），其中 mysql_ 只会获取代码中之前打开的任何连接。

如果您启用了调试，您应该能够解决错误。

最常见的“问题”是没有与 mysql_result() 等效的 mysqli，人们在获得单个结果时经常使用它。我愿意打赌你的代码分散在“mysqli_result()”调用中，这些调用都会失败。

这是基本的修复。“好的”修复可能是为所有 SQL 调用使用一个专用类，这样在整个代码库中只有少数几个 mysqli 函数的使用，并且全部在一个文件中。这样，当您重构时，您不需要搜索大量文件，所有这些文件都具有各种 mysqli 函数的各种不同用途。

如果您“需要一些权威的 MySQL 资源 -> MySQLi 迁移”，我可以推荐一个名为 Google 的网站；-) 输入“MySQL -> MySQLi 迁移”。

例如，这个“for Dummies”页面向您展示了您需要解决的各种功能之间的差异，以使您的代码正常工作。

[http://www.dummies.com/how-to/content/how-to-convert-mysqli-functions-to-mysql-functions.html](http://www.dummies.com/how-to/content/how-to-convert-mysqli-functions-to-mysql-functions.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-19T19:39:37.597

> mysql_ 函数现已弃用

不，他们还没有

> 我决定通过在我的代码中进行简单的查找/替换来过渡到 mysqli

问题很可能在于 mysqli 函数具有反向参数顺序并明确需要连接资源。

**尽管如此，即使您成功地进行了这样的批量替换，它也不会对您的代码有丝毫好处**，因此，您最好保持原样，尽管本网站上有一些错误...过度热情的活动。

1.  没有理由着急。在您开始注意到一些不便之前，您至少有 5 年的时间。
2.  所有这些关于 mysql 函数的噪音的目的不是为了将某些 API 更改为另一个 API，而是为了使通常的 PHP 代码更加合理和安全。仅仅通过搜索和替换你不会达到这两个目标 - 所以，根本没有理由这样做。

您真正需要的是一种处理查询的智能方法，封装在某个库类中，这不仅可以改善您运行 SQL 查询的体验，而且可以将所有 API 函数移动到**一个**可以轻松替换为任何 API 的位置有些人会决定强迫你使用。

# database - 可变数据库结构的应用？

> ID：14418094
> 
> 赞同：0
> 
> 时间：2013-01-19T19:36:38.143
> 
> 标签：database

我想知道通过利用动态更改数据库的表结构并在进行查询之前查询数据库引擎以获取当前结构（或仅使用肯定会的字段）是否可以获得任何好处表中）。有没有使用这种方法的系统示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:13:51.183

查看[http://blog.mongodb.org/post/119945109/why-schemaless](http://blog.mongodb.org/post/119945109/why-schemaless)。

根据我的个人经验，我发现了以下好处：

**更容易改变**

一些概念结构在规范化的一组表中使用起来实在是太痛苦了。例如，在我的工作中，我们有一个自定义的内部 CMS 系统。为了代表一篇“文章”，我们有大约 35 个表格。当我们必须运行查询来生成一篇完整的文章时，这是非常痛苦的。

当同一篇文章表示为文档时，所有信息仍然存在，只是在代码中更改对象然后序列化和反序列化比编写具有 20 个连接的查询要容易得多。

**版本控制**

它使版本控制变得更加容易。您可能从系统的一个模式开始，然后决定需要添加/删除字段。在传统的 RDBMS 中，部署这可能会很痛苦。使用文档数据库，您只需插入具有不同架构的新文档，一切都很好。（请记住，文档数据存储为您提供了处理此问题的工具！）

**更快的发展**

这源于事物更容易改变。从我所看到的情况来看，收益是*显着的。*无需再花时间制作表格并确保数据类型完美且一切都非常规范化。

# debugging - 包体中的错误 PLS-00323，过程名称正确

> ID：14418102
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:37:32.277
> 
> 标签：debugging, plsql, procedure

以下代码在两个地方出现错误 PLS-00323。第一个位置在过程 spt_save_casedetail 上，它说“子程序或游标 'spt_save_casedetail' 在包规范中声明，必须在包主体中定义”。这是代码（警告它很长）：

```
create or replace
package body ct_cu_act_um1_pg
is

procedure spt_save_casedetail (
p_primarymemberplanid_in      in casedetail.primarymemberplanid%type,
p_servicetypecd_in            in casedetail.servicetypecd%type,
p_notifydt_in                 in casedetail.notifydt%type,
p_assignedentityid_in         in casedetail.assignedentityid%type,
p_startdt_in                  in casedetail.startdt%type,
p_enddt_in                    in casedetail.enddt%type,
p_caretypemnemonic_in         in casedetail.caretypemnemonic%type,
p_casestatusmnemonic_in       in casedetail.casestatusmnemonic%type,
p_odsorderingproviderid_in    in casedetail.odsorderingproviderid%type,
p_sourcemnemonic_in           in casedetail.sourcemnemonic%type,
p_caseresolutionmnemonic_in   in casedetail.caseresolutionmnemonic%type,
p_odsservicingproviderid_in   in casedetail.odsservicingproviderid%type,
p_serviceitemmnemonic_in      in casedetail.serviceitemmnemonic%type,
p_providerinnetworkind_in     in casedetail.providerinnetworkind%type,
p_detailtxt_in                in casedetail.detailtxt%type,
p_odsfacilityvendorid_in      in casedetail.odsfacilityvendorid%type,
p_servicelocationcd_in        in casedetail.servicelocationcd%type,
p_facilityinnetworkind_in     in casedetail.facilityinnetworkind%type,
p_audit_user_in               in casedetail.updatedby%type,
p_return_cur_out              out sys_refcursor,
p_err_code_out                out number,
p_err_mesg_out                out varchar2)
is
v_casedetailid                casedetail.casedetailid%type;
begin
select casedetail_seq.nextval into v_casedetailid from dual;
if v_casedetailid is null
  then
    insert into casedetail
      (casedetailid,
       primarymemberplanid,
       servicetypecd,
       notifydt,
       assignedentityid,
       startdt,
       enddt,
       caretypemnemonic,
       casestatusmnemonic,
       odsorderingproviderid,
       sourcemnemonic,
       caseresolutionmnemonic,
       odsservicingproviderid,
       serviceitemmnemonic,
       providerinnetworkind,
       detailtxt,
       odsfacilityvendorid,
       servicelocationcd,
       facilityinnetworkind)
    values
      (casedetail_seq.nextval,
       p_primarymemberplanid_in,
       p_servicetypecd_in,
       p_notifydt_in,
       p_assignedentityid_in,
       p_startdt_in,
       p_enddt_in,
       p_caretypemnemonic_in,
       p_casestatusmnemonic_in,
       p_odsorderingproviderid_in,
       p_sourcemnemonic_in,
       p_caseresolutionmnemonic_in,
       p_odsservicingproviderid_in,
       p_serviceitemmnemonic_in,
       p_providerinnetworkind_in,
       p_detailtxt_in,
       p_odsfacilityvendorid_in,
       p_servicelocationcd_in,
       p_facilityinnetworkind_in);

    open p_return_cur_out for
      select casedetail_seq.currval
      from dual;
  else
    update casedetail
      set primarymemberplanid = p_primarymemberplanid_in,
          servicetypecd = p_servicetypecd_in,
          notifydt = p_notifydt_in,
          assignedentityid = p_assignedentityid_in,
          startdt = p_startdt_in,
          enddt = p_enddt_in,
          caretypemnemonic = p_caretypemnemonic_in,
          casestatusmnemonic = p_casestatusmnemonic_in,
          odsorderingproviderid = p_odsorderingproviderid_in,
          sourcemnemonic = p_sourcemnemonic_in,
          caseresolutionmnemonic = p_caseresolutionmnemonic_in,
          odsservicingproviderid = p_odsservicingproviderid_in,
          serviceitemmnemonic = p_serviceitemmnemonic_in,
          providerinnetworkind = p_providerinnetworkind_in,
          detailtxt = p_detailtxt_in,
          odsfacilityvendorid = p_odsfacilityvendorid_in,
          servicelocationcd = p_servicelocationcd_in,
          facilityinnetworkind = p_facilityinnetworkind_in,
          updateddt = systimestamp,
          updatedby = p_audit_user_in
      where casedetailid = v_casedetailid;

    open p_return_cur_out for
      select casedetail_seq.currval
      from dual;
end if;

p_err_code_out := 0;
exception
when others then
  p_err_code_out := -1;
  p_err_mesg_out := 'error in ct_cu_act_um1_pg.spt_save_casedetail =>'|| sqlerrm;
end spt_save_casedetail; 
```

这是包装规格：

```
create or replace
package ct_cu_act_um1_pg
is

  procedure spt_save_casedetail (
p_primarymemberplanid_in      in casedetail.primarymemberplanid%type,
p_servicetypecd_in            in casedetail.servicetypecd%type,
p_notifydt_in                 in casedetail.notifydt%type,
p_assignedentityid_in         in casedetail.assignedentityid%type,
p_startdt_in                  in casedetail.startdt%type,
p_enddt_in                    in casedetail.enddt%type,
p_caretypemnemonic_in         in casedetail.caretypemnemonic%type,
p_casestatusmnemonic_in       in casedetail.casestatusmnemonic%type,
p_odsorderingproviderid_in    in casedetail.odsorderingproviderid%type,
p_sourcemnemonic_in           in casedetail.sourcemnemonic%type,
p_caseresolutionmnemonic_in   in casedetail.caseresolutionmnemonic%type,
p_odsservicingproviderid_in   in casedetail.odsservicingproviderid%type,
p_serviceitemmnemonic_in      in casedetail.serviceitemmnemonic%type,
p_providerinnetworkind_in     in casedetail.providerinnetworkind%type,
p_detailtxt_in                in casedetail.detailtxt%type,
p_odsfacilityvendorid_in      in casedetail.odsfacilityvendorid%type,
p_servicelocationcd_in        in casedetail.servicelocationcd%type,
p_facilityinnetworkind_in     in casedetail.facilityinnetworkind%type,
p_return_cur_out              out sys_refcursor,
p_err_code_out                out number,
p_err_mesg_out                out varchar2
  ); 
```

我得到相同错误的第二个地方是我定义 v_casedetailid 的地方。我已经检查以确保所有内容都拼写正确，但也许我错过了一些东西，因为我已经看了一段时间了。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:20:07.587

您的过程规范和主体声明不匹配。

```
body:
p_facilityinnetworkind_in     in casedetail.facilityinnetworkind%type,
**p_audit_user_in               in casedetail.updatedby%type,**
p_return_cur_out              out sys_refcursor,
p_err_code_out                out number,
p_err_mesg_out                out varchar2)

spec:
**p_facilityinnetworkind_in     in casedetail.facilityinnetworkind%type,**
p_return_cur_out              out sys_refcursor,
p_err_code_out                out number,
p_err_mesg_out                out varchar2
  ); 
```

# jsp - 无法从 jsp 获取 struts 2 中的参数...为什么？

> ID：14418103
> 
> 赞同：0
> 
> 时间：2013-01-19T19:37:36.867
> 
> 标签：jsp, struts2

我正在尝试使用下一个 URL 执行操作

```
http://localhost:8080/FantasticWebsite/services/addPhone?id=6 
```

因此，我的参数对象必须至少具有值为“6”的键“id”，但不！，我在我的表单中获得了所有参数，但该 ID 没有出现。

我用这个获取参数：

```
id=Integer.parseInt(parameter.get("id")[0]); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:31:44.123

采用

```
String id = getRequest().getParameter("id"); 
```

在哪里

```
 protected HttpServletRequest getRequest() {
        return ServletActionContext.getRequest();
    } 
```

# php - 使用 sqlite / php 获取两个不同行/列中两个数字的差异

> ID：14418104
> 
> 赞同：1
> 
> 时间：2013-01-19T19:37:44.317
> 
> 标签：php, mysql, sql, select

我有一个带有名为“事件”的表的 SQLite 数据库，它具有以下结构：

```
rowid       ID                  startTimestamp   endTimestamp
1           00:50:c2:63:10:1a   1000             1010
2           00:50:c2:63:10:1a   1100             1030
3           00:50:c2:63:10:1a   1090             1110   
4           00:50:c2:63:10:1a   1210             1310
.
.
. 
```

计算 startTimestamp 和 endTimestamp 之间的平均时间是没有问题的：

```
SELECT ID, avg(endTimestamp - startTimestamp) AS duration FROM events WHERE senderID ="00:50:c2:63:10:1a" 
```

但是现在我想在一行和下一行之间计算 endTime 和 startTime 之间的平均差异，这对于我的示例来说意味着：

1100-1010 = 90

1090-1030 = 60

1210-1110 = 100

* * *

差值之和 = 90 + 60 + 100 = 250

平均差 = 250 / 3 = 83,33

有没有办法用 SQL 查询来做到这一点？或者是否有必要用 PHP 编写一段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:10:22.037

```
SELECT
    id,
    ( MAX(endtimestamp) - MIN(startTimestamp)
    - SUM(endtimestamp-startTimestamp)
    ) / (COUNT(*)-1) AS averageDifference
FROM
    events
GROUP BY
    id ; 
```

在 SQL-Fiddle 测试：**[test-1](http://www.sqlfiddle.com/#!2/66cbe/4)**（感谢@bonCodigo）

* * *

由于`MIN(endtimestamp)`可能不是最低`rowid`的，因此上述查询需要**更正**：

```
SELECT
    id,
    ( ( SELECT endtimestamp FROM events AS ee 
        WHERE ee.id = e.id ORDER BY rowid ASC LIMIT 1 )
    - ( SELECT startTimestamp FROM events AS ee
        WHERE ee.id = e.id ORDER BY rowid DESC LIMIT 1 )
    - SUM(endtimestamp-startTimestamp)
    ) / (COUNT(*)-1) AS averageDifference
FROM
    events AS e
GROUP BY
    id ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:42:18.500

试试这个：

```
SELECT id,( SUM(duration) / COUNT(*) ) duration
FROM (SELECT ID, (endTimestamp - startTimestamp) AS duration 
      FROM events WHERE senderID ="00:50:c2:63:10:1a") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T19:51:27.660

试试这个：不确定是否要使用`abs`，但要进行相应的调整。在我的示例中，我只使用了您的前几行。但是，如果您想使用不同的数据，则可以将正确的`id`值添加到`where condition`：

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/ffc18/1)

```
select id, 
sum(abs(endtimestamp - starttimestamp))/Count(*) 
as span from table1
where id = '00:50:c2:63:10:1a'
group by id
; 
```

样本表中所有 ID 的结果：

```
|                ID | SPAN |
----------------------------
| 00:50:c2:63:10:1a |   50 |
| 00:50:c2:63:10:2a |  100 | 
```

# algorithm - 为什么这些树与有序树相同但与二叉树不同

> ID：14418105
> 
> 赞同：3
> 
> 时间：2013-01-19T19:37:52.800
> 
> 标签：algorithm, data-structures, tree, binary-tree

我不明白？它们不应该与有序树不同吗？因为顺序不同

![在此处输入图像描述](../Images/a74c29ecc0f87a24ee13cc65e6aca0dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:08:14.593

在有序树中，子节点从左到右排序。它们没有相对于它们的父节点排序（或者，您可以认为父节点总是排在第一位）。如果只有一个孩子，那就只有一个孩子。

在二叉树中，有一个（可选的）左孩子和一个（可选的）右孩子。如果只有一个孩子，可能是左孩子也可能是右孩子，这两种情况是不同的。或者，您可以认为父节点位于子节点之间，因此您可以区分位于父节点之前的子节点和位于父节点之后的子节点。

具有相同节点数的有序树和二叉树之间存在同态性：即每棵有序树都唯一对应一棵二叉树。求一棵有序树对应的二叉树：使二叉树中每个节点的左子节点指向有序树中节点的最左子节点，使二叉树中每个节点的右子节点指向有序树中节点右侧的兄弟。（如何逆过程应该很明显，这样您就可以看到每棵二叉树都唯一地对应于有序树。）

因此，具有节点的二叉树的数量与具有`k`节点的有序树的数量相同`k`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:58:38.327

有序树或平面树是为每个顶点的子节点指定排序的有根树。这被称为“平面树”，因为子节点的排序相当于树在平面中的嵌入。给定一个有根树在平面中的嵌入，如果固定子节点的方向（从根开始，则第一个孩子，第二个孩子等），比如逆时针，然后嵌入给出孩子的顺序。**相反，给定一个有序树，并且按照惯例在顶部绘制根，那么有序树中的子节点可以从左到右绘制，从而产生一个本质上唯一的平面嵌入**。

来源：[http ://en.wikipedia.org/wiki/Ordered_tree#ordered_tree](http://en.wikipedia.org/wiki/Ordered_tree#ordered_tree)

我希望你明白了！！

# php - 联合查询或更好的选择

> ID：14418109
> 
> 赞同：0
> 
> 时间：2013-01-19T19:38:07.263
> 
> 标签：php, mysql, union, union-all

我有以下三个表，我想通过 从中提取数据`userid`，这是赋予它们关系的一个关键字段。我还想按`timestamp`下面的表模式示例以及我对不起作用的联合查询的示例来按顺序提取数据。

```
Table1: userid, event_id, event_name, timestamp
Table2: id_user, comment, timestamp
Table3: user_id, photo, timestamp 
```

* * *

```
 $result5 = mysql_query 
     ("(SELECT event_name, timestamp FROM table1 WHERE userid = '25')
    UNION ALL 
       (SELECT comment,timestamp FROM table2 WHERE id_user = '25')
    UNION ALL 
         (SELECT photo,timestamp FROM table3 WHERE user_id ='25')
    ORDER BY timestamp") 
    or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:40:28.163

考虑到并且不相关`event_name`，您不应该使用任何类型的 . 这些表的共同点是. 您正在寻找一个. 像这样的东西：`comment``photo``UNION``user_id``JOIN`

```
SELECT a.event_name, a.timestamp, b.comment, b.timestamp, c.photo, c.timestamp
FROM table1 a
INNER JOIN table2 b ON b.id_user = a.userid
INNER JOIN table3 c ON c.user_id = a.userid
WHERE a.userid = '25' 
```

# maven - maven pdf插件：以pdf格式显示当地时间

> ID：14418110
> 
> 赞同：1
> 
> 时间：2013-01-19T19:38:07.940
> 
> 标签：maven, maven-2, timezone, maven-pdf-plugin

我正在使用 maven 2.2.1 和 maven-pdf-plugin 在“mvn 站点”期间生成我的肯定报告的 PDF 版本。

我想在 PDF 本身中显示报告（即 PDF）生成时间戳，但在我的本地时区中，而不是在 UTC 中。我的本地时区是 UTC +5:30 (IST)。

这是我的 pom.xml 中 build/plugins 部分的片段：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-pdf-plugin</artifactId>
    <version>1.2</version>
    <executions>
        <execution>
            <id>pdf</id>
            <phase>site</phase>
            <goals>
                <goal>pdf</goal>
            </goals>
            <configuration>
                <aggregate>true</aggregate>
                <generateTOC>none</generateTOC>
                <outputDirectory>${project.reporting.outputDirectory}</outputDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

这是我的 pdf.xml：

```
<document xmlns="http://maven.apache.org/DOCUMENT/1.0.1"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/DOCUMENT/1.0.1 http://maven.apache.org/xsd/document-1.0.1.xsd"
          outputName="${artifactId}_surefire-report">

    <meta>
        <title>${artifactId} - Surefire Report</title>
        <author>QA Team</author>
    </meta>

    <toc></toc>

    <cover>
        <coverTitle>TNT:${artifactId}</coverTitle>
        <coverdate>${dateTime}</coverdate>
        <coverSubTitle>Surefire Test Report</coverSubTitle>
        <projectName>${project.name}</projectName>
    </cover>
</document> 
```

PDF 生成良好。问题是我希望`coverdate`在我当地的时区显示。[我已经尝试了Maven PDF 插件页面](http://maven.apache.org/plugins/maven-pdf-plugin/examples/filtering.html)上提到的一些日期/时间选项，例如：

`<coverdate>${dateTime}</coverdate>`

和

`<coverdate>${day}/${month}/${year} - ${hour}:${minute}:${second}</coverdate>`

但生成的时间戳始终是 UTC。

我也尝试了一些尝试，`<coverdate>${dateTime+5:30}</coverdate>`但这不起作用。

我尝试在`${maven.build.timestamp}`其中插入（如果在我的 pom 中使用确实是在我的当地时间），`coverdate`但是在生成 PDF 时这不会被插值。

如何获取本地时区的时间戳？我什至不需要该`<cover></cover>`部分；如果我能以某种方式在 PDF 中获取构建时间戳，我可以完全摆脱它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T04:57:02.627

我找到了一个迂回的方法来完成这个。

我将特定时区的时间戳放在我的 pom 的描述标签中，如下所示：

```
<description>${maven.build.timestamp}</description>

<properties>
    <maven.build.timestamp.format>E dd-MMM-yyyy HH:mm z</maven.build.timestamp.format>
</properties> 
```

现在我可以告诉 pdf 插件将其插入到封面日期中。我的 pdf.xml 有这个：

```
<cover>
    <coverTitle>My Cover Title</coverTitle>
    <coverdate>${project.description}</coverdate>
...
</cover> 
```

我现在在 PDF 封面上获得了所需的时间戳，在我的本地时间，我想要的格式。

诚然，将时间戳插入 pom 的描述标签并不是很好，但由于我不将描述标签用于其他任何事情，所以我可以忍受。

不幸的是，我无法访问 pdf.xml 中的任意 ${project.X} 属性...只有 ${project.name} 和 ${project.description} 等少数属性似乎有效。

# ruby-on-rails-3 - Capistrano Deploy 为我拥有的 gem 抛出了丢失的 gem 错误

> ID：14418113
> 
> 赞同：0
> 
> 时间：2013-01-19T19:38:24.587
> 
> 标签：ruby-on-rails-3, deployment, gem, capistrano

在添加 Thinking Sphinx 和Whenever gems 之后，我最近尝试为我的 Rails 应用程序部署 Capistrano，但部署失败了。我看到的消息很奇怪。CarrierWave 出现错误，这是我几周前安装和部署的 gem，没有问题。

`Could not find carrierwave-0.5.8 in any of the sources`

`Run 'bundle install' to install missing gems.`

但是当我 ssh 进入我的服务器并运行时，`bundle install`我得到了这个：

`Using carrierwave (0.5.8)`

`Your bundle is complete!`

什么可能导致此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:28:06.727

看起来这是一个失败的 Thinking Sphinx 安装，以某种方式破坏了下游的 Cap 部署。糟糕的错误报告！但我能够以这种方式深入了解它。

# php - 真正简单的 PHP/PDO 插入不起作用？

> ID：14418120
> 
> 赞同：0
> 
> 时间：2013-01-19T19:38:59.953
> 
> 标签：php, mysql, pdo

现在对 PDO 感到非常困惑！

我试图在我的表中插入任何东西，只有我不能，我有以下连接文件......

```
<?php

$username = 'access@site.co';
$password = 'access';

try {
    $dbh = new PDO('mysql:host=localhost;dbname=site_co_uk', $username, $password);
    $dbh = null;
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}

?> 
```

我的php是...

```
<?php

error_reporting(E_ALL);
include_once ('connection.php');

$STH = $dbh->prepare("INSERT INTO users ( firstname ) values ( 'Cathy' )");  
$STH->execute(); 

?> 
```

我的表中没有插入任何内容，有什么原因会发生这种情况吗？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T19:40:44.097

删除这个：

`$dbh = null;`

它将您的数据库连接设置为空。

# java - 所有算法的策略模式和迭代器

> ID：14418126
> 
> 赞同：0
> 
> 时间：2013-01-19T19:39:49.053
> 
> 标签：java, strategy-pattern

我有一个算法列表，我想在图像上运行以对其进行降噪。我有几种不同的算法来去噪我的照片。假设我有 denoise_1 和 denoise_2 和 denoise_3。但将来我需要添加 denoise_4、validation_four 等。

我需要在图片上运行所有的降噪，即使是添加新的降噪。

另外：如果我添加另一个算法，我必须通知系统。

我正在考虑使用策略和观察者模式，但我还没有找到可接受的解决方案。

这是正确的方法吗？？

如果打开一个新线程，我发现了一个类似的线程，但我不明白解决方案，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:45:35.460

是的策略很好：
让所有去噪算法实现一个通用接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:47:37.800

假设您所有的算法都实现相同的`DenoiseAlgorithm`. 只需将所有算法放在 a 中`List<DenoiseAlgorithm>`，然后通过迭代该列表来逐个运行它们。

如果列表是全局的，则添加新算法（在开头或结尾，由您决定）会对整个系统产生全局影响。

还要考虑[责任链](/questions/tagged/chain-of-responsibility "显示标记为“责任链”的问题")模式。

# java - Lucene 演示附带 .class 文件。如何将其转换为java文件

> ID：14418127
> 
> 赞同：-1
> 
> 时间：2013-01-19T19:40:04.673
> 
> 标签：java, lucene

我是java的绝对初学者。我想知道如何在 lucene 演示中转换 .class 文件，我想使用 java 版本。我该怎么做。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:42:59.687

`.class`文件被编译`.java`，就像`.exe`被编译一样，例如`.cpp`. 您可以使用 Java 反编译器通过该过程进行反转。但是我很确定源代码也是可用的，因为 Lucene 是开源的。

你想看哪些课？您很可能会在 Maven 存储库或[Lucene 的源代码控制存储库中](http://svn.apache.org/repos/asf/lucene/)找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:51:46.413

要反编译java类文件，可以使用[JAD Decompiler](http://www.varaneckas.com/jad/)

如果您不喜欢使用命令提示符，您可以使用[DJ Java Decompiler](http://www.neshkov.com/dj.html)

JAD 可用于许多操作系统，DJ 仅适用于 Windows

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:03:03.413

我假设您已经下载了这个 lucene 演示的代码，在 Eclipse 中打开了该项目，并且该演示使用了 lucene 库。

当然这个库使用编译的类，但你不需要反编译它们。您需要从与库版本（例如 3.6 或 4.0）匹配的 lucene 站点下载源代码。然后在 Eclipse 中，当您转到项目属性、库部分（我认为它在构建路径内）时，您可以添加一个文件夹，其中包含所需库的源代码（在本例中为 lucene jar）。完成后，如果您打开一个 Lucene 类，您将看到相关的 Java 源文件。

# mysql - 什么是正确的范围/索引来帮助通过 Rails 使范围查找更具性能？

> ID：14418134
> 
> 赞同：6
> 
> 时间：2013-01-19T19:40:35.953
> 
> 标签：mysql, ruby-on-rails, database, optimization, scope

我有一个相对较大的 4 深度关系数据设置，如下所示：

```
ClientApplication         has_many => ClientApplicationVersions
ClientApplicationVersions has_many => CloudLogs
CloudLogs                 has_many => Logs 
```

`client_applications`: (可能有 1,000 条记录)
   - `...`
   - `account_id`
   - `public_key`
   -`deleted_at`

`client_application_versions`: (可能有 10,000 条记录)
   - `...`
   - `client_application_id`
   - `public_key`
   -`deleted_at`

`cloud_logs`: (可能有 1,000,000 条记录)
   - ...
   - `client_application_version_id`
   - `public_key`
   -`deleted_at`

`logs`: (可能有 1,000,000,000 条记录)
   - `...`
   - `cloud_log_id`
   - `public_key`
   - `time_stamp`
   -`deleted_at`

* * *

我仍在开发中，所以结构和设置不是一成不变的，但我希望它设置好。使用 Rails 3.2.11 和 InnoDB MySQL。数据库当前填充了一小部分（与最终的数据库大小相比）数据集（`logs`只有 500,000 行）我有 4 个作用域查询，其中 3 个有问题，用于检索日志。

1.  抓取第一页日志，按时间戳排序，限制为`account_id`, `client_application.public_key`, `client_application_version.public_key`(超过 100 秒)
2.  抓取日志的第一页，按时间戳排序，限制为`account_id`, `client_application.public_key`（超过 100 秒）
3.  抓取日志的第一页，按时间戳排序，限制为`account_id`（超过 100 秒）
4.  获取日志的第一页，按时间戳排序（约 2 秒）

* * *

我正在使用 rails 范围来帮助进行这些调用：

```
 scope :account_id, proc {|account_id| joins(:client_application).where("client_applications.account_id = ?", account_id) }
  scope :client_application_key, proc {|client_application_key| joins(:client_application).where("client_applications.public_key = ?", client_application_key) }
  scope :client_application_version_key, proc {|client_application_version_key| joins(:client_application_version).where("client_application_versions.public_key = ?", client_application_version_key) }

  default_scope order('logs.timestamp DESC') 
```

我在每个表上都有索引`public_key`。我在`logs`表上有几个索引，包括优化器喜欢使用的索引 ( `index_logs_on_cloud_log_id`)，但是查询仍然需要 eons 才能运行。

* * *

以下是我如何调用该方法`rails console`：

```
Log.account_id(1).client_application_key('p0kZudG0').client_application_version_key('0HgoJRyE').page(1) 
```

...这是rails将其变成的内容：

```
SELECT `logs`.* FROM `logs` INNER JOIN `cloud_logs` ON `cloud_logs`.`id` = `logs`.`cloud_log_id` INNER JOIN `client_application_versions` ON `client_application_versions`.`id` = `cloud_logs`.`client_application_version_id` INNER JOIN `client_applications` ON `client_applications`.`id` = `client_application_versions`.`client_application_id` INNER JOIN `cloud_logs` `cloud_logs_logs_join` ON `cloud_logs_logs_join`.`id` = `logs`.`cloud_log_id` INNER JOIN `client_application_versions` `client_application_versions_logs` ON `client_application_versions_logs`.`id` = `cloud_logs_logs_join`.`client_application_version_id` WHERE (logs.deleted_at IS NULL) AND (client_applications.account_id = 1) AND (client_applications.public_key = 'p0kZudG0') AND (client_application_versions.public_key = '0HgoJRyE') ORDER BY logs.timestamp DESC LIMIT 100 OFFSET 0 
```

...这是该查询的 EXPLAIN 语句。

```
+----+-------------+----------------------------------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------+---------+------------------------------------------------------------------------+------+----------------------------------------------+
| id | select_type | table                            | type   | possible_keys                                                                                                                                         | key                                               | key_len | ref                                                                    | rows | Extra                                        |
+----+-------------+----------------------------------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------+---------+------------------------------------------------------------------------+------+----------------------------------------------+
|  1 | SIMPLE      | client_application_versions      | ref    | PRIMARY,index_client_application_versions_on_client_application_id,index_client_application_versions_on_public_key                                    | index_client_application_versions_on_public_key   | 768     | const                                                                  |    1 | Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | client_applications              | eq_ref | PRIMARY,index_client_applications_on_account_id,index_client_applications_on_public_key                                                               | PRIMARY                                           | 4       | cloudlog_production.client_application_versions.client_application_id  |    1 | Using where                                  |
|  1 | SIMPLE      | cloud_logs                       | ref    | PRIMARY,index_cloud_logs_on_client_application_version_id                                                                                             | index_cloud_logs_on_client_application_version_id | 5       | cloudlog_production.client_application_versions.id                     |  481 | Using where; Using index                     |
|  1 | SIMPLE      | cloud_logs_logs_join             | eq_ref | PRIMARY,index_cloud_logs_on_client_application_version_id                                                                                             | PRIMARY                                           | 4       | cloudlog_production.cloud_logs.id                                      |    1 |                                              |
|  1 | SIMPLE      | client_application_versions_logs | eq_ref | PRIMARY                                                                                                                                               | PRIMARY                                           | 4       | cloudlog_production.cloud_logs_logs_join.client_application_version_id |    1 | Using index                                  |
|  1 | SIMPLE      | logs                             | ref    | index_logs_on_cloud_log_id_and_deleted_at_and_timestamp,index_logs_on_cloud_log_id_and_deleted_at,index_logs_on_cloud_log_id,index_logs_on_deleted_at | index_logs_on_cloud_log_id                        | 5       | cloudlog_production.cloud_logs.id                                      |    4 | Using where                                  |
+----+-------------+----------------------------------+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------+---------+------------------------------------------------------------------------+------+----------------------------------------------+ 
```

* * *

这个问题有 3 个部分：

1.  我可以使用额外的索引来优化我的数据库，以帮助这些类型的连接相关的排序查询变得更高效吗？
2.  我可以优化 rails 代码以帮助这种类型的`find`运行以更高效的方式运行吗？
3.  我只是在接近这个范​​围内找到大型数据集的错误方法吗？

**更新 1/24/12**
正如 Geoff 和 J_MCCaffrey 在答案中所建议的，我已将查询分成 3 个不同的部分以尝试隔离问题。正如所料，这是处理最大表的问题。MYSQL 优化器通过使用不同的索引以不同方式处理此问题，但延迟仍然存在。这是这种方法的解释。

```
ClientApplication.find_by_account_id_and_public_key(1, 'p0kZudG0').versions.select{|cav| cav.public_key = '0HgoJRyE'}.first.logs.page(2)
  ClientApplication Load (165.9ms)  SELECT `client_applications`.* FROM `client_applications` WHERE `client_applications`.`account_id` = 1 AND `client_applications`.`public_key` = 'p0kZudG0' AND (client_applications.deleted_at IS NULL) ORDER BY client_applications.id LIMIT 1
  ClientApplicationVersion Load (105.1ms)  SELECT `client_application_versions`.* FROM `client_application_versions` WHERE `client_application_versions`.`client_application_id` = 3 AND (client_application_versions.deleted_at IS NULL) ORDER BY client_application_versions.created_at DESC, client_application_versions.id DESC
  Log Load (57295.0ms)  SELECT `logs`.* FROM `logs` INNER JOIN `cloud_logs` ON `logs`.`cloud_log_id` = `cloud_logs`.`id` WHERE `cloud_logs`.`client_application_version_id` = 49 AND (logs.deleted_at IS NULL) AND (cloud_logs.deleted_at IS NULL) ORDER BY logs.timestamp DESC, cloud_logs.received_at DESC LIMIT 100 OFFSET 100
  EXPLAIN (214.5ms)  EXPLAIN SELECT `logs`.* FROM `logs` INNER JOIN `cloud_logs` ON `logs`.`cloud_log_id` = `cloud_logs`.`id` WHERE `cloud_logs`.`client_application_version_id` = 49 AND (logs.deleted_at IS NULL) AND (cloud_logs.deleted_at IS NULL) ORDER BY logs.timestamp DESC, cloud_logs.received_at DESC LIMIT 100 OFFSET 100
EXPLAIN for: SELECT  `logs`.* FROM `logs` INNER JOIN `cloud_logs` ON `logs`.`cloud_log_id` = `cloud_logs`.`id` WHERE `cloud_logs`.`client_application_version_id` = 49 AND (logs.deleted_at IS NULL) AND (cloud_logs.deleted_at IS NULL) ORDER BY logs.timestamp DESC, cloud_logs.received_at DESC LIMIT 100 OFFSET 100
+----+-------------+------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------+---------+-----------------------------------+------+-------------------------------------------------------------------------------------------------------------------------------------------------+
| id | select_type | table      | type        | possible_keys                                                                                                                                         | key                                                                              | key_len | ref                               | rows | Extra                                                                                                                                           |
+----+-------------+------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------+---------+-----------------------------------+------+-------------------------------------------------------------------------------------------------------------------------------------------------+
|  1 | SIMPLE      | cloud_logs | index_merge | PRIMARY,index_cloud_logs_on_client_application_version_id,index_cloud_logs_on_deleted_at                                                              | index_cloud_logs_on_client_application_version_id,index_cloud_logs_on_deleted_at | 5,9     | NULL                              | 1874 | Using intersect(index_cloud_logs_on_client_application_version_id,index_cloud_logs_on_deleted_at); Using where; Using temporary; Using filesort |
|  1 | SIMPLE      | logs       | ref         | index_logs_on_cloud_log_id_and_deleted_at_and_timestamp,index_logs_on_cloud_log_id_and_deleted_at,index_logs_on_cloud_log_id,index_logs_on_deleted_at | index_logs_on_cloud_log_id                                                       | 5       | cloudlog_production.cloud_logs.id |    4 | Using where                                                                                                                                     |
+----+-------------+------------+-------------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------+---------+-----------------------------------+------+-------------------------------------------------------------------------------------------------------------------------------------------------+ 
```

**2012 年 1 月 25 日更新**
以下是所有相关表的索引：

```
CLIENT_APPLICATIONS:
  PRIMARY KEY  (`id`),
  UNIQUE KEY `index_client_applications_on_key` (`key`),
  KEY `index_client_applications_on_account_id` (`account_id`),
  KEY `index_client_applications_on_deleted_at` (`deleted_at`),
  KEY `index_client_applications_on_public_key` (`public_key`)

CLIENT_APPLICATION_VERSIONS:
  PRIMARY KEY  (`id`),
  KEY `index_client_application_versions_on_client_application_id` (`client_application_id`),
  KEY `index_client_application_versions_on_deleted_at` (`deleted_at`),
  KEY `index_client_application_versions_on_public_key` (`public_key`)

CLOUD_LOGS:
  PRIMARY KEY  (`id`),
  KEY `index_cloud_logs_on_api_client_version_id` (`api_client_version_id`),
  KEY `index_cloud_logs_on_client_application_version_id` (`client_application_version_id`),
  KEY `index_cloud_logs_on_deleted_at` (`deleted_at`),
  KEY `index_cloud_logs_on_device_id` (`device_id`),
  KEY `index_cloud_logs_on_public_key` (`public_key`),
  KEY `index_cloud_logs_on_received_at` (`received_at`)

LOGS:
  PRIMARY KEY  (`id`),
  KEY `index_logs_on_class_name` (`class_name`),
  KEY `index_logs_on_cloud_log_id_and_deleted_at_and_timestamp` (`cloud_log_id`,`deleted_at`,`timestamp`),
  KEY `index_logs_on_cloud_log_id_and_deleted_at` (`cloud_log_id`,`deleted_at`),
  KEY `index_logs_on_cloud_log_id` (`cloud_log_id`),
  KEY `index_logs_on_deleted_at` (`deleted_at`),
  KEY `index_logs_on_file_name` (`file_name`),
  KEY `index_logs_on_method_name` (`method_name`),
  KEY `index_logs_on_public_key` (`public_key`),
  KEY `index_logs_on_timestamp` USING BTREE (`timestamp`) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T02:27:36.340

以更好的结构显示它，查询看起来像这样（已经重新排列）

```
SELECT
  `logs`.*
FROM
  `logs` as l
  INNER JOIN `cloud_logs` as cl1
    ON
      cl1.id = l.cloud_log_id
  INNER JOIN `cloud_logs` as cl2
    ON
      cl2.id = l.cloud_log_id
  INNER JOIN `client_application_versions` as cav1
    ON
      cav1.id = cl1.client_application_version_id
  INNER JOIN `client_application_versions` as cav2
    ON
      cav2.id = cl2.client_application_version_id
  INNER JOIN `client_applications` as ca
    ON
      ca.id = cav1.client_application_id
WHERE
  (l.deleted_at IS NULL)
    AND
  (ca.account_id = 1)
    AND
  (ca.public_key = 'p0kZudG0')
    AND
  (cav.public_key = '0HgoJRyE')
ORDER BY
  logs.timestamp DESC
LIMIT
  0, 100 
```

在查看 cav1/cl1 和 cav2/cl2 时，可以看到，从未使用过 cav2 和 cl2。除了 ON 语句之外，没有对其应用过滤器。

因此 cav1 链接到正确的帐户，cav2 不链接到任何帐户，而是包含所有匹配的帐户。这对于查询的结果没有问题，但对于连接缓冲区的大小。

删除连接（以及其中的一部分）会产生：

```
SELECT
  `logs`.*
FROM
  `logs` as l
  INNER JOIN `cloud_logs` as cl1
    ON
      cl1.id = l.cloud_log_id
--  INNER JOIN `cloud_logs` as cl2
--    ON
--      cl2.id = l.cloud_log_id
  INNER JOIN `client_application_versions` as cav1 use index for join (`index_cavs_on_client_application_id_and_public_key`)
    ON
      cav1.id = cl1.client_application_version_id
        AND
      cav1.public_key = '0HgoJRyE'

--  INNER JOIN `client_application_versions` as cav2
--    ON
--      cav2.id = cl2.client_application_version_id
  INNER JOIN `client_applications` as ca
    ON
      ca.id = cav1.client_application_id
WHERE
  (l.deleted_at IS NULL)
    AND
  (ca.account_id = 1)
    AND
  (ca.public_key = 'p0kZudG0')
ORDER BY
  logs.timestamp DESC
LIMIT
  0, 100 
```

这个应该更快。

将其打包到控制台中可用的东西中（假设正确的表关系和 meta_where）：

```
Log.where(:deleted_at.ne => nil).order("logs.timestamp desc").joins(:cloud_logs) & \
CloudLog.joins(:client_application_versions) & \
ClientApplicationVersion.where(:public_key => '0HgoJRyE').joins(:client_applications) & \
ClientApplication.where(:public_key => 'p0kZudG0', :account_id => 1) 
```

由于我无法在此处重现此内容，因此您可能必须自己尝试（或在末尾添加 to_sql），并为上面的缩短查询添加说明。

结果可能很有趣。

更新：看到结果和定义后（下面的评论）：

尝试添加密钥：

```
alter table client_application_versions add key (`client_application_id`, `public_key`); 
```

这应该可以防止文件排序并加快速度。

编辑：更新查询以提示 mysql 关于密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:33:23.977

不幸的是，我的 Rails 优化经验都是 PostgreSQL 的，所以大部分可能都不适用。不过，我确实有一些可能适用的建议：

尝试在您的范围内使用`joins`而不是-用于触发急切加载 - 您看到的某些减速完全有可能是加载了不需要的模型。即使不是，使用instead 应该会产生一个更具可读性的查询 - 就是将所有列别名为“t2_r8”，依此类推。`includes``includes``joins``includes`

此外，您需要确保所有可能被过滤的列都被索引 - 一般来说，`_id`以这种方式结尾的列可能会被引用，并且可能应该被索引，以及您专门过滤的任何列在范围内（如`client_application_version_key`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:13:13.117

我正在为我自己的问题写一个可能的解决方案，希望能有更好的答案。目前，数据库是完全建立的，并且是按书关系建立的。

```
ClientApplication         has_many => ClientApplicationVersions
ClientApplicationVersions has_many => CloudLogs
CloudLogs                 has_many => Logs 
```

这意味着当我需要查找属于客户端应用程序的日志时，我必须进行 3 次额外的连接才能获得它。通过向 Logs 表引入一些`foreign_key`非规范化，我可以跳过所有连接：

```
ClientApplication         has_many => ClientApplicationVersions
ClientApplication         has_many => Logs
ClientApplicationVersions has_many => CloudLogs
ClientApplicationVersions has_many => Logs
CloudLogs                 has_many => Logs 
```

最终结果是我的 Logs 表中会有一些额外的列：`client_application_key`、`client_application_version_key`和`cloud_log_key`。

尽管我冒着数据不一致的风险，但我可以避免这里的 3 个连接有助于降低查询的性能。有人请告诉我这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T22:33:44.350

试图回答你的每一个问题：

1.  当然！您正在搜索的任何内容都应该被编入索引。如果没有索引，则必须进行全表扫描。`references`如果您使用 in 中的函数，在您进行初始迁移时将创建的关联 ID 之上`create_table`，您至少要搜索以下内容：

    *   日志.时间戳
    *   client_application_versions.public_key
    *   client_applications.public_key
    *   logs.deleted_at

    这些可能都应该被索引。当然，如果您在定义关联外键时没有使用`references`，那么也添加它们。当然，与指数有一个权衡。它们就像读取的魔法一样，但它们可能会显着减慢您的写入速度。它们减慢或加快速度的程度也可能在很大程度上取决于数据库。

2.  我不这么认为。你的 Rails 代码对我来说看起来很合适。我唯一的评论是，这`scope`实际上只是定义函数的一种简写方式。我认为如果你直接定义函数会更容易阅读：

    ```
    self.account_id(account_id)
      joins(:client_application).where("client_applications.account_id = ?", account_id)
    end 
    ```

3.  也许！不幸的是，这不是一个容易回答的问题，因为它确实取决于数据的样子。您真的需要同一个数据库表中的数十亿条日志吗？是否有某种方法可以自然地将数据分解为具有相同架构的不同表？您可能还想研究数据库分片。

我希望这会有所帮助。

**编辑：**

为什么要朝着最痛苦的方向进行查询？您是否尝试过从以下方面扭转它：

```
Log.account_id(1).client_application_key('p0kZudG0').client_application_version_key('0HgoJRyE').page(1) 
```

对于这样的事情：

```
ClientApplication.find_all_by_account_id(1).where(public_key: 'p0kZudG0').joins(:client_application_version).where("client_application_versions.public_key=?",'0HgoJRyE').logs.page(1) 
```

您应该定义一些范围以使其更具可读性，但希望您能理解。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T22:48:15.053

当我遇到这样的查询性能问题时，我会查看 Rails 正在做什么，并找出是否有更好的方法来获得我想要的。大多数时候 Rails 查询会很好，但有时你会意识到你可以得到你需要的更快/更清洁的方式。

您可能能够在 2 个查询中获得您想要的内容，但我会首先分解连接并查看如果您输入从连接中获得的数据，查询的执行情况。

您是否在没有限制和偏移的情况下测试了结果？我想排除排序和限制部分，并观察性能。我以前看到过限制和偏移的大问题，并且有一些方法可以调整 mysql 如何处理内存中的排序，而不是像你目前正在做的那样使用临时表和文件排序。

**编辑**

您可以先查询 id，然后根据 id 查询所有列。

从内部连接中选择`logs`.id 。= 。在哪里。= 49 AND (logs.deleted_at IS NULL) AND (cloud_logs.deleted_at IS NULL) ORDER BY logs.timestamp DESC 限制 100`logs``cloud_logs``logs``cloud_log_id``cloud_logs``id``cloud_logs``client_application_version_id`

这个查询快吗？（它应该能够在不扫描表的情况下从索引中获取 id）更具侵入性的更改可能是在数据库级别对数据进行分区，但我认为现在建议这样做还为时过早。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T05:17:19.030

您的索引定义不正确`index_logs_on_cloud_log_id_and_deleted_at_and_timestamp`

您的查询花费太长时间的部分是`order by`子句，您正在排序，`timestamp`但它`timestamp`是索引的最后一个键。在 MySQL 中，索引中后面的键将不会用于优化，`order by`除非前面的键是`where`子句中的常量。请参阅[http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

对于初学者，只需创建一个索引`timestamp`并查看是否可以加快查询速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T15:47:41.300

嗯，这有点难，因为为了获得性能，你必须牺牲可读性，或者反过来。所以，回答你的问题：

1.  索引是一个想法，但它的成功可能因表大小以及查询运行的频率和键组合而异。但在我看来，您查询的是同一件事，只是订购方式不同。那么......为什么不使用数据库视图呢？他们在 Rails 中的实现很糟糕，但它是可用的：[https ://github.com/eladmeidar/PlainViews](https://github.com/eladmeidar/PlainViews)
2.  （忘记你是否同意我的观点建议）是的，你可以。不要使用范围。ARel 已经使它们实际上已经过时了，在你的例子中绝对是这样，因为你可以只使用 ARel 来进行描述。还有一件事：不要用 ARel 编写 SQL。你会错过很多好东西，比如重命名表以适应连接和东西，这可能会弄乱你的索引。更像这样的东西：

    ```
    YourObject.joins(:client_application).
               where(ClientApplication.arel_table[:public_key].eq(client_application_key)) 
    ```

3.  取决于你要在哪里使用它。如果查询是您的应用程序功能的核心，那么您应该以其他方式进行更多调查，以提高其性能。例如，DB 提供了很多 Web 框架（尤其是 Rails）不提倡的特性，比如上面提到的视图或存储过程。如何利用这一点并保持代码可读性是我们开发人员每天面临的挑战。

但是我还有一个问题：为什么不使用 MongoDB？[http://nosql.mypopescu.com/post/1016320617/mongodb-is-web-scale](http://nosql.mypopescu.com/post/1016320617/mongodb-is-web-scale)

# android - 谷歌地图当前位置标记和精度半径叠加

> ID：14418135
> 
> 赞同：6
> 
> 时间：2013-01-19T19:40:37.357
> 
> 标签：android, google-maps, google-maps-android-api-2

如何在 Google Maps Android API v2 上显示一个闪烁的省略号和一个圆圈来展示用户的当前位置和准确性（蓝色覆盖）？

更具体地说，我怎样才能拥有像谷歌使用的动画绘图？以及如何将圆圈显示为蓝色叠加层（25% alpha 或类似的东西）？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T14:40:26.363

实际上，解决方案比我想象的要简单。

使用 Google Maps Android API v2 时，GoogleMap 对象有一个名为 setMyLocation 的方法。如果将其设置为 true，将激活 Maps API 的 my-location 布局，并显示此蓝色省略号或指示方位的箭头。

如果需要在创建activity时自动将相机移动到用户的位置，需要按照这篇文章：[http ://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2 -mylocation-location-source-and-event-handling/](http://discgolfsoftware.wordpress.com/2012/12/06/google-maps-android-api-v2-mylocation-locationsource-and-event-handling/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T00:00:57.167

使用 setMyLocationEnabled(true) 设置您的地图，例如：

```
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            mMap.setMyLocationEnabled(true);
            mMap.setOnMyLocationButtonClickListener(this);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T03:57:08.240

我认为您想让 Google Maps 中实现的默认属性进行修改。如您所知，Google Maps 在地图上提供了许多默认功能，例如 My Location dot(market)、A Big Circle around my location 等。

**要修改隐藏在谷歌地图中的默认属性**，请按照以下步骤操作；

1.在 Eclipse 中，选择您的项目并选择**DDMS** (Window->OpenPerspective->DDMS)。

2.在 DDMS 中，单击“ **FileExplorer** ”选项卡（在右侧窗口中）并在“名称”列中找到“系统”。

3.导航到“ **system->app->Maps.apk** ”，你会找到“Maps.apk”。这是谷歌地图应用程序。

4.选择“Maps.apk”并单击此“FileExplorer”选项卡右上角的小图标。如果你接近这个图标，你会得到“**从设备中提取文件**”的提示。单击此按钮并将“Maps.apk”下载到您的 PC 目录。

5.在您下载的PC中，**将“Maps.apk”的文件扩展名更改为“Maps.zip”**。将更改后的“Maps.zip”解压缩到“Maps 文件夹”中。您可以看到 Maps.apk 的所有文件。

6.导航到解压文件夹中的**res文件夹，然后****您将获得当前在Google Maps中使用的所有可绘制图像和xml**。

7.就是这样。这是如何查看谷歌地图资源。

1.  但是要查看所有完整的项目文件，你必须使用反编译工具反编译这个应用程序，但我不会在这里解释如何使用这个反编译工具。

# xml - 持久性 xml 2 表

> ID：14418137
> 
> 赞同：1
> 
> 时间：2013-01-19T19:41:08.983
> 
> 标签：xml, hibernate, jpa

我目前有以下持久性 xml 文件，我正在使用它来创建两个数据库，一个包含一个用户表（从 java 实体类映射），另一个映射一个怪物表（如上）。

我对 JPA 完全陌生，这是我第一次使用它，到目前为止，我已经设法将以下 xml 代码拼凑在一起：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="monsters" transaction-type="RESOURCE_LOCAL">
    <class>databaseManagement.Monster</class>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="jdbc:hsqldb:monsters"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
  <persistence-unit name="users" transaction-type="RESOURCE_LOCAL">
    <class>databaseManagement.User</class>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="jdbc:hsqldb:users"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
</persistence> 
```

但是，我想要的是 user 和 monster 表是单个数据库中的两个表，而不是当前两个单独数据库中的两个表，但是我不知道该怎么做。

非常感谢，我真的很想知道这是如何完成的，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:02:53.023

这很简单，您必须删除一个**持久单元**并在剩余单元中添加删除类。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence  http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="monsters" transaction-type="RESOURCE_LOCAL">
    <class>databaseManagement.Monster</class>
    <class>databaseManagement.User</class>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
      <property name="hibernate.connection.username" value=""/>
      <property name="hibernate.connection.password" value=""/>
      <property name="hibernate.connection.url" value="jdbc:hsqldb:monsters"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
    </properties>
  </persistence-unit>
</persistence> 
```

在这里查看更多[示例](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/configuration.html#setup-configuration)

# css - 删除 CSS 空白

> ID：14418140
> 
> 赞同：2
> 
> 时间：2013-01-19T19:41:17.287
> 
> 标签：css, wordpress

我正在为我的妻子整理一个网页，但我遇到了一个我无法弄清楚的 CSS 问题。我有一个图像滑块（RoyalSlider），我希望它周围没有空白，但是滑块 div 之前的各种嵌套 div 添加了填充、边距和边框。类和类中的格式在页面上的多个位置使用，所以我不能简单地更改每个元素而不破坏页面的其他元素，我*更愿意*这样做而不弄乱 PHP。

下面是导致格式化的 div，用标签表示它们是如何嵌套的，每个 div 下面是 div 的 CSS 格式。

```
<div class="container">
    #section-content .container {
        padding-top: 20px;
    }

    #section-content .container {
        border-left: 10px solid white;
        border-right: 10px solid white;
    }

        <div class="eleven columns content sixteen no-thumbnail">
            .content {
                padding: 10px 0 0;
            }

            .column, .columns {
                float: left;
                display: inline;
                margin-left: 10px;
                margin-right: 10px;
            }

                <div class="the_content post type-post hentry excerpt clearfix">
                    .content .hentry {
                        padding-bottom: 15px;
                    }

                    <div class="royalSlider">
                        <div class="rsOverflow">
                            <div class="rsContainer"> 
```

我认为我可以用一堆 > （或其他东西......我的 CSS 技能很初级）来指定当 RoyalSlider div 存在时它将覆盖所有其他规则，但我无法弄清楚如何去做吧。

该页面的 URL 在这里：

[http://rachelhappen.com/high-res-royal-test-post/](http://rachelhappen.com/high-res-royal-test-post/)

这是一张图片，展示了它现在的样子，我希望它是什么样的，以及 CSS 格式化方式的颜色编码图形。

[![网页图片](../Images/39919ba73ffc0dafdd09e66ec2e6a3c6.png)](https://i.stack.imgur.com/7nTS1.jpg)
[（来源：[rachelhappen.com](http://rachelhappen.com/wp-content/uploads/borders.jpg)）]

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:28:54.317

您可以尝试类层次结构。我假设它`royalSlider`肯定会在那里，那么您可以尝试使用它的层次结构来指定适用于它的规则。

[例子](http://cssdeck.com/labs/uxqrqccr)

你可以试试

```
.container .royalSlider{
/* rules here */
} 
```

希望能帮助到你。

[**编辑**]：所以你的问题是填充在于父级，因此问题。

[问题](http://cssdeck.com/labs/eobgg0uf)

[解决](http://cssdeck.com/labs/xn69tmxb)方法 ==> 在容器上尝试相同的背景颜色 - 隐藏空白。不是一个完美的解决方案 - 只是一种解决方法。如果您希望图像居中，则不适合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:53:07.827

给图片一个ID，把它的padding设置为0,0,0,0，如果图片下面还有一些空白，把display属性设置为block；

# c# - Linq 选择分组依据

> ID：14418142
> 
> 赞同：10
> 
> 时间：2013-01-19T19:41:38.397
> 
> 标签：c#, linq, group-by

我有以下类结构：

```
public class PriceLog
{
   public DateTime LogDateTime {get; set;}
   public int Price {get; set;}
} 
```

对于**List<PriceLog>**我想要一个 Linq 查询来生成一个输出，该输出相当于如下所示的数据：

日志日期时间 | AVG(价格)
2012 年 1 月 | 2000年 2012 年
2 月 | 3000

简单地说：我想计算一年中每个月的平均价格。
注意：LogDateTime 属性的格式应为`LogDateTime.ToString("MMM yyyy")`

我尝试了以下方法，但不确定它是否会产生所需的结果：

```
var result = from priceLog in PriceLogList
                         group priceLog by priceLog.LogDateTime.ToString("MMM yyyy") into dateGroup
                         select new PriceLog { GoldPrice = (int)dateGroup.Average(p => p.GoldPrice), SilverPrice = (int)dateGroup.Average(p => p.SilverPrice)}; 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T20:03:44.700

这将为您提供一系列匿名对象，其中包含日期字符串和两个具有平均价格的属性：

```
var query = from p in PriceLogList
            group p by p.LogDateTime.ToString("MMM yyyy") into g
            select new { 
               LogDate = g.Key,
               AvgGoldPrice = (int)g.Average(x => x.GoldPrice), 
               AvgSilverPrice = (int)g.Average(x => x.SilverPrice)
            }; 
```

如果您需要获取 PriceLog 对象的列表：

```
var query = from p in PriceLogList
            group p by p.LogDateTime.ToString("MMM yyyy") into g
            select new PriceLog { 
               LogDateTime = DateTime.Parse(g.Key),
               GoldPrice = (int)g.Average(x => x.GoldPrice), 
               SilverPrice = (int)g.Average(x => x.SilverPrice)
            }; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:49:49.753

```
 from p in PriceLog
    group p by p.LogDateTime.ToString("MMM") into g
    select new 
    { 
        LogDate = g.Key.ToString("MMM yyyy"),
        GoldPrice = (int)dateGroup.Average(p => p.GoldPrice), 
        SilverPrice = (int)dateGroup.Average(p => p.SilverPrice) 
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T20:02:30.367

你应该这样尝试：

```
var result =
        from priceLog in PriceLogList
        group priceLog by priceLog.LogDateTime.ToString("MMM yyyy") into dateGroup
        select new {
            LogDateTime = dateGroup.Key,
            AvgPrice = dateGroup.Average(priceLog => priceLog.Price)
        }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T20:08:44.037

```
var result = priceLog.GroupBy(s => s.LogDateTime.ToString("MMM yyyy")).Select(grp => new PriceLog() { LogDateTime = Convert.ToDateTime(grp.Key), Price = (int)grp.Average(p => p.Price) }).ToList(); 
```

我已将其转换为 int 因为我的 Price 字段是 int 并且 Average 方法返回 double 。我希望这会有所帮助

# python - Python lxml，SVG属性中的unicode匹配

> ID：14418144
> 
> 赞同：1
> 
> 时间：2013-01-19T19:41:57.363
> 
> 标签：python, xml, svg, lxml

我正在尝试根据属性的内容在 SVG（字体）文件中查找 XML 元素，如下所示：

```
font = et.ElementTree(file='fontfile.svg')
glyph = font.find('//n:glyph[@unicode="%s"]' % symbol, namespaces={'n': SVGNS}) 
```

字形示例——我试图匹配的——是：

```
<glyph unicode="&#xa9;" horiz-adv-x="1792" d="M834 ... -40t-121 -18z " />
<glyph unicode="C" horiz-adv-x="1509" d="M1766 338q-49 ... 83.5v-215z" /> 
```

问题是，例如，当

```
symbol = "C" 
```

它工作正常（有一个匹配），但是当

```
symbol = "&#xa9;" 
```

它没有。我怀疑在匹配的一个方向上存在 unicode 解释，但在另一个方向上没有。解决此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:56:41.670

您可以使用 unicode 指定符号：`symbol = u'\xa9'`

```
import lxml.etree as ET

content = '''\
<root xmlns="SVGNS">
<glyph unicode="&#xa9;" horiz-adv-x="1792" d="M834 ... -40t-121 -18z " />
<glyph unicode="C" horiz-adv-x="1509" d="M1766 338q-49 ... 83.5v-215z" />
</root>'''

font = ET.fromstring(content)
symbol = u'\xa9'
for glyph in font.xpath(u'//n:glyph[@unicode="%s"]'%symbol,  namespaces={'n': 'SVGNS'}):
    print(ET.tostring(glyph)) 
```

产量

```
<glyph xmlns="SVGNS" unicode="&#xA9;" horiz-adv-x="1792" d="M834 ... -40t-121 -18z "/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:02:23.913

基于 unutbu 的回答，当你这样做时`ET.fromstring`，它会将 HTML 实体转换为`unicode`对象作为属性。

```
>>> import lxml.etree as ET
>>> 
>>> content = '''\
... <root xmlns="SVGNS">
... <glyph unicode="&#xa9;" horiz-adv-x="1792" d="M834 ... -40t-121 -18z " />
... <glyph unicode="C" horiz-adv-x="1509" d="M1766 338q-49 ... 83.5v-215z" />
... </root>'''
>>> font = ET.fromstring(content)
>>> font
<Element {SVGNS}root at 0x7fd7ab978410>
>>> font.xpath('//n:glyph', namespaces={'n':'SVGNS'})[0].attrib
{'horiz-adv-x': '1792', 'unicode': u'\xa9', 'd': 'M834 ... -40t-121 -18z '} 
```

因此，最终的答案是 HTML 实体`&#xa9;`不再存在于 中`font`，要搜索它需要将其转换为 unicode。[这里解释了一些方法来做到这一点](http://fredericiana.com/2010/10/08/decoding-html-entities-to-text-in-python/)。

# iphone - 如何通过扬声器而不是更弱的耳机播放音频？

> ID：14418147
> 
> 赞同：10
> 
> 时间：2013-01-19T19:42:19.170
> 
> 标签：iphone, ios, ipad, core-audio

我正在学习核心音频。由于某种原因，处理图的声音只能通过较弱的“耳扬声器”（当您将设备放在耳边时）播放，而不是通过 iPhone 的常规扬声器播放。

这是设置音频会话的代码，但我看不到它配置音频路由的位置：

```
- (void) setupAudioSession {

    AVAudioSession *mySession = [AVAudioSession sharedInstance];

    // Specify that this object is the delegate of the audio session, so that
    //    this object's endInterruption method will be invoked when needed.
    [mySession setDelegate: self];

    // Assign the Playback category to the audio session.
    NSError *audioSessionError = nil;
    [mySession setCategory: AVAudioSessionCategoryPlayAndRecord//AVAudioSessionCategoryPlayback
                     error: &audioSessionError];

    if (audioSessionError != nil) {

        NSLog (@"Error setting audio session category.");
        return;
    }

    // Request the desired hardware sample rate.
    self.graphSampleRate = 44100.0;    // Hertz

    [mySession setPreferredHardwareSampleRate: graphSampleRate
                                        error: &audioSessionError];

    if (audioSessionError != nil) {

        NSLog (@"Error setting preferred hardware sample rate.");
        return;
    }

    // Activate the audio session
    [mySession setActive: YES
                   error: &audioSessionError];

    if (audioSessionError != nil) {

        NSLog (@"Error activating audio session during initial setup.");
        return;
    }

    // Obtain the actual hardware sample rate and store it for later use in the audio processing graph.
    self.graphSampleRate = [mySession currentHardwareSampleRate];

    // Register the audio route change listener callback function with the audio session.
    AudioSessionAddPropertyListener (
        kAudioSessionProperty_AudioRouteChange,
        audioRouteChangeListenerCallback,
        self
    );
} 
```

使用音频单元播放声音时，您在核心音频的哪个位置说“通过扬声器播放”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-11T13:58:25.930

您可以使用`setCategory` `withOption:`

```
[mySession setCategory:AVAudioSessionCategoryPlayAndRecord withOptions:AVAudioSessionCategoryOptionDefaultToSpeaker error:&audioSessionError]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-12T15:24:28.920

我有同样的问题。原来这与“播放和记录”类别有关。只需要重定向音频输出。

```
UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;

AudioSessionSetProperty (
    kAudioSessionProperty_OverrideAudioRoute,
    sizeof (audioRouteOverride),
    &audioRouteOverride
); 
```

资源：

*   [http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW35](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html#//apple_ref/doc/uid/TP40007875-CH6-SW35)

# windows - PE 文件部分名称

> ID：14418153
> 
> 赞同：2
> 
> 时间：2013-01-19T19:43:13.920
> 
> 标签：windows, portable-executable

根据这篇文章[http://msdn.microsoft.com/en-us/library/ms809762.aspx?ppud=4](http://msdn.microsoft.com/en-us/library/ms809762.aspx?ppud=4)
我们可以用自定义名称命名 PE 部分。
因此，在一个 PE 文件中，它的创建者已经用他自己的名称替换了部分名称，
现在如果“.pdata”部分不再称为“.pdata”，所以我无法通过它的名称找到它。
我怎样才能找到“.pdata”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:42:51.623

正确，根据[Windows Portable Executable 规范](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)和其他来源（如 Matt Pietrek），部分名称是为人类制作的！通常，编译器为特定类型的部分内容设置“标准”名称（例如，代码的“.text”等）。但是，加载程序会完全忽略这些名称。可以使用不同的方法（使用 pragma 或其他工具，例如 Peid 等）修改这些部分的名称。感兴趣的部分 (.pdata) 与 IMAGE_DIRECTORY_ENTRY_EXCEPTION 目录相关联。

要找到重命名后的 .pdata 部分（顺便说一句，指示图像是 64 位），您需要做的就是搜索 IMAGE_DIRECTORY_ENTRY_EXCEPTION 目录，并根据其内容检索它所在的部分（您可以对所有目录执行此操作）。

# sql - 查询条件疑点

> ID：14418160
> 
> 赞同：0
> 
> 时间：2013-01-19T19:44:01.510
> 
> 标签：sql, sqlite

我有两张桌子

**1.员工**

```
EMP_NAME,

EMP_CODE 
```

**2.假期**

```
EMP_NAME,

EMP_CODE,

VACATION_START_DATE-->date type

VACATION_END_DATE-->date type, 
```

我的问题是如何查询`EMP_NAME`从 table1(Employee) 获取今天不在中间`VACATION_START_DATE`的`VACATION_END_DATE`table2(Vacations)..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:18:10.120

请试试这个：假设你没有`emp_name`假期表..以及`emp_code`两个表之间的关系。所以你可以使用`join`s。

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/fe11a/1)

```
select e.emp_code, e.emp_name, 
v.start_date, v.end_Date
from emp e
inner join
vacation v
on e.emp_code = v.emp_code
where not (Now() between v.start_date 
and v.end_date)
;

| EMP_CODE | EMP_NAME |                      START_DATE |                        END_DATE |
-------------------------------------------------------------------------------------------
|        1 |     john | December, 10 2012 00:00:00+0000 | December, 20 2012 00:00:00+0000 |
|        2 |     kate | December, 20 2012 00:00:00+0000 | December, 30 2012 00:00:00+0000 |
|        3 |      tim | December, 24 2012 00:00:00+0000 |  January, 01 2013 00:00:00+0000 |
|        1 |     john |  January, 01 2013 00:00:00+0000 |  January, 08 2013 00:00:00+0000 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:18:45.177

不确定您的意思是*“今天”*是变量还是系统日期，因此可能需要修改以下代码，但我认为它可能有效：

```
SELECT
    EMP_NAME
FROM
    EMPLOYEE
WHERE
    NOT EXISTS (SELECT * FROM VACATIONS WHERE EMP_NAME = EMPLOYEE.EMP_NAME AND
                VACATIONS.VACATION_START_DATE >= Today AND
                VACATIONS.VACATION_END_DATE <= Today) 
```

# jquery - 从左到右动画显示/隐藏 div

> ID：14418165
> 
> 赞同：2
> 
> 时间：2013-01-19T19:44:49.297
> 
> 标签：jquery, animation

我目前正在使用以下代码。

```
<script type="text/javascript">

$(document).ready(function(){

 $(".slidingDiv").hide();
 $(".show_hide").show();

 $('.show_hide').toggle(function(){
   $(".slidingDiv").animate({
       opacity: 0.25,
       left: '+=50',
       height: 'toggle'
       }, 5000,
     function(){
       $("#plus").text("-")
     }
   );
 },function(){
     $(".slidingDiv").slideUp(
     function(){
       $("#plus").text("+")
     }
     );
 });
});

</script> 
```

我的动画正在运行，但它上下滑动。我宁愿让它从左向右滑动来显示。这似乎是一个简单的修复，但我在让它工作时遇到了一些问题。

想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T02:58:52.810

您可以使用

右滑：

```
 .animate({ width: 'show' }); 
```

左滑：

```
 .animate({ width: 'hide' }); 
```

请参考这个小提琴：http: [//jsfiddle.net/pitchaip/dK6Zv/](http://jsfiddle.net/pitchaip/dK6Zv/)

# java - 标签名称下方的红线

> ID：14418173
> 
> 赞同：0
> 
> 时间：2013-01-19T19:46:07.310
> 
> 标签：java, android

好吧，下面的图片说明了一切。我完全不知道是什么导致标签标题带有红色下划线。我想这与语言有关（顺便说一句是荷兰语）。选项卡是在 SwipeyTabs 和 Fragments 的帮助下生成的。

将标题添加到选项卡的代码如下：

```
public TextView getTab() {
        TextView title = (TextView) LayoutInflater.from(context).inflate(R.layout.tab_indicator, layout, false);
        title.setText(getStringFromCalendar(date));

        return title;
  } 
```

有谁知道我该如何解决这个问题？

提前致谢。

![示例 1](../Images/5ed2c4d69cb68442a68a25a00ea95bcd.png) ![在此处输入图像描述](../Images/f0ff2fcb6d161d5b8a4846814fc14c16.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:52:35.760

假设选项卡名称采用 CharSequence，您可以将 UnderlineSpan 传递给它，它使用您想要的文本包装 ForegroundColorSpan。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:33:58.737

我设法通过添加`android:inputType="textNoSuggestions"`到选项卡 TextView 来修复它。我仍然不知道为什么它首先是红色的。

# reference - C++/CLI 引用未在后续进入本地块时初始化为 nullptr

> ID：14418175
> 
> 赞同：4
> 
> 时间：2013-01-19T19:46:11.533
> 
> 标签：reference, c++-cli, default-value, nullptr, automatic-storage

我认为在 C++/CLI 中声明一个没有显式初始值的局部引用变量总是将其初始化为 nullptr。我发现这不会发生在第二个和以后进入本地块的条目中。这是示例代码。

```
void main()
{
    for (int i=0; i<6; i++)
    {
        switch (i)
        {
        case 2:
            Console::WriteLine("i={0} localI and hashTable no longer in scope", i);
            break;
        default:
            {
                // Declare local reference variable
                Hashtable^ hashTable;
                Int32 localI;

                Console::WriteLine("i={0} localI={1}  {2}",
                    i, localI, 
                    hashTable == nullptr ? "hashTable=nullptr" : "hashTable NOT SET to nullptr"
                                   );
                hashTable = gcnew Hashtable();
                localI = i+1;
            }
            break;
        }
    }
} 
```

输出是：

```
i=0 localI=0  hashTable=nullptr
i=1 localI=1  hashTable NOT SET to nullptr
i=2 localI and hashTable no longer in scope
i=3 localI=2  hashTable NOT SET to nullptr
i=4 localI=4  hashTable NOT SET to nullptr
i=5 localI=5  hashTable NOT SET to nullptr 
```

如果我添加显式初始化

```
Hashtable^ hashTable = nullptr;
Int32 localI = 99; 
```

然后每个循环重新初始化引用和localI

```
i=0 localI=99  hashTable=nullptr
i=1 localI=99  hashTable=nullptr
i=2 localI and hashTable no longer in scope
i=3 localI=99  hashTable=nullptr
i=4 localI=99  hashTable=nullptr
i=5 localI=99  hashTable=nullptr 
```

这似乎与我在 MSDN 上找到的内容相矛盾，其中说[：](http://msdn.microsoft.com/en-us/library/4ex65770%28v=vs.110%29.aspx)

*“以下代码示例显示，当声明句柄但未显式初始化时，它们默认初始化为 nullptr。”*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:58:17.813

这是设计使然，CLR 仅在方法入口处初始化局部变量。方法中的作用域块是编译后消失的语言实现细节。其他托管语言类似，VB.NET 的行为方式完全相同。C# 也可以，但由于其明确的分配规则而不允许这种代码。

否则，此行为会极大地简化运行时实现。抖动只是生成代码以在入口处将堆栈帧爆破为零。

# jquery - jQuery - Ajax 到 jsRender 失败

> ID：14418177
> 
> 赞同：1
> 
> 时间：2013-01-19T19:46:27.150
> 
> 标签：jquery, ajax, jsrender

我有一个名为 UpdateBoatTable 的函数，它应该通过 jsRender 更新 HTML 模板。该函数如下所示：

```
$.fn.UpdateBoatTable = function() 
{ 
$.ajax({
    url: "backend/boat.php?a=show",
    datatype: "json",
    success: function(data) 
    {
        alert(data);
        $("#BoatList").html
        (
            $("#BoatTemplate").render(data)
        );
    }
});
} 
```

MessageBox (alert(data)) 返回以下值：

```
[{"BoatID":"2","RegNo":"Registration Number","BoatName":"Boatname","BoatType":"Type"}] 
```

但是将数据渲染到模板会失败。

**如果我要对 json 数据进行硬编码，它可以工作......**

```
$.fn.UpdateBoatTable = function() 
{ 
$.ajax({
    url: "backend/boat.php?a=show",
    datatype: "json",
    success: function(data) 
    {
        var data = [{"BoatID":"2","RegNo":"Registration Number","BoatName":"Boatname","BoatType":"Type"}];
        alert(data);
        $("#BoatList").html
        (
            $("#BoatTemplate").render(data)
        );
    }
});
} 
```

你能告诉我为什么它只有在硬编码的情况下才有效？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:50:02.700

错字，`datatype: "json",`应该是`dataType: "json",`

# java - 如何计算我的软件的安装次数？

> ID：14418180
> 
> 赞同：-3
> 
> 时间：2013-01-19T19:47:14.190
> 
> 标签：java, php, javascript, html

实际上，我想计算在 Windows 下使用 Visual Studio 2010 开发的基于 CAD 的软件的安装次数。为此，我的想法是，当用户安装我的软件并按下完成按钮时，应该打开祝贺网页，我必须在其中计算 html 插件、php 代码或任何在每次访问祝贺网页后增加数字的东西。

这是我的想法，如果有人对此问题有更好的解决方案，请与我分享，意思是我如何计算分布在世界各地的软件安装？

因为该软件不仅仅托管在一台服务器上，它将在 CNET、SoftPedia 等上，所以我想制作一个类似这样的网页来计算安装成功后打开的安装次数？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:13:04.090

我前段时间使用了以下方法

当客户执行您的应用程序时...

1.  通过 HTTP 从您的应用程序向服务器发送请求以避免可能的防火墙，如果可能，请使用默认代理配置。
2.  使用唯一 ID 进行响应并将此 ID 存储在客户计算机（检查以防止再次执行该过程）和您的系统中。

我发现这种方法比在安装后尝试增加计数更好，如果没有可用的连接，您将不会得到通知。

您可以稍后将这些 ID 用于其他用途（例如，为每个客户注册机器）

尝试将此过程实现为非阻塞和故障安全，您不想损害客户的用户体验。

另一种选择是在您的应用程序的第一次运行时进行机械化注册，该注册需要连接到互联网，例如激活过程。但这并不是那么沉默，它可能超出了您的要求。

不要在没有适当警告的情况下从客户计算机收集任何信息。

希望对你有帮助，欢迎评论！！

# c++ - 在 C/C++ 中实现未知表模式的数据结构？

> ID：14418185
> 
> 赞同：2
> 
> 时间：2013-01-19T19:47:40.607
> 
> 标签：c++, sql, c, data-structures

我们的任务是从文件中读取有关表模式的信息，在 c/c++ 中实现该表，然后在其上成功运行一些“选择”查询。表模式文件可能有这样的内容，

```
 Tablename- Student
    "ID","int(11)","NO","PRIMARY","0","". 
```

现在，我的问题是什么数据结构适合这项任务。问题是我不知道一个表可能有多少列，也不知道这些列的名称是什么，也不知道它们的数据类型。例如，一个表可能只有一个 int 类型的列，另一个可能有 15 个不同数据类型的列。事实上，我什至不知道架构文件中可能有多少表的描述。

我想到的一种方法是设置一组例如 20 个向量（假设表中列的上限是 20），将这些向量命名为 1stvector、2ndvector 等，将列的名称映射到向量，然后相应地使用它们。但它的代码似乎与所有那些 if/else 语句或 switch case 语句（用于映射）混在一起。

在谷歌搜索/堆栈溢出时，我了解到你不能在运行时描述一个类，否则问题可能更容易解决。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:50:02.717

作为 C++ 数据结构，您可以尝试使用`std::vector< std::vector<boost::any> >`. [矢量](http://en.cppreference.com/w/cpp/container/vector)是标准库的一部分，允许动态调整元素数量。向量的向量意味着任意数量的行和任意数量的列。[Boost.Any](http://www.boost.org/doc/libs/1_52_0/doc/html/any.html)不是标准库的一部分，但可以广泛使用并允许存储任意类型。

我不知道有任何好的 C++ 库可以对该数据结构进行 SQL 查询。您可能需要自己编写。例如，SQL 命令`select`和`where`将对应于 STL 算法`std::find_if`，其中适当的谓词作为函数对象传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:58:25.710

为了解决对数据列类型缺乏了解的问题，您几乎必须存储原始输入（即建议的字符串`std:string`）并在以后根据需要强制解释。

这还具有列名可以以相同类型存储的优点。

如果您真的想确定列类型，您需要推测性地解析输入的每一列以查看它可能是什么并在此基础上做出决定。

无论哪种方式，如果输入可能包含一个列中包含列分隔符号的列（比如一个字符串，在其他空格分隔的数据中包含一个空格），您将必须知道输入的引用约定并编写某种解析到处理数据（吸整行`getline`是你的朋友）。您的输入似乎是用双引号分隔的字符串以逗号分隔的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T20:01:48.000

我建议使用`std::vector`来保存所有的表创建语句。读入所有创建语句后，就可以构造表了。

要克服的问题是列类型过多。所有 C++ 容器都喜欢有一个统一的类型，例如`std::vector<std::string>`. 您将有不同的列类型。

一种解决方案是让您的数据类型从单一基数下降。这将允许您为`std::vector<Base *>`表格的每一行提供指针，其中指针可以指向不同 {child} 类型的字段。

我会把剩下的留给 OP 来解决。

# c# - 通过反射和隐式转换创建的通用列表

> ID：14418194
> 
> 赞同：2
> 
> 时间：2013-01-19T19:48:06.180
> 
> 标签：c#, .net

我的目标是 .Net 框架的 4.0 版。我写了以下简单的代码：

```
public class A
{
    public A()
    {
    }
}

public class B
{
    public B()
    {
    }

    public static implicit operator A(B b)
    {
        return new A();
    }
} 
```

然后我创建了一个通用列表：

```
 var mylist = typeof(List<>).MakeGenericType(typeof(A)).GetConstructor(Type.EmptyTypes).Invoke(new object[]{}); 
```

`B`当我想添加以下代码的新实例时：

```
((IList<A>)mylist).Add(new B()); 
```

但是，如果我运行以下代码，则会引发以下异常：

```
The value "B" is not of type "A" and cannot be used in this generic collection. 
```

参数名称：值

```
((IList)mylist).Add(new B()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:59:52.523

隐式转换仅在第一次发生，`Add`因为您将类型的对象添加`B`到`IList<A>`. 在第二种情况下，您将其添加到 non-generic `IList`，这是一个对象集合，并且当对象实际添加到您的对象时，不会发生隐式转换和炸弹`List<A>`

即使这失败了：

```
var mylist = new List<A>();
((IList<A>)mylist).Add(new B());
((IList)mylist).Add(new B()) 
```

但是，您可以这样做：

```
((IList)mylist).Add((A)new B()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T19:57:47.723

问题是当您将列表转换为`IList<A>`并调用`Add`时，编译器（隐式）将转换添加到您的`B`实例到`A`. 在第二种情况下，`IList`只接受方法`object`中的一个`Add`。`B`是一个对象，所以它不会被强制转换为`A`. 因此，当方法试图在内部将其添加到底层数据结构时，它会引发异常。

您甚至可以通过以下代码对其进行测试：

```
var fails = (A) (object) new B(); 
```

由于您询问如何解决问题（尽管在这种情况下我没有看到将您的类型转换为的必要性`IList`），您可以在添加时显式地`B`转换您的类型`A`。例子：

```
mylist.Add((A) new B()); 
```

# ios - iOS：在 UIView 中动态创建 UISegmentedControl

> ID：14418195
> 
> 赞同：0
> 
> 时间：2013-01-19T19:48:16.107
> 
> 标签：ios, objective-c

我想创建一个自定义类，该类将根据某些输入`UIView`显示动态数量的对象。`UISegmentedControl`例如，如果客户的购物车中有 5 个产品，则`UIView`应该生成 5 个`UISegmentedControl`对象，然后我将与每个项目链接。

我遇到的问题是让它在`UIView`. 这是我到目前为止所做的。我成功地创建了一个`UISegmentedControl`对象并在我的 main 中以编程方式显示它`UIViewController`。`UIView`将它添加到我的班级时，我没有得到任何显示。这是`UIView`该类的实现代码：

```
#import "ajdSegmentView.h"

@implementation ajdSegmentView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSArray *itemArray = [NSArray arrayWithObjects:@"Yes", @"No", nil];

        UISegmentedControl *button = [[UISegmentedControl alloc] initWithItems:itemArray];
        button.frame = CGRectMake(35,44, 120,44);
        button.segmentedControlStyle = UISegmentedControlStylePlain;
        button.selectedSegmentIndex = 1;

        [self addSubview:button];
    }
    return self;
}
@end 
```

我通过 Storyboard 创建了一个新`UIView`对象并将其放置在`UIViewController`场景中。我确保将类从通用`UIView`类设置为我的新自定义类。`UIView`我在`UIViewController`课堂上添加和出口。这是实现内部的代码`UIViewController`：

```
#import "ajdViewController.h"

@interface ajdViewController ()

@end

@implementation ajdViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.segmentView = [[ajdSegmentView alloc] init];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

这就是我所尝试的。我一直在搜索很多页面并尝试在没有在这里询问的情况下实现这一点，但我似乎在寻找错误的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:17:15.757

首先您需要检查 ajdSegmentView 是`UIVIew`还是`UIViewController`. 如果是就好了`UIView`。如果是 UIViewController 类型，则需要在添加 Segment 时添加此行。

```
[self.view addSubview:button]; 
```

代替：

```
[self addSubview:button]; 
```

还有一件事您在分配后忘记将此视图添加到您的主视图中，因此您可以像这样声明：

```
objajdSegmentView = [[ajdSegmentView alloc] init];
[self.view addSubview:objajdSegmentView.view]; 
```

我刚刚添加了这个东西。我得到了这样的结果。![在此处输入图像描述](../Images/2ad9a51fa941a45a1ac88134285bc3a3.png)

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T19:55:12.397

您正在使用该`init`方法初始化自定义视图，但您的 ajdSegmentView 初始化在您的`initWithFrame:`方法中（在您的情况下没有被调用）。

所以替换：

```
self.segmentView = [[ajdSegmentView alloc] init]; 
```

和：

```
// Change the frame to what you want
self.segmentView = [[ajdSegmentView alloc] initWithFrame:CGRectMake(0,0,100,40)]; 
```

也不要忘记将您的视图添加到视图控制器的视图中。

```
[self.view addSubview:self.segmentView]; 
```

除非此视图是使用界面生成器创建的，否则您将需要`initWithCoder:`在您的 ajdSegmentView 类中进行覆盖。

虽然我不熟悉情节提要，所以也许我遗漏了一些东西，但在标准情况下，我上面所说的将解决你的问题。

# c - 从 Erlang C NIF 返回指针

> ID：14418198
> 
> 赞同：0
> 
> 时间：2013-01-19T19:48:54.420
> 
> 标签：c, pointers, erlang, erlang-nif

在编写 Erlang C NIF 时，如何将在 C 中创建的指针（比如说数组）返回给 Erlang，以供同一个 Erlang 进程在另一个 NIF 调用中使用？

```
 #define LENGTH = 50;

 int *a, array[LENGTH];

 a = enif_alloc(LENGTH * sizeof(int)); 
```

它应该是一个可以返回甚至存储的指针，这样当我从同一个 Erlang 进程中返回到 NIF 时，我可以访问指针和它引用的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T20:55:10.717

在这种特殊情况下，我会使用`enif_alloc_resource`. 创建一个结构来包含您的指针并将[其建立为资源对象](http://www.erlang.org/doc/man/erl_nif.html#enif_open_resource_type)。

您也可以将其编码为二进制文件，但我建议不要这样做，因为它允许 erlang 函数在将内容传递回之前修改内容。资源类型从 erlang 端是不透明的，无法修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:06:11.870

要从 Nif 返回二进制文件，我使用 enif_alloc_binary 和 enif_make_binary。然后在将访问指针的 N​​if 中传递二进制文件并在参数上使用 enif_inspect_binary 来获取包含指向数据的指针的 ErlNifBinary。

# database - 关于在我的主页上运行的静态的建议

> ID：14418205
> 
> 赞同：0
> 
> 时间：2013-01-19T19:49:36.763
> 
> 标签：database, web-deployment

我正在制作一个运动网站，我想知道，如果我在主页上有服务器会对服务器不利，比如说 15 个从数据库加载统计数据的小模块？所有这些查询每个都加载最多 16 行结果，而不是大的。我需要你的建议！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:17:02.110

无论您的平台如何，数据库交互都是网站性能最成问题的瓶颈之一。您的数据检索策略应该始终是最小化数据库查询，优化您运行的那些数据库查询，并在合理的时间内缓存结果。

尽管您说查询仅返回几行，但这并不表示查询的成本。根据许多因素（例如行数、数据分布、适当的数据库索引、连接数等），这些查询的成本可能仍然相当可观，并对您网站的性能产生负面影响。

# javascript - 使用 jQuery 创建一个简单的 JavaScript 类

> ID：14418214
> 
> 赞同：12
> 
> 时间：2013-01-19T19:50:15.607
> 
> 标签：javascript, jquery, class, keyboard-events

我正在尝试理解 jQuery 类，但进展并不顺利。

我的目标是以这种方式使用课程（或学习更好的方法）：

```
var player = new Player($("playerElement"));
player.InitEvents(); 
```

使用其他人的示例，这是我尝试过的：

```
$.Player = function ($) {

};

$.Player.prototype.InitEvents = function () {

    $(this).keypress(function (e) {
        var key = e.which;
        if (key == 100) {
            MoveRight();
        }
        if (key == 97) {
            MoveLeft();
        }
    });
};

$.Player.prototype.MoveRight = function () {
    $(this).css("right", this.playerX += 10);
}

$.Player.prototype.MoveLeft = function () {
    $(this).css("right", this.playerX -= 10);
}

$.Player.defaultOptions = {
    playerX: 0,
    playerY: 0
}; 
```

`A`最终目标是使用键盘字母和让角色在屏幕上左右移动`D`。

我有一种感觉，我在这个“类”中做错了什么，但我不知道为什么。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-19T21:04:21.160

一个重要的问题是您必须将传递的 jQuery 对象/元素分配给一个`this.element`- 或另一个`this.propertyName`- 以便您稍后可以在实例的方法中访问它。

您也不能像那样直接调用`MoveRight()`/`MoveLeft()`因为这些函数不是在作用域链中定义的，而是在实例构造函数的原型中定义的，因此您需要引用实例本身来调用这些函数。

更新和注释代码如下：

```
(function ($) { //an IIFE so safely alias jQuery to $
    $.Player = function (element) { //renamed arg for readability

        //stores the passed element as a property of the created instance.
        //This way we can access it later
        this.element = (element instanceof $) ? element : $(element);
        //instanceof is an extremely simple method to handle passed jQuery objects,
        //DOM elements and selector strings.
        //This one doesn't check if the passed element is valid
        //nor if a passed selector string matches any elements.
    };

    //assigning an object literal to the prototype is a shorter syntax
    //than assigning one property at a time
    $.Player.prototype = {
        InitEvents: function () {
            //`this` references the instance object inside of an instace's method,
            //however `this` is set to reference a DOM element inside jQuery event
            //handler functions' scope. So we take advantage of JS's lexical scope
            //and assign the `this` reference to another variable that we can access
            //inside the jQuery handlers
            var that = this;
            //I'm using `document` instead of `this` so it will catch arrow keys
            //on the whole document and not just when the element is focused.
            //Also, Firefox doesn't fire the keypress event for non-printable
            //characters so we use a keydown handler
            $(document).keydown(function (e) {
                var key = e.which;
                if (key == 39) {
                    that.moveRight();
                } else if (key == 37) {
                    that.moveLeft();
                }
            });

            this.element.css({
                //either absolute or relative position is necessary 
                //for the `left` property to have effect
                position: 'absolute',
                left: $.Player.defaultOptions.playerX
            });
        },
        //renamed your method to start with lowercase, convention is to use
        //Capitalized names for instanceables only
        moveRight: function () {
            this.element.css("left", '+=' + 10);
        },
        moveLeft: function () {
            this.element.css("left", '-=' + 10);
        }
    };

    $.Player.defaultOptions = {
        playerX: 0,
        playerY: 0
    };

}(jQuery));

//so you can use it as:
var player = new $.Player($("#playerElement"));
player.InitEvents(); 
```

[**小提琴**](http://jsfiddle.net/gVhj8/1/)

另请注意，JavaScript 没有实际的“类”（至少在 ES6 实现之前没有），也没有方法（根据定义，它们专门与类相关联），而是提供类似于类的甜美语法的构造函数。这是 TJ Crowder 写的一篇关于 JS 的“假”方法的很棒的文章，它有点高级，但每个人都应该能够从阅读中学到新的东西：http:
[//blog.niftysnippets.org/2008/03/mythical-methods .html](http://blog.niftysnippets.org/2008/03/mythical-methods.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T20:27:32.830

当你`this`在你的`Player`原型函数中使用时，`this`指向当前的 Player 对象。

但是当你使用`$(this).keypress`它时，它需要`this`指向一个 HTML 元素。

两者简直格格不入。只有一个`this`，它指向当前的 Player 对象，而不是 HTML 元素。

要解决您的问题，您需要在创建 Player 对象或相关函数调用时将 HTML 元素传递给它。

您可以在构造时将元素传递给 Player 对象，如下所示：

```
$.Player = function ($, element) {
        this.element = element;

};

$.Player.prototype.InitEvents = function () {

    $(this.element).keypress(function (e) {
        var key = e.which;
        if (key == 100) {
            MoveRight();
        }
        if (key == 97) {
            MoveLeft();
        }
    });
 };

 $.Player.prototype.MoveRight = function () {
     $(this.element).css("right", this.playerX += 10);
 }

 $.Player.prototype.MoveLeft = function () {
     $(this.element).css("right", this.playerX -= 10);
 }

$.Player.defaultOptions = {
    playerX: 0,
    playerY: 0
}; 
```

# php - 更新前在 Colorbox 中的表单中获取旧值

> ID：14418220
> 
> 赞同：0
> 
> 时间：2013-01-19T19:51:11.883
> 
> 标签：php, jquery, ajax, codeigniter, colorbox

我是代码点火器的新手。我在我的视图页面的表格中显示了一个数据。在每一行中都有一个编辑按钮。我希望如果我点击编辑链接，一个颜色框会弹出一个表单其中表单填充了旧值，然后他能够更新它..我已经在控制器和模型中完成了所有操作，但我不知道如何使用颜色框..我也访问了他们的网站，但我不太了解..这是我在这里做的是用户添加数据的表单

```
form name and id is "form" 
echo form_open('employesController/addEmployes')

        form_input();// 
        form_input();//
        form_button()
      form_close();

  this is the table where data is showing
    <td><?php echo $row->emp_name ?></td>

   <td><?php echo $row->description ?></td>

<td> <a href = "employesController/editEmploye/<?php echo  $row->emp_id ?>" id = "btn">   Edit 
```

我的控制器

```
 function editEmploye($id){

$this->load->model('employesModel');
$data['result'] = $this->employesModel->getEditEmploye($id);
echo  json_encode($data);
  } 
```

我的模态

```
 function getEditEmploye($id)
{
    return $this->db->where('emp_id',$id)->get('employees')->row();
} 
```

我想我的弹出模式的jquery函数会是这样的..

```
 $(document).ready(function(){
 $("#btn").click(function(){
var $form = $("#form");
$("#").colorbox({inline:true, href:$form});

 });
   }); 
```

请告诉我如何在 Colorbox 的表单中获取选定的行值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:10:53.953

好的，`Colorbox`真的`codeigniter`很好地合作。我已经完成了几个项目，`CI`其中使用了`Colorbox`.

Colorbox 只会在 iframe 中加载一个 url。

例如。

`http://localhost/mycontroller/edit`

如果没有颜色框，它将在当前窗口中更改。如果您在实际链接中包含颜色框类，它应该在 iframe 中打开。

# ios - 使用自动布局将自定义 UIView 绘制为背景并将其居中

> ID：14418228
> 
> 赞同：0
> 
> 时间：2013-01-19T19:51:54.463
> 
> 标签：ios, objective-c, uiview, drawing

我有一个**BoardViewController** (UIViewController)，需要在其背景中绘制居中的坐标线。对于这些坐标线，我创建了一个自定义 UIView 类**CoordinateView**，它被添加为 subView。即使更改设备方向，坐标视图也应居中并填充整个屏幕。

为此，我想使用代码中实现的**自动布局。**这是我当前的设置：

在**CoordinatesView** (UIView) 类中**自定义绘制**坐标线的方法

```
- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);
    CGContextSetLineWidth(context, 1.0);

    CGContextMoveToPoint(context, self.bounds.size.width/2,0);
    CGContextAddLineToPoint(context, self.bounds.size.width/2,self.bounds.size.height); 
    CGContextStrokePath(context);
    CGContextMoveToPoint(context, 0,self.bounds.size.height/2);
    CGContextAddLineToPoint(context, self.bounds.size.width,self.bounds.size.height/2); 

    CGContextStrokePath(context);
} 
```

**在**BoardViewController中****初始化**这个**坐标视图对象****

 ****```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
...
        coordinatesView = [[CoordinatesView alloc]initWithFrame:self.view.frame];
        [coordinatesView setBackgroundColor:[UIColor redColor]];
        [coordinatesView clipsToBounds];
        [coordinatesView setTranslatesAutoresizingMaskIntoConstraints:NO];
        [self.view addSubview:coordinatesView];
        [self.view sendSubviewToBack:coordinatesView];
...
} 
```

在 BoardViewController 的**viewWillAppear**函数中为坐标视图添加**自动布局魔法**

 **```
-(void)viewWillAppear:(BOOL)animated{
...
NSLayoutConstraint *constraintCoordinatesCenterX =[NSLayoutConstraint
                                              constraintWithItem:self.view
                                              attribute:NSLayoutAttributeCenterX
                                              relatedBy:NSLayoutRelationEqual
                                              toItem:coordinatesView
                                              attribute:NSLayoutAttributeCenterX
                                              multiplier:1.0
                                              constant:1];

NSLayoutConstraint *constraintCoordinatesCenterY =[NSLayoutConstraint
                                                   constraintWithItem:self.view
                                                   attribute:NSLayoutAttributeCenterY
                                                   relatedBy:NSLayoutRelationEqual
                                                   toItem:coordinatesView
                                                   attribute:NSLayoutAttributeCenterY
                                                   multiplier:1.0
                                                   constant:1];

[self.view addConstraint: constraintCoordinatesCenterX];
[self.view addConstraint: constraintCoordinatesCenterY];
...
} 
```

注意：这种方法对我使用 UIImageView 图像作为坐标有效，但不适用于自定义 UIView 坐标视图。

*   我怎样才能让它再次工作？一旦我应用自动布局/NSLayoutConstraint，我的坐标视图 UIView 似乎消失了

*   这实际上是向 UIViewController 添加背景绘图的好方法，还是直接绘制到 UIViewController 中更好。（如果是这样，那会是什么样子？）

感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T23:44:16.797

您的视图消失了，因为您没有设置大小约束——您通常需要 4 个约束来完全表达视图的位置和大小。某些视图（例如按钮）具有固有的内容大小，因此您无需显式设置大小。图像视图也是如此，它从它们显示的图像中获取它们的大小。

因此，在您的情况下，您可以将宽度和高度设置为等于父视图的宽度和高度。这是我经常做的事情，所以我在 UIView 上创建了一个包含各种约束方法的类别，所以我不必一遍又一遍地写这个。我有一种方法 constrainViewEqual: 可以做你想做的事情：

```
#import "UIView+RDConstraintsAdditions.h"

@implementation UIView (RDConstraintsAdditions)

-(void)constrainViewEqual:(UIView *) view {
    [view setTranslatesAutoresizingMaskIntoConstraints:NO];
    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeCenterX relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterX multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeWidth relatedBy:0 toItem:view attribute:NSLayoutAttributeWidth multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:self attribute:NSLayoutAttributeHeight relatedBy:0 toItem:view attribute:NSLayoutAttributeHeight multiplier:1 constant:0];
    NSArray *constraints = @[con1,con2,con3,con4];
    [self addConstraints:constraints];
} 
```

然后，在您的主代码中，您可以这样调用它：

```
[self.view constrainViewsEqual:coordinatesView]; 
```******

# c++ - 简单的 GLSL 示例未在屏幕上显示任何内容

> ID：14418230
> 
> 赞同：0
> 
> 时间：2013-01-19T19:52:26.970
> 
> 标签：c++, opengl, glsl, shader

我正在尝试使用 GLSL 打印一个简单的立方体，但我只得到一个空屏幕。我不知道我做错了什么。顶点、法线、三角形从 Blender 中导出。

```
void InitBuffers() {

    // monkey vertices, normals
    readVerticesNormals();

    // cube vertices
    glGenVertexArraysAPPLE(1, &CubeVao);
    glBindVertexArrayAPPLE(CubeVao);

    glGenBuffers(1, &CubeVboPositions);
    glBindBuffer(GL_ARRAY_BUFFER,CubeVboPositions);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glGenBuffers(1,&CubeVboColors);
    glBindBuffer(GL_ARRAY_BUFFER, CubeVboColors);
    glBufferData(GL_ARRAY_BUFFER, sizeof(colors), colors, GL_STATIC_DRAW);
    glEnableVertexAttribArray(1);
    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glGenBuffers(1, &CubeNormals);
    glBindBuffer(GL_ARRAY_BUFFER, CubeNormals);
    glBufferData(GL_ARRAY_BUFFER, sizeof(normals), normals, GL_STATIC_DRAW);
    glEnableVertexAttribArray(2);
    glVertexAttribPointer(2, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glGenBuffers(1, &CubeIbo);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, CubeIbo);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(triangles), triangles, GL_STATIC_DRAW);
} 
```

我将顶点数据绑定到着色器。

```
glBindAttribLocation(ProgramShader, 0, "position");
glBindAttribLocation(ProgramShader, 1, "color");
glBindAttribLocation(ProgramShader, 2, "normal"); 
```

相机位于 (0,0,0) 中，朝向 (0,0,-1)。对象，在本例中为立方体，它位于 (0,0,-4)。渲染函数是：

```
void display() {

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor3d(1,0,0);

    // set view matrix
    ViewMatrix.setView(0,0,0,0,0,-1,0,1,0);

    // use shader program
    glUseProgram(ProgramShader);

    // send uniforms to shader
    glUniformMatrix4fv(ProjectionMatrixLocation, 1, false, ProjectionMatrix.m);
    glUniformMatrix4fv(ViewMatrixLocation, 1, false, ViewMatrix.m);
    glUniformMatrix4fv(ModelMatrixLocation, 1, false, ModelMatrix.m);

    glBindVertexArrayAPPLE(CubeVao);

    glDrawElements(GL_TRIANGLES, 3*tri_num, GL_UNSIGNED_INT, (void*)0);

    glutSwapBuffers();
} 
```

顶点着色器：

```
attribute vec3 position;
attribute vec3 color;
attribute vec3 normal;

uniform mat4 modelMatrix,viewMatrix,projMatrix;

varying vec4 Normal;
varying vec4 Position;
varying vec4 Color;

void main() {
    // position in view space
    Position = viewMatrix * modelMatrix * vec4(position, 1.0);

    // normal in view space
    Normal = normalize(viewMatrix * modelMatrix * vec4(normal, 1.0));

    Color = vec4(color, 1.0);

    // final position
    gl_Position = projMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);
} 
```

片段着色器：

```
varying vec4 Normal;
varying vec4 Position;
varying vec4 Color;

void main() {
    gl_FragColor = Color;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:45:50.360

根据定义顶点、颜色等的方式，sizeof(vertices) 可能只返回指针的大小。尝试：

```
3*numVertices*sizeof(float) 
```

# asp.net-mvc - 使用 ASP.NET MVC4 WebGrid 进行排序时如何保留表单值

> ID：14418232
> 
> 赞同：1
> 
> 时间：2013-01-19T19:52:43.403
> 
> 标签：asp.net-mvc, sorting, filter, webgrid

我正在 MVC4 中使用过滤器表单和 webgrid 帮助器构建一个搜索页面来显示数据。过滤和排序一切正常，除了当我单击要排序的列时，它会使用带有排序参数的 GET 控制器功能重新加载页面的初始版本，从而丢失过滤器设置。我真的很想将表单重新提交给 POST 控制器函数，以便使用和重新填充过滤器表单。对我来说最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T20:10:53.090

这可能不是最优雅的解决方案，但它有效：

将模型添加到视图中的会话：

```
Session.Add( "Model", Model ); 
```

然后，在控制器中的索引 GET 操作（或任何 GET 操作）中，只需检查值并调用 POST 操作：

```
if ( Session[ "Model" ] != null )
    this.Index( Session[ "Model" ] as MyModel ); 
```

相应地清理您的会话。

# html-table - 防止调整 textarea 的大小以调整整个表格的大小

> ID：14418233
> 
> 赞同：0
> 
> 时间：2013-01-19T19:52:45.783
> 
> 标签：html-table, resize, textarea

我在 td 元素中有一个文本区域。目前，当文本区域的宽度调整为超出 td 元素的宽度时，整个表格会调整大小以使 textarea 元素保持在 td 中。

有没有办法让 textarea 调整超出包含 td 的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:24:21.877

您可以`div`在文本区域周围的 td 内添加一个固定大小的：http: [//jsfiddle.net/kvKZu/4/](http://jsfiddle.net/kvKZu/4/)

（重新发布评论作为答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:17:48.607

您可以在 textarea 上使用`max-width`和`max-height`样式属性。看看： http: [//jsfiddle.net/kvKZu/](http://jsfiddle.net/kvKZu/) 如果包含的行或列的宽度和高度在高级中未知，您也可以使用 javascript 动态设置它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-02T07:28:39.983

我发现将样式 table-layout:fixed 应用于表格解决了这个问题。

# php - 从仅保留其中一个的字符串中删除所有 html 标记。具有一个标识符属性的高级 strip_tags

> ID：14418234
> 
> 赞同：2
> 
> 时间：2013-01-19T19:53:02.060
> 
> 标签：php, html, replace, preg-replace, strip-tags

我需要删除一个字符串中的 HTML 标签并只保留其中一种类型。我有一个包含这个的字符串：

```
 <!-- comment -->   <div id="55"> text </div> <span name=annotation value=125> 2 text </span> <p id="55"> text 3</p><span>text 4 <span> 
```

我需要这个：

```
text  <span name=annotation value=125> 2 text </span> text 3text4 
```

所以我需要删除所有 HTML 标签，除了那些有这种形式的标签

```
"/(<span[^>]*annotation[^>]*value=.?(\w*).?[^>]*>)(.*?)<\/span>/" 
```

我用它作为另一个表达的一部分，但想知道

我怎样才能做到这一点？

我知道它可以用 来完成`preg_replace()`，但我不知道我需要什么模式。

一个例子：

```
$str='<!-- comment --><p><b>Deoxyribonucleic acid</b> (<b>DNA</b>) is 
   a molecule encoding the <a href="/wiki/Genetics" title="Genetics">genetic</a> instructions
   used in the development and functioning of all known living <a href="/wiki/Organism" title="Organism">organi
   sms</a> and many <a href="/wiki/Virus" title="Virus">viruses</a>. Along with <a href="/wiki/RNA" title="RNA">RNA</a> and <a href="/wiki/Proteins" title="Proteins" class="mw-redirect">proteins</a>, DNA is one of the three major 
   <a href="/wiki/Macromolecules" title="Macromolecules" class="mw-redirect">macromolecules</a> 
   that are essential for all known forms of <a href="/wiki/Life" title="Life">life</a>.
   Genetic information is encoded<span id="200120131815150" 
   class="mymetastasis" value="247" name="annotation"> as a sequence of nucleotides (</span><a href="/wiki/Guanine" title="Guanine"><span id="200120131815151" class="mymetastasis" value="247" name="annotation">
   guanine</span></a><span id="200120131815152" class="mymetastasis" value="247" name="annotation">, </span><a href="/wiki/Adenine" title="Adenine"><span id="200120131815153" class="mymetastasis" value="247"
   name="annotation">adenine</span></a><span id="200120131815154" class="mymetastasis" value="247" name="annotation">,
   </span><a href="/wiki/Thymine" title="Thymine"><span id="200120131815155" class="mymetastasis" value="247"
   name="annotation">thymine</span></a><span id="200120131815156" class="mymetastasis" value="247" name="annotation">, 
   and </span><a href="/wiki/Cytosine" title="Cytosine">
   <span id="200120131815157" class="mymetastasis" value="247" name="annotation">cytosine</span></a><span id="200120131815158" class="mymetastasis" value="247" name="annotation">) 
   recorded using the letters G, A, T, and C. Most DNA molecules are double-strande</span>d helices, consisting of two long <a href="/wiki/Polymers" title="Polymers" class="mw-redirect">polymers</a> of simple units called <a href="/wiki/Nucleotide" 
   title="Nucleotide">nucleotides</a>, molecules with <a href="/wiki/Backbone_chain" title="Backbone chain">backbones</a>
   made of alternating <a href="/wiki/Monosaccharide" title="Monosaccharide">sugars<
   /a> (<a href="/wiki/Deoxyribose" title="Deoxyribose">deoxyribose</a>) and <a href="/wiki/Phosphate"
   title="Phosphate">phosphate</a> groups (related to phosphoric acid), with the <a href="/wiki/Nucleobases" title="Nucleobases" class="mw-redirect">nucleobases</a> (G, A, T, C) attached to the sugars. DNA is well-suited for biological information storage, since the DNA backbone is resistant to cleavage and the double-stranded structure provides the molecule with a 
   built-in duplicate of the encoded information.</p>'; 
```

PD：换行符、制表符等是无意的。源文本的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T09:31:55.540

您将需要多个`regex`来执行此操作。

工作代码：

```
<?php
    header("Content-Type: text/plain");

    $str = '<!-- comment -->   <div id="55"> text </div> <span name=annotation value=125> 2 text </span> <p id="55"> text 3</p><span>text 4 </span>';

    // Save needed values
    $str = preg_replace("/<(span[^>]*?annotation.*?)>(.*?)<\/(.*?)>/", "!!!$1!!!$2!!!$3!!!", $str); 

    // Remove everything else
    $re = "/(<[^>]*?>)/";
    $str = preg_replace($re, "", $str);

    // Restore
    $str = preg_replace("/\!\!\!(span[^>]*?annotation.*?)\!\!\!(.*?)\!\!\!(.*?)\!\!\!/", "<$1>$2</$3>", $str); 

    echo $str;
?> 
```

输出：

```
text  <span name=annotation value=125> 2 text </span>  text 3text 4 
```

* * *

输入：

```
$str='<!-- comment --><p><b>Deoxyribonucleic acid</b> (<b>DNA</b>) is 
   a molecule encoding the <a href="/wiki/Genetics" title="Genetics">genetic</a> instructions
   used in the development and functioning of all known living <a href="/wiki/Organism" title="Organism">organi
   sms</a> and many <a href="/wiki/Virus" title="Virus">viruses</a>. Along with <a href="/wiki/RNA" title="RNA">RNA</a> and <a href="/wiki/Proteins" title="Proteins" class="mw-redirect">proteins</a>, DNA is one of the three major 
   <a href="/wiki/Macromolecules" title="Macromolecules" class="mw-redirect">macromolecules</a> 
   that are essential for all known forms of <a href="/wiki/Life" title="Life">life</a>.
   Genetic information is encoded<span id="200120131815150" 
   class="mymetastasis" value="247" name="annotation"> as a sequence of nucleotides (</span><a href="/wiki/Guanine" title="Guanine"><span id="200120131815151" class="mymetastasis" value="247" name="annotation">
   guanine</span></a><span id="200120131815152" class="mymetastasis" value="247" name="annotation">, </span><a href="/wiki/Adenine" title="Adenine"><span id="200120131815153" class="mymetastasis" value="247"
   name="annotation">adenine</span></a><span id="200120131815154" class="mymetastasis" value="247" name="annotation">,
   </span><a href="/wiki/Thymine" title="Thymine"><span id="200120131815155" class="mymetastasis" value="247"
   name="annotation">thymine</span></a><span id="200120131815156" class="mymetastasis" value="247" name="annotation">, 
   and </span><a href="/wiki/Cytosine" title="Cytosine">
   <span id="200120131815157" class="mymetastasis" value="247" name="annotation">cytosine</span></a><span id="200120131815158" class="mymetastasis" value="247" name="annotation">) 
   recorded using the letters G, A, T, and C. Most DNA molecules are double-strande</span>d helices, consisting of two long <a href="/wiki/Polymers" title="Polymers" class="mw-redirect">polymers</a> of simple units called <a href="/wiki/Nucleotide" 
   title="Nucleotide">nucleotides</a>, molecules with <a href="/wiki/Backbone_chain" title="Backbone chain">backbones</a>
   made of alternating <a href="/wiki/Monosaccharide" title="Monosaccharide">sugars<
   /a> (<a href="/wiki/Deoxyribose" title="Deoxyribose">deoxyribose</a>) and <a href="/wiki/Phosphate"
   title="Phosphate">phosphate</a> groups (related to phosphoric acid), with the <a href="/wiki/Nucleobases" title="Nucleobases" class="mw-redirect">nucleobases</a> (G, A, T, C) attached to the sugars. DNA is well-suited for biological information storage, since the DNA backbone is resistant to cleavage and the double-stranded structure provides the molecule with a 
   built-in duplicate of the encoded information.</p>'; 
```

输出：

```
Deoxyribonucleic acid (DNA) is 
   a molecule encoding the genetic instructions
   used in the development and functioning of all known living organi
   sms and many viruses. Along with RNA and proteins, DNA is one of the three major 
   macromolecules 
   that are essential for all known forms of life.
   Genetic information is encoded<span id="200120131815150" 
   class="mymetastasis" value="247" name="annotation"> as a sequence of nucleotides (</span>
   guanine<span id="200120131815152" class="mymetastasis" value="247" name="annotation">, </span><span id="200120131815153" class="mymetastasis" value="247"
   name="annotation">adenine</span>,
   <span id="200120131815155" class="mymetastasis" value="247"
   name="annotation">thymine</span>, 
   and 
   <span id="200120131815157" class="mymetastasis" value="247" name="annotation">cytosine</span>) 
   recorded using the letters G, A, T, and C. Most DNA molecules are double-stranded helices, consisting of two long polymers of simple units called nucleotides, molecules with backbones
   made of alternating sugars (deoxyribose) and phosphate groups (related to phosphoric acid), with the nucleobases (G, A, T, C) attached to the sugars. DNA is well-suited for biological information storage, since the DNA backbone is resistant to cleavage and the double-stranded structure provides the molecule with a 
   built-in duplicate of the encoded information. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T05:15:40.997

PHP为此提供了一个内置函数，称为[strip_tags](http://php.net/manual/en/function.strip-tags.php)

如果您只想保留 span 标签，请使用第二个参数。

所以，

```
$cleanString = strip_tags($dirtyString, '<span>'); 
```

# c# - 按大小对矩形数组排序

> ID：14418239
> 
> 赞同：0
> 
> 时间：2013-01-19T19:53:40.023
> 
> 标签：c#, linq

我有一个矩形数组，我想按大小降序排列。然后我想选择前 10 个并将其用于另一个接收矩形数组的函数中。下面是我的代码。但是，当我转换回数组时，出现“至少一个对象必须实现 IComparable”的异常。有人可以指导我。

```
Rectangle[] BoundingBoxes = GetRectangles(param1, param2);   
IEnumerable<Rectangle> BoundingBoxesSorted = BoundingBoxes.OrderByDescending(
                                                 item => item.Size).Take(10);

Rectangle[] BoundingBoxes10 = BoundingBoxesSorted.Cast<Rectangle>().ToArray(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T20:00:27.140

那是因为[`System.Drawing.Size`](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)（的类型[`Rectangle.Size`](http://msdn.microsoft.com/en-us/library/system.drawing.rectangle.size.aspx)）没有实现`IComparable`。这是有道理的，因为没有*自然*排序的数字元组，例如`(Width, Height)`: 会`(10, 5)`小于`(7, 8)`?

要么选择可比较的东西（例如只是 the`Width`或 area `Width * Height`），要么传递一个自定义`IComparer`作为第二个参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T19:57:55.653

```
IEnumerable<Rectangle> BoundingBoxesSorted = 
                                   BoundingBoxes.OrderBy(r => r.Width * r.Height); 
```

或者您可以定义自定义比较器

```
var comparer = Comparer<Size>.Create((s1, s2) => 
                            (s1.Width * s1.Height).CompareTo(s2.Width * s2.Height));

IEnumerable<Rectangle> BoundingBoxesSorted = 
                                       BoundingBoxes.OrderBy(r => r.Size,comparer); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T20:29:46.223

您不能按尺寸订购，因为它没有可比性。您可能希望按面积（宽度 * 高度）排序。

试试这个：

```
var top10 = BoundingBoxes
   .OrderByDescending(b => b.Width * b.Height)
   .Take(10)
   .ToArray(); 
```

请注意，您不必这样做，`Cast`因为枚举已经在处理`Rectangles`.

你也可以扩展`Rectangle`拥有一个`Area`属性。

```
 public static class Extensions
 {
    public static int Area(this Rectangle r) 
    {
        return r.Width * r.Height;
    }
 } 
```

# c - 如何确定 gcc 默认传递给 ld 的命令行选项？

> ID：14418242
> 
> 赞同：11
> 
> 时间：2013-01-19T19:54:16.720
> 
> 标签：c, linux, gcc, binutils

考虑 hello world C 程序：

**你好.c**：

```
#include "stdio.h"

int main()
{
        printf("Hello, World!\n");
} 
```

如果我打电话：

```
$ gcc -c hello.c -o hello.o 
```

它将生成一个 ELF 可重定位文件**hello.o**

如果我再打电话：

```
$ gcc hello.o -o hello            [1] 
```

它将 hello.o 与 ld 链接并生成一个 ELF 可执行文件**hello**

但是，如果我直接调用 ld`[2]`而不是`[1]`：

```
$ ld hello.o -o hello             [2] 
```

我收到这些错误：

```
/usr/bin/ld.bfd.real: warning: cannot find entry symbol _start
test.c:(.text+0xa): undefined reference to `puts' 
```

gcc 必须将其他选项传递给 ld（例如链接 C 库）。

无论如何，是否可以确定命令行 gcc 在 command 中传递给 ld 的确切内容`[1]`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-19T19:55:01.257

是的，您可以使用`gcc -v hello.o -o hello`获取链接线。对于您在我的 ubuntu 机器上的示例，我得到了这个链接行（为了便于阅读，编辑为多行）：

```
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/collect2
--build-id
--eh-frame-hdr
-m elf_x86_64
--hash-style=gnu
-dynamic-linker
/lib64/ld-linux-x86-64.so.2
-o hello
-z relro
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crt1.o
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crti.o
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtbegin.o
-L/usr/lib/gcc/x86_64-linux-gnu/4.4.5
-L/usr/lib/gcc/x86_64-linux-gnu/4.4.5
-L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib
-L/lib/../lib
-L/usr/lib/../lib
-L/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../.. -L/usr/lib/x86_64-linux-gnu
hello.o
-lgcc
--as-needed -lgcc_s --no-as-needed 
-lc
-lgcc
--as-needed -lgcc_s --no-as-needed
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/crtend.o
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/../../../../lib/crtn.o 
```

请注意，这`collect2`只是`ld`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-15T12:07:37.533

对于在线爱好者：

```
echo "int main(void) {}" | gcc -o /dev/null -v -x c - &> /dev/stdout| grep collect | tr -s " " "\012" 
```

替换`-x c`为`-x c++`以获取 c++ 标志。

也可以与 clang 一起使用，但在这种情况下，您应该使用 grep for`/usr/bin/ld`

# php - Opencart 出口工具扼杀了大约 12,000 种产品

> ID：14418247
> 
> 赞同：1
> 
> 时间：2013-01-19T19:55:03.550
> 
> 标签：php, export-to-excel, opencart, phpexcel

我正在使用[此扩展程序为](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=17)[我们网站](http://ciamedical.com/)上的产品数据库执行导出/导入。该站点非常快速-加载速度很快，在杀手级服务器上，除了产品导入/导出之外，所有功能都完美无缺。

在目录中包含大约 12,000 种产品之前，一切都运行良好。现在，似乎产品导入工作正常。问题是，出口产品令人窒息。这是发生的事情...单击导出，挂起大约 10-12 分钟（在此期间站点关闭，除非我通过 CLI 终止该进程），然后转到“找不到页面”错误，与管理员相同的链接导出功能正在访问。

**技术数据和我尝试过或考虑过的东西......**

*   进口出口代码可以在[这里](http://www.opencart.com/index.php?route=extension/extension/download&extension_download_id=323615)下载。Opencart 基于 MVC 框架，因此控制器和模型显然是要查看的重要文件。

*   我已经升级了原始插件以使用绝对最新版本的[PHPExcel](http://phpexcel.codeplex.com/)和 Pear 库，以及 OLE 和电子表格扩展——两者都被导入/导出模块使用。

*   PHP.ini 设置已达到最大值——最多允许 8 GB 的 RAM、post_max_size、最大上传，所有其他设置几乎都已达到最大值。服务器运行带有多个 SAS 硬盘的双四核 Xeon，平均处理器使用率约为 3%。所以，这不是服务器，除非我遗漏了什么，否则问题的根源不是 php 设置。

*   错误日志中没有抛出表明代码中存在任何特定问题的错误。只是它以前工作的事实，现在在数据库中有超过 12k 的产品时在导出产品时锁定。

*   我尝试修复产品表、优化数据库并重新安装基本 Opencart 框架。

我意识到这是一个非常普遍的问题，但我无能为力。我不会从头开始编写自定义导入/导出模块来解决这个问题。只是希望有人能解释一下（扩展作者无法回答这个问题）。我从上到下挑选了这个东西，找不到任何理由说明它不能按应有的方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:57:42.117

对于较大的导入，10 - 12 分钟是相对较短的时间。我已经在具有大量 RAM 的专用服务器上看到它们持续超过 45 分钟。它与您的问题相同，网站在上传/导入期间完全没有响应。问题是使用 excel 并从保存的 excel 表中解码所有值的效率低下。实际上，我确实为 1.4.X 上的客户端定制了一个高效版本，但它绝不是漂亮的，并且需要大量调试。实际的导出效率非常低，只是将所有表连接在一起并占用大量内存（如果我没记错的话，超过 1.8GB）。通过选择较小的重复行并分别解析它们，然后将它们重新插入到导出数据的数组中，这也大大减少了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T06:35:48.373

解决方案比我想象的要简单。

实际适用于大型产品数据库的导出工具（当然，导出到 CSV）。

这是[链接](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5664)。

# spring - 添加 HTTPS 支持会导致循环重定向

> ID：14418254
> 
> 赞同：5
> 
> 时间：2013-01-19T19:55:53.830
> 
> 标签：spring, tomcat, spring-mvc, spring-security

我在 web 应用程序中使用 Spring Secutiry 框架。我已经安装了 SSL 证书并且能够通过`https`. 现在，当我向所有指令添加`requires-channel="https"`属性时，服务器响应：`intercept-url`

`Error 310 (net::ERR_TOO_MANY_REDIRECTS) to many connections`

spring 每次都会运行这段代码：

```
64050 [http-bio-8080-exec-1] DEBUG org.springframework.security.web.FilterChainProxy  - / at position 1 of 12 in additional filter chain; firing Filter: 'ChannelProcessingFilter'
64050 [http-bio-8080-exec-1] DEBUG org.springframework.security.web.util.AntPathRequestMatcher  - Checking match of request : '/'; against '/'
64050 [http-bio-8080-exec-1] DEBUG org.springframework.security.web.access.channel.ChannelProcessingFilter  - Request: FilterInvocation: URL: /; ConfigAttributes: [REQUIRES_SECURE_CHANNEL]
64050 [http-bio-8080-exec-1] DEBUG org.springframework.security.web.access.channel.RetryWithHttpsEntryPoint  - Redirecting to: https://sky-handling.ejl-group.com/
64050 [http-bio-8080-exec-1] DEBUG org.springframework.security.web.DefaultRedirectStrategy  - Redirecting to 'https://sub.domain.com/' 
```

我该如何解决？

谢谢

UPD #1：

```
<http use-expressions="true">
  <form-login login-page="/wellcome/" login-processing-url="/login" default-target-url="/" always-use-default-target="false"
            authentication-failure-url="/wellcome/?error=1" username-parameter="email" password-parameter="password" />
  <remember-me key="temp" token-validity-seconds="-1" />
  <logout invalidate-session="true" logout-success-url="/" logout-url="/logout"/>
  <intercept-url pattern="/" access="authenticated"/>
  <intercept-url pattern="/administration/**" access="authenticated"/>
  <intercept-url pattern="/wellcome/" access="permitAll"/>
  <intercept-url pattern="/login" access="permitAll"/>
  <custom-filter ref="ajaxTimeoutRedirectFilter" after="EXCEPTION_TRANSLATION_FILTER"/>
</http> 
```

我将现有证书导入到密钥库并配置了 tomcat，但是如果我添加这样的行：

```
<VirtualHost _default_:443>
        SSLEngine on
        SSLCertificateFile /usr/local/ssl/crt/public.crt
        SSLCertificateKeyFile /usr/local/ssl/private/*.ejl-group.com.key
        SSLCACertificateFile /usr/local/ssl/crt/intermediate.crt
        ServerName sub.domain.com
        ProxyRequests Off
        ProxyPreserveHost On
        <Proxy *>
                Order deny,allow
                Allow from all
        </Proxy>
        ProxyPass / http://localhost:8443/
        ProxyPassReverse / http://localhost:8443/
</VirtualHost> 
```

它失败并`503 Service Temporarily Unavailable`出现错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T20:46:12.950

我通过在 security.xml 文件中添加端口映射来解决此问题：

```
<http>
   <port-mappings>
        <port-mapping http="8088" https="8443"/>
        <port-mapping http="80" https="443"/>
   </port-mappings>
</http> 
```

这个博客帮助了我：[http ://consultingblogs.emc.com/richardtiffin/archive/2010/10/15/applying-ssl-to-a-spring-web-application-on-tomcat.aspx](http://consultingblogs.emc.com/richardtiffin/archive/2010/10/15/applying-ssl-to-a-spring-web-application-on-tomcat.aspx)

如果你在负载均衡器后面，你必须添加一些代码：[Offloading https to load balancers with Spring Security](https://stackoverflow.com/questions/8002272/offloading-https-to-load-balancers-with-spring-security/16083089#16083089)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:29:24.093

我认为这两条线是关键：

```
 ProxyPass / http://localhost:8443/
    ProxyPassReverse / http://localhost:8443/ 
```

请注意，您在此处指定 http，而不是 https。所以发生的事情是，当客户端通过默认的 HTTPS 端口（443）访问您的网站时，httpd 使用 http 方案将请求转发到 tomcat 实例。然后，tomcat 尝试重定向到 HTTPS/443 端口，然后 httpd 通过使用 http 方案等将请求转发到 tomcat 实例。

如果您只是将 sceme 更改为 https，我不确定它是否会起作用，但请尝试一下。

虽然我不了解您的安全要求，但通常没有必要在 httpd 前端和 tomcat 后端之间建立 SSL 安全链接。考虑在这里使用简单的 HTTP 或者甚至可能是 AJP

# sql-server - 从 SQL Server 列中的 XML 提取记录中的数据

> ID：14418256
> 
> 赞同：-2
> 
> 时间：2013-01-19T19:56:19.713
> 
> 标签：sql-server, xml, tsql, xquery

我有一个 xml 数据类型的列，如下所示：

```
 <Test ID="rs232lon">
        <Param Name="corel" Value="0.00000" />
        <Param Name="co2rel" Value="10.8000" />
        <Param Name="hcrel" Value="111.000" />
        <Param Name="o2rel" Value="0.95000" />
      </Test> 
```

我怎么能得到这样的 TSQL 的结果：

```
corel       co2rel        hcrel        o2rel    
------------------------------------------          
0.00000     10.8000       111.000     0.95000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:34:41.310

```
DECLARE @CocoJambo TABLE (
    ID INT IDENTITY PRIMARY KEY,
    XmlColumn XML NOT NULL
);

INSERT  @CocoJambo (XmlColumn)
VALUES  (N'<Test ID="rs232lon">
    <Param Name="corel" Value="0.00000" />
    <Param Name="co2rel" Value="10.8000" />
    <Param Name="hcrel" Value="111.000" />
    <Param Name="o2rel" Value="0.95000" />
  </Test>');

SELECT  a.*,
        b.c.value('(Param[@Name="corel"]/@Value)[1]','NUMERIC(38,5)') AS corel,
        b.c.value('(Param[@Name="co2rel"]/@Value)[1]','NUMERIC(38,5)') AS co2rel,
        b.c.value('(Param[@Name="hcrel"]/@Value)[1]','NUMERIC(38,5)') AS hcrel,
        b.c.value('(Param[@Name="o2rel"]/@Value)[1]','NUMERIC(38,5)') AS o2rel
FROM    @CocoJambo a
CROSS APPLY a.XmlColumn.nodes('/Test') AS b(c) 
```

结果：

```
ID XmlColumn                corel   co2rel   hcrel     o2rel
-- ------------------------ ------- -------- --------- -------
1  <Test ID="rs232lon">...  0.00000 10.80000 111.00000 0.95000 
```

# c++ - 在预处理器指令中使用变量

> ID：14418258
> 
> 赞同：0
> 
> 时间：2013-01-19T19:56:30.333
> 
> 标签：c++, c, preprocessor-directive

在预处理器指令 file.cpp 中可以使用哪个全局变量

```
int variable = 1;
#if variable >= 1
    int a = 0;
#else 
    int a = 1;
#endif 
```

或者

文件.cpp

```
const int variable = 1;
#if variable >= 1
    int a = 0;
#else 
    int a = 1;
#endif 
```

或文件.cpp

```
#include "header.h"
// extern in variable; in the header.h
#if variable >= 1
    int a = 0;
#else 
    int a = 1;
#endif 
```

在处理程序指令中使用变量的规则是什么？如果一个变量可以恒定折叠，它可以在#if/#elif#else 指令中使用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T20:04:30.223

对不起，你根本不能这样做。变量对预处理器不可见。预处理器的核心是文本操纵器。它可以看到的唯一值是用 定义的值`#define`，而不是变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:05:17.697

只有用 定义的宏`#define`才会在`#if`. `#if`所有其他符号（更准确地说，在宏扩展后保留在一行上的所有标识符，除了`defined`和，在 C++ 中，算术运算符的某些“替代拼写”，例如`and`、`or`、`bitand`、`bitor`和`compl`）都被解释为具有值 0。

# mysql - MySQL 什么时候可以使用 HASH 而不是 BTREE

> ID：14418260
> 
> 赞同：6
> 
> 时间：2013-01-19T19:56:39.600
> 
> 标签：mysql, hash, indexing, innodb, b-tree

由于 MySQL`BTREE`在创建索引时默认使用，所以我可以使用一些实例`HASH`吗？例如，如果我的表只包含外键，它们只是`INT UNSIGNED`值。在这种情况下用 HASH 覆盖 BTREE 是一个很好的改进吗？

不确定是否重要，但我正在使用`InnoDB`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T01:50:56.763

仅（aka ）存储引擎`HASH`支持索引类型。`MEMORY``HEAP`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-19T17:39:15.970

见这里：[https ://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_hash_index](https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_hash_index)

> 哈希索引
> 
> 一种索引类型，用于使用相等运算符而不是范围运算符（例如大于或 BETWEEN）的查询。`It is available for MEMORY tables`. 尽管由于历史原因哈希索引是 MEMORY 表的默认值，但该存储引擎还支持 B 树索引，这通常是通用查询的更好选择。
> 
> MySQL 包括这种索引类型的一个变体，即自适应哈希索引，如果需要，它会根据运行时条件为 InnoDB 表自动构建。

# python - 在python中任意定位xticks

> ID：14418264
> 
> 赞同：0
> 
> 时间：2013-01-19T19:57:03.293
> 
> 标签：python, matplotlib

在 Python 中，我有两个列表，每个列表有 10 个元素。我在 pyplot 中将它们相互绘制。

我知道我可以使用**xticks**来定位刻度，但似乎我仅限于将刻度放置在我的 x 轴上的 10 个点之一。

是否可以将我的刻度位置放在我沿 x 轴选择的任意位置？也许通过选择轴长度的分数或其他什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T19:59:19.663

你可以做`pyplot.xticks([1, 3, 10, 20])`，或者任何你喜欢的任意数字。

# javascript - 随机拆分子串

> ID：14418265
> 
> 赞同：2
> 
> 时间：2013-01-19T19:57:07.200
> 
> 标签：javascript

我正在尝试从字符串中拆分子字符串字符，到目前为止我尝试过的方法甚至在循环内循环都失败了。

字符串“1234567890”的示例结果输出可能如下所示

```
12
345
6
7890 
```

.

```
var randomChar = ""
var str = "123456789";

for (var j = 0; j < str.length; j++) {
randomChar = Math.floor(Math.random() * 3) + 1;

console.log(str.substr(j, randomChar));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:04:56.713

干得好：

```
 var substrSize;
    while (str.length) {
         substrSize = Math.floor(Math.random()*3)+1; // at most 4? 
         if (substrSize >= str.length)
             randomChar = str;
         else
             randomChar = str.substr(0,substrSize);
         str = str.substr(randomChar.length);
         console.log(randomChar);
    } 
```

或者：

```
 var j = 0;
    while (j < str.length) {
         var n= j+Math.floor(Math.random() * 3) + 1;
         if (n> str.length) n= str.length;
         console.log(str.substring(j, n));
         j = n;
    } 
```

或者：

```
 var j = 0;
    while (j < str.length) {
         var n= Math.floor(Math.random() * 3) + 1;
         if (j+n> str.length) n= str.length-j;
         console.log(str.substr(j, n));
         j += n;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:05:00.870

您的代码的问题在于您总是迭代`str.length`次数。在删除例如前 3 个随机字符后，您应该从第 4 个开始，而不是从第 2 个开始。

这是一个优雅的递归解决方案，与您的大不相同：

```
function randString(s) {
   if(s.length > 0) {
     var pivot = Math.ceil(Math.random() * 3);
     console.info(s.substring(0, pivot));
     randString(s.substring(pivot));
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T20:08:50.963

```
var randomChar = ""
var str = "123456789";
var j = 0;
while (j < str.length) {
    randomChar = Math.floor(Math.random() * 3) + 1;
    console.log(str.substr(j, randomChar));
    j += randomChar;
} 
```

# c# - 从头开始显示位图 WPF

> ID：14418267
> 
> 赞同：0
> 
> 时间：2013-01-19T19:57:12.147
> 
> 标签：c#, wpf, visual-studio-2012

我已经查看了十几个示例（并尝试了多个示例），但我找不到在 WPF 中轻松设置 RenderTargetBitmap 或 WriteableBitmap 的方法，可以在 Windows 商店中使用。

最终，我想直接操作一个数组，我可以以 30 Hz 左右的频率将它放到屏幕上。

这个例子可能让我最接近：

```
DrawingVisual MyDrawingVisual = new DrawingVisual();
//Open its drawing context:
DrawingContext MyDC = MyDrawingVisual.RenderOpen();

// At this point you can draw
Pen p = new Pen();
p.Thickness = 5;
p.Brush = new SolidColorBrush(Colors.Green);
MyDC.DrawLine(p, new Point(1.0, 1.0), new Point(10.0, 10.0));

RenderTargetBitmap MyRenderTargetBitmap = new RenderTargetBitmap(100, 100, 96, 96, PixelFormats.Default);
MyRenderTargetBitmap.Render(MyDrawingVisual);

RenderTargetBitmap rtbm = new RenderTargetBitmap(200, 200, 96, 96, PixelFormats.Pbgra32);
rtbm.Render(MyCanvas); 
```

上面的例子对我来说有两个问题：它似乎没有在屏幕上绘制任何东西，而且我认为 MyDC 使用 DirectX（我猜它不适用于 Windows App Store）。

编辑：

这个 MS 示例正是我想要的！

[http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9/sourcecode?fileId=44756&pathId=962809525](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9/sourcecode?fileId=44756&pathId=962809525)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:20:43.807

克莱门斯就在上面。在我看来，WPF 和 XAML 基本上是一回事，但事实并非如此。

我上面的方法或多或少是在黑暗中刺伤。我将尝试使用本教程作为我的起点。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh986965.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986965.aspx)

# html - 如何在表格旁边正确放置滚动条？

> ID：14418268
> 
> 赞同：0
> 
> 时间：2013-01-19T19:57:17.007
> 
> 标签：html, css

我的问题很简单。在这个 jsfiddle： http: [//jsfiddle.net/nyCKE/2/](http://jsfiddle.net/nyCKE/2/)我有一个包含滚动条的表格，表格以固定的标题滚动。但我的问题是我不希望滚动条按原样显示在最后一列下方，我希望它显示在最后一列旁边，这样它就不会占用最后一个表格列旁边的空间。但是为了能够做到这一点，我需要更改 css/html 吗？

**下面是HTML：**

```
<table>
    <thead>
        <tr>
            <td>Problem</td>
            <td>Solution</td>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

**下面是CSS：**

```
table {
    background-color: #aaa;
}
tbody {
    background-color: #ddd;
    height: 100px;
    overflow: auto;
}
td {
    padding: 3px 10px;
}

thead > tr, tbody{
    display:block;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:03:34.350

```
tbody{
    width: 110%; 

} 
```

虽然这需要测试

# java - getUserListStatuses where include retweets = false

> ID：14418271
> 
> 赞同：1
> 
> 时间：2013-01-19T19:57:31.950
> 
> 标签：java, twitter4j

getUserListStatuses 不包含用于 includeRetweets 的布尔值是否有原因？我知道这是在配置中，但是如果我不想更改我的默认配置怎么办？如果我想要调用特定的配置更改，例如 includeRetweets = false 而不是 true，有没有简单的方法可以做到这一点？

谢谢

# mp3 - 模拟器上的 Windows phone 8 - 为什么我不能播放音频文件？

> ID：14418276
> 
> 赞同：1
> 
> 时间：2013-01-19T19:58:04.413
> 
> 标签：mp3, media-player, windows-phone-8, filenotfoundexception

我正在转换一个用 Silverlight 编写的应用程序，到目前为止，我已经成功解决了所有问题，除了一个：

由于某种原因，模拟器拒绝播放应用程序的任何音频文件，甚至没有抛出异常。我查过了，在铃声类别中它可以发出声音。

原始代码是：

```
<Grid x:Name="sharedFullScreenFilePathContainer"
Tag="{Binding StringFormat=\{0\},Converter={StaticResource fullScreenImageConverter}}">

    <Image x:Name="fullScreenImage" Stretch="Fill"
Source="{Binding ElementName=sharedFullScreenFilePathContainer,Path=Tag, StringFormat=../Assets/images/\{0\}.jpg}"
ImageFailed="onFullScreenImageFailedToLoad" MouseLeftButtonDown="onPressedOnFullScreenImage" />

    <MediaElement x:Name="mediaPlayer" AutoPlay="True"
Source="{Binding ElementName=sharedFullScreenFilePathContainer,Path=Tag, StringFormat=../Assets/sounds/\{0\}.wma}" />
</Grid> 
```

所以，我设置到这个项目的上下文的图像真的被显示了，但是我设置的路径上真正存在的声音没有播放（我已经检查了“Bin”文件夹）。

我尝试使用代码而不是 xaml，但我仍然遇到同样的问题。

我试过这个（虽然它通常用于背景音乐）：

```
AudioTrack audioTrack = new AudioTrack(new Uri("../Assets/sounds/" + fileToOpen, UriKind.Relative), "", "", "", null);
BackgroundAudioPlayer player = BackgroundAudioPlayer.Instance;
player.Track = audioTrack;
player.Play(); 
```

它没有播放任何东西，也没有抛出任何异常。

我也尝试了下一个代码，但它引发了异常（找不到文件异常），可能是因为我没有正确调用它：

```
Stream stream = TitleContainer.OpenStream("@Assets/sounds/" + fileToOpen);
SoundEffect effect = SoundEffect.FromStream(stream);
FrameworkDispatcher.Update();
effect.Play(); 
```

我也尝试过使用 wma 文件，但也没有用。

我还尝试使用 mp3 文件的“复制到输出目录”参数（“始终”和“仅当新”）和“构建操作”参数（“无”和“内容”）。没有什么帮助。

谁能帮帮我吗？我很长时间没有为 Silverlight/WP 开发，我不知道如何修复它。

顺便说一句，因为稍后我需要知道声音何时播放完毕（并且还能够停止它），所以无论如何我都想使用代码。如果你也能告诉我怎么做，我会很高兴（如果需要，我可以在新帖子上问）。

* * *

编辑：好的，我发现了问题：在使用**MediaPlayer.Play()**方法时，我不断收到一个奇怪的异常，在检查了异常之后，我发现这是一个已知问题，而且我需要调用**FrameworkDispatcher.Update();** 就在我调用 Play() 方法之前。

所以解决方案是做这样的事情：

```
Song song = Song.FromUri(...);
MediaPlayer.Stop(); 
FrameworkDispatcher.Update();
MediaPlayer.Play(song); 
```

例外是：

System.Windows.ni.dll 中发生“System.InvalidOperationException”

我在[这里](https://stackoverflow.com/questions/6807963/media-player-in-windows-phone-7)找到了解决方案。

现在的问题是为什么，为什么我在 windows phone 的演示中没有找到任何相关的东西？另外，我想知道这个函数是做什么的。

* * *

好的，既然没有人给我两个问题的答案，我仍然希望给予赏金，我会问另一个问题：

如果除了使用 windows phone 的 MediaPlayer 类之外真的没有解决方案，我如何捕获完成播放音频文件的事件？即使获取音频文件的持续时间也不起作用（无论我尝试使用哪个类，都会返回 0 length ）...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:25:46.457

BackgroundAudioPlayer 只能播放来自隔离存储或远程 URI 的文件**，**这就是为什么你可以在这里做任何事情的原因！

如果您将文件作为应用程序中的资源，您必须首先将它们复制到独立存储，然后将独立存储中的文件引用到您的 BackgroundAudioPlayer。

```
 private void CopyToIsolatedStorage()
    {
        using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            string[] files = new string[] 
                { "Kalimba.mp3", 
                    "Maid with the Flaxen Hair.mp3", 
                    "Sleep Away.mp3" };

            foreach (var _fileName in files)
            {
                if (!storage.FileExists(_fileName))
                {
                    string _filePath = "Audio/" + _fileName;
                    StreamResourceInfo resource = Application.GetResourceStream(new Uri(_filePath, UriKind.Relative));

                    using (IsolatedStorageFileStream file = storage.CreateFile(_fileName))
                    {
                        int chunkSize = 4096;
                        byte[] bytes = new byte[chunkSize];
                        int byteCount;

                        while ((byteCount = resource.Stream.Read(bytes, 0, chunkSize)) > 0)
                        {
                            file.Write(bytes, 0, byteCount);
                        }
                    }
                }
            }
        }
    } 
```

然后你可以列出你的歌曲列表

```
 private static List<AudioTrack> _playList = new List<AudioTrack>
    {
        new AudioTrack(new Uri("Kalimba.mp3", UriKind.Relative), 
                        "Kalimba", 
                        "Mr. Scruff", 
                        "Ninja Tuna", 
                        null),

        new AudioTrack(new Uri("Maid with the Flaxen Hair.mp3", UriKind.Relative), 
                        "Maid with the Flaxen Hair", 
                        "Richard Stoltzman", 
                        "Fine Music, Vol. 1", 
                        null),

        new AudioTrack(new Uri("Sleep Away.mp3", UriKind.Relative), 
                        "Sleep Away", 
                        "Bob Acri", 
                        "Bob Acri", 
                        null),

        // A remote URI
        new AudioTrack(new Uri("http://traffic.libsyn.com/wpradio/WPRadio_29.mp3", UriKind.Absolute), 
                        "Episode 29", 
                        "Windows Phone Radio", 
                        "Windows Phone Radio Podcast", 
                        null)
    }; 
```

并播放您的曲目！

```
 private void PlayNextTrack(BackgroundAudioPlayer player)
    {
        if (++currentTrackNumber >= _playList.Count)
        {
            currentTrackNumber = 0;
        }

        PlayTrack(player);
    }

    private void PlayPreviousTrack(BackgroundAudioPlayer player)
    {
        if (--currentTrackNumber < 0)
        {
            currentTrackNumber = _playList.Count - 1;
        }

        PlayTrack(player);
    }

    private void PlayTrack(BackgroundAudioPlayer player)
    {
        // Sets the track to play. When the TrackReady state is received, 
        // playback begins from the OnPlayStateChanged handler.
        player.Track = _playList[currentTrackNumber];
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T22:53:10.350

如果您希望 MediaElement 从您的代码中工作，您可以执行以下操作！

```
 MediaElement me = new MediaElement();
        // Must add the MediaElement to some UI container on 
        // your page or some UI-control, otherwise it will not play!
        this.LayoutRoot.Children.Add(me);
        me.Source = new Uri("Assets/AwesomeMusic.mp3", UriKind.RelativeOrAbsolute);
        me.Play(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T16:00:42.693

音轨播放存储在隔离存储中或通过 Internet 流式传输的音频文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:16:56.883

播放存储在应用程序包中的音频文件对我来说很好。我在项目文件夹 Resources\Alarms 中有名为“Alarm01.wma”的文件。然后我像这样播放这些声音：

```
using Microsoft.Xna.Framework.Media;
...
Song s = Song.FromUri("alarm", new Uri(@"Resources/Alarms/Alarm01.wma", UriKind.Relative));
MediaPlayer.Play(s); 
```

也不要忘记参考**Microsoft.Xna.Framework**库。

我想它也应该适用于存储在 IsolatedStorage 中的 mp3 文件和文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:10:36.143

改用 MediaElement，这可以播放存储在您的应用程序中的媒体文件，但在应用程序停止时停止播放（您可以为您的应用程序提供一些提前机会，以便它继续运行，但它不会很好地工作）

在您的 XAML 中：

```
 <Button x:Name="PlayFile"
                Click="PlayFile_Click_1"
                Content="Play mp3" /> 
```

在您的代码后面：

```
 MediaElement MyMedia = new MediaElement();
    // Constructor
    public MainPage()
    {
        InitializeComponent();

        this.LayoutRoot.Children.Add(MyMedia);

        MyMedia.CurrentStateChanged += MyMedia_CurrentStateChanged;
        MyMedia.MediaEnded += MyMedia_MediaEnded;
    }

    void MyMedia_MediaEnded(object sender, RoutedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Ended event " + MyMedia.CurrentState.ToString());
        // Set the source to null, force a Close event in current state
        MyMedia.Source = null;
    }

    void MyMedia_CurrentStateChanged(object sender, RoutedEventArgs e)
    {

        switch (MyMedia.CurrentState)
        {
            case System.Windows.Media.MediaElementState.AcquiringLicense:
                break;
            case System.Windows.Media.MediaElementState.Buffering:
                break;
            case System.Windows.Media.MediaElementState.Closed:
                break;
            case System.Windows.Media.MediaElementState.Individualizing:
                break;
            case System.Windows.Media.MediaElementState.Opening:
                break;
            case System.Windows.Media.MediaElementState.Paused:
                break;
            case System.Windows.Media.MediaElementState.Playing:
                break;
            case System.Windows.Media.MediaElementState.Stopped:
                break;
            default:
                break;
        }

        System.Diagnostics.Debug.WriteLine("CurrentState event " + MyMedia.CurrentState.ToString());
    }

    private void PlayFile_Click_1(object sender, RoutedEventArgs e)
    {
        // Play Awesome music file, stored as content in the Assets folder in your app
        MyMedia.Source = new Uri("Assets/AwesomeMusic.mp3", UriKind.RelativeOrAbsolute);
        MyMedia.Play();
    } 
```

# linux - 如果程序在仅 EABI 的内核中进行 OABI 样式的系统调用会发生什么？

> ID：14418278
> 
> 赞同：6
> 
> 时间：2013-01-19T19:58:13.733
> 
> 标签：linux, arm

或者更一般地说，如果在这样的内核上执行带有操作码 !=0 的 swi 指令会发生什么？它会产生信号吗？我问是因为我想把它困住。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:35:11.923

所以我试着看看会发生什么。我编译了以下程序并运行它：

```
#include <stdio.h>
#include <signal.h>

void traphandler(int signum, siginfo_t *info, void *context)
{
  puts("trap");
}

int main() 
{
  struct sigaction sa;
  sa.sa_sigaction = traphandler;
  sigemptyset(&sa.sa_mask);
  sa.sa_flags = SA_RESTART | SA_SIGINFO;
  sigaction(SIGTRAP, &sa, NULL);
  puts("begin");
  asm("swi 1");
  puts("after swi 1");
  asm("swi 255");
  puts("after swi 255");
} 
```

输出是：

```
begin
after swi 1
after swi 255 
```

信号处理程序没有被调用，程序也没有被杀死。相当令人失望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T23:19:58.077

字段`swi`指令的代码在这里： http: [//lxr.linux.no/linux+*/arch/arm/kernel/entry-common.S#L335](http://lxr.linux.no/linux+%2a/arch/arm/kernel/entry-common.S#L335)。我不是 ARM 专家，但似乎 CPU 不会将`swi`参数存储在内核可以获取的任何地方；如果内核想知道，它必须从调用程序的运行时映像中获取指令。这使得每个系统调用都更加昂贵，所以（如果我没看错的话）内核只会费心找出`swi`参数是什么，如果它是用`CONFIG_OABI_COMPAT`.

编辑：[ARM ARM](https://www.scss.tcd.ie/~waldroj/3d1/arm_arm.pdf)确认 SWI 对其论点没有做任何有用的事情。（物理页 634 / 逻辑页 A7-118。）

# ruby - 2 if 语句中的条件

> ID：14418283
> 
> 赞同：12
> 
> 时间：2013-01-19T19:58:50.950
> 
> 标签：ruby

我正在尝试检测电子邮件地址是否不是两个域之一，但我在使用 ruby​​ 语法时遇到了一些问题。我目前有这个：

```
if ( !email_address.end_with?("@domain1.com") or !email_address.end_with?("@domain2.com"))
  #Do Something
end 
```

这是条件的正确语法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-19T20:01:09.357

而不是`or`这里，你想要一个逻辑`&&`（和），因为你试图找到*既不*匹配的字符串。

```
if ( !email_address.end_with?("@domain1.com") && !email_address.end_with?("@domain2.com"))
  #Do Something
end 
```

通过使用`or`，如果任一条件为真，则整个条件仍为假。

请注意，我使用的是`&&`代替`and`，因为它具有更高的优先级。细节在[这里得到了很好的概述](https://stackoverflow.com/questions/1426826/difference-between-and-and-in-ruby)

### 从评论：

`unless`您可以使用with 逻辑或构建等效条件`||`

```
unless email_address.end_with?("@domain1.com") || email_address.end_with?("@domain2.com") 
```

这可能更容易阅读，因为`||`不必用`!`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T20:45:15.480

如果添加更多域，那么重复性`email_address.end_with?`会很快变得无聊。选择：

```
if ["@domain1.com", "@domain2.com"].none?{|domain| email_address.end_with?(domain)}
  #do something
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-20T00:08:24.037

我忘了`end_with?`接受多个参数：

```
unless email_address.end_with?("@domain1.com", "@domain2.com")
 #do something
end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-19T20:10:36.967

怎么样：

```
(!email_address[/@domain[12]\.com\z/]) 
```

# android - 无法恢复活动 - android 4.0 的非法状态异常

> ID：14418304
> 
> 赞同：0
> 
> 时间：2013-01-19T20:01:29.887
> 
> 标签：android, android-intent, android-cursoradapter, illegalstateexception, android-cursor

在我的应用程序中，我在 android 4.0 中遇到问题。在 ANDROID 2.3 上没有遇到此问题以下是导致问题的步骤 - 1\. 我有一个主要活动 TaskManagerActivity（活动 1） 2\. 然后我转到另一个活动 ReminderModificationActivity （活动 2) 3\. 进行一些 DB 更改并返回到活动 1 4.然后按返回按钮退出应用程序。当我尝试再次打开应用程序时出现以下错误 -

```
11-06 13:25:37.075: E/AndroidRuntime(6591): FATAL EXCEPTION: main
11-06 13:25:37.075: E/AndroidRuntime(6591): java.lang.RuntimeException: Unable to resume activity {ray.kaushik.simple.task.manager/ray.kaushik.simple.task.manager.ReminderModificationActivity}: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@412a9708
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2575)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2603)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.os.Looper.loop(Looper.java:137)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at java.lang.reflect.Method.invokeNative(Native Method)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at java.lang.reflect.Method.invoke(Method.java:511)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at dalvik.system.NativeStart.main(Native Method)
11-06 13:25:37.075: E/AndroidRuntime(6591): Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@412a9708
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.Activity.performRestart(Activity.java:5051)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.Activity.performResume(Activity.java:5074)
11-06 13:25:37.075: E/AndroidRuntime(6591):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2565)
11-06 13:25:37.075: E/AndroidRuntime(6591):     ... 10 more 
```

我认为我的应用程序正在尝试加载我不想要的 Activity 2。

在活动 1 上按下 bac 按钮上的代码 -

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            if(isBackPressed){
                moveTaskToBack(true);
                mDBHelper.close();
                finish();
            }else{
                Toast.makeText(getApplicationContext(), "Please press back again to exit application", Toast.LENGTH_SHORT).show();
                isBackPressed = true;
            }

            return true;
        }
        return super.onKeyDown(keyCode, event); 
    } 
```

sumone plz可以帮帮我吗..?? 请详细说明，因为我是 android 开发的新手。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:54:13.830

我解决了这个问题。我的活动 2 被调用，即使它应该是活动 1 应该被调用的启动活动。

我在我的清单文件中添加了 android:noHistory = true 并对其工作进行了宾果游戏..

谢谢你们的帮助..!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:06:05.113

确保在 Activity 1 的 onResume 方法中再次收集数据库光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:07:02.960

您在某些应用程序的 onResume 中失败。您正在调用完成以响应后退按钮，这将结束此活动并恢复上一个活动。然后崩溃，因为您正在查询该活动的 onResume 中的关闭游标。如果您不想返回其他活动，则应在启动此活动后调用完成。

# cross-compiling - bin/sh: 1: 未找到 arm-eabi-gcc

> ID：14418308
> 
> 赞同：3
> 
> 时间：2013-01-19T20:02:17.917
> 
> 标签：cross-compiling, sh, bin

我正在尝试通过交叉编译方法编译一个 linux 内核。在解决了很多问题之后，我有了这个：

```
/bin/sh: 1: /home/oc2/prebuilt/linux-86X/toolchain/arm-eabi-4.4.0/bin/arm-eabi-gcc: not found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-04T19:18:14.733

很可能您没有正确添加工具链的正确路径。

**导出 PATH=$(pwd)/prebuilts/gcc/linux-x86/arm/arm-eabi-4.6/bin:$PATH**

把它放在你的 AOSP（你的 android 平台所在的文件夹）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-20T15:58:40.833

因为默认的 gcc/g++ 被意外配置为 arm-eabi-gcc 可能是使用 command `update-alternatives`。修复需要将替代品还原为原始版本：

`sudo update-alternatives --remove-all gcc sudo update-alternatives --remove-all g++`

接下来，为默认主机工具链配置默认 gcc/g++：

`sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 60 sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-6 60`

只有这样才能使默认 arm-eabi-gcc/arm-eabi-g++ 可用：

`sudo update-alternatives --install /usr/bin/arm-eabi-gcc arm-eabi-gcc /home/oc2/prebuilt/linux-86X/toolchain/arm-eabi-4.4.0/bin/arm-eabi-gcc 60 sudo update-alternatives --install /usr/bin/arm-eabi-g++ arm-eabi-g++ /home/oc2/prebuilt/linux-86X/toolchain/arm-eabi-4.4.0/bin/arm-eabi-g++ 60`

# css - 剪裁或倒角图像以查看背景

> ID：14418309
> 
> 赞同：4
> 
> 时间：2013-01-19T20:02:24.207
> 
> 标签：css, transparency, mask, clip

我有一个设计，其中图像的角被切割成 45° 角。目前，它是通过使用绝对定位的跨度对其进行遮罩来实现的，该跨度具有透明的背景图像，其中角落“切割”为不透明的白色。这远非理想，首先是因为额外的跨度，其次是因为图像的背景不是均匀的白色。

我打算稍后生成透明的 PNG，但它会更优雅——考虑到图像是照片——使用 JPEG 和 CSS 的带宽更小。新的 CSS 掩码属性似乎很有希望，但据我了解，它不提供“屏蔽”元素背景的能力，是吗？

所以我的问题是，是否有任何我不知道并且允许我这样做的新 CSS 属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:29:57.703

## 使用变换（仅限 CSS3 解决方案）

下面的方法有少量的不精确，它有两个“编码”的缺点：

1.  需要两个包装纸`img`
2.  需要知道图像的大小（如果图像设置大小或使用 javascript 提供宽度/高度信息，这可能并不总是一个缺点）。

但是，对于 IE8 及更低版本，它确实可以很好地降级为方角。

核心思想是调整外包装的大小并隐藏其溢出，适当调整大小、旋转和缩小内包装以创建倒角（也隐藏了溢出），然后反转旋转并按比例放大，如果需要`img`嵌套在里面。该方法足够健壮，可以根据需要设置一些相当不错的边框，尽管在浏览器上呈现此类边框的质量会有所不同。

## [这是小提琴。](http://jsfiddle.net/ySQdn/48/)

**HTML（基本形式）**

`span`可能是`div`一个.

```
<span class="chamfer">
    <span>
        <img src="http://placehold.it/351x151" />
    </span>
</span> 
```

**CSS（基本形式）**

```
.chamfer {
    overflow: hidden;
    display: inline-block; /* could be "block" */
    margin: 25px; /* for demo only */
    /* Because of the rotations following, it seems like an odd
       number in width and height worked more consistently, as
       it gives a "middle" pixel by which to transform the rotation
       off of
    */
    width: 351px; /* width of image */
    height: 151px; /* height of image */
}

.chamfer > span {
    overflow: hidden;
    display: inline-block; /* could be "block" */
    -moz-transform-origin: 50% 50%;
    -webkit-transform-origin: 50% 50%;
    -o-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    transform-origin: 50% 50%;
    /* The rotation gets the chamfer angle
       the scale sets the "size" of the cut
       though not very precisely (exact px height
       is not possible to set explicitly.
    */
    -moz-transform: rotate(45deg) scale(.9);
    -webkit-transform: rotate(45deg) scale(.9);
    -o-transform: rotate(45deg) scale(.9);
    -ms-transform: rotate(45deg) scale(.9);
    transform: rotate(45deg) scale(.9);
    /* top/bottom padding is image width (351px)
       minus the image height (151px) = 200px divided by 2;
       if the image were taller than wide, then this
       would become (iH - iW) / 2 for the left/right padding 
    */
    padding: 100px 0; 
    margin-top: -100px; /* adjust for the padding */
    /* the following helped "square" the item better */
    width: 100%;
    height: 100%;
}

.chamfer img {
    display: inline-block; /* could be "block" */
    -moz-transform-origin: 50% 50%;
    -webkit-transform-origin: 50% 50%;
    -o-transform-origin: 50% 50%;
    -ms-transform-origin: 50% 50%;
    transform-origin: 50% 50%;
    /* The rotation is reversing the wrapper rotation
       to put the image horizontal again, while the scale
       is the inverse of the wrapper's scale, so here
       it is ( 1 / 0.9 ) = 1.11, to scale the image back
       up to correct size
    */
    -moz-transform: rotate(-45deg) scale(1.11);
    -webkit-transform: rotate(-45deg) scale(1.11);
    -o-transform: rotate(-45deg) scale(1.11);
    -ms-transform: rotate(-45deg) scale(1.11);
    transform: rotate(-45deg) scale(1.11);  
} 
```

**HTML（带有 2px 边框的小倒角）**

请参阅上面的小提琴以获取具有 10px 边框版本的“更大”倒角。

当然，如果您所有的图像都获得了一个固定大小的边框，您只需像上面的基本 html 一样制作它，而不是像我在这里那样覆盖类。

```
<span class="chamfer small b2">
    <span>
        <img src="http://placehold.it/351x151" />
    </span>
</span> 
```

**CSS（覆盖上面的基本 CSS）**

请参阅上面的小提琴以获取具有 10px 边框版本的“更大”倒角。

当然，如果您所有的图像都获得了一个固定大小的边框，您只需将这些设置为您的基本 css 的值，而不是在此处定义的单独类中进行。

```
.b2 * { 
    border: 2px solid black;
}

.chamfer.b2 { /* 2px border */
    width: 355px; /* 4px added for the 2px border */
    height: 155px; /* 4px added for the 2px border */
}

.chamfer.b2 > span {
    margin-top: -102px; /* the extra 2px is to accomodate top border of 2px */
    margin-left: -2px; /* this is for the 2px left border */
}

.chamfer.small > span {
    /* changed the scale for a smaller cut */
    -moz-transform: rotate(45deg) scale(.96);
    -webkit-transform: rotate(45deg) scale(.96);
    -o-transform: rotate(45deg) scale(.96);
    -ms-transform: rotate(45deg) scale(.96);
    transform: rotate(45deg) scale(.96);
}

.chamfer.small img {
    /* scale changed on wrapper to .96 so scale changes on 
       image to ( 1 / 0.96 ) = 1.042\. 
    */
    -moz-transform: rotate(-45deg) scale(1.042);
    -webkit-transform: rotate(-45deg) scale(1.042);
    -o-transform: rotate(-45deg) scale(1.042);
    -ms-transform: rotate(-45deg) scale(1.042);
    transform: rotate(-45deg) scale(1.042);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:44:25.573

查看这篇博文（及其相应的 jsFiddle），作者使用多个背景渐变来实现我认为您想要做的事情：

[http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)

```
div {
    background: #c00; /* fallback */
    background:
        -moz-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -moz-linear-gradient(135deg, transparent 10px, #c00 10px),
        -moz-linear-gradient(225deg, transparent 10px, #c00 10px),
        -moz-linear-gradient(315deg, transparent 10px, #c00 10px);
    background:
        -o-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -o-linear-gradient(135deg, transparent 10px, #c00 10px),
        -o-linear-gradient(225deg, transparent 10px, #c00 10px),
        -o-linear-gradient(315deg, transparent 10px, #c00 10px);
    background:
        -webkit-linear-gradient(45deg,  transparent 10px, #c00 10px),
        -webkit-linear-gradient(135deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(225deg, transparent 10px, #c00 10px),
        -webkit-linear-gradient(315deg, transparent 10px, #c00 10px);
}

div, div.round {
    background-position: bottom left, bottom right, top right, top left;
    -moz-background-size: 50% 50%;
    -webkit-background-size: 50% 50%;
    background-size: 50% 50%;
    background-repeat: no-repeat;
} 
```

# php - PHP CURL 错误 7 无法连接到主机

> ID：14418312
> 
> 赞同：0
> 
> 时间：2013-01-19T20:02:46.510
> 
> 标签：php, curl

我在使用 Php CURL 时遇到了一个特殊的问题。

我正在尝试通过在 centos 工作站上运行的 php 脚本调用在同一网络内的 Windows 机器上运行的 Web 服务。我正在使用 CURL。问题是我可以使用浏览器访问 URL 并且它运行良好。但是，当我尝试使用 php 脚本时，它会给出错误代码 7 。

但是，如果我在 php 脚本中尝试本地 IP 地址和 google，它可以正常工作。可能是什么问题？在过去的几个小时里，我一直试图让我解决这个问题，但我无法对其进行排序。

我还想补充一点，当我通过终端使用 crl 时，我得到了正确的回复。HTTP 200OK

需要帮助:)

```
$curl = curl_init();
curl_setopt_array($curl, array( 
   CURLOPT_RETURNTRANSFER => 1,
   CURLOPT_HEADER => 1,
   CURLOPT_TIMEOUT => 4,
   CURLOPT_USERAGENT=>'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13',
   CURLOPT_VERBOSE => 1,
   CURLOPT_PORT => 9710,          
   CURLOPT_URL => 'http://192.168.100.4:9710/http/send-message?message='.$message
));

// Send the request & save response to $resp
$resp = curl_exec($curl);
echo "<br>Error Code : " .curl_errno($curl); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:52:29.610

如果您尝试：

```
$curl = curl_init();
curl_setopt_array($curl, array( 
   CURLOPT_RETURNTRANSFER => 1,
   CURLOPT_HEADER => 1,
   CURLOPT_VERBOSE => 1,          
   CURLOPT_URL => 'http://192.168.100.4:9710/http/send-message?message='.$message
));

if(curl_exec($curl) === false) {
    echo 'Curl error: ' . curl_error($ch);
} else {
    echo 'Success!';
} 
```

我注意到的一件事是您试图访问该端口两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:40:43.447

Centos 机器上启用了 selinux，这导致了问题。谢谢你们的帮助。

# javascript - 如何用凉亭制作 requirements.txt 类文件？

> ID：14418314
> 
> 赞同：4
> 
> 时间：2013-01-19T20:03:12.987
> 
> 标签：javascript, node.js, npm, bower

我已经开始使用`bower`，它似乎真的很有帮助。我来自 python 背景，所以我习惯了`virtualenv`和`requirements.txt`.

如果可以的话，我宁愿不将所有依赖项存储在源代码管理中，所以我想知道，**如何创建像`requirements.txt`with一样的文件`bower`？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T05:50:58.270

在多打听之后，我有了解决方案。

`bower`使用一个名为`bower.json`（以前`component.json`）的文件，它类似于 a`Gemfile`或`requirements.txt`.

它*可以*手动创建，看起来像这样......

```
{
    "name": "<app name, defaults co current folder name>",
    "version": "0.0.0",
    "dependencies": {
        "backbone": "~0.9.10",
        "underscore": "~1.4.3"
    }
} 
```

但是，**我缺少的部分是`--save`在安装软件包时包含标志`bower`**：

```
bower install <package_name> --save 
```

不幸的是，我不相信有一种方法可以使用该 `.bowerrc`文件默认设置此行为。

作为一个附加的花絮，一旦你有了一个`bower.json`文件，安装你的依赖项就像运行`bower install`.

# php - PHP 变量使用？

> ID：14418316
> 
> 赞同：-1
> 
> 时间：2013-01-19T20:03:19.590
> 
> 标签：php

我用这段代码定义网站网址，

`$siteHTTPURL="http://www.example.com";`

我想在 index.php 中使用这个变量这个代码；

`<a href="<?=$siteHTTPURL?>/folder1/test.php">Test >></a>`

但是，此代码出现在网络浏览器的状态栏..

`"<?=$siteHTTPURL?>/folder1/test.php"`

为什么，`"<?=$siteHTTPURL?>"`代码没有显示`"http://www.example.com"`价值？

对不起我的英语不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:10:08.763

正如迈克尔在评论中所说，检查您是否启用了短标签。

替代语法：

```
<a href="<?php echo $siteHTTPURL; ?>/folder1/test.php">Test >></a> 
```

或者

```
echo '<a href="' . $siteHTTPURL . '/folder1/test.php">Test >></a>'; 
```

# css - 使完整的 div 可点击 (html)

> ID：14418319
> 
> 赞同：2
> 
> 时间：2013-01-19T20:04:00.293
> 
> 标签：css, html, hyperlink

我有以下问题！我有按钮（div），里面有一个文本超链接。我希望这个超链接可以在整个 div 上单击。我这样做了

HTML：

```
echo '<div id="tagsul"><a href="' . get_category_link( $category->term_id ) . '"       style="color:#FFF;" title="' . sprintf( __( "View all posts in %s" ), $category->name ) . '" ' . '>' . $category->name.'</a></div> '; 
```

CSS：

```
#tagsul{
width:190px;
height:40px;
margin-right:5px;
margin-left:5px;
background:#82e1a1;
text-align:center;
float:left;
margin-top:10px;
}

#tagsul a {
display:block;
height: 100%;
width: 100%;
text-decoration:none;
} 
```

这一切都很好。但是文本现在显示在 div 的中间顶部。但我希望它从两个角度（高度和宽度）显示在 div 的中间

我在想我可以用顶部填充做一些事情，但这不起作用，因为整个#tagsurl 是可点击的，所以当我在顶部使用填充时，按钮下方也会有一个可点击的部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:19:08.883

```
#tagsul{
width:190px;
height:40px;
margin-right:5px;
margin-left:5px;
background:#82e1a1;
text-align:center;
float:left;
margin-top:10px;
vertical-align: middle;
display: table;
}

#tagsul a {
display:block;
height: 100%;
width: 100%;
text-decoration:none;
vertical-align: middle;
display: table-cell;
} 
```

[演示](http://jsfiddle.net/YuEua/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:21:49.130

以下作品：

```
#tagsul {
    width:190px;
    height:100px;
    margin-right:5px;
    margin-left:5px;
    background:#82e1a1;
    text-align:center;
    float:left;
    margin-top:10px;
    display: table;
}

#tagsul a {
    text-decoration:none;
    vertical-align: middle;
    display: table-cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:13:22.027

请记住在应用填充时编辑高度。它应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T20:18:39.243

有几个选择。您可以将 div 放在 href 标记中并设置 div 的样式，这样它就可以点击了，或者您可以使用 onclick 参数并使用 JavaScript。

# python - Python——捕获异常的效率

> ID：14418325
> 
> 赞同：9
> 
> 时间：2013-01-19T20:04:48.427
> 
> 标签：python, performance, try-catch

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T20:11:15.580

每当您编写代码时，都会有一些关注点的平衡：性能、可读性、正确性、可扩展性、可维护性等。不幸的是，通常不可能同时在每个方向上改进代码。例如，快速的内容可能不那么可读。

在 Python 中受到鼓励的原因之一`try..except`是因为您通常无法预料到您的代码可能会被使用的所有方式，因此与其检查是否存在特定条件，更一般的做法是捕获任何特定类别的错误可能会出现。因此`try..except`可能会使您的代码更可重用。

但是，如果经常到达该子句，这也是`try..except`很慢的。`except`

有没有办法对该块进行编码，以便不会引发异常并使用 try..except 来捕获不太频繁的条件？

或者如果没有，为了效率，你可以选择不使用try..except。编程中几乎没有硬性规定。你必须根据你的关注点来选择你的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:06:10.130

如果您尝试优化此功能以提高速度，您应该关注可能成为实际瓶颈的地方。您的三个数据库查询，每一个都会导致操作系统进行上下文切换，几乎可以肯定比捕获异常要长一个数量级。如果您想尽可能快地编写代码，请首先将所有三个数据库查询合并为一个：

```
auth_objects = UserSocialAuth.objects.filter(user=self, provider__in=('facebook', 'foursquare', 'twitter')) 
```

然后循环遍历对象。如果这`provider__in`三个提供者是数据库中唯一的提供者，则可能不需要过滤器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:45:19.550

确实，捕获异常的成本适中（请参阅下面的一些时间），并且您不希望在程序的瓶颈中使用它，但是在您给出的示例中，捕获异常将是很小的一部分与`Model.objects.get`必须构建 SQL 查询、将其传输到数据库服务器并等待数据库报告没有此类对象的调用进行比较的调用。

一些示例时间。函数`f2`抛出和捕获异常，同时`f1`实现相同的功能而不使用异常。

```
d = dict()

def f1():
    if 0 in d: return d[0]
    else: return None

def f2():
    try: return d[0]
    except KeyError: return None

>>> timeit(f1)
0.25134801864624023
>>> timeit(f2)
2.4589600563049316 
```

并`f3`尝试通过 Django 的 ORM 从数据库（在同一台机器上运行）获取一个不存在的对象：

```
def f3():
    try:
        MyModel.objects.get(id=999999)
    except MyModel.DoesNotExist:
        pass 
```

这需要大约 400 倍的时间`f2`（以至于我不想等待默认`number=1000000`迭代完成）：

```
>>> timeit(f3, number=1000)
1.0703678131103516 
```

# android - 如何启动 Vuforia AR 示例 App android？

> ID：14418330
> 
> 赞同：8
> 
> 时间：2013-01-19T20:05:11.333
> 
> 标签：android, augmented-reality, vuforia

我正在关注`Vuforia`并且我已经运行了示例，它工作正常但是如果我想启动我们自己的应用程序，那么你能帮我如何启动应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T07:26:26.047

请按照以下步骤将 vuforia 与您的 android 项目集成。

1) 复制包含**libvuforia.so的****vuforia.jar**和**armeabi-v7**文件夹，并将其粘贴到项目的 libs 文件夹中。

 **2）右键单击您的android项目并转到**构建路径> cofigure构建路径**并选择库选项卡并添加vuforia.jar文件。

现在这将起作用，您可以轻松使用 vuforia 功能。

如果您想创建自己的标记，那么您必须登录[https://developer.vuforia.com/targetmanager](https://developer.vuforia.com/targetmanager)并创建项目，然后下载 .xml 文件和 .dat 文件，然后将该文件与您的 android 项目集成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T13:50:34.543

对于 Android Studio 2.3.3 1\. 将 vuforia.jar 和 libvuforia.so 复制到您的 libs 文件夹中 2\. 在您的应用程序中，右键单击并选择打开模块设置 3\. 单击依赖项和“+”号以添加“jar 依赖项” 4.选择vuforia.jar，点击确定

完毕！**

# javascript - Ember.js 新路由 api

> ID：14418337
> 
> 赞同：4
> 
> 时间：2013-01-19T20:06:05.570
> 
> 标签：javascript, ember.js, url-routing, ember-router

我目前正在将我的应用程序从 ember 迁移`1.0.0-pre2`到`1.0.0-pre4`新路由 API 时遇到问题。

文档中的新指南似乎没有涵盖我的用例。

我总是在应用程序其余部分旁边有一个聊天 div，我的应用程序模板看起来像这样：

```
<script type="text/x-handlebars" data-template-name="application">
    <div id="main-content">
         <aside>
            {{outlet chat}}
         </aside>
         {{outlet main}}
     </div>
</script> 
```

使用旧路由器 conf 映射两个控制器及其各自出口上的 URL。

```
Router : Ember.Router.extend({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/',
            connectOutlets: function(router, event) {
                router.get('applicationController').connectOutlet('main', 'main');
                router.get('applicationController').connectOutlet('chat', 'chat');

            }
        })
    }) 
```

如果这对 Ember 来说是一个糟糕的设计，我该如何将此代码迁移到新的 API 或更改我的编码方式。

我想我可以将我的问题概括为，**我们如何使用新的路由 API 将多个控制器映射到同一个 URL，处理页面的不同部分。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:13:55.777

按照文档 [1] 中的示例进行操作。

```
App.Router.map(function() {
    this.resource('index', {path: '/'});
});

App.IndexRoute = Ember.Route.extend({
    renderTemplate: function(controller, model) {
        this.render('main', {outlet: 'main'});
        this.render('chat', {outlet: 'chat'});
    }
}); 
```

[1] - [http://emberjs.com/guides/routing/](http://emberjs.com/guides/routing/)

# android - Android：使用 ListView 时在活动之间传递数据的最佳方式

> ID：14418343
> 
> 赞同：2
> 
> 时间：2013-01-19T20:06:27.360
> 
> 标签：android, android-listview, android-activity

我有一个名为的`SearchActivity`活动`ListView`来自 JSON 下载的数据子集（标题和距离）。我想在另一个名为`ResultsActivity`. 我知道如何从`ListView`自身获取数据并将其传递给其他活动，但我不确定如何获取所有数据以传递给第二个活动。

例如，我希望 onClickListener 对当前选定项目的 ArrayList 进行查找，以便我可以执行以下操作：

in.putExtra(TAG_NAME, name); in.putExtra(TAG_STREET, 街道); 等等。

问题是 ListView 中显示的唯一内容是名称和距离。如何使用当前的 Listview 选择进入 ArrayList 条目，以便显示街道？

任何帮助表示赞赏。

```
SearchActivity.java
package com.chance.squat;

import com.chance.squat.R;
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ImageView;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class SearchActivity extends ListActivity {

    // url to make request
    private static String url = "http://192.168.1.115:3000/bathrooms/nearby.json/?lat=45.580639&lon=-122.677682";

    // JSON Node names
    private static final String TAG_BATHROOMS = "bathrooms";
    private static final String TAG_ID = "ID";
    private static final String TAG_ACCESS = "access";
    private static final String TAG_CITY = "city";
    private static final String TAG_COMMENT = "comment";
    private static final String TAG_DIRECTIONS = "directions";
    private static final String TAG_NAME = "name";
    private static final String TAG_STREET = "street";
    private static final String TAG_BATHROOMTYPE = "bathroomtype";
    private static final String TAG_DISTANCE = "distance";
    private static final String TAG_AVAIL = "avail";
    private static final String TAG_COUNTRY = "country";
    private static final String TAG_STATE = "state";
    private static final String TAG_POSTAL = "postal";

    // contacts JSONArray
    JSONArray bathrooms = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.activity_search);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> bathroomList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            bathrooms = json.getJSONArray(TAG_BATHROOMS);

            // looping through All Contacts
            for(int i = 0; i < bathrooms.length(); i++){
                JSONObject c = bathrooms.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String access = c.getString(TAG_ACCESS);
                String city = c.getString(TAG_CITY);
                String comment = c.getString(TAG_COMMENT);
                String directions = c.getString(TAG_DIRECTIONS);
                String name = c.getString(TAG_NAME);
                String street = c.getString(TAG_STREET);
                String bathroomtype = c.getString(TAG_BATHROOMTYPE);                
                String distance = c.getString(TAG_DISTANCE);
                String distanceTrimmed = distance.substring(0,4) + " " + "miles away";
                String avail = c.getString(TAG_AVAIL);
                String country = c.getString(TAG_COUNTRY);
                String state = c.getString(TAG_STATE);
                String postal = c.getString(TAG_POSTAL);

                System.out.println(name);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_ACCESS, access);
                map.put(TAG_CITY, city);
                map.put(TAG_COMMENT, comment);
                map.put(TAG_DIRECTIONS, directions);
                map.put(TAG_NAME, name);
                map.put(TAG_STREET, street);
                map.put(TAG_BATHROOMTYPE, bathroomtype);
                map.put(TAG_DISTANCE, distanceTrimmed);
                map.put(TAG_AVAIL, avail);
                map.put(TAG_COUNTRY, country);
                map.put(TAG_STATE, state);
                map.put(TAG_POSTAL, postal);

                // adding HashList to ArrayList
                bathroomList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */

        ListAdapter adapter = new SimpleAdapter(this, bathroomList,
                R.layout.list_item,
                new String[] { TAG_NAME, TAG_DISTANCE}, new int[] {
                         R.id.name, R.id.distance });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                //String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
                //String distance = ((TextView) view.findViewById(R.id.distance)).getText().toString();

                // Starting new intent
                //Intent in = new Intent(getApplicationContext(), SeachActivity.class);
                //in.putExtra(TAG_NAME, name);
                //in.putExtra(TAG_DISTANCE, distance);
                //startActivity(in);

            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:20:11.783

您可以在适配器上调用[getItem 。](http://developer.android.com/reference/android/widget/SimpleAdapter.html#getItem%28int%29)

或者，您可以创建自己的从 BaseAdapter 扩展的适配器。在那里，您将完全控制要使用和返回的数据（使用[getItem](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29)）。

此外，只要有可能，谷歌建议使用片段而不是活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:21:53.507

您可以使用 ListView 适配器的方法从 ListView 中获取特定的对象和值，该`onItemClickListener()`方法获得了点击。下一步是在 ArrayList 中搜索（假设您将完整数据保存在 ArrayList 中），使用`for loop`.

例如，您可以从 ListView 中获取标题字符串并在 ArrayList 中搜索。为此，您需要访问 ListActivity 中的 ArrayList。如果无法访问，请尝试使用捆绑包，或者如果数据在 2 个以上的活动中经常使用，您还可以使用静态类来存储数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:20:04.450

[适配器](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29) `getItem(position)`

获取数据集中与指定位置关联的数据项。

这是你想要的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T20:26:15.923

尝试获取选定的 ListItem ArrayList ：

```
lv.setOnItemClickListener(new OnItemClickListener() {

 @Override
  public void onItemClick(AdapterView<?> parent, View view,
               int position, long id) {
   // getting values from selected ListItem
   ArrayList<HashMap<String, String>> arrhashmap=
             (ArrayList<HashMap<String, String>>) lv.getItemAtPosition(position);

   // Starting new intent
   Intent in = new Intent(getApplicationContext(), SeachActivity.class);
   in.putExtra("arralsthasmap", arrhashmap);
   startActivity(in); 
```

} });

并在其他活动中检索 ArrayList 为：

```
ArrayList<HashMap<String, String>> arrhashmap 
                      =(ArrayList<HashMap<String, String>>) 
          getIntent().getSerializableExtra("arralsthasmap"); 
```

# c++ - 在命名空间中有引用是否可行？

> ID：14418346
> 
> 赞同：2
> 
> 时间：2013-01-19T20:06:47.400
> 
> 标签：c++, reference, namespaces

所以这就是我所拥有的：

```
//graphics.hpp
#include guard

extern camera_c default_camera;

namespace graphics {
    camera_c &camera = default_camera;
};

#endif

//graphics.cpp

camera_c default_camera(ctor stuff); 
```

* * *

```
//main.cpp

#include <graphics.hpp>

int main() {
    do stuff with graphics::camera;
} 
```

这给了我

```
main.o: multiple definition of graphics::camera
graphics.o: first defined here 
```

我也试过做

```
camera_c &&camera = camera_c(ctor stuff); 
```

这给了我同样的错误，但是从`main.cpp`和`graphics.cpp`

## 所以我的问题是

是否有一些可行的方法来引用该命名空间中的类？还是我应该只使用指针？理想情况下，它应该是一个参考，但这可能是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T20:11:57.717

你误解了错误。

该错误告诉您 main.cpp 和 graphics.cpp 都包含 graphics.hpp，这违反了[One Definition Rule](http://en.wikipedia.org/wiki/One_Definition_Rule)。

也使该变量`extern`：

```
namespace graphics {
    extern camera_c &camera;
}; 
```

**并且只在一个源文件**中定义它。

```
namespace graphics {
    camera_c &camera = default_camera;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:11:50.080

关于什么...

```
// graphics.hpp
namespace graphics {
    extern camera_c camera;
}

// graphics.cpp
#include <graphics.hpp>

namespace graphics {
    camera_c camera(...);
} 
```

我必须补充一点，全局定义的变量是不好的风格；除非您处理的是遗留 API，否则它们会导致比其价值更多的问题！

# windows-phone - WP8 在没有以前的 WP7 工具包的情况下实现手势

> ID：14418349
> 
> 赞同：1
> 
> 时间：2013-01-19T20:07:10.673
> 
> 标签：windows-phone, gestures

我最近为 Windows Phone 8 重建了一个应用程序，但使用新的 Silverlight Toolkit，GestureListener 不再存在，警告：“Silverlight 项目不支持 GestureListener”。我真的想在我的应用程序中实现一个手势导航系统，从而可以向左或向右滑动页面以导航到其他两个页面之一，但只有在一定的“拖动阈值”之后 - 这在 WP7 中很好地展示了[（](http://bit.ly/LpMfUg)行为用于删除我想应用于我的 MainPage 的项目） - 但如果没有旧的控件，我在不懈地尝试后看不到明确的方法。现在显然只有三个[操作事件](http://bit.ly/SQ5ecW)我们可以使用，它使以前容易得多的过程复杂化。我正在尝试使整个页面（即第一个 ContentPanel）沿水平方向移动，但现在甚至无法实现。请问有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T16:51:18.593

```
using Microsoft.Phone.Controls;

namespace PhoneApp2
{
    public partial class MainPage : PhoneApplicationPage
    {
        double _x = 0;
        double _y = 0;

        double _x2 = 0;
        double _y2 = 0;

        public MainPage()
        {
            InitializeComponent();            
        }

        private void PhoneApplicationPage_ManipulationStarted_1(object sender, System.Windows.Input.ManipulationStartedEventArgs e)
        {
            _x = e.ManipulationOrigin.X;
            _y = e.ManipulationOrigin.Y;
        }

        private void PhoneApplicationPage_ManipulationCompleted_1(object sender, System.Windows.Input.ManipulationCompletedEventArgs e)
        {
            _x2 = e.ManipulationOrigin.X;
            _y2 = e.ManipulationOrigin.Y;

            string _xx = string.Format("  x:{0}  y:{1}   x2:{2}   y2:{3}", _x, _y, _x2, _y2);

            if (_y > _y2 && _y - _y2 > 100)
            {
                lbl1.Text = "up" + _xx;
            }
            else if (_x > _x2 && _x - _x2 > 100)
            {
                lbl1.Text = "left" + _xx;
            }
            else if (_y < _y2 && _y2 - _y > 100)
            {
                lbl1.Text = "down" + _xx;
            }
            else if (_x < _x2 && _x2 - _x > 100)
            {
                lbl1.Text = "right" + _xx;
            }
        }
    }
} 
```

# git - 忽略 git 子模块的新提交

> ID：14418352
> 
> 赞同：86
> 
> 时间：2013-01-19T20:07:26.203
> 
> 标签：git, status, git-submodules, ignore

# 背景

在 Linux 上使用 Git 1.8.1.1。存储库如下所示：

```
master
  book 
```

子模块创建如下：

```
$ cd /path/to/master
$ git submodule add https://user@bitbucket.org/user/repo.git book 
```

`book`子模块是干净的：

```
$ cd /path/to/master/book/
$ git status
# On branch master
nothing to commit, working directory clean 
```

# 问题

另一方面，master 显示 book 子模块有“新提交”：

```
$ cd /path/to/master/
$ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   book (new commits)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

Git 应该完全忽略子模块目录，这样 master 也是干净的：

```
$ cd /path/to/master/
$ git status
# On branch master
nothing to commit, working directory clean 
```

# 失败的尝试 #1 - 脏

[根据此答案](https://stackoverflow.com/a/5542452/59087)，文件内部`master/.gitmodules`如下：

```
[submodule "book"]
        path = book
        url = https://user@bitbucket.org/user/repo.git
        ignore = dirty 
```

# 失败的尝试 #2 - 未跟踪

[根据此答案](https://stackoverflow.com/a/5127213/59087)更改`master/.gitmodules`为以下内容：

```
[submodule "book"]
        path = book
        url = https://user@bitbucket.org/user/repo.git
        ignore = untracked 
```

# 尝试失败 #3 - showUntrackedFiles

[根据this answer](https://stackoverflow.com/a/4345788/59087)编辑`master/.git/config`为以下内容：

```
[status]
   showUntrackedFiles = no 
```

# 失败的尝试 #4 - 忽略

将 book 目录添加到主忽略文件中：

```
$ cd /path/to/master/
$ echo book > .gitignore 
```

# 失败的尝试 #5 - 克隆

将 book 目录添加到 master 中，如下所示：

```
$ cd /path/to/master/
$ rm -rf book
$ git clone https://user@bitbucket.org/user/repo.git book 
```

# 问题

子模块如何`book`位于存储库下自己的存储库目录中，`master`而 git 忽略`book`子模块？也就是说，不应显示以下内容：

```
#
#       modified:   book (new commits)
# 
```

`git status`在主存储库中执行时如何抑制该消息？

一篇关于[git submodule pitfalls](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)的文章表明这​​是不适当的子模块使用？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-09-17T15:55:48.930

赶紧跑：

```
$ git submodule update 
```

这会将子模块恢复为旧提交（在 parent-repo 中指定），而不使用子模块的最新版本更新 parent-repo。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-20T07:17:12.253

要包含另一个不需要在其超级存储库中跟踪的存储库，请尝试以下操作：

```
$ cd /path/to/master/
$ rm -rf book
$ git clone https://user@bitbucket.org/user/repo.git book
$ git add book
$ echo "book" >> .gitignore 
```

然后提交。

如链接的[git 子模块陷阱文章](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)中所述：

> ...父模块和子模块之间的唯一联系是存储在父模块提交中的子模块签出 SHA 的记录值。

这意味着子模块不是由其签出的分支或标签保存的，而是始终由特定的提交保存的；该提交（SHA）像普通文本文件一样保存到超级存储库（包含子模块的存储库）中（当然，它被标记为此类引用）。

*当您在子模块中*签出不同的提交或在其中进行新提交时，超级存储库将看到其签出的 SHA 已更改。那是你`modified (new commits)`从`git status`.

要消除这种情况，您可以：

*   `git submodule update`，这会将子模块重置为当前保存在超级存储库中的提交（有关详细信息，请参见[手册`git submodule`页](http://git-scm.com/docs/git-submodule)；或
*   `git add book && git commit`将新的 SHA 保存到超级存储库中。

正如评论中提到的，考虑放弃`book`子模块：如果不需要将其状态作为超级回购的一部分进行跟踪，则将其克隆到超级回购中。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-10-21T09:47:23.197

您可以抑制两种更改通知（来自 git 1.7.2）。

第一个是未跟踪的内容，当您对子模块进行更改但尚未提交这些内容时会发生这种情况。父存储库注意到这些并且 git status 相应地报告它：

```
modified: book (untracked content) 
```

您可以使用以下命令抑制这些：

```
[submodule "book"]
    path = modules/media
    url = https://user@bitbucket.org/user/repo.git
    ignore = dirty 
```

但是，一旦您提交了这些更改，父存储库将再次注意到并相应地报告它们：

```
modified:   book (new commits) 
```

如果您也想抑制这些，则需要忽略所有更改

```
[submodule "book"]
    path = book
    url = https://user@bitbucket.org/user/repo.git
    ignore = all 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-04-16T17:53:44.393

Git 2.13（2017 年第二季度）将添加另一种方式来包含不需要由其父 repo 跟踪的子模块。

在OP的情况下：

```
git config submodule.<name>.active false 
```

请参阅[提交 1b614c0](https://github.com/git/git/commit/1b614c07d2428927358cc7317622913d1dbd59c9)、[提交 1f8d711](https://github.com/git/git/commit/1f8d711548c08e05766e067dc23e5be3b1b72657)、[提交 bb62e0a](https://github.com/git/git/commit/bb62e0a99fcbb9ceb03502bf2168d2e57530214f)、[提交 3e7eaed](https://github.com/git/git/commit/3e7eaed016e6241e96de6a0140923e81cfc387e8)、[提交 a086f92](https://github.com/git/git/commit/a086f921a725319a6f0c2c3aacf676c890b3ce3e)（2017 年 3 月 17 日）和[提交 ee92ab9](https://github.com/git/git/commit/ee92ab992fada00ca945bddce5c281ca0927747c)、[提交 25b31f1](https://github.com/git/git/commit/25b31f1b73331d3d9e90a72c34e514795e98c174)、[提交 e7849a9](https://github.com/git/git/commit/e7849a9677e9db6af81f568ae40ad2eddf5d3f0d)、[提交 6dc9f01](https://github.com/git/git/commit/6dc9f01f33bdbaebcf811c89766d4e4902a96f27)、[提交 5c2bd8b](https://github.com/git/git/commit/5c2bd8b77aeefa4c6484684ef3e9227a6287a93e)（2017 年 3 月 16 日），作者为[Brandon](https://github.com/mbrandonw) Williams [（`mbrandonw`](https://github.com/mbrandonw)
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 a93dcb0](https://github.com/git/git/commit/a93dcb0a56a38289632a85d906e49150b1e34100)中，2017 年 3 月 30 日）)

> ## `submodule`: 解耦 url 和子模块的兴趣
> 
> 当前，`submodule.<name>.url`config 选项用于确定给定的子模块是否对用户感兴趣。在我们希望在不同的工作树中检查不同的子模块或更通用的机制来选择感兴趣的子模块的世界中，这最终会变得很麻烦。
> 
> 在未来工作树支持子模块时，将会有多个工作树，每个工作树可能只需要检出子模块的一个子集。
> URL（这是可以获取子模块存储库的位置）在不同的工作树之间不应有所不同。
> 
> 用户更容易指定他们感兴趣的子模块组，而不是`git submodule init <path>`在他们希望在工作树中检出的每个子模块上运行“”，这也可能很方便。
> 
> 为此，引入了两个配置选项，`submodule.active`并且 `submodule.<name>.active`.
> 
> *   配置包含一个路径规范，`submodule.active`它指定工作树中应该存在哪些子模块。
>     *   `submodule.<name>.active`config 是一个布尔标志，用于指示该特定子模块是否应该存在于工作树中。
> 
> 重要的是要注意它的`submodule.active`功能不同于其他配置选项，因为它需要一个路径规范。
> 这允许用户采用至少两个新的工作流程：
> 
> 1.  子模块可以用一个前导目录分组，这样一个路径规范，例如“ `lib/`”将覆盖所有库模块，以允许那些对库模块感兴趣的人设置“ `submodule.active = lib/`”一次，说明“”中的任何和所有模块`lib/`都是有趣的。
> 2.  一旦发明了 pathspec-attribute 特性，用户可以用属性标记子模块来对它们进行分组，这样一个具有属性要求的广泛的 pathspec，例如' `:(attr:lib)`'，可以用来表示任何和所有具有 ' `lib`' 属性的模块都是有趣的。
>     由于`.gitattributes`文件和文件一样`.gitmodules`是由超级项目跟踪的，所以当一个子模块在超级项目树中移动时，项目可以调整哪个路径获取属性`.gitattributes`，就像它可以调整哪个路径有子模块一样`.gitmodules`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-27T03:13:54.480

Nevik Rehnel 的回答对于您所问的问题肯定是正确的：*我不想拥有一个子模块，我该如何摆脱这种情况？！*.

仅，如果您的`master`项目需要`book`子模块，那么保留它是一个很好的姿态，因为这样其他签出您的项目的用户就可以享受没有任何特殊`git`命令要运行的乐趣（嗯......有一些特殊的命令可以使用子模块，但总的来说，我认为它仍然更易于管理。）

在您的情况下，您在`book`存储库中进行更改，并在某些时候提交这些更改。这意味着您在该子模块中有*新的提交*，其中有一个新的 SHA1 引用。

您需要在主目录中做的是在主存储库中提交这些更改。

```
cd /path/to/master
git commit . -m "Update 'book' in master" 
```

这会将 SHA1 引用更新为存储库`master`中可用的最新版本。`book`因此，此提交允许其他人在提示处签出所有`master`&`book`存储库。

因此，实际上，每当您对子模块进行更改时，您都会再次提交一次。如果您还对存储库中的某些文件进行更改，这是半透明的，`master`因为您会同时提交这两个文件。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2014-01-30T22:53:06.317

跑

```
git submodule update 
```

在根级别。

# haskell - Haskell 程序无法在我的记事本++ 上运行，如何使该程序具有交互性？

> ID：14418354
> 
> 赞同：2
> 
> 时间：2013-01-19T20:07:55.690
> 
> 标签：haskell, notepad++

这就是我所拥有的，

```
doubleMe :: int->int
doubleMe x = x + x 
```

当我在记事本++上运行它时

```
ghc hw.hs
Process started >>>
[1 of 1] Compiling Main             ( hw.hs, hw.o )

hw.hs:1:1: The function main' is not defined in module `Main'
<<< Process finished.
================ READY ================ 
```

**我如何使该程序具有交互性？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:13:05.823

目前，您正在使用`ghc`. 您要做的是首先运行`ghci`，然后使用`:load`命令加载您的文件。像这样的东西：

```
Prelude> :load blarg.hs 
```

您也可以在调用命令时加载文件：`ghci blarg.hs`. `:load`这可能比在 GHCi 提示符下使用 Notepad++ 更有效。

GHCi 是用于运行 Haskell REPL 的命令，它允许您以交互方式评估表达式。

我没有方便检查的 Notepad++，但我确信有某种方法可以告诉它`ghci`在后台运行并将文件加载到其中而不是`ghc`直接使用。

如果没有，您总是可以`ghci`在它自己的终端窗口中运行。在这种情况下，您可以`:r`在第一次加载文件后使用该命令重新加载文件。这将为您节省相当多的打字时间。（`:r`对`:load blarg.hs`）

# css - Chrome 中的 CSS3 过渡不平滑

> ID：14418359
> 
> 赞同：4
> 
> 时间：2013-01-19T20:08:21.267
> 
> 标签：css, animation, css-transitions

我正在使用 CSS3 过渡来根据鼠标悬停时的边距值对某些链接进行动画处理。它的动画效果符合预期，但 Chrome 中的动画效果不如 Firefox、IE10 等其他浏览器流畅。

在 Chrome 中，当我将鼠标悬停在一个链接上时，所有其他链接都在轻微移动。请检查下面的链接。

**CSS**

```
.social {
    list-style: none;
    float: right;
    text-align: right;
    position: relative;
    top: 15px;
}

.social li {
    padding: 2px 0;
}

.social li a {
    font-size: 18px;
    color: #a6a7a6;

    margin-right: 5px;
    -webkit-transition: margin 400ms;
    -moz-transition:  margin 0.2s ease;
    -o-transition:  margin 0.2s ease;
    -ms-transition:  margin 0.2s ease;
    transition: margin 0.2s ease;
}

.social li a:hover {
    color: #1b1b1b;
    margin-right: 23px;

}

.social .ico {
    background-color: #1b1b1b;
    background-position: center center;
    background-repeat: no-repeat;
    width: 20px;
    height: 20px;
    position: absolute;
    margin-left: 6px;
    opacity: 0;
    filter: alpha(opacity=0);
      -webkit-transition: opacity 400ms;
    -moz-transition:  opacity 0.2s ease;
    -o-transition:  opacity 0.2s ease;
    -ms-transition:  opacity 0.2s ease;
    transition: opacity 0.2s ease;   
}

.social li a:hover .ico {
    opacity: 1;
    filter: alpha(opacity=100);
} 
```

**HTML**

```
<ul class="social">
         <li><a href="#">FACEBOOK<span class="ico"></span></a></li>
         <li><a href="#">TWITTER<span class="ico"></span></a></a></li>
         <li><a href="#">LINKEDIN<span class="ico"></span></a></a></li>
         <li><a href="#">YOUTUBE<span class="ico"></span></a></a></li>
</ul> 
```

[http://jsfiddle.net/G9M8L/1/](http://jsfiddle.net/G9M8L/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:16:09.890

ul social 正在更改其宽度以适应正在增加边距的孩子的新宽度。孩子们因此向左走，但随后孩子的边距被重新计算，他们回到正确的位置。

只需将此宽度固定：

```
.social {
    list-style: none;
    float: right;
    text-align: right;
    position: relative;
    top: 15px;
    width: 121px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T21:16:56.203

您可以`float: right`通过链接自行解决问题。

```
.social li a {
   float: right;
   /* the rest of the styles */
} 
```

[**工作演示**](http://jsfiddle.net/thebabydino/G9M8L/2/)

此外，没有`-ms-transition`. [IE10 支持无前缀转换，而 IE9 则完全不支持](http://caniuse.com/#feat=css-transitions)。

# c# - LinqToSQL 定义对象身份的成员不能更改

> ID：14418360
> 
> 赞同：2
> 
> 时间：2013-01-19T20:08:25.660
> 
> 标签：c#, sql, linq-to-sql

我正在尝试更新`Item`其中一些成员已更改的内容，所以我正在这样做

```
public void Update(IItem pItem) {
    using(GameDBDataContext db = new GameDBDataContext()) {
        Item old = db.Items.SingleOrDefault(x => x.id == pItem.Id);
        if(old != null) {
            Item item = pItem as Item;

            old.id = item.id;
            old.type = item.type;
            old.owner_id = item.owner_id;
            old.player_id = item.player_id;
            old.currentdura = item.currentdura;
            old.maxdura = item.maxdura;
            old.location = item.location;
            old.socketprogress = item.socketprogress;
            old.firstsocket = item.firstsocket;
            old.secondsocket = item.secondsocket;
            old.effect = item.effect;
            old.composition = item.composition;
            old.bless = item.bless;
            old.isfree = item.isfree;
            old.enchant = item.enchant;
            old.suspicious = item.suspicious;
            old.islocked = item.islocked;
            old.color = item.color;
            old.compositionprogress = item.compositionprogress;
            old.inscribed = item.inscribed;
            old.inscribetime = item.inscribetime;
            old.amount = item.amount;

            db.SubmitChanges();
        }
    }
} 
```

但是每次我尝试更新项目时都会抛出这个异常！

```
System.InvalidOperationException: Value of member 'location' of an object of typ
e 'Item' changed.
A member defining the identity of the object cannot be changed.
Consider adding a new object with new identity and deleting the existing one ins
tead.
   at System.Data.Linq.ChangeProcessor.CheckForInvalidChanges(TrackedObject trac
ked)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at Database.Managers.ItemManager.Update(IItem pItem) in d:\CProgramming\DarkS
iders.Core\Database\Managers\ItemManager.cs:line 59 
```

不知道这里出了什么问题：-s！？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:12:12.997

您正在尝试修改可能无法修改的记录的标识列。如果您不必更新记录的 id，则删除此语句

```
old.id = item.id; 
```

# assembly - 在汇编程序中不能正确划分，为什么？

> ID：14418365
> 
> 赞同：0
> 
> 时间：2013-01-19T20:08:54.667
> 
> 标签：assembly, x86, tasm

这是我尝试在 TASM 中编写一个函数，如果数字是素数则返回 true，否则返回 false。

```
masm
model small

.data
pos db "Yes, it's Prime",13,10,"$"
negat db "No, it's not Prime",13,10,"$"

.stack 256

.code

isPrime proc
    push bp;
    mov bp,sp;
    push bx;
    push cx;

    mov bx, [bp+4]
    mov cx, 2;

    cmp bx, 0; check for zero
    je isPrimeFalse;
    cmp bx, 3; ;check for <=3
    jle IsPrimeTrue; 

    isPrimeCycle:   
        cmp bx, cx; 
        je IsPrimeTrue;
        mov ax, bx;
        xor dx, dx;
        DIV cx;
        cmp ah, 0h;
        je IsPrimeFalse;
        inc cx;
        jmp isPrimeCycle;

IsPrimeFalse:
    mov ax, 0; false
    jmp IsPrimeExit;
IsPrimeTrue:
    mov ax, 1;
IsPrimeExit:
    pop cx;
    pop bx;
    pop bp;
    ret 2;
isPrime endp

main:
    push 5;
    call isPrime
    cmp ax, 0;
    je no;
    jmp yes;
yes: ...
no: ...
end main 
```

它适用于不是素数的数字，但对于素数（数字> 3，例如上面的 5），它仍然显示 NO。

我的错误在哪里？提醒应该存储在 AH 中，但是当我在 ollydbg 中调试上面的代码时（我将寄存器更改为 x32 以使其工作），提醒存储在 edx 中，而不是 ah 中。为什么？！在上面的代码中是这样吗？

**我的主要问题是我无法调试我的代码，因为我使用 tasm，而我所知道的唯一强大的调试器是 ollydbg，但它是 x32 位汇编器，而不是 16。所以我必须更改寄存器，也许并非一切都是一样的。 ..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:22:39.067

对于`DIV CX`（并且通常`DIV r/m16`）余数为`DX`，商为`AX`。

仅对于 8 位除数，余数归 AH。但是您显然想要 16 位除数，因为您在除数`DX`之前要归零。

# system - 使用 dup2 系统调用两次？

> ID：14418368
> 
> 赞同：0
> 
> 时间：2013-01-19T20:09:21.483
> 
> 标签：system, call, dup2

在下面的代码中

```
int main ()
{
printf ("dup2 example!\n");
int myfd= creat ( "./etest.txt", 777);
dup2(myfd, 1);
printf("i am in output file!\n" );

dup2(1,1);
printf("i am in STDOUT!" );
return 0;
} 
```

我有两个 dup2 电话。第一个将 o/p 从标准输出重定向到我的文件。这很好用。然后我想重定向它以再次回到 stoud 但第二个 dup2 没有更改它并且“我在 STDOUT 中！” 打印在文件中。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:16:33.580

之后`dup2(myfd,1);`，文件描述符 1 不再引用原始标准输出。`dup2(1,1)`当您调用（这是一个 noop）时，内核可能会在没有隐藏的地方寻找“真正的”标准输出。

您可以`dup`标准输出到一个新的描述符，保留它并在需要时重定向回它：

```
int oldstdout = dup(1);
....
dup2(oldstdout,1);
close(oldstdout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:17:23.363

一旦你重复了 STDOUT，你就失去了最初的 stdout 文件句柄。您需要使用 dup 制作原始标准输出的副本，以便您可以 dup2 恢复它。检查 open 和 dup 的返回值也是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:15:34.447

第一次调用，`dup2(myfd, 1)` *关闭*原始`stdout`文件描述符。第二次调用`dup2(1, 1)`实际上是无操作的。如果您希望能够恢复原始文件`stdout`，您首先必须保存它，然后再恢复它。例如：

```
int main ()
{
  printf ("dup2 example!\n");
  int myfd= creat ( "./etest.txt", 777);
  int fd_save = dup(1):
  dup2(myfd, 1);
  printf("i am in output file!\n" );

  dup2(fd_save,1);
  close(fd_save);
  printf("i am in STDOUT!" );
  return 0;
} 
```

# solr - Solr 最小匹配：ArrayIndexOutOfBoundsException

> ID：14418370
> 
> 赞同：0
> 
> 时间：2013-01-19T20:09:36.243
> 
> 标签：solr, edismax, dismax

我有以下请求处理程序，它搜索两个`text_en`字段，`Title`并且`Body`. 查询可以在没有最小匹配设置的情况下查找。如果我使用 mm 字段，并且我的搜索字符串高于 2 个字词，我会得到：

```
null:java.lang.ArrayIndexOutOfBoundsException: 1
at org.apache.solr.util.SolrPluginUtils.calculateMinShouldMatch(SolrPluginUtils.java:547) 
```

我的请求处理程序：

```
 <requestHandler name="/broadQuery" class="solr.SearchHandler">
    <lst name="defaults">
        <str name="defType">edismax</str>
        <str name="wt">xml</str>
        <str name="fl">ListingId</str>
        <str name="qf">Title^2 Body</str>
        <str name="rows">100</str>
        <str name="pf">Title^4 Body^2</str>
        <str name="ps">0</str>
        <str name="echoParams">all</str>

        <str name="mm">2 3&lt;-1 5&lt;-2 6&lt;-40%</str> <!-- HERE -->
    </lst>
  </requestHandler> 
```

**问题：**是什么原因造成的，如何解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:10:07.810

我认为您的 mm 参数格式错误。根据[规范](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/util/doc-files/min-should-match.html)，您只能组合多个条件参数。但是，您的第一个参数 (2) 不是有条件的。您能否将整个表达式重写为一组条件参数，看看是否会消失。

或者，我会从他们的示例中尝试（2<-25% 9<-3），看看您是否遇到同样的问题。如果你不这样做，请继续修改它，直到你遇到问题或得到你需要的东西。

# qt - 将 QPushButton 宽度缩小到最小

> ID：14418375
> 
> 赞同：6
> 
> 时间：2013-01-19T20:10:20.127
> 
> 标签：qt, pyqt, qpushbutton

这似乎是一件很简单的事情，但我似乎无法弄清楚。如何使按钮的最小宽度。它不断扩展到我放入的布局的宽度。在下面的示例中，QPushButton 的宽度最终与 QLabel 相同：

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

class MyWindow(QWidget):

    def __init__(self,parent = None):

        QWidget.__init__(self,parent)

        layout = QVBoxLayout()
        layout.addWidget(QLabel('this is a really, really long label that goes on and on'))
        layout.addWidget(QPushButton('short button'))

        self.setLayout(layout)

if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = MyWindow()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-11T03:13:04.517

setMaximumWidth 对我有用

```
from PyQt4 import QtGui

class Window(QtGui.QWidget):
    def __init__(self):
        super(Window, self).__init__()
        layout = QtGui.QHBoxLayout()
        texts = [":)",
                 "&Short",
                 "&Longer",
                 "&Different && text",
                 "More && text",
                 "Even longer button text", ]
        for text in texts:
            btn = QtGui.QPushButton(text)
            double = text.count('&&')
            text = text.replace('&', '') + ('&' * double)
            width = btn.fontMetrics().boundingRect(text).width() + 7
            btn.setMaximumWidth(width)
            layout.addWidget(btn)
        self.setLayout(layout)

if __name__ == '__main__':
    import sys

    app = QtGui.QApplication(sys.argv)
    mainWin = Window()
    mainWin.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T22:03:51.527

见[http://qt-project.org/doc/qt-4.8/qwidget.html#sizePolicy-prop](http://qt-project.org/doc/qt-4.8/qwidget.html#sizePolicy-prop)和[http://qt-project.org/doc/qt-4.8/qsizepolicy.html#Policy-enum](http://qt-project.org/doc/qt-4.8/qsizepolicy.html#Policy-enum)学习关于如何在动态布局中控制小部件大小。

如果仅通过更改 SizePolicy 没有得到令人满意的结果（你应该），你也可以看看这些好人：http: [//qt-project.org/doc/qt-4.8/qspaceritem.html](http://qt-project.org/doc/qt-4.8/qspaceritem.html)

# asp.net-mvc - 在 MVC 中创建超链接（锚标记）以将数据发布到控制器

> ID：14418381
> 
> 赞同：4
> 
> 时间：2013-01-19T20:10:44.357
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个相当简单的场景

我的控制器中有一个动作方法，语法类似

```
[HttpPost]
    public ActionResult Consignment(string txtConsNo, string isReferenceTracking)
    {} 
```

不在页面中，我需要在需要访问此操作方法的应用程序中创建超链接。我正在使用 HTML.ActionLink 方法来创建这样的超链接

```
 @Html.ActionLink((string)item.RDC_CONSNO, "Consignment", "Tracking", new { txtConsNo = (string)item.RDC_CONSNO, rdbConsNo = "" }, null) 
```

但它会创建这样的链接

```
http://localhost:3412/Tracking/Consignment?txtConsNo=100245506 
```

我应该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:01:09.470

我猜你有两个选择......

1.  **删除`[HttpPost]`属性（我认为首选）**
2.  **使用[jquery](http://api.jquery.com/jQuery.post/)发布：$.post()**

以下是如何执行 jquery 方法（如有必要）

**的HTML：**

```
<a href="#" class="postToConsignment" 
            data-consno="@item.RDC_CONSNO">@item.RDC_CONSNO.ToString()</a> 
```

**javascript（需要在您的视图中）：**

```
$(function(){
    $('.postToConsignment').on('click', function(e){
        // Stop links normal behaviour
        e.preventDefault();

        //Get the url to post to
        var url = '@Url.Action("Consignment", "Controller")';

        //Get consNo
        var consNo = $(this.data('consno');

        $.post(url, new { txtConsNo: consNo}, function(data) {
            //Deal with the result (i.e. the data param)
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:23:54.523

我从您使用的`item`而不是您在循环中呈现链接的模型中猜测？无论如何，我建议添加一个表格并将链接发布；链接将是这样的：

```
@Html.ActionLink(
    (string)item.RDC_CONSNO,
    "Consignment", 
    "Tracking",
    new { @class = "consignmentLink" }); 
```

...然后在循环之后（如果有），您输入一个表单和一些连线 JavaScript，如下所示：

```
@using (Html.BeginForm("Consignment", "Tracking"))
{
    @:<input type="hidden" id="txtConsNo" name="txtConsNo" />
}

$("a.consignmentLink").click(function(e) {
    e.preventDefault();
    var $consignmentNumberInput = $("#txtConsNo");
    $consignmentNumberInput.val($(this).text());
    $consignmentNumberInput[0].form.submit();
}); 
```

要填充您的操作`isReferenceTracking`参数，您可以添加另一个隐藏字段并将该值作为每个链接的数据属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-21T13:04:48.720

您也可以使用按钮：
例如在*asp 核心语法*中：

```
//some other tags
 <form method="post">
      <input asp-for="YourModelPropertyOrYourMethodInputName"
      value="@TheValue" type="hidden" />
      <button type="submit" class="link-button" formaction="/TheDestinationController/TheDestinationActionMethod">
      @(TextValue) 
      </button>
  </form> 
```

# python - 自定义夹层

> ID：14418382
> 
> 赞同：6
> 
> 时间：2013-01-19T20:11:06.157
> 
> 标签：python, django, mezzanine

我已经研究 Mezzanine 有一段时间了，但是除了基本安装之外，我还没有找到太多教程。夹层文档包含有关如何自定义页面模型和添加新内容类型的信息。

然而，我想做的是以不同的方式利用现有的内容类型（页面、博客文章）。

例如，我希望在基本默认博客列表之外拥有自定义“博客列表”页面。

我什至如何在管理员中创建第二个博客页面？如何在不触及默认博客列表模板的情况下将其模板设置为我的自定义模板？

因此，我如何拥有 2 个不同的博客列表页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T20:13:36.757

对不同的博客列表使用 mezzanine.blog.models.BlogCategory 模型。如果您对路径中的 'category/' 不满意，可以将[mezzanine.blog.urls](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/urls.py#L23-L24)复制并修改（如下）到您的项目 urls.py。

```
url("^%s(?P<category>.*)%s$" % _slashes,
    "mezzanine.blog.views.blog_post_list",
    name="blog_post_list_category") 
```

要创建类别模板，请查看[blog_post_list 视图](https://github.com/stephenmcd/mezzanine/blob/master/mezzanine/blog/views.py#L39)，您将看到：

```
templates.append(u"blog/blog_post_list_%s.html" %
                          unicode(category.slug)) 
```

要为“Foo”类别添加模板，请复制`mezzanine/blog/templates/blog_post_list.html`到您的项目 `templates/blog/blog_post_list_foo.html`中。如果您导航到 /blog/foo/，新模板将呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T01:24:34.600

查看 Josh Cartmell 关于夹层主题的系列博客文章。我发现这个系列对于开始使用 Mezzanine 非常有帮助。 [MEZZaTHEMing（创建夹层主题）第 1 部分：base.html](http://bitofpixels.com/blog/mezzatheming-creating-mezzanine-themes-part-1-basehtml/)。

# python - 使用 ctypes 拉取返回参数

> ID：14418388
> 
> 赞同：1
> 
> 时间：2013-01-19T20:12:04.737
> 
> 标签：python, pointers, ctypes

前言：我对 Python 非常熟悉，但直到一周前才接触过 C……现在我正在尝试使用 ctypes 与电机控制器交谈。

所以我一直在玩这个特定的功能（VCS_GetProtocolStackSettings），直到最近才让它工作。我的问题是，虽然它返回一个“1”（即按照下面的规范成功），但我似乎无法访问返回参数。

这是我的代码。您可以看到我将返回参数存储在指向 uint32 对象的指针中，我只是不知道如何获取它们。

```
lib=ctypes.WinDLL('C:\\Program Files (x86)\\maxon motor ag\\EPOS Positioning Controller\\EPOS2\\04 Programming\\Windows DLL\\EposCmd64.dll')

typeDict={  'char': ctypes.c_char,
        'char*': ctypes.c_char_p,
        '__int8': ctypes.c_int8,
        'BYTE': ctypes.c_uint8,
        'short': ctypes.c_int16,
        'WORD': ctypes.c_uint16,
        'long': ctypes.c_int32,
        'DWORD': ctypes.c_uint32,
        'BOOL': ctypes.c_int32,
        'HANDLE': ctypes.POINTER(ctypes.c_uint32)
        }

def VCS_GetProtocolStackSettings(KeyHandle):
    '''Returns the communication parameters 'baudrate and 
        'timeout'
    '''

    func=lib['VCS_GetProtocolStackSettings']
    func.argtypes
    func.restype=typeDict['BOOL']   

    pBaudrate=ctypes.pointer(typeDict['DWORD']())
    pTimeout=ctypes.pointer(typeDict['DWORD']())
    pErrorCode=ctypes.pointer(typeDict['DWORD']())

    cKeyHandle=typeDict['HANDLE'](KeyHandle)

    return func(KeyHandle,pBaudrate,pTimeout,pErrorCode) 
```

![在此处输入图像描述](../Images/eb473d3f59d9a700a9cbd53798d34b1d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:35:31.283

`pBaudrate.contents.value`将访问指针中的值，但您只需要 a`c_uint()`并通过对函数的引用传递它。下面是一个例子。这也是一个通过在失败时抛出异常来使函数更“Pythonic”的例子。

```
import ctypes
from ctypes import wintypes

lib = ctypes.WinDLL(dllnamehere)
lib.VCS_GetProtocolStackSettings.argtypes = [wintypes.HANDLE,wintypes.PDWORD,wintypes.PDWORD,wintypes.PDWORD]
lib.VCS_GetProtocolStackSettings.restype = wintypes.BOOL

def VCS_GetProtocolStackSettings(KeyHandle):
    baudrate = wintypes.DWORD()
    timeout = wintypes.DWORD()
    errorcode = wintypes.DWORD()
    result = lib.VCS_GetProtocolStackSettings(KeyHandle,ctypes.byref(baudrate),ctypes.byref(timeout),ctypes.byref(errorcode))
    if not result:
        raise RuntimeError('error code = {}'.format(errorcode.value))
    return baudrate.value,timeout.value 
```

PS仔细检查`WinDLL`是否合适。Windows 系统 DLL 使用`__stdcall`调用约定，但许多 DLL 使用`__cdecl`调用约定，而您会使用它`CDLL`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:09:37.407

如果正在测试 ctypes，最好制作一个虚拟 DLL。例如，您的函数原型是（我在[这里](http://www.c-plusplus.de/forum/296178-full)找到的）：

```
 Initialisation_DllExport BOOL __stdcall VCS_GetProtocolStackSettings(HANDLE KeyHandle, DWORD* pBaudrate, DWORD* pTimeout, DWORD* pErrorCode); 
```

虚拟 DLL 将是：

```
/**
 * file : lib.c
 * build: cl /LD lib.c
 */
#include <windows.h>
#include <stdio.h>
#define DLL_EXPORT __declspec(dllexport)

#ifdef __cplusplus
extern "C" {
#endif
DLL_EXPORT BOOL __stdcall VCS_GetProtocolStackSettings(HANDLE KeyHandle,
                                                       DWORD* pBaudrate,
                                                       DWORD* pTimeout,
                                                       DWORD* pErrorCode);
#ifdef __cplusplus
};
#endif

DLL_EXPORT BOOL __stdcall VCS_GetProtocolStackSettings(HANDLE KeyHandle,
                                                       DWORD* pBaudrate,
                                                       DWORD* pTimeout,
                                                       DWORD* pErrorCode)
{
    printf("%lu\n", (unsigned long) KeyHandle);
    *pBaudrate  = 1;
    *pTimeout   = 2;
    *pErrorCode = 3;

    return 4;
} 
```

所以我们的python代码是：

```
#!python

from ctypes import *

BOOL   = c_int
DWORD  = c_ulong
HANDLE = c_void_p

lib = WinDLL('./lib.dll')

# BOOL __stdcall VCS_GetProtocolStackSettings(HANDLE KeyHandle,
#                                             DWORD* pBaudrate,
#                                             DWORD* pTimeout,
#                                             DWORD* pErrorCode);

VCS_GetProtocolStackSettings = lib['VCS_GetProtocolStackSettings']
VCS_GetProtocolStackSettings.restype  = BOOL
VCS_GetProtocolStackSettings.argtypes = [HANDLE,
                                         POINTER(DWORD),
                                         POINTER(DWORD),
                                         POINTER(DWORD)]

KeyHandle = HANDLE(123)
Baudrate  = DWORD(0)
Timeout   = DWORD(0)
ErrorCode = DWORD(0)

result = BOOL(VCS_GetProtocolStackSettings(KeyHandle,
                                           byref(Baudrate),
                                           byref(Timeout),
                                           byref(ErrorCode)))

print(Baudrate.value)
print(Timeout.value)
print(ErrorCode.value)
print(result.value) 
```

如果你运行它：

```
> python example.py
123
1
2
3
4
> 
```

# php - 如何在php中使用自动加载和命名空间？

> ID：14418392
> 
> 赞同：0
> 
> 时间：2013-01-19T20:12:21.273
> 
> 标签：php, namespaces, autoload, autoloader

我想使用 __autoload 功能。例如，我在同一个文件夹中有两个文件：

index.php，MyClass.php

MyClass.php 是这样的：

```
// filename: MyClass.php
namespace SomeNameSpace;

class MyClass{
    public static function helloWorld(){ echo 'Hello'; }
} 
```

所以我想做的是使用 __autoload 来加载这个类。但是当我这样做时：

```
function __autoload($className){
    include($className.'.php');
} 
```

自动加载不起作用，因为该类位于命名空间中。

有什么帮助吗？

index.php 的示例：

```
//index.php
//the autoload method above
SomeNameSpace\MyClass::helloWorld(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:22:00.630

当你在做

```
include('$className'.'.php'); 
```

您实际上正在寻找一个名为“$classname.php”的文件。删除单引号。

尝试：

```
function __autoload($className){
    include( end(explode('\\', $className)) . '.php');
} 
```

# jquery - 如何延迟加载或部分下载 json 文件？

> ID：14418393
> 
> 赞同：2
> 
> 时间：2013-01-19T20:12:45.687
> 
> 标签：jquery, jsonp

我有一个具有这种结构的 json 文件：

```
myCallback({
    "title": "data",
    "content": "data",
    "images": [
        {
            "img1": "data",
            "img2": "data"
        }
    ]
}) 
```

我想知道在完全下载完成之前是否可以解析文件并仅提取标题。

json 文件存储在远程服务器中，因此我使用 jsonp 并稍后解析完整文件，但我想跳过图像（base64 编码），只下载第一部分/标题/内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:28:44.157

> 我想知道在完全下载完成之前是否可以解析文件并仅提取标题。

因为您使用的是 JSONP，**所以不，这是不可能的。** [JSONP 本质上无法流式传输。](https://stackoverflow.com/a/6558625/139010)它依赖于协作服务器将格式正确的数据以`<script>`标签的形式传递到您的页面。

想要更少的数据？你必须说服远程服务器给你更少。

# ruby-on-rails - Rails：将列从十进制迁移到整数后数据会发生什么

> ID：14418399
> 
> 赞同：2
> 
> 时间：2013-01-19T20:13:23.567
> 
> 标签：ruby-on-rails, postgresql, migration

我总是冒着破坏我的开发数据库（PostgreSQL）并重建它的风险，但我想我会先问一下是否有人有经验。

理想情况下，所有数据都将被截断为其整数：（例如：5.7 将变为 5）或者它可能会将值四舍五入（5.7 变为 6）？或者它只是简单地取消或清零所有值并且数据丢失？我想最坏的结果将是不可靠的数据（5.7 变为 23）。

这些类型的迁移是否有一般的经验法则？

```
class ChangeBookFromDecimalToInteger < ActiveRecord::Migration
  def self.up
   change_column :book, :price, :integer
  end

  def self.down
   change_column :book, :price, :decimal
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:39:09.710

ActiveRecord 将发送一个 ALTER TABLE ALTER COLUMN ... TYPE 到数据库，数据库将执行类型转换。PostgreSQL 将转换`decimal`为`int`using `round`：

```
=> create table with_decimal (n decimal(11, 6));
=> insert into with_decimal (n) values (1.0),(1.1),(1.5),(1.6),(1.9);
=> insert into with_decimal (n) values (-1.0),(-1.1),(-1.5),(-1.6),(-1.9);
=> select * from with_decimal;
     n     
-----------
  1.000000
  1.100000
  1.500000
  1.600000
  1.900000
 -1.000000
 -1.100000
 -1.500000
 -1.600000
 -1.900000
(10 rows)

=> alter table with_decimal alter column n type int;
=> select * from with_decimal;
 n  
----
  1
  1
  2
  2
  2
 -1
 -1
 -2
 -2
 -2
(10 rows) 
```

请注意，[`round(numeric)`](http://www.postgresql.org/docs/current/interactive/functions-math.html#FUNCTIONS-MATH-FUNC-TABLE)四舍五入到最接近的整数。

如果您想要特定的转换行为，您应该在[ALTER TABLE](http://www.postgresql.org/docs/current/static/sql-altertable.html)中使用 USING 来说明：

> 可选`USING`子句指定如何从旧列值计算新列值；如果省略，则默认转换与从旧数据类型到新数据类型的赋值转换相同。如果`USING`没有从旧类型到新类型的隐式或赋值转换，则必须提供子句。

如果您需要一个 USING 子句，则必须手动发出 ALTER TABLE，因为 ActiveRecord 对 USING 一无所知，例如：

```
def up
    connection.execute(%q{
        alter table books
        alter column price 
        type integer
        using trunc(price * 100)
    })
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:20:30.550

您需要查阅 PostreSQL 手册，了解它如何处理诸如“ALTER TABLE ... CHANGE COLUMN ...”之类的查询，以及它如何在相应类型之间转换数据。
Rails 中的所有 DB Schema 更改迁移都由相应的数据库后端处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:38:35.440

一般的经验法则是，如果您必须迁移，并且需要明确的要求，请创建新列，使用 Ruby 转换列，然后删除旧列。如果您不关心数据，请让数据库通过`ALTER TABLE`

# javascript - mousedown 不适用于动态加载的元素

> ID：14418401
> 
> 赞同：0
> 
> 时间：2013-01-19T20:13:42.997
> 
> 标签：javascript, jquery, events, dynamic, mousedown

我正在尝试像这样加载我的导航栏：

```
$.get("nav.html",function(menuData){
  $("body").html(menuData);
)}; 
```

在“nav.html”中我们有类似的东西

```
<td id='menu-item-1'>menu item 1</td>
<td id='menu-item-2'>menu item 2</td> 
```

等等然后我想为每个项目分配一个事件，我已经尝试过：

```
$("#menu-item-1").mousedown(function(response){
  //create an empty table
  $("body").append("table id='menu-item-1-sub-table'></table>");
  //retrieve php data and insert it in the table
  $.get("data.php",function(response){
    $("#menu-item-1-sub-table").html(response);
  });
}); 
```

问题是事件不会触发。当我直接在 javascript 中使用 html 时，它起作用了，例如：

```
$("body").append("<table><tr><td id='menu-item-1'>menu-item-1</td></tr></table>"); 
```

但是将其移至另一个文件后，它不再起作用。

编辑

这是一个有效的答案：

采用

```
$("body").on('click','#menu-item-1',function(){
etc.
}); 
```

因为我们尝试时尚未创建 menu-item-1

```
$("#menu-item-1).mousedown 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:53:45.477

给你一个答案替换

```
$("#menu-item-1").on("click",function(){
  //stuff
}); 
```

和

```
$('body').on('click','#menu-item-1', function(){
  //stuff
}); 
```

有效，因为当`.on()`被委派的时候`#menu-item-1`还没有出现在页面上，但是当它被调用时它可以选择`#menu-item-1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:20:28.163

您最好在收到响应时附加表格，而不是附加表格然后设置附加表格的 html

```
$('body').on('click','#menu-item-1', function() {
  $.get("data.php",function(response){
    $("body").append('<table id="menu-item-1-sub-table">'+response+'</table>');
  });
}); 
```

基于你已经完成的

```
$('body').on('click','#menu-item-1', function() {
  $("body").append("<table id='menu-item-1-sub-table'></table>");
  $.get("data.php",function(response){
    $("#menu-item-1-sub-table").html(response);
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:22:39.810

我认为问题在于您必须在 body.html(menuData) 之后的 get 回调中设置处理程序。但如果一切正常，我认为在页面上加载菜单模板是一种奇怪的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T20:28:44.650

您说的是另一个文件-您是否将 jquery 添加到该代码中？或者当您加载 mousedown 代码时元素可能不存在 - 尝试 jquery on-function。

```
 $('#menuitem').on(function(){

    $("#menu-item-1").mousedown(function(response){
      $("body").append("table id='menu-item-1-sub-table'></table>");
       $.get("data.php",function(response){
       $("#menu-item-1-sub-table").html(response);
       })
     });
   }) 
```

# .net - 在 VB.Net (.NET2.0/Mono/.NET Compact 3.5) 中播放 MP3 音频

> ID：14418405
> 
> 赞同：1
> 
> 时间：2013-01-19T20:14:35.720
> 
> 标签：.net, vb.net, mono

我试图找到在.NET2.0 下的VB.Net 中播放MP3 文件的最佳方式。我还需要支持 .NET Compact 3.5，可能还有 Mono。我试过 NAudio，我可以在 .NET2.0 中工作（有点），我怀疑它也可以在 .NET Compact 中工作。

有人对我可能实现这一目标的其他方式有任何建议吗？具体来说，我希望将几个 MP3 文件合并到一个 MemoryStream 中并在不写入磁盘的情况下播放它们。我已经完成了加入部分，它正在播放我正在寻求帮助的 MemoryStream。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T11:05:37.430

[GStreamer](http://gstreamer.freedesktop.org/)是一个不错的选择，它是一个跨平台的多媒体框架。还有一些绑定可以满足您的需求：通过 .NET API：[GStreamerSharp](http://cgit.freedesktop.org/gstreamer/gstreamer-sharp/)访问您需要的信息（视频文件的长度） 。

事实上，我们实际上在[Banshee Project](http://banshee.fm/)中使用了它，这是一个用 C# 编写的媒体播放器（大约一年半前，它是 Ubuntu 中捆绑的默认音乐播放器）。

顺便说一句，GStreamer 以编解码器是插件的方式构建，因此您在它们的内部（即 ffmpeg）之间有一个抽象，其他插件可以根据您的许可/格式需求来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:33:33.057

我完全在 VB.NET 中编写了一个 MP3 解码器和播放器，它唯一的依赖项是[SlimDX](http://slimdx.org/)，它被用作 DirectSound 的包装器。

解码器解码 MP3 文件并将未压缩的音频流写入 DirectSound 缓冲区以进行播放。此外，解码器被编译为 DLL，因此可以在任意数量的项目中轻松重用。

您可以从这篇博文下载源代码：[vbNetMP3Player](http://whenimbored.xfx.net/2011/01/an-mp3-decoder-written-in-vb/)

该项目的目标是 .NET 4.0，但它在 .NET 3.5 上运行得很好，而且可能在 .NET 2.0 上运行。 至于对 Mono 的支持，我还没有测试过，但我不明白为什么它不应该工作。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:58:39.593

我遇到了同样的问题，并寻找了许多替代方案。然后我找到了 BASS。它非常易于使用，但您几乎可以做任何事情。此外，它的 .NET 包装器称为 BASS .NET 包含非常好的文档和用于 VB 和 C# 的每个函数的示例。他们还有一个非常活跃和支持的论坛。我曾经发现一个bug并在论坛上报告，然后他们在一天之内给了我修复版本...

[BASS](http://www.un4seen.com/bass.html)和[.NET 包装器的链接](http://www.un4seen.com/download.php?z/4/Bass24.Net.zip)

[使用 BASS 的项目](http://www.un4seen.com/bass_showcase.php)

[文档示例](http://www.bass.radio42.com/help/html/e49e005c-52c0-fc33-e5f9-f27f2e0b1c1f.htm)

# java - Android：纵向和横向设计问题

> ID：14418406
> 
> 赞同：0
> 
> 时间：2013-01-19T20:14:42.303
> 
> 标签：java, android, xml, landscape-portrait

所以如标题中所述，我对横向和纵向之间的不同设计有疑问，我一直在努力让横向看起来更好（更像纵向设计）但无论我做什么，结果都很难看（小图像视图和较小的电影详细信息字段），这是外观图片和 xml 代码，如果有什么可以做的，我很乐意听到你的建议。

![在此处输入图像描述](../Images/445fcec3a8455fef0313cd0702fdd29e.png)

XML 代码（代码几乎相同）：

这个在 layout-land 里面

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F0FFF0"
    android:orientation="vertical"
    android:weightSum="10.0" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="100dp"
        android:paddingRight="100dp" >

        <EditText
            android:id="@+id/etTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_title"
            android:inputType="textPersonName" 
            />

                <TextView
            android:id="@+id/tvError3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textColor="#FF0000"
            android:visibility="invisible" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="6.0"
        android:baselineAligned="false"
        android:orientation="vertical"
        android:paddingLeft="50dp"
        android:paddingRight="50dp" >

        <EditText
            android:id="@+id/etBody"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_body"
            android:inputType="textMultiLine" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingLeft="100dp"
        android:paddingRight="100dp" >

        <EditText
            android:id="@+id/etUrl"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_url"
            android:inputType="textPostalAddress" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/bShow"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="34dp"
            android:background="@drawable/btn_black_glossy"
            android:text="@string/show_button" />
    </LinearLayout>

    <TextView
        android:id="@+id/tvError"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#FF0000"
        android:visibility="invisible" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="4.5"
        android:orientation="horizontal"
        android:paddingLeft="50dp"
        android:paddingRight="50dp" >

        <ImageView
            android:id="@+id/ivMovieImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/bSave" />

        <Button
            android:id="@+id/bSave"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_toLeftOf="@+id/space"
            android:background="@drawable/btn_black_glossy"
            android:paddingLeft="50dp"
            android:paddingRight="50dp"
            android:text="@string/save" />

        <Button
            android:id="@+id/bCancel"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@id/bSave"
            android:background="@drawable/btn_black_glossy"
            android:paddingLeft="50dp"
            android:paddingRight="50dp"
            android:text="@string/cancel" />

        <TextView
            android:id="@id/space"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true" />
    </RelativeLayout>

</LinearLayout>

this one is inside standart layout folder (serves as portrait)

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F0FFF0"
    android:orientation="vertical"
    android:weightSum="10.0" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingLeft="50dp"
        android:paddingRight="50dp" >

        <EditText
            android:id="@+id/etTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_title"
            android:inputType="textPersonName" 
            />

                <TextView
            android:id="@+id/tvError3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:textColor="#FF0000"
            android:visibility="invisible" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="6.0"
        android:baselineAligned="false"
        android:orientation="vertical"
        android:paddingLeft="30dp"
        android:paddingRight="30dp" >

        <EditText
            android:id="@+id/etBody"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_body"
            android:inputType="textMultiLine" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:paddingLeft="50dp"
        android:paddingRight="50dp" >

        <EditText
            android:id="@+id/etUrl"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="center"
            android:hint="@string/movie_url"
            android:inputType="textPostalAddress" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/bShow"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="34dp"
            android:background="@drawable/btn_black_glossy"
            android:text="@string/show_button" />
    </LinearLayout>

    <TextView
        android:id="@+id/tvError"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textColor="#FF0000"
        android:visibility="invisible" />

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="4.0"
        android:orientation="horizontal"
        android:paddingLeft="30dp"
        android:paddingRight="30dp" >

        <ImageView
            android:id="@+id/ivMovieImage"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@+id/bSave" />

        <Button
            android:id="@+id/bSave"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_toLeftOf="@+id/space"
            android:background="@drawable/btn_black_glossy"
            android:paddingLeft="30dp"
            android:paddingRight="30dp"
            android:text="@string/save" />

        <Button
            android:id="@+id/bCancel"
            style="@style/ButtonText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@id/bSave"
            android:background="@drawable/btn_black_glossy"
            android:paddingLeft="30dp"
            android:paddingRight="30dp"
            android:text="@string/cancel" />

        <TextView
            android:id="@id/space"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true" />
    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:17:17.407

尝试更多地使用水平空间 - 拍摄电影的照片并将其全高置于屏幕右侧，所有文本都位于其左侧

# javascript - 限制鼠标点击通过 使用 CSS

> ID：14418413
> 
> 赞同：0
> 
> 时间：2013-01-19T20:15:31.030
> 
> 标签：javascript, html, css, jsp, openlayers

我有一个屏幕，其中显示了两件事。

1.  使用 Openlayers 渲染 Google 街道地图。
2.  渲染侧面板以显示国家列表及其年度人口增长。

下面的代码解释了这个想法。代码是用 HTML 编写的。

```
<body>
 <div id="map" style="z-index:0;"></div>
 <div id="sidePanel" style="position:absolute;
                            top:0px;
                            left:0px;
                            width:30%;
                            height:100%;
                            z-index:1;
                            background-color:black">
 //content in this div will be filled dynamically through ajax call
 </div>
</body> 
```

一切都完美显示。但是，当我单击`#sidepanel`并按住鼠标单击时，如果我拖动，则`#map`接收鼠标单击并且屏幕上发生“平移操作”。

我不希望“#map”在点击时接收鼠标点击`#sidepanel`。此外，当我将鼠标`#sidepanel`放在该 div 上并双击时，`#map`正在接收双击并且正在发生缩放操作。我想分开`#map`and `#sidepanel`。

我仅在使用 Firefox 和 Chrome 浏览器时遇到此问题。IE 可以很好地满足我的要求。请提出一些想法。谢谢你的耐心。

这是我的完整代码

```
<html>
<head>
<title>Map</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3.6"></script>
<script src="http://openlayers.org/api/OpenLayers.js"></script>
</head>
<body onload="RenderGoogleMap();">
<div id="Map_Screen" style="z-index: -1;"></div>
<div id="sidePanel" style="overflow:hidden;position:absolute;top:0px;left:0px;width:35%;height:100%;background-color:black;"></div>
</body>
</html>
<script type="text/javascript">
function RenderGoogleMap() {
        var options = {
            projection : "EPSG:900913",
            units : "m",
            maxResolution : 156543.0339,
            maxExtent : new OpenLayers.Bounds(-20037508.34, -20037508.34,20037508.34, 20037508.34),
            displayProjection : new OpenLayers.Projection("EPSG:4326")
        };
        map = new OpenLayers.Map('Map_Screen', options);
        var gmap = new OpenLayers.Layer.Google("GoogleMap", { 'sphericalMercator' : true, numZoomLevels : 18 });
        map.addLayers([ gmap ]);
            map.zoomTo(3);
        var control = map.addControl( new OpenLayers.Control.Navigation() );
        control.activate();
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:31:29.827

可能是因为您将侧面板的位置设置为绝对位置，结果侧面板 div 位于地图顶部？尝试`position:absolute`从您的 sidePanel CSS 代码中删除。

**更新：**

问题是您的地图宽度设置为 100%，并且您的侧面板覆盖在它上面。我没有这样做，而是将侧面板保持在 35% 的宽度，添加 2% 的右边距，并将地图设置为 62%。这样，您的侧面板和地图不会重叠，因此当您单击侧面板时，地图不会受到任何影响。

见代码：

```
<html>
<head>
<title>India</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3.6"></script>
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script type="text/javascript">
function RenderGoogleMap() {
        var options = {
            projection : "EPSG:900913",
            units : "m",
            maxResolution : 156543.0339,
            maxExtent : new OpenLayers.Bounds(-20037508.34, -20037508.34,20037508.34, 20037508.34),
            displayProjection : new OpenLayers.Projection("EPSG:4326")
        };
        map = new OpenLayers.Map('Map_Screen', options);
        var gmap = new OpenLayers.Layer.Google("GoogleMap", { 'sphericalMercator' : true, numZoomLevels : 18 });
        map.addLayers([ gmap ]);
        var control = map.addControl( new OpenLayers.Control.Navigation() );
        control.activate();
    }
</script>
</head>
<body onload="RenderGoogleMap();">
<div id="sidePanel" style="float:left;width:35%;margin-right:2%;height:100%;background-color:black;"></div>
<div id="Map_Screen" style="float:left;width:62%;"></div>
</body>
</html> 
```

**更新 2：**

如果您想要覆盖但不希望侧面板操作地图，请尝试此代码。它将地图设置`z-index`为 -1，叠加层`z-index`设置为 999。

```
<html>
<head>
<title>Map</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3.6"></script>
<script src="http://openlayers.org/api/OpenLayers.js"></script>
</head>
<body onload="RenderGoogleMap();">
<div id="Map_Screen" style="z-index: -1;"></div>
<div id="sidePanel" style="z-index:999;overflow:hidden;position:absolute;top:0px;left:0px;width:35%;height:100%;background-color:black;"></div>
</body>
</html>
<script type="text/javascript">
function RenderGoogleMap() {
        var options = {
            projection : "EPSG:900913",
            units : "m",
            maxResolution : 156543.0339,
            maxExtent : new OpenLayers.Bounds(-20037508.34, -20037508.34,20037508.34, 20037508.34),
            displayProjection : new OpenLayers.Projection("EPSG:4326")
        };
        map = new OpenLayers.Map('Map_Screen', options);
        var gmap = new OpenLayers.Layer.Google("GoogleMap", { 'sphericalMercator' : true, numZoomLevels : 18 });
        map.addLayers([ gmap ]);
            map.zoomTo(3);
        var control = map.addControl( new OpenLayers.Control.Navigation() );
        control.activate();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:38:03.897

如果事件处理程序没有以某种方式拦截它们，Javascript 事件通常会在 DOM 中以特定顺序冒泡到其他元素。通常意味着首先调用最顶层（具有最高 z-index）的元素事件处理程序，然后调用下一个事件处理程序，以此类推（如果没有干扰冒泡）。

您可以附加一个停止冒泡的事件处理程序`#sidePanel`- 对于不同的浏览器，这样做的方式不同。如果你使用 jQuery，你可以简单地做

```
$("#sidePanel").on("click", function(event) {
  event.stopPropagation();
}); 
```

更多关于事件冒泡 [http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

因此，您应该捕获`#sidePanel`您需要阻止冒泡到您的`#map`. 这些可能包括`onmousedown`等`onmouseup`。

# shopify - Shopify：如何处理卸载后立即重新安装？

> ID：14418415
> 
> 赞同：13
> 
> 时间：2013-01-19T20:15:35.083
> 
> 标签：shopify

我最近遇到了用户卸载我的 Shopify 应用程序并立即重新安装它的情况。这导致了一个问题，因为我将所有用户都存储在数据库表中。

登录/安装工作如下：

1.  用户告诉我他的商店 URL
2.  我将用户转发到 example.myshopify.com/admin/oauth/authorize，其中授予我的应用程序访问权限
3.  我检查该商店 URL 是否已存储在我的本地用户数据库中
    *   如果不是：我请求永久访问令牌并将用户转发到计划选择页面
    *   如果是：我从用户数据库获取存储的永久访问令牌并将用户登录到我的应用程序

卸载：

1.  用户在他的 Shopify 后端卸载我的应用
2.  Shopify 向我的应用发送 webhook
3.  我从用户数据库中删除了该用户的数据

问题是 webhook 有时会延迟。如果用户卸载并立即重新安装，我的应用程序会认为安装是一次登录尝试，并将使用存储在用户数据库中的现在无效的访问令牌。

我想我可以检查来自授权页面的重定向是否包含临时访问令牌，如果是，这将是一个新安装，但即使已经安装了应用程序，似乎也会返回访问令牌。

所以我的问题是：如何优雅地处理即时重新安装？当然，我忽略了一些东西，Shopify API 中不可能有这么大的“逻辑错误”吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-20T00:19:03.607

最近我的应用程序也遇到了这个问题。Webhooks 在过去 2 个月才开始延迟，如果现在大多数应用程序没有遭受这种回归错误，我会感到惊讶。

我处理它的方式是 - 当用户被重定向到应用程序并且旧的 db 对象/令牌仍然存在于数据库中时，尝试使用令牌调用 Shopify API 的虚拟 API 调用（类似于获取商店详细信息）你有。如果您收到 403 Unauthorized 响应，请使用户会话无效并刷新存储的令牌。

另一个问题是，当原始卸载 webhook 触发后一两分钟后，执行相同的过程 - 检查 403 响应。如果您**没有**收到 403，那么您就知道 webhook 已经过时并且不应该采取行动，因为如果您收到 200 OK 这意味着您的令牌是好的并且该应用程序仍在安装中。

这有点令人费解，它在我的应用程序中添加了相当多的代码，但这是我能在短时间内想到的唯一事情 - 因为商家确实经常快速卸载/重新安装。

# php - PHP - 我的代码高效吗？

> ID：14418416
> 
> 赞同：0
> 
> 时间：2013-01-19T20:16:12.310
> 
> 标签：php, loops

我基本上是从各种 API 获取数据并使用 PHP 将它们组合在一起 - 就像网络混搭一样。我目前正在使用 4 个 foreeach 语句将收集到的数据插入到它们各自的数组中。我认为当前代码效率低下，因为加载显示 PHP 数据的页面可能需要大约 3 秒。在过去，我只有一个大的 foreach 循环来一次遍历所有数据并打印它们。但这对我来说也感觉效率低下。

那么我怎样才能让我的代码在处理速度更快方面更有效率呢？我见过一些混搭网站，例如[Soundeer](http://soundeer.com.ar/)，加载时间大约为一秒钟。那是因为他们的代码效率吗？

我正在使用的代码是：

```
$echonest_uri = simplexml_load_file("http://developer.echonest.com/api/v4/artist/search?api_key=$APIkey&style=rap&results=10&start=$element_num&bucket=id:deezer&bucket=images&sort=familiarity-desc&format=xml");

//Swap the comments for when in UWE or not
//$echonest_xml =  new SimpleXMLElement($echonest_uri);
$echonest_xml = $echonest_uri;

$artist_name = array();
$artist_image = array();
$echonest_id = array();
$full_deezer_id = array();
$deezer_id = array();
$num_of_albums = array();

//Loop through each entries in the id_arr and make each image of the artist a link to the album page passing all the relevant information. 
foreach($echonest_xml->artists->artist as $artist){
    $artist_name[] = $artist->name;
    $artist_image[] = $artist->images->image[0]->url;
    $echonest_id[] = $artist->id;
    $full_deezer_id[] = $artist->foreign_ids->foreign_id->foreign_id;
}

foreach($full_deezer_id as $key => $value){
    preg_match('#deezer:artist:([A-Z,a-z,0-9]+)#', $value, $id);
    $deezer_id[] = (string)$id[1];
}

foreach($deezer_id as $id_index => $id){
    $deezer_xml = simplexml_load_file("http://api.deezer.com/2.0/artist/$id/albums&output=xml");
    $num_of_albums[] = $deezer_xml->total;
}

//The variable which will contain the HTML code to display the artists.
$output = null;

foreach($deezer_id as $key => $value){

    $fav_count_query = "SELECT COUNT(user_index) FROM fav_artist WHERE artist_deezer_id = '$value'";
    $fav_count_resource = $mysqli->query($fav_count_query);
    $fav_count = $fav_count_resource->fetch_assoc(); 

    $output .=  <<<HERE
                <div class="artist-container">
                    <a href="albums.php?echonest_id={$echonest_id[$key]}&deezer_id={$deezer_id[$key]}&artist_name={$artist_name[$key]}&artist_image={$artist_image[$key]}&num_of_albums={$num_of_albums[$key]}" class="artist-image">
                        <img src="{$artist_image[$key]}" alt="{$artist_name[$key]}" title="{$artist_name[$key]}"/>
                    </a>

                    <a href="albums.php?echonest_id={$echonest_id[$key]}&deezer_id={$deezer_id[$key]}&artist_name={$artist_name[$key]}&artist_image={$artist_image[$key]}&num_of_albums={$num_of_albums[$key]}" class="artist-name">
                        {$artist_name[$key]}
                    </a>
                    <a href="albums.php?echonest_id={$echonest_id[$key]}&deezer_id={$deezer_id[$key]}&artist_name={$artist_name[$key]}&artist_image={$artist_image[$key]}" class="album-number">Albums: 
                        {$num_of_albums[$key]}
                    </a>
                </div>
HERE;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:20:11.987

由于多个 foreach 循环，您的代码很可能并不慢（老实说，在现实场景中您不会感觉到差异）。在这里伤害你的是从外部站点下载一些东西。

我的解决方案是每 5 分钟自动下载一次（通过 cronjob 或仅在用户访问页面时），如果不到 5 分钟前，则显示放置在服务器上的缓存版本。

*也就是说*，这似乎是一个搜索，所以结果很可能不会有太大变化。也许有一个 1 天的缓存代替？（每个新的搜索查询仍然需要 3 秒，但是如果您希望许多用户进行相同的查询，那么这将使您的网站看起来更快）。

一种简单的方法是使用该函数来测试您的代码**在哪里**出现了时间错误。[`microtime`](http://php.net/manual/en/function.microtime.php)我通常做的是这样的：

```
$beforeCall = microtime(true);
$echonest_uri = simplexml_load_file("http://developer.echonest.com/api/v4/artist/search?api_key=$APIkey&style=rap&results=10&start=$element_num&bucket=id:deezer&bucket=images&sort=familiarity-desc&format=xml");
echo "The call took " . number_format(microtime(true) - $beforeCall, 4) . " seconds"; 
```

如果您使用的是 XML（看起来像），您可以使用启用缓存的[SimplePie](http://simplepie.org/)。一篇很好的文章是[SimplePie 自己关于缓存系统的文章](http://simplepie.org/wiki/faq/how_does_simplepie_s_caching_http_conditional_get_system_work)，您可以在其中调整缓存持续时间[`set_cache_duration`](http://simplepie.org/wiki/reference/simplepie/set_cache_duration)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:27:29.087

## 缓存

最相关的是，您缺少的是缓存。缓存 api 调用结果的简单实现是：

```
$url = "http://developer.echonest.com/api/v4/artist/search?api_key=$APIkey&style=rap&results=10&start=$element_num&bucket=id:deezer&bucket=images&sort=familiarity-desc&format=xml";
$cacheFile = md5($url) . '.xml';

// If the cache file exists and is less than an hour old - use it.
if (file_exists($cacheFile) && filemtime($cacheFile) > (time() - 3600)) {
    $xml = file_get_contents($cacheFile);
// else download it
} else {
    $xml = file_get_contents($url);
    file_put_contents($cacheFile, $xml);
}
$xml = simplexml_load_file($cacheFile); 
```

即不要在每个请求上谈论 api - 与它交谈一次，并使用响应，只要您认为它适当/安全认为有效（在上面的示例中为 3600 秒 - 或一小时）。

这种逻辑最好封装在一个方法中。

## DRY 代码执行

与缓存相比不太重要，问题中的代码是 4 个相互馈送的 foreach 循环 - 这不是编写此类逻辑的有效方法。*应用不要重复*执行代码是一个好主意，即：

```
foreach($echonest_xml->artists->artist as $artist){
    ...
    $full_deezer_id[] = $artist->foreign_ids->foreign_id->foreign_id;
}

foreach($full_deezer_id as $key => $value){ // <--
    ...
    $deezer_id[] = (string)$id[1];
}

foreach($deezer_id as $id_index => $id){ // <--
    ...
}

foreach($deezer_id as $key => $value){ // <-- 
```

可以更好地写为

```
foreach($echonest_xml->artists->artist as $artist){
    processArtist($artist);
}

foreach($buidThis as $row) { 
```

因此，编写代码最多循环两次（但最好只循环一次），而不是在同一数据上循环四次。

仅使用问题中的逻辑，例如可以轻松组合前两个循环：

```
foreach($echonest_xml->artists->artist as $artist){
    preg_match('#deezer:artist:([A-Z,a-z,0-9]+)#', $artist->foreign_ids->foreign_id->foreign_id, $id);
    $deezer_id[] = (string)$id[1];
} 
```

应该对所有代码应用相同的分析：尝试限制迭代/递归逻辑的数量。

# html - 为什么 MySQL 表中的所有行都是相同的？（MySQL 表 > HTML 表）

> ID：14418418
> 
> 赞同：0
> 
> 时间：2013-01-19T20:16:41.867
> 
> 标签：html, mysql, html-table, row

我正在尝试获取 MySQL 表中的所有行并将它们放入 HTML 表中：

```
<table border="1" cellspacing="2" cellpadding="2">
    <tr>
        <td>Exam ID</td>
        <td>Status</td>
        <td>Assigned Examiner</td>
        <td>Recruit's name</td>
    </tr>
    <?php
        $query = mysql_query("SELECT * FROM `access`");
        $num = mysql_num_rows($query);
        $r = mysql_fetch_assoc($query);
    ?>
    <?php for($i=0;$i<$num;$i++) { ?>
    <tr>
    <?php echo '<td>' . $r['code'] . '</td>'; } ?> 
    </tr>
</table> 
```

它输出如下：

```
Exam ID <br />
1<br />
1<br />
1<br /> 
```

很明显，我希望它像 MySQL 一样在不断增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:17:56.997

您只获取第一行。

放入`mysql_fetch_assoc`循环：

```
 <?php for($i=0;$i<$num;$i++) { 
                $r = mysql_fetch_assoc($query);
                ?>
                <tr>
                <?php echo '<td>' . $r['code'] . '</td>'; } ?> 
                </tr> 
```

请注意，还有更多最新功能可供使用（请参阅[文档中的警告](http://php.net/manual/en/function.mysql-fetch-assoc.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:25:40.703

我会使用一个while循环：

```
<tr>
<?php 
while($r = mysql_fetch_assoc($query){

    echo '<td>' . $r['code'] . '</td>';

}
?>
</tr> 
```

另请注意，`mysql_`php 命令很快就会被贬值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:40:34.160

```
<table border="1" cellspacing="2" cellpadding="2">
    <tr>
        <td>Exam ID</td>
        <td>Status</td>
        <td>Assigned Examiner</td>
        <td>Recruit's name</td>
    </tr>
    <?php
        // The query
        $query = 'SELECT exam_id, status, examine_name, recruiter_name FROM access';

        // The counter
        $number_of_rows = 0;

        //Run, Fetch and print
        $result = mysql_query('SELECT exam_id, status, examine_name, recruiter_name FROM access');
        while($row = mysql_fetch_assoc($query)){
            echo '<tr>';
            foreach($column as $column_name => $column_value){
                printf('<td>%s</td>', $column_value);
            }
            echo '</tr>';
            $number_of_rows++;
        }
    ?>
</table>

<p class="information">
    <?php printf('The query returned %d rows.', $number_of_rows);?>
</p> 
```

# android - "中的错误 ()" 适用于安卓 2.3.3

> ID：14418419
> 
> 赞同：0
> 
> 时间：2013-01-19T20:16:43.323
> 
> 标签：android, init

我有一个在 Android 模拟器中运行良好且没有错误的应用程序：

*   2.1
*   2.3.3
*   4.03

它在我的 4.03 触摸板上也能正常工作。

但是，Google Play 崩溃错误报告说：

main_menu 中的错误。< init >() 26 个报告

（注意：打开/关闭胡萝卜和'init'之间没有空格，但stackoverflow不允许我这样做）

一位用户给我发了电子邮件，说他的三星 Galaxy S 运行 2.3.3 时会发生这种情况，并说它在启动时崩溃，没有任何错误。

这是 main_menu.java 的片段。老实说，我不知道从哪里开始。. . 有任何想法吗？

ps - 我是一个弱的 Android 程序员，所以请善待并详细说明。. .

```
package robot_calc.android;

import sor.robotics.calculators.R;
import android.app.Activity;
import android.os.Bundle;
import android.content.Intent;
import android.widget.Button;
import android.view.View;

public class main_menu extends Activity
{
  public void onCreate(Bundle icicle)
  {
    super.onCreate(icicle);
    setContentView(R.layout.main_menu);

    Button bOhm = (Button) findViewById(R.id.btnOhmClick);
    Button bLed = (Button) findViewById(R.id.btnLedClick);
    Button bBat = (Button) findViewById(R.id.btnBatClick);
    Button bEnc = (Button) findViewById(R.id.btnEncClick);

    bOhm.setOnClickListener(new View.OnClickListener() {
      public void onClick(View arg0) {
        Intent i = new Intent(main_menu.this, ohm_calculator.class);
        startActivity(i);
      } 
    });
    bLed.setOnClickListener(new View.OnClickListener() {
      public void onClick(View arg0) {
        Intent i = new Intent(main_menu.this, led_calculator.class);
        startActivity(i);
      } 
    });
    bBat.setOnClickListener(new View.OnClickListener() {
      public void onClick(View arg0) {
        Intent i = new Intent(main_menu.this, battery_calculator.class);
        startActivity(i);
      } 
    });
    bEnc.setOnClickListener(new View.OnClickListener() {
      public void onClick(View arg0) {
        Intent i = new Intent(main_menu.this, encoder_calculator.class);
        startActivity(i);
      } 
    });
  }
} 
```

## 来自 Google Play 的堆栈跟踪：

```
java.lang.Error: Unresolved compilation problems: 
The import sor.robotics.calculators.R cannot be resolved
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable
R cannot be resolved to a variable

at robot_calc.android.main_menu.<init>(main_menu.java:8)
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1409)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

# security - 安全重定向电子邮件服务器用户的方法

> ID：14418421
> 
> 赞同：0
> 
> 时间：2013-01-19T20:17:04.363
> 
> 标签：security, node.js, email, smtp

我正在构建一个基于 nodeJS 的电子邮件服务器（家庭作业）。我需要找到一种方法在验证信息后安全地将用户重定向到他们的页面。现在我只是用如下 URL 回复`/mail.html?user=username`

这显然是错误的——任何对 GET/POST 参数的使用都很容易被破解。我认为用户提出的任何进一步请求（例如检查收件箱，发送邮件）都必须再次通过他的密码进行验证。

我对吗？有没有解决我问题的通用方法？

谢谢

PS我不能使用外部nodeJS模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:31:23.307

您需要为**每个**请求在服务器端验证凭据。

每个请求都应该包含用户名/密码或某种会话令牌。还要注意通过网络以纯文本形式发送用户凭据。使用 HTTPS。

# python - 选择多维numpy数组的一部分

> ID：14418430
> 
> 赞同：0
> 
> 时间：2013-01-19T20:18:00.433
> 
> 标签：python, numpy

我四处搜索，但似乎找不到任何有效的方法来根据索引选择 3d 数组的一部分。例如，我有一些尺寸为 200 x 200 x 200 的 3d 数组，我想选择并更改所有索引大于 100 的所有元素的值

```
import numpy as np

mask = np.ones((200,200,200))

for x in np.arange(0,mask.shape[0]):
    for y in np.arange(0,mask.shape[1]):
        for z in np.arange(0,mask.shape[2]):
            if x > 100 & y > 100 & z > 100:
                mask[x,y,z] = 0
            else:
                mask[x,y,z] = 1 
```

必须有一些有效的方法来使用 np.select 或类似的方法来做到这一点，但我就是无法理解它。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:21:22.653

> 我想选择并更改所有索引都大于 100 的所有元素的值

以下应该做到这一点：

```
mask[101:,101:,101:] = 0 
```

# c# - Sql 事务与内存使用与 ini 文件

> ID：14418432
> 
> 赞同：-3
> 
> 时间：2013-01-19T20:18:11.683
> 
> 标签：c#, .net, sql

我正在构建一个连接到 sql server 的 Web 应用程序。这个过程是这样的：用户登录网站，从那一刻起，有几个连接到数据库，但是从数据库到达的另一件事是将客户的公司表示为一个对象。客户端可能会在会话期间更改某些数据。以及会话结束时（客户端关闭浏览器）。发送到数据库的对象。所以问题是从我把桌子带到我应该如何保留它的代码的那一刻起。在数据表或 ini 文件中。请记住，这是浏览器，我想尽可能快地保持它。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:23:23.923

听起来你应该使用数据库。毫无疑问。

您的用户期望 (ACID) 一致性，以及与多个用户一起使用 web 应用程序的能力等。当数据库开箱即用时，使用 ini 文件是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:49:42.860

您应该将数据保存在数据库中，并在每次页面请求时从那里读取。至少，您应该从哪里开始，并且仅在您确实有任何性能问题时才考虑在内存中缓存数据。

你不应该为用户打开一个数据库连接，你应该为每个请求打开一个新连接，并尽快关闭它。连接由系统汇集并重用，因此不必在每次打开数据库时都建立与数据库的新连接，但您应该让系统处理所有这些。

更改的数据应立即写入数据库。将数据保存在内存中并在会话结束时将其写入存在稳定性和时序问题。服务器不知道用户何时关闭浏览器，因此服务器认为会话在用户最后一次请求后的一段时间内结束，通常为 15 分钟。这意味着当用户关闭浏览器时不会写入数据，但最多会在 15 分钟后写入。如果用户再次登录，更改将在一段时间后显示。如果服务器在保存数据时出现问题，则数据将丢失，并且根本不会保存更改。

# sql - 用于编辑具有多个用户的多级节点层次结构的体系结构

> ID：14418438
> 
> 赞同：2
> 
> 时间：2013-01-19T20:18:55.023
> 
> 标签：sql, locking, hierarchy, editing, pessimistic-locking

我正在构建一个模块来编辑节点的层次结构。您可以将其视为一个非常大的目录结构，其中包含许多级别的嵌套目录和文件。层次结构的节点存储在关系数据库表中。唯一的区别是没有文件夹/目录之类的东西。所有节点都具有相同的特征。所以一个节点有一个父节点，它也是一个节点。而且只有一个根节点，一个节点只能有一个父节点，所以没有多层次结构。

**表列：**

node_id [bigint] 非空
名称 [nvarchar(50)]
parent_node_id [bigint]
叶节点 [bit]

目标是找出一种方法来编辑一个层次结构，而无需用户互相踩脚。我们要么必须设计版本控制架构来解决冲突，要么使用某种锁定机制（悲观或乐观）来防止其他人编辑作为整个层次结构中某个给定父节点的祖先（或子树）的一部分的节点树。如果我们执行锁，那么每个使用编辑器的人都需要不断刷新他们的树才能看到其他人的变化。

只有三个功能需要担心。只有一个用户允许在主树中编辑节点/对象。将新创建的子树拖放到主树中。将主树中的子树拖放到主树中的另一个节点中，从而使删除的子树成为该节点的子节点。

我认为这种架构与管理文件夹和文件的操作系统架构没有什么不同。这通常是如何在成千上万的用户上完成的？我宁愿使用锁定机制而不是使用版本控制来降低复杂性。我只是不确定最好的方法是什么。

到目前为止，这是我的计划：

*   如果一个节点正在被编辑，在保存发生并且数据库即将更新记录之前不要锁定它。数据库进行更改后，将其解锁。如果其他人试图在数据库进行更改的同时编辑记录，请不要告诉用户它已被锁定。让数据库处理记录/节点上的锁。

*   如果新的子树被拖入主树的父节点，则锁定新的父节点。然后插入新记录并更新根父节点以指向主树父节点。然后通知所有客户端更新他们的主树。因此，在删除发生后，所有锁定都发生在数据库端。

*   如果一个现有的主树父节点被拖到一个现有的主树父节点中，并成为一个子节点，那么我们应该锁定旧的父节点（成为新的子节点）并锁定新的父节点。然后更新新子节点的父节点。然后更新所有客户端（所有用户）并更新他们的主树。因此，在删除发生后，所有锁定都发生在数据库端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:37:44.867

对于 1，您可以只使用乐观锁。（您当前的方法意味着“最后的数据覆盖现有的”）。

关于 2 和 3 - 似乎只需重新链接节点即可实现拖放，因此您可以使其更容易一些 - 无需过多的数据复制。

在这种情况下，您可以引入一个`link lock`，它锁定两个链接端。这可以防止“源”节点同时移动到其他“目标”节点；它还可以防止突然的“目标”节点移动，这对客户来说应该是一个惊喜。

# c - Eclipse 索引器不起作用

> ID：14418441
> 
> 赞同：5
> 
> 时间：2013-01-19T20:19:14.943
> 
> 标签：c, eclipse, indexer

我正在使用带有 c/c++ ide 的 Eclipse 6。

我有一个同事的现有项目。所以我开始了一个新项目并导入了文件系统。

我收到此错误消息，并且索引器无法正常工作。

但我不知道该怎么做。

在“C/C++ 索引器”期间发生内部错误。org.eclipse.cdt.internal.core.pdom.PDOMProxy 不能转换为 org.eclipse.cdt.internal.core.index.IWritableIndexFragment

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T11:17:06.940

尝试这个

```
 1) Go into your eclipse project properties
   2) in left panel->c/c++ General
   3) in right panel->configure work space setting
   4) in left panel->expand c/c++
   5) in left panel click on indexer 
   6) in select indexer-> choose no indexer 
```

这是临时解决方案，如果您想使用搜索某些预定义的关键字或功能，我说它不合适

但要开始，你可以试试这个。

# php - 如何为特定部门随机化产品？

> ID：14418446
> 
> 赞同：1
> 
> 时间：2013-01-19T20:19:34.647
> 
> 标签：php, mysql, database

这是我的类别结构：

```
• Department
  • Category
    • Sub-Category 
```

这是我的数据库：

![在此处输入图像描述](../Images/4d48172620be30b99ad1fea2a260944b.png)

我想展示来自特定部门的 6 个随机产品。例如，当用户查看部门页面时，我只想要该部门中的所有产品。我遇到的问题是我无法找到只获得部门的方法，出于某种原因，我只能从类别中获得产品......我需要再上一层。

这是我的 SQL：

```
SELECT *
FROM products p
LEFT JOIN products_categories pc
ON p.product_id = pc.product_id
LEFT JOIN categories c
ON pc.category_id = c.category_id
WHERE c.category = 119
ORDER BY RAND()
LIMIT 6 
```

119 将是部门 ID，但我的查询是空的，因为我不能走那么远。

**编辑** 我创建了一个 SQLFiddle 让每个人都更轻松......非常酷的工具；）

[http://sqlfiddle.com/#!2/964ed/3](http://sqlfiddle.com/#!2/964ed/3)

**编辑**我想我需要更好地解释

所以我有我的第三类深；部门、类别和子类别。该部门没有与之相关的产品，所有产品都与子类别相关联。由于我的产品与我的部门没有直接关联，我怎么能进行查询以检索部门下的所有内容？我正在尝试将所有东西都放在 Firearms 下，因为它拥有最多的产品。当我使用 Firearms id (119) 查询时，我什么也得不到？但是当我使用其中一个子类别 ID 时，我会得到结果吗？所以，我猜我需要做某种类型的子选择或其他东西，但不确定。希望这可以解决问题:)

**预期结果** 使用for `119`，我想得到以下记录：`category_id``firearms`

```
(143, 131, 'single-shot')
(144, 131, 'semiautomatic')
(145, 131, 'bolt-action')
(146, 131, 'pump & lever action')
(171, 130, 'bolt-action')
(174, 136, 'safe')
(178, 130, 'single-shot')
(179, 130, 'pump & lever action')
(180, 130, 'semiautomatic')
(182, 181, 'shotgun ammunition')
(183, 181, 'rimfire ammunition')
(184, 181, 'centerfire ammunition')
(185, 181, 'handgun ammunition')
(186, 120, 'cooking') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:39:16.097

`left`试试这个请求和评论：由于您指定了部门 ID，因此与此处或此处没有太大区别`inner join`。我使用了自己的样本数据。

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/53bae/2)

```
SELECT *
FROM product p
LEFT JOIN prod_categ pc
ON p.id = pc.pid
LEFT JOIN category c
ON pc.cid = c.id
WHERE c.id = 119
ORDER BY RAND()
LIMIT 6
;

| ID |    NAME | PID | CID |
----------------------------
|  1 |   ebook |   1 | 119 |
|  2 | artbook |   2 | 119 | 
```

* * *

## 编辑：

`category 119`查看您的示例数据，交叉引用表中似乎没有： `products category`。所以我尝试`category id 182`并根据您的示例数据更改了`limit 2`..

*   [SQLFIDDLE 演示2](http://sqlfiddle.com/#!2/964ed/32)

询问：

```
SELECT p.*, pc.category_id
FROM products p
LEFT JOIN products_categories pc
ON p.product_id = pc.product_id
LEFT JOIN categories c
ON pc.category_id = c.category_id
WHERE c.category_id = 182
ORDER BY RAND()
LIMIT 2
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:41:36.383

我找到了一个网站，可以准确地解释我在寻找什么： [http ://code-slim-jim.blogspot.com/2010/06/mysql-find-grandparentsgrandchildren.html](http://code-slim-jim.blogspot.com/2010/06/mysql-find-grandparentsgrandchildren.html)

SQL 小提琴： [http ://sqlfiddle.com/#!2/964ed/97](http://sqlfiddle.com/#!2/964ed/97)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:30:23.733

您可能需要使用派生表。请注意，您的`WHERE`子句击败了`LEFT JOIN`，因此您不妨`INNER JOIN`改为执行以下操作：

```
SELECT *
FROM (
   SELECT *
   FROM products p
   INNER JOIN products_categories pc
   ON p.product_id = pc.product_id
   INNER JOIN categories c
   ON pc.category_id = c.category_id
   WHERE c.category = 119
   ) x
ORDER BY RAND()
LIMIT 6 
```

# javascript - 循环遍历 javascript 对象文字，但从中间开始

> ID：14418449
> 
> 赞同：0
> 
> 时间：2013-01-19T20:20:00.323
> 
> 标签：javascript, object

我正在寻找一种遍历对象的方法，但例如从中间的某个位置或任何其他值开始，例如：Tue、Wen、Thu、Fri、Sat、Sun、Mon 而不是 Sun、Mon、Tue、Wen , Thu, Fri, Sat（作为示例中使用的对象）。

// 基本周概览

```
daysByName = {
    sunday    : 'Sun', 
    monday    : 'Mon', 
    tuesday   : 'Tue', 
    wednesday : 'Wed', 
    thursday  : 'Thu', 
    friday    : 'Fri', 
    saturday  : 'Sat'
} 
```

// 基本循环

```
for (var key in daysByName) {
    console.log(daysByName[key]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:50:20.050

您不能依赖对象中属性的顺序，结果可能取决于浏览器（例如按字母顺序重新排序的属性）。而且您不能仅依靠 for...in 来捕获属性，您需要添加一个 hasOwnProperties() 过滤器。

您有两种选择：

*   使用数组而不是对象

    daysByName = [ {星期日：'星期日'}，{星期一：'星期一'}，...]

*   在对象本身中输入索引：

    星期日：{缩写：“Sun”，索引：0}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-19T20:22:16.567

您可以尝试这样的事情，其中​​ startIndex 是您要开始的 startIndex。

```
daysByName = {
    sunday    : 'Sun', 
    monday    : 'Mon', 
    tuesday   : 'Tue', 
    wednesday : 'Wed', 
    thursday  : 'Thu', 
    friday    : 'Fri', 
    saturday  : 'Sat'
}

// Obtain object length
var keys = [];
for (var key in daysByName) {
    keys.push(key)
}

// Define start index
var startIndex = 4, count = 0;
for (var key in daysByName) {
    // Index is made by the count (what you normally do) + the index. Module the max length of the object.
    console.log(daysByName[ keys[ (count + startIndex) % (keys.length)] ]);
    count++; // Don't forget to increase count.
} 
```

这是一个小提琴：http: [//jsfiddle.net/MH7JJ/2/](http://jsfiddle.net/MH7JJ/2/)

# javascript - 使用 jquery 在动态生成的列表项上单击事件

> ID：14418451
> 
> 赞同：6
> 
> 时间：2013-01-19T20:20:04.483
> 
> 标签：javascript, jquery, indexing

我有一个动态生成的列表，然后我单击该项目并将其传递`index()`给另一个函数。

`click`问题是这个列表是动态填充的，当我做事件时我的代码没有响应。但是，如果除了动态填充的元素之外，我还向列表中添加了几个静态 li 元素，那么这些静态元素就可以工作。它很奇怪。

一些代码：

这会动态创建列表：

```
function SetOpenRecentURL( openRecentURL ) {

 $('#recentProjectsId').append('<li>' + openRecentURL + '</li>')
 } 
```

这是传递 Index() 的点击事件：

```
$('#recentProjectsId li').on('click', function () {
        var projIndex = $(this).index();
        console.log(projIndex)
        OpenProject()

    }) 
```

带有一些静态 Li 的 HTML

```
<div class="recentProjects" id="recentProjectsId">
<li>Test 1</li>
<li>Test 2</li>
        </div> 
```

当我运行我的程序时，我的列表看起来很完美，包括我的静态 li 和动态的，但我不能点击动态的，只能点击静态的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-19T20:21:21.333

> 当我运行我的程序时，我的列表看起来很完美，包括我的静态 li 和动态的，但我不能点击动态的，只能点击静态的。

这是因为，您的代码绑定`click`处理程序的方式，仅在绑定侦听器时绑定到页面中的元素。[稍微不同](http://api.jquery.com/on/)地设置点击监听器，它就会通过利用事件委托来工作：

```
$('#recentProjectsId').on('click', 'li', function () {
    // snip...
}); 
```

通过为 指定一个附加`selector`参数`.on()`：

> 一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。

* * *

请注意，您的 HTML 当前无效。[`<li>`元素仅在`<ul>`s、`<ol>`s 和`<menu>`s 内有效。](http://www.w3.org/TR/html5/grouping-content.html#the-li-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:21:10.533

您可以使用[委托事件](http://api.jquery.com/on/)：

```
$("#recentProjectsId").on("click", "li", function() {
    var projIndex = $(this).index();
    console.log(projIndex)
    OpenProject()
}); 
```

这`#recentProjectsId`是 的父元素`<li>`。

# api - java githubApi getRemaining 请求

> ID：14418457
> 
> 赞同：0
> 
> 时间：2013-01-19T20:20:56.580
> 
> 标签：api, github, client

我正在尝试使用 githubapi 来获取剩余的请求，但 client.getRemainingrequests 返回 -1。我在下面发布我的代码

```
 UserService userService = new UserService();
    GitHubClient client = new GitHubClient();
    client = userService.getClient().setCredentials("#######@gmail.com", "#####");;

    System.out.println("remaining requests:"+client.getRequestLimit()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T03:21:16.340

改用 jcabi [-github](http://github.jcabi.com/index.html)：

```
Github github = new RtGithub(oauth_token);
int remaining = github.limits().get("core").json().getInt("remaining"); 
```

更简单和面向对象。

# java - 禁止 Java/Flash 用户 - 为什么不工作？

> ID：14418461
> 
> 赞同：0
> 
> 时间：2013-01-19T20:21:22.217
> 
> 标签：java, javascript, browser

所以我试图制作一个安全页面。此安全页面将检查是否启用了 Flash 或 Java，如果启用，它将引导用户到另一个页面。

我首先想到使用 Javascript 来实现这一点，但结果不是我所期望的：

```
if (navigator.javaEnabled())
{
<?php header('Location: http://www.google.com/'); ?>
}
else
{
<?php header('Location: http://www.yahoo.com/'); ?>
} 
```

我在 Chrome 和 Firefox 中尝试过，它们总是重定向到雅虎。我在 Firefox 中启用了 Java 插件（在此测试之前我已禁用它）并重新启动浏览器，结果相同。

这很奇怪，因为之前它总是带我去谷歌，即使 Java 被禁用。我只需要一个好方法来检测是否允许使用 Java，我不想运行任何小程序。

我看到周围的其他人可能有同样的问题。我无法联系 www.java.com，因为我的主机不允许出站连接。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T09:05:20.930

在客户端，在 javascript 中，你可以解决这个问题。当您检测到 java 已启用时，您可以设置`window.location`将用户重定向到另一个页面。

```
if (navigator.javaEnabled()) {
    window.location = "http://google.com";
} else {
    window.location = "http://yahoo.com";
} 
```

# directx - 简单的 HLSL 文件不起作用？

> ID：14418470
> 
> 赞同：0
> 
> 时间：2013-01-19T20:22:08.747
> 
> 标签：directx, hlsl

我是 HLSL 的初学者，并且有一些示例代码可以呈现一个平面三角形。如果我尝试将 PSShader 函数从返回显式颜色的函数替换为引用下面的全局变量 (mycol) 的函数，则它不再将三角形呈现为彩色而是黑色。

```
float4 mycol = float4(1.0f, 1.0f, 0.0f, 1.0f);

float4 VShader(float4 position : POSITION) : SV_POSITION
{
        return position;
}

float4 PShader(float4 position : SV_POSITION) : SV_Target
{
    return mycol; // float4(1.0f, 0.0f, 1.0f, 1.0f);
} 
```

我试过阅读 HLSL 规范，但觉得我可能遗漏了一些明显的东西？

任何帮助表示赞赏，GMan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:00:59.337

如果您使用单独的着色器，您的全局变量可能已经更改了值...尝试向前传递变量：

```
float4 mycol = float4(1.0f, 1.0f, 0.0f, 1.0f);

struct VS_OUT
{
    float4 pos : SV_Position;
    float4 color : COLOR0;
}

VS_OUT VShader(float4 position : POSITION)
{
    VS_OUT ret;
    ret.pos = position;
    ret.color = mycol; // forward variable
    return ret; 
}

float4 PShader(VS_OUT input) : SV_Target
{
    return input.color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T02:14:31.070

我相信您只能使用 directx 中的常量缓冲区传递全局值。您需要在 c++ 代码中启动常量缓冲区：

```
 D3D11_BUFFER_DESC constDesc;
ZeroMemory( &constDesc, sizeof( constDesc ) );
constDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
constDesc.ByteWidth = sizeof(XMFLOAT4);
constDesc.Usage = D3D11_USAGE_DEFAULT;

d3dResult = d3dDevice_->CreateBuffer( &constDesc, 0, &shaderCB_ );

if( FAILED( d3dResult ) )
{
    return false;
} 
```

然后在您的渲染代码中：

```
XMFLOAT4 mycol = XMFLOAT4(1,1,0,1);
d3dContext_->UpdateSubresource(shaderCB_, 0, 0, &mycol, 0, 0); 
```

在你的着色器中：

```
cbuffer colorbuf : register(b0)
{
    float4 mycol;
}; 
```

# javascript - 更新后选择器出现 JQuery 错误

> ID：14418471
> 
> 赞同：0
> 
> 时间：2013-01-19T20:22:13.367
> 
> 标签：javascript, jquery-selectors

我有这个选择器，但升级 Jquery 后，控制台显示此错误：“错误：语法错误，无法识别的表达式：”

```
jQuery(pagination+"['rel='" + (t) + "']",obj).parent().addClass('active'); 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:09:32.810

我是这样解决的。

```
 jQuery(pagination[rel=(t)],obj).parent().addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:25:11.897

看起来您`'`在 rel 属性之前添加了一个额外的内容。它应该看起来像这样。

```
jQuery(pagination + "[rel='" + (t) + "']", obj).parent().addClass('active'); 
```

# ios - 如何在 iOS 6 的不同视图中加载 Web 视图

> ID：14418474
> 
> 赞同：2
> 
> 时间：2013-01-19T20:22:22.163
> 
> 标签：ios, xcode, uiwebview, webview

我有一个文本字段，用户可以在其中输入他们想要谷歌的任何内容。当用户在文本字段中单击完成时，它会转到带有 Web 视图的新视图。**问题**是当我在文本字段中输入内容时，网络视图只是白色的（不将其加载到网络视图中）。

```
 #import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *query = [self buildGoogleSearchParameter:self.searchField];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.co/search?q=%@", query]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request];

}

- (NSString *)buildGoogleSearchParameter:(NSString *)searchField
{
    NSArray *unencodedStrings = [searchField componentsSeparatedByString:@" "];
    NSMutableArray *encodedStrings = [NSMutableArray array];

    for (NSString *unencodedString in unencodedStrings)
        [encodedStrings addObject:[self urlEncode:unencodedString]];

    return [encodedStrings componentsJoinedByString:@"+"];
}

- (NSString *)urlEncode:(NSString *)unencodedString
{
    return CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                     (CFStringRef)unencodedString,
                                                                     NULL,
                                                                     (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                     kCFStringEncodingUTF8));
}

-(IBAction)searchdone {

    ViewController *web = [self.storyboard instantiateViewControllerWithIdentifier:@"WebView"];
    web.searchField = searchbar.text;
    [self presentModalViewController:web animated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:54:48.327

问题是您似乎在`loadRequest`创建故事板标识符为`"WebView"`.

如果您尝试在其上显示新的模态视图`UIWebView`，通常，您会`NSString`在 Web 视图`ViewController`中为正在搜索的字符串添加一个属性`searchField`，例如，例如：

```
-(IBAction)searchdone {

    ViewController *web = [self.storyboard instantiateViewControllerWithIdentifier:@"WebView"];
    web.searchField = searchbar.text;
    [self presentModalViewController:web animated:YES];
} 
```

然后`viewDidLoad`对于带有 web 视图的视图控制器将使用以下属性`loadRequest`构建 URL ：`searchField`

因此，`ViewController.h`对于目标视图控制器，可能有一个`@interface`不仅包括`UIWebView`，还包括我们的新`searchField`属性：

```
@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIWebView *webView;
@property (nonatomic, strong) NSString *searchField;

@end 
```

.m 文件中的`@implementation`可能是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *query = [self buildGoogleSearchParameter:self.searchField];
    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.co/search?q=%@", query]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.webView loadRequest:request];
}

- (NSString *)buildGoogleSearchParameter:(NSString *)searchField
{
    NSArray *unencodedStrings = [searchField componentsSeparatedByString:@" "];
    NSMutableArray *encodedStrings = [NSMutableArray array];

    for (NSString *unencodedString in unencodedStrings)
        [encodedStrings addObject:[self urlEncode:unencodedString]];

    return [encodedStrings componentsJoinedByString:@"+"];
}

- (NSString *)urlEncode:(NSString *)unencodedString
{
    return CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL,
                                                                     (CFStringRef)unencodedString,
                                                                     NULL,
                                                                     (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                     kCFStringEncodingUTF8));
} 
```

注意，`webView`是 my `IBOutlet`for my的名称`UIWebView`。您应该将其替换为适合您项目的任何内容。

另请注意，我对搜索字段进行了一些 url 编码。这样，您可以搜索带有 & 字符、引号等的字段。最简单的方法就是`CFURLCreateStringByAddingPercentEscapes`您在上面看到的方法。

# arrays - null 和 []，它们不应该是相同的吗？

> ID：14418475
> 
> 赞同：2
> 
> 时间：2013-01-19T20:22:22.913
> 
> 标签：arrays, struct, null, d

我进行了修改`std.array.array`，使其始终在编译时工作，它看起来像这样：

```
ForeachType!Range[] array(Range)(Range r)
if (isIterable!Range && !isNarrowString!Range)
{
  auto a = appender!(ForeachType!Range[])();
  foreach (e; r)
  {
    a.put(e);
  }
  return a.data;
} 
```

还有一个用法：

```
struct Type
{
  int[] xs;
  this(int[] r) { this.xs = r.array; }
}

enum Type t1 = Type([]);
static if (t1.xs.length) { }  // Error: expression null.length is not constant 
```

根据我的理解，when`r`是一个空范围，`array()`返回一个`null`. `null`在这方面，和空数组之间应该有区别吗？

替换`return a.data;`为确实`array()`可以`return a.data.length ? a.data : [];`解决问题，所以我想有区别吗？

问题是这只发生在构造函数中。以下不会产生错误：

```
enum int[] t1 = iota(0,0).array;
static if (t1.length) { } 
```

`null`所以我想和之间没有区别`[]`？我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T21:14:45.657

`[]`比较等于是真的`null`。`[] == null`并且`[] is null`都是`true`。对于未初始化的数组或用 初始化的数组也是如此`null`。

但是，空数组*并不*总是`null`. 例如：

```
int[] a;
assert(a is null);
a = new int[2];
a = a[0..0];
assert(a !is null); 
```

请参阅*D 编程语言*，第 1 页。95.

**编辑：** 鉴于编译时`.length`似乎出现故障，我建议使用`std.array.empty`检查，这应该比`null`比较更可靠。在 DMD 2.061 上，`static if (!t1.xs.empty) { }`工作`static if (t1.xs.length) { }`失败。

# android - 两个片段 - 使用两个片段中的 sqlite 或将细节从一个片段传递到另一个片段？

> ID：14418479
> 
> 赞同：3
> 
> 时间：2013-01-19T20:22:38.187
> 
> 标签：android, android-listview

假设我有一个包含 10 列 text(20) 类型的 SQLite 表。

ListFragment 将从数据库中提取 4 列并使用 SimpleCursorAdapter 显示在列表中。

选择后，ListFragment 会将选定的 row_id 传递给 DetailFragment，它将从数据库中提取所有 10 列以显示（另一个查询）。

另一种设计是在 ListFragment 中预先提取所有需要的数据（但只显示那些需要的数据）并通过意图或构造函数将所有内容传递给 DesignFragment。我不喜欢这个选项的是该列表将包含它不需要的其他数据，而原始选项将意味着对数据库的二次调用。

哪个是首选？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:50:49.193

好吧，我可能不是这方面的专家，但在我看来，***最好不要一遍又一遍地查询数据库***。

查询一次数据（假设您的数据库的内容不是真的很大）并使用**Intents**传递它们。

但是，我个人建议不要通过 Intent 传递它们，而是创建一个**Utility 类**来包含数据库的所有详细信息，并且您只需初始化该类对象一次，然后在需要的地方使用该对象。唯一需要记住的是，每次更新数据库内容时都需要更新此对象详细信息。

（例如，像官方的 Facebook Android SDK 使用 Utility 类来存储所有用户信息，包括访问令牌和会话 ID）

# android - Android 中的外部 jar 问题

> ID：14418483
> 
> 赞同：1
> 
> 时间：2013-01-19T20:23:16.627
> 
> 标签：android, opencmis

我越来越

`java.lang.NoClassDefFoundError: org.apache.chemistry.opencmis.client.bindings.CmisBindingFactory`

通过模拟器执行时用于外部 jar。

我做了以下事情 -

1.  在根包下创建 libs 文件夹，并将所有外部 jar 保存在 libs 文件夹下。libs 文件夹包含：activation-1.1.jar, android-support-v4.jar, chemistry-opencmis-client-api-0.8.0.jar, chemistry-opencmis-client-impl-0.8.0.jar, chemistry-opencmis- commons-api-0.8.0.jar, chemistry-opencmis-commons-impl-0.8.0.jar
2.  然后转到 Project Properties -> java Build path -> Order and Export 并选中针对 Android Dependency 和 Android 4.2 的复选框
3.  清洁项目

但仍然无法解决这个问题。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:34:56.287

**右键**项目，选择**Android Tools->Add Support Library**

或者，右键**单击****项目**->**属性**-> **Android**。

在该屏幕的底部，您应该会看到您包含的 Android 库以及它们是否正确链接。

如果您发现那里缺少任何外部 jar，**请右键单击****libs 文件夹**中的**外部 jar 文件**，然后选择**Build Path -> Add to Build Path**。

 ****[在这里](http://geekswithblogs.net/cyberycon/archive/2011/05/17/using-external-libraries-with-android.aspx)查看详细说明。****

# ios - 带有 django-ios-notifications 的 APNS

> ID：14418485
> 
> 赞同：0
> 
> 时间：2013-01-19T20:23:26.120
> 
> 标签：ios, objective-c, apple-push-notifications

我第一次尝试为我的应用程序设置 APNS，并且对如何设置与特定设备 ID 关联的用户有疑问。我正在阅读以下内容：

[https://github.com/stephenmuss/django-ios-notifications](https://github.com/stephenmuss/django-ios-notifications)

[http://highonpython.com/index.php/setting-up-ios-push-notifications-apns-with-pythondjango-through-pyapns/](http://highonpython.com/index.php/setting-up-ios-push-notifications-apns-with-pythondjango-through-pyapns/)

我能够完成所有设置和一切，我正试图为 iOS 应用程序编写代码。我的问题是，根据我的 iOS 应用程序中的示例，我有以下内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIRemoteNotificationType allowedNotifications = UIRemoteNotificationTypeAlert|UIRemoteNotificationTypeSound|UIRemoteNotificationTypeBadge;

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:allowedNotifications];
    return YES;
}

- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken
{
    NSString * tokenAsString = [[[deviceToken description]
                                 stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]]
                                stringByReplacingOccurrencesOfString:@" " withString:@""];
    NSURL* url = [NSURL URLWithString:[NSString stringWithFormat:@"http://your_server.com/add_device_token/%@/", tokenAsString]];
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] initWithURL:url];

    [NSURLConnection connectionWithRequest:request delegate: self];
} 
```

这将允许我通知我的服务器该特定设备的令牌。但是，我的应用程序需要用户登录，并且在登录后他们有一个用户 ID、电子邮件、密码等。有没有办法在用户登录后延迟所有这些？或者这是我在发布时必须做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:40:10.910

似乎答案是否定的。最好的办法是让 appDelegate 记住 deviceToken，然后稍后（在登录后等）向用户发送该设备的注册信息

# c# - 记录服务器名称和服务器 IP

> ID：14418486
> 
> 赞同：0
> 
> 时间：2013-01-19T20:23:29.373
> 
> 标签：c#, asp.net, exception, logging

当抛出异常时，我们记录它。但是，我们无法检索服务器名称或 IP 地址。不确定这是否是检索它的正确方法。
`Log.ServerName = HttpContext.Current.Request.ServerVariables["LOCAL_ADDR"];`
`Log.ServerIP = HttpContext.Current.Request.ServerVariables["SERVER_NAME"];`

这似乎不起作用。它返回 'localhost' 和 ::1 作为 IP 地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:41:18.807

根据您的评论，您似乎想要记录本地服务器名称和 IP 地址。一种解决方案是使用[Dns.GetHostName](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostname.aspx)和[Dns.GetHostAddresses](http://msdn.microsoft.com/en-us/library/system.net.dns.gethostaddresses.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:29:47.907

如果您从 IDE 中的本地服务器对其进行测试，它似乎可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:59:13.003

您是否在运行 Web 服务器的同一台机器上测试了应用程序？如果是这样，那么 IPV6 环回地址和 localhost 是变量的预期结果。如果您从另一台机器发送请求，那么值应该是您所期望的。

或者，HTTPRequest.Url 属性将包含主机的客户端身份，如果您预期主机应用程序有多个别名，这可能会更有用。

# jquery - 使用jquery（wordpress）将图像与另一个图像叠加

> ID：14418489
> 
> 赞同：0
> 
> 时间：2013-01-19T20:23:40.837
> 
> 标签：jquery, html

我有以下标记：

```
<a href="#"><img src="sample-article-img.jpg" alt="Mri Machine" title="medical" class="alignright size-medium wp-image-3109"></a> 
```

我需要用另一个图像覆盖它（放大按钮）：`images/article-zoom.png`

问题 #1，我无法更改标记。问题 #1，我没有课程或 id`<a>`

我的想法是完全使用 jquery，将 zoom.png 放在第一个图像（客户端）旁边，将绝对位置放在上面。但这里的问题是主图像会浮动，所以我的放大按钮不会随之移动。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:15:02.327

您确实没有提供很多细节可以使用，但是作为初学者添加新图像是相当简单的。

对于演示，假设我们要添加到任何以 . 开头的类的图像`wp-image`。如果仅添加到特定图像将需要有关该图像和/或其父元素的更多详细信息

还需要更多关于定义现有图像的位置的详细信息。我假设以现有图像为中心。

```
/* adjust accordingly*/
var buttonW = 120,/* button width*/
    buttonH = 40, /* button height*/
    $button = $('<img>', {src:  'drop zoom.png'});

var $image = $('img[class ^= "wp-image"]'),
    $image_link = $image.parent().css('position ', 'relative ');

var currImgPosition = $image.position(),
    currImgH = $image.height(),
    currImgW = $image.width();

var buttonCss = {
    position: 'absolute',
    zIndex : 10,
    width: buttonW,
    height: buttonH,
    top: currImgPosition.top + currImgH / 2 - buttonH / 2,
    left: currImgPosition.left + currImgW / 2 - buttonW / 2
}

$image_link.append( $button.css(buttonCss) ); 
```

编辑：jsfiddle.net 中的一些具有足够 css 来模仿现有元素的实时 html 也会有所帮助

# date - spring mvc中的时间和日期选择器

> ID：14418493
> 
> 赞同：-1
> 
> 时间：2013-01-19T20:24:01.877
> 
> 标签：date, time, picker

我正在使用spring mvc，需要一个日历或日期和时间选择器进入我的jsp。

我的问题是最好做什么，在 jquery 中使用现有的日期选择器或在 java 中编写自己的日历？

当用户选择（预订）日期和时间时，我需要保存日期和时间，在这种情况下我该怎么做？

我想做这样的事情： [http ://codecanyon.net/item/booking-calendar-pro-jquery-plugin/full_screen_preview/244645](http://codecanyon.net/item/booking-calendar-pro-jquery-plugin/full_screen_preview/244645)

可以在 jsp 中做这样的日历吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T10:35:43.283

使用简单的加载和保存逻辑尝试 DHTMLX JavaPlanner [http://javaplanner.com/](http://javaplanner.com/)

[Spring MVC](http://javaplanner.com/blog/spring-mvc-booking-system-tutorial/)中的这个预订教程也很有帮助。

# javascript - 获取用户自由手绘折线的坐标。（ArcGIS API for JavaScript）

> ID：14418494
> 
> 赞同：3
> 
> 时间：2013-01-19T20:24:13.380
> 
> 标签：javascript, map, coordinates, arcgis, polyline

我是新来的，我已经使用 ArcGIS javascript api 大约 2 周了。

我遵循了这个例子：

[http://help.arcgis.com/en/webapi/javascript/arcgis/jssamples/#sample/graphics_add](http://help.arcgis.com/en/webapi/javascript/arcgis/jssamples/#sample/graphics_add)

而且我能够在地图上自由绘制折线。现在我需要计算该折线上每个点的坐标。我已经尝试了大约 5 天，但我不知道该怎么做。如果你们中的任何人能详细解释我如何做到这一点，我将不胜感激（因为我没有太多经验）。

提前致谢，

迭戈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:25:06.873

您需要检查`geometry`从事件 onDrawEnd 获得的对象 - 此事件已在示例中挂钩：

`dojo.connect(tb, "onDrawEnd", addGraphic);`

但它所做的只是将线添加到带有基本符号的地图中。第一个陷阱是几何对象实际上不是类型`geometry`- 这是一个实际上并不存在的抽象基类。类型将取决于您用于绘制形状的工具 - 在您的情况下，它听起来像是 type [`Polyline`](http://help.arcgis.com/en/webapi/javascript/arcgis/jsapi/#polyline)。

这个折线对象有一个属性[`paths`](http://help.arcgis.com/en/webapi/javascript/arcgis/jsapi/#Polyline/paths)，它是一个嵌套的路径（线）数组，每个路径都包含一个点数组。因此，如果您想获取折线对象中所有路径的所有点：

```
function addGraphic(geo) {
    //For each path...
    for ( var path = 0; path < geo.paths.length; path ++ ) {
        //For each point in the path...
        for ( var pt = 0; pt < geo.paths[path].length; pt++ ) {
            //Do something with each point in here...
            //X coordinate: geo.paths[path][pt][0]
            //Y coordinate: geo.paths[path][pt][1]
        }
    }
} 
```

您可能需要对诸如您是否真的有 Polyline 或其他继承自 的对象进行更多检查`geometry`，因为包含实际坐标的属性在 Polyline、Polygon、Point 等之间有所不同。

# google-apps-script - 将值返回到电子表格对话框

> ID：14418496
> 
> 赞同：0
> 
> 时间：2013-01-19T20:24:58.170
> 
> 标签：google-apps-script, google-sheets

**目标：**

将应用脚本函数中的数据返回到自定义电子表格 HTML 表单中。

**问题：**

脚本返回“未定义”

**应用脚本：**

```
function displaySSUI(e) {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var html = HtmlService.createTemplateFromFile("index.html").evaluate();
  ss.show(html);
  return
}

function returnVal () {
   Logger.log("So far so good")            // Displays in Apps Script Logger
   return "Good"
} 
```

**电子表格 HTML 对话中的脚本：**

```
<script>
   var str = google.script.run.returnVal()
   alert(str);                             // Alert box says undefined
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T14:28:52.840

因为`google.script.run`会异步运行，所以不能立即返回值。这就是`str`未定义的原因。

您需要创建一个回调函数来访问返回值：

```
<script>
  //function to be called when .returnVal() returns
  var onSuccess = function(str) {
    alert(str);
  }

  //use .withSuccessHandler() to set the callback function
  var str = google.script.run.withSuccessHandler(onSuccess).returnVal()
</script> 
```

# eclipse-plugin - 如何在 Aptana studio 3 中为 Behave-BDD 工具安装 xGherkin 编辑器？

> ID：14418497
> 
> 赞同：0
> 
> 时间：2013-01-19T20:24:59.670
> 
> 标签：eclipse-plugin, bdd, aptana3, gherkin, jbehave-plugin

我应该在 Aptana Studio 3 中安装哪个插件来查看用 Behave（Python 的 BDD 工具）编写的 Gherkin 文件。Gherkin 文件具有“*.feature”扩展名。现在，它将 *.feature 文件视为文本文件并且不支持它们。我在 Python 中使用 Behave。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T09:55:59.440

我能找到的最好的解决方案是[cucumber-eclipse](https://github.com/cucumber/cucumber-eclipse)，它包括 Eclipse 编辑器的高亮插件。

# iphone - 如何通过 HTTP 将大型 .m4v 视频文件流式传输到我的 iOS 应用程序？

> ID：14418498
> 
> 赞同：1
> 
> 时间：2013-01-19T20:25:02.530
> 
> 标签：iphone, ios, xcode, cocoa-touch, mpmovieplayercontroller

我在 HTTP 服务器上有一个大的 .m4v 视频文件。例如，这是我要访问的 URL：

```
http://www.myurl.com/movies/video1.m4v 
```

在此示例中，video1.m4v 文件为 1GB。当我在 iPhone 上的 Safari 浏览器中加载该 URL 时，文件开始自动且完美地播放。我可以向前跳过、返回、使用 Airplay，一切都运行良好且快速。

当我用这段代码将它加载到我的 iPhone 上时，它就会`Loading`永远挂起。

```
MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:url];
[moviePlayerController.view setFrame:CGRectMake(0, 70, 320, 270)];
[self.view addSubview:moviePlayerController.view];
moviePlayerController.fullscreen = YES;
[moviePlayerController play]; 
```

就像移动 Safari 一样，在我的 iOS 应用程序中播放 m4v 文件的正确方法是什么？我想这样做的主要原因是对用户隐藏 URL，并且不具有跳入和跳出我的应用程序的用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:57:40.383

我会尝试通过 UIWebView 加载视频。

```
UIWebView *webView = [[UIWebView alloc] init];
// Hide the webview from the user
webView.frame = CGRectZero;
[self addSubview:webView];
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.myurl.com/movies/video1.m4v"]]]; 
```

# c# - 导航参数为复杂对象时暂停后应用程序崩溃

> ID：14418507
> 
> 赞同：1
> 
> 时间：2013-01-19T20:26:19.137
> 
> 标签：c#, silverlight, windows-store-apps

我正在开发一个 Windows 8 应用程序（Windows Store 应用程序）。我有一个包含两个导航参数的页面：

```
if (navigationParameter is int)
{
     BindByBoxId(navigationParameter);
}
else if (navigationParameter is Word)
{
     BindByWordObject(navigationParameter as Word);
} 
```

当应用程序以整数作为导航参数进入页面时，应用程序进入挂起模式后一切正常，但是，当导航参数是单词对象（复杂对象）时，`OnSuspending`事件处理程序运行时应用程序崩溃。

通过调查类中以下部分代码中的更多问题`SuspensionManager`：

```
 private static void SaveFrameNavigationState(Frame frame)
 {
      var frameState = SessionStateForFrame(frame);
      frameState["Navigation"] = frame.GetNavigationState();
 } 
```

问题是`GetNavigationState。[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame.getnavigationstate.aspx)中对该方法的描述提到了这个事实：

> 注意这些方法使用的序列化格式仅供内部使用。您的应用程序不应对其形成任何依赖关系。此外，此格式仅支持基本类型（如字符串、字符、数字和 GUID 类型）的序列化。

请告诉我如何解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T20:41:34.823

我意识到这已经很晚了，但这是未来寻求者的解决方案：

您需要自己序列化对象。您可以使用类似`DataContractSerializer`、`XmlSerializer`或 Json.NET 等众多优秀库之一。然后，保存的对象只是一个字符串。在加载状态下，您可以反序列化字符串，一切顺利。

# bash - bash方法从csv文件中删除最后4列

> ID：14418511
> 
> 赞同：16
> 
> 时间：2013-01-19T20:27:00.680
> 
> 标签：bash, csv, sed, awk, cut

有没有办法使用 bash 删除某些输入 CSV 文件的最后四列？最后四列的字段长度因行而异，因此仅从每行末尾删除一定数量的字符是不够的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-19T20:46:59.987

如果所有行都具有相同数量的字段，则 Cut 可以执行此操作，如果没有，则可以使用 awk。

```
cut -d, -f1-6 # assuming 10 fields 
```

如果要控制输出分隔符，将打印出前 6 个字段，使用 --output-delimiter=string

```
awk -F , -v OFS=, '{ for (i=1;i<=NF-4;i++){ printf $i, }; printf "\n"}' 
```

循环最多字段数为 -4 的字段并将它们打印出来。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-19T21:50:59.143

```
cat data.csv | rev | cut -d, -f-5 | rev 
```

`rev`反转行，因此所有行是否具有相同数量的列都没有关系，它总是会删除最后 4 列。这仅适用于最后 4 列本身不包含任何逗号的情况。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-19T20:34:29.523

`cut`如果您知道列数，则可以使用它。例如，如果您的文件有 9 列，并且逗号是您的分隔符：

```
cut -d',' -f -5 
```

但是，这假设您的 csv 文件中的数据不包含任何逗号。 `cut`也会将引号内的逗号解释为分隔符。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-10T20:58:20.017

```
awk -F, '{NF-=4; OFS=","; print}' file.csv 
```

或者

```
awk -F, -vOFS=, '{NF-=4;print}' file.csv 
```

将从每行删除最后 4 列。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-19T21:46:54.613

这可能对您有用（GNU sed）：

```
sed -r 's/(,[^,]*){4}$//' file 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-20T05:14:37.353

这个 awk 解决方案以黑客的方式

```
awk -F, 'OFS=","{for(i=NF; i>=NF-4; --i) {$i=""}}{gsub(",,,,,","",$0);print $0}' temp.txt 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-19T21:17:44.347

awk 单线：

```
awk -F, '{for(i=0;++i<=NF-5;)printf $i", ";print $(NF-4)}'  file.csv 
```

使用 awk 而不是 cut 的优点是，您不必计算您有多少列，以及您想要保留多少列。因为你想要的是删除最后 4 列。

看测试：

```
kent$  seq 40|xargs -n10|sed 's/ /, /g'           
1, 2, 3, 4, 5, 6, 7, 8, 9, 10
11, 12, 13, 14, 15, 16, 17, 18, 19, 20
21, 22, 23, 24, 25, 26, 27, 28, 29, 30
31, 32, 33, 34, 35, 36, 37, 38, 39, 40

kent$  seq 40|xargs -n10|sed 's/ /, /g' |awk -F, '{for(i=0;++i<=NF-5;)printf $i", ";print $(NF-4)}'
1,  2,  3,  4,  5,  6
11,  12,  13,  14,  15,  16
21,  22,  23,  24,  25,  26
31,  32,  33,  34,  35,  36 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-22T13:54:02.400

当 CVS 文件带有带 <comma> 字符的引用字段时，上述方法都不能正常工作。因此，仅使用 <comma> 字符作为字段分隔符有点困难。

以下两个帖子现在非常方便：

*   [使用 awk 有效解析 CSV 的最可靠方法是什么？](https://stackoverflow.com/questions/45420535/whats-the-most-robust-way-to-efficiently-parse-csv-using-awk)
*   [[U&L] 如何在 Linux 中删除文件的最后一列](https://unix.stackexchange.com/q/234432/273492)（注意：这仅适用于 GNU awk）

由于您使用 GNU awk，因此您可以执行以下两项中的任何一项：

```
$ awk -v FPAT='[^,]*|"[^"]+"' -v OFS="," 'NF{NF-=4}1' 
```

或者使用任何 awk，您可以执行以下操作：

```
$ awk 'BEGIN{ere="([^,]*|\042[^\042]+\042)"
             ere=","ere","ere","ere","ere"$"
       }
       {sub(ere,"")}1' 
```

# r - 为什么我的 sapply 函数要构建一个整数向量？

> ID：14418515
> 
> 赞同：0
> 
> 时间：2013-01-19T20:27:26.367
> 
> 标签：r, vector, sapply

我有两个相关的问题——我正在尝试正确地学习 R，所以我正在从 R 课程中做一些家庭作业。他们让我们编写一个函数来返回一个相关向量：

```
example.function <- function(threshold = 0) {
  example.vector <- vector()
  example.vector <- sapply(1:30, function(i) {
    complete.record.count <- # ... counts the complete records in each of the 30 files.
    ## Cutting for space and to avoid giving away answers.
    ## a few lines get the complete records in each 
    ## file and count them. 
    if(complete.record.count > threshold) {
      new.correlation <- cor(complete.record$val1, complete.record$val2)
      print(new.correlation)
      example.vector <- c(new.correlation, example.vector)
    }  
  })
  # more null value handling#
  return(example.vector)
} 
```

当函数运行时，它将相关值打印到标准输出。它打印的值精确到小数点后六位。所以我知道我得到了一个很好的价值`new.correlation.`返回的向量不包括这些值。相反，它是按顺序排列的整数。

```
> tmp <- example.function()
> head(tmp)
[1] 2 3 4 5 6 7 
```

我不知道为什么`sapply`将整数推入向量？我在这里想念什么？

核心结构我其实不太懂，多多少少是：

```
some.vector <- vector()
some.vector <- sapply(range, function(i) {
  some.vector <- c(new.value,some.vector)
} 
```

这在冗余方面似乎非常不像 R。提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:42:28.047

如果您使用`sapply`，则不需要自己创建向量，也不需要增长它（`sapply`负责所有这些）。你可能想要这样的东西：

```
example.function <- function(threshold = 0) {
  example.vector <- sapply(1:30, function(i) {
    ## Cutting for space and to avoid giving away answers.
    ## a few lines get the complete records in each 
    ## file and count them. 
    if(complete.record.count > threshold) {
      new.correlation <- cor(complete.record$val1, complete.record$val2)
      }  else {
        new.correlation <- NA   
      }
    new.correlation #return value of anonymous function
  })
  # more null value handling#
  example.vector #return value of example.function
} 
```

然而，目前还不清楚索引是如何`i`影响匿名函数的，而且这个问题是不可重现的......

# android - Android更改屏幕色调

> ID：14418516
> 
> 赞同：2
> 
> 时间：2013-01-19T20:27:27.140
> 
> 标签：android, android-widget, tint

我想创建一个应用程序，将整个 android 屏幕染成某种颜色。色调或颜色覆盖将是全局的。与[此](https://play.google.com/store/apps/details?id=com.netmanslab.sa&hl=en)类似。我怎么会这样做？它会是一个小部件吗？代码示例赞赏！

# android - 我如何知道用户是否点击了按钮或屏幕的另一部分

> ID：14418525
> 
> 赞同：1
> 
> 时间：2013-01-19T20:28:25.173
> 
> 标签：android, button, click, focus

我有一个带有一些按钮的 OnClickListener。因此，例如，当我按下其中一些按钮时，屏幕底部会出现另一个按钮。如果我不点击最后一个按钮，这个按钮必须消失。

问题是：我怎么知道用户是点击了按钮还是屏幕的另一部分。

如果用户单击了我可以使用 onClick() 的按钮吗？如果用户没有点击按钮，什么功能得到那个动作？

PD：我尝试使用 onUserInteraction() 并无法解决此问题，因为程序调用它是否单击了按钮。

* * *

我的 XML 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<FrameLayout
    android:id="@+id/paco"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <FrameLayout
            android:id="@+id/pepe"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:layout_width="match_parent"
                android:layout_height="50dp" >
            </RelativeLayout>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
            </FrameLayout>

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:layout_marginTop="50dp" >

            </TabWidget>

        </FrameLayout>

    </TabHost>

    <LinearLayout
        android:id="@+id/pedro"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:gravity="center"
        android:orientation="vertical" >

        <RelativeLayout
            android:id="@+id/layoutCuadricula_anadirRegalo"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center" >

            <Button
                android:id="@+id/btCuadricula_foto"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Foto" />

            <Button
                android:id="@+id/btCuadricula_galeria"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/btCuadricula_foto"
                android:text="Galeria" />

            <Button
                android:id="@+id/btCuadricula_iconos"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/btCuadricula_galeria"
                android:text="Iconos" />
        </RelativeLayout>

        <Button
            android:id="@+id/btCuadricula_anadir"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Añadir" />

    </LinearLayout>

</FrameLayout> 
```

好吧，当我按下按钮“Añadir”时，会出现带有另外 3 个按钮的 RelativeLayout。如果我的下一个动作不是按下任何那个按钮，RelativeLayout。

我显示我的代码：

```
 public class Cuadricula extends TabActivity implements OnClickListener {
        private Button btAnadir, btFoto, btGaleria, btIcono;
        private AlphaAnimation alpha;
        private TranslateAnimation translate;
        private RelativeLayout cuadroBotones;
        private AnimationSet animationSet;
        private LinearLayout pedro;
        private FrameLayout pepe, paco;

    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.cuadricula); 

    pedro = (LinearLayout) this.findViewById(R.id.pedro);
    pepe = (FrameLayout) this.findViewById(R.id.pepe);
    paco = (FrameLayout) this.findViewById(R.id.paco);

    TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);

    TabSpec primeraPestana = tabHost.newTabSpec("tid1");
    TabSpec segundaPestana = tabHost.newTabSpec("tid2");
    TabSpec terceraPestana = tabHost.newTabSpec("tid3");
    TabSpec cuartaPestana = tabHost.newTabSpec("tid4");

    primeraPestana.setIndicator("Timeline").setContent(
            new Intent(this, Timeline.class));
    segundaPestana.setIndicator("Eventos").setContent(
            new Intent(this, Personas.class));
    terceraPestana.setIndicator("Perfil").setContent(
            new Intent(this, Perfil.class));
    cuartaPestana.setIndicator("Top").setContent(
            new Intent(this, Top.class));

    tabHost.addTab(primeraPestana);
    tabHost.addTab(segundaPestana);
    tabHost.addTab(terceraPestana);
    tabHost.addTab(cuartaPestana);

    cuadroBotones = (RelativeLayout) this
            .findViewById(R.id.layoutCuadricula_anadir);
    cuadroBotones.setVisibility(RelativeLayout.GONE);

    btFoto = (Button) this.findViewById(R.id.btCuadricula_foto);
    btGaleria = (Button) this.findViewById(R.id.btCuadricula_galeria);
    btIcono = (Button) this.findViewById(R.id.btCuadricula_iconos);
    btAnadir = (Button) this
            .findViewById(R.id.btCuadricula_anadirRegalo);

    btFoto.setOnClickListener(this);
    btGaleria.setOnClickListener(this);
    btIcono.setOnClickListener(this);
    btAnadir.setOnClickListener(this);
    paco.setOnClickListener(this);
    pedro.setOnClickListener(this);
    pepe.setOnClickListener(this);

    // Transiciones del cuadro de botones
    alpha = new AlphaAnimation(0.0f, 1.0f);
    alpha.setDuration(1000);
    alpha.setFillAfter(true); // Tell it to persist after the animation ends

    translate = new TranslateAnimation(Animation.RELATIVE_TO_SELF, 0,
            Animation.RELATIVE_TO_SELF, 0, Animation.RELATIVE_TO_SELF, 1,
            Animation.RELATIVE_TO_SELF, 0);
    translate.setDuration(500);

    animationSet = new AnimationSet(true);
    animationSet.addAnimation(alpha);
    animationSet.addAnimation(translate);

}

public void onResume() {
    super.onResume();
}

public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btCuadricula_anadirRegalo:
        cuadroBotones.setVisibility(RelativeLayout.INVISIBLE);
        cuadroBotones.startAnimation(animationSet);
        botonesDesplegados = true;
        break;
    case R.id.btCuadricula_foto:
        break;
    case R.id.btCuadricula_galeria:
        break;
    case R.id.btCuadricula_iconos:
        break;
    case R.id.LinearLayout1:
    case R.id.paco:
    case R.id.pepe:
    case R.id.pedro:
        cuadroBotones.setVisibility(RelativeLayout.GONE);
        break;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:32:11.240

您可以将 onClickListener 放在派生自 View 的任何内容上，例如，您可以在包含按钮的布局上执行此操作。如果布局中的视图本身没有 onClickListener 或从 onClick 返回 false，则单击事件将继续向下隧道，直到被布局的 onClick 捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:35:44.710

您可以在屏幕上添加一个 onclick 方法。例如，如果您在相对布局上使用框架视图，并将其置于其他所有内容之后，您当然可以从框架视图中获得 onclick。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T23:04:18.130

您的所有视图都位于线性布局中。您可以简单地为此线性布局添加一个 onClick 事件，当单击屏幕中的任何位置（其他视图除外）时，将引发该事件。

# audio-recording - 从 AudioContext 录制声音（Web Audio API）

> ID：14418530
> 
> 赞同：6
> 
> 时间：2013-01-19T20:28:59.543
> 
> 标签：audio-recording, html5-audio, web-audio-api, webkitaudiocontext

有没有办法记录发送到的音频数据`webkitAudioContext.destination`？

浏览器正在播放节点发送的数据，因此应该有某种方法将这些数据存储到 (.wav) 文件中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T17:47:25.670

目前，没有本地方法可以做到这一点，但正如 Max 在上面的评论中所说，Recorderjs 本质上是这样做的（它不会链接到目标，而是一个 ScriptProcessorNode，您可以将其他节点连接到，并记录其输入. 我在 Recorderjs 上构建了一个简单的音频文件记录器 - [https://github.com/cwilso/AudioRecorder](https://github.com/cwilso/AudioRecorder)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-20T18:19:36.270

正弦到作品文件：[https ://developer.mozilla.org/de/docs/Web/API/AudioContext/createMediaStreamDestination](https://developer.mozilla.org/de/docs/Web/API/AudioContext/createMediaStreamDestination)

> 在下面的简单示例中，我们创建了一个 MediaStreamAudioDestinationNode、一个 OscillatorNode 和一个 MediaRecorder（因此该示例目前仅适用于 Firefox。） MediaRecorder 设置为记录来自 MediaStreamDestinationNode 的信息。

Chrome 也支持它：[https ://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder)

# c++ - GLFW - 与 Visual Studio 2012 链接的问题

> ID：14418537
> 
> 赞同：1
> 
> 时间：2013-01-19T20:29:47.753
> 
> 标签：c++, linker, 64-bit, glfw

我在链接 GLFW 时遇到了一个大问题。我在该站点和其他站点上看到过多个帖子，其中已经查看了此类错误消息，但是当我尝试修复时，错误仍然相同。特别是错误是：

```
Error   1   error LNK2019: unresolved external symbol __imp_SystemParametersInfoA referenced in function _glfwPlatformInit  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural     Terrain\GLFW.lib(win32_init.obj) Procedural Terrain
Error   2   error LNK2001: unresolved external symbol __imp_SystemParametersInfoA   C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   3   error LNK2001: unresolved external symbol __imp_SystemParametersInfoA   C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_enable.obj)   Procedural Terrain
Error   4   error LNK2019: unresolved external symbol __imp_DispatchMessageA referenced in function _glfwPlatformPollEvents C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   5   error LNK2019: unresolved external symbol __imp_PeekMessageA referenced in function _glfwPlatformPollEvents C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   6   error LNK2019: unresolved external symbol __imp_GetMessageTime referenced in function translateKey  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   7   error LNK2019: unresolved external symbol __imp_WaitMessage referenced in function _glfwPlatformWaitEvents  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   8   error LNK2019: unresolved external symbol __imp_DefWindowProcA referenced in function windowProc    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   9   error LNK2019: unresolved external symbol __imp_PostQuitMessage referenced in function windowProc   C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural      Terrain
Error   10  error LNK2019: unresolved external symbol __imp_RegisterClassA referenced in function registerWindowClass   C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   11  error LNK2019: unresolved external symbol __imp_UnregisterClassA referenced in function _glfwPlatformCloseWindow    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   12  error LNK2019: unresolved external symbol __imp_CreateWindowExA referenced in function createWindow C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   13  error LNK2019: unresolved external symbol __imp_DestroyWindow referenced in function destroyWindow  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   14  error LNK2019: unresolved external symbol __imp_ShowWindow referenced in function _glfwPlatformIconifyWindow    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   15  error LNK2019: unresolved external symbol __imp_SetWindowPos referenced in function _glfwPlatformOpenWindow C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   16  error LNK2019: unresolved external symbol __imp_BringWindowToTop referenced in function setForegroundWindow C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   17  error LNK2019: unresolved external symbol __imp_CharUpperA referenced in function translateKey  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   18  error LNK2019: unresolved external symbol __imp_CharUpperW referenced in function translateKey  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   19  error LNK2019: unresolved external symbol __imp_SetFocus referenced in function _glfwPlatformOpenWindow C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   20  error LNK2019: unresolved external symbol __imp_GetAsyncKeyState referenced in function _glfwPlatformPollEvents C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   21  error LNK2019: unresolved external symbol __imp_GetKeyboardState referenced in function translateChar   C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   22  error LNK2019: unresolved external symbol __imp_ToAscii referenced in function translateChar    C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   23  error LNK2019: unresolved external symbol __imp_ToUnicode referenced in function translateChar  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   24  error LNK2019: unresolved external symbol __imp_MapVirtualKeyA referenced in function translateKey  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   25  error LNK2019: unresolved external symbol __imp_SetCapture referenced in function _glfwPlatformHideMouseCursor  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   26  error LNK2019: unresolved external symbol __imp_ReleaseCapture referenced in function _glfwPlatformShowMouseCursor  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain
Error   27  error LNK2019: unresolved external symbol __imp_GetForegroundWindow referenced in function setForegroundWindow  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\Procedural Terrain\GLFW.lib(win32_window.obj)   Procedural Terrain 
```

一直到错误 50，然后...

```
Error   51  error LNK1120: 46 unresolved externals  C:\Users\Asher\documents\visual studio 2012\Projects\Procedural Terrain\x64\Debug\Procedural Terrain.exe    Procedural Terrain 
```

我看到这些错误并注意到最后的“win32”。我正在使用 64 位系统、64 位项目（由解决方案平台声明）和 GLFW 的 64 位二进制下载。GLFW 常见问题页面描述的“未解析的外部符号”错误表明链接问题是导致此问题的原因。但是，我相信我已经为静态库正确链接了所有内容。这是我所做的。

1.  在 Project>Properties>Configuration Properties>Linker>Input>Additional Dependencies 下，我添加了 GLFW.lib opengl32.lib 和 glu32.lib

2.  在 VC++ 目录>包含目录下，我添加了 C:\Users\Asher\glfw-2.7.7.bin.WIN64\glfw-2.7.7.bin.WIN64\include 。

3.  在 VC++ 目录>库目录下，我添加了 C:\Users\Asher\glfw-2.7.7.bin.WIN64\glfw-2.7.7.bin.WIN64\lib-msvc110 。

我没有碰过 dll，因为我更喜欢静态库。另外，这是我的代码

```
#include "Header.h"

using namespace std;
int main(int argc, char **argv){
//Initializes non-window dependent sources.
 if (!glfwInit())
{
    cout<< "Failed to initialize GLFW";
    return -1;
}
 //Sets window parameters
glfwOpenWindow(0, 0, 0, 0, 0,
           0, 8, 0, GLFW_FULLSCREEN);
//Window name
glfwSetWindowTitle("The GLFW Window");
//Terminates GLFW.
glfwTerminate();
return 0;
} 
```

标题包含

```
#include <IOstream>
#include <GL\glfw.h> 
```

到目前为止，关于该主题的任何主题都没有任何帮助，我很困惑！对此问题的解决方案将不胜感激。- Asher（从我的文件路径中可以看出 =D）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T05:11:53.730

如果其他人偶然发现类似问题，简要概述如何调试此类问题：

您会注意到的第一件事是所有链接器错误都指向 win32 库中的函数。因此，我们首先尝试直接调用其中一个函数，看看它是否有任何改变。

正如预期的那样，这并没有改变任何东西，这意味着我们在链接时遇到了问题`user32.lib`。由于默认的 Visual Studio 项目不应该有这个问题，这要么意味着完整的安装有问题，要么只是特定的解决方案。创建一个新的解决方案解决了这个问题，但如果不是，接下来就是重新安装 Visual Studio。

# qt - Modal behavior between applications

> ID：14418541
> 
> 赞同：1
> 
> 时间：2013-01-19T20:29:58.713
> 
> 标签：qt, modal-dialog, parent-child

I have 2 Qt applications. One MDI app and one dialog based app. The dialog based app is started by the other one. I try to simulate a modal parent-child behavior between the applications. I have a solution, that blocks the user events in the mdi app and handles the hide event in the dialog based app, but this solution blocks showing all other applications which are opened. How could I solve this problem?

Thanks

# c# - 正确的 EventHandler 告诉我记事本何时关闭

> ID：14418543
> 
> 赞同：3
> 
> 时间：2013-01-19T20:30:03.330
> 
> 标签：c#

我有以下内容：

```
class Program {

    static void Main(string[] args) {

        Process pr;
        pr = new Process();
        pr.StartInfo = new ProcessStartInfo(@"notepad.exe");
        pr.Disposed += new EventHandler(YouClosedNotePad);
        pr.Start();

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }
    static void YouClosedNotePad(object sender, EventArgs e) {
        Console.WriteLine("thanks for closing notepad");
    }

} 
```

当我关闭记事本时，我没有收到我希望收到的消息 - 如何修改以使关闭记事本返回到控制台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:33:40.130

您需要两件事 -[启用引发事件](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enableraisingevents.aspx)和订阅[退出](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)事件：

```
 static void Main(string[] args)
    {            
        Process pr;
        pr = new Process();
        pr.StartInfo = new ProcessStartInfo(@"notepad.exe");
        pr.EnableRaisingEvents = true; // first thing
        pr.Exited += pr_Exited; // second thing
        pr.Start();

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();

        Console.ReadKey(); 
    }

    static void pr_Exited(object sender, EventArgs e)
    {
        Console.WriteLine("exited");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:32:16.367

您想使用[Exited](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)事件而不是 Disposed：

```
pr.Exited += new EventHandler(YouClosedNotePad); 
```

您还需要确保[EnableRaisingEvents](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.enableraisingevents.aspx)属性设置为 true：

```
pr.EnableRaisingEvents = true; 
```

# redirect - 我需要为我的应用程序创建一个重定向 URI，并在验证测验访问时使用它。我该怎么做？

> ID：14418546
> 
> 赞同：0
> 
> 时间：2013-01-19T20:30:27.330
> 
> 标签：redirect, oauth, uri

谁能指出我正确的方向？我尝试使用不同的网址，包括我自己的一些网址，但都失败了。我真的不明白如何获得正确的 URI。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T09:58:22.800

Redirect_uri 用于您的 APP 验证来自服务器的响应（例如令牌），
您可以在创建 APP 时设置您的 redirect_uri，
它可以是任何 URL，甚至是 www.baidu.com 或 www.google.com ，
但注意：**您在APP中使用的URL，必须与您创建新APP时设置的一致。**

# joomla - Joomla 2.5 通过代码添加新模块实例

> ID：14418547
> 
> 赞同：0
> 
> 时间：2013-01-19T20:30:33.703
> 
> 标签：joomla, joomla2.5

我想通过传递必要的参数通过代码创建一个模块的实例。即，我想通过代码添加，而不是从管理界面模块管理器添加。怎么做？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:06:12.517

首先，您的问题并不完全清楚。

我猜你想通过代码而不是模板页面中默认的包含模块选项来添加模块的东西。

如果是这种情况，您可以使用以下代码。

```
 $document = &JFactory::getDocument();
     $renderer = $document->loadRenderer('module');

     $Module = &JModuleHelper::getModule('mod_fmDataGrid');

     $Params = "param1=bruno\n\rparam2=chris";
     $Module->params = $Params;
     echo $renderer->render($Module); 
```

该代码将帮助您在任何组件或模块中呈现模块。您也可以通过代码传递模块参数。

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T07:19:49.857

嗨，你可以试试这个来创建 Module 的实例

```
$document = &JFactory::getDocument();
$renderer = $document->loadRenderer('module');
$params = array('style' => $style);
echo $renderer->render(JModuleHelper::getModule('mod_login'), $params); 
```

在这里，我以 mod_login 模块作为示例。您可以在那里使用您选择的模块。

# c# - 更改 Kendo UI 上传小部件的文本

> ID：14418548
> 
> 赞同：12
> 
> 时间：2013-01-19T20:30:46.887
> 
> 标签：c#, asp.net-mvc, kendo-ui

我想将默认文本更改为`Select`更适合上下文的内容。我正在使用基于`HtmlHelper`该类构建的 Kendo Fluent API，但我没有找到一种方法来更改基本功能和本地化中的文本。

我的代码非常简单，如下所示：

```
@(Html.Kendo().Upload()
      .Name("FilesToUpload")
) 
```

在这个[线程](http://www.kendoui.com/forums/ui/upload/is-there-a-way-to-change-the-default-select-text-on-the-button.aspx)中有一个关于更改文本的 jQuery 函数的建议，如果我使用 Upload 小部件的 javascript API，它可以完美运行，但当我通过`Html.Kendo().Upload`.

使用 javascript API 更好的是：

```
localization: {
    select: 'any text'
} 
```

您可以使用的设置，但这对我也没有帮助。

如果有人以前遇到过这个问题并解决了它，我将非常感谢他的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-22T12:52:22.990

我刚刚在这个[线程](http://www.kendoui.com/forums/ui/upload/changing-the-default-select-text-on-the-button-asp-net-mvc.aspx)的剑道论坛上收到了一个答案。解决方案非常简单，但该功能只是在流畅的界面中隐藏了一点：

```
@(Html.Kendo().Upload()
      .Name("FilesToUpload")
      .Messages( m => m.Select("Select unit bulk upload file"))
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-18T23:03:18.590

对于 AngularJS 用法，这是一个使用本地化的示例，请注意 k-localization 属性：

```
<input name="Images" type="file" kendo-upload
        k-multiple="true"
        k-upload="inventoryProductDetail.uploadImage"
        k-success="inventoryProductDetail.uploadedImage"
        k-async="{ saveUrl: '/API/UploadFile/.json', autoUpload: true }"
        k-localization="{ select: 'SELECT ME!' }" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T23:09:22.017

不幸的是，您必须遵循该[帖子上](http://www.kendoui.com/forums/ui/upload/is-there-a-way-to-change-the-default-select-text-on-the-button.aspx)的建议。以下是如何在您的情况下执行此操作。

```
@(Html.Kendo().Upload()
      .Name("FilesToUpload")
)
<script type="text/javascript">
    $(document).ready(function () {
        $("#FilesToUpload").closest(".k-upload").find("span").text("my text");
    });
</script> 
```

我尽量不要认为剑道控制会让我达到 100%，因为那样我会感到失望。相反，假设他们会让你快速到达你想去的地方的 90%。然后使用jQuery和一些侦探工作来完善。

# django - 流浪问题：找不到盒子“lucid64”

> ID：14418549
> 
> 赞同：-1
> 
> 时间：2013-01-19T20:30:50.153
> 
> 标签：django, virtualbox, vagrant

我不确定我做错了什么。我正在尝试为我的 django 项目设置 vagrant 和 virtualbox。我按照说明修改了 vagrantfile

我收到以下错误：[在这个网站上](http://blog.smalleycreative.com/tutorials/setup-a-django-vm-with-vagrant-virtualbox-and-chef/)

> Vagrant 的配置有问题。错误消息打印如下：
> 
> vm: * 找不到盒子 'lucid64'。

我正在使用MAC OS，请帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:15:49.483

一个“vagrant box add lucid64 [http://files.vagrantup.com/lucid64.box](http://files.vagrantup.com/lucid64.box) ”成功了！谢谢。

# ruby-on-rails - 如何使用选择或集合选择？

> ID：14418550
> 
> 赞同：0
> 
> 时间：2013-01-19T20:30:53.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

本质上，我有以下内容，我试图在我的报价单中使用 collection_select 将 company.addresses 关系中的地址分配给我的报价模型中的 has_one :address 字段。在 IRB 中，我可以简单地 quote1.address = company1.addresses.first 等，quote_id 列将在地址实例中填写。

现在，这个数据库设置可能看起来很简单，并且可能是实现这些关系的更好方法，但是由于可寻址类型和字段更改为引用关系，多态地址给我带来了问题，从而脱离了公司地址关系。无法弄清楚如何克隆它们。但是，无论如何，有没有人建议如何使用下面的数据库设置在我的报价单中完成我的第一个问题？

```
class Address < ActiveRecord::Base
  belongs_to :company
  has_many :quotes
  attr_accessibles ...
  .....
end

class Company < ActiveRecord::Base
  has_many :addresses
  accepts_nested_attributes_for :addresses
  has_many :quotes
  attr_accessibles ...
  ....
end

class Quote < ActiveRecord::Base
  belongs_to :address
  belongs_to :company
  accepts_nested_attributes_for :address
  ... attr_accessibles ....
  ....
end 
```

你们会推荐报价和地址之间的连接表吗？并保持公司和地址一对多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T00:52:30.897

制作另一个表格，将您的报价与地址连接起来。

创建一个新的脚手架。

```
$ rails g scaffold NewTable quote_id:integer address_id:integer 
```

用此代码替换表单。我无法测试它，但它应该相当准确。

```
<%= form_for @new_table do |f| %>
  <%= f.hidden_field(:quote_id, value: @quote.id) %>
  <%= f.collection_select(:new_table, :address_id, Address.all, :id, :name, :prompt => true) %>
<% end %> 
```

您可以在任何需要的地方接受_nested_attributes_for 这个 NewTable。

# android - ListView 中最后一项的 ImageViews 的奇怪行为

> ID：14418552
> 
> 赞同：1
> 
> 时间：2013-01-19T20:31:02.353
> 
> 标签：android, android-listview, android-imageview

我有一个带有自定义适配器的 ListView。在每一行中都有一个 ImageView，它只在某些约束下可见。问题是，如果第一行有这个 ImageView 可见，那么最后一行也是如此，反之亦然。

这是`getView()`我的适配器的代码。

```
public View getView(int position, View view, ViewGroup parent) {
    if (view == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflater.inflate(R.layout.row_idea, null);
    }

    Idea idea = mIdeas.get(position);

    if (idea != null) {
        ImageView imgAlarm = (ImageView) view
                .findViewById(R.id.imgAlarm_rowIdea);
        if (idea.getTimeReminder() != null)
            imgAlarm.setVisibility(ImageView.VISIBLE);

        TextView lblTitle = (TextView) view
                .findViewById(R.id.lblTitle_rowIdea);
        lblTitle.setText(idea.getTitle());

        TextView lblDescription = (TextView) view
                .findViewById(R.id.lblDescription_rowIdea);
        lblDescription.setText(idea.getDescription());
    }
    return view;
} 
```

`mIdeas`是一个`ArrayList`包含所有要显示在 中的数据`ListView`。 `imgAlarm`是`ImageView`我上面说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:34:34.070

如果条件不满足，您将希望恢复可见性状态，`ImageView`这样您就不会遇到潜在的回收视图问题（它可能`ImageView`已经可见并在不应该出现时出现）：

```
if (idea.getTimeReminder() != null) {
     imgAlarm.setVisibility(ImageView.VISIBLE);
} else {
    imgAlarm.setVisibility(ImageView.INVISIBLE); // or GONE
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:34:57.553

改变

```
if (idea.getTimeReminder() != null)
            imgAlarm.setVisibility(ImageView.VISIBLE); 
```

到

```
if (idea.getTimeReminder() != null)
            imgAlarm.setVisibility(ImageView.VISIBLE);
else
            imgAlarm.setVisibility(ImageView.GONE); 
```

这里发生的是适配器正在“回收”视图。因此，在您在测试中看到的情况下，最后一个视图和第一个视图实际上是同一个实例。

# flex-lexer - 使用 flex，当到达 EOF 并通过 YY_INPUT 提供输入时，如何保留 yytext 内容？

> ID：14418560
> 
> 赞同：1
> 
> 时间：2013-01-19T20:32:01.023
> 
> 标签：当flex-lexer, flex-lexer

[当flex-lexer](/questions/tagged/flex-lexer "显示标记为“flex-lexer”的问题")生成的扫描器遇到文件结尾时，它会丢失之前规则中调用`yytext[]`留下的内容。`yymore()`这种错误行为只有在`YY_INPUT()`重新定义时才会发生。

这可能是 flex 中的一个错误，但似乎缺少一些东西——flex 扫描器定义在重新定义`YY_INPUT()`.

我已经在 Ubuntu 12.04.1 和 Windows 7 上使用 flex 2.5.35 进行了测试。在这两个系统上，`yytext[]`如果要扫描的文本是通过`YY_INPUT()`.

下面是一个`flex-test.l`用于读取和打印 HTML 注释的示例 flex 扫描器 ( )，即使最后一条注释未终止。当它的输入是通过 提供时它可以正常工作`yy_scan_string()`，但是当它的输入是由 的显式定义提供时它会失败`YY_INPUT()`。在示例代码中，`#if`'s 用于在`yy_scan_string()`和`YY_INPUT()`实现之间进行选择。具体来说，预期输出：

```
Begin comment: <!--
More comment:  <!--incomplete
EOF comment:   <!--incomplete 
```

如果扫描仪是使用构建的，则会出现

```
flex --nounistd flex-test.l && gcc -DREDEFINE_YY_INPUT=0 lex.yy.c 
```

但是如果扫描仪是使用

```
flex --nounistd flex-test.l && gcc -DREDEFINE_YY_INPUT=1 lex.yy.c 
```

（将**=0**更改为**=1**），然后出现此错误输出：

```
Begin comment: <!--
More comment:  <!--incomplete
EOF comment: 
```

请注意最后一行输出中没有任何注释文本。

这是示例代码：

```
/* A scanner demonstrating bad interaction between yymore() and <<EOF>>
 * when YY_INPUT() is redefined: specifically, yytext[] content is lost. */

%{
#include <stdio.h>

int yywrap(void) { return 1; }

#if REDEFINE_YY_INPUT

  #define MIN(a,b) ((a)<(b) ? (a) : (b))

  const char *source_chars;
  size_t source_length;

  #define set_data(s) (source_chars=(s), source_length=strlen(source_chars))

  size_t get_data(char *buf, size_t request_size) {
    size_t copy_size = MIN(request_size, source_length);
    memcpy(buf, source_chars, copy_size);
    source_chars += copy_size;
    source_length -= copy_size;
    return copy_size;
  }

  #define YY_INPUT(buf,actual,ask) ((actual)=get_data(buf,ask))

#endif

%}

%x COMM

%%

"<!--"          printf("Begin comment: %s\n", yytext); yymore(); BEGIN(COMM);
<COMM>[^-]+     printf("More comment:  %s\n", yytext); yymore();
<COMM>.         printf("More comment:  %s\n", yytext); yymore();
<COMM>--+\ *[>] printf("End comment:   %s\n", yytext); BEGIN(INITIAL);
<COMM><<EOF>>   printf("EOF comment:   %s\n", yytext); BEGIN(INITIAL); return 0;

.               printf("Other:         %s\n", yytext);

<<EOF>>         printf("EOF:           %s\n", yytext); return 0;
%%

int main(int argc, char **argv) {
  char *text = "<!--incomplete";

  #if REDEFINE_YY_INPUT
    set_data(text);
    yylex();
  #else
    YY_BUFFER_STATE state = yy_scan_string(text);
    yylex();
    yy_delete_buffer(state);
  #endif
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T05:35:32.207

从那时起，这个问题可能一直存在，可能永远存在。基本上，当 flex 从其当前缓冲区中获取 EOF 时，它会处理最后一个令牌，然后重新初始化缓冲区，这实际上将当前令牌扔掉，即使它已经用`yymore()`. （它实际上用 s 初始化前两个字符`NUL`，但这足以破坏它。）然后它调用`yywrap()`，它可以选择提供另一个缓冲区（文件）。

这种行为通常是无害的，因为通常不允许令牌跨越两个不同的输入文件，但有时有这个选项会很好。不过，这还不够好，以至于任何人都费心在 flex 存在的四分之一世纪中修复它。

`yytext`不幸的后果是你得到一个 之后就不能使用了`EOF`，因为即使没有更多的输入文件，缓冲区重置已经完成了。（`yyleng`也不对；它还没有被重置，并且它也随着`NUL`触发 EOF 的 增加。）

在实现中存在一个 hack，`yy_scan_string`它将新创建的缓冲区的`yy_fill_buffer`标志设置为 0，这意味着不应尝试重新填充缓冲区。这可以防止缓冲区重置，但不能保护`yyleng`，这仍然是不正确的。不过，我会考虑保留`yytext`纯粹的运气。

如果 flex 正在被积极维护，我建议在 flex 手册中添加一条在规则中未定义的注释，`yytext`甚至可能考虑修复它以允许跨越输入缓冲区（或记录它没有的事实） .`yyleng``<<EOF>>``yymore()`

简而言之，您有两种选择：

1）只需使用`yy_scan_string`或`yy_scan_buffer`（带有所有适当的警告），并希望没有人恢复允许您查看规则`yytext`的hack。`<<EOF>>`我不知道这种希望是如何面向未来的，但没有什么能迫使你升级。

但你可能会更好：

2）使用自己的缓冲区来保存累积的令牌字符串。

选项（2）实际上并不那么昂贵；如果标记字符串很大，它可能比使用更好，`yymore`因为 flex 确实不是为处理大型标记而设计的。对于可能相当大的注释，您可能会发现维护自己的缓冲区会快得多，而且更可预测。

# python-3.x - Pyglet 1.2alpha1 不适用于 Python 3.3.0

> ID：14418563
> 
> 赞同：10
> 
> 时间：2013-01-19T20:32:08.700
> 
> 标签：python-3.x, pyglet

我不能从 Python 3 使用 Pyglet 1.2alpha1（它应该能够在 Py3 下运行）。

我按照说明正确安装了它，但它不能在 Py3 上运行，但我知道我安装了所有东西，因为我可以从 Python 2.7 使用它。

每次我尝试使用解释器导入小猪时，都会收到此错误：

```
>>> import pyglet

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "./pyglet/__init__.py", line 276
    print '[%d] %s%s %s' % (thread, indent, name, location)
                   ^
SyntaxError: invalid syntax 
```

阅读错误消息很明显，错误出现在以 Python 2 样式（`print foo`而不是`print(foo)`）编写的打印中。

所以我的问题是：真的可以在 Python 3 下运行 pyglet 吗？

我知道有人正确使用它，那我该怎么办？会不会是网站上传的Pyglet版本不对？我应该用2to3转换它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T19:01:48.267

我已经让 Pyglet 1.2alpha1 在 Windows 8 上使用 Python 3.3.2 工作。（linux上的方法应该是一样的，只是文件夹路径不同）

问题是，当您运行`python setup.py install`时，在看到后面的前几行之后，它似乎会挂起很长时间`"skipping implicit fixer"`。如果您随后关闭终端/bash 窗口（从而中止安装过程）然后再次运行 setup.py，它将跳过 2to3 转换并简单地安装 py2 源文件。

明显“挂起”的原因是 2to3 转换文件只需要一段时间，但如果等待的时间足够长，转换就会发生，它会正确转换并安装模块。

如果您已经安装过一次，则必须删除一些文件夹才能正常安装。

首先，删除1.2alpha1 源文件夹中的**build**`%unzip_folder%\pyglet-1.2alpha1\build`文件夹：（ 其中 unzip_folder 是您解压 Pyglet 1.2alpha1 源的文件夹）

还要从 python Lib中删除**pyglet**`%python%\Lib\site-packages\pyglet`文件夹：（ 其中 %python% 是 python 安装文件夹，在 Windows 上默认为 C:\Python33）

然后运行`python setup.py install`。它应该经过所有步骤（复制文件以构建，使用 2to3 转换，最后字节编译到 Lib 子文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T13:14:48.543

Pyglet 1.2 alpha 只是“python3 就绪”，即它不能与 python3 一起运行，但必须通过 2to3 进行转换。（转换后它将不再与 python2 一起运行。）

要将 pyglet 与 python2 和 python3 项目一起使用，我总是将 pyglet 复制到项目的子文件夹中（如果我想将其与 python3 一起使用，则将其转换为 2to3）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T10:43:36.077

我有同样的问题：**Windows 8**，**Python 3.3.2**和**Pyglet 1.2alpha1**。
我环顾四周，但直到现在还没有找到解决方案。

我安装了**2.7.5** Python 版本，将之前的*Python.exe*文件（3.3.2 版本之一）更改为*Python33.exe*并相应地调整了 PATH 环境变量。然后我在 2.7 版本中安装了 Pyglet **1.1.4**（从命令行，可执行文件也有更多错误）。

我使用 Eclipse，所以我在 PyDev 设置中添加了两个 Interpeter。如果我使用 Python27 解释器，现在一切正常。

# wpf - WPF - 将数据网格放入更多列

> ID：14418568
> 
> 赞同：0
> 
> 时间：2013-01-19T20:32:38.543
> 
> 标签：wpf, layout, datagrid, grid

我在 WPF 中有一个窗口，我有一个数据网格，在数据网格下我想有按钮。

我定义了一个这样的父网格：

```
 <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="50*" />
            <RowDefinition Height="50*" />         
        </Grid.RowDefinitions> 
```

所以在第一行我想有一个数据网格，它将在所有三列中，在网格下我想在每一列中都有一个按钮。

如果我这样做：

```
<DataGrid Grid.Row="0" Grid.Column="0"
<Button Grid.Row="1" Grid.Column="0" 
<Button Grid.Row="1" Grid.Column="1"  
<Button Grid.Row="1" Grid.Column="2" 
```

最后两个按钮显然位于数据网格的右侧。如何在数据网格下拥有所有三个按钮？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:51:25.677

添加 Grid.ColumnSpan="3"：

```
<DataGrid Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" 
```

# c++ - 使用 c++11 占位符作为 lambda？

> ID：14418569
> 
> 赞同：7
> 
> 时间：2013-01-19T20:33:01.150
> 
> 标签：c++, boost, c++11, lambda, placeholder

在尝试 C++11 的新特性时，我发现 std::placeholders::_1 不能直接用作 lambda：

```
#include <algorithm>
#include <functional>
// #include <boost/lambda/lambda.hpp>

using namespace std;
// using boost::lambda::_1;
using std::placeholders::_1;

int main()
{
  int a[] = {1,2,3,4,5};

  transform(a, a+5, a, _1 * 2);
} 
```

Clang 3.3 错误：

```
tmp $ clang -std=c++11 -stdlib=libc++ -lc++ test.cpp
test.cpp:16:27: error: invalid operands to binary expression ('__ph<1>' and 'int')
  transform(a, a+5, a, _1 * 2); 
```

如果我将其更改为使用 Boost 的版本，它编译得很好。

为什么这不适用于标准版本？有没有办法让它工作或者我必须在这里使用丑陋的 lambda？

```
transform(a, a+5, a, [](int i){return i*2;}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:39:14.973

Boost 实际上有许多`_1`占位符。来自 Boost.Bind 的那些（或多或少并入 C++11）、来自 Boost.Lambda 的那些，甚至来自 Lambda 的继任者 Boost.Phoenix 的那些。

Lambda 和 Phoenix 版本是*唯一*可用于自行创建函子的占位符。Boost.Bind`_1`占位符不能，这就是标准化的。Lambda 和 Phoenix 是将表达式转换为函数的方法；Bind 只是一个函数绑定和参数调整系统。

# python - object.__new__() 不带参数

> ID：14418574
> 
> 赞同：4
> 
> 时间：2013-01-19T20:33:34.180
> 
> 标签：python

好的，所以我创建了一个用户定义的类：

```
class Drinker:
        def __init__(self, name, age):
                self.name = name
                self.age = age
        def canYouDrink(self):
                if self.age > 20:
                        print('yes')
                else:
                        print('no') 
```

在我的命令行窗口中，我做了：

```
from drinker import Drinker
dan = Drinker("Dan", 21) 
```

然后它给了我这个`object.__new__() takes no parameters`错误信息。我是否错误地定义了我的构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:36:20.640

您的代码没有任何问题。尝试关闭并重新打开交互式会话以确保模块实际上正在重新加载。如果做不到这一点，请确保从正确的位置加载模块（如果您有多个副本`drinker.py`）。

# apache-flex - Flex - 如何获取当前打开的 Air Window 标题列表（或检查特定窗口标题）？

> ID：14418577
> 
> 赞同：0
> 
> 时间：2013-01-19T20:33:45.450
> 
> 标签：apache-flex, air, flash-builder

在我的 Flex (Flash Builder 4.6) 应用程序中，我通过以下方式打开一个 Adob​​e AIR“窗口”对象：

我的窗口对象 = 新的我的窗口（）；// 这是一个 "" myWindowObject.title="自定义窗口标题"; 我的窗口对象。打开；

在应用程序中，用户可以打开多个窗口。我需要防止用户两次打开同一个窗口。因此，我要么需要能够检查当前打开的具有特定标题的窗口是否存在，要么获取所有打开的窗口的列表，然后我可以查看该列表以查看它是否已经打开。

如何获取窗口标题列表，或检查具有特定标题的窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:09:06.723

Air 框架提供了一个包含所有打开的窗口的数组：

`FlexGlobals.topLevelApplication.nativeApplication.openedWindows;`

您可以遍历这些并检查每个标题并按照您的意愿进行操作。

# php - 点击事件的 PHP 脚本错误

> ID：14418580
> 
> 赞同：0
> 
> 时间：2013-01-19T20:34:05.560
> 
> 标签：php, jquery, wordpress

我正在使用 wordpress 作为我的 cms，并且我正在开发一个投票系统。我希望此代码仅在单击事件上运行，但在每次页面加载时运行

我怎样才能让它在点击时运行

```
<script>
function addvote(){
 alert("<?PHP hello(); ?>");
}
 < /script>

 <?PHP
FUNCTION hello(){
   $postid="79";
   $current_votes = get_post_meta($postid, "votes", true);
$new_votes = intval($current_votes) - 1;
update_post_meta($postid, "votes", $new_votes);
$return = $new_votes>1 ? $new_votes." votes" : $new_votes." vote";
echo $return;
 }

?>

<button onclick="addvote()">Vote Now</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:42:42.810

你不能像那样从 JavaScript 调用 PHP。你需要 AJAX：[http ://en.wikipedia.org/wiki/Ajax](http://en.wikipedia.org/wiki/Ajax)

此外，使用不显眼的 JavaScript - 在您的脚本代码中附加事件处理程序，而不是在 HTML 中。如何使用 jQuery 实现您可能想要的基本示例：

```
// In your HTML page:
<scipt type="text/javascript">
    $(document).ready(function() {
        $('button').click(function() {
            $.get("/hello.php", function(data) {
                alert(data);
            });
        });
    });
</script>

// In hello.php:
<?php
function hello() {
    // ...
    echo $return;
}

hello();
?> 
```

您需要了解服务器端处理和客户端处理之间的区别。您的所有 PHP 代码都会在每个页面请求的服务器上执行。然后将结果发送到您的浏览器，浏览器会显示它们。现在您的页面中可以有 JavaScript 代码，在页面加载后由浏览器执行。为了在单击按钮（或类似操作）时调用 PHP 代码，此客户端代码需要向服务器发出新的 HTTP 请求——这就是 AJAX 的用途。这个新请求将触发另一个 PHP 脚本的执行。结果在完成后会被传输回 JavaScript 函数，然后可以用来做一些事情，比如向页面添加额外的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:50:00.873

当您请求此页面时，PHP 解析器将遇到`hello()`函数，它将运行它，因此它将`hello()`在 javascript`alert()`函数中打印函数的返回值，因此输出将是，（假设返回值为 1）：

```
<script>
    alert('1');
</script> 
```

正如@lethal-guitar 提到的，您需要`hello()`使用 AJAX 请求调用该函数。

# json - 在 Google App Engine（Go 编程语言）中使用 JSON 请求

> ID：14418581
> 
> 赞同：2
> 
> 时间：2013-01-19T20:34:08.343
> 
> 标签：json, google-app-engine, go

我正在尝试使用 Go 将 JSON 格式的请求从我的应用程序的 Javascript 前端发送到 App Engine。如何将请求解析为处理程序中的结构？

例如，我的请求是带有请求有效负载的 POST

```
{'Param1':'Value1'} 
```

我的结构是

```
type Message struct {
    Param1 string
  } 
```

和变量

```
var m Message 
```

应用引擎文档中的示例使用 FormValue 函数来获取标准请求值，当您使用 json 时，这似乎不起作用。

一个简单的例子将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T20:56:15.297

官方文档还不错，见：

[http://golang.org/doc/articles/json_and_go.html](http://golang.org/doc/articles/json_and_go.html)

它提供了用于编码/解码为已知结构（您的示例）的示例，还展示了如何使用反射来实现它，类似于您通常在更多脚本语言中的实现方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T12:41:53.270

You could send the data in a form field, but typically you'll just read it from the `response.Body`. Here's a minimal jQuery & App Engine example:

```
package app

import (
    "encoding/json"
    "fmt"
    "io/ioutil"
    "net/http"
    "strings"
)

func init () {
    http.HandleFunc("/", home)
    http.HandleFunc("/target", target)
}

const homePage =
`<!DOCTYPE html>
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
</head>
<body>
    <form action="/target" id="postToGoHandler">
    <input type="submit" value="Post" />
    </form>
    <div id="result"></div>
<script>
$("#postToGoHandler").submit(function(event) {
    event.preventDefault();
    $.post("/target", JSON.stringify({"Param1": "Value1"}),
        function(data) {
            $("#result").empty().append(data);
        }
    );
});
</script>
</body>
</html>`

func home(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, homePage)
}

type Message struct {
    Param1 string
}

func target(w http.ResponseWriter, r *http.Request) {
    defer r.Body.Close()
    if body, err := ioutil.ReadAll(r.Body); err != nil {
        fmt.Fprintf(w, "Couldn't read request body: %s", err)
    } else {
        dec := json.NewDecoder(strings.NewReader(string(body)))
        var m Message
        if err := dec.Decode(&m); err != nil {
            fmt.Fprintf(w, "Couldn't decode JSON: %s", err)
        } else {
            fmt.Fprintf(w, "Value of Param1 is: %s", m.Param1)
        }
    }
} 
```

# php - 命名空间和自动加载如何在基于 Linux 的系统 PHP 中工作？

> ID：14418582
> 
> 赞同：0
> 
> 时间：2013-01-19T20:34:16.673
> 
> 标签：php, autoload, autoloader

所以这是我的代码：

```
<?php

function __autoload($className) {
    $paths = explode(PATH_SEPARATOR, get_include_path());
    $file = $className . '.php';
    foreach ($paths as $path) {
        $combined = $path . DIRECTORY_SEPARATOR . $file;
        if (file_exists($combined)) {
            echo $combined;
            include($combined);
            return;
        }
    }
}

$string = 'Koray';
$string = Framework\StringMethods::_normalize($string);
echo $string;
?> 
```

上述文件称为 index.php。在 Framework 目录下的文件夹中有一个名为 StringMethods.php 的文件。

所以我的问题在这里 audoloader autoloads: .\Framework\StringMethods.php 因为我打电话：

$string = 框架\字符串方法。

所以 $file 变量实际上是= FrameWork\StringMethods。而我所做的是在末尾添加 .php 和开头的 .\ 。

但是 Framework\StringMethods 在 Linus 系统中会如何表现呢？目录分隔符不是Linux中的“/”吗？

所以它会尝试包括：./Framework\StringMethods.php

如果正确，如何更好地编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:40:44.130

你可以试试下面的代码吗？请注意文件夹/文件名称，因为 unix 区分大小写。

```
define('ROOT_PATH', __DIR__ . DIRECTORY_SEPARATOR);

function __autoload($className) {
    $path = str_replace('\\', DIRECTORY_SEPARATOR, $className);
    $file = ROOT_PATH . $path . '.php';
    if (is_file($file)) {
        require_once($file);
    }
}

$string = 'Koray';
$string = \Framework\StringMethods::_normalize($string);
echo $string; 
```

# javascript - 使用 AJAX 调用同时加载 HTML 片段

> ID：14418584
> 
> 赞同：1
> 
> 时间：2013-01-19T20:34:25.940
> 
> 标签：javascript, jquery, html, ajax

我有一个网站，我在其中使用 jQuery AJAX 调用来加载 HTML 片段作为初始化步骤。只有当我的所有 HTML 片段都加载完毕后，我才开始渲染我的网站。我的问题是最好的方法是什么？我如何有效地知道我的所有 ajax 请求何时完成（也就是说，我的所有 HTML 片段都准备好了），如果它们同时运行？有没有一种方法可以在我的所有并发 ajax 作业完成后启动回调函数？我目前的解决方案是在上一个 AJAX 作业完成时启动下一个 AJAX 作业......但是这个解决方案会导致串行执行，并且代码非常混乱......

还有其他方便的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:36:39.080

确实。当您使用 jQuery 时，您可以利用内置的[deferred 和 promises](http://api.jquery.com/category/deferred-object/)。

您还可以在 Internet 上找到[几篇](https://www.google.com/search?q=jquery%20deferred&oq=jquery%20deferred)解释这种非常有用的模式的文章。

# sql - SQL 汇总和平均

> ID：14418592
> 
> 赞同：2
> 
> 时间：2013-01-19T20:35:12.673
> 
> 标签：sql, sql-server, stored-procedures, average, sqlgeography

我对 SQL Server、.NET 和 MVC 3/4 还很陌生，所以请多多包涵。我在 Linq-to-SQL 中创建了一个查询，该查询返回了我需要的数据，但不幸的是，我的主机提供程序不支持`DbGeography`该类，特别是这里的`DbGeography.PointFromText`方法[Description](https://stackoverflow.com/questions/10117008/net-4-5-beta-dbgeography-notimplementedexception)。

所以我创建了一个存储过程，第一部分开始工作，但我很难总结和平均数据。我想返回`SELECT`按 分组的语句中的所有数据`Dish.DishId, Rest.RerstaurantId`，并为每个组添加`rev.Rating`转换为和计数列。`AVG(rev.Rating)`

这是有效但不受支持的代码：

```
public static DbGeography CreatePoint(double latitude, double longitude)
{
     var text = string.Format(CultureInfo.InvariantCulture.NumberFormat,
                                     "POINT({0} {1})", longitude, latitude);
     return DbGeography.PointFromText(text, 4326);
 }
 public static double MilesToMeters(double? miles)
 {
     if (miles == null)
         return 0;
     return miles.Value * 1609.344;
}

[HttpGet]
public JsonResult TopRated(double lat, double lng, double miles)
{
     var source = CreatePoint(lat,lng);
     var dist = MilesToMeters(miles);
     var reviews = (from r in db.Reviews
                     where r.Restaurant.Location.Distance(source) <= dist
                     group r by new { 
                                      r.Dish,
                                      r.Restaurant.Name,
                                      r.Restaurant.Lat,
                                      r.Restaurant.Lng
                                     } into rg
                     select new { 
                                  Rating = rg.Average(r => r.Rating),
                                  Count = rg.Count(),
                                  Dish = rg.Key.Dish,
                                  Restaurant = new { 
                                                     Name = rg.Key.Name,
                                                     Lat = rg.Key.Lat,
                                                     Lng = rg.Key.Lng 
                                                   } 
                                 });                             

     reviews = reviews.OrderByDescending(r => r.Rating);
     return Json(reviews, JsonRequestBehavior.AllowGet);
 } 
```

这里是需要修改的存储过程

```
CREATE PROCEDURE [dbo].[SearchNearbyReview] 
@Lat decimal(9,6),
@Lng decimal(9,6),
@Dist decimal(9,6)
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @pos geography;
    SET @pos = geography::STPointFromText('POINT(' 
                                          + CONVERT(varchar(15), @Lng) + ' ' 
                                          + CONVERT(varchar(15), @Lat) + ')', 
                                          4326)

    SELECT 
        rev.Rating, 
        rest.RestaurantId, 
        rest.Name AS RestaurantName, 
        rest.[Address], 
        rest.City, 
        rest.[State], 
        rest.Zip, 
        rest.Lat, 
        rest.Lng, 
        dish.DishId, 
        dish.Name AS DishName
    FROM  dbo.Reviews rev 
    INNER JOIN dbo.Restaurants rest 
        ON rev.Restaurant_RestaurantId = rest.RestaurantId
    INNER JOIN dbo.Dishes dish 
        ON rev.Dish_DishId = dish.DishId
    WHERE rest.Location.STDistance(@pos) <= (@Dist * 1609.334)
    ORDER BY rest.RestaurantId, dish.DishId
END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:56:51.780

```
select 
    t.AvgRating,
    t.Count,
    t.DishName,
    t.DishId,
    rest.RestaurantId,
    rest.Name AS RestaurantName,
    rest.[Address],
    rest.City,
    rest.[State],
    rest.Zip,
    rest.Lat,
    rest.Lng
from dbo.Restaurants rest 
join (select 
        avg(rev.Rating) as AvgRating,
        count(1) as Count,
        Restaurant_RestaurantId,
        min(dish.Name) AS DishName,
        DishId
      from dbo.Dishes dish 
      join dbo.Reviews rev on rev.Dish_DishId = dish.DishId 
      group by Restaurant_RestaurantId, DishId
    ) as t
on t.Restaurant_RestaurantId = rest.RestaurantId
WHERE rest.Location.STDistance(@pos) <= (@Dist * 1609.334)
ORDER BY rest.RestaurantId, t.DishId 
```

# c# - Nuget 无法管理从 git 克隆的项目中的引用

> ID：14418594
> 
> 赞同：8
> 
> 时间：2013-01-19T20:35:27.160
> 
> 标签：c#, .net, visual-studio-2010, git, nuget

我创建了一个项目（asp mvc 4）并使用 nuget 向其中添加 dll。比我将它提交给 bitbucket 并最终克隆到同一台 PC 上的不同目录。在克隆项目中，每个引用都显示错误（黄色感叹号）

![在此处输入图像描述](../Images/ef41add70af6a6e0d27540bd067f3aeb.png)

我允许 nuget 管理包：

![在此处输入图像描述](../Images/4da56f15c0c724dd83c7ba5032c5f835.png)

我的解决方案中也有 nuget 文件：

![在此处输入图像描述](../Images/132fc92d8b171fb7f18385dfe9356953.png)

克隆后，我的解决方案中没有“包”文件夹，但在第一次尝试构建它之后，它会出现并且如果填充了 dll。我的.gitignore：

```
#NuGet
packages/ 
```

我如何使它工作？

**编辑**

构建输出（顺便说一句，构建花了**几分钟**，在它失败后整个 VS 冻结了 - 我什至无法复制错误消息）：

当我右键单击任何引用并转到属性时，“路径”为空。

![在此处输入图像描述](../Images/c8904963fde36c3faa6b7c6c665347c0.png)

我的 .csproj：

```
<Reference Include="Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
      <Private>True</Private>
          <HintPath>..\packages\Microsoft.Web.Infrastructure.1.0.0.0\lib\net40\Microsoft.Web.Infrastructure.dll</HintPath>
    </Reference> 
```

该文件实际上存在于给定位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:39:47.830

看起来一切都在正常运行。（除了黄色感叹号图标之外，您是否看到任何错误？）唯一奇怪的是剩余的黄色图标。这很可能只是一个刷新问题。在解决方案窗口顶部（两个箭头）推送刷新，或者关闭并重新打开解决方案。你会发现黄色感叹号消失了，一切都很好。

或者，提交包文件夹并删除 .gitignore 中的行，尽管我承认您之前选择不这样做。

**编辑：**

另一个想法：如果您在没有安装 .net 4.5 或 asp.net mvc 4 的机器上打开解决方案，您可以获得这种体验。

# c - 用于遍历结构成员（如数组）的 C 方法？

> ID：14418595
> 
> 赞同：7
> 
> 时间：2013-01-19T20:35:30.740
> 
> 标签：c, vector, iteration, memory-address, subscript

假设我有一个向量类：

```
typedef struct vec3_s
{
    float x, y, z;
}
vec3; 
```

但是，我希望能够在不将其转换为浮点数组的情况下对其进行迭代。虽然在这种情况下可以接受强制转换，但我很想知道在纯 C 语言中是否可以使用类似 C++ 的功能。例如，在 C++ 中，由于`std::vector< T >`下标`[]`运算符重载，我可以传递它的地址函数的第一个索引采用`void*`.

IE，

```
void do_something_with_pointer_to_mem( void* mem )
{
    // do stuff
}

int main( void )
{
    std::vector< float > v;

    // fill v with values here

    // pass to do_something_with_pointer_to_mem

    do_some_with_pointer_to_mem( &v[ 0 ] );

    return;
} 
```

另一个更具体的例子是在 OpenGL 中调用[glBufferData(...)](http://www.opengl.org/sdk/docs/man/xhtml/glBufferData.xml)时（使用 C++ 时）：

`glBufferData( GL_ARRAY_BUFFER, sizeof( somevector ), &somevector[ 0 ], GL_STREAM_DRAW );`

那么，是否可以使用下标运算符在 C 中完成类似的操作？如果不是，并且我必须编写一个函数（例如， ），那么将它放在定义它的头文件中是否`float vec3_value_at( unsigned int i )`有意义？`static inline`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-19T20:49:16.817

如果所有结构字段都属于同一类型，则可以使用联合如下：

```
typedef union vec3_u
{
    struct vec3_s {
        float x, y, z;
    };
    float vect3_a[3];
}
vec3; 
```

这样，您可以独立访问每个 x、y 或 z 字段，或使用 vect3_a 数组对其进行迭代。这个解决方案在内存或计算方面没有任何成本，但我们可能离类似 C++ 的解决方案有点远。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T20:42:41.550

您没有得到 C++ 的语法糖，但是很容易将您在 C++ 中编写的函数编写为 operator[]。

```
float get_vec3(v *vec3, int i) {
   switch(i) {
   case 0: return v->x;
   case 1: return v->y;
   case 2: return v->z;
   }
   assert(0);
 } 
```

现在您可以遍历任何 vec3。

```
 for (int i = 0; i < 3; i++) {
     printf("%f\n", get_vec3(v, i));
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:15:07.877

C 中的问题是您需要知道如何在结构中移动（即您需要知道类型）。之所以`std::vector<T>`如此，是因为它使用了模板（一个`C++`概念）。现在，也就是说，你可以尝试一些与你建议的稍有不同的东西。如果您不想使用任何数组，则可以存储泛型类型。但是，在检索和使用数据时，用户必须知道他或她期待什么样的数据。下面避免了数组（尽管在使用它们时存在一个潜在的更清洁的解决方案）并且有一个链表实现，它给你几乎相同的灵活性`std::vector<T>`（除了性能优势，因为这是一个链表`O(n)`对所有内容的操作（您可以聪明地反转列表来实现，也许，`O(1)`插入，但这只是示例）

```
#include <stdio.h>
#include <stdlib.h>
typedef struct _item3_t
{
  void *x, *y, *z;
  struct _item3_t* next;
} item3_t;

typedef struct
{
  item3_t* head;
} vec3_t;

void insert_vec3(vec3_t* vec, void* x, void* y, void* z)
{
  item3_t* item = NULL;
  item3_t* tmp  = NULL;
  int i = 0;
  if(vec == NULL)
    return;

  item = malloc(sizeof(item3_t));
  item->x = x;
  item->y = y;
  item->z = z;
  item->next = NULL;

  tmp = vec->head;
  if(tmp == NULL) { // First element
    vec->head = item;
  } else {
    while(tmp->next != NULL)
      tmp = item->next;
    tmp->next = item;
  }
}

// This is one method which simply relies on the generic method above
void insert_vec3_float(vec3_t* vec, float x, float y, float z)
{
  float* xv, *yv, *zv;
  if(vec == NULL)
    return;
  xv = malloc(sizeof(float));
  yv = malloc(sizeof(float));
  zv = malloc(sizeof(float));

  *xv = x;
  *yv = y;
  *zv = z;

  insert_vec3(vec, xv, yv, zv);
}

void init_vec3(vec3_t* vec)
{
  if(vec == NULL)
    return;
  vec->head = NULL;
}

void destroy_vec3(vec3_t* vec)
{
  item3_t* item = NULL, *next = NULL;
  if(vec == NULL)
    return;

  item = vec->head;
  while(item != NULL) {
    next = item->next;
    free(item->x);
    free(item->y);
    free(item->z);
    free(item);
    item = next;
  }
}

item3_t* vec3_get(vec3_t* vec, int idx)
{
  int i = 0;
  item3_t* item = NULL;
  if(vec == NULL)
    return NULL;
  item = vec->head;
  for(i = 0 ; i < idx && item != NULL ; ++i)
    item = item->next;
  return item;
}

void do_something(item3_t* item)
{
  if(item == NULL)
    return;
  float x = *((float*)item->x);
  float y = *((float*)item->y);
  float z = *((float*)item->z);

  // To do - something? Note, to manipulate the actual
  // values in the vector, you need to modify their values
  // at their mem addresses
}

int main()
{
  vec3_t vector;

  init_vec3(&vector);

  insert_vec3_float(&vector, 1.2, 2.3, 3.4);

  printf("%f %f %f\n", *((float*)vec3_get(&vector, 0)->x), *((float*)vec3_get(&vector, 0)->y), *((float*)vec3_get(&vector, 0)->z));

  do_something(vec3_get(&vector, 0));

  destroy_vec3(&vector);

  return 0;
} 
```

此代码应立即编译。您在这里拥有的是一个链表，它是您的“向量”（特别是 vec3 结构）。列表中的每个节点（即`std::vector<T>`意义上的每个元素）都有 3 个元素，它们都是`void`指针。因此，您可以在此处存储您希望的任何数据类型。唯一的问题是您需要为这些指针分配内存以指向并且在删除元素时，您需要释放该内存（请参阅`vec3_destroy`示例方法）。希望这有助于更多地了解这些 void 指针如何在您的情况下工作。

要检索数据，您将无法使用该`[]`符号，但您可以`vec3_get`以相同的方式使用该方法。该`do_something`方法是某种方式的示例存根，您可能能够完成类似于您在 OP 中提到的内容。

# http - 可选的 http 基本身份验证

> ID：14418597
> 
> 赞同：1
> 
> 时间：2013-01-19T20:35:40.670
> 
> 标签：http, authentication, wget

我希望有一个网站，其中一些内容是公开的，而另一些内容只对经过身份验证的用户可见。所以身份验证是可能的，但不是必需的。我想知道这是否可能。

一些背景：

首先要告诉客户端身份验证可用，我需要发送一些标头。据我了解[RFC 2617](https://www.rfc-editor.org/rfc/rfc2617)，“WWW-Authenticate”标头字段必须始终是“401（未授权）”响应的一部分。

现在，一些客户端（例如 wget）将在获得 401 标头时停止尝试（wget 实际上使用术语“需要授权”而不是“未授权”）。

那么这是一个 wget 错误还是没有可选的 http 基本身份验证之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T21:26:21.487

`401 Unauthorized`专门用于*需要*授权但未提供（或未正确提供）的情况。

在您的场景中，您只会发送`WWW-Authenticate`需要身份验证的请求的标头 - 如果身份验证被取消或不满意，则返回`401`.

在发出需要它的请求之前，不会提示用户进行身份验证。没有请求具有可选的身份验证 - 请求是否允许匿名用户。

值得注意的是，HTTP 身份验证对于网站登录来说是一个糟糕的选择，原因如下：

*   没有注销的概念
*   身份验证详细信息以纯文本形式发送（除非通过 SSL）
*   无法修改界面/UX
*   没有密码提醒、自助注册、最低密码要求等

HTTP auth 来自站点静态的时代，因此安全性是在网络服务器级别处理的。

# actionscript-3 - ActionScript3 按钮

> ID：14418603
> 
> 赞同：0
> 
> 时间：2013-01-19T20:35:48.243
> 
> 标签：actionscript-3, flash, button, fullscreen

当我按下按钮时，我想获得全屏显示。

```
import flash.display.Stage;
import flash.display.StageDisplayState;

buttonfullscreen.onRelease = function()
{
stage.displayState = StageDisplayState.FULL_SCREEN;
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:40:06.697

它真的应该是

```
 buttonfullscreen.addEventListener(MouseEvent.CLICK, fullScreen); 

     function fullScreen(event:MouseEvent):void {
        stage.displayState=StageDisplayState.FULL_SCREEN;
   } 
```

# php - 切换到 PDO，提交时出错

> ID：14418607
> 
> 赞同：0
> 
> 时间：2013-01-19T20:36:34.040
> 
> 标签：php, mysql, pdo

我对 PDO 有点陌生，我知道如何完美地选择数据，我的问题是插入。

```
$Finalize = $pdo->prepare("INSERT INTO `users` VALUES(`id`,:email,:hashedpassword,:firstname,:lastname,:gender,:bdaymonth,:bdayday,:bdayyear,'".time()."',:username)");
$Finalize->bindValue(':email', $email, PDO::PARAM_STR);
$Finalize->bindValue(':hashedpassword', $hashedPassword, PDO::PARAM_STR);
$Finalize->bindValue(':firstname', $first_name, PDO::PARAM_STR);
$Finalize->bindValue(':lastname', $last_name, PDO::PARAM_STR);
$Finalize->bindValue(':gender', $gender, PDO::PARAM_STR);
$Finalize->bindValue(':bdaymonth', $bday_month, PDO::PARAM_STR);
$Finalize->bindValue(':bdayday', $bday_day, PDO::PARAM_STR);
$Finalize->bindValue(':bdayyear', $bday_year, PDO::PARAM_STR);
$Finalize->bindValue(':bdayday', $username, PDO::PARAM_STR);
if($Finalize->execute() == false){ 
    echo '6';
    die;    
} 
```

我究竟做错了什么？这个脚本只是使用 mysql_query 并且工作正常，所以我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:42:19.083

您两次将值绑定到`':bdayday'`参数，并且没有将任何值绑定到`':username'`参数：

```
$Finalize->bindValue(':bdayday', $bday_day, PDO::PARAM_STR);
// [ deletia ]
$Finalize->bindValue(':bdayday', $username, PDO::PARAM_STR); 
```

默认情况下，当发生错误时，PDO 不会输出警告或抛出异常：您必须手动检查每个函数的返回值，以查看它是否成功并正确处理错误。

但是，您可以[修改此默认行为](http://php.net/manual/en/pdo.error-handling.php)。

# wpf - 何时使用 BitmapCreateOptions.PreservePixelFormat？

> ID：14418611
> 
> 赞同：0
> 
> 时间：2013-01-19T20:37:28.313
> 
> 标签：wpf, image

我想知道在`BitmapCreateOptions.PreservePixelFormat`将图像读入`BitmapSource`or时应该或必须使用什么情况`BitmapImage`。我想在某些情况下，当转换或读取像素、编辑它们并将像素保存为新的图像文件时，这`PreservePixelFormat`可能是必要的。`BitmapSource`

`BitmapCreateOptions.PreservePixelFormat`如果有人能澄清在哪些情况下是必要的或提供（性能？）优势，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:33:42.323

从[BitmapCreateOptions](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcreateoptions.aspx)的备注中：

> 如果未选择 PreservePixelFormat，则系统会根据系统确定将产生最佳性能的内容来选择图像的 PixelFormat。启用此选项会保留文件格式，但可能会导致性能下降。

如果未设置该选项，WPF 可能会以与源文件中存储的格式不同的格式对位图进行解码以优化性能。原始位图可能被编码为[调色位图](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.indexed8.aspx)，但 WPF 可能会将其解码为[每像素 32 位](http://msdn.microsoft.com/en-us/library/system.windows.media.pixelformats.pbgra32.aspx)的位图，因为目标平台更好地支持该格式。

# c# - 吸气剂的外观

> ID：14418612
> 
> 赞同：0
> 
> 时间：2013-01-19T20:37:35.233
> 
> 标签：c#, visual-studio-2010, getter-setter

我在 c# 中看到过这种代码：

```
 private int id {get;set;} 
```

但我只会为该字段创建 getter，因为如果有 get 并为其设置它与 public 字段相同，**唯一的方法是**：

```
public int getId(){return id;} 
```

如何在VS2010中只自动生成getter

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:39:09.643

你的意思是你如何实现一个只读属性？如果是这样尝试：

```
public int Id { get; private set;} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T20:43:21.750

你已经实现的被称为`Automatic Property`它们看起来像这样：

```
private string Name { get; set; } 
```

自动属性只是*语法糖*，实际上，提供了一种简洁、快速的方法来实现此代码：

```
private string _name;
public string Name 
{ 
    get { return _name; } 
    set { _name = value; } 
} 
```

您可以忽略自动属性，使用手动属性并简单地删除`get`. `get`或者使用自动属性并通过使用 private 访问修饰符标记来使属性的值只读给外部成员：

```
public string Name { get; private set; } 
```

您说您通常会使用的代码在 C# 中从未真正需要，因为属性实际上只是伪装的方法，应该用作更好的约定：

```
public int getId(){return id;} //bad 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T20:39:59.787

右击字段，重构，封装字段

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T20:42:07.340

不，它们不一样。一个属性编译成一个或两个绑定到一个属性的方法。例如：

```
public int Foo { get; private set; } 
```

编译成这样工作的 IL 代码：

```
private int _foo;
public int Foo { get_Foo = get, set_Foo = set }

public int get_Foo() { return _foo; }
private void set_Foo(int value) { _foo = value; } 
```

换句话说：属性是方法，而字段不是。这就是为什么您可以执行以下操作：

```
public int Foo { get { return 0; } } 
```

编译为：

```
public int Foo { get_Foo = get }

public int get_Foo() { return 0;} 
```

**更新**

好的，现在我明白了你的问题......答案是最后一部分，它显示了 getter-only 如何工作以及它的作用:-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T20:42:19.893

这是非常相似的：

[如何创建自动属性](https://stackoverflow.com/questions/3871270/short-cut-to-create-properties-in-visual-studio)

只需提示，然后输入`prop`您的类型，然后按 Tab 键输入您的姓名。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-19T20:43:06.663

我认为您想要一个公开可用的属性，但只能由班级设置。是这样的吗：

```
 public class Entity
 {
     public void Entity()
     {
         ID = ...;  // Some unique id
     }

     public int ID { get; private set; }
 } 
```

这允许Entity类读取和写入ID，但其他类只能读取ID。

# android - 根据缩放级别显示标记？

> ID：14418614
> 
> 赞同：0
> 
> 时间：2013-01-19T20:38:19.130
> 
> 标签：android, google-maps-markers, android-maps-v2

我有一个应用程序，其中显示了很多标记

我的问题是：我可以选择一组不同缩放级别的标记显示吗？

也就是说，更多的放大，更多的标记。因为以 13 o 14 缩放显示地图中的所有标记会让人难以阅读。

# regex - 使用正则表达式从文件中提取部分文本

> ID：14418618
> 
> 赞同：0
> 
> 时间：2013-01-19T20:38:48.117
> 
> 标签：regex, r

我正在尝试使用以下代码：

```
x <- scan("myfile.txt", what="", sep="\n")

b <- grep('/^one/(.*?)/^four/', x, ignore.case = TRUE, perl = TRUE, value = TRUE,
     fixed = FALSE, useBytes = FALSE, invert = FALSE) 
```

从 myfile.txt 中提取文本的移植

```
zero
one
two
three
four
five 
```

我期待的输出是

```
one
two
three
four 
```

我想包括“一”和“四”我不想放弃它们:)

但不知何故，正则表达式不起作用，控制台输出没有给出错误但也没有文本......？

我正在使用打印（b）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:50:46.370

我不太清楚你在找什么，但只是为了好玩......

```
R> x
[1] "zero"  "one"   "two"   "three" "four"  "five" 

R> grep("one|four", x) # get the position of "one" and "four"
[1] 2 5 
```

子集`x`只包括“一”和“四”之间的东西

```
R> x[do.call(seq, as.list(grep("one|four", x)))]
[1] "one"   "two"   "three" "four" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:50:39.430

```
gsub('one(.*)four','\\1',paste(x,collapse=''))
[1] "zerotwothreefive" 
```

或在单词之间获取空格：

```
gsub('one(.*)four','\\1',paste(dat,collapse=' '))
[1] "zero  two three  five" 
```

**在 Gsee 评论后**编辑：****

 **```
 gsub('.*(one.*four).*','\\1',paste(dat,collapse=' '))
[1] "one two three four" 
```

但我认为这里不需要使用正则表达式：

```
 dat[seq(which(dat == 'one'),which(dat == 'four'))]
[1] "one"   "two"   "three" "four" 
```

当然，如果之前的索引顺序不正确，您可以使用 min 。**

# php - 通过使用循环确定的 $_POST[]

> ID：14418619
> 
> 赞同：0
> 
> 时间：2013-01-19T20:39:08.287
> 
> 标签：php, mysql

我的 index.php 页面在一个表单中有多个提交，该表单具有引用另一个 PHP 页面的方法 post 和 action。为了便于举例，假设有 submit='a1' 和 submit='a2'。

从提交按钮发送变量时`$__POST`，我希望新的 PHP 页面选择`$__POST`发送的变量。我已经制作了查询和显示脚本，例如，`$__POST`如果我使用它，它可以正常工作。`if(isset($__POST['a1']))`我可以迭代 MySQL 查询并`if()`为每个类别使用语句，即。“a1”、“a2”……

我想要做的是在一个循环中进行迭代，因为 MySQL 查询对于每个类别都是相同的，除了`WHERE`根据类别编号的变化识别我的数据库中的类别字段的语句。例如，类别“a1”与`mysqlquery`“a2”使用相同，唯一的区别是：（`WHERE post_id = '1'`对于“a1”和`WHERE post_id = '2'`“a2”。）

代码无关紧要..它已经工作了。我只需要确定哪个 post 变量被发送到页面，这样我就可以从每个相应的迭代 MySQL 查询`post_id`......我怀疑 OO 编程在这里会有所帮助，但我很好奇我是否需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:45:54.487

你不能做这样的事情：

```
for ($i=1; $i<=100; $i++)
 {
   if(isset($_POST['a'.$i])) {
   //Do something
 }
} 
```

# java - 运行 JDBC 嵌入式驱动程序时出错 java.sql.SQLSyntaxerrorexception

> ID：14418620
> 
> 赞同：0
> 
> 时间：2013-01-19T20:39:08.887
> 
> 标签：java, jdbc, java-7

我的 Java 代码没有编译：

```
import java.sql.DriverManager;
import java.sql.Statement;
import java.sql.COnnection;
import java.sql.SQLException;
public class CreateTable {

public static void main(String args[]) {

final String DRIVER = "org.apache.derby.jdbc.EmbeddedDriver";
final String CONNECTION = "jdbc:derby:AccountDatabase;create=true";

try {
  Class.forName(DRIVER).newInstance();
 } catch (InstantiationException e) {
   e.printStackTrace();
 } catch (IllegalAccessException e) {
   e.printStackTrace();
 } catch (ClassNotFoundException e) {
   e.printStackTrace();
 }

 try (Connection connection = DriverManager.getConnection(CONNECTION);

      Statement statement = connection.createStatement()) {

     statement.executeUpdate(
      "create table ACCOUNTS                                            "
      + "  (NAME VARCHAR(32) NOT NULL PRIMARY KEY,                      "
      + "  ADDRESS VARCHAR(32),                                         "
      + "  BALANCE FLOAT)                                               ");

      statement.executeUpdate(
       "insert into ACCOUNTS values                                     "
       + "  ('Bill Gates', 'pluto', 1.000.000)");

       statement.executeUpdate(
       "insert into ACCOUNTS values                                     "
       + "  ('Steve Jobs', 'Mars', 1.000.000)");

      } catch (SQLException e) {
              e.printStackTrace();
        }
    } 
```

}

我有 java 7 和 jre 版本 7 都兼容。上面是它编译得很好的 CreateTable.java。但是当我第一次在嵌入式服务器上运行时，这就是我运行它的方式（顺便说一下，它是没有类的 CreateTable.class）：

```
c:\programming\programs\Database Table>java -cp .;"\Program Files\Java\jdk1.7.0_06\db\lib\derby.jar" CreateTable 
```

这是我在 java 中收到此错误的错误：

```
java.sql.SQLSyntaxErrorException: Syntax error: Encountered ".000" at line 1, column 118.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException (Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown Source)
    at CreateTable.main(CreateTable.java:33)
Caused by: java.sql.SQLException: Syntax error: Encountered ".000" at line 1, column 118.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport
AcrossDRDA(Unknown Source)
    ... 9 more
 Caused by: ERROR 42X01: Syntax error: Encountered ".000" at line 1, column 118.
    at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
    at org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(Unknown Source)
    at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)

    at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
    at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
    ... 3 more 
```

数据库已创建，一切都已创建，我认为我仍然可以检索数据，但显然不能。为了检索这些数据，我必须完全无错误地编译。有人可以帮助正确配置它以便正确编译吗？

如果您也需要，我也可以发布 GetData.java 代码，但我认为没有必要。我 99% 确信我需要 createTable.class 才能正确运行，然后才能使用我的 GetData.java 代码。请帮忙？关于为什么会发生这种情况的任何想法。

我也尝试重新编译，但出现如下错误：

```
java.sql.SQLException: Table/View 'ACCOUNTS' already exists in Schema 'APP'.
    at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException
(Unknown Source)
    at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
    at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown Source)
    at CreateTable.main(CreateTable.java:27)
 Caused by: java.sql.SQLException: Table/View 'ACCOUNTS' already exists in Schema 'APP'.
     at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
     at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport AcrossDRDA(Unknown Source)
     ... 10 more
 Caused by: ERROR X0Y32: Table/View 'ACCOUNTS' already exists in Schema 'APP'.
     at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
     at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.duplicateDescriptorException(Unknown Source)
    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addDescriptor(Unknown Source)
    at   org.apache.derby.impl.sql.execute.CreateTableConstantAction.executeConstantAction(Unknown Source)
    at org.apache.derby.impl.sql.execute.MiscResultSet.open(Unknown Source)
    at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)
    at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:54:35.037

`1.000.000`是你的问题。`.`是小数分隔符，而不是千位分隔符。

# qt - qt ARP ubuntu 超级权限

> ID：14418625
> 
> 赞同：0
> 
> 时间：2013-01-19T20:39:21.063
> 
> 标签：qt, arp, root

我正在制作一个发送 ARP 包的应用程序。从控制台，程序要求我使用超级用户权限运行它`sudo -s`。

现在我需要使用 QT 为应用程序做一个界面，我不知道如何给我的应用程序超级用户权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:40:54.033

使用[gksudo](http://linux.die.net/man/1/gksudo)或[kdesu](http://linux.die.net/man/1/kdesu)。
它允许图形程序以 root 身份运行。

# ruby - 在 MiniTest 的 assert_raises/must_raise 中检查异常消息的预期语法是什么？

> ID：14418628
> 
> 赞同：96
> 
> 时间：2013-01-19T20:39:57.863
> 
> 标签：ruby, tdd, minitest, assertion

`assert_raises`在 MiniTest 的/中检查异常消息的预期语法是什么`must_raise`？

我正在尝试做出类似以下的断言，`"Foo"`预期的错误消息在哪里：

```
proc { bar.do_it }.must_raise RuntimeError.new("Foo") 
```

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-01-20T20:27:51.183

您可以使用[`assert_raises`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/unit/rdoc/MiniTest/Assertions.html#method-i-assert_raises)断言或[`must_raise`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/minitest/spec/rdoc/MiniTest/Expectations.html#method-i-must_raise)期望。

```
it "must raise" do
  assert_raises RuntimeError do 
    bar.do_it
  end
  ->     { bar.do_it }.must_raise RuntimeError
  lambda { bar.do_it }.must_raise RuntimeError
  proc   { bar.do_it }.must_raise RuntimeError
end 
```

如果您需要在错误对象上测试某些内容，您可以从断言或期望中获取它，如下所示：

```
describe "testing the error object" do
  it "as an assertion" do
    err = assert_raises RuntimeError { bar.do_it }
    assert_match /Foo/, err.message
  end

  it "as an exception" do
    err = ->{ bar.do_it }.must_raise RuntimeError
    err.message.must_match /Foo/
  end
end 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-07-20T13:12:31.980

断言异常：

```
assert_raises FooError do
  bar.do_it
end 
```

断言异常消息：

根据[API 文档](http://ruby-doc.org/stdlib-2.0.0/libdoc/minitest/rdoc/MiniTest/Assertions.html#method-i-assert_raises)，`assert_raises`返回匹配的异常，以便您检查消息、属性等。

```
exception = assert_raises FooError do
  bar.do_it
end
assert_equal('Foo', exception.message) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-27T09:13:02.020

Minitest 还没有为您提供检查实际异常消息的方法。但是您可以添加一个辅助方法来执行此操作并扩展`ActiveSupport::TestCase`类以在您的 Rails 测试套件中的任何地方使用，例如：`test_helper.rb`

```
class ActiveSupport::TestCase
  def assert_raises_with_message(exception, msg, &block)
    block.call
  rescue exception => e
    assert_match msg, e.message
  else
    raise "Expected to raise #{exception} w/ message #{msg}, none raised"
  end
end 
```

并在您的测试中使用它，例如：

```
assert_raises_with_message RuntimeError, 'Foo' do
  code_that_raises_RuntimeError_with_Foo_message
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T10:17:53.607

为了添加一些最近的发展，过去有[一些](https://github.com/seattlerb/minitest/pull/599)关于添加`assert_raises_with_message`到 minitest 的讨论，但运气不佳。

目前，有一个[有希望的拉取请求](https://github.com/seattlerb/minitest/pull/627)等待合并。如果并且当它被合并时，我们将能够使用`assert_raises_with_message`而无需自己定义它。

同时，有一个名为[minitest-bonus-assertions 的](https://github.com/halostatue/minitest-bonus-assertions)方便的小 gem ，它准确地定义了该方法以及其他一些方法，以便您可以开箱即用地使用它。有关更多信息，请参阅[文档](http://www.rubydoc.info/gems/minitest-bonus-assertions/2.0/Minitest/Assertions#assert_raises_with_message-instance_method)。

# php - base64_encode 是否在发送电子邮件之前重命名我的文件？

> ID：14418630
> 
> 赞同：0
> 
> 时间：2013-01-19T20:40:01.513
> 
> 标签：php

我正在使用 phpexcel 创建一个 file.xls，然后我拿起这个小代码将 xls 作为附件通过电子邮件发送给我。问题是它发送 xls 附件`filename = "._folder1_admin.xls"`而不是实际文件名`"admin.xls"`

如果我定义`$filename`没有子目录，它工作正常。但是一旦我使用子目录，例如：`$filename = "./folder1/".$contextUser.".xls";`它搞砸了电子邮件中的文件名。

我试过`html_entity_decode($filename)`了，但没有帮助..

这是我可以看到它在发送电子邮件之前修改文件名的唯一代码

```
chunk_split(base64_encode(file_get_contents("$filename"))); 
```

无论如何，这是整个代码：

```
$filename = "./folder1/".$contextUser.".xls";
$strHeader .= "MIME-Version: 1.0\n";
$strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
$strHeader .= "This is a multi-part message in MIME format.\n";
$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-type: text/html; charset=windows-874\n"; // or UTF-8 //
$strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
$strHeader .= $strMessage."\n\n";
$strContent1 = chunk_split(base64_encode(file_get_contents("$filename")));
$strHeader .= "--".$strSid."\n";
$strHeader .= "Content-Type: application/octet-stream; name=\"$filename\"\n";
$strHeader .= "Content-Transfer-Encoding: base64\n";
$strHeader .= "Content-Disposition: attachment; filename=\"$filename\"\n\n";
$strHeader .= $strContent1."\n\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:53:26.020

这里：

```
$strHeader .= "Content-Disposition: attachment; filename=\"$filename\"\n\n"; 
```

您正在将文件名设置为的内容，`$filenme`并且由于`./folder1/admin.xls`不是有效的文件名，`/`因此被规范化为下划线。你可能想`basename($filename)`在这个地方使用。

# php - 返回 0/1 over url 参数

> ID：14418631
> 
> 赞同：-1
> 
> 时间：2013-01-19T20:40:06.057
> 
> 标签：php, function, url

我需要一些帮助。当您使用 url 参数打开文件时，我想创建一个返回 0 或 1 的 php 文件。

到目前为止我有这个代码：

```
<?php
function checkID($ID)
{
$allowedID = array('111','123');
if (in_array($ID, $allowedID ))
echo '1';
else
echo '0';   
}
?> 
```

当我打开文件时，它只显示一个空白页。而且我不知道如何使用 url 参数，例如 site.com/myphp.php?ID=111

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:42:11.057

```
<?php
function checkID($ID)
{
    $allowedID = array('111','123');
    if (in_array($ID, $allowedID)) {
        echo '1';
    } else {
        echo '0';   
    }
}
checkID($_GET['ID']); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:44:35.517

您需要检查 ID 是否在 $_GET 数组中，然后检查它是否与您定义的集合匹配：

```
function checkID()
{
    $allowedID = array('111','123');
    if (array_key_exists('ID', $_GET) && in_array($_GET['ID'], $allowedID )) {
        return '1';
    } else {
        return '0';   
    }
}

// run the function
echo checkID(); 
```

**编辑**- 从函数中删除参数并回显结果

# java - 基于 Java 中 log4j 级别的日志记录

> ID：14418633
> 
> 赞同：0
> 
> 时间：2013-01-19T20:40:08.610
> 
> 标签：java, logging, log4j

下面是 log4j 属性和 Java 代码。所有日志都仅在调试中记录。我什至尝试添加阈值，但还没有运气。我需要根据日志级别将日志语句记录在单独的文件中。

所有日志都只记录在调试日志文件中，如果我删除调试日志，那么它会记录在信息日志文件中。

给予阈值选项也不起作用。

```
log4j.rootLogger = OFF

#define the console appender
log4j.appender.consoleAppender = org.apache.log4j.ConsoleAppender
# now define the layout for the appender
log4j.appender.consoleAppender.layout = org.apache.log4j.PatternLayout
log4j.appender.consoleAppender.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

# now define the rollingFIle appender
log4j.category.com=error, myErrorappender
log4j.additivity.com=false
log4j.appender.myErrorappender=org.apache.log4j.RollingFileAppender
log4j.appender.myErrorappender.File=/Users/uthaman/Documents/workspace/Logging/myErrorlog.log
log4j.appender.myErrorappender.MaxFileSize=2MB
log4j.appender.myErrorappender.MaxBackupIndex=2
log4j.appender.myErrorappender.layout = org.apache.log4j.PatternLayout
log4j.appender.myErrorappender.layout.ConversionPattern=%d{ISO8601} [%t] %-5p %c (%F:%L) - %m%n

log4j.category.com=info,myInfoappender
log4j.additivity.com=false
log4j.appender.myInfoappender=org.apache.log4j.RollingFileAppender
log4j.appender.myInfoappender.File=/Users/user/Documents/workspace/Logging/myInfolog.log
log4j.appender.myInfoappender.MaxFileSize=2MB
log4j.appender.myInfoappender.MaxBackupIndex=2
log4j.appender.myInfoappender.layout = org.apache.log4j.PatternLayout
log4j.appender.myInfoappender.layout.ConversionPattern=%d{ISO8601} [%t] %-5p %c (%F:%L) - %m%n

log4j.category.com=debug,myDebugappender
log4j.additivity.com=false
log4j.appender.myDebugappender=org.apache.log4j.RollingFileAppender
log4j.appender.myDebugappender.File=/Users/user/Documents/workspace/Logging/myDebuglog.log
log4j.appender.myDebugappender.MaxFileSize=2MB
log4j.appender.myDebugappender.MaxBackupIndex=2
log4j.appender.myDebugappender.layout = org.apache.log4j.PatternLayout
log4j.appender.myDebugappender.layout.ConversionPattern=%d{ISO8601} [%t] %-5p %c (%F:%L) - %m%n 
```

这是记录日志语句的 java 代码：

```
public class Logging {

    private static Logger logger = Logger.getLogger(Logging.class);

    public static void main(String[] args) {
        logger.error("This is error");
        logger.info("This is info");
        logger.debug("This is debug");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:57:17.433

我更喜欢使用`log4j.xml`配置而不是`log4j.properties`. 以下配置（基本配置）按需要工作...

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd" >
<log4j:configuration>
    <appender name="fileAppender" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="log.info" />
        <param name="datePattern" value="'.'yyyy-MM-dd" />
        <param name="append" value="true" />
        <param name="threshold" value="info"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %C{6} - %m%n" />
        </layout>
    </appender>

    <appender name="fileAppenderDebug" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="log.debug" />
        <param name="datePattern" value="'.'yyyy-MM-dd" />
        <param name="append" value="true" />
        <param name="threshold" value="debug"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %C{6} - %m%n" />
        </layout>
    </appender>

    <appender name="fileAppenderError" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="file" value="log.error" />
        <param name="datePattern" value="'.'yyyy-MM-dd" />
        <param name="append" value="true" />
        <param name="threshold" value="error"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d [%t] %-5p %C{6} - %m%n" />
        </layout>
    </appender>

    <root>
        <priority value="debug" />
        <appender-ref ref="fileAppender" />
        <appender-ref ref="fileAppenderDebug" />
        <appender-ref ref="fileAppenderError" />
    </root>
</log4j:configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:31:07.037

您可以尝试`filter`在您的配置文件中使用指定一个`specific level`要写入的`appender`. 请附上示例代码

```
 <appender name="DEBUG" class="org.apache.log4j.ConsoleAppender">
            <layout class="org.apache.log4j.PatternLayout">
                    <param name="ConversionPattern" value="[%t] %-5p %c - %m%n" />
            </layout>
            <filter class="org.apache.log4j.varia.LevelRangeFilter">
                    <param name="levelMin" value="DEBUG" />
                    <param name="levelMax" value="DEBUG" />
            </filter>
    </appender> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T07:40:26.343

**问题：**

您在 log4j 配置中定义了重复键：

```
 log4j.category.com=error, myErrorappender
    log4j.additivity.com=false

    log4j.category.com=info,myInfoappender
    log4j.additivity.com=false

    log4j.category.com=debug,myDebugappender
    log4j.additivity.com=false 
```

*   Log4j**只**使用最后一个调试附加程序--->“所有日志都只记录在调试日志文件中”
*   当您删除调试附加程序时，信息附加程序将是最后一个 --->“如果我删除调试日志，那么它将被记录到信息日志文件中。”

**解决方案：**

```
 log4j.category.com=debug,myDebugappender,myInfoappender,myErrorappender
    log4j.additivity.com=false
    log4j.appender.myDebugappender.Threshold=DEBUG
    log4j.appender.myInfoappender.Threshold=INFO
    log4j.appender.myErrorappender.Threshold=ERROR 
```

如果您必须通过精确级别匹配过滤事件：

```
 log4j.appender.myDebugappender.filter=org.apache.log4j.varia.LevelMatchFilter
     log4j.appender.myDebugappender.filter.levelToMatch=DEBUG
     ... 
```

# jquery - CSS：Div 不会居中，而且大小很奇怪

> ID：14418639
> 
> 赞同：2
> 
> 时间：2013-01-19T20:40:51.130
> 
> 标签：jquery, css

我有一个，我想用**JQuery**`div`在屏幕上居中，但它不起作用，这很奇怪，因为我用相同的方法将其他居中。**`divs`**

 **![图片](../Images/0597bc527dd3f05a349f33d209517fce.png)

**CSS：**

```
#textLinks
{
    text-align:center;
} 
```

**查询：**

```
$('#textLinks').css({
    position: 'absolute',
    left: ($(window).width()/2 - $('#textLinks').outerWidth()/2),
    top: ($(window).height()/2 + $('#ShapesWrapper').outerHeight()/2)
}); 
```

**JSFiddle**链接： http: [//jsfiddle.net/j08691/8tvs8/9/](http://jsfiddle.net/j08691/8tvs8/9/)
**实际网页**：[http ://sosco.ir/index2.html](http://sosco.ir/index2.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:02:28.340

您的 div 实际上是正确居中的。它只是`margin-left: 87px`内联样式。删除它，它会很好地居中。

您可以通过添加来做到这一点

```
$("#textLinks").css('margin-left','0px'); 
```

直接在您的`$('[id^=text]').css('margin-left', initX + 'px');`代码之后。

[**演示**](http://jsfiddle.net/8tvs8/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:05:22.390

从您的 jQuery 中删除这些行：

```
$('[id^=text]').css('width', x * 2 + 'px');
$('[id^=text]').css('margin-left', initX + 'px'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8tvs8/11/)**

或者如果你想保持 div 狭窄，请留在`$('[id^=text]').css('width', x * 2 + 'px');`

更新：更简单的解决方案似乎是改变这一行：

```
$('[id^=text]').css('margin-left', initX + 'px'); 
```

对此：

```
$('[id^=text]').not('#textLinks').css('margin-left', initX + 'px'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/8tvs8/13/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:09:48.373

尝试替换：

`$('[id^=text]').css('margin-left', initX + 'px');`

为了：

`$('[id^=text]', '#TextWrapper').css('margin-left', initX + 'px');`**

# java - 有没有办法指示相反方向的标签？

> ID：14418640
> 
> 赞同：3
> 
> 时间：2013-01-19T20:40:52.117
> 
> 标签：java, coding-style

好的，这个问题一开始可能听起来很奇怪，但是是否有一个快捷方式可以指示相反方向的选项卡？快捷方式的意思是：

```
\t 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-19T20:43:27.373

如果您的意思与`tab`在编辑器中按下键相反，那么您正在寻找`shift`- `tab`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:42:41.063

不，没有这样的事情。

`\t`对应于 ASCII 9（水平选项卡）。ASCII 中没有“反向水平制表符”。最接近的是一系列 ASCII 8 字符（退格）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:42:07.600

## 编辑

哦，我注意到这是标记[编码风格](/questions/tagged/coding-style "显示标记为“编码风格”的问题")，我注意到你说它是右对齐的。转到您要反转标签的行并尝试以下操作：`End``Tab`

## 原帖

我认为你需要[Right to Left Override](http://www.fileformat.info/info/unicode/char/202e/index.htm)。这将使所有文本向后，因此当您使用制表符时，它将向相反方向缩进。

不过，你的问题并没有真正的意义。你怎么能向左缩进？少放一个`\t`实体？例子：

```
//Original
String s = "\t\t\tText";
//Indented to left
String s = "\t\tText"; 
```

# vba - 在 MS Outlook 中，报告所有未收到回复的已发送消息

> ID：14418643
> 
> 赞同：8
> 
> 时间：2013-01-19T20:41:06.280
> 
> 标签：vba, email, outlook, outlook-2007

我每天都会发送很多电子邮件，并且经常无法跟踪哪些电子邮件实际得到了回复。

有没有办法可以使用 VBA 脚本查看上周发送的所有消息，并检查它们是否收到回复？

具体来说，报告尚未收到来自至少一个发送地址的回复的已发送电子邮件消息。

我知道一点 Excel VBA，但我不知道从哪里开始……或者是否有可能。

想法？

【求朋友，个人鄙视Outlook】

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:55:56.620

正如 Jez 建议的那样，查看已发送消息的消息 ID（您可以使用 MailItem.PropertyAccessor 访问它），然后您可以尝试通过阅读 PR_TRANSPORT_MESSAGE_HEADERS 属性在收件箱文件夹中找到匹配的消息（再次使用 MailItem.PropertyAccessor，该属性将包含来自消息主要 MIME 部分的 MIME 标头）并提取“In-Reply-To”和“References”标头。[您可以在OutlookSpy](http://www.dimastr.com/outspy)
中查看相关属性及其属性标签和 DASL 名称（单击 IMessage 按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:36:52.043

我知道你可以跟踪它是否被阅读/收到。按照本教程进行操作，或者为您的 Outlook 版本选择不同的教程

[http://office.microsoft.com/en-us/outlook-help/get-delivery-and-read-receipt-confirmations-HP010080428.aspx#BM1](http://office.microsoft.com/en-us/outlook-help/get-delivery-and-read-receipt-confirmations-HP010080428.aspx#BM1)

# c# - 什么时候应该使用 Partial 关键字？

> ID：14418645
> 
> 赞同：5
> 
> 时间：2013-01-19T20:41:12.860
> 
> 标签：c#, multiple-inheritance, partial-classes

我正在阅读有关[Partial](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.110%29.aspx "MSDN")关键字的 MSDN 文章，这部分引起了我的注意：

> partial 关键字表示可以在命名空间中定义类、结构或接口的其他部分。所有部分都必须使用 partial 关键字。所有部分必须在编译时可用以形成最终类型。所有部分必须具有相同的可访问性，例如公共、私有等。
> 
> [...]
> 
> 指定基类的所有部分都必须一致，但省略基类的部分仍继承基类型。**部分可以指定不同的基接口**，最终类型实现了所有部分声明列出的所有接口。在部分定义中声明的任何类、结构或接口成员都可用于所有其他部分。**最终类型是编译时所有部分的组合。**

关于这个概念，我有两个问题：

*   首先，这似乎是一种绕过 C# 中缺乏多重继承的方法（当然，除了接口）。除了正常的多重继承问题（例如钻石问题）之外，这样做是否会产生任何影响？基本上，仅仅因为我*可以*，就意味着我*应该*吗？

*   其次，我应该什么时候拆分文件？读到这里，感觉应该可以在自己的文件中声明一个嵌套类，并把它和包含的类一起partial，从而提高可读性。这是 Partial 的重点，还是应该只按照上面文章中的描述使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T20:43:20.603

首先，这与 C# 中的多重继承无关。它只是允许您在文件之间拆分类的实现。C# 中的常规类也可以实现多个接口，因此使用分部类不会获得任何好处。

其次，当类的部分实现由某个工具生成而另一部分由开发人员编写时，部分类是最有用的。这允许您重新生成代码的生成部分，而不会丢失实现的手动编码部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:44:03.053

部分类与多重继承无关。使用它们的唯一很好的理由是当类的一部分是生成的而另一个是你自己的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T20:44:35.063

不，它提到了基本接口，而不是具体类型，所以多重继承仍然是不可能的。对于您的第二点，主要原因是允许生成工具创建一个部分，该部分隐藏了开发人员编辑的部分的许多实现细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T20:57:38.543

> 首先，这似乎是一种绕过 C# 中缺乏多重继承的方法（当然，除了接口）。除了正常的多重继承问题（例如钻石问题）之外，这样做是否会产生任何影响？基本上，仅仅因为我可以，就意味着我应该吗？

它不做多重继承。它实际上更邪恶，因为它暴露了私有变量——但同时它没有引入钻石。试试下面的代码看看我的意思：

```
public class Test0
{
    protected int bar;

    public void Unexpected() { Console.WriteLine("3\. {0}", bar); }
}

public partial class Test1
{
    private int foo;

    public void Foo() { Console.WriteLine("1\. {0}", foo); bar = 1; }
}

public partial class Test1 : Test0
{
    public void Bar() { Console.WriteLine("2\. {0}", foo); foo = 1; }
}

class Driver
{
    public static void Main()
    {
        var t1 = new Test1();
        t1.Bar();
        t1.Foo();
        t1.Unexpected();
        Console.ReadLine();
    }
} 
```

换句话说，你应该非常小心变量。

> 其次，我应该什么时候拆分文件？读到这里，感觉应该可以在自己的文件中声明一个嵌套类，并把它和包含的类一起partial，从而提高可读性。这是 Partial 的重点，还是应该只按照上面文章中的描述使用？

代码生成是一个众所周知的例子。我个人在处理 Facade 模式时经常使用部分类（这在创建 WCF/SOAP 服务时非常有用）。在大多数情况下，出于上述原因，我会尽量避免它。

# asp.net - 在验证器中合并两个正则表达式

> ID：14418646
> 
> 赞同：0
> 
> 时间：2013-01-19T20:41:14.973
> 
> 标签：asp.net, regex, validation

我有这两种表达方式：

```
[a-zA-Z''-'\s]* 
```

或者

```
[اآبپتثجچحخدذرزژسشصضطظعغفقکگلمنوهی\s]+$ 
```

我想在表达式验证器中使用它们，但我不知道如何合并它们。

实际上我需要验证器来验证这两个表达式或它们的任何组合。

我也测试`|`过。

# java - 未检测到 Java 套接字关闭

> ID：14418652
> 
> 赞同：3
> 
> 时间：2013-01-19T20:42:12.733
> 
> 标签：java, sockets

我写了一个小的服务器/客户端应用程序。这是代码

```
try 
{
   OutputStream os = clientSocket.getOutputStream();
   ObjectOutputStream oos = new ObjectOutputStream(os);   
   System.out.println("clientsocketstatus connected: " + clientSocket.isConnected());
   System.out.println("clientsocketstatus closed: " + clientSocket.isClosed());
   oos.writeObject(keepAliveNW); 
} 
   catch(Exception e) 
{ 
   e.printstacktrace(); 
} 
```

现在，当我在 Windows 中禁用 NIC 并重新启用 netstat 时，显示我的 PC1 和 PC2 之间没有打开的连接。现在，当我的客户端尝试发送 keepAliveNW 对象时，应该有一个异常，但没有。我连线了。服务器上没有数据到达。我还在客户端上使用了 Wireshark。Keep-Alive 数据包已发送，但从来没有任何 TCP ACK 数据包，因此 Java 应该检测到出现问题。当连接完全建立时，在 keep-Alive Paket 之后会有一个 TCP ACK Paket。那么如何检测到连接已断开？

感谢帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-19T20:49:48.580

发送keep-alive段后，TCP将在没有收到确认后重新传输，并且在收到足够的确认后，将向调用应用程序报告错误。

可以通过发送仅触发 ACK 的 0 长度消息来确认非活动连接的继续存在。这类似于某些平台上可用的操作系统级保活功能，但可以调整到应用程序所需的频率。

# php - 将html页面转换为php可以降低搜索引擎排名？

> ID：14418665
> 
> 赞同：3
> 
> 时间：2013-01-19T20:43:28.853
> 
> 标签：php, html, seo, ranking

> **可能重复：**
> [更改文件扩展名会影响 SE 排名吗？](https://stackoverflow.com/questions/14368847/will-changing-file-extension-affect-se-rankings)

我的一个客户拥有一个用 html 开发的大型网站（超过 4000 页）需要重新设计，但他不希望我们使用开源或 php，因为他认为这会降低搜索引擎排名。在不使用 php 的情况下处理 4000 多个页面增加了很多工作量。如何在不失去搜索引擎排名的情况下避免它。

网站在谷歌上排名第一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:47:54.070

您仍然可以使用 .html 扩展名并使用 PHP。搜索引擎不知道也不关心您使用什么服务器端语言，因此您可以使用 PHP 而完全不影响 SEO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:12:55.373

> ...但他不希望我们使用开源或 php，因为他认为这会降低搜索引擎排名。

他是否关心文件扩展名，如`.php`,`.jsp`或`.aspx`？文件扩展名是页面 URL 的一部分，根本不会影响页面排名。但是，如果您现有的页面 URL 带有一个扩展名（例如`.html`）并且您将其更改为不同的扩展名，`.php`那么页面 URL 会更改，这将影响 Google 排名。

但谷歌知道这种变化，他们建议使用 301 重定向（[链接](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=93633)）从旧 URL 到新 URL（例如，在你的情况`/foo.html`下`/foo.php`）

# php - 通过 url 传递 javascript 变量并解码到 php 变量

> ID：14418666
> 
> 赞同：0
> 
> 时间：2013-01-19T20:43:49.113
> 
> 标签：php, javascript, json, iframe

我发现这个小脚本允许用户在他们的网站上嵌入一个简单的 javascript 代码来显示我网站上的 iframe。这完美地工作，但是我试图通过他们嵌入的代码传递 1 个变量，并最终将其设置为 php 变量。

我提前道歉我对javascript不太了解！对不起。

用户将嵌入的示例代码（小部件类型代码）

```
<script language="JavaScript" src="http://www.mysite.com/public/iframe.js" rel='{"id":"1"}'></script> 
```

这是在我端生成 iframe 的代码

```
// Set path to the iframe file
var filePath = 'http://www.mysite.com/public/iframe.php';
// Setup the iframe target
var iframe='<iframe id="frame" name="widget" src ="#" width="100%" height="1"   
marginheight="0" marginwidth="0" frameborder="no" scrolling="no"></iframe>';
// Write the iframe to the page
document.write(iframe);

var myIframe = parent.document.getElementById("frame");
// Setup the width and height
myIframe.height = 350;
myIframe.width = 960;

myIframe.src = filePath;
// set the style of the iframe
myIframe.style.border = "1px solid #999";
myIframe.style.padding = "8px"; 
```

最终目标是 rel 属性 id = 1 并将其分配给 php 变量以供进一步使用。我环顾四周，似乎 json_decode 是答案，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:07:18.510

在您的 JavaScript 中添加此代码以查找脚本标记本身：

```
var allScripts = document.getElementsByTagName('script'),
currentScript = allScripts[allScripts.length - 1 ]; 
```

然后，由您决定是使用`rel`属性值还是解码`src`属性。

*顺便说一句，当脚本元素以异步方式添加时，这可能并不总是有效，在这种情况下，您必须检查是否`src`与您的文件名匹配或检查`rel`可能*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:53:31.303

我很确定 rel 属性不是 iframe 标签中使用的东西。这通常用于带有 rel="nofollow" 的标签中，这样搜索引擎就不会跟踪该链接。

我还没有尝试过，但也许您可以在嵌入代码中的问号后发送该参数。像这样：

```
<script language="JavaScript" src="http://www.mysite.com/public/iframe.js?id=1"></script> 
```

然后您的 PHP 代码只是在 GET 请求中查找它。

```
<?php
echo $_REQUEST['id'];
?> 
```

当然，这假设您的接收脚本是用 PHP 编写的。由于您显示 .js 扩展名，我不确定 PHP 代码是否正在执行？另外，我不是 100% 确定您可以在 javascript 嵌入中传递这样的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:47:17.107

不要将其`id`作为`rel`属性传递，直接将其添加到 url 中即可：

```
<script language="JavaScript" src="http://www.mysite.com/public/iframe.js?id=1"></script> 
```

然后在你的 php.ini 中访问它。

```
$id = (array_key_exists('id', $_GET)) ? $_GET['id'] : null; 
```

这是一个速记`if`，用于检查以确保 id 已添加到 url。它与以下内容相同：

```
if(array_key_exists('id', $_GET) {
    $id = $_GET['id'];
} else {
    $id = null;
} 
```

# android - Android 创建可重用样式

> ID：14418671
> 
> 赞同：0
> 
> 时间：2013-01-19T20:44:17.503
> 
> 标签：android, android-layout

我想创建一个样式（或者我不知道它的名字的东西），然后重复使用它，我的屏幕将有 100 多个项目，每个项目都包含图片和文本视图，我认为这不是一个好在我的 xml 文件中制作 100 个布局的方法，我认为有一种方法可以创建一次（保存图片和文本视图），然后在我的活动中重新启动它。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:29:01.513

[这里是来自 Android 的 Fragments 的链接](http://developer.android.com/guide/components/fragments.html)下面是使用 Fragments 的项目的代码 下面的代码也使用了[universalimageloader](https://github.com/nostra13/Android-Universal-Image-Loader)和[ActionBarSherlock](http://actionbarsherlock.com/)虽然我并没有对操作栏做太多事情。此代码还使用在片段和主 SherlockFragmentActivity 之间进行通信的[接口。](http://developer.android.com/training/basics/fragments/communicating.html)我展示了正在使用的 2 个不同的片段。可以从一个站点或另一个站点加载数据的列表片段和从具有片段控制活动的接口设置获取其数据的详细信息片段。

细节片段

```
import java.util.HashMap;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockFragment;
import com.nostra13.universalimageloader.core.DisplayImageOptions;
import com.nostra13.universalimageloader.core.ImageLoader;
import com.nostra13.universalimageloader.core.display.RoundedBitmapDisplayer;

public class DetailsFrag extends SherlockFragment {
public static final String TAG = "detailsfrag";
private boolean typeFlag;
private GetData gd;
private DisplayImageOptions dio = null;
private ImageLoader il;
private ImageView image;
private TextView name;
private TextView data_box_1;
private TextView data_box_2;
private HashMap<String, Object> fragData;

static DetailsFrag newInstance() {
    DetailsFrag frag = new DetailsFrag();

    return frag;
}

public interface GetData {
    public HashMap<String, Object> getData();
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        gd = (GetData) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement GetData");
    }
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
}

@Override
public View onCreateView(LayoutInflater inflate, ViewGroup container,
        Bundle savedInstanceState) {
    setRetainInstance(true);
    setHasOptionsMenu(true);
    il = ImageLoader.getInstance();
    dio = new DisplayImageOptions.Builder()
            .showStubImage(R.drawable.kzfr_logo).cacheInMemory()
            .cacheOnDisc().displayer(new RoundedBitmapDisplayer(20))
            .build();
    View result = inflate.inflate(R.layout.details_frag, container, false);
    image = (ImageView) result.findViewById(R.id.image);
    data_box_1 = (TextView) result.findViewById(R.id.data_box_1);
    data_box_2 = (TextView) result.findViewById(R.id.data_box_2);
    name = (TextView) result.findViewById(R.id.name);

    fragData = gd.getData();

    String imagePath = (String) fragData.get("image");
    il.displayImage(imagePath, image, dio);
    Toast.makeText(getSherlockActivity(), "Image path " + imagePath,
            Toast.LENGTH_LONG).show();
    String title = (String) fragData.get("title");
    name.setText(title);
    String times = (String) fragData.get("times");
    data_box_1.setText(times);
    String data2 = (String) fragData.get("short_description");
    data_box_2.setText(data2);
    return result;
}

} 
```

这是列表片段

```
 import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;

import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import com.actionbarsherlock.app.SherlockListFragment;

public class ListFrag extends SherlockListFragment {
public static final String TAG = "listfrag";
private boolean typeFlag;
private String mainUrl;
private SetDetails sd;
private List<HashMap<String, Object>> data;

static ListFrag newInstance(boolean type) {
    ListFrag frag = new ListFrag();
    Bundle args = new Bundle();
    args.putBoolean("type", type);
    frag.setArguments(args);
    return frag;
}

public interface SetDetails {
    public void setDetails(HashMap<String, Object> details);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        sd = (SetDetails) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement setDetails");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    sd.setDetails(data.get(position));
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);
    // set the type of the listview. Hosts or Programs.
    setType();
    if (typeFlag) {
        mainUrl = "http://website.org/api/dataset1";
    } else {
        mainUrl = "http://website.org/api/dataset2";
    }

    // begin a download task to download the data needed to populate the
    // correct list view.
    if (!checkAdapter()) {
        DownloadTask dlTask = new DownloadTask();
        dlTask.execute(mainUrl);
    } else {
        SimpleAdapter adapter = (SimpleAdapter) getListAdapter();
        adapter.notifyDataSetChanged();
    }
}

public boolean checkAdapter() {
    SimpleAdapter adapter = (SimpleAdapter) getListAdapter();
    if (adapter != null)
        return true;
    else
        return false;
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
}

@Override
public void onResume() {
    super.onResume();
    // SimpleAdapter adapter = (SimpleAdapter) getListAdapter();
    // if (adapter != null)
    // adapter.notifyDataSetChanged();
}

private void setType() {
    Bundle args = this.getArguments();
    typeFlag = args.getBoolean("type");
}

private boolean checkType() {
    return typeFlag;
}

/*
 * This method connects to the specified url and returns data ready to be
 * parsed.
 */
private String downloadUrl(String strUrl) throws IOException {
    String data = "";
    InputStream in = null;

    try {
        URL url = new URL(strUrl);
        URLConnection urlConnect = (URLConnection) url.openConnection();
        urlConnect.connect();

        in = urlConnect.getInputStream();
        BufferedReader br = new BufferedReader(new InputStreamReader(
                urlConnect.getInputStream()));

        StringBuffer sb = new StringBuffer();

        String line = "";

        while ((line = br.readLine()) != null) {
            sb.append(line);
        }
        data = sb.toString();
        br.close();

    } catch (Exception e) {
        Log.d("Exception while downloading url", e.toString());
    } finally {
        in.close();
    }
    return data;
}

private class DownloadTask extends AsyncTask<String, Integer, String> {
    String data = null;

    @Override
    protected String doInBackground(String... url) {
        try {
            data = downloadUrl(url[0]);
        } catch (Exception e) {
            Log.d("Background Task", e.toString());
        }
        return data;
    }

    @Override
    protected void onPostExecute(String result) {

        ListViewLoaderTask lvLoader = new ListViewLoaderTask();
        lvLoader.execute(result);
    }
}

private class ListViewLoaderTask extends
        AsyncTask<String, Void, ImageLoaderListAdapter> {
    ImageLoaderListAdapter adapter = null;
    int count;
    HashMap<String, Object> hm = null;
    String imgUrl = null;
    String url = "http://website.org/u/img/original/";

    @Override
    protected ImageLoaderListAdapter doInBackground(String... jsonStr) {
        List<HashMap<String, Object>> things = null;
        JSONArray jArray = null;
        try {
            jArray = new JSONArray(jsonStr[0]);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        String[] from = { "title", "image", "short_description" };
        int[] to = { R.id.program_title, R.id.program_image,
                R.id.short_description };
        if (checkType()) {

            data1JSONParser data1Parser = new data1JSONParser();
            try {
                things = data1Parser.parse(jArray);
            } catch (Exception e) {
                Log.d("Exception", e.toString());
            }

        } else {

            data2JSONParser data2Parser = new data2JSONParser();
            try {
                things = data2Parser.parse(jArray);
            } catch (Exception e) {
                Log.d("Exception", e.toString());
            }
        }

        count = things.size();
        for (int i = 0; i < count; i++) {
            hm = (HashMap<String, Object>) things.get(i);
            imgUrl = (String) hm.get("image");
            if (!imgUrl.equalsIgnoreCase("false")) {
                imgUrl = url + imgUrl;
                hm.put("image", imgUrl);

            }
        }
                    //ImageLoaderListAdapter is a Simple List Adapter that uses Universal Image
                    //Loader to load its images if possible.
        adapter = new ImageLoaderListAdapter(getSherlockActivity()
                .getBaseContext(), things, R.layout.rowlayout, from, to);
        data = things;
        return adapter;
    }

    @Override
    protected void onPostExecute(ImageLoaderListAdapter adapter) {

        setListAdapter(adapter);
        ImageLoaderListAdapter ad = (ImageLoaderListAdapter) getListAdapter();
        ad.notifyDataSetChanged();
    }
}

} 
```

这是片段控制活动 I

```
import java.util.ArrayList;
import java.util.HashMap;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;

import android.widget.Toast;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.appdomum.doublea.DayFragment.UpdateList;
import com.appdomum.doublea.DetailsFrag.GetData;
import com.appdomum.doublea.ListFrag.SetDetails;
import com.appdomum.doublea.RadioStream.OnProgramSelectedListener;
import com.appdomum.doublea.ScheduleFrag.UpdateSchedule;
import com.nostra13.universalimageloader.core.ImageLoader;
import com.nostra13.universalimageloader.core.ImageLoaderConfiguration;

public class FragmentControl extends SherlockFragmentActivity implements
    GetData, SetDetails {
protected ImageLoader imageLoader = ImageLoader.getInstance();

private ListFrag data1Frag;
private ListFrag data2Frag;
private DetailsFrag detailsFrag;
private Fragment visible;
private Fragment mVisibleCached;
private boolean instanceStateSaved;
private HashMap<String, Object> details = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fragment_control);
    setupFragments();
    ImageLoaderConfiguration config = ImageLoaderConfiguration
            .createDefault(getApplicationContext());
    imageLoader.init(config);
}

public void setupFragments() {
    final FragmentManager fm = getSupportFragmentManager();
    final FragmentTransaction ft = fm.beginTransaction();

    data1Frag = ((ListFrag) fm.findFragmentByTag("data1".TAG));
    if (data1Frag == null) {
        data1Frag = ListFrag.newInstance();
        ft.add(R.id.fragment_container, data1Frag , "data1".TAG);
    }
    visible = data1Frag ;

    ft.commit();
}

@Override
public void onBackPressed() {
    super.onBackPressed();
    visible = mVisibleCached;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater()
            .inflate(R.menu.activity_fragment_control, menu);
    return true;
}

@Override
protected void onDestroy() {
    if (!instanceStateSaved) {
        imageLoader.stop();
    }
    super.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    instanceStateSaved = true;
}

public void showFragment(int fragIn) {
    int inFrag = fragIn;
    final FragmentManager fm = getSupportFragmentManager();
    final FragmentTransaction ft = fm.beginTransaction();

    ft.setCustomAnimations(android.R.anim.fade_in, android.R.anim.fade_out);
    if (visible != null) {

        ft.hide(visible);
        mVisibleCached = visible;

    }
    switch (fragIn) {
    case 0:
        data1Frag = ((ListFrag) fm.findFragmentByTag(data1));
        if (data1Frag == null) {
            data1Frag = ListFrag.newInstance(false);
            ft.replace(R.id.fragment_container, data1Frag ,
                    "data1");
        } else {
            ft.replace(R.id.fragment_container, data1Frag ,
                    "data1");

            if (!data1Frag .isVisible()) {
            }
        }
        ft.addToBackStack(null);
        visible = data1Frag ;
        break;
    case 1:
        data2Frag= ((ListFrag) fm.findFragmentByTag("data2"));
        if (data2Frag== null) {
            data2Frag= ListFrag.newInstance(true);
            ft.replace(R.id.fragment_container, data2Frag, "data2");
        } else {
            ft.replace(R.id.fragment_container, data2Frag, "data2");

            if (!data2Frag.isVisible()) {
            }
        }
        ft.addToBackStack(null);
        visible = data2Frag;
        break;
    case 2:
        detailsFrag = ((DetailsFrag) fm.findFragmentByTag(DetailsFrag.TAG));
        if (detailsFrag == null) {
            detailsFrag = DetailsFrag.newInstance();
            ft.replace(R.id.fragment_container, detailsFrag,
                    DetailsFrag.TAG);
        } else {
            ft.replace(R.id.fragment_container, detailsFrag,
                    DetailsFrag.TAG);
            if (!detailsFrag.isVisible()) {
            }
        }
        ft.addToBackStack(null);
        visible = detailsFrag;
        break;
    }
    ft.commit();
}

@Override
public HashMap<String, Object> getData() {
    return details;
}

@Override
public void setDetails(HashMap<String, Object> data) {
    this.details = data;
    showFragment(2);
}

} 
```

这是片段控制的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".FragmentControl" >

    <FrameLayout
        android:id="@+id/fragment_container"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

详细信息片段的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/woodtileback"
android:padding="10dp" >

<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:paddingBottom="5dip"
    android:paddingTop="10dip"
    android:textAlignment="center" />

<ImageView
    android:id="@+id/image"
    android:layout_width="300dip"
    android:layout_height="300dip"
    android:layout_below="@id/name"
    android:layout_centerHorizontal="true"
    android:clickable="true"
    android:contentDescription="@string/programdescription" />

<TextView
    android:id="@+id/data_box_1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/image"
    android:layout_centerHorizontal="true"
    android:padding="5dp"
    android:textAlignment="center" />

<TextView
    android:id="@+id/data_box_2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/data_box_1"
    android:layout_centerHorizontal="true"
    android:padding="5dp"
    android:textAlignment="center" />

</RelativeLayout> 
```

列表行的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingRight="5dp" >

<ImageView
    android:id="@+id/program_image"
    android:layout_width="100dip"
    android:layout_height="100dip"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:contentDescription="@string/programdescription"
    android:padding="5dp" />

<LinearLayout
    android:id="@+id/details"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@id/program_image"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/program_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left" />

    <TextView
        android:id="@+id/short_description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left" />
</LinearLayout>

</RelativeLayout> 
```

# java - 带有 JComboBox 的 Java 编译器“未经检查或不安全的操作”警告

> ID：14418673
> 
> 赞同：2
> 
> 时间：2013-01-19T20:44:21.733
> 
> 标签：java, user-interface

基本上我是一个相当初级的 Java 学生，我必须创建一个包含 JComboBox 的简单 GUI。该窗口应该如下所示：http: [//i.imgur.com/Jg7j4XD.jpg](http://i.imgur.com/Jg7j4XD.jpg)

当我编译代码（如下所示）时，它会编译，但我在 jGRASP 中收到以下警告：

```
Note: Lab6.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

这是我的代码。我知道这意味着我必须指定一些涉及数据类型的内容（对吗？），但我认为我已经指定得足够多了。感谢任何能提供帮助的人。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Lab6 extends JFrame
{
    private String[] choices = {"Hello", "Good-Bye"};

    public Lab6()
    {
        super("218 Lab 6");
        setSize(450,200);
        setVisible(true);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        setLayout(new BorderLayout());

        JPanel panelNorth = new JPanel();
            panelNorth.add(new JLabel("Welcome Class 218!"));

            JComboBox comboBox = new JComboBox(choices);
            panelNorth.add(comboBox);

            add(panelNorth,BorderLayout.NORTH);
    }

    public static void main(String[] args)
    {
        new Lab6();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T20:47:59.247

从 Java 7 开始，[JComboBox](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html)需要泛型来描述它所拥有的数据：

```
JComboBox<String> comboBox = new JComboBox<>(choices); 
```

不指定这些将产生显示的编译器警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:01:25.470

我复制了您的代码并将其直接粘贴到文本文件中，然后使用标准 javac 编译器对其进行了编译，但没有收到警告。但是当我运行它时，窗口中也没有任何显示。

您使用的是什么版本的 Java？如果它的 Java 7 尝试使用带有组合框的泛型。就像使用 ArrayList 一样，

```
 JComboBox<String> comboBox = new JComboBox<>(choices); 
```

我相信这是从 Java 7 开始的正确方法，如果不是，我肯定有人会纠正我。并且只是为了记录，警告并不意味着您的程序不会运行，它是编译器警告而不是错误，您仍然应该能够运行该程序。

# algorithm - 寻找具有已知解决方案的欧几里得 TSP 示例

> ID：14418675
> 
> 赞同：0
> 
> 时间：2013-01-19T20:44:24.137
> 
> 标签：algorithm, traveling-salesman

我正在寻找具有已知完美解决方案的完整图上的欧几里德 TSP 问题（多个点之间的最短路径）的实例。有没有人遇到过这样的例子？或者是否有一个简单的算法来生成这样的实例，肯定不会有比生成的更短的路线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:01:27.343

我很确定这有很多问题。看着[http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/TSPFAQ.html](http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/TSPFAQ.html)我明白了

问：给定的解决方案值是否只有已知的最佳值？

答：不，对于每个问题，都列出了可证明的最优解的值或由最知名的下限和上限给出的区间。解决方案的最优性已通过分支切割或分支定界算法得到证明。

另见[http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/STSP.html](http://comopt.ifi.uni-heidelberg.de/software/TSPLIB95/STSP.html)

当我在 10 多年前发布 TSPLIB 时，我预计至少将大型问题实例解决到已证明的最优性将成为未来几年的挑战。

然而，由于算法的巨大进步，所有问题现在都已解决到最优！

# xml - 将子元素中的属性设为嵌套元素装饰器

> ID：14418678
> 
> 赞同：0
> 
> 时间：2013-01-19T20:44:39.723
> 
> 标签：xml, xslt

我有一些这样的 XML：

```
<doc>
  <a a1="1" />
  <a a1="1" a2="1" />
  <a a2="1" a1="1" />
  <a a2="1" />
</doc> 
```

我需要对其进行转换，以便节点“a”的属性将其装饰为节点，如下所示：

```
<doc>
  <a1><a /></a1>
  <a1><a2><a /></a2></a1>
  <a2><a1><a /></a1></a2>
  <a2><a/></a2>
</doc> 
```

有人会这么好心地指出 XSLT 解决方案的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:16:25.553

最简单的是递归属性列表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:strip-space elements="*"/>

<xsl:template match="*">
 <xsl:copy>
  <xsl:copy-of select="@*"/>
  <xsl:apply-templates/>
 </xsl:copy>
</xsl:template>

<xsl:template match="a">
 <xsl:param name="a" select="@*"/>
 <xsl:choose>
  <xsl:when test="$a">
   <xsl:element name="{name($a[1])}">
    <xsl:apply-templates select=".">
     <xsl:with-param name="a" select="$a[position()!=1]"/>
    </xsl:apply-templates>
   </xsl:element>
  </xsl:when>
  <xsl:otherwise>
   <a/>
  </xsl:otherwise>
 </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

产生：

```
<doc>
   <a1>
      <a/>
   </a1>
   <a1>
      <a2>
         <a/>
      </a2>
   </a1>
   <a2>
      <a1>
         <a/>
      </a1>
   </a2>
   <a2>
      <a/>
   </a2>
</doc> 
```

# python - 用正则表达式（python）挑选重复模式

> ID：14418679
> 
> 赞同：1
> 
> 时间：2013-01-19T20:44:41.513
> 
> 标签：python, regex

这是一个irc quizbot。我试图找出一个问题的答案。如果只有 1 个答案，我很好，但我对多个答案感到困惑。试图寻找我的问题的答案，但无济于事。

例如，格式为`"A child born to two Goa'uld hosts is known as a _________*Harsisis*Harseseus*Harsesis"`

`*Harsisis*Harseseus*Harsesis`三个可能的答案在哪里。

我想挑选问题和答案并将它们放入一个列表中的元组中。

我希望这最终成为`[('A child born to two Goa'uld hosts is known as a _________','Harsisis','Harseseus','Harsesis')]`

这是我认为应该是正确的，但它不起作用:(

```
re.findall(r'(.+)[*(.+)]+', file) 
```

解决方案可能很简单，但我正在摸索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:47:17.000

对我来说，看起来你只需要`.split()`：

```
>>> s.split('*')
    ["A child born to two Goa'uld hosts is known as a _________",
 'Harsisis',
 'Harseseus',
 'Harsesis'] 
```

# java - 桌面 UI 设计工具，最好是 Java 或 Java 包装器

> ID：14418682
> 
> 赞同：2
> 
> 时间：2013-01-19T20:45:20.040
> 
> 标签：java, swing, qt, user-interface, wxpython

在从事过网页设计和 Android 工作之后，我终于开始了桌面软件的工作，直到我真正开始桌面版 UI 设计时，我的开发周期出现了重大延迟。到目前为止的经历是痛苦的。我决定使用 Java 来编写程序，因为这样我就可以使用跨平台 API 来实现套接字和无线接口（我的程序严重依赖这些 API，并且可以成功运行）。

**网页和安卓用户界面设计：**

HTML/CSS/Javascript ; XML/Android API --> 提供高度的灵活性、定制化、快速的 UI 开发周期。

**Java桌面UI设计**

AWT/Swing/Swing FX -->

1.  [从这里](https://stackoverflow.com/questions/14406329/jradiobutton-selection-color)和[这里](https://stackoverflow.com/questions/4607107/change-jcheckbox-jradiobutton-selection-color)的问题可以看出，几乎不可能进行定制。当可以定制时，实施它会大大增加开发时间，如此[处所示](http://today.java.net/pub/a/today/2008/03/18/translucent-and-shaped-swing-windows.html)。它还增加了代码的复杂性，并且在大多数情况下，该解决方案是本机的，并且不适用于跨平台（至少 Linux、Windows、Mac）。原生的默认外观确实不是大多数 UI 设计师想要的。

2.  拖放选项很好，例如缩短开发时间。[窗口生成器](http://www.eclipse.org/windowbuilder/)。但是缺少像添加 ImageView 这样的选项。并且，如果需要第 2 点中提到的自定义，则必须对自动生成的代码进行大量修改，完全否定拖放的使用。

任何人都可以向我推荐一个非常好的或接近好的 UI 工具，或者说 UI 引擎（如果存在的话），它具有以下功能：

```
 1\. Quick development time. Drag-n-drop, HTML/CSS/XML like methods to design.

    2\. Everything is cross-platform, including customization solutions.

    3\. High degree of customization. Developer designs what looks good to him/her,
       without increasing time-to-develop much.

    4\. Also cross-language. That is, has wrappers for all major programming languages,
       like C++,Java,Python etc. 
```

我认为最好的方法或工具：

1.  [Qt 框架](http://en.wikipedia.org/wiki/Qt_%28framework%29)。非常适合 UI，但如果它具有 Java 和其他语言的包装器，那就太好了。它不会减少开发时间，并且需要手动编码，但可以使界面看起来非常好并且
    可用。

2.  [WxPython](http://www.wxpython.org/)。另一个好工具，如果它有其他语言的包装器会很酷。

3.  一些工具，可让您使用类似 HTML/CSS/XML 的语法和易用性来设计桌面 UI。

4.  不要再考虑 UI 工具了

    一种。只需停止抱怨并使用默认值和现有工具以及本机外观即可。

    湾。手动编写所有代码，并为每个平台单独定制。

    C。使用 Java 和编程 UI 绘制图形画布，就像在游戏中编写场景一样。

如果您不这么认为，或者是否有更好、更简单的选择，请提出建议。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:20:54.963

*在我看来， “几乎不可能定制”*是短视的，您可以[在这里](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)查看有关外观和感觉的信息，如果您喜欢冒险，您可以创建自己的。人们在定制 Swing 时遇到的许多问题更多地归结为缺乏理解，然后是 API 的不灵活，事实上，我发现 Swing 是最灵活和可定制的工具包之一 - 恕我直言。

您也可以[在这里](http://docs.oracle.com/javase/tutorial/uiswing/painting/)查看如何制作自己的组件

您必须意识到，随着您越来越接近“快速工具”，您开始降低灵活性和可定制性，因为这些工具开始将您锁定。

我没有使用 WindowBuilder 的经验，但 NetBeans 表单设计器允许您包含项目类路径中的任何组件，包括您构建或下载的任何组件。

我同意 Swing 经常受到的批评之一是它需要多长时间才能启动和运行。这归结为为灵活性和可定制性而设计的 API。最终开发人员可以围绕最适合其需求的 API 构建库。

大多数人会告诉您避免使用屏幕构建器来支持手动编码。就个人而言，我喜欢屏幕构建器，但我坚持让我的初级开发人员对布局管理器的工作方式有很好的理解，并构建复合布局等设计技术。

我认为很多人遇到的问题之一是忘记构建应用程序。虽然我喜欢一个好看的应用程序，但我仍然更喜欢一个真正做到了它的设计目的并且做得很好的应用程序，而不是看起来很漂亮。

恕我直言

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T11:32:49.360

我将用 Qt 来讨论

`1\. Quick development time. Drag-n-drop, HTML/CSS/XML like methods to design.`

Qt 提供了极好的开发环境：

1.  Qt Creator 跨平台 IDE
2.  Qt 快速设计器
3.  [Qt 设计器](http://doc.qt.digia.com/qt/designer-manual.html)
4.  国际化工具
5.  HTML 帮助系统
6.  Visual Studio 插件和 Eclipse 集成
7.  跨平台构建工具

您可以在给定的链接中阅读有关 QtDesigner 的信息。它为您提供了一个简单的所见即所得 (WYSIWYG) 类型的界面并为您生成自动代码。如果您希望您的 UI 是多语言的，其他模块（如国际化）也很适合使用。

`2\. Everything is cross-platform, including customization solutions.`

Qt 适用于以下平台：

1.  Windows – 适用于 Microsoft Windows XP、Vista、7 的 Qt。
2.  Windows CE, Mobile – 用于 Windows CE 和 Windows Mobile 的 Qt。
3.  Symbian – 用于 Symbian 平台的 Qt。
4.  OS X – 苹果 OS X 的 Qt；支持 Cocoa 上的应用程序。
5.  X11——用于 X Window 系统的 Qt（GNU/Linux、FreeBSD、HP-UX、Solaris、AIX 等）。
6.  嵌入式 Linux – 用于嵌入式平台的 Qt：个人数字助理、智能手机。Maemo, MeeGo – Qt for Maemo，与 Moblin 合并为 MeeGo
7.  Wayland – 用于 Wayland 显示服务器的 Qt。Qt 应用程序可以在加载时使用 -platform 命令行选项在 X 和 Wayland 等图形后端之间切换

外部端口

自从诺基亚在 Gitorious 上向社区开放 Qt 源代码以来，各种端口已经出现。这里是其中的一些：

1.  Qt for OpenSolaris – Qt for OpenSolaris
2.  俳句的 Qt – 俳句的 Qt
3.  Qt for OS/2 – Qt for OS/2 eCS 平台
4.  Qt-iPhone – Qt for iPhone 的实验性开发
5.  Qt for webOS——Palm Pre 上 Qt for webOS 的实验性开发
6.  Qt for Amazon Kindle DX – Qt for Amazon Kindle DX 的实验性开发
7.  Necessitas – Qt for Android
8.  黑莓 Qt – 黑莓 Qt

`3\. High degree of customization. Developer designs what looks good to him/her, without increasing time-to-develop much.`

上面讨论过。

`4\. Also cross-language. That is, has wrappers for all major programming languages, like C++,Java,Python etc.`

你不会相信[这里](http://qt-project.org/wiki/category:languagebindings)的清单。它们涵盖了几乎所有内容，包括 Ada、Pascal、Perl、PHP、Ruby、Python 和 Java。

* * *

假设您计划使用“本机”小部件的外观和感觉制作桌面应用程序，我已经给出了上述信息。我想添加更多内容。

1.  如果您有足够的灵活性来制作没有真正具有“按钮”等的 UI，并且更像是“智能手机 UI”，那么除了使用 Qt-Quick 之外别无他法。

2.  快速、简单、强大、灵活。事实上，他们已经开始在 qml 本身中为直接桌面小部件提供一些支持。见[这里](http://blog.qt.digia.com/blog/2011/03/10/qml-components-for-desktop/)。

3.  随着现代桌面快速变化的外观和感觉，未来趋势似乎是电话和桌面用户界面在某个时候合并！

由于桌面端几乎没有任何创新，他们似乎正朝着手机世界的任何新事物迈进。那么，看看 Windows Metro 类型的 UI 中发生了什么？

以防万一，您可以[在此处](https://stackoverflow.com/questions/13799802/qt-qml-and-windows-8)阅读如何使 Metro 像 UI 一样是 qml！。

随着 Qt5 的到来，事情变得更好了！阅读[本文](http://jontheechidna.wordpress.com/2012/05/19/my-thoughts-on-qml-and-the-desktop/)以了解它如何弥合桌面和手机 UI 之间的差距。

*PS Views 可能有点偏颇，我太喜欢 Qt 和讨厌 Java，两者都是。:-)*

# python - 要列出的 Python 文件

> ID：14418688
> 
> 赞同：-2
> 
> 时间：2013-01-19T20:46:07.920
> 
> 标签：python, file, list, python-3.3

所以我有文件：

```
Ben cat 15
John dog 17
Harry hamster 3 
```

如何制作 3 个列表：

```
[Ben, John, Harry]
[cat, dog, hamster]
[15, 17, 3] 
```

我已经尝试了一切，但我还没有找到解决方案。

我正在使用 Python 3.3.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:49:59.007

```
with open("file.txt") as inf:
    # divide into tab delimited lines
    split_lines = [l[:-1].split() for l in inf]
    # create 3 lists using zip
    lst1, lst2, lst3 = map(list, zip(*split_lines)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T20:52:52.557

以下：

```
ll = [l.split() for l in open('file.txt')]
l1, l2, l3 = map(list, zip(*ll))
print(l1)
print(l2)
print(l3) 
```

产生：

```
['Ben', 'John', 'Harry']
['cat', 'dog', 'hamster']
['15', '17', '3'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:49:14.600

```
gsi-17382 ~ $ cat file
Ben cat 15
John dog 17
Harry hamster 3
gsi-17382 ~ $ python
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> zip(*[l.split() for l in open('file')])
[('Ben', 'John', 'Harry'), ('cat', 'dog', 'hamster'), ('15', '17', '3')]
>>> names, animals, numbers = map(list, zip(*[l.split() for l in open('file')]))
>>> numbers = map(int, numbers)
>>> names
['Ben', 'John', 'Harry']
>>> animals
['cat', 'dog', 'hamster']
>>> numbers
[15, 17, 3] 
```

# data-structures - 节点数据库结构中的Redis

> ID：14418690
> 
> 赞同：0
> 
> 时间：2013-01-19T20:46:46.143
> 
> 标签：data-structures, node-redis

我需要存储一些值。首先是发布数据，例如：{postid,text,room_name}，其中 postid 将自动递增。收集一些帖子后，我需要将它们放入用户名中，这样我将拥有：

```
 Thomas
    1,text,room_name
    2,text,room_name
    3,text,room_name
 Kris
    1,text,room_name
    2,text,room_name
    3,text,room_name 
```

我想我应该使用哈希，但我不知道如何将它们推送到这些用户名中。我要做的是：

```
 db.incr('id',function(id){
 db.hmset(id,'room',room,'text',text,redis.print)
 }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:47:05.690

在 redis 数据库中组织数据总是有多种方法，您必须根据要如何检索数据来决定使用哪一种。

因此，如果您想阅读给定名称的所有帖子，则可以为每个名称保留单独的哈希值。键名可能类似于

```
user:posts:<username> 
```

前缀“name:posts:”是为了确保不会与数据库中的其他键发生冲突。哈希键将是帖子 ID，值可能是 json

```
{"text": "<post text>", "room_name": "<name of room>"} 
```

我已经用 <>) 标记了应该用实际值替换的部分。

从您的示例看来，每个人的帖子都有自己的索引，因此我们需要单独的键来保存每个人的索引，我们将其命名为“user:postId:<username>”。

这是以这种结构存储数据的代码：

```
var redis = require('redis'), db = redis.createClient(),
    username = 'Thomas', post = 'Hello World!', room = 'stackoverflow';

db.incr('user:postId:' + username, function (error, id) {
    if (error) throw error;
    db.hset(
        'user:posts:' + username, id,
        JSON.stringify({post: post, room: room}),
        redis.print
    );
}); 
```

从 redis 读取数据：

```
db.hgetall('user:posts:' + username, function (error, replies) {
    console.log(replies);
}); 
```

这将打印：

```
{ '1': '{"post":"Hello World!","room":"stackoverflow"}' } 
```

这假设您不需要单独访问字段 post 和 room - 但对于这种查询，它更容易，因为您使用单个 hgetall 获得结果。

# c++ - 检测纯 C++ 中的精度损失

> ID：14418692
> 
> 赞同：4
> 
> 时间：2013-01-19T20:46:59.907
> 
> 标签：c++, gcc, g++

当您使用浮点数（类型）进行操作时，是否可以检测到精度损失`float`？说：`double``long double`

```
template< typename F >
F const sum(F const & a, F const & b)
{
    F const sum_(a + b);
    // The loss of precision must be detected (here or one line above) if some fraction bit is lost due to rounding
    return sum_;
} 
```

当**x87** FPU 存在于目标架构上时尤其感兴趣，但没有`asm`例程干预到纯 C++ 代码中。**如果有的话，也接受C++11**或**gnu++11**的特定功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:02:55.943

C++ 标准对浮点精度的概念非常模糊。没有完全符合标准的方法来检测精度损失。

GNU[提供了一个扩展](http://linux.die.net/man/3/feenableexcept)来启用浮点异常。您要捕获的异常是`FE_INEXACT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:18:40.213

您可以考虑在 boost 库中使用[区间算法。](http://www.boost.org/doc/libs/1_52_0/libs/numeric/interval/doc/interval.htm)它可以保证在计算过程中一个区间的误差总是增加的性质：`∀ x ∈[a,b], f(x) ∈ f([a,b])`.

在您的情况下，您可能会考虑使用初始范围`[a-EPS,a+EPS]`作为初始数字`a`。经过一系列操作，`abs(y-x)`结果间隔`[x,y]`将是您想知道的（最大）精度损失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:11:44.170

对您有帮助的一件事是`std::numeric_limits<double>::epsilon`，它返回“1 与可表示的大于 1 的最小值之间的差”。换句话说，它告诉您最大的`x`>0 使得`1+x`计算结果为 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-16T18:44:15.633

您可以使用以下内容：

```
#include <iostream>
#include <fenv.h>

#pragma STDC FENV_ACCESS ON

template <typename F> F sum (const F a, const F b, F &error) {
    int round = fegetround();

    fesetround(FE_TONEAREST);
    F c = a + b;

    fesetround(FE_DOWNWARD);
    F c_lo = a + b;

    fesetround(FE_UPWARD);
    F c_hi = a + b;

    fesetround(FE_TONEAREST);
    error = std::max((c - c_lo), (c_hi - c));

    fesetround(round);

    return c;
}

int main() {
    float a = 23.23528;
    float b = 4.234;
    float e;

    std::cout << sum(a, b, e) << std::endl;
    std::cout << e << std::endl;
} 
```

`error`参数中返回对最大错误量的快速估计。请记住，切换舍入模式会刷新浮点单元 (FPU) 流水线，因此不要指望超快的速度。

更好的解决方案是尝试区间算术（倾向于给出悲观的误差区间，因为没有考虑变量相关性）或仿射算术（跟踪变量相关性，因此给出了更严格的误差范围）。

在这里阅读这些方法的入门： [http ://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.8089](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.36.8089)

# javascript - 在初始化回调之前不渲染主干中的路由

> ID：14418697
> 
> 赞同：0
> 
> 时间：2013-01-19T20:47:24.070
> 
> 标签：javascript, model-view-controller, backbone.js

抱歉，标题有点混乱。

我的骨干路由器具有以下结构：

```
var AppRouter = Backbone.Router.extend({
    routes: {
      'notes': 'showNotes',
      'news': 'showNews'
    },
    showNews: function() {
        // make view object and render
    },
    showNotes: function() {
        // make view object and render
    },
    initialize: function() {
        this.user.fetch({success: function(){
            // callback function
        }});
    }
}); 
```

我遇到的问题是我需要将用户传递到视图中，因此我需要每个渲染仅在成功回调在初始化内部运行时才运行。基本上我不想在调用回调之前完成初始化。我不知道我怎么能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T22:50:29.687

`Router#initialize`，默认情况下，是一个空函数。在它运行时，路线已经移交给`History`，您可能已经通过任何“干净”的方式来阻止它们。

如果您***确实***需要确保在路由器开始渲染之前获取您的用户，您可以通过`user`在历史开始之前获取来实现，如下所示：

```
 // in some initializer:
  user.fetch({success: function() {
    var router = new AppRouter({user: user});
    Backbone.history.start();
  }});

  // and your router:
  initialize: function(options) {
    if (options) this.user = options.user;
  } 
```

但是让视图响应被获取的用户而不是确保预先加载它也可能是有意义的。在用户加载之前，视图可能不会渲染任何内容，或者它可能会显示“加载”图形等。在这种情况下，您只需：

```
// in your router
showNotes: function() {
  // note sure how you're storing your views, but for example:
  this.currentView = new ShowNotesView({model: this.user}).render();
},

initialize: function() {
  this.user.fetch();
}

// and in the view
initialize: function() {
  this.model.on('sync', this.render.bind(this));
},

render: function() {
  // note that `hasBeenSynced` is a made up property.  Fill it in with something
  // that indicates the model has been fetched successfully.  Alternatively you
  // might do this in the template.  Lot of flexibility here.
  if (this.model.hasBeenSynced) {
    // render the model
  } else {
    // show nothing, a loading template, etc
  }
  return this;
} 
```

# canvas - 单击按钮时使用画布绘制具有自定义颜色的正方形和三角形

> ID：14418698
> 
> 赞同：-2
> 
> 时间：2013-01-19T20:47:24.150
> 
> 标签：canvas, html5-canvas

我有以下代码：

```
<html>
 <head>

 </head>
 <body>
    <canvas id="canvasId" width="300" height="300"></canvas>
    <script>
function square() {

  var ctx = document.getElementById('canvasId').getContext('2d');
  var col= document.getElementById("clr");
      ctx.beginPath();
      ctx.rect(10, 10, 70, 70);
      ctx.fillStyle = 'yellow';
      ctx.fill();
      ctx.lineWidth = 2;
      ctx.strokeStyle = 'black';
      ctx.stroke();

}
function triangle () {

      var canvas = document.getElementById('canvasId');
      var context = canvas.getContext('2d');
        var col= document.getElementById("clr");
      context.beginPath();
      context.rect(85, 80, 200, 100);
      context.fillStyle = 'yellow';
      context.fill();
      context.lineWidth = 2;
      context.strokeStyle = 'black';
      context.stroke();

}

    </script>
  <p>Color <input type="color" id="clr" value="" /></p>
  <input type="button" value="square" onclick="square()" />
  <input type="button" value="triangle" onclick="triangle()" />
 </body>
</html> 
```

我对这个问题有疑问，我想当用户选择颜色并单击正方形或三角形时，它会用他/她选择的颜色绘制它，我应该更改和添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:32:22.353

您需要将第二个`rect(...)`调用替换为实际绘制三角形的内容，并且您可以通过访问其`value`属性轻松地从输入字段中获取颜色。

[单击此处获取我的 jsFiddle 分支。](http://jsfiddle.net/amullins/nqm8b/7/)

访问输入值的相关行在这里：

```
var col= document.getElementById("clr");
ctx.fillStyle = col.value; 
```

现在绘制三角形（假设您想要一个等腰三角形来适应原始矩形）：

```
context.beginPath();
context.moveTo(85, 180);
context.lineTo(185, 80);
context.lineTo(285, 180);
context.closePath(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-22T20:59:40.360

我在[http://jsfiddle.net/rcondori/3gmosgq7/中有一个例子](http://jsfiddle.net/rcondori/3gmosgq7/)

这个例子是梯形的......

```
function isInsideBox(x, y, x1, x2, y1, y2) {
var a = getValueA(x1, x2, y1, y2);
var b = getValueB(x1, y1, a);
var auxY = (a * x) + b;
if (auxY <= y) {
    return true;
} else {
    return false;
}
}
function getValueA(x1, x2, y1, y2) {
return ((y1 - y2) / (x1 - x2));
}
function getValueB(x1, y1, a) {
return (y1 - (a * x1));
} 
```

# java - 如何将值““hello””分配给字符串？

> ID：14418699
> 
> 赞同：0
> 
> 时间：2013-01-19T20:47:25.687
> 
> 标签：java, string

我希望引号 ( `"`) 成为字符串的一部分。即 `System.out.println(myString);` 应该输出 `"hello"` 而不仅仅是 `hello`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-19T20:48:03.330

您必须转义引号：

```
String myString = "\"hello\""; 
```

[Java 规范的这一页](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.5)提供了有关字符串文字和转义序列的所有需要​​的详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T20:49:23.957

添加`escape character (\)`双引号。`"\"hello\""`.

# php - 如何更改滚动条上标记的颜色？

> ID：14418704
> 
> 赞同：3
> 
> 时间：2013-01-19T20:48:06.070
> 
> 标签：php, eclipse, zend-studio, eclipse-pdt

在 Zend Studio（或 Eclipse PDT）中，当您选择一个属性/方法时，滚动条会显示源文件中引用它的其他位置的标记。

我看到这些标记有问题。它们要接近与滚动条相同的颜色，当我的眼睛疲倦时，真的很难看到。

有没有办法将这些标记的颜色更改为不同的颜色（如亮绿色）。

即使在随附的示例图像中，也很难看到它们。所以我用红色圈出了它们。

![在此处输入图像描述](../Images/88eb9a94f564909be45cb43b0f3a0a3b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T20:53:27.317

转到窗口 > 首选项，然后在顶部搜索：`Annotations`。

我相信，您要查找的将位于 General > Editors > Text Editors > Annotations 下。

# jquery - jquery中的多级菜单

> ID：14418705
> 
> 赞同：1
> 
> 时间：2013-01-19T20:48:09.810
> 
> 标签：jquery, html, css

我用 css 和 jquery 创建了一个多级菜单

看到这个：http: [//jsfiddle.net/YhgBw/](http://jsfiddle.net/YhgBw/)

我无法将鼠标带到第二级。一旦我将鼠标移到第二级，脚本就会隐藏完整菜单。

脚本 ：

```
$('#bigmenu').hide();
$('#bigmenu_side').hide();
$('#mydiv').mouseenter(function (e) {
    $('#bigmenu').fadeIn(100);
});
$('#bigmenu').mouseleave(function (e) {
    var inFocus = $("#search_by_profile_id").is(":focus");
    if (!inFocus) {
        $(this).fadeOut(100);
    }
});

$('.bd_hover_change_color').mouseenter(function (e) {
    if (event.target.id == 'bd_menu_register') {
        $('#bigmenu_side').html("option A <br> option B <br> option C");
    }
    $('#bigmenu_side').show();
});
$('.bd_hover_change_color').mouseleave(function (e) {
    $('#bigmenu_side').html("");
    $('#bigmenu_side').hide()
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:07:22.887

这是您的代码中的逻辑问题。您还必须这样做，以便当鼠标悬停在`bigmenu_side`. 为此，请设置`bigmenu_side`as的类`bd_hover_change_color`，使其满足`$('.bd_hover_change_color').mouseenter`函数的要求。

试试这个更新的小提琴：http: [//jsfiddle.net/YhgBw/24/](http://jsfiddle.net/YhgBw/24/)

**更新：我之前的小提琴链接出现了一些问题，其中搜索和文本字段变得不起作用，再次更新它以获得功能齐全的菜单。**

# objective-c - 搜索/过滤 UITableView

> ID：14418719
> 
> 赞同：0
> 
> 时间：2013-01-19T20:49:55.833
> 
> 标签：objective-c, uitableview, uisearchbar

我想添加一个搜索来过滤表视图。我有一个想法，但由于我的单元格是完全自定义的，我不确定如何按名称过滤，并从`NSDictionary`依赖名称中获取所有其他数据。

```
NSString *name = [searchResults objectAtIndex:indexPath.row]; 
```

正确过滤后，这将返回的名称`cell.textLabel`，但我需要重新获得所有信息，如我的字典中所示：

```
admin = ;
approved = ;
business = "";
category = ;
description = "";
distance = "";
email = "";
favs = ;
id = ;
image1 = "";
lat = "";
location = "";
lon = "";
name = "";
password = "";
rating = "";
telephone = "";
website = ""; 
```

如果有意义的话，我如何才能从获得公司名称中重新获得上述所有信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:15:27.777

需要更多信息，但是如果我正确地解释了您所做的事情，那么您似乎正在从对象中提取名称字符串，然后使用这些名称字符串填充一个数组作为 UITableView 的数据源。然后，您尝试从名称向后工作以获取原始对象。

如果是这种情况，为什么不直接用原始对象填充数组来支持数据存储，那么您可以根据 UITableView 的选定行轻松逐行获取对象。您只需要更新设置单元格内容的位置即可从对象中提取名称字段，而不是从单独的数组中提取。

例子：

```
// Defined in your class interface:
    NSMutableArray *searchResults = [[NSMutableArray alloc] init];
    NSMutableArray *myArray; // contains all of your objects, could be a dictionary as well

- (void) searchTableView {

NSString *searchText = searchBar.text;
NSMutableArray *searchArray = [[NSMutableArray alloc] init];

[searchArray addObjectsFromArray:myArray];

for (myObject *anObject in searchArray) {
    NSString *objectName = [myObject name];
    NSRange resultsRange = [objectName rangeOfString:searchText options:NSCaseInsensitiveSearch];

    if (resultsRange.length > 0)
        [searchResults addObject:anObject];
}

searchArray = nil;
} 
```

1.  在这里，我们从所有对象的数组 myArray 开始（如果它们存储在 Dictionary 中，只需在下一步中转换为数组）。

2.  一个新数组 searchArray 填充了主数组（如图所示）或字典（附加转换）中的所有对象。

3.  在循环中，将 searchArray 中每个对象的名称字段与 searchBar 中的文本进行比较。如果 name 字段中存在 searchBar 内容，则将该对象添加到结果数组 searchResults。

4.  使用 searchResults 作为 UITableView 的数据源，将每个单元格的文本设置为 searchResults 中相应对象的名称。现在 UITableView 的每一行都与您的对象直接相关。

请注意，我最初是通过以下站点学习此方法的。我建议完成他们的教程 - 它很快并且演示了与搜索设置结合使用的其他一些不错的功能。`release`请注意，它是在 ARC 之前编写的，因此假设您使用的是 ARC，您需要省略一些语句等。

# php - 使用 PHP 将数据从 MySQL 下载到 csv 文件

> ID：14418725
> 
> 赞同：2
> 
> 时间：2013-01-19T20:50:16.440
> 
> 标签：php, mysql, database, hyperlink, download

如何指定要从数据库下载的文件？

主.php：

```
 include('databaseConnection.php');

    $result = mysql_query("SELECT * FROM participants");

    while($row = mysql_fetch_array($result)){

$download_me= $row['cv'];

echo $row['name'] . " " . $row['area_of_exp'] . " " ;

echo "<a href='download.php?file=$download_me'> cv </a>";

echo "<br />";
  } 
```

download.php （这是问题所在）：

```
$file = $_GET['row["cv"]'];  
header('Content-Disposition: attachment; filename="'.$file.'"');
echo $file; 
```

我希望在单击 main.php 中的链接时下载 CV

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:50:57.660

如果您的文件确实在您的数据库中，您可以通过以下方式检索它：

主.php：

```
<?php
  $host = "hostname";
  $user = "username";
  $password = "password";
  $database = "database";

  $link = mysqli_connect($host, $user, $password, $database);
  If (!$link){
      echo ("Unable to connect to database!");
  }
  else {
  $query = "SELECT * FROM participants";    
  $result = mysqli_query($link,$query);

  while ($row = mysqli_fetch_array($result, MYSQLI_BOTH)){

echo $row['name'] . " " . $row['area_of_exp'] . " " . '<a href="download.php?file='.$row['id_participants']. '"\>'." cv </a><br />";
  }

}
mysqli_close($link);
?> 
```

mysql & 更具体的版本：

```
<?PHP
      include('databaseConnection.php');

      $query = "SELECT * FROM participants";    
      $result = mysql_query($query);

      while ($row = mysql_fetch_array($result, MYSQL_BOTH)){

    echo $row['name'] . " " . $row['area_of_exp'] . " " . '<a href="download.php?file='.$row['id_participants']. '"\>'." cv </a><br />";
      }

      mysql_close($link);
    ?> 
```

下载.php：

```
<?php

$id_participants = $_GET['file'];

$host = "hostname";
$user = "username";
$password = "password";
$database = "database";

$link = mysqli_connect($host, $user, $password, $database);
If (!$link){
      echo ("Unable to connect to database!");
  }
  else {
$query = "SELECT * FROM participants WHERE id_participants = $id_participants";

$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_BOTH);
$size = $row['File_Size'];
$type = $row['File_Type'];
$name =$row['File_Name'];
$CV = $row['cv'];
// echo $size . "". $type . " ". $name;

header("Content-length: $size");
header("Content-type: $type");
header("Content-Disposition: attachment; filename=$name");
echo $CV;

}
mysqli_close($link);

?> 
```

Mysql & 更具体：

```
<?php

include('databaseConnection.php');

$id_participants = $_GET['file'];

$query = "SELECT * FROM participants WHERE id_participants = $id_participants";

$result = mysql_query($query);
$row = mysql_fetch_array($result, MYSQL_BOTH);
$size = $row['File_Size'];
$type = $row['File_Type'];
$name =$row['File_Name'];
$CV = $row['cv'];
// echo $size . "". $type . " ". $name;

header("Content-length: $size");
header("Content-type: $type");
header("Content-Disposition: attachment; filename=$name");
echo $CV;

}
mysql_close();

?> 
```

数据库布局：

```
CREATE TABLE IF NOT EXISTS `participants` (
  `id_participants` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL,
  `area_of_exp` varchar(30) NOT NULL,
  `cv` blob NOT NULL,
  `File_Size` varchar(30) NOT NULL,
  `File_Type` varchar(30) NOT NULL,
  `File_Name` varchar(30) NOT NULL,
  PRIMARY KEY (`id_participants`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

[http://www.sqlfiddle.com/#!2/91cb3/4](http://www.sqlfiddle.com/#!2/91cb3/4)

我建议您不要将简历存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T20:59:52.217

我希望`$row['cv']`变量中有一个文件名？

关于文件，你不应该回显变量（这样你只显示文件名）。

要输出文件，您应该使用[readfile()](http://php.net/manual/en/function.readfile.php)。此外，在您的 download.php 文件中，您尝试检索一个不存在的 GET 变量。

例如：

```
$file = $_GET['file'];
header('Content-Disposition: attachment; filename="'. basename($file) . '"');
readfile($file); 
```

您应该知道 $file 变量应该包含文件的完整路径（无论是绝对路径还是相对路径）。这就是为什么我使用[basename()](http://php.net/manual/en/function.basename.php) -函数来仅获取文件名的原因。

# c - C 数组泄漏内存

> ID：14418731
> 
> 赞同：-1
> 
> 时间：2013-01-19T20:50:48.527
> 
> 标签：c, memory, valgrind, memory-leaks

我有一个简单的程序，它只是用数字填充一个数组并打印每个数字。

然而，valgrind 声称至少有 8000 字节的内存泄漏。

```
int main(int argc, char *argv[])
{
    int numbers[10];
    int i = 0;
    for(i = 0; i < 10; i++)
    {
        numbers[i] = i;
        printf("%d",numbers[i]);
    }
    free(numbers);
    return EXIT_SUCCESS;
} 
```

谁能解释内存泄漏在哪里？

这是释放为数组分配的空间的正确方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-19T20:51:48.197

没有内存泄漏，没有未定义的行为。您正在释放尚未分配的内存，从而导致问题。

您只需要调用`free`已使用 、 或 分配`malloc`的`calloc`内存`realloc`。调用`free`任何其他内存位置是未定义的行为。在您的情况下，`numbers`分配在自动内存中（也称为“堆栈”）。一旦超出范围，该内存就会自动释放。

有两种方法可以修复您的程序：

*   替换`int numbers[10];`为`int *numbers = malloc(10*sizeof(int));`, 或
*   消除`free(numbers);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T09:44:50.117

0123456789检查内存泄漏...

实际泄漏报告（实际泄漏：0 总大小：0 字节）

可能的泄漏报告（可能的泄漏：0 总大小：0 字节）

执行完成，退出码为0

这是内存检查报告。没有内存泄漏。此外，只有在手动分配内存时才应使用 free，否则不应使用 free。

# jqplot - JQPlot - 水平堆积条形图的最小宽度

> ID：14418734
> 
> 赞同：1
> 
> 时间：2013-01-19T20:51:09.593
> 
> 标签：jqplot

我有少量数据点，但值范围很大。我正在使用 LogAxisRenderer 来帮助显示它，但仍有一些值非常小，以至于条的宽度小于标签，并且条可能几乎不可见，只有几个像素宽。

我想要做的是设置一个最小宽度（比如 20 像素），以便条形图永远不会小于最小值，并且标签将适合条形图。我在另一个图形库（不幸的是基于闪存的）中看到了这一点。但我不认为有办法用 jqplot 做到这一点。

我的问题是：有没有办法在 jqplot 中做到这一点？如果没有，我将如何对库进行更改以允许这样做？我知道 javascript，但我不熟悉 jqplot 的内部结构，所以如果有人能指出我正确的方向，那就太好了！

请参阅 jsfiddle 上的此示例：http: [//jsfiddle.net/C9bcJ/11/](http://jsfiddle.net/C9bcJ/11/)

这是代码：

```
plot4 = $.jqplot('bar_chart', data, {
    animate: true,
    stackSeries: true,
    captureRightClick: true,
    seriesColors: ['#00ff00', '#ffff00', '#ff0000'],
    seriesDefaults: {
        renderer: $.jqplot.BarRenderer,
        shadowAngle: 135,
        rendererOptions: {
            barDirection: 'horizontal',
            highlightMouseDown: true
        },
        pointLabels: {
            show: true,
            formatString: '%d',
            hideZeros: true
        }
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.LogAxisRenderer,
            showTicks: false,
            drawMajorGridlines: false
        },
        yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            rendererOptions: {
                tickRenderer: $.jqplot.AxisTickRenderer,
                tickOptions: {
                    mark: null,
                    fontSize: 14
                }
            },
            ticks: ticks
        }
    }
}); 
```

这是图表图像的链接：

[http://i.imgur.com/89Bt4HK.jpg](http://i.imgur.com/89Bt4HK.jpg)

# javascript - jQuery：获取目的地和内容

> ID：14418735
> 
> 赞同：0
> 
> 时间：2013-01-19T20:51:14.347
> 
> 标签：javascript, jquery

我有一些数组，来自类似的“a”元素。

```
links = jQuery('a'); 
```

如何获取带有 href 目标和内容的字符串？就像是：

```
<a href="/dest1">First</a>
<a href="/dest2">Second</a>
need =>
/dest1 First, /dest2 Second 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T20:57:32.470

您可以使用`map()`和`join()`：

```
$('a').map(function(index, link) {
    return link.href + ' ' + $(link).text();
 // return [link.href, $(link).text()].join(' ');  // This works too
}).get().join(', '); 
```

**演示：http: [//jsfiddle.net/t4nr5/](http://jsfiddle.net/t4nr5/)**

*   `.map()`迭代匹配的元素；
*   `return`将元素替换为您返回的字符串（在对象中）。
*   `.get()`将返回的 jQuery 对象转换为底层的 JS 对象，在本例中是一个数组。
*   `.join()`将零件连接在一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:07:41.793

我创建了一个小 jsFiddle 来演示你将如何做到这一点，你可以在这里查看它的实际效果：http: [//jsfiddle.net/tUY5K/](http://jsfiddle.net/tUY5K/)

这是完成工作的方法：

```
function anathem() {
  var links = $('a');
  var anathemString = "";
  links.each(function (index) {
    anathemString += $(this).attr('href') + " " + $(this).html();
    if (index != links.length - 1) {
      anathemString += ", ";
    }
  });
  return anathemString;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T20:57:25.157

首先获取链接和内容；

```
var first_link = $('a:eq(0)').attr('href'); //first link
var first_content_text = $('a:eq(0)').text(); //content of first anchor element
var first_content_html = $('a:eq(0)').html(); //content of first anchor element including markup 
```

获取第二个链接和内容：

```
var second_link = $('a:eq(1)').attr('href'); //second link
var second_content_text = $('a:eq(1)').text(); //content of second anchor element
var second_content_html = $('a:eq(1)').html(); //content of second anchor element including markup 
```

各种技巧：

**":eq" 伪类**

```
$('a:eq(0)'); //this gets the first anchor. (":nth-child" pseudo-class is "0-indexed", meaning it starts counting from 0) 
```

**":nth-child" 伪类**

```
$("a:nth-child(1)"); //this also gets the first anchor. (":nth-child" pseudo-class is "1-indexed", meaning it starts counting from 1) 
```

**.first() 和 .next() 方法**

```
$("a").first(); //gets the first anchor element
$("a").first().next(); //gets the second anchor element 
```

**获取底层 DOM 元素**

```
$('a').get(0); //This gets the first element in the anchor node list
$('a')[0]; //This also does the same but cannot specify a negative index 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:03:28.980

试试这个：

```
 var hrefs_array = $.map($('a'), function(el) { return [$(el).attr("href"), $(el).text()];}) 
```

或类似的东西

```
 var hrefs_array = [];
    $('a').each(function(index, el){
                     hrefs_array.push([$(el).attr("href"), $(el).text()]);
                }); 
```

# c# - 如何读取这个二进制转换为整数？

> ID：14418738
> 
> 赞同：1
> 
> 时间：2013-01-19T20:51:35.857
> 
> 标签：c#, binary, zip

我很尴尬地承认这一点，但我不知道如何阅读。请看图片。虽然我知道有一百万个图书馆可以为我压缩和解压缩文件，但我想学习并了解如何自己做这件事。所以我的问题很简单，如何转换这张图片中的日期。根据文件修改时间。它有`0x7d1c`他们如何得到`hour 15 minute 40 and second 56`。我绝望地试图理解，但我不明白如何转换。![在此处输入图像描述](../Images/e9020a6b123ad34e4505da4a9be2d5ae.png)

[这](https://users.cs.jmu.edu/buchhofp/forensics/formats/pkzip-printable.html)取自试图解释 zip 文件格式的站点。

抱歉这个愚蠢的问题，但我只是迷路了。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:58:51.437

时间以 5 位存储，小时以 6 位存储，秒以 5 位存储。

该值`0x7d1c`采用`0111110100011100`二进制表示。

将其分解为时间分量，您会得到`01111`和。`101000``11100`

`01111`的十进制表示为15、40`101000`和`11100`28。

秒以一半的分辨率存储，即格式只能表示每隔一秒，因此您将秒值乘以 2。

所以时间值是 15:40:56。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:11:01.493

使用[位运算符](http://en.wikipedia.org/wiki/Bitwise_operation)。从图中可以看出，时间字段有 16 位，布局如下：

```
hhhhhmmmmmmsssss
0111110100011100 = 0x7d1c 
```

现在，您想*屏蔽*掉您感兴趣的位。假设我们想首先获得小时数。我们使用按位与运算符 ( `&`) 来屏蔽这些位。AND 运算符有两个操作数。它将使`1`两个操作数中的每个位也成为 a`1`和所有其他位`0`。

```
hhhhhmmmmmmsssss
0111110100011100 = 0x7d1c
1111100000000000 = 0xf800
----------------
0111100000000000 = 0x7d1c & 0xf800 = 0x7800 
```

现在你只有感兴趣的位，“小时”位。但是，右边的零对我们来说没有意义，所以我们使用右移运算符 ( `>>`) 将位移动到正确的位置，向右移动 11 位。

```
0111100000000000 = 0x7d1c & 0xf800 = 0x7800
0000000000001111 = (0x7d1c & 0xf800) >> 11 = 0xF = 15 
```

这是你的结果；15 小时。这种情况下的一般规则是：

```
hours = (value & 0xf800) >> 11;
minutes = (value & 0x7e0) >> 5;
seconds = (value & 0x1f) * 2; // the number of seconds is rounded to an even number
                              // to save a bit, so multiply by two (see picture). 
```

我会把它留给你来验证最后两行。请注意，“程序员模式”上的 Windows 计算器是二进制/十六进制/十进制转换的宝贵工具。

# c# - WebBrowser Control .Document/.DocumentText 超时？

> ID：14418742
> 
> 赞同：0
> 
> 时间：2013-01-19T20:52:02.197
> 
> 标签：c#, html, .net-4.0, webbrowser-control

我需要从网站访问我正在使用 Web 浏览器控件编写的程序的 HTML 源代码。该程序本身将根据 HTML 进行操作，但我遇到了问题。根据我所见，我看到允许大约 100 毫秒的时间让控件更新文本就足够了。

我有一个与触发器相关的计时器事件，以将`WebBrowser.Document`/保存`WebBrowser.DocumentText`到全局可访问的 doc 文件，但我遇到的问题是引发了 Specified Cast Not Valid 异常。当我尝试查看 DocumentText 属性中的内容时，什么也没有出现。设置手表表示功能评估已被禁用，因为之前的功能评估超时。

现在我只是尝试`DocumentText`使用该`Console.WriteLine`功能打印，但即使这样也不起作用。

我想总而言之，我不知道我在做什么。有人可以指导我找到能够实现我正在寻找的结果的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:49:31.360

我在这里找到了解决问题的方法：http: [//social.msdn.microsoft.com/Forums/en/winforms/thread/642f59c5-84f1-4945-90d3-220592ace5f1](http://social.msdn.microsoft.com/Forums/en/winforms/thread/642f59c5-84f1-4945-90d3-220592ace5f1)

具体来说，解决方案是向事件添加一个事件处理程序，`WebBrowser.DocumentCompleted`如下所示：

```
 void Browser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (Browser.ReadyState == WebBrowserReadyState.Complete)
            doc = Browser.Document;
    } 
```

我认为关键在于 if 语句。如果这是真的，那么文档是可访问的，因此它可能可以放在任何地方（并且应该考虑在该事件处理程序中处理它意味着除非您将所有内容存储在数组或列表中，否则每次导航到新的页）。

# jquery - 绑定到 DataTable 的滚动事件

> ID：14418743
> 
> 赞同：5
> 
> 时间：2013-01-19T20:52:17.360
> 
> 标签：jquery, datatables

我需要绑定到设置为垂直滚动的 DataTable 的 on scroll 事件。

很明显，简单的事件绑定不起作用。

```
$('table tbody').on('scroll', function() {
    alert('');
}); 
```

我在这里创建了一个[演示](http://jsfiddle.net/SQ5RL/)。

有没有人知道可以做到这一点的 API 方法或解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-19T21:05:15.010

溢出的不是表格，而是父 div

```
$('.dataTables_scrollBody').on('scroll', function() {
    alert('');
}); 
```

演示：http: [//jsfiddle.net/SQ5RL/1/](http://jsfiddle.net/SQ5RL/1/)

此外，我从未使用过这个插件所以我不知道它的行为。如果上面的代码碰巧不起作用，请尝试下面的代码以防万一。

```
$('table tbody').parent().on('scroll', function() {
    alert('');
}); 
```

顺便说一句，这也经过测试可以正常工作。

# c# - 如何在不同时区的服务器上获取本地时间？

> ID：14418744
> 
> 赞同：1
> 
> 时间：2013-01-19T20:52:23.447
> 
> 标签：c#, asp.net, timezone

我来自印度，我与美国的 GoDaddy 共享服务器，用于托管 ASP.net 网站。

当我使用`DateTime.Now`财产时，我会在美国获得时间。

如何在整个申请中将其更改为印度时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T16:39:45.930

使用`TimeZoneInfo`是最好的方法：

```
var timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById("India Standard Time");
var now = TimeZoneInfo.ConvertTimeFromUtc(DateTime.UtcNow, timeZoneInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:07:14.110

我不相信有一种方法可以更改应用程序的时区，但是您可以使用静态类方法替换 DateTime.Now 的所有实例，该方法获取当前日期，然后将其调整为所需的时区。

例如：

```
 var dtDate = DateTime.UtcNow;
        dtDate.AddHours(5);
        dtDate.AddMinutes(30);
        return dtDate; 
```

# java - Apache Commons FTP Applet 在 html 按钮上上传

> ID：14418746
> 
> 赞同：0
> 
> 时间：2013-01-19T20:52:40.077
> 
> 标签：java, javascript, ftp, apache-commons

长期搜索者，第一次询问堆栈溢出问题。我似乎总是能够通过搜索找到我的答案，除了这次:)

我有点像 Java 编程的初学者。虽然我认为使用 apache commons ftp 的小程序是在我的网站上实现 FTP 文件上传解决方案的最佳解决方案。

当我的所有代码都包含在我的 init() 方法中时，我已经能够传输文件了。

虽然当我将代码移动到我在 javascript 中调用的另一种方法时，它在打印工作目录 (PWD) 后失败。

此代码**有效**：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication2;

import java.io.IOException;
import javax.swing.JApplet;
import javax.swing.*;
import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.OutputStream;
import org.apache.commons.net.io.Util;
import org.apache.commons.net.io.CopyStreamAdapter;
import org.apache.commons.net.io.CopyStreamEvent;
import org.apache.commons.net.io.CopyStreamListener;
/**
 *
 * @author Mike
 */
public class FTPMain extends JApplet {
    int userId;
    private File[] files;
    final JPanel myPanel = new JPanel();
    final JLabel lblStatus = new JLabel();    
    final JProgressBar myProgressBar = new JProgressBar();

    //Called when this applet is loaded into the browser.
    public void init() {

        JButton btnSelectFiles = new JButton("Select Files");
        JButton btnUpload = new JButton("Upload Files");

        myPanel.add(btnSelectFiles);
        myPanel.add(btnUpload);
        myPanel.add(lblStatus);
        myPanel.add(myProgressBar);
        myPanel.setBackground(Color.white);

        btnSelectFiles.addActionListener(new ActionListener() {
             public void actionPerformed(ActionEvent e) {
                 final JFileChooser fc = new JFileChooser();
                 fc.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
                 fc.setMultiSelectionEnabled(true);
                 int returnVal = fc.showOpenDialog(myPanel);
                 if(returnVal == JFileChooser.APPROVE_OPTION) {
                     files = fc.getSelectedFiles(); 
                     //for(int i = 0; i < files.length; i++) {
                     lblStatus.setText("File count:  " + files.length);
                     //}
                 } else {
                    lblStatus.setText("Open command cancelled by user.");
                 }
             }
        });

        btnUpload.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                lblStatus.setText("Uploading Files...");

                final FTPClient ftpclient = new FTPClient();
                //ftpclient.setControlKeepAliveTimeout(300);
                File myFile;
                try {

                    FTPUtils.ftpConnect(ftpclient, "myhost", "myusername", "mypassword");
                    //ftpclient.enterLocalPassiveMode();
                    ftpclient.setFileType(FTP.BINARY_FILE_TYPE);

                    for(int i = 0; i < files.length; i++) {
                        String to = "/path/to/files/queue";
                        ftpclient.changeWorkingDirectory(to);
                        ftpclient.printWorkingDirectory();
                        myFile = new File(files[i].getAbsolutePath());
                        final String remoteFile = myFile.getName();
                        final InputStream inputStream = new FileInputStream(myFile);
                        final OutputStream outputStream = ftpclient.storeFileStream(remoteFile);

                        //byte[] bytesIn = new byte[4096];
                        //int read = 0;
                        int streamSize = (int)files[i].getTotalSpace();
                        Util.copyStream(inputStream, outputStream, 4096, streamSize, myListener);

                        /*while((read = inputStream.read(bytesIn)) != -1) {
                            outputStream.write(bytesIn, 0, read);
                        }*/

                        inputStream.close();
                        outputStream.close();
                        boolean completed = ftpclient.completePendingCommand();

                        if(completed) {
                            lblStatus.setText((i+1) + " files have been uploaded successfully.");
                        }
                    }
                } catch (IOException ex) {
                    // TODO Auto-generated catch block
                    lblStatus.setText(ex.getMessage());
                    //ex.printStackTrace();
                }
            }
        });

        getContentPane().add(myPanel);
    }

    public CopyStreamListener myListener = new CopyStreamListener(){
        //private long megsTotal = 0;
        public void bytesTransferred(CopyStreamEvent event) {
            bytesTransferred(event.getTotalBytesTransferred(), event.getBytesTransferred(), event.getStreamSize());
        }

        public void bytesTransferred(long totalBytesTransferred,
                int bytesTransferred, long streamSize) {

            final int percent = (bytesTransferred / (int)streamSize) * 100;
            //myProgressBar.setString("Processing " + percent + "%");
            //myProgressBar.setValue(percent);
            lblStatus.setText("Total: "+percent);
            /*long megs = totalBytesTransferred / 1000000;
            for (long l = megsTotal; l < megs; l++) {
                System.err.print("#");
            }
            megsTotal = megs;
            myLabel.setText("Total: " + megsTotal);
            myProgressBar.setValue((int)megsTotal);*/
        }
    };

    //private static CopyStreamListener createListener(){
    //    return 
    //}

    public void startFTPUpload(String strUserInfo) {

        //myLabel.setText("UserId " + userId + " is now set.");
    }
} 
```

虽然当我将文件传输代码（在 btnUpload Action Listener 中）移动到 startFTPUpload 方法并通过 javascript 运行它时，它在 PWD 行之后失败，没有错误。

```
/* javascript code */
$("#btnUpload").click(function() {
    var val = $(this).val();
    var myApp = document.applets["FTPUpload"];
    if(myApp) { 
        //alert("found app");
        myApp.startFTPUpload(val);
    }                     
});
/* ----------------- */

public void startFTPUpload(String strUserInfo) {
        lblStatus.setText("Uploading Files...");

        final FTPClient ftpclient = new FTPClient();
        //ftpclient.setControlKeepAliveTimeout(300);
        File myFile;
        try {

            FTPUtils.ftpConnect(ftpclient, "myhost", "myusername", "mypassword");
            //ftpclient.enterLocalPassiveMode();
            ftpclient.setFileType(FTP.BINARY_FILE_TYPE);

            for(int i = 0; i < files.length; i++) {
                String to = "/path/to/files/queue";
                ftpclient.changeWorkingDirectory(to);
                ftpclient.printWorkingDirectory();
                myFile = new File(files[i].getAbsolutePath());
                final String remoteFile = myFile.getName();
                final InputStream inputStream = new FileInputStream(myFile);
                final OutputStream outputStream = ftpclient.storeFileStream(remoteFile);

                //byte[] bytesIn = new byte[4096];
                //int read = 0;
                int streamSize = (int)files[i].getTotalSpace();
                Util.copyStream(inputStream, outputStream, 4096, streamSize, myListener);

                /*while((read = inputStream.read(bytesIn)) != -1) {
                    outputStream.write(bytesIn, 0, read);
                }*/

                inputStream.close();
                outputStream.close();
                boolean completed = ftpclient.completePendingCommand();

                if(completed) {
                    lblStatus.setText((i+1) + " files have been uploaded successfully.");
                }
            }
        } catch (IOException ex) {
            // TODO Auto-generated catch block
            lblStatus.setText(ex.getMessage());
            //ex.printStackTrace();
        }
        //myLabel.setText("UserId " + userId + " is now set.");
    } 
```

非常感谢任何帮助，请记住我是 Java 初学者。我可能没有使用正确的方法，欢迎提出建议。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:35:56.430

我想通了，我需要将 javascript 调用的方法包装在 AccessController.doPrivileged 中，如下所示：

```
public void startFTPUpload(String strUserInfo) {
    AccessController.doPrivileged(new PrivilegedAction<Boolean>() {
        public Boolean run() {
            try {
                final FTPClient ftpclient = new FTPClient();

                File myFile;
                try {

                    FTPUtils.ftpConnect(ftpclient, "host", "username", "password");
                    ftpclient.setFileType(FTP.BINARY_FILE_TYPE);

                    for(int i = 0; i < files.length; i++) {
                        String to = "/tekmtn.com/sites/testingsite.com/files/queue";
                        ftpclient.changeWorkingDirectory(to);
                        ftpclient.printWorkingDirectory();
                        myFile = new File(files[i].getAbsolutePath());
                        final String remoteFile = myFile.getName();

                        FTPUtils.uploadFile(ftpclient, files[i].getAbsolutePath(), remoteFile);
                        boolean completed = ftpclient.completePendingCommand();
                        if(completed) {
                            lblStatus.setText((i+1) + " files have been uploaded successfully.");
                        }
                    }
                } catch (IOException ex) {
                    // TODO Auto-generated catch block
                    lblStatus.setText(ex.getMessage());
                    //ex.printStackTrace();
                }
                //myLabel.setText("UserId " + userId + " is now set.");
            } catch (Exception e) {
                lblStatus.setText(e.getMessage());
            }
            return Boolean.TRUE;
        }
    });
} 
```

# c# - 如何为一行中声明的字段设置属性

> ID：14418750
> 
> 赞同：-5
> 
> 时间：2013-01-19T20:52:55.007
> 
> 标签：c#, properties

作为主题

```
public String imie, nazwisko{get; private set;} 
```

我会在同一行中`imie`为它们应用 get/set 规则`nazwisko`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T20:55:03.137

如果你想在一个语句中声明多个*字段*，你可以：

```
public string imie, nazwisko, whatever; 
```

您发布的内容是尝试对*properties*做同样的事情，这是不可能的（不是使用共享的 getter/setter 声明）。

当然，这些*可以*在一条线上：

```
public string imie{get; private set;} public string nazwisko{get; private set;} 
```

我建议阅读MSDN 上的[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)和[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)。

# ruby-on-rails - RSpec 控制器测试

> ID：14418751
> 
> 赞同：0
> 
> 时间：2013-01-19T20:52:56.567
> 
> 标签：ruby-on-rails, ruby, rspec, controllers

我是使用 RSpec 测试的新手，非常感谢您的帮助。

这是我在控制器内的索引操作，我需要对其进行测试，以查看视图内的链接选择是否按预期运行。我会很感激你能提供给我的任何代码，因为我什至不知道从哪里开始。

```
def index
 respond_to do |format|
  format.html
  format.json do
    if params[:s_id].blank? && !params[:f_id].blank?
      @fp_for_dropdown = Model.where(:f_id => params[:f_id])
    elsif !params[:s_id].blank? && params[:f_id].blank?
      @fp_for_dropdown = Model.where(:s_id => params[:s_id])
    elsif !params[:s_id].blank? && !params[:f_id].blank?
        @fp_for_dropdown = Model.where(:s_id => params[:s_id], :f_id => params[:f_id])
    else
      @fp_for_dropdown = Hash[]
    end
    render :json => Hash["" => ""].merge(Hash[@fp_for_dropdown.map { |i| [i.id, i.name] }])
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:02:59.223

这些查询很难在控制器中测试是有充分理由的——它们不属于那里。相反，最好将它们移动到模型上的类方法或[作用域中](http://guides.rubyonrails.org/active_record_querying.html#scopes)，然后从控制器调用它们。然后您可以编写常规的 RSpec[模型规范](https://www.relishapp.com/rspec/rspec-rails/v/2-3/docs/model-specs)。

请参阅：[如何测试范围？](https://stackoverflow.com/questions/4840576/how-to-test-scopes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:09:27.893

解决此问题的一种方法是将控制器测试视为单元测试。这意味着模拟对 Model 的调用以确保调用正确的调用。

```
describe SomeController do
  it 'should retrieve by s_id only' do
    Model.should_receive(:where).with(:s_id => 'abc')
    get :index, :s_id => 'abc'
  end
  it 'should retrieve by f_id only' do
    Model.should_receive(:where).with(:f_id => 'abc')
    get :index, :f_id => 'abc'
  end
  it 'should retrieve by f_id and s_id' do
    Model.should_receive(:where).with(:f_id => 'abc', :s_id => '123')
    get :index, :f_id => 'abc', :s_id => '123'
  end
  it 'should not hit the database without f_id or s_id' do
    Model.should_not_receive(:where)
    get :index
  end
end 
```

如果你想看中，你也可以测试响应json：

```
it 'should retrieve by f_id only' do
  Model.should_receive(:where).with(:f_id => 'abc').and_return(OpenStruct.new(id: 'abc', name: '123'))
  get :index, :f_id => 'abc'
  JSON.parse(response.body).should == {} # INCOMPLETE, fill in response to expect
end 
```

不幸的是，我无法完成响应检查，因为我不知道你在用这一行中的哈希做什么：

```
render :json => Hash["" => ""].merge(Hash[@fp_for_dropdown.map { |i| [i.id, i.name] }]) 
```

查看[jbuilder](https://github.com/rails/jbuilder)或[rabl](https://github.com/nesquena/rabl)以使用视图构建 JSON 响应。

# java - .getSourceLines() 总是返回 0

> ID：14418760
> 
> 赞同：0
> 
> 时间：2013-01-19T20:54:17.513
> 
> 标签：java, audio, javasound, mixer

我有一个混音器，我想收集有关其源代码行的信息。我的代码如下。

```
myMixer = AudioSystem.getMixer(mixerInfo[i]); // index through all list of mixers
Line[] lines = myMixer.getSourceLines();
System.out.println(lines.length); 
```

在代码中，我循环浏览计算机上的每个混音器，然后尝试获取所有源代码行的列表。然而，没有一条源线对混频器开放。我如何访问这些线路？`System.out.println(lines.length)`总是打印 0。

# c++ - LoadCursorFromFile 返回 NULL。GetLastError 也是 0

> ID：14418766
> 
> 赞同：0
> 
> 时间：2013-01-19T20:55:40.207
> 
> 标签：c++, windows, cursor

我正在尝试加载光标

```
LoadCursorFromFile() 
```

来自 WinAPI 的函数并面临如此神秘的问题：玩我的游戏大约 2 小时后（我正在更改游戏中的光标）它无法加载相同的资源，这些资源已经加载了很多次（并且光标只是消失了）。

也经过

```
tCursor = LoadCursorFromFile(filename);
DWORD lusterr = GetLastError(); 
```

光泽度为 0；LoadCursorFromFile 的文件路径类似于“assets/images/cursors/static.cur”。

如果需要，我会分享这个游标。但同样：它已经加载了很多次并且运行良好。

有没有人对这一切发生的原因有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:15:23.230

听起来您有 GDI 资源泄漏。确保释放您获得的任何资源（游标等）。

# javascript - JQuery 自动完成延迟 1 个字符

> ID：14418767
> 
> 赞同：1
> 
> 时间：2013-01-19T20:56:07.137
> 
> 标签：javascript, jquery, autocomplete

我正在尝试对输入进行自动完成，但似乎自动完成的结果晚了 1 个字符。因此，如果我输入“Ubuntu”，它只显示“Ubunt”的建议，然后如果我按退格键，它会以“Ubuntu”完成。这是我的代码：

```
 $('.searchbar').keyup(function(e){
    url = 'inc/autocomplete.php?q=' + $('.searchbar').val();

    $('.searchbar').autocomplete({
        source: url,
        delay: 0,
    }); 
 }); 
```

`.searchbar`是文本类型的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:07:31.403

最好使用[souce](http://api.jqueryui.com/autocomplete/#option-source)函数而不是url。

有关更多信息，请参阅 JQuery UI 的[远程自动完成](http://jqueryui.com/autocomplete/#remote-jsonp)示例。

```
$('.searchbar').autocomplete({
  source: function( request, response ) {
    $.ajax({
      url: 'inc/autocomplete.php',
      dataType: "jsonp",
      data: {
        q: $('.searchbar').val()
      }
... 
```

# google-app-engine - 查询多个实体组

> ID：14418769
> 
> 赞同：1
> 
> 时间：2013-01-19T20:56:36.067
> 
> 标签：google-app-engine, google-cloud-datastore

我有类似用户的实体。每个用户实体属于不同的实体组。是否可以通过对某些属性（例如 date_of _birth 和 zipCode）使用相等过滤器按种类执行查询。目的是让实体不打算修改它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:40:46.517

是的，您可以像这样向查询添加过滤器：

```
Query q = new Query(kind);
q.addFilter("zipCode", FilterOperator.EQUAL, "11000");
PreparedQuery pq = datastore.prepare(q);
return pq.asIterable(); 
```

# javascript - 谷歌图表在 IE7 中间歇性工作

> ID：14418773
> 
> 赞同：0
> 
> 时间：2013-01-19T20:57:04.347
> 
> 标签：javascript, internet-explorer

我创建了在除 IE7 之外的所有浏览器中都能正常工作的图表。每次我进行更改时，我都会在进行另一项更改之前检查它是否有效。一旦我对图表感到满意，我就开始在页面的其他地方添加一个列表（没什么花哨的，只是一个没有样式的无序列表），当我回到 IE7 检查它在页面上的位置时，图表已经消失了。

自从我最后一次知道它有效以来，我撤消了对页面所做的所有更改，但没有任何效果。我什至恢复了我知道可以工作但没有的页面的先前版本，仍然是空白的。我出去煮了杯咖啡，回来刷新了屏幕，瞧，图表工作了。5分钟后再次检查，没有改变任何东西，它又停止了。

```
google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Grade', 'Target', 'Interim Target', 'Actual'],
      ['1',  70, 50,      <? echo $percentage1; ?>],
      ['2',  20, 40,     <? echo $percentage2; ?>],
      ['3',  10, 10,     <? echo $percentage3; ?>]
    ]);

    var options = {
      title: 'Grade Totals',
      colors: ['#B3C234', '#32CCFE', '#713973'],
      hAxis: {title: 'Grades', titleTextStyle: {color: 'black'}},
      vAxis: {title: 'Percentage', titleTextStyle: {color: 'black'}},
      "backgroundColor": { fill: "none" },
      'fontName' : '"Arial"',
    };

    var chart = new google.visualization.ColumnChart(document.getElementById('grades_div'));
    chart.draw(data, options);
  } 
```

我不认为代码有什么问题，我没有疯狂地定制它。我一直在 Windows 8 的 IE10 中使用 Windows 7 浏览器模式对此进行测试。

其他人有这种类型的问题吗？

谢谢

# python - Brython 完全是客户端吗？

> ID：14418774
> 
> 赞同：17
> 
> 时间：2013-01-19T20:57:05.687
> 
> 标签：python, brython

我有一段用 Python 编写的代码。我想将该代码放在网页中。Brython 似乎是将这两件事粘合在一起的最简单方法，但我没有可以在服务器端实际运行代码的服务器。

Brython 是否需要服务器端代码，或者我可以使用（比如）Dropbox 以便宜的价格托管页面吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-20T03:06:46.263

Brython 是相当新的，因此正在迅速变化。但是，您几乎可以在任何地方使用它而无需服务器端代码。

一些可能性：

*   在本地运行，没有任何服务器。您在网络浏览器中打开 html 文件
*   在免费网站上运行，无需服务器端访问，例如博客。例如，我使用 blogger 在我的博客上演示东西，比如这个[交互式面包板](http://raspberry-python.blogspot.com/2013/01/fritzing-with-brython.html)
*   在您可以在服务器端进行操作的主机上运行。这允许您执行 Ajax（相同域 - 检查库中的 ajax 示例），并导入存储在服务器上的库
*   将 brython 与您最喜欢的 Web 框架和模板引擎集成

为了清楚起见，您的服务器上不需要 python。如果您无法链接到 brython.js 文件，您可以在网页中包含 javascript。

至于语言支持，它确实支持所有基础知识，并且确实支持类、列表解析和一些不太明显的东西，如 eval、dis 等。有一个标准输出和标准错误默认为 Web 浏览器控制台，但可以重定向（有关示例，请参见 brython 网站上的控制台）。它通过 JSObject 与 javascript 库完美集成。它有很好的 HTML5 支持。

英文和西班牙文文档稍微落后于法文文档，因为它们是从法语原文翻译而来的。他们应该在接下来的几天内恢复同步。不过，如果您查看[控制台](http://brython.info/tests/console_en.html)和[图库](http://brython.info/gallery/gallery_en.html)，它会让您领略到什么是可能的。

如果您遇到困难，brython 网站上有链接的邮件列表可以提供支持。

我会提供更多示例和链接，但我是新手，所以我对超链接的限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-19T21:08:42.713

Brython 本身似乎完全是客户端，但这是否足够真的取决于您编写的代码。它不是一个成熟的 Python 解释器，也没有库。您可能希望后端支持它或使用评论中建议的其他客户端解决方案。

鉴于很少有真正的网络托管商支持 Python，我认为 Dropbox 不太可能适合这种情况，以防您也需要在服务器上进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-24T11:58:04.583

我了解到，Brython 并不总是使用 python 代码。

我认为需要澄清的是，虽然您可以通过在本地访问文件以非常有限的容量运行 brython，但（由于 AJAX 要求）您无法导入库 - 甚至不是最基本的库（例如，html、时间）。您确实需要一个基本的 Web 服务器才能运行 brython。

我发现它对基本脚本很有用，因为我的 python 比我的 JS 更好。不过，它似乎打破了更复杂的语法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-07T13:35:13.843

是的，brython 完全是客户方面的。是的，您可以将它与 Dropbox 一起使用。您需要做的是将公共链接复制到 brython.js 文件并将其放在 html 文件的 head 标记中，其中默认文本为：

```
<script src=... 
```

将公共链接放在引号中并关闭脚本标签。所以代码看起来像：

```
<html>

    <head>
        <script src="Public Dropbox Link To The brython.js File"></script>
    </head>

    <body onload="brython()">

        <script type="text/python">
        from browser import document, alert

        def echo(event):
            alert(document["zone"].value)

        document['mybutton'].bind('click', echo)
        </script>

        <input id="zone"><button id="mybutton">click !</button>

    </body>

</html> 
```

这是他们在他们的页面上给出的例子。 *注意*您不需要将 html 文件放在您的保管箱中，它可以在任何可以访问互联网的地方。

# android - 在单选按钮单击时为新项目设置动画

> ID：14418778
> 
> 赞同：0
> 
> 时间：2013-01-19T20:57:26.073
> 
> 标签：android, animation, radio-button

我正在尝试创建一个应用程序，其唯一目的是显示 toast 通知。

Toast 通知的其中一件事是持续时间。目前，在 Android 中，两个默认值是`LENGTH_SHORT`和`LENGTH_LONG`。但是，在我的应用程序中，我想让用户选择自己的持续时间。

这个想法是，当他们按下“自定义长度”单选按钮时，视图将展开以显示另一个 EditText，允许他们输入自己的持续时间。但是，我想为这部分（入口和出口）设置动画。

问题是，我对 Android 动画一无所知。我也不知道应该使用哪种方法来处理 EditText（应该每次都创建和销毁它，还是存储在某个地方？）

如果您不确定我的意思，请考虑 iOS 的 WiFi 设置页面。当您启用 WiFi 时，网络会在它下面淡入，当您禁用它时，它们会淡出。

这是我的 RadioGroup XML：

```
<RadioGroup
        android:layout_below="@+id/radioHint"
        android:id="@+id/durationGroup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/radioShort"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:checked="true"
        android:text="@string/radioShort" />

    <RadioButton
        android:id="@+id/radioLong"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:text="@string/radioLong" />

    <RadioButton
        android:id="@+id/radioCustom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20dp"
        android:text="@string/radioCustom" />
</RadioGroup> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:59:51.010

你应该看看这些页面：http: [//developer.android.com/training/animation/index.html](http://developer.android.com/training/animation/index.html)

它解释了如何制作动画，如视图之间的交叉淡入淡出、缩放视图和动画布局更改。

# android - 使用后退按钮恢复已删除视图的方法？

> ID：14418781
> 
> 赞同：2
> 
> 时间：2013-01-19T20:57:39.760
> 
> 标签：android

我在LinearLayout 内创建了一个ListView，它又在一个选项卡中。该列表基本上是进一步打开其他列表的类别列表。我是如何做到这一点的，我只是放置了一个 OnItemClickListener 并在单击一个类别后我在 LinerLayout 上使用了 removeAllViews() ，然后再次添加了相应类别的新 ListView 。

问题是从类别内按下后退按钮不会回到第一个列表，而是完全在有列表之前，因为整个事情都发生在一个活动中。那么有没有可能阻止这种情况发生呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:00:58.940

用于`onBackPressed`覆盖 BackButton 的操作。

```
@Override
public void onBackPressed() {
    // do something when the BackButton is pressed
    // what you can do is again removeAllViews() from the LinearLayout and redraw your first list
    return;
} 
```

# django - 如何在 django admin 验证器中处理尚未创建的列表

> ID：14418784
> 
> 赞同：0
> 
> 时间：2013-01-19T20:57:57.077
> 
> 标签：django, django-admin, many-to-many, validation

我创建了一些自定义管理员验证，就像我想要的一样，除了在一种情况下。

它旨在检查以确保在多对多字段中创建的列表具有正确数量的项目（“玩家”），并且列表中的男女比例是可以接受的。

```
def clean(self):
    super(GameRosterForm, self).clean()
    players = self.cleaned_data.get('players', None)
    RosterRulesOn = self.cleaned_data.get('RosterRulesOn', None)
    women = players.filter(sex='F')
    womenPct = int((women.count()/float(players.count()))*100)
    if RosterRulesOn is True and players.count() < 8:
        raise ValidationError('Rosters must have at least 8 players. You have only selected %s.' % (players.count())) 
    if RosterRulesOn is True and players.count() > 18:
        raise ValidationError('Rosters cannot have more than 18 players. You have selected %s.' % (players.count()))
    if RosterRulesOn is True and womenPct < 40:
        raise ValidationError('Women must make up at least 40 percent of roster. They only constitute %s percent now.' % (womenPct))   
    return self.cleaned_data 
```

正如我所说，它在大多数情况下都可以正常工作，但是当用户尚未将播放器添加到 m2m 时，它会返回错误：'list' object has no attribute 'filter' with reference to the women=players.filter(性别='F') 行。

我尝试了一些“if”和“try”条件来尝试绕过问题，但找不到有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T00:28:31.620

这个怎么样：

```
players = self.cleaned_data.get('players', None)
RosterRulesOn = self.cleaned_data.get('RosterRulesOn', None)
women = [player for player in players if player.sex=='F']
womenPct = int((len(women)/float(players.count()))*100) 
```

# base64 - base64编码数据的缺点是什么？

> ID：14418785
> 
> 赞同：3
> 
> 时间：2013-01-19T20:57:58.310
> 
> 标签：base64

在过去两年左右的时间里，我为 Web 编码了多种类型的数据：图像、`.otf`文件、文本等。作为一种临时的资产整合方法很实用（数据直接嵌入在 CSS 或 HTML 中，不必担心死链接），但是使用这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T21:04:52.313

base64 编码的数据比原始数据大 33% 左右。

另一个影响是您将几条数据捆绑在一起形成更大的块。有时这是积极的影响，有时是消极的。请求更少的资源是积极的，但前提是资源具有相同的缓存状态。例如，如果您将图像捆绑在 HTML 页面中，则无法单独缓存该图像，因为每次获取 HTML 页面时都必须获取该图像。

# html - 如何修复div框的显示图片右下角

> ID：14418798
> 
> 赞同：0
> 
> 时间：2013-01-19T20:59:50.827
> 
> 标签：html, css, positioning

我正在尝试修复 div 框内右下角的图片...以便文本可以翻转它

我应用了下面的 css 来实现这一点，但它没有达到结果。

```
.content_body
{
margin: 0 auto;
width: 100%;
overflow: hidden;
padding-top: 30px;
background: #E6E6E0;
color: #555;
font-family: Tahoma, Arial, sans-serif;
font-size: 14px;
min-height: 800px;
background-image: url(http://types4u.org/Tomike/temp/images/saturation.png) ;
background-position: right bottom; 
background-repeat: no-repeat;
}

#footer
{
background: url(http://types4u.org/Tomike/temp/images/bg2.jpg) #E6E6E0;
color: white;
font-family: Lato, Tahoma, Arial, sans-serif;
font-size: 13px;
line-height: 1.5em;
padding: 40px 50px 50px 50px;
clear: both;
border-top: solid #000033 5px;
}

.design_by
{
float:     right;
font-size: 2.4em;
font-family: 'tangerine', cursive;

color:     white;
}

.copyright
{
float:     left;
font-size: 2.4em;
font-family: 'tangerine', cursive;
color:     white;
}

 <div class="content_body"> 
 hello
  </div>

  <div id="footer">
 <div class="copyright">
     <a href="#">mine.com</a> &copy copyright 2013 all rights reserved.
 </div>  

 <div class="design_by">  
     Design by <a href="http://types4u.org" target="http://types4u.org">types 4 u</a> 
 </div> 
 </div> 
```

一个例子在这里[jsfiddle](http://jsfiddle.net/CjXxk/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:02:14.037

再次查看此更新：http: [//jsfiddle.net/CjXxk/1/](http://jsfiddle.net/CjXxk/1/)

您的代码一切都很好，但我认为您忘记添加`background-repeat`到您的 css 代码：

```
.content_body
{
    margin: 0 auto;
    width: 100%;
    overflow: hidden;
    padding-top: 30px;
    background: #E6E6E0;
    color: #555;
    font-family: Tahoma, Arial, sans-serif;
    font-size: 14px;
    min-height: 800px;
    background-image: url(http://types4u.org/Tomike/temp/images/saturation.png) ;
    background-position: right bottom; 
    background-repeat: no-repeat;
} 
```

有什么`background-repeat`作用？请参阅有关w3schools 的[这篇文章：](http://www.w3schools.com/cssref/pr_background-repeat.asp)`background-repeat`

> background-repeat 属性设置是否/如何重复背景图像。
> 
> 默认情况下，背景图像会在垂直和水平方向上重复。

**编辑：**

用于`background-attachment: fixed;`固定背景图像。您也可以使用`z-index`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:02:36.420

您需要添加：

```
background-repeat: no-repeat; 
```

添加它以使其在滚动时保持静态：

```
background-attachment: fixed; 
```

# objective-c - 对象数 (0) 与键数 (1) 不同

> ID：14418801
> 
> 赞同：2
> 
> 时间：2013-01-19T21:00:34.813
> 
> 标签：objective-c, object, key, plist, nsdictionary

不断弹出一个错误，说明键的数量与对象的数量不同，并且程序不断崩溃。

下面的代码是有问题的。

```
-(void)saveData //error is in here
{

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
//get documents path
NSString *documentsPath = [paths objectAtIndex:0];
//get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];

//set the variables to the values in the text fields
self.topScores = highScore.text;

//create dictionary with values in UITextFields
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: topScores, nil] forKeys:[NSArray arrayWithObjects: @"bestScore", nil]];

NSString *error = nil;
//create NSData from dictionary
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList: plistDict format: NSPropertyListXMLFormat_v1_0 errorDescription: &error];

//check if plist data exists
if (plistData)
{
    //write plistData to our Data.plist file
    [plistData writeToFile:plistPath atomically:YES];
}
else
{
    NSLog(@"Error in saveData: %@", error);
    [error release];
 }
} 
```

该代码有效，但随后在此处崩溃

```
 if (newTopScore > [topScores intValue]) 
        {
            topScores = ([NSString stringWithFormat:@"%i", newTopScore]); 
        }

        highScore.alpha = 1; 

    [self saveData]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:31:31.280

它必须是这一行：

```
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects: [NSArray arrayWithObjects: topScores, nil] forKeys:[NSArray arrayWithObjects: @"bestScore", nil]]; 
```

它必须`topScores`是 nil，这意味着 objects 数组的大小为 0，而 keys 数组的大小为 1。

你需要找出为什么`topScores`是零。

例如，尝试运行以下代码：

```
NSDictionary *plistDict = [NSDictionary dictionaryWithObjects:@[] 
                                                      forKeys:@[@"bestScore"]]; 
```

你会得到：

> `*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSDictionary initWithObjects:forKeys:]: count of objects (0) differs from count of keys (1)'`

# c# - Linq 转换 Xelement 错误：无法将“System.Xml.Linq.XElement”类型的对象转换为“System.IConvertible”类型

> ID：14418803
> 
> 赞同：4
> 
> 时间：2013-01-19T21:00:55.507
> 
> 标签：c#, xml, linq, casting, linq-to-xml

我正在尝试按如下方式解析 XML 文档：

```
var locs = from node in doc.Descendants("locations")                              
select new
{
    ID = (double)Convert.ToDouble(node.Attribute("id")),
    File = (string)node.Element("file"),
    Location = (string)node.Element("location"),
    Postcode = (string)node.Element("postCode"),
    Lat = (double)Convert.ToDouble(node.Element("lat")),
    Lng = (double)Convert.ToDouble(node.Element("lng"))
}; 
```

我收到错误：

> 无法将“System.Xml.Linq.XElement”类型的对象转换为“System.IConvertible”类型。

当我检查节点的值时，我会正确地从位置子节点获取所有元素，但它不想为我分解它。我已经检查了与此类似的错误，但无法弄清楚我做错了什么。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T21:02:47.140

您不需要将元素或属性转换为双精度。只需将它们加倍：

```
var locs = from node in doc.Descendants("locations")
           select new
           {
               ID = (double)node.Attribute("id"),
               File = (string)node.Element("file"),
               Location = (string)node.Element("location"),
               Postcode = (string)node.Element("postCode"),
               Lat = (double)node.Element("lat"),
               Lng = (double)node.Element("lng")
           }; 
```

Linq to Xml 支持显式转换[运算符](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)。

是的，`XElement`没有实现`IConvertable`接口，因此你不能将它传递给`Convert.ToDouble(object value)`方法。您的代码将使用将节点值传递给`Convert.ToDouble(string value)`方法。像这样：

```
Lat = Convert.ToDouble(node.Element("lat").Value) 
```

但同样，最好简单地将节点转换为`double`类型。`double?`如果您的 xml 中可能缺少属性或元素，则为（可为空）。在这种情况下访问`Value`属性会引发`NullReferenceException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:27:29.043

你不是简单地错过了`.Value`房产吗

```
 var locs = from node in doc.Descendants("locations")

                  select new
                  {
                      ID = Convert.ToDouble(node.Attribute("id").Value),
                      File = node.Element("file").Value,
                      Location = node.Element("location").Value,
                      Postcode = node.Element("postCode").Value,
                      Lat = Convert.ToDouble(node.Element("lat").Value),
                      Lng = Convert.ToDouble(node.Element("lng").Value)
                  }; 
```

# c# - 并行网络客户端

> ID：14418809
> 
> 赞同：1
> 
> 时间：2013-01-19T21:01:32.350
> 
> 标签：c#, .net-4.0, task-parallel-library, webclient

我有一个功能，基本上分为两个子功能。

```
html=RetriveHTML(int index);
returnColection = RegexProcess(html, index); 
```

通过优化 RetrieveHTML 并行化来加速此过程的最佳方法是什么？

通常我用多达 20000 个索引来调用它。第一个子功能依赖于网络（使用 webclient.downloadstring 从一个服务器获取多个 URLs HTML），第二个子功能主要是 CPU。

我迷失在 Parallel foreach 和 Tasks(continue with, continueall, fromasync) 世界中，我很难找到解决方案。我首先尝试 Parallel foreach 是因为它的简单性，但我发现它的性能，即网络 I/O 会随着连续调用而下降（第一个循环很快，其他循环变慢）。该解决方案将在处理 html 对象时释放它们，因为它们很多且很大。我正在使用.net 4.0 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T00:29:13.443

你好，你可以试试下面的代码

```
private Regex _regex= new Regex("net");

        private void ProcessInParallell()
        {
           Uri[] resourceUri = new Uri[]{new Uri("http://www.microsoft.com"),new Uri( "http://www.google.com"),new Uri( "http://www.amazon.com") };

            //1\. Stage 1: Download HTML

            //Use the blocking collection for concurrent tasks
            BlockingCollection<string> htmlDataList = new BlockingCollection<string>();

            Parallel.For(0, resourceUri.Length , index =>
                {   var html = RetrieveHTML(resourceUri[index]);

                    htmlDataList.TryAdd(html);

                    //If we reach to the last index, signal the completion
                    if (index == (resourceUri.Length - 1))
                    {   
                        htmlDataList.CompleteAdding();
                    }

                });

            //2\. Get matches

            //This concurrent bags will be used to store the result of the matching stage
            ConcurrentBag<string> matchedHtml = new ConcurrentBag<string>();

            IList<Task> processingTasks  = new List<Task>();

            //Enumerate through each downloaded HTML document
            foreach (var html  in htmlDataList.GetConsumingEnumerable())
            {
                //Create a new task to match the downloaded HTML
              var task=   Task.Factory.StartNew((data) =>
                    {
                        var downloadedHtml = data as string;
                        if(downloadedHtml ==null)
                            return;

                        if (_regex.IsMatch(downloadedHtml))
                        {

                            matchedHtml.Add(downloadedHtml);
                        }

                    }, 
                     html  
                    );

                //Add the task to the waiting list
                processingTasks.Add(task);

            }

            //wait for the all tasks to complete
            Task.WaitAll(processingTasks.ToArray());

            foreach (var html in matchedHtml)
            {
                //Do something with the matched result    

            }

        }

        private string  RetrieveHTML(Uri uri)
        {
           using (WebClient webClient = new WebClient())
           {
               //set this to null if there is no proxy
               webClient.Proxy = null;

               byte[] data =webClient.DownloadData(uri);

               return Encoding.UTF8.GetString(data);
           }
        } 
```

# qt - 如何在 QML 运行时以编程方式更改主窗口的几何形状？

> ID：14418811
> 
> 赞同：5
> 
> 时间：2013-01-19T21:01:50.033
> 
> 标签：qt, qml, qt-quick, qt5, qtquick2

我有 Qt Creator 2.6.1。我从项目模板创建了简单的 Qt Qucik 2.0 项目，并在此更改了 main.qml 文件：

```
import QtQuick 2.0

Rectangle {
    width: 360
    height: 360

    color: "red"

    MouseArea {
        anchors.fill: parent
        onClicked: parent.height = 180
    }
} 
```

如果我点击矩形，它应该减少一半。它发生了，但窗口不减少。

如果我希望主窗口必须重复主 qml 矩形的几何图形，最好的解决方案是什么？

更新。找到了一种解决方案。请参阅 Amit Tomar 的答案。但是是否存在更简单的解决方案，例如，使用[QtQuick 5.0: Qt Quick Window QML Types](http://qt-project.org/doc/qt-5.0/qtquick/qmlmodule-qtquick-window2-qtquick-window-2.html)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T22:26:31.403

您正在更改 qml 的几何形状，而不是查看器。为此：

1.  查看器的几何形状可以使用您在主函数中创建的 QmlApplicationViewer 对象进行更改。
2.  但是该对象是 C++ 中的，因此您需要向 qml 公开一个 C++ 函数，并在单击此按钮时调用该函数。

脚步：

1.  创建一个类并将在 main.cpp 中创建的应用程序查看器对象存储在该类中以供进一步调用。
2.  [将此类中的函数公开给 qml。](http://doc.qt.digia.com/qt/qtbinding.html#calling-functions)该函数应该能够使用存储在类中的应用程序查看器对象来修改大小。
3.  单击 qml 矩形时，调用此函数。

主文件

```
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
#include "qdeclarativecontext.h"

#include "myclass.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    QmlApplicationViewer *viewer = new QmlApplicationViewer();

    MyClass myClassObject(viewer);
    viewer->rootContext()->setContextProperty("myViewer", &myClassObject);
    viewer->setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer->setMainQmlFile(QLatin1String("qml/untitled/main.qml"));
    viewer->showExpanded();

    return app.exec();
} 
```

我的班级.h

```
#ifndef MYCLASS_H
#define MYCLASS_H

#include "qmlapplicationviewer.h"

class MyClass : public QObject
 {
     Q_OBJECT

 public:

    MyClass( QmlApplicationViewer * p ) { internalViewer = p ; }
    Q_INVOKABLE void viewerResize(int x, int y, int length, int breadth)

     {
       internalViewer->setGeometry(internalViewer->x(),internalViewer->y(),length,breadth);
     }

private:

    QmlApplicationViewer *internalViewer;
 };

#endif // MYCLASS_H 
```

main.qml

```
import QtQuick 1.0

Rectangle {
    width: 360
    height: 360
    Text {
        text: "Hello World"
        anchors.centerIn: parent
    }
    MouseArea {
        anchors.fill: parent
        onClicked:
        {
            myViewer.viewerResize(0,0,110,110)
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-03T16:10:20.060

**ApplicationWindow**桌面控件为您提供所需的窗口大小调整功能：

```
import QtQuick 2.0
import QtQuick.Controls 1.0

ApplicationWindow {
    id: container
    width: 360
    height: 360
    color: "Red"

    MouseArea {
        anchors.fill: parent
        onClicked: container.height = 180
    }
} 
```

注意：我不能只使用`parent.height`in `onClicked`-- 我必须通过 id 来引用窗口。

# java - ORMlite 改变主键

> ID：14418816
> 
> 赞同：0
> 
> 时间：2013-01-19T21:02:14.037
> 
> 标签：java, database, annotations, dao, ormlite

有没有办法改变 ORMlite 定义的数据库的主键？

我有一个班级用户

```
@DatabaseField(columnName = NAME_FIELD_NAME, canBeNull = false, id = true)
private String name = ""; 
```

我用`DAO.querybyid(String name);`

但是当我尝试更改数据库中的名称时，它没有给我任何警告，ORMLite 会更改表列并删除索引，然后更新列并再次放置索引吗？

我不这么认为呵呵？所以需要一个解决方法:(但也希望 DAO.querybyid() 优势来通过字符串获取用户。

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:06:50.647

> ORMLite 会改变表列并删除索引，然后更新列并再次放置索引吗？

[`dao.rawExecute(...)`我假设您正在使用该方法](http://ormlite.com/docs/raw-update)更改您的架构？ [ORMLite](http://ormlite.com/)并没有对这个语句做任何神奇的事情——它只是将它发送到底层数据库。因此，如果您要求该字段`name`但已重命名为，`id`则 DAO 将无法工作，因为它与数据库不对应。它将执行`"SELECT name, ... FROM ..."`并得到一个 SQL 错误。

你*可以*做的是有两个不同版本的类。第一个具有“旧”字段名称，新的具有“新”名称。然后如果检测到需要更新模式，就可以发出原始`ALTER`SQL 语句，然后开始使用与新版本类对应的 DAO。

# java - file.getParentFile().mkdirs(); 在 osx 中创建重复的文件夹

> ID：14418817
> 
> 赞同：1
> 
> 时间：2013-01-19T21:02:20.220
> 
> 标签：java, macos, file, exception, directory

我目前正在开发一个旨在在 windows 和 osx 上运行的程序，我有这个功能来复制一个在 windows 中完美运行的文件，但是当我在 osx 中尝试它时，我得到一个 IOException：“没有这样的文件或目录”，我研究了一点点，发现目标目录可能不存在（虽然它确实存在）所以我添加了这些行：

```
if(!f2.getParentFile().exists())
{
    f2.getParentFile().mkdirs();
}
if(!f2.exists())
{
   f2.createNewFile();
} 
```

这似乎解决了问题，但是当我查找复制的文件（位于文档中）时，我一开始找不到它，但后来我看到程序实际上创建了一个我想保存文件的重复文件夹进入，所以我最终得到了两个具有完全相同“文档”名称的文件夹，这是其余的代码：

```
 public static Boolean copyfile(String srFile, String dtFile )
{
    {
          try
          {
          File f1 = new File(srFile);
          File f2 = new File(dtFile);
          if(!f2.getParentFile().exists())
          {
              f2.getParentFile().mkdirs();
          }
          if(!f2.exists())
          {
              f2.createNewFile();
          }
          InputStream in = new FileInputStream(f1);
          OutputStream out = new FileOutputStream(f2);

          byte[] buf = new byte[1024];
          int len;
          while ((len = in.read(buf)) > 0){
          out.write(buf, 0, len);
          }
          in.close();
          out.close();
          System.out.println("File copied.");
          }
          catch(FileNotFoundException ex){
          System.out.println(ex.getMessage() + " in the specified directory.");
          JOptionPane.showMessageDialog(new JFrame(), ex.getMessage());
          return true;
          }
          catch(IOException e){
          System.out.println(e.getMessage());  
          JOptionPane.showMessageDialog(new JFrame(), e.getMessage());
          return true;
          }
          }
    return false;
} 
```

这显然不是想要的结果，我该怎么做才能让程序识别我要保存文件的文件夹？

更新：我使用了 ls -B 命令，它以不同的语言显示了两个文件夹：“Documents”和“Documentos”，即使它们在查找器中都显示为“Documentos”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:35:30.803

> 所以我最终得到了两个具有完全相同“文档”名称的文件夹，

那不可能发生。这两个目录具有（可能非常微妙）不同的名称。例如，名称中可能有一个尾随空格等。

一旦弄清楚名称的区别是什么，就应该很清楚如何解决该问题。

您可以使用以下命令来解决此问题： `ls -B`应该将任何不可打印的字符显示为`\xxx`. 至于尾随空格等，请尝试`ls -1 | od -c`仔细检查输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:16:33.730

如果您使用的是 Java 7，请尝试使用 java.nio.file 包。错误（如果有）应该提供更多信息：

```
Path source = Paths.get(srFile);
Path dest = Paths.get(dtFile);
Files.createDirectories(dest.getParent());
Files.copy(source, dest); 
```

我建议你避免调用`getMessage()`Throwable 的方法。它通常提供没有意义的信息，除非显示在异常类旁边。所以，代替`println(ex.getMessage())`，使用`println(ex)`。当然，比其中任何一个都有用得多`ex.printStackTrace()`。

# google-apps-script - Google Apps 脚本：强制库以其所有者作为用户运行

> ID：14418819
> 
> 赞同：2
> 
> 时间：2013-01-19T21:02:28.150
> 
> 标签：google-apps-script

我在 GAS 中编写了一个脚本库来管理我的 Google Drive 中的一些电子表格。我已将库中的几个函数附加到电子表格菜单中，并与一些同事共享。我希望这能让他们更新我驱动器上电子表格的某些部分。不幸的是，该库在很大程度上依赖于通过文件在我的 DocsList 中的路径获取文件。因此，库和对库的电子表格菜单调用对我来说工作正常，但当我的一位同事使用该菜单时失败。我确信我可以通过 Id 获取所需的一切并确保与所有人共享适当的文件来解决此问题。但是，如果可能的话，我想避免这样做。有没有办法确保图书馆始终以其作者身份运行？这样的功能可以为我节省一些工作，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T03:00:15.707

您是否尝试进入脚本并从顶部菜单中选择“发布”并将其部署为 Web 应用程序？如果您这样做，您可以作为所有者或访问该应用程序的用户执行该应用程序。您还可以将访问权限设置为只有您自己、您域中的用户或任何人。

# php - Wordpress query_posts 问题

> ID：14418823
> 
> 赞同：0
> 
> 时间：2013-01-19T21:02:51.590
> 
> 标签：php, wordpress

我正在尝试在两个单独的 div 中显示来自不同类别的帖子。我第一次使用 query_posts，但我认为我没有正确关闭它或其他什么，因为如果我将第一个 div 设置为仅显示类别 5 的帖子，第二个设置仅显示类别 4 的帖子，它们都会显示来自 5 的帖子。

我究竟做错了什么？

```
<!--- START FIRST DIV --->
<div>

<?php if (is_home()) {query_posts("cat=5");}?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<div>
<article <?php post_class() ?> id="post-<?php the_ID(); ?>">
<div><?php the_post_thumbnail( array(300, 170) ); ?></div>
<div><a href="<?php the_permalink() ?>"><?php the_title(); ?><br />(<?php the_date(); ?>)</a></div>
</article>
</div>

<?php endwhile; ?>
<?php endif; ?>

</div>
<!--- END FIRST DIV -->

<!--- START SECOND DIV --->
<div>

<?php if (is_home()) {query_posts("cat=4");}?>
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<div>
<article <?php post_class() ?> id="post-<?php the_ID(); ?>">
<div><?php the_post_thumbnail( array(300, 170) ); ?></div>
<div><a href="<?php the_permalink() ?>"><?php the_title(); ?><br />(<?php the_date(); ?>)</a></div>
</article>
</div>

<?php endwhile; ?>
<?php endif; ?>

</div>
<!--- END SECOND DIV --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:07:11.990

`wp_reset_query()`在第一个循环之后尝试。

# c - c中的fork（）两个子进程

> ID：14418827
> 
> 赞同：0
> 
> 时间：2013-01-19T21:03:03.193
> 
> 标签：c, linux, fork, wait

分叉 2 个孩子的 ac 程序，第一个休眠 10 秒，第二个等待第一个孩子退出并打印相关消息，父母等待 2 个孩子的终止，我不知道为什么第二个孩子不等待第一个孩子终止。请帮助

```
#include <sys/types.h>
#include <sys/wait.h>
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

main(){
    int status;
        pid_t child1, child2,ret,ret2;

    child1=fork();
    if(child1==0){
        //this branch of code is being executed by the child1 process

        printf("I'm the first child with %d, I sleep for 10 sec \n",getpid());
        sleep(10);
        printf("child1 pid %d exiting\n",getpid());
                exit(1);
    }
    if(child1>0){

        child2=fork();
        ret=waitpid(child1,&status,0);

        if(child2==0){

             wait(&status);//???why child2 does not wait the child1 exit?

            printf("I'm the second child with %d, I have waited for the termination of the first child\n",getpid());
                        printf("child2 exited\n");
                        exit(1);

        }
        if(child2>0){

                        printf("father of child2 is waiting\n");
            ret2=waitpid(child2,&status,0);
            printf("I'm the father, my terminated process id is: %d \n",getpid());
            printf("I'm the father, my first child's id is: %d\n", child1);
            printf("I'm tha father, my second child's id is: %d\n", child2);

        }

    }

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:05:22.517

函数族`wait`只能由父母使用来等待孩子。进程不能使用它们来等待兄弟姐妹。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T21:04:38.400

一个进程只能`wait`用于它的直接子级。在这种情况下，这意味着父进程必须`wait`为 child1 和 child2 执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T12:01:10.933

在进程层次结构中，子级既不等待父级，也不等待另一个子级。您可以使用某种形式的 IPC 机制将信息从一个孩子传递给另一个孩子，

# c - 操作系统 - 进程

> ID：14418831
> 
> 赞同：0
> 
> 时间：2013-01-19T21:03:30.093
> 
> 标签：c

考虑到这两个程序：

```
 //in  
 #define MAX 50
 int main(int argc, char* argv[]) {
     int *count;
     int fd=shm_open("/count",O_RDWR|O_CREAT,S_IRUSR|S_IWUSR);
     int ret=ftruncate(fd,sizeof(int));
     count=mmap(0,sizeof(int),PROT_READ|PROT_WRITE,MAP_SHARED,fd,0);

     while ((*count)==MAX);
     (*count)++;
 }

  //out 
  int main(int argc, char* argv[]) {
      int *count;
      int fd=shm_open("/count",O_RDWR|O_CREAT,S_IRUSR|S_IWUSR);
      int ret=ftruncate(fd,sizeof(int));

      count=mmap(0,sizeof(int),PROT_READ|PROT_WRITE,MAP_SHARED,fd,0);

      (*count)--;
 } 
```

我有两个问题：

1）为什么这个程序不能正常工作（不保证count的数量永远不会超过50）？

2）如何纠正这两个程序来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:49:07.897

你确定你想做：

```
while((*count)==MAX); // semicolon ? 
```

代替

```
 while(*count==MAX)
       (*count)++; 
```

还要检查 mmap 的返回值，它可能会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T11:02:57.690

您似乎对循环感到困惑。在这种情况下，“从不”这个词意味着你想要一个无限循环。`while ((*count)==MAX)`不是无限循环。在无限循环中，我假设您需要确定 *count 是否大于 50 并从那里开始执行的逻辑。如果您正在努力用 C 来表达您的算法，我建议您阅读诸如 K&R 的“The C Programming Language”之类的书。这本书很可能以您的母语提供。

# ruby-on-rails - 使用 EmberData 解释实时 Ruby on Rails 堆栈

> ID：14418832
> 
> 赞同：0
> 
> 时间：2013-01-19T21:03:38.543
> 
> 标签：ruby-on-rails, ember.js

我正在进入实时应用程序，并尽可能坚持使用 RoR。我建议的堆栈类似于：

*   回报率
*   带纤维的Eventmachine
*   骨干网/余烬

我遇到的麻烦是关于数据持久性。Ember 使用 EmberData，但它可以或应该与 ActiveRecord 结合使用吗？数据持久层如何在上述应用程序中工作？EmberData 是否直接访问数据库？我是否必须在 EmberData 和 ActiveRecord 中模拟模型映射？

原谅我的无知，我一直在寻找，这对我来说只是全新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:30:29.580

看看这个 [http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html](http://reefpoints.dockyard.com/ember/2013/01/07/building-an-ember-app-with-rails-api-part-1.html)。

有3篇文章。

Ember.js 是一个 MVC 前端框架，它不能直接访问你的数据库。它通过您的应用程序公开的 API 与 Rails 进行通信。

还有[https://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)

# c++ - 有没有一种简单的方法可以将图像添加到 .exe 文件中？

> ID：14418837
> 
> 赞同：1
> 
> 时间：2013-01-19T21:04:18.973
> 
> 标签：c++

我正在用 C++ 开发一个游戏，这是我第一次想向其他人展示我的作品。

我遇到了一个问题，我无法找到如何完成包含所需图像的 .exe 文件。我已经阅读了一些讨论应该如何完成的网站，但没有提供所有步骤。

如果有人对如何做到这一点有任何可靠的资源，我将不胜感激。

编辑：使用 Windows 7 64 位

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:09:48.640

通常图像不会嵌入二进制文件中，因为从性能的角度来看这是毫无意义的（为什么要将单个图像的数百万字节数据嵌入二进制文件中？强制将所有图像与可执行文件一起加载？ ）。

通常做的是有一个资源文件夹，通常相对于 exe 工作目录，以便您的二进制文件能够直接从磁盘（或您使用的任何设备）加载它们。

当您分发游戏时，您只需通过保持相同的文件夹结构来附加所有内容。

根据您使用的技术，您所要求的可能是可能的，但我看不出这样做的意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:11:57.890

您应该查看链接器的文档，或者至少询问指定您使用哪个链接器的问题——这是*它*的工作。

例如，这在某些时候对我有用：

脚本：

```
ld -r -b binary monster_die.wav -o monster_die.o
(link monster_die.o eventually into the executable) 
```

sfx.h：

```
extern char binary_monster_die_wav_start;
extern char binary_monster_die_wav_end;
static const char* monster_die_wav = &binary_monster_die_wav_start;
static const size_t monster_die_wav_size =
    &binary_monster_die_wav_end - &binary_monster_die_wav_start; 
```

# sql - 在 SQL 中搜索 int 值

> ID：14418841
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:04:37.813
> 
> 标签：sql, search, integer

我应该如何在表中搜索`int`值？实际上，我的 sql 查询适用于字符串值，但不适用于数字。

```
SELECT * FROM [Book] WHERE ([bookId] = @bookId) 
```

我正在使用 vs 并从文本框中获取值。在 gridview 中插入查询。

`bookId`是一个自动生成的`INT`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:09:21.480

假设你有表 A

```
+----------------+---------------------+------+-----+---------+----------------+
| Field          | Type                | Null | Key | Default | Extra          |
+----------------+---------------------+------+-----+---------+----------------+
| id             | int(11)             | NO   | PRI | NULL    | auto_increment | 
| data           | int(11)             | NO   | MUL | NULL    |                | 
```

询问

```
select * from A where data = 3 
```

将返回表 A 中 int 值为 3 的所有数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:50:54.657

除非您向我们提供更多信息，否则这个问题很难回答。在这种情况下，有用的信息是**Book**表的表模式或 CREATE 语句，由表中的属性（或列）列表及其数据类型组成。了解您正在使用的数据库管理系统 (DBMS) 也会有所帮助，例如 MySQL、PostgreSQL、Microsoft SQL Server、Oracle 数据库等。

我假设您的表可以通过以下 CREATE 语句创建：

```
CREATE TABLE Book (
  bookId INT,
  bookTitle VARCHAR(30),
  bookAuthor VARCHAR(30),
  ..
); 
```

在这种情况下，假设（再次）您的**Book**表包含*bookId 为*3 的书，以下查询应该可以正常运行：

```
DECLARE @bookId INT;
SET @bookId = 3;

SELECT *
FROM   [Book]
WHERE  ([bookId] = @bookId); 
```

如果这不起作用，我猜你*bookId*属性的数据类型不是 INT，而是某种文本类型。但同样，仅使用您迄今为止提供的数据很难为您提供帮助。

# php - 如何在新窗口中输出图像、视频和音频播放器

> ID：14418843
> 
> 赞同：1
> 
> 时间：2013-01-19T21:04:38.663
> 
> 标签：php, html, mysqli

我有三个表格行，其中包含各自行中的图像、视频和音频列表：

```
 echo '<td width="11%" class="imagetd">'. ( ( empty ($arrImageFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrImageFile[$key] ) ? implode(",", $arrImageFile[$key]) : $arrImageFile[$key] ) ). '</li></ul></td>' . PHP_EOL;
    echo '<td width="11%" class="videotd">'. ( ( empty ($arrVideoFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrVideoFile[$key] ) ? implode(",", $arrVideoFile[$key]) : $arrVideoFile[$key] ) ). '</li></ul></td>' . PHP_EOL;
    echo '<td width="11%" class="audiotd">'. ( ( empty ($arrAudioFile[$key]) ) ? "&nbsp;" : '<ul class="qandaul"><li>'.htmlspecialchars( is_array( $arrAudioFile[$key] ) ? implode(",", $arrAudioFile[$key]) : $arrAudioFile[$key] ) ). '</li></ul></td>' . PHP_EOL; 
```

该列表是一个数组，其中包含来自数据库的数据。下面是视频数组和数据库的代码。音频和图像具有相似的设置

```
 $vidquery = "SELECT s.SessionId, q.QuestionId, v.VideoId, VideoFile
                FROM Session s
                INNER JOIN Question q ON s.SessionId = q.SessionId
                INNER JOIN Video_Question vq ON q.QuestionId = vq.QuestionId
                INNER JOIN Video v ON vq.VideoId = v.VideoId
                WHERE s.SessionId = ?";

    global $mysqli;
    $vidqrystmt=$mysqli->prepare($vidquery);
    // You only need to call bind_param once
    $vidqrystmt->bind_param("i",$_POST["session"]);
    // get result and assign variables (prefix with db)
    $vidqrystmt->execute(); 
    $vidqrystmt->bind_result($vidSessionId,$vidQuestionId,$vidVideoId,$vidVideoFile);

        $arrVideoFile = array();

    while ($vidqrystmt->fetch()) {
    $arrVideoFile[] = basename($vidVideoFile);
  }

    $vidqrystmt->close(); 
```

现在它只是在项目符号列表中列出图像、视频和音频文件名。但我想要做的是我想将每个文件设置为一个超链接，这样如果用户单击其中一个链接，它将在单独的页面中显示图像、视频或音频（将打开一个单独的窗口） ，无论是作为较大的播放器还是显示播放器来播放视频或音频。

我的问题是如何做到这一点，我需要执行以下哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T15:24:04.427

我的建议是将每个媒体元素（音频、图像、视频）包装到一个标签中 - 锚 (a) 例如像这样：

```
<a href='previewImage.php?imgId=[xxx]' target='_blank'>myImage.jpg</a> 
```

其中 [xxx] 是图像的 ID 或名称。

在`previewImage.php`你得到它的地方`$_GET['imgId']`，从 DB 中选择它并显示它。`previewVideo.php`和_`previewAudio.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T18:58:36.083

```
<?php
//start:procedure
$img_result = '';
if(empty($arrImageFile[$key])){
  $img_result = '&nbsp;';
}else{
  $img_$result .=  '<ul class="qandaul"><li>';
   if(is_array( $arrImageFile[$key] )){
    foreach($arrImageFile[$key] as $filename){
     $img_$result.= CreateLink($filename, "image");
    }
   }else{
    $img_$result.= CreateLink($arrImageFile[$key], "image");
   }
   $img_result.= '</li></ul>';
}
//end:procedure

echo '<td width="11%" class="imagetd">'.$img_result.'</td>' . PHP_EOL;

function CreateLink($filename, $type){
 if($type == 'image'){
  return '<a href="imageviewer.php?filename='.$filename.'" title="Click to view in New window" target="_blank">'.htmlspecialchars($filename).'</a>';
 }
 if($type == 'video'){

 }
 if($type == 'audio'){

 }
}
?> 
```

您还可以使用结构化方法为所有这些创建一个通用函数（从上面的开始过程开始到结束）

```
<?php
echo '<td width="11%" class="imagetd">'.customfunction($arrImageFile[$key]).'</td>' . PHP_EOL;
//same idea for other td also
?> 
```

# java - 我应该为 java 中的图像使用什么类型的属性？

> ID：14418845
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:04:45.253
> 
> 标签：java, image, javafx, fxml

我计划为我正在开发的应用程序制作一个 javaFX gui。我有一个包含某些属性的类，在这些属性中我想要一个可以在 ImageView (javaFX) 中显示的图像。我应该使用哪种类型的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T00:00:26.037

给定构造函数[`ImageView(Image)`](http://docs.oracle.com/javafx/2/api/javafx/scene/image/ImageView.html#ImageView%28javafx.scene.image.Image%29)，我会说将它们存储为`Image`.

# apache - 如何在同一站点上为 http 和 https 设置 .htaccess 重写？

> ID：14418857
> 
> 赞同：0
> 
> 时间：2013-01-19T21:05:43.267
> 
> 标签：apache, .htaccess

我在 htaccess 重写时遇到了一些问题，我需要将网站的不同部分重定向到 https 而不是 http，例如登录和新闻部分。我不确定如何以正确的方式执行此操作。

所以此刻我有

```
RewriteRule   ^login/?$  index.php?p=login [R,L] 
```

我想将此重定向到 https，我尝试了以下方法，但它似乎不起作用

```
RewriteRule ^login/?$ https://%{SERVER_NAME}/index.php?p=login [R,L] 
```

但它似乎不起作用。我错过了什么吗？我已经重写和所有其他设置，因为它们工作。我错过了什么？

无论如何，还有没有让 htaccess 使用 https 设置的不同规则集？

更新：

所以我想要做的是重写[http://www.site.tld/login/](http://www.site.tld/login/)重写为[https://www.site.tld/login/code](https://www.site.tld/login/code)然后进一步重写为[https://www.site.tld/ index.php?p=login](https://www.site.tld/index.php?p=login)。所以用户看到：[https://www.site.tld/login/](https://www.site.tld/login/)但它实际上是在做[https://www.site.tld/index.php?p=login](https://www.site.tld/index.php?p=login)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:07:03.843

```
RewriteEngine On
# This will enable the Rewrite capabilities

RewriteCond %{HTTPS} !=on
# This checks to make sure the connection is not already HTTPS

RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L] 
```

具体目录：

```
RewriteEngine On
# This will enable the Rewrite capabilities

RewriteCond %{HTTPS} !=on
# This checks to make sure the connection is not already HTTPS

RewriteRule ^/?secure/(.*) https://%{SERVER_NAME}/secure/$1 [R,L]
# This rule will redirect all users who are using any part of /secure/ to the same location but using HTTPS.
# i.e.  http://www.example.com/secure/ to https://www.example.com/secure/
# This means if you dont want to force HTTPS for all directories you can force it for a specific sub-section of the site. 
```

更多信息：http: [//wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)

# c++ - 重载和使用指针时出现编译器错误

> ID：14418859
> 
> 赞同：0
> 
> 时间：2013-01-19T21:06:08.727
> 
> 标签：c++, pointers, operator-overloading

```
struct vect{
    float x,y,z;
    vect(float xx, float yy, float zz){
        x=xx;
        y=yy;
        z=zz;
    }
    vect(){
        x=0;
        y=0;
        z=0;
    }
    void normalize(){
        float len = sqrt(x*x + y*y + z*z);
        x = x/len;
        y = y/len;
        z = z/len;
    }
    vect operator-(const vect &other) const{return vect(x-other.x,y-other.y,z-other.z);}
};

bool tri_plane_x(vect *v1, vect *v2, vect *v3, vect *pos, float s){

    //removed unnessecary code

    if (vv1 != vv2){
        vect dir = v2 - v1; // getting an error on this line
        dir.normalize();
        float d = (pos->x - v1->x)/dir.x;
        hy[c] = d * dir.y + v1->y;
        hz[c] = d * dir.z + v1->z;
        c++;
    }

    //removed unnessecary code
} 
```

有人知道为什么这不会编译吗？我如何重载函数是否有错误，或者这是因为我减去了两个指向 vect 的指针？

```
./exporter/main.cpp:74:19: error: conversion from ‘long int’ to non-scalar type ‘vect’ requested 
```

这是与此行相关的编译器错误。（不包括整个日志，因为它只是代码中重复多次的相同错误）

我看不到“long int”的来源......使用指针时是否有另一种重载方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:08:56.400

该错误是因为您正在分配指向 Vect 的指针差异，该指针应该对象类型为 vect 的实例。所以他们是不可比的。除此之外，我认为指向非线性内存的两个指针的区别没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:09:25.430

`v2`和`v1`是指针，两个指针之间的区别是一个数字，告诉你两个地址之间的偏移量，它是一个数字。

你不想“使用指针重载”你想要指向`operator-`的对象的结果，而不是指针本身。

您需要说`*v2 - *v1`取消引用指针并访问它们指向的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T21:09:33.057

代替

```
 vect dir = v2 - v1; 
```

你应该写

```
 vect dir = *v2 - *v1; 
```

这是因为`v2`and`v1`是指向向量的指针，并且在指针上应用运算符`-`将**​​减去**它们的地址（准确地说，它减去它们的地址除以类型的大小，所以你得到的内存中的偏移量介于两个元素；很高兴知道原始数组索引）。

通过在指针前面放一个星号，您正在*取消引用*它，这意味着您现在正在处理*指针后面的值*而不是*指针本身*。

当您想避免复制对象或通过引用传递对象到函数时，更好的解决方案是使用*引用*而不是指针。这既避免了这种情况，又简化了语法：

```
bool tri_plane_x(vect &v1, vect &v2, vect &v3, vect &pos, float s) {
    if (vv1 != vv2) {
        vect dir = v2 - v1;
        dir.normalize();
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:14:37.960

您的`operator -`声明需要一个 vect*引用*，但您已经传递了一个 vect*指针*。引用和指针可以产生类似的行为，但它们不是一回事。

有关它们之间的差异的更多说明，请参阅[这篇文章](https://stackoverflow.com/questions/14116278/calling-a-function-using-pointers-in-c/14116342#14116342)。

基本上，您试图调用`operator -`一对指向 vects 的指针，而不是 vects 本身。为了解决这个问题，您可以使用 deferences 运算符 (*) 来访问指针指向的 vect 对象：

```
vect dir = (*v2) - (*v1); 
```

或者通过将您的论点声明为引用：

```
bool tri_plane_x(const vect& v1, const vect& v2, const vect& v3, const vect& pos, 
float s){
  ... 
```

或者您也可以重载您`operator-`以接受指向 vects 的指针：

```
vect operator-(const vect* other) const
{
     return vect(x-(other->x),y-(other->y),z-(other->z));
} 
```

这里可能有一些不必要的括号，但我认为这总是比违反直觉的操作顺序搞砸你的代码要好。

# jquery - 如何使用 jQuery 为元素 id 创建父类？

> ID：14418865
> 
> 赞同：0
> 
> 时间：2013-01-19T21:07:00.223
> 
> 标签：jquery

从

```
<div id="ball">
</div> 
```

创造

```
<div class="grass">
    <div id="ball">
    </div>
</div> 
```

我曾尝试使用 jQuery，但无法使其正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T21:07:48.377

使用 jQuery 的[wrap](http://api.jquery.com/wrap/)：

```
$('#ball').wrap('<div class="grass" />'); 
```

# mercurial - 是否有任何关于 mercurial 'summary' 命令输出的文档？

> ID：14418867
> 
> 赞同：4
> 
> 时间：2013-01-19T21:07:03.750
> 
> 标签：mercurial

我的脚本正在使用 mercurial 命令行和解析输出，现在我对“summary”命令输出有点迷信。因为`commit`它`(clean)`在某些情况下会这样写：

```
$ hg summary
branch: default
commit: 2 unknown (clean)
update: (current) 
```

有时它不写`(clean)`：

```
$ hg summary
branch: default
commit: 1 modified, 2 unknown
update: (current) 
```

是否有任何可用的文档来解释该`(clean)`文本的含义？或者它是特定于实现的，并且不打算通过脚本解析善变的输出？

我也很好奇什么是`(current)`等`(update)`，但它们似乎不是很重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:18:59.907

诚然，命令 ( )的[文档非常简洁。](http://www.selenic.com/mercurial/hg.1.html#summary)`hg help summary`但是，您可以查看`hg summary` [此处](http://www.selenic.com/hg/file/tip/mercurial/commands.py#l5520)的实现以了解输出的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:07:09.070

该`summary`命令所称的“提交状态”是存储库中文件的状态`hg status`，但显示的是计数而不是列表。在您的情况下，`(clean)`意味着没有添加、修改、未跟踪或忽略的文件。

# c# - EF 的多个上下文中的多个 SELECT 是否需要 MARS？

> ID：14418877
> 
> 赞同：0
> 
> 时间：2013-01-19T21:07:35.993
> 
> 标签：c#, mysql, entity-framework, sql-server-mars

我使用 MySQL（它不支持 MARS），我尝试并行运行多个`SELECT`s. 连接字符串是相同的，但是对于每个`SELECT`我创建另一个数据库上下文。

它看起来像这样：

```
using (var db = DataContextCreator.Instance.Create())
{
  return db.Customers
           .Where(it => it.customer_Id > 10)
           .Detach(db.Customers);
} 
```

一句话`Detach`—​​—它是一个辅助方法，它需要一条记录或一堆记录。在第二种情况下，它列出了它们（使它们成为具体数据），并将记录从 db 上下文中分离出来（因此 GC 可以释放 db 上下文）返回分离的数据。

现在它给了我一个关于可怕的错误“已经有一个打开的 DataReader 与此连接关联，必须先关闭”。由于我没有明确使用 DataReader，我希望 100% 确定原因。

是因为我使用单个连接字符串来创建所有这些数据库上下文吗？或者换句话说——上述场景是否需要 MARS？

*我问是因为我不想重新发明轮子，而且因为我所有的查询都相当小而且很快我正在考虑愚蠢的解决方法——在数据库上下文创建者中使用锁定。这样，每个块查询数据库都可以保证不与另一个并行执行。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:12:45.520

`SqlConnection`MARS 仅在您对单个对象同时运行多个查询时才会考虑。

通常，每个`DbContext`对象都有自己的`DbConnection`对象，所以这可能不是这里的问题。

我认为这里的问题是，通过调用该`Detach`方法，您可能正在调用仍在执行的查询。

我建议使用[`AsNoTracking`](http://msdn.microsoft.com/en-us/library/gg679169%28v=vs.103%29.aspx)扩展方法来实现您的目标。

也就是说，我会将函数返回写为：

```
return db.Customers.Where(it => it.customer_Id > 10).AsNoTracking().ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:17:53.040

*是因为我使用单个连接字符串来创建所有这些数据库上下文吗？*

不，它不能是单个连接字符串的结果，我假设您的`DataContextCreator.Instance.Create()`返回上下文基于相同的连接。可以提供`DataContextCreator`代码吗？特别是财产`Instance`。

# javascript - javascript中的匿名函数中的变量和引用是如何存储的？

> ID：14418881
> 
> 赞同：0
> 
> 时间：2013-01-19T21:08:11.340
> 
> 标签：javascript, node.js, socket.io, anonymous-function

我正在 node.js 中（使用 socket.io）创建一个服务器，这个特定的问题一直困扰着我最长的时间。我为套接字连接制作了一个易于扩展的处理程序，以将每个不同的连接路由到不同的函数。

```
... <previous code> ...
var socketHandlers = {
                        'chat':chat.onMessage,
                        'chatNameRequest':chat.onNameRequest,
                        'changeRooms':commands.onPlayerRoomChange,
                        'commandEnter':commands.onCommandEnter
                    };

io.sockets.on('connection', function (socket) {
    console.log("New client connected.");

    // add all handlers to this socket when connected
    for (var handler in socketHandlers) {
        socket.on(handler, function(data) {
            console.log("Resolved handler for " + handler + ", called function " + socketHandlers[handler]);

            // sanitize each handler before sending it to the inner functions
            // leave more specific sanitization for the inner function
            data = valid.cleanData(data);
            socket = valid.cleanSocket(socket);

            // finally send it to the inner functions
            socketHandlers[handler](socket, data);
        });
    }
}); 
```

但是，它似乎不起作用。这是服务器的控制台输出：

```
 debug - flashsocket received data packet 5:::{"args":{"name":"Timothy"},"name":"chatNameRequest"}
Resolved handler for commandEnter, called function function (socket, data) {
<function contents, etc> 
```

如您所见，程序收到“chatNameRequest”请求，但它错误地将其路由到“commandEnter”。有人可以阐明这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T20:03:23.420

看看你的`console.log`输出。套接字接收到消息`commandEnter`，并将其路由到正确的处理程序。发布客户端代码？

此外，正如 Pointy 提到的，您应该查看`.bind`（[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)），因为您可能很快就会需要它。

# java - Java 中的先有鸡还是先有蛋的困境

> ID：14418883
> 
> 赞同：1
> 
> 时间：2013-01-19T21:08:17.430
> 
> 标签：java, design-patterns

对象位于 Java 类的顶部。String 是 Object 的子类。

那么，什么是第一个 - 对象或字符串？

迅速的答案是——对象。

但有趣的是，Object 已经有一个 toString() 方法，因此“知道”String。因此，在构造 Object 时，String 必须已经存在。另一方面，String 是 Object 的子类，在构造 String 时，Object 必须已经存在。我们陷入了一个永无止境的定义周期（还有一些技术问题）。这种方法至少违反了单一根类的想法。

这种担忧可能看起来更像是理论上的，而不是实际的。

但问题是我在其他框架中看到了类似的方法。我认为至少在某种程度上它受到了核心 Java 类的设计方式的启发。

你怎么看 - Java 类之间的循环依赖（特别是在对象/字符串的情况下）是不可避免的吗？难道不应该不惜一切代价避免它们吗？还是有时（谨慎和谨慎地）作为合理妥协的结果而接受它们？如果，那么 - 标准是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T21:13:18.217

Java 没有单遍编译器，而是多遍编译器。

这意味着一起编译的所有类实际上都处于声明级别。即使它们具有循环依赖关系，这些也会在第一步中得到解决，因此`Object`类提供`toString`方法这一事实在概念上并不意味着与拥有或更少的根类有关。

由于我们讨论的是理论问题，因此类声明与真正的根类之间的关系很容易解决：

**`Object`是根类只是因为`String`继承自它。**

这`String toString()`只不过是对编译器授予类型安全有用的签名，`Object`不需要`String`对象，甚至不需要知道 a`String`是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:12:51.707

我认为*类*之间的循环依赖不一定是一个问题，并且经常发生（出于可靠的设计原因）。假设您有一个相互了解的树和一个节点，或者一个链表和一个节点等。在这种情况下，循环依赖是完全合理的。

我不太喜欢的是*模块*之间的循环依赖。这些通常可以并且在我看来应该避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:10:31.417

由于 Object 和 String 都在 Java 的第一个版本中，我认为它们是同时出现的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T21:14:35.227

您所描述的“问题”听起来好像您认为 Java 是一种脚本语言，其中一个必须首先声明，另一个才能在其范围内，但事实并非如此，因为 Java 是一种编译语言，这意味着这种依赖关系在编译时解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T21:22:31.110

没有矛盾。

对象是指它自己的一个子类。这并不违法，因为与 chicken 相比，Strings 不必从 Objects 中“开发”出来，它们的类只需要 Object 类进行构造，因此两者都必须在编译时可用。

如果您想混淆鸡蛋，请看一下 Smalltalk：它使用元类对象等，并且是几乎所有语言都可以自己实现的一个很好的例子。

# java - BlackBerry 浏览器字段查找并突出显示文本

> ID：14418886
> 
> 赞同：1
> 
> 时间：2013-01-19T21:08:48.617
> 
> 标签：java, javascript, blackberry, browserfield

我正在编写一个应用程序，其中包含一个用于显示 HTML 文件的 BrowserField。我想做的是向用户显示一个对话框，他们可以在其中输入一些文本，然后找到文本，突出显示它并将其滚动到视图中（就像本机浏览器一样）。有谁知道我如何以编程方式实现这一目标？原生浏览器是如何实现这个功能的？我是否需要使用 browserfield.executescript 执行一些 Javascript，或者这可以使用 browserfield 上的方法来实现吗？

# perl - 模式匹配后打印 n 个字符

> ID：14418887
> 
> 赞同：0
> 
> 时间：2013-01-19T21:08:53.437
> 
> 标签：perl, bash, sed, awk

我有话要说

```
jan 02:12:00 YRU QRS : ASP.net Bird
feb 02:12:00 YRU QRS : ASP.net Dog 
```

我想要一个脚本`ASP.NET`在每一行中进行模式搜索并打印 10 个字符，这样它就会涉及`Bird`和`Dog`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:25:04.420

一种使用方式`perl`：

```
perl -ne 'm/asp\.net\s+(.{0,10})/i && print "$1\n"' infile 
```

这会产生：

```
Bird
Dog 
```

* * *

**编辑**以解释单线的语法`perl`：

`m/.../i`尝试将正则表达式与整行匹配。该`i`标志忽略这种情况。正则表达式是文字`asp.net`加上空格加上 0 到 10 之间的任意数量的字符以贪婪的方式。如果成功，则执行以下指令，打印括号之间匹配的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T21:25:57.743

```
perl -lne 'print $1 if /ASP.net (.{0,10})/' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-19T21:32:12.920

awk 单线：

```
awk -F'ASP\\.net' '{print substr($2,0,10)}' file 
```

请注意，这将在 之后**立即**`ASP.net`打印 10 个字符，这意味着从`space`. 如果您不想要空间，请使用以下行：

```
 awk -F'ASP\\.net ' '{print substr($2,0,10)}' file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-19T21:22:23.587

GNU 和 BSD greps 有一个很好的扩展`--only-matching`, or `-o`，它只会输出你匹配的那部分行：

```
grep -Eio 'asp\.net.{0,10}' <<< 'jan 02:12:00 YRU QRS : ASP.net Bird
feb 02:12:00 YRU QRS : ASP.net Dog'
ASP.net Bird
ASP.net Dog 
```

Bash 可以通过它的正则表达式功能来做到这一点，但如果你先打开不区分大小写的匹配可能会更好：

```
shopt -s nocasematch
while read; do
    if [[ $REPLY =~ asp\.net(.{0,10}) ]]; then
        echo "${BASH_REMATCH[1]}"
    fi
done <<< 'jan 02:12:00 YRU QRS : ASP.net Bird
feb 02:12:00 YRU QRS : ASP.net Dog'
 Bird
 Dog 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-19T21:32:14.610

假设您在文件“input.txt”中有文本，以下单行将完成这项工作：

```
cat input.txt | awk '/ASP\.net/ {print substr($0, index($0,"ASP.net") + length("ASP.net"), 10)}' 
```

解释：

*   在包含文本“ASP.net”的行上
*   打印 10 个字符
*   在“ASP.net”的位置之后开始

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-19T21:37:21.623

这可能对您有用（GNU sed）：

```
sed -nr '/.*ASP\.net(.{,10}).*/s//\1/p' file 
```

# php - cakeDC 用户插件被注册黑洞

> ID：14418889
> 
> 赞同：0
> 
> 时间：2013-01-19T21:09:08.070
> 
> 标签：php, security, cakephp

在问这个问题之前，我已经阅读了其他 cakeDC 用户插件问题。

我已将 cakeDC 用户插件添加到 cakePHP 2.2.3 的全新安装中。起初我确实遇到了路由问题，但是通过将用户插件路由移动到配置路由，我能够获得我期望的路由。

因此，在移动路由之后，我让 users/register 开始工作，而不是 users/users/register。

我现在遇到的问题是注册。配置电子邮件并且我能够提交注册表单后，我收到以下错误：

**错误：在此服务器上找不到请求的地址“/cakeDC/users/add”。**

这是“注册”被路由到的“添加”操作：

```
public function add() {
    if ($this->Auth->user()) {
        $this->Session->setFlash(__d('users', 'You are already registered and logged in!'));
        $this->redirect('/');
    }

    if (!empty($this->request->data)) {
        $user = $this->User->register($this->request->data);
        if ($user !== false) {
            $this->_sendVerificationEmail($this->User->data);
            $this->Session->setFlash(__d('users', 'Your account has been created. You should receive an e-mail shortly to authenticate your account. Once validated you will be able to login.'));
            $this->redirect(array('action' => 'login'));
        } else {
            unset($this->request->data[$this->modelClass]['password']);
            unset($this->request->data[$this->modelClass]['temppassword']);
            $this->Session->setFlash(__d('users', 'Your account could not be created. Please, try again.'), 'default', array('class' => 'message warning'));
        }
    }
} 
```

这是表格：

```
<div class="users form">
    <h2><?php echo __d('users', 'Add User'); ?></h2>
    <fieldset>
        <?php
            echo $this->Form->create($model);
            echo $this->Form->input('username', array(
                'label' => __d('users', 'Username')));
            echo $this->Form->input('email', array(
                'label' => __d('users', 'E-mail (used as login)'),
                'error' => array('isValid' => __d('users', 'Must be a valid email address'),
                'isUnique' => __d('users', 'An account with that email already exists'))));
            echo $this->Form->input('password', array(
                'label' => __d('users', 'Password'),
                'type' => 'password'));
            echo $this->Form->input('temppassword', array(
                'label' => __d('users', 'Password (confirm)'),
                'type' => 'password'));
            $tosLink = $this->Html->link(__d('users', 'Terms of Service'), array('controller' => 'pages', 'action' => 'tos'));
            echo $this->Form->input('tos', array(
                'label' => __d('users', 'I have read and agreed to ') . $tosLink));
            echo $this->Form->end(__d('users', 'Submit'));
        ?>
    </fieldset>
</div> 
```

这是堆栈跟踪中的信息：

CORE\Cake\Controller\Component\SecurityComponent.php 第 232 行

```
 }
    if ($isPost && $isNotRequestAction && $this->csrfCheck) {
        if ($this->_validateCsrf($controller) === false) {
            return $this->blackHole($controller, 'csrf');
        } 
```

SecurityComponent->blackHole(UsersController, 字符串)

```
object(UsersController) {
    name => 'Users'
    helpers => array(
        [maximum depth reached]
    )
    components => array(
        [maximum depth reached]
    )
    presetVars => array(
        [maximum depth reached]
    )
    uses => array(
        [maximum depth reached]
    )
    request => object(CakeRequest) {}
    response => object(CakeResponse) {}
    viewPath => 'Users'
    layoutPath => null
    viewVars => array(
        [maximum depth reached]
    )
    view => 'add'
    layout => 'default'
    autoRender => true
    autoLayout => true
    Components => object(ComponentCollection) {}
    viewClass => 'View'
    View => null
    ext => '.ctp'
    plugin => 'Users'
    cacheAction => false
    passedArgs => array([maximum depth reached])
    scaffold => false
    methods => array(
        [maximum depth reached]
    )
    modelClass => 'User'
    modelKey => 'user'
    validationErrors => null
    Session => object(SessionComponent) {}
    Auth => object(AuthComponent) {}
    Cookie => object(CookieComponent) {}
    Paginator => object(PaginatorComponent) {}
    Security => object(SecurityComponent) {}
    Prg => object(PrgComponent) {}
}
'csrf' 
```

我知道这个插件应该开箱即用，但我看不出有任何明显的理由不处理注册表和黑洞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:36:07.333

安全组件将其视为 CRSF 攻击。请确保：

1.  您没有重新加载表单（重新发送数据）
2.  正在正确创建表单。我建议使用插件提供的基本形式进行测试。
3.  它没有使用 AJAX。它适用于 AJAX，但我认为您需要设置一些东西。
4.  您的浏览器正在正确发送所有标题。也许您有一个用于调试的插件，它正在篡改请求，从而创建 CRSF 攻击

安全组件似乎非常明智，并且很容易将异常请求标记为潜在攻击。

# jquery - jQuery - 根据当前 url 检查导航选择列表 url 值并设置为选中

> ID：14418900
> 
> 赞同：2
> 
> 时间：2013-01-19T21:09:51.247
> 
> 标签：jquery

我有一个选择列表用作移动访问者的主要导航。结构如下：

```
<select id="nav">
<option value="http://somesite.com/url_1">Page 1</option>
<option value="http://somesite.com/url_2">Page 2</option>
<option value="http://somesite.com/url_3">Page 3</option>
<option value="http://somesite.com/url_4">Page 4</option>
</select> 
```

如何根据选择列表中的内容检查当前页面 url，如果匹配，则将其设置为选定选项？我猜它会是这样的：

```
var url = window.location;
$("#nav option").each(function() {
    var value = $(this).val();
    if(url === value) {
        $(this).val('selected','selected');
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:11:53.477

`selected`是一个属性，你正在设置一个新的值，你可以使用`prop`和`filter`方法。

```
var url = window.location.href;
$("#nav option").filter(function() {
    return this.value === url;
}).prop('selected', true); 
```

您也可以使用属性选择器，但`filter`方法更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:11:51.550

你应该改变

```
$(this).val('selected','selected'); 
```

进入

```
$(this).prop('selected',true); 
```

所以最后（选项1）

```
$("#nav option").each(function() {
    if(window.location === $(this).val()) {
        $(this).val('selected','selected');
    };
}); 
```

或更简单（选项 2）

```
$("#nav option[value='" + document.location + "']").prop("selected", true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:13:17.810

您可以使用 jQuery 属性选择器来做到这一点：

```
$("#nav option[value='" + window.location + "']").prop('selected', true); 
```

# mysql - 表不能有带有 auto_increment 的 2 字段主键

> ID：14418901
> 
> 赞同：1
> 
> 时间：2013-01-19T21:10:13.477
> 
> 标签：mysql, sql

我正在尝试创建一个代表配方中的指令的表：

```
+---------------------+
| recipeId   (PK, FK) |
| stepNumber (PK)     |
|---------------------|
| instruction         |
+---------------------+ 
```

这个想法是有一个主键`(recipeId, stepNumber)`来自`recipeId`表`recipe`和`stepNumber`自动增量。

当我尝试创建此表时，出现以下错误：

```
#1075 - Incorrect table definition; there can be only one auto column and it must be defined as a key 
```

我正在尝试做的事情是正确的/可能的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T02:16:48.270

我的建议是，首先使用 auto_increment 创建通用`id`列，以便在表中有一个主键。`recipeId`然后为两者和一起创建一个唯一键，`stepNumber`这样您就不会有这两个字段的任何重复组合。

为了能够为单个配方添加多个步骤，您需要确保没有`recipeId`，`stepNumber`或者`instruction`设置为自动增量。唯一设置为 auto_increment 的列仍然存在`id`。

所以这两个表的表模式看起来像（忽略`category`列）

```
CREATE TABLE `recipies` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(30) NOT NULL DEFAULT '',
  `category` enum('Salad','Dessert','Meat','Pastry') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `instructions` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `recipeId` int(11) unsigned NOT NULL,
  `stepNumber` int(11) NOT NULL DEFAULT '1',
  `instruction` text NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `recipeId` (`recipeId`,`stepNumber`),
  CONSTRAINT `instructions_ibfk_1` FOREIGN KEY (`recipeId`) REFERENCES `recipies` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我们先在`recipies`表中添加一条记录

```
INSERT INTO `recipies` (`name`,`category`)
VALUES ('Pumpkin Pie','Pastry'); 
```

然后让我们添加一行

```
INSERT INTO `instructions` (`recipeId`,`instruction`,`stepNumber`)
SELECT
    1,
    'You will need plenty of pumpkins!',
    IFNULL(MAX(`stepNumber`),0)+1
FROM `instructions`
WHERE `recipeId`=1 
```

*   条件中的1 after`SELECT`和 1`WHERE`都指表`id=1`中的行`recipies`
*   `IFNULL(MAX(stepNumber),0)+1`将为该配方选择最高的步骤编号（如果它不存在，它将选择“0”）+1

如果你想看到它工作，这里有一个[SQL fiddle 。](http://sqlfiddle.com/#!2/7e8ef/1)

**[编辑]**
我从来不需要对主键使用组合，但显然在 InnoDB 上进行了以下工作，前提是您在表中还没有主键。

```
ALTER TABLE `instructions`
ADD PRIMARY KEY(`recipeId`,`stepNumber`) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:48:43.093

I do have to ask - why would you want to? If you think about it, your recipe Id (FK) is going to be unique, then your step number is always going to start from 1 (or zero if you're zero based).

-- edit --

```
steps table:
recipe_id step_id step_detail
--------- ------- ---------------------------
        1       1 blah
        1       2 blah
        1       3 blah
        2       1 blah
        2       2 blah
        2       3 blah
        2       4 blah
        2       5 blah
--------- ------- --------------------------- 
```

If you included an auto-increment here then the step numbers would just keep on going up instead of resetting to 1 for the next recipe.

-- end edit --

Kind regards, Westie.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T21:24:42.830

如果这就是你正在使用的，我认为你不能用 InnoDB 做到这一点。显然您可以使用 MyISAM。

[http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.6/en/example-auto-increment.html)

# c# - 启动画面 MVVM 灯

> ID：14418902
> 
> 赞同：0
> 
> 时间：2013-01-19T21:10:23.040
> 
> 标签：c#, wpf, mvvm, mvvm-light, splash-screen

我想知道如何使用 MVVM Light 实现自定义启动画面（带进度条）。我的应用程序的入口点看起来像

```
public partial class App : Application
{
    static App()
    {
        DispatcherHelper.Initialize(); 
    }

} 
```

是否有一个很好的教程如何实现自定义启动画面？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-19T21:18:24.563

嗨，你可以试试这个[如何添加启动画面](http://msdn.microsoft.com/en-us/library/cc656886.aspx)

**此处更新**的是另一个[启动画面，显示加载进度](http://www.codeproject.com/Articles/38291/Implement-Splash-Screen-with-WPF)

我希望这会有所帮助。

# ruby - Ruby 脚本：%x( 命令 ) 和意外 ( 错误

> ID：14418903
> 
> 赞同：0
> 
> 时间：2013-01-19T21:10:26.180
> 
> 标签：ruby, bash, scripting

我找到了一个查找重复文件的工具，现在我准备删除重复文件。我盯着输出文件的格式看了一会儿，想出了这个脚本。

```
#!/usr/bin/env ruby 

contents = File.open('fdupes-result', 'rb') { |f| f.read }
duplicates = contents.split("\n\n")

duplicates.each do |set|
  list = set.split("\n").reverse
  list.drop(1).each do |filename|
      # print "rm #{filename}"
      %x[ rm #{filename} ]
  end
end 
```

注释`print`语句是我用来非破坏性测试的东西，它似乎工作得很好。但是当我添加`%x`命令时，我开始得到

```
sh: 1: Syntax error: "(" unexpected 
```

我不知道发生了什么，直到我意识到该文件的名称如下`/media/LilGalactus/music/Robert Johnson - Complete Recordings/Robert Johnson - The Complete Recordings (Disc2of2)[EAC-FLAC](oan)/s.gif`- 即，我的数据充满了未转义的空格、括号等。在大约 30 秒的时间里，我考虑使用 vim 命令来转义字符`:s/\(/\\\(/g`，我认为这种方法的局限性非常明显。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:20:39.447

```
File.unlink(filename) 
```

`unlink`会快几个数量级，并且不需要转义参数

如果您出于某种原因仍想使用 shell 调用 - 请使用：

```
system("rm", filename) 
```

这样它就会逃避一切必须逃避的事情

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-19T21:22:12.910

而不是转义它们，只需添加这样的双引号：`%x[ rm "#{filename}" ]`

# apache - 已安装 Apache 模块，但 htaccess 缓存不起作用

> ID：14418906
> 
> 赞同：0
> 
> 时间：2013-01-19T21:10:33.867
> 
> 标签：apache, .htaccess, vps

我正在尝试通过我的 VPS 服务器上的 .htaccess 规则设置缓存。我确保安装了 mod_expires 和 mime 类型检测，但是当我通过 gtmetrix 运行我的网站时，它显示我没有启用缓存。这是我的 .htaccess 规则：

```
# Expire headers
<ifModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "access plus 1 seconds"
  ExpiresByType image/x-icon "access plus 2592000 seconds"
  ExpiresByType image/jpeg "access plus 2592000 seconds"
  ExpiresByType image/png "access plus 2592000 seconds"
  ExpiresByType image/gif "access plus 2592000 seconds"
  ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
  ExpiresByType text/css "access plus 604800 seconds"
  ExpiresByType text/javascript "access plus 216000 seconds"
  ExpiresByType application/javascript "access plus 216000 seconds"
  ExpiresByType application/x-javascript "access plus 216000 seconds"
  ExpiresByType text/html "access plus 600 seconds"
  ExpiresByType application/xhtml+xml "access plus 600 seconds"
</ifModule>

# Cache-Control Headers
<ifModule mod_headers.c>
#month
  <filesMatch "\.(ico|jpe?g|png|gif|swf)$">
    Header set Cache-Control "max-age=2592000, public"
  </filesMatch>
#week
  <filesMatch "\.(css|js)$">
    Header set Cache-Control "max-age=604800, public"
  </filesMatch>
#day
  <filesMatch "\.(x?html?|php)$">
    Header set Cache-Control "max-age=43200, private, must-revalidate"
  </filesMatch>
</ifModule>
# END Cache-Control Headers

# Turn ETags Off
<ifModule mod_headers.c>
  Header unset ETag
</ifModule>
FileETag None

# Remove Last-Modified Header
<ifModule mod_headers.c>
  Header unset Last-Modified
</ifModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:46:06.647

尝试在 FilesMatch 块中添加 Last-Modifed。像这样的东西：

```
<FilesMatch "\.(jpg|jpeg|png|gif|js|css|ico)$">
  ExpiresDefault "access plus 10 years"
  Header  set Cache-Control "public"
  Header  set Last-Modified "Mon, 31 Aug 2009 00:00:00 GMT"
  Header  unset ETag 
  Header  append Cache-Control "max-age=604800, public"
</FilesMatch > 
```

# floating-point - OpenMP 并行处理浮点范围

> ID：14418908
> 
> 赞同：3
> 
> 时间：2013-01-19T21:10:56.560
> 
> 标签：floating-point, parallel-processing, openmp, parallel-for

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T13:51:08.230

From comments:

No, OpenMP won't do this for you for the same reasons as in [this answer](https://stackoverflow.com/a/13403626/463827) given to a question about OpenMP loops with integer arithmetic; it's extremely difficult for the compiler to reason about floating point numbers - in particular, the compiler needs to know before entering the loop the loop's tripcount, and floating point arithmetic in the loop makes that very difficult in general, even if there are some simple cases that would be ok (say, looping by 0.5 to 10.0).

For the same reason, even purely serial optimization/vectorization of loops of this form would suffer. The best way to do it is to make an equivalent integer loop and calculate your float based on the integer index;

```
for (int i=0; i<100; i++) { 
    double x=0.1*i; 
    sum += x*x; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:08:03.907

More generally, you need to go and read [What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html). The fact that you're adding 0.1 and expecting precise results suggest that you haven't read it yet :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T23:18:30.717

OpenMP standard defines "for" loop only for integer, pointer and iterator types, not for floating point types:

[http://www.openmp.org/wp-content/uploads/openmp-4.5.pdf#page=62](http://www.openmp.org/wp-content/uploads/openmp-4.5.pdf#page=62)

> 2.7.1 Loop Construct
> 
> ```
>  #pragma omp for [clause[ [,] clause] ... ] new-line
>   for-loops 
> ```
> 
> Specifically, all associated for-loops must have canonical loop form (see Section 2.6 on page 53).
> 
> 2.6 Canonical Loop Form
> 
> A loop has canonical loop form if it conforms to the following:
> 
> ```
> for (init-expr; test-expr; incr-expr) structured-block 
> ```
> 
> `init-expr` One of the following:
> 
> ```
>  var = lb
>  integer-type var = lb
>  random-access-iterator-type var = lb
>  pointer-type var = lb 
> ```
> 
> ...
> 
> `incr-expr` One of the following:
> 
> ```
> ++var
> var++
> -- var
> var --
> var += incr
> var -= incr
> var = var + incr
> var = incr + var
> var = var - incr 
> ```
> 
> `var` One of the following:
> 
> *   A variable of a signed or unsigned integer type.
> *   For C++, a variable of a random access iterator type.
> *   For C, a variable of a pointer type.
> 
> The canonical form allows the iteration count of all associated loops to be computed before executing the outermost loop

So, for non-canonical types compiler can't compute iteration counts.

# c++ - 方法参数中的 typedef

> ID：14418911
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:11:02.650
> 
> 标签：c++

我刚刚了解了 typedef。假设我有一个实例：

```
private:
  typedef std::string int doubles abc; 
```

当我创建实例 abc 的访问器时：

```
returnType get(){...} 
```

我应该在 returnType 中放什么？是 abc 还是数据类型？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:16:55.930

我不确定你想在这里做什么。您`typedef`的语法无效，并且“双打”不是 C++ 类型（但可能只是一个错字）。有效语法的示例是：

```
typedef std::string abc;
typedef int foo; 
... 
```

然后您可以使用`typedef`in 函数签名，就像其他类型一样：

```
abc getValue(); 
```

虽然如果你想在公共成员函数中使用它，你应该把它放在你的类`typedef`的一部分。`public`而且你应该知道，你的类之外的代码总是必须在`typedef`你的类名前面加上前缀，除非它`typedef`再次被 'd 。

```
class SomeClass {
public:
    typedef std::string foo;
};

// Somewhere outside SomeClass
SomeClass::foo bar = ...
typedef SomeClass::foo localFoo;
localFoo fooBar = ...; 
```

除此之外：`typedef`不提供任何方式让变量代表一种以上的类型。C++ 是一种静态类型语言，所以这不可能直接实现。但是，您可以：

*   使用具有公共接口的多态类，派生类的实例可以被视为基类的实例，但做不同的事情
*   使用一个`union`和一些鉴别器来存储它当前存储的类型
*   使用`void*`和铸造 -**不推荐！**
*   使用其他人建议的类似`boost::variant`等`boost::any`

*编辑：*最后，关于您使用术语“实例”：它通常用于指代类的实例，即属于类的特定对象。您的意思是“成员变量”。

# function - Matlab：在结构矩阵上应用函数

> ID：14418919
> 
> 赞同：2
> 
> 时间：2013-01-19T21:12:06.427
> 
> 标签：function, matlab, matrix, struct, apply

我有一个结构矩阵：

```
s(1:2,1:3) = struct('a',1,'b',2); 
```

我有一个有 2 个 int 输入的函数，并根据一些逻辑计算一个 int 值。如何使用每个结构（'a'和'b'）的字段作为函数的输入将函数应用于所有矩阵。结果矩阵应该与 s 大小相同，只是将函数的结果作为数据。

```
function f = SomeFunctionIWrote(a,b)
    %...Some calculations...
    f = result;
 end 
```

谢了，兄弟们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:09:58.120

将相同的函数应用于数组的每个元素是构建[arrayfun](http://www.mathworks.com/help/matlab/ref/arrayfun.html)的目的（有关有用的讨论/示例，请参阅Loren Shure 的[这篇博客文章](http://blogs.mathworks.com/loren/2006/11/24/working-with-arrays-of-structures/)）。

If`f`是您的函数，并且`s`是具有字段`a`和的结构数组`b`，

```
result = arrayfun(@(x)f(x.a,x.b), s); 
```

会成功的。如果您以前没有遇到过这些，`@(x)`它是一个[匿名函数。](http://blogs.mathworks.com/loren/2012/08/29/thoughts-about-anonymous-functions/)

如果函数不返回标量，请使用`'uniformoutput'`选项（设置为`false`），使其`result`成为元胞数组。

```
result = arrayfun(@(x)f(x.a,x.b), s, 'uniformoutput', false); 
```

* * *

注1：`arrayfun`很慢！通常（总是？）比循环慢。它的优势（根据我的经验/意见）来自于如果/当您的代码更改时不必处理矩阵尺寸的大小/形状，以及更容易阅读的更短的代码。

注意 2：您可以使用`'uni'`and`0`代替`'uniformoutput'`and`false`来节省打字/行空间，但以清晰度为代价

# html - 如何对“位置：固定”中的图像使用“溢出：隐藏”？

> ID：14418920
> 
> 赞同：0
> 
> 时间：2013-01-19T21:12:10.150
> 
> 标签：html, css, overflow

我有`DIV`一个`CSS`

```
#parent{
    position:fixed;
    top:0;
    left:10px;
    overflow:hidden;
    width:100%;
} 
```

我只想有一行图像，而不是流到第二行。

请参阅[示例](http://jsfiddle.net/27pDc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:13:34.877

您可以指定高度。[更新的演示](http://jsfiddle.net/27pDc/1/)

```
#parent{
    ...
    height: 100px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:14:09.043

```
#parent{
    position:fixed;
    top:0;
    left:10px;
    overflow:hidden;
    width:100%;
    white-space: nowrap;
} 
```

示例：http: [//jsfiddle.net/27pDc/2/](http://jsfiddle.net/27pDc/2/)

# php - php风格的Javascript数组

> ID：14418922
> 
> 赞同：3
> 
> 时间：2013-01-19T21:12:47.980
> 
> 标签：php, javascript

> **可能重复：**
> [Javascript 中的关联数组？](https://stackoverflow.com/questions/3399550/associative-arrays-in-javascript)

是否可以在 javascript 中执行以下操作：

```
array('one' => 'value-1','two'=> 'value-2'); 
```

然后像这样访问它`$var['one']`并返回`value-1`我对JS有点陌生，谷歌没有给我一个好的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:14:16.987

是也不是 - 你可以像这样创建一个**对象**：

```
var theObject = { one: "value 1", two: "value 2" }; 
```

但它不是一个数组。JavaScript 中的真数组具有严格的数字索引。（您可以将字符串命名的属性添加到 JavaScript 数组对象，但它们不包含`.length`在数组的 中。）

*编辑*——要向对象（或任何对象）添加属性，您可以使用`.`or`[]`运算符：

```
theObject.newProperty = "something new";

theObject[ computeNewPropertyName() ] = "wow"; 
```

第二个示例显示了`[]`运算符，当以某种方式动态计算属性名称时使用该运算符（在示例中，通过函数调用，但它可以是任何表达式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:14:01.423

是的，它被称为对象：

```
var your_object = {
    'one': 'value-1',
    'two': 'value-2'
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:15:22.433

哈哈）））在普通语言中，这称为字典）））在javascript中，您可以像这样创建字典或对象

```
 a = {"one":"value-1", "two":"value-2"} 
```

a["one"] 返回 "value-1"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T21:16:39.993

尝试

数组（有序、索引的项目集）：

```
var myArray = [
    'value-1',
    'value-2'
]; 
```

对象（一组无序的键控属性）：

```
var myObject = {
    'one': 'value-1',
    'two': 'value-2'
}; 
```

# java - android中的透明视图

> ID：14418926
> 
> 赞同：1
> 
> 时间：2013-01-19T21:13:13.157
> 
> 标签：java, android, eclipse

我正在使用从上到下的滑动抽屉。我在该滑动抽屉 100x100 上有一个图像视图/视图。在主屏幕上我有一个图像。我想让滑动抽屉上的视图透明，我可以看到主屏幕上的图像。我正在将此[代码](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)用于滑动抽屉。简而言之，我有 2 个视图一对一，我想从第二个视图中看到第一个视图的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:18:06.903

**`android:background="#TTRRGGBB"`**

*   `RR, GG, BB`分别是颜色的 RGB 分量

*   `TT`是透明度分量。

使用 TT = 80（十六进制）表示 50% 的透明度，FF 表示不透明，00 表示完全透明。

来源：[另一个堆栈溢出问题](https://stackoverflow.com/questions/6562962/transparent-widget-background)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:27:15.170

您必须使滑动抽屉的内容部分透明，您可以这样做；

```
<SlidingDrawer android:id="@+id/slider"
        android:layout_width="fill_parent" android:layout_height="wrap_content"
        android:handle="@+id/handle" android:content="@+id/content"
        android:background="#eeffae" >

        <ImageView android:id="@+id/handle" android:layout_width="55dp"
            android:layout_height="55dp" android:src="@drawable/handle" />

        <LinearLayout android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:id="@+id/content"
            android:orientation="vertical" android:background="@null">

...
...
</LinearLayout>
</SlidingDrawer> 
```

# android - 地图片段的 setContentView() 速度较慢

> ID：14418927
> 
> 赞同：13
> 
> 时间：2013-01-19T21:13:17.467
> 
> 标签：android, android-layout, android-maps-v2

我正在开发一个将谷歌地图（api v2）显示为片段的应用程序。当应用程序加载时，它会在显示地图之前显示几秒钟的空白屏幕。我使用日志语句查看延迟在哪里，但我不知道为什么它这么慢。

这是我的onCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    Log.i(TAG, "onCreate Start -------------------------------");
    super.onCreate(savedInstanceState);
    Log.i(TAG, "onCreate 1 -------------------------------");
    setContentView(R.layout.activity_main);
    Log.i(TAG, "onCreate 2 -------------------------------");
    do_async_setup();
    Log.i(TAG, "onCreate 3 -------------------------------");
    prefs = getSharedPreferences(PREFS_NAME, 0);
    prefs_editor = prefs.edit();
    Log.i(TAG, "onCreate Finish -------------------------------"); 
```

这是输出。

```
01-20 10:05:28.802: I/HeadsUp(19544): onCreate Start -------------------------------
01-20 10:05:28.802: I/HeadsUp(19544): onCreate 1 -------------------------------
01-20 10:05:30.396: I/HeadsUp(19544): onCreate 2 -------------------------------
01-20 10:05:30.396: I/HeadsUp(19544): onCreate 3 -------------------------------
01-20 10:05:30.403: I/HeadsUp(19544): onCreate Finish ------------------------------- 
```

您可以看到 setContentView 有 1.5 秒的延迟。这是我的布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

它看起来很糟糕，就像应用程序在加载时冻结一样。我怎样才能加快速度或隐藏延迟？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-20T22:26:51.793

这是使用 GLSurfaceView（例如 Android 中的新地图 v2）的一个缺点。延迟是由 GLSurfaceView 的初始化引起的。请参阅此处[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4639](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4639)以获取来自 Google 员工的帖子 #5 附近的简要说明以及帮助解决此问题的片段（一点点）。请为该问题加注星标以提高其优先级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-22T08:50:57.743

我发现如果您连接了调试会话，这可能会很慢，但是当您没有连接时，这通常是一个更可接受的速度。如果它在断开 USB 电缆的情况下运行得更快，这可能就是原因。

# java - 无法更改 Android versionName 和 versionCode

> ID：14418930
> 
> 赞同：2
> 
> 时间：2013-01-19T21:13:20.810
> 
> 标签：java, android, version

我只是尝试将我的 android 应用程序的版本名称从 1.0 更改为 1.0.1，并将代码从 1 更改为 2，但是每次我在 eclipse 中导出项目时，它都会自动更改回来。有人可以帮助我吗？

这是我的 androidmanifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.pedda.soundbox"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="de.pedda.soundbox.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T17:20:05.803

使用查找器或控制台转到您的项目，然后手动删除`bin/AndroidManifest.xml`.

然后清理并构建您的项目。使用其他编辑器检查 bin/AndroidManifest.xml 文件。它应该有新版本。

# postgresql - POSTGIS SELECT 优化

> ID：14418933
> 
> 赞同：0
> 
> 时间：2013-01-19T21:13:37.350
> 
> 标签：postgresql, postgis, postgresql-9.1

我有一个有效的查询，但想知道是否有更快更不钝的形式可以使用。我已经在我的几何图形周围创建了一个边界框来缩小搜索范围，但是对 ST_Transforms 的多次调用似乎很尴尬。顺便说一句：两条线（gg 和 gm）具有相同的点。

在此先感谢，-
马特

```
CREATE TABLE lines
(
  line_id bigserial NOT NULL,
  line_gm_bbox geometry,
  line_gm_line geometry,
  line_gg_line geography(LineString,4326),
)
WITH ( OIDS=FALSE );

CREATE INDEX line_bbox_idx
  ON lines
  USING gist
  (line_gm_bbox );

SELECT l.* FROM lines AS l WHERE l.line_gm_bbox && ST_Transform( ST_Buffer( ST_Transform( ST_GeomFromText('POINT(-71.44513306666667 42.7368536)',4326),3395 ), 2000 ), 4326 ) 
                             AND ST_DWithin( l.line_gg_line, ST_GeomFromText('POINT(-71.44513306666667 42.7368536)',4326), 200); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T22:39:48.893

使用`ST_Buffer`in`WHERE`很昂贵，因为它需要在过滤之前缓冲*所有*几何图形。仅`ST_DWithin`用于相同的效果。

此外，`lines`表模式是*矫枉过正*的。您只需要一个地理列，不需要转换为查询公制距离。边界框在技术上应该存储在 gist 索引中，但如果您出于某种目的需要它，可以将其提取为[框类型。](http://postgis.refractions.net/docs/reference.html#PostGIS_Types)大多数时候你不需要关心，只要 gist 索引在那里。

将表重新定义`lines`为更简单的模式：

```
CREATE TABLE lines
(
  gid bigserial primary key,
  geog geography(LineString,4326)
);
CREATE INDEX ON lines USING gist (geog); 
```

如果您尝试查询兴趣点 200 m 内的所有线，请将查询简化为：

```
SELECT l.*
FROM lines AS l
WHERE ST_DWithin(l.geog, ST_MakePoint(-71.44513306666667, 42.7368536), 200); 
```

# xamarin.ios - 使用单点触控设置子视图的顺序

> ID：14418935
> 
> 赞同：0
> 
> 时间：2013-01-19T21:13:59.257
> 
> 标签：xamarin.ios

我创建了一个视图控制器，并使用界面构建器向视图添加了一些标签和一个按钮。

我正在尝试向视图添加一个圆形的白色边框，因此我正在使用代码通过代码构建一个视图

```
//http://spazzarama.com/2011/01/08/monotouch-uiview-with-curved-border-and-shadow/
public class WhiteRectangle:UIView
{
    // Constructor used when view is defined in InterfaceBuilder
    public WhiteRectangle (IntPtr handle) : base(handle)
    {
        this.CreateCurveAndShadow();
    }

    // Constructor to use when creating in code
    public WhiteRectangle (System.Drawing.RectangleF frame) : base(frame)
    {
        this.CreateCurveAndShadow();
    }

    private void CreateCurveAndShadow()
    {
        // MasksToBounds == false allows the shadow to appear outside the UIView frame
        this.Layer.MasksToBounds = false;
        this.Layer.CornerRadius = 10;
        this.Layer.ShadowColor = UIColor.DarkGray.CGColor;
        this.Layer.ShadowOpacity = 1.0f;
        this.Layer.ShadowRadius = 6.0f;
        this.Layer.ShadowOffset = new System.Drawing.SizeF(0f, 3f);
    }

} 
```

在我的 ViewControllers ViewDidLoad

```
 public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();
        var view = new WhiteRectangle(new System.Drawing.RectangleF(10, 10, 300, 300));
        view.BackgroundColor = UIColor.White;
        View.AddSubview (view);
    } 
```

现在我的问题是我正在创建的视图，正如您所期望的那样，它是在界面构建器中创建的视图之后添加的。是否可以设置视图的顺序？

我试过了

```
 View.Subviews[0].SendSubviewToBack(View.Subviews[1]);
    View.Subviews[1].SendSubviewToBack(View.Subviews[0]); 
```

都不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:32:13.293

我很接近。如果其他人被困在同一件事上，这行得通

```
this.View.BringSubviewToFront(View.Subviews[0]); 
```

# c - 在库中覆盖#define

> ID：14418936
> 
> 赞同：7
> 
> 时间：2013-01-19T21:14:00.013
> 
> 标签：c, arduino, ide, c-preprocessor

我为设备创建了一个 Arduino 库，通常可以通过多种方式对其进行配置。例如使用中断或轮询它。从其他示例中，我为库创建了以下文件：foo.h、fooConfig.h 和 foo.cpp，如下所示。其中 fooConfig.h 包含如何使用屏蔽的配置。例如有或没有中断等......

在这样做时，我希望主草图的 INO 文件能够覆盖默认设置，这些设置已使用#define 声明。包括在图书馆的实例中。结果表明确实如此。至少我是这样做的。

下面的代码是一个有问题的简化示例：

**定义测试.ino**

```
#define BAR USE_POLL
#include <foo.h>

foo test;

void setup() {
  Serial.begin(115200);
  delay(1000);

  Serial.print(F("setup's defined BAR was "));
  Serial.println(BAR);

  Serial.print(F("inside foo.begin defined BAR was "));
  Serial.println(test.begin());
}

void loop() {
} 
```

**foo.h**

```
#ifndef FOO_h
#define FOO_h

#include "FOOConfig.h"

class foo {
  public:
    int begin();
};
#endif // FOO_h 
```

**FooConfig.h**

```
 #ifndef FOOCONFIG_h
  #define FOOCONFIG_h

  #define USE_INT      1
  #define USE_POLL     2

  #ifndef BAR
    //default to using interrupts
    #define BAR USE_INT
  #endif // BAR

#endif  // FOOCONFIG_h 
```

**foo.cpp**

```
#include <foo.h>

int foo::begin() {
#if defined(BAR) && BAR == USE_INT
  Timer1.attachInterrupt( isr );  // error here, because of the define...
  return 1;
#elif defined(BAR) && BAR == USE_POLL
  return 2;
#endif
  return 0;
} 
```

产生以下串行输出：

```
setup's defined BAR was 2
inside foo.begin defined BAR was 1 
```

如果希望 foo.begin 中的 BAR 等于 2，而不是 1。请注意，希望让预编译器决定是否忽略 attachInterrupt。不想要库的资源在不使用的情况下的依赖和消耗。只是希望它是一个高级选项。

我知道这可能最好用 make 文件或 eclipse 来处理，但我正在尝试为目前 1.0.3 的 Arduino IDE 发布这个库。

任何帮助表示赞赏。

仅供参考，真实的完整代码在这里。 [https://github.com/mpflaga/Sparkfun-MP3-Player-Shield-Arduino-Library/tree/master/SFEMP3Shield](https://github.com/mpflaga/Sparkfun-MP3-Player-Shield-Arduino-Library/tree/master/SFEMP3Shield)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T21:24:41.783

Regardless of tool chain, the program does not and should not determine how the library is compiled. A key concept of a library is that it is fully developed, compiled and packaged without the existence of any program. There is a one way dependency: a program depends on the library -- a library has no dependency on any program. A key point that highlights this is that you do not have to distribute source code to use a library. A library can be used with just headers and binary (.a) Take a peek into all the WinAvr libraries that are used.

What you are seeking is how to have multiple configurations of your library. In other tool chains this is readily done at the project level where you can create any number of output configurations. In your case you would have poll and int, and the toolchain would produce two libraries, for example:
libMySomething_int.a
libMySomething_poll.a

Programs choose which configuration of the library they wanted to use.

As noted by others, the Arduino IDE will not provide for this form of complexity. Since you stated you intend to stay within that toolchain, these are solutions I can see:

1.  Make two copies of the library that differ just by the one #define. This is basically you providing the two configurations. Because they differ by a tiny amount, it will be easy to WinMerge between to two and keep codebases synchronized.

2.  Rethink whether it is necessary to have one interface to the two forms. You do not have to have just one begin(), you can have two forms:

    void beginInt();
    void beginPoll();

    void getSomethingInt();
    void getSomethingPoll();

Keep in mind that this does not waste code space. The linker will remove all unused functions from the final program, so if you just use the Int form, all the Poll functions get dropped.

The choice between these two isn't clear and somewhat subjective. The decision should consider what you are intended to encapsulate/hide in the library, and what you want to make clear. If this library was an interface to a variety of real time clock chips, then you would clearly be fair to encapsulate all the differences and provide one set of functions. But in your case you are implying key changes in resource consumption, timing, and concurrency -- I'm not sure it is best to hide this.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T00:58:50.927

Arduino IDE 单独编译库，因此您需要在编译期间将定义作为 -D 选项传递。Arduino IDE 目前不提供让您轻松做到这一点的工具。Arduino 1.5 通过 board.txt 系统提供了一些功能，但这可能无法提供您需要的灵活性。

因此，正如您所说，选项是在 Eclipse 等产品中编辑 make 文件，或者在 Visual Studio Pro 中设置“定义”项目属性之一（例如“定义 - 项目”）。

或者通过使用 TeensyDuino IDE 并将您自己的`menu.`defs 添加到 board.txt

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-14T10:40:44.680

如果您的库仅在主草图中使用
并且您可以将所有代码放在 .h 文件中（即没有 .cpp 文件）
，那么您可以实现您想要的。

这样做是有问题的编码实践，但在 Arduino 世界中似乎并不少见。

PS：完全正确，实际上也可以有一个 .cpp 文件，但前提是它的编译完全不受可覆盖的#define 的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T21:51:35.890

我不是 Arduino 专家，但乍一看。您的 foo::begin() 输出 1，因为您没有在 foo.cpp 中定义“BAR”，所以预处理器属于您的默认值。也许您可以向“foo”类添加“配置”方法。此方法将接收具有所需配置的参数，因此您将能够将您的定义作为参数从 INO 文件传递​​给“foo”类实例。

# flask - 显示同一对象的两个版本时如何构造 Jinja2 模板？

> ID：14418938
> 
> 赞同：1
> 
> 时间：2013-01-19T21:14:07.757
> 
> 标签：flask, jinja2

我正在使用 Python/Flask/Jinja2 构建一个网站，其中涉及用户创建的列表。每个列表都有一个到期日期，因此每个列表要么处于活动状态，要么已过期。

每个列表都有自己的页面`mysite.com/listings/<listing_id>`。过期的列表页面看起来与活动列表页面不同。差异可能很多，但页面的高级结构将是相同的（毕竟，两者都是同一网站上的列表）。

构建模板和逻辑的最佳方式是什么？我看到两个选项：

首先，我可以创建两个 Jinja2 模板：`listing.html`和`listing_expired.html`. 视图函数会判断一个列表是活跃的还是过期的，然后渲染合适的模板。缺点是这两个模板必须保持同步。

或者，我可以只有一个模板：`listing.html`. 然后，模板中将包含用于测试列表是否过期的逻辑。如果模板过期，将使用模板的一部分，如果未过期，则使用另一部分（使用大`if-else`声明）。

构建这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T02:58:44.737

您可以为此使用 jinja 模板继承。使用泛化您创建一个基本模板并使用两个子模板（列表和过期）和子块扩展此模板以创建您的视图。结论：三个没有大 if-else 的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:10:57.913

我认为最好的方法是拥有两个不同的模板并由它们继承高级结构。

# css - 如何修复一个奇怪的 Safari 边框 css 错误，其中某些部分的边框不显示？

> ID：14418941
> 
> 赞同：2
> 
> 时间：2013-01-19T21:14:11.910
> 
> 标签：css, safari, border

我的部分边框没有显示在 Safari 中！？

看一下这个。这很奇怪：

[http://jsfiddle.net/myWqs/1/](http://jsfiddle.net/myWqs/1/)

（确保您使用的是 Safari / Mac OS X）

这是一个屏幕截图，适用于当前在不同浏览器中的用户：

![在此处输入图像描述](../Images/aa3fec0e41084c93ac51a0e0d02f7c17.png)

以下是您要重现的详细信息（包括在内，因为 StackOverflow 说“不要只链接到 jsfiddle”）。

HTML：

```
<h1>Example safari bug with the borders on the .holder divs</h1>
<br/><br/><br/>

<div class="column">
  <div class="holder">
    <h1>Stuff here</h1>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
      <p>Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum. Lorum ipsum.</p>
  </div>
</div> 
```

CSS：

```
.column {
    float: left;
    margin-left: 12px;
    min-width: 250px;
    max-width: 550px;
    width: 50%;
}

.holder {
    background-color: #e8e8e8;
    background: -webkit-gradient(linear, left top, left bottom, from(#e8e8e8), to(#f3f3f3));
    background: -moz-linear-gradient(top, #e8e8e8, #f3f3f3);
    border: 1px solid #333333;
    position: relative;
    line-height: 18px;
    border-radius: 4px;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
} 
```

# javascript - 为什么`this`有时在对象字面量中未定义？

> ID：14418948
> 
> 赞同：3
> 
> 时间：2013-01-19T21:14:54.683
> 
> 标签：javascript

**浏览器错误**

*   类型错误：这是未定义的

**相关代码**

```
// start of module

$A.module({
    Name: 'MUserNew', 
```

...

```
 enter: (function (event) {
        var pipe = {};
        if (event.keyCode === 13) {
            pipe = $A.definePipe(this.Name); // **fail here**
            $A.machine(pipe);
        }
    }).bind(this), 
```

...

```
 // inside module as well
        this.E.un_go.addEventListener("keypress", 
                                       this.enterB, 
                                       false); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T21:17:06.833

您正在使用 做正确的事情`.bind()`，但不幸`this`的是没有您期望的行为。它不采用对象文字内“进行中”对象的值。您必须创建对象，设置处理程序，然后将其传递给您的“模块”方法。

您仍然可以在一个表达式中执行此操作，如下所示：

```
$A.module(function() {
  var obj = {
    // ... 
    enterB: function(event) { ... },
    // ...
  };
  obj.enterB = obj.enterB.bind(obj);
  return obj;
}()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:46:35.493

你需要`bind(this)`在函数内部使用定义，`this`将被定义（不是未定义）。需要调用该函数。

```
/*MUserNew
**
**
**            
*/
$A.module({
    Name: 'MUserNew',
    // ....
    init: function () {
        this.enter = this.enter.bind(this); 
```

# php - 同时向多个用户广播通知 - PHP/MySql/Ajax

> ID：14418950
> 
> 赞同：1
> 
> 时间：2013-01-19T21:15:05.863
> 
> 标签：php, javascript, mysql, ajax, notifications

我是论坛的新手，感谢任何建议我已经搜索了很多，阅读了很多主题，以找到适合我的项目的最佳方式

我正在使用 wamp 服务器（内部网）构建一个广播站点，以便在内部使用。

使用的语言：PHP、JS、Ajax、MySql

目前我们正在使用聊天系统（spark），但该项目的想法是保留广播记录并且更容易跟踪

请不要向我提供第三方应用程序/工具

我有一个用户提交信息的简单 html 表单，请考虑这个示例。

形式：标题（输入文本字段），广播消息（输入文本字段）

存储在 db 表中的信息：

bc_id、标题、bc_msg、submitted_by、date_time

另一个表 user_got_bc: user_id, bc_id, bc_sent (默认0)，一旦通知发送，值为1

我正在使用 ajax 查看“user_got_bc”表并验证哪个用户的 bc_sent = 0 并向他发送通知，其中包含另一个表中的 bc 信息，然后将 bc_sent 的值更新为 1

ajax 代码使用 setinterveral 每 10000 毫秒执行一次

一旦用户提交广播，我希望所有其他用户（复数）在同一时间收到通知（一秒钟或多一点都可以）

现在关于通知，您不必担心，我正在使用桌面通知（webkitnotification），我知道它不兼容跨浏览器，但没关系，它工作正常

也就是说，一切正常

我担心的是 ajax 代码对服务器的连接数，无论好坏，用户越多，连接越多

我知道用这么多的连接轰炸服务器是不好的，特别是因为它是每 10 秒 x 用户数

我在许多论坛上阅读了使用彗星的信息，据我所知，它对 PHP 不友好，而且我以前从未实现过

所以我的问题是： - 有没有更好的方法或保持设置好的方式？- 如果彗星更好，是否可以提供一个片段来为该项目工作？

提前谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T09:21:01.780

请谷歌 Ajax 长轮询。但对于这类项目，我建议使用一些实时 i/o 软件，例如

[node.js](http://nodejs.org/)和[socket.io](http://socket.io/)

如果您有良好的 JavaScript 技能，那么您在使用上面列出的应用程序时应该没有问题。如果您的项目将拥有更多用户，那么您将需要 PUB-SUB、实时、跨浏览器套接字支持。最后是 PUSH 技术。上面列出的应用程序具有所有这些功能。所以试一试。

如果您仍然想坚持使用 PHP、JS、Ajax、MySql，那么您可能需要 Ajax 长轮询技术。

# mongodb - 设计新的分析引擎并寻找列式数据库和无 SQL 数据库之间的比较

> ID：14418954
> 
> 赞同：2
> 
> 时间：2013-01-19T21:15:20.493
> 
> 标签：mongodb, cassandra, analytics, infinidb, nosql

我一直在使用单个 MySQL 数据库来驱动分析仪表板，该仪表板通常会根据大约 1 到 1000 万条记录计算指标和图表。数据集可以在几天内大幅增长。

不用说，下一个版本的仪表板将需要大约 100 倍的数据量，我觉得 MySQL 不足以在很短的时间内报告出这些指标。

新的仪表板要求看起来像..

*   报告将聚合约 100 - 10 亿条记录的指标和图表的能力
*   实时报告“一些”基本指标的能力
*   查看仪表板的最终用户的等待时间非常短

在花了一些时间研究不同的可用数据库技术之后，我得出结论，应该在以下之一之间进行选择：

NoSQL 数据库

*   蒙哥数据库
*   卡桑德拉

列式数据库

*   无限数据库
*   信息亮

我在列式数据库上找到的大部分信息似乎都来自实际致力于开发这些技术的组织。因此，我正在寻找对列式数据库有公正经验的人，并帮助我了解如果我走这条路将面临的一些挑战。此外，我真的应该使用列式数据库吗，或者上面的 NoSQL 数据库之一是否足以满足我的要求？

# vb.net - Visual Basic 在数组中设置标签

> ID：14418955
> 
> 赞同：0
> 
> 时间：2013-01-19T21:15:20.800
> 
> 标签：vb.net, visual-studio

我正在 Studio '10 中用 Visual Basic 编写一个小程序。我有一系列八个数组，我也需要在 for 循环中设置文本。我需要根据标签编号设置文本（例如标签 1 获取 word1，标签 2 获取 word2） 有没有办法创建一个数组，然后在这个数组中设置我现有的标签，这样我就可以说诸如

```
for i = 1 to 8
    subsets(i).Text = words(w + i)
next 
```

*   'i' 是 for 循环的变量
*   子集是数组名称。
*   'words' 是一个包含字符串的数组，我对此有点陌生，所以谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:17:40.923

您可以创建一个数组（或列表）`Label`并将每个标签控件添加到其中。

这将允许您按照您的描述循环和分配值。

```
Dim subsets As New List(Of Label)
subsets.Add(label1)
subsets.Add(label2)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T22:10:12.450

由于您想将单词基于标签的名称，因此您应该按照 Oded 的建议创建一个数组或列表。然后，您可以使用该[`String.Remove`](http://msdn.microsoft.com/en-us/library/d8d7z2kk.aspx)方法从标签名称中删除单词 Label，将其转换为 int 并减去 1，因为 .Net 中的数组是基于 0 的。

像这样的东西。

```
Public Class Form1

    Dim subsets(7) As Label
    Dim words() As String = New String() {"this", "is", "a", "test", "of", "text", "replacement", "."}
    Public Sub New()

        ' This call is required by the designer.
        InitializeComponent()

        ' Add any initialization after the InitializeComponent() call.
        subsets(0) = Label1
        subsets(1) = Label2
        subsets(2) = Label3
        subsets(3) = Label4
        subsets(4) = Label5
        subsets(5) = Label6
        subsets(6) = Label7
        subsets(7) = Label8

    End Sub

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        For Each lbl As Label In subsets
            lbl.Text = words(CInt(lbl.Name.Remove(0, 5)) - 1)
        Next
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-19T22:44:35.533

我想这就是你想要做的，虽然我可能错了

```
Public Class Form1

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim words() As String = {"one", "two", "three", "four", "five", "six", "seven", "eight"}
    Dim subsets() As Control = {Label1, Label2, Label3, Label4, Label5, Label6, Label7, Label8}

    For i = 0 To 7
        subsets(i).Text = words(i)
    Next

End Sub
End Class 
```

这会将单词数组分配给标签文本属性

# c++ - 类 VERSUS 命名空间，还是类 AND 命名空间？

> ID：14418959
> 
> 赞同：12
> 
> 时间：2013-01-19T21:15:28.257
> 
> 标签：c++, class, namespaces, static-methods, non-member-functions

**类和命名空间？**

这个问题是关于我看到自己越来越多地使用的一种模式：同时拥有相关概念的类和命名空间。我认为这主要是由 C++ 语言工件推动的，但并非完全如此。

我想最重要的问题是：这是个好主意吗？同时拥有相关概念的类和命名空间？

**低级问题：**

做这个的最好方式是什么？

嵌套在命名空间中的类？：

```
namespace Foo_Namespace {
   class Foo_Class {
       ...
   };
} 
```

还是分开，对等，类和命名空间？：

```
class Foo_Class {
    ...
};
namespace Foo_Namespace {
   // non-class free functions, etc.
} 
```

我必须承认我倾向于将类嵌套在命名空间中。即使它导致丑陋的名字。但即使我这样做，我应该使用什么命名约定：

以下内容太长，导致名称非常难看 Foo_Namespace::Foo_Class

```
namespace Foo_Namespace {
   class Foo_Class {
       ...
   };
} 
```

不必在名称中使用任何后缀或指示符：

```
namespace Foo {
   class Foo {
       ...
   };
} 
```

但是后来我发现自己不确定，当我查看 Foo::bar() 时，它是命名空间 ::Foo 中的自由函数 bar，即 ::Foo::bar()，还是命名空间中类 Foo 中的成员函数::Foo::Foo::bar()。

像 ::Foo::Foo::bar 这样的名字仍然不是，嗯，很好。

目前我正在做

不必在名称中使用任何后缀或指示符：

```
namespace Foo_ns {
   class Foo {
       ...
   };
} 
```

主要是因为我通常先创建类，然后才意识到命名空间会很好。

我想知道我是否应该恢复多年来未使用的命名约定：_c 用于类，_ns 用于命名空间：

```
namespace Foo_ns {
   class Foo_c {
       ...
   };
} 
```

**细节：**

我不会重复我上面所说的，但我会补充一点。

除了类之外，我知道使用命名空间的最实际原因是您可以在命名空间中对自由函数进行前向声明，但不允许对类的某些方法进行前向声明。即对于一个类，您必须全部或全部声明它。而对于一般的自由函数，特别是命名空间中的自由函数，您可以将其声明为零碎的。部件可以在不同的头文件中声明。您可以只为一个或两个函数使用前向声明，而不是为一个庞大的类#include 一个庞大的仅标头库。等等。

（例如，请参阅[http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Forward_Declarations](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Forward_Declarations)，尽管 Google 完全反对前向声明而不是包含标题。）

另一个原因是命名空间允许类本身保持较小。

类的最大优点是类可以传递给模板，而命名空间不能。

我更喜欢将类嵌套在命名空间 Foo_ns/Foo_ns::Foo_c 中，而不是将它们作为对等的 Foo_ns/Foo_c，因为通常一个类需要辅助类，例如 Foo_ns/Foo_ns::Foo_c/Foo_ns::Foo_Helper_c。如果类和命名空间是对等的，那么拥有 Foo_ns/Foo_c 而拥有 Foo_ns::Foo_Helper_c 似乎很奇怪。

我喜欢命名空间，因为我同意 Andrei Alexandresciu： http: [//laser.inf.ethz.ch/2012/slides/Alexandrescu/1-C++%20course%20parts%201%20and%202.pdf](http://laser.inf.ethz.ch/2012/slides/Alexandrescu/1-C++%20course%20parts%201%20and%202.pdf)

```
 Class methods vs. free functions

 • Conventional wisdom: methods are cool, free functions are so 1960s
 • Yet:
   ◦ Free functions improve encapsulation over methods
   ◦ Free functions may be more general
   ◦ Free functions decouple better
   ◦ Free functions support conversions on their left-hand argument

  Surprising fact #2

    Making a function a method should be
    your last, not ﬁrst, choice

  (c) 2012– Andrei Alexandrescu. 32 / 59 
```

创建自由函数比创建类中的方法更好。

但有时只需要使用类——例如用于模板。

命名约定明智

我过去使用过 Foo_ns / Foo_ns::Foo_c

我现在正在使用 Foo_ns / Foo_ns::Foo

（顺便说一句，我倾向于使用 Class_Names_With_Underscores_and_Initial_Caps，而不是 CamelCase。）

如果有意义，我可能会省略命名空间上的 _ns 后缀 - 例如，命名空间和类不需要具有相同的名称。

我不喜欢让他们有相同的名字。考虑命名空间 foo 中类 Foo 的构造函数：

::Foo::Foo::Foo() 与 ::Foo_ns::Foo::Foo()

后者也好不了多少，但也少了一些混乱。

我认为我通常自己创建类，而不将其嵌套在命名空间中。事实上，在我意识到嵌套在命名空间中的类会更好之前，我可能会添加一些静态方法。到那个阶段，重构可能会很痛苦，有时我最终会创建转发函数，从类静态方法转发到命名空间中的自由函数，反之亦然。这让我很遗憾机器人从第 1 步开始就跳到带有命名空间的类。

**结论**

我当前的 BKM 是 Foo_ns / Foo_ns::Foo，即

```
namespace Foo_ns {
   class Foo { 
   ...
   };
} 
```

我会很感激任何建议，任何改进。

还是我只是因为这样做而崩溃？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-19T21:27:33.523

我建议将您的类放在具有相关功能的命名空间中。造成这种情况的一个重要原因是[依赖于参数的查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)(ADL)。当您调用具有类类型参数的非成员函数时，会在该类的封闭命名空间中查找函数名称。因此，如果您有，请说：

```
namespace foo {
  class bar { };
  void baz(bar);
} 
```

如果你想调用`baz`，你不需要明确地给出它包含的命名空间，你可以简单地做：

```
foo::bar x;
baz(x); 
```

没有限定`baz`，编译器仍然找到该函数，因为它位于包含其参数类型的命名空间内。通过这种方式，C++ 将类的封闭命名空间的内容视为该类接口的一部分。以这种方式将属于类接口一部分的函数实现为非成员非友元函数，允许 ADL 找到该函数，[增加了封装性](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)。如果一个函数*不需要*访问一个类的内部，不要让它成为该类的成员 - 相反，将它放在与该类相同的命名空间中。

但是，您的命名空间与您的类同名是值得怀疑的。通常在一个命名空间中会有多个类，即使没有，名称也会不同。命名空间的名称应该描述其内容，而不仅仅是其中的单个类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T21:25:03.773

*分开* `Foo_Class`并且`Foo_Namespace`绝对是错误的，它会阻止您使用 Argument Dependent Lookup 在命名空间中查找打算与类一起使用的函数。

因此，如果命名空间中有函数采用类类型的参数，则该类应该嵌套在命名空间中。

对类和命名空间使用相同的名称有点令人困惑，在某些情况下可能会导致歧义。

使用首字母大写字母命名命名空间也是不常见的。如果您的类名以大写字母开头，您可以使用 namespace`foo`和 class `Foo`，给出`foo::Foo`.

命名空间不会包含多个类吗？这对我来说听起来很不寻常。*我会在其所有*内容之后命名命名空间，而不是一种类型。例如，如果它是一个`socket`类，我会将它放在一个`networking`命名空间中。

我认为`_c`类的后缀是完全荒谬的。我也不喜欢`_ns`命名空间上的后缀，它唯一的优点`Foo_ns::Foo`就是比它更好，`Foo::Foo`但我仍然会这样做`foo::Foo`。

（你的问题的其余部分似乎是“为什么命名空间好”，这不应该真的需要解释，它们被添加到语言中是有原因的，以及对不使用的部分接口使用非成员的好建议'不需要成为成员。谷歌是对的，通常使用标题而不是前向声明，这不会改变您可以在单独的标题中重新打开命名空间以向命名空间添加新名称的事实，这是您的优势重新描述。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:28:32.970

我不喜欢重复事物的“分形”名称并尽量避免它。对于你的情况，我会尝试命名空间“Foo”和嵌套类“Type”。也许其他名称会更合适，但这取决于您的实际用例。这是一个我发现自己一遍又一遍地重复的用例：

```
namespace status {
    enum type {
        invalid,
        okay,
        on_fire
    };
    // debug output helper
    char const* to_string(type t);
} 
```

枚举类型称为`status::type`，它可以取值如`status::okay`. 非常易读恕我直言。

# cmd - Dos inline IF 测试错误级别，不使用延迟扩展

> ID：14418960
> 
> 赞同：2
> 
> 时间：2013-01-19T21:15:45.817
> 
> 标签：cmd, call, delayedvariableexpansion

无论如何都可以在没有延迟扩展的情况下执行以下操作（一行，为了便于阅读而中断）？

```
%comspec% /v:on /c %windir%\System32\reg.exe import c:\temp\test.reg &
 if !errorlevel! neq 0 pause 
```

如果是回声，我知道`call`可以使用，但似乎无法与`if`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-19T23:06:39.423

您可以使用条件执行： `reg.exe import c:\temp\test.reg || pause`
`||`意味着在失败时执行（即错误级别 neq 0）。

您可能还想试试这个例子来看看它是如何工作的：

`find "this" && echo found || echo not found`- 它会通知您“this”是否在输入流中（从键盘输入，除非您重定向）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T23:05:58.210

一种方法是使用这种较旧的语法：

```
%comspec% ... & **if errorlevel 1** pause 
```

在这种情况下，使用了一种特殊的`if`语句变体，用于测试当前的错误级别状态。

另一种选择可能是这样的：

```
%comspec% ... **||** pause 
```

`||`命令分隔符[大致](https://stackoverflow.com/questions/10354016/file-redirection-in-windows-and-errorlevel "Windows 中的文件重定向和 %errorlevel%")等价于，即仅当前`& if !errorlevel! neq 0`一个命令以非零退出代码终止时才执行后续命令。

# java - Java 泛型类型 T toString()

> ID：14418961
> 
> 赞同：0
> 
> 时间：2013-01-19T21:15:49.777
> 
> 标签：java, generics

我有一个方法，我不能改变，它需要一个`T[]`数组。

我需要“ `toString()`”`[i]`数组元素，事先不知道的类型`T`。

对于所有对象，我可以调用`toString()`但`T[]`可以是一组原语，这没有意义：

```
int i = 0;
i.toString(); // nonsense 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-19T21:17:12.723

回应：

> T[] 可能是一个基元数组，这没有意义

泛型类型不能是基元，这保证了数组始终是对象数组。由于每个对象都扩展`Object`它会有一个`toString`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T21:17:17.703

泛型类型不能是原始类型。问题不存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-19T21:17:21.447

泛型不能与原始类型一起使用。因此，`T[]`不能是基元数组。因此，您始终可以调用`arr[i].toString()`when`arr`类型为`T[]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T21:19:18.067

编译器将允许`.toString()`调用，这应该是一个很好的线索，告诉你它实际上会工作。只有当 Java 编译器**不允许**您做某事时，才该考虑如何去做。这就是Java中事物的顺序。

# c++ - 用于函数对和模板专业化的 RAII 包装器

> ID：14418964
> 
> 赞同：7
> 
> 时间：2013-01-19T21:16:30.957
> 
> 标签：c++, variadic-templates, raii, resource-management, scopeguard

我为初始化和释放资源的 C 函数对编写了一个 RAII 包装器，它在大多数情况下都能很好地为我服务。

```
#include <GL/glfw.h>
#include <string>
#include <functional>
#include <stdexcept>

template <typename UninitFuncType,
          typename SuccessValueType,
          SuccessValueType successValue>
class RAIIWrapper
{
public:
    template <typename InitFuncType, typename... Args>
    RAIIWrapper(InitFuncType initializer,
                UninitFuncType uninitializer,
                const std::string &errorString,
                const Args&... args) : 
        uninit_func(uninitializer)
    {
        if (successValue != initializer(args...))
            throw std::runtime_error(errorString);
        initialized = true;
    }

    bool isInitialized() const
    {
        return initalized;
    }

    ~RAIIWrapper()
    {
        if (initalized)
            uninit_func();
    }

    // non-copyable
    RAIIWrapper(const RAIIWrapper &) = delete;
    RAIIWrapper& operator=(const RAIIWrapper &) = delete;

private:
    bool initalized = false;
    std::function<UninitFuncType> uninit_func;
};

using GLFWSystem = RAIIWrapper<decltype(glfwTerminate), decltype(GL_TRUE), GL_TRUE>;
using GLFWWindow = RAIIWrapper<decltype(glfwCloseWindow), decltype(GL_TRUE), GL_TRUE>;

int main()
{
    GLFWSystem glfw(glfwInit,
                    glfwTerminate,
                    "Failed to initialize GLFW");
} 
```

但是，比如说当一个函数返回时，`void`我`Enter/LeaveCriticalSection`不确定如何在这个类中进行操作。我应该专门针对`SuccessValueType = void`案例的课程吗？或者具有默认模板参数的东西应该做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T22:04:23.567

我想指出，

1.  您不需要有关包装类中的初始化函数的信息。您只需要了解未初始化功能。

2.  您可以创建函数助手来实例化您的包装器。

我想出了以下解决方案（我喜欢@ipc 异常处理的想法）

```
template <typename UninitF>
struct RAII_wrapper_type
{
    RAII_wrapper_type(UninitF f)
    :_f(f), _empty(false)
    {}
    RAII_wrapper_type(RAII_wrapper_type&& r)
    :_f(r._f), _empty(false)
    {
      r._empty = true;
    }

    RAII_wrapper_type(const RAII_wrapper_type&) = delete;
    void operator=(const RAII_wrapper_type&) = delete;

    ~RAII_wrapper_type()
    {
      if (!_empty) {
        _f();
      }
    }

  private:
    UninitF _f;
    bool _empty; // _empty gets true when _f is `moved out` from the object.
};

template <typename InitF, typename UninitF, typename RType, typename... Args>
RAII_wrapper_type<UninitF> capture(InitF init_f, UninitF uninit_f, RType succ, 
                                   const char* error, Args... args)
{
  if(init_f(args...) != succ) {
    throw std::runtime_error(error);
  }
  return RAII_wrapper_type<UninitF>(uninit_f);
}

template<typename InitF, typename UninitF, typename... Args>
RAII_wrapper_type<UninitF> capture(InitF init_f, UninitF uninit_f, Args... args)
{
  init_f(args...);
  return RAII_wrapper_type<UninitF>(uninit_f);
} 
```

例子：

```
void t_void_init(int){}
int t_int_init(){ return 1; }
void t_uninit(){}

int main()
{
  auto t1 = capture(t_void_init, t_uninit, 7);
  auto t2 = capture(t_int_init, t_uninit, 0, "some error");
} 
```

**编辑**

`RAII_wrapper_type`应该有移动语义，我们应该小心地实现它的移动构造函数，以防止`uninit_f`多次调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T21:39:18.307

我会分开返回检查和 RAII-Wrapping 的逻辑

```
template <typename UninitFuncType>
class RAIIWrapper
{
public:
  template <typename InitFuncType, typename... Args>
  RAIIWrapper(InitFuncType fpInitFunc,
              UninitFuncType fpUninitFunc,
              Args&&... args)
    : fpUninit(std::move(fpUninitFunc))
  {
    static_assert(std::is_void<decltype(fpInitFunc(args...))>::value, "ignored return value");
    fpInitFunc(std::forward<Args>(args)...);
  }

  bool isInitialized() const { return true; } // false is impossible in your implementation

  ~RAIIWrapper() { fpUninit(); } // won't be called if constructor throws

private:
  UninitFuncType fpUninit; // avoid overhead of std::function not needed
};

template <typename InitFuncType, typename UninitFuncType, typename... Args>
RAIIWrapper<UninitFuncType>
raiiWrapper(InitFuncType fpInitFunc,
            UninitFuncType fpUninitFunc,
            Args&&... args)
{
  return RAIIWrapper<typename std::decay<UninitFuncType>::type>
    (std::move(fpInitFunc), std::move(fpUninitFunc), std::forward<Args>(args)...);
}

template <typename InitFuncType, typename SuccessValueType>
struct ReturnChecker {
  InitFuncType func;
  SuccessValueType success;
  const char *errorString;
  ReturnChecker(InitFuncType func,
                SuccessValueType success,
                const char *errorString)
    : func(std::move(func)), success(std::move(success)), errorString(errorString) {}

  template <typename... Args>
  void operator()(Args&&... args)
  {
    if (func(std::forward<Args>(args)...) != success)
      throw std::runtime_error(errorString);
  }
};
template <typename InitFuncType, typename SuccessValueType,
          typename Ret = ReturnChecker<InitFuncType, SuccessValueType> >
Ret checkReturn(InitFuncType func, SuccessValueType success, const char *errorString)
{
  return Ret{func, success, errorString};
} 
```

我还添加了允许类型推断的功能。以下是如何使用它：

```
auto _ = raiiWrapper(checkReturn(glfwInit, GL_TRUE, "Failed to initialize GLFW"),
                     glfwTerminate); 
```

由于拥有一个具有非 void 返回值的函数对象会导致 static_assert 失败，因此以下情况是不可能的：

```
raiiWrapper(glfwInit, glfwTerminate); // fails compiling 
```

如果你真的想忽略它，你可以添加一个`ignoreReturn`函数对象。另请注意，返回码检查可以根据需要进行复杂的操作（例如成功必须是偶数），因为您可以编写自己的返回码检查器。

# java - 空指针异常

> ID：14418966
> 
> 赞同：0
> 
> 时间：2013-01-19T21:16:34.923
> 
> 标签：java, eclipse

所以我试图在 Eclipse 中运行一个服务器并在运行它时得到这个错误。

```
 java.lang.NullPointerException
[1/19/13 9:07 PM]:  at com.rs2.util.Misc.loadScripts(Misc.java:544)
[1/19/13 9:07 PM]:  at com.rs2.Server.run(Server.java:129)
[1/19/13 9:07 PM]:  at java.lang.Thread.run(Thread.java:662) 
```

这是 Server.java 中的第 129 行：

```
Misc.loadScripts(new File("./data/ruby/")); 
```

这是 loadScripts 中的第 544 行：

```
engine.eval(new FileReader(file)); 
```

而且，如果需要，这里是 loadScripts 类的其余部分：

```
public static void loadScripts(File directory) {
        try {
            ScriptEngine engine = new ScriptEngineManager().getEngineByName("jruby");
            if (!directory.exists() || !directory.isDirectory()) {
                throw new IllegalArgumentException("Missing scripts folder! " + directory.getAbsolutePath());
            }
            for (File file : directory.listFiles()) {
                if (file.isDirectory()) {
                    loadScripts(file);
                } else {
                    if (file.getName().endsWith(".rb")) {
                        engine.eval(new FileReader(file));
                    }
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (ScriptException e) {
            e.printStackTrace();
        }
    } 
```

如果有人可以帮忙，请回答。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:22:08.223

`ScriptEngineManager.getEngineByName()`可以返回`null`。这可能就是发生的事情。

从[文档](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngineManager.html#getEngineByName%28java.lang.String%29)中：

> **返回：**`ScriptEngine`由位于搜索中的工厂创建的 A。`null`如果没有找到这样的工厂，则返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T21:23:19.660

发生这种情况`engine`是因为`null`执行第 544 行时：

```
engine.eval(new FileReader(file)); 
```

这是`null`因为`ScriptEngineManager`没有找到 JRuby 脚本引擎，您试图在这一行中加载：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("jruby"); 
```

确保在运行该程序时 JRuby 脚本引擎包含在类路径中。

您还应该在程序中添加一个检查，例如：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("jruby");
if (engine == null) {
    throw new UnsupportedOperationException("JRuby scripting engine not found");
} 
```

# python - 如何从 PM4 划船设备导入数据

> ID：14418967
> 
> 赞同：-1
> 
> 时间：2013-01-19T21:16:35.260
> 
> 标签：python

我有一个概念 2 模型 D 划船器，我想知道我是否可以将该数据导入我的计算机（我有一台 Mac 和一台 Windows 机器）并在 python 2.7.3 程序中使用它。是否有任何图书馆可以帮助我做到这一点，如果有，哪个是最好的？我需要数据来让我的程序帮助我了解我在 2,000m 和 500m 划船时间的进度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T21:24:35.717

看来你可以。根据[他们的网站](http://www.concept2.com/service/software/concept2-utility/how-to-use/transferring-workouts-to-spreadsheet)，如果您将锻炼转换为电子表格格式，则会将其导出为逗号分隔值 (csv) 文件。然后，您可以使用 Python 的[`csv`](http://docs.python.org/2/library/csv.html)模块来读取数据。

注意：我自己没有尝试过，也没有设备/数据文件来测试它。你的旅费可能会改变。

# javascript - 在除 chrome 之外的所有浏览器上执行 javascript 代码？

> ID：14418970
> 
> 赞同：0
> 
> 时间：2013-01-19T21:16:49.517
> 
> 标签：javascript, html, google-chrome, firefox, browser

是否可以在所有浏览器上执行 javascript 代码，但不能在 chrome 上执行？

我试着到处寻找代码片段，但我只找到浏览器检测代码并且无法一起工作，所以代码不会在 chrome 浏览器上执行:(

任何帮助将不胜感激！

这是我目前拥有的，这会工作吗？

```
<SCRIPT language="JavaScript">
<!--
var browserName=navigator.appName; 
if (browserName=="Google Chrome")
{ 

}
else 
{ 
 "the code for every other browser here"
   }
}
//-->
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:33:16.990

[`appName`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.appName)在这种情况下没有帮助，因为它只会`"Netscape"`在大多数情况下返回。改用`appVersion`：

```
var isChrome = /Chrome/i.test(navigator.appVersion);
if(!isChrome){
    //stuff for non-Chrome
} 
```

但是，用户可以轻松地覆盖此值，从而导致浏览器检测不可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:39:06.273

运行后`console.log(window)`我注意到一个对象名称 chrome，我尝试为这个对象测试其他浏览器，它是未定义的

## [http://jsfiddle.net/aWqSt/1/](http://jsfiddle.net/aWqSt/1/)

```
if(!window.chrome){
    alert("you are not using google chrome :(");
}else{
    alert("you are using google chrome");
} 
```

考虑到用户没有篡改请求，您很可能对 Derek 或我的示例是安全的，但要确定用户没有使用谷歌浏览器

## [http://jsfiddle.net/aWqSt/2/](http://jsfiddle.net/aWqSt/2/)

```
var isChrome = /Chrome/i.test(navigator.appVersion);
if(!window.chrome && !isChrome){
    alert("you are not using google chrome :(");
}else{
    alert("you are using google chrome");
} 
```

# jquery - jquery - div 向下推送内容

> ID：14418981
> 
> 赞同：0
> 
> 时间：2013-01-19T21:17:42.713
> 
> 标签：jquery, css, css-float

这个 jquery 示例完全符合我的要求：

[http://jsfiddle.net/yGZHC/5/](http://jsfiddle.net/yGZHC/5/)

在我的实现中，我的 jquery 工作正常，我的浮动框工作正常，但是我的所有内容都被浮动框（div）向下推：

[http://zerogravpro.com/DEI/](http://zerogravpro.com/DEI/)

首先，注意菜单和所有内容是如何从顶部向下推的。现在单击菜单最右侧的小白底黑购物车图标。注意下浮的盒子。一切都很好，但是为什么它会向下推我的内容，而在上面的 jsfiddle 示例中它不会向下推内容？似乎我已经实现了所有相同的样式和 jquery。我怀疑存在冲突的样式，并且希望能帮助我了解我需要调整哪种样式才能使这项工作。谢谢。

这是我的 div 将内容向下推：

```
<div id="slidenav">
<div id="innerCart" class="ui-widget-content ui-corner-all">
<h3 class="ui-widget-header ui-corner-all">Show</h3>
<p>
  Etiam libero neque, luctus a, eleifend nec, semper at, lorem. Sed pede. Nulla lorem metus, adipiscing ut, luctus sed, hendrerit vitae, mi.
</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:20:00.920

那是因为您`#slidenav`将其`position: relative`更改为`absolute`，您应该没问题。如果你说它是相对的。该空间将被放置，并将相对于该位置移动。

# java - 如何检测图像是否像素化

> ID：14418983
> 
> 赞同：9
> 
> 时间：2013-01-19T21:17:48.237
> 
> 标签：java, algorithm, image-processing, opencv

之前在 SO 上问过这样一个问题：[Detecting a pixelated image in python](https://stackoverflow.com/questions/12942365/detecting-a-pixelated-image-in-python) and also on [quora](http://www.quora.com/How-do-I-detect-if-an-image-is-pixelated)

我正在尝试找出是否可以将用户上传的图像检测为“像素化”。像素化是指像[这样](http://www.caughtinthefire.com/wp-content/uploads/2009/03/fireworks-pixelate-02.gif?)的图像：在我的情况下，我无法访问原始（非像素化）版本。

**我的方法**：

不确定这种方法有多有效，但如果我可以获取图像中每个像素的 RGB，然后将其与相邻像素进行比较，看看它们是否相似，那么我可以检测到图像是否像素化？我可以获得像素的 RGB，但不知道如何将它们与邻居进行比较。

是否已经有用于执行此类操作的算法？我可以采取其他一些方法吗？我不受任何特定语言的约束。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T23:36:10.897

这是一个相当简单的方法，可以工作：

1.  从 x 和 y 中平移 1 个像素的副本中减去图像。
2.  对列和行中的像素求和（我只在下面显示列）。
3.  找出峰值位置的频率和标准偏差。
4.  如果标准偏差低于某个阈值，则图像被像素化。

第 1 步后的图像：

![在此处输入图像描述](../Images/e2ae0009837267d62a21688c3e33a7ac.png)

呈现出清晰的网格图案。现在，如果我们按列对像素求和，我们得到：

![在此处输入图像描述](../Images/abd45473c3134c675d169107baa9c897.png) 现在如果我们能弄清楚峰值列间距的规律，并将其用作阈值来确定图像是否像素化。

这是一些快速而粗略的 python 代码，以提供一种方法的想法：

```
import numpy as np
import Image, ImageChops

im = Image.open('fireworks-pixelate-02.gif')    
im2 = im.transform(im.size, Image.AFFINE, (1,0,1,0,1,1))
im3 = ImageChops.subtract(im, im2)
im3 = np.asarray(im3)
im3 = np.sum(im3,axis=0)[:-1]
mean = np.mean(im3)
peak_spacing = np.diff([i for i,v in enumerate(im3) if v > mean*2])
mean_spacing = np.mean(peak_spacing)
std_spacing = np.std(peak_spacing)
print 'mean gap:', mean_spacing, 'std', std_spacing 
```

输出：

```
mean gap: 14.6944444444 std: 3.23882218342 
```

低标准 = 像素化图像

这个未像素化的图像： ![在此处输入图像描述](../Images/c820c5644c6be41948a2e0c7a25df9e4.png)

有一个像这样的相应图表：

![在此处输入图像描述](../Images/dbd65e2a1677586c466db06de9d3f1a6.png) 产生更高的标准：

```
mean gap: 16.1666666667 std: 26.8416136293 
```

请注意，“平均差距”是没有意义的，因为 std 要高得多。

希望这足以说明这种方法可以很好地工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-19T21:25:35.643

一些方法：

1）实现canny或其他边缘检测并改变边缘阈值以查看结果是否为网格。可以通过将霍夫线检测器应用于生成的边缘图像来检测网格。见下文 (2)。

2）（这实际上是在边缘检测之前对图像进行阈值处理；也建议使用中值滤波器或其他去噪滤波器对图像进行平滑处理）。从左到右扫描，并在每个像素颜色变化时为像素分配黑色或白色。继续使用黑色/白色，直到颜色发生变化，然后从黑色切换到白色或从白色切换到黑色。如果像素化，你最终会得到一个像网格一样的图像。您可以在 iamge 上运行标准线检测（您也可以对[1](http://codebazaar.blogspot.com/2011/08/chess-board-recognition-project-part-1.html)执行此操作）并查看生成的线的斜率是否垂直和平行，以及线是否相当等距。互联网上有示例行检测算法（甚至是 Java 实现）。

本[网站](http://codebazaar.blogspot.com/2011/08/chess-board-recognition-project-part-1.html)参考了线检测和边缘检测算法。

编辑：针对 mmgp 的问题（挑战 +1，我喜欢这样！），这就是我对问题中的示例图像所做的：1）边缘检测 2）灰度 3）休变换（高阈值）附加的是休变换输出。通过评估所有具有水平/垂直斜率的线并计算它们之间的距离，可以识别网格图案。这并不自动意味着图像是像素化的（棋盘会显示为像素化）。可能存在误报。

![在此处输入图像描述](../Images/5e7fe24ef83deb3cae4db0cffb2e37ec.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T15:07:33.127

This is going to be problematic, there are many ways to pixelate images. Even using a single method, you can have it arbitrarily rotated. In theory this rotation shouldn't affect methods like Hough, but in practice it does because you cannot have perfectly rasterized lines at arbitrary angles. My approach is simplistic, it is not going to work every time (it will probably fail most of time), but you really have to better define what you want to do. Are you going to tell the user: "hey, your image is pixelated, I don't want it" ? What you want to do is not clear, the scope is not clear too.

So here is the approach. Split your image into its color channels, your example one is a palleted GIF but that can be easily seen as a RGB image. If it is a grayscale then you mostly like have one channel, that is fine. If your image have an alpha channel, either blend it or ignore it. With this separated color channels, apply a morphological gradient in each one, binarize each one by Otsu (since it is automatic, relatively good, easily available), and combine the n binary channels into one by adding them. The morphological gradient will give a high response for strong edges (including noise), and the binarization step will keep them. Now you remove components that are too small and do a thinning to get one-pixel-wide edges. Here is what we get with your example image after these steps:

![enter image description here](../Images/2ff852a2030078ebbfa0f731451c6fd7.png) ![enter image description here](../Images/bafff47ca57d1d5c6344f034c755b93a.png)

```
f = Import["http://www.caughtinthefire.com/wp-content/uploads/2009/03/\
     fireworks-pixelate-02.gif"]
split = Binarize[ImageSubtract[Dilation[#, 1], Erosion[#, 1]]] & /@ 
  ColorSeparate[f, "RGB"]
thin = Thinning[SelectComponents[Fold[ImageAdd, split[[1]], split[[2 ;;]]], 
  "Count", # > 10 &]] 
```

Now we proceed to detect the lines in this thinned binary image. The expectation is that it will form many rectangular areas when the image is pixelated, but there is no guarantee that we can actually form these rectangular areas. Supposing we can, consider each of these areas as a connected component. Then if we perform a simply component analysis as: if the ratio between the area of its convex hull and the area of its bounding box is greater than some value, then this area is a rectangular area. If we end up with many rectangular areas, then you say your image is pixelated (but actually there is no confidence on saying such thing). Next we see the original image with the detected lines overlaid, at right we see the connected components (points that are not black) that remain after considering the analysis mentioned using a ratio > 95%. In this case, there were 542 connected components in total, which were reduced to 483\. This means nearly 90% of the components are rectangular. You could also take into consideration the area of the remaining components, or combine this analysis with other ones, but I'm not doing this here.

![enter image description here](../Images/a91bb8d9cd86b5cb4c4a599b92ce78fd.png) ![enter image description here](../Images/d178c113839aac2296361c6197963762.png)

```
lines = ImageLines[thin, 0.05, Method -> "RANSAC"];
Show[f, Graphics[{Thick, Blue, Line /@ lines}]] (* The left image above. *)
blank = Image[ConstantArray[255, Reverse@ImageDimensions[thin]]];
blankcc = ImagePad[Binarize[Image[Show[blank, 
  Graphics[{Thick, Black, Line /@ lines}]]]], 1, Black]
ccrect = SelectComponents[MorphologicalComponents[blankcc], {"BoundingBoxArea", 
  "ConvexArea"}, #2/#1 > 0.95 &];
Colorize[ccrect, ColorFunction -> "DarkRainbow"] (* The right image above. *) 
```

This is your indication of "pixelated".

Here are other results considering other images. This is always a sequence of three images in this order: original, result as above without changing anything, result as above after changing the threshold for line detection.

Everything detected as rectangular. But a threshold of `0.05` for line detection is too high here, after reducing it to `0.01` we get a better division of the components.

![enter image description here](../Images/09711c8d0ccdb2fcc2cc512309ab92ad.png) ![enter image description here](../Images/07d07c4020877cb65a229b1d61305a56.png) ![enter image description here](../Images/ba42d837b8f9a2e89b33462bd0df6001.png)

Next we consider an image which is outside of what we expect, so we end up with very few components. There is no threshold for line detection that will give a greater amount of rectangular components, so the third image is empty (or fully black, since no component remains).

![enter image description here](../Images/e7e72c63a1405be2a105770c294c77d6.png) ![enter image description here](../Images/91098b642d53d1798e5cddf979a2c7b7.png)

Lastly, a pixelation where the squares are rotated. The process for generating the following image might have been different than the one used in the example image, but I have no idea since I'm not the author. The right image is the result of raising the line threshold to `0.08`. The problem here is that the regions are relatively large, which I wouldn't consider for detection of pixelated images.

![enter image description here](../Images/82835c91f5d4578ff04fce3d75df8fbf.png) ![enter image description here](../Images/ec85c1a7796f07690d06b7adcf39eda9.png) ![enter image description here](../Images/9edcadadadd8de33201e54daeafdbe3f.png)

# java - Java 对象错误

> ID：14418986
> 
> 赞同：1
> 
> 时间：2013-01-19T21:18:17.690
> 
> 标签：java

好的，我对 Java 很陌生，我正在尝试完成家庭作业，但我的对象在我的课堂上不起作用。（如果我使用了错误的术语，请原谅我，这里是新手）

所以我正在制作一个记录 2 圈的基本秒表程序。我已经到了创造第一圈的地步，而且效果很好。然后，当我调用 timer.reset() 对象来重置秒表时，它显示的时间与第一圈相同。为什么我的 timer.reset() 不起作用？

```
public class StopWatch
{

    /**
     * This method  
     *
     * @param args
     */
    public static void main(String[] args)
    {
        // TODO Auto-generated method stub

        Scanner input = new Scanner(System.in);
        System.out.println("Start stopwatch [press s]: ");
        System.out.println("Stop  stopwatch [press q]: ");

        Timer timer = new Timer();
        input.next();
        timer.start();

        input.next();
        timer.stop();

        int elapsedTime = timer.getElapsedTime();

        System.out.print("Elapsed time: ");
        System.out.print(elapsedTime);
        System.out.println(" milliseconds");

        timer.reset();

        input.next();
        timer.start();

        input.next();
        timer.stop();

        System.out.print("Elapsed time: ");
        System.out.print(elapsedTime);
        System.out.println(" milliseconds");

    }

} 
```

这是我在我的程序中使用的 timer.java 类。

```
public class Timer {
  private long start;
  private long stop;
  private int elapsedTime;
  public Timer() {
  }
  public void start() {
    if (this.start == 0 && this.stop == 0)
      this.start = System.currentTimeMillis();
  }
  public void stop() {
    if (this.start > 0 && this.stop == 0) {
      this.stop = System.currentTimeMillis();
      this.elapsedTime = (int) (stop - start);
    }
  }
  public int getElapsedTime() {
    return this.elapsedTime;
  }
  public void reset() {
    this.start = 0;
    this.stop = 0;
    this.elapsedTime = 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-19T21:24:21.450

您错过了再次阅读经过的时间：

```
public static void main(String[] args)
{
    Scanner input = new Scanner(System.in);
    System.out.println("Start stopwatch [press s]: ");
    System.out.println("Stop  stopwatch [press q]: ");

    Timer timer = new Timer();
    input.next();
    timer.start();

    input.next();
    timer.stop();

    System.out.println("Elapsed time: "+ timer.getElapsedTime()+" milliseconds");

    timer.reset();

    input.next();
    timer.start();

    input.next();
    timer.stop();

    System.out.println("Elapsed time: "+ timer.getElapsedTime()+" milliseconds");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:25:03.507

重置后执行的步骤与重置之前执行的步骤相同。这样，您在重置前立即显示的结果与重置后的结果以及重复的步骤相同。尝试重置后立即打印结果，您将看到更改。

# php - 当用户按下提交时，我将如何验证（使用 PHP）表单？想确保我在概念上理解这一点

> ID：14418989
> 
> 赞同：0
> 
> 时间：2013-01-19T21:18:32.340
> 
> 标签：php, html, forms

我试图理解这一点，但我遇到了一些麻烦。

基本上，我有一个表格，里面有一些输入。我将表单操作设置为脚本，该脚本将在提交时将一些内容输出到新页面并通过电子邮件发送给用户。伟大的。

我的问题是在验证他们的输入时。我想确保没有任何字段为空。如果它们留空，当用户按下提交时，我希望重新加载页面，突出显示留空的框并保留其先前的信息。

我只是不明白我应该怎么做。我在想我可以再次输出 HTML，但突出显示字段。这可行，但在代码中非常冗长，并且 URL 与以前不同，因为 URL 将是处理脚本的位置。我想我可以在处理脚本中验证它，然后将它们重定向回原始页面，但是我无法保留他们的输入并标记他们的空输入。

我已经用谷歌搜索并尝试找到合适的解决方案，他们中的很多人都在处理这个问题，他们在初始表单页面上有一个 php 脚本，他们检查用户是否点击提交的表单，如果他们在那里验证它做了，并输出结果（例如本教程：http: [//papermashup.com/php-form-validation/](http://papermashup.com/php-form-validation/)）。很酷，但我有一些问题。

*   这与提交时触发的 JavaScript 解决方案有何不同？我为什么不这样做呢？
*   你怎么能把它放在你的表格之上？我认为代码从上到下读取，所以当它点击表单并点击提交时，我看不到上面的表单会如何触发。
*   我不能用这个解决方案影响 CSS，可以吗？比如让一个盒子用红色突出显示？
*   如果验证没问题，我该如何让他们进入处理脚本？我将它作为表单上的操作属性，但这似乎阻止了它。

这样做的正确方法是什么？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:12:12.310

有太多方法可以做到这一点首先 php 是服务器端语言，我假设您知道这一点，关于验证，它不像 javascript（客户端）那样工作，无法对 onsubmit 事件进行验证

一种解决方案是验证主页中的表单

我写得很快，检查我是否错过了报价或......但这应该这样做

```
<?php

$redirect_form="";
$highlight_field="";
$error="";
$valid=true;

if(isset($_POST["submit"]) && $_POST["submit"]=="Submit"){ //assuming that you have an input text called: first_name

$first_name=trim($_POST["first_name"]);

if($first_name==""){
$error.="Please enter your first name";
$highlight_field="class='highlight_field'";
$valid=false;
}

if($valid){

$redirect_form="<form name='new_page' action='new_page.php' method='post'>";
$redirect_form="<input type='hidden' name='first_name' value='".$first_name."' />";
$redirect_form="</form>";
$redirect_form="<script type='text/javascript>document.new_page.submit()</script>";

}

?>

<html>
<head>
<style>.highlight_field: color:#990000; </style>
<body>
<?php

if(isset($_POST["submit"]) && $_POST["submit"]=="Submit"){

if(!$valid){
echo error;
}
else{
echo $redirect_form;
}
?>

<form name='main_page' action='main_page.php' method='post'>
<span <?php echo $highlight_field; ?>>First name</span><input type='text' name='first_name' value='' />
<input type='submit' name='submit' value='Submit' />

</form>

</body>
</head>
</html> 
```

或者你可以用ajax来做

# python - Python 中的网络摄像头 DirectShow 属性页

> ID：14418990
> 
> 赞同：2
> 
> 时间：2013-01-19T21:18:34.820
> 
> 标签：python, webcam, directshow

我正在开发一个需要与许多不同 USB 网络摄像头通信的 Windows Python 2.7 应用程序。我一直在使用 OpenCV，但是对于一些科学网络摄像头，没有检测到默认帧率、捕获格式等，我只得到一个空白图像。可以打开 DirectShow 属性页的外部程序可以在我的程序中解决此问题，但我希望在我的应用程序中具有此功能。

我已经尝试了一个可用的 Python 库来执行此操作：VideoCapture (http://videocapture.sourceforge.net/)。虽然这会打开属性页，但它不允许更改任何设备设置（“连接错误...此格式当前不可用”，但 AMCAP 有效）。我想知道底层代码是否太过时了。

在 VideoCapture 或 videoInput (http://www.muonics.net/school/spring05/videoInput/) 中使用 C++ 代码并不是很有帮助，因为它们都依赖于分布在许多旧的特定 DirectX/WindowsSDK 包中的旧库。不幸的是，我没有知识或时间从头开始或找出 VideoCapture 出了什么问题。

是否有另一个已经组装好的 Python 包可以做到这一点？我一直在寻找一段时间，但运气不佳。我看了一点 libvlc python 绑定（因为 VLC 可以访问属性页）和 DirectPython，但我不清楚这些是否有我正在寻找的东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T03:01:43.357

由于我最近一直在研究这个问题，因此我可以为任何感兴趣的人提供我自己的问题的*部分*答案：

[videoInput](http://www.muonics.net/school/spring05/videoInput/)库包含在[OpenCV](http://opencv.org/)的 Direct Show 实现中。videoInput库可用于打开视频属性页面（增益、曝光等），但[不能](http://www.muonics.net/school/spring05/videoInput/)用于打开视频设置页面（具有捕获格式、图像大小、帧速率等），因为它没有代码。 [Cython](http://cython.org/)可用于在 Python 中与此库进行交互，而不会出现太多问题。

OpenCV 的 Python 绑定可用于访问 Direct Show 视频属性页面。这需要：

1.  打开相机设备时使用 Direct Show 驱动程序，通过将值添加`CV_CAP_DSHOW`到索引（没有 python 常量，使用值 700）。
2.  调用窗口以`CV_CAP_PROP_SETTINGS`使用`VideoCapture::set(int propID, ...)`. 同样，这个常量不在 Python 绑定中，所以使用值 37（来自 highgui_c.h）

（这些指令从 OpenCV 2.4.6 开始工作，希望 Python 绑定会出现更多常量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T11:53:56.277

我有一个类似的声音问题。基本上，我想看看我捕捉到的东西，不小心把它修好了。

```
cap = cv2.VideoCapture(0)
print cap.read()      #once to inialize
print cap.read()      #twice to check that it actually initialized 
```

第一个`.read()`返回`(False, None)`，而第二个实际上有提要。在我添加这个之前，我会传递`None`给`cv2.imshow('title',frame)`我的程序会崩溃。

我不知道这是否能解决你的问题。我的是 DinoLite USB 显微镜，我想我只是通过 DirectX 访问它。OpenCV 2.4.8。

# php - php中是否有像js一样的单个执行函数

> ID：14418992
> 
> 赞同：0
> 
> 时间：2013-01-19T21:18:42.733
> 
> 标签：php

> **可能重复：**
> [立即执行的匿名函数](https://stackoverflow.com/questions/3568410/anonymous-functions-that-execute-immediately)

javascript代码：

```
(function(){
  var msg = 'Hello World';
  console.log(msg);
})(); 
```

在 php 中是否有等效的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T22:06:52.117

有可能的：

```
call_user_func(function() {
  $localvar = 'foo';
  echo $localvar;
}); 
```

虽然我同意它在 PHP 中的价值低于在 JS 中的价值，但还是有一些用例，即过程包含文件。有关该方法的进一步说明，请参阅[我的博客](http://www.schmengler-se.de/anonymous-function-calls-in-php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:25:45.977

您示例中的模式用于克服 javascript 中函数级静态范围的问题。PHP 中没有等效的模式，因为 PHP 没有这样的问题。

您不妨创建一个新类。

# string - 将字符串与 const char* 进行比较总是假的

> ID：14418994
> 
> 赞同：1
> 
> 时间：2013-01-19T21:19:06.233
> 
> 标签：string, char, compare, fstream, getline

我正在尝试将字符串与 const char* 进行比较。

```
std::string line;
std::fstream tmpl; 
```

我使用 getline 用来自 fstream 文件的一些输入填充字符串变量：

```
getline(tmpl, line); 
```

然后我想将该行与以下内容进行比较：

```
if(line == "$something") 
```

由于某种原因，它总是返回 false。我已经尝试了很多不同的东西，但没有成功（让它总是返回假或总是真）

为什么以及如何解决此问题？我错过了什么？getline 不是正确的方法吗？

**使用**`string.find()`. _ 当我尝试不同的事情时，我误用了它。然而，关于比较的问题`==`仍然悬而未决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:26:00.513

更改您的代码以使用它：

```
if (strcmp(line,"$something")==0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T21:56:45.117

试试下面的代码..我认为它会工作......

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  string sample ="hi";
  ifstream myfile ("example.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
    if(line.compare(sample) == 0)
      cout << line << endl;
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T22:35:43.320

好的现在试试下面的代码......

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  string sample ="hi";
  string datatoprocess ="";
  ifstream myfile ("example.txt");
if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      datatoprocess = datatoprocess + line;
    }
  unsigned found = datatoprocess.find(sample);
  if (found!=std::string::npos)
    std::cout << "Record Found";
    myfile.close();
  }
else cout << "Unable to open file"; 

  return 0;
} 
```

# python - python JSON 按键值排序，然后显示过滤后的数据

> ID：14418995
> 
> 赞同：1
> 
> 时间：2013-01-19T21:19:08.853
> 
> 标签：python, json

我正在尝试按键的值（年份）对 JSON 数据进行排序，然后**尝试仅显示格式为 'DVD' 的项目**，我尝试了很多方法，但无法得出一个干净的解决方案。你能帮我解决这个问题吗？我是python新手，如果在这里问得太简单，请原谅。

JSON：

```
{
    "pagination": {
        "per_page": 50,
        "pages": 1,
        "page": 1,
        "urls": {},
        "items": 8
    },
    "results": [{
        "style": ["RnB/Swing", "Ballad"],
        "thumb": "http://api.discogs.com/image/R-90-217365-1270055830.jpeg",
        "title": "Britney Spears - Oops!...I Did It Again",
        "country": "US",
        "format": ["CD", "Album"],
        "uri": "/Britney-Spears-OopsI-Did-It-Again/master/27443",
        "label": ["Jive"],
        "catno": "01241-41704-2",
        "year": "2000",
        "genre": ["Pop"],
        "resource_url": "http://api.discogs.com/masters/27443",
        "type": "master",
        "id": 27443
    }, {
        "thumb": "http://api.discogs.com/image/R-90-2029929-1259535792.jpeg",
        "title": "Britney Spears - The Singles Collection",
        "country": "UK",
        "format": ["CD", "Compilation"],
        "uri": "/Britney-Spears-The-Singles-Collection/master/203074",
        "label": ["Jive"],
        "catno": "88697 623422",
        "year": "2009",
        "genre": ["Pop"],
        "resource_url": "http://api.discogs.com/masters/203074",
        "type": "master",
        "id": 203074
    }, {
        "style": ["RnB/Swing"],
        "thumb": "http://api.discogs.com/image/R-90-1895804-1250792689.jpeg",
        "title": "Britney Spears - Greatest Hits: My Prerogative",
        "country": "US",
        "format": ["DVD", "Compilation", "NTSC"],
        "uri": "/Britney-Spears-Greatest-Hits-My-Prerogative/master/270902",
        "label": ["Jive", "Zomba Video"],
        "catno": "82876-65443-9A",
        "year": "2004",
        "genre": ["Electronic", "Pop"],
        "resource_url": "http://api.discogs.com/masters/270902",
        "type": "master",
        "id": 270902
    }, {
        "style": ["RnB/Swing", "Ballad"],
        "thumb": "http://api.discogs.com/image/R-90-2421214-1283141143.jpeg",
        "format": ["DVD", "DVD-Video", "NTSC", "Multichannel"],
        "country": "US",
        "barcode": ["0 1241-41784-9 7"],
        "uri": "/Britney-Spears-Live-From-Las-Vegas/master/271031",
        "label": ["Jive"],
        "catno": "01241-41784-9",
        "year": "2002",
        "genre": ["Electronic", "Hip Hop", "Pop"],
        "title": "Britney Spears - Live From Las Vegas",
        "resource_url": "http://api.discogs.com/masters/271031",
        "type": "master",
        "id": 271031
    }, {
        "style": ["Europop"],
        "thumb": "http://api.discogs.com/image/R-90-2410806-1283122933.jpeg",
        "format": ["DVD", "DVD-Video", "NTSC"],
        "country": "US",
        "barcode": ["0 1241-41704-9 1"],
        "uri": "/Britney-Spears-Live-And-More/master/270904",
        "label": ["Jive"],
        "catno": "01241-41704-9",
        "year": "2000",
        "genre": ["Pop"],
        "title": "Britney Spears - Live And More!",
        "resource_url": "http://api.discogs.com/masters/270904",
        "type": "master",
        "id": 270904
    }]
} 
```

PYTHON：

```
url1 = "http://api.discogs.com/database/search?sort=year&sort_order="
url2 = "asc&artist=%22"+artist+"%22&track="
url3 = "%22"+song+"%22&format_exact=Album&type=master"
url = url1 + url2 + url3
print url
request = urllib2.Request(url)
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)')
request.add_header('Content-Type','application/json')
response = urllib2.urlopen(request)
json_raw = response.readlines()
json_object = json.loads(json_raw[0])

for row in sorted(json_object['results']): #stuck here to sort on key's value...
    print '-----------------------------start------------------------------------------'
    print row['format']
    print row['id']
    print '-----------------------------end--------------------------------------------' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T21:22:08.130

`sorted`接受一个`key`参数，它就是这样做的：

```
from operator import itemgetter

for result in sorted(json_object['results'], key=itemgetter('year')):
    if 'DVD' in result['format']:
        continue 
```

# php - Bootstrap - 对齐问题

> ID：14418998
> 
> 赞同：1
> 
> 时间：2013-01-19T21:19:29.260
> 
> 标签：php, css, twitter-bootstrap

我有一个漫画网站，我正在重做——[用棍子打树](http://hittingtreeswithsticks.com)。

我正在尝试从当前可怕的 1990 年布局转变为这种布局（颜色和字体只是占位符 atm）......

![在此处输入图像描述](../Images/ca955b5dc791fe83e4d2594af3f999c5.png)

这就是我认为 CSS div 的布局方式：

![在此处输入图像描述](../Images/85d5c7f0b46f2bfb7e27f64306caf10e.png)

反正，

我试图让最右边的搜索栏能够在搜索到某些内容后向下扩展。现在我向下推它下面的行。它应该独立于这些行。基本上，我的主要目标是让搜索栏与前两个框（突出显示的漫画和最新的艺术作品）内联，但也不下推下面输出的漫画......它只需要成为一个**独立的列**。

```
 <div class="row-fluid show-grid">
    <div class="span6 offset2">
        <img src="./images/highlighted comic.png"/>
        <img src="./images/latest artwork.png"/>
    </div>
    <div class="span2">
        <?php include 'include/search_field.php'; ?>
    </div>
</div>

//Where the comics are outputted:
<div class="row-fluid show-grid">   
    <div class="span6 offset2">
        <div class="allimages">
            <div class="row-fluid show-grid">   
                <div class="span6">
                    <h3>latest</h3>
                    <?php include 'scripts/paging.php'; ?>
                </div>
                <div class="span2">
                    <h3>hot</h3>    
                    <?php echo hot(7, $site); ?>
                </div>
            </div>
        </div>
    </div>
</div> 
```

**而且我不能只移动`<?php include 'include/search_field.php'; ?>`到输出漫画的下方**（我知道这将解决扩展搜索下推漫画的问题......但搜索框需要与突出显示的漫画和最新艺术品保持一致箱）

* * *

这是我搜索时的样子：

**预搜索：**

![在此处输入图像描述](../Images/d5f882a50244cb32d398d4a8069df729.png)

**当您搜索某些内容时：**

![在此处输入图像描述](../Images/d867424be01512a4d94c0d8d5dd19529.png)

有什么想法吗？

谢谢！

* * *

编辑：我无法将搜索框与左侧框齐平

```
 <div class="row-fluid">
    <div class="span8 offset2">
        <div class="row-fluid">
            <div class="span5"><img src="./images/highlighted comic.png"/></div>
            <div class="span4"><img src="./images/latest artwork.png"/></div>
        </div>
        <div class="row-fluid">
            <div class="comicDisplay">
                <div class="well">
                    <div class="row-fluid"> 
                        <div class="span7"><h3>Latest</h3>  <?php include 'scripts/paging.php'; ?></div>
                        <div class="span2"><h3>Hot</h3> <?php echo hot(7, $site); ?></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="span2">
        <?php include 'include/search_field.php'; ?>
    </div>
</div><!--End top row fluid--> 
```

![在此处输入图像描述](../Images/a8cfedf4a17e4c903e40edd9cd336f92.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T22:59:14.523

> 独立栏

就是这样！

看看这个（来自[http://jsfiddle.net/Q7k7W/3/](http://jsfiddle.net/Q7k7W/3/)）：

```
<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css">
<style type="text/css">
.b {
    border: 1px solid #ccc;
    padding: 10px;
}
</style>

<div class="container-fluid" style="margin-top: 20px;">
    <div class="row-fluid">
        <!-- The main content column placed on the left (for appropriate viewports/browser widths) -->
        <div class="span9 b">
            <div class="row-fluid">
                <div class="span8 b">Highlighted Comic</div>
                <div class="span4 b">Latest Artwork</div>
            </div>
            <div class="row-fluid">
                <div class="span8 b">Latest</div>
                <div class="span4 b">Hot</div>
            </div>
        </div>
        <!-- 
        The search/sidebar column placed on the right.
        The height of this column shouldn't affect the height of the left column.
        -->
        <div class="span3 b" style="height: 300px;">
            Search
        </div>
    </div>
</div> 
```

您将为两列创建两个 div（一个用于左侧的主要内容，另一个用于右侧的搜索/侧边栏）。在上面的 jsfiddle 示例中，div 是嵌套的（请参阅[Bootstrap 脚手架文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)的“流体嵌套”部分）。

> 而且我不能只移动到输出漫画的下方（我知道这将解决扩展搜索下推漫画的问题......但搜索框需要与突出显示的漫画和最新艺术品保持一致箱）

如果将搜索移动到不同的列（如上例所示），您仍然应该能够保持对齐。

搜索栏之所以下推漫画，是因为它与突出显示的漫画和最新的艺术品*在同一行布局。*它目前的铺设方式是[这样](https://www.evernote.com/shard/s4/sh/5c88ad23-f7b9-4f89-95d9-07b4079a8238/73e87c503998fb57971938a0785639d4)的。您需要按照您在[第二张图片](http://i.stack.imgur.com/Gkx2U.png)中的描述进行布局：左块和右块（就像上面的 jsfiddle 示例一样）。

您可能会发现这两个资源也很有帮助：

*   [http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)
*   [http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)